# StackOverflow 问答 15850000-15850999

# c# - 无法从网站下载特定文件

> ID：15850001
> 
> 赞同：0
> 
> 时间：2013-04-06T10:54:35.523
> 
> 标签：c#, download, webclient

我需要在以下地址下载生成的 csv 文件：

[http://www.mbank.pl/bin/sfi/sfi_do_csv.php?sh=0,3,4,5,6,7,8,9,10,11&date=2013-04-05&sorted=StopaZw1r_down&fund_type=&collection= &显示=全部](http://www.mbank.pl/bin/sfi/sfi_do_csv.php?sh=0,3,4,5,6,7,8,9,10,11&date=2013-04-05&sorted=StopaZw1r_down&fund_type=&collection=&show=all)

不幸的是，在大多数情况下，尽管当您在浏览器中键入网址时会开始正确下载文件，但仍会发生超时。

我尝试了所有我知道的方法。我当前的代码：

```
 WebClient webClient = new WebClient();
    webClient.DownloadFile("http://www.mbank.pl/bin/sfi/sfi_do_csv.php?sh=0,3,4,5,6,7,8,9,10,11&date=2013-04-05&sorted=StopaZw1r_down&fund_type=&collection=&show=all", @"d:\myfile.csv"); 
```

请帮助并修改代码，以便文件能够正确下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:10:47.117

```
WebClient webClient = new WebClient();
webClient.Headers.Add("user-agent", "CustomClient");
webClient.DownloadFile("http://www.mbank.pl/bin/sfi/sfi_do_csv.php?sh=0,3,4,5,6,7,8,9,10,11&date=2013-04-05&sorted=StopaZw1r_down&fund_type=&collection=&show=all", @"d:\myfile.csv"); 
```

如果您不指定“用户代理”，某些服务器会拒绝回答。我不知道为什么会这样，但在这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:02:37.587

可以试试这个

```
using (var client = new WebClient())
  {
    client.DownloadFile("http://www.mbank.pl/bin/sfi/sfi_do_csv.php?sh=0,3,4,5,6,7,8,9,10,11&date=2013-04-05&sorted=StopaZw1r_down&fund_type=&collection=&show=all",  @"D:\Downloads\1.zip");
  } 
```

或者如果有任何例外，试试这个

```
public void DownloadFile(string _URL, string _SaveAs)
    {
        try
        {
            System.Net.WebClient _WebClient = new System.Net.WebClient();
            // Downloads the resource with the specified URI to a local file.
            _WebClient.DownloadFile(_URL, _SaveAs);
        }
        catch (Exception _Exception)
        {
            // Error
            Console.WriteLine("Exception caught in process: {0}", _Exception.ToString());
        }
    } 
```

或者试试这个会工作

```
public class WebDownload : WebClient
{
    private int _timeout;
    /// <summary>
    /// Time in milliseconds
    /// </summary>
    public int Timeout
    {
        get
        {
            return _timeout;
        }
        set
        {
            _timeout = value;
        }
    }

    public WebDownload()
    {
        this._timeout = 60000;
    }

    public WebDownload(int timeout)
    {
        this._timeout = timeout;
    }

    protected override WebRequest GetWebRequest(Uri address)
    {
        var result = base.GetWebRequest(address);
        result.Timeout = this._timeout;
        return result;
    } 
```

# php - 允许收件人自动查看更新

> ID：15850005
> 
> 赞同：0
> 
> 时间：2013-04-06T10:54:46.137
> 
> 标签：php, jquery, ajax

我在测试我的网站时意识到，收到消息/评论的用户必须在看到任何警报或更改之前刷新页面。

In`comments.php?do=comment&id=1`显示带有`id`1 的帖子，供用户评论。

我使用此表单提交评论，这通过同一页面上的 mysql 提取来显示内容。

`<form action="" method="post" > input name="getcomment" type="text" value="What are your thoughts?"/> <input value="Comment!" type="submit"/> </form>`

我在网上看到了很多关于在提交新评论*（针对收件人）*时自动更新内容的资源，但我不确定哪个是最好的。请记住，这是一个非常**小**规模的网站。

1.  我有什么选择？（JQuery/Ajax 似乎是最简单的）但是“轮询”数据库效率低下吗？

2.  我将如何实现这个（我发现最困难的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:02:02.270

你只需要像这样每隔几秒轮询一次你的 php 脚本。*请记住，这是一个非常小规模的网站*民意调查可以做你想做的事。

```
setInterval(function(){
   $.ajax({
     url: "getComments.php"
   }).done(function(comment) {
     // show new comments
     $('#comment_section').append(comment);
   });
},5000); // poll every 5 seconds 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:03:14.847

我认为您最好的选择是使用 JQuery/Ajax，因为它比使用套接字便宜得多。

如果您的用户接收即时更新并不重要，您可以进行投票。

# c# - 为什么这个变量的值在我编程不超过 256 时会超过 256？

> ID：15850014
> 
> 赞同：0
> 
> 时间：2013-04-06T10:56:17.920
> 
> 标签：c#

这是我的代码：

```
 public void button1_Click(object sender, System.EventArgs e)
    {
        System.Random rnd = new System.Random();
        int ci = 1;
            int di=1;
                int fi=1;
        int c = rnd.Next(1, 254);
        int d = rnd.Next(1, 254);
                for (int f = rnd.Next(1, 254); f < 255; f+=fi)
                {

                    this.BackColor = System.Drawing.Color.FromArgb(c, d, f);
                    Application.DoEvents();
                    if (c == 254 || c == 0) { ci *= -1; }
                    if (f == 254 || f == 0 || f == 50 || f == 100 || f == 150 || f == 200)
                    {
                        d += di;
                    } 
                    if (d == 255 || d == 0)
                    {
                        di *= -1;
                    }
                    if (f==254|| f == 0)
                    {
                        fi *= -1;
                    }
                    if (d == 254)
                    {
                        c += ci;
                    }
                }
     } 
```

弹出的错误是d的值超过256。

但是，当我在调试器中运行它时，我看不到 d 超过 256 的任何情况。当 d 为 255 时，di 变为负数，因此 d += di 会减小 d 的值。因此，d 不可能超过 255。因此，当调试器告诉我 d 刚刚达到 256 时，我会感到困惑。

谁能向我解释为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T11:11:56.287

假设`f`在内循环中永远不能超过 254，并且`d`是 255。

第一次执行以下代码时，`di`将变为负数。然而，由于最内层循环继续执行`d`没有改变，所以在下一次通过最内层循环时`d`仍然是*255*，所以这个条件设置`di`回正数。

```
if (d == 255 || d == 0)
{
    di *= -1;
} 
```

我相信以下内容更接近您对包含`variable *= -1;`（我`d`专门使用）的每个块的预期：

```
if (d == 255)
{
    di = -1;
}
else if (d == 0)
{
    di = 1;
} 
```

# css - 用链接背景覆盖 li 右边框

> ID：15850025
> 
> 赞同：0
> 
> 时间：2013-04-06T10:57:13.467
> 
> 标签：css

我正在更改水平菜单上链接的背景颜色，工作正常，除了我在 li 元素上放置了一个右边框，但背景只与线条相交，这看起来很奇怪。

我如何覆盖整条线（本质上，我只需要一个额外的像素）

非常感激。

```
#nav_menu{
    height:57px;
    background:#55d2f3;
    font-family:calibri;
    text-shadow: 1px 1px 0px #9c9a9a;
    font-size:16px;
    color:white;
    font-weight:100;
    margin:0;
    padding:0;
}

#nav_menu ul{font-size:0;list-style: inside;padding:0;margin:0;}
#nav_menu ul li{
    display: inline;
    list-style-type: none;
    line-height:60px;
    list-style-position:inside;
    font-size:16px;
    border-right:1px solid white;
}

#nav_menu li a{
    display:inline-block;
    text-decoration: none;
    color:white;
    height:57px;
    padding:0 15px 0 15px;
}

#nav_menu li a:hover{
    background:white;
    color:#555;
    text-shadow: 1px 1px 0px whitesmoke;
}

<div id='nav_menu'>
    <ul>
        <li ><a href='pricing' id="pricing_link" ><span>Pricing</span></a></li>
        <li><a href='what-we-do' id="whatwedo_link"><span>What we do</span></a></li>
        <li><a href='how-it-works' id="howitworks_link"><span>How it works</span></a></li>
        <li><a href='contact-us' id="contact_link"><span>Contact</span></a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:06:38.707

```
 covering the entire screen with
 html,body{margin:0;}
 Do not add the border to the li, but to the li a  
  #nav_menu li a{
    border-right:solid #ff0000;
  }
also needs 
#nav_menu{
    overflow:hidden;
}

to hover the borders of both sides change to

#nav_menu li a:hover{
    background:white;
    color:#555;
    text-shadow: 1px 1px 0px whitesmoke;
    margin-left:-3px;
border-right:solid #55d2f3;
border-left:solid #55d2f3;
} 
```

# java - 获取 java.lang.OutOfMemoryError: Java 堆空间，同时调用 REST Multi 部分以上传更大的二进制文件

> ID：15850027
> 
> 赞同：0
> 
> 时间：2013-04-06T10:57:21.437
> 
> 标签：java, jersey

**我正在尝试调用基于 java REST 的服务来使用 MULTIPART 上传二进制文件（70 MB）。它成功地为 60 MB 文件工作，但每当我超过文件大小时，在客户端控制台上出现以下异常：**

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Arrays.java:2271)
    at java.io.ByteArrayOutputStream.grow(ByteArrayOutputStream.java:113)
    at java.io.ByteArrayOutputStream.ensureCapacity(ByteArrayOutputStream.java:93)
    at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:140)
    at sun.net.www.http.PosterOutputStream.write(PosterOutputStream.java:78)
    at `enter code here`com.sun.jersey.api.client.CommittingOutputStream.write(CommittingOutputStream.java:90)
    at com.sun.jersey.core.util.ReaderWriter.writeTo(ReaderWriter.java:115)
    at com.sun.jersey.core.provider.AbstractMessageReaderWriterProvider.writeTo(AbstractMessageReaderWriterProvider.java:76)
    at com.sun.jersey.core.impl.provider.entity.FileProvider.writeTo(FileProvider.java:103)
    at com.sun.jersey.core.impl.provider.entity.FileProvider.writeTo(FileProvider.java:64)
    at com.sun.jersey.multipart.impl.MultiPartWriter.writeTo(MultiPartWriter.java:218)
    at com.sun.jersey.multipart.impl.MultiPartWriter.writeTo(MultiPartWriter.java:71)
    at com.sun.jersey.api.client.RequestWriter.writeRequestEntity(RequestWriter.java:300)
    at com.sun.jersey.client.urlconnection.URLConnectionClientHandler._invoke(URLConnectionClientHandler.java:213)
    at com.sun.jersey.client.urlconnection.URLConnectionClientHandler.handle(URLConnectionClientHandler.java:149)
    at com.sun.jersey.api.client.Client.handle(Client.java:648)
    at com.sun.jersey.api.client.WebResource.handle(WebResource.java:680)
    at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)
    at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:568)
    at 
```

**我尝试过使用 jvm 参数，但没有运气。**

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-20T06:26:59.957

我认为您用于`new File()`获取文件数据，但最好使用 InputStream：

```
InputStream fileInStream = new FileInputStream(fileName);
String sContentDisposition = "attachment; filename=\"" + fileName.getName()+"\"";
WebResource fileResource = a_client.resource(a_sUrl);       
ClientResponse response = fileResource.type(MediaType.APPLICATION_OCTET_STREAM)
                        .header("Content-Disposition", sContentDisposition)
                        .post(ClientResponse.class, fileInStream); 
```

# python - 如何提取python字典列表的多个值（即提取一个键的所有值）？

> ID：15850028
> 
> 赞同：1
> 
> 时间：2013-04-06T10:57:35.363
> 
> 标签：python, list, dictionary, django-templates

我的字典是这样的。

```
m_dict = {}  
m_dict.setdefault(ekey1, []).append(m_name)  
m_dict.setdefault(ekey2, []).append(u_r)  
m_dict.setdefault(ekey3, []).append(quan)  
m_dict.setdefault(ekey4, []).append(u_u)  
m_dict.setdefault(ekey5, []).append(r_r)  
m_dict.setdefault(ekey6, []).append(pr) 
```

每个键有多个值，即值作为项目列表附加。

> 我的问题是如何分别提取单个键的每个列表值？

例如`ekey5`具有如下值：

```
[a', Decimal('80'), Decimal('80'), u', Decimal('0'), Decimal('0.95')] 
```

那么如何`ekey5`在单独的行中提取每个值？

然后如何在 django 模板中显示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:48:44.117

[根据对这个问题的回答，](https://stackoverflow.com/questions/3002728/iterating-dictionary-indexes-in-django-templates)在 Django 模板中执行此操作应该与等效的 Python 非常相似

以下内容应与[garmoncheg 的回答相同](https://stackoverflow.com/a/15850516/745)

```
{% for key, value in m_dict.items %}
    {% for item in value %}
        {{ item }}
    {% endfor %}
{% endfor %} 
```

# forms - Delphi Lock 表格大小

> ID：15850031
> 
> 赞同：0
> 
> 时间：2013-04-06T10:57:50.990
> 
> 标签：forms, delphi, delphi-7

我在我的程序中加载了一个非常漂亮的图像作为背景，问题是程序的一部分是白色的，因为图像没有覆盖所有背景。我可以设置 exe 的大小，但用户可以更改大小，这是我不想要的。我是怎么做的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:01:40.907

表单的 BorderStyle 决定了用户是否可以调整表单的大小。将 BorderStyle 设置为一个不可调整的值（bsDialog、bsSingle 或 bsNone），然后将表单的 ClientWidth/ClientHeight 设置为所需的值以匹配您的背景图像。

# java - java.nio 对 Web 服务器有什么好处？

> ID：15850033
> 
> 赞同：6
> 
> 时间：2013-04-06T10:57:54.870
> 
> 标签：java, networking, io, nio

我知道这是一个经常出现的问题，并且我读过类似以下[http://www.mailinator.com/tymaPaulMultithreaded.pdf](http://www.mailinator.com/tymaPaulMultithreaded.pdf)的文章，说 nio 的扩展性比 io 好不一定是真的。

但是我很难看到在开发 Web 服务器时 java nio 如何比传统的接受器/工作线程架构更好地扩展？让我解释：

通常 Java Web 服务器使用以下模式来处理连接：

*   一些接受器线程受限于 ServerSocket 的 accept() 方法上的核心块数：

    ```
    while (true) {
      socket = serverSocket.accept();
      // handleRequest submits the socket to a queue
      handleRequest(socket);
      socket.close();
    } 
    ```

*   当客户端套接字被检索到时，它被提交到一个非阻塞队列，然后由工作线程池中的工作线程处理。工作线程的数量取决于正在执行的 io 操作的持续时间。

使用 java.nio 如何使该架构更具可扩展性？

我的意思是我仍然需要有工作线程来处理执行阻塞操作的请求（访问数据库或文件系统，调用外部服务）。如果后端操作不像 node.js 那样异步执行，我仍然需要工作线程来限制整体可伸缩性与 1 或 2 个事件调度程序线程。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-12T05:26:47.827

我真的很喜欢 Paul Tyma 关于这个问题的文章，它真的很深入。我会在他的文章中看到两个要点：

*   您可以使用传统的阻塞 IO 获得更好的吞吐量（他测量过）
*   传统的阻塞 IO 使您的服务器逻辑方式不那么复杂——客户端-服务器对话的*状态*在线程流中隐式定义。

使用非阻塞 NIO 的主要原因是当您有**许多**同时的空闲请求时。这样做的原因是：使用 NIO，您可以从同一个线程处理多个请求，这*更好*。

好的，这是您可以在任何地方阅读的内容。现在......**为什么**这*更好*？

有两个主要原因，它们与每个线程带来的两种不同类型的开销有关：

*   当调度程序更改处理器正在执行的线程时，会有一个“上下文切换”，这可能是一项昂贵的操作（即，线程在处理器中具有某种状态——寄存器中的值，L1、L2 中加载的大量数据, L3 缓存等 - 当线程停止时必须“保存”在某处，当线程继续执行时“重新加载”；此外，当您丢失 L1、L2、L3 缓存的内容时，您可能会得到大量缓存未命中，这可能是坏的（或不是，取决于工作负载））
*   每个线程必须分配自己的独立*堆栈*（通常用于存储局部变量和函数调用的返回地址）

因此，每个线程都带有更多“浪费”的内存和可能“浪费”的处理器周期（以执行“上下文切换”）。

现在，假设您有一个聊天服务器，客户端建立 HTTP 连接以请求新消息，并且您的服务器仅在该客户端有新消息时才会回复它们（以便客户端立即接收新消息）。假设您有 10k 个这样的客户。在传统的、阻塞的、每个连接线程的模型中，您将拥有 10k 个线程。在 Java 中，线程堆栈大小 (-Xss) 的典型标准值为 256kb。使用 10k 线程，您将自动使用大约 2GB 内存！！！！！！！！！更糟糕的是：即使您的聊天服务器上没有任何活动，也没有发送消息，客户端仍然让您浪费这 2GB。添加大量的上下文切换，你会发现你有问题。

在这种情况下，您最好使用非阻塞 NIO，其中更少的线程（最终只有 1 个！）足以处理所有 10k 客户端，因此您可以节省上下文切换（即 cpu 时间）和线程堆栈（即内存），甚至以更复杂的代码为代价，这通常是使用非阻塞 NIO 的副作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T05:12:54.847

NIO 或者非阻塞 IO 可以很好的扩展高并发，你不需要每个连接都有一个专用线程，你只需要一个主线程来接受连接并有几个其他工作线程来处理 IO，线程数是固定的，这是它比传统的接受器/工作线程架构更具可扩展性的主要原因。

# matlab - Simulink 中的数据采集工具箱（基于会话的接口），带有 2 级 MS 函数或 C 库

> ID：15850034
> 
> 赞同：0
> 
> 时间：2013-04-06T10:58:01.073
> 
> 标签：matlab, simulink

我目前正在从事一个涉及 Simulink 中的数据采集和实时处理的项目。我们有一些专门为此项目购买的 DAQ 硬件 - 即 National Instruments DAQ 设备 (USB)。

我必须使用基于会话的界面。我尝试编写 2 级 MS 函数，但我的问题是，我不知道应该在哪里使用 daq.createSession 函数创建会话以及在哪里可以创建模拟输出。有人有代码示例或建议吗？

或者编写 C 库会更容易吗？我可以为这个 C 库使用哪个 Simulink 块？Matlab函数？我可以使用 DAQmxErrChk (DAQmxCreateAOVoltageChan(taskHandle,"Dev1/ao0","",-10.0,10.0,DAQmx_Val_Volts,NULL)); Simulink 中 DAQmx 示例的功能有哪些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:11:36.627

I can't post my entire workaround for this, as it is many lines of code and that's goes a bit against the SO regulations. I will, however, try my best to explain how it works so that you can do something similar. My life while coding this was certainly made easier by the fact that I have a set of classes that allow you to write a Level-2 M-S function inside a class, but you could certainly do it without.

Basically your best bet is to create a mask for your block. Each time you modify the mask parameters, Simulink will call your `onSetup` callback - where you would normally setup channels / register other M-S function callbacks. It is in this function that I create my DAQ session, if it's not already created, update the channel count, sample rate, and channel mode (and any other session info). You can then set the `UserData` property of the block to either your DAQ session interface, or a struct or an instance of some handle class that has a reference to your DAQ session.

You will also need some way of queueing the incoming data. You could get a queue class off the FileExchange (I think there are a few), although I'm not sure about the speed of these. I created a queue class that uses a circular buffer as its data storage, as there is probably no need to go for a full implementation of a linked list here, and this is likely to be faster (no need to delete / instantiate a class every time a new sample comes in). The class errors if you try to pop an empty queue and warns with a 'queue overrun'-type error if you push onto a full queue. The queue is allocated / deallocated in, respectively, `onPostPropagationSetup` and `onTerminate`.

When data is received from the DAQ session, the following function is called

```
function onDaqDataAvailable(self, data)
    self.sampleQueue.push(data.Data);
    self.updateOutputStatus();
end

function updateOutputStatus(self)
    if self.sampleQueue.filledLocs >= 0.5 * self.sampleQueue.queueLength
        self.bOutput = true;
    else
        self.bOutput = false;
    end

    drawnow update;
end 
```

I'm not sure whether the threshold there is actually necessary, and in fact think it might be a bit too high, but you can fiddle with it yourself. Then, in the `onOutputs` callback, we have

```
 function onOutputs(self, block)
        if ~self.daqSess.IsRunning
            self.daqSess.startBackground();
        end

        while ~self.bOutput
            pause(0.1 * self.frameLength / self.sampleRate);
            // Displaying number of samples in queue is useful for debugging here...
            // But we should really use a scope instead
            disp(self.sampleQueue.filledLocs)
            self.updateOutputStatus();
        end

        // Displaying number of samples in queue is useful for debugging here...
        // But we should really use a scope instead
        //disp(self.sampleQueue.filledLocs)
        samples = self.sampleQueue.pop(self.frameLength);
        for nChan = 1:self.nChannels
            block.OutputPort(nChan).Data = samples(:, nChan);
        end

        self.updateOutputStatus();
    end 
```

This is the basis for how the block actually works. One note is that you need to set the DAQ session's `NotifyWhenDataAvailableExceeds` property to something sensible, so that you get a maximum of 20 calls to `onDaqDataAvailable` per second, but once you have a sample queue this is fairly trivial. Note also that the DAQ session is not actually started until the model is REALLY ready. Starting it before hand would result in lots of queue overruns as scopes etc. opened their UIs.

I hope this has explained it enough for you to produce a comparable workaround.

# javascript - 通过 JavaScript 在 Office 365 上使用 REST 远程访问 Sharepoint 2013

> ID：15850037
> 
> 赞同：1
> 
> 时间：2013-04-06T10:58:43.383
> 
> 标签：javascript, sharepoint, office365

我想直接从浏览器页面与 SkyDrive Pro 集成以进行文件存储，所以我不想从我们的 Web 服务器执行此操作。

几乎我见过的每个这样做的示例都涉及运行托管在 Sharepoint 本身内部的代码，或者远程使用托管在另一个站点上的 ASPX 中的 C#。

谁能指出一个纯 JavaScript 示例，该示例仅在 HTML 页面中运行（无服务器端代码）。

据我所知，这是可能的，但几乎每个身份验证示例都再次使用 C# 库。看起来他们没有提供类似于 Windows Live SDK 的客户端 JavaScript 库，这可能意味着为身份验证请求构建 json/xml。

理想情况下，我想简单地弹出 Office365 登录屏幕进行身份验证，然后能够使用浏览器会话 cookie 从我的页面进行 API 调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T12:24:48.783

这似乎是不可能的：

> 请注意，您无法从浏览器客户端上运行的代码中获取访问令牌。您必须从服务器上运行的代码中获取访问令牌，并使其可用于客户端代码（通过使用 cookie、URL 参数等）。

来源：http: [//msdn.microsoft.com/en-us/library/jj164022%28v=office.15%29.aspx](http://msdn.microsoft.com/en-us/library/jj164022%28v=office.15%29.aspx)

您的服务器端代码需要与身份服务器（Azure 访问控制服务）存在某种信任关系，因为它们共享客户端 ID 和客户端密码（当您的应用作为应用主体安装在 Sharepoint 中时生成）。在此处查看该过程的第 6 步和第 7 步：http: [//msdn.microsoft.com/en-us/library/fp142382](http://msdn.microsoft.com/en-us/library/fp142382)

# javascript - JQuery，错误的左侧位置

> ID：15850040
> 
> 赞同：0
> 
> 时间：2013-04-06T10:58:50.287
> 
> 标签：javascript, jquery, html, css

我有这个代码：

```
$(this).closest("p").after('<strong>' + arMess[iCurIndex] + '</strong>').next().animate({
            top: $(this).offset().top - 57,
            left: -$(this).width() //[First value] Here i get 148px on chrome and 150px on firefox

        }, 300,function(){
            alert($(this).offset().top - 57);
            alert(-$(this).width()); //[Second value] Here i get the true width the one i want to present the left
        }); 
```

代码概述： **在第一行，我为****STRONG**元素设置了动画

如您所见，我从**-$(this).width()**获得了 2 个不同的值：

**第一个值：**我在动画过程中得到。

**第二个值：**我在动画完成后得到。

如果有人知道我得到 2 个不同值的原因，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:15:44.873

尝试[outerWidth](http://api.jquery.com/outerWidth/)或检查元素的 css（如果有）`float:left`

```
$(this).closest("p").after('<strong>' + arMess[iCurIndex] + '</strong>').next().animate({
            top: $(this).offset().top - 57,
            left: -$(this).outerWidth();
                         // use .outerWidth(true); if you want to 
                         //calculate with margin and border values

}, 300,function(){
            alert($(this).offset().top - 57);
            alert(-$(this).outerWidth());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T14:55:29.167

这里的问题是 javascript 关键字*this*在动画之后调用的内部函数中的值与设置宽度时的值不同。对于第一个值，*这*是触发动画的对象。在调用警报的函数中，*这*是动画对象。

试试这个：

```
var $strongElement = $(this).closest("p").after('<strong>' + arMess[iCurIndex] + '</strong>').next();

$strongElement.animate({
       top: $(this).offset().top - 57,
       left: -$strongElement.width() 
    }, 300, function(){
    alert(-$(this).width()); 
}); 
```

见[http://jsfiddle.net/vtyjf/](http://jsfiddle.net/vtyjf/)

# c - Xcode - 警告：函数的隐式声明在 C99 中无效

> ID：15850042
> 
> 赞同：91
> 
> 时间：2013-04-06T10:58:55.130
> 
> 标签：c, xcode

收到警告：函数 'Fibonacci' 的隐式声明在 C99 中无效。怎么了？

```
#include <stdio.h>

int main(int argc, const char * argv[])
{
    int input;
    printf("Please give me a number : ");
    scanf("%d", &input);
    getchar();
    printf("The fibonacci number of %d is : %d", input, Fibonacci(input)); //!!!

}/* main */

int Fibonacci(int number)
{
    if(number<=1){
        return number;
    }else{
        int F = 0;
        int VV = 0;
        int V = 1;
        for (int I=2; I<=getal; I++) {
            F = VV+V;
            VV = V;
            V = F;
        }
        return F;
    }
}/*Fibonacci*/ 
```

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-04-06T11:31:28.600

该函数必须在被调用之前声明。这可以通过多种方式完成：

*   在头文件中写下原型
    如果该函数可以从多个源文件中调用，则使用它。只需将您的原型写
    `int Fibonacci(int number);`
    在一个`.h`文件中（例如`myfunctions.h`），然后`#include "myfunctions.h"`在 C 代码中。

*   在第一次调用之前移动函数这意味着， 在你的函数之前
    写下函数
    `int Fibonacci(int number){..}`
    `main()`

*   在第一次调用之前显式声明函数
    这是上述风格的组合：在函数之前在 C 文件中键入函数的`main()`原型

作为附加说明：如果该函数`int Fibonacci(int number)`应仅在实现它的文件中使用，则应声明它`static`，以便它仅在该翻译单元中可见。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-04-06T11:01:19.173

编译器想知道函数才能使用它

只需在调用函数之前声明它

```
#include <stdio.h>

int Fibonacci(int number); //now the compiler knows, what the signature looks like. this is all it needs for now

int main(int argc, const char * argv[])
{
    int input;
    printf("Please give me a number : ");
    scanf("%d", &input);
    getchar();
    printf("The fibonacci number of %d is : %d", input, Fibonacci(input)); //!!!

}/* main */

int Fibonacci(int number)
{
//… 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-30T10:20:55.197

我有同样的警告（它使我的应用程序无法构建）。当我添加`C function`时`Objective-C's .m file`，但忘记在`.h`文件中声明它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-31T04:10:44.667

在 c 函数必须在被调用之前声明

包含头文件

# javascript - 使与我的复选框相邻的文本可点击

> ID：15850045
> 
> 赞同：1
> 
> 时间：2013-04-06T10:59:10.687
> 
> 标签：javascript, html, checkbox

我正在尝试使与我的复选框相邻的文本可点击。为什么这段代码不起作用？

```
<form name="f1">
<input type="checkbox" name="name[]" value="1">
<span onClick="name[0].checked=(! name[0].checked);">Add whipped cream to your drink (add $0.50)</span>
<input type="checkbox" name="name[]" value="2">
<span onClick="name[1].checked=(! name[1].checked);">Add whipped cream to your drink (add $0.50)</span>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T11:02:45.800

> *“为什么这段代码不起作用？”*

因为您不能按名称将复选框称为这样的数组。复选框的名称是`"name[]"`包含`[]`字符的字符串。浏览器不认为这与数组有任何关系。您仍然可以通过该名称引用元素的一种方法是：

```
onClick="document.forms.f1['name[]'][0].checked=!document.forms.f1['name[]'][0].checked;" 
```

演示：http: [//jsfiddle.net/CYCqr/2/](http://jsfiddle.net/CYCqr/2/)

...但我真的不建议这样做。完全删除 JS 并只使用标签元素会更容易：

```
<form name="f1">
<input id="cb1" type="checkbox" name="name[]" value="1">
<label for="cb1">Add whipped cream to your drink (add $0.50)</label>
<input id="cb2" type="checkbox" name="name[]" value="2">
<label for="cb2">Add whipped cream to your drink (add $0.50)</label>
</form> 
```

每个标签的`for`属性指定相关复选框的 id。单击标签会选中或取消选中复选框。

演示：http: [//jsfiddle.net/CYCqr/](http://jsfiddle.net/CYCqr/)

或者您可以只在标签内包含复选框（在文本周围有或没有您的原始跨度元素）：

```
<form name="f1">
<label><input type="checkbox" name="name[]" value="1">Add whipped cream to your drink (add $0.50)</label>
<label><input type="checkbox" name="name[]" value="2">Add whipped cream to your drink (add $0.50)</label>
</form> 
```

演示：http: [//jsfiddle.net/CYCqr/1/](http://jsfiddle.net/CYCqr/1/)

# java - 了解java中的线程

> ID：15850046
> 
> 赞同：4
> 
> 时间：2013-04-06T10:59:18.460
> 
> 标签：java, multithreading

我对 JAVA 中的线程概念很陌生，虽然我尝试了一些代码并且它们正在工作，但我真的不完全理解后台发生的事情。例如我写了这段代码：

```
public class myThreadTest implements Runnable {
  private static void ping(String text, int count) 
                      throws InterruptedException {
    for (int i = 0; i<count; i++) {
      System.out.println("ping "+text+i+"...");
      Thread.sleep(1000);
    }
  }
  public void run() {
    try {
      ping("run ",10);
    } catch (InterruptedException e) {
    }
  }  
  public static void main(String[] args) {
    (new Thread(new myThreadTest())).start();
    try {
      ping("main ", 5);
    } catch (InterruptedException e) {
    }
 }
} 
```

这里是否有 2 个线程正在执行，一个从 main 运行，另一个从方法运行运行？Bcoz 我得到的输出是 main,run,main,run,run,main... 类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T11:02:51.697

是的，两者同时执行。

> *线程是程序中的执行线程。Java 虚拟机允许应用程序同时运行多个执行线程。*

在开始编码之前，我强烈推荐[这个文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)。祝你好运

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T11:25:28.610

java中的线程主要与并发有关，这是同时发生多件事的概念。线程是程序中独立的执行路径。

从您的程序中，我可以看到您的代码在启动时启动了两个线程，运行第一个命令 for 循环休眠 1 秒，然后来回运行 run 方法，直到 for 循环耗尽，因此运行继续到 9

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T11:00:46.757

这是正确的。尝试在您的方法中打印[线程 id](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#getId%28%29)`ping()`以查看不同的线程正在运行（您也可以命名您的线程，我将其作为一种做法，以便了解哪个线程在做什么）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-15T13:46:48.510

有两个线程。由于主块中的调用，其中一个线程被创建并开始`run`异步执行其方法。`start`另一个线程正在执行该`main`方法本身。

# powershell - 将文件中的选定行作为第一列输出，将文件名作为第二列输出

> ID：15850047
> 
> 赞同：0
> 
> 时间：2013-04-06T10:59:44.827
> 
> 标签：powershell, text-files, data-conversion, mothur

我最近才开始在 win7 中使用 powershell，以便为程序 mothur 生成类似管道的脚本。在我在 ubuntu 中使用 bash 脚本来执行此操作之前。我很高兴现在一切正常，除了一项任务：

我想格式化一个fasta文件，格式如下：

```
filename.fasta:

>HXXC990
AGTTCAAGGTCTCT
>HXXC991
GGGTTTCAAATCTC
>HXXC992
GGGTCTCTCCTATA 
```

到一个制表符分隔的文件，看起来像这样

```
output.file:

HXXC990    filename
HXXC991    filename
HXXC992    filename 
```

重要的是输出文件的第一列包含不带“>”符号的名称。第二个由制表符分隔的列是原始文件名.fasta，没有后缀（“文件名”）。我有解决方案 gci 来读出文件的基本名称和 Select-String 来输出所有以“>”开头的行。唯一的问题是两列中的格式和第二列中文件名的不断重复。

到目前为止我已经尝试过：

```
Select-String '>' .\filename.fasta | % {$_.Line} | set-content output.txt 
```

生成一个文件，该文件仅包含包含“>”符号的行。之后我只是更换了它们。我得到的文件名

```
$base1 = gci filename.fasta | % {$_.BaseName} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:31:43.540

试试这个：

```
select-string '^>' filename.fasta | % {
  $_ -replace '^.*\\(.*?)\.fasta:\d+:>(.*)$', "`$2`t`$1"
} > output.file 
```

请注意，您的正则表达式应该是`^>`，而不仅仅是`>`. 后者将匹配`>`一行中的任何位置。

这可以应用于多个文件，如下所示：

```
$recurse = $false

Get-ChildItem "C:\base\folder" -Filter *.fasta -Recurse:$recurse `
  | select-string '^>' `
  | % { $_ -replace '^.*\\(.*?)\.fasta:\d+:>(.*)$', "`$2`t`$1" } > output.file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:44:30.643

这是另一个解决方案，显示了所涉及操作的一些不同选项：

```
gci *.fasta | select-string '^>(.+)' |
 % {"{0}`t{1}" -f $_.matches.groups[1],$_.filename.split('.')[0]} |
 Set-Content output.file 
```

# ios - 从 SQLite 数据库填充 CLPlacemark

> ID：15850051
> 
> 赞同：1
> 
> 时间：2013-04-06T11:00:06.763
> 
> 标签：ios, objective-c

类上的实例变量`CLPlaceMark`是只读的。

我的应用程序使用正常程序来填充`CLPlacemark`. 的内容`CLPlacemark`被添加到`SQLite`地标表中。

稍后，我的应用程序会从`SQLite`表格中获取一个或多个地点标记。`CLPlacemarks`由于所有字段都是只读的，如何使用提取结果填充一个或多个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:35:17.727

您需要将地标序列化为`NSData`对象并将其保存在数据库中。

```
NSData* data = [NSKeyedArchiver archivedDataWithRootObject:placemark]; 
```

您还可以一次归档一个 NSArray`CLPlacemark`对象。

然后，您可以使用以下方法从该 NSData 恢复地标（或地标数组）`NSKeyedUnarchiver`：

```
CLPlacemark* placemark = [NSKeyedUnarchiver unarchiveObjectWithData:data]; 
```

# jquery - jQuery GET 请求在 Chrome 而不是 Firefox 中正确响应

> ID：15850054
> 
> 赞同：0
> 
> 时间：2013-04-06T11:00:09.000
> 
> 标签：jquery, ajax, firefox, imgur

```
$.ajax({
    url: 'https://api.imgur.com/3/album/' + sharedAlbumID,
    type: 'GET',
    beforeSend: function(xhr){xhr.setRequestHeader('Authorization', 'Client-ID '+imgurClientID);},
    success: function(resp) {
        var dataLink = 'http://i.imgur.com/' + resp.data.cover + '.jpg';
        var url = encodeURI(window.location.href);
        var media = encodeURI(dataLink);
        $('#pinterestHolder').html('<a target="_blank" data-pin-config="beside" href="//pinterest.com/pin/create/button/?url=' + url + '&media=' + media + '&description=Imagedoku album recommendation: ' + resp.data.id + '" data-pin-do="buttonPin" ><img src="//assets.pinterest.com/images/pidgets/pin_it_button.png" /></a>');
        if (resp.data.images.length >= 9) {
            for (var i = 0; i < 9; i++) {
                var imgID = resp.data.images[i].id;
                imgID += 't';
                imgID = 'http://i.imgur.com/' + imgID + '.jpg';
                $('#albumHolder').append('<div class="albumThumbHolder"><a href="' + resp.data.images[i].link + '" target="_blank"><img class="imguralbumthumb" title="' + resp.data.images[i].id + '" src="' + imgID + '" /></a></div>');
            }
        } else {
            $('#insufficientImagesError').modal();
        }
        $('#albumLink').html('<a href="http://imgur.com/a/' + sharedAlbumID + '" target="_blank">View album on Imgur</a>');
    },
    error: function(resp) {
        $('#imgurMalformedError').modal();
    }
}); 
```

此代码在 Chrome 中按预期工作，但返回一个

```
resp.data is undefined 
```

错误

```
 var dataLink = 'http://i.imgur.com/' + resp.data.cover + '.jpg'; 
```

这与 Imgur API 相关，我相信您可以说出来。不知何故，问题在于 Firefox nto 读取在 jQuery 回调中发送的数据对象。我怎样才能解决这个问题？我只对在 Webkit 和 Mozilla 中进行这项工作感兴趣，并且它在 Webkit 中工作——任何 hacky 答案都可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:54:32.357

问题是我没有指定接收数据类型：'json'，Chrome 显然猜到了，但 Firefox 没有。

# android - 将编辑文本字符串转换为位图

> ID：15850055
> 
> 赞同：0
> 
> 时间：2013-04-06T11:00:13.640
> 
> 标签：android, bitmap

我想将字符串转换为位图，但出现空指针异常。我的字符串没有被转换为位图。我正在使用以下方法将字符串转换为位图：

```
public Bitmap StringToBitMap(String encodedString) {
    Bitmap b = null;
    try {
        byte[] arr = Base64.decode(encodedString.getBytes(),Base64.DEFAULT);
        b = BitmapFactory.decodeByteArray(arr, 0, arr.length);
    } catch (Exception e) {
        // TODO: handle exception
    }
    return b;
} 
```

我用谷歌搜索了很多，但每次我得到 Nullpointer 异常。我也尝试使用 getdrawingcache() 获取编辑文本的屏幕截图，但它给了我整个编辑文本，而不仅仅是编辑文本中的文本。我只想将编辑文本的文本放入位图中。请给我如果有人有想法，请提供解决方案。预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:16:28.490

尝试此代码以及以下`Base64`课程

```
public Bitmap StringToBitMap(String encodedString){
   try{
       byte [] encodeByte=Base64.decode(encodedString,Base64.DEFAULT);
       Bitmap bitmap=BitmapFactory.decodeByteArray(encodeByte, 0, encodeByte.length);
       return bitmap;
   } catch(Exception e){
       e.getMessage();
   return null;
} 
```

Base64 类的代码

```
import java.io.UnsupportedEncodingException;

public class Base64 {
/**
 * Default values for encoder/decoder flags.
 */
public static final int DEFAULT = 0;

/**
 * Encoder flag bit to omit the padding '=' characters at the end
 * of the output (if any).
 */
public static final int NO_PADDING = 1;

/**
 * Encoder flag bit to omit all line terminators (i.e., the output
 * will be on one long line).
 */
public static final int NO_WRAP = 2;

/**
 * Encoder flag bit to indicate lines should be terminated with a
 * CRLF pair instead of just an LF.  Has no effect if {@code
 * NO_WRAP} is specified as well.
 */
public static final int CRLF = 4;

/**
 * Encoder/decoder flag bit to indicate using the "URL and
 * filename safe" variant of Base64 (see RFC 3548 section 4) where
 * {@code -} and {@code _} are used in place of {@code +} and
 * {@code /}.
 */
public static final int URL_SAFE = 8;

/**
 * Flag to pass to {@link Base64OutputStream} to indicate that it
 * should not close the output stream it is wrapping when it
 * itself is closed.
 */
public static final int NO_CLOSE = 16;

//  --------------------------------------------------------
//  shared code
//  --------------------------------------------------------

/* package */ static abstract class Coder {
    public byte[] output;
    public int op;

    public abstract boolean process(byte[] input, int offset, int len, boolean finish);

    public abstract int maxOutputSize(int len);
}

public static byte[] decode(String str, int flags) {
    return decode(str.getBytes(), flags);
}

/**
 * Decode the Base64-encoded data in input and return the data in
 * a new byte array.
 *
 * <p>The padding '=' characters at the end are considered optional, but
 * if any are present, there must be the correct number of them.
 *
 * @param input the input array to decode
 * @param flags  controls certain features of the decoded output.
 *               Pass {@code DEFAULT} to decode standard Base64.
 *
 * @throws IllegalArgumentException if the input contains
 * incorrect padding
 */
public static byte[] decode(byte[] input, int flags) {
    return decode(input, 0, input.length, flags);
}

/**
 * Decode the Base64-encoded data in input and return the data in
 * a new byte array.
 *
 * <p>The padding '=' characters at the end are considered optional, but
 * if any are present, there must be the correct number of them.
 *
 * @param input  the data to decode
 * @param offset the position within the input array at which to start
 * @param len    the number of bytes of input to decode
 * @param flags  controls certain features of the decoded output.
 *               Pass {@code DEFAULT} to decode standard Base64.
 *
 * @throws IllegalArgumentException if the input contains
 * incorrect padding
 */
public static byte[] decode(byte[] input, int offset, int len, int flags) {
    // Allocate space for the most data the input could represent.
    // (It could contain less if it contains whitespace, etc.)
    Decoder decoder = new Decoder(flags, new byte[len*3/4]);

    if (!decoder.process(input, offset, len, true)) {
        throw new IllegalArgumentException("bad base-64");
    }

    // Maybe we got lucky and allocated exactly enough output space.
    if (decoder.op == decoder.output.length) {
        return decoder.output;
    }

    // Need to shorten the array, so allocate a new one of the
    // right size and copy.
    byte[] temp = new byte[decoder.op];
    System.arraycopy(decoder.output, 0, temp, 0, decoder.op);
    return temp;
}

/* package */ static class Decoder extends Coder {
    /**
     * Lookup table for turning bytes into their position in the
     * Base64 alphabet.
     */
    private static final int DECODE[] = {
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63,
        52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -2, -1, -1,
        -1,  0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14,
        15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1,
        -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,
        41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    };

    /**
     * Decode lookup table for the "web safe" variant (RFC 3548
     * sec. 4) where - and _ replace + and /.
     */
    private static final int DECODE_WEBSAFE[] = {
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1,
        52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -2, -1, -1,
        -1,  0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14,
        15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, 63,
        -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,
        41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    };

    /** Non-data values in the DECODE arrays. */
    private static final int SKIP = -1;
    private static final int EQUALS = -2;

    /**
     * States 0-3 are reading through the next input tuple.
     * State 4 is having read one '=' and expecting exactly
     * one more.
     * State 5 is expecting no more data or padding characters
     * in the input.
     * State 6 is the error state; an error has been detected
     * in the input and no future input can "fix" it.
     */
    private int state;   // state number (0 to 6)
    private int value;

    final private int[] alphabet;

    public Decoder(int flags, byte[] output) {
        this.output = output;

        alphabet = ((flags & URL_SAFE) == 0) ? DECODE : DECODE_WEBSAFE;
        state = 0;
        value = 0;
    }

    /**
     * @return an overestimate for the number of bytes {@code
     * len} bytes could decode to.
     */
    public int maxOutputSize(int len) {
        return len * 3/4 + 10;
    }

    /**
     * Decode another block of input data.
     *
     * @return true if the state machine is still healthy.  false if
     *         bad base-64 data has been detected in the input stream.
     */
    public boolean process(byte[] input, int offset, int len, boolean finish) {
        if (this.state == 6) return false;

        int p = offset;
        len += offset;

        // Using local variables makes the decoder about 12%
        // faster than if we manipulate the member variables in
        // the loop.  (Even alphabet makes a measurable
        // difference, which is somewhat surprising to me since
        // the member variable is final.)
        int state = this.state;
        int value = this.value;
        int op = 0;
        final byte[] output = this.output;
        final int[] alphabet = this.alphabet;

        while (p < len) {
            // Try the fast path:  we're starting a new tuple and the
            // next four bytes of the input stream are all data
            // bytes.  This corresponds to going through states
            // 0-1-2-3-0\.  We expect to use this method for most of
            // the data.
            //
            // If any of the next four bytes of input are non-data
            // (whitespace, etc.), value will end up negative.  (All
            // the non-data values in decode are small negative
            // numbers, so shifting any of them up and or'ing them
            // together will result in a value with its top bit set.)
            //
            // You can remove this whole block and the output should
            // be the same, just slower.
            if (state == 0) {
                while (p+4 <= len &&
                       (value = ((alphabet[input[p] & 0xff] << 18) |
                                 (alphabet[input[p+1] & 0xff] << 12) |
                                 (alphabet[input[p+2] & 0xff] << 6) |
                                 (alphabet[input[p+3] & 0xff]))) >= 0) {
                    output[op+2] = (byte) value;
                    output[op+1] = (byte) (value >> 8);
                    output[op] = (byte) (value >> 16);
                    op += 3;
                    p += 4;
                }
                if (p >= len) break;
            }

            // The fast path isn't available -- either we've read a
            // partial tuple, or the next four input bytes aren't all
            // data, or whatever.  Fall back to the slower state
            // machine implementation.

            int d = alphabet[input[p++] & 0xff];

            switch (state) {
            case 0:
                if (d >= 0) {
                    value = d;
                    ++state;
                } else if (d != SKIP) {
                    this.state = 6;
                    return false;
                }
                break;

            case 1:
                if (d >= 0) {
                    value = (value << 6) | d;
                    ++state;
                } else if (d != SKIP) {
                    this.state = 6;
                    return false;
                }
                break;

            case 2:
                if (d >= 0) {
                    value = (value << 6) | d;
                    ++state;
                } else if (d == EQUALS) {
                    // Emit the last (partial) output tuple;
                    // expect exactly one more padding character.
                    output[op++] = (byte) (value >> 4);
                    state = 4;
                } else if (d != SKIP) {
                    this.state = 6;
                    return false;
                }
                break;

            case 3:
                if (d >= 0) {
                    // Emit the output triple and return to state 0.
                    value = (value << 6) | d;
                    output[op+2] = (byte) value;
                    output[op+1] = (byte) (value >> 8);
                    output[op] = (byte) (value >> 16);
                    op += 3;
                    state = 0;
                } else if (d == EQUALS) {
                    // Emit the last (partial) output tuple;
                    // expect no further data or padding characters.
                    output[op+1] = (byte) (value >> 2);
                    output[op] = (byte) (value >> 10);
                    op += 2;
                    state = 5;
                } else if (d != SKIP) {
                    this.state = 6;
                    return false;
                }
                break;

            case 4:
                if (d == EQUALS) {
                    ++state;
                } else if (d != SKIP) {
                    this.state = 6;
                    return false;
                }
                break;

            case 5:
                if (d != SKIP) {
                    this.state = 6;
                    return false;
                }
                break;
            }
        }

        if (!finish) {
            // We're out of input, but a future call could provide
            // more.
            this.state = state;
            this.value = value;
            this.op = op;
            return true;
        }

        // Done reading input.  Now figure out where we are left in
        // the state machine and finish up.

        switch (state) {
        case 0:
            // Output length is a multiple of three.  Fine.
            break;
        case 1:
            // Read one extra input byte, which isn't enough to
            // make another output byte.  Illegal.
            this.state = 6;
            return false;
        case 2:
            // Read two extra input bytes, enough to emit 1 more
            // output byte.  Fine.
            output[op++] = (byte) (value >> 4);
            break;
        case 3:
            // Read three extra input bytes, enough to emit 2 more
            // output bytes.  Fine.
            output[op++] = (byte) (value >> 10);
            output[op++] = (byte) (value >> 2);
            break;
        case 4:
            // Read one padding '=' when we expected 2\.  Illegal.
            this.state = 6;
            return false;
        case 5:
            // Read all the padding '='s we expected and no more.
            // Fine.
            break;
        }

        this.state = state;
        this.op = op;
        return true;
    }
}

//  --------------------------------------------------------
//  encoding
//  --------------------------------------------------------

/**
 * Base64-encode the given data and return a newly allocated
 * String with the result.
 *
 * @param input  the data to encode
 * @param flags  controls certain features of the encoded output.
 *               Passing {@code DEFAULT} results in output that
 *               adheres to RFC 2045.
 */
public static String encodeToString(byte[] input, int flags) {
    try {
        return new String(encode(input, flags), "US-ASCII");
    } catch (UnsupportedEncodingException e) {
        // US-ASCII is guaranteed to be available.
        throw new AssertionError(e);
    }
}

/**
 * Base64-encode the given data and return a newly allocated
 * String with the result.
 *
 * @param input  the data to encode
 * @param offset the position within the input array at which to
 *               start
 * @param len    the number of bytes of input to encode
 * @param flags  controls certain features of the encoded output.
 *               Passing {@code DEFAULT} results in output that
 *               adheres to RFC 2045.
 */
public static String encodeToString(byte[] input, int offset, int len, int flags) {
    try {
        return new String(encode(input, offset, len, flags), "US-ASCII");
    } catch (UnsupportedEncodingException e) {
        // US-ASCII is guaranteed to be available.
        throw new AssertionError(e);
    }
}

/**
 * Base64-encode the given data and return a newly allocated
 * byte[] with the result.
 *
 * @param input  the data to encode
 * @param flags  controls certain features of the encoded output.
 *               Passing {@code DEFAULT} results in output that
 *               adheres to RFC 2045.
 */
public static byte[] encode(byte[] input, int flags) {
    return encode(input, 0, input.length, flags);
}

/**
 * Base64-encode the given data and return a newly allocated
 * byte[] with the result.
 *
 * @param input  the data to encode
 * @param offset the position within the input array at which to
 *               start
 * @param len    the number of bytes of input to encode
 * @param flags  controls certain features of the encoded output.
 *               Passing {@code DEFAULT} results in output that
 *               adheres to RFC 2045.
 */
public static byte[] encode(byte[] input, int offset, int len, int flags) {
    Encoder encoder = new Encoder(flags, null);

    // Compute the exact length of the array we will produce.
    int output_len = len / 3 * 4;

    // Account for the tail of the data and the padding bytes, if any.
    if (encoder.do_padding) {
        if (len % 3 > 0) {
            output_len += 4;
        }
    } else {
        switch (len % 3) {
            case 0: break;
            case 1: output_len += 2; break;
            case 2: output_len += 3; break;
        }
    }

    // Account for the newlines, if any.
    if (encoder.do_newline && len > 0) {
        output_len += (((len-1) / (3 * Encoder.LINE_GROUPS)) + 1) *
            (encoder.do_cr ? 2 : 1);
    }

    encoder.output = new byte[output_len];
    encoder.process(input, offset, len, true);

    assert encoder.op == output_len;

    return encoder.output;
}

/* package */ static class Encoder extends Coder {
    /**
     * Emit a new line every this many output tuples.  Corresponds to
     * a 76-character line length (the maximum allowable according to
     * <a href="http://www.ietf.org/rfc/rfc2045.txt">RFC 2045</a>).
     */
    public static final int LINE_GROUPS = 19;

    /**
     * Lookup table for turning Base64 alphabet positions (6 bits)
     * into output bytes.
     */
    private static final byte ENCODE[] = {
        'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P',
        'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f',
        'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v',
        'w', 'x', 'y', 'z', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '+', '/',
    };

    /**
     * Lookup table for turning Base64 alphabet positions (6 bits)
     * into output bytes.
     */
    private static final byte ENCODE_WEBSAFE[] = {
        'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P',
        'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f',
        'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v',
        'w', 'x', 'y', 'z', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '-', '_',
    };

    final private byte[] tail;
    /* package */ int tailLen;
    private int count;

    final public boolean do_padding;
    final public boolean do_newline;
    final public boolean do_cr;
    final private byte[] alphabet;

    public Encoder(int flags, byte[] output) {
        this.output = output;

        do_padding = (flags & NO_PADDING) == 0;
        do_newline = (flags & NO_WRAP) == 0;
        do_cr = (flags & CRLF) != 0;
        alphabet = ((flags & URL_SAFE) == 0) ? ENCODE : ENCODE_WEBSAFE;

        tail = new byte[2];
        tailLen = 0;

        count = do_newline ? LINE_GROUPS : -1;
    }

    /**
     * @return an overestimate for the number of bytes {@code
     * len} bytes could encode to.
     */
    public int maxOutputSize(int len) {
        return len * 8/5 + 10;
    }

    public boolean process(byte[] input, int offset, int len, boolean finish) {
        // Using local variables makes the encoder about 9% faster.
        final byte[] alphabet = this.alphabet;
        final byte[] output = this.output;
        int op = 0;
        int count = this.count;

        int p = offset;
        len += offset;
        int v = -1;

        // First we need to concatenate the tail of the previous call
        // with any input bytes available now and see if we can empty
        // the tail.

        switch (tailLen) {
            case 0:
                // There was no tail.
                break;

            case 1:
                if (p+2 <= len) {
                    // A 1-byte tail with at least 2 bytes of
                    // input available now.
                    v = ((tail[0] & 0xff) << 16) |
                        ((input[p++] & 0xff) << 8) |
                        (input[p++] & 0xff);
                    tailLen = 0;
                };
                break;

            case 2:
                if (p+1 <= len) {
                    // A 2-byte tail with at least 1 byte of input.
                    v = ((tail[0] & 0xff) << 16) |
                        ((tail[1] & 0xff) << 8) |
                        (input[p++] & 0xff);
                    tailLen = 0;
                }
                break;
        }

        if (v != -1) {
            output[op++] = alphabet[(v >> 18) & 0x3f];
            output[op++] = alphabet[(v >> 12) & 0x3f];
            output[op++] = alphabet[(v >> 6) & 0x3f];
            output[op++] = alphabet[v & 0x3f];
            if (--count == 0) {
                if (do_cr) output[op++] = '\r';
                output[op++] = '\n';
                count = LINE_GROUPS;
            }
        }

        // At this point either there is no tail, or there are fewer
        // than 3 bytes of input available.

        // The main loop, turning 3 input bytes into 4 output bytes on
        // each iteration.
        while (p+3 <= len) {
            v = ((input[p] & 0xff) << 16) |
                ((input[p+1] & 0xff) << 8) |
                (input[p+2] & 0xff);
            output[op] = alphabet[(v >> 18) & 0x3f];
            output[op+1] = alphabet[(v >> 12) & 0x3f];
            output[op+2] = alphabet[(v >> 6) & 0x3f];
            output[op+3] = alphabet[v & 0x3f];
            p += 3;
            op += 4;
            if (--count == 0) {
                if (do_cr) output[op++] = '\r';
                output[op++] = '\n';
                count = LINE_GROUPS;
            }
        }

        if (finish) {
            // Finish up the tail of the input.  Note that we need to
            // consume any bytes in tail before any bytes
            // remaining in input; there should be at most two bytes
            // total.

            if (p-tailLen == len-1) {
                int t = 0;
                v = ((tailLen > 0 ? tail[t++] : input[p++]) & 0xff) << 4;
                tailLen -= t;
                output[op++] = alphabet[(v >> 6) & 0x3f];
                output[op++] = alphabet[v & 0x3f];
                if (do_padding) {
                    output[op++] = '=';
                    output[op++] = '=';
                }
                if (do_newline) {
                    if (do_cr) output[op++] = '\r';
                    output[op++] = '\n';
                }
            } else if (p-tailLen == len-2) {
                int t = 0;
                v = (((tailLen > 1 ? tail[t++] : input[p++]) & 0xff) << 10) |
                    (((tailLen > 0 ? tail[t++] : input[p++]) & 0xff) << 2);
                tailLen -= t;
                output[op++] = alphabet[(v >> 12) & 0x3f];
                output[op++] = alphabet[(v >> 6) & 0x3f];
                output[op++] = alphabet[v & 0x3f];
                if (do_padding) {
                    output[op++] = '=';
                }
                if (do_newline) {
                    if (do_cr) output[op++] = '\r';
                    output[op++] = '\n';
                }
            } else if (do_newline && op > 0 && count != LINE_GROUPS) {
                if (do_cr) output[op++] = '\r';
                output[op++] = '\n';
            }

            assert tailLen == 0;
            assert p == len;
        } else {
            // Save the leftovers in tail to be consumed on the next
            // call to encodeInternal.

            if (p == len-1) {
                tail[tailLen++] = input[p];
            } else if (p == len-2) {
                tail[tailLen++] = input[p];
                tail[tailLen++] = input[p+1];
            }
        }

        this.op = op;
        this.count = count;

        return true;
    }
}

private Base64() { }   // don't instantiate
} 
```

# java - 具有复合主键的 JPA 存储库/服务设计

> ID：15850064
> 
> 赞同：4
> 
> 时间：2013-04-06T11:00:51.267
> 
> 标签：java, spring, jpa, entity-relationship, composite-primary-key

我设计了以下数据库表：

1.  以“materialID”为主键的“article”。
2.  以“supplierID”为主键的“supplier”。
3.  以“materialID”和“supplierID”作为复合主键的“采购”（包括与表 1 和表 2 的外键关系）。

现在我想在 Spring 中使用 JPA 处理它们。首先，我将演示适用于实体“文章”和“供应商”的方法。

实体类：

```
@Entity
public class Article {
@Id
private String materialID;

@Column(nullable = false)
private String shortText;  } 
```

实体的 JpaRepository：

```
@Repository
public interface IArticleRepository extends JpaRepository<Article, String> 
{
List<Article> findByShortTextLike(String shortText); //just another search method
} 
```

向用户提供交易的服务：

```
@Service
public class ArticleService implements IArticleService {

@Autowired
private IArticleRepository articleRepository;

@Override
@Transactional(readOnly = true)
public Article getArticleByID(String id) {
return this.articleRepository.findOne(id);
}

@Override
@Transactional
public Article createArticle(String id, String shortText) {
Article article = new Article();
article.setMaterialID(id);
article.setShortText(shortText);
this.articleRepository.save(article);
return article;
} 
```

不幸的是，该系统似乎不适用于“采购”实体。我已经阅读了复合主键挑战并编写了这个实体类。

```
@Entity
@Table
public class Procurement implements Serializable {

private static final long serialVersionUID = 4976268749443066505L;

@EmbeddedId
private ProcId pk; 
```

嵌入 id 的类如下所示。

```
@Embeddable
public class ProcId implements Serializable {

private String materialID;

private int supplierID;
} 
```

实体和 id 类是否正确？有谁知道如何更改存储库/服务以使用复合主键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:34:09.503

你`ProcId`应该这样定义：

```
@Embeddable
public class ProcId implements Serializable {
    @ManyToOne(optional = false)
    private Article article;
    @ManyToOne(optional = false)
    private Supplier supplier;
} 
```

# java - 如何管理同步任务中的线程数

> ID：15850065
> 
> 赞同：5
> 
> 时间：2013-04-06T11:00:53.533
> 
> 标签：java, android, multithreading, synchronization, android-asynctask

我正在寻找的是找到一种方法来管理 Asyntask 中的多个线程。

我需要将本地数据库与服务器更新同步。这可能是可以使用分页检索的大数据。

谁能告诉我在 asyntask 内的循环中管理生成线程的首选方法是什么，以便它可以显示进度对话框，直到所有线程完成。

我不太担心本地数据库对象及其在执行不同线程期间的同步，以便从服务器下载数据并将数据保存/更新到本地数据库中。

注意：我无法在单个服务器调用中从服务器下载所有数据。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T11:23:00.877

如果是长时间运行的操作，您应该使用 IntentService 而不是 AsyncTask。IntentService 独立于 UI，因此您可以在后台运行它。要更新 UI，您可以发送广播意图。我使用 IntentService 进行数据库同步。我从服务器获取数据，在解析时创建批量更新，然后使用批量更新更新本地数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:31:20.903

```
Try this ,    

You can set a static variable that is initialized to zero, and it is incremented 
by each thread .check this variable in asynctask,if it is equal to the no: of threads 
in your class finish it.Simple But works 
```

# python - eyed3 for python - 如何从音频文件中加载选择性 id3 数据？

> ID：15850069
> 
> 赞同：4
> 
> 时间：2013-04-06T11:02:02.303
> 
> 标签：python, tags, metadata, id3, eyed3

我正在使用 eyed3 模块从音乐库中仅读取“艺术家姓名”标签，但是当某些文件正确加载时，其他文件在开始时会在加载状态下失败：

```
mp3file = eyed3.load(filepath) 
```

例如，阅读我的图书馆会出现大约 10 种不同类型的错误。控制台输出：

> eyed3.id3.frames：警告：修复无效的歌词语言代码：
> ¦Ó eyed3.id3.frames：警告：尚不支持帧“RVAD”，使用原始
> 帧解析 eyed3.core：警告：FrameHeader：非法帧 ID： COM
> eyed3.core:WARNING: FrameHeader: Illegal Frame ID: CM1
> eyed3.id3.frames:WARNING: Unknown ID3 frame ID: RGAD
> eyed3.core:WARNING: GEOB 帧不包含 mime 类型
> eyed3.core:WARNING: GEOB 帧不包含有效的 mime 类型
> eyed3.core:WARNING: FrameHeader: Illegal Frame ID: TT2
> eyed3.mp3:WARNING: Unable to find a valid mp3 frame
> eyed3.core:WARNING: Invalid APIC picture type: 78
> eyed3.core:WARNING : APIC 帧不包含图像数据/url

我已经通过仅加载我需要的标签（'艺术家姓名'）而不是所有标签来解决这个问题，但是 eyed3 可以吗？

顺便说一句。你知道在 Python 中使用这个模块的任何好的手册吗？因为在这种情况下，官方网站（[http://eyed3.nicfit.net](http://eyed3.nicfit.net)）似乎很差

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-09-04T12:12:44.287

正如[在此处共享](https://stackoverflow.com/questions/22403189/python-eyed3-warning)的那样，您可以将错误日志记录级别设置为仅记录错误，这应该会删除您的警告。

```
eyed3.log.setLevel("ERROR") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T16:13:17.387

没有“仅艺术家姓名标签”。每个文件都有一个标签，艺术家姓名可能存在于其中。所有的 WARNING 消息都只是警告。标签已加载，某些值格式错误，因此会打印警告。但标签仍会加载，如果有艺术家框架，您可以使用 tag.artist 读取它。

# object - 保存包含自定义类对象的 NSMutableArray 的内容

> ID：15850071
> 
> 赞同：0
> 
> 时间：2013-04-06T11:02:12.267
> 
> 标签：object, nsmutablearray, save

我有一个自定义类“书签”，其中包含一个`NSString`. 我使用 a`NSMutableArray`来存储此类的实例，从而制作了一个书签列表，我`UITableView`用`UITableViewCell`原型将其显示在 a 中。

有人可以就如何将实例保存`NSMutableArray`到文件中提供一些建议/示例（也许还有如何加载它们的示例）。我找不到任何我搜索过的例子。我尝试将数组转换为`NSData`并使用`NSKeyedArchiver`但没有成功。我也尝试过转换为 an`NSArray`但无法正常工作。

在我实现的自定义类中`encodeWithCode`，`initWithCoder`.

我需要在应用程序关闭之前保存，并且我想在应用程序启动时加载列表。

我被困住了... :(

编辑：应 Ageektrapped 的要求，以下是代码片段：

在我的 Bookmark 类的实现中：

```
- (void) encodeWithCoder: (NSCoder *) encoder
{
  [encoder encodeObject:self.address forKey:@"Address"];
}

- (id) initWithCoder: (NSCoder *) decoder
{
  self = [super init];
  if (self != nil)
  {
    self.address = [decoder decodeObjectForKey: @"Address"];
  }
  return self;
} 
```

在我的 MasterViewController

`self.bookmarks`是一个`NSMutableArray`包含书签对象。（当调用下面的代码时，书签数组中至少有一个条目。）

```
NSString *docFolder = [NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory,NSUserDomainMask,YES) lastObject];
NSString *filename = [docFolder stringByAppendingPathComponent:@"data.plist"];
NSLog(@"File : %@", filename);
NSLog(@"Bookmarks : %d", self.bookmarks.count);

NSData *data = [NSKeyedArchiver archivedDataWithRootObject: self.bookmarks ];
if ([data writeToFile: filename atomically: YES])
{
  NSLog(@"Successful write");
} else {
  NSLog(@"Failed write");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:42:31.740

我终于弄清楚我的问题是什么。因为我在我的 iPhone 设备上调试，所以有些文件夹是不可写的。我使用的代码是要求在这样一个区域（`NSDocumentationDirectory`）中的位置：

终于找到 => [如何在 iPhone 上获得可写路径？](https://stackoverflow.com/questions/1567134/how-can-i-get-a-writable-path-on-the-iphone) 我理解了我的问题并让它工作。

我需要做的是更换：

```
NSString *docFolder = [NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory,NSUserDomainMask,YES) lastObject];
NSString *filename = [docFolder stringByAppendingPathComponent:@"data.plist"]; 
```

和：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory,NSUserDomainMask,YES);
NSString *libFolder = [paths objectAtIndex: 0];
NSString *filename = [libFolder stringByAppendingPathComponent: @"data.archive"]; 
```

我还从以下位置更改了这些行（与示例一致）：

```
NSData *data = [NSKeyedArchiver archivedDataWithRootObject: self.bookmarks ];
if ([data writeToFile: filename atomically: YES])
{
  NSLog(@"Successful write");
} else {
  NSLog(@"Failed write");
} 
```

到：

```
BOOL success = [NSKeyedArchiver archiveRootObject: self.bookmarks toFile: filename];
if (success)
{
  NSLog(@"Successful write");
} else {
  NSLog(@"Failed write");
} 
```

.

将文件读入`NSMutableArray`应用程序启动时的代码是：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory,NSUserDomainMask,YES);
NSString *libFolder = [paths objectAtIndex: 0];
NSString *filename = [libFolder stringByAppendingPathComponent: @"data.archive"];
self.bookmarks = [NSKeyedUnarchiver unarchiveObjectWithFile: filename]; 
```

# overloading - 在合金中隐藏子类型的字段

> ID：15850073
> 
> 赞同：3
> 
> 时间：2013-04-06T11:02:16.490
> 
> 标签：overloading, subtype, alloy

假设我在合金 4.2 中有以下签名声明：

```
sig Target {}

abstract sig A {
    parent: lone A,
    r: some Target
}

sig B extends A {}
sig C extends A {} 
```

运行时，生成的实例将具有从 every`B`到 some`Target`和 from`C`到 some的箭头`Target`。

我怎么能只隐藏箭头`B`？
起初，我尝试了以下方法：

```
abstract sig A {
    parent: lone A
}

sig B extends A {
    r: some Target
}

sig C extends A {
    r: some Target
} 
```

这将使我能够控制`r`in `B`，但是在编写属性时会引入很多歧义。我想让这些尽可能简单。例如：

```
all a: A | a.r = parent.a.r 
```

上面说`a`'s`Targets`是`a`'children's的集合`Targets`。
对于后面的声明，我将不得不将其重写为

```
all b: B | b.r = parent.b.((B <: r) + (C <: r))
all c: C | c.r = parent.c.((B <: r) + (C <: r)) 
```

这是不可取的。

是否有任何解决方法可以拥有一个*通用*字段，但仍然可以控制显示的箭头？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T15:59:43.947

您可以定义一个与 (C <: r) 完全对应的函数：

```
fun C_r : A -> Target {
    (C <: r)
} 
```

在 Alloy 可视化器中，您将可以访问关系 $C_r。然后，您可以关闭关系 r 的“显示为弧”，但仍然可以看到 $C_r。这应该隐藏属于 (B <: r) 的边集。

# wordpress - 缩小期间覆盖图像位置变化

> ID：15850079
> 
> 赞同：0
> 
> 时间：2013-04-06T11:02:50.400
> 
> 标签：wordpress, position, overlay, zooming

当我缩小网页时，叠加图像位置会发生变化。

我怎样才能避免这些。[示例网站如下]

演示网站：[Netstrikers](http://netstrikers.comeze.com/?p=69)

网站是用wordpress创建的。

我的 single.php 代码：[http ://pastebin.com/raw.php?i=8ReWyLxu](http://pastebin.com/raw.php?i=8ReWyLxu)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:24:39.157

请检查并设置位置：相对。在内容 div..

```
<div id="content" style='position: relative;'>
   <div id="xx1" onclick="myFunction()">
       <img src="http://i.imgur.com/YqqQj2x.png">
   </div>
   <.....>
</div> 
```

# uitableview - 上下滚动时保持 UITableView 中单元格的左/右定位

> ID：15850082
> 
> 赞同：0
> 
> 时间：2013-04-06T11:02:52.993
> 
> 标签：uitableview, nsfetchedresultscontroller, increment, alternating

我有一个应用程序，它使用`NSFetchedResultsController`来从数据库中获取各种结果并将它们显示在`UITableViewCell`. 出于艺术原因，我一直希望交替的单元格是左右方向的，就像`Messages`.

我目前正在通过使用`integer`called来实现这一点`entryIndexPath`，它会递增，然后在`if`内部的语句中使用，`cellForRowAtIndexPath`以根据该整数是奇数还是偶数来确定单元格是左对齐还是右对齐。

我的问题是，当向上滚动表格时，这个左/右分配可能会混淆，并且从顶部重新出现时可以重新分配刚刚滚动的单元格，因为`cellForRowAtIndexPath`正在调用，计数器正在递增。

我需要一种万无一失的方法来确保当从 FRC 获得一组新结果时，左/右值被正确且牢固地分配。我知道我需要在 之外执行此操作`cellForRowAtIndexPath`，但我正在努力寻找**应该**在哪里执行此操作。有什么想法或建议吗？

**编辑：**我还要指出我的托管对象目前没有左/右变量或类似的东西，所以创建一个会很尴尬，重新创建大量数据等。如果有办法不这样做，那将是理想的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T21:39:45.840

确保为每个行类型明确设置单元格类型。我还建议使用这种替代方法从 indexPath 获取序列：

```
NSManagedObject *object = [self.fetchedResultsController objectAtIndexPath:indexPath]; 
NSUInteger position = [self.fetchedResultsController.fetchedObjects indexOfObject:object];
NSString *cellIdentifier = position % 2 ? @"RightCell" : @"LeftCell";
id cell = [self.tableView dequeueReusableCellWithIdentifier:cellIdentifier]; 
```

# c++ - 错误：在构造函数（C++）中没有重载函数的实例

> ID：15850084
> 
> 赞同：0
> 
> 时间：2013-04-06T11:03:07.597
> 
> 标签：c++, class, function, constructor

我有一个非常奇怪的问题......首先，这是我班级的文件：

显示.h：

```
#ifndef SHOW
#define SHOW

#include <iostream>
#include <string>
#include <string.h>

class Show
{
private:
    std::string m_time;
    int m_serial
public:
    Show(const std::string &time, const int &serial);
    ~Show();
};
#endif 
```

显示.c：

```
#include "Show.h"

Show::Show(const std::string &time,const int &serial)
{

} 
```

正如你可能看到的，我只写了构造函数的声明，当visual studio在Show.c文件中的第二个“Show”字下划线时，告诉我：

"void Show::Show(const std::string &time,const int &serial)

显示::显示()

显示::显示（常量显示 &）

错误：没有重载函数“Show::Show”的实例与特定类型匹配”

当我将鼠标光标停留在 Show.h 文件中的构造函数上时，看起来该函数不存在......我以前用 C++ 编写过一些类，这是第一次发生类似的事情我...请帮助:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T11:08:25.567

你忘了把字段变量放在`;`后面。`m_serial`我相信这是您遇到问题的原因。不幸的是，许多编译器没有给出此类问题的确切原因，因此您必须小心语法规则。

# iphone - iphone中的自动填写注册表单

> ID：15850085
> 
> 赞同：0
> 
> 时间：2013-04-06T11:03:14.337
> 
> 标签：iphone, ios, uitextfield

我的数据数组中有来自网络服务的数据，我想在用户输入电子邮件时自动填充所有数据，它应该加载所有文本字段中的所有数据，我该怎么办？请帮忙

```
-(BOOL) textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    GET_DBHANDLER
    if (dataArray.count==0) {
        NSLog(@"sasas");
    }
    else
    {
    dataArray = [dbHandler getUserDetails:txtEmail.text];
    for (userDC *user in dataArray) {
        txtFirstName.text = user.firstName;
        txtSurName.text = user.surName;
        txtTelephone.text = user.telephone;
        txtMobile.text = user.mobile;
        txtBusinessName.text = user.businessName;
        txtBusinessAddress.text = user.business_address;
        txtWebSite.text = user.website;
        txtLinkedIn.text = user.linkedin;
        txtFaceBook.text = user.facebook;
        txtTwitter.text = user.twitter;
        txtAppUserName.text = user.app_username;
        txtAppPassword.text = user.app_password;
        txtNetworkUserName.text = user.network_username;
        txtNetworkPassword.text = user.network_password;
        txtBNIUserName.text = user.bni_username;
        txtBNIPassword.text = user.bni_password;
    }}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:54:21.603

```
-(BOOL) textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    if (textField.tag == yourEmailTextField.tag)
    {
        if([textField.text isEqualToString:yourRequiredEmailID])
        {
            for (userDC *user in dataArray) {
                txtFirstName.text = user.firstName;
                txtSurName.text = user.surName;
                txtTelephone.text = user.telephone;
                txtMobile.text = user.mobile;
                txtBusinessName.text = user.businessName;
                txtBusinessAddress.text = user.business_address;
                txtWebSite.text = user.website;
                txtLinkedIn.text = user.linkedin;
                txtFaceBook.text = user.facebook;
                txtTwitter.text = user.twitter;
                txtAppUserName.text = user.app_username;
                txtAppPassword.text = user.app_password;
                txtNetworkUserName.text = user.network_username;
                txtNetworkPassword.text = user.network_password;
                txtBNIUserName.text = user.bni_username;
                txtBNIPassword.text = user.bni_password;
            }
            return NO;
        }
    }
    return YES;
} 
```

# xcode - 不确定何时在 Xcode 中使用目标或配置

> ID：15850088
> 
> 赞同：1
> 
> 时间：2013-04-06T11:03:23.963
> 
> 标签：xcode, configuration, target

当我更喜欢在 Xcode 中创建新目标而不是创建新配置时，有人可以给我一个清晰直观的例子吗？

例如，当使用 TestFlight 进行 beta 测试时；我应该创建一个新的“TestFlight”目标以包含所有 TestFlight 代码，还是应该创建一个新的“Beta”配置，然后在代码中执行以下操作：

```
#ifdef CONFIGURATION_Beta
    [TestFlight takeOff:@"Insert your Team Token here"];
#endif 
```

那么，什么时候使用目标而不是配置更合适，反之亦然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T03:00:03.043

当我更喜欢在 Xcode 中创建新目标而不是创建新配置时，有人可以给我一个清晰直观的例子吗？

干得好，，，

目标用于控制不同产品的不同资产和代码的添加。

例如，假设您想要 2 个应用程序，一个 iphone/itouch 版本和一个用于 iPad 的单独目标，而不是通用应用程序。当您为 iphone 添加资产时，只检查 iphone 目标。当您为 ipad 应用程序添加资产时，请检查 ipad 目标。您编译编译测试并分别发布每个目标。测试飞行将在两者中。您还可以使用不同的编译器设置来启用其他调试。

对于每一个你想要的 CONFIGURATION_Beta 和 CONFIGURATION_Store 的配置。现在假设您只想要 beta 版的 testflight，而不是需要配置的商店版本。

```
#ifdef CONFIGURATION_Beta
    [TestFlight takeOff:@"Insert your Team Beta Token here"];
#endif

#ifdef CONFIGURATION_Store
// No test flight, so no code added to app
#endif 
```

链接器将优化并且不在存储版本的二进制文件中包含测试代码。

# c - C 指向错误对象的指针

> ID：15850089
> 
> 赞同：0
> 
> 时间：2013-04-06T11:03:24.853
> 
> 标签：c, arrays, pointers

在我的代码中，我有一个包含 10 个分数对象的数组，出于测试目的，我只想编辑该数组中的第一个分数。我的 .h 文件如下：

```
/*frac_heap.h*/

/*typedefs*/

typedef struct
{
   signed char sign;
   unsigned int denominator;
   unsigned int numerator;
}fraction;

typedef struct
{
    unsigned int isFree;
}block;

void dump_heap();
void init_Heap();
fraction* new_frac(); 
```

在我的 .c 文件中如下：

```
// File frac_heap.c
#include <stdio.h>
#include <stdlib.h>
#include "frac_heap.h"

#define ARRAYSIZE 10

fraction* heap[ARRAYSIZE] = {};
block* freeBlocks[ARRAYSIZE] = {};
int startingBlock = 0;

void init_Heap(){
    int x;
    for(x = 0; x < ARRAYSIZE; x ++){    
        block *currBlock = &freeBlocks[x];
        currBlock->isFree = 1;  
    }

}
void dump_heap(){
    int x;
    for(x = 0; x < ARRAYSIZE; x ++){
        fraction* tempFrac = &heap[x];
        printf("%d\t%d\t%d\n",tempFrac->sign, tempFrac->numerator, tempFrac->denominator);
    }   

}

fraction* new_frac(){
    fraction* testFraction = &heap[0];
    return testFraction;
}  

int main(){

    init_Heap();

    fraction *p1;
    p1 = new_frac();
    p1->sign = -1;
    p1->numerator  = 2;
    p1->denominator = 3;
    dump_heap();
    return 0;
   } 
```

dump_heap() 的输出应该列出 10 个分数（它们的符号、分子和分母），其中分数 1 是唯一更改的分数。但是，输出如下：

```
-1  2   3
3   0   2
2   0   0
0   0   0
0   0   0
0   0   0
0   0   0
0   0   0
0   0   0
0   0   0 
```

当我只有一个指向分数 1 的指针作为 p1 时，如何编辑分数 2 和 3？我使用指针错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T11:50:09.963

您需要 malloc() 您的结构或定义固定大小的分数数组（如果大小是固定的。

替代#1：

```
fraction heap[ARRAYSIZE][10] = {}; 
```

备选方案 #2：

```
fraction* heap[ARRAYSIZE] = {};

void init_Heap(){
int x;
for(x = 0; x < ARRAYSIZE; x ++){    
    block *currBlock = &freeBlocks[x];
    currBlock->isFree = 1;  

    /*MALLOC FRACTIONS*/
    heap[x] = (fraction*)malloc(  sizeof(fraction));
    heap[x]->numerator=0;
    heap[x]->denominator=0;
    heap[x]->sign=0;
    }
}

void dump_heap(){
    ...
    fraction* tempFrac = heap[x]; /*You cannot de-reference heap*/
    ...
}

fraction* new_frac(){
    ...
    fraction* testFraction = heap[0];
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:14:11.380

You have two errors...

The first is that you use the address-of operator `&` when you get the pointers from the array. When you use it on a pointer you get a pointer to a pointer, not the actual pointer.

The second problem is that you don't allocate the pointers.

So when you try to dererference the structure pointers not only will access wrong memory pointer, if you remove the `&` operator then you would access unallocated memory. Both of these will cause *undefined behavior*. The second of which will most likely give you a crash.

* * *

You also can't initialize an array with just empty braces. You have to put *what* you want to initialize the array to inside the braces:

```
fraction* heap[ARRAYSIZE] = { NULL }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T12:08:48.863

change

```
fraction* heap[ARRAYSIZE] = {};
block* freeBlocks[ARRAYSIZE] = {}; 
```

to

```
fraction heap[ARRAYSIZE] = {0};
block freeBlocks[ARRAYSIZE] = {0}; 
```

`type* name[SIZE]` : make pointer array

you want ten fraction object. `fraction arrayName[10];`

# php - 如何显示 PHP 不存在的页面？

> ID：15850092
> 
> 赞同：0
> 
> 时间：2013-04-06T11:03:40.817
> 
> 标签：php

我有一个网站，显示有关在线商店的信息。我需要以下内容：

当您输入 时`example.com/shop/name-shop`，这应该会显示**名称商店页面。**

我只想要`example.com/shop.php`显示基于**URL**的商店信息的文件。我不喜欢用`example.com/shop?name-shop`。

这是可能的还是我需要为每个商店创建一个文件？我尝试使用错误页面和标题位置来执行此操作，并且工作正常，但在 url 显示`example.com/shop`而不是`example.com/shop/name-shop`.

谢谢。

编辑：我在 Apache 中使用 .htaccess，`ErrorDocument 404 /error404.php`在文件 error404.php 中我有一个 if 来检查 url 是否是`http://example.com/shop/*`当 url 包含 /shop/ 时重定向`header ("location: website")`到正确的商店并且可以工作。但在浏览器中的 url 中只`example.com/shop`显示`example.com/shop/name-shop`。显然是因为我正在重定向到 shop.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:14:42.060

I'd recommend you to use Symfony2\. You can define routes with placeholders and you have a FrontController, which would correspond to your shop.php file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:05:50.380

根据您使用的 Web 服务器，您将需要使用重写规则（对于 Apache 的[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html "mod_rewrite")）或 404 页面来仅使用一个 PHP 文件在每个 URL 上显示自定义内容。

# objective-c - 在 ios 中使用 sharekit 的 Twitter 集成问题？

> ID：15850095
> 
> 赞同：0
> 
> 时间：2013-04-06T11:04:13.227
> 
> 标签：objective-c, xcode, twitter, ios6, sharekit

我正在使用 sharekit sdk 进行 twitter 共享，它工作正常，然后从两天开始突然出现“访问 Twitter 出现问题”之类的问题，任何人都可以找到解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:02:35.803

Twitter 最近收紧了对 OAuth 的限制。从讨论（[https://dev.twitter.com/discussions/16443](https://dev.twitter.com/discussions/16443)）：

*   您必须将 oauth_callback 值传递给 oauth/request_token。这不是可选的。即使你已经在 dev.twitter.com 上设置了一个。如果您正在执行带外 OAuth，请传递 oauth_callback=oob。
*   您必须将 oauth_verifier 传递给 oauth/access_token，您要么从已执行的回调中收到，要么收到由最终用户手动输入的 oauth_verifier。

长话短说：您必须从主分支更新 ShareKit，或者至少拉出这个提交：[https ://github.com/ShareKit/ShareKit/pull/692](https://github.com/ShareKit/ShareKit/pull/692)

# html - 当用户转发我的时事通讯时，我如何禁用 HTML？

> ID：15850098
> 
> 赞同：0
> 
> 时间：2013-04-06T11:04:45.750
> 
> 标签：html, email, newsletter

我正在为某些事件发送 HTML 格式的定制时事通讯。当我从我的电子邮件收件箱转发时事通讯时，我可以编辑内容。有什么方法可以用来禁用 HTML，以便用户在转发它时不能进行任何更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T02:17:23.500

我想，最好让您的[HTML 时事通讯](http://www.hirewordpressdeveloper.org/html-newsletter)以这种方式发送，以避免在将它们发送给您的客户时出现更多问题。如果您真的想在转发时事通讯时禁用 HTML，您也可以寻求专业人士的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:35:53.783

唯一的方法是使用巨型图像而不是 html，但这不是一个好习惯。

# function - 我想使用 Mule 中使用的一组常用函数，例如计数器、UUID 生成器、日期和时间戳

> ID：15850107
> 
> 赞同：0
> 
> 时间：2013-04-06T11:05:19.110
> 
> 标签：function, annotations, components, mule, mule-studio

我想使用 Mule 中使用的一组常用函数，例如计数器、UUID 生成器、日期和时间戳。

我只找到了关于它的[这个页面](http://www.mulesoft.org/documentation/display/current/Function+Annotation)。

但我没有关于 Mule 中的 @Function Annotation 的任何信息，如果有人有任何信息，请与我分享并帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:11:16.653

将注释解析器添加到您的配置以启用注释：

```
<spring:bean class="org.mule.config.endpoint.RegistryBackedAnnotationsParserFactory" /> 
```

有关更长的示例，请参见我的[其他答案](https://stackoverflow.com/a/15886999/387927)。

# javascript - 如果找到元素更改页面内容

> ID：15850108
> 
> 赞同：0
> 
> 时间：2013-04-06T11:05:19.673
> 
> 标签：javascript

如果页面上存在元素，是否可以更改页面内容？

if (window.frames[0].document.getElementById('xl')) { //加载页面内容acta.html}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:09:14.970

Only if the content loaded in the frames is in the same domain of the page where the script is executed. See the [Same-Origin Policy](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript) – SOP.

Otherwise you can't access to the frame's DOM.

If the page are in the same domain, then your code is perfectly valid – assume the page in the frames is loaded.

**Update**:

To change the content, then you can simple change `location` object of the frame:

```
if (window.frames[0].document.getElementById('xl')) {
    window.frames[0].location.href = "acta.html";
} 
```

If you have a reference to the frame / iframe element instead of the window's (`frame[0]`), you can also use the `src` attribute.

You can also change the top window's location just doing:

```
window.location.href = "acta.html"; 
```

However that will change, of course, the URL of the page too. If you want to keep the URL as before, you should use another iframe that basically wraps your current main window and the hidden frame. So the URL displayed in the address bar will not change even if you change the content of the first frames to "acta.html".

Another approach could be use the [XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest) object to makes a http call and load your page's source, then replace the body of the current page with the one's retrieved by the XHR. However, that's ugly. This kind of redirection, keeping the same URL, should be done on server side, not on client side.

# c++ - 是否可以将 Qt Creator 2.7 与 Visual Studio 2012 编译器一起使用并具有其所有功能？

> ID：15850111
> 
> 赞同：2
> 
> 时间：2013-04-06T11:05:41.607
> 
> 标签：c++, qt, c++11

不久前，我开始对c++*感兴趣*，而 Qt 似乎是新手开始的正确地方。我为编译器安装了带有 Qt Creator 2.5 和 Visual Studio 2010 Express 的 Qt 5.0.0，一切正常，我能够编写一个简单的应用程序并运行它。

从我所见，Visual Studio 2012 提供了 c++11 的几乎所有功能，我的问题是：如果我安装新的 Qt 5.0.2 + Qt Creator 2.7 和 Visual Studio 2012，我将能够将其用作编译器并使用[这里](http://cpprocks.com/a-comparison-of-c11-language-support-in-vs2012-g-4-7-and-clang-3-1/)介绍的所有功能（lambdas、智能指针、移动语义等）？

PS：我使用的是 Windows 7 64 位

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T11:12:35.250

是的，Creator 支持 MSVC2012 编译器，功能取决于编译器，而不是 Creator。这就是我使用 Qt 一段时间的方式。

请注意，在检查代码时，IDE 本身可能不支持某些新的 C++11 功能，但即使您收到错误或警告，只要您的代码有效，它就会编译。

# python - Redis：如何解析列表结果

> ID：15850112
> 
> 赞同：31
> 
> 时间：2013-04-06T11:05:43.143
> 
> 标签：python, redis

我在 Redis 中存储一个列表，如下所示：

```
redis.lpush('foo', [1,2,3,4,5,6,7,8,9]) 
```

然后我得到这样的列表：

```
redis.lrange('foo', 0, -1) 
```

我得到这样的东西：

```
[b'[1, 2, 3, 4, 5, 6, 7, 8, 9]'] 
```

如何将其转换为实际的 Python 列表？

另外，我没有看到其中定义的任何内容`RESPONSE_CALLBACKS`可以提供帮助？我错过了什么吗？

一个可能的解决方案（在我看来很糟糕）可以是：

```
result = redis.lrange('foo',0, -1)[0].decode()

result = result.strip('[]')

result = result.split(', ')

# lastly, if you know all your items in the list are integers
result = [int(x) for x in result] 
```

***更新***

好的，所以我得到了解决方案。

实际上，该`lpush`函数希望所有列表项都作为参数传递，而不是作为单个列表传递。来自 redis-py 源的函数签名清楚地表明......

```
def lpush(self, name, *values):
    "Push ``values`` onto the head of the list ``name``"
    return self.execute_command('LPUSH', name, *values) 
```

我在上面所做的是将单个列表作为参数发送，然后将其作为 SINGLE 项发送到 redis。

我应该按照答案中的建议解包列表：

```
redis.lpush('foo', *[1,2,3,4,5,6,7,8,9]) 
```

它返回我期望的结果......

```
redis.lrange('foo', 0, -1)
[b'9', b'8', b'7', b'6', b'5', b'4', b'3', b'2', b'1'] 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-06T11:27:58.853

我认为您遇到的语义类似于*list.append()*和**list.extend()**之间的区别。我知道这对我有用：

```
myredis.lpush('foo', *[1,2,3,4]) 
```

...注意列表前缀的 * (map-over) 运算符！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-30T05:57:41.160

另一种方式：您可以使用`RedisWorks`库。

`pip install redisworks`

```
>>> from redisworks import Root
>>> root = Root()
>>> root.foo = [1,2,3,4,5,6,7,8,9]  # saves it to Redis as a list
...
>>> print(root.foo)  # loads it from Redis later 
```

它将 python 类型转换为 Redis 类型，反之亦然。所以即使你有嵌套列表，它也会起作用：

```
>>> root.sides = [10, [1, 2]]  # saves it as list in Redis.
>>> print(root.sides)  # loads it from Redis
[10, [1, 2]]
>>> type(root.sides[1])
<class 'list'> 
```

免责声明：我写了这个库。这是代码：[https ://github.com/seperman/redisworks](https://github.com/seperman/redisworks)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T11:15:31.147

```
import json
r = [b'[1, 2, 3, 4, 5, 6, 7, 8, 9]']
rstr = r[0]
res_list = json.loads(rstr) 
```

# linux - 将 Maildir 内容移动到父目录

> ID：15850115
> 
> 赞同：0
> 
> 时间：2013-04-06T11:06:00.423
> 
> 标签：linux, bash, file, file-io

我必须更改我的虚拟邮件文件夹树。

我已经配置了一个新的邮件服务器，现在我必须导入我的旧虚拟邮箱。

我的旧目录就像 /var/spool/vmail/domain.com/account/Maildir 里面有（cur / new / ...）。我必须像那样移动 /var/spool/vmail/domain.com/account

所以我必须为每个域都这样做。将所有从 Maildir 移动到父文件夹（帐户文件夹）。

我需要一个脚本，因为有数百个文件夹。

非常感谢您的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T17:13:43.783

尝试这个：

```
for f in /var/spool/vmail/*/*; do
  mv "$f/Maildir"/* "$f"/
  rmdir "$f/Maildir"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:28:20.700

怎么样`cd /var/spool/vmail/domain.com/account/Maildir; mv * ..`

# java - 从列表写入文本文件

> ID：15850121
> 
> 赞同：-1
> 
> 时间：2013-04-06T11:06:51.023
> 
> 标签：java, io

我使用 java 创建了文本文件编码器，并将文本中的单词添加到列表中。现在对于解码程序，我需要在编码程序中使用的列表，我已经使用了参考变量字。我无法理解如何在解码程序中使用该列表。如何导入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:27:18.093

这是一个简单的示例，将 a 写入`List`a`File`然后读取`File`以重新生成`List`. 然后检查两者是否相同。

代码使用`File.createTempFile`and`File.deleteOnExit`来防止在使用此示例时在任何地方创建随机文件。显然这需要替换为存储文件的真实位置：

```
public static void main(String[] args) throws IOException {
    final List<String> myList = new LinkedList<>();
    myList.add("Some");
    myList.add("Random");
    myList.add("Content");
    myList.add("Some");
    final File file = File.createTempFile("testProgram", ".list");
    file.deleteOnExit();
    writeToFile(myList, file);
    final List<String> myList2 = readFromFile(file);
    System.out.println(myList);
    System.out.println(myList2);
    if (myList.equals(myList2)) {
        System.out.println("List read is the same as the list written");
    } else {
        System.out.println("Something has gone wrong...");
    }
}

public static void writeToFile(final List<String> list, final File file) throws IOException {
    try (final BufferedWriter bw = new BufferedWriter(new FileWriter(file))) {
        for (final String line : list) {
            bw.append(line);
            bw.newLine();
        }
    }
}

public static List<String> readFromFile(final File file) throws IOException {
    final List<String> content = new LinkedList<>();
    try (final BufferedReader br = new BufferedReader(new FileReader(file))) {
        String line;
        while ((line = br.readLine()) != null) {
            content.add(line);
        }
    }
    return content;
} 
```

或者，您可以使用 Java 序列化 api 将`List`文件作为二进制内容写入文件并读回。这会更快，但文件将包含乱码（非人类可读的内容）。

```
public static void writeToFile(final List<String> list, final File file) throws IOException {
    try (final ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(file))) {
        oos.writeObject(list);
    }
}

public static List<String> readFromFile(final File file) throws IOException, ClassNotFoundException {
    try (final ObjectInputStream ois = new ObjectInputStream(new FileInputStream(file))) {
        return (List<String>) ois.readObject();
    }
} 
```

# cocos2d-iphone - 如何在 cocos2d box2d 的范围内移动相机

> ID：15850126
> 
> 赞同：0
> 
> 时间：2013-04-06T11:07:18.930
> 
> 标签：cocos2d-iphone, box2d-iphone

```
-(void)moveCamera:(CGpoint)resultVector {
float centerX, centerY, centerZ;
float eyeX, eyeY, eyeZ;

[self.camera centerX:&centerX centerY=&centerY centerZ=&centerZ];
[self.camera eyeX:&eyeX eyeY:&eyeY eyeZ:&eyeZ];

float newX = (resultVector.x - actorOriginalPosition.x) + (actorOriginalPosition.x - screenSize.width/2);
float newY = (resultVector.y - actorOriginalPosition.y) + (actorOriginalPosition.y - screenSize.height/2);

[self.camera setCenterX:newX centerY=newY centerZ:-150.0f];
[self.camera setEyeX:newX eyeY=newY eyeZ:eyeZ];

} 
```

这里 resultVector 是演员 currentPosition

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:22:34.907

在更新功能中：

```
CGPoint direction = [self getPoint:myBody->GetPosition()];
[self setPosition:direction];

- (CGPoint)getPoint:(b2Vec2)vec
{
    CGSize screen = [[CCDirector sharedDirector] winSize];

    float x = vec.x * PTM_RATIO;
    float y = vec.y * PTM_RATIO;

    x = MAX(x, screen.width/2);
    y = MAX(y, screen.height/2);

    float _x = area.width  -  (screen.width/2);
    float _y = area.height - (screen.height/2);

    x = MIN(x, _x);
    y = MIN(y, _y);

    CGPoint goodPoint = ccp(x,y);

    CGPoint centerOfScreen = ccp(screen.width/2, screen.height/2);
    CGPoint difference = ccpSub(centerOfScreen, goodPoint);

    return difference;
} 
```

# android - android中的广告问题

> ID：15850127
> 
> 赞同：0
> 
> 时间：2013-04-06T11:07:24.497
> 
> 标签：android, admob

我开发了一个应用程序（目前正在玩谷歌）并且投放广告出错了。

我放了截图给你一个想法。

1º启动应用程序和广告正常，当按下EditText（文本）时正常并且通常停止写入。

1º--- [http://i.stack.imgur.com/7VTgL.png](http://i.stack.imgur.com/7VTgL.png)

问题是当我切换活动或广告以再次访问并点击相同的 EditText（文本）时被广告阻止，并且 EditText 留在网站上。![广告现在上升而不是 eddittext][3]

[http://i.stack.imgur.com/j35Nw.png](http://i.stack.imgur.com/j35Nw.png)

这是我的xml活动：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <ImageView
        android:id="@+id/Biniciar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/Etitulo"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="36dp"
        android:src="@drawable/micro" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/ETexto"
        android:layout_alignBottom="@+id/ETexto"
        android:layout_alignRight="@+id/textView1"
        android:text="@string/Texto"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/anuncio"
        android:layout_width="match_parent"
        android:layout_height="60dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:background="#FFFFFF" >
    </LinearLayout>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/Etitulo"
        android:text="@string/Titulo"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/Bborrar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="@string/Limpiar" />

    <Button
        android:id="@+id/BAdmin"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="@string/Notas" />

    <EditText
        android:id="@+id/Etitulo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/Bborrar"
        android:layout_marginTop="21dp"
        android:layout_toRightOf="@+id/textView1"
        android:ems="10"
        android:inputType="text" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/BGuardar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="@string/Guardar" />

    <EditText
        android:id="@+id/ETexto"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/Etitulo"
        android:layout_below="@+id/Biniciar"
        android:layout_marginTop="31dp"
        android:ems="10"
        android:inputType="textMultiLine"
        android:maxLines="5" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T01:24:17.913

没有键盘的原始布局恰好适用于广告，因为您的其余内容不会填满整个页面。除了将广告与底部对齐之外，最佳做法是告诉布局的其余部分位于广告上方。

```
<RelativeLayout>
  <LinearLayout
      xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:tools="http://schemas.android.com/tools"
      android:id="@+id/anuncio"
      android:layout_width="match_parent"
      android:layout_height="60dp"
      android:layout_alignParentBottom="true"
      android:layout_alignParentLeft="true"
      android:background="#FFFFFF" >
  </LinearLayout>
  <RelativeLayout
      android:id="@+id/restOfMyLayout"
      android:layout_above="@id/anuncio">
      // Put the rest of your layout here.
  </RelativeLayout>
</RelativeLayout> 
```

如果您这样做，广告将不会覆盖您的文本框。

# c++ - 函数无法解析c ++

> ID：15850128
> 
> 赞同：1
> 
> 时间：2013-04-06T11:07:25.963
> 
> 标签：c++, function, filter

我正在尝试制作一个更通用的过滤器，所以我用 typedef 定义了一个指向函数的指针。但我在 DynamicVector* filterByQuantity(int quantity) 函数中收到错误消息。这是我正在尝试做的整个代码：

控制器.h

```
typedef int (*filterFunc)(Medicine* criteria, Medicine*);
DynamicVector<Medicine>* filter2(Medicine* criteria, filterFunc f); 
```

控制器.cpp

```
 #include "controller.h"

int filterByQuantityLess(Medicine* criteria, Medicine* p) {
    if (criteria->getQuantity() > p->getQuantity()) {
        return 0;
    }
    return 1;
}

DynamicVector<Medicine>* Controller::filter2(Medicine* criteria, filterFunc f){
    DynamicVector<Medicine>* medList = repo->getAll();
    DynamicVector<Medicine>* rez = new DynamicVector<Medicine>();
    for(int i=0; i < medList->getLen(); i++){
        Medicine* m = new Medicine(medList->getElementAtPosition(i));
        if(!f(criteria, m)){
            rez->addElement(*m);
        }
    }
    return rez;
}

DynamicVector<Medicine>* filterByQuantity(int quantity){
    Medicine* criteria = new Medicine(1,"",1,quantity);
        DynamicVector<Medicine>* rez = filter2(criteria, filterByQuantityLess); //error

    return rez;
} 
```

错误是：此行有多个标记 - 'filter2' 未在此范围内声明 - 函数 'filter2' 无法解析

我在哪里做错了？filter2 函数返回一个 DynamicVector，所以我不明白为什么它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:21:16.033

因为 filter2的*声明*和*实现*不同。

看看你是如何在第 2 行进行原型设计的，以及你是如何实现它的。`Filter2`应该声明为`Controller`范围的一部分或全局范围的一部分，而不是两者。

# jquery - 添加jquery后Presta商店不显示页面

> ID：15850130
> 
> 赞同：0
> 
> 时间：2013-04-06T11:08:10.183
> 
> 标签：jquery, html, prestashop

我有最新的 Presta Shop。当我添加上面的代码

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js">
jQuery(document).ready(function(){
    if(catapultReadCookie("catAccCookies")){//If the cookie has been set
        jQuery("#catapult-cookie-bar").hide();
        jQuery("html").css("margin-bottom","0");
    }
});
</script> 
```

并从工具/智能/编译网站中删除缓存不显示。我不知道为什么？感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:16:30.700

试试这样：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js">
jQuery(document).ready(function(){
    var data = catapultReadCookie("catAccCookies");
    if(data != null && data !== 'undefined'){//If the cookie has been set
        jQuery("#catapult-cookie-bar").hide();
        jQuery("html").css("margin-bottom","0");
    }
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:56:47.230

由于 prestashop 使用 smarty 作为模板语言，而 smarty 使用大括号样式，因此您无法将嵌入的 javascript 添加到模板文件中。

要将 javascript 添加到模板文件中，它应该包含在 {literal} .... {/literal} smarty 标签中。你的代码应该是这样的：

```
{literal}

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js">
jQuery(document).ready(function(){
if(catapultReadCookie("catAccCookies")){//If the cookie has been set
    jQuery("#catapult-cookie-bar").hide();
    jQuery("html").css("margin-bottom","0");
}
});
</script> 

 {/literal} 
```

对于文字，请阅读此

[http://www.smarty.net/docsv2/en/language.function.literal](http://www.smarty.net/docsv2/en/language.function.literal)

谢谢

# vb.net - Declaration Expected

> ID：15850131
> 
> 赞同：1
> 
> 时间：2013-04-06T11:08:17.637
> 
> 标签：vb.net

Good day all. Please advise me
Why I got an error message "Declaration Expected" when put the cursor on cmd variable. What Should I do?! .. the code appears below:

```
Imports System.Data.Sqlclient
Imports System.Configuration

Partial Class _Default
    Inherits Page
    Private Shared Connectionstr As String ="DataSource=localhost;initialCatalog=Orders;Integrated Security=true"
    Dim conn As SqlConnection = New SqlConnection(Connectionstr)
    Dim cmd As SqlCommand = conn.CreateCommand()
   cmd.CommandText="SELECT * FROM dbo.Customers"
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:28:41.823

您正试图在属性、函数或方法之外使用变量命令。至少，尝试将您的命令包装在一个方法（Sub）中，该方法对数据执行所需的操作：

部分类_默认继承页面

```
Private Sub DoSomethingWithCustomers()
    Dim conn As SqlConnection = New SqlConnection(Connectionstr)
    Dim cmd As SqlCommand = conn.CreateCommand()
    cmd.CommandText = "SELECT * FROM dbo.Customers"

    conn.Open()
    Dim dr = cmd.ExecuteReader()
    ' Do something with the data returned . . .
    ' ...
    ' Now Cleanup:
    conn.Close()
    cmd.Dispose()
    conn.Dispose()
End Sub 
```

可以通过将数据访问对象包装在 Using 块中来改进上述情况，这些块可以为您正确处理非托管资源：

```
Private Sub DoSomethingBetterWithCustomers()
    Dim SQL As String = "SELECT * FROM dbo.Customers"
    Using conn As New SqlConnection(Connectionstr)
        Using cmd As New SqlCommand(SQL, conn)
            conn.Open()
            Dim dr = cmd.ExecuteReader()
            ' Do something with the data returned
            ' . . . 
            dr.Close()
        End Using ' Using Block takes carre of Disposing SqlCommand
    End Using ' Using Block takes care of Closing and Disposing Connection
End Sub 
```

除此之外，很难确切地知道您要对代码做什么，因此上面的两个示例非常非常基本和通用。

# ruby - Ruby 正则表达式中的 `(?:| ...)` 是什么意思？

> ID：15850132
> 
> 赞同：2
> 
> 时间：2013-04-06T11:08:20.810
> 
> 标签：ruby, regex

在阅读*工程持久软件：使用 SaaS 和云计算的敏捷方法时，*我遇到了以下正则表达式（第 5 章，第*5.3 节介绍黄瓜和水豚*）：

```
/^(?:|I )am on (.+)$/ 
```

我知道非捕获`(?: ...)`语法，但我不明白冒号后第一个管道字符的含义。是错字吗？它有什么特殊用途吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T11:12:00.843

正则表达式中的管道表示替代。在这种情况下，它表示空字符串`""`和字符串之间的交替`"I "`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:12:24.970

它只是`or`. 它可以不匹配任何内容或`I`（带有空格）。其余的是您提到的非捕获组。

正则表达式匹配类似的东西`I am on a diet`，`am on a diet`而且在上面的例子中，`a diet`在第一组中捕获。

在 Rubular 上尝试一下 - [http://rubular.com/r/q3RFEoxj1e](http://rubular.com/r/q3RFEoxj1e)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T11:14:00.347

`(?:|something)`

*（“无/空字符串或匹配”）*

与以下内容完全相同：

`(?:something)?`

*（“匹配，一次或没有”）*

换句话说：非捕获子模式是可选的。

# c++ - QTextStream behavior searching for a string not as expected

> ID：15850133
> 
> 赞同：7
> 
> 时间：2013-04-06T11:08:25.327
> 
> 标签：c++, qt, qtextstream

I have these few lines of code:

```
QFile file("h:/test.txt");
file.open(QFile::ReadOnly | QFile::Text);
QTextStream in(&file);

bool found = false;
uint pos = 0;

do {
    QString temp = in.readLine();
    int p = temp.indexOf("something");
    if (p < 0) {
        pos += temp.length() + 1;
    } else {
        pos += p;
        found = true;
    }
} while (!found && !in.atEnd());

in.seek(0);
QString text = in.read(pos);
cout << text.toStdString() << endl; 
```

The idea is to search a text file for a specific char sequence, and when found, load the file from the beginning to the occurrence of the searched text. The input I used for testing was:

```
this is line one, the first line
this is line two, it is second
this is the third line
and this is line 4
line 5 goes here
and finally, there is line number 6 
```

And here comes the strange part - if the searched string is on any of lines save for the last, I get the expected behavior. It works perfectly fine.

**BUT** if I search for a string that is on the last line 6, the result is always 5 characters short. If it was the 7th line, the result would be 6 characters short and so on, when the searched string is on the **last** line, the result is always `lineNumber - 1` characters shorter.

So, is this a bug or I am missing something obvious?

EDIT: Just to clarify, I am not asking for alternative ways to do this, I am asking why do I get this behavior.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T21:32:08.643

当您在最后一行搜索时，您会读取所有输入流 - in.atEnd() 返回 true。看起来它以某种方式破坏了文件或文本流，或者使它们不同步，因此搜索不再有效。

如果你更换

```
in.seek(0);
QString text = in.read(pos);
cout << text.toStdString() << endl; 
```

经过

```
QString text;
if(in.atEnd())
{
    file.close();
    file.open(QFile::ReadOnly | QFile::Text);
    QTextStream in1(&file);
    text = in1.read(pos);
}

else
{
    in.seek(0);
    text = in.read(pos);
}
cout << text.toStdString().c_str() << endl; 
```

它将按预期工作。PS可能有一些更干净的解决方案然后重新打开文件，但问题肯定来自到达流和文件的末尾并在之后尝试对它们进行操作......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T21:52:36.157

显然，您会得到这种行为，因为 readLine()**使用行分隔符字符**（LF CRLF 或 CR 取决于文件）按行大小跳过光标。**您从此方法获得的缓冲区不包含这些符号**，因此您不会在头寸计算中使用这些字符。

解决方案是不按行读取，而是按缓冲区读取。这是您的代码，已修改：

```
QFile file("h:/test.txt");
file.open(QFile::ReadOnly | QFile::Text);
QTextStream in(&file);

bool found = false;
uint pos = 0;
qint64 buffSize = 64; // adjust to your needs

do {
    QString temp = in.read(buffSize);
    int p = temp.indexOf("something");
    if (p < 0) {
        uint posAdj = buffSize;
        if (temp.length() < buffSize)
            posAdj = temp.length();
        pos += posAdj;
    } else {
        pos += p;
        found = true;
    }
} while (!found && !in.atEnd());

in.seek(0);
QString text = in.read(pos);
cout << text.toStdString() << endl; 
```

# **编辑**

上面的代码包含错误，因为 word 可能被缓冲区分割。这是一个破坏内容的示例输入（假设我们搜索 keks）：

```
test test test test test test
test test test test test test  keks
test test test test test test
test test test test test test
test test test test test test
test test test test test test 
```

# 解决方案

这是**完整的代码**，适用于我尝试的所有输入：

```
#include <QFile>
#include <QTextStream>
#include <iostream>

int findPos(const QString& expr, QTextStream& stream) {
    if (expr.isEmpty())
        return -1;

    // buffer size of same length as searched expr should be OK to go
    qint64 buffSize = quint64(expr.length());

    stream.seek(0);
    QString startBuffer = stream.read(buffSize);
    int pos = 0;

    while(!stream.atEnd()) {
        QString cycleBuffer = stream.read(buffSize);
        QString searchBuffer = startBuffer + cycleBuffer;
        int bufferPos = searchBuffer.indexOf(expr);
        if (bufferPos >= 0)
            return pos + bufferPos + expr.length();
        pos += cycleBuffer.length();
        startBuffer = cycleBuffer;
    }

    return pos;
}

int main(int argc, char *argv[])
{
    Q_UNUSED(argc);
    Q_UNUSED(argv);

    QFile file("test.txt");
    file.open(QFile::ReadOnly | QFile::Text);
    QTextStream in(&file);

    int pos = findPos("keks", in);

    in.seek(0);
    QString text = in.read(pos);
    std::cout << text.toUtf8().data() << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T09:02:25.663

您知道 windows 和 *nix 行尾（\r\n vs \n）之间的区别。当您以文本模式打开文件时，您应该知道 \r\n 的所有序列都转换为 \n。

您尝试计算跳过行的偏移量的原始代码中的错误，但您不知道文本文件中行的确切长度。

```
length = number_of_chars + number_of_eol_chars
where number_of_chars == QString::length()
and number_of_eol_chars == (1 if \n) or (2 if \r\n) 
```

如果没有对文件的原始访问权限，您将无法检测*number_of_eol_chars 。*而且您不会在代码中使用它，因为您将文件作为文本打开，而不是作为二进制文件。因此，您的代码中有错误，您将*number_of_eol_chars*硬编码为 1，而不是检测到它。对于 Windows 文本文件中的每一行（使用 \r\n eol），对于每个跳过的行，您都会在 pos 中出错。

固定代码：

```
#include <QFile>
#include <QTextStream>

#include <iostream>
#include <string>

int main(int argc, char *argv[])
{
    QFile f("test.txt");
    const bool isOpened = f.open( QFile::ReadOnly | QFile::Text );
    if ( !isOpened )
        return 1;
    QTextStream in( &f );

    const QString searchFor = "finally";

    bool found = false;
    qint64 pos = 0;

    do 
    {
        const qint64 lineStartPos = in.pos();
        const QString temp = in.readLine();
        const int ofs = temp.indexOf( searchFor );
        if ( ofs < 0 )
        {
            // Here you skip line and increment pos on exact length of line
            // You shoud not hardcode "1", because it may be "2" (\n or \r\n)
            const qint64 length = in.pos() - lineStartPos;
            pos += length;
        }
        else
        {
            pos += ofs;
            found = true;
        }

    } while ( !found && !in.atEnd() );

    in.seek( 0 );
    const QString text = in.read( pos );

    std::cout << text.toStdString() << std::endl;

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-15T00:21:26.253

[QTextStream.read()](http://qt-project.org/doc/qt-4.8/qtextstream.html#read)方法将要读取的最大字符数作为参数，而不是文件位置。在许多环境中，位置并不是简单的字符数：VMS 和 Windows 都被视为例外。VMS 强加了一个记录结构，该结构在文件中使用许多隐藏的元数据位，文件位置是“神奇的 cookie”

获得正确值的唯一独立于文件系统的方法是在文件已经定位到正确位置时使用[QTextStream::pos()](http://qt-project.org/doc/qt-4.8/qtextstream.html#pos)，然后继续读取直到文件位置返回到相同位置。

*（已编辑，因为最初未指定要求禁止多次分配以缓冲文本。）*
~~但是，鉴于程序的要求，重新读取文件的第一部分是没有意义的。从开头开始保存文本并在找到字符串时停止：~~

 ~~```
QString out;
do {
    QString temp = in.readLine();
    int p = temp.indexOf("something");
    if (p < 0) {
        out += temp;
    } else {
        out += temp.substr(pos);  //not sure of the proper function/parameters here
        break;
    }
} while (!in.atEnd());

cout << out.toStdString() << endl; 
```~~  ~~由于您在 Windows 上，文本文件处理正在将 '\r\n' 转换为 '\n'，这导致文件定位与字符计数不匹配。有几种方法可以解决这个问题，但也许最简单的方法是简单地将文件处理为二进制文件（即，通过删除[text mode](http://qt-project.org/doc/qt-4.8/qfile.html#open)而不是“文本” ）以防止翻译：

```
file.open(QFile::ReadOnly); 
```

然后代码应该按预期工作。在 Windows 中输出 \r\n 不会造成任何损害，但有时会在使用 Windows 的文本实用程序时导致令人讨厌的显示。如果这很重要，一旦文本在内存中，搜索并用 \n 替换 \r\n。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-06T13:24:12.783

我不完全确定您为什么会看到这种行为，但我怀疑它与行尾有关。我试过你的代码，当文件有 CRLF 行结尾并且文件**末尾**没有新行（CRLF）时，我只看到了*最后一行的行为。*所以，是的，很奇怪。如果文件有 LF 行结尾，那么它总是按预期工作。

 **话虽如此，通过在每行末尾添加来跟踪位置可能不是一个好主意，`+ 1`因为您不知道您的源文件是 CRLF 还是 LF，并且 QTextStream 将始终去除行尾。这是一个应该更好的功能。它逐行构建输出字符串，我没有看到任何奇怪的行为：

```
void searchStream( QString fileName, QString searchStr )
{
    QFile file( fileName );
    if ( file.open(QFile::ReadOnly | QFile::Text) == false )
        return;

    QString text;
    QTextStream in(&file);
    QTextStream out(&text);

    bool found = false;

    do {
        QString temp = in.readLine();
        int p = temp.indexOf( searchStr );
        if (p < 0) {
            out << temp << endl;
        } else {
            found = true;
            out << temp.left(p);
        }
    } while (!found && !in.atEnd());

    std::cout << text.toStdString() << std::endl;
} 
```

它不会跟踪原始流中的位置，所以如果你真的想要一个位置，那么我建议使用 QTextStream::pos() ，因为无论文件是 CRLF 还是 LF 都是准确的。**~~

# matlab - 在 Matlab 中对逻辑数据进行分组

> ID：15850135
> 
> 赞同：0
> 
> 时间：2013-04-06T11:08:36.847
> 
> 标签：matlab

我有一个包含 0 和 1 数据的矩阵。我想在该矩阵中找到一组（不是特定大小）。有可能吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T11:29:39.580

如果您的意思是要查找矩阵中的所有“连接组件”，例如`BW`，只需使用：

```
BW = logical([1 1 1 0 0 0 0 0
              1 1 1 0 1 1 0 0
              1 1 1 0 1 1 0 0
              1 1 1 0 0 0 1 0
              1 1 1 0 0 0 1 0
              1 1 1 0 0 0 1 0
              1 1 1 0 0 1 1 0
              1 1 1 0 0 0 0 0]);

L = bwlabel(BW,4)    %Result 
```

这将产生：

```
L =

     1     1     1     0     0     0     0     0
     1     1     1     0     2     2     0     0
     1     1     1     0     2     2     0     0
     1     1     1     0     0     0     3     0
     1     1     1     0     0     0     3     0
     1     1     1     0     0     0     3     0
     1     1     1     0     0     3     3     0
     1     1     1     0     0     0     0     0 
```

现在，如果您想查找各个组的大小：

```
for ii=1:max(L(:))
    length_vector(ii)=length(find(L==ii));
end
length_vector 
```

这给了你：

```
length_vector =

    24     4     5 
```

# security - 加密用户数据

> ID：15850136
> 
> 赞同：0
> 
> 时间：2013-04-06T11:08:47.537
> 
> 标签：security, encryption, database-security

我有一个 Android 应用程序，它通过 ssl 将一些用户帐户信息作为 json 传输到中央服务器。如果第三方拥有用户的用户名，他们可以向用户发送消息。

永远无法从我们的服务器查询用户名，实际上无法查询任何用户数据。整个系统依赖于用户愿意与第三方共享信息，第三方可以使用该信息向用户传递消息的事实。

传输的数据没有被我加密，因为它已经通过 ssl 发送了。我觉得我需要对存储在服务器上的数据进行加密以保证其安全。加密这些数据的最佳方法是什么？当我查询用户数据时，我必须加密提供的值并将其与存储在数据库中的值进行比较，还是必须解密数据库？

还是因为只有我的服务器应用程序才能访问这些数据，所以这是一种矫枉过正的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:11:01.660

在文件系统上加密用户、客户等的私人数据并不过分。一方面，硬盘驱动器最终会失去你的控制——而且你极不可能在它似乎无法正常工作后正确地销毁它，即使上面有一堆私人数据和具有少量数据恢复专业知识和主动性的人可能可以访问。

我建议[PyCrypto](https://www.dlitz.net/software/pycrypto/doc/)。

真正的挑战是您将如何管理您的密钥。PK（公钥）密码术的一个优点是您可以使用代码中的公钥（加密）密钥配置您的软件并公开......这对于*存储*数据的应用程序部分来说已经足够了。然后你需要安排一套程序和政策来保持私钥的*私密*性。这意味着它不能在您的源代码或版本控制系统中......您的软件的某些部分必须提示并获取它（可能输入，可能从 USB“键盘模拟器”或其他密码推入/key Vault 设备）。

每次重新启动服务器软件（需要读回此客户数据）时都必须这样做……但这可能是一个长期运行的守护进程，因此每年只需要几次 - 或更少。您可能会使用类似的修改副本`ssh-agent`来将密码管理功能与应用程序/服务器的其余部分分离。

*（如果您想知道如果机器运行时私钥始终*在内存中，那么将私钥保存在内存中有何价值--- 考虑一下如果有人闯入并窃取您的计算机会发生什么。在此过程中，他们几乎肯定会关闭它, 从而保护您的数据免于最终重新启动。一种选择虽然较弱，但使用小型 USB 驱动器存储私钥（密码/密码）。这仍然容易受到盗窃的风险，但不太重要最终处理驱动器时会出现问题。正确销毁硬盘驱动器相对较硬且成本高——但物理销毁一个小型、便宜的 USB 驱动器一点也不困难）。

# json - 如何将joomla表转换为json php

> ID：15850139
> 
> 赞同：0
> 
> 时间：2013-04-06T11:09:04.033
> 
> 标签：json, joomla, encode

转换 joomla '_content' 表时没有得到正确的输出。我的PHP代码：

```
<?php
 $hostname = "hostname";
 $username = "myusername";
 $dbname = "mydatabase";
 $password = "mypassword";

  mysql_connect($hostname, $username, $password) OR DIE ("Unable to 
  connect to database! Please try again later.");
  mysql_select_db($dbname);

$sql=mysql_query("SELECT `title`, `fulltext` FROM `jos_content` WHERE `catid`=8");
while($row=mysql_fetch_assoc($sql)){
$output[]=$row;
}
print(json_encode($output));
mysql_close();
?> 
```

它以 json 文件的形式提供输出，但没有针对“全文”行显示任何数据。输出样本：

```
 [{"title":"Tu Jaane Na - Ajab Prem Ki Ghazab Kahani (Chords)","fulltext":""},
{"title":"Aahatein - Agnee (Chords)","fulltext":""}] 
```

它没有从全文检索任何值。请帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:15:34.967

首先，不要使用`mysql_*`，因为它已被弃用，切换到 PDO 或 mysqli。其次，如果您在Joomla*内部*执行此操作，则使用 Joomla 函数来处理数据库，否则这是完全错误的。

`fulltext`如果您的文章没有“阅读更多”，则将为空，所有内容都将存储在`introtext`. 如果您在文章中有“阅读更多”，那么介绍将在`introtext`，其余的将在`fulltext`.

# php - Broadcasting Push Notification via PHP

> ID：15850147
> 
> 赞同：4
> 
> 时间：2013-04-06T11:09:50.350
> 
> 标签：php, iphone, ios, push-notification, apple-push-notifications

I have a list of push notification tokens (around 10k) for my app, and I am **not** tracking the states of active/deleted tokens. When a new user is added to the system, it is added with its push token

(one device can hold one push notification token, in case a token is changed -not happened in the last 6 months of my app's life cycle- it is modified with the new token)

For sending push notification to a **single user** I am using the following php script

```
<?php
// connecting to sql
sql_connect();
// get user token from sql
$token = sql_gettoken();

// Put your device token here (without spaces):
$deviceToken = $token;
// Put your private key's passphrase here:
$passphrase = 'my_passphrase';

// Put your alert message here:
if ($_GET["message"]) $message = $_GET["message"];
else $message = 'This is a default message in case no message is defined';

////////////////////////////////////////////////////////////////////////////////

$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'production_cerfiticate.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

// Open a connection to the APNS server
$fp = stream_socket_client(
    'ssl://gateway.push.apple.com:2195', $err,
    $errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

if (!$fp)
    exit("Failed to connect: $err $errstr" . PHP_EOL);

echo 'Connected to APNS' . PHP_EOL;

// Create the payload body
$body['aps'] = array(
    'alert' => $message,
    'sound' => 'default'
    );

// Encode the payload as JSON
$payload = json_encode($body);

// Build the binary notification
$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;

// Send it to the server
$result = fwrite($fp, $msg, strlen($msg));

if (!$result)
    echo 'Message not delivered' . PHP_EOL;
else
    echo 'Message successfully delivered' . PHP_EOL;

// Close the connection to the server
fclose($fp);
?> 
```

I believe if I keep $fp (connection to APNS Server) open I can send multiple push notifications in between (I am not sure of that?). But I have read that if a token is offline/deleted app then the connection is closed by apple's side, which means push notification cycle will fail.

Any tips for converting this single push notification script into broadcast notification ? I am discouraged to test this since the first test will be a live broadcast and I have only 1 shot at this.

**EDIT: I have missed the most important part**, If I just go and call this php script in a loop for all device tokens, which means it will try to call this for deleted apps and actives, will Apple block/deactivate/ban my certificate or my ability to send push notifications ?

*   For others out there looking for broadcast, it seems Apple does not have any limits for push notifications.

Cheers

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T04:09:12.207

只要连接保持打开状态，您就应该保持连接打开并使用相同的连接发送通知。这就是苹果说你应该做的。

如果从设备上卸载应用程序，发送到该设备时连接不会关闭。仅当令牌对当前环境从未有效（这通常发生在您尝试将沙盒设备令牌发送到生产环境时发生，反之亦然）或消息有其他错误（例如有效负载过长）时才会关闭它）。

当您向已卸载应用程序的设备发送通知时，APNS 会发现该设备已卸载该应用程序，然后，当您调用反馈服务时，您会获得该设备令牌。Apple 要求您定期调用反馈服务并从您的数据库中删除它返回的设备。如果您不使用反馈服务并继续向多次卸载该应用程序的设备发送通知，Apple 可能会阻止您。

我建议您阅读有关[故障排除推送通知](https://developer.apple.com/library/ios/#technotes/tn2265/_index.html)的内容，尤其是推送通知吞吐量和错误检查部分。这很有帮助。

# ios - 相机图像旋转问题

> ID：15850152
> 
> 赞同：7
> 
> 时间：2013-04-06T11:10:20.480
> 
> 标签：ios, objective-c, uiimage, uiimagepickercontroller, exif

我在这里面临一个非常奇怪的问题。当我在纵向模式下单击图像并上传它然后再次获取它时，它会逆时针旋转 90 度显示。但是当我在相机胶卷中看到它时，它会以正确的方向显示。我已经尝试了几乎所有可能的链接/代码来解决这个问题，但似乎没有任何帮助。我以 JPEG 表示形式保存图像。请帮助这个人。提前致谢！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-06T11:57:42.317

通过在 UIImage 上创建一个类别并根据其元数据 EXIF 缩放和旋转图像来解决。

这是一段神奇的代码：

```
- (UIImage *)scaleAndRotateImage:(UIImage *)image {

    int kMaxResolution = 640; // Or whatever

    CGImageRef imgRef = image.CGImage;

    CGFloat width = CGImageGetWidth(imgRef);
    CGFloat height = CGImageGetHeight(imgRef);

    CGAffineTransform transform = CGAffineTransformIdentity;
    CGRect bounds = CGRectMake(0, 0, width, height);
    if (width > kMaxResolution || height > kMaxResolution) {
        CGFloat ratio = width/height;
        if (ratio > 1) {
            bounds.size.width = kMaxResolution;
            bounds.size.height = roundf(bounds.size.width / ratio);
        }
        else {
            bounds.size.height = kMaxResolution;
            bounds.size.width = roundf(bounds.size.height * ratio);
        }
    }

    CGFloat scaleRatio = bounds.size.width / width;
    CGSize imageSize = CGSizeMake(CGImageGetWidth(imgRef), CGImageGetHeight(imgRef));
    CGFloat boundHeight;
    UIImageOrientation orient = image.imageOrientation;
    switch(orient) {

        case UIImageOrientationUp: //EXIF = 1
            transform = CGAffineTransformIdentity;
            break;

        case UIImageOrientationUpMirrored: //EXIF = 2
            transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);
            transform = CGAffineTransformScale(transform, -1.0, 1.0);
            break;

        case UIImageOrientationDown: //EXIF = 3
            transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
            transform = CGAffineTransformRotate(transform, M_PI);
            break;

        case UIImageOrientationDownMirrored: //EXIF = 4
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);
            transform = CGAffineTransformScale(transform, 1.0, -1.0);
            break;

        case UIImageOrientationLeftMirrored: //EXIF = 5
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width);
            transform = CGAffineTransformScale(transform, -1.0, 1.0);
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
            break;

        case UIImageOrientationLeft: //EXIF = 6
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
            break;

        case UIImageOrientationRightMirrored: //EXIF = 7
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeScale(-1.0, 1.0);
            transform = CGAffineTransformRotate(transform, M_PI / 2.0);
            break;

        case UIImageOrientationRight: //EXIF = 8
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
            transform = CGAffineTransformRotate(transform, M_PI / 2.0);
            break;

        default:
            [NSException raise:NSInternalInconsistencyException format:@"Invalid image orientation"];

    }

    UIGraphicsBeginImageContext(bounds.size);

    CGContextRef context = UIGraphicsGetCurrentContext();

    if (orient == UIImageOrientationRight || orient == UIImageOrientationLeft) {
        CGContextScaleCTM(context, -scaleRatio, scaleRatio);
        CGContextTranslateCTM(context, -height, 0);
    }
    else {
        CGContextScaleCTM(context, scaleRatio, -scaleRatio);
        CGContextTranslateCTM(context, 0, -height);
    }

    CGContextConcatCTM(context, transform);

    CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imgRef);
    UIImage *imageCopy = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return imageCopy;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-29T10:04:18.747

尝试使用这个：

```
NSData *profileData =  UIImageJPEGRepresentation(self.profileImgView.image, 1.0); 
```

代替：

```
NSData *profileData = UIImagePNGRepresentation(profileImgView.image); 
```

希望它有效。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T11:53:02.050

**我希望它对你有帮助：**

**在这里，我正在调整该图像的大小以及您的问题也将解决。**

## 第一道：

```
 - (UIImage *)scaleAndRotateImage:(UIImage *)imgPic {

    int kMaxResolution = 650; // Or whatever    
    CGImageRef imgRef = imgPic.CGImage; 
    CGFloat width = CGImageGetWidth(imgRef);    
    CGFloat height = CGImageGetHeight(imgRef);  
    CGAffineTransform transform = CGAffineTransformIdentity;    
    CGRect bounds = CGRectMake(0, 0, width, height);
    if (width > kMaxResolution || height > kMaxResolution) {        
        CGFloat ratio = width/height;       
        if (ratio > 1) {            
            bounds.size.width = kMaxResolution;         
            bounds.size.height = roundf(bounds.size.width / ratio);         
        }       
        else {          
            bounds.size.height = kMaxResolution;            
            bounds.size.width = roundf(bounds.size.height * ratio);         
        }       
    }   
    CGFloat scaleRatio = bounds.size.width / width; 
    CGSize imageSize = CGSizeMake(CGImageGetWidth(imgRef), CGImageGetHeight(imgRef));   
    CGFloat boundHeight;    
    UIImageOrientation orient = imgPic.imageOrientation;    
    switch(orient) {            
        case UIImageOrientationUp: //EXIF = 1           
            transform = CGAffineTransformIdentity;          
            break;          
        case UIImageOrientationUpMirrored: //EXIF = 2           
            transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);         
            transform = CGAffineTransformScale(transform, -1.0, 1.0);           
            break;          
        case UIImageOrientationDown: //EXIF = 3         
            transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);            
            transform = CGAffineTransformRotate(transform, M_PI);           
            break;          
        case UIImageOrientationDownMirrored: //EXIF = 4         
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);

            transform = CGAffineTransformScale(transform, 1.0, -1.0);

            break;

        case UIImageOrientationLeftMirrored: //EXIF = 5

            boundHeight = bounds.size.height;

            bounds.size.height = bounds.size.width;

            bounds.size.width = boundHeight;

            transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width);

            transform = CGAffineTransformScale(transform, -1.0, 1.0);

            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);

            break;

        case UIImageOrientationLeft: //EXIF = 6

            boundHeight = bounds.size.height;

            bounds.size.height = bounds.size.width;

            bounds.size.width = boundHeight;

            transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);

            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);

            break;

        case UIImageOrientationRightMirrored: //EXIF = 7

            boundHeight = bounds.size.height;

            bounds.size.height = bounds.size.width;

            bounds.size.width = boundHeight;

            transform = CGAffineTransformMakeScale(-1.0, 1.0);

            transform = CGAffineTransformRotate(transform, M_PI / 2.0);

            break;

        case UIImageOrientationRight: //EXIF = 8

            boundHeight = bounds.size.height;

            bounds.size.height = bounds.size.width;

            bounds.size.width = boundHeight;

            transform = CGAffineTransformMakeTranslation(imageSize.height, 0.0);

            transform = CGAffineTransformRotate(transform, M_PI / 2.0);

            break;

        default:

            [NSException raise:NSInternalInconsistencyException format:@"Invalid image orientation"];

    }

    UIGraphicsBeginImageContext(bounds.size);

    CGContextRef context = UIGraphicsGetCurrentContext();

    if (orient == UIImageOrientationRight || orient == UIImageOrientationLeft) {

        CGContextScaleCTM(context, -scaleRatio, scaleRatio);

        CGContextTranslateCTM(context, -height, 0);

    }

    else {

        CGContextScaleCTM(context, scaleRatio, -scaleRatio);

        CGContextTranslateCTM(context, 0, -height);

    }

    CGContextConcatCTM(context, transform);

    CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imgRef);

    UIImage *imageCopy = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();
    CGContextRelease(context);
    CGImageRelease(imgRef);
    return imageCopy;

} 
```

## 第二种方式：（如果您没有得到上述方法的答案，请使用此方法）

```
 +(UIImage *)resizeImage:(UIImage *)image toSize:(CGSize)destSize{
        float currentHeight = image.size.height;
        float currentWidth = image.size.width;
        float liChange ;
        CGSize newSize ;
        if(currentWidth == currentHeight) // image is square
        {
            liChange = destSize.height / currentHeight;
            newSize.height = currentHeight * liChange;
            newSize.width = currentWidth * liChange;
        }
        else if(currentHeight > currentWidth) // image is landscape
            {
                liChange  = destSize.width / currentWidth;
                newSize.height = currentHeight * liChange;
                newSize.width = destSize.width;
            }
        else                                // image is Portrait
            {
            liChange = destSize.height / currentHeight;
            newSize.height= destSize.height;
            newSize.width = currentWidth * liChange;
            }

        UIGraphicsBeginImageContext( newSize );
        CGContextRef                context;
        UIImage                     *outputImage = nil;

        context = UIGraphicsGetCurrentContext();
        [image drawInRect:CGRectMake( 0, 0, newSize.width, newSize.height )];
        outputImage = UIGraphicsGetImageFromCurrentImageContext();

        UIGraphicsEndImageContext();

        CGImageRef imageRef;
        int x = (newSize.width == destSize.width) ? 0 : (newSize.width - destSize.width)/2;
        int y = (newSize.height == destSize.height) ? 0 : (newSize.height - destSize.height )/2;
        if ( ( imageRef = CGImageCreateWithImageInRect( outputImage.CGImage, CGRectMake(x, y, destSize.width, destSize.height) ) ) ) {
            outputImage = [[UIImage alloc] initWithCGImage: imageRef] ;
        }
        CGImageRelease(imageRef);
        return  outputImage;
    } 
```

# javascript - How do i use jQuery for displaying more options in a form?

> ID：15850154
> 
> 赞同：0
> 
> 时间：2013-04-06T11:10:21.677
> 
> 标签：javascript, jquery, css, html

Let's say you have a form:

```
<form>
  <select name="cars">
    <option value="all">All Cars</option>
    <option value="volvo">Volvo</option>
    <option value="audi">Audi</option>
  </select>

  <select name="volvo_dealers">
    <option value="dealer1">Volvo Dealer 1</option>
    <option value="dealer2">Volvo Dealer 2</option>
  </select>

  <select name="audi_dealers">
    <option value="dealer1">Audi Dealer 1</option>
    <option value="dealer2">Audi Dealer 2</option>
  </select>

  <input type="submit" value="Submit">

</form> 
```

However, you only want to display one of the two "dealers" select-options after you have chosen on of Volvo or Audi. The one that will be displayed is of course depending on which of Volvo and Audi was selected in the "cars" select-options.

What might be a good approach for this small issue?

Rergards, Bill

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:23:07.957

有一种方法可以在不添加多个 id（并且没有类）的情况下执行此操作，如果需要，还可以让您添加更多经销商。首先，您需要使用 css 隐藏经销商选择下拉菜单。

然后将 'cars' 的 id 添加到汽车选择中：

```
<select name="cars" id="cars">
    <option value="all">All Cars</option>
    <option value="volvo">Volvo</option>
    <option value="audi">Audi</option>
  </select> 
```

然后使用 jQuery 完成剩下的工作：

```
$('#cars option').click(function(){
  var car = $(this).attr('value');
  $('select.' + car + '_dealers').show();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T11:31:52.160

一些答案已经为您提供了使用表单执行所需操作的脚本。但这是我的标记脚本版本。在此处查看示例 [http://jsbin.com/omuboq/1/edit](http://jsbin.com/omuboq/1/edit)

```
$(document).ready(function(){
$('form').change(function(){

var selectOp = $("form select[name='cars']").val();

  switch(selectOp)  { 

    case 'volvo' :
  $("form select[name='audi_dealers']").hide();
  $("form select[name='volvo_dealers']").show();
  break;

    case 'audi':
  $("form select[name='volvo_dealers']").hide();
  $("form select[name='audi_dealers']").show();  
  break;

  case 'all' :
    $("form select[name='audi_dealers']").show();
    $("form select[name='audi_dealers']").show();
    break;

  }      

});
}); 
```

该脚本比其他脚本大，但运行良好。该脚本根据基本原则运行。它首先检查汽车下拉菜单的值，并根据所选选项显示或隐藏其他下拉菜单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T11:19:12.187

最自然的是一次只显示相应的经销商并隐藏其他经销商：

```
$('.cars').change(function() {
    $('.dialers').hide().filter('[name="' + $(this).val() + '_dealers"]').show();
}); 
```

[http://jsfiddle.net/BncsJ/](http://jsfiddle.net/BncsJ/)

所以如果我选择奥迪，我只想看到奥迪经销商，我不需要其他人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T11:22:39.427

鉴于您的标记，您可以做

```
$(function(){
    $("select[name=cars]").change(function(){
        if ($(this).val() == "volvo") {
            $("select[name=volvo_dealers]").show();
            $("select[name=audi_dealers]").hide();
        } else if (($(this).val() == "audi")) {
            $("select[name=audi_dealers]").show();
            $("select[name=volvo_dealers]").hide();
        } else {
            $("select[name=volvo_dealers]").hide();
            $("select[name=audi_dealers]").hide();
        }
    });
   $("select[name=cars]").trigger("change"); 
}); 
```

**这是[jsFiddle](http://jsfiddle.net/rn4b3/)**

# javascript - JavaScript & jQuery: Calling inner functions

> ID：15850155
> 
> 赞同：0
> 
> 时间：2013-04-06T11:10:21.073
> 
> 标签：javascript, jquery

I have the following code in JavaScript and jQuery with an integrated ajax request. Question: Why is it possible to call the inner function `success1()` but it is not possible to call `this.success2()` ? Any solution proposals for this problem?

```
function myfuntion() {
    this.url = "www.example.com/ajax.php";
    var success1 = function (data) {
        alert("SUCCESS1");
    }
    this.success2 = function (data) {
        alert("SUCCESS2");
    }
    this.send = function () {
        $.ajax({
            type: "POST",
            url: this.url,
            dataType: "html"
        }).done(function (data) {
            success1(data);
            this.success2(data);
        });
    }
}
var test = new myfunction().send(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:15:40.483

正如其他评论的那样，`this`发送函数内部的上下文发生了变化，这就是你的`success2`函数没有调用的原因。您应该将`myFunction`上下文保存在变量中并使用该变量来引用`this`上下文。

尝试这个：

```
function myfuntion() {
    var self = this;                // taking the current context in a variable.

    self.url = "www.example.com/ajax.php";
    var success1 = function (data) {
        alert("SUCCESS1");
    }
    self.success2 = function (data) {
        alert("SUCCESS2");
    }
    self.send = function () {
        $.ajax({
            type: "POST",
            url: self.url,
            dataType: "html"
        }).done(function (data) {
            success1(data);
            self.success2(data);
        });
    }
} 
```

# ios - NSManagedObject 已删除，但关系未更新

> ID：15850161
> 
> 赞同：1
> 
> 时间：2013-04-06T11:11:15.603
> 
> 标签：ios, objective-c, core-data

我有这样的数据结构

A--->>B（A与B有一对多关系，关系名称是图像）

我获取“A”对象，然后在我的应用程序中使用“B”对象。在一次操作中，我从 . 一切都很好，B 对象被删除，我可以立即在我的应用程序中看到效果，因为其中包含的数据不会显示。但是发生的情况是 A 对象仍然返回我用 NSLog(@"%d",[a.relation count]) 确认的 B 对象的先前计数。

即如果最初有 6 个 B 对象，那么在删除 2 个对象之后仍然显示 6 个对象，应该是 4 个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:26:05.660

您必须定义从“B”到“A”的*反向关系*，并将该关系的“删除规则”设置为“无效”。

但是，“A”对象仅在您保存托管对象上下文或调用`processPendingChanges`上下文时更新。

# jsf-2 - FacesContext 和 ExternalContext 有什么区别

> ID：15850162
> 
> 赞同：30
> 
> 时间：2013-04-06T11:11:17.103
> 
> 标签：jsf-2, facescontext, externalcontext

`FacesContext`和 和有什么不一样`ExternalContext`？我什么时候可以使用其中一种？一个有什么，另一个有什么？

以下示例来自 JavaServer Faces 第 3 版一书：

```
 <h:commandButton ... actionListener="#{rushmore.handleMouseClick}" /> 
```

支持豆：

```
public void handleMouseClick(ActionEvent e) {
    FacesContext context = FacesContext.getCurrentInstance();
    String clientId = e.getComponent().getClientId(context);
    Map<String, String> requestParams = context.getExternalContext().getRequestParameterMap();
    // ...
} 
```

为什么请求参数在`ExternalContext`？是什么`clientId`？它是在应用程序启动时由 JSF 生成的吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-06T22:23:15.523

仔细查看他们的 javadocs 以了解他们提供的方法以及这些方法的具体作用。

*   [`FacesContext`文档](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html)
*   [`ExternalContext`文档](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html)

如果您仔细查看 javadoc 中列出的那些方法，您会注意到它们`FacesContext`通常提供对特定于 JSF 的工件的访问，这些工件与 JSF 设计运行的“底层”Servlet 或 Portlet API 没有任何关系在之上。例如，创建转换器、验证器、组件、EL 表达式等，并获取有关视图根、支持的语言环境等的信息，并添加阶段侦听器、系统事件侦听器等。特定于 JSF API 的所有内容。

而且，`ExternalContext`通常提供对 JSF 当前“在幕后”使用的 Servlet 或特定于 Portlet 的工件的访问。例如，当在 Servlet 容器上运行时，[HTTP servlet 请求](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)、[HTTP servlet 响应](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html)、[HTTP 会话](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html)和[Servlet 上下文](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html)以及它们固有的所有工件。单击这些链接，您会看到它们依次提供也由 委托的方法`ExternalContext`，例如`getRequestParameterMap()`. 另请参阅[javadoc](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getRequestParameterMap%28%29)。是的，也单击该链接，您会看到它明确提到了 servlet 请求：

> Servlet：这必须是可通过`javax.servlet.ServletRequest`方法`getParameter()`和`getParameterNames()`.

两种情况**都**无法提供*任何东西*。因此，绝对没有理由偏爱其中一个。只需将正确的用于您需要执行的工作即可。

 **至于客户端ID，确实是JSF生成的，但绝对不是服务器启动时生成的。它只是在每个视图的基础上为每个 JSF 组件生成的。对于像 那样的输入组件`<h:inputText>`，它会生成一个 HTML`<input>`元素，它也会变成这样的`name`属性

```
<input type="text" id="formId:inputId" name="formId:inputId" ... /> 
```

这`formId:inputId`正是 JSF 客户端 ID。它成为请求参数名称。命令按钮的 HTML 表示也有一个`name`最终作为请求参数名称，按钮的值作为参数值。**

# android - ListView.getChildAt(validPosition) 返回 null

> ID：15850166
> 
> 赞同：0
> 
> 时间：2013-04-06T11:11:33.107
> 
> 标签：android

当用户单击 ListView 的项目时，我会在此列表项目上显示编辑按钮。`lastSelectedPosition`具有最后单击的列表项的位置。

代码：

```
public class MainActivity extends Activity {
    private ListView listView;
    private MyAdapter adapter;

    // static - If the activity is re-created, the data
    // about list items remain.
    private static List<String> items = loadItems();

    private MyItemClickListener listener = new MyItemClickListener();
    private int lastSelectedPosition = ListView.INVALID_POSITION;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        listView = (ListView) findViewById(R.id.myListView);
        adapter = new MyAdapter(R.layout.my_item, items);
        listView.setAdapter(adapter);
        listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
        listView.setOnItemClickListener(listener);

        if (savedInstanceState != null) {
            // Is recreating the activity because 
            // of the change screen orientation. 

            lastSelectedPosition = savedInstanceState.getInt("lastSelectedPos");
            if (lastSelectedPosition != ListView.INVALID_POSITION) {
                // !!! getChildAt() always returns null !!!
                View listItem = listView.getChildAt(lastSelectedPosition);
                View editButton = listItem.findViewById(R.id.editButton);

                // Only selected list item has visible EditButton, 
                // other list items have not
                editButton.setVisibility(View.VISIBLE);
            }
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        // Is destroying the activity because 
        // of the change screen orientation.

        outState.putInt("lastSelectedPos", lastSelectedPosition);               
    }

    // Other methods
} 
```

我认为`getChildAt()`总是返回`null`，`Activity.onCreate()`因为那时列表还没有完全开发。如何获取`View`列表项以在其上显示编辑按钮？

对不起我的英语。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:30:51.627

您的适配器需要知道这个选定的位置，以便它可以在`getView()`. 只需修改适配器的构造函数以获取 int，并在调用 onclick 时更新该 int 值。通常，您应该始终拥有在适配器中重新创建列表项状态所需的所有信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T12:00:57.310

`lastSelectedPosition`我认为这是因为当用户单击列表视图中的项目时，您没有更改您的值。只需`onItemClickListener`像下面的代码片段那样实现您的。并改变你`lastSelectedPosition`的价值。并删除你的

```
private MyItemClickListener listener = new MyItemClickListener(); 
```

线。我认为在定义变量`lastSelectedPosition`之前无法更改的值。`listener`而且我不知道你在哪里定义你的`listener`变量。

```
lv1.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
lastSelectedPosition = arg2
}
}); 
```

我希望这能帮到您。

# android - Trying to load pdf that i could annotate/gesture on, but it doesn't respond to my gestures?

> ID：15850172
> 
> 赞同：1
> 
> 时间：2013-04-06T11:12:05.283
> 
> 标签：android

I can't show the entire code, but I think that my general problem lies here:

```
 if (list.size() > 0 && imagelist[(int) id].isFile()) 
    {
        Intent intent = new Intent();
        intent.setAction(Intent.ACTION_VIEW);
        Uri uri = Uri.fromFile(imagelist[(int) id].getAbsoluteFile());
        intent.setDataAndType(uri, "application/pdf");
        startActivity(intent);
    } 
```

After it sends me to another activity, I'm no longer able to make gestures.

Do you know how I could keep the reference to my gesture listener when I start the new activity? Do you see anything else that I might be doing wrong?

# java - How to put two java swing JPanels next to each other and have a table in it?

> ID：15850173
> 
> 赞同：0
> 
> 时间：2013-04-06T11:12:12.483
> 
> 标签：java, swing, layout, jpanel, layout-manager

I am trying to build my own "Battleship" game and have problems with swing. I now read endless docs on oracle tutorials on LayoutManagers, but not any of them works as I understand them. They only add a few buttons, but never two individual panels.

```
 JPanel Background = new JPanel();
    Background.setLayout(new BoxLayout(Background, BoxLayout.X_AXIS));
    panelPlayer = new JPanel();
    panelPlayer.setBorder(BorderFactory.createLineBorder(Color.black));
    panelPlayer.setSize(700, 600);
    // PC Field
    panelPc = new JPanel();
    panelPc.setBorder(BorderFactory.createLineBorder(Color.black));
    panelPc.setSize(700, 600);
    //adding to frame
    getContentPane().add(Background);
    Background.add(panelPlayer);
    Background.add(panelPc); 
```

After that I have a loop thats adds 16x16 buttons in a JButton[] once for every panel.

How to get the two panels to show a table layout? I used GridLayout before, the grid works, but it always takes up the whole space of the frame, not of the Container or Panel or else. The panels are overlapping then. GridBagLayout just puts the buttons in a row and beyond the screen.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:19:41.790

您可以通过嵌套面板来解决此问题。每个面板都有自己的布局管理器，因此只需将您的 UI 分解为多个部分并为每个部分选择布局管理器。

如果你想要两个并排的面板，那么包含它们的面板应该有一个水平方向的 FlowLayout 管理器。使用 FlowLayout 创建一个面板并将面板添加到其中。

如果每个并排面板都需要按钮网格，则将面板布局设置为 GridLayout 并将按钮放在面板中。这符合我对战舰的记忆；在网格布局中，无论窗口如何调整大小，所有网格元素都保持相同的大小。

那应该让你开始。如果，如我所料，您需要另一个面板，上面有一些游戏控件，请查看 BorderLayout；它在矩形的每个边缘都有一个部分，在中间有另一个部分。使用 BorderLayout 将包含两个网格的面板放在面板的中心，然后您的游戏控件可以进入面板的北部、南部、东部或西部。

祝你好运。如果您有特定问题（在另一个问题中），请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:18:33.270

使用任何布局时不要固定面板的大小。仅当您使用空布局时才有效

[您可以使用GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)实现您的目标。在添加按钮`gridx`时，`gridy`正确地指定，它将添加像表格这样的按钮

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T11:20:38.337

只是继续嵌套布局。

在您的情况下，制作一个带有两侧的大块 - 然后在每一侧放置另一个带有网格的面板。

# c# - Check for Sub directory in C#

> ID：15850175
> 
> 赞同：6
> 
> 时间：2013-04-06T11:12:28.893
> 
> 标签：c#, asp.net, database, file-upload, subdirectory

I am storing the files extracted from a rar/zip file in a folder.
After that I am storing the files inside that folder to a database.
The problem is it stores **only the files in the folder not the sub directories and its files**.

How to find if the folder has any sub directories.
I am using the code below

```
 Directory.CreateDirectory(StorageRoot + path + New_folder);
 decom(StorageRoot + path + New_folder, StorageRoot + path + file.FileName);
 foreach (var access_file in Directory.GetFiles(StorageRoot + path + New_folder))
 {                     
     string new_name=System.IO.Path.GetFileName(access_file);
     FileInfo f = new FileInfo(StorageRoot + path + New_folder+ "/" + new_name);
     int new_size = unchecked((int)f.Length);
     string new_path = path + New_folder;
     statuses.Add(new FilesStatus(new_name, new_size, new_path, StorageRoot, data));
 } 
```

How to get the list of files and directories in a folder. and save them in db?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T11:17:27.507

要获取文件夹中的文件和目录，您可以使用 Directory.GetFiles() 和 Directory.GetDirectories()

使用递归或队列递归遍历目录。

递归示例：

```
void Traverse(string directory)
{
    foreach(var dir in Directories.GetDirectories(directory))
    {
         Traverse(directory);
    }

    // Your code here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T11:36:27.177

这可能会有所帮助：

```
 System.IO.DirectoryInfo info = new System.IO.DirectoryInfo("YOUR PATH");

    //List of directories
    var result = info.GetDirectories().Select(i => i.FullName); 
```

您可以使用`GetDirectories`获取子文件夹 DirectoryInfo 并遍历它们，直到`Getdirectories`什么都不返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T13:34:02.960

您可以使用`Directory.GetFileSystemEntries()`来获取文件和目录的列表。 [http://msdn.microsoft.com/en-us/library/system.io.directory.getfilesystementries.aspx](http://msdn.microsoft.com/en-us/library/system.io.directory.getfilesystementries.aspx)

# html - Photoshop px size is different from CSS px size

> ID：15850182
> 
> 赞同：0
> 
> 时间：2013-04-06T11:13:44.187
> 
> 标签：html, css

I have a mockup in photoshop which has a font at 60px. I set the font in the browser to be the same, at the same size of 60px, but in the browser the font is smaller. Any ideas why this is?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:12:32.680

You have anti-aliasing on for your text in Photoshop? Most browsers don't have that.

There is quite a bit of difference between how Photoshop renders text compared to how browsers render it (every browser has their own rendering engine, which might even vary depending on the OS). It is impossible to replicate a Photoshop mockup pixel for pixel in a browser when there's text involved.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:24:31.413

尝试使用这个工具，我相信它会帮助你...

[http://www.endmemo.com/sconvert/pixelpoint.php](http://www.endmemo.com/sconvert/pixelpoint.php)

由此它指出：- ***1px = 0.75pt***

# list - Prolog：将列表拆分为两个列表（唯一项/重复项）

> ID：15850183
> 
> 赞同：4
> 
> 时间：2013-04-06T11:13:44.783
> 
> 标签：list, prolog

我一直在尝试将给定列表拆分为两个不同的列表：唯一列表和重复列表。例如，如果我们有一个列表，`[1, 1, 2, 3, 3, 4, 5]`我希望 Unique list 是`[2, 4, 5]`并且 Duplicate 是`[1, 3]`。我不希望列表中的所有 1 都在重复列表中。我只需要其中之一。我现在拥有的代码：

```
compareL([_|[]], Unique, Dup).    
compareL([X3,Y3 | Tail], [X3 | Unique], Dup) :-
    X3 =\= Y3,
    compareL([Y3 | Tail], Unique, Dup). 
compareL([X3,Y3 | Tail], Unique, [X3 | Dup]) :- 
    X3 = Y3,
    skipDups(X3, Tail, Unique, Dup).

skipDups(_, [], Unique, Dup).   
skipDups(X3,[Y3 | Tail], Unique, Dup) :- 
    X3 =\= Y3,
    compareL([Y3 | Tail], Unique, Dup).
skipDups(X3,[Y3 | Tail], Unique, Dup) :-
    X3 = Y3,
    skipDups(X3, Tail, Unique, Dup). 
```

如果我运行，使用上面给出的示例列表，`compareL([1, 1, 2, 3, 3, 4, 5], Unique, Dup).`我得到：

```
Unique = [2, 4|_G1954],
Dup = [1, 3|_G1948]. 
```

我无法弄清楚为什么在两个列表的末尾我都得到了' `_G1954`'和' `_G1948`'。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-04T16:41:07.643

我们可以通过[建立](/questions/tagged/logical-purity "显示标记为“逻辑纯度”的问题")在[`if_/3`](https://stackoverflow.com/a/27358600/4609915),[`(=)/3`](https://stackoverflow.com/a/27358600/4609915)和[`tpartition/4`](https://stackoverflow.com/a/29867514/4609915)!

```
list_uniqs_dups([],[],[]).
list_uniqs_dups([X|Xs0],Us0,Ds0) :-
    tpartition(=(X),Xs0,Es,Xs),
    if_(Es=[],
        Us0+Ds0=[X|Us]+Ds,
        Ds0+Us0=[X|Ds]+Us),
    list_uniqs_dups(Xs,Us,Ds). 
```

这是OP给出的查询：

```
?- list_uniqs_dups([1,1,2,3,3,4,5],Us,Ds).
Ds = [1,3], Us = [2,4,5].                   % succeeds deterministically 
```

好的！以下*非常*一般的查询怎么样？

```
?- list_uniqs_dups([],Us,Ds)。
Ds = []，我们 = []。

?- list_uniqs_dups([A],Us,Ds)。
Ds = []，我们 = [A]。

?- list_uniqs_dups([A,B],Us,Ds)。
  Ds = [B]，我们 = []，A=B
; Ds = []，Us = [A，B]，差异（A，B）。

?- list_uniqs_dups([A,B,C],Us,Ds)。
  Ds = [C]，Us = []，A=B，B=C
; Ds = [B]，Us = [C]，A=B，dif(B,C)
; Ds = [C]，Us = [B]，A=C，dif(B,C)
; Ds = [C]，Us = [A]，dif(A,C)，B=C
; Ds = []，Us = [A,B,C]，dif(A,B)，dif(A,C)，dif(B,C)。

```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-09T19:31:49.653

**回答使用`(=)/3`**

```
list_uniqs_alldups(Es,Us,Ds) :
   tpartition(list_uniqmember_t(Es),Es,Us,Ds).

list_uniqmember_t(Es,X,T) :-
   tfilter(=(X),Es,Xs),
   =(Xs,[X],T). 
```

示例查询：

```
?- list_uniqs_alldups([1,1,2,1,1,3,4,3],Us,Ds).
Us = [2, 4],
Ds = [1, 1, 1, 1, 3, 3].

?- list_uniqs_alldups([1,1,2,3,3,1,1,3,4,3],Us,Ds).
Us = [2, 4],
Ds = [1, 1, 3, 3, 1, 1, 3, 3].

?- list_uniqs_alldups([8,1,1,2,3,3,1,1,3,4,3],Us,Ds).
Us = [8, 2, 4],
Ds = [1, 1, 3, 3, 1, 1, 3, 3].

?- list_uniqs_alldups(X,Us,Ds).
X = Us, Us = Ds,   Ds = [] ;
X = Us, Us = [_A], Ds = [] ;
X = Ds, Us = [],   Ds = [_A,_A] ;
X = Ds, Us = [],   Ds = [_A,_A,_A] ;
... 
```

对于运行长度编码，我使用了[`splitlistIfAdj/3`](https://stackoverflow.com/questions/26990728/most-general-higher-order-constraint-describing-a-sequence-of-integers-ordered-w/29867514).

```
list_rle(List,Rle) :-
  splitlistIfAdj(dif,List,Rle0),
  maplist(rle_length,Rle0,Rle).

rle_length([H|T],RleLen) :-
  length([H|T],L),
  RleLen = L*H. 
```

询问：

```
?- list_rle([a,a,b,a,a,c,d,c],X).
X = [2*a, 1*b, 2*a, 1*c, 1*d, 1*c]. 
```

*我不确定如何更改它以使其双向工作。*

然后你也可以这样做：

```
new_list_uniqs_alldups(List,Us,Ds):-
   list_rle(List,Rle),
   tpartition(singlelist_t,Rle,Us,Ds).

singlelist_t(L,T) :-
   L=N*_,
   if_(N=1,T=true,T=false). 
```

样品问：

```
 ?- new_list_uniqs_alldups([1,1,2,1,1,3,4,1,1,7,8],U,D).
 U = [1*2, 1*3, 1*4, 1*7, 1*8],
 D = [2*1, 2*1, 2*1].

 ?- new_list_uniqs_alldups([7,7,7,2,1,1,3,4,1,1,7,8],U,D).
 U = [1*2, 1*3, 1*4, 1*7, 1*8],
 D = [3*7, 2*1, 2*1]. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-06T16:12:37.797

这是一个解决方案，关键是 take/4 消耗所有匹配的前导项目，从而可以轻松测试列表（`[_|_]`匹配至少 1 个元素的任何列表）

```
compareL([], [], []).
compareL([X|Xs], U, D) :-
    (   take(X, Xs, [_|_], Ys)
    ->  compareL(Ys, U, B), D = [X|B]
    ;   compareL(Xs, A, D), U = [X|A]
    ).

take(X, [X|Xs], [X|R], Ys) :-
    !, take(X, Xs, R, Ys).
take(_, Ys, [], Ys). 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-06T16:34:21.267

你可以这样写：

```
split_seq([], [], []).

split_seq([H | T], L1_out, L2_out) :-
    split_seq(T, L1, L2),
    (   select(H, L1, L1_out)
    ->  (   member(H, L2)
        ->  L2_out = L2
        ;   L2_out = [H | L2])
    ;   L1_out = [H | L1],
        L2_out = L2). 
```

# javascript - 什么是javascript:;？

> ID：15850188
> 
> 赞同：0
> 
> 时间：2013-04-06T11:14:09.910
> 
> 标签：javascript, html, href

在某些站点中，我注意到以下内容`href`：

```
<a href="javascript:;">Link</a> 
```

我感兴趣是什么`javascript:;`意思？是一样的`javascript:void(0)`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:16:34.280

`javascript:`意思是“*这之后的任何东西都将是javascript。* ”

`;`结束 javascript 语句。

因此，是的，它绝对没有任何作用。

**为什么不直接使用`<a href="#">foo</a>`呢？**

简而言之，`#`如果您设置了`<base>`HTML 标签，使用将产生不良后果，并且在大多数情况下它将滚动到页面顶部，除非您有`onclick="return false;"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T16:11:28.050

没有官方的 javascript: URL 规范，但 HTML5 也尝试定义它们。该[定义](http://www.w3.org/TR/html5/webappapis.html#javascript-protocol)相当技术性，但归结为如果脚本没有返回任何内容，则点击链接对应于获取[204 No Content](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.5)。这意味着“如果客户端是用户代理，它不应该改变导致请求被发送的文档视图”，即没有任何反应。

`void`运算符返回，所以在这种情况下，和空语句`undefined`没有区别。`void(0)``;`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-06T11:16:48.407

是的，这是 as`javascript:void(0)`和`javascript:void 0`。这个链接什么都不做。

# jdbc - running an SQL update statement in java

> ID：15850190
> 
> 赞同：0
> 
> 时间：2013-04-06T11:14:13.730
> 
> 标签：jdbc, sql-update, execute

There are many questions related to this topic, but I couldn't find a solution to my problem. I have a table of "products" which I am trying to update in netbeans. The SQL statements works in SQL dev, and I have double checked my connection etc.

```
update products
set pvolume = 2, pprice = 15
where productid = 3; 
```

output: 1 rows updated.

but running in netbeans it won't execute. If I have missed some small syntax issue I apologize, but I really need help with this method.

```
public boolean editProduct(int ID, String name, int volume, int quantity, String description, int price) {
    boolean success = false;
    Connection con = ConnectionTools.getInstance().getCurrentConnection();
    String SQLString1 = "UPDATE products "
                        + "SET pname = ?, "
                        + "pvolume = ?, "
                        + "pquantity = ?, "
                        + "pdescription = ?, "
                        + "pprice = ? "
                        + "WHERE productID = ?";
    PreparedStatement statement = null;
    try {
        statement = con.prepareStatement(SQLString1);
        statement.setString(1, name);
        statement.setInt(2,volume);
        statement.setInt(3, quantity);
        statement.setString(4, description);
        statement.setInt(5, price);
        statement.setInt(6, ID);
        statement.executeUpdate();
        success = true;
    }catch (Exception e){
        System.out.println("Insertion error!");
        System.out.println(e.getMessage());
    }finally {
        try {
            statement.close();
        } catch (SQLException e) {
            System.out.println("Statement close error!");
            System.out.println(e.getMessage());
        }
    }
    return success;
} 
```

Running through the debug it seems to run through the try as far as statement.setInt(6, ID) but then does not execute. Here is the output:

Insertion error! ORA-00971: missing SET keyword

Any help/advice would be appreciated! Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:18:26.013

你必须使用括号：`update products set (pvolume = 2, pprice = 15) where productid = 3`

# background - BB10级联c ++，如何知道应用程序在后台运行？

> ID：15850192
> 
> 赞同：0
> 
> 时间：2013-04-06T11:14:31.650
> 
> 标签：background, blackberry-cascades, minimized

我正在使用一个 BB10 Cascades 应用程序、QML 和 C++，当用户最小化应用程序时，我想在后台线程中运行一个计划任务（现在只在桌面上显示缩略图，但不退出应用程序）。如何知道应用程序现在正在后台运行？我找到了这个事件处理程序：

[https://developer.blackberry.com/cascades/reference/libbb/application_thumbnail.cpp.html](https://developer.blackberry.com/cascades/reference/libbb/application_thumbnail.cpp.html)

示例代码看起来不错，但我无法在我的项目的 main.cpp 中实现它。main.cpp 不能被视为对象。

任何人都有正确的解决方案？

谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T17:32:57.883

在您的 main 方法中，您将创建一个 Application 实例和一个您自己的类之一的实例。您只需将类中的一个插槽连接到 Application 类的 thumbnail() 信号，如您链接到的示例所示：

```
int main(int argc, char **argv) {
    bb::Application app(argc, argv);
    TestObject testObject;

    QObject::connect(&app, SIGNAL( thumbnail() ), &testObject, SLOT( onThumbnail() ));

    return app.exec();
} 
```

# django - 来自两个字段的 django 过滤器，具有单个输入

> ID：15850196
> 
> 赞同：3
> 
> 时间：2013-04-06T11:14:52.977
> 
> 标签：django

我正在使用带有字段技能和标题的表格。我想用单个输入过滤这些字段。

```
models.py
class job(model.Model):
     title = models.CharField(max_length=30)
     skills = models.CharField(max_length=30)

search.html
<form>
<input type="text" name="skills" />
<input type="submit" />
</form>

views.py
jobs.objects.filter(skills__icontains=request.GET['skills'],title__icontains=request.GET['skills']) 
```

虽然我尝试此代码无法获得输出。在输入框中输入标题或技能时，我需要输出它与技能和标题相匹配。它应该是一个单一的输入。有人帮助我..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T11:18:37.437

您的代码会搜索职称和技能都包含的职位`request.GET['skills']`。要搜索 title 或技能（或两者）包含的工作`request.GET['skills']`，您必须使用`Q`对象：

```
from django.db.models import Q
...
search = request.GET['skills']
        #     skills contain search  OR  title contains search
query = Q(skills__icontains=search ) | Q(title__icontains=search )
job.objects.filter(query) 
```

# pandas - 添加一个包含现有值的新列

> ID：15850198
> 
> 赞同：1
> 
> 时间：2013-04-06T11:14:56.613
> 
> 标签：pandas

实现这一目标的最适合大熊猫的方式是什么？我想从“年”、“月”和“日”列中创建一个包含日期时间对象的列，但我想出的只是一些看起来太麻烦的代码：

```
myList=[]
for row in df_orders.iterrows():  #df_orders is the dataframe
    myList.append(dt.datetime(row[1][0],row[1][1],row[1][2]))
    #-->year, month and day are the 0th,1st and 2nd columns.
mySeries=pd.Series(myList,index=df_orders.index)
df_orders['myDateFormat']=mySeries 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T13:14:09.777

试试这个：

```
In [1]: df = pd.DataFrame(dict(yyyy=[2000, 2000, 2000, 2000], 
                               mm=[1, 2, 3, 4], day=[1, 1, 1, 1])) 
```

转换为整数：

```
In [2]: df['date'] = df['yyyy'] * 10000 + df['mm'] * 100 + df['day'] 
```

转换为字符串，然后转换为日期时间（以`pd.to_datetime`不同方式解释整数）：

```
In [3]: df['date'] = pd.to_datetime(df['date'].apply(str))

In [4]: df
Out[4]: 
   day  mm  yyyy                date
0    1   1  2000 2000-01-01 00:00:00
1    1   2  2000 2000-02-01 00:00:00
2    1   3  2000 2000-03-01 00:00:00
3    1   4  2000 2000-04-01 00:00:00 
```

# objective-c - 如何在运行时加载和实例化来自不同项目的对象？

> ID：15850200
> 
> 赞同：0
> 
> 时间：2013-04-06T11:15:04.900
> 
> 标签：objective-c, macos

假设我有一个名为`Drawable`实现的 NSObject 子类

`-(NSImage *) representation`

现在，使用另一个（正在运行的）程序，我想创建 Drawable 的实例。我正在研究 的源代码`Drawable`，因此 Drawable (.o) 的目标文件不固定。

是否有一种体系结构可以让我在运行时找到 Drawable 的目标文件、加载它并创建 Drawable 的实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:20:57.017

对于需要编译和链接的语言/运行时，您正在描述动态库或框架。随着您的开发`Drawable`，构建打包它的动态库的新版本，动态链接器可以处理它。

# java - 访问 ArrayList > 元素

> ID：15850201
> 
> 赞同：2
> 
> 时间：2013-04-06T11:15:09.270
> 
> 标签：java, arraylist, genetic-algorithm

我有一个`ArrayList`of `ArrayList`s，我需要找到一种访问元素的简单方法，以便更容易理解我已经制定了我想要实现的目标：

![在此处输入图像描述](https://i.stack.imgur.com/BdPp7.png)

如上图所示，主要`ArrayList`由**m** `ArrayList`组成，我希望通过使用`get`从 0 到**N**个元素的方法来获取一个元素，其中**N**是`ArrayList1`and的总元素`ArrayList2`。可能会出现更多的 ArrayList。

我当然可以通过使用两个 for 循环来遍历元素，这不是我在这种情况下搜索的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T11:36:39.357

您基本上需要在`ArrayList`新包装类上拥有成员并以不同的方式实现它们。我创建了一个示例来演示在`get()`.

```
import java.util.ArrayList;

public class ListHolder<T> {
    public ArrayList<ArrayList<T>> list = new ArrayList<ArrayList<T>>();

    public int size() {
        int size = 0;
        for (int i = 0; i < list.size(); i++) {
            size += list.get(i).size();
        }
        return size;
    }

    public T get(int i) {
        if (i >= size())
            return null;

        int listIndex = 0;
        int valueIndex = i;

        while (valueIndex >= list.get(listIndex).size()) {
            valueIndex -= list.get(listIndex++).size();
        }

        return list.get(listIndex).get(valueIndex);
    }
} 
```

我用来验证我的方法的内容：

```
public static void main(String[] args)
{
    ListHolder<Object> listHolder = new ListHolder<Object>();

    listHolder.list.add(new ArrayList<Object>());
    listHolder.list.get(0).add("hello");
    listHolder.list.get(0).add("world");

    listHolder.list.add(new ArrayList<Object>());
    listHolder.list.get(1).add("a");
    listHolder.list.get(1).add("b");
    listHolder.list.get(1).add("c");

    System.out.println("Size: " + listHolder.size());
    System.out.println("listHolder[0]: " + listHolder.get(0)); // "hello"
    System.out.println("listHolder[1]: " + listHolder.get(1)); // "world"
    System.out.println("listHolder[2]: " + listHolder.get(2)); // "a"
    System.out.println("listHolder[3]: " + listHolder.get(3)); // "b"
    System.out.println("listHolder[4]: " + listHolder.get(4)); // "c"
    System.out.println("listHolder[5]: " + listHolder.get(5)); // "null"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:36:14.170

您没有提供有关这些列表是什么以及它们是否可变的许多详细信息。但是您可能可以使用包含所有子列表的所有元素的附加列表：

```
private class Generation
    private List<List<Element>> populations = new ArrayList<>();
    private List<Element> allElements = new ArrayList<>();

    public Element getElementAt(int elementIndex) {
        return allElements.get(elementIndex);
    }

    public void addPopulation(List<Element> population) {
        populations.add(new ArrayList<>(population));
        allElements.addAll(population);
    }

    public List<Element> getPopulationAt(int populationIndex) {
        return Collections.unmodifiableList(populations.get(populationIndex));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T11:37:36.083

```
class Plot {
 class Point {
   int x;
   int y;
 }

 List<List<Point>> area = new ArrayList<List<Point>>();

 Point getPoint (int x, int y) throws IndexOutOfBoundsException {
   if (x < 0 && x >= area.size())
     throw new IndexOutOfBoundsException();
   int l = area.get(x).size();
   int i = (int)y/l;
   int j = y % l;
   return area.get(x+i).get(j);
 }

 void setPoint (int x, int y, Point p) throws IndexOutOfBoundsException {
   if (x < 0 && x >= area.size())
     throw new IndexOutOfBoundsException();
   int l = area.get(x).size();
   int i = (int)y/l;
   int j = y % l;
   area.get(x+i).set(j, p);
 }
} 
```

# java - In ActiveAndroid Is it possible to update a specific field in a table row without wiping out the rest of the data in the row

> ID：15850204
> 
> 赞同：3
> 
> 时间：2013-04-06T11:15:19.260
> 
> 标签：java, android, mobile, activeandroid

ActiveAndroid:

I need to push updates to specific table fields without wiping out any existing data in the row if i dont happen to save() data for all fields each time.

For example:

I have a table named 'user' which contains the following fields:

extSrc | extId | email | firstName | lastName | role | photo | userId | verified

If i save data to all fields except 'verified' and then I later need to update only the verified field - is this possible?

Currently when i use the code below, all fields except userId (which i have stored locally) and verified are populated, all other fields are cleared. At the time that i have the verified value that i need to update i dont have the additional user data to push / save() so i only need to update the specific 'verified' field when the userId matches a userId in the user table and leave all other fields for that user as they are.

My code:

Model:

```
 // define table name
    @Table(name = "User")

    public class User extends Model 
    {
    // define table columns

    @Column(name = "extSrc")
    public String extSrc;

    @Column(name = "extId")
    public String extId;

    @Column(name = "email")
    public String email;

    @Column(name = "firstName")
    public String firstName;

    @Column(name = "lastName")
    public String lastName;

    @Column(name = "role")
    public String role;

    @Column(name = "photo")
    public String photo;

    @Column(name = "userId", unique = true, onUniqueConflict = Column.ConflictAction.REPLACE)
    public String userId;

    @Column(name = "verified")
    public String verified;
    }

controller:

    public class UserAdapter implements JsonDeserializer {

    @Override
    public User deserialize(JsonElement arg0, Type arg1,
        JsonDeserializationContext arg2) throws JsonParseException {

            User u = new User();

            Log.v("user", u.toString());

            JsonObject j = (JsonObject) arg0;

            Log.v("j", j.toString());

            if(j.has("extSrc"))
            {
                u.extSrc = j.get("extSrc").getAsString();
                Log.v("extSrc", u.extSrc);
            }
            else
            {
                Log.v("extSrc", "does not exist");
            }

            if(j.has("extId"))
            {
                u.extId = j.get("extId").getAsString();
                Log.v("extId", u.extId);
            }
            else
            {
                Log.v("extId", "does not exist");
            }

            if(j.has("email"))
            {
                u.email = j.get("email").getAsString();
                Log.v("email", u.email);
            }
            else
            {
                Log.v("email", "does not exist");
            }

            if(j.has("firstName"))
            {
                u.firstName = j.get("firstName").getAsString();
                Log.v("firstName", u.firstName);
            }
            else
            {
                Log.v("firstName", "does not exist");
            }

            if(j.has("lastName"))
            {
                u.lastName = j.get("lastName").getAsString();
                Log.v("lastName", u.lastName);
            }
            else
            {
                Log.v("lastName", "does not exist");
            }

            if(j.has("role"))
            {
                u.role = j.get("role").getAsString();
                Log.v("role", u.role);
            }
            else
            {
                Log.v("role", "does not exist");
            }

            if(j.has("photo"))
            {
                u.photo = j.get("photo").getAsString();
                Log.v("photo", u.photo);
            }
            else
            {
                Log.v("photo", "does not exist");
            }

            if(j.has("userId"))
            {
                u.userId = j.get("userId").getAsString();
                Log.v("userId", u.userId);
            }
            else
            {
                Log.v("userId", "does not exist");
            }

            if(j.has("verified"))
            {
                u.userId = SpontlyApplication.PREFS_USER_ID;
                u.verified = j.get("verified").getAsString();

                Log.v("verified", u.verified);
            }
            else
            {
                u.verified = "true";
                Log.v("verified", "does not exist");
            }

     u.save();

     } 
```

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-14T10:17:40.390

如果要更新数据库中已经存在的用户，则需要先从数据库中检索它并在调用 save() 之前更新其字段；

就像是：

```
User user = new Select().from(User.class).where("userId = ?", userIdYouWantToRetrieve).executeSingle();

if (user != null){
   user.setVerified(true);
} else {
   user = new User(){//populate your new user here from json }
}

user.save(); 
```

这将使用户值与以前存储在数据库中的值相同，并且您只会更新所需的新值。

# dart - 为什么这个 Web-UI 代码不起作用？

> ID：15850220
> 
> 赞同：1
> 
> 时间：2013-04-06T11:16:09.073
> 
> 标签：dart, dart-webui

我用 web-ui 创建了一个新的 web 应用程序。所有软件包似乎都已正确安装。我运行了生成的“点击计数器”示例，但它没有出现。我去了Web-UI文章并粘贴了这段代码：

```
<!DOCTYPE html>
<!--
Copyright (c) 2012, the Dart project authors.  Please see the AUTHORS file
for details. All rights reserved. Use of this source code is governed by a
BSD-style license that can be found in the LICENSE file.
-->
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

</head>
<body>
  <element name="x-click-counter" constructor="CounterComponent" extends="div">
    <template>
      <button on-click="increment()">Click me</button>
      <span>(click count: {{count}})</span>
    </template>
    <script type="application/dart">
      import 'package:web_ui/web_ui.dart';

      class CounterComponent extends WebComponent {
        int count = 0;
        void increment() { count++; }
      }
    </script>
  </element>
  <div class="well">
    <div is="x-click-counter" count="{{myNumber}}"></div>
    <div is="x-click-counter" count="{{5}}"></div>
  </div>
  <script type="application/dart">
    int myNumber = 12;
    main(){}
  </script>
</body>
</html> 
```

但这也没有用。代码有问题吗？它已经过时了吗？是否有一些我没有考虑的依赖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:15:35.430

该代码对我来说很好。

你先跑`build.dart`吗？您不能直接运行此脚本并使其工作。您应该有一个看起来像这样的顶级`build.dart`文件（我假设该文件位于`web/`目录中并被调用`click_counter.html`）：

```
import 'packages/web_ui/component_build.dart';
import 'dart:io';

void main() {
  build(new Options().arguments, ['web/click_counter.html']);
} 
```

当您运行此文件时，`out/`将为您自动生成一个目录。右键单击目录`click_counter.html`中的文件`out/`，然后运行它。它应该工作。

[您可以在http://www.dartlang.org/articles/web-ui/tools.html](http://www.dartlang.org/articles/web-ui/tools.html)阅读有关编译过程的更多信息。

# c# - ServiceStack AppHost 是单例吗？

> ID：15850226
> 
> 赞同：7
> 
> 时间：2013-04-06T11:16:47.097
> 
> 标签：c#, servicestack

我一直在评估 ServiceStack，到目前为止，我已经卖得差不多了——但我有一个我*认为*会破坏交易的要求。

我基本上需要多个 AppHost 派生实例。第一个很好地旋转起来，但其余的都失败了，因为“AppHostBase.Instance 已经设置”。

这是否意味着如果我想要多个主机（在不同的 Uris 上）位于不同的可执行文件中？如果是这样，这是相当令人失望的，因为这个库在其他方面都是完美的，除了这个限制。

如果我错了，谁能指出我的解决方案？

请允许我稍微详细说明一下。我们计划在整个网络中提供许多服务。我的意图是将它们设计为单独的服务，然后在托管类中“托管”。托管类本身是用于管理目的的服务，并且具有启动和停止服务的能力。它们在网络上是“可发现的”。我们可以在不同时间或随意启动和关闭不同机器上的服务。

我的计划是为这些事情中的每一个使用服务堆栈，并能够在任何机器和任何“主机”上以临时方式创建和销毁服务。我唯一遇到的问题是 AppHost 只被初始化一次。

显然我做错了什么，所以任何关于如何在同一个可执行文件中托管多个服务的信息都会很棒:)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-06T18:04:46.510

为了回答这个问题，我添加了新的[模块化服务](https://github.com/ServiceStack/ServiceStack/wiki/Modularizing-services)和[物理项目结构](https://github.com/ServiceStack/ServiceStack/wiki/Physical-project-structure)wiki 页面，以突出构建和模块化 ServiceStack 服务的不同方式，我将重复听到这些方式的可发现性：

正如您所发现的，ServiceStack为每个应用程序域提供了**一个应用程序主机。**正如您可以从名称中推断的那样，**Host**项目的作用是成为绑定所有服务具体依赖项、插件、过滤器和服务所需的所有其他内容的管道。`AppHost.Configure()`在您的方法中初始化所有内容后，您的服务配置应该是不可变的。[物理项目结构 wiki 页面](https://github.com/ServiceStack/ServiceStack/wiki/Physical-project-structure)wiki 显示了典型解决方案的推荐物理项目结构。

### 在多个组件中模块化服务

虽然您只能拥有 1 个 AppHost，但可以通过在 AppHostBase 构造函数中提供程序集来将服务分布在多个程序集中，例如：

```
public class AppHost : AppHostBase
{
    //Tell Service Stack the name of your application and which assemblies to find your web services
    public AppHost() : base("Hello ServiceStack!", 
       typeof(ServicesFromDll1).Assembly, ServicesFromDll2).Assembly /*, etc */) { }

    public override void Configure(Container container) {}
} 
```

您还可以提供自己的策略来发现和解决 ServiceStack 应该通过覆盖自动连接的服务类型`CreateServiceManager`，例如：

```
public class AppHost : AppHostBase
{
    public AppHost() : base("Hello ServiceStack!", typeof(ServicesFromDll1).Assembly) { }
    public override void Configure(Container container) {}

    //Provide Alternative way to inject IOC Container + Service Resolver strategy
    protected virtual ServiceManager CreateServiceManager(params Assembly[] assembliesWithServices)
    {       
        return new ServiceManager(new Container(),
            new ServiceController(() => assembliesWithServices.ToList().SelectMany(x => x.GetTypes())));
    }
} 
```

### 在插件中封装服务

模块化服务的一种方法是将它们封装在[插件](https://github.com/ServiceStack/ServiceStack/wiki/Plugins)中，这允许您手动注册服务、自定义路由、过滤器、内容类型、允许自定义以及您的模块需要的任何其他内容。

为了说明这一点，我们将展示一个基本[身份验证功能](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/AuthFeature.cs)示例的样子：

```
public class BasicAuthFeature : IPlugin 
{
    public string HtmlRedirect { get; set; }   //User-defined configuration

    public void Register(IAppHost appHost)
    {
        //Register Services exposed by this module
        appHost.RegisterService<AuthService>("/auth", "/auth/{provider}");
        appHost.RegisterService<AssignRolesService>("/assignroles");
        appHost.RegisterService<UnAssignRolesService>("/unassignroles");

        //Load dependent plugins
        appHost.LoadPlugin(new SessionFeature());
    }
} 
```

将所有内容都封装在插件中，您的用户可以通过以下方式轻松地在您的 AppHost 中启用它们：

```
Plugins.Add(new BasicAuthFeature { HtmlRedirect = "~/login" }); 
```

## [物理项目结构](https://stackoverflow.com/a/15235822/85785)

有关物理布局项目的推荐方式，请参阅此[较早的答案。](https://stackoverflow.com/a/15235822/85785)

# javascript - if 语句中的错误

> ID：15850229
> 
> 赞同：-2
> 
> 时间：2013-04-06T11:16:58.853
> 
> 标签：javascript, loops, if-statement

这现在工作正常，如何在没有数组的情况下完成（仅使用侦听器），我需要将代码更改为没有数组但具有相同的功能。

这是Javascript代码。它是一个简单的绘图应用程序。

```
$(document).ready(function(){   
var x;
var y;
var canv = $("#myCanvas")[0];
var ctx = canv.getContext("2d");

var lines = new Array();

$("#myCanvas").click(function(event)
{
    x = event.pageX - $("#myCanvas").offset().left;
    y = event.pageY - $("#myCanvas").offset().top;

    ctx.fillStyle = "#" + $("#barvaPolnila").val();
    ctx.strokeStyle = "#" + $("#barvaCrte").val();
    ctx.lineWidth = $("#sirina").val();

    fill = $("input[name=polni]").is(":checked");
    width = $("#dolzina").val();

    shape = $("input[@name='lik']:checked").val();

    if (shape == 'krog') {
        ctx.beginPath();
        ctx.arc(x, y, width, 0*Math.PI, 2*Math.PI);
        if(fill)
            ctx.fill();
        else
            ctx.stroke();
    } else if(shape == "kvadrat") {
        ctx.rect(x, y, width, width);
        if(fill)
            ctx.fill();
        else
            ctx.stroke();
    } else {
        if(lines[0] !== undefined) {
            ctx.moveTo(lines[lines.length-1][0], lines[lines.length-1][1]);
            ctx.lineTo(x, y);
            ctx.stroke();
        } else 
            ctx.beginPath();

        lines.push([x, y]);
    }
});

$("#skrij").click(function() {
    gumb = $(this);
    nadzornaPlosca = $("#nadzornaPlosca");
    nadzornaPlosca.slideToggle(400, function() {
        if($(this).is(":visible")) {
            gumb.attr("value", "-");
        } else {
            gumb.attr("value", "+");
        }
    });
});

$("#zakljuci").click(function() {
    if(lines[0] !== undefined) {
        ctx.moveTo(lines[lines.length-1][0], lines[lines.length-1][1]);
        ctx.lineTo(lines[0][0], lines[0][1]);
        ctx.stroke();

        if($("input[name=polni]").is(":checked")) {
            ctx.beginPath();
            for(i = 0; i < lines.length; i++) {
                ctx.lineTo(lines[i][0], lines[i][1]);
            }
            ctx.closePath();
            ctx.fill();
        }
    }
    lines = new Array();
});

$("input[name=lik]").change(function() {
    lines = new Array();
});

$("#brisi").click(function() {
    ctx.clearRect(0, 0, canv.width, canv.height);
})
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:19:18.057

如果要将函数绑定到这些`click`事件，则不要使用`if()`语句。更新代码以使用`click()`jQuery 中函数的回调函数，如下所示：

```
$("#pokazi").click(function(function() {
    $("#nadzornaPlosca").slideToggle("slow");
});

$("#brisi").click(function() {
    ctx.clearRect(0,0, 500, 500);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T11:20:02.950

最后两位有点坏了，你正在附加事件处理程序，但`if`在定义之前包括一个并关闭函数，这样做：

```
$("#pokazi").click(function () {
    $("#nadzornaPlosca").slideToggle("slow");
});

$("#brisi").click(function () {
    ctx.clearRect(0,0, 500, 500);
}); 
```

# vb.net - 当 Windows 8 应用程序正在运行时，SetWindowPos 无法在 Windows 8 中将窗口置于最前面

> ID：15850230
> 
> 赞同：0
> 
> 时间：2013-04-06T11:17:03.550
> 
> 标签：vb.net, windows-8, window-position

我有一个用 VB.net 编写的聊天应用程序。当收到新的聊天消息时，它使用 SetWindowPos 函数将窗口设置为顶部。它也可以正常工作。但是在 Windows 8 中，当 Windows 8 应用程序（如阅读器或照片）运行时，它不会将窗口置于前面。这些应用程序将在 Windows 8 中以全屏模式运行。所以我的聊天应用程序窗口没有出现在弹出时的顶部。那么，即使这些 Windows 8 应用程序以全屏模式运行，我如何才能让它出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:37:42.220

允许带有“UIAccess”的应用程序显示在全屏应用程序的顶部。查看[Windows 8 分层 Windows Over Metro Apps](https://stackoverflow.com/questions/11232450/windows-8-layered-windows-over-metro-apps)的答案。这个问题是关于分层窗口的，但这没有区别。Eric 的问题和你的一样，他的窗口没有显示在 Metro 界面的顶部。

简而言之，您需要：

1.  在应用程序的清单中声明 uiAccess="true"
2.  您的可执行文件需要使用受信任的证书进行数字签名。
3.  您的应用程序需要安装在受信任的位置，即 Program Files

# ios - iOS：提醒用户特定地理位置区域（纬度，经度）

> ID：15850232
> 
> 赞同：1
> 
> 时间：2013-04-06T11:17:24.173
> 
> 标签：ios, geolocation, cllocationmanager, cllocation, clregion

我正在尝试为用户实现一个功能`Geo location`，我正在静态设置`latitude`和`longitude`信息，当应用程序启动时，如果用户在该区域内，我将显示一条消息“您已到达办公室”否则“你要离开办公室”。我已经实现了下面的代码来实现这一点，我尝试通过步骤和车辆四处移动，但在这两种情况下它总是显示“你已经到达办公室”，但是我离那个位置 2 公里！我认为问题在于代理中地理数据的比较`CLLocationManager`。

```
- (void) startUpdateUserLocation
{
    if(!locationManager)
        locationManager = [[CLLocationManager alloc] init];

    locationManager.delegate = self;
    locationManager.distanceFilter = kCLDistanceFilterNone;
    locationManager.desiredAccuracy = kCLLocationAccuracyBestForNavigation;

//    [locationManager startUpdatingLocation];

    CLLocationCoordinate2D coord = CLLocationCoordinate2DMake(latitude, longitude);

    CLRegion *region = [[CLRegion alloc] initCircularRegionWithCenter:coord radius:kCLDistanceFilterNone identifier:@"identifier"];
    [locationManager startMonitoringForRegion:region];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    latitude = 23.076289;
    longitude = 72.508129;
}

- (void) viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    MKCoordinateRegion region;
    region.center = mapView.userLocation.coordinate;
    region.span = MKCoordinateSpanMake(0.25, 0.25);
    region = [mapView regionThatFits:region];
    [mapView setRegion:region animated:YES];

    lblCurrentCoords.text = [NSString stringWithFormat:@"lat %f lon %f",mapView.userLocation.coordinate.latitude,mapView.userLocation.coordinate.longitude];

    [self startUpdateUserLocation];
}

- (void)locationManager:(CLLocationManager *)manager
didEnterRegion:(CLRegion *)region __OSX_AVAILABLE_STARTING(__MAC_10_7,__IPHONE_4_0)
{
    [listOfPoints addObject:manager.location];
    [tablePoints reloadData];

    /*
     *  locationManager:didEnterRegion:
     *
     *  Discussion:
     *    Invoked when the user enters a monitored region.  This callback will be invoked for every allocated
     *    CLLocationManager instance with a non-nil delegate that implements this method.
     */

    lblLocationStatus.text = @"You're in office area!...";
}

- (void)locationManager:(CLLocationManager *)manager
didExitRegion:(CLRegion *)region __OSX_AVAILABLE_STARTING(__MAC_10_7,__IPHONE_4_0)
{
    /*
     *  locationManager:didExitRegion:
     *
     *  Discussion:
     *    Invoked when the user exits a monitored region.  This callback will be invoked for every allocated
     *    CLLocationManager instance with a non-nil delegate that implements this method.
     */

    lblLocationStatus.text = @"You're going out from office area!...";
}

- (void)locationManager:(CLLocationManager *)manager
didStartMonitoringForRegion:(CLRegion *)region __OSX_AVAILABLE_STARTING(__MAC_TBD,__IPHONE_5_0)
{
    /*
     *  locationManager:didStartMonitoringForRegion:
     *
     *  Discussion:
     *    Invoked when a monitoring for a region started successfully.
     */

    lblLocationStatus.text = @"Start monitoring...";
}

- (void)locationManager:(CLLocationManager *)manager
monitoringDidFailForRegion:(CLRegion *)region
withError:(NSError *)error __OSX_AVAILABLE_STARTING(__MAC_10_7,__IPHONE_4_0)
{
    /*
     *  locationManager:monitoringDidFailForRegion:withError:
     *
     *  Discussion:
     *    Invoked when a region monitoring error has occurred. Error types are defined in "CLError.h".
     */

    lblLocationStatus.text = @"Stop monitoring...";
} 
```

我正在努力完成以下事情！

1.  如果用户输入了地理位置，他应该是“警觉的”。--- 如何匹配位置？
2.  如果在该地理位置内移动，则代码应该监视此活动！--- 需要设置所需的精度属性吗？
3.  我希望我的代码不断检查用户地理位置，我该怎么做？--- 需要调用函数`NSTimer`吗？

我发现关于 SO 的许多问题都问了同样的问题，但没有人给出匹配的答案！有人请指导我是否朝着正确的方向前进，因为此代码未显示！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T11:23:16.153

听起来您应该改用区域监控，它会告诉您用户何时进入或退出圆形区域。设置[`startMonitoringForRegion:`](https://developer.apple.com/library/mac/documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/occ/instm/CLLocationManager/startMonitoringForRegion%3a)并实现`CLLocationManagerDelegate`方法

```
– locationManager:didEnterRegion:
– locationManager:didExitRegion:
– locationManager:monitoringDidFailForRegion:withError:
– locationManager:didStartMonitoringForRegion: 
```

如果您在输入错误的位置数据时遇到问题，请检查`CLLocation`in`locationManager:didUpdateLocations:`或`locationManager:didUpdateToLocation:fromLocation:`. 如果超过 60 秒，请不要使用它。

# centos - yum 没有找到 php-apc

> ID：15850234
> 
> 赞同：3
> 
> 时间：2013-04-06T11:17:28.520
> 
> 标签：centos, apc

我正在尝试在 centos 5 服务器上安装 apc（替代 php 缓存）。我试过`yum search apc`了，只找到美国电力公司相关的包。

怎么安装apc？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T10:57:09.977

该软件包称为 php-pecl-apc，它应该在您的任何存储库中都可用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-29T09:47:11.210

```
yum install php-pear php-devel httpd-devel pcre-devel gcc make

```

```
pecl安装apc

```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-28T22:54:20.803

我正在使用 remi 存储库。(CentOS release 6.5, PHP 5.4) 您可以通过以下命令列出可用的包

```
yum --enablerepo=remi list php54*
yum --enablerepo=remi list php54* | grep apc 
```

我得到了以下 apc 包

```
php54-php-pecl-apcu.x86_64     4.0.7-1.el6.remi         @remi 
```

现在您可以使用以下命令安装 apc

```
yum install php54-php-pecl-apcu --enablerepo=remi 
```

# xml - Eclipse Indigo XML 编辑器无法打开具有其他扩展名的正确 XML 文件

> ID：15850235
> 
> 赞同：1
> 
> 时间：2013-04-06T11:17:30.123
> 
> 标签：xml, eclipse, editor, file-extension, file-type

所以我有一个以 .xc​​s 结尾的正确 xml 文件，当我尝试打开它时，它给了我“不支持的竞争类型”消息。它告诉我转到“内容类型首选项页面”并为我的文件结尾设置默认编辑器。

首先，这不应该发生，因为我是专门用 XML 编辑器打开文件的。

无论如何，我转到 Content Type Prefs Page 并将 .xcs 结尾设置为默认使用 XML Editor 打开。

当我尝试打开文件时出现相同的消息，当它在 XML 编辑器中打开时，元素不会出现，而是我得到“文档为空。右键单击此处插入内容”。

还有一件事：如果我将文件重命名为 .xml，它会毫无问题地打开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-03T03:44:36.207

这个解决方案对我有用

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=288239](https://bugs.eclipse.org/bugs/show_bug.cgi?id=288239)

您需要更改 XML 的内容类型以包含扩展名 .xcs。您可以通过转到“窗口”>“首选项”来执行此操作。将树展开到常规 > 内容类型。在 Content Types 树下，展开 Text 并搜索 XML。选择 XML，然后按“添加...”按钮。在内容类型字段中输入“*.xcs”。按确定。再次按 OK 保存首选项。.xcs 扩展名现在应该与 XML 内容类型相关联，并且文件应该在 XML 编辑器中正确打开。

# javascript - 基于选择器的 jquery 切换（显示/隐藏）

> ID：15850236
> 
> 赞同：0
> 
> 时间：2013-04-06T11:17:30.153
> 
> 标签：javascript, jquery, css, css-selectors

我想基于 jquery 创建动画，下面是我的代码；

```
>items=document.querySelectorAll("#customers td span");
[<span alt=​"  02,Counter,11,2013-04-06 14:​59:​16">​  02​&lt;/span>​, <span>​11​&lt;/span>​, <span alt=​"  02,Counter,11,2013-04-06 13:​22:​19">​  02​&lt;/span>​, <span>​11​&lt;/span>​]
>item=items[0]; // it has a parent tag <tr> i want the whole row to blink (both spans)
<span alt=​"  02,Counter,11,2013-04-06 14:​59:​16">​  02​&lt;/span>​
>tm=item.attributes.getNamedItem("alt");
alt=​"  02,Counter,11,2013-04-06 14:​59:​16"
>dtm=tm.value.split(',')[3];
"2013-04-06 14:59:16" 
```

或在 JQuery 中：

```
$(document).ready(function() {
    window.setInterval(function(){
        $("#customers, td, #span").each(function(){
            if($(this).children("span").attr("alt")!=null)
                var dt=new Date($(this).children("span").attr("alt").split(",")[3]).getTime();
                    if(dt>$.now()-10*1000){ //am i right here??
                        console.log("animating");
                        $(this).parent().fadeOut("slow");
                        $(this).parent().fadeIn("slow");
                    }        
       });
    },1000);
}); 
```

每一秒我都想检查项目中的每个元素；如果 dtm > 当前时间 - 10 秒，那么它应该在 500 毫秒后隐藏并在 500 毫秒后显示。

我上面的代码只会闪烁一个跨度，我希望两个元素都闪烁..并且此检查应每 1 秒继续一次。

谁能帮我..

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:20:14.343

下面是我的最终代码；

```
<script>
$(document).ready(function ($) {
    window.setInterval(function(){
        $("#customers, td, span").each(function(){
            if($(this).children("span").attr("alt")!=null){
                var dt=new Date($(this).children("span").attr("alt").split(",")[3].replace(/-/g,"/")).getTime();
                if(dt>$.now()-20*1000){
                    console.log("animating");
                    $(this).parent().fadeOut(500,"linear");
                    $(this).parent().fadeIn(500,"linear");
                }
            }
        });
    },1100);
});
</script> 
```

# java - 用于外部存储文件的通用图像加载器

> ID：15850241
> 
> 赞同：4
> 
> 时间：2013-04-06T11:17:47.187
> 
> 标签：java, android, java-io, universal-image-loader

您好，我使用[Universal Image Loader](https://github.com/nostra13/Android-Universal-Image-Loader)从设备加载图像，现在它可以工作了，但是如果文件路径包含“空格字符”，则图像不会显示，并且日志记录显示存在`FileNotFoundException`.

我尝试使用 java io 在线程中打开文件，它打开并且我可以读取它。

文件名：

```
/mnt/sdcard/WhatsApp/Media/WhatsApp Images/IMG-20121014-WA0001.jp 
```

当抛出异常时，
它用 a 替换空格，`%20`这就是抛出异常的原因。

我的代码：

```
ImageLoader.getInstance().displayImage(
                    Uri.fromFile(
                            new File(cursor.getString(cursor.getColumnIndex(

                            MediaStore.Images.Media.DATA)))).toString(),
                    holder.mImage); 
```

仅当路径中没有空格时才有效，

任何帮助

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-10-30T19:39:09.940

不幸的是，另一个答案不太清楚，`fileName`经过一些额外的挖掘后，我设法将本地图像与图像加载器一起使用：

**示例代码：**

```
string imgPath = "/mnt/sdcard/WhatsApp/Media/WhatsApp Images/IMG-20121014-WA0001.jpg";

String decodedImgUri = Uri.fromFile(new File(imgPath)).toString();
ImageLoader.getInstance().displayImage(decodedImgUri, imageView); 
```

[Android 使用路径中的空格和通用图像加载器加载本地图像](https://stackoverflow.com/questions/29815417/android-loading-local-image-with-space-in-path-and-with-universal-image-loader)也有助于解决此问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-10T07:33:01.537

我有同样的问题，我找到了这个解决方案。

```
String uri = fileName.getUri().toString();
String decodedUri = Uri.decode(uri);

ImageLoader.getInstance().displayImage(decodedUri, imageView); 
```

# python - 在 python 列表中切换值时需要帮助

> ID：15850242
> 
> 赞同：3
> 
> 时间：2013-04-06T11:18:01.347
> 
> 标签：python

我有一个数字列表，例如：

```
[1, 2, 3, 4, 5, 6] 
```

我无法弄清楚如何将列表的前 2 项与最后 2 项或前 3 项与最后 3 项进行切换，依此类推。

当我将第一个两个数字的值分配给列表的最后 2 项时，我不能将最后 2 个值**（曾经是列表的最后 2 个值）**分配给前两个，因为最后 2 个值具有丢失了。

如果我尝试使用另一个空列表并将**原始列表的最后 2 个值附加**到该列表，**然后附加中间值**，然后是旧列表的**前 2 个值**，我最终会得到如下结果：

```
[[[5, 6], [3, 4], [1, 2]]] 
```

**我不想要嵌套列表！**我想要的是：

```
[5, 6, 3, 4, 1, 2] 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-06T11:19:04.050

```
>>> nums = [1, 2, 3, 4, 5, 6]
>>> nums[:2], nums[-2:] = nums[-2:], nums[:2]
>>> nums
[5, 6, 3, 4, 1, 2] 
```

这会修改原始列表，但如果您想要一个单独的新列表，您应该使用以下内容：

```
>>> nums = [1, 2, 3, 4, 5, 6]
>>> swapped_nums = nums[-2:] + nums[2:-2] + nums[:2]
>>> swapped_nums
[5, 6, 3, 4, 1, 2] 
```

**注意：**如果您的列表有 < 4 个元素，这将无法正常工作

# c# - .Net Regex 用于具有严格格式的逗号分隔字符串

> ID：15850243
> 
> 赞同：1
> 
> 时间：2013-04-06T11:18:07.247
> 
> 标签：c#, .net, regex

我有一个字符串，我需要验证其有效性，如果是后者：

*   它完全是空的
*   或者包含一个必须如下所示的逗号分隔字符串：'abc,def,ghi,jkl'。

这些逗号分隔值中有多少并不重要，但如果字符串不为空，它必须遵守逗号（并且只有逗号）分隔格式，它们周围没有空格，并且每个值可能只包含 ascii az/Az.. 没有特殊字符或任何东西。

我将如何验证字符串是否符合规则？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T11:20:44.517

你可以使用这个正则表达式

```
^([a-zA-Z]+(,[a-zA-Z]+)*)?$ 
```

或者

```
^(?!,)(,?[a-zA-Z])*$ 
```

* * *

`^`是字符串的开始

`[a-zA-Z]`是匹配单个大写**或**小写字母的字符类

`+`是与前面的字符或组**1 匹配多次的量词**

`*`是一个量词，它匹配前面的字符或组**0 到多次**

`?`是匹配前面字符或组**0 或 1 次的量词**

`$`是字符串的结尾

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T11:52:12.570

考虑*不*使用正则表达式：

`bool isOK = str == "" || str.Split(',').All(part => part != "" && part.All(c=> (c>= 'a' && c<='z') || (c>= 'A' && c<='Z')));`

# javascript - 确保 drawImage 在 HTML5 画布上绘制图像

> ID：15850244
> 
> 赞同：0
> 
> 时间：2013-04-06T11:18:07.817
> 
> 标签：javascript, html5-canvas, drawimage

我正在为画布制作一个多项选择测验游戏，用户可以在其中上传自己的图像以获得多项选择答案。

When the next question is selected, the variables for the next question are got from a javascript array, including filepath for the image.

我遇到的问题是，通常在第一次测验尝试时，图像有时不会及时加载以在画布上绘制。我正在尝试通过确保始终绘制图像答案来提高测验画布方面的性能。

帮助将不胜感激。在画布上绘制图像的代码如下。

```
//else if answer type is image answer
    else if(answertype == "image"){
        answerbg.src = "./resources/imageaudiovideoanswerbg.png";
        eventstate = 'imageaget';
        if (answerbg.complete) {
        context.drawImage(answerbg, 0, 280);
            context.drawImage(imagefilea,75,285);
            context.drawImage(imagefileb,375,285);
            context.drawImage(imagefilec,75,591);
            context.drawImage(imagefiled,375,591);
        } 
        else {
               answerbg.onload = function () {
               context.drawImage(answerbg, 0, 280);  
               context.drawImage(imagefilea,75,285);
               context.drawImage(imagefileb,375,285);
               context.drawImage(imagefilec,75,591);
               context.drawImage(imagefiled,375,591);
                };
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:12:21.757

您必须确保图像已加载，然后才能在画布上绘制。

所以你需要做的是这样的：

```
var image = new Image(); //make a new image object
image.onload = function() { //when the image has loaded...
doStuffWithImage(); //Do somthing with it (draw it on canvas etc.)
}
image.src = '/your/path/image.png'; //set the source (afterwards!) 
```

如果您使用图像和画布，这是您必须知道的。

此外，如果您在加载所有图像时遇到问题，请创建一个`preLoadAllImagesfromSource(sourceArray)`函数，在执行主代码时，所有图像对象都已预先加载。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T11:06:08.220

或者，您可以考虑在 JavaScript 或 HTML 本身中使用 BASE64 编码嵌入图像和/或其他资源。

[http://ejohn.org/blog/embedding-and-encoding-in-javascript/](http://ejohn.org/blog/embedding-and-encoding-in-javascript/)

当然，在您的情况下，由于它是用户上传的内容，您可能必须从上传的图像生成 JavaScript。

# macos - OSX：使用python自动（每1-2秒）屏幕截图（不是全屏，而是（x，y，w，h））

> ID：15850252
> 
> 赞同：1
> 
> 时间：2013-04-06T11:19:05.227
> 
> 标签：macos, screenshot

我想使用 python 在 OSX 上制作屏幕截图。我不想制作全屏照片，而只想制作屏幕上的某些矩形。类似于 (291,305,213,31)。我需要正确的像素，因为之后图像文件由 OCR（python-tesseract）处理以提取文本。

顺便说一句，这是我 6 年来第一次编程，到目前为止我只知道一点 Java。我昨天开始，今天凌晨 4 点放弃了。所以基本上我还没有任何线索......例如，由于路径设置，我仍然无法使用 Sublime 构建，但那是另一回事。一天都想不通。

我已经在尝试以下方法： - wxPython 但结果是黑色图像，另请参阅：stackoverflow.com/questions/8644908/take-screenshot-in-python-cross-platform 此外，它仅适用于 32 位模式，但当我使用 python-tesseract openCV 进行 OCR 需要 64 位 ....

*   autopy 尝试安装时出现错误，另请参阅：stackoverflow.com/questions/12993126/errors-while-installing-python-autopy

*   仅限 ImageGrab Windows effbot.org/imagingbook/imagegrab.htm

*   命令行 screencapture os.system('screencapture test.png') 当我发现这个时，我想，很好，但在检查 man screencapture 时只能全屏显示。但后来我发现了这个：guides.macrumors.com/screencapture -R capture screen rect 这已经足够了，但是在 OSX 10.7.5 上我没有这个选项。有任何想法吗？

*   导入 Quartz.CoreGraphics neverfear.org/blog/view/156/OS_X_Screen_capture_from_Python_PyObjC

    # 将屏幕截图创建为 CGImage

    ```
    image = CG.CGWindowListCreateImage(
        region,
        CG.kCGWindowListOptionOnScreenOnly,
        CG.kCGNullWindowID,
        CG.kCGWindowImageDefault) 
    ```

不幸的是，图像不是文件格式，而是 CGImage，不知道如何保存为文件。

因此，如果可能的话，如果有人知道如何，我想使用带有 -R 的命令行屏幕截图。只是作为继续的开始。

还有其他可用的命令行工具吗？

我错过的其他库呢？

干杯 M

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:31:11.490

鉴于您可以获得 a `CGImageRef`，您可以使用[技术问答 QA1509：从 CGImage 对象获取像素数据中描述的技术获取其像素数据](https://developer.apple.com/library/mac/#qa/qa1509/_index.html)。特别是，它显示了`CFDataRef`使用此函数获取像素数据的函数：

```
CFDataRef CopyImagePixels(CGImageRef inImage) { return CGDataProviderCopyData(CGImageGetDataProvider(inImage)); } 
```

并说：

> CGDataProviderCopyData 返回的像素数据没有经过颜色匹配，并且是图像所在的格式，如各种 CGImageGet 函数所述……</p>

如果需要，它显示了以其他格式获取像素数据的替代方法。

# javascript - jQuery脚本效率

> ID：15850257
> 
> 赞同：2
> 
> 时间：2013-04-06T11:19:27.217
> 
> 标签：javascript, jquery, performance

我使用以下`textfill`在数百个 div 上命名的 jQuery 函数。基本上，它会调整内部文本的大小以适应封闭的 div，从而使文本的字体大小最大，因此较长的文本比较短的文本小，但它们的字体大小最大，以至于它们不会从 div 溢出。

```
; (function($) {
    /**
    * Resizes an inner element's font so that the inner element completely fills the outer element.
    * @version 0.1
    * @param {Object} Options which are maxFontPixels (default=40), innerTag (default='span')
    * @return All outer elements processed
    * @example <div class='mybigdiv filltext'><span>My Text To Resize</span></div>
    */
    $.fn.textfill = function(options) {
        var defaults = {
            maxFontPixels: 40,
            innerTag: 'span'
        };
        var Opts = jQuery.extend(defaults, options);
        return this.each(function() {
            var fontSize = Opts.maxFontPixels;
            var ourText = $(Opts.innerTag + ':visible:first', this);
            var maxHeight = $(this).height();
            var maxWidth = $(this).width();
            var textHeight;
            var textWidth;
            do {
                ourText.css('font-size', fontSize);

                textHeight = ourText.height();
                textWidth = ourText.width();
                fontSize = fontSize - 1;
            } while ((textHeight > maxHeight || textWidth > maxWidth) && fontSize > 3);
            var pos = (maxHeight-textHeight)/2;
            ourText.css('top', pos +'px');
        });
    };
})(jQuery); 
```

因为我在数百个看起来像这样的 div 上运行这个脚本：

```
<div class="textDiv"><span>text appears here</span></div> 
```

同时使用：

```
$('.textDiv').each(function() { $(this).textfill({ maxFontPixels: 28 })}); 
```

根据 div 的数量，需要 40 到 70 秒。我迫切需要调整代码以使其运行得更快。我已经尝试了过去两个小时，但似乎无法让它运行得更快。有人可以帮忙吗？

**编辑：**

从评论中获取一些输入并将代码更改为：

```
var items = document.getElementsByClassName("textDiv");
for (var i = items.length; i--;) {
    $(items[i]).textfill({ maxFontPixels: 28 });
} 
```

它似乎有点快，但仍然很慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:44:57.770

> `$('.textDiv').each(function() { $(this).textfill({ maxFontPixels: 28 })});`

您使用的功能错误。每个（适当的）插件都已经在 jQuery 集合上工作，并且具有`each`内置的，因此您不需要将它放在调用周围。做就是了

```
$('.textDiv').textfill({ maxFontPixels: 28 }); 
```

然而我认为这不是你的实际问题。循环非常快，即使是一百个项目也不需要几秒钟。问题是

```
 ourText.css('font-size', fontSize);
            textHeight = ourText.height();
            textWidth = ourText.width(); 
```

在一个循环中（实际上是在两个嵌套循环中），因为它需要浏览器进行完整的重排。您将需要最小化对这部分的调用，例如通过使用某种二进制搜索 ( [bisection](http://en.wikipedia.org/wiki/Bisection_method) ) 和/或通过应用近似字体大小的[插值](http://en.wikipedia.org/wiki/Interpolation_search)度量（例如，字符数除以区域？）以获得良好的起始值。

除此之外，可能还有其他小的优化：

*   缓存`$(this)`
*   `$(Opts.innerTag + ':visible:first', this);`看起来像一个相当复杂的选择器。这真的有必要吗，你期待隐藏的元素吗？将这些附加功能移到选项中，并`$(this).children().first()`默认使用。
*   我不确定您的 CSS，但是您如何设置 div 的尺寸（您检索为`maxHeight`/ `maxWidth`）？为了在更改内部字体大小时降低回流成本，额外的`overflow:hidden`可以提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T12:38:48.473

显然瓶颈是最内层的循环（下一个是最内层的父级，依此类推）。

为什么不使用“二等分”来找出字体大小？：

对于 200 个 div：

* * *

**二等分解决方案（需要一些重构）：**

[http://jsfiddle.net/nx2n2/8/](http://jsfiddle.net/nx2n2/8/)

```
Time: ~700 
```

**当前解决方案**：

[http://jsfiddle.net/pXL5z/3/](http://jsfiddle.net/pXL5z/3/)

```
Time: ~1400 
```

* * *

最重要的代码：

```
 var change = Math.ceil(fontSize / 2);
        while(true) {
            change = Math.ceil(change / 2);

            var prev = fontSize;
            do {
                fontSize = fontSize - change;
                ourText.css('font-size', fontSize);

                textHeight = ourText.height();
                textWidth = ourText.width();
            } while ((textHeight > maxHeight || textWidth > maxWidth) && fontSize > 3);

            change = Math.ceil(change / 2);            
            while (textHeight < maxHeight && textWidth < maxWidth) {
                fontSize = fontSize + change;
                ourText.css('font-size', fontSize);

                textHeight = ourText.height();
                textWidth = ourText.width();
            }

            var current = fontSize;
            if(prev == current) {
                break;
            }
        }

        // this is because you subtract after change in your original solution
        // only for 'compatibility' with original solution
        fontSize = fontSize - 1; 
```

# c - C:Linux中进程如何通信

> ID：15850258
> 
> 赞同：0
> 
> 时间：2013-04-06T11:19:33.417
> 
> 标签：c, linux, process

我想计算使用 for 1,10 创建的进程数以及执行 fork() si 的位置。该程序在linux中执行。我真的不知道如何使用等待或 WEXITSTATUS，我在论坛上花了几个小时仍然不明白。有人能帮助我吗？

谢谢， 德拉戈斯

```
#include <sys/types.h>
#include <unistd.h>
#include <sys/wait.h>
#include <stdio.h>
#include <stdlib.h>

int nr = 1;

int main()
{

    int pid;
    int i;
    int stare;
    for(i = 1; i<=10 ; i++)
    {

        pid = fork();

        if( pid !=0 )
        {

            //parent
            wait(&stare);
            nr = nr + stare;

        }
        else
        {
            //child
            nr++;
            stare = WEXITSTATUS(nr);
            exit(nr);

        }
    }

    printf("\nNr: %d\n", nr);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:22:11.847

like 宏`WEXITSTATUS`在*父*`wait`进程中用于在调用后获取退出状态。

在子进程中，只需返回`nr`（或将`exit`其作为参数调用）就足够了。

在你使用`WEXITSTATUS`这样的父母：

```
if (wait(&stare) > 0)
{
    if (WIFEXITED(stare))
        nr += WEXITSTATUS(stare);
} 
```

我们必须使用`WIFEXITED`检查，否则退出状态无效。

# android - 使用泰米尔语新闻 API 进行 Android XML 解析

> ID：15850261
> 
> 赞同：2
> 
> 时间：2013-04-06T11:19:45.780
> 
> 标签：android, xml-parsing, rss, xmldocument

我正在使用此 API 进行 XML 解析“ [http://cinema.dinamalar.com/rss.php](http://cinema.dinamalar.com/rss.php) ”以获取列表中的泰米尔语新闻，但它不起作用..请帮助我..这是我的代码..

```
public class MainActivity extends Activity {
  TextView tv1,tv2,tv3;
  String URL = "http://cinema.dinamalar.com/rss.php";

  // XML node keys
  String KEY_ITEM = "item"; // parent node
  String KEY_TITLE = "title";
  String KEY_LINK = "link";
  String KEY_DESC = "description";
  String KEY_DATE = "pubDate";

  @SuppressLint("SetJavaScriptEnabled")
  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    tv1 = (TextView) findViewById(R.id.textView1);
    tv2 = (TextView) findViewById(R.id.textView2);
    tv3 = (TextView) findViewById(R.id.textView3);

    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

    StrictMode.setThreadPolicy(policy);

    XMLParser parser = new XMLParser();

    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element

    //p.getElementsByTagName('Category')[0].firstChild.wholeText

    tv1.setText(parser.getValue((Element) doc.getElementsByTagName(KEY_ITEM).item(0),KEY_TITLE).toString());

    tv2.setText(parser.getValue((Element) doc.getElementsByTagName(KEY_ITEM).item(0),KEY_AUTHOR).toString());
    tv3.setText(parser.getValue((Element) doc.getElementsByTagName(KEY_ITEM).item(0),KEY_LINK).toString());
    Toast.makeText(this,parser.getValue((Element) doc.getElementsByTagName(KEY_ITEM).item(0),KEY_LINK),Toast.LENGTH_SHORT).show();

  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-27T07:41:33.297

首先，您必须了解在 ICS(4.0) 之前，Android 操作系统（少数三星和 SE 手机除外）不支持泰米尔语。即便如此，它也有错误，并且 Jelly Bean (4.2) 提供了全面支持。

如果您在应用程序中使用 Unicode Tamil 字体，您只会看到框。原因是系统中没有泰米尔语字体。

## 1.手动方式

这个解决方案有一个变通方法。您所要做的就是下载 Bamini 字体并将其放在您的资产文件夹中。并使用字体 Bamini 创建 TypeFace 并将其设置为 TextView。

```
Typeface font1 = Typeface.createFromAsset(getAssets(), "fonts/Bamini.ttf");
customText1.setTypeface(font1); 
```

现在使用转换器将 Unicode 字体转换为 Bamini 编码。而不是 Unicode 文本，而是将转换后的 Bamini 编码脚本提供到 setText 方法中。

## 2\. 使用图书馆

如果您讨厌所有这些手动编码转换，请查看此库

正如我在上面所说的，如果您想在运行应用程序时动态更改编码，请考虑使用我为 Android 编写的库。该库将帮助您将 Unicode 字符串转换为 Bamini、TSCII、TAB、TAM 和 Anjal。

设置非常简单。您所要做的就是简单地将库导入您的 Android 项目并调用该库，如下所示。

```
// Initialise the Typeface (assumes TSCII, Bamini, Anjal, TAB or TAM font located inside assets/fonts folder)
Typeface tf = Typeface.createFromAsset(getAssets(),"fonts/mylai.ttf");
// Initialises the TextView
TextView tv = (TextView)findViewById(R.id.textView1);
//Setting the Typeface
tv.setTypeface(tf);
//Magic happens here ;) encoding conversion
String TSCIIString = TamilUtil.convertToTamil(TamilUtil.TSCII, "வணக்கம் அன்ரொயிட்&quot;);
//Setting the new string to TextView
tv.setText(TSCIIString); 
```

该库提供了一个示例应用程序。查看该应用程序，了解如何利用该库将 Unicode 字符串转换为 Bamini、TAB、TAM、TSCII 和 Anjal。

您需要使用 Android 中可用的 TypeFace 类。您可以使用 Bamini 或 TSCII 编码（Mylai 是一种 TSCII 字体）。

# asynchronous - 为 WinRT / Windows 8 开发创建一个异步类

> ID：15850264
> 
> 赞同：0
> 
> 时间：2013-04-06T11:19:52.010
> 
> 标签：asynchronous, windows-8, windows-store-apps, async-await

我正在开发一个 Win 8 应用程序，它需要根据用户输入的数据进行一些可能长时间运行的循环和计算。经常运行此计算以实时更新结果。

计算由计算器类完成。我将使用示例代码给出一个想法

```
public class ResultCalculator
{
    List<Data> Input1 = new List<Data>();
    IQueryable<int> Input2;
    IQueryable<Data2> Input3;

    public ResultCalculator(List<int> items1, List<Data2> items2)
    {
        items1.Sort((x,y) => y.CompareTo(x));
        Input2 = items1.AsQueryable();
        Input3 = items2.AsQueryable().OrderByDescending(w => w.LValue);
    }

    public void CalculateLValues()
    {
        foreach (var v in Input3)
        {
            for (int i = 1; i <= v.Quantity; i++)
            {
                if (Input1.Count > 0)
                {
                    Data existing = FindExisting(v.LValue, 4);

                    if (existing != null)
                    {
                        existing.Add(v.LValue);
                    }
                    else
                    {
                        FindNew(v.LValue);
                    }
                }
                else
                {
                    FindNew(v.LValue);
                }
            }
        }

        OptimisePass1(); 
    }

    public void FindNew(int LValue)
    {
        int options = FindNewItem(LValue, 0);

        if (options != 0)
        {
            Data newdata = new Data(options);
            newdata.Add(LValue);
            Input1.Add(newdata);
        }
    }

    public void OptimisePass1()
    {
        foreach (var w in Input1)
        {
            var ShorterLValues = from sl in Input2 where sl < w.LValue orderby sl select sl;

            foreach (var sl in ShorterLValues)
            {
                if (sl > w.LValue - w.Remaining)
                {
                    w.LValue = sl;
                    w.CalculateRemaining();
                }
            }

    // MORE CALCULATION TO DO IN ANOTHER LOOP
        }
    }

    public Data FindExisting(int LValueRequired, int additionalvalue)
    {
        Input1.OrderBy(w => w.LValue);

        foreach (var sl in Input1.Where(i => i.Remaining > 0).OrderBy(i => i.Remaining))
        {
            if (sl.Remaining >= LValueRequired + additionalvalue)
            {
                return sl;
            }
        }
        return null;
    }

    public int FindNewItem(int LValueRequired)
    {
        foreach (var sl in Input2)
        {
            if (sl >= LValueRequired + 4)
            {
                return sl;
            }
        }
        return 0;
    }

} 
```

此类是从我的 ViewModel 中使用的，如下所示...

```
public async Task UpdateCalculationAsync()
{
    var data1 = new List<int>(sInput);
    var reqlist = new List<Data2>(sInput2);

    var lc = new ResultCalculator(data1, data2);
    NL.Clear();

    await Task.Run(() => lc.CalculateLValues());

    foreach (var i in lc.Data1)
    {
        NL.Add(i);
    }
} 
```

如果列表中有很多项目，如果没有任何异步使用，这会在运行时阻止 UI。所以我添加了“await Task.Run(() => lc.CalculateLValues())”让它异步运行。我对异步有基本的了解，但并不真正了解如何正确地使我的类以异步方式运行。这种方法正确吗？

我相信我所做的会将计算交给后台线程。当然，UI 现在仍然保持响应，并且可以在计算运行时使用。一旦计算出结果，我的视图模型就会得到结果并更新 UI。我真正想要的是让我的 ResultCalculator 类拥有我可以等待的 Task 返回方法。但是，我真的在为如何重构而苦苦挣扎。我什至不确定这是否有效并且是否有效。但我不是 100% 相信这是正确使用异步模式并想检查它是否可以改进？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:27:53.783

建议做这样的事情：

```
// user will do some action on the UI to trigger the compute
public async Task Button1_Click(..)
{
    await this.ViewModel.RecalculateAsync();
}

class ViewModel
{
    public async Task RecalculateAsync()
    {
        var data1 = new List<int>(sInput);
        var reqlist = new List<Data2>(sInput2);
        var lc = new ResultCalculator(data1, data2);
        await Task.Run(() => lc.CalculateLValues());
        // I am not sure that is NL - if it is items like property on viewmodel that is bound to ListView like control in xaml - that should be fine.
        // otherwise, add code here to add the list of result items to an observable collection
        // expose this collection as Items property on viewmodel and bind in xaml to ListView.ItemsSource
    }
} 
```

# css - 在不使用 CSS 断词的情况下防止长词流出 Div

> ID：15850265
> 
> 赞同：5
> 
> 时间：2013-04-06T11:19:55.137
> 
> 标签：css, word-wrap

我有一个 div，所有长词（没有空格）都在 div 之外流动。

请不要将问题标记为[如何防止长文本从容器](https://stackoverflow.com/questions/8048858/how-to-prevent-long-text-from-flowing-out-of-a-container)中流出或[长字从盒子中流出 - 如何防止？](https://stackoverflow.com/questions/8261738/long-words-are-flowing-out-of-the-box-how-to-prevent), 问题通过使用来解决`word-wrap: break-word;`。

的缺点`word-wrap: break-word;`是它还会破坏位于 div 边缘的短词，从而破坏文本的流动。我希望短词保持原样，只打破长词。有可能实现这一点吗？其他网站如何处理？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T15:28:57.570

> 它还破坏了位于 div 边缘的简短单词

那不是真的……`word-wrap: break-word;`不应该那样做。
也许您将此与`word-break: break-all;`属性混淆了（并非在所有浏览器中都有效）。

请参阅此 jsfiddle 进行比较：http: [//jsfiddle.net/Snu8B/3/](http://jsfiddle.net/Snu8B/3/)

对于 Firefox，您可以尝试[hyphens](https://developer.mozilla.org/en-US/docs/CSS/hyphens)属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T17:56:45.660

如果您愿意“隐藏”您可以玩溢出的单词：隐藏

```
.mydiv {
   height  : youchoose;
   width   : youchoose;
   overflow: hidden;
} 
```

除此以外：

```
word-wrap : normal|break-word;
normal    : Break words only at allowed break points
break-word: Allows unbreakable words to be broken

word-break: normal|break-all|hyphenate;
normal    : Breaks non-CJK scripts according to their own rules
break-all : Lines may break between any two characters for non-CJK scripts
hyphenate : Words may be broken at an appropriate hyphenation point 
```

# c# - 如何根据数据表中的某个列值获取不同的列值？

> ID：15850267
> 
> 赞同：0
> 
> 时间：2013-04-06T11:20:11.603
> 
> 标签：c#, winforms, linq, datatable

这是我的数据表：

```
===============================================================    
Question || Qid || Aid || answer_id || subject_id || marks
===============================================================
Q1       || 1   || 1   ||    1      ||     1      || 1   
Q1       || 1   || 2   ||    1      ||     1      || 1
Q1       || 1   || 3   ||    1      ||     1      || 1
Q1       || 1   || 4   ||    1      ||     1      || 1
Q2       || 2   || 5   ||    3      ||     1      || 2   
Q2       || 2   || 6   ||    3      ||     1      || 2
Q2       || 2   || 7   ||    3      ||     1      || 2
Q2       || 2   || 8   ||    3      ||     1      || 2 
```

我想为每个问题获得不同的分数，比如问题 1 的分数是 1，问题 2 的分数是 2，但是如果我使用下面这样的不同关键字，我只会得到 1 或 2 一次

```
var total = (from r in dt.AsEnumerable()
             where r.Field<Int64>("subject_id") == 1
             select r.Field<Int64>("marks")).ToList().Distinct(); 
```

如果我不使用 distinct 我会在 1 个问题中获得 4 次标记字段。

我对linq不太了解，需要帮助。这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:01:52.083

你可以这样做：

```
 var total = (from r in dt.AsEnumerable()
                 where r.Field<Int64>("subject_id") == 1
                 select new { Question = r.Field<string>("Question"), Marks = r.Field<Int64>("marks") }).ToList().Distinct();
    string strC = "";
    foreach (var item in total)
    {
        strC = strC + "<br/>" + "Question: " + item.Question + " Marks: " + item.Marks;

    }
    Response.Write(strC); 
```

这将为您提供如下输出：

```
Question: Q1 Marks: 1
Question: Q2 Marks: 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T12:00:25.867

最后我在前辈的帮助下做到了

```
var total = (from r in dt.AsEnumerable()
             where r.Field<Int64>("subject_id") == 1
             select new { marks = r.Field<Int64>("marks"), QID = r.Field<Int64>("QID") }).ToList().Distinct(); 
```

![它显示了特定问题 ID 的标记](https://i.stack.imgur.com/fcAPE.png)

# c++ - 转动我自己的相机并记录我自己

> ID：15850268
> 
> 赞同：-2
> 
> 时间：2013-04-06T11:20:12.820
> 
> 标签：c++, video, camera

我想转动我自己的相机（已经连接到我的电脑）并记录我自己几秒钟并将其保存到任何类型的文件中......

我搜索了整个互联网，没有找到任何东西......

我正在使用 Windows 7、Visual Studio 2012、C++ ..

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T11:26:34.193

有用于视频安全应用程序的开源解决方案，您也可以使用它们来录制视频......

*   [http://www.ispyconnect.com/](http://www.ispyconnect.com/)
*   [http://www.zoneminder.com](http://www.zoneminder.com)

ispy 适用于 windows（在 w7 上工作），ZoneMinder 适用于 linux，以防万一。作为开源，如果需要，您也可以在您的应用程序中使用它们。

# c# - Linq 将 2 个列表合并为一个

> ID：15850269
> 
> 赞同：2
> 
> 时间：2013-04-06T11:20:23.010
> 
> 标签：c#, .net, linq

例如，我有两个列表：1：

```
 ID | Number
-------------
 01 |   20
 02 |   50
 04 |  2500 
```

2：

```
 ID | Number
-------------
 01 |   10
 02 |   20
 03 |  1500 
```

我想要返回的最终列表是：

```
 ID | Number
-------------
 01 |   30
 02 |   70
 03 |  1500
 04 |  2500 
```

我怎么能用 Linq 做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T11:25:44.080

您可以使用该`Zip`方法。

```
public class MyClass
{
    public int Id { get; set; }
    public string Number { get; set; }
} 
```

然后试试这个：

```
List<MyClass> fist = new List<MyClass>();     //add some data
List<MyClass> second = new List<MyClass>();   //add some data

fist.Zip(second,
          (i1, i2) => new MyClass() { Id = i1.Id, Number = i1.Number + i2.Number }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T11:43:57.550

我找到了答案，

```
var mergedList = list1.Concat(list2)
                  .GroupBy(person => person.ID)
                  .Select(group => group.Aggregate(
                                     (merged, next) => merged.Merge(next)))
                  .ToList(); 
```

感谢您帮助我得到答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T11:26:33.017

您应该加入列表。这是一个例子：

```
public class Item
{
    public int ID { get; set; }
    public int Number { get; set; }
}

List<Item> firstList = new List<Item>();
List<Item> secondList = new List<Item>();

List<Item> finalList = firstList.Join(
    secondList,
    item => item.ID,
    item => item.ID,
    (item, item1) => new Item() { ID = item.ID, Number = item.Number + item1.Number }).ToList(); 
```

# javascript - 滚动到该 div 后如何使 div 固定？

> ID：15850271
> 
> 赞同：77
> 
> 时间：2013-04-06T11:20:36.640
> 
> 标签：javascript, html, css, scroll, css-position

滚动到该位置后如何`div`保持固定`div`？我`div`在页面后面有一个，您需要滚动才能找到它`div`。

如果我使用：

```
.divname {
  position: fixed;
} 
```

将`div`出现在它应该正常出现之前。也许我需要的一个很好的例子是[9gag](https://9gag.com/)上的第二个广告。如果您的屏幕分辨率足够低，则在加载首页后您将看不到该广告，但在您向下滚动后，您会看到第二个广告，并且在您向下滚动时它会保持不变。

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2013-04-06T11:31:14.897

现在只能使用 CSS，请参阅[https://stackoverflow.com/a/53832799/1482443](https://stackoverflow.com/a/53832799/1482443)

* * *

如果有人需要 jQuery 方法，下面是 8 年前发布的原始答案：

我知道这仅标记为 html/css，但您不能仅使用 css 来执行此操作。最简单的方法是使用一些 jQuery。

```
var fixmeTop = $('.fixme').offset().top;       // get initial position of the element

$(window).scroll(function() {                  // assign scroll event listener

    var currentScroll = $(window).scrollTop(); // get current position

    if (currentScroll >= fixmeTop) {           // apply position: fixed if you
        $('.fixme').css({                      // scroll to that element or below it
            position: 'fixed',
            top: '0',
            left: '0'
        });
    } else {                                   // apply position: static
        $('.fixme').css({                      // if you scroll above it
            position: 'static'
        });
    }

}); 
```

[http://jsfiddle.net/5n5MA/2/](http://jsfiddle.net/5n5MA/2/)

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2018-12-18T12:16:01.217

这在 CSS3 中是可能的。只需使用`position: sticky`，如此[处所示](https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_sticky_element)。

```
position: -webkit-sticky; /* Safari & IE */
position: sticky;
top: 0; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-12-31T10:20:07.407

jquery函数最重要

```
<script>
$(function(){
    var stickyHeaderTop = $('#stickytypeheader').offset().top;

    $(window).scroll(function(){
            if( $(window).scrollTop() > stickyHeaderTop ) {
                    $('#stickytypeheader').css({position: 'fixed', top: '0px'});
                    $('#sticky').css('display', 'block');
            } else {
                    $('#stickytypeheader').css({position: 'static', top: '0px'});
                    $('#sticky').css('display', 'none');
            }
    });
});
</script> 
```

然后使用 JQuery 库...

```
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script> 
```

现在使用 HTML

```
<div id="header">
    <p>This text is non sticky</p>
    <p>This text is non sticky</p>
    <p>This text is non sticky</p>
    <p>This text is non sticky</p>
 </div>

<div id="stickytypeheader">
 <table width="100%">
  <tr>
    <td><a href="http://growthpages.com/">Growth pages</a></td>

    <td><a href="http://google.com/">Google</a></td>

    <td><a href="http://yahoo.com/">Yahoo</a></td>

    <td><a href="http://www.bing.com/">Bing</a></td>

    <td><a href="#">Visitor</a></td>
  </tr>
 </table>
</div>

<div id="content">
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,
sed do eiusmod tempor incididunt ut labore et dolore magna
aliqua. Ut enim ad minim veniam, quis nostrud exercitation
ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis
aute irure dolor in reprehenderit in voluptate velit esse
cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat
cupidatat non proident, sunt in culpa qui officia deserunt
mollit anim id est laborum.</p>
</div> 
```

在这里查看[演示](http://jsfiddle.net/Jimmy123/Lk8dLwLv/1/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-10-15T17:25:17.417

添加到`@Alexandre Aimbiré`的答案 - 有时您可能需要指定`z-index:1`在滚动时让元素始终位于顶部。像这样：

```
position: -webkit-sticky; /* Safari & IE */
position: sticky;
top: 0;
z-index: 1; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-22T09:01:46.470

```
<script>
if($(window).width() >= 1200){
    (function($) {
        var element = $('.to_move_content'),
            originalY = element.offset().top;

        // Space between element and top of screen (when scrolling)
        var topMargin = 10;

        // Should probably be set in CSS; but here just for emphasis
        element.css('position', 'relative');

        $(window).on('scroll', function(event) {
            var scrollTop = $(window).scrollTop();

            element.stop(false, false).animate({
                top: scrollTop < originalY
                    ? 0
                    : scrollTop - originalY + topMargin
            }, 0);
        });
    })(jQuery);
} 
```

试试这个 ！只需将类 .to_move_content 添加到您的 div

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-08T09:33:40.440

它对我有用

```
$(document).scroll(function() {
    var y = $(document).scrollTop(), //get page y value 
        header = $("#myarea"); // your div id
    if(y >= 400)  {
        header.css({position: "fixed", "top" : "0", "left" : "0"});
    } else {
        header.css("position", "static");
    }
}); 
```

# winforms - C#如何绘制由平滑曲线连接的多边形

> ID：15850275
> 
> 赞同：0
> 
> 时间：2013-04-06T11:20:51.180
> 
> 标签：winforms, c#-4.0

嗨朋友们，我正在开发一个应用程序，就像 ms paint 一样，因为我想用曲线绘制多边形形状。我使用了 graphicsPath 和 drawcurve 方法，但我无法得到角落。请给我一些想法用曲线绘制多边形。

# php - 保护路由器中的 POST 数据

> ID：15850277
> 
> 赞同：0
> 
> 时间：2013-04-06T11:20:57.873
> 
> 标签：php, oop, model-view-controller, post, front-controller

我试图找出最好的消毒方式，并在某种程度上验证发送到我的应用程序的 POST 数据。

我制作了这个驻留在路由器中的函数，并在`if($_POST)`存在的 __constructor 中调用：

```
private function validatePost()
  {
    foreach($_POST as $key => $value) {
      if(preg_match('/[^a-zA-Z]/', $key))
      {
        $this->throwError('POST Error', 'Invalid index name.');
        return;
      }
      if(strlen($value) > $this->postLimit && $this->postLimit != -1)
      {
        $this->throwError('POST Error', 'Posted value to large.');
        return;
      }
      if(substr($key, -2, 2) == 'id' && !is_numeric($value))
      {
        $this->throwError('POST Error', 'Expected a number, didn\'t get one.');
        return;
      }
      else
      {
        //$value = urlencode($value);
      }
      $_POST[$key] = $value;
    }
  } 
```

故意有点严格，但如果我坚持我在整个框架中制定的规则，这并不重要。

我已经读过限制 $_POST 的大小确实有助于阻止某些攻击，在这种情况下，我将 -1 设置为无/默认限制（但如果需要在我的配置文件中将其设置为更少）。

我注释掉了 urlencoding，因为我目前不确定在达到预期功能时解码它的最佳方式。我应该对它进行编码吗？最好的解码方法是什么？也许在`Controller`我所有课程都延伸的大师中？

欢迎任何其他建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:55:00.407

如果您想限制`POST`请求的大小，那么最好的选择是在网络服务器本身的级别上进行。有一些工具可以做到这一点。由于您最喜欢使用 Apache，因此您可以查看[mod_security](http://www.modsecurity.org/projects/modsecurity/apache/)。其他网络服务器将有类似的选项。

在限制`POST`请求大小时，风险之一是用于执行页面的内存量。如果数据已经在，`$_POST`那么你就来不及了。

至于验证和卫生，它应该在[域对象](http://c2.com/cgi/wiki?DomainObject)、[表示实体](http://martinfowler.com/eaaDev/PresentationModel.html)或[sql](http://www.postgresql.org/docs/9.2/static/ddl-constraints.html)中完成......您验证域对象中输入的逻辑。您对 SQL 约束中的数据结构进行了验证。并且您清理了表示实体中的输出（我没有链接称它们为“表示模型”，因为它增加了对 MVC 的混淆）。

MVC 中的路由机制（这是“前端控制器的一个方面”）应该只接受用户的输入并将其组织在结构化`Request`实例中。然后控制器的操作使用该实例将数据传递到[模型层](https://stackoverflow.com/a/5864000/727208)。

路由不应该验证输入。

# php - 将数据插入具有相同主键的多个表中

> ID：15850279
> 
> 赞同：0
> 
> 时间：2013-04-06T11:21:09.573
> 
> 标签：php, mysql, sql, database

我有两张桌子，`std_personal`就像`std_education`这样：

```
std_personal :
+----------------------+
| id |  name | family  |
+----------------------+

std_education :
+----------------------+ 
| related_std |  grade |
+----------------------+ 
```

`std_education.related_std`必须等于`std_personal.id` 如何使用 1 个查询在这两个不同的表中插入数据？我的问题是`std_personal.id`当我想插入时它不存在`std_education.related_std` :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T11:24:26.297

您不能在只有 1 个查询的两个表中插入数据。

您必须首先将数据添加到您的第一个表中，生成主键，然后 使用此主键`std_personal`将数据插入到您的第二个表中。`std_education`

您可能需要介绍外键概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T11:29:01.240

您应该使用存储过程或使用 2 个插入和 1 个选择命令。

第一的

```
 insert into std_personal (id,name,family) values(1,'testname','testfamily') 
```

第二

```
 select id from std_personal where name ='testname' and family ='testfamily' 
```

第三

```
 insert into std_education (related_std ,grade) values(id_returned_from_db, 'A+') 
```

或者编写一个存储过程，通过一次 PHP 调用来完成这三个步骤

这是存储的生产者

```
 Create PROCEDURE [dbo].[TWO_INSERTS_WITH_ONE_WUERY]      
                                              (@name nvarchar(50),@surname nvarchar(50),@grade nvarchar(3))
 AS
 BEGIN

 declare @id int;

 insert into std_personal (id,name,family) values(1,@name,@surname)

 select @id=id from std_personal where name =@name and family =@surname

 insert into std_education (related_std ,grade) values(@id, @grade)

 END

 GO 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T11:53:25.113

查看您的架构，您只有一份个人数据和一份教育数据。通常，一个人会有多个教育记录。考虑到这一点，您应该在 std_personal 和 std_education 之间使用一对多的关系。如果你这样做，你应该

*   开始交易
*   插入 std_personal
*   获取主键
*   使用个人主键作为外键插入 std_education
*   结束交易

如果发生任何错误，您将使用 try catch 块并回滚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T11:48:17.713

你不能在一个查询中做到这一点，我认为这是不可能的，但你可以这样做，

首先将数据插入**std_personal**

```
insert into std_personal (id,name,family) values(0,'name','family'); 
```

然后从表**std_personal中的最后一条记录中获取 id**

```
select id from std_personal order by id desc  limit 1; 
```

最后将数据插入std_education。

```
insert into std_education (related_std ,grade) values(id_from_select, 'grade'); 
```

# c++ - 如何在函数中使用计数器

> ID：15850284
> 
> 赞同：1
> 
> 时间：2013-04-06T11:21:25.790
> 
> 标签：c++

我正在尝试让一个程序根据用户输入的数字打印出一个星号，例如 10-20 = 1 之间的数字等。我的问题是我不知道如何让打印功能发挥作用目前它没有打印任何东西。任何人都可以帮忙。

代码：

```
void readExamMarks(int examMarks[], int sizeOfArray, int counter1, int counter2){

cout << "Please enter a set of exam marks to see a histogram for:" << endl;
int x = 0;

for( int idx = 0; idx < sizeOfArray; idx++){
    cin >> x;
     if((x >=0) && (x <= 100)){
            x = x/10;

            switch(x){
            case 1:
                counter1++;

                break;
            case 2:
                counter2++;
                break;

            }

            examMarks[idx] = x;
        }
             else{
             cout << "ERROR: Value must be in range [0...100], please    enter a valid value\n"; 
         }
}
}

void printExamMarks(int examMarks[], int sizeOfArray){

for(int x = 0; x < sizeOfArray; x++){

    cout << setw(5) << examMarks[x];
}
cout << endl;
}

void printHisto(int examMarks[], int sizeOfArray,int counter1, int counter2){
system("cls");

while(counter1 != 0){
    cout << "*" << endl;
    counter1--;
}
for( int x = 0; x < counter1; x++){
cout << setw(5) << "*" << endl;
}
 }

int main() 
{ 
int examMarks[20];
int counter1 = 0;
int counter2 = 0;

readExamMarks(examMarks, 5, counter1, counter2);
printHisto(examMarks, 5, counter1, counter2);
printExamMarks(examMarks,5);

system("PAUSE");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T11:26:40.323

您的代码有点奇怪，我在遵循它时遇到了一些麻烦。但我认为你犯的错误是你假设因为你增加了变量`counter1`，然后`counter2`在`readExamMarks`某种程度上会影响和`counter1`的`counter2`值`printHisto`。这不是真的。您更改 in 的值，`readExamMarks`但这对 in 的变量没有影响`main`，因此当您调用时`printHisto` `counter1`，并且`counter2`仍然为零。

你应该明白的是，不同函数中的变量即使同名也是不同的变量。如果要`readExamMarks`更改变量，`main`则应使用引用。

```
void readExamMarks(int examMarks[], int sizeOfArray, int& counter1, int& counter2)
{
    ...
} 
```

通过使用`int&`而不是`int` `counter1`和`counter2`现在是对变量的*引用*`main`，而不是main 中变量的*副本*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:33:13.810

```
printHisto(examMarks, 5, counter1, counter2); 
```

不会打印任何内容，原因是 counter1 和 counter2 初始化为 0，它们按原样传递给 printHisto(...)，我猜你打算 readExamMarks(...) 来修改你的 counter(1,2) ，如果是这种情况，请通过参考[http://www.cplusplus.com/doc/tutorial/functions2/传递它们](http://www.cplusplus.com/doc/tutorial/functions2/)

# javascript - 从服务器下载流式传输视频

> ID：15850286
> 
> 赞同：3
> 
> 时间：2013-04-06T11:21:47.137
> 
> 标签：javascript, html, video-streaming

我确定这毕竟可能是一个愚蠢的问题，但我有一个个人项目，我想开发一个带有 html5 视频的应用程序网站，该视频缓冲来自托管文件的服务器服务 (mega.co.nz) 的视频，Mega 提供一个用于基础操作的 API，我想要的只是缓冲视频，但我对流媒体事务中的所有问题了解模糊，我进行了详尽的搜索，但没有找到太多东西，或者我对这些术语的搜索非常模糊，如果有人可以向我发布有关在 javascript 和 html5 下进行流式缓冲的页面资源，我将不胜感激 :)

问候！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T11:36:45.920

我不确定我是否完全明白了。如果您想要在`HTML5`页面中显示由远程服务托管的视频，我们通常会这样做：

```
<video width="width_in_pixels" height="height_in_pixels" controls>
  <source src="your_url.mp4" type="video/mp4">
  <source src="your_url.ogg" type="video/ogg">
  <!-- a list of the different mime types available for your video -->
</video> 
```

这是HTML5[支持的视频格式列表。](http://en.wikipedia.org/wiki/HTML5_video#Supported_video_formats)

编辑 ：

虽然某些 Web 服务（如 Mega）提供加密的临时 URL，但我们在我公司所做的是使用流代理。我们在内部使用了一个小型 HTTP 服务器，它可以接收以下请求：

```
http://streaming_server/fetch?url=<a_url>&type=youtube-api&api-version=1 
```

上面的示例适用于我们想要转换为连续数据流的 Youtube url。服务器在内部将公共 url 转换为 .mp4 并通过 HTTP 将他从 Youtube 服务器接收的数据发回。

因此，您可以做的是自己编写一个模块化流服务器（因此它可以与 Mega 或 Fileserve 或其他任何东西一起使用），它能够处理处理 Mega 的 API 的特定请求，就像我们对 Youtube 所做的那样：

```
http://your_streaming_server/fetch?type=mega-api&file_id=<id>&file_key=<key> 
```

这会将文件原始数据转发给客户端。这只是一个示例，凭据管理或检索的其他安全方面取决于您，但您明白了。

将下载数据的责任委托给第三方服务是一个好主意，因为这将使您的代码与特定功能部分分离，并将在所有客户端应用程序中提供相同的服务。

# haskell - 具有两个合并函数 asc 和 desc 的 Haskell 合并排序

> ID：15850287
> 
> 赞同：1
> 
> 时间：2013-04-06T11:21:48.087
> 
> 标签：haskell, mergesort

我想利用归并排序算法。**mergeSort**是等待合并函数作为第一个参数的主要函数。有谁知道，我的问题出在哪里？非常感谢您提前。

```
mergeSort xs = merge xs
mergeDesc xs = reverse (mergeAsc xs)
mergeAsc [] = []
mergeAsc [x] = [x]
mergeAsc xs = merge (mergeAsc top) (mergeAsc bottom) where (top, bottom) = splitAt (length xs `div` 2) xs
merge [] ys = ys
merge xs [] = xs
merge (x:xs) (y:ys) | x <= y    = x : merge xs (y:ys)
                    | otherwise = y : merge (x:xs) ys 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T11:27:31.157

将类型签名添加到您的函数中，那么问题就变得很明显了：

```
mergeAsc, mergeDesc :: Ord a => [a] -> [a]

mergeDesc xs = reverse (mergeAsc xs)
mergeAsc [] = []
mergeAsc [x] = [x]
mergeAsc xs = merge (mergeAsc top) (mergeAsc bottom) where (top, bottom) = splitAt (length xs `div` 2) xs

merge :: Ord a => [a] -> [a] -> [a]
merge [] ys = ys
merge xs [] = xs
merge (x:xs) (y:ys) | x <= y    = x : merge xs (y:ys)
                    | otherwise = y : merge (x:xs) ys 
```

因此，如果您定义`mergeSort`为`merge`，它是一个仅合并两个有序列表的函数，而您实际上希望它对单个列表进行排序。你可以用

```
mergeSort xs = mergeAsc xs 
```

或者简单而可取地，

```
mergeSort = margeAsc 
```

* * *

请注意这`mergeDesc`不是很好：您首先以错误的顺序对列表进行排序，然后将其反转？在 Haskell 中，你希望你的算法足够灵活，可以自己处理不同的排序。所以你会定义

```
mergeSortBy :: (a->a->Ordering) -> [a] -> [a]
mergeSortBy cmp = mSort
 where 
       mSort [] = []
       mSort [x] = [x]
       mSort xs = merge (mSort top) (mSort bottom)
        where (top, bottom) = splitAt (length xs `quot` 2) xs

       merge [] ys = ys
       merge xs [] = xs
       merge (x:xs) (y:ys) = case x`cmp`y of
          LT  -> x : merge xs (y:ys)
          _   -> y : merge (x:xs) ys 
```

然后您可以简单地定义`mergeSort = mergeSortBy compare`和`mergeSortDesc = mergeSortBy (flip compare)`。

还要观察创建`merge`本地函数如何防止您在实现中遇到的错误。

* * *

> 它说它应该声明为：mergeSort :: ([a]->[a]->[a]) -> [a] -> [a] 作为接受合并函数作为第一个参数的函数。 ..

这很奇怪，它不应该被称为`mergeSort`但是`sortWithMerge`或什么的。无论如何，这样做很简单：只需抛出`cmp`（仅在`merge`子函数中使用！）并将其替换为 merge 作为参数，而不是在本地定义它。

```
sortWithMerge :: ([a]->[a]->[a]) -> [a] -> [a]
sortWithMerge merger = mSort
 where 
       mSort [] = []
       mSort [x] = [x]
       mSort xs = merger (mSort top) (mSort bottom)
        where (top, bottom) = splitAt (length xs `quot` 2) xs 
```

# c# - 每个 azure 实例都运行 cron 吗？

> ID：15850291
> 
> 赞同：8
> 
> 时间：2013-04-06T11:22:11.933
> 
> 标签：c#, asp.net, azure, cron, scheduled-tasks

我正在开发一个 ASP.NET 应用程序，它将被上传到 Azure。如果我在 Azure 上有多个实例，并且我想运行我的应用程序所必需的 cron 作业。然后，我只想确认该 cron 作业是否只运行一次，或者每个实例将自行运行该 cron？

例如：如果我在 Azure 上有 4 个云服务实例，并且我的应用程序每天晚上 11:00 运行一个 cron 作业。所以，我只想确认该 cron 是否将只运行一次，或者每个实例将自行运行该 cron（即 cron 将运行 4 次，或者我们可以说每个实例运行一次）？

请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T11:35:14.930

到目前为止，我已经找到了 3 种执行 cron 作业的方法，但它们都需要在一定程度上管理可能运行任务的多个实例。

到目前为止我使用的选择：

1.  Windows 任务计划程序 - 创建一个启动脚本，添加用户并为其安排任务。此处的更多信息：[以真实用户身份运行 Azure 启动任务](http://www.davidaiken.com/tag/startup-tasks/)和此处：[在 Windows Azure 中构建任务计划程序](http://blog.smarx.com/posts/building-a-task-scheduler-in-windows-azure)

2.  使用 Quartz.Net - 这是我开始使用的，但后来转移到 Windows 任务调度程序，但它可能对您有用，因为您可以更轻松地自定义内容。更多信息在这里：[使用 Quartz.net 在 Windows.Azure 工作角色中安排作业](http://alexandrebrisebois.wordpress.com/2013/01/20/using-quartz-net-to-schedule-jobs-in-windows-azure-worker-roles/)

3.  在移动服务中使用新的作业调度程序。我没有使用过这个，但是当我阅读这篇博客时：去年年底[在 Windows Azure 中的作业调度](http://fabriccontroller.net/blog/posts/job-scheduling-in-windows-azure/)我把它放在了我的心理清单上，以便下次我需要一个作业调度器时看看。它仍然有点新，但它也可能对您有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T11:26:24.517

在您的示例中，所有 4 个实例都将尝试运行 cron 作业。如果您只想让一个实例运行该作业，则需要实现某种“锁定”机制。通常人们所做的是每个实例都会尝试在同一个 blob 上获得 1 分钟的租约。只有一个实例会成功获得租约。您可以设置只有能够获取租约的实例才执行该 cron 作业的逻辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T13:09:31.947

正如其他用户所说，有很多方法可以做到这一点。我补充几点建议。您是否开发了 Cloude 服务 Web 角色或网站。如果是前者，最简单的方法是创建 1 个工作角色（只有一个）并从那里运行任务。对于后者，您需要一个外部“触发器”：您可以使用调度程序（由 Aditi 提供）。您可以从 Azure 商店获得它（有一个免费的 flan）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T13:28:34.890

如果一个角色（Web/Worker/VM 角色）有多个实例，则意味着您拥有相同的 Windows Server VM 帐户（版本取决于您配置的来宾操作系统版本）。每个 VM 将运行与您的应用程序完全相同的代码（如 ASP.NET Web 应用程序），对这个角色的所有请求都将进行负载平衡，其中一个 VM 将根据循环策略切断请求。

因此，如果您的 cron 作业只需​​要运行一次，正如 Guarav 所说，您需要一些锁定机制来让您的角色实例之一运行它。

# java - 如何在 Java 中有效地计算 CSV 文件的行数

> ID：15850301
> 
> 赞同：0
> 
> 时间：2013-04-06T11:23:02.113
> 
> 标签：java, sql, database, csv, jdbc

我开发了一个代码，它打开一个 CSV 文件并使用 for 循环计算行数，但我觉得这种方法效率不高并且会导致一些延迟。

*   `TargetFile.mdb`有 120 行
*   `report.csv`有 11000 行

如果我使用此方法，则需要运行代码`120*11000=1320000 times`来计算每个资源计数。这是我的代码：

这是 Xavier Delamotte 有效计算行数的新代码：

```
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.sql.SQLException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import au.com.bytecode.opencsv.CSVReader;

import com.healthmarketscience.jackcess.Database;
import com.healthmarketscience.jackcess.Table;

public class newcount {

    public static class ValueKey{
        String mdmId;
        String pgName;

        @Override
        public int hashCode() {
            final int prime = 31;
            int result = 1;
            result = prime * result + ((mdmId == null) ? 0 : mdmId.hashCode());
            result = prime * result
                + ((pgName == null) ? 0 : pgName.hashCode());
            return result;
        }
        @Override
        public boolean equals(Object obj) {
            if (this == obj)
                return true;
            if (obj == null)
                return false;
            if (getClass() != obj.getClass())
                return false;
            ValueKey other = (ValueKey) obj;
            if (mdmId == null) {
                if (other.mdmId != null)
                    return false;
            } else if (!mdmId.equals(other.mdmId))
                return false;
            if (pgName == null) {
                if (other.pgName != null)
                    return false;
            } else if (!pgName.equals(other.pgName))
                return false;
            return true;
        }
        public ValueKey(String mdmId, String pgName) {
            super();
            this.mdmId = mdmId;
            this.pgName = pgName;
        }
    }

    public static void main(String[] args) throws IOException, SQLException,Throwable{

        Integer count;

        String MDMID,NAME,PGNAME,PGTARGET,TEAM;

        Table RESOURCES = Database.open(new File("C:/STATS/TargetFile.mdb")).getTable("RESOURCES");
        int pcount = RESOURCES.getRowCount();

        String csvFilename = "C:\\MDMSTATS\\APEX\\report.csv";
        CSVReader csvReader = new CSVReader(new FileReader(csvFilename));
        List<String[]> content = csvReader.readAll();
        Map<ValueKey, Integer> csvValuesCount = new HashMap<ValueKey, Integer>();
        for (String[] rowcsv  : content) {
            ValueKey key = new ValueKey(rowcsv[6], rowcsv[1]);
            count = csvValuesCount.get(key);
            csvValuesCount.put(key,count == null ? 1: count + 1);

        }

        //int count = 0;
        // Taking 1st resource data
        for (int i = 0; i < pcount-25; i++) {
            Map<String, Object> row = RESOURCES.getNextRow();
            TEAM = row.get("TEAM").toString();
            MDMID = row.get("MDM ID").toString();
            NAME = row.get("RESOURCE NAME").toString();
            PGNAME = row.get("PG NAME").toString();
            PGTARGET = row.get("PG TARGET").toString();
            int PGTARGETI = Integer.parseInt(PGTARGET);
            Integer countInteger = csvValuesCount.get(new ValueKey(MDMID, PGNAME));
            count = countInteger == null ? 0: countInteger;
            System.out.println(NAME+"\t"+PGNAME+"\t"+count);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T11:40:07.537

我建议只读取一次 csv 文件，并计算由 mdmId 和 pgName 组成的密钥的出现次数。

如果你有番石榴，你可以使用`MultiSet<ValueKey>` [http://guava-libraries.googlecode.com/svn-history/r8/trunk/javadoc/com/google/common/collect/Multiset.html](http://guava-libraries.googlecode.com/svn-history/r8/trunk/javadoc/com/google/common/collect/Multiset.html)而不是`Map<ValueKey,Integer>`

编辑：要使用 ValueKey 类，您需要放入另一个文件或将其声明为静态。

类值键：

```
 public static class ValueKey{
        String mdmId;
        String pgName;
        @Override
        public int hashCode() {
            final int prime = 31;
            int result = 1;
            result = prime * result + ((mdmId == null) ? 0 : mdmId.hashCode());
            result = prime * result
                    + ((pgName == null) ? 0 : pgName.hashCode());
            return result;
        }
        @Override
        public boolean equals(Object obj) {
            if (this == obj)
                return true;
            if (obj == null)
                return false;
            if (getClass() != obj.getClass())
                return false;
            ValueKey other = (ValueKey) obj;
            if (mdmId == null) {
                if (other.mdmId != null)
                    return false;
            } else if (!mdmId.equals(other.mdmId))
                return false;
            if (pgName == null) {
                if (other.pgName != null)
                    return false;
            } else if (!pgName.equals(other.pgName))
                return false;
            return true;
        }
        public ValueKey(String mdmId, String pgName) {
            super();
            this.mdmId = mdmId;
            this.pgName = pgName;
        }
    } 
```

你的方法：

```
 Table RESOURCES = Database.open(new File("TargetFile.mdb")).getTable("RESOURCES");
    int pcount = RESOURCES.getRowCount();

    String csvFilename = "C:\\STATS\\APEX\\report.csv";
    CSVReader csvReader = new CSVReader(new FileReader(csvFilename));
    List<String[]> content = csvReader.readAll();
    Map<ValueKey, Integer> csvValuesCount = new HashMap<ValueKey, Integer>();
    for (String[] rowcsv  : content) {
        ValueKey key = new ValueKey(rowcsv[6], rowcsv[1]);
        Integer count = csvValuesCount.get(key);
        csvValuesCount.put(key,count == null ? 1: count + 1);

    }

    int count = 0;
    // Taking 1st resource data
    for (int i = 0; i < pcount; i++) {
        Map<String, Object> row = RESOURCES.getNextRow();
        TEAM = row.get("TEAM").toString();
        MDMID = row.get("MDM ID").toString();
        NAME = row.get("RESOURCE NAME").toString();
        PGNAME = row.get("PG NAME").toString();
        PGTARGET = row.get("PG TARGET").toString();
        int PGTARGETI = Integer.parseInt(PGTARGET);
        Integer countInteger = csvValuesCount.get(new ValueKey(MDMID, PGNAME));
        count = countInteger == null ? 0: countInteger;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:32:35.150

亲爱的朋友我建议你使用[OpenCSV](http://opencsv.sourceforge.net/)

我认为它可以满足您的要求；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T11:37:18.707

首先阅读 CSV，制作一组字段 6 值，并使用它来更新计数。这应该很快。

```
//open csv and make lookup set
Set<String> mdmids = new HashSet<String>() 
String[] rowcsv = null;
String csvFilename = "C:\\STATS\\APEX\\report.csv";
CSVReader csvReader = new CSVReader(new FileReader(csvFilename));
List content = csvReader.readAll();

for (Object object : content) {
    rowcsv = (String[]) object;             
       mdmids.add(rowcsv[6])
}
Table RESOURCES = Database.open(new File("TargetFile.mdb")).getTable("RESOURCES");
pcount = RESOURCES.getRowCount();
count = 0;
// Taking 1st resource data
for (i = 0; i < pcount; i++){
Map<String, Object> row = RESOURCES.getNextRow();                            
    TEAM = row.get("TEAM").toString();
MDMID = row.get("MDM ID").toString();
NAME = row.get("RESOURCE NAME").toString();
PGNAME = row.get("PG NAME").toString();
PGTARGET = row.get("PG TARGET").toString();
int PGTARGETI = Integer.parseInt(PGTARGET);

// use lookup set
if(mdmids.contains(MDMID)) {
    count++;
}
} 
```

# jquery - 如何使用 jQuery 制作可编辑的列表项？

> ID：15850303
> 
> 赞同：4
> 
> 时间：2013-04-06T11:23:09.970
> 
> 标签：jquery, html, cordova, jquery-mobile, jquery-plugins

我想在列表视图中显示用户信息，其中包含从数据库中提取的数据。现在我的目标是使列表视图可编辑，以便当用户单击任何列表视图时，它会像“文本框”一样响应并出现键盘（用于移动设备）。编辑完成后，用户可以按“保存”按钮将他/她的可编辑内容保存到数据库中。我将 HTML、jQuery 和 CSS 与 Adob​​e PhoneGap API 一起使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T11:30:12.767

我创建了一个小提琴，我认为这就是你想要的：

[http://jsbin.com/ijexak/2/edit](http://jsbin.com/ijexak/2/edit)

在小提琴上单击要编辑的文本，然后在输入元素的 focusOut 上，您的文本将保存并且输入元素将隐藏。

**更新**

我检查了你的评论，你应该试试这个：

*html*

```
 <ul>
       <li>
           <span class="display">erum</span>
           <input type="text" class="edit" style="display:none"/>
       </li>
       <li>
           <span class="display">ingress</span>
           <input type="text" class="edit" style="display:none"/>
       </li>
   </ul> 
```

*JS*

```
$(".display").click(function(){
    $(this).hide().siblings(".edit").show().val($(this).text()).focus();
});

$(".edit").focusout(function(){
    $(this).hide().siblings(".display").show().text($(this).val());
}); 
```

[**更新的小提琴**](http://jsfiddle.net/uenZW/2/)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-14T12:17:38.057

`<li contenteditable="true"> Editablecontent </li>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T11:29:44.373

1.  在您的列表项上附加一个点击事件。
2.  单击时删除项目的内容并将其替换为带有输入框和按钮的表单
3.  重新定义表单的提交事件以对数据库执行所需的操作
4.  删除表单并将修改后的项目重新插入列表中。

# ios - AVPlayer 的控件

> ID：15850306
> 
> 赞同：3
> 
> 时间：2013-04-06T11:23:19.573
> 
> 标签：ios, avplayer

我正在使用`AVPlayer`在我的 iOS 应用程序中显示视频。现在我需要一些漂亮的控件来控制上一个、下一个和播放/暂停按钮。默认情况下`AVPlayer`不附带任何。

我想知道，是否有任何开源组件可以直接用于此类控件？我实际上只想要使用相同的控件`MPMoviePlayerController`。但我想这是不可能的，除非我完全伪造它们。

我可以自己创建它们，但我不想重新发明轮子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T03:25:34.823

这是一个非常好的。BeamApp

[https://github.com/BeamApp/MusicPlayerViewController](https://github.com/BeamApp/MusicPlayerViewController)

# joomla - Joomla 2.5 模块不会上传媒体文件夹

> ID：15850307
> 
> 赞同：0
> 
> 时间：2013-04-06T11:23:26.700
> 
> 标签：joomla, module

如何在我的 Joomla 模块中上传 css 文件？清单文件是：

```
<files>
    <filename>mod_wforcsliderresz.xml</filename>
    <filename module="mod_wforcsliderresz">mod_wforcsliderresz.php</filename>
    <filename>index.html</filename>
    <filename>helper.php</filename>
    <folder>tmpl</folder>
</files>    
<media folder="media" destination="mod_wforcsliderresz">
        <folder>css4c</folder>
</media>   
<languages>
    <!-- Any language files included with the module -->
    <language tag="en-GB">en-GB.mod_wforcsliderresz.ini</language>
</languages> 
```

我可以通过直接上传 css 来克服这个问题，但这不是一个长期的解决方案。
我已经通过 FTP 检查了新创建的文件夹 media/mod_wforcsliderresz/css，但媒体中没有 mod_wforcsliderresz 子文件夹。

我还尝试在 tmpl 定义上方添加一个 cssstfff ，但这不起作用。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:30:11.313

我认为你的 css 文件夹

`css4c` （如果存在），上传到`media/media/mod_wforcsliderresz/css4c`

请注意，它是`media/media`.If 你要删除

`folder="media"`从`<media folder="media" destination="mod_wforcsliderresz">`

那么它将在`media/mod_wforcsliderresz/css4c`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T12:51:58.677

尝试改变这个：

```
<media folder="media" destination="mod_wforcsliderresz">
        <folder>css4c</folder>
</media> 
```

对此：

```
<media folder="mod_wforcsliderresz">
        <folder>css4c</folder>
</media> 
```

# asp.net - 跟踪网站上的用户

> ID：15850309
> 
> 赞同：0
> 
> 时间：2013-04-06T11:23:39.493
> 
> 标签：asp.net, http

我想通过 HTTP 会话在现场跟踪用户。意味着单次访问被视为单次 HTTP 会话。

我们需要这样做，以便在用户浏览某些页面时不会在表中添加多个条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:26:56.873

如果您正在使用，`form-authentication`那么您可以使用`global`方法`session_start`
这里是一个可以帮助您的链接。
[http://msdn.microsoft.com/en-us/library/ms178583.aspx](http://msdn.microsoft.com/en-us/library/ms178583.aspx)

# c# - 如何设置 System.Data.SQLite.dll

> ID：15850315
> 
> 赞同：3
> 
> 时间：2013-04-06T11:25:06.973
> 
> 标签：c#, wpf, sqlite

我有一个使用 sqlite 的应用程序...

我试过这个：

1.  通过 ClickOnce 应用程序安装程序安装（有效）
2.  我将 SQLite.dll 文件与 .exe 放在同一个文件夹中。（有用}
3.  嗯，只有 .exe 的文件夹（不工作）

我的意思是，当您构建项目并在文件夹 \bin\Debug 上获取 .exe 并将其移动到某个位置时，当您运行应用程序时，将不会发生错误。

我想知道是否有一种方法可以在不安装 ClickOnce 应用程序设置的情况下运行？

我想在特定路径参考上设置 SQLite.dll？有可能这样做吗？

-谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:30:23.257

`System.Data.SQLite.dll`不是标准 .NET Framework 的一部分，因此在最初安装 .NET 运行时时它不会安装在客户端计算机的 GAC 中。

这就是为什么你应该让你的可执行文件引用这个 dll 的原因，这些 dll 一起分布在与你的 exe 部署相同的文件夹中。

或者您可以将其分发到其他地方，例如在应用程序设置的子文件夹中，并在配置文件或 .NET C# 代码中具有适当的条目，以指定必须从何处加载标准位置中未找到的程序集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T11:36:26.763

您可以使用[**Nuget**](http://www.nuget.org/packages/System.Data.SQLite)来安装软件包。对于我的情况，它自动为我创建了 2 个子文件夹，即 x86 和 x64，我只是按照 bin 文件夹中的文件夹结构，它对我的​​情况很好。

![在此处输入图像描述](https://i.stack.imgur.com/71n25.png) ![在此处输入图像描述](https://i.stack.imgur.com/u9Vp6.png) ![在此处输入图像描述](https://i.stack.imgur.com/7Kavd.png)

# sql - 从 Sql 表中选择项目编号

> ID：15850316
> 
> 赞同：0
> 
> 时间：2013-04-06T11:25:19.493
> 
> 标签：sql

II 在 sql 中有两个表

```
1.inventtable(itemnumber)
2.etext(itemnumber,Rkey,Rval,Lang,id,text) 
```

我想从 inventtable 中选择项目编号，其中项目编号与 etext 表中的项目编号相同，并且 etext 表中的项目编号包含 Rkey=1,rval=1,id=2)。如何实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T11:52:22.390

试试这个：

```
select i.itemnumber
from inventtable i 
join etext e on i.itemnumber = e.itemnumber
where e.Rkey = 1 and e.rval =1 and e.id =2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:27:54.497

```
select i.itemnumber 
from inventtable i inner join etext e     
on i.itemnumber = e.itemnumber
where e.Rkey = 1 
and e.rval =1 
and e.id =2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T11:29:16.677

```
Select itemnumber From  inventtable
Where inventtable in (Select itemnumber From  etext Where  Rkey=1 AND rval=1  AND id=2 ) 
```

# c# - c# - 提到 ListBoxt 时出现 StackOverFlowException？

> ID：15850317
> 
> 赞同：0
> 
> 时间：2013-04-06T11:25:21.553
> 
> 标签：c#, winforms

当我单击 buttonOpenAlbum 并在 AlbumListBox 中选择了一个项目时，我试图打开一个新表单 (FormAlbum)。

如果我只是在 buttonOpenAlbum_Click 中有这个：

```
private void buttonOpenAlbum_Click(object sender, EventArgs e)
{
        FormAlbum MusicForm = new FormAlbum(this);
        MusicForm.ShowDialog();
} 
```

新的 from 打开没有错误。但是，只要我提到“AlbumListBox.SelectedItem”（如下面的 FormFormMain 代码），我就会在以下位置收到“StackOverflowException was unhandled”：

```
public ListBox AlbumListBox
{
    get
    { // <-This bracket here is where the error highlights 
```

我不明白为什么会出现此错误，只是它必须与 AlbumListBox 有关。我究竟做错了什么？任何帮助表示赞赏，谢谢。

窗体主窗体：

```
public FormMain()
{
    InitializeComponent();
}

private void buttonAddAlbum_Click(object sender, EventArgs e)
{
    FormAlbumAC addAlbumForm = new FormAlbumAC(this);
    addAlbumForm.ShowDialog();
}

private void buttonOpenAlbum_Click(object sender, EventArgs e)
{
    if (AlbumListBox.SelectedItem != null)
    {
        MessageBox.Show(AlbumListBox.SelectedItem.ToString());
        FormAlbum MusicForm = new FormAlbum(this);
        MusicForm.ShowDialog();
    }
    else
    {
        MessageBox.Show("You need to select an album from the list to open.");
    }
}

public static class PublicVars
{
    public static List<Album> AlbumList { get; set; }

    static PublicVars()
    {
        AlbumList = new List<Album>(MAX_ALBUMS);
    }
}

public ListBox AlbumListBox
{
    get
    {
        return AlbumListBox;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T11:26:36.427

查看您的属性实现：

```
public ListBox AlbumListBox
{
    get
    {
        return AlbumListBox;
    }
} 
```

它只是递归地调用自己。如果我们将其转换为方法，可能会更容易看出：

```
public ListBox GetAlbumListBox()
{
    return GetAlbumListBox();
} 
```

这就是为什么你有一个溢出。不清楚你的*意思是*什么......你期望价值来自哪里？您可能需要一个变量来支持该属性。您期望*设置*返回的值是什么？

我也*强烈*反对`PublicVars`课程的设计。除了命名之外，您基本上是在使用全局变量——这不是一个好主意。找出哪些类需要访问数据，以及如何适当地获取这些数据。

# character-encoding - 通过 apache HTTPClient 传递特殊字符

> ID：15850322
> 
> 赞同：1
> 
> 时间：2013-04-06T11:25:33.283
> 
> 标签：character-encoding

我有一个 servlet，它接受 HTML 内容作为请求参数的一部分。HTML 是本地化的，可能是法语、西班牙语等...内容。我还使用 apache HTTP 客户端向该 servlet 发出请求以进行测试，该 servlet 具有以下标头定义：

```
HttpClient client = new HttpClient();

PostMethod method = new PostMethod("<URL>");
String html = FileUtils.readFileToString(inputHTMLFile, "UTF-8");
method.addParameter("html", html);

method.addRequestHeader("Accept", "*/*");    
method.setRequestHeader("accept-charset", "UTF-8"); 
```

读取的任何 HTML 都具有 utf-8 字符编码，示例文本：

```
Télécharger un fichier 
```

但是，当我从文本变为的请求参数中获取 html 时`T?l?charger un fichier`

我浏览了一些链接，例如[http://www.oracle.com/technetwork/articles/javase/httpcharset-142283.html](http://www.oracle.com/technetwork/articles/javase/httpcharset-142283.html)，其中讨论了字符集以及浏览器通常如何编码特殊字符。如果我要使用 UTF-8 对 html 进行 URLEncode，然后在 servlet 中使用相同的字符集对其进行解码，我会得到预期的 HTML。

这是我唯一能做的来保存字符集吗？我错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T14:58:08.813

既然文件本身的问题已经解决，请尝试按如下方式修改您的代码：

```
 HttpClient client = new HttpClient();
 PostMethod postMethod = new PostMethod("<URL>");
 postMethod.getParams().setContentCharset("utf-8"); //The line I added

 ... 
```

请注意，客户端现在需要将请求解码为 UTF-8。法语和西班牙语工作正常，因为它们的字符包含在默认的 ISO-8859-1 字符集中。汉字不是。如果法语和西班牙语在客户端被正确解码，则客户端将请求解码为 ISO-8859-1，发送 UTF-8 可能会失败。

所以你也可以尝试添加这个：

```
postMethod.setRequestheader("Content-Type", "application/x-www-form-url-encoded; charset=utf-8"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-24T12:37:03.953

试试这个post方法。

```
HttpPost request = new HttpPost(webServiceUrl);
StringEntity str = new StringEntity(YourData);
str.setContentType("application/json");
HttpPost.setEntity(new StringEntity(str, HTTP.UTF_8)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-09T12:40:54.673

您最好将字符串更改为 base64 编码，然后发送。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-31T14:10:34.343

我无法通过 HttpClient 套接字连接发送希伯来语。通过时将其更改为垃圾。我已经完成了上面提到的所有要点。尽管如此，问题仍然存在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-10T11:40:17.603

我想我已经通过检查 EntityBuilder 反编译代码找到了原因：EntityBuilder 忽略了关于参数的 contentEncoding 字段，它使用了 contentType 字段中的那个。通过查看 org.apache.http.entity.ContentType，唯一一个具有 UTF-8 的预定义值是 org.apache.http.entity.ContentType.APPLICATION_JSON。

所以在我的情况下

```
HttpPost method = new HttPost("<URL>");
EntityBuilder builder = EntityBuilder.create();
builder.setContentType(ContentType.APPLICATION_JSON);
builder.setContentEncoding(StandardCharsets.UTF_8.name());
...
method.setEntity(builder.build()); 
```

完成了这项工作（尽管我认为在这里设置 contentType 是多余的）。

我正在使用 httpclient-osgi 4.5.4 版。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-12-24T07:33:40.520

```
PostMethod method = new PostMethod("URL");
method.setRequestHeader("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8"); 
```

# android - 定期网站解析消耗大量数据下载。我应该将我的逻辑迁移到服务器吗？如何？

> ID：15850323
> 
> 赞同：0
> 
> 时间：2013-04-06T11:25:33.360
> 
> 标签：android, server-push

首先，对不起我的英语不好。

我制作了一个看起来运行良好的 Android 应用程序。它的任务是连接到一个网站并解析它以查看是否有新数据。在这种情况下，它会创建一个通知。

网站中的数据大约每天修改一次，但时间是随机的。我想尽快知道。

我的应用程序每 20 分钟连接一次网站以检查新信息，但我意识到这涉及 3G 的高数据消耗。我认为解析可以在服务器中完成，而手机只会接收 c2dm 推送。

我的问题：我不知道服务器。我已经看到了一些价格和.. 我必须在 800 美元的服务器上花费那么多钱吗？我的简单应用程序有更便宜的选择吗？

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:34:06.270

如您所见，在设备上进行解析可能会导致数据使用和潜在的网络访问问题（如果您在尝试搜索时没有连接怎么办？）。在具有更可靠互联网连接的服务器上执行此工作是一个好主意。您将使用 Google Cloud Messaging (GCM) 而不是已弃用的 C2DM。您不需要购买特殊的硬件来托管服务器，如果它仅供您使用，则始终在线的台式计算机可以为您完成工作。由于您将使用推送，因此您甚至不需要服务器的静态 IP 地址（或域名），因为设备永远不会“打电话回家”，因为您只需要在事情发生变化时发出通知。

我首先会在我的台式计算机上打开一个端口，然后尝试让该设备通过您的 LAN 与您的机器通信。

希望这可以帮助。

# php - 无法从mysql数据库中获取数据

> ID：15850324
> 
> 赞同：1
> 
> 时间：2013-04-06T11:25:34.480
> 
> 标签：php, mysql

我有存储患者测试的表，在另一个表中，报告结果由测试表中定义的 test_id 保存，现在测试 id 是固定的，我正在通过 test_id 获取报告结果，但是任何用户都可以花更多时间所以报告结果正在表中更新，但是当我试图报告旧的报告结果时，是否有任何解决方案可以在表中的 test_id 相同时仅显示当前结果，这是我的表图像![在此处输入图像描述](https://i.stack.imgur.com/ZCfWE.png)

我想尝试获取当前结果，但它显示以前的结果。这是代码

```
 function get_test_report( $test_id )
        {
            gri("report", "WHERE rep_te_id = '$test_id'", "", $report);

            if($lab[lab_test_rl_id] == 4)                       # lab report
            {
                return get_lab_content( $report[rep_result], $lab[id] );
            }
            else                                                # other report
            {
                return $report[rep_result];
            }
        } 
```

希望你能理解，因为我的英语不好，任何想法将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:30:19.450

```
SELECT *
FROM report
WHERE rep_te_id = '$test_id'
ORDER by rep_date DESC
LIMIT 1 
```

在您的 PHP 中，您没有使用正确的语法来访问关联数组元素。您需要引用键，所以它应该是`$report['rep_result']`（例外情况是当您在字符串中插值时，除非您用 包裹它，否则您必须将引号去掉`{}`）。

# php - 如何在通过javascript或jquery从客户端上传之前检测上传文件的数量及其名称？

> ID：15850328
> 
> 赞同：0
> 
> 时间：2013-04-06T11:25:53.643
> 
> 标签：php, javascript, jquery, file-upload, client-side

我想上传多个文件并有一个名为 test.php 的文件，其中包含以下代码：

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8">

<script src="js/jquery-1.8.0.min.js"></script>
<script>
$(function(){
var myVar;
$('form').submit(function(){
    myVar = setInterval(ajax, 1000);
});
var ajax = function() {
    $.ajax({
        url: 'test2.php',
        type: 'post',
        success: function(ajax_result){
            $('.result').html(ajax_result);
            if (!ajax_result) {
                clearInterval(myVar);
            }
        },
        error: function(){
            alert('error');
        }
    });
};
});
</script>
</head>
<body style="width:100%; height:100%;">
<form action="test2.php" target="iframe" method="post" enctype="multipart/form-data" >
    <input type="hidden" name="<?php echo ini_get("session.upload_progress.name"); ?>" value="fil" />
    <input name="file[]" type="file" multiple />
    <input type="submit">
</form>
<iframe id="iframe" name="iframe"></iframe>
<div class="result" style="width:100%; height:100%;"></div>

</body>
</html> 
```

和一个名为 test2.php 的文件，其中包含以下代码：

```
<?php
session_start();
if (isset($_FILES['file'])){
for ($i = 0; $i < count($_FILES['file']['tmp_name']); $i++) {
move_uploaded_file($_FILES['file']['tmp_name'][$i],'a/'.$_FILES['file']['name'][$i]);
}
}
if (isset($_SESSION[$key = ini_get("session.upload_progress.prefix") . 'fil'])) {
     var_dump($_SESSION[$key]);

} else echo false;
?> 
```

现在我想在将文件发送到服务器之前检测通过客户端名称选择的文件数量。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:39:30.870

```
$('form').submit(function() {
    var numberOfFilesAboutToBeSubmitted = $("[name='file[]']", this ).prop("files").length; 
```

});

请注意，您没有使用 ajax 请求提交任何文件，它与您的表单根本没有关联。

另请注意，这在 IE < 10 中不起作用

# android - DialogFragment 中的微调器选项（来自 ABS 的 IcsSpinner）显示为截断

> ID：15850337
> 
> 赞同：1
> 
> 时间：2013-04-06T11:26:54.363
> 
> 标签：android, dialog, android-fragments, actionbarsherlock, android-dialogfragment

我有以下问题`Spinner`在`DialogFragment`.

显示`Spinner`为cut，只有在键盘出现时才显示OK。

`Spinner`实际上是一个自定义类，代码如下：

```
import android.content.Context;
import android.util.AttributeSet;

import com.actionbarsherlock.internal.widget.IcsSpinner;

public class CustomIcsSpinner extends IcsSpinner {

  public CustomIcsSpinner(Context context, AttributeSet attrs) {
    super(context, attrs, com.actionbarsherlock.R.attr.actionDropDownStyle);

  }

  public CustomIcsSpinner(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);

  }
} 
```

我怎样才能解决这个问题？

提前致谢。

![微调器显示切割](https://i.stack.imgur.com/5veYo.png) ![微调器显示正常](https://i.stack.imgur.com/TsPkA.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-26T17:56:24.023

转到`com.actionbarsherlock.internal.widget.IcsSpinner`源代码。
查找`DropdownPopup popup = new DropdownPopup(context, attrs, defStyle);`
替换为`DropdownPopup popup = new DropdownPopup(context.getApplicationContext(), attrs, defStyle);`

为我工作；

:)

# ruby-on-rails - i18n 重定向 RoR 时出现“NO KEY”

> ID：15850341
> 
> 赞同：0
> 
> 时间：2013-04-06T11:27:22.040
> 
> 标签：ruby-on-rails, internationalization, rails-i18n

我正在使用带有给定参数而不是会话变量的 i18n。当我从某种形式发布我的信息并重定向到另一个页面时，它似乎忽略了：

```
before_filter :set_locale
def set_locale
    I18n.locale = params[:lang] if params.include?('lang')
end 
```

应用程序控制器中的函数，我用“NO KEY”而不是字典字符串获取请求的页面，只有在刷新页面后，键才能很好地加载。

```
def save
    @category = Category.find(params[:cat])
    @category.pools.create(:num_of_players => params[:num_players], ...
    :close => close, :badge => badge)
    redirect_to ("/pool/game?ids=2&lang=sp")
end 
```

# javascript - 带有复选框的选择列表（选项）中的 jQuery 树。可能的？

> ID：15850342
> 
> 赞同：0
> 
> 时间：2013-04-06T11:27:30.233
> 
> 标签：javascript, jquery, html, jquery-ui

我正在寻找一个 jQuery 插件/脚本来制作这样的东西：

[例子](http://wwwendt.de/tech/dynatree/doc/sample-select.html#tree3)

![在此处输入图像描述](https://i.stack.imgur.com/uVnCH.jpg)

从我目前的情况来看：

```
<select name="">
    <option disabled="disabled" value="1">Category A</option>
       <option value="2">Category A1</option>
       <option value="3">Category A2</option>
       <option value="4">Category A3</option>

    <option disabled="disabled" value="5">Category B</option>
       <option value="6">Category B1</option>
       <option value="7">Category B2</option>
       <option value="8">Category B3</option>
</select> 
```

可能吗？或者我必须以某种方式从 SELECT 更改为 UL 和 OPTIONS 更改为 LI？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:38:21.270

是的`UL`，`OL`和 child`IL`是创建“树视图”的规范。

您链接到的示例也`UL`和`LI`。

使用 Chrome 之类的浏览器并右键单击页面上的元素以查看 HTML，您将学到很多东西！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:42:01.727

> 我必须以某种方式从 SELECT 更改为 UL 和 OPTIONS 更改为 LI？

如果你想要一些复杂的东西 a `select`\`option`构造是不够的，更不用说生成有效的 HTML 了，因为你可以在`option`.

我认为您将需要研究`ul` `li`集合。

* * *

**Dynatree 是如何做到的？**

* * *

如果您检查您链接的示例页面的来源，您会看到以下内容，准确地向您展示了用于创建它的元素，使用`ul` `li`集合以及子\元素`spans`的顶级元素。`ul``li`

此外，您还可以在每组课程中`span`找到更多内容。`spans`这些类使用 CSS 为文件夹、扩展器以及来自同一个 sprite-sheet 的复选框注入图像。

使用来自 HTML 和 CSS 的以下数据应该可以帮助您开始正确的方向。

这是其中一棵树的 HTML：

```
<ul class="dynatree-container" style="">
    <li class=""><span class="dynatree-node dynatree-exp-c dynatree-ico-c"><span class="dynatree-connector"></span><span class="dynatree-checkbox"></span><span class="dynatree-icon"></span><a href="#" class="dynatree-title" title="Look, a tool tip!">item1 with key and tooltip</a>
        </span>
    </li>
    <li class=""><span class="dynatree-node dynatree-selected dynatree-exp-c dynatree-ico-c"><span class="dynatree-connector"></span><span class="dynatree-checkbox"></span><span class="dynatree-icon"></span><a href="#" class="dynatree-title">item2: selected on init</a>
        </span>
    </li>
    <li class=""><span class="dynatree-node dynatree-folder dynatree-has-children dynatree-exp-c dynatree-ico-cf"><span class="dynatree-expander"></span><span class="dynatree-checkbox"></span><span class="dynatree-icon"></span><a href="#" class="dynatree-title">Folder</a>
        </span>
    </li>
    <li class="dynatree-lastsib"><span class="dynatree-node dynatree-expanded dynatree-has-children dynatree-lastsib dynatree-exp-el dynatree-ico-e"><span class="dynatree-expander"></span><span class="dynatree-checkbox"></span><span class="dynatree-icon"></span><a href="#" class="dynatree-title">Document with some children (expanded on init)</a>
        </span>
        <ul style="">
            <li class=""><span class="dynatree-node dynatree-has-children dynatree-active dynatree-exp-c dynatree-ico-c"><span class="dynatree-expander"></span><span class="dynatree-checkbox"></span><span class="dynatree-icon"></span><a href="#" class="dynatree-title">Sub-item 4.1 (active on init)</a>
                </span>
            </li>
            <li class=""><span class="dynatree-node dynatree-has-children dynatree-selected dynatree-exp-c dynatree-ico-c"><span class="dynatree-expander"></span><span class="dynatree-checkbox"></span><span class="dynatree-icon"></span><a href="#" class="dynatree-title">Sub-item 4.2 (selected on init)</a>
                </span>
            </li>
            <li class=""><span class="dynatree-node dynatree-exp-c dynatree-ico-c"><span class="dynatree-connector"></span><span class="dynatree-icon"></span><a href="#" class="dynatree-title">Sub-item 4.3 (hideCheckbox)</a>
                </span>
            </li>
            <li class="dynatree-lastsib"><span class="dynatree-node dynatree-lastsib dynatree-exp-cl dynatree-ico-c"><span class="dynatree-connector"></span><span class="dynatree-checkbox"></span><span class="dynatree-icon"></span><a href="#" class="dynatree-title">Sub-item 4.4 (unselectable)</a>
                </span>
            </li>
        </ul>
    </li>
</ul> 
```

下面是用于上述 HTML 的一些[**CSS 。**](http://wwwendt.de/tech/dynatree/src/skin/ui.dynatree.css)

对于 check-boxes `dynatree-checkbox`、 icons`dynatree-icon`和 expanders`dynatree-expander`类，这个 CSS 用于指向同一个 sprite-sheet，唯一改变的是选择所用图像的工作表上的位置：

```
span.dynatree-empty,
span.dynatree-vline,
span.dynatree-connector,
span.dynatree-expander,
span.dynatree-icon,
span.dynatree-checkbox,
span.dynatree-radio,
span.dynatree-drag-helper-img,
#dynatree-drop-marker
{
    width: 16px;
    height: 16px;
/*  display: -moz-inline-box; /* @ FF 1+2 removed for issue 221 */
/*  -moz-box-align: start; /* issue 221 */
    display: inline-block; /* Required to make a span sizeable */
    vertical-align: top;
    background-repeat: no-repeat;
    background-position: left;
    background-image: url("icons.gif");
    background-position: 0 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T11:52:43.597

您不能将 SELECT 元素样式化为树结构，例如如何。在您的情况下，您只能选择一项。但是您可以通过 UL 和 LI-s 基于您的 SELECT 元素创建树形结构，并隐藏 SELECT 元素以将所选项目存储在树形结构中。

# android - 以编程方式更改在 android 设备中从未知来源安装 apk 的权限

> ID：15850345
> 
> 赞同：3
> 
> 时间：2013-04-06T11:27:47.117
> 
> 标签：android, apk

为了允许或阻止从 sdcard 手动安装 apk 文件，我们勾选/取消勾选“允许从未知来源安装应用程序”复选框。

我们可以通过避免任何用户界面以编程方式做到这一点吗？

谢谢，

尼拉夫

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T11:50:00.830

不，除非您是运营商，否则不会，除非您使用的是公司拥有管理员访问权限的企业电话。

这是 Android 安全模型的一部分，因此用户不会失去对恶意应用程序的手机控制权。

以下是执行此类操作所需的实际权限：

```
<uses-permission android:name="android.permission.WRITE_SETTINGS" />
<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS" /> 
```

您可以尝试使用这些权限，但[根据设计](http://source.android.com/tech/security/index.html#the-android-permission-model-accessing-protected-apis)，除非您对设备具有 root 访问权限，否则它们将不起作用。

> 在设备设置中，用户可以查看他们之前安装的应用程序的权限。用户还可以在选择时全局关闭某些功能，例如禁用 GPS、无线电或 wi-fi。
> 
> 如果应用程序尝试使用未在应用程序清单中声明的​​受保护功能，则权限失败通常会导致将安全异常返回给应用程序。**受保护的 API 权限检查在尽可能低的级别强制执行，以防止规避。**

# html - 如何在背景图像上应用 z-index？

> ID：15850348
> 
> 赞同：1
> 
> 时间：2013-04-06T11:28:03.097
> 
> 标签：html, css

这是代码：

```
<div style="background-image: url(/Images/Main/BackMain.png); z-index: 2">
    <div style="background-image: url(/Images/Main/BackMain1.png); z-index: 1">
    </div>
</div> 
```

上面的代码没有显示`BackMain.png`在`BackMain1.png`我正在寻找的内容之上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T11:36:22.810

`z-index`仅更改已*定位*元素的 z 位置。如果一个元素被定位，那么它将建立一个新的定位上下文，并且它的后代将相对于它进行定位。

因此，无法设置`z-index`元素的 ，使其出现在其任何后代之前。

如果您根本不定位祖先，并且设置 的后代`position: relative; z-index: -1`，那么您可以（至少在 Chrome 中，我没有进一步测试）将孩子定位在父母后面。不过，这可能会产生不必要的副作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:32:37.690

当然，您必须为此更改为html结构，

**html:-**

```
<div class="container">
<div class="object2"></div>
<div class="object1"></div>
</div> 
```

**CSS：-**

```
.container {
    position: relative;
}

.object1 {
    background-image: url("http://farm8.staticflickr.com/7124/8075023996_f61725fac4_n.jpg");
    height: 280px;
    left: 0px;
    position: absolute;
    top: 0;
    width: 320px;
    z-index: -1;
}

.object2 {
    background-image: url("http://farm9.staticflickr.com/8054/8110021320_ebaa03c9b0_s.jpg");
    background-repeat: no-repeat;
    height: 280px;
    position: absolute;
    width: 320px;
    z-index: 20;
} 
```

检查我创建的内容：- [http://jsfiddle.net/hJbHR/1/](http://jsfiddle.net/hJbHR/1/)

# ios - 无法在导航栏上获得正确的栏按钮项？

> ID：15850352
> 
> 赞同：4
> 
> 时间：2013-04-06T11:28:23.770
> 
> 标签：ios, objective-c, uinavigationitem

我试图在我的导航控制器的右侧有一个按钮 - 在这个工作之后，我希望按钮在仍然工作的同时尽可能接近不可见。可能设置为高透明度或将颜色更改为导航栏颜色（以更便宜的内存为准）。

首先，虽然我似乎无法在导航栏的右侧看到可见或工作按钮：

```
self.navigationController.navigationItem.rightBarButtonItem = 
[[UIBarButtonItem alloc] initWithTitle:@"coin" style:UIBarButtonItemStyleDone
target:self action:@selector(changeToInAppScene:)]; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-06T11:32:24.293

您必须分配给`self.navigationItem.rightBarButtonItem`（当前视图控制器的导航项），而不是`self.navigationController.navigationItem.rightBarButtonItem`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T11:49:12.750

```
- (void)viewWillAppear:(BOOL)animated
{
    UIBarButtonItem *rightBar = [[UIBarButtonItem alloc]initWithTitle:@"Coin" style:UIBarButtonItemStylePlain target:self action:@selector(changeToInAppScene:)];
    self.navigationItem.rightBarButtonItem = rightBar;
} 
```

# javascript - 更改父级 HTML 时不会触发子级事件

> ID：15850353
> 
> 赞同：1
> 
> 时间：2013-04-06T11:28:29.700
> 
> 标签：javascript, jquery, html, events, bind

这是一个示例[http://jsbin.com/ukoqud/3/edit](http://jsbin.com/ukoqud/3/edit)

如果单击红色框，则会收到警报。

如果您单击链接，蓝色框中的所有内容都将替换为仅红色框。链接将消失，如果您点击红色框，您将不会收到任何警报。

1.  为什么会发生这种情况？
2.  它与innerHTML有关吗？
3.  它在所有浏览器中的工作方式都相同吗？

这里还有一个示例[http://jsbin.com/ukoqud/1/edit](http://jsbin.com/ukoqud/1/edit)在这个示例中，您将在单击链接后收到警报。事情以非常相似的方式发生，但结果却不同。

我想了解原因，无需修复我的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T11:34:32.863

当您调用 时`$(".red")`，它会返回当时存在的 DOM 元素的集合。因此`$(".red").click(function...)`，只需将处理程序绑定到这些元素上的单击事件。如果您稍后创建具有相同类的新元素，它们不在此集合中，因此它们没有绑定到它们的处理程序。jQuery 不会监视 DOM 的变化并动态更新处理程序——绑定只是在您调用时匹配的元素上`click()`。

您要么需要在添加新 HTML 后再次绑定处理程序，要么使用以下*委托*`.on()`：

```
$(".blue").on("click", ".red", function(){
    alert('click on a red box detected');
}); 
```

这通过将处理程序绑定到 来工作`$(".blue")`，该处理程序不会动态更改。处理程序检查您单击的元素是否与“.red”选择器匹配，因此它能够处理动态添加的元素而无需重新绑定。

我认为它在您的第二个示例中起作用的原因是因为红色块不在蓝框内开始。当您将其移入内部时，jQuery 会重用相同的 DOM 元素，因此绑定也随之而来。在第一个示例中，红色框从蓝色框内开始。当你这样做时`$('.red').parent().html(...)`，它做的第一件事是空`$('.red').parent()`的（蓝色框），所以原来的红色元素从 DOM 中删除，它的绑定丢失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:03:21.600

我们需要了解设置元素的 html 是如何工作的。然后，您将自己找出答案。

看看这个 bin[更新了 Bin](http://jsbin.com/ukoqud/18/edit)

*   当我们设置一个元素的 HTML 时，它首先会删除其中的所有元素。
*   这些元素不会从内存中删除，具体取决于它们是否被垃圾收集。
*   如果任何孩子有参考，那么该特定孩子将不会被垃圾收集。
*   在您的情况下，我们引用了红色元素，因此它仍然存在于内存中，但不是文档的一部分。
*   当我们在我的示例中说 blue.html(red) 时，红色元素再次成为文档的一部分，但这次不会有任何处理程序因此您的点击不起作用。

在您的示例2中，

*   红色元素始终是文档的一部分，因此当红色元素移动到蓝色元素内时，不会丢失任何处理程序。

我希望这将有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T11:37:57.707

因为当您单击链接时，您会删除屏幕上的所有内容并从头开始创建所有内容，并且事件绑定消失了。所以你应该使用这个

```
 $(".blue").on("click", ".red", function(){
  alert('');
 }); 
```

这样，绑定就不同了。它不会静态绑定它

# java - Objective C 运行时和用 Objective C 学习 Java

> ID：15850354
> 
> 赞同：-3
> 
> 时间：2013-04-06T11:28:36.167
> 
> 标签：java, objective-c, cocoa, runtime

我了解到带有 Cocoa 的 Objective-C 是一种编译语言，而 Objective C 需要 Apple Runtime。

首先我很困惑。*怎么可能？*Objective C 是一种编译语言，它需要运行时应用程序与 Objective C 应用程序一起工作？

*如果您了解它的工作原理以及 JRE 和 Objective C 运行时之间的区别，请帮助我。*

如果它是一个不错的选择，我想用 Objective C 学习 Java。您对此有何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T11:33:29.177

Objective-C 是 C 的超集。当您编写 Objective-C 代码并向实例发送消息时：

```
[myObject doSomething]; 
```

编译器实际上调用了一个适当的函数`objc_msgSend(…)`来达到预期的效果。所以运行时更像是一个特定的 API（函数和 sata 结构）。编译器将您的消息转换为对该 API 的调用。

**所以，回答你的问题：**

1.  Objective-C 不是一种解释性语言，而是像任何其他 C 或 C++ 程序一样在机器上本地运行。运行时不是解释器，而是结构和函数库。
2.  **Cocoa**是一个框架，不需要编写 Objective-C 程序。
3.  如果您打算从 MAC 或 iOS（iPhone、iPad）编程，我建议您放弃 Java 并选择 Objective-C。

**推荐读物**：

*   [Cocoa 框架，Objective-C 的力量](https://developer.apple.com/technologies/mac/cocoa.html)
*   [Objective-C 和 Cocoa 有什么区别？](https://stackoverflow.com/questions/435928/whats-the-difference-between-objective-c-and-cocoa)
*   [Objective-C 运行时参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)

> 本文档描述了 OS X Objective-C 2.0 运行时库支持的函数和数据结构。这些函数在位于*/usr/lib/libobjc.A.dylib*的共享库中实现。这个共享库为 Objective-C 语言的动态属性提供支持，因此被所有 Objective-C 应用程序链接到。

**还推荐：**

*   [使用 Objective-C 编程](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/Introduction/Introduction.html)

> Objective-C 是您在为 OS X 和 iOS 编写软件时使用的主要编程语言。**它是 C 编程语言的超集，提供面向对象的功能和动态运行时。**Objective-C 继承了 C 的语法、原始类型和流控制语句，并添加了用于定义类和方法的语法。它还为对象图管理和对象文字添加了语言级别的支持，同时提供动态类型和绑定，将许多职责推迟到运行时。

*   [Objective-C 编程语言](http://examples.oreilly.com/9780596809775/ObjC.pdf)

> Objective-C 语言将尽可能多的决策从编译时和链接时推迟到运行时。只要有可能，它就会动态地执行诸如创建对象和确定调用什么方法之类的操作。这意味着该语言不仅需要编译器，还需要运行时系统来执行编译后的代码。运行时系统充当Objective-C语言的一种操作系统；这就是使语言起作用的原因。但是，通常不需要直接与运行时交互。不过，要了解有关它提供的功能的更多信息，请参阅 Objective-C 运行时编程指南。

# delphi - Delphi - 随机组合（数学）

> ID：15850355
> 
> 赞同：-1
> 
> 时间：2013-04-06T11:28:38.790
> 
> 标签：delphi, math, random, combinations

我这里有一个大问题，甚至不知道如何开始......

简而言之，我需要知道一个数字是否在随机组合的一组结果中......

让我更好地解释一下：我用 3 个从 1 到 8 的整数字符创建了一个随机“数字”，如下所示：

```
procedure TForm1.btn1Click(Sender: TObject);
var
  cTmp: Char;
  sTmp: String[3];
begin
  sTmp := '';
  While (Length(sTmp) < 3) Do
  Begin
    Randomize;
    cTmp := IntToStr(Random(7) + 1)[1];
    If (Pos(cTmp, sTmp) = 0) Then
      sTmp := sTmp + cTmp;
  end;
  edt1.Text := sTmp;
end; 
```

现在我需要知道其他一些随机数，比如“324”（示例），是否在该随机组合的结果集中。

请问，有人可以帮忙吗？获得解决此问题的方程式的链接就足够了...

* * *

好的，让我尝试添加一些有用的信息：

请先检查此链接[https://en.wikipedia.org/wiki/Combination](https://en.wikipedia.org/wiki/Combination)

一旦我在编辑框中得到用户输入的一些数字，我需要检查它是否在这个随机组合的集合中：S = (1..8) 和 k = 3

棘手，嗯？

* * *

这是我得到的。也许它对将来的某人有用。感谢所有试图提供帮助的人！

```
Function IsNumOnSet(const Min, Max, Num: Integer): Boolean;
var
  X, Y, Z: Integer;
Begin
  Result := False;
  For X := Min to Max Do
    For Y := Min to Max Do
      For Z := Min to Max Do
        If (X <> Y) and (X <> Z) and (Y <> Z) Then
          If (X * 100 + Y * 10 + Z = Num) Then
          Begin
            Result := True;
            Exit;
          end;
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T23:22:49.213

您想测试某物是否是组合。为此，您需要验证假定的组合是否满足以下条件：

1.  每个元素都在范围 1..N 和
2.  没有元素出现超过一次。

所以，像这样实现它。

*   声明一个计数数组，比如数组 [1..N] of Integer。如果 N 在运行时变化，您将需要一个动态数组。
*   将数组的所有成员初始化为零。
*   循环遍历假定组合的每个元素。检查元素是否在 1..N 范围内。并增加该元素的计数。
*   如果任何元素的计数大于 1，则这不是有效的组合。

现在您可以通过用布尔数组替换整数数组来简化，但这应该是不言而喻的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T13:23:51.903

你有你的发电机。建立价值后，请执行以下操作

```
function isValidCode( Digits : Array of Char;  Value : String ) : Boolean;
var 
    nI : Integer;
begin
       for nI := 0 to High(Digits) do
       begin
             result := Pos(Digits[nI], Value ) > 0;
             if not result then break;
       end;
end; 
```

像这样打电话...

```
 isValidCode(["3","2","4"], RandomValue); 
```

注意：它仅因为您有唯一的数字而起作用，数字 3 在您的最终数字中只有一次。对于更通用的东西，您必须调整此功能。（测试 "3","3","2" 会返回 true 但它会是 false ！）

***更新***：我不喜欢嵌套循环^^。这是一个返回整数的第 n 位的函数。如果数字不存在，它将返回 -1。：

```
 function TForm1.getDigits(value : integer; ndigits : Integer ) : Integer;
 var
    base : Integer;
 begin
       base := Round(IntPower( 10, ndigits-1 ));
       result := Trunc( value /  BASE ) mod 10;
 end; 
```

nDigits 是从 1 开始从右到左的数字。它将返回数字的值。

```
GetDigits( 234, 1) returns 4
GetDigits( 234, 2) returns 3
GetDigits( 234, 3) returns 2.
GetDigits( 234, 4) returns 0. 
```

现在最后一个函数检查一个值是否是一个好的组合，指定你正在寻找的 maxdigits ：

```
function isValidCombination( value : integer; MinVal, MaxVal : Integer; MaxDigits : Integer ) :  Boolean;
var
   Buff : Array[0..9] of Integer;
   nI, digit: Integer;
 begin
   ZeroMemory( @Buff, 10*4);

   // Store the count of digits for
   for nI := 1 to MaxDigits do
   begin
      digit := getDigits(value, nI);
      Buff[digit] :=  Buff[digit] + 1;
   end;

   // Check if the value is more than the number of digits.
   if Value >= Round(IntPower( 10, MaxDigits )) then
   begin
     result := False;
     exit;
   end;

   // Check if the value has less than MaxDigits. 
   if Value < Round(IntPower( 10, MaxDigits-1 )) then
   begin
      result := False;
      exit;
   end;

  result := true;
  for nI := 0 to 9 do
  begin
     // Exit if more than One occurence of digit.
     result := Buff[nI] < 2 ;
     if not result then break;

     // Check if digit is present and valid.
     result := (Buff[nI] = 0) or InRange( nI, MinVal, MaxVal );
     if not result then break;
  end;

end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T18:27:35.693

问题对我来说似乎并不太模糊，也许说得不好。

据我了解，您想检查一个字符串是否在一组随机生成的字符中。

这是最快的工作方式，保留所有字母的排序数组以及每个字母的次数。

从目标字符串中减去每个字母如果排序后的 int 数组中的任何值低于 0，则意味着无法从这些字符中生成字符串。

我让它只适用于不区分大小写的字符串，但它可以很容易地适用于任何字符串，方法是使字母数组长度为 255 个字符，而不是从 A 开始。

这将不允许您像其他示例一样使用两次字符，因此 'boom' 不在 'b' 'o' 'm' 中

希望这对您有所帮助。

```
function TForm1.isWordInArray(word: string; arr: array of Char):Boolean;
 var
   alphabetCount: array[0..25] of Integer;
   i, baseval, position : Integer;
   s: String;
   c: Char;
begin
  for i := 0  to 25 do alphabetCount[i] := 0;  // init alphabet
  s := UpperCase(word); // make string uppercase
  baseval := Ord('A'); // count A as the 0th letter
  for i := 0 to Length(arr)-1 do begin // disect array and build alhabet
    c := UpCase(arr[i]); // get current letter
    inc(alphabetCount[(Ord(c)-baseval)]); // add 1 to the letter count for that letter
  end;
  for i := 1 to Length(s) do begin // disect string
    c := s[i]; // get current letter
    position := (Ord(c)-baseval);
    if(alphabetCount[position]>0) then // if there is still latters of that kind left
      dec(alphabetCount[position]) // delete 1 to the letter count for that letter
    else begin // letternot there!, exit with a negative result
      Result := False;
      Exit;
    end;
  end;
  Result := True; // all tests where passed, the string is in the array
end; 
```

像这样实现：

```
if isWordInArray('Delphi',['d','l','e','P','i','h']) then Caption := 'Yup' else Caption := 'Nope';  //yup
if isWordInArray('boom',['b','o','m']) then Caption := 'Yup' else Caption := 'Nope';  //nope, a char can only be used once 
```

德尔福摇滚！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-06T11:42:13.880

```
begin
  Randomize; //only need to execute this once.
  sTmp := '';
  While (Length(sTmp) < 3) Do
  Begin
    cTmp := IntToStr(Random(7) + 1)[1]; // RANDOM(7) produces # from 0..6
                                        // so result will be '1'..'7', not '8'
                                        // Alternative: clmp := chr(48 + random(8));
    If (Pos(cTmp, sTmp) = 0) Then
      sTmp := sTmp + cTmp;
    IF SLMP = '324' THEN
      DOSOMETHING; // don't know what you actually want to do
                   // Perhaps SET SLMP=''; to make sure '324'
                   // isn't generated?
  end;
  edt1.Text := sTmp;
end; 
```

# magento - CMS 驱动网站的开发方法

> ID：15850357
> 
> 赞同：1
> 
> 时间：2013-04-06T11:28:55.480
> 
> 标签：magento, methods, content-management-system, frontend

这是一个相当笼统的问题，我希望听到人们对此的看法，而不是专门的答案。

我已经开发了大约 6 年，最近加入了一个新团队。我是自学的。我得到了一个项目来开发一个 Magento 驱动的电子商务网站，其中很大一部分专注于编辑/博客部分。

当我使用 CMS 时（我意识到 CMS 的工作方式不同），为了完成一个项目，我的方法总是按以下顺序进行：

1.  开发前端（html、css、js）。
2.  将前端模板集成到 CMS
3.  编译 CMS 函数以在模板上的占位符中填写内容（替换任何虚拟文本等）。
4.  注入内容。

当我向我的同事解释这一点时，他们看起来很害怕。

所以他们以不同的方式工作：

1.  在 CMS 上编译函数
2.  注入内容。
3.  添加样式（html 模板、css、js 等）。

添加到等式，我的场景，我正在开发的电子商务网站必须在设备上响应。

所以我的问题是，在过去的 6 年里我做错了吗？先完成前端？还是编译前端之后？

我真的很想听听人们对此的看法。我是自学成才的，所以从来没有接受过这样的开发模式的官方培训。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:20:58.563

这取决于所使用的系统。一些系统允许您在前端完全灵活，而其他系统（例如 Magento）在它们允许的范围内更具限制性。

在[我的公司](http://www.onehippo.org)，我们通常使用类似于您喜欢的方法的方法；但我知道我们的一个合作伙伴以您同事的方式为 Magento 开发。

所以，我的猜测是你们俩都是对的，这取决于产品的选择。

# android - Android 软件包名称已更改

> ID：15850361
> 
> 赞同：0
> 
> 时间：2013-04-06T11:29:18.767
> 
> 标签：android, manifest

我已经使用以下方法更改了我的 android 应用程序的包名称：*Android Tools--> Rename Application Package* 在我的项目中。

现在，当我启动我的应用程序时，我收到了这个错误：

```
Installation error: INSTALL_PARSE_FAILED_MANIFEST_MALFORMED
Please check logcat output for more details.
Launch canceled! 
```

Logcat 输出为空...我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:17:19.970

检查 manifest.xml 文件中的包名称。您可能还需要更改“package=”前面的内容。像这样：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.name.package.new.your" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:30:46.407

您查看 manifest.xml 文件。问题应该很明显了。如果您自己找不到问题，请在此处发布清单文件。

Eclipse 经常遇到这个问题。

# f# - 在 F# 中扩展枚举类型

> ID：15850366
> 
> 赞同：5
> 
> 时间：2013-04-06T11:29:49.740
> 
> 标签：f#, extension-methods

另一个与 F# 功能相关的问题称为[“类型扩展”](http://msdn.microsoft.com/en-us/library/dd233211.aspx)。

在 F# 中扩展枚举似乎是不可能的。我经常使用[C# 扩展方法](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)来扩展枚举：添加范围验证逻辑、返回字符串表示的方法等。

不幸的是，似乎只能扩展有区别的联合，但**不可能扩展简单的枚举**：

**1\. 内在扩展**

```
// CustomEnum.fs
module CustomEnumModule

type CustomEnum = 
    | Value1 = 1
    | Value2 = 2

// Trying to split definition of the enum
type CustomEnum with 
    | Value3 = 3 
```

**错误：“错误 FS0010：意外符号 '|' 在成员定义中"**

**2\. 可选扩展**

```
// CustomEnumEx.fs
open CustomEnumModule

type CustomEnum with
    member public x.PrintValue() =
        printfn "%A" x 
```

**错误：“错误 FS0896：枚举不能有成员”**

这对我来说似乎很奇怪，因为（1）我们可以将简单枚举视为全功能可区分联合的特例，并且我们**可以**扩展可区分联合和（2）扩展 .NET 枚举是添加一些功能（包括 FP-功能）到现有的基础设施。

这种行为是故意的还是这是实现中的简单错误？

PS 不幸的是， [F# Spec](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html)在这方面保持沉默，或者至少我在那里找不到任何一种或另一种行为的证据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T15:36:07.097

可以创建一个与类型同名的模块，类似于扩展类型：

```
type CustomEnum = Value1 = 1 | Value2 = 2

[<CompilationRepresentation(CompilationRepresentationFlags.ModuleSuffix)>]
module CustomEnum =
    let Print = function
    | CustomEnum.Value1 -> "One"
    | CustomEnum.Value2 -> "Two"
    | _ -> invalidArg "" ""

let value = CustomEnum.Value1

let s = CustomEnum.Print value 
```

# ruby-on-rails - RoR：attr_encrypted 未在数据库中保存数据

> ID：15850375
> 
> 赞同：4
> 
> 时间：2013-04-06T11:30:29.140
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, attr-encrypted

我`attr_encrypted`在 rails 3.2.13 中使用来加密一列。为此，在我的模型中，我有以下内容：

`attr_encrypted :social_security_no, :key => 'a secret key'`

该应用程序既不保存`social_security_no`也不保存`encrypted_social_security_no`在数据库中。

我也试过`spectator-attr_encrypted`宝石。但是，现在它给出了以下错误：

`/home/ashish/.rvm/gems/ruby-2.0.0-p0@lendty/gems/activerecord-3.2.13/lib/active_record/dynamic_matchers.rb:55:in 'method_missing': undefined method 'attr_encrypted' for #<Class:0x0000000824f768> (NoMethodError)`

那么，有什么办法可以摆脱这个问题呢？或者，是否有适用于 Rails 3.2.13 和 Ruby 2.0.0 的 gem 的分叉版本？

而且，这是我的模型：

```
class Lender < ActiveRecord::Base
  extend SignUpCounter
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :first_name, :last_name, :evening_phone, :daytime_phone, :social_security_no
  attr_encrypted :social_security_no, :key => '3243serw54325325435sdrtf34453454325sdt346546'

  # Validations
  validates_uniqueness_of :social_security_no, :email

  # Geocoding 
  geocoded_by :current_sign_in_ip
  after_validation :geocode

  # Associations
  has_many :loans
  has_many :borrowers, :through => :loans

  # Scopes
  scope :verified, where(verified: true)

  def full_name
    first_name.to_s + " " + last_name
  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:35:48.620

只是一个猜测，但我认为问题出在 validates_unqiueness_of 中。我的一位同事通过编写自己的验证来解决这个问题。

```
validate :must_have_a_valid_email

def must_have_a_valid_email
  if email.present?
    leaders = Leader.where(:encrypted_email => Leader.encrypt_email(self.email))
    leaders = leaders.where('id != ', self.id) if self.persisted?
    self.errors.add(:email, "This email address is in use") if leaders.count > 0
  end
end 
```

# django - Django 显示一个复杂的表单集

> ID：15850379
> 
> 赞同：2
> 
> 时间：2013-04-06T11:30:50.160
> 
> 标签：django, formset

我正在尝试在表格中显示复杂的 modelForm formset。我的模型是这样的：

```
class Parent(models.Model):
    # whatever
    pass

class Child(models.Model):
    CHOICES1 = (1,2,3)
    CHOICES2 = (1,2)
    CHOICES3 = (1,2,3,4)
    parent = models.ForeignKey('Parent')
    one = models.CharField(max_length=1, choices=CHOICES1)
    two = models.CharField(max_length=1, choices=CHOICES2)
    three = models.CharField(max_length=1, choices=CHOICES3)
    var = models.CharField(max_length=64) 
```

... Parent 中的每个对象都有许多 Children - 在本例中为 20 个。CHOICES1、CHOICES2 和 CHOICES3 的每个组合都有一个实例。我想要一个表格来编辑`var`给定父母的每个孩子的字段。所以我的表格是这样的：

```
class ChildForm(forms.ModelForm):
    class Meta:
        model = Child
        hidden = ('parent', 'one', 'two', 'three') 
        # i.e. only var is the only visible form field.

children_formset = modelformset_factory(Child, form=ChildForm) 
```

我可以循环这个并制作一个包含 1 列和 20 行的漂亮表格，但是我如何制作一个正方形，例如“1”和“2”只是标签，但 var1.1.1 ... var3.3.3 是表单集中的`var`表单域，表单集中的每个表单有一个表格单元格。

```
|CHOICE1 | CHOICE2  | CHOICE3.1   | CHOICE3.2  | CHOICE3.3   
|=========================================================
|   1    |     1    |  var1.1.1   |  var1.1.2  | var1.1.3
|   1    |     2    |  var1.2.1   |  var1.2.2  | var1.2.3 
|   2    |     1    |  var2.1.1   |  var2.1.2  | var2.1.3
|   2    |     2    |  var2.2.1   |  var2.2.2  | var2.2.3
|   3    |     1    |  var3.1.1   |  var3.1.2  | var3.1.3
|   3    |     2    |  var3.2.1   |  var3.2.2  | var3.3.3 
```

（原谅ASCII）。

我可以遍历这些并在每个第三个单元格之后插入一个。但我真的不希望输入混淆（即表单提交时会发生什么错误 - 我如何确保表单集中表单的正确顺序？）

我可以对其进行硬编码，但是随着项目的进行，选择的数量可能会有所不同。

那么处理这个问题的最佳方法是什么？我的一个想法是避免使用模型表单并创建另一个包含 20 个字段的表单，称为 1.1.1 到 3.3.3。并自己手动完成，但有什么更简单的吗？

# html - 将内容容器设置为 100% 的主体而非父级

> ID：15850381
> 
> 赞同：2
> 
> 时间：2013-04-06T11:31:17.780
> 
> 标签：html, css, responsive-design, liquid-layout

我正在尝试创建一个 2 列的液体布局，左侧是菜单，右侧是网站内容。

菜单应该进入右栏 ( `div.liquid-right`)，然后网站内容应该进入左栏 ( `div.liquid-left`)。

我需要内容容器与主体（即`div.liquid-right`）大小相同，而不是其父容器（左容器（`div.liquid-left`））。

布局可以用下图表示：

```
_______________
|  ____     R |
| |L __|_____ |
| | |C |     ||
| | |  |     ||
| | |  |     ||    
|_|_|__|_____|| 
```

**HTML 标记**

```
 <div class="liquid">
     <div class="liquid-right">
         <div class="liquid-left">
             <div class="content">
                 <div>main content</div>
             </div>
         </div>
     </div>
 </div> 
```

**CSS 样式**

```
.liquid{
    width:100%; height:100%;  float:left;
}

.liquid .liquid-right{
    width:100%; float:left; background-color:#FFF; margin-top:45px;
}

.liquid .liquid-left{
    width:182px; float:left; min-height:200px; 
    background-color:#FF7575;  position:relative;
}   

.liquid .content{
    background-color:#00F; float:left;  height:100px; width:100%;
} 
```

目前`.content`容器只是左容器的大小（这是预期的），但我不知道如何将它扩展到主体容器的大小。

**更新**

[http://jsfiddle.net/Ex4tK/](http://jsfiddle.net/Ex4tK/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:09:40.863

您有两个内容块在`left`. 如果您希望它们扩展并保持`left`静止，请将这些孩子移出。

```
<div class="liquid-right">
   <div class="liquid-left">Left</div>
   <div class="liquid-content">Liquid Content
      <div>
         main content
      </div>
   </div>
</div> 
```

[http://jsfiddle.net/MhCke/](http://jsfiddle.net/MhCke/)

# hsqldb - HSQLDB SET FILES CACHE ROWS/SIZE 和 SET FILES WRITE DELAY 似乎没有按预期工作

> ID：15850382
> 
> 赞同：0
> 
> 时间：2013-04-06T11:31:17.917
> 
> 标签：hsqldb

我正在使用嵌入式 HSQLDB。操作系统是 Windows 7。

以下是`SET FILES`它们出现在脚本文件中的属性：

```
SET FILES WRITE DELAY 500 MILLIS
SET FILES BACKUP INCREMENT TRUE
SET FILES CACHE SIZE 10000
SET FILES CACHE ROWS 50000
SET FILES SCALE 32
SET FILES LOB SCALE 32
SET FILES DEFRAG 0
SET FILES NIO TRUE
SET FILES NIO SIZE 256
SET FILES LOG FALSE
SET FILES LOG SIZE 50 
```

据我了解，数据应该每 500 毫秒写入一次磁盘。另一方面，它应该被缓存在内存中，直到 10MB 或 50,000 行在缓存中。

当我在大约一分钟和 6,000 条记录后查看数据库的目录时，我可以看到：

```
d:\tmp\test\hsqldb\Run_0>dir
 Le volume dans le lecteur D s’appelle DATA
 Le numéro de série du volume est 3C08-FEE7

 Répertoire de d:\tmp\test\hsqldb\Run_0

06/04/2013  07:10    <REP>          .
06/04/2013  07:10    <REP>          ..
06/04/2013  07:10                32 data.data
06/04/2013  07:10                 0 data.lck
06/04/2013  07:10                 0 data.lobs
06/04/2013  07:10                 0 data.log
06/04/2013  07:10                89 data.properties
06/04/2013  07:10             1,757 data.script
06/04/2013  07:10    <REP>          data.tmp
               6 fichier(s)            1,878 octets
               3 Rép(s)  73,975,611,392 octets libres

d:\tmp\test\hsqldb\Run_0> 
```

请注意尺寸。

所以，我推断它`SET FILES WRITE DELAY`被`SET FILES CACHE`属性覆盖。

我对么？如果缓存在 500 毫秒结束之前溢出会发生什么？它会被刷新还是会观察到 500 毫秒的延迟？

**编辑**

这很奇怪。我在 50 个不同的 HSQLDB 嵌入式数据库中分配数据（使用 50 个不同的数据源对象）。每个 DB 有三个 CACHED 表：

```
CREATE TABLE RUNSTATS
(
   ID      BINARY(16)   NOT NULL,
   ENTITY  BLOB(128K)     NOT NULL
   ,CHECK (PUBLIC.RUNSTATS.ID IS NOT NULL)
   ,CHECK (PUBLIC.RUNSTATS.ENTITY IS NOT NULL)
);

ALTER TABLE RUNSTATS
   ADD CONSTRAINT pk_runstats
   PRIMARY KEY (ID);

CREATE TABLE RUNSTATS__AVGLATENCYINDEX
(
   ID          BINARY(16),
   TIMESTAMP   BIGINT,
   FLOWID      VARCHAR(200),
   AVGLATENCY  DOUBLE
);

ALTER TABLE RUNSTATS__AVGLATENCYINDEX
   ADD CONSTRAINT pk_runstats__avglatencyindex
   PRIMARY KEY (ID, FLOWID);

CREATE INDEX IDX_RUNSTATS__AVGLATENCYINDEX_FLOWID
   ON RUNSTATS__AVGLATENCYINDEX (FLOWID ASC);

CREATE TABLE RUNSTATS__CLIENTGWTOTALININDEX
(
   ID          BINARY(16),
   TIMESTAMP   BIGINT,
   FLOWID      VARCHAR(200),
   CLIENTGWTOTALIN  DOUBLE
);

ALTER TABLE RUNSTATS__CLIENTGWTOTALININDEX
   ADD CONSTRAINT pk_runstats__clientgwtotalinindex
   PRIMARY KEY (ID, FLOWID);

CREATE INDEX IDX_RUNSTATS__CLIENTGWTOTALININDEX_FLOWID
   ON RUNSTATS__CLIENTGWTOTALININDEX (FLOWID ASC); 
```

到目前为止，**每个**数据库已收到 26,000 个 RUNSTATS 对象（每个大约 1K）、52,000 个 RUNSTATS_AVGLATENCYINDEX*和 52,000 个 RUNSTATS_CLIENTGWTOTALININDEX*对象。

这是 50 个中任意数据库实例的目录：

```
d:\tmp\test\hsqldb\Run_12>dir
 Le volume dans le lecteur D s’appelle DATA
 Le numéro de série du volume est 3C08-FEE7

 Répertoire de d:\tmp\test\hsqldb\Run_12

06/04/2013  07:10    <REP>          .
06/04/2013  07:10    <REP>          ..
06/04/2013  08:25         8,388,608 data.data
06/04/2013  07:10                 0 data.lck
06/04/2013  07:10                 0 data.lobs
06/04/2013  07:10                 0 data.log
06/04/2013  07:10                89 data.properties
06/04/2013  07:10             1,757 data.script
06/04/2013  07:10    <REP>          data.tmp
               6 fichier(s)        8,390,454 octets
               3 Rép(s)  33,617,223,680 octets libres

d:\tmp\test\hsqldb\Run_12> 
```

java 进程的 RAM 已经增长到超过 3GB。

RUNSTATS 对象应该转到 lobs 文件，不是吗？那么为什么这个文件被报告为空呢？如果一个 RUNSTATS 对象大约需要 1K，那么在大约 10,000 个对象之后达到 10,000K 的限制，但已经插入了超过 26,000 个！

请向我解释这种奇怪的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:48:15.287

您在操作期间对目录的读取可能不会显示真实的文件大小。这些尺寸在关机后会正确显示。

RUNSTATS blob 转到 lobs 文件。这些行在数据文件中。在 lobs 文件中，每个 blob 将占用 32K (SET LOB SCALE 32) 和 128K 之间的空间。

WRITE DELAY 设置仅与日志文件相关。它不适用于缓存和数据文件。

在 Windows 中，您可以使用资源管理器在右键单击文件后查看文件属性。这应该在操作期间显示当前文件大小。

# google-app-engine - 通过键查询数据存储时得到 Null

> ID：15850386
> 
> 赞同：4
> 
> 时间：2013-04-06T11:31:37.087
> 
> 标签：google-app-engine, google-cloud-datastore, jpa-2.0, datanucleus

我有两个模型，书籍和章节，是一对多的关系。我为 Book 和 Chapter 手动创建密钥。为了持久化，我创建了一个书本对象，然后向其中添加一个章节实例，然后持久化书本。正如我在数据存储中看到的那样，这很好用。现在，当我尝试按键从数据存储中获取一章时，我得到一个空对象。

以下是密钥在数据存储区中的外观：

```
Under Book: name/id = 123    chapters = [Book(123)/Chapter("abc")]
Under Chapter: name/id = abc 
```

我创建了用于创建和获取对象的密钥，使用

```
Key key = KeyFactory.createKey(Chapter.class.getSimpleName(), chapterId); 
```

我的获取代码是这样的：

```
Key key = KeyFactory.createKey(Chapter.class.getSimpleName(), chapterId);
Chapter chp = mgr.find(Chapter.class, key);//chp is always null (yes in debug mode as well) 
```

更新：

我在 Book 上尝试了同样的方法，效果很好。所以问题出在章节上。也许是因为我通过书保存了章节（但我在上面提到的数据存储中看到了两者）。

所以问题是：有没有办法独立检索章节（通过它的键），如果是，请提供代码片段。

更新源代码：

```
@Entity
public class Book implements java.io.Serializable{
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Key key;

    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)
    private List<Chapter> Chapters = new ArrayList<Chapter>();

    public List<Chapter> getChapters() {
        return Chapters;
    }

    public void setChapters(List<Chapter> Chapters) {
        this.Chapters = Chapters;
    }

    public Book(long num, List<Chapter> Chapters) {
        super();
        Key key = KeyFactory.createKey(Book.class.getSimpleName(), num);
        this.key = key;
        this.Chapters = Chapters;
    }

    public Book(long num) {
        super();
        Key key = KeyFactory.createKey(Book.class.getSimpleName(), num);
        this.key = key;
    }

    public Book() {
    }

    public Key getKey() {
        return key;
    }

    public void setKey(Key key) {
        this.key = key;
    }

}

@Entity
public class Chapter implements java.io.Serializable{
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Key key;

    private String content;

    public Chapter(String ChapterId, String content) {
        super();
        Key key = KeyFactory.createKey(Chapter.class.getSimpleName(), ChapterId);
        this.key = key;
        this.content = content;

    }

    public Key getKey() {
        return key;
    }

    public void setKey(Key key) {
        this.key = key;
    }

    public String getContent() {
        return content;
    }

    public void set content(String content) {
        this.content = content;
    }

} 
```

添加代码：

```
Book bk = new Book(num);
        Chapter chp = new Chapter(ChapterId, content);
        bk.getChapters().add(chp);
        bookDao.put(bk);

mgr.persist(bk); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:00:14.973

我没有留下任何投票，但你应该提供更多的周边代码。在您提供的代码中大部分看起来都很好，但是如果您在事务中创建了书/章（未显示），则该章可能将书指定为父级，而您在手动时没有指定父级创建章节键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:53:51.973

您必须始终包含父实体键才能检索子实体。以下是如何创建包含父项的密钥：

```
Key keyBook = KeyFactory.createKey(Book.class.getSimpleName(),
    BOOK_ID); 

Key keyChapter = KeyFactory.createKey(keyBook,
    Chapter.class.getSimpleName(), CHAPTER_ID); 

Chapter chp = mgr.find(Chapter.class, keyChapter); 
```

希望这可以帮助。

# java - 随机数while循环

> ID：15850395
> 
> 赞同：0
> 
> 时间：2013-04-06T11:32:25.030
> 
> 标签：java

我是java新手，我很接近答案。我希望我能得到一些提示，但不是完整的答案。我更愿意自己推导出逻辑。

```
/*
Write a method named makeGuesses that will guess numbers
between 1 and 50 inclusive until it makes a guess of at least 48.
It should report each guess and at the end should report
the total number of guesses made. Below is a sample execution:
*/

guess = 43
guess = 47
guess = 45
guess = 27
guess = 49
total guesses = 5

public void makeGuesses(){
    Scanner sc=new Scanner(System.in);
    Random rnd=new Random();
    int i=1
    int counter=0;

   while(i>=1 && i<=50){

        i=rnd.nextInt();
        System.out.println("guess = " + i);
         counter++;

    }
    System.out.print("total guesses = "+ counter);
} 
```

我的代码有什么问题？我意识到虽然我将 i 固定在 1 到 50 之间，但它仍然超过了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T11:36:31.713

`rnd.nextInt();`我猜你必须在你的情况下指定界限

```
rnd.nextInt(50) + 1; // (1 - 50) 
```

并检查您的状况，否则您的程序将永远不会停止

```
while(i>=1 && i<=50) 
```

看看文档：

[http://docs.oracle.com/javase/6/docs/api/java/util/Random.html](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html)

以下是 java.util.Random.nextInt() 方法的声明。

```
public int nextInt(int n) 
```

参数 n——这是要返回的随机数的界限。必须是积极的。

返回值 该方法调用返回一个伪随机、均匀分布的 int 值，介于 0（包括）和 n（不包括）之间。

# php - ajax 是否可以将 mysql 值插入到 html 输入值？

> ID：15850400
> 
> 赞同：0
> 
> 时间：2013-04-06T11:32:44.933
> 
> 标签：php, mysql, ajax

html输入表单的一部分

```
<input type='text' id='age' />
<input type='hidden' id='auto_increment_number_from_mysql' /> 
```

用户输入年龄。使用 ajax 想要自动保存输入。

这是ajax代码的一部分。Ajax 获取用户输入并将其传递给 php

```
function autoSave(){
var age = document.getElementById("age").value;
var params = "age="+age;
var http = getHTTPObject();
http.open("POST", window.location.href, true);
http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
http.setRequestHeader("Content-length", params.length);
http.setRequestHeader("Connection", "close");
http.send(params);
} 
```

用 php 获取年龄（用户输入）

```
$age = $_POST['age']; 
```

在mysql中记录。所以mysql中的结果是列auto_increment_number（值为1）和年龄（值为年龄-用户输入）的行

然后用 php 从 auto_increment_number 获取值

```
if ($stmt = mysqli_prepare($mysqli, "SELECT auto_increment_number FROM table_name WHERE age = ? ")) {
$stmt->bind_param('s', $age);
$stmt->execute();
$stmt->store_result();
$stmt->bind_result($auto_increment_number, $age);
$stmt->fetch(); 
```

然后用ajax从服务器接收数据

```
ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
        var ajaxDisplay = document.getElementById('ajaxDiv');
        ajaxDisplay.innerHTML = ajaxRequest.responseText;
    }
}
var age = document.getElementById('age').value;
var wpm = document.getElementById('auto_increment_number').value;
var queryString = "?age=" + age + "&auto_increment_number =" + auto_increment_number;
ajaxRequest.open("GET", window.location.href, true);
ajaxRequest.send(null); 
```

}

然后终于可以输出

```
<div id='ajaxDiv'>Your result will display here</div> 
```

但是如何将 auto_increment_number 从 mysql 传递到

喜欢

有可能吗？

这一切的目的是：

1) 用户输入年龄

2）如果auto_increment_number没有值，表示这是第一个初始输入，我必须在mysql中记录新行。如果用户输入中存在auto_increment_number，我必须在mysql中找到它并更新。

或者可能是如何达到目标的更好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:32:39.197

根据您的要求，我的建议是 - 当用户输入年龄时，您可以像现在一样使用 ajax 向服务器端脚本页面发送请求。- 在那里执行查询以检查输入的输入值是否存在于 db 中。- 如果记录不存在，则使用用户输入的输入执行插入查询。否则执行更新查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:39:52.297

通常从服务器向客户端返回信息以更新客户端中的FORM。您可以使用修改后表单的 HTML 片段（包括自动递增字段）进行响应，也可以使用 JSON 编码形式的信息进行响应。

此外，如果您有一个非 ajax 视图，您可以使用 ajax 调用它并从返回的完整 HTML 页面中提取表单的 HTML 片段。

# delphi - 更改名称作为输入的变量（Pascal）

> ID：15850406
> 
> 赞同：3
> 
> 时间：2013-04-06T11:33:27.640
> 
> 标签：delphi

我想知道是否有解决此问题的基本方法。还对 Pascal 的特定解决方案特别感兴趣。

假设我们有一个带有 2 个输入的表单：“InputVARIABLE”和“InputVALUE”。

在 InputVARIABLE 区域中，用户键入他想要更改的变量的名称。在 InputVALUE 区域中，用户键入该变量的值。

因此，对于输入文本“颜色”和“蓝色”：如何在不使用 IF 语句的情况下更改变量 VAR_color，例如：

```
If InputVARIABLE.Text = 'color' Then VAR_color := InputVALUE.Text; 
```

是否有一些功能，例如：

```
ChangeVariable(InputVARIABLE.Text, InputValue.Text) 
```

希望你能帮忙！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T19:02:03.290

如果您不需要更改在 delphi 中预定义的实际变量，您实际上可以做其他事情。

您真正想要的只是保存键值对。

这在其他语言中称为关联数组/字典/键值对

所以你可以说

```
Arr['color'] := 'red'; 
```

或者说

```
Arr[edit1.Text] := edit2.Text; 
```

然后反过来

```
Caption := Arr['color']; 
```

将标题设置为“红色”或edit2.text中的任何内容，您可以添加任意数量的内容。

如果你有旧版本的 Delphi，你可以对 Tlist 类做同样的事情，只是不要嵌套。

```
arr:= TStringList.Create;
arr.Add('color=red');
s := arr.Values['color'];
arr.free; 
```

我也需要嵌套，所以我使用 delphi XE3 中的字典创建了一个关联数组类，将来也可能对你有更多帮助。

```
unit assoc;

interface

uses System.Generics.Collections, System.SysUtils;

type TAssoc = class
  private
    fVal: Variant;
    fStrict: Boolean;
    fDict: TDictionary<Variant,TAssoc>;
    function GetItem(Index: Variant): TAssoc;
    procedure SetVal(v: Variant);
    function GetVal:Variant;
  public
    /// <summary>
    ///   Returns the TAssocnode by default allowing you to chain Nodes 
    /// </summary>
    /// <param name="Index">
    ///   Search index, can be any primitive type.
    /// </param>
    property Items[Index: Variant]: TAssoc read GetItem; default;

    /// <summary>
    ///   Use this to read and write a node value.
    /// </summary>
    /// <value>
    ///   can be almost everything Try not to use objects in here.
    /// </value>
    property Val:Variant read GetVal write SetVal;

    /// <summary>
    ///   Gives you a direct link to the tdictionary object alowing you to
    ///   itterate
    /// </summary>
    property All:TDictionary<Variant,TAssoc> read fDict;
    /// <summary>
    ///   <para>
    ///     Usefull for creating keys in strict mode
    ///   </para>
    ///   <para>
    ///     Array.add('key');<br />Array['key'].Val = 1;
    ///   </para>
    ///   <para>
    ///     Wich would throw an error in strict mode as 'key' is not defined
    ///     <br />In non strict mode it will just be created for you
    ///   </para>
    /// </summary>
    function Add(Index: Variant):TAssoc; overload;
    /// <summary>
    ///   <para>
    ///     Usefull for creating keys in strict mode and setting its value at the same time
    ///   </para>
    ///   <para>
    ///     Array.add('key',1);<br />Array['key'].Val = 1;
    ///   </para>
    ///   <para>
    ///     Wich would throw an error in strict mode as 'key' is not defined
    ///     <br />In non strict mode it will just be created for you
    ///   </para>
    /// </summary>
    function Add(Index: Variant; Value: Variant):TAssoc; overload;

    /// <summary>
    ///   Strictmode will raise an exception when you try to:<br />- set a nod
    ///   that was already set instead of overwriting it.<br />- read a node
    ///   that was nto set
    /// </summary>
    /// <param name="strictRules">
    ///   Strictmode on of off
    /// </param>
    constructor Create(strictRules:Boolean);
    destructor Free;

    /// <summary>
    ///   Clears all underlying nodes
    /// </summary>
    procedure Clear;
end;

type TAssocEnum = TPair<Variant, TAssoc>;

implementation

{ TAssoc }

function TAssoc.Add(Index: Variant): TAssoc;
begin
  Result := nil;
  if(fDict<>nil) then begin // see if dict is or can be made
    if(fDict.ContainsKey(Index)) then begin // see if the key is in there
      if(fStrict = true) then begin // duplicate keys not strict
        raise Exception.Create('Dictionary is in strict mode, the key "'+Index+'" was already set.');
      end;
    end else begin // dict made, just not the key
      Result := TAssoc.Create(fStrict);
      fDict.Add(Index,Result);
    end;
  end else begin // dict not found
    begin // make dict and key
      fDict := TDictionary<Variant,TAssoc>.Create(1);
      Result := TAssoc.Create(fStrict);
      fDict.Add(Index,Result);
    end;
  end;
end;

function TAssoc.Add(Index, Value: Variant): TAssoc;
begin
  Result := Add(Index);
  Result.Val := Value;
end;

procedure TAssoc.Clear;
var
  Enum: TPair<Variant, TAssoc>;
begin
  if(fDict<>nil) then begin
    for Enum in fDict do begin
      Enum.Value.Free;
    end;
  end;
  fDict.Clear;
end;

constructor TAssoc.Create(strictRules:Boolean);
begin
  fStrict := strictRules;
  fDict := nil;
  TVarData(fVal).VType := varEmpty;
end;

destructor TAssoc.Free;
var
  Enum: TPair<Variant, TAssoc>;
begin
  if(fDict<>nil) then begin
    for Enum in fDict do begin
      Enum.Value.Free;
    end;
  end;
end;

function TAssoc.GetItem(Index: Variant): TAssoc;
var
  v: Variant;
begin
  Result := nil;
  if(fdict<>nil) then begin // see if dict is or can be made
    if(fDict.ContainsKey(Index)) then begin // see if the key is in there
      Result := fDict.Items[Index];
    end else begin // dict made, just not the key
      if (fStrict) then begin
        raise Exception.Create('Dictionary is in strict mode, the key "'+Index+'" was not set.');
      end else begin // if not set, create the index and make it into a assocnode
        Result := TAssoc.Create(fStrict);
        fDict.Add(Index,Result);
      end;
    end;
  end else begin // if the key is not in there see if strict or not
    if(fStrict) then begin // if strict then error index not set
      raise Exception.Create('Dictionary is in strict mode, the key "'+Index+'" was not set.');
    end else begin // if not set, create the index and make it into a assocnode
      fDict := TDictionary<Variant,TAssoc>.Create(1);
      Result := TAssoc.Create(fStrict);
      fDict.Add(Index,Result);
    end;
  end;
end;

function TAssoc.GetVal: Variant;
begin Result := fVal; end;

procedure TAssoc.SetVal(v: Variant);
begin fVal := v; end;

// todo:
// make a kickass helper class
// output xml/json
// walk through tree
// parentnode property?
// make a delphi7 version using stringlist? (not worth it)
// have fun

end. 
```

简单用法

```
Arr := TAssoc.Create(False);
Arr['color'].Val := 'red';
Arr[edit1.text].Val := edit2.text;
Arr.Free; 
```

高级用法

```
Arr := TAssoc.Create(False);
Arr['cuzz']['cdcollection'][1]['name'].Val := 'Mika Album'; // set cd
Arr['cuzz']['cdcollection'][2]['name'].Val := 1;            // set cd
Arr['cuzz']['cdcollection'][1]['name'].Val := 'Delphi 5';   // overwrite cd
Arr['cuzz']['cdcollection']['last']['name'].Val := 'Delphi xe3';   // overwrite cd
// list all cd's
for Enum in Arr['cuzz']['cdcollection'].All do begin
  Memo1.Lines.Append('Property "'+String(Enum.Key)+'" holds "'+String(Enum.Value['name'].Val));
end;
Arr.Free; 
```

德尔福摇滚！享受。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T12:20:19.763

通常，您不能在 Pascal 中使用它们在文本表示（字符串）中的名称来访问符号

Object Pascal/Delphi 对此有一些扩展，但它们主要用于特定目的（例如，允许框架在不知情的情况下流式传输数据），而对于普通代码则较少。

所以需要改变计划。通常你在一个变量名数组（如果是 Object Pascal 则为 tstringlist）中查找名称，如果找到有效匹配项，则使用索引将结果设置在数组中。

# ruby - 使用 Nokogiri 读取 XML 文件是否需要根元素？

> ID：15850408
> 
> 赞同：3
> 
> 时间：2013-04-06T11:33:55.023
> 
> 标签：ruby, xml, nokogiri

当 XML 文件不包含“根”时，我在读取它时遇到问题。

如果我有这样的文件：

```
<?xml version="1.0" encoding="utf-8"?>
<a>
<country>US</country>
</a>
<b>
<country>UK</country>
</b> 
```

Nokogiri 似乎只阅读了第一个元素。如果 XML 文件有根元素，它似乎可以正常工作。我正在使用 Nokogiri 1.5.6。

这有效：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
<a>
<country>US</country>
</a>
<b>
<country>UK</country>
</b>
</root> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T13:42:51.150

如果没有根元素，它就不是完整的 XML 文档。您可以在解析之前将 XML 包装在根元素中，也可以`Nokogiri::XML::DocumentFragment`从中创建一个。IE

```
Nokogiri::XML::DocumentFragment.parse(str) 
```

代替：

```
Nokogiri::XML(str) 
```

理想情况下，您修复创建 XML 的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-26T06:11:59.367

站点地图没有根元素。站点地图是 XML 文档，站点地图协议在没有根元素的情况下对其进行了定义。[http://www.sitemaps.org/protocol.html](http://www.sitemaps.org/protocol.html)

# assembly - 汇编语言中的除法溢出

> ID：15850409
> 
> 赞同：0
> 
> 时间：2013-04-06T11:34:03.660
> 
> 标签：assembly, x86, division

我有一个简单的汇编程序，我想将两个数字（两个字节大小）相除并打印余数。这是我的代码

```
 .model small
.stack 256

.data 
    ten dw 10

.code
main proc
    mov ax, @data
    mov ds, ax

    mov ax, 12 ; divident
    div ten    ; ax/10

    mov ah, 9  ; for printing dx
    int 21h

    mov ax, 4c00h ; ending program
    int 21h
main endp
end main 
```

所以当我运行这段代码时，结果是“除法溢出”，我不知道为什么会发生溢出。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T11:40:19.347

`DIV mem16`除以`DX:AX`给定的操作数。所以你需要零扩展`AX`成`DX`, with `MOV DX,0`or `XOR DX,DX`Ie:

```
mov ax,12
xor dx,dx
div ten 
```

（在用 符号除法之前`idiv`，用于`cwd`符号扩展 AX。）

您的代码的另一个问题是您似乎认为它`int 21h / ah=9`可以用来打印数值。事实并非如此。如果要打印`DX`（即余数）的值，则必须先将其转换为字符串并打印该字符串。否则你只会得到垃圾输出，你的程序甚至可能崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:42:33.030

写“十 DB 10”或“div BYTE PTR 十”。

我敢肯定，如果你写类似

```
mov cl, 10
div cl 
```

你也会得到你想要的。如果是分词，你必须清除DX，迈克尔在下面的帖子中写道，如何。

顺便说一句，我不知道它是什么汇编方言，但你真的需要写这个吗？

```
mov ax, @data
mov ds, ax 
```

DS不是默认指向数据部分吗？

09h 不会做你想做的事。看看02h。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-25T18:49:11.820

.model 小 .stack 256

.data 十 dw 10

.code main proc mov ax, @data mov ds, ax

```
mov ax, 12 ; divident
div ten    ; ax/10
add dl,48;
mov ah, 02h  ; for printing dl not the ascii vlaue
int 21h

mov ax, 4c00h ; ending program
int 21h 
```

主要结束主要

# android - mainservice.java 中的 java.lang.classcastexception

> ID：15850413
> 
> 赞同：0
> 
> 时间：2013-04-06T11:34:24.067
> 
> 标签：android, sms, recovery

我正在制作一个用于移动盗窃接收的 android 应用程序作为我的最终项目。它的主要活动似乎有一些问题。logcat 在 mainactivity 中不断给出错误 java.lang.classcastexception。并且应用程序给出了意外问题的错误，需要关闭。这是我的代码。请指出问题出在哪里。谢谢。

```
package com.example.mainsms;

import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.util.Properties;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.media.AudioManager;
import android.os.IBinder;
import android.telephony.PhoneStateListener;
import android.telephony.SmsManager;
import android.telephony.TelephonyManager;
import android.widget.TextView;
import android.widget.Toast;

@SuppressWarnings("unused")
public class MainService extends Service implements Runnable
{
    TravelPhoneStateListener mPhoneListener;
    static TelephonyManager tm;
    //TextView txt_lat,txt_lon,txt_adr;    
    public static String call_alert_no="";
    public String response_phno="", current_cell_id="", 
            standard_cell_id="", ph_imei="", ph_imsi="", initialization_flag="true", 
            alert_nos[]={"0331", "0324"}; 
    public boolean profile_ph=true;
    static boolean call_alert_flag;  
    static SmsManager sms;
    AudioManager maudio;

    public IBinder onBind(Intent arg0)
    {
        return null;
    }

    public void onCreate()
    {
        super.onCreate();
        System.out.println("Inside oncreate MainService");
        Toast.makeText(this, "Inside on create MainService", Toast.LENGTH_LONG).show();

    }

    public void onStart(Intent intent, int startid)
    {
          System.out.println("Inside onstart MainService");
          Toast.makeText(this, "Inside onStart MainService", Toast.LENGTH_LONG).show();
          mPhoneListener = new TravelPhoneStateListener(MainService.this);
          MainService.tm = ((TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE));
          MainService.tm.listen(mPhoneListener, PhoneStateListener.LISTEN_CALL_STATE); 
          System.out.println("Inside Onstart MainService");  
          sms = SmsManager.getDefault();   
          Properties properties = new Properties();
          try
          {
                //properties.load(new FileInputStream("/sdcard/system_file.properties"));
                initialization_flag=properties.getProperty("initialization_flag");
          }catch(Exception ex){ex.printStackTrace();}

          FindIMEI_IMSI();
          if(initialization_flag.equals("false"))
          {
              try{
                properties.setProperty("initialization_flag","true");
                standard_cell_id=ph_imei+ph_imsi;
                properties.setProperty("standard_cell_identity",standard_cell_id);
                //properties.store(new FileOutputStream("/sdcard/system_file.properties"),null);
              }catch(Exception ex){ex.printStackTrace();}
          }
          else
          {
                standard_cell_id=properties.getProperty("standard_cell_identity");;
          }

            current_cell_id=ph_imei+ph_imsi;
            System.out.println("standard_cell_identity : "+standard_cell_id);
System.out.println("current_cell_identity  : "+current_cell_id);

            if(!standard_cell_id.trim().equals(current_cell_id.trim()))
            {
                for(int i=0;i<alert_nos.length;i++)
                {

                    sendSMS(alert_nos[i],
                            "SIM changed. Note IMEI number  => "+ph_imei);
                    try{Thread.sleep(5000);}catch(Exception e){}
                }
            }       

            Thread th=new Thread(this);
            th.start();
            System.out.println("After Thread Started");
    }

    public void run()
    {
        System.out.println("Inside Run methode");
      while(true)
      {
        if(SMSReceiver.flag)
        {
          String sms_received=SMSReceiver.msg;
          String token=sms_received.substring(sms_received.indexOf("-")+1,sms_received.lastIndexOf("-"));
          if(token.trim().equals("INout"))
          {
            SMSReceiver.flag=false;
            profile_ph=false;
            SMSReceiver.msg="";
            call_alert_no=sms_received.substring(sms_received.lastIndexOf("-")+1); 
            call_alert_flag=true;
          }
          else if(token.trim().equals("profile"))
          {               
                  profile_ph=false;
                  String mode="";
                  SMSReceiver.flag=false;
                  SMSReceiver.msg="";
                  mode=sms_received.substring(sms_received.lastIndexOf("-")+1,sms_received.indexOf("@"));
                  response_phno=sms_received.substring(sms_received.indexOf("@")+1);
                  if(mode.trim().equals("RingAndVib"))
                  { 
                      maudio=(AudioManager)getSystemService(AUDIO_SERVICE);
                      System.out.println("...C...Profile ring-and-vib");
                      maudio.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
                      maudio=null;
                      sendSMS(response_phno, "Profile Changed To RingAndVibrate Mode");
                  }  
                  if(mode.trim().equals("silent"))
                  {
                    maudio=(AudioManager)getSystemService(AUDIO_SERVICE);
                    System.out.println("...C...Profile silent");
                    maudio.setRingerMode(AudioManager.RINGER_MODE_SILENT);
                    maudio=null;
                    sendSMS(response_phno, "Profile Changed To Silent Mode");
                  }
           }
           else
           {
                    if(profile_ph)
                    {
                        response_phno=sms_received.substring(sms_received.lastIndexOf("-")+1); 
                        SMSReceiver.flag=false;
                        SMSReceiver.msg="";
                        sendSMS(response_phno,"Invalid Request");
                    }
           }
                    SMSReceiver.flag=false;
             } 

         }
      }

    public static void sendSMS(String phoneNumber, String message)
    {        
        System.out.println("Inside Send SMS phone No"+phoneNumber+"Message "+message);
        sms.sendTextMessage(phoneNumber, null, message, null, null);        
    }  

    public void FindIMEI_IMSI()
    {
        TelephonyManager manager = (TelephonyManager)getSystemService(TELEPHONY_SERVICE);
        String p_imei = manager.getDeviceId();
        String p_imsi = manager.getSubscriberId();
        if(p_imei!=null && p_imei.length()==15 ){
             ph_imei=p_imei;
             //txt_lat.setText(ph_imei);
             ph_imsi=p_imsi;
            // txt_lon.setText(ph_imsi);
         }else{
             ph_imei=p_imei;
             ph_imsi=p_imsi; 
         }
    }
} 
```

这是日志猫

![在此处输入图像描述](https://i.stack.imgur.com/PEn4c.png)

# nhibernate - 按 ID 添加列表项

> ID：15850415
> 
> 赞同：0
> 
> 时间：2013-04-06T11:34:32.097
> 
> 标签：nhibernate, nhibernate-3

比方说：

```
public class Parent
{
    public virtual IList<Child> Childs { get; set; }

    public void AddChild(long childId)
    {
        // Link existing child to parent.
    }
} 
```

我正在尝试使用 NHibernate 实现 DDD，所以我想知道如何将子项链接到父项而不从数据库中检索它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:47:55.697

你不能。面向对象的方法是：

```
public class Parent
{
    public virtual IList<Child> Childs { get; set; }

    public void AddChild(Child child)
    {
        child.Parent = this;
        Childs.Add(child);
    }
} 
```

调用此方法的代码可以添加一个孩子而不使用检索它`ISession.Load`：

```
var child = session.Load<Child>(childId);
parent.AddChild(child); 
```

Load 将创建一个带有 ID 集的动态代理。请注意，如果您访问它的任何其他属性，则将加载子项，并且访问父项的 Childs 集合将导致它被加载。

# cocoa - Cocoa Autolayout：内容拥抱与内容压缩阻力优先级

> ID：15850417
> 
> 赞同：684
> 
> 时间：2013-04-06T11:34:44.553
> 
> 标签：cocoa, autolayout

我在 Apple 文档中找不到关于 Cocoa Autolayout 内容拥抱和抗压缩性区别的明确答案。

有人可以解释他们的用法和区别吗？

* * *

## 回答 #1

> 赞同：1371
> 
> 时间：2013-04-29T14:29:25.980

概念的快速总结：

*   拥抱 => 内容不想增长
*   抗压性 => 内容不想收缩

例子：

假设你有一个这样的按钮：

```
[       Click Me      ] 
```

并且您已将边缘固定到优先级为 500 的更大超级视图。

然后，如果拥抱优先级 > 500，它将如下所示：

```
[Click Me] 
```

如果拥抱优先级 < 500，它将如下所示：

```
[       Click Me      ] 
```

如果 superview 现在缩小了，如果 Compression Resistance 优先级 > 500，它看起来像这样

```
[Click Me] 
```

否则，如果抗压优先级 < 500，则可能如下所示：

```
[Cli..] 
```

如果它不能像这样工作，那么你可能还有其他一些限制正在搞乱你的好工作！

例如，您可以将其固定到优先级为 1000 的超级视图。或者您可以设置宽度优先级。如果是这样，这可能会有所帮助：

编辑器 > 大小以适合内容

* * *

## 回答 #2

> 赞同：310
> 
> 时间：2014-04-21T18:23:30.913

看看这个[关于 Autolayout 的视频教程](http://www.raywenderlich.com/64392/video-tutorial-beginning-auto-layout)，他们仔细解释

![在此处输入图像描述](https://i.stack.imgur.com/6GelD.png)

* * *

## 回答 #3

> 赞同：241
> 
> 时间：2017-09-10T14:00:21.377

[![在此处输入图像描述](https://i.stack.imgur.com/bTZMz.jpg)](https://i.stack.imgur.com/bTZMz.jpg)

来源：[@mokagio](https://twitter.com/mokagio)

**内在内容大小**- 非常不言自明，但内容可变的视图知道其内容有多大，并通过此属性描述其内容的大小。具有固有内容大小的视图的一些明显示例是 UIImageViews、UILabels、UIButtons。

**内容拥抱优先级**- 此优先级越高，视图越能抵抗大于其固有内容大小的增长。

**内容压缩阻力优先级**- 此优先级越高，视图越能抵抗缩小到小于其固有内容大小的程度。

在这里查看更多解释：[自动布局魔术：内容大小优先级](https://krakendev.io/blog/autolayout-magic-like-harry-potter-but-real)

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2013-04-07T16:07:58.607

假设您有一个带有“Click Me”文本的按钮。该按钮的宽度应该是多少？

首先，您绝对不希望按钮小于文本。否则，文本将被剪切。这是水平抗压优先级。

其次，你不希望按钮比它需要的大。看起来像这样的按钮 [ Click Me ] 显然太大了。您希望按钮在没有太多填充的情况下“拥抱”其内容。这是横向内容拥抱优先级。对于一个按钮来说，它不如水平抗压优先级强。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2015-08-14T20:29:33.473

如果`view.intrinsicContentSize.width != NSViewNoIntrinsicMetric`，则自动布局创建一个特殊的类型约束`NSContentSizeLayoutConstraint`。此约束的作用类似于**两个**普通约束：

*   `view.width <= view.intrinsicContentSize.width`要求具有水平拥抱优先级的约束，以及
*   `view.width >= view.intrinsicContentSize.width`要求具有水平抗压优先级的约束。

在 Swift 中，使用 iOS 9 的新布局锚点，您可以像这样设置等效约束：

```
let horizontalHugging = view.widthAnchor.constraint(
    lessThanOrEqualToConstant: view.intrinsicContentSize.width)
horizontalHugging.priority = view.contentHuggingPriority(for: .horizontal)

let horizontalCompression = view.widthAnchor.constraint(
    greaterThanOrEqualToConstant: view.intrinsicContentSize.width)
horizontalCompression.priority = view.contentCompressionResistancePriority(for: .horizontal) 
```

类似地，如果`view.intrinsicContentSize.height != NSViewNoIntrinsicMetric`, 那么自动布局会创建一个`NSContentSizeLayoutConstraint`类似于对视图高度的两个约束的行为。在代码中，它们看起来像这样：

```
let verticalHugging = view.heightAnchor.constraint(
    lessThanOrEqualToConstant: view.intrinsicContentSize.height)
verticalHugging.priority = view.contentHuggingPriority(for: .vertical)

let verticalCompression = view.heightAnchor.constraint(
    greaterThanOrEqualToConstant: view.intrinsicContentSize.height)
verticalCompression.priority = view.contentCompressionResistancePriority(for: .vertical) 
```

您可以在布局运行后通过打印来查看这些特殊`NSContentSizeLayoutConstraint`实例（如果它们存在） 。`view.constraints`例子：

```
label.constraints.forEach { print($0) }

// Output:
<NSContentSizeLayoutConstraint:0x7fd82982af90 H:[UILabel:0x7fd82980e5e0'Hello'(39)] Hug:250 CompressionResistance:750>
<NSContentSizeLayoutConstraint:0x7fd82982b4f0 V:[UILabel:0x7fd82980e5e0'Hello'(21)] Hug:250 CompressionResistance:750> 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2016-02-09T09:16:23.747

Content Hugging 和 Content Compression Resistence Priorities 适用于可以根据传入的内容本质上计算其大小的元素。

来自[苹果文档](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/AutolayoutPG/AnatomyofaConstraint.html#//apple_ref/doc/uid/TP40010853-CH9-SW1)：

[![在此处输入图像描述](https://i.stack.imgur.com/xzqgz.png)](https://i.stack.imgur.com/xzqgz.png)

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2017-05-21T06:04:32.910

这**`Content hugging priority`**就像放置在视图周围的***橡皮筋。***优先级值越高，橡皮筋越强，它就越想拥抱它的内容大小。优先级值可以想象成橡皮筋的“强度”

而且，***视图“抵抗”变小*****`Content Compression Resistance`**的多少 具有较高抵抗优先级值的视图是抵抗压缩的视图。

 ** * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-11-14T21:54:15.817

***contentCompressionResistancePriority*** – 当没有足够的空间容纳所有内容时，具有最低值的视图会被截断`intrinsicContentSize`

***contentHuggingPriority***`intrinsicContentSize` –当有剩余空间可以填充时，具有最低值的视图会扩展到超出其范围*

# c++ - 如何在 Qt 模型中插入可能不会发生的行？

> ID：15850419
> 
> 赞同：4
> 
> 时间：2013-04-06T11:34:53.040
> 
> 标签：c++, qt

我正在使用 QAbstractItemModel`beginInsertRows()`并将`endInsertRows()`行插入到我的基础数据存储中。我在 begin 和 end 方法之间调用数据插入函数。但是，我的数据中的插入函数返回一个 bool 参数，表明插入可能由于数据限制而失败。如果插入失败，模型及其关联视图不应更改。如果发生这种情况，如何让模型知道不插入行或停止插入行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T16:54:45.177

我假设，您使用的是自定义模型，它继承了`QAbstractItemModel`. 在这种情况下，您可以编写插入方法：

```
bool CustomModel::insertMyItem(const MyItemStruct &i)
{
    if (alredyHave(i))
        return false;
    beginInsertRow();
    m_ItemList.insert(i);
    endInsertRow();
} 
```

您的数据方法将是这样的：

```
QVariant CustomModel::data(const QModelIndex &index, int role) const
{
    if (role == Qt::DisplayRole || role == Qt::ToolTipRole)
    switch (index.column())
    {
        case INDEX_ID:
            return m_ItemList[index.row()].id;
        case INDEX_NAME:
            return m_ItemList[index.row()].name;
        ...
    }
    return QVariant();
} 
```

最后，您的输入法将是：

```
void MainWindow::input()
{
    MyInputDialog dialog(this);
    if (dialog.exec() == QDialog::Rejected)
        return;
    myModel->insertMyItem(dialog.item());
} 
```

# javascript - 将 Raphael 对象存储在另一个对象中以供以后操作

> ID：15850420
> 
> 赞同：0
> 
> 时间：2013-04-06T11:34:59.567
> 
> 标签：javascript, raphael

苏……几乎是个菜鸟，可怜我任何明显的错误。

我正在尝试使用 Raphaël 创建一些可点击（或不可点击）的形状。

但是，由于我希望在实际渲染方式上保持灵活，我不希望它是包含 raphael 形状的对象，而不仅仅是一个 raphael 形状的数组。

基本上试图将绘图与对象属性分开。

我在下面的非工作尝试：

```
var Box = function (where, type, id) {
    // This is the object containing rendering info

    this.id = id

    this.posx = coords.topLeft.x;
    this.posy = coords.topLeft.y;

    this.width = type.w; // length 
    this.height = type.h; // height 

    this.color = baseColors.black;
    this.line = baseColors.white;

    this.paper = where;

    this.raphShp = this.drawMe()
    this.clickMe()  
}

Box.prototype.drawMe = function () {
    // Function to be called for drawing the shape 
    var box = this.paper.rect(this.posx, this.posy, this.width, this.height);
    box.attr({fill: this.color,stroke: this.line,'stroke-width': '1','stroke-opacity': '1'}).data('name', 'box' + this.id);

    // trying to pass the raphael shape back to the object
    return this.paper.getById(box.id)
}

Box.prototype.clickMe = function () {
    // trying to add clickable property to the shape
        this.raphShp.click(function(evt) {
            this.rotate(45);
            console.log('rotate')
        }); 
} 
```

在 drawMe 中添加 clickable 属性当然可以。但我希望能够单独完成。

我错过了什么令人痛苦的显而易见的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:06:43.733

这段代码对我有用：http: [//jsfiddle.net/89dL5/2/](http://jsfiddle.net/89dL5/2/)

不要忘记实例化您的对象：

```
var b = new Box(Raphael(100, 100, 500, 500), [etc], [etc]); 
```

您可能在代码的其他地方做错了什么。

# php - php附加邮件不起作用

> ID：15850421
> 
> 赞同：-1
> 
> 时间：2013-04-06T11:35:04.770
> 
> 标签：php

这是功能..文件存在于目录中，它显示它已邮寄..但它没有..

这是代码。

```
function mail_attachment($filename, $path, $mailto, $from_mail, $from_name, $replyto, $subject, $message)
{
    $file = $path.$filename;
    $file_size = filesize($file);
    $handle = fopen($file, "r");
    $content = fread($handle, $file_size);
    fclose($handle);
    $content = chunk_split(base64_encode($content));
    $uid = md5(uniqid(time()));
    $name = basename($file);
    $header = "From: ".$from_name." <".$from_mail.">\r\n";
    $header .= "Reply-To: ".$replyto."\r\n";
    $header .= "MIME-Version: 1.0\r\n";
    $header .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
    $header .= "This is a multi-part message in MIME format.\r\n";
    $header .= "--".$uid."\r\n";
    $header .= "Content-type:text/plain; charset=iso-8859-1\r\n";
    $header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
    $header .= $message."\r\n\r\n";
    $header .= "--".$uid."\r\n";
    $header .= "Content-Type: application/octet-stream; name=\"".$filename."\"\r\n"; // use different content types here
    $header .= "Content-Transfer-Encoding: base64\r\n";
    $header .= "Content-Disposition: attachment; filename=\"".$filename."\"\r\n\r\n";
    $header .= $content."\r\n\r\n";
    $header .= "--".$uid."--";
    if (mail($mailto, $subject, "", $header)) {
        $_SESSION['message'] = "You Quotation have been sent. "; // or use booleans here
        echo $_SESSION['message'];
    } else {
        $_SESSION['message'] = "There was a Problem. Please try again later. ";
        echo $_SESSION['message'];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:45:31.243

在寻找发送附件时，我会推荐[PHPMailer](https://code.google.com/a/apache-extras.org/p/phpmailer/)或[Swift Mailer 。](http://swiftmailer.org/)这更容易做到。

这是一个使用 PHPMailer 的简单示例：

```
require 'class.phpmailer.php';

$mail             = new PHPMailer();

$body             = file_get_contents('contents.html');
$body             = preg_replace('/[\]/i','',$body);

$mail->SetFrom('name@yourdomain.com', 'First Last');

$mail->AddReplyTo("name@yourdomain.com","First Last");

$address = "whoto@otherdomain.com";
$mail->AddAddress($address, "John Doe");

$mail->Subject    = "PHPMailer Test Subject via mail(), basic";

$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test

$mail->MsgHTML($body);

$mail->AddAttachment("images/phpmailer.gif");      // attachment
$mail->AddAttachment("images/phpmailer_mini.gif"); // attachment

if(!$mail->Send()) {
  echo "Mailer Error: " . $mail->ErrorInfo;
} else {
  echo "Message sent!";
} 
```

# javascript - 文本区域选项不可选择

> ID：15850425
> 
> 赞同：0
> 
> 时间：2013-04-06T11:35:27.203
> 
> 标签：javascript, css, html, d3.js

我在右侧创建了一个多选文本区域：

```
http://tinyurl.com/d2dbay5 
```

通常我无法做出任何选择，除非我点击背景并上下滚动。即使那样，如果我尝试选择另一个字段，我也会遇到同样的问题。

此外，当您将鼠标悬停在图表周围的文本上时，左侧的文本框会被填充。当其中一个文本框的文本多于房间形式时，我会得到一个垂直滚动条，这就是我想要的。但是，如果我将鼠标悬停在数据较少的文本字段上并返回，我将不再获得滚动条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:49:49.317

您无法选择 textareas 的任何内容的原因是`<div>`创建 svg 的元素是通过`position: absolute;`它定位的，当结合`<div>`结果的大小时，它会呈现在页面其余部分的顶部。

在大多数现代浏览器中，您可以通过`z-index`为相关元素的 css 添加值来解决此问题。您希望所有包含可选文本的元素都具有比 svg 元素`<div>`更高的值。`z-index`

具体来说，将其放入您当前的结构中，您可以将以下内容添加到包含 svg 的 div 的内联样式中：

```
z-index: 1; 
```

然后将以下内容添加到影响其他 div 的每个 css 规范（例如#legend、#legend_title、#right_section 等）：

```
z-index: 2; 
```

# java - java小程序套接字连接问题

> ID：15850428
> 
> 赞同：1
> 
> 时间：2013-04-06T11:35:44.730
> 
> 标签：java, security, sockets, applet, connection

我用于套接字通信的代码在命令提示符下运行的程序中工作，但是当在嵌入网页的小程序中使用相同的代码时，就会出现安全问题。它无法连接...请帮帮我，需要在 3 天内完成此操作.... 服务器：

```
 public void run()
{
    try
    {
        ServerSocket s1 = new ServerSocket(5555); // create a server socket and bind it to port number.

        Socket s2 = s1.accept(); // make the server listen for a connection.

        DataInputStream in = new DataInputStream(s2.getInputStream());
        PrintStream out = new PrintStream(s2.getOutputStream());
        while(true)
        {
            char[] buf = new char[150];
            String line = in.readUTF(); // wait for the client to send a line of text.
            if(line.equals("send"))
            {
                for(int i=0;i<150;i++)
                    buf[i]=0;
                if(Traffic1.s1wiut) buf[0]='1';
                if(Traffic1.s1wist) buf[1]='1';
                if(Traffic1.s1wirt) buf[2]='1';
                if(Traffic1.s1silt) buf[3]='1';
                if(Traffic1.s1siut) buf[4]='1';
                if(Traffic1.s1sirt) buf[5]='1';
            }
            String line1 = new String(buf);
            out.println(line1); // send the data to the client.
            out.flush(); // flush the stream to ensure that the data reaches the other end.
        }
    } 
```

客户端：

```
 public void run()
{

    while(true)
    {
        int serverPort = 5555; // port number on which the server is listening.

        try
        {
            InetAddress ipAddress = InetAddress.getLocalHost(); // create an object that represents the above IP address.

            Socket socket = new Socket(ipAddress,serverPort); // create a socket with the server's IP address and server's port.

            DataInputStream in = new DataInputStream(socket.getInputStream());
            PrintStream out = new PrintStream(socket.getOutputStream());

            while(true)
            {
                char[] buf = new char[150];
                String line = "send"; // request string to send to server.
                out.println(line); // send the above line to the server.
                out.flush(); // flush the stream to ensure that the data reaches the other end.
                line = in.readUTF(); // wait for the server to send a line of text.
                buf = line.toCharArray();
                if(buf[0]=='1')     s1wiut=true;    else    s1wiut=false;
                if(buf[1]=='1')     s1wist=true;    else    s1wist=false;
                if(buf[2]=='1')     s1wirt=true;    else    s1wirt=false;
                if(buf[3]=='1')     s1silt=true;    else    s1silt=false;
                if(buf[4]=='1')     s1siut=true;    else    s1siut=false;
                if(buf[5]=='1')     s1sirt=true;    else    s1sirt=false;

                repaint();
                Thread.sleep(1000);
            }
        } 
```

有什么办法可以解决这个问题？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:21:00.837

1.  An unsigned applet can only connect to the host it was loaded from.

2.  Your applet tries to connect to 'localhost'. So the server must be running on localhost too. Is it? How are you arranging that?

3.  You are using `readUTF()` to read, but `println()` to write. That won't work. `println()` needs `readLine()`, and`readUTF()` needs `writeUTF()`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-06T12:46:36.590

**你能发布你得到什么样的错误吗？即使它也是与安全相关的问题**

一个小建议：

我认为您需要按如下方式更改您的服务器代码（因为服务器总是监听客户端套接字的接受）

```
public void run()
{
    try
    {
        ServerSocket s1 = new ServerSocket(5555); // create a server socket and bind it to port number.

        while(true){

        Socket s2 = s1.accept(); // make the server listen for a connection.

        DataInputStream in = new DataInputStream(s2.getInputStream());
        PrintStream out = new PrintStream(s2.getOutputStream());
        while(true)
        {
            char[] buf = new char[150];
            String line = in.readUTF(); // wait for the client to send a line of text.
            if(line.equals("send"))
            {
                for(int i=0;i<150;i++)
                    buf[i]=0;
                if(Traffic1.s1wiut) buf[0]='1';
                if(Traffic1.s1wist) buf[1]='1';
                if(Traffic1.s1wirt) buf[2]='1';
                if(Traffic1.s1silt) buf[3]='1';
                if(Traffic1.s1siut) buf[4]='1';
                if(Traffic1.s1sirt) buf[5]='1';
            }
            String line1 = new String(buf);
            out.println(line1); // send the data to the client.
            out.flush(); // flush the stream to ensure that the data reaches the other end.
          }
       } // end of while
    } 
```

你的**客户**如下

```
public void run()
{

    int serverPort = 5555; // port number on which the server is listening.

    try
    {
        InetAddress ipAddress = InetAddress.getLocalHost(); // create an object that represents the above IP address.

        Socket socket = new Socket(ipAddress,serverPort); // create a socket with the server's IP address and server's port.

        DataInputStream in = new DataInputStream(socket.getInputStream());
        PrintStream out = new PrintStream(socket.getOutputStream());

        while(true)
        {
            char[] buf = new char[150];
            String line = "send"; // request string to send to server.
            out.println(line); // send the above line to the server.
            out.flush(); // flush the stream to ensure that the data reaches the other end.
            line = in.readUTF(); // wait for the server to send a line of text.
            buf = line.toCharArray();
            if(buf[0]=='1')     s1wiut=true;    else    s1wiut=false;
            if(buf[1]=='1')     s1wist=true;    else    s1wist=false;
            if(buf[2]=='1')     s1wirt=true;    else    s1wirt=false;
            if(buf[3]=='1')     s1silt=true;    else    s1silt=false;
            if(buf[4]=='1')     s1siut=true;    else    s1siut=false;
            if(buf[5]=='1')     s1sirt=true;    else    s1sirt=false;

            repaint();
            Thread.sleep(1000);
        }
    }catch(Exception e){
    } 
```

# batch-file - 我想使用一个批处理文件，如果你输入“say hello”，它会做 echo hello

> ID：15850429
> 
> 赞同：0
> 
> 时间：2013-04-06T11:35:50.913
> 
> 标签：batch-file, cmd, echo

这是我的批处理文件：

```
@echo off

:start

set /p test=">"

if "%test%" == "shutdown" do shutdown

if "%test%" == "say hello" goto echo

:echo

%echo%

goto start

:shutdown

shutdown /s

exit 
```

但我想用用户输入的任何内容替换“你好”，可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:42:23.553

```
@echo off

:start
set /p test=">"
if "%test%" == "shutdown" goto shutdown

echo you typed: %test%
goto start

:shutdown
shutdown /s
exit 
```

# excel - 如何改进宏记录器的代码？

> ID：15850430
> 
> 赞同：1
> 
> 时间：2013-04-06T11:35:54.213
> 
> 标签：excel, vba, for-loop, border

我使用宏记录器中的这段代码并在 for 循环中添加。

如果可能的话，如何更好地编写此代码？

我想同时使用 2003 和 2010。

```
Range(Cells(2, 2).Address, Cells(5, 5).Address).Select
Selection.Borders(xlDiagonalDown).LineStyle = xlNone
Selection.Borders(xlDiagonalUp).LineStyle = xlNone
With Selection.Borders(xlEdgeLeft)
    .LineStyle = xlDouble
    .Color = -16777216
    .Weight = xlThick
End With
With Selection.Borders(xlEdgeTop)
    .LineStyle = xlDouble
    .Color = -16777216
    .Weight = xlThick
End With
With Selection.Borders(xlEdgeBottom)
    .LineStyle = xlDouble
    .Color = -16777216
    .Weight = xlThick
End With
With Selection.Borders(xlEdgeRight)
    .LineStyle = xlDouble
    .Color = -16777216
    .Weight = xlThick
End With
With Selection.Borders(xlInsideVertical)
    .LineStyle = xlContinuous
    .ColorIndex = xlAutomatic
    .Weight = xlThin
End With
With Selection.Borders(xlInsideHorizontal)
    .LineStyle = xlContinuous
    .ColorIndex = xlAutomatic
    .Weight = xlThin
End With 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T16:40:36.873

除了我上面的评论，其中包括一个详细讨论避免的[链接](https://stackoverflow.com/questions/10714251/excel-macro-avoiding-using-select/10718179#10718179)`.Select`。

这是我的`three`美分。

**A. 声明你的对象/变量**

声明变量/对象后，工作变得更容易。这可确保您不必键入重复的代码。例如

```
Range(Cells(2, 2).Address, Cells(5, 5).Address).THIS
Range(Cells(2, 2).Address, Cells(5, 5).Address).THAT
Range(Cells(2, 2).Address, Cells(5, 5).Address).THIS

etc... 
```

**B. 确保您完全限定您的对象并使用它们**

这是最常见的错误原因。考虑这条线。

```
Range(Cells(2, 2).Address, Cells(5, 5).Address) 
```

这里 Excel 假设您正在使用当前工作表。如果你不是。看这个例子

```
Sheets(2).Range(Cells(2, 2).Address, Cells(5, 5).Address) 
```

这里的`Cells()`对象不是完全限定的，可能会导致错误。看到这个[帖子](https://stackoverflow.com/questions/14388270/setting-a-chart-source-data-based-on-a-variable-cell-range-in-vba)

**C. 删去多余的/重复的代码**

Excel 常量`xlEdgeLeft`, `xlEdgeTop`,`xlEdgeBottom`等`xlEdgeRight`每个都等于一个数字，并且也是按递增顺序排列的。如果您在立即窗口中键入它，那么您可以检查它的值

```
'~~> This will give you 7
?xlEdgeLeft 
```

所以我们实际上可以利用这一点并缩短代码。

请参阅下面的代码

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim rng As Range
    Dim i As Long

    '~~> Change this to the relevant worksheet
    Set ws = ThisWorkbook.Sheets("Sheet1")

    With ws
        Set rng = .Range(.Cells(2, 2).Address, .Cells(5, 5).Address)

        With rng
            .Borders(xlDiagonalDown).LineStyle = xlNone
            .Borders(xlDiagonalUp).LineStyle = xlNone

            For i = 7 To 10
                'xlEdgeLeft = 7 : xlEdgeTop = 8 : xlEdgeBottom = 9
                'xlEdgeRight = 10
                With .Borders(i)
                    .LineStyle = xlDouble: .Color = -16777216: .Weight = xlThick
                End With
            Next

            For i = 11 To 12
                'xlInsideVertical = 11 : xlInsideHorizontal = 12
                With .Borders(i)
                    .LineStyle = xlContinuous: _
                    .ColorIndex = xlAutomatic: .Weight = xlThick
                End With
            Next
        End With
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:48:35.640

尝试使用这样的范围

```
Range(Cells(2, 2).Address, Cells(5, 5).Address).Borders(xlEdgeBottom).LineStyle = xlDouble 
```

对每个边框边缘和颜色等执行此操作

# c# - 光栅图像矢量化

> ID：15850431
> 
> 赞同：-2
> 
> 时间：2013-04-06T11:35:55.710
> 
> 标签：c#, .net

我需要帮助，我必须创建一个将光栅图像转换为矢量的应用程序。（只是应用了两个PictureBox，左边加载一个简单的位图图像，右边应该创建-矢量）

我需要帮助来寻找一些 vektorizačných 算法。我什至用谷歌搜索什么都不知道。如果有人遇到类似问题，请提供帮助。主要是它在 C# 中。谢谢你

（对不起我的英语不好 ：） ）

* * *

这是一个非常简单的图像。例如

[http://img825.imageshack.us/img825/4139/22536687.png](http://img825.imageshack.us/img825/4139/22536687.png)

* * *

已编辑

好的，首先检测边缘，例如 - Canny 边缘检测，如何创建向量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:45:36.323

并非每张图像都可以轻松转换为矢量图像，例如相机拍摄的一些照片。我相信没有**可以将所有 bmp 转换为向量 one 的单一****算法**。最可行的解决方案是查看和分析您的样本图像，捕捉其独特的特征，并针对这种特定类型的图像提出有**针对性**的算法。

 ****您可能会考虑使用阈值或其他图像分割方法来隔离背景和前景，然后进行一些平滑等以获得轮廓。在 Matlab 中尝试您的算法将是一个好主意，在试错的基础上更容易完成它。****

# c# - SWF 文件在从笔记本电脑上拔下充电器时停止播放

> ID：15850432
> 
> 赞同：0
> 
> 时间：2013-04-06T11:36:05.657
> 
> 标签：c#, asp.net, windows-services, flash

我的问题可能看起来很奇怪。我创建了一个 Windows 服务，它在启动时会播放一个 swf 文件。swf 文件可以正常工作，一切正常。唯一的问题是，只要我拔下充电器，文件就会关闭，而我的笔记本电脑开始使用电池运行，播放器停止并且窗口关闭。服务不会停止，只是关闭了窗口。我已按照以下步骤从我的服务启动一个 swf 文件。 [http://www.codeproject.com/Articles/110568/Alternative-way-for-Window-services-to-interact-wi](http://www.codeproject.com/Articles/110568/Alternative-way-for-Window-services-to-interact-wi) 有人对这种古怪的行为或造成这种情况的原因有答案吗？我会很高兴如果上面链接中的代码不够，请从我的代码中提供更多示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:23:12.497

TaskDefinition.Settings.DisallowStartIfOnBatteries=false。默认情况下是真的。

# jquery - 将翻转 img 交换为 src img onclick

> ID：15850433
> 
> 赞同：1
> 
> 时间：2013-04-06T11:36:08.763
> 
> 标签：jquery, hover, swap, src, rollover

我想知道如何对我的图像进行编码（具有翻转/悬停状态），以便在单击它们时，即使光标不在 img 本身上方，翻转状态也会保持不变。并让其他可能已单击的 .sibling`<img>`恢复到它们的非翻转状态。这是我正在使用的代码：

jQuery

```
$('img').hover(function(){
var e = $(this);
e.data('originalSrc', e.attr('src'));
e.attr('src', e.attr('data-rollover'));
}, function(){
var e = $(this);
e.attr('src', e.data('originalSrc'));
}); 
```

html

```
<img id="button-all" src="images/button-all.png" data-rollover="images/button-all-rollover.png" />
<img id="button-adverts" src="images/button-adverts.png" data-rollover="images/button-adverts-rollover.png" />
<img id="button-musicvideos" src="images/button-musicvideos.png" data-rollover="images/button-musicvideos-rollover.png" />
<img id="button-films" src="images/button-films.png" data-rollover="images/button-films-rollover.png"/> 
```

所以现在当我将鼠标悬停（翻转）在它们交换到数据翻转 srcs 的图像上时。但是当单击图像时（因为它们是带有 jquery 命令的按钮），我希望 img 的 src 与 data-rollover src 交换，以便当光标不再悬停在图像上时 data-rollover src 状态遗迹。除此之外，我需要任何先前单击的图像以使用其原始 src 路径恢复到其原始（非数据翻转）状态。

1）翻转图像，它显示数据翻转状态（除非它已经被点击，因此当翻转到数据翻转状态时不会改变）。

2）单击图像，它将src交换为data-rollover src

3) 所有其他 .sibling 图像将恢复到其原始 src 状态。

希望这是有道理的！谢谢！

# python - 如何将 Ubuntu 启动器图标添加到我的 PySide 应用程序？

> ID：15850435
> 
> 赞同：2
> 
> 时间：2013-04-06T11:36:16.913
> 
> 标签：python, qt, icons, pyqt, pyside

我刚刚使用 PySide 编写了我的第一个小 GUI 应用程序。我只是想给它添加一个图标，这样它就不会在 Ubuntu 启动器中显示为灰色问号项。我想这样的事情是一件非常简单的事情，但我找不到任何关于它的信息。也许我没有正确搜索，或者我很愚蠢，但我不知道该怎么做。

有人有正确方向的提示或提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T13:32:33.950

对于 Unity，您必须创建一个[桌面文件](https://help.ubuntu.com/community/UnityLaunchersAndDesktopFiles)并将其存储在`~/.local/share/applications`or中`/usr/share/applications`。文件的内容应该看起来像这样：

```
[Desktop Entry]
Name=AppName
Exec=/path/to/app
Icon=/path/to/icon.png
Terminal=false
Type=Application
Categories=Utility;Application; 
```

# java - 如何以编程方式更改 CSS 背景图像？

> ID：15850442
> 
> 赞同：0
> 
> 时间：2013-04-06T11:36:45.293
> 
> 标签：java, css, gwt

我有一个带有背景 gif 的 GWT.Label。

根据状态，我想更改标签的颜色和图像。颜色更改已经有效，但我不知道如何更改背景图像（同时仍保留渐变）：

我的.css：

```
/* creates a linear background gradient */
background: #000000;
background: url(myIcon.gif) no-repeat 15px, -webkit-linear-gradient(top, hsla(0,0%,100%,.5), hsla(0,0%,100%,0));
background: url(myIcon.gif) no-repeat 15px, -moz-linear-gradient
background: url(myIcon.gif) no-repeat 15px, -ms-linear-gradient
//etc 
```

改变颜色的作品：

```
getElement().getStyle().setProperty("backgroundColor", "green");
//how to change the background image?? 
```

如何更改图像属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:24:00.790

如果我面临这种情况，而不是更改 css 的属性，我只需更改 css 类

状态1

```
lable.addClassName("state1");// in css with image1 
```

状态2

```
lable.addClassName("state2");//in css with image2 
```

# c# - 如何在我的 xaml 项目中使用 C# 绘制到画布？

> ID：15850446
> 
> 赞同：0
> 
> 时间：2013-04-06T11:37:15.953
> 
> 标签：c#, windows-phone-7, xaml

我目前有以下代码：

```
Path path = new Path();
path.Fill = new RadialGradientBrush(Colors.White, Colors.Transparent)
{
    GradientOrigin = new Point(.5, .5),
    Center = new Point(.5, .5),
    RadiusX = 1.5,
    RadiusY = 1.5
};

PathGeometry geo = new PathGeometry();

PathFigure figure = new PathFigure();
figure.IsClosed = true;
figure.StartPoint = new Point(10, 10);

figure.Segments.Add(new LineSegment()
{
    Point = new Point(20, 20)
});

figure.Segments.Add(new LineSegment()
{
    Point = new Point(30, 10)
});

geo.Figures.Add(figure);
path.Data = geo;

Canvas.Children.Add(path); 
```

但它有什么问题呢？什么都没有出现。我期待一个带有白色中心渐变画笔的黑色三角形达到其大小限制。

有人有线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:43:01.690

试试这个：

```
path.Fill = new RadialGradientBrush(Colors.Black, Colors.Transparent)
{
    GradientOrigin = new Point(.5, .5),
    Center = new Point(.5, .5),
    RadiusX = 1.5,
    RadiusY = 1.5
}; 
```

还有一点：您的代码运行良好。问题一定出在你的最后一行。是`Canvas`你画布的名字吗？`Canvas`是类型，但在这里您将其用作变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:44:29.187

您应该设置`Stroke`路径，否则三角形不会有任何黑色部分：

`path.Stroke = new SolidColorBrush(Colors.Black);`

# iphone - 如何从 iPhone 上的在线网址播放音频

> ID：15850447
> 
> 赞同：2
> 
> 时间：2013-04-06T11:37:18.343
> 
> 标签：iphone, ios, objective-c, xcode, avaudioplayer

我知道很多人之前都问过这个问题，但我只是不知道为什么这在我的 x 代码和目标 c 中的应用程序中不起作用！

基本上，我想从 url 在应用程序中播放音频。仅使用 Apple 网站上的测试音频，我的代码是：

```
NSString *playString = @"http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8";

//Converts songURL into a playable NSURL
NSURL *playURL = [NSURL URLWithString:playString];

AVAudioPlayer *backgroundMusicPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:playURL error:&error];

if (backgroundMusicPlayer == nil) {
    NSLog(@"%@", [error description]);
}
else {
    [backgroundMusicPlayer prepareToPlay];
    [backgroundMusicPlayer play];
} 
```

它出现以下错误：

错误域=NSOSStatusErrorDomain 代码=-43 “操作无法完成。（OSStatus 错误 -43。）

当我用谷歌搜索时，我找不到任何东西。有任何想法吗？我应该尝试另一个音频流吗？或者有没有人有一个有效的例子？是因为我使用的是 iPhone 模拟器而不是实际的 iPhone 吗？

编辑：

请注意 - 当我说 URL 时，我的意思是来自实际网站，例如“ [http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8](http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8) ”我不想先下载歌曲，我希望能够在下载时播放它！谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T11:50:56.073

使用 AVPlayer 从 url 播放 mp3 文件

```
-(void)playselectedsong{

    AVPlayer *player = [[AVPlayer alloc]initWithURL:[NSURL URLWithString:urlString]];
    self.songPlayer = player;
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(playerItemDidReachEnd:)
                                                 name:AVPlayerItemDidPlayToEndTimeNotification
                                               object:[songPlayer currentItem]];
    [self.songPlayer addObserver:self forKeyPath:@"status" options:0 context:nil];
    [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(updateProgress:) userInfo:nil repeats:YES];

    [self.songPlayer play];

}
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {

    if (object == songPlayer && [keyPath isEqualToString:@"status"]) {
        if (songPlayer.status == AVPlayerStatusFailed) {
            NSLog(@"AVPlayer Failed");

        } else if (songPlayer.status == AVPlayerStatusReadyToPlay) {
            NSLog(@"AVPlayerStatusReadyToPlay");

        } else if (songPlayer.status == AVPlayerItemStatusUnknown) {
            NSLog(@"AVPlayer Unknown");

        }
    }
}

- (void)playerItemDidReachEnd:(NSNotification *)notification {

 //  code here to play next sound file

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T11:53:42.663

它非常简单使用 AVAudioPlayer，将对象作为 AVAudioPlayer *audioPlayer，

```
 NSURL *url = [NSURL URLWithString:@"http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8"];
  NSData *soundData = [NSData dataWithContentsOfURL:url];
  audioPlayer = [[AVAudioPlayer alloc] initWithData:soundData  error:NULL];
  audioPlayer.delegate = self;
  [audioPlayer play]; 
```

在委托方法下面写：

```
 -(void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag
    [audioPlayer stop];
     NSLog(@"Finished Playing");
  }

 - (void)audioPlayerDecodeErrorDidOccur:(AVAudioPlayer *)player error:(NSError *)error
 {
  NSLog(@"Error occured");
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T12:11:51.717

[You may find a live test stream at here](http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8)

To play a file use :

```
[player play]; 
```

And here is the code to play a live stream from URL:

```
NSURL *url = [NSURL URLWithString:@"<#Live stream URL#>];
self.playerItem = [AVPlayerItem playerItemWithURL:url];
    /* [playerItem addObserver:self forKeyPath:@"status" options:0 context:&ItemStatusContext]; (can use it) */
self.player = [AVPlayer playerWithPlayerItem:playerItem];
self.player = [AVPlayer playerWithURL:<#Live stream URL#>];
//(optional) [player addObserver:self forKeyPath:@"status" options:0 context:&PlayerStatusContext]; 
```

# requirejs - 为什么我的模块得到优化，即使尽量避免

> ID：15850449
> 
> 赞同：1
> 
> 时间：2013-04-06T11:37:25.980
> 
> 标签：requirejs

main.js 配置：

```
requirejs.config({
baseUrl : "./js",
paths : {
  'jquery' : 'libs/jquery-1.9.1.min',
  'jqm' : 'libs/jquery.mobile-1.3.0.min',
  'json' : 'libs/jquery.json-2.4.min',
  'jcache' : 'libs/jqache-0.1.1.min',
  'cordova' : 'libs/cordova', 
  'fb' : 'libs/facebook-js-sdk',
  'fbc' : 'libs/cdv-plugin-fb-connect',
  'photoswipe' : 'libs/code.photoswipe.jquery-3.0.5.min',
  'klass' : 'libs/klass.min',
  'mustache' : 'libs/mustache',
  'domReady' : 'libs/domReady'
},
shim : {
  'jqm' : {
    deps : ['jqm-init']
  },
  'json' : {
    deps : ['jquery']
  },
  'jcache' : {
    deps : ['jquery']
  },
  'photoswipe' : {
    deps : ['jquery', 'klass'],
    exports : 'Code.PhotoSwipe'
  },
  'fbc' : {
    exports : 'CDV'
  },
  'fb' : {
    exports : 'FB'
  },
  'mustache' : {
    exports : 'Mustache'
  }
} 
```

});

构建.js

```
({
  baseUrl : "js/",
  mainConfigFile : './js/main.js',
  paths : {
    'jquery' : 'empty:',
    'jqm' : 'empty:',
    'json' : 'empty:',
    'jcache' : 'empty:',
    'cordova' : 'empty:',
    'fb' : 'empty:',
    'fbc' : 'empty:',
    'photoswipe' : 'empty:',
    'klass' : 'empty:',
    'mustache' : 'empty:',
    'domReady' : 'empty:',
  },
  stubModules: ['jquery',
                'jqm',
                'json',
                'jcache',
                'cordova',
                'fb',
                'fbc',
                'photoswipe',
                'klass',
                'mustache',
                'domReady'],
  name : "main",

  optimize : "closure",
  closure : {
    CompilerOptions : {},
    CompilationLevel : 'SIMPLE_OPTIMIZATIONS',
    loggingLevel : 'WARNING'
  },
  optimizeCss : "standard",
}) 
```

即使已经最小化的库设置为 emtpy: 并标记为存根 r.js 优化它们？我做错了什么？

# php - 调度程序不工作

> ID：15850451
> 
> 赞同：0
> 
> 时间：2013-04-06T11:37:38.127
> 
> 标签：php, iis-7, codeigniter-2

我在 IIS7 中设置了一个调度程序，我给出了 php 的路径和我的 URL 作为参数运行。

PHP 路径是`C:\php\php.exe`，参数是`-C:\domain.com\usage\index.php`. 该站点正在使用 CodeIgniter，应用程序文件夹路径和要调用的控制器名称和函数设置在`index.php`.

但是在运行调度程序时，我无法获得输出。我试图在加载控制器类之前回显测试值，我得到了值，但之后我什么也得不到，调度程序进程退出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:42:34.367

CodeIgniter（和其他 php 框架）与路由器一起工作。因此，如果没有“Controller/Action/Parameters”请求，您将无法运行 index.php。

从命令行调用 CI 控制器的最佳方法是：

```
C:\php\php.exe -C:\domain.com\usage\index.php controller action 
```

请阅读更多内容：[http ://ellislab.com/codeigniter/user-guide/general/cli.html](http://ellislab.com/codeigniter/user-guide/general/cli.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:18:02.250

问题是由于调度程序设置中 php.exe 的路径造成的。我通过将 'C:\php\php.exe' 更改为 'php' 解决了这个问题。然后它就可以工作了。

# android - Listview 无法检测到 onitemclick 事件

> ID：15850456
> 
> 赞同：0
> 
> 时间：2013-04-06T11:38:08.693
> 
> 标签：android, android-listview, onclicklistener

我有一个列表视图，但不知何故它无法检测到点击侦听器，尽管我已经检查了三次代码并且我找不到问题所在......所以请帮助我，如果你能

这是我下载的 xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/background"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:contentDescription="@string/app_name"
        android:scaleType="fitXY"
        android:src="@drawable/topbar" />

    <ImageView
        android:id="@+id/downloaded_back_img"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@id/imageView2"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="14dp"
        android:layout_marginLeft="22dp"
        android:contentDescription="@string/app_name"
        android:src="@drawable/back" />

    <TextView
        android:id="@+id/downloaded_layout_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@id/downloaded_back_img"
        android:layout_centerHorizontal="true"
        android:paddingTop="5dp"
        android:text="@string/downloaded_my_title"
        android:textColor="@android:color/white"
        android:textSize="18sp"
        android:textStyle="bold" />

    <ListView
        android:id="@+id/downloaded_list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/imageView2"
        android:layout_centerHorizontal="true" >
    </ListView>

</RelativeLayout> 
```

这是我填充的 ​​listitem xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/list_item_sel"
    android:orientation="horizontal"
    android:weightSum="100" >

    <ImageView
        android:id="@+id/downloaded_album_itempic"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:layout_gravity="center_vertical"
        android:layout_margin="5dp"
        android:layout_weight="10"
        android:background="@android:color/white"
        android:contentDescription="@string/app_name"
        android:padding="1dip" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:layout_weight="70"
        android:gravity="center_vertical"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/downloaded_album_itemtitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@android:color/white"
            android:textSize="15sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/downloaded_album_itemsinger"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@android:color/white" />

        <TextView
            android:id="@+id/downloaded_album_itemgenre"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@android:color/white" />
    </LinearLayout>

    <Button
        android:id="@+id/downloaded_album_item_delete"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_weight="10"
        android:textColor="@color/red"
        android:background="@android:color/transparent"
        android:contentDescription="@string/app_name"
        android:drawableTop="@android:drawable/ic_delete"
        android:text="@string/delete" />

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_weight="10"
        android:contentDescription="@string/app_name"
        android:background="@drawable/item_arrow"/>

</LinearLayout> 
```

我的部分活动代码可能与列表视图有关：

```
public class Downloaded extends Activity {
    private DatabaseHelper helper;
    private DownloadedAlbumLazyAdapter adapter;
    private ArrayList<Albums> temp;
    private ListView list;
    private ImageView back;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.downloaded);
        init();
    }

    private void init() {
        list = (ListView) findViewById(R.id.downloaded_list);
        back = (ImageView) findViewById(R.id.downloaded_back_img);
        back.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                finish();
            }
        });
        temp = new ArrayList<Albums>();
        helper = new DatabaseHelper(this);
        helper.openDB();
        temp = helper.getAllDownloadedAlbums();

        adapter = new DownloadedAlbumLazyAdapter(this, temp);
        list.setAdapter(adapter);
        list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View v, int position,
                    long arg3) {
                Intent i = new Intent();
                i.putExtra("songs", temp.get(position).getSongs());
                i.setClass(Downloaded.this, DownloadedDetails.class);
                // startActivity(i);
                Toast.makeText(
                        Downloaded.this,
                        getString(R.string.downloaded_my_title) + " "
                                + temp.get(position).getSongs().size()
                                + " items", Toast.LENGTH_SHORT).show();
            }
        });

        helper.closeDB();
    } 
```

我无法弄清楚是什么导致了这个问题。此活动在 tabhost 中，其他活动有列表视图，但都可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:46:51.477

首先，您应该扩展 from`ListActivity`而不是`Activity`：

```
public class Downloaded extends ListActivity 
```

`onCreate()`然后在方法中进行任何初始化。您可以使用`getListView()`参考您的列表：

```
@Override
public void onCreate() {
    ...
    getListView().setOnItemClickListener(...);
    ...
} 
```

如果你有一个按钮，`ListView`你应该在适配器`focusable`的方法中将它的属性设置为 false ：`getView()`

```
deleteButton.setFocusable(false);
deleteButton.setFocusableInTouchMode(false); 
```

这样，您的列表项就会收到事件。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T12:16:13.870

用这个

```
public class Downloaded extends Activity implements OnItemClickListener {
}

@Override
public void onItemClick(View v){
} 
```

或者...

```
list.setOnItemClickListener(new View.OnItemClickListener() { 
```

# c++ - 结构向量：添加元素 C++

> ID：15850459
> 
> 赞同：4
> 
> 时间：2013-04-06T11:38:21.850
> 
> 标签：c++, vector, struct

我正在从文件中读取我的结构，我想将它们添加到结构向量中。以下是它的外观和工作方式：

```
 typedef struct
{
    int ID;
    string name;
    string surname;
    int points;
}
Student;

int main()
{
    ifstream theFile("test.txt");
    std::vector<Student*> students;

    Student* s = new Student();

    while(theFile >> s->ID >> s->name >> s->surname >> s->points)
    {
        studenti.push_back(s); // here I would like to add this struct s from a file
    }

// here I want to print each struct's values on the screen, but the output is always ONLY last struct N times, and not all of them, each only once

    std::vector<Student*>::const_iterator it;
    for(it = students.begin(); it != students.end(); it+=1)
    {
        std::cout << (*it)->ID <<" " << (*it)->name << " " << (*it)->surname <<" " << (*it)->points <<endl;
    } 
```

我应该怎么做才能将结构添加到向量中，然后正常打印出来（如果结构正确加载到向量中，此打印实际上只是一个检查）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T11:45:16.707

下面是代码在现代 C++ 中的样子：

```
#include <string>
#include <istream>
#include <vector>

struct Student
{
    int ID;
    std::string name;
    std::string surname;
    int points;

    Student(int i, std::string n, std::string s, int p)
    : ID(i), name(std::move(n)), surname(std::move(s)), points(p) {}
};

std::vector<Student> read_students(std::istream & is)
{
    std::vector<Student> result;

    std::string name, surname;
    int id, points;

    while (is >> id >> name >> surname >> points)
    {
        result.emplace_back(id, name, surname, points);
    }

    return result;
} 
```

用法：

```
#include <fstream>
#include <iostream>

int main()
{
    std::ifstream infile("test.txt");
    auto students = read_students(infile);

    // ...
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-06T11:41:05.267

你的错误是使用指针

```
std::vector<Student> students;

Student s;
while(theFile >> s.ID >> s.name >> s.surname >> s.points)
{
    students.push_back(s);
} 
```

现在它将起作用。

问题是您一遍又一遍地重用*同一个指针。*所以你最终会得到一个指针向量，它们都指向同一个对象。这将具有最后一个学生读入的值。

当更简单的替代方案正确时，选择复杂的替代方案似乎是一种相当普遍的初学者特征，所以我很想知道您为什么选择使用指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T11:46:25.330

因为您想在向量中存储指向学生而不是学生的指针。

```
Student* s = new Student();

while(theFile >> s->ID >> s->name >> s->surname >> s->points)
{
    students.push_back(s); // here I would like to add this struct s from a file
} 
```

您只分配了一个学生，每次循环时，您都在一遍又一遍地阅读它。

相反，您应该在每个循环上分配一个新学生并读入新分配的内存。

```
Student* s;
int tmpId, tmpPoints;
string tmpname, tmpsur;

while(theFile >> tmpId >> tmpname >> tmpsur >> tmpPoints)
{
    s = new Student();

    s->ID = tmpId ;
    s->name = tmpname;
    s->sur = tmpsur ;
    s->points= tmpPoints;

    studenti.push_back(s); // here You push a pointer to the newly allocated student
}
else
{
    // There is error reading data
} 
```

当您不再需要向量时，不要忘记删除每个学生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T12:00:00.607

您的代码不起作用，因为您有一个 Student 对象并且每次都覆盖其成员。解决方案是每次创建一个新的 Student 对象并将指向它的指针传递给您的向量：

```
std::vector<Student*> students;
int tmpId, tmpPoints;
string tmpname, tmpsur;

while(theFile >> tmpId >> tmpname >> tmpsur >> tmpPoints)
{
    Student* s = new Student();
    s->ID = tmpId ;
    s->name = tmpname;
    s->sur = tmpsur ;
    s->points= tmpPoints;

    students.push_back(s); // push a pointer to new student object
}
else
{
    // ...
} 
```

# deployment - msbuild 部署 - 仅删除包中的文件夹

> ID：15850462
> 
> 赞同：0
> 
> 时间：2013-04-06T11:38:51.897
> 
> 标签：deployment, msbuild, msdeploy

我正在使用 msbuild 为 Web 应用程序构建和部署一个包。我对如何同步文件有疑问。假设我有以下文件夹结构：

```
-Root
    -Pages*
    -Javascript*
    -CMS 
```

带有星号（*）的文件夹在我的 Visual Studio 项目中，没有的文件夹不在，但它们存在于应用程序中。

现在，如果我使用 msbuild ... /t:Package /p:DeployOnBuild=True .. 部署它，所有文件夹/文件都将在发布前被删除。这很糟糕，因为我需要保留“CMS”文件夹。

如果我部署添加“/p:SkipExtraFilesOnServer=True”，则不会删除 CMS 文件夹，但也不会删除/同步/清理“页面”和“Javascript”。

**如何确保未触及非项目文件夹但项目文件夹与包同步？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:25:39.930

`pubxml`您可以通过将以下内容添加到您的（或者`ProjectName.wpp.targets`如果您仍在使用 VS2010 RTM 的东西）来跳过您不想删除的特定目录

```
<MsDeploySkipRules>
  <SkipAction></SkipAction>
  <ObjectName>dirPath</ObjectName>
  <AbsolutePath>CMS</AbsolutePath>
</MsDeploySkipRules> 
```

# apache - Apache：设置詹金斯时命令 ProxyRequests 无效

> ID：15850465
> 
> 赞同：91
> 
> 时间：2013-04-06T11:39:13.023
> 
> 标签：apache, jenkins

我为詹金斯设置了一个新的虚拟主机：

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    ServerName ci.company.com
    ServerAlias ci
    ProxyRequests Off
    <Proxy *>
        Order deny,allow
        Allow from all
    </Proxy>
    ProxyPreserveHost on
    ProxyPass / http://localhost:8080/
</VirtualHost> 
```

...它使用代理，当我重新启动 apache 时出现如下错误：

```
Invalid command 'ProxyRequests', perhaps misspelled or defined by a module not included in the server configuration 
```

* * *

## 回答 #1

> 赞同：222
> 
> 时间：2013-04-06T11:39:13.023

您应该启用代理。运行命令：

```
 sudo a2enmod proxy
 sudo /etc/init.d/apache2 restart 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-08-05T07:02:38.320

代理模块必须禁用。使用以下命令启用它

```
a2enmod proxy 
```

如果您无权访问root，则可以使用

```
sudo a2enmod proxy 
```

之后使用重启apache服务器

```
service apache2 reload 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-09-18T16:21:35.133

```
 sudo a2enmod proxy
 sudo a2enmod proxy_http
 systemctl restart apache2 
```

如果您不启用 proxy_http，您会在该站点的 apache 错误日志文件中看到此错误：

> AH01144：没有对 URL / 有效的协议处理程序（方案“http”）。如果您使用的是 DSO 版本的 mod_proxy，请确保代理子模块包含在使用 LoadModule 的配置中。

# asp.net-mvc-4 - VS2012 无法创建 MVC4 Web 应用程序

> ID：15850472
> 
> 赞同：1
> 
> 时间：2013-04-06T11:39:51.797
> 
> 标签：asp.net-mvc-4, visual-studio-2012, asp.net-web-tools

当我尝试创建 ASP.NET MVC4 Web 应用程序的任何模板时，出现错误：

```
The system cannot find the file specified. (Exception from HRESULT: 0x80070002) 
```

我在 Windows 8 上运行 VS2012 Ultimate。我已经安装了 ASP.NET MVC 4 和 VS 的所有更新。我还安装了 Web Tools 2012.2。

试图重新安装和修复 - 没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-30T13:28:01.523

1.  下载 Nuget 包管理器。

2.  如果 Nuget 自己无法解决问题，请安装 Visual Studio 2012 更新 4（或迄今为止的最新更新）。这解决了我在 VS 2012 上的问题。在 vs2010 上，Nuget 安装解决了它。

# spring - UserDetails、AuditorAware 和 JPA 之间的交互

> ID：15850474
> 
> 赞同：2
> 
> 时间：2013-04-06T11:39:57.697
> 
> 标签：spring, spring-security, spring-data, spring-data-jpa

通过在我的 Spring Roo / Hibernate - JPA / Spring MVC / Spring Security 应用程序中选择以下类层次结构，我可能使我的生活变得比必要的复杂：

DomainBase（审计字段 - 为 lastUpdatedBy 和 createdBy 字段引用 AbstractUsers，所以循环依赖...（！））

```
@ManyToOne(fetch=FetchType.LAZY)
@CreatedBy
private AbstractUser createdBy;

@ManyToOne(fetch=FetchType.LAZY)
@LastModifiedBy
private AbstractUser lastModifiedBy; 
```

^

|

AbstractUser（包含一般用户信息，如名称和字符串用户 ID）

```
@NotNull
@ManyToMany(fetch = FetchType.LAZY)
@Immutable
private Set<UserRole> roles; 
```

^

|

操作员、消费者、客户（具体用户）、系统用户

其他域类派生自 DomainBase。

我使用以下 Auditor 实现：

```
public class SpringSecurityAuditorAware implements AuditorAware<AbstractUser> {

    public AbstractUser getCurrentAuditor() {

        Authentication authentication = SecurityContextHolder.getContext()
                .getAuthentication();

        return ((AbstractUser) authentication.getPrincipal());
    }
} 
```

我的实现`UserDetailsService`包含以下内容：

```
userDetails = operatorRepository.findByUsername(username);

if (userDetails != null) {
    // overcome lazy load
    Collection<? extends GrantedAuthority> roles = userDetails
            .getAuthorities();
    roles.size();
    return userDetails;
} 
```

不幸的是，JPA Transaction 和 Hibernate/JPA Session 之间的关系在我脑海中仍然不清楚，尽管我尝试使用文档和谷歌搜索。在 AuthenticationManager 询问我的 UserDetailsS​​ervice 时，显然有一个实时会话，并且返回的用户实体与持久会话（实时）相关联，并且角色被读取并用于确定以后的授权结果。在稍后的某个时间点，当用户发出涉及调用`@Transactional`导致更改或创建新实体的服务方法的请求时，`AuditorAware<>`侦听器触发并将存储在该对象中的引用分配`SecurityContext`给该对象，并随后被持久化。

我知道问多个问题是不好的形式，但它们都与这种特定的安排相互关联。

1）制作用户对象的深层副本以存储在 中是否更好的做法`SecurityContext`，如果是这样，那么当审计员被解雇时获取“活动”实体的合理策略是什么（除了每次都查询存储库)?

2）在处理域对象时，我对持久化用户实体并不真正感兴趣，并尝试设置，`cascade=CascadeType.REFRESH`但我当然遇到了在休眠会话的上下文中瞬态的用户对象。我考虑过简单地将用户 ID 存储在其中，`DomainBase`但随后我失去了在需要时懒惰地获取用户详细信息的能力。我可以在这里遵循“最佳实践”吗？

评论：对于试图同时与两个会话关联的同一用户的用户角色集合，我似乎经常遇到麻烦（我有后台计划作业，我怀疑我过分热心的日志记录`extends CustomizableTraceInterceptor`可能有很多与它有关）。

任何指导表示赞赏...

# asp.net - 如何在 GridView 中移动列标题

> ID：15850475
> 
> 赞同：1
> 
> 时间：2013-04-06T11:40:06.593
> 
> 标签：asp.net, gridview

我想将“主题号”的列标题向右移动。复选框列中不应有标题。

![在此处输入图像描述](https://i.stack.imgur.com/TvyLN.jpg)

获取复选框的代码是这样的；

```
protected void GridView1_DataBound(object sender, EventArgs e)
{
    foreach (GridViewRow objRow in GridView1.Rows)
    {
        TableCell tcCheckCell = new TableCell();
        CheckBox chkCheckBox = new CheckBox();
        tcCheckCell.Controls.Add(chkCheckBox);
        objRow.Cells.AddAt(0, tcCheckCell);

    }
} 
```

我使用 DataTable 将数据获取到 GridView。

如何将该列标题向右移动？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:05:49.890

要使任何特定列的标题文本为空，您可以在 asp:grid 视图中使用 **BoundFiled**来分配每个标题文本或使之为空。喜欢

```
<asp:BoundField HeaderText="" DataField="SubjectNO" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:44:27.663

您以错误的方式进行操作，请注意右侧缺少标题列。

而不是做你现在正在做的事情，尝试简单地在最左边添加一个新列并且没有标题文本，然后在`ItemTemplate`第一列中插入 a `CheckBox`，这应该可以解决问题而不会弄乱最终生成的表并以更简单的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T22:31:48.743

您的 GridView1_DataBound 事件中缺少一个步骤；您迭代的行集合仅包含数据行，您还需要在标题行中添加一个新列。在 foreach 循环之前插入以下行，一切都会好起来的：

```
GridView1.HeaderRow.Cells.AddAt(0, new TableCell()); 
```

# highcharts - 在 highstock 中图表为空（无系列）时显示 gridLines

> ID：15850477
> 
> 赞同：4
> 
> 时间：2013-04-06T11:40:18.387
> 
> 标签：highcharts, highstock

当我的图表中没有系列时，我想拥有 gridLines。

例如： http: [//jsfiddle.net/bahar_Agi/aQeJ5/](http://jsfiddle.net/bahar_Agi/aQeJ5/)没有系列，但 girdLines 已经消失。

```
 series: [] 
```

如何设置此功能？在 highstock 1.3.0 中可以吗？

**注意：**我不想让 gridLines 具有默认系列。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:09:27.700

不幸的是，如果您没有轴值，则无法显示网格线。设置 showEmpty 选项时，只能显示标题。

[http://api.highcharts.com/highcharts#xAxis.showEmpty](http://api.highcharts.com/highcharts#xAxis.showEmpty) [http://api.highcharts.com/highcharts#yAxis.showEmpty](http://api.highcharts.com/highcharts#yAxis.showEmpty)

# wcf - 如何在 windows phone 中从服务器获取图像

> ID：15850479
> 
> 赞同：0
> 
> 时间：2013-04-06T11:40:20.980
> 
> 标签：wcf, windows-phone-7, imagedownload

我想从 windows phone 中的服务器获取所有图像。所以我在我的项目中编写了这些代码行。

```
 { ...
 WebClient wc = new WebClient(); 
    wc.AllowReadStreamBuffering = true; 
    wc.OpenReadCompleted += new OpenReadCompletedEventHandler(wc_OpenReadCompleted); wc.OpenReadAsync(new Uri("http://......./Images/" + image1path)); 
... 
    } 
```

* * *

```
 void wc_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
 {
  Stream result=e.Result;
  BitmapImage bmp = new BitmapImage();
  bmp.SetSource(stream );         
} 
```

假设服务器上有 10 个图像，然后 wc_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e) 调用 10 次，但它给出的结果顺序错误。我每次都得到所有图像，但顺序错误。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:40:38.707

获取结果图像的方式取决于图像大小以及分派线程的方式。因此，如果您对以特定方式接收非常感兴趣，请严格按照您想要的方式调度线程，并且让它们一个接一个地下载。

# java - 在 AbstractTableModel 中覆盖“getValueAt”以将 Map 绑定到 JTable

> ID：15850480
> 
> 赞同：0
> 
> 时间：2013-04-06T11:40:23.420
> 
> 标签：java, swing, jtable, hashmap, abstracttablemodel

我有以下代码：

```
 class Files {       
    private static String files;
    private static String duration;
    private static String status;

    public Files(String files, String duration, String status) {
        this.files = files;
        this.duration = duration;
        this.status = status;
    }

    public static String getfiles() {
        return files;
    }

    public static String getduration() {
        return duration;
    }

    public static String getstatus() {
        return status;
    }
}

    Map<Files, String> hmap = new HashMap<Files,String>();

    private void AddFiles(String addfile,String addurr,String addstatus, String addpath){       
    Files f = new Files(addfile, addurr, addstatus);                
    hmap.put(f, addpath);       
}
    final JTable table = new JTable();
    table.setBounds(26, 27, 664, 274);
    table.setModel(new MyTableModel()); 
```

所以我正在创建一个新表并覆盖“getValueAt”。

```
 class MyTableModel extends AbstractTableModel {    
        @Override
        public int getColumnCount() {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public int getRowCount() {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
             switch (columnIndex) {
             case 0:
                    return Files.getfiles(); 
             case 1:
                    return Files.getduration();
             case 2:
                    return Files.getstatus();
             default:
                    throw new IndexOutOfBoundsException();
             }
        }
    } 
```

但是我无法将 HashMap 的“文件”类中的变量加载到 JTable 中。谁能告诉我我做错了什么？我现在基本上被困了 3 天，非常感谢一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:49:44.547

有很多事情是错误的。

首先，为什么Files中的所有字段和方法都是静态的。这意味着 Files 实例实际上根本没有状态，并且所有 Files 实例共享相同的文件、持续时间和状态。这些字段和方法当然应该是实例字段和方法（即您必须删除`static`修饰符）。

然后，您的模型实现`getColumnCount()`并`getRowCount()`返回 0。这意味着您的表包含 0 行和 0 列。因此，如果您不打算在其中使用任何价值，我真的看不出使用表格的意义。

`getValueAt()`另一方面，该方法意味着所有行都包含相同的值，因为无论`rowIndex`参数包含什么，您都返回相同的值。

最后，你说你有一个`Map<Files, String>`，但你没有说这张地图和表格之间的关系应该是什么。您不会在模型中的任何地方使用此地图，并且由于代码本身没有意义，因此很难猜测地图实际包含的内容以及表格应实际显示的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T14:17:01.370

> 我需要一个键/值对。

作为参考，从现有[`EnvTableTest`](https://stackoverflow.com/a/9134371/230513)的. 它使用地图的零列，并使用每个键来获取该行的值。`AbstractTableModel``Map``keySet()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T19:14:45.850

好的刚刚找到解决方案：

```
private final Map<Files, String> list = new LinkedHashMap<Files,String>();

class MyTableModel extends AbstractTableModel {

private String[] columnNames = {"File","Duration","Status"};

public void addElement(String addfile,String addurr,String addstatus, String addpath) {             
Files f = new Files(addfile, addurr, addstatus);                
list.put(f, addpath); // edit
fireTableRowsInserted(list.size()-1, list.size()-1);   
}

@Override
public int getColumnCount() {
return columnNames.length;
}

@Override
public int getRowCount() {
return list.size();
}

@Override
public String getColumnName(int col) {
return columnNames[col];
}

@Override
public Object getValueAt(int rowIndex, int columnIndex) {

List<Entry<Files,String>> randAccess = new ArrayList<Entry<Files,String>>(list.entrySet());

switch (columnIndex) {
case 0:
return randAccess.get(rowIndex).getKey().getfiles();
case 1:
return randAccess.get(rowIndex).getKey().getduration();
case 2:
return randAccess.get(rowIndex).getKey().getstatus();
default:
throw new IndexOutOfBoundsException();
        }
    }
} 
```

# javascript - 复制点击的链接 url 以形成输入

> ID：15850483
> 
> 赞同：2
> 
> 时间：2013-04-06T11:40:34.093
> 
> 标签：javascript, jquery, html

我有一个登录表单（在 jquery 弹出窗口中打开），它在成功登录后重定向回上一页。

我想在此登录表单中填充一个隐藏的重定向输入，其中包含单击的链接 url 的值，即：

```
<script type="text/javascript">
$(function() {

     $("a.login").click(function() {

        if($(this).hasClass("selected")) {
            deselect();               
        } else {
            $(this).addClass("selected");
            $(".pop").slideFadeToggle(function() { 
                $("#email").focus();
            });
        }
        return false;
    });

    $(".close").live('click', function() {
        deselect();
        return false;
    });
});

$.fn.slideFadeToggle = function(easing, callback) {
    return this.animate({ opacity: 'toggle', height: 'toggle' }, "fast", easing, callback);
};
</script>

<form>
<input type="hidden" name="redirect_url" value="clicked_link_url" />
</form>

<a href="clicked_link_url_1" class="login">Link 1</a>
<a href="clicked_link_url_2" class="login">Llink 2</a>
<a href="clicked_link_url_3" class="login">link 3</a> 
```

因此，如果用户单击链接 3，弹出表单将打开，并且它的隐藏重定向 url 值将是“clicked_link_url3”。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T11:43:27.473

```
$("a.login").click(function () {

    if ($(this).hasClass("selected")) {
        deselect();
    } else {
        $(this).addClass("selected");
        $(".pop").slideFadeToggle(function () {
            $("#email").focus();
        });
    }

    // Set the input value
    $('input[name="redirect_url"]').val($(this).attr('href'));

    return false;
}); 
```

# jquery - 动态创建的文本框未触发模糊事件

> ID：15850484
> 
> 赞同：0
> 
> 时间：2013-04-06T11:40:58.883
> 
> 标签：jquery

是否有理由为第一个输入激活模糊事件。但是对于动态生成的文本框，它不会触发。

```
<input type="text" class="year" />
<div id="t"></div>

<script>
$('.year').blur(function () {
    $('#t').html('<input type="text" id="y" />');
});

$('#y').on('blur', function () {
    alert('hello');
});
</script> 
```

> 检查小提琴 [http://jsfiddle.net/kynsai/6pfST/](http://jsfiddle.net/kynsai/6pfST/)

**编辑**

我正在使用以下代码创建输入

```
<input type="text" id="rows" />
<div id="form"></div>

 $('#rows').on('blur', function () {
    msg = '<table"><tr><td>Year</td></tr>';
    for (i = 1; i <= $(this).val(); i++) {
        msg = msg + '<tr><td><input type="text" id="Year_' + i + '"></td></tr>';
    }
    msg = msg + '</table>';
    $('#form').html(msg);
}); 
```

那么为什么这条线不起作用呢？

```
 $('input[id ^="Year_"]').on('blur', function () {
    alert('t');

}); 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T11:46:27.480

使用 .on() （.live() 在新的 jQueries 中已弃用）。并将其包装在文档准备功能中。

```
$(document).ready(function() {
    $(document).on('focusout','.year', function() {
       $('#t').html('<input type="text" id="y" />');
    }).on('focusout', '#y', function() {
       alert('hello');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:44:05.080

尝试以下代码...使用实时功能

```
<script>
$('.year').live('blur',function () {
    $('#t').html('<input type="text" id="y" />');
});

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T11:47:54.843

尝试将你的模糊事件`#y`放在模糊事件中`.year`，因为它在事件之外可能不起作用，因为它还没有放在你的html中，所以试试这个代码：

```
$('.year').on('blur',function () {
    $('#t').html('<input type="text" id="y" />');

    $('#y').on('blur', function () {
        alert('hello');
    });
}); 
```

# javascript - RGB 到 HEX 转换 JavaScript

> ID：15850486
> 
> 赞同：1
> 
> 时间：2013-04-06T11:41:05.513
> 
> 标签：javascript, jquery

我做了一个 HEX 到 RGB 转换的 JSFiddle，但我想知道如何以另一种方式进行（RGB 到 HEX）。

```
$('#hex').bind('blur keydown', function (event) {
  setTimeout(function () {
    var rgb = [],
        broken = false,
        value = $("#hex").val(),
        hex = (value+'').replace(/#/, '');

    if (value.length === 1 && value !== '#') {
      $("#hex").val(value);
    }

    if (hex.length == 3) hex = hex + hex;
    for (var i = 0; i < 6; i+=2) {
      rgb.push(parseInt(hex.substr(i,2),16));
      broken = broken || rgb[rgb.length - 1].toString() === 'NaN';
    }

    $('#rgb').val(broken ? '' : 'rgb(' + rgb.join(',') + ')');   
  }, 13);
}); 
```

`'#hex'`并且`'#rgb'`只是输入：

```
<input type="text" id="hex" placeholder="hex">
<input type="text" id="rgb" placeholder="rgb"> 
```

[这是JSFiddle。](http://jsfiddle.net/gFvgD/)

我也想知道为什么如果我要替换`broken`为`false`，我会收到错误消息。你知道为什么我不能删除`var broken = false`并替换为`false`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:22:05.293

这是将RGB转换为HEX的代码：

```
$(function(){
  var $hex = $('#hex');
  $('#rgb').on('keyup blur', function() {
    var value = this.value,
        rgb,
        hex = '',
        component,
        i;
    try {
      if(value && value.indexOf('rgb(') === 0 && value[value.length-1] === ')') {
        rgb = value.slice(4,-1).split(',');
        if(rgb.length === 3) {
          for(i=0;i<3;i++) {
            if(rgb[i] <= 0xFF) {
              component = parseInt(rgb[i],10);
              if(isNaN(component)) {
                throw new SyntaxError();
              }
              component = component.toString(16);
              if(component.length === 1) {
                component = '0'+component;
              }
              hex += component;
            } else {
              throw new RangeError();
            }
          }
          $hex.val('#'+hex);
        } else {
          throw new SyntaxError();
        }
      }
    } catch(e) {
      $hex.val('');
    }
  });
}); 
```

这是一个工作示例[http://jsbin.com/amisen/3/edit](http://jsbin.com/amisen/3/edit)

# asp.net - Microsoft Unity IoC 和 ASP.NET mvc4 应用程序不起作用。为什么？

> ID：15850493
> 
> 赞同：1
> 
> 时间：2013-04-06T11:42:14.530
> 
> 标签：asp.net, inversion-of-control, unity-container, ioc-container

我正在尝试将 Unity IoC 容器设置为 ASP.NET mvc4 应用程序。我创建了空项目并使用包管理控制台安装了下一个产品

*   安装包 Unity
*   安装包 Unity.Mvc4

一切顺利完成。但是在我运行我的应用程序后我有异常

> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。异常详细信息：System.MissingMethodException：无法创建接口的实例。

这是简单的代码。全球.asax.cs

```
public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);

        Bootstrapper.Initialise();
    }
}

public interface IA
{
    void test();
}
public class A : IA
{
    public A() { }
    public void test()
    {
        throw new NotImplementedException();
    }
} 
```

家庭控制器.cs

```
public class HomeController : Controller
{
    //
    // GET: /Home/

    public ActionResult Index(IA a)
    {
        return View();
    }

} 
```

引导程序.cs：

```
public static class Bootstrapper
{
    public static void Initialise()
    {
        var container = BuildUnityContainer();

        DependencyResolver.SetResolver(new UnityDependencyResolver(container));
    }

    private static IUnityContainer BuildUnityContainer()
    {
        var container = new UnityContainer();

        container.RegisterType<IA, A>();          

        return container;
    }
} 
```

我在做什么错，为什么代码不起作用？

堆栈跟踪：

> 堆栈跟踪：[MissingMethodException：无法创建接口的实例。] System.RuntimeTypeHandle.CreateInstance（RuntimeType 类型，Boolean publicOnly，Boolean noCheck，Boolean& canBeCached，RuntimeMethodHandleInternal& ctor，Boolean& bNeedSecurityCheck）+0 System.RuntimeType.CreateInstanceSlow（Boolean publicOnly，布尔skipCheckThis，布尔fillCache）+98 System.RuntimeType.CreateInstanceDefaultCtor（布尔publicOnly，布尔skipVisibilityChecks，布尔skipCheckThis，布尔fillCache）+241 System.Activator.CreateInstance（类型类型，布尔非公共）+69 System.Web.Mvc.DefaultModelBinder。 CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType) +199 System.Web.Mvc.DefaultModelBinder.BindComplexModel(ControllerContext controllerContext,ModelBindingContext bindingContext) +572 System.Web.Mvc.DefaultModelBinder.BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext) +454 System.Web.Mvc.ControllerActionInvoker.GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor) +317 System.Web.Mvc.ControllerActionInvoker.GetParameterValues (ControllerContext controllerContext, ActionDescriptor actionDescriptor) +117 System.Web.Mvc.Async.<>c_GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor) +117 System.Web.Mvc.Async.<>c_GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor) +117 System.Web.Mvc.Async.<>c_*DisplayClass25.b* _1e(AsyncCallback asyncCallback, Object asyncState) +476 System.Web.Mvc.Async.WrappedAsyncResult `1.Begin(AsyncCallback callback, Object state, Int32 timeout) +124 System.Web.Mvc.Async.AsyncControllerActionInvoker.BeginInvokeAction(ControllerContext controllerContext, String actionName, AsyncCallback callback, Object state) +304 System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__17(AsyncCallback asyncCallback, Object asyncState) +30 System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback 回调, 对象状态, Int32 超时) +124 System.Web.Mvc.Controller.BeginExecuteCore(AsyncCallback 回调,对象状态）+389 System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +124 System.Web.Mvc.Controller.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) +319 System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) +15 System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__2(AsyncCallback asyncCallback, Object asyncState) +76 System.Web.Mvc.Async.WrappedAsyncResult`1.Begin（AsyncCallback回调，对象状态，Int32超时）+124 System.Web.Mvc.MvcHandler.BeginProcessRequest（HttpContextBase httpContext，AsyncCallback回调，对象状态）+251 System.Web.Mvc.MvcHandler.BeginProcessRequest（HttpContext httpContext，AsyncCallback回调，对象状态）+50 System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest（HttpContext 上下文，AsyncCallback cb，对象 extraData）+16 System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute（ ) +8837208 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T12:00:45.010

我完全不知道你有什么问题，但这里是适合我的设置；

```
public static class Bootstrapper
{
    public static void Initialise()
    {
        var container = BuildUnityContainer();
        DependencyResolver.SetResolver(new UnityDependencyResolver(container));
    }

    private static IUnityContainer BuildUnityContainer()
    {
        var container = new UnityContainer();
        container.RegisterType<ICategoryRepository, CategoryRepository>(new HierarchicalLifetimeManager());
        return container;
    }
} 
```

全球.asax

```
 Bootstrapper.Initialise(); 
```

现在，在我的控制器构造函数中；

```
ICategoryRepository _catRepo;

public CategoryController(ICategoryRepository catRepo)
{
    _catRepo = catRepo;
}
public ActionResult Index()
{
    ViewBag.CategoriesList = _catRepo.GetAllCategories();
    return View();
} 
```

# css - iPad css 设计 - 无法隐藏溢出

> ID：15850498
> 
> 赞同：0
> 
> 时间：2013-04-06T11:42:39.840
> 
> 标签：css, ipad, overflow, media-queries

我有一个网站，其中有多个隐藏在页面外的 div（它们在调用时使用 jquery 函数滑动）。我现在正在为 ipad 设计网站，而“溢出：隐藏”命令似乎不起作用。您可以左右和上下滚动页面以显示所有应隐藏的 div。

该命令不起作用是否有原因，我该如何解决它以隐藏我的页面溢出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:48:19.163

与其将它们隐藏在页面边缘，不如使用 css 隐藏它们：

`display:none;`和`display:block;`或

`visibility:hidden;`和`visibility:visible;`

或者，如果您想将它们淡入，您可以使用：`opacity:0;`和`opacity:1;`

或者你可以使用 jQuery: `.fadeIn();`和`.fadeOut();`

长话短说，我会将您隐藏的 div 放置在页面边缘，使用上述方法之一隐藏，然后同时显示它并将其移动到位。

# azure - 在 Windows Azure 上，VM 角色和 vm 实例之间有区别吗？

> ID：15850499
> 
> 赞同：0
> 
> 时间：2013-04-06T11:42:42.677
> 
> 标签：azure, azure-virtual-machine, azure-vm-role, iaas

在 Windows azure 中，我看到对 vm 角色和 vm 实例的引用。他们不同吗？一种似乎是允许上传 vm 映像以在平台即服务 (PaaS) 中使用，另一种允许按需创建 vm 映像以安装传统 VPS 等应用程序。

这只是过时的文档吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:21:54.070

这将取决于上下文。您是否有指向您所指文档的链接？

在 Windows Azure 虚拟机的上下文中，短语 VM 实例确实指的是从库或从头开始创建虚拟机的能力。

在云服务（PaaS 模型）的上下文中，短语 VM 角色和 VM 实例都适用。在这种情况下，VM 角色是对将运行一组特定代码的虚拟机的定义。例如，您可能定义了一个处理订单或计算数字运算算法的 VM 角色。如果您愿意，这是一个模板，或者是为您的应用程序定义的角色。当您定义一个角色时，您还指出该角色的实例数。因此，在云服务的上下文中，VM 实例是运行为其所属角色定义的代码的虚拟机，但可能还有十个运行完全相同的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:16:06.087

您是对的，文档并不旧（或者无论如何也不正确）。

这是一篇关于 8 个月大[的差异的不错的简短文章 - Azure VM 和 Azure VM 角色之间的差异](http://blogs.msdn.com/b/plankytronixx/archive/2012/06/08/the-difference-between-azure-vms-and-azure-vm-role.aspx)

我的快速处理：

VM 角色 (Paas) 是首先引入的，它是获取需要自定义构建的用户的初始方式，该镜像将为其在云中的应用程序启动。在本地构建 VM 映像然后上传有点复杂，但它提供了在 Paas 类型环境中相当快速地扩展该映像的方法（即使在这种情况下它也是操作系统）。

VM 实例是获得相同事物的全新方式——但也可以控制更多，并且还处于 Iaas 场景而不是 Paas。此选项使您能够以您想要的方式构建映像，并使其在计算机重新启动时保持不变。然而，这个新的 more-control-Iaas 意味着您必须做更多事情（或至少创建和运行更多脚本）才能横向扩展图像以快速运行多个实例。

# php - 从 preg_match_all 打印多维数组

> ID：15850500
> 
> 赞同：0
> 
> 时间：2013-04-06T11:42:54.383
> 
> 标签：php, multidimensional-array, html-parsing, echo, preg-match-all

还没有找到一个直接的答案.. 我的数组 $sitematches：

```
if (preg_match('/<start>(.*?)<finish>/s', $source, $matches)) {
    if (preg_match_all('/<a\s[^>]*href=\"([^\"]*)\"[^>]*>(.*)<\/a>/siU', $matches[1], $sitematches)); {
    print_r($sitematches);
    }
} 
```

产生：

```
Array
(
    [0] => Array
        (
            [0] => <A HREF="http://site1.com">aaa</A>
            [1] => <A HREF="http://site2.com">bbb</A>
            [2] => <A HREF="http://site3.com">ccc</A>
            [3] => <A HREF="http://site4.com">ddd</A>
        )

    [1] => Array
        (
            [0] => http://site1.com
            [1] => http://site2.com
            [2] => http://site3.com
            [3] => http://site4.com
        )

    [2] => Array
        (
            [0] => aaa
            [1] => bbb
            [2] => ccc
            [3] => ddd
        )

) 
```

我怎样才能输出：

```
1 - aaa - http://site1.com
2 - bbb - http://site2.com
3 - ccc - http://site3.com
4 - ddd - http://site4.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:46:26.183

```
for ($i = 0; $i < count($sitematches[0]); $i++)
    print "$i - {$sitematches[2][$i]} - {$sitematches[1][$i]}\n"; 
```

只需获取大小 (count($sitematches[0]))，然后遍历数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T12:02:24.740

foreach 的另一种可能性是：

```
foreach ($sitematches[1] as $key => $url)
   print "$key - {$sitematches[2][$key]} - $url\n"; 
```

但至少需要一个直接数组访问。

# java - 通过数组创建带有 XML 的 JSP

> ID：15850505
> 
> 赞同：0
> 
> 时间：2013-04-06T11:43:35.757
> 
> 标签：java, xml, arrays, jsp, javabeans

在 Eclipse 中创建动态 Web 项目后，我创建了一些 JavaBean 类，并为每个类创建了一个 JSP 文件，该文件将返回一个 XML。

如：

豆子：

```
package com.beans;
public class Program {
    private String programID = "123";
    private String programName = "Morning show";
    private String startTime = "1365238800";
    private String endTime = "1365242400";
    public String getProgramID() {
        return this.programID;
    }
    public String getProgramName() {
        return this.programName;
    }
    public String getStartTime() {
        return this.startTime;
    }
    public String getEndTime() {
        return this.endTime;
    }
} 
```

JSP：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<%@ page contentType="text/xml;charset=ISO-8859-1" %>
<jsp:useBean id="programXML" class="com.beans.Program"/>
<Program>
    <ProgramName><% out.print(programXML.getProgramID()); %></ProgramName>
    <ProgramType><% out.print(programXML.getProgramName()); %></ProgramType>
    <startTime><% out.print(programXML.getStartTime()); %></startTime>
    <endTime><% out.print(programXML.getEndTime()); %></endTime>
</Program> 
```

服务器为请求返回以下示例`http://localhost:8080/Project/Program.jsp`：

```
 <Program>
  <ProgramName>123</ProgramName> 
  <ProgramType>Morning show</ProgramType> 
  <startTime>1365238800</startTime> 
  <endTime>1365242400</endTime> 
  </Program> 
```

这是我期望的 XML。现在，我想修改 bean/jsp 文件以接收包含数组的 XML，如下结构：

```
<ProgramList>
 <Program>
   ...
 </Program>
 <Program>
 ...
 </Program>
</ProgramList> 
```

你能给我建议如何修改bean/jsp吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T11:47:31.117

我认为您应该创建另一个名为的 Bean `ProgramList`，其中仅包含一个`ArrayList<Program>`.

```
public class ProgramList {

  private ArrayList<Program> list;

  public ArrayList<Program> getList() {
    return this.list;
  }
  public void setList(ArrayList<Program> list) {
    this.list = list;
  }
} 
```

然后您可以在您的 JSP 中使用 JSTL forEach 来打印程序列表。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<%@ page contentType="text/xml;charset=ISO-8859-1" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<jsp:useBean id="programList" class="com.beans.ProgramList"/>
<ProgramList>
  <c:forEach var="program" items="${programList.list}">
    <Program>
      <ProgramName>${program.programID}</ProgramName>
      <ProgramType>${program.programName}</ProgramType>
      <startTime>${program.startTime}</startTime>
      <endTime>${program.endTime}</endTime>
    </Program>
  </c:forEach>
</ProgramList> 
```

如果您不熟悉它，请在[**此处**](http://docs.oracle.com/javaee/5/tutorial/doc/bnakc.html)查找JSTL 教程。

# java - 队列和循环小问题

> ID：15850507
> 
> 赞同：0
> 
> 时间：2013-04-06T11:43:43.050
> 
> 标签：java, loops, queue

我在测试中遇到了一些问题。现在在与朋友讨论之后，答案不同了，我们离做出答案的决定还差得很远。你们中的任何一个程序员都可以解决它并分享答案吗？谢谢大家！

这是问题：

显示以下代码段编写的内容，假设 element1、element2 和 element3 是 int 变量，并且 queue 是符合 5.2 节中给出的队列抽象描述的对象，假设您可以存储和检索输入 int 并在队列中。

一种）

```
element1 = 1;
element2 = 0;
element3 = 4;
qeueu.enqueue(element2);
qeueu.enqueue(element1);
qeueu.enqueue(element1+element2);
element2 = queue.dequeu();
queue.enqueue(element3*element3);
queue.enqueue(element2);
queue.enqueue(3);
element1 = queue.dequeue();
system.out.println(element1 + " " + element2 + " " + element3);
while(!qeueu.isEmpty())
{
element1 = queue.dequeue();
system.out.println(element1);
} 
```

b)

```
element1 = 4;
element2 = 0;
element3 = element1 + 1;
qeueu.enqueue(element2);
qeueu.enqueue(element2 + 1);
qeueu.enqueue(element1);
element2 = queue.dequeu();
element1 = element2 + 1;
queue.enqueue(element1);
queue.enqueue(element3);
while(!qeueu.isEmpty())
{
element1 = queue.dequeue();
system.out.println(element1);
}
system.out.println(element1 + " " + element2 + " " + element3); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:55:38.157

队列是`FIFO`：先进先出。

想象一下队列看起来像这样：

```
------------------------------------
------>                               
____________________________________
 ^                                 ^
 |                                 |
enquee                          dequeue 
```

所以在做的时候：

```
qeueu.enqueue(element2);
qeueu.enqueue(element1);
qeueu.enqueue(element1+element2); 
```

队列将如下所示：

```
------------------------------------
---->  1    1    0  ---->                              
____________________________________ 
```

当你这样做时：

```
element2 = queue.dequeu(); 
```

然后`element2`现在保持 0，并将 0 从队列中删除。

你现在做：

```
queue.enqueue(element3*element3);
queue.enqueue(element2);
queue.enqueue(3); 
```

这会将 4*4 即 16 插入队列：

```
 ------------------------------------
   ---->  3   0   16   1    1   ---->          0 (0 was removed)                          
  ____________________________________ 
```

现在你有：

```
element1 = queue.dequeue(); 
```

`element1`将为 1，并且 1 将从队列中删除。

从这里您可以轻松地完成代码和 (b) 部分。

我强烈建议您编写代码并运行它。（您可以使用调试器更好地了解正在发生的事情）

# javascript - 尝试使用现有的 eventListener 调用函数

> ID：15850508
> 
> 赞同：0
> 
> 时间：2013-04-06T11:43:57.127
> 
> 标签：javascript, google-maps, geolocation, directions

我对 javascript 的了解不是很好，所以我不确定如何从同一个事件侦听器加载第二个函数。

```
 var tutsImg = "houseProxy.jpg";
    var kingTuts = new google.maps.LatLng(55.86256, -4.265);
    var tutsDisplay = new google.maps.Marker({
    position: kingTuts,
    map: map,
    icon: tutsImg,
    title:"King Tut's Wah Wah Hut"
    });

    var contentString = '<div id="content">'+
    '<div id="siteNotice">'+
    '</div>'+
    '<h2 id="firstHeading" class="firstHeading">King Tuts Wah Wah Hut</h2>'+
    '<div id="bodyContent">'+
    '</div>'+
    '</div>';

    var infowindow = new google.maps.InfoWindow({
         content: contentString
    });

    // Creating directions
    function calcRoute () {
            var request = {
            origin: 'Glasgow', 
            destination: kingTuts,
            travelMode: google.maps.DirectionsTravelMode.DRIVING
         }

        directionsService.route(request, function(response, status) {
            if (status == google.maps.DirectionsStatus.OK) {

            directionsDisplay.setDirections(response);
            }
        });
        }

    google.maps.event.addListener(tutsDisplay, 'click', function() {
         infowindow.open(map,tutsDisplay);
         calcRoute();
    }); 
```

所以在这里我创建了变量来在我选择的建筑物的位置上显示一个自定义标记。但我也想调用计算并显示从用户当前位置到单击图标位置的方向的函数。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:26:35.767

我无法完全理解问题所在。但我编写的代码将显示从用户位置到点击地图位置的方向。为了获取用户位置，我使用地理定位 API (HTML5)。

我希望这可以帮助你 ：）

```
(function(global) {
    var google = global.google;
    var directionsService = new google.maps.DirectionsService();
    var directionsDisplay;

    // initialize google map
    var initialize = function() {
        var mapOptions = {
            center: new google.maps.LatLng(-34.397, 150.644),
            zoom: 5,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        // initialize map
        var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);

        directionsDisplay = new google.maps.DirectionsRenderer();
        directionsDisplay.setMap(map);

        // add event on map click
        // @param {Object} event The custom map event object
        // which contain latitude and langitude
        google.maps.event.addListener(map, 'click', function(event) {
            // getUserPosition is async function
            // because it require user permission
            getUserPosition(calcRoute.bind(global, event.latLng));
        });
    };

    // html 5 geolocation API
    // Get user position
    var getUserPosition = function(callback) {
        global.navigator.geolocation.getCurrentPosition(function(position) {
            var latitude = position.coords.latitude;
            var langitude = position.coords.longitude;
            // convert user position to google.maps
            // LatLng object
            var origin = new google.maps.LatLng(latitude, langitude);

            callback(origin);
        } /*, onError */ );
    };

    // calc direction from user location
    // to position clicked on map
    var calcRoute = function(distPosition, originPosition) {

        var request = {
            origin: originPosition,
            destination: distPosition,
            travelMode: google.maps.TravelMode.DRIVING // it's work onliy for one continent
        };

        directionsService.route(request, function(result, status) {
            if (status === google.maps.DirectionsStatus.OK) {
                directionsDisplay.setDirections(result);
            }
        });
    };

    // events
    google.maps.event.addDomListener(window, 'load', initialize);
}(this)); 
```

链接[要点](https://gist.github.com/maksimr/5327649)

# c# - 如何制作 xna 排行榜？

> ID：15850515
> 
> 赞同：2
> 
> 时间：2013-04-06T11:44:27.693
> 
> 标签：c#, windows-phone-7, xna, windows-phone

我有一个简单的 Windows 手机游戏，玩家在屏幕上拖动一艘船来收集物品并避开小行星。每次收集物品时，屏幕顶部的分数计数器都会增加一。

问题是，一旦玩家的飞船与小行星相撞，我想让游戏过渡到排行榜，但我不知道该怎么做。

我有一个整数来存储得分值，但是一旦玩家与小行星碰撞，该整数的值就会重置（当然）。

如何将玩家死亡前得分的最终值存储为单独的整数并在排行榜屏幕上显示？无需解释游戏状态管理，我已经知道如何使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:46:31.323

首先，在处理小行星碰撞时发生的情况的代码中，您需要首先保存您的分数，然后在完成后将其重置。当你显示它时，你需要从一个序列化文件中加载你的排行榜。

我不打算详细介绍，因为我找到了一个基本上解释了我会告诉你的网站：http: [//xnaessentials.com/tutorials/highscores.aspx](http://xnaessentials.com/tutorials/highscores.aspx)

当然，您需要稍微修改一下并添加一种排序高分的方法，但我怀疑这应该让您开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:26:44.377

好的。在检测到碰撞时将变量分数重置为 0 之前，请将分数存储在隔离存储设置中，并将密钥作为配置文件名称。只有当已经存在的键值较小时，您才可以进行其他操作，例如存储，或者如果没有找到键值，则立即存储它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:48:18.537

The simplest method of retaining the high score after the game ends is to make the int static and only reset it to zero at the start of a new game - rather than when the game ends.

So in your MyGame class: internal static int Score = 0;

In whatever function starts a new game: MyGame.Score = 0;

and in your Leaderboard screen: List highScores = new List();

...

if (highScores.Count == 0 || MyGame.Score > highScores[highScores.Count-1]) { // the score made the ordered list Leaderboard (you'll need to limit it to some maxiumum number of scores) }

# php - 如何将值分配给使用 jquery 创建的文本字段

> ID：15850518
> 
> 赞同：0
> 
> 时间：2013-04-06T11:44:52.830
> 
> 标签：php, jquery, mysql

我正在为此创建一个应用程序，我需要动态添加字段，因此我在该文本字段中使用了 jquery.now，我需要从数据库中检索值并分配给该字段。

如何实施。

```
 <script type="text/javascript">

      (function($){
           $countForms = 1;
           $.fn.addForms = function(){
            var myform = "<table>"+
             "  <tr>"+
             "     <td>Pid:</td>"+
             "     <td><input type='text' name='id["+$countForms+"]'></td>"+
             "     <td>Pname:</td>"+
             "     <td><textarea name='name["+$countForms+"]'></textarea></td>"+
             "     <td>Pfee:</td>"+
             "     <td><input type='text' name='amount["+$countForms+"]'></td>"+
             "     <td><button>remove</button></td>"+
             "  </tr>"+
             "</table>";

             myform = $("<div>"+myform+"</div>");
             $("button", $(myform)).click(function(){ $(this).parent().parent().remove(); });

             $(this).append(myform);
             $countForms++;
      };
})(jQuery);     

$(function(){
    $("#mybutton").bind("click", function(){
        $("#container").addForms();
    });
}); 
```

# javascript - Json字符串化双引号

> ID：15850519
> 
> 赞同：0
> 
> 时间：2013-04-06T11:45:02.410
> 
> 标签：javascript, jquery, json

我似乎无法解决这个问题......我试图传递给 MVC 控制器的 Json 一直像这样出现

```
"\"{MaterialQuantity: { MaterialID :18, Quantity:1}}\"" 
```

这是生成它的代码：

```
function CreateJsonForQuantities() {
    var inputs = $('input[name=MaterialQuantity]');
    var total = inputs.length;
    var data = "";

    inputs.each(function (index) {
        data = data + $(this).val();
        if (index != total -1)
            data = data + ',';
    });

    return data;        
} 
```

这是它从中读取数据的隐藏（当然这也是自动生成的）

```
<input name="MaterialQuantity" type="hidden" value="{MaterialQuantity: { MaterialID :12, Quantity:5}}" /> 
```

我究竟做错了什么？

**更新**

好的，现在我正确地获取了 json 对象，我的 ajax 请求看起来像这样。现在的问题是它确实传递了正确的对象，但控制器操作中的所有值都是空的:(

```
var form_data = CreateJsonForNorm();
var quantity_data = CreateJsonForQuantities();
var data = { norm: form_data, mqvm: quantity_data };
$.ajax({
   type: "POST",
   url: form.attr("action"),
   data: data,
   success: function () {
       location.href = "@Url.Action("Index")";
       ('#addDialog').dialog("close");
   },
   error: function () {
       alert("Error");
   }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:59:41.087

尝试`JSON.stringify(data)`在您的请求中使用

# c# - 打开文件而不立即将其加载到内存中

> ID：15850520
> 
> 赞同：0
> 
> 时间：2013-04-06T11:45:03.540
> 
> 标签：c#

嗨，我有一个大学问题要解决，我很难理解问题的句子。

这是我遇到的问题：

> 反转文件中的字节顺序，而不是一次将整个文件加载到内存中。您必须在 C#、Java、PHP 和 Python 中解决这个问题。

现在有两件事我在这里不明白。

首先，我不确定字节是指文件的实际字符还是其他字符。问题没有说明它是否是文本文件。

其次，我不确定如何在没有实际加载到内存的情况下打开文件。

这就是我通常会解决这个问题的方式，但我认为如果我这样做，文件会被加载到内存中：

```
 string fileName = 'file.txt';
     reader = new StreamReader(fileName);

     string line;
     while ((line = reader.ReadLine()) != null)
     {
          Console.WriteLine(line + "\n");
     } 
```

另外，如果我当时读一行，我不确定如何实际反转所有字符。

**编辑**抱歉以多种语言发布我不想解决问题我只想澄清它所以我可以自己解决它我假设因为我必须用四种不同的语言解决它这个概念将适用于所有 4 和谁回答都没关系

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:57:13.537

打开a`FileStream`并使用`Seek`方法转到文件末尾。从那里往回走，一次读取一个字节。这将以相反的顺序读取。所以，直到你到达文件的*开头*，循环：

```
read 1 byte
// do whatever you want with that byte...write to another file?
seek back 2 bytes 
```

至于效率，您可以在内存中读取 1024 字节的缓冲区。这样，您就不会`Read`为文件的每个字节发出操作。填充缓冲区后，将其反转，您就可以开始了。

# arrays - 在循环中，将给定矩阵的值存储在数组中

> ID：15850521
> 
> 赞同：0
> 
> 时间：2013-04-06T11:45:06.637
> 
> 标签：arrays, matlab, loops, for-loop, store

我有以下代码

```
clc
clear

fcm=65

for t = 0.1:0.01:28
    s = 0.2;
    Bcc = exp(s*(1-(28/t)^0.5));
    fcmt = fcm *Bcc
end 
```

我想将给定矩阵的值存储在一个数组中，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:07:52.937

```
clc,clear all,close all

fcm = 65;
s = .2;
t = .1:.01:28;

Bcc = exp(s.*(1-(28./t).^0.5));
fcmt = fcm*Bcc; 
```

I hope this helps.

# c++ - 是否可以将 VTK 转换为 OSX 框架包？

> ID：15850524
> 
> 赞同：0
> 
> 时间：2013-04-06T11:45:25.303
> 
> 标签：c++, macos, frameworks, objective-c++, vtk

我想将 VTK 框架打包到我的应用程序中，就像 OSX 中的 .framework 包一样。

有可能这样做吗？如果是，请帮我做。

我已经下载了最新版本 5.10.1 的源代码

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:06:16.190

是的，有可能。Bundle 只是一个具有某些已定义结构的目录。有关详细信息，请参阅[框架编程指南](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Frameworks.html#//apple_ref/doc/uid/10000183-SW1)。

# c - 从 pthread_create 中的函数调用 C 程序

> ID：15850527
> 
> 赞同：0
> 
> 时间：2013-04-06T11:45:35.823
> 
> 标签：c, pthreads, job-scheduling

作为我们项目的一部分，我们正在尝试为循环流程实现流程调度代码。

作为尝试实现代码的一部分，我们需要根据循环调度来安排进程。

在我们的案例中，我们采用的进程是 3 个独立的独立 C 程序。所以我卡住的地方是当我调用 pthread_create( , , func, ) 时。我希望这个 'func' 参数调用我的 C 程序并执行它。如何使用 pthread 在我的原始 C 程序中调用我的三个单独的 C 程序。

另外，如果有人可以将我引导到一些资源/链接，我可以在其中了解如何更好地进行此操作。我完全理解Round Robin。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:53:02.733

对于您的任务，您不应该使用线程。`fork`是创建独立流程的正确工具。

# xml-parsing - sql中的php vlookup

> ID：15850530
> 
> 赞同：0
> 
> 时间：2013-04-06T11:45:45.630
> 
> 标签：xml-parsing, vlookup

我在sql中有一个这样的表

```
 ID  NAME  SIZE  GROUP1  GROUP2   SIZE2
   1   casa   xl    1        2        
   2   casa    l    1        2 
```

我想要一张这样的桌子

```
 ID  NAME  SIZE  GROUP1  GROUP2   SIZE2
     1   casa   xl    1        2         l
     2   casa    l    1        2         xl 
```

所以 GROUP1 和 GROUP2 的值识别具有相似名称但大小值不同的 id 我可以做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:50:46.507

再次加入同一张表，id与记录本身不同：

```
select
  t.ID, t.NAME, t.SIZE, t.GROUP1, t.GROUP2, t2.SIZE
from
  TheTable t
  inner join TheTable t2 on t2.ID = case t.GROUP1 when t.ID then t.GROUP2 else t.GROUP1 end 
```

从 table1 中选择并将其插入 table2：

```
insert into table2
select
  t.ID, t.NAME, t.SIZE, t.GROUP1, t.GROUP2, t2.SIZE
from
  table1 t
  inner join table1 t2 on t2.ID = case t.GROUP1 when t.ID then t.GROUP2 else t.GROUP1 end 
```

# php - 500 内部服务器错误或空白访问 php 文件

> ID：15850531
> 
> 赞同：-2
> 
> 时间：2013-04-06T11:46:06.577
> 
> 标签：php, mysql, web, apache2

我一直在尝试访问**localhost** `500 internal server error` **，** 这取决于文件。`blank page``php file`

 **我知道这可能是一个反复出现的问题，但我找不到解决方案。

我重新安装了一个基本上可以访问`mysql database`. 它以前在这台计算机上工作过，所以我认为代码是可以的。我也已经重新安装了数据库。

`Phpinfo.php` **正在工作**。

我已经看到这通常是一个**权限问题**，我已经将**所有内容都设置为 755**并且文件的所有者是**“root”**。

我不使用`.htaccess`文件，并且我启用了`mod_rewrite`我所看到的也可能导致此问题。

**有什么提示吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:00:58.647

`session_is_registered()`在 php 5.3 中已弃用，并在 php 5.4 中删除。使用`session_register()`,`session_unregister()`并`session_is_registered()`气馁了很长时间。

您的代码应该简单地使用`$_SESSION`超全局，它在请求之间持久存在，并且在调用后在脚本中可用`session_start()`。

如果你想知道你的会话是否有一个给定的变量，只需为数组键做一个 isset：

```
isset($_SESSION["key"]) 
```**

# tomcat - 在 Tomcat 7 上重命名 Web 部署描述符

> ID：15850532
> 
> 赞同：0
> 
> 时间：2013-04-06T11:46:12.667
> 
> 标签：tomcat, tomcat7

`web.xml`是否可以在 Tomcat 7 上为 Web 部署描述符 ( ) 使用其他名称？如果有怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T14:09:03.790

servlet 规范说部署描述符是 WEB-INF/web.xml。这是所有工具和所有 servlet 容器/应用程序服务器都同意并知道要处理的内容。

你到底为什么要这样做？

*在某些情况下，您根本*不需要- 请参阅[servlet 规范 3.0的 A.6.6 节](http://download.oracle.com/otndocs/jcp/servlet-3.0-fr-oth-JSpec/)

> 如果 Web 应用程序不包含任何 Servlet、Filter 或 Listener 组件，则它不需要包含 web.xml。换句话说，仅包含静态文件或 JSP 页面的应用程序不需要存在 web.xml。

编辑：回答您的评论，如果您想为两个不同的应用程序服务器提供两个不同的版本，您应该以不同的方式配置两个应用程序服务器（例如，通过提供不同的参数 - 例如阅读 JNDI 并使用它来连接到您的数据库），通过构建时更改，例如配置 ant 或 maven 以构建您的 webapp 的两个版本，或者在部署时 - 例如脚本部署和在部署步骤期间通过脚本更新 WAR 文件。

我之前错过了一个答案：Tomcat（以及 JBoss）是开源的。因此，从技术上讲，您可以使用不同的代码重新编译它以读取部署描述符。但是 a) 您将失去所有工具支持，因为没有 IDE 会期望此配置具有像 web.xml 中那样的任何效果（考虑读取 taglib 并指示有问题的 JSP）和 b) 您将像您一样创建维护噩梦必须为每个新的 tomcat 版本和没有人这样做，但你会期望任何自尊的网络服务器的这种行为

# c++ - 如何取消推送不在 Qt 中真正运行的命令？

> ID：15850536
> 
> 赞同：0
> 
> 时间：2013-04-06T11:46:28.733
> 
> 标签：c++, qt, undo-redo

我正在使用 Qt 的撤消/重做框架。我将撤消命令推送到撤消堆栈。但是，在命令的重做中调用的函数有时什么都不做，因为某些要求没有得到满足。在这种情况下，如何让undo栈回到命令推送前的状态呢？

我刚刚阅读了源代码`QUndoStack::push()`。它在第一次开始时调用重做。`redo()`如果是这样，我想我只需要在没有真正做任何事情的情况下在函数中抛出异常。这应该工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:59:04.533

我不认为你能做到这一点。当您将撤消命令推送到堆栈时，您这样做是因为您正在对文档或数据模型进行实际更改。一旦命令被推送，堆栈就会调用它的`redo()`方法。因此，在将命令推送到堆栈之前，您应该真正检查是否满足要求。不要推送任何实际上不会进行任何更改的命令。

# jquery - 在 Wordpress 模板 JS 中出现错误

> ID：15850537
> 
> 赞同：0
> 
> 时间：2013-04-06T11:46:37.467
> 
> 标签：jquery, ajax, wordpress, debugging

我在 js 中遇到了 wordpress 模板的主题选项问题。我猜这是Ajax上传的问题。这是代码：

我检查了大多数浏览器，并且所有浏览器都存在相同的问题。模板的作者也没有回应。

```
 <script>
    //AJAX Upload
    function of_image_upload_builder() {
    jQuery('.image_upload_button').each(function(){

    var clickedObject = jQuery(this);
    var clickedID = jQuery(this).attr('id');    

    var nonce = jQuery('#security').val();

    new AjaxUpload(clickedID, {
        action: ajaxurl,
        name: clickedID, // File upload name
        data: { // Additional data to send
            action: 'of_ajax_post_action',
            type: 'upload',
            security: nonce,
            data: clickedID },
        autoSubmit: true, // Submit file after selection
        responseType: false,
        onChange: function(file, extension){},
        onSubmit: function(file, extension){
            clickedObject.text('Uploading'); // change button text, when user selects file  
            this.disable(); // If you want to allow uploading only 1 file at time, you can disable upload button
            interval = window.setInterval(function(){
                var text = clickedObject.text();
                if (text.length < 13){  clickedObject.text(text + '.'); }
                else { clickedObject.text('Uploading'); } 
                }, 200);
        },
        onComplete: function(file, response) {
            window.clearInterval(interval);
            clickedObject.text('Upload Image'); 
            this.enable(); // enable upload button

            // If nonce fails
            if(response==-1){
                var fail_popup = jQuery('#of-popup-fail');
                fail_popup.fadeIn();
                window.setTimeout(function(){
                fail_popup.fadeOut();                        
                }, 2000);
            }               

            // If there was an error
            else if(response.search('Upload Error') > -1){
                var buildReturn = '<span class="upload-error">' + response + '</span>';
                jQuery(".upload-error").remove();
                clickedObject.parent().after(buildReturn);

                }
            else{
                var buildReturn = '<img class="hide of-option-image" id="image_'+clickedID+'" src="'+response+'" alt="" />';

                jQuery(".upload-error").remove();
                jQuery("#image_" + clickedID).remove(); 
                clickedObject.parent().after(buildReturn);
                $('img#image_'+clickedID).fadeIn();
                clickedObject.next('span').fadeIn();
                clickedObject.parent().prev('input').val(response);
            }
        }
    });

    });

    }
        //Add new slide
jQuery(document).ready(function() {
    jQuery(".builderslide_add_button").click(function() {   
    var slidesContainer = jQuery(this).prev();
    var sliderId = slidesContainer.attr('id');
    var sliderInt = jQuery('#'+sliderId).attr('rel');

    var numArr = jQuery('#'+sliderId +' li').find('.order').map(function() { 
        var str = this.id; 
        str = str.replace(/\D/g,'');
        str = parseFloat(str);
        return str;         
    }).get();

    var maxNum = Math.max.apply(Math, numArr);
    if (maxNum < 1 ) { maxNum = 0};
    var newNum = maxNum + 1;

    var newSlide = '<li class="temphide"><div class="slide_header"><strong>Box ' + newNum + '</strong><input type="hidden" class="slide of-input order" name="' + sliderId + '[' + newNum + '][order]" id="' + sliderId + '_slide_order-' + newNum + '" value="' + newNum + '"><a class="slide_edit_button" href="#">Edit</a></div><div class="slide_body" style="display: none; "><label>Title</label><input class="slide of-input of-slider-title" name="' + sliderId + '[' + newNum + '][title]" id="' + sliderId + '_' + newNum + '_slide_title" value=""><label>Type</label><select class="select of-input" name="' + sliderId + '[' + newNum + '][type]" id="' + sliderId + '_' + newNum + '_slide_type">';

            var newSlide = newSlide + '<option value="cat_news">News Box</option>';                             var newSlide = newSlide + '<option value="video_show">Video Show</option>';                             var newSlide = newSlide + '<option value="blog_style">Blog Style Box</option>';                             var newSlide = newSlide + '<option value="car_style">Carousel Box</option>';                            
    var newSlide = newSlide + '</select><label>Category</label><select class="select of-input" name="' + sliderId + '[' + newNum + '][cat]" id="' + sliderId + '_' + newNum + '_slide_cat">';

            var newSlide = newSlide + '<option value="0">All</option>';                             var newSlide = newSlide + '<option value="22">Blogs</option>';                              var newSlide = newSlide + '<option value="14">Interviews</option>';                             var newSlide = newSlide + '<option value="3">Mira's Daily MMA</option>';                                var newSlide = newSlide + '<option value="1">News</option>';                                var newSlide = newSlide + '<option value="398">Podcast Feed</option>';                              var newSlide = newSlide + '<option value="259">Uncategorized</option>';                             var newSlide = newSlide + '<option value="1673">Video Feed</option>';                               var newSlide = newSlide + '<option value="7">Videos</option>';                          
    var newSlide = newSlide + '</select><label>Tags (Seperate them by comma, example tag1, tag2)</label><input class="slide of-input of-slider-tags" name="' + sliderId + '[' + newNum + '][tags]" id="' + sliderId + '_' + newNum + '_slide_tags" value=""><label>Number</label><input class="slide of-input of-slider-number" name="' + sliderId + '[' + newNum + '][number]" id="' + sliderId + '_' + newNum + '_slide_number" value=""><a class="slide_delete_button" href="#">Delete</a><div class="clear"></div></div></li>';

    slidesContainer.append(newSlide);
    jQuery('.temphide').fadeIn('fast', function() {
        jQuery(this).removeClass('temphide');
    });

    of_image_upload_builder(); // re-initialise upload image..

    return false; //prevent jumps, as always..
});

});
</script> 
```

获取错误未捕获的语法错误：未识别的标识符：

```
 var newSlide = newSlide + '<option value="0">All</option>';                                var newSlide = newSlide + '<option value="22">Blogs</option>';                              var newSlide = newSlide + '<option value="14">Interviews</option>';                             var newSlide = newSlide + '<option value="3">Mira's Daily MMA</option>';                                var newSlide = newSlide + '<option value="1">News</option>';                                var newSlide = newSlide + '<option value="398">Podcast Feed</option>';                              var newSlide = newSlide + '<option value="259">Uncategorized</option>';                             var newSlide = newSlide + '<option value="1673">Video Feed</option>';                               var newSlide = newSlide + '<option value="7">Videos</option>';

var newSlide = newSlide + '</select><label>Tags (Seperate them by comma, example tag1, tag2)</label><input class="slide of-input of-slider-tags" name="' + sliderId + '[' + newNum + '][tags]" id="' + sliderId + '_' + newNum + '_slide_tags" value=""><label>Number</label><input class="slide of-input of-slider-number" name="' + sliderId + '[' + newNum + '][number]" id="' + sliderId + '_' + newNum + '_slide_number" value=""><a class="slide_delete_button" href="#">Delete</a><div class="clear"></div></div></li>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T22:30:00.190

每次重用关键字时，标识符都会被重置，所以所有的`newSlide`：`undefined``var`

```
var newSlide = newSlide + ... 
```

陈述应该是

```
newSlide = newSlide + ""; 
```

`var`初始化应该是：

```
var clickedObject = jQuery(this);
var clickedID = jQuery(this).attr('id');    
var newSlide = "";
var nonce = jQuery('#security').val(); 
```

# jquery - jquery自定义插件-初始化后操作

> ID：15850538
> 
> 赞同：0
> 
> 时间：2013-04-06T11:46:37.997
> 
> 标签：jquery, jquery-plugins

在将其绑定到元素后，我无法找出如何操作我编写的自定义函数。例如我有一个函数

```
jQuery.fn.myPlugin = function(opts) {
    this.someFunction = function() { };

    $(this).keypress(function() {
        // do something
        someFunction();
    });
};

$('#some-element').myPlugin({ someOption: 'option'}); 
```

我想做的是在设置插件后设置可选功能（someFunction）。所以类似的东西

```
$('#some-element').myPlugin("someFunction", function() { 
    // do something
}); 
```

我知道我需要在 myPlugin 中使用更多参数，并检查它是初始调用（使用 opts）还是初始化后正在更改的内容。但不太确定如何去做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:34:35.673

您是否考虑过使用 jqueryui 小部件工厂？这支持在创建后更改选项以及自定义方法和事件。

[http://wiki.jqueryui.com/w/page/12138135/Widget%20factory](http://wiki.jqueryui.com/w/page/12138135/Widget%20factory)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T13:18:07.087

阅读 jQuery 文档的**[插件/创作](http://docs.jquery.com/Plugins/Authoring)**页面。

可以使用这个插件开发模式（参见***插件方法***部分）：

```
(function( $ ){

  var methods = {
    init : function( options ) { 
      // THIS 
    },
    show : function( ) {
      // IS
    },
    hide : function( ) { 
      // GOOD
    },
    update : function( content ) { 
      // !!! 
    }
  };

  $.fn.tooltip = function( method ) {

    // Method calling logic
    if ( methods[method] ) {
      return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {
      return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
    }    

  };

})( jQuery ); 
```

# amazon-s3 - 受保护下载的 Amazon S3 存储桶策略

> ID：15850539
> 
> 赞同：0
> 
> 时间：2013-04-06T11:46:45.870
> 
> 标签：amazon-s3

我想编写一个 S3 存储桶策略，该策略将限制对存储桶中所有项目的公开访问，并且只允许使用传递密钥和共享密钥的 AWS REST 接口完成下载。任何编写此类政策的示例或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T22:50:48.363

这个怎么样？

```
{
  "Id": "Policy1365979145718",
  "Statement": [
    {
      "Sid": "Stmt1365979068994",
      "Action": [
        "s3:GetObject",
        "s3:ListBucket"
      ],
      "Effect": "Allow",
      "Resource": "arn:aws:s3:::mybucket",
      "Principal": {
        "AWS": [
          "CanonicalUser: 79a59df900b949e55d96a1e698fbacedfd6e09d98eacf8f8d5218e7cd47ef2be"
        ]
      }
    }
  ]
} 
```

为此目的创建一个用户（提供该用户的密钥）并将 CanonicalUser ID 替换为该用户的 ID。当然，您将始终拥有使用 AWS 账户的根密钥的完全访问权限。

如果您想使用它，亚马逊有一个[策略生成器。](http://awspolicygen.s3.amazonaws.com/policygen.html)

# objective-c - 使用 Cocoa 自动布局的自定义视图中的内容填充

> ID：15850543
> 
> 赞同：0
> 
> 时间：2013-04-06T11:47:15.443
> 
> 标签：objective-c, macos, cocoa, nsview, autolayout

我有一个自定义`NSView`子类，它本身有一个边框。在此视图内绘制边框。是否可以通过自动布局来尊重这个边界？

例如，当我将子视图放置到我的自定义视图并设置如下约束时：

```
@"H:|-(myViewSubView)-|" (not @"H:|-(myViewBorderWidth)-(myViewSubView)-(myViewBorderWidth)-|")
@"V:|-(myViewSubView)-|" 
```

布局必须是：

```
Horizontal: |-(myViewBorderWidth)-|myViewSubview|-(myViewBorderWidth)-|
  Vertical: |-(myViewBorderWidth)-|myViewSubview|-(myViewBorderWidth)-| 
```

我试图`-bounds`在我的视图中覆盖方法以返回没有边界的边界矩形，但这没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T18:25:40.313

### 更新

我刚刚注意到您的问题是在谈论`NSView`（OS X），而不是`UIView`（iOS）。好吧，这个想法应该仍然适用，但是您将无法将我的代码原封不动地放入您的项目中。对不起。

### 原来的

考虑更改您的视图层次结构。假设您的自定义边框视图称为`BorderView`. 现在，您正在将子视图直接添加到并在 其子视图`BorderView`之间创建约束。`BorderView`

相反，给它`BorderView`一个单独的子视图，它在其`contentView`属性中公开。将您的子视图添加到`contentView`而不是直接添加到`BorderView`. 然后`BorderView`可以根据需要布置`contentView`它。这是如何`UITableViewCell`工作的。

这是一个例子：

```
@interface BorderView : UIView

@property (nonatomic, strong) IBOutlet UIView *contentView;
@property (nonatomic) UIEdgeInsets borderSize;

@end 
```

如果我们使用的是 xib，那么我们遇到的问题是 IB 不知道它应该将子视图添加到`contentView`而不是直接添加到`BorderView`. （它确实知道这一点`UITableViewCell`。）为了解决这个问题，我做了`contentView`一个出口。这样，我们可以创建一个单独的顶级视图用作内容视图，并将其连接到`BorderView`的`contentView`插座。

为了实现`BorderView`这种方式，我们需要为 the`BorderView`和 its之间的四个约束中的每一个提供一个实例变量`contentView`：

```
@implementation BorderView {
    NSLayoutConstraint *topConstraint;
    NSLayoutConstraint *leftConstraint;
    NSLayoutConstraint *bottomConstraint;
    NSLayoutConstraint *rightConstraint;
    UIView *_contentView;
} 
```

`contentView`访问者可以按需创建内容视图：

```
#pragma mark - Public API

- (UIView *)contentView {
    if (!_contentView) {
        [self createContentView];
    }
    return _contentView;
} 
```

并且 setter 可以替换现有的内容视图，如果有的话：

```
- (void)setContentView:(UIView *)contentView {
    if (_contentView) {
        [self destroyContentView];
    }
    _contentView = contentView;
    [self addSubview:contentView];
} 
```

`borderSize`setter 需要安排更新约束和重绘边框：

```
- (void)setBorderSize:(UIEdgeInsets)borderSize {
    if (!UIEdgeInsetsEqualToEdgeInsets(borderSize, _borderSize)) {
        _borderSize = borderSize;
        [self setNeedsUpdateConstraints];
        [self setNeedsDisplay];
    }
} 
```

我们需要在`drawRect:`. 我将用红色填充它：

```
- (void)drawRect:(CGRect)rect {
    CGRect bounds = self.bounds;
    UIBezierPath *path = [UIBezierPath bezierPathWithRect:bounds];
    [path appendPath:[UIBezierPath bezierPathWithRect:UIEdgeInsetsInsetRect(bounds, self.borderSize)]];
    path.usesEvenOddFillRule = YES;
    [path addClip];
    [[UIColor redColor] setFill];
    UIRectFill(bounds);
} 
```

创建内容视图很简单：

```
-  (void)createContentView {
    _contentView = [[UIView alloc] init];
    [self addSubview:_contentView];
} 
```

销毁它稍微复杂一些：

```
- (void)destroyContentView {
    [_contentView removeFromSuperview];
    _contentView = nil;
    [self removeConstraint:topConstraint];
    topConstraint = nil;
    [self removeConstraint:leftConstraint];
    leftConstraint = nil;
    [self removeConstraint:bottomConstraint];
    bottomConstraint = nil;
    [self removeConstraint:rightConstraint];
    rightConstraint = nil;
} 
```

`updateConstraints`如果有人调用，系统会在进行布局和绘图之前自动调用`setNeedsUpdateConstraints`，我们就是这样做的`setBorderSize:`。在`updateConstraints`中，如有必要，我们将创建约束，并根据 更新它们的常量`borderSize`。我们还告诉系统不要将自动调整大小的掩码转换为约束，因为这往往会产生无法满足的约束。

```
- (void)updateConstraints {
    self.translatesAutoresizingMaskIntoConstraints = NO;
    self.contentView.translatesAutoresizingMaskIntoConstraints = NO;
    [super updateConstraints];
    if (!topConstraint) {
        [self createContentViewConstraints];
    }
    topConstraint.constant = _borderSize.top;
    leftConstraint.constant = _borderSize.left;
    bottomConstraint.constant = -_borderSize.bottom;
    rightConstraint.constant = -_borderSize.right;
} 
```

所有四个约束都是以相同的方式创建的，所以我们将使用一个辅助方法：

```
- (void)createContentViewConstraints {
    topConstraint = [self constrainContentViewAttribute:NSLayoutAttributeTop];
    leftConstraint = [self constrainContentViewAttribute:NSLayoutAttributeLeft];
    bottomConstraint = [self constrainContentViewAttribute:NSLayoutAttributeBottom];
    rightConstraint = [self constrainContentViewAttribute:NSLayoutAttributeRight];
}

- (NSLayoutConstraint *)constrainContentViewAttribute:(NSLayoutAttribute)attribute {
    NSLayoutConstraint *constraint = [NSLayoutConstraint constraintWithItem:_contentView attribute:attribute relatedBy:NSLayoutRelationEqual toItem:self attribute:attribute multiplier:1 constant:0];
    [self addConstraint:constraint];
    return constraint;
}

@end 
```

我在[这个 git 存储库](https://github.com/mayoff/stackoverflow-15850543-BorderView-managing-contentView-and-constraints)中放了一个完整的工作示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-11T13:22:22.010

为了将来参考，您可以覆盖`NSView.alignmentRectInsets`以影响布局指南的位置：

> **在其内容周围绘制装饰的自定义视图**可以覆盖此属性并返回与内容边缘对齐的插图，不包括装饰。这允许基于约束的布局系统根据它们的内容对齐视图，而不仅仅是它们的框架。

文档链接：

[https://developer.apple.com/documentation/appkit/nsview/1526870-alignmentrectinsets](https://developer.apple.com/documentation/appkit/nsview/1526870-alignmentrectinsets)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T15:14:37.353

`addConstraint:`我发现的一种解决方案是在添加约束之前重载方法并修改约束：

```
- (void)addConstraint:(NSLayoutConstraint *)constraint
{
    if(constraint.firstItem == self || constraint.secondItem == self) {
        if(constraint.firstAttribute == NSLayoutAttributeLeading) {
            constraint.constant += self.leftBorderWidth;
        } else if (constraint.firstAttribute == NSLayoutAttributeTrailing) {
            constraint.constant += self.rightBorderWidth;
        } else if (constraint.firstAttribute == NSLayoutAttributeTop) {
            constraint.constant += self.topBorderWidth;
        } else if (constraint.firstAttribute == NSLayoutAttributeBottom) {
            constraint.constant += self.bottomBorderWidth;
        }
    }

    [super addConstraint:constraint];
} 
```

然后还在设置器中处理此约束`xxxBorderWidth`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T16:03:54.183

您是否尝试过将内在尺寸设置为包括边框尺寸？

```
- (NSSize)intrinsicContentSize
{
    return NSMakeSize(width+bordersize, height+bordersize);
} 
```

那么您需要在两个方向上设置内容压缩阻力优先级：

```
[self setContentCompressionResistancePriority:NSLayoutPriorityRequired forOrientation:NSLayoutConstraintHorizontal];
[self setContentCompressionResistancePriority:NSLayoutPriorityRequired forOrientation:NSLayoutConstraintVertical]; 
```

# three.js - 在 dat.gui 中为不同的选择显示不同的滑块

> ID：15850545
> 
> 赞同：0
> 
> 时间：2013-04-06T11:47:26.193
> 
> 标签：three.js, dat.gui

我有一个 gui，用户可以在其中选择不同的形状以使用下拉菜单进行渲染。这很好用。现在我想显示一个带有一些滑块的文件夹。滑块的计数、名称和最小/最大值因选择的形状而异。我怎样才能用 dat.gui 做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T17:05:25.070

好的，通过将其添加到 dat.GUI 原型中找到了解决方案：

```
dat.GUI.prototype.removeFolder = function(name) {
  var folder = this.__folders[name];
  if (!folder) {
    return;
  }
  folder.close();
  this.__ul.removeChild(folder.domElement.parentNode);
  delete this.__folders[name];
  this.onResize();
} 
```

# php - MySQL GROUP_CONCAT

> ID：15850547
> 
> 赞同：1
> 
> 时间：2013-04-06T11:47:36.497
> 
> 标签：php, mysql, group-concat

我有两个 Mysql 表

参与者

```
id   |   name   | lastname |
----------------------------
1    |    Jon   |   Bush   |
2    |  Stephen |   Eagle  | 
```

和

帖子

```
id    |  parentid |  Title  |   text
--------------------------------------
1     |    1      |  Title1 |  Text1
2     |   1       | title3  |  text2
3     |      1    | title4  | text4
4     |      2    |   title |   ttext 
```

我需要离开桌子

```
id (1) | Jon   | <a href='index.php?id='1'>Title1</a>, <a href='index.php?id='2'>title3</a>, <a href='index.php?id='3'>title4</a>
id (2) | Stephen | <a href='index.php?id='4'>title<a/> 
```

所以我需要用包含 ID 的超链接取出标题。

我用

```
SELECT  a.ID, a.Name,
        GROUP_CONCAT(b.Title) TitleList
FROM    participants a
        INNER JOIN posts b
            ON a.ID = b.parentID
GROUP   BY  a.ID, a.Name 
```

但在这种情况下，我只能取出没有 ID 行的标题行...

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T11:55:12.350

```
GROUP_CONCAT(b.Title) TitleList 
```

应该改为：

```
GROUP_CONCAT( CONCAT("<a href='index.php?id=", b.id, "'", b.Title, "</a>") ) TitleList 
```

* * *

注意它会给你

```
<a href='index.php?id=1'>Title1</a> 
```

这是正确的超链接方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T12:18:11.240

```
select 
  a.id, 
  a.name,  
  group_concat(b.id) ids, 
  group_concat(b.title) titles,
  group_concat(concat("<a href='index.php?id=", b.id, "'>", b.title, "</a>")) titlelist
from participants a
inner join
  posts b on b.parentid = a.id
group by a.id,a.name 
```

[sql小提琴](http://www.sqlfiddle.com/#!2/4e0f2/7)

我建议您将链接分配到您的 PHP 代码中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-06T12:03:52.403

I guess this will do

`SELECT a.ID, a.Name, GROUP_CONCAT(concat(b.Title,'-',b.id)) TitleList FROM participants a INNER JOIN posts b ON a.ID = b.parentID GROUP BY a.ID, a.Name`

# java - 备份MYSQL数据库时出错

> ID：15850548
> 
> 赞同：1
> 
> 时间：2013-04-06T11:47:37.330
> 
> 标签：java, mysql

我很抱歉这个愚蠢的问题，但是当我运行这段代码时，我总是会出错。此代码旨在从我的 mysql 数据库中获取备份并显示它。供您参考，远程 mysql 已启用。

这是代码：

```
private void backupDatabaseButtonActionPerformed(ActionEvent e) {

        try {
            Runtime.getRuntime().exec("mysqldump -u user -p pass db > C:\\backup.sql");
        } catch (IOException e1) {
            e1.printStackTrace();
        }

    } 
```

我用正确的登录详细信息替换了用户、密码和数据库，但我总是收到错误消息。

这是错误：

```
java.io.IOException: Cannot run program "mysqldump": CreateProcess error=2, The system cannot find the file specified
    at java.lang.ProcessBuilder.start(Unknown Source)
    at java.lang.Runtime.exec(Unknown Source)
    at java.lang.Runtime.exec(Unknown Source)
    at java.lang.Runtime.exec(Unknown Source)
    at databaseTools.backupDatabaseButtonActionPerformed(databaseTools.java:23)
    at databaseTools.access$0(databaseTools.java:20)
    at databaseTools$1.actionPerformed(databaseTools.java:51)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: java.io.IOException: CreateProcess error=2, The system cannot find the file specified
    at java.lang.ProcessImpl.create(Native Method)
    at java.lang.ProcessImpl.<init>(Unknown Source)
    at java.lang.ProcessImpl.start(Unknown Source)
    ... 43 more 
```

有谁知道我为什么会收到这个错误？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T11:49:41.343

您是否尝试过提供 mysqldump 可执行文件的完整路径？

# python - 将日期格式化为所需格式会在 python 中返回无效日期。如何控制它？

> ID：15850550
> 
> 赞同：0
> 
> 时间：2013-04-06T11:48:01.460
> 
> 标签：python, datetime, strftime

我有一个日期列表，例如：

```
['2013-04-06', '06/04/2013', '04/06/2013', 'Apr 06 2013'] 
```

我曾经用于`datetime.strftime()`转换日期`('%d/%m/%Y')`，但是当它转换相同的日期时使用不同的格式，例如：

```
dd/mm/yyyy and mm/dd/yyyy
'06/04/2013' and '04/06/2013' 
```

它按原样返回日期......我该
如何解决我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T11:54:20.760

你不能，至少不能 100% 可靠。如果您的日期格式如此混杂，您将永远无法判断`04/06/2013`应该是 4 月 6 日还是 6 月 4 日。

您唯一的机会是采用更常见的变体并首先尝试。如果这引发错误或返回不可信的日期（如未来的日期，如果不允许），请尝试下一个日期。

您可能还想查看[dateutil](http://labix.org/python-dateutil)。它尽最大努力以任何给定格式解析日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T12:02:56.127

数字日期可能不明确。有几个解决方案；

*   使用缩写的月份名称；“2013 年 4 月 6 日”或“2013 年 4 月 6 日”。缺点是月份的缩写取决于语言环境。
*   坚持国际标准[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)；YYYY-MM-DD 或 YYYYMMDD。

如果您从用户输入中获取日期，则在所有情况下都无法区分 MM-DD 和 DD-MM。但是有些事情可以提供帮助。>12 的数字显然是一天，而不是一个月。如果您知道用户来自欧洲，则日期可能是 DD-MM-YYYY。来自美国的人更有可能使用 MM-DD-YYYY。

# jquery - 加载网页后，如何使用 jquery 进行 div 弹跳？

> ID：15850557
> 
> 赞同：0
> 
> 时间：2013-04-06T11:48:42.783
> 
> 标签：jquery, jquery-animate, bounce

用户错误地输入登录详细信息后，网页会重新加载并显示错误消息，要求他们再次插入详细信息。但我希望错误消息 div 在提交用户详细信息后重新加载页面时（或仅在加载页面时）反弹几次。

我遇到了这个脚本，它可以制作我想要的动画，但需要 .click 事件。我怎么能改变它，让它在页面加载时动画？

```
$("div").click(function () {
  $(this).effect("bounce", { times:3 }, 300); 
```

});

这种效果也适用于标准 jquery 库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:56:25.667

尝试像这样[的 FIDDLE](http://jsfiddle.net/kf3pU/)

```
$(function(){
    $("#my_div").effect("bounce", { times:3 }, 300);
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:13:03.560

```
$(document).ready(function(){
     $("#my_div").effect("bounce", { times:3 }, 300);
}); 
```

或者

```
$(window).load(function(){
   $("#my_div").effect("bounce", { times:3 }, 300);
}); 
```

# ios - Xcode - 在项目之外构建的调试库

> ID：15850563
> 
> 赞同：1
> 
> 时间：2013-04-06T11:49:18.953
> 
> 标签：ios, xcode, xcode4.5, xcode4.6

我有一个 C 库，其代码位于 /repos1/clib 中。我使用最新的 iOS sdk 从命令行构建它以创建 clib.a（包括模拟器的调试构建），我将其复制到 /repos2/proj 中的 iOS 项目中。

我已经使用这个设置好几年了。旧的 C 库偶尔可能需要一些调试，我很高兴 Xcode 只需进入项目外部（repos1 内）的库代码而无需进行任何设置 - 它就可以工作。但这直到几个 Xcode 版本之前。我不确定它是什么时候改变的——也许是他们从 gcc 转移到 llvm 的时候？- 因为我很少需要调试 C 代码，但有一段时间我只有在尝试从 iOS 项目调试 C 库时才会被拆解（至少包括对 C 文件名和行号的引用）。有几次我需要调试它非常不方便（我创建了一个包含 C 代码的临时项目）。

那么，知道为什么它以前有效而现在无效吗？我应该去哪里看？可能是我构建 C 库的方式，也许我使用的 gcc 中有一个标志在 llvm 中没有等效项（如果相关，我可以找到并发布我正在使用的旧构建命令）？是 Xcode 中的问题吗？有办法告诉它在哪里寻找源代码？

谢谢！

编辑：为了清楚起见，我可以将 C 库添加为 Xcode 中的源代码或子项目，但是由于超出范围的原因，这对这个特定项目没有帮助。那么，它可以像以前的 Xcode 版本一样工作吗？如果没有，知道为什么不这样做仍然很有趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:03:50.683

The recommended approach is to create a library project in Xcode, one for iOS (there is a template for it), then when you get that to build add that project to your app, make sure the lib is a dependency and gets linked. There are many tutorials on the web how to do this.

Then as iOS evolves and new architectures (armv7s) arrive you simply update both projects.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:07:33.783

我在同样的问题上苦苦挣扎。

我尝试在库/应用程序项目中重置与符号剥离相关的所有选项，并将应用程序项目复制到与库项目相同的 truecrypt 驱动器，但它没有帮助。

就我而言，这似乎是一个应用程序项目问题。可以使用源代码在另一个应用程序项目中调试相同的库，这是一个线索。

我在应用程序项目中有多个版本的同一个库，并且只设置了目标成员来选择应该使用的成员。不确定这是否会以某种方式影响我的应用程序项目。然而，在删除所有库并将它们再次复制到应用程序项目后，我能够通过访问源代码来调试库。

# javascript - JavaScript 动态设置 img src 为 HTML5 上传文件

> ID：15850564
> 
> 赞同：2
> 
> 时间：2013-04-06T11:49:20.980
> 
> 标签：javascript, html, jszip

我正在使用[JSZip](http://stuk.github.io/jszip/)库来提取上传的 epub 文件。我可以成功地遍历它并在库中显示文件的名称：

```
zipEntry.name; 
```

我可以找到带有字符串比较的 cover.jpg 文件。如何将我的 html 页面上的图像源设置为该封面？我试过了：

```
src=zipEntry; 
```

和

```
src=zipEntry.name; 
```

甚至可能吗？有没有一种简单的方法可以用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T14:54:13.063

我尝试在页面上放置一个空图像

```
<img id="testimg" /> 
```

然后使用此 javascript 代码显示来自 zip 文件的 PNG 图像：

```
var zipEntry = zip.file('test.png');
$('#testimg')[0].src = 'data:image/png;base64,' + base64_encode(zipEntry.asBinary()); 
```

这对我有用。有关工作代码的演示，请参阅此[JSFiddle](http://jsfiddle.net/whr8z/6/)。

您将需要该功能`base64_encode()`（来自[phpjs.org](http://phpjs.org/functions/base64_encode/)）：

```
function base64_encode (data) {
  // phpjs.org
  var b64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
  var o1, o2, o3, h1, h2, h3, h4, bits, i = 0,
    ac = 0,
    enc = "",
    tmp_arr = [];

  if (!data) {
    return data;
  }

  do { // pack three octets into four hexets
    o1 = data.charCodeAt(i++);
    o2 = data.charCodeAt(i++);
    o3 = data.charCodeAt(i++);

    bits = o1 << 16 | o2 << 8 | o3;

    h1 = bits >> 18 & 0x3f;
    h2 = bits >> 12 & 0x3f;
    h3 = bits >> 6 & 0x3f;
    h4 = bits & 0x3f;

    // use hexets to index into b64, and append result to encoded string
    tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);
  } while (i < data.length);

  enc = tmp_arr.join('');

  var r = data.length % 3;

  return (r ? enc.slice(0, r - 3) : enc) + '==='.slice(r || 3);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:00:57.093

您需要知道主机位于哪个图像上，而不仅仅是图像名称。或者在base64中有图像数据。

```
load image from external (or local) host:
<img src="{HOST}/cover.jpg"/>

base64:
<img src="data:image/jpg;base64,R0lGODdhMAAw....." /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T06:03:26.833

嗨，我正在使用这个和用户 json 数组图像路径而不是使用 {"+http//......+"} 的源

```
for(i=0;i<10;i++){
document.getElementById("five_star").innerHTML = "<img alt='' src='images/activestar.png'>";
} 
```

# git - git push 后新文件不存在

> ID：15850566
> 
> 赞同：2
> 
> 时间：2013-04-06T11:49:30.967
> 
> 标签：git, linode

我有一个问题：我的 linode 上有一个 git-repo，我用 git init --bare project.git 在一个名为“project”的文件夹中创建了它。

之后我克隆了 repo 并想添加一些新文件 git add file.php" 和 "git commit -m "initial load" 然后："git push origin master"

一切正常，直到这里！

现在我正在查看我的 linode 到 repo（项目）的文件夹中，并没有看到我推送的任何文件！我已经查看了 git log ，其中每个提交都正确显示。但是我的文件呢？？？

请帮助:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T16:42:00.583

你已经在你的 linode 上创建了一个裸仓库——它没有工作副本，只有内部 git 表示。您可以查看该裸仓库中的日志，但不会看到文件系统中的文件。

如果您在其他地方克隆 repo（非裸克隆），它将有一个工作副本，您将看到这些文件。此克隆还将在克隆根目录的 .git 目录中拥有内部 git 表示的副本。

[使用裸仓库作为您的中心协调点](http://www.gitguys.com/topics/shared-repositories-should-be-bare-repositories/)是正常且可取的，因为您不应该推送到非裸仓库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T16:21:08.367

创建一个非裸存储库。否则，您只会看到 git 对象/配置文件。

# mysql - 主键默认可以为NULL吗？为什么会这样描述？

> ID：15850570
> 
> 赞同：5
> 
> 时间：2013-04-06T11:49:45.547
> 
> 标签：mysql, sql, database, primary-key

我有一张桌子，当我`describe`是：

```
mysql> DESC my_table;  
+------------+-------------+------+-----+---------+----------------+  
| Field      | Type        | Null | Key | Default | Extra          |  
+------------+-------------+------+-----+---------+----------------+  
| contact_id | int(11)     | NO   | PRI | NULL    | auto_increment |  
| location   | varchar(20) | YES  |     | NULL    |                |  
| city       | varchar(20) | YES  |     | NULL    |                |  
| state      | varchar(2)  | YES  |     | NULL    |                |  
+------------+-------------+------+-----+---------+----------------+  
4 rows in set (0.01 sec) 
```

`contact_id`我的问题是：为什么主键`Default`显示为`NULL`？我为该列
创建了表，但无论如何都不能。 怎么可能？_ _`NOT NULL``Primary Key``NULL`
`Null``NO``Default``NULL`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T12:55:58.013

它不能为空的事实使得“默认”列的内容无关紧要。他们在“默认”列中使用“空”，否则他们将需要另一个魔术值来指示“不相关”、“未使用”、结束。

别担心。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T11:58:16.980

`NOT NULL`在 MySQL 中用于表示该字段不能为空。在您的情况下， Primary Key 字段`contact_id`在属性中正确显示为 No `Null`。`Default`数据类型规范中的子句指示列的默认值。这里您的主键字段`contact_id`没有任何默认值。所以显示为`NULL`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-21T09:24:05.980

请放心，即使默认列显示`(NULL)`主键字段的值，也没关系。让我们列出 Default 具有此 (NULL) 值的所有情况：

*   如果您的 SQL 请求为主字段提供值：不调用默认值

*   如果您的 SQL 请求没有提供值而是自动增量字段：不调用默认值

*   如果您的 SQL 请求未提供值并且该字段不是自动增量并且可以为 null ：调用默认值并插入 NULL

*   如果您的 SQL 请求未提供值且该字段不是自动增量**且不能为空**：调用默认值但您收到错误消息，告诉您该字段“不能为空”

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-07T10:16:50.540

在您的情况下，默认列中的 NULL 表示用户没有指定任何值作为默认值。

# osgi - OSGi 强制捆绑使用不同的配置启动两次

> ID：15850571
> 
> 赞同：4
> 
> 时间：2013-04-06T11:49:47.420
> 
> 标签：osgi, apache-felix

我在我的应用程序中使用嵌入式 Felix。应用程序可能会处理许多公开类似接口的插件`IFoo`。有一个默认实现`FooImpl`希望大多数插件默认`FooImpl`可以与特定的配置文件一起使用。

`FooImpl`当新的配置文件出现时，我想动态安装并启动同一个包（使用）。我已经查看过 FileInstall，但不知道如何在那里应用它。

**更新**：部署顺序。`FooImpl`包含and的 jar`IFoo`是稳定的，但我需要热部署新实例，这是将新的 .cfg 文件上传到 FileInstall 范围的结果。所以想要的非常简单——用户上传.cfg，新服务（实例`FooImpl`）就出现了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T05:52:21.367

使用工厂配置将允许您基于不同的配置创建不同的 FooImpl 实例。

例如，在声明式服务中，您可以创建一个组件，如

```
import org.apache.felix.scr.annotations.*;
import org.apache.sling.commons.osgi.PropertiesUtil;

@Component(metatype = true, 
        name = FooImpl.SERVICE_PID,
        configurationFactory = true, 
        specVersion = "1.1",
        policy = ConfigurationPolicy.REQUIRE)
public class FooImpl implements IFoo
{
    //The PID can also be defined in interface
    public static final String SERVICE_PID = "com.foo.factory";

    private static final String DEFAULT_BAR = "yahoo";
    @Property
    private static final String PROP_BAR = "bar";

    @Property(intValue = 0)
    static final String PROP_RANKING = "ranking";

    private ServiceRegistration reg;

    @Activate
    public void activate(BundleContext context, Map<String, ?> conf)
        throws InvalidSyntaxException
    {
        Dictionary<String, Object> props = new Hashtable<String, Object>();
        props.put("type", PropertiesUtil.toString(config.get(PROP_BAR), DEFAULT_BAR));
        props.put(Constants.SERVICE_RANKING,
            PropertiesUtil.toInteger(config.get(PROP_RANKING), 0));
        reg = context.registerService(IFoo.class.getName(), this, props);
    }

    @Deactivate
    private void deactivate()
    {
        if (reg != null)
        {
            reg.unregister();
        }
    }
} 
```

这里的关键点是

1.  您使用类型的组件`configurationFactory`
2.  在激活方法中，您读取配置，然后基于该注册服务
3.  在停用时，您明确取消注册服务
4.  然后，最终用户将使用 name 创建配置文件`<pid>-<some name>.cfg`。然后 DS 将激活该组件。

`<pid>-<some name>.cfg`然后，您可以通过创建名称为like的配置（使用 File Install like）文件来创建多个实例`com.foo.factory-type1.cfg`

有关此类示例，请参阅[JdbcLoginModuleFactory](https://github.com/apache/felix/blob/trunk/examples/jaas/lm-jdbc/src/main/java/org/apache/felix/example/jaas/jdbc/JdbcLoginModuleFactory.java)及其相关[配置](https://github.com/apache/felix/blob/trunk/examples/jaas/launcher/src/main/config/org.apache.felix.example.jaas.jdbc.factory-h2.cfg)。

如果你想通过普通的 OSGi 实现相同的目标，那么你需要注册一个[ManagedServiceFactory](http://www.osgi.org/javadoc/r4v42/org/osgi/service/cm/ManagedServiceFactory.html)。有关此类示例，请参阅[JaasConfigFactory](https://github.com/apache/felix/blob/trunk/jaas/src/main/java/org/apache/felix/jaas/internal/JaasConfigFactory.java)。

这里的关键点是

1.  您使用配置 PID 注册一个 ManagedServiceFactory 实例作为服务属性
2.  在 ManagedServiceFactory(String pid, Dictionary properties) 回调中根据配置属性注册 FooImpl 的实例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T13:20:18.130

听起来您只想安装一个带有 FooImpl 的捆绑包，但让它注册多个 IFoo 服务，每个配置一个。查看声明式服务并使用带有 Config Admin 的工厂配置来为 DS 组件建立多个配置。

# asp.net - 如何在 asp.net 主子页面中使用 css 突出显示当前页面

> ID：15850587
> 
> 赞同：1
> 
> 时间：2013-04-06T11:52:18.033
> 
> 标签：asp.net, navigation, master-pages

我在 asp.net 中有主子页面，我想突出显示当前处于活动状态的页面，可以使用各种页面的 id 和 css 中的导航链接轻松完成，但在 asp.net 主子页面概念中，没有`<body>`儿童内容，如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:21:59.797

尝试使用 CSS 样式。你可以使用类似的东西：

```
<a href='Page1.aspx' class="<%=SetCssClass('Page1.aspx')%>"></a>
<a href='Page2.aspx' class="<%=SetCssClass('Page2.aspx')%>"></a>
<a href='Page3.aspx' class="<%=SetCssClass('Page3.aspx')%>"></a>
<a href='Page4.aspx' class="<%=SetCssClass('Page4.aspx')%>"></a> 
```

U 现在可以使用一个简单的函数来设置要使用的 css 类

# templates - 文档类型中的 Umbraco 错误

> ID：15850589
> 
> 赞同：1
> 
> 时间：2013-04-06T11:52:19.513
> 
> 标签：templates, umbraco

很久以前，我第一次在 Umbraco 建立了一个网站。这似乎工作正常。大约一年后，我现在回到它，最初在选择文档类型（“设置”选项卡中的任何文档类型）时遇到以下错误：

![黄屏死机](https://i.stack.imgur.com/Uwds5.jpg)

有点奇怪，因为之前我没有这个问题，但是很好。我按照它说的做，并添加`<identity impersonate="true"/>`到`<system.web>`web.config 中的节点。

虽然它确实解决了最初的问题，但我现在对所有文档类型都有以下内容：

![404页](https://i.stack.imgur.com/LcNRN.jpg)

尝试创建新的文档类型时，我得到了同样的错误，但是 ReturnUrl 部分是`ReturnUrl=/umbraco/create.aspx?nodeId=init&nodeType=inittemplates&nodeName=Templates&rnd=20.2&rndo=21.2&nodeId=init&nodeType=inittemplates&nodeName=Templates&rnd=20.2&rndo=21.2'`- 但前提是我勾选了“为此项目创建模板”框。当我尝试创建模板时也会发生同样的情况。

谷歌搜索后，我想出了这个：[our.umbraco post with similar issue](http://our.umbraco.org/forum/using/ui-questions/17351-Template-problem-%28-!!Help-please)。一个（未经证实的）解决方案是文档类型/模板中有一个非法名称 - 但我没有更改任何内容，并且可以通过进入数据库来修复。
我确实检查了 /masterpages 文件夹，其中唯一的“奇怪”字符是 - 和 _。在我的文档类型中，我有一个名为“Textpage (Two col)”和另一个名为“News & Events list”的文件。我有点犹豫是否要删除它们，因为我没有足够的 Umbraco 知识来确保这会解决我的问题......

是否有任何已知的解决方案，或者我是否还必须进入数据库（如果有，下落？）

我正在运行 Umbraco 4.7.2，程序集版本 1.0.4500.21031。我用 GoDaddy.com 托管了这个网站——我不知道这是否相关。

**[更新 1]**
根据 Tom Maton 的评论：

requirepermissions 应该设置为 false，并且已经设置为 false。

在 Appsettings 我设置了这个：

```
<add key="umbracoUseMediumTrust" value="true" /> 
```

我已经添加`Trusted_Connection=yes`到连接字符串中。问题依然存在。

**[更新 2]**
尝试了 amelvin 提供的解决方案，但没有骰子。Doctypes 和模板仍然给出错误。我越来越确定这是一些安全问题。哪个文件夹对应于模板？那会是母版页文件夹吗？如果是这样，那需要什么样的权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:31:14.093

该错误可能是尚未解决的权限错误造成的。

但是，如果内容页面没有分配模板或者 Umbraco 认为它没有模板，则会引发错误。如果站点没有发生任何变化，那么可能是 umbraco.config 文件以某种方式损坏（它将包含所有 doctype/template 交叉引用信息）。这可以通过右键单击顶部的“内容”节点并选择“重新发布整个网站”来解决。

其次导航到设置| 文档类型（如果现在可以的话）并检查相应文档类型的第一个选项卡上的模板下拉菜单。如果将其设置为“请选择”，则当任何页面尝试在未分配有效模板的情况下进行渲染时，将引发此错误。如果分配了默认模板 - 然后转到该模板并重新发布它 - Umbraco 可能已经丢失了它。

如果这不起作用，请检查模板是否分配正确。转到内容树中与问题页面相同的位置，并尝试添加具有所需文档类型的节点。如果未提供任何选项，则可能是父选项卡不再允许将正确的文档类型作为子节点，因此请返回文档类型并检查父节点的允许子节点（第二个选项卡）。

如果没有抛出奇怪的错误，这一切都不起作用，那么它就是一个谜！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T14:11:09.847

可能是您对 GoDaddy 环境没有完全信任？

查看这篇文章[http://our.umbraco.org/forum/getting-started/installing-umbraco/17856-Umbraco-on-GoDaddy-Shared-Hosting](http://our.umbraco.org/forum/getting-started/installing-umbraco/17856-Umbraco-on-GoDaddy-Shared-Hosting)

可以帮助解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T18:57:08.673

以下是 Umbraco 所需的权限列表[http://our.umbraco.org/wiki/reference/files-and-folders/permissions](http://our.umbraco.org/wiki/reference/files-and-folders/permissions)

或者，您可以使用以下步骤之一检查所有文件夹权限。

1.  [http://our.umbraco.org/wiki/reference/files-and-folders/permissions/perform-permissions-check](http://our.umbraco.org/wiki/reference/files-and-folders/permissions/perform-permissions-check)
2.  或者安装这个包。[http://our.umbraco.org/projects/backoffice-extensions/ugolive](http://our.umbraco.org/projects/backoffice-extensions/ugolive)这将允许您检查权限设置是否正确。

# android - 对 Activity 执行的操作如何反映主页小部件按钮（文本/图像）的变化

> ID：15850591
> 
> 赞同：0
> 
> 时间：2013-04-06T11:52:22.587
> 
> 标签：android

我有一个应用程序在家里有一个小部件按钮，现在我想要如果我从我的应用程序的活动中按下按钮，那么小部件按钮文本应该被更改。Activity 和 Widget 都来自同一个应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:29:19.610

从您的应用发送一个并在您的应用小部件`Intent`中对其进行评估：`OnReceive`

应用程序：

```
Intent i = new Intent(ACTION_MYWIDGET_CHANGE);
sendBroadcast(i); 
```

小部件：

```
String action = intent.getAction();
if (action.equals(ACTION_MYWIDGET_CHANGE))
{...} 
```

# jms - JMSExpiration 与 TimeToLive

> ID：15850593
> 
> 赞同：6
> 
> 时间：2013-04-06T11:52:48.760
> 
> 标签：jms, activemq, apache-camel

我正在尝试在 Blueprint XML Camel 路由中设置消息过期。我想设置为过期的值保存在消息正文（一个[protobuf](https://code.google.com/p/protobuf/)）中。

这是我的代码：-

```
<setHeader headerName="AMQ_SCHEDULED_DELAY">
    <method bean="NotificationScheduler" method="postponeSending" />
</setHeader>
<setHeader headerName="JMSExpiration">
    <method bean="NotificationScheduler" method="getExpiry" />
</setHeader>
<setHeader headerName="ExpirationTest">
    <method bean="NotificationScheduler" method="getExpiry" />
</setHeader>
<to uri="activemq:notifications.splitter" /> 
```

正如您从下面的屏幕截图中看到的那样，我成功设置了三个标题中的两个，但是“JMSExpiration”的设置（根据[这个线程](https://stackoverflow.com/questions/15507948/set-ttl-apache-camel-java-dsl)）没有任何效果。

![ActiveMQWeb 片段](https://dl.dropbox.com/u/54020186/ActiveMQHeaders.jpg)

我知道我也可以使用收件人列表模式来动态设置 uri - 即从消息数据中提取到期时间并附加`?timeToLive=...`选项。但是，这对我来说似乎有点笨拙。

有没有办法通过 XML 中的 setHeader 设置过期？

谢谢，

J。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T23:04:54.447

将您的uri更改为：`activemq:notifications.splitter?preserveMessageQos=true`您应该没问题。

某些 JMS 标头可以像您尝试使用此选项一样“手动”覆盖。

请注意，您可能需要采取一些预防措施，因为如果您正在侦听一个 JMS 端点，则到达的消息将填充 JMS 标头，并且当您在“to”中发送消息时，消息将保留`JMSDeliveryMode`,`JMSExpiration`和`JMSPriority`. 这可能是也可能不是您想要的。

# java - 如何解决 org.hibernate.LazyInitializationException？

> ID：15850594
> 
> 赞同：0
> 
> 时间：2013-04-06T11:52:54.910
> 
> 标签：java, hibernate

**org.hibernate.LazyInitializationException**：未能延迟初始化角色集合：com.t4bt.gov.persistence.entities.Experts.institutaionList，没有会话或会话已关闭

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T12:23:50.470

您在问题（代码？）中提供的细节很少，因此它必须是关于延迟加载的通用答案。以后，如果您需要答案，请提供有关实际问题的具体信息，以及您尝试解决的问题的描述。

当您在会话关闭后（通常是在事务结束后）尝试访问延迟加载的属性时，会发生 LazyInitialization。延迟初始化的工作方式是当您获取对象时它不会获取延迟初始化的属性，但是当您实际尝试访问它时，Hibernate 会再次查询数据库以获取它。

以下会产生这样的错误：

```
public class Something {
    [...]
    @OneToMany(fetch = FetchType.LAZY)
    private List<SomethingElse> somethingElse;

    public List<SomethingElse> getSomethingElse() {
        return somethingElse;
    }
}

public class SomethingDao {
    @Inject
    private EntityManager em;

    @Transactional
    public Something getById(final Integer id) {
        return em.find(Something.class, id);
    }
}

public class SomethingService {
    @Inject
    private SomethingDao dao;

    public List<SomethingElse> getSomethingElseForSomething(final Integer somethingId) { 
        final Something something = dao.getById(somethingId);
        return something.getSomethingElse() //Throws LazyInitializationException
    }
} 
```

这里事务（以及会话）只存在于 dao 类中。一旦离开 dao-method，会话就消失了。因此，当您尝试访问服务中的延迟加载属性时，当 Hibernates 尝试联系会话以检索它时，它将失败。

为了避免这种情况，有几种可能性。

1.  将Something-class的注解改为`@OneToMany(fetch = FetchType.EAGER)` 属性不再延迟加载，所以不再有问题。
2.  添加`@Transactional`到服务方法。然后调用`getSomethingElse()`将与获取Something对象在同一个事务中，并且在这样做时会话仍然是活动的。
3.  `getSomethingElse()`在 Dao 方法中添加调用。然后它将在离开 Dao 类（和事务）之前初始化属性（从数据库中获取），并且它将在事务之外可用，无需与会话通信即可检索它。

# scala - Scala类型约束混淆错误

> ID：15850600
> 
> 赞同：0
> 
> 时间：2013-04-06T11:53:10.420
> 
> 标签：scala, traits, design-by-contract, type-constraints

这段代码：

```
trait Base[+K <: Option[Int]] {
  val a: K = None
}

class GuaranteedA extends Base[Some[Int]] {
  override val a = Some(1)
} 
```

产生错误：

```
<console>:8: error: type mismatch;
 found   : None.type
 required: K
             val a: K = None 
```

但为什么？`K`say中的类型约束`K`必须是它的子类型`Option[Int]`，`None`即使我尝试`val a: K = Some(0)`in `Base`，也会产生相同的错误。

我对这种行为感到非常困惑，不知道为什么会发生这种情况，也许你可以帮助我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T11:59:47.003

`trait Base[K <: Option[Int]]`只是说：有一种类型`K`是`Option[Int]`. 您的第二部分`GaranteedA`确切说明了为什么您的`Base`定义不能假装它`None`是`K`-imagine 的子类型，您*没有*覆盖`val a`。您最终会将值`None`强制转换为`Some`.

仅仅因为`K`是 的子类型`Option[Int]`并且`None`是 的子类型`Option[Int]`，并不能保证那`None`是 的子类型`K`。

# php - php 查询无法从 get?id 加载查询

> ID：15850605
> 
> 赞同：0
> 
> 时间：2013-04-06T11:53:23.513
> 
> 标签：php, mysql

我正在尝试获取所有通过产品 ID 提交和传递的投标金额，我似乎无法让它工作，谁能告诉我我做错了什么？

我已将视图类放置在它的输出上，并将查询放置在 DB 类上

我要做的是通过传递用户点击产品的链接从投标表中获取所有投标并输出到屏幕

* * *

```
<?php

class ProductView extends View {
    protected function displayContent() {
        if(isset($_GET['id'])) {
        //get the record from database
            $this -> product = $this -> model -> getProductByID($_GET['id']);
            $this -> bidprice = $this -> model ->allbids($_GET['id']);
                if(is_array($this -> product)) {
                    $html = $this -> displayProduct();
                    } else {

                       $html .= '<p>Sorry, that product is not available</p>';

                    }            
                        } else {
                         header("Location:index.php?page=error");

        }
            return $html;
    }

    private function displayProduct() {

            $html = '<div id="product">';
            $html .= '<img src="images/products/'.$this -> product['productImage'].'" alt="'.$this -> product['productName'].'" />';
            $html .= '<h3>'.$this -> product['productName'].'</h3>';
            $html .= '<p><strong>$'.$this -> product['productPrice'].'.00'.'</strong></p>';
            //.sprintf("%.2f" result was breaking the query placed .00\. to give it currency rate.
            $html .= '<p>'.$this -> product['productDescription'].'</p>';
            $html .= '<p>'.$this -> bidprice['bidPrice'].'</p>';

            $html .= '</div>';
            $html .='<div id="space">';
            $html .='</div>';

        return $html;        
    }    
}

?> 
```

* * *

数据库查询类

```
public function allbids($id){
        $qry = "SELECT userName , bidPrice as bidPrice FROM bids , users WHERE productID = $id";
        $rs = $this -> db -> query($qry);
        if($rs) {
            if($rs ->num_rows > 0) {
                $bid = $rs -> fetch_assoc();

            }
            return $bidPrice;

        } else {
            echo 'Error Executing Query';   
        }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:02:27.363

我认为您只是从投标表中获取了一条记录，而且 allbids 函数似乎不正确，请尝试使用下面的代码，让我知道它是否适合您。

```
<?php

class ProductView extends View {
protected function displayContent() {
    if(isset($_GET['id'])) {
    //get the record from database
        $this -> product = $this -> model -> getProductByID($_GET['id']);
        $this -> bidprice = $this -> model ->allbids($_GET['id']);
            if(is_array($this -> product)) {
                $html = $this -> displayProduct();
                } else {

                   $html .= '<p>Sorry, that product is not available</p>';

                }            
                    } else {
                     header("Location:index.php?page=error");

    }
        return $html;
}

private function displayProduct() {

        $html = '<div id="product">';
        $html .= '<img src="images/products/'.$this -> product['productImage'].'" alt="'.$this -> product['productName'].'" />';
        $html .= '<h3>'.$this -> product['productName'].'</h3>';
        $html .= '<p><strong>$'.$this -> product['productPrice'].'.00'.'</strong></p>';
        //.sprintf("%.2f" result was breaking the query placed .00\. to give it currency rate.
        $html .= '<p>'.$this -> product['productDescription'].'</p>';
        /* here you have to place a for each loop that will fetch all the info for bid*/
        foreach($this -> bidprice as $val)
        {
            $html .= '<p> Bid Price'.$val['bidPrice'].'</p>';
            $html .= '<p> Bidded By'.$val['userName'].'</p>';
        }

        $html .= '</div>';
        $html .='<div id="space">';
        $html .='</div>';

    return $html;        
} 
```

}

```
// your db function
public function allbids($id){
    $qry = "SELECT userName , bidPrice as bidPrice FROM bids , users WHERE productID = $id";
    $rs = $this -> db -> query($qry);
    if($rs) {
        if($rs ->num_rows > 0) {
            while($row = mysql_fetch_assoc($rs))
            {
                $bid[]= $row;
            }

        }
        return $bid[];

    } else {
        echo 'Error Executing Query';   
    }
    return false;
}
?> 
```

# database-connection - 在本地服务器上使用 Sublime Text

> ID：15850610
> 
> 赞同：0
> 
> 时间：2013-04-06T11:53:52.570
> 
> 标签：database-connection, localhost, sublimetext, remote-server

Sublime Text 是适用于 Web 开发人员和其他程序员的优秀原生文本编辑器。使用 ftp 功能对用户不友好，所以我的问题是第二个：

> **使用 sublime 文本编辑器在本地工作的最佳实践是什么？**

主要问题是：

*   在本地主机上进行一些更改（数据库在本地主机上，而不是在远程服务器上）后，我想立即在远程服务器上看到结果。

请给我一些实用的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-21T20:38:33.033

对于**Windows**，一个允许与远程自动同步（包括删除）并允许添加排除规则的好工具是[**WinScp**](http://winscp.net/eng/index.php)

对于**Mac**，同样可以使用[**Yummy FTP Watcher完成**](http://www.yummysoftware.com/Product-Information-Watcher/)

NetBeans IDE 可在 mac 和 windows 上使用，并且 8.0.2 版本具有完美的上传保存功能，还更新了文件添加和删除的删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:07:45.393

Take a look at the [Sublime SFTP](http://wbond.net/sublime_packages/sftp) package by wbond, the creator of [Package Control](http://wbond.net/sublime_packages/package_control). It works for FTP, SFTP, and FTPS connections, allows syncing of files/folders (in both directions), and is pretty much invaluable for this kind of work. It costs US$16, but is definitely worth it.

Alternatively, if you're on a Mac, check out [Transmit](http://panic.com/transmit/). It allows you to map SSH/FTP shares as a local volume, so you can use any program, not just Sublime. It's US$34, but very much worth it.

For other operating systems, google "[FUSE](https://www.google.com/?q=fuse+your+favorite+OS)" (file system in user space). Many Linux distros have packages available for various solutions, and there are versions for Windows as well. They essentially do the same thing as Transmit in allowing you to map a network resource to a local drive/volume.

# activiti - 部署包含具有相同键（进程 id 属性）的进程定义，这是不允许的

> ID：15850611
> 
> 赞同：2
> 
> 时间：2013-04-06T11:54:11.883
> 
> 标签：activiti

我在单个项目中实现了三个 .bpmn 文件，并且在运行时出现了这个异常`org.activiti.engine.ActivitiException:The deployment contains process definitions with the same key (process id atrribute), this is not allowed`，你能解释一下我在哪里出错了吗？有没有可能在单个项目中运行多个 .bpmn 文件，它是如何运行的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:36:57.087

错误描述提供了足够的信息来定位此问题。Activti 数据库表`act_re_procdef`已经包含具有相同 id 的记录，因为您之前部署了相同的 .bpmn 文件。你可以：

1.  `org.activiti.db.drop`使用 Activiti jar (package )中的脚本删除并创建此表
2.  更改`<process id="vacationProcess" name="vacation process" isExecutable="true">` `id`流程定义中的属性
3.  更改流程定义本身以使 Activiti 引擎使用新版本重新部署流程定义（请参阅`act_re_procdef`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-22T15:55:19.080

我遇到了类似的问题。我正在使用 activiti 和 spring。

我添加了以下配置以重新部署该过程：

```
 <bean id="processEngineConfiguration" class="org.activiti.spring.SpringProcessEngineConfiguration">
<property name="deploymentMode" value="single-resource" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-21T12:08:33.420

我遇到了同样的问题，我只是从服务器上的进程文件夹中删除了所有 processes.bpmn20.xml 和 forms.jsons 并重新部署了我的进程。注意：您还可以将当前进程文件夹重命名为任何其他名称并创建一个新的进程文件夹。

# php - 服务器 500 错误 - 在子文件夹中移动应用程序

> ID：15850612
> 
> 赞同：2
> 
> 时间：2013-04-06T11:54:12.007
> 
> 标签：php, apache, .htaccess, codeigniter, mod-rewrite

我在我网站的子文件夹中开发了一个应用程序，它运行良好。

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(index\.php|images|swf|uploads|js|css|robots\.txt)
RewriteRule ^(.*)$ /app/index.php/$1 [L]
</IfModule> 
```

该文件运行良好，因此不需要在应用程序中导航 index.php。现在我将应用程序移动到网站的根目录并将最后一行更改为

```
RewriteRule ^(.*)$ index.php/$1 [L] 
```

现在我开始收到内部服务器错误 500。我不确定这是我所做的，还是需要以不同方式配置 .htacces。这也可能是主机的问题，但我想先用尽我的选择。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:40:15.010

如果您在托管根目录中，您只需要

```
 <IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond $1 !^(index\.php|images|swf|uploads|js|css|robots\.txt)
    RewriteRule ^(.*)$ /index.php/$1 [L]
    </IfModule> 
```

如果您将站点放置在`/foo`您需要的文件夹中：

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteBase /foo
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond $1 !^(index\.php|images|swf|uploads|js|css|robots\.txt)
    RewriteRule ^(.*)$ /foo/index.php/$1 [L]
    </IfModule> 
```

如果仍然无法正常工作，请尝试此操作，对我而言，一切正常：

```
RewriteEngine On
RewriteBase /foo
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /foo/index.php/$1 [L] 
```

# database - WAMP：如何“通过运行命令安装数据库模式 ...”

> ID：15850623
> 
> 赞同：0
> 
> 时间：2013-04-06T11:55:16.980
> 
> 标签：database, schema, wamp

在高等教育机构，我正在尝试安装一个名为“Guide on the Side”的应用程序（[https://github.com/ualibraries/Guide-on-the-Side](https://github.com/ualibraries/Guide-on-the-Side)）。它位于不同风格的 LAMP 堆栈上，但是——当然——我们是一个基于 Windows 的机构。我的问题是“这是什么意思！？” 种类。

我创建了我的数据库，配置“已配置”，但随后有以下过程：

> 通过从 guide_on_the_side/app 文件夹运行以下命令来安装数据库模式： ../lib/Cake/Console/cake Migrations.migration --plugin Tags all ../lib/Cake/Console/cake Migrations.migration all

有人可以翻译吗？我真的可以在 Windows cmd 中“运行”它吗？我对 *Nix OS 中的终端有些熟悉，但我从来没有接触过 Windows 上的命令行，所以我只是不熟悉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T00:45:36.550

`cake`是 CakePHP 应用程序框架的控制台命令（shell 脚本）。

[http://book.cakephp.org/2.0/en/console-and-shells.html](http://book.cakephp.org/2.0/en/console-and-shells.html)

您应该能够`cake`从 Windows shell 运行命令（它将引用`cake.bat`批处理文件）。

您可能需要对[在 IIS 上运行 CakePHP 应用程序](http://bakery.cakephp.org/articles/view/cakephp-on-iis)进行其他调整。

# sql - 为序列号插入新列

> ID：15850626
> 
> 赞同：2
> 
> 时间：2013-04-06T11:55:36.700
> 
> 标签：sql, sql-server, database, insert-update, row-number

我有一个包含 500 条记录的表，并且想要插入新列作为从 1 开始的“序列号”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T12:27:31.653

如果您关心分配标识值的顺序，最好这样做：

```
CREATE TABLE dbo.NewTable
(
  SerialNumber INT IDENTITY(1,1),
  ... other columns from original table ...
);

INSERT dbo.NewTable(...other columns...)
  SELECT ...other columns...
  FROM dbo.OriginalTable
  ORDER BY ...ordering criteria...
  OPTION (MAXDOP 1); -- to prevent parallelism from messing with identity

DROP TABLE dbo.OriginalTable;

EXEC sp_rename N'dbo.NewTable', N'OriginalTable', N'OBJECT'; 
```

您可能必须处理约束等，并且您将希望在事务中执行此操作。关键是只需向表中添加一个标识列，并以任意顺序分配标识值。如果您不关心如何为现有值分配序列号，那么只需使用凯尔的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T11:59:24.267

这可以通过以下方式实现：

```
alter table YourTable
add SrNo int identity(1,1) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-27T16:35:35.070

在 PostgreSQL 中只是做： `ALTER TABLE ttaabbllee ADD COLUMN columnName serial NOT NULL;`完成！..

# sql - 使用一个变量来表示多个值

> ID：15850628
> 
> 赞同：0
> 
> 时间：2013-04-06T11:55:52.880
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有以下查询部分：

```
Where id in (1,2,3) And country in('France','Italy','Spain') 
```

我想声明2个变量并这样做：

```
Where id in (idsVaraible) And country in(countriesVriable) 
```

这更像是在 sql 代码中替换 sql 代码以使我的长查询更具可读性和更有用，有没有办法做到这一点？

我认为它更像是 java 脚本中的 eval 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:12:21.040

请尝试使用临时表变量：

```
DECLARE @tblID as TABLE(ID INT)
DECLARE @tblCountry as TABLE(Country NVARCHAR(50))

INSERT INTO @tblID VALUES (1),(2),(3)
INSERT INTO @tblCountry VALUES ('France'),('Italy'),('Spain')

WHERE id in (select ID from @tblID) And country in(select Country from @tblCountry) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:20:03.183

好吧，如果您需要将这些集合作为字符串传递，一种方法是动态 SQL：

```
DECLARE @ids VARCHAR(32) = '1,2,3';
DECLARE @countries VARCHAR(2000) = 'France,Italy,Spain';

DECLARE @sql NVARCHAR(MAX) = N'SELECT ... FROM ...
  WHERE id IN (' + @ids + ') AND country IN ('''
  + REPLACE(@countries, ',',''',''') + ''');';

PRINT @sql;
-- EXEC sp_executesql @sql; 
```

另一种方法是表值参数。首先在您的数据库中创建这些类型：

```
CREATE TYPE dbo.TVPids AS TABLE(ID INT);
CREATE TYPE dbo.TVPcountries AS TABLE(Country VARCHAR(255)); 
```

现在您的存储过程可以将这些类型作为输入：

```
CREATE PROCEDURE dbo.whatever
  @i dbo.TVPids READONLY,
  @c dbo.TVPcountries READONLY
AS
BEGIN
  SET NOCOUNT ON;

  SELECT ... FROM dbo.yourtable AS t
    INNER JOIN @i AS i ON i.ID = t.ID
    INNER JOIN @c AS c ON c.country = t.country;
END
GO 
```

现在，您的应用程序可以将这两个参数作为集合（例如从 a `DataTable`）传递，而不是构建逗号分隔的字符串或处理多个参数。

# java - Java Button在被重新调整或拖动或其他东西后单击时添加标签

> ID：15850631
> 
> 赞同：0
> 
> 时间：2013-04-06T11:56:36.260
> 
> 标签：java, applet, awt

我在这里有一个简单的代码，它在被点击后添加了一个标签。它工作正常，但为了添加标签，我必须在单击按钮后拖动或重新调整窗口。

这是我的代码：

```
import java.applet.*;
import java.awt.*;
import java.awt.event.*;

public class server01 extends Applet implements ActionListener {
    Label helloLabel = new Label("applet v 0.0.1 | created for testing purpose");
    Label hello2Label = new Label("this applet will be up-to-date.");
    Button buttonButton = new Button("START" + " Button");
    Label buttonLabel = new Label("Starting server...");

    private static final long serialVersionUID = 1L;

    public void init() {
        setBackground(Color.black);
        setForeground(Color.white);
        buttonButton.setForeground(Color.black);
        add(helloLabel);
        add(hello2Label);
        add(buttonButton);
        buttonButton.addActionListener(this);
    }

    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == buttonButton) {
            add(buttonLabel);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-28T07:20:51.750

在 actionPerformed() 中使用 repaint() 方法 - （在方法结束时）方法。它将重新绘制小程序窗口，并将再次运行添加您的标签。

```
public void actionPerformed(ActionEvent ae)
{
    /*
       your code here..
    */
    repaint();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:52:43.380

您需要在进行 gui 更改后调用 validate 方法，以便小程序可以检查它是否仍然正确呈现。调整大小基本上会做同样的事情。

```
public void actionPerformed(ActionEvent e) {
        if (e.getSource() == buttonButton) {
            add(buttonLabel);
            validate();
        }
} 
```

# ios - 呈现 viewController 时的控制台警告

> ID：15850632
> 
> 赞同：2
> 
> 时间：2013-04-06T11:56:36.533
> 
> 标签：ios, objective-c, console

我正在开发一个应用程序，该应用程序在向左旋转时显示 viewController，然后在向右旋转时显示另一个视图控制器。我的 segue 的风格是模态的，我正在使用交叉溶解过渡。问题是当我向左旋转然后快速向右旋转时，控制台会向我发送此警告：

```
Warning: Attempt to present <SSGraphRightViewController: 0x81159b0> on <UINavigationController: 0x82439a0> while a presentation is in progress! 
```

有没有办法避免这个警告？也许加快过渡时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:31:41.363

您不能从已经呈现的视图控制器中呈现视图控制器，控制台对此是正确的，因此要么使用不同风格的 segue，要么正确处理它。

希望这会有所帮助： [Storyboards 中的 Modal 和 Push segue 有什么区别？](https://stackoverflow.com/questions/9392744/difference-between-modal-and-push-segue-in-storyboards)

当我在呈现另一个 UIViewController 时尝试呈现 UIViewController 时遇到了同样的问题，所以我所要做的就是关闭现有的 UIViewController，然后呈现新的 UIViewController。在您的情况下，这是因为在呈现 UIViewController 期间发生的快速转换，所以首先关闭现有的，然后呈现一个新的。它应该是这样的

```
- (void)dismissViewControllerAnimated:(BOOL)flag completion:(void (^)(void))completion 
```

在 (void) 完成块中放置您的代码以呈现新的 VC，如下所示：

```
[yourVC dismissViewControllerAnimated:YES completion:^{ 
//present your new VC here.
}]; 
```

希望能帮助到你！！。

# c# - C# 线程问题和最佳实践

> ID：15850633
> 
> 赞同：4
> 
> 时间：2013-04-06T11:56:36.790
> 
> 标签：c#, multithreading

这是我第一次在 C# 应用程序中使用线程。基本上它是一个应用程序，它检查列表中的一堆网站是死是活。

这是我第一次尝试使用多线程

```
 public void StartThread(string URL,int no)
    {
        Thread newThread = new Thread(() =>
        {
            BeginInvoke(new Action(() => richTextBox1.Text += "Thread " + no + " Running" + Environment.NewLine));
            bool b = ping(URL);
            if (b == true) { BeginInvoke(new Action(() => richTextBox2.Text += "Okay" + Environment.NewLine)); }
            else
            { return; }
        });

        newThread.Start();
    } 
```

我正在使用上述函数来创建新线程，并且每个线程都是在循环中创建的。

> foreach (网站中的字符串网站) { StartThread(site,i); 我++；// 柜台 }

因为我是初学者，所以我有几个问题。

1.  代码工作正常，但我不确定这是否是最好的解决方案
2.  有时线程运行完美，但有时线程不从方法**ping()**返回任何值，该方法检查主机并在使用 WebRequest 在线时返回 true。平常吗？
3.  如果我要求用户指定他需要使用的线程数，我如何在这些线程之间平均分配工作？
4.  他们是我跟踪线程状态（死/活）的一种优雅方式吗？我目前使用`rocess.GetCurrentProcess().Threads.Count;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:08:27.997

为每个请求启动一个新线程效率低下......您可能希望拥有固定数量的工作线程（因此可以在 cpu 的每个核心上运行）

看看这个`ConcurrentQueue<T>`类，它将为您提供一个线程安全的先进先出队列，您可以在其中将您的请求排入队列，并让每个工作线程将请求出列，处理它等等，直到队列为空.. .

请注意，除了主 GUI 线程之外，您可能不会从其他线程调用 GUI 上的控件...查看`ISynchronizeInvoke`接口，它可以帮助您确定是否需要通过调用另一个线程来处理跨线程情况

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:14:32.000

您应该考虑[.Net ThreadPool](http://msdn.microsoft.com/en-gb/library/system.threading.threadpool.aspx)。但是，它通常不适合执行时间超过 1 秒的线程。

另请参阅： [并行编程模式：使用 .NET Framework 4 理解和应用并行模式](http://www.microsoft.com/en-us/download/details.aspx?id=19222)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T12:26:14.870

1）你的解决方案没问题。Thread 类已被[Task](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)类部分取代，如果您正在编写新代码，则可以使用它。.NET 4.5 中还有一些全新的东西，称为[await](http://msdn.microsoft.com/en-us/library/vstudio/hh300224.aspx)。但是，请参见 4)。

2）如果网站死了，您的 ping 方法可能会崩溃。您可以向我们展示该方法的代码。

4）Thread 类很好，因为您可以根据您的要求使用[ThreadState](http://msdn.microsoft.com/en-us/library/system.threading.thread.threadstate.aspx)属性轻松检查线程状态 - 只需创建一个`List<Thread>`，将您的线程放入其中，然后一个一个地启动它们。

3）如果您想从输入加载线程数并平均分配工作，请将任务放入队列中（您可以使用已经建议的 ConcurrentQueue ）并让线程从队列中加载 URL。示例代码：

你初始化一切

```
void initialize(){
ConcurrentQueue<string> queue = new ConcurrentQueue<string>();
foreach(string url in websites)
{
    queue.Enqueue(url);
}
//and the threads
List<Thread> threads = new List<Thread>();
for (int i = 0; i < threadCountFromTheUser; i++)
{
    threads.Add(new Thread(work));
}}

//work method
void work()
{
    while (!queue.IsEmpty)
    {
        string url;
        bool fetchedUrl = queue.TryDequeue(out url);
        if (fetchedUrl)
            ping(url);
    }
} 
```

然后运行

```
foreach (Thread t in threads)
{
    t.Start();
} 
```

**代码未测试**

# php - 控制codeigniter分页url

> ID：15850634
> 
> 赞同：1
> 
> 时间：2013-04-06T11:56:37.693
> 
> 标签：php, html, codeigniter, pagination

首先，我需要向您解释我在做什么：

**注意**：这个项目正在使用`codeigniter`框架

我有一个`view`标题和标签：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Backend-Vihara Dharma Bhakti</title>
<link href="../../../style/style_backend.css" rel="stylesheet" type="text/css">
<link href="<?php echo base_url(); ?>style/style_backend.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="<?php echo base_url(); ?>jquery/jquery-ui-1.10.2.custom/css/ui-lightness/jquery-ui-1.10.2.custom.min.css" />
<script language="javascript" type="text/javascript" src="<?php echo base_url(); ?>jquery/jquery-ui-1.10.2.custom/js/jquery-1.9.1.js"></script>
<script language="javascript" type="text/javascript" src="<?php echo base_url(); ?>jquery/jquery-ui-1.10.2.custom/js/jquery-ui-1.10.2.custom.min.js"></script>

<script>
  $(function() {
    $( "#datepicker" ).datepicker();
  });

  $(function() {
    $( "#tabs" ).tabs();
  });
</script>

<div id="header"><h1>HEADER</h1></div>
    <div id="tabs">
        <ul>
            <li><a href="backend/umat">Daftar Umat</a></li>
            <li><a href="backend/pengurus">Daftar Pengurus</a></li>
            <li><a href="backend/absensi">Absensi</a></li>
        </ul>
    </div>
</head> 
```

请注意，我使用选项卡在标题和选项卡**下方**加载**不同**的内容（`controller`） 。

 **对于`controller`标题和选项卡：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Backend_home extends CI_Controller {
    public function index()
    {
        $this->load->view('template/header_v');
    }
} 
```

然后，我有另一个`view`来显示内容（我将使用第一个链接（`backend/umat`）作为示例）

```
<body>
    <link rel="stylesheet" href="<?php echo base_url(); ?>jquery/jquery-ui-1.10.2.custom/css/ui-lightness/jquery-ui-1.10.2.custom.min.css" />
    <script language="javascript" type="text/javascript" src="<?php echo base_url(); ?>jquery/jquery-ui-1.10.2.custom/js/jquery-1.9.1.js"></script>
    <script language="javascript" type="text/javascript" src="<?php echo base_url(); ?>jquery/jquery-ui-1.10.2.custom/js/jquery-ui-1.10.2.custom.min.js"></script>

    <script>
      $(function() {
        $( "#datepicker" ).datepicker();
      });
     </script>

    <div id="form_search">
        <?php echo form_open('backend/index') ?>
            <!--<p>
                <?php echo form_dropdown('ddl_search', $data_search, 'id="ddl_search"');?>
            </p>-->
            <p>
                Kelas :
                <?php echo form_dropdown('ddl_kelas1', $list_kelas, 'id="ddl_kelas1"');?> -
                <?php echo form_dropdown('ddl_kelas2', $list_kelas, 'id="ddl_kelas2"');?>
            </p>
            <p>
                Nama : <?php echo form_input('txt_nama');?>
                Alamat : <?php echo form_input('txt_alamat');?>
                Tanggal Lahir : <input type="text" id="datepicker" />
            </p>
                <?php echo form_submit('btn_search', 'Search');?>
        <?php echo form_close(); ?>
    </div>
    <div>
        <?php echo $table ?>
        <?php echo $pagination ?>
    </div>
</body>
</html> 
```

它的`controller`：

```
public function umat() {
        //check authorization
        if(!isset($_SESSION['username']))
            redirect('backend');

        //pagination
        $config['base_url'] = site_url('/backend/umat/');
        $config['total_rows'] = $this->backend_m->count_umat();
        $config['per_page'] = 10; 
        $config['uri_segment'] = 3;
        $config['full_tag_open'] = '<div id="pagination">';
        $config['full_tag_close'] = '</div>';

        $this->pagination->initialize($config); 

        $data['pagination'] = $this->pagination->create_links();

        //table     
        $data_umat = $this->backend_m->get_umat();

        $this->table->set_heading(
            'No',
            'Nama',
            'Kelas',
            'Alamat',
            'Sekolah',
            'Nomor Telepon',
            'Keterangan'        
        );

        $no = 1;
        foreach($data_umat as $list_temp) 
        {
            $this->table->add_row(
                $no++,
                $list_temp->nama,
                $list_temp->kelas,
                $list_temp->alamat,
                $list_temp->sekolah,
                $list_temp->no_tlpn,
                $list_temp->keterangan
            );
        }

        //masukkan data dari DB ke DDL
        $data_kelas = $this->backend_m->get_kelas();

        $data['list_kelas'][0] = 'Pilih Kelas';

        foreach($data_kelas as $row)
        {
            $data['list_kelas'][$row->kelas_id] = $row->kelas;
        }

        /*$data_search = array('kelas' => 'Kelas', 
                             'nama' => 'Nama',
                             'alamat' => 'Alamat',
                             'bulan' => 'Bulan Lahir');*/

        $data['table'] = $this->table->generate();

        $this->load->view('backend/umat_v', $data);
    } 
```

请注意，我在此控制器中使用分页。

**主要问题**

因为我`view`在我的页面中使用了 2 个不同的（html），所以`url`将跟随标题（标签）之一。它`url`是`http://localhost/ci_gabdb/index.php/backend_home`

一切正常，直到我单击分页索引的第二页。`url`将更**改为**，它使我的`http://localhost/ci_gabdb/index.php/backend/umat/10`页面**丢失了**它的 CSS 和标题（标签）。

*屏幕截图*

**在**我点击任何分页之前（分页索引在下面，我不包括它，所以你可以看到标题和标签）：（`http://localhost/ci_gabdb/index.php/backend_home`）

![在此处输入图像描述](https://i.stack.imgur.com/DCJ8x.png)

**在**我点击我的分页索引的第二页之后：（`http://localhost/ci_gabdb/index.php/backend/umat/10`）

![在此处输入图像描述](https://i.stack.imgur.com/2DVeW.png)

很抱歉，很长的帖子：D 如果您对此问题有任何解决方案，请帮助我，我不介意大量更改我的**代码**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:50:27.167

您需要重新考虑如何制作模板。我也使用模板，您需要做的就是将视图传递给模板。

基本示例。

模板页面：

```
$this->load->view('header');
$this->load->view('content',$main_content);
$this->load->view('footer'); 
```

然后在每个页面的控制器中执行以下操作：

```
$data['main_content'] = 'umat';
$this->load->view('template',$data); 
```

所以基本上你要做的是你加载的每个页面都将加载模板文件，特定页面将通过 $data 传递到该模板中的正确位置。

这样您就不必尝试从每个控制器函数传递多个视图，也不必担心现在分页需要单个 url 的问题。

如果我理解您的问题正确地重新处理您的页面以像这样加载应该可以解决您的问题。**

# scripting - 自动更新 Visio 图表中的文本

> ID：15850635
> 
> 赞同：2
> 
> 时间：2013-04-06T11:56:39.573
> 
> 标签：scripting, visio

我已经构建了几个 Visio 图表并将它们作为 .htm 发布在我的 Web 服务器上。现在我想制作一个脚本，每小时从带有数据的文件（.csv 或 .txt）中自动更新形状中标签的值一次。有没有办法自动提取这些值并将它们放在 visio 图表的 .htm 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:24:24.350

Visio 形状可以链接到外部数据源。只需将形状上的固定文本替换为引用形状数据的字段即可。看看[http://office.microsoft.com/en-ca/visio-help/demo-show-it-like-it-is-connect-data-to-your-visio-diagram-HA010051819.aspx](http://office.microsoft.com/en-ca/visio-help/demo-show-it-like-it-is-connect-data-to-your-visio-diagram-HA010051819.aspx)

# php - Symfony2：isGranted 用于其他实体

> ID：15850636
> 
> 赞同：2
> 
> 时间：2013-04-06T11:56:43.133
> 
> 标签：php, symfony, security, fosuserbundle

我的应用程序具有以下角色层次结构：

> *   ROLE_SUPER_ADMIN
>     *   ROLE_ADMIN
>         *   ROLE_USER

我有我的控制器使这项工作：

```
/**
 * @Route("/admin/delete/{id}", name="_admin_delete")
 * @Secure(roles="ROLE_ADMIN")
 */
public function deleteuserAction($id)
{
    $user = $this->container->get('fos_user.user_manager')->findUserBy(array('id' => $id));
    if (null === $user) {
        throw $this->createNotFoundException('User id not found');
    }

    if ($user->hasRole('ROLE_ADMIN')) {
        // You can not delete this user!
        throw new ...
    }

    // delete user
    $this->container->get('fos_user.user_manager')->deleteUser($user);

    // ...
} 
```

所有具有 ROLE_ADMIN 的人都可以访问 deleteuserAction .. 但我希望他们不能删除具有角色`ROLE_ADMIN`或*HIGHER*的用户。

有正确的方法可以做到这一点吗？

使用此配置，您可以删除`ROLE_SUPER_ADMIN`...是的，您可以将其添加到列表中以阻止它，但复杂的层次结构可能会变得难以管理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:15:48.173

如果您不想使用 ACL，另一种选择是创建一个自定义投票器来处理您的层次结构。这里描述了一个基本的选民：http: [//symfony.com/doc/current/cookbook/security/voters.html](http://symfony.com/doc/current/cookbook/security/voters.html)

# c++ - 使用 STL 的类模板无法编译

> ID：15850638
> 
> 赞同：0
> 
> 时间：2013-04-06T11:57:06.650
> 
> 标签：c++, templates, stl

我是模板新手，正在尝试编译此代码：

```
template <typename _Type, typename _Comparator = std::equal_to<_Type> >
    class CSearch {
public:
    CSearch() : cmp(_Comparator()) {
    }

    CSearch(const _Comparator &_cmp) : cmp(_cmp) {
    }

    void Add(int id,
            const _Type & needle) {
        values.insert(needle); // problem
    }

    set<int> Search(const _Type & hayHeap) const {

    }
private:
    const _Comparator &cmp;

    /*typename(?)*/ set<const _Type&> values; // problem

    CSearch(const CSearch &other);
    CSearch &operator=(const CSearch &other);
};

(...)

int main(){
    CSearch <string> test;
} 
```

我做了一些搜索，我怀疑问题出在`typename`关键字上。但是，无论我如何尝试，我都找不到解决方案。

当有类型名时，我得到`expected nested-name-specifier`错误。如果不是，我会收到一个非常长的 STL 错误。

有什么问题？谢谢

* * *

编辑：这种情况如何，我尝试在 STL 中存储指向对象的指针？

```
template <typename _Type>
class Needle {
public:
    int ID;
    _Type *data;
};

template <typename _Type, typename _Comparator = std::equal_to<_Type> >
        class CSearch {
public:

    CSearch() : cmp(_Comparator()) {
    }

    CSearch(const _Comparator &_cmp) : cmp(_cmp) {

    }

    void Add(int id,
            const _Type & needle) {
        Needle<_Type> *tmp = new Needle<_Type>();
        tmp -> ID = id;
        tmp -> data = &needle;
        values.insert(tmp);
    }

    set<int> Search(const _Type & hayHeap) const {

    }
private:
    const _Comparator &cmp;

    set<const Needle*> values;

    CSearch(const CSearch &other);
    CSearch &operator=(const CSearch &other);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:02:46.693

首先，像 _Foo 或 _Bar 这样的东西不适合你使用，不要从标准库的实现中复制这个习惯。此外，它不会使事情更容易阅读或写作。

现在，您的代码中的问题是您正在尝试创建一组引用，但引用不是容器的有效元素。那里不需要“类型名”，因为那里没有使用依赖类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:02:19.360

```
set<const _Type & > values; 
```

您已将参考作为集合的元素类型提供。容器不能携带它们需要指针的引用。

```
set<const _Type*> values; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T12:07:08.530

```
/*typename(?)*/ set<const _Type & > values; // problem
                               ^^^ 
```

因为您不能在 STL 容器中使用引用作为类型，所以请改用指针：

```
set<const _Type*> values; 
```

# php - PHP文件处理

> ID：15850642
> 
> 赞同：0
> 
> 时间：2013-04-06T11:57:15.797
> 
> 标签：php

我创建了一个文件夹并将其命名为“↓”（使用 Alt+25）。我的操作系统是 Windows XP service pack 3。现在，我想在其中写一个文件名`rpa.txt`

```
<?php
$file='C:\Documents and Settings\Owner\Desktop\↓\rpa.txt';
fopen($file,'w');
?> 
```

问题是：执行此代码后，`rpa.txt`应该在名为“↓”的文件夹中自动创建文件，但这并没有发生。

# iphone - NSString 中子字符串后的子字符串

> ID：15850645
> 
> 赞同：2
> 
> 时间：2013-04-06T11:57:54.643
> 
> 标签：iphone, ios, objective-c, nsstring, substring

我是新的目标，我面临着我的第一个问题，我无法继续我的第一个项目。

这很简单，我有一个 NSString ：

```
NSString *myString = @"<font face='Helvetica' size=25 color='#d79198'> Here is some text !</font>"; 
```

我想要做的是得到大小“25”的值，它总是2个字符长，所以我可以计算我的 UILabel 大小。

我知道如何检测是否有我正在寻找的子字符串 "size=" 使用：

```
if ([string rangeOfString:@"bla"].location == NSNotFound) 
```

但我还没有找到或不明白如何提取字符串 @"size=XX" 然后从 *myString 获取 XX 作为 NSString

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:05:28.910

```
NSString *myString = @"<font face='Helvetica' size=25 color='#d79198'> Here is some text !</font>";
    if ([myString rangeOfString:@"size"].location != NSNotFound)
    {
        myString = [myString substringFromIndex:[myString rangeOfString:@"size"].location]; 
        myString = [myString substringToIndex:[myString rangeOfString:@" "].location]; // Now , myString ---> size=25 color='#d79198'> Here is some text !</font> 
        myString = [myString substringFromIndex:[myString length]-2];// Now, myString ---> size=25
        NSLog(@"myString -- %@",myString); // Now, myString ---> 25
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T12:07:46.257

```
NSString *myString = @"<font face='Helvetica' size=25 color='#d79198'> Here is some text !</font>";
NSRange range = [myString rangeOfString:@"size="];
if (range.location != NSNotFound)
{
    NSLog(@"Found \"size=\" at %d", range.location);
    NSString *sizeString = [myString substringWithRange:NSMakeRange(range.location+5, 2)];
    NSLog(@"sizeString: %@", sizeString);
} 
```

这应该可以解决问题。你也可以在最后这样做：`int sizeFont = [sizeString intValue];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-10T13:11:12.563

如果您有类似 stack:overflow 的字符串，请按以下方式使用它：

```
 NSString *Base=@"stack:overflow"
 NSString *one  = [[Base componentsSeparatedByString:@":"] objectAtIndex:0];
 NSString *two  = [[Base componentsSeparatedByString:@":"] objectAtIndex:1]; 
```

在这种情况下，一 = 堆栈，二 = 溢出

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T12:07:08.033

HTML 页面的一部分？然后[使用专为该任务设计的工具](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T12:07:40.310

您可以自己计算数字的范围或使用非常简单的正则表达式来获取子字符串，例如

```
(?<=size\=)\d* 
```

这意味着您正在搜索以`\d*`“size=”（ ）开头的数字（ `(?<=size\=)`）

哪个使用 NSRegularExpression 将是

```
NSError *error = NULL;
NSRegularExpression *regex = 
  [NSRegularExpression regularExpressionWithPattern:@"(?<=size\\=)\\d*" 
                                            options:0 
                                              error:&error];
NSTextCheckingResult *match = 
  [regex firstMatchInString:myString 
                    options:0 
                      range:NSMakeRange(0, [myString length])];
NSString *sizeText = [myString substringWithRange:match.range]; 
```

最后，您应该使用将文本`"25"`转换为数字

```
NSInteger size = [sizeText integerValue]; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-06T12:10:16.527

使用`componentsSeparatedByString:`方法...

```
NSString *myString = @"<font face='Helvetica' size=25 color='#d79198'> Here is some text !</font>";
    NSString *theSizeString = [[[[myString componentsSeparatedByString:@" "] objectAtIndex:2] componentsSeparatedByString:@"="] objectAtIndex:1];
    NSLog(@"The sizestring:%@",theSizeString); 
```

我想这会对你有所帮助。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-06T12:12:31.827

你可以得到字符串的范围`@"size="`。范围有位置和长度。因此，您接下来需要调用`myString`该`substringWithRange:`方法。该参数将从`NSRage`位置+长度`@"size="`和长度 2 开始。

# html - iphone 5 上的 Webapp 显示错误的高度

> ID：15850646
> 
> 赞同：0
> 
> 时间：2013-04-06T11:58:05.370
> 
> 标签：html, css, web-applications, viewport

我总是得到我的 webapp 的错误测量值。它是 320x460，尽管我希望它是 320x548。

我正在使用以下元标记：

```
<meta name="viewport" content="initial-scale=1, user-scalable=0">
<meta name="apple-mobile-web-app-capable" content="yes"> 
```

所以我不确定我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T12:31:05.930

这可能会帮助你 -

将视口设置为设备宽度的标准视口标记 Android 2.3 设备需要此标记，因此 100% 宽度可以正常工作，并且不允许孩子放大视口宽度

```
<meta name="viewport" id="vp" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width" /> 
```

width=device-width 导致 iPhone 5 对应用进行信箱化处理，因此我们希望为 iPhone 5 排除它以允许全屏应用

```
<meta name="viewport" id="vp" content="initial-scale=1.0,user-scalable=no,maximum-scale=1" media="(device-height: 568px)" /> 
```

# python - 使用 Python 迭代器在有向图中查找给定顶点的事件边

> ID：15850647
> 
> 赞同：2
> 
> 时间：2013-04-06T11:58:06.223
> 
> 标签：python, iterator, directed-graph

我正在编写一个类来查找有向图中给定顶点的入射边。该类使用迭代器遍历图中的邻接列表。但是，我无法以正确的格式返回结果。目前，我使用一个列表`found`来确定给定边是否是所考虑顶点的入射边。这种方法给出了正确的结果，但我想避免让该`next`方法返回一个列表，而是返回`self.ptr.data`（当前已注释掉）。

`class IncidentDirectedEdgeIterator(IncidentEdgeIterator):`

```
"""
The interface of an incident directed edge iterator data structure.
"""

def __init__( self, graph, index ):
    """
    Constructs an incident edge iterator for the specified graph.

    @param graph: The graph including the incident edges.
    @type: L{Graph}
    @param index: The index specifying the vertex of the incident edges.
    @type: C{int}
    """
    super(IncidentDirectedEdgeIterator, self).__init__( graph, index )
    self.ptr = None
    self.graph = graph

def next( self ):
    """
    Returns the next incident edge in the graph. If there are no
    further edges, the StopIteration exception is raised.

    @raises: StopIteration if all incident edges have been enumerated.
    @type: C{StopIteration}
    @return: The next incident edge in the graph.
    @rtype: C{object}
    """
    found = []
    if self.ptr is None:
        i = 0
        while i >= 0 and i < self.graph.getNumberOfVertices():
            ptr = self.container.adjacencyList[i].head
            while ptr is not None:
                if self.index == ptr.data.getV1().getVertexNumber():
                    if ptr not in found:
                        found.append( ptr )
                    self.ptr = ptr
                ptr = ptr.next
            i += 1
    else:
        self.ptr = self.ptr.next
    if self.ptr is None:
        raise StopIteration
    if len( found ) == 0:
        raise StopIteration
    #return self.ptr.data
    return found 
```

使用`found`列表相当难看，我想完全避免它。非常感谢您的建议。

使用生成器函数而不是迭代器类：

```
def generatorTest( self, index ):
    i = 0
    while i >= 0 and i < self.getNumberOfVertices():
        ptr = self.adjacencyList[i].head
        while ptr is not None:
            if index == ptr.data.getV1().getVertexNumber():
                yield ptr
            ptr = ptr.next
        i += 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:55:35.790

你缺少的是“yield”，在 Python 文档中查找生成器。这样，您可以一一返回边缘，而无需创建临时列表。

此外，您的代码不是非常 Pythonic，而是似乎是 C 代码。第一个“气味”是顶点存储在一个数组中并通过它们的索引进行引用。在 Python 中，您宁愿存储对实际顶点的引用。此外，您的“类”不应该是一个类，而是一个普通函数，它会产生与给定顶点相关的边缘，请参阅[http://www.youtube.com/watch?v=o9pEzgHorH0](http://www.youtube.com/watch?v=o9pEzgHorH0)。

# android - ExecutorService 不在 Runnable 中调用 run()

> ID：15850649
> 
> 赞同：0
> 
> 时间：2013-04-06T11:58:22.767
> 
> 标签：android, executorservice, java.util.concurrent, asmack

我在 Android 的 asmack 库中遇到了一个奇怪的问题。该库使用 ExecutorService 来解析传入的数据包，如下所示：

```
private ExecutorService listenerExecutor;

listenerExecutor = Executors.newSingleThreadExecutor(new ThreadFactory() {

        public Thread newThread(Runnable runnable) {
            Thread thread = new Thread(runnable,
                    "Smack Listener Processor (" + connection.connectionCounterValue + ")");
            thread.setDaemon(true);
            return thread;
        }
    });

(...)

listenerExecutor.submit(new ListenerNotification(packet));

(...)

/**
 * A runnable to notify all listeners of a packet.
 */
private class ListenerNotification implements Runnable {

    private Packet packet;

    public ListenerNotification(Packet packet) {
        this.packet = packet;
    }

    public void run() {
        for (ListenerWrapper listenerWrapper : connection.recvListeners.values()) {
            listenerWrapper.notifyListener(packet);
        }
    }
} 
```

一切正常，直到调用 submit() 方法时，也调用了 ListenerNotification 的构造函数，但不再调用 ListenerNotification 中的 run() 方法。

这可能是什么原因？ExecutorService 中是否存在一些可能导致调用提交被忽略的机制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:02:23.290

正如所料，错误在我这边。

我在我的代码中实现了一个名册数据包侦听器并覆盖了 processPacket 方法：

```
@Override
public void processPacket(Packet packet) {
    if (packet instanceof RosterPacket) {
        RosterPacket rosterPacket = (RosterPacket) packet;
        Logger.d(LOGTAG, "Initial roster packet received: " + rosterPacket.getRosterItemCount());
        mConnection.removePacketListener(this);
        fireOnInitialRosterPacketReceived(rosterPacket);
    }
} 
```

但是，我的内部监听器调用方法引入了一个无限循环：

```
private void fireOnInitialRosterPacketReceived(RosterPacket rosterPacket) {
    Iterator<SessionListener> it = mSessionListeners.iterator();
    while (it.hasNext()) {
        // it.next().onInitialRosterPacketReceived(mConnection,
        // rosterPacket);
    }
} 
```

这阻止了执行程序启动的线程，以便随后的提交调用不会再次触发该线程。

# asp.net - 转换推文链接，使其嵌入到 asp.net 应用程序中

> ID：15850653
> 
> 赞同：1
> 
> 时间：2013-04-06T11:58:41.460
> 
> 标签：asp.net, twitter, embed, linq-to-twitter

我想转换一个推文网址，例如[https://twitter.com/LindseyGrahamSC/status/320202348263780352](https://twitter.com/LindseyGrahamSC/status/320202348263780352)以便它自动嵌入。到目前为止，我想出的最好的方法是使用像 [tweet:320202348263780352] 这样的短代码类型语法，然后生成嵌入的推文。但我真的很想将网址粘贴进去并让它工作。我对如何实现这一目标感到困惑。到目前为止我所拥有的：

```
 var ctxTwitterContext = new TwitterContext(auth);

    if (e.Location != ServingLocation.PostList && e.Location != ServingLocation.SinglePost)
        return;

    string regex__1 = @"\[tweet:.*?\]";
    MatchCollection matches = Regex.Matches(e.Body, regex__1);

    for (int i = 0; i < matches.Count; i++)
    {
        Int32 length = "[tweet:".Length;
        string TweetID = matches[i].Value.Substring(length, matches[i].Value.Length - length - 1);
        var embeddedStatus =
               (from tweet in ctxTwitterContext.Status
                where tweet.Type == StatusType.Oembed &&
                    tweet.ID == TweetID
                select tweet.EmbeddedStatus)
               .SingleOrDefault();

        string html = embeddedStatus.Html;

        e.Body = e.Body.Replace(matches[i].Value, String.Format(html)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T17:17:14.207

状态 ID 始终是 URL 的最后一段。所以，你可以这样做：

```
 string statusUrl = "https://twitter.com/LindseyGrahamSC/status/320202348263780352";
  string tweetID = statusUrl.Substring(statusUrl.LastIndexOf('/') + 1); 
```

除非我不明白。如果是这样，您可以删除 RegEx 代码和 for 循环。

# ruby-on-rails - 尝试使用 form_for 时未定义的方法 *_path

> ID：15850655
> 
> 赞同：0
> 
> 时间：2013-04-06T11:58:46.257
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, form-for

# 类别控制器：

```
 def new
    @cat = Category.new
    respond_to do |format|
      format.html
    end
  end 
```

# 看法：

```
%p Add new category:
~form_for(@cat) do |f|
  %div.field
    ~f.label :name
    ~f.text_field :name
  %div.field
    ~f.label :description
    ~f.text_area :description
  %div.field
    ~f.submit 
```

# 路线：

```
 resources :category 
```

当我尝试在浏览器中加载类别/新时，我得到：

```
undefined method `categories_path' for #<#<Class:0x10d9c9ee8>:0x10d9b0768>
Extracted source (around line #3):
1: %h1 Category#new
2: %p Add new category:
3: ~form_for(@cat) do |f|
4:   %div.field
5:     ~f.label :name 
```

任何想法为什么我的表格没有显示？此外，在我想要显示所有类别的类别/索引页面上，在我得到的类别列表下`#<Category:0x10d736b40>`。我能以某种方式摆脱它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:05:31.480

路线应该是

```
resources :categories 
```

不是

```
resources :category 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T12:23:32.483

评论有点长，所以我添加了以下内容作为答案。

如果你想要一个单一的资源，你需要做：

```
resource :category 
```

这将[只生成 6 条路线](http://guides.rubyonrails.org/routing.html#singular-resources)（无索引）：

```
GET     /category/new   new
POST    /category       create
GET     /category       show
GET     /category/edit  edit
PUT     /category       update
DELETE  /category       destroy 
```

但是您的控制器仍然是复数，除非您执行以下操作：

```
resource :category, controller: :category 
```

# javascript - 使用 jQuery 和 jQuery UI 可拖动特性时如何提高性能

> ID：15850657
> 
> 赞同：0
> 
> 时间：2013-04-06T11:58:49.923
> 
> 标签：javascript, jquery, performance

我使用可拖动的 jQuery UI 制作了一个自定义滑块。我将可拖动控件限制在 x 轴上。当控件被拖动时，我检查控件的位置。

根据位置，我调用一个名为 selectCells 的函数。

此函数选择表格中的一系列单元格并将单元格的 html 设置为图像。

因此，例如，如果索引为 1，那么我想选择第一行和第一列中的所有单元格（只有一个单元格）。如果索引为 2，那么我想选择前 2 行和前 2 列中的单元格（将选择四个单元格）等。

我跳过第一行和第一列，因为我不想填充这些单元格

我的 selectCells 函数如下

```
function selectCells(index, bGoingRight) {
    if (bGoingRight) {
        for (var i = 1; i <= index; i++) {
            $(container).find('#exponentTable tr:eq(' + i + ')').find('td').slice(1, index + 1).html(block);
        }
    } else {
        for (var i = 1; i < 13; i++) {
            $(container).find('#exponentTable tr:eq(' + i + ') td:eq(' + (index + 1) + ')').html(grayBlock);
            $(container).find('#exponentTable tr:eq(' +(index + 1) + ') td:eq(' + ( 13 - i) + ')').html(grayBlock);
        }
    }
} 
```

问题是，如果用户快速滑动滑块，则会跳过一些行和列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:29:18.187

正如 charlietfl 所说，一旦我缓存了行，它就会提高性能。

# lua - Lua - 尝试调用全局“包含”（零值）

> ID：15850658
> 
> 赞同：-1
> 
> 时间：2013-04-06T11:58:57.377
> 
> 标签：lua, global

我很有趣，如果谁知道下面这段代码的问题是什么。我总是收到这个错误：

''尝试调用全局'包含'（一个零值）''

这是代码：

```
state1={10,11,20,21,22,23,24,30,31,32,33,34,35,36,37,38,39,40,45,46,47,48,49,50,51,69,72,73,74,85}
state3={78}
state4={1,2,3,4,5,6}

playerskin=initArray2(32,0)
wepskin=initArray2(32,0)

function getPlayerData(id,d)
if (d=="team") then
    if (player(id,"team")==1) then
        return "red"
    end
    if (player(id,"team")==2) then
        return "blu"
    end
end
if (d=="class") then
    return string.lower(tf2.classes.name[tf2.classes.class[id]])
end
end

function changeSkin(id,w)
if (contains(state1,w)) then
    if (playerskin[id]~=0) then
        freeimage(playerskin[id])
    end
    playerskin[id]=image("gfx/tf2/skins/"..getPlayerData(id,"team").."   /"..getPlayerData(id,"class").."/"..getPlayerData(id,"team").."_"..getPlayerData(id,"class").."_1.png",1,0,200+id)
end
if (contains(state3,w)) then
    if (playerskin[id]~=0) then
        freeimage(playerskin[id])
    end
    playerskin[id]=image("gfx/tf2/skins/"..getPlayerData(id,"team").."/"..getPlayerData(id,"class").."/"..getPlayerData(id,"team").."_"..getPlayerData(id,"class").."_3.png",1,0,200+id)
end
if (contains(state4,w)) then
    if (playerskin[id]~=0) then
        freeimage(playerskin[id])
    end
    playerskin[id]=image("gfx/tf2/skins/"..getPlayerData(id,"team").."/"..getPlayerData(id,"class").."/"..getPlayerData(id,"team").."_"..getPlayerData(id,"class").."_4.png",1,0,200+id)
end
if (hat[id]~=0 and tf2.classes.hatunlock[id][tf2.classes.class[id]]~=0) then
    freeimage(hat[id])
    hat[id]=image(crafts[tf2.classes.hatunlock[id] [tf2.classes.class[id]]].image,1,0,200+id)
end
end

--[[function changeWeaponSkin(id,w)
if (wepskin[id]~=0) then
    freeimage(wepskin[id])
end
wepskin[id]=image("gfx/tf2/skins/weapons/"..getPlayerData(id,"class").." /"..string.lower(tf2.classes.weaponnames[w])..".png",1,0,200+id)
end
]]

addhook("select","tf2.classes.images")
function tf2.classes.images(id,w)
if (player(id,"armor")~=206) then
    changeSkin(id,player(id,"weapontype"))
    --changeWeaponSkin(id,w)
end
end

addhook("spawn","tf2.classes.spawndebug")
function tf2.classes.spawndebug(id)
if (player(id,"armor")~=206) then
    changeSkin(id,player(id,"weapontype"))
    timer(10,"parse","lua changeSkin("..id..",player("..id..",\"weapontype \"))")
    if (tf2.classes.hatunlock[id][tf2.classes.class[id]]~=0) then
        timer(10,"parse","lua freeimage("..hat[id]..")")
        timer(10,"parse","lua   hat["..id.."]=image(crafts[tf2.classes.hatunlock["..id.."][tf2.classes.class["..id.."]]].image,1,0,200+"..id..")")
    else
        timer(10,"parse","lua freeimage("..hat[id]..")")
        timer(10,"parse","lua hat["..id.."]=0")
    end
end
end

addhook("attack2","tf2.classes.spycloak")
function tf2.classes.spycloak(id)
if (tf2.classes.class[id]==9 and player(id,"armor")==0) then
    if (playerskin[id]~=0) then
        freeimage(playerskin[id])
    end
    --[[
    if (wepskin[id]~=0) then
        freeimage(wepskin[id]) 
```

如果您有解决方案，请帮助我。

谢谢，

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:02:25.790

你有

```
if( contains(...) ) then 
```

在您的代码段中。`contains`需要定义该函数才能调用它。缺少函数定义。

你可以使用这样的东西（如果你想`w`在表格中找到）：

```
function contains( tPassed, iValue )
    for _, v in pairs( tPassed ) do
        if tonumber(v) == tonumber(iValue) then
            return true
        end
    end
    return nil
end 
```

# javascript - 调用按钮的点击处理程序

> ID：15850662
> 
> 赞同：1
> 
> 时间：2013-04-06T11:59:08.610
> 
> 标签：javascript, jquery, click

我正在尝试使用 JavaScript 以编程方式调用按钮的单击。我的代码是：

```
$(document).ready(function() { autoload(); });

function autoload() {

    var button = $("#button");
    var video = $("#video");
    var evnt = button["onclick"];

    // Set the click handler of the button
    button.click(function () {
        video.get(0).play();
    });

    // Call the button's click handler
    if (typeof button.onclick == "function") {
        button.onclick.apply(button);
    }
} 
```

但由于某种原因，这不起作用，点击处理程序没有被调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T12:00:15.763

jQuery 中的[事件](http://api.jquery.com/category/events/)与原生 DOM 事件[不同。](https://github.com/jquery/jquery/blob/master/src/event.js)

您应该使用`button.click()`或`button.trigger("click")`。

# javascript - 无法通过 setTimeout 调用函数

> ID：15850667
> 
> 赞同：0
> 
> 时间：2013-04-06T11:59:53.390
> 
> 标签：javascript, jquery, asp.net, function, var

我正在尝试使一些功能一个接一个地工作，它们之间的等待时间为 1.5 秒。

现在，当我尝试使用相同的 ID 这样做时（在“NoteList（>here<）”中，如 1、2、3 或任何其他，它可以工作；

```
for (var i = 0; i < 36; i++)
{
    setTimeout(function () { OnClcRandom(NoteList[0]) }, i * 1000 + 1000);

} 
```

但！当我尝试使用 var i 这样做时，它不起作用并且使页面中的所有功能都卡住了。知道为什么吗？

```
 for (var i = 0; i < 36; i++)
        {
            setTimeout(function () { OnClcRandom(NoteList[i]) }, i * 1000 + 1000);

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:02:22.677

那是因为所有函数都引用同一个*实时* `i`变量，而不是您调用时变量的值`setTimeout()`。这意味着到超时实际运行您的函数`i`时将是`36`.

试试这个：

```
 for (var i = 0; i < 36; i++) {
        (function(x){
           setTimeout(function () { OnClcRandom(NoteList[x]) }, i * 1000 + 1000);
        )(i);
    } 
```

这会在循环的每次迭代中执行一个匿名函数，每次执行都会获取自己的`x`参数以在原始函数中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:04:43.967

Javascript 不会为块创建本地范围。:)

在您的第二个示例中，var i 等于 36（最后一个值）。您需要在循环内创建本地范围。

```
for (var i = 0; i < 36; i++) {

 (function (i) {
   setTimeout(.......);
}(i))

} 
```

您也可以修复 'i' 值将其分配给函数属性：

```
for (var i = 0, f; i < 36; i++){
  f = function _callback() { var i = _callback.i; .....};
  f.i = i;
  setTimeout(f, i * 1000);
} 
```

# java - 当应用程序陷入无限循环时收到通知？

> ID：15850685
> 
> 赞同：0
> 
> 时间：2013-04-06T12:01:30.147
> 
> 标签：java, infinite-loop

我们的产品建立在 Java 堆栈上，它基本上是一个事务系统。我只是想知道我们是否有任何机制可以在程序进入无限循环时发送通知？或者我们可以杀死java进程本身？还是更好的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:09:26.930

如果您使用 JTA 事务，您可以在应用程序服务器上为这些事务设置超时。如果事务花费很长时间（例如由于无限循环，但如果事务花费的时间太长，则会引发异常。您设置的阈值越高，捕获任何不正确的风险就越低一个无限循环。）然后我想你可以使用面向方面的编程（AOP）来包装这个异常并创建一个通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T12:24:49.050

一般来说，这是无法解决的问题，请参见[停机问题](http://en.wikipedia.org/wiki/Halting_problem)。当然，您可以设置一些超时或设置一些“命令计数器”，但是，horizo​​n 有一个新问题（如果程序在`timeout + 1`几秒钟后停止怎么办？）

# vb.net - 发生关机事件时如何关闭vb应用程序

> ID：15850688
> 
> 赞同：0
> 
> 时间：2013-04-06T12:01:53.753
> 
> 标签：vb.net, process, timer, shutdown, formclosing

我创建了一个在 Windows 启动时启动的应用程序（在启动时），但我想安全地使用`unload`我的表单或`close`我的 vb 应用程序而不会丢失数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:10:15.990

The [FormClosing](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing.aspx) event should be the place where you handle expected or unexpected closing of your forms.

This event receives a [FormClosingEventArgs](http://msdn.microsoft.com/en-us/library/system.windows.forms.formclosingeventargs.aspx) that contains the [reason](http://msdn.microsoft.com/en-us/library/system.windows.forms.formclosingeventargs.closereason.aspx) for the shutdown of your form.

There is also a more generic [Application.ApplicationExit](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.applicationexit.aspx) but it lacks the details given by the FormClosingEventArg parameter passed to the FormClosing event.

How you handle the data that need to be saved could be the discriminant factor in choosing between the two methods.

# iphone - 解析节点

> ID：15850689
> 
> 赞同：0
> 
> 时间：2013-04-06T12:02:06.077
> 
> 标签：iphone, html, objective-c, html-parsing

我有 HTML 页面的响应

```
 `<cite>www.<b>apple</b>.com/in/</cite>` 
```

我必须使用库“ [https://github.com/topfunky/hpple/blob/master/](https://github.com/topfunky/hpple/blob/master/) ”来解析它

```
 TFHppleElement * element6 = [childrenArr5 objectAtIndex:0];
            NSArray * arr = [element6 childrenWithTagName:@"cite"];
            NSLog(@"arr:%@ cnt:%d",arr,[arr count]);
            TFHppleElement * element7 = [arr objectAtIndex:0];
            NSString * cite = [element7 text];
            NSLog(@"cite:%@",cite); 
```

但我没有得到完整的文本，它只是抓住了“www”。来自 ，请提出一些建议以获取标签内的整个文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:11:19.270

text 只给你一个元素的文本。它忽略了可能存在的任何孩子。

*   引用
    *   文本节点：www。
    *   b
        *   文本节点：苹果
    *   文本节点：.com/in/

获取城市标签下的所有文本，忽略中间的任何标签我认为应该这样做

```
@interface THppleElement (textInlcudingChildren)
- (NSString*)textInlcudingChildren;
@end

@implementation THppleElement (textInlcudingChildren)
- (NSString*)textInlcudingChildren {
    NSMutableString *txt = self.text;
    for(id child in self.children)
        [txt appendString:[child textInlcudingChildren]];
    return txt;
}
@end
...

NSString * text = [element7 textInlcudingChildren];
NSLog(@"%@", text); 
```

# c# - 控制台应用程序中 WCF 托管服务中的 MaxReceivedMessageSize

> ID：15850690
> 
> 赞同：3
> 
> 时间：2013-04-06T12:02:11.993
> 
> 标签：c#, wcf, windows-runtime, wcf-binding

我的控制台应用程序中有一个托管的 WCF 服务，如下所示：

```
static void Main(string[] args)
    {
        Uri baseAddress = new Uri("http://localhost:8080/Test");
        // Create the ServiceHost.
        using (ServiceHost host = new ServiceHost(typeof(TestService), baseAddress))
        {
            // Enable metadata publishing.
            ServiceMetadataBehavior smb = new ServiceMetadataBehavior();
            smb.HttpGetEnabled = true;
            smb.MetadataExporter.PolicyVersion = PolicyVersion.Policy15;
            host.Description.Behaviors.Add(smb);

            host.Open();

            Console.WriteLine("The Test service is ready at {0}", baseAddress);
            Console.WriteLine("Press <Enter> to stop the service.");

            Console.ReadLine();

            // Close the ServiceHost.
            host.Close();
        }  
    } 
```

我在 Windows 应用商店 (WinRT) 应用程序中有一个客户端。我越来越

> *“（413请求实体太大”*

尝试传递大字节数组时。如何`MaxReceivedMessageSize`通过代码在我的服务中设置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T12:07:08.470

你需要创建一个Binding，然后指定MaxReceivedMessageSize：

```
Uri baseAddress = new Uri("http://localhost:8080/Test");
var serviceHost = new ServiceHost(typeof(TestService));
var basicHttpBinding = new BasicHttpBinding();
basicHttpBinding.MaxReceivedMessageSize = int.MaxValue;
serviceHost.AddServiceEndpoint(typeof(IService), basicHttpBinding, baseAddress); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-16T15:16:33.627

如果您的字节数组太大，那么您总是可以将其拆分为较小的块并循环发送。您甚至可能希望在另一个线程中执行此操作并更新用户界面的进度。

# html - iframe 的长度

> ID：15850703
> 
> 赞同：0
> 
> 时间：2013-04-06T12:03:25.183
> 
> 标签：html, css, google-chrome, iframe

我的网站上有这段代码，它在 Firefox 中完美运行，但 chrome 无法在任何方式使其在 chrome 中运行。我试图将 iframe 放入 Height: 95% 但它不准确。注意：在 iframe jsFiddle 的高度看起来很糟糕（不知道为什么）

在铬： ![镀铬](https://i.stack.imgur.com/namm6.jpg)

在火狐中： ![在火狐中](https://i.stack.imgur.com/P5e4O.jpg)

```
<html>
<body>
<header>
</header>
<nav>
</nav>
<content>
<div style="padding-left:180px;padding-top:45px">
<iframe src="http://message2space.es.vu" name="c" id="c" frameborder="0"></iframe>
</div>
</content>
</html>
<!-- and the css: --!>
header{
   z-index:100000001;
   height:45px; 
   width:100%;
   background: -webkit-linear-gradient(#A9A9A9, #797979);
   background: -moz-linear-gradient(#A9A9A9, #797979);
   background: -o-linear-gradient(#A9A9A9, #797979); 
   left: 0px; 
   position: absolute; 
   top: 0px;
   background-color:#A9A9A9
}
nav{
    position:absolute;
    top:0px;
    left:0px;
    z-index:10000000;
    background-color: #424242;
    height:100%;
    width:180px;
}
content{
    position:absolute;
    top:0px;
    left:0px;
    width:100%;
    height:100%
}
iframe{
    width:100%;
    height:100%
} 
```

[http://jsfiddle.net/gsu2H/1/](http://jsfiddle.net/gsu2H/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:58:54.207

我会说 Chrome 显示是正确的。因为你试图给出 100% 的高度和45px的*偏移量。*

一个简单的解决方案是`box-sizing`更改元素的 CSS 框模型，因此只需更改此行：

```
<div style="padding-left:180px;padding-top:45px"> 
```

到：

```
<div style="box-sizing:border-box;padding-left:180px;padding-top:45px;height:100%"> 
```

您可能希望添加`-moz-`供应商前缀，`box-sizing`因为 Firefox[尚不支持](http://caniuse.com/css3-boxsizing)W3C 版本。

# c# - 如何使用动态创建的文本字段的文本属性？

> ID：15850704
> 
> 赞同：0
> 
> 时间：2013-04-06T12:03:27.120
> 
> 标签：c#, dynamic, text, properties

我有这段代码，它为我动态创建了一些文本字段。k 取自用户 btw。

```
 for (int i = 0; i < k; i++) 
        {
            TextBox t1 = new TextBox();
            t1.Parent = groupBox2;
            t1.Left = textBox2.Left;
            t1.Top = textBox2.Top + (i + 1) * 40;
            t1.Name = "text" + (i + 1);
            t1.Enabled = true;
            groupBox2.Controls.Add(t1);
        } 
```

我想要做的是，在这个创建阶段完成后，当用户按下 groupbox2 的“确定”按钮时，我想获取创建的文本字段的文本属性，但到目前为止我不知道如何做到这一点，因为我给文本字段起了一个名字，我试过了，但没有用。

```
 private void button3_Click(object sender, EventArgs e)
    {
        node1.name = textBox2.Text;

        for (int i = 0; i < k; i++) 
        {
            node1.array[i] = Convert.ToInt32("text"+(i+1).Text);
        }
    } 
```

任何帮助都会很好，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:15:16.790

试试这个方法：

```
private void button3_Click(object sender, EventArgs e)
{
    node1.name = textBox2.Text;
    for (int i = 0; i < k; i++)
    {
        TextBox txtBox = (TextBox)groupBox2.FindControl("text" + (i + 1));
        if (txtBox != null)
        {
            node1.array[i] = txtBox.Text;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:09:20.263

遍历 groupBox1 中的文本框并获取它们的名称，试试这个：

```
List<string> TextBoxesName=new List<string>();
            foreach (Control item in groupBox1.Controls)
            {
                if (item is TextBox)
                {
                    TextBoxesName.Add((item as TextBox).Text);
                }
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T12:07:21.843

设置为您的动态 texboxes `ID`，而不是您可以做的事情`groupBox2.FindControl("dynamic_texbox_id")`来获取您的文本框

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T12:07:27.767

最简单的解决方案是将列表框放在某种集合中

```
List<ListBox> listboxes = new List<ListBox>();

for (...)
{
...
listboxes.add(listbox);

} 
```

然后，您可以随时参考它们

或者，既然您要将它们添加到组框，为什么不浏览该集合？

# rest - 用于 Windows Azure 移动服务的 REST API

> ID：15850705
> 
> 赞同：2
> 
> 时间：2013-04-06T12:03:38.310
> 
> 标签：rest, mobile, azure, web

我喜欢 Parse 的一件事是 REST API，它允许我从外部网站向“频道”发送推送通知。我很好奇 Windows Azure 移动服务是否提供此功能或类似功能。

据我所知，实现此结果的最佳方法是创建一个表，用于存储 Azure 移动服务上的推送通知。覆盖 onInsert node.js 脚本以在插入记录时发送推送。插入来自现有的 REST API，它允许我与平板电脑本身进行交互。

例如，我希望能够向 API 提供我的 iOS 设备令牌以及对 REST 端点的各种应用程序访问凭据，并使用移动服务代表我发送通知，同时将这些客户端的信息保存在我自己的数据库托管在 SQL Azure 或其他位置。

感谢您的任何见解。

杰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T14:49:50.070

今天，这可以通过在移动服务中创建一个仅用于脚本层的“虚拟”表来实现。无需执行 request.execute()，您只需输入调用 push.APNS（或您要推送到的任何平台）的代码即可推送到您的客户端。您可以使用 mssql 模块在连接的数据库上执行存储过程或自定义 sql（如果您将数据与连接到移动服务的数据库分开存储，则可以与不同的 SQL 数据库通信）。至于向服务获取数据，只需发送您需要的任何数据，就像您要将数据插入表中一样（因此它们将成为插入脚本中 ITEM 参数上的字段）或使用可选的 PARAMETERS 参数在对您的 MSTABLE 对象进行调用时（并且它们将在请求中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T10:30:03.930

现在可以使用 API 功能代替虚拟表。此问题中的更多详细信息： [如何使用 Azure 移动服务 API 功能](https://stackoverflow.com/questions/17076876/how-to-use-azure-mobile-service-api-feature)

# php - 从数据库调用的 Joomla K2 额外字段

> ID：15850710
> 
> 赞同：0
> 
> 时间：2013-04-06T12:04:16.423
> 
> 标签：php, joomla, joomla-k2

我正在尝试将 K2 中公司的文章与他们的参考文献（也是文章）联系起来。从文章中获取参考文本没有问题，但问题在于包含添加推荐的人的额外字段。如果我尝试从数据库中获取数据，我会得到：

```
[{"id":"5","value":"Zden\u011bk Salcman"},{"id":"6","value":"www.o2.cz"},{"id":"7","value":"supervizor ve firm\u011b Telef\u00f3nica Czech Republic, a.s."}] 
```

PHP中有没有办法制作这样好的数据：

```
Zdeněk Salcman
www.o2.cz
supervizor ve firmě Telefónica Czech Republic, a.s 
```

谢谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:19:20.400

那是json编码的数据。首先将它传递给`json_decode`，然后你可以循环它

```
$fields = json_decode($fields);
foreach($fields as $field)
    echo $field->value; 
```

# java - IF 语句 Java 的问题

> ID：15850715
> 
> 赞同：1
> 
> 时间：2013-04-06T12:04:52.500
> 
> 标签：java, if-statement

我创建了一个名为`multiplay`.

```
private boolean multiplay; 
```

在我里面`public Game()`我有：

```
// make a player
player = new Player(this);
if(multiplay == true) {
   player2 = new Player(this);
} 
```

在实际的类文件中，我创建了一个方法：

```
public void startMutliPlayer() {
   multiplay = true;
} 
```

我想要做的是，当`startMultiPlayer`被调用时，它将布尔值设置`multiplay`为`true`，因此，两个玩家将被添加到框架中，而不是一个。如果未调用“startMultiPlayer”，则只会添加一名玩家。

目前，当我跟注时，它只增加了一名玩家而不是两名`startMultiPlayer`。

更新：

能够使用以下代码解决此问题：

```
// Make Players (Single & MultiPlayer)
        if (multiplay == false) {
            player = new Player(this);
            player.setPosition(startPosition);
            player.move(new Vec2(-210, 0));
            multiplay = true;
        } else if(multiplay == true) {
            player = new Player(this);
            player.setPosition(startPosition);
            player.move(new Vec2(-210, 0));player2 = new Player(this);
            player2.setPosition(startPosition);
            player2.move(new Vec2(-150, 0));
            multiplay = false;
        }

public static void startMutliPlayer() {
        multiplay = false;
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:11:17.833

在你的类中创建一个方法`Game`，即

```
public void setMultiplay(boolean multiplay) {
  this.multiplay = multiplay; // scope
  if (multiplay) {
    player2 = new Player(this);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T12:11:27.667

您在哪个 Game 类的对象上调用 startMultiPlay？因为它总是在 Game 构造函数被调用之后被调用，所以它不会工作 - 因为当 Game ctor 被调用时，multiplay 将是 false。

解决这个问题的方法是

```
private boolean multiplay; 
```

需要改为

```
private static boolean multiplay; 
```

还要将 startMultiPlayer 设为静态并在创建 Game 对象之前调用它。

另一种方法是不在 Game 的 ctor 中创建 Player。必须方法 startMultiPlayer 和 startSinglePlayer - 在这些方法中分别创建一个或两个 Player 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T12:11:35.503

我猜你是在 Game 类的一个对象上调用 startMultiPlayer() 方法。但是，构造函数是在 Java 中创建对象时要执行的第一件事。游戏游戏 = 新游戏（）；game.startMultiPlayer(); 将按此顺序执行以下行：

```
// make a player
player = new Player(this);
if(multiplay == true) {
   player2 = new Player(this);
}
multiplay = true; 
```

这意味着在您检查它是否为真后将多重播放设置为真。因此，您仍将处于单人模式。

在调用（或不调用）该`startMultiPlayer()`方法后尝试检查多重播放是否为真。

*另请注意，您可以简单地编写`if(multiplay)`而不是`if(multiplay==true)`因为 Java 中的 if 语句只能采用布尔值。但这是个人喜好，无论如何这可能会自动优化。*

# javascript - $(document).ready 函数不会启动

> ID：15850717
> 
> 赞同：3
> 
> 时间：2013-04-06T12:05:12.803
> 
> 标签：javascript, html, jquery-mobile, jquery

我正在构建一个由几个 jquery 移动页面组成的项目，每个页面都有一个导航栏。

当我查看每个页面时，$(document).ready 函数会很好地启动，但是当我通过导航栏转到该页面时它不会启动.. 同样在 chrome 调试器中，我只看到一个 html 页面（我'正在查看）在源文件夹中。

当我刷新页面时，功能正常

试图将“$(document).ready(function () {”替换为：

"$("div[data-role*='page']").live('pageshow', function(event, ui) {" 有人建议

但这也行不通。

**这是我加载的第一页：**

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>My Page</title>

    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link href="css/jquery.mobile-1.2.0.min.css" rel="stylesheet" type="text/css" /> 
    <script src="js/jquery-1.8.2.min.js" type="text/javascript"></script>
    <script src="js/jquery.mobile-1.2.0.min.js" type="text/javascript"></script>
    <link href="css/TableCSSCode.css" rel="stylesheet" type="text/css" />

    <script>

        $(document).ready(function () {

            $.ajax({
                type: "POST",
                url: "getdata.aspx/return_member_list",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",

                success: function (res) {

                    var parsedData = JSON.parse(res.d);
                    var tableStr = "<table class='CSSTableGenerator'>";

                    $.each(parsedData, function () {
                        tableStr += "<tr><td>" + this.fName + "</td><td>" + this.lName + "</td></tr>";
                    });
                    tableStr += "</table>";
                    $('#tableDiv').html(tableStr);

                },
                error: function (res, msg, code) {
                    // log the error to the console
                    alert("The following error occured: " + msg + " " + code);
                } //error

            });

        });

    </script>

</head> 
<body>
       <div id="page1" data-role="page" data-theme="a">

            <div data-role="header" data-theme="a">
                <h1>חברי העמותה</h1>
            </div> 

            <div data-role="navbar">
                <ul>
                    <li><a href="index.htm">חברי העמותה</a></li>
                    <li><a href="build.htm">בניית צוות</a></li>
                    <li><a href="test.htm"> בדיקה</a></li>
                </ul>
            </div>

            <div data-role="content">
                <div id="tableDiv"></div>
            </div>

            <div data-role="footer">
                <h1>footer area</h1>
            </div>
    </div>

</body>
</html> 
```

**下面是第二页和第三页的标题：** **build.htm：**

```
<head> 
    <title>My Page</title>

    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link href="css/jquery.mobile-1.2.0.min.css" rel="stylesheet" type="text/css" /> 
    <script src="js/jquery-1.8.2.min.js" type="text/javascript"></script>
    <script src="js/jquery.mobile-1.2.0.min.js" type="text/javascript"></script>
    <link href="css/TableCSSCode.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript">

        function save_crew()
        {

            p_num = new Object();
            p_num.p1 = p1.value;
            p_num.p2 = p2.value;
            p_num.p3 = p3.value;
            p_num.p4 = p4.value;

            l_num = new Object();
            l_num.l1 = l1.value;
            l_num.l2 = l2.value;
            l_num.l3 = l3.value;

            s_num = new Object();
            s_num.s1 = s1.value;
            s_num.s2 = s2.value;
            s_num.s3 = s3.value;

            var photo = { 'p1': p_num.p1, 'p2': p_num.p2, 'p3': p_num.p3, 'p4': p_num.p4 };
            var light = { 'l1': l_num.l1, 'l2': l_num.l2, 'l3': l_num.l3, 'l4': l_num.l4 };
            var sound = { 's1': s_num.s1, 's2': s_num.s2, 's3': s_num.s3, 's4': s_num.s4 };

            // Put the object into storage
            localStorage.setItem('photo', JSON.stringify(photo));
            localStorage.setItem('light', JSON.stringify(light));
            localStorage.setItem('sound', JSON.stringify(sound));

            // Retrieve the object from storage
            var retrievedObject = localStorage.getItem('sound');

            var ro = JSON.parse(retrievedObject);

            alert(ro.s2);

            window.location.href="test.htm";

        }

    </script>

</head> 
```

**测试.htm:**

```
<head> 
    <title>My Page</title>

    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link href="css/jquery.mobile-1.2.0.min.css" rel="stylesheet" type="text/css" /> 
    <script src="js/jquery-1.8.2.min.js" type="text/javascript"></script>
    <script src="js/jquery.mobile-1.2.0.min.js" type="text/javascript"></script>
    <link href="css/TableCSSCode.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript">

        $(document).ready(function () {

            var sound_RO = localStorage.getItem('sound');
            var photo_RO = localStorage.getItem('photo');
            var light_RO = localStorage.getItem('light');

            sound_RO = JSON.parse(sound_RO);
            photo_RO = JSON.parse(photo_RO);
            light_RO = JSON.parse(light_RO);

            $.each(sound_RO, function (index, value) {
                alert(value);
            });

            $.ajax({
                type: "POST",
                url: "getdata.aspx/return_prof",
                data: "{prof:'צלם'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",

                success: function (res) {

                    var parsedData = JSON.parse(res.d);

                    $('[data-role="content"]').append('<div id="collapsible-set" data-role="collapsible-set"></div>');
                    $("#collapsible-set").append('<div id="collapsible" data-role="collapsible"></div>');
                    $("#collapsible").append('<h3>צלמים </h3>');

                    for (i = 0; parsedData[i] != null; i++) {

                        $("#collapsible").append('<p>' + parsedData[i].fName + ' ' + parsedData[i].lName + '</p>');

                    }

                    $('[data-role="content"]').trigger('create');

                },
                error: function (res, msg, code) {
                    // log the error to the console
                    alert("The following error occured: " + msg + " " + code);
                } //error

            });

        });

    </script>

</head> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T12:09:29.933

# 原因

当 jQuery Mobile 在第一个页面（使用 ajax）之后加载页面时，它只会加载其 BODY 内容，这意味着在 HEAD 中初始化的任何 js 或 css 文件（如果在第一次加载的 HTML 中未初始化）将被忽略。所以你所有的自定义 js 代码永远不会被执行。

# 解决方案

### 将所有 js 代码移动到第一个 HTML 文件中

您应该创建一个新的 js 文件，随意命名。将所有 js 代码（来自每一页）放入其中。然后在要加载的第一个 HTML 文件中对其进行初始化。

### 将您的 js 代码移动到页面 BODY

只需打开每个页面并将其 javascript 代码从 HEAD 移动到 BODY。因此，javascript 代码将被加载到 DOM 中并在页面显示时执行。

# 最后的想法

所有这些都在我的其他答案/文章中更详细地描述+示例：[**为什么我必须将所有脚本放入 jquery mobile 中的 index.html**](https://stackoverflow.com/a/15806954/1848600)

您还应该考虑切换到 jQuery Mobile 页面事件而不是文档就绪。文档就绪通常可以正常工作，但有时它会在页面加载到 DOM 之前触发。这就是为什么必须使用 jQM 页面事件。他们将确保仅在页面安全加载到 DOM 后触发页面内容。要了解更多信息，请查看此答案/文章：[**jQuery Mobile：文档就绪与页面事件**](https://stackoverflow.com/a/14469041/1848600)

# c# - WP7.1 System.NotSupportedException：“不支持 LaunchForTest”

> ID：15850718
> 
> 赞同：3
> 
> 时间：2013-04-06T12:05:17.210
> 
> 标签：c#, windows-phone-7, windows-phone

我正在使用 Visual Studio 2012 和`Target Windows Phone OS Version`设置为`Windows Phone OS 7.1`. 模式是 Debug 并且为了测试我使用的是 SDK 附带的“Emulator 7.8”（与“Emulator 7.1”和 WP8 模拟器甚至在我的 WP7.8 设备上的结果相同）。

我的代码如下：

```
#if DEBUG
      public void Test()
      {
         if (ScheduledActionService.Find(ReminderName) != null) {
            try {
               ScheduledActionService.LaunchForTest(ReminderName,
                                                    TimeSpan.FromSeconds(1));
            } catch (NotSupportedException e) {
               System.Diagnostics.Debug.WriteLine(e.Message);
               System.Diagnostics.Debug.WriteLine(e.ToString());
            }
         } else {
            MessageBox.Show("No scheduled notification has been installed");
         }
      }
#endif 
```

通过按钮调用此方法后，我得到以下调试输出：

```
A first chance exception of type 'System.NotSupportedException' occurred in
Microsoft.Phone.dll LaunchForTest is not supported
System.NotSupportedException: LaunchForTest is not supported
at Microsoft.Phone.Scheduler.ScheduledActionService.LaunchForTest(String name, TimeSpan delay)
at RingReminder.Control.RingAgent.Test() 
```

我在这里不知所措，因为[ScheduledActionService.LaunchForTest](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.scheduler.scheduledactionservice.launchfortest%28v=vs.105%29.aspx)方法声明： `Windows Phone OS | Supported in: 8.0, 7.1`。

在 SO 或 Google 上搜索这个问题也没有提出任何问题。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T13:12:53.490

`ReminderName`听起来像是[Reminder](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.scheduler.reminder%28v=vs.105%29.aspx)类型。该类`Reminder`派生自[ScheduledNotification](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.scheduler.schedulednotification%28v=vs.105%29.aspx)类，而不是[ScheduledTask](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.scheduler.scheduledtask%28v=vs.105%29.aspx)类。当提供的对象不是对象时`NotSupportedException`，在方法中抛出。这就是为什么您可能会收到异常，因为该对象不是 type 。`LaunchForTest``ScheduledTask``Reminder``ScheduledTask`

# html - Horizontal Menu website - Visual Studio c# - html

> ID：15850722
> 
> 赞同：1
> 
> 时间：2013-04-06T12:05:40.430
> 
> 标签：html, menu, web

How can I make an horizontal menu in my website? I write this code and my menu appears in vertical. Thanks.

```
<li><a href="#"></a></li>
<li><a href="#"></a></li>
<li><a href="#"></a></li>
<li><a href="#"></a></li>
<li><a href="#"></a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:09:37.277

If you want, you could use an asp:menu

[http://msdn.microsoft.com/en-us/library/ecs0x9w5%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ecs0x9w5%28v=vs.100%29.aspx)

(This question was previously tagged with C#, so I'm assuming its asp.net - if its just html it won't work)

Otherwise if you just want a list of links, you could put them in a table in the same row

```
<table>
<tr>
<td><a href="">item1</a></td>
<td><a href="">item2</a></td>
..
</tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:33:39.983

使用您在上一个答案中获得的表方法`li{display:inline-block;}`。`li {float:left}`所有工作。

# migration - 是否有使用 PLESK 11 的迁移经理？

> ID：15850723
> 
> 赞同：-1
> 
> 时间：2013-04-06T12:05:51.960
> 
> 标签：migration, plesk

我正在拼命地尝试在运行 PLESK 11.0.9 的新机器上找到一个工作的“迁移管理器”。默认情况下没有安装 MM - 而且我找不到任何兼容的安装程序 - 无论是在 PLESK-Website/-board 上还是使用 google 都没有。

有人设法让迁移管理器在 PLESK 11 上运行吗？操作系统是 Ubuntu 12.04 LTS。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T06:08:35.603

迁移管理器可以安装在“工具和设置”>“更新和升级”中 - 此链接在端口 8447 上运行自动安装程序的 UI，您可以在其中选择“Plesk 迁移管理器”组件并安装它。

# php - 发送邮件 [PHP]

> ID：15850724
> 
> 赞同：0
> 
> 时间：2013-04-06T12:06:13.663
> 
> 标签：php, email, sendmail

我的 PHP 代码有问题。我使用 IF-ELSE 检查一切是否正常，但它一直给我“您没有输入收件人”。

```
<?php

$to=trim($_POST['toperson']);
$from=trim($_POST['spoofrom']);
$message=trim($_POST['message']);
$subject=trim($_POST['subj']);

if (substr_count($to, '@') <= 1 ) {
    if (!isset($to)) {
        if (!isset($from)) {
            if (!isset($subject)) {
                if (!isset($message)) {
                    mail($to, $subject, $message, "From: " . $from);
                    print "Message was sent!";
                }else {print "You did not enter a message";} 
            }else {print "You did not enter a subject";}
        }else {print "You did not enter a from email";}
    }else {print "You did not enter a recipient";}
}else{print "You entered 2 or more emails.";}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:09:10.747

尝试

将您的条件替换`if (!isset($to))`为`if (isset($to))` 并添加空支票

文档： http: [//php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)

[http://www.php.net/manual/en/function.empty.php](http://www.php.net/manual/en/function.empty.php)

像这样：

```
if (substr_count($to, '@') <= 1 ) {
    if (isset($to) && !empty($to)) {
        if (isset($from) && !empty($from)) {
            if (isset($subject) && !empty($subject)) {
                if (isset($message) && !empty($message)) {
                    mail($to, $subject, $message, "From: " . $from);
                    print "Message was sent!";
                }else {print "You did not enter a message";} 
            }else {print "You did not enter a subject";}
        }else {print "You did not enter a from email";}
    }else {print "You did not enter a recipient";}
}else{print "You entered 2 or more emails.";} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T12:08:00.070

你最终的意思是：empty() 而不是 isset() 因为它总是被设置......但并不总是被填充？

或检查 if`isset($_POST['to'])`和其他键，但不要在分配的变量上使用 isset（检查`is_null`/`=== null`更好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T12:14:59.877

如果您的所有表单数据为空，您的代码将发送邮件。 `if(!isset($_POST["something"])` 表示如果您的数据未设置，条件过程将触发。

去掉感叹号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-07T15:59:58.550

使用正则表达式 &| 确保您的表单具有正确的验证 提交表单之前的 html5/css3。最后使用 !empty() verse isset() ，我建议把

```
if (mail($to, $subject, $message, "From: " . $from)) { 
   print "Message was sent!";
} else { print "email failed to send!"; } 
```

另外，我会在设置变量时放置 From: 而不调用它，但这更符合个人喜好。

```
$from= "From: trim($_POST['spoofrom'])"; 
```

# node.js - 我的主机刚刚安装了 node.js

> ID：15850725
> 
> 赞同：-1
> 
> 时间：2013-04-06T12:06:17.163
> 
> 标签：node.js

他使用了本教程：[http ://blog.urbaninsight.com/2012/10/31/installing-nodejs-centos-55-server](http://blog.urbaninsight.com/2012/10/31/installing-nodejs-centos-55-server)

显然它进展顺利，100% 好，没有错误。

现在我在这里：[http ://www.nodebeginner.org/](http://www.nodebeginner.org/)

我无法说明我需要在服务器上放置哪些节点模块，所以我猜……我从节点站点下载了最新的节点源代码，并将 lib 文件夹放入我的 public_html 中。

我现在制作了一个看起来像这样的 hello.js：

```
var http = require("lib/http.js");

http.createServer(function(request, response) {
  response.writeHead(200, {"Content-Type": "text/plain"});
  response.write("Hello World");
  response.end();
}).listen(8888); 
```

并且“正如我所料”，我的猜测是彻底的便便……当我访问 mysite.com:8888 时，我得到了糟糕！Google Chrome 无法连接到 blaa blaa blaa

我必须认真思考我想在这里问什么/究竟想问什么...好吧，我一直在阅读有关在本地做事的教程，但在网上找不到任何东西，老实说，在我的主机安装完我希望在视觉上看到的东西之后一些新的 .js 文件位于服务器上（http.js？或其他东西）。我实际上什至无法弄清楚如何在这个问题上询问谷歌......

我可以查看代码中的教程，发现它看起来很简单 javascript（我最喜欢的语言，比英语更好），但就像我错过了我需要上传或连接到框架的部分，比如何时你使用jquery；你不能只写 jquery 代码，因为浏览器会像 $ 是什么鬼？首先，您必须执行以下操作：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

1.使用可以解释/运行节点的服务器（完成）

2.??！

3.编写简单的代码

- - - - - - - -更新 - - - - - - - - - - - - - - -

```
[root@user node-latest-install]# curl https://npmjs.org/install.sh | sh
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  7882  100  7882    0     0   2835      0  0:00:02  0:00:02 --:--:-- 7697k
tar=/bin/tar
version:
tar (GNU tar) 1.15.1
install npm@latest
fetching: http://registry.npmjs.org/npm/-/npm-1.2.18.tgz
0.10.3
1.2.18
cleanup prefix=/root/local
find: /root/local/lib/node: No such file or directory
find: /root/local/lib/node: No such file or directory

All clean!
/root/local/bin/npm -> /root/local/lib/node_modules/npm/bin/npm-cli.js
npm@1.2.18 /root/local/lib/node_modules/npm
It worked
[root@user node-latest-install]# cd ~
[root@user ~]# ls -l
total 548
drwxr-xr-x  5 root root   4096 Apr  7 04:03 local
drwx------  5 root root   4096 Apr  4 19:37 Maildir
drwxr-xr-x 10 root root   4096 Apr  7 04:04 node-latest-install
drwxr-xr-x  2 root root   4096 Apr  7 04:04 tmp
-rw-r--r--  1 root root 536584 Apr  4 19:38 virtualmin-install.log
[root@user ~]# ls -l ~/local
total 12
drwxr-xr-x 2 root root 4096 Apr  7 04:04 bin
drwxr-xr-x 4 root root 4096 Apr  7 04:03 lib
drwxr-xr-x 3 root root 4096 Apr  7 04:03 share
[root@user ~]# 
```

我也更改为 require("http") ，它仍然给我同样的 'oops' 错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:14:05.547

要回答您关于一般节点编程的主要问题，您似乎缺少`npm`

**1）**首先，安装 npm 使用

```
curl http://npmjs.org/install.sh | sh 
```

一旦你有了 npm，在 node 中编程就变得容易多了。

**2）**在您的文件中，更改

```
var http = require("lib/http.js"); 
```

到

```
var http = require("http"); 
```

那么一切都应该正常工作。

# javascript - Base64 加密后运行 JavaScript 代码

> ID：15850727
> 
> 赞同：3
> 
> 时间：2013-04-06T12:06:36.947
> 
> 标签：javascript, function, base64

我已经使用 base64 方法加密了我的 JavaScript 代码，如下[所示](http://ntt.cc/2008/01/19/base64-encoder-decoder-with-javascript.html)。但是当我使用 document.ready 运行编码函数时，JavaScript 函数并没有做它应该做的事情。

我如何意识到加密的代码将被解密并开始运行该功能？

先感谢您！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T12:33:26.813

只需`eval`在解码的字符串上使用。

使用代码的示例`alert("test");`：

```
eval(decode64('YWxlcnQlMjglMjJ0ZXN0JTIyJTI5JTNC')); 
```

演示：http: [//jsfiddle.net/uFxnz/](http://jsfiddle.net/uFxnz/)

注意：使用该`eval`函数与不安全和低效的代码相关联，但在这种情况下，您可以尽可能多地控制代码的来源，因此它只是按照您的意愿行事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-03T17:42:50.103

# 要“保护”您的代码...

..您可以使用以下简单程序。

但是，请记住，它不提供任何安全性。但这并不意味着没有用例。加密为 base64 字符串对于可共享性或当您想要创建时非常有意义，例如小书签（从网络地址栏运行的代码`javascript:eval(atob('...'))`。

* * *

现在，假设这是您的代码：

# 1\. 守则

```
// commentary, Yaaay!
var myObj = {
    foo : function() { alert("Baz!")} ,
    html : "<div id='myDIV'></div>", // it's ["'] proof
    bar : 123 
};
myObj.foo(); 
```

# 2.base64字符串

```
1\. var base64Fun = btoa((function(){
2\. // commentary, Yaaay!
3\. var myObj = {
4\.     foo : function() { alert("Baz!")} ,
5\.     html : "<div id='myDIV'></div>", // it's ["'] proof
6\.     bar : 123 
7\. };
8\. myObj.foo();
9\. }).toString().slice(13,-2)) 
```

请注意，我只添加了行`1`和`9`，其余的是您的代码，完好无损。

# 3.运行它

```
eval(atob(base64Fun));

eval(atob("Ly8gY29tbWVudGFyeQp2YXIgbXlPYmogPSB7Cglmb28gOiBmdW5jdGlvbigpIHsgYWxlcnQoIkJheiEiKX0gLAoJaHRtbCA6ICI8ZGl2IGlkPSdteURJVic+PC9kaXY+IiwKCWJhciA6IDEyMyAKfTsKbXlPYmouZm9vKCk7")); 
```

# 兼容性

### `btoa()`并且`atob()`并非所有浏览器都支持，但是..

1.  使用 polyfil 并教浏览器这些功能。[关联](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills#base64-windowatob-and-windowbtoa)
2.  找到另一种方式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T12:15:51.663

您不能通过 base64 转换器运行您的 JS 代码并期望它能够正常工作。

您正在寻找的是一个缩小器。像uglifyjs：

[http://marijnhaverbeke.nl/uglifyjs](http://marijnhaverbeke.nl/uglifyjs)

# mysql - How can I see that it is indeed a foreign key and the parent table?

> ID：15850731
> 
> 赞同：0
> 
> 时间：2013-04-06T12:07:07.923
> 
> 标签：mysql, sql, foreign-keys, constraints

I have created a table which has a foreign key as follows:

```
CREATE TABLE interests  
(
    int_id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,  
    an_interest VARCHAR(50) NOT NULL,  
    contact_id INT NOT NULL,  
    CONSTRAINT my_contacts_contact_id_fk  
    FOREIGN KEY (contact_id)  
    REFERENCES my_contacts (contact_id)  
); 
```

When I do `DESC` I see:

```
mysql> desc interests;  
+------------+-------------+------+-----+---------+----------------+  
| Field      | Type        | Null | Key | Default | Extra          |  
+------------+-------------+------+-----+---------+----------------+  
| int_id     | int(11)     | NO   | PRI | NULL    | auto_increment |  
| interest   | varchar(50) | NO   |     | NULL    |                |  
| contact_id | int(11)     | NO   | MUL | NULL    |                |  
+------------+-------------+------+-----+---------+----------------+  
3 rows in set (0.02 sec) 
```

I know what `MUL` is but how would I explicitely see that `contact_id` is defined as a foreign key and which is the parent table via CLI?
Also why can't I use `my_contacts_contact_id_fk` to drop the foreign key constraint?

**UPDATE**

```
mysql> ALTER TABLE interests DROP CONSTRAINT my_contacts_contact_id_fk;  
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use n
ear 'CONSTRAINT my_contacts_contact_id_fk' at line 2
mysql> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:20:21.063

约束本身就是数据库对象，所以当你运行时没有显示约束的完整描述并不让我感到惊讶 `desc [interests]`。试试`desc [my_contacts_contact_id_fk]`？

您应该能够执行`alter table [interests] drop constraint [my_contacts_contact_id_fk]`. 如果您在删除时遇到问题，您可以发布您的更改表 SQL 和来自服务器的响应吗？

# sql - 相当于 if 存在于 isqlplus 中？

> ID：15850737
> 
> 赞同：0
> 
> 时间：2013-04-06T12:07:23.847
> 
> 标签：sql

我是 sql 新手，想知道是否有办法在 isqlplus 中说这样的话？如果另一个表上存在某个值，我正在尝试插入一行值。

```
 IF EXISTS (SELECT ID FROM SOMETABLE WHERE ID = 1)
   BEGIN
   INSERT INTO ANOTHERTABLE (NBR, FNAME, LNAME) VALUES ( 2, 'John', 'Smith');
   END 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:23:39.407

您可以`WHERE EXISTS`在查询中添加

```
INSERT INTO ANOTHERTABLE (NBR, FNAME, LNAME) 
SELECT  2, 'John', 'Smith'
FROM DUAL
WHERE EXISTS (SELECT ID FROM SOMETABLE WHERE ID = 1) 
```

# java - Java serialization of very large objects

> ID：15850740
> 
> 赞同：4
> 
> 时间：2013-04-06T12:07:35.677
> 
> 标签：java, memory-management, serialization, kryo

I'm facing the following issue: I would like to serialize a very large object (several hundreds of MB in memory) to a file. As I understood that Kryo is one of the best serialization libraries out there, I've been using this to serialize my object:

 `````
 OutputStream fOutStream = new FileOutputStream(ParamsProvider.STORAGE_HH_FILENAME);
    Output out = new Output(fOutStream);
    kryo.writeObject(out, data);
    out.close();
    fOutStream.close(); 
````  `This generates an OutOfMemory exception: I guess that the entire object is first serialized in memory before being written to file.

Hence my question: is there a way / library to serialize an entire object while it is written to file per chunks?

I would like to avoid the workaround of decomposing the object in smaller elements before serializing as:

*   I would like the serialization implementation to be independent of the data object structure
*   My object contains multiple references to the same objects. I suspect that if I serialize those elements independently, the serializer will instantiate them as different objects (consuming even more memory)

**UPDATE:** In the meanwhile I implemented a serialization approach where the different elements of the very large object are serialized one by one and this does indeed avoid the OutOfMemory exception.

However I'm afraid that with this approach I will loose advantage (in terms of memory footprint) of multiple references to a same object (i.e. those references will have their own instance of the object). Any idea on this?

New code snippet (where, for instance, field1 contains references to same objects than field2):

 `````
 OutputStream fOutStream = new FileOutputStream(ParamsProvider.STORAGE_HH_FILENAME);
            Output out = new Output(fOutStream);

            kryo.writeObject(out, data.field1);
            kryo.writeObject(out, data.field2);
(...)
            kryo.writeObject(out, data.field50);
            out.close();
            fOutStream.close(); 
````  `Any hint / help would be greatly appreciated! Thanks, Tom````

# c# - 如何获取在asp.net中发生错误的pageurl表单

> ID：15850752
> 
> 赞同：1
> 
> 时间：2013-04-06T12:08:44.743
> 
> 标签：c#, asp.net, web-config

如何获取asp.net中发生错误的pageurl。
我只需要找不到的页面网址。这是我的自定义错误的 web.config 代码

```
<customErrors mode="On"  defaultRedirect="ErrorPage.aspx?handler=customErrors%20section%20-%20Web.config">
      <error statusCode="404" redirect="ErrorPage.aspx?msg=404&amp;handler=customErrors%20section%20-%20Web.config"/>
 </customErrors> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:42:36.803

您可以创建一个 HttpModule 来捕获所有错误，并且比查找导致 404 的 url 做更多的事情。您还可以捕获 500 个错误并做任何您想做的事情。

```
public class ErrorModule : IHttpModule
{
    public void Init(HttpApplication context)
    {
        context.Error += context_Error;
    }

    void context_Error(object sender, EventArgs e)
    {
        var error = HttpContext.Current.Server.GetLastError() as HttpException;
        if (error.GetHttpCode() == 404)
        {
            //use web.config to find where we need to redirect
            var config = (CustomErrorsSection) WebConfigurationManager.GetSection("system.web/customErrors");

            context.Response.StatusCode = 404;

            string requestedUrl = HttpContext.Current.Request.RawUrl;
            string urlToRedirectTo = config.Errors["404"].Redirect;
            HttpContext.Current.Server.Transfer(urlToRedirectTo + "&errorPath=" + requestedUrl);
        }
    }
} 
```

现在您需要在 web.config 文件的 httpModules 部分注册它：

```
<httpmodules>
    …
    <add name="ErrorModule" type="ErrorModule, App_Code"/>
</httpmodules> 
```

在你的`ErrorPage.aspx`你可以从查询字符串中获取 url：

```
protected void Page_Load(object sender, EventArgs e)
{
    string url = Request["errorPath"];
} 
```

# php - PayPal IPN：（PHP）发送自定义字段

> ID：15850760
> 
> 赞同：0
> 
> 时间：2013-04-06T12:09:16.800
> 
> 标签：php, codeigniter, paypal, paypal-ipn

我正在使用 CodeIgniter 创建一个页面，用户可以在其中注册我的俱乐部正在组织的慈善活动。

注册页面接受姓名/dob/电话号码等信息，并询问用户是否要在线或当日付款。单击提交按钮将信息发送到同一页面，运行表单验证，将信息插入数据库（包括时间戳）并检查用户是否选择在线支付。如果是这样，用户将被重定向到 PayPal 捐赠按钮***URL***以完成他们的付款。

我的问题是，如何通过 URL 发送 PayPal 自定义字段？我尝试将 &custom=whatever 附加到按钮 URL（其中“whatever”是新的数据库行 ID 和时间戳），但这在使用沙盒帐户完成捐赠后不起作用。

国际网络：

```
public function ipn()
{
    // STEP 1: Read POST data

    // reading posted data from directly from $_POST causes serialization 
    // issues with array data in POST
    // reading raw POST data from input stream instead. 
    $raw_post_data = file_get_contents('php://input');
    $raw_post_array = explode('&', $raw_post_data);
    $myPost = array();
    foreach($raw_post_array as $keyval) 
    {
        $keyval = explode ('=', $keyval);
        if(count($keyval) == 2)
        {
            $myPost[$keyval[0]] = urldecode($keyval[1]);
        }
    }

    // read the post from PayPal system and add 'cmd'
    $req = 'cmd=_notify-validate';
    if(function_exists('get_magic_quotes_gpc')) 
    {
        $get_magic_quotes_exists = true;
    } 
    foreach($myPost as $key => $value) 
    {        
        if($get_magic_quotes_exists == true && get_magic_quotes_gpc() == 1) 
        { 
            $value = urlencode(stripslashes($value)); 
        } 
        else 
        {
            $value = urlencode($value);
        }
        $req .= "&$key=$value";
    }

    // STEP 2: Post IPN data back to paypal to validate

    $ch = curl_init('https://www.sandbox.paypal.com/cgi-bin/webscr');
    curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
    curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: Close'));

    // In wamp like environments that do not come bundled with root authority certificates,
    // please download 'cacert.pem' from "http://curl.haxx.se/docs/caextract.html" and set the directory path 
    // of the certificate as shown below.
    // curl_setopt($ch, CURLOPT_CAINFO, dirname(__FILE__) . '/cacert.pem');
    if(!($res = curl_exec($ch))) 
    {
        // error_log("Got " . curl_error($ch) . " when processing IPN data");
        curl_close($ch);
        exit;
    }
    curl_close($ch);

    // STEP 3: Inspect IPN validation result and act accordingly    

    if(strcmp($res, "VERIFIED") == 0) 
    {
        // PAYMENT VALIDATED & VERIFIED! 
        $custom = explode('_', $_POST['custom']);
        $reg_id = $custom[0];
        $date_registered = $custom[1];

        $query = $this->db->query('SELECT date_registered FROM registrations WHERE id=' . $reg_id);
        $array = $query->result_array();
        if($array['date_registered'] == $date_registered)
        {
            $data = array(
                'has_payed' => 1
            );
            $this->db->where('id', $reg_id);
            $this->db->update('registrations', $data);      
        }           
    }  
    elseif(strcmp($res, "INVALID") == 0) 
    {  
        // do whatever
    }           
} 
```

请注意，我需要它来更新数据库的“has_payed”字段，这需要在提交注册页面时发送行 ID。

注册控制器：

```
// check payment online
if($this->input->post('pay_online') == 1) 
{
    // redirect to paypal depending on route
    switch($route)
    {
        case '80':
        case '40':
            // €20 for over 16s
            if($age >= 16)
            {
                redirect('https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=H3PFP5GGN2X5J&custom=' . urlencode($reg_id . '_' . $sql['date_registered']));
            }
            // €10 for anyone under 16
            else 
            {
                redirect('a different button URL');
            }
            break;
        case '15':
            // €15 for family
            redirect('a different button URL');
            break;
    }
} 
```

上面的代码可以正常工作，例如，当我提交具有适当值的表单时（即执行 80 公里或 40 公里路线，并且超过 16 岁），我被重定向到按钮 URL。当我在 PayPal 页面完成付款时，数据库中的“has_payed”字段没有按应有的方式更新（请参阅 IPN 页面）。

另外，请注意，我的沙盒卖家帐户中显然启用了 IPN。

我已经搜索了几个小时来解决这个问题，但找不到任何东西。也许我忽略了一些简单的事情！我会很感激任何帮助。

谢谢！

* * *

**更新**

我现在不是将用户重定向到 PayPal 按钮 URL，而是将他们重定向到一个带有`<form>`代码的 HTML 页面，以及一个在加载页面时自动提交表单的 Javascript。这工作正常，但是当用户捐赠时，数据库字段仍然没有更新。

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" id="paypal_form" method="post" target="_top">
    <input type="hidden" name="cmd" value="_s-xclick">
    <input type="hidden" name="hosted_button_id" value="H3PFP5GGN2X5J">
    <input type="hidden" name="notify_url" value="#IPN URL#" />
    <input type="hidden" name="custom" value="<?php echo urlencode($reg_id . '_' . $sql['date_registered']); ?>">
    <input type="image" src="https://www.sandbox.paypal.com/en_US/GB/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal – The safer, easier way to pay online.">
    <img alt="" border="0" src="https://www.sandbox.paypal.com/en_GB/i/scr/pixel.gif" width="1" height="1">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:02:08.053

您可以在发送到 PayPal 的按钮代码中传递变量“custom”。然后，这将通过 IPN POST 发送回您的系统。然后，您应该能够从那里抓取它并执行您需要的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T21:28:04.067

当然，问题很简单。

**在 config.php 中启用**了CSRF 保护，导致 IPN 无法工作。禁用它可以解决问题。

# c++ - win32 项目的错误 C2146

> ID：15850770
> 
> 赞同：0
> 
> 时间：2013-04-06T12:10:17.813
> 
> 标签：c++, winapi, visual-c++, mfc

```
void CMainWindow::OnPaint ()
{
    CPaintDC dc (this);

    CRect rect;
    GetClientRect (&rect);

    dc.DrawText (_T ("Hello, MFC"), -1, &rect,DT_SINGLELINE ¦ DT_CENTER ¦ DT_VCENTER);
} 
```

我无法找出上述简单代码中出了什么问题。每当我编译我的代码时，它都会给我以下错误：

```
1>c:\users\e543925.pacrim1\desktop\vc++\test\test\test.cpp(38) : error C2146: syntax error : missing ')' before identifier '¦'
1>c:\users\e543925.pacrim1\desktop\vc++\test\test\test.cpp(38) : error C2059: syntax error : ')' 
```

请帮忙 ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T12:11:22.580

`¦`不是同一个字符`|`。你需要`|`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:12:48.633

你不是说`|` 没有`¦`吗？这是区别。将其更改为：

```
dc.DrawText (_T ("Hello, MFC"), -1, &rect,DT_SINGLELINE | DT_CENTER | DT_VCENTER); 
```

# grails - Fields internationalization

> ID：15850771
> 
> 赞同：0
> 
> 时间：2013-04-06T12:10:34.523
> 
> 标签：grails, internationalization

I need to make an internationalized (English and Arabic) application in grails, but I am facing some problems, for instance I got a domain named Students got the below fields: view plaincopy to clipboardprint?

Note: Text content in the code blocks is automatically word-wrapped

```
class Students  
{  
  String firstName  
  String lastName  
} 
```

In the views I want the above fields to be shown according to the language that the user selected in the welcome page.

I already made the part of language selection, but how the another part can be achieved?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:48:33.620

They are several different ways to handle internationalization.

For example by creating a sub class to wrap your fields:

```
class StudentFields
{  
  String firstName  
  String lastName  
} 
```

And then add 2 references (one for each locale):

```
class Students  
{  
  StudentFields english
  StudentFields arabic
} 
```

Then you can access both languages using:

```
StudentsInstance.english.firstname 
```

and

```
StudentsInstance.arabic.firstname 
```

You can create a custom Tag to handle the logic (switching between english / arabic depending on the current locale) for your GSP.

# android - 如何将谷歌图表图形转换为android中的图像？

> ID：15850772
> 
> 赞同：1
> 
> 时间：2013-04-06T12:10:43.517
> 
> 标签：android, charts, bitmap

我想将我用谷歌图表 api 制作的折线图转换为图像。我该怎么办？我在网上没有找到任何可以帮助的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:24:25.377

尝试将您的谷歌图表转换为位图并将您的图像设置为您的图像视图。

例如：

```
Bitmap bitmap = loadChart("your google image url"); 
```

和 loadChart 方法是

```
private Bitmap loadChart(String urlRqs) {
        Bitmap bm = null;
        InputStream inputStream = null;

        try {
            inputStream = OpenHttpConnection(urlRqs);
            bm = BitmapFactory.decodeStream(inputStream);
            inputStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }

        return bm;
    } 
```

并且`OpenHttpConnection`是

```
private InputStream OpenHttpConnection(String strURL) throws IOException {

        InputStream is = null;
          URL url = new URL(strURL);
          URLConnection urlConnection = url.openConnection();

          try{
           HttpURLConnection httpConn = (HttpURLConnection)urlConnection;
           httpConn.setRequestMethod("GET");
           httpConn.connect();

           if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {
            is = httpConn.getInputStream(); 
           }
          }catch (Exception ex){
              Log.e("###","",ex);
          }

        return is;
    } 
```

最后，您可以使用以下代码将位图设置为图像视图背景。

```
image.setImageBitmap(bitmap); 
```

尝试一下。我希望这能帮到您。

# jquery - jquery last() for multiple elements

> ID：15850777
> 
> 赞同：1
> 
> 时间：2013-04-06T12:11:08.177
> 
> 标签：jquery, css

I have a markup like this

```
 <ul class = "main_nav">
    <li>
        <ul class = "sub_menu">
            <li>hello</li>
            <li>world</li>
            <li>English</li>
        </ul>
    </li>
    <li>
        <ul class = "sub_menu">
            <li>hello</li>
            <li>world</li>
            <li>English</li>
        </ul>
    </li>
    <li>
        <ul class = "sub_menu">
            <li>hello</li>
            <li>world</li>
            <li>English</li>
        </ul>
    </li>
</ul> 
```

Now I have given `border bottom` each `li` inside `sub_menu`, but it is coming all the lis I dont want to see border bottom for last one so I have used jquery script like this:

```
$('.sub_menu > li').last().css('border', '0'); 
```

but it is effective for only last one.
How can I remove border-bottom for last `li` of each section

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T12:14:33.720

```
$('.sub_menu > li:last-child').css('border', '0'); 
```

`:last-child`伪元素选择每个父子组中的最后一个元素，而不是所有匹配的元素中的最后一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T12:19:38.353

不需要 jquery 只需在 CSS 中使用 :last-child 选择器来关闭最后一个元素的边框

```
.sub_menu > li {
    border-bottom: solid black 1px;
}

.sub_menu > li:last-child {
    border: none;
} 
```

编辑：正如 Praveen 评论的那样，`:last-child`仅 IE8 不支持`:first-child`

因此，您总是可以`.last`在每个子菜单的最后一项中添加一个类，并使用此 CSS 规则而不是上面的带有 :last-child 伪选择器的规则

```
<li class='last'>English</li>

.sub_menu > li.last {
    border: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T12:12:52.367

```
$('.sub_menu').each(function() {
    $(this).find('li:last').css('border','0');
}); 
```

There. :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T12:13:44.187

尝试这个：

```
$('.sub_menu').each(function() {
    $(this).find('li').last().css('border', '0');
}); 
```

**[演示](http://jsfiddle.net/LTcDF/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T12:15:33.393

为什么不使用`.each()`函数？

```
$( ".sub_menu" ).each( function() {
    $( this ).children( "li" ).last().css( 'border', '0' );
} ); 
```

您实际上可以使用不同的方式执行相同的操作：

```
$( ".sub_menu > li:last-child " ).css( 'border', '0' ); 
```

此外，在 CSS 中：

```
.sub_menu > li:last-child {border: 0;} 
```

**注意：** CSS 方法在 IE 8 及以下版本中不起作用。

# objective-c - 相同的功能，都执行，没有声音

> ID：15850790
> 
> 赞同：0
> 
> 时间：2013-04-06T12:11:48.520
> 
> 标签：objective-c, xcode, audio

我用谷歌搜索了这个问题，但找不到类似的案例。

我已经使用本教程播放 testSound.mp3 - 在 iPad 模拟器上点击按钮时的文件：http: [//mobileorchard.com/easy-audio-playback-with-avaudioplayer/](http://mobileorchard.com/easy-audio-playback-with-avaudioplayer/)

如果 playSound-Method 在我的 ViewController.m 中，但不在我的 Sound.m 中（它具有相同的方法），它会以这种方式工作（它播放声音）。代码被执行（NSLog 说：“Sound.m playSound executed”），但根本没有声音。

我真的很感激这里的一些帮助，我想我完全被困住了...... :(

最好的问候， - 茶壶

// ViewController.h

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>
#import "Sound.h"

@interface ViewController : UIViewController {

    AVAudioPlayer *audioPlayer;

}

- (IBAction)pressButton:(id)sender;
- (void)playSound: (NSString*) soundFile volume : (NSInteger) volume repeats : (NSInteger) repeats;

@end 
```

// ViewController.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading thea view, typically from a nib.

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)pressButton:(id)sender {

    NSLog (@"Method: pressButton");

    [self playSound: @"testSound.mp3" volume: 2 repeats: 2 url : url]; //It works!

    Sound *tempSound = [[Sound alloc] init];
    [tempSound playSound: @"testSound.mp3" volume: 2 repeats: 2]; // Doesn't work. -> Says "Sound.m playSound executed", but there is no Sound.

}

- (void)playSound: (NSString*) soundFile volume : (NSInteger) volume repeats : (NSInteger) repeats {

    NSLog(@"ViewControler playSound");

    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    audioPlayer.numberOfLoops = -1;

    if (audioPlayer == nil){
        NSLog([error description]);
        NSLog(@"ViewController.m playSound NOT executed");
    }
    else{
        [audioPlayer play];
        NSLog(@"ViewController.m playSound executed");
    } 

}

@end 
```

// 声音.h

```
#import <Foundation/Foundation.h>
#import <AVFoundation/AVFoundation.h>

@interface Sound : NSObject {
    AVAudioPlayer *audioPlayer;
}

- (void) playSound: (NSString*) soundFile volume : (NSInteger) volume repeats : (NSInteger) repeats;

@end 
```

// 声音.m

```
#import "Sound.h"

@implementation Sound

- (void)playSound: (NSString*) soundFile volume : (NSInteger) volume repeats : (NSInteger) repeats {

    NSLog(@"Sound playSound");

    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    audioPlayer.numberOfLoops = -1;

    if (audioPlayer == nil){
        NSLog([error description]);
        NSLog(@"Sound.m playSound NOT executed");
    }
    else{
        [audioPlayer play];
        NSLog(@"Sound.m playSound executed");
    } 

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:35:50.157

您的代码中有一些不一致之处：`playSound:`有一个`NSString`参数，但`AVAudioPlayer`在该方法内部使用`NSURL`. 然后你设置`numberOfLoops = -1`（这意味着无限重复）而不是`numberOfLoops = repeat`.

但**主要问题**是这里（假设您使用“自动引用计数”进行编译）

```
Sound *tempSound = [[Sound alloc] init];
[tempSound playSound: @"testSound.mp3" volume: 2 repeats: 2]; 
```

离开时`tempSound`对象被*释放*，`pressButton:`因为不再存在对该对象的强引用。

如果您将实例变量（或属性）添加`sound`到视图控制器类，并分配给它

```
sound = [[Sound alloc] init];
[sound playSound: @"testSound.mp3" volume: 2 repeats: 2]; 
```

那么它应该按预期工作。

***或者，***您可以通过在对象内部维护“自引用”来防止`Sound`对象被过早释放，该对象仅在声音播放完毕时才被删除：

```
@interface Sound () <AVAudioPlayerDelegate>
@property(strong, nonatomic) AVAudioPlayer *audioPlayer;
@property(strong, nonatomic) Sound *selfRef;
@end

@implementation Sound

- (void)playSound:(NSString *)soundFile volume:(NSInteger)volume repeats:(NSInteger)repeats
{
    NSLog(@"Sound playSound");
    NSURL *soundURL = [[NSBundle mainBundle] URLForResource:soundFile withExtension:nil];
    NSError *error;
    self.audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:soundURL error:&error];
    if (self.audioPlayer == nil) {
        NSLog(@"%@", [error description]);
        NSLog(@"Sound.m playSound NOT executed");
    } else{
        self.audioPlayer.numberOfLoops = repeats;
        self.audioPlayer.delegate = self;
        [self.audioPlayer play];
        self.selfRef = self; // self reference to avoid deallocation
        NSLog(@"Sound.m playSound executed");
    }
}

- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag
{
    self.selfRef = nil; // remove self reference
}
@end 
```

当然，你不应该用“无限重复”来做到这一点！

# php - 无法停止 PHP、插入 HTML 和 JS，然后重新启动 PHP

> ID：15850793
> 
> 赞同：0
> 
> 时间：2013-04-06T12:12:05.037
> 
> 标签：php, javascript, html

我正在尝试将一些 HTML 和 JS 插入现有的动态 PHP 页面。

我觉得`switch()`声明将是我最好的选择。

请允许我解释一下；

我在 PHP 页面中嵌入了一个 switch 语句，当满足某个条件时，我将包含一个 include()。

这是我的代码的样子。（缩写）

在显示页面的我的 PHP 文件中；

```
switch($color)
{
case "Red":
include ('red_widgets.php');
break;
} 
```

然后 red_widgets.php 看起来像；

```
?>
<div class="Shadow">
<script language="JavaScript" src="AScriptThatDisplaysWidgets"></script></div>
<?php 
```

但是当我运行页面时，我得到`"?>"`的是输出而不是 JS。

这对你们中的一些人来说可能很明显，但如果你能与我分享我做错了什么，我将不胜感激，我提前感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:15:54.253

您不需要“停止 PHP”。只需更新适当的 PHP/JS/HTML 文件，下次您从服务器请求它时，它会将更新的文件/脚本输出传送到您的浏览器。

至于没有收到正确的输出，您的代码中有错误。

文件是否被and`include`包围？`<?php``?>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T12:20:03.083

包含时，您处于 HTML 模式。只需省略前导`?>`和尾随`<?php`，就可以了。

# escaping - 如何通过内容页面中的转义键隐藏模式弹出框

> ID：15850799
> 
> 赞同：0
> 
> 时间：2013-04-06T12:12:40.913
> 
> 标签：escaping, master-pages, modalpopupextender, content-pages

我想通过按转义键隐藏模式弹出框。我找到了一种适用于包含正文标签的页面（不是内容页面）的方法；使用下面的函数，以及 body 标签的 onkeypress 事件。

```
 function catchEsc(e) {
            var kC = (window.event) ?    // MSIE or Firefox?
                 event.keyCode : e.keyCode;
            var Esc = (window.event) ?
                27 : e.DOM_VK_ESCAPE // MSIE : Firefox
            if (kC == Esc) {
                var mpu = $find('ModalPopupExtender1');
                mpu.hide();
            }
        } 
```

问题是我正在使用内容页面，如果没有正文标签，我不知道，我该怎么做。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:33:56.113

此代码也适用于内容占位符，无需在代码后面添加处理程序

```
 function pageLoad(sender, args) {
        if (!args.get_isPartialLoad()) {
            //  add our handler to the document's
            //  keydown event
            $addHandler(document, "keydown", onKeyDown);
        }
    }

    function onKeyDown(e) {
        if (e && e.keyCode == Sys.UI.Key.esc) {
            $find('popPAlert').hide();
            $find('ModalPopupThemeView').hide();
            $find('AlPopUp').hide();
            $find('Mod_Error').hide();
            $find('Mod_preview').hide();
        }
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:17:15.123

我自己解决了这个问题，如下所示：

*   在母版页中，我将 body 标记设为服务器控件（id="myBody" runat="server"）。

*   在内容页面（aspx）中，

    *   我将模态弹出窗口的 ClientIDMode 设置为静态，
    *   我添加了 javascript 函数 catchEsc(e)：

```
 function catchEsc(e) {
            var kC = (window.event) ?    // MSIE or Firefox?
                 event.keyCode : e.keyCode;
            var Esc = (window.event) ?
                27 : e.DOM_VK_ESCAPE // MSIE : Firefox
            if (kC == Esc) {
                var mpu = $find('ModalPopupExtender1');
                mpu.hide();
            }
        } 
```

*   最后在内容页面的代码后面，我将下面的代码添加到page_Load：

```
 HtmlGenericControl body = 
              (HtmlGenericControl)this.Page.Master.FindControl("myBody");
    body.Attributes.Add("onkeypress", "catchEsc(event)"); 
```

它奏效了！

# java - 并发 hashMap putIfAbsent 方法功能

> ID：15850803
> 
> 赞同：2
> 
> 时间：2013-04-06T12:13:01.623
> 
> 标签：java, concurrenthashmap

我是 Java 世界的新手，正在探索并发哈希映射，在探索并发哈希映射 API 时，我发现了 putifAbsent() 方法

```
public V putIfAbsent(K paramK, V paramV)
  {
    if (paramV == null)
      throw new NullPointerException();
    int i = hash(paramK.hashCode());
    return segmentFor(i).put(paramK, i, paramV, true);
  } 
```

现在请告知它的功能是什么，我们什么时候需要它，如果可能的话，请用一个简单的小例子来解释。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-06T12:20:57.140

A `ConcurrentHashMap` is designed so that it can be used by a large number of concurrent `Thread`s.

Now, if you used the methods provided by the standard `Map` interface you would probably write something like this

```
 if(!map.containsKey("something")) {
      map.put("something", "a value");
  } 
```

This looks good and seems to do the job but, **it is not thread safe**. So you would then think, "Ah, but I know about the `synchronized` keyword" and change it to this

```
 synchronized(map) {
      if(!map.containsKey("something")) {
          map.put("something", "a value");
      }
  } 
```

Which fixes the issue.

Now what you have done is *locked the entire map* for *both read and write* while you check if the key exists and then add it to the map.

This is a very crude solution. Now you could implement your own solution with double checked locks and re-locking on the key etc. but that is *a lot* of *very complicated* code that is very prone to bugs.

So, instead you use the solution provided by the JDK.

The `ConcurrentHashMap` is a clever implementation that divides the `Map` into regions and locks them individually so that you can have concurrent, thread safe, reads and writes of the map without external locking.

Like all other methods in the implementation `putIfAbsent` locks the key's region and not the whole `Map` and therefore allows other things to go on in other regions in the meantime.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:21:44.657

ConcurrentHashMap is used when several threads may access the same map concurrently. In that case, implementing putIfAbsent() manually, like below, is not acceptable:

```
if (!map.containsKey(key)) {
    map.put(key, value);
} 
```

Indeed, two threads might execute the above block in parallel and enter in a race condition, where both first test if the key is absent, and then both put their own value in the map, breaking the invariants of the program.

The ConcurrentHashMap thus provides the `putIfAbsent()` operation which makes sure this is done in an atomic way, avoiding the race condition.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T13:01:54.423

想象一下，我们需要一个惰性初始化的命名单例 bean 的缓存。下面是一个基于 ConcurrentHashMap 的无锁实现：

```
ConcurrentMap<String, Object> map = new ConcurrentHashMap<>();

<T> T getBean(String name, Class<T> cls) throws Exception {
    T b1 = (T) map.get(name);
    if (b1 != null) {
        return b1;
    }
    b1 = cls.newInstance();
    T b2 = (T) map.putIfAbsent(name, b1);
    if (b2 != null) {
        return b2;
    }
    return b1;
} 
```

请注意，它解决了与双重检查锁定相同的问题，但没有锁定。

# r - 读入 R 时，将 Plink PED 文件中的缺失值 (-9) 转换为 NA

> ID：15850807
> 
> 赞同：3
> 
> 时间：2013-04-06T12:13:44.870
> 
> 标签：r, bioinformatics

我有两个文件：`pedigree.ped`和`pedigree.map`. [Plink](http://pngu.mgh.harvard.edu/~purcell/plink/)可以使用这两种文件格式。

就我而言，我想将它们与 R 一起使用，并且我认为我必须转换为 R 格式。例如：Plink 中的缺失值与 R 中的缺失值不同。

我如何转换这两个文件以在 R 中使用它们？如何将缺失值更改为 NA？

我的数据样本：

**.ped 文件：**

```
1 1 0 0 1.02  A A   G G   0 0
1 2 0 0 0.51  T G   C C   A A
2 3 1 2 -9    0 0   A G   T T
... 
```

第一列是 id_family，第二列是 id_individual，第三和第四列是 id_individual 的父亲和母亲，第五列是数量性状（-9：缺失值），其余列是基因型（SNPs 等位基因）。列的缺失值为 0，但数量性状为 -9。

**地图文件：**

```
1 rs1 0 100000
1 rs2 0 100100
1 rs3 0 100200 
```

第一列是 id 染色体（1-22、X、Y 或 0，如果未放置），第二列是 rs# 或 snp 标识符，第三列是遗传距离（摩根），第四列是碱基对位置（bp 单位）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T15:36:36.943

假设 ped 文件中的数据被读入 R 数据帧 -

```
> my.dataframe
  V1 V2 V3 V4    V5 V6 V7 V8 V9 V10 V11
1  1  1  0  0  1.02  A  A  G  G   0   0
2  1  2  0  0  0.51  T  G  C  C   A   A
3  2  3  1  2 -9.00  0  0  A  G   T   T 
```

现在检查每列的无效/缺失值并分配 NA。例如，取第 5 列 -

```
my.dataframe[my.dataframe[,5] == -9, 5] <- NA
> my.dataframe
  V1 V2 V3 V4   V5 V6 V7 V8 V9 V10 V11
1  1  1  0  0 1.02  A  A  G  G   0   0
2  1  2  0  0 0.51  T  G  C  C   A   A
3  2  3  1  2   NA  0  0  A  G   T   T 
```

同样将 NA 分配给所需的条目。

注意：R 函数以特殊方式处理 NA。查看各自的函数参数。需要注意的一些相关关键字 - `na.rm`, `na.pass`,`na.fail`等`na.omit`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-25T12:10:18.610

将 ped 文件读入 R 时定义 NA 值，例如：

```
read.table(text = "
1   1   0   0   1.02    A A G G 0 0
1   2   0   0   0.51    T G C C A A
2   3   1   2   -9  0 0 A G T T",
           na.strings = c("NA", "-9"), sep = "\t")

# result
#   V1 V2 V3 V4   V5  V6  V7  V8
# 1  1  1  0  0 1.02 A A G G 0 0
# 2  1  2  0  0 0.51 T G C C A A
# 3  2  3  1  2   NA 0 0 A G T T 
```

另外，使用[plink](http://pngu.mgh.harvard.edu/~purcell/plink/reference.shtml#options)`--tab`时使用选项，因此列的分隔符是**制表**符，基因型之间的空格是**空格**。

 ****> --tab 用制表符分隔 --recode 和 --recode12****

# java - Java MouseListener 并不总是有效

> ID：15850808
> 
> 赞同：1
> 
> 时间：2013-04-06T12:13:45.143
> 
> 标签：java, swing, awt, jdialog, mouselistener

我觉得奇怪的是，在我的项目中，mouselistener 并不总是被听到。有没有其他人遇到过这个？还是我做错了什么？我有时必须点击它几次才能打开它。我确实在两次点击之间等待，看看这是否是性能问题。

```
JButton btnPin = new JButton("Pin");
btnPin.addMouseListener(new MouseAdapter() {
    public void mouseClicked(MouseEvent arg0) {
        if(staffPinDialog == null || staffPinDialog.isShowing() == false)
            staffPinDialog = new StaffPinDialog(idClicked);                 
    }
}); 
```

StaffPinDialog 是一个 JDialog，其中引用已在别处创建。idClicked 也总是被初始化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T12:15:21.667

您不应该使用 MouseListener 来检测按钮点击。请改用 ActionListener。

这也将具有能够使用键盘单击按钮的额外优势。

# codenameone - HTML 和网络浏览器

> ID：15850810
> 
> 赞同：0
> 
> 时间：2013-04-06T12:14:07.017
> 
> 标签：codenameone

我尝试在我的代码中使用 html 页面，因为我从 kichensink 应用程序中找到了方法，我正在使用相同的代码和相同的 page.html 文件应用程序在模拟器上工作但在设备上不工作。在设备上我有一个空白屏幕。下面是我的代码。请帮助我。

```
void ShowForm()
{
    Form f = new Form("testweb");
    Container cnt = new Container(new BorderLayout());
    cnt = createDemo();
    f.setLayout(new BorderLayout());
    f.addComponent(BorderLayout.CENTER, cnt);
    f.show();
}

public Container createDemo() {
    Container cnt = new Container(new BorderLayout());
    final WebBrowser wb = new WebBrowser();
    if(wb.getInternal() instanceof BrowserComponent) {
        Button btn = new Button("Add");
        final TextArea content = new TextArea();
        Container north = new Container(new BorderLayout());
        north.addComponent(BorderLayout.CENTER, content);
        north.addComponent(BorderLayout.EAST, btn);
        cnt.addComponent(BorderLayout.NORTH, north);
        content.setHint("Add to web document");
        btn.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                ((BrowserComponent)wb.getInternal()).execute("fnc('" + content.getText() + "');");
            }
        });
        ((BrowserComponent)wb.getInternal()).setBrowserNavigationCallback(new BrowserNavigationCallback() {
            public boolean shouldNavigate(String url) {
                if(url.startsWith("http://sayhello")) {
                    // warning!!! This is not on the EDT and this method MUST return immediately!
                    Display.getInstance().callSerially(new Runnable() {
                        public void run() {
                            ((BrowserComponent)wb.getInternal()).execute("fnc('this was written by Java code!');");
                        }
                    });
                    return false;
                }
                return true;
            }
        });
    }

    cnt.addComponent(BorderLayout.CENTER, wb);
    wb.setURL("jar:///page.html");
    return cnt;
} 
```

嗨，我对容器做了一些更改 setlayout 并添加到另一个容器，容器可滚动为 true，表单可滚动为 false，但现在它在设备上给我错误，错误是：“网页不可用”page.html 未找到。而 page.html 已经放置在 src 中， .res 文件和模拟器上的应用程序工作正常。

问候，珍妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:48:54.450

您不能使边框布局可滚动，包括嵌套可滚动和滚动原生+代号同步的一个小部件可能不是一个好主意。

您在哪个设备上遇到问题？对于某些用例，Android 上的浏览​​器组件存在问题，现已修复。

# xcode - 使用 png 的对象 3D 旋转

> ID：15850812
> 
> 赞同：0
> 
> 时间：2013-04-06T12:14:26.363
> 
> 标签：xcode, animation, memory, uiimageview

我想在 Xcode 中实现对象 3D 旋转，而不是使用 openGL，而是使用一组预渲染的 png。这将允许在多边形和灯光效果方面更复杂的 3D 动画。到目前为止，我已经实现了构建包含 UIScrollView 的 UIView 的子类，并且在 scrollViewDidScroll 委托方法中，它根据 UIScrollView 的内容偏移量来擦洗 360 个 png 图像。除了一些主要问题之外，这正是我想要实现的目标。

我尝试了三种不同的方法来交换图像。

方法 1：当视图被初始化时，我将所有 UIImages 放在 UIImageViews 和屏幕上的 alpha = 0 中，然后在 scrollViewDidScroll 上将相应的 imageView 的 alpha 设置为 1

方法 2：当视图被初始化时，我将所有 UIImages 放在一个数组中，并在屏幕上放置一个 UIImageView。在 scrollViewDidScroll 我将数组中的相应图像设置为 UIImageView 的图像

方法 3：当视图被初始化时，我将所有 imageNames 保存在一个数组中，并在屏幕上放置一个 UIImageView。在 scrollViewDidScroll 中，我使用数组中的名称为相应索引创建一个 UIImage 并将其设置为我的 UIImageView 的图像

这三个都非常消耗内存，最终会导致内存警告或崩溃。虽然方法三的内存成本略低，但它也慢得多。

有没有什么方法可以在不使用 openGL 的情况下高效快速地实现这种内存？

编辑：Theodore Gray 在他的 Elements 应用程序中以一种很棒的方式实现了这一点，我不知道如何。见这里：[http ://www.youtube.com/watch?v=nHiEqf5wb3g&feature=player_embedded](http://www.youtube.com/watch?v=nHiEqf5wb3g&feature=player_embedded)

# at-command - AT 命令 - USSD

> ID：15850819
> 
> 赞同：14
> 
> 时间：2013-04-06T12:15:09.320
> 
> 标签：at-command, ussd

我正在使用[Minicom](https://en.wikipedia.org/wiki/Minicom)（Linux 的串行端口软件）与我的 GSM 调制解调器进行交互。实际上，现在我正在尝试将我的移动提供商的一项服务与 AT 命令一起使用。

在这里我说，我想看看我的平衡：

```
AT+CUSD=1,*555*87*1234#

OK

+CUSD: 1,"this service will deduct you 5cent from your balance, to continue please enter 1",15 
```

所以，我在这里发送了“1”，但什么也没发生，会话关闭了。

```
AT+CUSD=1,1

OK 
```

什么也没发生，但会议结束了。

用普通手机，输入1后，我会得到我当前的余额。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-06T13:04:58.180

命令的格式是`AT+CUSD=[<n>[,<str>[,<dcs>]]]`，第二个参数 ,`<str>`是一个字符串，应该用双引号括起来。例如

```
AT+CUSD=1,"*555*87*1234#"
AT+CUSD=1,"1" 
```

有关一般 AT 命令处理的更多详细信息，请参见[27.007](http://www.3gpp.org/ftp/Specs/html-info/27007.htm)`AT+CUSD`和[V.250](http://www.itu.int/rec/T-REC-V.250-200307-I/en)。

* * *

如果您的手机对此做出的`OK`响应`AT+CUSD=1,1`非常糟糕，那么它应该给出`ERROR`. V.250 对此非常清楚：

> 字符串常量的开头和结尾应以双引号字符为界

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-12-24T01:42:02.857

```
AT+CUSD=1,"your_service_code",15 
```

所以对于你的情况，

```
AT+CUSD=1,"*555*87*1234#",15 
```

并且不要忘记最后的 15。这个问题帮助我解决了这个问题。

# c# - 创建后可以移动图形吗？

> ID：15850825
> 
> 赞同：0
> 
> 时间：2013-04-06T12:15:52.260
> 
> 标签：c#, windows-phone-7, xaml

我正在尝试使用 c# 为我的 xaml 应用程序创建形状，最好的方法是在 0,0 创建一个形状，绘制线条，然后将形状移动到它的位置。

是否可以？是我还是 Path、PathGeometry 或 PathFigure 没有移动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:20:02.417

您可以将形状移动到另一个位置，方法是通过代码或在 xaml 本身中将位置设置为另一个点。但是如果你想要一个动画，然后参考一些教程。我建议您使用 Blend 试用所有动画。

关于如何制作动画的一些链接：http: [//dotnetapp.com/blog/2012/08/26/how-to-create-simple-animation-in-your-windows-phone-app/](http://dotnetapp.com/blog/2012/08/26/how-to-create-simple-animation-in-your-windows-phone-app/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T12:19:07.790

为了移动 UI 元素，您需要设置新的边距厚度，或者需要将其放在画布上并设置其画布位置。如果您希望它动画，请执行上述操作，但将其放入计时器滴答事件中。

# vba - MsgBox 后的类型不匹配错误

> ID：15850833
> 
> 赞同：2
> 
> 时间：2013-04-06T12:16:21.197
> 
> 标签：vba, excel

我的数据如下。

***更新的问题***

```
Sub Solution()
  Dim shData As Worksheet
  Set shData = Sheets("Sheet1")    'or other reference to data sheet
  Dim coll As Collection, r As Range, j As Long
  Dim myArr As Variant
  Dim shNew As Worksheet

  shData.Activate

  'get unique values based on Excel features
  Range("a1").AutoFilter

  Set coll = New Collection

  On Error Resume Next

  For Each r In Range("A1:A10")
    coll.Add r.Value, r.Value
  Next r

  On Error GoTo 0
  'Debug.Print coll.Count

  For j = 1 To coll.Count
    MsgBox coll(j)
    myArr = coll(j)
  Next j

  Range("a1").AutoFilter

  Dim i As Long

  For i = 0 To UBound(myArr)
    shData.Range("$A$1").AutoFilter Field:=1, Criteria1:=myArr(i), _
      Operator:=xlAnd
    On Error Resume Next
    Sheets(myArr(i)).Range("A1").CurrentRegion.ClearContents

    If Err.Number = 0 Then
      Range("A1").CurrentRegion.Copy Sheets(myArr(i)).Range("A1")
    Else
      Set shNew = Sheets.Add(After:=Sheets(Sheets.Count))
      shData.Range("A1").CurrentRegion.Copy shNew.Range("A1")
      shNew.Name = myArr(i)
      Err.Clear
    End If
 Next i

 'removing filter in master sheet
 shData.Range("a1").AutoFilter

 End Sub 
```

当我在宏上面运行时，我不知道它为什么在`Type Mismatch Error`之后给出`MsgBox coll(j)`，只是我想将数据存储在 Array 中并传递该数据，这里我使用`For Each r In Range("A1:A10")`Where `A10`length is static 如何找到最后写入的列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T03:33:33.597

在尝试回答这个问题之前，我想写下我认为您正在努力完成的事情；当您确认这是您正在尝试做的事情时，我会尽力帮助您获得工作代码来实现它。这通常是通过注释来完成的，但到目前为止，注释的线程有点脱节，而且代码相当复杂......

1.  您在工作表中有数据（称为“sheet1” - 虽然它可能是别的东西）
2.  第一列包含某些可能重复的值
3.  您不知道可能有多少列......但您想知道
4.  您尝试在 A 列中查找每个唯一值（将其称为“键值”），并将其（一次一个）显示在消息框中。这看起来更像是一个调试步骤，而不是最终程序的实际功能。
5.  然后打开 A 列的自动过滤器；仅选择与某个值匹配的行
6.  使用与工作表名称相同的值，您可以查看这样的工作表是否存在：如果存在，则清除其内容；如果没有，那么您在工作簿的末尾创建它（并给它键的名称）
7.  您在 sheet1 的 A 列中选择具有相同（键）值的所有行，并将它们复制到名称等于您过滤的 A 列中的值的工作表
8.  您想为 A 列中的每个唯一（键）值重复步骤 5-8
9.  完成所有操作后，我相信您（至少）比 A 列中的键值多一张（您还拥有初始数据表）；但是，您不会删除任何“多余的”工作表（使用其他名称）。每个工作表将只有与 sheet1 的当前内容相对应的数据行（任何早期数据都已删除）。
10.  在操作过程中，您可以打开和关闭自动过滤；您希望最终禁用自动过滤器。

请确认这确实是您正在尝试做的事情。如果您可以了解 A 列中值的格式，那将很有帮助。我怀疑有些事情可以比你现在做的更有效率。最后，我确实想知道以这种方式组织数据的全部目的是否可能是以特定方式组织数据，并可能进行进一步的计算/图表等。Excel（VBA）内置了各种功能数据提取的工作更容易 - 这种数据重新排列对于完成特定工作是必要的，这种情况很少见。如果您愿意对此发表评论...

以下代码完成上述所有操作。请注意使用 for`For Each`和函数/子例程来处理某些任务（`unique`、`createOrClear`和`worksheetExists`）。这使得顶层代码更容易阅读和理解。另请注意，错误捕获仅限于我们检查工作表是否存在的一小部分 - 对我来说它运行没有问题；如果发生任何错误，请告诉我工作表中的内容，因为这可能会影响发生的情况（例如，如果列中的单元格`A`包含工作表名称中不允许的字符等`/\!`。另请注意，您的代码正在删除“ CurrentRegion”。根据您要实现的目标，“UsedRange”*可能*会更好......

```
Option Explicit

Sub Solution()
  Dim shData As Worksheet
  Dim nameRange As Range
  Dim r As Range, c As Range, A1c As Range, s As String
  Dim uniqueNames As Variant, v As Variant

  Set shData = Sheets("Sheet1")  ' sheet with source data
  Set A1c = shData.[A1]          ' first cell of data range - referred to a lot...
  Set nameRange = Range(A1c, A1c.End(xlDown)) ' find all the contiguous cells in the range

  ' find the unique values: using custom function
  ' omit second parameter to suppress dialog
  uniqueNames = unique(nameRange, True)

  Application.ScreenUpdating = False ' no need for flashing screen...

  ' check if sheet with each name exists, or create it:
  createOrClear uniqueNames

  ' filter on each value in turn, and copy to corresponding sheet:
  For Each v In uniqueNames
    A1c.AutoFilter Field:=1, Criteria1:=v, _
      Operator:=xlAnd
    A1c.CurrentRegion.Copy Sheets(v).[A1]
  Next v

  ' turn auto filter off
  A1c.AutoFilter

  ' and screen updating on
  Application.ScreenUpdating = True

End Sub

Function unique(r As Range, Optional show)
  ' return a variant array containing unique values in range
  ' optionally present dialog with values found
  ' inspired by http://stackoverflow.com/questions/3017852/vba-get-unique-values-from-array
  Dim d As Object
  Dim c As Range
  Dim s As String
  Dim v As Variant

  If IsMissing(show) Then show = False

  Set d = CreateObject("Scripting.Dictionary")

  ' dictionary object will create unique keys
  ' have to make it case-insensitive
  ' as sheet names and autofilter are case insensitive
  For Each c In r
    d(LCase("" & c.Value)) = c.Value
  Next c

  ' the Keys() contain unique values:
  unique = d.Keys()

  ' optionally, show results:
  If show Then
    ' for debug, show the list of unique elements:
    s = ""
    For Each v In d.Keys
      s = s & vbNewLine & v
    Next v
    MsgBox "unique elements: " & s
  End If

End Function

Sub createOrClear(names)
  Dim n As Variant
  Dim s As String
  Dim NewSheet As Worksheet

  ' loop through list: add new sheets, or delete content
  For Each n In names
    s = "" & n ' convert to string
    If worksheetExists(s) Then
      Sheets(s).[A1].CurrentRegion.Clear ' UsedRange might be better...?
    Else
      With ActiveWorkbook.Sheets
        Set NewSheet = .Add(after:=Sheets(.Count))
        NewSheet.Name = s
      End With
    End If
  Next n

End Sub

Function worksheetExists(wsName)
' adapted from http://www.mrexcel.com/forum/excel-questions/3228-visual-basic-applications-check-if-worksheet-exists.html
  worksheetExists = False
  On Error Resume Next
  worksheetExists = (Sheets(wsName).Name <> "")
  On Error GoTo 0
End Function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T12:58:35.657

当您向集合添加内容时，密钥需要是一个字符串，因此请使用：

```
coll.Add r.Value, CStr(r.Value) 
```

代替：

```
coll.Add r.Value, r.Value 
```

您仍在分配`coll(j)`给`Variant` *不是数组*的 a 。你需要：

```
ReDim myArr(1 to coll.Count) 
```

在你的 for 循环之前，然后在循环中：

```
myArr(j) = coll(j) 
```

# android - 在eclipse android java中编程谷歌日历API

> ID：15850834
> 
> 赞同：2
> 
> 时间：2013-04-06T12:16:22.887
> 
> 标签：android, google-calendar-api

所以我的问题是我不确定如何在经过 2 周的研究、阅读众多网站并遵循谷歌步骤后开始将谷歌日历编程到我的应用程序中。我相信这是由于糟糕且部分过时的谷歌日历 api 文档造成的。

我做了什么：

*   为安卓安装了谷歌插件
*   在谷歌帐户中向谷歌注册项目
*   去谷歌控制台并创建客户端ID
*   添加了我的项目名称和 SHA1 指纹号码

那么现在我应该可以使用谷歌日历服务了吗？我无法让我的物理 android 设备被 eclipse 4.2 识别，这是一个单独的问题。连接后我应该看到什么？如何操作谷歌日历？我应该添加“日历视图”对象还是应该显示实际日历？我真的很困惑，并没有在网上找到任何最新的东西，这是一个很好的例子。没有人确切地描述过这个 api 有多么有用，以及是否显示日历或您应该使用哪种代码。我真的想要有过去经验和最新知识的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:08:16.237

只是想我会为那些真正陷入困境并且不知道从哪里开始的人回答这个问题，因为那里的指示非常糟糕。

1.  首先转到此链接 -> [http://developers.google.com/google-apps/calendar/](http://developers.google.com/google-apps/calendar/)并按照所有说明使用 google 设置您的项目。
2.  一旦您进入“配置您的应用程序”，您可能会因为代码不起作用而被卡住
3.  [下载 mercurical](https://www.mercurial-scm.org/downloads)，以便您可以下载示例 google 项目，例如日历。
4.  通过在开始菜单中键入“cmd”并按回车键打开命令窗口（对于 Windows）
5.  导航到此链接 - > [http://code.google.com/p/google-api-java-client/source/checkout?repo=samples](http://code.google.com/p/google-api-java-client/source/checkout?repo=samples)
6.  然后复制并粘贴`hg clone //code.google.com/p/google-api-java-client.samples/`到终端窗口中。等待它完成下载（需要几分钟）
7.  查看您将文件下载到的路径：例如，`c:\Users\>`
8.  转到文件夹中的该目录，您将拥有示例应用程序。

您必须将其导入 Eclipse 或您喜欢的环境。现在至少你可以看到代码并从那里弄清楚如何使用它！只是希望某个地方的某个人能够通过这些简单的步骤开始一个好友。

# html - 在引导程序中有一个子下拉菜单的下拉菜单

> ID：15850836
> 
> 赞同：0
> 
> 时间：2013-04-06T12:16:45.667
> 
> 标签：html, twitter-bootstrap, drop-down-menu, menu

我是引导程序的新手，我的下拉菜单中有一个子下拉菜单的问题。我尝试运行此代码，但似乎无法正常工作。

```
<div class="tabbable mainMenu visible-phone btn-group">
                <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                Menu
                <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                    <li><a href="#">Submenu 1</a></li>
                    <li>
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        Menu Down
                        <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li>Submenu 1</li>
                        </ul>
                    </li>
                </ul>
            </div> 
```

当我单击`Menu`它时，它会显示下拉菜单，然后当我单击它时，`Menu Down`它没有显示其子下拉菜单，但下拉菜单消失了。

我的代码做错了吗？任何帮助将不胜感激..提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:01:15.457

我认为您必须将类“.dropdown-submenu”添加到要保留子菜单的“li”中。如下图所示：

```
<li class="dropdown-submenu">
    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
         Menu Down
         <span class="caret"></span>
    </a>
    <ul class="dropdown-menu">
         <li>Submenu 1</li>
    </ul>
</li> 
```

希望这可以帮助。

# c++ - 如果存在到 int 的转换运算符，则“'operator[]' 的重载不明确”

> ID：15850840
> 
> 赞同：14
> 
> 时间：2013-04-06T12:17:13.390
> 
> 标签：c++

我正在尝试`[]`为一个类实现类似矢量和类似地图的运算符。但我从我的编译器（g++ 和 clang++）收到错误消息。发现它们仅在该类还具有将运算符转换为整数类型时才会发生。

现在我有两个问题。首先是我不知道为什么编译器无法区分`[](const std::string&)`以及`[](size_t)`何时类具有转换运算符到整数。第二个......我需要转换和索引运算符。如何解决？

作品：

```
#include <stdint.h>
#include <string>

struct Foo
{
    Foo& operator[](const std::string &foo) {}
    Foo& operator[](size_t index) {}
};

int main()
{
    Foo f;
    f["foo"];
    f[2];
} 
```

不起作用：

```
#include <stdint.h>
#include <string>

struct Foo
{
    operator uint32_t() {}
    Foo& operator[](const std::string &foo) {}
    Foo& operator[](size_t index) {}
};

int main()
{
    Foo f;
    f["foo"];
    f[2];
} 
```

编译器错误：

```
main.cpp: In function 'int main()':
main.cpp:14:9: error: ambiguous overload for 'operator[]' in 'f["foo"]'
main.cpp:14:9: note: candidates are:
main.cpp:14:9: note: operator[](long int, const char*) <built-in>
main.cpp:7:7: note: Foo& Foo::operator[](const string&)
main.cpp:8:7: note: Foo& Foo::operator[](size_t) <near match>
main.cpp:8:7: note:   no known conversion for argument 1 from 'const char [4]' to 'size_t {aka long unsigned int}' 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-06T12:23:49.390

问题是你的类有一个转换运算符 to `uint32_t`，所以编译器不知道是否：

1.  从字符串文字构造 a`std::string`并调用接受 a 的重载`std::string`；
2.  将您的`Foo`对象转换为 an`uint32_t`并将其用作字符串文字的索引。

虽然选项 2 可能听起来令人困惑，但请考虑以下表达式在 C++ 中是合法的：

```
1["foo"]; 
```

这是因为内置的下标运算符是如何定义的。根据 C++11 标准的第 8.3.4/6 段：

> 除了已为类 (13.5.5) 声明的情况外，下标运算符 [] 的解释方式`E1[E2]`与`*((E1)+(E2))`. 由于适用于 + 的转换规则，如果`E1`是数组和`E2`整数，则`E1[E2]`指的是 的`E2`第 - 个成员`E1`。因此，尽管它的外观不对称，但**下标是一种可交换操作**。

因此，上述表达式`1["foo"]`等价于`"foo"[1]`，其计算结果为`o`。要解决歧义，您可以制作转换运算符`explicit`（在 C++11 中）：

```
struct Foo
{
    explicit operator uint32_t() { /* ... */ }
//  ^^^^^^^^
}; 
```

或者您可以保留该转换运算符，并`std::string`显式构造对象：

```
 f[std::string("foo")];
//    ^^^^^^^^^^^^     ^ 
```

或者，您可以添加接受 a 的下标运算符的进一步重载`const char*`，这将比上述任何一个更好的匹配（因为它不需要用户定义的转换）：

```
struct Foo
{
    operator uint32_t() { /* ... */ }
    Foo& operator[](const std::string &foo) { /* ... */ }
    Foo& operator[](size_t index) { /* ... */ }
    Foo& operator[](const char* foo) { /* ... */ }
    //              ^^^^^^^^^^^
}; 
```

另请注意，您的函数具有非 void 返回类型，但当前缺少一条`return`语句。这会在您的程序中注入**未定义的行为。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T12:24:08.923

问题是`f["foo"]`可以解决为：

1.  转换`"foo"`为`std::string`(be it `s`) 并`f[s]`调用`Foo::operator[](const std::string&)`.
2.  转换`f`为整数调用`Foo::operator int()`（be it `i`）并`i["foo"]`使用众所周知的事实，即内置`[]`运算符是可交换的。

两者都有一种自定义类型转换，因此存在歧义。

简单的解决方案是添加另一个重载：

```
Foo& operator[](const char *foo) {} 
```

现在，调用`f["foo"]`将调用新的重载而不需要任何自定义类型转换，因此歧义被打破。

注意：从 type `char[4]`(type type of `"foo"`) 到的转换`char*`被认为是微不足道的，不算数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T13:30:49.350

如其他答案所述，您的问题是`[]`默认情况下通勤 -与for`a[b]`相同，并且您的班级可转换为this 与转换为.`b[a]``char const*``uint32_t``char*``std::string`

我在这里提供的是一种“极具吸引力的重载”的方法，当您遇到这种问题时，尽管您认为应该调用重载，但它不会被调用。

所以这里`Foo`有一个“极具吸引力的超载” `std::string`：

```
struct Foo
{
  operator uint32_t() {return 1;}
  Foo& lookup_by_string(const std::string &foo) { return *this; }
  Foo& operator[](size_t index) {return *this;}
  template<
    typename String,
    typename=typename std::enable_if<
      std::is_convertible< String, std::string >::value
    >::type
  > Foo& operator[]( String&& str ) {
    return lookup_by_string( std::forward<String>(str) );
  }
}; 
```

我们在其中创建了一个独立的“按字符串查找”函数，然后编写一个模板来捕获*任何*可以转换为`std::string`.

因为它将用户定义的转换“隐藏”在模板的主体中`operator[]`，所以在检查匹配时不会发生用户定义的转换，因此这比其他需要用户定义的转换的操作（如`uint32_t[char*]`）更可取。实际上，这是一个比任何不完全匹配参数的重载“更有吸引力”的重载。

这可能会导致问题，如果您有另一个需要 a`const Bar&`并`Bar`转换为`std::string`的重载，则上述重载可能会让您感到惊讶并捕获传入的`Bar`内容——右值和非 const 变量`[]`都比`[const Bar&]`!

# php - 是否可以根据关系获得权限？

> ID：15850843
> 
> 赞同：0
> 
> 时间：2013-04-06T12:17:27.173
> 
> 标签：php, yii, authorization

Yii 中的权限系统——据我了解——就像内容管理系统中的不同角色：特定角色（例如版主、作者、管理员等）可以执行特定操作，也可以不执行特定操作。

然而，我想要的是不同的。我希望用户能够设置与他们有特定关系的人是否可以执行特定操作。例如，用户应该能够说只有他的朋友才能看到他的个人资料，或者企业可以说只有该企业的特定员工（例如，用户 ID 为 4）才能添加产品。

这可以使用 Yii 的授权系统，还是我需要实现自己的系统？

另外，作为一个附带问题，我想要的东西是否有一个名字，以便下次我不会写四行解释它？:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:07:51.187

你想要的确实有名字。它被称为[业务规则](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth#using-business-rules)。在您的情况下，您可以创建一个 RBAC 任务或操作`viewFriend`，并将其与业务规则相关联。在该规则中，您将检查当前访问者是否是您要显示其个人资料的用户的朋友。

您将在配置文件的查看操作中检查此权限。对于权限检查，您可以将参数传递给此规则。在您的情况下，这可能是您要查看的个人资料的用户 ID。

# ajax - 在模板和控制器中带有承诺访问结果的 ember ajax 调用

> ID：15850844
> 
> 赞同：0
> 
> 时间：2013-04-06T12:17:38.610
> 
> 标签：ajax, ember.js, promise

我正在调用服务器以通过 ajax 请求获取一些数据，并且我使用了一个承诺。虽然我的模板会在数据返回后自动更新，但我很不幸地访问了控制器中的数据，因为我不知道它的确切时间。

为了解决这个问题，我可以在控制器中进行额外的 ajax 调用以获取相同的数据，但这感觉很难看。有没有更好的方法来知道何时访问控制器中的数据？作为一种解决方法，我尝试调用需要数据的函数，`didInsertElement`但这并没有解决它。

```
App.ActiveDataSet = Ember.Object.extend({
  progress: 0
});

App.ActiveDataSet.reopenClass({
  findAll: function(project_id) {
    var result = [];
    $.ajax({
      url: '/active_data_sets.json',
      type: 'GET',
      data: {'project_id': project_id}
    }).then(function(response) {
        response.active_data_sets.forEach(function(newset) {
          result.addObject(App.ActiveDataSet.create(newset));
        });
    });

    return result;
  }
});

App.MapviewShowRoute = Ember.Route.extend({
  setupController: function(controller, model) {
    this.controllerFor('activedatasetIndex').set('content', App.ActiveDataSet.findAll(model.id));
  }
});

App.MapviewShowController = Ember.ObjectController.extend({
  needs: ['activedatasetIndex'],

  content: null,
  dataSets: [],

  createDataSets: function() {

    // create the datasets
    for (var counter = 0; counter < this.get('controllers.activedatasetIndex.content').length; counter++) {
      alert(dataSets[counter].ds.name);
    }
  }

});

App.MapviewShowView = Ember.View.extend({
  map: null,

  didInsertElement: function() {
    var map = null;

    var myOptions = {
      zoom: 8,
      center: new google.maps.LatLng(52.368892, 4.875183),
      mapTypeControl: true,
      mapTypeControlOptions: {
        style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
      },
      navigationControl: true,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(this.$('#map_canvas').get(0), myOptions);

    this.set('map', map); //save for future updations

    var h = $(window).height(),
        offsetTop = 60; // Calculate the top offset

    $('#map_canvas').css('height', (h - offsetTop));

    // get the datasets
    this.controller.createDataSets();
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:11:08.953

您是否尝试过继续承诺链：

```
App.ActiveDataSet.reopenClass({
  findAll: function(project_id) {
    return $.ajax({
      url: '/active_data_sets.json',
      type: 'GET',
      data: {'project_id': project_id}
    }).then(function(response) {
        var result = [];
        response.active_data_sets.forEach(function(newset) {
          result.addObject(App.ActiveDataSet.create(newset));
        });
        return result;
    });
  }
});

App.MapviewShowRoute = Ember.Route.extend({
  setupController: function(controller, model) {
    App.ActiveDataSet.findAll(model.id).then(function(content) {
      this.controllerFor('activedatasetIndex').set('content', content);
    });
  }
}); 
```

# apache - 由于可能的配置错误，请求超出了 10 个内部重定向的限制

> ID：15850845
> 
> 赞同：54
> 
> 时间：2013-04-06T12:17:41.297
> 
> 标签：apache, cakephp

我的 CakePHP 应用程序出现以下错误：

由于可能的配置错误，请求超出了 10 个内部重定向的限制。如有必要，使用“LimitInternalRecursion”增加限制。使用 'LogLevel debug' 获取回溯。，referer：[http ://projectname.dev/](http://projectname.dev/)

我在根文件夹中的 .htaccess，如下所示：

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

并在应用程序文件夹中：

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule    ^$    webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
</IfModule> 
```

在 webroot 文件夹中：

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /projectname
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
</IfModule> 
```

我正在关注本教程：

[http://book.cakephp.org/2.0/en/getting-started.html](http://book.cakephp.org/2.0/en/getting-started.html)

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-04-06T12:26:56.250

我刚刚在这里找到了解决问题的方法：

[https://willcodeforcoffee.com/cakephp/2007/01/31/cakephp-error-500-too-many-redirects.html](https://willcodeforcoffee.com/cakephp/2007/01/31/cakephp-error-500-too-many-redirects.html)

webroot 中的 .htaccess 文件应如下所示：

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
</IfModule> 
```

而不是这个：

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /projectname
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-03-22T14:11:06.177

```
//Just add 

RewriteBase /
//after 
RewriteEngine On

//and you are done....

//so it should be 

RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [QSA,L] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-22T10:28:16.300

我通过 ~~http://willcodeforcoffee.com/2007/01/31/cakephp-error-500-too-many-redirects/~~解决了这个问题， 只是取消注释或添加：

```
RewriteBase /
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L] 
```

到您的 .htaccess 文件

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-13T04:05:19.790

我在调试 PHP [header](http://php.net/header) () 函数时出现了这个错误：

```
header('Location: /aaa/bbb/ccc'); // error 
```

如果我使用相对路径，它可以工作：

```
header('Location: aaa/bbb/ccc'); // success, but not what I wanted 
```

但是，当我使用绝对路径时`/aaa/bbb/ccc`，它会给出确切的错误：

> 由于可能的配置错误，请求超出了 10 个内部重定向的限制。如有必要，使用“LimitInternalRecursion”增加限制。使用“LogLevel debug”获取回溯。

似乎标头函数在内部重定向而根本不使用 HTTP，这很奇怪。经过一番测试和尝试，我找到了在header()之后添加exit的解决方案：

```
header('Location: /aaa/bbb/ccc');
exit; 
```

它工作正常。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-11T08:58:55.700

按照 cakePHP 官方文档，.htaccess 应该是这样的：

[https://book.cakephp.org/2/en/installation/url-rewriting.html](https://book.cakephp.org/2/en/installation/url-rewriting.html)

```
 <IfModule mod_rewrite.c>
        RewriteEngine On
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteRule ^(.*)$ index.php [QSA,L]
    </IfModule> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-05T02:01:41.537

只需删除内部 .htaccess 文件中的重写基础即可修复我的问题。就像在我的根目录中有一个 htaccess 文件只是链接到我的根文件夹中的公共目录中的一个索引页面然后我有另一个 htaccess 文件将每个请求重写到同一个公共文件夹中的索引页面，并删除 RewriteBase 修复矿 。如下所示

这是根目录中的第一个 .htaccess 文件

# c++ - Portaudio 无法使用 macports GCC 4.8 进行编译（-arch 命令选项无法识别/错误的寄存器名称错误）

> ID：15850849
> 
> 赞同：0
> 
> 时间：2013-04-06T12:18:23.240
> 
> 标签：c++, gcc, macports, portaudio

我使用了很多 C++11 特性，所以我使用 macports gcc/g++ 编译我的 C++ 代码。

我无法让 Portaudio 使用 macports gcc 4.8 进行编译。使用稳定版本 (pa_stable_v19_20111121.tgz)，使用 gcc-mp-4.8 作为编译器运行 configure 会导致：

```
bash-3.2$ make
mkdir lib
mkdir -p src/common src/hostapi/alsa src/hostapi/asihpi src/hostapi/asio src/hostapi/coreaudio src/hostapi/dsound src/hostapi/jack src/hostapi/oss src/hostapi/wasapi src/hostapi/wdmks src/hostapi/wmme src/os/unix src/os/win
touch lib-stamp
/bin/sh ./libtool --mode=compile /opt/local/bin/gcc-mp-4.8 -c -std=c99 -O2 -Wall -pedantic -pipe -fPIC -DNDEBUG -DPA_LITTLE_ENDIAN -I./include -I./src/common -I./src/os/unix -Werror -arch i386 -arch ppc -arch x86_64 -arch ppc64 -isysroot /Developer/SDKs/MacOSX10.5.sdk -mmacosx-version-min=10.3  -DPACKAGE_NAME=\"\" -DPACKAGE_TARNAME=\"\" -DPACKAGE_VERSION=\"\" -DPACKAGE_STRING=\"\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\".libs/\" -DSIZEOF_SHORT=2 -DSIZEOF_INT=4 -DSIZEOF_LONG=8 -DHAVE_NANOSLEEP=1 -DPA_USE_COREAUDIO=1 src/common/pa_allocation.c -o src/common/pa_allocation.lo
libtool: compile:  /opt/local/bin/gcc-mp-4.8 -c -std=c99 -O2 -Wall -pedantic -pipe -fPIC -DNDEBUG -DPA_LITTLE_ENDIAN -I./include -I./src/common -I./src/os/unix -Werror -arch i386 -arch ppc -arch x86_64 -arch ppc64 -isysroot /Developer/SDKs/MacOSX10.5.sdk -mmacosx-version-min=10.3 -DPACKAGE_NAME=\"\" -DPACKAGE_TARNAME=\"\" -DPACKAGE_VERSION=\"\" -DPACKAGE_STRING=\"\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\".libs/\" -DSIZEOF_SHORT=2 -DSIZEOF_INT=4 -DSIZEOF_LONG=8 -DHAVE_NANOSLEEP=1 -DPA_USE_COREAUDIO=1 src/common/pa_allocation.c  -fno-common -DPIC -o src/common/.libs/pa_allocation.o
gcc-mp-4.8: error: unrecognized command line option '-arch'
gcc-mp-4.8: error: unrecognized command line option '-arch'
make: *** [src/common/pa_allocation.lo] Error 1 
```

使用最新的每日版本（4 月 5 日），我收到一堆“错误的寄存器名称”错误：

```
/bin/sh ./libtool --mode=compile /opt/local/bin/gcc-mp-4.8 -c -std=c99 -O2 -Wall -pedantic -pipe -fPIC -DNDEBUG -DPA_LITTLE_ENDIAN -I./include -I./src/common -I./src/os/unix -Werror -arch i386 -arch x86_64 -isysroot /Developer/SDKs/MacOSX10.5.sdk -mmacosx-version-min=10.3  -DPACKAGE_NAME=\"\" -DPACKAGE_TARNAME=\"\" -DPACKAGE_VERSION=\"\" -DPACKAGE_STRING=\"\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\".libs/\" -DSIZEOF_SHORT=2 -DSIZEOF_INT=4 -DSIZEOF_LONG=8 -DHAVE_NANOSLEEP=1 -DPA_USE_COREAUDIO=1 src/common/pa_allocation.c -o src/common/pa_allocation.lo
libtool: compile:  /opt/local/bin/gcc-mp-4.8 -c -std=c99 -O2 -Wall -pedantic -pipe -fPIC -DNDEBUG -DPA_LITTLE_ENDIAN -I./include -I./src/common -I./src/os/unix -Werror -arch i386 -arch x86_64 -isysroot /Developer/SDKs/MacOSX10.5.sdk -mmacosx-version-min=10.3 -DPACKAGE_NAME=\"\" -DPACKAGE_TARNAME=\"\" -DPACKAGE_VERSION=\"\" -DPACKAGE_STRING=\"\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\".libs/\" -DSIZEOF_SHORT=2 -DSIZEOF_INT=4 -DSIZEOF_LONG=8 -DHAVE_NANOSLEEP=1 -DPA_USE_COREAUDIO=1 src/common/pa_allocation.c  -fno-common -DPIC -o src/common/.libs/pa_allocation.o
{standard input}:5:bad register name `%r13'
{standard input}:7:bad register name `%rsi'
{standard input}:8:bad register name `%r12'
{standard input}:10:bad register name `%rdx'
... 
```

（更多错误的寄存器名称错误如下）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T10:43:50.060

您的错误注册消息来自 CFLAGS 包含 -arch i386 和 -arch x86_64 的事实。第一个被考虑在内......因此所有x86_64特定寄存器的错误寄存器错误。一个简单的解决方法是编辑 Makefile 并删除 CFLAGS 和 SHARED_FLAGS 变量中的 -arch i386。我正在使用 GCC 4.7 编译器，并注意到我还必须删除 -Werror 标志（警告错误），因为以下警告：

变量 'err' 设置但未使用 [-Werror=unused-but-set-variable]

我现在正在寻找如何修复配置。

# android - Android，显示没有 HTML 标签的数据

> ID：15850851
> 
> 赞同：0
> 
> 时间：2013-04-06T12:19:11.900
> 
> 标签：android, html, sqlite

我有带有包含 HTML 标签的记录的 sqlite 表。我想以正确的格式在我的应用程序中显示它们，以便用户只能看到实际结果而不是标签。有谁知道该怎么做？

这是我使用的代码，也是单个记录的示例：

代码：

```
try {

        Cursor cursor = dictionary.getDictionaryDatabase().rawQuery("SELECT * FROM definition WHERE data_id='"+word[0].toLowerCase().trim()+"'", null);

        //Cursor cursor = dictionary.getDictionaryDatabase().rawQuery("SELECT catgram FROM adresse_definition WHERE index_nom_adresse=word[0].toLowerCase().trim()", null);

        //Cursor cursor = dictionary.getDictionaryDatabase().rawQuery("SELECT catgram FROM adresse_definition JOIN definition ON adresse_definition.definition = definition.data_id WHERE index_nom_adresse='" + word[0].toLowerCase().trim()+"'", null);
        //Cursor cursor = dictionary.getDictionaryDatabase().query("adresse_definition", null, "index_nom_adresse= '" + word[0].toLowerCase().trim() + "' or definition= '" + word[0].toUpperCase().trim() + "' ", null, null, null, null);
        cursor.moveToFirst();
        if (cursor.getCount() != 0) {

            if (word[1] == null || word[1].equals("English")) {
                translatedWord = cursor.getString(2);
            } else {
                translatedWord = cursor.getString(1);
            }
        } else {
            translatedWord = "The word is not in database";
        }
        cursor.close();
    } catch (SQLiteException sqle) {
        translatedWord = "The word is not in database";
    }

    dictionary.close(); 
```

记录：

```
<div class="art"><br /><a class="Ls" href="01682"> </a> <h1 class="Ad">bonjour </h1><span class="Ph"> [bɔ̃ʒur]</span><br /><span class="Cg"> nom masculin</span><table border="0"><tr><td align="left" valign="top" class="N"><span class="Cg">1.</span></td><td align="left" valign="top" class="Cg"> <span class="In"> [salutation - généralement]</span><a class="Ls2" href="30793ang2">&nbsp;</a><span class="Tr"> hello</span><br /><span class="In">[ - le matin]</span><a class="Ls2" href="3443ang2">&nbsp;</a><span class="Tr"> good morning</span><br /><span class="In">[ - l'après-midi]</span><a class="Ls2" href="3440ang2">&nbsp;</a><span class="Tr"> good afternoon</span><br /> <a class="Ls3" href="221818fra2">&nbsp;</a><span class="L2" id="816343">vous lui donnerez le bonjour <small class="Ob">ou</small> vous lui direz bonjour de ma part</span><a class="Ls2" href="159366ang2">&nbsp;</a><span class="Tr2"> say hello for me</span><br /> <a class="Ls3" href="221819fra2">&nbsp;</a><span class="L2" id="816344">vous avez le bonjour de Martin</span><a class="Ls2" href="159367ang2">&nbsp;</a><span class="Tr2"> Martin sends his love</span><br /> <a class="Ls3" href="221820fra2">&nbsp;</a><span class="L2" id="816345">bien le bonjour chez vous</span><a class="Ls2" href="159368ang2">&nbsp;</a><span class="Tr2"> regards to everybody (back home)</span></td></tr></table><table border="0"><tr><td align="left" valign="top" class="N"><span class="Cg">2.</span></td><td align="left" valign="top" class="Cg"> <span class="Mt"> (familier) </span><span class="In"> [exprime la difficulté]</span><br /> <a class="Ls3" href="221821fra2">&nbsp;</a><span class="L2" id="816346">pour le faire aller à l'école, bonjour!</span><a class="Ls2" href="159369ang2">&nbsp;</a><span class="Tr2"> no way can you get him to go to school!</span><br /> <a class="Ls3" href="221822fra2">&nbsp;</a><span class="L2" id="816347">je n'ai pas fait de gym depuis un mois, bonjour les courbatures!</span><a class="Ls2" href="159370ang2">&nbsp;</a><span class="Tr2"> I haven't done any exercise for a month, I'm going to ache, let me tell you!</span></td></tr></table><br /><br /></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:25:22.427

这可能会对您有所帮助，如果您从那时起正确`Result`，`Sqlite`您可以显示数据，例如，确保响应正确。

```
TextView  txtweb = (TextView) findViewById(R.id.txtweb);
txtweb.setText(Html.fromHtml(mresult)); 
```

# facebook - 有什么方法可以获取我的朋友或朋友的朋友的聊天数据？

> ID：15850852
> 
> 赞同：-1
> 
> 时间：2013-04-06T12:19:12.103
> 
> 标签：facebook, facebook-graph-api, chat, facebook-chat

我想获取我的朋友或关注我页面的人的聊天记录数据。有什么办法可以得到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T12:24:10.783

您无法为关注您页面的人获取它，但如果您有一个 Facebook 应用程序，那么您只能为已授权您的应用程序并已授予`read_mailbox`您权限的人/用户获取消息（聊天）应用程序。

# asp.net - SelectedIndexChanged 事件中的 Gridview FindControl

> ID：15850855
> 
> 赞同：1
> 
> 时间：2013-04-06T12:19:39.633
> 
> 标签：asp.net, vb.net

我`TemplateField`在我的 ASP GridView 中创建了一个，现在我想为 gridview 中的复选框编写一个小逻辑。我正在尝试`FindControl`代码没有成功，我使用了这些组合......

```
Dim chkChosen As CheckBox = 
'GridView1.Rows(e.RowIndex).FindControl("Checkbox1")
'DirectCast(GridView1.Rows(e.RowIndex).FindControl("Checkbox1"), CheckBox).Value
'chkChosen = (CheckBox)row.FindControl("Checkbox1") 
```

我对它们进行了评论，因为我将这三者结合使用但没有成功。他们都给了我同样的错误......“RowIndex 不是 SystemArg 的成员......”。所有这一切都在`SelectedIndexChanged`受保护的潜艇之下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:00:42.040

这应该适用于您的情况：

```
Dim chkChosen As CheckBox = CType(GridView1.SelectedRow.FindControl("Checkbox1"), CheckBox) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T12:54:15.913

您可以通过 Gridview 选定的行索引获取..lyk this

```
 GridViewRow row = GridView1.Rows[GridView1.SelectedIndex];

cHeckbox chk=row.FindControl("chk"); 
```

# json - Newtonsoft.Json：JsonConvert.DeserializeObject - 没有结果没有错误

> ID：15850856
> 
> 赞同：0
> 
> 时间：2013-04-06T12:19:50.870
> 
> 标签：json, serialization

我之前已经成功使用 Newtonsoft.Json 反序列化 JSON，但我遇到了这个简单示例的问题 - 请参见下文 - 反序列化方法不会失败，但它不会使用预期值实例化“ServiceResponse”类。调试器显示：ServiceResponse.StatusInfo = null，ServiceResponse.Email = null，ServiceResponse.JobId = 0

```
// Generated by Xamasoft JSON Class Generator
// http://www.xamasoft.com/json-class-generator

using System;
using System.Collections.Generic;
using Newtonsoft.Json;
using Newtonsoft.Json.Linq;
using Example.fmeResponseJsonTypes;

namespace Example.fmeResponseJsonTypes
{

    public class StatusInfo
    {

        [JsonProperty("mode")]
        public string Mode { get; set; }

        [JsonProperty("status")]
        public string Status { get; set; }
    }

    public class ServiceResponse
    {

        [JsonProperty("statusInfo")]
        public StatusInfo StatusInfo { get; set; }

        [JsonProperty("email")]
        public string Email { get; set; }

       [JsonProperty("jobID")]
        public int JobID { get; set; }
    }

}

namespace Example
{

    public class fmeResponse
    {

        [JsonProperty("serviceResponse")]
        public ServiceResponse ServiceResponse { get; set; }

        public void Deserialize()
        {
           string res = "{\"serviceResponse\": {\"statusInfo\": {\"mode\": \"async\",\"status\": \"success\"},\"email\": \"tor.nielsen@xxx.com\",\"jobID\": 73}}";

           ServiceResponse serviceResponse = null;

           try
           {
               serviceResponse = JsonConvert.DeserializeObject<ServiceResponse>(res);
           }
           catch (Exception e)
           {
               throw new Exception("Error: Deserialization of [" + res + "] failed! \nDetails: " + e.Message + "\nTrace: " + e.StackTrace);
           }

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:53:04.557

试试这个，请添加 JsonProperty ，我很着急。

如果您不确定 JsonString 所需的类，请尝试[json2csharp](http://json2csharp.com/)。它有时真的很有帮助。

```
using System;
using System.Collections.Generic;
using Newtonsoft.Json;
using Newtonsoft.Json.Linq;
using Example.fmeResponseJsonTypes;

namespace Example.fmeResponseJsonTypes
{
public class StatusInfo
{
    public string mode { get; set; }
    public string status { get; set; }
}

public class ServiceResponse
{
    public StatusInfo statusInfo { get; set; }
    public string email { get; set; }
    public int jobID { get; set; }
}

public class RootObject
{
    public ServiceResponse serviceResponse { get; set; }
}

}

namespace Example
{

public class fmeResponse
{

    public RootObject RootObject { get; set; }

    public void Deserialize()
    {
        string res = "{\"serviceResponse\": {\"statusInfo\": {\"mode\": \"async\",\"status\": \"success\"},\"email\": \"tor.nielsen@xxx.com\",\"jobID\": 73}}";

        ServiceResponse serviceResponse = null;
        RootObject rootObject = null;

        try
        {
            rootObject = JsonConvert.DeserializeObject<RootObject>(res);
        }
        catch (Exception e)
        {
            throw new Exception("Error: Deserialization of [" + res + "] failed! \nDetails: " + e.Message + "\nTrace: " + e.StackTrace);
        }
    }
} 
```

# javascript - 未捕获的类型错误：对象# has no method 'setProperty' I am using the below code in the javascript text = LxmlHttp.responseText; parser = new DOMParser(); xmlDoc = parser.parseFromString(text, "application/xml"); xmlDoc.setProp 问问题 问问题 2013-04-06T12:20:19.560 966 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am using the below code in the javascript text = LxmlHttp.responseText; parser = new DOMParser(); xmlDoc = parser.parseFromString(text, "application/xml"); xmlDoc.setProperty('SelectionLanguage', 'XPath'); I am getting this error: Uncaught TypeError: Object #<Object> has no method 'setProperty' Please help me solve the issue. TIA.. Hi Felix, I have the below xml structure <?xml version="1.0"?> <response status="200"> <ns3:op xmlns="http://xxx.com/details/" xmlns:ns2="http://xxx.com/mgmt/" xmlns:ns3="http://xxx.com/list/"> <ns2:ntfs count="140"> <ns2:ntf> <ns2:Nid>4687807</ns2:Nid> </ns2:ntf> </ns2:ntfs> </ns3:op> </response> I have to read this in IE 7, IE 8 , IE 9 , FF, safari and chrome The namespace index may not be the same and might change. I need to parse the xml independent of the namespace and browser. I am trying to do this var xmlDoc = new DOMParser().parseFromString(....); xmlDoc.setProperty("SelectionNamespaces", 'xmlns:ns3="http://xxx.com/list/"'); xmlDoc.setProperty("SelectionLanguage", "XPath"); var op = xmlDoc.selectSingleNode("/response/ns3:op"); This works only in IE. Please let me know how can i parse the xml in all browsers. Constraints are database objects in themselves so it doesn't surprise me that the full description of the constraint is not shown when you run desc [interests]. Try desc [my_contacts_contact_id_fk]? You should be able to execute alter table [interests] drop constraint [my_contacts_contact_id_fk]. If you are having trouble dropping can you post your alter table SQL and the response from the server? javascript 4 1 回答 1 This answer is useful 1 这仅适用于 IE 是的。setProperty是 MSXML 中的一种专有方法（实际上我根本不知道 IE 确实支持 XPath）。 有关标准解决方案，请参阅MDN 的文章Using XPath，赞成document.evaluate. 您应该使用功能检测来检查它是否可用，如果不可用，则回退到您的document.selectSingleNode. 于 2013-04-06T20:25:34.160 回答 Related 1 php - 使用 jQuery 在 PHP 中插入 Select 标签 2 java - 在java中设置jLabel文本会引发异常 4 c# - 将数据表值分配给变量 2 c# - 如果这不等于？然后这样做 2 java - Java中文件中定义的绘制点 3 c - Char ** 用法和打印 3 android - Android imageview、缩放全屏和centerCrop 1 html - 在 Opera 和 Google Chrome 的无序列表中垂直对齐图像 3 segmentation-fault - strlen：地址越界导致分段错误 1 c++ - 从模板化基类模板化子类时出错 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15850860
> 
> 赞同：1
> 
> 时间：
> 
> 标签：javascript

I am using the below code in the javascript

```
text = LxmlHttp.responseText;
parser = new DOMParser();
xmlDoc = parser.parseFromString(text, "application/xml");
xmlDoc.setProperty('SelectionLanguage', 'XPath'); 
```

I am getting this error: `Uncaught TypeError: Object #<Object> has no method 'setProperty'`

Please help me solve the issue.

TIA..

Hi Felix, I have the below xml structure

```
<?xml version="1.0"?>
<response status="200">
  <ns3:op xmlns="http://xxx.com/details/" 
              xmlns:ns2="http://xxx.com/mgmt/" 
              xmlns:ns3="http://xxx.com/list/">
    <ns2:ntfs count="140">
      <ns2:ntf>
        <ns2:Nid>4687807</ns2:Nid>
      </ns2:ntf>
    </ns2:ntfs>
  </ns3:op>
</response> 
```

I have to read this in IE 7, IE 8 , IE 9 , FF, safari and chrome

The namespace index may not be the same and might change. I need to parse the xml independent of the namespace and browser.

I am trying to do this

```
var xmlDoc = new DOMParser().parseFromString(....);
xmlDoc.setProperty("SelectionNamespaces", 'xmlns:ns3="http://xxx.com/list/"');
xmlDoc.setProperty("SelectionLanguage", "XPath");
var op = xmlDoc.selectSingleNode("/response/ns3:op"); 
```

This works only in IE. Please let me know how can i parse the xml in all browsers.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:25:34.160

> 这仅适用于 IE

是的。[`setProperty`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms760290%28v=vs.85%29.aspx)是 MSXML 中的一种专有方法（实际上我根本不知道 IE 确实支持 XPath）。

有关标准解决方案，请参阅[MDN 的文章*Using XPath*](https://developer.mozilla.org/en-US/docs/Using_XPath)，赞成[`document.evaluate`](https://developer.mozilla.org/en-US/docs/DOM/document.evaluate). 您应该使用功能检测来检查它是否可用，如果不可用，则回退到您的[`document.selectSingleNode`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms757846%28v=vs.85%29.aspx).

# iphone - 旋转在 iOS6 中有效，但在 iOS5 中无效

> ID：15850862
> 
> 赞同：-2
> 
> 时间：2013-04-06T12:20:19.767
> 
> 标签：iphone, ios, orientation

我正在开发一个支持 iOS 5 和 6 的应用程序，它被设置为仅在横向模式下运行，这在 iOS 6 下运行良好 - 但是一旦我在 iOS 5 模拟器中运行它，完整的视图是一些在纵向模式下有点拉伸，即使模拟器变成横向 - 它只是视图......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:26:46.290

**iOS5**

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

     return  YES;
} 
```

**iOS6**

```
-(BOOL) shouldAutorotate{

    return YES;
} 
```

**注意**：如果您同时支持这两个版本，那么您应该添加[这两个方法](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)，它们将根据您在设备/模拟器上运行的版本被调用。

添加支持方向的方法是个好主意

```
- (NSUInteger)supportedInterfaceOrientations {    
    return UIInterfaceOrientationMaskLandscape ;
} 
```

# json - JSON 和 Node.js 查询字符串是否相同？

> ID：15850866
> 
> 赞同：11
> 
> 时间：2013-04-06T12:20:33.850
> 
> 标签：json, node.js

在 node.js 上，JSON 方法 (parse, stringify) 是否与 Query Sting 方法 (parse, stringify) 相同？

谢谢你。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-06T12:25:47.413

咱们试试吧：

```
var qs  = require('querystring');
var obj = { 'foo' : '1 + 2' };

console.log(qs.stringify(obj));
// result: foo=1%20%2B%202

console.log(JSON.stringify(obj));
// result: {"foo":"1 + 2"} 
```

所以，不，他们不是:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T12:28:32.520

会说话的名字。查询字符串方法返回适合在 URL 查询字符串中使用的字符串。即，它们是百分比转义的。这与 JSON 完全无关。

# javascript - 使用 testacular 开始测试时出错

> ID：15850868
> 
> 赞同：6
> 
> 时间：2013-04-06T12:20:40.513
> 
> 标签：javascript, node.js

我正在 64 位 Windows 7 系统上试用 angularjs 教程，因为从我在其主页上阅读的内容中我发现这个框架非常有趣。我是 node.js 的新手，没有 JavaScript 经验。

运行测试时，我收到以下错误。任何人都可以找出问题所在或给出一些提示如何确定吗？我有一个全新的节点安装并添加了 testacular

> npm install -g testacular

从控制台窗口上打印的内容来看效果很好。

所以这里是错误信息：

> PS C:\Users\xx\Documents\Angular\angular-phonecat> .\scripts\test.bat
> INFO [testacular]: Testacular 服务器在 http://localhost:9876/
> 启动 INFO [launcher]: 启动浏览器 Chrome
> 错误 [ testacular]: { [Error: spawn ENOENT] code: 'ENOENT', errno: 'ENOENT', syscall: 'spawn' }
> 错误：在 Process.ChildProcess._handle
>     的 errnoException (child_process.js:948:11)
>     处产生 ENOENT。 onexit (child_process.js:739:34)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-07T19:56:13.010

简短回答： **将环境变量 CHROME_BIN 设置为 chrome.exe 的完整路径**

错误消息令人困惑，因为节点 0.10 中 spawn 的行为发生了变化，我们需要更新它（[https://github.com/karma-runner/karma/issues/452](https://github.com/karma-runner/karma/issues/452)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T21:30:28.417

在 Windows Vista 上的 karma 配置文件中为测试浏览器插入“PhantomJS”会导致相同的错误消息：{ [Error: spawn ENOENT] code: 'ENOENT', errno: 'ENOENT', syscall: 'spawn' }

我根据上述建议进行了即兴创作，并在“所有者的用户变量”PHANTOMJS_BIN 下插入了系统路径（“环境变量”），其值由包含 phantomjs.exe 的路径（C:\Program Files\phantomjs-1.9\. 0-windows\phantomjs.exe)

一切都很好，jasmine angularjs 测试现在正在运行，并且比使用“Chrome”或“Firefox”作为测试浏览器要快得多。

# objective-c - Verify method call with a handle argument on an OCMockito mock

> ID：15850873
> 
> 赞同：4
> 
> 时间：2013-04-06T12:21:10.453
> 
> 标签：objective-c, unit-testing, tdd, ocmockito, ochamcrest

I have an OCMockito mock of a class *QuestionBuilder* with the method *questionsFromJSON:error:*. This method accepts a handle *(NSError **)error* as an argument. How do I verify the method was called?

I’ve tried:

```
[verify(builder) questionsFromJSON:@"Fake JSON"
                             error:nil]; 
```

and:

```
NSError *err;
[verify(builder) questionsFromJSON:@"Fake JSON"
                             error:&err]; 
```

Both issue the error:

> testQuestionJSONIsPassedToQuestionBuilder (QuestionCreationTests) failed:
> *** -[NSProxy doesNotRecognizeSelector:questionsFromJSON:error:] called!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T21:58:28.753

我认为 OCMockito 还不支持这一点。当我使用给定而不是验证来执行此操作时，当被测代码使用 ** 参数调用该方法时，我会收到一个奇怪的错误。如果可能，您可能必须修改您的方法签名以不接受 NSError**（如果您可以控制该代码）。

# php - 如何将订单状态从待处理更改为信用卡付款？

> ID：15850874
> 
> 赞同：1
> 
> 时间：2013-04-06T12:21:23.547
> 
> 标签：php, magento

在 Magento 中，当我在完成订单后使用信用卡支付类型创建订单时，它会将我的订单状态显示为`pending`. 而不是这个，我想要`Payment through Credit card`状态或类似的东西，`Credit card Payment`以便管理员知道付款已完成。

实际上，如果可能，我想为使用信用卡完成的订单添加新状态，以便管理员轻松过滤它。

![信用卡屏幕截图](https://i.stack.imgur.com/v7W9l.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:24:34.357

“新订单状态”选项是您需要为通过CC付款方式下的订单设置的选项。根据您的 Magento 版本，有两种添加新订单状态的方法：

### Magento CE 1.6+ (EE 1.10+)

这很简单。去那里`Admin Panel > System > Order statuses`创建一个新的。然后单击“将状态分配给状态”。从状态列表中选择新创建的状态，从状态列表中选择“新建”。它必须是“新”状态，否则它不会列在付款方式的配置中。

以下是添加新订单状态的步骤：

1.  转到管理面板 > 系统 > 订单状态。您将看到到目前为止定义的所有状态的网格。
2.  单击“创建新状态”按钮
3.  您将看到新的状态编辑页面。您必须填写“状态代码”和“状态标签”，因为它们是强制性的。您的状态代码可以是例如“cc_payment”和状态标签，例如“信用卡付款”。您可以省略其他字段，因为它们只是其他语言标签。
4.  单击“保存状态”按钮。您将被重定向回订单状态网格。您应该会在列表中看到您的新状态。
5.  单击“将状态分配给状态”按钮（在“创建新状态”旁边）。
6.  从“订单状态”下拉列表中选择您的新状态（“信用卡付款”）。从“订单状态”下拉列表中选择“新建”。
7.  单击“保存状态分配”按钮。
8.  转到付款方式配置（系统 > 配置 > 付款方式）并设置这个新的订单状态。

### Magento CE 1.5 (EE 1.8) 及更低版本

管理订单状态和状态由 config.xml 完成。因此，为了添加新状态，您想创建一个新模块（例如`Company_Sales`）并在 config.xml 中放置一个与此类似的 xml 结构：

```
 <global>
    <sales>
        <order>
            <statuses>
                <cc_payment translate="label"><label>Credit card Payment</label></cc_payment>
            </statuses>
            <states>
                <new>
                    <statuses>
                        <cc_payment default="0"/>
                    </statuses>
                </new>
            </states>
        </order>
    </sales>
</global> 
```

# asp.net-mvc - 在 ASP.NET MVC 4 中使用更新面板

> ID：15850875
> 
> 赞同：3
> 
> 时间：2013-04-06T12:21:25.537
> 
> 标签：asp.net-mvc, asp.net-mvc-4, updatepanel

请解释我如何在 ASP.NET MVC4 应用程序中创建更新面板。我找了很多博客...但找不到任何有用的方法。这是我的看法 ![在此处输入图像描述](https://i.stack.imgur.com/fRRDH.png)

如何在同一视图中分离这些操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T12:24:52.063

更新面板在 ASP.NET MVC 中并不真正存在。在人们真正意识到最好使用手写 jQuery ajax 进行部分页面更新之前，它曾经存在于 ASP.NET Web 表单开发世界中。

您可以使用 jQuery ajax 方法将表单数据发布到操作方法，并根据需要对页面进行部分页面更新。您也可以根据需要考虑使用局部视图（返回页面的一部分）。

在您的情况下，您可以为登录和注册创建 2 个部分视图，并将它们包含在您的主视图中，以使您的代码更具可重用性。

```
<h1>Login or Register</h1>
<div>
  @Html.Partial("Login")
</div>
<div>
 @Html.Partial("Register")
</div> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-06T13:29:24.960

你的两个面板不允许用户在一个或另一个之间切换，所以我假设你有一个“介绍”视图，可以选择登录或注册。对？在这种情况下，实际上不需要使用 Javascript/Ajax 进行客户端面板切换。您的“介绍”视图可以将参数传递给控制器​​操作，定义它是否需要登录或注册视图。

例如：

```
// RouteConfig.cs
routes.MapRoute(
    name: null,
    url: "login-register/{action}",
    defaults: new { controller = "Authentication"},
    constraints: new { action = @"(SignIn|Register)" }
);

// AuthenticationController.cs
public ActionResult SignIn() 
{
    ...
    return View(); // Will return the Authentication\SignIn.cshtml view
}

public ActionResult Register()
{
    ...
    return View(); // Will return the Authentication\Register.cshtml view
} 
```

# ms-access - query to show Active employees for a given time frame

> ID：15850878
> 
> 赞同：0
> 
> 时间：2013-04-06T12:21:48.553
> 
> 标签：ms-access, ms-access-2007

I am a little new to building this but have come a long way.

I have built a db using Access 2007\. I have a table that shows the employees info:

```
Lname  
Fname  
Status  
HireDate  
TermDate 
```

(Status: they are either inactive (potential Hires), Active or Terminated)

I can run a query that will show me all the employees by hire date or run one to show term dates.

We would like to have a query that will give us a count of how many drivers are still there within a given month.

Say Joe Smith was hired on 01/01/2008 and was terminated on 05/15/2011\. If I ran a report in 2011 on May 31st how would I need to build the query to show this employee as being there in the month of May?

I have used `>=Date()` and others. I could use `between #05/01/2011# and #06/01/2011#` in the criteria under `TermDate` but if there is not a date there, nothing shows up. I have even dropped down a line and added "Null" and still nothing or I get all the employees that are still there and the ones that was terminated before the dates. I'm not sure what I am doing wrong.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:23:12.707

我不确定这个过滤条件的逻辑。我认为您的目标是确定在 2011 年 5 月的任何时候都在工作的所有司机。我最好的猜测是您至少需要 2 个条件来识别他们。

*   `HireDate`2011 年 6 月 1 日之前
*   `TermDate`Null 或 >= 2011 年 5 月 1 日

如果这些条件足够，SQL 可能会相当简单。

```
SELECT e.Lname, e.Fname
FROM employees_info AS e
WHERE
    e.HireDate < #2011-6-1#
    AND
    (
        e.TermDate Is Null
        OR
        e.TermDate >= #2011-5-1#
    ); 
```

听起来您正在设计视图中构建查询......这是一个很好且有用的功能。但是，很难描述如何在设计视图中构建该查询。所以我建议您创建一个新查询，切换到 SQL 视图并粘贴该 SQL 文本。替换`employees_info`为您的实际表名，并修复我拼写错误的所有字段名。

如果该查询运行没有错误，您可以在设计视图和 SQL 视图之间来回切换，在一个视图中进行更改，然后检查它在另一个视图中的表示方式。

SQL 不必按照我编写的方式进行格式化。我选择了这种方式，希望它能使`WHERE`逻辑清晰。如果您从设计视图更改查询，Access 将重新格式化 SQL，因为它认为合适。但是，格式更改不应中断查询。

我对文字日期值使用了*yyyy-md*格式。该格式避免了在哪些部分代表日期和月份方面可能出现的任何混淆，例如`#05-01-2011#`是打算代表 5 月 1 日还是 1 月 5 日。但是，当您更改查询时，Access 可能会将它们更改为*mm-dd-yyyy*格式。（有时它的*“有用”*冲动很烦人。）

我对某一点感到困惑。似乎每个员工都有一份记录。如果是这样，并且员工可以出于任何原因离职并在以后重新雇用，那么很难在单个记录中捕获不同的雇佣条款。如果您面临这种情况，您可能需要修改表格设计。

如果我误解了您的数据，请向我们展示一个简短的数据样本，以及您希望从基于该样本的查询中获得的输出。祝你好运。

# scrolltop - 拖动元素时垂直滚动无法正常工作

> ID：15850880
> 
> 赞同：0
> 
> 时间：2013-04-06T12:21:58.693
> 
> 标签：scrolltop, vertical-scrolling

当我们将元素拖动到屏幕的顶部或底部时，我试图让页面滚动。当容器在屏幕内时它工作正常，但当容器大于屏幕时无法滚动。为了解决这个问题，我写了这个：

```
$('.dragable').draggable({

    zIndex:100,
    revert: "invalid",
    helper: "clone",
    scroll: true,
    drag: function(e)
    {
        if(e.clientY <= distance)//top
        {
            isMoving = true;
            clearInetervals();            
            intTopHandler= setInterval(function(){
                $(document).scrollTop(e.clientY - step)
            },timer);
        }
        if(e.clientY >= ($(window).height() - distance))//bottom
        {
            isMoving = true;
            clearInetervals();            
            intBottomHandler= setInterval(function(){
                $(document).scrollTop(e.clientY + step)
            },timer);
        }
    }
}); 
```

释放可拖动元素后，屏幕将保持在同一位置，除非我们再次移动可拖动元素。我尝试过 scrollBy 而不是 scrollTop 方法，但它不适用于移动设备。请提出任何帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:43:44.960

删除 clearIntervals 并使用 scrollTop 而没有下面给出的 setInterval

$('.draggable').draggable({

```
zIndex:100,
revert: "invalid",
helper: "clone",
scroll: true,
drag: function(e)
{
    if(e.clientY <= distance)//top
    {
        $(document).scrollTop(e.clientY - step)
    }
    if(e.clientY >= ($(window).height() - distance))//bottom
    {
        $(document).scrollTop(e.clientY + step)
    }
} 
```

});

它工作正常

# macos - DTrace 脚本从不报告写入系统调用

> ID：15850887
> 
> 赞同：0
> 
> 时间：2013-04-06T12:22:49.327
> 
> 标签：macos, bash, osx-mountain-lion, system-calls, dtrace

我正在使用以下 DTrace 脚本来跟踪 bash 的读写系统调用：

```
syscall::write:entry,
syscall::read:entry
/execname == "bash"/
{

} 
```

它成功匹配了 2 个探针，但无论我输入什么，我都只看到读取调用。没有报告写调用。当 shell 回显到屏幕时，我期待收到 write 调用。

脚本是错误的，还是我对 bash 的工作原理有错误的假设？

我在 OSX Mountain Lion 下运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:24:04.667

在“写”之后尝试使用通配符。这将列出匹配的探针：

```
sudo dtrace -l -n 'syscall::write*:entry' 
```

这可能会为您提供您期望的输出：

```
syscall::write*:entry,
syscall::read*:entry
/execname == "bash"/
{

} 
```

正在使用的呼叫可能是`write_nocancel`.

# html - 为什么我的图像没有出现在 Firefox 中？

> ID：15850890
> 
> 赞同：0
> 
> 时间：2013-04-06T12:23:16.810
> 
> 标签：html, image, firefox, alt

所以我使用以下代码来显示图像：

```
<img id='fb'
src="D:/Users/sel0010/Documents/Cadets/Webmaster/Photos/Icons/fblogo.png" 
width="25" 
height="25" 
alt=" Facebook  | " />
</a> 
```

当我在 Google Chrome 上测试我的网站时，我可以看到它与在 Internet Explorer 上相同，但是当我在 Firefox 上尝试时，除了`alt=""`. 我正在测试`Google Chrome Version 26.0.1410.43`m`IE 9.0.8.8112.16421`和`Firefox version 7.0.1`.

我真的很困惑，尤其是在 IE 工作的情况下，所以任何帮助都会很棒，

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:32:16.677

**两种解决方案**

1.  使用相对路径：

    ```
    <img id='fb' src="Icons/fblogo.png" width="25" height="25" alt=" Facebook  | " /> 
    ```

2.  本地图像的前缀`file:///`：

    ```
    <img id='fb' src="file:///D:/Users/sel0010/Documents/Cadets/Webmaster/Photos/Icons/fblogo.png" width="25" height="25" alt=" Facebook  | " /> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:28:13.593

您应该使用 file:// 并在 src 之前添加一个空格

改变：

```
<img id='fb'src="D:/Users/sel0010/Documents/Cadets/Webmaster/Photos/Icons/fblogo.png" width="25" height="25" alt=" Facebook  | " /></a> 
```

到：

```
<img id='fb' src="file://D:/Users/sel0010/Documents/Cadets/Webmaster/Photos/Icons/fblogo.png" width="25" height="25" alt=" Facebook  | " /></a> 
```

# mysql - SQL join left get MAX(date)

> ID：15850899
> 
> 赞同：7
> 
> 时间：2013-04-06T12:24:00.843
> 
> 标签：mysql, sql, join, greatest-n-per-group

我有这些表：

*   注意
    *   ID INT
    *   日期日期时间
    *   ...

*   主题
    *   ID
    *   姓名

*   通知主题
    *   id_notice
    *   id_theme

我想获得每个主题的最新通知。

```
SELECT id_theme, n.id
FROM notice_theme
LEFT JOIN (
    SELECT id, cdate
    FROM notice
    ORDER BY cdate DESC
) AS n ON notice_theme.id_notice = n.id
GROUP BY id_theme 
```

结果并不好。一个想法 ？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T12:26:46.793

有很多方法可以解决这个问题，但我习惯这样做。需要一个额外的子查询来分别计算`cDate`每个`ID`.

```
SELECT  a.*, c.*
FROM    theme a
        INNER JOIN notice_theme b
            ON a.ID = b.id_theme
        INNER JOIN  notice c
            ON b.id_notice = c.ID
        INNER JOIN
        (
            SELECT  a.id_theme, MAX(b.DATE_CREATE) max_date
            FROM    notice_theme a
                    INNER JOIN notice b
                        ON a.ID_Notice = b.ID
            GROUP   BY a.id_theme
        ) d ON  b.id_theme = d.id_theme AND
                c.DATE_CREATE = d.max_date 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/ab90c9/7)

# php - 使用 json 数据和 PHP 构建父子导航

> ID：15850909
> 
> 赞同：1
> 
> 时间：2013-04-06T12:24:34.630
> 
> 标签：php, json, function, navigation, parent-child

我正在为网站构建导航。我的所有数据都存储在在线 JSON 上，这是一个示例：

```
{
    "State": 0, 
    "Tasks": [
        {
            "Id": 1000000, 
            "ParentId": 0, 
            "TaskCode": "1             ", 
            "Name": "item 1", 
            "Description": "item 1", 
            "Url": "", 
            "Parameter": ""
        }, 
        {
            "Id": 1010000, 
            "ParentId": 1000000, 
            "TaskCode": "1.1           ", 
            "Name": "item 1.1", 
            "Description": "item 1.1", 
            "Url": "", 
            "Parameter": ""
        }, 
        {
            "Id": 1010100, 
            "ParentId": 1010000, 
            "TaskCode": "1.1.1         ", 
            "Name": "item 1.1.1", 
            "Description": "item 1.1.1", 
            "Url": "", 
            "Parameter": ""
        }, 
        {
            "Id": 1010200, 
            "ParentId": 1010000, 
            "TaskCode": "1.1.2         ", 
            "Name": "item 1.1.2", 
            "Description": "item 1.1.2", 
            "Url": "", 
            "Parameter": ""
        }, 
        {
            "Id": 1010300, 
            "ParentId": 1010000, 
            "TaskCode": "1.1.3         ", 
            "Name": "item 1.1.3", 
            "Description": "item 1.1.3", 
            "Url": "", 
            "Parameter": ""
        }, 
        {
            "Id": 1010400, 
            "ParentId": 1010000, 
            "TaskCode": "1.1.4         ", 
            "Name": "item 1.1.4", 
            "Description": "item 1.1.4", 
            "Url": "", 
            "Parameter": ""
        }, 
        {
            "Id": 1020000, 
            "ParentId": 1000000, 
            "TaskCode": "1.2           ", 
            "Name": "item 1.2", 
            "Description": "item 1.2", 
            "Url": "", 
            "Parameter": ""
        }, 
        {
            "Id": 1030000, 
            "ParentId": 1000000, 
            "TaskCode": "1.3           ", 
            "Name": "item 1.3", 
            "Description": "item 1.3", 
            "Url": "", 
            "Parameter": ""
        }
    ]
} 
```

然后我创建一个这样的函数：

```
function buildNavigation($items, $parent = '0')
{
    $hasChildren = false;
    $outputHtml = '<ul>%s</ul>';
    $childrenHtml = '';

    foreach($items as $item)
    {
        $curr_parent = $item->Id;
        if ($item->ParentId == $parent) {
            $hasChildren = true;
            $childrenHtml .= "<li>";
            $childrenHtml .= "<a href='" . $item->Url . "'><img alt='' src='xxx.png'>";
            $childrenHtml .= trim($item->TaskCode).". " . $item->Name . "</a>";         
            foreach($items as $child)
            {
                $cur_node = $child->Id;
                if ($child->ParentId == $curr_parent) {
                $hasChildren = true;
                $childrenHtml .= '<ul>';
                $childrenHtml .= '<li>';
                $childrenHtml .= '<a href="' . $child->Url . '">';
                $childrenHtml .= trim($child->TaskCode) . ". " . $child->Name . "</a>";
                    foreach($items as $child2)
                        {
                            $cur_node2 = $child2->Id;
                            if ($child2->ParentId == $cur_node) {
                                $hasChildren = true;
                                    $childrenHtml .= '<ul>';
                                    $childrenHtml .= '<li>';
                                    $childrenHtml .= '<a href="' . $child2->Url . '">';
                                    $childrenHtml .= trim($child2->TaskCode).". " . $child2->Name . "</a>";
                                    $childrenHtml .= '</li>';
                                    $childrenHtml .= '</ul>';
                            }
                        }
                $childrenHtml .= '</li>';
                $childrenHtml .= '</ul>';
                }
            }
            $childrenHtml .= '</li>';           
        }
    }

    // Without children, we do not need the <ul> tag.
    if (!$hasChildren) {
        $outputHtml = '';
    }

    // Returns the HTML
    return sprintf($outputHtml, $childrenHtml);
}

echo buildNavigation($json_data->Tasks); 
```

但我在 html 上得到的是这样的：

```
<ul>
   <li>
      <a href=''><img alt='' src='xxx.png'>1\. item 1</a>
      <ul>
         <li>
            <a href="">1.1\. item 1.1</a>
            <ul>
               <li><a href="">1.1.1\. item 1.1.1</a></li>
            </ul>
            <ul>
               <li><a href="">1.1.2\. item1.1.2</a></li>
            </ul>
            <ul>
               <li><a href="">1.1.3\. item1.1.3</a></li>
            </ul>
            <ul>
               <li><a href="">1.1.4\. item1.1.4</a></li>
            </ul>

<!-- .... (and more) --> 
```

应该是这样的：

```
<ul>
   <li>
      <a href=''><img alt='' src='xxx.png'>1\. item1</a>
      <ul>
         <li>
            <a href="">1.1\. item1.1</a>
            <ul>
               <li><a href="">1.1.1\. item1.1.1</a></li>
               <li><a href="">1.1.2\. item1.1.2</a></li>
               <li><a href="">1.1.3\. item1.1.3</a></li>
               <li><a href="">1.1.4\. item1.1.4</a></li>
            </ul>
         </li>
      </ul>
   </li>
</ul> 
```

任何人都可以帮助改进我的 PHP 功能吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T12:51:50.270

这就是我认为你的代码应该是什么样子

```
$json = json_decode($json);
echo buildNavigation($json->Tasks); 
```

输出

```
<ul>
    <li><a href="">1\. Pelayanan Pelanggan</a>
    <ul>
            <li><a href="">1.1\. Sambung Baru</a>
            <ul>
                    <li><a href="">1.1.1\. Pendaftaran</a></li>
                    <li><a href="">1.1.2\. Survey</a></li>
                    <li><a href="">1.1.3\. BA Survey</a></li>
                    <li><a href="">1.1.4\. SPK Penyambungan</a></li>
                </ul></li>
            <li><a href="">1.2\. Koreksi Tarif</a></li>
            <li><a href="">1.3\. Pemutusan Sambungan Atas Permintaan Pelanggan</a></li>
        </ul></li>
</ul> 
```

使用的功能

```
function buildNavigation($items, $parent = '0') {
    $next = function ($items, $parent) {
        return array_filter($items, function ($v) use($parent) {
            return $v->ParentId == $parent;
        });
    };
    $output = "<ul>";
    foreach ( $next($items, $parent) as $item ) {
        $output .= '<li>';
        $output .= sprintf('<a href="%s">%s. %s</a>', $item->Url, trim($item->TaskCode), $item->Name);
        if ($next($items, $item->Id)) {
            $output .= buildNavigation($items, $item->Id);
        }
        $output .= '</li>';
    }
    $output .= "</ul>";
    return $output;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T12:37:24.907

试试这个，希望它对你有用

```
function buildNavigation($items, $parent = '0')
{
    $hasChildren = false;
    $outputHtml = '<ul>%s</ul>';
    $childrenHtml = '';

    foreach($items as $item)
    {
        $curr_parent = $item->Id;
        if ($item->ParentId == $parent) {
            $hasChildren = true;
            $childrenHtml .= "<li>";
            $childrenHtml .= "<a href='" . $item->Url . "'><img alt='' src='xxx.png'>";
            $childrenHtml .= trim($item->TaskCode).". " . $item->Name . "</a>";         
            $childrenHtml .= '<ul>';
            foreach($items as $child)
            {
                $cur_node = $child->Id;
                if ($child->ParentId == $curr_parent) {
                $hasChildren = true;
                $childrenHtml .= '<li>';
                $childrenHtml .= '<a href="' . $child->Url . '">';
                $childrenHtml .= trim($child->TaskCode) . ". " . $child->Name . "</a>";
                    $childrenHtml .= '<ul>';
                    foreach($items as $child2)
                        {
                            $cur_node2 = $child2->Id;
                            if ($child2->ParentId == $cur_node) {
                                $hasChildren = true;

                                    $childrenHtml .= '<li>';
                                    $childrenHtml .= '<a href="' . $child2->Url . '">';
                                    $childrenHtml .= trim($child2->TaskCode).". " . $child2->Name . "</a>";
                                    $childrenHtml .= '</li>';

                            }
                        }
                $childrenHtml .= '</ul>';
                $childrenHtml .= '</li>';
                }
            }
            $childrenHtml .= '</ul>';
            $childrenHtml .= '</li>';           
        }
    }

    // Without children, we do not need the <ul> tag.
    if (!$hasChildren) {
        $outputHtml = '';
    }

    // Returns the HTML
    return sprintf($outputHtml, $childrenHtml);
}

echo buildNavigation($json_data->Tasks); 
```

# java - 如何为谷歌浏览器创建一个自动关闭系统的插件

> ID：15850910
> 
> 赞同：0
> 
> 时间：2013-04-06T12:24:41.960
> 
> 标签：java, javascript

我有一个用于自动关闭系统的 java 代码。代码如下： -

```
import javax.swing.JOptionPane;

public class sd
{
    public static void main(String[]args)
    {
        int wholeTimeBeforeShutdown=0;

        int hour=0;
        int minute=0;
        int second=0;

        try
        {
            String a=JOptionPane.showInputDialog(null,"HOUR","HOUR BEFORE SHUTDOWN",JOptionPane.QUESTION_MESSAGE);
            String b=JOptionPane.showInputDialog(null,"MINUTE","MINUTE BEFORE SHUTDOWN",JOptionPane.QUESTION_MESSAGE);
            String c=JOptionPane.showInputDialog(null,"SECOND","SECOND BEFORE SHUTDOWN",JOptionPane.QUESTION_MESSAGE);

            if((a==null)||a.equals(""))
            {
                a="0";
            }
            if((b==null)||b.equals(""))
            {
                b="0";
            }
            if((c==null)||c.equals(""))
            {
                c="0";
            }

            int e=Integer.parseInt(a);
            int f=Integer.parseInt(b);
            int g=Integer.parseInt(c);

            wholeTimeBeforeShutdown=wholeTimeBeforeShutdown+((e*60)*60);
            wholeTimeBeforeShutdown=wholeTimeBeforeShutdown+((f*60));
            wholeTimeBeforeShutdown=wholeTimeBeforeShutdown+(g);
            wholeTimeBeforeShutdown=wholeTimeBeforeShutdown*1000;

            Thread.sleep(wholeTimeBeforeShutdown);
            Runtime.getRuntime().exec("shutdown -s -t 00 -f");
        }

            catch(Exception exception)
            {
                exception.printStackTrace();
            }
    }
} 
```

我想利用这段代码为谷歌浏览器创建一个自动关闭系统的插件。我知道如何将插件添加到 chrome 网络浏览器。这涉及进行各种编码并将它们放在一个文件夹中并将该文件夹加载到网络浏览器中。我的问题是如何使用此代码为谷歌浏览器制作“插件”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:02:23.520

*“我正在做一个关于 chrome 插件的项目......”*。

好的。这里有一些提示可以帮助您入门...

*   为了执行命令，Java 小程序或 javascript 插件必须为真
*   为了执行特权操作（例如关闭系统），您通常需要“root”特权（在 Linux 系统上）。
*   谷歌“chrome java插件”。

# android - 如何避免 Listview 在 notifyDataSetChanged 后重置位置？

> ID：15850913
> 
> 赞同：1
> 
> 时间：2013-04-06T12:24:55.053
> 
> 标签：android, listview, layout, notifydatasetchanged

我在屏幕中央放了一个 Listview，然后开始播放动画：

```
hideAnimation= new TranslateAnimation(0, -220, 0, 0);
hideAnimation.setDuration(500);
hideAnimation.setFillBefore(false);
hideAnimation.setFillAfter(true);
hideAnimation.setAnimationListener(this); 
```

在 onAnimationEnd 方法中，我清除动画并设置如下布局：

```
mlistView.layout(-220, 0, 500, 500); 
```

到目前为止一切正常。但是在 mlistView.layout(-220, 0, 500, 500) 之后，我需要刷新我的 listview.so 我只是调用

```
adapter.notifyDataSetChanged(); 
```

然后我的 ListView 又回到了屏幕中心......

有谁知道如何处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:47:50.633

`x , y , z` 调用后将您的位置保存在参数中，`notifyDataSetChanged`您可以这样做

```
yourlistView.setLocation(x,y,z); 
```

并在您的列表视图中添加此功能

```
public setLocation(int x, int y, int z){
//Do whatever you want
} 
```

# php - 以编程方式更新 cPanel 中的 FTP 帐户配额？

> ID：15850914
> 
> 赞同：0
> 
> 时间：2013-04-06T12:24:58.253
> 
> 标签：php, http, ftp, cpanel

我正在尝试通过 php 更新 cPanel FTP 帐户的配额。

```
https://username:password@mydomain.com:2083/frontend/x3/ftp/doeditquota.html?acct=mailid@mydomain.com&quota=50 
```

我正在使用上述 URL 发出 HTTP 请求。

我收到回复信息

> FTP 帐户 maildid@mydomain.com 已成功修改为 50 兆字节的新配额。0无法确定 FTP maildid@mydomain.com 目录。

但在服务器配额未更新。其实什么问题？

以及为什么这个消息：

> 0无法确定 FTP maildid@mydomain.com 目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T10:08:05.290

最后我得到了解决方案。

[https://username:password@mydomain.com:2083/frontend/x3/ftp/doeditquota.html?acct=mailid"a=50](https://username:password@mydomain.com:2083/frontend/x3/ftp/doeditquota.html?acct=mailid&quota=50)

从“acct”参数中删除域。

# pointers - 在 QtCreator 中将点转换为 -> 的简单方法

> ID：15850921
> 
> 赞同：1
> 
> 时间：2013-04-06T12:25:45.347
> 
> 标签：pointers, structure, qt-creator

我分配给别人写的一个项目。他们将参数作为变量传递（我的意思是那些在调用方法时复制到堆栈的东西），我喜欢将它们转换为指针。它的运行速度明显更快，因为只有 32 位或 64 位指针被传递给子例程。我有将近 600 种方法要转换。

示例方法定义为：

```
bool insideWindow(tsPoint Point, tsWindow Window) 
```

当我将类型 tsWindow 更改为 psWindow（定义为 *tsWindow）时，我需要将所有点 (.) 更改为 (->) 以暗示指针操作。

有什么简单的方法可以在 QtCreator 中更改这些吗？换句话说，我想将类型更改为指针类型，QtCreator 将轻松将点更改为 -> ?

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:53:38.663

好吧，通过将变量作为引用传递很容易解决。我需要做的就是修改函数原型（在 h 和 cpp 文件中）。

```
bool insideWindow(tsPoint &Point, tsWindow &Window) 
```

这样它仍然需要一个点（意味着我不会更改代码，用 -> 运算符替换点），它们实际上是作为指针传递的。

[http://www.cprogramming.com/tutorial/references.html](http://www.cprogramming.com/tutorial/references.html)

# c# - ListView 项目中的按钮 - 单击时更改项目

> ID：15850924
> 
> 赞同：1
> 
> 时间：2013-04-06T12:25:59.930
> 
> 标签：c#, windows-8, windows-runtime

```
<StackPanel Orientation="Vertical" Grid.Column="3" Grid.RowSpan="2">
    <Button x:Name="changeItem" Click="changeItem_Click" Visibility="Visible" >
        <Image Source="Assets/TestIcon.png" HorizontalAlignment="Center" VerticalAlignment="Center" Width="45" Height="45" />
    </Button>
</StackPanel> 
```

此 XAML 代码是 ListView 项的 DataTemplate 的一部分。当用户单击这些按钮之一时，应触发不同的操作。比如删除item，修改item等等。

所以我需要找出包含按钮的项目的索引才能访问它。我怎样才能做到最好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T13:04:02.163

您在事件处理程序中有事件发送者对象。只需将其转换为 FrameworkElement 并获取数据上下文：

```
var element = sender as FrameworkElement;
Debug.Assert(element != null, "element != null");
var context = element.DataContext as MyDataModel;
Debug.Assert(context != null, "context != null"); 
```

其中 MyDataModel 是您的数据模型类。

# java - DAO 返回 NullPointerException

> ID：15850926
> 
> 赞同：2
> 
> 时间：2013-04-06T12:26:08.183
> 
> 标签：java, spring-mvc, nullpointerexception

我已经创建了一个通过使用他们的 ID、大厅票号等`ExamineeDao`来获取。`Examinee`

在我自动装配的服务中，`ExamineeDao`a 如下

```
@Autowired
private ExamineeDao examineeDao; 
```

我尝试访问服务的`ExamineeDao`内部功能

```
Examinee examinee = examineeDao.findById(id);\\line no 85 in the generateQMH 
```

当我执行代码时，服务器显示`Error`为

```
java.lang.NullPointerException: null
    at cdac.examination.ccat.service.exam.ExamQuestionsListServiceImpl.generateQMH(ExamQuestionsListServiceImpl.java:85)
    at cdac.examination.ccat.service.exam.ExamQuestionsListServiceImpl.getQAIPath(ExamQuestionsListServiceImpl.java:48) 
```

上述异常是由于`examineeDao`返回`NULL`值。

有人建议我出现这种错误的可能性是什么以及我需要改变什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:30:37.770

您的弹簧配置可能有误。`NullPointerException`在该行抛出a 的唯一机会是 if `examineeDao`is `null`，因此它可能没有正确注入。运行一个调试器，它会很快地显示给你。

可能是 ExamineeDao 不能用于自动装配，请发布您的 spring 配置（和注释的 ExameDao 类）。

# facebook - 我想在 facebook 上分享一个特定的链接

> ID：15850939
> 
> 赞同：-1
> 
> 时间：2013-04-06T12:27:15.800
> 
> 标签：facebook, facebook-sharer

我正在做的网站是一个买卖网站，用户可以在某个渠道（例如电子）上发帖，买家可以查看并表达他们的兴趣。用户可以查看帖子，并通过 facebook 或 twitter 分享某个帖子。现在我已经完成了与 facebook 部分的共享并且它工作正常，但是要共享我有 2 个选项（或者这就是我可以通过搜索找到的）它要么是我正常共享，一个链接，要么是通过我在 facebook 上的应用程序共享，我想做通过事情。当我按下共享时，共享选项卡打开，一切都很好，只是要共享的链接不存在，我不希望用户输入或复制它，我只想让它自动出现！

这是我使用的代码，它需要我的应用程序 ID 和应用程序域。

```
 <a href="https://www.facebook.com/dialog/feed?app_id=461240817281750&redirect_uri=https://peaceful-lake-7793.herokuapp.com">share through facebook</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T09:02:30.713

看起来您在共享链接中缺少“链接”参数 - 这就是链接未显示给您的原因。

[http://developers.facebook.com/docs/reference/dialogs/feed/](http://developers.facebook.com/docs/reference/dialogs/feed/)

[https://www.facebook.com/dialog/feed?app_id=461240817281750&redirect_uri=https://peaceful-lake-7793.herokuapp.com&link=https://peaceful-lake-7793.herokuapp.com](https://www.facebook.com/dialog/feed?app_id=461240817281750&redirect_uri=https://peaceful-lake-7793.herokuapp.com&link=https://peaceful-lake-7793.herokuapp.com)

# c# - 遍历列表并创建多个线程

> ID：15850946
> 
> 赞同：0
> 
> 时间：2013-04-06T12:28:29.947
> 
> 标签：c#, multithreading

我想遍历一个 URL 列表并检查每个 URL 是否该网站已关闭或未使用多个线程。

我的做法：

```
 while (_lURLs.Count > 0)
            {
                while (_iRunningThreads < _iNumThreads)
                {
                    Thread t = new Thread(new ParameterizedThreadStart(CheckWebsite));                        
                    string strUrl = GetNextURL();
                    if (!string.IsNullOrEmpty(strUrl))
                    {
                        t.Start(strUrl);
                        _iRunningThreads++;
                    }
                    else
                    {
                        break;
                    }
                }
            }

    private string GetNextURL()
    {
        lock (_lURLs)
        {
            if (_lURLs.Count > 0)
            {
                string strRetVal = _lURLs[0];
                _lURLs.RemoveAt(0);
                return strRetVal;
            }
            else
            {
                return string.Empty;
            }
        }
    } 
```

当一个线程完成时，该`_iRunningThreads`属性会递减。

我的问题是：外部 while 循环阻止了所有“ `while (_lURLs.Count > 0)`”。在外部 while 循环中添加 a`Application.DoEvents()`会有所帮助，但我想使用 ac# 库中`Application.DoEvents()`不可用的代码。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T12:52:35.457

**[您可以使用TPL](http://msdn.microsoft.com/en-us/library/dd460717.aspx)**来代替自己管理线程。
此外，如果您使用的是 .Net Framework 4.5，您甚至可以添加 async/await 和**[WhenAll](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.whenall.aspx)** 方法来防止阻塞......

这是一个小例子：

```
private async Task CheckUrl()
    {
        List<Task> tasks = new List<Task>();

        string url = GetNextUrl();
        while (!String.IsNullOrEmpty(url))
        {
            tasks.Add(Task.Run(() => CheckWebSite(url)));
            url = GetNextUrl();
        }

        await Task.WhenAll(tasks);

        // All tasks have finished...

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:37:55.393

如果任务需要很短的时间来完成，我认为在这种情况下使用 .NET ThreadPool 将是一个好主意。

查看：http: [//msdn.microsoft.com/en-us/library/4yd16hza.aspx](http://msdn.microsoft.com/en-us/library/4yd16hza.aspx)

这使您可以稍微简化代码，因为 ThreadPool 会自动管理工作线程的数量。您只需调用`ThreadPool.QueueUserWorkItem`您拥有的每个 URL 并增加一个正在运行的任务计数器。将项目排队到`ThreadPool`不会阻塞 UI 线程。

让 ThreadPool 任务减少计数器（就像现在一样），当计数器变为零（所有任务都已运行）时调用回调函数，以便您的主代码知道何时处理了所有 URL。您可以通过该回调更新 UI 或您想要执行的任何其他操作。

# ruby-on-rails - 美国以外的 Ruby on Rails 和 Paypal

> ID：15850949
> 
> 赞同：5
> 
> 时间：2013-04-06T12:28:51.203
> 
> 标签：ruby-on-rails, paypal, activemerchant

我正在使用 Rails 3.2.13，我需要与支付网关（最好是 Paypal）集成。

我已经看到 Ryan 使用 ActiveMerchant 的 railscasts，但我无法让它工作（我位于希腊），错误表明该商家在我的国家/地区不可用。

**如图所示，我实际上无法获得希腊的 API 凭据** ![在此处输入图像描述](https://i.stack.imgur.com/dMnFx.png)

有没有办法（无论是否活跃），我可以将我的 Ruby on Rails 应用程序与来自希腊的 Paypal 集成，以便接受付款？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T12:44:04.867

也有[一些关于 PayPal 的 railscasts](http://railscasts.com/episodes?utf8=%E2%9C%93&search=paypal)。Ryan 使用我在澳大利亚帐户中成功使用的[paypal-recurring gem 。](https://github.com/fnando/paypal-recurring)

我认为您需要 Premier 或 Business 帐户才能使用 PayPal API 和 IPN。

当您处理付款时，您需要注册[一个 PayPal 沙盒帐户](https://developer.paypal.com/)，以便您知道一切正常。

所需的代码在我链接的 gem 中列出，所以我不会在这里复制粘贴。

为了请求单笔付款，我认为您可以使用该`request_payment`方法并跳过该`create_recurring_profile`方法。此外，您应该仔细检查用户进入的 PayPal 页面是否没有说明任何关于注册订阅的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T19:08:44.967

PayPals Merchant API 仅适用于上述国家/地区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T13:18:38.047

在这里，您可以从头开始找到贝宝集成，无需 gem

[http://blog.joshsoftware.com/2013/01/08/paypal-payflow-setup-in-rails/](http://blog.joshsoftware.com/2013/01/08/paypal-payflow-setup-in-rails/)

# c# - 在 GridView 中对数据进行排序

> ID：15850952
> 
> 赞同：0
> 
> 时间：2013-04-06T12:29:24.567
> 
> 标签：c#, asp.net, sorting, gridview

如何在 C# 中为网格添加排序功能。通过单击网格的列名进行排序。

简单的排序，如表格排序。如何实现这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:29:52.180

试试这个排序......

```
protected void RadgvData_SortCommand(object sender, GridSortCommandEventArgs e)
    {
        GridTableView tableView = e.Item.OwnerTableView;
        e.Canceled = true;
        GridSortExpression expression = new GridSortExpression();
        expression.FieldName = e.SortExpression;
        if (tableView.SortExpressions.Count == 0 || tableView.SortExpressions[0].FieldName != e.SortExpression)
        {
            expression.SortOrder = GridSortOrder.Descending;
        }
        else if (tableView.SortExpressions[0].SortOrder == GridSortOrder.Descending)
        {
            expression.SortOrder = GridSortOrder.Ascending;
        }
        else if (tableView.SortExpressions[0].SortOrder == GridSortOrder.Ascending)
        {
            expression.SortOrder = GridSortOrder.Descending;
        }

        tableView.SortExpressions.AddSortExpression(expression);
        RadgvData.Rebind();

    } 
```

# python - 需要python基本解释

> ID：15850953
> 
> 赞同：2
> 
> 时间：2013-04-06T12:29:25.523
> 
> 标签：python

有人可以解释一下下面的代码 TickGenerator 继承自 Observer 的对象和方法，为什么我们都需要observer.init？

```
class TickGenerator(Observer):
    def __init__(self):
        Observer.__init__(self)
        self.price = 1000 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T12:33:29.433

我猜你来自一种自动调用父类构造函数的语言。

在 Python 中，如果重写该`__init__`方法，则不会调用父类构造函数，除非您显式调用它。

在 Python 3 之前，它曾经被称为：

```
def __init__(self, *args, **kwargs):
    super(TickGenerator, self).__init__(*args, **kwargs) 
```

新`[super()][1]`语法（[PEP-3135](http://www.python.org/dev/peps/pep-3135/)）只是：

```
def __init__(self, *args, **kwargs):
    super().method(*args, **kwargs) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T12:41:18.563

**因为除了当前类（ TickGenerator**）中正在做的事情之外，程序员还需要完成**Observer**类。`__init__`**`__init__`**

 **[这个 Stackoverflow 答案将帮助您了解更多。](https://stackoverflow.com/questions/1385759/should-init-call-the-parent-classs-init/1385836#1385836)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T12:35:58.447

如果你不打电话给观察者。**初始化**如下：

```
class TickGenerator(Observer):
    def __init__(self):
        self.price = 1000 
```

这意味着您覆盖 TickGenerator。**init**方法和观察者。**init**不会被自动调用。**

# jquery - jQuery AJAX 加载和 Youtube API iframe

> ID：15850956
> 
> 赞同：1
> 
> 时间：2013-04-06T12:29:47.387
> 
> 标签：jquery, ajax, api, youtube, buffering

我正在做一个网页。我正在使用 jQuery 加载 (AJAX) 函数将新内容动态加载到内容 div 中。在每个内容 div 中都有一个图像。当您单击该图像时，应开始播放 Youtube 嵌入视频 (iframe)。到目前为止一切正常，但有一件事有点奇怪：

每当我开始播放 Youtube 视频时，缓冲就会开始。如果我现在想在缓冲时将新内容加载到内容 div 中，则缓冲完成后会触发 jQuery 加载函数。因此，有时我必须等待 10 秒才能更改内容（简单的 HTML 内容），因为视频正在缓冲。如果我没有使用 iframe 嵌入，但对象嵌入一切正常，但我也想支持移动设备（iOS）。所以只是一个简单的例子来告诉你：

```
$(".content").load(NEW_CONTENT_URL, function() {
    // Some animation to replace the oldcontent with the new one

    // If a iframe embeded video is buffering, this function doesnt get fired. Only after the buffering has finised.
}); 
```

它是 jQuery AJAX 加载或 Youtube iframe 嵌入中的已知错误。有什么我可以做的还是我必须使用对象（swf）嵌入代码才能使其工作。如果是，请告诉我，如何使用 Youtube API 进行对象嵌入。我无法让“playVideo()”在现有对象上工作。每次我得到一个错误： TypeError: 'undefined' is not a function (evalating 'playerArr["player"].playVideo()');

但这也很奇怪，因为我将这个函数用于嵌入式 swfs

```
var playerArr = [];
function onYouTubePlayerReady(playerId) {
      alert(playerId);
      playerArr[playerId] = document.getElementById(playerId);
      playerArr[playerId].playVideo();

} 
```

是的，我还使用“?enablejsapi=1”作为视频 URL。警报给了我一个“玩家”，这是我的对象的 ID。iframe 解决方案会更好。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:50:48.650

我认为从 google Api 文档很难理解，但要让 iframe 在我的网站上正常运行，我必须注意以下 3 点：

1/ 获取加载的 Iframe 特定 API：https: [//www.youtube.com/iframe_api](https://www.youtube.com/iframe_api)

```
var tag = document.createElement('script');
tag.src = "https://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag); 
```

2/ 声明正确的回调，其名称因 API 不同：**onYouTubeIframeAPIReady**

```
 var player;
 function onYouTubeIframeAPIReady(){
 player = new YT.Player('player', {
    height: '390',
    width: '640',
    videoId: 'M7lc1UVf-VE',
    playerVars: {'autoplay':'0','rel':'0','control':'0','fs':'1'},
    events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange
        }
    });
} 
```

3/ 最后一定**不要**使用这个参数：enablejsapi：1

我们的 jQuery 插件的完整示例（丑陋但实用）：

```
$(data.settings.contentData).each(function (index, currentData) {
     var html = '<li style="position:relative;float: left">';
     html += '<div id="player"></div>'
     html += "<script type='text/javascript'>"
     html += "var player; "
     html += "var tag = document.createElement('script');"
     html += "tag.src = 'https://www.youtube.com/iframe_api';"
     html += "var firstScriptTag = document.getElementsByTagName('script')[0];"
     html += "firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);"

     html += "function onYouTubeIframeAPIReady() { "
     html += "   player = new YT.Player('player', "
     html += "       {height: '390', width: '640',  videoId: '" + $.trim(currentData.images.zoom) + "', "
     html += "       playerVars: {'autoplay':'0','rel':'0','control':'0','fs':'1'}, "
     html += "       events: {'onReady': onPlayerReady}}"
     html += "   ); "
     html += "}; "
     html += "function onPlayerReady(event) { /* your stuff here */ }</script>";
     html += '</li>';
    containerListImage.append(html);
    var containerImage = containerListImage.children().last();
  ...
} 
```

# php - 长轮询聊天系统

> ID：15850962
> 
> 赞同：3
> 
> 时间：2013-04-06T12:30:17.610
> 
> 标签：php, ajax, long-integer, polling

我知道长轮询是让聊天更新其内容的最佳方式，我知道 web-socket 但我认为长轮询是最好的，因为许多浏览器不支持 web-socket 。问题是我不知道如何编写长轮询脚本，我有一个常规的 ajax 和一个常规的 php get 和 post 脚本，那么我怎样才能使这个 php 代码和 ajax 代码以长轮询的方式工作？（我不希望它每秒都在请求我希望它回显来自数据库的任何新消息......）

这是我的ajax代码：-

```
var chat = {}

chat.fetchMessages = function () {
$.ajax({
    url: 'ajax/ajax/chat.php',
    type: 'POST',
    data: { method: 'fetch' },
    success: function(data) {
        $('#chats').html(data);
        $('#chatshere').scrollTop($('#chatshere')[0].scrollHeight);
   }
}); 

}

chat.interval = setInterval(chat.fetchMessages, 1000);
chat.fetchMessages(); 
```

这是我的php代码：-

```
<?php
require '../core/init.php';
if(isset($_POST['method']) === true && empty($_POST['method']) === false) {

$chat = new Chat();
$method = trim($_POST['method']);

if($method === 'fetch') {

    $messages = $chat->fetchMessages();

    if(empty($messages) === true) {
        echo 'There is no any messages !';
    }
    else
    {
        foreach($messages as $message) {
        $log_username = $_SESSION['username'];

            if($message['user1'] == $log_username){
            ?>
            <ul class="mychat">
            <li class="first">
            <div class="sOutline">
            <div class="suser">
            <a href="#">
            <img style="height:30px; width:30px;" title="belowfs" alt="belowfs" class="profilepic-belowfs" src="http://demo.scritterscript.com/images/membersprofilepic/thumbs/default-s.jpg">
            </a>
            </div>
            </div>
            </li>                                          
            <li style="margin-left:-5px;">
            <div style="border:1px solid #0099CC; border-radius:5px; background:#0099CC; color:#FFFFFF; padding:7px; max-width:165px;">
            <?php echo nl2br($message['message']); ?>
            </div>
            </li>
            </ul>
            <?php
            }else if($message['user2'] == $log_username){
            ?>
            <ul style="float:right;" class="hischat">
            <li class="first">
            <div class="sOutline">
            <div class="suser">
            <a href="#">
            <img style="height:30px; width:30px;" title="belowfs" alt="belowfs" class="profilepic-belowfs" src="http://demo.scritterscript.com/images/membersprofilepic/thumbs/default-s.jpg">
            </a>
            </div>
            </div>
            </li>                                          
            <li style="margin-right:-5px;">
            <div style="border:1px solid #999; border-radius:5px; background:#999; color:#FFFFFF; padding:7px; max-width:165px;">
            <?php echo nl2br($message['message']); ?>
            </div>
            </li>
            </ul>
            <?php
            }
        }
    }
}
else if($method === 'throw' && isset($_POST['message']) === true) { 
    $message = trim($_POST['message']);
    if(empty($message) === false) {
        $chat->throwMessage($_SESSION['user'], $message);   
    }
}
 }
 ?> 
```

非常感谢 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:33:17.917

你可能想做

```
chat.interval = setInterval(function(){chat.fetchMessages()}, 5000); 
```

代替

```
chat.interval = setInterval(chat.fetchMessages, 1000); 
```

用于每 5 秒获取一次消息。休息取决于您的 PHP 代码来回显新消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-22T23:37:31.087

这是一个链接，其中清楚地解释了不同的方法：

[什么是长轮询、Websocket、服务器发送事件 (SSE) 和 Comet？](https://stackoverflow.com/questions/11077857/what-are-long-polling-websockets-server-sent-events-sse-and-comet)

长轮询系统：

*   客户端使用常规 http 从服务器请求网页（参见上面的 http）。
*   请求的网页执行从服务器请求文件的 javascript。
*   服务器不会立即响应请求的信息，而是等待有新信息可用。
*   当有新信息可用时，服务器会用新信息进行响应。
*   客户端收到新信息并立即向服务器发送另一个请求，重新启动该过程。

如果要获取消息有一个时间间隔，您可能需要查看 Ajax Polling 部分。

# java - 如何将 Long[] 写入包裹？

> ID：15850964
> 
> 赞同：1
> 
> 时间：2013-04-06T12:30:35.990
> 
> 标签：java, android, long-integer

我正在尝试将 Long[] 数组写入包裹，但它只接受 long[] 数组作为参数。

( *Parcel 类型中的 writeLongArray(long[]) 方法不适用于参数 (Long[])* )

```
public class SomeClass implements Parcelable {

private Long minutes, lastUpdated;

...
...

 @Override 
 public void writeToParcel(Parcel out, int flags) {
    out.writeLongArray(new Long[] {this.minutes, this.lastUpdated });
 } 
```

这似乎可行，但这是否允许：

```
 out.writeLongArray(new long[] {this.minutes, this.lastUpdated }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:55:19.190

这：

```
out.writeLongArray(new long[] {this.minutes, this.lastUpdated }); 
```

有效，因为您使用的是数组初始值设定项，其中明确列出了数组元素。这些元素中的每一个都被*拆箱*成一个原始的 long ，因此代码既可以编译又可以成功运行，这没有错。如果你有一个 Long 的集合，你可以在循环中执行转换：

```
long[] unboxedLongs = new long[boxedLongs.length];
for(int i = 0; i < boxedLongs.length; i++) {
    unboxedLongs[i] = boxedLongs[i].longValue();
 } 
```

每次您想将装箱数组转换为其未装箱的等价物时，编写起来很乏味，但无法通过 SDK (afaik) 进行直接转换。不过，有第三方库可以让您编写更短的代码 - 例如使用[Apache Commons Lang ArrayUtils 类](http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/ArrayUtils.html)：

```
long[] unboxedLongs = ArrayUtils.toPrimitive(boxedLongs); 
```

# java - 如何根据对象的变量之一对对象列表进行排序

> ID：15850969
> 
> 赞同：5
> 
> 时间：2013-04-06T12:31:00.010
> 
> 标签：java, list, sorting, collections

我需要对评分最高的电影的 ArrayList 进行排序（5 最好 - 1 最差）。我正在使用 Collections.sort() 但列表是一样的。我究竟做错了什么

```
films.add(new Film().setRating(1));
films.add(new Film().setRating(2.5));
films.add(new Film().setRating(3.5));
films.add(new Film().setRating(4));
films.add(new Film().setRating(5));
films.add(new Film().setRating(1));
films.add(new Film().setRating(2));
films.add(new Film().setRating(3));
films.add(new Film().setRating(4));
Collections.sort(films, new Comparator<Film>() {
    @Override
    public int compare(Film o1, Film o2) {
        final double film1 = o1.getRating();
        final double film2 = o2.getRating();
        return film1 > film2? 1
                : film1 < film2? -1 : 0;
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T12:37:57.837

使用该`Double.compare`方法效果很好：

```
public static void main(String[] args) throws IOException, ClassNotFoundException {
    final List<Film> films = new ArrayList<>();
    films.add(new Film().setRating(1));
    films.add(new Film().setRating(2.5));
    films.add(new Film().setRating(3.5));
    films.add(new Film().setRating(4));
    films.add(new Film().setRating(5));
    films.add(new Film().setRating(1));
    films.add(new Film().setRating(2));
    films.add(new Film().setRating(3));
    films.add(new Film().setRating(4));
    System.out.println(films);
    Collections.sort(films, new Comparator<Film>() {
        @Override
        public int compare(Film o1, Film o2) {
            return Double.compare(o1.getRating(), o2.getRating());
        }
    });
    System.out.println(films);
} 
```

输出：

```
[1.0, 2.5, 3.5, 4.0, 5.0, 1.0, 2.0, 3.0, 4.0]
[1.0, 1.0, 2.0, 2.5, 3.0, 3.5, 4.0, 4.0, 5.0] 
```

`Film`我用过的：

```
private static final class Film {

    double rating;

    public double getRating() {
        return rating;
    }

    public Film setRating(double rating) {
        this.rating = rating;
        return this;
    }

    @Override
    public String toString() {
        return Double.toString(rating);
    }
} 
```

我建议使用`Double.compare`而不是您的版本，甚至`o1.getRating - o2.getRating`.

要么是那个，要么你的`Film`实现是错误的——也许你的例子中的 setter 没有设置任何东西？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T12:35:36.070

请改用以下方法`Double`：

```
public static int compare(double d1, double d2){} 
```

或像这样：

```
class Film implements Comparable<Film>{
    double rating;
    @Override
    public int compareTo(Film o) {
        return Double.compare(rating, o.rating);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T12:48:47.110

您的代码在我的计算机上运行良好，如下：

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;

public class SortFilms {
    public static void main(final String ... args) {
        new SortFilms().sort();
    }

    public void sort() {
        final List<Film> films = new ArrayList<Film>();
        films.add(new Film(1));
        films.add(new Film(2.5));
        films.add(new Film(3.5));
        films.add(new Film(4));
        films.add(new Film(5));
        films.add(new Film(1));
        films.add(new Film(2));
        films.add(new Film(3));
        films.add(new Film(4));
        Collections.sort(films, new Comparator<Film>() {
            @Override
            public int compare(Film o1, Film o2) {
                final double film1 = o1.getRating();
                final double film2 = o2.getRating();
                return film1 > film2? 1
                        : film1 < film2? -1 : 0;
            }
        });

        System.out.println(films);
    }

    private class Film {
        private final double rating;

        public Film(double rating) {
            this.rating = rating;
        }

        public String toString() {
            return "" + rating;
        }

        public Double getRating() {
            return rating;
        }
    }
} 
```

产生：

```
[1.0, 1.0, 2.0, 2.5, 3.0, 3.5, 4.0, 4.0, 5.0] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-14T16:15:29.007

有两种方法可以解决这个问题

1.  在 Collections.sort 方法的第二个参数中实现比较器接口的比较方法。

2.  确保您的类实现 Comparable 接口，然后实现 compareTo 方法。

这是两种解决方案的代码。

```
public class ComparableTest implements Comparable < ComparableTest > {

  String name;
  int marks;

  @Override
  public int compareTo(ComparableTest o) {
    if (this.marks > o.marks)
      return 1;
    return -1;
  }

  public ComparableTest(String name, int marks) {
    this.name = name;
    this.marks = marks;
  }

  public String getName() {
    return name;
  }

  public int getMarks() {
    return marks;
  }

}
```

```
package program;

import java.util.Collections;
import java.util.Comparator;
import java.util.LinkedList;
import java.util.List;
import java.util.Random;

public class TempList {

  public static void main(String[] args) {

    /*************************************************/
    /****************Assigning Values*****************/
    /*************************************************/
    String[] names = {
      "A",
      "B",
      "C",
      "D",
      "E"
    };
    List < ComparableTest > objects = new LinkedList < > ();

    /*************************************************/
    /****************Printing Values******************/
    /*************************************************/

    for (String name: names) {
      objects.add(new ComparableTest(name, new Random().nextInt(100)));
    }

    System.out.println("Before Sorting");

    for (ComparableTest object: objects) {
      System.out.println(object.name + " " + object.marks);
    }

    /*************************************************/
    /*************Sorting based on marks**************/
    /*************************************************/

    Collections.sort(objects);
    System.out.println("\nSorting based on Marks");

    for (ComparableTest object: objects) {
      System.out.println(object.name + " " + object.marks);
    }

    /*************************************************/
    /*************Sorting based on names**************/
    /*************************************************/

    System.out.println("\nSorting based on Names");

    Collections.sort(objects, new Comparator < ComparableTest > () {

      @Override
      public int compare(ComparableTest o1, ComparableTest o2) {
        if (o1.name.compareTo(o2.name) < 1) {
          return 1;
        }
        return -1;
      }

    });

    for (ComparableTest object: objects) {
      System.out.println(object.name + " " + object.marks);
    }
  }

}
```

# c++ - 垂直直方图不起作用

> ID：15850972
> 
> 赞同：0
> 
> 时间：2013-04-06T12:31:12.080
> 
> 标签：c++

我的直方图程序有问题，我正在让它打印出我想要的确切内容，但是它有一些不寻常的间距问题，我想知道是否有人可以帮助我避免它。这就是我的输出的样子，你可以看到它在 90-100 括号之前的所有空格中都有错误的间距。

![在此处输入图像描述](https://i.stack.imgur.com/qNPae.png)

我希望它看起来像这样，所以数字和星号之间的底部没有空格：

```
*
*
*   *
*   *
*   *
*   *
*   *
*   *
*   * *
* * * *
* * * *
0 1 2 3 
```

也有人可以推荐一些东西来代替`system("Clear")`or`system("PAUSE")`吗？

代码：

```
#include <iostream>
#include <iomanip>

using namespace std;

void readExamMarks(int examMarks[], int sizeOfArray, int& counter1, int& counter2, int&   counter3, int& counter4,int& counter5, int& counter6,int& counter7, int& counter8, int& counter9, int& counter10){

cout << "Please enter a set of exam marks to see a histogram for:" << endl;
int x = 0;

for( int idx = 0; idx < sizeOfArray; idx++){
    cin >> x;
     if((x >=0) && (x <= 100)){
            x = x/10;

            switch(x){
            case 1:
                counter1++;

                break;
            case 2:
                counter2++;
                break;
            case 3:
                counter3++;

                break;
            case 4:
                counter4++;
                break;
            case 5:
                counter5++;

                break;
            case 6:
                counter6++;
                break;
            case 7:
                counter7++;

                break;
            case 8:
                counter8++;
                break;
            case 9:
                counter9++;

                break;
            case 10:
                counter9++;
                break;

            }

            examMarks[idx] = x;
        }
             else{
             cout << "ERROR: Value must be in range [0...100], please enter a valid value\n"; 
         }
}
}

void printExamMarksDecade(){

    cout << setw(5) << "10-20  " << "21-30  " << "31-40  " <<"41-50  " << "51-60  " << "61-70  " << "71-80  " << "81-90  " << "91-100  ";
}

void printHisto(int examMarks[], int sizeOfArray,int counter1, int counter2, int& counter3, int& counter4,int& counter5, int& counter6,int& counter7, int& counter8, int& counter9, int& counter10){
system("cls");

while(counter1 != 0 ){
    cout << setw(3) << "*" << endl;
    counter1--;
}
while(counter2 != 0 ){
    cout << setw(10) << "*" << endl;
    counter2--;
}
while(counter3 != 0 ){
    cout << setw(17) << "*" << endl;
    counter3--;
}
while(counter4 != 0 ){
    cout << setw(24) << "*" << endl;
    counter4--;
}
while(counter5 != 0 ){
    cout << setw(31) << "*" << endl;
    counter5--;
}
while(counter6 != 0 ){
    cout << setw(38) << "*" << endl;
    counter6--;
}
while(counter7 != 0 ){
    cout << setw(45) << "*" << endl;
    counter7--;
}
while(counter8 != 0 ){
    cout << setw(52) << "*" << endl;
    counter8--;
}
while(counter9 != 0 ){
    cout << setw(59) << "*" << endl;
    counter9--;
}
}

int main() 
{
int examMarks[30];
int counter1 = 0;
int counter2 = 0;
int counter3 = 0;
int counter4 = 0;
int counter5 = 0;
int counter6 = 0;
int counter7 = 0;
int counter8 = 0;
int counter9 = 0;
int counter10 = 0;

readExamMarks(examMarks, 30, counter1, counter2, counter3, counter4, counter5, counter6, counter7, counter8, counter9, counter10);
printHisto(examMarks, 30, counter1, counter2, counter3, counter4, counter5, counter6, counter7, counter8, counter9, counter10);
printExamMarksDecade();

system("PAUSE");
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:05:20.683

每个范围的变量`counter`并不是您真正想要做的，您只需要一个数组：

```
#include <iostream>
using namespace std;

int main() {

  // count array for brackets 0 to 10
  int *count = new int[11];
  // variable to store each mark read
  int mark;

  // Read in marks
  while (cin >> mark) {
    // Increment the count for the bracket the mark falls in 
    count[mark/10]++;
  }

  for (int i=0;i<11;i++) {
    cout << i << "\t| " << string(count[i],'*') << endl;
  }

} 
```

这绘制了一个水平直方图，但显示了它应该完成的非常简单的方法。

```
$ ./histogram.out < marks
0   | ******
1   | *********
2   | **********
3   | ************
4   | *********
5   | *****************
6   | ********
7   | *********
8   | ***
9   | ****
10  | * 
```

修改这段代码你会少一些麻烦，尝试将原始代码中的括号数增加到 1000！

# linux - 在特定时间在我的服务器上检测到负载

> ID：15850973
> 
> 赞同：1
> 
> 时间：2013-04-06T12:31:19.787
> 
> 标签：linux, load

![在此处输入图像描述](https://i.stack.imgur.com/nBLlQ.png)

在晚上的某个时间，面对负载 3 到 4 分钟。有时它也需要更多。我已经检查了所有日志文件，当时也有访问者，但是当我没有太多用户访问该站点时会发生这种情况。我现在没有超过 50MB 的数据库，所以应该不是 mysql 的问题。如果是由于某些代码问题，例如循环等，那么它也应该出现在我在网站上有用户的时候。当我的网站上有用户时，未检测到负载。我已经搜索了很多关于这个问题的分析，但从上周开始我找不到任何答案。请任何知道这个问题的人都可以告诉我为什么负载在特定时间爬行。会不会是硬件问题？我有 12GB 内存的 VPS、4 个 CPU、100GB 硬盘驱动器和非常轻量级的站点，用户不多。

# java - 使用 xquery 从我的 xml 文档中检索时出错

> ID：15850974
> 
> 赞同：1
> 
> 时间：2013-04-06T12:31:24.440
> 
> 标签：java, xml, xquery

我正在尝试从我的 XML 文档中检索作者，但一些作者的姓名中有撇号，因此结果会引发错误。

### 输入：

```
<dblp>
    <book mdate="2002-01-03" key="books/aw/CeriF97">
        <author>Stefano Ceri</author>
        <author>Piero Fraternali</author>
        <title>Designing Database Applications with Objects and Rules: The IDEA Methodology</title>
        <publisher href="db/publishers/aw.html">Addison-Wesley</publisher>
        <year>1997</year>
        <isbn>0-201-40369-2</isbn>
    </book>
</dblp> 
```

### Java/XQuery 代码：

```
public ArrayList<String> getArrayListOfAuthors(){

    String query = "for $x in fn:distinct-values(doc(\"" +xml_file_name+ "\")//author) " +
                    "order by $x "+
                    "return $x";

    System.out.println("XQuery query:"+query);
    ArrayList<String> myList = new ArrayList<String>();
    try{
        XQDataSource ds = new SaxonXQDataSource();
        XQConnection conn = ds.getConnection();
        XQExpression exp = conn.createExpression();

        XQSequence seq = exp.executeQuery(query);
        int i = 1;

        while (seq.next()) {
            i++;
            //System.out.println(seq.getAtomicValue());
                            myList.add(seq.getAtomicValue());
        }
        //System.out.println("\n== Total number of authors is "+i+" ==");

        seq.close();

    } catch (XQException err) {
    System.out.println("Failed as expected: " + err.getMessage());
    }
              return myList;
} 
```

### 错误信息：

```
XPST0003 XQuery syntax error near #...e $y/author = 'Kieran O'Neill'#:
    Unmatched quote in expression
Error on line 1 column 109 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T13:18:36.683

该错误消息强烈表明您正在通过字符串连接构建查询，可能是通过处理从您向我们展示的查询中获得的作者列表。（查找包含 $y 的查询，这不是您的示例中的查询）。

然后改变它，而不是像这样使用连接构造查询：

query = "//作者[@name="' + name + "']"

您构造查询以包含一个参数：

query = "声明变量 $name 外部；//作者[@name=$name]"

并执行此提供 $name 的值作为运行时参数。除了避免名称中包含撇号的问题之外，还有几个好处：避免了注入攻击的安全问题，并且获得了性能优势，因为您可以编译一次查询并重复使用它。

# algorithm - 具有相关顶点成本的二分选择

> ID：15850975
> 
> 赞同：1
> 
> 时间：2013-04-06T12:31:28.657
> 
> 标签：algorithm, graph, bipartite

我想我正在寻找一种可以在二分图中找到“最小”“选择”的算法。每个顶点都有一个相关的（整数）成本来选择它。我只能找到最小化所选集中顶点*数量的算法，而不是成本。*我以前认为我需要一个“匹配”，但实际上我只需要覆盖每条边的顶点子集......

我认为贪婪的解决方案行不通。假设我们的集合是 A，B：

顶点 1,2,3 在 A 中，成本为 1。顶点 4 在 B 中，成本为 2。

解决方案是删除最昂贵的顶点，4。基于成本选择的贪婪解决方案将失败。类似地，如果 B 的成本为 10，我们无法贪婪地选择连接最多的顶点。

我想到了一个不同的措辞：“给定一个二分图，其中每个顶点都有一个相关的成本，找到一个成本最低的顶点子集，使得每条边都发生在所选子集中的至少一个顶点上”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T13:25:08.887

原始唱片：

```
min sum_v c_v x_v
s.t.
forall e=vw. x_v + x_w >= 1
forall v. x_v >= 0 
```

双唱片：

```
max sum_e y_e
s.t.
forall v. sum_{e=vw} y_e <= c_v
forall e. y_e >= 0 
```

1.  找到一个最小割，其中边是从 A 到 B 的具有无限容量的弧，A 中的顶点是源，B 中的顶点是汇，所有顶点的容量等于它们的成本。（等效地，用弧到 A 的超级源和从 B 的弧的超级汇。）

2.  以切割“汇”侧的 As 和“源”侧的 B 为例。每条边 vw 都被覆盖，因为如果 v 和 w 都不属于覆盖范围，那么 vw 将是残差的。

我想给 Jenő Egerváry 的帽子提示。

# c++ - 未定义的引用（使用静态库的 g++ 编译）

> ID：15850976
> 
> 赞同：1
> 
> 时间：2013-04-06T12:31:39.550
> 
> 标签：c++, g++, unix-ar

项目文件是这样的：

```
source
  parser
    parser.cpp
    parser.hpp
  brain
    brain.cpp
    brain.hpp 
```

我首先运行了这两个命令（pwd `source/brain/`）：

```
g++ -c brain.cpp -o brain.o
ar rvs brain.a brain.o 
```

`brain.a`我将两者都复制`brain.hpp`到`source/parser/`. 然后我运行了这个命令（pwd `source/parser`）：

```
g++ parser.cpp brain.a -o parser 
```

我得到了这个错误：

```
/tmp/cceGRLZn.o: In function `main':
parser.cpp:(.text+0x1cc): undefined reference to `std::brain<long long>::brain()'
parser.cpp:(.text+0x205): undefined reference to `std::brain<long long>::init(int)'
parser.cpp:(.text+0x26b): undefined reference to `std::brain<long long>::work()'
parser.cpp:(.text+0x2a4): undefined reference to `std::brain<long long>::clear()'
parser.cpp:(.text+0x2ec): undefined reference to `std::brain<long long>::~brain()'
parser.cpp:(.text+0x322): undefined reference to `std::brain<long long>::~brain()'
/tmp/cceGRLZn.o: In function `int parser_extract_args<long long>(std::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int, short&, std::brain<long long>&)':
parser.cpp:(.text._Z19parser_extract_argsIxEiRSsiRsRSt5brainIT_E[int parser_extract_args<long long>(std::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int, short&, std::brain<long long>&)]+0x17b): undefined reference to `std::brain<long long>::push_back(long long)'
parser.cpp:(.text._Z19parser_extract_argsIxEiRSsiRsRSt5brainIT_E[int parser_extract_args<long long>(std::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int, short&, std::brain<long long>&)]+0x37a): undefined reference to `std::brain<long long>::push_back(long long)'
collect2: ld returned 1 exit status 
```

源文件：

```
brain.cpp [http://ideone.com/GNUxmH][1]
brain.hpp [http://ideone.com/M2IFAI][2]
parser.cpp [http://ideone.com/fJRzhD][3]
parser.hpp [http://ideone.com/mj6dST][4] 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T12:34:50.550

第一件事：**不要将任何实体添加到`std`命名空间**。这给你的程序*Undefined Behavior*。

从您的消息来看，您似乎已经添加了一个名为命名空间`brain`的类`std`。`brain`从命名空间中删除`std`并将其放入您的某个命名空间中。`std`您可以添加到命名空间的唯一内容是属于命名空间的模板的*特*`std`化。

其次，*除非您提供在整个程序中使用的类模板的显式实例化*，否则您**应该将类​​模板的成员函数的定义放在包含其声明的同一头文件中**，以确保它们在实例化中可见观点。

将它们放在一个单独的`.cpp`文件中会使编译器无法为您从其他翻译单元调用的成员函数生成代码，而不是包含它们的定义的翻译单元。[**StackOverflow 上的这个问答**](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)也可能对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:33:50.783

我打赌你`brain`在`.cpp`文件中实现了类模板的成员函数。您需要在头文件中提供模板定义，以便编译器在看到模板实例时可以生成适当的代码。所以将`brain.cpp`up 的内容移动到`brain.h`.

例如，考虑以下三个文件：

*   `test.h`

    ```
    template <typename T>
    struct test
    {
      void foo(T);
    }; 
    ```

*   `test.cpp`

    ```
    #include "test.h"

    template <typename T>
    void test<T>::foo(T x)
    {
      // do something with x
    } 
    ```

*   `main.cpp`

    ```
    #include "test.h"

    int main()
    {
      test<int> t;
      t.foo(5);
    } 
    ```

每个`.cpp`都单独编译，然后链接在一起。想象一下你是编译器，你正在尝试编译`main.cpp`. 您会看到代码想要使用用as`test`实例化的模板。所以现在您需要为 生成适当的代码，但要做到这一点，您需要查看函数的定义。不幸的是，你还没有看到它，所以你无法编译这个程序。`T``int``test<int>::foo`

相反，`foo`应该将 的定义移到头文件中，以产生这两个文件程序：

*   `test.h`

    ```
    template <typename T>
    struct test
    {
      void foo(T);
    };

    // Alternatively, you can define this up in the class definition
    void test<T>::foo(T x)
    {
      // do something with x
    } 
    ```

*   `main.cpp`

    ```
    #include "test.h"

    int main()
    {
      test<int> t;
      t.foo(5);
    } 
    ```

请注意，您不应将自己的声明添加到`std`命名空间：

> 如果 C++ 程序将声明或定义添加到命名空间 std 或命名空间内的命名空间，则 C++ 程序的行为是未定义的，`std`除非另有说明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T12:36:02.347

你需要用你需要的类型声明一个大脑模板类的实例，所以在brain.cpp文件的最后，你应该放：

```
template class brain <long long> ; 
```

当你编译brain.cpp 时，除非你有模板说明符，否则它不会创建任何可链接代码，因为它不能在没有类型声明的情况下实例化模板类。也就是说，在使用模板类时，最好将它们保留为纯头文件

# ruby - 销毁ruby中的变量

> ID：15850980
> 
> 赞同：3
> 
> 时间：2013-04-06T12:31:51.810
> 
> 标签：ruby, variables, destroy

我想销毁 ruby​​ 中的变量，就好像它从未存在过一样。这是一个例子：

```
> defined? a
=> "nil"
> a = 1
> defined? a
=> "local-variable" 
```

现在我需要将变量 a 设置为“nil” `defined?`。

我尝试了一些类似的东西：

```
> a = nil #Not working
=> nil
> defined? a 
=>  "local-variable" 
```

但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T12:49:07.460

截至目前（MRI 2.2 及之前），没有办法做到这一点。

# html - 做响应式设计时首选的单位是什么？

> ID：15850988
> 
> 赞同：35
> 
> 时间：2013-04-06T12:32:58.520
> 
> 标签：html, css

我正在建立一个响应式网站，我想知道我应该使用什么单位？我见过很多使用像素 (px) 进行测量的网站，也看到过一些使用百分比 (%) 的网站。是否有首选或正确的响应式设计方式？

我发现百分比很难使用，因为它使计算变得困难，并且在设置宽度/边距等时我最终得到了 2.754% 等值。像素似乎更容易，它只是简单的加法和减法，但我'已经读到它不是“面向未来的”或类似的东西，如果用户放大浏览器窗口，也不会正确缩放。这仍然是真的吗？

如果您有任何经验或专业知识，请分享！我很想听听你们怎么说！

谢谢！

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-06T12:41:08.390

对于**布局**类型，例如盒子的大小，您希望使用这些内容，因为您通常会有几列按其父级的百分比进行大小调整，这些列将在某个断点 ( )`%`处相互堆叠。`width:100%`没有其他单位可以让您像这样填充 100% 的空间`%`。

对于**padding/margins**使用`em`，通常你会想要相对于你的文本大小来间隔你的元素。使用`em`（带有“M”字符的），您可以很容易地说我在这里想要大约 1 个字符间距。

对于您可以使用or的**边框**，但还是有区别的。如果您希望您的边框在所有设备上看起来都是一个像素宽，请使用. 它可能不是所有设备上的一个像素，但是，例如，高密度显示器转换为。如果您希望边框的大小基于您的字体，请使用.`px``em``1px``1px``2px``em`

对于**字体**使用`em`（或`%`），使用`em`通过父母传递给孩子，它只是一个更好的单位来使用 over `px`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-06T12:40:02.960

当然你必须使用百分比。但是使用`min-height`, `max-height`, `min-width`, `max-width`CSS 键。

**为下一代**

**vw**和**vh**。vw 是窗口宽度的 1/100，vh 是窗口高度的 1/100。对于响应能力，他们将成为新的单位。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-06T12:37:13.360

使用百分比以及最小宽度和最大宽度（以像素为单位）。这会阻止百分比使您的 div 太小或太大。例如

```
div {
    width:100%; //full width of browser
    max-width: 960px; //this means it will be 100% of the browser until 960px then it will stop expanding
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-03T11:22:05.217

对于布局， vh 和 vw 很好，因为它们与设备的视口相关。它们使您可以在设计时考虑到设备的视口。有了这个说你知道什么会显示在窗口上，什么不会不小心。

对于文本 em 是最好的，因为如果它是响应式功能。

# mysql - 以不同的方式限制结果

> ID：15850989
> 
> 赞同：0
> 
> 时间：2013-04-06T12:33:00.750
> 
> 标签：mysql

这是我的查询

```
 $query="SELECT parent.name, parent.depth
        FROM  address AS node,
                address AS parent
        WHERE node.name LIKE '%".$name."%' AND   
        node.lft BETWEEN parent.lft AND parent.rgt   
        order by node.lft, parent.rgt"; 
```

这是我的表结构：

```
name        |lft | rgt | depth|
------------+----+-----+------+
Australia   | 1  | 10  |  1   |
nsw         | 2  | 9   |  2   |
sydney      | 3  | 8   |  3   |
kensington  | 4  | 5   |  4   |
kingsford   | 6  | 7   |  4   |
------------+----+-----+---- -+ 
```

让我们假设`$name`=k 那么结果将是

```
name        |depth|
------------+-----+
kingsford   | 4   |
sydney      | 3   | 
nsw         | 2   | 
Australia   | 1   |
kensington  | 4   | 
sydney      | 3   | 
nsw         | 2   | 
Australia   | 1   | 
```

我将这样介绍它们：

```
-->kensington, sydney, nsw, australia
-->kingsford, sydney, nsw, australia 
```

我不能将其限制为最多仅涵盖 10 个地址。例如，如果我添加`limit 2`它不会显示上面的两个地址。它只会显示这个`-->kensington, sydney`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:04:12.897

也许这个问题不太清楚，但如果我理解正确，我会使用这样的东西：

```
SELECT
  GROUP_CONCAT(parent.name ORDER BY parent.depth DESC) AS name
FROM
  address AS node JOIN address AS parent
  ON node.lft BETWEEN parent.lft AND parent.rgt  
WHERE node.name LIKE '%k%'
GROUP BY node.name
LIMIT 10 
```

请[在此处](http://sqlfiddle.com/#!2/e4b6e/9)查看小提琴。

**编辑**

您可能还想使用它，它以原始格式返回行：

```
SELECT
  parent.name, parent.depth
FROM
  (SELECT name, lft FROM address WHERE name LIKE '%k%' LIMIT 10) AS node,
  address AS parent
WHERE
  node.lft BETWEEN parent.lft AND parent.rgt   
order by node.lft, parent.rgt 
```

# php - jquery ajax：刷新页面时如何保持记录不消失

> ID：15850994
> 
> 赞同：0
> 
> 时间：2013-04-06T12:33:25.570
> 
> 标签：php, ajax, jquery

我用这个脚本

```
<script type="text/javascript">
  $(function () {
    $(".comment_button").click(function () {
      var element = $(this);
      var boxval = $("#content").val();
      var dataString = 'content=' + boxval;
      if (boxval == '') {
        alert("Please Enter Some Text");
      } else {
        $("#flash").show();
        $("#flash").fadeIn(400).html('<img src="ajax.gif" align="absmiddle">&nbsp;<span class="loading">Loading Update...</span>');
        $.ajax({
          type: "POST",
          url: "update_data.php",
          data: dataString,
          cache: false,
          success: function (html) {

            $("ol#update").prepend(html);
            $("ol#update li:first").slideDown("slow");
            document.getElementById('content').value = '';
            $("#flash").hide();
          }
        });
      }
      return false;
    });
    $('.delete_update').live("click", function () {
      var ID = $(this).attr("id");
      var dataString = 'msg_id=' + ID;
      if (confirm("Sure you want to delete this update? There is NO undo!")) {
        $.ajax({
          type: "POST",
          url: "delete_data.php",
          data: dataString,
          cache: false,
          success: function (html) {
            $(".bar" + ID).slideUp('slow', function () {
              $(this).remove();
            });
          }
        });
      }
      return false;
    });
  });
</script> 
```

此脚本使用 jquery 和 ajax 结合实时更新和删除记录

问题是当我刷新页面时，记录会消失..当页面重新加载时，如何保持显示的记录不会消失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:44:06.753

首先查看评论列表。您是否在查询中设置了任何限制，如果是，则使用按主 ID 排序的顺序。所以它会首先显示最新记录。

当您删除任何记录时，请检查它是否真的从数据库中删除。因为您没有根据您提供的代码检查记录是否实际删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T12:45:04.393

假设您正在使用 update_data.php 和 delete_data.php 来操作某个数据库，您可以使用 PHP 最初使用数据库中当前的数据来呈现页面。

如果不是这种情况，并且您无权访问该数据库（它可能是第三方 Web 服务，对吗？），或者您出于任何原因不想这样做，您可以使用像 Saeed 这样的 cookie回答。

# php - php system() 不允许其余代码执行

> ID：15850997
> 
> 赞同：0
> 
> 时间：2013-04-06T12:33:32.710
> 
> 标签：php, terminal, imacros

我有一个这样的 PHP 脚本：

```
<?php  
  system("firefox http://run.imacros.net/?m=the_macro.iim 2>&1");
  // CODE//  
?> 
```

当我从终端运行它时，正常打开我的 FireFox 但从不运行脚本中的其余代码！
如果我手动关闭 FireFox，那么脚本会运行其余的代码。

我想执行我的脚本而不堆叠在 system() 命令中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:55:29.087

将**stderr**`2>&1`重定向到**stdout**，但您没有重定向**stdout**，因此如果生成任何输出到任一句柄，PHP 将等待。要丢弃两个句柄的任何输出，请使用

 ******```
system("firefox http://run.imacros.net/?m=the_macro.iim >/dev/null 2>&1"); 
```******

# r - 回归线不通过点云

> ID：15850999
> 
> 赞同：0
> 
> 时间：2013-04-06T12:33:38.377
> 
> 标签：r, plot, regression, linear-regression

* * *

代码是这里的这个。

```
altura <- read.table("altura.txt", header=T, quote="\"")
altura <- cbind(altura, altura$Esposa/altura$X.Marido, altura$X.Marido/altura$Esposa)
is.data.frame(altura)
names(altura) <- c("marido","esposa","r1","r2")
with(altura,plot(marido~esposa))
g1 <- lm(altura$esposa~altura$marido)
summary(g1)
abline(g1$coefficients)
abline(0,1,lty=5)
with(altura,plot(esposa~marido))
g2 <- lm(altura$marido~altura$esposa)
summary(g2)
abline(g2$coefficients)
abline(0,1,lty=5)
cor(altura$marido,altura$esposa) 
```

简单的回归线不通过点云。abline 正在使用来自汇总函数的正确截距。这不是第一次发生这种情况。如您所见，在这两个图表中，我都是这个问题。一条线越过这些点，另一条在下方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:20:32.643

我想我明白了：您的 g2 模型： `g2 <- lm(altura$marido~altura$esposa`应该与`with(altura,plot(marido~esposa))`您一起使用`with(altura,plot(esposa~marido))`

例如

```
set.seed(1021)

x <- rnorm(100)
y <- 3*x + rnorm(100)
m1 <- lm(y~x)
plot(y~x)
abline(m1$coefficients)
m2 <- lm(x~y)
abline(m2$coefficients, col = 'red') 
```

你正在绘制你想要黑色的红线，反之亦然。