# StackOverflow 问答 13185000-13185999

# java - 叉车模拟

> ID：13185006
> 
> 赞同：2
> 
> 时间：2012-11-01T20:31:12.543
> 
> 标签：java, android, box2d

我正在尝试在我的游戏中实现叉车，但我遇到了一些麻烦，创建的对象可能会被这些叉车移动/拾取，这里有一张图片可以更好地解释它：

![在此处输入图像描述](../Images/5eb9feabbe8611d1bc29127a9dc606a0.png)

在这样的例子中，如果玩家想将叉车平台放在盒子下面来抬起它，身体就会发生碰撞，我的问题是，知道如何正确处理它吗？

我有一个想法，制作箱体 - 用多个这样的固定装置构建它：

![在此处输入图像描述](../Images/18e1552cb68015549734af4ab97798a5.png)

身体的描述在图像上，我希望解释清楚，我想这将是解决方案。但也许还有另一个，更容易？因为这会迫使我为每个可移动对象创建具有多个固定装置的自定义主体，这有点糟糕。

谢谢。

# qt - Qmake：在不引入库的情况下避免不同文件夹中的文件名冲突

> ID：13185008
> 
> 赞同：7
> 
> 时间：2012-11-01T20:31:19.210
> 
> 标签：qt, gnu-make, qmake

我有一个项目，其中一些文件夹恰好包含同名的源文件。

我的源代码树如下所示：

```
project.pro

foo/
    conflict.h
    conflict.cpp

bar/
    conflict.h
    conflict.cpp

some.h
other.h
files.h
main.cpp 
```

默认情况下，qmake 会生成一个 Makefile，它会生成这样的构建树：

```
conflict.o
main.o
target 
```

**为和生成****的**`conflict.o`目标文件在哪里？**`foo/conflict.cpp``foo/conflict.h`**

我不能**更改它们的名称**，因为它们是使用外部工具生成的，并且强制使用不同的文件名意味着更改它们的内容，所以这不是一个选项。

我也不想使用 qmake**`SUBDIRS`**模板，因为这意味着（1）每个子目录都是作为库单独构建的，因此整个构建过程非常复杂（至少在我看来）和（2）在顶层目录我不能有任何源文件。还是我错了？

我不能告诉 qmake 将目标文件写入构建目录中的单独目录吗？所以我的构建树看起来像这样：

```
foo/
    conflict.o

bar/
    conflict.o

main.o
target 
```

或者是否有任何其他解决方案既不需要重命名源文件也不需要引入像静态库这样复杂的东西？我简直不敢相信 Qt 多年来都没有解决这个（在我看来很简单）问题。（我已经在 4 年前遇到过这个问题，但可以重命名该项目中的文件，而在这里我不能。）

如果它很重要：我在带有 G++ 的 Ubuntu 和带有 mingw32 的 Windows 上都使用 Qt 4.8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:38:05.613

你被束缚了`qmake`吗？如果没有，另一种方法可能是使用[cmake](http://www.cmake.org/)。我刚刚用一个简单的 CMakeLists.txt 验证了你的用例，比如

```
cmake_minimum_required (VERSION 2.6)
project (conflict)
add_executable(conflict foo/conflict.cpp bar/conflict.cpp main.cpp) 
```

它甚至在顶级目录（main.cpp）中包含了一个源文件。这会正确构建可执行文件 - 目标文件是在子目录中创建的，例如

```
./CMakeFiles/conflict.dir/main.cpp.o
./CMakeFiles/conflict.dir/bar/conflict.cpp.o
./CMakeFiles/conflict.dir/foo/conflict.cpp.o 
```

`cmake`还包括对 Qt4 的支持，以自动引入所需的包含路径和库。从 qmake 迁移到 cmake 可能需要一些努力，但考虑到您的要求，我会尝试一下。

# java - 在 Java 中使用堆栈作为队列

> ID：13185009
> 
> 赞同：2
> 
> 时间：2012-11-01T20:31:19.443
> 
> 标签：java, stack, queue

我需要以不同的顺序处理一棵树，比如说 BFS 和 DFS。通过使用队列或堆栈，两者都很容易，但是，我在 Java 中缺少一个适当的接口，允许执行类似的操作

```
QueueOrStack<N> pending = ...
while (!pending.isEmpty()) {
    N node = pending.poll(); // <----- this is the problem
    pending.addAll(node.children());
    process(node);
} 
```

没有真正的问题，我可以将 an 封装`ArrayList`到实现`Queue`¹的东西中，但是我敢打赌我忽略了 Java Collection Framework 中的一些东西。还是真的失踪了？

__

¹或使用带有 a 的最新比较器`PriorityQueue`，这可能是一个愚蠢的想法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T20:35:33.810

有这样的结构。

它被称为`ArrayDeque`-> [http://docs.oracle.com/javase/6/docs/api/java/util/ArrayDeque.html](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayDeque.html)

# c++ - 在 C++ 和 Visual Studio 6 中使用数据库

> ID：13185011
> 
> 赞同：0
> 
> 时间：2012-11-01T20:31:22.653
> 
> 标签：c++, database, visual-studio

我已经在 stackoverflow 上进行了一些搜索，据我所知，在 C++ 中使用数据库的方法有很多。不幸的是，在工作中我的工具非常有限。我只能使用 Visual Studio C++ 6，甚至没有提升（尽管我已经学会了应对）——我假设我只能使用与 VS C++ 6 一起交付的标准发行版。

现在我的代码生成了大量数据，我想将其中一些数据存储在一个简单的数据库中（如 MS Access 数据库）。我可以使用哪些工具？

我的替代方法是通过结构和向量/数组创建一个类似数据库的对象。

我还安装了 Office 2010 - 也许我可以以某种方式使用 Access？

计算速度也很重要——越快越好。

> > **另一件重要的事情：**我工作中的 PC 不是开放式客户端。因此我无法安装任何新软件。下载和移动文件有效。基本上我必须能够通过将文件移动到所需的文件夹来安装该工具。

如果问题令人困惑或不够详细，请告诉我，届时我将尽我所能纠正这种情况。

提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T21:05:35.413

即使您说“只有标准工具”，我仍然会说，获取 SQLite。它是一个公共领域的软件，即**没有任何许可**。您可以下载一个“合并”——一个 .h 文件和一个 .c 文件，并将其包含到您的项目中。它应该在VC6中编译没有问题。非常易于使用，您将在 10 分钟内启动并运行。

它完全满足您的需求 - 单个文件中的数据库、无服务器、零设置等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T20:48:42.360

嗯，Visual C++ 6 确实包含[MFC](http://en.wikipedia.org/wiki/Microsoft_Foundation_Class_Library)，它有一套用于创建和操作[数据库](http://msdn.microsoft.com/en-us/library/2dhc1abk%28v=vs.71%29.aspx)的类，我相当肯定可以使用这些类来创建可从 Access 访问的数据库。不幸的是，微软的在线帮助似乎并没有追溯到那么远，但是你需要的所有参考资料都应该随 VS 6 一起提供。（在我看来，当时 VS 帮助系统还是更好。）

附带说明一下，您可以下载适用于 VS6 的[旧版本的 boost](http://www.boost.org/users/history/)。我不确定支持 VS6 的最后一个 boost 版本是什么，我猜它大约是 1.3 倍。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T20:51:16.743

VC6 应该可以工作。

你可以使用 MFC 的 db 对象吗？（我想当时的DAO？）。

如果您的应用程序确实生成*了大量*数据，您可能需要查看 MySql。我在较旧的 Access 表中遇到了大小限制。除非它是一个非常简单的数据库，否则您可能不想自己酿造（尽管如果您有很多时间可能会很有趣）。

关键是找到一个可以工作的驱动程序/数据库组合。我将安装 GA（免费）MySql，创建一个带有 1 个表的小型数据库，并找到可以工作的驱动程序（MySql 术语中的“连接器”）。也许是旧的 ODBC 驱动程序？

此外，请查看[ConnectionStrings.com](http://www.connectionstrings.com/mysql)以获取有关连接到特定数据库/驱动程序的信息。

# c++ - 从另一个文件读取时写入文件

> ID：13185016
> 
> 赞同：3
> 
> 时间：2012-11-01T20:31:37.630
> 
> 标签：c++, file-io, stream

我们可以在一个函数中同时使用输入文件的元素，同时将结果写入输出文件吗？

*while*语句内部是真的吗？

```
void solve(string inputFileName, string outputFileName)
{
//declaring variables
string filename = inputFileName;

//Open a stream for the input file
ifstream inputFile;
inputFile.open( filename.c_str(), ios_base::in );

//open a stream for output file
outputfile = outputFileName;
ofstream outputFile;
outputFile.open(outputfile.c_str(), ios_base::out);

while(!inputFile.eof())
{
    inputFile >> number;    //Read an integer from the file stream
    outputFile << number*100 << "\n"
    // do something

}

//close the input file stream
inputFile.close();

//close output file stream
outputFile.close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:40:33.927

```
while(!inputFile.eof()) 
```

不能很好地工作，因为它测试的是*上一个*操作是否失败，而不是下一个操作是否成功。

而是尝试

```
while(inputFile >> number)
{
    outputFile << number*100 << "\n"
    // do something

} 
```

您可以在其中测试每个输入操作是否成功，并在读取失败时终止循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:40:15.103

您可以，输入和输出流是相互独立的，因此在语句中将它们混合在一起没有组合效果。

# jquery - 从 AJAX 加载的内容中获取 JS 变量？

> ID：13185020
> 
> 赞同：0
> 
> 时间：2012-11-01T20:32:08.440
> 
> 标签：jquery, ajax, function, variables, plugins

我知道不可能在`.ajax()`加载的页面中调用 jQuery 插件，唯一的方法是在父页面中编写一个函数并在`function(data)`AJAX 请求的一部分中调用这个函数。这通常有效，但我被卡住了，因为我的函数需要加载内容中的变量才能正常工作，无论我尝试什么，我都无法将加载内容中的变量获取到父函数中，请参见我的示例：

这是我的功能：

```
function doPaginate(maxpage) {
    jQuery("#demo5").paginate({
        count: maxpage
    });
}​ 
```

这是我的`jQuery.ajax()`要求：

```
function loadProfileTab(tab, ownerinfo) {
    jQuery.post("./profile_ajax.php", {
        task: 'profiletab',
        v: tab,
        user_id: ownerinfo
    }, function(data) {
        jQuery("#profile_content_wrapper").html(data);
        doPaginate(maxpage);
    });
}​ 
```

我现在正在尝试将变量`maxpage`从 PHP 加载的内容中获取到`doPaginate(maxpage)` *AJAX 请求中的函数中*。

我知道一些解决方法，例如首先启动请求以获取结果`$maxpage`，然后再次启动请求以在新请求中使用此结果，但这似乎不是“最好的”解决方案。

有人可以带我找到更好的解决方案吗？还是我在上面的代码示例中尝试的只是不可能的？

最好的祝福！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:10:01.527

您可以将`maxpage`变量的值添加为 AJAX 返回的 HTML 中的隐藏字段，并使用**jQuery**来查找该值，如下所示。

```
var data = '<html><head></head><body><form><div>Ble</div><input id="maxpage" type="hidden" value="10"/></form></body></html>';
var maxpage = $(data).find('#maxpage').val();
console.log(maxpage);
alert(maxpage); 
```

这是此代码的[演示](http://jsfiddle.net/GAmwk/1/)。​</p>

# php - 我可以运行多少个并发 PHP 进程？

> ID：13185022
> 
> 赞同：0
> 
> 时间：2012-11-01T20:32:19.250
> 
> 标签：php, multiprocessing

我成功地启动和运行并发 PHP-Processes：

```
$WshShell = new COM('WScript.Shell');
foreach(array('foo', 'bar', ...) as $i) {
    $oExec = $WshShell->Run('C:\\wamp\\bin\\php\\php' . phpversion() . '\\php.exe ' .
        '-c C:\\wamp\\bin\\apache\\Apache2.2.21\\bin ' . // Use correct php.ini!
        '-f C:\\Users\\Max\\Project\\start.php "' . $i . '" ' . 0, false);
    }
} 
```

我想知道我可以同时运行多少个 PHP 进程（在通常的 Windows 和 Linux 环境中）？

# vbscript - QTP - 如果对象存储库中存在对象

> ID：13185023
> 
> 赞同：2
> 
> 时间：2012-11-01T20:32:23.910
> 
> 标签：vbscript, qtp

在 QTP 中，代码中有什么方法可以检查对象存储库中是否存在特定对象。我尝试了以下代码：

```
If JavaWindow(className).JavaDialog(dialogName).Exist Then
    doThisStuff
Else
    doThisStuffInstead
End If 
```

但从我从互联网上了解到的情况来看，这类似于 isVisible 方法，只有在指定对象当前可见时才会产生 true 。当我使用上面的代码时，我收到“在对象存储库中找不到 JavaDialog 对象”。有没有一种方法或任何方法可以防止这种错误并检查该对象是否确实存在？

感谢您的时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T22:13:32.917

我不确定您要在这里完成什么，通常在使用对象之前知道对象存储库中是否存在对象。疑问通常是在AUT（Application Under Test）中是否有相应的控件。

如果您真的遇到有时对象在存储库中而有时不在的情况（我可以想到几种方法来实现，但没有一种方法有多大意义），那么您可以使用 VBScript 的[错误处理机制](http://blogs.msdn.com/b/ericlippert/archive/2004/08/19/error-handling-in-vbscript-part-one.aspx)。

```
On Error Resume Next ' Turn off error handling
' Just check if object is in repository, there's no need to do anything with it
Dim Exists: Exists=JavaWindow(className).JavaDialog(dialogName).Exist
If Err.Number <> 0 Then
    doThisStuff 'Exists is still empty
Else
    doThisStuffInstead ' Exists is properly set
End If
On Error Goto 0 ' Resume regular error handling 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:29:22.313

因此，根据您收到的错误，出现的对话框与您存储在存储库中的对话框不同，或者您没有它。您是否检查过它是否真的存在于存储库中？您可以尝试仅找到此元素按钮。使用“如果对象不在存储库中 - 跳过该步骤”的方法并不是一个好主意。1\. 如果对象没有保存在存储库中，为什么要跳过测试/部分测试？2\. 如果没有，请务必妥善保管。

我会假设这个“缺失”的对象可能有一些值，它与存储库中的对象匹配，与测试不同。您可以通过手动设置希望 QTP 定位它的值来调整“匹配”机制。

# php - 复选框、PHP 和 SQL

> ID：13185027
> 
> 赞同：0
> 
> 时间：2012-11-01T20:32:42.220
> 
> 标签：php, sql, checkbox, status

快速问题：

我的代码中有一个复选框，告诉用户记录的状态是**DONE**还是**NOT DONE**。当用户在数据库中进行记录搜索时，显示的记录会显示当前记录状态（**DONE**或**NOT DONE**）。

如果未选中该复选框，则表示该记录未**完成**，因此我尝试在记录状态的一侧放置一个复选框，以便用户在完成对记录的处理后立即对其进行检查。在他们选中复选框后，该值被发送到数据库，告诉数据库记录的新状态为**DONE**

以下示例代码如何完成此操作：（结果显示在用户使用表单进行搜索后）

```
<?php
if(!isset($_POST['search']))
{
?>

<?php
}
else
{
    $from = trim($_POST['OLD']);
    $to = trim($_POST['NEW']);
    $status = isset($_POST['Status']) ? "AND status = 'DONE' " :"AND status = 'NOT DONE' ";

    $connection = mysql_pconnect("HOST", "USER", "PASS") or die("Connection failed. ".myslq_error());
    mysql_select_db("DBNAME") or die("Unable to select db. ".mysql_error());
    $query = "SELECT * FROM records WHERE Date >= '$from' AND Date <= '$to' ".$status." ORDER BY date ASC";

    $result = mysql_query($query) or die(mysql_error());

    echo "<table class='table' id='SearchResult' cellspacing='0' cellpadding='0'>";
        echo "<tr class='rowa'><b>";
            echo "<td class='col0 cell'>ID</td>";
            echo "<td class='col1 cell'>Name</td>";
            echo "<td class='col2 cell'>Last Name</td>";
            echo "<td class='col3 cell'>Place</td>";
            echo "<td class='col4 cell'>Station</td>";
            echo "<td class='col5 cell'>Phone</td>";
            echo "<td class='col6 cell'>Date of Record</td>";
            echo "<td class='col7 cell'>Status</td>";
        echo "</tr>";
    echo "</table>";
    while($record = mysql_fetch_object($result))
    {   
    echo "<table class='table' id='SearchResult' cellspacing='0' cellpadding='0'>";
        echo "<tr class='rowb'>";
            echo "<td class='col0 cell'>".$record->ID."</td>";
            echo "<td class='col1 cell'>".$record->Name."</td>";
            echo "<td class='col2 cell'>".$record->lastName."</td>";
            echo "<td class='col3 cell'>".$record->Place."</td>";
            echo "<td class='col4 cell'>".$record->Station."</td>";
            echo "<td class='col5 cell'>".$record->Phone."</td>";
            $year_part_of_date = explode('-', $record->date);
            echo "<td class='col6 cell'>".$record->date."</td>";
            echo "<td class='col7 cell'>".$record->Status."</td>";
        echo "</tr>";       
    echo "</table>";
    }   
}
?> 
```

* * *

谢谢大家给我指路 :D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:41:18.883

你的意思是，像这样？

```
echo "<td class='col7 cell'><input type='checkbox' name='status' ".($record->Status == 'DONE' ? 'checked' : '')."/></td>"; 
```

# javascript - 无法从父级调用 iframe 函数（firefox 插件）

> ID：13185029
> 
> 赞同：2
> 
> 时间：2012-11-01T20:32:49.220
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

我正在开发一个 firefox 插件，我需要的功能之一是在用户正在导航的页面内注入一个弹出元素。

我尝试在正文中注入一个 DIV，但是我的 DIV 继承了页面 CSS 并且每个页面中的弹出窗口显示都不同，所以我决定将它添加到 iframe 中。

这是插件代码：main.js

```
 exports.main = function() {};

var page_mod            = require("page-mod");  
var data                = require("self").data;
var self                = require("self"); 

function initPageMod()
{
      myPageMod = page_mod.PageMod({
          include: ['*'],
          contentScriptWhen: "start",
          contentScriptFile: [data.url("jquery.js"), data.url("modPage.js")],
           onAttach: function(worker) {
            worker.port.emit("inject", data.load("iframecontent.html"));
           }
        });
}

initPageMod(); 
```

我在这里所做的是在每个页面上安装一个 page-mod，注入 jquery 和我的 modPage.js 并在连接时调用“注入”端口。iframecontent.html：

```
<html>
    <head>
    <title>title</title>
    <script type="text/javascript">
        window.showPopup = function() {
        }
    </script>
    </head>
    <body>
        body
    </body>
</html> 
```

这是一个非常简单的 HTML 文件，带有一个脚本标记，它定义了我想从父文档调用的 showPopup 函数。

modPage.js：

```
self.port.on("inject", function(iframeContent) {
    $(function(){
        if(window.frameElement == null) {
            $('body').append(
                '<div id="myExternalDiv" style="position:fixed;width:2560;height:auto;float:left;left:0px;top:0px;z-index:2147483647;overflow-x:hidden;overflow-y:hidden;background: transparent;margin: 0px;padding: 0px;">' +
                '<iframe id="myMagicIframe" width="100%" height="100%" frameborder="0" style="width:100%; overflow-y: hidden;background-color:transparent;" scrolling="no" marginheight="0" frameborder="0" allowtransparency="true" onload="alert(1)"></iframe>' +
                '</div>'
            );

            try {
                var oIframe = document.getElementById("myMagicIframe");
                var iframeDoc = (oIframe.contentWindow.document || oIframe.contentDocument);

                iframeDoc.open();
                iframeDoc.write(iframeContent);
                iframeDoc.close();
            } catch (err) {
                alert(err);
            }

            setTimeout(function(){func()}, 5000);          
        }
    });
});

function func() {
    if (document.getElementById("myMagicIframe") != null) {
        try {
            document.getElementById("myMagicIframe").contentWindow.showPopup();
        }catch(err) {
            alert(err);
            setTimeout(function(){func()}, 1000);
        }
    }
} 
```

“注入”在 div 中创建一个 iframe，将 iframe 内容写入其中，并在 5 秒后调用 func 函数。发生的事情是我收到以下异常：“showPopup 不是函数”。document.getElementById("myMagicIframe").contentWindow.showPopup 未定义。

如果我在 HTML 中添加上面的代码并在 firefox 中运行它，它可以工作并调用 showPopup 函数，但在插件内部它不起作用。

我正在使用插件生成器： [https ://builder.addons.mozilla.org/package/159673/latest/](https://builder.addons.mozilla.org/package/159673/latest/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T21:30:36.067

首先感谢 canuckistani 让我知道代理概念。当您添加页面模块时，您的脚本将在沙箱上运行，并且您使用的变量是代理。

更改以下文件：

```
document.getElementById("myMagicIframe").contentWindow.showPopup(); 
```

至

```
document.getElementById("myMagicIframe").contentWindow.wrappedJSObject.showPopup(); 
```

解决了这个问题。

我的 iframe 被添加到页面中，因此 showPopup 函数被添加到真实的窗口对象中。currentWindow 对象是一个代理，没有添加的功能。使用 WrappedJSObject 对象，我能够获取真正的窗口对象并调用该函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:14:41.497

发生这种情况是因为，与从不同服务器（或者在这种情况下，通过资源 uri）加载 iframe 的任何页面一样，您无法跨框架边界访问其他文档。

我最好的建议是让附加到 iframe 的内容脚本将消息发送回 main.js，然后它可以将消息路由到附加到父文档的内容脚本。这是间接的，但它会起作用。

欲了解更多信息：

类似的例子，但使用面板：

[https://builder.addons.mozilla.org/package/159682/latest/](https://builder.addons.mozilla.org/package/159682/latest/)

关于使用内容脚本的文档：

[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/guides/content-scripts/index.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/guides/content-scripts/index.html)

# oracle - SQL 开发人员：使用数据/索引表空间名称导出模式脚本？

> ID：13185033
> 
> 赞同：0
> 
> 时间：2012-11-01T20:33:11.543
> 
> 标签：oracle, oracle-sqldeveloper

目前使用 SQL Developer 没有任何抱怨，现在有一个关于如何导出带有数据/索引表空间名称的模式脚本的问题。

右键单击 table => Export => 在“Export DLL”下有一个选项，“Schema”有一个复选框，但表空间没有。

那么我们如何才能实现一直使用表空间名称的海量脚本导出呢？

或者，是否有任何其他工具/命令来处理这项工作？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:02:47.270

`Storage`导出时应使用选项。要为单个对象获取 DDL，您也可以使用[`DBMS_METADATA.GET_DDL`](http://psoug.org/reference/dbms_metadata.html#dmgd)函数，但如果您需要导出具有复杂依赖关系的整个模式，最好使用 SQL Developer / Toad / PL\SQL Developer 等专用工具。

# java - 处理来自 RMI 服务器的对象并委托给客户端中的对象

> ID：13185034
> 
> 赞同：0
> 
> 时间：2012-11-01T20:33:12.643
> 
> 标签：java, rmi

我正在使用 RMI 创建一个即时聊天应用程序。服务器通过我需要客户端处理的某些对象发送。例如，服务器将发送一个`JoinedGroupOperation`类。在我的客户端应用程序中，我需要识别类并让我的处理程序接管（`HandleJoinedGroupOperation`）。这个类将在客户端做很多事情。

我的问题是如何处理来自服务器的类，所以我不需要做任何 if 语句？IE

```
if(server.getResponse() instanceof JoinedGroupOperation){
    HandleJoinedGroupOperation handle = new HandleJoinedGroupOperation();
    handle.foo();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:21:10.283

在您的情况下，一种可能的选择是使用[责任链](http://www.codeproject.com/Articles/41786/Chain-of-Responsibility-Design-Pattern) 设计模式。您应该创建一些可能的处理程序的抽象（如`HandleJoinedGroupOperation`），然后链接这些处理程序（最好在开始时）。例如，创建一个接口

```
 interface OperationHandler {
     void handle(Operation op);
} 
```

where`Operation`也是所有可能操作的基本类型。这个 type( `Operation`) 可以包含一个枚举类型 OperationType 的字段：

```
enum OperationType {
...
} 
```

然后在具体的处理程序中你可以简单地检查这个字段（虽然它会包含`if`语句，但这些语句将被封装在每个特定的处理程序中）

作为一个简单的例子，这里是一个处理程序的默认实现

```
class SimpleHandler implements OperationHandler {
 private OperationHandler next;

 public void handle(Operation op) {
     if (op.getType() == OperationType.SOMEYOURTYPE) {
        //do some stuff
     } else {
        next.handle(op);
     }
 }
} 
```

在这种情况下，您的`server.getResponse()`方法只会返回基本类型的`Operation`层次结构

另请阅读文章以获取更多信息

# php - 子类不继承父类的属性

> ID：13185037
> 
> 赞同：2
> 
> 时间：2012-11-01T20:33:22.400
> 
> 标签：php, class, inheritance, parent-child

这不像我想象的那样工作。这是我的课程：

```
class App {
    public $db;

    public function __construct($db) {
        $this->db = $db;
    }
}

class Analysis extends App {

    public $analysis_id;

    public function __construct($analysis_id) {
        $this->analysis_id = $analysis_id;
    }
}

class Standard extends Analysis {

    public function __construct($analysis_id) {
        parent::__construct($analysis_id);
    }
} 
```

`$db`是我传递给 App 类的数据库 (mysqli) 对象。

当我尝试执行新的标准分析时，我会这样启动它：

```
$analysis = new Standard($analysis_id); 
```

Analysis 类包含检索有关分析的元数据的方法，而 Standard 类包含检索该特定分析类型的计算的方法。我以为我可以访问该`$db`对象，但我不能从 Analysis 或 Standard 类访问。启动对象时是否需要将`$db`对象传递给标准类？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T20:35:24.430

您的`Analysis`类需要调用其父类的构造函数，`App`. 默认情况下不会发生这种情况。因为`$db`是`App`构造函数的参数，所以你也必须从子类中传入 this，然后 `parent::__construct($db)`从`Analysis`构造函数中调用。

正确代码：

```
class App {
    public $db;

    public function __construct($db) {
        $this->db = $db;
    }
}

class Analysis extends App {
    public $analysis_id;

    public function __construct($analysis_id, $db) {
        $this->analysis_id = $analysis_id;
        parent::__construct($db);
    }
}

class Standard extends Analysis {
    public function __construct($analysis_id, $db) {
        parent::__construct($analysis_id, $db);
    }
}

$analysis = new Standard($analysis_id, $db); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T20:38:10.570

每个*对象*都独立于其他对象。仅仅因为您在`App`某处实例化了一个对象并不意味着其他任何东西都可以访问该对象中的数据，无论这些类是否相关。`$db`您传递给 的实例的参数在`App`该对象中可用，并且仅在该对象中可用。

继承继承*对象结构*，而不是数据。

```
$app1 = new App($db);
$app2 = new App($db2); // <- different app instance, different data
$app3 = new App;       // <- does not have access to $db
$std  = new Standard;  // <- also does not have access to anything in $app1 
```

# inheritance - Doctrine2 继承和查询构建器

> ID：13185044
> 
> 赞同：0
> 
> 时间：2012-11-01T20:33:53.383
> 
> 标签：inheritance, symfony, doctrine-orm, class-table-inheritance

我将继承与 Doctrine 2.1 一起使用：

Fiche 是主实体，Artist 是从 Fiche 派生的

所以：Fiche -> 艺术家

然后我有这个方法，在另一个名为 Abonnement 的存储库中：

```
public function getCountAbonnes(\MyApp\FicheBundle\Entity\Fiche $fiche){

    $qb = $this->_em->createQueryBuilder();

    $qb->add('select', $qb->expr()->count('abonnement'));
    $qb->from('\Teelt\FicheBundle\Entity\Abonnement', 'abonnement');

    // !!!! this line is the problem !!!!
    $qb->where('fiche', $fiche);

    return $qb->getQuery()->getSingleScalarResult();
} 
```

这是 Abonnement ORM 定义：

```
MyApp\FicheBundle\Entity\Abonnement:
    type: entity
    repositoryClass: MyApp\FicheBundle\Repository\AbonnementRepository
    table: abonnement

    # many fiche for many users
    manyToOne:
      user:
        targetEntity: MyApp\UserBundle\Entity\User
        inversedBy: abonnements
      fiche:
        targetEntity: MyApp\FicheBundle\Entity\Fiche
        inversedBy: abonnements

# etc ... 
```

我在这里遇到的问题是我总是通过 Artist 实体而不是 Fiche，我得到了这个错误：

> 在此上下文中不允许使用“Teelt\FicheBundle\Entity\Artist”类型的表达式。

所以我想我必须从我的艺术家那里获取 Fiche ......这听起来很糟糕，因为它是同一个对象！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:02:06.160

感谢您的回答，它让我更接近解决方案，

但最后似乎：

```
$qb->where($qb->expr()->eq('abonnement.fiche', $fiche->getId() )); 
```

是解决方案。

正常吗？我认为 ID 的映射将是自动的，但如果我不使用 getId() 它会返回我的 Fiche 的 toString() 版本并生成一个：

> 从 MyAppFicheBundle 中选择计数（abonnement）：Abonnement abonnement WHERE abonnement.fiche = Miles Davis
> 
> [语法错误] line 0, col 100: Error: Expected end of string, got 'Davis'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T08:14:20.277

`$qb->where`接受字符串 (DQL) 或查询生成器表达式。

在您的情况下，将该行替换为：

```
$qb->where($qb->expr()->eq('abonnement.fiche', $fiche)); 
```

我也想这样改写开头：

```
$qb = $this->_em->createQueryBuilder()
    ->select($qb->expr()->count('abonnement'));
    ->from('TeeltFicheBundle:Abonnement', 'abonnement')
; 
```

# grails - 由于 Xerces，将 Grails 2.1.1 应用程序部署到 JBoss 的问题

> ID：13185045
> 
> 赞同：0
> 
> 时间：2012-11-01T20:34:07.600
> 
> 标签：grails, grails-2.0, xerces

我有一个使用 Rest 插件的 Grails 应用程序

当我将我的战争放入我的 JBoss 部署目录并启动它时，由于以下错误，应用程序的部署失败：

```
2012-11-01 15:48:33,931 ERROR [org.jboss.web.tomcat.service.deployers.JBossContextConfig] XML error parsing: context.xml
org.jboss.xb.binding.JBossXBRuntimeException: Failed to create a new SAX parser 
```

我相信这是指包含 xercesImpl 版本的 grails 应用程序以及拥有它自己的 JBoss。我们通常通过从我们的应用程序中删除 xercesImpl 或将它们设置为“提供”范围来纠正此问题。

我试图弄清楚如何解决此部署问题。我假设我必须编辑 BuildConfig.groovy 脚本并以某种方式告诉它排除 xerces 对吗？我将如何为这个插件做到这一点？如果这是一个似乎很容易指定排除项的“依赖项”。但我不知道如何为这个插件做......

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:31:59.590

在你`BuildConfig.groovy`添加这个：

```
inherits('global') {
   excludes 'serializer'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:01:30.977

事实证明，在我的 BuildConfig.groovy 的插件部分中执行以下操作毕竟可以解决问题......

```
compile(":rest:0.7"){
   excludes "xercesImpl"
} 
```

# python - 使用 Python 将字符串转换为 Csv 文件

> ID：13185046
> 
> 赞同：1
> 
> 时间：2012-11-01T20:34:15.027
> 
> 标签：python, csv, formatting

我有以下字符串

```
string = "OGC Number | LT No | Job /n 9625878 | EPP3234 | 1206545/n" and continues on 
```

我正在尝试将它写入一个 .CSV 文件，它看起来像这样：

```
OGC Number | LT No | Job   
------------------------------
9625878   | EPP3234  | 1206545
9708562   | PGP43221 | 1105482
9887954   | BCP5466  | 1025454 
```

*   其中字符串中的每个换行符都是一个新行
*   其中每个“|” 在刺痛是一个新的列

我无法获取格式。

我想我需要使用：

```
string.split('/n')
string.split('|') 
```

谢谢。

视窗 7，Python 2.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:38:48.820

未经测试：

```
text="""
OGC Number | LT No | Job   
------------------------------
9625878   | EPP3234  | 1206545
9708562   | PGP43221 | 1105482
9887954   | BCP5466  | 1025454"""

import csv
lines = text.splitlines()
with open('outputfile.csv', 'wb') as fout:
    csvout = csv.writer(fout)
    csvout.writerow(lines[0]) # header
    for row in lines[2:]: # content
        csvout.writerow([col.strip() for col in row.split('|')]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:48:39.197

如果您有兴趣使用第三方模块。[Prettytable](http://pypi.python.org/pypi/PrettyTable/)非常有用，并且有一组很好的功能来处理和打印表格数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T20:52:23.993

编辑：哎呀，我误解了你的问题！

下面的代码将使用两个正则表达式进行修改。

```
import re

str="""OGC Number | LT No | Job   
------------------------------
9625878   | EPP3234  | 1206545
9708562   | PGP43221 | 1105482
9887954   | BCP5466  | 1025454
"""
# just setup above 

# remove all lines with at least 4 dashes
str=re.sub( r'----+\n', '', str )

# replace all pipe symbols with their 
# surrounding spaces by single semicolons
str=re.sub( r' +\| +', ';', str )

print str 
```

# javascript - 推到 Heroku 时，推特引导模式不起作用

> ID：13185055
> 
> 赞同：1
> 
> 时间：2012-11-01T20:35:02.463
> 
> 标签：javascript, ruby-on-rails, heroku, twitter-bootstrap

模态在本地工作，但是当我推动时，它们没有出现。不是我必须单击才能显示的那些，也不是应该自动显示的那些。

有人遇到过这个问题吗？

```
<!-- modal window for explaining -->
<div class="modal fade center" id="self-b" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header center">
    <h3 style="font-weight:normal;">First things first</h3>
  </div>
</div>

<script type="text/javascript">
  $('#self-b').modal()
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T13:12:25.877

在这个线程上回答：

[Twipsy 和 Tablesorter 的 Heroku 资产在本地无法正常工作](https://stackoverflow.com/questions/8920836/heroku-assets-for-twipsy-and-tablesorter-not-working-locally-yes)

一个 gem 被更新并颠倒了在 appliaction.js 中加载 js 的顺序。放置需要树。最后修复了它。

# javascript - 必应地图从引脚数组中添加信息框

> ID：13185056
> 
> 赞同：0
> 
> 时间：2012-11-01T20:35:02.820
> 
> 标签：javascript, map, bing-maps, bing

尝试为每个引脚添加一个信息框，每个引脚从一个单独的函数加载，并从 xml 文件中附加相应的标题、描述、纬度/经度等。（[如果需要，来源](http://bingmapsv7modules.codeplex.com/SourceControl/changeset/view/19597#50537)）

在接收引脚数组的函数中，我试图遍历每个项目并相应地添加信息框。关于我在这里缺少什么的任何想法？

```
 function GeoRSSImportedCallback(items, bounds) {
          map.entities.push(items);

          for (var i = 0; i<items.length; i++) {
            items.Title = items.title;
            items.Description = items.description;
            Microsoft.Maps.Events.addHandler(itmes, 'click', displayInfoBox);
          }

          map.entities.push(infoboxLayer);
          map.setView({ bounds: bounds });
      }

    function displayInfoBox(e) {
        pinInfoBox.setOptions({title: e.target.Title, description: e.target.Description, visible:true, offset: new Microsoft.Maps.Point(0,25)});
        pinInfoBox.setLocation(e.target.getLocation());
} 
```

我确实在`GetMap()`函数中初始化了以下内容

```
 pinInfoBox = new Microsoft.Maps.Infobox(new Microsoft.Maps.Location(0, 0), { visible: false });
        infoboxLayer.push(pinInfoBox); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:47:07.257

您的代码使用不属于各种 Bing 地图对象的属性，因此我假设这是您的意图。您的 for 循环也有错误，以下应该更正确：

```
 function GeoRSSImportedCallback(items, bounds) {
      map.entities.push(items);

      for (var i = 0; i<items.length; i++) {
        items[i].Title = items[i].title; // Assumes .title is defined
        items[i].Description = items[i].description; // Assumes .description is defined
        Microsoft.Maps.Events.addHandler(items[i], 'click', displayInfoBox);
      }

      map.entities.push(infoboxLayer);
      map.setView({ bounds: bounds });
  } 
```

# java - 这段代码有什么问题，使它每次都不会将除数相加？

> ID：13185058
> 
> 赞同：-1
> 
> 时间：2012-11-01T20:35:04.230
> 
> 标签：java, numbers

我一直在尝试为课堂实验室编写一个程序，我相信我几乎拥有它，但它不会将除数（代码中的 div）加到总和中，如果它是完美的则返回 true数字，否则为假。我的代码编译并运行良好，但只会返回 false，大概是因为 sum 保持在 1（它初始化为 1，因为 1 是每个数字的除数）。number 是从构造函数和 set 语句引入的私有 int。

```
 public boolean isPerfect()
  {
    int x = number -1 ;
    int div = 0;
    int sum = 1;
    while(x> 1)
    {
        if(number % x == 0)
        {
            div =  x;
            sum=+ div;
        }
        x--;
    }
    if(sum == number)
    {
        return true;
    }
    else
    {
        return false;
    }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:36:18.147

这是倒退。 `sum =+ div;`应该`sum += div;`

你所拥有的基本上是`sum = (+div)`积极的`div`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T20:51:02.317

除了`+=`/`=+`问题，您的代码还说 1 是一个[完美数字](http://en.wikipedia.org/wiki/Perfect_number)，这是不正确的（6 是第一个完美数字）。这是因为你从`sum`1 开始，循环根本不会执行，然后你比较`sum`and `number`，它们等于 1。你可以只为这种特殊情况添加一个检查，例如

```
if(sum == number && number > 1)... 
```

附加提示 - 而不是：

```
if(sum == number)
{
    return true;
}
else
{
    return false;
} 
```

您可以使用：

```
return (sum == number); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T20:43:02.183

你可以有 sum= sum + div; 或总和+= div；

你的数字变量定义在哪里我猜它类似于 public boolean isPerfect(int number)

# android - Facebook Slide menu-slide to right in android？

> ID：13185070
> 
> 赞同：3
> 
> 时间：2012-11-01T20:36:19.863
> 
> 标签：android, facebook, user-interface

我使用[maddeye](https://github.com/maddeye/android-sidemenu)幻灯片菜单库来实现类似 Facebook 的滑动条。它工作正常，从右向左滑动。

现在我想要的是作为 Android 中的新 Facebook 应用程序从左向右滑动。

我应该使用什么修改来进行此更改？有谁知道如何将两侧作为新的 Facebook 应用程序滑动？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T21:03:49.683

我会在[https://github.com/SimonVT/android-menudrawer](https://github.com/SimonVT/android-menudrawer)尝试 android-menudrawer 项目，感谢 Jake Wharton，它刚刚达到 1.0.0。

我昨天试过了，它看起来符合你的需求。

如果您构建并安装示例 APK，您将看到一个名为“Right menu”的示例，我认为您正在寻找它。其他示例是普通滑动菜单的变体。

以下是此示例 APK (MenuDrawerSamples) 的屏幕截图。第一个屏幕截图显示了菜单抽屉关闭的右菜单示例。点击右上角的溢出菜单项，然后它会显示菜单，如第二个屏幕截图所示。如果需要，您可以从另一个操作栏按钮或其他按钮触发它。

![右侧菜单 - 关闭](../Images/1fdfd336f90874d92ce61d716a8f84c5.png) ![右菜单 - 打开](../Images/11b79ca52e8ffb0339536739474d805c.png)

# maven - Maven嵌套多模块项目

> ID：13185072
> 
> 赞同：2
> 
> 时间：2012-11-01T20:37:02.763
> 
> 标签：maven, nested, multi-module

我正在构建一个多模块项目，其中一个模块也是一个多模块项目。当我尝试使用 独立构建嵌套的多模块`-pl <multi-module child>`时，Maven 只构建 pom（子模块的顶级模块），而不构建多模块项目中指定的其余模块。

如果我不使用`-pl`并构建所有模块，一切正常，项目按预期构建。

任何想法为什么会发生这种情况，如果我单独挑出它，我无法让 Maven 构建整个项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:41:11.330

该`-pl`选项完全构建您指定的项目。Maven 将父 POM 视为恰好是层次结构中的第一个的常规项目。您可以做的是浏览您的“子多模块”项目并从那里执行 Maven。该选项`-rf`（简历来自）也可能有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-16T06:03:37.273

我认为实现这一目标的更好方法是使用`-pl`引用孙子模块之一。由于它可能取决于它的兄弟姐妹，因此可能会达到相同的结果。

这个项目是如何做到这一点的一个很好的例子： [https ://github.com/andyglick/maven-multi-level-modules-project](https://github.com/andyglick/maven-multi-level-modules-project)

简而言之，您可以这样做：

```
mvn test -pl com.example:my-grandchild-module -am 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-18T05:58:46.997

Maven 这样做没有充分的理由，除了这就是 Maven 一直以来的行为方式`-pm`。该`-am`选项可以包括列出的任何模块中列出的模块`-pl`，因为父级在某种程度上“依赖于它们”，但因为它们不是严格意义上的依赖关系，Maven 不会。

如果 Maven 是一个活跃的项目，一个新的`-amm`also-make-modules 选项可能会有所帮助。

# java - 将字符串转换为字节数组

> ID：13185073
> 
> 赞同：-1
> 
> 时间：2012-11-01T20:37:03.217
> 
> 标签：java, netbeans

我想将我的十六进制字符串转换为字节并将其保存到字节数组中。我在互联网上看到了代码并试图将其调整到我的程序中。但我完全不知所措。我对 java 很陌生。可以请帮助我进行转换。以下是我编写的代码。谢谢

```
public class Main {

    static String s = "00e83901c829e3735cc04137f3598a2b565c67665446d46ee74a6fd4ff8f556c7272fb6aeda45a757639aee558b130442fd4ff3f5cf98a08d0da6a23216d192dfd24bdda08a0b1081ae59fba0ae1516a2e02989df6b17a513b08895705552950e14fe430da3eae58fcc70619a129b534bbed6a9abc39706b1884b85a628781a86cc5223f038a7c0b48e1cf94033f7c5f1637900559b38fe2ccf41a14df5b8d81388fcebc69b59f7bc85a1c3e8b34a6deeb04a1e7fb1d3a7ae59009ea002aaa6ba5cdb9fa45653ac5eb89f61d436934f992197dbdb4c4a212cd7fbcd231debda57f11943b7f66215ecd616a4eed13fc9e38cd41d571b9faf496053b50a50321a076393ad91832959347f1fe5efd18e6267377108382fd992216a439ddc3dc59ce0ea955de95db767de4877caeaf8c7c4718e906d59db492cd610e7a28056f";

    public static void main(String[] args) {
    }

    private static byte[] hexStringToByteArray(String s) {
        int len = s.length();
        byte[] data = new byte[len / 2];
        for (int i = 0; i < len; i += 2) {
            data[i/2] = (byte) ((Character.digit(s.charAt(i), 16) << 4) +
                               Character.digit(s.charAt(i+1), 16));
        }
        return data;

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:45:01.660

如果您调用该方法，该代码将起作用。

```
public static void main(String[] args) {
    String s="00e83901c829e3735cc04137f3598a2b565c67665446d46ee74a6fd4ff8f556c7272fb6aeda45a757639aee558b130442fd4ff3f5cf98a08d0da6a23216d192dfd24bdda08a0b1081ae59fba0ae1516a2e02989df6b17a513b08895705552950e14fe430da3eae58fcc70619a129b534bbed6a9abc39706b1884b85a628781a86cc5223f038a7c0b48e1cf94033f7c5f1637900559b38fe2ccf41a14df5b8d81388fcebc69b59f7bc85a1c3e8b34a6deeb04a1e7fb1d3a7ae59009ea002aaa6ba5cdb9fa45653ac5eb89f61d436934f992197dbdb4c4a212cd7fbcd231debda57f11943b7f66215ecd616a4eed13fc9e38cd41d571b9faf496053b50a50321a076393ad91832959347f1fe5efd18e6267377108382fd992216a439ddc3dc59ce0ea955de95db767de4877caeaf8c7c4718e906d59db492cd610e7a28056f";
    byte[] b = hexStringToByteArray(s);
    System.out.println(b);

    //edit:
    System.out.println(Arrays.toString(b));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:41:13.767

您需要一个简单的实用程序类检查[。](http://www.jarvana.com/jarvana/view/com/ning/metrics.serialization-all/1.1.0/metrics.serialization-all-1.1.0-jar-with-dependencies-sources.jar!/org/apache/commons/codec/binary/Hex.java?format=ok)下面是我们从`hex string`to转换`byte[]`然后 to的示例，`hex string`然后我们正在比较以查看转换是否良好。

```
public class Test {

public static void main(String[] args) {
    String str = "00e83901c829e3735cc04137f3598a2b565c67665446d46ee74a6fd4ff8f556c7272fb6aeda45a757639aee558b130442fd4ff3f5cf98a08d0da6a23216d192dfd24bdda08a0b1081ae59fba0ae1516a2e02989df6b17a513b08895705552950e14fe430da3eae58fcc70619a129b534bbed6a9abc39706b1884b85a628781a86cc5223f038a7c0b48e1cf94033f7c5f1637900559b38fe2ccf41a14df5b8d81388fcebc69b59f7bc85a1c3e8b34a6deeb04a1e7fb1d3a7ae59009ea002aaa6ba5cdb9fa45653ac5eb89f61d436934f992197dbdb4c4a212cd7fbcd231debda57f11943b7f66215ecd616a4eed13fc9e38cd41d571b9faf496053b50a50321a076393ad91832959347f1fe5efd18e6267377108382fd992216a439ddc3dc59ce0ea955de95db767de4877caeaf8c7c4718e906d59db492cd610e7a28056f";
    String str1 = new String(encodeHex(hexStringToByteArray(str)));
    if (str1.equals(str)) {
        System.out.println("String matches ");
    }
}

public static byte[] hexStringToByteArray(String str) {

    char[] data = str.toCharArray();
    int len = data.length;
    byte[] out = new byte[len >> 1];
    for (int i = 0, j = 0; j < len; i++) {
        int f = Character.digit(data[j], 16) << 4;
        j++;
        f = f | Character.digit(data[j], 16);
        j++;
        out[i] = (byte) (f & 0xFF);
    }
    return out;
}

public static char[] encodeHex(byte[] data) {

    int l = data.length;
    char[] out = new char[l << 1];
    for (int i = 0, j = 0; i < l; i++) {
        out[j++] = DIGITS[(0xF0 & data[i]) >>> 4];
        out[j++] = DIGITS[0x0F & data[i]];
    }

    return out;
}

private static final char[] DIGITS = { '0', '1', '2', '3', '4', '5', '6',
        '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f' };
} 
```

输出：

```
 String matches 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T20:50:23.647

当您运行 java 程序时，它调用 main 方法，在您的情况下它是空的。您必须在 main 方法中调用您的方法。由于您有静态 hexStringToByteArray 方法，您可以这样调用它

```
 public static void main(String[] args) {

    hexStringToByteArray(s);

     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T21:49:43.930

我应该读得更好。我以为你的问题是关于转换的，但我现在认为是关于显示的。如果是关于显示，这里的其他人已经注意到你没有在你的 main 方法中调用任何东西（这是魔法发生的地方）。如果是关于转换，BigInterger 可以为您完成繁重的工作。以防万一：这将起作用（最后 5 行仅用于检查输出是否与输入匹配）。

```
public static void main(String[] args) {
    byte[] bytes = new BigInteger(s, 16).toByteArray();
    System.out.println(Arrays.toString(bytes));

    List<String> hexToCheck = new ArrayList<String>(bytes.length);
    for (byte b : bytes) {
        hexToCheck.add(String.format("%02X", b));
    }
    System.out.println(hexToCheck);
} 
```

（如果您的问题的正确答案是填写主要方法，请选择其他答案之一作为正确答案）

# asp.net-mvc - 如何在 Azure 网站上获取错误详细信息

> ID：13185074
> 
> 赞同：28
> 
> 时间：2012-11-01T20:37:07.533
> 
> 标签：asp.net-mvc, azure, simplemembership

我是 Azure 的新手。有人知道如何在部署到 Azure Web 的网站上获取详细的错误消息吗？

我添加`SimpleMembership`到网站，现在正在显示注册和登录（帖子）

> *抱歉，处理您的请求时出现了一个错误。*

我正在连接到家用计算机上的数据库（连接没有问题）。

`LogFiles`azure ftp 服务器上的文件夹有一些文件，但我看不到如何使用这些信息。我希望我能在 azure 上获得 YellowScreen ......

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-01T21:01:11.753

你有两个选择：

首先，您可以在 Web 配置中关闭自定义错误。这是一种快速而肮脏的方法，但它至少可以为您提供您正在寻找的信息。完成后请务必重新打开自定义错误。 **注意：**此方法将向全世界显示您的堆栈跟踪。

```
<configuration>
  <system.web>
    <customErrors mode="Off" />
  </system.web>
</configuration> 
```

其次，您可以远程桌面进入您部署的机器，转到 IIS 管理器，然后浏览到您的站点。一旦你在那里，重现错误，你会得到你正在寻找的黄屏死机。为此，您必须[启用详细错误](http://dnohr.dk/software/how-to-enable-detailed-errors-for-remote-client-iis7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-04T12:33:35.500

您还可以通过将控制台日志传送到云外壳来获得相同的诊断信息。登录到天蓝色。调出控制台...azure CLI。

```
az webapp log config --name <app-name> --resource-group
myResourceGroup --application-logging filesystem --level information 
```

要开始流式传输...

```
az webapp log tail --name <app-name> --resource-group myResourceGroup 
```

现在只需刷新浏览器即可查看错误。

`Ctrl-C`返回 CLI 将停止流式传输。

我在这里选择了这个：[教程：在 Azure 应用服务中构建 ASP.NET Core 和 Azure SQL 数据库应用](https://docs.microsoft.com/en-us/azure/app-service/tutorial-dotnetcore-sqldb-app?pivots=platform-windows)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-17T10:25:59.967

在 db 中创建一个表，您将在其中存储错误日志，我使用的是 EF 和名为 Logs 的表。

创建一个类：

```
public class MyAppExceptionFilter : IExceptionFilter
    {
        private MyApp.Models.ApplicationDbContext db = new Models.ApplicationDbContext();

        public void OnException(ExceptionContext context)
        {
            Exception ex = context.Exception;
            Log log = new Log();
            log.DateTime = DateTime.Now;
            log.LogText = "Exception happened, text:" + ex.Message;
            try
            {
                log.LogText +="User details:"+context.HttpContext.User.Identity.Name;
            }
            catch
            {
                log.LogText += "User details:none";
            }
            db.Logs.Add(log);
            db.SaveChanges();
        }
    } 
```

在 App_Start 文件夹的 FilterConfig.cs 中添加：

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
        {
            filters.Add(new HandleErrorAttribute());
            *filters.Add(new MyAppExceptionFilter());*
        } 
```

# c# - 由于 IronRuby 中对象的当前状态错误，操作无效

> ID：13185077
> 
> 赞同：0
> 
> 时间：2012-11-01T20:37:19.733
> 
> 标签：c#, ironruby, invalidoperationexception

我有一个 ruby​​ 脚本，它可以远程登录某些东西并创建一个输出文件。

我正在尝试使用以下代码调用脚本：

```
ScriptEngine rubyengine = IronRuby.Ruby.CreateEngine();
rubyengine.ExecuteFile(@"\Documents\query.rb"); 
```

并且收到“由于对象的当前状态而导致操作无效”错误。

ruby 脚本在代码之外单独执行时运行完美，所以我知道它工作正常。

有任何想法吗？

我正在使用 .NET 4 和最新版本的 IronRuby

# debian - ganglia web 前端在 debian lenny 中无法正常工作

> ID：13185078
> 
> 赞同：0
> 
> 时间：2012-11-01T20:37:19.873
> 
> 标签：debian, ganglia

我在 Debian Lenny 盒子中安装了 Ganglia gmetad。但是我了解到它的 webfrontend 包没有包安装支持。所以我从其他地方手动复制了一些 PHP 文件。除了图形生成之外，该界面正在工作。我试图找到一个在那里使用的 PHP 图形包，但到目前为止无济于事。我想知道是否有人对此有相关经验和解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:05:05.273

我解决了这个手动将 PHP 代码从 Ubuntu 安装复制到 Debian Lenny 机器的 /var/www 目录的问题（当然是在安装 apache2 和 PHP 之后），然后我相应地修改了 config.php 文件。

# python - Tornado Web 服务器文件下载问题

> ID：13185079
> 
> 赞同：3
> 
> 时间：2012-11-01T20:37:23.520
> 
> 标签：python, web, webserver, tornado

龙卷风网络服务器。

我有个问题。

我如何通过 tornado 网络服务器下载文件？

这是我的代码。

```
def get(self):
    data = self.xls_f()
    self.set_header('Content-Type', 'application/apk')
    self.set_header('Content-Disposition', 'attachment; filename=%s' % 'test.apk')
    f = file('test.apk') 
    self.write(f.read())
    self.finish() 
```

1.  我得到的文件包含不可读的内容，例如“asdfafasfd ㅁ ㅁ ㅇㄴㅁㄹㅁㄹㄴ”，也许这（'\n'）是不可读的。

2.  apk、图像文件等。我可以下载，但文件大小为 0k 或 1k。

我怎样才能下载 Tornado Web 服务器的多种文件（图像、apk 等）？

我想举例源代码。请。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T07:33:53.517

下面的代码是从龙卷风服务器下载文件，我在我的应用程序中使用它来下载 csv 文件。它可能会帮助你。

```
def post(self,filename):
    print('i download file handler : ',filename)

    ifile  = open(filename+".csv", "r")
    self.set_header ('Content-Type', 'text/csv')
    self.set_header ('Content-Disposition', 'attachment; filename='+filename+'')
    self.write (ifile.read()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-03T06:39:02.263

对于二进制文件，你应该这样做：

```
f = file('test.apk', 'rb') 
```

# c# - SelectedValue 无效，因为它不存在于项目列表中

> ID：13185080
> 
> 赞同：0
> 
> 时间：2012-11-01T20:37:26.673
> 
> 标签：c#, asp.net, sql, radiobuttonlist

我正在使用 a ，其中`GridView`有四列：`labelID`、`fName`和。这是一个简单的 Pass 或 Fail 。更新数据后，如果用户通过或失败，我希望它在下一次重新加载时提取数据以显示所选值。这是代码：`lName``Grade``Grade``Radiobuttonlist`

```
<asp:TemplateField>
           <ItemTemplate>
             <asp:RadioButtonList ID="rblChoices" runat="server" OnSelectedIndexChanged="rblChoices_SelectedIndexChanged" Text='<%# Eval("Grade") %>'>
               <asp:ListItem Value="Pass" Text="Pass"></asp:ListItem>
                 <asp:ListItem Value="Fail" Text="Fail"></asp:ListItem>
             </asp:RadioButtonList>
            </ItemTemplate>
</asp:TemplateField> 
```

C#代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        BindData();
    }
}
private void BindData()
{
    string connectiongString = "Data Source=WSCJTCSQ1;Initial Catalog=LiquorStore;Integrated Security=True";
    SqlConnection myConnection = new SqlConnection(connectiongString);
    SqlDataAdapter ad = new SqlDataAdapter("SELECT id, firstname, lastname, nickname, Grade FROM Company", myConnection);
    DataSet ds = new DataSet();
    ad.Fill(ds);
    gvUsers.DataSource = ds;
    gvUsers.DataBind();
} 
```

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:51:02.360

您必须为此使用 GridView RowDataBound 事件

**HTML**

```
<asp:GridView runat="server" ID="gvUsers" OnRowDataBound="gvUsers_RowDataBound"  AutoGenerateColumns="False">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <%# Eval("Name") %>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:RadioButtonList ID="rblChoices" runat="server">
                     <asp:ListItem Value="Pass" Text="Pass"></asp:ListItem>
                     <asp:ListItem Value="Fail" Text="Fail"></asp:ListItem>
                </asp:RadioButtonList>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

**C# 代码**

一个非常简单的公司类——Company.cs

```
public class Company
{
    public string Name { get; set; }
    public string Grade { get; set; }
} 
```

**.aspx.cs**

```
protected void Page_Load(object sender, EventArgs e)
{

    List<Company> companies = new List<Company>()
        {
            new Company(){ Name = "Toyota", Grade = "Pass"},
            new Company(){ Name = "Form", Grade = "Fail"}
        };

    gvUsers.DataSource = companies;
    gvUsers.DataBind();
}

protected void gvUsers_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            if (e.Row.DataItem != null)
            {
                string grade = DataBinder.Eval(e.Row.DataItem, "Grade") as string;
                if (!string.IsNullOrEmpty(grade))
                {
                    RadioButtonList radio = e.Row.FindControl("rblChoices") as RadioButtonList;
                    radio.Items.FindByValue(grade).Selected = true;
                    //You can use this to select as well - see comments from Andomar
                    //radio.SelectedValue = grade;
                }
            }
        }
    } 
```

**输出**

![在此处输入图像描述](../Images/f3fc69f1d885d1ddea9d85d3a0d4e36d.png)

# c - 有没有办法在不读取 Linux 上的 proc/sys 文件的情况下获取电池信息（状态、插入等）？

> ID：13185081
> 
> 赞同：6
> 
> 时间：2012-11-01T20:37:27.507
> 
> 标签：c, linux, kernel, battery, acpi

我想在 linux 上获取有关 C 中电池的信息。我*不想*读取或解析*任何*文件！是否有任何到 acpi/内核或任何其他模块的低级接口来获取我想要的信息？

我已经在网上搜索过，但每个问题都会导致答案“解析 /proc/foo/bar”。我真的不想这样做，因为我认为低级接口不会像文件那样快速变化。

此致。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:45:18.477

/proc 文件系统在磁盘上不存在。相反，内核在内存中创建它。它们在访问时由内核按需生成。因此，您的担忧是无效的——`/proc`文件将随着内核意识到更改而迅速更改。

检查[此](http://www.tldp.org/LDP/sag/html/proc-fs.html)`/proc`以获取有关文件系统的更多信息。

无论如何，我不相信有任何替代界面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T20:45:14.440

您可能正在寻找 UPower：[http ://upower.freedesktop.org/](http://upower.freedesktop.org/)

这是桌面环境和移动设备的共同需求，因此随着时间的推移出现了许多解决方案。例如，最古老的一个是`acpid`，现在几乎已经过时了。

虽然出于代码清晰的原因，我建议使用像 UPower 这样的轻量级抽象，但`/proc`和（在某种程度上）中的文件`/sys`被认为是 Linux 内核 ABI 的一部分，这意味着更改它们通常是不受欢迎的。

# php - 如何随机显示多个 图像？

> ID：13185084
> 
> 赞同：0
> 
> 时间：2012-11-01T20:37:30.930
> 
> 标签：php, javascript, random

我有这个脚本，我用它来显示带有超链接的随机图像。谁能告诉我如何调整它以一次显示 5 张随机图像，最好不要重复两次相同的图像？

谢谢

```
 <script language="JavaScript">
<!--

/*
Random Image Link Script- By JavaScript Kit(http://www.javascriptkit.com)
Over 200+ free JavaScripts here!
Updated: 00/04/25
*/

function random_imglink(){
var myimages=new Array()
//specify random images below. You can have as many as you wish
myimages[1]="data/adverts/ad1.png"
myimages[2]="data/adverts/ad2.png"
myimages[3]="data/adverts/ad3.png"
myimages[4]="data/adverts/ad4.png"
myimages[5]="data/adverts/ad5.png"

//specify corresponding links below
var imagelinks=new Array()
imagelinks[1]="http://www.javascriptkit.com"
imagelinks[2]="http://www.netscape.com"
imagelinks[3]="http://www.microsoft.com"
imagelinks[4]="http://www.dynamicdrive.com"
imagelinks[5]="http://www.freewarejava.com"

var ry=Math.floor(Math.random()*myimages.length)
if (ry==0)
ry=1
document.write('<a href='+'"'+imagelinks[ry]+'"'+'><img src="'+myimages[ry]+'" border=0></a>')
}
random_imglink()
//-->
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:43:50.603

```
function random_imglink(){
    var myimages=new Array();
    ...
    var imagelinks=new Array();
    ...
    var used = [];
    var ry;
    var howmany = 5;
    for (var i = 1; i <= howmany; i++) {
        ry=Math.ceil(Math.random()*myimages.length);
        while(used.indexOf(ry)!=-1){
            ry=Math.ceil(Math.random()*myimages.length);
        }
        used.push[ry];
        document.write('<a href='+'"'+imagelinks[ry]+'"'+'><img src="'+myimages[ry]+'" border=0></a>')
    }
} 
```

这假设您要在数组中放置比 5 个更多的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:22:12.053

如果您已经选择了一个图像，则可以将选择的图像移动到数组的末尾并将随机变量减少一个，而不是随机并检查。例子：

```
function random_imglink(select){
    if (select > 5 ) {
      // make it fail              ...
    }

    //specify random images below. You can have as many as you wish
    var myimages = new Array();
    myimages[0]="data/adverts/ad1.png"
    myimages[1]="data/adverts/ad2.png"
    myimages[2]="data/adverts/ad3.png"
    myimages[3]="data/adverts/ad4.png"
    myimages[4]="data/adverts/ad5.png"

    //specify corresponding links below
    var imagelinks=new Array()
    imagelinks[0]="http://www.javascriptkit.com"
    imagelinks[1]="http://www.netscape.com"
    imagelinks[2]="http://www.microsoft.com"
    imagelinks[3]="http://www.dynamicdrive.com"
    imagelinks[4]="http://www.freewarejava.com"

    var size = myimages.length

    for (var i=0;i<select;i++) {
        var index = Math.floor(Math.random() * size);                 

        document.write('<a href='+'"'+imagelinks[index]+'"'+'><img src="'+myimages[index]+'" border=0></a>');

        var tmp = myimages[index]; 
        myimages[index] = myimages[size - 1];
        myimages[size - 1] = tmp;

        tmp = imagelinks[index]; 
        imagelinks[index] = imagelinks[size - 1];
        imagelinks[size - 1] = tmp;  

        --size;
    }
}
random_imglink(3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-17T13:34:20.277

在一行代码中可能是这样的，并且不创建函数：

```
<img src="https://www.example.com/images/image-<?php echo rand(1,7); ?>.jpg"> 
```

为了让它工作，您需要为图像命名：image-1.jpg、image-2.jpg、image-3.jpg....image-7.jpg、

当页面加载时，PHP rand() 将回显一个随机数（在这种情况下，一个介于 1 和 7 之间的数字），完成 URL 并因此显示相应的图像。来源：[https ://jonbellah.com/load-random-images-with-php/](https://jonbellah.com/load-random-images-with-php/)

# windows-8 - 在 Visual Studio Simulator for Windows 8 应用程序中更改默认分辨率列表

> ID：13185091
> 
> 赞同：5
> 
> 时间：2012-11-01T20:37:56.087
> 
> 标签：windows-8, visual-studio-2012

是否可以在 Visual Studio Simulator for Windows 8 应用程序中更改默认屏幕分辨率列表？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-12-16T09:19:14.000

模拟器使用以下模式查找其他分辨率配置

```
C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Simulator\12.0\HardwareConfigurations\HardwareConfigurations*.xml 
```

因此，如果您将以下 XML 复制到该文件`HardwareConfigurations-SurfacePro3.xml`夹​​中调用的文件中（您需要管理员权限），您会在列表中获得一个额外的条目，允许您在 Surface Pro 3 上模拟运行。

```
<?xml version="1.0" encoding="UTF-8"?>
<ArrayOfHardwareConfiguration xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <HardwareConfiguration>
        <Name>12-2160x1440</Name>
        <DisplayName>12" 2160 x 1440 (3:2, 140%)</DisplayName>
        <Resolution>
            <Height>1440</Height>
            <Width>2160</Width>
        </Resolution>
        <DeviceSize>12</DeviceSize>
        <DeviceScaleFactor>140</DeviceScaleFactor>
    </HardwareConfiguration>
</ArrayOfHardwareConfiguration> 
```

![模拟器中的 Surface Pro 3 分辨率](../Images/b65f7d9bcb6c79db8b4213a26c7c58dd.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:54:57.253

根据我的发现，目前是不可能的。

从这篇[文章](http://blogs.msdn.com/b/visualstudio/archive/2011/09/29/first-look-at-windows-simulator.aspx)中，它说“*调色板中分辨率的可用性取决于您的视频卡支持的分辨率。* ”

# mongoose - 使用 Mongoose 列出集合项目

> ID：13185093
> 
> 赞同：0
> 
> 时间：2012-11-01T20:38:00.890
> 
> 标签：mongoose

[这个问题与此](https://stackoverflow.com/questions/5794834/how-to-access-a-preexisting-collection-with-mongoose)“相似”，但我要求替代（如果存在）。

我在 mongo shell 中创建了一个`Nums`带有集合的数据库。 作为 ODM使用，我想访问该集合并列出数字。 `numbers`
`mongoose`

```
var mongoose = require('mongoose')
  , Schema = mongoose.Schema;

mongoose.connect('mongodb://localhost/Nums');
mongoose.model('numbers', new Schema({value: Number}));

mongoose.connection.on('open', function(ref) {
  console.log('Connected to mongo server.');
});

mongoose.connection.on('error', function(err) {
  console.log('Could not connect to mongo server!');
  console.log(err);
});

var nums = mongoose.model('numbers');
nums.find({}, function(err, data) {console.log(err, data, data.length);}); 
```

为了访问已经创建的数据库/集合，我是否总是需要通过`mongoose.model`和`new Schema`调用？这一步可以绕过吗？

尽管这一步必须编写一次，但如果我有一个非常大的模式，这将是非常乏味的，只是从 mongo 中提取一个 db/collection。

是否有解决方法或者这是唯一的途径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:55:02.263

如果你想使用 Mongoose API 来访问一个集合，你需要为它定义一个模式。如果您不想为集合定义架构，则需要使用本[机驱动程序](http://mongodb.github.com/node-mongodb-native/index.html)或[mongojs](https://github.com/gett/mongojs)来访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:48:04.070

经过一些实验后，答案是“你必须指定架构和模型，但这还不错”。

例如，我可以这样做：

```
mongoose.connect('mongodb://localhost/Nums');
mongoose.model('numbers', new Schema()); 
```

但是正如@JohnnyHK 提到的那样，您错过了字段类型转换。

此外，假设您有一个大型架构，您可以指定要类型转换的内容：

```
mongoose.connect('mongodb://localhost/Nums');
mongoose.model('numbers', new Schema({username: String, address: String})); 
```

我只输入了两个字段。

# c# - 创建注册表项，而不是通常的

> ID：13185095
> 
> 赞同：5
> 
> 时间：2012-11-01T20:38:27.520
> 
> 标签：c#, .net

一直在谷歌搜索，但我无法找到如何创建注册表项本身，而不是所有教程中看到的子项字符串值。注册表就像一棵有树枝和树叶的树，我想创建一个新的分支并添加一个叶子

```
|tree
|-branch
|  |-my branch
|-branch 
```

谢谢你的帮助

更多信息使其更清楚，因为我被指出我不需要的东西;）

您单击其中一个注册表项，旁边是一个向下的箭头，单击它，您会获得更多的键，可能还有另一个向下的箭头表示更多的键，这就是我要创建的“文件夹”外观事物。我不知道我还能如何解释，但`CreateSubKey`对我没有这样做：

```
Key = Registry.CurrentUser.CreateSubKey("SOFTWARE\Microsof\game\addons\myaddons"); 
```

现在，当我检查它时，没有类似文件夹的图标命名`myaddons`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T21:02:28.977

不确定这是否是您想要做的，但您可以`Registry.SetValue(string keyName, string valueName, object value, RegistryValueKind valuekind)`用来创建键/子键及其值。

**例子**

```
Registry.SetValue(@"HKEY_CURRENT_USER\Software\Picrofo Software\", "", ""); //Tree
Registry.SetValue(@"HKEY_CURRENT_USER\Software\Picrofo Software\Subkey", "", ""); //Branch
Registry.SetValue(@"HKEY_CURRENT_USER\Software\Picrofo Software\Subkey", "Value Name", "Value", RegistryValueKind.String); //Branch's value
Registry.SetValue(@"HKEY_CURRENT_USER\Software\Picrofo Software\Another Subkey", "", ""); //Branch 
```

这将创建一个`HKEY_CURRENT_USER\Software\`名为的密钥`Picrofo Software`。然后，在我们使用 name 创建的键中创建一个子键，`Subkey`并设置 name`Value Name`的值`Value`及其 type的值`String`。最后，使用没有特定值`Picrofo Software`的名称创建另一个子键。`Another Subkey`

![例子](../Images/de66d80cd02db2b14d5b98086a7c94b9.png)

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:43:15.283

我相信您正在寻找[RegistryKey.CreateSubKey](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.createsubkey.aspx)方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T20:43:31.607

MSDN 上的 RegistryKey 类的文档中提供了如何执行此操作的示例。您基本上将“分支”创建为子键，然后针对该对象调用相同的函数。 [http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey%28v=vs.71%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T20:44:37.167

[Registry](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28MICROSOFT.WIN32.REGISTRY%29;k%28SOLUTIONITEMSPROJECT%29;k%28SOLUTIONITEMSPROJECT%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK%2cVERSION%3dV4.0%22%29;k%28DevLang-CSHARP%29&rd=true)和[RegistryKey](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28MICROSOFT.WIN32.REGISTRYKEY%29;k%28SOLUTIONITEMSPROJECT%29;k%28SOLUTIONITEMSPROJECT%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK%2cVERSION%3dV4.0%22%29;k%28DevLang-CSHARP%29&rd=true)类应该能够帮助您。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T20:58:57.733

您总是在创建子密钥，您无法创建根密钥。您可以选择要添加的顶级密钥。我建议您添加到 HKEY_CURRENT_USER 中，这是最好的方法

```
Registry.CurrentUser.CreateSubKey("myKey");//HKEY_CURRENT_USER 
```

但是您可以添加到其他键。如果要添加到根密钥，请使用：

```
Registry.ClassesRoot.CreateSubKey("myKey");//HKEY_CLASSES_ROOT 
```

如果你想添加到 HKEY_LOCAL_MACHINE 使用

```
Registry.LocalMachine.CreateSubKey("myKey");//HKEY_LOCAL_MACHINE 
```

等等

# algorithm - 最长科拉兹序列

> ID：13185102
> 
> 赞同：3
> 
> 时间：2012-11-01T20:39:10.520
> 
> 标签：algorithm, numbers, sequence, collatz, highest

在做实现[Collat​​z 猜想](http://en.wikipedia.org/wiki/Collatz_conjecture)的 Java 作业时，我想到了一个不同的目标，即找到最长的 Collat​​z 序列。我的程序计算步骤如下：

```
public class Collatz {

static int count = 0;

    static void bilgi (int n){

        int result = n;
        System.out.println("Result: "+result+ " Step: "+count);

        if (result <= 1) {
            result = 1;
        } else if (result%2 == 0){
            result = result/2;
            count = count + 1;
            bilgi(result);

        } else {
            result = (result*3)+1;
            count = count + 1;
            bilgi(result);
        }
    }

    public static void main(String[] args) {
        bilgi(27);
    }

} 
```

我想找到最高的步数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T07:46:18.533

```
static int bilgi(int n) {
    int result = n;
    if (result <= 1) return 1;
    if (result % 2 == 0) return 1+bilgi(result/2);
    return 1+bilgi(3*result+1);
} 
```

然后你收集`bilgi(i)`调用的结果并选择最大值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-31T02:01:05.870

任何小于 1 亿的初始起始数字的最长级数是 63,728,127，有 949 步。对于小于 10 亿的起始数字，它是 670,617,279，有 986 个步骤，对于小于 100 亿的数字，它是 9,780,657,630，有 1132 个步骤

来源：[http ://en.wikipedia.org/wiki/Collat​​z_conjecture](http://en.wikipedia.org/wiki/Collatz_conjecture)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-29T20:08:55.157

如果您正在寻找 1 到 100 之间的最大值，您可以替换：

```
public static void main(String[] args) {
    bilgi(27);
} 
```

和 ：

```
public static void main(String[] args) {

    static int maxcountsofar = 0;
    static int start = 0;
    static int thisone = 0;
    for (int iloop = 1; iloop <= 100; iloop++)
    {
       thisone = bilgi(iloop);
       if (thisone > maxcountsofar)//if this one is bigger than the highest count so far then
      {
        start = iloop;//save this information as best so far
        maxcountsofar = thisone;
      }
    }
    System.out.println("Result: " + start.Tostring() + " Step: " + maxcountsofar.Tostring() );
    //I know this is a really old post but it looked like fun.

} 
```

/* 另外，将 println() 从 bilgi() 函数中取出，它会为遇到的每个步骤生成一行，这将毫无价值且非常耗时。

使用 Vesper 的 bigli() 因为它比你的快得多。*/

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-27T02:35:03.247

我知道这是一个老问题，但我只是在解决它，我建议任何这样做的人，只需使用数组列表并获取 .size()，我就是这样做的，因为我也想查看这些值.

# hover - CSS：悬停不按我期望的方式工作

> ID：13185103
> 
> 赞同：0
> 
> 时间：2012-11-01T20:39:12.087
> 
> 标签：hover, foreground

我有一个属于 .stickyNote 类的 div，在该 div 中我有一个`<h1>`标签作为便笺的标题和一个`<p>`标签作为便笺的内容。就像这样：`<div class="stickyNote"> <h1>Drag Me</h1> <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum..</p> </div>-->`

stickyNote 类的样式是这样的，当一个人将鼠标悬停在它上面时，它会更靠近前台，使用这个 CSS：

```
.stickyNote :hover,.stickyNote :focus{  
   -moz-box-shadow:10px 10px 7px rgba(0,0,0,.7);  
   -webkit-box-shadow: 10px 10px 7px rgba(0,0,0,.7);  
   box-shadow:10px 10px 7px rgba(0,0,0,.7);  
   -webkit-transform: scale(1.25);  
   -moz-transform: scale(1.25);  
   -o-transform: scale(1.25);  
   position:relative;  
   z-index:5;  
 } 
```

但是，当我将鼠标悬停在 StickyNote div 上时`<h1>`，该`<p>`部分总是单独出现在前台，即当我将鼠标悬停在div 上时`<h1>`，它将出现在前台，当我将鼠标悬停在 div 上时`<p>`，它将出现在前台，但绝不是整个 stickyNote . 我错过了什么？div 作为一个整体。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-01T20:44:23.453

```
.stickyNote :hover, .stickyNote :focus{ 
```

不是逗号第一

```
.stickyNote :hover .stickyNote :focus{ 
```

# android - 需要在 Android ICS 上使用 Motorola GATT Profile API 的低功耗蓝牙示例

> ID：13185109
> 
> 赞同：1
> 
> 时间：2012-11-01T20:40:11.087
> 
> 标签：android, motorola, bluetooth-lowenergy

截至今天，摩托罗拉开发者门户网站正在将问题重定向到 Stack Overflow 和谷歌 Android 论坛，因此希望摩托罗拉的人正在倾听。

我正在尝试在 ICS 设备（在我的情况下为 Atrix HD）上开发一个简单的应用程序，该应用程序可以查询和写入 GATT 配置文件（不仅仅是心率监测器）。

[对于 ICS， http://www.motorola.com/sites/motodev/library/bluetooth_gatt_apis.html](http://www.motorola.com/sites/motodev/library/bluetooth_gatt_apis.html)上的说明/示例充其量是不完整的。例如 MOT_BTLE_Stubs.jar 不包含在 ICS 下载中。相反，我们有 BluetoothGatt.jar 和 BluetoothGattService.jar。但是这些库没有教程中提到的 BluetoothGatt.connectGatt(...)。

ICS 插件包含一个示例，它引导我生成 ACTION_GATT 意图，但是当我收到以下内容的 NULL 返回时失败：

String[] ObjectPathArray = (String[])intent.getStringArrayExtra(BluetoothDevice.EXTRA_GATT);

一个编写良好的 ICS 示例将为摩托罗拉和规模虽小但不断壮大的 Android BLE 开发者社区提供极大的帮助。

谢谢！

PVS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T03:21:48.650

我偶然发现了完全相同的问题。

我有一个更新到 Android ICS (4.0.4) 的 Razr XT910，我正在使用摩托罗拉手机 SDK 插件“ `Motorola_ICS_R2`”。

我现在谈论的是 SDK 插件示例“Motorola_BLE_profile_sample”，我将其用作配置文件模板来与运行 SimplePeripheral 示例的 TI CC2540 开发套件的 Keyfob 进行通信。

当您创建配置文件服务时，请确保调用 BluetoothGattService(...) 包含您要连接的设备实现的有效[GATT 主要服务声明 UUID 。](http://developer.bluetooth.org/gatt/services/Pages/ServicesHome.aspx)这将解决您使用空 ObjectPathArray 的问题。

例如，我的 Keyfob 使用 UUID 0x180A 实现设备信息服务，您可以在 BLE CC2540 开发套件用户指南 (http://www.ti.com/lit/ug/swru270b/swru270b) 中找到 Keyfob 的此信息.pdf) 在图 20 中的第 14 页。您看到句柄 0x01、0x0C、0x0F 的类型 0x2800，这些都是主要服务。[您可以在此处](http://developer.bluetooth.org/gatt/declarations/Pages/DeclarationsHome.aspx)找到 GATT 配置文件属性类型。现在您将您的个人资料模板 (Motorola_BLE_profile_sample) 从

```
 public static final ParcelUuid HRM = ParcelUuid
        .fromString("0000180D-0000-1000-8000-00805f9b34fb"); 
```

至：

```
 public static final ParcelUuid HRM = ParcelUuid
        .fromString("0000180A-0000-1000-8000-00805f9b34fb"); 
```

运行应用程序后，LogCat 如下所示：

```
11-09 03:17:39.674: I/BluetoothLe(17462): onStop()
11-09 03:17:40.478: I/BluetoothLe(17462): onStart()
11-09 03:17:40.478: I/BluetoothLe(17462): onResume()
11-09 03:17:40.978: D/BluetoothLeREceiver(17462): Bluetooth LE receiver intnet action: android.bluetooth.devicepicker.action.DEVICE_SELECTED
11-09 03:17:40.986: I/BluetoothLe(17462): enter startConnection and value of devicePicker is true
11-09 03:17:40.986: D/BluetoothLe(17462): Calling  btDevice.getGattServices
11-09 03:17:40.994: V/BluetoothLe(17462): primary service was successful
11-09 03:17:40.994: D/BluetoothLe(17462): GATT action
11-09 03:17:41.002: D/BluetoothLe(17462): GATT Service data list len : 1
11-09 03:17:41.002: V/BluetoothLe(17462): getBluetoothGattService()
11-09 03:17:41.002: D/BluetoothLe(17462):  ++++++ Creating BluetoothGattService with device = 90:D7:EB:B2:4D:1D uuid 0000180a-0000-1000-8000-00805f9b34fb objPath = /org/bluez/358/hci0/dev_90_D7_EB_B2_4D_1D/service0010
11-09 03:17:41.002: D/BluetoothGattService(17462): Discovery State 0 to 0
11-09 03:17:41.002: D/BluetoothGattService(17462): Bond state of remote device : 90:D7:EB:B2:4D:1D is 12
11-09 03:17:41.002: D/BluetoothGattService(17462): doDiscovery /org/bluez/358/hci0/dev_90_D7_EB_B2_4D_1D/service0010
11-09 03:17:41.002: D/BluetoothGattService(17462): Discovery State 0 to 2
11-09 03:17:41.002: D/BluetoothLe(17462): getBluetoothGattService(): Adding gatt service to map for : 0000180a-0000-1000-8000-00805f9b34fbsize :1
11-09 03:17:41.002: D/BluetoothGattService(17462): readCharacteristicValue for /org/bluez/358/hci0/dev_90_D7_EB_B2_4D_1D/service0010
11-09 03:17:55.463: D/BluetoothGattService(17462): onCharacteristicsDiscovered: [Ljava.lang.String;@41412ea0
11-09 03:17:55.471: D/BluetoothGattService(17462): Discovered  9 characteristics for service /org/bluez/358/hci0/dev_90_D7_EB_B2_4D_1D/service0010 ( null )
11-09 03:17:55.510: D/BluetoothGattService(17462): Discovery State 2 to 1
11-09 03:17:55.510: D/BluetoothLe(17462): onDiscoverCharacteristicsResult :  path : /org/bluez/358/hci0/dev_90_D7_EB_B2_4D_1D/service0010 result : true
11-09 03:17:55.510: D/BluetoothLe(17462): gattService.getServiceUuid() ======= 0000180a-0000-1000-8000-00805f9b34fb
11-09 03:17:55.517: D/BluetoothGattService(17462): Characteristic UUID: 00002a23-0000-1000-8000-00805f9b34fb
11-09 03:17:55.517: D/BluetoothGattService(17462): Characteristic UUID: 00002a24-0000-1000-8000-00805f9b34fb
11-09 03:17:55.517: D/BluetoothGattService(17462): Characteristic UUID: 00002a25-0000-1000-8000-00805f9b34fb
11-09 03:17:55.517: D/BluetoothGattService(17462): Characteristic UUID: 00002a26-0000-1000-8000-00805f9b34fb
11-09 03:17:55.517: D/BluetoothGattService(17462): Characteristic UUID: 00002a27-0000-1000-8000-00805f9b34fb
11-09 03:17:55.517: D/BluetoothGattService(17462): Characteristic UUID: 00002a28-0000-1000-8000-00805f9b34fb
11-09 03:17:55.517: D/BluetoothGattService(17462): Characteristic UUID: 00002a29-0000-1000-8000-00805f9b34fb
11-09 03:17:55.517: D/BluetoothGattService(17462): Characteristic UUID: 00002a2a-0000-1000-8000-00805f9b34fb
11-09 03:17:55.525: D/BluetoothGattService(17462): Characteristic UUID: 00002a50-0000-1000-8000-00805f9b34fb
11-09 03:17:55.525: D/BluetoothGattService(17462): value is : /org/bluez/358/hci0/dev_90_D7_EB_B2_4D_1D/service0010/characteristic0012,/org/bluez/358/hci0/dev_90_D7_EB_B2_4D_1D/service0010/characteristic0014,/org/bluez/358/hci0/dev_90_D7_EB_B2_4D_1D/service0010/characteristic0016,/org/bluez/358/hci0/dev_90_D7_EB_B2_4D_1D/service0010/characteristic0018,/org/bluez/358/hci0/dev_90_D7_EB_B2_4D_1D/service0010/characteristic001a,/org/bluez/358/hci0/dev_90_D7_EB_B2_4D_1D/service0010/characteristic001c,/org/bluez/358/hci0/dev_90_D7_EB_B2_4D_1D/service0010/characteristic001e,/org/bluez/358/hci0/dev_90_D7_EB_B2_4D_1D/service0010/characteristic0020,/org/bluez/358/hci0/dev_90_D7_EB_B2_4D_1D/service0010/characteristic0022,
11-09 03:17:55.525: D/BluetoothGattService(17462): Characteristic UUID: 00002a23-0000-1000-8000-00805f9b34fb
11-09 03:17:55.525: D/BluetoothLe(17462):  Map with key UUID : 00002a23-0000-1000-8000-00805f9b34fb value : /org/bluez/358/hci0/dev_90_D7_EB_B2_4D_1D/service0010/characteristic0012
11-09 03:17:55.525: D/BluetoothGattService(17462): Characteristic UUID: 00002a24-0000-1000-8000-00805f9b34fb
11-09 03:17:55.525: D/BluetoothLe(17462):  Map with key UUID : 00002a24-0000-1000-8000-00805f9b34fb value : /org/bluez/358/hci0/dev_90_D7_EB_B2_4D_1D/service0010/characteristic0014
11-09 03:17:55.525: D/BluetoothGattService(17462): Characteristic UUID: 00002a25-0000-1000-8000-00805f9b34fb
11-09 03:17:55.525: D/BluetoothLe(17462):  Map with key UUID : 00002a25-0000-1000-8000-00805f9b34fb value : /org/bluez/358/hci0/dev_90_D7_EB_B2_4D_1D/service0010/characteristic0016
11-09 03:17:55.525: D/BluetoothGattService(17462): Characteristic UUID: 00002a26-0000-1000-8000-00805f9b34fb
11-09 03:17:55.525: D/BluetoothLe(17462):  Map with key UUID : 00002a26-0000-1000-8000-00805f9b34fb value : /org/bluez/358/hci0/dev_90_D7_EB_B2_4D_1D/service0010/characteristic0018
11-09 03:17:55.525: D/BluetoothGattService(17462): Characteristic UUID: 00002a27-0000-1000-8000-00805f9b34fb
11-09 03:17:55.533: D/BluetoothLe(17462):  Map with key UUID : 00002a27-0000-1000-8000-00805f9b34fb value : /org/bluez/358/hci0/dev_90_D7_EB_B2_4D_1D/service0010/characteristic001a
11-09 03:17:55.533: D/BluetoothGattService(17462): Characteristic UUID: 00002a28-0000-1000-8000-00805f9b34fb
11-09 03:17:55.533: D/BluetoothLe(17462):  Map with key UUID : 00002a28-0000-1000-8000-00805f9b34fb value : /org/bluez/358/hci0/dev_90_D7_EB_B2_4D_1D/service0010/characteristic001c
11-09 03:17:55.533: D/BluetoothGattService(17462): Characteristic UUID: 00002a29-0000-1000-8000-00805f9b34fb
11-09 03:17:55.533: D/BluetoothLe(17462):  Map with key UUID : 00002a29-0000-1000-8000-00805f9b34fb value : /org/bluez/358/hci0/dev_90_D7_EB_B2_4D_1D/service0010/characteristic001e
11-09 03:17:55.533: D/BluetoothGattService(17462): Characteristic UUID: 00002a2a-0000-1000-8000-00805f9b34fb
11-09 03:17:55.533: D/BluetoothLe(17462):  Map with key UUID : 00002a2a-0000-1000-8000-00805f9b34fb value : /org/bluez/358/hci0/dev_90_D7_EB_B2_4D_1D/service0010/characteristic0020
11-09 03:17:55.533: D/BluetoothGattService(17462): Characteristic UUID: 00002a50-0000-1000-8000-00805f9b34fb
11-09 03:17:55.533: D/BluetoothLe(17462):  Map with key UUID : 00002a50-0000-1000-8000-00805f9b34fb value : /org/bluez/358/hci0/dev_90_D7_EB_B2_4D_1D/service0010/characteristic0022
11-09 03:17:55.533: D/BluetoothLe(17462): Created map with size : 10 
```

就这样 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T06:13:26.083

完全同意您对摩托罗拉文档、示例和开发人员支持的糟糕程度的看法。

我确实找到了这个：[http](http://www.tekritisoftware.com/how-to-implement-ble-in-android) ://www.tekritisoftware.com/how-to-implement-ble-in-android 这可能会有所帮助，但我仍在等待我的 btle 设备，所以还没有尝试过。

# php - PHP 和 XML：需要在“多维”xml 结构中检索值，其中标签具有相同的名称

> ID：13185112
> 
> 赞同：0
> 
> 时间：2012-11-01T20:40:20.840
> 
> 标签：php, xml, xpath, xml-parsing

我有一个对象，它有一些 xml 元数据作为名为 MetadataXML 的属性。我需要获取 xml 标签内的值并将它们存储在 php 变量中。我已经成功地在这个 xml 结构上做到了：

```
[MetadataXML] =>

"<metadata>

     <title>A title</titel>
     <body>Some text in the body</body>

 </metadata>" 
```

使用此代码：

```
$meta = simplexml_load_string($object->MetadataXML);

$title = (string)$meta->title;
$body  = (string)$meta->body; 
```

但现在我有一个看起来像这样的 xml 结构：

```
<metadata>

    <two_related_books>

        <book>
            <id>20</id>
            <title>A title</title>
        </book>

        <book>
            <id>55</id>
            <title>Another title</title>
        </book>

    </two_related_books>

</metadata> 
```

我尝试以几种不同的方式遍历书籍项目，以某种方式获取每本书的 id 和 title 标签内的值。但一直没有成功检索任何东西。我也尝试过使用 XPath。

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:41:56.917

像这样的东西应该工作：

```
$meta = simplexml_load_string( $object->MetadataXML);
foreach( $meta->two_related_books->book as $book) {
    echo $book->id;
    echo $book->title;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:55:00.633

对于这些 tash，最好使用 DOMDocument 和 XPath 对象。

基础示例：

```
// Load XML
$dom = new \DOMDocument;
$dom->loadXML($xmlData);

// Create a new XPath object
$domXPath = new \DOMXPath($dom);

$bookItems = $domXpath->evaluate('//book'); // Or "/metadata/two_related_books/book", fot get from root node
// Or
$bookItems = $domDocument->getElementsByTagName('book');

foreach ($bookItems as $item) {
  // Here code for control each item
} 
```

# css - Telerik Grid表格宽度溢出父div

> ID：13185113
> 
> 赞同：0
> 
> 时间：2012-11-01T20:40:25.530
> 
> 标签：css, telerik

我有一个在 MVC 应用程序中使用的 Telerik 网格。父div宽度设置为最大尺寸，表格也设置为最大尺寸，但表格部分似乎忽略了它，即使当我进入Web开发人员工具时，我也可以看到宽度。

html基本上是：

```
<div id="main">
   <div id="grid">
       <table id="TeleTable">
       </table
   </div>
</div>

css:
#main { width: 900px; margin 0 auto; }
#grid { max-width: 900px; }
#TeleTable { max-width: 900px; margin 0px; padding 0px; } 
```

我也尝试过 width: 100% on the table 并增加 Main 宽度，但无济于事。

谢谢你阅读我的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:39:07.073

玩了之后，我发现我显示的列太多了，所以无论我将宽度设置为多少，表格都无法缩小，因为它必须显示数据。所以我从 8 列减少到 5 列，现在它非常适合。

# apache - 禁止使用通配符访问子目录

> ID：13185114
> 
> 赞同：0
> 
> 时间：2012-11-01T20:40:27.187
> 
> 标签：apache, .htaccess, wildcard

我有这个目录结构：

```
photos/
  photos/2012_01
    photos/2012_01/thumbnails
    photos/2012_01/large
  photos/2012_02/
    photos/2012_02/thumbnails
    photos/2012_02/large
  photos/2012_03/
    etc... 
```

是否可以禁用`photos/*/large`单个 .htaccess 文件中所有文件的访问（全部拒绝） `photos/.htaccess`？或者我必须在每个`photos/*/large`目录中添加一个 .htaccess 吗？

谢谢，马丁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:02:12.443

是的，您可以匹配`large`URI 中的 a 并使用 mod_rewrite 的`F`标志来禁止访问。如果您想要照片目录中的 htaccess 文件，那么您需要：

```
RewriteEngine On
RewriteRule /large$ - [L,F] 
```

# android - Android：如何根据焦点禁用 EditText

> ID：13185116
> 
> 赞同：0
> 
> 时间：2012-11-01T20:40:29.423
> 
> 标签：android, focus, android-edittext

我正在做一个有两个 EditText 的应用程序。我想做的是，如果您单击一个并在其上写字，则另一个必须擦除它拥有的任何内容，并且仅显示提示字符串。我正在尝试使用以下检查方法进行操作：

```
if(celsius.isFocused()){

        faren.setText(faren.getHint().toString());
    }
    if(faren.isFocused()){

        celsius.setText(celsius.getHint().toString());
    } 
```

然后我在 onCreate() 方法中调用此方法，但当然它只检查一次，如果在循环中使用该 checkMethod，应用程序不会显示任何内容，它会冻结。一个建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:43:22.777

使用[OnFocusChangeListener](http://developer.android.com/reference/android/view/View.OnFocusChangeListener.html)。

```
faren.setOnFocusChangeListener(new OnFocusChangeListener() {
    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        if(hasFocus)
            celcius.setText(""); // This will automatically show the hint text
    }
}); 
```

# ios - iOS 6 Game Center 回合制比赛以最少玩家人数开始

> ID：13185118
> 
> 赞同：2
> 
> 时间：2012-11-01T20:40:33.807
> 
> 标签：ios, ios6, game-center

我们发现的一个问题是，如果您有可变数量的玩家，然后以“自动匹配”开始比赛，Game Center 将以“最少”玩家人数开始比赛。即使 Game Center 匹配 UI 显示的自动匹配空间超过最小数量的玩家，它也会这样做。

![在此处输入图像描述](../Images/8db3d17789748950210b44723a6714c1.png)
对于上面的示例，即使指定了 3 名玩家，比赛也只会以 2 名参与者（“我”和一名“自动匹配”）开始。

以下是匹配请求的外观：

```
GKMatchRequest *request = [[GKMatchRequest alloc] init];
request.minPlayers = 2;    
request.maxPlayers = 4;
request.playersToInvite = playersToInvite;
request.playerGroup = 0;
request.defaultNumberOfPlayers = 4; 
```

这只是游戏中心的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T19:20:58.917

我有同样的问题。我发现最有效的方法是在比赛创建后立即添加玩家，并将我的最少玩家增加到 3 个。

# python - 泰勒多项式计算

> ID：13185124
> 
> 赞同：0
> 
> 时间：2012-11-01T20:41:21.403
> 
> 标签：python, math

我目前正在为我的大学学习做一个 python 练习。我非常坚持这项任务：

指数函数 e^x 的 N 次泰勒多项式由下式给出：

```
 N
p(x) = Sigma  x^k/k!  
k = 0 
```

编写一个程序，(i) 导入类 Polynomial（在下面找到），(ii) 从命令行读取 x 和一系列 N 值，(iii) 创建一个表示泰勒多项式的 Polynomial 实例，以及 (iv) 打印值给定 N 个值的 p(x) 以及精确值 e^x。用 x = 0.5, 3, 10 和 N = 2, 5, 10, 15, 25 试试这个程序。

**多项式.py**

```
import numpy

class Polynomial:
def __init__(self, coefficients):
    self.coeff = coefficients

def __call__(self, x):
    """Evaluate the polynomial."""
    s = 0
    for i in range(len(self.coeff)):
        s += self.coeff[i]*x**i
    return s

def __add__(self, other):
    # Start with the longest list and add in the other
    if len(self.coeff) > len(other.coeff):
        result_coeff = self.coeff[:]  # copy!
        for i in range(len(other.coeff)):
            result_coeff[i] += other.coeff[i]
    else:
        result_coeff = other.coeff[:] # copy!
        for i in range(len(self.coeff)):
            result_coeff[i] += self.coeff[i]
    return Polynomial(result_coeff)

def __mul__(self, other):
    c = self.coeff
    d = other.coeff
    M = len(c) - 1
    N = len(d) - 1
    result_coeff = numpy.zeros(M+N+1)
    for i in range(0, M+1):
        for j in range(0, N+1):
            result_coeff[i+j] += c[i]*d[j]
    return Polynomial(result_coeff)

def differentiate(self):
    """Differentiate this polynomial in-place."""
    for i in range(1, len(self.coeff)):
        self.coeff[i-1] = i*self.coeff[i]
    del self.coeff[-1]

def derivative(self):
    """Copy this polynomial and return its derivative."""
    dpdx = Polynomial(self.coeff[:])  # make a copy
    dpdx.differentiate()
    return dpdx

def __str__(self):
    s = ''
    for i in range(0, len(self.coeff)):
        if self.coeff[i] != 0:
            s += ' + %g*x^%d' % (self.coeff[i], i)
    # Fix layout
    s = s.replace('+ -', '- ')
    s = s.replace('x^0', '1')
    s = s.replace(' 1*', ' ')
    s = s.replace('x^1 ', 'x ')
    #s = s.replace('x^1', 'x') # will replace x^100 by x^00
    if s[0:3] == ' + ':  # remove initial +
        s = s[3:]
    if s[0:3] == ' - ':  # fix spaces for initial -
        s = '-' + s[3:]
    return s

def simplestr(self):
    s = ''
    for i in range(0, len(self.coeff)):
        s += ' + %g*x^%d' % (self.coeff[i], i)
    return s

def _test():
    p1 = Polynomial([1, -1])
    p2 = Polynomial([0, 1, 0, 0, -6, -1])
    p3 = p1 + p2
print p1, '  +  ', p2, '  =  ', p3
p4 = p1*p2
print p1, '  *  ', p2, '  =  ', p4
print 'p2(3) =', p2(3)
p5 = p2.derivative()
print 'd/dx', p2, '  =  ', p5
print 'd/dx', p2,
p2.differentiate()
print '  =  ', p5
p4 = p2.derivative()
print 'd/dx', p2, '  =  ', p4

if __name__ == '__main__':
_test() 
```

现在我真的被困在这个问题上，我很想得到一个解释！我应该将我的代码写在一个单独的文件中。我正在考虑创建多项式类的实例，并在 argv[2:] 中发送列表，但这似乎不起作用。在将 N 的不同值发送到 Polynomial 类之前，我是否必须创建一个 def 来计算泰勒多项式？

任何帮助都很棒，在此先感谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:13:10.163

还没有完成，但我相信这回答了你的主要问题。将类多项式放入 poly.p 并导入它。

```
from poly import Polynomial as p
from math import exp,factorial

def get_input(n):
    ''' get n numbers from stdin '''
    entered = list()
    for i in range(n):
        print 'input number '
    entered.append(raw_input())
    return entered

def some_input():
    return [[2,3,4],[4,3,2]]

get input from cmd line                                                                                                                                   
n = 3                                                                                                                                                     
a = get_input(n)                                                                                                                                          
b = get_input(n)                                                                                                                                          

#a,b = some_input()

ap = p(a)
bp = p(b)

print 'entered : ',a,b

c = ap+bp

print 'a + b = ',c

print exp(3)

x = ap
print x

sum = p([0])
for k in range(1,5):
    el = x
    for j in range(1,k):
        el  el * x
        print 'el: ',el
    if el!=None and sum!=None:
        sum = sum + el
        print 'sum ',sum 
```

输出

```
entered :  [2, 3, 4] [4, 3, 2]
a + b =  6*1 + 6*x + 6*x^2
20.0855369232
2*1 + 3*x + 4*x^2
sum  2*1 + 3*x + 4*x^2
el:  4*1 + 12*x + 25*x^2 + 24*x^3 + 16*x^4
sum  6*1 + 15*x + 29*x^2 + 24*x^3 + 16*x^4
el:  4*1 + 12*x + 25*x^2 + 24*x^3 + 16*x^4
el:  8*1 + 36*x + 102*x^2 + 171*x^3 + 204*x^4 + 144*x^5 + 64*x^6
sum  14*1 + 51*x + 131*x^2 + 195*x^3 + 220*x^4 + 144*x^5 + 64*x^6
el:  4*1 + 12*x + 25*x^2 + 24*x^3 + 16*x^4
el:  8*1 + 36*x + 102*x^2 + 171*x^3 + 204*x^4 + 144*x^5 + 64*x^6
el:  16*1 + 96*x + 344*x^2 + 792*x^3 + 1329*x^4 + 1584*x^5 + 1376*x^6 + 768*x^7 + 256*x^8
sum  30*1 + 147*x + 475*x^2 + 987*x^3 + 1549*x^4 + 1728*x^5 + 1440*x^6 + 768*x^7 + 256*x^8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T11:48:20.840

我通过以下方式解决了任务，但我不确定它是否回答了问题 (iv)。输出只是将 e**x 的精确值与模块多项式的计算值进行比较。

```
from math import factorial, exp
from Polynomial import *
from sys import *

#Reads x and N from the command line on the form [filename.py, x-value, N-value]
x = eval(argv[1])
N = eval(argv[2])

#Creating list of coefficients on the form [1 / i!]
list_coeff = [1./factorial(i) for i in range(N)]

print list_coeff

#Creating an instance of class Polynomial
p1 = Polynomial(list_coeff)

print 'Calculated value of e**%f = %f ' %(x, p1.__call__(x))
print 'Exact value of e**%f = %f'% (x, exp(x))

"""Test Execution
Terminal > python Polynomial_exp.py 0.5 5
[1.0, 1.0, 0.5, 0.16666666666666666, 0.041666666666666664]
Calculated value of e**0.500000 = 1.648438 
Exact value of e**0.500000 = 1.648721
""" 
```

# objective-c - 应该根据 4 个文本字段缩小表结果范围的谓词的语法是什么样的？

> ID：13185125
> 
> 赞同：0
> 
> 时间：2012-11-01T20:41:23.080
> 
> 标签：objective-c, core-data, predicate

所以我有 4 个文本字段，用户可以在其中缩小表格结果的范围，以便找到确切的位置。我的问题是，由于用户不必在每个文本字段中输入内容，我不能简单地`AND`在谓词中使用。

现在，我的应用程序与我的应用程序相反。如果一个类型在一个城市和一个州，我的谓词显示更多的结果而不是缩小结果。这完全解释了它为什么这样做。

除了`if`根据哪些文本字段为空或不为空来创建许多语句之外，还有更好的方法吗？

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(place CONTAINS[c] %@) OR (city CONTAINS[c] %@) OR (state CONTAINS[c] %@) OR (zip CONTAINS[c] %@)",
                              userPlace, userCity, userState, userZip]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:58:27.443

这应该有效：

```
fetchRequest.predicate = nil;
NSMutableSting *predicateString = [NSMutableString string];
NSArray *attributeNames = @[@"name", @"city", @"state", @"zip"];
int i = 0; 
for (NSString *s in @[userName, userCity, userState, userZip]) {
   if (s && ![s isEqualToString:@""]) {
      [predicateString appendFormat:@"%@", 
          predicateString.length ? @" AND " : @""];
      [predicateString appendFormat:@"(%@ CONTAINS[c] '%@')", 
          attributeNames[i], s];
   }
   i++;
}
if (predicateString.length) { 
   fetchRequest.predicate = [NSPredicate predicateWithFormat:predicateString];
} 
```

做到这一点的“正确”方法是使用复合谓词，但这会更加冗长。

我还注意到您的示例中属性`place`和替换变量之间可能存在不匹配`userName`。应该是`name`吗？`userPlace`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T22:38:48.623

我认为这就是你想要的：

```
 [NSPredicate predicateWithFormat:@"(%@ = \"\" OR place CONTAINS[c] %@) AND (%@ = \"\" OR city CONTAINS[c] %@) AND (%@ = \"\" OR state CONTAINS[c] %@) AND (%@ = \"\" OR zip CONTAINS[c] %@)",
                          userName, userName, userCity, userCity, userState, userState, userZip, userZip]; 
```

# java - 使用 RandomAccessFile Java 从数字文件中读取

> ID：13185126
> 
> 赞同：0
> 
> 时间：2012-11-01T20:41:32.877
> 
> 标签：java, printstream

我有一个任务是使用 PrintStream 在文本文件中写入一些数字，然后使用 RandomAccessFile 从同一个文件中读取。虽然编写部分按预期工作，但在运行我的代码时会得到以下输出。

```
 807416096
840971040
874525984
Exception in thread "main" java.io.EOFException
908080928
941635872
at java.io.RandomAccessFile.readInt(RandomAccessFile.java:776)
at Problema4.main(Problema4.java:21)
Java Result: 1 
```

这是代码：

```
import java.io.*;
import java.util.*;

public class Problema4 {

public static void main(String[] args) throws IOException, FileNotFoundException
{
    PrintStream ps = new PrintStream(new FileOutputStream("fisiernou.txt"));
    int i=0;
    while (i<11)
    {
        ps.print(i);
        ps.print(" ");
        i++;
    }
    ps.close();
    RandomAccessFile raf = new RandomAccessFile("fisiernou.txt", "r");
    raf.seek(0);
    //System.out.println(raf.readInt());
    while (raf.getFilePointer()<raf.length())
        System.out.println(raf.readInt());
    raf.close();
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:50:58.743

您正在将整数写入字符串（ ps.print(i) ）。如果你写 1，在文件中你写的是 1 的 ascii 字符。假设这是我们写的唯一数字，那么文件只有一个字节。

阅读时，您使用的是 raf.readInt()。此方法读取 4 个字节并将它们转换为整数。如果现在你尝试读取你的文件，它只包含一个字节（1 的 ascii 字符），然后你会得到一个 EOF 异常。

使用相同类型的方法进行写作和阅读。您可以使用 FileOutputStream.write(int) 进行编写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:49:39.800

`RandomAccessFile.readInt()`从文件中读取一个二进制 32 位整数。这意味着它读取 4 个字节并将这 4 个字节转换为一个 int。它不读取 int 的字符串表示形式。阅读[它的 javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html#readInt%28%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T20:48:39.403

当您的 raf 指针从文件中读取时，可能会碰到“文件结尾”字符。从 Java API：

“对于此类中的所有读取例程，通常情况下，如果在读取所需的字节数之前到达文件结尾，则会引发 EOFException（这是一种 IOException）。”

[http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html)

# jquery - jQuery 背景图像淡入淡出

> ID：13185127
> 
> 赞同：1
> 
> 时间：2012-11-01T20:41:34.900
> 
> 标签：jquery, html, css, background-image, fadein

我正在尝试将背景图像淡入我的列表项。我已经尝试了一切，但找不到它...

HTML：

```
<li id="een">
    <h1>Title</h1>
    <p id="text1">Text</p>
</li> 
```

jQuery：

```
$('#een').mouseenter(function(){
    $('#een').css("background-image", "url(images/een.png)");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:43:58.963

您需要制作一个背景 img 元素，该元素在相对父级内绝对定位。

# [jsFiddle](http://jsfiddle.net/SpYk3/Dm8Fu/)

这是我的意思的一个例子。

> **HTML**注意我添加了一个 div 类`li-background`作为每个`li`. 这将由 CSS 编辑以在加载时不显示并绝对定位在其相对定位的 li 父级内。我还将其设置`z-index`为 -1，因此它不会显示在文本或 li 中的任何其他项目中，因此它是背景！

```
<ul>
    <li id="een">
        <div class="li-background"><img src="http://www.freenew.net/upload/pscreen/47/gradient-screensaver-32.jpg" /></div>
        <h1>Title</h1>
        <p id="text1">Text</p>
    </li>
    <li id="een">
        <div class="li-background"><img src="http://www.freenew.net/upload/pscreen/47/gradient-screensaver-32.jpg" /></div>
        <h1>Title2</h1>
        <p id="text1">Text2</p>
    </li>
    <li id="een">
        <div class="li-background"><img src="http://www.freenew.net/upload/pscreen/47/gradient-screensaver-32.jpg" /></div>
        <h1>Title3</h1>
        <p id="text1">Text3</p>
    </li>
    <li id="een">
        <div class="li-background"><img src="http://www.freenew.net/upload/pscreen/47/gradient-screensaver-32.jpg" /></div>
        <h1>Title4</h1>
        <p id="text1">Text4</p>
    </li>
</ul> 
```

> **CSS**

```
ul li { position: relative; }
ul li:hover { color: white; }
.li-background {
    display: none;
    height: 100%;
    left: 0;
    position: absolute;
    top: 0;
    width: 100%;
    z-index: -1;
}
.li-background img {
    height: 100%;
    width: 100%;
} 
```

> **jQ 脚本**

```
$("li").hover(function(eIn) {
        $(this).children(".li-background").stop().fadeIn();
    },
    function(eOut) {
        $(this).children(".li-background").stop().fadeOut();
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:52:37.800

如果您真的想使用背景，您也可以使用[switchClass 。](http://jqueryui.com/switchClass/)像这样：

```
if ($('#testDiv').hasClass('class1'))
    $('#testDiv').switchClass("class1", "class2", 500);
else 
    $('#testDiv').switchClass("class2", "class1", 500); 
```

# sql-server - 如何在不使用 RunAs 的情况下将 Windows 身份验证与 SSMS 一起使用？

> ID：13185128
> 
> 赞同：1
> 
> 时间：2012-11-01T20:41:40.913
> 
> 标签：sql-server, authentication, sql-server-2012

我在 Windows 8 企业版中作为独立实例安装了 SQL Server 2012。它以混合模式运行。当前登录的帐户是本地 MACHINE\Administrators 的成员，本地 BUILTIN\Administrators 组是 sysadmin 角色。为了更好地衡量，当前用户也在 MACHINE\SQLAdmins 组中，该组也具有 sysadmin 角色。

当我从快捷方式启动 SQL Server Management Studio (SSMS) 时，我无法使用 Windows 身份验证。我收到以下错误：

```
TITLE: Connect to Server
Cannot connect to INSTANCENAME.
ADDITIONAL INFORMATION:
Login failed for user 'MACHINE\user'. (Microsoft SQL Server, Error: 18456)
For help, click: http://go.microsoft.com/fwlink?ProdName=Microsoft%20SQL%20Server&EvtSrc=MSSQLServer&EvtID=18456&LinkId=20476 
```

事实上，如果我从快捷方式启动 LinqPad，我无法使用依赖于 Windows 身份验证的连接字符串连接到服务器。

但是，如果我使用 RunAs Administrator 以提升的权限运行 SSMS 或 LinqPad，我可以使用 Windows 身份验证，并且体验符合预期。

或者，我可以像这样将 RunAs 命令包含到 SSMS 快捷方式中。

```
C:\Windows\System32\runas.exe /USER:MACHINE\user "C:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\ManagementStudio\Ssms.exe" 
```

奇怪的是，双击快捷方式会提示我输入当前用户的密码。但是，一旦发生重新身份验证，SSMS 将允许对当前用户进行 Windows 身份验证。

问题是，当我双击快捷方式时，SSMS 在哪个用户下运行，最终，我如何才能在不首先提升我的权限的情况下运行 LinqPad 或 SSMS 或任何其他使用 Windows 身份验证连接到数据库的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:09:33.467

您是否有机会在使用时提供安装 SQL Server 的用户的凭据`Run as`？

请参阅[此 SO question](https://stackoverflow.com/questions/2833373/sql-server-2008-database-engine-login-failed-for-administrator-user-in-windows-7)的第二个答案：

> 在以前的 SQL 版本中，BUILTIN\Administrators 组被赋予了 sysadmin 角色。在 SQL 2008 中，本地管理员默认没有登录权限。只有执行安装的用户默认为 sa 权限。在安装过程中，您可以选择添加其他用户，但显然您没有。
> 
> 您将需要以 sa 身份登录并配置所需的任何 Windows 登录名（例如本地管理员帐户）。

我也发生了同样的事情，我的用户帐户是本地管理员，但在安装 SQL Server 的人手动将我的 Windows 帐户添加到 SQL Server 登录之前无法登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-28T10:12:55.103

在以前的 SQL 版本中，BUILTIN\Administrators 组被赋予了 sysadmin 角色。在 SQL 2008 中，本地管理员默认没有登录权限。只有执行安装的用户默认为 sa 权限。在安装过程中，您可以选择添加其他用户，但显然您没有。

# vba - 向 MS Word 表格添加注释

> ID：13185132
> 
> 赞同：0
> 
> 时间：2012-11-01T20:41:55.970
> 
> 标签：vba, comments

我正在尝试向表格行添加注释。这个想法是您选择一个表，宏会为每一行添加注释。

假设您在评论内容中有一个字符串后跟一个整数。

示例评论内容为：

```
comment1
comment2
comment3 
```

请注意，评论的内容很重要，因为它们起着至关重要的作用。

这是我到目前为止所得到的，如果有人已经解决了这个问题，请帮助我

```
Sub CallAddNewComment()
    Dim i As Integer

    i = ActiveDocument.Tables(1).Rows.Count

    Do Until (i > 1)
        Call AddNewComment(strText:="This is a test comment.")
    Loop

End Sub

Sub AddNewComment(ByVal strText As String)

   Comments.Add Row = i, Text:=strText

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:39:25.713

```
Sub Tester()

    Dim tbl As Table, i As Long

    For Each tbl In ActiveDocument.Tables
        For i = 1 To tbl.Rows.Count
            ActiveDocument.Comments.Add _
                   tbl.Rows(i).Cells(1).Range, "Comment" & i
        Next i
    Next tbl

End Sub 
```

# c - 如何从 Linux (C) 中的线程中完全杀死进程

> ID：13185134
> 
> 赞同：1
> 
> 时间：2012-11-01T20:42:02.583
> 
> 标签：c, linux

我有一个在 Linux 上运行的 C 代码，它创建了一定数量的线程。在其中一个线程中，我想要它，以便如果它遇到某种情况，它应该终止整个过程。我查看了 exit() 命令，但并不真正了解如何使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:43:51.350

没有什么不明白的`exit()`。做就是了：

```
exit(EXIT_FAILURE); 
```

你的过程已经过去了。

`EXIT_FAILURE`成为您程序的退出状态；这与从 中返回值相同`main()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:49:30.477

由于您都在一个进程中，尽管有多个线程，只需点击退出就会杀死很多。

# map - 在墨卡托地图上绘制飞行路线如何计算具有给定经度的折线点

> ID：13185144
> 
> 赞同：1
> 
> 时间：2012-11-01T20:43:10.303
> 
> 标签：map, latitude-longitude, mercator

我想在两个城市之间的墨卡托地图上画一条折线。例如起点：

```
 Location berlin = new Location(52.517, 13.40);
 Location tokio = new Location(35.70,139.767); 
```

它应该看起来像一条航线。

所以我的计划是遍历两个城市之间的所有经度值并计算相应的纬度值：

```
LocationCollection locationCollection = new LocationCollection();

Location next = new Location(berlin.Latitude,berlin.Longitude); //startpunkt
for (double x = berlin.Longitude+1; x < tokio.Longitude; x++) {
  locationCollection.Add(next);
  next = new Location(???, x);
} 
```

问题是如何计算折线的每个经度值的纬度？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:54:07.300

从[这个链接](http://williams.best.vwh.net/avform.htm#Int)：

这是 C 中的一个实现。

```
#define PI 3.14159265358979323846
double degrees_radians(double d) { return d * PI / 180.0; }
double radians_degrees(double r) { return r * 180.0 / PI; }

double latitude(double lat1, double lon1, double lat2, double lon2, double lon)
{
    return atan((sin(lat1)*cos(lat2)*sin(lon-lon2)-sin(lat2)*cos(lat1)*sin(lon-lon1))/(cos(lat1)*cos(lat2)*sin(lon1-lon2)));
}

int main()
{
    // start and end in degrees
    double lat1_d = 52.517;
    double lon1_d = 13.40;
    double lat2_d = 35.70;
    double lon2_d = 139.767;

    // start and end in radians
    double lat1_r = degrees_radians(lat1_d);
    double lon1_r = degrees_radians(lon1_d);
    double lat2_r = degrees_radians(lat2_d);
    double lon2_r = degrees_radians(lon2_d);

    // interpolate latitide at every degree of longitude between 1 and 2
    for (double lon = ceil(lon1_d); lon < lon2_d; lon += 1.0)
    {
        double lat_r = latitude(lat1_r, lon1_r, lat2_r, lon2_r, degrees_radians(lon));
        double lat_d = radians_degrees(lat_r);
        printf("%.3f , %.3f\n", lat_d, lon);
    }

    return 0;
} 
```

在柏林和东京之间的大圆上达到的最大纬度显示为经度 68° 处的 66.183°。

# javascript - 在滑动时捕捉向左滑动？

> ID：13185150
> 
> 赞同：0
> 
> 时间：2012-11-01T20:43:22.643
> 
> 标签：javascript, jquery

是否可以捕获用户在页面元素上向左滑动的时间，然后在滑动发生时运行函数？我有一些解决方案，但是如果您在页面上向下滚动，并且您的手指在元素上稍微向左滑动，它会运行该功能。

我目前的解决方案：

```
function touchMove() {
    finalCoord.x = event.targetTouches[0].pageX;
    changeX = originalCoord.x - finalCoord.x;
    var changeY = originalCoord.y - finalCoord.y;
    if (changeY < threshold.y && changeY > (threshold.y * -1)) {
        changeX = originalCoord.x - finalCoord.x;
        if (changeX > threshold.x) {
            $(document).off("touchmove", ".row");
            if ($(event.target).attr("class") === "row-inside") {
                var element = $(event.target);
            }
            if ($(event.target).attr("class") === "row-l") {
                var element = $(event.target).parent();
            }
            if ($(event.target).attr("class") === "row-r") {
                var element = $(event.target).parent();
            }
            setTimeout(function () {
                $(document).on("touchmove", ".row", function () {
                    touchMove();
                });
            }, 800);
        }
    }
}
function touchStart() {
    originalCoord.x = event.targetTouches[0].pageX;
    finalCoord.x = originalCoord.x;
}
$(document).on("touchmove", ".row", function () {
    touchMove();
});
$(document).on("touchstart", ".row", function () {
    touchStart();
});
} 
```

我考虑过使用 jQuery mobile，但该`swipeLeft`事件仅在滑动结束时触发，而不是在滑动期间触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T23:13:15.707

术语是拖。

我尝试了很多方法，目前最好的方法是使用 Hammer.js。

使用[https://github.com/EightMedia/hammer.js/wiki/Getting-Started](https://github.com/EightMedia/hammer.js/wiki/Getting-Started) Hammer.js dragleft 事件。

在此处查看您的移动设备上的一些示例：http: [//eightmedia.github.io/hammer.js/examples/carousel.html](http://eightmedia.github.io/hammer.js/examples/carousel.html)对于 Dragleft 尝试轮播。

# c# - 表单设计器中的 MEF 错误？

> ID：13185152
> 
> 赞同：0
> 
> 时间：2012-11-01T20:43:30.117
> 
> 标签：c#, .net-4.0, mef

我正在使用 MEF，我的插件目录是`c:\dev\plugins`

我有一个表格，但是当我打开它时，出现以下错误：

> 合成产生了一个单一的合成错误。下面提供了根本原因。查看 CompositionException.Errors 属性以获取更多详细信息。1) 导出 'Helper (ContractName="IHelper")' 不可分配给类型 'IHelper'。导致：无法在部件“经理”上设置导入“助手（合同名称 =“IHelper”）”。元素：helper (ContractName="IHelper") --> Manager`

我有两个包含相同导出的程序集，但我`DirectoryCatalog`一次只加载其中一个。

此错误似乎只显示在设计器中。当我运行代码时，我没有收到异常并且应用程序运行良好。设计师确实给了我选择，`Ignore and Continue`但我做过一次，但失败了，所以我退缩了。

```
public class Manager
    {

        private static readonly Manager instance = new Manager();

        public static IHelper Helper { get { return Manager.instance.helper; } }

        [Import(typeof(IHelper))]
        internal IHelper helper { get; set; }

        private Manager()
        {

           using (DirectoryCatalog catalog = 
                                    new DirectoryCatalog(@"c:\dev\plugins"))
           {
               using (CompositionContainer container = 
                                              new CompositionContainer(catalog))
               {
                      container.ComposeParts(this);
               }
            }
        }
     }

public interface IHelper
    {
        string LabelText { get; }
    }

[Export(typeof(IHelper))]
public class SpecificHelper : IHelper
{
    public string LabelText
    {
         get { return "Id:"};
    }
} 
```

# sed - SED 或 AWK 使 url 查询字符串可读

> ID：13185155
> 
> 赞同：1
> 
> 时间：2012-11-01T20:43:37.847
> 
> 标签：sed, awk, tshark

我需要将查询字符串拆分为几个无限量的变量以进行调试：

输出来自 tshark，目的是实时调试谷歌分析事件。tshark 的输出如下所示：

```
82.387501       hampus -> domain.net 1261 GET /__utm.gif?utmwv=5.3.7&utms=22&utmn=1234&utmhn=domain.com&utmt=event&utme=5(x*y*z%2Fstart%2Fklipp%2F166_SS%20example)(10)&utmcs=UTF-8~ HTTP/1.1 
```

我想要的是一个更易于阅读的版本：

```
utmhn:  domain.com
utmt:   event
utme:   5(x*y*z/start/klipp/166_SS/example)(10)
utmcs:  UTF-8 
```

甚至更好：

```
utmhn:  domain.com
utmt:   event
utme:   5(
          x
          y
          z/start/klipp/166_SS/example
         )(10)
utmcs:  UTF-8 
```

但是出于这个目的，我无法理解 sed （或 awk ）......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:30:58.340

**文件**

```
82.387501       hampus -> domain.net 1261 GET /__utm.gif?utmwv=5.3.7&utms=22&utmn=1234&utmhn=domain.com&utmt=event&utme=5(x*y*z%2Fstart%2Fklipp%2F166_SS%20example)(10)&utmcs=UTF-8~ HTTP/1.1 
```

**命令**

```
 sed 's/.*utmhn=/uthmhn:   /
     s/&utmt=/\nutmt:     /
     s/&utme=/\nutme:     /
     s/utmcs=/\nutmcs:    /
     s:[%]2F:/:g
     s:[%]20: :g
     s:[\(]:(\n\t    :
     s:\*:\n\t    :g
     s:[\)]:\n\t  ):
     s/[~].*$//' samp1.txt 
```

**输出**

```
uthmhn:   domain.com
utmt:     event
utme:     5(
            x
            y
            z/start/klipp/166_SS example
          )(10)&
utmcs:    UTF-8 
```

我不确定您的 %20 VS 示例数据中 '/' char 的预期结果该说什么。你手动输入了一些吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:49:34.660

这是使用`GNU awk`. 像这样运行：

```
awk -f script.awk file.txt 
```

内容`script.awk`：

```
BEGIN {
    FS="[ \t=&~]+"
    OFS="\t"
}

{
    for (i=1; i<=NF; i++) {
        if ($i ~ /^utmhn$|^utmt$|^utme$|^utmcs$/) {

             if ($i == "utme") {
                 sub(/\(/,"(\n\t  ", $(i+1))
                 gsub(/*/,"\n\t  ", $(i+1))
                 sub(/\)/,"\n\t )", $(i+1))
             }

             print $i":", $(i+1)
        }
    }
} 
```

结果：

```
utmhn:  domain.net
utmt:   event
utme:   5(
          x
          y
          z%2Fstart%2Fklipp%2F166_SS%20example
         )(10)
utmcs:  UTF-8 
```

或者，这是单线：

```
awk 'BEGIN { FS="[ \t=&~]+"; OFS="\t" } { for (i=1; i<=NF; i++) { if ($i ~ /^utmhn$|^utmt$|^utme$|^utmcs$/) { if ($i == "utme") { sub(/\(/,"(\n\t  ", $(i+1)); gsub(/*/,"\n\t  ", $(i+1)); sub(/\)/,"\n\t )", $(i+1)) } print $i":", $(i+1) } } }' file.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T02:10:37.277

使用 Perl 的另一种方法：

```
#!/usr/bin/perl -l
use strict; use warnings;

while (<>) {
    my @arr;
    my ($qs) = m/.*?GET.*?\?(\S+)\s/;
    my @pairs = split(/[&~]/, $qs);
    foreach my $pair (@pairs){
         my ($name, $value) = split(/=/, $pair);
         if ($name eq 'utme') {
            $value =~ s!(%2F|%20)!/!g;
            $value =~ s!\*!\n\t\t!g;
            $value =~ s!\(!(\n\t\t!;
            $value =~ s/\)\(/\n\t)(/;
         }
         # let's URI unescape stuff
         $value =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/eg;
         if ($name eq 'utmhn') {
            print "$name: $value";
        }
        else {
            push @arr, "$name: $value";
        }
    }

    print join "\n", @arr;
    print "\n";
} 
```

**输出**

```
utmhn: domain.com
utmwv: 5.3.7
utms: 22
utmn: 1234
utmt: event
utme: 5(
                x
                y
                z/start/klipp/166_SS/example
        )(10)
utmcs: UTF-8 
```

**用法**

```
tshark ... | ./script.pl 
```

**好处**

*   我注意`utmhn: domain.com`在第一行显示
*   我在值上运行 URI unescape
*   它不仅限于“utmhn”、“utmt”、“utme”、“utmcs”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T21:49:29.657

假设您的数据位于名为“file”的文件中：

```
awk -F "&" '{ for ( i=2;i<=NF;i++ ){sub(/=/,":\t",$i);sub(/[~].*$/,"",$i);gsub(/\%2F/,"/",$i);gsub(/\%20/," ",$i);print $i} }' tst 
```

产生输出：

```
utms:   22
utmn:   1234
utmhn:  domain.com
utmt:   event
utme:   5(x*y*z/start/klipp/166_SS example)(10)
utmcs:  UTF-8 
```

它有点脏，但它有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T06:22:16.587

```
$ cat tst.awk
BEGIN { FS="[&=~]"; OFS=":\t" }
{
   for (i=1;i<=NF;i++) {
      map[$i]=$(i+1)
   }

   sub(/\(/,"&\n\t  ", map["utme"])
   gsub(/\*/,"\n\t  ", map["utme"])
   gsub(/%2./,"/",     map["utme"])
   sub(/\)/,"\n\t&",   map["utme"])

   print "utmhn", map["utmhn"]
   print "utmt",  map["utmt"]
   print "utme",  map["utme"]
   print "utmcs", map["utmcs"]
}
$
$ awk -f tst.awk file
utmhn:  domain.com
utmt:   event
utme:   5(
          x
          y
          z/start/klipp/166_SS/example
        )(10)
utmcs:  UTF-8 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T09:42:38.820

这可能对您有用（GNU sed）：

```
sed 's/.*\(utmhn.*=\S*\).*/\1/;s/&/\n/g;s/=/:\t/g;s/(/&\n\t/;s/*/\n\t/g;s/%2F/\//g;s/%20/ /g;s/)/\n\t&/' file 
```

# c# - 如何将字节数组作为 UDT 属性从 VB6/VBA 传递到 C# COM DLL？

> ID：13185159
> 
> 赞同：1
> 
> 时间：2012-11-01T20:43:50.740
> 
> 标签：c#, vba, com, vb6, marshalling

我有一个试图向 VBA 公开的 C# 库。我可以很好地将参数传递给函数（即“ref byte[] someArray”），但传递对象或结构将不起作用。

如果我尝试将字节数组作为类的属性传递，我会在 VB 中收到以下错误-

标记为受限的函数或接口，或函数使用 Visual Basic 不支持的自动化类型

如果我尝试将字节数组作为结构的属性传递，我会在 VB-

我已经为此奋斗了两天，虽然我一直在寻找声称有答案的帖子，但没有一个对我有用。

所以这是我目前的代码：

```
[ComVisible(true)]
[Guid("7F53F7A5-15C9-4A99-A855-38F5E87702D0")]
[InterfaceType(ComInterfaceType.InterfaceIsDual)]       // Tried as InterfaceIsDual and as InterfaceIsIDispatch
public interface IDetail
{
    [DispId(1)]     // Tried with and without these
    int SomeInt { get; set; }

    [DispId(2)]
    string SomeString { get; set; }

    [DispId(3)]
    byte[] SomeByteArray { 
        return: MarshalAs(UnmanagedType.SafeArray, SafeArraySubType = VarEnum.VT_UI1)]
        get;
        [param: MarshalAs(UnmanagedType.SafeArray, SafeArraySubType = VarEnum.VT_UI1)]
        set; 
    }
}

[ComVisible(true)]
[Guid("F77FB3D4-27E0-4BFA-A21E-5ACB671151E9")]
[ClassInterface(ClassInterfaceType.None)]
[ProgId("G4COMTest.Detail")]
public class Detail:IDetail
{
    public int SomeInt { get;set; }
    public string SomeString { get; set; }

    // Tried MarshalAs in all combinations of class and interface
    public byte[] SomeByteArray {
        [return: MarshalAs(UnmanagedType.SafeArray, SafeArraySubType = VarEnum.VT_UI1)]
        get; 
        [param: MarshalAs(UnmanagedType.SafeArray, SafeArraySubType = VarEnum.VT_UI1)]
        set;
    }
}

[ComVisible(true)]
[Guid("5E8F9FF0-3156-479E-A91D-0DADD43881FB")]
[ClassInterface(ClassInterfaceType.None)]
public class Worker:IWorker
{
    // works with the 'ref'
    public int ReturnIntWByteArrayParam(ref byte[] testByteArray)
    {
        return testByteArray.Count();
    }

    public int ReturnIntWObjParam(IDetail detail)
    {
        return detail.SomeInt;
    }

    public IDetail ReturnObjNoParams()
    {
        var o = new Detail();
        o.SomeInt = 87;
        o.SomeString = "What are you doing Dave";
        return o;
    }
}

[ComVisible(true)]
[Guid("04962F29-DBBD-48AC-B4FB-180EEF562771")]
[InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
public interface IWorker
{
    int ReturnIntWByteArrayParam(ref byte[] testByteArray);
    int ReturnIntWObjParam(IDetail detail);
    IDetail ReturnObjNoParams();
} 
```

从 VB6 调用它：

```
Dim o As New G4COMTest.Worker
Dim d As New G4COMTest.Detail
Dim byt(2) As Byte

d.SomeInt = 356                     '// Works
d.SomeString = "Hello from client"  '// Works
d.SomeByteArray = byt               '// Errors as either class or struct
MsgBox mWorker.ReturnIntWObjParam(d) 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:36:18.180

C# 数组属性完全按照您的预期向 COM 公开 getter 和 setter（该`MarshalAs`属性是不必要的，默认情况下封送拆收器会正确检测到它）。

问题在于，setter 与 .NET 中的所有属性 setter 一样，按值传递 value 参数。不幸的是，VBA 不支持按值传递数组。这是从第一天开始就存在的语言的基本限制。更不幸的是，COM 互操作没有提供任何方法来用属性覆盖这种行为。你有两个选择：

A - 定义您自己的 setter 方法并从 VBA 而不是属性 setter 调用它，例如

```
void SetSomeByteArray(ref byte[] value) { SomeByteArray = value; } 
```

B - 将属性类型更改为`object`并使用变体数组而不是强类型数组。

PS：也要小心`string`属性。这些通常工作得很好，但是如果你将一个`null`字符串值传递给 VBA，它会出错，因为 VBA`String`类型不能存储`null`引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T02:14:31.027

在您的代码类 Detail 中，ClassInterfaceType 设置为 None，如果您将其设置为 AutoDispatch，那么您拥有的代码应该可以工作。来自 MSDN：

> 对于脚本化客户端、Microsoft Visual Basic 6.0 客户端或任何不缓存接口成员的 DispId 的后期绑定客户端，使用类接口是可接受的选项。”

[http://msdn.microsoft.com/en-us/library/4fcadw4a(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/4fcadw4a%28v=vs.110%29.aspx)

由于您调用的客户端是 VB6 - 您可以将 ClassInterfaceType 设置为 AutoDispatch 甚至忽略它（默认为 AutoDispatch）。这将仅生成 Dispatch only 类接口，并且不包含该接口中的任何成员。从 VB6 调用时，将数组直接分配给属性应该可以工作，因为它使用 IDispatch Invoke 函数（后期绑定）。

我们用一个字符串数组对此进行了测试，它可以工作。

# date - 拉力赛：如何从特定的测试集中提取最新的测试结果

> ID：13185167
> 
> 赞同：0
> 
> 时间：2012-11-01T20:44:17.270
> 
> 标签：date, datetime, sdk, rally

我正在尝试使用以下代码从特定测试集中获取最新测试结果的饼图。

```
pieconfig = {
type: 'TestCaseResult',
attribute: 'Verdict',
query: rally.sdk.util.Query.and(['TestSet = "' + testsetDropdown.getValue() + '"','Date < "2012-11-01"'])
            };
var pieChart = new rally.sdk.ui.PieChart(pieconfig,rallyDataSource);
pieChart.display("pieChartDiv"); 
```

在这段代码中，我手动输入了今天的日期，但我想将此查询设为通用类型，它应该从特定测试集中提取最新的测试结果。任何提示...？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:46:19.743

Rally 有一个很好的 DateTime 格式，可以将日期格式化为任何你想要的格式。这是您可以使用的参考：http: [//developer.rallydev.com/help/datetime](http://developer.rallydev.com/help/datetime)。

如果您总是希望当前日期采用年-月-日格式，您可以这样做：

```
var dateQuery = 'Date < ' + rally.sdk.util.DateTime.format(new Date(), "yyyy-MM-dd"); 
```

然后您的查询将如下所示：

```
query: rally.sdk.util.Query.and(['TestSet = "' + testsetDropdown.getValue() + '"', dateQuery]) 
```

编辑：现在我通过获取最新的 TestCaseResult 了解您的意思。您实际上并不需要查询中的条件日期。您需要在饼图配置中添加几个选项。

```
var pieconfig = {
    type: 'TestCaseResult',
    attribute: 'Verdict',
    query: '(Test Set = "' + testsetDropdown.getValue() + '")',
    order: 'CreationDate desc',
    pagesize: 1
}; 
```

这将按创建日期降序排序，这意味着最近创建的 TestCaseResult 将位于顶部。将页面大小设置为 1 意味着您将始终获得最新的结果。

这也解决了没有得到当天测试用例结果的问题。上一个查询将在今天凌晨 12:00 向后获取所有 TestCaseResults。因此，当天所做的任何测试用例结果都将不包括在内。

如果这不适合你，请告诉我。我对 Rally SDK1 查询系统很陌生。

# css - 使用 LESS 和版本控制：生成的 CSS 是否应该包含在 repo 中？

> ID：13185170
> 
> 赞同：18
> 
> 时间：2012-11-01T20:44:23.390
> 
> 标签：css, version-control, less

我正在考虑将 LESS 用于带有服务器（或开发）端处理的 CSS 开发，但我无法决定是否应将生成的 CSS 文件保留在版本控制中。有很多带有钩子的解决方案，但这会增加对服务器的软件依赖。可以在本地添加一个钩子，这样网络上的暂存区和生产区就会得到相同的文件。所以，问题是：

生成的 CSS 文件是否应该包含在版本控制中？请记住，某些框架出于特定原因需要 CSS 文件（即 WordPress 主题需要 style.css 文件才能被识别）。

当我说“考虑使用 LESS”时，我的意思是它成为了一项要求。在选择 LESS 后，新开发人员将无法选择使用 vanilla CSS。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-01T21:58:26.103

签入派生工件几乎总是次优的。

我对签入 .css 投反对票。您的同行或继任者之一签入对 .css 而不是 .less 的编辑只是时间问题。然后，当您更改 .less 时，先前的更改将丢失。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-01T21:09:44.787

你几乎已经回答了你自己的问题。这取决于您如何部署您的网站。

如果服务器只是要直接从 Git 存储库中提取：

1）它需要安装软件才能从LESS生成CSS。

2) 或者您需要在存储库中包含 CSS 文件。

如果您不是直接从 Web 服务器上的存储库中提取，则可以有一个构建脚本，该脚本从 git 中提取，生成 CSS，然后将内容传输到 Web 服务器，可能会从传输中排除不必要的文件。

在我看来，应该使用 Git 来保留项目的所有源代码，而不是任何“派生工件”（如 @thekbb 所述）。开发人员需要安装所有工具以在开发和测试期间生成这些派生工件。为了部署到测试和生产服务器，自动构建服务器应该获取源并只创建分发所需的文件。

在软件开发的情况下，您的 Git 存储库中有一个包含 .C 和 .H 文件（例如）的 Makefile。开发人员和构建服务器安装了一个编译器，它将创建一个可执行或已编译的库。当文件打包分发时，源代码不是存档的一部分。

对于 Web 开发，您拥有原始图形、HTML 模板和 LESS 文件等源文件。开发人员和构建服务器可以运行脚本来生成站点资产（来自 LESS 文件的 CSS、来自模板的静态 HTML 页面、多种尺寸/格式的平面图像等）。当构建服务器部署新构建时，它只复制所需的文件由服务器提供，不包括源图形、模板和 LESS 文件。

如果有人需要查看网站内容，他们应该在登台服务器上进行。如果这不可能，自动构建服务器可以在内部服务器上创建一个 ZIP 文件，他们可以下载该文件以供查看。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T04:48:35.383

> 生成的 CSS 文件是否应该包含在版本控制中？

理论上它们不应该，但为了实用性，我通常会检查生成的 css 文件。原因是它简化了部署，因为我使用 git 进行部署；我不需要在服务器上安装较少的编译器，通常甚至不需要在我正在部署的机器上（与我正在开发的机器相反）。如果您有单独的开发人员和部署人员，这样做可能很有用，但有时即使您自己部署也很有用。

现在，这样做有一些缺点：

1.  你不能使用`git add --patch`（或者你这样做时真的需要**非常**小心）
2.  您不应该直接修改 .css；相反，我通常使用辅助 .css 文件进行较小的修改，而无需修改主 .less 或 .css 文件。您还可以将 .less 文件直接编译为缩小的 css，以减少修改生成的 css 的诱惑力。
3.  开发人员必须将他们的机器设置为使用自动重新编译工具（如 SimpLess 或 Less.app），因此 .css 文件在保存到 .less 文件后会立即更新。如果没有自动化，您将面临 css 与签入的 less 文件不匹配的风险。

但是，从 .C 和 .H 文件编译时我不会这样做，因为为它们生成的二进制文件是特定于平台的，而且 .less/.css 文件通常是较大 Web 项目的一小部分，因此空间开销附加文件很小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T21:54:10.607

好问题。如果您可以绝对保证在更新 LESS 时更新 CSS 文件，那么可能是的 - 根据@Scott Simpson 的评论。我怀疑这很难保证，当新开发人员在不同步的那一天获得 CSS 的副本时会发生什么？另外，当然，我最初并没有想到这一点，如果新开发人员随后对 CSS 文件而不是 LESS 进行更新会发生什么？如果必须构建 CSS 并且不是存档的一部分，我可以看到更少的问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-01T21:24:07.203

我会说是的——因为如果您想将开发人员添加到您的工作流程中并且他们不想或不需要构建 .Less，会发生什么？对他们来说，只访问生成的文件会很有帮助。

# mysql - 你如何在mysql中增加一个字段？

> ID：13185176
> 
> 赞同：0
> 
> 时间：2012-11-01T20:44:36.607
> 
> 标签：mysql

假设您有一个包含 100 条记录的表。并且字段`age`包含一些整数。并且您希望所有这些整数都增加 1。

或者你有一个名为的文本字段`name`和一堆名字。并且您希望所有这些名称的前缀为`Mr.`.

有没有办法在一个 SQL 命令中实现这一点？

另一种方法是编译这 100 个记录的记录集并通过循环，然后运行单独的更新语句。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T20:45:38.113

使用[`update`](http://dev.mysql.com/doc/refman/5.0/en/update.html)命令

```
update yourtable
set age=age +1 

update yourtable
set name = 'Mr. ' + name
where gender='M' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T20:46:07.397

1.  `UPDATE mytable SET age = age+1`
2.  `UPDATE mytable SET name = CONCAT('Mr. ', name`)

如果 MySQL 处于[ANSI 模式](http://dev.mysql.com/doc/refman/5.6/en/server-sql-mode.html#sqlmode_ansi)- 特别是[`PIPES_AS_CONCAT`](http://dev.mysql.com/doc/refman/5.6/en/server-sql-mode.html#sqlmode_pipes_as_concat)，您可以使用`'Mr. ' || name`。

# javascript - Javascript 对象字面量。对象[i].变量

> ID：13185183
> 
> 赞同：5
> 
> 时间：2012-11-01T20:45:05.980
> 
> 标签：javascript, object-literal

我有一个函数，我可以在其中获取一些 JSON，然后根据对象文字中的一些信息提取第一个元素。

我的问题是：

```
function foo(string){
return data[0].string;
} 
```

这不起作用。什么是正确的语法？

完整的代码是：

```
 var plantaVariables = {
    humidity : 0,
    airTemp : 0,
    soilTemp : 0,
    soilMoisture: 0,
    light: 0
  };

  function capitaliseFirstLetter(string){
    return string.charAt(0).toUpperCase() + string.slice(1);
  }

  for (var i in plantaVariables) {
    $.ajax({
      url: "http://xxx/"+i.toLowerCase(),
      dataType:"json",
      async: false,
      success: function(data){
        var string = capitaliseFirstLetter(i);
        plantaVariables[i] = parseInt(data[0].capitaliseFirstLetter(i));
      }
      });
  }; 
```

我得到的 JSON 如下所示：

```
[{"PlantId":"1","DateTime":"2012-11-01 13:56:23","Humidity":"37.4"}] 
```

（有更多对象）。与植物变量中的任何其他元素类似

我意识到这是一个新手问题，但我是 javascript 新手，我整天都在用头撞屏幕。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T20:47:22.620

您应该使用下标符号通过表达式查找对象属性：

```
plantaVariables[i] = parseInt(data[0][capitaliseFirstLetter(i)]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:47:39.467

请记住，可以使用 引用对象`[]`，就像数组一样。

```
var string = capitaliseFirstLetter(i);
plantaVariables[i] = parseInt(data[0][string]); 
```

# c# - Task.Wait vs Task.RunSynchronously 任务调用 WPF Dispatcher.Invoke

> ID：13185184
> 
> 赞同：5
> 
> 时间：2012-11-01T20:45:09.370
> 
> 标签：c#, .net, wpf, multithreading, task-parallel-library

我有一个`Task`我正在启动并希望在 WPF 应用程序中等待完成的程序。在这个任务中，我在调度程序上调用一个`Action`。

如果我使用`Task.Wait()`它似乎挂起，好像该方法从未完成。此外，Dispatcher.Invoke 中的断点永远不会被命中。

如果我使用`Task.RunSyncronously()`它，它似乎工作正常，并且 Dispatcher 内的断点被命中。

为什么有区别？

下面的代码示例：

```
public void ExampleMethod()
{
    // When doing the following:
    var task = new Task(LoadStuff);

    // This never returns:
    task.Start();
    task.Wait();

    // This version, however, does:
    task.RunSyncronously();
}

private void LoadStuff()
{
    ObservableCollection<StuffObj> stuff = Stuff.Load(arg1, true);

    DispatchHelper.RunOnDispatcher(() =>
    {
        ...
    });
}

public static class DispatchHelper
{
    public static void RunOnDispatcher(Action action)
    {
        Application.Current.Dispatcher.Invoke(action);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T20:48:08.577

是的，有很大的不同。如果您使用`RunSyncronously`，您只需在 UI 线程中运行任务。如果您在后台线程中启动它，`Wait`然后我们在后台线程中运行代码，并且 UI 线程被阻塞。如果该任务中的代码正在调用 UI 线程，并且 UI 线程被阻塞（由`Wait`），那么您已经创建了死锁，并且应用程序将保持冻结状态。

请注意，如果您`RunSyncronously`在非 UI 线程的该任务上使用，并且 UI 线程被其他东西阻塞，您仍然会看到死锁。

现在，至于你应该做什么，这里真的有两个选择：

1.  任务本身实际上并不需要很长时间，它确实应该在 UI 线程中而不是在后台线程中运行。UI 线程不会被冻结（暂时）足够长的时间，以至于直接在 UI 中完成所有这些工作是一个问题。如果是这种情况，您可能甚至不应该将其设为 Task，只需将代码放入方法中并调用该方法即可。

2.  该任务确实需要很长时间才能运行，然后它会在完成该工作后更新 UI。如果是这种情况，那么重要的是不要`RunSyncronously`在后台线程中启动它。为了防止整个应用程序死锁，这意味着您不需要*通过*`Wait`调用阻塞 UI 线程。如果您有一些要在任务完成后运行的代码，您需要做的是向任务添加一个延续。在 C# 4.0 中，这可以通过调用`ContinueWith`任务并添加要运行的委托来完成。在 C# 5.0+ 中，您可以改为`await`执行相关任务（而不是`Wait`在它上面，这实际上是一个很大的区别），它会自动连接方法的其余部分作为你的延续（实际上它是显式`ContinueWith`调用的语法糖，但它是一个非常有用的）。

# c# - 在 ASP.NET MVC 中从数据库动态生成 URL？

> ID：13185193
> 
> 赞同：1
> 
> 时间：2012-11-01T20:45:43.143
> 
> 标签：c#, asp.net, asp.net-mvc

各位开发者您好，

我正在尝试找到一些动态生成 URL（PURL）的示例。我见过一款从 MySQL 数据库生成个性化 URL 的软件。唯一的问题是该软件使用 PHP 生成 URL，作为 .NET 开发人员，我不了解 php。我的问题是有没有一种方法可以从数据库中获取数据并使用特定字段我可以生成实际上并未存储在我的网络空间中的 url。

```
eeg.
-----database-----

firstname  |  lastname .... 
=========================== 
xyz            abc
pqwert         qweoiuy 
alfa           beta 
```

URL 应该是这样的

`http://something.com/somepersonal/xyz_abc.aspx`

`http://something.com/somepersonal/pqwert_qweoiuy.aspx`

`http://something.com/somepersonal/alfa_beta.aspx`

它类似于用户或客户的个性化页面。我有模板用作后页，但不知道如何插入和动态生成 URL..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:54:20.053

你想这个有点落后。通常，不会通过直接从数据库生成它来做到这一点。您通常会通过将 url 批处理路由`/somepersonal/`到某个`personalpage`控件来执行此操作，然后该控件会考虑它之后的所有内容，例如`xyz_abc`作为参数。 `Personalpage`然后将使用该参数来自定义其显示，无论是来自数据库还是其他地方。

因此，为了澄清，您的 URL 看起来像：

```
http://something.com/personal/vish_soni
http://something.com/personal/colonel_gentleman
http://something.com/personal/general_specific 
```

但是所有这些都被路由到`Personalpage`，然后使用`vish_soni`、`colonel_gentleman`和`general_specific`作为参数来查询数据库或执行它需要执行的任何其他操作。

[Microsoft 在此处](http://www.asp.net/mvc/overview/controllers-and-routing)对这种模式和路由进行了概述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:01:21.077

您可以创建一个控制器类并调用一个操作方法。对于您的情况，您只需要发送参数，然后查找客户信息以准备内容。

```
 public class HomeController : Controller
{

    public ActionResult Me(string id)
    {
        ViewBag.Message = "Welcome to ASP.NET MVC! "+id;
        var contentobj = repository.GetUSerContent(id);
        return View("Index",contentobj);
    }
} 
```

# jquery - 通过先隐藏一个元素，然后显示单击的项目来隐藏/显示

> ID：13185194
> 
> 赞同：0
> 
> 时间：2012-11-01T20:45:43.613
> 
> 标签：jquery, jquery-ui, coldfusion

我在表单上有三个单选按钮。当一个单选项目被选中时，一个子菜单将出现在单选选项的正下方。我想在单选按钮被点击的时候有它，其他子菜单会先隐藏，然后会出现现在选中的单选按钮对应的子菜单。

问题：如何在显示单击的单选选项（slideDown）之前向上滑动当前显示的子菜单。

注意：我正在使用 Coldfusion。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
<form > 
<!--- Work Efforts --->
<input name="ArchRpt" type="radio" value="WorkEfforts" id="ArchRpt_WorkEfforts" onclick="SetArchRpts('ArchRpt_WorkEfforts');"/>
Work Efforts (WE)<br />
<div id="ArchRpt_WorkEfforts_sub" class="Indent25" style="display:none;">
    some additional form options here
</div>
<!--- Previous Week Status Updates --->
<input style="clear:both;" name="ArchRpt" type="radio" value="StautsUpd" id="ArchRpt_StautsUpd" onclick="SetArchRpts('ArchRpt_StautsUpd');" />
Previous Week Status Updates<br />
<div id="ArchRpt_StautsUpd_sub" style="display:none;">
    some additional form options here
</div>
<!--- Monthly Accomplishments REPORT --->
<input name="ArchRpt" type="radio" value="MoAccompl" id="ArchRpt_MoAccompl" onclick="SetArchRpts('ArchRpt_MoAccompl')" />
Monthly Accomplishments (MA)<br />
<div id="ArchRpt_MoAccompl_sub" style="display:none;">
    some additional form options here
</div>
</form> 
```

和js：

```
<script Language="JavaScript">
function SetArchRpts(RadioOption){
$('#'+RadioOption).attr('checked', true);

if (RadioOption == 'ArchRpt_WorkEfforts'){
    $('#ArchRpt_WorkEfforts_sub').slideDown();
    $('#ArchRpt_StautsUpd_sub').slideUp();
    $('#ArchRpt_MoAccompl_sub').slideUp();
}
else if (RadioOption == 'ArchRpt_StautsUpd'){
    $('#ArchRpt_WorkEfforts_sub').slideUp();
    $('#ArchRpt_StautsUpd_sub').slideDown();
    $('#ArchRpt_MoAccompl_sub').slideUp();
}
else if (RadioOption == 'ArchRpt_MoAccompl'){
    $('#ArchRpt_WorkEfforts_sub').slideUp();
    $('#ArchRpt_StautsUpd_sub').slideUp();
    $('#ArchRpt_MoAccompl_sub').slideDown();
}
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:57:48.790

试试这个 -[**演示**](http://jsfiddle.net/fhZnF/1/)

```
$("input[type=radio]").on("click", function() {
    if ( $( "#" + this.id + "_sub" ).is(":visible") ) return;

    $("div[id^=ArchRpt_]").slideUp();
    $( "#" + this.id + "_sub" ).slideDown();
}); 
```

请注意——如果你使用 jQuery，你应该使用它的事件监听器而不是使用`onclick`-s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:03:24.477

这里：[演示](http://jsfiddle.net/5tr2Q/6/)

```
$('input[name="ArchRpt"]').on('click', function(){
    var $sub = $('#'+$(this).attr('id')+'_sub');
    $('#ArchRpt_WorkEfforts_sub, #ArchRpt_StautsUpd_sub, #ArchRpt_MoAccompl_sub').not($sub).slideUp();
    $sub.slideDown();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T20:49:24.880

太多的重复代码和选择器错误首先..

```
$('##'+RadioOption) 
```

应该是

```
$('#'+RadioOption); // Need to use only a single pound # 
```

您可以在单个函数中编写整个代码..

```
$('input[name="ArchRpt"]').on('click', function() {
    if ($(this).is(':checked')) {
        $('div[id*="ArchRpt"]').slideUp();
        $(this).nextAll('div').first().slideDown();
    }
});​ 
```

[检查小提琴](http://jsfiddle.net/sushanth009/mAy4s/1/)

**编辑**

这只是**一个黑客**..你可以试试这种方式..

```
var checkedId = '';
$('input[name="ArchRpt"]').on('click', function() {
    if (this.id !== checkedId) {
        checkedId = this.id;
        $('div[id*="ArchRpt"]').slideUp();
        $(this).nextAll('div').first().slideDown();
    }
});​ 
```

[更新的小提琴](http://jsfiddle.net/sushanth009/mAy4s/2/)

# c# - 达到高分时如何使用 StreamWriter/Reader 仅更新文本文件和程序文本框

> ID：13185196
> 
> 赞同：0
> 
> 时间：2012-11-01T20:45:46.133
> 
> 标签：c#, streamreader, streamwriter

我有一个带有文本文件的游戏程序，它以高分预加载到程序中。我需要程序仅在达到高分时更新程序中的文本框。

目前，高分文本框的返回值是每个条目或游戏会话（掷骰子）。

```
private void button4_Click(object sender, EventArgs e)
{

    try
    {
        string highScore;

        StreamReader inputFile;

        inputFile = File.OpenText("Highscore.txt");

        HighscoreBox.Items.Clear();

        while (!inputFile.EndOfStream)
        {
            highScore = inputFile.ReadLine();

            HighscoreBox.Items.Add(highScore);

        }

        inputFile.Close();

    }

    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:52:27.207

您不会真正使用 Writer 来控制它。您将为 WriteScores() 设置一个方法；然后你会有游戏结束的逻辑说

```
 foreach( object item in HighScoreBox.Items)
 {
    cast item to what you need, see if it is higher than that current score type
    if yes -- call WriteScores(); and end your foreach loop.
 } 
```

编写此答案时没有损害实际代码。

# javascript - 如何在 Fancybox 中移动切换大小按钮

> ID：13185202
> 
> 赞同：0
> 
> 时间：2012-11-01T20:46:09.457
> 
> 标签：javascript, jquery, fancybox, fancybox-2

是否可以仅将 Fancybox 中的切换按钮移动到其他位置？

例如，仅照片左上角的切换大小按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:51:11.733

如果通过切换按钮您的意思是“x”关闭按钮，那么是的。只需编辑 CSS 并更改您希望它显示的位置。

```
#fancybox-close {
    position: absolute;
    top: -15px;
    right: -15px;
    ...
} 
```

# kml - kml 气球中的链接在 GE 6 中不起作用

> ID：13185203
> 
> 赞同：3
> 
> 时间：2012-11-01T20:46:31.097
> 
> 标签：kml, google-earth

我的 KML 地标具有这样填充的描述元素

```
<description>
<![CDATA[
some text
<a href="urlReturningKML">someTag</a>
]]>
</description> 
```

在 Google 地球 5 中，当您单击气球中的链接时，会按预期下载并显示 kml。

使用 Google 地球专业版 6，当您单击气球中的链接时，什么也没有发生。您必须右键单击该链接，然后选择“在新窗口中打开”。然后 KML 被下载并显示在 Google 地球中。

有谁知道为什么 GE 5 和 GE6 之间存在行为差异？如何在不需要右键单击解决方法的情况下获取 kml 气球中的链接以在 GE6 中下载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:22:34.757

在 GE 5 和 6 之间处理 URL 和 href 有一些更新。GE 5 允许一些草率的 URL，6.0 在一些地方变得更严格，以更好地符合规范。没有太多关于细节的细节。检查 URL 的语法并确保它在您的 Web 浏览器中打开。

请注意，如果您想飞到另一个 KML 文件中的目标地标，请将该地标的 id 指定为 URL 中的锚点，并使用“#”后跟 id（参见下面第二个链接中的示例）。

这是一个适用于 GE 6.2.2 的 KML 示例：

```
<?xml version="1.0" encoding="utf-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Placemark>
      <name>Test</name>
      <description>
        <![CDATA[ 
    <a href="http://kml4earth.appspot.com/kml/startingPlaces.kml">test URL#1</a>
    <P>
    <a href="http://kml4earth.appspot.com/kml/startingPlaces.kml#MtWashington">test URL#2 w/anchor</a>
        ]]>
      </description>
      <Point>
        <coordinates>-123.0821604290386,37.42041505714916</coordinates>
      </Point>
    </Placemark>
</kml> 
```

# c++ - 将 c++ 异常传播到 cython - python 异常

> ID：13185213
> 
> 赞同：13
> 
> 时间：2012-11-01T20:47:35.160
> 
> 标签：c++, python, exception, try-catch, cython

我对 Cython 0.17.1 有疑问

`std::runtime_error`如果文件不存在，我的函数会抛出一个异常，我想以某种方式将此异常传播到我的 Cython 代码。

```
void loadFile(const string &filename)
{
    // some code, if filename doesn't exists 
    throw std::runtime_error( std::string("File doesn't exists" ) );
} 
```

并在正确包装函数后从 Cython 开始：

```
try:
    loadFile(myfilename)
except RuntimeError:
    print "Can't load file" 
```

但是这个异常总是被忽略，我怎样才能从 Python 中捕获 c++ 异常？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T21:46:43.823

您是否使用 extern 声明异常处理？您应该阅读有关 C++ 异常处理的信息：http: [//docs.cython.org/src/userguide/wrapping_CPlusPlus.html#exceptions](http://docs.cython.org/src/userguide/wrapping_CPlusPlus.html#exceptions)

基本上，您需要执行以下操作：

```
cdef extern from "some_file.h":
    cdef int foo() except + 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:47:01.553

将您的函数声明为`except +`，请参阅[http://docs.cython.org/src/userguide/wrapping_CPlusPlus.html#exceptions](http://docs.cython.org/src/userguide/wrapping_CPlusPlus.html#exceptions)

# grep - 带有颜色和多个排除项的 Grep

> ID：13185217
> 
> 赞同：2
> 
> 时间：2012-11-01T20:47:43.500
> 
> 标签：grep

我想做一个 grep 来挖掘我的代码层次结构并寻找术语“x”，但为结果着色并排除烦人的术语。现在我做：

```
grep -Rn --color x * | grep -v -e html -e svn -e test -e doc -e y 
```

问题是这会因为管道而失去匹配的颜色。有没有办法做出这样的声明，这样颜色就不会丢失？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T21:16:31.753

指定`--color=always`通过管道保留颜色格式：

```
grep --color=always x * | grep -v -e html -e svn -e test -e doc -e y 
```

稍后，如果您碰巧需要将结果传输到文件中并需要删除格式化颜色的转义字符，这里有一个漂亮的 sed 脚本，您可以通过管道传输结果以删除转义字符：

```
sed -r "s/\x1B\[([0-9]{1,2}(;[0-9]{1,2})?)?[m|K]//g" 
```

（请注意，您需要`-E`选项而不是`-r`OS X）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:56:01.643

您可以尝试重复颜色搜索：

```
grep -Rn --color x * | grep -v -e html -e svn -e test -e doc -e y | grep --color x 
```

# python - 为什么我的班级会引发 AttributeError？

> ID：13185218
> 
> 赞同：1
> 
> 时间：2012-11-01T20:47:55.620
> 
> 标签：python, class, attributes

我可能是盲人，但我真的不明白为什么这门课会失败：

> AttributeError：NextSunday 实例没有属性“触发器”

```
from datetime import datetime
from datetime import time
from datetime import timedelta

class NextSunday():
    def __init__(self, trigger=None):
        """
        Get date of, and number of days until, next Sunday.

        Arguments:
        - `trigger`: Add an extra week if less than trigger number of days.
        """
        self.str = u'%s (%s days)' % (self.date().date(), self.no_days())
        self.trigger = trigger

    def __unicode__(self):
        return self.str

    def __str__(self):
        return unicode(self).encode('utf-8')

    def __repr__(self):
        return '<Next Sunday: ' + self.str + '>'

    def no_days(self):
        """Get date of next sunday. """
        days = None
        for i in range(7):
            dt = datetime.now() + timedelta(days=i)
            if dt.weekday() == 6:
                days = i

        # Add another week if there are less days left then trigger
        if self.trigger:
            if days < self.trigger:
                days += 7

        return days

    def date(self):
        # The datetime obj contains the next sunday, but also the current time
        dt_of_next_sun = datetime.now() + timedelta(days=self.no_days())

        # Get the whole day
        date_of_next_sun = datetime.combine(dt_of_next_sun.date(),
                                            time(23, 59))

        return date_of_next_sun 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T20:50:00.210

你需要切换这些

```
 self.str = u'%s (%s days)' % (self.date().date(), self.no_days())
    self.trigger = trigger 
```

像这样

```
 self.trigger = trigger
    self.str = u'%s (%s days)' % (self.date().date(), self.no_days()) 
```

因为否则在创建属性*之前*`no_days`调用该方法。这很糟糕，因为该方法试图读取属性的值：*`self.trigger``no_days``self.trigger`*

 *```
if self.trigger:
    if days < self.trigger: 
```*

# cuda - Cuda 主机对象到设备

> ID：13185221
> 
> 赞同：1
> 
> 时间：2012-11-01T20:48:13.680
> 
> 标签：cuda, host-object

我正在尝试在我的 cuda 设备上复制一个包含大量变量和方法的大类。我已将类定义放入 .cuh 文件中，并且能够创建对象并在我的设备代码中使用它们。

现在的问题是，有没有办法将已经存在的对象从主机获取到设备？我仍在使用我的代码的串行版本来读取一些几何和物理数据。如果可以在不使用中间数组的情况下将其复制到设备上，那么设备如何在不使用 sizeof 的情况下处理其大小？

我是否使用类似的东西进行分配？

```
MyClass *MyObject;
int size = sizeog(MyClass);
cudaMalloc((void**)&MyObject_device, size);
cudaMemCpy(Myobject_device, MyObject, size,   cudaMemcpyHostToDevice); 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:17:55.147

CUDA 编译器旨在匹配主机编译器中使用的数据结构对齐和打包。因此，您可以在设备和主机之间安全地传递对象并访问成员，而不管它们的对齐要求如何。

您可以直接将对象作为内核参数传递。例如：

主持人：

```
MyKernel<<<grid_dim, block_dim>>>(my_object); 
```

设备：

```
__global__ void MyKernel(MyObject my_object) { 
```

如果需要传递对象数组，一种简单的方法是使用`thrust::device_vector`. 例如：

主持人：

```
#include <thrust/device_vector.h>
device_vector<MyObject> my_objects;
...
MyObject* my_objects_d = thrust::raw_pointer_cast(&my_objects[0]);
MyKernel<<<grid_dim, block_dim>>>(my_objects_d); 
```

设备：

```
__global__ void MyKernel(MyObject* my_objects) { 
```

# c++ - 是否可以使用内联汇编在 Visual Studio 2010 C++ 中查找代码地址？

> ID：13185222
> 
> 赞同：3
> 
> 时间：2012-11-01T20:48:15.033
> 
> 标签：c++, visual-studio-2010, assembly, stack

假设我想在返回其返回地址的 c++ 代码中编写一个内联汇编函数。

因此，如果我从某个地址调用函数 returnAddress() 并且它需要在函数完成后返回地址 X，我希望 returnAddress() 返回值 X。

returnAddress() 的代码示例：

```
void* getAddress()
{
    __asm {
        pop ebx;     // moving return offset to ebx?
        push ebx;    // restoring stack state
        xor eax, eax;
        mov ax, cs;  // ax <- code segment
        mov ecx, 16;
        mul ecx;     // multiplying the code segment by 16
        add eax, ebx;// adding offset
    }
} 
```

前面的代码不能正常工作，因为当我按下 alt+8 时，我可以清楚地看到我的代码地址与这个函数的返回值完全不同。

我想在内存中找到我的代码地址的原因是因为我想在代码本身运行时尝试更改它。如果有任何其他方法可以在不使用内联汇编的情况下找到我的代码地址（也许使用 Windows API？）请告诉我。

此外，我很确定我什至不能使用 Visual Studio 2010 使用 CS（代码段）值，所以也许这就是导致我出现问题的原因...... CS 总是等于 35。装配视图（alt+8）是否显示不正确地址，因为VS2010运行虚拟机？

这是我在这里的第一篇文章，所以也许我没有把我的观点说得很清楚。请让我知道我是否可以解释自己以使其更清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T21:09:52.177

实际上，我很难理解您只是为了恢复返回地址而使用的奥秘。正如一些人建议的那样，您可以使用 intrinsic `_ReturnAddress`。不过，为了好玩，您可以使用这个简单的代码：

```
__declspec(naked) 
void* get_RetAddr()
{
    _asm {
        mov eax, [esp]
        ret
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T21:20:33.273

代码段仅用于 16 位系统。随着 32 位的引入，代码段消失了。

您可以使用 VisualStudio 的内在`_ReturnAddress()`函数：

```
void * _ReturnAddress(void);
#pragma intrinsic(_ReturnAddress)

void* getAddress()
{
    return _ReturnAddress();
} 
```

如果您想手动执行此操作，例如在非 VisualStudio 编译器上，则 32 位 x86 函数调用的调用堆栈包含完整的 32 位返回地址，因此您可以按原样返回它：

```
void* __declspec(naked) getAddress()
{
    asm
    {
        mov eax, [esp];
        ret;
    }
} 
```

对于 x64 函数调用，您应该能够使用等效的 64 位寄存器：

```
void* __declspec(naked) getAddress()
{
    asm
    {
        mov rax, [rsp];
        ret;
    }
} 
```

# ios - 在 iOS 6 应用程序中使用 FBNativeDialogs

> ID：13185229
> 
> 赞同：0
> 
> 时间：2012-11-01T20:48:43.877
> 
> 标签：ios, facebook, ios6

我正在实现一项功能，用户可以通过 iOS 应用在 Facebook 上分享照片。该`presentShareDialogModallyFrom`方法看起来很有希望，但是我在使用它时遇到了麻烦。具体来说，我不知道该怎么做`#import`。另外我不确定是否需要添加其他框架。

集成 Twitter 非常简单：只需添加 Twitter 框架并导入相关的头文件。

**为了使用 FBNativeDialogs，我需要将什么导入/添加到我的 iOS 6 应用程序？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:50:34.223

根据[Facebook SDK 文档](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/)，您的链接框架和库中应该有`Social.framework`、`Accounts.framework`和`AdSupport.framework`。如果您支持任何低于 6.0 版本的 iOS，它们应该是可选的而不是必需的。

在您希望使用该`presentShareDialogModallyFrom`功能的类中，添加`#import <FacebookSDK/FacebookSDK.h>`.

# unity3d - 用“：”而不是“=”声明的变量

> ID：13185230
> 
> 赞同：5
> 
> 时间：2012-11-01T20:48:48.037
> 
> 标签：unity3d, unityscript

有人可以解释一下 Javascript 之间的区别：

```
var x = something 
```

和

```
var x : something 
```

我不知道在哪里/如何搜索它。

我在本文档第 4 页的底部看到了上面的代码：http: [//download.unity3d.com/support/Tutorials/2%20-%20Scripting%20Tutorial.pdf](http://download.unity3d.com/support/Tutorials/2%20-%20Scripting%20Tutorial.pdf)

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T20:50:15.910

第一个为变量 x 赋值，另一个导致语法错误。

您可能混淆了在对象文字中分配属性和正常分配。

```
var x = something;//assigning a variable
var y = {
    x:something//assigning a object property
}; 
```

编辑

```
var target : Transform; 
```

似乎是[UnityScript 而不是 JavaScript](http://wiki.unity3d.com/index.php?title=UnityScript_versus_JavaScript)，看起来它不是分配值而是设置变量类型。看[这里](http://wiki.unity3d.com/index.php?title=UnityScript_versus_JavaScript#Dynamic_typing_is_inefficient)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T22:16:17.787

UnityScript 不是 JavaScript

[Unity 脚本与 Javascript](http://wiki.unity3d.com/index.php?title=UnityScript_versus_JavaScript)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T20:51:44.137

如果你在一个对象中定义变量，你会使用冒号。

```
var obj = {x:my_var}; 
```

# php - 使用 HTML DOM 解析器从 facebook 粉丝页面中提取所有公共帖子

> ID：13185231
> 
> 赞同：0
> 
> 时间：2012-11-01T20:48:52.550
> 
> 标签：php, html, facebook, dom

[解析 Facebook 墙的 DOM](https://stackoverflow.com/q/5289147/1792570)回答了同样的问题，但是当我尝试解决方案[https://stackoverflow.com/a/5289257/1792570](https://stackoverflow.com/a/5289257/1792570)时，我收到这样的错误消息

此 XML 文件似乎没有任何与之关联的样式信息。文档树如下所示。http://api.facebook.com/1.0/facebook.xsd">104需要有效的签名methodfql.queryquerySELECT message FROM stream WHERE source_id=37122264757 AND is_hidden = 0

是因为 FQL 被贬低了吗？

我正在使用这种方法，否则，使用 HTML dom 解析器只会返回一个空白页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:06:53.357

要提取[Facebook 页面](https://developers.facebook.com/docs/reference/api/page/)的公开帖子，您需要`access_token`：

*   公共和非人口限制页面的应用程序或用户访问令牌
*   当前用户能够查看的受限页面的用户 access_token（不需要特殊权限）

[`PAGE_ID/feed`](https://developers.facebook.com/tools/explorer/?method=GET&path=19292868552/feed)一旦你有了它，它就是一个对or的简单 API 调用[`PAGE_ID/posts`](https://developers.facebook.com/tools/explorer/?method=GET&path=19292868552/posts)。

另请注意，**不**推荐使用 FQL。

# php - 在灯箱/模式中加载 PHP 成功消息

> ID：13185234
> 
> 赞同：0
> 
> 时间：2012-11-01T20:49:05.280
> 
> 标签：php, jquery, modal-dialog

我对 PHP 有基本的了解，过去，我总是在外部 php/html 文件中加载我的“感谢您提交/成功消息”信息。

目前我正在使用 Zurb.Foundation 来构建一个站点，并且想知道如何在页面上已经使用的模式中加载成功消息？

它目前不活跃，但这里有一个示例可供参考（单击“提交”以查看模式）： [http ://www.josephsjoblom.com/clients/nhcw/contact.html](http://www.josephsjoblom.com/clients/nhcw/contact.html)

当表单一切正常时，这就是我通常在我的 php 文件中所做的：

```
/* Redirect visitor to the thank you page */
header('Location: ../thanks.html');
exit(); 
```

我可以使用这样的东西吗？：

```
header('Location: #link_to_an_ID_example');
exit(); 
```

有谁知道如何做这样的事情或有一个示例链接？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:45:45.470

这是一个示例，您可以根据自己的目的进行调整：

```
$(document).ready(function() {
  $("a.quickLyric").click(function(){ 
    // capture the url to load from the id 
    var urlLoad = $(this).attr("id"); 
      // load the second template with AJAX
      $("div[class="+urlLoad+"]").toggle();
      $("div[class="+urlLoad+"]").load('/songs/inc/'+urlLoad+'/');
    // just make sure the page doesn’t reload 
    return false;
  }); 
}); 
```

来源：[http ://expressionengine.com/archived_forums/viewthread/113886/](http://expressionengine.com/archived_forums/viewthread/113886/)

# php - 使用 php curl 获取网站正确的源代码

> ID：13185236
> 
> 赞同：0
> 
> 时间：2012-11-01T20:49:16.793
> 
> 标签：php, facebook, curl, web-crawler

我编写了一个简单的 PHP 脚本来使用 CURL 获取网站的源代码：

```
function file_get_contents_curl($url)
{
$ch = curl_init();

curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt ($ch, CURLOPT_CAINFO, dirname(__FILE__)."/curl/cacert.pem");

$data = curl_exec($ch);
$url = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL);
$httpcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
curl_close($ch);

if($data === false)
    return false;
return array("content" => $data, "url" => $url, "httpcode" => $httpcode);
}

$data = file_get_contents_curl("https://www.facebook.com");

print_r($data); 
```

在此示例中，我正在获取 facebook 源，但它获取与不受支持的浏览器相关的页面。事实上，重定向后的最终 URL 是这样的：http: **//www.facebook.com/unsupportedbrowser**

有什么问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-01T20:54:24.877

您必须使用 cURL 设置用户代理，以便 Facebook 识别它，如下所示：

```
$ua = 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.16 (KHTML, like Gecko) \ 
Chrome/24.0.1304.0 Safari/537.16'
curl_setopt($ch, CURLOPT_USERAGENT, $ua); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T20:54:38.223

问题是卷曲。

即使您通过浏览器运行脚本，服务器也会发出 cURL 请求，这意味着向目标站点发出的请求是原始的，没有任何客户端信息。

我建议你在谷歌上搜索一些关于如何让你的 curl 伪装成人类的信息，但实际上你应该从发送一个正确的 User-Agent 标头信息以及你的请求开始。

# android - 在特定时间后做，Android Runnable

> ID：13185241
> 
> 赞同：0
> 
> 时间：2012-11-01T20:49:36.450
> 
> 标签：android, timer, runnable

我有一个带有实现 Runnable 的类的应用程序。启动线程并覆盖 run() 方法的位置。这运行我的图形。

1.st 问题：run() 多久调用一次？我还没有为此设置时间，所以它必须是默认值？

2.nd 问题：我希望在一定的时间（2 分钟、5 分钟、10 分钟）等之后完成一些事情。这样做的最佳方法是什么，我正在考虑使用 int 作为计数器，一次它达到了我想要的特定值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:01:13.543

**1.st 问题：run() 多久调用一次？我还没有为此设置时间，所以它必须是默认值？**

`run()`当你调用它时调用你的线程中的方法，例如。`yourThread.start();`

**2.nd 问题：我希望在一定的时间（2 分钟、5 分钟、10 分钟）等之后完成一些事情。这样做的最佳方法是什么，我正在考虑使用 int 作为计数器，一次它达到了我想要的特定值。**

有选项。要么你可以调用`Thread.sleep()`方法（注意：永远不要在你的 UI 线程中这样做）。

或者您可以按照上面描述的方式进行操作。因此，在您的`run()`方法中，您将有一个`while()`循环并检查每次迭代是否 lastUpdate 和当前时间（以毫秒为单位）的差异大于所需的周期，例如。2 分钟、5 分钟或 10 分钟。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:04:10.293

关于问题 2 - 使用[ScheduledExecutor](http://nick-lab.gs.washington.edu/java/jdk1.5b/api/java/util/concurrent/ScheduledExecutor.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T21:08:22.593

> 1.st 问题：run() 多久调用一次？

您可以自己找出答案，将其放在 Runnable 的开头：

```
Log.v("Running Runnable", System.currentTimeMillis() + ""); 
```

> 2.nd 问题：我希望在一定的时间（2 分钟、5 分钟、10 分钟）等后完成一些事情。

扩展一个[HandlerThread](http://developer.android.com/reference/android/os/HandlerThread.html)（它为你初始化 Looper！），添加一个 Handler 作为类变量，并使用 Handler 的[`postDelayed()`](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)或[`postAtTime()`](http://developer.android.com/reference/android/os/Handler.html#postAtTime%28java.lang.Runnable,%20long%29)方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T21:32:30.767

调用 run() 之间的确切时间量取决于处理器。每次调用之间的时间是纳秒内真正可见的那种东西。如果你想创建一个计时器，我建议使用 System.currentTimeMillis()，在 run() 方法中调用它，一旦差值大于或等于 1000 毫秒，实际计时器减一。这将跟踪秒数，您可以将其用作分钟数的基础，并在特定时间生成其他事件。

# javascript - 使用纯 JavaScript 进行肥皂调用

> ID：13185244
> 
> 赞同：3
> 
> 时间：2012-11-01T20:49:43.313
> 
> 标签：javascript, web-services, soap, cors

我被要求在网页上使用纯 JavaScript（使用 JavaScript 库很好）对公共网络服务（www.webserviceX.net）进行肥皂调用。

据我所知，由于相同的来源策略，我需要使用服务器端代码？

关于 webseviceX.net 它是否支持 CORS？

我该如何检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:22:08.467

尽管您需要在客户端进行一些更改以允许 CORS，但服务器也需要支持它，因为浏览器将首先进行`OPTIONS`调用，并期望在随后进行实际的 SOAP 调用之前返回某些标头。

这里有[更多关于 CORS 的详细信息](http://www.stevefenton.co.uk/Content/Blog/Date/201211/Blog/Using-CORS-With-ASP-NET-Web-API/)，虽然它与 ASP.NET Web API 相关，但服务器端部分对于 SOAP 服务同样适用。

# asp.net - ASP.NET WebAPI XmlFormatter 缺少日期的 UTC 偏移量

> ID：13185248
> 
> 赞同：2
> 
> 时间：2012-11-01T20:49:55.077
> 
> 标签：asp.net, xml, xml-serialization, asp.net-web-api, timezone-offset

我有一个 ASP.NET WebAPI 实现，我允许客户端使用和请求 HTTP 响应的 XML 或 JSON 格式。一些响应对象包括日期/时间值。通过使用以下代码，我已成功获得 JSON 响应以包含正确的 ISO 8601 格式日期（包括 UTC 时间偏移）：

```
Dim json As JsonMediaTypeFormatter = _
  GlobalConfiguration.Configuration.Formatters.JsonFormatter
json.SerializerSettings.DateFormatHandling = _
  Newtonsoft.Json.DateFormatHandling.IsoDateFormat
json.SerializerSettings.DateTimeZoneHandling = _
  Newtonsoft.Json.DateTimeZoneHandling.Local 
```

JsonFormatter 现在给了我这样的日期：

```
2008-11-03T14:14:00-05:00 
```

但是，XmlFormatter 给了我一个日期，例如：

```
2008-11-03T14:14:00 
```

请注意缺少的 UTC 时间偏移量（“-05:00”）。如何让 XMLFormatter 给我 UTC 时间偏移量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:45:45.053

我相信我只是自己弄清楚了这一点。

从 SQL Server 数据库（使用 IDataReader）和企业库数据块读取日期时，我需要使用 Date.SpecifyKind 方法来判断从数据库中检索的日期类型。

```
Dim dateCreated As Date = _
  Date.SpecifyKind(CDate(dbReader("DateCreated")), DateTimeKind.Local) 
```

通过这样做，我还能够删除原始问题中指定的 JsonMediaTypeFormatter 行。因此，现在 XML 和 JSON 都将日期发送为：

```
2008-11-03T14:14:00-05:00 
```

可以在此处找到有关 Date.SpecifyKind 的更多信息：http: [//msdn.microsoft.com/en-us/library/bb546101.aspx](http://msdn.microsoft.com/en-us/library/bb546101.aspx)

# parallel-processing - MPI 并行运行并行程序

> ID：13185249
> 
> 赞同：1
> 
> 时间：2012-11-01T20:49:57.323
> 
> 标签：parallel-processing, mpi

我有以下疑问，我正在开发一种使用第二个程序进行某些计算的遗传算法。第二个程序实现了并行化。

我的程序调用第二个程序来进行必要的计算。使用 MPI，我可以同时运行两个计算。

但我想实现一种方法来使用并行化自己的程序来运行这些相同的计算。下面是一个简单的方案

```
 GENETIC
                                            |
                                            |       ---> MPI HERE
                                           / \
                                          /   \
                                         /     \
                       1º machine - PROGRAM    PROGRAM - 2º machine
                                     /\         /\
                                    /  \       /  \
                                   /    \     /    \
                            program paralell   program paralell 
```

也就是说，我在 2 台机器上保留 MPI 6 核，在每台机器上保留 3 个内核来运行我的遗传算法，在每台机器上我共享名为 2x 第二个程序的任务，每台机器上 1 个，每台机器上第二个程序将执行使用 3 个核心进行计算。

对不起我的英语，我尽了最大努力以简单的方式解释，如果您对我尝试以不同方式解释的过程仍有任何疑问......

# c - 如何将 8Bit 转换为从 0 到 15 的小数条？

> ID：13185250
> 
> 赞同：3
> 
> 时间：2012-11-01T20:49:58.983
> 
> 标签：c, atmega

好的，这就是我正在尝试用 C 编程的内容。

我有一个来自 ATmega32 上的 ADC 的 8 位二进制信号。

现在我想将该信号转换为一个带有 15 个 LED 的条形，输入值越高，该条形越多。所以基本上我想将我的 8 位信号缩减为 4 位信号，将其转换为十进制并以递增的条形显示。

我首先想到检查我的输入是否在特定范围内（始终是 255/15 的范围），但我就是不知道怎么做。

仅检查输入是否高于特定值是行不通的，因为这样一次可能有多个条件为真。

你知道我怎么能解决这个问题吗？非常感谢任何帮助。;） 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:16:41.817

用这个：

```
uint8_t adc = GET_ADC_VALUE();

// Say LED is a 16-bit register

LED = (adc ? (1U << ((adc >> 4) + 1)) - 1 : 0x000); 
```

所以只有 ADC 值`0`使所有 LED 熄灭，所有其他 ADC 值打开 1 到 16 个 LED。这样做的好处是不使用任何除法（ATmega 没有除数指令）。

**编辑：**上面的代码实际上假设有 16 个 LED，如果你有 15 个 LED 就这样做：

```
LED= (1U << (adc >> 4)) - 1; 
```

# tableview - JavaFX 2 - 可观察列表 到表视图

> ID：13185254
> 
> 赞同：1
> 
> 时间：2012-11-01T20:50:08.770
> 
> 标签：tableview, javafx

希望我能尽可能清楚地回答我的问题。我正在使用用于 gui 的 JavaFX 库开发一个小型 Java 应用程序。我正在做一个 POP 连接并将消息存储为 ObservableList。为此，我使用 javax.mail。我将这个 observablelist 传递给一个 tableview，然后我将所需的值传递给 TableColumns：

```
 fromColumn.setCellValueFactory(
            new PropertyValueFactory<Message,String>("from")
        );
        subjectColumn.setCellValueFactory(
            new PropertyValueFactory<Message,String>("subject")
        );
        dateColumn.setCellValueFactory(
            new PropertyValueFactory<Message,String>("sentDate")
        ); 
```

Subject 和 sentDate 正在完美地读入。但不幸的是，“from”正在向 TableColumn 添加对象引用，因为 Message-Class 中的 From-Attribute 是 InternetAdress-Object 并且它的 toString() 方法不返回字符串，但可能返回引用。结果是 fromColumn 中显示的以下内容：

```
[Ljavax.mail.internet.InternetAddress;@3596cd38 
```

任何人都知道解决方案如何让 InternetAdress 的字符串值显示在提到的列中？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:31:16.813

我认为您需要定义一个自定义单元格值工厂以获取所需格式的地址信息，而不是使用 PropertyValueFactory。

以下示例是针对只读表的——如果表中的消息数据需要可编辑，那么解决方案将明显复杂得多。

```
fromColumn.setCellValueFactory(new Callback<CellDataFeatures<Message, String>, ObservableValue<String>>() {
    @Override public ObservableValue<String> call(CellDataFeatures<Message, String> m) {
        // m.getValue() returns the Message instance for a particular TableView row
        return new ReadOnlyObjectWrapper<String>(Arrays.toString(m.getValue().getFrom()));
    }
}); 
```

这是一个可执行示例（加上示例数据文件），它演示了自定义单元格值工厂的使用。将示例数据文件放在与应用程序 java 程序相同的目录中，并确保您的构建系统将示例文件复制到包含应用程序编译类文件的构建输出目录。您将需要路径上的[javamail](http://www.oracle.com/technetwork/java/javamail/index-138643.html) jar 文件来编译和运行应用程序。

```
import java.io.*;
import java.util.Arrays;
import java.util.logging.*;
import javafx.application.Application;
import javafx.beans.property.ReadOnlyObjectWrapper;
import javafx.beans.value.ObservableValue;
import javafx.collections.*;
import javafx.geometry.Insets;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.control.TableColumn.CellDataFeatures;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.scene.layout.VBox;
import javafx.scene.text.Font;
import javafx.stage.Stage;
import javafx.util.Callback;
import javax.mail.*;
import javax.mail.internet.MimeMessage;

public class MailTableSample extends Application {
  private TableView<Message> table = new TableView<Message>();
  public static void main(String[] args) { launch(args);}

  @Override public void start(Stage stage) {
    stage.setTitle("Table View Sample");

    final Label label = new Label("Mail");
    label.setFont(new Font("Arial", 20));

    table.setEditable(false);

    TableColumn subjectColumn = new TableColumn("Subject");
    subjectColumn.setMinWidth(100);
    subjectColumn.setCellValueFactory(
      new PropertyValueFactory<Message, String>("subject")
    );

    TableColumn sentDate = new TableColumn("Sent");
    sentDate.setMinWidth(100);
    sentDate.setCellValueFactory(
      new PropertyValueFactory<Message, String>("sentDate")
    );

    TableColumn fromColumn = new TableColumn("From");
    fromColumn.setMinWidth(200);
    fromColumn.setCellValueFactory(new Callback<CellDataFeatures<Message, String>, ObservableValue<String>>() {
        @Override public ObservableValue<String> call(CellDataFeatures<Message, String> m) {
          try {
            // m.getValue() returns the Message instance for a particular TableView row
            return new ReadOnlyObjectWrapper<String>(Arrays.toString(m.getValue().getFrom()));
          } catch (MessagingException ex) {
            Logger.getLogger(MailTableSample.class.getName()).log(Level.SEVERE, null, ex);
            return null;
          }
        }
    });    

    table.setItems(fetchMessages());
    table.getColumns().addAll(fromColumn, subjectColumn, sentDate);
    table.setPrefSize(600, 200);

    final VBox vbox = new VBox();
    vbox.setSpacing(5);
    vbox.setPadding(new Insets(10));
    vbox.getChildren().addAll(label, table);

    stage.setScene(new Scene(vbox));
    stage.show();
  }

  private ObservableList<Message> fetchMessages() {
    ObservableList<Message> messages = FXCollections.observableArrayList();
    try {
      Session session = Session.getDefaultInstance(System.getProperties());
      for (int i = 0; i < 3; i++) {
        InputStream mboxStream = new BufferedInputStream(
          getClass().getResourceAsStream("msg_" + (i+1) + ".txt")
        );
        Message message = new MimeMessage(session, mboxStream);
        messages.add(message);
      }
    } catch (MessagingException ex) {
      Logger.getLogger(MailTableSample.class.getName()).log(Level.SEVERE, null, ex);
    }

    return messages;
  }
} 
```

msg_1.txt

```
From cras@irccrew.org  Tue Jul 23 19:39:23 2002
Received: with ECARTIS (v1.0.0; list dovecot); Tue, 23 Jul 2002 19:39:23 +0300 (EEST)
Return-Path: <cras@irccrew.org>
Delivered-To: dovecot@procontrol.fi
Received: from shodan.irccrew.org (shodan.irccrew.org [80.83.4.2])
    by danu.procontrol.fi (Postfix) with ESMTP id 434B423848
    for <dovecot@procontrol.fi>; Tue, 23 Jul 2002 19:39:23 +0300 (EEST)
Received: by shodan.irccrew.org (Postfix, from userid 6976)
    id 175FA4C0A0; Tue, 23 Jul 2002 19:39:23 +0300 (EEST)
Date: Tue, 23 Jul 2002 19:39:23 +0300
From: Timo Sirainen <tss@iki.fi>
To: dovecot@procontrol.fi
Subject: [dovecot] first test mail
Message-ID: <20020723193923.J22431@irccrew.org>
Mime-Version: 1.0
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
Content-Type: text/plain; charset=us-ascii
X-archive-position: 1
X-ecartis-version: Ecartis v1.0.0
Sender: dovecot-bounce@procontrol.fi
Errors-to: dovecot-bounce@procontrol.fi
X-original-sender: tss@iki.fi
Precedence: bulk
X-list: dovecot
X-IMAPbase: 1096038620 0000010517
X-UID: 1                                                  
Status: O

lets see if it works 
```

msg_2.txt

```
From cras@irccrew.org  Mon Jul 29 02:17:12 2002
Received: with ECARTIS (v1.0.0; list dovecot); Mon, 29 Jul 2002 02:17:12 +0300 (EEST)
Return-Path: <cras@irccrew.org>
Delivered-To: dovecot@procontrol.fi
Received: from shodan.irccrew.org (shodan.irccrew.org [80.83.4.2])
    by danu.procontrol.fi (Postfix) with ESMTP id 8D21723848
    for <dovecot@procontrol.fi>; Mon, 29 Jul 2002 02:17:12 +0300 (EEST)
Received: by shodan.irccrew.org (Postfix, from userid 6976)
    id 8BAD24C0A0; Mon, 29 Jul 2002 02:17:11 +0300 (EEST)
Date: Mon, 29 Jul 2002 02:17:11 +0300
From: John Smith <jsmithspam@yahoo.com>
To: dovecot@procontrol.fi
Subject: [dovecot] Dovecot 0.93 released
Message-ID: <20020729021711.W22431@irccrew.org>
Mime-Version: 1.0
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
Content-Type: text/plain; charset=us-ascii
X-archive-position: 2
X-ecartis-version: Ecartis v1.0.0
Sender: dovecot-bounce@procontrol.fi
Errors-to: dovecot-bounce@procontrol.fi
X-original-sender: tss@iki.fi
Precedence: bulk
X-list: dovecot
X-UID: 2                                                  
Status: O

First alpha quality release, everything critical is now implemented. From
now on it's mostly stabilization and optimization. Features that can't break
existing code could still be added, especially SSL and authentication stuff. 
```

msg_3.txt

```
From cras@irccrew.org  Wed Jul 31 22:48:41 2002
Received: with ECARTIS (v1.0.0; list dovecot); Wed, 31 Jul 2002 22:48:41 +0300 (EEST)
Return-Path: <cras@irccrew.org>
Delivered-To: dovecot@procontrol.fi
Received: from shodan.irccrew.org (shodan.irccrew.org [80.83.4.2])
    by danu.procontrol.fi (Postfix) with ESMTP id F141123829
    for <dovecot@procontrol.fi>; Wed, 31 Jul 2002 22:48:40 +0300 (EEST)
Received: by shodan.irccrew.org (Postfix, from userid 6976)
    id 42ED44C0A0; Wed, 31 Jul 2002 22:48:40 +0300 (EEST)
Date: Wed, 31 Jul 2002 22:48:39 +0300
From: Timo Sirainen <tss@iki.fi>
To: dovecot@procontrol.fi
Subject: [dovecot] v0.95 released
Message-ID: <20020731224839.H22431@irccrew.org>
Mime-Version: 1.0
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
Content-Type: text/plain; charset=us-ascii
X-archive-position: 3
X-ecartis-version: Ecartis v1.0.0
Sender: dovecot-bounce@procontrol.fi
Errors-to: dovecot-bounce@procontrol.fi
X-original-sender: tss@iki.fi
Precedence: bulk
X-list: dovecot
X-UID: 3                                                  
Status: O

v0.95 2002-07-31  Timo Sirainen <tss@iki.fi>

    + Initial SSL support using GNU TLS, tested with v0.5.1.
      TLS support is still missing.
    + Digest-MD5 authentication method
    + passwd-file authentication backend
    + Code cleanups
    - Found several bugs from mempool and ioloop code, now we should
      be stable? :)
    - A few corrections for long header field handling 
```

示例程序输出： ![带有邮件信息信息的示例 TableView](../Images/2482f28f63c953fc67a46dcb7c7ccf77.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:51:25.133

使用上面提到的解决方案，无论我是按原样使用它还是接受 Eclipse 的建议，我都会添加一个 try/catch 和一个进一步的返回值，最后看起来像这样：

```
 fromColumn.setCellValueFactory(new Callback<CellDataFeatures<Message, String>, ObservableValue<String>>() {
        public ObservableValue<String> call(CellDataFeatures<Message, String> m) {
            // m.getValue() returns the Message instance for a particular TableView row
            try {
                return new ReadOnlyObjectWrapper<String>(Arrays.toString(m.getValue().getFrom()));
            } catch (MessagingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return null;
        }
    }); 
```

结果是一样的，我得到一个（可视的）空表视图。这意味着即使使用此 setCellFactury() 解决方案，表格列也是空的。好吧，作为解决方法，我可以定义一个类，我可以在其中将所有三个值存储为字符串，然后使用 PropertyValueFactory 将其传递给 setCellValueFactory()，但我希望能正确完成。

有什么进一步的建议吗？

最好的祝福

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-04T22:22:05.020

这是 Jewelsea 解决方案的 Java 8 版本，但使用了很棒的 lambda：

```
fromColumn.setCellValueFactory(m -> {
        // m.getValue() returns the Message instance for a particular TableView row
        return new ReadOnlyObjectWrapper<String>(Arrays.toString(m.getValue().getFrom()));
    }
}); 
```

大声笑，一定要喜欢 lambdas

# c - 有效地附加一个带有零的大数组？

> ID：13185255
> 
> 赞同：5
> 
> 时间：2012-11-01T20:50:12.180
> 
> 标签：c

我有一个名为 A 的数组，其中包含随机浮点数，其大小在 [10000, 1000000] 范围内的任何位置。这个数组是我的函数的一个随机生成的参数，为了对其进行操作，我试图以一种有效的方式用 10000 个零抢先附加/填充它。我担心追加 A 分配的内存会破坏堆，所以我将新内存、memcopy A 和 memset 10000 在新数组中的尾随浮点数分配为 0.0。

```
void *ArrayPadder(float *A){
    int pad = 10000;
    float *Apadded = (float*)malloc((sizeof(A)+pad)*sizeof(float));
    memcpy(Apadded, A, sizeof(A));
    memset(Apadded+sizeof(A), 0.0, pad);
    return Apadded;
} 
```

任何人都可以提出一种更有效的方法来实现这一点吗？

编辑：为延迟道歉，但我添加了一些说明。我不能只预先分配正确的内存空间（510000 个浮点数）的原因是因为数组实际上是随机大小的，包含随机浮点数。我选择 500000 是为了简化问题，现在已解决。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T20:54:53.940

不是一种更有效的方法，而是一种更准确的方法：

```
memset(Apadded+sizeof(A), 0, pad * sizeof(float)); 
```

好像 float 的大小是 4，你的代码只初始化第一个`pad / sizeof(float) = 10000 / 4 = 2500 elements`

请注意，我使用`0`而不是`0.0`作为第二个参数， as`memset`接受一个 int 并将其（低字节）值设置为所有字节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T20:57:22.140

> 我正在尝试用 10000 个零有效地附加/填充它

追加和填充不一定是同一件事。我假设您希望将现有的内存块增加 10,000 个元素。

为什么不预先分配正确的大小并完成它呢？

```
#define BASE_SIZE 500000
#define PAD_SIZE  10000

/* ... */

float *data = malloc((BASE_SIZE + PAD_SIZE) * sizeof(float));
if(!data) {
    /* do something */
}

memset(data + BASE_SIZE, 0, PAD_SIZE * sizeof(float));
/* last PAD_SIZE elements are now 0 */ 
```

* * *

另请注意，`memset`需要设置的*字节*数，而不是*elements*，所以：

```
memset(Apadded+sizeof(A), 0.0, pad); 
```

是错的。应该是`pad * sizeof(float)`。 `pad`是元素的数量，`sizeof(float)`给出每个元素的字节数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T20:54:26.233

这取决于如何`A`定义。如果它是在堆上分配的，只需使用`realloc()`：

```
Apadded = realloc(A, new_size); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T23:12:34.807

Jordan，您的代码存在一些问题。您没有显示如何`A`定义，但您`sizeof(A)`在`malloc`调用中的使用一定是错误的。要分配扩展内存，您需要`malloc`,`calloc`或`realloc`. `realloc`只能在`A`指向在堆上分配（例如通过 malloc）的内存区域的指针时使用。

```
float *Apadded = realloc(A, (number_of_entries_in_A + pad) * sizeof(float)); 
```

`realloc`将复制 to 的内容，`A`但`Apadded`会使填充区域未初始化。请注意，`realloc`可能会失败，在这种情况下`A`仍然存在并且必须稍后释放。

如果`A`是静态分配的，那么你需要`malloc`or `calloc`。 `calloc`将为您将内存初始化为零，但由于您要将 A 复制到 Apapped，因此很浪费。所以`malloc`最好。

```
float *Apadded = malloc((number_of_entries_in_A + pad) * sizeof(float)); 
```

请注意，`number_of_entries_in_A`与 不一样`sizeof(A)`。另请注意，C 中没有强制转换。

要初始化填充区域，您可以使用`memset`with `sizeof(A)`。但请注意，如果`A`是指针，这将失败，因为`sizeof(A)`只是指针的大小，而不是数组。

```
memcpy(Apadded, A, sizeof(A));
memset(Apadded+sizeof(A), 0, pad); 
```

另请注意，尽管可能是这样，但可能无法保证浮点 0.0 由全零表示。

# class - Scala：如何通过方法修改类中的某些变量？

> ID：13185259
> 
> 赞同：5
> 
> 时间：2012-11-01T20:50:25.237
> 
> 标签：class, scala, var

> **可能重复：**
> [在 scala 中使用 def、val 和 var](https://stackoverflow.com/questions/4437373/use-of-def-val-and-var-in-scala)

我现在正在学习 Scala，我不能在课堂上修改变量。

```
class Person(name: String, var variable: Int) {
  def change() {
    variable = 42
  }
}
def person = new Person("name", 0)
println(person.variable)
person.change()
println(person.variable) 
```

输出是：

```
0
0 
```

为什么输出包含2乘以0？

如何修改此代码中的变量？

我有 Scala 版本 2.9.1。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-01T20:56:18.363

我也花了一段时间才意识到:)

您不是在定义一个`val`或`var`“人”，而是在创建一个新*方法* `person`。因此，每次您调用`person`时，它都会创建一个 的新实例`Person`，该实例将始终`variable`设置为`0`。这是在 Scala 中您不需要`()`调用无参数方法这一事实的副作用。

```
def person = new Person("foo", 1) 
```

大致相当于（在Java代码中）

```
public Person person() {
    return new Person("foo", 1);
} 
```

而是`val person`你想要的，即

```
Person person = new Person("foo", 1) 
```

（当然这不是真的`val`，因为 Scala 不支持这些 :)）

然后当你使用时`person`，Scala 理解的是`person()`.

只需将`def`用于定义方法的更改为`val`or`var`就可以了：)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T20:59:30.720

不容易被发现！这里：

```
def person = new Person("name", 0) 
```

你定义了一个名为`person`. 为了更清楚，您可以执行以下操作：

```
def person(): Person = {
  return new Person("name", 0)
} 
```

这意味着每次您说`person`的不是变量，而是调用方法并一遍又一遍地创建新实例。

只要说`val person =`......你会没事的。

信不信由你，这实际上是语言的一个特点。例如，您可以在您的类中创建一个字段 ( `val`)，然后改变您的想法，只需将其更改为`def`. 从客户端代码的角度来看，没有任何变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T08:19:18.003

让我们逐个分析您的代码。首先，您声明了一个名为 person 的类。 `class Person(name: String, var variable: Int)` 有2个参数，名称和变量。在此类下，您有一个名为： 的方法`def change()`。

它有一个变量，其值为 42。然后你调用了这个`def change()`方法`person.change()`

这`person.change()`实际上并没有改变 var 的值，`variable`而是实际上调用了它自己的方法。尝试做一个`println(person.change())`，你会看到它会打印“42”。

我猜，你还是不明白class和def的区别。如果要更改 的值`class Person`，则需要一个新的 def 来调用更改。

```
 class Person(name: String, var variable: Int) {
  println(variable)
}
def changePerson = Person("new value of name here", "new value of variable here"); 
```

现在调用`defChangePerson`它，它现在将打印您传递给它的值。

# java - 如何在这个 WebDriverWait 示例中保持我的代码“完全 Scala”？

> ID：13185261
> 
> 赞同：2
> 
> 时间：2012-11-01T20:50:26.467
> 
> 标签：java, scala, selenium, webdriver, overriding

看到以 开头的行了`override def...`吗？我希望它不是 Java 风格，而是能够`driver.findElementByClassName()`像往常一样。但是当我更改`driver: WebDriver`为时`driver: FirefoxDriver`，我收到有关覆盖的投诉，我将其删除，然后我收到有关应用的投诉。

有任何想法吗？我非常了解 Selenium，但对 Java 和 Scala 还是陌生的（我来自 Python 背景）。

谢谢！

```
import org.junit.{Before, After, Test}
import org.openqa.selenium.support.ui.{WebDriverWait, ExpectedCondition}
import org.openqa.selenium.{By, WebDriver, WebElement}

class WebDriverWaitTesting extends DemoHelpers {
  @Before
  lazy val driver = adminLogin(setup())

  @Test
  def CompanySelectorAfterLogin() {
    val wait = new WebDriverWait(driver, 10).until(
      new ExpectedCondition[WebElement] {
        override def apply(driver: WebDriver) = driver.findElement(By.className("company-selector-link"))
      }
    )
    assert(driver.getPageSource() contains "Select Company", "We are not on the Company Selector page")
  }

  @After
  def after() {
    tearDown(driver)
  }
} 
```

# iphone - iPhone 表视图：制作部分，UILocalizedIndexedCollat ion 选择器

> ID：13185264
> 
> 赞同：0
> 
> 时间：2012-11-01T20:50:39.647
> 
> 标签：iphone, objective-c, uitableview

我无法在 UITableView 中制作这些部分。我查看了文档`UILocalizedIndexedCollation`以及此示例代码项目：

[https://developer.apple.com/library/ios/#samplecode/TableViewSuite/Listings/3_SimpleIndexedTableView_Classes_RootViewController_m.html#//apple_ref/doc/uid/DTS40007318-3_SimpleIndexedTableView_Classes_RootViewController_m-DontLinkElementID_18](https://developer.apple.com/library/ios/#samplecode/TableViewSuite/Listings/3_SimpleIndexedTableView_Classes_RootViewController_m.html#//apple_ref/doc/uid/DTS40007318-3_SimpleIndexedTableView_Classes_RootViewController_m-DontLinkElementID_18)

我下面的内容基本上是来自示例项目的直接复制/粘贴。但是，示例项目使用自定义对象 (TimeZoneWrapper.h)，然后根据对象的实例变量 (TimeZoneWrapper.localeName) 将对象放置在正确的部分中。但是，我没有使用自定义对象。我只使用了一堆常规的 NSStrings。所以我的问题是我应该将 NSString 上的什么方法传递给 @selector() 来比较字符串并将其放置在正确的节数组中？

目前，我正在调用 NSString 的复制方法作为一种临时技巧，以使事情正常工作（确实如此），但我不确定这是否正确。一点解释将不胜感激！

```
- (void)configureSections {

// Get the current collation and keep a reference to it.
self.collation = [UILocalizedIndexedCollation currentCollation];

NSInteger index, sectionTitlesCount = [[collation sectionTitles] count]; // sectionTitles are A, B, C, etc.

NSMutableArray *newSectionsArray = [[NSMutableArray alloc] initWithCapacity:sectionTitlesCount];

// Set up the sections array: elements are mutable arrays that will contain the locations for that section.
for (index = 0; index < sectionTitlesCount; index++) {
    NSMutableArray *array = [[NSMutableArray alloc] init];
    [newSectionsArray addObject:array];
}

// Segregate the loctions into the appropriate arrays.
for (NSString *location in locationList) {

    // Ask the collation which section number the location belongs in, based on its locale name.
    NSInteger sectionNumber = [collation sectionForObject:location collationStringSelector:@selector(/* what do I put here? */)];

    // Get the array for the section.
    NSMutableArray *sectionLocations = [newSectionsArray objectAtIndex:sectionNumber];

    //  Add the location to the section.
    [sectionLocations addObject:location];
}

// Now that all the data's in place, each section array needs to be sorted.
for (index = 0; index < sectionTitlesCount; index++) {

    NSMutableArray *locationsArrayForSection = [newSectionsArray objectAtIndex:index];

    // If the table view or its contents were editable, you would make a mutable copy here.
    NSArray *sortedLocationsArrayForSection = [collation sortedArrayFromArray:locationsArrayForSection collationStringSelector:@selector(/* what do I put here */)];

    // Replace the existing array with the sorted array.
    [newSectionsArray replaceObjectAtIndex:index withObject:sortedLocationsArrayForSection];
}

self.sectionsArray = newSectionsArray;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:57:22.107

你应该使用`@selector(self)`.

使用`@selector(copy)`会导致项目中的**内存泄漏**

# java - 将地图转换为排序列表

> ID：13185266
> 
> 赞同：1
> 
> 时间：2012-11-01T20:50:42.597
> 
> 标签：java, collections, guava

我正在尝试根据中的值将 a 转换`Map`为有序的。`List``Map`

假设我有以下内容：

```
Map<String, Integer> map = Maps.newHashMap();
map.put("foo", 1);
map.put("boo", 3);
map.put("bar", 2);

//list needs to be sorted by Integer Value -- ASC or DESC
List<String> list = //Elegant guava call? List should be: {foo, bar, boo} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T20:52:17.863

```
List<String> list = Ordering.natural().onResultOf(Functions.forMap(map))
   .sortedCopy(map.keySet()); 
```

...我认为？

# javascript - 使用来自 YQL JSON 的 jQuery .ajax() 方法获取语法错误、意外标记

> ID：13185279
> 
> 赞同：3
> 
> 时间：2012-11-01T20:51:19.477
> 
> 标签：javascript, jquery, yql

我正在尝试按照[本教程包含](http://www.jquery4u.com/json/ajaxjquery-getjson-simple/)[由 YQL](http://pipes.yahoo.com/pipes/pipe.run?_id=57aa32bf3481c8dca0c07afcf9b9dc29&_render=json)通过 jQuery生成的 JSON 文件并收到以下错误：

```
Uncaught SyntaxError: Unexpected token ; 
```

这是我目前尝试使用的代码：

```
$.ajax({
 type: "GET",
 url: "http://pipes.yahoo.com/pipes/pipe.run?_id=57aa32bf3481c8dca0c07afcf9b9dc29&_render=json",
 async: false,
 beforeSend: function(x) {
  if(x &amp;&amp; x.overrideMimeType) {
   x.overrideMimeType("application/j-son;charset=UTF-8");
  }
 },
  dataType: "json",
  success: function(data){
  alert("success");
 }
}); 
```

我对 JSON/JQuery/JS 不太满意，但这并不是我的主要专业领域；）。我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:52:47.670

这是你的问题吗？

```
x &amp;&amp; x.overrideMimeType 
```

代替

```
x && x.overrideMimeType 
```

# php - Apache不执行php文件，但启用了mod_php5

> ID：13185280
> 
> 赞同：3
> 
> 时间：2012-11-01T20:51:21.707
> 
> 标签：php, module, apache2, installation, execution

我不明白为什么。他没有执行 php 文件，而是为我提供下载服务。

在下载的文件中有php源。

我的测试文件很简单，叫做 info.php

```
<?php

phpinfo(); 
```

我的虚拟主机：

```
<VirtualHost some_ip:80>
DocumentRoot /var/www/vhosts/my_vhost/htdocs
ServerName www.my_vhost.com

<Directory /var/www/vhosts/my_vhost/htdocs/>
    Options All -MultiViews
    AllowOverride None
    Order allow,deny
    allow from all
</Directory>

ErrorLog  /var/www/vhosts/my_vhost/logs/error.log
LogLevel warn   
CustomLog /var/www/vhosts/my_vhost/logs/access.log combined

</VirtualHost> 
```

在 apache2 conf 我有一行：

```
AddType application/x-httpd-php .php 
```

启用 Apache 的模块：

```
apache2ctl -M
Loaded Modules:
 core_module (static)
 log_config_module (static)
 logio_module (static)
 mpm_prefork_module (static)
 http_module (static)
 so_module (static)
 actions_module (shared)
 alias_module (shared)
 auth_basic_module (shared)
 auth_digest_module (shared)
 authn_file_module (shared)
 authz_default_module (shared)
 authz_groupfile_module (shared)
 authz_host_module (shared)
 authz_user_module (shared)
 autoindex_module (shared)
 bw_module (shared)
 cgi_module (shared)
 dav_module (shared)
 dav_fs_module (shared)
 dav_lock_module (shared)
 dav_svn_module (shared)
 authz_svn_module (shared)
 deflate_module (shared)
 dir_module (shared)
 env_module (shared)
 fcgid_module (shared)
 include_module (shared)
 mime_module (shared)
 negotiation_module (shared)
 perl_module (shared)
 php5_module (shared)
 python_module (shared)
 reqtimeout_module (shared)
 rewrite_module (shared)
 setenvif_module (shared)
 ssl_module (shared)
 status_module (shared)
 suexec_module (shared)
 userdir_module (shared)
 wsgi_module (shared)
Syntax OK 
```

**我必须尝试调试和解决这个问题吗？**

我也安装了 phpmyadmin，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:49:35.177

检查您是否将此文件“php5.conf”和“php5.load”放入“mods-available”（默认路径：/etc/apache2/mods-available）

如果没有，请像这样创建它们：

php5.conf：

```
<IfModule mod_php5.c>
    <FilesMatch ".ph(p3?|tml)$">
        SetHandler application/x-httpd-php
    </FilesMatch>
    <FilesMatch ".phps$">
        SetHandler application/x-httpd-php-source
    </FilesMatch>
    # To re-enable php in user directories comment the following lines
    # (from <IfModule ...> to </IfModule>.) Do NOT set it to On as it
    # prevents .htaccess files from disabling it.
    <IfModule mod_userdir.c>
        <Directory /home/*/site>
            php_admin_value engine Off
        </Directory>
    </IfModule>
</IfModule> 
```

php5.load ：

```
# default PATH : /usr/lib/apache2/module/libphp5.so
LoadModule php5_module PATH/libphp5.so 
```

Phpmyadmin 将配置文件名“phpmyadmin.conf”的链接添加到“/etc/apache2/conf.d”中，并带有启用 php 的必要指令：

```
<Directory /usr/share/phpmyadmin>
    Options FollowSymLinks
    DirectoryIndex index.php

    <IfModule mod_php5.c>
        AddType application/x-httpd-php .php

        php_flag magic_quotes_gpc Off
        php_flag track_vars On
        php_flag register_globals Off
        php_value include_path .
    </IFModule>
</Directory> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T23:25:43.937

发现了问题。

他们是2：

*   **plesk**，哪个配置让我感到困惑，并把文件还给我下载
*   `NameVirtualHost 111.22.33.44:80`我的虚拟主机中缺少

所以我已经排除了plesk的所有包含，然后问题就很清楚了；无法解析虚拟主机，因为在此之前还有另一个基于 ip 的虚拟主机。

谢谢大家的帮助。

# python - 我的 Python 解释器无法启动文件

> ID：13185281
> 
> 赞同：0
> 
> 时间：2012-11-01T20:51:29.777
> 
> 标签：python, macos, terminal

我有一个程序（当然是在 python 中），它只是应该打开一个终端窗口。代码是

```
import os
os.system("echo hi") 
```

我在 Mac 上。我通过右键单击.py，展开“打开方式”并选择python启动器3（3.3.0）启动了一次或两次。然后，我尝试通过右键单击文件、“打开方式”、“其他”，然后导航到应用程序中 python 3.3 文件夹中的 python 启动器，将其设为默认程序来打开 .py。我确实选中了“始终以...打开”框。但是，当我右键单击 .py 并选择“打开方式”时，xcode 仍然显示为默认值。当我现在使用 python 启动器 3 选项启动它时，它会冻结：我必须强制退出它。当我这样做时，我会收到此错误报告，我将其粘贴在

[http://pastebin.com/Kkzh0Zvc](http://pastebin.com/Kkzh0Zvc)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:12:03.433

如果要从 Python 脚本打开终端应用程序，可以使用[subprocess](http://docs.python.org/2/library/subprocess.html)模块。

```
>>> from subprocess import call
>>> call(["open", "/Applications/Utilities/Terminal.app"]) 
```

# jsf - 在 JSF 页面中显示 HashMap 数据

> ID：13185282
> 
> 赞同：0
> 
> 时间：2012-11-01T20:51:32.610
> 
> 标签：jsf, primefaces, hashmap, el

我正在努力在诸如 inputtext、selectonemenu 等 primefaces 小部件中显示 hashmap 的内容。

我已经定义了 hasmaps

```
 private Map<String, String> subIdMap = new HashMap<String, String>();
  private Map<String, Map<String, String>> dataMap = new HashMap<String, Map<String, String>>(); 
```

> // 他们的 getter 和 setter。

*SubIdMap 包含键和值*

**对于 id 001**

```
private Map<String, String> subIdMap = new HashMap<String, String>();
subIdMap.put("id", "001");
subIdMap.put("name", "Alexender");
subIdMap.put("age", "24");
subIdMap.put("sex", "Male");
subIdMap.put("country", "Greece"); 
```

**对于 id = 002**

```
private Map<String, String> subIdMap = new HashMap<String, String>();

subIdMap.put("id", "002");
subIdMap.put("name", "John");
subIdMap.put("age", "25");
subIdMap.put("sex", "Male");
subIdMap.put("country", "US"); 
```

dataMap 是一个以 ID 作为键，以 subIdMap 作为值的映射

```
 private Map<String, Map<String, String>> dataMap = new HashMap<String, Map<String, String>>();

dataMap.put("001", subIdMap);
or
dataMap.put("002", subIdMap); 
```

我有一个页面，如果用户单击 id 001，它将从 bean 获取 id =001 或 id =002 的数据并显示在 xhtml 页面和 . 我无法在 xhtml 页面的字段中显示地图中的数据

**片段**

```
 @ManagedBean(name = "sampleBean")
    @ViewScoped
    public class SampleBean implements Serializable{

    private Map<String, String> subIdMap = new HashMap<String, String>();
     private Map<String, Map<String, String>> dataMap = new HashMap<String, Map<String, String>>();

public SampleBean() {

subIdMap.put("id", "001");
subIdMap.put("name", "Alexender");
subIdMap.put("age", "24");
subIdMap.put("sex", "Male");
subIdMap.put("country", "Greece");

dataMap.put("001",subIdMap);

    }

    /**
         * @return the subIdMap
         */
        public Map<String, String> getSubIdMap() {
            return subIdMap;
        }

        /**
         * @param subIdMap the subIdMap to set
         */
        public void setSubIdMap(Map<String, String> subIdMap) {
            this.subIdMap = subIdMap;
        }

    /**
         * @return the dataMap
         */
        public Map<String, Map<String, String>> getDataMap() {
            return dataMap;
        }

        /**
         * @param dataMap the dataMap to set
         */
        public void setDataMap(Map<String, Map<String, String>> dataMap) {
            this.dataMap = dataMap;
        }

    } 
```

**xhtml页面**

```
<p:inputText id="textId" value="............." />

<p:selectOneMenu id="selectId" value="................" /> 
```

我在这里需要一些指示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T06:50:16.840

要解决您的问题，请在您的 bean 中添加一个 get 方法以从地图中获取 KeySet，例如

```
 public List getKeyList() {
        return new ArrayList(dataMap.keySet());
 } 
```

然后在jsf页面中放置repeat标签来迭代并显示key

```
<ui:repeat value="#{newJSFManagedBean.keyList}" var="key">
            Key : <h:outputText value="#{key}"/>
</ui:repeat> 
```

但我建议不要在地图中使用地图，而是创建一个名为的简单类`Person`并将值保留在那里，然后简单地使用类似的地图

```
private Map<String, Person> dataMap = new HashMap(); 
```

希望你能继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:12:15.803

您可以像在常规 el 中一样摆脱它

```
 value = "#{yourBean.map.firstKey.nestedKey}" 
```

但我必须说你的设计不推荐。完全没有。每个实体的地图的地图？如果您只是将所有数据封装在一个类中，您的工作会简单得多。

# asp.net - ASP.NET - 从 Web 应用程序项目更改为网站项目

> ID：13185284
> 
> 赞同：0
> 
> 时间：2012-11-01T20:51:39.413
> 
> 标签：asp.net, visual-studio-2010

我是 Visual Studio 和 ASP.NET 的新手。我在 App_Code 目录下有一个 MyClass.cs 文件，但无法在类文件中运行该函数。不断收到此错误：

```
The name 'MyClass' does not exist in the current context 
```

我知道代码可以正常工作，因为我发布了代码并且其他人确认它可以正常工作，但我仍然收到上述错误。

我在 NET 上阅读了更多线程，有人指出问题是使用 Web 应用程序项目而不是网站项目，类文件无法编译。我不确定我是否在应用程序项目我们的网站项目下创建了它。

如何判断我的网站是在 Web 应用程序项目还是网站项目下运行？以及如何将其更改为网站项目，以便可以识别我的班级。

提前致谢，

# operating-system - 模式位在哪里？

> ID：13185300
> 
> 赞同：17
> 
> 时间：2012-11-01T20:53:13.233
> 
> 标签：operating-system, mode

我刚刚在 Silberschatz 的“操作系统概念”中读到这一点，p。18:

> 一个称为**模式位**的位被添加到计算机的硬件中以指示当前模式：内核（0）或用户（1）。通过模式位，我们能够区分代表操作系统执行的任务和代表用户执行的任务。

**模式位存储在哪里？**

（它是CPU中的寄存器吗？你能读取模式位吗？据我了解，CPU必须能够读取模式位。它如何知道哪个程序获得模式位0？特殊地址获取模式位 0？谁设置模式位/如何设置？）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-03T12:28:11.477

请注意，您的问题很大程度上取决于 CPU 本身；尽管您可能会遇到某些甚至不存在用户级/内核级概念的处理器，但这种情况并不常见。

> cs 寄存器还有另一个重要功能：它包含一个 2 位字段，用于指定 CPU 的当前特权级别 (CPL)。值 0 表示最高特权级别，而值 3 表示最低特权级别。Linux 仅使用级别 0 和 3，分别称为内核模式和用户模式。

（取自“了解 Linux 内核 3e”，第 2.2.1 节）
另请注意，这取决于 CPU，您可以清楚地看到它会从一个变化到另一个，但这个概念通常是成立的。

谁设置的？通常，内核/cpu 和用户进程无法更改它，但让我在这里解释一下。

**这是过于简单化了，不要当真**
假设内核已经加载并且第一个应用程序刚刚启动（第一个shell），内核加载了这个应用程序启动的所有内容，设置cs 寄存器中的位（如果您正在运行 x86），然后跳转到 Shell 进程的代码。

shell 会在这个上下文中继续执行它的所有指令，如果进程包含一些特权指令，cpu 将获取它并且不会执行它；它会给出一个异常（硬件异常），告诉内核有人试图执行特权指令，在这里内核代码处理工作（CPU将cs设置为内核模式并跳转到某个已知位置来处理此类错误（也许终止进程，也许是别的）。

那么一个进程如何才能做一些有特权的事情呢？例如，与某个设备交谈？系统调用来了；内核将为您完成这项工作。

发生的情况如下：
您在某些寄存器中设置了您想要的内容（例如，您设置了要访问文件，文件位置是 x，您正在访问以进行读取等）（内核文档将让您知道这一点）然后（在 x86 上）您将调用`int0x80`指令。

这会中断 CPU，停止工作，将模式设置为内核模式，将 IP 寄存器跳转到某个已知位置，该位置具有服务文件 IO 请求的代码并从那里移动。
一旦你的数据准备好了，内核会将这些数据设置在你可以访问的地方（内存位置，寄存器；这取决于 CPU/内核/你请求的内容），将 cs 标志设置为用户模式并跳转回你的it 指令旁边的`int 0x80`指令。

最后，每当发生切换时，都会发生这种情况，内核会收到通知，因此 CPU 会终止您当前的指令，更改 CPU 状态并跳转到处理此事情的代码；上面解释的过程，粗略地说，适用于内核模式和用户模式之间的切换是如何发生的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-01T21:23:06.307

这是一个CPU寄存器。只有在您已经处于内核模式时才能访问它。

如何设置的细节取决于 CPU 设计。在大多数常见硬件中，它在执行用于执行系统调用的特殊操作码时自动设置。然而，在其他架构中，某些内存页面可能设置了一个标志，表明它们是内核的“网关”——在这些页面上调用函数会设置内核模式位。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-01T21:24:07.040

如今，它被赋予了其他名称，例如主管模式或保护[环](http://en.wikipedia.org/wiki/Ring_%28computer_security%29)。

# ruby-on-rails - Rails 在表中查找值

> ID：13185304
> 
> 赞同：0
> 
> 时间：2012-11-01T20:54:05.137
> 
> 标签：ruby-on-rails, ruby, activerecord, loops, block

是否可以调用*包含？*整张桌子上的功能，像这样？

```
<% @user.games.each do |g|
   @@latestround = g.rounds.order('created_at DESC').first
%>
    <% if @@latestround.submittedpictures.isFinalPicture.include?(true) %>
        <p>FinalPicture has been played!</p>
    <% end %>
<% end %> 
```

我遇到的问题是，它仅在我在提交的图片上放置一个块然后循环遍历该表的每条记录时才有效。但是，我想一口气浏览整个表格，看看“isFinalPicture”列是否包含“false”的值。

有任何想法吗？

以下片段有效，但不是我想要的方式（如果回合碰巧有更多“真实”最终图片，我会得到更多行）

```
<% @@latestround.submittedpictures.each do |s| %>
    <% if s.isFinalPicture == true %>
         <p>Final Picture has been played!</p>
    <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:00:40.877

你可以为它做一个范围

```
class SubmitedPricture << ActiveRecord::Base

  scope :final_pictures, where('isFinalPricture = ?', true)
end 
```

那么您可以查看是否只有一个查询

```
latestround.submittedpictures.final_pictures.any? 
```

此外，在命名模型和其他所有内容时，您应该遵循 Rails 的约定。喜欢提交的图片应该提交_图片

# javascript - jQuery Click 的问题

> ID：13185309
> 
> 赞同：3
> 
> 时间：2012-11-01T20:54:19.460
> 
> 标签：javascript, jquery, html

我在使用 jQuery 时遇到了一些麻烦，我真的不知道自己做错了什么。

我有一个包含静态内容和几个按钮的简单页面。当我想将点击事件附加到我的一个按钮时，我的问题就出现了——它就是行不通！

这是我的 html 中的代码：

```
<head>
    <link rel="stylesheet" href="css/main.css" type="text/css">
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
    <script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="js/my.js"></script>
</head>

<body>
    ....
    <button class="btn btn-success" id="my-button">BUTTON</button>
</body> 
```

这是我在 my.js 中的代码：

```
$('#my-button').click(function()
{
    console.log("Button Clicked");
}); 
```

无论我单击按钮多少次，无论我使用哪个浏览器，消息都不会输入到控制台。我只是不明白，我以前没有遇到过这样的问题......我希望这不是一个明显的错误。

我还应该指出，当我将其更改为 $(document).ready 时，它可以正常工作！

帮助 ：（

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T20:57:30.377

您自己说过，将其包装在文档就绪回调中将解决问题。

原因是您的 JavaScript 在元素实际位于 DOM 之前运行，因此在运行 JavaScript 时，没有任何元素与您的选择器匹配，因此无法附加 clickevent-listener。

如果您出于某种原因不想使用 DOM-ready 回调，另一种解决方案是在您关闭 body 元素之前将您的 JavaScript 作为您做的最后一件事。当浏览器到达那个点时，你的元素应该在 DOM 中，所以你的代码应该没问题。

**解决方案 1：等待 DOM 准备好**

```
$(function () {
   $('#my-button').click(function() {
     console.log("Button Clicked");
   });
}); 
```

**解决方案 2：最后加载 JavaScript**

```
<head>
    <link rel="stylesheet" href="css/main.css" type="text/css">
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
    <script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
</head>

<body>
    ....
    <button class="btn btn-success" id="my-button">BUTTON</button>
    <script type="text/javascript" src="js/my.js"></script>
</body> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T20:55:37.057

尝试将其包装在[**文档就绪**](http://api.jquery.com/ready/)函数中，如下所示，

```
$(function () {
  //content below will be executed only after DOM is ready
   $('#my-button').click(function() {
     console.log("Button Clicked");
   });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T20:59:42.827

这不是一个错误。问题是当您的脚本运行时，您的按钮未呈现在页面上。当您将脚本包装在 $(document).ready() 中时，它将确保脚本仅在整个内容正确呈现后才运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T20:56:33.700

您的 js 在您的 html 之前，这意味着`$('#my-button')`选择器为空。您可以尝试事件委托，以确保无论何时存在符合您的条件的元素，都有一个点击监听器：

```
$(document).on("click",'#my-button',function()
{
    console.log("Button Clicked");
}); 
```

# c# - 使用 Linq to EF 将可为空的日期时间与日期时间进行比较

> ID：13185314
> 
> 赞同：0
> 
> 时间：2012-11-01T20:54:34.417
> 
> 标签：c#, javascript, datetime, linq-to-entities, nullable

我有一个可以为空的日期时间的数据库表字段。出于某种原因，我可以让下面的查询工作。

```
var requests = _db.Requests
               .Where(r => r.processedDate.Value == processDate); 
```

我 100% 确定我有四个匹配的日期，但我一直没有得到任何回报。我已经尝试了这个查询的各种变体，但没有成功。

**更新**

比较不起作用的原因是我通过一个javascript函数传递了processDate，就像这样

```
function Reprocess(processDate, spanid) {
    if(confirm('Are you sure you want to re-process this batch?')) {
        $.ajax({
            type: "Post",
            url: "?ajaxFunction=Reprocess",
            data: processDate,
            success: function (data, textStatus, jqXHR) {
                $(spanid).html(data);
            }
        });
    }
} 
```

当我这样做时，我被迫将 DateTime 转换为字符串，以便将其传递给我的函数。当我将它转换为字符串时，它会四舍五入到秒，因此会丢失毫秒。这就是为什么 Linq 查询没有找到任何匹配项（因为 14 毫秒）。

如何通过 javascript 传递完整的日期时间值？还是我必须比较日期、小时、分钟和秒？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:11:43.153

如果您将其转换为服务器端字符串，在它到达您的 JavaScript 之前，请尝试以下操作：

C＃

```
// Make sure processDateStr gets to your JavaScript function
string processDateStr = processDate.ToString("o"); 
```

然后当您再次在服务器上获取字符串值时，使用它来恢复相同的值：

```
DateTime processDate = DateTime.Parse(processDateStr, null, DateTimeStyles.RoundtripKind); 
```

该值将完全恢复到原来的样子。

**编辑**

“o”格式说明符是往返说明符。[您可以在 MSDN 上](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx#Roundtrip)阅读有关它的更多信息。

# c# - 如何从 XML 加载子元素列表？

> ID：13185317
> 
> 赞同：0
> 
> 时间：2012-11-01T20:54:51.327
> 
> 标签：c#, xml, list, xelement

我需要在每个查询中列出 lineitems。下面我只得到查询的值，而不是它的项目列表。

```
 XElement myElement = XElement.Load("Inquiries.xml");
        var query = from s in myElement.Elements("Inquiry")
                    select new
                    {
                        InquiryId = (int)s.Element("InquiryId"),
                        FirstName = (string)s.Element("FirstName"),
                        LastName = (string)s.Element("LastName"),
                        LineItems = from l in myElement.Elements("Inquiry").Elements("LineItems")
                                   select new
                                   {
                                       Quantity = (int)l.Attribute("quantity"),
                                       PartNumber = (string)l.Attribute("partnumber")
                                   }

                    };

        var result = query.ToList(); 
```

XML:

```
<Inquiries>
  <Inquiry>
    <InquiryId>0</InquiryId>
    <FirstName>John</FirstName>
    <LastName>Smith</LastName>
    <LineItems>
      <LineItem quantity="2" partnumber="abc"></LineItem>
      <LineItem quantity="3" partnumber="abc"></LineItem>
      <LineItem quantity="6" partnumber="abc"></LineItem>
    </LineItems>
  </Inquiry>
  <Inquiry>
    <InquiryId>1</InquiryId>
    <FirstName>Epic</FirstName>
    <LastName>Beardman</LastName>
    <LineItems>
      <LineItem quantity="2" partnumber="abc"></LineItem>
      <LineItem quantity="3" partnumber="abc"></LineItem>
      <LineItem quantity="6" partnumber="abc"></LineItem>
    </LineItems>
  </Inquiry>
</Inquiries> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:02:59.507

这应该有效：

```
 public void Test()
    {
        var inquiries = XElement.Load("Test.xml").Elements("Inquiry")
            .Select(i => new Inquiry
                        {
                            InquiryId = int.Parse(i.Element("InquiryId").Value),
                            FirstName = i.Element("FirstName").Value,
                            LastName = i.Element("LastName").Value,
                            LineItems = i.Elements("LineItems").Descendants()
                                .Select(li => new LineItem
                                    {
                                        Quantity = int.Parse(li.Attribute("quantity").Value),
                                        PartNumber = li.Attribute("partnumber").Value
                                    }).ToList()
                        }).ToList();
    }
}

public class Inquiry
{
    public int InquiryId { get; set; }

    public string FirstName { get; set; }

    public string LastName { get; set; }

    public List<LineItem> LineItems { get; set; }
}

public class LineItem
{
    public int Quantity { get; set; }

    public string PartNumber { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:44:25.657

```
XElement myElement = XElement.Load("Inquiries.xml");
var query = from s in myElement.Elements("Inquiry")
            select new
            {
                InquiryId = Convert.ToInt32(s.Element("InquiryId").Value),
                FirstName = s.Element("FirstName").Value,
                LastName = s.Element("LastName").Value,
                LineItems = (from l in s.Element("LineItems").Elements("LineItem")
                            select new
                            {
                                Quantity = Convert.ToInt32(l.Attribute("quantity").Value),
                                PartNumber = l.Attribute("partnumber").Value
                            }).ToList()

            };

var result = query.ToList(); 
```

# c# - 如何检测文本文件的实时变化？

> ID：13185319
> 
> 赞同：4
> 
> 时间：2012-11-01T20:54:53.050
> 
> 标签：c#, algorithm, logging

我说要编写一个小 PC 工具来使用 c# 或 java 读取日志文件。日志文件将采用 .txt 格式。一个应用程序正在运行并写入日志，我希望我的工具同时打开日志并在向日志文件写入新行时自动刷新。

我的挑战是，如何检测日志文件的变化，以便我的工具具有实时显示能力？这是一个普遍的问题，但伪代码将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T20:56:53.467

您可以使用`FileSystemWatcher`该类（[MSDN 页面](https://docs.microsoft.com/en-us/dotnet/api/system.io.filesystemwatcher)）。但要小心，如果您在其他进程正在写入文件时尝试打开文件，您可能会被拒绝访问。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T20:58:07.877

这里有很多这样的问题，也有答案：

[在 .NET 中读取文件内容更改](https://stackoverflow.com/questions/2373090/reading-file-content-changes-in-net)

我想你的目标是 FileStream 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T20:57:46.887

我会轮询文件并检查它的最后更改日期的元数据，或者如果您使用的是 .NET，则可以使用[`FileSystemWatcher`](http://msdn.microsoft.com/en-us/library/System.IO.FileSystemWatcher%28v=vs.100%29.aspx)该类

# php - PHP 严格标准：从空值创建默认对象

> ID：13185322
> 
> 赞同：3
> 
> 时间：2012-11-01T20:55:16.387
> 
> 标签：php, include

我有以下设置。

**索引.php**

```
 require_once "common.php";
   ... 
```

**常见的.php**

```
 ...
   $obj = new MyClass;
   require_once "config.php"
   ... 
```

**配置文件**

```
 ...
   require_once "settings.php";
   ... 
```

**设置.php**

```
 $obj->dostuff = true;
   ... 
```

当我打开**index.php**时，我得到：**严格标准：从 3 上的 settings.php 中的空值创建默认对象**

如果我放入`$obj->dostuff = true;`config.php**它**不会产生错误消息。

有人可以解释为什么我会收到此错误吗？我不是在问如何解决它，只是了解原因。

**编辑：**我的错误是，我为站点的每个部分都有 2 个 config.php 类，我只更改了其中一个中的一些内容，将旧的包含顺序留在了另一个中，现在它在所有按正确顺序加载后工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:21:06.160

它看起来是一个范围问题。在 settings.php 中，$obj 不可访问。PHP 正在从标准类创建新的，并给你一个警告。您可以通过输入来确认

```
echo get_class($obj); 
```

在您的 settings.php 中，就在产生错误的行之后。如果它回显“StdClass”，那么就是这种情况。

您确定 $obj 不是在函数/方法中创建的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:45:13.910

如果 $obj 是一个系统范围的全局可访问对象，您可以使用单例模式从任何地方访问：

```
class MyClass
{
    protected static $_instance;

    static function getInstance()
    {
        if (null === self::$_instance) {
            self::$_instance = new self();
        }
        return self::$_instance;
    }
} 
```

然后，您可以在此类中创建您的方法。要获取对象本身，只需调用：

```
$obj = MyClass::getInstance(); 
```

此外，如果您只想调用其中一种方法但无需返回任何内容：

```
MyClass::getInstance()->objectMethod(); 
```

我发现这是一种组织基于单例的整体系统范围操作的非常有效的方法。

实际上，我的项目使用它从系统中的任何位置获取配置：

```
class syConfig
{
    protected static $_instance;

    private $_config;

    static function getInstance()
    {
        if (null === self::$_instance) {
            self::$_instance = new self();
        }
        return self::$_instance;
    }

    public function load($xmlString)
    {
        $xml = simplexml_load_string($xmlString);
        $this->_config = $xml;
    }

    public function getConfig()
    {
        return $this->_config;
    }
} 
```

# php - 如何防止直接访问需要身份验证的站点上的资产？

> ID：13185330
> 
> 赞同：0
> 
> 时间：2012-11-01T20:55:38.367
> 
> 标签：php, iis-7, security

该公司的网站是用 PHP 编写的，但在 IIS7 上运行。

**情况：**未经身份验证的用户关注书签或手动输入页面的 url。如果用户尚未登录，则应将其重定向到登录。

**当前状态**这有效，但仅适用于 PHP 页面。每个页面都包含检查活动会话的代码，如果未找到，则将用户重定向到登录页面。

**需要解决的问题：** 如果用户关注书签或手动输入非页面资产的 url（页面中的图标、excel 文档、图像、pdf 等），我们希望用户被重定向到登录。

当用户直接访问非 PHP 资产时，我们如何检查活动会话？

换句话说，我们如何检查这样的 url 的活动会话：

[https://www.mysecuresite.com/img/secretpicture.jpg](https://www.mysecuresite.com/img/secretpicture.jpg)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:02:13.790

不确定 IIS，可以帮助 Apache，但是呃.. 我知道一些社交网络通过 PHP 链接他们的静态资产。

所以图片链接不是直接的，而是：/getImage.php?id=secretimage

在那里你可以先检查会话......但是，是的，在你的情况下需要一些重构。

# javascript - 从 jQuery Autocomplete Widget Ajax 调用中访问 $(this) DOM 元素

> ID：13185331
> 
> 赞同：0
> 
> 时间：2012-11-01T20:55:42.533
> 
> 标签：javascript, jquery, jquery-ui, jquery-selectors, coffeescript

在下面的代码（Coffeescript）中，在对 jQuery 自动完成数据源的 AJAX 调用中，在代码的第 5 行，我传递了 2 个参数 - term: 和 ll: For ll: 我正在尝试获取 $(this)成为应用 .autocomplete 的 DOM 元素。在这种情况下，它的 $('[type="text"][name*="[location]"]') 我需要在第 5 行用 ($this) 专门引用该 DOM 元素。但是，我相信 'this'在那个范围内指的是不是 DOM 元素的其他东西。有人可以帮忙解释我需要做什么吗？

```
$('[type="text"][name*="[location]"]').autocomplete(
    source: (request, response) ->
      $.ajax 
        url: $('[type="text"][name*="[location]"]').data('autocomplete-source')
        data: {term: request.term, ll: $(this).siblings('[name*="[geocode_location]"]')}
        contentType: "application/json; charset=utf-8"
        success: (data) ->
          response $.map(data, (item) ->
            value: item.value
            label: item.label
            address: item.address
          )

    focus: (event, ui) ->
      event.preventDefault()
      $(this).val ui.item.label
    select: (event, ui) ->
      event.preventDefault()
      $(this).val ui.item.label
      $(this).siblings('[name*="[foursquare_id]"]').val ui.item.value
  ).data("autocomplete")._renderItem = (ul, item) ->
    $("<li>").data("item.autocomplete", item).append("<a>" + item.label + "<br>" + item.address + "</a>").appendTo ul 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:35:10.157

我不能告诉你任何关于 Coffeescript**`this.element`**的事情，但应该返回元素（它是一个 jQuery 对象）

所以应该是：

```
ll:this.element.siblings('[name*="[geocode_location]"]') 
```

但这不起作用，因为兄弟姐妹返回一个 jQuery 对象并且不能作为请求参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:47:26.237

就像@Dr.Molle 建议的那样，this.element 有助于获得我想要的DOM 元素。更新了下面的代码块。请参阅第 5 行了解我如何应用它。

```
$('[type="text"][name*="[location]"]').autocomplete(
    source: (request, response) ->
      $.ajax 
        url: $('[type="text"][name*="[location]"]').data('autocomplete-source')
        data: {term: request.term, ll: this.element.siblings('[name*="[geocode_location]"]').val()}
        contentType: "application/json; charset=utf-8"
        success: (data) ->
          response $.map(data, (item) ->
            value: item.value
            label: item.label
            address: item.address
          )

    focus: (event, ui) ->
      event.preventDefault()
      $(this).val ui.item.label
    select: (event, ui) ->
      event.preventDefault()
      $(this).val ui.item.label
      $(this).siblings('[name*="[foursquare_id]"]').val ui.item.value
  ).data("autocomplete")._renderItem = (ul, item) ->
    $("<li>").data("item.autocomplete", item).append("<a>" + item.label + "<br>" + item.address + "</a>").appendTo ul 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T21:10:52.533

您在自动完成功能中缺少大括号，并且您的选择器在我的测试用例中不起作用..

试试这个 jQuery 选择器：

```
$('input[type="text"][name*="location"]').autocomplete({ .... 
```

# java - 特征向量生成器 - 什么设计模式有用？

> ID：13185335
> 
> 赞同：3
> 
> 时间：2012-11-01T20:55:56.333
> 
> 标签：java, design-patterns

我的问题看起来很简单，但只是乍一看（对我来说：P）。
我需要创建一个构建特征向量的类。这个特征向量代表一个文本。特点是：平均词长，洞文本中的句子数量等。

在其他特征计算过程中可以提取一些特征，这就是为什么我稍微修改了一个 Builder 设计模式，它看起来像这样：

我正在创建一个构建器对象：

```
FeatureVectorBuilder fvb = new FeatureVectorBuilder(String text/InputStream <- now it doesn't matter) 
```

然后我指定一个订单，它表达了我想要包括哪些功能

```
fvb.setLenghtWord(True) <- for fixed length features
fvb.setXXXFeature(32) <- for variable length features 
```

接下来我正在构建这个向量：

```
fvb.buildFeatureVector() <- this way computations are optimized; 
```

最后我有一个 FeatureVector 得到。

```
fvb.getFeatureVector(); 
```

一切看起来都还不错，但是...大约有 32 个不同的功能需要设置...
这样，悲观的情况需要 32 个函数调用，同时创建一个具有 32 个参数的函数看起来很愚蠢。

我想知道是否有人在为这样的问题而苦苦挣扎，也许有比“32 种不同方法”方法更好的解决方案:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:06:09.387

构建器模式的要点之一是通过在构建器中用多个方法替换它们来避免具有大量参数的方法。如果您有 32 个可能的功能，那么在构建器中拥有 32 个方法对我来说看起来很正常。

另一种可能性是将每个功能设计为一个类，并在构建器中添加这些类的实例：

```
builder.addFeature(new LengthWordFeature(true))
       .addFeature(new XxxFeature(32)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:09:55.030

干净地封装功能的一种可能性是：

```
abstract class Feature
{
    String name;
    ...
}

class NumericFeature extends Feature
{
    int value;
}

class OtherFeatureType extends Feature
{
    ....
}

Feature[] features = new Feature[] {
    new NumericFeature("xxxFeature", 32),
    new OtherFeature("feature1", ...),
    ...
};

FeatureVectorBuilder fvb = new FeatureVectorBuilder(text, features); 
```

# c# - 如何添加for循环控制

> ID：13185344
> 
> 赞同：4
> 
> 时间：2012-11-01T20:56:53.233
> 
> 标签：c#

我尝试为循环添加复选框，例如当我在文本框中输入 3 并单击按钮时，它会自动以我尝试此代码但仅添加一个复选框的形式添加 3 个复选框

```
 private void button1_Click(object sender, EventArgs e)
    {                                                         
        int x = Convert.ToInt32(textBox1.Text);
        int m = 1;
        for (int i = 0; i < x; i++)
        {
            CheckBox button2 = new System.Windows.Forms.CheckBox();

            button2.Location = new System.Drawing.Point(5, m);
            button2.Name = "button2 "+  m.ToString();
            button2.Size = new System.Drawing.Size(51, 23);
            button2.TabIndex = m;

            //button2.UseVisualStyleBackColor = true;

            this.Controls.Add(button2);
            m++;

        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T20:59:07.613

您将所有三个按钮的位置设置为几乎相同的位置，以便它们彼此重叠显示。尝试将它们隔开一点。

例如更改`m++;`为`m += 40;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:00:11.953

你需要把你的按钮分开一点。此外，您应该给每个按钮一个唯一的 ID。

```
button2.ID = "Button_" + i; 
```

# ios6 - iOS6 迁移后应用不再打开

> ID：13185345
> 
> 赞同：5
> 
> 时间：2012-11-01T20:57:01.833
> 
> 标签：ios6, upgrade

我在 App Store 中有一个应用程序，并且我收到了来自全球多个用户的报告，该应用程序主要是在升级到 iOS 6 之后不再工作。该应用程序使用以下框架：

*   快速查看
*   消息界面
*   移动核心服务
*   石英芯
*   核心数据
*   UIKit
*   基础
*   核心图形

到目前为止，我发现的唯一可能的线索是**屏幕旋转**从 iOS 5 到 iOS 6 的变化，但消息来源表明这仅在使用 iOS 6 SDK 构建应用程序时才会生效。

我已将我的 iPad 3 恢复为出厂设置 (iOS 6.01) 并从 App Store 重新下载了该应用程序，但该应用程序运行正常。知道要寻找什么吗？

# objective-c - 在 Obj-c/iOS 中，最好将秒存储为 int 还是 NSNumber？

> ID：13185356
> 
> 赞同：-4
> 
> 时间：2012-11-01T20:57:47.997
> 
> 标签：objective-c, ios

在 Obj-c/iOS 中，最好将秒存储为 int 还是 NSNumber？不幸的是，我无法使用 NSTime，因为我将它存储在服务器上，而且他们不使用 NSTime。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:00:52.853

我认为这并不重要，所以为了简单起见，我会说一个 int 只是因为它不需要初始化。

# linux - 如何在windows中为要在linux中执行的.sh文件分配执行权限

> ID：13185364
> 
> 赞同：50
> 
> 时间：2012-11-01T20:58:16.160
> 
> 标签：linux, windows, shell, file-permissions

这是我的问题，

在 Windows 中，我正在制作一个 zip 文件，其中有一个应该在 Linux 中执行的文本 .sh 文件。另一端的用户在 Linux 中打开 zip 文件并尝试执行 .sh 文件，但执行权限已消失。所以用户必须手动完成（就像这里解释的：[添加执行权限](http://roshanbook.wordpress.com/2012/01/06/make-sh-file-executable-in-linux/)。

我如何在 Windows 中制作 .sh 可执行文件并将其添加到 zip 文件中，以便当 zip 文件在 linux 中打开时 .sh 文件仍保留其执行权限（这样用户不必手动执行）

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-01T21:03:46.460

据我所知，Linux 中的权限系统是以这样一种方式设置的，以防止您试图完成的事情。

我认为您能做的最好的事情是为您的 Linux 用户提供一个自定义的解压缩单线以在提示符下运行：

```
unzip zip_name.zip && chmod +x script_name.sh 
```

如果有多个脚本需要授予执行权限，请编写`grant_perms.sh`如下：

```
#!/bin/bash
# file: grant_perms.sh

chmod +x script_1.sh
chmod +x script_2.sh
...
chmod +x script_n.sh 
```

（对于 chmod，您可以将脚本全部放在一行中，但我发现单独的行更容易在 vim 和 shell 脚本命令中使用。）

现在你的解压缩单线变成：

```
unzip zip_name.zip && source grant_perms.sh 
```

请注意，由于您`source`用于运行`grant_perms.sh`，因此不需要执行权限

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-13T09:36:40.863

ZIP 文件格式确实允许存储权限位，但 Windows 程序通常会忽略它。然而，Cygwin 上的`zip`实用程序确实保留了 x 位，就像它在 Linux 上一样。如果您不想使用 Cygwin，您可以获取源代码并对其进行调整，以便所有 *.sh 文件都设置可执行位。或者写一个像[这里解释的脚本](https://superuser.com/questions/213774/is-there-an-archive-tool-that-runs-on-windows-that-i-can-set-the-execute-attr/213782#213782)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-01T21:14:01.820

这可以使用[Info-Zip](http://www.info-zip.org/)开源 Zip 实用程序来实现。如果使用**-X**参数运行[unzip](http://www.info-zip.org/mans/unzip.html)，它将尝试保留原始权限。如果源文件系统是 NTFS 而目标文件系统是 Unix 系统，它将尝试从一个文件系统转换到另一个文件系统。我现在没有可用的 Windows 系统来测试翻译，所以你必须试验哪个组需要被授予执行权限。类似于“用户”或“任何用户”

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-07T21:59:53.963

Use my windows command line utility [zip_exec.zip](http://www.galaxy-forces.com/zip_exec.zip) to set the executable flag for linux/unix and mac (tested on files created with Windows Explorer and 7zip). The cpp [source](https://sourceforge.net/p/galaxyv2/code/HEAD/tree/other/zip_exec/) is also available. I searched the internet a lot before making my own utility. It can be modified to set any file attribute.

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-11-01T21:04:50.407

这是不可能的。Linux 权限和 windows 权限不转换。它们是特定于机器的。允许在文件到达目标系统之前对其设置权限将是一个安全漏洞。**

# ruby - 无法在 list_box 中间对齐

> ID：13185366
> 
> 赞同：0
> 
> 时间：2012-11-01T20:58:21.370
> 
> 标签：ruby, alignment, shoes

我无法在红宝石鞋的 list_box 中间对齐。我已经测试了一些东西，包括 :right => "50" 或 :left => "50"，但它仍然无法正常工作。

```
Shoes.app do 
  stack :width => "100%", :height => "45%" do
    a = list_box :items => ["lol","b"], :width => 50, :align => "center"
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T02:05:27.547

我没有找到直接的方法，但你可以使用这个 hack

```
module Shoes::Types
def centr
 left=(self.parent.width-self.style[:width])/2
 self.move(left,self.top)
end

def middle
 top=(self.parent.height-self.style[:height])/2
 self.move(self.left,top) 
end
end

Shoes.app do 
 @c=stack :width=>50, :height=>30 do
  a=list_box :items => ["lol","b"], :width => 50, :height=>30
 end
 @c.centr.middle
end 
```

所做的实际上是首先扩展插槽的功能，以便您可以将它们放置在包含插槽的中心或中间。然后你将你的列表框包裹在一个小槽中，你将其居中。

# javascript - jQuery 表达式

> ID：13185371
> 
> 赞同：-1
> 
> 时间：2012-11-01T20:58:35.583
> 
> 标签：javascript, jquery

我知道这是一个有点傻的问题，但我仍然找不到答案，也许我搜索的关键字不正确。

我希望有人可以纠正我的 js 表达。

```
var id = idname;
$('#' + id).hide(); 
```

('#' + id) 表达式从控制台出错，我想要 $('# ***variable*** ') 什么是正确的表达式`$('"#'+xerocon2013'"').`

谢谢有人可以让我站起来

更新，

对不起，伙计们，我有美元符号。错误是

> 无法识别的表达式：#[object HTMLDivElement]

我昨天测试很好，但今天不起作用..叹息。多么奇怪。我通过我的代码可能不对。

**我只是想确保我的表达是正确的。**如果我的表达没有错误，那么就是我的代码。

代码

```
<script type="text/javascript">
$(function(){
       $(window).bind("load", function () {
              var urlHash = window.location.href.split("#")[1];
                $('html,body').animate({ scrollTop: $('#' + urlHash).offset().top}, 1000);
    }); 
});
    </script>

<style type="text/css">
.space{height:800px;}
#anchor{font-size:25px;height:800px;display:block;}
</style>

<div class="space"></div>
<div id="anchor">This is anchor</a> 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:00:10.930

因此，有了错误，问题就在于没有返回散列。所以如果没有哈希，你正在寻找一个带有 $("#") 的元素

```
var urlHash = window.location.href.split("#")[1];
$('html,body').animate({ scrollTop: $('#' + urlHash).offset().top}, 
```

window.location 具有哈希属性，因此没有理由拆分

```
var urlHash = window.location.hash;
if (urlHash.length>1) {
    var elemPosition = $(urlHash).offset().top;
} else {
    elemPosition = 0;
}
$('html,body').animate({ scrollTop: elemPosition }, 1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:01:04.570

你不是缺少 jQuery 标识符吗？

```
var id = 'my_dynamic_id';
$("#" + id).hide(); 
```

# python - 如何允许在 Gtk.ListStore 中对多列进行排序

> ID：13185375
> 
> 赞同：2
> 
> 时间：2012-11-01T20:58:52.793
> 
> 标签：python, gtk3

我有以下适用于 Gtk3 Listore 的设置。

```
 self.liststore = Gtk.ListStore(str, str, bool)
    treeview = Gtk.TreeView(model=self.liststore)

    renderer_text = CellRendererText()
    column_text = Gtk.TreeViewColumn("Media URL", renderer_text, text=0)
    treeview.append_column(column_text)

    column_date = Gtk.TreeViewColumn("Date", renderer_text, text=1)
    column_date.pack_start(renderer_text, True)
    treeview.append_column(column_date)

    renderer_toggle = Gtk.CellRendererToggle()
    renderer_toggle.connect("toggled", self.on_cell_toggled)
    column_toggle = Gtk.TreeViewColumn("Toggle", renderer_toggle, active=2)
    treeview.append_column(column_toggle)

    self.treeview = treeview
    self.scrolledwindow.add(self.treeview) 
```

我尝试添加：

```
 column_text.set_sort_column_id(0)
     self.liststore.set_sort_func(0,self.compare, None) 
```

这会导致崩溃，但是根据此处的文档：http: [//python-gtk-3-tutorial.readthedocs.org/en/latest/treeview.html](http://python-gtk-3-tutorial.readthedocs.org/en/latest/treeview.html)应该可以工作，但是只有当我将 0 替换为self.liststore.set_sort_func(0,self.compare, None) 中的 1，我可以单击 Media 列对内容进行排序。

```
 self.liststore.set_sort_func(1,self.compare, None) 
```

问题：这是正确的还是奇怪的，或者文档错误，模型的索引不像文档中那样从 0 开始？

但此外，我需要帮助才能通过 Date 列进行排序。我试过添加：

```
 column_date.set_sort_column_id(0)
       self.liststore.set_sort_func(1,self.compare, None) 
```

但这样做会因崩溃而失败。

# c# - 如何调试这个或可能的原因？Moq.Verify 上的用户代码未处理 System.NullReferenceException

> ID：13185385
> 
> 赞同：2
> 
> 时间：2012-11-01T20:59:56.850
> 
> 标签：c#, linq, unit-testing, moq

我的单元测试中有这样的东西

```
public class MyTestClass()
{
      private Mock<IAccountRepo> accountRepo;
       private AdminService adminService;

      [Setup]
      public void Setup()
      {
        accountRepo = fixture.Freeze<Mock<IAccountRepo>>();
        adminService = fixture.CreateAnonymous<AdminService>();
      }

      [Test]
      public Test()
      {
          accountRepo.Setup(x => x.Insert(It.IsAny<IUnitOfWork>(), It.IsAny<MyDomainObject>()));

            adminService.ApplyAdminFee(1, 1, today);

            accountRepo.Verify(x => x.Insert(It.IsAny<IUnitOfWork>(), It.Is<MyDomainObject>(a => a.Id == 1)));
      }
} 
```

我得到这个错误。

```
System.NullReferenceException was unhandled by user code
  Message=Object reference not set to an instance of an object.
  Source=Anonymously Hosted DynamicMethods Assembly
  StackTrace:
       at lambda_method(Closure , MyDomainObject )
       at Moq.It.<>c__DisplayClass2`1.<Is>b__1(TValue value)
       at Moq.Match`1.Matches(Object value)
       at Moq.Matcher.Matches(Object value)
       at Moq.MethodCall.Matches(IInvocation call)
       at Moq.Mock.<>c__DisplayClassc.<VerifyCalls>b__b(IInvocation i)
       at System.Linq.Enumerable.WhereListIterator`1.MoveNext()
       at System.Linq.Enumerable.Count[TSource](IEnumerable`1 source)
       at Moq.Mock.VerifyCalls(Interceptor targetInterceptor, MethodCall expected, Expression expression, Times times)
       at Moq.Mock.Verify[T](Mock mock, Expression`1 expression, Times times, String failMessage)
       at Moq.Mock`1.Verify(Expression`1 expression, Times times)
       at Test() in 383
  InnerException: 
```

我不确定为什么。

**编辑**

我想我知道发生了什么。在我的方法中，我有 3 次调用 insert 方法（insert 方法接受一个对象）。

所以我喜欢

```
accountRepo.Insert(MyDomainObject);
accountRepo.Insert(MyOtherDomainObject);
accountRepo.Insert(MyOtherOtherDomainObject); 
```

那么也许这两个其他插入会覆盖它？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T05:05:51.357

问题出在这里：`It.Is<MyDomainObject>(a => a.Id == 1)`. 您可以从堆栈跟踪中看出。

我会这样改变它：`It.Is<MyDomainObject>(a => a != null && a.Id == 1)`

# c# - 在 MonoMac 应用程序堆栈跟踪上打印行号

> ID：13185389
> 
> 赞同：2
> 
> 时间：2012-11-01T21:00:18.787
> 
> 标签：c#, macos, cocoa, mono, monomac

我有一个 MonoMac 应用程序，想看看是哪一行导致了异常。我所有的堆栈跟踪都是这样的：

```
[ERROR] FATAL UNHANDLED EXCEPTION: System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.Exception: I am going to crash now.
  atSync.MacConfiguration..ctor (System.String destinationPath, IDatabasePathGenerator pathGenerator) [0x00000] in <filename unknown>:0 
  at Sync.MacConfiguration..ctor () [0x00000] in <filename unknown>:0 
  at (wrapper managed-to-native) System.Reflection.MonoCMethod:InternalInvoke (System.Reflection.MonoCMethod,object,object[],System.Exception&)
  at System.Reflection.MonoCMethod.Invoke (System.Object obj, BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x00000] in <filename unknown>:0 
  --- End of inner exception stack trace ---
at System.Reflection.MonoCMethod.Invoke (object,System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo) <0x001f3>
at System.Reflection.MonoCMethod.Invoke (System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo) <0x00024>
at System.Reflection.ConstructorInfo.Invoke (object[]) <0x00042>
at System.Activator.CreateInstance (System.Type,bool) <0x001d3>
at System.Activator.CreateInstance (System.Type) <0x00013>
at Sync.ConfigurationSection.get_Configuration () <0x00043>
at Sync.Configuration.LoadFromXML (string) <0x000cf>
at Sync.Configuration.get_Default () <0x0005f>
at Sync.Mac.AppDelegate..ctor () <0x00037>
at (wrapper dynamic-method) object.905edfe4-e0b5-4f92-955e-4e10c991fb3a (intptr,MonoMac.ObjCRuntime.Selector) <0x00057>
at (wrapper native-to-managed) object.905edfe4-e0b5-4f92-955e-4e10c991fb3a (intptr,MonoMac.ObjCRuntime.Selector) <0x0006f>
at (wrapper managed-to-native) MonoMac.AppKit.NSApplication.NSApplicationMain (int,string[]) <0x00003>
at MonoMac.AppKit.NSApplication.Main (string[]) <0x0003f>
at Sync.Mac.MainClass.Main (string[]) <0x000e7> 
```

我已尝试将文件复制到`.mdb`文件`Contents/MonoBundle`夹中，但在堆栈跟踪中仍然看不到行号。

关于如何解决这个问题的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:47:40.807

在 Linux 中，要查看行号，您不仅需要 .mdb，还需要使用标志“--debug”调用 mono。

现在，在 Mac 上，我不确定这是否有效（或者它是否可能，因为您使用的是捆绑包，我不确定这是否意味着您将全部编译成一个可执行文件？）。

# scala - 结构子类型反射

> ID：13185405
> 
> 赞同：8
> 
> 时间：2012-11-01T21:01:30.330
> 
> 标签：scala, reflection, structural-typing

我们可以`val s: String`从函数外部获取使用反射的类型`f`吗？

```
val f = (r: {val s: String}) => {
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T02:36:27.113

```
scala> import scala.reflect.runtime.{universe => ru}
import scala.reflect.runtime.{universe=>ru}

scala> import scala.reflect.runtime.universe._
import scala.reflect.runtime.universe._

scala> def typeOf[T: ru.TypeTag](x: T) = ru.typeOf[T] // capture compile-time type info
typeOf: [T](x: T)(implicit evidence$1: reflect.runtime.universe.TypeTag[T])reflect.runtime.universe.Type

scala> val f = (r: {val s: String}) => {}
f: AnyRef{val s: String} => Unit = <function1>

scala> val tpe = typeOf(f)
tpe: reflect.runtime.universe.Type = scala.AnyRef{val s: String} => Unit

scala> ru.showRaw(tpe)
res0: String = TypeRef(ThisType(scala), scala.Function1, List(RefinedType(List(TypeRef(ThisType(scala), newTypeName("AnyRef"), List())), Scope(newTermName("s"))), TypeRef(ThisType(scala), scala.Unit, List())))

scala> val ru.TypeRef(_, _, refinement :: _) = tpe
refinement: reflect.runtime.universe.Type = scala.AnyRef{val s: String} 
```

使用 Scala 反射，还可以为结构类型生成模拟，如下所示：[https](https://gist.github.com/4008389) ://gist.github.com/4008389 。链接的 gist 使用工具箱和运行时反射来做到这一点，但这个场景看起来也可以用宏来实现。

# facebook - Facebook 不会分享指向我网站的链接

> ID：13185406
> 
> 赞同：4
> 
> 时间：2012-11-01T21:01:36.823
> 
> 标签：facebook, api

我正在尝试在 Facebook 上分享指向我网站的链接。该页面在我的浏览器中正确显示，但是当我通过 API 或前端共享它时，它没有显示。当我将我的 URL 放入[Graph API 调试器](https://developers.facebook.com/tools/debug)时，它给了我一个错误“解析 URL 时出错：解析输入 URL 时出错，没有数据被抓取。”

有什么问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-01T21:01:36.823

希望这是一份详尽的清单，列出了您的网站何时不会抓取的内容：

**1) 您的网站是否在垃圾邮件黑名单中？** 这种情况很少见，但如果您的网站出现在垃圾邮件发送者黑名单中，Facebook 和大多数其他工具根本不会解析您的网站。

我使用[https://admin.uribl.com/](https://admin.uribl.com/)作为检查器。如果您的网站被列出，您需要找到并清除您网站上的恶意软件，然后按照黑名单所有者的说明删除您的网站。如果问题在于您的主机是已知的垃圾邮件发送者，则您需要更改主机。在任何网站再次抓取您的网站之前，这需要几天时间才能通过系统。

**2) 你的 (X)HTML 有效吗？** Facebook 的解析器非常严格。如果您的网络服务器或您的 HTML 发送的标头无效，Facebook 将不会解析您的网站。要对此进行详细测试，请使用[W3C 中的标记验证器](http://validator.w3.org/)。在 Facebook 解析您的页面之前，您必须解决**所有错误。**

我见过的一些最常见的错误是：

*   标头中发送的字符串无效
*   `character-encoding`标头中的发送与`<meta charset>`文档中的标签不匹配。
*   无效或不正确`<!DOCTYPE>`
*   ` 标签前的空格
*   格式错误的 HTML 标签，尤其是在`<head>`
*   XHTML 文档中的标签用`>`代替而不是关闭`/>`

**3) 您是否使用 JavaScript 重定向访问者？** Facebook 解析器不执行 JavaScript。如果要将访问者重定向到自定义内容，则需要使用服务器端脚本来执行此操作。

**4）您的服务器是否拒绝与非浏览器的连接？** 这更难诊断，但有些服务器设置为返回一个`500:Server Error`或`403:Forbidden`为任何非浏览器访问者。

**5) Facebook 网站是否告诉您您的链接已被阻止？** 登录 Facebook 并尝试在您的时间线上分享一个链接。如果您的网站出现在 Facebook 内部黑名单中，您将收到一条消息，告诉您该网站已被阻止。在此对话框中，您可以在其中将其标记为误报并请求审核您的网站。

如果您最终出现在此列表中，则 Facebook 用户会阻止您的帖子或将其标记为垃圾邮件。这可能源于您的内容。您认为 SEO 可能是[垃圾索引](http://en.wikipedia.org/wiki/Spamdexing)，或者您共享的内容对某些用户具有攻击性或两极分化，或者您只是一遍又一遍地共享相同的内容。

修复错误后，再次访问[Facebook 调试器](https://developers.facebook.com/tools/debug)。手动访问调试器会清除 Facebook 对该 URL 的缓存。给 Facebook 几分钟时间将更新推送到所有服务器，然后重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-25T17:24:55.783

如果您的网站在黑名单中（您可以在那个地方检查：[https](https://add5000.com/all-tips/entry/facebook-checker-if-link-blocked) ://add5000.com/all-tips/entry/facebook-checker-if-link-blocked ）

[您可以尝试使用带有开放图形和引用支持的 url 重定向器： https](https://add5000.com//all-tips/entry/how-to-post-a-blocked-link-on-facebook) ://add5000.com/all-tips/entry/how-to-post-a-blocked-link-on-facebook

如果您的链接可能未被阻止并且 facebook 不接受您在页面中的链接搜索阻止了指向其他网站的链接，则应检查此类引用

# ruby-on-rails - 安装后在 Rails App 中看不到 Devise 文件夹

> ID：13185411
> 
> 赞同：1
> 
> 时间：2012-11-01T21:02:02.217
> 
> 标签：ruby-on-rails, devise

我运行了以下命令并包含了设计 gem，但我在任何地方都看不到设计文件夹，因此我可以覆盖视图。

*   $rails 生成设计：安装
*   $rails 生成设计用户

我没有看到这个文件夹：app/views/devise/

我正在尝试遵循本教程（http://railsapps.github.com/tutorial-rails-bootstrap-devise-cancan.html），但我正忙于处理设计的步骤。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T21:07:20.887

`rails g devise:views`会帮助你

# java - AlertDialog 中标题和按钮的字体

> ID：13185414
> 
> 赞同：1
> 
> 时间：2012-11-01T21:02:11.683
> 
> 标签：java, android, android-alertdialog, typeface

我想知道是否可以在 AlertDialog 中设置标题和按钮的字体？

# c# - 连续2场比赛

> ID：13185416
> 
> 赞同：-1
> 
> 时间：2012-11-01T21:02:19.113
> 
> 标签：c#, .net, winforms, visual-studio-2010

> **可能重复：**
> [c#使用二维数组作为按钮](https://stackoverflow.com/questions/13181258/c-sharp-using-2d-arrays-for-buttons)

我正在使用将扩展到 7x6 的 2x2 板进行游戏。

我目前正在做获胜检测，但我认为我正在做很长的路要走。必须有一个更短的方法。

胜利

1.  横向
2.  垂直
3.  对角线

这是游戏板的图片：

![在此处输入图像描述](../Images/25dc169866eecde9a18c495f05776391.png)

这就是我目前检测获胜者的方式

```
if (btns[0, col].BackColor.Equals(Color.Red) && btns[1, col].BackColor.Equals(Color.Red))
{
    MessageBox.Show("Red Win");
}

if (btns[0, col].BackColor.Equals(Color.Blue) && btns[1, col].BackColor.Equals(Color.Blue))
{
    MessageBox.Show("Blue Win");
} 
```

这种方式好像我必须列出所有的组合，当我扩展到 7x6 时它不会很理想。

这是程序的全部代码

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {

        private Button[,] btns;

        public Form1()
        {
            InitializeComponent();

            btns = new Button[,] { { button2 , button1 },
                                   { button4 , button3 }};
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            foreach (var btn in btns)
            {
                btn.Enabled = false;
            }
        }
        int cc = 0;

        private void button5_Click(object sender, EventArgs e)
        {
          // Button[] row1 = new Button[] {button2, button1};

            for (int col = 0; col < btns.GetLength(1); ++col)
            {
                var btn = btns[0, col];

                if (!btn.Enabled)
                {
                    btn.Enabled = true;

                    if (cc == 0)
                    {
                        cc = 1;
                        btn.BackColor = Color.Red;
                    }
                    else
                    {
                        cc = 0;
                        btn.BackColor = Color.Blue;
                    }

                    if (btns[0, col].BackColor.Equals(Color.Red) && btns[1, col].BackColor.Equals(Color.Red))
                    {
                        MessageBox.Show("Red Win");
                    }

                    if (btns[0, col].BackColor.Equals(Color.Blue) && btns[1, col].BackColor.Equals(Color.Blue))
                    {
                        MessageBox.Show("Blue Win");
                    }

                    return;
                }
            }
        }

        private void button6_Click(object sender, EventArgs e)
        {
           // Button[] row2 = new Button[] { button4, button3 };
            for (int col = 0; col < btns.GetLength(1); ++col)
            {
                var btn = btns[1, col];

                if (!btn.Enabled)
                {
                    btn.Enabled = true;

                    if (cc == 0)
                    {
                        cc = 1;
                        btn.BackColor = Color.Red;
                    }
                    else
                    {
                        cc = 0;
                        btn.BackColor = Color.Blue;
                    }

                    if (btns[1, col].BackColor.Equals(Color.Red) && btns[0, col].BackColor.Equals(Color.Red))
                    {
                        MessageBox.Show("Red Win");
                    }

                    if (btns[1, col].BackColor.Equals(Color.Blue) && btns[0, col].BackColor.Equals(Color.Blue))
                    {
                        MessageBox.Show("Blue Win");
                    }
                    return;
                }
            }
        }
    }
} 
```

我已经尝试了很多其他方法，但我似乎无法让它发挥作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:49:18.963

也许这个答案很复杂，我会得到很多反对意见，但我无法抗拒尽可能优化地解决这个问题。尝试详细检查此代码：

```
 int n; //dimension of the matrix
        Button [,] btns;
        public Form1()
        {
            InitializeComponent();
            n = 2;/*You should set here the dimension of your matix. I considered it nxn because of diagonals. If you want nxm matrix than the code is a little bit complicated but not too much*/
            btns = new Button[n, n];
            for(int i = 0;i<n;i++)
               for(int j = 0; j<n; j++)
               {
                   Button btn = new Button();
                   btn.Location = new Point(i*20,j*40);
                   btn.Size = new Size(18,38);
                   btns[i,j] = btn;
                   this.Controls.Add(btn);
               }

        }

        private void button1_Click(object sender, EventArgs e)
        {
            int mainDiag = 0;
            int secDiag = 0;
            int i = 0;
            int j = 0;
            int [] cols = new int[n];
            int winner = 0; //no winner
            while(winner == 0 && i<n)
            {
                int row = 0;
                j = 0;
                while(j<n)
                {
                    if (btns[i, j].BackColor == Color.Blue)
                    {

                        if (i == j)
                            mainDiag++;//inrement main diagonal
                        if(i + j == n-1)
                            secDiag++;//increment second diagonal
                        row++; //increment row
                        cols[i]++; //increment column
                    }
                    else if (btns[i, j].BackColor == Color.Red)
                    {
                        if (i == j)
                            mainDiag--;
                        if(i + j == n-1)
                            secDiag--;
                        row--;
                        cols[i]++;
                    }
                    j++;
                }
                if(row == n) //if row value == n whole row is blue and blue player wins
                    winner = 1;
                else if(row == -n)
                    winner = -1; //if row value == -n whole row is red and red player wins
                i++;
            }
            if(winner == 0)
            {
                if(mainDiag == n)
                    winner = 1; //similar for the diagonal
                else if(mainDiag == -n)
                    winner = -1; 
                else if(secDiag == n)
                    winner = 1;//similar for the second diagonal
                else if(secDiag == -n)
                    winner = -1;
                else
                {
                    i = 0;
                    while (winner == 0 && i < n)
                    {
                        if (cols[i] == n)
                            winner = 1; //i-th column is whole blue and blue player wins
                        else if (cols[i] == -n)
                            winner = -1; //i-th column is whole red and red player wins
                    }
                }
            }
            if (winner == 1)
                MessageBox.Show("Blue wins");
            else if(winner == -1)
                MessageBox.Show("Red wins");

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:13:50.343

正如人们在评论中所说，您可能需要使用循环来执行此操作。

我不会在这里详细介绍，但我会描述一些算法来完成你的获胜条件检测。

**算法 1：**
对于每个单元格，检测它是否是水平、垂直或对角行的一部分。时间复杂度为 O(n^(3/2))。如果您愿意，您可以考虑重复检查，但您不必这样做。

**算法 2：**
检查所有垂直行、所有水平行和所有对角行，并查看这些行是否存在获胜条件。这种方法的时间复杂度应该大约为 O(n)。通过不检查不足以保持获胜条件的对角线行，您可能会节省一点时间，但您不必这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T21:40:28.627

如果您想要一个非常基本的答案，我会考虑以下

将每一行添加到数组中

将每一列添加到数组中

对于数组中的每个项目，如果它们都等于一种颜色，那么您就赢了

当您处理较大的数字（即 6x6 网格）时，您可能希望使用多维数组

# javascript - 将输出整数分离为两个值

> ID：13185426
> 
> 赞同：0
> 
> 时间：2012-11-01T21:03:00.407
> 
> 标签：javascript, split, integer, output

```
var currentPageURL = "www.javascript.com/dun/1.70 80";
var url = getMeasurementsFromUrl(currentPageURL)

document.write(url);

function getMeasurementsFromUrl(url)
{

var urlMeasurmentString = url.substring(url.lastIndexOf('/dun/')+5);

urlMeasurmentString =urlMeasurmentString.replace("abcdefghijklmnopqrstuvwxyz",""); 
urlMeasurmentString =urlMeasurmentString.replace(",","."); 
urlMeasurmentString =urlMeasurmentString.replace("/","."); 
urlMeasurmentString =urlMeasurmentString.replace("-",".");
urlMeasurmentString =urlMeasurmentString.replace(",","."); 
urlMeasurmentString =urlMeasurmentString.replace("/","."); 
urlMeasurmentString =urlMeasurmentString.replace("-",".");
return urlMeasurmentString;
} 
```

我需要将输出“1.70 80”拆分为两个单独的整数。 [http://jsfiddle.net/mqWGm/](http://jsfiddle.net/mqWGm/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:06:17.910

如果你想要 1.70 和 80 那么你可以做

```
urlMeasurementString.split(" "); 
```

这将返回一个数组，其中第一个元素是 1.70，第二个元素是 80；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:08:27.470

```
var currentPageURL = "www.javascript.com/dun/1.70 80";
var url = getMeasurementsFromUrl(currentPageURL)
var integers = url.split(' ');
for(var i = 0; i<integers.length; i++)
{
    integers[i] = parseFloat(integers[i],2);
}
console.log(integers);

function getMeasurementsFromUrl(url)
{

var urlMeasurmentString = url.substring(url.lastIndexOf('/dun/')+5);

urlMeasurmentString =urlMeasurmentString.replace("abcdefghijklmnopqrstuvwxyz","");
urlMeasurmentString =urlMeasurmentString.replace(",",".");
urlMeasurmentString =urlMeasurmentString.replace("/",".");
urlMeasurmentString =urlMeasurmentString.replace("-",".");
urlMeasurmentString =urlMeasurmentString.replace(",",".");
urlMeasurmentString =urlMeasurmentString.replace("/",".");
urlMeasurmentString =urlMeasurmentString.replace("-",".");
return urlMeasurmentString;
} 
```

或更好：

```
var currentPageURL = "www.javascript.com/dun/1.70 80";
console.log(getIntegers(currentPageURL));

function getIntegers(url){
    url = url.split('/');
    url = url[url.length-1].split(' ');
    for(var i = 0; i<url.length; i++)
    {
        url[i] = parseFloat(url[i],2);
    }
    return url;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T21:09:17.050

1.70 不是整数，但如果您需要从字符串“1.70 80”中获取数字，您可以执行以下操作：

```
var atoms = url.split(" ");
var num1 = parseFloat(atoms[0]);
var num2 = parseFloat(atoms[1]); 
```

# java - 将对象从 SOAP 处理程序发送到 Web 服务

> ID：13185428
> 
> 赞同：2
> 
> 时间：2012-11-01T21:03:09.143
> 
> 标签：java, xml, web-services, soap

如何将对象从 SOAP 处理程序发送到 Web 服务？我知道我可以修改 SOAP 消息，但我正在尝试将整个 SOAP 消息发回。在 Web 服务中，我无权访问 SOAP 信封。此外，这是实现 wsdl，我无法更改作为特定 XML 类型的参数类型。所以我正在考虑在 SOAP 处理程序和 Web 服务之间使用某种并行消息传递机制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:59:49.307

在 SOAP 处理程序中，

```
public boolean handleMessage(SOAPMessageContext mc) {
...
ByteArrayOutputStream out = new ByteArrayOutputStream();
SOAPMessage soapMsg = mc.getMessage();

mc.put("soapMsg", out); 
mc.setScope("soapMsg", MessageContext.Scope.APPLICATION);  
...
} 
```

在网络服务中：

```
MessageContext messageCtx = context.getMessageContext();
String doc = (messageCtx.get("soapMsg")).toString(); 
```

# ruby-on-rails - 需要帮助来编写茉莉花规格

> ID：13185430
> 
> 赞同：1
> 
> 时间：2012-11-01T21:03:21.217
> 
> 标签：ruby-on-rails, backbone.js, jasmine

您好我正在尝试为骨干视图及其功能之一编写茉莉花测试。我想在用户选中渲染视图中的复选框然后提交的情况下测试函数的正确行为。

这是测试：

```
describe("buildCI()", function() {
    describe("with a category selection allowed's quidget model", function() {
        it("returns a CoacheeIssue model with the selected categories", function() {
            selection_allowed = true;
            lcc_selection_allowed = false;

            var view = new Rails3DeviseRspecCucumber.Views.CategoryPicker({
                collection: categoriesCollection,
                answers: answers,
                category_ids: category_ids,
                credentials: credentialsCollection,
                user_hash: user_hash,
                selection_allowed: selection_allowed,
                lcc_selection_allowed: lcc_selection_allowed  
            });
            // render the view so we can manipulate its DOM elements
            view.render();
            elDebug = $(view.$el);
            // Check programmatically a category checkbox
            $(elDebug.find('input.category-checkbox#5061c6a48624da6f4100000a')[0]).prop('checked', true);
            // call the buildCI() function and check the result
            result = view.buildCI();
            console.log(result);
            expect(result.get('categories')).toContain('category one');
            expect(result.get('categories')).not.toContain('category two');
        })
    }) 
```

不幸的是，测试失败并显示以下消息：预期 [] 包含“类别一”。我知道这不是编码错误，因为它正在现场工作，我只想知道如何测试它。

这是功能：

```
buildCI: () ->
# prepare the category_ids and categories (names) attributes
if @selection_allowed
  selectedCategories = []
  for checkbox in $('input.category-checkbox')
    checkboxEl = $(checkbox)
    if checkbox.checked
      selectedCategories.push(_.find(@collection.models, (model) ->
        model.id == checkboxEl.attr('id')
        ))
  category_names = _.map(selectedCategories, (category) -> category.get('name'))
  category_ids = _.map(selectedCategories, (category) -> category.get('_id'))
else
  category_names = _.map(@collection.models, (category) -> category.get('name'))
  category_ids = _.map(@collection.models, (category) -> category.get('_id'))
return new Rails3DeviseRspecCucumber.Models.CoacheeIssue({ 
      is_solved: false, status: 'active', solution_value_estimate: '',
      answers: @answers, categories: category_names, category_ids: category_ids
    }) 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:37:10.373

您的选择器是否过于严格？我注意到它是：

```
$(elDebug.find('input.category-checkbox#5061c6a48624da6f4100000a')[0]).prop('checked', true); 
```

但也许你只希望它只是：

```
$(elDebug.find('input.category-checkbox')[0]).prop('checked', true); 
```

# mysql - Replace count 0 with 'N/A' in mysql?

> ID：13185433
> 
> 赞同：1
> 
> 时间：2012-11-01T21:03:27.633
> 
> 标签：mysql, sql, mysql-error-1064

I my following query, the last column returns the count of the instances, for this instances with 0 count I would like to replace them with 'N/A'?

This query does not seems to work

```
select m.id, m.desc, count(IF(i.id is NULL,'N/A',i.id)) as quant
from menu m left join items i
on m.id = i.id
group by m.id
order by m.id; 
```

The above query outputs as

```
============================
m.id     |c.desc     | qaunt
============================
1234     | Shoes     | 1
1235     | Socks     | 2
1236     | Clothes   | 0
=========================== 
```

Expected result:

```
============================
m.id     |m.desc     | qaunt
============================
1234     | Shoes     | 1
1235     | Socks     | 2
1236     | Clothes   | N/A
=========================== 
```

Could you please suggest me the changes in the above query

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:13:48.853

(This is tested) Your query is counting the results of the if, and I think you want the inverse. I am using a pairing of IFNULL and NULLIF, which together say "if the count is zero, translate that to NULL. Then if it's NULL, use "N/A" for this column.

```
select m.id, m.desc, 
IFNULL(NULLIF(count(i.id), 0), "N/A") as quant
from menu m left join items i
on m.id = i.id
group by m.id
order by m.id; 
```

To be pedantic for mysql, you can ensure that the column is always a string via cast():

```
IFNULL(NULLIF(CAST(count(i.id) AS char), "0"), "N/A") as quant 
```

This has the benefit of only counting once and no subquery.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T21:11:58.480

can you try

```
select m.id, m.desc, if(count(i.id) = 0,'N/A',count(i.id))) as quant
from menu m left join items i
on m.id = i.id
group by m.id
order by m.id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T21:15:07.927

NULL & 0 are not the same

```
select m.id, m.desc, count(IF(i.id = 0,'N/A',i.id)) as quant
from menu m left join items i
on m.id = i.id
group by m.id
order by m.id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-09T11:52:03.143

FOR MSSQL or TSQL change **IFNULL** with **ISNULL** and double quotes **`"`** with single quote **`'`**.

```
select m.id, m.desc, 
ISNULL(NULLIF(count(i.id), 0),'N/A') as quant
from menu m left join items i
on m.id = i.id
group by m.id
order by m.id; 
```

# javascript - 空后如何将可拖动元素重新附加到可放置元素

> ID：13185434
> 
> 赞同：0
> 
> 时间：2012-11-01T21:03:28.813
> 
> 标签：javascript, jquery, css

我有一个可拖放/可拖放脚本，如果拖放可拖放，则该 div 中的元素将附加到可拖放 div。删除后，将显示一个清除按钮以删除 div 中的内容，如下所示

```
$(e.target).append(ui.draggable.html() + '<br/>');
//can use $(this) or (e.target)
$("#add_friend").show().fadeOut(12000);
$(e.target).droppable("destroy");
$(e.target).append("<input type='button' name='Sub' value='clear'/>").click(function() {
    $(this).empty();
}); 
```

我遇到的问题是，从可放置 div 中删除 html 后，我无法重新拖动并再次附加。[此处显示的示例](http://jsfiddle.net/Kxtvg/171/)。我希望能够在删除内容后重新拖放元素。我将不胜感激知道如何解决这个问题并理解为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:08:21.510

此行正在删除使其成为放置区的类。

```
$(e.target).droppable("destroy"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:11:10.223

您不想破坏 droppable 但要禁用它，您应该执行以下操作：

```
$(e.target).append(ui.draggable.html() + '<br/>');
            //can use $(this) or (e.target)
            $("#add_friend").show().fadeOut(12000);
            $(e.target).droppable("disable");
            $(e.target).append("<input type='button' name='Sub' value='clear'/>").click(function() {
                $(this).empty()
                       .droppable("enable");
            }); 
```

# visual-studio-2010 - 在共享点编程中使用 CAML 或代码更好

> ID：13185435
> 
> 赞同：0
> 
> 时间：2012-11-01T21:03:33.027
> 
> 标签：visual-studio-2010, sharepoint-2010, caml

我即将开始创建共享点功能。我想知道创建列表、列、内容类型等的推荐方法是什么？

CAML（xml 等）或代码对象模型？

两种方法我都没有问题。这些方法有什么主要缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:07:39.130

两者都是稳健解决方案所*必需的。*两者都很有用。两者都没有[完全]取代另一个。

[CAML 查询](http://msdn.microsoft.com/en-us/library/ms467521.aspx)是高效查询大多数 SP 数据源所*必需的，例如 Lists。*另一方面，非查询 CAML 可用于[声明性配置*许多*SharePoint 工件](http://msdn.microsoft.com/en-us/library/ms426449.aspx)。

直接 OM（[SharePoint 对象模型](http://msdn.microsoft.com/en-us/library/ee857094.aspx)）对于以编程方式迭代/更新许多事物非常有用；包括各种 CAML 查询的结果！PowerShell cmd-let 还公开了 OM，以便轻松“检查”农场的当前状态等。当需要从一个普通的“模板”创建许多东西（例如网站）时，脚本也可以利用这一点，但有细微的变化.

此外，通过 OM 进行的许多操作是CAML*无法实现的。*例如，定时器作业定义不能仅使用 CAML 进行配置。

但是，编写一个功能接收器来修改 SP 工件可能会出现问题，特别是如果必须在以后进行更改：然后还必须从接收器管理修订 - 糟糕！对于受支持的 SP 工件，**除非有理由不使用 CAML，否则请始终使用 CAML**。不要在没有充分理由的情况下使事情复杂化。

不要与 SharePoint 对抗。每个任务都是不同的。使用正确的（并希望“批准”）方法让生活更轻松。

# nlp - 停止 CRF++ 运行并恢复其运行

> ID：13185438
> 
> 赞同：0
> 
> 时间：2012-11-01T21:03:47.407
> 
> 标签：nlp

我在我的项目中使用 CRF++ 作为操作系统在 Ubuntu 12.04 中运行。我有很多功能，因此训练步骤需要几天时间。

我想知道是否可以停止 CRF++ 的运行几个小时并从最后一次迭代（而不是从头开始）恢复运行。

有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T18:04:22.630

尝试使用多线程运行 Crf++。选项 -p 。如果您有多处理器系统，它将加快您的工作速度。

# ios - 使用 AVPlayer 的全功能音乐播放器

> ID：13185442
> 
> 赞同：2
> 
> 时间：2012-11-01T21:04:04.287
> 
> 标签：ios, avplayer, audio-player

我正在为 iOS 编写一个音乐播放器，它需要具有内置音乐应用程序的所有功能。我的应用程序需要继续在后台运行，所以我必须使用 AVPlayer 类。

有没有我可以使用的开源实现来代替自己编写整个东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-19T08:40:47.390

刚发现这个。它工作得很好：

[https://github.com/gangverk/GVMusicPlayerController](https://github.com/gangverk/GVMusicPlayerController)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:43:37.023

如果您想播放 iTunes 音乐库中的曲目，并且不想使用`MPMusicPlayerController`该类，那么最好的选择是使用`AVPlayer`或`AVQueuePlayer`（的子类`AVPlayer`）。您必须建立适当的音频会话并注册以接收远程控制事件，以便应用程序继续在后台播放音乐。

这种方法有缺点；您将无法播放从 iTunes 商店购买的受 DRM 保护的曲目和有声读物。无法使用该类实例化 iTunes Match 下载`AVPlayer`。此外，如果您想添加无间隙播放和均衡器设置，您将需要做一些工作（最接近无间隙播放的是`AVQueuePlayer`子类，尽管理论上，您可以将`AVPlayer`s 与 an重叠`NSTimer`）。

您还需要将 Info.plist 中的“所需背景模式”更改为“应用播放音频”

至于您的应用程序的其余部分，我建议您阅读`UITabBarController`s 和`UITableViewController`s 以及`MPMediaQuery`s。

有关音频部分，请参阅[此解决方案。](https://stackoverflow.com/a/11515950/1064869)

# ios - 按钮顶部的文本字段 - iPhone

> ID：13185445
> 
> 赞同：1
> 
> 时间：2012-11-01T21:04:09.903
> 
> 标签：ios, iphone, xcode

所以我试图在 xCode 中为我的注册页面找出想法——如下所示：[http ://weswilliams.me/wp-content/uploads/2011/06/IMG_2525-e1307910945329.png](http://weswilliams.me/wp-content/uploads/2011/06/IMG_2525-e1307910945329.png)

无论如何，我无法弄清楚他们使用什么对象来实现这种显示。它看起来像按钮顶部的 TextField？如果是这样，我永远无法让文本字段位于顶部，它总是落在按钮后面，从而使其不可见。

有什么提示或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:07:34.337

这是一个基本的分组 UITableView。阅读 Apple 文档。也有大量的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:09:48.873

这不是按钮上的文本字段。实际上它是表格视图中的文本框。您必须执行以下操作：

1.  在笔尖上进行表格视图。
2.  创建插座并设置委托和数据源。
3.  然后将以下代码添加到您的 .m 文件中。

试试这个

在此之前设置表格视图的行数。

```
- (UITableViewCell *)tableView:(UITableView *)table cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [table dequeueReusableCellWithIdentifier:@"Cell"];
    if( cell == nil)
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"] autorelease];   

    cell.textLabel.text = [[NSArray arrayWithObjects:@"First",@"Second",@"Third",@"Forth",@"Fifth",@"Sixth",@"Seventh",@"Eighth",@"Nineth",@"Tenth",nil] 
                           objectAtIndex:indexPath.row];

    if (indexPath.row % 2) {
        UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(0, 0, 200, 21)];
        textField.placeholder = @"Enter Text";
        textField.text = [inputTexts objectAtIndex:indexPath.row/2];
        textField.tag = indexPath.row/2;
        textField.delegate = self;
        cell.accessoryView = textField;
        [textField release];
    } else
        cell.accessoryView = nil;

    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    return cell;        
} 
```

或者你可以看到这个链接[在 SO 上看到这个答案](https://stackoverflow.com/questions/409259/having-a-uitextfield-in-a-uitableviewcell)

# android - 处理 - 错误

> ID：13185446
> 
> 赞同：2
> 
> 时间：2012-11-01T21:04:11.107
> 
> 标签：android, processing

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:11:14.467

仔细检查您是否通过 Android SDK 管理器安装了 API 10。

# linux - ldd 括号内的十六进制数

> ID：13185448
> 
> 赞同：11
> 
> 时间：2012-11-01T21:04:21.847
> 
> 标签：linux, ldd

在文件上执行`ldd`时，它会在找到的每个库的括号中返回一个十六进制数字。

例如：

```
root@server> ldd wpa_supplicant
        linux-gate.so.1 =>  (0xb779b000)
        libnl.so.1 => /usr/lib/libnl.so.1 (0xb774d000)
        libssl.so.1.0.0 => not found
        libcrypto.so.1.0.0 => not found
        libdl.so.2 => /lib/i686/cmov/libdl.so.2 (0xb7748000)
        libc.so.6 => /lib/i686/cmov/libc.so.6 (0xb75ed000)
        libm.so.6 => /lib/i686/cmov/libm.so.6 (0xb75c7000)
        /lib/ld-linux.so.2 (0xb779c000) 
```

如果十六进制数不是可执行文件曾经链接的库之一，则可能会出现版本信息错误。

我有两个问题：

1.  这个价值从何而来？
2.  如何找出可执行文件正在寻找的十六进制值？（即它最初链接的那个）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T21:16:36.903

十六进制数字是各个库加载到的内存地址。有关进一步说明，请参阅[https://stackoverflow.com/a/5130690/637284](https://stackoverflow.com/a/5130690/637284)。

# ruby - MongoDB 返回空数组

> ID：13185451
> 
> 赞同：1
> 
> 时间：2012-11-01T21:04:37.957
> 
> 标签：ruby, mongodb, sinatra

我有一个将记录吐到网页上的 MongoDB

```
require 'mongo'
require 'json'

connection = Mongo::Connection.new
db = connection.db("salemDB")
db = Mongo::Connection.new.db("salemDB")
newsCollection = db["news"]

require 'sinatra'
set:port, 2222
get '/' do
    redirect 'index.html'
end

get "/checkMail" do
  newsCollection.find_one({}, {}).to_a.to_json
end

get "/:id" do
 newsCollection.find("_id" => params[:id]).to_a.to_json
end 
```

**/checkmail 输出这个**

（为阅读乐趣而格式化）

```
[
   [
      "_id",
      {
         "$oid":"50880c8564a15e2631000001"
      }
   ],
   [
      "date",
      "2012-10-24T17:42:54+02:00"
   ],
   [
      "subject",
      "This is a piece of news"
   ]
] 
```

**/50880c8564a15e2631000001 输出这个**

```
[] 
```

为什么它不把我的对象还给我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:14:40.337

那是因为 id 实际上不是 string 或 Integer 它是 an `BSON::ObjectId`，所以您必须使用其中一个进行查询。

这应该工作

```
newsCollection.find("_id" => BSON::ObjectId(params[:id])).to_a.to_json 
```

# python - 使用 resample 对齐 pandas 中的多个时间序列

> ID：13185454
> 
> 赞同：4
> 
> 时间：2012-11-01T21:04:54.227
> 
> 标签：python, time-series, pandas, resampling

这是设置代码：

```
import pandas
from datetime import datetime

a_values = [1728, 1635, 1733]
a_index = [datetime(2011, 10, 31), datetime(2012, 1, 31), datetime(2012, 4, 30)]
a = pandas.Series(data=a_values, index=a_index)

aa_values = [6419, 5989, 6006]
aa_index = [datetime(2011, 9, 30), datetime(2011, 12, 31), datetime(2012, 3, 31)]
aa = pandas.Series(data=aa_values, index=aa_index)

apol_values = [1100, 1179, 969]
apol_index = [datetime(2011, 8, 31), datetime(2011, 11, 30), datetime(2012, 2, 29)]
apol = pandas.Series(data=apol_values, index=apol_index) 
```

以下是表格中的数据（未显示 APOL 的第三个值）：

![在此处输入图像描述](../Images/7e8cdb90362f53cae2ae0b8db35f3b02.png)

目标是将数据与日历季度标记对齐，以便可以比较 3 个数据集。看看下面的日期，2012 年 3 月、2011 年 12 月和 2011 年 9 月似乎是对齐的合理标记。

这是 fill_method='ffill' 的输出：

```
In [6]: a.resample('Q', fill_method='ffill')
Out[6]: 
2011-12-31    1728
2012-03-31    1635
2012-06-30    1733
Freq: Q-DEC

In [7]: aa.resample('Q', fill_method='ffill')
Out[7]: 
2011-09-30    6419
2011-12-31    5989
2012-03-31    6006
Freq: Q-DEC

In [8]: apol.resample('Q', fill_method='ffill')
Out[8]: 
2011-09-30    1100
2011-12-31    1179
2012-03-31     969
Freq: Q-DEC 
```

看起来像这样：

![在此处输入图像描述](../Images/93bd387ba9cfd0792b1b33a21a414c65.png)

请注意每个系列中的最新数字如何不对齐。

这是 fill_method='bfill' 的输出：

```
In [9]: a.resample('Q', fill_method='bfill')
Out[9]: 
2011-12-31    1635
2012-03-31    1733
2012-06-30     NaN
Freq: Q-DEC

In [10]: aa.resample('Q', fill_method='bfill')
Out[10]: 
2011-09-30    6419
2011-12-31    5989
2012-03-31    6006
Freq: Q-DEC

In [11]: apol.resample('Q', fill_method='bfill')
Out[11]: 
2011-09-30    1179
2011-12-31     969
2012-03-31     NaN
Freq: Q-DEC 
```

看起来像这样：

![在此处输入图像描述](../Images/b698f3e19595e3a10b4e38da9409e905.png)

同样，该系列中的最新数字没有排列。

这是这种情况下的预期输出`resample()`吗？

我该怎么做才能获得上面最近 3 个数字对齐并且其他所有内容都遵循的结果？

**编辑**：这是所需的输出：

![在此处输入图像描述](../Images/33df00134f435e538d8116cdaf48e90d.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T23:21:40.113

```
df1 = DataFrame({'a':a})
df2 = DataFrame({'aa':aa})
df3 = DataFrame({'apol':apol})
df=df1.append([df2,df3]).sort_index()
print df.resample('Q-APR',loffset='-1m').T 
```

输出：

```
 2011-09-30  2011-12-31  2012-03-31
a           1728        1635        1733
aa          6419        5989        6006
apol        1100        1179         969 
```

# javascript - 在动态加载的元素上使用 jQuery

> ID：13185455
> 
> 赞同：1
> 
> 时间：2012-11-01T21:05:03.387
> 
> 标签：javascript, jquery, facebook, dynamic

我正在使用以下代码从 Facebook Graph API 检索喜欢的数量，这非常有效。我遇到的麻烦是使用 jQuery .css 来更改返回值中最后一个字符的颜色。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript">
      $(function() {
        //Set Url of JSON data from the facebook graph api. make sure callback is set   with a '?' to overcome the cross domain problems with JSON
        var url = "https://graph.facebook.com/krewella?callback=?";

        //Use jQuery getJSON method to fetch the data from the url and then create our unordered list with the relevant data.
        $.getJSON(url,function(json){
            var html = "<ul><li>" + json.likes + "</li><li>" + json.about + "</li></ul>";
            //A little animation once fetched
            $('.facebookfeed').animate({opacity:0}, 500, function(){
                $('.facebookfeed').html(html);
            });
            $('.facebookfeed').animate({opacity:1}, 500);
        });
      });
    </script>

</head>

<body>
    <div id="wrapper"><!--wrapper open-->
        <div class="facebookfeed">
        <h2>Loading...</h2>
    </div>
    </div><!--wrapper closed-->
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:15:31.193

怎么样：

```
json.likes = json.likes.toString().slice(0,-2) + "<span class='red'>" + json.likes.toString().substr(-1) + "</span>"
var html = "<ul><li>" + json.likes + "</li><li>" + json.about + "</li></ul>"; 
```

使用微不足道的 css：

```
.red{
    color:#ff0000;
} 
```

# c++ - c++ while循环不会在错误条件下退出

> ID：13185457
> 
> 赞同：1
> 
> 时间：2012-11-01T21:05:06.207
> 
> 标签：c++, while-loop, conditional-statements, stack

我的代码有问题，导致运行时错误。为了调试我在一些 cout 语句中抛出的代码，以找到代码正确执行的最后一个位置。根据输出，当 while 条件评估为 false 时，while 语句似乎中断，但我看不出这是怎么可能的。这是代码：

变量声明：

```
queue<string> newOrder;
stack< vector<char> > opStack;
char symbol; 
```

发生填充堆栈和队列的事情，然后到达此代码：

```
while(opStack.empty()==false){
    if(opStack.top()[1] != 'L'){
        cout<<"is stack empty?:"<<opStack.empty()<<endl;
        symbol = opStack.top()[0];
        newOrder.push(symbol);
        opStack.pop();
        cout<<"popped stack;"<<endl;
        cout<<"is stack empty?:"<<opStack.empty()<<endl;
    }
    else{
        break;
    }
}
cout<<"made it out of while loop";

if(opStack.top()[1] == 'L'){    
   opStack.pop();
}
else{
   errorEncountered = true;
} 
```

这是输出：

```
is stack empty?:0
popped stack;
is stack empty?:1
RUN FAILED (exit value 1, total time: 1s) 
```

因此，根据输出，堆栈在循环结束时为空。这应该使 while 循环条件为假，但程序在 while 循环退出之前失败。这怎么可能？它与堆栈的工作方式有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:05:06.207

while 循环在错误条件下退出。我没有正确调试，这使我专注于代码的错误部分。

问题实际上是在最后一次 cout 之后发生的事情。之后的语句`if(opStack.top()[1] == 'L'){`, 尝试从空堆栈中获取顶部项目并导致运行失败。

但这怎么可能，因为我们从来没有在输出中看到“使其脱离 while 循环”？这是因为在程序崩溃之前最后一个 cout 从未刷新到输出。我添加`<<endl`到最后一个 cout，就成功了。显示“使其脱离 while 循环”，我能够查明程序中的真正问题。（通过将最后一个 if-else 语句放入其中来解决`if(opStack.empty()==false){//second if-else set}`）

感谢@interjay 指出 cout 在我原来的但格式不正确的问题中没有被刷新：[c++ while loop condition is not play nice with stack.empty(](https://stackoverflow.com/questions/13131803/c-while-loop-condition-isnt-playing-nice-with-stack-empty#comment17894957_13131803) )

# jquery - 有没有办法只在 jquery 中获取部分字符串？

> ID：13185459
> 
> 赞同：0
> 
> 时间：2012-11-01T21:05:13.130
> 
> 标签：jquery

我有一些 id 以 . 开头的锚链接`"menu-"`。

```
<a href="" id="menu-alphabetic">
<a href="" id="menu-city">
<a href="" id="menu-country"> 
```

在我的 jquery 代码中，我只想在之后使用锚链接的 id`menu-`

```
For example:
$("a[id^=menu-]").click(function(){
   e.preventDefault();
   $(this).tab('show');
}); 
```

但`$(this)`需要所有的身份证。我只想要后面的单词`menu-`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:07:07.413

利用`.split()`

```
$("a[id^=menu-]").click(function(){
   e.preventDefault();

   $('#' + this.id.split('-')[1]).tab('show');
}); 
```

此外，您的 HTML 格式不正确..

```
<a href="" id="menu-alphabetic">menu-alphabetic</a>
<a href="" id="menu-city">menu-city</a>
<a href="" id="menu-country">menu-country</a> 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/mGJdw/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:07:30.940

我想你想要类似的东西

```
$("#" + this.id.replace('menu-', '')).tab('show'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T21:21:25.223

您需要获取`id`属性的值，然后解析结果字符串以获得所需的结果。根据您的特定问题，这将通过以下方式完成：

```
$("a[id^=menu-]").click(function(e){
    e.preventDefault();

    var raw_title = $(this).attr('id');
    raw_title = raw_title.replace('menu-','');

    // outputs whatever is after 'menu-' in the id attribute
    console.log(raw_title);       

    //$(this).tab('show');
});  ​ 
```

[您可以在我为它制作的这个jsFiddle](http://jsfiddle.net/jxbzJ/1/)中看到它的实际效果。

# java - 在 thread.sleep() 之前没有更新边框格式

> ID：13185462
> 
> 赞同：1
> 
> 时间：2012-11-01T21:05:30.520
> 
> 标签：java, multithreading, awt, sleep, event-dispatch-thread

希望我的第一个问题不是太明显或研究得不好。下面的代码来自 MouseListener 的 mouseClicked 事件。我希望将边框颜色更改为绿色，以向用户显示他/她单击了什么，启动睡眠计时器，然后将其改回黑色。不幸的是，更改只发生在 Thread.sleep 之后（可能还有一大堆方法）。目前，更改回黑色已被评论，颜色更改确实更改为绿色（永久）。如果没有注释，则没有可见的颜色变化。这里发生了什么？

谢谢

```
 JLabel myLabel = (JLabel) e.getSource();
    myLabel.setBorder(BorderFactory.createLineBorder(Color.green));

    try {
        Thread.sleep(2000);
    } catch (InterruptedException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    //myLabel.setBorder(BorderFactory.createLineBorder(Color.black)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:23:51.040

如果你在事件调度线程中休眠，你会阻止它完成它的工作，即重新绘制 GUI 并显示你刚刚设置的边框。您只是将整个 GUI 冻结 2 秒钟。

您需要使用摇摆计时器，并让此计时器在 2 秒后将边框重置为其原始颜色。睡眠必须在另一个线程中完成，然后必须在 EDT 中更改边框。这就是 Swing Timer 为您做的事情。

# objective-c - 使用 [x][y] 访问我的 malloc 二维数组

> ID：13185465
> 
> 赞同：2
> 
> 时间：2012-11-01T21:05:39.707
> 
> 标签：objective-c, ios

我正在更新一个类以使用成员变量而不是#defines 来定义二维数组的边界。它曾经看起来像：

```
#define kWidth 3
#define kHeight 100
NSUInteger fields[kWidth][kHeight]; 
```

现在 kWidth 和 kHeight 是 iVar。我切换到 malloc 约定，因为我看不到其他选择，因为边界现在可以改变。问题是我无法使用两个 [] ([][]) 访问数组。请参阅我的内联评论。我确信我已经正确地 malloc 了。我以前做过很多次，在 iOS 下。为什么我不能通过这种方式访问​​？

> ```
> self.kFieldsHeight = 100;
> self.kFieldsWidth = 3;
> NSUInteger** fields = (NSUInteger**)malloc(sizeof(NSUInteger) * self.kFieldsHeight * self.kFieldsWidth);
> memset(fields, 0xFF,  self.kFieldsWidth * self.kFieldsHeight * sizeof(NSUInteger));
> 
> //// Now with LLDB I can examine the array in one dimension
> // p fields[0]      // 0xFFFFFFFF
> // p fields[299]    // 0xFFFFFFFF
> // p fields[300]    // 0xGARBAGE
> 
> //// THIS fails with "error: Couldn't dematerialize struct : Couldn't read a composite type from the target: gdb remote returned an 
> ```
> 
> 错误：E08" // p 字段[0][0]
> 
> ```
> // Thus this fails in my code
> NSUInteger i = fields[0][0]; 
> ```

这是怎么回事？

编辑：（更详细）我也尝试过这样的 mallocing：

```
fields = (NSUInteger**)malloc(sizeof(NSUInteger*) * self.kFieldsHeight);
if(fields){
    for(int i = 0; i < self.kFieldsHeight; i++){
        fields[i] = (NSUInteger*)malloc(sizeof(NSUInteger) * self.kFieldsWidth);
    }
} 
```

编辑：（更详细）。我用相同的结果交换了宽度和高度：

```
fields = (NSUInteger**)malloc(sizeof(NSUInteger*) * self.kFieldsWidth);
if(fields){
    for(int i = 0; i < self.kFieldsWidth; i++){
        fields[i] = (NSUInteger*)malloc(sizeof(NSUInteger) * self.kFieldsHeight);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:08:41.557

尝试这个

```
fields = (NSUInteger**)malloc(sizeof(NSUInteger*) * self.kFieldsWidth);
if(fields){
    for(int i = 0; i < self.kFieldsWidth; i++){
        fields+i = (NSUInteger*)malloc(sizeof(NSUInteger) * self.kFieldsHeight);
    }
} 
```

没有真正的理由这样做，只是另一种说法 a[i] 是 a+i 我在这里使用我的 C 知识而不是客观的 C 希望我能提供帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:22:06.893

你需要这样做：

```
NSUInteger **fields = malloc(self.kFieldsHeight * sizeof(NSUInteger*));
for (int i = 0; i < self.kFieldsHeight; i++) {
     fields[i] = malloc(sizeof(NSUInteger) * self.kFieldsWidth);
     memset(fields, 0xFF,  self.kFieldsWidth * sizeof(NSUInteger));
} 
```

但这不是大多数人做这项工作的方式。大多数开发人员使用大数组而不是二维数组并尝试自己对其进行索引。像这样：

```
NSUInteger *fields = malloc(self.kFieldsHeight * self.kFieldsHeight *  sizeof(NSUInteger));
fields[h * width + w] = pixel_value; 
```

# mysql - 在 dbschema 中从 sql 创建 erd

> ID：13185468
> 
> 赞同：1
> 
> 时间：2012-11-01T21:06:00.510
> 
> 标签：mysql, db-schema

谁能描述如何使用 DbSchema 从 sql 文件创建 erd？我还没有找到开始这个过程的原因。

我也尝试过使用 MySQL 工作台。选择文件后，会打开一个窗口，指示“逆向工程和从脚本导入对象...”，但什么也没有发生；窗口底部的消息日志中从未显示任何进展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:14:41.030

我也用过`MySQL WorkBench`而且很喜欢。您可能在逆向工程过程中提供了一些错误。[SchemaSPY](http://schemaspy.sourceforge.net/)也是一个很好的工具。也检查[这个线程](https://stackoverflow.com/questions/2488/auto-generate-database-diagram-mysql)。

# java - JSON解析性能慢

> ID：13185469
> 
> 赞同：3
> 
> 时间：2012-11-01T21:06:02.240
> 
> 标签：java, android

我的 JSON 解析器非常慢。我想问，如果我错过了什么，或者做错了什么。我在我的 AsyncTask 中调用我的 doInBackground 中的方法是错误的，我应该把所有东西都放在我的 Asynctask 中吗？感谢您的每一次帮助。这是我的相关代码：

```
private class DownloadFilesTask extends AsyncTask<String, Integer, Long> {
        private ProgressDialog progress = null;

        @Override
        protected void onPreExecute() {
            progress = ProgressDialog.show(ArticleActivity.this, null,
                    "Artikel wird geladen...");

            super.onPreExecute();
        }

        @Override
        protected Long doInBackground(String... params) {
            // TODO Auto-generated method stub
            String link = getIntent().getStringExtra("articleLink");
            getJSONfromURL("my JSON Url");
            return null;
        }

        protected void onPostExecute(Long result) {
            TextView txtArticle = (TextView) findViewById(R.id.txtViewArticle);
            txtArticle.setText(Html.fromHtml(item.getArticle()));
            progress.dismiss();
        }
    } 
```

getJSONfromURL():

```
 public static void getJSONfromURL(String url) {

        // initialize
        InputStream is = null;
        String result = "";

        // http post
        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url);
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

        } catch (Exception e) {
            Log.e("log_tag", "Error in http connection " + e.toString());
        }

        // convert response to string
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "UTF-8"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();
        } catch (Exception e) {
            Log.e("log_tag", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            JSONObject jObject = new JSONObject(result);
            String myJSON = jObject.getString("content");
            item = new Items();
            item.setArticle(myJSON);
            Log.i("json", myJSON);
        } catch (JSONException e) {
            Log.e("log_tag", "Error parsing data " + e.toString());
        }

    } 
```

谢谢-

编辑：

这是 JSON 响应。它不是那么大。我总是看到这些应用程序，比如谷歌潮流，甚至不需要一秒钟来加载一篇文章。他们是如何做到的呢？

```
{
    "domain": "www.spiegel.de",
    "next_page_id": null,
    "url": "http://www.spiegel.de/politik/ausland/bloomberg-empfiehlt-obama-als-us-praesident-a-864853.html",
    "short_url": "http://rdd.me/gfvpdlzr",
    "author": null,
    "excerpt": "Washington - Wenige Tage nach dem verheerenden Sturm \"Sandy\" hat der New Yorker Bürgermeister Michael Bloomberg die Wiederwahl von Präsident",
    "direction": "ltr",
    "word_count": 772,
    "total_pages": 0,
    "content": "<div id=\"spArticleColumn\" score=\"62.5\">\n\n\t\t\t\t\t\n\n\t\t\t<div id=\"spArticleTopAsset\" score=\"40.0\">\n\t\t\t\t\t\n<div class=\"spArticleImageBox spAssetAligncenter\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t<span href=\"http://www.spiegel.de/politik/ausland/bild-864853-420390.html\">\n\t\t\t\t\t\t\t\t\t\t\t<img src=\"http://cdn1.spiegel.de/images/image-420390-panoV9free-jmiw.jpg\" width=\"520\" border=\"0\" class=\"spPanoImageTeaserPic\" title='New Yorks Bürgermeister Bloomberg: \"Unser Klima ändert sich\"' alt='New Yorks Bürgermeister Bloomberg: \"Unser Klima ändert sich\"'></span>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\n</div>\n\t\t\t\n\t\t\t\t\n\t\t\t\t\n<div id=\"spFbTwitterBarStd\" score=\"1.25\">\n\n\t\n\t\t\n\t\n\t\n\n\t\t\t\n\t</div>\n<div id=\"spArticleSection\" score=\"37.5\">\n\t\n<p>Washington - Wenige Tage nach dem verheerenden Sturm \"Sandy\" hat der New Yorker Bürgermeister <a href=\"http://www.spiegel.de/thema/michael_bloomberg/\" title=\"Michael Bloomberg\" class=\"spTextlinkInt\">Michael Bloomberg</a> die Wiederwahl von Präsident <a href=\"http://www.spiegel.de/thema/barack_obama/\" title=\"Barack Obama\" class=\"spTextlinkInt\">Barack Obama</a> empfohlen. Obama habe die Führerschaft beim Thema Klimawandel inne, schrieb das Stadtoberhaupt auf Bloomberg.com.</p>\n\n<p>\n\n\t\"Unser Klima ändert sich. Und während die Zunahme extremer Wetterlagen, die wir in New York und in der Welt erlebt haben, eine Folge davon sind oder nicht sein mögen, das Risiko, das es so sein könnte - angesichts der Zerstörung in dieser Woche - sollte alle gewählten Führer dazu zwingen, sofort zu Handeln\", so der frühere Republikaner Bloomberg. </p>\n\n<p>Die Metropole und die einzelnen US-Staaten könnten solche Katastrophen nicht alleine stemmen: \"Wir brauchen Führung vom Weißen Haus\", schrieb der Bürgermeister. Obama habe in den vergangenen Jahren wichtige Schritte für den Umweltschutz eingeleitet. Romney habe dagegen in allen wichtigen Bereichen einschließlich dem Umweltschutz den Kurs gewechselt.</p>\n\n<p>New York und die gesamte US-Ostküste sind von der Sturmkatastrophe schwer getroffen worden. Bis Donnerstag zählten die Behörden 56 Tote. In Medien ist von über 80 Opfern die Rede. Experten befürchten, dass sich der Schaden, den \"Sandy\" an der US-Ostküste angerichtet hat, auf bis zu 50 Milliarden Dollar summieren könnte. Die Empfehlung für Obama und der Verweis auf extreme Wetterlagen kommen unmittelbar vor dem Urnengang. Am kommenden Dienstag entscheiden die US-Wähler, ob erneut Obama oder sein republikanischer Herausforderer Mitt Romney ins Weiße Haus einzieht.</p>\n\n<div class=\"spPhotoGallery\" score=\"18.25\">\n\t\n\t\t<ul><li class=\"spFirst\">\n\t\t\t\t\t\t\t\t\t<a href=\"http://www.spiegel.de/fotostrecke/us-praesident-obama-besucht-sandy-sturm-opfer-in-new-jersey-fotostrecke-89203.html\" title=\"Fotostrecke zeigen...\"><img src=\"http://cdn2.spiegel.de/images/image-419915-thumbbiga-sumg.jpg\" width=\"160\" border=\"0\"></a></li> \n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href=\"http://www.spiegel.de/fotostrecke/us-praesident-obama-besucht-sandy-sturm-opfer-in-new-jersey-fotostrecke-89203.html\" title=\"Fotostrecke zeigen...\"><img src=\"http://cdn2.spiegel.de/images/image-419909-thumbbiga-svrk.jpg\" width=\"160\" border=\"0\"></a></li> \n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href=\"http://www.spiegel.de/fotostrecke/us-praesident-obama-besucht-sandy-sturm-opfer-in-new-jersey-fotostrecke-89203.html\" title=\"Fotostrecke zeigen...\"><img src=\"http://cdn4.spiegel.de/images/image-419877-thumbbiga-dvih.jpg\" width=\"160\" border=\"0\"></a></li> \n\t\t\t\t\t\t\t</ul><br clear=\"all\">\n\t\t\t<a href=\"http://www.spiegel.de/fotostrecke/us-praesident-obama-besucht-sandy-sturm-opfer-in-new-jersey-fotostrecke-89203.html\" title=\"Fotostrecke zeigen...\"><strong>Obama im Katastrophengebiet:</strong>\n\t\t\t<span>Kümmerer-in-Chief</span></a></div>\n\t<br clear=\"all\">\nDas Krisenmanagement im Nachgang von \"Sandy\" könnte Obama nun vielleicht genau jenen Vorsprung im Präsidentschaftsrennen bringen, den er braucht, um am 6\. November zu siegen. Die Wahlempfehlung des beliebten Bloomberg folgt just einen Tag, nachdem der seinerseits beliebte Republikaner und Gouverneur Chris Christie den Präsidenten in seinem Staat New Jersey empfangen, ihn wieder und wieder für seinen Umgang mit der Katastrophe <a href=\"http://www.spiegel.de/politik/ausland/us-praesident-obama-besucht-sandy-sturm-opfer-in-new-jersey-a-864602.html\" title=\"gelobt\" class=\"spTextlinkInt\">gelobt</a> hat: Außerordentlich, exzellent, wunderbar - das waren die Worte Christies, der eigentlich als einer der entschiedensten Unterstützer von Mitt Romney galt. \n\n<p>Dass nun ausgerechnet Regierungschef und Bürgermeister der vom Sturm am schwersten getroffenen Gebiete - New Jersey und New York City - so einhellig die Führungsqualitäten Obamas in der Krise loben, wird Eindruck machen auf viele unabhängige, unentschiedene Wähler. Die zeigten sich in ihrer Mehrheit zunehmend genervt von der polarisierten Auseinandersetzung zwischen Demokraten und Republikanern. Bloomberg selbst wurde zwischenzeitlich gehandelt als aussichtsreicher Dritte-Partei-Kandidat, der sowohl Romney als auch Obama Stimmen hätte nehmen können. Doch er verzichtete. Fortan bemühten sich beide Lager um seine Wahlempfehlung. Obama hat gewonnen.</p>\n\n<p>Obama selbst hat die Hilfsbereitschaft für die Opfer des Hurrikans \"Sandy\" gelobt. Die Nachbarschaftshilfe sei ebenso überragend gewesen wie die Hilfe über die Parteigrenzen hinweg, sagte Obama am Donnerstag bei einem Wahlkampfauftritt in Green Bay im Bundesstaat Wisconsin. \"Während eines Sturms gibt es keine Demokraten und keine Republikaner\", erklärte der Präsident. Er appellierte an die US-Bürger, die Sturmopfer weiter zu unterstützen. \"Wir sind sprachlos und demütigt angesichts der zerstörerischen Kraft der Natur\", sagte Obama bei seinem ersten Wahlkampfauftritt nach einer Hurrikan-bedingten Zwangspause. </p>\n\n<p>\n<b>Obama setzt erneut auf \"Change\"-Slogan</b>\n</p>\n\n<p>Unterdessen belebt Obama im Wahlkampf-Endspurt einen seiner erfolgreichen Slogans von 2008 wieder: \"Change\". \"Ich weiß wie Wandel aussieht, denn ich habe dafür gekämpft\", sagte er vor etwa 2600 Zuhörern im Bundesstaat Wisconsin. Sein Herausforderer Mitt Romney wolle die Wirtschaftskrise mit Mitteln lösen, die Ursache der ökonomischen Probleme seien, die er bei seinem Amtsantritt vorgefunden habe, sagte Obama. </p>\n\n<p>\"Romney hat alle seine Talente als Verkäufer genutzt, um genau die Politik aufzuhübschen, die unserem Land so sehr geschadet hat. Es ist dieselbe Politik, hinter der wir in den vergangenen vier Jahren hergeputzt haben - und das bietet er an als Wandel.\" So aber sehe Wandel - \"change\" - nicht aus.</p>\n\n<p>\n\n\t\"Change\" war neben \"Hope\" - Hoffnung - einer der Schlüsselbegriffe, mit denen Obama 2008 das Weiße Haus eroberte. Doch im laufenden Wahlkampf verzichtete er bislang weitgehend darauf, an diese griffigen Slogans anzuknüpfen - wohl auch, weil ihm viele Wähler vorwerfen, zu wenig in Washington bewegt und viele seiner Ankündigungen von vor vier Jahren nicht umgesetzt zu haben. </p>\n\n<p>Statt dessen zog Romney mit dem Versprechen durchs Land, für \"wahren Wandel\" - \"real change\" zu sorgen, sollte er am kommenden Dienstag zum Präsidenten gewählt werden. Fünf Tage vor der Wahl schien Obama nun entschlossen, den Begriff für sich zurückzuerobern. \"Wisconsin, ich sage Euch: Wir wissen, wie Wandel aussieht. Und was Romney anbietet, ist sicher kein Wandel.\" </p>\n\n<p>Wisconsin ist einer jener Handvoll Staaten, die die Wahl mitentscheiden könnten, denn hier ist noch nicht klar, wer von den beiden Bewerbern am Ende die Nase vorn haben wird. Auch Nevada, Colorado und Ohio zählen zu den \"battleground states\", die zum Zünglein an der Waage werden könnten. Auch sie standen auf dem Reiseplan des Präsidenten am Donnerstag. Romney wird am Freitag in Wisconsin und Ohio erwartet.</p>\n\n</div>\n<p><i>lei/dpa</i></p>\n\t\n\t\t\n\n\n<br class=\"spBreakNoHeight\" clear=\"all\"></div>\n\t\t\t\t\n\t\t\t\t",
    "date_published": "2012-11-01 20:02:00",
    "dek": "Barack Obama punktet mit seinem Krisenmanagement nach der \"Sandy\"-Katastrophe. New Yorks Bürgermeister Bloomberg setzt sich für die Wiederwahl des US-Präsidenten ein - und verweist auf dessen Klimapolitik. Zuvor hatte ihn bereits ein Top-Wahlhelfer von Mitt Romney gelobt.",
    "lead_image_url": "http://cdn1.spiegel.de/images/image-420390-thumb-jmiw.jpg",
    "title": "US-Wahlkampf: New Yorks Bürgermeister empfiehlt Obama",
    "rendered_pages": 1
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T21:25:58.063

如果您确实发现 JSON 解析器花费了大量时间，我建议您切换到[Jackson Streaming API](http://wiki.fasterxml.com/JacksonStreamingApi)。与其他解析器相比，它需要更多的工作来设置，但我发现它非常快。

# python - 将颜色条添加到 matplotlib.axes.AxesSublot

> ID：13185471
> 
> 赞同：3
> 
> 时间：2012-11-01T21:06:10.747
> 
> 标签：python, matplotlib

我有 8 个图要与 8 个不同但对应的图进行比较。所以我设置了8个子图，然后尝试用它`axes_grid1.make_axes_locatable`来划分子图。但是，似乎当我使用该`new_vertical`函数时，它会返回 type 的某些内容`matplotlib.axes.AxesSubplot`。

这是我的代码：

```
fig = plt.figure()
for i in range(7):
    ax = fig.add_subplot(4,2,i+1)
    idarray = ice_dict[i]
    mdarray = model_dict[i]
    side_by_side(ax, idarray, mdarray)

def side_by_side(ax1, idata, mdata):
  from mpl_toolkits.axes_grid1 import make_axes_locatable

  global mycmap
  global ice_dict, titles
  divider = make_axes_locatable(ax1)
  ax2 = divider.new_vertical(size="100%", pad=0.05)

  fig1 = ax1.get_figure()
  fig1.add_axes(ax2)

  cax1 = divider.append_axes("right", size = "5%", pad= 0.05)
  plt.sca(ax1)

  im1 = ax1.pcolor(idata, cmap = mycmap)

  ax1.set_xlim(space.min(), space.max()+1)
  ax1.set_ylim(0, len(idata))
  plt.colorbar(im1, cax=cax1)

  im2 = ax2.pcolor(mdata, cmap = mycmap)

  ax2.set_xlim(space.min(), space.max()+1)
  for tl in ax2.get_xticklabels():
      tl.set_visible(False)
  ax2.set_ylim(0, len(mdata))
  ax2.invert_yaxis() 
```

这会产生类似这样的结果，其中 ax2 在每个子图中的顶部，而 ax1 在底部：

![在此处输入图像描述](../Images/ce47ce41ec5f9e62c429fc35f7069a58.png)

我可能应该提到它们的比例不同，所以我不能只对两者使用相同的颜色条。提前致谢。

tl；博士我怎样才能在 ax2, an`AxesSubplot`以及 ax1, an上获得颜色条`Axes`？还是有更好的方法来获得相同的外观？

# android - 如何使用视图寻呼机处理后退按钮？

> ID：13185476
> 
> 赞同：10
> 
> 时间：2012-11-01T21:06:39.280
> 
> 标签：android, android-viewpager, back-stack

我有两个片段 Frag A 和 Frag B 使用 view pager 呈现。如果用户从 A 滑到 B 然后按下返回按钮（在 B 中时），那么用户应该去 A 而不是离开 view pager 。我们怎样才能做到这一点？

将事务添加到 backstack 似乎没有帮助。

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-01T21:14:04.707

您必须覆盖`onKeyDown()`.`Activity`

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        myViewPager.setCurrentItem(0, true);
        return true;
    } else {
       return super.onKeyDown(keyCode, event);
    }
} 
```

这将捕获“返回”按钮按下事件并将用户发送到 ViewPager 中的第一个项目。

还有[ViewPager#getCurrentItem()](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#getCurrentItem%28%29)只有在用户滑动时才能返回。像这样的实现：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK && myViewPager.getCurrentItem() == 1) {
        myViewPager.setCurrentItem(0, true);
        return true;
    } else {
       return super.onKeyDown(keyCode, event);
    }
} 
```

只有当用户在下一页时，才会将用户返回到上一页。否则，它将正常注册“返回”，用户将按预期退出。

您可能想要用户返回上一页的情况（假设您有两个以上的页面）。在这种情况下，您希望实现[ViewPager.OnPageChangeListener()](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html)并在每次`onPageSelected(int position)`调用时保存位置。如果您在堆栈中实现它们，那么您可以在每次用户按下“返回”时弹出它们。一旦堆栈为空，退出应用程序。

**编辑**

正如 Jade Byfield 在评论中正确指出的那样，一个稍微简单的方法是`onBackPressed()`在 Activity 中使用。这仅适用于 API 级别 5+。

```
@Override
public void onBackPressed() {
  if(i_dont_want_to_leave) {
     myViewPager.setCurrentItem(0, true);
  } else {
    super.onBackPressed(); // This will pop the Activity from the stack.
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-17T19:38:30.053

在 Android 文档页面上

[https://developer.android.com/training/animation/screen-slide.html#viewpager](https://developer.android.com/training/animation/screen-slide.html#viewpager)

我找到了一个处理`ViewPager`滑动的例子，并且有一个方法

```
@Override
public void onBackPressed() {
  if (mPager.getCurrentItem() == 0) {
    super.onBackPressed();
  }
  else {
    mPager.setCurrentItem(mPager.getCurrentItem() - 1);
  }
} 
```

这会选择上一页或退出当前活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-26T11:18:46.070

我认为更好的方法是将后键处理委托给相应的片段。我使用了一个支持处理后退键的方法的 CustomFragment。所有片段都将从这个 CustomFragment 扩展。

```
public abstract class BackKeyHandlingFragment extends Fragment {
    public abstract boolean handleBackKey();
} 
```

Activity 可以将 backKey 处理委托给当前的 Fragment。片段可以在它们各自的 handleBackKey 方法实现中执行所需的操作。该方法可以返回 true 来告诉活动不要处理返回键。要在 Activity 级别继续使用默认的返回键操作，该方法可以返回 false。

```
public void onBackPressed() {
     BackKeyHandlingFragment fragment = (BackKeyHandlingFragment) mSectionsPagerAdapter.getItem(mViewPager.getCurrentItem());
     // Fragment should return boolean according to app requirements after processing back key
     if (!fragment.handleBackKey()) { 
        super.onBackPressed();
    }
} 
```

# visual-studio-2010 - 如何从域外的虚拟机向域上的 SQL Server 数据库进行身份验证？

> ID：13185478
> 
> 赞同：6
> 
> 时间：2012-11-01T21:06:51.903
> 
> 标签：visual-studio-2010, sql-server-2008, windows-authentication, virtual-machine, intranet

我正在支持一个 .NET 4.0 (Visual Studio 2010) Web 应用程序，该应用程序对驻留在我的工作 Intranet 上的 SQL Server 2008 数据库进行身份验证。应用程序使用 Windows 身份验证对数据库进行身份验证。如果我在我的主机上开发，那一切都很好，但我正在一个不在工作域上的虚拟机上开发。因此，当项目构建并运行时，它会抛出 SqlClient.SqlException

> “登录失败。登录来自不受信任的域，不能用于 Windows 身份验证。”

如果没有在我的主机上开发并放弃 VM，我可以做些什么来避免这个错误并成功地对数据库进行身份验证，以便我可以构建/运行 Web 应用程序？我愿意将我的凭据存储在本地某个地方，但最好不要在 TFS 源代码控制下的某个地方（如 web.config），因为我无法保持文件被签出，因为项目中有其他开发人员。

我尝试以其他用户身份（作为我工作域上的用户）运行 Visual Studio，但我收到“未知用户名或密码错误”错误。

请注意，将虚拟机添加到域（或通过 VPN 连接到域）不是选项。VM 必须保持在域之外。另请注意，虚拟机在域中的计算机上运行，​​并且 VM 使用共享连接。所以它可以访问 Intranet 但它不能对 SQL Server 执行 windows 身份验证。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T18:58:18.687

您可以以域上的用户身份运行 Visual Studio（或 SQL Server Management Studio）。诀窍是，您必须使用“runas”Windows 工具的“/netonly”选项，以便您可以在非域计算机上以域用户身份运行。

即，在命令提示符下运行此命令（填写您自己的条件）：

```
runas /netonly /user:<Domain>\<User_Name> "<Your_Program.exe>" 
```

或者，您可以在桌面上创建一个快捷方式，并将此命令设置为快捷方式目标。运行快捷方式/命令后，您会在出现提示时输入您的凭据，并且 Visual Studio（或您喜欢的任何程序）将以域用户身份运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:18:04.283

From what I understand, you have several options:

1.  You could add a user account to the SQL db to allow password authentication
2.  Have the VM join the domain
3.  Create an SSH tunnel to the host SQL server port

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T21:14:41.450

如果可能，使用 vpn 连接加入域。Vpn 可以使用特定的域凭据连接您。如果 SQL Server 配置了混合身份验证，则替代方法是使用 SQL Server 身份验证进行连接。

# php - Facebook php api 允许使用无效令牌的用户访问

> ID：13185482
> 
> 赞同：0
> 
> 时间：2012-11-01T21:07:15.160
> 
> 标签：php, facebook-graph-api, facebook-php-sdk

我正在使用 facebook php api 来控制对我的 webapp 某些部分的访问。基本上我只是在每次加载页面时检查用户是否登录到 facebook 并且用户授权应用程序（基本权限），然后根据状态打印内容。

之类的，`if($check_user_lo_npe) { echo 'Welcome!'; }`就这么简单。好吧，一切正常，直到我意识到如果用户从他们在 facebook 中的用户设置中删除应用程序，这意味着令牌无效，即使我知道令牌无效，我仍然会`true`从函数中得到响应，因为`check_user_lo_npe`我说，用户删除了应用程序。这就是我检查权限的方式：

```
function check_user_lo_npe() {
    global $facebook;
    global $data;
    $fb_user_id = $facebook->getUser();
    if ($fb_user_id) {
    try {
        if(!isset($_SESSION['fb_user_profile'])) {
            $_SESSION['fb_user_profile'] = $facebook->api('/me');
            $temparray = $facebook->api('/me/friends');
            $_SESSION['fb_user_friends'] = count($temparray[data]);
        }
        $data->reg_user($_SESSION['fb_user_profile'],$_SESSION['fb_user_friends']);
        return array(true,'');
    } catch (FacebookApiException $e) {
        $fb_user_id = NULL;
        return array(false,$e->getMessage());
    }
    } else {
        return array(false,'');
    }
} 
```

我需要意识到用户何时删除应用程序，以便我可以再次将它们发送到登录屏幕，该功能应该检测何时出现异常，但不知何故我没有得到任何......为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:11:49.127

这些`$_SESSION`变量是由您的应用程序设置的，而不是由 Facebook SDK 设置的，对吗？如果不尝试访问 Facebook 会话，您无法确定该会话是否仍处于活动状态/

如果您需要在每个页面上检查是否仍有活动的 Facebook 会话，请查看Javascript SDK 中的[FB.GetLoginStatus()](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)，或进行 API 调用（例如）`/me/permissions`以检查您的访问令牌是否仍然有效

也就是说，如果有一个异常处理程序来检测访问 Facebook API 的尝试何时失败，并在此时通过身份验证流程发送给用户，这可能很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:10:44.887

您的`if ($fb_user_id)`行可能评估为假，这会导致您`return array(false,'');`在 else 语句中，永远不会触发异常。

如果您确实通过了 ID 检查，那么您似乎是`$_SESSION`在他们删除应用程序之前将数据放入其中，然后没有重新检查它。一旦你有它`$_SESSION`，如果你不返回 Facebook 验证，没有理由会抛出异常。

# c++ - 我应该转向面向对象编程（黑匣子）吗？如何？

> ID：13185483
> 
> 赞同：0
> 
> 时间：2012-11-01T21:07:16.633
> 
> 标签：c++, oop, directx

现在我有一个带有几个类的 DirectX 引擎 - 应用程序、图形、声音，它们每个都有大约 1k 行，它们每个都互相引用。我最初试图限制类和东西的使用，比如传递 D3D 设备，而是做了它对所有类都全局使用，但我在其他所有人的引擎中看到所有内容都分为许多类，并且它们有类似 Engine->GetRenderer->Render(MyD3DContext); 之类的东西。这不是非常低效吗？为什么不直接将 MyD3DContext 设为全局并直接在 Render 函数中使用它。我不明白的最后一件事是 = 你应该如何让类彼此独立工作？听起来很奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:19:33.867

首先，您为什么认为这非常低效？除了更容易编码和维护之外，这也非常快。OOP 不是瓶颈，它对于具有多个开发人员和多个关注点的大型项目（例如现实世界的游戏）来说是一个福音。

让我举个例子，因为你提到了“游戏”：

游戏是一个模拟 模拟包含实体（Objects） 物体可以**做事**，并**具有**属性。因此，对象就像是属性和动作的封装。这就是“面向对象编程”中的“对象”的原因。您可以认为它们是（对象）在您的模拟器中的虚构工厂中创建的。对象的蓝图是“类”，称为`encapsulation`.

这些对象中的每一个都绑定到您的世界，可能通过某种高度数学化的半条命 2（源）级物理引擎。您不想为每个班级编写“物理”代码。相反，您将从类（或接口）“IPhysics”继承。然后，每当您将重力从 10.0 更改为 15.0 时，该值就会在整个“世界”场景中传播。这是`inheritance`.

你游戏中的每个对象，比如《半条命 2》，Gordon Freeman 可以同时充当“玩家”和“可以编写脚本”，如果你明白我的意思的话。这就是多态性。一个对象以不同的类型起作用。

所以你看，在 OOP 中建模和呈现虚构游戏非常容易（而且非常高效）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:09:58.983

这并不是非常低效。而且您肯定需要对 OOP 进行某种介绍。甚至可能[是网上的东西](http://www.codeproject.com/Articles/22769/Introduction-to-Object-Oriented-Programming-Concep)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T21:13:27.137

是的。

随着项目变得越来越大，拥有一个全局的任何东西都会导致大量的问题。遍历几个指针也不是特别低效。担心正确领域的效率，您通过运行测试证明的领域效率低下，并始终尝试保持代码清晰和分离。

如果您担心效率低下，为什么不拼凑一个具有完全这种结构和时间的测试应用程序，完成所有这些取消引用需要多长时间。你会发现，例如，建立可见的多边形列表是微不足道的。

您将看到拥有良好封装的非全局对象的好处的唯一方法将是随着您的项目的增长和您改变周围的事物。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T21:16:28.907

OO 设计有几个大租户：特别是代码重用/模块化和范围/隔离。如今，全局变量通常不受欢迎，因为它们不能很好地扩展到大型开发工作并且总是最终导致问题，因此 OO 试图将任何给定调用的范围限制在执行该功能所需的最低限度。

至于模块化/重用，子模块越大，通常它变得越具体，因此，如果它被分解成更多的模块化块，它就不太可能适合所有目的。因此，您花费更少的时间重写相同的代码以进行稍微调整的目的，这也减少了您在为新的代码实现代码时可能破坏的相邻目的。尽管在运行时可能会或可能不会有一些轻微的成本，但这使得它的实施更有效率。可能不会。请记住，运行 Render() 并不需要更多二进制文件，无论它是在根模块中定义的，还是在组合对象的深处组合多个层。它仍然只是一个函数指针。

这些只是一般概念，所以请随心所欲。

希望有帮助。

# installation - 安装程序系统 - 升级重点

> ID：13185493
> 
> 赞同：1
> 
> 时间：2012-11-01T21:08:04.823
> 
> 标签：installation, upgrade, nsis

*当前情况*：我目前正在寻找一个很好的安装系统（例如 Nullsoft NSIS），**重点关注升级功能**. 我正在开发某种目前处于 Alpha / Beta 状态的编程 IDE - 因此我需要为我的客户提供相当多的升级。我的目标是仅传输 nessassary 文件（例如 400 MB 项目，仅更改了 exe ==> 仅将 exe 打包在安装程序中）。如果您有版本 10 并且需要升级到版本 15，则应采用相同的方法。这应该在最近 5 次更新中实现（没有在服务器上动态创建安装包，而是为每个更新静态创建几个安装文件。所以如果我想“删除升级”最后 5 个版本，我需要 1 个完整安装+ 1 + 2 + 3 + 4 = 服务器上每个版本的 11 个文件 - 这对我来说没问题）。

目前我正在使用 Nullsoft NSIS 安装程序系统 - 我什至编写了一个小的“生成脚本”，它计算所有更改的文件并从中生成相应的升级 NSI 文件。但这是 1) 真正的痛苦，2) 容易出错，3) 不太好说“对开发人员友好”。

*问题1*：是否有低成本/开源替代安装程序可以实现小规模升级/专注于长期升级项目？

*问题 2*：作为静态安装程序文件的完全不同的方法：是否有众所周知的开源/低成本动态服务器系统 - 动态**生成 delta 文件**（不会炸毁服务器）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:01:02.967

NSIS 有[VPatch 插件](http://nsis.sourceforge.net/Docs/VPatch/Readme.html)...

# eclipse - “在 localhost 启动 Tomcat 服务器 7 遇到问题”

> ID：13185498
> 
> 赞同：14
> 
> 时间：2012-11-01T21:08:32.730
> 
> 标签：eclipse, tomcat7

尝试在我的 Eclipse 中配置 tomcat，但“本地主机上的 Tomcat v7.0 服务器所需的端口 8080 已在使用中。服务器可能已经在另一个进程中运行，或者系统进程可能正在使用该端口。要启动此服务器，您将需要停止其他进程或更改端口号”。我尝试设置tomcat环境几次，但它给我带来了这个错误我需要在我的eclipse中做些什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-01T21:35:19.883

在`Servers`视图中双击 Tomcat 并将`Ports`部分中的 HTTP 端口更改为其他内容。或`Package Explorer`导航到`Servers`Tomcat 并更改文件`Connector`内的端口部分`server.xml`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-01T01:20:26.840

1.  关闭日食
2.  将 TOMCAT/conf 中的所有文件复制到 localhost-config 的 WORKSPACE/Servers/Tomcat v7.0 Server
3.  启动 Eclipse
4.  展开 Servers 项目，单击 Tomcat 7 项目并按 F5
5.  从 Eclipse 启动 Tomcat

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-01T06:40:10.087

要克服这种问题，请按照以下步骤操作：

*   打开命令提示符。
*   c:\Users\CGITS_04> netstat -o -n -a | 发现str 0.0:80
*   然后您可以看到当前使用端口 80 的进程列表。
*   打开任务管理器->搜索进程->选择并结束进程。
*   现在打开eclipse并启动tomcat。
*   快乐编码！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-19T17:19:37.910

在 eclipse->in server tap-> 双击 localhost-> Ports -> HTTP/1.1 的 Tomcat 服务器

默认端口号为 8080。将其更改为 8081。Tomcat 版本 7.0

我还在 NetBeans IDE 7.4 中为 JSP 配置了 tomcat 服务器。所以我面临这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-23T10:33:09.077

# 方法一：

*   `localhost:8080`在浏览器中输入以了解哪个进程占用 8080 端口
*   卸载那个程序

# 方法二：

重新安装 apache tomcat 但在安装过程中更改端口号。仔细看安装过程

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-20T10:32:45.103

在ubuntu中打开终端(ctrl+shift+t)
sudo gedit /etc/tomcat7/server.xml

将 server.xml 中的默认端口从 8080 更改为 8081,8181,8008。然后保存文件。

现在该项目将很好地运行而不会受到任何干扰。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-17T14:32:49.717

当我的工作区位于 E:\ 驱动器时，我遇到了同样的问题。然后我将工作空间位置更改为 C:\User\\ 位置。现在问题似乎解决了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-17T20:02:38.420

去`web.xml` 添加`<element>`之前 `<web-app>` 和`</element>`之后关闭`</web-app>`

应该是这样的

```
<?xml version="1.0" encoding="UTF-8"?>

<element> 
```

`<web-app>`

```
....
</web-app>

</element> 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-08-24T18:28:06.287

嘿，我最近得到了解决方案......只需将“ROOT”文件夹从 C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\TO your_Workspace\.metadata\.plugins\org.eclipse.wst.server.core \ tmp0 \wtpwebapps\ 并在被问到时重写它..

这是必需的，因为 eclipse 忘记将该根文件夹复制到其工作区。只需右键单击服务器选项卡中的 Apache tomcat 7.0 并观察默认情况下位置将是工作区元数据示例：“位置：[工作空间元数据]”。因此，它会找到包含欢迎页面的根文件夹，并显示 404 page not found 错误。谢谢 ..

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2014-07-28T20:45:18.613

nop...只要打开四个dateis：content.xml；服务器.xml；分流服务器中的 tomcat-users.xml 和 web.xml。有一些文字。将8080端口号改为8081

# php - 使用 PHP 从 XML 数据集创建嵌套列表

> ID：13185499
> 
> 赞同：0
> 
> 时间：2012-11-01T21:08:35.880
> 
> 标签：php, xml, arrays, xpath, simplexml

我正在尝试从包含类别和子类别+图像的现有 XML 文件构建无序列表。我需要每个子类别成为无序列表中的一个项目，每个相关图像都在嵌套列表中。子类别应仅显示一次（如果相同，则不得重复）。我相信我正在寻找的是一个递归循环，但这就是我迷路的地方。

本质上，我正在尝试实现类似于此的外观：

--------------DOGS-------------
[..........小...... ]
[图片] [图片]
[..........大........]
[图片]
--------------CATS-- -----------
[........中............]
[图片]
[............大。 .........]
[图片] [图片]

我的 XML 文件结构：

```
 <root>
    <animal>
        <category>DOGS</category>
        <subcategory>small</subcategory>
        <name>Terrier</name>
        <image>aaa.jpg</image>
    </animal>
    <animal>
        <category>-</category>
        <subcategory>small</subcategory>
        <name>Havanese</name>
        <image>bbb.jpg</image>
    </animal>
    <animal>
        <category>-</category>
        <subcategory>large</subcategory>
        <name>Dalmatian</name>
        <image>ccc.jpg</image>
    </animal>
    <animal>
        <category>CATS</category>
        <subcategory>medium</subcategory>
        <name>Abyssinian</name>
        <image>ddd.jpg</image>
    </animal>
    <animal>
        <category>-</category>
        <subcategory>large</subcategory>
        <name>Birman</name>
        <image>eee.jpg</image>
    </animal>
    <animal>
        <category>-</category>
        <subcategory>large</subcategory>
        <name>American Shorthair</name>
        <image>fff.jpg</image>
    </animal>
</root> 
```

这是我到目前为止所尝试的：

```
 <?php

    $xml = simplexml_load_file("file.xml");

    $categories     = array();
    $subcategories = array();
    $names      = array();
    $image         = array();

    foreach($xml->animal as $animals) { 
        $category        = $animals->category;
        $subcategory     = $animals->subcategory;
        $name            = $animals->name;
        $image       = $animals->image;

        $categories[]     = $category;
        $subcategories[] = $subcategory;
        $names[]          = $name;
        $images[]        = $image
    }

    function getMenu($xml, $categories, $subcategories, $names, $images) {
        $output = '<ul>';
             foreach(array_keys($images) as $n) {       
                 $output .= '<li class="animals" data-tags="'.$names[$n].'">';
                 $output .= '<img src="xml/'.$images[$n].'" width="75" height="75" alt="'.$names[$n].'" />';
                 $output .= '</li>';    
             }

        $output.= '</ul>';  
        return array($output);  
    }

    $result = getMenu($xml, $categories, $subcategories, $names, $images);

    echo json_encode($result);

    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:00:24.593

确实有一千种方法可以做到这一点。最直接的可能是`xpath()`. 它是一种强大的 XML 查询语言，值得学习。`$xml`您的simplexmlelement示例：

```
foreach ($xml->xpath('//category[not(. = following::category)]') as $category) {
    echo "=== $category === \n";
    foreach ($xml->xpath("//animal[category = '$category']/subcategory[not(. = following::animal[category = '$category']/subcategory)]") as $subcategory) {
        echo "  = $subcategory =\n";
        foreach ($xml->xpath("//animal[category = '$category' and subcategory = '$subcategory']") as $animal) {
            echo "    * $animal->name ($animal->image)\n";
        }
    }
} 
```

输出：

```
=== DOGS === 
  = small =
    * Terrier (aaa.jpg)
    * Havanese (bbb.jpg)
  = large =
    * Dalmatian (ccc.jpg) 
```

您可能想要替换那里冗长的 xpath 字符串。在闭包和迭代器聚合的帮助下，甚至可以将代码简化为：

```
foreach ($categories as $category) {
    echo "=== $category === \n";
    foreach ($subcategories as $subcategory) {
        echo "  = $subcategory =\n";
        foreach ($animals as $animal) {
            echo "    * $animal->name ($animal->image)\n";
        }
    }
} 
```

这将允许稍后更改 XML 结构并将 xpath 配置在中心位置：

```
$categories    = $vpath('//category[not(. = following::category)]');
$subcategories = $vpath('//animal[category = "%1$s"]/subcategory[not(. = following::animal[category = "%1$s"]/subcategory)]', [&$category]);
$animals       = $vpath("//animal[category = '%s' and subcategory = '%s']", [&$category, &$subcategory]); 
```

我已将该示例作为[演示](http://codepad.viper-7.com/w3e6PL)放到网上。

我的输出与带有缩进的文本一样，但是由于有了`foreach`s ，将其转换为 HTML 应该非常简单。我把它留作练习。

# xcode - 使用 OpenCV 2.4.2 将两个图像复制到一个图像中

> ID：13185501
> 
> 赞同：4
> 
> 时间：2012-11-01T21:08:57.287
> 
> 标签：xcode, opencv

我正在尝试将两个图像复制到一个大图像中，但不幸的是我无法通过以下尝试仅插入 1 个图像：

```
void showTwoImages(Mat imageOne, Mat imageTwo, string title) {
    int totalCol = imageOne.cols+imageTwo.cols;
    int totalRow = imageOne.rows;

    Mat totalImage(Size(totalCol, totalRow), 8, 3);

    imageOne.copyTo(totalImage(Rect(0,0,imageOne.cols, imageOne.rows)));

    viewImage(totalImage, title);
} 
```

我的错误：

![在此处输入图像描述](../Images/f69475b373e0bf8d960d990bcef6e2e0.png)

不幸的是，我没有从 XCode 中得到特定的错误，而是引用了汇编代码，所以我无法确定发生的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T21:37:45.387

改变

```
Mat totalImage(Size(totalCol, totalRow), 8, 3); 
```

至

```
Mat totalImage(Size(totalCol, totalRow), imageOne.type()); 
```

# algorithm - 找到第 K 个最小的元素

> ID：13185508
> 
> 赞同：0
> 
> 时间：2012-11-01T21:09:39.660
> 
> 标签：algorithm

谁能解释我做错了什么？我想找到第 k 个最小的元素但是出了点问题）

示例：我有未排序的数组 int[] uA = { **2, 9, 4, 13, 11, 7, 8** }; 我将“9”作为枢轴元素，在第一次分区（快速排序）迭代后，我将拥有这个数组 {2、8、4、7、11、13、9}。中间指针将显示在“11”处。这到底意味着什么？并非所有元素都对 11 大于 11。而且 11 根本不在“正确的位置”。但是，例如，我想返回第 5 个最小的元素（11）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:22:03.970

枢轴不在正确的位置，您应该在分区结束时将枢轴放在正确的位置以找出枢轴的位置。（你真的不需要关心中间元素）然后你可以使用这个信息来计算第K个最小的元素。假设主元在分区结束时位于第 x 个索引处；

```
K = x =>  pivot is the right answer
K < x =>  the answer is in the left partition, search left partition  
K > x =>  the answer is in the right partition, search right partition 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:50:53.447

我在我的代码中发现了一个错误：在分区部分交换两个元素后，我像快速排序一样移动了指针（left++，right--），但不应该。

*谢谢大家的关注！*

# c++ - 函数原型中的多维数组

> ID：13185523
> 
> 赞同：0
> 
> 时间：2012-11-01T21:10:33.727
> 
> 标签：c++, class, multidimensional-array

我有这样的代码：

```
class oBT{
    public: void clean(int**);
            void write(int**);
            bool check(int**);
            void backtrack(int**,int);
};

void oBT::clean(int R[8][8])
{ for(int i=1; i<=8; i++) for(int j=1; j<=8; j++) R[i][j]=0; }

void oBT::write(int R[8])
{
    for(int i=1; i<=8; i++)
    {
        for(int j=1; j<=8; j++)
            std::cout<<R[i]<<' ';
        std::cout<<'\n';
    }
    std::cout<<'\n';
}

bool oBT::check(int R[8], int i=1)
{
    for(int j=1; j<=8; j++)
    {
        for(int k=1; k<=8; k++)
        {
            if(R[i]==R[j]) return false;
            if(R[j]==R[j]) return false;
        }
        i++;
    }
    return true;
}

void oBT::backtrack(int R[8], int i=1)
{
    for(int j=1; j<=8; j++)
        for(int k=1; k<=8; k++)
        {
            R[j]=1;
            if(check(R))
                if(i<8) backtrack(R,i+1);
                else { write(R); clean(R); }
        }
} 
```

当我尝试编译它时，出现以下错误：

```
C:\OJI\Eight Queen Puzzle\Class.h|8|error: prototype for 'void oBT::clean(int (*)[8])' does not match any in class 'oBT'|
C:\OJI\Eight Queen Puzzle\Class.h|2|error: candidate is: void oBT::clean(int**)|
C:\OJI\Eight Queen Puzzle\Class.h|11|error: prototype for 'void oBT::write(int*)' does not match any in class 'oBT'|
C:\OJI\Eight Queen Puzzle\Class.h|3|error: candidate is: void oBT::write(int**)|
C:\OJI\Eight Queen Puzzle\Class.h|22|error: prototype for 'bool oBT::check(int*, int)' does not match any in class 'oBT'|
C:\OJI\Eight Queen Puzzle\Class.h|4|error: candidate is: bool oBT::check(int**)|
C:\OJI\Eight Queen Puzzle\Class.h|36|error: prototype for 'void oBT::backtrack(int*, int)' does not match any in class 'oBT'|
C:\OJI\Eight Queen Puzzle\Class.h|5|error: candidate is: void oBT::backtrack(int**, int)|

||=== Build finished: 8 errors, x warnings ===| 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:13:11.583

数组不是指针，指针也不是数组。如果你想传入多维数组，要么使用双指针和动态内存分配（即`new`），要么声明你的函数接受一个数组数组，比如

```
void clean(int parm[8][8]); 
```

等等

此外，您的`check`函数有一个“错字”，您从原型中省略了“大小”参数；代替

```
bool check(int **); 
```

它应该是

```
bool check(int R[8][8], int i); 
```

# c++ - 尝试将 const char * 转换为 LPTSTR 时出现链接器错误

> ID：13185525
> 
> 赞同：0
> 
> 时间：2012-11-01T21:10:41.900
> 
> 标签：c++, visual-studio-2010, compiler-construction, compilation, linker

我有以下将 const char * 转换为 LPTSTR 的代码片段，但是在编译时出现链接器错误。

```
char * pCopy3 = NULL;
    if (sizeof(TCHAR) == sizeof(char))
    {
        size_t size = strlen(words[2].c_str());
        pCopy3 = new char[size + 1];
        strcpy(pCopy3, words[2].c_str());
    } 
```

链接器错误如下

```
Error   19  error LNK1169: one or more multiply defined symbols found   STablUpd.exe    1   1   STablUpd
Error   17  error LNK2005: "class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > * args" (?args@@3PAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@A) already defined in maindlg.obj  tabledlg.obj    STablUpd
Error   18  error LNK2005: "class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > * words" (?words@@3PAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@A) already defined in maindlg.obj    tabledlg.obj    STablUpd
Error   16  error LNK2005: "class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > cmdArgs" (?cmdArgs@@3V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@A) already defined in maindlg.obj    tabledlg.obj    STablUpd
Error   13  error LNK2005: "int __cdecl Main_OnInitDialog(struct HWND__ *,struct HWND__ *,long)" (?Main_OnInitDialog@@YAHPAUHWND__@@0J@Z) already defined in maindlg.obj    tabledlg.obj    STablUpd
Error   8   error LNK2005: "int __stdcall Main_DlgProc(struct HWND__ *,unsigned int,unsigned int,long)" (?Main_DlgProc@@YGHPAUHWND__@@IIJ@Z) already defined in maindlg.obj tabledlg.obj    STablUpd
Error   15  error LNK2005: "struct HINSTANCE__ * g_hInstApp" (?g_hInstApp@@3PAUHINSTANCE__@@A) already defined in maindlg.obj   tabledlg.obj    STablUpd
Error   9   error LNK2005: "void __cdecl Main_OnBrowse(struct HWND__ *)" (?Main_OnBrowse@@YAXPAUHWND__@@@Z) already defined in maindlg.obj  tabledlg.obj    STablUpd
Error   10  error LNK2005: "void __cdecl Main_OnClose(struct HWND__ *,int)" (?Main_OnClose@@YAXPAUHWND__@@H@Z) already defined in maindlg.obj   tabledlg.obj    STablUpd
Error   11  error LNK2005: "void __cdecl Main_OnCommand(struct HWND__ *,int,struct HWND__ *,unsigned int)" (?Main_OnCommand@@YAXPAUHWND__@@H0I@Z) already defined in maindlg.obj    tabledlg.obj    STablUpd
Error   12  error LNK2005: "void __cdecl Main_OnDisplay(struct HWND__ *)" (?Main_OnDisplay@@YAXPAUHWND__@@@Z) already defined in maindlg.obj    tabledlg.obj    STablUpd
Error   14  error LNK2005: _WinMain@16 already defined in maindlg.obj   tabledlg.obj    STablUpd 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:30:43.683

我认为您显示的代码片段将 std::string 转换为 char*。在这种情况下，代码是正确的，并且在编译该代码时应该没有错误（strcpy 警告除外）。

您最初要求将 char* 转换为 LPTSTR。你可以这样做（对于 UNICODE 字符集）：

```
char *test;
wchar_t *bla=new wchar_t[size];
swprintf(bla, size, L"%hs", test);
LPTSTR bla2=bla; 
```

或者，如果您使用多字节字符集：

```
char *test;
LPTSTR bla2=test; 
```

# javascript - val("text") 未将选项设置为已选择

> ID：13185529
> 
> 赞同：1
> 
> 时间：2012-11-01T21:11:01.057
> 
> 标签：javascript, jquery, html, jquery-mobile

我正在尝试使用`$('#mySel').val('1.5');`我发现几个建议这样做的地方来更改此选择的值。但由于某种原因，它似乎不起作用，而是选择了第一个选项`0.5`。有谁知道为什么这不起作用？或者什么可能会起作用？这是我正在使用的代码。

```
$('#mySel').val('1.5');
$('#courseset').trigger('create');

<select name="hours" id="mySel" data-mini="true" >
   <option value="0.5" >0.5</option>
   <option value="1.0" >1.0</option>
   <option value="1.5" >1.5</option>
   <option value="2.0" >2.0</option>
   <option value="2.5" >2.5</option>
   <option value="3.0" >3.0</option>
   <option value="3.5" >3.5</option>
   <option value="4.0" >4.0</option>
   <option value="4.5" >4.5</option>
   <option value="5.0" >5.0</option>
   <option value="5.5" >5.5</option>
   <option value="6.0" >6.0</option>
   <option value="6.5" >6.5</option>
   <option value="7.0" >7.0</option>
   <option value="7.5" >7.5</option>
   <option value="8.0" >8.0</option>
   <option value="8.5" >8.5</option>
   <option value="9.0" >9.0</option>
   <option value="9.5" >9.5</option>
   <option value="10.0" >10.0</option>
   <option value="10.5" >10.5</option>
   <option value="11.0" >11.0</option>
   <option value="11.5" >11.5</option>
   <option value="12.0" >12.0</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:14:17.473

```
$("#mySel option").filter(function() {
    return $(this).text() == '1.5';
}).prop('selected', true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:58:26.893

这应该匹配选项字段而不知道它在 DOM 中的位置

```
$('#mySel option[value="1.5"]').attr('selected', 'selected'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T21:27:58.677

尝试使用 .attr("selected", "selected)。

您也可以使用 nth-child 来选择选项，在您的情况下，您可以尝试以下操作：

```
$("#mySel :nth-child(3)").attr('selected', 'selected'); //selected option value=1.5 
```

# c# - Moq 在构造函数中使用延迟加载

> ID：13185539
> 
> 赞同：0
> 
> 时间：2012-11-01T21:11:39.627
> 
> 标签：c#, unit-testing, moq, lazy-loading, lazy-evaluation

我今天遇到了一个奇怪的问题——我正在围绕一个 SIM 对象编写一个单元测试。它断言当 SIM 对象更新并且剩余的 PIN 尝试已更改时，它将调用特定方法。测试看起来像这样：

```
[Test]
public void TestUpdateSimInfoWithPinAttemptsChangedCallsOnPinAttemptsRemaining()
{
    var info = new SimPinInfo {PinAttemptsRemaining = 10};

    var sim = new Mock<Sim>(info);

    info.PinAttemptsRemaining = 2;

    sim.Object.UpdateSimInfo(info);

    sim.Verify(s => s.FireOnPinAttemptsRemaining(), Times.Once());
} 
```

因此，创建模拟 SIM 对象时剩余 10 次 PIN 尝试。然后在传递给方法之前，该`SimPinInfo`对象的值减少到 2 。`PinAttemptsRemaining``UpdateSimInfo()`

SIM 构造函数（为清楚起见进行了修剪）：

```
internal Sim(SimPinInfo info) : this()
{
     _pinAttemptsRemaining = info.PinAttemptsRemaining;
     _pukAttemptsRemaining = info.PukAttemptsRemaining;
     ......
} 
```

和`UpdateSimInfo()`方法（修剪）：

```
internal void UpdateSimInfo(SimPinInfo info)
{
    lock(_locker)
    {
        if (_pinAttemptsRemaining != info.PinAttemptsRemaining)
        {
            Log("PinAttemptsRemaining changed");
            _pinAttemptsRemaining = info.PinAttemptsRemaining;
            FireOnPinAttemptsRemaining();
        }
        .....
    }
} 
```

一个非常简单的测试 - 应该发生的是上面的 if 语句将为真（剩余的 pin 尝试已更改），因此`OnPinAttemptsRemaining`将触发事件。然而，测试失败了（虽然不是一直 - 当我慢慢地通过代码时它通过了！）。发生的事情是 if 语句是错误的 - 两者`_pinAttemptsRemaining`都是`info.PinAttemptsRemaining`2。看起来 SIM 模拟实际上没有按预期创建 - 当`info.PinAttemptsRemaining`是 10 时。

为了证明这一点，我添加了一条评论：

```
var sim = new Mock<Sim>(info);
info.PinAttemptsRemaining = 2;
Console.WriteLine("SIM's pin attempts = " + sim.Object.PinAttemptsRemaining); 
```

我还在 SIM 对象的构造函数中放置了一个断点。跨过线时断点被击中`Console.WriteLine`，而不是`new Mock...`线。所以在需要之前不会创建对象。

我相信这被称为延迟加载或延迟评估。

这种行为有多种解决方法——我最终创建了一个新`SimPinInfo`对象来传递给`UpdateSimInfo()`.

有没有人遇到过这种行为？我找不到任何对它的引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:04:47.237

从我读到的内容来看，您正在尝试测试 Mock。

```
sim.Object.UpdateSimInfo(info); 
```

模拟旨在替换依赖项，您不会使用它们来替换您要测试的代码。如果没有看到整个代码，我猜你甚至不需要 Mock 来测试这种行为。假设 FireOnPinAttemptsRemaining 引发了一个事件，我推荐这样的测试方法：

```
[Test]
public void TestUpdateSimInfoWithPinAttemptsChangedCallsOnPinAttemptsRemaining()
{
    int eventFiredCount = 0;
    var info = new SimPinInfo {PinAttemptsRemaining = 10};
    var sim = Sim(info);
    sim.OnPinAttemptsRemaining += (sender, e) => { eventFiredCount++; };

    info.PinAttemptsRemaining = 2;
    sim.UpdateSimInfo(info);

    Assert.AreEqual(1, eventFiredCount);
} 
```

我不是 100% 使用事件处理程序，因为我不知道 Fire 方法是否引发事件或事件名称，但它应该给你一个想法。

# javascript - 如何向 Ember.js 对象添加动态方法名称？

> ID：13185541
> 
> 赞同：2
> 
> 时间：2012-11-01T21:11:53.417
> 
> 标签：javascript, coffeescript, ember.js

所以基本上我有许多非常相似的函数，但函数名称略有不同，访问的变量也略有不同。

我不想重复自己，而是想通过类似于 Ruby 中的 define_method 的东西来创建这些方法。

任何人都知道如何在 Ember.js 对象中执行此操作？哦，最好是 CoffeeScript！

这显然是错误的，但只是一个非常基本的例子。

```
Thing = Ember.Object.extend()

animal = "cow"
say = "moo"

animal = "dog"
say = "woof"

Thing.reopenClass(
this["#{animal}Speak"]: ->
console.log say
) 
```

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:42:42.797

`reopenClass`只需要一个对象，这样您就可以构建该对象，然后将其交给`reopenClass`：

```
add_this = { }
add_this["#{animal}Speak"] = -> console.log say
Thing.reopenClass add_this 
```

不幸的是，在为对象文字构建键时不能使用字符串插值，所以很明显（但不正确）：

```
Thing.reopenClass(
    "#{animal}Speak": -> console.log say
) 
```

给你一个语法错误。

我认为问题的根源在于带有插值的字符串不是字符串文字，它是一个值为字符串的表达式。对象文字中的键必须是简单的不带引号的标签 ( `label:`) 或字符串文字 ( `'string':`or `"string":`)。当你这样说时：

```
"string with #{interpolation}" 
```

您实际上只是为此使用了简写：

```
"string with " + interpolation 
```

CoffeeScript 编译器不够聪明，无法重写：

```
o = { "string with #{interpolation}": value } 
```

作为这个JavaScript：

```
o = { }
o['string with ' + interpolation] = value 
```

因此，您不能将字符串值表达式用作 CoffeeScript（或 JavaScript）中对象文字的键。

# android - 安卓内部存储；创建文件

> ID：13185543
> 
> 赞同：1
> 
> 时间：2012-11-01T21:11:59.017
> 
> 标签：android, file, storage, internal

我试图在内部为另一个应用程序创建基本文件。所以我写了一个基本的应用程序来解决问题，然后将它添加到另一个应用程序中。这是来自猫的日志

```
10-09 17:56:14.579: D/dalvikvm(11092): Not late-enabling CheckJNI (already on)
10-09 17:56:15.599: E/Trace(11092): error opening trace file: No such file or directory (2)
10-09 17:56:16.549: D/gralloc_goldfish(11092): Emulator without GPU emulation detected.
10-09 17:57:20.158: D/dalvikvm(11092): Debugger has detached; object registry had 1 entries
10-09 17:57:30.078: E/Trace(11662): error opening trace file: No such file or directory (2)
10-09 17:57:30.759: D/gralloc_goldfish(11662): Emulator without GPU emulation detected. 
```

文件已创建。但是，当我实现了在 onClick 上创建文件的代码时，它没有。或者当我将创建的文件放在主类以外的类中时，它没有创建文件。

这是我的基本代码：`package com.newapp;

```
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.text.DateFormat;
import java.util.Date;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    newFile();

}
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    public String timeStamp(){
        Date myDate = new Date();
        return (DateFormat.getDateInstance().format(myDate) + " " +                         DateFormat.getTimeInstance().format(myDate));
    }

    public void newFile (){
         String FILENAME = timeStamp();
         String string = "hello world!";

         FileOutputStream fos = null;
            try {
        fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
            } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
                e.printStackTrace();
        }
         try {
                fos.write(string.getBytes());
            } catch (IOException e) {
                // TODO Auto-generated catch block
        e.printStackTrace();
        }
         try {
                    fos.close();
            } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
}` 
```

我现在摆脱了按钮和其他类。这是除了他们提供给您的正常 hello worlds 屏幕和未修改的清单之外的所有代码。

**编辑** 上面的代码可以工作，并且在 /data/data/com.newapp/files 中创建了一个文件只需再次运行它以确保创建了一个文件并从猫那里得到这个。

10-09 17:57:29.482：D/dalvikvm(11662)：未启用 CheckJNI（已启用）10-09 17:57:30.078：E/Trace(11662)：打开跟踪文件时出错：没有此类文件或目录 (2) 10-09 17:57:30.759: D/gralloc_goldfish(11662): 没有检测到 GPU 仿真的仿真器。10-09 18:53:35.238: D/dalvikvm(11662): 调试器已分离；对象注册表有 1 个条目 10-09 18:53:53.389：E/Trace(14975)：错误打开跟踪文件：没有这样的文件或目录 (2) 10-09 18:53:54.658：I/Choreographer(14975)：跳过了 36 帧！应用程序可能在其主线程上做了太多工作。10-09 18:53:54.668：D/gralloc_goldfish(14975)：没有检测到 GPU 仿真的仿真器。

我现在要把它移到它自己的类中并尝试一下。

这是在它自己的类中创建的文件：package com.newapp;

```
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.text.DateFormat;    
import java.util.Date;

import android.app.Activity;
import android.content.Context;

public class NewFile extends Activity {

public String timeStamp(){
    Date myDate = new Date();
    return (DateFormat.getDateInstance().format(myDate) + " " +             DateFormat.getTimeInstance().format(myDate));
}

public NewFile (){
     String FILENAME = timeStamp();
     String string = "hello world!";

     FileOutputStream fos = null;
    try {
        fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
     try {
        fos.write(string.getBytes());
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
     try {
        fos.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    }
 } 
```

这是主要活动：

```
package com.newapp;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    NewFile firstone = new NewFile();
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}   
} 
```

最后，我尝试了几种不同的方法来使用 NewFile(); 作为构造函数作为常规方法并调用 firstone.newFile(); 遇到很多麻烦，它现在甚至无法在虚拟设备或平板电脑上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:32:21.440

在朋友的帮助下，我发现了问题所在。您不能在新课程中“扩展活动”。您需要使用上下文来引用该类。NewFile 类的最终代码是：

```
package com.newapp;

import java.io.FileOutputStream;
import java.io.IOException;
import java.text.DateFormat;
import java.util.Date;
import android.content.Context;

public class NewFile{

public String timeStamp(){
    Date myDate = new Date();
    return (DateFormat.getDateInstance().format(myDate) + " " + DateFormat.getTimeInstance().format(myDate));
}

public void createFile(Context c) throws IOException{
     String FILENAME = timeStamp();
     String string = "hello world!";

     FileOutputStream fos = c.openFileOutput(FILENAME, Context.MODE_PRIVATE);
    fos.write(string.getBytes());
    fos.close();

}
} 
```

在主类中你只需要调用：

```
NewFile firstfile = new NewFile();
firstfile.createFile(getBaseContext()); 
```

在 onCreate 方法中。

谢谢

# javascript - JavaScript 检查是否单击了开始按钮

> ID：13185546
> 
> 赞同：1
> 
> 时间：2012-11-01T21:12:03.190
> 
> 标签：javascript

我的按钮有问题。如果按钮没有被点击，我想继续播放我的开场声；否则暂停声音并加载游戏。我怎样才能做到这一点？到目前为止，我已经尝试过了，但无济于事。

```
function showStartScreen(launch) {
    //SHOW SPLASH SCREEN
    var screen = document.getElementById("splash");
    removeClass(screen, SPLASHSTATES.SPLASH_OFF);
    addClass(screen, SPLASHSTATES.SPLASH_ON);

    if(document.getElementById('startButton').click = false){
    playSound(sndOpening);
    }
    else{
    //CONFIGURE START BUTTON
    var start = document.getElementById("startButton");
    if (launch) {
        start.innerText = "Start Game";
        stopSound(sndOpening);
        start.addEventListener("click", loadGame, false);
    } else {

    start.innerText = "Resume Game";
    start.addEventListener("click", reloadGame, false);
            }
    } // end of outer if-else

    //ANIMATE SPLASH SHOW
    animatePanel(splash);
} 
```

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:29:42.003

您可以将函数绑定到按钮的 onclick 属性，如下所示：

```
<input type="button" id="startButton" value="Start game" onclick="showStartScreen(launch);" /> 
```

或者您将您的功能分配给按钮的 DOM 元素：

```
document.getElementById('startButton').onclick = showStartScreen; 
```

第二种方法要求编写不带括号或参数的函数名称。

# javascript - 带有更多按钮的jquery移动页面

> ID：13185549
> 
> 赞同：1
> 
> 时间：2012-11-01T21:12:35.097
> 
> 标签：javascript, jquery, css, jquery-mobile

我正在设置显示超过 50 个元素的 aj 查询移动页面，关于如何在打开页面时仅显示前 10 个元素的任何建议，以及底部的更多按钮，如果单击它可以显示所有元素。我的脚本是：

```
<body> 

<div data-role="page" data-add-back-btn="true" data-back-btn-text="Back" >
<div data-role="header" >
<h1 style="white-space:normal">body</h1>

</div>
<ul  data-role="listview" data-inset="true" data-filter="false">
<li><a href="http://www.mydomain.co.nz/users/262/">Feature listings</a>   </li>

<ul data-role="listview" data-filter="false">

<table>

<li>
    <a href="/users/264/properties/50473">
        <img src="/media/2012/11/01/011528_47689.jpg?m=resize&o[geometry]=80x60&s=f9e49fbb929e8d1b" />          
        <h3>7C/192 Willis Street</font></font></font>, Beijing</h3>
    <p>Buyer Enquiry Over $305,000<br />Ref: 47689</p></a>
</li>  

<li>
    <a href="/users/264/properties/50474">
        <img src="/media/2012/11/01/011533_47722.jpg?m=resize&o[geometry]=80x60&s=b4482c7638c512b4" />          
        <h3>606/35 Abel Smith Street</font></font></font>, Te Aro</h3>
        <p>Tender<br />Ref: 47722</p></a>
</li>

<li>
    <a href="/users/264/listings/50476">
        <img src="/media/2012/11/01/011539_47691.jpg?m=resize&o[geometry]=80x60&s=66def46f1524e177" />
        <h3>8/34 William Street</font></font></font>, Hataitai</h3>
        <p>Buyer Enquiry Over $280,000<br />Ref: 47691</p></a>
</li>  ........
....... over 50 elements 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T01:05:54.200

您可以尝试对`li`元素使用 slice 并隐藏它们。

首先，用 CSS**隐藏它们：**

```
li { display: none; } 
```

然后在 JavaScript 中显示**前 10 个**，并设置**click 事件侦听**器以显示**隐藏**的事件：

```
$('li').slice(0,10).css('display', 'block');
$('#more-button').click(function() {
    $('li:hidden').show();
}); 
```

# php - PHP 是会话安全的

> ID：13185550
> 
> 赞同：1
> 
> 时间：2012-11-01T21:12:37.113
> 
> 标签：php

```
if($_POST['user'] == 'anita' && $_POST['pw'] == '123')
{
    $_SESSION['username'] = $_POST['user'];
    echo "Welcome, " . $user;
    $loggedin = true;
}else
{
    die('Log in details incorrect.');
}

if(isset($_SESSION['username']))
{
   // Show website edit menu
} 
```

我正在创建一个网站，我正在考虑添加一个小型自制 CMS 供我的客户使用，这样她就可以自己更新网站。

这是保存某人详细信息的安全方法吗？我可以检查 $_SESSION['username'] 是否设置为验证用户是否已登录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:15:26.927

会话文件通常纯粹保存在服务器上，用户唯一可以直接访问的是会话 cookie。该 cookie 通常也只有会话的 ID，没有其他内容。

除非恶意用户通过其他方式访问会话存储系统（文件、数据库）而不是您的代码，否则他们无法更改会话中存储的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:15:24.010

嗯，是。在服务器端设置会话非常安全，因为这意味着黑客必须访问服务器文件写入，或者在您的客户端代码中发现一个非常可怕的错误，导致文件重写。

只需做一些研究：会话固定以及如何防止它，并尝试在 CMS 端使用 SSL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T21:30:29.877

一般来说，会话​​是安全的。但是也有容易被劫持的。会话由存储在服务器上的会话 ID 唯一标识；这是您的服务器和计算机之间的唯一链接。如果有人要获得此 ID，那么他们就可以访问您的会话。

大流士

# ruby-on-rails-3 - 如何使用 rspec-rails 测试控制器？

> ID：13185552
> 
> 赞同：2
> 
> 时间：2012-11-01T21:12:44.327
> 
> 标签：ruby-on-rails-3, rspec, controller

我想测试我的编辑配方页面是否使用 rspec 呈现，尽管它不会路由到

```
 recipes/edit 
```

它路由到recipes/id/edit（id被替换为数字）

我目前的测试看起来像这样

```
 describe "Show Edit Recipe Page" do

  it "should display edit recipe  page" do
    get :edit
    response.should be_success
    response.should render_template(:edit)
  end
end 
```

我如何正确测试这个页面，目前我的测试失败了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:26:59.103

### 问题

您的示例不包含实际测试控制器对象所需的代码。RecipeController 未在您的规范中定义。

### 解决方案

确保您的控制器规格位于 spec/controllers 下或具有明确的`type: :controller`设置。然后，实际描述一个控制器，或者使用隐式主题，或者通过在 before 或 test 块中设置一个控制器实例。作为最基本的例子：

```
describe RecipeController do
  # test something using the implied RecipeController.new
end 
```

### 更多阅读

[RSpec 控制器规格](https://www.relishapp.com/rspec/rspec-rails/v/2-11/docs/controller-specs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:28:29.847

`get`需要在 params 哈希中传递的配方的 id ：

```
let(:recipe) { Factory.create(:recipe) }

it "should display edit recipe page" do
  get :edit, :id => recipe.id
  response.should be_success
  response.should render_template(:edit)
end 
```

# c# - 我的 Windows 窗体应用程序大小在不同的笔记本上发生变化

> ID：13185557
> 
> 赞同：5
> 
> 时间：2012-11-01T21:13:10.080
> 
> 标签：c#, winforms, screen-resolution

编码我的项目进展顺利。但是今天我发现了一个问题。

我的主笔记本有全高清 (1920x1080) 分辨率，我正在这里编写我的项目。当我将主笔记本的分辨率更改为 1280x1024、1280x800 或 1024x768 时，没有问题。我的应用程序的分辨率是 1024x768，它没有崩溃。这是打印屏幕。

![普通画面](../Images/3347dfe65cd851a20039f709e3a5355d.png)

但我的另一台笔记本的分辨率为 1366x768。我正在这个笔记本上运行我的应用程序。哦！有一种失望。我的应用程序屏幕移动了。这是坏的打印屏幕。

![坏屏幕](../Images/e368ee27629396605c763cb73a118abc.png)

我不懂为什么。我能做些什么来纠正这个错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T18:37:35.113

它来自不同的 DPI 设置。您可以在表单加载中执行此操作：

```
// Get DPI width
float x = this.CreateGraphics().DpiX;

// If screen is width
if (x == 120)
    // Get big image from Resources
    this.BackgroundImage = Properties.Resources.BigImage;
else
    // Get small image from Resources
    this.BackgroundImage = Properties.Resources.SmallImage; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-14T20:34:44.437

我在使用 Windows 窗体表单时遇到了同样的问题。我所要做的就是将表单的 AutoScaleMode 设置从 Font 更改为 DPI，并将 FormBorderStylefor 设置从 Fixed 更改为 Sizable。现在 Windows 窗体窗体可以在桌面和笔记本电脑上正确显示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T21:19:28.020

您可以检查两个屏幕的 DPI 设置是否相同。您可以通过控制面板或显示选项来执行此操作（我记不清了，而且我面前没有 Windows 7）（您的高清笔记本电脑上可能有 120 DPI，而另一台笔记本电脑上可能有标准 96 ）。

在您的程序中，将表单设置为并重`AutoScaleMode`试`None`。

以下是帮助处理自动缩放表单的资源：
*[Windows 窗体中的自动缩放](http://msdn.microsoft.com/en-us/library/ms229605.aspx)*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-06T10:01:30.357

没有解决像素问题的直接解决方案。但我们可以自己做。首先，我们必须找到表单中可用的控件，然后我们必须调整它们的大小。

添加一个类“IdentifyControls.cs”，它标识表单的所有控件并返回应用程序中的控件列表。可以将一个类添加到应用程序中，从菜单栏中选择项目 -> 添加类。然后输入

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace FallingFlowers // Falling Flowers is the name of my project
{
    public static class IdentifyControl
    {
        public static List<Control> findControls(Control c)
        {
            List<Control> list = new List<Control>();
            foreach (Control control in c.Controls)
                list.Add(control);
            return list;
        }
    }
} 
```

然后将另一个类添加到您的应用程序中，例如“demo.cs”：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Drawing;
using System.IO;

namespace FallingFlowers // Falling Flowers is the name of my project
{
    public class demo
    {
        public static void relocate(Form fo, int ox, int oy)
        {
            List<Control> list = new List<Control>();
            list = IdentifyControl.findControls(fo);
            for (int i = 0; i < list.Count; i++)
                reposition(list[i], ox, oy);
        }

        public static void reposition(Control c, int ox, int oy)
        {
            int x, y;
            x = ((c.Location.X * Screen.PrimaryScreen.Bounds.Width) / ox);
            y = ((c.Location.Y * Screen.PrimaryScreen.Bounds.Height) / oy);
            c.Location = new Point(x, y);
            x = ((c.Width * Screen.PrimaryScreen.Bounds.Width) / ox);
            y = ((c.Height * Screen.PrimaryScreen.Bounds.Height) / oy);
            c.Width = x;
            c.Height = y;
            if (c is Label || c is Button)
                resizeText(c, ox, oy);
        }

        public static void resizeText(Control l, int ox, int oy)
        {
            float s;
            float txtsize = l.Font.Size;
            s = ((txtsize * Screen.PrimaryScreen.Bounds.Width) / ox)+1;
            l.Font = new Font(l.Font.Name, s,l.Font.Style);
        }

        public static void repositionForm(Form f, int ox, int oy)
        {
            int x, y;
            x = (f.Location.X * Screen.PrimaryScreen.Bounds.Width) / ox;
            y = (f.Location.Y * Screen.PrimaryScreen.Bounds.Width) / oy;
            f.Location = new Point(x, y);
        }
    }
} 
```

此类包含重新定位控件、调整文本大小和调整表单大小的方法。

在表单的加载事件中调用这些函数。

重新定位表单中的所有控件

```
demo.relocate(this, 1366, 768); 
```

这里 1366 和 768 是开发应用程序的原始分辨率。

要重新定位表单：

```
demo.repositionForm(this, 1366, 768); 
```

1366 和 768 是开发应用程序的原始分辨率。

对你来说，它将是`demo.relocate(this, 1920, 1080);`。

我希望这会对你有所帮助:-)...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T21:18:19.903

我同意屏幕设置的代码将有助于找出您的问题。

但似乎您正在设置图片以设置坐标点而不是相对于屏幕尺寸的点。您可能希望使坐标与屏幕大小成比例，以使显示始终看起来不错。

# jquery - 引导崩溃 总是导致滚动到顶部

> ID：13185563
> 
> 赞同：1
> 
> 时间：2012-11-01T21:13:33.433
> 
> 标签：jquery, twitter-bootstrap, collapse

任何人都可以告诉为什么引导崩溃会导致滚动条在触发崩溃时重置到顶部？

去测试：

转到： http: [//jsfiddle.net/D2RLR/140/](http://jsfiddle.net/D2RLR/140/)，向下滚动页面并单击任何按钮。您将被送回顶部，但根据文档，这不是默认行为。

HTML

```
<div class="list">
<div class="listheader">
  <a class="btn listname" href="#">Colors</a>
</div>
<ol class="things">
  <li><a href="#">White</a></li>
  <li><a href="#">Blue</a></li>
  <li><a href="#">Red</a></li>
  <li><a href="#">Green</a></li>
  <li><a href="#">Orange</a></li>
</ol>
</div>
<div class="list">
<div class="listheader">
  <a class="btn listname" href="#">Colors</a>
</div>
<ol class="things">
  <li><a href="#">White</a></li>
  <li><a href="#">Blue</a></li>
  <li><a href="#">Red</a></li>
  <li><a href="#">Green</a></li>
  <li><a href="#">Orange</a></li>
</ol>
</div>
<div class="list">
<div class="listheader">
  <a class="btn listname" href="#">Colors</a>
</div>
<ol class="things">
  <li><a href="#">White</a></li>
  <li><a href="#">Blue</a></li>
  <li><a href="#">Red</a></li>
  <li><a href="#">Green</a></li>
  <li><a href="#">Orange</a></li>
</ol>
</div>
<div class="list">
<div class="listheader">
  <a class="btn listname" href="#">Colors</a>
</div>
<ol class="things">
  <li><a href="#">White</a></li>
  <li><a href="#">Blue</a></li>
  <li><a href="#">Red</a></li>
  <li><a href="#">Green</a></li>
  <li><a href="#">Orange</a></li>
</ol>
</div>
<div class="list">
<div class="listheader">
  <a class="btn listname" href="#">Colors</a>
</div>
<ol class="things">
  <li><a href="#">White</a></li>
  <li><a href="#">Blue</a></li>
  <li><a href="#">Red</a></li>
  <li><a href="#">Green</a></li>
  <li><a href="#">Orange</a></li>
</ol>
</div>
<div class="list">
<div class="listheader">
  <a class="btn listname" href="#">Colors</a>
</div>
<ol class="things">
  <li><a href="#">White</a></li>
  <li><a href="#">Blue</a></li>
  <li><a href="#">Red</a></li>
  <li><a href="#">Green</a></li>
  <li><a href="#">Orange</a></li>
</ol>
</div>
<div class="list">
<div class="listheader">
  <a class="btn listname" href="#">Colors</a>
</div>
<ol class="things">
  <li><a href="#">White</a></li>
  <li><a href="#">Blue</a></li>
  <li><a href="#">Red</a></li>
  <li><a href="#">Green</a></li>
  <li><a href="#">Orange</a></li>
</ol>
</div>
<div class="list">
<div class="listheader">
  <a class="btn listname" href="#">Colors</a>
</div>
<ol class="things">
  <li><a href="#">White</a></li>
  <li><a href="#">Blue</a></li>
  <li><a href="#">Red</a></li>
  <li><a href="#">Green</a></li>
  <li><a href="#">Orange</a></li>
</ol>
</div> 
```

JS

```
/*$('.things').collapse("hide");*/

$(".listname:not(.disabled)").livequery('click', function(event) {
    $(this).parents('.list').find('.things').collapse("toggle");
    $("#listview, #thingview, #allview").removeClass('active');
}); 
```

（还包括实时查询）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:23:03.037

您需要添加：

```
event.preventDefault() 
```

..到你的脚本取消点击当前href（一个井号）

# r - R - XCMS 包错误

> ID：13185564
> 
> 赞同：1
> 
> 时间：2012-11-01T21:13:36.210
> 
> 标签：r, bioconductor

我有以下问题:

**.C("NetCDFOpen", as.character(filename), ncid = integer(1), status = integer(1), 错误：C 符号名称 "NetCDFOpen" 不在包 "xcms" 的 DLL 中**

你如何得到这个错误：

```
nc     <- xcms:::netCDFOpen(cdfFile)
ncData <- xcms:::netCDFRawData(nc)
xcms:::netCDFClose(nc) 
```

我不知道为什么这不起作用，尽管它应该。如需更多信息，请随时询问。免费的 .cdf 文件可以在*TargetSearchData*包中找到。

代码示例：

```
## The directory with the NetCDF GC-MS files
cdfpath <- file.path(.find.package("TargetSearchData"), "gc-ms-data")
cdfpath 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T23:08:06.057

正如你所暗示的那样，我认为它*不应该。*首先，您通过`:::`. 此外，如错误消息所述，`NetCDFOpen`未定义符号是`dll`/`so`文件。

使用来自 的标准输入功能`xcms`，工作顺利：

```
> library("xcms")
> cdfpath <- file.path(.find.package("TargetSearchData"), "gc-ms-data")
> cdfFile <- dir(cdfpath, full.names=TRUE)[1]
> xs <- xcmsSet(cdfFile)
7235eg04: 135:168 185:314 235:444 285:580 
> xr <- xcmsRaw(cdfFile) 
```

如果您真的想手动输入数据，您应该使用`mzR`包中的功能，这`xcms`取决于：

```
> openMSfile(cdfFile)
Mass Spectrometry file handle.
Filename:  /home/lgatto/R/x86_64-unknown-linux-gnu-library/2.16/TargetSearchData/gc-ms-data/7235eg04.cdf 
Number of scans:  4400 
```

最后，请注意始终提供 的输出`sessionInfo`，以确保您使用的是最新版本。就我而言：

```
> sessionInfo()
R Under development (unstable) (2012-10-23 r61007)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_GB.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_GB.UTF-8        LC_COLLATE=en_GB.UTF-8    
 [5] LC_MONETARY=en_GB.UTF-8    LC_MESSAGES=en_GB.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_GB.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] BiocInstaller_1.9.4 xcms_1.35.1         mzR_1.5.1          
[4] Rcpp_0.9.15        

loaded via a namespace (and not attached):
[1] Biobase_2.19.0     BiocGenerics_0.5.1 codetools_0.2-8    parallel_2.16.0   
[5] tools_2.16.0 
```

尽管如果您使用 R 和 Bioconductor 的稳定版本（当前`2.15.2`/ `2.11`），可能对您有所不同。

希望这可以帮助。

# java - 在 JUnit 4 中重用测试实现？

> ID：13185566
> 
> 赞同：13
> 
> 时间：2012-11-01T21:13:49.067
> 
> 标签：java, unit-testing, junit4, code-reuse

我有一个界面，例如：

```
public interface Thing {
  FrobResult frob(FrobInput); 
} 
```

以及我正在尝试测试的该接口的几个实现（例如`NormalThing`, `ImmutableThing`） 。`AsyncThing`

我的许多测试方法实际上都是为了确保接口正确实现，因此在每个`Thing`实现中都是重复的。在 JUnit 3 中，一个常见的解决方案是创建一个基类（扩展`TestCase`），然后由每个实现类对其进行子类化。但这是 JUnit 4 的正确方法吗？

（我相信）按偏好升序排列的可能替代方案：

1.  剪切'n'粘贴重复的测试方法。一点也不干，但我想测试中的担忧不如生产代码中的担忧。

2.  创建一个带有`@Test`方法的抽象类，并为每个实现测试类对其进行子类化。（在 JUnit 3 测试中很常见——在 JUnit 4 中这仍然是一个好方法吗？）

3.  将常用的测试方法放入一个辅助类中，并在每个实现中调用它。（组合而不是继承。）

做#3的最佳实践是什么？也许`@RunWith(Parameterized.class)`是每个实现都参数化的测试？还是有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T21:18:50.467

是的，**创建一个基类**，然后由 JUnit4 中的每个实现类对其进行子类化是正确的方法。

我更喜欢接口的基本测试类是**抽象**的，即你的“替代”2，因为我在模仿测试代码的生产代码的继承层次结构方面取得了很好的经验。因此，如果您有接口*`I`*和实现`S1`，`S2`并且`S3`，您将创建抽象测试类*`TestI`*和测试类`TestS1`，`TestS2`并且`TestS3`。

测试用例应该会说话，即**讲故事**。通过像往常一样仔细选择方法名称并仅使用干净的行为子类型，继承不会混淆这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:28:40.657

[我对 JUnit 和TestNG](http://testng.org)测试用例使用#2 方法。这是最方便和易于维护的。它也很容易上手（因为它原生于 OOD 以具有具有通用方法的基类）。对我来说，单元测试类与常规项目类没有什么不同……所以我确实应用了类似的设计考虑。

# delphi - 代码外观/运行良好，但未进行任何更改

> ID：13185572
> 
> 赞同：0
> 
> 时间：2012-11-01T21:14:36.060
> 
> 标签：delphi

我有以下代码，所有代码需要做的是检查车辆列表并删除每个注册中的空格，但在更改之前，它应该检查以确保修改后的注册不存在。以下代码是我正在使用的：

```
unit Main;
interface

uses
 Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
 Dialogs, Menus, cxLookAndFeelPainters, StdCtrls, cxButtons, Gauges, DB,
 DBTables, StrUtils;

type
TfrmMain = class(TForm)
  prgTotal: TGauge;
  btnStart: TcxButton;
  tblVeh: TTable;
  tblVehRegNo: TStringField;
  procedure btnStartClick(Sender: TObject);
private
  procedure OpenTable(pTable: TTable);
  procedure CloseTable(pTable: TTable; pPost: Boolean);
  { Private declarations }
public
  { Public declarations }
end;

var
  frmMain   : TfrmMain;
  lvRegLst  : TStringList;
  lvTblSize : Integer;
  lvOrigReg : String;
  lvNewReg  : String;
  lvTest    : integer;

implementation

{$R *.dfm}

procedure TfrmMain.btnStartClick(Sender: TObject);
begin
  btnStart.Enabled := False;
  lvRegLst  := TStringList.Create;

  // Open Tables
  tblVeh.Open;
  tblVeh.First;

  // Set progress
  prgTotal.MinValue := 0;
  lvTblSize         := tblVeh.RecordCount;
  prgTotal.MaxValue := tblVeh.RecordCount;
  btnStart.Caption  := 'Parsing Registration Numbers...';

  // Conversion
  while not tblVeh.Eof do
  begin
    lvRegLst.Add(tblVehRegNo.AsString);
    tblVeh.Next;
    prgTotal.AddProgress(1);
    Application.ProcessMessages;
  end;

  tblVeh.First;
  lvTest            := lvRegLst.Count;
  prgTotal.Progress := 0;
  btnStart.Caption  := 'Removing Spaces...';

  while not tblVeh.Eof do
  begin
    lvOrigReg := tblVehRegNo.AsString;
    lvNewReg  := AnsiReplaceStr(lvOrigReg,' ','');

    if lvRegLst.IndexOf(lvNewReg) = -1 then
    begin
      tblVeh.Edit;
      tblVehRegNo.AsString := lvNewReg;
      prgTotal.AddProgress(1);
      tblVeh.Post;
    end;

    tblVeh.Next;
    prgtotal.AddProgress(1);
    Application.ProcessMessages;
  end;

  // Close Tables
  tblVeh.Edit;
  tblVeh.Post;
  tblVeh.Close;

  btnStart.Caption := '&Start Conversion';
  btnStart.Enabled := True;
end; 
```

我已经浏览了代码，一切看起来都很好，它成功地更改了车辆的注册，但是当之后查看表格时，它没有进行任何更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:07:35.240

问题出在数据库本身，事实证明“RegNo”是唯一的关键字段，因此它是默认索引。由于我的转换正在运行，它正在更改注册，这移动了“光标”并跳过了一些注册。

为了进行这种转换，我添加了另一个索引，但是对他们的数据进行大约 50-60 次传递最终会整理出所有的注册。

谢谢大家的帮助。

# ruby - 如何将具有范围的数组转换为ruby中的单独数组

> ID：13185578
> 
> 赞同：1
> 
> 时间：2012-11-01T21:14:43.550
> 
> 标签：ruby, arrays, range

我有一些数组

```
>> a = ["a..c", "0..2"]
=> ["a..c", "0..2"] 
```

我需要将此数组转换为另一个数组

```
>> b = ("a".."c").to_a + (0..2).to_a
=> ["a", "b", "c", 0, 1, 2] 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:22:37.750

```
a.flat_map do |string_range| 
  from, to = string_range.split("..", 2)
  (from =~ /^\d+$/ ? (from.to_i..to.to_i) : (from..to)).to_a 
end 
#=> => ["a", "b", "c", 0, 1, 2] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T21:36:11.153

```
a = ["a..c", "0..2"]
b = a.flat_map{|str| Range.new(*str.split('..')).to_a} # => ["a", "b", "c", "0", "1", "2"]
p b.map!{|v| Integer(v) rescue v} # => ["a", "b", "c", 0, 1, 2] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T22:12:20.293

那这个呢？

```
a = ["a..c", "0..2"]

b = a.map { |e| Range.new( *(e).split('..') ).to_a }.flatten 
```

没有`flat_map`使用，所以它在所有版本上都一样

正如@steenslag 正确提到的那样，此版本不会转换为整数。

这是一个版本：

```
b = a.map do |e| 
  Range.new( *(e).split('..').map{ |c| c =~ /\A\d+\Z/ ? c.to_i : c } ).to_a 
end.flatten 
```

## [在这里](http://cibox.org/slivu/stackoverflow?lang=ruby&file=how-to-convert-array-with-ranges-in-to-alone-array-in-ruby.rb&run=true&versions=%2a#)看到它的作用

# visual-studio-2010 - 隐藏 Visual Studio 功能工具栏

> ID：13185588
> 
> 赞同：1
> 
> 时间：2012-11-01T21:15:08.603
> 
> 标签：visual-studio-2010

如何隐藏此[工具栏](http://s019.radikal.ru/i604/1211/76/45d2828ff407.png)？试图搜索，但我什至不知道如何正确命名它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:26:21.600

它隐藏得很好！:)

您可以将其隐藏在`Tools > Options > Text Editor > All Languages (Or a specific language) > General > Navigation Bar`

![隐藏导航栏](../Images/5963bd1db718d2e83f834a37012268c4.png)

# vim - 在 vim 宏中循环 ex 命令

> ID：13185589
> 
> 赞同：2
> 
> 时间：2012-11-01T21:15:09.853
> 
> 标签：vim

这可能是一个愚蠢的问题，但我想我也分享我的经验。

在录制宏时，我试图使用我之前通过向上箭头循环执行的 ex 命令。我的宏在某处中断，我假设这是因为宏正在记录击键而不一定是我执行的内容？

如果是这样，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T21:32:48.353

你是对的，宏是你输入的文字记录，所以你必须小心一点。使用 完成 Ex 命令`Tab`可能比使用 调用整个历史记录项效果更好`Up`。

您可以查看录制的宏的内容（例如，对于寄存器 q）：

```
:new
:put q 
```

然后，您甚至可以编辑宏，并通过`0"qy$`或更新它

```
:let @q = getline('.') 
```

# android - 上下文菜单。(Android, SherlockActionbar)

> ID：13185599
> 
> 赞同：1
> 
> 时间：2012-11-01T21:16:15.987
> 
> 标签：android, menu, listener, android-actionbar

我真的需要你的帮助。首先，我创建了一个从 SherlockListFragment 扩展的 Customfragment。我实现了自己的 Listviewrow 设计，因此我创建了自己的 BaseAdapter。列表视图行包含一个复选框和一些文本视图。我的目标是构建一个类似于 Gmail 应用程序的外观和交互方式的列表视图。这意味着如果用户单击复选框，则将激活操作上下文菜单。

所以这些是我的课程：

```
public class PurchasesOpenFragment extends SherlockListFragment implements
    OnItemClickListener, ListViewContextualMenuListener {

private ActionMode actionMode;
ArrayList<String> purchases = new ArrayList<String>();

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    purchases.add("Temp 1");
    purchases.add("Temp 5");
    purchases.add("Temp 2");
    purchases.add("Temp 3");
    purchases.add("Temp 4");
    purchases.add("Temp 6");
    purchases.add("Temp 7");

    PurchaseOpenAdapter purchaseAdapter = new PurchaseOpenAdapter(
            getActivity().getBaseContext(), purchases);
    setListAdapter(purchaseAdapter);

    purchaseAdapter.setOnListViewContextualMenuListener(this);

    return super.onCreateView(inflater, container, savedInstanceState);
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);

    getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    getListView().setOnItemClickListener(this);
}

@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    Toast toast = Toast.makeText(getActivity(),
            "Show details of element with id: " +arg3,Toast.LENGTH_SHORT);
    toast.show();
}

private final class ModeCallback implements ActionMode.Callback {

    @Override
    public boolean onCreateActionMode(ActionMode mode, Menu menu) {
        // Create the menu from the xml file
        MenuInflater inflater = getSherlockActivity()
                .getSupportMenuInflater();
        inflater.inflate(R.menu.context_test, menu);
        return true;
    }

    @Override
    public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
        // Here, you can checked selected items to adapt available actions
        return false;
    }

    @Override
    public void onDestroyActionMode(ActionMode mode) {
        // Destroying action mode, let's unselect all items
        for (int i = 0; i < getListView().getAdapter().getCount(); i++)
            getListView().setItemChecked(i, false);

        if (mode == actionMode) {
            actionMode = null;
        }
    }

    @Override
    public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
        long[] selected = getListView().getCheckedItemIds();

        Toast toast = Toast.makeText(getActivity(), "elements selected: "
                + selected.length, Toast.LENGTH_SHORT);
        toast.show();

        if (selected.length > 0) {
            for (long id : selected) {
                toast = Toast.makeText(getActivity(), "element selected with id: " + id,
                        Toast.LENGTH_SHORT);
                toast.show();
            }
        }
        mode.finish();
        return true;
    }
};

public void closeContextualMenu() {
    if (actionMode != null) {
        actionMode.finish();
        actionMode = null;
    }
}

/**
 * 
 */
@Override
public void onItemCheckBoxChanged(int position, boolean checkState) {
    Toast toast = Toast.makeText(getActivity(), "pos: " + position
            + " check: " + checkState, Toast.LENGTH_SHORT);
    toast.show();

    getListView().setItemChecked(position, checkState);

    int amountOfCheckedElements = getListView().getCheckedItemIds().length;

    if (amountOfCheckedElements > 0) {
        if (actionMode == null) {
            actionMode = getSherlockActivity().startActionMode(
                    new ModeCallback());
        }
        actionMode.setTitle(amountOfCheckedElements + " selected");
        return;
    } else {
        if (actionMode != null) {
            actionMode.finish();
        }
    }

} 
```

}

第二类：

公共类 PurchaseOpenAdapter 扩展 BaseAdapter 实现 OnClickListener {

```
private Context context;
private ArrayList<String> purchases;
private static LayoutInflater inflator;
private ListViewContextualMenuListener contextualListener;

public PurchaseOpenAdapter(Context context, ArrayList<String> purchases) {
    this.context = context;
    this.purchases = purchases;
    inflator = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

@Override
public int getCount() {
    return purchases.size();
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder holder;
    boolean checkBoxChanged = false;

    if (convertView == null) {
        convertView = inflator
                .inflate(R.layout.listview_row, parent, false);

        holder = new ViewHolder();
        holder.tvDate = (TextView) convertView
                .findViewById(R.id.listview_purchase_date);
        holder.tvTitle = (TextView) convertView
                .findViewById(R.id.listview_purchase_title);
        holder.tvSupermarket = (TextView) convertView
                .findViewById(R.id.listview_supermarket);
        holder.tvArticleAmount = (TextView) convertView
                .findViewById(R.id.listview_article_amount);
        holder.checkBox = (CheckBox) convertView
                .findViewById(R.id.listview_checkbox);

        holder.checkBox.setTag(position);
        holder.checkBox.setOnClickListener(this);

        convertView.setTag(holder);

    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    // TODO only temp data
    String temp = purchases.get(position);

    holder.tvDate.setText("01.01.2001");
    holder.tvTitle.setText(temp);
    holder.tvSupermarket.setText("Spar");
    holder.tvArticleAmount.setText("20 Articles");

    return convertView;
}

@Override
public boolean hasStableIds() {
    return true;
}

public void setOnListViewContextualMenuListener(
        ListViewContextualMenuListener l) {
    contextualListener = l;
}

@Override
public void onClick(View v) {
    CheckBox cb = (CheckBox) v;
    Toast toast = Toast
            .makeText(context, "Checkboxstate of element with positon: "
                    + v.getTag() + " check state: " + cb.isChecked(),
                    Toast.LENGTH_SHORT);
    toast.show();
    contextualListener.onItemCheckBoxChanged(Integer
            .parseInt(cb.getTag().toString()),
            cb.isChecked());
}

static class ViewHolder {
    TextView tvDate;
    TextView tvTitle;
    TextView tvSupermarket;
    TextView tvArticleAmount;
    CheckBox checkBox;
}

} 
```

正如您在此处看到的，我使用为 PurchaseOpenAdapter 中的复选框实现了 OnClickMethod。为了通知 PurchaseOpenFragment 复选框的状态发生了变化，我创建了自己的监听器（onItemCheckBoxChanged）。

所以现在我来描述我的问题：我单击复选框并出现上下文菜单但未选中复选框但如果我检查复选框的状态一切正常（id 和 isChecked() 是正确的）。

如果我关闭上下文菜单，则会选中复选框。

如果我再次单击同一个复选框，则 id 完全错误。如果我删除适配器类中的侦听器执行，复选框将正常工作。

希望有人可以帮助我。也许还有另一种方式来通知 listfragment 类。先感谢您！

由于我是新用户，我不允许发布图片，但如有必要，我可以通过邮件发送。

# java - 莫尔斯电码翻译器帮助从文件中读取

> ID：13185606
> 
> 赞同：1
> 
> 时间：2012-11-01T21:16:41.683
> 
> 标签：java

好的，所以我知道那里还有其他摩尔斯电码答案，但我看过很多，但没有一个有效。对于我的任务，我要将文件 Morse.txt 读入并行数组。相反，我只制作了两个文件，Morse.txt 和 Alphabet.txt，一个带有代码，另一个带有数字和字母。我应该使用我制作的一个类来完成翻译部分，当在 main 中调用它时，它应该翻译用户输入。我似乎无法让这个工作。我已经尝试了很多东西，在类或 getter 中使用 toString，但是当我放入我认为必须存在的循环时找不到返回（如果这有意义的话）..无论如何，这是我的代码主要的：

```
import java.util.*;
import java.util.Scanner;
import java.io.*;

public class redo
{
    public static void main(String[]args) throws IOException
    {
        String line2, file2 = "Morse.txt";
        String line, file = "Alphabet.txt";

        File openFile = new File(file);
        File openFile2 = new File(file2);

        Scanner inFile = new Scanner(openFile);
        Scanner inFile2 = new Scanner(openFile2);

        int index = 36;
        char[] charArray = new char[index]; 
        String[] code = new String[index];

        for(index = 0; index < 36; index++)
        {   
            while(inFile.hasNext())
            {
                    line = inFile.nextLine();
                    charArray = line.toCharArray();
                    //System.out.println(charArray[index]);
            }
        }       

        for(index = 0; index < 36; index++)
        {
            while(inFile2.hasNext())
            {
                code[index] = inFile2.nextLine();
                //System.out.println(code[index]);
            }
        }

        Scanner keyboard = new Scanner(System.in);

        String userInput;

        System.out.println("Enter something to translate: ");
        userInput= keyboard.nextLine();

        Translate inputTranslate = new Translate(userInput);

        inputTranslate.setInput(userInput);

        inputTranslate.setAlph(charArray);
        inputTranslate.setCode(code);

        inFile.close();
    }
} 
```

这是我的翻译课（有些东西被注释掉了）：

```
public class Translate
{
    String input;
    String code[];
    char alph[];

    public Translate(String input)
    {
        this.input = input;
    }

    public void setInput(String input)
    {
        this.input = input;
    }

    public void setAlph(char[] alph)
    {
        this.alph = alph;
    }

    public void setCode(String[] code)
    {
        this.code = code;
    }

    public String getInput()
    {
        return input;
    }

//  public String getTranslate()
//  {
//      for(int i = 0; i < input.length(); i++)
//      {
//          for(int index = 0; index < alph.length; index++)
//          {
//              if(input.charAt(i) == alph[index])
//              {
//                  String output = code[index];
//              }
//          }
//      }
//      return output;
//  }

} 
```

莫尔斯.txt：

.---- ..--- ...-- ....- ..... -.. --... ---..

## ----.

.- -... -.-。-... ...-. --. .... .. .---- -.-

## .-..

## -。

.--. --.- .-.

## ...

..- ...- .-- -..- -.-- --..

Alphabet.txt: 1 2 3 4 5 6 7 8 9 0 A B C D E F G H I J K L M N O P Q R S T U V W X Y Z

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:52:05.380

The problem is your return can't reach "output", you need to declare "output" above the loops and initialise it to output = null;

Even then it'll only send one string. So I did this;

```
public String getTranslate()
{
    String output = null;
    String[] translated = new String[input.length()];
    for(int i = 0; i < input.length(); i++)
    {
        for(int index = 0; index < alph.length; index++)
        {
            if(input.charAt(i) == alph[index])
            {
                output = code[index];
                translated[i] = output;
            }
        }
    }
    for (int j = 1; j < translated.length; j++) {
        output = translated[0].concat(translated[j]);
    }
    return output;
} 
```

This basically sticks all the codes together giving you your desired outcome.

# silverlight - Telerik Silverlight GridView 子列表

> ID：13185607
> 
> 赞同：0
> 
> 时间：2012-11-01T21:16:46.590
> 
> 标签：silverlight, gridview, telerik, radgridview

我并不完全精通 Telerik 甚至 silverlight，但我确实对某事有疑问。假设我有一个用于为帐户上传图像的网格视图。所以我登录，上传图像并将它们存储在一个对象中，并使用它们上传的帐户名称，然后将 ItemSource 绑定到该对象并显示它们上传的帐户。

所以假设我的名字是约翰，我管理 3 个帐户，熊、老虎和狼，我为其中 2 个上传图片。我登录，选择 Bears 并上传 3 张图片。它们与文件信息一起发送到数据库并存储在数据库中（如文件名、类型、上传用户、时间和日期等、帐户等），并且对象具有上传的图像列表以及帐户名称熊; 然后将 gridView.ItemSource 设置为对象，并在 gridView 中填充一行，它只显示“Bears”。然后我重复这个过程，但这次是针对 Wolves，第二次绑定 gridView 时，gridView 中有 2 条记录。“熊”和“狼”。每个对象旁边都有一个小+号，有没有可能当用户点击+号时，

我不确定模板如何与 silverlight 或 telerik 控件一起使用，但这是可能的，所以如果我上传了名为 Bears1.jpg、bears2.jpg 和 bears3.jpg 的文件，然后单击“Bears”项旁边的 + 号在gridview中，它下拉并显示3个文件名？

更多信息以防万一

我想基本上我想要做的是创建一个简单的 GridView，所以当上传图像时，在后台我有一个名为“Upload”的对象，该对象是为“Bears/Wolves ....etc”上传的，谁上传它，以及一个列表（ObservableCollection）或图像对象（具有文件名、图像类型、大小、上传日期等）。因此，当我完成上传后，我设置了 gridview.ItemSource = uploadObject，并且我希望从 uploadObject.Images 列表中生成子行/分层/子 gridView 行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:15:42.740

[http://www.telerik.com/help/silverlight/gridview-basic-hierarchies.html](http://www.telerik.com/help/silverlight/gridview-basic-hierarchies.html)并为项目使用绑定。

您的项目及其子项目必须实施 INotifyPropertyChanged。

除此之外，您可以使用 EntitySets 、 ObservableCollections 来触发集合更改，因为它们实现了 ICollectionChanged 接口。

如果您这样做，您将不会对 UI 感兴趣。您可以更改绑定到 UI 的模型项。然后你会看到你的 UI 自动更新了。

希望有帮助

# javascript - 具有多个键的嵌套运算符上的 D3.js 汇总

> ID：13185608
> 
> 赞同：11
> 
> 时间：2012-11-01T21:16:53.487
> 
> 标签：javascript, d3.js

我正在为时间报告应用程序开发 d3.js 可视化。我在包含项目时间报告（简化）的数组*实际中有行数据：*

```
[{  resource: "John Smith",
    reporting_period: "2012/04/1",
    project: "Java implementation",
    hours: 8} 
 ... }] 
```

我正在尝试使用*d3.nest*运算符按项目、资源和期间对项目实际值进行分层分组。一切都很好，但我找不到使用*nest.rollup()*运算符在分组的中间级别获取*小时*小计的方法。

 *我有类似的东西：

```
actuals_by_prj_rsrc_period = d3.nest()
        .key(function(d) { return d["project"]; })
        .key(function(d) { return d["resource"]; })
        .key(function(d) { return d["reporting_period"]; })
        .rollup(function(rows) {return {
            tot_hours:d3.sum(rows, function(d) {return d["hours"];}),
            actuals: rows
        };})
        .entries(actuals); 
```

但它仅在叶级别返回**tot_hours 。**关于如何仅使用*d3.nest*解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-07-21T22:59:22.890

来自文档：

> 嵌套汇总（函数）
> 
> 指定要应用于每组**叶** 元素的汇总函数。汇总函数的返回值将替换映射运算符返回的关联数组或条目运算符返回的每个条目的值属性中的**叶值数组。**

如您所见，汇总适用于叶元素。您可以通过将数据嵌套在多个级别来绕过此问题：

```
function nest(keys, data, rollupFunc) {
    var nst = d3.nest();
    keys.forEach(function(key) {
        nst.key(function(d) { return d[key]; });
    });
    if (rollupFunc) {
        nst.rollup(rollupFunc);
    }
    return nst.entries(data);
}

var rollupFunction = function(d) {
    return {
        "total_hours": d3.sum(d, function(dd) { return dd["hours"]})
    }
}

var rez1 = nest(["project", "resource"], actuals);
var rez2 = nest(["project"], actuals, rollupFunction);
var rez3 = nest(["project", "resource"], actuals, rollupFunction); 
```

但这对于较大的数据集非常低效。否则我会建议使用`nest()`函数来创建所有中间级别。然后，您可以使用自己的递归函数汇总总小时数。伪代码：

```
function aggregate(node) {
    if (node has property total_hours) {
        return total_hours
    }
    sum = 0
    foreach child in data.values {
        sum += aggregate(child)    
    }
    node.total_hours = sum
    return node.total_hours 
} 
```*

# opengl-es - 处理 OpenGL ES 2.0 驱动程序错误

> ID：13185609
> 
> 赞同：4
> 
> 时间：2012-11-01T21:16:57.347
> 
> 标签：opengl-es, android-ndk, opengl-es-2.0

我目前正在使用 NDK 将 3D C++ 游戏从 iOS 移植到 Android。渲染是用 GLES2 完成的。当我完成重写所有平台特定的东西并第一次运行完整游戏时，我注意到渲染错误 - 有时只有部分几何图形会渲染，有时巨大的三角形会在屏幕上闪烁，等等......

我在运行 4.1.2 的 Galaxy Nexus 上对其进行了测试。`glGetError()`什么也没返回。此外，该游戏在所有 iOS 设备上运行良好。我开始怀疑是驱动程序错误，在搜寻了几个小时后，我发现使用 VAO ( `GL_OES_vertex_array_object`) 导致了问题。相同的渲染器在没有 VAO 的情况下工作得很好，但在使用 VAO 时会产生垃圾。

我[在 Google Code 发现了这个错误报告](http://code.google.com/p/android/issues/detail?id=38170)。[我也在 IMG 论坛上](http://www.imgtec.com/forum/forum_posts.asp?TID=2324&PID=7221&SID=2220172e1z16a3a579c73bcf253z86443865741&title=vao-not-working-properly-in-samsung-galaxy-nexus#7221)看到了同样的报告，一位工作人员证实这确实是一个驱动程序错误。

所有这一切让我思考 - 我如何处理已确认的驱动程序错误的情况？我看到 2 个选项：

1.  不在 Android 设备上使用 VAO。
2.  将特定设备和驱动程序修订列入黑名单，并且不在这些设备上使用 VAO。

我不喜欢这两种选择。
选项 1 将惩罚所有拥有良好驱动程序的用户。VAO 确实提高了性能，我认为忽略它们是一件非常糟糕的事情，因为一个设备存在错误。
选项 2 很难做到正确。我无法测试每台 Android 设备是否有损坏的驱动程序，我希望列表会不断变化，因此很难跟上。

有什么建议么？有没有办法在运行时检测此类驱动程序错误而无需手动测试每个设备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T15:05:14.423

Android 上的 OpenGL ES 驱动程序中的错误是众所周知的事情，因此完全有可能在驱动程序中出现错误。特别是如果您使用一些高级（未经过充分测试）功能，如 GL 扩展。

在大型 Android 项目中，我们通常使用以下清单来解决这个问题：

1.  彻底测试和调试我们自己的代码，并根据 OpenGL 规范检查以确保我们没有做任何 API 滥用。
2.  谷歌解决问题（！！！）
3.  联系芯片组供应商（通常他们的网站上有一个表格可以提交开发人员的错误，但是一旦您成功提交了 2-3 个真正的错误，您就会知道可以提供帮助的人的直接电子邮件）并向他们展示您的代码。有时他们会在驱动程序中发现错误，有时他们会发现 API 滥用......
4.  如果该功能在几个设备上不起作用，只需创建一个解决方法或回退到传统的渲染路径。
5.  如果大多数顶级设备不支持该功能 - 只是不要使用它，一旦市场准备好，您就可以稍后添加它。

# ruby-on-rails - 如何在 Rails 视图中显示数组？

> ID：13185611
> 
> 赞同：7
> 
> 时间：2012-11-01T21:17:07.340
> 
> 标签：ruby-on-rails, arrays

我对 Rails 很陌生，但对 Ruby 有一些了解。如何在 Rails 的视图中显示数组的值？

我应该在哪里定义数组（模型或控制器）？另外，如何引用数组并在视图上的成员之间进行迭代？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-01T21:37:45.717

您可以像这样循环遍历它：

```
<% @array.each do |element| %>
  <li><%= element.whatever %></li>
<% end %> 
```

但使用部分更习惯用语。创建一个代表元素的文件。该文件应与其他 new/show/edit/etc 视图位于同一视图目录中，并应使用下划线命名。例如，如果我有一个食物列表作为数组并且我想在索引视图上显示该列表，我将创建一个名为“_food.html.erb”的部分，其中包含给定食物的标记：

```
<div>
  Name: <%= food.name %>
  Calories <%= food.calories %>
</div> 
```

然后在 index.html.erb 中，我会像这样渲染所有食物：

```
<%= render @foods %> 
```

默认情况下，Rails 会查找部分元素，并为数组中的每个元素呈现一个。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T21:36:03.983

说数组 = [1,2,3]。您可以通过调用内部 erb 标记来在视图中显示它，如下所示：

```
<%= array %> # [1,2,3] 
```

如果你想遍历它：

```
<% array.each do |a| %>
<%= a %> Mississippi. 
<% end %> # 1 Mississippi. 2 Mississippi 3 Mississippi. 
```

或使用辅助方法：

```
<%= a.to_sentence %> # 1, 2, and 3 
```

至于在哪里定义它们，这取决于。如果是静态列表，您可以在模型中定义它们，如下所示：

```
class Foo < ActiveRecord::Base
  BAR = [1,2,3]
end 
```

然后通过调用几乎可以在任何地方访问它们

```
Foo::BAR 
```

如果您只是该特定视图中的数组，则可以将其分配给控制器中的实例变量，如下所示：

```
class FooController < ApplicationController
  def index
    @array = [1,2,3]
  end
end 
```

然后像这样从视图中调用它：

```
<%= @array %> # [1,2,3] 
```

# jquery - JQuery-File-Upload 错误：未捕获类型错误：对象# has no method '_on' I'm trying to use the jQuery-File-Upload plugin. But I have a problem when actually trying to invoke the function. 问问题 问问题 2012-11-01T21:17:24.453 17436 次 This question shows research effort; it is useful and clear 17 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'm trying to use the jQuery-File-Upload plugin. But I have a problem when actually trying to invoke the function. Somewhere in my code, I'll call $(fubar).fileupload, and get Uncaught TypeError: Object # has no method '_on' jquery.fileupload.js:977\. Now this is happening after the page and all js scripts have been loaded. A) A similar error is discussed in the tool's boards. I tried the technique of including jquery.fileupload.js just after the dom loads. I tried the technique, with something like below. But when loading the page, I get another error Uncaught Error: Mismatched anonymous define() module: function ($) {... . B) On documentReady, I even tried dynamically generating and including the script tags, in head. But I get the same error Uncaught Error: Mismatched anonymous define() module: function ($) {... . I'm using jquery-file-upload with requirejs. I only bring that up I tested out the library and got it working with a plain jane static site. Just the basic js library files. So I don't know what's causing this. But it doesn't seem to be DOM related. Any help is appreciated. Assuming you're expecting only plain text (for a good record), and if you can make the assumption that you will only receive normal characters (i.e. keyboard-characters), you can take your input, convert to ASCII, then limit it to the characters that you want (by providing a list of allowable characters and filtering from that), and also ensure the string length is appropriate. Then build a new string with only your acceptable characters, and pass that string in. Once you're there, the single-quote is definitely your only concern. If you can make those requirements, then this should work for you. There'd be no way to inject funky Unicode characters, or overflow the SQL buffer, or do any of that other crazy stuff that people do to cause problems - you'd be in 100% control of the characters that go into the query. jqueryjquery-pluginsfile-uploadmultifile-uploader 4 3 回答 3 This answer is useful 25 好的，我刚刚想通了。我只需要包含jquery.fileupload.jsafterjquery.ui.widget.js和jquery.iframe-transport.js. 至少我知道以供将来参考。 于 2012-11-02T00:14:15.367 回答 This answer is useful 0 确保您运行的是 jQuery 和 jQuery UI 的互补版本，并且只有一个 jQuery 副本。我意识到我有运行在 1.10 的 jquery-rails 和一个本地 jQuery 1.11 文件，删除后者并升级前者就可以了。 于 2015-01-27T21:08:59.787 回答 This answer is useful -1 使用最新版本的蓝色小鬼，我只需将 jquery.ui.widget.js 更改为 jquery-ui-1.9.2.custom.min.js 并且效果很好。希望这有助于有人坚持这一点。 于 2013-11-11T10:28:50.890 回答 Related 1 sql-server - 如何确定 SSIS 转换中的错误行/列 4 c++ - C 和 C++ 中的 const、static、extern 及其组合 3 python - python列表的子集 1 textarea - angularjs相同的textarea来编辑多个元素 1 javascript - 是否有用于linkedin 的跟踪脚本 1 opengl - 同一着色器中的 GLSL 纹理映射和着色 3 sql - SQL 选择所有不同值存在于另一列中的位置 2 project-management - 什么是游戏开发中 Scrum 项目管理的好而简单的工具？ 2 phpexcel - Excel 2007 的背景颜色单元格始终为黑色 1 python - is_list_member 在 tweepy 中总是给出 false Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13185613
> 
> 赞同：17
> 
> 时间：
> 
> 标签：jquery, jquery-plugins, file-upload, multifile-uploader

I'm trying to use the [jQuery-File-Upload plugin](http://blueimp.github.com/jQuery-File-Upload/). But I have a problem when actually trying to invoke the function. Somewhere in my code, I'll call $(fubar).fileupload, and get `Uncaught TypeError: Object #<Object> has no method '_on' jquery.fileupload.js:977`. Now this is happening after the page and all js scripts have been loaded.

**A)** A [similar error is discussed](https://github.com/blueimp/jQuery-File-Upload/issues/1085) in the tool's boards. I tried the technique of including jquery.fileupload.js just after the dom loads. I tried the technique, with something like below.

 ````
 <script src='/static/presentation/js/lib/jquery.fileupload.js'></script>
  <script src='/static/presentation/js/lib/jquery.iframe-transport.js'></script>
</body> 
````  `But when loading the page, I get another error `Uncaught Error: Mismatched anonymous define() module: function ($) {...` .

**B)** On documentReady, I even tried dynamically generating and including the script tags, in head. But I get the same error `Uncaught Error: Mismatched anonymous define() module: function ($) {...` .

I'm using jquery-file-upload with requirejs. I only bring that up I tested out the library and got it working with a plain jane static site. Just the basic js library files. So I don't know what's causing this. But it doesn't seem to be DOM related.

Any help is appreciated.

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-02T00:14:15.367

好的，我刚刚想通了。我只需要包含`jquery.fileupload.js`after`jquery.ui.widget.js`和`jquery.iframe-transport.js`. 至少我知道以供将来参考。

```
<script src='/static/presentation/js/lib/jquery.ui.widget.js'></script>
<script src='/static/presentation/js/lib/jquery.iframe-transport.js'></script>
<script src='/static/presentation/js/lib/jquery.fileupload.js'></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T21:08:59.787

确保您运行的是 jQuery 和 jQuery UI 的互补版本，并且只有一个 jQuery 副本。我意识到我有运行在 1.10 的 jquery-rails 和一个本地 jQuery 1.11 文件，删除后者并升级前者就可以了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-11T10:28:50.890

使用最新版本的蓝色小鬼，我只需将 jquery.ui.widget.js 更改为 jquery-ui-1.9.2.custom.min.js 并且效果很好。希望这有助于有人坚持这一点。`

# grails - 使用预设值创建新条目

> ID：13185620
> 
> 赞同：0
> 
> 时间：2012-11-01T21:18:09.770
> 
> 标签：grails

解决了。我真的不知道我做了什么，但它奏效了。那些时刻之一...

我的域对象是“Actiune”。我想从另一个条目中添加一个具有 4 个预设字段的新条目，该条目具有给定的 id 到“createNewEtapa”方法。所以我查询那个条目（带有id）并获取它的值，在表单中预设它们并点击保存，但它不起作用。保存将不起作用。

我究竟做错了什么 ？我已经在这附近转了几个小时了。请再次帮助stackOverflow :)

如果您不想检查所有代码，请告诉我这是如何完成的或链接我一个示例:)

谢谢！

**这些是我的代码的相关部分**

**这是我的普惠制表格：**

```
<g:form action="save" enctype="multipart/form-data">

                <fieldset class="form">

                    <g:applyLayout name="form">
                        <tmpl:/templates/form />
                    </g:applyLayout>
                </fieldset>

                <fieldset class="buttons">

                    <g:submitButton name="create" class="save"
                        value="${message(code: 'default.button.adauga.label', default: 'Adauga')}" />
                    <g:actionSubmit name="create" class="save" action="savenew" value="Adauga2" />

                </fieldset>
            </g:form> 
```

**这是我的控制器：**

```
def create(Long id){
def actiuneInstance = Actiune.findById(id)
def c = Actiune.createCriteria()
def instanceList = c {
    eq("idActiune", actiuneInstance.idActiune)
    order("termenPornire", "asc")
}

params.idActiune = actiuneInstance.idActiune
params.tema = actiuneInstance.tema
params.firma = actiuneInstance.firma
params.user = User.findById(springSecurityService.currentUser.id)

[instance: new Actiune(params)]
}

def save() {
def actiuneInstance = new Actiune(params)
actiuneInstance.user = User.findById(springSecurityService.currentUser.id)
actiuneInstance.termenPornire = new Date()

def actiuneBD = Actiune.findByIdActiune(params.idActiune)
actiuneInstance.idActiune = actiuneBD.idActiune
actiuneInstance.tema = actiuneBD.tema
actiuneInstance.firma = actiuneBD.firma

print "in params  " + params
print "\\"
print "in save...       " + actiuneInstance.properties

   if (!actiuneInstance.save(flush: true)) {
        render(view: "create", model: [firInstance: actiuneInstance])
        return
    }
flash.message = message(code: 'default.created.message', args: [message(code: 'actiune.label', default: 'Actiune'), actiuneInstance.idActiune])
redirect(action: "completeShow", id: actiuneInstance.id)
} 
```

**这是 save() 方法中打印语句的输出** * *...* * 在 params [termenLimita_month:11, termenPornire_month:11, termenPornire_day:1, documentPath:, tema:Promotie A, termenLimita_day:1, _action_savenew:Adauga2, id:, observatii:uuu, termenLimita:date.struct, termenPornire_year:2012, etapa.id:1, etapa:[id:1], contact.id:1, contact:[id:1], termenPornire:date.struct ，公司：谷歌，idActiune：zt8h，termenLimita_year：2012，行动：保存，控制器：actiune] \ **....**

在保存... [用户：Flavian，termenPornire：Thu Nov 01 22:57:45 EET 2012，contact：null，documentPath：null，temaId：1，etapaId：null，firmaId：3，firma：Google，contactId：null , termenLimita:null, idActiune:zt8h, observatii:null, userId:null, etapa:null, tema:Promotie A]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:41:58.473

调用`actiuneInstance.validate()`然后查看[`actiuneInstance.errors`对象](http://grails.org/doc/latest/ref/Domain%20Classes/errors.html)以查看对象上任何验证错误的结果。

# mysql - Only getting one result from sub select in inner join in mysql

> ID：13185622
> 
> 赞同：0
> 
> 时间：2012-11-01T21:18:13.540
> 
> 标签：mysql, inner-join, subquery

Hi I have run into a dilemma, I am doing this query:

```
SELECT GROUP_CONCAT(DISTINCT(ca.category_name) SEPARATOR ', ') AS categories, pr.promo_name, pr.add_value_text, c.contract_id, c.cmeal_plan, c.cmin_markup, c.civa, c.tax_include, c.hotel_id, hi.hname, hi.hstars, im.image_file, pl.plan_name, ra.price
FROM contracts AS c
INNER JOIN hotel_info AS hi ON hi.hotel_id = c.hotel_id AND hi.destination_id = '6460'
INNER JOIN images AS im ON im.foreign_id = hi.hotel_id
INNER JOIN meal_plan AS pl ON pl.plan_code = c.cmeal_plan AND pl.lang = '1'
INNER JOIN hotel_categories AS hc ON hc.hotel_id = hi.hotel_id
INNER JOIN categories AS ca ON ca.category_code = hc.category_code AND ca.lang = '1'
LEFT JOIN 
                    (SELECT 
                              r.hotel_id, AVG(r.double) AS price
                    FROM
                              rates AS r ) AS ra
                    ON ra.hotel_id = hi.hotel_id
LEFT JOIN promotions AS pr ON pr.hotel_id = hi.hotel_id AND FIND_IN_SET(c.contract_id, pr.contract_id) > 0 AND pr.book_start <= '2012-11-01' AND pr.book_end >= '2012-11-02' AND travel_start <= '2012-11-23' AND travel_end >=  '2012-11-30' AND pr.lang = '1'
WHERE c.cstart <= '2012-11-01' AND c.cend >= '2012-11-01'
AND hi.status = '1'
AND im.type ='1'
GROUP BY hi.hotel_id 
```

I am getting all the desired results except for the sub select query.. each hotel has a price but it is only giving me back one result and the rest are all null. Is there an error in my query? If any additional information is needed please let me know and thank you in advance for any help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:22:02.663

您的子查询中缺少`GROUP BY`，因此 MySQL 只会返回一个值。如果您想要所有hotel_id，那么您需要`GROUP BY`该字段：

```
SELECT GROUP_CONCAT(DISTINCT(ca.category_name) SEPARATOR ', ') AS categories, 
    pr.promo_name, 
    pr.add_value_text, 
    c.contract_id, 
    c.cmeal_plan, 
    c.cmin_markup, 
    c.civa, 
    c.tax_include, 
    c.hotel_id, 
    hi.hname, 
    hi.hstars, 
    im.image_file, 
    pl.plan_name, 
    ra.price
FROM contracts AS c
INNER JOIN hotel_info AS hi 
    ON hi.hotel_id = c.hotel_id 
    AND hi.destination_id = '6460'
INNER JOIN images AS im 
    ON im.foreign_id = hi.hotel_id
INNER JOIN meal_plan AS pl 
    ON pl.plan_code = c.cmeal_plan 
    AND pl.lang = '1'
INNER JOIN hotel_categories AS hc 
    ON hc.hotel_id = hi.hotel_id
INNER JOIN categories AS ca 
    ON ca.category_code = hc.category_code 
    AND ca.lang = '1'
LEFT JOIN 
(
    SELECT r.hotel_id, AVG(r.double) AS price
    FROM rates AS r 
    GROUP BY r.hotel_id  <-- add a GROUP BY hotel_id then you will get avg() for each hotel
) AS ra
    ON ra.hotel_id = hi.hotel_id
LEFT JOIN promotions AS pr 
    ON pr.hotel_id = hi.hotel_id 
    AND FIND_IN_SET(c.contract_id, pr.contract_id) > 0 
    AND pr.book_start <= '2012-11-01' 
    AND pr.book_end >= '2012-11-02' 
    AND travel_start <= '2012-11-23' 
    AND travel_end >=  '2012-11-30' 
    AND pr.lang = '1'
WHERE c.cstart <= '2012-11-01' 
    AND c.cend >= '2012-11-01'
    AND hi.status = '1'
    AND im.type ='1'
GROUP BY hi.hotel_id 
```

# css - 添加底部滚动条的奇怪的屏幕间隙

> ID：13185623
> 
> 赞同：0
> 
> 时间：2012-11-01T21:18:14.583
> 
> 标签：css, browser, width, screen-size

这很奇怪，我很确定这与 CSS 中的某种宽度问题有关，但是当您开始重新调整浏览器的大小时，它会在右侧添加这个奇怪的间隙（不在屏幕上）。

[这是有问题的页面](http://test.snowflakesoftware.com/markets/inspire/)

我已经尝试过浏览 CSS，但我找不到任何东西，我一直在一遍又一遍地看它，但它并没有对我造成影响。

该网站由 WordPress 驱动，因此大部分 CSS 位于**theme.css**和**lessframework.css**中。侧边栏是 202px 的固定宽度，内容在它旁边，根据屏幕尺寸，它有不同的宽度尺寸。我很确定这与此有关，但我只需要第二个意见/眼睛！

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T03:09:42.580

我希望我不会让一个老问题复活，但我发现 Firefox 的开发人员工具在即时确定实际显示的元素方面非常宝贵。

最简单的方法是右键单击相关区域，然后选择最后一个选项“检查元素”。这将打开源代码和 CSS 控制台并显示元素当前 id/class 和样式。

为了更好，一旦控制台打开，单击控制台栏右侧的 3D 框图标，让 Firefox 以 3D 呈现页面，这将允许您旋转和放大受影响的区域。

# akka - Akka 演员选择

> ID：13185626
> 
> 赞同：2
> 
> 时间：2012-11-01T21:18:20.223
> 
> 标签：akka

我有以下几行：

```
val c = context.actorSelection("akka://ActorSystem/user/AAA/BBB/*")
c ! MessageNotification(message) 
```

但消息似乎没有在任何地方传递。

同时，这有效：

```
val c = context.actorFor("akka://ActorSystem/user/AAA/BBB/CCC")
c ! MessageNotification(message) 
```

为什么我的 actorSelection 不能解决任何问题，只有一个 ActorRef 可以解决和工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:06:50.700

actorFor 将消息发送到将接收您的消息的特定actor系统，至于actorSelection，它将消息发送到路径中的所有actor系统。

# android - 每个 TableRow 中有 2 个 ImageView 的 Android TableLayout

> ID：13185629
> 
> 赞同：0
> 
> 时间：2012-11-01T21:18:41.083
> 
> 标签：android, xml, imageview

同事们，你能建议我在 ImageViews 的属性中设置什么来获得这样的屏幕吗？

![在此处输入图像描述](../Images/3467fd8db5bc0dc2259fda0c1a44a833.png)

在我庞大的 Android 应用程序中此 Activity 的 XML 代码： ~~我将其发布在此处以避免**您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的情况。**..... Lorem ipsum dolor sit amet，consectetur adipisicing elit，sed do eiusmod tempor incididunt ut labore et dolore magna aliqua。Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat。Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur。Exceptioneur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est labourum。~~

```
 <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="#D63B40"
                android:layout_weight="0.15"
                 >

                 <ImageView
                android:id="@+id/img1"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:src="@drawable/n"
                android:background="@null"
                />

                 <ImageView
                android:id="@+id/r1"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:src="@drawable/n"
                android:background="@null"
                />

            </TableRow>

            <TableRow
                android:id="@+id/tableRow2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="#88CB5B"
                android:layout_weight="0.14" >

                 <ImageView
                android:id="@+id/img2"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:src="@drawable/n"
                android:background="@null"
                />

                 <ImageView
                android:id="@+id/r2"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:src="@drawable/n"
                android:background="@null"
                />

            </TableRow>

            <TableRow
                android:id="@+id/tableRow3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="#E8D751"
                android:layout_weight="0.14" >

                <ImageView
                android:id="@+id/3"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:src="@drawable/n"
                android:background="@null"
                />

                 <ImageView
                android:id="@+id/r3"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:src="@drawable/n"
                android:background="@null"
                />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="#9554B6"
                android:layout_weight="0.14" >

            <ImageView
                android:id="@+id/4"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:src="@drawable/n"
                android:background="@null"
                />

                 <ImageView
                android:id="@+id/r4"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:src="@drawable/n"
                android:background="@null"
                />

            </TableRow>

    </TableLayout> 
```

图像 1、2、3、4 和 a、b、c、d 是 ImageView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T04:55:49.620

使用**列表视图**，然后使用**自定义适配器**，您可以将两个图像（在您的条件下）添加到列表中。此链接将帮助[您](http://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter)使用适配器

# haskell - 是否可以在 lambda 表达式中使用无可辩驳的波浪号 (`~`) 模式？

> ID：13185632
> 
> 赞同：24
> 
> 时间：2012-11-01T21:19:02.633
> 
> 标签：haskell, pattern-matching

`parse error on input \~`如果我尝试在 lambda 表达式的模式上加上波浪号，GHC 会给我一个，就像我可以对命名函数做的那样

```
let step = \~(x,s) -> run (f x) s  -- Parse Error

let step ~(x, s) = run (f x) s -- Works fine 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-01T21:19:02.633

您必须在 lambda 和波浪号之间添加一个空格

```
\ ~(x,s) -> run (f x) s 
```

造成混淆的原因是`\`和`~`都是用户定义的运算符的有效字符，因此`\~`被解析为一个，而不是被解析为 lambda 表达式的开头：

```
-- Defining a custom \~ operator is allowed:
let a \~ b = {- ... -} 
```

# perl - 模板工具包，测试嵌套循环中的最后一次迭代

> ID：13185635
> 
> 赞同：7
> 
> 时间：2012-11-01T21:19:28.530
> 
> 标签：perl, template-toolkit

我正在使用模板工具包来形成一个简单的 JSON 响应（参见下面的代码）。除了最后一个之外，我需要在响应的所有元素之后加上一个逗号。

我相信我需要使用 TTs 迭代器，但是我没有做对。
使用此代码，逗号仍会打印在最后一个元素的末尾。

问题在于包含的部分

```
[% UNLESS outer.last && loop.last %],[% END %] 
```

这应该添加一个逗号，除非外部和内部循环在它们的最后一次迭代中。

非常感谢任何有关我出错的帮助。

```
{ "success": true, "filesdata": [
[%~ USE outer = iterator(objects); FOREACH object IN outer;
    FOREACH rep IN object.reps;
        IF rep.rep == reptype %]
{ "id":"[% object.id | xml %]", "url":"[% rep.src | xml %]", "story":"[% object.story | xml %]" }[% UNLESS outer.last && loop.last %],[% END %]
        [%~ END;
    END;
END ~%]
] } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T11:09:40.047

这对我有用：

```
[% IF loop.last %]}[% ELSE %]},[% END %] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T21:44:39.493

您是否尝试过使用 join v 方法？您可以创建一个列表并用逗号加入它：

```
[% items.join(', ') %] 
```

话虽如此，您可能还想查看[Template::Plugin::SimpleJson](https://metacpan.org/module/Template%3a%3aPlugin%3a%3aSimpleJson)。您可以创建一个哈希，然后将其传递给此插件。无论您决定这样做，您可能不想担心在实际模板文件中引用您的 JSON，并且使用类似的东西可以为您节省一些心痛。

还可以选择在模板本身之外创建 JSON，但这超出了您的问题范围。

# javascript - Craftyjs 动画未正确更改

> ID：13185644
> 
> 赞同：1
> 
> 时间：2012-11-01T21:20:41.947
> 
> 标签：javascript, craftyjs

我正在使用[http://craftyjs.com/](http://craftyjs.com/)进行 Github Game Off，但我在动画方面遇到了一些问题。我第一次开始动画时（当我在主场景中初始化玩家实体时）它起作用了。但是当我通过我的 CustomControls 组件设置动画时，它只播放动画的第一帧。

我相信问题出在 CustomControls 组件中，所以这里是代码： [https ://gist.github.com/3992392](https://gist.github.com/3992392)

如果你想克隆它并测试，这里是所有代码：[https ://github.com/RylandAlmanza/dragons-suck](https://github.com/RylandAlmanza/dragons-suck)

如果有人知道问题可能是什么，请告诉我。谢谢！

编辑：这是一个最小的 jsfiddle 示例，除了运动和应该是动画之外的所有内容：http: [//jsfiddle.net/x7FDF/](http://jsfiddle.net/x7FDF/)

```
var SPRITE_SIZE = 32;
Crafty.init();
Crafty.canvas.init();
Crafty.sprite(SPRITE_SIZE, "http://i.imgur.com/9sN9V.png", {
    player_east_1: [0, 0],
    player_east_2: [1, 0],
    player_east_3: [2, 0],
    player_west_1: [0, 1],
    player_west_2: [1, 1],
    player_west_3: [2, 1],
    player_south_1: [0, 2],
    player_south_2: [1, 2],
    player_south_3: [2, 2],
    player_north_1: [0, 3],
    player_north_2: [1, 3],
    player_north_3: [2, 3]
});

Crafty.scene("loading", function() {
    Crafty.background("#000");
    Crafty.e("2D, DOM, Text")
    .attr({
        w: 100,
        h: 20,
        x: 150,
        y: 120
    })
    .text("Loading")
    .css({"text-align": "center"});
    Crafty.load(["http://i.imgur.com/9sN9V.png"], function() {
        Crafty.scene("main");
    });
});

Crafty.scene("main", function() {
    Crafty.background("#000");

    var player = Crafty.e("2D, DOM, SpriteAnimation, player_east_1, Collision, TileCollision, CustomControls")
    .attr({
        x: 0,
        y: 0,
        x_velocity: 0,
        y_velocity: 0,
        w: SPRITE_SIZE,
        h: SPRITE_SIZE
    })
    .animate("stand_east", 0, 0, 0)
    .animate("stand_west", 0, 1, 0)
    .animate("stand_south", 0, 2, 0)
    .animate("stand_north", 0, 3, 0)
    .animate("walk_east", [[0, 0], [1, 0], [0, 0], [2, 0]])
    .animate("walk_west", [[0, 1], [1, 1], [0, 1], [2, 1]])
    .animate("walk_south", [[0, 2], [1, 2], [0, 2], [2, 2]])
    .animate("walk_north", [[0, 3], [1, 3], [0, 3], [2, 3]])
    .animate("stand_east", 45, -1)
    .CustomControls();
});

Crafty.c("CustomControls", {
    CustomControls: function() {
        this.bind("EnterFrame", function() {
            var up = Crafty.keydown[Crafty.keys.UP_ARROW];
            var down = Crafty.keydown[Crafty.keys.DOWN_ARROW];
            var left = Crafty.keydown[Crafty.keys.LEFT_ARROW];
            var right = Crafty.keydown[Crafty.keys.RIGHT_ARROW];
            if (up) {
                this.y_velocity = -2;
                if (!this.isPlaying("walk_north")) {
                    this.stop().animate("walk_north", 45, -1);
                }
            }
            if (down) {
                this.y_velocity = 2;
                if (!this.isPlaying("walk_south")) {
                    this.stop().animate("walk_south", 45, -1);
                }
            }
            if (left) {
                this.x_velocity = -2;
                if (!this.isPlaying("walk_west")) {
                    this.stop().animate("walk_west", 45, -1);
                }
            }
            if (right) {
                this.x_velocity = 2;
                if (!this.isPlaying("walk_east")) {
                    this.stop().animate("walk_east", 45, -1);
                }
            }
            if (!left && !right) {
                this.x_velocity = 0;
                this.stop();
            }
            if (!up && !down) {
                this.y_velocity = 0;
                this.stop();
            }
            this.x += this.x_velocity;
            this.y += this.y_velocity;
        });
    }
});

Crafty.scene("loading");​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:08:06.650

最后`"enterFrame"`你有：

```
if (!left && !right) {
    this.x_velocity = 0;
    this.stop();
}
if (!up && !down) {
    this.y_velocity = 0;
    this.stop();
} 
```

因此，动画*总是*停止，然后在下一帧从头开始重新开始。例如，当您的玩家向下移动时，`(!left && !right)`评估为 true 并停止动画。

*一种解决方案是仅*当所有 4 个方向都为假时才停止动画。

```
if (!left && !right) {
    this.x_velocity = 0;
}
if (!up && !down) {
    this.y_velocity = 0;
}
if (!(up | down | left | right)) {
    this.stop();
} 
```

# junit - 错误编译带有期望异常的junit测试

> ID：13185647
> 
> 赞同：1
> 
> 时间：2012-11-01T21:20:53.650
> 
> 标签：junit, junit4

我很难使用 junit 4 的预期注释来查看异常。我无法编译代码，因为有一个未处理的异常。

这是一个创建这种情况的简单示例：

```
 import static org.junit.Assert.*;
import java.io.UnsupportedEncodingException;
import org.junit.Test;

public class Simple {
    @Test(expected=UnsupportedEncodingException.class)
    public void simpleTest(){
        String a = "";
        a.getBytes("UTF-123");
    }
} 

```

我收到一个编译错误，提示“未处理的异常类型 UnsupportedEncodingException”

这是有道理的，我可以通过声明 simpleTest 抛出 UnsupportedEncodingException 来解决这个问题，但是我在网上看到了很多人们不这样做的例子（在编写大量测试用例时这会很好）。

有没有办法配置测试用例，这样我就不必明确声明将抛出哪些异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:30:57.580

据我所知， UnsupportedEncodingException 是一个检查异常。因此，编译器会期望一个已检查异常的 throws 子句。我猜你的代码会起作用，如果说你尝试了一个未经检查的异常，比如 ArithmeticException。

# php - 获取特定组内的用户列表

> ID：13185650
> 
> 赞同：0
> 
> 时间：2012-11-01T21:21:12.710
> 
> 标签：php, ldap

我正在尝试使用 PHP 和 LDAP 查询特定活动目录组中的用户列表。

我正在建立连接并正常绑定：

```
$connection = ldap_connect($hostname);
$bind = ldap_bind($connection, $username, $password); 
```

对于此示例，我需要从中获取用户列表的组的名称是“测试组”。还有一个“LDAPTest”的OU。

我已经尝试了以下所有方法，以及许多其他方法，但我只是找不到在“测试组”组中获取所有用户的方法，该组已添加了四个用户。

```
$result = ldap_search($connection,"OU=LDAPTest,DC=example,DC=net", "(CN=*)");
$result = ldap_search($connection,"OU=LDAPTest,DC=example,DC=net", "memberOf=Test Group");
$result = ldap_search($connection,"memberOf=Test Group,DC=example,DC=net", "CN=*");
$result = ldap_search($connection,"memberOf=Test Group,DC=example,DC=net", "CN=*"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:23:39.570

假设您的测试组在 LDAPTest OU 中，您可以通过以下方式获取组记录（包括其成员）：

```
$search = ldap_search($connection, "OU=LDAPTest,DC=example,DC=net", "(&(objectClass=group)(cn=Test Group))"); 
```

请注意，与您执行绑定的用户需要有权访问该组（并查看其成员）。

# windows - 从批处理文件中杀死 Windows 16 位进程

> ID：13185655
> 
> 赞同：3
> 
> 时间：2012-11-01T21:21:48.573
> 
> 标签：windows, batch-file, kill, kill-process, child-process

我有这种情况，一台装有 Windows XP 的旧计算机正在作为系统的服务器工作，并且当出现问题时有可能向我发送警报。但是，我们使用的这个服务器程序确实有问题，并且在某些特定时刻可能会停止关心警报。然后这些警报堆积起来，并在程序最终重新启动时立即全部发送。这使得这些警报毫无用处，因为当您重新启动程序时，您已经知道系统出了问题。

我针对的解决方案是 Windows 任务计划程序可以每天晚上在一个简单的批处理文件的帮助下杀死然后重新启动程序。不过，我似乎找不到杀死该进程的方法，因为该程序的进程作为 Windows 进程 csrss.exe 的子进程（子进程）运行。

如果我打开任务管理器，我可以看到该进程并杀死它，但该命令`tasklist`只显示父进程 csrss.exe，我需要 PID 来杀死它`taskkill`。是的，`tasklist`确实有`/t`杀死子进程的额外参数，但我需要一种方法来只杀死子进程，并让 Windows csrss.exe 运行显然必不可少。

所以我的问题是：有谁知道如何在批处理文件的帮助下只杀死一个子进程？

这当然可以通过为此编写一个特定的程序来完成，然后让批处理文件使用该程序，但我希望能快速修复。

到目前为止，我有：

```
TASKLIST /FI "IMAGENAME eq program.exe" 2>NUL | FIND /I /N "program.exe">NUL
IF NOT %ERRORLEVEL%==0 GOTO :restart
TASKKILL /FI "IMAGENAME eq program.exe" /F /T

:restart
START /D "C:\path\" program.exe 
```

编辑：

我刚刚意识到一个进程的图像名称在任务管理器中没有缩进，因为它是另一个进程的子进程，而是因为它是一个 16 位进程（多么直观）。所以，它是一个 16 位进程，现在的问题是你如何找到一个 PID，或者以其他方式杀死一个 16 位进程。`Tasklist`，正如我所提到的，没有显示它，也没有显示`pslist`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:51:06.493

我想我设法解决了我的问题，我把这个留给任何可能遇到类似问题的人。

我试图杀死进程 ntvdm.exe ，因为它可以通过`tasklist`and “访问” `taskkill`，并且因为谷歌搜索显示它是 Windows 的虚拟机，可以让 16 位程序在 32 位系统上运行。我首先尝试在不强制的情况下杀死它，但这只杀死了 ntvdm.exe，而不是 16 位进程本身。然而，强制它似乎工作得很好，尽管我不推荐这个解决方案（出于明显的原因）在有多个基本 16 位进程运行的任何地方。

我最终使用的命令是：

```
TASKKILL /FI "IMAGENAME eq ntvdm.exe" /F /T 
```

# asp.net - (ModalPopupExtender) 两个具有相同id的组件不能添加到应用程序中

> ID：13185656
> 
> 赞同：6
> 
> 时间：2012-11-01T21:21:51.190
> 
> 标签：asp.net, .net, user-controls, ajaxcontroltoolkit

我有一个用户控件，每当用户单击按钮时，我都会在页面上添加该控件。以下是添加控件的代码。

```
protected void Page_Init(object sender, EventArgs e)
{
    if (Session["ControlCount"] != null)
    {
        for (int i = 1; i <= (int)Session["ControlCount"]; i++)
        {
            Control myUserControl = LoadControl("~/Controls/MessageControl.ascx");
            divMessageControl.Controls.Add(myUserControl);
        }
    }
}

protected void Page_Load(object sender, EventArgs e)
{
}

protected void btnExpand_Click(object sender, EventArgs e)
{
    int count = 0;
    if (Session["ControlCount"] != null)
    {
        count = Convert.ToInt32(Session["ControlCount"]);
    }

    Control myUserControl = (Control)Page.LoadControl("~/Controls/MessageControl.ascx");
    divMessageControl.Controls.Add(myUserControl);
    Session["ControlCount"] = count + 1;
} 
```

此控件具有 ModalPopupExtender 弹出窗口。当我在页面上添加第二个控件时，它会在内部引发一个错误，我可以在 firebug 中看到该错误。如何使这个弹出 id 独一无二？

```
<asp:ModalPopupExtender ID="mpeReply" BehaviorID="mpeReply" runat="server" TargetControlID="btnReply"
    PopupControlID="pnlReply" BackgroundCssClass="ModalPopupBG1">
</asp:ModalPopupExtender> 
```

> Sys.InvalidOperationException：Sys.InvalidOperationException：无法将具有相同 id 'mpeReply' 的两个组件添加到应用程序中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-22T14:22:28.583

我已经找到了解决这个问题的方法，正如很多人所说的那样，简单的解决方案是您的 HTML 格式不正确 - 元素有一个额外的或缺少的结束标记。确保您的所有标签都正确关闭并且问题应该消失 - 整天都在努力解决这个问题！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-15T18:29:41.080

我使用此代码解决了我的问题，请注意 ScriptMode 设置为**“Release”**

```
<AjaxControlToolkit:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server"  ScriptMode="Release">
</AjaxControlToolkit:ToolkitScriptManager> 
```

我从这个链接中看到了类似的答案：http: [//www.advancesharp.com/questions/17658/sys-invalidoperationexception-two-components-with-the-same-id-xxx-can-t-be-added-to -应用程序](http://www.advancesharp.com/questions/17658/sys-invalidoperationexception-two-components-with-the-same-id-xxx-can-t-be-added-to-the-application)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-02T05:45:13.103

从扩展器中删除 BehaviorID 属性

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-23T16:12:21.860

类似的问题在这里。我的解决方案是在添加 ScriptMode="Release" 属性后将脚本管理器从快捷方式关闭标记更改为完整关闭标记：

改变： `<asp:ScriptManager ID="ScriptManager1" ScriptMode="Release" runat="server" />`

到： `<asp:ScriptManager ID="ScriptManager1" ScriptMode="Release" runat="server></asp:ScriptManager>`

# bash - 期望在 bash 脚本中 × 16172

> ID：13185658
> 
> 赞同：3
> 
> 时间：2012-11-01T21:22:03.707
> 
> 标签：bash

我尝试在 bash 中设置一个期望脚本。

```
#!/bin/bash

/usr/bin/expect <<- EOD

set router 192.168.0.251
set user admin
set pass test  
set timeout 1000  
set filesave [exec date +%m-%d-%Y]  

spawn telnet $router
send "\n"  
expect "Username:"
send "$user\n"
expect "Password:"  
send "$pass\n"  
expect ">"  
send "en\n"  
expect "Password:"  
send "$pass\n"  

send "term len 0\n"  
log_file $router--$filesave.cfg
send "show running-config\n"  
expect "end\r"  
send "\n"  
log_file
send "exit\n"  
EOD

cat /Users/test/Desktop/python/$router--$filesave.cfg | grep end
exit 0 
```

我刚得到这个输出

```
./script2 
spawn telnet

telnet> telnet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:57:03.803

问题是 bash 正在解释所有`$variables`之前期望看到的脚本。因此，您只是`telnet`在没有给出主机名的情况下生成。改变：

```
/usr/bin/expect <<- EOD 
```

至：

```
/usr/bin/expect <<- 'EOD' 
```

这具有单引用整个此处文档的效果。
[http://www.gnu.org/software/bash/manual/bashref.html#Here-Documents](http://www.gnu.org/software/bash/manual/bashref.html#Here-Documents)

另请注意，下一个 bash 命令 ( `cat /Users/...`) 依赖于 Expect 中定义的变量——它们没有在 bash 中定义。尝试这个

```
#!/bin/bash

export router=192.168.0.251
export filesave=$(date +%m-%d-%Y)

/usr/bin/expect <<- 'EOD'

set router $env(router)
set filesave $env(filesave)
# the rest stays the same 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:25:04.677

尝试改变你的shebang：

```
#!/bin/bash 
```

至

```
#!/bin/expect 
```

并删除：

```
/usr/bin/expect <<- EOD 
```

看看这是否有效。

更新：如果您需要将期望作为 bash 脚本的一部分运行，请使用期望 shebang 将期望代码封装在单独的脚本中并从您的 bash 脚本中获取它，或者按照以下示例对其进行编码：

```
expect_sh=$(expect -c "
spawn ssh $login@$IP
expect \"password:\"
send \"$password\r\"
expect \"#\"
send \"cd $dest_dir\r\"
expect \"#\"
send \"chmod +x $server_side_script $other_script\r\"
expect \"#\"
send \"./$device_side_script\r\"
expect \"#\"
send \"cat $deploy_count\r\" 
expect \"#\"
send \"exit\r\"
")

echo "$expect_sh" 
```

# sharepoint - 如何使顶级文档库对子站点可见

> ID：13185668
> 
> 赞同：2
> 
> 时间：2012-11-01T21:22:46.643
> 
> 标签：sharepoint, sharepoint-2010

我想问一下您是否想出了一个解决方案，允许子站点访问父级别的集中式文档库。我仍然在尝试无济于事。我已经尝试过文档库模板、视图、文档中心，并且我拥有 OOTB 的最佳方法是子站点页面上的页面视图 Web 部件显示来自父库的视图。（顺便删除功能区，将 ?IsDlg=1 附加到 url 并隐藏功能区）很酷的提示。假设您是否会给出一个解决方案，该解决方案将允许将一组文档保留在文档中心并在子站点中显示它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:42:04.843

没有这种硬编码还有另一种选择。您可以打开文档库的任何视图，如前面提到的 AllItems.aspx，例如使用 SharePoint Designer。在高级模式下打开它进行编辑（在 SP Designer 中单击鼠标右键时有选项）。然后只需将鼠标光标指向 Web 部件内并在功能区 Web 部件中选择，添加到站点库，参见[图片](http://gvaro.files.wordpress.com/2010/04/image5b135d308e8d8b.png)。填写新 Web 部件的名称。就是这样，现在您可以通过用户界面或通过 SP 设计器通过单击任何页面上功能区中的“插入”、“Web 部件”从 Web 部件库的任何网站上的任何页面上添加此 Web 部件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T22:08:36.367

您可以通过编辑 AllItems.aspx（或其他视图页面）并刮掉 WebPartPages:ListViewWebPart 并将其粘贴到子站点上的页面中来做到这一点。

这会给您一个错误“列表不退出您选择的页面包含一个不存在的列表。”

然后，您需要获取根站点的 WebID（您从中获取 ListViewWebpart 并替换 Webpart 的部分，如下所示：

```
<WebId xmlns="http://schemas.microsoft.com/WebPart/v2/ListView">00000000-0000-0000-0000-000000000000</WebId> 
```

与（例如）

```
<WebId xmlns="http://schemas.microsoft.com/WebPart/v2/ListView">7b04dee8-b120-4dee-abea-28b77316ec7d</WebId> 
```

# c# - 在 C# 中将日期值从一个 Windows 传递到另一个窗体

> ID：13185670
> 
> 赞同：0
> 
> 时间：2012-11-01T21:22:51.983
> 
> 标签：c#, winforms

我正在做一个非常复杂的项目，而且我对 windows 项目非常陌生。
我有 2 个表格：

*   `ViewSchedule.cs`
*   `Scheduler.cs`（它是一个对话框表单）

`ViewSchedule.cs`有两个日期要从日历中选择。选择了两个日期。
它们保存在 Resp 中：

```
_fromDate = dtFromDate.DateTime.ToUniversalTime();
_toDate = dtToDate.DateTime.ToUniversalTime(); 
```

表单 2 即`Scheduler.cs`是一个对话框表单。此处选择的日期`ViewScheduler`应显示在此处。

我需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:26:01.233

您需要在对话框表单中创建公共属性并在显示对话框之前设置这些属性。

然后 onLoad 使用这些属性值。

在 form2 中添加这些日期属性：

```
public partial class Form2 : Form
{
    public DateTime Date1 { get; set; }
    public DateTime Date2 { get; set; }

    public Form2()
    {
        InitializeComponent();
    }
} 
```

从 form1 访问这些如下：

```
private void Form1_Load(object sender, EventArgs e)
{
   Form2 frm2 = new Form2();
   frm2.Date1 = DateTime.Now;
   frm2.Date2 = DateTime.Now;
   frm2.ShowDialog();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:42:24.620

最简单的方法是确保定义两个日期的这两个变量`public static`可以通过其他形式访问。如果您只想在值更改时更新其他表单。然后，我建议您`Timer`在第二种形式中使用 a 和`bool`在第一种形式中使用 a 来指示日期是否更改。

**例子**

^(**ViewSchedule.cs**)

```
//These values must be static and public so that they'd be accessible through the second form
public static bool DateChanged = false;
public static DateTime _fromDate;
public static DateTime _toDate;

private void SetValues()
{
    _fromDate = dtFromDate.DateTime.ToUniversalTime();
    _toDate = dtToDate.DateTime.ToUniversalTime();
    DateChanged = true; //Set DateChanged to true to indicate that there has been a change made recently
} 
```

^(**调度程序.cs**)

```
public Scheduler()
{
    InitializeComponent();
    timer1.Tick += new EventHandler(timer1_Tick); //Link the Tick event of timer1 to timer1_Tick
}

DateTime _fromDate; //Set a new variable of name _fromDate which will be used to get the _fromDate value of ViewSchedule.cs
DateTime _toDate; ////Set a new variable of name _toDate which will be used to get the _toDate value of ViewSchedule.cs

private void timer1_Tick(object sender, EventArgs e)
{
    if (Form1.DateChanged) //Check if a change has been done recently
    {
        Form1.DateChanged = false; //Set the change to false so that the timer won't repeat
        _fromDate = Form1._fromDate; //Set our value of _fromDate from Form1._fromDate
        _toDate = Form1._toDate;//Set our value of _toDate from Form1._toDate
    }
} 
```

这会将 的值设置为我认为您想要实现`Scheduler.cs`的新值`ViewSchedule.cs`

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T00:32:41.163

我不会为静态字段而烦恼...这种在表单之间来回传递值的问题已经回答了很多次...所以[这个链接](https://stackoverflow.com/questions/8166896/how-do-i-invoke-a-method-in-a-userform-from-parent-form/8168642#8168642)到我回答的上一个问题。它甚至一步一步地创建两个表单并通过 getter/setter 甚至事件来回传递值。希望这可以帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T23:41:47.143

您应该提供`Scheduler`一个明确的数据源并使用事件来通知它基础日期的更改。一个好主意是为数据源提供自己的接口：

```
interface IFromToDateProvider : INotifyPropertyChanged
{
    DateTime From { get; }
    DateTime To { get; }
} 
```

然后`ViewSchedule`实现这个接口：

```
class ViewSchedule : IFromToDateProvider
{
    DateTime _from;

    public DateTime From
    {
        get { return _from; }
        set
        {
            if (_from == value) return;

            _from = value;
            OnPropertyChanged("From");
        }
    }

    DateTime _to;

    public DateTime To
    {
        get { return _to; }
        set
        {
            if (_to == value) return;
            _to = value;
            OnPropertyChanged("To");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

确保使用属性更新 from 和 to 的值，以便触发事件。或者，您可以创建`From`和计算仅从您提到`To`的 s 中获取值的属性；`Calendar`再次确保`OnPropertyChanged`在基础日历值更改时触发。如果你正在使用[`MonthCalendar`](http://msdn.microsoft.com/en-us/library/system.windows.forms.monthcalendar%28v=vs.100%29.aspx)，你可以通过监听它的[`DateChanged`事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.monthcalendar.datechanged%28v=vs.100%29.aspx)来做到这一点。

然后，让您`Scheduler`将 a`IFromToDateProvider`作为构造函数参数并监听其`PropertyChanged`事件：

```
class Scheduler
{
    readonly IFromToDateProvider _provider;
    public Scheduler(IFromToDateProvider provider)
    {
        _provider = provider;
        _provider.PropertyChanged += provider_PropertyChanged;
    }

    void provider_PropertyChanged(object sender, PropertyChangedEventArgs propertyChangedEventArgs)
    {
        // update display with new values in _provider.From and/or 
        // _provider.To in this event handler
    }
} 
```

这是假设`ViewSchedule`创建一个`Scheduler`实例。如果反之亦然，只需`Scheduler`在创建`ViewSchedule`. 如果两者都不是，只需将其设置为属性；最重要的部分是您最终会`Scheduler`听到`PropertyChanged`a 的事件`ViewSchedule`。

# asp.net - 如何让 WP8 模拟器访问 ASP.NET 调试服务器

> ID：13185671
> 
> 赞同：1
> 
> 时间：2012-11-01T21:22:55.953
> 
> 标签：asp.net, asp.net-mvc, windows-phone-8

是否可以让 WP8 模拟器访问我在我的电脑上运行的 ASP.NET 开发调试服务器？

WP8 模拟器在 Hyper-V 中运行，因此模拟器无法访问我电脑上的调试服务器，是否可以这样做？

我能想出的唯一解决方案是在我的机器上创建一个 IIS 服务器并对其进行调试，但它更容易运行开发服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:32:18.533

问题实际上并不是“如何从模拟器访问开发服务器”，而是“如何从远程位置访问开发服务器”。模拟器“只是”另一个连接到网络的设备。

为此，我可以建议一些链接：

*   [http://blog.waynehartman.com/archive/2010/05/30/218.aspx](http://blog.waynehartman.com/archive/2010/05/30/218.aspx)
*   [有没有办法对 ASP.NET 开发 Web 服务器进行远程调用？](https://stackoverflow.com/questions/652777/is-there-a-way-to-make-remote-calls-to-asp-net-development-web-server)

# c++ - 结构内的 C++ 模板类型

> ID：13185677
> 
> 赞同：0
> 
> 时间：2012-11-01T21:23:09.543
> 
> 标签：c++, templates, struct

这是我的消息结构：

```
struct tEventMessage 
{
    // Type of the event
    int Type;

    // (void*) Allows those to be casted into per-Type objects
    void *pArgument1;   
    void *pArgument2;

}; 
```

我可以在这个结构中添加某种“模板”成员，以便稍后在构建消息时我可以传递这些指针 + 和我希望的任何其他数据？（见下面的例子）

```
struct tEventMessage 
{
    // Type of the event
    int Type;

    // (void*) Allows those to be casted into per-Type objects
    void *pArgument1;   
    void *pArgument2;

    // Template
    T tSomeTemplateMember;
};

 void HandleClick(....)
 {
 CVector3 vNewPosition = ....

 tEventMessage _msg;
 _msg.Type = xxxx;
 _msg.pArgument1 = pA->GetObjectPointer();

 //
 // Wrong!
 // Because this CVector3 will not be alive in next tick
 // - my pointer will point to nothing.
 //
 _msg.pArgument2 = static_cast<CVector3*>(&vNewPosition)

 //
 // Something like that would be great
 // And would allow me to use CVector2,CVector3,CVector4 with one template member
 // 
 _msg.tSomeTemplateMember = vNewPosition;

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:37:03.897

我认为你把问题复杂化了。您现在有两个问题，即如何在消息中传递任意数据，而不是一个问题，即如何处理模板。

实现这种事情的常用方法是使用继承：-

```
class Message
{
public:
  int Type () { return type; }
protected:
  int type;
};

class ClickMessage : public Message
{
public:
  ClickMessage () { type = ClickMessageID; }
private:
  // the message data
};

void HandleMessage (Message *message)
{
  switch (message->Type ())
  {
  case ClickMessageID:
    HandleClick (reinterpret_cast <ClickMessage *> (message));
    break;
  default:
    // unhandled message error
    break;
  }
}

void HandleClick (ClickMessage *message)
{
  // do stuff
} 
```

问题是你最终会重复很多代码，即 switch 语句中的强制转换。还有一个维护问题 - 添加新消息需要仔细更新。您可以稍微修改一下代码并使用函数指针和映射将消息类型转换为函数并替换 switch 语句。

可能有一个聪明的模板解决方案，但我想不出它可能是什么。

使用 RTTI 可能会有所帮助（需要付出代价）。

这是反射真正擅长解决的问题之一！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T23:13:00.070

也许我遗漏了一些东西，但是我想知道为什么您不从抽象类开始，然后从中派生各种事件消息。通过利用抽象类并从它们派生类，您可以让编译器找出您使用 switch 语句的逻辑。请参阅此[C++ 多态性和抽象基类教程](http://www.codingunit.com/cplusplus-tutorial-polymorphism-and-abstract-base-class)。

另请参阅[MSDN 关于 Abstract classes 的内容](http://msdn.microsoft.com/en-us/library/c8whxhf1.aspx)。

例如，您可能有一个如下所示的抽象类。但是，您可能不想要这么多，实际上可能只需要单一`processEvent()`方法。任何派生类都需要为抽象类中指定的每个函数提供它们自己的版本。

```
class EventMessage abstract {
public:
    virtual void *getArgument1 (void) = 0;
    virtual void *getArgument2 (void) = 0;
    virtual int   processEvent (void) = 0;
protected:
    void *pArgument1;
    void *pArgument2;
}; 
```

这个抽象类定义的是一个基本上包含所有各种事件消息使用的数据的类，以及一个被调用来处理实际消息的方法。类本身没有被实例化，但是它被用作实际实例化为对象的其他派生类的父类或超类。

然后您要做的是派生将实现 EventMessage 接口的新类。例如，这里有两个不同的类可以做到这一点：

```
class JoJoEvent : public EventMessage {
public:
    JoJoEvent(void *arg1, void *arg2);
    void *getArgument1 (void);
    void *getArgument2 (void);
    int   processEvent (void);
};
JoJoEvent::JoJoEvent(void *arg1, void *arg2)
{
    pArgument1 = arg1;
    pArgument2 = arg2;
}

void * JoJoEvent::getArgument1 (void) {
    return pArgument1;
}
void * JoJoEvent::getArgument2 (void) {
    return pArgument2;
}

int JoJoEvent::processEvent (void) {
    // do stuff with the arguments
    return 1;
}

class KoKoEvent : public EventMessage {
public:
    KoKoEvent(void *arg1, void *arg2);
    void *getArgument1 (void);
    void *getArgument2 (void);
    int   processEvent (void);
};
KoKoEvent::KoKoEvent(void *arg1, void *arg2)
{
    pArgument1 = arg1;
    pArgument2 = arg2;
}

void * KoKoEvent::getArgument1 (void) {
    return pArgument1;
}
void * KoKoEvent::getArgument2 (void) {
    return pArgument2;
}

int KoKoEvent::processEvent (void) {
    // do stuff with the arguments
    return 1;
} 
```

然后在使用这些时，您将执行类似以下代码的操作：

```
EventMessage *myMessage = new JoJoEvent(0, 0);

EventMessage *myMessage2 = new KoKoEvent(0, 0);

myMessage2->processEvent();
myMessage->processEvent(); 
```

如果您需要将其他数据添加到派生类中，您只需提供一种将数据放入派生类的机制即可。

# ruby-on-rails - Ruby on Rails：从 lat 和 long 中分离出来

> ID：13185678
> 
> 赞同：0
> 
> 时间：2012-11-01T21:23:09.020
> 
> 标签：ruby-on-rails

我有这个代码：

```
include Geokit::Geocoders
res=MultiGeocoder.geocode('100 Spear st, San Francisco, CA')
puts res.ll 
```

结果将是这样的：37.7922379,-122.3939656

我需要能够单独获取 lat 和 long 值。

所以，纬度 = 长的东西 = 东西

我认为这行得通？

```
res=MultiGeocoder.geocode(params[:street], params[:city], params[:state])
latLongString = res.ll
latLongArray = latLongString.split(',')
lat = latLongArray[0]
long = latLongArray[1] 
```

我不确定最好的 Ruby 代码吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:29:26.653

你可以使用这个：

```
lat, lng = res.ll.split(",") 
```

# javascript - Trello 令牌安全问题？

> ID：13185680
> 
> 赞同：6
> 
> 时间：2012-11-01T21:23:35.873
> 
> 标签：javascript, api, token, trello

我正在构建一个应用程序以将购物车发送到我的[trello](http://trello.com)板，但我不希望用户接受应用程序（为此，他们必须拥有 trello 帐户），而是创建了另一个帐户（“从属帐户”）并阅读，写权限到我的董事会并生成永不过期的读写令牌。

在我的网页上，我包含 core.js

```
https://api.trello.com/1/client.js?key=[appkey]&token=[token] 
```

一切正常，但是......如果用户检查我的代码，他可以看到我的“应用程序密钥”和“令牌”。

所以我的问题是：
1\. 这是一个安全问题 - 访问者可以使用这个应用程序密钥/令牌并访问 bord 吗？（我相信是的）
2\. 如何更改我的代码以使页面的访问者看不到我的应用程序密钥/令牌？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T01:43:55.317

如果您让人们可以使用您的令牌，那么是的，那里存在潜在的安全问题 - 使用密钥和令牌，他们可以像您一样发出请求，以获得您对该令牌授予的任何权限。因此，如果您想创建一个对董事会具有写入权限的令牌，您可能希望将其保留在服务器端，并将您的 Javascript 提交到您的服务器，然后服务器使用您生成的令牌将其转发到 Trello 站点.

如果您担心自己泄露了不想泄露的令牌，可以在[https://trello.com/your/account](https://trello.com/your/account)的帐户页面底部将其无效。

# mysql - 在 MySQL 中使用 CASE/WHEN 的奇怪行为

> ID：13185683
> 
> 赞同：1
> 
> 时间：2012-11-01T21:23:49.023
> 
> 标签：mysql, sql, phpmyadmin

我正在尝试学习如何在**SQL中更具体地使用****CASE/WHEN**，mySQL。

 **我有两个表：**adhoc_item**和**adhoc_vulnerability**。**ahdoc_item**有一个与之相关的**adhoc_vulnerability 。**现在**adhoc_vulnerability** *可能有也可能没有*附加的漏洞（original_vulnerability_id）。

如果没有，那么我想自己返回**名称**。

表格：（或其相关部分）

**ADHOC_ITEM** ![在此处输入图像描述](../Images/77234eee77587d5200d0524d9c08a14e.png)

**ADHOC_VULNERABILITY** ![在此处输入图像描述](../Images/fc488d73cacdf9dc2537dde5b82aadb1.png) 这是我的查询：

```
SELECT adi.name as item, CASE ahv.original_vulnerability_id
WHEN ISNULL(ahv.original_vulnerability_id) THEN ahv.name
ELSE 'foo'
END NAME
FROM adhoc_item adi
JOIN adhoc_vulnerability ahv ON ahv.id = adi.adhoc_vulnerability_id 
```

**这些就是结果！**

![在此处输入图像描述](../Images/2b314ff154ebdda909519f0d01c021d4.png)

现在我知道这有点复杂，但我已经考虑了大约 2 个小时，并没有找到解释为什么最后一个**项目**（它有一个**adhoc_vulnerability**与 NULL 作为**original_vulnerability_id**）显示应该在什么时候精确出现的值该属性*不*为空！

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T21:31:50.500

问题是当`ahv.original_vulnerability_id`is时`NULL`，`ISNULL()`函数返回`TRUE`（与 MySQL 相同，`1`但这无关紧要）。因此，不是将列与 进行比较，而是`NULL`将其与 进行比较`TRUE`。

* * *

将表达式重写`CASE`为：

```
CASE 
WHEN ISNULL(ahv.original_vulnerability_id) THEN ahv.name
ELSE 'foo'
END NAME 
```

或作为：

```
CASE 
WHEN ahv.original_vulnerability_id IS NULL THEN ahv.name
ELSE 'foo'
END NAME 
```**

# jquery - IE8 - 如何在内容加载后运行 jquery 代码？

> ID：13185689
> 
> 赞同：2
> 
> 时间：2012-11-01T21:24:04.780
> 
> 标签：jquery, ajax, internet-explorer-8

我有一种情况，我加载了一个父网页（恰好是 Java JSP），它的内容是我在文档就绪函数中使用 ajax（异步）加载的，期望页面能够快速呈现任何内容，然后运行 ​​jquery 代码到页面显示后执行异步工作。

它在 Firefox 中按预期工作 - 页面快速呈现，然后 jquery 代码运行 ajax 调用加载其他元素。

在 IE8 中，它等到一切都完成，然后呈现完成的结果。它不尊重我的文档准备尝试。它坐在那里加载页面，同时在文档准备部分运行我的代码，然后最终所有完成的结果都被放在浏览器上。

有什么解决方法吗？有什么方法可以让 IE8 在这方面表现得像 Firefox……尽快渲染页面，然后在渲染后运行一些 jquery 代码/ajax 调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:34:39.407

这是一个影响 IE6 7 和 8 的错误。jQuery 的文档就绪处理程序直到 IE 6 7 和 8 中的窗口加载事件之前或之后才会触发。这在 IE9 中不会发生。

解决它的一种方法是自己处理事件。

```
<body class="jquerydomready">
    <!--[if lt IE 9]>
    <script>
        $('body').removeClass('jquerydomready');
    </script>
    <![endif]--> 
```

然后在你的脚本中使用这个：

```
function init() {
    // code here will be ran when document is ready
    $("body").css("background-color","green");
}

if ( $("body").is(".jquerydomready") ) {
    $(init); // not oldIE
}
else {
    // oldIE way
    document.onreadystatechange = function() {
        if (document.readyState == "interactive") init();    
    }​
} 
```

请记住，如果您正在执行 ajax 请求并期望它们快速发生，否则代码将无法工作，我建议您转移到不需要它们快速发生的系统，因为您不能总是依赖网络快。

票：[http ://bugs.jquery.com/ticket/12282](http://bugs.jquery.com/ticket/12282)

它目前实际上并没有被标记为错误，但如果你关注这个问题的历史，它在整个 jQuery 的开发过程中已经被修复和修复了好几次。

编辑：我不完全确定这个答案的 IE6 部分，我没有用这个测试过 IE6。

这是一个支持 JSFiddle，显示它在 IE7 和 8 中不正确地等待（同样未在 IE6 中测试）。

在上述修复之前：http: [//jsfiddle.net/PFWmS/](http://jsfiddle.net/PFWmS/)

上述修复后：http: [//jsfiddle.net/PFWmS/7](http://jsfiddle.net/PFWmS/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:26:55.137

您是否尝试过将您的部分移动到页面末尾？

# jquery - jqgrid 搜索时的动态搜索选项

> ID：13185693
> 
> 赞同：2
> 
> 时间：2012-11-01T21:24:10.680
> 
> 标签：jquery, search, dynamic, jqgrid, filter

下面我复制了我的 jqGrid 并修剪了很多不相关的属性等，但是下面的基本代码足以封装我的问题。

我有一个动态过滤器，它在成功返回 ajax 调用时填充。返回的 json 包含下拉列表的字符串值 (uniqueRunDates) 以及其他值。使用“setColProp”将字符串 (uniqueRunDates) 动态添加到列中。完成 jgGrid 后，函数中的下一行代码调用网格的重新加载，新的过滤器就位。

该过滤器的工作原理与静态（如“JobStatus”）过滤器一样，但有一个例外。搜索。

网格有三个可以互换使用的搜索（文本框和两个下拉菜单 [一个是 uniqueRunDates]）。当用户在文本框中键入内容时，网格会正确更新，返回的 json 具有新的唯一日期，我通过“setColProp”添加它们。最后一点是必须调用“reloadGrid”。问题是我该怎么做？？？

在第一次循环中，执行创建网格后的代码。执行搜索时，仅执行此 jgGrid 代码。我当然不能将“reloadGrid”放在成功调用中，因为这会造成循环。我试图使用工具栏的“afterSearch”属性，但是当我需要它时，它似乎没有被触发。

我是否以正确的方式解决这个问题？有没有更简单的方法来处理这个看似常见的概念？动态搜索过滤器？非常感谢您提供的任何帮助和/或指导。

```
 $("#gridTable").jqGrid({
    async: false,
    datatype: function (jqGridModel) {
        $.ajax({
            async: false,
            url: 'Application.aspx/getJqGridData',
            data: JSON.stringify({ 'rptPath': rptPath, 'jqGridModel': jqGridModel, 'userId': userId }),
            success: function (data, textStatus, jqXHR) {
                populateGrid(data);
                var uniqueRunDates = (JSON.parse(data)).uniqueDates;

                $("#gridTable").jqGrid('setColProp', 'Run_Date', {
                    stype: 'select',
                    searchoptions: { value: uniqueRunDates, sopt: ['dateEq'] }
                });
            }                
        });
    },
    colNames: ['', 'Report Name', 'Run Status', 'Run Date', 'Expiring On', 'Category', 'Actions'],
    colModel: [
       { name: 'Run_Date', index: 'RunDate', align: 'center', title: false, sortable: true, width: 40 }
       { name: 'Report_Name', index: 'ReportNameDisplay', align: 'left', title: false, sortable: true, formatter: reportLinkFormatter },
       { name: 'Run_Status', index: 'JobStatus', align: 'left', title: false, sortable: true, width: 50,
            stype: 'select',
            searchoptions: { value: ':All Status;Completed:Completed;Failed:Failed;Pending:Pending;No Data Returned:No Data Returned;:Returned' }
        },
    ],
    pager: jQuery('#gridPager'),
    rowNum: 15,
    rowList: [15, 25, 35, 50],
    sortname: 'RunDate',
    sortorder: "desc",
    height: '100%',
    multiselect: true
    }
});

//Refresh necessary for the dynamically added 'run date' filter.
$("#gridTable").trigger("reloadGrid");

$('#gridTable').jqGrid('filterToolbar', {
    stringResult: true
}); 
```

. . . . .

**更新** 我已更新网格以遵循以下建议。

我能够查询服务器，并返回 JSON 对象的字符串版本。我还可以在“beforeProcessing”方法中看到返回值，它看起来不错。但是，网格不再填充。我不确定 jsonReader 是否使用我的返回格式正确设置。data.d = {"total":2,"page":1,"records":25,"rows":[{"id":"23","cell":["0","xxx", "xxx",...]}....]

我认为这是类型没有排列的东西......想法？

```
$("#gridTable").jqGrid({
    async: false,
    url: 'Application.aspx/getJqGridData',
    ajaxGridOptions: { contentType: "application/json" },
    serializeGridData: function (postData) {
        if (postData.filters == undefined) postData.filters = null;
        postData.jqGridModel = { page: postData.page, _search: postData._search, rows: postData.rows,
            sidx: postData.sidx, sord: postData.sord, filters: postData.filters
        };
        postData.rptPath = rptPath;
        postData.userId = userId;
        return JSON.stringify(postData);
    },
    contentType: 'application/json; charset=utf-8',
    datatype: "json",
    mtype: 'POST',
    beforeProcessing: function (data) {    
    },
    colNames: ['', 'Report Name', 'Run Status', 'Run Date', 'Expiring On', 'Category', 'Actions'],
    colModel: [
        { name: 'Is_Fav', index: 'Favorites', align: 'center', title: false, sortable: false, search: false, width: 5, formatter: favImageFormatter },
        { name: 'Report_Name', index: 'ReportNameDisplay', align: 'left', title: false, sortable: true, formatter: reportLinkFormatter },
        { name: 'Run_Status', index: 'JobStatus', align: 'left', title: false, sortable: true, width: 50,
            stype: 'select',
            searchoptions: { value: ':All Status;Completed:Completed;Failed:Failed;Pending:Pending;No Data Returned:No Data Returned;:Returned' }
        },
        { name: 'Run_Date', index: 'RunDate', align: 'center', title: false, sortable: true, width: 40,
            selectOptions: {
                dataUrl: 'Application.aspx/getJqGridData',
                buildSelect: function (data) {
                    var gData;
                    if (data.hasOwnProperty('d')) gData = data.d;
                    else gData = data;

                    var uniqueRunDates = (JSON.parse(gData)).uniqueDates;

                    var html = '<select>', length = gData.length, i = 0, item;
                    for (; i < length; i++) {
                        item = d[i];
                        html += '<option value=' + item + '>' + item + '</option>';
                    }
                    html += '</select>';
                    return html
                }
            }
        },
        { name: 'Expiring_On', index: 'ExpirationDate', align: 'center', title: false, sortable: true, width: 40, search: false },
        { name: 'Category', index: 'Category', align: 'left', title: false, sortable: true, width: 80 },
        { name: 'Actions', index: '', align: 'left', title: false, sortable: false, width: 25, search: false, formatter: actionsFormatter }
    ],
    pager: jQuery('#gridPager'),
    rowNum: 15,
    rowList: [15, 25, 35, 50],
    sortname: 'RunDate',
    sortorder: "desc",
    height: '100%',
    viewrecords: true,
    sortable: true,
    jsonReader: {
        root: "d.rows",
        page: "d.page",
        total: "d.total",
        records: "d.records"            
    },
    forceFit: true,
    multiselect: true,
    loadError: function (jqXHR, textStatus, errorThrown) {
        alert(jqXHR.responseText);
    },
    gridComplete: function () {
        doGridComplete(rptPath);
    },
    beforeSelectRow: function (rowid, event) {
        // Only allow row selection if the chekbox in the row is clicked
        var index = $.jgrid.getCellIndex(event.target);
        if (index == 0) {
            return true;
        }
        return false;
    },
    subGrid: true,
    subGridRowExpanded: function (subgrid_id, row_id) {
        getReportDetails(subgrid_id, row_id, rptPath);
    }
});

$('#gridTable').jqGrid('filterToolbar', {
    stringResult: true
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:40:24.883

我不确定，我是否正确理解您的需求。

您可以使用使 Ajax 请求填充选择选项的属性，而不是设置`value`属性。[在这里](https://stackoverflow.com/a/4102155/315935)和[这里](https://stackoverflow.com/a/7877286/315935)你可以找到一些可以帮助实现的代码示例。`searchoptions``dataUrl``dataUrl`

此外，您**永远不**应该使用`datatype`as 函数来`jQuery.ajax`自己拨打电话。jqGrid 有很多选项，例如`ajaxGridOptions`，`jsonReader`选项，`serializeRowData`回调等。我建议您阅读[答案](https://stackoverflow.com/a/6296601/315935)，[其中](https://stackoverflow.com/a/10871428/315935)包含可以下载和测试的圆顶项目。

如果您使用标准的 jqGrid 机制，并且您仍然需要对网格上的数据进行一些修改（例如设置一些 jqGrid 选项），您可以使用`beforeProcessing`回调。回调`beforeProcessing`允许在jqGrid 处理从服务器返回的数据*之前*`colModel`对任何 jqGrid 选项进行更改。

# perl - perl 使用语法高亮保存命令的输出

> ID：13185696
> 
> 赞同：2
> 
> 时间：2012-11-01T21:24:33.750
> 
> 标签：perl, terminal

我想在终端中运行一个命令并捕获输出，所以我正在使用

```
my $output = `command`; 
```

问题是该命令具有语法突出显示，所以我稍后会打印我失去语法突出显示，而是得到诸如

```
print $output; 
```

结果

```
 ←[31merror←[39m ←[ 
```

我怎样才能在没有语法高亮的情况下获取命令，或者以某种方式让语法高亮显示在打印上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T06:47:46.510

试试这个从 shell 输出中删除 ANSI 颜色转义：

```
my $output = `command`;
my $output =~ s/\e\[[\d;]*m//g;
print "$output","\n"; 
```

如果要删除所有 ANSI 转义序列，请将正则表达式替换为：

```
s/\e\[?.*?[\@-~]//g 
```

# ruby - Ruby Savon 如何设置 verify_callback

> ID：13185697
> 
> 赞同：3
> 
> 时间：2012-11-01T21:24:36.377
> 
> 标签：ruby, soap, savon

我正在对具有自签名证书的设备发出肥皂请求。我设置了 verify_mode :none，但我仍然收到“深度 0 - 18：自签名证书”警告。我知道如果我可以设置 verify_callback，我可以抑制这些警告。

谁能告诉我如何在 Savon 中设置 verify_callback？我努力了：

```
client.http.auth.ssl.verify_callback = lambda (|arg1, arg2| true) 
```

和

```
client.http.ssl_config.verify_callback = lambda (|arg1, arg2| true) 
```

两者都没有返回任何方法错误。

我已经在soap4r 调用中看到了这个选项，所以我知道它有效。我只是想知道我是否也可以在 Savon 中设置它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T07:09:59.217

有没有可能在 savon 2 中解决？最近更新了[http://savonrb.com/version2.html](http://savonrb.com/version2.html)

最近还解决了一个 ssl 特定问题：[https ://github.com/savonrb/savon/issues/344](https://github.com/savonrb/savon/issues/344)

# javascript - Fantasybox内的Speakerdeck

> ID：13185698
> 
> 赞同：0
> 
> 时间：2012-11-01T21:24:47.763
> 
> 标签：javascript, jquery, fancybox, fancybox-2, oembed

# [音箱甲板](https://speakerdeck.com/)

使用[脚本嵌入](https://speakerdeck.com/faq#oembed)调用，该调用将设置 api 和 json 响应，例如：

```
{
    "version": "1.0",
    "type": "video",
    "provider_name": "YouTube",
    "provider_url": "http://youtube.com/",
    "width": 425,
    "height": 344,
    "title": "Amazing Nintendo Facts",
    "author_name": "ZackScott",
    "author_url": "http://www.youtube.com/user/ZackScott",
    "html":
        "<object width=\"425\" height=\"344\">
            <param name=\"movie\" value=\"http://www.youtube.com/v/M3r2XDceM6A&fs=1\"></param>
            <param name=\"allowFullScreen\" value=\"true\"></param>
            <param name=\"allowscriptaccess\" value=\"always\"></param>
            <embed src=\"http://www.youtube.com/v/M3r2XDceM6A&fs=1\"
                type=\"application/x-shockwave-flash\" width=\"425\" height=\"344\"
                allowscriptaccess=\"always\" allowfullscreen=\"true\"></embed>
        </object>",
} 
```

只需放置一个 Speakerdeck 嵌入链接，例如：

```
<script async class='speakerdeck-embed' data-id='4ece03012a0554004f008afa' data-ratio='0.9534450651769087' src='//speakerdeck.com/assets/embed.js'></script> 
```

效果很好，但我无法将它与[**fancybox v2**](http://fancyapps.com/fancybox/)集成。但是，运行 a 的问题似乎`a href="script"`比在花式框 iframe 中使用 oEmbed api json 的问题更多。（但不确定。）

因此，我将其分解为仅通过`a href="script"`链接启动脚本的最低限度-因为 fancybox 使用 a 元素-我尝试了以下几种变体：

```
<a href="javascript(async class='speakerdeck' data-id='4ece03012a0554004f008afa' data-ratio='0.9534450651769087' src='//speakerdeck.com/assets/embed.js')" >show it</a> 
```

我得到的只是一个旋转的加载器图标，更糟糕的是。

我想我只是对显而易见的事情有一个心理错误，你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:32:53.450

如果你已经有了你的，它就像通过类似的方法`data-id='4ece03012a0554004f008afa'`将它直接传递到`href`链接中一样简单`embed`

```
<a class="fancydeck" href="http://speakerdeck.com/embed/4ece03012a0554004f008afa">CLICK to open speakerdeck inside fancybox</a> 
```

然后只需使用这个 fancybox 自定义脚本

```
$(document).ready(function() {
 $(".fancydeck").fancybox({
  type : "iframe",
  width: 640, // or whatever
  height : 420,
  fitToView : false
 });
}); // ready 
```

[看演示](http://www.picssel.com/playground/jquery/speakerDeck_02nov12.html)

**注意**：我在演示中使用了 fancybox 2.x，但我不明白为什么它不能与 v1.3.4 一起使用

# regex - 什么正则表达式可以验证这种字符串的格式？

> ID：13185701
> 
> 赞同：2
> 
> 时间：2012-11-01T21:25:19.610
> 
> 标签：regex

我需要验证一个字符串是否采用某种格式......这是规则。

*   可以包含冒号和/或点。
*   冒号和点都是可选的
*   如果指定了冒号和/或点，则冒号/点的左侧必须至少有一个字符，而冒号/点的右侧必须至少有一个字符。
*   如果两者都指定，冒号必须在点之前
*   只允许 0 或 1 个冒号和 0 或 1 个点
*   `AnyString`表示一个或多个 unicode 字符的字符串，不包括冒号和点（冒号和点字符不允许作为 的一部分`AnyString`）。

例子：

可...

```
AnyString:AnyString.AnyString
AnyString:AnyString
AnyString.AnyString
AnyString 
```

不可能是...

```
AnyString:.AnyString
AnyString.AnyString:AnyString
AnyString:
AnyString.
:AnyString
.AnyString 
```

我尝试了很多不同的组合，但我在正则表达式方面还不够好，无法得到这个。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T21:29:42.997

嗯，看起来像：

*   它肯定以一个或多个非冒号或点字符开头
*   然后*可选地*有一个冒号，后跟一个或多个非冒号或点字符
*   然后*可选地*有一个点，后跟一个或多个非冒号或点字符
*   如果同时存在“冒号加 X”和“点加 X”部分，则必须先出现冒号部分

（请注意，当我写上面的内容时，您现在编辑的解释都没有出现，所以它只是基于示例。）

所以我希望这是一个像这样的正则表达式：

```
^[^.:]+(?::[^.:]+)?(?:\.[^.:]+)?$ 
```

笔记：

*   您希望将所有这些都放在*逐字字符串文字*中，以避免必须转义反斜杠，例如

    ```
    var regex = new Regex(@"^[^.:]+(?::[^.:]+)?(?:\.[^.:]+)?$"); 
    ```

*   `^`匹配字符串的开头

*   `[^.:]`将匹配除点或冒号以外的任何字符
*   `+`是“至少一个”的语法
*   `(?:<subexpression>)`[是非捕获组](http://msdn.microsoft.com/en-us/library/bs2twtah.aspx#noncapturing_group)的语法
*   `\.`是一个转义点，`.`表示“任何字符”
*   `?`是“零或一”的语法（即可选）
*   `$`匹配字符串的结尾

测试代码：

```
using System;
using System.Text.RegularExpressions;

class Test
{
    static readonly Regex regex =
        new Regex(@"^[^.:]+(?::[^.:]+)?(?:\.[^.:]+)?$");

    static void Main()
    {
        AssertValid("AnyString:AnyString.AnyString",
                    "AnyString:AnyString",
                    "AnyString.AnyString",
                    "AnyString");

        AssertInvalid("AnyString:.AnyString",
                      "AnyString.AnyString:AnyString",
                      "AnyString:",
                      "AnyString:..Anystring",
                      "AnyString.",
                      ":AnyString",
                      ".AnyString");
    }

    static void AssertValid(params string[] inputs)
    {
        foreach (var input in inputs)
        {
            if (!regex.IsMatch(input))
            {
                Console.WriteLine("Expected to match but didn't: {0}",
                                  input);
            }
        }
    }

    static void AssertInvalid(params string[] inputs)
    {
        foreach (var input in inputs)
        {
            if (regex.IsMatch(input))
            {
                Console.WriteLine("Expected not to match but did: {0}",
                                  input);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:30:16.917

这是一个基本版本：`(?:[^:.]+:)?(?:[^:.]+\.)?[^:.]+`. 如果你定义`Anystring`得更严格，这可以得到改善。

您的基本要求看起来有 3 个部分。零个或一个“Anystring”后跟一个冒号，然后是零个或一个“Anystring”后跟一个点，然后是一个强制性的“Anystring”。这反映在正则表达式的结构中。

鉴于我拥有的信息，我正在考虑`[^:.]+`成为一个匹配的正则表达式`Anystring`，因为唯一的约束是

*   它不能是零长度
*   它不能包含冒号或点，（这暗示了最多允许一个冒号和一个句点的事实）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T21:31:15.253

```
/^[a-z]+[:.]?[a-z]+[:.]?[a-z]+$/i 
```

那个怎么样？那个不包括数字。“AnyString”允许包含什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T21:39:07.353

这[似乎](http://rubular.com/)符合您列出的所有标准：

```
^[^.:]+(:[^.:]+)?(\.[^.:]+)?$ 
```

请注意，我假设`AnyString`实际上可以是不包含冒号或句点的任何内容。另请注意，我添加了开始/结束线锚点。如果需要，您可以删除它们。

此正则表达式将人类语言翻译为：

*   一个或多个不是冒号或句点的字符。
    *   可选地后跟一个冒号，然后是一个或多个不是冒号或句点的字符。
    *   可选地后跟一个句点，然后是一个或多个不是冒号或句点的字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T21:54:38.650

试试这个

```
(.+):(.+)\.(.+)|(.+)\.(.+) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T22:35:51.833

如果我们正确地将其分解为逻辑部分，则您的匹配规则非常简单。

我将采用您的字符串可以包含的最大可能结构

那是

```
 TEXT:TEXT.TEXT 
```

我将按如下方式打破该结构：

```
 **TEXT**  then  **:CHARACTER**   then   **TEXT**  then **.CHARACTER**     then    **TEXT** 
```

这种崩溃意味着

```
 1\. your text starts with a letter, then 0 or more series of letters follow
    2\. after it can either contain or not contain a colon which is immediately followed by a letter
    3\. then again 0 or more series of letter; pay attention here **0 or more**
    4\. then it can contain or not contain a dot immediately followed by a letter
    5\. then again 0 or more series of letters; pay attention here **0 or more** 
```

在经典的正则表达式定义语言中，您的正则表达式看起来像

```
 [A..Za..z]+  (:[A..Za..z]){0,1}   [A..Za..z]*   (\.[A..Za..z]){0,1}   [A..Za..z]* 
```

为了便于阅读，我将定义上述第 1 点到第 5 点的部分分开。在实际使用中，正则表达式中不应有空格。

希望这是有帮助的。

干杯。

# mysql - facebook注册生日mysql返回0000-00-00

> ID：13185709
> 
> 赞同：1
> 
> 时间：2012-11-01T21:26:03.383
> 
> 标签：mysql, facebook, date-format

我的 facebook 注册插件有 1 个问题需要解决。我试图将生日插入数据库，facebook 格式是 dd-mm-yyyy ...我得到结果 0000-00-00，

```
<code>
$sql = "INSERT INTO users(facebook, 
                          email, 
                          username, 
                          country, 
                          gender, 
                          dob,
                          password, 
                          profile, 
                          activated, 
                          ip)
        VALUES(?, ?, ?, ?, ?, ?, ?, 'images/default_profile.png', 1,  ? 

$data = array($fbId, $register['email'],
                     $register['username'],
                     $location,
                     $register['gender'],
                     $register['birthday'],
                     md5($register['password']),
                     $_SERVER['REMOTE_ADDR']
             ); 
```

任何帮助都会很棒，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:02:52.880

您需要正确格式化日期。在我以前的[教程](http://www.masteringapi.com/tutorials/how-to-use-facebook-registration-plugin-as-your-registration-system/15/)之一中，我使用了这样的东西（希望它仍然有效）：

```
$fb_birthday = date("Y-m-d" , strtotime($fb_birthday)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:31:32.537

是的，对于 MySQL，您必须将其作为 'YYYY-MM-DD' 格式的字符串提交，如果不是，则将其视为无效条目并且该字段设置为 '0000-00-00' 在发送之前将其转换为 php . 如果您确定来自 Facebook 的格式始终为 dd-mm-yyyy，我将在破折号分隔符上分解字符串并重新排列值的顺序。

```
$fbDate =  $register['birthday'];
$dateArray = explode("-", $fbDate);

$newDate = $dateArray[2]."-".$dateArray[1]."-".$dateArray[0]; 
```

然后将数据数组中的 $newDate 用于准备好的语句。

```
$data = array($fbId, $register['email'],
                 $register['username'],
                 $location,
                 $register['gender'],
                 $newDate,
                 md5($register['password']),
                 $_SERVER['REMOTE_ADDR']
         ); 
```

# css - 在浮动 div 附近垂直对齐文本

> ID：13185712
> 
> 赞同：4
> 
> 时间：2012-11-01T21:26:11.803
> 
> 标签：css, html, text, vertical-alignment, floating

就像在标题中一样，我不能在带有 CSS 的 div 附近放置一些垂直居中的文本，我在 google 和 stackoverflow 上进行了搜索，所以我决定在这里提出一个问题。

这是我需要用 Paint 完成的一个例子：

![在此处输入图像描述](../Images/8698d98dbef61b7566481c28770c0856.png)

我尝试了显示表格单元格和框的解决方案，但它只能在没有左上角浮动 div 的情况下工作。

当文本比蓝色 div 长时，它应该在 div 下方，就像带有浮动 div 的普通文本一样。

我正在寻找一个唯一的 CSS 解决方案，它可以完成与否？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:16:27.597

我不完全确定这是否可能，但这是我最好的尝试，至少适用于前两个示例。

```
<div class="wrap">
    <div class="invisible"></div>
    <img src="http://placehold.it/140x100">
    <p>Lorem ipsum.</p>
</div>

<div class="wrap">
    <div class="invisible"></div>
    <img src="http://placehold.it/140x100">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur viverra, nibh in molestie sodales, risus turpis vehicula tellus, vitae lobortis ligula tortor in enim.</p>
</div>

<div class="wrap">
    <div class="invisible"></div>
    <img src="http://placehold.it/140x100">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur viverra, nibh in molestie sodales, risus turpis vehicula tellus, vitae lobortis ligula tortor in enim. Proin venenatis arcu id enim rutrum eget condimentum urna venenatis. Suspendisse at tortor nisi, in tempus ligula. Maecenas nisl felis, bibendum ut luctus nec, bibendum sit amet erat.</p>
</div> 
```

CSS：

```
.wrap {
    width:500px;
    border:1px solid red;
    margin:10px;
}
.wrap:before {
    content:'';
    display:inline-block;
    height:100%;
    vertical-align:middle;
    margin-left:-0.25em; /* adjusts spacing */
}
p {
    display:inline-block;
    vertical-align:middle;
    width:350px;
}
img {
    float:left;
}

.invisible {
    height:100px;
    display:inline-block;
    vertical-align:middle;
} 
```

一把[小提琴](http://jsfiddle.net/8CH8c/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-20T11:55:58.577

这对于纯 CSS 是可能的。

```
body {
  background: url("http://img08.deviantart.net/b5aa/i/2015/140/7/c/chalkboard_by_lorelinde-d8u2phm.jpg") no-repeat;
}

.container {
  color: rgba(255, 255, 255, .9);
  font-family: "Chalkduster", "Baskerville";
  font-size: 18px;
  padding: 0 10px;
  width: 550px;
}

#user_portrait {
  border-radius: 13px;
  border: 3px solid rgba(255, 255, 255, .9);
  float: left;
  margin: 0 20px 0 0;
  max-height: 300px;
  max-width: 300px;
  filter: sepia(50%);
}

#overview_text {
  letter-spacing: 1px;
  line-height: 1.3rem;
  padding: 0 0 0 10px;
  white-space: pre-line;
}
```

```
<body>
  <p class="container">
    <img id="user_portrait" src="https://pbs.twimg.com/profile_images/704337993293815810/PmkKs6yw.jpg">
    <span id="overview_text">“Never hate your enemies. It affects your judgment.”

    “My father held a gun to his head, and my father assured the bandleader that either his signature or his brains would be on the contract.”

    “There are many things my father taught me here in this room. He taught me: keep your friends close, but your enemies closer.”
    </span>
  </p>
</body>
```

关键是将图像和文本都放入非内联父标签并使其浮动。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-01T22:46:42.527

仅使用 css 是不可能的。（我很高兴被证明是错误的。）

# css - 列表 隐藏在某个点之外

> ID：13185716
> 
> 赞同：0
> 
> 时间：2012-11-01T21:26:21.773
> 
> 标签：css, html

我有一个`<header>`20

```
<li></li>'s 
```

在其中，可以追溯到 20 年前。在标题中，我想显示 100% 的屏幕宽度，2012 年`<li>`在最右边。有什么简单的方法可以做到这一点？我真的需要它在一条长的水平线上，因为我将在左侧悬停时创建一个视差效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:31:23.300

```
li {
    display: inline-block;
    width: 5%;
    text-align: center;
} 
```

# android - 我在哪里可以找到 Android 的默认图标？

> ID：13185722
> 
> 赞同：107
> 
> 时间：2012-11-01T21:26:49.313
> 
> 标签：android, icons

> **可能重复：**
> [标准 Android 菜单图标，例如刷新](https://stackoverflow.com/questions/2687027/standard-android-menu-icons-for-example-refresh)

在哪里可以找到默认 Android 菜单图标的名称（如刷新或撰写）？

下面的代码有一个错误，指出资源不是公共的

```
<item
    android:id="@+id/preference"
    android:icon="@android:drawable/ic_menu_refresh"
    android:showAsAction="ifRoom" /> 
```

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-11-01T21:28:28.813

```
\path-to-your-android-sdk-folder\platforms\android-xx\data\res 
```

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2012-11-01T21:30:13.013

您可以使用

```
android.R.drawable.xxx 
```

（使用自动完成功能查看里面的内容）

或者从[http://developer.android.com/design/downloads/index.html下载东西](http://developer.android.com/design/downloads/index.html)

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2012-11-01T21:57:26.370

您可以在此处找到默认的 Android 菜单图标 -~~[链接现在已损坏](http://androiddrawableexplorer.appspot.com/)。~~

**更新：您可以**[在此处](https://www.google.com/design/icons/)找到 Material Design 图标。

# asp.net - 没有安装的 ASP.NET Crystal Reports（仅限 DLL）？

> ID：13185723
> 
> 赞同：1
> 
> 时间：2012-11-01T21:26:54.027
> 
> 标签：asp.net, vb.net, crystal-reports, visual-studio-2005, crystal-reports-xi

这个问题以前可能有人问过。如果有，请添加下面的链接并关闭我的问题。

我正在编写一个 ASP.NET 2.0 网站，在该网站上运行水晶报表，将其导出，然后向用户显示导出（注意：我没有使用查看器控件）。所以我需要做的就是加载报告，设置它的数据源，编辑公式/参数，然后运行到一个导出文件。问题是，这些水晶报告是用比我的版本更新的版本编写的（报告是水晶 11，我在 VS2005 上使用水晶）。

我想知道我是否可以获取一些水晶 11 DLL 并在我的网站中引用它们，而不是引用 GAC DLL 或在部署服务器上安装水晶。这可能吗？

我听说有人在这里做[http://forums.asp.net/post/585678.aspx](http://forums.asp.net/post/585678.aspx)。

当我尝试时，它开始抱怨 COM 对象......谢谢！

（编辑：顺便说一句，SAP 网站上的旧运行时下载在哪里？我只能找到最新版本......）

# java - 使用 Java 中的 Scanner 类读取 .txt 文件

> ID：13185727
> 
> 赞同：58
> 
> 时间：2012-11-01T21:27:00.910
> 
> 标签：java, file-io, java.util.scanner

我正在开发一个 Java 程序，它逐行读取文本文件，每个文件都有一个数字，将每个数字放入一个数组中，然后尝试使用插入排序对数组进行排序。我需要帮助让程序读取文本文件。

我收到以下错误消息：

> ```
> java.io.FileNotFoundException: 10_Random (The system cannot find the file specified)
> at java.io.FileInputStream.open(Native Method)
> at java.io.FileInputStream.<init>(Unknown Source)
> at java.util.Scanner.<init>(Unknown Source)
> at insertionSort.main(insertionSort.java:14) 
> ```

我的“src”“bin”和主项目文件夹中有 .txt 文件的副本，但它仍然找不到该文件。顺便说一句，我正在使用 Eclipse。

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class insertionSort {

public static void main(String[] args) {

    File file = new File("10_Random");

    try {

        Scanner sc = new Scanner(file);

        while (sc.hasNextLine()) {
            int i = sc.nextInt();
            System.out.println(i);
        }
        sc.close();
    } 
    catch (FileNotFoundException e) {
        e.printStackTrace();
    }
 }
} 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-11-01T21:29:43.347

你必须把文件扩展名放在这里

```
File file = new File("10_Random.txt"); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-09-23T10:36:51.550

使用以下代码读取文件

```
import java.io.File;
import java.util.Scanner;

public class ReadFile {

    public static void main(String[] args) {

        try {
            System.out.print("Enter the file name with extension : ");

            Scanner input = new Scanner(System.in);

            File file = new File(input.nextLine());

            input = new Scanner(file);

            while (input.hasNextLine()) {
                String line = input.nextLine();
                System.out.println(line);
            }
            input.close();

        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

} 
```

-> 此应用程序正在逐行打印文件内容

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-01-10T18:30:22.397

这里有一些工作和测试的方法；

`using Scanner`

```
package io;

import java.io.File;
import java.util.Scanner;

public class ReadFromFileUsingScanner {
    public static void main(String[] args) throws Exception {
        File file=new File("C:\\Users\\pankaj\\Desktop\\test.java");
        Scanner sc=new Scanner(file);
        while(sc.hasNextLine()){
            System.out.println(sc.nextLine());
        }
    }
} 
```

**`Scanner`这是使用类读取整个文件（无循环）的另一种方法**

```
package io;

import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class ReadingEntireFileWithoutLoop {
    public static void main(String[] args) throws FileNotFoundException {
        File file=new File("C:\\Users\\pankaj\\Desktop\\test.java");
        Scanner sc=new Scanner(file);
        sc.useDelimiter("\\Z");
        System.out.println(sc.next());
    }
} 
```

使用`BufferedReader`

```
 package io;
import java.io.*;
public class ReadFromFile2 {
    public static void main(String[] args)throws Exception {
        File file=new File("C:\\Users\\pankaj\\Desktop\\test.java");
        BufferedReader br=new BufferedReader(new FileReader(file));
        String st;
        while((st=br.readLine())!=null){
            System.out.println(st);
        }
    }
} 
```

`using FileReader`

```
package io;
import java.io.*;
public class ReadingFromFile {
    public static void main(String[] args) throws Exception {
        FileReader fr=new FileReader("C:\\Users\\pankaj\\Desktop\\test.java");
        int i;
        while((i=fr.read())!=-1){
            System.out.print((char) i);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-01T21:35:46.027

1.  确保文件名正确（正确的大写、匹配的扩展名等 - 正如已经建议的那样）。

2.  使用该[`Class.getResource`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Class.html#getResource%28java.lang.String%29)方法在类路径中找到您的文件 - 不要依赖当前目录：

    ```
    URL url = insertionSort.class.getResource("10_Random");

    File file = new File(url.toURI()); 
    ```

3.  通过命令行参数指定绝对文件路径：

    ```
    File file = new File(args[0]); 
    ```

在 Eclipse 中：

1.  选择“运行配置”
2.  转到“参数”选项卡
3.  将您的“c:/my/file/is/here/10_Random.txt.or.whatever”放入“程序参数”部分

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-10-15T00:21:22.840

似乎没有人解决您根本没有在数组中输入任何内容的事实。您正在将读取的每个 int 设置为“i”，然后将其输出。

```
for (int i =0 ; sc.HasNextLine();i++)
{
    array[i] = sc.NextInt();
} 
```

达到这种效果的东西会将数组的值设置为下一个整数读取。

比另一个 for 循环可以显示数组中的数字。

```
for (int x=0;x< array.length ; x++)
{
    System.out.println("array[x]");
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-01T21:33:36.777

1.  您需要指定确切的文件名，包括文件扩展名，例如`10_Random.txt`.
2.  如果您想在没有任何显式路径的情况下引用该文件，则该文件需要与可执行文件位于同一目录中。
3.  在我们进行此操作时，您需要`int`在阅读`int`. `hasNextLine()`检查 with然后期待`int`with是不安全的`nextInt()`。您应该使用`hasNextInt()`来检查是否确实有一个`int`可以抓取。当然，您选择执行每行一个整数规则的严格程度取决于您。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-06-19T12:04:42.137

私人无效负载数据（）{

```
 Scanner scanner = null;
    try {
        scanner = new Scanner(new File(getFileName()));
        while (scanner.hasNextLine()) {
            Scanner lijnScanner = new Scanner(scanner.nextLine());

            lijnScanner.useDelimiter(";");
            String stadVan = lijnScanner.next();
            String stadNaar = lijnScanner.next();
            double km = Double.parseDouble(lijnScanner.next());

            this.voegToe(new TweeSteden(stadVan, stadNaar), km);

        }
    } catch (FileNotFoundException e) {
        throw new DbException(e.getMessage(), e);
    } finally {
        if(scanner != null){
            scanner.close();
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-05-26T05:17:42.447

文件路径似乎是一个问题，请确保该文件存在于正确的目录中或提供绝对路径以确保您指向正确的文件。请记录 file.getAbsolutePath() 以验证该文件是否正确。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-10-13T17:46:17.490

你应该使用

```
File file = new File("bin/10_Random.txt"); 
```

或者

```
File file = new File("src/10_Random.txt"); 
```

相对于 Eclipse 中的项目文件夹。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-01T21:31:19.747

您读入的文件必须与您指定的文件名完全相同：`"10_random"`不是“10_random.txt”而不是“10_random.blah”，它必须与您要求的完全匹配。您可以更改其中任何一个以匹配，以使它们对齐，但请确保它们对齐。在您使用的任何操作系统中显示文件扩展名可能会有所帮助。

此外，对于文件位置，它必须与作为编译结果的最终可执行文件（.class 文件）位于工作目录（同一级别）中。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-06-05T06:52:03.827

首先检查文件地址，它必须在您的`.java`文件旁边或您在`classpath`环境变量中定义的任何地址中。当你检查这个然后尝试下面。

1.  您必须在 File 对象构造函数中使用文件名的扩展名，例如：

    `File myFile = new File("test.txt");`

2.  但是有一种更好的方法可以通过传递文件名绝对地址在 Scanner 对象中使用它，例如：

    `Scanner sc = new Scanner(Paths.get("test.txt"));`

这样你也必须导入`java.nio.file.Paths`。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-09-13T12:34:22.000

顺便说一句，也值得设置字符编码：

```
Scanner scanner = new Scanner(new File("C:\\tmp\\edit1.txt"), "UTF-16"); 
```

# android - 在包“android”中找不到属性“accessibilityEventTypes”的资源标识符

> ID：13185728
> 
> 赞同：3
> 
> 时间：2012-11-01T21:27:05.233
> 
> 标签：android, accessibility

我正在尝试与 JellyBean 一起使用accessibilityEvent。我曾经让它与 Android 2 一起工作，但我猜他们在 Jelly Bean 中改变了一些东西。我在这里找到了一些东西来修复它，它是这样的：

在清单中：

```
 <service android:name=".MyAccessibilityEventClass" android:permission="android.permission.BIND_ACCESSIBILITY_SERVICE">
       <intent-filter >
          <action android:name="android.accessibilityservice.AccessibilityService" />
       </intent-filter>
       <meta-data
          android:name="android.accessibilityservice"
          android:resource="@xml/accessibilityservice" />
    </service> 
```

然后他们告诉我创建文件 res/xml/accessibilityservice.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<accessibility-service xmlns:android="http://schemas.android.com/apk/res/android"                       
   android:accessibilityEventTypes="typeNotificationStateChanged"
   android:accessibilityFeedbackType="feedbackSpoken"
   android:notificationTimeout="100"
/> 
```

但是**在 Eclipse 中编译时出现这些错误**：

```
No resource identifier found for attribute 'accessibilityEventTypes' in package 'android'
No resource identifier found for attribute 'accessibilityFeedbackType' in package 'android'
No resource identifier found for attribute 'notificationTimeout' in package 'android' 
```

有什么提示吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:30:34.620

抱歉，我修复了将 schemas.android.com 更改为 Schemas.android.com（大写 S）的问题

```
<accessibility-service xmlns:android="http://Schemas.android.com/apk/res/android" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-01T03:02:32.450

当我的项目构建目标设置得太低时，我遇到了这个问题。当我将它设置为 17 时，错误消失了，我仍然能够向后兼容旧版本的 Android。[从文档](http://developer.android.com/training/basics/firstapp/creating-project.html)：

> 您仍然可以构建您的应用程序以支持旧版本，但将构建目标设置为最新版本允许您启用新功能并优化您的应用程序，以便在最新设备上获得出色的用户体验。

您可以在 Properties->Android 中设置您的项目构建目标

# node.js - npm 在 emacs eshell 下无法正确显示提示

> ID：13185729
> 
> 赞同：5
> 
> 时间：2012-11-01T21:27:13.847
> 
> 标签：node.js, emacs, npm

这个问题[Node.js prompt '>' can not show in eshell](https://stackoverflow.com/questions/9390770/node-js-prompt-can-not-show-in-eshell/9396083#9396083)解决了 node repl 的问题，但是当您从 npm 调用 node 时，该解决方案不起作用。

例如，如果我做

```
$ npm init
This utility will walk you through creating a package.json file.
It only covers the most common items, and tries to guess sane defaults.

See `npm help json` for definitive documentation on these fields
and exactly what they do.

Use `npm install <pkg> --save` afterwards to install a package and
save it as a dependency in the package.json file.

Press ^C at any time to quit.
^[[1G^[[0Jname: (nodo1) ^[[15G 
```

或者如果你有一个带有 "scripts" 的 package.json : { "start" : "node" }

```
$ npm start
npm WARN package.json nodo1@0.0.1 No README.md file found!
> node

^[[1G^[[0J> ^[[3G 
```

我知道可以使用“start”解决这个问题：“env NODE_NO_READLINE=1 node”，但是在任何地方都写这个不是找到解决方案。也许该软件包的其他用户不使用 emacs 并且需要以其他方式设置 env var。

我尝试使用 npm 设置 NODE_NO_READLINE=1 的别名，但结果相同

```
alias npm='env NODE_NO_READLINE=1 npm' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T09:05:23.243

这是过滤许多 shell 前端用来为文本着色的特殊字符的 comint 模式。如果您曾经通过 Emacs 与 shell 程序进行过交互，那么您可能熟悉诸如“使用哑终端或 Emacs 终端”之类的消息。有些人可以检测到使用了 Emacs 或哑终端，并且不会发送那些无法解释的字符，但 Node 不会这样做。无论如何，你可以使用这样的东西：

```
(add-to-list
         'comint-preoutput-filter-functions
         (lambda (output)
           (replace-regexp-in-string "\\[[0-9]+[GK]" "" output))) 
```

在你的 .emacs 中的某个地方。

Stackoverflow 不会正确复制控制字符，正则表达式中的第一个字符（在引号之后和斜杠之前）就是`^[`字符。您可以在 Emacs 中输入它，方法是执行`C-q 0 3 3`您接下来键入的任何操作，将导致控制字符插入当前缓冲区。

# shopify - 如何使用 Shopify API 更改订单？

> ID：13185735
> 
> 赞同：1
> 
> 时间：2012-11-01T21:27:49.507
> 
> 标签：shopify

Shopify 大师！我想知道其中任何一项是否可能：

*   进入结帐流程并使用 3rd-party API 提交一些用户输入以进行验证

*   将订单的某些详细信息提交到相同的第 3 方 API 以从管理面板进行验证（例如，当商店接受订单开始处理它时）

任何一种情况下的验证结果都需要替换用户的原始输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:34:27.443

简短的回答：两者都没有。

长答案：

1.  结帐的第 1 步和第 2 步是一个黑匣子，不允许有任何外部内容。因此，您不能向其中任何一个页面添加额外的内容。

2.  结帐后，您可以将详细信息发送给第三方进行验证，但一般来说，Shopify 上的订单是不可变的。有几个例外：

    *   状态：您可以通过API更新订单状态

    *   订单备注：您可以通过 API 为订单添加备注

    这些选项都不允许更新客户信息（送货/账单地址、付款信息等）。但是，您可以通知商家该订单因任何原因无效并取消。这对于欺诈检测服务最有用。

# c++ - 循环向后打印字符串

> ID：13185736
> 
> 赞同：4
> 
> 时间：2012-11-01T21:27:53.170
> 
> 标签：c++, string

程序要求用户输入一系列字符串（他们的名字和一个 8 个字母的单词），打印他们的名字，单词的第一个和最后三个字母，然后向后打印他们的单词。需要 for 循环的帮助才能向后显示字符串。

```
 #include <iostream> 

int main () { 

string FirstName; 

string LastName; 

string MiddleName; 

string Names; 

string string1; 

int len; 

int x;  

 cout << "Hello. What is your first name?" << endl; 

 cin >> FirstName; 

 cout << FirstName  << ", what is your last name?" << endl; 

 cin >> LastName; 

 cout << "And your middle name?" << endl; 

 cin >> MiddleName; 

 Names = LastName + ", " + FirstName + ", " + MiddleName; 

 cout << Names << endl; 

 cout << "Please enter a word with 8 or more characters (no spaces): " << endl; 

 cin >> string1; 

 len = string1.length(); 

   if (len < 8){
     cout << "Error. Please enter a word with 8 or more characters and no spaces: " <<    endl; 

     cin >> string1; 
 }

  else if (len >= 8){

     cout << "The word you entered has " << string1.length() << " characters."<<endl; 

 cout << "The first three characters are " << string1.substr(0,3) << endl; 

 cout << "The last three characters are " <<string1.substr(string1.length()-3,3) << endl; 

x = string1.length()-1; 

for (x = string1.length()-1; x >=0; x--){
 cout << "Your word backwards: " << string1[x]; 
}
}

return 0; 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T21:30:00.517

你几乎在那里：

```
cout << "Your word backwards: ";
for (x = string1.length()-1; x >=0; x--){
   cout << string1[x]; 
} 
```

这样，循环将以`string1`相反的顺序打印每个字符，并且`"Your word backwards: "`仅打印一次文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:36:51.707

如果你想变得花哨：

```
copy(string1.rbegin(), string1.rend(), ostream_iterator<char>(cout)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T21:33:24.057

一种简单的方法是将字符串从反向存储在临时数组中，然后使用此临时数组打印反向字符串。例如：- temp[j--]=str[i ++] ；在一个循环中。但在此之前要小心，将数组“temp”的大小初始化为原始数组的大小。在这种情况下，这里是“str”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T21:37:00.583

这可能不是您问题的答案，但我会选择其中之一：

```
std::cout << "Your word backwards: "
          << std::string(string1.rbegin(), string1.rend()) << '\n';

*std::copy(string1.rbegin(), string1.rend(),
           std::ostreambuf_iterator<char>(std::cout << "Your word backwards: "))++ = '\n';

std::reverse(string1.begin(), string1.end());
std::cout << "Your word backwards: " << string1 << '\n'; 
```

# c# - 如何在 XML 中序列化自定义 IEnumerable？

> ID：13185742
> 
> 赞同：0
> 
> 时间：2012-11-01T21:28:16.700
> 
> 标签：c#, xml, xml-serialization, ienumerable, ixmlserializable

我创建了一个派生自`IEnumerable<T>`. T 是 a `OQTemplate`，并且这个实现了 IXmlSerializable 正确。但我不知道如何实现以下类。

```
public class OQTemplateCollection : IEnumerable<OQTemplate>, IEnumerable
{
    private readonly List<OQTemplate> entries;

    public OQTemplateCollection()
    {
        this.entries = new List<OQTemplate>();
    }

    public OQTemplateCollection(IEnumerable<OQTemplate> source)
    {
        this.entries = new List<OQTemplate>(source);
    }

    public void Add(OQTemplate qt)
    {
        entries.Add(qt);
    }

    public IEnumerator<OQTemplate> GetEnumerator()
    {
        return entries.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }

    public OQTemplate this[int index]
    {
        get { return entries[index]; }
    }
} 
```

我只想拥有这样的 XML：

```
<OQTemplateCollection>
    <OQTemplate ... />
    <OQTemplate ... />
</OQTemplateCollection> 
```

# ruby-on-rails - 创建表过滤器

> ID：13185744
> 
> 赞同：0
> 
> 时间：2012-11-01T21:28:26.977
> 
> 标签：ruby-on-rails, slim-lang

我有一个简单的表，有 3 列，像这样

```
table
  thead
    th Element
    th Owner
    th Progress
  tbody
    == render :partial => "element_row" :collection => @elements :as => table_element 
```

每个元素都是唯一的，一个所有者可能有多个元素。有几种不同类型的“进度”，例如`"started"`、`"not started"`和`"completed"`。

我想创建一些过滤表格的链接。例如，我想创建一个**启动**链接，当用户单击该链接时，该表被过滤为仅显示显示的行`"started"`。过滤器的另一个示例是按所有者。

有人对如何做到这一点有任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:46:06.427

如果您正在寻找可以帮助您的 gem，**[Ransack](https://github.com/ernie/ransack)**是一个很棒的、流行的、活跃的项目，用于搜索*（并通过扩展**过滤**）* ActiveRecord 数据。

如果您查看 Ernie 的[演示站点](http://ransack-demo.herokuapp.com/users/advanced_search)，您可以看到搜索参数如何通过 GET 查询修改 URL。您可以轻松地创建链接，如您想要的**启动**链接来模拟这些 GET 表单请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:45:36.227

如果您想在服务器端执行此操作，请向控制器添加一个过滤器方法，该方法使用链接参数过滤@elements。

如果你使用 ActiveRecord 从数据库中选择 @elements，你可以这样做：

```
@elements = Element.where(progress: params[:progress]) 
```

如果你只想过滤内存中的@elements，你可以这样做：

```
@elements = @elements.select{ |element| element.progress == params[:progress] } 
```

# jquery - 如何使用fancybox2显示带有“showLoading”的叠加层？

> ID：13185749
> 
> 赞同：0
> 
> 时间：2012-11-01T21:28:41.677
> 
> 标签：jquery, fancybox

在 fancybox 1 中，showLoading 也会显示覆盖，在 Fancybox2 中，这不是默认设置。

有没有办法显示覆盖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:07:20.633

自 v2.1.2 起默认显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:31:37.713

[在github](https://github.com/fancyapps/fancyBox/issues/396)上找到了答案：

现在（从 v2.1.2 开始）可以手动打开和关闭覆盖 -

```
// Open using default options
$.fancybox.helpers.overlay.open();
// Pass custom options
$.fancybox.helpers.overlay.open({closeClick : false});
// Close
$.fancybox.helpers.overlay.close(); 
```

# drupal - Drupal 7，在一个管理面板中管理多站点内容

> ID：13185750
> 
> 赞同：3
> 
> 时间：2012-11-01T21:28:45.007
> 
> 标签：drupal

我有一个尴尬的问题，可以使用一个管理面板进行多站点 drupal 安装吗？

例如：我有一个drupal安装，上面运行了5个站点，所以我想在一个地方创建或修改节点、块等。所有站点的结构都相似

我以前从未做过多站点，所以如果您有任何想法，我很乐意听到

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T11:54:31.680

不，这是不可能的。

多站点是完全不同的站点，使用不同的数据库，但共享源代码。然后您就无法共享内容或配置。

如果您想为不同的域创建站点，但要共享用户、内容和配置，您应该使用[域访问](http://drupal.org/project/domain)方法而不是多站点。

问候

# c - 静态常量和常量有什么区别？

> ID：13185751
> 
> 赞同：95
> 
> 时间：2012-11-01T21:28:51.303
> 
> 标签：c, static, constants

`static const`和 和有什么不一样`const`？例如：

```
static const int a=5;
const int i=5; 
```

它们之间有什么区别吗？您什么时候会使用其中一种？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-11-01T21:32:06.077

`static`确定函数外部的可见性或内部变量的寿命。`const`因此，它与本身无关。

`const`意味着您在初始化后不会更改该值。

`static`函数内部意味着变量将在函数执行之前和之后存在。

`static`在函数之外意味着标记符号的范围`static`仅限于该 .c 文件，并且在它之外无法看到。

从技术上讲（如果您想查看它），`static`它是一个存储说明符并且`const`是一个类型限定符。

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2012-11-01T21:32:24.297

区别在于联动。

```
// At file scope
static const int a=5;  // internal linkage
const int i=5;         // external linkage 
```

如果`i`对象未在定义它的翻译单元之外使用，则应使用说明`static`符声明它。

这使编译器能够（可能）执行进一步的优化并通知读者该对象未在其翻译单元之外使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-09T00:58:33.817

这取决于这些定义是否在函数内部。上面的 ouah 给出了函数*外*情况的答案。*在*函数内部，效果是不同的，如下例所示：

```
#include <stdlib.h>

void my_function() {
  const int foo = rand();         // Perfectly OK!
  static const int bar = rand();  // Compile time error.
} 
```

如果您希望局部变量“真正恒定”，则必须不仅定义“const”，还定义“static const”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-17T11:00:22.780

```
const int i=5; 
```

`i`如果在本地定义和声明，则可以使用指针修改值`i`，如果是`static const int a=5;` 或`const int i=5;`全局，则无法修改，因为它存储在数据段的 RO 内存中。

```
 #include <stdio.h>
   //const int  a=10;              /* can not modify */
   int main(void) {
   // your code goes here

   //static const int const a=10;   /* can not modify */
   const int  a=10; 
   int *const ptr=&a;
   *ptr=18;
   printf("The val a is %d",a);
   return 0;
} 
```

# objective-c - 转换到具有动态单元格的表中的视图

> ID：13185753
> 
> 赞同：0
> 
> 时间：2012-11-01T21:28:55.190
> 
> 标签：objective-c, ipad, uitableview, storyboard

我创建表格视图并填充表格动态数据。

如何在单元格和另一个视图之间创建过渡。

Сells 中填充了文件夹文档中的文件名。

我使用故事板。

适用于 iPad 的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:31:17.697

您可以使用以下代码从单元格转换到另一个视图

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
 anotherView *obj    =[[anotherView alloc]initWithNibName:@"anotherView" bundle:nil];
[self.navigationController pushViewController:obj animated:YES];
[obj release];

} 
```

此方法是 tableview 的委托方法，当您选择任何单元格时，它将被调用并转到另一个视图

# iphone - Storyboard 正在创建我的 DetailViewController 的多个实例

> ID：13185754
> 
> 赞同：2
> 
> 时间：2012-11-01T21:28:56.020
> 
> 标签：iphone, xcode, storyboard, xib

我开始使用故事板，但注意到一个非常显着的区别：每次我来回导航时，故事板似乎都在实例化一个新的 ViewController。示例：我基于 Master-Detail 模板创建了两个新的 Xcode 项目。在案例 1 中，我使用情节提要，在案例 2 中，我使用 .xib。

通常我会期望这些行为相同，但他们没有！

在这两个 DetailViewController.m 中，我都添加了以下方法：

```
-(void)viewDidAppear:(BOOL)animated{
if (xposition ==0) {
    xposition=50;
}else{
    xposition = xposition+50;
}
NSLog(@"xposition update %d", xposition); 
```

}

（我还在标题中将 xposition 声明为“int”实例变量）：

当我运行 Storyboard 版本并点击“+”并导航进出 DetailViewController 时，我的 NSLog 语句不断给我“xposition update 50”。

相比之下，对于 .xib 版本，我得到了预期的行为，每次我导航进出 DetailViewController 时，“位置”都会增加 50：所以 50、100、150 等。

如何修复 Storyboard 以使其行为方式与基于 .xib 的版本相同。具体来说，我只想实例化 DetailViewController 一次。

编辑：回答我自己的问题。我得到了一些帮助，并想发布对我有用的答案。

当您第一次执行 segue 时，将目标视图控制器存储在属性中（请参阅方法“PrepareForSegue”。我的 VC 称为 MyViewController）

然后创建名为“shouldPerformSegueWithIdentifier”的委托方法，并使用它来拦截 segue 并为所有后续 segue 手动呈现存储的 ViewController。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
UIViewController *destination = segue.destinationViewController;
NSLog(@"identifier = %@", [segue identifier]);
if([[segue identifier] isEqualToString:@"mySegue"]) {
    self.myViewController = (MyViewController*)destination;
    NSLog(@"Saving myViewController for later use.");
}}

- (BOOL)shouldPerformSegueWithIdentifier:(NSString *)identifier sender:(id)sender {
if([identifier isEqualToString:@"mySegue"]) {
    if(self.myViewController != nil) {
        NSLog(@"Using the saved myViewController.");
        [self.navigationController pushViewController:self.myViewController animated:YES];
        return NO;
    }else {
        return YES;
    }
}
return YES;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:57:19.893

当您来回导航时，您的故事板会从您的 DetailViewController 中弹出。因为它不会被其他任何东西保留，所以它会被释放，这是正常的行为。

如果您想保留该实例，则必须将其保留在您从中调用它的 ViewController 中，并稍后再次使用它。检查此问题以获取[示例](https://stackoverflow.com/questions/8311323/it-is-possible-to-use-an-existing-viewcontroller-with-performseguewithidentifier)

**编辑：**

我认为你解决了这个问题，但这里有一个例子：

在您的界面中为您的视图控制器创建一个属性，例如`myViewController`

在 prepareForSegue 方法中保留视图控制器：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    [self setMyViewController:[segue destinationViewController]]; 
} 
```

这不会泄漏内存，您的示例在某些情况下可能会泄漏。[在此处](http://iphonedevsdk.com/forum/iphone-sdk-tutorials/26587-slicks-definitive-guide-to-properties.html)查看本指南。

下次执行序列时，检查属性是否已设置，如果已设置，请使用它：

```
- (BOOL)shouldPerformSegueWithIdentifier:(NSString *)identifier sender:(id)sender {
    if([self myViewController] != nil){
        [[self navigationController] pushViewController:[self myViewController] animated:YES];
        return NO;
    }else{
        return YES;
    }
} 
```

# ruby-on-rails - 通过 Rails 控制器发送下载的文件

> ID：13185761
> 
> 赞同：2
> 
> 时间：2012-11-01T21:29:36.357
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我基于 Rails 的网站上，我希望用户能够输入一个 URL，我的服务器使用`wget` *带有 recursive 选项*的 Unix 命令下载该 URL 。然后，我的服务器会压缩这些下载的文件以及服务器上已有的一些文件，并使用 Rails 命令将压缩文件发送给用户`send_file`。

现在，我担心`send_file`会在`wget`压缩完成之前执行。如何确保仅在下载和压缩完成后发送文件？这种方法行得通，还是我应该采取另一种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:36:01.747

您如何在应用程序中与 wget 交互。如果你使用 ruby​​ 的反引号或类似的，它应该等到命令退出

```
def some_action
  # some magic
  out = `wget ....`
  # zip
  send_file #...
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T21:48:07.567

您最好将下载任务卸载到工作线程（或服务），并在下载准备好时通知用户。

如果你想变得*非常优雅*，你可以在你的布局（/view/partial/etc）中有一些javascript定期检查是否完成，然后通知用户/提供下载选项。

您要卸载的原因是以下任何一种都会导致您的进程失败：

*   浏览器超时
*   用户执行破坏性操作，例如刷新、返回等。
*   来自服务器 wget 的缓慢/失败响应（如果客户端正在等待，您如何重试失败？）
*   其他错误情况（磁盘已满？文件名重复？zip 错误？）

卸载允许您将请求排队，这样您就可以有效地管理同时下载和处理任务的数量。如果下载是由用户操作直接启动的，那么如果几个/许多人同时开始请求所有文件，您最好希望您的应用服务器能够处理负载。向您的操作系统发起工作会导致内存/资源使用量猛增，因为您必须*为每个进程*将单独的 shell 加载到内存中。

# wpf - 为什么此 XAML 会生成随窗口调整大小的文本框？

> ID：13185766
> 
> 赞同：0
> 
> 时间：2012-11-01T21:29:44.370
> 
> 标签：wpf, textbox, rounded-corners

我正在尝试创建一些圆形文本框，并且我在此站点上找到了一些 XAML，它可以很好地创建我想要的文本框。但是，如果我在设计器中或在运行时调整窗口大小，文本框的高度和宽度会随之改变，它们会变形且无用。

我还在学习 WPF，所以我确定我缺少一些简单的东西。谢谢你的帮助。

```
<Window x:Name="mainWindow" x:Class="CMDB_Express.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="CMDB Express" Height="289" Width="600" SizeToContent="Height" MinHeight="289">
<Window.Resources>
    <ControlTemplate x:Key="TextBoxBaseControlTemplate" TargetType="{x:Type TextBoxBase}">
        <Border Background="{TemplateBinding Background}"
                x:Name="Bd" BorderBrush="Black"
                BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="10">
        </Border>
    </ControlTemplate>
</Window.Resources>
<Grid>
    <TextBox Name="txtDOE" KeyboardNavigation.TabIndex="0" Template="{StaticResource TextBoxBaseControlTemplate}" Margin="139,59,339,159" FontFamily="Segoe UI" FontSize="18" VerticalContentAlignment="Center" MaxLength="7" />
    <Label x:Name="lblDOE" Content="DOE Number: " HorizontalAlignment="Left" Margin="10,72,0,0" VerticalAlignment="Top" FontFamily="Segoe UI" Height="33" FontSize="18"/>
    <TextBox Name="txtCustodian" KeyboardNavigation.TabIndex="1" Template="{StaticResource TextBoxBaseControlTemplate}" Margin="139,121,339,97" FontFamily="Segoe UI" FontSize="16" VerticalContentAlignment="Center" />
    <Label x:Name="lblCustodian" Content="Custodian: " HorizontalAlignment="Left" Margin="35,134,0,0" VerticalAlignment="Top" FontFamily="Segoe UI" Height="33" FontSize="18"/>
    <TextBox Name="txtBuilding" KeyboardNavigation.TabIndex="2" Template="{StaticResource TextBoxBaseControlTemplate}" Margin="396,59,75,159" FontFamily="Segoe UI" FontSize="16" VerticalContentAlignment="Center" />
    <Label x:Name="lblBuilding" Content="Building: " HorizontalAlignment="Left" Margin="307,72,0,0" VerticalAlignment="Top" FontFamily="Segoe UI" Height="33" FontSize="18"/>
    <TextBox Name="txtRoom" KeyboardNavigation.TabIndex="3" Template="{StaticResource TextBoxBaseControlTemplate}" Margin="396,121,75,97" FontFamily="Segoe UI" FontSize="16" VerticalContentAlignment="Center" />
    <Label x:Name="lblRoom" Content="Room: " HorizontalAlignment="Left" Margin="325,134,0,0" VerticalAlignment="Top" FontFamily="Segoe UI" Height="33" FontSize="18"/>
    <TextBox x:Name="txtDnsName" KeyboardNavigation.TabIndex="1" Template="{StaticResource TextBoxBaseControlTemplate}" Margin="139,183,339,35" FontFamily="Segoe UI" FontSize="16" VerticalContentAlignment="Center" />
    <Label x:Name="lblDnsName" Content="DNS Name: " HorizontalAlignment="Left" Margin="35,196,0,0" VerticalAlignment="Top" FontFamily="Segoe UI" Height="33" FontSize="18"/>
    <Expander x:Name="expAdvanced" Header="Advanced..." HorizontalAlignment="Left" Margin="262,234,0,0" VerticalAlignment="Top">
        <Grid Background="#FFE5E5E5">
            <Label x:Name="lblExpanded" Content="EXPANDED!"/>
        </Grid>
    </Expander>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:45:44.637

检查水平和垂直对齐属性，它们默认设置为拉伸

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:35:01.333

尝试在 TextBoxes 上设置宽度。

# php - 未设置 Cookie，但其余代码正在执行？

> ID：13185770
> 
> 赞同：-1
> 
> 时间：2012-11-01T21:30:09.083
> 
> 标签：php, cookies, error-handling

好吧，这真的很令人困惑。我有两个页面，A 和 B。两者都使用以下代码：

```
 $row = mysqli_fetch_array($data);
     $_SESSION['user_id'] = $row['user_id'];
     $_SESSION['username'] = $row['username'];
     setcookie('user_id', $row['user_id'], time() + (60 * 60 * 24 * 30));    // expires in 30 days
      setcookie('username', $row['username'], time() + (60 * 60 * 24 * 30));  // expires in 30 days
      $home_url = 'http://' . $_SERVER['HTTP_HOST'] . dirname($_SERVER['PHP_SELF']) . '/main.php';
      header('Location: ' . $home_url); 
```

A 将在设置标题后执行代码（为方便起见，将其删除），然后设置标题；B 将在设置标题后执行代码而不设置标题。

我已经检查了无数个答案，并且没有空格，main.php 文件设置为正常，A 和 B 文件看起来相同，但在 IF 语句之前具有不同的内容，这是铁定的。

没有出现错误；重定向（应该设置标题并做出相应的反应，就像您在 B 上注销（因此没有活动的标题）一样），而在 A 上它按预期显示。

设置 cookie 的两个代码块之间的唯一区别（都在 IF 语句中）是 IF 语句是不同的，根据它出现之前的代码。

就 A 和 B 的代码之间的差异而言，我应该注意哪些（如果有的话）？

（PS：我也知道没有设置标题，因为会话没有开始，通过将 IF $_SESSION ... 放在代码末尾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:43:05.127

```
session_start();
$row = mysqli_fetch_array($data);
$_SESSION['user_id'] = $row['user_id'];
$_SESSION['username'] = $row['username'];
setcookie('user_id', $row['user_id'], time() + (60 * 60 * 24 * 30));    // expires in 30 days
setcookie('username', $row['username'], time() + (60 * 60 * 24 * 30));  // expires in 30 days
$home_url = 'http://' . $_SERVER['HTTP_HOST'] . dirname($_SERVER['PHP_SELF']) . '/main.php';
header('Location: ' . $home_url);
exit; 
```

看

*   [PHP：在标头重定向之前会话未保存](https://stackoverflow.com/questions/2968752/php-session-isnt-saving-before-header-redirect)

*   [如何设置 cookie 然后在 PHP 中重定向？](https://stackoverflow.com/questions/612034/how-can-i-set-a-cookie-and-then-redirect-in-php)

# xcode - 将项目添加到一个 tableView 中？！

> ID：13185771
> 
> 赞同：0
> 
> 时间：2012-11-01T21:30:11.567
> 
> 标签：xcode

您好我正在尝试通过以下方法创建动态 tableView。但是我在执行模拟器时遇到了错误。它适用于预先声明的 NSArray，但以下方法不起作用。你能帮我解决这个问题吗？

```
NSMutableArray *mesProduits;
mesProduits = [[NSMutableArray alloc] init];

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellule];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle
                                      reuseIdentifier:cellule];
    }
    for(int index = 0; index < [myObjectsFormulas count]; index = index+13)
    {
        monTest = [myObjectsFormulas objectAtIndex:monIndex];
        monIndex = monIndex+13;
        [mesProduits addObject:monTest];

    }
    NSString *celltext1 = [mesProduits objectAtIndex:indexPath.row];
    cell.textLabel.text = celltext1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:38:51.410

我相信这是您的`cellForRowAtIndexPath`方法，然后执行以下操作：

```
// Declare mesProduits as a property 

- (void) viewDidLoad {  

    // Initialize and assigned values to monIndex and myObjectsFormulas 

    self.mesProduits = [[NSMutableArray alloc] init];
    for(int index = 0; index < [myObjectsFormulas count]; index = index+13)
    {
        monTest = [myObjectsFormulas objectAtIndex:monIndex];
        monIndex = monIndex+13;
        [self.mesProduits addObject:monTest];

    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellule];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle
                                      reuseIdentifier:cellule];
    }
    NSString *celltext1 = [self.mesProduits objectAtIndex:indexPath.row];
    cell.textLabel.text = celltext1;
} 
```

# javascript - 在直接 JavaScript Twitter API 1.1 调用中使用 OAuth 令牌

> ID：13185776
> 
> 赞同：1
> 
> 时间：2012-11-01T21:30:27.240
> 
> 标签：javascript, twitter, oauth

有没有办法直接调用 Twitter v1.1 API，在我的请求中传递 oauth_token 和 oauth_token_secret 值？

我知道让这些可见并不是最佳实践，但我只是在本地运行这个应用程序。

我试图直接传递它们，但出现错误。查看 OAuth 选项卡下的应用程序设置，它使用版本 1 显示“请求 URI”。我似乎无法将其更改为 1.1，我什至不确定这是否是我的错误的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:49:14.683

简短的回答是否定的，这是不可能的。JavaScript 或其他 - 秘密用于生成签名，不仅不应该在 URL 中发送它，而且它什么也做不了。

Twitter 新的“仅应用程序”身份验证实现了 OAuth2，它使用不记名令牌而不是签名。[https://dev.twitter.com/docs/auth/application-only-auth](https://dev.twitter.com/docs/auth/application-only-auth)这将允许像您尝试执行的直接调用，但是从 JavaScript 中您将跨域执行它们，这意味着使用 JSONP 或 CORS . Twitter 也不支持。

您显然已经意识到安全问题，所以我不需要警告您在 JavaScript 中使用不记名令牌是一个坏主意。不仅出于安全原因，还有速率限制！

您可能还喜欢[火烈鸟](http://twproxy.eu)。它是从 JavaScript 调用 Twitter API 的代理。它具有适当的安全功能，可以避免明显的危险。[http://twproxy.eu](http://twproxy.eu)

# css - CSS wordpress 二级子菜单项在悬停时消失

> ID：13185777
> 
> 赞同：1
> 
> 时间：2012-11-01T21:30:28.053
> 
> 标签：css

使用空白 Wordpress 主题创建自定义网站，但它没有任何 CSS 用于下拉子菜单。我基本上可以正常工作，但是当我尝试将光标移动到（事件选项卡）下的第二个下拉项目时，子菜单消失了。

[网站在这里](http://newpathwaysretreat.com)

我以为我已将其全部设置为显示块，以便整个菜单项都是按钮，但这里不是这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:34:49.990

您需要将下拉菜单的 z-index 设置为高于图像。默认情况下，元素的 z-index 为 1，因此任何大于 1 的都可以（除非您另有指定）

# html - htaccess 移动重定向到子目录

> ID：13185780
> 
> 赞同：1
> 
> 时间：2012-11-01T21:30:34.360
> 
> 标签：html, apache, .htaccess, redirect, hosting

我已经调整了此处提供的 htaccess 文件[Mobile Redirect using htaccess](https://stackoverflow.com/questions/3680463/mobile-redirect-using-htaccess)但是，我要做的是检查用户是否已经在子文件夹（而不是子域）domain.co.uk/mobile 中，如果不，将它们重定向到移动网站。

但是，这只是陷入无限循环，因此失败。

谁能告诉我问题是什么以及我是如何做这种 RewriteCond 的？

```
RewriteEngine on
RewriteBase /

# Check if this is the noredirect query string
RewriteCond %{QUERY_STRING} (^|&)m=0(&|$)
# Set a cookie, and skip the next rule
RewriteRule ^ - [CO=mredir:0:www.domain.co.uk]

RewriteCond %{HTTP:x-wap-profile} !^$ [OR]
RewriteCond %{HTTP:Profile}       !^$ [OR]
RewriteCond %{HTTP_USER_AGENT} "acs|alav|alca|amoi|audi|aste|avan|benq|bird|blac|blaz|brew|cell|cldc|cmd-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "dang|doco|eric|hipt|inno|ipaq|java|jigs|kddi|keji|leno|lg-c|lg-d|lg-g|lge-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT}  "maui|maxo|midp|mits|mmef|mobi|mot-|moto|mwbp|nec-|newt|noki|opwv" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "palm|pana|pant|pdxg|phil|play|pluc|port|prox|qtek|qwap|sage|sams|sany" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "sch-|sec-|send|seri|sgh-|shar|sie-|siem|smal|smar|sony|sph-|symb|t-mo" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "teli|tim-|tosh|tsm-|upg1|upsi|vk-v|voda|w3cs|wap-|wapa|wapi" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "wapp|wapr|webc|winw|winw|xda|xda-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "up.browser|up.link|windowssce|iemobile|mini|mmp" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "symbian|midp|wap|phone|pocket|mobile|pda|psp" [NC]
RewriteCond %{HTTP_USER_AGENT} !macintosh [NC]

# Check if we're not already on the mobile site
RewriteCond %{REQUEST_URI} !^/mobile/ [NC]
# Can not read and write cookie in same request, must duplicate condition
RewriteCond %{QUERY_STRING} !(^|&)m=0(&|$) 

# Check to make sure we haven't set the cookie before
RewriteCond %{HTTP_COOKIE} !^.*mredir=0.*$ [NC]

# Now redirect to the mobile site
RewriteRule ^ http://www.domain.co.uk/mobile [R,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:00:15.157

您应该将您的移动网站检查从 更改`!^/mobile/`为`!^[/]?mobile`。Apache 并不总是在`REQUEST_URI`. 此正则表达式使前导斜杠成为可选的，因此无论斜杠是否存在，该规则都将起作用。

# selenium - 在我的 selenium webdriver 测试中获得大约 404 的选项？

> ID：13185783
> 
> 赞同：0
> 
> 时间：2012-11-01T21:30:48.800
> 
> 标签：selenium, webdriver, selenium-webdriver

我在方法级别并行运行我的 selenium webdriver 测试。由于访问次数过多，我看到很多间歇性 404，因此我的测试失败了。我正在浏览捕获这些 404 的解决方案，并遇到了很多 HTMLUnit 和代理选项。一切看起来都不错。但是在深入研究任何这些选项之前，我想就以下我不确定的要求挑选你的大脑？

要求：如果在测试运行期间遇到 404（四处阅读，我确信 webdriver 目前无法做到这一点？），我如何通过/绕过它以使我的测试通过？我能想到的唯一方法是刷新页面直到 404 消失？然后继续？不确定是否有更简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:55:49.040

我认为修复您的 Web 应用程序或减少正在运行的 Selenium 实例的数量会更好。
如果 Web 应用程序不工作，为什么要通过测试？

请注意，**404**是“未找到”错误，请参阅[Wikipedia 上的 HTTP 状态代码列表](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)为什么你得到它们而不是**500**或**503**错误代码？

# java - PowerMock：将 Whitebox.invokeMethod(...) 正确用于将 Object[] 作为参数的方法

> ID：13185784
> 
> 赞同：2
> 
> 时间：2012-11-01T21:30:50.937
> 
> 标签：java, unit-testing, junit, powermock, white-box

```
private boolean isEmpty(Object[] array) {
    if (array == null || array.length == 0) 
        return true;
    for (int i = 0; i < array.length; i++) {
    if (array[i] != null) 
        return false;
    }           

    return true;
}

@Test
public void testIsEmpty() {
        //where is an instance of the class whose method isEmpty() I want to test.
    try {
        Object[] arr = null;
        assertTrue((Boolean)(Whitebox.invokeMethod(where, "isEmpty", new Class<?>[]{Object[].class},  arr)));

        arr = new Object[0];
        assertTrue((Boolean)(Whitebox.invokeMethod(where, "isEmpty", new Class<?>[]{Object[].class}, arr)));

        arr = new Object[]{null, null};
        assertTrue((Boolean)(Whitebox.invokeMethod(where, "isEmpty", new Class<?>[]{Object[].class}, arr)));

        arr = new Object[]{1, 2};
        assertFalse((Boolean)(Whitebox.invokeMethod(where, "isEmpty", new Class<?>[]{Object[].class}, arr)));
    } catch (Exception e) {
        fail(e.getMessage());
    }       
} 
```

问题：java.lang.AssertionError：参数数量错误

研究： 1.最初，我尝试过：invokeMethod(Objecttested, String methodToExecute, Object... arguments)

第 2 次、第 3 次和第 4 次调用方法 () 失败。（错误：未找到给定参数的方法）

我认为这可能是由于 PowerMock 没有推断出正确的方法的问题；因此，我切换到：invokeMethod(Objecttested, String methodToExecute, Class[] argumentTypes, Object... arguments)

1.  父类有一个 isEmpty() 方法，该方法在子类中被完全重复的 isEmpty() 方法覆盖。（遗留代码）没有其他不同签名的 isEmpty() 方法。有许多采用参数的方法，但没有其他采用 Object[] 的方法（例如，没有采用 Integer[] 作为参数的方法）。

2.  在上面的第二个 assertTrue 语句之前，更改为 arr = new Object[1] 会使该断言语句通过。

任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T21:49:24.203

我*认为*它应该通过将参数转换为 Object 来工作，以使 Java 将其作为单个参数，而不是对应于的参数数组`Object...`：

```
Whitebox.invokeMethod(where, "isEmpty", new Class<?>[]{Object[].class}, (Object) arr); 
```

测试用例：

```
public static void main(String[] args) {
    foo(new Object[] {"1", "2"}); // prints arg = 1\narg=2
    foo((Object) (new Object[] {"1", "2"})); // prints args = [Ljava.lang.Object;@969cccc
}

private static void foo(Object... args) {
    for (Object arg : args) {
        System.out.println("arg = " + arg);
    }
} 
```

# javascript - 在谷歌地图上覆盖文本而不删除 dom 事件

> ID：13185793
> 
> 赞同：0
> 
> 时间：2012-11-01T21:31:17.330
> 
> 标签：javascript, google-maps, google-maps-api-3

我想在谷歌地图上覆盖一个时间，但我希望它静态定位在右下角，而不管平移和缩放。我知道我可以通过列出边界更改事件并重新定位它来做到这一点，但这似乎很脏。我希望它作为覆盖的原因是因为我希望它不接管用于平移或缩放的鼠标事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:45:45.197

我会看一下[InfoBox library](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/reference.html)，[这个例子](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/examples/infobox-label.html)看起来像你想要的，只是将它的位置固定在地图 div 而不是地图上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:49:46.737

你的意思是我们通常在谷歌地图底部看到的那个—— ![在此处输入图像描述](../Images/44fcb1e0f6742dcc17686327cb432774.png)

您可以为此使用 CSS，而且非常简单。maps.google 使用的 CSS 是-

```
 bottom: 0;
    position: absolute;
    right: 95px;
    z-index: 1000001;
} 
```

因此，使用此类将您的内容设置在 div 中。这个 div 将是你的地图的子 div 持有 div

# c# - 方法隐藏和“new”关键字

> ID：13185801
> 
> 赞同：3
> 
> 时间：2012-11-01T21:31:42.177
> 
> 标签：c#

在我的一生中，尽管有所有文档，但我从未理解过“方法隐藏”。

覆盖意味着使用派生类中的实现。我是否认为隐藏（通过使用“new”关键字）将意味着使用基类定义？在这种情况下，为什么要在继承类中编写方法？

实际上我的两个问题是：

1.  隐藏是覆盖的反面吗？
2.  new 关键字（用于隐藏）有什么作用以及何时/何地使用它？基类？继承类？
3.  任何有用的现实世界的例子？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-01T21:37:15.870

你的理解有点不对劲。

首先，重写方法意味着即使将实例转换为其基类型，也会使用新的实现，因为在虚拟方法表中有适当的条目。

隐藏方法时，当实例被强制转换为其基类型时，将使用基实现，因为虚拟方法表中没有条目。

给定以下类定义：

```
public class Base
{
    public virtual void Say()
    {
        Console.WriteLine("Hello World!");
    }
}

public class A : Base
{
    public new void Say()
    {
        Console.WriteLine("42");
    }
}

public class B : Base
{
    public override void Say()
    {
        Console.WriteLine("Goodbye, Cruel World!");
    }
} 
```

以下代码将产生：

```
var a = new A();
var b = new B();
var aAsBase = a as Base;
var bAsBase = b as Base;

a.Say(); // 42
aAsBase.Say(); // Hello World!

b.Say(); // Goodbye, Cruel World!
bAsBase.Say(); // Goodbye, CruelWorld! 
```

# c# - 如何使用 async 和 await 使整个应用程序响应而不是单个 UI 控件？

> ID：13185802
> 
> 赞同：0
> 
> 时间：2012-11-01T21:31:42.100
> 
> 标签：c#, wpf, asynchronous, async-await, async-ctp

我正在使用`async`和`await`关键字来使应用程序响应

我`View`在`ViewModel`.

**VIEW：按钮点击事件**

```
 private async void button1_Click(object sender, RoutedEventArgs e)
    {
        button1.IsEnabled = false;

        // Property Change
        _viewModel.Words = await Task.Factory.StartNew(() => File.ReadAllLines("Words.txt").ToList()); // takes time to read about 3 - 4 seconds

        switch (_viewModel.RadioButtonWordOrderSelection)
        {
            case MainWindowViewModel.RadioButtonWordOrderSelections.NormalOrder:
                break;

            case MainWindowViewModel.RadioButtonWordOrderSelections.ReverseOrder:
                await Task.Factory.StartNew(() =>
                                                {
                                                    var words = _viewModel.Words.ToList();
                                                    words.Reverse();
                                                    // Property Change
                                                    _viewModel.Words = words;
                                                });
                break;

            case MainWindowViewModel.RadioButtonWordOrderSelections.Shuffle:
                await Task.Factory.StartNew(() =>
                                                {
                                                    // Property Change
                                                    _viewModel.Words = _viewModel.Words.Shuffle().ToList();
                                                });
                break;
        }

        await Task.Factory.StartNew(() => DownloadSomething(_viewModel.Words)); // takes time to read about 30 - 40 seconds

        button1.IsEnabled = true;
    } 
```

`_viewModel.Progress`在`View`

**视图：私有方法需要 30 - 40 秒才能完成**

```
 private void DownloadSomething(IEnumerable<string> words)
    {
        // Property Change
        _viewModel.Progress = 0;

        foreach (var word in words)
        {
            // Property Change
            _viewModel.Word = word;
            try
            {
                // Some code WebClient download code here
            }
            catch (Exception e)
            {
                //Trace.WriteLine(e.Message);
            }

            // Property Change
            _viewModel.Progress++;
        }
    } 
```

**VIEW：已处理的属性更改事件**

```
 void _viewModel_PropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs e)
    {
        try
        {
            switch(e.PropertyName)
            {
                case "Progress":
                    // Since its a different Thread
                    // http://msdn.microsoft.com/en-us/magazine/cc163328.aspx
                    // Sets the Value on a ProgressBar Control.
                    // This will work as its using the dispatcher

                    // The following works
                    //Dispatcher.Invoke(
                    //    DispatcherPriority.Normal, 
                    //    new Action<double>(SetProgressValue), 
                    //    _viewModel.Progress);

                    // from http://stackoverflow.com/questions/2982498/wpf-dispatcher-the-calling-thread-cannot-access-this-object-because-a-differen
                    progress1.Dispatcher.Invoke(
                        DispatcherPriority.Normal, 
                        new Action(() =>
                        {
                            progress1.Value = _viewModel.Progress;
                        })
                    );

                    // This will throw an exception 
                    // (it's on the wrong thread)
                    //progress1.Value = _viewModel.Progress;
                    break;

                case "Words":
                    // Since its a different Thread
                    // http://msdn.microsoft.com/en-us/magazine/cc163328.aspx
                    // Sets the Max Value on a ProgressBar Control.
                    // This will work as its using the dispatcher

                    // The following Works
                    //Dispatcher.Invoke(
                    //    DispatcherPriority.Normal,
                    //    new Action<double>(SetProgressMaxValue),
                    //    _viewModel.Words.Count);

                    // from http://stackoverflow.com/questions/2982498/wpf-dispatcher-the-calling-thread-cannot-access-this-object-because-a-differen
                    progress1.Dispatcher.Invoke(
                        DispatcherPriority.Normal, 
                        new Action(() =>
                        {
                            progress1.Maximum = _viewModel.Words.Count;
                        })
                    );

                    // This will throw an exception 
                    // (it's on the wrong thread)
                    //progress1.Maximum = _viewModel.Words.Count;
                    break;

                case "Word":
                    // Since its a different Thread
                    // http://msdn.microsoft.com/en-us/magazine/cc163328.aspx
                    // Sets the Contant on a Label Control.
                    // This will work as its using the dispatcher

                    // The following Works
                    //Dispatcher.Invoke(
                    //    DispatcherPriority.Normal,
                    //    new Action<string>(SetLastWordValue),
                    //    _viewModel.Word);

                    // from http://stackoverflow.com/questions/2982498/wpf-dispatcher-the-calling-thread-cannot-access-this-object-because-a-differen
                    labelLastWord.Dispatcher.Invoke(
                        DispatcherPriority.Normal, 
                        new Action(() =>
                        {
                            labelLastWord.Content = _viewModel.Word;
                        })
                    );

                    // This will throw an exception 
                    // (it's on the wrong thread)
                    //labelLastWord.Content = _viewModel.Word;
                    break;

                case "RadioButtonWordOrderSelection":
                    break;

                default:
                    throw new NotImplementedException("[Not implemented for 'Property Name': " + e.PropertyName + "]");
            }
        }
        catch(Exception ex)
        {
            MessageBox.Show(ex.Message + "\n" + ex.StackTrace);
        }
    } 
```

为 progressBar1 和 labelLastWord 完美更新了 UI！我遇到了一个问题，当progressBar1 和labelLastWord 正在更新UI 的其余部分时被冻结。

有没有办法解决这个问题？

我非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:03:13.483

我强烈建议您遵循[基于任务的异步编程文档](http://www.microsoft.com/en-us/download/details.aspx?id=19957)中的指南。这比仅仅通过将工作分流到线程池要好得多`StartNew`。如果您*确实*有 CPU 密集型操作，则可以使用`Task.Run`，但对于其他所有操作，请使用现有`async`的 -ready 端点。

此外，我发现将整个 VM 视为在 UI 上下文中很有用。所以`PropertyChanged`总是在 UI 上下文中提出。数据绑定尤其依赖于此。

```
private async Task<List<string>> ReadAllLinesAsync(string file)
{
  var ret = new List<string>();
  using (var reader = new StreamReader(file))
  {
    string str = await reader.ReadLineAsync();
    while (str != null)
    {
      ret.Add(str);
      str = await reader.ReadLineAsync();
    }
  }
  return ret;
}

private async void button1_Click(object sender, RoutedEventArgs e)
{
  button1.IsEnabled = false;

  _viewModel.Words = await ReadAllLinesAsync("Words.txt");

  List<string> words;
  switch (_viewModel.RadioButtonWordOrderSelection)
  {
    case MainWindowViewModel.RadioButtonWordOrderSelections.NormalOrder:
      break;

    case MainWindowViewModel.RadioButtonWordOrderSelections.ReverseOrder:
      await Task.Run(() =>
      {
        words = _viewModel.Words.ToList();
        words.Reverse();
      });
      _viewModel.Words = words;
      break;

    case MainWindowViewModel.RadioButtonWordOrderSelections.Shuffle:
      await Task.Run(() =>
      {
        words = _viewModel.Words.Shuffle().ToList();
      });
      _viewModel.Words = words;
      break;
  }

  await DownloadSomething(_viewModel.Words);

  button1.IsEnabled = true;
}

private async Task DownloadSomething(IEnumerable<string> words)
{
  _viewModel.Progress = 0;

  foreach (var word in words)
  {
    _viewModel.Word = word;
    try
    {
      await ...; // async WebClient/HttpClient code here
    }
    catch (Exception e)
    {
      //Trace.WriteLine(e.Message);
    }

    _viewModel.Progress++;
  }
}

void _viewModel_PropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs e)
{
  try
  {
    switch(e.PropertyName)
    {
      case "Progress":
        progress1.Value = _viewModel.Progress;
        break;

      case "Words":
        progress1.Maximum = _viewModel.Words.Count;
        break;

      case "Word":
        labelLastWord.Content = _viewModel.Word;
        break;

      case "RadioButtonWordOrderSelection":
        break;

      default:
        throw new NotImplementedException("[Not implemented for 'Property Name': " + e.PropertyName + "]");
    }
  }
  catch(Exception ex)
  {
    MessageBox.Show(ex.Message + "\n" + ex.StackTrace);
  }
} 
```

最后，我建议您购买并通读[Josh Smith 的 MVVM 书](http://joshsmithonwpf.wordpress.com/advanced-mvvm/)。您正在使用诸如“视图”和“视图模型”之类的术语，但是您使用这些组件的方式，您*完全*避免了 MVVM 模式的所有优点。

# qt - 如何使用 QT Gui 渲染由单元格矩阵定义的地图？

> ID：13185808
> 
> 赞同：1
> 
> 时间：2012-11-01T21:32:07.137
> 
> 标签：qt, user-interface, 2d

我必须使用 QT 在概览模式下渲染由单元矩阵定义的地图（想想 GPS 地图）。我希望能够放大它，每个单元格都由它的颜色和一些属性（放置在单元格上的位图）定义。我还需要，就像在 GPS 中一样，能够在地图中四处移动（使用方向箭头）。

现在，我正在考虑在我的屏幕上绘制一个 QImage 矩阵，并用我需要的单元格的信息来加载它们中的每一个，但这似乎不是一个很好的解决方案。

感谢您提供的每一种可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:23:21.087

您最初的想法是一个合理的想法，但是将`QImages`您需要的所有和信息放入自定义`QGraphicsItem`中并将它们添加到 a `QGraphicsScene`（并固定它们的位置） - 然后您只需要 a`QGraphicsView`来可视化所有内容。通过这种方式，您可以免费获得 BSP 绘画和选择优化、视图转换和漂亮的动画（如果需要！）。

# c++ - 排序结构的数组

> ID：13185809
> 
> 赞同：-2
> 
> 时间：2012-11-01T21:32:11.037
> 
> 标签：c++, arrays, sorting, struct

我正在为我的 C++ 类做作业（作业粘贴在我的 test.cpp 文件的底部）。直到最后一个要求，我都正确实现了所有内容（使用 sort_name 函数，根据学生的姓氏对学生结构进行排序，对于每个学生，根据班级名称对他或她上的班级进行排序。使用通过从 main 调用显示函数）。我最初尝试通过仅对学生进行排序来实现我的排序功能，但我不断出错并卡住（当前错误是：839a4 Vasilkovskiy.exe 中 0x777a15de 处的未处理异常：0xC00000FD：堆栈溢出）。任何帮助将不胜感激。

注意：我知道向量对于排序更有用，但我们的教授不希望我们使用它们。

```
#include <iostream>
#include <string>
#include <stdio.h>
#include <string.h>
#include <iomanip>
using namespace std;

struct Class
{
    string title; 
    int units;
    char grade;

};
struct Student
{
    string name;
    double gpa;
    Class classes[500];
};

int const SIZE = 50;
void initStudent(Student[], int);
void readStudent(Student[], int,  int&);
void gpaCalculate(Student&);
void print(Student[], int);
void sort_name(Student[], int);
void swapStus(Student&, Student&);
void stringToCharArray(string, char[]);
int locactionOfFirstName(Student[], int, int);

int main()
{   
    int numberOfStudents = 0;
    Student students[SIZE];
    initStudent(students, SIZE);
    readStudent(students, SIZE, numberOfStudents);

    for(int i = 0; students[i].name != "";i++)
        gpaCalculate(students[i]);
    print(students, numberOfStudents);
    sort_name(students, numberOfStudents);

    system("pause");
    return 0;
}
void initStudent(Student st[], int s)
{
    for(int i = 0; i < s; i++)
    {
        st[i].gpa = 0.0;
    }

}

void readStudent(Student st[], int s, int& nStus)
{
    for(int i = 0; i < s; i++)
    {   
        string tmpName;

        cout << "Enter student name: ";
        getline(cin, tmpName);
        if(tmpName == "")
            break;
        st[i].name = tmpName;
        nStus++;

        for(int j = 0; j < 500; j++)
        {   
            string tmpTitle;
            cout << "Enter class title: ";
            getline(cin, tmpTitle);
            if (tmpTitle == "")
                break;
            st[i].classes[j].title = tmpTitle;

            cout << "Enter units for " << st[i].classes[j].title << ": " ;
            cin >> st[i].classes[j].units;
            cout << "Enter grade for " << st[i].classes[j].title << ": " ;
            cin >> st[i].classes[j].grade;
            cin.ignore();
        }   
    }
}

void gpaCalculate (Student& s)
{
    double unitsByPoints = 0;
    double totalUnits = 0;

    for (int i = 0; s.classes[i].title != ""; i++)
    {

        int grade = 0;
        char ltrGrade = s.classes[i].grade;
        switch (ltrGrade)
        {
        case 'A':
            grade = 4;
                break;
        case 'B':
            grade = 3;
                break;
        case 'C':
            grade = 2;
                break;
        case 'D':
            grade = 1;
                break;
        case 'F':
            grade = 0;
                break;
        }
        unitsByPoints += s.classes[i].units*grade;
        totalUnits += s.classes[i].units;

    }
    s.gpa = unitsByPoints/totalUnits;
}

void print(Student st[], int size)
{

    for (int i = 0; i < size; i++)
    {
        cout << "Student's name: " <<  st[i].name << endl;
        for (int j = 0; st[i].classes[j].title != ""; j++)
        {
            cout << st[i].classes[j].title << "," << st[i].classes[j].grade << endl;
        }
        cout << fixed << setprecision(2) << "GPA: " <<  st[i].gpa << endl;
    }
}

//void sort_name(Student st[], int size)
//{ 
//  for(int i = 0; i < size; i++)
//  {
//      int smallest = locactionOfFirstName(st, i, size);
//      swapStus(st[i], st[smallest]);
//  }
//
//}

void swapStus(Student& s1, Student& s2)
{
    Student tempStu;
    tempStu = s1;
    s1 = s2;
    s2 = tempStu;
}

void stringToCharArray(string s, char c[])
{
    char tempCharArray[50];
    for(int i = 0; s[i] != '\n'; i++)
    {
        tempCharArray[i] = s[i];
    }
    char * space = strstr(tempCharArray," ");
    strcpy(c,space);
}

bool lastNameCompare(string l1, string l2)
{
    char lName1[50];
    char lName2[50];
    stringToCharArray(l1, lName1);
    stringToCharArray(l2, lName2);
    return (strcmp(lName1, lName2) >=0);
}

int locactionOfFirstName(Student st[],int start, int size)
{
    char lName1[50];
    char lName2[50];
    stringToCharArray(st[0].name, lName1);
    int i;
    for(i = start; i < size;)
    {
        stringToCharArray(st[i].name, lName2);
        if(strcmp(lName1, lName2) >= 0 )
        {
            stringToCharArray(st[i].name, lName1);
        }
    }
    return i;
}

void InsertItem(Student values[], int startIndex, int endIndex)
{
  bool finished = false;
  int current = endIndex;
  bool moreToSearch = (current != startIndex);

  while (moreToSearch && !finished)
  {
    if (lastNameCompare(values[current-1].name, values[current].name))
    {
      swapStus(values[current], values[current-1]);
      current--;
      moreToSearch = (current != startIndex);
    }
    else
      finished = true;
  }
}

void sort_name(Student values[], int numValues)
{
  for (int count = 0; count < numValues; count++)
    InsertItem(values, 0, count);
}
/*

Define a structure called Class (with uppercase C) with the following data:
title, units and grade.

Define a structure called Student with the following data:
name (full name), gpa, and classes which is an array of Class structures (all the classes the student has taken so far).

Write an initialize function that receives an array of Student structures and its size and sets the gpa of all to 0.0.

In main, create 50 Students and call the above function to initialize the gpa for all 50 Students to 0.0\. 

Then, pass the array of student structures and its size to a read function that will read student data from the user and store the entered data in the array of student structures.  The user will enter student name followed by the class title, units and grade received for each class he or she has taken.  When finished entering class information for a student, the user will just press Enter (an empty string) and to end entering more students, he or she will do the same for the student name. 

Example:

Enter student name: Maria Gomez

Enter class title: English 101
Enter units for English 101: 3 
Enter grade for English 101: A

Enter class title: Math 201
Enter units for Math 201: 4
Enter grade for Math 201: B

Enter class title: [User enters RETURN to indicate no more classes]

Enter student name: Kevin Duran

Enter class title: Poly Sci 101
Enter units for Poly Sci 101: 3 
Enter grade for Poly Sci 101: A

Enter class title: Math 201
Enter units for Math 201: 4
Enter grade for Math 201: B

Enter class title: [User enters RETURN to indicate no more classes]

Enter student name: [User enters RETURN to indicate no more students]

Once all Studnets have been entered, pass each element of the array of Student structures (element by element) to a gpa function which will compute and return the gpa for each Student using the classes array within each Student structure which contains the units and grade for each class taken by the student.  Store the gpa returned by the above function in the gpa member of the Student structures.  GPA is calculated by multiplying the number of units for each class by the points received for that class, and then adding all these products together and dividing it by total number of units.  The points received for a class is based on the grade: for A, it's 4; for B, it's 3; for C, it's 2; for D it's 1; and for F it's 0\.  For example, if a student has take 3 classes with 3, 4, and 3 units and has received A, B, and C for these classes, respectively, then, the GPA will be 3 x 4 + 4 x 3 + 3 x 2 / 10 = 3.0.

Print all students showing name, followed by all classes taken, the grade received and the gpa using a display function which receives the array and its size as parameters.

Then, using a sort_name function, sort the student structures based on their last names and for each student, sort the classes he or she is taking based on class title.  Display the sorted list of students using the display function by calling it from main.

For example:

Kevn Duran
Poly Sci 101, A
Math 150, B
GPA: 3.0

Maria Gomez:
English 101, A
Math 201, C
GPA: 2.9

Robert Small
Comp Science 801, C
Comp Science 802, D
GPA: 1.9

Tom Wang
Comp Science 808, A
Comp Science 839, B
GPA: 3.5

Then, sort the students based on their GPA's using a sort_gpa function and print the list again using the display function. 

Then, ask what to search for - name or gpa.  If name is selected, read a student name from the user and, using a binary search function that takes the array, its size and the name to search for, finds the student and displays all of his or her information (name, gpa, units and list of classes taken).

Example:

Enter a student name:  Robert Small

Robert Small:
Comp Science 801, C
Comp Science 802, B
GPA: 2.5

If GPA is selected, read a GPA and using another binary search find the student with the given GPA by passing the students array, its size and the GPA to search for.  Display the name of the student with the specified GPA in main.  

Example:

Enter GPA to search for:  2.5

Robert Small was found with the GPA of 2.5

If the name or GPA is not found, tell the user it was not found; e.g.: There was no student with a GPA of 2.5; or Robert Small was not found.

Then, pass the array of student atructures and the size to a stats function which will return the average of the GPA's of all students and through two reference parameters will output the student structures that have the minimum and maximum GPA's.  Print the average GPA, as well as the names of the students who have the minimum and maximum GPA in main, like so:

Average GPA = 3.17

Robert Small has the minimum GPA of 2.5.

Tom Wang has the maximum GPA of 3.5\. 

Finally, read a maximum and minimum GPA from the user and pass the array of student structures and its size, as well as two other arrays of student structures of the same size to a function which will store all students with a GPA of above the minimum in the highGPA array and all those with a GPA below the maximum in the lowGPA array.  Display the students stored in these two arrays by passing them each from main to the display function.  In other words, the highlow function receives two uninitalized arrays of student structures and populates them based on the GPA criteria passed to it (minimum GPA and maximum GPA).  Then, upon return to main, main passes each of these arrays to the display function to display them.  For example, if the user enters 2.0 for the maximum GPA, the lowGPA array gets filled out with all those students who have a GPA of less than 2.0\.  Likewise, if the minimum GPA is 3.5, the highlow function populates the highGPA array with those students who have a GPA of 3.5 or higher.

Example:

Enter maximum GPA:  2.0

Enter minimum GPA:  3.5

Students with a GPA of lower than 2.0:

Robert Small 1.9

Students with a GPA of 3.5 or higher:

Tom Wang 3.5

When writing the highlow function, take advantage of the fact that the array elements are sorted based on the GPA, so to find all the students with a GPA of equal to or higher than the minimum GPA, it doesn't make sense to start from the first element in the array. Instead you can start from the midpoint. If the midpoint is lower than the minimum GPA, you can increment the index until the midpoint is no longer smaller and then all the GPA's from that point on will be larger and part of the high GPA's.  For low GPA's of course, you'd want to start from the beginning of the array and compare and store each that's lower than the maximum until they are no longer lower.

Functions you must write for this assignment (in addition to main):

initialize, read, display, sort_name, sort_gpa, search-name, search_gpa, stats, highlow.

Upload your cpp and exe files using the Browse and Upload buttons below and click Finish once both have been uploaded to the site.*/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T23:04:59.427

我帮你调试好了。

问题出在你的`stringToCharArray(string s, char c[])`.

我的索引在出现“分段错误”之前到达`i`。`104`由于您所有的字符串都有长度`50`，因此您显然超出了界限。

另一个问题是`srtstr`返回`NULL`，但这与第一个问题有关。

快速查看您的`sort_name`并`InsertItem`没有显示任何错误，至少在“分段错误”领域，因为不清楚您要做什么，但至少您正在执行正确的索引检查。

# github - Github Enterprise 如何保护他们在虚拟机上交付的代码？

> ID：13185814
> 
> 赞同：12
> 
> 时间：2012-11-01T21:32:40.530
> 
> 标签：github, github-enterprise

我想知道他们在 Github Enterprise (http://enterprise.github.com) 解决方案中使用了哪些类型的保护。因为我不拥有一家可能会购买它的公司，所以我不愿意撒谎，只是为了得到一份副本并尝试自己看。

但我真的很想知道他们使用什么样的策略来保护他们交付的代码，因为它可能被任何其他 Rails 应用程序使用。

这个问题不是“如何保护我的 Ruby 代码”，而是他们如何保护整个设备，不仅仅是 Ruby 代码，还有更多依赖服务，运行在 ubuntu linux 服务器上。

我有一些理论可以提供帮助：

*   他们可能正在使用 Ruby Encoder 来保护 ruby​​ 代码
*   他们可能正在使用 TrueCrypt 创建一个特殊的分区来安装所有代码和所需的应用程序，并创建了一个特殊的加载程序来以某种方式执行该代码，而无需向系统上的任何其他用户授予读/写权限。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-18T06:24:54.467

他们目前正在使用经过修改的 RubyEncoder。

来源：[我问](https://github.com/holman/feedback/issues/345)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:47:16.593

我不认识 Ruby，但[他们说](https://enterprise.github.com/pricing)：

> ### 许可证是否包括对源代码的访问？
> 
> 不可以。许可证仅涵盖软件的使用。不允许修改和重新分发。

它不一定必须使用任何技术来保护，最终可能会被破坏。您正在签订合同，如果您不遵守其中的规定，您可能最终会上法庭。我想这是一个相互信任的问题。

# java - 在主类中实例化时构造函数的正确用法是什么？

> ID：13185815
> 
> 赞同：5
> 
> 时间：2012-11-01T21:32:43.690
> 
> 标签：java, constructor

我的老师编写和组织代码的方式与我的补充教科书中提出的非常不同。在最近的一个实验中，我们需要使用该`wheels`库在一个窗口中显示多个对象。这是`Snowman`我老师写的课程（为方便起见，未包含其他对象的代码）：

```
public class Snowman {
    private Ellipse _top;
    private Ellipse _middle;
    private Ellipse _bottom;

public Snowman() {
        _top = new Ellipse();
        _top.setColor(Color.WHITE);
        _top.setFrameColor(Color.BLACK);
        _top.setFrameThickness(1);
        _top.setSize(80, 80);
        _middle = new Ellipse();
        _middle.setColor(Color.WHITE);
        _middle.setFrameColor(Color.BLACK);
        _middle.setFrameThickness(1);
        _middle.setSize(120, 120);
        _bottom = new Ellipse();
        _bottom.setColor(Color.WHITE);
        _bottom.setFrameColor(Color.BLACK);
        _bottom.setFrameThickness(1);
        _bottom.setSize(160, 160);
    }
    public void setLocation(int x, int y) {
        _top.setLocation(x + 40, y - 170);
        _middle.setLocation(x + 20, y - 100);
        _bottom.setLocation(x, y);
    }
} 
```

除其他外，此对象稍后在`SnowmanCartoon`类中实例化：

```
public class SnowmanCartoon extends Frame{
    private Snowman _snowman;
    private Eyes _eyes;
    private Hat _hat;
    private Bubble _bubble;

    public SnowmanCartoon() {
        _snowman = new Snowman();
        _snowman.setLocation(100, 300);
        _eyes = new Eyes();
        _eyes.setLocation(165, 150);        
        _hat = new Hat();
        _hat.setLocation(152, 98);
        _bubble = new Bubble();
        _bubble.setLocation(280, 60);
    }
    public static void main(String[] args) {
        new SnowmanCartoon();
    }
} 
```

* * *

以下是我的担忧：

1.  在这两个类中，为什么会有一个与类同名的方法，它的目的是什么？

2.  为什么该方法`setLocation()`是 void 方法，而该方法`Snowman()`不是，即使`Snowman()`不返回任何内容？

3.  在`SnowmanCartoon`类中，当它说`private Snowman _snowman;`and时`_snowman = new Snowman();`，是`Snowman`指`Snowman`类还是`Snowman()`方法？

4.  如果`Snowman`对象的实例化是指`Snowman()`设置其所有属性的方法，为什么我不需要使用点运算符：`Snowman.Snowman()`？

5.  在我的教科书中，实例变量和方法在一个类中声明并在另一个类中实例化。但是，它们似乎同时出现在我老师的代码中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T21:35:56.417

与类同名的方法称为类的“构造函数”。它用于实例化对象。

例子：

```
public class MyClass { // class
    public MyClass() { // constructor

    }
} 
```

请注意，构造函数就像任何其他方法一样，但是它没有返回类型。它基本上返回“this”对象。

你打电话时

```
MyClass a = new MyClass(); 
```

这实际上将调用构造函数并创建对象。

请注意，通过使用不同数量和类型的参数，您可以在一个类中拥有多个构造函数。

在java中，如果你不包含任何构造函数，那么任何类都会默认有默认的无参数构造函数。

```
public MyClass() {
} 
```

大量关于在线构造函数的信息。它们是开始学习面向对象编程的基本概念。更多信息[在这里](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)。

--EDIT-- 回答关于如何调用特定问题的问题。

取这两个构造函数

```
public MyClass(){
// do things
}

public MyClass(String p){
// do things
} 
```

然后当你实例化对象

```
MyClass c = new MyClass(); // use constructor 1
MyClass d = new MyClass("value"); // use constructor 2 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T21:33:51.343

`public Snowman() {...}`被称为构造函数。这将在您为此类创建对象时调用。如果您没有定义构造函数，jvm 会为您隐式创建一个。请阅读此[javadoc](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)以了解有关构造函数的更多信息。

`Snowman()`不是方法，是构造函数。构造函数没有返回类型。如果添加返回类型，它将被视为方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-01T21:42:56.913

> 在这两个类中，为什么会有一个与类同名的“方法”？

这种方法称为构造函数。如果它不带参数，则称为“默认构造函数”。构造函数是您用来构建实例的东西，即。`Snowman s = new Snowman();`调用默认构造函数。

> 为什么方法 setLocation 是一个 void 方法，但 Snowman 不是一个，即使它没有返回任何东西？

因为构造函数不同于普通方法。他们返回其对象的一个​​实例，即`new Snowman()`返回一个新的雪人实例，其默认状态。

> 在主要的 SnowmanCartoon 类中，当它说私有雪人 _snowman 时；和_snowman = new Snowman();，它是指Snowman 类，还是指Snowman() 方法？

如果您曾经看到`new Snowman()`（或任何等价物），那总是指构造函数。

> 既然是这样，为什么我不需要运行 Snowman.Snowman() 来设置所有属性，因为它是一种方法，而不是 public static void main？

当你运行你的程序时，你并没有运行你的课程。您正在实例化对象的实例以用于其他操作。说`Snowman s = new Snowman()`给你留下了一个`Snowman`命名的对象`s`，这样你现在就可以用那个对象做事了。

> 在 Head First Java 中，实例变量和方法在单独的类中声明，而在单独的类中实例化。在这里，这似乎同时发生，但我不明白如何。

这个问题对我来说没有多大意义。

> 在主类中，当我创建一个新的 SnowmanCartoon 时，为什么我不需要做一些事情来启动它，比如创建窗口等？

这是因为该类正在扩展`Frame`。`Frame`具有基类 ( ) 使用的默认操作`SnowmanCartoon`。所以简而言之，你的超级班级正在为你处理这个问题。

希望有帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-01T21:38:47.237

这在java中称为[构造函数。](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)执行此操作时会调用此方法

```
Snowman s = new Snowman(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-01T21:38:06.093

1 这不是方法，而是构造函数。

2 void 只是一个返回类型。void 表示该方法不返回任何内容。并且构造函数没有返回值。

3 它指的是 Snowman() 构造函数。这不是一种方法。它创建一个雪人对象。

5 您可以将雪人对象的实例化放在不同的类中。我猜你的老师为了简单起见把它放在同一个班级里。

6 我假设 JVM 会处理它。

# c# - 使用 LINQ，如何从 GroupBy 子句返回对象？

> ID：13185818
> 
> 赞同：0
> 
> 时间：2012-11-01T21:32:54.337
> 
> 标签：c#, sql, linq, entity-framework

感谢您的关注！

# 背景

在我的 C# 代码中，我从一个 MSSQL 数据库调用一个存储过程，它返回用户所下订单的历史记录。我为此使用实体框架。这是代码：

```
var db = new CustomerEntities();
return db.GetOrderHistoryByUserId(id); 
```

此存储过程的输出是一个订单列表，其中包含多个相同的记录，`OrderNumber`因为给定订单中可能有多个产品。所以我修改了我的代码，如下所示：

```
var db = new CustomerEntities();
return db.GetOrderHistoryByUserId(id).GroupBy(p => p.OrderNumber); 
```

我希望现在有一个`Order`包含嵌套`Product`对象的对象列表，但是这段代码基本上产生了与以前相同的响应。

最终，我只想将此查询转换为如下所示的 JSON 响应：

```
Orders : [
{
OrderNumber : 1,
OrderTotal: $500,
Products: [
  {ProductSku : 11111, ProductPrice: $200},
  {ProductSku : 22222, ProductPrice: $300}
]
}
] 
```

我正在使用 MVC 4 来帮助生成 JSON 输出，所以我已经很清楚这部分了，我只需要知道如何以生成具有所需结构的对象数组的方式使用存储过程的结果。

# 问题

有没有办法通过对存储过程的原始 LINQ 调用来生成这种所需的对象结构，或者我是否需要迭代存储过程的结果并构造一个新对象？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:00:30.337

```
var serializer = new JavaScriptSerializer();
var rows = db.GetOrderHistoryByUserId(id);
var json = serializer.Serialize(
       new { Orders = rows.GroupBy(o => o.Number)
                          .Select(g =>
                                new
                                {
                                    OrderNumber = g.Key,
                                    OrderTotal = g.Sum(o => o.Price),
                                    Products = g.Select(
                                       o => new {SKU = o.Sku, ProductPrice = o.Price}
                                    )
                                 })
            }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:49:46.623

在发布之前，我实际上确实在早些时候寻求过帮助，但我刚刚得到了答案。我需要一个`Select`子句：

```
var db = new CustomerEntities();
return db.GetOrderHistoryByUserId(id).GroupBy(o => o.OrderNumber).Select(g => new {Order = g.Key, Items = g}); 
```

[单击此处查看最终帮助我的网页。](http://code.msdn.microsoft.com/LINQ-to-DataSets-Grouping-c62703ea)

希望这可以帮助某人。

# javascript - 是否允许发出无限数量的 XMLHTTP 请求对象？

> ID：13185821
> 
> 赞同：1
> 
> 时间：2012-11-01T21:33:16.607
> 
> 标签：javascript, ajax

关于并发 ajax 请求，我查看了此页面：

[流行的浏览器允许多少并发 AJAX (XmlHttpRequest) 请求？](https://stackoverflow.com/questions/561046/how-many-concurrent-ajax-xmlhttprequest-requests-are-allowed-in-popular-browse)

但是如果 onload 我有 js 脚本用代码创建许多 http 对象怎么办：

```
// JavaScript Document
//declare xmlhttp object
var xmlhttp = false;
var xmlhttp2 = false;

//determine browser/connection type

if (window.XMLHttpRequest)
{
    xmlhttp = new XMLHttpRequest(); 
    xmlhttp2 = new XMLHttpRequest(); 
}
else if (window.ActiveXObject)
{
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    xmlhttp2 = new ActiveXObject("Microsoft.XMLHTTP");
} 
```

我有大约 6 个不同的 js 脚本，这些脚本都是为执行略有不同的 ajax 功能而定制的。

我的问题是，如果我在页面加载时创建了 6-10 个不同的 xmlhttp 对象，这会不会是个问题？

此外，即使我有 20 个不同的定制 ajax 脚本，除了我上面提到的之外，只要我同时运行的不超过 3 个，它们都可以同时存在，只要它们使用不同的全局变量，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:17:29.237

您可以创建的此类对象的数量仅受可用内存的限制，即对于所有实际目的而言，它是无限的。正如您提到的问题中提到的那样，没有立即提供服务的那些会排队。实际上，这意味着您的应用程序可能需要很长时间才能加载。

我会尽量保持尽可能低的并发连接数（<5）。更多的连接会使用户体验更差。如果您有大量连接，服务器也可能会阻止您。

# c# - 从其他类调用类方法不起作用

> ID：13185822
> 
> 赞同：2
> 
> 时间：2012-11-01T21:33:16.717
> 
> 标签：c#, visual-studio-2010, navigation, browser

我正在尝试从另一个类中调用类“Form1”中的方法。这是我的代码

```
namespace WindowsFormsApplication1
{

    public partial  class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            MessageBox.Show("loaded");
            orders.ObjectForScripting = new ScriptInterface();
        }

        private void webBrowser2_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e) { }
        private void button1_Click_1(object sender, EventArgs e) { }

    }

    [System.Runtime.InteropServices.ComVisibleAttribute(true)]
    public class ScriptInterface
    {
        public void callMe(string currid)
        {
            MessageBox.Show(currid);
            // the following throws security error
            Form1.webBrowser2.Navigate("http://www.mywebpage.com/client/index.php?id="+currid);
        }
    }

} 
```

信息：我有 2 个网络浏览器。我正在从 webBrowser1 捕获事件以更新 webBrowser2。我的问题是，我不能在 Form1 之外调用 webbrowser2 方法。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:48:44.353

您的 WebBrowser 组件不是静态的（这是一件好事），因此您不能直接从 Form1 引用它们，因为您的代码示例正在尝试这样做。您必须获得对 Form1 实例的引用，然后您可以在它们上调用方法，只要它们被标记为 public。根据您的需要，将引用直接传递给您的 WebBrowser 组件可能会更好

也许是这样的：

```
orders.ObjectForScripting = new ScriptInterface(this.webBrowser2); 
```

...

```
public class ScriptInterface
{
    private WebBrowser _browser;

    public ScriptInterface(WebBrowser browser)
    {
        _browser = browser;
    }
    public void callMe(string currid)
    {
        _browser.Navigate("http://www.mywebpage.com/client/index.php?id="+currid);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:41:23.590

表格 1：

```
Form1.webBrowser2.Navigate(...) 
```

不是一个对象，但它是你的类型。你需要创建你的类的一个实例，或者如果你愿意，创建一个能够调用它的方法的对象：

```
Form1 form = new Form1();
form.webBrowser2.Navigate(...) 
```

最重要的是，您的方法已标记`private`，这意味着它们只能从您的实例内部调用。`public`如果您希望其他对象能够调用它们，则应该标记它们。

```
public void webBrowser2_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e) { ... } 
```

或者，如果您不想创建实例，则可以将此方法声明为`static`

```
public static void webBrowser2_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e) { ... } 
```

但是您将无法访问此类定义的字段，除非它们也是静态的。

# android - 如何在不同的移动平台上以相同的方式显示内容？

> ID：13185826
> 
> 赞同：0
> 
> 时间：2012-11-01T21:33:25.053
> 
> 标签：android, html, ios, mobile, cross-platform

我希望在我的移动应用程序上显示一个动态生成的 HTML 页面。此 HTML 文件采用固定结构。包括表单、图像和按钮。但是，当涉及到不同的移动平台时，例如 ios 和 android。还有不同的手机，比如 sumsung 或其他公司的 android。显示结果不同。其中一些非常糟糕。这个问题对于安卓系统来说更严重，因为有很多不同的公司使用这个系统。

现在我正在使用一种方法，当用户使用应用程序时，应用程序将使用用户使用的手机型号发送请求。服务器端将为该手机选择正确的 HTML 模板。这意味着我必须为每部手机编写一个 HTML 模板。考虑这些天增加手机型号，我认为这不是一个明智的主意。

我希望如果有人可以帮助我想出一个解决这个问题的解决方案。无论是基于用户手机型号动态生成 HTML 模板的解决方案，还是创建 HTML 的通用方式都适合所有移动显示。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:54:53.347

如果我正确理解您的问题，我强烈建议您使用 Twitter Bootstrap 来设计您的 html 页面。这非常易于使用，您可以设计根据屏幕调整自身大小的网页。twitter bootstrap 中定义的响应式 css 为您处理所有屏幕尺寸，并根据屏幕尺寸动态呈现 html 页面，而不会妨碍/扭曲 html 代码的外观和感觉。

您可以从这里获取源代码并了解有关它的所有信息[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

这是一个使用 twitter 引导带制作的演示页面。您可以尝试在浏览器窗口中打开它，然后调整窗口大小以查看页面内容如何重新排列

[http://brocknunn.com/bootstrap-untame/](http://brocknunn.com/bootstrap-untame/)

以下是一些帮助您快速使用 Twitter Bootstrap 的 tuts

[http://untame.net/2012/07/twitter-bootstrap-part-1-what-is-bootstrap-anyway/](http://untame.net/2012/07/twitter-bootstrap-part-1-what-is-bootstrap-anyway/)

[http://untame.net/2012/07/twitter-bootstrap-part-2-design-a-responsive-homepage/](http://untame.net/2012/07/twitter-bootstrap-part-2-design-a-responsive-homepage/)

我只是将它用于我有自定义 html 页面的 Android 应用程序之一。它为我节省了很多精力和时间。我只需要花几个小时来了解如何在 html 页面中安排事情，我就准备好了。我希望这将帮助您大大减少手动工作并节省大量时间。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:44:19.637

我肯定会建议给电话间隙看看（http://phonegap.com/）

此外，您绝对应该在 CSS 中使用百分比以兼容所有分辨率（包括台式机和笔记本电脑）

能够说这就是我的网站看起来的日子已经一去不复返了，你最好让你的分辨率匹配它！

还可以考虑只提供 2 种类型的网站，一种是手机（所有图片都变小了），另一种是桌面，图片尺寸更大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T21:39:07.680

尝试调整您的设计以按相对大小缩放事物。Android 有一种针对不同设备调整应用程序大小的技术，您应该这样做并为一系列设备创建通用站点模板。

例如，使用百分比，并为屏幕尺寸超过 5 英寸的设备提供不同的模板。

# jquery - jquery - 制作复合选择器

> ID：13185828
> 
> 赞同：1
> 
> 时间：2012-11-01T21:33:34.470
> 
> 标签：jquery

我有几个按钮具有相同的类但适用于不同的数据（专辑），所以我添加了一个 ID 来区分它们。因为每张专辑都有一个唯一的 ID，所以我不必担心一个页面上有多个 ID：

```
<button class="addalbum" id="add<?php echo $a->album_id; ?>">Add album</button>

so the IDs would look like: #add121, #add122, etc. 
```

**如何为 jQuery 函数选择这些 id 之一？**我尝试了下面的代码：

```
var a = $(elm).attr('id');

$('.addalbum' + a).click(function() {
//stuff here
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:36:04.900

改变

```
$('.addalbum' + a).click(function() {
//stuff here
}); 
```

至

```
$('#' + a).click(function() {
//stuff here
}); 
```

由于 ID 是唯一的，因此无需在其前面加上任何类别。此外，您需要在 id 前面加上`#`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:38:00.160

好吧，这将是#id-name

```
var a = $(elm).attr('id');
$('#'+a).click(function() {
//stuff here
}); 
```

让我知道它是否有帮助；）

# opengl - glDrawElement 的 OpenGL 渲染问题

> ID：13185833
> 
> 赞同：0
> 
> 时间：2012-11-01T21:33:55.717
> 
> 标签：opengl, rendering, vbo

当谈到我应该为我的 OpenGL 延迟渲染使用什么功能时，我有点困惑。

我有一个 VBO 列表（顶点缓冲区对象）

每个都代表一种顶点，可能是（位置+颜色）

我也有一个 indeces

当我想渲染不同的对象时，我的问题就来了

我使用 DirectX 方式，您 1) 激活顶点缓冲区 2) 激活索引缓冲区 3) 然后在绘图调用中指定原始类型从顶点缓冲区的起始顶点、最小顶点索引、顶点计数、开始索引和原始计数

由于我可以使用openGL，所以我丢失了：

glDrawElements - 但这使用渲染模式、对象计数、索引字节类型和索引

这基本上告诉我它将在 VBO 的开头呈现，如果我在那里有多个对象，这对我没有任何帮助。

任何人都知道openGL有什么渲染功能，我可以指定VBO中从哪里开始渲染并指定我的起始顶点位置？我希望有人有任何想法=\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:50:45.660

glDrawElements 不是从 VBO 的开头开始，而是从您指定要开始的指针的任何位置开始。

如果你有一个 VBO 并且你想从它的后半部分开始渲染，那么你将字节偏移设置为从作为 glVertexAttribPointer 的最后一个属性开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:58:46.140

编辑：我刚刚意识到，如果您不使用着色器，这可能不适用，但由于我不熟悉旧版 OpenGL，我不确定我的帖子对您​​有什么好处。您正在使用/定位哪个版本？

[我最近在这里](https://stackoverflow.com/questions/13170037/how-to-use-gldrawelements-while-keeping-texture-coordinates-correct)问了一个关于 glDrawElements 的问题。希望我发布的内容能提供一些解释/示例。

我理解它的方式：你的索引是由*你*决定的，所以如果你想从第二个顶点开始，你可以尝试（一个基本的骨架，没有 glVertexAttribPointer 调用等，但如果你愿意，我可以添加这些）：

```
const float VBOdata = {
    //Some X and Y  coordinates for triangle1 (in the first quadrant)
    //(z = 0, w = 1 and are not strictly necessary here)
     0.0f,  1.0f, 0.0f, 1.0f //index 0
     0.0f,  0.0f, 0.0f, 1.0f  //1
     1.0f,  0.0f, 0.0f, 1.0f  //2

    //Some X and Y coordinates for triangle2 (in the second quadrant)
     0.0f, -1.0f, 0.0f, 1.0f  //3
     0.0f,  0.0f, 0.0f, 1.0f  //4
    -1.0f,  0.0f, 0.0f, 1.0f  //5

    //Now some color data (all white)
     1.0f, 1.0f, 1.0f, 1.0f,  //0
     1.0f, 1.0f, 1.0f, 1.0f,  //1
     1.0f, 1.0f, 1.0f, 1.0f,  //2

     1.0f, 1.0f, 1.0f, 1.0f,  //3
     1.0f, 1.0f, 1.0f, 1.0f,  //4
     1.0f, 1.0f, 1.0f, 1.0f,  //5
    };

const GLubyte indices[] = {
    3, 4, 5, 
};

glDrawElements(GL_TRIANGLES, 3, GL_UNSIGNED_BYTE, indices); 
```

其中 GL_TRIANGLES 是原语的类型，3 是“索引”中元素的数量，GL_UNSIGNED_BYTE 是如何解释它们，“索引”只是数组的名称。

这应该只绘制第二个三角形。您也可以尝试[glDrawElementsBaseVertex](http://www.opengl.org/sdk/docs/man4/xhtml/glDrawElementsBaseVertex.xml)，但我自己没有亲自尝试过。我收集到的是，您将从 0 开始生成/显式编码您的索引，但给出一个偏移量，以便它实际上在 0+offset、1+offset 等处读取。

这有帮助吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T01:57:02.577

你有几个选择。

`glVertexAttribPointer`您可以通过在绘制该对象之前发出更多调用来重新定位每个特定对象的顶点数据的起点。或者您可以使用[glDrawElementsBaseVertex](http://www.opengl.org/wiki/GLAPI/glDrawElementsBaseVertex)，您可以在其中指定一个顶点索引，将所有获取的索引都添加到该索引中。

后者应该在仍然支持的任何非英特尔硬件上可用。

# perl - 使用 win32:ole perl 逐行读取 MS Word 表格数据

> ID：13185835
> 
> 赞同：6
> 
> 时间：2012-11-01T21:34:20.470
> 
> 标签：perl, ms-word, perl-module, win32ole

我是 perl 中 win32:ole 模块的新手。我正在尝试在命令提示符下打印 MS 字表数据行。但我只能打印表格的最后一行。你能帮我解决这个问题吗？提前致谢。

下面是我的代码：

```
#!/usr/bin/perl 
use strict;
use warnings; 
use File::Spec::Functions qw( catfile );
use Win32::OLE qw(in); 
use Win32::OLE::Const 'Microsoft Word'; 
$Win32::OLE::Warn = 3; 

my $word = get_word(); 
$word->{DisplayAlerts} = wdAlertsNone; 
$word->{Visible} = 1;
my $doc = $word->{Documents}->Open('C:\\PerlScripts\\myTest.docx');
my $tables = $word->ActiveDocument->{'Tables'};

for my $table (in $tables)
{
   my $tableText = $table->ConvertToText({ Separator => wdSeparateByTabs });
   print "Table: ". $tableText->Text(). "\n";
}

$doc->Close(0); 

sub get_word 
{ 
    my $word; 
    eval { $word = Win32::OLE->GetActiveObject('Word.Application');}; 
    die "$@\n" if $@;
    unless(defined $word) 
    { 
       $word = Win32::OLE->new('Word.Application', sub { $_[0]->Quit }) 
       or die "Oops, cannot start Word: ", Win32::OLE->LastError, "\n"; 
    } 
  return $word; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-11T14:07:11.883

将所有文档表提取到单个 xls 文件中

```
 sub doParseDoc {

           my $msg     = '' ; 
           my $ret     = 1 ; # assume failure at the beginning ...

           $msg        = 'START --- doParseDoc' ; 
           $objLogger->LogDebugMsg( $msg );
           $msg        = 'using the following DocFile: "' . $DocFile . '"' ; 
           $objLogger->LogInfoMsg( $msg );
           #-----------------------------------------------------------------------
           #Using OLE + OLE constants for Variants and OLE enumeration for Enumerations

           # Create a new Excel workbook
           my $objWorkBook = Spreadsheet::WriteExcel->new("$DocFile" . '.xls');

           # Add a worksheet
           my $objWorkSheet = $objWorkBook->add_worksheet();

           my $var1 = Win32::OLE::Variant->new(VT_BOOL, 'true');

           Win32::OLE->Option(Warn => \&Carp::croak);
           use constant true => 0;

           # at this point you should have the Word application opened in UI with t
           # the DocFile
           # build the MS Word object during run-time 
           my $objMSWord = Win32::OLE->GetActiveObject('Word.Application')
                             or Win32::OLE->new('Word.Application', 'Quit');  

           # build the doc object during run-time 
           my $objDoc   = $objMSWord->Documents->Open($DocFile)
                 or die "Could not open ", $DocFile, " Error:", Win32::OLE->LastError();

           #Set the screen to Visible, so that you can see what is going on
           $objMSWord->{'Visible'} = 1;
           # try NOT printing directly to the file

            #$objMSWord->ActiveDocument->SaveAs({Filename => 'AlteredTest.docx', 
                                        #FileFormat => wdFormatDocument});

           my $tables        = $objMSWord->ActiveDocument->Tables();
           my $tableText     = '' ;   
           my $xlsRow        = 1 ; 

           for my $table (in $tables){
              # extract the table text as a single string
              #$tableText = $table->ConvertToText({ Separator => 'wdSeparateByTabs' });
              # cheated those properties from here: 
              # https://msdn.microsoft.com/en-us/library/aa537149(v=office.11).aspx#officewordautomatingtablesdata_populateatablewithdata
              my $RowsCount = $table->{'Rows'}->{'Count'} ; 
              my $ColsCount = $table->{'Columns'}->{'Count'} ; 

              # disgard the tables having different than 5 columns count
              next unless ( $ColsCount == 5 ) ;

              $msg           = "Rows Count: $RowsCount " ; 
              $msg           .= "Cols Count: $ColsCount " ; 
              $objLogger->LogDebugMsg ( $msg ) ; 

              #my $tableRange = $table->ConvertToText({ Separator => '##' });
              # OBS !!! simple print WILL print to your doc file use Select ?!
              #$objLogger->LogDebugMsg ( $tableRange . "\n" );
              # skip the header row
              foreach my $row ( 0..$RowsCount ) {
                 foreach my $col (0..$ColsCount) {

                    # nope ... $table->cell($row,$col)->->{'WrapText'} = 1 ; 
                    # nope $table->cell($row,$col)->{'WordWrap'} = 1  ;
                    # so so $table->cell($row,$col)->WordWrap() ; 

                    my $txt = ''; 
                    # well some 1% of the values are so nasty that we really give up on them ... 
                    eval {
                       $txt = $table->cell($row,$col)->range->{'Text'}; 
                       #replace all the ctrl chars by space
                       $txt =~ s/\r/ /g   ; 
                       $txt =~ s/[^\040-\176]/ /g  ; 
                       # perform some cleansing - ColName<primary key>=> ColName
                       #$txt =~ s#^(.[a-zA-Z_0-9]*)(\<.*)#$1#g ; 

                       # this will most probably brake your cmd ... 
                       # $objLogger->LogDebugMsg ( "row: $row , col: $col with txt: $txt \n" ) ; 
                    } or $txt = 'N/A' ; 

                    # Write a formatted and unformatted string, row and column notation.
                    $objWorkSheet->write($xlsRow, $col, $txt);

                 } #eof foreach col

                 # we just want to dump all the tables into the one sheet
                 $xlsRow++ ; 
               } #eof foreach row
               sleep 1 ; 
           }  #eof foreach table

           # close the opened in the UI document
           $objMSWord->ActiveDocument->Close;

           # OBS !!! now we are able to print 
           $objLogger->LogDebugMsg ( $tableText . "\n" );

           # exit the whole Word application
           $objMSWord->Quit;

           return ( $ret , $msg ) ; 
     }
     #eof sub doParseDoc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T00:36:32.527

无论如何都不是一个完美的解决方案，但这是该问题的一个进步。

我使用了一个字符串分隔符“\n\n”，它产生以下输出......

需要进一步的黑客攻击:(

```
C:\StackOverflow>perl  word.pl meTest.docx
Table: Header1
Header2
Header3
Header4
Row1-Cell1
Row1-Cell2
Row1-Cell3
Row1-Cell4
Row2-Cell1
Row2-Cell2
Row2-Cell3
Row2-Cell4
Row2-Cell5 
```

这是代码。我已经注释掉了表格循环中的一些其他代码，这些代码用于破解 $tableRange->{Text} 取消注释以进一步实验返回的数据。

```
#!/usr/bin/perl 
use strict;
use warnings; 
use File::Spec::Functions qw( catfile );
use Win32::OLE qw(in); 
use Win32::OLE::Const 'Microsoft Word'; 
$Win32::OLE::Warn = 3; 

my $word = get_word(); 
$word->{DisplayAlerts} = wdAlertsNone; 
$word->{Visible} = 1;
my $doc = $word->{Documents}->Open('meTest.docx');
my $tables = $word->ActiveDocument->{'Tables'};

for my $table (in $tables)
{
   my $tableRange = $table->ConvertToText({ Separator => "\n\n" });
   print "Table: \n" . $tableRange->{Text}. "\n";
   # foreach $word (split/\n/, $tableRange->{Text}) {
   #  print $word . "\n" ;
   #  # $userinput =  <STDIN>;
   # }
}

$doc->Close(0); 

sub get_word 
{ 
    my $word; 
    eval { $word = Win32::OLE->GetActiveObject('Word.Application');}; 
    die "$@\n" if $@;
    unless(defined $word) 
    { 
       $word = Win32::OLE->new('Word.Application', sub { $_[0]->Quit }) 
       or die "Oops, cannot start Word: ", Win32::OLE->LastError, "\n"; 
    } 
  return $word; 
} 
```

抱歉，我无法提供更多帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T07:24:08.397

使用下面的代码行

```
my $doc = $word->Documents->Open('C:\\PerlScripts\\myTest.docx');
my $tables = $word->{'Tables'}; 
```

而不是下面的代码

```
my $doc = $word->{Documents}->Open('C:\\PerlScripts\\myTest.docx');
my $tables = $word->ActiveDocument->{'Tables'}; 
```

你的问题得到解决。

# c# - 没有用户名/密码的 Exchange Web 服务授权

> ID：13185836
> 
> 赞同：4
> 
> 时间：2012-11-01T21:34:25.900
> 
> 标签：c#, authentication, exchangewebservices

我正在开发一个代表用户使用 Exchange Web 服务 API 的项目。虽然我可以使用用户名、域和密码轻松进行身份验证，但我必须将这些凭据以纯文本形式存储在服务器上。有什么方法可以存储某种授权令牌，这样我就不需要存储用户名和密码？

或者，我正在考虑实施一个非常基本的对称加密方案，其中用户的密码将使用用户的一些静态知识进行加密。即最简单的情况，他们的用户名的哈希。这样，凭证至少不是纯文本形式，需要他们对应用程序进行逆向工程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-02T17:01:22.147

在这里复活一个老问题，但这是一个解决方案：

设置服务帐户并赋予其模拟权限。

MSDN 文章：

[如何：配置模拟](https://msdn.microsoft.com/en-us/library/office/dn722376(v=exchg.150).aspx)

[使用 EWS 托管 API 2.0 处理模拟](https://msdn.microsoft.com/en-us/library/office/dd633680(v=exchg.80).aspx)

# php - 在 PHP 中使用测试条件

> ID：13185839
> 
> 赞同：1
> 
> 时间：2012-11-01T21:34:37.760
> 
> 标签：php

我想在我的 php.ini 的测试条件中使用当前文件名。

例如：

```
if ('current page' == editprofile.php) {
     // some code;
 } 
```

我该如何测试这个？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T21:36:52.860

将 basename() 与 __FILE__ 常量结合使用。

```
if(basename(__FILE__) == "editprofile.php") {
    // some code;
} 
```

`stripos`如果您正在寻找这样的原始速度，它甚至可能会更快使用......

```
if(stripos(__FILE__, "editprofile.php") !== false) {
  // Some Code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:38:07.760

如[本页](http://php.net/manual/en/language.constants.predefined.php)所述，您需要使用`__FILE__`

> 文件的完整路径和文件名。如果在包含中使用，则返回包含文件的名称。自 PHP 4.0.2 起，__FILE__ 始终包含一个绝对路径，其中符号链接已解析，而在旧版本中，它在某些情况下包含相对路径。

这些就是所谓的魔法常数，它们提供有关上下文的信息。在该页面上，您可以找到所有有效的常量。

因为它包含一个完整的路径，你仍然需要处理这个值：

```
$filename = basename(__FILE__); 
```

# linq - System.Data.Linq 未在 MVC .NET 4.5 中加载

> ID：13185842
> 
> 赞同：0
> 
> 时间：2012-11-01T21:34:46.550
> 
> 标签：linq, asp.net-mvc-4

我在 .NET 4.5（VS 2012）中有一个 ASP.NET MVC4 Web 应用程序项目。它在VB中。它无法加载 System.Data.Linq 命名空间（包含所有类和子命名空间）。项目有一个对 System.Data.Linq.dll 的引用集。

任何想法问题出在哪里？

当我尝试添加 Linq2Sql 类时，我收到这样的警告：

```
Namespace or type specified in the Imports 'System.Data.Linq' doesn't contain 
any public member or cannot be found. Make sure the namespace or the type is 
defined and contains at least one public member. Make sure the imported element 
name doesn't use any aliases. 
```

和这样的错误：

```
System.Data.Linq.DataContext 
```

但这只是一个开始：如果我尝试使用 System.Data.Linq 命名空间中的任何内容，我会收到一个错误，例如，如果我尝试使用 System.Data.Linq.Mapping.DatabaseAttribute，我会收到这样的错误：

```
Type 'System.Data.Linq.Mapping.DatabaseAttribute' is not defined. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-29T10:32:14.997

I had this same problem - and was able to get past it. I'm not entirely sure which of these steps resolved the issue - but this is what I did.

1.  I had originally created the dbml under app_code/gcm
2.  I removed references to System.Data.DataSetExtensions
3.  I deleted the dbml and recreated it outside of the app_code folder
4.  I built the project (no errors/warnings)
5.  I moved the dbml back to the app_code folder and rebuilt (again no errors/warnings)

Hope that helps you get around this.

# c# - 尝试连接到 excel 2010 不起作用

> ID：13185848
> 
> 赞同：1
> 
> 时间：2012-11-01T21:35:15.057
> 
> 标签：c#, excel-2010

我遇到了这个异常：“Microsoft.ACE.OLEDB.12.0”提供程序未在本地计算机上注册。

我试图用 OleDBConnection 连接 Excel 2010 文件。我有 Windows 7 64 位和 Office 2010 32 位。

我尝试安装 Microsoft Access Database Engine 2010 Redistributable，建议来自： [The 'Microsoft.ACE.OLEDB.12.0' provider is not registered in the local machine](https://stackoverflow.com/questions/1646409/the-microsoft-ace-oledb-12-0-provider-is-not-registered-in-the-local-machine)

我也试过这个建议： [http ://social.msdn.microsoft.com/Forums/en-US/vstsdb/thread/1d5c04c7-157f-4955-a14b-41d912d50a64](http://social.msdn.microsoft.com/Forums/en-US/vstsdb/thread/1d5c04c7-157f-4955-a14b-41d912d50a64)

它们都不适合我。有人帮忙吗？

这是我的代码： string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=d:\Sample.xlsx;Mode=Share Deny Write;Extended Properties=\"HDR=YES;\";Jet OLEDB:发动机类型=37";

```
OleDbConnection connection = new OleDbConnection(connectionString);

try
{
    connection.Open();

    OleDbCommand command = new OleDbCommand("SELECT * FROM [Sheet1$]", connection);
    OleDbDataAdapter adapter = new OleDbDataAdapter();
    adapter.SelectCommand = command;

    DataSet ds = new DataSet();
    adapter.Fill(ds);

    ds.Tables[0].Rows.Count.Dump();

}
catch (Exception)
{            
    throw;
}
finally
{
    connection.Close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:40:58.113

这是关于此错误的讨论，请参考它并让我知道它是否适合您。

[怎么修](http://social.msdn.microsoft.com/Forums/en-US/vstsdb/thread/1d5c04c7-157f-4955-a14b-41d912d50a64)

此致

尝试先安装这个：http: [//www.microsoft.com/download/en/details.aspx?id=13255](http://www.microsoft.com/download/en/details.aspx?id=13255)

尝试以下方法：

注意：这确实适用于 office 2010，即使它适用于 2007 office

1.  下载并安装：[在这里下载](http://www.microsoft.com/download/en/confirmation.aspx?id=23734)

2.  在 VS 点击添加数据源，按照向导。

# jquery - 我应该通过 RequireJS 加载所有内容，包括 jQuery 吗？

> ID：13185850
> 
> 赞同：3
> 
> 时间：2012-11-01T21:35:25.037
> 
> 标签：jquery, dom, backbone.js, module, requirejs

我正在构建一个单页 Web 应用程序，其中一个要求是 jQuery、jQuery-ui 和我决定在开发期间使用的任何 jquery 插件。

我还在研究 RequireJS 和 Backbone 以形成应用程序的 MVC 结构。虽然我毫不怀疑 RequireJS 在加载我创建的 Backbone MVC 模块时会非常有用，但我对使用它来加载 jQuery 及其插件有些漠不关心。

这是因为我认为 jQuery 可以在全局命名空间中使用，因为它将在整个应用程序的任何地方使用。

所以我的问题是：在模块化组件和我认为必要的全局组件 jQuery 之间进行这样的分离可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:06:59.610

我们做了类似的事情并且不使用 require 来加载诸如 jQuery 和下划线之类的“全局”组件，尽管我们确实使用 require 来加载我们的模块。我认为这两种方法都是有效的（使用 require 加载 jQuery 或不加载）。

选择 requireJS 来加载您的自定义模块的原因之一是因为您希望在构建和部署过程中运行优化器，以最大限度地减少应用程序必须加载的脚本文件的数量。优化器（例如 r.js）可以跟踪您指定到 requireJS 的依赖项，以帮助确定要创建哪些捆绑的 JS 文件。如果您使用多个第三方库，您可能希望将它们捆绑到一个 JS 文件中. 这将是选择使用 requireJS 加载 jQuery 的原因之一。

否则，我认为这取决于您的喜好。如果您在应用程序中使用 requireJS，我不知道为什么您“应该”使用 requireJS 加载 jQuery 的技术原因。

我建议阅读这份文件。它更多的是关于如何而不是为什么，但它仍然是有用的信息：[http ://requirejs.org/docs/jquery.html](http://requirejs.org/docs/jquery.html)

也看看这个示例项目：[https ://github.com/jrburke/require-jquery](https://github.com/jrburke/require-jquery)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:04:08.790

你想要这样的东西：

```
require.config({
  baseUrl: "/js/",
  paths: {
    jquery: 'libs/jquery/jquery-1.7.1',
    'jquery.mobile-config': 'libs/jqm/jquery.mobile-config',
    'jquery.mobile': 'libs/jqm/jquery.mobile-1.1.0',
    'jquery.mobile.asyncfilter': 'libs/jqm/asyncfilter',
    underscore: 'libs/underscore/underscore-1.3.3',
    backbone: 'libs/backbone/backbone-0.9.2',
    templates: '../templates'
  },
  shim: {
          'underscore': {
            exports: "_"
          },
          'backbone': {
              //These script dependencies should be loaded before loading
              //backbone.js
              deps: ['jquery','underscore'],
              //Once loaded, use the global 'Backbone' as the
              //module value.
              exports: 'Backbone'
          },
          'jquery.mobile-config': ['jquery'],
          'jquery.mobile': ['jquery','jquery.mobile-config'],
          'jquery.mobile.asyncfilter': ['jquery.mobile'],
        }
});

require([
  'jquery',
  'app',
  'jquery.mobile','jquery.mobile.asyncfilter'
], function( $, App ){
    $(function(){
      App.initialize();
    });
}); 
```

在你的情况下，你会用 jquery-ui 的东西替换 jquery-mobile 的东西。同样的想法。Jquery 足够聪明，可以将自己置于全局命名空间中，其余的则不是（一般而言），具体取决于您的版本。希望这可以帮助你。请记住，如果您使用与 amd 不兼容的库，则需要将其放入 shim 中，就像您在上面看到的那样。垫片是手动（也就是你自己）包装库的快捷方式。

# ruby - 如何查询 Couchbase 1.8 JSON？

> ID：13185851
> 
> 赞同：0
> 
> 时间：2012-11-01T21:35:41.877
> 
> 标签：ruby, nosql, couchbase

我是沙发基地的新手。

我正在查看新的 Couchbase 2 beta 版本，JSON 文档、索引、视图、查询看起来都很棒。

问题是我必须在 1.8 版下开发，我无法查询我的 JSON 对象。我是使用 ruby​​ 客户端。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:50:35.753

我想 Couchbase 1.8 不支持这个功能。

# c# - 应用程序测试放置事件的最佳场所

> ID：13185855
> 
> 赞同：1
> 
> 时间：2012-11-01T21:35:59.647
> 
> 标签：c#, wpf, mvvm

在尝试使用 WPF 跟踪 MVVM 时，我遇到了一个我不确定将代码放在哪里进行测试的情况。btnReset_Click 方法 UI 命令中的所有行，所以我不知道它们是否属于视图模型，但我也不想将代码放在我的代码后面。我列出了我想到的两个选项，但也对另一种解决方案持开放态度。

```
Public class  Main : Window
    {
      private void btnReset_Click(object sender, RoutedEventArgs e)
            {
                DynamicStackPanel.Children.Clear();
                controls.Clear();
                txtUsername.Text = string.Empty;
                txtPassword.Text = string.Empty;
                txtResponse.Text = string.Empty;
                cbxTestEnvironment.SelectedValue = string.Empty;
                cbxOperation.SelectedItem = null;
                cbxTestEnvironment.SelectedItem = null;
            }
    } 
```

或者

```
public class MainViewModel : DependencyObject
    {

    public MainViewModel : DependancyObject
    {
          public MainViewModel(UtilityMain win)
        {
          win.btnReset.Click +=btnReset_Click;

        }

 private void btnReset_Click(object sender, RoutedEventArgs e)
        {
            DynamicStackPanel.Children.Clear();
            controls.Clear();
            txtUsername.Text = string.Empty;
            txtPassword.Text = string.Empty;
            txtResponse.Text = string.Empty;
            cbxTestEnvironment.SelectedValue = string.Empty;
            cbxOperation.SelectedItem = null;
            cbxTestEnvironment.SelectedItem = null;
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:26:57.407

这并不是真正的 MVVM 方法。视图模型不应包含对视图的任何引用，但它应表示视图逻辑。同样，视图应该包含尽可能少的视图逻辑。您应该能够通过结合使用数据和命令绑定来实现这种分离。将视图中的控件绑定到视图模型的数据属性。从视图绑定到视图模型上的命令以调用视图逻辑。视图模型对数据而不是 UI 控件进行操作。ui 控件通过数据绑定从视图模型更新。重点是将您的 UI 控件与视图逻辑分开。

# php - 多个表单提交1提交javascript一半工作

> ID：13185864
> 
> 赞同：2
> 
> 时间：2012-11-01T21:36:41.153
> 
> 标签：php, javascript, html, mysql, forms

我在 1 页中有 2 个表单需要提交我似乎受到限制，因为它是 mikrotik 的热点。mikrotic 路由器中的 login.html 是

```
<html>
<head><title>...</title></head>
<body>
$(if chap-id)
<noscript>
<center><b>JavaScript required. Enable JavaScript to continue.</b></center>
</noscript>
$(endif)
<center>If you are not redirected in a few seconds, click 'continue' below<br>
<form name="redirect" action="http://domain.name/login.php" method="post">
<input type="hidden" name="mac" value="$(mac)">
<input type="hidden" name="ip" value="$(ip)">
<input type="hidden" name="username" value="$(username)">
<input type="hidden" name="link-login" value="$(link-login)">
<input type="hidden" name="link-orig" value="$(link-orig)">
<input type="hidden" name="error" value="$(error)">
<input type="hidden" name="chap-id" value="$(chap-id)">
<input type="hidden" name="chap-challenge" value="$(chap-challenge)">
<input type="hidden" name="link-login-only" value="$(link-login-only)">
<input type="hidden" name="link-orig-esc" value="$(link-orig-esc)">
<input type="hidden" name="mac-esc" value="$(mac-esc)">
<input type="submit" value="continue">
</form>
<script language="JavaScript">
<!--
document.redirect.submit();
//-->
</script></center>
</body>
</html> 
```

那么我的 login.php 就是这个

```
<?php
   $mac=$_POST['mac'];
   $ip=$_POST['ip'];
   $username=$_POST['username'];
   $linklogin=$_POST['link-login'];
   $linkorig=$_POST['link-orig'];
   $error=$_POST['error'];
   $chapid=$_POST['chap-id'];
   $chapchallenge=$_POST['chap-challenge'];
   $linkloginonly=$_POST['link-login-only'];
   $linkorigesc=$_POST['link-orig-esc'];
   $macesc=$_POST['mac-esc'];   
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>mikrotik hotspot > login</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="expires" content="-1" />
<style type="text/css">
body {color: #737373; font-size: 10px; font-family: verdana;}

textarea,input,select {
background-color: #FDFBFB;
border: 1px solid #BBBBBB;
padding: 2px;
margin: 1px;
font-size: 14px;
color: #808080;
}
 a, a:link, a:visited, a:active { color: #AAAAAA; text-decoration: none; font-size:   
 10px; }
a:hover { border-bottom: 1px dotted #c1c1c1; color: #AAAAAA; }
img {border: none;}
td { font-size: 14px; color: #7A7A7A; }
</style>
<script language="JavaScript">
  function fnSubmit (){
     var form1Content = document.getElementById("form1").innerHTML;
     var form2Content = document.getElementById("form2").innerHTML;
 var form3Content = document.getElementById("form3").innerHTML;
     document.getElementById("toSubmit").innerHTML=form1Content+form2Content;
             document.forms.toSubmit.submit();
  }
  </script>
</head>

<body>
<!-- $(if chap-id) -->

    <form name="sendin" action="<?php echo $linkloginonly; ?>" method="post"          id="form1">
    <input type="hidden" name="username" />
    <input type="hidden" name="password" />
    <input type="hidden" name="dst" value="<?php echo $linkorig; ?>" />
    <input type="hidden" name="popup" value="true" />
</form>

<script type="text/javascript" src="./md5.js"></script>
<script type="text/javascript">
<!--
    function doLogin() {
            <?php if(strlen($chapid) < 1) echo "return true;\n"; ?>
    document.sendin.username.value = document.login.username.value;
    document.sendin.password.value = hexMD5('<?php echo $chapid; ?>' +         document.login.password.value + '<?php echo $chapchallenge; ?>');
    document.sendin.submit();
    return false;
    }
//-->
</script>
    <!-- $(endif) -->
     <div align="center">
    <a href="<?php echo $linkloginonly; ?>?target=lv&dst=<?php echo $linkorigesc; ?>">Hotspot</a>
 </div>
   <table width="100%" style="margin-top: 10%;">
<tr>
<td align="center" valign="middle">
Please log on to use the mikrotik hotspot service
    </div><br />
    <table width="240" height="240" style="border: 1px solid #cccccc; padding: 0px;"     cellpadding="0" cellspacing="0">
<tr>
<td align="center" valign="bottom" height="175" colspan="2">
    <!-- removed $(if chap-id) $(endif)  around OnSubmit -->
    <form method="POST" action="signin.php" id="form2">
   First Name<p><input type="text" name="firstname" size="30"></p>
    Surname<p><input type="text" name="lastname" size="30"></p>
Email address <font color="red"> (required)</font><p><input type="text"  name="email" size="30"></p>
    <input type="submit" value="submit" onclick="javascript:fnSubmit();"/>
 </form>
  <form name="login" id="form3 action="<?php echo $linkloginonly; ?>" method="post" onSubmit="return doLogin()" >
        <input type="hidden" name="dst" value="<?php echo $linkorig; ?>" />
        <input type="hidden" name="popup" value="true" />   
        <table width="100" style="background-color: #ffffff">
            <tr><td align="right"></td>
            <td><input type="hidden" style="width: 80px" name="username" type="text" value="user2"/></td>
            </tr>
            <tr><td align="right"></td>
            <td><input type="hidden" style="width: 80px" name="password" type="password" value="user2"/></td>
            </tr>
            <tr><td> </td>
            <td><td></td></td></td>
            </tr>
        </table>
    </form>

    </td>
    </tr>
</table>

<!-- $(if error) -->
<br /><div style="color: #FF8080; font-size: 9px"><?php echo $error; ?></div>
<!-- $(endif) -->

</td>
</tr>
</table>

<script type="text/javascript">
<!--
  document.login.username.focus();
//-->

</script>

</body>
</html> 
```

如您所见，我试图自动提交用户名和密码，以便用户只输入他的电子邮件地址，为此我想将电子邮件存储在带有 signin.php 的数据库中，这就是

```
<?php
ini_set('display_errors', 'On');
 // Receiving variables
@$pfw_ip= $_SERVER['REMOTE_ADDR'];
@$firstname = addslashes($_POST['firstname']);
@$lastname = addslashes($_POST['lastname']);
@$email = addslashes($_POST['email']);
@$date = addslashes($_POST['date']);

// Validation
if (! ereg('[A-Za-z0-9_-]+\@[A-Za-z0-9_-]+\.[A-Za-z0-9_-]+', $email))
{
die("<p align='center'><font face='Arial' size='3' color='#FF0000'>Please enter a valid    email</font></p>");
}

if (strlen($email) == 0 )
{
die("<p align='center'><font face='Arial' size='3' color='#FF0000'>Please enter a valid email</font></p>");
}

            /* adding user information to the userinfo table */
                        @$pfw_strQuery = "INSERT INTO userinfo (firstname, lastname, email, creationdate) values ".
                "('$firstname', '$lastname', '$email', NOW())";

@$pfw_host = "localhost";
@$pfw_user = "dbusername";
@$pfw_pw = "dbpassword";
@$pfw_db = "database";

$pfw_link = mysql_connect($pfw_host, $pfw_user, $pfw_pw);
if (!$pfw_link) {
 die('Could not connect: ' . mysql_error());
}
$pfw_db_selected = mysql_select_db($pfw_db, $pfw_link);
if (!$pfw_db_selected) {
die ('Can not use $pfw_db : ' . mysql_error());
}

//insert new record
$pfw_result = mysql_query($pfw_strQuery);
if (!$pfw_result) {
 die('Invalid query: ' . mysql_error());
}
mysql_close($pfw_link);

header('Location: http://www.google.co.uk');  

?> 
```

发生的情况是电子邮件地址存储在 mysql 表中，但存储用户名和密码的表单没有通过，我最终进入登录页面

我错过了什么？

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:19:04.787

好的，答案是消除 login.php 中的所有 javascript，并使用简单的表单，其中 signin.php 使用 pap login 传递用户名和密码。所有的工作和快乐快乐的兔子

# sql - SQL查询获取最后两条记录的DateDiff

> ID：13185869
> 
> 赞同：4
> 
> 时间：2012-11-01T21:36:54.523
> 
> 标签：sql, sql-server, datediff

我在 SQL Server 2008 R2 中有一个名为 Event 的表，其中 eventNum 作为主键，日期作为 datetime2(7)。我正在尝试获取表中最后两行的日期并以分钟为单位获取差异。这是我目前拥有的：

```
Select DATEDIFF(MI, e.date,(Select e2.date from Event e2 where eventNum = (Select MAX(e2.eventNum))))
    From Event e
    Where eventNum = (Select MAX(e.eventNum)-1 from e) 
```

我得到这个错误：

> 无效的列名“从事件中选择 eventNum，其中 eventNum = 从事件中选择 MAX(eventNum)”。

我已经更改了 100 次，但无法使其正常工作。有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T21:42:19.777

你可以使用`ROW_NUMBER`

```
WITH CTE AS 
(
   SELECT RN = ROW_NUMBER() OVER (ORDER BY eventNum DESC)
        , date
   FROM Event 
)
SELECT Minutes = DATEDIFF(minute, 
           (SELECT date FROM CTE WHERE RN = 2),
           (SELECT date FROM CTE WHERE RN = 1)) 
```

小提琴：[http ://www.sqlfiddle.com/#!3/3e9c8/17/0](http://www.sqlfiddle.com/#!3/3e9c8/17/0)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T22:06:42.393

这不必像蒂姆的回答那样经过表两次。

```
select datediff(mi, min(x.date), max(x.date))
from (
    select top(2) *
    from Event e
    order by eventNum desc
) x 
```

![在此处输入图像描述](../Images/c862b3123fae65bb0abc3fb58bf3c3ff.png)

假设您总是有 2 条或更多记录，并且时间单调增加，那么上述工作。

*   如果它只有一条记录，则返回 0（因为 max=min=singular record）。
*   如果您的时间不是单调增加的，可以对这个查询进行简单的调整

例如

```
select top(1) datediff(mi, x.date, y.date)
from event x
join event y on y.eventnum < x.eventnum
order by x.eventnum desc, y.eventnum desc 
```

# mysql - Mysql时间戳数据类型

> ID：13185871
> 
> 赞同：1
> 
> 时间：2012-11-01T21:37:00.837
> 
> 标签：mysql, timestamp

我对时间戳数据类型有一些疑问。我是否正确理解，如果我使用时间戳，它将以 UTC 存储日期时间？当我检索数据时，它会以当地时间显示吗？

如果是这样，我是否需要进行任何配置才能启用此“功能”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:44:02.997

默认情况下，TIMESTAMP 以 UTC 存储其数据，然后将其转换回数据库所在服务器的时区。这里对类似问题有几个很好的回答：[我应该使用字段'datetime'还是'timestamp'？](https://stackoverflow.com/questions/409286/datetime-vs-timestamp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:46:15.820

这一切都在手册中。

[MySQL 将 TIMESTAMP 值从当前时区转换为 UTC 进行存储，并从 UTC 转换回当前时区进行检索。（这不会发生在其他类型，例如 DATETIME。）](http://dev.mysql.com/doc/refman/5.0/en/datetime.html)

要将时间值显式转换为特定时区，请使用[convert_tz()](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_convert-tz)

当前[时区](http://dev.mysql.com/doc/refman/5.0/en/time-zone-support.html)是会话的一部分——它继承自 MySQL 全局时区，而 MySQL 全局时区继承自系统时区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T21:39:46.463

时间戳在输出时转换为日期和时间的字符串表示形式。它将使用 MySQL 服务器的时区设置来显示结果集中的内容。

时间戳在内部存储为自 EPOCH 以来的秒数（'1970-01-01 00:00:00' UTC）；

这就是为什么很多人喜欢将他们的数据库设置为 UTC 的原因——这样他们总是能得到一个 UTC 日期时间，并且可以在代码方面将其转换为本地时间。

MySQL 数据库的时区将使用内部配置设置，这可能会回退到服务器的系统设置。

请参阅如何配置 MySQL 时区设置：[http ://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html](http://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html)

# iphone - 当我单击一个通知时从列表中删除所有推送通知

> ID：13185876
> 
> 赞同：2
> 
> 时间：2012-11-01T21:37:10.177
> 
> 标签：iphone, ios, ipad

我正在实现一个支持苹果推送通知的应用程序。如果我从苹果服务器收到三个通知，那么在 iphone 中，通知列表将显示三个通知，如果我选择其中任何一个通知将根据通知进入应用程序。之后如果我在 iphone 通知列表中检查剩余的两个通知，则没有推送通知可查看。通知列表显示**没有新通知**。

而且我的应用程序是通用应用程序。推送通知在带有 ios6 的 iphone4 和 iphone5 中工作正常，但在带有 ios5 的 ipad1 中无法正常工作。

请帮我。

提前致谢。

![选择其中任何一个（推送通知）后](../Images/dd6e77e5a2f7cc4c32ce728cbfd43408.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:41:12.417

当用户在通知中心点击通知时，此方法在 App Delegate 上触发：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions (NSDictionary *)launchOptions {

    // You could use the following methods calls:

        // To remove the notifications in Notification Center:
        [[UIApplication sharedApplication] cancelAllLocalNotifications];

        // To set the badge (0 is no badge at all):
        [[UIApplication sharedApplication] setApplicationIconBadgeNumber:0];
} 
```

如果您想在用户“正常”返回而不使用通知时也删除通知，请将方法调用添加到：

```
- (void)applicationWillEnterForeground:(UIApplication *)application {
} 
```

我认为不可能只取消一个通知，查看[这篇文章](https://stackoverflow.com/questions/9925854/remove-single-remote-notification-from-notification-center)了解更多信息。

* * *

你用谷歌搜索过这个 iPad 问题吗？我搜索了一下，发现其他人也有同样的问题。事实证明，通知**正在**运行，但您看不到它们出现在锁屏上。查看这些主题：

*   [https://discussions.apple.com/thread/3374403?start=0&tstart=0](https://discussions.apple.com/thread/3374403?start=0&tstart=0)
*   [https://discussions.apple.com/message/16343436#16343436](https://discussions.apple.com/message/16343436#16343436)

或者尝试谷歌一下：[https ://www.google.nl/search?q=ipad+1+notification+center](https://www.google.nl/search?q=ipad+1+notification+center)

# arm - ARM 架构和系列

> ID：13185888
> 
> 赞同：1
> 
> 时间：2012-11-01T21:37:57.420
> 
> 标签：arm, armv6

我已经开始研究不同的基于 ARM 的目标，但我仍然缺少关于 ARM 内核、架构、指令集和内核系列的一些东西。看看这里的维基百科页面：[http](http://en.wikipedia.org/wiki/ARM_architecture#ARM_cores) ://en.wikipedia.org/wiki/ARM_architecture#ARM_cores 我看到每个架构都有多个 ARM 架构和多个系列。例如对于 ARMv6 架构，有 ARM11 和 ARM-Cortex-M 系列。ARMv7 和其他版本也是如此。鉴于架构相同，ARM11 和 ARM Cortex-M 有什么区别？鉴于它们实现相同的架构，ARM11 和 ARM Cortex-M 是否都支持相同的指令集？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T22:24:08.433

体系结构是规范，即体系结构的实现应该支持的寄存器、指令和操作模式的集合。

系列是架构的特定详细实现，即创建 ARM 内核所需的实际硬件细节。最后，内核是架构的特定实现，即晶体管和其他离散部件的实际蓝图，需要创建一个 ARM CPU。

ARM 体系结构是模块化的，因此系列可能只实现该体系结构的某些功能，而不能实现其他功能。系列也可能具有架构中没有的扩展，并且为了使事情变得更有趣，同一个系列中的核心通常会在它们支持的功能上有所不同。

ARM 内核被称为内核而不是芯片的原因是特定芯片可能包含一个或多个内核（假设内核支持它）或者可能具有与其他组件（I/O 控制器、内存接口等）集成的内核。相同的芯片。

ARM11 和 ARM Cortex-M 是针对不同市场在 ARMv6 架构中实现功能的不同系列：ARM-11 智能手机和平板电脑以及 Cortex-M 微控制器 AFAIK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-07T22:10:30.910

没有明确的答案，而且情况可能随着时间的推移而发生变化——但我认为**家庭**术语在这种情况下已经失去了大部分价值。

架构定义了一组功能（标准和可选）。随着时间的推移，您可能会看到作为扩展添加的新功能，然后作为架构的标准功能推出。架构涵盖的不仅仅是指令集、系统级功能（如内存行为）、特权和保护、异常模型等。

还有一些应用领域——在 Cortex 命名法中的高级划分为 MCU（低功耗、确定性）、实时（确定性、安全和错误功能）和应用（高端、通用）。这些导致架构的进一步专业化，因此有 ARMv8-M、ARMv8-R 和 ARMv8-A（您最终将在操作系统级别编写完全不同的代码以利用这些功能）。

对于较旧的处理器，特定设计可能会有所变化，以改变功能集并专注于不同的市场，但这与 Cortex 设计的区别并不明显（例如，ARM9 系列的高速缓存、紧密耦合-memory、MMU/MPU 是存在的那种选项）。

Cortex-M 可以被视为一个家族，但涵盖了广泛的性能范围（超过两种类似的架构），以及一系列安全功能（使用 ARMv8-M）。

您还可以谈论“小型”Cortex-A 系列，尽管对于特定的应用程序，会有一个特定的内核比其他内核更适合。也有 big.LITTLE 配对，但它们不会被描述为一个家族（但它们特别共享一个精确的架构）。

单一的特定架构可以保证基线功能，但不一定会限制许多代码的可移植性，因为随着架构的发展，不同的 ISA 仍然很常见。（M-class 代码将在 A-class 设备上运行，至少如果您小心的话，并且从 A64 状态切换）。

ARM 内核的另一个复杂之处在于，特定设备中更广泛的系统大部分都可以免费供供应商定制——尽管如果他们选择针对特定类型的应用程序，也有一些可用的标准。查看任何特定的供应商，您甚至可能会谈论全都基于单个 ARM 内核的一系列部件。

# msbuild - Teamcity：转换为 VS 2012 解决方案后，VS 2010 解决方案无法部署

> ID：13185897
> 
> 赞同：3
> 
> 时间：2012-11-01T21:38:21.730
> 
> 标签：msbuild, visual-studio-2012, teamcity, msdeploy

我有一个包含 asp.net C# 项目、4.0 框架的 VS 2010 解决方案。我们使用 Teamcity 7.1.1（build 24074）作为 CI 和部署服务器。

我们升级到 Visual Studio 2012 并转换了这个解决方案，还在构建服务器上安装了[Microsoft Visual Studio 2012 Shell (Integrated) Redistributable Package](http://www.microsoft.com/en-us/download/details.aspx?id=30663)，以便拥有构建 Visual Studio 应用程序所需的所有文件，包括 [..]\MSBuild\Microsoft\VisualStudio \v11.0\WebApplications\Microsoft.WebApplication.targets。

转换到 2012 后，我注意到部署不再起作用，没有创建工件（但 Teamcity 也没有抱怨！）。我只在构建日志上得到这个：

```
[...]
[17:11:58][Providers\Providers.csproj.teamcity] GetCopyToOutputDirectoryItems
[17:11:58][Providers\Providers.csproj.teamcity] _CopyOutOfDateSourceItemsToOutputDirectoryAlways
[17:11:58][_CopyOutOfDateSourceItemsToOutputDirectoryAlways] Copy
[17:11:58][Copy] Copying file from "C:\TeamCity\buildAgent\work\c52628138e1ee4d4\Providers\NLog.config" to "bin\NLog.config".
[17:11:58][Providers\Providers.csproj.teamcity] CopyFilesToOutputDirectory
[17:11:58][CopyFilesToOutputDirectory] Copy
[17:11:58][Copy] Copying file from "obj\Release\Providers.dll" to "bin\Providers.dll".
[17:11:58][CopyFilesToOutputDirectory] Providers.csproj -> C:\TeamCity\buildAgent\work\c52628138e1ee4d4\Providers\bin\Providers.dll
[17:11:58][CopyFilesToOutputDirectory] Copy
[17:11:58][Copy] Copying file from "obj\Release\Providers.pdb" to "bin\Providers.pdb".

==> [17:11:58]Process exited with code 0

[17:11:58]Publishing internal artifacts
[17:11:58][Publishing internal artifacts] Sending build.finish.properties.gz file
[17:11:58]Publishing artifacts
[17:11:58][Publishing artifacts] Collecting files to publish: [Providers\obj\Release\Package]

==> [17:11:58][Publishing artifacts] Artifacts path Providers/obj/Release/Package not found

[17:11:58]Build finished 
```

对解决方案所做的唯一更改是在 .sln 和 .csproj 文件中（通过 Visual Studio）。如果我恢复到以前的版本，teamcity 可以毫无问题地构建和部署。[对项目文件的更改与本文中解释的](http://sedodream.com/2012/08/19/VisualStudioProjectCompatabilityAndVisualStudioVersion.aspx)相同，我尝试了建议的解决方案（将 VisualStudioVersion=11.0 传递给 MSBuild），但没有成功。

如果我使用解决方案资源管理器中的发布链接从 Visual Studio 进行部署，它也可以按预期工作。我将在 VS 2012 中创建一个带有基础项目的新解决方案，并将测试它是否从 Teamcity 部署。

还有其他想法吗？

- - 更新 - -

希望这不是解决方案：我[按照上面帖子的](http://sedodream.com/2012/08/19/VisualStudioProjectCompatabilityAndVisualStudioVersion.aspx)建议做了相反的事情，我设置了 MSBuild 参数 VisualStudioVersion=10.0 并且它有效！所以，为了部署一个 VS 2012 项目，我不得不将其视为 VS 2010 项目......你在做什么不同？为了能够在不欺骗teamcity的情况下进行部署，我应该做什么？

- - 更新 - -

我正在添加一些我的 TeamCity 配置的快照。[Teamcity 将系统和环境变量作为构建参数传递给 MSBuild](http://confluence.jetbrains.net/display/TCD6/Defining+and+Using+Build+Parameters+in+Build+Configuration)。

![通用设置](../Images/acd536eae6a678d6faba7ab8b3dbc150.png)

![构建步骤](../Images/b65c286cdb78b10afdb953b86020b378.png)

![微软构建](../Images/4bb730850adba4f5ba6afde4f831fc4c.png)

![配置参数](../Images/f936a4c67436855f3f03ec4128287c91.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T02:37:47.683

**更新**

澄清一下，问题在于 Web Publishing Pipeline 目标 ( `$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v11.0\Web\Microsoft.Web.Publishing.targets`) 没有作为 VS 2012 的 Integrated Shell 版本的一部分安装。

该问题可以通过安装完整版本的 VS 2012 来解决，或者可能通过在 VS Shell 之上安装 Azure SDK 来解决。

# java - 需要一种解决方案来在远程服务器上运行多个 selenium 测试

> ID：13185900
> 
> 赞同：0
> 
> 时间：2012-11-01T21:38:53.517
> 
> 标签：java, ubuntu, windows-7, selenium, winexe

对于结构，将有三种终端。1\. 客户端：客户端运行 Firefox。它将从 Web 服务器打开网页并通过单击页面上的链接触发测试。

1.  Web 服务器：Web 服务器运行 PhP 并存储所有用于触发测试的网页。操作系统将是 Ubuntu。

2.  测试服务器：测试将在 java 上使用 selenium 实际运行。操作系统为Window 7。测试项目将打开Firefox运行检查需要检查的页面。

在每种终端上应该使用什么样的方法来实现这一点？

我试过把winexe+bat文件，在网页中连接Test Server运行测试。bat 文件包含所有测试用例：使用命令行的“java xxxx”。但是 winexe 不适用于 windows 7。它根本不会在测试服务器上打开 Firefox。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:48:10.503

根据我的理解，我将上述内容定义如下
**Client**：用户/服务单击浏览器中的链接以执行测试的机器
**Webserver**：存在用于触发测试的网页的机器
**TestServer**：测试脚本所在的任意机器正在运行

您可以按以下方式执行此操作。
使用[jenkins](http://jenkins-ci.org/)作为服务器。包括 selenium-grid 插件。创建 jenkins 作业，以便他们可以通过批处理触发您的测试。
在测试服务器中，创建一个 selenium-node 注册到与 jenkins 一起运行的集线器。

您可以通过 url 访问 Jenkins 服务器作业并单击构建按钮，以便它们在测试服务器上运行

# javascript - Highcharts 创建相同的文本 3 次

> ID：13185901
> 
> 赞同：1
> 
> 时间：2012-11-01T21:39:00.640
> 
> 标签：javascript, jquery, highcharts, bar-chart

我使用的是 Highcharts 1.7，使用重复的标签（左侧的那个，0.025）一切正常，但在我需要的实际 highcharts 版本中，标签被渲染了 3 次。不知道这里出了什么问题。所以基本上> Highcharts 多次重复 0.25 文本。有关代码和工作示例，请参阅此链接。 [http://jsfiddle.net/pCuUW/](http://jsfiddle.net/pCuUW/)

```
$(function() {
var chart;
$(document).ready(function() {
    var chart = new Highcharts.Chart({
        'chart': {
            'renderTo': 'container',
            'type': 'bar',
            'width': 500,
            'height': 150
        },
        'exporting': {
            'enabled': false
        },
        'yAxis': {
            'max': 1400,
            'title': {
                'text': ''
            }
        },
        'title': {
            'text': 'My normal barchart'
        },
        'plotOptions': {
            'bar': {
                'pointWidth': 30,
                'borderWidth': 0,
                'dataLabels': {
                    'enabled': true,
                    'distance': -10,
                    'color': 'black',
                    'padding': 5,
                    'x': -45,
                    'backgroundColor': '#ffffff',
                    'borderWidth': 1,
                    'borderColor': '#000000',                       
                    'style': {
                        'fontSize': '12px',
                        'font-weight': 'bold'
                    },

                }
            }
        },
        'credits': {
            'enabled': false
        },
        'labels': {
            'enabled': false
        },
        'legend': {
            'enabled': false
        },
        'series': [{
            'data': [637]}]
    });
});

}); 
```

这里出了什么问题？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:54:18.437

这很可能是因为您没有提到**x-axis**中的类别。

尝试添加这个

```
xAxis: {
    categories: ['Cost'], // just a default value
    title: {
        text: null
    }
},​ 
```

[检查小提琴](http://jsfiddle.net/sushanth009/pCuUW/1/)

# c# - 从 DetailView 访问电子邮件地址

> ID：13185902
> 
> 赞同：1
> 
> 时间：2012-11-01T21:39:04.217
> 
> 标签：c#, asp.net

我正在尝试访问中的电子邮件地址，`DetailsView`但收到此错误：

```
Null Reference Exception was unhandled by user code 
```

这就是我的代码中的内容：

```
TextBox EmailAddress = this.DetailsView1.FindControl("Email") as TextBox;
string myemail = EmailAddress.Text;
System.Net.Mail.MailMessage mailMessage = new System.Net.Mail.MailMessage();
mailMessage.From = new System.Net.Mail.MailAddress(System.Configuration.ConfigurationManager.AppSettings["fromEmailAddress"]);
mailMessage.To.Add(new System.Net.Mail.MailAddress("myemail")); //ERROR 
```

所以，代码停在这一行并得到我提到的错误：

```
mailMessage.To.Add(new System.Net.Mail.MailAddress("myemail")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:19:33.263

我注意到您为该`mailMessage.From`属性分配了一个电子邮件地址，但在没有事先分配任何内容的情况下使用该属性`Add`上的方法。 `mailMessage.To``To`

我怀疑，仅从您发布的代码和您收到的消息来看，您必须先分配一些东西`To`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:48:34.377

我不禁注意到代码中的“myemail”用引号引起来：

```
mailMessage.To.Add(new System.Net.Mail.MailAddress("myemail")); 
```

尝试将其更改为以下内容？

```
mailMessage.To.Add(new System.Net.Mail.MailAddress(myemail)); 
```

参考

```
string myemail = EmailAddress.Text; 
```

另外，使用调试器

# javascript - 用javascript删除字符

> ID：13185905
> 
> 赞同：3
> 
> 时间：2012-11-01T21:39:17.267
> 
> 标签：javascript, string, replace

我有各种像这样的img src：http: [//mydomain.com/wp-content/uploads/2012/10/img-80x93.jpg](http://mydomain.com/wp-content/uploads/2012/10/img-80x93.jpg) http://mydomain.com/wp-content/uploads/2012/10/image -80x110.jpg ...

我想将它们更改为： [http://mydomain.com/wp-content/uploads/2012/10/img.jpg](http://mydomain.com/wp-content/uploads/2012/10/img.jpg) http://mydomain.com/wp-content/uploads/2012/10/image.jpg 。 ..

基本上我需要的是从 -80x 删除直到 .jpg

我试图删除“-80x”+之后的所有数字：

.replace('-80x'/\d+/g,''));

但没有用......和其他人替换但没有结果。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:41:41.050

我认为您只需要将“-80x”放在您的正则表达式中，例如：

```
someString.replace(/-80x\d+/g,"") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T21:45:45.257

```
var source="http://mydomain.com/wp-content/uploads/2012/10/img-80x93.jpg";    
var url=source.split('-80x')[0]+".jpg"; 
```

它会给你“http://mydomain.com/wp-content/uploads/2012/10/img.jpg”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T21:41:16.410

编辑：
这行得通。

```
.replace(/\-[0-9]+x[0-9]+\.jpg/g, '.jpg'); 
```

# php - PHP字符串替换“&”

> ID：13185908
> 
> 赞同：0
> 
> 时间：2012-11-01T21:39:35.747
> 
> 标签：php, string, replace

我目前在图像上传期间用下划线替换空格。我怎样才能将它也包含在内，以便将 & 更改为“和”。

```
$newname = str_replace( ' ', '_', trim( strip_tags( $_POST['name'] ) ) ) . _ . $formKey->generateKey() . '_' . time() . '.jpg'; 
```

有点坚持这个，甚至不知道该尝试什么..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:43:01.017

`$newname = str_replace(array(' ', '&'), array('_', 'and'), ... );`

# java - 如何从 Java 小程序获取网络活动？

> ID：13185909
> 
> 赞同：0
> 
> 时间：2012-11-01T21:39:41.137
> 
> 标签：java, browser, applet

我有一个第三方 Java 小程序，它通过浏览器加载并进行一些网络活动（不知道具体是什么，可能是 http 请求，可能是 https）。

我将如何嗅探/追踪该活动？我只需要请求标头，而不是它的内容。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:18:43.560

这是基本的嗅探，与 java 和 applet 均无关。[Wireshark](http://www.wireshark.org/)是完成这项工作的完美工具。您也可以使用[Fiddler](http://www.fiddler2.com/fiddler2/)（仅限 Windows）或类似的工具来更详细地调查 http(s) 活动。

# ruby-on-rails - 使用 Rails 和 Remotipart：上传的文件去哪里了？

> ID：13185910
> 
> 赞同：1
> 
> 时间：2012-11-01T21:39:43.040
> 
> 标签：ruby-on-rails

我正在尝试使用 Remotipart gem 在我的 Rails 应用程序中通过 Ajax 上传文件。我可以看到正在发布图像数据，但是如何将该数据转换为服务器上的实际图像？

似乎应该很容易，就像我应该能够指定应放置图像的默认位置，但我找不到任何描述如何处理此问题的参考。

我已经下载并运行[了测试应用程序](https://github.com/JangoSteve/Rails-jQuery-Demo/tree/remotipart)，但它只将文件名返回到屏幕。据我所知，该文件没有保存在任何地方。

我确定我遗漏了一些明显的东西，但是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:31:13.580

[我在另一个 SO 发布的第一条评论](https://stackoverflow.com/questions/4704143/rails-3-get-raw-post-data-and-write-it-to-tmp-file)中找到了答案的核心，我能够根据我的需要对其进行调整。

这是我正在使用的代码（同样，改编自另一篇文章）：

```
if remotipart_submitted?
    filename = params[:item][:image].original_filename
    extension = filename.split('.').last

    image_file = Tempfile.new(filename)

    # Save to temp file
    File.open(image_file, 'wb') do |f|
        f.write params[:item][:image].read
    end

    # Now you can do your own stuff 
    # image_file.path is a string containing the path to your new file 
```

也许这将有助于未来的访客。

# html - 将鼠标悬停在图像上

> ID：13185912
> 
> 赞同：0
> 
> 时间：2012-11-01T21:39:48.360
> 
> 标签：html, mouseover

我在**pinterest.com**和其他少数网站上看到，当您将鼠标悬停在图像上时，Facebook 分享或推特分享标志、评论数量等都会出现。我一直在谷歌上搜索，我得到了做 onmouseover 事件的答案，但我认为他们做了别的事情。谁能给我一个提示或代码示例。我希望当您将鼠标悬停在图像上时，您可以与 facebook、twitter 或通过电子邮件将图像分享给某人。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:57:07.967

如果你想要一个特定的效果，最好检查网站的代码，看看他们是如何做到的。

这是一个非常基本的示例，可以帮助您入门：

```
<div class="wrap">
    <img src="http://placehold.it/350x150">
    <div class="info">
        Stuff here...
    </div>
</div>​

.wrap {
    width:350px;
    height:150px;
    position:relative;
}

.info {
    background:rgba(255, 0, 0, 0.2);
    width:100%;
    height:100%;
    position:absolute;
    top:0;
    left:0;
    opacity:0;
}

.wrap:hover .info {
    opacity:1;
} 
```

[jsfiddle](http://jsfiddle.net/uA2Lm/)

# iphone - 子类uibutton中的setframe不调整框架

> ID：13185913
> 
> 赞同：1
> 
> 时间：2012-11-01T21:39:52.157
> 
> 标签：iphone, objective-c, inheritance, uibutton

我做了一个 UIButton 的子类，我想设置一个“填充”。我希望按钮的框架在每一侧总是比文本宽 15 像素。

在 drawRect 方法中，我将按钮的框架设置为比文本宽度宽 30 px。但是当我尝试这样做时，框架根本没有得到调整。更改 uibutton 的框架后，此框架是否得到调整？如何调整框架以设置填充？

这是我的代码：

```
- (void)drawRect:(CGRect)rect{
[self setBackgroundImage:[[UIImage imageNamed:@"submitBtn.png"] stretchableImageWithLeftCapWidth:5 topCapHeight:0] forState:UIControlStateNormal];
[self setFrame:CGRectMake(rect.origin.x, rect.origin.y-90, self.titleLabel.frame.size.width + 30, self.frame.size.height)]; 
} 
```

感谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:59:39.460

您应该覆盖该`setTitle:forState:`方法并在那里调整框架。您还应该将背景图像设置在`drawRect:`. 一个好地方将是`initXXX`方法。

您唯一应该做的`drawRect:`就是根据视图的当前状态实际渲染视图的内容。不应更改任何状态`drawRect:`。

# node.js - node.js mongo 连接尖峰，写入失败，连接池

> ID：13185914
> 
> 赞同：2
> 
> 时间：2012-11-01T21:40:20.323
> 
> 标签：node.js, mongodb

我有一个用节点编写的非常简单的日志记录应用程序，它将数据存储在 mongo 中。它可以正常运行一段时间（一个小时），然后连接数量激增，我的所有写入都失败了一段时间，然后连接断开（可能它们超时）。我知道调用`db.close()`很重要，节点的基于事件的异步方面使得在哪里进行调用变​​得不简单。

在我的请求处理程序中，我有：

```
//val is an object previously defined
database.writeRecord(val)
database.userExists(val['cookie'], function(c){//returns 1 if user exists, 0 if not
  if(c==0)  
    database.createNewUserProfile(val['cookie'],'campaign',val, {cid:cid, event:event});
  else
    database.attachEventToUserProfile(val['cookie'], 'campaign',val, {cid:cid, event:event});
}); 
```

然后，在我的数据库处理程序中，我具有以下功能（请原谅此复制/粘贴的长度）：

```
function writeRecord(object_passbyreference){
    //make a deep copy
    var value = new Object();
    for (var attr in object_passbyreference) {
        value[attr] = object_passbyreference[attr];
    }
    if(additionalattributes!=undefined){//is there anything else i want to throw in this record?
        for (var attr in additionalattributes) 
            value[attr] = additionalattributes[attr];
    }

    dbname='beacon';
    collectionname='testcollection';

    var db = new Db(dbname, new Server(host, port, {}), {native_parser:false});
    db.open(function(err, db) {
        if(db === null)
            console.log('                                                         db is undefined');
        else{
            db.collection(collectionname, function(err, collection) {
                collection.insert(value, function(err,doc){
                    if(err) {  
                        console.log('Insert ERROR!!!!! Is the database running? '+JSON.stringify(err));
                    }
                    db.close();
                }) // collection.insert
            }); //db.collection
        }
    }); // db.open
}

function userExists(cookieid, callback){
    var db = new Db('beacon', new Server(host, port, {}), {native_parser:false});
    db.open(function(err, db) {//opendb++
        if(db === null)
            console.log('                                                         db is undefined - profile');
        else{ 
            db.collection('userprofiles', function(err, collection) {
                collection.find({cookie:cookieid}).toArray(function(e, results) {
                    if(e){
                        console.log ('  ERROR IN saveUserProfileEvent error:'+JSON.stringify(e)+"    cookie:"+JSON.stringify({cookie:cookieid}));
                    }
                    else{//the query went alright, callback the count ...
                        callback(results.length)//returns the size of the result set
                    }
                    db.close();
                })
            })
        }
    })
}

function createNewUserProfile(cookieid, eventtype, object_passbyreference, additionalattributes){
    //make a deep copy, clone it
    var object = new Object();
    for (var attr in object_passbyreference) {
        if(attr!='cookie')
            object[attr] = object_passbyreference[attr];
    }
    if(additionalattributes!=undefined){//is there anything else i want to throw in this record?
        for (var attr in additionalattributes) 
            object[attr] = additionalattributes[attr];
    }
    var recordtosave=new Object();
    recordtosave['cookie']=cookieid;

    recordtosave['items']=1;//keep this here, maybe just for fun, let's see if we can keep a count of total entries for this given user
    recordtosave['campaign']=new Array();//new Array();
    recordtosave['survey']=new Array();
    recordtosave[eventtype]=[object];

    recordtosave['demographics']=new Object();
    recordtosave['demographics']['age']=functionobj.getAge();
    recordtosave['demographics']['gender']=functionobj.getGender();
    recordtosave['demographics']['income']=functionobj.getIncome();

    var db = new Db('beacon', new Server(host, port, {}), {native_parser:false});
    db.open(function(err, db) {//opendb++
        if(db === null)
            console.log('                                                         db is undefined - profile');
        else{ 
            db.collection('userprofiles', function(err, collection) {
                collection.insert(recordtosave, function(err,doc){
                    if(err){
                        console.log('        ERROR Adding new user '+cookieid);
                    }
                    else{
                        console.log('Added new user '+cookieid);
                    }
                    db.close();
                })
            })
        }
    })
}

function attachEventToUserProfile(cookieid, eventtype, object_passbyreference, additionalattributes){
    var object = new Object();
    for (var attr in object_passbyreference) {
        if(attr!='cookie')
            object[attr] = object_passbyreference[attr];
    }
    if(additionalattributes!=undefined){//is there anything else i want to throw in this record?
        for (var attr in additionalattributes) 
            object[attr] = additionalattributes[attr];
    }

    var db = new Db('beacon', new Server(host, port, {}), {native_parser:false});
    db.open(function(err, db) {
        if(db === null)
            console.log('                                                         db is undefined - profile');
        else{ 
            db.collection('userprofiles', function(err, collection) {
                eventtopush=new Object();
                eventtopush[eventtype]=object
                collection.update({cookie: cookieid}, {$inc: { 'items' : 1 }, $push: eventtopush}, function(e,doc){
                    if(e){
                        console.log('        ERROR Updating user '+cookieid);
                    }
                    else{
                        console.log('Updated user '+cookieid);
                    }
                    db.close();
                });
            })
        }
    });
} 
```

我所有的功能都是这样的：

```
function f(param, callback){
  db=new db;
  db.open(...
    db.collection(....
      db.find/insert(....
        callback()
        db.close()
} 
```

那是对的吗？我想要最里面的函数调用结束时的 db.close ，对吗？这意味着它将在一切完成后执行？这是在节点中进行 mongo 查询的正确方法吗？

查看 mongostat，我看到我的连接非常低且平坦，然后，在一段时间内，它们飙升至 ~800，我的写入开始失败（注意，时间间隔为 15 秒）：

```
 72     55     38      0       0     332  1.02g    62m      0    90k   307k    13  RTR   21:01:26 
    68     52     37      0       0     316  1.03g    62m      0    85k   250k    12  RTR   21:01:41 
    81     65     50      0       0     368  1.02g    62m      0   101k   280k     5  RTR   21:01:56 
    70     54     39      0       0     322  1.02g    62m      0    87k   306k     4  RTR   21:02:11 
insert  query update delete getmore command  vsize    res faults  netIn netOut  conn repl       time 
    73     52     36      0       0     334  1.09g    63m      0    88k   235k    79  RTR   21:02:26 
    73     55     39      0       0     346  1.15g    64m      0    91k   250k   148  RTR   21:02:41 
    70     59     42      0       0     328  1.02g    62m      0    90k   269k    26  RTR   21:02:56 
    73     58     43      0       0     346  1.02g    62m      0    93k   303k     3  RTR   21:03:11 
    71     55     41      0       0     337  1.02g    62m      0    90k   243k    16  RTR   21:03:26 
    69     55     40      0       0     329  1.02g    62m      0    88k   322k     8  RTR   21:03:41 
    70     56     42      0       0     338  1.02g    62m      0    91k   261k     5  RTR   21:03:56 
    67     52     38      0       0     316  1.02g    62m      0    85k   261k     3  RTR   21:04:11 
    64     50     36      0       0     306  1.02g    62m      0    82k   243k    25  RTR   21:04:26 
    61     48     37      0       0     294  1.04g    62m      0    78k   259k    32  RTR   21:04:41 
insert  query update delete getmore command  vsize    res faults  netIn netOut  conn repl       time 
    68     53     37      0       0     314  1.02g    62m      0    85k   241k     7  RTR   21:04:56 
    65     53     41      0       0     319  1.02g    62m      0    85k   229k     3  RTR   21:05:11 
    71     55     40      0       0     337  1.02g    62m      0    91k   274k    14  RTR   21:05:26 
    63     47     35      0       0     297  1.07g    63m      0    79k   220k    63  RTR   21:05:41 
    64     52     37      0       0     298  1.02g    62m      0    81k   230k     7  RTR   21:05:56 
    67     53     39      0       0     322  1.02g    62m      0    87k   230k     4  RTR   21:06:11 
    68     53     38      0       0     321  1.02g    62m      0    86k   273k     3  RTR   21:06:26 
    70     56     41      0       0     336  1.02g    62m      0    90k   275k     3  RTR   21:06:41 
    64     51     38      0       0     310  1.02g    62m      0    82k   220k     4  RTR   21:06:56 
    66     51     38      0       0     315  1.02g    62m      0    84k   290k    21  RTR   21:07:11 
insert  query update delete getmore command  vsize    res faults  netIn netOut  conn repl       time 
    62     50     38      0       0     299  1.02g    62m      0    80k   240k     5  RTR   21:07:26 
    65     49     36      0       0     308  1.02g    62m      0    82k   235k    36  RTR   21:07:41 
    68     51     36      0       0     298  1.02g    62m      0    81k   255k     6  RTR   21:07:56 
    69     53     37      0       0     319  1.02g    62m      0    85k   235k     5  RTR   21:08:11 
    66     52     37      0       0     312  1.02g    62m      0    84k   236k     6  RTR   21:08:26 
    65     51     36      0       0     305  1.02g    62m      0    82k   214k     5  RTR   21:08:41 
    68     53     38      0       0     320  1.02g    62m      0    85k   265k     9  RTR   21:08:56 
    70     53     36      0       0     319  1.02g    62m      0    85k   226k    19  RTR   21:09:11 
    69     52     37      0       0     312  1.02g    62m      0    84k   270k     4  RTR   21:09:26 
    67     51     36      0       0     311  1.04g    63m      0    83k   256k    19  RTR   21:09:41 
insert  query update delete getmore command  vsize    res faults  netIn netOut  conn repl       time 
    70     54     40      0       0     325  1.02g    62m      0    88k   288k     4  RTR   21:09:56 
    69     52     36      0       0     317  1.03g    62m      0    85k   272k    14  RTR   21:10:11 
    67     53     39      0       0     321  1.03g    62m      0    86k   253k    13  RTR   21:10:26 
    70     55     39      0       0     330  1.03g    62m      0    88k   264k    12  RTR   21:10:41 
    70     54     39      0       0     332  1.03g    63m      0    89k   264k    30  RTR   21:10:56 
    69     52     36      0       0     319  1.07g    63m      0    85k   288k    73  RTR   21:11:11 
    61     43     32      0       0     291  1.19g    66m      0    75k   250k   208  RTR   21:11:26 
    62     42     30      0       0     285  1.32g    68m      0    74k   252k   321  RTR   21:11:41 
    66     52     38      0       0     315  1.33g    69m      0    84k   274k   341  RTR   21:11:56 
    68     42     30      0       0     302  1.51g    72m      0    78k   217k   500  RTR   21:12:11 
insert  query update delete getmore command  vsize    res faults  netIn netOut  conn repl       time 
    53     27     20      0       0     256  1.78g    77m      0    62k   175k   780  RTR   21:12:26 
    22     19     15      0       0     244  1.77g    78m      0    58k   158k   771  RTR   21:12:41 
    21     17     11      0       0     245  1.75g    77m      0    59k   139k   755  RTR   21:12:56 
     7      4      3      0       0     218  1.77g    78m      0    49k   103k   772  RTR   21:13:11 
     2      1      0      0       0     214  1.77g    77m      0    47k    85k   773  RTR   21:13:26 
     0      0      0      0       0     208  1.77g    77m      0    45k    79k   773  RTR   21:13:41 
    61     60     41      0       0     323  1.49g    73m      0    91k   338k   489  RTR   21:13:56 
    79     73     50      0       0     358  1.16g    65m      0   104k   328k   153  RTR   21:14:11 
    74     50     32      0       0     315  1.22g    66m      0    84k   241k   220  RTR   21:14:26 
    72     51     35      0       0     303  1.19g    66m      0    83k   290k   189  RTR   21:14:41 
insert  query update delete getmore command  vsize    res faults  netIn netOut  conn repl       time 
    74     52     35      0       0     310  1.19g    66m      0    84k   224k   180  RTR   21:14:56 
    80     58     39      0       0     337  1.14g    65m      0    92k   344k   127  RTR   21:15:11 
    81     48     30      0       0     314  1.22g    67m      0    83k   242k   215  RTR   21:15:26 
    84     58     37      0       0     332  1.15g    65m      0    91k   275k   152  RTR   21:15:41 
    82     58     39      0       0     328   1.1g    64m      0    90k   331k    83  RTR   21:15:56 
    78     53     36      0       0     317  1.08g    64m      0    86k   271k    89  RTR   21:16:11 
    82     47     32      0       0     314  1.19g    66m      0    83k   257k   200  RTR   21:16:26 
    80     52     37      0       0     318  1.24g    67m      0    85k   304k   234  RTR   21:16:41 
```

21:11:26左右，连接量迅速上升，流量没有明显增加。您之前可以看到，连接低且稳定的时间很长。

有人可以在这里指出我正确的方向吗？

## 答案更新

在下面的帮助下，我能够得到解决方案。基本上，你把你`app.listen(port)`放在里面`db.open()`。然后，除此之外，仍然在 main.js 中，您将对 db 的引用传递给您的路径处理程序。然后将其一直传递到实际的 db 调用，如果您获取集合并进行查询。那就不要打电话`db.close()`了。

主.js：

```
mongodb = require('mongodb');
var serverOptions = {
  'auto_reconnect': true,
  'poolSize': 50
};
var serv = new mongodb.Server('localhost', 27017, serverOptions);
var db = new mongodb.Db('beacon', serv);

app.get('/log', function(req,res){          log.request(req,res, db)            });//writes events

db.open(function (error, db) {
      if (!module.parent) {
        app.listen(8888);
        console.log("Express server listening on port %d", app.address().port)
      }
}); 
```

日志.js：

```
function request(req,res, db){
  //build val object
  database.writeRecord(db, val) 
} 
```

数据库.js：

```
function writeRecord(db, value){
    collectionname='testwritespeed';
    db.collection(collectionname, function(err, collection) {
        collection.insert(value, function(err,doc){
            if(err) {  
                console.log('Insert ERROR!!!!! Is the database running? '+JSON.stringify(err));
            }
            console.log(doc)
            //don't do db.close() !!!!!
        }) // collection.insert
    }); //db.collection
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T22:07:12.200

当您创建一个新`Db`对象然后调用`open`它时，您实际上在做的是创建一个包含五个连接的连接池（默认情况下）。然后，当您在[`db.close`](http://mongodb.github.com/node-mongodb-native/api-generated/db.html#close)没有任何参数的情况下调用时，池中的连接实际上并没有关闭，而是留下来以防很快再次需要它们。

因为你在每次调用你的模块时都这样做，所以很容易看出你是如何用尽连接的。

相反，您应该在`Db`应用程序启动时创建一个连接池，该连接池将传递到您的模块（或模块自己创建）中，您的模块的所有方法都可以使用该连接池。

`Db`连接池支持多个未完成的操作，最大可达连接池的大小。

主.js：

```
mongodb = require('mongodb');
var serverOptions = {
  'auto_reconnect': true,
  'poolSize': 50
};
var serv = new mongodb.Server('localhost', 27017, serverOptions);
var db = new mongodb.Db('beacon', serv);

app.get('/log', function(req,res){
  log.request(req,res, db);
});

db.open(function (error, db) { // Both the db var and the db parameter are the same object
  if (!module.parent) {
    app.listen(8888);
    console.log("Express server listening on port %d", app.address().port)
  }
}); 
```

数据库.js：

```
function writeRecord(db, value){
    collectionname='testwritespeed';
    db.collection(collectionname, function(err, collection) {
        collection.insert(value, function(err, doc){
            if (err) {
                console.log('Insert ERROR!!!!! Is the database running? '+JSON.stringify(err));
            }
            console.log(doc);
            // Do NOT close db here!
        });
    });
} 
```

# php - 如果不总是以相同的顺序在 PHP 中解码 JSON

> ID：13185916
> 
> 赞同：0
> 
> 时间：2012-11-01T21:40:21.713
> 
> 标签：php, json

一段时间以来，我一直被 JSON 和 PHP 的问题所困扰。我有一个 JSON 对象，例如：

```
{"statistics":[{"name":"someName"},{"name":"someName2"}]} 
```

问题是`someName`有时需要`someNames2`'s playce 和 reverse，但我只想显示`someName2`. 我怎么做？=(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:46:29.323

您可以使用`array_filter`过滤`json`数组 where `name = someName2`.. 这种方式`someName2`位置无关紧要...

```
$json = '{"statistics":[{"name":"someName"},{"name":"someName2"}]}' ;
$array = json_decode($json,true);

$f = "someName2"; // What to find
$k = "name" ;  // Filed Name

$array = array_filter($array['statistics'],function($v)use($f,$k){ var_dump($v);return $v[$k] == $f;});
var_dump($array); 
```

# c - 分叉调用后的地址空间

> ID：13185917
> 
> 赞同：1
> 
> 时间：2012-11-01T21:40:24.123
> 
> 标签：c, operating-system, fork

当进程执行 fork() 系统调用时，会从中生成一个子进程。fork() 调用之后的所有代码都被复制到内存的新物理页，即帧。我无法可视化子进程的虚拟内存部分。因为在下面的代码中，char 变量的地址在子进程和父进程中是相同的。

```
#include <stdio.h>
#include <sys/types.h>

int main(void)
{
    pid_t pid;
    char y='Y';
    char *ptr;
    ptr=&y;
    pid = fork();
    if (pid == 0)
    {
        y='Z';
        printf(" *** Child process ***\n");
        printf(" Address is %p\n",ptr);
        printf(" char value is %c\n",y);
        sleep(5);
    }
    else
    {
        sleep(5);
        printf("\n ***parent process ***\n",&y);
        printf(" Address is %p\n",ptr);
        printf(" char value is %c\n",y);
    }
} 
```

及其输出：

```
*** Child process ***
Address is 69002894
char value is Z

***parent process ***
Address is 69002894
char value is Y 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T21:48:16.240

两个进程的虚拟地址相同，但物理地址不同。您的进程只允许访问虚拟内存。在具有虚拟内存功能的机器中，内存管理单元将虚拟地址转换为物理地址。

通常，操作系统使用写时复制方案来实现分叉。这意味着它们将具有相同的物理地址，直到有东西试图写入内存页面。当你放：

```
y = 'Z' 
```

操作系统复制了 y 所在的内存页面，并将该虚拟地址重新分配给新的物理地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:47:29.153

据我说，在你运行“execve”命令后，你会看到不同之处。在此之前，孩子与父母共享相同的图像和空间。

# java - JFreeChart 数据集不适用于 JPanel

> ID：13185921
> 
> 赞同：0
> 
> 时间：2012-11-01T21:40:37.563
> 
> 标签：java, mysql, jpanel, jfreechart

我有下面的代码，它从 MySQL 调用数据并在 JPanel 上的 XYPlot (JFreeChart) 中返回。有不同的数据集，这取决于我的 JTable 的行索引。问题是当我选择一行时，图表似乎很好，但是当我选择另一行时，XYplot 出现但是当我单击（拖动，第二次鼠标单击等）时，图表返回到第一个. 几乎每次我选择另一个图时，我用鼠标做一些事情（缩放等），它都会返回到主要/第一个 xyplot 选择。我试过 JPanel.validate(); 但仍然无法正常工作，也 repaint(); 方法。此外，使用 JFrame 它工作得非常好，没问题（是的！正确的，因为每次打开一个带有特定 XYPlot 的帧）。我想问题出在JPanel。任何帮助/建议？请！

**更新：**带有 XYPlot 的 JPanel 封装在 JSplitPanel 中。当我移动分隔线（用 XYPlot 放大 JPanel）时，有两个 XYPlot，第一个（在第一次单击时获得，第二个（如果第二次单击到另一行/数据集 - > XYPlot）。我想问题出在查询 -> 并重新绘制之前的 XYPlot。

```
private void PrimaryTableMouseClicked(java.awt.event.MouseEvent evt) {                                          
        int row = PrimaryTable.getSelectedRow();
        int realIndex = PrimaryTable.convertRowIndexToModel(row);
        String Table_click = (PrimaryTable.getModel().getValueAt(realIndex, 0).toString());

        try {

            String query = "select wavenumber,spectrum FROM test where id_test ='" + Table_click + "'";
            pst = conn.prepareStatement(query);
            rs = pst.executeQuery();
            if (rs.next()) {

                JDBCXYDataset dataset = new JDBCXYDataset(ConnecrDb(), query);

                JFreeChart chart = ChartFactory.createXYLineChart(
                        "title",
                        "cm",
                        "in",
                        dataset,
                        PlotOrientation.VERTICAL,
                        false, //legend
                        true, //tooltip
                        false); //urls

                XYPlot plot = (XYPlot) chart.getPlot();

                ChartPanel CP = new ChartPanel(chart);
                PanelWithChart.setLayout(new BorderLayout());
                PanelWithChart.add(CP, BorderLayout.CENTER);
                PanelWithChart.repaint();
            }
             rs.close();
            pst.close();

        } catch (Exception e) {
            JOptionPane.showMessageDialog(null, e);
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:49:17.793

我认为这可能是你的问题

```
PanelWithChart.setLayout(new BorderLayout());
PanelWithChart.add(CP, BorderLayout.CENTER); 
```

通过调用`JPanel#add()`，您每次调用时都会添加一个新组件`PrimaryTableMouseClicked`。如果您是尝试删除上一个图表`ChartPanel`的唯一组件：`PanelWithChart`

```
PanelWithChart.setLayout(new BorderLayout());
PanelWithChart.removeAll();
PanelWithChart.add(CP, BorderLayout.CENTER); 
```

如果面板上有其他组件，这将不起作用，如果是这种情况，那么您将需要使用`PanelWithChart.remove(Component comp)`，但这更难，因为您没有参考上一个图表。

请注意，这可能不是使用图表的最佳方式，您是否考虑过创建一次图表并制作`dataset`属性？然后，您可以使用此代码`PrimaryTableMouseClicked`来实现很多效果。

```
dataset.removeAllSeries();
XYSeries newSeries = new XYSeries("New Data");
dataset.addSeries(newSeries); 
```

# java - Java按唯一索引号排序值

> ID：13185922
> 
> 赞同：0
> 
> 时间：2012-11-01T21:40:39.097
> 
> 标签：java, string, sorting, arraylist

我正在学习Java和排序。

我有一个关于跟踪重复值的索引号的问题。

例如，我们有表，我将所有数据放入 中`ArrayList`，如下所示：

```
ArrayList = {FOO , AA, BOB, AA, BOB}

Index | Value
1     |  FOO
2     |  AA
3     |  BOB
4     |  AA
5     |  BOB 
```

现在我想对数据进行排序：

```
Index | Value
2     | AA
4     | AA
3     | BOB
5     | BOB
1     | FOO 
```

有没有办法保持唯一索引和排序数据？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:47:11.683

创建一个类

```
class DataHelper{
  private String name;
  private int index;
  // other stuff
} 
```

并创建`List<DataHelper>`并编写一个`Comparator`排序`DataHelpers`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T22:04:11.787

你可以有这种格式

```
import java.util.ArrayList;
 import java.util.Collections;

 public class MyData implements Comparable<MyData>{

private Integer index;
private String value;

public MyData(Integer index, String value) {
    this.index = index;
    this.value = value;
}

/**
 * @return the index
 */
public Integer getIndex() {
    return index;
}

/**
 * @param index the index to set
 */
public void setIndex(Integer index) {
    this.index = index;
}

   /**
     * @return the value
    */
    public String getValue() {
        return value;
     }

    /**
    * @param value the value to set
    */
    public void setValue(String value) {
        this.value = value;
     }

public int compareTo(MyData o) {
    int compare = this.value.compareTo(o.getValue());

    if(compare ==0){
        compare = this.index.compareTo(o.getIndex());
    }
    return compare;
}

/* (non-Javadoc)
 * @see java.lang.Object#toString()
 */
@Override
public String toString() {
    return "MyData [index=" + index + ", value=" + value + "]";
}

public static void main(String arg[]){

    List<MyData> mySet = new ArrayList<MyData>();
    mySet.add(new MyData(1,"FOO"));
    mySet.add(new MyData(2,"AA"));
    mySet.add(new MyData(3,"BOB"));
    mySet.add(new MyData(4,"AA"));
    mySet.add(new MyData(5,"BOB"));
    Collections.sort(mySet);
    System.out.println(mySet);

} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T21:53:32.680

您可以使用以下命令对 Arraylist 或任何 Collection 子类进行排序。

```
// unsortstList is an ArrayList
Collections.sort(unsoredtList); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T21:55:56.497

创建一个同时保存索引和文本字符串的对象。喜欢

```
public class MyThing
{
  public int index;
  public String text;
} 
```

然后，不要创建字符串的 ArrayList，而是创建这些对象的 ArrayList。

我不知道你用什么来分类它们。如果您正在编写自己的排序，那么您可以简单地与每个对象的“文本”成员进行比较，而不是与字符串对象本身进行比较。如果您使用 Arrays.sort 对其进行排序，那么您需要实现 Comparable。即：

```
public class MyThing implements Comparable<MyThing>
{
  public int index;
  public String text;

  public int compareTo(MyThing that)
  {
    return this.text.compareTo(that.text);
    // May need to be more complex if you need to handle nulls, etc
  }

  // If you implement compareTo you should override equals ...
  public boolean equals(Object that)
  {
    if (!(that instanceof MyThing))
    {
      return false;
    }
    else
    {
      MyThing thatThing=(MyThing)that;
      return this.text.equals(thatThing.text);
    }
  }
} 
```

等等。根据您要执行的操作，您可能需要其他东西。

# ruby-on-rails - 如何学习 Ruby on Rails - 除了数据库集成（作为博客）

> ID：13185923
> 
> 赞同：0
> 
> 时间：2012-11-01T21:40:44.667
> 
> 标签：ruby-on-rails, api

我正在努力学习 Rails。似乎大多数 Rails 教程都解释了如何构建博客。问题是 - 我没有建立博客。我正在尝试学习如何构建一个 Rails 应用程序，该应用程序使用来自外部 API 的数据、操作返回的数据并将其显示在 Rails 视图中（但也使用我在一些博客教程中看到的用户注册功能）。

除了构建博客之外，是否有任何教程或学习资源可以教授 Rails 功能？:) 我将不胜感激有关规划我的学习过程的任何见解。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:01:05.843

我不是一个优秀的程序员，我只是一个学生，我能真正帮助你的并不多。不仅如此，我认为 C++ 是我的主要编程语言，但我不了解 Ruby。但是我有一个可以帮助你的参考，我希望能帮助你，因为我知道从哪里开始学习语言是多么困难。这是一个链接： http: [//www.softwaredeveloper.com/features/74-ruby-on-rails-resources-tutorials-050207/](http://www.softwaredeveloper.com/features/74-ruby-on-rails-resources-tutorials-050207/) 希望它对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:45:45.407

我建议您从斯坦福的 Web 应用程序课程中完成这些作业 - [http://www.stanford.edu/~ouster/cgi-bin/cs142-spring12/projects.php](http://www.stanford.edu/~ouster/cgi-bin/cs142-spring12/projects.php)

或者，您也可以参加 Coursera / Udacity 提供的 SaaS 软件工程课程。 [https://class.coursera.org/saas/lecture/index](https://class.coursera.org/saas/lecture/index)

官方的 Rails 指南也非常全面 - [http://guides.rubyonrails.org/](http://guides.rubyonrails.org/)，您应该将它们添加到书签中。

注册并关注 railscasts.com 以获得最佳实践，您可以尝试为[http://railsforcharity.org/做出贡献](http://railsforcharity.org/)

希望这可以帮助！

# wordpress - WordPress 主题数据库升级迁移

> ID：13185924
> 
> 赞同：1
> 
> 时间：2012-11-01T21:40:45.363
> 
> 标签：wordpress, wordpress-theming

我正在创建一个自定义主题，并想知道 wp 主题如何管理数据库更新。我基本上想在激活主题时设置我的数据库。

此外，我将发布我的主题的版本。因此，当安装并激活主题时，我希望所有以前版本的主题数据库迁移都能运行。

我该怎么办？WP 是否提供管理数据库升级的机制？

注意：我不会将我的主题发布到 WP 主题库。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:04:37.097

[http://clark-technet.com/2010/09/wordpress-theme-developers-tip-theme-update-noticifications](http://clark-technet.com/2010/09/wordpress-theme-developers-tip-theme-update-noticifications)

这里信息看。是必需的文件

> 更新通知.php

# java - 包使用冲突：Import-Package with jasperreports

> ID：13185927
> 
> 赞同：2
> 
> 时间：2012-11-01T21:40:58.050
> 
> 标签：java, eclipse, osgi, equinox

我在 OSGi 中遇到了常见的“使用冲突”问题，我是 OSGi 的新手，如果这很简单，我很抱歉。我已经阅读[了这个](https://stackoverflow.com/questions/5504113/package-uses-conflict-import-package-on-startup-of-a-bundle)和[这个其他](https://stackoverflow.com/questions/3466379/package-uses-conflict-import-package-de-foo-bar-version-0-0-0)问题。我还阅读[了这篇](http://blog.springsource.org/2008/11/22/diagnosing-osgi-uses-conflicts/)文章，它更详细地解释了如何调试这些问题；但是，我无法弄清楚。我找不到重复的导出（引用上一篇文章“必须始终有多个供应商让您看到违反使用约束的情况。”）

这是完整的错误

```
initial@reference:file:../../Dev/mine/target/dependency/jasperreports-3.7.1-osgi.jar [151]
  Package uses conflict: Import-Package: org.apache.commons.collections.comparators; version="0.0.0" 
```

这是 jasper 清单的相关片段。完全粘贴太长

```
Export-Package: ...,net.sf.jasperreports.crosstabs.fill.calculation;uses:="org.apache.commons.collections,net.sf.jasperreports.engine,org.apache.commons.collections.comparators,org.apache.commons.logging,..." 
```

这是`packages org.apache.commons.collections.comparators`显示包正确导出且仅一次的输出

```
osgi> packages org.apache.commons.collections.comparators
org.apache.commons.collections.comparators; version="3.2.0"<org.apache.commons.collections_3.2.0 [869]> 
```

有任何想法吗？还有什么我可以尝试的吗？我真的对此表示怀疑，但是，Equinox 是否抱怨导出的版本是 3.2.0 但`uses`版本是 0.0.0？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T08:37:40.213

尝试在 Apache Felix 上运行它。它在发现使用冲突时提供广泛的跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:20:14.227

我最终选择了第三种选择。它与@PeterKriens 的建议有关，希望这将是其他人解决这些问题的另一种方法。我安装了[Karaf](http://karaf.apache.org/)，它在 Felix 之上运行，并使用 hot-deploy 文件夹一次部署**一个 jar**。这样我就可以看到出现的问题。它非常缓慢但冗长。只使用 Felix 我发现没有办法像这样部署

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T03:26:52.743

尝试在[包使用冲突中阅读我的另一个（长）答案：启动包时导入包](https://stackoverflow.com/questions/5504113/package-uses-conflict-import-package-on-startup-of-a-bundle/13301599#13301599) 我在那里放了一个相当详细的如何找到冲突。

# python - 发送多个标头python套接字？

> ID：13185933
> 
> 赞同：0
> 
> 时间：2012-11-01T21:41:17.580
> 
> 标签：python, sockets, networking, tcp

因此，假设我在 python 中创建了一个 TCP 套接字，而我授权的服务器需要一次发送多个标头来进行授权，我该怎么做呢？因为我要使用`socket.sendall`发送它们，然后等待授权握手回复。之后，我需要它等待数据回复，直到它得到一个，我该怎么做呢，因为如果在设定的时间内没有收到数据，它不会关闭套接字吗？有没有一些简单的方法可以正确发送这个或什么？~~编辑~~我想我的主要问题是如何发送多行数据包？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:16:29.757

类型为 的python 套接字`SOCK_STREAM`，使用该`socket.sendall(data)`函数只需发送一个字符串。是的，数据只是一个字符串。现在，您可以构建自己的标题和行以及所有内容并将其放入字符串中并告诉套接字将其全部发送到服务器。

然后只需执行 socket.recv(buffer) ，其中 buffer 是字节数的整数。正如 Thomas Orozco 所说，tcp 套接字可以保持打开很长时间，因此请确保服务器给出相当及时的回复。

编辑：顺便说一句，TCP 是一种传输层协议，您可以在这里阅读更多内容：[http](http://en.wikipedia.org/wiki/Transport_layer) ://en.wikipedia.org/wiki/Transport_layer 。简而言之，TCP 将传输您告诉它传输的任何内容。在python中，它是字符串。

# android - 允许用户取消前台服务

> ID：13185936
> 
> 赞同：0
> 
> 时间：2012-11-01T21:41:27.897
> 
> 标签：android, service, notifications

下面粘贴的代码显然（1）将我的服务设置为前台服务，（2）在屏幕顶部的托盘上显示我的图标。如果用户点击我的图标，今天的日期很快就会闪烁——我想这是某种默认行为。ContentTitle 和 ContentText 从不显示（那么它们有什么用？）

我希望发生的事情是当点击图标以显示某种下拉菜单或弹出窗口以显示允许用户选择取消或结束我的服务时。我似乎找不到任何此类功能的示例。这可以做到吗？如何？

顺便说一句，我的通知的唯一目的是让我的服务在前台运行。我永远不需要通知用户任何事情。

谢谢，加里

```
NotificationCompat.Builder b = new NotificationCompat.Builder(this);

b.setSmallIcon(R.drawable.ic_launcher)
.setContentTitle("PhoneStalker")
.setContentText("Hello World"); 
```

Intent WhatIsThisIntentFor = new Intent(Intent.ACTION_VIEW);

```
b.setContentIntent(PendingIntent.getActivity(this, 0, WhatIsThisIntentFor, 0)); 
```

通知 n = b.build();

开始前景（5481，n）；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:11:13.030

> 这可以做到吗？

不可以。但是，`setContentIntent()`可能是对调用的广播`PendingIntent`（`BroadcastReceiver`或`stopService()`任何您关闭服务的机制）。

# button - yii 中条目的下一个/上一个按钮的最佳方式

> ID：13185939
> 
> 赞同：3
> 
> 时间：2012-11-01T21:41:37.703
> 
> 标签：button, yii, next

我想知道为数据库中的条目创建下一个/上一个按钮的最佳方法是什么。假设我们有一个包含图像的表，每个图像都有一个 ID 和一个路径。如果当前图像的 ID 等于“9”，我怎样才能获得下一个和以前的 ID？

我已经在这里找到了解决方案 [https://stackoverflow.com/a/8874382](https://stackoverflow.com/a/8874382) 但这似乎是最新的选择。如果我们的数据库中有超过 10000 个条目（图像），这将使服务器不堪重负。首先，它选择所有条目，然后尝试将所有结果复制到一个数组中。之后，在数组中搜索当前 ID。它很慢。

我正在考虑为查询设置限制，但是在此之后如何获取下一张和上一张图片？

另一个（我认为更好）的解决方案是获取当前图片的 ID 并减少/增加它，直到找到另一个具有新 ID 的图像。我认为这比链接中提供的功能更快。

另外，在同一个链接中还有一个思路，就是在当前图片的模型中设置prev_id和next_id。但是在这里我们有同样的问题，我们如何找到它们？即使我们找到它们，在当前图片中存储有关上一张/下一张图片的数据是否正确？这似乎不对，但我相信当您需要访问该数据时它会更方便。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T22:27:45.237

如果找到，此查询将仅返回下一个/上一行。更好的？（应该在您的模型类中实现）。

```
public function getNextId()
{
    $record=self::model()->find(array(
            'condition' => 'id>:current_id',
            'order' => 'id ASC',
            'limit' => 1,
            'params'=>array(':current_id'=>$this->id),
    ));
    if($record!==null)
        return $record->id;
    return null;
}
public function getPreviousId()
{
    $record=self::model()->find(array(
            'condition' => 'id<:current_id',
            'order' => 'id DESC',
            'limit' => 1,
            'params'=>array(':current_id'=>$this->id),
    ));
    if($record!==null)
        return $record->id;
    return null;
} 
```

# c# - 是否可以更改活动顺序？

> ID：13185948
> 
> 赞同：2
> 
> 时间：2012-11-01T21:42:33.137
> 
> 标签：c#, events, combobox, selectedindexchanged, textchanged

是否可以更改调用某些事件的顺序？for instance, I have a ComboBox and when a selection is changed, I would like the SelectedIndexChanged event to be called before the TextChanged event is called. 老实说，在 SelectedIndexChanged 事件之前调用 TextChanged 事件是非常愚蠢的，因为它使我无法知道是否因为选择了新项目而调用了 TextChanged 事件。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:50:21.637

不，您不能更改顺序 - 它被硬编码到控制代码中：

```
// from http://referencesource.microsoft.com
if (IsHandleCreated) { 
    OnTextChanged(EventArgs.Empty);
} 

OnSelectedItemChanged(EventArgs.Empty);
OnSelectedIndexChanged(EventArgs.Empty); 
```

如果您有每个事件的处理程序并需要它们以特定顺序运行，您可以让 `TextChanged`事件查找事件发生的一些指示符，然后从处理程序`SelectedIndexChanged`调用处理程序，或者只是完成所有工作。`TextChanged``SelectedIndexChanged``SelectedIndexChanged`

这取决于您*为什么*需要它们以特定顺序运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T01:04:41.803

您可以做一些事情，但解决方案不是一个好的解决方案，一旦您忘记了自己所做的事情，您肯定会混淆任何可能在未来维护您的应用程序的人，甚至可能还有您自己。但无论如何，这里是：

想法是让*相同*的函数处理这两个事件，跟踪索引和文本的旧值，以便您可以订购相应的事件处理方式

```
// two fields to keep the previous values of Text and SelectedIndex
private string _oldText = string.Empty;
private int _oldIndex = -2;
.
// somewhere in your code where you subscribe to the events
this.ComboBox1.SelectedIndexChanged += 
new System.EventHandler(ComboBox1_SelectedIndexChanged_AND_TextChanged);
this.ComboBox1.TextChanged+= 
new System.EventHandler(ComboBox1_SelectedIndexChanged_AND_TextChanged);
.
.

/// <summary>
///  Shared event handler for SelectedIndexChanged and TextChanged events.
///  In case both index and text change at the same time, index change
///  will be handled first.
/// </summary>
private void ComboBox1_SelectedIndexChanged_AND_TextChanged(object sender, 
        System.EventArgs e)
{

   ComboBox comboBox = (ComboBox) sender;

   // in your case, this will execute on TextChanged but 
   // it will actually handle the selected index change
   if(_oldIndex != comboBox.SelectedIndex) 
   {
      // do what you need to do here ...   

      // set the current index to this index 
      // so this code doesn't exeute again
      oldIndex = comboBox.SelectedIndex;
   }
   // this will execute on SelecteIndexChanged but
   // it will actually handle the TextChanged event
   else if(_oldText != comboBox.Test) 
   {
      // do what you need to ...

      // set the current text to old text
      // so this code doesn't exeute again 
      _oldText = comboBox.Text;      
   }

} 
```

请注意，当单独触发事件时，此代码仍然有效 - 仅更改文本或仅更改索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-16T17:35:21.527

```
if ( SelectedIndex == -1 )  // only the text was changed. 
```

# php - 如何连接回声

> ID：13185950
> 
> 赞同：-4
> 
> 时间：2012-11-01T21:42:46.753
> 
> 标签：php

我想知道如何将这两个回声连接在一起：

```
<?php echo $_SESSION['id'] ?><?php echo $sessionConcat ?> 
```

我希望它连接回声，以便可以将连接回声设置为变量，例如

```
$assessment = //concatenated echo 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T21:44:57.507

这是你想要完成的吗？

```
$assignment = $_SESSION['id'] . $sessionConcat; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T21:45:27.060

运算符用于连接 PHP 中的`.`字符串。

```
$assessment = $_SESSION['id'] . $sessionConcat; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T21:46:52.620

如果您可以更改该代码，只需使用 . （点）运算符。

如果您想捕获输出，请使用 ob_start()（之前）和 ob_get_contents()（之后）来获取通常会回显的内容。

# regex - 如何使用正则表达式拆分字符串

> ID：13185951
> 
> 赞同：0
> 
> 时间：2012-11-01T21:42:48.770
> 
> 标签：regex, actionscript-3, flash

有谁知道我将如何使用正则表达式拆分这样的字符串？

```
str:String = "word1:word2:6"; 
```

我需要将它分成 3 个部分，分隔符是：

```
//output
w1 = word1
w2 = word2
num = 6 
```

谢谢，

标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:46:43.287

您不需要 RegExp 来实现此目的：

```
str:String = "word1:word2:6";
var arr:Array = str.split(":");
w1 = arr[0];
w2 = arr[1];
num = arr[3]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:46:47.890

您不需要为此使用 RegExp。

```
var a:Array = str.split(':'); 
```

这将创建一个数组，其中每个索引是公共分隔符之间的字符。

所以：

```
a = [word1, word2, 6] 
```

然后，您可以按照您认为合适的方式解析数组。

# c# - 更改 Visual Studio 2012 构建副本重试次数

> ID：13185957
> 
> 赞同：4
> 
> 时间：2012-11-01T21:43:18.473
> 
> 标签：c#, compilation, visual-studio-2012

> **可能重复：**
> [vs11：如何停止 msbuild 复制任务重试](https://stackoverflow.com/questions/10354114/vs11-how-to-stop-msbuild-copy-tasks-retrying)

我有时会处理一个遗留的 C# 项目，即使能够多线程到 4 个内核，也需要花费一分钟的时间来构建。因此，我在等待时注意力不集中的情况并不少见。

如果我忘记关闭正在构建的应用程序的任何部分，有时此构建将花费额外的时间（并最终失败）。Visual Studio 给出了一个错误的形式

> 错误 # 无法将“{File}”复制到“{DestinationFile}”。重试次数超过 10。失败。{集会}

在 VS2008 和 VS2010 中，我会收到此类错误，但没有重试计数，因此构建失败得更快。我想将计数设置为 0 以恢复以前版本的行为。有人可以告诉我设置在哪里，因为我找不到吗？

# android - Web services in Native Android Application

> ID：13185958
> 
> 赞同：1
> 
> 时间：2012-11-01T21:43:18.973
> 
> 标签：android, web-services, rest, soap

I am currently developing an android application using webservices so at the first I couldn't make the right decesion : REST or SOAP, and what kind of data should I use .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:03:07.210

This depends on the type of of data and type of application you are developing.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T22:03:26.560

I was solving the same issue. And as I had to synchronize databases between the server and the Android clients I've finally decided to choose REST with JSON. Each DB table was represented as 1 URL resource on the server.

Advantage of REST over SOAP for this task is that REST defines set of operations: GET, POST, PUT and DELETE (or possibly some others) that can be directly mapped to SELECT, CREATE, UPDATE and DELETE SQL commands. So there are clear rules how to exchange data.

SOAP seemed to me less convenient for the database synchronization as it is RPC style of communication rather than resource based.

As a library for REST communication I decided to use Spring Rest Client for Android: [http://static.springsource.org/spring-android/docs/1.0.x/reference/html/rest-template.html](http://static.springsource.org/spring-android/docs/1.0.x/reference/html/rest-template.html)

And as a JSON parsing library I've chosen GSON: [http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

Alternatively you may consider to use Jackson: [http://jackson.codehaus.org/](http://jackson.codehaus.org/) which is possibly more advanced than GSON.

See also this video about developing Android REST client: [http://www.youtube.com/watch?v=xHXn3Kg2IQE](http://www.youtube.com/watch?v=xHXn3Kg2IQE)

# grails - 调用 Grails 重定向但未呈现页面

> ID：13185960
> 
> 赞同：1
> 
> 时间：2012-11-01T21:43:23.980
> 
> 标签：grails, redirect, twitter-bootstrap, controller, modal-dialog

朋友们下午好。

在过去的几天里，我一直在努力解决一个非常令人沮丧的问题，终于走到了尽头。我团队中每个有一点时间的人似乎也无法弄清楚这个问题，这让我发疯了！

无论如何，我有一个带有删除操作的控制器，当用户从引导模式对话框中确认删除时调用该操作。该操作被调用并且重定向语句在调试中被击中就好了。它甚至将 chrome 开发者工具中的调用显示为被调用！

但是，出于某种原因，页面永远不会重定向。我什至尝试在操作中没有其他代码的情况下明确重定向到 Google。我不知道这笔交易是什么。我会发布任何相关代码；如果您可能需要其他代码，请告诉我。

***目录控制器.groovy***

```
def delete = {
    def catalog = Catalog.get(params.id)
    if (catalog == null) {
        redirect(controller: 'home', action: 'dashboard')
        println "Catalog is null and cannot be Deleted"
        return
    }

    if (request.method == "POST") {
        //catalog.deleted = true TESTING UNTIL REDIRECT WORKS 
        if (catalog.validate()) {
            userService.addUserActivity("Deleted catalog " + catalog.title, catalog.class.getName(), catalog.id, null)
            flash.notice = "Catalog has been deleted"
            catalog.save()
            println "Catalog successfully deleted"
        }
        else {
            flash.error = "There was an error marking the catalog deleted"
        }

        redirect(controller: 'home', action: 'dashboard')
        return
    }

    [ catalog: catalog ]
} 
```

***Bootstrap 模态标记***

```
<div id="deleteDialog" class="modal hide fade" tabindex="-1" role="dialog"  aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"
            aria-hidden="true">×</button>
        <h3 id="myModalLabel">Delete Catalog</h3>
    </div>
    <div class="modal-body">
        <p><strong>Are you sure you want to delete this Catalog?</strong></p>

        <div class="dialogInnerInfo">
            <div class="row-fluid control-group">
                <label class="control-label" for="catalogNumber">Catalog Number:</label>
                <div class="controls">
                    <label id="catalogNumber" >${catalog.legacyId}</label>
                    <input type="hidden" name="id" value="${catalog.id}"/>
                </div>
            </div>

            <div class="row-fluid control-group">
                <label class="control-label" for="catalogTitle">Catalog Title:</label>
                <div class="controls">
                    <label id="catalogTitle">${catalog.title}</label>
                </div>
            </div>

            <div class="row-fluid control-group">
                <label class="control-label" for="catalogTitle">Number of Samples:</label>
                <div class="controls">
                    <label id="catalogTitle">${catalog.sampleCount}</label>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
            <g:remoteLink class="btn btn-primary" controller="catalog" action="delete" id="${catalog.id}" data-dismiss="modal">Yes</g:remoteLink>
            <button class="btn btn-primary" value="${catalog.id}" data-dismiss="modal" onclick="${remoteFunction(action:'delete', controller: 'catalog', params: '\'id=\'  + this.value')}">Click Here</button>
            <button class="btn" data-dismiss="modal" aria-hidden="true">No</button>
        </div>
    </div> 
```

我尝试了各种不同的按钮（g:links、buttons、g:remoteLinks 等）并清理了删除操作。我还尝试删除我的浏览器缓存、grails 缓存、运行 grails-clean 和其他任务，以查看问题是否在我的环境中，但其他人也没有得到重定向。

请原谅丑陋的编码，一旦重定向工作，它将被清理。我也欢迎提出建议和改进:)

非常感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:01:14.023

当前显示的版本无法工作，因为远程链接不会执行重定向，因为响应是从 JS 解析的。您需要在 JavaScript 中手动处理它或使用 ag:link。

此外，您不能`data-dismiss="modal"`与链接结合使用，因为 twitter 引导程序会拦截您的点击并阻止任何进一步的服务器通信。如果您删除 data-dismiss="modal"，它将起作用。

# javascript - 迭代对象，知道您何时进行最后一次迭代

> ID：13185962
> 
> 赞同：4
> 
> 时间：2012-11-01T21:43:29.470
> 
> 标签：javascript

我需要迭代一个对象，但要知道我何时进行最后一次迭代。我怎样才能做到这一点？对象没有“长度”属性，所以我不能只计算迭代次数并将其与长度进行比较。我很想做类似的事情

```
var len = 0;
for ( key in obj ) {
    len++;
}

var i = 0;
for ( key in obj ) {
    i++;
    var last_iter = (i == len);
    ...
} 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T21:46:59.900

您可以使用以下方法找到键的数量：

```
var n = Object.keys(obj).length 
```

在 ES5 之前的浏览器上，[MDN 网站](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)上提供了一个 shim 。

您的问题的可能解决方案是：

```
var keys = Object.keys(obj);
while (keys.length) {

    var key = keys.shift();
    var value = obj[key];

    if (!keys.length) {
        // this is the last key
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T21:47:20.670

如果您需要对最后一个键做某事，您可以简单地将其设置为变量并在循环后使用它。这将节省循环两次。

```
var key = '';
for (key in obj) {
    //...
}
// Operation with last key...
// obj[key]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T21:47:37.380

```
var prev_key = false;
for (key in obj) {
  if(prev_key) {
    <code here>
  }
  prev_key = key;
}
<code here for last key> 
```

如果您可以获取对象的第一个键，则此代码会更好地工作，因此您可以避免 if，但是您不能在 javascript 中可靠地做到这一点（并且仍然在循环中以相同的顺序迭代）。

# google-apps-script - 删除自定义字段谷歌应用脚 本

> ID：13185968
> 
> 赞同：0
> 
> 时间：2012-11-01T21:43:37.053
> 
> 标签：google-apps-script, google-contacts-api

我正在尝试根据其值删除自定义字段，但它在测试中死亡。当前代码：

```
function testDelete2() {
  var contacts = ContactsApp.findContactGroup('test').getContacts();    

    for (var i in contacts) {

    var checkfield = contacts[i].getUserDefinedField('testlabel')

        if (checkfield == 'testvalue') {

          var customFields = contacts[i].getCustomFields();
          customFields.deleteCustomField('testlabel');
        }
    }
} 
```

我收到此错误：TypeError：在对象 CustomField 中找不到函数 deleteCustomField。

不知道那是什么意思。请帮忙。我一遍又一遍地阅读此页面，但没有任何帮助：[https ://developers.google.com/apps-script/service_contacts](https://developers.google.com/apps-script/service_contacts)

我什至尝试了这种不起作用的变体：

```
 customFields.getLabel('testlabel').deleteCustomField(); 
```

此外，是否有任何简单的文档与示例有关如何处理谷歌联系人自定义字段？添加，删除，只是获取价值似乎都是不可能的。我很感激这个问题的帮助，但也不介意在某个地方找到一个带有简单示例的指南。

使用 Serge 的出色代码作为灵感，我想出了这个删除代码（将很快添加带有删除/添加的完整代码）：

更新：通过取出删除/添加自定义字段并仅更新该自定义字段的值来简化过程（不知道为什么一开始没有尝试，也许我做了但编码错误）

```
function testUpdateDues() {

var duescos = ContactsApp.findContactGroup('z8 - Assoc').getContacts();   

for (var i in duescos) {

var customFields = duescos[i].getCustomFields();

for (var n in customFields) {

if (customFields[n].getLabel() == 'Dues Amount' && customFields[n].getValue() == 'unstated'){
customFields[n].setValue('$ 500');
}
}
}
} 
```

**最终编辑**允许我添加/编辑基于 google 联系人组分配的任何自定义字段（感谢 Serge 的协助！！）在脚本中使用基于时间的触发器：

```
function UpdateRegion1() {
  UpdateCustomField('Reg 1 - Pan', 'Region' , 'Region 1 - Panhandle');
}

    function UpdateCustomField(group, customlabel, customvalue) {
  var contacts = ContactsApp.findContactGroup(group).getContacts();
  for (var i in contacts) {
    var fields = new Array();
    var customFields = contacts[i].getCustomFields(); 
    for(var n in customFields) {
      fields.push(customFields[n].getLabel());
    }
    if (fields.indexOf(customlabel)==-1){
      contacts[i].addCustomField(customlabel, customvalue);
    }
    for(var j in customFields) {
      if (customFields[j].getLabel() == customlabel && customFields[j].getValue() != customvalue){
        customFields[j].setValue(customvalue);
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:44:21.923

这是它的工作原理，请参阅代码中的注释

```
function testDelete2() {
  var contacts = ContactsApp.findContactGroup('test').getContacts();    

    for (var i in contacts) {

      var customFields = contacts[i].getCustomFields();// returns an array of custom fields

        for(var n in customFields) { // iterate the custom fields

Logger.log(customFields[n].getLabel()+' = '+customFields[n].getValue()) // EDIT : just changed this line to show the label AND the value

          if(customFields[n].getLabel() == 'testlabel'){ // compare the label with your criteria

          customFields[n].deleteCustomField();// if true then delete
      }
    }
  }
} 
```

我希望这也（以某种方式）回答您的第二个请求......正如您所看到的，这一切都是关于以正确的方式使用这些功能。我建议您使用记录器来帮助您。它允许查看返回的变量类型......（就在你我之间，这就是我“调试”你的代码的方式......但请保密;-)

我在您的个人资料中看到您“*使用 google 应用程序脚本，因为我必须这样做*”，但我确信（我希望）您最终会喜欢它。

**编辑 2：** 在不存在时添加自定义字段的脚本

```
function addCustomField() {
  var contacts = ContactsApp.findContactGroup('Insas').getContacts();    

    for (var i in contacts) {
var fields = new Array()
      var customFields = contacts[i].getCustomFields()
        for(var n in customFields) {
        fields.push(customFields[n].getLabel())
        }
Logger.log(fields)

      if(fields.indexOf('insas')==-1){

          contacts[i].addCustomField('insas','oui')
      }
    }
  } 
```

# jquery - 从 jquery 和 ajax 中的文本文件中提取 IP 地址

> ID：13185974
> 
> 赞同：0
> 
> 时间：2012-11-01T21:44:30.963
> 
> 标签：jquery, ajax

我有一个使用 ajax 读取的文本文件。现在的问题是当我的文本文件中有两行字符串时。只有一个时我没有问题。

这是字符串

```
New Connection from: 192.168.5.10 
```

在那里提取ip没有问题。但问题是如果有两行或更多行。

```
New Connection from: 192.168.5.10
New Connection from: 192.168.5.30 
```

这是我的做法。如果文本文件中只有一行字符串，它就可以工作。

```
$.ajax({
    type: "GET",
    url: url,
    async: true,
    cache: false,
    dataType: "JSON",
    success: function(data) {

        lines = data.lines;
        var ip;
        var ipset;

        $(".dev").empty();

        for (var i = 0; i < lines.length; i++) {

            $(".dev").append(lines[i] + "\n");

            ip = lines[i];

            console.log(getIP(ip));

            ipset = getIP(ip);
        }
    }
});​ 
```

getIP 函数是：

```
function getIP(line) {
    var out =line.split(": ");
    return out[1];
} 
```

我怎样才能让它只从字符串中获取 IP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:01:07.723

尝试更换

```
lines = data.lines; 
```

和

```
lines = data.split('\n'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:48:26.187

它们很可能是按`newline`字符分隔的。所以你需要`newline`在得到之前分开`IP`

```
function getIP(line){
    var out = line.split("\n"); //returns lines

    var ips = []

    for (var i = 0; i < out.length; i++ ) {
       ips.push(out.split(': ')[1]);
    }

    return ips;
} 
```

这个函数现在将返回一个 IP 地址数组。

如果你只想要第一个，那么你可以`getIP(ip)[0]`。尝试让我知道这是否适合您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T21:59:18.587

您可以使用正则表达式来提取 IP：

```
function getIP(lines)
{
   var result = lines.match(/[\d]{1,3}\.[\d]{1,3}\.[\d]{1,3}\.[\d]{1,3}/gm);
   return result;
   //result is an array
} 
```

# c# - varbinary(MAX) 类型的大型数据的 SQL Server 超时

> ID：13185981
> 
> 赞同：1
> 
> 时间：2012-11-01T21:45:12.433
> 
> 标签：c#, sql-server

我在 SQL Server 表中保留了大约 12 MB 的二进制数据。保存此数据的列的类型为`varbinary(MAX)`。

当我从服务器下载这个二进制数据时，如果我在局域网中就可以了。但是，我在尝试获取数据的 C# 应用程序中遇到 SQL Server 超时错误。

出现此错误的原因可能是什么？数据库实例的远程查询超时属性默认为 600 秒。将此更改为零没有帮助。

可以连接并从服务器获取一些其他值。例如，我首先检查`DateTime`同一个表中的一个值，以确定是否应该下载大约 12 MB 的数据。如果内容是新的，那么我开始执行下载大数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:52:56.603

您的连接超时时间是多少？RemoteQuery Timeout 是服务器定义的，它测量从 EXEC 到完成任务所经过的时间，但连接超时是客户端定义的。尝试在您的连接字符串中添加一个子句，例如：

```
Connect Timeout=300; 
```

看看这是否会影响您的错误。以下是有关差异的一些信息：http: [//msdn.microsoft.com/en-us/library/ms177457%28v=SQL.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms177457%28v=SQL.90%29.aspx) http://vyaskn.tripod.com/watch_your_timeouts.htm

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T02:28:28.363

你是用 System.Data.SqlClient 来查询的吗？如果是这样，您可以调整 SqlCommand.CommandTimeout 值。默认值为 30 秒。

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx)

# javascript - Knockback.js：如何在主干保存更新模型时更新视图？

> ID：13185985
> 
> 赞同：4
> 
> 时间：2012-11-01T21:45:25.707
> 
> 标签：javascript, backbone.js, knockout.js, knockback.js

这是我第一次使用[Knockback.js](http://kmalakoff.github.com/knockback/)。

我正在研究 Knockback 概念证明，但是当我保存模型时，我很难让视图模型更新。在这种情况下，服务器返回一个`Domain`带有字段集的新对象`id`，这意味着该对象现在存在于后端。一旦发生这种情况，我希望 UI 更改以反映它现在已保存的事实。

这是我正在使用的代码：

```
<table cellspacing="0" class="listing-table" id="domainListTable">
    <thead>
        <tr>
            <th scope="col">
                Domain
            </th>
        </tr>
    </thead>
    <tbody data-bind="foreach: domains">
        <tr>
            <td>
                <!-- ko if:save -->
                    <a data-bind="attr: { href: domainEditLinkdomainId, title: domain},text : domain">
                        <span data-bind="text: domain"></span>
                    </a>
                <!-- /ko -->
                <!-- ko ifnot:save -->
                    <input type="text" maxlength="250" style="display:inline-block;" class="medium-text-field" data-bind="value: domain"></input>
                    <input data-bind="click: save" style="display:inline-block;"  type="submit" value="Save New Domain" alt="" title=""/>
                <!-- /ko -->
            </td>
        </tr>
    </tbody>
</table>
<br />
<input data-bind="click: addDomain" type="submit" value="Add New Domain" alt="" title=""/>

<script type="text/javascript">
    var Domain = Backbone.Model.extend({
        defaults: function() {
          return {
            domain: "New Domain"
          };
        },
    });

    var Domains = {};

    Domains.Collection = Backbone.Collection.extend({
        model: Domain,
        url: '/cms/rest/poc/${customerId}/domains/'
    });

    var domains = new Domains.Collection();
    domains.fetch();

    var DomainViewModel = kb.ViewModel.extend({
        constructor: function(model) {
            kb.ViewModel.prototype.constructor.apply(this, arguments);

            var self = this;

            this.save = kb.observable(model, {
              key: 'save',
              read: (function() {
                return !model.isNew();
              }),
              write: (function(completed) {
                return model.save({}, {
                    wait: true,
                    success: function (model, response) {
                        console.log(model);
                        console.log(response);
                        console.log(self);
                    },
                    error: function(model, response) {
                        alert("Oh NooooOOOes you broked it!!!11!")
                    }
                });
              })
            }, this);

            this.domainEditLinkdomainId = ko.dependentObservable(function() { 
                if(!this.save())
                    return "";

                return "cms?action=domainDetail&domainID=" + this.model().id;
            }, this);
         }
    });

    var DomainsViewModel = function(collection) {
        this.domains = kb.collectionObservable(collection, { view_model: DomainViewModel });
        this.addDomain = function() {
            this.domains.push(new DomainViewModel(new Domain()));
        };
    };

    var domainsViewModel = new DomainsViewModel(domains);

    ko.applyBindings(domainsViewModel);
</script> 
```

问题似乎是`XMLHttpRequest`done by`model.save()`直到读取保存后才返回`kb.observable`，因此 html 部分没有成功更新，因为它仍然认为`model.isNew()`是 true。

正如您可能看到的那样，我一直在弄乱几个不同的想法，包括`valueHasMutated`在可观察对象上使用该方法来指示模型已更新，但我也不知道如何做到这一点。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:15:14.297

您可以收听`change:id`模型上的事件。

这只会在模型的状态从新状态变为持久状态时触发。

# facebook - 使用 PassportJS 时如何与 Facebook Graph API 交互

> ID：13185993
> 
> 赞同：3
> 
> 时间：2012-11-01T21:45:48.013
> 
> 标签：facebook, facebook-graph-api, express, passport.js

可能是显而易见的和简单的。我有一个应用程序应该访问 Facebook 用户的朋友信息。在使用 PassportJS 对用户进行身份验证并且我的应用程序收到 accesstoken 后，我如何获取用户的朋友信息？或者任何受保护的信息？用户朋友访问的范围参数是什么？

**编辑：** 只想提一下，最初的问题并没有真正得到回答，但答案足以让我继续调查。

我的解决方案是使用 PassportJS 来管理登录流程，当我收到 accessToken 时，我将它用于我的 Facebook Graph API 调用，这非常容易做到。我将为此对我的模块进行一些返工，并将其发布在 GitHub 上以按原样使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:04:59.100

为了修改范围，您在为 Facebook 策略设置路线时执行此操作。

例如，如果我希望用户的电子邮件成为我范围的一部分，我的电子邮件将如下所示：

```
app.get('/auth/facebook', passport.authenticate('facebook',  { scope: 'email' }));
app.get('/auth/facebook/callback',
  passport.authenticate('facebook', { successRedirect: '/',
                                      failureRedirect: '/' })); 
```

我正在使用 Mongoose 将我的信息保存到 MongoDB，但是您可以轻松地将他们的朋友粘贴到 req.user 中。以下是我如何映射 Facebook 用户数据的示例：

```
passport.use(new FacebookStrategy({
    clientID: Common.conf.fb.appId,
    clientSecret: Common.conf.fb.appSecret,
    callbackURL: Common.conf.site_url + "/auth/facebook/callback"
  },
  function(accessToken, refreshToken, profile, done) {
    Model.User.findOne({uid: profile.id}, function(err, user) {
      if (err) { return done(err); }
      if (user) { done(null, user); } else {
        var user_data = {
          provider:   profile.provider
          , alias:  profile.username
          , email:      profile.emails[0].value
          , uid:      profile.id
          , created:  new Date().getTime()
          , name: {
            first:  profile.name.givenName
            , last: profile.name.familyName
          }
          , alerts: {
            email:      true
            , mobile:   false
            , features: true
          }
        };
        new Model.User(user_data).save(function(err, user) {
          if(err) { throw err; }
          done(null, user);
        });
      }
    });
  }
)); 
```

有时像这样放置一个 console.log(profile) 会很有帮助：

```
 function(accessToken, refreshToken, profile, done) {
        console.log(profile); 
```

为了帮助您查看 Facebook API 为您提供的原始输出，并检查您的自定义范围变量是否存在。

# javascript - Windows 8 Metro JS，检测应用程序的关闭

> ID：13185995
> 
> 赞同：0
> 
> 时间：2012-11-01T21:45:55.453
> 
> 标签：javascript, windows, detect

在 Windows 8 Metro 应用程序中，您如何检测用户何时退出应用程序，或者它被系统终止？我需要在关闭应用程序之前清除一些数据，例如重置动态磁贴等...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:51:23.103

我认为这篇文章将帮助您了解 Windows 商店应用程序的生命周期[http://msdn.microsoft.com/en-us/library/windows/apps/hh464925.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh464925.aspx)

ps没有更多的“地铁”:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T23:38:13.917

取决于“用户何时退出应用程序”的含义。实际上，您可以使用 Alt-F4 或从屏幕顶部滑动到底部来退出/关闭/终止 Windows 8/RT 中的应用程序。其他任何事情（切换到另一个应用程序、按 Windows 键等）都只是暂停应用程序。

简短的回答是，您无法检测到应用程序何时关闭，只能暂停。

当一个应用程序关闭时，它首先被挂起。Microsoft 建议您将暂停视为应用将关闭，因为如果存在资源争用，操作系统可能会决定终止暂停的应用而不发出警告。

以下是应用程序暂停时触发的“检查点”事件的文档：http: [//msdn.microsoft.com/en-us/library/windows/apps/br229839.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br229839.aspx)

本页介绍如何处理暂停应用程序：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh465138.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465138.aspx)

# jquery - 具有随机 alpha 效果的 Jquery Grid

> ID：13185996
> 
> 赞同：1
> 
> 时间：2012-11-01T21:45:55.697
> 
> 标签：jquery, grid, tiles, alpha

好的，我这里只需要一盏灯。

我只想制作一个视觉效果，就像这个网站右侧的微笑图像一样。

[http://iitweb.com/](http://iitweb.com/)

基本上是带有随机 alpha 的网格平铺效果，在图像上连续打开和关闭。有什么想法可以用来做这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T18:52:00.487

Well, this may be a little late for you but it might help anyone looking for the same thing.

This would be my first approach:

**HTML**

```
<img src="https://profile-b-ord.xx.fbcdn.net/hprofile-ash3/27537_111050195577875_7540_q.jpg" alt="" />
<img src="http://profile.ak.fbcdn.net/hprofile-ak-snc7/369585_100004094319706_2126721826_q.jpg" alt="" />
<img src="http://vialibrepl.com/wp-content/uploads/2013/08/THUNDERCATS-50x50.jpg" alt="" />
<img src="http://www.brainzum.com/wp-content/uploads/2013/02/Inspector-Gadget-Go-Go-Gadget-Collection1-50x50.jpg" alt="" />
<img src="http://spe.fotolog.com/photo/46/54/51/_melizita/Homer_Simpson_1240210329589_t.jpg" alt="" /> 
```

**JS**

```
function fadeRandomTile()
{
    var tiles = $("img").length;
    var random_tile = Math.floor(Math.random() * tiles);
    var $tile = $("img").eq(random_tile);

    if(!$tile.data("alpha"))
    {
        $tile.fadeTo(500, 0.5).data("alpha", true);
    }
    else
    {
        $tile.fadeTo(500, 1).data("alpha", false);
    }
}

setInterval(function(){fadeRandomTile()}, 1000); 
```

**DEMO** [http://jsfiddle.net/gEpan/1/](http://jsfiddle.net/gEpan/1/)

# ios - iOS - UITableViewCell 被从 superView 中删除？

> ID：13185999
> 
> 赞同：0
> 
> 时间：2012-11-01T21:46:11.543
> 
> 标签：ios, uitableview

我有一个带有文本文件的 UITableViewCell，一旦屏幕上不再显示单元格，我就需要关闭键盘。当从 tableView 中删除单元格（不再可见）时，是否有一种简单的方法可以通知？

我在 Cell Class 中尝试了以下操作，但没有被调用。

```
- (void)removedFromSuperView
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:04:31.750

麦迪是对的。您需要重复使用您的单元格，我认为这是解决您问题的解决方案：

1.  在您的 TableViewDelegate 中，调用一个方法来更新您的单元格内容
2.  在这个方法中，检查 texfield “isFirstResponder”
3.  如果是真的，请在您的文本字段中调用“resignFirstResponder”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:53:08.213

细胞被重复使用。当一个单元格从屏幕的一端滚动时，它会在另一端重复使用。

当行离开屏幕时，为什么需要关闭键盘？如果用户快速将行滚动回到屏幕上怎么办？如果您提供有关您正在做什么的更多详细信息，那么有人可以提供更具体的解决方案。