# StackOverflow 问答 14479000-14479999

# c# - 在 EF C# 中使用相互依赖的实体

> ID：14479000
> 
> 赞同：3
> 
> 时间：2013-01-23T11:48:43.210
> 
> 标签：c#, sql, entity-framework, dependency-management

我必须实体`A`和`B`.

`A`有字段： `id`（PK）和`b_fk`（FK到`B's id`）。 `B`具有相似的字段： `id`(PK) 和`a_fk`(FK to `A's id`)。

现在我想创建对象`A`和`B`：

```
createAAndBMethod(Entities context){
    A a = new A();
    B b = new B();
    a.b_fk = b;
    b.a_fk = a;
    context.As.AddObject(a);
    context.Bs.AddObject(b);
}

someImportantMethod(){
    //do sth
    Entities context = new Entities(...);
    //do sth, maybe some changes to db on context
    createAAndBMethod(context);
    //do sth, maybe some changes to db on context
    context.SaveChanges();// <-- here I'm getting error
} 
```

保存不起作用并出现错误：`Unable to determine a valid ordering for dependent operations. Dependencies may exist due to foreign key constraints, model requirements, or store-generated values.`

有什么办法可以通过一次保存来解决这个问题吗？我需要在一些不应该保存更改的代码中创建这两个对象，所以我`context.SaveChanges()`之前无法在任何地方执行。

On`context.SaveChanges()`可能会发生类似的事情：

```
 Create newA with nulled field b_fk
 Create newB with a_fk = newA
 Set newA.b_fk to newB 
```

更新：两者`a_fk`都可`b_fk`以为空。我正在使用 MS SQL 和 Azure SQL。

更新2：我改为`createAAndBMethod(Entities context)`：

```
createAAndBMethod(Entities context){
    A a = new A();
    context.As.AddObject(a);
    B b = new B();
    a.b_fk = b;
} 
```

但它仍然无法使用相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:54:49.270

我认为您的模型有问题；A表有B表的外键引用；并且 B 表具有对 A 表的外键引用。那你为什么不合并这些表，只创建一个表呢？

如果您试图建立一对一的关系，这不是正确的方法。

更新：数据库设计不正确。只在表 B 中创建一个外键就足够了。无需在表 A 中创建外键，因为这样的设计满足“A 可能有 0 个或多个 B”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:51:21.297

尝试删除这些行：

```
b.a_fk = a;

context.Bs.AddObject(b); 
```

我认为您将对象添加`b`到上下文中两次。`a`当您使用外键添加对象时，EF 会自动执行此操作。

**更新：**

试试这两种变体：

```
 createAAndBMethod1(Entities context)
  {
        A a = new A();
        B b = new B();
        a.b_fk = b;
        b.a_fk = a;
        context.As.AddObject(a);
  } 

createAAndBMethod2(Entities context)
{
        A a = new A();
        B b = new B();
        a.b_fk = b;
        context.As.AddObject(a);
        context.SaveChanges();
        b.a_fk = a;
        context.SaveChanges();    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:53:46.087

就像你想使用一个上下文，同时你有一个两个表。

```
 var p = new Person()
    {
        LastName = "test1111111111",
    };
    var c = new Child()
    {
        Name = "Testchild"
    };
    PersonTest(p, c); 
```

* * *

```
 public void PersonTest(Person ob, Child ob2)
    {
        try
        {
            using (var con = new Entities())
            {
                con.Configuration.AutoDetectChangesEnabled = false;
                var o = new Person();
                if (ob.PersonId > 0)
                    o = con.People.Find(ob.PersonId);

                o.PersonId = ob.PersonId;
                o.LastName = ob.LastName;
                if (ob.PersonId == 0)
                    con.People.Add(o);
                con.ChangeTracker.DetectChanges();
                con.SaveChanges();
                i = o.PersonId;

                var o2 = new Child();
                if (ob2.ChildrenId > 0)
                    o2 = con.Children.Find(ob.PersonId);

                o2.PersonId = ob2.ChildrenId;
                o2.Name = ob2.Name;
                o2.PersonId = i;
                if (ob2.ChildrenId == 0)
                    con.Children.Add(o2);
                con.SaveChanges();
            }
        }
        catch (Exception ex)
        {
            throw new Exception(ex.InnerException.Message);
        }
        finally
        {
            con.Configuration.AutoDetectChangesEnabled = true;
        }
    } 
```

# javascript - Javascript：带有变量的正则表达式以匹配包含 HTML 代码的字符串的一部分

> ID：14479003
> 
> 赞同：0
> 
> 时间：2013-01-23T11:49:06.510
> 
> 标签：javascript, regex

我正在尝试将正则表达式（包含 1 个变量）与存储为字符串的 HTML 代码页面进行匹配。

HTML 字符串是一个数组，每个元素都包含如下所示的内容。（我已经拆分了某个标签）。数组的每个元素都包含房屋的一些数据（名称、平方米数量等）。当然是虚构的。关键是我需要通过匹配第一个 TD 标签之间的文本来匹配其中的一个，而我需要的部分是表单最后一个 INPUT 标签中的 VALUE（数字）。

```
<TR BGCOLOR=#D4C0A1>
 <TD WIDTH=40%><NOBR>Luminous&#160;Arc&#160;2</NOBR></TD>
 <TD WIDTH=10%><NOBR>154&#160;sqm</NOBR></TD>
 <TD WIDTH=10%><NOBR>6460&#160;gold</NOBR></TD>
 <TD WIDTH=40%><NOBR>rented</NOBR></TD>
 <TD><TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0>
 <FORM ACTION= METHOD=post><TR><TD>
  <INPUT TYPE=hidden NAME=world VALUE=Olympa>
  <INPUT TYPE=hidden NAME=town VALUE="Yalahar">
  <INPUT TYPE=hidden NAME=state VALUE=>
  <INPUT TYPE=hidden NAME=type VALUE=houses>
  <INPUT TYPE=hidden NAME=order VALUE=>
  <INPUT TYPE=hidden NAME=houseid VALUE=37010>
  <INPUT TYPE=image NAME="View" ALT="View" SRC="" BORDER=0 WIDTH=120 HEIGHT=18>
</TD></TR></FORM></TABLE></TD></TR> 
```

我构建了以下正则表达式：

`var regex = new RegExp(house + "[\\s\\S]+name=houseid value=([0-9]+)>", "i");`

`house`房子的名字在哪里（在这个例子中， `Luminous&#160;Arc&#160;2`），我需要的部分是 houseid `37010`。

我认为这个正则表达式应该可以很好地工作并给我我需要的命中，但是`houses[i].match(regex)`每次都返回 null。我在字符串中找不到匹配项。

到目前为止，我已经尝试了几种方法，包括尝试将字符串转换为 DOM 对象以拆分 TR 标签（转换失败）。我觉得我很接近，但我被困住了。

有谁知道为什么我的正则表达式可能无法工作？

肯尼斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:40:21.810

您可以将字符串添加到您的 html（在`display:none`div 或类似的东西中），然后像在任何地方一样访问 DOM。

例如：

```
<div id="stringContainer"></div> 
```

```
var searchstring = "Luminous&#160;Arc&#160;2";
searchstring = searchstring.replace(/&#160;/g, '&nbsp;') // Convert &#160; to &nbsp;

var c = document.getElementById("stringContainer");
c.innerHTML = '<table>'+houses+'</table>';
var h = c.getElementsByTagName('tr');

for(var i = 0, l = h.length; i < l; i++){ // Loop through the found elements
    var name = h[i].firstChild.nextSibling.getElementsByTagName('nobr')[0]; // Get the house's name.
    if(name && name.innerHTML == searchstring){ // If the name matches the search string. (innerHTML returns &nbsp; instead of &#160;. hence the replace earlier.)
        console.log(h[i].getElementsByTagName('input')[5].value) // log the value.
    }
} 
```

**[工作示例](http://fiddle.jshell.net/rVxYh/)**

假设变量`houses`为：

```
var houses = '<TR BGCOLOR=#D4C0A1>\n\
<TD WIDTH=40%><NOBR>Luminous&#160;Arc&#160;2</NOBR></TD>\n\
<TD WIDTH=10%><NOBR>154&#160;sqm</NOBR></TD>\n\
<TD WIDTH=10%><NOBR>6460&#160;gold</NOBR></TD>\n\
<TD WIDTH=40%><NOBR>rented</NOBR></TD>\n\
<TD>\n\
    <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0>\n\
        <FORM ACTION= METHOD=post>\n\
            <TR>\n\
            <TD>\n\
            <INPUT TYPE=hidden NAME=world VALUE=Olympa>\n\
            <INPUT TYPE=hidden NAME=town VALUE="Yalahar">\n\
            <INPUT TYPE=hidden NAME=state VALUE=>\n\
            <INPUT TYPE=hidden NAME=type VALUE=houses>\n\
            <INPUT TYPE=hidden NAME=order VALUE=>\n\
            <INPUT TYPE=hidden NAME=houseid VALUE=37010>\n\
            <INPUT TYPE=image NAME="View" ALT="View" SRC="" BORDER=0 WIDTH=120 HEIGHT=18>\n\
            </TD>\n\
            </TR>\n\
        </FORM>\n\
    </TABLE>\n\
</TD>\n\
</TR>\n\
<TR BGCOLOR=#D4C0A1>\n\
<TD WIDTH=40%><NOBR>Dark&#160;Arc&#160;2</NOBR></TD>\n\
<TD WIDTH=10%><NOBR>154&#160;sqm</NOBR></TD>\n\
<TD WIDTH=10%><NOBR>6460&#160;gold</NOBR></TD>\n\
<TD WIDTH=40%><NOBR>rented</NOBR></TD>\n\
<TD>\n\
    <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0>\n\
        <FORM ACTION= METHOD=post>\n\
            <TR>\n\
            <TD>\n\
            <INPUT TYPE=hidden NAME=world VALUE=Olympa>\n\
            <INPUT TYPE=hidden NAME=town VALUE="Yalahar">\n\
            <INPUT TYPE=hidden NAME=state VALUE=>\n\
            <INPUT TYPE=hidden NAME=type VALUE=houses>\n\
            <INPUT TYPE=hidden NAME=order VALUE=>\n\
            <INPUT TYPE=hidden NAME=houseid VALUE=37010>\n\
            <INPUT TYPE=image NAME="View" ALT="View" SRC="" BORDER=0 WIDTH=120 HEIGHT=18>\n\
            </TD>\n\
            </TR>\n\
        </FORM>\n\
    </TABLE>\n\
</TD>\n\
</TR>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T22:27:37.873

I tried your regex with Cerbrus's `houses` variable and it works fine.
(I added the lazy quantifier `?` to `[\\s\\S]+`, but it works fine without it as well.)

```
var house = "Luminous&#160;Arc&#160;2";
var regex = new RegExp( house + "[\\s\\S]+?name=houseid value=([0-9]+)>", "i" );

houses.match( regex )[1];    // "37010" 
```

Presumably then, your `house` variable has the wrong value or `houses[i]` is not accessing the right string.

# sql - 不存在与不存在

> ID：14479005
> 
> 赞同：2
> 
> 时间：2013-01-23T11:49:08.400
> 
> 标签：sql, sql-server, optimization, plsql

我正在优化一些 SQL 查询（这可以被认为是我最近发布的问题的第 2 部分）并将一些 NOT IN 替换为 NOT EXISTS 谓词

我是否认为这样做的主要好处是，使用 NOT EXISTS 您可以获得这样的好处，即当找到单个匹配项时语句将终止，但 NOT IN 与计数子查询将不得不进行全表扫描？

如果选择的数据包含 NULL，似乎 NOT IN 也需要额外的工作，这是正确的吗？

在我在 proc 中实现它们之前，我需要确保在这两种情况下，第二个语句比第一个语句更好（并且在功能上等效）：

情况1：

```
 --exclude sessions that were tracked as part of a conversion during the last response_time minutes
        -- AND session_id NOT IN (SELECT DISTINCT tracked_session_id    
        --                              FROM data.conversions WITH (NOLOCK)
        --                              WHERE client_id = @client_id
        --                              AND utc_date_completed >= DATEADD(minute, (-2) * cy.response_time, @date)
        --                              AND utc_date_completed <= @date     
        --                              AND utc_date_clicked <= @date)

        AND NOT EXISTS (SELECT 1
                            FROM data.conversions WITH (NOLOCK)
                            WHERE client_id = @client_id
                            AND utc_date_completed >= DATEADD(minute, (-2) * cy.response_time, @date)
                            AND utc_date_completed <= @date
                            AND utc_date_clicked <= @date
                            AND data.conversions.tracked_session_id = d.session_id
        ) 
```

案例二：

```
 -- NOT EXISTS vs full table scan with COUNT(dashboard_id)                                   
        -- AND (SELECT COUNT(dashboard_id)
        --          FROM data.dashboard_responses WITH(NOLOCK)
        --          WHERE session_id = d.session_id
        --          AND cycle_id = cy.id
        --          AND client_id = @client_id) = 0

        AND NOT EXISTS(SELECT 1
                            FROM data.dashboard_responses
                            WHERE session_id = d.session_id
                            AND cycle_id = cy.id
                            AND client_id = @client_id) 
```

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T12:08:40.203

正如您正确地说，两者是不同的东西。如果不包含的项目的子查询不`IN`包含`NULL`任何结果，则不会返回任何结果，因为没有任何内容等于`NULL`并且没有任何内容不等于`NULL`（甚至不是 NULL）。

假设您使用两者来实现相同的结果，只要您在语句中处理`NULL`值，两者之间就没有区别。`IN`优化器足够聪明，可以知道在`NULL`消除了值或使用不可为空的列后两者是相同的，因此请使用相同的`ANTI SEMI JOIN`.

考虑这两个表：

```
CREATE TABLE T (ID INT NOT NULL PRIMARY KEY);
CREATE TABLE T2 (ID INT NOT NULL PRIMARY KEY); 
```

这两个查询得到完全相同的执行计划：

```
SELECT  *
FROM    T
WHERE   ID NOT IN (SELECT ID FROM T2);

SELECT  *
FROM    T
WHERE   NOT EXISTS (SELECT ID FROM T2 WHERE T.ID = T2.ID); 
```

因为优化器知道 T2.ID 是不可为空的列。第三张桌子：

```
CREATE TABLE T3 (ID INT); 
```

其中 ID 列既不是索引也不是可为空的，这两个查询呈现非常不同的执行计划：

```
SELECT  *
FROM    T
WHERE   ID NOT IN (SELECT ID FROM T3);

SELECT  *
FROM    T
WHERE   NOT EXISTS (SELECT ID FROM T3 WHERE T.ID = T3.ID); 
```

而 NOT EXISTS 会更有效率。然而，这两个再次产生（基本上）相同的执行计划：

```
SELECT  *
FROM    T
WHERE   ID NOT IN (SELECT ID FROM T3 WHERE T3.ID IS NOT NULL);

SELECT  *
FROM    T
WHERE   NOT EXISTS (SELECT ID FROM T3 WHERE T.ID = T3.ID); 
```

所有这些查询和示例数据都在[SQL Fiddle](http://www.sqlfiddle.com/#!3/f0dc1/1)

**编辑**

要实际回答您的问题：

**情况 1**与`NOT IN`or `NOT EXISTS`if `tracked_session_id`is an non nullable column in`data.conversions`或您`WHERE tracked_Session_id IS NOT NULL`在 In 语句中添加时的性能相同。如果该列不可为空并且您不排除空值，则性能将不一样，并且假设没有空值`NOT EXISTS`会表现得更好，如果没有空值，结果将不一样，所以性能是没有可比性。

**案例 2**的示例数据实际上让我感到惊讶，我认为这不会被优化`ANTI SEMI JOIN`为这：

```
SELECT  *
FROM    T
WHERE   (   SELECT  COUNT(*) 
            FROM    T3
            WHERE   T.ID = T3.ID
        ) = 0; 
```

优化后完全一样`NOT EXISTS`。所以看起来优化器比我想象的更聪明，如果你希望计数不是 0，它只会生成不同的计划。

[案例 2 的 SQL 小提琴](http://www.sqlfiddle.com/#!3/f0dc1/3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T11:59:46.117

你说得对，空值有很大的不同。`NOT IN`查询检查每个元素是否确实不匹配。与 null 的比较不会产生明确的结果。因此，如果您的子查询包含 null，则不会将任何内容视为“ `NOT IN`”。

[请参阅此 SQL Fiddle 示例。](http://www.sqlfiddle.com/#!3/08bf7/1)

这种行为的不直观的副作用`NOT IN`是实际上并不是相反的`IN`。

`NOT EXISTS`查询没有这个问题。

我会犹豫就哪个性能更好做出任何笼统的陈述，因为这通常取决于发生什么样的优化。这就是为什么如果您关心性能，能够找出执行计划很重要。

# python - python中的赋值

> ID：14479006
> 
> 赞同：0
> 
> 时间：2013-01-23T11:49:08.073
> 
> 标签：python, python-3.x

我有两个值：starid1、starid2 和一个名为 starlist 的列表，我想从包含 id starid1 和 starid2 的 starlist 中提取两个对象，并且列表中没有重复的 id。

这就是我编写代码的方式

```
star1,star2=None,None
for x in starlist:
    if x.id == starid1:
        star1 = x
    elif x.id == starid2:
        star2 = x 
```

这是另一种方式

```
star1 = [x for x in starlist if x.id==starid1][0]
star2 = [x for x in starlist if x.id==starid2][0] 
```

或者我可以将其转换为字典并选择两个对象。但我认为成本太高，因为我只想分配两个值。

当我写下这些代码时，我感到很愚蠢。我想我只是错过了在 python 中执行此操作的正确方法。告诉我你怎么知道做得更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:55:08.940

一种常见的方法是使用生成器：

```
star1 = next(x for x in starlist if x.id==starid1)
star2 = next(x for x in starlist if x.id==starid2) 
```

这具有懒惰的优点，因此可以节省内存并提前停止。`break`在您的示例中，这与添加了语句的第一个循环基本相同：

```
star1,star2=None,None

for x in starlist:
    if x.id == starid1:
       star1 = x
       break

for x in starlist:
    if x.id == starid2:
       star2 = x
       break 
```

但是请注意，`next`如果列表中没有此类项目，则会引发异常。如果您想避免这种情况，请在调用中添加一个默认值：

```
star1 = next((x for x in starlist if x.id==starid1), None) 
```

# svn - 是否可以在 SVN 中找出执行合并活动的修订版

> ID：14479013
> 
> 赞同：3
> 
> 时间：2013-01-23T11:49:29.863
> 
> 标签：svn, svn-client

我正在尝试查找执行合并的分支上的修订列表（这可能来自 SVN 中的任何分支）

我一直在进行大量搜索，并找到了识别已合并的修订版甚至应该合并的修订版（使用 svn mergeinfo）的方法，但这不是我想要的。

我想要在其中将 URL 作为参数传入的开发线上执行合并的修订。我注意到这个存储库使用了 mergeinfo，我只想使用它。

经过几个小时的搜索，我终于放弃了。似乎它要么不可能，要么我看错了方向:(

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:01:35.740

不幸的是，它不可能开箱即用：通过修改**svn:mergeinfo**属性可以识别合并活动。

问题是，您无法通过查看 svn 日志来查看文件/目录的内容是否发生了变化，或者某些属性是否发生了变化。您需要在这些修订之间进行区分。

一个非常简单的解决方法可能是执行合并操作的用户应该在日志消息中添加关键字（例如：*MERGE*）。如果关键字出现在某个日志消息中，很容易通过 pre-commit 钩子检查

# jquery - Python 瓶子通知

> ID：14479015
> 
> 赞同：1
> 
> 时间：2013-01-23T11:49:30.907
> 
> 标签：jquery, python, bottle

我有一个在bottle.py 上运行的网络界面。如果发生某些事情，我不想做的是在网站上弹出一个小通知。

我不确定如何告诉客户发生了什么事。

我应该只投票还是有更优雅的方式？

因为我希望通知及时出现，所以我必须至少每秒轮询一次，这对于网络服务器来说听起来像是很多负载，只是为了通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:49:53.103

As mentionned by Joe Doherty, websockets is a solution. You may be ineterested by [bottle-tornadosocket](https://github.com/cime/bottle-tornadosocket) in order to run bottle on top of the [Tornado web server](http://www.tornadoweb.org/). I didn't try myself but it looks interesting.

However, websocket may not be available for all browsers. Using long-polling is another solution. In this case, I would recommend to look at [tornadio](https://github.com/MrJoes/tornadio) which should be possible to use together with bottle.

I hope it helps

# java - 我们在哪里可以在 java 中使用 Object.clone() 方法？

> ID：14479017
> 
> 赞同：-2
> 
> 时间：2013-01-23T11:49:39.333
> 
> 标签：java

> **可能重复：**
> [如何正确覆盖克隆方法？](https://stackoverflow.com/questions/2326758/how-to-properly-override-clone-method)

谁能给我任何我们可以使用相同的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:53:10.857

可能存在您打算修改对象的情况，并且您不想修改方法调用者的对象。如果您决定需要本地副本，则可以使用 Object 类的 clone() 方法执行操作。

# android - android 中的 JSON 解析错误：解析数据时出错 org.json.JSONException: End of input at character 0 of

> ID：14479019
> 
> 赞同：3
> 
> 时间：2013-01-23T11:49:41.953
> 
> 标签：android, json

我的网址返回

```
 {"success":0,"message":"No books found"} 
```

我必须得到成功的价值！

我试过了

```
 List<NameValuePair> param = new ArrayList<NameValuePair>(); 
      param.add(new BasicNameValuePair("format", "json"));
      JSONObject jsons = jParser.makeHttpRequest(updated_time, "GET",param); 
       try { 
         success = jsons.getString(TAG_SUCCESS); 
         System.err.println("success length is::"+success); 
       } catch (JSONException e2) { 
       e2.printStackTrace(); 
       } 
```

我的解析器是

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

// function get json from url
// by making HTTP POST or GET method
public JSONObject makeHttpRequest(String url, String method,
        List<NameValuePair> params) {

    // Making HTTP request
    try {

        // check for request method
        if(method == "POST"){
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        }else if(method == "GET"){
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient();
            String paramString = URLEncodedUtils.format(params, "utf-8");
            url += "?" + paramString;
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

} 
```

}

我收到错误

```
 Error parsing data org.json.JSONException: End of input at character 0 of 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-03T05:26:38.173

```
public class Servicehandler {

public String servicehandler(String Url) {
    InputStream is = null;
    String result = null;

    try {

        // StringEntity entity1 = new StringEntity(Url, "UTF-8");
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httpget = new HttpPost(Url);
        System.out.println(Url);
        HttpResponse response = httpclient.execute(httpget);

        HttpEntity entity = response.getEntity();

        is = entity.getContent();
        System.out.println(is.toString());

    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection" + e.toString());
    }

    try {

        //Read the response and convert into string

        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);

        StringBuilder sb = new StringBuilder();
        sb.append(reader.readLine() + "\n");

        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
        Log.e("log_tag", result);
    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection" + e.toString());
    }

    return result;

}
public String servicehandler1(String url, JSONObject contactsync) {
    InputStream is = null;
    String result = null;

    try {

        //image upload

        StringEntity entity1 = new StringEntity(contactsync.toString(),
                "UTF-8");
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httpget = new HttpPost(url);
        System.out.println(contactsync);
        httpget.setEntity(entity1);
        httpget.setHeader("Accept", "application/json");
        httpget.setHeader("Content-type", "application/json");
        HttpResponse response = httpclient.execute(httpget);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
        System.out.println(is.toString());

    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection" + e.toString());
    }

    try {
        BufferedReader reader = new BufferedReader(
                new InputStreamReader(is, "iso-8859-1"), 8);

        StringBuilder sb = new StringBuilder();
        sb.append(reader.readLine() + "\n");

        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
        Log.e("log_tag", result);
    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection" + e.toString());
    }
    return result;

}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:37:54.313

尝试将 url 结果放在字符串中，然后试试这个

```
JSONObject jsonresult = new JSONObject(result);
String success = jsonresult.getString("success");
String message = jsonresult.getString("message"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-07T04:54:56.360

试试下面的代码

```
JSONObject j = new JSONObject(result);  
String success_value = j.getString("success");
String message_value = j.getString("message"); 
```

并使用 POST 方法..

# ruby-on-rails - Rails：控制器和操作的 HTML 表

> ID：14479022
> 
> 赞同：0
> 
> 时间：2013-01-23T11:49:45.200
> 
> 标签：ruby-on-rails, routes

有没有办法制作一个包含所有控制器和操作列表的表格，类似于您在 rake 路由中看到的内容？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:00:16.223

已经有一个话题： [如何以编程方式列出 Rails 中的所有控制器](https://stackoverflow.com/questions/1564278/how-to-programmatically-list-all-controllers-in-rails)

**一种方法：**

```
routes= Rails.application.routes.routes.map do |route|
  {alias: route.name, path: route.path.spec.to_s, controller: route.defaults[:controller], action: route.defaults[:action]}
end 
```

# android - Android：使用 Ant 构建文件进行构建

> ID：14479023
> 
> 赞同：1
> 
> 时间：2013-01-23T11:49:45.343
> 
> 标签：android

我有一个脚本可以将 src、res、libs 等（基于设备类型）从 Android 项目文件夹过滤到另一个特定文件夹。例如类型 1 和类型 2 设备在运行脚本后将具有以下结构。

```
Device_Type_1
  \src
  \res
  \libs
  \assets
  \AndroidManifest.xml

Device_Type_2
  \src
  \res
  \libs
  \assets
  \AndroidManifest.xml 
```

我必须编写一个脚本来使用上述文件夹名称进行构建。我尝试了**ant release**命令，但它抛出了 Java 编译错误。

我想知道是否有任何命令/脚本可以将 src、res、lib、资产和清单文件的路径作为参数传递并可以构建项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:57:17.893

不确定我是否理解正确，但这是我用来为平板电脑和手机构建不同 apk 的脚本：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<property file="local.properties" />

<property environment="env" />

<property name="temp.dir" location="bin/temp" />

<property name="resource.absolute.dir" location="${temp.dir}/res" />

<property name="resource.source.dir" location="res" />

<condition property="sdk.dir" value="${env.ANDROID_HOME}">
    <isset property="env.ANDROID_HOME" />
</condition>

<loadproperties srcFile="project.properties" />

<fail message="sdk.dir is missing. Make sure to generate local.properties using &apos;android update project&apos; or to inject it through the ANDROID_HOME environment variable." unless="sdk.dir" />

<import file="${sdk.dir}/tools/ant/build.xml" />

<macrodef name="prepare-temp-dir">
    <attribute name="target" default="phone" />
    <sequential>
        <delete dir="${temp.dir}" />
        <mkdir dir="${temp.dir}" />
        <mkdir dir="${resource.absolute.dir}" />
        <!-- Probably should rewrite this with ant-contrib -->
        <if>
            <condition>
                <and>
                    <equals arg1="@{target}" arg2="phone" />
                </and>
            </condition>
            <then>
                <copy todir="${resource.absolute.dir}">
                    <fileset dir="${resource.source.dir}" casesensitive="no">
                        <exclude name="/*sw600dp*/**" />
                        <exclude name="/*large*/*" />
                        <exclude name="/*xlarge*/*" />
                    </fileset>
                </copy>
            </then>

            <else>
                <if>
                    <condition>
                        <and>
                            <equals arg1="@{target}" arg2="tablet" />
                        </and>
                    </condition>
                    <then>
                        <copy todir="${resource.absolute.dir}">
                            <fileset dir="${resource.source.dir}" casesensitive="no">
                                <exclude name="/*small*/**" />
                                <exclude name="/*normal*/*" />
                            </fileset>
                        </copy>
                    </then>
                </if>
            </else>
        </if>
    </sequential>
</macrodef>

<macrodef name="clean-temp-dir">
    <sequential>
        <delete dir="${temp.dir}" />
    </sequential>
</macrodef>

<target name="release-phone">
    <echo message="Starting build procedure for target 'phone'" />
    <prepare-temp-dir target="phone" />
    <clean-temp-dir />
</target>

<target name="release-tablet">
    <echo message="Starting build procedure for target 'tablet'" />
    <prepare-temp-dir target="tablet" />
    <clean-temp-dir />
</target> 
```

它只是扩展了标准的 android build.xml 并稍微修改了它。构建开始时，我创建一个临时目录并复制目标所需的所有资源，然后从该临时目录构建。

现在它只是分隔可绘制文件夹，但您可以轻松调整它以实现您的目标

# html - html2pdf 是否支持渐变

> ID：14479025
> 
> 赞同：1
> 
> 时间：2013-01-23T11:49:55.713
> 
> 标签：html, css, html2pdf

我有以下 HTML 和 CSS：

```
<div id="previewBox" style="background: #1e5799;
background: -moz-linear-gradient(top,  #1e5799 0%, #7db9e8 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#1e5799), color-stop(100%,#7db9e8));
background: -webkit-linear-gradient(top,  #1e5799 0%,#7db9e8 100%);
background: -o-linear-gradient(top,  #1e5799 0%,#7db9e8 100%);
background: -ms-linear-gradient(top,  #1e5799 0%,#7db9e8 100%);
background: linear-gradient(to bottom,  #1e5799 0%,#7db9e8 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1e5799', endColorstr='#7db9e8',GradientType=0 );
height:800px;border: 1px solid black;">
<font style="font-size:100pt;family:georgia;color:#3333FF">Some blue text here...</font>
</div> 
```

我想使用 html2pdf 将其转换为 PDF，但它似乎不起作用。是否可以使用 html2pdf 转换渐变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:00:34.430

这取决于您如何将其转换为 PDF。如果您使用 PHP，您可以通过 PHP 的 GD 库生成图像并将其设置为 div 的背景。

找到了一个你可以在这里使用的例子[和](http://wfs.myartsonline.com/gradient/?start=1e5799&end=7db9e8)[一个](http://www.hawkee.com/snippet/5022/)活生生的例子

然后将您的 div 的样式属性更改为：

```
 <div id="previewBox" style="background-image: url('path/to/gradiant.php?start=1e5799&end=7db9e8"> 
```

不要忘记在 PHP 中更改生成的背景渐变的宽度和高度。最佳做法是 1 像素的宽度和 div 的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T13:26:45.147

I decided to not use html2pdf, but just use the core tcftp which does support linear gradients.

# java - 使用 Direct Show 和 Java ( JNA/JNI ) 通过 java 预览相机

> ID：14479029
> 
> 赞同：1
> 
> 时间：2013-01-23T11:49:59.393
> 
> 标签：java, c++, camera, java-native-interface, directshow

我需要在 Java 应用程序中显示相机预览。我在本地使用 DirectShow，并使用 JNA 作为 Java 和 C++ 之间的桥梁。我对此有几个问题：-

1）在 DirectShow 中，我可以使用 Sample Grabber 获取原始字节，也可以在窗口或无窗口模式下使用捕获图。如果我想在 Java 小程序中显示预览，哪种方法应该更好。

2）如何将此渲染信息发送到java端？- 我是否需要在 java 端运行一个计时器并始终从本机代码中请求帧？或者 - 我是否应该获取 java 窗口的本机窗口句柄并将其传递给 directShow 以直接在其上绘制？

我对 Java、JNA/JNI 和直接表演很陌生。请让我知道什么是正确的方法以及如何去做？

# .net - 如何在自定义操作中回滚卸载？

> ID：14479035
> 
> 赞同：2
> 
> 时间：2013-01-23T11:50:12.190
> 
> 标签：.net, visual-studio-2010, windows-installer, setup-deployment

我在自定义安装程序类中显示了一个`MessageBox`覆盖`OnBeforeUninstall`。

`Uninstall`我已在 Visual Studio 安装项目的自定义操作编辑器中分配了安装程序类。

现在根据对话结果，我需要回滚卸载吗？

我已阅读[此](https://stackoverflow.com/questions/207823/how-to-forcefully-rollback-a-setup-from-custom-actions)内容，但这些内容特定于 Installshield。我需要在 Visual Studio 安装项目中进行。

我已经尝试过`Process.GetCurrentProcess().Kill()`，但它使安装处于不稳定状态。

我也试过[`this.Rollback()`](http://msdn.microsoft.com/en-us/library/system.configuration.install.installer.rollback.aspx)，但它显示以下错误

> 错误 1001。卸载时发生异常。此异常将被忽略，卸载将继续。但是，卸载完成后应用程序可能不会完全卸载。-> savedState 参数不能为空。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-31T03:35:18.877

如果安装程序项目中的消息框在 [安装](https://msdn.microsoft.com/en-us/library/d9k65z2d(v=vs.100).aspx)覆盖期间显示。那么如果你

```
throw new InstallException(); 
```

将执行回滚覆盖。

{MyInstallerProject} > 右键单击​​ > 添加项目输出 > 从下拉列表中选择项目 > 选择主输出 > 确定。查看 | CustomActions > 右键单击​​安装 > 添加自定义操作 > 双击应用程序文件夹 > 选择“来自 {CustomActionprojectname} 的主要输出（活动）”

重复上述说明中的“回滚”而不是“安装”。

# wpf - 如何在 WPF 窗口中触发 Usercontrol 的 Unload 事件

> ID：14479038
> 
> 赞同：19
> 
> 时间：2013-01-23T11:50:23.183
> 
> 标签：wpf, xaml, events, user-controls, routedevents

我在 WPF 中有一个用户控件：

```
<UserControl x:Class="XLogin.DBLogin"
             x:Name="DBLoginUserFrame"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             Height="263"
             Width="353"
             Loaded="DBLoginUserFrame_Loaded"
             Unloaded="DBLoginUserFrame_Unloaded">
  <Grid>
    <GroupBox Header="Database Connection"
              HorizontalAlignment="Left"
              Height="243"
              Margin="10,10,0,0"
              VerticalAlignment="Top"
              Width="333">
      <Grid>
        <TextBox x:Name="TextUserDB"
                 HorizontalAlignment="Left"
                 Height="20"
                 Margin="101,60,0,0"
                 TextWrapping="Wrap"
                 VerticalAlignment="Top"
                 Width="173" />
        <Label Content="Password:"
               HorizontalAlignment="Left"
               Height="24"
               VerticalAlignment="Top"
               Width="70"
               HorizontalContentAlignment="Right"
               Margin="10,85,0,0" />
        <PasswordBox x:Name="TextPasswordDB"
                     HorizontalAlignment="Left"
                     Height="20"
                     Margin="101,89,0,0"
                     VerticalAlignment="Top"
                     Width="173" />
        <Button x:Name="BtnConnect"
                Content="Connetti"
                Height="29"
                Width="123"
                Margin="101,152,97,24"
                Click="BtnConnect_Click" />
      </Grid>
    </GroupBox>

  </Grid>
</UserControl> 
```

当我卸载此控件时，WPF 会引发事件**DBLoginUserFrame_Unloaded**来保存我的设置并完成工作。

我在 WPF 中有加载此用户控件的 MainWindow，但是当窗口关闭时，我的用户控件 UNLOAD 不会触发：

```
<Window x:Class="XLogin.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525"
    xmlns:local="clr-namespace:XLogin" Unloaded="Window_Unloaded_1">
<Grid>
    <local:DBLogin/>
</Grid></Window> 
```

**如何将 UserControl Unload 事件添加到 MainWindow 事件处理程序？**

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-23T12:50:41.210

从[文档](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.unloaded.aspx)中：

“请注意，在应用程序开始关闭后不会引发 Unloaded 事件。当 ShutdownMode 属性定义的条件发生时，会发生应用程序关闭。如果将清理代码放置在 Unloaded 事件的处理程序中，例如 Window 或 UserControl ，它可能不会按预期调用。”

如果关闭窗口会触发应用程序的关闭，这可能是原因。在这种情况下，即使是 Window 的 Unload 事件也可能不会被调用，所以我认为最好依赖[Window.Closing](http://msdn.microsoft.com/en-us/library/system.windows.window.closing.aspx)事件。

处理 UserControl 在卸载时执行的任务的一种方法是公开控件的卸载处理程序方法（“DBLoginUserFrame_Unloaded”），在 MainWindow 中命名您的 UserControl 实例并从 Window.Closing 事件中调用它。

```
public MainWindow()
{
    // Add this
    this.Closing += MainWindow_Closing;
}

void MainWindow_Closing(object sender, System.ComponentModel.CancelEventArgs e)
{
    this.MyUserControl.MethodToBeCalledWhenUnloaded().
} 
```

另一种选择是保持您的实现到目前为止，但也在您的 UserControl 中添加 Dispatcher.ShutdownStarted 事件的处理程序，如此处[所述](http://geekswithblogs.net/cskardon/archive/2008/06/23/dispose-of-a-wpf-usercontrol-ish.aspx)。

```
public MyUserControl()
{
    this.Dispatcher.ShutdownStarted += Dispatcher_ShutdownStarted;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-05-11T11:16:44.133

您还可以将逻辑放入用户控件本身，以使其更加独立。

```
public UserControl1()
{
  InitializeComponent();
  this.Loaded += UserControl1_Loaded;
}

void UserControl1_Loaded(object sender, RoutedEventArgs e)
{
  Window window = Window.GetWindow(this);
  window.Closing += window_Closing;
}

void window_Closing(object sender, global::System.ComponentModel.CancelEventArgs e)
{
 //Save your settings here
} 
```

在这里看到这个： [https ://social.msdn.microsoft.com/Forums/vstudio/en-US/477e7e74-ccbf-4498-8ab9-ca2f3b836597/how-to-know-when-a-wpf-usercontrol-is-关闭？论坛=wpf](https://social.msdn.microsoft.com/Forums/vstudio/en-US/477e7e74-ccbf-4498-8ab9-ca2f3b836597/how-to-know-when-a-wpf-usercontrol-is-closing?forum=wpf)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-07-19T23:37:36.573

看看这个[解决方法](https://stackoverflow.com/a/57120568/6010880)。

> ```
> public partial class Window1 : Window
> {
>     public Window1()
>     {
>         InitializeComponent();
> 
>         new Window(); //<-- this will make Unloaded Event to trigger in WPF
>     }
> } 
> ```

# javascript - KendoUI 图表不接受 JSON 数据的键中的数字

> ID：14479041
> 
> 赞同：2
> 
> 时间：2013-01-23T11:50:30.817
> 
> 标签：javascript, json, kendo-ui

如果我将这个简单的数据提供给 KendoUI 图表，图表数据就会正确显示。

```
var data = [
                {"state":"NY","abc":12312},
                {"state":"AZ","abc":12312},
                {"state":"CA","abc":12312},
                {"state":"VT","abc":12312}
            ]; 
```

请注意，上面的 JSON 有字符串作为键。

但是，如果我提供一个数字作为键，我会在 kendo.all.js 中收到“第 2156 行的意外数字”错误。

```
var data = [
                {"state":"NY","1":12312},
                {"state":"AZ","1":12312},
                {"state":"CA","1":12312},
                {"state":"VT","1":12312}
            ]; 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:40:21.220

这是 Kendo 的 DataViz 图表中的一个已知问题/设计：[http ://www.kendoui.c​​om/forums/ui/general-discussions/kendo-datasource-field-name.aspx](http://www.kendoui.com/forums/ui/general-discussions/kendo-datasource-field-name.aspx)

它的要点是 JSON 文档中的键被用作图表代码中的变量名，这意味着键必须是有效的 JavaScript 变量名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-16T09:25:23.147

这个问题有解决办法，但不是真正的解决方案。您可以做的是，如果您按数组制作图表数据。例如在我的情况下：

```
var arrData = new Array();
for (i = 0; i < data.d.length - 1; i++) {
    var tnt = new customData();
    tnt.displayField = data.d[i + 1][1].descriptionField.trim();

    for (var j = 1; j < data.d[0].length; j++) {
        var prop = 'a' +j.toString()
        var value = '';
        switch (displayName) {
            case 'DI_RESP':
                value = parseInt(data.d[i + 1][j].sampleField);
                tnt[prop] = value
                break;
            default:
                value = data.d[i + 1][j].sampleField;
                tnt[prop] = value;
                break;
        }
    }
    arrData.push(tnt);
} 
```

如您所见，customData 模型包含两个属性 descriptionField 和 sampleField。descriptionField 是类别名称 sampleField 是一个浮点值。我附加了一个字母“a”只是为了使它成为一个字符串。错误会消失。

# java - DefaultEntityManager 不允许我拥有 ColumnFamily

> ID：14479050
> 
> 赞同：2
> 
> 时间：2013-01-23T11:51:00.897
> 
> 标签：java, cassandra, astyanax

我们已经开始使用 Cassandra 和 Astyanax 作为我们的持久层并且已经成功了。

DefaultEntityManager 不允许我拥有 ColumnFamily

Astyanax 抛出的错误消息：“ *DefaultEntityManager.Builder 类型中的方法 withColumnFamily(ColumnFamily) 不适用于参数 (ColumnFamily* ”

我们希望使用 TimeUUIDTypes 作为键，以便它们是唯一的并按时间排序。

我还能如何使用 UUID 作为密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:11:42.687

我终于明白为什么 Astyanax 不允许我使用 ColumnFamily 了。我的错误是我使用参数 (Object, String) 而不是 (Object, UUID) 定义 EntityManager

```
ColumnFamily<UUID, String> columnFamily = new ColumnFamily< UUID, String>(
    "Merchant",  // Column Family Name    
    StringSerializer.get(), //  Key Serializer
    StringSerializer.get());    //  Column Serializer

EntityManager<Merchant, UUID > entityPersister = new DefaultEntityManager.Builder<Merchant, UUID >()
    .withEntityType(Merchant.class)
    .withKeyspace(keyspace)
    .withColumnFamily(columnFamily)
    .build(); 
```

# javascript - PhoneGap 应用程序中的 Facebook 集成

> ID：14479051
> 
> 赞同：3
> 
> 时间：2013-01-23T11:51:04.150
> 
> 标签：javascript, html, facebook, cordova

我正在我的 phonegap/cordova 应用程序中进行 facebook 集成。我正在关注链接

```
https://github.com/davejohnson/phonegap-plugin-facebook-connect/ 
```

我正在执行与文章中提到的相同的步骤，但是当我构建解决方案时它给出了错误..

```
 Could not parse contents of /Users/Burhan/Desktop/facebookExample/facebookExample/facebookExample-Info.plist‌​': 
 The data couldn’t be read because it has been corrupted. 

  <key>FacebookAppID</key>
  <string>[**APP_ID**]</string>
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleURLSchemes</key>
        <string>com.facebook.phonegap.myscheme</string>
        <array>
            <string>fb362599863837976</string>
        </array>
    </dict>
</array> 
```

我被卡住了。请帮助我。提前致谢。布尔汉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-02T21:02:18.687

对于将来与 cordova/phonegap 的 facebook 集成，请参阅[官方 Facebook 插件](https://github.com/Wizcorp/phonegap-facebook-plugin)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:07:52.090

[这](http://oodlestechnologies.com/blogs/Facebook-plugin-integration-for-PhoneGap-2.1-for-iOS-and-Android)是可能对您有帮助的博客文章，这是一个更简单解释的将 facebook 插件集成到 phonegap 应用程序的分步过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-06T05:48:53.473

函数 register_log_FB() { openFB.init({ appId : '888864354512771' });

```
if (app_userid == 'undefined' || app_userid == null || app_userid == "") {
    console.log("No user_id so facebook login");
    app_userid = "";
    FBlogin();
} else {
    console.log("user exit");
    console.log("app_userid>>>>>>>" + app_userid);

    first_nameFB = "";
    last_nameFB = "";
    social_idFB = "";
    console.log(" >>>>>>>data>>>>lat " + rest_lat + " lng >>" + rest_lng
            + ">>fn " + first_nameFB + ">>ln " + restaurant_id + ">>rid "
            + last_nameFB + ">>tele " + telephone + ">>sid " + social_idFB
            + " >>img" + saveImg + ">>uid " + app_userid + ">>name "
            + re_name);

}

function FBlogin() {
    openFB.login(function(response) {
        if (response.status === 'connected') {
            getInfo();
        } else {
            console.log('Facebook login failed: ' + response.error);
        }
    }, {
        scope : 'email,read_stream'
    });
}

function getInfo() {
    openFB.api({
        path : '/me',
        success : function(data) {
            first_nameFB = data.first_name;
            last_nameFB = data.last_name;
            social_idFB = data.id;

            loadingMaybeSaved();
        },
        error : errorHandler
    });
}

function errorHandler(error) {
    console.log("Server error");
} 
```

}

# c# - 异步 TCPClient C# 消息不发送？

> ID：14479052
> 
> 赞同：0
> 
> 时间：2013-01-23T11:51:04.513
> 
> 标签：c#, networking, asynchronous, tcp, tcpclient

基本上我需要的是一个 p2p 连接，现在我有一个异步服务器和客户端，它们通过`TcpClient`s 相互通信。问题是服务器很少检测到传入的消息，通常只收到第一条消息。我的服务器代码在这里：

```
 public void RecieveAsync()
    {

        if (netStream == null) netStream = Server.GetStream();

        netStream.BeginRead(ReadBuffer, 0, ReadBuffer.Length, recieveCallBack, netStream);
    }

    public void recieveCallBack(IAsyncResult ar)
    {
        //try
        //{
        int rec = netStream.EndRead(ar);
        if (rec == 0)
        {
            if (Disconnected != null)
            {
                Disconnected(this);
                return;
            }
        }
        else
        {
            if (DataRecieved != null)
            {
                string RecievedData = Encoding.ASCII.GetString(ReadBuffer, 0, rec);
                DataRecieved(RecievedData);
            }

            ReadBuffer = new byte[1024];

        }

    } 
```

并且发送数据的客户端代码在这里（它被包裹在一个while循环中，一遍又一遍地发送数据`Thread.Sleep(1)`，以更新玩家位置）

```
 public void Send(byte[] data, int index, int length)
    {
        //add data as state

        //socket.NoDelay = true;

        Buffer.BlockCopy(data, 0, writeBuffer, index, length);

        if (netStream == null) netStream = TcpClient.GetStream();

        netStream.BeginWrite(writeBuffer, 0, writeBuffer.Length, sendCallback, netStream);

    }

    private void sendCallback(IAsyncResult ar)
    {
        //try
        //{
           netStream.EndWrite(ar);

            //if (ar.AsyncState != null)
            //{
            //    byte[] buffer = (byte[])ar.AsyncState;
            //    socket.BeginSend(buffer, 0, buffer.Length, SocketFlags.None, sendCallback, null);
            //    return;
            //}

            if (OnSend != null)
            {
                OnSend(this);
            }

        //catch (Exception ex)
        //{
        //    System.Windows.Forms.MessageBox.Show(ex.ToString());
        //    return;
        //}
    } 
```

默认缓冲区大小为 1024，`RecieveAsync`仅在`netStream.DataAvailible`为 true 时调用，在服务器循环中不断检查。

编辑 ：：

这是调用服务器的代码

```
 while (true)
            {

                byte[] playerData = NormalText(PreparePlayerData());

                server.Send(playerData, 0, playerData.Length);

                if (server.Server.Connected)
                {

                    server.netStream = server.Server.GetStream();

                    while (server.netStream.DataAvailable)
                    {
                        server.RecieveAsync();
                        server.netStream = server.Server.GetStream();
                    }

                }

                Thread.Sleep(1);

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:35:25.653

当涉及到网络编程时，了解各种方法背后发生了什么是有帮助的。对于您的接收方法，您使用正确配置回调

```
netStream.BeginRead(ReadBuffer, 0, ReadBuffer.Length, recieveCallBack, netStream); 
```

这将在接收到数据时触发recieveCallBack()，但下一行是它开始变得有趣的地方。还值得注意的是，对 netStream.BeginRead 的一次调用只会触发一次回调。如果您想继续侦听数据，您需要再次调用 netStream.BeginRead。

```
string RecievedData = Encoding.ASCII.GetString(ReadBuffer, 0, rec); 
```

该框架不保证您将收到您在发送中写入的所有数据。收到一些数据后，您需要在尝试将其转换回字符串之前确定它拥有一切。如果您没有收到所有需要的信息，请再次致电

```
netStream.BeginRead(ReadBuffer, 0, ReadBuffer.Length, recieveCallBack, netStream); 
```

然后等待更多。

这是编程的一个棘手方面，但你显然已经在路上了。如果它有助于从工作示例中向后工作，请查看来自开源网络库 networkcomms.net 的方法 IncomingTCPPacketHandler() （相当于您的[recieveCallBack](https://bitbucket.org/MarcF/networkcomms.net/src/6dcc1e933bec837e6817f5117880065a973a3a84/NetworkCommsDotNet/Connection/TCP/TCPConnectionInstance.cs?at=2.0#cl-37)方法[）](http://www.networkcomms.net)。

# notifications - 如何使用 PHP 从 Facebook 批量请求中获取请求 ID

> ID：14479057
> 
> 赞同：0
> 
> 时间：2013-01-23T11:51:18.180
> 
> 标签：notifications, facebook-php-sdk, facebook-app-requests, facebook-batch-request

为避免 API 请求过载，我使用 Facebook Batch API 发送应用到用户的请求：

```
$access_token = MYAPPSACCESSTOKEN;

foreach($myusers as $user) {
    $body = array(
        'access_token' => $access_token,
        'template' => 'THIS IS MY TEMPLATE',
        'href' => '?time=' . date('d-m-Y'),
        'ref' => 'MY_REF'
    );
}

$results = $facebook->api('/?batch=' . \urlencode(\json_encode($fBqueries)), 'POST', array(
    'access_token' => $facebook->getAccessToken()
)); 
```

所以这按预期工作，但我还需要记录每个应用程序到用户请求的 RequestID。$results 正在返回每个请求的标头数据，但是有什么方法可以让我也获得 Facebook 请求 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:44:05.960

刚刚意识到我一直在使用新的*通知 API*，而不是确实返回请求 ID的*apprequests端点（因为它是一个**请求对象*）。

我想目前通知 API 没有返回任何通知/请求 ID，这对我们的应用程序非常有帮助，但没关系。

# c# - 实体框架未正确打开证书

> ID：14479068
> 
> 赞同：0
> 
> 时间：2013-01-23T11:51:45.667
> 
> 标签：c#, sql-server, entity-framework, aes

我有一个打开证书的程序，基本上：

```
CREATE PROCEDURE [dbo].[SP_OPENCCKEY] WITH EXECUTE AS OWNER AS  
   OPEN SYMMETRIC KEY CCKEY
        DECRYPTION BY CERTIFICATE CERTCC; 
```

不，我不想让我的用户直接打开它。

所以，我试图返回一个视图，它使用该证书来解密一些信用卡数据，我只是这样做：

```
public List<VW_CREDITCARDS> ListCreditCardByPersonID(int PersonId)
        {
            EntityMgr ent = new EntityMgr ();
            ent.ExecuteFunction("SP_OPENCCKEY");
            return ent.VW_CREDITCARDS.Where(p => p.PES_IDPERSON== PersonId).ToList();
        } 
```

由于某种原因，结果返回 NULL（可能是因为 EF 尚未打开密钥）。

一些提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-19T23:23:31.050

要在查询敏感数据之前解密，您需要做的就是在 EF ObjectContext 连接中使用 DbTransaction。

IE

1.  连接.打开（）；
2.  连接.BeginTransaction();
3.  使用 ExecuteStoreCommand 执行您的“OPEN SYMMETRIC KEY...”命令或存储过程
4.  执行您的敏感数据查询、存储过程等。
5.  如果需要，提交或回滚您的事务

这会强制 EF 保持相同的数据库连接，因为您已经启动了一个数据库事务，这很有意义，因为您可能会执行一大堆 SP 作为同一个数据库事务的一部分。

试试看。这个对我有用。

蒂亚戈

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T09:51:27.480

似乎 EF 不能那样工作。需要在一个命令上返回带有打开证书的结果。

# java - org.xml.sax.SAXParseException：带有 jaxbUnmarshaller 的文件过早结束

> ID：14479072
> 
> 赞同：0
> 
> 时间：2013-01-23T11:52:02.840
> 
> 标签：java, xml, web-services, soap, xsd

这是一个解组 xml 文件的 java 方法。

我寻找了这个错误的几个问题，但我找不到答案。

```
 @WebMethod(operationName = "List_Flights")
    public List<FlightAvailableOffers> List_Flights() {//ArrayList<String[]>

       FlightAvailableOffers flighte = new FlightAvailableOffers();
        Flights flight = new Flights();
        List<FlightAvailableOffers> bookingAvailFlights = flight.getOffersBooking();
        try {

        File file = new File("Flight_Bookings.xml");

        JAXBContext jaxbContext = JAXBContext.newInstance(FlightAvailableOffers.class);
        Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
        flight = (Flights)jaxbUnmarshaller.unmarshal(file);
                //List<FlightAvailableOffers> bookingAvailFlights = flight.getOffersBooking();

            FlightAvailableOffers booking = new FlightAvailableOffers();

            Iterator itr = bookingAvailFlights.iterator();    
            while (itr.hasNext()) {
                booking = (FlightAvailableOffers) itr.next();
                bookingAvailFlights.add(booking);
            }

      } catch (JAXBException e) {
              System.out.println(e.getCause());
      }

        return bookingAvailFlights;

    }   
} 
```

但是当我运行它时，它会显示此消息

> “org.xml.sax.SAXParseException：带有 jaxbUnmarshaller 的文件过早结束”

谁能帮我摆脱这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:43:03.233

flightinfo.xsd 中有错误。**tns:**命名空间在文档中声明..

**记录的原因：UndeclaredPrefix：无法将“tns:FlightAvailableOffers”解析为 QName：未声明前缀“tns”**

暗示：

您可以通过在线工具针对 xsd 验证您的 xml。

我会推荐以下一个..[针对 XML Schema 文档的 XML 验证](http://www.xmlvalidation.com/)

# c# - C# 反射 - 加载程序集并调用方法（如果存在）

> ID：14479074
> 
> 赞同：32
> 
> 时间：2013-01-23T11:52:05.740
> 
> 标签：c#, reflection, invokemember

我想加载一个程序集（它的名称存储在一个字符串中），使用反射检查它是否有一个名为“CustomType MyMethod(byte[] a, int b)”的方法并调用它或抛出异常。我想我应该做这样的事情，但如果有人能就如何最好地做到这一点提供相同的建议，我将不胜感激：

```
Assembly asm = Assembly.Load("myAssembly"); /* 1\. does it matter if write myAssembly or myAssembly.dll? */

Type t = asm.GetType("myAssembly.ClassName");

// specify parameters
byte[] a = GetParamA();
int b = GetParamB();

object[] params = new object[2];
params[0] = a;
params[1] = b;

/* 2\. invoke method MyMethod() which returns object "CustomType" - how do I check if it exists? */
/* 3\. what's the meaning of 4th parameter (t in this case); MSDN says this is "the Object on which to invoke the specified member", but isn't this already accounted for by using t.InvokeMember()? */
CustomType result = t.InvokeMember("MyMethod", BindingFlags.InvokeMethod, null, t, params); 
```

这足够好，还是有更好/更快/更短的方法？那么构造函数呢，考虑到这些方法不是静态的——它们可以被简单地忽略吗？

调用 void Methods() 时，可以只写 t.InvokeMember(...) 还是应该始终使用 Object obj = t.InvokeMember(...)？

提前致谢。

* * *

**编辑** 我在下面提供了一个工作示例作为单独的答案。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-07-03T08:28:20.047

由于这似乎是一个流行的问题，这里有完整的源代码示例说明如何做到这一点。

假设我们有一个带有*MyClass类的示例程序集**MyAssembly.dll*。我们希望动态加载它并调用它的方法。*MyAssembly*代码：

 **```
namespace MyAssembly
{
    public class MyClass
    {
        public int X { get; set; }
        public int Y { get; set; }

        public MyClass(int initialX, int initialY)
        {
            X = initialX;
            Y = initialY;
        }

        public int MyMethod(int count, string text)
        {
            Console.WriteLine("This is a normal method.");
            Console.WriteLine("Count: {0}", count);
            Console.WriteLine("Text: {0}", text);

            return this.X + this.Y;
        }

        public static void StaticMethod(int count, float radius)
        {
            Console.WriteLine("This is a static method call.");
            Console.WriteLine("Count: {0}", count);
            Console.WriteLine("Radius: {0}", radius);
        }
    }
} 
```

首先，我们想使用构造函数创建类的实例`MyClass(int initialX, int initialY)`，然后调用方法`public int MyMethod(int count, string text)`。以下是您从另一个项目（例如控制台应用程序）执行此操作的方法：

```
static void Main(string[] args)
{
    //
    // 1\. Load assembly "MyAssembly.dll" from file path. Specify that we will be using class MyAssembly.MyClass
    //
    Assembly asm = Assembly.LoadFrom(@"C:\Path\MyAssembly.dll");
    Type t = asm.GetType("MyAssembly.MyClass");

    //
    // 2\. We will be invoking a method: 'public int MyMethod(int count, string text)'
    //
    var methodInfo = t.GetMethod("MyMethod", new Type[] { typeof(int), typeof(string) });
    if (methodInfo == null)
    {
        // never throw generic Exception - replace this with some other exception type
        throw new Exception("No such method exists.");
    }

    //
    // 3\. Define parameters for class constructor 'MyClass(int initialX, int initialY)'
    //
    object[] constructorParameters = new object[2];
    constructorParameters[0] = 999; // First parameter.
    constructorParameters[1] = 2;   // Second parameter.

    //
    // 4\. Create instance of MyClass.
    //
    var o = Activator.CreateInstance(t, constructorParameters);

    //
    // 5\. Specify parameters for the method we will be invoking: 'int MyMethod(int count, string text)'
    //
    object[] parameters = new object[2];
    parameters[0] = 124;            // 'count' parameter
    parameters[1] = "Some text.";   // 'text' parameter

    //
    // 6\. Invoke method 'int MyMethod(int count, string text)'
    //
    var r = methodInfo.Invoke(o, parameters);
    Console.WriteLine(r);
} 
```

调用静态方法`public static void StaticMethod(int count, float radius)`如下所示：

```
var methodInfoStatic = t.GetMethod("StaticMethod");
if (methodInfoStatic == null)
{
    // never throw generic Exception - replace this with some other exception type
    throw new Exception("No such static method exists.");
}

// Specify parameters for static method: 'public static void MyMethod(int count, float radius)'
object[] staticParameters = new object[2];
staticParameters[0] = 10;
staticParameters[1] = 3.14159f;

// Invoke static method
methodInfoStatic.Invoke(o, staticParameters); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-23T11:57:23.093

> 使用反射检查它是否有一个名为“CustomType MyMethod(byte[] a, int b)”的方法并调用它或抛出异常

您当前的代码不满足该要求。但是你可以很容易地用这样的东西：

```
var methodInfo = t.GetMethod("MyMethod", new Type[] { typeof(byte[]), typeof(int) });
if (methodInfo == null) // the method doesn't exist
{
    // throw some exception
}

var o = Activator.CreateInstance(t);

var result = methodInfo.Invoke(o, params); 
```

> 这足够好，还是有更好/更快/更短的方法？

就我而言，这是最好的方法，而且没有什么比说更快的了。

> 那么构造函数呢，考虑到这些方法不是静态的——它们可以被简单地忽略吗？

您仍然需要创建一个实例，`t`如我的示例所示。这将使用不带参数的默认构造函数。如果您需要传递参数，只需查看[MSDN 文档](http://msdn.microsoft.com/en-us/library/wcxyzt4d.aspx)并对其进行修改即可。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-23T12:01:55.770

```
Assembly assembly = Assembly.LoadFile("myAssembly");
        Type type = assembly.GetType("myAssembly.ClassName");
        if (type != null)
        {
            MethodInfo methodInfo = type.GetMethod("MyMethod");
            if (methodInfo != null)
            {
                object result = null;
                ParameterInfo[] parameters = methodInfo.GetParameters();
                object classInstance = Activator.CreateInstance(type, null);
                if (parameters.Length == 0)
                {
                    //This works fine
                    result = methodInfo.Invoke(classInstance, null);
                }
                else
                {
                    object[] parametersArray = new object[] { "Hello" };

                    //The invoke does NOT work it throws "Object does not match target type"             
                    result = methodInfo.Invoke(classInstance, parametersArray);
                }
            }
        } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-09T22:04:52.753

您可以使用将在运行时解析的动态类型。

```
Type type = Type.GetType(className, true);
dynamic instance = Activator.CreateInstance(type);
var response = instance.YourMethod(); 
```**

# .net - 是否可以限制 Visual Studio 中程序集之间的依赖关系？

> ID：14479075
> 
> 赞同：2
> 
> 时间：2013-01-23T11:52:09.613
> 
> 标签：.net, visual-studio

是否可以对 Visual Studio 中项目之间允许的依赖项设置自动强制限制？

例如，假设我有三个简单的层；UI、业务和数据。如果发生这种情况，我是否可以强制 UI 永远不应持有对 Data 的引用并停止构建解决方案？

我希望持久的开发人员能够解决这个问题，但可以看到它在指导开发人员和及早发现错误方面的好处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:06:02.343

您不能直接或强制阻止引用，但您可以自己设置引用，这将有助于您的方案，因为人们将无法添加回引用（硬循环引用）。这并不能阻止使用 MEF 或 Unity 等库的人以非常松散的解耦方式四处跳动——他们完全有可能解析或加载您不期望的程序集并调用它们（我称之为*逻辑循环依赖*）。防止这种情况的唯一方法是通过代码审查保持警惕。

一旦您正确设置了引用，您就可以监控对项目文件的更改，以判断何时添加了其他硬引用。任何源代码控制系统都可以让版本比较变得非常容易，有些（即 TFS）甚至允许您在特定文件更改时收到通知（例如项目文件更改时）。

再一次，您拥有的最可靠的选择是代码审查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-17T15:52:16.107

我刚刚通过 Nuget 下载了 Visual Studio**的 Ref-Restrict**。目前看来还可以。

> 它检查每个项目的引用，根据一组自定义规则（限制）检查它们。构建解决方案或项目时，如果有任何违规行为，构建将停止。确切的问题将在 Visual Studio 中报告为构建错误。

配置如下所示：

```
<rrconfig>
  <!-- The core library should have no local dependencies -->
  <!-- Data access libraries should not be included as data access should be in the data library -->
  <rules project="RR.Core">
    <nolocalrefs/>
    <exclude>EntityFramework</exclude>
    <exclude>EntityFramework.SqlServer</exclude>
  </rules>

  <!-- The data library should only have access to the core library and no other local libs. -->
  <!-- Data access libraries should definitely be included -->
  <rules project="RR.Data">
    <onlylocalrefs>
      <project>RR.Core</project>
    </onlylocalrefs>
    <include>EntityFramework</include>
    <include>EntityFramework.SqlServer</include>
  </rules>
</rrconfig> 
```

Blog: [http://www.benibinson.com/blog/2014/8/31/restrict-project-references-with-ref-restrict](http://www.benibinson.com/blog/2014/8/31/restrict-project-references-with-ref-restrict)

Source and install instructions: [https://github.com/CodeHex/Ref-Restrict](https://github.com/CodeHex/Ref-Restrict)

# html - XML/XSD ID/IDREF 类型的典型值的最大长度是多少？

> ID：14479076
> 
> 赞同：3
> 
> 时间：2013-01-23T11:52:12.813
> 
> 标签：html, xml, xsd, xsd-1.0, idref

[W3C XSD 1.0 第 2 部分：数据类型](http://www.w3.org/TR/xmlschema-2/)规范参考了用于定义 ID 和 IDREF 类型的[W3C XML 1.0](http://www.w3.org/TR/xml/)规范，但是这些文档都没有定义对这些类型的值长度的任何约束。

但是，似乎某些 XML 编辑器对这些类型实施了长度限制。

此外，一些 Web 浏览器似乎实现了长度限制，例如 HTML Hx 元素的“id”属性（在 HTML 4 和 XHTML 1.1 中定义为 XML ID 类型）。

1.  W3C 规范或其他规范定义的 ID/IDREF 类型的长度是否有任何限制？

2.  XML 编辑器实现的典型长度限制是什么？

3.  Web 浏览器（用于 HTML）实现的典型长度限制是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:28:47.690

实际上，很明显，现在存在的每个 XML 解析器对类型 ID 和 IDREF 的值都有长度限制，因为现在存在的每个 XML 解析器都运行在具有有限存储量的机器上（通常解析器的存储容量要小得多）限制它准备用于解析文档的存储量）。

我知道的唯一模式（基于我有限的经验）是，有效限制不是由预定义的数量而是由运行时关键时刻可用的内存量给出的，这并不罕见。

我相信有些用户只是下令他们不会使用超过 32 个字符的标识符；我怀疑大多数 XML 编辑器会接受长度比它大一到两个数量级的标识符。

并回答您的第一个问题：我知道的任何 W3C 规范中定义的 ID/IDREF（或 XML 规范中的任何其他内容）的长度都没有限制。所有实现都必然有限制，但据我所知，没有任何规范为这些限制设定最低水平，我怀疑任何为这些限制定义设定水平的尝试都会立即遭到一连串的蔑视。（XSD 1.1 确实为某些无限数据类型的支持设置了最小限制，但对 ID 和 IDREF 的最小长度限制只字未提；严格来说，这些类型的值和词法空间总是有限的，因此第 5.4 节的重点可能是无限数据类型使它们看起来超出了范围。）

# android - smoothScrollToPositionFromTop() 并不总是像它应该的那样工作

> ID：14479078
> 
> 赞同：24
> 
> 时间：2013-01-23T11:52:13.593
> 
> 标签：android

我一直在尝试让 smoothScrollToPositionFromTop() 工作，但它并不总是滚动到正确的位置。

我的布局中有一个 ListView（有 10 个项目），侧面有 10 个按钮，所以我可以滚动到列表中的每个项目。通常当我向后或向前滚动一个位置时它工作正常，但通常当我尝试向后或向前滚动超过 3 个位置时，ListView 不会完全在所选位置结束。当它失败时，它通常会关闭 0,5 到 1,5 个项目，并且当滚动失败时它是不可预测的。

[在 notifyDataSetChanged not working in android 之后](https://stackoverflow.com/questions/6942582/smoothscrolltoposition-after-notifydatasetchanged-not-working-in-android)，我还检查了smoothScrollToPosition ，但是这个修复对我不起作用，我没有更改任何数据。

我真的很想自动滚动到选定的列表项，但不是我不知道怎么做。以前有没有人遇到过这个问题并且知道如何解决它？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2014-01-08T14:02:18.817

这是一个已知的错误。请参阅[https://code.google.com/p/android/issues/detail?id=36062](https://code.google.com/p/android/issues/detail?id=36062)

但是，我实现了这个解决方法来处理可能发生的所有边缘情况：

首先调用`smothScrollToPositionFromTop(position)`，然后在滚动完成后调用`setSelection(position)`. 后一个调用通过直接跳转到所需位置来纠正不完整的滚动。这样做，用户仍然会觉得它正在被动画滚动到这个位置。

我在两个辅助方法中实现了这个解决方法：

**smoothScrollToPositionFromTop()**

```
public static void smoothScrollToPositionFromTop(final AbsListView view, final int position) {
    View child = getChildAtPosition(view, position);
    // There's no need to scroll if child is already at top or view is already scrolled to its end
    if ((child != null) && ((child.getTop() == 0) || ((child.getTop() > 0) && !view.canScrollVertically(1)))) {
        return;
    }

    view.setOnScrollListener(new AbsListView.OnScrollListener() {
        @Override
        public void onScrollStateChanged(final AbsListView view, final int scrollState) {
            if (scrollState == SCROLL_STATE_IDLE) {
                view.setOnScrollListener(null);

                // Fix for scrolling bug
                new Handler().post(new Runnable() {
                    @Override
                    public void run() {
                        view.setSelection(position);
                    }
                });
            }
        }

        @Override
        public void onScroll(final AbsListView view, final int firstVisibleItem, final int visibleItemCount,
                                 final int totalItemCount) { }
    });

    // Perform scrolling to position
    new Handler().post(new Runnable() {
        @Override
        public void run() {
            view.smoothScrollToPositionFromTop(position, 0);
        }
    });
} 
```

**getChildAtPosition()**

```
public static View getChildAtPosition(final AdapterView view, final int position) {
    final int index = position - view.getFirstVisiblePosition();
    if ((index >= 0) && (index < view.getChildCount())) {
        return view.getChildAt(index);
    } else {
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T08:14:49.733

这是解决方案的实现。

```
 void smoothScrollToPositionFromTopWithBugWorkAround(final AbsListView listView,
                                                    final int position,
                                                    final int offset, 
                                                    final int duration){

    //the bug workaround involves listening to when it has finished scrolling, and then 
    //firing a new scroll to the same position.

    //the bug is the case that sometimes smooth Scroll To Position sort of misses its intended position. 
    //more info here : https://code.google.com/p/android/issues/detail?id=36062
    listView.smoothScrollToPositionFromTop(position, offset, duration);
    listView.setOnScrollListener(new OnScrollListener() {

        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {
            if(scrollState==OnScrollListener.SCROLL_STATE_IDLE){
                listView.setOnScrollListener(null);
                listView.smoothScrollToPositionFromTop(position, offset, duration);
            }

        }

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-27T15:16:05.643

如四楼google issuetracker页面中提到的：<a href="https://issuetracker.google.com/issues/36952786" rel="nofollow noreferrer">https://issuetracker.google.com/issues /36952786

> 前面给出的解决方法，“现在的解决方法是在开始滚动时侦听 SCROLL_STATE_IDLE，并再次将 smoothScrollToPositionFromTop 到相同的位置。” 也不总是有效。

实际上，使用 SCROLL_STATE_IDLE 调用 onScrollStateChanged 并不一定意味着滚动已经完成。结果，它仍然不能保证 Listview 每次都滚动到正确的位置，尤其是当列表项视图不是都在同一高度时。

经过研究，我发现了另一种完全正确且合理的方法。众所周知，Listview 提供了一个方法 scrollListBy(int y)，它使我们能够立即将 Listview 向上滚动 y 个像素。然后，在计时器的帮助下，我们可以自己流畅、正确地滚动列表。

我们需要做的第一件事是计算每个列表项视图的高度，包括屏幕外的视图。由于之前已经知道列表数据和子视图的类型，因此计算每个列表项视图的高度是可行的。因此，给定一个平滑滚动到的目标位置，我们可以计算它在 y 方向上的滚动距离。另外，计算应该在ListView初始化完成后进行。

第二件事是将计时器和 scrollListBy(int) 方法结合起来。其实我们可以使用android.os.Handler的sendEmptyMessageDelayed()方法。因此，解决方案可以是：

```
/**
 * Created by CaiHaozhong on 2017/9/29.
 */
public class ListViewSmoothScroller {

    private final static int MSG_ACTION_SCROLL = 1;

    private final static int MSG_ACTION_ADJUST = 2;

    private ListView mListView = null;

    /* The accumulated height of each list item view */
    protected int[] mItemAccumulateHeight = null;

    protected int mTimeStep = 20;

    protected int mHeaderViewHeight;

    private int mPos;

    private Method mTrackMotionScrollMethod = null;

    protected int mScrollUnit = 0;

    protected int mTotalMove = 0;

    protected int mTargetScrollDis = 0;

    private Handler mMainHandler = new Handler(Looper.getMainLooper()){

        public void handleMessage(Message msg) {
            int what = msg.what;
            switch (what){
                case MSG_ACTION_SCROLL: {
                    int scrollDis = mScrollUnit;
                    if(mTotalMove + mScrollUnit > mTargetScrollDis){
                        scrollDis = mTargetScrollDis - mTotalMove;
                    }
                    if(Build.VERSION.SDK_INT >= 19) {
                        mListView.scrollListBy(scrollDis);
                    }
                    else{
                        if(mTrackMotionScrollMethod != null){
                            try {
                                mTrackMotionScrollMethod.invoke(mListView, -scrollDis, -scrollDis);
                            }catch(Exception ex){
                                ex.printStackTrace();
                            }
                        }
                    }
                    mTotalMove += scrollDis;
                    if(mTotalMove < mTargetScrollDis){
                        mMainHandler.sendEmptyMessageDelayed(MSG_ACTION_SCROLL, mTimeStep);
                    }else {
                        mMainHandler.sendEmptyMessageDelayed(MSG_ACTION_ADJUST, mTimeStep);
                    }
                    break;
                }
                case MSG_ACTION_ADJUST: {
                    mListView.setSelection(mPos);                     
                    break;
                }
            }
        }
    };

    public ListViewSmoothScroller(Context context, ListView listView){
        mListView = listView;
        mScrollUnit = Tools.dip2px(context, 60);
        mPos = -1;
        try {
            mTrackMotionScrollMethod = AbsListView.class.getDeclaredMethod("trackMotionScroll", int.class, int.class);
        }catch (NoSuchMethodException ex){
            ex.printStackTrace();
            mTrackMotionScrollMethod = null;
        }
        if(mTrackMotionScrollMethod != null){
            mTrackMotionScrollMethod.setAccessible(true);
        }
    }

    /* scroll to a target position smoothly */
    public void smoothScrollToPosition(int pos){
        if(mListView == null)
            return;
        if(mItemAccumulateHeight == null || pos >= mItemAccumulateHeight.length){
            return ;
        }
        mPos = pos;
        mTargetScrollDis = mItemAccumulateHeight[pos];
        mMainHandler.sendEmptyMessage(MSG_ACTION_SCROLL);
    }

    /* call after initializing ListView */
    public void doMeasureOnLayoutChange(){
        if(mListView == null){
            return;
        }
        int headerCount = mListView.getHeaderViewsCount();
        /* if no list item */
        if(mListView.getChildCount() < headerCount + 1){
            return ;
        }
        mHeaderViewHeight = 0;
        for(int i = 0; i < headerCount; i++){
            mHeaderViewHeight += mListView.getChildAt(i).getHeight();
        }
        View firstListItemView = mListView.getChildAt(headerCount);
        computeAccumulateHeight(firstListItemView);
    }

    /* calculate the accumulated height of each list item */
    protected void computeAccumulateHeight(View firstListItemView){
        int len = listdata.size();// count of list item
        mItemAccumulateHeight = new int[len + 2];
        mItemAccumulateHeight[0] = 0;
        mItemAccumulateHeight[1] = mHeaderViewHeight;
        int currentHeight = mHeaderViewHeight;
        for(int i = 2; i < len + 2; i++){
            currentHeight += getItemHeight(firstListItemView);
            mItemAccumulateHeight[i] = currentHeight;
        }
    }

    /* get height of a list item. You may need to pass the listdata of the list item as parameter*/
    protected int getItemHeight(View firstListItemView){
        // Considering the structure of listitem View and the list data in order to calculate the height.
    }

} 
```

完成初始化 ListView 后，我们调用 doMeasureOnLayoutChange() 方法。之后，我们可以通过smoothScrollToPosition(int pos)方法滚动ListView。我们可以像这样调用 doMeasureOnLayoutChange() 方法：

```
mListAdapter.notifyDataSetChanged();
mListView.post(new Runnable() {
    @Override
    public void run() {
        mListViewSmoothScroller.doMeasureOnLayoutChange();
    }
}); 
```

最后，我们的 ListView 可以平滑地滚动到目标位置，更重要的是，正确地滚动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-06T12:20:15.417

尝试将高度从“wrap_content”更改为“match_parent”

```
<RecyclerView   
android: layout_height="match_parent" 
... >

smothScrollToPosition(0)     // works ok 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-12T09:08:05.350

这是 Kotlin 中的 Lars Blumberg 回答，包括 dira 的评论，它对我有用。

```
private fun smoothScrollToPositionFromTop(listView: AbsListView, position: Int, offset: Int) {

    listView.setOnScrollListener(object : AbsListView.OnScrollListener {

        override fun onScroll(
            view: AbsListView?,
            firstVisibleItem: Int,
            visibleItemCount: Int,
            totalItemCount: Int
        ) { }

        override fun onScrollStateChanged(view: AbsListView?, scrollState: Int) {
            view?.setOnScrollListener(null)

            // Fix for scrolling bug.
            if (scrollState == SCROLL_STATE_IDLE) {
                Handler(Looper.getMainLooper()).post {
                    listView.setSelectionFromTop(position, offset)
                }
            }
        }
    })

    // Perform scrolling to position
    Handler(Looper.getMainLooper()).post {
        listView.smoothScrollToPositionFromTop(position, offset)
    }
} 
```

# serialization - 用 ANT 插入 serialVersionUID

> ID：14479083
> 
> 赞同：0
> 
> 时间：2013-01-23T11:52:33.950
> 
> 标签：serialization, ant, build, suid

是否可以使用 ANT 任务将 serialVersionUID 属性插入到所有实现 Serializable 的类中？

我希望能够保留类与 SUID 的列表并使用它来插入值。

目前源代码没有设置 serialVersionUID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:44:12.060

[Apache Ant 外部工具和任务](http://ant.apache.org/external.html)站点列出了一个[SerialVer 任务](http://serialver.sourceforge.net/)。

# ldap - 关于 Liferay & Ldap 的一些问题

> ID：14479085
> 
> 赞同：0
> 
> 时间：2013-01-23T11:52:37.163
> 
> 标签：ldap, liferay

我将openldap集成到liferay中。

然后Liferay从openldap导入用户。（成功了，部分数据导入到了db中）

但是当我登录liferay时。

发生了一些异常。

例外信息：

```
Caused by: com.liferay.portal.kernel.workflow.WorkflowException: No workflow handler found for com.liferay.portlet.messageboards.model.MBDiscussion
    at com.liferay.portal.kernel.workflow.WorkflowHandlerRegistryUtil.startWorkflowInstance(WorkflowHandlerRegistryUtil.java:100)
    at com.liferay.portal.kernel.workflow.WorkflowHandlerRegistryUtil.startWorkflowInstance(WorkflowHandlerRegistryUtil.java:80)
    at com.liferay.portlet.messageboards.service.impl.MBMessageLocalServiceImpl.addMessage(MBMessageLocalServiceImpl.java:393)
    at com.liferay.portlet.messageboards.service.impl.MBMessageLocalServiceImpl.addDiscussionMessage(MBMessageLocalServiceImpl.java:173)
    at com.liferay.portlet.messageboards.service.impl.MBMessageLocalServiceImpl.addDiscussionMessage(MBMessageLocalServiceImpl.java:132) 
```

而且我无法进入索引页。

表明：

```
an-unexpected-system-error-occurred 
com.liferay.portal.kernel.workflow.WorkflowException: No workflow handler found for com.liferay.portlet.messageboards.model.MBDiscussion 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-12T07:24:53.357

我刚才遇到了同样的问题，我*没有*使用 LDAP 来验证用户，所以我想我会分享我的发现。我所做的是尝试通过停用我们不需要的 portlet 来简化 Liferay。我添加了

```
<include>false</include> 
```

到`liferay-portlet.xml`. 我发现以`message-boards`这种方式删除 portlet 会破坏 Liferay 中的很多东西。我冒昧地猜测一下，Liferay 的核心中有一些（未记录的）交叉依赖关系到这个消息板 portlet 或其他一些 portlet。

由于我再次重新激活了 portlet，一切正常。

# mysql - MySQL彩票搜索

> ID：14479086
> 
> 赞同：2
> 
> 时间：2013-01-23T11:52:40.127
> 
> 标签：mysql, search

我正在寻找一个 MySQL 唯一的解决方案来搜索彩票列表与绘制的数字。

我有一排票，每列都有四个数字：ball1、ball2、ball3、ball4。这些不一定按数字升序排列。

查询应该只返回行以进行进一步的 PHP 处理。

我可以通过 PHP 中的所有结果，但我正在寻找更有效的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:54:26.300

考虑这个例子。

假设我们要匹配所有具有这四个球中至少三个的任意组合的结果 (2,4,5,10)

我们可以这样做...

```
SELECT * FROM lottery;
+----+-------+-------+-------+-------+
| id | ball1 | ball2 | ball3 | ball4 |
+----+-------+-------+-------+-------+
|  1 |     2 |     5 |    10 |     4 |
|  2 |     5 |     9 |     4 |     1 |
|  3 |     3 |     6 |     4 |     9 |
|  4 |     4 |     8 |     2 |     3 |
|  5 |     8 |     9 |     4 |    10 |
|  6 |     9 |     2 |     1 |     3 |
|  7 |     2 |     3 |     7 |     8 |
|  8 |     3 |     8 |     2 |     6 |
|  9 |     2 |     5 |     1 |    10 |
| 10 |     3 |     2 |     9 |     5 |
+----+-------+-------+-------+-------+

SELECT id
     , GROUP_CONCAT(ball ORDER BY ball) balls
  FROM 
     ( SELECT id,ball1 ball FROM lottery
       UNION
       SELECT id,ball2 ball FROM lottery
       UNION
       SELECT id,ball3 ball FROM lottery
       UNION
       SELECT id,ball4 ball FROM lottery
     ) x
 WHERE ball IN (2,5,10,4)
 GROUP 
    BY id 
HAVING COUNT(*) >= 3;

+----+----------+
| id | balls    |
+----+----------+
|  1 | 2,4,5,10 |
|  9 | 2,5,10   |
+----+----------+ 
```

# sql - 使用出生日期的 SQL 查询

> ID：14479087
> 
> 赞同：0
> 
> 时间：2013-01-23T11:52:42.123
> 
> 标签：sql, database, oracle

我需要找出目前有多少 25-29 岁的学生因超过 25 岁而被排除在注册系统之外。

表格是：`STUDENT`&`STUDENT_STATUS_HISTORY`

`Student`包含`PERSON_ID`&`BIRTH_DATE`在其他领域。
`Student_Status_History`包含`REASON_CODE`（不包括 4 个）

我的问题是关于加入表格的语法以及如何使用出生日期正确计算所需的年龄范围。

有人可以请教吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:55:20.047

加入 PERSON_ID 上的表。

要获取出生日期，请使用日期差异之类的函数：

```
select  trunc((months_between(sysdate, dob))/12) age 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:59:40.267

试试这个查询：

```
select count(*) from student s join student_status_history ssh 
on 
   s.id=ssh.student_id
where 
  ss.reason_code=4 
and 
  DATEDIFF(year,s.birthdate,sysdate)>=25 and DATEDIFF(year,s.birthdate,sysdate)<=29 
```

请参阅[DateDIFF](http://msdn.microsoft.com/en-us/library/ms189794.aspx)。

**编辑**如果您的数据库不支持 DATEDIFF ，请尝试以下操作：

```
select count(*) 
from 
  student s 
join 
  student_status_history ssh 
on 
   s.id=ssh.student_id
where 
  ss.reason_code=4 
and 
  floor(months_between(s.birthdate, sysdate) /12)>=25 and
  floor(months_between(s.birthdate, sysdate) /12)<=29 
```

# php - 连续分号；不返回语法错误？

> ID：14479089
> 
> 赞同：5
> 
> 时间：2013-01-23T11:53:07.460
> 
> 标签：php

```
$name = 'John Doe';;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
$age = 16;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
$address = 'Planet Earth';;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; 
```

这应该被认为是一个错误吗？PHP 根本不返回任何语法错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T11:53:49.210

这不是错误。这只是一个没有任何内容的声明。完全有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T11:54:24.703

这是有效的 - 它只是一个空语句

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T11:55:10.780

分号只是用来终止一行。所以它将一切都视为代码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-23T11:55:55.293

这就像在允许 // 时询问**///****是否**是错误一样。这些是您拥有的空白陈述**`;;;;;;;;;;;;;;;;;;;;;;;;`**

 *** * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-23T12:01:33.790

这是完全有效的，不仅在 PHP 上，而且在 C# 上。这只是一句空话。**

# javascript - 无法使用 jquery parseXML 附加 XML 节点，但可以附加字体

> ID：14479093
> 
> 赞同：1
> 
> 时间：2013-01-23T11:53:24.663
> 
> 标签：javascript, jquery, xml, xmlnode

**查询：**

```
 $.get("config.xml",function(xml){
        $(xml).find("config").find("images").append("<image><url>../demo/Headline/2012/12/20/0/0/A/Content/8/Web201212_P8_medium.jpg</url><name></name><redirect>none</redirect></image>");

    alert ($(xml).find("config").find("images").text());
    }); 
```

**XML:**

```
<config>
    <images>
        <central>1</central>
        <random>false</random>
        <width>199</width>
        <height>237</height>
        <image>
            <url>../demo/Headline/2012/12/20/0/0/A/Content/1/Web201212_P1_medium.jpg</url>
            <name></name>
            <redirect>none</redirect>
        </image>
        <image>
            <url>../demo/Headline/2012/12/20/0/0/A/Content/2/Web201212_P2_medium.jpg</url>
            <name></name>
            <redirect>none</redirect>
        </image>
        <image>
            <url>../demo/Headline/2012/12/20/0/0/A/Content/3/Web201212_P3_medium.jpg</url>
            <name></name>
            <redirect>none</redirect>
        </image>
        <image>
            <url>../demo/Headline/2012/12/20/0/0/A/Content/4/Web201212_P4_medium.jpg</url>
            <name></name>
            <redirect>none</redirect>
        </image>
        <image>
            <url>../demo/Headline/2012/12/20/0/0/A/Content/5/Web201212_P5_medium.jpg</url>
            <name></name>
            <redirect>none</redirect>
        </image>
        <image>
            <url>../demo/Headline/2012/12/20/0/0/A/Content/6/Web201212_P6_medium.jpg</url>
            <name></name>
            <redirect>none</redirect>
        </image>
        <image>
            <url>../demo/Headline/2012/12/20/0/0/A/Content/7/Web201212_P7_medium.jpg</url>
            <name></name>
            <redirect>none</redirect>
        </image>
    </images> 
```

在上面的示例中，我可以附加一个字符串，例如。'abcdefg' 到 xml 节点。但是，当我使用 html 标签时，例如。就像示例一一样，我不能附加任何东西？如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:55:49.013

尝试使用[$.parseXML](http://api.jquery.com/jQuery.parseXML/)解析 xml，然后应用选择器并附加。

```
$.parseXML(xml).find("config").find("images").append("<image><url>../demo/Headline/2012/12/20/0/0/A/Content/8/Web201212_P8_medium.jpg</url><name></name><redirect>none</redirect></image>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:55:58.597

尝试先在您的 html中替换`<`by`&lt;`和`>`by`&gt;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:09:00.717

```
 $.get("config.xml",function(xml){
    $(xml).find("images").append("<image<url>../demo/Headline/2012/12/20/0/0/A/Content/8/Web201212_P8_medium.jpg</url><name></name><redirect>none</redirect></image>");

    alert ($(xml).find("images").text());
    }); 
```

试试这个

# linux - 在家用 PC 上工作，但在不同的服务器上进行 Web 开发

> ID：14479101
> 
> 赞同：0
> 
> 时间：2013-01-23T11:53:52.140
> 
> 标签：linux, windows, project, development-environment

我总是在安装了 WAMP 的本地 PC 上进行 Web 开发。

现在我想在专用服务器上进行 Web 开发 (PHP)。但是，我将在我的电脑上工作。我不想继续通过 FTP 更新/上传文件或使用支持 FTP 保存的文本编辑器。

我想要一些感觉像是在本地主机上工作的东西，但是文件存储在专用服务器上。所以我可以浏览文件，查看缩略图，从任何文本编辑器编辑 php 文件，就像在 Windows 资源管理器中所做的一样。

有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:20:37.640

WinSCP 是您的最佳选择。您可以使用资源管理器[视图](https://winscp.net/eng/docs/ui_explorer)来模拟 Windows 资源管理器样式界面并使用您选择的编辑器编辑文件（请参阅首选项）。

查看缩略图是开发人员关注的一项功能，但目前还不可能。这是[错误跟踪器链接](https://winscp.net/tracker/912)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:56:26.010

[您可以使用sshfs](http://fuse.sourceforge.net/sshfs.html)或[samba](http://www.debian-administration.org/articles/165)简单地挂载远程文件系统。

# java - 没有链接的类图

> ID：14479105
> 
> 赞同：2
> 
> 时间：2013-01-23T11:54:03.260
> 
> 标签：java, class, class-diagram

在下载了一个 Java 软件的存储库（[http://sourceforge.net/projects/gcs-java/](http://sourceforge.net/projects/gcs-java/)）后，我使用 Enterprise Architect 为我创建了一些类图，例如：

![在此处输入图像描述](../Images/68875edd1e4a4381a45c1ac05f2d6f69.png)

从我发布的另一个问题来看，我的理解是每个箭头都显示了一个“有”关系，它基本上显示了对象如何保存其他对象的实例。但是，这些与其他对象没有链接的对象呢？类图中的所有这些对象都是同一个类的一部分，那么没有链接的事实是否仅仅意味着它们处理的方法是孤立的并且不会影响任何其他对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:39:52.937

箭头代表*关联*。要实现*有*关系（聚合），您在所有者方面使用钻石。该独立类没有行，因为您没有与它们关联的其他类。例如：`ScrollToSelection`类使用`Outline`类，但您的图表中没有`Outline`类。

# java - 在 jTable 中填充结果时出现 ArrayOutOfBoundException

> ID：14479106
> 
> 赞同：-1
> 
> 时间：2013-01-23T11:54:08.553
> 
> 标签：java, sql, swing, jtable, defaulttablemodel

我尝试使用 java swing 做一个搜索系统：

```
 public void search(ActionEvent e){
    String textEntered=getJTextField_searchField().getText();
    if(textEntered.equals("")){
        JOptionPane.showMessageDialog(null,"Please enter a word");
    }
    else{
        kioskViewevents viewEvents=new kioskViewevents(textEntered);
        if(viewEvents.searchContent() == true){
            getJScrollPane().setVisible(false);
            getJScrollPane_search();
        }
        else{
            JOptionPane.showMessageDialog(null,"No result found");
        }

    }
} 
```

此方法将在单击搜索按钮后执行。它将隐藏前一个表，然后替换为另一个表。然后我在表格中填充搜索结果。

```
 public void SetUpJTable_search(){
    DefaultTableModel tableModel = (DefaultTableModel) jTableSearch.getModel();

    String[] data = new String[5];
    db.setUp("IT Innovation Project");
    String sql = "Select event_ID,event_Price,event_Title,event_Time,event_Date FROM crossEvent WHERE event_Title='"+ textEntered +"'";

    ResultSet resultSet = null;
    resultSet = db.readRequest(sql);
    try {
        while (resultSet.next()) {
            data[0] = resultSet.getString("event_ID");
            data[1] = resultSet.getString("event_Price");
            data[2] = resultSet.getString("event_Title");
            data[3] = resultSet.getString("event_Time");
            data[4] = resultSet.getString("event_Date");
            tableModel.addRow(data);
        }
        resultSet.close();
    } catch (Exception e) {
        System.out.println(e);
    }

} 
```

我设置了我的搜索表：

```
 private JTable getJTable_search() {
    String header[] = { "Event ID", "Price", "Title","Time","Date"};
    DefaultTableModel tableModel = (DefaultTableModel) jTable.getModel();
    tableModel.setColumnIdentifiers(header);
    jTableSearch.setAutoCreateColumnsFromModel(false);
    jTableSearch.getColumnModel().getColumn(0).setMinWidth(100);
    jTableSearch.getColumnModel().getColumn(0).setMaxWidth(100);

    jTableSearch.getColumnModel().getColumn(1).setMinWidth(200);
    jTableSearch.getColumnModel().getColumn(1).setMaxWidth(300);

    jTableSearch.getColumnModel().getColumn(2).setMinWidth(300);
    jTableSearch.getColumnModel().getColumn(2).setMaxWidth(400);

    jTableSearch.getColumnModel().getColumn(3).setMinWidth(100);
    jTableSearch.getColumnModel().getColumn(3).setMaxWidth(100);

    jTableSearch.getColumnModel().getColumn(4).setMinWidth(100);
    jTableSearch.getColumnModel().getColumn(4).setMaxWidth(100);

    jTableSearch.getTableHeader().setFont(new Font("Dialog", Font.PLAIN, 20));
    jTableSearch.getTableHeader().setForeground(Color.white);
    jTableSearch.getTableHeader().setBackground(new Color(102, 102, 102));
    jTableSearch.setRowHeight(50);
    jTableSearch.setBounds(new Rectangle(97, 157, 800, 450));
    jTableSearch.setFont(new Font("Dialog", Font.PLAIN, 18));

    return jTableSearch;
} 
```

我的搜索表滚动窗格：

```
 private JScrollPane getJScrollPane_search(){
    if (jScrollPane_search == null) {
        jScrollPane_search = new JScrollPane();
        jScrollPane_search.setBounds(new Rectangle(75, 180, 800, 450));
        jScrollPane_search.setViewportView(getJTable_search());
    }
    SetUpJTable_search();
    return jScrollPane_search;
} 
```

这整个垃圾代码是在执行搜索之前用数据库中存在的数据填充表：

```
 private JTable getJTable() {
    String header[] = { "Event ID", "Price", "Title","Time","Date"};
    DefaultTableModel tableModel = (DefaultTableModel) jTable.getModel();
    tableModel.setColumnIdentifiers(header);
    // Hide Topic ID
    jTable.setAutoCreateColumnsFromModel(false);
    jTable.getColumnModel().getColumn(0).setMinWidth(100);
    jTable.getColumnModel().getColumn(0).setMaxWidth(100);

    jTable.getColumnModel().getColumn(1).setMinWidth(200);
    jTable.getColumnModel().getColumn(1).setMaxWidth(300);

    jTable.getColumnModel().getColumn(2).setMinWidth(300);
    jTable.getColumnModel().getColumn(2).setMaxWidth(400);

    jTable.getColumnModel().getColumn(3).setMinWidth(100);
    jTable.getColumnModel().getColumn(3).setMaxWidth(100);

    jTable.getColumnModel().getColumn(4).setMinWidth(100);
    jTable.getColumnModel().getColumn(4).setMaxWidth(100);

    jTable.getTableHeader().setFont(new Font("Dialog", Font.PLAIN, 20));
    jTable.getTableHeader().setForeground(Color.white);
    jTable.getTableHeader().setBackground(new Color(102, 102, 102));
    jTable.setRowHeight(50);
    jTable.setBounds(new Rectangle(97, 157, 800, 450));
    jTable.setFont(new Font("Dialog", Font.PLAIN, 18));

    return jTable;
}

    public void SetUpJTable() {
    DefaultTableModel tableModel = (DefaultTableModel) jTable.getModel();

    String[] data = new String[5];
    db.setUp("IT Innovation Project");
    String sql = "Select event_ID,event_Price,event_Title,event_Time,event_Date FROM crossEvent";

    ResultSet resultSet = null;

    resultSet = db.readRequest(sql);
    tableModel.getDataVector().removeAllElements();
    tableModel.fireTableDataChanged();
    try {
        while (resultSet.next()) {
            data[0] = resultSet.getString("event_ID");
            data[1] = resultSet.getString("event_Price");
            data[2] = resultSet.getString("event_Title");
            data[3] = resultSet.getString("event_Time");
            data[4] = resultSet.getString("event_Date");

            tableModel.addRow(data);
        }
        resultSet.close();
    } catch (Exception e) {
        System.out.println(e);
    }
} 
```

但是，我收到一条错误消息：

```
 Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 0 >= 0
at java.util.Vector.elementAt(Unknown Source)
at javax.swing.table.DefaultTableColumnModel.getColumn(Unknown Source)
at kioskViewevents.ui.ViewEventsUI.getJTable_search(ViewEventsUI.java:158)
at kioskViewevents.ui.ViewEventsUI.getJScrollPane_search(ViewEventsUI.java:201)
at kioskViewevents.ui.ViewEventsUI.search(ViewEventsUI.java:330)
at kioskViewevents.ui.ViewEventsUI$4.actionPerformed(ViewEventsUI.java:315)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$400(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

任何指南？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:19:03.787

不确定哪一个是第 158 行`ViewEvents.java`（因为你没有提到它），但堆栈跟踪和剩余代码告诉我，`ArrayIndexOutOfBounds`异常是因为你试图访问如下所示的列：

```
 jTable.getColumnModel().getColumn(4).setMaxWidth(100);  // Not sure which column is the issue 
```

`vector`而且您在ie中没有那么多列`jTable.getColumnModel()`。您正在尝试访问超出向量大小的元素。

关于此问题发生的原因/位置的确切问题可能会有所不同，但这是您应该开始研究的地方。

# android - 如果重新创建应用程序，如何始终从根 Activity 开始？

> ID：14479110
> 
> 赞同：0
> 
> 时间：2013-01-23T11:54:14.307
> 
> 标签：android, android-activity

我的应用程序中有三个活动，分别是 A、B 和 C，其中 A 是登录活动，登录后启动 B，然后 B 启动活动 C。现在，如果我在 B 或 C 上，应用程序进入后台，稍后 Android 会决定杀死我的应用程序（出于什么原因）。我想总是从 A 开始。但是，如果应用程序没有被杀死，我想从我离开的 Activity（B 或 C）开始。如何做到这一点？

我已经尝试按照很多答案的建议使用 clearTaskOnLaunch ，但要么不符合我的要求，要么我没有正确使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:00:21.433

这就是我过去总是从第一个活动开始的

将此代码放入您的 B 或 C

```
Intent i=new Intent(getApplicationContext(),A.class);//this will close all activities except A
            i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            i.putExtra("exit", true);
            startActivity(i); 
```

并在 A 的 OnCreate

```
if(getIntent().getBooleanExtra("exit", false))
     finish(); //This will finish your main activity 
```

# jquery - Jquery Div滚动条上升以显示项目和窗口滚动条保持不变（无移动）

> ID：14479114
> 
> 赞同：0
> 
> 时间：2013-01-23T11:54:24.250
> 
> 标签：jquery, css

`DIV`我有一个 jquery，可以通过循环选择每个图像。它就像一个旋转木马或滑块。有`div`10 张图像，并且`div`设置为`overflow: auto;`

当我到达第 6 个图像时，下一个图像 image(7) 被选中但未显示（我的意思是滚动条没有上升）。如何设置`Div`滚动条上升并且`window`滚动条保持不变（不移动）。

我检查了网络，这是我得到的最接近的答案，但它在 IE 中不起作用，[jQuery focus without scroll](https://stackoverflow.com/questions/4898203/jquery-focus-without-scroll)。

有人可以帮助我或给我一个想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T03:14:54.457

谢谢普拉文

我为此使用 Jquery。基本上代码的流程是我有一个右图和左图（右图滑动并在左边显示图像）。代码没问题，但是当我使用 IE 测试它时，问题就出现了。窗口滚动也在移动，我只想在 div 上滚动。它在 chrome 和 firefox 中运行良好

下面是我的代码。

```
enter code here

$(document).ready(function () {
       //To store timeout id
   var timeoutId,indx;
   var slideImage = function (step) {

       //Clear timeout if any
       clearTimeout(timeoutId);

           if (step == undefined) step = 1;

           //Get current image's index
           var indx = $('.item:visible').index('.item');

           //If step == 0, we don't need to do any fadein our fadeout
           if (step != 0) {
               //Fadeout this item //:eq() selector selects an element with a specific index number
               $('.item:visible').stop(true, true).fadeOut("slow");
               $('.imageloop:eq(' + indx + ')').stop(true, true).css("background-color", "white");
           }

           //Increment for next item
           indx = indx + step;

           //Check bounds for next item
           if (indx >= $('.item').length) {
               indx = 0;
           } else if (indx < 0) {
               // use for previous button
               indx = $('.item').length - 1;
           }

           //If step == 0, we don't need to do any fadein our fadeout
           if (step != 0) {

               //Fadein next item
               $('.item:eq(' + indx + ')').stop(true, true).fadeIn("slow");

               //focus on the image
               $('.imageloop:eq(' + indx + ')').stop(true, true).css("background-color", "#6BB9E7");
               $('.imageloop:eq(' + indx + ')').stop(true, true).attr("tabindex", indx).focusWithoutScrolling();

               prevIndex = indx;
           }

}

  $.fn.focusWithoutScrolling = function () {
       var x = window.scrollX, y = window.scrollY;
       this.focus();
       window.scrollTo(x, y);

       };

   };

 <div id='left_img'  >
   <div class='item'><img src="1.jpg" /></div>
   <div class='item'><img src="2.jpg" /></div>
   <div class='item'><img src="3.jpg" /></div>
   <div class='item'><img src="4.jpg" /></div>
   <div class='item'><img src="5.jpg" /></div>
   <div class='item'><img src="6.jpg" /></div>
   <div class='item'><img src="7.jpg" /></div>
   <div class='item'><img src="8.jpg" /></div>
   <div class='item'><img src="9.jpg" /></div>
   <div class='item'><img src="10.jpg" /></div>                        
 </div>

<div id = 'right_img'> 
   <div class='imageloop'tabindex='0'><img src="1.jpg" /></div>
   <div class='imageloop'tabindex='1'><img src="2.jpg" /></div>
   <div class='imageloop'tabindex='2'><img src="3.jpg" /></div>
   <div class='imageloop'tabindex='3'><img src="4.jpg" /></div>
   <div class='imageloop'tabindex='4'><img src="5.jpg" /></div>
   <div class='imageloop'tabindex='5'><img src="6.jpg" /></div>
   <div class='imageloop'tabindex='6'><img src="7.jpg" /></div>
   <div class='imageloop'tabindex='7'><img src="8.jpg" /></div>
   <div class='imageloop'tabindex='8'><img src="9.jpg" /></div>
   <div class='imageloop'tabindex='9'><img src="10.jpg" /></div>                       

</div> 
```

# objective-c - Cocoa 空循环失败

> ID：14479117
> 
> 赞同：0
> 
> 时间：2013-01-23T11:54:33.607
> 
> 标签：objective-c, xcode, cocoa

还是个可可菜鸟，

我在我的应用程序的后台线程中执行了这个循环：

```
while (preProcessed == FALSE){} 
```

这会在主线程任务完成时占用线程一两秒钟（涉及 webview - 因此需要主线程）。

它运行良好，应用程序已提交给 Apple，一切都很好。

现在，突然 - 它停止工作了。循环要么永远不会退出，要么永远不会启动，基本上应用程序此时只是默默地挂起。

即使我添加任意动作，例如

```
int idle_hands_etc = 0;
while (preProcessed == FALSE){ ++idle_hands_etc;} 
```

什么都没发生..

但是，如果我将某些内容打印到输出控制台：

```
while (preProcessed == FALSE){ printf(".");} 
```

它完美地工作。

我的问题是，到底发生了什么！其次，是什么改变了它的行为方式，因为它肯定不是我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:01:22.430

这些陈述：

```
int idle_hands_etc = 0;
while (preProcessed == FALSE){ ++idle_hands_etc;} 
```

实际上不要做任何事情，因为没有读取任何内容`idle_hands_etc`，因此编译器已对其进行了优化。这将在您的应用程序的*发布*构建期间发生，而不是在*调试*构建期间，当优化被关闭时。

另一种可能性是`preProcessed`没有用`volatile`限定符声明，编译器可能需要它来认为它是可变的。

这种类型的等待循环无论如何都是低效的，您需要研究多线程同步机制，该机制允许线程在它不工作时*休眠*，并允许它在它等待的任务完成时被唤醒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:06:53.763

```
I have this loop executing in the background thread of my application:

while (preProcessed == FALSE){}
This hogs the thread for a second or two while a main-thread task completes (involving a webview - hence main thread required). 
```

无需使用虚拟循环吃几秒钟，您可以指示控件等待，直到当前任务未处理。您可以选择以下方法，其中 YES 为 waitUntilDone

```
performSelector:onThread:withObject:waitUntilDone: 
```

# wordpress - 非 wordpress 网站上的 wordpress tinymce

> ID：14479120
> 
> 赞同：0
> 
> 时间：2013-01-23T11:54:46.740
> 
> 标签：wordpress, tinymce

我需要使用非 wordpress 网站上的一些插件来模拟 wordpress tinymce。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-03T16:24:02.373

当然。tinymce 编辑器在这里：[https](https://www.tinymce.com/) : //www.tinymce.com/ tinymce 插件在这里：[https ://www.tinymce.com/docs/plugins/](https://www.tinymce.com/docs/plugins/)

# java - 在java中使用attributesn解析xml

> ID：14479125
> 
> 赞同：0
> 
> 时间：2013-01-23T11:55:08.813
> 
> 标签：java, android

下面是我的 xml 代码，我需要在其中显示每个节点的属性，即名称和类型。

xml：

```
<node label="Tree Data">
<node name="View" type="Page">
<node name="Organisational Structure" type="Page"/>
<node name="Experience" type="Page"/>
<node name="Expertise" type="Language">
<node name="Flex" type="Language"/>
<node name="Android" type="Language"/>
<node name="Java" type="Language"/>
</node>
<node name="Project" type="Project">
<node name="Sabre" type="Project"/>
<node name="Android Project" type="Project"/>
<node name="Media Framework" type="Project"/>
<node name="CCD" type="Project"/>
<node name="Redbus" type="Project"/>
<node name="India Today" type="Project"/>
<node name="Money Control" type="Project"/>
</node>
</node>
<node name="Reorganize" type="Action"/>
<node name="Add New Employee" type="Action">
<node name="Dir" type="Page"/>
<node name="P.M" type="Page"/>
<node name="S.E" type="Page"/>
<node name="JUN" type="Page"/>
<node name="EMP" type="Page"/>
</node>
<node name="Add Project Members" type="Action"/>
</node> 
```

我得到以下输出：

输出：

```
01-23 17:13:26.047: I/System.out(3846): name : 
01-23 17:13:26.057: I/System.out(3846): type : 
01-23 17:13:26.057: I/System.out(3846): name : View
01-23 17:13:26.077: I/System.out(3846): type : Page
01-23 17:13:26.077: I/System.out(3846): name : Organisational Structure
01-23 17:13:26.077: I/System.out(3846): type : Page
01-23 17:13:26.097: I/System.out(3846): name : Experience
01-23 17:13:26.097: I/System.out(3846): type : Page
01-23 17:13:26.097: I/System.out(3846): name : Expertise
01-23 17:13:26.097: I/System.out(3846): type : Language
01-23 17:13:26.097: I/System.out(3846): name : Flex
01-23 17:13:26.097: I/System.out(3846): type : Language
01-23 17:13:26.117: I/System.out(3846): name : Android
01-23 17:13:26.117: I/System.out(3846): type : Language
01-23 17:13:26.117: I/System.out(3846): name : Java
01-23 17:13:26.128: I/System.out(3846): type : Language
01-23 17:13:26.128: I/System.out(3846): name : Project
01-23 17:13:26.139: I/System.out(3846): type : Project
01-23 17:13:26.139: I/System.out(3846): name : Sabre
01-23 17:13:26.139: I/System.out(3846): type : Project
01-23 17:13:26.147: I/System.out(3846): name : Android Project
01-23 17:13:26.147: I/System.out(3846): type : Project
01-23 17:13:26.167: I/System.out(3846): name : Media Framework
01-23 17:13:26.167: I/System.out(3846): type : Project
01-23 17:13:26.167: I/System.out(3846): name : CCD
01-23 17:13:26.167: I/System.out(3846): type : Project
01-23 17:13:26.167: I/System.out(3846): name : Redbus
01-23 17:13:26.167: I/System.out(3846): type : Project
01-23 17:13:26.167: I/System.out(3846): name : India Today
01-23 17:13:26.177: I/System.out(3846): type : Project
01-23 17:13:26.187: I/System.out(3846): name : Money Control
01-23 17:13:26.187: I/System.out(3846): type : Project
01-23 17:13:26.187: I/System.out(3846): name : Reorganize
01-23 17:13:26.187: I/System.out(3846): type : Action
01-23 17:13:26.187: I/System.out(3846): name : Add New Employee
01-23 17:13:26.187: I/System.out(3846): type : Action
01-23 17:13:26.197: I/System.out(3846): name : Dir
01-23 17:13:26.197: I/System.out(3846): type : Page
01-23 17:13:26.217: I/System.out(3846): name : P.M
01-23 17:13:26.217: I/System.out(3846): type : Page
01-23 17:13:26.217: I/System.out(3846): name : S.E
01-23 17:13:26.217: I/System.out(3846): type : Page
01-23 17:13:26.217: I/System.out(3846): name : JUN
01-23 17:13:26.217: I/System.out(3846): type : Page
01-23 17:13:26.228: I/System.out(3846): name : EMP
01-23 17:13:26.228: I/System.out(3846): type : Page
01-23 17:13:26.237: I/System.out(3846): name : Add Project Members
01-23 17:13:26.237: I/System.out(3846): type : Action 
```

但我实际上需要以下输出：

所需的输出：

```
01-23 17:13:26.057: I/System.out(3846): name : View
01-23 17:13:26.077: I/System.out(3846): type : Page
01-23 17:13:26.077: I/System.out(3846): name : Organisational Structure
01-23 17:13:26.077: I/System.out(3846): type : Page
01-23 17:13:26.097: I/System.out(3846): name : Experience
01-23 17:13:26.097: I/System.out(3846): type : Page
01-23 17:13:26.097: I/System.out(3846): name : Expertise
01-23 17:13:26.097: I/System.out(3846): type : Language
01-23 17:13:26.097: I/System.out(3846): name : Flex
01-23 17:13:26.097: I/System.out(3846): type : Language
01-23 17:13:26.117: I/System.out(3846): name : Android
01-23 17:13:26.117: I/System.out(3846): type : Language
01-23 17:13:26.117: I/System.out(3846): name : Java
01-23 17:13:26.128: I/System.out(3846): type : Language
01-23 17:13:26.128: I/System.out(3846): name : Project
01-23 17:13:26.139: I/System.out(3846): type : Project
01-23 17:13:26.139: I/System.out(3846): name : Sabre
01-23 17:13:26.139: I/System.out(3846): type : Project
01-23 17:13:26.147: I/System.out(3846): name : Android Project
01-23 17:13:26.147: I/System.out(3846): type : Project
01-23 17:13:26.167: I/System.out(3846): name : Media Framework
01-23 17:13:26.167: I/System.out(3846): type : Project
01-23 17:13:26.167: I/System.out(3846): name : CCD
01-23 17:13:26.167: I/System.out(3846): type : Project
01-23 17:13:26.167: I/System.out(3846): name : Redbus
01-23 17:13:26.167: I/System.out(3846): type : Project
01-23 17:13:26.167: I/System.out(3846): name : India Today
01-23 17:13:26.177: I/System.out(3846): type : Project
01-23 17:13:26.187: I/System.out(3846): name : Money Control
01-23 17:13:26.187: I/System.out(3846): type : Project
01-23 17:13:26.187: I/System.out(3846): name : Reorganize
01-23 17:13:26.187: I/System.out(3846): type : Action
01-23 17:13:26.187: I/System.out(3846): name : Add New Employee
01-23 17:13:26.187: I/System.out(3846): type : Action
01-23 17:13:26.197: I/System.out(3846): name : Dir
01-23 17:13:26.197: I/System.out(3846): type : Page
01-23 17:13:26.217: I/System.out(3846): name : P.M
01-23 17:13:26.217: I/System.out(3846): type : Page
01-23 17:13:26.217: I/System.out(3846): name : S.E
01-23 17:13:26.217: I/System.out(3846): type : Page
01-23 17:13:26.217: I/System.out(3846): name : JUN
01-23 17:13:26.217: I/System.out(3846): type : Page
01-23 17:13:26.228: I/System.out(3846): name : EMP
01-23 17:13:26.228: I/System.out(3846): type : Page
01-23 17:13:26.237: I/System.out(3846): name : Add Project Members
01-23 17:13:26.237: I/System.out(3846): type : Action 
```

爪哇代码：

```
package com.example.xmlparsevdatr;

import java.io.IOException;
import java.io.StringWriter;
import java.net.URL;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.OutputKeys;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NamedNodeMap;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    Document dom;

    public MainActivity() {
        MainActivity();

        ArrayList<Element> listGroup = getGroups();

    }

    private ArrayList getGroups() {
        try {
            Element documentElement = (Element) dom.getDocumentElement();
            NodeList childNodes = documentElement.getElementsByTagName("node");

            for (int i = 0; i < childNodes.getLength(); i++) {

                if (childNodes.item(i).getNodeType() == Node.ELEMENT_NODE) {
                    Element element = (Element) childNodes.item(i);
                    String name = element.getAttribute("name");
                    String type = element.getAttribute("type");
                    System.out.println("name : " + name);
                    System.out.println("type : " + type);
                }
            }
        } catch (Exception e) {
        }
        return null;

    }

    private void MainActivity() {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        // System.out.println("Inside xml");

        try {
            String sURL = "http://192.168.2.6/cgi-bin/EmployeeTreeCgi/TreeStrutRet.cgi?Username=admin@ohile.com";
            URL url = new URL(sURL);
            DocumentBuilder db = dbf.newDocumentBuilder();

            dom = db.parse(new InputSource(url.openStream()));

        } catch (ParserConfigurationException pce) {
            pce.printStackTrace();
        } catch (SAXException se) {
            se.printStackTrace();
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:57:11.710

问题是您正在尝试打印不存在的第一个节点的名称和类型。因此，您会在输出中获得前两行。

尝试在打印之前检查元素是否确实具有名称和类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:08:17.437

您的 XML 似乎不太好。

`first <node>`元素`does not`有`name`和`type`属性。

理想情况下，在使用 XML 时，您不应该让父项和子项具有相同的名称。例如，XML 应该是这样的：

```
<books>
    <book id=1/>
    <book id=2/>
</books> 
```

另外，请适当考虑`formatting your XML`以获得更好的可读性。

**编辑：**

在检索任何属性之前可以进行检查：

```
if(childNodes.item(i).hasAttribute("name")) {
    // print the name
} 
```

# sql - Oracle SQL 从一个表而不是另一个表中选择行

> ID：14479128
> 
> 赞同：0
> 
> 时间：2013-01-23T11:55:19.273
> 
> 标签：sql, oracle, join, oracle11g

谁能帮我下面的 sql 语句。我想要做的是从 1 个表中检索行，这些行没有出现在另一个表的日期范围内。目前下面的查询返回输入日期范围之间的行。我如何修改它，以便从表 1 返回不在表 2 中日期范围之间的行？表 1 是房屋，表 2 是预订

```
SELECT homes.home_id, homes.title, homes.description, homes.living_room_count, homes.bedroom_count, homes.bathroom_count, homes.price, homes.sqft,
listagg(features.feature_name, '\n') WITHIN GROUP(ORDER BY features.feature_name) features, home_type.type_name
FROM homes
INNER JOIN bookings ON bookings.home_id = homes.home_id
INNER JOIN home_feature ON homes.home_id = home_feature.home_id
INNER JOIN home_type ON home_type.type_code = homes.type_code
INNER JOIN features ON home_feature.feature_id = features.feature_id
WHERE bookings.booking_end < to_date('23-Jan-13')
OR bookings.booking_start > to_date('22-Jan-13')
GROUP BY homes.home_id, homes.title, homes.description, homes.living_room_count, homes.bedroom_count, homes.bathroom_count, homes.price, homes.sqft, home_type.type_name 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:03:57.063

您将希望使用 a`LEFT JOIN`返回所有`homes`未出现在 中的行`bookings`。我还建议将`bookings.date`过滤器从`WHERE`子句移到`JOIN`条件：

```
SELECT homes.home_id, 
    homes.title, 
    homes.description, 
    homes.living_room_count, 
    homes.bedroom_count, 
    homes.bathroom_count, 
    homes.price, homes.sqft,
   listagg(features.feature_name, '\n') WITHIN GROUP(ORDER BY features.feature_name) features, 
    home_type.type_name
FROM homes
LEFT JOIN bookings 
   ON bookings.home_id = homes.home_id
   AND (bookings.booking_end < to_date('23-Jan-13')
    OR bookings.booking_start > to_date('22-Jan-13'))
LEFT JOIN home_feature 
  ON homes.home_id = home_feature.home_id
LEFT JOIN home_type 
  ON home_type.type_code = homes.type_code
LEFT JOIN features 
  ON home_feature.feature_id = features.feature_id
GROUP BY homes.home_id, homes.title, 
    homes.description, homes.living_room_count, 
    homes.bedroom_count, homes.bathroom_count, 
    homes.price, homes.sqft, home_type.type_name 
```

根据您的评论，您可以尝试`NOT EXISTS`：

```
SELECT homes.home_id, 
    homes.title, 
    homes.description, 
    homes.living_room_count, 
    homes.bedroom_count, 
    homes.bathroom_count, 
    homes.price, homes.sqft,
   listagg(features.feature_name, '\n') WITHIN GROUP(ORDER BY features.feature_name) features, 
    home_type.type_name
FROM homes
INNER JOIN home_feature 
  ON homes.home_id = home_feature.home_id
INNER JOIN home_type 
  ON home_type.type_code = homes.type_code
INNER JOIN features 
  ON home_feature.feature_id = features.feature_id
WHERE NOT EXISTS (SELECT home_id
                  FROM bookings b
                  WHERE b.home_id = homes.home_id
                    AND (b.booking_end < to_date('23-Jan-13')
                      OR b.booking_start > to_date('22-Jan-13'))
GROUP BY homes.home_id, homes.title, 
    homes.description, homes.living_room_count, 
    homes.bedroom_count, homes.bathroom_count, 
    homes.price, homes.sqft, home_type.type_name 
```

# .net - 在.Net 2.0中将8位灰度tiff图像转换为8位灰度jpg

> ID：14479130
> 
> 赞同：3
> 
> 时间：2013-01-23T11:55:21.270
> 
> 标签：.net, image-processing, .net-2.0

我们有一个提供 8 位灰度图像的系统，无论是 tiff 还是 jpg 格式。但是，我们必须处理图像的组件要求图像为 8 位 jpg 格式。

当我使用 .Net 将 tiff 图像保存为 jpg 时，它会将其转换为 24 位图像。

有没有一种方法，希望简单快速，将 8 位灰度 tiff 图像转换为等效的 jpg？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T09:25:53.670

我试图并试图得出结论，我很抱歉：.Net 库的位图类不会将 JPEG 保存为 8bpp，即使明确说明并且数据是灰度的。

（注意：虽然在某些地方有说明，但 JPEG 格式确实支持 8bpp）。

在[将图像转换为灰度](https://stackoverflow.com/questions/2265910/c-convert-image-to-grayscale)时，您可以找到将任何图像转换为灰度的代码片段。

使用该代码，我能够保存一个带有“.jpeg”扩展名的 8bpp 灰度图像实例，但说明 ImageFormat.Gif ......这是一个作弊......

我的发现作为解决方案显示了一种完全不同的方法。

FreeImage 库提供了强大的 API，包括解决您的问题所需的功能。

它的主页位于[http://freeimage.sourceforge.net/faq.html](http://freeimage.sourceforge.net/faq.html)

但是，我无法在我的 Win2008 + VS 2010 机器上轻松编译它。

要让它在现代环境中运行，应该付出很多努力。

[在http://www.sambeauvois.be/blog/2010/05/freeimage-and-x64-projects-yes-you-can/](http://www.sambeauvois.be/blog/2010/05/freeimage-and-x64-projects-yes-you-can/)中找到了一些关于如何完成的提示

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T01:53:47.607

```
Image img = Image.FromFile(filePathOriginal);
Bitmap bmp = ConvertTo8bpp(img);
EncoderParameters parameters = new EncoderParameters();
parameters.Param[0] = new EncoderParameter(Encoder.ColorDepth, 8);
bmp.Save(filePathNew, jpgCodec, parameters);
bmp.Dispose();
img.Dispose(); 
```

...

```
private static Bitmap ConvertTo8bpp(Image img) {
    var bmp = new Bitmap(img.Width, img.Height, System.Drawing.Imaging.PixelFormat.Format8bppIndexed);
using (var gr = Graphics.FromImage(bmp))
{
     gr.DrawImage(img, new Rectangle(0, 0, img.Width, img.Height));
}

return bmp;
} 
```

# php - 发送带有阿拉伯语支持的电子邮件 php

> ID：14479131
> 
> 赞同：1
> 
> 时间：2013-01-23T11:55:23.120
> 
> 标签：php, sendmail, arabic

我有反馈表。我想用 HTML 邮件发送内容。当用户输入阿拉伯字符时，它不会显示正确。像ØªØ¬Ø±Ø¨Ø©

PHP代码：

```
function send_email($fromPerson, $fromEmail, $to, $subject, $message) {
    $headers = "From: $fromPerson<$fromEmail> \n";
    $headers .= "Reply-To: $eMail \r\n";
    $headers .= "X-Mailer: PHP/". phpversion();
    $headers .= "X-Priority: 3 \n";
    $headers .= "MIME-version: 1.0\n";
    $headers .= "Content-Type: text/html; charset=UTF-8\n";
    $headers .= "Bcc:log@tazbeta.com\n";
    $msg=$message;
    @mail($to, $subject, $msg, $headers); 
```

我尝试直接从 php 代码发送阿拉伯语，它正确到达，比如`$msg = "مثال";`

问题是当我从反馈代码提交内容时。

```
<form name="feedb" method="post" action="subscribe.php" onsubmit="return validate_forms();">
    <input type="hidden" name="feedback_action" value="feed" />
    <div class="fr" style="width:378px;">
      <p class="white fs24 mb4">Give Us Your Valuable Feedback</p>
      <input name="firstName" id="firstName" type="text" style=" background:#fff; padding:5px; border:none; width:174px; color:#000; font-size:13px;" value="Full Name" onfocus="if(this.value=='Full Name')this.value=''" onblur="if(this.value=='')this.value='Full Name'" />
      <input name="email" id="email" type="text" style=" background:#fff; padding:5px; border:none; width:174px; color:#000; font-size:13px; margin-left:5px;" value="Email ID" onfocus="if(this.value=='Email ID')this.value=''" onblur="if(this.value=='')this.value='Email ID'" />
      <div class="cb pb8"></div>
      <textarea name="comments" id="comments" rows="3" cols="50" style=" background:#fff; padding:5px; border:none; width:366px; color:#000; font-size:13px;" onfocus="if(this.value=='Feedback')this.value=''" onblur="if(this.value=='')this.value='Feedback'">Feedback</textarea>
      <div class="ar mt6">
      <input type="hidden" name="source" value="feedback" />      
        <input name="submit" type="image" src="images/sbmt.gif" />

      </div>
    </div>
    </form> 
```

请问，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-24T08:32:36.700

```
 /** 
   * Simple UTF-8 mail sender function. This function also encode subject and  
   * plain-text message to UTF-8\. If you need HTML mail sender, change the code  
   * in line 2 from text/plain to text/html, but this function is usable the  
   * most cases without any modification. 
   */ 

  function mail_utf8($to, $subject = '(No subject)', $message = '', $header = '') { 
      $_header = "MIME-Version: 1.0\r\nContent-type: text/plain; charset=UTF-8\r\n"; 
      mail($to, '=?UTF-8?B?'.base64_encode($subject).'?=', $message, $_header . $header); 
  } 
```

有关更多信息，请查看此[链接](http://www.ar-php.org/faq-php-arabic.html#email)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:59:51.807

在你的 html 页面中添加这个 head 标签：

```
<html>
<head>
     <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
</head>
<body>
<form name="feedb" method="post" action="subscribe.php">
...
</form>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-19T14:34:27.023

我认为您必须将其添加到 phpmailer

```
$mail->CharSet = 'UTF-8';       
$mail->Encoding     = "base64"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-04T15:45:42.520

在 mysql 设置中使用 utf8_general_ci 对您的数据库进行编码。

# primefaces - Primefaces：对话框隐藏时父组件的文本字段未更新

> ID：14479132
> 
> 赞同：0
> 
> 时间：2013-01-23T11:55:38.260
> 
> 标签：primefaces

> **可能重复：**
> [Primefaces：对话框隐藏时文本字段未更新](https://stackoverflow.com/questions/14479529/primefacestext-field-is-not-updated-when-dialog-hides)

我试图从对话框更新文本字段。文本字段在父组件中。但它没有发生。如果我在命令按钮的更新中给出文本字段的 ID。我遇到了错误。. 由于它无法找到组件 id 。我已经使用了替代方法。我已经采取了隐藏字段。单击命令按钮后，隐藏字段得到更新，并通过简单的javascript函数即时更新父组件的文本字段。javascript函数从对话框中命令按钮的oncomplete调用。因为，根据项目要求，我必须通过 primefaces 而不是通过 javascript 来实现它。请建议我在 primefaces 中的方法。下面是代码片段：

```
 Selected Customer <p:inputText id="customerCode"
        value="#{sixthTabBBean.customerName}" label="Selected Adddress"></p:inputText>
    Selected Customer City <p:inputText id="selectedCity"   value="#{sixthTabBBean.customerCity}"  ></p:inputText>
    <ecap:lookup lookupId="LOV0072" inputId="customerCode" clickStatus="city"
        defaultDDValueIndex="0" title="CustomerCode"></ecap:lookup>

        New LOV <ecap:lookup lookupId="LOV0092" inputId="customerCode" clickStatus="none"
        defaultDDValueIndex="0" title="CustomerCode"></ecap:lookup>

    City<p:inputText id="custCity" value="#{sixthTabBBean.customerCity}"
        disabled="true" label="City"></p:inputText>
    Selected Customer <p:inputText id="customerCode1"
        value="#{sixthTabBBean.customerName}" label="Selected Adddress" ></p:inputText>
    Selected Customer City <p:inputText id="selectedCity1"  value="#{sixthTabBBean.customerCity}"  ></p:inputText>
    Selected Customer State <p:inputText id="selectedSate1"     value="#{sixthTabBBean.customerState}"  ></p:inputText>
    <ecap:lookup lookupId="LOV0098" inputId="customerCode" clickStatus="state"
        defaultDDValueIndex="0" title="CustomerCode"></ecap:lookup>
    <p:dialog id="lkpDialog" widgetVar="lpDialogVar" header="Lookup"
        modal="true" width="1000" height="600"
        rendered="#{lookupSearch.popupRender}"  >
        <h:form  rendered="#{lookupSearch.popupRender}"  prependId="false">
            <h:panelGrid cellpadding="10" id="diaFrmId">
                <p:dataTable id="newfdt" var="flxSearch"
                    value="#{lookupSearch.lkpSearchCriteriaList}">

                    <p:column id="newwhc">
                        <f:facet name="header">
                            <h:outputLabel value="Search Fields"></h:outputLabel>
                        </f:facet>
                        <p:selectOneMenu styleClass="fdd180" id="newwdd"
                            value="#{flxSearch.searchCriterion.whereClause}">
                            <f:selectItems value="#{flxSearch.whrClausDropdown}" />
                        </p:selectOneMenu>
                    </p:column>

                    <p:column id="newcoc">
                        <f:facet name="header">
                            <h:outputLabel value="Conditions"></h:outputLabel>

                        </f:facet>
                        <p:selectOneMenu id="newco" styleClass="fdd95"
                            value="#{flxSearch.searchCriterion.operator}">
                            <f:selectItems id="newcriOperatorItms"
                                value="#{flxSearch.operatorDropdown}" />
                        </p:selectOneMenu>
                    </p:column>

                    <p:column id="newcic">
                        <f:facet name="header">
                            <h:outputLabel value="Value"></h:outputLabel>

                        </f:facet>
                        <p:inputText id="newcriInpNm"
                            rendered="#{!flxSearch.inputDate and !flxSearch.boolValue and !flxSearch.required}"
                            styleClass="285 ftb" deferChangeEvent="true"
                            value="#{flxSearch.searchCriterion.value}"
                            maxlength="#{flxSearch.maxLength}"
                            disabled="#{flxSearch.disableInput}" partialSubmit="true"
                            labelValue="#{flxSearch.searchCriterion.label}"
                            required="#{flxSearch.required}">
                        </p:inputText>

                        <p:inputText id="newcriInpM"
                            rendered="#{!flxSearch.inputDate and !flxSearch.boolValue and flxSearch.required }"
                            value="#{flxSearch.searchCriterion.value}"
                            maxlength="#{flxSearch.maxLength}"
                            disabled="#{flxSearch.disableInput}"
                            labelValue="#{flxSearch.searchCriterion.label}"
                            required="#{flxSearch.required}">

                        </p:inputText>

                        <p:selectOneMenu styleClass="fdd" id="newbldd"
                            value="#{flxSearch.searchCriterion.value}"
                            disabled="#{flxSearch.disableInput}"
                            rendered="#{flxSearch.boolValue }">
                            <f:selectItems value="#{flxSearch.booleanDropdown}" />
                        </p:selectOneMenu>

                        <p:calendar id="newcriDtNm" size="9"
                            rendered="#{flxSearch.inputDate and !flxSearch.boolValue and !flxSearch.required }"
                            disabled="#{flxSearch.disableInput}" showOn="button"
                            value="#{flxSearch.searchCriterion.value}"
                            labelValue="#{flxSearch.searchCriterion.label}">
                        </p:calendar>

                        <p:calendar id="newcriDtM" size="9"
                            rendered="#{flxSearch.inputDate and !flxSearch.boolValue and flxSearch.required }"
                            disabled="#{flxSearch.disableInput}"
                            value="#{flxSearch.searchCriterion.value}"
                            enableChangeDetector="false" partialSubmit="true"
                            labelValue="#{flxSearch.searchCriterion.label}"
                            required="#{flxSearch.required}" showOn="button">
                        </p:calendar>

                    </p:column>
                </p:dataTable>
                <!-- hidden text used to update values in the parent component -->
                <p:inputText  type="hidden" id="hiddencustomerCode"  
                    value="#{sixthTabBBean.customerName}"   ></p:inputText>
                <p:inputText  type="hidden" id="hiddencustCity"  
                    value="#{sixthTabBBean.customerCity}"   ></p:inputText>
                <p:inputText  type="hidden" id="hiddencustState"  
                value="#{sixthTabBBean.customerState}"   ></p:inputText>

                <p:fieldset legend="Combined By">
                    <h:panelGrid columns="2" cellpadding="10">
                        <p:selectOneRadio id="newSlctDrk"
                            valueChangeListener="#{lookupSearch.getSelectedLogOpr}"
                            value="#{lookupSearch.selLogOpr}"
                            title="Combine all search criteria with AND or OR">
                            <f:selectItems id="newSlctDrkItms"
                                value="#{lookupSearch.logicalOperators}" />
                        </p:selectOneRadio>
                    </h:panelGrid>
                </p:fieldset>
                <h:panelGrid columns="3">
                    <p:commandButton value="Find" id="lkpfndDg" update="resultFldSet"
                        actionListener="#{lookupSearch.search}">
                    </p:commandButton>
                    <p:commandButton value="Clear" id="lkpClearDg"
                        actionListener="#{lookupSearch.clear}" />
                </h:panelGrid>
                <p:fieldset legend="Result" id="resultFldSet">
                        <p:dataTable binding="#{lookupSearch.lkpResultDataTable}"
                            value="#{lookupSearch.searchResultsForPage}"></p:dataTable>
                </p:fieldset>
                <p:commandButton value="Select" id="lkpSltRec" update="customerCode"
                    oncomplete="lpDialogVar.hide();insertSelectedValue();"
                    actionListener="#{lookupSearch.selectValue}" />
            </h:panelGrid>
        </h:form>
    </p:dialog>

</h:panelGrid> 
```

这里 ecap:lookup 是自定义组件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:36:07.967

`enter code here`所选客户 所选客户城市 新建 LOV 城市 所选客户 所选客户城市 所选客户状态 -->

```
 <p:column id="newwhc">
                        <f:facet name="header">
                            <h:outputLabel value="Search Fields"></h:outputLabel>
                        </f:facet>
                        <p:selectOneMenu styleClass="fdd180" id="newwdd"
                            value="#{flxSearch.searchCriterion.whereClause}">
                            <f:selectItems value="#{flxSearch.whrClausDropdown}" />
                        </p:selectOneMenu>
                    </p:column>

                    <p:column id="newcoc">
                        <f:facet name="header">
                            <h:outputLabel value="Conditions"></h:outputLabel>

                        </f:facet>
                        <p:selectOneMenu id="newco" styleClass="fdd95"
                            value="#{flxSearch.searchCriterion.operator}">
                            <f:selectItems id="newcriOperatorItms"
                                value="#{flxSearch.operatorDropdown}" />
                        </p:selectOneMenu>
                    </p:column>

                    <p:column id="newcic">
                        <f:facet name="header">
                            <h:outputLabel value="Value"></h:outputLabel>

                        </f:facet>
                        <p:inputText id="newcriInpNm"
                            rendered="#{!flxSearch.inputDate and !flxSearch.boolValue and !flxSearch.required}"
                            styleClass="285 ftb" deferChangeEvent="true"
                            value="#{flxSearch.searchCriterion.value}"
                            maxlength="#{flxSearch.maxLength}"
                            disabled="#{flxSearch.disableInput}" partialSubmit="true"
                            labelValue="#{flxSearch.searchCriterion.label}"
                            required="#{flxSearch.required}">
                        </p:inputText>

                        <p:inputText id="newcriInpM"
                            rendered="#{!flxSearch.inputDate and !flxSearch.boolValue and flxSearch.required }"
                            value="#{flxSearch.searchCriterion.value}"
                            maxlength="#{flxSearch.maxLength}"
                            disabled="#{flxSearch.disableInput}"
                            labelValue="#{flxSearch.searchCriterion.label}"
                            required="#{flxSearch.required}">

                        </p:inputText>

                        <p:selectOneMenu styleClass="fdd" id="newbldd"
                            value="#{flxSearch.searchCriterion.value}"
                            disabled="#{flxSearch.disableInput}"
                            rendered="#{flxSearch.boolValue }">
                            <f:selectItems value="#{flxSearch.booleanDropdown}" />
                        </p:selectOneMenu>

                        <p:calendar id="newcriDtNm" size="9"
                            rendered="#{flxSearch.inputDate and !flxSearch.boolValue and !flxSearch.required }"
                            disabled="#{flxSearch.disableInput}" showOn="button"
                            value="#{flxSearch.searchCriterion.value}"
                            labelValue="#{flxSearch.searchCriterion.label}">
                        </p:calendar>

                        <p:calendar id="newcriDtM" size="9"
                            rendered="#{flxSearch.inputDate and !flxSearch.boolValue and flxSearch.required }"
                            disabled="#{flxSearch.disableInput}"
                            value="#{flxSearch.searchCriterion.value}"
                            enableChangeDetector="false" partialSubmit="true"
                            labelValue="#{flxSearch.searchCriterion.label}"
                            required="#{flxSearch.required}" showOn="button">
                        </p:calendar>

                    </p:column>
                </p:dataTable>
                  <p:fieldset legend="Combined By">
                    <h:panelGrid columns="2" cellpadding="10">
                        <p:selectOneRadio id="newSlctDrk"
                            valueChangeListener="#{lookupSearch.getSelectedLogOpr}"
                            value="#{lookupSearch.selLogOpr}"
                            title="Combine all search criteria with AND or OR">
                            <f:selectItems id="newSlctDrkItms"
                                value="#{lookupSearch.logicalOperators}" />
                        </p:selectOneRadio>
                    </h:panelGrid>
                </p:fieldset>
                <h:panelGrid columns="3">
                    <p:commandButton value="Find" id="lkpfndDg" update="resultFldSet"
                        actionListener="#{lookupSearch.search}">
                    </p:commandButton>
                    <p:commandButton value="Clear" id="lkpClearDg"
                        actionListener="#{lookupSearch.clear}" />
                </h:panelGrid>
                <p:fieldset legend="Result" id="resultFldSet">
                        <p:dataTable binding="#{lookupSearch.lkpResultDataTable}"
                            value="#{lookupSearch.searchResultsForPage}"></p:dataTable>
                </p:fieldset>
                <p:commandButton value="Select" id="lkpSltRec" update="customerCode,customerCode1,selectedCity1,selectedSate1"
                    oncomplete="lpDialogVar.hide();insertSelectedValue();"
                    actionListener="#{lookupSearch.selectValue}" />
            </h:panelGrid>
        <!-- </h:form>-->
    </p:dialog>

</h:panelGrid>
</h:form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:30:44.607

最后，我得到了解决方案。我遇到的异常是由于表单标签。从对话框触发的 ajax 事件无法在表单之外找到组件。所以我用表单标签封闭了页面。这里是代码片段。

# php - 用户身份验证过程中的 Symfony2 异常

> ID：14479133
> 
> 赞同：0
> 
> 时间：2013-01-23T11:55:39.760
> 
> 标签：php, symfony

我认为 Symfony2 会捕获并忽略用户身份验证过程中抛出的每个异常。有没有办法改变这种行为？

# html - IE8 中的复选框响应缓慢

> ID：14479138
> 
> 赞同：2
> 
> 时间：2013-01-23T11:55:53.730
> 
> 标签：html, internet-explorer, twitter-bootstrap, checkbox

我正在使用 twitter bootstrap 和 jquery 来实现 RWD。复选框在 chrome/firefox 中响应良好。但在 IE8 中，复选框响应需要几秒钟，即单击复选框需要几秒钟才能检查

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T07:45:40.587

这是因为使用 jquery-1.8.1 版本而发生的。如果我使用 jquery-1.8.3 版本，复选框的渲染很好，而且速度也很快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T19:28:21.653

我也发现了这一点，并确定了原因。

首先，您需要一个包含大量 DOM 元素的大页面。在我的示例中，我有一个包含 10 列和 100 行的表格，每个单元格也包含 1 或 2 个元素。

如果您分析它的缓慢性，则表明它在 jQuery 本身内。正在发生的事情是在引导程序中有很多 .live() 和 .delegate() （错误，它们的“.on”等价物）调用，并且 jQuery 必须处理事件并运行选择器过滤器以确定是否有任何需要调用处理程序。对我来说，单击一个复选框会导致这种情况发生 17 次，而且在 IE8 中它只是狗慢（实际 IE8，而不是 IE9 中的 IE8 兼容模式，请注意，存在巨大差异）。

确实没有解决方法或修复方法，拥有这些处理程序只是引导程序的性质，而 IE8 的性质是缓慢过滤。

您可以通过优化页面大小并仅包含您真正需要的引导程序方面来改进事情。

# c# - “object sender”和“EventArgs e”参数有什么用？

> ID：14479143
> 
> 赞同：60
> 
> 时间：2013-01-23T11:56:06.753
> 
> 标签：c#, asp.net, events, sender, eventargs

在`Page_Load`,`Init`和其他页面事件的情况下，这些`(object sender, EventArgs e)`参数有什么用？

例子会更有帮助。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-01-23T12:03:19.630

`EventArgs e`是一个名为 e 的参数，其中包含事件数据，有关详细信息，请参阅 EventArgs MSDN 页面。

`Object Sender`是一个名为 Sender 的参数，其中包含对引发事件的控件/对象的引用。

事件参数类：http: [//msdn.microsoft.com/en-us/library/system.eventargs.aspx](http://msdn.microsoft.com/en-us/library/system.eventargs.aspx)

例子：

```
protected void btn_Click (object sender, EventArgs e){
   Button btn = sender as Button;
   btn.Text = "clicked!";
} 
```

**编辑：** 单击按钮时，将触发 btn_Click 事件处理程序。“对象发送者”部分将引用被点击的按钮

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-01-23T12:06:29.010

按照惯例，这两个参数（或变体）随所有事件一起发送。

*   `sender`: 引发事件的对象
*   `e``EventArgs`在许多情况下，包括一个从 . 继承的对象的实例`EventArgs`。包含有关事件的附加信息，有时提供处理事件的代码以某种方式改变事件的能力。

对于您提到的事件，这两个参数都不是特别有用。只有一页报道了这些事件，并且`EventArgs`没有`Empty`关于该事件的更多信息。

分别查看这 2 个参数，这里有一些*有用*的示例。

## `sender`

假设您在表单上有多个按钮。这些按钮可以包含`Tag`描述单击它们应该做什么。您可以使用相同的处理程序处理所有`Click`事件，并根据`sender`执行不同的操作

```
private void HandleButtonClick(object sender, EventArgs e)
{
    Button btn = (Button)sender;
    if(btn.Tag == "Hello")
      MessageBox.Show("Hello")
    else if(btn.Tag == "Goodbye")
       Application.Exit();
    // etc.
} 
```

免责声明：这是一个人为的例子；不要那样做！

## `e`

有些活动是可以取消的。他们发送`CancelEventArgs`而不是`EventArgs`. `Cancel`该对象在事件参数上添加了一个简单的布尔属性。处理此事件的代码可以取消该事件：

```
private void HandleCancellableEvent(object sender, CancelEventArgs e)
{
    if(/* some condition*/)
    {
       // Cancel this event
       e.Cancel = true;
    }
} 
```

# excel - 使用 ReportService2010.asmx 以编程方式从共享点导出 SSRS 报告

> ID：14479144
> 
> 赞同：8
> 
> 时间：2013-01-23T11:56:23.537
> 
> 标签：excel, sharepoint, reporting-services, ssrs-2008

我必须以编程方式将 ssrs 报告导出到 excel，添加服务参考

http://siteurl/_vti_bin/ReportServer/ReportService2010.asmx

http://siteurl/_vti_bin/ReportServer/ReportExecution2005.asmx

有人可以提供一个工作博客吗

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T01:01:21.283

我这样做是为了我目前使用 VS 2012 .NET 4.5 进行 PDF 报告的报告自动化。

A. 为了便于使用，编译您自己的代理类比每次都引用 Web 服务更容易，因为您可能会忘记服务名称。

从 Visual Studio 命令提示符：

```
 wsdl /language:CS /n:"Microsoft.SqlServer.ReportingServices2010" http://<Server Name>/reportserver/reportservice2010.asmx?wsdl 
```

参考： http: [//msdn.microsoft.com/en-us/library/ms155134](http://msdn.microsoft.com/en-us/library/ms155134(v=sql.105).aspx) (v=sql.105).aspx （仅当您想获取信息并执行时才需要服务：ReportExecution2005 和 ReportService2010。如果您只想渲染你只需要 ReportExecution2005)

B. 创建代理类后，将其放入库项目中以供重用恕我直言。如果您有多个环境，可能需要在配置文件中构建一些包装类来进行写入和一些服务器，您可能希望参考这些类。

C. 编写一些引用库的代码并在 C# 中构建第一次报告：

```
 using System;
    using System.IO;
    using System.Web.Services.Protocols;
    using myNamespace.MyReferenceName;  // YOUR PROXY PROJECT 

    class Sample
    {
    static void Main(string[] args)
    {
        ReportExecutionService rs = new ReportExecutionService();
        rs.Credentials = System.Net.CredentialCache.DefaultCredentials;
        rs.Url = "http://myserver/reportserver/ReportExecution2005.asmx";

        // Render arguments
        byte[] result = null;
        string reportPath = "/AdventureWorks Sample Reports/Employee Sales Summary";
        string format = "MHTML";
        string historyID = null;
        string devInfo = @"<DeviceInfo><Toolbar>False</Toolbar></DeviceInfo>";

        // Prepare report parameter.
        ParameterValue[] parameters = new ParameterValue[3];
        parameters[0] = new ParameterValue();
        parameters[0].Name = "EmpID";
        parameters[0].Value = "288";
        parameters[1] = new ParameterValue();
        parameters[1].Name = "ReportMonth";
        parameters[1].Value = "6"; // June
        parameters[2] = new ParameterValue();
        parameters[2].Name = "ReportYear";
        parameters[2].Value = "2004";

        DataSourceCredentials[] credentials = null;
        string showHideToggle = null;
        string encoding;
        string mimeType;
        string extension;
        Warning[] warnings = null;
        ParameterValue[] reportHistoryParameters = null;
        string[] streamIDs = null;

        ExecutionInfo execInfo = new ExecutionInfo();
        ExecutionHeader execHeader = new ExecutionHeader();

        rs.ExecutionHeaderValue = execHeader;

        execInfo = rs.LoadReport(reportPath, historyID);

        rs.SetExecutionParameters(parameters, "en-us"); 
        String SessionId = rs.ExecutionHeaderValue.ExecutionID;

        Console.WriteLine("SessionID: {0}", rs.ExecutionHeaderValue.ExecutionID);

        try
        {
            result = rs.Render(format, devInfo, out extension, out encoding, out mimeType, out warnings, out streamIDs);

            execInfo = rs.GetExecutionInfo();

            Console.WriteLine("Execution date and time: {0}", execInfo.ExecutionDateTime);

        }
        catch (SoapException e)
        {
            Console.WriteLine(e.Detail.OuterXml);
        }
        // Write the contents of the report to an MHTML file.
        try
        {
            FileStream stream = File.Create("report.mht", result.Length);
            Console.WriteLine("File created.");
            stream.Write(result, 0, result.Length);
            Console.WriteLine("Result written to the file.");
            stream.Close();
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
        }

    }
    } 
```

取自这里： http: [//msdn.microsoft.com/en-us/library/reportexecution2005.reportexecutionservice.render (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/reportexecution2005.reportexecutionservice.render(v=sql.105).aspx)

D.（可选）：您可能想要处理刷新 SSRS 托管服务器上的 WebService。默认情况下，它每 12 小时循环一次，从而使第一个报告在此之后呈现缓慢。您只需每 10 小时左右对位于 http:// (servername)/ReportServer 的服务端点进行一次网络调用，即可刷新这些服务。我使用了一个名为 Visual Cron 的工具，它可以设置自动化任务，你也可以尝试更改 SSRS 服务配置，创建自己的保持活动服务等。基本上你只需要更改设置或与它交谈即可保持它打开。

# email - 补救措施：不使用名字和姓氏从 WS 创建事件

> ID：14479151
> 
> 赞同：0
> 
> 时间：2013-01-23T11:56:39.297
> 
> 标签：email, service, web, remedy

我正在尝试通过 Web 服务 HPD_IncidentInterface_Create_WS 在 Remedy 中创建事件。一切正常，但是如果我可以使用提交者的邮件地址或登录名而不是他的“名字”和“姓氏”，这对我来说会更好，这两个都是 WSDL 文件中的必填字段。有没有办法在不使用它们的情况下创建事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T04:27:17.550

我看到了你的困境。我相信您需要修改开箱即用的 WSDL 以使“名字”和“姓氏”成为可选的。我认为您可以将每个 WSDL 属性的“Nillable”属性（参见图 1）更改为“真”以实现您的目标。我还没有测试过这种方法，但我认为它会起作用。

您还需要添加一个在提交“HPD:IncidentInterface_Create”表单时执行的过滤器，以使用电子邮件地址作为查找条件来设置“名字”和“姓氏”字段。

创建现成 WSDL 的副本并修改该副本可能是个好主意。这样，BMC 提供的任何热修复程序仍将正常运行。但是，这只是我的偏好。

PS我试图上传'Nillable'属性的截图，但显然我没有足够的声望点来做到这一点（废话！）:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T00:14:45.907

您需要创建一个类似于 HPD:HII:CreateIncident_020_GetPPLInfo 的自定义过滤器（您可以将其保存为副本）。使用电子邮件更改第一个 namd/姓氏参数。

您也可以在 BMCDN 论坛上发布问题，更具体的补救措施请查看此论坛。

[https://communities.bmc.com/communities/community/bmcdn/bmc_it_service_support?view=overview](https://communities.bmc.com/communities/community/bmcdn/bmc_it_service_support?view=overview)

# javascript - 幻灯片和图像样式。在 IE8 中看起来非常不同

> ID：14479156
> 
> 赞同：1
> 
> 时间：2013-01-23T11:56:56.307
> 
> 标签：javascript, css, firefox, internet-explorer-8, drupal-7

在 Firefox 上，所有图像都被拉伸到 650x300 但在 IE8 中，所有图像仅被拉伸到垂直高度为 300 像素。它们没有水平调整大小。

使用以下模块/库，我创建了一个简单的幻灯片。但是，它在 Firefox 和 IE 中看起来不同。

*   [http://drupal.org/project/field_slideshow](http://drupal.org/project/field_slideshow)
*   [http://drupal.org/project/jcarousel](http://drupal.org/project/jcarousel)
*   [http://drupal.org/project/libraries](http://drupal.org/project/libraries)

我究竟做错了什么？我已经清除了两个浏览器中的缓存。

出于某种原因，IE 将以下内容附加到 IMG 标记 complete="complete" jquery1358921313918="6" 可以这样做吗？顺便说一句，即使在 IE 中，源中的图像宽度和高度是 650 和 300，但这并不是它们显示的内容......高度是 300，但宽度不是 600 像素......来自来源：

火狐：

```
<img width="650" height="300" src="URL/sites/default/files/styles/homepage-slideshow/public/… 
```

IE：

```
<img width="650" height="300" src="URL/sites/default/files/styles/homepage-slideshow/public/…; complete="complete" jquery1358921313918="6"/> 
```

# ios - cocos2d中Sprite的触摸动作

> ID：14479158
> 
> 赞同：4
> 
> 时间：2013-01-23T11:56:59.413
> 
> 标签：ios, ipad, cocos2d-iphone, css-sprites

我想在精灵被触摸时对其进行操作，这是操作方法：

```
-(void) spriteEffect
{
    CCSprite *actionEffect = avatar;
    id jump = [CCJumpBy actionWithDuration:1 position: ccp(0, 0) height:50 jumps:1];
    id sequence = [CCSequence actions: jump, nil];
    [actionEffect runAction:sequence];
} 
```

现在，我的问题是，我不知道如何使触摸动作与精灵连接；我应该用这个吗？

```
- (void)ccTouchesBegan:(NSSet*)touches withEvent:(UIEvent*)event 
```

Msp 位于分配了 .plist 的 .png 图像中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:02:55.320

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{

    UITouch *touch = [touches anyObject];

    if ([touch tapCount] == 1) 
    {
        // Add Your Action
    }

} 
```

**或者**

```
UITapGestureRecognizer *gr = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(SpriteThouch)];
[[[CCDirector sharedDirector] openGLView] addGestureRecognizer:gr]; 
```

并调用方法`SpriteThouch`

```
-(void)SpriteThouch
{
  // code here 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:24:09.500

我使用 CCNode+SFGestureRecognizers.h (https://github.com/krzysztofzablocki/CCNode-SFGestureRecognizers) 为我的精灵添加手势。

所以你需要做的就是：

*   导入 CCNode+SFGestureRecognizers.h

*   添加精灵：CCSprite *button = [CCSprite spriteWithCGImage:....

*   为精灵添加代码

    button.isTouchEnabled = YES；

    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:target action:selector];

    [按钮添加手势识别器：点击]；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:28:38.093

当我想处理**简单的**精灵触摸时，我通常使用[CCMenuItemImage ：](http://www.cocos2d-iphone.org/api-ref/0.9.0-beta/interface_c_c_menu_item_image.html)

 **使用以下方法创建菜单项：

```
itemFromNormalImage:selectedImage:target:selector: 
```

如您所见，您可以传递菜单项的图像（即精灵图像），传递目标（通常是实现动作的self），当然还有方法（选择器），当菜单项被触摸时将被调用。

如果您需要更多帮助，请告诉我...**

# c++ - 如何在 QComboBox 中显示文件夹 c++ 和 Qt 中的文件列表？

> ID：14479160
> 
> 赞同：0
> 
> 时间：2013-01-23T11:57:02.313
> 
> 标签：c++, qt, combobox

我想在 QComboBox 中显示一个文件夹的所有文件。我已经测试了一些东西，但不是我想要的。

```
void pacientes::on_mostrarPaciente_clicked()
{
 QDir path("C:/Users/Jaime/Desktop/interfaz/pacientes");
 QStringList files = path.entryList(QDir::Files);

 QComboBox comb;
 qDebug()<<files;
 comb.addItems(files);

 comb.show();

} 
```

使用 qDebug 在此功能中没有显示任何控制台。qDebug 在其他函数中显示的东西，但是在这个函数中什么都没有。我认为效果不好

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T12:07:18.333

```
QDir path("d:/tmp");
QStringList files = path.entryList(QDir::Files);
QComboBox comb;
comb.addItems(files);
comb.show(); 
```

![在此处输入图像描述](../Images/19139967d84fee875d79482c84490923.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:03:29.027

您可以使用`QDir::entryInfoList()`对文件设置的过滤器来获取一个`QFileInfoList`，然后只需将您想要的信息添加到`QComboBox`.

# java - 我的程序在列表视图中第二次单击时崩溃

> ID：14479161
> 
> 赞同：1
> 
> 时间：2013-01-23T11:57:04.863
> 
> 标签：java, android, android-intent, bufferedreader

解决了；）我知道它的想法，但我使用了 Globals .class，现在它可以工作了；）现在它可以工作了；） hurahhh

感谢你们

主要问题

当我第二次单击“ListView”项目时，出现错误并且应用程序关闭。

有人可以告诉我我做错了什么，因为它第一次完美地与每个元素一起工作，而第二次它甚至不工作，即使是第一次单击的 ListView 项目（没有任何问题）再次单击。

```
 package com.klemenjezakon.koceSLO;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.Reader;
import java.util.ArrayList;
import java.util.Arrays;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class KocaInter extends ListActivity {

    StringBuilder sb = new StringBuilder();
    String temp;
    InputStreamReader reader;
    int n = 2;
    koca[] koce = new koca[n];
    ArrayList<String> kocee = new ArrayList<String>();
    ArrayList<String> podatek = new ArrayList<String>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, kocee));

        inicjalizacijaKoc();

    }

    private void inicjalizacijaKoc() {

        try {
            reader = new InputStreamReader(getAssets().open("s_koce.txt"));
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        BufferedReader br = new BufferedReader(reader);
        for (int i = 0; i < 2; i++) {
            try {
                kocee.add("" + br.readLine());

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        try {
            reader.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        // TODO Auto-generated method stub

    }

    protected void onListItemClick(ListView lv, View v, int position, long id) {
        super.onListItemClick(lv, v, position, id);

        int a = 0;
        switch (position) {
        case 0:
            a=R.drawable.slika0000;
            break;
        case 1:
            a=R.drawable.slika0001;
            break;
            default:
            a=R.drawable.slika0000;

        }

        try {
            reader = new InputStreamReader(getAssets().open("koce_podatki.txt"));
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        BufferedReader br = new BufferedReader(reader);
        for(int i=-1;i<position;i++){
        try {
            temp = "" + br.readLine();

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }}

        try {
            reader.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        String[] nov = temp.split("\\|");

        for(int i=0;i<23;i++){
            podatek.add(""+nov[i]);
        }
        temp=""+sb.append(a);

        podatek.set(0,temp);

        Intent in = new Intent(this, MainActivity.class);

        in.putExtra("array", podatek);

        startActivity(in);

        podatek.clear();

    }

} 
```

主要活动：

```
package com.klemenjezakon.koceSLO;

import java.util.ArrayList;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.util.DisplayMetrics;
import android.view.KeyEvent;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.ImageView;

    import android.widget.TextView;

    public class MainActivity extends Activity {

        ImageView slika;
        ArrayList<String> podatki;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            requestWindowFeature(Window.FEATURE_NO_TITLE);
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                    WindowManager.LayoutParams.FLAG_FULLSCREEN);

            Bundle extras = getIntent().getExtras();
            if (extras != null) {
                podatki = extras.getStringArrayList("array");
            }

            DisplayMetrics metrics = new DisplayMetrics();
            getWindowManager().getDefaultDisplay().getMetrics(metrics);

            int height = metrics.heightPixels;
            int width = metrics.widthPixels;

            setContentView(R.layout.koca);

            int n=-1;

            int pic=++n;

            TextView ime = (TextView) findViewById(R.id.ime);
            ime.setText("" + (podatki.get(++n).toString()));
            TextView visina = (TextView) findViewById(R.id.visina);
            visina.setText("" + (podatki.get(++n).toString()));
            TextView odprt = (TextView) findViewById(R.id.odprt);
            odprt.setText("" + (podatki.get(++n).toString()));
            TextView gorPredel = (TextView) findViewById(R.id.gorPredel);
            gorPredel.setText("" + (podatki.get(++n).toString()));
            TextView PD = (TextView) findViewById(R.id.PD);
            PD.setText("" + (podatki.get(++n).toString()));
            TextView Oskrbnik = (TextView) findViewById(R.id.Oskrbnik);
            Oskrbnik.setText("" + (podatki.get(++n).toString()));
            TextView tel = (TextView) findViewById(R.id.Tel);
            tel.setText("" + (podatki.get(++n).toString()));
            TextView GSM = (TextView) findViewById(R.id.GSM);
            GSM.setText("" + (podatki.get(++n).toString()));
            TextView telPD = (TextView) findViewById(R.id.TelPD);
            telPD.setText("" + (podatki.get(++n).toString()));
            TextView mail = (TextView) findViewById(R.id.mail);
            mail.setText("" + (podatki.get(++n).toString()));
            TextView web = (TextView) findViewById(R.id.web);
            web.setText("" + (podatki.get(++n).toString()));
            TextView naslov = (TextView) findViewById(R.id.naslov);
            naslov.setText("" + (podatki.get(++n).toString()));
            TextView kat = (TextView) findViewById(R.id.kat);
            kat.setText("" + (podatki.get(++n).toString()));
            TextView lez = (TextView) findViewById(R.id.lez);
            lez.setText("" + (podatki.get(++n).toString()));
            TextView stJed = (TextView) findViewById(R.id.stJed);
            stJed.setText("" + (podatki.get(++n).toString()));
            TextView cen = (TextView) findViewById(R.id.cen);
            cen.setText("" + (podatki.get(++n).toString()));
            TextView dostop = (TextView) findViewById(R.id.dostop);
            dostop.setText("" + (podatki.get(++n).toString()));
            TextView opis = (TextView) findViewById(R.id.opis);
            opis.setText("" + (podatki.get(++n).toString()));
            TextView razg = (TextView) findViewById(R.id.razg);
            razg.setText("" + (podatki.get(++n).toString()));
            TextView pTure = (TextView) findViewById(R.id.pTure);
            pTure.setText("" + (podatki.get(++n).toString()));
            TextView bKoce = (TextView) findViewById(R.id.bKoce);
            bKoce.setText("" + (podatki.get(++n).toString()));
            TextView vzponi = (TextView) findViewById(R.id.vzponi);
            vzponi.setText("" + (podatki.get(++n).toString()));

            Bitmap foto = BitmapFactory.decodeResource(getResources(),
                    Integer.parseInt(podatki.get(pic)));
            ImageView slika = (ImageView) findViewById(R.id.foto);
            slika.setImageBitmap(foto);

            slika.setMinimumWidth(width);
            slika.setMaxWidth(width);

        }
        public boolean onKeyDown(int keyCode, KeyEvent event)  {
            if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
                // do something on back.
                finish();
                return true;
            }

            return super.onKeyDown(keyCode, event);
        }

    } 
```

谢谢 ;）

日志猫： [http ://www.file.si/pfiles/273442/Untitled.png](http://www.file.si/pfiles/273442/Untitled.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:16:47.040

```
Bitmap foto = BitmapFactory.decodeResource(getResources(),
                    Integer.parseInt(podatki.get(pic))); 
```

在这里，您收到错误消息，根据错误消息，它的值变化太大，因此它的 Long 不是 Int 值。在 MainActivity 中签入 onCreate()

**已编辑**

在单击项目中，您正在选择资源并存储在**一个**对象中，这个对象现在附加在**sb**对象中，现在每次单击它都会附加它。

```
temp=""+sb.append(a); // here appended a (selected resource value) 
```

您需要每次清除此值，或者您可以将其传递给意图对象中的另一个额外值

```
in.putExtra("resourceId", a); 
```

然后就`MainActivity`不需要解析和类型转换问题，只需获取 int 值并直接用于`BitmapFactory`，就像这样

```
Bitmap foto = BitmapFactory.decodeResource(getResources(),extras.getInt("resourceId")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:16:48.127

```
Bitmap foto = BitmapFactory.decodeResource(getResources(),
                Integer.parseInt(podatki.get(pic))); 
```

是错误所在的行，更具体地说：

```
Integer.parseInt(podatki.get(pic)) 
```

根据 logcat，它看起来`podatki.get(pic)`返回的字符串太长而无法转换为整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:18:22.267

问题出在代码中的这一行。

```
 Bitmap foto = BitmapFactory.decodeResource(getResources(),
                    Integer.parseInt(podatki.get(pic))); 
```

如下更改

```
 Bitmap foto = BitmapFactory.decodeResource(getResources(),
                    R.drawable.yourpic); 
```

希望能帮助到你

# css - 使用 Css 过渡和变换的缩放效果？

> ID：14479162
> 
> 赞同：3
> 
> 时间：2013-01-23T11:57:05.450
> 
> 标签：css, transform, css-transitions

我有一个大小为 50 x 50 的按钮。悬停时，我需要用一个 70 x 70 大小的按钮替换这个按钮。此外，过渡应该是平稳的。

所以，我正在尝试使用 CSS 过渡和变换功能。即z轴上的transform3d。

```
<style>

.button1{
    position:absolute;
    top:0px;
    left:0px;
    display:inline-block;
    width:50px;
    height:50px;
    background:url(images/button.png) no-repeat;
    background-position:bottom left;
    /* Transition */
    -moz-transition: all 0.5s ease;
    -ms-transition: all 0.5s ease;
    -o-transition: all 0.5s ease;
    transition: all 0.5s ease;
}

.button1:hover{
    width:70px;
    height:70px;
    background-position:top left;
    -webkit-transform: translate3d(0, 0, 10px);
    -moz-transform: translate3d(0, 0, 10px);
    -ms-transform: translate3d(0, 0, 10px);
    -o-transform: translate3d(0, 0, 10px);
}

</style>

</head>
<body>
<a href="#" class="button1"></a>
</body> 
```

我已经为 x 和 y 变换尝试了这段代码，它可以工作。但是，它不适用于 z 轴。

基本上，我希望在悬停时具有平滑的缓动缩放效果。

请建议。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-23T12:23:06.260

通过尝试同时缩放维度和变换，您使问题过于复杂。

简单地应用`scale`变换就可以达到想要的效果，尽管大比例尺会在图像和文本上产生模糊。

```
.button:hover {
    /* Un-prefixed. Prefix `transform` for all target browsers. */
    transform: scale(1.2);
    } 
```

# php - 使用用户友好的自定义选项制作服务包

> ID：14479166
> 
> 赞同：2
> 
> 时间：2013-01-23T11:57:21.763
> 
> 标签：php, drupal, drupal-7

我知道这看起来只是一个基本问题，但事实并非如此。我想了一天，但找不到继续前进的确切路径。所以这是我正在谈论的要求 -

站点将有服务列表。将从这些服务中准备一些包。就像有5种固定的服务一样，每一种都可以有多种由客户提供的现场服务。对于每种类型，都会选择一项默认服务并将其显示给用户，但可以选择其他选项来代替它，并且完整套餐的价格将相应更改。

如果您浏览，这同样适用于 DELL 网站。他们让我们定制笔记本电脑/电脑。

现在付款对我来说不是问题，因为我可以收集信息并让用户提交他们的基本详细信息供客户联系他们。

我必须在 Drupal 7 中做到这一点，我想知道哪些模块至少可以帮助我开始。稍后，一旦准备好初始结构，我也可以计划一些自定义模块。

那么有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T22:17:48.250

如果您只是收集信息，我建议您使用多步表单并添加一些 jQuery。多步骤表单可用作内容类型，也可用于 Web 表单提交。使用规则完成选择后，您可以将用户重定向到下一个“服务”或表单。您可以将节点（网络表单）与服务相关联，并根据提交的信息重定向用户。希望有帮助！

# java - 在 Eclipse 源中调试未找到警告

> ID：14479169
> 
> 赞同：0
> 
> 时间：2013-01-23T11:57:31.647
> 
> 标签：java, eclipse, debugging

当我在 Eclipse 中调试时，我想进入 personBUS 的代码 lstEmployees 方法，但我收到警告**Source not found**。

```
Map<String,Object> m =new HashMap<String,Object>();
    List l =  personBUS.lstEmployees();
    m.put("data", l);
    m.put("totalCount",l.size());
    m.put("success", true);
    return m; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:04:44.563

这意味着您正在尝试使用文件`debug`内的类`jar`，在您的情况下，所代表的类`personBUS`在 jar 文件中。解决方案：将jar文件的源附加到eclipse。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:56:17.043

似乎存在的 Eclipse`project`与此代码`personBUS`不同。`project`

您必须将项目添加`personBUS`到当前项目的构建路径中。这可以按如下方式完成：

右键单击项目->配置构建路径->转到`Projects`选项卡->选择`personBUS`对象`class`存在的项目。

# iphone - 从后台任务运行 NSTimer

> ID：14479172
> 
> 赞同：0
> 
> 时间：2013-01-23T11:57:44.797
> 
> 标签：iphone, ios

我想使用 a`NSTimer`作为后台任务。我写了这段代码：

```
UIBackgroundTaskIdentifier bgTask;
        UIApplication  *app = [UIApplication sharedApplication];
        bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
            [app endBackgroundTask:bgTask];
        }];
        self.silenceTimer = [NSTimer scheduledTimerWithTimeInterval:30 target:self selector:@selector(findlocation:) userInfo:nil repeats:NO]; 
```

但它不会`findlocation`在 30 秒后触发该方法。请指导我如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:02:30.753

`NSTimer`当应用程序处于后台状态时暂停。

你必须启动一些后台任务来做你想做的事。但即便如此，您将被限制在应用程序进入后台后的一定时间内。

真正的后台行为仅适用于位置跟踪、VoIP 或音频应用程序。其他应用程序必须面临限制：一旦进入后台，您将有一定的时间来完成您从`beginBackgroundTaskWithExpirationHandler: (`backgroundTimeRemaining开始的任务`)`。

检查此以获取更多信息[http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/BackgroundExecution/BackgroundExecution.html](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/BackgroundExecution/BackgroundExecution.html)

对于一个干净的解决方案，请检查这个问题的接受答案[如何让我的应用程序在后台运行 NSTimer？](https://stackoverflow.com/questions/9220494/how-do-i-make-my-app-run-an-nstimer-in-the-background)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:08:30.650

此代码用于在应用程序进入后台时播放声音，您可以自定义它以供自己使用

```
- (void)applicationDidEnterBackground:(UIApplication *)application{
    backgroundTask = [application beginBackgroundTaskWithExpirationHandler: ^{
        dispatch_async(dispatch_get_main_queue(), ^{
            if (backgroundTask != UIBackgroundTaskInvalid)
            {
                [application endBackgroundTask:backgroundTask];
                backgroundTask = UIBackgroundTaskInvalid;
            }
        });
    }];
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        [NSThread sleepForTimeInterval:3];
        [self startPlayingInBackground:@"default.aif"];
        NSLog(@"Time remaining: %f",[application backgroundTimeRemaining]);

        dispatch_async(dispatch_get_main_queue(), ^{
            if (backgroundTask != UIBackgroundTaskInvalid)
            {
                // if you don't call endBackgroundTask, the OS will exit your app.
                [application endBackgroundTask:backgroundTask];
                backgroundTask = UIBackgroundTaskInvalid;
            }
        });
    });
} 
```

下面的行是代码，其中 m 播放声音是我的目标 c 函数

```
[self startPlayingInBackground:@"default.aif"]; 
```

[参考自](https://stackoverflow.com/questions/6704430/can-i-use-nstimer-in-background)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T06:07:34.647

```
UIBackgroundTaskIdentifier bgTask;
    UIApplication  *app = [UIApplication sharedApplication];
    bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
        [app endBackgroundTask:bgTask];
    }];
    self.silenceTimer = [NSTimer scheduledTimerWithTimeInterval:30 target:self selector:@selector(findlocation:) userInfo:nil repeats:NO]; 
```

[[NSRunloop mainRunLoop] addTimer:self.silenceTimer forMode:NSDEfaultRunLoopMode];

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-23T12:02:03.383

试试这个代码：

```
dispatch_queue_t backgroundQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
 dispatch_source_t timerSource = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, backgroundQueue);
 dispatch_source_set_timer(timerSource, dispatch_time(DISPATCH_TIME_NOW, 0), 10.0*NSEC_PER_SEC, 0*NSEC_PER_SEC);
 dispatch_source_set_event_handler(timerSource, ^{
     if(queue)
         [self findlocation];
 });
 dispatch_resume(timerSource); 
```

# javascript - 如何在浏览器内存中获取 javascript 对象的大小和计数

> ID：14479176
> 
> 赞同：4
> 
> 时间：2013-01-23T11:57:57.863
> 
> 标签：javascript, memory, backbone.js

我知道你们中的大多数人会指向我`chrome profiler heap snapshot`，但是在空白页面上（没有 js 没有 css 只是 html>body）它显示 8mb 堆大小和 12 到 30,000 个对象取决于他的心情，所以它对于这项任务完全没用，我认为这个堆分析器对它显示的数据而不是事实有自己的拙见，尽管其余的 chrome 开发工具都很棒。

基本上我的主干 1page 应用程序在内存中不断增长，即使我正在做所有可能的垃圾收集舞蹈，`JSON.stringify(Obj).length`抛出`action not secure`大多数对象，我如何更容易地追踪那些僵尸然后试错。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T15:14:42.720

你对 Chrome 开发者工具不屑一顾，但据我所知，它们是你得到的最好的。你只需要明智地使用它们。

假设您想测试应用程序中的某些操作是否会泄漏内存。它可能是视图的呈现，或获取一些新数据。让我们称之为**`Action`**.

为了找出保留了多少内存，保留了多少，首先您需要获得一个可测量的基线，并消除噪音。您需要三个步骤来实现这些目标。

1.  **暖身**

    启动您的应用程序（导航到您的网站）。执行**`Action`**。拍摄堆快照。此快照已被丢弃，但它会运行 GC 并为您提供一个全新的状态。热身还确保您不会对可测量的数据产生任何模糊：脚本评估、初始加载资源异步等。

2.  **基线**

    执行**`Action`**三遍。拍摄堆快照。这是我们将比较我们的内存保留和保留的基线。如果执行路径中存在一些小的可变性，我们会执行**`Action`**3 次以获得合理的平均值。**`Action`**确保每次都尝试以完全相同的方式重复。

3.  **测量**

    执行**`Action`**三遍。拍摄堆快照。

现在您将拥有三个快照。第一个将被丢弃，但对我们来说有趣的是**在快照 2 和 3 之间分配**的对象的**摘要**，以及从快照 3 到快照 2 的增量**比较**。您可以从 Profiles 的底部/状态栏中找到这些视图看法。

 ****![在快照 2 和 3 之间分配的对象](../Images/7b08d08dd4f53ba6a7a69730d048bd73.png)

**您在基线**和**测量**快照之间看到的数据是真正的内存配置文件**`Action`**。之后，您只需要知道如何正确解释数据。为此，我推荐[Google 关于 profiler 的文档](https://developers.google.com/chrome-developer-tools/docs/heap-profiling)。

我认为目前不存在更好的工具或方法。如果有的话，我很想听听。****

# wpf - 在 WPF 应用程序中查找所有打开的弹出窗口

> ID：14479177
> 
> 赞同：10
> 
> 时间：2013-01-23T11:58:00.700
> 
> 标签：wpf, popup

WPF 具有 Popup 类，您可以使用它在另一个窗口中打开一个（小）窗口。这例如用于工具提示或组合框。

我需要找到当前在 WPF 窗口中打开的所有这些弹出窗口，以便我可以关闭它们。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-09-08T16:18:59.223

如果有人仍然需要：

```
 public static IEnumerable<Popup> GetOpenPopups()
  {
      return PresentationSource.CurrentSources.OfType<HwndSource>()
          .Select(h => h.RootVisual)
          .OfType<FrameworkElement>()
          .Select(f => f.Parent)
          .OfType<Popup>()
          .Where(p => p.IsOpen);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:33:17.787

这样做的一种方法是导航可视树以查找所有`Popup`对象，如果它们打开则关闭它们

[我的博客上](http://rachel53461.wordpress.com/2011/10/09/navigating-wpfs-visual-tree/)有一些VisualTreeHelpers，它们提供了如何导航 Visual Tree 的示例，尽管它们被设置为仅返回与指定条件匹配的单个对象，而不是所有对象。

您可能需要稍微修改代码以确保它返回所有对象，但我用于返回单个对象的代码如下所示：

```
 /// <summary>
    /// Looks for a child control within a parent by type
    /// </summary>
    public static T FindChild<T>(DependencyObject parent)
        where T : DependencyObject
    {
        // Confirm parent is valid.
        if (parent == null) return null;

        T foundChild = null;

        int childrenCount = VisualTreeHelper.GetChildrenCount(parent);
        for (int i = 0; i < childrenCount; i++)
        {
            var child = VisualTreeHelper.GetChild(parent, i);
            // If the child is not of the request child type child
            T childType = child as T;
            if (childType == null)
            {
                // recursively drill down the tree
                foundChild = FindChild<T>(child);

                // If the child is found, break so we do not overwrite the found child.
                if (foundChild != null) break;
            }
            else
            {
                // child element found.
                foundChild = (T)child;
                break;
            }
        }
        return foundChild;
    } 
```

并且可以这样调用：

```
var popup = MyVisualTreeHelpers.FindChild<Popup>(MyWindow); 
```

# android - 当listview滚动那个时候edittext设置默认值

> ID：14479178
> 
> 赞同：4
> 
> 时间：2013-01-23T11:58:03.353
> 
> 标签：android, android-layout, listview, scrollview

我有带有 edittext 和**-/+**按钮的列表视图。当我单击按钮更改 edittext 值时，例如**increment/decrement**。

当我将值设置为**5**并滚动列表视图时，edittext 将值设置为**默认值，例如 0。**

我正在使用这种方式

```
public View getView(final int position, View convertView,ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View connection;
        final ViewHolder holder;
        connection = new View(context);         
        connection = inflater.inflate(R.layout.list_row_modified, null);
        holder = new ViewHolder();
        holder.up = (Button) connection.findViewById(R.id.btn_plus);
        holder.down = (Button) connection.findViewById(R.id.btn_minus);
        holder.date = (TextView) connection.findViewById(R.id.text_date);

        //onClick with holder.up/holder.down

        connection.setTag(holder);
        return connection;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:12:00.737

您错误地使用了 ViewHolder 模式。因为您有一个带有 EditText 的小列表，所以您甚至不需要它。

正如米洛斯所说，它将回收您的列表项，因此您的值在`getView()`调用时将设置为 0。您必须保留对这些值的一些引用并将它们设置在`getView()`方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:04:53.380

在你的情况下的问题是你的 getView 被称为你打开你的列表视图的每个 tiem （这很好），而且当你向上/向下滚动时。为了减少内存使用，listview 会销毁所有在 listview 可见部分之外的元素，并在您向后滚动时重新创建它们。

因此，为了避免这种情况，您可以使用：

```
if (convertView == null) {
    holder = new ViewHolder();
    holder.up = (Button) connection.findViewById(R.id.btn_plus);
    holder.down = (Button) connection.findViewById(R.id.btn_minus);
    holder.date = (TextView) connection.findViewById(R.id.text_date);  
}

convertView.setTag(holder);
return convertView; 
```

[有关如何在列表视图中创建编辑文本的详细教程，请参阅： http](http://vikaskanani.wordpress.com/2011/07/27/android-focusable-edittext-inside-listview/) ://vikaskanani.wordpress.com/2011/07/27/android-focusable-edittext-inside-listview/

# javascript - 使用 javascript 对视频文件进行反混淆

> ID：14479179
> 
> 赞同：1
> 
> 时间：2013-01-23T11:58:06.257
> 
> 标签：javascript, video, obfuscation, emscripten

我有一个需要在 html5 视频标签 () 上播放的视频（比如 clip.mp4 或 clip.webm） 现在我已经混淆了 clip.mp4 的前几个字节（基本上应用了一个简单的 XOR 函数）。

现在我可以在 Javascript 中去混淆（如在 XOR'ed 字节上应用 XOR）并将剪辑提供给视频标签吗？

JavaScript 当前是否提供了这样做的能力？如果是这样，我该怎么办？为了使其正常工作，我应该遵循哪些一般方向？

我遇到了一个名为[Emscripten](https://github.com/kripken/emscripten/wiki/Tutorial)的跨平台编译器。引用他们的网站：“ *Emscripten 是一个开源的 LLVM 到 JavaScript 编译器。有了它，你可以将 C 和 C++ 代码编译成 JavaScript 并在网络上运行它*”这可以完成这项工作吗？我必须采取哪些步骤才能使其运行？

# sharepoint-2010 - 基于浏览器的 InfoPath 表单作为 InfoPath 填充表单随机打开

> ID：14479180
> 
> 赞同：0
> 
> 时间：2013-01-23T11:58:14.773
> 
> 标签：sharepoint-2010, infopath, infopath2010

我创建了基于 InfoPath 2010 浏览器的表单（带有 SharePoint 2010 的管理员批准表单）。所有功能正常工作。

但是当要创建一个 from 或试图打开一个表单时；随机它作为 InfoPath 填充表单打开。

我是否需要做任何更改才能使此浏览器正常工作以使表单浏览器正确地基于...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:47:17.630

您可以检查文档库设置吗？

请按照以下步骤操作：

1.  创建表单后转到库。
2.  转到库设置。
3.  从那里转到高级库设置。
4.  在“文档库高级设置”页面的“在浏览器中打开文档”部分的“启用浏览器的文档的默认打开行为”下，选中“在浏览器中打开”选项。

我希望这有帮助

# android - 如何在标签栏中传递参数？

> ID：14479182
> 
> 赞同：0
> 
> 时间：2013-01-23T11:58:24.493
> 
> 标签：android

如何使用标签栏传递参数？这是我下面的代码，当我单击任何选项卡栏时，我想在选项卡栏中启动活动时传递参数是传递参数，我该怎么做？

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main2);
        setTabs() ;
    }
    private void setTabs()
    {
        addTab("payments", R.drawable.tab_home, myactivity1.class.class);
        addTab("My Account", R.drawable.tab_home, myactivity2.class);

        addTab("Spend Analyzer", R.drawable.tab_home, myactivity3.classs);
        addTab("Notification", R.drawable.tab_home, myactivity4.class);
        addTab("Help", R.drawable.tab_home, myactivity5.class);
    }

    private void addTab(String labelId, int drawableId, Class<?> c)
    {
        TabHost tabHost = getTabHost();

        Intent intent = new Intent(this, c);
        TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId); 

        View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);
        TextView title = (TextView) tabIndicator.findViewById(R.id.title);
        title.setText(labelId);
        ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
        icon.setImageResource(drawableId);

        spec.setIndicator(tabIndicator);
        spec.setContent(intent);
        tabHost.addTab(spec);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:00:13.520

根据我的想法，您需要这样做

```
TabHost tabHost = getTabHost();

    TabSpec tabSpec1 = tabHost.newTabSpec("TEMP");
    tabSpec1.setIndicator("TEMP", getResources().getDrawable(R.drawable.temperatureicon));
    Intent itab1  = new Intent(this , Temp.class);
    itab1.putExtra("name", value);
    tabSpec1.setContent(itab1);

tabHost.addTab(tabSpec1); 
```

# objective-c - xCode animate View while slowly changing gradient

> ID：14479187
> 
> 赞同：0
> 
> 时间：2013-01-23T11:58:38.230
> 
> 标签：objective-c, animation

I am using block code to create a horizontal progress bar which reflects some data, data could be anything. It just takes a min value, a max value, and a current value which allows me to set up the animation, i.e min value 0, max value 100, currently value 50, the progress bar will fill up by 50%. I have a progress bar container with a view inside it, the view gets stretched while animating.

I have got the animation part working fine using block code, i.e.

```
[UIView animateWithDuration:3.0
                              delay:0.0f
                            options:UIViewAnimationCurveEaseInOut
                         animations:^(void)
         {
             progressView.frame = CGRectMake(progressView.frame.origin.x,progressView.frame.origin.y,iWidth,progressView.frame.size.height);

         }
                         completion:^(BOOL finished)
         {

         }]; 
```

What I want to do is while this is animating, to slowly change the gradient by inserting sublayers, quick example

```
 (This method will be called on a timer, the idea is to slowly change the gradient
    after 0.5 seconds for example)
    CAGradientLayer *testLayer = [BackgroundLayer customGradient:iRedValue :iGreenValue :0];
    testLayer.frame = progressView.bounds;
    [progressView.layer insertSublayer:testLayer atIndex:1]; 
```

(The background layer is just a custom class I have which allows users to create a custom gradient colour using RGB values). The idea is, I would keep inserting sub layers slowly changing the gradient as the progressView finishes animating. The idea is that the view starts off one colour, say green, and the further along the bar animates, it changes colour to amber, then red if it reaches maximum.

When I add the sublayer the animation just jumps to the end, because testLayer takes on the width of the progressView after it is finished animating, and adds it. I want this to happen slowly over the course of the animation.

Any ideas on how I would go about doing this?

Thanks in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:30:39.280

Small example of Animationg `colors` of a `CAGradientLayer`

```
@interface GradientAnimationView : UIView

@end

@implementation GradientAnimationView {
    NSArray *_colorsFirst;
    NSArray *_colorsSecond;
    NSArray *_currentColor;
}

+ (Class)layerClass {
    return [CAGradientLayer class];
}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        CAGradientLayer *layer = (CAGradientLayer *)[self layer];
        _colorsFirst = @[(__bridge id)[[UIColor blueColor] CGColor], (__bridge id)[[UIColor greenColor] CGColor]];
        _colorsSecond = @[(__bridge id)[[UIColor redColor] CGColor], (__bridge id)[[UIColor yellowColor] CGColor]];
        _currentColor = _colorsFirst;
        [layer setColors:_colorsFirst];
    }
    return self;
}

- (void)animateColors {
    if (_currentColor == _colorsSecond) {
        _currentColor = _colorsFirst;
    } else {
        _currentColor = _colorsSecond;
    }

    CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"colors"];
    anim.fromValue = [[self layer] valueForKey:@"colors"];
    anim.toValue = _currentColor;
    anim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    anim.duration = 0.4;
    anim.delegate = self;

    [self.layer addAnimation:anim forKey:@"colors"];
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    [self animateColors];
}

- (void)animationDidStop:(CAAnimation *)theAnimation finished:(BOOL)flag {
    CAGradientLayer *layer = (CAGradientLayer *)[self layer];
    [layer setColors:_currentColor];
}

@end 
```

# java - 从 GAE 队列发送 HTTP 请求

> ID：14479189
> 
> 赞同：0
> 
> 时间：2013-01-23T11:58:39.400
> 
> 标签：java, google-app-engine

我正在尝试使用两种不同的方法从 Google App Engine 队列发送 HTTP 请求，但没有成功。在这两种情况下，我都会遇到 I/O 异常。

第一次尝试：

```
 String parameters =  "....";
    URL url = new URL(SOME_URL"?"+parameters);
    HttpURLConnection connection = (HttpURLConnection) url.openConnection();
    connection.setRequestMethod("GET");             
    BufferedReader reader = new BufferedReader(new  
                                       InputStreamReader(url.openStream()));
    String line;
    StringBuilder builder = new StringBuilder();
    while ((line = reader.readLine()) != null) {
          builder.append(line);
    }
    reader.close(); 
```

在第二个我简单地使用了 IKay Lan 代码：http: [//ikaisays.com/2010/06/29/using-asynchronous-urlfetch-on-java-app-engine/](http://ikaisays.com/2010/06/29/using-asynchronous-urlfetch-on-java-app-engine/)

从 Queue 发出 HTTP 调用是否有任何限制？

顺便说一句，我使用了不同域的不同 URL，所有尝试都失败了。

更新：当我删除请求参数时，它似乎工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:37:07.220

显然参数值没有被编码。

为了解决这个问题，我使用 URLEncoder.encode 对每个参数值进行了编码

现在似乎工作正常。

# php - 它无法识别 php 变量，因为 echo 上没有出现任何内容

> ID：14479193
> 
> 赞同：1
> 
> 时间：2013-01-23T11:58:54.133
> 
> 标签：php, mysqli, bind

在我下面的代码中，它无法识别该变量`$userid`，该变量确定了登录教师的 ID，但在 mysqli 代码中，它无法确定`$userid`我何时回显它。但它确实知道用户是通过它的`$userid`. 所以我的问题是，在 mysqli 为什么找不到`$userid`？请查看 mysqli 设置中的评论`bind_param()`，这就是问题所在。

以下是php和mysqli的代码：

让我声明 member.php 是包含以下`$userid`信息的脚本：

```
 <?php
     session_start();

        include('member.php');

    ...

        function PickSession()
        {

            //Get data from database
            $sessionquery = "
                SELECT s.SessionId, SessionName, s.TeacherId
                FROM Session s
                INNER JOIN Session_Complete sc ON sc.SessionId = s.SessionId
                WHERE
                (ModuleId = ? AND Complete = ? AND s.TeacherId = ?)
                ORDER BY SessionName 
                ";
            $complete = 1;

            global $mysqli;
            $sessionqrystmt=$mysqli->prepare($sessionquery);
            // You only need to call bind_param once
            $sessionqrystmt->bind_param("iii",$moduleId, $complete, $userid);//it doesn't recognse $userid
            // get result and assign variables (prefix with db)
            $sessionqrystmt->execute(); 
            $sessionqrystmt->bind_result($dbSessionId,$dbSessionName,$dbTeacherId);
            $sessionqrystmt->store_result();
            $sessionnum = $sessionqrystmt->num_rows();  

echo $userid; //nothing displayed in this echo
    ...

            if ((isset($username)) && (isset($userid))){ //user is successfully logged in

            include('teachername.php');

    ...

        <?php

        ShowAssessment(); // Show information

            }else{ 

    echo "Please Login to Access this Page | <a href='./teacherlogin.php'>Login</a>";

    }

            ?> 
```

member.php 脚本：

```
if (isset($_SESSION['teacherid'])) {

      $userid = $_SESSION['teacherid'];

  }

if (isset($_SESSION['teacherusername'])) {

      $username = $_SESSION['teacherusername'];

  }

        ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:03:06.847

您尚未初始化`$userid`变量，您必须在查询中设置绑定变量的值，否则它将`NULL`为该变量取值。

```
$userid = "value";
$sessionqrystmt->bind_param("iii",$moduleId, $complete, $userid); 
```

该`$userid`变量在 中不可访问`PickSession()`。因此，建议要么`$userid`设为全局，要么将其作为函数中的参数传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:02:40.480

可能是因为`session_start()`缺少

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:03:59.900

您无权访问`$userid`您的功能。你可以做的事情：

声明`$userid`为全局变量（不推荐）

```
function PickSession() {
    global $userid;
    // and the rest of the function here
} 
```

`$userid`作为参数传递给函数`PickSession`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T12:05:49.353

在你的`PickSession`函数中，`$userid`没有值，因为你没有定义它，你应该在调用它时将变量传递给函数，例如；

```
function PickSession($userid)
{
    ...
}

// Now call PickSession with the variable assigned:
PickSession($userid); 
```

# mysql - mysql-慢查询可视化

> ID：14479199
> 
> 赞同：4
> 
> 时间：2013-01-23T11:59:11.470
> 
> 标签：mysql, logfile

我收到了一个`mysqld-slow-queries.log`来自我的**网络托管**服务提供商的文件。我需要分析这个文件，因为可能有一些函数会在服务器上造成巨大的负载。

但是，当我打开带有`Notepad++`或类似名称的文件时，我看到**14000 行**包含信息，没有任何结构。

是否有可以导入**.log**文件并可视化报告的程序？基本上我希望能够对`Query_time`值进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:18:05.500

这是我用来帮助我整理它们的点头脚本。更改顶部的文件名并执行它。以 CSV 格式输出详细信息，以便您轻松操作它们（注意，删除 CSV 文件的第 2 行，因为它是垃圾）。请注意，我无法确认您拥有的文件格式是否完全相同，但希望您可以使用它来整理出您需要的文件。

```
<?php
$handle = fopen('C:\\somelocation\\mysql-slow.log', "rb");
$fp = fopen('someoutputfile.csv', 'w');
$inline = '';
$inline = fgets($handle, 8192);
$OutLine = array();
$OutLine['Time'] = 'Time';
$OutLine['Timestamp'] = 'Timestamp';
$OutLine['User'] = 'User';
$OutLine['Query_time'] = 'Query_time';
$OutLine['Lock_time'] = 'Lock_time';
$OutLine['Rows_sent'] = 'Rows_sent';
$OutLine['Rows_examined'] = 'Rows_examined';
$OutLine['Database'] = 'Database';
$OutLine['SqlOut'] = 'SqlOut';
WriteOut($fp, $OutLine);
$OutLine = array();
$OutLine['Time'] = '';
$OutLine['Timestamp'] = '';
$OutLine['User'] = '';
$OutLine['Query_time'] = '';
$OutLine['Lock_time'] = '';
$OutLine['Rows_sent'] = '';
$OutLine['Rows_examined'] = '';
$OutLine['Database'] = '';
$OutLine['SqlOut'] = '';
$PossibleUse = true;
$TimeTriggeredOut = true;
$CurrentTime = '';
$CurrentDatabase = '';

while (!feof($handle)) 
{
    switch (true)
    {
        case substr($inline, 0, 8) == '# Time: ' :
            WriteOut($fp, $OutLine);
            $PossibleUse = true;
            $Timings = explode(': ', $inline);
            $CurrentTime = $Timings[1];
            $OutLine = array();
            $OutLine['Time'] = $CurrentTime;
            $OutLine['Timestamp'] = '';
            $OutLine['User'] = '';
            $OutLine['Query_time'] = '';
            $OutLine['Lock_time'] = '';
            $OutLine['Rows_sent'] = '';
            $OutLine['Rows_examined'] = '';
            $OutLine['Database'] = $CurrentDatabase;
            $OutLine['SqlOut'] = '';
            $TimeTriggeredOut = true;
            break;
        case substr($inline, 0, 6) == '# User' :
            if (!$TimeTriggeredOut)
            {
                WriteOut($fp, $OutLine);
                $PossibleUse = true;
                $OutLine = array();
                $OutLine['Time'] = $CurrentTime;
                $OutLine['Timestamp'] = '';
                $OutLine['User'] = '';
                $OutLine['Query_time'] = '';
                $OutLine['Lock_time'] = '';
                $OutLine['Rows_sent'] = '';
                $OutLine['Rows_examined'] = '';
                $OutLine['Database'] = $CurrentDatabase;
                $OutLine['SqlOut'] = '';
            }
            $OutLine['User'] = $inline;
            $TimeTriggeredOut = false;
            break;
        case substr($inline, 0, 12) == '# Query_time' :
            $Timings = explode(' ', $inline);
            //print_r($Timings);
            $OutLine['Query_time'] = $Timings[2];
            $OutLine['Lock_time'] = $Timings[5];
            $OutLine['Rows_sent'] = $Timings[7];
            $OutLine['Rows_examined'] = $Timings[10];
            $PossibleUse = true;
            break;
        case substr($inline, 0, 14) == 'SET timestamp=' :
            $Timings = explode('=', $inline);
            $OutLine['Timestamp'] = $Timings[1];
            $PossibleUse = true;
            break;
        case $PossibleUse AND substr($inline, 0, 4) == 'use ' :
            $Timings = explode(' ', $inline);
            $CurrentDatabase = $Timings[1];
            $OutLine['Database'] = $CurrentDatabase;
            $PossibleUse = false;
            break;
        default;
            $OutLine['SqlOut'] .= $inline;
    }
    $inline = fgets($handle, 8192);
}
fclose($fp);
fclose($handle);

function WriteOut($fp, $OutLine)
{
    foreach($OutLine as &$aOutLine)
    {
        $aOutLine = str_replace("\n", " ", $aOutLine);
        $aOutLine = str_replace("\r", " ", $aOutLine);
        $aOutLine = str_replace("\t", " ", $aOutLine);
    }
    fputcsv($fp, $OutLine);
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T09:11:50.300

[https://github.com/LeeKemp/mysql-slow-query-log-parser/](https://github.com/LeeKemp/mysql-slow-query-log-parser/)

一个 ruby​​ 脚本，它以如下格式提供清晰的输出：

```
################################################################################
1973 Queries
user: XXX[XXX]
url: localhost
ip: []
Taking 2 to 19354 seconds to complete
Locking for 0 to 210 seconds
Average time: 120, Median time 4
Average lock: 0, Median lock 0

SET timestamp=XXX;
SELECT tXXX.id AS idXXX...

################################################################################
2233 Queries
user: ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:47:57.553

任何查询分析工具都需要解决两个问题。第一个（Kickstart 的解决方案似乎没有这样做）是从查询中去除参数——相同的查询将运行很多次，但参数不同。第二个是汇总数据并对其进行报告。

MySQL 附带了一个工具，它可以做到这两个 - [mysqldumpslow](http://dev.mysql.com/doc/refman/5.1/en/mysqldumpslow.html)。或者你可以使用[这个独立](http://www.retards.org/projects/mysql/)的脚本。

您应该优先考虑的查询是频率和持续时间乘积最高的查询 - 持续时间是执行时间还是锁定时间或两者的组合取决于您的数据库当前的行为方式。（但作为一个粗略的经验法则，对于 ISAM 表，我会使用 (frequency^1.5) * ((lock time ^ 1.5)+query time) 和 Innodb 的简单产品）。

执着于执行时间最长的特定查询可能会在这些查询不常见时给出一个非常误导性的画面（尽管它们可能是不支持并发的引擎的一个特殊问题）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T12:55:13.933

还有[mysqlsla](http://hackmysql.com/mysqlsla)（mysql慢查询日志分析器）

> mysqlsla 解析、过滤、分析和排序 MySQL 慢、一般、二进制和微慢补丁日志，以便创建查询及其元属性值的可定制报告。

# c# - 作曲家和自定义控件

> ID：14479200
> 
> 赞同：0
> 
> 时间：2013-01-23T11:59:14.053
> 
> 标签：c#, episerver

如果我需要在作曲家块内的自定义控件中使用 PageLink 到当前页面，如何获取它。如果我使用 CurrentPage（PropertyDataControl 的成员，它是我的自定义控件的基类），我会得到 PageData 引用作曲家元素，而不是页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:30:27.387

好的，我设法找到了解决方案。万一有人面临同样的问题，这里是要走的路：

```
protected PageData CurrentParentPage
        {
            get
            {
                var currentParentPage = PageReference.ParseUrl(Page.Request.UrlReferrer.AbsoluteUri);
                if(!PageReference.IsNullOrEmpty(currentParentPage))
                {
                    return currentParentPage.GetPageFromReference();
                }
                return null;
            }
        } 
```

这应该放在控制类中

# ipad - ipad和xampp连接

> ID：14479202
> 
> 赞同：0
> 
> 时间：2013-01-23T11:59:36.060
> 
> 标签：ipad, xampp

我在连接到 ipad 上的本地主机时遇到问题。主要问题是它有时连接，有时不连接。我的计算机是无线网络的一部分，它只是出现此问题的地方。

我尝试关闭 win 7 防火墙、avira 防病毒软件、spybot s&d、dropbox、gtalk 等，但它仍然返回“无法连接到页面”错误。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:02:19.663

你试过IP（http://192.xxx.x.xxx）而不是本地主机吗？

# sql - 在同一个表sql查询中加入2行

> ID：14479213
> 
> 赞同：0
> 
> 时间：2013-01-23T12:00:00.207
> 
> 标签：sql, sql-server, join

您好，有一个查询会产生以下结果吗？

```
 name                       count    
  19 - Evening ACL           1130
  21 - 14 - 16 Provision     585
  81 - HE FT                 458
  85 - HE PT                 233 
```

我怎样才能让查询加入包含'HE'的两行。我追求的结果是：

```
 name                    count
  19 - Evening ACL        1130
  21 - 14 - 16 Provision  585
  HE                      691 
```

这是我正在使用的查询

```
SELECT 
vc.vc_name,
COUNT(DISTINCT s.s_studentreference) AS 'Count'

FROM

student s
INNER JOIN person p ON p.p_id = s.s_id
INNER JOIN moduleenrolment e ON e.e_student = p.p_id
INNER JOIN module m ON m.m_id = e.e_module
LEFT JOIN valid_codes vc ON vc.vc_code = m.m_mode AND vc.vc_domain = 'moa'

WHERE

LEFT(m.m_reference, 2) IN ('12')

GROUP BY

m.m_mode,
vc.vc_name

ORDER BY

m.m_mode,
vc.vc_name 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:19:25.723

试试这个（假设`'HE'`两边都有空格）；

```
select name, count
from yourTable where charindex(' he ',name)=0
union
select 'HE' name, sum(count) as count
from yourTable where charindex(' he ',name)>0 
```

另一种方法是；

```
select A.name, sum(A.count) as count
from (
    select case charindex(' he ',name) 
           when 0 then name else 'HE' end name, count
    from yourTable
) A
group by A.name
order by A.name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:53:15.583

原始结果集中的列“名称”只是一列，还是通过连接数据构建的计算列？

使用武力（就像绝地武士一样），我会说它似乎将数字与描述和字母 PT、FT 连接起来......

如果是这种情况..您必须在组子句中确定包含 HE 描述的两行中有什么不同...我敢打赌，在第一个结果中给出字母“P”和“F”的列在group 子句......所以你应该通过......将它们从组中切断......看看如何连接它们......（在 mySQL 中有命令 GROUP_CONCAT（），但在 sqlserver 中我想仍然没有本机函数来做到这一点，但有很多技术可以得到这个结果）

但这样你就会得到这条线

> 81 - 85 他 PFT 691

如果您发布第一个结果集的查询将有助于更好地理解您的问题以提供解决方案

无论如何..如果不是这种情况，我不明白为什么您应该将这两行合二为一..但唯一的解决方案是确定哪些名称具有像 Kaf 解决方案一样的“HE”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:16:41.317

您需要创建另一个列，一个计算列，其中包含您要加入的信息 - 即在单独的列中提取该信息（样本的 HE）。

如果您有很多行，请考虑创建一个视图并在该列上添加一个索引（从而实现视图）以加快连接速度。

# javafx-2 - JavaFX 2.2 网页视图

> ID：14479218
> 
> 赞同：1
> 
> 时间：2013-01-23T12:00:14.500
> 
> 标签：javafx-2

我正在使用 Javafx 和 FXML 。我已经创建了我的表单。在我的一个页面中，我在左窗格 (Split Pane) 中有一个树，而右侧的痛苦是右侧锚窗格内的 Web 视图。

当我在树 (treeItem) 上选择一个节点时，webview 将相应地更改为在树视图中选择的相应站点。

当我将它作为应用程序运行时，它会起作用（就像一个魅力）。

但是，在**浏览器** （即 chrome、firefox 和 safari(mac)）中查看此内容时，我看不到 web 视图，它保持空白。即 UI 将加载并且树将在那里，但正确的 jand pain 永远不会显示嵌入的视图。

当我作为 webstart 运行时，我看到了正确的视图。嵌入到 Web 视图中的网页有一个登录，当我尝试登录时，网页闪烁，比如刷新并且登录表单为空白，我必须再次输入凭据。

不知道出了什么问题或如何调试浏览器/webstart 端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T20:15:36.850

> 在浏览器（即 chrome、firefox 和 safari(mac)）中查看此内容时，我看不到 web 视图，它保持空白。即 UI 将加载并且树将在那里，但正确的 jand pain 永远不会显示嵌入的视图。

如果您还没有这样做，您将需要[签署您的应用程序](http://docs.oracle.com/javafx/2/deployment/packaging.htm#BABJGFBH)以允许它在[浏览器嵌入式 Java 应用程序沙箱](http://docs.oracle.com/javafx/2/deployment/deploy_overview.htm#CEGJGHDA)之外运行，以便 webview 的网络层有权访问外部位置。

还要监视 webview loadworker 的异常属性以查看是否遇到异常或 FAILED 状态：

```
Worker worker = webview.getEngine().getLoadWorker();
worker.stateProperty().addListener(new ChangeListener<Worker.State>() {
  @Override public void changed(ObservableValue<? extends Worker.State> observableValue, Worker.State oldState, Worker.State newState) {
    System.out.println("Browser state change: " + newState);
  }
});
worker.exceptionProperty().addListener(new ChangeListener<Throwable>() {
  @Override public void changed(ObservableValue<? extends Throwable> observableValue, Throwable oldThrowable, Throwable newThrowable) {
    System.out.println("Browser encountered a load exception: " + newThrowable);
  }
}); 
```

> 不知道出了什么问题或如何调试浏览器/webstart 端。

有一篇关于[webstart/浏览器嵌入式应用程序调试步骤](http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-Desktop/html/plugin.html)的优秀 Oracle 文章。该文章提供了许多指针，例如如何设置调试和跟踪级别等。

# java - 不确定在 JAVA 中向 JButton 添加图标

> ID：14479220
> 
> 赞同：2
> 
> 时间：2013-01-23T12:00:19.617
> 
> 标签：java, swing, icons, jbutton, imageicon

我正在尝试制作棋盘，但我似乎无法弄清楚将代码放在哪里以将棋子图标添加到按钮。事实上，我不确定它是正确使用代码还是在错误的地方。

到目前为止，我的代码如下所示：

```
package gui;

import java.awt.Color;

import javax.swing.ImageIcon;
import javax.swing.JButton;

public class Square extends JButton implements Config {

    public Square(int n) {
        new ImageIcon("pawn.png");
        setBackground(calcColor(n));
     }

    Color calcColor(int n) {
        boolean everysecondSquare = (n % 2==0);
        boolean everysecondRow = ((n / ROWS) % 2 == 0);
        return (everysecondSquare != everysecondRow?P1Color:P2Color);
    }

    public ChessBoard ChessBoard;
} 
```

我很确定它将图标添加到与定义正方形背景颜色的位置相同的位置，但显然它不起作用。显然，我对 java 编码很陌生。

我真的搞砸了吗？非常感谢所有反馈。如果需要有关代码的更多信息，请告诉我，我会尽快添加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:05:12.927

您可以将带有构造函数的 Icon 对象传递给 Button 或使用按钮的 setIcon 方法。

```
JButton b = new Button(myIconObject)

myButtonObject.setIcon(myIconObject) 
```

看看这里的文档： [http ://docs.oracle.com/javase/7/docs/api/javax/swing/JButton.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/JButton.html)

编辑：

在您的情况下，您可以将构造函数的第一行编辑为

```
public Square(int n) {
    setIcon(new ImageIcon("pawn.png"));
    setBackground(calcColor(n));
} 
```

**但这**意味着创建的每个方块都会有一个棋子图标。您最好将其移出构造函数并执行类似的操作

```
Square s = new Square(n);
/* And then somewhere more appropriate ...*/
s.setIcon(new ImageIcon("pawn")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:03:12.530

试试这个。您需要实际设置按钮的图标。

```
public Square(int n) {
setIcon(new ImageIcon("pawn.png"));
setBackground(calcColor(n));
} 
```

# ruby-on-rails-3 - 如何使用 ActiveAdmin 建立一个名为 Admin 的模型？

> ID：14479223
> 
> 赞同：1
> 
> 时间：2013-01-23T12:00:24.307
> 
> 标签：ruby-on-rails-3, activeadmin

我尝试将 ActiveAdmin 安装到已经具有 Admin 模型*的 Rails 应用程序中，并且一切正常，直到我尝试运行需要访问 Admin 类的任何代码（例如运行规范或运行 Rails 服务器）——然后它失败了，好像问题出在我的管理类上：

```
foo/app/models/admin.rb:1:in `<top (required)>': Admin is not a class (TypeError)
from bar/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require' 
```

*在我的情况下，我使用了 --skip-users 以便我可以重用我的 Admin 模型，但无论你是否这样做，都会发生这种情况。如果您这样做，也会发生这种情况：

```
rails generate active_admin:install Admin 
```

如何让 ActiveAdmin 与名为 Admin 的模型（或其他类）共存

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T12:00:24.307

我花了一些时间才解决这个问题（在我之前的项目中我放弃并只是重命名了模型）。

已经提出了一些补丁，但实际上有一个非常好的配置选项可以解决这个问题：

编辑初始`config/initializers/active_admin.rb`值设定项，使 default_namespace 不同（您可以使用 跳过 default_namespace `config.default_namespace = false`，但我没有尝试过）。

我为此选择了 admin_ui：

```
 config.default_namespace = :admin_ui 
```

这可能有更微妙的地方，所以你可以（如果你愿意）保留 /admin/ 路由而不是拥有 admin_ui 但这对我来说已经足够了——官方文档位于[http://activeadmin.info/docs /1-general-configuration.html#namespaces](http://activeadmin.info/docs/1-general-configuration.html#namespaces)，但不要提及更改命名空间的原因。

# python - Django-haystack：添加自动完成所需的“content_auto”行后，rebuild_index 失败（haystack.exceptions.SearchFieldError）

> ID：14479224
> 
> 赞同：7
> 
> 时间：2013-01-23T12:00:25.443
> 
> 标签：python, autocomplete, django-haystack, whoosh

我正在尝试为仅搜索单词的一部分实现产生结果（`autocomplete`如果我没记错的话，根据 Haystack 文档调用）。

**例子：**

搜索`"gol"`

结果`"goldfish"`

**我尝试了什么？**

我按照[文档步骤 1 中的](http://django-haystack.readthedocs.org/en/v1.2.7/autocomplete.html#step-1-setup-the-data)要求做了，我在我的 Index 类中添加了以下行：

```
content_auto = indexes.EdgeNgramField(model_attr='content') 
```

然后做了`python manage.py rebuild_index`。

*然而，重建索引产生了一个错误* `haystack.exceptions.SearchFieldError: The model '<Person: Reginald>' does not have a model_attr 'content'.`，因为`Reginald`它是我的索引表中的第一个条目并且`Person`是我索引的模型。

现在确实我的模型没有一个名为的字段，`content`但正如文档中所示，它不需要有这样的字段。

我正在使用`Whoosh 2.4.1`,`Django-haystack 1.2.7`和`Django 1.4`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-05T19:01:52.647

所以这就是我现在解决这个问题的方法。

代替：

`content_auto = indexes.EdgeNgramField(model_attr='content')`

采用：

`content_auto = indexes.EdgeNgramField(use_template=True)`

然后你可以为这些创建一个模板。例如，我的应用程序中有一个`ItemIndex`，`catalog`我想在其中搜索`name`和`description`. 因此，我在`templates/search/indexes/catalog/`called中创建了一个文件`item_content_auto.txt`，其中包含以下内容：

```
{{ object.name }}
{{ object.description }} 
```

这似乎按照我的意愿运作。比`'content'`工作时更乏味，但应该足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-13T09:51:28.840

这是一个更新的示例供参考（请参阅[此处](https://stackoverflow.com/q/26570873/6748184 "这里")）：

```
#search_indexes.py
class Book(indexes.SearchIndex, indexes.Indexable):
    text = indexes.EdgeNgramField(document=True, use_template=True)

    def get_model(self):
        return Book

#template
{{object.name}}

#query
SearchQuerySet().autocomplete(text=my_query) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T14:01:03.870

model_attr 用于引用现有模型属性、可调用或关系：

[http://django-haystack.readthedocs.org/en/v1.2.7/searchfield_api.html#SearchField.model_attr](http://django-haystack.readthedocs.org/en/v1.2.7/searchfield_api.html#SearchField.model_attr) [http://django-haystack.readthedocs.org/en/v2.1.0/searchfield_api.html#model-attr](http://django-haystack.readthedocs.org/en/v2.1.0/searchfield_api.html#model-attr)

# jquery - 将 javascript 代码隐藏到 jQuery

> ID：14479228
> 
> 赞同：-2
> 
> 时间：2013-01-23T12:00:29.467
> 
> 标签：jquery

我想将一些 javascript 代码转换为 jQuery。任何人都可以帮助我更好的方法。这是我的代码

```
var temp = jQuery(element.nodeName);
temp.innerHTML = "test";
temp = element.appendChild(temp);
var lineHeight = temp.clientHeight;
element.removeChild(temp);
return lineHeight; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:02:54.903

给你...无论如何你应该搜索...

```
var temp = jQuery(element.nodeName);
temp.html("test");
temp = element.append(temp);
var lineHeight = temp.css("line-height");
element.find(temp).remove();
return lineHeight; 
```

# joomla - 每个用户对 joomla 中资产表的查询太多

> ID：14479230
> 
> 赞同：0
> 
> 时间：2013-01-23T12:00:34.867
> 
> 标签：joomla, query-optimization

我的网站对数据库生成大量查询，每个用户生成 6 个查询。我试图找出它的来源，但我的知识不足以找到。如果有人可以帮助我如何完善该查询的来源？

我用了：

*   Joomla 2.5.8
*   主要组件：CB、Kunena、SH404SEF、K2、Komento、UddeIM PMS
*   主要模块：加维克新闻PRO4
*   阻止垃圾邮件 IP
*   阻止机器人

为每个用户生成的查询：

```
SELECT *
FROM `_users`
WHERE `id` = 15

SELECT `g`.`id`,`g`.`title`
FROM `_usergroups` AS g
INNER JOIN `_user_usergroup_map` AS m ON m.group_id = g.id
WHERE `m`.`user_id` = 15

SELECT b.id
FROM _user_usergroup_map AS map
LEFT JOIN _usergroups AS a ON a.id = map.group_id
LEFT JOIN _usergroups AS b ON b.lft <= a.lft
                           AND b.rgt >= a.rgt
WHERE map.user_id = 15

SELECT a.rules
FROM _assets AS a
WHERE (a.id = 1)
GROUP BY a.id, a.rules, a.lft

SELECT id
FROM _assets
WHERE parent_id = 0

SELECT b.rules
FROM _assets AS a
LEFT JOIN _assets AS b ON b.lft <= a.lft
                       AND b.rgt >= a.rgt
WHERE (a.id = 1 OR a.parent_id = 0)
GROUP BY b.id, b.rules, b.lft
ORDER BY b.lft 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:06:43.070

实际上，我们只是修复了规则字段中生成过多查询的错误。它将在下周发布的 3.0.4 中修复，并且每当另一个 2.5 版本发布时。在此期间，您可以自己修复它。

[https://github.com/joomla/joomla-platform/pull/1792](https://github.com/joomla/joomla-platform/pull/1792)

但这不是你要问的。查询的数量并不是真正的问题（这是完全合理的），问题是它们有多快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:04:02.667

当然，每次使用都会有相当数量的查询，因为您正在使用诸如 CB 和 Kunena 之类的扩展，其中包括针对每个用户的查询。除非您从主机收到消息说正在使用太多内存或流量过多，否则应该没问题。

Joomla 是一个 CMS，因此当有相当数量的用户时，需要预料到这些事情。

# css - CSS中的多个类+ ID是否相同？

> ID：14479237
> 
> 赞同：1
> 
> 时间：2013-01-23T12:01:04.183
> 
> 标签：css

你知道在 Java/PHP 中你可以做这样的事情：

```
if (c.bigX == 1 || c.smallX == 2 || c.mediumX == 6) {
something here
} 
```

我怎样才能用 CSS 做到这一点？

我有 5 个班级，我希望他们做同样的事情。而不是制作很多线条。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T12:02:27.573

像这样：

`.class1, .class2, .class3 {}`等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:05:04.423

```
.class1, .class2, .class3, .class4, .class5 {
  property:value;
} 
```

这将有助于

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:04:28.247

在选择器中使用逗号：

```
.class1, .class2, .class3 {} 
```

请记住，此类列表中的每个子句本身就是一个完整的选择器；那是

```
div .class1, .class2 {} 
```

匹配s 的`class1`后代`div`；和所有`.class2`元素。如果你想要s`class1`的`class2`后代`div`，你需要：

```
div .class1, div .class2 {} 
```

# sql - 如何使用rails 3在多对多表中进行搜索

> ID：14479238
> 
> 赞同：1
> 
> 时间：2013-01-23T12:01:16.837
> 
> 标签：sql, ruby-on-rails, search, many-to-many

我有三个表格，其中包含模具（模具）的详细信息及其通过流派表格链接在一起的图案：

```
Mould table
id : integer
name : string

Pattern table
id : integer
name : string

genres table
id : integer
mould_id :integer
pattern_id : integer 
```

我在表格中的数据如下

```
Mould table
ID          Name
1           A1
2           A2
3           A3
53          A4
54          A5
197         A6
198         A7
1204        A8
1205        A9

Pattern Table

ID         Name
1          Running
2          Scroll

Genres Table

ID     mould_id  pattern_id
1       1           1
2       2           1
3       3           1
4       53          1
5       53          2
6       54          1
7       197         2
8       198         1
9       1204        2
10      1205        1 
```

根据我的计算，Molds 53、197 和 1204 都有一个 Scroll 模式，所以我应该能够编写以下 SQL 来给出它

```
SELECT m.id   FROM moulds m INNER JOIN genres g
ON m.id = g.mould_id INNER JOIN patterns p
ON g.pattern_id = p.id  
WHERE p.id = 2     
GROUP BY m.id    
HAVING COUNT(*) >= 1 
```

但它只返回 197 所以那里有问题（或我的数据）

然后将它转换为 Rails 我将它包装在一个 find_by_sql 中，它给出了相同的结果（这是有道理的）

有人可以帮助使用 SQL 或建议一种更好的 Rails 方式来进行此类查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:44:20.093

我已经测试了您上面的模型和数据，我得到了您期望的结果（即名称为“A4”、“A6”和“A8”的三个模具）。所以我怀疑你的数据有问题。

除此之外，我建议使用 Rails[查询方法](http://guides.rubyonrails.org/active_record_querying.html)来获取所需的数据，而不是求助于 SQL。例如，这个：

```
Mould.select('moulds.id')\
     .joins(:patterns)\
     .where('patterns.id' => 2)\
     .group('moulds.id')\
     .having('COUNT(*) >= ?', 1) 
```

将生成此 SQL：

```
SELECT moulds.id FROM "moulds"
INNER JOIN "genres" ON "genres"."mould_id" = "moulds"."id"
INNER JOIN "patterns" ON "patterns"."id" = "genres"."pattern_id"
WHERE "patterns"."id" = 2
GROUP BY moulds.id
HAVING COUNT(*) >= 1 
```

这与您拥有的 SQL 几乎相同，并产生相同的结果（同样，正确的结果具有三个结果）。

请注意，`INNER JOIN genres g`您的 SQL 部分在这里没有明确提及。只要您在和`through`上定义了关联，这就会起作用：`Mould``Pattern`

```
class Mould < ActiveRecord::Base
  has_many :genres
  has_many :patterns, :through => :genres
  #...
end

class Pattern < ActiveRecord::Base
  has_many :genres
  has_many :moulds, :through => :genres
  #...
end 
```

由于您告诉 Rails`Mould`和`Pattern`通过`genres`表关联，它知道如何构建正确的 SQL 查询将它们连接在一起。

希望有帮助。

# spring - 如果我在构建后的类中调用方法，则不注入spring bean

> ID：14479240
> 
> 赞同：0
> 
> 时间：2013-01-23T12:01:23.840
> 
> 标签：spring, jsf-2, dependency-injection, postconstruct

我正在对我的 jsf 托管 bean 属性进行 spring bean 注入，因此出现上述错误。以下是完整的堆栈跟踪：

```
 SEVERE: Error Rendering View[/sample.xhtml]
 javax.faces.FacesException: Could not retrieve value of component with path : {Component-Path : [Class: javax.faces.component.UIViewRoot,ViewId: /sample.xhtml][Class: javax.faces.component.html.HtmlForm,Id: j_id1848100722_6e27c746][Class: javax.faces.component.html.HtmlBody,Id: j_id1848100722_6e27c740][Class: javax.faces.component.html.HtmlInputText,Id: j_id1848100722_6e27c7f4]}
at org.apache.myfaces.shared_impl.renderkit.RendererUtils.getValue(RendererUtils.java:347)
at org.apache.myfaces.shared_impl.renderkit.RendererUtils.getStringValue(RendererUtils.java:291)
at org.apache.myfaces.shared_impl.renderkit.html.HtmlTextRendererBase.renderInputBegin(HtmlTextRendererBase.java:169)
at org.apache.myfaces.shared_impl.renderkit.html.HtmlTextRendererBase.renderInput(HtmlTextRendererBase.java:158)
at org.apache.myfaces.shared_impl.renderkit.html.HtmlTextRendererBase.encodeEnd(HtmlTextRendererBase.java:75)
at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:519)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:618)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:614)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:614)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:614)
at org.apache.myfaces.view.facelets.FaceletViewDeclarationLanguage.renderView(FaceletViewDeclarationLanguage.java:1159)
at org.apache.myfaces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:263)
at org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:85)
at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:239)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:191)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)
  Caused by: javax.faces.FacesException: java.lang.reflect.InvocationTargetException
at org.apache.myfaces.config.ManagedBeanBuilder.buildManagedBean(ManagedBeanBuilder.java:228)
at org.apache.myfaces.el.unified.resolver.ManagedBeanResolver.createManagedBean(ManagedBeanResolver.java:303)
at org.apache.myfaces.el.unified.resolver.ManagedBeanResolver.getValue(ManagedBeanResolver.java:266)
at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:67)
at org.apache.myfaces.el.unified.resolver.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:142)
at org.apache.myfaces.el.VariableResolverImpl.resolveVariable(VariableResolverImpl.java:65)
at org.apache.myfaces.el.convert.VariableResolverToELResolver.getValue(VariableResolverToELResolver.java:96)
at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:67)
at org.apache.myfaces.el.unified.resolver.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:142)
at org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:72)
at org.apache.el.parser.AstValue.getValue(AstValue.java:147)
at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
at org.apache.myfaces.view.facelets.el.TagValueExpression.getValue(TagValueExpression.java:85)
at javax.faces.component._DeltaStateHelper.eval(_DeltaStateHelper.java:243)
at javax.faces.component.UIOutput.getValue(UIOutput.java:71)
at javax.faces.component.UIInput.getValue(UIInput.java:143)
at org.apache.myfaces.shared_impl.renderkit.RendererUtils.getValue(RendererUtils.java:343)
... 30 more
   Caused by: java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.catalina.core.DefaultInstanceManager.postConstruct(DefaultInstanceManager.java:212)
at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:154)
at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:146)
at org.apache.myfaces.config.annotation.Tomcat7AnnotationLifecycleProvider.newInstance(Tomcat7AnnotationLifecycleProvider.java:68)
at org.apache.myfaces.config.ManagedBeanBuilder.buildManagedBean(ManagedBeanBuilder.java:162)
... 46 more
 Caused by: java.lang.NullPointerException
at common.beans.StartBean.fillTable(StartBean.java:35)
... 55 more 
```

我的 web xml 如下：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee      http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
 <display-name>testjsf</display-name>
  <welcome-file-list>
<welcome-file>sample.xhtml</welcome-file>
<welcome-file>index.htm</welcome-file>
<welcome-file>index.jsp</welcome-file>
<welcome-file>default.html</welcome-file>
<welcome-file>default.htm</welcome-file>
<welcome-file>default.jsp</welcome-file>
 </welcome-file-list>
   <servlet>
     <servlet-name>Faces Servlet</servlet-name>
     <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
  </servlet>
<servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>
 <context-param>
   <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
  <param-value>resources.application</param-value>
</context-param>
 <context-param>
  <param-name>org.apache.myfaces.SERIALIZE_STATE_IN_SESSION</param-name>
  <param-value>false</param-value>
    </context-param>
           <context-param>
               <description>State saving method: 'client' or 'server' (=default). See JSF        Specification 2.5.2</description>
<param-name>javax.faces.STATE_SAVING_METHOD</param-name>
<param-value>client</param-value>
    </context-param>
       <context-param>
         <param-name>org.apache.myfaces.ALLOW_JAVASCRIPT</param-name>
    <param-value>true</param-value>
   </context-param>
  <context-param>
     <param-name>org.apache.myfaces.PRETTY_HTML</param-name>
     <param-value>true</param-value>
  </context-param>
      <context-param>
          <param-name>org.apache.myfaces.DETECT_JAVASCRIPT</param-name>
       <param-value>false</param-value>
      </context-param>
     <context-param>
     <param-name>org.apache.myfaces.AUTO_SCROLL</param-name>
      <param-value>true</param-value>
      </context-param>
    <listener>
     <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-        class>
   </listener>
           <listener>
                    <listener-class>
                           org.springframework.web.context.ContextLoaderListener
                 </listener-class>
       </listener>

  </web-app> 
```

我的应用程序上下文如下：

```
 <?xml version="1.0" encoding="UTF-8"?>

     <beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
   http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

    <bean id="springb" class="common.springbeans.Springbean">

   </bean>

  </beans> 
```

我的面孔配置如下：

```
 <?xml version="1.0" encoding="UTF-8"?>

<faces-config
   xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee      http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
      version="2.0">

    <managed-bean>
    <managed-bean-name>userbean</managed-bean-name>
    <managed-bean-class>common.beans.StartBean</managed-bean-class>
    <managed-bean-scope>view</managed-bean-scope>
    <managed-property>
        <property-name>ispringBeans</property-name>
        <value>#{springb}</value>
    </managed-property>
</managed-bean>

    <application>
        <el-resolver>
             org.springframework.web.jsf.el.SpringBeanFacesELResolver
       </el-resolver>

      </application>

 </faces-config> 
```

我包括的罐子如下： ![在此处输入图像描述](../Images/2df0f724768c177e9cfce4c30dcf2ed0.png)

最后，这是我试图注入的一段代码：

```
 public class StartBean implements Serializable{

/**
 * 
 */
private static final long serialVersionUID = 1L;
private String value;
private boolean val;
private ArrayList<TestModel> list;
private TestModel tm;
private IDataFillBean bean;
private IspringBeans ispringBeans;

        @PostConstruct
          public void fillTable(){
        setList(new ArrayList<TestModel>(0));

        list = (ArrayList<TestModel>) ispringBeans.fillDatamodel();

    }
   } 
```

好像是直接注入。我在这里错过了什么吗？请指导我。提前致谢。

**编辑：** 现在，我从类fillTable中删除了@postConstruct注释，从commandButton的“动作”中调用了fillTable并且这个异常消失了，这是否意味着在@postConstruct方法调用期间spring bean仍然不会被注入到属性中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:37:44.300

我已经使用具有 mojarra 的新 eclipse juno 测试了一个新应用程序，它似乎工作正常。所以问题原来是Myfaces。

# c# - 在c#.net中查看使用excel对象在excel的单元格中写入内容

> ID：14479241
> 
> 赞同：-1
> 
> 时间：2013-01-23T12:01:24.910
> 
> 标签：c#, office-interop

我将使用 c#.net 中的 excel 对象将内容写入 excel 模板的单元格。

我在 excel 的单元格中写入没有问题，它工作正常，但是在 excel 的单元格中写入内容时，我可以查看在单元格中写入的内容。

但我需要限制不查看此操作。

谁能给我一个关于如何解决这个问题的想法？

如果不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:22:08.290

如果您要求隐藏屏幕更新，请尝试：

```
xlApp.ScreenUpdating = false; 
```

最后，不要忘记重新打开它：

```
xlApp.ScreenUpdating = true; 
```

[这个问题](https://stackoverflow.com/questions/3096090/fastest-way-to-write-cells-to-excel-with-office-interop)的一些答案也可能有所帮助。

# iphone - iPhone中的标签栏控制器

> ID：14479243
> 
> 赞同：1
> 
> 时间：2013-01-23T12:01:34.977
> 
> 标签：iphone, ios, objective-c, uitabbarcontroller

我在我的应用程序中添加了两个选项卡，以使用这些选项卡加载两个视图控制器

*   Tab1 : 主页
*   Tab2 : 收藏夹

所以我写了下面的代码来实现这一点

在应用程序代表

**AppDelegate.h**

```
@class ViewController,FavViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate>
@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) ViewController *viewController;
@property (strong, nonatomic) FavViewController *favViewController;

@property (strong, nonatomic) UITabBarController *tabBarController;

@end 
```

**AppDelegate.m**

```
 @implementation AppDelegate

        @synthesize window = _window;
        @synthesize viewController;
        @synthesize favViewController;
        @synthesize tabBarController;

        - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; 

        baseTabBarController = [[UITabBarController alloc]init];

        baseTabBarController.delegate=self;

        viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil]; 
        UINavigationController *homeView = [[UINavigationController alloc]initWithRootViewController:viewController];  

        favViewController = [[FavViewController alloc] initWithNibName:@"FavViewController" bundle:nil];
        favViewController.title = @"My Favourite";
        UINavigationController *favouriteView = [[UINavigationController alloc] initWithRootViewController:favViewController];  

        NSArray *controllers = [NSArray arrayWithObjects:homeView,favouriteView, nil];  
        baseTabBarController.viewControllers = controllers; 

        [self.window addSubview:baseTabBarController.view]; 
        [self.window makeKeyAndVisible];    

        return YES;
    }

    - (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)selectedViewController
{

    if (tabBarController.selectedIndex == 0) {

   }else if (tabBarController.selectedIndex == 1) {

    [(FavViewController *)[(UINavigationController*)selectedViewController topViewController] getData];

    }else if (tabBarController.selectedIndex == 2) {

        NSLog(@"2");
    }

} 
```

这是我得到的结果屏幕

![在此处输入图像描述](../Images/7d64f2d281f821d880716c695f9be26f.png)

**所以我在哪里遇到麻烦..**

如果我切换到下一个屏幕，我的第一个选项卡不会加载第一个屏幕（主屏幕），而是停留在当前屏幕上。

让我举个例子

> 我的应用程序中有四个屏幕，比如说 A、B、C、D
> 
> 我为 A 和 C 屏幕添加了选项卡，它们在整个应用程序（所有屏幕）中都可用。
> 
> 现在，如果我将启动应用程序并转到 A -> B-> C -> D 并按主页选项卡（A），它不会加载屏幕 A，而是停留在当前屏幕上
> 
> 但好消息是，如果我对另一个选项卡 C（我的最爱）执行相同的过程，它会加载正确的屏幕。

**编辑：**我已经按照@sanjit 的建议实现了*didSelectViewController*方法，但是我无法区分，这次点击了哪个选项卡？

我将不胜感激！如果有人能指出我正确的方向

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:19:33.200

使用 Tabbar 委托并使用 uiviewcontroller 的参数实例调用 poptorootviewcontroller 方法。希望它对你有用。试试下面的代码

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{
UINavigationController *navController = (UINavigationController*)tabBarController.selectedViewController;

[navController popToRootViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:09:14.387

替换代码

```
[viewController setTabBarItem:tab1];
[favViewController setTabBarItem:tab2]; 
```

和

```
[[tabbarController tabBar] setItems:[NSArray arrayWithObjects:tab1,tab2, nil]]; 
```

那应该解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-02T07:30:28.523

```
 Viewcontroller.h

    @property(nonatomic, retain) UITabBarItem *item1;
    @property(nonatomic, retain) UITabBarItem *item2;
    @property(nonatomic, retain) UITabBarItem *item3;
    @property(nonatomic, retain) UITabBarItem *item4;
    @property(nonatomic, retain) IBOutlet UITabBar *tabBar;

    Viewcontroller.m

    @synthesize item1,item2,item3,item4,tabBar;

- (void)viewDidLoad
{
     item1 = [[UITabBarItem alloc] initWithTitle:@"Home" image:[UIImage imageNamed:@"home.png"] tag:0];
      item2  = [[UITabBarItem alloc] initWithTitle:@"My Lists" image:[UIImage imageNamed:@"mylist"] tag:1];

     item3  = [[UITabBarItem alloc] initWithTitle:@"Search" image:[UIImage imageNamed:@"search.png"] tag:2];
     item4  = [[UITabBarItem alloc] initWithTitle:@"Settings" image:[UIImage imageNamed:@"setting.png"] tag:3];

     NSArray *items = [NSArray arrayWithObjects:item1,item2,item3,item4, nil];
        [tabBar setItems:items animated:NO];
        [tabBar setSelectedItem:[tabBar.items objectAtIndex:2]];
        tabBar.delegate=self;
        [self.view addSubview:tabBar

];
}

/****Function Call******/

- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item
{

    if(item.tag == 0)
    {
        Newsfeeds *obj = [[Newsfeeds alloc]initWithNibName:@"Newsfeeds" bundle:Nil];

        [self.navigationController pushViewController:obj animated:NO];

    }

    else if(item.tag == 1)

    {

        MyLists *obj = [[MyLists alloc]initWithNibName:@"MyLists" bundle:Nil];

        [self.navigationController pushViewController:obj animated:NO];

    }

    else if(item.tag == 3)

    {

        Settings *obj = [[Settings alloc]initWithNibName:@"Settings" bundle:Nil];

        [self.navigationController pushViewController:obj animated:NO];

    }

} 
```

# android - 从 maps.googleapis.com 获取 JSON 数据时出错

> ID：14479247
> 
> 赞同：1
> 
> 时间：2013-01-23T12:01:48.257
> 
> 标签：android, json, api, android-asynctask

我想解析我从下面得到的 JSON 链接

[http://maps.googleapis.com/maps/api/directions/json?origin=Chicago,IL&destination=Los+Angeles,CA&waypoints=Joplin,MO|Oklahoma+City,OK&sensor=false](http://maps.googleapis.com/maps/api/directions/json?origin=Chicago,IL&destination=Los+Angeles,CA&waypoints=Joplin,MO|Oklahoma+City,OK&sensor=false)

您可以看到我在浏览器中正确获取响应，但是在从我的代码中获取响应时出现以下错误：

**日志猫响应：**

```
01-23 11:54:57.415: E/AndroidRuntime(2190): FATAL EXCEPTION: AsyncTask #1
01-23 11:54:57.415: E/AndroidRuntime(2190): java.lang.RuntimeException: An error occured while executing doInBackground()
01-23 11:54:57.415: E/AndroidRuntime(2190):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
01-23 11:54:57.415: E/AndroidRuntime(2190):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
01-23 11:54:57.415: E/AndroidRuntime(2190):     at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
01-23 11:54:57.415: E/AndroidRuntime(2190):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
01-23 11:54:57.415: E/AndroidRuntime(2190):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
01-23 11:54:57.415: E/AndroidRuntime(2190):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
01-23 11:54:57.415: E/AndroidRuntime(2190):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
01-23 11:54:57.415: E/AndroidRuntime(2190):     at java.lang.Thread.run(Thread.java:1019)
01-23 11:54:57.415: E/AndroidRuntime(2190): Caused by: java.lang.IllegalArgumentException: Illegal character in query at index 116: http://maps.googleapis.com/maps/api/directions/json?origin=Chicago,IL&destination=Los+Angeles,CA&waypoints=Joplin,MO|Oklahoma+City,OK&sensor=false
01-23 11:54:57.415: E/AndroidRuntime(2190):     at java.net.URI.create(URI.java:776)
01-23 11:54:57.415: E/AndroidRuntime(2190):     at org.apache.http.client.methods.HttpGet.<init>(HttpGet.java:75)
01-23 11:54:57.415: E/AndroidRuntime(2190):     at com.example.gisapp.FirstActivity.connect(FirstActivity.java:155)
01-23 11:54:57.415: E/AndroidRuntime(2190):     at com.example.gisapp.FirstActivity$AsynTaskForGettingData.doInBackground(FirstActivity.java:109)
01-23 11:54:57.415: E/AndroidRuntime(2190):     at com.example.gisapp.FirstActivity$AsynTaskForGettingData.doInBackground(FirstActivity.java:1)
01-23 11:54:57.415: E/AndroidRuntime(2190):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
01-23 11:54:57.415: E/AndroidRuntime(2190):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
01-23 11:54:57.415: E/AndroidRuntime(2190):     ... 4 more
01-23 11:55:00.045: E/WindowManager(2190): Activity com.example.gisapp.FirstActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@405234a0 that was originally added here
01-23 11:55:00.045: E/WindowManager(2190): android.view.WindowLeaked: Activity com.example.gisapp.FirstActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@405234a0 that was originally added here
01-23 11:55:00.045: E/WindowManager(2190):  at android.view.ViewRoot.<init>(ViewRoot.java:258)
01-23 11:55:00.045: E/WindowManager(2190):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
01-23 11:55:00.045: E/WindowManager(2190):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
01-23 11:55:00.045: E/WindowManager(2190):  at android.view.Window$LocalWindowManager.addView(Window.java:424)
01-23 11:55:00.045: E/WindowManager(2190):  at android.app.Dialog.show(Dialog.java:241)
01-23 11:55:00.045: E/WindowManager(2190):  at com.example.gisapp.FirstActivity$AsynTaskForGettingData.onPreExecute(FirstActivity.java:95)
01-23 11:55:00.045: E/WindowManager(2190):  at android.os.AsyncTask.execute(AsyncTask.java:391)
01-23 11:55:00.045: E/WindowManager(2190):  at com.example.gisapp.FirstActivity.onCreate(FirstActivity.java:49)
01-23 11:55:00.045: E/WindowManager(2190):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-23 11:55:00.045: E/WindowManager(2190):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-23 11:55:00.045: E/WindowManager(2190):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-23 11:55:00.045: E/WindowManager(2190):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-23 11:55:00.045: E/WindowManager(2190):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-23 11:55:00.045: E/WindowManager(2190):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-23 11:55:00.045: E/WindowManager(2190):  at android.os.Looper.loop(Looper.java:130)
01-23 11:55:00.045: E/WindowManager(2190):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-23 11:55:00.045: E/WindowManager(2190):  at java.lang.reflect.Method.invokeNative(Native Method)
01-23 11:55:00.045: E/WindowManager(2190):  at java.lang.reflect.Method.invoke(Method.java:507)
01-23 11:55:00.045: E/WindowManager(2190):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-23 11:55:00.045: E/WindowManager(2190):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-23 11:55:00.045: E/WindowManager(2190):  at dalvik.system.NativeStart.main(Native Method) 
```

这是我的 FirstActivity 代码：

```
package com.example.gisapp;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.URLEncoder;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;

public class FirstActivity extends Activity {

    // Tag Variable to Easily Detect your Activity inside LogCat While you Are
    // Placing your Log
    static String TAG = "FirstActivity";

    // boolean to Mantain the State of Internet Working or Not Default Set to
    // true
    boolean net = true;

    // Progreess Dialogue to Show User when AsyncTask is Doing Work in
    // BackGround
    ProgressDialog pd;

    // String Variable to Store the Data of your Json Response as String
    static String result;

    String URL = "";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.firstactivity);

        // Execute the AsyncTask
        new AsynTaskForGettingData().execute();

    }

    // For Converting the Given String in the Formate the Website Link otherwise
    // you will get illegal Formate Exception cause this String will not be in a
    // formate of URL
    public static String convertURL(String str) {

        String url = null;
        try {
            url = new String(str.trim().replace(" ", "%20").replace("&", "%26")
                    .replace(",", "%2c").replace("(", "%28")
                    .replace(")", "%29").replace("!", "%21")
                    .replace("=", "%3D").replace("<", "%3C")
                    .replace(">", "%3E").replace("#", "%23")
                    .replace("$", "%24").replace("'", "%27")
                    .replace("*", "%2A").replace("-", "%2D")
                    .replace(".", "%2E").replace("/", "%2F")
                    .replace(":", "%3A").replace(";", "%3B")
                    .replace("?", "%3F").replace("@", "%40")
                    .replace("[", "%5B").replace("\\", "%5C")
                    .replace("]", "%5D").replace("_", "%5F")
                    .replace("`", "%60").replace("{", "%7B")
                    .replace("|", "%7C").replace("}", "%7D"));
        } catch (Exception e) {
            e.printStackTrace();
        }
        return url;
    }

    // Asynctask To get Data from Server
    public class AsynTaskForGettingData extends AsyncTask<Void, Void, Void> {

        // After we have Execute AsynTaskForGettingData the First Method That
        // Will Called up is onPreExecute()
        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();

            // Show Progress Dialogue to Tell User to Wait For A While untill we
            // finishes to get the Data From Server and Parse Json
            pd = new ProgressDialog(FirstActivity.this);
            pd.setTitle("GISApp");
            pd.setMessage("Please Wait..");
            pd.show();

        }

        // After Executing onPreExecute() the Method Will Do work inside
        // doInBackground()
        @Override
        protected Void doInBackground(Void... params) {
            // TODO Auto-generated method stub
            // URL = convertURL(URL);
            StringBuffer sb = new StringBuffer();
            sb.append("http://maps.googleapis.com/maps/api/directions/json?origin=Chicago,IL&destination=Los+Angeles,CA&waypoints=Joplin,MO|Oklahoma+City,OK&sensor=false");
            URL = sb.toString();

            if (connect(URL)) {
                try {
                    JSONObject j_obj = new JSONObject(result);

                    // msg = j_obj.getString("MESSAGE");
                    // Log.i(TAG, "Value of MESSAGE" + msg);

                    /*
                     * if (msg.equalsIgnoreCase("Password sent")) {
                     * Toast.makeText( LoginActivity.this,
                     * "Your Username & Password Has Been Sent to your Email Address"
                     * , Toast.LENGTH_LONG) .show(); } else if (msg
                     * .equalsIgnoreCase("fail")) { Toast.makeText(
                     * LoginActivity.this, "Please Enter Valid Email Address",
                     * Toast.LENGTH_LONG) .show(); }
                     */

                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            } else {
                // msg = "error";
            }

            return null;
        }

        // After Finishing Work doInBackground() the Method Will execute its
        // onPostExecute method
        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
                    pd.dismiss();
        }
    }

    // Method That Will Check Whether the Internet is Working or Not and If
    // Working it will Set the Response inside result Variable.
    @SuppressWarnings("finally")
    public static boolean connect(String url) {
        boolean flag = false;
        HttpClient httpclient = new DefaultHttpClient();

        // Prepare a request object
        HttpGet httpget = new HttpGet(url);
        Log.e("url", url);

        // Execute the request
        HttpResponse response;
        try {

            // https://api.vkontakte.ru/method/audio.search?uid=163398985&q=akoncount=100&access_token=2a4db0e223f0f5ab23f0f5ab5f23da5680223f023f1f5a3c696b018be9b17b9

            response = httpclient.execute(httpget);
            response.addHeader("Accept-Language", "zh-CN");

            // Examine the response status
            Log.i(TAG, response.getStatusLine().toString() + "\n" + response);

            // Get hold of the response entity
            HttpEntity entity = response.getEntity();
            // If the response does not enclose an entity, there is no need
            // to worry about connection release

            if (entity != null) {

                // A Simple JSON Response Read
                InputStream instream = entity.getContent();
                Log.d(TAG, "---- instream --- " + instream);
                result = convertStreamToString(instream);
                Log.d(TAG, "---- Result --- " + result);

                // now you have the string representation of the HTML request
                instream.close();

            } else {
                Log.d(TAG, "---- Json Activity is --- null ");
            }
            flag = true;
            // net = false;
        } catch (Exception e) {
            Log.d("Jsomn Activity", "---- Catch --- " + e.toString());
            flag = false;
            e.printStackTrace();
        } finally {
            return flag;
        }

    }

    // Method That Will Convert your InputStream to String
    private static String convertStreamToString(InputStream is) {
        /*
         * To convert the InputStream to String we use the
         * BufferedReader.readLine() method. We iterate until the BufferedReader
         * return null which means there's no more data to read. Each line will
         * appended to a StringBuilder and returned as String.
         */
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        Log.d("Jsomn Activity", "---- Result --- " + sb.toString());
        return sb.toString();
    }
} 
```

我知道我肯定在这里犯了一些愚蠢的错误，我也在这里尝试了很多方法，但无法解决它。请帮助我摆脱困境。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:05:53.623

`URLEncoder.encode`如果它包含空间字符，则用于对您的 url 进行编码：

```
 StringBuffer sb = new StringBuffer();
   sb.append("origin=Chicago,IL&destination=Los+Angeles,CA&
                              waypoints=Joplin,MO|Oklahoma+City,OK&sensor=false");
   URL = URLEncoder.encode(sb.toString(), "UTF-8");
   String  newURL = "http://maps.googleapis.com/maps/api/directions/json?"+URL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:10:42.627

得到响应后，只需关闭进度对话框

> ```
>  // After Finishing Work doInBackground() the Method Will execute its
>     // onPostExecute method
>     @Override
>     protected void onPostExecute(Void result) {
>         // TODO Auto-generated method stub
>         super.onPostExecute(result);
>        if(pd.isShowing())
>          pd.dismiss();
>     } 
> ```

# internet-explorer-8 - 应用程序脚本：IE8 中的弹出窗口定位失败

> ID：14479250
> 
> 赞同：0
> 
> 时间：2013-01-23T12:01:59.867
> 
> 标签：internet-explorer-8, google-apps-script

是的，我知道。请不要发表任何明显的评论；我的生命太短暂了。

我正在使用 Serge's/Waqar 的[代码](https://stackoverflow.com/q/13692563/785194)作为弹出窗口，但是对于 IE8，弹出窗口出现在屏幕外（对于 IE9 来说没问题）。如果用户意识到出现了滚动条并一直向下滚动，他们可以找到它，但他们可能不会这样做。有没有人有任何修复建议？弹出面板创建如下：

```
 var popup = app.createVerticalPanel()
    .setId('popupPanelId')
    .setVisible(false)
    .setStyleAttributes({
    'position'   : 'fixed', 
    'border'     : '1px solid blue',
    'padding'    : '10',
    'background' : 'beige',
    'width'      : POPUP_WIDTH, 
    'zIndex'     : '2'}); 
```

掩码面板创建如下：

```
 var mask = app.createVerticalPanel()
    .setId('maskPanelId')
    .setSize('100%', '100%')
    .setStyleAttributes({
    'backgroundColor' : '#F0F0F0',
      'position'      : 'fixed',
      'top'           : '0',
      'left'          : '0',
      'zIndex'        : '1',
      'opacity'       : '0.6'})
    .setVisible(false); 
```

如果这两个`fixed`属性被删除，那么 Chrome 的行为方式与 IE8 相同 - 弹出窗口出现在屏幕外。我猜 IE8 不理解生成的任何固定定位。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:18:03.067

我跟进了 Serge 的链接，它修复了问题（弹出窗口在 IE8/9、FF、Chrome、Safari、Opera 上正确显示），但又做了一个更改。基本上，您必须设置标准模式而不是怪癖模式（无论如何都是好主意），如下所示：

```
function doGet() {
  var app = UiApp.createApplication().setStandardsMode(true);
  ...
} 
```

另一个问题是上面的代码（和我的代码）没有指定 CSS 单位，这在技术上是一个错误。它在 Quirks 模式下工作（我认为 GAS 实际上提供`px`了 ，而不是浏览器猜测它）。在标准模式下，GAS 会默默地删除填充规范（错误）并且它不会出现在输出 CSS 中。

**编辑**

根据要求在下方添加了确认对话框弹出代码。没有更正，除了`px`，但我已经改变它使它更像一个传统的是/否对话框，所以很多原来的已经消失了。您需要触发以生成弹出窗口，并为和`submitHandler`编写代码。这里的主要问题是定位弹出窗口。请参阅上面的链接。`OkHandler``CancelHandler`

```
/* ----------------------------------------------------------------------------
 * All the remaining code in this file handles a modal
 * dialog box which appears when the user hits the 'submit' button. The box 
 * is not movable (a GAS bug), but it can be positioned, by changing the 
 * 'top' and 'left' style attributes. Inspired by Serge's popup code at 
 * http://stackoverflow.com/q/13692563/785194.
 * ------------------------------------------------------------------------- */

/**
 * Popup setup. Create two vertical panels, with different Z indexes,
 * and create a label in the popup panel which will hold the dialog
 * text. Finally, add handlers for the 'Ok' and 'Cancel' buttons.
 */
function setupPopup(app, mainPanel) {
  app.add(createMaskPanel());
  var popup = app.createVerticalPanel()
    .setId('popupPanelId')
    .setVisible(false)
    .setStyleAttributes({
    'position'   : 'fixed', 
    'border'     : '1px solid blue',
    'padding'    : '10px',
    'background' : 'beige',
//  'top'        : POPUP_TOP,
//  'left'       : POPUP_LEFT,
    'width'      : POPUP_WIDTH, 
//  'height'     : POPUP_HEIGHT,
    'zIndex'     : '2'});
  popup.add(app.createLabel('').setId('dialogTextId'));

  var OkHandler = app.createServerHandler('OkHandler')
    .addCallbackElement(mainPanel)
    .addCallbackElement(popup);
  var CancelHandler = app.createServerHandler('CancelHandler')
    .addCallbackElement(mainPanel)
    .addCallbackElement(popup);

  // create a table with two cells, and insert two buttons into those
  // cells
  var buttonTable = app.createFlexTable().setId('buttonTable');
  buttonTable.insertRow(0).addCell(0).addCell(0);

  var OkButton     = app.createButton('Continue');
  var CancelButton = app.createButton('Cancel');
  OkButton.addClickHandler(OkHandler);
  CancelButton.addClickHandler(CancelHandler);
  buttonTable.setWidget(0, 0, OkButton);
  buttonTable.setWidget(0, 1, CancelButton);
  popup.add(buttonTable);

  app.add(popup);
} // setupPopup()

/**
 * A mask panel, to make the popup modal.
 */
function createMaskPanel() { 
  var app  = UiApp.getActiveApplication();
  var mask = app.createVerticalPanel()
    .setId('maskPanelId')
    .setSize('100%', '100%')
    .setStyleAttributes({
    'backgroundColor' : '#F0F0F0',
      'position'      : 'fixed',
      'top'           : '0',
      'left'          : '0',
      'zIndex'        : '1',
      'opacity'       : '0.6'})
    .setVisible(false);
  mask.add(app.createLabel('POPUP')
           .setStyleAttribute('color', '#F0F0F0')
           .setStyleAttribute('opacity', '0.6')); 
  return mask;
}

/**
 * 'Submit' button handler.
 */
function submitHandler(e){
  var app      = UiApp.getActiveApplication();
  var popup    = app.getElementById('popupPanelId');
  var mask     = app.getElementById('maskPanelId');

  app.getElementById('dialogTextId').setText("yada yada");
  popup.setVisible(true);
  mask.setVisible(true);
  popup.setStyleAttributes(
    {'top'  : POPUP_TOP,
     'left' : POPUP_LEFT});
  return app;
}

/**
 * Popup box 'Ok' handler; add the form data to the output spreadsheet.
 */
function OkHandler(e) {
  ...
  return app;
}

function CancelHandler(e) {
  ...
  return app;
} 
```

# c# - 允许用户重新排序 DataGridViewComboBoxColumn

> ID：14479251
> 
> 赞同：0
> 
> 时间：2013-01-23T12:02:02.053
> 
> 标签：c#, datagridview, datagridviewcombobox

我有一个绑定到 DataTable 的 Datagridview。

我已将 DataGridViewComboBoxColumn 添加到 Datagridview，它具有与绑定 DataTable 中的现有列相关的数据属性。

一切都按预期工作，除了在运行时，用户能够重新排序除 DataGridViewComboBoxColumn 之外的每一列。

这是实现添加的列的代码：-

```
DataGridViewComboBoxColumn TaskEntryCombo = new DataGridViewComboBoxColumn();
            TaskEntryCombo.HeaderText = "Report Name";
            TaskEntryCombo.AutoSizeMode = DataGridViewAutoSizeColumnMode.Fill;
            TaskEntryCombo.DataSource = ReportTable;
            TaskEntryCombo.DataPropertyName = "TaskName";
            TaskEntryCombo.DisplayMember = "ReportName";
            TaskEntryCombo.ValueMember = "ReportName";
            TaskEntryCombo.MaxDropDownItems = 35;

dgvTemplate.Columns.Add(TaskEntryCombo); 
```

关于我需要设置什么来允许这个的任何想法？用户无法访问此特定列的列标题并根据列中的值重新排序网格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:13:20.770

试试这个 ：

```
TaskEntryCombo.SortMode = DataGridViewColumnSortMode.Automatic 
```

> 自动：用户可以通过单击列标题对列进行排序，除非列标题用于选择。将自动显示排序字形。

# javascript - jquery条件中的每个函数

> ID：14479254
> 
> 赞同：3
> 
> 时间：2013-01-23T12:02:07.500
> 
> 标签：javascript, jquery, each

我得到了解决方案。但是，假设我必须只为其中一个菜单显示一些输入文本框。我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T12:07:41.027

你有选择器错误`select.#ch`，所以它应该是`select > option:selected`，或者：

```
$("option:selected", this).each(function() {
    str += $(this).text() + " ";
}); 
```

但是我会用以下方式重写代码：

```
$("select").change(function () {
    var str = $("option:selected", this).map(function() {
        return this.innerHTML;
    }).get().join(" ");

    $("div").text(str);
}).change(); 
```

**演示：http:** [//jsfiddle.net/MpjjE/](http://jsfiddle.net/MpjjE/)

# java - Java - 将几个字符串转换为图像格式

> ID：14479255
> 
> 赞同：0
> 
> 时间：2013-01-23T12:02:10.137
> 
> 标签：java, string, printing, bytearray

我正在寻找一种方法来重新排列作为字符串和一个字节 [] 图像接收的几个参数，并将它们全部放在一起作为一个图像（例如 jpg）准备打印（立即）。

例子：

```
public static void printCard(String name, String LName, Image MainImage) 
```

基本上这个功能将是一个简单的卡片打印机。我正在寻找一个想法或可以指导我的人，如果有人能指导我一点，这可能会很容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:26:02.993

这是我用来将文本添加到预先存在的图像的简单方法。

我相信您可以弄清楚如何传入空白图像并添加您认为合适的其他行。

```
private BufferedImage drawText2(BufferedImage bi, String outputText) {
    Graphics2D g2d = bi.createGraphics();
    g2d.setFont(new Font("Helvetica", Font.BOLD, 36));
    FontMetrics fm = g2d.getFontMetrics();
    int textWidth = fm.stringWidth(outputText);
    int imageWidth = bi.getWidth();
    int leftAlignment;
    int topAlignment;

    // Align the text to the middle
    leftAlignment = (imageWidth / 2) - (textWidth / 2);

    // Align the text to the top
    topAlignment = fm.getHeight() - 10;

    // Create the drop shadow
    g2d.setColor(Color.DARK_GRAY);
    g2d.drawString(outputText, leftAlignment + 2, topAlignment + 2);

    // Create the text itself
    g2d.setColor(Color.LIGHT_GRAY);
    g2d.drawString(outputText, leftAlignment, topAlignment);

    g2d.dispose();
    return bi;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:43:24.360

如果您想直接从您的应用程序打印，您可以使用 `java.awt.print`package.json 。

试试这个方法

```
public static void printCard(final String name, final String lName, final Image mainImage){

    Printable contentToPrint = new Printable(){
        @Override
        public int print(Graphics graphics, PageFormat pageFormat, int page) throws PrinterException {
            if (page > 0) {
                return NO_SUCH_PAGE;
            }
            pageFormat.setOrientation(PageFormat.PORTRAIT);
            graphics.drawImage(mainImage, 0, 0, null);
            graphics.drawString(lName, 100, 300);
            graphics.drawString(name, 100, 100);

            return PAGE_EXISTS;
        }
    };

    PrinterJob job = PrinterJob.getPrinterJob();
    job.setPrintable(contentToPrint);
    //You can show a print dialog before printing by job by wrapping the following blocks with a conditional statement if(job.printDialog()){...}
    try {
        job.print();
    } catch (PrinterException e) {
        System.err.println(e.getMessage());
    }

} 
```

您需要从`java.awt.print`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T08:41:52.053

我使用 graphics2d 来实现我的功能。此方法接收 2 个图像和 6 个字符串：Bufferdimage bi 是我的空白图像，在此图像上我添加对象（例如：图像，字符串）：

```
 private static BufferedImage drawText2(BufferedImage logo,BufferedImage small,BufferedImage bi, String Headline,String outputText2,String outputText3,String outputText4,String outputText5,String outputText6) {
    Graphics2D g2d = bi.createGraphics();
    RenderingHints rh = new RenderingHints(
            RenderingHints.KEY_TEXT_ANTIALIASING,
            RenderingHints.VALUE_TEXT_ANTIALIAS_GASP);
    g2d.setRenderingHints(rh);
    g2d.setFont(new Font("Arial", Font.BOLD, 50));
    FontMetrics fm = g2d.getFontMetrics();
    int textWidth = fm.stringWidth(Headline);
    int imageWidth = bi.getWidth();
    int leftAlignment;
    int topAlignment;

    // Align the text to the top
    topAlignment = fm.getHeight() - 10;

    // Create the text itself
    //headline
    leftAlignment = (imageWidth / 2) - (textWidth);
    g2d.setColor(Color.blue);
    g2d.drawString(Headline, leftAlignment+290, topAlignment+60);
  //property changed
    g2d.setFont(new Font("Arial", Font.BOLD, 30));
    fm = g2d.getFontMetrics();
    textWidth = fm.stringWidth(Headline);
    //second line
    textWidth = fm.stringWidth(outputText2);
    leftAlignment = (imageWidth / 2) - (textWidth);
    g2d.setColor(Color.black);
    g2d.drawString(outputText2, leftAlignment+290, topAlignment+120);
    //third line
    textWidth = fm.stringWidth(outputText3);
    leftAlignment = (imageWidth / 2) - (textWidth);
    g2d.setColor(Color.black);
    g2d.drawString(outputText3, leftAlignment+290, topAlignment+160);
    //4 line
    textWidth = fm.stringWidth(outputText4);
    leftAlignment = (imageWidth / 2) - (textWidth);
    g2d.setColor(Color.black);
    g2d.drawString(outputText4, leftAlignment+290, topAlignment+200);
  //5 line
    textWidth = fm.stringWidth(outputText5);
    leftAlignment = (imageWidth / 2) - (textWidth);
    g2d.setColor(Color.black);
    g2d.drawString(outputText5, leftAlignment+290, topAlignment+240);

    //property changed
    g2d.setFont(new Font("Arial", Font.getFont("Arial").HANGING_BASELINE, 20));
    fm = g2d.getFontMetrics();
  //security line
    textWidth = fm.stringWidth(outputText6);
    leftAlignment = (textWidth);
    g2d.setColor(Color.red);
    g2d.drawString(outputText6, 10, topAlignment+300);
    //logo
    g2d.drawImage (logo, 44, 44,180,70, null);
    //profile
    g2d.drawImage (small, 60, 120,160,190, null);
    g2d.dispose();
    return bi;
} 
```

bi 是带有所有其他对象的卡片，顺便说一句，我在字体中添加了 smothing，没有这个，文本非常令人不快。

# php - CSV 导出脚本内存不足

> ID：14479257
> 
> 赞同：3
> 
> 时间：2013-01-23T12:02:16.453
> 
> 标签：php

我有一个将 MySQL 数据库导出为 CSV 格式的 PHP 脚本。奇怪的 CSV 格式是第 3 方软件应用程序的要求。它最初工作，但我现在在第 743 行内存不足。我的托管服务有 66MB 的限制。

我的完整代码在这里列出。[http://pastebin.com/fi049z4n](http://pastebin.com/fi049z4n)

有没有使用的替代品`array_splice`？谁能帮助我减少内存使用量。可以更改哪些功能？如何释放内存？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T12:11:12.603

你必须改变你的`CSV`创作策略。相反，如果将整个结果从数据库读取到内存中的数组中，则必须按顺序工作：

*   从数据库中读取一行
*   将该行写入`CSV`文件（或者*可能*是缓冲区）
*   从内存中释放行
*   循环执行此操作...

这样，脚本的内存消耗不会与结果中的行数成比例增加，而是（或多或少）保持不变。

这可以作为一个未经测试的例子来勾勒这个想法：

```
while (FALSE!==($row=mysql_fetch_result($res))) {
  fwrite ($csv_file."\n", implode(',', $row));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:06:01.583

增加内存限制和最大执行时间

例如 ：

```
// Change the values to suit you
ini_set("memory_limit","15000M");
ini_set("max-execution_time", "5000"); 
```

# php - 重定向到移动主题时的重定向循环

> ID：14479268
> 
> 赞同：0
> 
> 时间：2013-01-23T12:02:40.920
> 
> 标签：php, wordpress, redirect, mobile

我在将移动用户重定向到移动主题时遇到问题。

我有 2 个主题：主题和子主题 - 移动主题。我使用 Theme Switch 插件和 Mobile Detect 脚本来切换到移动主题。当手动调用 url 并成功检测到移动设备时，切换工作。但是，使用两者结合 php 标头进行重定向让我非常头疼。

这就是我通常所说的可行的方法：

```
include 'script/Mobile_Detect.php';
$detect = new Mobile_Detect();

if ( $detect->isMobile() )
    header( 'Location: '.get_home_url().'?theme=Pinnacle+Mobile' ); 
```

但是当我这样做时，我会得到一个重定向循环。这段代码在父主题的 header.php 中，子主题有它自己的文件版本（没有任何标题）。

我认为 wordpress 可能出于某种原因调用了父主题的 header.php 脚本，即使它应该已经切换到移动主题并尝试将其与 cookie 结合起来，如下所示：

```
if ( $detect->isMobile() )
{   
    if ( !( $_COOKIE['redirected'] ) )
    {
        setcookie( 'redirected', '1', time() + 3600, '/' );
        header( 'Location: '.get_home_url().'?theme=Pinnacle+Mobile' ); 
    }
} 
```

但这不起作用。我总是得到完整的网站。

# flash - Flash : 任何构建简单 Facebook 游戏的教程

> ID：14479278
> 
> 赞同：1
> 
> 时间：2013-01-23T12:03:17.337
> 
> 标签：flash, flash-cs5

我是独立开发人员，开发了一款 iphone 游戏。我有兴趣为 facebook 构建一个基本的 flash 游戏。我在 mac 中，我得到了 Adob​​e cs5。我真的是 flash 中的菜鸟。我用谷歌搜索它并没有帮助我。请一些一个指导我。

# sql - SQLite 扫描表性能

> ID：14479283
> 
> 赞同：1
> 
> 时间：2013-01-23T12:03:36.027
> 
> 标签：sql, performance, sqlite

我的表有以下字段：

1.  日期（整数）
2.  状态（整数）
3.  产品 ID（整数）
4.  产品名称（整数）
5.  说明（文字）（文字最长 3000 个字符）

将有超过 800 万行。我需要决定是否应该将产品描述放在另一个表中。我的主要目标是让这个声明非常快：

```
SELECT Date,State,ProductId,ProductName FROM tablename ORDER BY DATE desc LIMIT 100 
```

SQL 结果将不会获取上述语句中的 Description 字段值。只有在应用程序中选择了行（新查询）时，用户才会看到描述。

我真的很想在同一个表中有产品描述，但我不确定 SQLite 如何扫描行。如果日期值不匹配，我会假设 SQLite 可以快速跳到下一行。或者它可能需要扫描行的所有字段，直到它到达描述字段值的末尾才能知道该行已经结束？如果需要扫描所有字段才能到达下一行，Description 字段中 3000 个字符的值会大大降低速度吗？

编辑：不应使用索引，因为插入速度很重要。

编辑：尝试将所有内容都放在一个表中的唯一原因是我想在一个包含数百个项目的事务中执行 INSERT 和 UPDATE。可以在同一个事务中插入同一个项目并稍后更新，所以我不知道每个项目的最后一个插入 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:39:17.897

1.  当您使用该查询并且在列上没有索引时`Date`，SQLite 将从表中读取所有记录，并使用临时表对结果进行排序。
2.  当你在列上有索引时`Date`，SQLite 会在索引中查找最后 100 条记录，然后从表中读取这些记录的所有数据。
3.  当您有一个[*覆盖*索引](http://www.sqlite.org/queryplanner.html#covidx)时，即一个包含四列`Date`、、、和的索引时`State`，SQLite 将只读取索引中的最后 100 个条目。`ProductId``ProductName`

每当 SQLite 从数据库文件中读取时，它不会读取值或记录，而是读取整个页面（通常为 1 KB 或 4 KB）。

在情况 1 中，SQLite 将读取表的所有页面。
在情况 2 中，SQLite 将读取索引的最后一页（因为 100 个日期将适合一页）和表的 100 页（每条记录一个，假设这些记录中没有两条恰好在同一页中）页）。
在情况 3 中，SQLite 将读取索引的最后几页。

案例 2 会比案例 1 快得多；案例 3 会更快，但可能不足以引起注意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:50:54.030

我建议依靠良好的旧[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)规则，在这种情况下特别是[1NF](http://en.wikipedia.org/wiki/First_normal_form)。如果要重复该描述（ProductName 也是如此），那么您有一个数据库设计问题，并且它在 SQLite 或其他中与它几乎没有关系。请注意，CL 的索引是正确的，正确的索引仍然很重要。

检查您的模型，为产品制作一个表格，为库存制作另一个表格。

# android - 如何在我的 Android 应用程序中读取 pdf 文件

> ID：14479285
> 
> 赞同：-5
> 
> 时间：2013-01-23T12:03:50.950
> 
> 标签：android

> **可能重复：**
> [如何在我的 android 应用程序中阅读 pdf？](https://stackoverflow.com/questions/10299839/how-to-read-pdf-in-my-android-application)

我的申请将有一个 pdf 文件的链接。当用户单击链接时，如果 pdf 文件不存在，则应将其下载到本地存储，并且我的应用程序应在弹出窗口中打开该 pdf 文件，并且该弹出窗口的右上角将有关闭按钮。我不希望默认/第三方 pdf 阅读器显示我的 pdf 文件。

如何在我的应用程序中实现此要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:13:32.263

不。没有第三方，您无法使用它。如果你强制使用它，那么图像或一些 unicode

文本类型不可见。因此您想使用 OCR 工具或使用一组库和 sdk 获取 pdf。

库和 SDK。

这可能会帮助你

[http://www.qoppa.com/android/pdfsdk/](http://www.qoppa.com/android/pdfsdk/)

[http://code.google.com/p/droidreader/](http://code.google.com/p/droidreader/)

# android - 索引安卓

> ID：14479292
> 
> 赞同：0
> 
> 时间：2013-01-23T12:04:02.017
> 
> 标签：android, indexing

我的问题是我在 Android 应用程序中有大约 1000 多条记录

```
string field1;
string field2;
string field3;
string field4;
//... 
```

我想在这组记录中搜索并在两个字段（`field1`和`field2`）上获得最佳结果。

目前，我阅读每条记录并`compare()`（字符串比较）与我要搜索的文本，这需要很长时间。

执行搜索的最佳方法是什么？

1.  将每条记录存储在 SQLite DB 中并执行“选择查询”
2.  哈希映射
3.  ? 还有其他建议吗？

或者可以创建记录索引并进行搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:31:56.800

如果您想搜索*不*完全匹配的内容，我会尝试`ArrayList`在`MyAppRecord`哪里

```
public class MyAppRecord {
    private String record;
    private int deviance;
} 
```

并为每条记录获取要查找的字符串的偏差：

```
public static int getLevenshteinDistance (String s, String t) {
    if (s == null || t == null) {
      throw new IllegalArgumentException("Strings must not be null");
    }    
    int n = s.length(); // length of s
    int m = t.length(); // length of t

    if (n == 0) {
      return m;
    } else if (m == 0) {
      return n;
    }

    int p[] = new int[n+1]; //'previous' cost array, horizontally
    int d[] = new int[n+1]; // cost array, horizontally
    int _d[]; //placeholder to assist in swapping p and d

    // indexes into strings s and t
    int i; // iterates through s
    int j; // iterates through t

    char t_j; // jth character of t

    int cost; // cost

    for (i = 0; i<=n; i++) {
       p[i] = i;
    }

    for (j = 1; j<=m; j++) {
       t_j = t.charAt(j-1);
       d[0] = j;

       for (i=1; i<=n; i++) {
          cost = s.charAt(i-1)==t_j ? 0 : 1;
          // minimum of cell to the left+1, to the top+1, diagonally left and up +cost                         
          d[i] = Math.min(Math.min(d[i-1]+1, p[i]+1),  p[i-1]+cost);  
       }

       // copy current distance counts to 'previous row' distance counts
       _d = p;
       p = d;
       d = _d;
    }

    // our last action in the above loop was to switch d and p, so p now
    // actually has the most recent cost counts
    return p[n];
  }
} 
```

将其保存到您的 -object 中`MyAppRecord`，最后按其-objects 对您`ArrayList`进行排序。`deviance``MyAppRecord`

请注意，这可能需要一些时间，具体取决于您的记录集。请注意，无法通过搜索 dog 来判断 dogA 或 dogB 是否位于列表中的某个位置。

阅读 Levensthein 距离，了解它的工作原理。您可能会想到对可能长/短的字符串进行排序，以获得适合您可能拥有的阈值的距离。

也可以将“足够好”的结果复制到不同的`ArrayList`.

# asp.net - 使用 ADO.NET 4 连接到 SQL Server 2005 时出错

> ID：14479299
> 
> 赞同：0
> 
> 时间：2013-01-23T12:04:19.327
> 
> 标签：asp.net, sql-server-2005

我正在尝试使用以下连接字符串连接到我们的 sql 服务器

```
<add name="siteDB" connectionString="Data Source=xxxxx\sql_2005;Initial Catalog=Intranet;User ID=username;Password=password" providerName="System.Data.SqlClient"/> 
```

但我收到了这个错误

```
A connection was successfully established with the server, but then an error occurred during the pre-login handshake 
```

这只是 Web 应用程序编译为 .net 4 时的问题，.net 2 似乎工作正常

我尝试了以下但没有成功

```
TrustServerCertificate=True 
```

在连接字符串中..没有快乐

也试过

```
TCP/IP protocols enabled
named pipes enabled 
```

使用具有正确权限的新设置帐户

有任何想法吗？

谢谢

纳特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:41:56.203

你可以试试[这个](https://stackoverflow.com/questions/3270199/a-connection-was-successfully-established-with-the-server-but-then-an-error-occ)或这个（曾经为我工作过）：

1) 从 IIS 中删除所有 SSL 证书和加密选项——在网站级别（例如从“默认网站”）和虚拟目录级别。基本上，如果您启用了加密，则将所有设置恢复为原始的未加密设置。

2) 从服务器中删除所有 SSL 自签名证书。这些是 SelfSSL 为您生成的证书。你的服务器可能有真正的证书——不要碰它们，因为它们可能被其他软件使用，而且无论如何应该是无害的。

这些证书需要从所有证书存储中删除。为此，请启动 MMC 并（一次一个）将证书管理器管理单元添加到“我的用户帐户”、“服务帐户”和“计算机帐户”。找到每个可能的自签名证书副本（个人、受信任的根证书颁发机构等）并删除它们。

3) 现在，虽然您已经删除了实际的证书，但 SQL Server 仍然继续使用加密。这是因为它在注册表中创建了证书的副本。您需要找到这些并删除它们。

这些位于：HKEY_LOCAL_MACHINE\SOFTWARE\wow6432node\Microsoft\Microsoft SQL Server\MSSQL.x\MSSQLServer\SuperSocketNetLib

和/或

HKEY_LOCAL_MACHINE\SOFTWARE\wow6432node\Microsoft\Microsoft SQL Server\MSSQL.x\Client\SuperSocketNetLib

4）重新启动服务器，这应该已经修复了初始错误，您会发现 SQL 代理正在运行并且一切恢复正常。

如发现[here](http://www.sqlservercentral.com/Forums/Topic1006080-149-1.aspx)。

# objective-c - 使用 YouTube api v3.0 上传视频失败并出现未记录的错误代码（目标 C）

> ID：14479301
> 
> 赞同：2
> 
> 时间：2013-01-23T12:04:20.260
> 
> 标签：objective-c, youtube-api

我正在使用以下代码尝试通过 v3.0 api 从 iOS（已安装）应用程序将视频上​​传到 YouTube：

```
...

NSString *path              = [[NSBundle bundleForClass:[self class]] pathForResource:@"test" ofType:@"MOV"];
NSFileHandle *handle        = [NSFileHandle fileHandleForReadingAtPath:path];

if (!handle)
{
    NSLog(@"Failed to open file for reading");
    return;
}

GTLServiceYouTube *service      = [[GTLServiceYouTube alloc] init];
service.authorizer              = auth;

GTLUploadParameters *params     = [GTLUploadParameters uploadParametersWithFileHandle:handle MIMEType:@"application/octet-stream"];

GTLYouTubeVideoSnippet *snippet = [GTLYouTubeVideoSnippet object];
snippet.title                   = @"Test title";
snippet.descriptionProperty     = @"Test description";
snippet.tags                    = @[ @"TestOne", @"TestTwo" ];
snippet.categoryId              = @"17";

GTLYouTubeVideoStatus *status   = [GTLYouTubeVideoStatus object];
status.privacyStatus            = @"private";

GTLYouTubeVideo *video          = [GTLYouTubeVideo object];
video.snippet                   = snippet;
video.status                    = status;

GTLQueryYouTube *query          = [GTLQueryYouTube queryForVideosInsertWithObject:video part:@"snippet,status" uploadParameters:params];

// Perform the upload
GTLServiceTicket *ticket        = [service executeQuery:query completionHandler:^(GTLServiceTicket *ticket, id object, NSError *error)
{
    if (error)
    {
        NSLog(@"ERROR: %@", error);
        return;
    }

    NSLog(@"SUCCESS! %@; %@;", ticket, object);
}];

ticket.uploadProgressBlock = ^(GTLServiceTicket *ticket, unsigned long long numberOfBytesRead, unsigned long long dataLength)
{
    NSLog(@"%lld / %lld", numberOfBytesRead, dataLength);
};

... 
```

在上传完成之前一切似乎都很好，我收到以下错误：

```
Error Domain=com.google.GTLJSONRPCErrorDomain Code=-32602 "The operation couldn’t be completed. (Forbidden)" UserInfo=0x936ed70 {error=Forbidden, GTLStructuredError=GTLErrorObject 0x936e7f0: {message:"Forbidden" code:-32602 data:[1]}, NSLocalizedFailureReason=(Forbidden)} 
```

我认为这可能是授权或我的应用设置的问题；但是，我能够成功获取具有相同凭据的视频类别列表。我还验证了该应用已被授予从我的 Google 帐户的帐户页面访问我的 Google 帐户的权限。

身份验证期间使用的范围是：

```
@"https://www.googleapis.com/auth/youtube https://www.googleapis.com/auth/youtube.upload" 
```

我已经调整/搜索了几个小时，似乎找不到任何关于我得到的错误代码的信息......

# c# - PropertyChanged 后 ICommand CanExecute 不触发？

> ID：14479303
> 
> 赞同：47
> 
> 时间：2013-01-23T12:04:24.520
> 
> 标签：c#, wpf, mvvm-light

我有一个**WPF 应用程序**，它显示了一个绑定到如下命令的按钮：

```
<Button Command="{Binding Path=TestrunStartCommand}" Content="GO!"> 
```

该命令的定义如下：

```
public ICommand TestrunStartCommand
{
    get { return new RelayCommand(TestrunStartExecute, () => !IsTestrunInProgress); }
}

public bool IsTestrunInProgress
{
    get{
        return _isTestrunInProgress;
    }
    set{
        _isTestrunInProgress = value;
        RaisePropertyChanged(IsTestrunInProgressPropertyName);
    }
} 
```

`IsTestrunInProgress`问题是，在我设置为 false后，该按钮不会立即启用，但*只有在我单击 application window 后*才会启用。

你能帮我理解这种行为并告诉我如何解决这个问题吗？

**进一步阅读：** [wpf 命令模式 - 什么时候查询可以执行](https://robburke.net/wpf-command-pattern-when-does-it-query-canexecute/)

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-01-23T12:12:32.163

该`ICommand`接口公开了一个事件[`ICommand.CanExecuteChanged`](http://msdn.microsoft.com/en-us/library/system.windows.input.icommand.canexecutechanged.aspx)，用于通知 UI 何时重新确定`IsEnabled`命令驱动的 UI 组件的状态。

根据`RelayCommand`您正在使用的实现，您可能需要引发此事件；许多实现都公开了一种方法，例如`RelayCommand.RaiseCanExecuteChanged()`您可以调用该方法来强制刷新 UI。

`RelayCommand`make 的 一些实现[`CommandManager.RequerySuggested`](http://msdn.microsoft.com/en-us/library/system.windows.input.commandmanager.requerysuggested.aspx)，在这种情况下，您将需要调用[`CommandManager.InvalidateRequerySuggested()`](http://msdn.microsoft.com/en-us/library/system.windows.input.commandmanager.invalidaterequerysuggested.aspx)以强制刷新 UI。

长话短说，您将需要从您的属性设置器中调用这些方法之一。

**更新**

由于在活动焦点发生变化时正在确定按钮的状态，我相信`CommandManager`正在使用。因此，在您的属性的设置器中，在分配支持字段后，调用[`CommandManager.InvalidateRequerySuggested()`](http://msdn.microsoft.com/en-us/library/system.windows.input.commandmanager.invalidaterequerysuggested.aspx).

**更新 2**

该`RelayCommand`实现来自 MVVM 轻量级工具包。当从 WPF/.NET 使用时，实现包装从`CommandManager`. 这将意味着这些命令在大多数情况下（UI 更改或焦点元素更改）会自动运行。但在少数情况下，例如这种情况，您将需要手动强制命令重新查询。使用此库执行此操作的正确方法是`RaiseCanExecuteChanged()`在`RelayCommand`.

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2015-11-03T15:47:05.573

这非常重要且容易错过，我在重复@Samir 在评论中所说的话。Laurent Bugnion 先生在他的[博客](http://blog.galasoft.ch/posts/2015/01/re-enabling-the-commandmanager-feature-with-relaycommand-in-mvvm-light-v5/)中写道：

*然而，在 WPF 4 和 WPF 4.5 中，有一个问题：将 MVVM Light 升级到 V5 后，CommandManager 将停止工作。您将观察到当 RelayCommand 的 CanExecute 委托返回 false 时，您的 UI 元素（按钮等）将停止禁用/启用。*

*如果你赶时间，这里是修复：在任何使用 RelayCommand 的类中，替换以下行：*

```
using GalaSoft.MvvmLight.Command; 
```

*和：*

```
using GalaSoft.MvvmLight.CommandWpf; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-23T12:13:02.580

您可以尝试使用[CommandManager.InvalidateRequerySuggested](http://msdn.microsoft.com/en-us/library/system.windows.input.commandmanager.invalidaterequerysuggested.aspx)。

无论如何，这在过去有时对我没有帮助。对我来说，最好的解决方案是将布尔属性绑定到`Button.IsEnabled`依赖属性。

在你的情况下，像

```
IsEnabled={Binding IsTestrunInProgress} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-24T23:04:46.110

问题是，每当访问 ICommand 属性 TestrunStartCommand 时，它总是返回一个新的命令对象。

一个简单的解决方法是创建一次 ICommand 对象并一次又一次地使用它。

```
private ICommand _testRunCommand = null;
public ICommand TestrunStartCommand
{
    get 
    { 
        return _testRunCommand ?? (_testRunCommand = new RelayCommand(TestrunStartExecute, () => !IsTestrunInProgress)); 
    }
} 
```

这是一个非常简单的修复，它对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-15T11:12:31.120

除了上面 Riegardt Steyn 的回答：[https ://stackoverflow.com/a/33503341/1964969](https://stackoverflow.com/a/33503341/1964969)

如果您不想更改`Command`用法`CommandWpf`（因为两个 RelayCommand 版本之间不兼容），另一种解决方法可能是不在声明位置实例化命令。改用构造函数代码：

```
public class SomeVMClass
{
    // CanExecute won't work:
    // Declaration and instantiation same place
    public RelayCommand MyCommand1 => new RelayCommand(MyBusinessLogic, MyCanExecuteValidator);

    // CanExecute will work
    // Declaration only
    public RelayCommand MyCommand2 { get; private set; }

    public SomeVMClass()
    {
        // Let's instantiate our declared command
        MyCommand2 = new RelayCommand(MyBusinessLogic, MyCanExecuteValidator);
       ... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-01T07:44:59.430

> 块引用

在您的 Command 类中将 CanExcutedChanged 更改为此

```
 public event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    } 
```

这是我的命令类的示例

```
public class SaveConfigCommand : ICommand
{
    public MyViewModel VM { get; set; }

    public event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }

    public SaveConfigCommand(MyViewModel vm)
    {
        VM = vm;
    }

    public bool CanExecute(object? parameter)
    {
        MyObjectModel model = parameter as MyObjectModel;

        if (model == null)
            return false;

        // Validate others properties here 

        return true;
    }

    public void Execute(object? parameter)
    {
        VM.MyMethodInViewModel();
    }
} 
```

# xslt - for-each 循环的子字符串结果

> ID：14479304
> 
> 赞同：-1
> 
> 时间：2013-01-23T12:04:24.223
> 
> 标签：xslt, foreach

我的 XSLT 中有一个下面的循环，它为我提供了来自输入 XML`for-each`的不同值的连接字符串`CUST_PO_NUMBER`

```
<xsl:key name="custpo"
         match="LIST_G_DELV/G_DELV/LIST_G_INV_LINES/G_INV_LINES"
         use="CUST_PO_NUMBER"/>
<xsl:template match="XXFIN_GBL_RAINV_PRINT">
    <xsl:apply-templates select="LIST_G_INV"/>
</xsl:template>
<xsl:template match="LIST_G_INV">
    <xsl:for-each select="G_INV">
        <xsl:value-of select="CUSTOMER_TRX_ID"/>
        <xsl:text>|</xsl:text>
        <xsl:value-of select="substring(LIST_G_SEB/G_SEB/SEB_NAME,1,255)"/>
        <xsl:text>|</xsl:text>
        <xsl:value-of select="substring(IDM_BILL_TO_CUSTOMER_NAME,1,255)"/>
        <xsl:text>|</xsl:text>
        <xsl:value-of select="BILL_TO_CUSTOMER_NUMBER"/>
        <xsl:text>|</xsl:text>
        <xsl:value-of select="TRX_NUMBER"/>
        <xsl:text>|</xsl:text>
        <xsl:for-each select="LIST_G_DELV/G_DELV/LIST_G_INV_LINES/G_INV_LINES[generate-id()=generate-id(key('custpo',CUST_PO_NUMBER)[1])]">
            <xsl:value-of select="CUST_PO_NUMBER"/>
            <xsl:if test="not(position() = last())">
                <xsl:text>;</xsl:text>
            </xsl:if>
        </xsl:for-each>
        <xsl:text>|</xsl:text>
        <xsl:value-of select="CUST_ISO_LANGUAGE"/>
    </xsl:for-each>
</xsl:template> 
```

此 XSLT 的最终输出是 CSV 文件（由管道 | 分隔）。我们可以将 CUST_PO_NUMBER 元素上的 for-each 循环的结果截断为 1000 个字符吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:18:29.710

我相信如果您替换以下内容，这应该会起作用`for-each`：

```
<xsl:for-each select="LIST_G_DELV/G_DELV/LIST_G_INV_LINES/G_INV_LINES[generate-id()=generate-id(key('custpo',CUST_PO_NUMBER)[1])]">
        <xsl:value-of select="CUST_PO_NUMBER"/>
        <xsl:if test="not(position() = last())">
            <xsl:text>;</xsl:text>
        </xsl:if>
</xsl:for-each> 
```

和：

```
 <xsl:variable name="values">
    <xsl:for-each select="LIST_G_DELV/G_DELV/LIST_G_INV_LINES/G_INV_LINES[generate-id()=generate-id(key('custpo',CUST_PO_NUMBER)[1])]">
        <xsl:value-of select="CUST_PO_NUMBER"/>
        <xsl:if test="not(position() = last())">
            <xsl:text>;</xsl:text>
        </xsl:if>
    </xsl:for-each>
 </xsl:variable>
 <xsl:value-of select="substring($values, 1, 1000)" /> 
```

并且由于您`substring()`无论如何都会使用 a ，因此您可以通过执行以下操作消除`if`and `text`：

```
 <xsl:variable name="values">
    <xsl:for-each select="LIST_G_DELV/G_DELV/LIST_G_INV_LINES/G_INV_LINES[generate-id()=generate-id(key('custpo',CUST_PO_NUMBER)[1])]">
        <xsl:value-of select="concat(';', CUST_PO_NUMBER)"/>
    </xsl:for-each>
 </xsl:variable>
 <xsl:value-of select="substring($values, 2, 1001)" /> 
```

# php - 使用 xdebug 调试时出现空白页

> ID：14479308
> 
> 赞同：4
> 
> 时间：2013-01-23T12:04:33.707
> 
> 标签：php, xdebug

我正在使用 phpstorm 和 xdebug 扩展来调试我的 php 代码，当我在请求结束时激活调试时，我看到白页，没有响应，如果我停用调试器帮助程序，页面将成功呈现。

正常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-18T21:21:23.237

在 php.ini 中为 xdebug 设置这些值对我有帮助：

```
xdebug.default_enable=1
xdebug.remote_autostart=1
xdebug.remote_connect_back=On
xdebug.remote_enable=1
xdebug.remote_handler=dbgp
xdebug.remote_port=9000
xdebug.remote_host=localhost 
```

我有一个问题，Vagrant 不会与 Phpstorm 成为朋友。我能够在脚本的第一行设置断点，但它并没有更进一步，只是返回了一个空行。

# java - SLF4J：无法加载类“org.slf4j.impl.StaticLoggerBinder”。运行 JUnit 测试时

> ID：14479309
> 
> 赞同：4
> 
> 时间：2013-01-23T12:04:38.010
> 
> 标签：java, spring, hibernate, junit, slf4j

我正在使用 JUnit 构建一些测试用例来测试我的应用程序，但是当我尝试运行它们时出现错误：

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. 
```

问题是，当我运行我的应用程序时，我没有得到那个错误，只是当我运行测试用例时......

我的应用是用 Spring + Hibernate + Java 6 构建的

以下是我在 pom.xml 文件中的依赖项：

```
<dependencies>
        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <!-- Dependencias Spring -->
        <dependency>
            <groupId>javax.transaction</groupId>
            <artifactId>jta</artifactId>
            <version>1.1</version>
        </dependency>
        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.4</version>
        </dependency>

        <!-- Spring security -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context-support</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>3.1.0.RELEASE</version>

        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>3.1.0.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>3.1.0.RELEASE</version>
        </dependency>

        <!-- Logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j.version}</version>
            <exclusions>
                <exclusion>
                    <artifactId>slf4j-api</artifactId>
                    <groupId>org.slf4j</groupId>
                </exclusion>
            </exclusions>
        </dependency>

        <!-- JSR 303 + Hibernate Validator -->
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>${org.hibernate.version}</version>
            <exclusions>
                <exclusion>
                    <artifactId>slf4j-api</artifactId>
                    <groupId>org.slf4j</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-annotations</artifactId>
            <version>${org.hibernate.version}</version>
            <exclusions>
                <exclusion>
                    <artifactId>slf4j-api</artifactId>
                    <groupId>org.slf4j</groupId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-commons-annotations</artifactId>
            <version>3.2.0.Final</version>
        </dependency>

        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.2.0.Final</version>
            <exclusions>
                <exclusion>
                    <artifactId>slf4j-api</artifactId>
                    <groupId>org.slf4j</groupId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>org.hibernate.javax.persistence</groupId>
            <artifactId>hibernate-jpa-2.0-api</artifactId>
            <version>1.0.1.Final</version>
        </dependency>

        <!-- DB Drivers -->
        <dependency>
            <groupId>com.informix</groupId>
            <artifactId>ifxjdbc</artifactId>
            <version>1.0</version>
        </dependency>

        <!-- Utils -->
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>1.6.12</version>
        </dependency>

        <dependency>
            <groupId>org.javassist</groupId>
            <artifactId>javassist</artifactId>
            <version>3.15.0-GA</version>
        </dependency>
        <dependency>
            <groupId>commons-lang</groupId>
            <artifactId>commons-lang</artifactId>
            <version>2.6</version>
        </dependency>
        <dependency>
            <groupId>aspectj</groupId>
            <artifactId>aspectj-tools</artifactId>
            <version>1.0.6</version>
        </dependency>
        <dependency>
            <groupId>javax.annotation</groupId>
            <artifactId>jsr250-api</artifactId>
            <version>1.0</version>
        </dependency>

        <dependency>
            <groupId>com.commsen.liferay.portal.libraries</groupId>
            <artifactId>axis</artifactId>
            <version>5.2.3</version>
        </dependency>

        <dependency>
            <groupId>es.sergas</groupId>
            <artifactId>log4jcomponent</artifactId>
            <version>1.0</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.13</version>
        </dependency>

        <dependency>
            <groupId>dom4j</groupId>
            <artifactId>dom4j</artifactId>
            <version>1.6.1</version>
        </dependency>

        <!-- Hibernate SQL Logger -->
        <dependency>
            <groupId>es.bahiasoftware</groupId>
            <artifactId>hibernate-sql-logger</artifactId>
            <version>01.00</version>
        </dependency>

        <!-- JUnit -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${org.springframework.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>

    </dependencies> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T12:15:47.027

正如错误消息清楚地表明：

> 有关详细信息，请参阅[http://www.slf4j.org/codes.html#StaticLoggerBinder](http://www.slf4j.org/codes.html#StaticLoggerBinder)。

...它说：

> org.slf4j.impl.StaticLoggerBinder 类无法加载到内存时会报此错误。当在类路径上找不到合适的 SLF4J 绑定时，就会发生这种情况。将 slf4j-nop.jar、slf4j-simple.jar、slf4j-log4j12.jar、slf4j-jdk14.jar 或 logback-classic.jar 中的一个（也是唯一一个）放在类路径上应该可以解决问题。
> 
> 从 SLF4J 版本 1.6 开始，在没有绑定的情况下，SLF4J 将默认为无操作 (NOP) 记录器实现。

* * *

因此，解决方法是将与其中之一相对应的 Maven 依赖项添加到 POM 文件中。唯一的问题是您需要此依赖项才能具有“测试”范围。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T12:18:03.267

您需要包含 slf4j 的后端。Slf4j 是一个门面，它重定向到一个日志框架，例如 log4j 或 logback。在依赖项中添加如下内容：

```
<dependency>
 <groupId>org.slf4j</groupId>
 <artifactId>slf4j-log4j12</artifactId>
 <version>${slf4j.version}</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-20T06:35:40.177

在我的，可能是罕见的情况下，问题是有一些额外的 jar`C:\Program Files (x86)\Java\jreV.V.V_VVV\lib\ext`不应该在那里（有人把它们放在那里），包括文件 slf4j-api-1.7.12.jar。

**只需从中删除 slf4j-api-VVVV.jar`...ext\lib`即可避免此错误。**

# solr - 在 Solr 中 BinaryResponseParser 有什么用？

> ID：14479310
> 
> 赞同：-1
> 
> 时间：2013-01-23T12:04:39.040
> 
> 标签：solr, callback, response

我必须在我的应用程序中使用 BinaryResponseParser。我不知道 BinaryResponseParser 的用途。当我在网上搜索时，我得到了一条信息“***发送回调事件而不是构建大响应的 BinaryResponseParser*** ”

这里什么是响应中的回调事件。任何人都可以清楚地解释什么是回调事件以及它是如何在 Solr 中使用的。

如果在我的应用程序中没有使用 BinaryResponseParser 方法，会有什么影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:49:34.577

`BinaryResponseParser` is a parser for Solr responses serialized in a *binary* format as opposed to `json` or `xml`. The class has one method that can be of use to you (v. 3.6.x):

`public NamedList<Object> processResponse(InputStream body, String encoding)`.

The advantage of using binary serialization is that your response size will be much smaller. This can be critical for the performance of live IR systems like Lucene/Solr - just imagine an auto-suggest service, which has to provide a list of suggestions for a user for every key-stroke. The response must be dellivered to the user bellow 100ms. If you don't use binary encoding, your response will be larger and consequently will take a bit longer to transfer over HTTP.

I suggest you take a look at [SolrJ](https://wiki.apache.org/solr/Solrj) - a Java client for Solr that will possibly solve most of your problems.

# jquery - 无法从 iPad 无线键盘捕获事件

> ID：14479311
> 
> 赞同：0
> 
> 时间：2013-01-23T12:04:43.153
> 
> 标签：jquery, ipad, keyboard, keyboard-events

我想为我的 iPad 应用程序使用箭头键，所以我正在连接无线键盘并认为一切都会奏效。

问题是我`keyDown`在按下 iPad 没有的那些键（如箭头键）时没有收到任何事件调用（特别是）。箭头和其他键适用于其他应用程序，所以这可能是 JS 问题？

我错过了什么吗？键盘连接需要什么吗？

# mule - 如何从 CLI（命令行界面）触发 Mule 作业？

> ID：14479313
> 
> 赞同：1
> 
> 时间：2013-01-23T12:04:48.953
> 
> 标签：mule, mule-studio

我有以下流程，它将定期发出 REST 请求，然后将数据存储到 PostgreSQL 数据库中。

```
<jdbc:postgresql-data-source name="PostgreSQL_Data_Source" user="postgres" password="*******" url="jdbc:postgresql://localhost:5432/TestDB" transactionIsolation="UNSPECIFIED" doc:name="PostgreSQL Data Source"/>
<jdbc:connector name="PostgreSQL_JDBC_Connector" dataSource-ref="PostgreSQL_Data_Source" validateConnections="true" queryTimeout="-1" pollingFrequency="0" doc:name="Database">
    <jdbc:query key="InsertRecord" value="INSERT INTO "tblJSON"("StoreHere") VALUES (CAST(#[message.payload] AS json))"/>
</jdbc:connector>

<flow name="RESTServiceScheduling" doc:name="RESTServiceScheduling">

     <!-- Step 1: Generates events at a given interval of time -->
     <quartz:inbound-endpoint jobName="RESTServiceJobSchedule" repeatInterval="0" doc:name="Quartz" responseTimeout="10000" cronExpression="0 0 10 ? * *">
          <quartz:event-generator-job/>
     </quartz:inbound-endpoint>

    <!-- Step 2: This will read the REST service data -->
    <http:rest-service-component httpMethod="GET" serviceUrl="http://localhost:12186/RestServiceImpl.svc/StorageUsage" />

    <!-- Step 3: Transform the HTTP-streamed payload into a java.lang.String  -->   
    <object-to-string-transformer doc:name="Object to String"/>

    <!-- Step 4: Dump into the destination Database --> 
    <jdbc:outbound-endpoint exchange-pattern="one-way" queryKey="InsertRecord" queryTimeout="-1" connector-ref="PostgreSQL_JDBC_Connector" doc:name="Destination"/>

</flow> 
```

这工作正常，但我需要一种从 CLI（命令行界面）中触发工作的方法。

我该怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:27:49.700

使用 HTTP 入站端点触发流并`curl`从命令行调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-31T17:44:32.900

我知道这是一个已接受答案的老问题，但另一种方法是使用删除文件的文件端点。将文件（或其端点）设置为文件年龄 1 和轮询频率 10 秒。要触发流程，请创建一个具有正确名称的文件。不过，我发现这样做，Mule 在流程完成之前不会删除文件。如果流程花费的时间比轮询周期长，它会多次获取同一个文件。为了解决这个问题，我有一个流，它只有一个文件入站端点、一个记录器和一个具有特定路径的 VM 出站端点。使用与上述 HTTP 入站端点具有相同路径的 VM 入站端点。

**编辑**：然后您可以`touch`在 CLI 中使用或类似的东西来创建文件。我发现这个问题正在寻找上述方式的替代方法。

# session - 运行 wicket 应用程序的 tomcat 中的大量会话文件

> ID：14479322
> 
> 赞同：1
> 
> 时间：2013-01-23T12:05:21.403
> 
> 标签：session, tomcat6, diskspace, wicket-1.5

我在`Tomcat 6`和上运行 wicket 1.5.7 应用程序`CentOS`。过去 7 天，我在 tomcat 工作文件夹中有大量**会话****文件**夹。会话过期后，这些文件夹不会被**删除。**如果我看一下文件夹的上次更新日期，似乎每 10 秒就会创建一次新会话，如果我看一下流量，这不应该是这样的。这导致我的磁盘很快变满。所有页面都是状态满的，我正在使用其中的大多数

```
public class MountedMapperWithoutPageComponentInfo extends MountedMapper {
public MountedMapperWithoutPageComponentInfo(String mountPath, Class<? extends IRequestablePage> pageClass) {
        super(mountPath, pageClass, new PageParametersEncoder());
      }
      @Override
      protected void encodePageComponentInfo(Url url, PageComponentInfo info) {
        // do nothing so that component info does not get rendered in url
      }
      @Override 
      public Url mapHandler(IRequestHandler requestHandler) 
      { 
          if (requestHandler instanceof ListenerInterfaceRequestHandler) { 
              return null; 
          } else { 
               return super.mapHandler(requestHandler); 
          } 
      } 
```

为了在 URL 中没有版本号。

任何想法？

# java-me - 为什么我的 Midlet 在手机锁定期间“暂停”？

> ID：14479325
> 
> 赞同：1
> 
> 时间：2013-01-23T12:05:32.850
> 
> 标签：java-me, midlet, wav

为什么手机锁定期间我的 Midlet 不运行？##

我是 J2ME 的新手。我成功创建了一个 Midlet 应用程序来播放`.wav`文件。但是在我的 Midlet 运行时，我无意中按下了手机锁定按钮，手机被锁定了。然后我的 Midlet 停止播放声音。

为什么会这样？

如何让我的 Midlet 在手机锁定时继续播放声音？

我在 Samsung Star 上运行我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:14:12.810

你能告诉我们你的手机是什么操作系统吗？解锁手机后，您能看到正在运行的应用程序吗？

我猜该应用程序已进入销毁模式

# javascript - 使用 jquery 插件拖放表列

> ID：14479326
> 
> 赞同：1
> 
> 时间：2013-01-23T12:05:35.833
> 
> 标签：javascript, jquery, jquery-plugins, html-table, drag-and-drop

我有一个具有固定标题的表，前 3 列是固定的。

[http://jsfiddle.net/ncUdA/embedded/result/](http://jsfiddle.net/ncUdA/embedded/result/)

我想拖放列（即）A、B、C、D、E、F 是应该启用可移动（拖放）的列。它下面的所有元素也应该移动到新位置。

[http://jsfiddle.net/ncUdA/](http://jsfiddle.net/ncUdA/)

我找到了一个插件，它可以满足我的需求，但我无法实现，因为在我的代码中使用了多个表来固定标题和固定 3 列。

[http://johnny.github.com/jquery-sortable/#table](http://johnny.github.com/jquery-sortable/#table)

下面的代码是有关如何执行此操作的插件代码。

我正在使用车把进行模板。

```
 var oldIndex
    $('.sorted_head tr').sortable({
      containerSelector: 'tr',
      itemSelector: 'th',
      placeholder: '<th class="placeholder"/>',
      vertical: false,
      onDragStart: function (item, group, _super) {
        oldIndex = item.index()
        item.appendTo(item.parent())
        _super(item)
      },
      onDrop: function  (item, container, _super) {
        var field,
        newIndex = item.index()

        if(newIndex != oldIndex)
          item.closest('table').find('tbody tr').each(function (i, row) {
            row = $(row)
            field = row.children().eq(oldIndex)
            if(newIndex)
              field.before(row.children()[newIndex])
            else
              row.prepend(field)
          })

        _super(item)
      }
    }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-02T10:13:11.720

在谷歌搜索后找到使用拖放重新排序表列的解决方案。我发现 'akottr' 写了一个很棒的 jquery 插件。[这里](http://akottr.github.io/dragtable/)

它是一个独立于库的 js 函数，它使您能够通过使用拖放来重新排序表列。它非常易于使用。

```
$('#defaultTable').dragtable(); 
```

因此，我希望你能得到你想要的重新排序表。查看更多示例：[http ://akottr.github.io/dragtable/](http://akottr.github.io/dragtable/)

# node.js - 在 node.js 中，为什么护照会话无法触发“文件”事件？

> ID：14479343
> 
> 赞同：8
> 
> 时间：2013-01-23T12:06:40.040
> 
> 标签：node.js, formidable, passport.js

在我的应用程序中，我只使用

```
app.use(express.json());
app.use(express.urlencoded()); 
```

并不是

```
app.use(express.bodyParser()); 
```

这样我就可以手动解析文件上传。这条线好像

```
app.use(passport.session()); 
```

停止强大的触发文件事件：

```
form.on('file', function(name, file) {
  //never called
}); 
```

如何使用护照会话而不与强大的文件事件发生冲突？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-16T22:33:29.750

看起来他们已经添加了解决此问题的方法。使用`app.use(passport.session({pauseStream: true}));`相反将防止异步反序列化破坏某些中间件。

来源：[https ://github.com/jaredhanson/passport/pull/106](https://github.com/jaredhanson/passport/pull/106)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T11:53:44.383

该`passport.session()`方法调用 your `passport.deserializeUser()`，它本身通常会调用数据库来获取用户。此数据库调用延迟了开始侦听传入数据的代码的执行。也就是说，数据在没有人监听的情况下到达。

# android - 从 Arduino 蓝牙设备接收数据

> ID：14479349
> 
> 赞同：0
> 
> 时间：2013-01-23T12:06:59.057
> 
> 标签：android, multithreading, service, bluetooth, arduino

我遵循了这个例子：[http ://english.cxem.net/arduino/arduino5.php](http://english.cxem.net/arduino/arduino5.php)

我有一个 arduino uno 板，上面安装了一个 sparkfun 蓝牙设备。我可以将数据从 android 连接并发送到 arduino，我看到这些数据在串行监视器中弹出，但我无法从 arduino（串行监视器）发送数据并返回到 Android。

我正在使用在活动的 onResume 方法中启动的 ConnectThread。这是我的线程的代码：

```
private class ConnectedThread extends Thread {
        private final BluetoothSocket mmSocket;
        private final InputStream mmInStream;
        private final OutputStream mmOutStream;

        public ConnectedThread(BluetoothSocket socket) {
            Log.d("THREAD", "constructor");
            mmSocket = socket;
            InputStream tmpIn = null;
            OutputStream tmpOut = null;

            // Get the input and output streams, using temp objects because
            // member streams are final
            try {
                tmpIn = socket.getInputStream();
                tmpOut = socket.getOutputStream();
            } catch (IOException e) { }

            mmInStream = tmpIn;
            mmOutStream = tmpOut;
        }

        public void run() {
            Log.d("THREAD", "inside run" );
            byte[] buffer = new byte[256];  // buffer store for the stream
            int bytes; // bytes returned from read()

            // Keep listening to the InputStream until an exception occurs
            while (true) {
                Log.d("in loop", "waiting for data");
                try {
                    // Read from the InputStream
                    bytes = mmInStream.read(buffer);        // Get number of bytes and message in "buffer"
                    h.obtainMessage(RECIEVE_MESSAGE, bytes, -1, buffer).sendToTarget();     // Send to message queue Handler
                    Log.d("recieve", "b " + bytes);
                } catch (IOException e) {
                    break;
                }
            }
        }

        /* Call this from the main activity to send data to the remote device */
        public void write(String message) {
            Log.d("TAG", "...Data to send: " + message + "...");
            byte[] msgBuffer = message.getBytes();
            try {
                mmOutStream.write(msgBuffer);
            } catch (IOException e) {
                Log.d("TAG", "...Error data send: " + e.getMessage() + "...");     
              }
        }

        /* Call this from the main activity to shutdown the connection */
        public void cancel() {
            try {
                mmSocket.close();
            } catch (IOException e) { }
        }

    } 
```

我是否需要使用始终等待数据的服务，因为串行监视器仅在我按发送时发送数据？

编辑：Arduino代码：

```
 #include <SoftwareSerial.h>  

int bluetoothTx = 2;  // TX-O pin of bluetooth mate, Arduino D2
int bluetoothRx = 3;  // RX-I pin of bluetooth mate, Arduino D3

SoftwareSerial bluetooth(bluetoothTx, bluetoothRx);

void setup()
{
  Serial.begin(9600);  // Begin the serial monitor at 9600bps

  bluetooth.begin(115200);  // The Bluetooth Mate defaults to 115200bps
  bluetooth.print("$$$");  // Enter command mode
  delay(100);  // Short delay, wait for the Mate to send back CMD
  bluetooth.println("U,9600,N");  // Temporarily Change the baudrate to 9600, no parity
  // 115200 can be too fast at times for NewSoftSerial to relay the data reliably
  bluetooth.begin(9600);  // Start bluetooth serial at 9600
}

   void loop()
{
  if(bluetooth.available())  // If the bluetooth sent any characters
  {
    // Send any characters the bluetooth prints to the serial monitor
    Serial.print((char)bluetooth.read());  
  }
  if(Serial.available())  // If stuff was typed in the serial monitor
  {
    char c = (char) Serial.read();
     // Send any characters the Serial monitor prints to the bluetooth
    bluetooth.print(c); 
  }
  // and loop forever and ever!
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:32:08.257

不，您不需要服务，线程应该可以正常工作。此代码实际上与通过 Android SDK 提供的 BluetoothChat 示例中提供的代码相同，因此它应该可以工作。

通过使用串行监视器，您正在向 Arduino 发送数据，所以我假设您正在使用 Serial.println("data string") 或类似的东西回显该数据。但是，由于您阅读了您引用的文章，因此您将蓝牙芯片连接到 Arduino 上的 RX/TX 引脚（0 和 1），这与串行监视器使用的引脚相同。我发现当蓝牙芯片连接到这些时，串口监视器仍然可以接收数据，但不能再发送数据。所以你的问题在Arduino方面。

此外，这个[StackOverflow 答案](https://stackoverflow.com/questions/12718301/android-and-arduino-both-receiving-strange-values-via-bluetooth)提到您不能同时在引脚 0 和 1 上使用串行监视器和蓝牙。

如果您仍想使用串行监视器，请将蓝牙芯片连接到不同的数字引脚并使用 SoftwareSerial Arduino 库，如此[处](http://bellcode.wordpress.com/2012/01/02/android-and-arduino-bluetooth-communication/)所述。

[如本文](http://www.instructables.com/id/Android-talks-to-Arduino/step4/Change-Android-Bluetooth-Chat-sample-App/)所述，我对蓝牙聊天示例进行了简单修改，并且我的 Android 从 Arduino 接收没有问题。

# android - 为什么 OnGroupClick 重绘 ExpandableList

> ID：14479351
> 
> 赞同：0
> 
> 时间：2013-01-23T12:07:07.463
> 
> 标签：android, expandablelistview, selecteditem

我是安卓新手。

我有一个`ExpandableListView`，我设法突出显示（持久）选定的项目/子项。但是当我单击/触摸该组时，突出显示的项目消失了，似乎列表已被重绘。在`onGroupClick`中，我试图保持突出显示的项目，但即使这样它也会重绘列表。

```
 @Override
public boolean onGroupClick(ExpandableListView parent, View v,
        int groupPosition, long id) {
    // TODO keepSelectedModuleHighlited. Right now its not working.
    if (parent.isGroupExpanded(groupPosition)) {
        parent.collapseGroup(groupPosition);
    } else {
        parent.expandGroup(groupPosition);
    }

    keepSelectedModuleHighlited();

    return true;
} 
```

和方法：keepSelectedModuleHighlited

```
 private void keepSelectedModuleHighlited() {
    if (lastSelectedView != null && lastSelectedDrawble != null) {
        lastSelectedView.setBackgroundDrawable(this.getResources()
                .getDrawable(R.drawable.module_selected));
    }

} 
```

如何在重绘列表之后放置我的方法？任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:40:10.977

因为当Android“重绘列表”时，它会调用`getChildView()`你的`ExpandableListAdapter`，你需要把你的高亮代码放在`getChildView()`.

# java - 尝试为 JPA 表添加新值时出错

> ID：14479357
> 
> 赞同：1
> 
> 时间：2013-01-23T12:07:47.193
> 
> 标签：java, sql-server, jpa, eclipselink, derby

我使用 JPa API 并且它运行良好，我尝试将新成员/列添加到类（表）中，当我尝试为其添加数据时，它运行良好，但在提交部分我得到了以下错误的转储

线程“主”javax.persistence.RollbackException 中的异常：异常 [EclipseLink-4002] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345)：org.eclipse.persistence.exceptions.DatabaseException 内部异常：java.sql.SQLSyntaxErrorException： 'DOUBLE1' 不是表或 VTI 'TEST.PERSON' 中的列。错误代码：20000 调用：INSERT INTO PERSON（ID、DOUBLE1、FIRSTNAME、LASTNAME、NONSENSEFIELD）值（？，？，？，？，？）绑定 => [5 个参数绑定]

但是在表人中，我添加了成员​​ double1 如下

```
@Entity
public class Person {

    @Id
    @GeneratedValue(strategy = GenerationType.TABLE)
    private String id;
    private String firstName;
    private String lastName;
    private double double1;

....

    public double getDouble1() {

        return double1;
    }

    public void setDouble1(double double1) {

        this.double1 = double1;
    } 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:19:58.733

数据库表 VTI 'TEST.PERSON' 中显然没有列 DOUBLE1。向 JPA 实体添加新字段不会自动使其也出现在数据库中。

# javascript - 调用表单元素的 Javascript 函数在 IE8 中不起作用

> ID：14479360
> 
> 赞同：0
> 
> 时间：2013-01-23T12:07:54.470
> 
> 标签：javascript, forms

```
 function HandleFileButtonClick(val)
  {
      var ss=val.name;
      var n=ss.split("choiceimgs");
      alert(n[1]);
      document.forms["addpoll"]["choiceimg" + n[1]].click();
  } 
```

在上面的编码中，它将变量值保存到 n[1]。警报显示一个数字。如果该行有效，则它将单击文件输入并打开浏览器窗口。

这在 chrome 中运行良好，但在 IE8 中不起作用。如何在 IE8 中编写上述行。并且`document.forms['addpoll']['choiceimg'+i].style.display='';`

此行在我的页面中也不起作用。我尝试了一整天来解决这个问题。但我找不到任何解决方案。任何人都可以帮助我解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:24:21.367

因为没有可用的示例，我**假设**代码行

```
document.forms["addpoll"]["choiceimg" + n[1]].click(); 
```

指向表单域。如果是这样，那么您必须将其更改为以下内容：

```
document.forms["addpoll"].elements["choiceimg" + n[1]].click(); 
```

我不确定 100% 的连接`.click()`是否正确，尽管更改为

```
document.forms['addpoll'].elements['choiceimg'+i].style.display=''; 
```

顺便说一句，我建议显式使用 value`none`和`display`，这样您就可以排除错误来源。

# iphone - UIlabel 变成一个网址？

> ID：14479362
> 
> 赞同：0
> 
> 时间：2013-01-23T12:07:59.747
> 
> 标签：iphone, xcode, cocoa, webview

我使用此代码创建了一个包含我的位置数据的 uilabel，

```
longitudedata.text = [NSString stringWithFormat:@"longitude=%f", location.coordinate.longitude];
speeddata.text = [NSString stringWithFormat:@"speed=%f", [location speed] * 2.2369];
altitudedata.text = [NSString stringWithFormat:@"altitude=%f", [location altitude]]; 
```

但现在我需要将这些添加到一个 url 中，这样它就会将该数据发送到我的服务器，但我尝试过的一切都可以正常工作:(

```
NSURL *myURL = [NSURL URLWithString:[@"http://servername/ldtracker.aspx?id=3&" stringByAppendingString:longitudedata.text]]; 
```

依此类推，但这个dosnt工作，似乎iv尝试了一切

我是xcode的初学者，请帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:17:51.357

UILabel 不处理 url，你需要给他们一个 NSString。label.text = [NSString stringWithFormat:@"http://servername/ldtracker.aspx?id=3&%@", longitudedata.text];

如果我正确理解了您的问题，这应该可以

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:17:54.863

```
NSURL *myURL = [NSURL URLWithString:[NSString stringWithFormat:@"http://servername/ldtracker.aspx?id=3&%@&%@%@",longitudedata.text,speeddata.text,altitudedata.text]]; 
```

# asp.net - ASP.Net Session 变量存储实际值还是仅仅是引用？

> ID：14479363
> 
> 赞同：3
> 
> 时间：2013-01-23T12:08:01.993
> 
> 标签：asp.net, .net, session

我有以下代码，我正在获取存储在 Session 中的局部变量中的数据表，并更新数据表。下次，当我访问会话时，会获取更新的值。（在我的情况下，为变量 objTable1 获取的第一行已删除数据表）：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        DataTable objTable = (DataTable)Session["dTable"];

        objTable.Rows[0].Delete();

        DataTable objTable1 = (DataTable)Session["dTable"];

    } 
```

我想，局部变量会复制会话变量并在其中更新，不要更新会话变量。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:11:31.477

您正在处理对会话中对象的引用，所以它应该是这样工作的。

如果您想使用不同的对象，您应该在会话中创建一个要使用的对象的克隆，然后如果您想保存任何更改，请用克隆替换存储在会话中的对象。

# css - Internet Explorer 水平尾端导航错位

> ID：14479365
> 
> 赞同：0
> 
> 时间：2013-01-23T12:08:07.987
> 
> 标签：css, internet-explorer

整个图像在 Firefox / Chrome / Safari 中是可点击的，但在 Internet Explorer 中它只能在图像右侧点击。

[http://www.dawaf.co.uk/cthm/work/](http://www.dawaf.co.uk/cthm/work/)

Javascript

```
<script type="text/javascript">
  $().ready(function() {
    $(".slider1").codaSlider( {dynamicArrows: false, dynamicTabs: false} );        $(".slider1 .coda-nav-right-wrapper").mouseover(function() {
      $(".nav1").css("display","block");
    });
    $(".slider1 .coda-nav-right-wrapper").mouseout(function() {
      $(".nav1").css("display", "none");
    });
    $("#coda-nav-right-1 > a > .coda-nav-right-wrapper").mouseover(function() {
      $(".caption1").css("display", "inline");
    });         

    $("#coda-nav-right-1 > a > .coda-nav-right-wrapper").mouseout(function() {
      $(".caption1").css("display", "none");
    });
  });
</script> 
```

CSS

```
#content .coda-nav-right-wrapper {
  display: block;
  position: absolute;
  left: 0px;
  top: 0px;
  z-index: 40;
  width: 900px;
  height: 450px;
  cursor: pointer;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:12:30.190

`<div>`内联元素中有一个块级元素`<a>`。这对于 IE 在语义上无效。所以，给标签一个或`display: block;`，修复它。`float: left;``<a>`

# android - 将联系人缩略图设置为小部件图像视图

> ID：14479366
> 
> 赞同：0
> 
> 时间：2013-01-23T12:08:12.897
> 
> 标签：android, widget, remoteview

我试图用联系人的缩略图设置我的小部件的图像视图。我正在尝试使用活动的图像视图，并且能够获得缩略图，但是当我尝试在 RemoteViews 中使用 setImageViewUri 获得相同的效果时，它没有更新我的小部件的图像视图。我在下面发布了我的代码片段..

```
ImageView mine = (ImageView) findViewById(R.id.pickcontact);
                if (phone_thumbnail != null) {
                    mine.setImageURI(Uri.parse(phone_thumbnail));
                    Log.d("Pick", "Image is set");

                } 
```

这段代码工作正常。

```
RemoteViews views = new RemoteViews(getPackageName(),
                        R.layout.widget_alyout);
                if (phone_thumbnail != null) {

                    views.setImageViewUri(R.id.widget_icon_imageview,
                            Uri.parse(phone_thumbnail));

                } else {
                    views.setImageViewResource(R.id.widget_icon_imageview,
                            R.drawable.image);

                } 
```

此代码不起作用。setImageViewUri 和 setImageViewResource 都没有更新我的小部件的 imageview。任何想法？请帮忙。谢谢， 杰扬蒂

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-12-13T05:19:03.570

我用了

**rv.setImageViewBitmap(R.id.image_photo, 位图); whr rv = RemoteView 参考**

它对我来说很好。这种方法的一件事是您必须为您的联系人图像创建位图。

# symfony - BDD 中存在 FOSFacebookBundle + FosUserBundle 电子邮件

> ID：14479369
> 
> 赞同：4
> 
> 时间：2013-01-23T12:08:24.083
> 
> 标签：symfony, fosuserbundle, fosfacebookbundle

我有一个我无法解决的特殊用例。当用户单击`Facebook Connect`并在我的数据库中找到类似的电子邮件时。我想问用户该帐户是否属于他。

如果答案是肯定的，他需要连接他的帐户，然后将其添加`Facebook ID`到数据库中。

如果答案是否定的，我在数据库中创建一个新用户并登录。

我没有找到最好的方法来做到这一点。有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:39:45.683

在控制器中，您可以使用 fos user bundle user manager 检查数据库中是否存在电子邮件

```
$user = $this->get('fos_user.user_manager')->findUserByEmail($email); 
```

用户确认后，您可以使用已实现的 facebook 提供程序来执行必要的操作。

之间，我有一个问题要问你，

> “如果答案是否定的，我在数据库中创建一个新用户并登录。”

您如何使用相同的电子邮件创建新用户（假设电子邮件是唯一的）？

# birt - BIRT 报告查看器本地化

> ID：14479372
> 
> 赞同：1
> 
> 时间：2013-01-23T12:08:34.793
> 
> 标签：birt

我正在使用 Birt web report viewer 4.2.1 ，如何将报告查看器语言本地化为俄语，eclipse 站点提供的本地化仅适用于某些 IDE，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:37:59.950

我对西班牙语也有同样的问题。我通过从“ [http://www.eclipse.org/babel/downloads.php](http://www.eclipse.org/babel/downloads.php) ”下载“Helios”包解决了这个问题。

对于俄语：

1.  下载[http://www.eclipse.org/downloads/download.php?file=/technology/babel/babel_language_packs/R0.10.1/helios/BabelLanguagePack-birt-ru_3.6.0.v20121120125106.zip](http://www.eclipse.org/downloads/download.php?file=/technology/babel/babel_language_packs/R0.10.1/helios/BabelLanguagePack-birt-ru_3.6.0.v20121120125106.zip)
2.  解压
3.  复制 BIRT 查看器安装的“org.eclipse.birt.resources.nl_ru_3.6.0.v20121120125106.jar”WEB-INF/lib 目录。

希望能帮助到你！

# vim - 在VIM中使用标签栏时如何跳转下一个标签

> ID：14479373
> 
> 赞同：1
> 
> 时间：2013-01-23T12:08:35.443
> 
> 标签：vim, tagbar

使用显示标签栏的 VIM 时。我想使用下一个命令`.vimrc`

```
nnoremap tn <C-w>h<cr> 
```

跳转到标签栏中的下一个标签。但它根本没有效果。

当我输入 tn 时，光标跳转到下一个标签，但主窗口保持静止

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:49:00.540

我不再使用 TagBar，所以我无法为您测试它，但[文档似乎说](https://github.com/majutsushi/tagbar/blob/master/doc/tagbar.txt#L243)您可以使用：

```
:TagbarOpen fj 
```

跳转到 TagBar 窗口。我认为它比`<C-w>h`与特定布局密切相关的更可靠。

因此，可能的映射是：

```
nnoremap tn :TagbarOpen fj<CR> 
```

但是您的映射和这个映射都不允许您将光标放在您似乎想要的下一个标签上（*“跳转到标签栏中的下一个标签”*）。TagBar 有一个映射，`<C-n>`可以转到下一个可能是也可能不是您想要的顶级标签。您可以将其添加到混合中，或者，也许，使用`j`：

```
nnoremap tn :TagbarOpen fj<CR><C-n>
nnoremap tn :TagbarOpen fj<CR>j 
```

* * *

附带说明一下，在使用一个月后，我发现 TagBar 在显示我的代码结构方面相当出色，但在帮助我浏览它方面却相当糟糕。因为我主要将它用于导航，所以我放弃了它，而是选择了 Vim 的默认 ctags 集成（`<C-]>`、、`:tag <Tab>`等等`:tselect`……）和 CtrlP 的美妙的`:CtrlPBufTag`和`:CtrlPTag`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:26:01.637

通常，`<CR>`在正常模式下，只需将光标移动到下一行的开头。为了使该键跳转到当前行的标签，标签*栏*插件在其标签窗口中定义了一个缓冲区本地映射。虽然通常建议使用`:nnoremap`，但这是一种必须允许重新映射的情况`:nmap`：

```
:nmap tn <C-w>h<cr> 
```

# javascript - Win XP 上的 IE7 不显示 PDF 文件的下载文件对话框

> ID：14479376
> 
> 赞同：0
> 
> 时间：2013-01-23T12:08:40.067
> 
> 标签：javascript, popup, internet-explorer-7, windows-xp

我正在我们的 Umbraco 站点中测试以下 JavaScript：

```
<script type="text/javascript">
    function doSomething(id, name, userId, siteId, siteName, breadcrumb, documentUrl) {
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "/myService.asmx/DoSomething",
            cache: false,
            dataType: 'json',
            data: "{ 'id' : '" + id
                + "', 'name' : '" + name
                + "', 'userId' : '" + userId
                + "', 'siteId' : '" + siteId
                + "', 'siteName' : '" + sitename
                + "', 'breadcrumb' : '" + breadcrumb + "'}",
            success: function () {
                window.open(documentUrl);
            }
        });
    }
</script> 
```

我删除了一些东西以保留核心功能代码。对于我在下面讨论的两种情况，实际的 Web 服务调用都可以正常工作，它打开了`documentUrl`导致问题的方法。

现在，当我在运行 WinXP 和 IE7 的 VM 中测试网页时，我遇到了一个问题。我没有看到脚本打开一个新窗口并向我显示 PDF（或者至少让我选择保存它），而是看到一个新的 IE 实例打开然后关闭的快速闪现。

当我在 IE9 中测试同一页面时，在我的 Win7 笔记本电脑上，并通过 Web Dev Toolbar 更改为以 IE7 模式呈现时，我可以看到显示的 PDF 文件（因为我安装了 Foxit Reader）。

我的问题是：为什么在 WinXP 中会`window.open()`快速显示一个新的 IE 窗口，然后它会关闭？

我查看了两个系统上的 Fiddler 并发现了不同之处。VM下，请求PDF时，HTTP状态为206，为部分内容。在 IE9 下，请求是 HTTP 200，而不是 206。

有人可以解释这里可能发生了什么以及如何修复 WinXP IE7 实例吗？

我一直在查看 WinXP/IE7 中的弹出窗口阻止程序设置，并告诉它允许我正在使用的域的弹出窗口。我也禁用了拦截器，但我仍然遇到同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:16:37.913

我没有包含`async : false`在 AJAX 配置中。之后，IE 很高兴，现在显示下载文件对话框。

# linux - 将 /etc/yum.repos.d/* 复制到所有计算机上的同一目录，无需重复输入 root 密码

> ID：14479378
> 
> 赞同：0
> 
> 时间：2013-01-23T12:08:41.260
> 
> 标签：linux, perl, bash

我想规范化我们小型网络上所有计算机的 yum.repo 文件，即

```
sudo scp /etc/yum.repos.d/* $HOSTNAME:/etc/yum.repos.d/ 
```

我可以很容易地遍历所有主机名并执行复制命令，但是每次都提示我输入 root 密码，这变得很烦人。如何使用 bash 或 perl 编写脚本，这样我只需要输入一次 root 命令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T12:12:22.437

例如，使用 ssh 密钥实现无密码身份验证，如此[处](http://www.debian-administration.org/articles/152)所述。这将允许使用您的主文件夹中的 ssh 密钥文件在没有密码提示的情况下运行脚本。

# python - 没有名为 Grass.script 的模块

> ID：14479382
> 
> 赞同：3
> 
> 时间：2013-01-23T12:08:57.273
> 
> 标签：python

我在导入grass.script 时遇到问题 - 错误说没有模块名称grass.script。

我已阅读有关[http://grasswiki.osgeo.org/wiki/GRASS_and_Python#Python_Scripting_Library的信息](http://grasswiki.osgeo.org/wiki/GRASS_and_Python#Python_Scripting_Library)

我已将环境变量设置如下：

```
GISBASE = C:\OSGeo4W\apps\grass\grass-6.4.2
GISRC = C:\Users\rjones\AppData\Roaming\GRASS6\grassrc6
GRASS_SH = C:\OSGeo4W\apps\msys\bin\sh.exe
PYTHONLIB = C:\Python27
PYTHONPATH = C:\OSGeo4W\apps\grass\grass-6.4.2\etc\python
PATH = C:\Python27\;C:\OSGeo4W\apps\grass\grass-6.4.2\etc;C:\OSGeo4W\apps\grass\grass-6.4.2\etc\python;C:\OSGeo4W\apps\grass\grass-6.4.2\lib;C:\OSGeo4W\apps\grass\grass-6.4.2\bin;C:\OSGeo4W\apps\msys\bin
pythonexe = C:\Python27\ 
```

如果有人对解决问题有任何建议，我将不胜感激。

# php - PhP 邮件函数返回 true 但邮件未送达

> ID：14479383
> 
> 赞同：0
> 
> 时间：2013-01-23T12:08:58.013
> 
> 标签：php, email

我有一个域`www.ipsmeerut.com`，我使用下面的脚本发送邮件。它返回 true，但邮件未发送。

这是我的脚本：

```
 <?php
    $to = 'brajnacs@gmail.com';
    $subject = 'Test';
    $headers = "From: Test<no-reply@ipsmeerut.com>\n";
    $headers .= "MIME-Version: 1.0\n";
    $headers .= "Content-Type: text/html; charset=ISO-8859-1\n";
    $message = "<html><body>";
    $message .= "<h1>Hello, World!</h1>";
    $message .= "</body></html>";
    $res=false;
    $res=mail($to, $subject, $message, $headers);
    var_dump($res);
    echo "Mail sent to ".$to;
    ?> 
```

该脚本在我的其他域上运行良好。`var_dump`正在显示`true`。我的邮件服务器是`aspmx.l.google.com`，我也添加`MX Entry`了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:37:33.087

为什么不直接使用您的默认 MX 并再次尝试测试？谷歌允许发送带有身份验证的匿名电子邮件吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:25:02.260

使用 phpmailer，试试这个

```
require_once('../class.phpmailer.php');

$mail             = new PHPMailer(); // defaults to using php "mail()"

$body             = 'you content goes here';
$body             = eregi_replace("[\]",'',$body);

$mail->AddReplyTo("name@yourdomain.com","First Last");

$mail->SetFrom('name@yourdomain.com', 'First Last');

$mail->AddReplyTo("name@yourdomain.com","First Last");

$address = "whoto@otherdomain.com";
$mail->AddAddress($address, "John Doe");

$mail->Subject    = "PHPMailer Test Subject via mail(), basic";

$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test

$mail->MsgHTML($body);

$mail->AddAttachment("images/phpmailer.gif");      // attachment
$mail->AddAttachment("images/phpmailer_mini.gif"); // attachment

if(!$mail->Send()) {
  echo "Mailer Error: " . $mail->ErrorInfo;
} else {
  echo "Message sent!";
} 
```

# php - 如何在放置请求中获取php中的文件名

> ID：14479386
> 
> 赞同：3
> 
> 时间：2013-01-23T12:09:13.817
> 
> 标签：php, put

我知道我们可以使用

```
file_get_contents("php://input"); 
```

但是我如何在 put 请求中获取文件名？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T13:07:35.450

文件名不作为请求的一部分发送。如果要在服务器端获取文件名，则必须通过其他方式传递它，即查询参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T21:02:18.410

如果您在[PUT 方法支持](http://php.net/manual/en/features.file-upload.put-method.php)页面中使用 PUT，您可以获得他们 PUT 的文件名`$_SERVER['REQUEST_URI']`

例如，如果我有接收 PHP 脚本

```
<?php
/* PUT data comes in on the stdin stream */
$request_body = @file_get_contents('php://input'); 

error_log("Received PUT,  filename: {$_SERVER['REQUEST_URI']}, " . strlen($request_body) . " bytes");
?> 
```

当我发出 CURL 时：

```
curl -X PUT -T "localfile.txt" http://example.com/interesting/target/name.txt 
```

我得到输出（在我的错误日志中）

```
Received PUT,  filename: interesting/target/name.txt, 4931 bytes 
```

如果您问我如何找出源文件系统 (localfile.txt) 中文件的名称，我认为这不会被传递。

# core-data - 如何解决错误：实体 GroceryItems 不符合键“hasLocations”的键值编码

> ID：14479388
> 
> 赞同：1
> 
> 时间：2013-01-23T12:09:19.267
> 
> 标签：core-data, crash, entity-relationship

接下来是我可能认为的所有背景，以尝试确定错误的来源。当然，我会提供任何其他可能有用的信息。在此先感谢您的帮助。

我是 Core Data 的新手，我有一个名为 GroceryItem 的实体。它有一个名为 hasLocations 的一对多关系，我正在尝试使用以下代码进行查询：

```
itemObject = (GroceryItem *)[GroceryItem itemNameToObject:itemName];

if (itemObject != nil)
{
    NSLog(@"%@", [NSString stringWithFormat:@"initAndFillItemLocationsTable got an item named %@", itemObject.name]);
}

if (itemLocations != nil)
{
    [itemLocations removeAllObjects];
}

if (itemObject != nil)
{
    NSLog(@"Before mutable set assignment");

    NSMutableSet *mutableLocationsSet = [itemObject mutableSetValueForKeyPath:@"hasLocations"]; 
```

我在输出中看到“Before mutable set assignment”消息，然后是

2013-01-23 03:27:14.898 Grocery Manager[6431:11603] initAndFillItemLocationsTable 有一个名为 Cream Cheese 的项目 2013-01-23 03:27:14.899 Grocery Manager[6431:11603] 在可变集分配之前 2013-01-23 03:27:14.901 Grocery Manager[6431:11603] *** 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[valueForUndefinedKey:]：实体 GroceryItems 与键“hasLocations”的键值编码不兼容。***First throw call stack: (0x15eb012 0x1410e7e 0x1673fb1 0x11c304 0xe298db 0xb8374 0xe298db 0xec3180 0xec31de 0x17450 0xaa5c 0x439817 0x439882 0x439b2a 0x450ef5 0x450fdb 0x451286 0x451381 0x451eab 0x4524a3 0x452098 0x7adda3 0x79fad9 0x79fb54 0x407899 0x407b3d 0xe0ee83 0x15aa376 0x15a9e06 0x1591a82 0x1590f44 0x1590e1b 0x24377e3 0x2437668 0x35865c 0x27bd 0x26e5) libc++abi.dylib : 终止调用抛出异常

GroceryItem 类定义的内容是：

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface GroceryItem : NSManagedObject

@property (nonatomic, retain) NSString *name;
@property (nonatomic, retain) NSSet *hasLocations;
@property (nonatomic, retain) NSSet *containedInIngredients;

@end

@interface GroceryItem (CoreDataGeneratedAccessors)

- (void)addHasLocationsObject:(NSManagedObject *)value;
- (void)removeHasLocationsObject:(NSManagedObject *)value;
- (void)addHasLocations:(NSSet *)values;
- (void)removeHasLocations:(NSSet *)values;

- (void)addContainedInIngredientsObject:(NSManagedObject *)value;
- (void)removeContainedInIngredientsObject:(NSManagedObject *)value;
- (void)addContainedInIngredients:(NSSet *)values;
- (void)removeContainedInIngredients:(NSSet *)values;

+(GroceryItem *)itemNameToObject:(NSString *)itemName; 
```

我已经在数据库编辑器中验证了 GroceryItem 类已分配给实体 GroceryItem。

我阅读了 Key-Value Coding Programming Guide 并在 GroceryItem.m 中实现了以下代码：

```
- (void)addHasLocationsObject:(NSManagedObject *)value
{
    [self.hasLocations setByAddingObject:value];
}

- (void)removeHasLocationsObject:(NSManagedObject *)value
{
    NSMutableSet *mutable = [NSMutableSet setWithSet:self.hasLocations];

    [mutable removeObject:value];

    self.hasLocations = mutable;
}

- (void)addHasLocations:(NSSet *)values
{
    [self.hasLocations setByAddingObjectsFromSet:values];
}

- (void)removeHasLocations:(NSSet *)values
{
    NSMutableSet *mutable = [NSMutableSet setWithSet:self.hasLocations];

    for (id obj in [mutable allObjects])
    {
        if ([values containsObject:obj])
        {
            [mutable removeObject: obj];
        }
    }
    self.hasLocations = mutable;
}

- (NSUInteger)countOfHasLocations
{     
    return [self.hasLocations count];
}

- (NSEnumerator *)enumeratorOfHasLocations
{
    return [self.hasLocations objectEnumerator];
}

- (GroceryLocation *)memberOfHasLocations:(GroceryLocation *)anObject
{
    return [self.hasLocations member:anObject];

} 
```

静态 itemNameToObject 函数如下所示：

```
+(GroceryItem *)itemNameToObject:(NSString *)itemName
{
    GroceryItem *groceryItem;

    groceryItem = nil;

    if (itemName != nil)
    {
        GroceryManagerAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

        NSManagedObjectContext *context = [appDelegate managedObjectContext];

        NSFetchRequest *request = [[NSFetchRequest alloc] init];
        [request setEntity:[NSEntityDescription entityForName:@"GroceryItems" inManagedObjectContext:context]];

        [request setPredicate:[NSPredicate predicateWithFormat:@"name == %@", itemName]];

        NSError *error;
        NSArray *groceryItemObjects = [context executeFetchRequest:request error:&error];

        NSInteger countOfGroceryItems = [groceryItemObjects count];

        if (countOfGroceryItems == 1)
        {
            groceryItem = (GroceryItem *)[groceryItemObjects objectAtIndex:0];
        }
    }

    return groceryItem;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:41:38.387

*（来自评论：）*崩溃是由于实体被声明为“GroceryItems”，但“hasLocations”是“GroceryItem”类的属性引起的。获取请求返回一个“GroceryItems”对象数组，这些对象不响应“hasLocations”方法。

此外，通常不需要实现 Core Data 访问器方法，它们是在运行时动态创建的。

# restkit - 有没有像 raywenderlich 这样的 Restkit 2.0 教程？

> ID：14479392
> 
> 赞同：24
> 
> 时间：2013-01-23T12:09:31.993
> 
> 标签：restkit

我正在学习restkit api。我找到了一个非常好的[Raywenderlich](http://www.raywenderlich.com/13097/intro-to-restkit-tutorial) restkit 教程。但它与 Restkit 0.10.1 集成。我想学习一个 RestKit-0.20.0-pre6。如果有人在iOS中有这样的好教程。请分享。提前致谢。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-25T03:36:35.827

最后，Raywenderlich 更新了新 RestKit 的教程 [http://www.raywenderlich.com/58682/introduction-restkit-tutorial](http://www.raywenderlich.com/58682/introduction-restkit-tutorial)

RestKit 0.20 [http://blog.alexedge.co.uk/introduction-to-restkit-0-20/](http://blog.alexedge.co.uk/introduction-to-restkit-0-20/)

Reskit 0.20 教程 [https://github.com/RestKit/RKGist/blob/master/TUTORIAL.md](https://github.com/RestKit/RKGist/blob/master/TUTORIAL.md)

Blake Watters 使用 RestKit 开发 RESTful iOS 应用程序 [http://code.tutsplus.com/tutorials/restkit_ios-sdk--mobile-4524](http://code.tutsplus.com/tutorials/restkit_ios-sdk--mobile-4524) [http://code.tutsplus.com/tutorials/advanced-restkit-development_iphone-sdk--手机5916](http://code.tutsplus.com/tutorials/advanced-restkit-development_iphone-sdk--mobile-5916)

[http://madeveloper.blogspot.com/2013/01/ios-restkit-tutorial-code-for-version.html](http://madeveloper.blogspot.com/2013/01/ios-restkit-tutorial-code-for-version.html)

最后总是关注 :) [https://github.com/RestKit/RestKit/wiki](https://github.com/RestKit/RestKit/wiki)

NSScreen 是一项付费服务​​，但其代码是免费的 - [https://github.com/subdigital/nsscreencast](https://github.com/subdigital/nsscreencast)

NSScreencast 教程 -

[http://nsscreencast.com/episodes/53-restkit-object-manager](http://nsscreencast.com/episodes/53-restkit-object-manager)

[http://nsscreencast.com/episodes/52-restkit-coredata](http://nsscreencast.com/episodes/52-restkit-coredata)

[http://nsscreencast.com/episodes/51-intro-to-restkit-mapping](http://nsscreencast.com/episodes/51-intro-to-restkit-mapping)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T09:53:44.413

我发现下面的代码可以与 RestKit 0.20 一起使用。

在 RayWenderlich 的 Location.m、Location.m、Venue.m 和 Venue.h 教程中找到的其他代码应该仍然可以。

```
//
//  MasterViewController.m
//  CoffeeShop
//
//
//  Copyright (c) 2013 uihelpers. All rights reserved.
//

#import "MasterViewController.h"
#import <RestKit/RestKit.h>
#import "Venue.h"
#import "Location.h"

#define kCLIENTID "REPLACE_WITH_OWN_ID"
#define kCLIENTSECRET "REPLACE_WITH_OWN_SECRET"

@interface MasterViewController () {
    NSMutableArray *_objects;
    NSArray *cafeArray;
}
@end

@implementation MasterViewController

- (void)awakeFromNib
{
    [super awakeFromNib];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.navigationItem.leftBarButtonItem = self.editButtonItem;

    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject:)];
    self.navigationItem.rightBarButtonItem = addButton;

    NSURL *baseURL = [NSURL URLWithString:@"https://api.foursquare.com/v2"];

    AFHTTPClient * client = [AFHTTPClient clientWithBaseURL:baseURL];
    [client setDefaultHeader:@"Accept" value:RKMIMETypeJSON];

    RKObjectManager *objectManager = [[RKObjectManager alloc] initWithHTTPClient:client];

    RKObjectMapping *venueMapping = [RKObjectMapping mappingForClass:[Venue class]];
    [venueMapping addAttributeMappingsFromDictionary:@{
     @"name" : @"name"
     }];

    RKObjectMapping *locationMapping = [RKObjectMapping mappingForClass:[Location class]];
    [locationMapping addAttributeMappingsFromDictionary:@{ @"address": @"address", @"city": @"city", @"country": @"country", @"crossStreet": @"crossStreet", @"postalCode": @"postalCode", @"state": @"state", @"distance": @"distance", @"lat": @"lat", @"lng": @"lng"}];

    /*[venueMapping mapRelationship:@"location" withMapping:locationMapping];
    [objectManager.mappingProvider setMapping:locationMapping forKeyPath:@"location"];*/

    [venueMapping addPropertyMapping:[RKRelationshipMapping relationshipMappingFromKeyPath:@"location" toKeyPath:@"location" withMapping:locationMapping]];

    RKResponseDescriptor * responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:venueMapping
                                                                                    pathPattern:nil
                                                                                    keyPath:@"response.venues"
                                                                                    statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];
    [objectManager addResponseDescriptor:responseDescriptor];

    NSString *latLon = @"37.33,-122.03";
    NSString *clientID = [NSString stringWithUTF8String:kCLIENTID];
    NSString *clientSecret = [NSString stringWithUTF8String:kCLIENTSECRET];

    NSDictionary *queryParams;
    queryParams = [NSDictionary dictionaryWithObjectsAndKeys:latLon, @"ll", clientID, @"client_id", clientSecret, @"client_secret", @"coffee", @"query", @"20120602", @"v", nil];

    [objectManager getObjectsAtPath:@"https://api.foursquare.com/v2/venues/search"
                         parameters:queryParams
                            success:^(RKObjectRequestOperation * operaton, RKMappingResult *mappingResult)
     {
         //NSLog(@"success: mappings: %@", mappingResult);
         NSArray *result = [mappingResult array];
         cafeArray = [mappingResult array];
         for (Venue *item in result) {
             NSLog(@"name=%@",item.name);
             NSLog(@"name=%@",item.location.distance);

         }
         [self.tableView reloadData];
     }
                            failure:^(RKObjectRequestOperation * operaton, NSError * error)
     {
         NSLog (@"failure: operation: %@ \n\nerror: %@", operaton, error);
     }];

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (void)insertNewObject:(id)sender
{
    if (!_objects) {
        _objects = [[NSMutableArray alloc] init];
    }
    [_objects insertObject:[NSDate date] atIndex:0];
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
    [self.tableView insertRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
}

#pragma mark - Table View

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return cafeArray.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

    /*NSDate *object = [_objects objectAtIndex:indexPath.row];
    cell.textLabel.text = [object description];*/
    Venue *venueObject = [cafeArray objectAtIndex: indexPath.row];

    cell.textLabel.text = [venueObject.name length] > 24 ? [venueObject.name substringToIndex:24] : venueObject.name;
    cell.detailTextLabel.text = [NSString stringWithFormat:@"%.0fm", [venueObject.location.distance floatValue]];

    return cell;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [_objects removeObjectAtIndex:indexPath.row];
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    } else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view.
    }
}

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

@end 
```

本教程也可能会有所帮助：

[http://madeveloper.blogspot.com/2013/01/ios-restkit-tutorial-code-for-version.html](http://madeveloper.blogspot.com/2013/01/ios-restkit-tutorial-code-for-version.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:43:08.123

我问了一个类似的问题并设法解决了，就像有人给了我答案一样！典型的！

快速浏览这里[Restkit 0.20 基本操作](https://stackoverflow.com/questions/14737936/restkit-0-20-basic-operation/14769873#14769873)

# linux - 从 elf 文件的 DYNAMIC 部分中删除条目

> ID：14479394
> 
> 赞同：5
> 
> 时间：2013-01-23T12:09:34.017
> 
> 标签：linux, gcc, linker, static-linking, elf

我有 3rd 方库**A**，需要一些库**B**。 **A**链接到二进制文件，二进制文件与静态版本**B**链接。因此不再需要**B**的动态版本。

**A**不在我的控制之下，我无法重新编译它。因此，我想从**A的****DYNAMIC**部分中删除`NEEDED libA`条目。

 ****有没有办法用 objcopy 或其他工具来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:07:04.880

> 有没有办法用 objcopy 或其他工具来做到这一点？

我不知道任何现有的工具可以做到这一点，尽管[elfsh](http://www.eresi-project.org/wiki/TheELFsh)可能能够做到。

编写一个 C 程序来做你想做的事情是非常简单的： 的`.dynamic`部分`libA.so`是一个固定大小的记录表（类型为`ElfW(Dyn)`），由一个带有 的条目终止`.d_type == DT_NULL`。要删除特定`DT_NEEDED`条目，只需向上“滑动”所有后续条目（用 覆盖`entry[n]`等`entry[n+1]`）。这将在最后留下`.dynamic`两个`DT_NULL`条目，但什么都不应该关心。

一个复杂的问题是，如果`libB.so`包含引用的*版本化*符号，那么在table`libA.so`中会有额外的引用，而这些更难摆脱。如果你不摆脱引用，动态链接器将失败断言。`libB.so``DT_VERNEED``VERNEED`****

# sql-server-2008 - SQL Server：批量加载数据转换错误

> ID：14479397
> 
> 赞同：2
> 
> 时间：2013-01-23T12:09:50.867
> 
> 标签：sql-server-2008, bulkinsert, sql-view, triggers

我正在尝试将一些数据从固定宽度的文本文件加载到视图中，插入被代替触发器拦截。

应该在触发器中从 INSERTED 输出值的调试选择没有被触发，所以我怀疑故障点是批量插入本身。

以下是详细信息：这是我正在使用的：

启动批量插入命令如下所示：

```
BULK INSERT Staging.vViewSolelyForInsertion
FROM 'X:\path\to\datafile.txt'
WITH
(
    FORMATFILE='X:\path\to\formatfile.xml',
    FIRE_TRIGGERS,
    ERRORFILE='X:\path\to\Error.log'
) 
```

用于 Staging.vViewSolelyForInsertion 的 CREATE 命令：

```
CREATE VIEW Staging.vViewSolelyForInsertion
AS
SELECT
    CONVERT(NVARCHAR(4), NULL, 0) AS Door,
    CONVERT(NVARCHAR(9), NULL, 0) AS Chair,
    CONVERT(NVARCHAR(24), NULL, 0) AS Office,
    CONVERT(NVARCHAR(10), NULL, 0) AS Telephone,
    CONVERT(NVARCHAR(4), NULL, 0) AS Cup,
    CONVERT(NVARCHAR(1), NULL, 0) AS Headphones,
    CONVERT(NVARCHAR(20), NULL, 0) AS Mouse,
    CONVERT(NVARCHAR(12), NULL, 0) AS Keyboard 
```

用于创建触发器的 CREATE 命令

```
CREATE TRIGGER Staging.ON_INSERT_Staging_vViewSolelyForInsertion
ON Staging.vRefViewSolelyForInsertion
BEGIN

    SELECT * FROM INSERTED -- debug, the error message appears before this point.

    /*
        This table exists to generate the InternalId.
    */  
    DECLARE @tbl TABLE
    (
        InternalId UNIQUEIDENTFIER NOT NULL DEFAULT NEWID(),
        Door,
        Chair,
        Office,
        Telephone,
        Cup,
        Headphones,
        Mouse,
        Keyboard
    )

    INSERT INTO @tbl
    (
        Door,
        Chair,
        Office,
        Telephone,
        Cup,
        Headphones,
        Mouse,
        Keyboard
    )
    SELECT
        i.Door,
        i.Chair,
        i.Office,
        i.Telephone,
        i.Cup,
        i.Headphones,
        i.Mouse,
        i.Keyboard
    FROM INSERTED i

    SELECT * FROM @tbl -- 2nd debug

    INSERT INTO Staging.ActualTable
    (
        InternalId,
        Door,
        Chair,
        Office,
        Telephone,
        Cup,
        Headphones,
        Mouse,
        Keyboard
    )
    SELECT
        -- Lots of processing goes on here. 
        t.InternalId,
        ProcessDoor(t.Door, t.InternalId),
        ProcessChair(t.Chair, t.InternalId),
        ProcessOffice(t.Office, t.InternalId),
        ProcessTelephone(t.Telephone, t.InternalId),
        ProcessCup(t.Cup, t.InternalId),
        ProcessHeadphones(t.Headphones, t.InternalId),
        ProcessMouse(t.Mouse, t.InternalId),
        ProcessKeyboard(t.Keyboard, t.InternalID)
    FROM @tbl t

    DELETE FROM @tbl

END 
```

这是我正在使用的格式文件

```
<?xml version="1.0"?>
<BCPFORMAT xmlns="http://schemas.microsoft.com/sqlserver/2004/bulkload/format" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <RECORD>
  <FIELD ID="1"     xsi:type="NCharFixed"   LENGTH="4"  COLLATION="SQL_Latin1_General_CP1_CI_AS"/>
  <FIELD ID="2"     xsi:type="NCharFixed"   LENGTH="9"  COLLATION="SQL_Latin1_General_CP1_CI_AS"/>
  <FIELD ID="3"     xsi:type="NCharFixed"   LENGTH="24" COLLATION="SQL_Latin1_General_CP1_CI_AS"/>
  <FIELD ID="4"     xsi:type="NCharFixed"   LENGTH="10" COLLATION="SQL_Latin1_General_CP1_CI_AS"/>
  <FIELD ID="5"     xsi:type="NCharFixed"   LENGTH="4"  COLLATION="SQL_Latin1_General_CP1_CI_AS"/>
  <FIELD ID="6"     xsi:type="NCharFixed"   LENGTH="4"  COLLATION="SQL_Latin1_General_CP1_CI_AS"/>
  <FIELD ID="7"     xsi:type="NCharFixed"   LENGTH="1"  COLLATION="SQL_Latin1_General_CP1_CI_AS"/>
  <FIELD ID="8"     xsi:type="NCharFixed"   LENGTH="10" COLLATION="SQL_Latin1_General_CP1_CI_AS"/>
  <FIELD ID="9"     xsi:type="NCharFixed"   LENGTH="10" COLLATION="SQL_Latin1_General_CP1_CI_AS"/>
  <FIELD ID="10"    xsi:type="NCharFixed"   LENGTH="4"  COLLATION="SQL_Latin1_General_CP1_CI_AS"/>
  <FIELD ID="11"    xsi:type="NCharFixed"   LENGTH="9"  COLLATION="SQL_Latin1_General_CP1_CI_AS"/>
  <FIELD ID="12"    xsi:type="NCharFixed"   LENGTH="20" COLLATION="SQL_Latin1_General_CP1_CI_AS"/>
  <FIELD ID="13"    xsi:type="NCharFixed"   LENGTH="12" COLLATION="SQL_Latin1_General_CP1_CI_AS"/>
  <FIELD ID="14"    xsi:type="CharTerm"     TERMINATOR="\r\n" COLLATION="SQL_Latin1_General_CP1_CI_AS"/>
 </RECORD>
 <ROW>
  <COLUMN SOURCE="1"    NAME="Door"         LENGTH="4"      xsi:type="SQLNVARCHAR"/>
  <COLUMN SOURCE="2"    NAME="Chair"        LENGTH="9"      xsi:type="SQLNVARCHAR"/>
  <COLUMN SOURCE="3"    NAME="Office"       LENGTH="24"     xsi:type="SQLNVARCHAR"/>
  <COLUMN SOURCE="4"    NAME="Telephone"    LENGTH="10"     xsi:type="SQLNVARCHAR"/>
  <COLUMN SOURCE="5"    NAME="Cup"          LENGTH="4"      xsi:type="SQLNVARCHAR"/>
  <COLUMN SOURCE="7"    NAME="Headphones"   LENGTH="1"      xsi:type="SQLNVARCHAR"/>
  <COLUMN SOURCE="12"   NAME="Mouse"        LENGTH="20"     xsi:type="SQLNVARCHAR"/>
  <COLUMN SOURCE="13"   NAME="Keyboard"     LENGTH="12"     xsi:type="SQLNVARCHAR"/>
 </ROW>
</BCPFORMAT> 
```

数据文件由 \r\n 终止行组成，数据字段之间没有分隔符，并以 unicode 格式保存。每行长度为 138 个字符，加上行尾的 \r\n。

我得到的错误如下：

第 1 行第 2 列（主席）的批量加载数据转换错误（截断）。

ImportFile.xml 中的字段长度与 ImportFile.xml 中的列长度相同，与 Staging.vViewSolelyForInsertion 中的 nvarchar 长度相同。如上所述（我知道这是很久以前的事了），触发器中的第一个调试语句没有被执行，导致我认为是 BULK INSERT 失败了。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:26:05.257

这一切都是徒劳的。将 xsi:type 设置为 CharFixed 而不是 NCharFixed 解决了这个问题，即使我使用的是 Unicode。现在我正在处理我的数据中的奇怪字符（在输入文件中显示为普通文本）。

# apache - .htaccess 使用 UTF 8 字符重定向 URL

> ID：14479403
> 
> 赞同：6
> 
> 时间：2013-01-23T12:10:13.330
> 
> 标签：apache, .htaccess

我正在尝试将所有非子域请求重定向到 www，同时保留请求 URI。

我在我的 .htaccess 文件中使用它进行重定向：

```
RewriteCond %{HTTP_HOST} ^[^.]+\.[^.]+$
RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=302] 
```

但问题是，当我有这样的请求时：

> example.com/search/?name=läkare

它重定向到：

```
www.example.com/search/?name=l%25C3%25A4kare 
```

这是不正确的，它被编码了两次。我用这个检查它：

```
<?php

echo rawurlencode('läkare');//outputs l%C3%A4kare
echo "\n";
echo rawurldecode('l%25C3%25A4kare');//outputs l%C3%A4kare
echo "\n";
echo rawurldecode(rawurldecode('l%25C3%25A4kare'));//outputs läkare 
```

为什么要对其进行两次编码，我该如何防止它这样做？我对 1 编码没问题，但 2 太多了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T18:15:16.540

您的规则需要`NE`（无转义）重写标志。这将防止已经转义的查询字符串被双重转义：

```
RewriteCond %{HTTP_HOST} ^[^.]+\.[^.]+$
RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=302,NE] 
```

# c# - 如何使用 NAudio 对波形文件执行 FFT

> ID：14479406
> 
> 赞同：2
> 
> 时间：2013-01-23T12:10:26.780
> 
> 标签：c#, fft, naudio

我正在使用 NAudio 库，并希望对 WaveStream 执行快速傅立叶变换。我看到 NAudio 已经内置了 FFT 但我该如何使用它呢？

我听说我必须使用 SampleAggregator 类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:13:32.407

您需要阅读整篇[博客文章](http://channel9.msdn.com/coding4fun/articles/AutotuneNET)，以最好地理解我提取的以下代码示例，以确保即使文章没有保留该示例：

```
using (WaveFileReader reader = new WaveFileReader(fileToProcess))
{
    IWaveProvider stream32 = new Wave16toFloatProvider(reader);
    IWaveProvider streamEffect = new AutoTuneWaveProvider(stream32, autotuneSettings);
    IWaveProvider stream16 = new WaveFloatTo16Provider(streamEffect);
    using (WaveFileWriter converted = new WaveFileWriter(tempFile, stream16.WaveFormat))
    {
        // buffer length needs to be a power of 2 for FFT to work nicely
        // however, make the buffer too long and pitches aren't detected fast enough
        // successful buffer sizes: 8192, 4096, 2048, 1024
        // (some pitch detection algorithms need at least 2048)
        byte[] buffer = new byte[8192]; 
        int bytesRead;
        do
        {
            bytesRead = stream16.Read(buffer, 0, buffer.Length);
            converted.WriteData(buffer, 0, bytesRead);
        } while (bytesRead != 0 && converted.Length < reader.Length);
    }
} 
```

但简而言之，如果您创建了 WAV 文件，您可以使用该示例将其转换为 FFT。

# android - 在我的所有活动中播放背景音乐，并仅在我的应用未显示时停止

> ID：14479410
> 
> 赞同：2
> 
> 时间：2013-01-23T12:10:33.117
> 
> 标签：android

我尝试了一百万种方式，但是当我播放手机的 HOME 按钮时，音乐一直在播放。我最后一次尝试是应用程序，但我仍然遇到同样的问题。

这是我的代码。

```
public class ProvaMusica extends Application {
Intent musica_backGround;
public Background_music musicaDiBackground = new Background_music(); 

    public void avvia(){    
           //this is the class where i manage mediaplayer//////////
           musica_backGround=new Intent(this, Background_music.class); 
           startService(musica_backGround);
    }    

    public void onDestroy(){    
        stopService(musica_backGround);     
    }

} 
```

在我的第一个活动中，我使用此代码开始音乐

```
 ProvaMusica appState = ((ProvaMusica)this.getApplication());
 appState.avvia(); 
```

现在，我应该怎么做才能让音乐在显示其他活动时播放并在我的应用程序未显示时停止音乐？

我希望音乐从一项活动转移到另一项活动时继续播放，我不想在新活动开始时停止音乐然后重新开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:19:04.227

我这样做的方法是：

1.  我有一个单例类，即 SoundManager。
2.  在 onPause 时，每个活动都会调用 soundManager.stopPlayingDelayed。此方法启动一个计时器，它将在 1 或 2 秒内调用 soundManager.checkIfShouldStop。它还将 lastCloseTime 保存到当前时间。
3.  它的 onResume 上的每个活动都会调用 soundManager.startPlaying。如果已经播放声音管理器将忽略该请求。这也清除了 lastCloseTime
4.  在 checkIfShouldStop 中，如果 lastCloseTime 不为零且超过 1 秒前，则表示在最后一个活动完成后，我的应用没有新的活动开始，因此应该停止音乐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:12:40.397

你可以有一个`Application`类并将其设置在`AndroidManifest`. 在其`onDestroy()`回调中，您可以使用`stopService()`函数停止服务，也可以使用`Intent`停止音乐启动服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T15:05:48.663

您的应用程序在 Android 操作系统中作为一个进程运行。Android 操作系统有多种终止进程的方法，有时在进程被终止之前可能不会调用像 onDestroy() 这样的回调函数。因此，如果您在服务中启动并播放音乐，只要您的进程存在，音乐就会一直播放。但是，如果您希望它停止，当您的应用程序的特定活动被终止时，您可以覆盖该活动的 onDestroy() 并为您的服务广播一条消息以停止音乐。*使用服务*来实现这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T13:39:58.537

也许我找到了一种混合你们所有人给我的建议的方法。

使用此代码，背景音乐（在本例中由服务管理）仅在用户使用后退按钮关闭应用程序、用户使用主页按钮关闭应用程序以及屏幕关闭时停止，因为用户使用锁定按钮锁定屏幕的设备。

我希望有人比我更专业、更擅长编程来确认这是正确的

在这堂课中，我检查我当前的活动是否在前台

```
public class GestioneApplicazioneInBackground{
    public static boolean applicazioneInBackground(final Context context) {
          ActivityManager am = (ActivityManager) MainActivity.context.getSystemService(Context.ACTIVITY_SERVICE);
          List<RunningTaskInfo> tasks = am.getRunningTasks(1);
          if (!tasks.isEmpty()) {
            ComponentName topActivity = tasks.get(0).topActivity;
            if (!topActivity.getPackageName().equals(context.getPackageName())) {
              return true;
            }
          }

          return false;
        }
} 
```

在我所有活动的 onStop() 和 onPause() 方法中，我有这段代码

```
/// if my app and his activities are in background i stop the service i started in my main/first activity////
    if(GestioneApplicazioneInBackground.applicazioneInBackground(this) ){
                      context_of_the_Intent.stopService(intent);    
                  }
                  else{
// if my app and his activities are NOT in background i check if user turned off the screen with the lock button of the device//////        
                    PowerManager kgMgr = (PowerManager) getSystemService(Context.POWER_SERVICE);
                    boolean showing = kgMgr.isScreenOn();
                    if(!showing){
                         context_of_the_Intent.stopService(intent);     
                    }

                  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-07T05:59:56.613

使用这个：Tf you usr media player 然后在你的活动中调用这个方法......

```
MediaPlayer mp=null;

@Override
protected void onDestroy() {
    super.onDestroy();

    if (!(mp == null)) {
        if (mp.isPlaying()) {
            mp.stop();
            mp.release();
            mp = null;
        }
    }
};

v @Override
protected void onResume() {
    super.onResume();

    if (!(mp == null)) {
        if (mp.isPlaying()) {
            mp.stop();
            mp.release();
            mp = null;
        }
    }
}; 
```

# iphone - 如何使用 mp4 文件作为我的 iphone 应用程序的启动画面而不是 Default.png

> ID：14479411
> 
> 赞同：-3
> 
> 时间：2013-01-23T12:10:33.710
> 
> 标签：iphone, objective-c, ios6

任何人都可以向我解释一下....在 iphone 中是可能的。如果是，那么您能否逐步解释一下，因为我是 iphone 开发的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:18:38.977

您可以做的最接近的方法是将 png 图像作为启动画面，其中包含您要播放的视频的第一帧，然后尽快播放视频。

一些帮助您入门的基本代码可能如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  [[NSNotificationCenter defaultCenter] addObserver:self
                                           selector:@selector(playBackDidFinishNotification:)
                                               name:MPMoviePlayerPlaybackDidFinishNotification
                                             object:nil];

  self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

  NSURL *URL = [[NSBundle mainBundle] URLForResource:@"clip" withExtension:@"m4v"];
  MPMoviePlayerViewController *viewController = [[MPMoviePlayerViewController alloc] initWithContentURL:URL];

  viewController.moviePlayer.fullscreen = YES;
  viewController.moviePlayer.controlStyle = MPMovieControlStyleNone;
  [viewController.moviePlayer play];

  self.window.rootViewController = viewController;

  [self.window makeKeyAndVisible];
  return YES;
}

- (void)playBackDidFinishNotification:(NSNotification *)notification;
{
  self.window.rootViewController = [[PSRootViewController alloc] init];
} 
```

# html - Chrome 忽略音频预加载 =“元数据”

> ID：14479413
> 
> 赞同：3
> 
> 时间：2013-01-23T12:10:42.903
> 
> 标签：html, google-chrome, html5-audio

我的代码基本上是这样的

```
<audio controls preload="metadata">
  <source src="linktofile.wav" type="audio/ogg">
</audio> 
```

在 Firefox 18.0.1 - 它导致 8.4 KB 数据下载（在 Firebug 上检查）。
但在 Chrome 24.0.1312.52 m - 它开始下载整个文件（在开发者工具中 - 它以 MB 为单位显示下载大小）。

是什么赋予了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-19T21:02:04.940

v42 及更高版本现在似乎尊重这一点。耶！
（截至昨天的当前测试版）

您现在可以看到`206`部分内容请求，下载了 66kb（我的视频是 600kb+）

![在此处输入图像描述](../Images/735d77036deea26a733eff8d6c2869ff.png)

**但是**：非常重要

如果您不知道，Chrome 只能同时有 6 个同时连接到同一台服务器。

目前在 v42 + v43 中，它们有一个可怕的错误，这意味着一旦加载了元数据，该文件就不会释放回“池”中以获取可用连接。因此，如果您加载 6 个或更多视频，则第 7 个块将不会下载。

我已将此报告为错误[https://code.google.com/p/chromium/issues/detail?id=468930](https://code.google.com/p/chromium/issues/detail?id=468930)

并非所有视频都是这种情况，但我有 10 个用 Adob​​e Media Encoder 编码的 MP4 短视频，它们卡住了。

如果有疑问或遇到此问题，您别无选择，只能`preload='auto'`现在设置。希望这个错误永远不会进入野外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T12:33:59.513

据我了解，预加载值是对浏览器的提示，而不是绝对命令。换句话说，它们是对浏览器应该如何表现的建议。浏览器可能会也可能不会遵循提示，因此如果它并不总是有效，请不要感到惊讶。

[http://www.mediacollege.com/internet/html/audio/preload.html](http://www.mediacollege.com/internet/html/audio/preload.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-02T15:59:02.870

1.  预加载是固定的，并且已经有一段时间了

2.  预加载并保持连接的行为**不是错误**。

它使连接保持打开状态，以允许通过使用一次性令牌进行流保护。

如果它不这样做，那么如果受令牌保护，音频或视频甚至都不会播放。

因此，chrome 必须保持连接打开，直到页面离开或关闭。

# php - PHP 5.1 的日期和时差函数

> ID：14479415
> 
> 赞同：1
> 
> 时间：2013-01-23T12:10:52.737
> 
> 标签：php, datetime

PHP 5.3.0+ 有一个`DateTime::diff`功能：[http ://docs.php.net/datetime.diff](http://docs.php.net/datetime.diff)

不幸的是，我目前正在使用 PHP 5.1 分支，无法升级。那么计算日期时间差的最佳方法是什么？

例如 和 之间的时间`22-01-2013 17:00`差`23-01-2013 13:00`。

我并不担心这样的输出格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:14:03.677

所有你需要知道的是`strtotime`php 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:15:00.753

**Zend 框架不能在 PHP 5.1 上运行……支持 PHP 5.1 的最后一个版本是 Zend Framework 1.6 (http://framework.zend.com/manual/1.6/en/requirements.version.html) 但你不应该不要使用它。**

如果你想有一个漂亮的界面，你可以使用 Zend_Date。

[http://framework.zend.com/manual/1.12/de/zend.date.overview.html#id.date.basic.operations](http://framework.zend.com/manual/1.12/de/zend.date.overview.html#id.date.basic.operations)

如果您希望它快速并使用 php 核心，只需按照@dipesh-parmar 的建议使用 strtotime

# c++ - COleControl 中未处理的 LButtonUp 窗口消息

> ID：14479418
> 
> 赞同：0
> 
> 时间：2013-01-23T12:10:57.830
> 
> 标签：c++, mfc, ole

我的项目中有一个 COleControl 对象。在这个 COleControl 中，我有一个 CRectTracker 对象。

我想处理 WM_LButtonUp 的 windows 消息（事件）。（当用户停止按下鼠标左键时）。

在我的 .h 文件中，我写道：

```
afx_msg void OnLButtonUp(UINT nFlags, CPoint point); 
```

在我的 .cpp 文件中，在

```
BEGIN_MESSAGE_MAP(CMyControl, COleControl) 
```

我添加了

```
ON_WM_LBUTTONUP() 
```

然后我开发了一个方法

```
void CMyControl::OnLButtonUp(UINT nFlags, CPoint point) 
```

我对 Windows 消息 LButtonDown 做了同样的事情。

当我将鼠标左键留在我的控件中时，方法获取句柄并且一切正常。当鼠标跟踪器位于 CRectTracker 对象上时，我离开鼠标左键时会出现问题。在这种情况下，不会处理鼠标 LButtonUp 消息。

我尝试使用 Spy++，我可以看到 Windows 消息 WM_LButtonUp 存在并且按预期发生。但它是我的代码，它没有得到处理（仅在 CRectTracker 上的鼠标的情况下）。

LButtonDown 事件始终得到成功处理，即使我在鼠标位于 CRectTracker 上时按下鼠标按钮也是如此。

LButtonUp 消息可能有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:31:58.547

这只是跟踪器工作方式不可避免的副作用。一旦您单击跟踪器或其中一个尺寸控制柄，MFC 就会捕获鼠标并启动一个模态消息循环。它将选择鼠标移动和按钮向上消息来实现跟踪操作。在看到左按钮向上消息、看到 Escape 键或捕获丢失之前，该循环不会退出。因此，当该循环处于活动状态时，您的 OnLButtonUp() 函数无法运行，消息在被分派之前被截获。

您需要以不同的方式执行此操作，而不是依赖 OnLButtonUp()。很难给出具体的建议，因为你没有描述你为什么需要它。模态循环的源代码位于 atlmfc/src/mfc/trckrect.cpp 中，如果您需要更多了解，则为 CRectTracker::TrackHandle()。

# groovy - Geb：在运行时设置报告目录

> ID：14479421
> 
> 赞同：2
> 
> 时间：2013-01-23T12:11:02.940
> 
> 标签：groovy, geb

我正在为使用 Geb 的站点编写一个小测试框架。作为我的报告功能的一部分，我希望能够在运行时指定*reportsDir*所在的位置。我不是开发人员，所以请原谅这个问题中的任何遗漏。

到目前为止我读到的所有内容都表明这只能通过项目的配置或构建适配器来设置。但是，Geb 的 Configuration 类有一个[setReportsDir](http://www.gebish.org/manual/0.7.2/api/geb/Configuration.html#setReportsDir%28java.io.File%29)方法，我可以从浏览器对象访问它：

```
def currentConfig = pageBrowser.getConfig()

def reportLocation = "target/runtime_reports_dir"
def reportFile = new File(reportLocation)
reportFile.mkdirs()

File newTarget = new File(reportLocation)
currentConfig.setReportsDir(newTarget) 
```

不幸的是，虽然这似乎改变了浏览器配置对象中的*reportsDir*，但实际输出仍然出现在我的配置定义的目录中。

这可能吗？我可以改写 GebReportingTest 中的*setupReporting*方法*吗*（我也没有发现任何建议如何做到这一点的东西）？

--- 编辑 1 ---

我试过了

```
class MyTest extends GebReportingTest {

    def pageBrowser

    def setup() {
        this.pageBrowser = new Browser()
        this.pageBrowser.config.reportsDir = new File( 'target/runtime_reports_dir' )
    }

    @Test
    void runTestSet() {

        setup()
        this.pageBrowser....
    }
} 
```

在蒂姆的评论之后，但到目前为止我还没有感到高兴。调用 setup() 方法后，pageBrowser 的配置对象返回我在代码中定义的 reportsDir。但是，“report”命令的所有实例都将屏幕截图等存储在 GebConfig.groovy 中定义的目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:16:32.793

Geb 将在类路径的根目录中查找 GebConfig.groovy

你可以在那里设置reportsDir

见： [http ://www.gebish.org/manual/0.6.2/configuration.html#reports_dir](http://www.gebish.org/manual/0.6.2/configuration.html#reports_dir)

### 编辑：

你有没有尝试过：

```
class MyTest extends GebReportingTest {
  void setUp() {
    browser.config.reportsDir = new File( 'target/runtime_reports_dir' )
  }

  @Test
  void runTestSet() {
    // Do testing
  }
} 
```

# html - 可选择但不可编辑的 html 文本字段

> ID：14479423
> 
> 赞同：19
> 
> 时间：2013-01-23T12:11:05.513
> 
> 标签：html, input

我在一个移动网站上工作，我有一个文本输入字段。

我希望它被选中和复制但不可编辑。当我添加`readonly`或`onfocus="this.blur()"`它变得无法选择。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-23T12:15:01.237

看一下这个。

```
<textarea rows="10" cols="50" onclick="this.focus();this.select()" readonly="readonly">
    example text
</textarea> 
```

**编辑：**

您可以通过添加输入侦听器在每次更改时重新分配文本输入值。

```
var inp = $("input")[0]; // select the input with proper selector
var default_value = inp.value;

inp.addEventListener("input", function () { 
    this.value = default_value;
}, false); 
```

在这里工作[jsfiddle](http://jsfiddle.net/Cfr9p/1/)。

# sql - 将 FOR..LOOP 中的多个 UPDATE 转换为单个 SELECT/UPDATE 语句

> ID：14479426
> 
> 赞同：0
> 
> 时间：2013-01-23T12:11:12.940
> 
> 标签：sql, plsql, oracle11g

如果可能，我想将以下 PL/SQL 语句优化为单个`SELECT+UPDATE`SQL 语句。

```
--Key is a VARCHAR2, Value is a CLOB
FOR Pair IN (select Key, Value from PairTable) 
LOOP           
  update UpdatableTable
  set CLOBColumn = CLOBColumn || Pair.Value
  where ID in
    (select ID from UpdatableTable
    where CONTAINS("indexedcolumns", '{' || Pair.Key || '}') > 0); 
  commit;
END LOOP; 
```

问题是我需要在同一个'子句中使用`UPDATE`'子句的部分结果。从概念上讲，我想首先将. 然后使用字符串查看它是否包含在. 然后将字符串（与上述字符串对应）设置为's 。`WHERE``UPDATE``SET``SELECT``PairTable``Key``UpdatableTable``Value``Key``UpdatableTable``CLOBColumn`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:29:06.827

至少`FORALL`在 PLSQL 中使用 a 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:54:12.193

```
you can use the below update statements

update UpdatableTable
  set CLOBColumn = CLOBColumn || Value from PairTable
  where ID in
    (select ID from UpdatableTable
    where CONTAINS("indexedcolumns", '{' || Pair.Key || '}') > 0); 

or

update UpdatableTable
  set CLOBColumn = CLOBColumn || b.Value from  (select Key, Value from PairTable) b
  where ID in
    (select ID from UpdatableTable
    where CONTAINS("indexedcolumns", '{' || Pair.Key || '}') > 0); 
```

# ms-word - Applescript：关闭 Word 文档？（办公室 2011）

> ID：14479428
> 
> 赞同：2
> 
> 时间：2013-01-23T12:11:18.033
> 
> 标签：ms-word, applescript, ms-office

我只是想关闭一个文档（不退出单词），但这不起作用。

我试过了 ：

```
close documents saving no
close active document
close document 1 
```

但这些都不起作用..

我得到的错误（在关闭线上）是：

```
Microsoft Word got an error: The object you are trying to access does not exist 
```

这是一个简化的脚本。有人有想法么？网上所有的例子好像都是用这个语法，不知道mac office 2011版本有什么变化？

```
set input to {POSIX path of "/Users/Wesley/Desktop/test.doc"}

--ENABLE GUI SCRIPTING
tell application "System Events"
if UI elements enabled is false then set UI elements enabled to true
end tell

--RUN THE GUISCRIPT
set pdfSavePath to POSIX path of (choose folder with prompt "Set destination folder")
repeat with x in input
display dialog x

tell application "Microsoft Word"
    activate
    open x
    set theActiveDoc to the active document

    close theActiveDoc saving no

    return
    end tell
 end repeat 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:41:55.443

关闭活动文档和关闭文档 1 都对我有用。也许您需要在分配 theActiveDoc 变量之前使用延迟语句？

# firefox - 从 Web Workers 访问 IndexedDB

> ID：14479431
> 
> 赞同：6
> 
> 时间：2013-01-23T12:11:27.747
> 
> 标签：firefox, web-worker, indexeddb

我似乎无法弄清楚如何`indexedDB`在网络工作者内部使用。我尝试了很多不同的方法，但`indexedDB`始终`"undefined"`处于工作范围内。我认为它应该可以通过`indexedDB`or访问`self.indexedDB`？

```
self.indexedDB = self.indexedDB || self.msIndexedDB || self.mozIndexedDB || self.webkitIndexedDB || self.OIndexedDB;

indexedDB = indexedDB || msIndexedDB || mozIndexedDB || webkitIndexedDB || OIndexedDB; 
```

都是`undefined`......我什至遍历了self对象的属性，并且没有`indexedDB`属性或方法。fwiw，我正在使用 ff 18，并且，ff nightly (21a)，我用 chrome 尝试过。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-23T15:25:16.983

2015 年 9 月更新：现在可以从 Firefox 中的 Web Worker 访问 IndexedDB： [https ://bugzilla.mozilla.org/show_bug.cgi?id=701634](https://bugzilla.mozilla.org/show_bug.cgi?id=701634)

如果您想在 chrome 中使用 IndexedDB，只需使用以下行：

```
indexedDB = typeof window == 'object' ? window.indexedDB : webkitIndexedDB; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-14T15:26:32.157

[自firefox](/questions/tagged/firefox "show questions tagged 'firefox'")（2015 年 3 月 31 日发布）以来**，可以**从 Web Workers访问[indexeddb 。](/questions/tagged/indexeddb "show questions tagged 'indexeddb'") `37`

> **IndexedDB**
> 数据库存储包含简单值和分层对象的记录。
> 
> [![IndexedDB API WebWorkers 截图](../Images/8e885dac4b40d04dd73224025cd1966b.png)](https://i.stack.imgur.com/ebrXm.png)

请参阅[Web Workers 可用的函数和类 (MDN)](https://developer.mozilla.org/en-US/docs/Web/API/Worker/Functions_and_classes_available_to_workers)

# php - 为什么需要自己的 php 文件安全性，当已经给予 .htaccesss 安全性？

> ID：14479432
> 
> 赞同：2
> 
> 时间：2013-01-23T12:11:29.710
> 
> 标签：php, kohana

在 kohana 框架中，在`.htaccess`文件中写入

> # 保护应用程序和系统文件不被查看

`RewriteRule ^(?:application|modules|system)\b.* index.php/$0 [L]`

好的，但是为什么在每个 php 文件中都需要这种安全性：

`<?php defined('SYSPATH') or die('No direct access allowed.');` ?

攻击者已经不能`.php`直接打开任何文件了吧？（因为原因不受`.htaccess`RewriteRule 的保护）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:20:28.700

辛比：这是一个后备。仅此而已，但我需要更多字符才能发布此答案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T12:21:20.363

似乎开发人员希望确保没有文件可以访问，无论 .htaccess 是否有效（即 disabled `mod_rewrite`）。

但是对于只包含类定义或返回/定义配置数组的文件，无论如何它都非常没用，因为它们不输出任何东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T12:28:05.550

从框架开发人员的角度来看，您无法确定您的产品将运行的网络服务器是否正确设置（例如，.htaccess/RewriteEngine 未由 AllowOverride 启用或没有 mod_rewrite ...）。

这种“第二次检查”是为了​​确保框架即使在主机设置错误的情况下也不会泄露敏感数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T12:33:24.067

`.htaccess`仅适用于 启用的**Apache**`mod_rewrite`。如果服务器不满足这些条件中的任何一个，这些`SYSPATH`检查就会派上用场。

**注意：**不是每个用户都可以使用**Aapche**作为网络服务器。并不是每个用户都可以访问`.htaccess`.

现在还有其他选择。比如，nginx。

# ios - NSNetServiceBrowser 找不到任何服务，委托方法似乎没有被调用

> ID：14479434
> 
> 赞同：1
> 
> 时间：2013-01-23T12:11:32.317
> 
> 标签：ios, bonjour, nsnetservicebrowser

我正在使用 NSNetServiceBrowser 浏览 bonjour 服务。该服务已成功启动，但是，我在浏览该服务时遇到了问题。当我拨打电话`searchForServicesOfType:inDomain`时，只调用`netServiceBrowserWillSearch`委托方法。没有调用其他委托方法，我找不到任何服务。答案似乎是由这个人在这里给出的，[NSNetServiceBrowser 没有找到存在的服务，](https://stackoverflow.com/questions/13332965/nsnetservicebrowser-not-finding-services-that-exist)但我无法理解他的实际意思（参见答案的第 2 部分）。问题的作者解决了这个问题，但他没有详细说明。请告诉我为什么其他委托方法如`netServiceBrowser:didFindService:moreComing:`不被称为“谢谢”。

# javascript - 获取当前元素的touchstart坐标

> ID：14479435
> 
> 赞同：13
> 
> 时间：2013-01-23T12:11:34.637
> 
> 标签：javascript, html

所以我有一个看起来像这样的元素：

```
 ____________________________________
/                                    \
|                                    |
|                                    |
+------------------------------------+
|                                    |
|                                    |
|                                    |
+------------------------------------+
|                                    |
|                                    |
\____________________________________/ 
```

我已经为它附加了一个 touchstart 监听器，如下所示：

```
 other_options.addEventListener('touchstart', function(e) {
        event.preventDefault();
    }, false); 
```

我想做什么，我已经查看了 'e' 的值，但我找不到任何足够一致的值（当我尝试它们时，这些值对我来说似乎不正确）来做我想做的事。

我知道这些行的大小。我只是希望能够获取触发 touchstart 事件的 Y 坐标，即元素的上坐标为 0。这样，Math.floor(y / ROW_SIZE) 将为我提供 touchstart 事件开始的行。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-23T13:32:18.890

您必须像这样访问。

```
e.touches[0].clientX/clientY. 
```

触摸次数和触摸信息可以通过 e.touches 访问。

看看这个常见问题解答。

[如何获取触摸事件中的 x/y 坐标？](http://jqfaq.com/how-to-get-the-xy-coordinates-in-touch-events/)

这是触摸事件[文档](http://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)。

顺便说一句，事件将仅返回相对于窗口的 x/y 坐标。我们无法改变这一点。你能做到这一点。`top= 0 - element.top; x= clientx-top.`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-03-01T01:11:11.533

最好使用`getBoundingClientRect()`方法来计算元素的顶部和左侧值。

`element.top`如果元素位于另一个容器中，则上述方法可能不会给出相对于视口的顶部和左侧值。

因此，要计算相对于元素的触摸坐标，我们可以执行以下操作。

```
var rect = element.getBoundingClientRect();
xCoordinate = event.touches[0].clientX - rect.left;
yCoordinate = event.touches[0].clientY - rect.top; 
```

要了解有关`getBoundingClientRect()`方法的更多信息，[请单击此处](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect)。

# android - Androird/Eclipse：拉伸图像以适应屏幕边框

> ID：14479436
> 
> 赞同：0
> 
> 时间：2013-01-23T12:11:42.460
> 
> 标签：android, eclipse, image, stretch

我有这张 9-patch 图片“Imageview3” ![在此处输入图像描述](../Images/6efa4ff6b4eea2363ee0334b3dcdd3fc.png)

我想添加我的活动。我希望红色手臂与屏幕边框完美匹配。但是当我做 SCALE:fitXy 时，这是我得到 ![在此处输入图像描述](../Images/bb489dd2003df0fb495b8b7146c6d7f0.png) 的，所以你看起来它不起作用，我尝试了所有的比例，我试图拉伸图像，但它永远不适合。

这是我的代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<FrameLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1" >

         <ImageView
             android:id="@+id/imageView2"
             android:layout_width="324dp"
             android:layout_height="fill_parent"
             android:scaleType="centerCrop"
             android:paddingTop="150dp"
             android:paddingRight="0dp"
             android:src="@drawable/diviseur" />

         <ImageView
             android:id="@+id/imageView3"
             android:layout_width="407dp"
             android:layout_height="wrap_content"
             android:adjustViewBounds="true"
             android:scaleType="fitXY"
             android:src="@drawable/a1"
             android:visibility="visible" />

</FrameLayout>

</LinearLayout> 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:14:40.630

删除 `android:scaleType="fitXY"`并保留`android:layout_width="match_parent"`。试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-01T11:42:46.480

不要使用 android:src="@drawable/diviseur"，而是尝试使用 android:background="@drawable/diviseur"。并且还考虑使用 android:layout_weight="1" 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T16:26:06.710

确保您的实际图像周围没有白色边框。如，确保手臂位于图像的最末端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-26T05:17:49.127

尝试这个

```
<RelativeLayout
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ImageView
    android:id="@+id/banner"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:scaleType="fitCenter"
    android:adjustViewBounds="true"
    android:src="@drawable/foo"
    /> 
```

# struts2 - 下载目录和内容

> ID：14479438
> 
> 赞同：1
> 
> 时间：2013-01-23T12:11:50.240
> 
> 标签：struts2

是否可以说服`stream`结果下载整个目录及其内容？如果是这样，怎么办？我可以让它下载单个文件，但我需要下载一系列必须位于特定目录结构中的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:43:56.460

我不这么认为。

流结果允许您下载一个内容，包括其 MIME 类型、名称等。

这使得无法处理具有不同名称和内容类型的大量文件。

你可以做的是：

1.  在 JSP 中呈现文件列表（`anchor`例如在标签中），每个人都针对将下载该单个文件的动作；

2.  `target="_blank"`通过脚本为您拥有的每个文件打开多个页面 ( ) 调用多个操作（危险、烦人、几乎无用......）；

3.  在服务器端使用 Java 创建一个包含所有文件和目录的 zip，然后输出带有 Stream 结果的 zip。

我想你可以考虑第三种选择。

# jquery - 用于在第 x 次页面浏览后显示内容的 JS cookie

> ID：14479439
> 
> 赞同：1
> 
> 时间：2013-01-23T12:11:50.160
> 
> 标签：jquery, cookies, fancybox, fancybox-2, pageviews

我正在尝试查找如何设置 javascript cookie，以便在访问者的第 4 次综合浏览量之后显示一个花式框弹出窗口。

这是我用来显示 Fancybox 弹出窗口的代码，但正如您所见，这仅在第一次网页浏览时显示代码，并且一天后过期

```
function setCookie(c_name,value,exdays)
 {
     var exdate=new Date();
     exdate.setDate(exdate.getDate() + exdays);
     var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
     document.cookie=c_name + "=" + c_value + ";domain=.mysite.net;path=/";
 }

function getCookie(c_name)
 {
     var i,x,y,ARRcookies=document.cookie.split(";");
     for (i=0;i<ARRcookies.length;i++)
  {
     x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
     y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
     x=x.replace(/^\s+|\s+$/g,"");
      if (x==c_name)
       {
       return unescape(y);
       }
  }
 }

jQuery(document).ready(function() {
     var show = getCookie("fancyreg");
     if(show==null || show=="") {
       $.fancybox(
 {
        'type' : 'iframe',
        'href' : 'http://www.mysite.net/popup/', //URL to popup page or image
        'autoDimensions' : false,
        'width' : 480,
        'height' : 260,
        'transitionIn' : 'none',
        'transitionOut' : 'none'
 }
);

  setCookie('fancyreg','1',1); 

 }
 }); 
```

我还想请您帮助我如何在现有代码中添加延迟，以便在 3 秒（3000 毫秒）后弹出显示。

我尝试使用 setTimeout(function() 如下

```
 <script type="text/javascript"> 
jQuery(document).ready(function() {
    setTimeout(function() {
        $.fancybox({
            'type' : 'iframe',
        'href' : 'http://www.mysite.net/popup/', //URL to popup page or image
        'autoDimensions' : false,
        'width' : 480,
        'height' : 260,
        'transitionIn' : 'none',
        'transitionOut' : 'none'
        })
    }, 4000); 
});
</script> 
```

但它不起作用。

至于控制浏览量，我不知道如何设置，也找不到任何资源来帮助我解决这个问题。

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T21:02:53.083

### 2019 年 4 月 2 日更新

正如@Gregdebrick 的评论中提到的，答案正在更新以使用 JavaScript Cookie 插件[https://github.com/js-cookie/js-cookie](https://github.com/js-cookie/js-cookie)而不是已弃用的 jQuery Cookie 插件。

因此，在您的页面中从 CDN 加载 JS Cookie 插件后：

```
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script> 
```

使用以下脚本：

```
$(document).ready(function () {
    // if the cookie is undefined, create it
    if(typeof Cookies.get('visited') === "undefined"){
        Cookies.set("visited", 0);
    }
    // Cookies.get('visited') returns a string
    if (parseInt(Cookies.get('visited')) >= 3) {
        // open fancybox after 3 secs on 4th visit
        setTimeout(function () {
            $.fancybox.open({
                // your fancybox API options here
            });
        }, 3000);
    } else {
        let increase = parseInt(Cookies.get('visited')) + 1;
        Cookies.set('visited', increase, { expires: 1 });
        return false;
    }
}); // ready 
```

查看**[更新的工作演示](http://www.picssel.com/playground/jquery/fancyboxOn4pageView_02Apr2019.html)**

* * *

假设您使用的是[jQuery Cookie 插件](https://github.com/carhartl/jquery-cookie)，那么您可以使用以下代码在 3 秒后启动 fancybox，即当天访问第 4 个页面：

```
$(document).ready(function () {
    // create cookie
    var visited = $.cookie('visited'); // visited = 0
    if (visited >= 3) {
        // open fancybox after 3 secs on 4th visit or further on the same day
        setTimeout(function () {
            $.fancybox.open({
                // your fancybox API options here
            });
        }, 3000);
    } else {
        visited++; // increase counter of visits
        // set new cookie value to match visits
        $.cookie('visited', visited, {
            expires: 1 // expires after one day
        });
        return false;
    }
}); // ready 
```

查看**[工作演示](http://www.picssel.com/playground/jquery/fancyboxOn4pageView_24jan12.html)**

# c# - MVC @RenderSection“部分已定义但尚未呈现”脚本。当多级页面

> ID：14479442
> 
> 赞同：38
> 
> 时间：2013-01-23T12:11:59.270
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

我正在使用 MVC v4。
我有一个“_BootstrapLayout”页面，它定义了所有 twitter 引导程序等内容，一个定义站点布局、导航栏等的主页，以及从主页继承的站点页面。

> _BootstrapLayout.cshtml
> 
> _MainPage.cshtml @{ 布局 = "~/Views/Shared/_BootstrapLayout.cshtml"; }
> 
> Index.cshtml @{Layout = "~/Views/Shared/_MainPage.cshtml";}

所以母版页->主页->站点页面

_BootstrapLayout 页面包含脚本的渲染部分

```
@RenderSection("scripts", required: false) 
```

我想向 Index.cshtml 页面添加一个脚本部分，但是当我这样做时出现异常

```
@section scripts {
    <script type="text/javascript">

        $(document).ready(function () {
...

        });

    </script>
} 
```

> 以下部分已定义但尚未为布局页面“~/Views/Shared/_MainPage.cshtml”呈现：“脚本”。

所以我在_MainPage.cshtml 中添加了一个空的@section 脚本，还是同样的问题？即使我将代码添加到 _MainPage 脚本部分，我仍然会收到相同的错误。我将@section 放在_MainPage 中的哪个位置都没有关系，仍然会出现相同的错误。

如果我故意不关闭该部分（即删除}），则会收到一个错误，表明该部分不正确，因此它正在解析_MainPage 中的部分。

在这种情况下，如何让网站页面上的脚本使用 @RenderSections？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-23T12:27:18.640

您需要重新定义`_MainPage.cshtml`.

_BootstrapLayout.cshtml

```
@RenderSection("scripts", false) 
```

_MainPage.cshtml

```
@section scripts
{
   @RenderSection("scripts", false)
} 
```

索引.cshtml

```
@section scripts
{
   <script>
     // etc.
   </script>
} 
```

# perl - 无法使用 Perl CGI 程序连接到 SQLite 数据库文件

> ID：14479446
> 
> 赞同：0
> 
> 时间：2013-01-23T12:12:16.123
> 
> 标签：perl, sqlite, cgi

我的问题是：当我在 linux 机器和另一台机器的网络浏览器上运行程序时，输出是不同的。

当我在linux机器上运行程序时，输出是：

```
Content-type: text/plain
11
22
username password 
```

但是当我将程序放在 Apache 服务器上，并使用另一台机器上的浏览器访问它时，输出很简单：

```
11 
```

这可能是因为程序无法连接到数据库文件。由于我已将所有文件设置为模式 777，因此我没有权限不太可能是原因。

任何人都知道问题是什么以及如何解决它？

```
#!/usr/bin/perl -w

use DBI;

print ("Content-type: text/plain\n\n");

print "11\n";
my $dbh = DBI->connect("dbi:SQLite:dbname=4140.db","","",{RaiseError => 1},) or die $DBI::errstr;
print "22\n";

my $sth = $dbh -> prepare("SELECT * FROM Credential");
$sth -> execute();

($usrname, $password) = $sth -> fetchrow();

$sth -> finish();
$dbh->disconnect();

print "$usrname $password\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:30:31.403

检查您的错误日志。您肯定会发现 SQLite`4140.db`由于权限错误而无法创建。您对当前目录做出了错误的假设。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:33:13.507

`die`字符串被发送到`STDERR`，因此不会出现在发送的 HTTP 消息中。您可以通过多种方式解决此问题，其中最简单的一种是为 DBI 错误编写错误处理程序，将错误消息打印到 STDOUT。

你也应该*总是* `use strict`和`use warnings`。这样，Perl 将突出显示许多您可能很容易忽略的简单错误。`use warnings`远远优于`-w`命令行。

以这段代码为例。请注意，如果您启用`RaiseError`并提供错误处理程序，则`DBI`仅当您的错误处理程序返回 false 值时才会引发异常。

```
#!/usr/bin/perl

use strict;
use warnings;

use DBI;

print ("Content-type: text/plain\n\n");

print "11\n";

my $dbh = DBI->connect('dbi:SQLite:dbname=4140.db','','',
    {RaiseError => 1, PrintError => 0, HandleError => \&handle_error});

print "22\n";

my $sth = $dbh->prepare('SELECT * FROM Credential');
$sth->execute;

my ($usrname, $password) = $sth -> fetchrow();

print "$usrname $password\n";

sub handle_error {
  my ($msg, $dbh, $rv) = @_;
  print "DB Error: $msg\n";
  0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T12:54:18.270

Yo 应该指定数据库文件的完整路径以避免此类问题。试试这个（如果你的数据库和你的脚本在同一个路径）：

```
use FindBin '$Bin';

my $dbfile = "$Bin/4140.db";
my $dbh = DBI->connect("dbi:SQLite:dbname=$dbfile","","",{RaiseError => 1},) or die $DBI::errstr;

#... 
```

# sharepoint - 从共享点库下载批量文件

> ID：14479448
> 
> 赞同：0
> 
> 时间：2013-01-23T12:12:17.933
> 
> 标签：sharepoint, sharepoint-2010

我想通过代码从共享点文档库下载文件，因为文档库中有数千个文件。

我正在考虑创建控制台应用程序，我将在共享点服务器上运行并下载文件。这种方法是正确的，还是有其他有效的方法可以做到这一点。

任何有关代码的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:37:19.823

就像 SigarDave 所说，完全有可能在不编写任何代码的情况下实现这一目标。但是，如果您真的想为此编写解决方案，则类似于：

```
static void Main(string[] args)
{
  // Change to the URL of your site
  using (var site = new SPSite("http://MySite")) 
  using (var web = site.OpenWeb())
  {
    var list = web.Lists["MyDocumentLibrary"]; // Get the library
    foreach (SPListItem item in list.Items)
    {
      if (item.File != null)
      {
        // Concat strings to get the absolute URL
        // to pass to an WebClient object.
        var fileUrl = string.Format("{0}/{1}", site.Url, item.File.Url);            
        var result = DownloadFile(fileUrl, "C:\\FilesFromMyLibrary\\", item.File.Name);
        Console.WriteLine(result ? "Downloaded \"{0}\"" : "Error on \"{0}\"", item.File.Name);
      }
    }
  }
  Console.ReadKey();
}

private static bool DownloadFile(string url, string dest, string fileName)
{
  var client = new WebClient();

  // Change the credentials to the user that has the necessary permissions on the 
  // library
  client.Credentials = new NetworkCredential("Username", "Password", "Domain"); 
  var bytes = client.DownloadData(url);

  try
  {
    using (var file = File.Create(dest + fileName))
    {
      file.Write(bytes, 0, bytes.Length); // Write file to disk
      return true;
    }
  }
  catch (Exception)
  {
    return false;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-25T13:41:49.350

另一种不使用任何脚本的方法是使用 IE 打开文档库，然后在功能区中单击“在文件资源管理器中打开”，然后将文件拖放到桌面上！

# google-chrome-devtools - 如何显示给出元素尺寸的工具提示？

> ID：14479451
> 
> 赞同：2
> 
> 时间：2013-01-23T12:12:27.453
> 
> 标签：google-chrome-devtools

在 Chrome 开发人员工具中，我得到了粉色-蓝色-粉色突出显示，但我没有看到带有元素尺寸的方便的黄色工具提示。我尝试切换基本上所有选项，但它仍然没有显示。我怎么才能得到它？

![在此处输入图像描述](../Images/f501d0bfd96fb5fefded31e650e982a0.png)

# linux - 如何提高gif图像的分辨率？

> ID：14479455
> 
> 赞同：3
> 
> 时间：2013-01-23T12:12:32.297
> 
> 标签：linux, r, gif, rgl

如何提高由 R 的 rgl 包（plot3d 和 movie3d 函数）生成的 gif 图像的分辨率 - 无论是外部还是通过 R ？

代码：

```
MyX<-rnorm(10,5,1)
MyY<-rnorm(10,5,1)
MyZ<-rnorm(10,5,1)
plot3d(MyX, MyY, MyZ, xlab="X", ylab="Y", zlab="Z", type="s", box=T, axes=F)
text3d(MyX, MyY, MyZ, text=c(1:10), cex=5, adj=1)
movie3d(spin3d(axis = c(0, 0, 1), rpm = 4), duration=15, movie="TestMovie",
                                                type="gif", dir=("~/Desktop")) 
```

输出 ：

![输出](../Images/761bbf28313c1f7de2e0a20f1bddc69e.png) **更新**

在代码开头添加这一行解决了问题

```
r3dDefaults$windowRect <- c(0, 100, 1400, 1400) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T12:39:30.253

我认为您对 gif 本身的分辨率无能为力。我认为您必须使图像更大作为替代方案，然后当您将其显示得更小时，它看起来会更好。这是未经测试的，因为最近的升级对我来说破坏了一两件事，但这确实在 2.15 下工作：

```
par3d(windowRect = c(0, 0, 500, 500)) # make the window large
par3d(zoom = 1.1) # larger values make the image smaller

# you can test your settings interactively at this point

M <- par3d("userMatrix") # save your settings to pass to the movie

movie3d(par3dinterp(userMatrix=list(M,
    rotate3d(M, pi, 1, 0, 0), 
    rotate3d(M, pi, 0, 1, 0) ) ), 
    duration = 5, fps = 50,
    movie = "MyMovie") 
```

HTH。如果它不适合您，请检查使用的功能并调整设置。

# ruby-on-rails - 重新加载后显示下拉列表的选定值

> ID：14479456
> 
> 赞同：0
> 
> 时间：2013-01-23T12:12:34.733
> 
> 标签：ruby-on-rails, html-select

我很长时间以来一直在研究这个问题。我想在下拉列表中显示集合的元素，单击某个值时，我必须重新加载页面并显示其详细信息。这我很容易做到。问题是，重新加载页面时，下拉列表的选定值正在重置。所以我只想在重新加载后保留选定的值以使用'：selected'属性，以便在重新加载后显示单击的值。所以请让我知道如何尽快解决这个问题。请帮我解决这个问题。

```
 <%= form_tag({},:method => :get, :class => 'formSearch absolute') do %>
     <%=select("post", "id", @other_schools.collect {|p| [ p.name, p.id ] }, { :include_blank =>    true }, :onchange => "this.form.submit();") %>
    <%end%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:44:43.267

根据您的代码，您正在根据选择框值进行搜索，并且您想要填充搜索选项

我将[在这里](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-select_tag)`select_tag`使用更多信息

`<%=select_tag("post_id", options_for_colletcion_select(@other_schools,p.name, p.id ,params[:post_id), { :include_blank => true }, :onchange => "this.form.submit();") %>`

您可以通过文档了解语法选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-28T09:11:22.413

在这段代码中，`this.form.submit();`方法将去哪里？

```
<%=select_tag("post_id", options_for_colletcion_select(@other_schools,p.name, p.id ,params[:post_id), { :include_blank => true }, :onchange => "this.form.submit();") %> 
```

# .htaccess - 为 localhost 中的文件夹命名

> ID：14479460
> 
> 赞同：0
> 
> 时间：2013-01-23T12:12:46.717
> 
> 标签：.htaccess, redirect, alias

在`http://localhost`我有一个名为`_admin`

当我输入`http://localhost/admin`实际上我想打开`http://localhost/admin/_admin`但不使用重定向时，我想要一个 htaccess 别名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:15:16.493

做一个软链接。

```
ln -s _admin/ admin 
```

因此，当您访问时`admin`，您将获得以下内容`_admin`

**或者**

`mod_alias`如果您使用的是 Apache Web 服务器，则可以使用模块。

> Alias 指令允许将文档存储在本地文件系统中，而不是在 DocumentRoot 下。以 URL-path 开头的 (%-decoded) 路径的 URL 将映射到以 directory-path 开头的本地文件。URL 路径区分大小写，即使在不区分大小写的文件系统上也是如此。

例子：

```
Alias /image /ftp/pub/image
<Directory /ftp/pub/image>
Order allow,deny
Allow from all
</Directory> 
```

更多阅读请点[我](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#alias)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T15:30:40.270

使用 .htaccess

```
RewriteRule ^something/_fakedir_/(.*) something/_originaldir_/$1 
```

# c++ - 数组还是向量？

> ID：14479461
> 
> 赞同：2
> 
> 时间：2013-01-23T12:12:47.760
> 
> 标签：c++, arrays, vector

> **可能重复：**
> [什么时候使用数组而不是向量/字符串？](https://stackoverflow.com/questions/594522/when-would-you-use-an-array-rather-than-a-vector-string)
> [std::array 和 std::vector 有什么区别？你什么时候使用一个而不是另一个？](https://stackoverflow.com/questions/6632971/what-is-the-difference-between-stdarray-and-stdvector-when-do-you-use-one-o)

我总是对所有东西使用向量（动态数组），我从不使用普通数组，这有什么缺点吗，例如，是否会有向量不适合，而普通数组适合函数的时候？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T12:25:07.707

在几乎所有情况下，`vector`都是可取的。它的内存是从空闲存储中分配的（专为大分配而设计）并自动管理；如果需要，您可以轻松获得指向数组本身的指针。

在以下情况下，您将使用数组（内置或`std::array`）：

*   数组大小在编译时是已知的，并且不会太大以至于可能会破坏堆栈；和
*   数组有固定的范围；和
*   动态分配会导致过多的运行时成本或堆碎片等问题，您不希望使用自定义分配器来解决这些问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T12:18:11.657

根据[Bjarne Stroustrup](http://www2.research.att.com/~bs/bs_faq2.html#arrays)的说法，除非您有充分的理由使用数组，否则您应该在数组上使用[向量。](http://www.artima.com/intv/goldilocks.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T12:19:54.183

Vector 是一个动态增长的数组。而数组是静态的。您必须在开始时定义一个数组，并且不能重新分配。使用向量，您没有声明固定大小的限制。您可以从一个空向量开始，并根据需要保持其增长。到目前为止，我从未发现任何数组更适合的情况。事实上，我发现使用向量可以解决我在使用数组时遇到的许多问题。我认为始终使用向量是一个很好的做法。

继续做！！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T12:46:13.477

使用最适合您的情况，我在下面通过一个小例子概述了我最喜欢的固定大小数组的好处之一。

如果您的大小未知或可能需要在运行时增加存储空间，您将寻找向量。

如果您有预定的大小，您可以使用 std::array 甚至是原始 C 数组 (int foo[256])，这在代码简单性和速度方面具有优势。这里最大的好处之一是，如果要存储在数组中的数据是已知的，那么您可以使用 C 样式的初始化程序列表来消除向量可能发生的任何设置成本，并为优化器打开空间以使事情变得更快同时也更易于调试：

```
struct KeyPair { int key; string name; }; 
const KeyPair kFoo[] = { { 0, "0" }, { 1, "1" }, { 2, "2" } };

const string& getName( unsigned int key )
{
assert( key < (sizeof(kFoo)/sizeof(*kFoo)) ); // Check key is a valid index
assert( kFoo[key].key == key ); //< Sanity check - useful is key is an enum which could change
return kFoo[key];
} 
```

# html - HTML - 在本地网络上嵌入网页

> ID：14479462
> 
> 赞同：0
> 
> 时间：2013-01-23T12:12:50.423
> 
> 标签：html, iframe, embed, typo3

我正在尝试将在本地主机上运行的网页嵌入到在我的网络中的服务器上运行的网页中。服务器运行 Typo3 安装。

我尝试使用 iFrame 嵌入本地页面，只要我从本地网络打开页面，它就可以很好地工作。但是，如果我尝试从 Internet 加载网页，加载本地页面会失败（显然），因为它会尝试加载 10.0.0.X 下的页面。

本地网页本身就是一个网络服务器（DVB Recording Service Webserver），所以没有可以嵌入的简单 html 文档。有没有办法嵌入该网页？

在此先感谢，沃尔夫勒姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:19:25.870

在我看来，你有两个选择：

1.  您必须为您的本地网站提供一个公共静态 IP 才能使 iframe 在 Internet 中工作。
2.  如果您没有静态 IP，请使用[DynDNS](http://dyn.com)或[No-IP 之](http://www.noip.com)类的服务将本地 Web 服务器与公共域绑定，并在 iframe 中使用此域。

# sql - SQL检查多列中是否存在日期时间

> ID：14479463
> 
> 赞同：0
> 
> 时间：2013-01-23T12:12:50.427
> 
> 标签：sql

我有一个 BillDate 作为日期，并在 First table 中有一个 Mark as bit 列。（默认标记=0）

在第二个表中，我将 FromDate 作为日期，将 ToDate 作为日期列。

如果在 FromDate 和 ToDate 之间存在 BillDate，我想设置 Mark=1

让我们在第一个表中说数据是

```
----------------------------
BillDate             | Mark
----------------------------
2012-11-10 11:15:30  | 0

2012-12-12 09:00:00  | 0 
```

在第二个表中的数据是

```
---------------------------------------------
FromDate             | ToDate
---------------------------------------------
2012-11-01 07:00:00  | 2012-11-09 23:59:59

2012-12-08 07:00:00  | 2012-12-15 23:59:59 
```

所以在上面的场景中，只有第一个表的第二行`BillDate->2012-12-12 09:00:00`是`Mark as 1` 因为它位于第二个表的第二行之间

我希望我已经解释了我的情况，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:21:22.273

你还没有说你正在使用什么风格的 SQL，以及是否有任何其他字段链接你的表。因此假设一个交叉连接怎么样：

```
Update ft
SET mark = 1
FROM FirstTable ft, SecondTable st
WHERE BillDate BETWEEN StartDate AND EndDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:37:36.140

我认为这将适用于大多数/所有 DMBS（未指定）

```
UPDATE  FirstTable
SET     Mark = 1
WHERE   EXISTS
        (   SELECT  1
            FROM    SecondTable
            WHERE   FirstTable.BillDate BETWEEN SecondTable.Fromdate AND SecondTable.ToDate
        ); 
```

# swing - 摆动中的单选按钮单击动作

> ID：14479466
> 
> 赞同：-1
> 
> 时间：2013-01-23T12:12:58.467
> 
> 标签：swing, swingworker

我有 2 个单选按钮作为“是”和“否”。单击“是”按钮后，我需要在同一框架中设置 3 个级别，如下所示。

1 你叫什么名字？---------

2 你的年龄？---------

3 性别？--------

同样，单击 no 按钮后，这些级别将不会显示在框架中。

请帮我解决这个问题。

我试过点击单选按钮，它会通过 showMessageDialog 在 JOptionPane 中显示一条消息。但无法解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:43:48.237

您需要做的是添加额外的组件，您想在 的选择中显示这些组件，`YES JRadioButton`并将它们全部放在`JPanel`.

现在选择`YES JRadioButton`，只需将其添加`JPanel`到`JPanel, that is holding both the JRadioButton and this newly created JPanel`, 并调用`frame.pack()`，如下例所示。

```
private ActionListener radioActions = new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == yesRButton)
        {
            if (!selectionPanel.isShowing())
                contentPane.add(selectionPanel);
        }
        else if (e.getSource() == noRButton)
        {
            if (selectionPanel.isShowing())
                contentPane.remove(selectionPanel);
        }
        frame.pack();
    }
}; 
```

# c++ - 构建简单的 Qt5 应用程序时出错

> ID：14479468
> 
> 赞同：5
> 
> 时间：2013-01-23T12:13:02.860
> 
> 标签：c++, qt, build, qt-creator, qt5

**我在Mac OS X 10.7.5**上安装了**Qt 5.0.0** ( *qt-mac-opensource-5.0.0-clang-offline.dmg* ) ，现在我正在尝试使用**Qt Creator 2.6编译“** *Hello World* ”应用程序。 **1** .

 *****构建过程抱怨找不到目录：`/Users/karlphillip/Qt5.0.0/5.0.0/clang_64/qtbase/lib`，然后是几个链接错误：

```
clang++ -c -pipe -mmacosx-version-min=10.6 -O2 -Wall -W -fPIE -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_CORE_LIB -I/Users/karlphillip/Qt5.0.0/5.0.0/clang_64/mkspecs/macx-clang -I. -I/Users/karlphillip/Qt5.0.0/5.0.0/clang_64/include -I/Users/karlphillip/Qt5.0.0/5.0.0/clang_64/include/QtGui -I/Users/karlphillip/Qt5.0.0/5.0.0/clang_64/lib/QtGui.framework/Versions/5/Headers -I/Users/karlphillip/Qt5.0.0/5.0.0/clang_64/include/QtCore -I/Users/karlphillip/Qt5.0.0/5.0.0/clang_64/lib/QtCore.framework/Versions/5/Headers -I. -I/System/Library/Frameworks/OpenGL.framework/Versions/A/Headers -I/System/Library/Frameworks/AGL.framework/Headers -o main.o main.cpp
clang++ -headerpad_max_install_names -mmacosx-version-min=10.6 -o hello_qt.app/Contents/MacOS/hello_qt main.o -F/Users/karlphillip/Qt5.0.0/5.0.0/clang_64/lib -framework QtGui -F/Users/karlphillip/Qt5.0.0/5.0.0/clang_64/qtbase/lib -framework QtCore -framework OpenGL -framework AGL
ld: warning: directory not found for option '-F/Users/karlphillip/Qt5.0.0/5.0.0/clang_64/qtbase/lib'
Undefined symbols for architecture x86_64:
"QApplication::QApplication(int&, char**, int)", referenced from:
_main in main.o
"QLabel::QLabel(QString const&, QWidget*, QFlags<Qt::WindowType>)", referenced from:
_main in main.o
"QWidget::show()", referenced from:
_main in main.o
"QPushButton::QPushButton(QString const&, QWidget*)", referenced from:
_main in main.o
"QApplication::exec()", referenced from:
_main in main.o
"QPushButton::~QPushButton()", referenced from:
_main in main.o
"QLabel::~QLabel()", referenced from:
_main in main.o
"QApplication::~QApplication()", referenced from:
_main in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [hello_qt.app/Contents/MacOS/hello_qt] Error 1 
```

重要的是要注意路径`/Users/karlphillip/Qt5.0.0/5.0.0/clang_64/qtbase/lib`无效，因为目录*qtbase*不存在。工作路径是`/Users/karlphillip/Qt5.0.0/5.0.0/clang_64/lib`。我不是指`qtbase`我项目中的任何地方，所以这可能是由**qmake**添加的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T12:13:02.860

事实证明，**无效`qtbase`路径实际上是最初在**[QTBUG-28336](https://bugreports.qt-project.org/browse/QTBUG-28336)报告的 Qt 错误。

**链接问题是由于我的项目没有与 QtWidgets 链接**，这是我们从 Qt5 开始必须要做的事情。这是通过将以下行添加到您的**.pro**文件中来完成的：

```
QT += widgets 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:32:16.603

我有同样的问题，老实说，我不知道我是如何解决的。

我想/猜想我将所需的文件夹从源文件复制到匹配的“clang_64”文件夹中，这样就可以了。

苏龙仔*****

# c# - 在哪里订阅内部对象的事件？

> ID：14479471
> 
> 赞同：3
> 
> 时间：2013-01-23T12:13:07.150
> 
> 标签：c#, oop, events

我经常遇到一种情况，我必须决定在哪里订阅内部对象的事件？

例如，我有一个对象模型如下所示：

```
class ClassA
{
    public event EventHandler SomeEvent1;
    public event EventHandler SomeEvent2;
    public event EventHandler SomeEvent3;
    public event EventHandler SomeEvent4;
}

class ClassB
{
    private ClassA a;
    public ClassA A 
    {
        get
        {
            return this.a;
        }
    }

    public ClassB()
    {
        this.a = new ClassA();
        // here subscribe to some events (for example, SomeEvent1 and SomeEvent2)
        // this.a.SomeEvent1 += OnSomeEvent1Raised;
        // this.a.SomeEvent2 += OnSomeEvent2Raised;
    }
}

class ClassC
{
    public ClassB B { get; }
}

class ClassD
{
    public ClassC C { get; }

    public void SomeMethod()
    {
        // Here subscribe to another ones events of object C.B.A. For example:
        C.B.A.SomeEvent3 += OnSomeEvent3Raised;
        C.B.A.SomeEvent4 += OnSomeEvent4Raised;
    }

    private void OnSomeEvent4Raised(object sender, EventArgs e)
    {
        throw new NotImplementedException();
    }

    private void OnSomeEvent3Raised(object sender, EventArgs e)
    {
        throw new NotImplementedException();
    }
} 
```

我试图创建类似 UML 图的东西： ![在此处输入图像描述](../Images/1b2f2b926e72fc150caa50ef35a9bb62.png)

我的项目的现有代码的结构具有存在此类对象模型的位置（它具有订阅如上例中实现的事件的位置 - CBASomeEvent+= ）。我不喜欢它，想改变它。我想从你这里得到关于这种情况的最佳实践。

另一种方法是在classB、classC、classD中复制classA的所有事件。然后将所有对事件的订阅替换为**ONE PLACE**（我的意思是，在 B 类中，我们将订阅/取消订阅 A 类对象的所有事件。在 C 类中，我们将订阅/取消订阅 B 类对象的所有事件。所以on...) 在这种情况下，所有订阅和取消订阅都将集中在一个地方。希望，你明白我在这里的意思。

再次，请依靠您的知识和经验告诉我们如何解决这种情况。

**更新**

您是否同意我的订阅和取消订阅事件必须放在一个地方？请也回答这个附加问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:41:07.807

您可能对[事件聚合器](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx)感兴趣。

它基本上所做的是将发布者与订阅者分离——它是一种事件容器。您可以通过依赖注入（例如 MEF）为您想要订阅或发布的每个类获取事件聚合器。

我个人使用并且最喜欢它的方式是 Rob Eisenberg 在 Caliburn Micro 中实现事件聚合器的方式：

*   [NuGet 库](http://nuget.org/packages/Caliburn.Micro.EventAggregator)
*   [Caliburn.Micro 事件聚合器文档](http://caliburnmicro.codeplex.com/wikipage?title=The%20Event%20Aggregator)

在您的情况下，对象 A、B 和 C 将共享事件聚合器的同一实例，这意味着一旦事件在此事件聚合器上发布，所有这些对象都会识别它。由于对某些事件的不同处理，A、B 和 C 类能够表现不同。

**编辑**

事件聚合器的用途是，您使用*类的实例*订阅聚合器本身。发布者和订阅者类之间的连接是通过依赖事件聚合器的同一实例来实现的。如果 Caliburn.Micro 通过实现通用接口 ( `IHandle<>`) 订阅某些事件。例如：如果您想订阅，则在要订阅的类中`MyCustomEvent`实现`IHandle<MyCustomEvent>`接口。这需要从此类事件`void Handle(MyCustomEvent e)`的接口实现方法。`IHandle<MyCustomEvent>`每次`MyCustomEvent`在共享事件聚合器上发布（新）时都会调用此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:28:10.427

您的示例中有太多`public`内容。希望我会在下面有意义：

1.  ClassB 包含一个 ClassA 类型的对象，并处理一些 ClassA 事件
2.  ClassC 包含 ClassB 类型的对象，但事件被忽略。
3.  ClassD 包含一个 ClassC 类型的对象，*并处理来自 ClassB 对象内的 ClassA 对象的事件，该对象包含在此 ClassC 对象中*

`#2 和 #3 不好：ClassC 应该处理*和实现*事件，处理它们并让它们“冒泡”（调用它们自己的、相同的事件）以便 ClassD 正确处理。`

 `基本上，*它们都*应该处理*所有事件*，要么对它们做出反应（如在 ClassB 中对 ClassA 的事件），要么只是传播它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T16:19:15.867

在这里找到不错的解决方案：

[Csharp-通知中心](http://www.codeproject.com/Tips/438582/Csharp-NotificationCenter)`

# solr - solr 中 keepwordfilterfactory 的分词器

> ID：14479473
> 
> 赞同：2
> 
> 时间：2013-01-23T12:13:17.633
> 
> 标签：solr, lucene, tokenize, solr4, filterfactory

我想使用 solr`keepwordfilterfactory`但没有为此获得适当的标记器。用例是，我有一个字符串说`hi i am coming, bla-bla go out.`现在从下面的字符串中我想保留像`hi i`，`coming,`等`bla-bla`这样的词。那么与过滤器工厂一起使用什么标记器，以便我能够在方面获得任何这样的组合。尝试了不同的标记器，但没有得到确切的结果。我正在使用`solr 4.0`. 是否有任何这样的标记器可以根据使用的 keepwords 进行标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:33:20.200

您的标记化“规则”是什么（将长文本拆分为单个标记）。上面的例子似乎暗示有时你有一个单词标记，有时是一个多单词（“hi i”）。多词的情况在这里是有问题的，但是您可以通过组合[ShingleFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.ShingleFilterFactory)来为您提供多词标记以及原始标记，然后只保留您想要的项目。

我不确定 KeepWord 过滤器是否能正确处理多字串。如果没有，您可能希望在 shingle 过程中使用特殊的分隔符，然后作为最后一步正则表达式将其过滤回空格。

# android - Android 活动完成

> ID：14479475
> 
> 赞同：0
> 
> 时间：2013-01-23T12:13:21.017
> 
> 标签：android, android-intent, android-activity, exit

我正在尝试在我的应用程序中添加主题更改选项。我有一个名为时间线的主要活动。从那里用户可以转到主题更改活动可以更改主题。它会更改主题更改活动的主题，但不会更改时间线，即 mainactivity。当我再次重新加载时间线活动，我可以看到 chnage。

然后我添加以下代码以保存主题更改活动中的按钮以重新加载时间线活动

```
save.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            finish();
            Intent i = new Intent(BackgroundChange.this, TimeLine.class);
            i.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
            startActivity(i);
            Intent k = new Intent(BackgroundChange.this,
                    SettingsActivity.class);
            startActivity(k);

        }
    }); 
```

它运作良好。

但是当我退出我的应用程序并重新开始时，我可以看到在主题之前的时间线活动。

我使用以下代码退出应用程序

```
 exit.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            finish();
       Intent intent = new Intent(Intent.ACTION_MAIN);
                                intent.addCategory(Intent.CATEGORY_HOME);
                                intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                                intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK);
                                startActivity(intent);

        }
    }); 
```

如果我再次退出，我可以看到更改的时间线。我想在退出我的应用程序时清除所有活动。退出后我无法保留任何以前的活动。现在我该怎么办？请给我一个建议..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:22:02.903

在出口处，

```
exit.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {
               Intent intent = new Intent(getApplicationContext(),TimeLine.class); //This will finish all activities except TimeLine
                            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

                            intent.putExtra("exit", true);
                            startActivity(intent);

    }
}); 
```

在时间轴的 OnCreate 中，

```
if(getIntent().getBooleanExtra("exit", false))
 finish(); //This will finish your main activity 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:20:44.917

但是，如果您使用 this.finish() 它可以工作。删除所有意图并使用“this.finish()”。肯定会奏效的。如果它不起作用，则在完成（）之后使用 System.exit（0）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:24:34.510

您可以在清单文件中为您的活动使用 noHistory="true"

# ios - 如何在objective-c中的表内创建多个表视图？

> ID：14479476
> 
> 赞同：2
> 
> 时间：2013-01-23T12:13:31.547
> 
> 标签：ios, objective-c, ipad

在我的应用程序中，我需要在一个垂直的单表视图中放置不同的不同水平表视图。请帮我解决这个问题？谢谢！！

# android - 存储 SharedPreferences 中的 ArrayList 搞乱了元素顺序

> ID：14479479
> 
> 赞同：2
> 
> 时间：2013-01-23T12:13:34.370
> 
> 标签：android

我正在使用 SharedPreferences 来保存和加载我的 ArrayList，如下所示：（保存）

```
 SharedPreferences loadGlobalVariables = getSharedPreferences(APP_NAME, 0);
        Categories = new ArrayList<String>(loadGlobalVariables.getStringSet("Categories", new HashSet<String>())); 
```

（加载）还有这个（它们都工作正常，保存和加载都正确）

```
 SharedPreferences saveGlobalVariables = getSharedPreferences(APP_NAME, 0);
    SharedPreferences.Editor editor = saveGlobalVariables.edit();
    editor.putStringSet("Categories", new HashSet<String>(Categories));
    editor.commit(); 
```

但是检索到的 ArrayList 的元素顺序与以前不同。我知道这一点是因为我将这个 ArrayList 作为一个列表放入 Dialog 中（每次打开它都会刷新这个列表。），按 Category.toArray(temArray)，并且该列表不再按字母顺序排列。

之前，这个 ArrayList 里面的 String 元素按字母顺序排序。当我从 SharedPreferences 中检索它时，它不再按字母顺序排序。

谢谢你的帮助，提前。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T12:35:33.480

我用一个技巧克服了这种情况。

1.  在 SharedPreferences 中首先存储 ArrayList 的大小。
2.  在 for 循环中，将 arraylist 的元素存储到 SharedPreferences File 中。

现在这里是存储键值对的技巧，保留键“ArraylistName”+元素的位置

检索时：

1.  首先检索arrayList的大小
2.  for (i = 0 ; i < sizeOfList ; i++) { 获取键值为 "ArrayListName" + i 的元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:25:30.123

在 Java`Set`中不维护其元素的顺序。不幸的是`SharedPreferences.Editor`，没有提供存储列表的方法，因此您可能应该将列表序列化为字符串并使用`putString()`.

请参阅[在 SharedPreferences 中存储列表或集合](https://stackoverflow.com/questions/6598331/store-a-list-or-set-in-sharedpreferences)。

# google-maps - 地图瓦片地图的最大/最小纬度

> ID：14479480
> 
> 赞同：0
> 
> 时间：2013-01-23T12:13:39.863
> 
> 标签：google-maps, openstreetmap, mapquest

我正在尝试基于中心点纬度/经度构建地图，地图将始终是固定大小，例如 1024 x 1024。用户可以选择中心点并缩放。

例如，如果我用地图任务中的地图图块填充地图，是否有办法根据地图图块知道当前显示的地图的最大/最小纬度？

我想知道这一点，以便我可以准确地将事物投影到地图上。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:02:49.570

[OSM Wiki](http://wiki.openstreetmap.org/wiki/Main_Page)有对[Slippy 地图 tilenames](http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames)的描述，其中还包括 lon/lat-to-tilenames 和 tilenames-to-lon/lat。

# ios - 我怎样才能得到将在其中绘制子字符串的绑定矩形？

> ID：14479488
> 
> 赞同：0
> 
> 时间：2013-01-23T12:14:19.067
> 
> 标签：ios, nsstring

我想得到一个框，其中一个 NSString 的某个子字符串已经在 UILabel（或 UITextView，如果更容易的话）中呈现，考虑到整个 NSString 被绘制的矩形，pus 换行模式，字体，等等。在 OSX 中，在添加中，有一个方法可以返回该矩形

```
- (NSRect)boundingRectWithSize:(NSSize)size options:(NSStringDrawingOptions)options attributes:(NSDictionary *)attributes 
```

iOS有类似的东西吗？我检查了文档，但没有找到任何东西。有没有类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:24:31.740

我想，这可能对你有帮助

```
// Create some text view for example
_tv = [[UITextView alloc] initWithFrame:CGRectMake(10.0, 10.0, 300.0f, 250.0f)];
_tv.text = @"dkjshfk shf kjhs fkj ewkjhf kwfwkj fhwk fwh fjkw hfjkhwe fkjwh";
_tv.font = [UIFont systemFontOfSize:24];
[self.view addSubview:_tv]; 
```

这就是你要找的

```
- (void)someAction:(id)sender
{
    // Here is a frame of selected text in text view
    CGRect frame = [_tv firstRectForRange:_tv.selectedTextRange];

    // Mark selected text with yellow
    UIView *v = [[[UIView alloc] initWithFrame:frame] autorelease];
    v.backgroundColor = [UIColor yellowColor];
    v.alpha = .8f;
    [_tv addSubview:v];
} 
```

# sql - SQL 查询为每个值选择前 2 个

> ID：14479489
> 
> 赞同：1
> 
> 时间：2013-01-23T12:14:20.227
> 
> 标签：sql, tsql

我有一个有 3 列的表，column1 中的数据有重复值，第 3 列有总计，我想做的是返回第 1 列中每个值的前 2 个总计。

我创建此表的查询如下：

```
SELECT service,name, total
  FROM [test].[dbo].[TestTable]
  join test1.dbo.service
  on substring(servan,0,4)=servicebn
  where substring(servan,0,4)=servicebn and name <> testname
group by service,name,total
order by service,total desc 
```

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:16:46.690

如果你正在使用`SQL Server 2005+`，你可以使用*Common Table Expression*和*Window Function*。

```
WITH recordsList
AS
(
    SELECT  service, name, total,
            DENSE_RANK() OVER (PARTITION BY service 
                                ORDER BY total DESC) rn
    FROM    [test].[dbo].[TestTable]
            INNER join test1.dbo.servd
                on substring(servan,0,4)=servicebn
    where   substring(servan,0,4) = servicebn and 
            name <> testname
)
SELECT  service, name, total
FROM    recordsLIst
WHERE   rn <= 2 
```

附带说明一下，此查询的性能很差，因为它需要`FULL TABLE SCAN`在每个表上。原因是由于加入条件`substring(servan,0,4)=servicebn`。它不使用索引。

# objective-c - 主 - 详细表视图 - 不确定如何/在哪里执行 IF 语句

> ID：14479490
> 
> 赞同：1
> 
> 时间：2013-01-23T12:14:21.767
> 
> 标签：objective-c, if-statement, uitableview, master-detail

在我的应用程序中，我使用了一个带有 3 个单元格的主 tableView，取自 JSON。这 3 个单元格中的每一个都将连接到另一个 tableView，但我不确定如何执行此 IF 语句。

这是主tableView的.m。到目前为止，我只将 1 个 detailView(tableView) 连接到 master：

```
#import "GuideTableViewController.h"
#import "GuideDetailTableViewController.h"
#import <QuartzCore/QuartzCore.h>

@interface GuideTableViewController (){
    NSArray *guide;

}
@property (weak, nonatomic) IBOutlet UITableView *tableView;

@property (weak, nonatomic) IBOutlet UIImageView *imgHeader;

@property (weak, nonatomic) IBOutlet UIButton *btnMap;

@property (weak, nonatomic) IBOutlet UIImageView *ImgTitle;

@end

@implementation GuideTableViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
     }
    return self;
}

//JSONmetod
- (void) loadJSON{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        //code
        NSData *data = [NSData dataWithContentsOfURL:[NSURL   URLWithString:@"https://dl.dropbox.com/u/100670549/test.json"]];

        NSError *error;

        if (data)
        {

            guide = [NSJSONSerialization JSONObjectWithData:data options:0 error:&error];

            for (NSDictionary *dictionary in guide){
                NSLog([dictionary description]);
            }

        }else
        {
            NSLog(@"Could not load data");
        }

            dispatch_sync(dispatch_get_main_queue(), ^{
                // code
                [self.tableView reloadData];
            });

    });

    }

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    //Anropa json

    [self loadJSON];

    //set background
    self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage   imageNamed:@"background.jpg"]];

    //rounded corners

    [self.tableView.layer setCornerRadius:9.0];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

//TableView
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return 3;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath   *)indexPath{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

    NSDictionary *dict = [guide objectAtIndex:indexPath.row];
    cell.textLabel.text = [dict valueForKey:@"title"];

    return cell;
}

//To detailView. Started with an IF here.

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

    if ([segue.identifier isEqualToString:@"showStay"]){
        GuideDetailTableViewController *tvc = [segue destinationViewController];
        NSIndexPath *index = sender;
        NSDictionary *dict = [guide objectAtIndex:index.row];

        tvc.stay = dict;
    }
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath      *)indexPath{

    [self performSegueWithIdentifier:@"showStay" sender:indexPath];

 }

- (void) viewWillAppear:(BOOL)animated{
    UITableViewCell *cell = [self.tableView     cellForRowAtIndexPath:self.tableView.indexPathForSelectedRow];

    //ta bort markeringen när man går tillbaka till master från detailView.
    [cell setSelected:NO];

    //Hide navbar
    [self.navigationController setNavigationBarHidden:YES];
}

//Show navbar in detailView
-(void)viewWillDisappear:(BOOL)animated{
    [self.navigationController setNavigationBarHidden:NO];   
}

@end 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:02:59.060

你的代码没问题。if 语句在正确的位置。

如果您已经将原型单元链接到情节提要中的详细视图，则无需实现`tableView:DidSelectRowAtIndexPath:`

`prepareForSegue:sender:`被自动调用。

# html - 制作新的 HTML 标签，其行为类似于带有附加功能的现有标签

> ID：14479491
> 
> 赞同：2
> 
> 时间：2013-01-23T12:14:33.297
> 
> 标签：html, css

> **可能重复：**
> [自定义 html 标签——有更好的方法吗？](https://stackoverflow.com/questions/13230005/custom-html-tags-is-there-a-better-way)

`<pre class="cpp">`在使用 highlight.js 时，我发现自己经常写：只是出于兴趣，有什么办法可以制作一个新标签，比如说`<pcpp>`，它的行为与 完全一样`<pre class="cpp">`，只是使用 CSS？

我可以想象这可以通过 JavaScript 实现，但我不想在每次加载页面时都开始更改所有标签。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-23T13:04:30.480

不，您不应该在 HTML 中创建新标签

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T12:17:37.743

不，但是如果您仍然使用 JavaScript，那么如果您发现您正在将该类应用于页面上的每个元素，则可以将该`cpp`类应用于所有元素：`<pre>``<pre>`

```
// Using jQuery
$('pre').addClass('cpp'); 
```

制作一个新元素可能会导致页面出现重大问题，比它的价值要麻烦得多，而且它不会再被验证为 HTML。

# javascript - Javascript - 在函数定义变量中使用

> ID：14479494
> 
> 赞同：0
> 
> 时间：2013-01-23T12:14:48.723
> 
> 标签：javascript, jquery

我想执行这个函数并在函数外部使用变量，但在每个函数内部。我怎样才能让它工作？

```
$('.social').each(function() {
    url = "http:www.google.com";
    bit_url(url);    
    $(element).append(urlshortened);
});

function bit_url(url) {
        var url = url;
        var username = "...";
        // bit.ly username
        var key = "...";
        $.ajax({
            url : "http://api.bit.ly/v3/shorten",
            data : {
                longUrl : url,
                apiKey : key,
                login : username
            },
            dataType : "jsonp",
            success : function(v) {
                urlshortened = v.data.url;
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:20:20.283

Ajax 中的“A”代表异步代码不会那样工作，你需要回调。

```
function bit_url(url) {
   [...]
   //return the Deffered object
   return $.ajax({ [...]
}

$('.social').each(function() {
    [...]
    //attach a `done` callback to the returned $.ajax's Deferred instance
    bit_url(url).done(function(v) {
        $(element).append(v.data.url);
    });
}); 
```

[`Deferred.done`](http://api.jquery.com/deferred.done/)等效于`$.ajax`'s `success`，我已将`done`处理程序附加到`.each`范围内，因此您的回调可以访问范围内的所有变量`.each`。

虽然，如果总是相同的元素，您可以通过将成功处理程序`$(element)`放入@JohnJohnGa 的答案。`append`

由于问题的性质，我假设您想要替换锚点，因此您将在内部存储对链接的`href`引用并在回调中使用该引用。`.each``.each`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:22:38.423

您可以将结果附加到`success`函数中

```
success: function (v) {
    urlshortened = v.data.url;
    $(element).append(urlshortened)
} 
```

所以你的代码将是：

```
$('.social').each(function () {
    url = "http:www.google.com";
    bit_url(url);
});

function bit_url(url) {
    var url = url;
    var username = "...";
    // bit.ly username
    var key = "...";
    $.ajax({
        url: "http://api.bit.ly/v3/shorten",
        data: {
            longUrl: url,
            apiKey: key,
            login: username
        },
        dataType: "jsonp",
        success: function (v) {
            $(element).append(v.data.url);
        }
    });
} 
```

# c# - 通过 MS Internet Security & Acceleration Server 控制用户对 Internet 的访问

> ID：14479498
> 
> 赞同：1
> 
> 时间：2013-01-23T12:14:59.897
> 
> 标签：c#, .net, vb.net, enterprise-library

我想允许/禁止用户使用互联网（通过 Internet 安全和加速服务器）并限制或允许某些软件，如 Outlook。我正在用 C# 开发一个 Windows 服务。我开始知道我可以通过使用 .NET 企业服务器来做到这一点。

我尽力在互联网上搜索示例或一些参考资料，但没有运气。我还在寻找。如果有人对这些事情有想法，请指导我或建议帮助材料。我必须尽快实施。

# asp.net - 404 未找到基于 SSL 端点的 Web 服务

> ID：14479501
> 
> 赞同：0
> 
> 时间：2013-01-23T12:15:04.217
> 
> 标签：asp.net, vb.net, web-services, security

我已经启动并运行了一个 Web 服务，通过浏览器我可以访问它并查看它是否启动并运行。同样没有 https 我可以调用网络服务。

目前要拨打电话，我正在使用一个小型控制台应用程序进行测试并查看结果。

服务器端我的 web.config 如下：

服务部分

```
<services>
    <service name="Website.mynamespace.Service1">
        <endpoint address="/service.svc" behaviorConfiguration=""  binding="wsHttpBinding" contract="SomeDLLFile.Anothernamespace.Services.Proxy.Interface1" ></endpoint>
        <endpoint address="/service.svc" behaviorConfiguration="" binding="wsHttpBinding" contract="SomeDLLFile.Anothernamespace.Services.Proxy.Interface1" bindingConfiguration="myBinding" />
        <endpoint address="mex" binding="wsHttpBinding" contract="IMetadataExchange"/>
      </service>
      <service name="Website.mynamespace.Service2">
        <endpoint address="/service.svc" behaviorConfiguration=""  binding="wsHttpBinding" contract="SomeDLLFile.Anothernamespace.Services.Proxy.Interface2" ></endpoint>
        <endpoint address="/service.svc" behaviorConfiguration="" binding="wsHttpBinding" contract="SomeDLLFile.Anothernamespace.Services.Proxy.Interface2" bindingConfiguration="myBinding" />
        <endpoint address="mex" binding="wsHttpBinding" contract="IMetadataExchange"/>
      </service>
</services> 
```

使用的绑定

```
 <wsHttpBinding>
    <binding name="myBinding">
      <security mode="Transport">
        <transport clientCredentialType="None"/>
        </security>
    </binding>
  </wsHttpBinding> 
```

在客户端（我的控制台应用程序）上，我添加了对我的 web 服务的服务引用。这样我就可以通过 HTTP 进行调用。但是，当使用 HTTPS 时，我收到一条错误消息，内容如下

*`"There was no endpoint listening at https://test.mywebsite.nl/service.svc that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details."`*

我的控制台应用程序中的 app.config 如下所示；

```
<client>
      <endpoint address="https://test.mywebsite.nl/service.svc" 
                binding="basicHttpBinding"
                bindingConfiguration="BasicHttpBinding_IProxyInterface1"
                contract="Service.IProxyInterface1" 
                name="BasicHttpBinding_IProxyClientInterface" />
      <endpoint address="https://test.mywebsite.nl/service.svc" 
                binding="basicHttpBinding"
                bindingConfiguration="BasicHttpBinding_IProxyInterface2"
                contract="Service.IProxyInterface2" 
                name="BasicHttpBinding_IProxyInterface2" />
</client>

<behaviors>
  <serviceBehaviors>
    <!-- 
      Step 2\. Inside a <serviceBehaviors> section, add 
      a name attribute in the <behaviors> element that 
      matches the behaviorConfiguration attribute in the
      <service> element above.
    -->
    <behavior name="">
      <serviceMetadata httpGetEnabled="true" httpGetUrl=""/>
      <serviceDebug httpHelpPageEnabled="true" includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

当我查看内部异常时，我正在查看 404 错误。我已经尝试过关于 SO 的其他主题以及 MS 上的文章的各种建议，但我一定遗漏了一些东西，因为我仍然遇到同样的错误。有人知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:33:36.793

由于[这个](https://stackoverflow.com/questions/3876955/wcf-service-returns-404-over-https-but-not-http)主题在这里解决了这个问题。

问题出在服务名称中，因此我将两个合同的端点合并到一个服务定义中。我还将 wsHttpBinding 更改为 basicHttpBinding。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:42:47.860

我有类似的东西，并在 IIS 中安装了一个自我认证的 SSL 证书。尝试：

[http://weblogs.asp.net/scottgu/archive/2007/04/06/tip-trick-enabling-ssl-on-iis7-using-self-signed-certificates.aspx](http://weblogs.asp.net/scottgu/archive/2007/04/06/tip-trick-enabling-ssl-on-iis7-using-self-signed-certificates.aspx)

显然，当您部署到生产环境中时，您需要购买适当的证书。

# java - 在多线程编程中使用静态类方法

> ID：14479502
> 
> 赞同：2
> 
> 时间：2013-01-23T12:15:15.177
> 
> 标签：java, multithreading, thread-safety, static-methods, static-members

我正在构建一个使用两个类的网络爬虫：一个下载器类和一个分析器类。由于我对程序的设计，我将一些方法外包给了一个名为的静态类`utils`（查找链接后缀，确定是否应该在给定一些变量的情况下下载它，等等）。由于在某个时间有不止一个下载器和不止一个分析器，我想知道他们是否可以从`utils`类中的某些静态方法中得到错误的答案。

例如，假设分析器需要知道链接后缀——它正在使用`utils.getSuffix(link)`方法。同时操作系统切换到一些下载线程，该线程也需要获取一些链接后缀并再次使用`utils.getSuffix(link)`. 现在操作系统切换回没有得到正确响应的分析器线程。

1.  我对吗？
2.  如果我是对的，我应该添加`synchronized`到`utils`类的每个方法中吗？或者我是否应该在每个线程中使用相关方法来防止这种情况，即使我正在复制代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:18:25.590

这完全取决于方法的实现。如果该方法仅使用局部变量并根据您给它的参数确定后缀，那么一切都很好。一旦它需要任何可以从另一个线程访问的资源（局部变量和参数不是），您就需要担心同步。

在我看来，您正在使用静态作为实用程序，不需要任何超出其自身参数的东西；所以你应该是安全的:)

# youtube-api - Youtube TV 上的搜索 API

> ID：14479505
> 
> 赞同：1
> 
> 时间：2013-01-23T12:15:18.860
> 
> 标签：youtube-api

我需要构建一个使用搜索 Youtube 内容的 API 的系统，其功能与[https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters)所描述的功能完全相同，但结果显示在 youtube/ **tv**中（即只需使用光标键、选择和返回即可访问和浏览，如[https://www.youtube.com/tv#/browse](https://www.youtube.com/tv#/browse)中所使用的）

经过广泛搜索，我找不到解决方案。一个存在吗？

谢谢，安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:52:09.060

如果我要广泛地解释您的问题，那将是“是否有我可以重新利用的 youtube.com/tv 的开源版本”。答案是否定的。你将不得不自己做一些繁重的工作。

如果您想要一个起点，您可以直接从浏览器的开发工具中查看[http://stb-web-app.appspot.com/static/index.html的 JavaScript 源代码](http://stb-web-app.appspot.com/static/index.html)[SVN 回购](https://code.google.com/p/gdata-samples/source/browse/#svn/trunk/ytplayer/stb-web-app%253Fstate%253Dclosed)。该示例并未准确提供您正在寻找的内容，但它确实说明了如何检测特定按键并在“机顶盒”环境中显示 YouTube 提要。

# jquery - 移动应用中根据屏幕大小自动增加字体大小

> ID：14479507
> 
> 赞同：2
> 
> 时间：2013-01-23T12:15:22.490
> 
> 标签：jquery, html, css, jquery-mobile, mobile-application

如何根据屏幕大小增加字体大小？

我有一些文字在 iPhone 和 iPad 中的大小保持不变。我想根据屏幕大小增加和/或减少字体大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:16:51.223

您应该使用媒体查询来执行此操作。例如

```
@media (max-width: 480px) { 
    body { font-size: 1.2em; } /* increase the base font size on landscape phones */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T07:36:23.210

访问此自动字体拉伸：[是否可以根据浏览器宽度动态缩放文本大小？](https://stackoverflow.com/questions/5358183/is-it-possible-to-dynamically-scale-text-size-based-on-browser-width)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:24:27.980

上面带有媒体查询（院长）的问题是正确的。您还需要确保您拥有 iPhone，`-webkit-text-size:none -` 否则无论您的字体设置如何，iphone 都会缩放字体。

此外，如果您想捕获更大的手机，您可能需要修改查询。尤其是当我们现在在 Android 市场上获得更大屏幕的智能手机时。

# c# - 使用客户端库调用 Google Contact API v3.0

> ID：14479514
> 
> 赞同：0
> 
> 时间：2013-01-23T12:15:50.827
> 
> 标签：c#, google-api, dotnetopenauth

我需要使用 DotNetOpenAuth（或任何客户端库）调用**Google Contact API v3.0 ，但我没有找到任何帮助，有人可以指导我吗？**

是否需要使用`OAUTH 2.0`调用 Google Contact API v3.0？或者可以通过`OAUTH 1.0`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:56:34.180

`request.Headers.Add("GData-Version", "3.0");`我通过在向 Google Conatact API 发出请求之前添加标头来解决这个问题

# ruby - 这是使用 ruby 通过 JSON api 提交文件的正确方法吗？

> ID：14479515
> 
> 赞同：0
> 
> 时间：2013-01-23T12:15:53.390
> 
> 标签：ruby, json, api, rest, paperclip

我昨天在这里发布了一个关于如何通过 JSON API 发布文件的问题：

[在 Ruby/Rails 上发布带有文件内容的 JSON](https://stackoverflow.com/questions/14469680/posting-json-with-file-content-on-ruby-rails)

但是我无法真正找到我正在寻找的东西，所以我尝试执行以下操作：

1）我写了一个rake任务来上传：

```
desc "Tests JSON uploads with attached files on multipart formats"
task :picture => :environment do
    file = File.open(Rails.root.join('lib', 'assets', 'photo.jpg'))

    data = {title: "Something", description: "Else", file_content: Base64.encode64(file.read)}.to_json
    req = Net::HTTP::Post.new("/users.json", {"Content-Type" => "application/json", 'Accept' => '*/*'})
    req.body = data

    response = Net::HTTP.new("localhost", "3000").start {|http| http.request(req) }
    puts response.body
  end 
```

然后在我的 rails 应用程序的控制器/模型上得到它，如下所示：

```
params[:user] = JSON.parse(request.body.read)

...

class User < ActiveRecord::Base
  ...

    has_attached_file :picture, formats: {medium: "300x300#", thumb: "100#100"}

    def file_content=(c)
      filename = "#{Time.now.to_f.to_s.gsub('.', '_')}.jpg"
      File.open("/tmp/#{filename}", 'wb') {|f| f.write(Base64.decode64(c).strip) }
      self.picture = File.open("/tmp/#{filename}", 'r')
    end
end 
```

所以，问题是：我是在重新发明轮子还是这样做的正确方法？

顺便说一句：它有效，我只需要知道这是否是通过 json 上传文件的约定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:02:56.343

JSON 是一种数据序列化格式。没有将数据或文件作为序列化对象中的数据上传的标准模式。JSON 期望数据字段将是基本对象，因此您可能希望使用文件的 Base64 编码将其转换为字符串。

您可以随意定义您的结构，处理它是您的责任。

# php - 如何将多个 html 文件（其中包含 PHP 和 JS 代码）合并为 1 个大 html 文件

> ID：14479516
> 
> 赞同：3
> 
> 时间：2013-01-23T12:15:56.630
> 
> 标签：php, html

我正在尝试创建一个脚本，该脚本将获取多个 HTML 文件，其中可能包含 PHP 代码和 JavaScript 代码，并用它制作一个大的 HTML/PHP 文件。比如 home.php、news.php、something.php 会组合成Index.php。

在有人问我为什么需要这样的文件之前：原因是创建 1 个文件，该文件使用负责任的布局使用视差进行触摸滑动。

我已经尝试过`file_get_contents()`，但如果 html 有一个简单的`<?php echo "hello world";?>`它不会输出它。

如何将多个 HTML 文件与其中的任何内容（JS、php 等）合并？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:20:57.870

您是否尝试过包含（）？那应该可以正常工作。

从 PHP 文档... [http://php.net/manual/en/function.include.php](http://php.net/manual/en/function.include.php)

> include 语句**包含**并**评估**指定的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T12:30:50.297

如果您想要未执行的 PHP 代码，您将需要到 PHP 文件的 FTP 连接。使用 cURL，您将打开一个 FTP 连接并下载文件，该文件将以其原始形式与`<?php echo "hello world"; ?>`等。这就像在您的操作系统中使用普通的 FTP 客户端来检索文件一样，在这种情况下，它将位于 PHP 脚本中的变量中，然后您可以执行内容或从那里执行任何操作。

当然这个方法也要看主机（服务器）是否允许。

# php - PHP正则表达式提取public_html之后的所有内容

> ID：14479519
> 
> 赞同：0
> 
> 时间：2013-01-23T12:16:04.727
> 
> 标签：php, regex, preg-replace

可能是一个简单的，但我有文件路径，比如`/var/www/html/mysite/releases/20130123113638/public_html/images/image.jpg` 发布路径不断变化的地方。我只需要在 public_html 之后提取路径 - 任何人都可以建议最好的方法吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:21:18.513

这是您需要的：

```
$text = '/var/www/html/mysite/releases/20130123113638/public_html/images/image.jpg';
preg_match('/public_html(.*)$/Usmi', $text, $res);
echo $res[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:24:28.427

您不需要为此使用`regex`，使用可以使用一些简单的[字符串](http://php.net/manual/en/ref.strings.php)函数，例如`strrpos()`and `substr()`，例如：

```
$path = "/var/www/html/mysite/releases/20130123113638/public_html/images/image.jpg";
$index = strrpos($path, "public_html/");
$path = substr($path, $index + 12);
// $path is now equal to 'images/image.jpg' 
```

# c# - C# 断点更改行为

> ID：14479520
> 
> 赞同：4
> 
> 时间：2013-01-23T12:16:05.733
> 
> 标签：c#, winforms, flowlayoutpanel

我处于一种奇怪的情况，我意识到如果在我的代码上设置断点，那么它将被触发，否则永远不会调用该方法。我的问题是；如何设置断点来改变 C# 代码与 WinForms 应用程序交互的方式？

罪魁祸首似乎是[ScrollableControl.ScrollControlIntoView Method](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.WINDOWS.FORMS.SCROLLABLECONTROL.SCROLLCONTROLINTOVIEW%29;k%28SCROLLCONTROLINTOVIEW%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V3.5%22%29;k%28DevLang-CSHARP%29&rd=true)。我已经将 Flowlayoutpanel 的 autoScroll 属性设置为*true*，并且垂直滚动条是可见的，但它仍然没有区别。

![代码仅在调试模式下被调用，并且断点被命中](../Images/3011e30e8b483829bf179fef9d3039b7.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T13:07:04.960

调用堆栈会很明显。不得不猜测：是的，调试器肯定会影响 GUI 代码。通过设置断点尤其如此。这是焦点从您的窗口更改为 Visual Studio 主窗口的副作用。然后回来。这会影响订阅窗口的 De/Activated 事件、Got/LostFocus 事件以及任何涉及绘画的代码（如果 VS 与您的窗口重叠）。

在调试依赖于这些事件的 GUI 代码时，这肯定会妨碍。在极端情况下，您可能需要在另一台机器上设置远程调试器，以便在调试时不会发生这种焦点切换。

ScrollControlIntoView() 也是相关联的。这通常在控件获得焦点时自动发生。这大致回答了您的问题，但很难看出它对实际解决您的问题有何用处。请务必查看调用堆栈以获得更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:19:49.757

这取决于此代码的确切位置*。*如果它在某种事件处理方法中（比如调整大小），或者说，绘画方法，它*可能会*改变你的应用程序的行为。

这就是为什么程序员的现代桌面 *应该*有 2 个监视器，在一个监视器上运行应用程序，在另一个监视器上设置断点。但即使在这种情况下，你也会遇到一些问题。

因此**，如果**断点在以前提到的地方，简单的日志记录通常是更适合这种调试的解决方案。

# regex - 正则表达式匹配非空 html 链接？

> ID：14479522
> 
> 赞同：1
> 
> 时间：2013-01-23T12:16:20.790
> 
> 标签：regex, html-parsing

我需要的很简单。如果链接或单词为空或空格，则不匹配。

```
<a href="link">anything</a> - match
<a href="">anything</a>     - not match
<a href="link"></a>         - not match
<a href=" ">anything</a>    - not match
<a href="link"> </a>        - not match
<a href=" "> </a>           - not match
<a href=""> </a>            - not match
<a href=" "></a>            - not match
<a href=""></a>             - not match 
```

我首先尝试了什么；

```
<a href="(.*?)">(.*?)</a> 
```

我知道`^a`意思不是。但只是`^`无效。那么什么语法意味着NOT EMPTY？

注意：我知道`a`标签中可能还有其他属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:52:49.503

> 我需要的很简单。

是的，您真正需要的是 XPath：

```
//a[normalize-space(@href) != ""] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:13:07.383

如果你真的想用正则表达式解决这个问题，你可以使用这个：

```
/<a href="[^\s"]+">[^<]*[^<\s][^<]*<\/a>/ 
```

这匹配`href="..."`属性中至少一个字符长且不包含空格的所有内容。

它还匹配`<a>...</a>`包含至少一个非空白字符的标签之间的所有内容。

如果您想允许包含空格的网址，则此正则表达式有效：

```
/<a href="[^"]*[^\s"]+[^"]*">[^<]*[^<\s][^<]*<\/a>/ 
```

但是，请考虑改用解析器和查询语言（如 XPath）（如此处建议的那样[）](https://stackoverflow.com/a/14480223/1337398)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:44:10.170

你可以使用

```
 /<a href="\s*\S[^"]*">\s*\S[^<]*<\/a>/ 
```

`\s*\S[^<]*<`表示不匹配空格或多次匹配空格，直到后跟一个非空格字符，后跟任何不是`<`零或多次的字符，直到后面跟着`<`.

当然，如果`<`标签之间有，这可能会失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T13:15:48.163

尝试这个：

```
<a href="[^"\s]+"[^>]*>[^<\s]+</a> 
```

# jquery - 使用 jQuery 更改背景颜色。重置为默认

> ID：14479523
> 
> 赞同：5
> 
> 时间：2013-01-23T12:16:22.080
> 
> 标签：jquery, css, jquery-ui, jquery-ui-sortable

我有一个`<ul>`，我在其中使用 jQuery UI Sortable 来允许对包含`<li>`的 s 进行排序。

`<li>`s 使用交替的背景颜色设置样式：

```
.list-striped li:nth-child(odd) {
  background-color: #f9f9f9;
} 
```

我正在使用 Sortable start 和 stop 函数在`<li>`拖动时创建一个很好的过渡，如下所示：

```
$( ".sortable" ).sortable({
        start: function(event, ui){
            $(ui.item).animate({
                'background-color': '#333333'
            }, 'fast');
        },
        stop: function(event, ui){
            $(ui.item).animate({
                'background-color': ''
            }, 'fast');
        }
    }); 
```

我现在的问题是，当我们清除背景颜色时，它不会恢复到以前的背景颜色（或从 CSS 继承它应该的背景颜色）。我想要实现的目标是可能的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:23:42.297

不要使用 jQuery 为颜色设置动画，`CSS transitions`而是使用：

```
$( ".sortable" ).sortable(); 
```

CSS：

```
.list-striped li{
  width:200px;
  border:1px solid #ccc;
  padding:10px;
  transition: background 0.2s linear;
  -o-transition: background 0.2s linear;
  -moz-transition: background 0.2s linear;
  -webkit-transition: background 0.2s linear;
   cursor:pointer;
}
.list-striped li:nth-child(odd) {
  background-color: #faa;
}
.list-striped li.ui-sortable-helper{
  background-color:#a55 !important;
} 
```

[JSFiddle](http://jsfiddle.net/Xgs7F/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T12:25:41.090

你应该首先将原始值存储在另一个变量中，让我们这么`originalcolor` 说

```
var orginalcolor;
$( ".sortable" ).sortable({
    start: function(event, ui){
        orginalcolor = $(ui.item).css('background-color'); //store the color
        $(ui.item).animate({
            'background-color': '#333333'
        }, 'fast');
    },
    stop: function(event, ui){
        $(ui.item).animate({
            'background-color': originalcolor
        }, 'fast');
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-01T18:11:26.650

非常简单，但不会动画

```
$(ui.item).removeAttr("style"); 
```

# android - 如何更改android地图中的圆圈颜色

> ID：14479524
> 
> 赞同：1
> 
> 时间：2013-01-23T12:16:23.497
> 
> 标签：android, google-maps, geometry

我开发了一个基于谷歌的安卓地图应用程序，它指向我当前的位置，我成功了。但是，我使用的标记中有一个圆圈，放大时它是深蓝色的，这有点奇怪。我们无法追踪到我们附近的地方。我为此使用了locationoverlay。这是我的代码：

```
private void setMaptoLocation(Location location) {
    mapView.setBuiltInZoomControls(true);
    mapView.setTraffic(true);
    int LAT = (int) (location.getLatitude() * 1E6);
    int LNG = (int) (location.getLongitude() * 1E6);
    GeoPoint point = new GeoPoint(LAT, LNG);
    MapController mapController = mapView.getController();
    mapController.setCenter(point);
    MyLocationOverlay myLocationOverlay = new MyLocationOverlay(this,mapView);
    myLocationOverlay.enableMyLocation();
    mapView.getOverlays().add(myLocationOverlay);
    mapController.animateTo(point);
} 
```

任何人都可以建议更改圆圈的颜色/使其透明，以便地图视图会更好一点。提前致谢！！！
[这是我得到的观点](http://i.stack.imgur.com/urzIl.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:18:32.857

在 Google Maps API v2 中，我认为不需要覆盖。现在您可以按如下方式更改圆圈颜色；

```
// Create an ellipse centered at Sydney.
    PolygonOptions options = new PolygonOptions();
    int numPoints = 400;
    float semiHorizontalAxis = 10f;
    float semiVerticalAxis = 5f;
    double phase = 2 * Math.PI / numPoints;
    for (int i = 0; i <= numPoints; i++) {
        options.add(new LatLng(SYDNEY.latitude + semiVerticalAxis * Math.sin(i * phase),
                SYDNEY.longitude + semiHorizontalAxis * Math.cos(i * phase)));
    }
//Here you can change the color of the circle market called as "plygon" on Google Maps API v

    mSYDNEYcircle = mMap.addPolygon(new options
            .strokeWidth(float width)
            .strokeColor(Color.BLACK)
            .fillColor(Color.YELLOW)); 
```

有关详细信息，请参阅[Google API v2 指南](https://developers.google.com/maps/documentation/android/lines#add_a_polygon)。

![在此处输入图像描述](../Images/a5f9d4862e7ed4a7f59a177db8046a6b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-04T09:47:01.963

您可以使用以下 CircleOption 函数将 Circle 添加到地图中，其默认填充颜色是透明的。此功能将围绕您的位置绘制圆圈：

```
 map.addCircle(new CircleOptions()
     .center(new LatLng(Your_Location))
     .radius(10000) //radius in meters
     .strokeColor(Color.BLUE); //border color default is black 
```

上面的代码使您的圈子透明。您还可以使用`.fillColor(Color.argb())`CircleOptions 中的属性填充圆圈颜色，

# mysql - 如何优化在 130,000 行上运行的连接查询？

> ID：14479525
> 
> 赞同：2
> 
> 时间：2013-01-23T12:16:29.383
> 
> 标签：mysql, performance

我正在使用以下 SQL 语句：

```
SELECT
  SUM(t.Points) AS `Points`,
  CONCAT(s.Firstname, " ", s.Surname) AS `Name`
FROM transactions t
INNER JOIN student s
  ON t.Recipient_ID = s.Frog_ID
GROUP BY t.Recipient_ID 
```

查询需要**21 秒**才能运行。奇怪的是，即使我跑`LIMIT 0, 30`起来*仍然*需要**20.7**秒！

如果我`EXPLAIN`在这个语句上运行，结果如下：

```
id  select_type table   type    possible_keys   key     key_len     ref     rows        Extra
1   SIMPLE      s       ALL     PRIMARY         NULL    NULL        NULL    877         Using temporary; Using filesort
1   SIMPLE      t       ALL     NULL            NULL    NULL        NULL    135140      Using where 
```

* * *

交易采用以下形式：

```
Transaction_ID  Datetime    Giver_ID    Recipient_ID    Points  Category_ID     Reason
1               2011-09-07  36754       34401           5       6               Gave excellent feedback on the new student noteboo... 
```

表中有**130,000 行**`transactions`。

* * *

学生采取以下形式：

```
Frog_ID UPN             Firstname   Surname     Intake_Year
101234  K929221234567   Madeup      Student     2010 
```

表中有**835 行**`student`。

* * *

**索引**

![交易指数](../Images/b61e190b8fc1c4c17f61c225f5255ea0.png)

![学生索引](../Images/6b123a37f11d9f8053150c3c643b5d6e.png)

* * *

有没有办法让这个查询更有效率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:28:01.137

你们都使用`Recepient_ID`它并按它分组，但它没有被索引，所以我认为这是问题所在。

尝试添加`transactions.Recepient_ID`为索引。

# sql - 具有两列的 SQL group by 子句

> ID：14479526
> 
> 赞同：0
> 
> 时间：2013-01-23T12:16:29.333
> 
> 标签：sql, sql-server, tsql, views

有一个 TSQL 视图，我需要按一列分组，但是，我正在使用 nhibernate(C#) 并且也需要指定 Id 列。我的查询如下所示：

```
SELECT
    row_number() over(order by id)as Id,
        column_name,..etc
from tblName
group by column_name 
```

这给了我一个错误，即 Id 必须包含在 group by 子句中。

或者，我可以写：

```
SELECT
    row_number() over(order by id)as Id,
        column_name,..etc
from tblName
group by column_name, id 
```

它返回具有相同 column_name 名称的多行。

有没有解决的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:20:54.430

我想你想这样做：

```
 Select row_number() over(order by column_name) as ID, column_name from (
      Select distinct column_name from tblName
   ) as A 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:23:22.320

你是这个意思吗？

```
SELECT
    row_number() over(partition by column_name order by id)as Id,
        column_name,..etc
from tblName 
```

# primefaces - Primefaces：对话框隐藏时文本字段未更新

> ID：14479529
> 
> 赞同：1
> 
> 时间：2013-01-23T12:16:36.423
> 
> 标签：primefaces

我试图从对话框更新文本字段。文本字段在父组件中。但它没有发生。如果我在命令按钮的更新中给出文本字段的 ID。我遇到了错误： **javax.faces.FacesException：找不到从“tabView：lkpSltRec”引用的标识符“customerCode”的组件**

由于它无法找到组件 id 。我已经使用了替代方法。我已经采取了隐藏字段。单击命令按钮后，隐藏字段得到更新，并通过简单的javascript函数即时更新父组件的文本字段。javascript函数从对话框中命令按钮的oncomplete调用。因为，根据项目要求，我必须通过 primefaces 而不是通过 javascript 来实现它。请建议我在 primefaces 中的方法。下面是代码片段：

这里 ecap:lookup 是自定义组件。

```
 Selected Customer <p:inputText id="customerCode"
        value="#{sixthTabBBean.customerName}" label="Selected Adddress"></p:inputText>
    Selected Customer City <p:inputText id="selectedCity"   value="#{sixthTabBBean.customerCity}"  ></p:inputText>
    <ecap:lookup lookupId="LOV0072" inputId="customerCode" clickStatus="city"
        defaultDDValueIndex="0" title="CustomerCode"></ecap:lookup>

        New LOV <ecap:lookup lookupId="LOV0092" inputId="customerCode" clickStatus="none"
        defaultDDValueIndex="0" title="CustomerCode"></ecap:lookup>

    City<p:inputText id="custCity" value="#{sixthTabBBean.customerCity}"
        disabled="true" label="City"></p:inputText>
    Selected Customer <p:inputText id="customerCode1"
        value="#{sixthTabBBean.customerName}" label="Selected Adddress" ></p:inputText>
    Selected Customer City <p:inputText id="selectedCity1"  value="#{sixthTabBBean.customerCity}"  ></p:inputText>
    Selected Customer State <p:inputText id="selectedSate1"     value="#{sixthTabBBean.customerState}"  ></p:inputText>
    <ecap:lookup lookupId="LOV0098" inputId="customerCode" clickStatus="state"
        defaultDDValueIndex="0" title="CustomerCode"></ecap:lookup>
    <p:dialog id="lkpDialog" widgetVar="lpDialogVar" header="Lookup"
        modal="true" width="1000" height="600"
        rendered="#{lookupSearch.popupRender}"  >
        <h:form  rendered="#{lookupSearch.popupRender}"  prependId="false">
            <h:panelGrid cellpadding="10" id="diaFrmId">
                <p:dataTable id="newfdt" var="flxSearch"
                    value="#{lookupSearch.lkpSearchCriteriaList}">

                    <p:column id="newwhc">
                        <f:facet name="header">
                            <h:outputLabel value="Search Fields"></h:outputLabel>
                        </f:facet>
                        <p:selectOneMenu styleClass="fdd180" id="newwdd"
                            value="#{flxSearch.searchCriterion.whereClause}">
                            <f:selectItems value="#{flxSearch.whrClausDropdown}" />
                        </p:selectOneMenu>
                    </p:column>

                    <p:column id="newcoc">
                        <f:facet name="header">
                            <h:outputLabel value="Conditions"></h:outputLabel>

                        </f:facet>
                        <p:selectOneMenu id="newco" styleClass="fdd95"
                            value="#{flxSearch.searchCriterion.operator}">
                            <f:selectItems id="newcriOperatorItms"
                                value="#{flxSearch.operatorDropdown}" />
                        </p:selectOneMenu>
                    </p:column>

                    <p:column id="newcic">
                        <f:facet name="header">
                            <h:outputLabel value="Value"></h:outputLabel>

                        </f:facet>
                        <p:inputText id="newcriInpNm"
                            rendered="#{!flxSearch.inputDate and !flxSearch.boolValue and !flxSearch.required}"
                            styleClass="285 ftb" deferChangeEvent="true"
                            value="#{flxSearch.searchCriterion.value}"
                            maxlength="#{flxSearch.maxLength}"
                            disabled="#{flxSearch.disableInput}" partialSubmit="true"
                            labelValue="#{flxSearch.searchCriterion.label}"
                            required="#{flxSearch.required}">
                        </p:inputText>

                        <p:inputText id="newcriInpM"
                            rendered="#{!flxSearch.inputDate and !flxSearch.boolValue and flxSearch.required }"
                            value="#{flxSearch.searchCriterion.value}"
                            maxlength="#{flxSearch.maxLength}"
                            disabled="#{flxSearch.disableInput}"
                            labelValue="#{flxSearch.searchCriterion.label}"
                            required="#{flxSearch.required}">

                        </p:inputText>

                        <p:selectOneMenu styleClass="fdd" id="newbldd"
                            value="#{flxSearch.searchCriterion.value}"
                            disabled="#{flxSearch.disableInput}"
                            rendered="#{flxSearch.boolValue }">
                            <f:selectItems value="#{flxSearch.booleanDropdown}" />
                        </p:selectOneMenu>

                        <p:calendar id="newcriDtNm" size="9"
                            rendered="#{flxSearch.inputDate and !flxSearch.boolValue and !flxSearch.required }"
                            disabled="#{flxSearch.disableInput}" showOn="button"
                            value="#{flxSearch.searchCriterion.value}"
                            labelValue="#{flxSearch.searchCriterion.label}">
                        </p:calendar>

                        <p:calendar id="newcriDtM" size="9"
                            rendered="#{flxSearch.inputDate and !flxSearch.boolValue and flxSearch.required }"
                            disabled="#{flxSearch.disableInput}"
                            value="#{flxSearch.searchCriterion.value}"
                            enableChangeDetector="false" partialSubmit="true"
                            labelValue="#{flxSearch.searchCriterion.label}"
                            required="#{flxSearch.required}" showOn="button">
                        </p:calendar>

                    </p:column>
                </p:dataTable>
                <!-- hidden text used to update values in the parent component -->
                <p:inputText  type="hidden" id="hiddencustomerCode"  
                    value="#{sixthTabBBean.customerName}"   ></p:inputText>
                <p:inputText  type="hidden" id="hiddencustCity"  
                    value="#{sixthTabBBean.customerCity}"   ></p:inputText>
                <p:inputText  type="hidden" id="hiddencustState"  
                value="#{sixthTabBBean.customerState}"   ></p:inputText>

                <p:fieldset legend="Combined By">
                    <h:panelGrid columns="2" cellpadding="10">
                        <p:selectOneRadio id="newSlctDrk"
                            valueChangeListener="#{lookupSearch.getSelectedLogOpr}"
                            value="#{lookupSearch.selLogOpr}"
                            title="Combine all search criteria with AND or OR">
                            <f:selectItems id="newSlctDrkItms"
                                value="#{lookupSearch.logicalOperators}" />
                        </p:selectOneRadio>
                    </h:panelGrid>
                </p:fieldset>
                <h:panelGrid columns="3">
                    <p:commandButton value="Find" id="lkpfndDg" update="resultFldSet"
                        actionListener="#{lookupSearch.search}">
                    </p:commandButton>
                    <p:commandButton value="Clear" id="lkpClearDg"
                        actionListener="#{lookupSearch.clear}" />
                </h:panelGrid>
                <p:fieldset legend="Result" id="resultFldSet">
                        <p:dataTable binding="#{lookupSearch.lkpResultDataTable}"
                            value="#{lookupSearch.searchResultsForPage}"></p:dataTable>
                </p:fieldset>
                <p:commandButton value="Select" id="lkpSltRec" update="customerCode"
                    oncomplete="lpDialogVar.hide();insertSelectedValue();"
                    actionListener="#{lookupSearch.selectValue}" />
            </h:panelGrid>
        </h:form>
    </p:dialog>

</h:panelGrid> 
```

这里 ecap:lookup 是自定义组件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:26:19.310

最后，我得到了解决方案。我遇到的异常是由于表单标签。从对话框触发的 ajax 事件无法在表单之外找到组件。在这种情况下，请使用：:#{p:component('componentId')}

在这里，它不仅会在表单内搜索 id，还会在表单外搜索 id。

# regex - 在 bash 中使用 SED 打印 RegEx 匹配

> ID：14479535
> 
> 赞同：18
> 
> 时间：2013-01-23T12:16:50.973
> 
> 标签：regex, linux, bash, sed

我有一个 XML 文件，该文件由一行组成。

我要做的是`finalNumber`通过 Putty 从文件中提取“”属性值。无需下载副本并使用 notepad++ 进行搜索。

我已经建立了一个我在[在线工具](http://gskinner.com/RegExr/)上测试过的正则表达式，并尝试在`sed`命令中使用它来[复制 grep 功能](http://www.grymoire.com/Unix/Sed.html#uh-15b)。该命令运行但不返回任何内容。

正则表达式：

```
(?<=finalNumber=")(.*?)(?=") 
```

`sed`命令（不返回任何内容，预期为 28，请参阅文件提取）：

```
sed -n '/(?<=finalNumber=")(.*?)(?=")/p' file.xml 
```

文件提取：

```
...argo:finalizedDate="2012-02-09T00:00:00.000Z" argo:finalNumber="28" argo:revenueMonth=""... 
```

我觉得我很接近（我可能是错的），我是在正确的路线上还是有更好的方法来实现输出？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-23T12:26:57.283

这里的好老 grep 没有错。

```
grep -E -o 'finalNumber="[0-9]+"' file.xml | grep -E -o '[0-9]+' 
```

用于`-E`扩展正则表达式，并且`-o`只打印匹配的部分。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-23T16:28:51.713

尽管您已经选择了答案，但您可以在纯 sed 中执行以下操作：

```
sed -n 's/^.*finalNumber="\([[:digit:]]\+\)".*$/\1/p' <test 
```

输出：

```
28 
```

这将用匹配号替换整行并打印（因为 p 将打印整行，因此您必须替换整行）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T15:20:49.763

这可能对您有用（GNU sed）：

```
sed -r 's/.*finalNumber="([^"]*)".*/\1/' file 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T12:23:38.503

`sed`不支持前瞻断言。Perl 确实如此：

```
perl -ne 'print $1 if /(?<=finalNumber=")(.*?)(?=")/' 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-23T12:25:00.697

据我了解，这里不需要使用前瞻。试试这个

```
sed -n '/finalNumber="[[:digit:]]\+"/p' 
```

# hibernate - org.hibernate.LazyInitializationException

> ID：14479537
> 
> 赞同：0
> 
> 时间：2013-01-23T12:16:54.820
> 
> 标签：hibernate, spring-mvc

学生.java

```
package Model;

import java.util.Set;

public class Student {
private int studentID;
private  String name;
private String city;
private Set<Address> AddressList;
private Set<Contact> ContactList;

public Set<Contact> getContactList() {
    return ContactList;
}

public void setContactList(Set<Contact> contactList) {
    ContactList = contactList;
}

public Set<Address> getAddressList() {
    return AddressList;
}

public void setAddressList(Set<Address> addressList) {
    AddressList = addressList;
}

public int getStudentID() {
    return studentID;
}

public void setStudentID(int studentID) {
    this.studentID = studentID;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public String getCity() {
    return city;
}

public void setCity(String city) {
    this.city = city;
}

} 
```

地址.java

```
package Model;

public class Address {

private int Aid;
private String fullAddress;
//private Student student;
/*public Student getStudent() {
    return student;
}
public void setStudent(Student student) {
    this.student = student;
}*/
public int getAid() {
    return Aid;
}
public void setAid(int aid) {
    Aid = aid;
}
public String getFullAddress() {
    return fullAddress;
}
public void setFullAddress(String fullAddress) {
    this.fullAddress = fullAddress;
}
} 
```

联系方式.java

```
package Model;

public class Contact {
private int contactId;
private String mobileNo;

public int getContactId() {
    return contactId;
}
public void setContactId(int contactId) {
    this.contactId = contactId;
}
public String getMobileNo() {
    return mobileNo;
}
public void setMobileNo(String mobileNo) {
    this.mobileNo = mobileNo;
}

 } 
```

学生.hbm.xml

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
<class name="Model.Student" table="Student">
    <id name="studentID" type="int">
        <column name="StudentID" />
        <generator class="identity" />
    </id>
    <property name="name" type="java.lang.String"/>
    <property name="city" type="java.lang.String"/>
    <set name="AddressList">
        <key column="studentID"/>
        <one-to-many class="Model.Address"/>        
    </set>
    <set name="ContactList">
        <key column="studentID"/>
        <one-to-many class="Model.Contact"/>        
    </set>
</class> 
```

地址.hbm.xml

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
<class name="Model.Address" table="Address">
    <id name="Aid" type="int">
        <column name="Aid" />
        <generator class="identity" />
    </id>
    <property name="fullAddress" type="java.lang.String"/>
</class> 
```

联系人.hbm.xml

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
<class name="Model.Contact" table="Contact">
    <id name="contactId" type="int">
        <column name="contactId" />
        <generator class="identity" />
    </id>
    <property name="mobileNo" type="java.lang.String"/>
</class> 
```

主要方法。

```
public static void main(String[] args)
{
    Configuration cfg=new Configuration();
    cfg.configure("hibernate.cfg.xml");
    SchemaExport se=new SchemaExport(cfg);
    se.setOutputFile("D:\\abc.sql");
    se.create(true,true);//create(boolean script, boolean export) 

    System.out.println("------------------Saving of Student--------------------");
    Student student =new Student();
    student.setName("Yograj");
    student.setCity("Nanded");
    Set<Address> addressList=new HashSet<Address>();
    Address address=new Address();
    address.setFullAddress("Chikhali Nanded");
    addressList.add(address);
    address=null;
    address=new Address();
    address.setFullAddress("karvenagar Pune");
    addressList.add(address);
    student.setAddressList(addressList);

    Set<Contact> contactList=new HashSet<Contact>();
    Contact contact=new Contact();
    contact.setMobileNo("9403330577");
    contactList.add(contact);
    contact=null;
    contact=new Contact();
    contact.setMobileNo("9890864805");
    contactList.add(contact);
    student.setContactList(contactList);

    boolean result=new StudentServices().SaveStudent(student);

    if(result)
    {
        System.out.println("------------------Save Student succ..--------------------");
    }
    else
    {
        System.out.println("------------------Saving failed--------------------");
    }

    System.out.println("------------------Student Details--------------------");
    List<Student> studentList=new StudentServices().GetStudentlist();
    for (Student stud : studentList) {
        System.out.println("Name:"+stud.getName());
        System.out.println("City:"+stud.getCity());
        for (Address add : stud.getAddressList()) {
            System.out.println("Full Address:"+add.getFullAddress());
        }
        for (Contact cont : stud.getContactList()) {
            System.out.println("Full Address:"+cont.getMobileNo());
        }
    }
    System.out.println("Execution over.");

} 
```

学生服务.Java

```
package Service;

import java.util.List;

import javassist.runtime.Inner;

import org.hibernate.Criteria;
import org.hibernate.HibernateException;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.cfg.Configuration;
import org.hibernate.criterion.Restrictions;
import org.hibernate.sql.JoinType;

import Model.Address;
import Model.Contact;
import Model.Student;

public class StudentServices {
public boolean SaveStudent(Student student) {
    try {
        Configuration cfg = new Configuration().configure();
        SessionFactory sf = cfg.buildSessionFactory();
        Session session = sf.openSession();
        Transaction transaction = session.beginTransaction();

        session.save(student);
        for (Address add : student.getAddressList()) {
            session.save(add);

        }
        for (Contact cont : student.getContactList()) {
            session.save(cont);

        }
        transaction.commit();
        session.close();
        return true;
    } catch (HibernateException e) {
        return false;
    }
}

public List<Student> GetStudentlist() {
    try {
        Configuration cfg = new Configuration().configure();
        SessionFactory sf = cfg.buildSessionFactory();
        Session session = sf.openSession();
        Transaction transaction = session.beginTransaction();
        Criteria criteria = session.createCriteria(Student.class, "Student")
                .createAlias("Student.AddressList", "Address",JoinType.INNER_JOIN)
                .createAlias("Student.ContactList", "Contact",JoinType.INNER_JOIN);
        List<Student> studentList = criteria.list();

        transaction.commit();
        session.close();
        return studentList;
    } catch (HibernateException e) {
        return null;
    }
}
} 
```

当我执行 main 方法时，hibernate 将创建数据库和表。在所有表中它将存储记录，但是当我使用标准 API 获取记录时，它给我错误“org.hibernate.LazyInitializationException”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:54:23.400

在您的情况下`student.addressList`并`student.contactList`使用延迟加载。延迟加载意味着，这些值不会与 studentList 一起加载，而是只有在您使用`getAddressList()`and访问它们时才会加载`getContactList`。

延迟加载仅在会话仍处于打开状态时才有效。如果在关闭会话后访问尚未加载的组件，则会抛出 LazyInitializationException，如您的示例所示。

你正在做的是：

1.  在 GetStudentlist 中：打开会话
2.  在 GetStudentlist 中：加载所有学生
3.  在 GetStudentlist 中：关闭会话
4.  主要：针对每个学生
5.  in main: 访问地址列表通过`student.getAddressList()`

这会在步骤 5 中引发异常，因为您访问了适用于延迟加载的地址列表，并且无法再加载数据，因为会话已在步骤 3 中关闭。

您必须在调用`getAddressList()`and后关闭会话`getContactList()`，然后它才能工作。

顺便说一句，当您只读取 GetStudentlist 中的数据时，您不需要开始事务，也不需要提交任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:28:24.260

尝试访问学生中的方法来初始化代理。

尝试在您的服务方法中调用 student.getAddress().getFullAddress() 以初始化代理。

这样，您将避免延迟初始化异常。

另一种方法是将 Eager fetching 设置为 true，但我宁愿先使用第一种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-07T14:21:52.020

对于 Junit 测试用例，您需要将打开的 Session 绑定到当前线程。

```
//the following is necessary for lazy loading
SessionFactory sf = null;

// open and bind the session for this test thread.
Session s = null;

// Session holder
SessionHolder holder = null;

BeanFactory beanFactory = null;

protected void onSetUp() throws Exception {
    System.out.println("On SetUP----");
    sf = (SessionFactory) beanFactory.getBean("sessionFactory");
    s = sf.openSession();
    TransactionSynchronizationManager.bindResource(sf, new SessionHolder(s));
}

protected void onTearDown() throws Exception {
    System.out.println("On onTearDown----");
    // unbind and close the session.
    holder = (SessionHolder) TransactionSynchronizationManager.getResource(sf);
    s = holder.getSession();
    s.flush();
    TransactionSynchronizationManager.unbindResource(sf);
    SessionFactoryUtils.closeSession(s);
    // SessionFactoryUtils.releaseSession(s, sf);
    // teardown code here
} 
```

如果你不想再关心 LazyInitialisationException 阅读[这个](https://stackoverflow.com/questions/6354265/using-jpa-entities-in-jsf-which-is-the-best-strategy-to-prevent-lazyinitializat/32046337#32046337)，它很好地解释了发生了什么，以及如何明确地解决问题

# android - Listview 显示重新扫描的蓝牙设备的重复条目

> ID：14479538
> 
> 赞同：1
> 
> 时间：2013-01-23T12:16:57.300
> 
> 标签：android, listview, bluetooth

我有一个应用程序，它在按钮（切换按钮）上按下扫描并在自定义列表视图中显示发现的蓝牙设备，然后再次按下相同的按钮，扫描停止。

现在，当我再次按下按钮（第二次）开始扫描时，问题出现了，同一设备显示了两次。在我停止并开始扫描（第三次）后，同一设备显示三次。并且发现的设备从未与我的安卓手机配对。

有一个类似的[问题](https://stackoverflow.com/questions/6159818/bluetooth-searching-and-adding-in-the-listview-problem)，但答案对我没有帮助。请让我知道我哪里出错了。

下面是代码

```
 btOnOff.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(btOnOff.isChecked()){

                btAdapter.startDiscovery();
                setProgressBarIndeterminateVisibility(true);

                    bcReceiver = new BroadcastReceiver() {
                        @Override
                        public void onReceive(Context context, Intent intent) {
                            // TODO Auto-generated method stub
                            String action = intent.getAction();
                            if(BluetoothDevice.ACTION_FOUND.equals(action)){
                                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);

                                deviceName = device.getName();
                                currentDateTime = DateFormat.getDateTimeInstance().format(new Date());

                                Custom data = new Custom(deviceName, currentDateTime);
                                fetch.add(data);

                                lv.setAdapter(cAdapter);

                            }else if(btAdapter.ACTION_DISCOVERY_FINISHED.equals(action)){
                                btAdapter.startDiscovery();
                            }
                        }
                    };

                    IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
                    registerReceiver(bcReceiver, filter);
            } else {
                btAdapter.cancelDiscovery();
            }
        }

    }); 
```

我还有两个自定义列表视图的类，是否有什么可以避免重复条目。下面是第一类文件的代码

```
 public class CustomAdapter extends ArrayAdapter<Custom>{

private ArrayList<Custom> entries;
private Activity activity;

public CustomAdapter(Activity a, int textViewResourceId, ArrayList<Custom> entries) {
    super(a, textViewResourceId, entries);
    // TODO Auto-generated constructor stub
    this.entries = entries;
    this.activity = a;
}

public static class ViewHolder{
    public TextView tv1;
    public TextView tv2;
}

@Override
public View getView(int position, View convertView, ViewGroup parent){
    View v = convertView;
    ViewHolder holder;
    if(v == null){
        LayoutInflater vi = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.show_devices, null);
        holder = new ViewHolder();
        holder.tv1 = (TextView) v.findViewById(R.id.tv1);
        holder.tv2 = (TextView) v.findViewById(R.id.tv2);

        v.setTag(holder);
    }else{
        holder = (ViewHolder)v.getTag();
    }

    final Custom custom = entries.get(position);
    if(custom != null){
        holder.tv1.setText(custom.getFirst());
        holder.tv2.setText(custom.getSecond());
    }
    return v;
} 
```

}

第二类文件

```
 public class Custom {
private String text1;
private String text2;

public Custom(String string1, String string2){
    this.text1 = string1;
    this.text2 = string2;
}

public String getFirst(){
    return text1;
}

public void setFirst(String text1){
    this.text1 = text1;
}

public String getSecond(){
    return text2;
}

public void setSecond(String text2){
    this.text2 = text2;
}
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:22:29.213

当您开始重新扫描时，清除列表“获取”中的项目。基本上，您所做的是，每次扫描时，您都会将蓝牙搜索到的设备添加到以前的列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T18:33:22.550

使用上面使用的逻辑自定义列表视图会创建冗余并创建重复条目。因此，我们可以使用带有 simple_list_item_1 的 ArrayAdapter，而不是编写带有两个附加类的自定义列表视图。

在 Button onclick 事件中，ArrayAdapter 对象将清除重复的条目，simple_list_item_1 将提供类似于自定义列表视图的两行列表视图。

简单的实现[在这里显示](http://android-er.blogspot.in/2011/05/scan-bluetooth-devices.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-10T23:40:28.033

如果您无法使用默认的列表视图适配器，例如您想在对话框片段或类似的东西中显示设备，这里是我不太优雅的解决方案，以避免在重新扫描时出现相同设备的重复：

```
private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        // When discovery finds a device

        if (BluetoothDevice.ACTION_FOUND.equals(action)) {
            // Get the BluetoothDevice object from the Intent
            device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
            if(count ==0){
              prev_device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
              mArrayAdapter.add(device.getName() + "\n" + device.getAddress());
              mArrayAdapter.notifyDataSetChanged();
            }
            Log.d("BLUETOOTH","count = "+count);
            if(!device.getAddress().contains(prev_device.getAddress())){
                Log.d("BLUETOOTH","NOT A MATCH - ADD TO LIST");
            // Add the name and address to an array adapter to show in a ListView
                mArrayAdapter.add(device.getName() + "\n" + device.getAddress());
                mArrayAdapter.notifyDataSetChanged();
            }

            prev_device = device;

            if(count ==0){
                showDevices(); //Simply displays a dialogFragment with listview of devices
            }
            count++;
        }
    }
}; 
```

基本上，您检查设备是否先前被扫描过。但是，这仅在只有一个设备（对于我的应用程序）时才有效，但是如果您需要适应许多设备，则需要存储所有以前的地址并像查找一样解析它们并只显示新的地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-24T03:46:14.947

我有同样的问题。只需将接收器放在 onclick 之外，在 oncreate 下。由于它在 onclick 下，接收器被初始化两次，因此是重复的设备。

把onclick里面的receiver去掉，放到oncreate下

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-11T05:55:38.340

您需要清除在适配器中使用的列表。像这样->

```
private fun setAdapterToListView() {

        devicesNameAddressList.clear()
        for (i in 0 until devicesName.size) {
            val list = HashMap<String, String>()
            list.put("line1", devicesName[i])
            list.put("line2", devicesAddress[i])
            devicesNameAddressList.add(list)
        }

        val simpleAdapter = SimpleAdapter(this, devicesNameAddressList, R.layout.devices_listview_texttype,
                arrayOf("line1", "line2"), intArrayOf(R.id.line_a, R.id.line_b))
        BluetoothDevicesListID.adapter = simpleAdapter
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-11T05:58:11.437

对于有mac地址的蓝牙设备，您可以匹配mac地址并从列表中删除重复的设备。

# c# - 创建动态 html 元素并添加到表 asp.net

> ID：14479540
> 
> 赞同：0
> 
> 时间：2013-01-23T12:16:59.970
> 
> 标签：c#, asp.net, .net, spark-view-engine

我曾经在jsp中使用过类似的东西。

```
<%@page language="java" import="java.util.*"%> 
<%@ taglib uri="http://java.sun.com/jsp/jstl/sql" prefix="sql" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib prefix="tags" tagdir="/WEB-INF/tags" %>
<%@ page errorPage="/showError.jsp" %>
<%
String path = request.getContextPath();
%>
<sql:query var="rs" dataSource="jdbc/production">
    select id,location,zone,ifnull(DATE_FORMAT(date_recp,'%m/%d/%Y'),'00-00-0000') as date_recp,qry_id ,cust_name,qry_recvd,qry_mode,ifnull(DATE_FORMAT(start_date,'%m/%d/%Y'),'00-00-0000') as start_date,
        timing,qry_type,qry_cat,qry_det,ifnull(DATE_FORMAT(date_esclation,'%m/%d/%Y'),'00-00-0000') as date_esclation,ifnull(DATE_FORMAT(date_recp_ho,'%m/%d/%Y'),'00-00-0000') as date_recp_ho,
        ifnull(DATE_FORMAT(date_recp_ho,'%m/%d/%Y'),'00-00-0000') as final_date,remarks,qry_stat from cust_supp where final_date is null or final_date='0000-00-00'
</sql:query>
<html>     
<head>
    <title>Customer Support Search Operation</title>

 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="css/style.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="<%= path %>/js/style.css" />
<style type="text/css" title="currentStyle">
            @import "<%= path%>/css/demo_table.css";
            @import "<%= path%>/css/demo_table_jui.css";
            @import "<%= path%>/css/jquery-ui-1.8.20.custom.css";
            @import "<%= path%>/css/TableTools.css";
            @import "<%= path%>/css/TableTools_JUI.css";
</style>
<script type="text/javascript" src="<%= path%>/js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="<%= path %>/js/tcal.js"></script> 
<link rel="stylesheet" type="text/css" href="<%= path %>/css/tcal.css" />

<script src="<%= path%>/js/jquery.dataTables.js" type="text/javascript"></script>
<script src="<%= path%>/js/ZeroClipboard.js" type="text/javascript"></script>
<script src="<%= path%>/js/TableTools.js" type="text/javascript"></script>
<link href="<%=path%>/css/style.css" rel="stylesheet" type="text/css" />
<link href="<%=path%>/css/styles.css" rel="stylesheet" type="text/css" />
<script src="<%=path%>/js/tinybox.js" type="text/javascript"></script>
<script src="<%= path%>/js/send_data.js"></script>

</head>
<div class="brand" style="background:url('<%=path%>/images/head.jpg') no-repeat ;"></div>
<body>
    <div class="forms">
<form style="height:450pt;width:95%;margin-left:5pt;margin-top:0" name ="form" action="<%=path%>/Download">    
<input type="hidden" name="query" value="q0" />
<input type="hidden" name="dwld" value="cust_supp" />

<table width="95%" id="dataTable" class="display">
    <thead>
<tr>
    <th width="20pt"><b>S.no</b></th>
 <th><b>Query ID</b></th>
<th><b>Zone</b></th>
<th><b>Location</b></th>
<th><b>Customer Name</b></th>
<th><b>Query Received</b></th>
<th><b>Date of Receipt</b></th>
<th><b>Mode of Query</b></th>
<th><b>Start Fall-Up Date</b></th>
<th><b>Timing</b></th>
<th><b>Query Type</b></th>
<th><b>Query Category</b></th>
<th><b>Query Details</b></th>
<th><b>Date of Escalation</b></th>
<th><b>Date of Receipt HO/Client/Bank</b></th>
<th><b>Final Date</b></th>
<th><b>Remarks</b></th>
<th><b>Query Status</b></th>
<th><b>Update</b></th>
</tr>
    </thead><tbody>
        <c:forEach var="row" items="${rs.rows}">
<tr>
<td>${row.id}</td>
<td><span>${row.qry_id}</span></td>
<td><span>${row.zone}</span></td>
<td><span>${row.location}</span></td>
<td><span class="editable">${row.cust_name}</span></td>
<td><select name="query_rcvd" >
        <option value="${row.qry_recvd}" selected>${row.qry_recvd}</option>
          <option value="Client">Client</option>
          <option value="HO">HO</option>
          <option value="Other">Other</option>
</select></td>
        <td align="right"><input type="text" name="date" class="tcal" value="${row.date_recp}" /></td>
<td><select name="mode" >
        <option value="${row.qry_mode}" selected>${row.qry_mode}</option>
        <option value="phone">Phone</option>
        <option value="E-mail">E-mail</option>
</select></td>
<td><input type="text" name="date" class="tcal" value="${row.start_date}"/></td>
<td><span class="editable">${row.timing}</span></td>
<td><select name="nature">
        <option value="${row.qry_type}" selected>${row.qry_type}</option>
         <option value="ECS Debit">ECS Debit</option>
          <option value="ECS Credit">ECS Credit</option>
          <option value="ASP">ASP</option>
           <option value="MF">MF</option>
          <option value="Retail">Retail</option>
</select></td>
<td><select name="category">
        <option value="${row.qry_cat}" selected>${row.qry_cat}</option>
        <option value="Status of the Transaction" >Status of the Transaction</option>
        <option value="Mandate Related Queries">Mandate Related Queries</option>
        <option value="Mandate Re-submission Cases">Mandate Re-submission Cases</option>
        <option value="Wrong Reason Code Given By The Bankers">Wrong Reason Code Given By The Bankers</option>
        <option value="Txn bounced at our end but cust bank a/c debited">Txn bounced at our end but cust bank a/c debited</option>
        <option value="Extra debit in the bank account">Extra debit in the bank account</option>
        <option value="Credit Query">Credit Query</option>
        <option value="R7">R7 Report</option>
</select></td>
<td><span class="editable">${row.qry_det}</span></td>
<td><input type="text" name="date" class="tcal" value="${row.date_esclation}"/></td>
<td><input type="text" name="date" class="tcal" value="${row.date_recp_ho}"/></td>
<td><input type="text" name="date" class="tcal" value="${row.final_date}"/></td>
<td><span class="editable">${row.remarks}</span></td>
<td><span class="editable">${row.qry_stat}</span></td>
<td><input type="button" class="tab_buttons" value="Update"/></td>
</tr>
</c:forEach>
    </tbody>
</table>
</form>
</div>
</body>
</html> 
```

这将创建一个页面，`MySql DB`其中包含`html`表中的 select 和 input 元素，现在我想在`aspx page`. 我试图`dynamically`从后面的代码中添加，但这完全是混合的`c# with html`，我不希望那样，因为我是新手，有人建议我使用 spark，他们说它就像`jstl`我上面使用的那样工作，我试过但 spark 没有进入我的脑海，一个简单的简单的例子请。或任何其他更好的方法来实现这一目标。`MVC`不参与这个，所以我可以使用剃须刀。

谢谢

# c# - 无法在 Visual Studio 2010 中显示本地窗口

> ID：14479541
> 
> 赞同：0
> 
> 时间：2013-01-23T12:17:07.763
> 
> 标签：c#, visual-studio-2010, visual-studio, c#-4.0

目前，我正在使用 Microsoft Visual Studio 2010，但我遇到了一个问题：

我无法在本地窗口中查看我的代码、数组等的进程。当我运行该程序时，我无法在其中看到任何内容，只有在程序崩溃时才会显示一些内容。

请我需要解决这个问题。我真的很想查看我的代码背后的过程和逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:25:37.597

仅当您的程序被调试器停止时，本地窗口才会更新。放置几个断点，您将能够正确地看到您的本地人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:47:57.123

如上所述，本地窗口仅在程序被调试器停止时更新。您可以通过使用断点来做到这一点，这将确保程序在您需要的地方停止，或者按“全部中断”按钮 (Ctrl+Alt+Break)。

要插入断点，您需要单击所需代码行的一侧（如此处所示[）](http://i.stack.imgur.com/j8pHF.png)。该示例中的代码是 C++，但放置断点是相同的。

# ruby-on-rails - 在子模型属性上思考狮身人面像搜索

> ID：14479542
> 
> 赞同：1
> 
> 时间：2013-01-23T12:17:16.943
> 
> 标签：ruby-on-rails, sphinx, thinking-sphinx

我正在尝试在我的 rails 应用程序中考虑 sphinx，似乎我在索引数据时遇到了问题。

我有一个具有许多属性的父模型：

```
class Parent
  has_many :childs
end

class Property
  belongs_to :parent
end 
```

属性在数据库中有键和值，我想找到所有具有给定键值对的至少一个子对象的父对象。在这种情况下，如何为 Parent 模型建立索引？

如果您能提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:01:16.173

在 define_index 块中，您可以调用子项的属性。

```
define_index do
 ...
 indexes children(:attr) as children_attrs
end 
```

有了它，您应该能够索引您需要的内容。

尽管在您的示例中，Parent 和 Property 之间似乎没有联系，因此必须有一个才能使其起作用。还有键值对，是那些被存储为哈希，还是你指的是属性？

# .net - 当 ReadOnly=false 时，性能计数器显示不同的值

> ID：14479544
> 
> 赞同：5
> 
> 时间：2013-01-23T12:17:23.030
> 
> 标签：.net, windows, powershell, performancecounter

当我遇到这个奇怪的问题时，我试图弄清楚为什么某些性能计数器没有在我们的生产服务器中更新 - 计数器`RawValue`在不是只读时似乎返回不同的值。只读时始终为零，非只读时显示不同的值。

这是我的 PowerShell 会话，显示了这一点：

```
PS C:\Users\doron> $counter = new-object Diagnostics.PerformanceCounter
PS C:\Users\doron> $counter.CategoryName = "My category"
PS C:\Users\doron> $counter.CounterName = "My counter name"
PS C:\Users\doron> $counter.ReadOnly = 1
PS C:\Users\doron> $counter

CategoryName     : My category
CounterHelp      : My counter name
CounterName      : My counter name
CounterType      : NumberOfItems64
InstanceLifetime : Global
InstanceName     :
ReadOnly         : True
MachineName      : .
RawValue         : 0
Site             :
Container        :

PS C:\Users\doron> $counter.ReadOnly = 0
PS C:\Users\doron> $counter

CategoryName     : My category
CounterHelp      : My counter name
CounterName      : My counter name
CounterType      : NumberOfItems64
InstanceLifetime : Global
InstanceName     :
ReadOnly         : False
MachineName      : .
RawValue         : 20
Site             :
Container        :

PS C:\Users\doron> $counter.ReadOnly = 1
PS C:\Users\doron> $counter

CategoryName     : My category
CounterHelp      : My counter name
CounterName      : My counter name
CounterType      : NumberOfItems64
InstanceLifetime : Global
InstanceName     :
ReadOnly         : True
MachineName      : .
RawValue         : 0
Site             :
Container        : 
```

服务器是 Windows 2008 R2，运行 .NET 4.5。

一个重要的注意事项是，我所有的其他性能计数器都不是这样，只有一些最近添加的性能计数器（这些是不起作用的）。对于所有其他计数器，无论是否为 ReadOnly，RawValue id 始终相同。

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T00:37:44.867

由于您没有提供有关如何创建性能计数器以及谁在何时更新计数器的大量信息，因此我只能做出明智的猜测并告诉您两者之间的区别。

**`RawValue`时间`ReadOnly=True`与时间的差异`Readonly=False`**

根据 MSDN：

> 如果您正在读取的计数器是只读的，则获取 RawValue 属性会在调用该属性时对计数器进行采样。此操作相当于对 NextSample 方法进行初始调用。

**来源：http:** [//msdn.microsoft.com/de-de/library/system.diagnostics.performancecounter.rawvalue.aspx](http://msdn.microsoft.com/de-de/library/system.diagnostics.performancecounter.rawvalue.aspx)

事实上，您可以通过查看 RawValue 属性的实际框架源来确认这一点：

```
public long RawValue
{
  get
  {
    if (this.ReadOnly)
      return this.NextSample().RawValue;
    this.Initialize();
    return this.sharedCounter.Value;
  }
  ...
} 
```

MSDN 没有说明`ReadOnly`设置为时会发生什么`False`，但是查看上面的代码片段您会看到它会调用`Initialize`然后返回一个内部`sharedCounter`对象的值，该对象由`Initialize`. `Initialize`虽然在不同的地方被调用，但只有第一次调用会真正初始化对象。

因为代码比较复杂，所以没看懂完整的过程，但是好像性能计数器不是只读的时候会缓存这个值，所以你会看到一个旧值。

**可能的解释**

我必须在这里猜测，因为你没有说你实际上是如何进行测试的，但是如果你在更新任何值之前初始化性能计数器，那么我会假设你每次看到 RawValue 为 0，即使计数器被更新同时。

现在，只要将 ReadOnly 设置为 True 并再次查询 RawValue，您就会看到 PerformanceCounter 此时的实际值。

一个有趣的实验是调用`NextSample()`而不是使用`RawValue`. 在我看来，你应该在这两种情况下得到相同的结果。

希望这可以帮助！

# javascript - “排序”的 JavaScript 比较函数的上下文

> ID：14479545
> 
> 赞同：2
> 
> 时间：2013-01-23T12:17:29.970
> 
> 标签：javascript

在我的“类”方法中，我使用 JavaScript“排序”函数和比较函数：

```
this.models.sort(this.comparator); 
```

当排序函数调用我的比较器时，是否可以为比较器定义上下文/“this”？

我知道可以这样做：

```
var self = this;
this.models.sort(function(a, b){return self.comparator.call(self, a, b);}); 
```

但是有人知道更简单的方法吗？

非常感谢提前

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T12:19:54.603

您可以使用[绑定](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)：

```
 this.models.sort(this.comparator.bind(this)); 
```

`bind`构建一个新的绑定函数，它将与您传递的上下文一起执行。

由于这与IE8不兼容，因此通常采用关闭解决方案。但是你可以让它更简单：

```
var self = this;
this.models.sort(function(a, b){return self.comparator(a, b);}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T12:20:14.843

您可以使用以下方法执行此操作[`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)：

```
this.models.sort(this.comparator.bind(context)); 
```

# c# - 如何在没有回发或更新面板的情况下获取 DropdownList 的 SelectedValue

> ID：14479548
> 
> 赞同：1
> 
> 时间：2013-01-23T12:17:49.590
> 
> 标签：c#, asp.net

我有一个`DropDownList`我在页面加载时绑定的。我没有任何按钮或任何东西。一旦用户选择下拉列表中的值，我需要在标签中显示该值。我不确定为什么这不起作用。请帮忙。

```
public string SelectedStore { get; set; }
protected void Page_Load(object sender, EventArgs e)
{
  if (!Page.IsPostBack)
      {
          BindStoresList();
      }
}
 protected void BindStoresList()
 {  storeDDList.AppendDataBoundItems = true;
    storeDDList.Items.Add(new ListItem("Select store", "-1"));
    TempCollection stores = TempDataSource.LoadForCriteria("ALL", "Code ASC");
    storeDDList.DataSource = stores;
    storeDDList.DataTextField = "DisplayName";
    storeDDList.DataValueField = "Code";
   storeDDList.DataBind();
 }
  protected void storeDDList_SelectedIndexChanged(object sender, EventArgs e)
   {
     SelectedStore = storeDDList.SelectedValue.ToString();
     selectedItem.Text = SelectedStore;
   } 
```

我不需要任何类型的 jquery 东西，因为我要添加根据下拉列表的值绑定的 gridview..

```
****** EDITS ******* 
```

如果我`AutoPostBack=True` 在页面刷新时设置，我的 DropDownList 根本不绑定，正如您在 Page_Load 方法中看到的那样，它不会调用`BindStoresList()`方法。

```
***** ANSWER ***** 
```

对于可能会陷入困境的人..

我正在为 设置`EnableViewState`，`True`所以`DropDownList`在页面刷新后`SelectedValue`迷路了。删除`EnableviewState`并设置`AutoPostBack`为`Ture`正常工作后...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T12:28:08.667

您可以使用`JavaScript`. 设置`OnChange`DropDownList 的属性以调用 JS 函数并在那里更改标签文本：

```
protected void Page_Load(object sender, EventArgs e)
{
  if (!Page.IsPostBack)
      {
          BindStoresList();
          storeDDList.Attributes["onChange"] = "ChangeLabelText();";
      }
} 
```

`JS`功能 ：

```
<script type="text/javascript">
    function ChangeLabelText() {

     var lbl = document.getElementById("<%=lbl.ClientID%>");
     var ddl = document.getElementById("<%=ddl.ClientID%>");

     lbl.innerHTML = ddl.options[ddl.selectedIndex].text;

    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:18:51.947

您必须`AutoPostBack=True`为下拉菜单设置，它会自动将呼叫发送到服务器端，而无需额外的按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T12:31:05.147

您可以使用 Javascript，处理 DropDownList 的 OnChange 事件并设置所需标签的文本

```
<asp:DropDownList ID="ddl" runat="server" onchange="ddl_change(this.value)"/>

<script language="javascript" type="text/javascript">
function ddl_change(value)
{
var lbl = document.getElementById('<%= yourlabel.ClientID %>');
lbl.value = value;
}
</script> 
```

祝你好运。

# ios - 检查特定应用程序是否安装的代码

> ID：14479554
> 
> 赞同：1
> 
> 时间：2013-01-23T12:18:19.893
> 
> 标签：ios, objective-c

我正在为 iOS 6 开发一个带有 Facebook Share 选项的应用程序。我需要检查这个应用程序是否能够检查设备中是否安装了 Facebook 应用程序。

我已经尝试过使用帐户商店。但它不起作用。有没有其他方法可以解决这个问题。我需要代码方面的帮助。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:31:04.933

您可以使用`-[UIApplication canOpenURL:]`. facebook 自定义 URL 方案是“fb:”。

```
NSURL *url = [NSURL URLWithString:@"fb://profile"];
if ([[UIApplication sharedApplication] canOpenURL:url]) {
    // Facebook is installed
} 
```

# vbscript - 带有列表的 VBscript

> ID：14479571
> 
> 赞同：1
> 
> 时间：2013-01-23T12:19:22.577
> 
> 标签：vbscript

我正在尝试编写一个 VBScript，它将读取一个文本文件并构建一个包含列表的字典。让我用一个例子来解释：

输入文件将是一个简单的文本文件，如下所示：

```
Male,Peter
Male,Chris
Male,Stewie
Male,Brian
Female,Lois
Female,Meg 
```

当我运行我的脚本时，我想要一个字典，第一列作为键，第二列作为值

```
{'Male':['Peter,Chris,Stewie,Brian']}
{'Female':['Lois,Meg']} 
```

VBScript 中缺少动态数组或列表使这变得非常痛苦。有什么建议我可以解决这个问题吗？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T19:21:50.013

VBScript 可以使用[`System.Collections.ArrayList`](http://msdn.microsoft.com/en-us/library/system.collections.arraylist.aspx).NET 框架提供的类。

```
Set d = CreateObject("Scripting.Dictionary")
d.Add "Male", CreateObject("System.Collections.ArrayList")
d.Add "Female", CreateObject("System.Collections.ArrayList")

d("Male").Add "Peter"
d("Male").Add "Chris"
'...

d("Female").Add "Lois"
d("Female").Add "Meg"
'... 
```

要处理输入文件，请查看@Rich 提供的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:39:08.893

只是说，我不与已发布的回购点答案竞争；）如果您可以将我的帖子转换为评论，请随时这样做。

我喜欢 Ansgar 的想法 (+1)，因为它基于单个 Dictionary，在我看来，这足以轻松找回里面存储的内容。

*.Exists*的需要可能会在两种情况下使用 - (a) 如果我们不知道我们有多少种性别，以及 (b) 如果我们不知道它们的样子（发音）。其余的和Ansgar的想法类似。

```
Option Explicit

Const cGender = 0
Const cName = 1

Dim sGender, sName, sLine
Dim oFSO, oFile, oDict
Dim arrLine

Set oFSO = CreateObject("Scripting.FileSystemObject")
Set oDict = CreateObject("Scripting.Dictionary")
Set oFile = oFSO.OpenTextFile("persons_list.txt")

Do Until oFile.AtEndOfStream
    sLine = oFile.ReadLine
    If Len(sLine) Then
        arrLine = Split(sLine, ",")
        sGender = arrLine(cGender)
        sName = arrLine(cName)

        If Not oDict.Exists(sGender) Then
            oDict.Add sGender, CreateObject("System.Collections.ArrayList")
        End If

        oDict(sGender).Add sName
    End If
Loop

oFile.Close
Set oFile = Nothing
Set oFSO = Nothing

WScript.Echo "Genders:" & oDict.Count, vbNewLine & Join(oDict.Keys)

Dim sKey
For Each sKey In oDict
    WScript.Echo sKey, oDict(sKey).Count, vbNewLine & Join(oDict(sKey).ToArray())
Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:40:38.387

我对字典对象不太熟悉，但这可能就足够了吗？

```
Set oFso = CreateObject("Scripting.FileSystemObject")
Set oDictionary = CreateObject("Scripting.Dictionary")

Const cGender = 0
Const cName = 1

Set oFile = oFso.OpenTextFile ("yourfile.txt", 1) 
Do Until oFile.AtEndOfStream
  sLine = oFile.Readline
  If sLine <> "" Then
    arrLine = split(sLine,",")
    oDictionary.Add arrLine(cGender,0), arrLine(cName,0) 'hope i got these indexes the right way round
    'or
    oDictionary.Add arrLine(cGender), arrLine(cName) 'if its one dimentional
  End If
Loop 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T19:57:21.253

由于@Rich 方法是错误的 (-1) - 你不能 .Add 一个键两次，如果可以的话，名称将被覆盖，而不是附加 - 而 Ansgar 的好主意 (+1) 在没有提示的情况下并不是真正的生产就绪wrt它的实际用途：

```
 Const cGender = 0
  Const cName = 1

  Dim oFS    : Set oFS    = CreateObject("Scripting.FileSystemObject")
  Dim dicDic : Set dicDic = CreateObject("Scripting.Dictionary")
  Dim dicAl  : Set dicAl  = CreateObject("Scripting.Dictionary")
  Dim dicCnt : Set dicCnt = CreateObject("Scripting.Dictionary")

  Dim oFile, sLine, arrLine
  Set oFile = oFS.OpenTextFile ("so14479571.txt")
  Do Until oFile.AtEndOfStream
     sLine = oFile.Readline()
     If sLine <> "" Then
        arrLine = Split(sLine,",")
        dicCnt(arrLine(cGender)) = dicCnt(arrLine(cGender)) + 1

        If Not dicDic.Exists(arrLine(cGender)) Then
           Set dicDic(arrLine(cGender)) = CreateObject("Scripting.Dictionary")
        End If
        dicDic(arrLine(cGender))(arrLine(cName)) = Empty

        If Not dicAl.Exists(arrLine(cGender)) Then
           Set dicAl(arrLine(cGender)) = CreateObject("System.Collections.ArrayList")
        End If
        dicAl(arrLine(cGender)).Add arrLine(cName)
     End If
  Loop
  Dim sKey, sKey2
  WScript.Echo "genders:"
  For Each sKey In dicCnt
      WScript.Echo "", sKey, dicCnt(sKey)
  Next
  WScript.Echo "dic:"
  For Each sKey In dicDic
      WScript.Echo "", sKey
      For Each sKey2 In dicDic(sKey)
          WScript.Echo " ", sKey2
      Next
  Next
  WScript.Echo "AL:"
  For Each sKey In dicAl
      WScript.Echo "", sKey & ":", Join(dicAl(sKey).ToArray())
  Next 
```

输出：

```
genders:
 Male 4
 Female 2
dic:
 Male
  Peter
  Chris
  Stewie
  Brian
 Female
  Lois
  Meg
AL:
 Male: Peter Chris Stewie Brian
 Female: Lois Meg 
```

脚本应显示：

1.  如何在没有 .Exists 的情况下使用可以自动激活的“简单”值的赋值（这里是一个数字）
2.  您需要 .Exists 检查 Arrays、ArrayLists 或 Dictionaries 等值

# c# - C# 中部分属性的替换是什么？

> ID：14479573
> 
> 赞同：0
> 
> 时间：2013-01-23T12:19:24.823
> 
> 标签：c#, asp.net, asp.net-mvc-3, properties, partial

我有一个应用程序（mvc 3），其中代码是为 datacontext 类自动生成的。而且我需要扩展功能，所以我创建了同名的部分类。但我发现只有“无效方法”可以标记为部分，而我需要一种部分属性。

那么，有没有办法在 C# 中扩展属性的功能呢？

**更新：**

这是代码：

```
 public Table<Post> Posts
    {
        get
        {
            // writing info into Trace file
            Log = Console.Out;
            var result = this.GetTable<Post>();
            Log = new LogLinqToSql();
            SubmitChanges();
            return result;
        }
    } 
```

问题是，如果我对数据模型进行任何更改，这段代码就会消失，那么我怎样才能将它移动到“更安全”的地方呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:30:31.323

我的问题的解决方案（提供日志记录）很简单：在自动生成的代码中有一堆部分辅助方法。还有一个方法“OnCreated”，在创建 MyTypeDataContext 类的实例时调用。所以，我只需要执行以下操作：

```
public partial class WebStoreDataContext
{
    partial void OnCreated()
    {
        // writing info into Trace file
        Log = Console.Out;
        Log = new LogLinqToSql();
        SubmitChanges();
    }
} 
```

如果您想为属性添加属性，[这篇文章](https://stackoverflow.com/questions/6813320/setting-attributes-of-a-property-in-partial-classes)提供了所有信息）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:55:43.977

抱歉使用答案字段，该帖子用于上述讨论：

你不能只将 DataContext 中的属性包装在你类中的另一个属性中吗

例如

```
partial class NewClass
{
    public Table<Post> NewProperty
    {
        get
        {
            DoHouseKeeping();
            return this.PropertyFromOtherPartialClass;
        }
    }
} 
```

只有类需要标记为部分。

# objective-c - NSTableCellView 子类的指定初始化器是什么？

> ID：14479576
> 
> 赞同：3
> 
> 时间：2013-01-23T12:19:31.300
> 
> 标签：objective-c, cocoa

我创建了一个子类`NSTableCellView`来做一些自定义绘图。表格的内容是通过绑定到 NSArrayController 获得的，因此，当新数据添加到 NSArrayController 时，我的 NSTableCellView 子类的新实例是“自动”创建的。我需要一些代码在创建新实例时运行一次，所以我认为它应该进入`init`. 我实现了 init 和 initWithFrame （见下文），但是在创建子类的新实例时似乎都没有调用它们（即我在控制台中看不到我的 NSLog 消息）。我应该使用不同的初始化方法吗？

```
- (id)init {
    self = [super init];
    if (self) {
        // Initialization code here.
        NSLog(@"init");
    }
    return self;
}

- (id)initWithFrame:(NSRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code here.
        NSLog(@"init with frame");
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T17:56:28.597

为了回答您的问题，指定的初始化程序是 initWithFrame:。但是，如果视图在 NIB 中编码（如本例所示），则会调用 initWithCoder:。您必须覆盖该方法。

不要使用 awakeFromNib；一般来说，它可能会比你预期的更频繁地被调用，而且我已经看到它会给人们带来麻烦。

但是，在表格视图委托方法 viewForTableColumn:row: 中进行单元格初始化的一个好地方： - 您仍然可以使用它并使用绑定。

corbin（我写了有问题的课程）。

# java - 滚动时 ListView 内容丢失

> ID：14479579
> 
> 赞同：0
> 
> 时间：2013-01-23T12:19:39.053
> 
> 标签：java, android

我浏览了各种链接，但无法解决列表视图中内容丢失的问题，

消息适配器.java

```
class MessageAdapter extends BaseAdapter {

     ViewHolder viewHolder;
     LayoutInflater inflater=(LayoutInflater)getSystemService(LAYOUT_INFLATER_SERVICE);

     public int getCount() {
            // TODO Auto-generated method stub
            return Constant_Variables.Sms_Status_list.size();
        }

     public Object getItem(int position) {
            // TODO Auto-generated method stub
            return position;
        }

     @Override
     public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }

     @Override
     public View getView(final int position, View convertView, ViewGroup parent) {

         if (convertView == null) {
             convertView = inflater.inflate(R.layout.messagelist_row, null);

             viewHolder=new ViewHolder();

             viewHolder.sms_from_row=(TextView)convertView.findViewById(R.id.sms_from_txtview);
             viewHolder.sms_to_row=(TextView)convertView.findViewById(R.id.sms_sendto_txtview);
             convertView.setTag(viewHolder);

         }
         else
         {
             viewHolder = (ViewHolder) convertView.getTag();
         }

         if(Constant_Variables.Sms_Status_list.get(position).equalsIgnoreCase(Twilioresponse_Utils.sms_sent))
         {
             viewHolder.sms_from_row.setVisibility(View.GONE);
             viewHolder.sms_to_row.setText("Sent: "+Constant_Variables.Sms_from_list.get(position));

         }
         else if(Constant_Variables.Sms_Status_list.get(position).equalsIgnoreCase(Twilioresponse_Utils.sms_received))
         {
             viewHolder.sms_to_row.setVisibility(View.GONE);
             viewHolder.sms_from_row.setText("Received: "+Constant_Variables.Sms_to_list.get(position));
         }
         else
         {
             viewHolder.sms_from_row.setText("Message in queued.");
         }

         convertView.setTag(viewHolder);

         return convertView;
     }
 }

    class ViewHolder {
         TextView sms_from_row,sms_to_row;

     } 
```

当我没有将可见性设置为消失时，列表数据不会丢失，但是当我将可见性设置为消失时，列表数据会丢失。

这是我用来显示文本的 XML 文件：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/sms_from_txtview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="12dp"
        android:text="From" />

    <TextView
        android:id="@+id/sms_sendto_txtview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="12dp"
        android:text="To" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:23:05.867

您还需要在其他部分设置**View.VISIBLE**

```
else
{
    viewHolder.sms_from_row.setText("Message in queued.");
    viewHolder.sms_to_row.setVisibility(View.VISIBLE);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:25:16.850

你做

```
viewHolder.sms_from_row.setVisibility(View.GONE);
viewHolder.sms_to_row.setVisibility(View.GONE); 
```

但你从来没有

```
viewHolder.sms_from_row.setVisibility(View.Visible);
viewHolder.sms_to_row.setVisibility(View.Visible); 
```

更改您的代码：

```
else
     {
         viewHolder = (ViewHolder) convertView.getTag();
     }

// ADD THIS TWO LINES
viewHolder.sms_from_row.setVisibility(View.Visible);
viewHolder.sms_to_row.setVisibility(View.Visible);

     if(Constant_Variables.Sms_Status_list.get(position).equalsIgnoreCase(Twilioresponse_Utils.sms_sent))
     { 
```

# c# - 如何在 c# 中使用 openxml wordprecessingml 获取段落的样式？

> ID：14479592
> 
> 赞同：2
> 
> 时间：2013-01-23T12:20:31.133
> 
> 标签：c#, ms-office, openxml-sdk

我是 openxml 的新手，我知道这里描述的 wordprocessingml 样式：

[WordprocessingML 文档的样式部分](http://msdn.microsoft.com/en-us/library/bb669110.aspx)

如何在c#中使用openxml获取段落的样式？

例如，我想要这种风格的段落：它是“蓝色”，大小为“14”和蓝色。

# python - 在 python 中使用 print() 的意义

> ID：14479599
> 
> 赞同：2
> 
> 时间：2013-01-23T12:20:49.927
> 
> 标签：python

`print()`使用和不使用有什么区别。

例如，说`a = ("first", "second", "third')`之间有什么区别

```
print (a[0] a[2]) 
```

和

```
a[0] a[2] 
```

?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T12:59:30.640

```
>>> s = 'foo'
>>> s
'foo'
>>> print s
foo 
```

当您在 Python 解释器中键入任何表达式时，如果该表达式返回一个值，则解释器将输出该值的表示形式，或者`repr`. `repr`s 主要用于调试，旨在以对程序员有用的方式显示值。一个值的典型例子`repr`是如何`repr('foo')`输出`'foo'`。

当你使用 时`print`，你没有返回一个值，所以解释器实际上并没有输出任何东西；相反，`print`正在将值写入`str`（`sys.stdout`或替代流，如果您使用`>>`语法指定它，例如`print >>sys.stderr, x`）。 `str`s 用于一般输出，而不仅仅是程序员使用，尽管它们可能与`repr`. 一个值的典型例子`str`是如何`str('foo')`输出`foo`。

`print`解释器所做的事情与您编写模块或脚本时发挥更大作用 的区别。`print`语句将继续产生输出，而表达式值不会输出，除非您明确这样做。但是，您仍然可以输出一个值`repr`：`print repr(value)`

您还可以控制`str`和`repr`在您自己的对象中：

```
>>> class MyThing(object):
...     def __init__(self, value):
...         self.value = value
...     def __str__(self):
...         return str(self.value)
...     def __repr__(self):
...         return '<MyThing value=' + repr(self.value) + '>'
...
>>> mything = MyThing('foo')
>>> mything
<MyThing value='foo'>
>>> print mything
foo 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T12:28:03.170

正如其他答案所示，在交互模式下，差异可以忽略不计。

但是，在脚本中，`print a[0]`实际上会将输出打印到屏幕上，而只会`a[0]`返回*值*，但这没有可见的效果。

例如，考虑以下脚本`printtest.py`：

```
myList = ["first", "second", "third"]

print "with print:", myList[0], myList[2]

"without print:", myList[0], myList[2] 
```

如果您在终端 ( `python printtest.py`) 中运行此脚本，则输出为：

> > > 带印刷品：前三分之一

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T14:29:56.423

你可以这样做

```
>>> print (a[0], a[2], a[3])
('first', 'second', 'third') 
```

试试看 ：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T12:26:16.363

```
>>> a=("first","second")
>>> print a[0],a[1]
first second
>>> a[0],a[1]
('first', 'second') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-23T12:26:52.070

> **print() 而不使用它？**

`print`打印值（*我的意思是在以下示例中，阅读我添加的彗星*）：

```
>>> print a[1]
second           # prints without '
>>> a[1]
'second'         # prints with ' 
```

更有用：

打印：

```
>>> print "a\nb"  
a                # print value   
b 
```

但是翻译

```
>>> "a\na"       # raw strings 
'a\na' 
```

那是原始的：

```
>>> print repr("a\na")
'a\na' 
```

> 区别：**print (a[0] a[2]) 和 a[0] a[2]?**

这打印`a`元组的两个元素。如下

```
>>> print a[0], a[2]
first third 
```

这类似于打印两个字符串，如下所示：

```
>>> print "one", "two"
one two 
```

**[第二]**

这首先创建一个元组`(a[0], a[2])`，然后将其打印

```
>>> print (a[0], a[2])
('first', 'third') 
```

首先制作一个包含 2 个字符串的元组，然后打印如下：

```
>>> print ("one", "two")
('one', 'two') 
```

此外，如果您添加，`,`则它会生成一个元组：

简单字符串

```
>>> a[0]
'first' 
```

这是元组：

```
>>> a[0],
('first',) 
```

相似地，

```
>>> a[0], a[1]
('first', 'second') 
```

# internet-explorer - Internet Explorer 的 jQuery 图像上传问题

> ID：14479602
> 
> 赞同：1
> 
> 时间：2013-01-23T12:20:58.653
> 
> 标签：internet-explorer, jquery, asp.net-mvc-4

我在上传图片时遇到了 Internet Explorer 的问题。

以下是代码 jQuery/AJAX 帖子。此代码在除 IE 之外的其他浏览器（Mozilla/Chrome）中运行良好。

```
<input id="Upload" type="button" value="Upload" />
<input type="file" name="file" id="AdFile" style="display: none" />

$('#Upload').click(function () {
     $('input[id=AdFile]').click();
});

$('#AdFile').change(function () {
     uploadAd($("#AdFile")[0].files[0]);
});

function uploadAd(file) {
var formData = new FormData();
    formData.append('File', file);
    formData.append('ParentId', parentId);
    formData.append('FileType', fileType);
    $.ajax({
       type: "POST",
       url: "@Url.Action("UploadAd", "Ad")",
       data: formData,
       contentType: false,
       processData: false,
       success: function (data) {
         if (data.Success) {
           $('#AdList').append("<option value='" + data.Ad.AdId + "'>" + data.Ad.FileName + "</option>");
         }
       }
    }).fail(function (data) {
        //FAIL?
    }).done(function () {
    });
    return false;
 } 
```

我猜“FormData”不适用于 IE。相同的替代方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:04:08.590

看到这个...

为 IE 更改此项：

```
$('#AdFile').change(function () {
     uploadAd($("#AdFile")[0].files[0]);
}) 
```

为了：

```
$('#AdFile').change(function () {
     uploadAd($(this)[0]);
}); 
```

而这条线

```
url: "@Url.Action("UploadAd", "Ad")", 
```

为了：

```
url: "@Url.Action(" + UploadAd + ", " + Ad + ")", 
```

并看到这个[jsFiddle 示例](http://jsfiddle.net/dvnjy/4/)

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T05:22:16.957

试试下面的代码：

```
if(typeof FormData == "undefined"){
var formData = [];
formData.push('File', file);
formData.push('ParentId', parentId);
formData.push('FileType', fileType);
}
else{
var formData = new FormData();
formData.append('File', file);
formData.append('ParentId', parentId);
formData.append('FileType', fileType);
} 
```

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:26:42.673

删除逗号 processData: false，检查一下，它会工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-07T08:42:42.177

例如，当您尝试上传文件时，您需要在 append 方法中使用第三个参数。

```
formData.append(name, value, filename); 
```

IE 将动态更改 Blob 中的文件名。要直接控制发送的文件名，开发人员应将文件名作为第三个参数值发送，即 formData.append(name, value, filename)。

检查[https://developer.mozilla.org/en-US/docs/Web/API/FormData/append](https://developer.mozilla.org/en-US/docs/Web/API/FormData/append)

此外，在一些旧版本的 ie 中（我相信 < ie9），不允许从隐藏输入上传文件。

# android - android无法连接到URL

> ID：14479605
> 
> 赞同：2
> 
> 时间：2013-01-23T12:21:02.730
> 
> 标签：android, url

我找到了下面的代码，它应该让我从网络主机（在这种情况下是我的网站）读取目录内容

```
String urlStr = "http://2112design.com/tabs/drum_tabs";
URL url;
try {
    url = new URL(urlStr);
    java.net.URLConnection con = url.openConnection();
    con.connect();
    java.io.BufferedReader in =
      new java.io.BufferedReader(new java.io.InputStreamReader(con.getInputStream()));
    String line;
    for (; (line = in.readLine()) != null; ) {
        Log.d("MainActivity", "read from web "+line);
    }
} catch (MalformedURLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

当我运行它时， con.connect(); 失败并出现如下错误跟踪：

```
android.os.NetworkOnMainThreadException
android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1118)
java.net.InetAddress.lookupHostByName(InetAddress.java:385) 
```

看起来存在某种权限问题`StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1118)`，但是当我在同一设备上使用网络浏览器并转到该 URL 时，它可以正常打开。

我对webby的东西不是很好，有人可以帮忙吗，谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T12:26:52.953

例如，您不应该在主线程上进行网络请求，尝试使用 AsyncTask 或启动新线程。

```
 (new Thread(new Runnable() {

                                        @Override
                                        public void run() {
                                            try {
                                                url = new URL(urlStr);
                                                java.net.URLConnection con = url.openConnection();
                                                con.connect();
                                                java.io.BufferedReader in =
                                                  new java.io.BufferedReader(new java.io.InputStreamReader(con.getInputStream()));
                                                String line;
                                                for (; (line = in.readLine()) != null; ) {
                                                    Log.d("MainActivity", "read from web "+line);
                                                }
                                            } catch (MalformedURLException e) {
                                                // TODO Auto-generated catch block
                                                e.printStackTrace();
                                            } catch (IOException e) {
                                                // TODO Auto-generated catch block
                                                e.printStackTrace();
                                            }

                                        }
                                    })).start(); 
```

或者你可以使用

```
 if (android.os.Build.VERSION.SDK_INT > 9) {
        StrictMode.ThreadPolicy policy = 
             new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy); 
```

检查[此](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)问题以获取更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T12:23:37.607

这是因为您试图从 Android 中不允许的主线程访问网络

您可以使用 AsyncTask 或创建另一个线程并在其中执行操作

如果您对如何使用 AsyncTask 或线程实现有任何疑问，请随时询问。如果你想要代码，请告诉我。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T12:22:36.367

您正在 UI 线程中执行网络操作。这就是为什么你得到`NetworkOnMainThreadException`.

将您的代码更改为[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)或将解决您的问题的线程。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-23T12:24:31.860

**NetworkOnMainThreadException：**当应用程序尝试在其主线程上执行网络操作时引发的异常。

您应该在 asynctask 上调用 sendfeedback 方法，然后只有上面的代码才能工作。由于网络服务器需要大量时间来响应主线程变得无响应。为避免它，您应该在另一个线程上调用它。因此 asynctask 更好。

[http://android-developers.blogspot.in/2009/05/painless-threading.html](http://android-developers.blogspot.in/2009/05/painless-threading.html)

这是说明如何使用 asynctask 的链接

# css - 样式化输入框，如在 android 开发者网站上看到的，使用 css

> ID：14479606
> 
> 赞同：1
> 
> 时间：2013-01-23T12:21:08.583
> 
> 标签：css

如何使用纯“CSS”对输入框进行样式化，如下图所示。我知道这可以通过 jquery 来完成，但如果有办法使用 CSS 来做到这一点，我会很热心。我从[Android 的开发者](http://developer.android.com)网站上获取了图片。

![输入框](../Images/4e07929e7bf1551d558deb853a6de7c2.png)

我所做的是HTML，

```
<form>
    <label>Email Address: </label>
    <div class='left'></div>
    <input type='text' class='input'/>
    <div class='right'></div>
</form> 
```

和 CSS，

```
.left {
    display:inline-block;
    height:7px;
    border-left:1px solid #ccc;
    position:absolute;
    margin-top:23px;
}

.right {
    display:inline-block;
    height:7px;
    border-left:1px solid #ccc;
    position:absolute;
    margin-top:23px;
    margin-left:-1px;           
}

.input {
    display:inline-block;
    height:30px;
    font-size:16px;
    width:250px;
    border:1px solid  #ccc;
    border-width:0px 0px 1px 0px;
    padding:0px 5px;  
    outline:none;
}

.input:hover, .input:focus {
    border-color:#4ab5d9;
} 
```

我正在尝试的是=>也在[jsfiddle链接上](http://jsfiddle.net/Gqjba/)

唯一的问题是，我找不到在悬停和聚焦时更改左右边框颜色的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T12:29:27.160

一个选择是[这个](http://jsfiddle.net/Gqjba/2/)

我使用兄弟选择器来获得悬停和焦点工作：

```
.input:hover, .input:focus,
.input:hover + .right,
.input:focus + .right {
    border-color:#4ab5d9;
} 
```

并删除了“左”div。然后对右侧进行了这些更改：

```
margin-top:23px;
margin-left:-260px;
width:258px;
pointer-events: none; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-16T15:12:15.207

*我遇到了同样的问题，我刚刚创建了一种不需要额外标记*的样式。有关演示，请参见[http://codepen.io/killercup/pen/CBeAq 。](http://codepen.io/killercup/pen/CBeAq)

我的解决方案是使用多个背景图像（实际上是`linear-gradient`），这些图像使用`background-size`. 它适用于 Android 4.3，但我尚未在任何其他移动平台上对其进行测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-07T22:28:56.063

以下使用背景 CSS 属性在 Chrome 中工作（并支持焦点/悬停颜色更改），而 HTML 中没有任何附加标签：

HTML：

```
<input type='text' class='holo'></input> 
```

CSS：

```
input.holo[type='text'] {
  /* You can set width to whatever you like */
  width: 200px;
  font-family: "Roboto", "Droid Sans", sans-serif;
  font-size: 16px;
  margin: 0;
  padding: 8px 8px 6px 8px;
  position: relative;
  display: block;
  outline: none;
  border: none;
  background: bottom left linear-gradient(#a9a9a9, #a9a9a9) no-repeat, bottom center linear-gradient(#a9a9a9, #a9a9a9) repeat-x, bottom right linear-gradient(#a9a9a9, #a9a9a9) no-repeat;
  background-size: 1px 6px, 1px 1px, 1px 6px;
}
input.holo[type='text']:hover, input.holo[type='text']:focus {
  background: bottom left linear-gradient(#0099cc, #0099cc) no-repeat, bottom center linear-gradient(#0099cc, #0099cc) repeat-x, bottom right linear-gradient(#0099cc, #0099cc) no-repeat;
  background-size: 1px 6px, 1px 1px, 1px 6px; 
} 
```

演示：http: [//jsfiddle.net/QKm37/](http://jsfiddle.net/QKm37/)

# java - 验证来自 Android 应用的后端调用

> ID：14479607
> 
> 赞同：3
> 
> 时间：2013-01-23T12:21:08.823
> 
> 标签：java, android, maven, google-api-java-client, google-oauth

我正在按照[下一个教程](http://android-developers.blogspot.com.es/2013/01/verifying-back-end-calls-from-android.html?m=1)来保护我的 Rest 服务。

但是我对步骤**Verify Token Fields**有疑问，首先我不知道我的依赖项是否正确：

```
 <dependency>
        <groupId>com.google.api-client</groupId>
        <artifactId>google-api-client</artifactId>
        <version>1.13.1-beta</version>
    </dependency>
    <dependency>
        <groupId>com.google.http-client</groupId>
        <artifactId>google-http-client-gson</artifactId>
        <version>1.13.1-beta</version>
    </dependency> 
```

其次，当我在示例中使用 Checker 类时，在调用中 `Verifier.verify(token)`它返回**false**，这是因为在类`GoogleIdTokenVerifier`中 Set *clientIds*为**空**。我一步一步按照教程，我完全迷路了

谢谢大家。

* * *

编辑：这是我现在使用的代码，它似乎正在工作：

```
public class Checker {

private final String mAudience;
private final Lock lock = new ReentrantLock();
private final GoogleIdTokenVerifier mVerifier;
private final JsonFactory mJFactory;
private String mProblem = "Verification failed. (Time-out?)";
private final List<String> mClientIDs;
private List<PublicKey> publicKeys;
private final Clock clock;
NetHttpTransport transport;
private long expirationTimeMilliseconds;

public Checker(String[] clientIDs, String audience) {
    mClientIDs = Arrays.asList(clientIDs);
    mAudience = audience;
    transport = new NetHttpTransport();
    mJFactory = new GsonFactory();
    mVerifier = new GoogleIdTokenVerifier(transport, mJFactory);
    clock = Clock.SYSTEM;
}

public GoogleIdToken.Payload check(String tokenString) {
    GoogleIdToken.Payload payload = null;

    try {
        GoogleIdToken token = GoogleIdToken.parse(mJFactory, tokenString);
        if (checkSignature(mClientIDs.get(0), token)) {
            GoogleIdToken.Payload tempPayload = token.getPayload();
            if (!tempPayload.getAudience().equals(mAudience))
                mProblem = "Audience mismatch";
            else if (!mClientIDs.contains(tempPayload.getIssuee()))
                mProblem = "Client ID mismatch";
            else
                payload = tempPayload;
        }
    } catch (GeneralSecurityException e) {
        mProblem = "Security issue: " + e.getLocalizedMessage();
    } catch (IOException e) {
        mProblem = "Network problem: " + e.getLocalizedMessage();
    } catch (Exception e) {
        mProblem = "Problem: " + e.getLocalizedMessage();
    }
    return payload;
}

public String problem() {
    return mProblem;
}

boolean checkSignature(String clientIds, GoogleIdToken idToken)
        throws GeneralSecurityException, IOException {
    JsonWebSignature.Header header = idToken.getHeader();
    String algorithm = header.getAlgorithm();
    if (algorithm.equals("RS256")) {
        lock.lock();
        try {
            if (publicKeys == null
                    || clock.currentTimeMillis() + 300000 > expirationTimeMilliseconds) {
                mVerifier.loadPublicCerts();
                publicKeys = mVerifier.getPublicKeys();
                expirationTimeMilliseconds = mVerifier
                        .getExpirationTimeMilliseconds();
            }
            Signature signer = Signature.getInstance("SHA256withRSA");
            for (PublicKey publicKey : publicKeys) {
                signer.initVerify(publicKey);
                signer.update(idToken.getSignedContentBytes());
                if (signer.verify(idToken.getSignatureBytes())) {
                    return true;
                }
            }
        } finally {
            lock.unlock();
        }
    }
    return false;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:25:15.013

不知道你的依赖；那是马文吧？我是一个 Maven 白痴。

至于您的客户端 ID，代码假定您将传入一个客户端 ID 列表，因为您想确保知道要与哪个客户端交谈。如果您不想这样做，我可以看到两个明显的选择：

*   只需删除构造函数的 clientIds 参数、mClientIDs 成员变量和 check() 方法中的“if (!mClientIDs.contains()”调用。

*   更改代码以跳过检查 mClientIDs 是否为空

# javascript - 如何将“live”从 jQuery 1.8.3 替换为 jQuery 1.9？

> ID：14479608
> 
> 赞同：8
> 
> 时间：2013-01-23T12:21:09.240
> 
> 标签：javascript, jquery, jquery-1.8, jquery-1.9

我的 Web 框架自动将我的 jQuery 脚本更新到当前的最新版本 1.9。

现在我的所有：

```
$(".myclass").live("click", function() {... 
```

别再工作了。我主要将它与一些在我的页面中填充 html 的 ajax 一起使用。

我会知道如何在上一个版本中替换此功能。一位朋友告诉我改用“on”，但“on”仍然固定在同一个元素上。

说明，在这个例子中（没有 ajax），我使用一个“+”图标来显示一个“ul li list”。

```
$(".closed").live('click', function(){
    $("#ul_list_"+$(this).attr('id')).addClass("displayed").removeClass("hidden").show();
    $(this).addClass("openned").removeClass('closed');
    $(this).html('<i class="icon-minus"></i>');
});

$(".openned").live('click', function(){
    $("#ul_list_"+$(this).attr('id')).addClass("hidden").removeClass("displayed").hide();
    $(this).addClass("closed").removeClass('openned');
    $(this).html('<i class="icon-plus"></i>');
}); 
```

（我知道该脚本不是有史以来最优化的，但它确实有效。我使用类来打开或关闭我的列表。如果访问者没有启用 JS，则不会隐藏任何内容，打开所有折叠列表）

笔记：

*   我试过[https://github.com/jquery/jquery-migrate](https://github.com/jquery/jquery-migrate)，但我唯一的消息是“JQMIGRATE：jQuery.fn.live() 已弃用”，而不是如何修复它。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-23T12:23:04.760

[文档](http://api.jquery.com/live/)已经提供了一个示例：

> 根据其继承者重写 .live() 方法很简单；这些是对所有三种事件附件方法进行等效调用的模板：
> 
> ```
> $(selector).live(events, data, handler); // jQuery 1.3+
> $(document).delegate(selector, events, data, handler); // jQuery 1.4.3+
> $(document).on(events, selector, data, handler); // jQuery 1.7+ 
> ```

所以：`$(document).on("click", ".closed", function() { ... })`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-23T12:23:26.313

您需要`on`与委托处理程序一起使用：

```
$('#parent').on('click', '.closed', function() {
   // your code...
}); 
```

请注意，您应该替换为页面加载时可用`#parent`的最接近的父元素`.closed`- 通常`.closed`是附加到的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T12:22:53.733

你必须使用`on`而不是`live`。因为 live 在版本 1.7 上已弃用

# c# - 如何从C#中包含匿名方法的Action中捕获异常？

> ID：14479613
> 
> 赞同：4
> 
> 时间：2013-01-23T12:21:28.507
> 
> 标签：c#, exception, action, task

谁能解释一下，为什么我没有从打击代码中得到异常：

```
Action <Exception> myact = ( ) => {       
    throw new Exception( "test" );
  };

  Task myactTask = Task.Factory.StartNew( ( ) => myact);
  try {
    myactTask.Wait( );
    Console.WriteLine( myactTask.Id.ToString( ) );
    Console.WriteLine( myactTask.IsCompleted.ToString( ) );
  }
  catch( AggregateException ex ) {
    throw ex;
  } 
```

另一方面，如果用方法“myact()”替换动作“myact”，那么我可以得到异常，它可以用 try catch 块处理。

```
public static void myact( ) {
  throw new Exception( "test" );
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T12:27:05.787

```
Task myactTask = Task.Factory.StartNew( ( ) => myact); 
```

这不会执行您的操作，它是一个返回对您的操作的引用的函数。

```
Task myactTask = Task.Factory.StartNew(myact); 
```

这将执行它并抛出/捕获异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:25:47.820

发生这种情况是因为您只捕获 a`AggregateException`而不是 a `Exception`。另一个问题是您并没有真正在`Task.Factory.StartNew`.

将您的代码更改为：

```
Action <Exception> myact = ( ) => {       
    throw new Exception("test");
};

Task myactTask = Task.Factory.StartNew(myact);
try {
    myactTask.Wait();
    Console.WriteLine(myactTask.Id.ToString());
    Console.WriteLine(myactTask.IsCompleted.ToString());
}
catch(Exception ex) {
    throw ex;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:31:17.893

我复制了代码并且它没有编译但是大多数答案都是正确的，这取决于你想要捕捉的内容。

```
//Action<in Exception> : Make the delgate take an exception, then throw it
Action<Exception> myact = (ex => { throw ex; });
//Pass a new Exception with the message test "Test" that will be thrown
Task myactTask = Task.Factory.StartNew(() => myact(new Exception("Test")));
try
{
  myactTask.Wait();
  Console.WriteLine(myactTask.Id.ToString());
  Console.WriteLine(myactTask.IsCompleted.ToString());
}
catch (Exception ex)
{
  //Writes out "Test"
  Console.WriteLine(ex.Message);
  throw ex;
} 
```

# jquery - 借助 jQuery Rails 2.3 从表中查找存在于另一个数组中的重复联系人

> ID：14479616
> 
> 赞同：1
> 
> 时间：2013-01-23T12:21:29.350
> 
> 标签：jquery, ruby-on-rails, ajax

```
Here is mY table  structure,

  <table class="editable">
    <tbody id="contacts">
    <tr class="no_items">
    <tr class="title_with_items">
    <th>First Name</th>
    <th>Last Name</th>
    <th>e-mail</th>
    <th>Mobile</th>
    <th>Sender</th>
    <th>Sender e-mail</th>
    <th>Date</th>
    <th></th>
    </tr>
    <tr class="contact_container" style="display: none;">
    <tr class="contact_container">
    <td class="confirm">
    <td class="input">
    <input id="personal_event_event_contacts_attributes_1_first_name" type="text" value="test " size="12" name="personal_event[event_contacts_attributes][1][first_name]">
    </td>
    <td class="input">
    <td class="input">
    <td class="input">
    <td class="input">
    <td class="input">
    <td class="input">
    <td class="action">
    </tr>
    <tr class="contact_container">
    <td class="confirm">
    <td class="input">
    <input id="personal_event_event_contacts_attributes_1_first_name" type="text" value="test " size="12" name="personal_event[event_contacts_attributes][1][first_name]">
    </td>
    <td class="input">
    <td class="input">
    <td class="input">
    <td class="input">
    <td class="input">
    <td class="input">
    <td class="action">
    </tr>
    </tbody>
    </table> 
```

我想在表中找到重复的联系人，这些联系人是由 jQuery 添加的，而不是在数据库中。我想将此表的记录与另一个属性数组匹配并查找重复项。如果可以在 Jquery 的帮助下完成，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:18:11.523

知道了！找了好久终于找到方法了

我将代码包装在一个函数中，并从已经存在的列表中找到我想要的元素数组，然后将它与我想要的列表匹配。

```
function confirm_imported() {
    var getval_array = [];
    $('imported_contacts_table').select('[name="confirm"]').each(function(check, index)     {
      if (check.checked) {
         // Checking if the records already exist in the list.
        var totalvalues =
          $('contacts').select('tr.contact_container').map(function(value,i) {
           $val = $(value);
             var getvalues = $val.select('td.input').map(function(value, index) {
               return $(value).select(value)[0].value;
             });
             var spreadvalues = $(check).up('tr').select('td.input').map(function(cval,     cin){
                return $(cval).select(value)[0].value;
             });
           // Matching records with each other one from the spreadsheet to all.
           if (!(getvalues<spreadvalues || spreadvalues<getvalues)){
             getval_array.push(spreadvalues)
             return 1;
           }
           else {
           return 0;
           }
         });
         if (jQuery.inArray(1, totalvalues) === -1) {
          $('contacts').insert($(check).up('tr'));
        }
      }
     }); 
```

# javascript - 获取 hotmail 的访问令牌以安装应用程序

> ID：14479619
> 
> 赞同：1
> 
> 时间：2013-01-23T12:21:32.970
> 
> 标签：javascript, extjs, access-token, mobile-application, hotmail

我是移动应用程序的新手。如何获取hotmail的访问令牌以获取联系和日历请帮助我。我正在使用 sencha 开发应用程序

# javascript - 如何获得第二次出现的位置？

> ID：14479621
> 
> 赞同：2
> 
> 时间：2013-01-23T12:21:35.620
> 
> 标签：javascript, arrays, position, indexof

假设我有这个数组：

```
var a = [1,2,99,3,4,99,5]; 
```

我想获得第二个的位置`99`，例如：

```
a.indexOf(99, 2) // --> 5 
```

然而，第二个参数`indexOf`只是告诉从哪里开始搜索。是否有任何内置函数可以做到这一点？如果不是，你会怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T12:26:35.477

只有`indexOf`和`lastIndexOf`。你可以遍历它：

```
var a = [1,2,99,3,4,99,5];
var matches = []
for (var i=0; i<a.length; i++){
    if (a[i] == 99) {
        matches.push(i)
    }
}
console.log(matches); // [2, 5] 
```

如果你总是想要第二次出现 Jan 的方法也很好：

```
a.indexOf(99, a.indexOf(99) + 1) 
```

`indexOf`右边的调用找到第一个匹配项，`+1`然后将搜索限制在它后面的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T12:33:56.537

没有内置函数，但您可以通过迭代应用轻松创建自己的函数`indexOf`：

```
function indexOfOccurrence(haystack, needle, occurrence) {
    var counter = 0;
    var index = -1;
    do {
        index = haystack.indexOf(needle, index + 1);
    }
    while (index !== -1 && (++counter < occurrence));
    return index;
}

// Usage
var index = indexOfOccurrence(a, 99, 2); 
```

但[马特的解决方案](https://stackoverflow.com/a/14479730/218196)可能更有用。

# magento-1.6 - Magento 致命错误在导入时调用非对象上的成员函数 getName()

> ID：14479623
> 
> 赞同：0
> 
> 时间：2013-01-23T12:21:40.687
> 
> 标签：magento-1.6, magento

尝试使用 CSV 导入产品时在控制台中出现以下错误我正在使用 magento 核心导入功能

```
 <b>Fatal error</b>:  Call to a member function getName() on a non-object in <b>/home/magentosite/public_html/store/app/code/core/Mage/ImportExport/Model/Import/Entity/Product.php</b> on line <b>377</b><br /> 
```

product.php 文件中第 377 行的函数没有更改核心文件

```
 /**
 * Initialize categories text-path to ID hash.
 *
 * @return Mage_ImportExport_Model_Import_Entity_Product
 */
protected function _initCategories()
{
    $collection = Mage::getResourceModel('catalog/category_collection')->addNameToResult();
    /* @var $collection Mage_Catalog_Model_Resource_Eav_Mysql4_Category_Collection */
    foreach ($collection as $category) {
        $structure = explode('/', $category->getPath());
        $pathSize  = count($structure);
        if ($pathSize > 2) {
            $path = array();
            for ($i = 2; $i < $pathSize; $i++) {
                $path[] = $collection->getItemById($structure[$i])->getName();  ---> **This is line no 377**
            }
            $this->_categories[implode('/', $path)] = $category->getId();
        }
    }
    return $this;
} 
```

请问有人知道解决方案吗？我在 magento 1.6.2

:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-09T20:20:34.737

如果您在注册表中没有类别并获取其名称，那么也会发生此错误，就像您访问直接产品链接并尝试通过注册表获取页面上的类别时发生此错误一样。检查类别是否存在的解决方案。

```
if (Mage::registry('current_category')) {
        $categoryName = Mage::registry('current_category')->getName();
    }
    else {
        $categoryIds = $_product->getCategoryIds();
        if (count($categoryIds)) {
            $firstCategoryId = $categoryIds[0];
            $_category = Mage::getModel('catalog/category')->load($firstCategoryId);
            $categoryName = $_category->getName();
        }
    } 
```

# hibernate - JSF - SelectOneMenu 上的验证失败（错误无效） - Hibernate 相关？

> ID：14479624
> 
> 赞同：2
> 
> 时间：2013-01-23T12:21:42.693
> 
> 标签：hibernate, validation, jsf, jsf-2

我已经在这里阅读了很多关于这个问题的问题，我可以向你保证，这不是 EQUALs 方法，而且，它不是 bean 范围的问题。所以，让我们看看发生了什么。

我有这个 selectOne，它正在“部分”工作

```
 <p:selectOneMenu id="acao" converter="#{acaoConverter}" value="#{prospectoRadarController.acaoSelecionada}">
                    <f:selectItem itemLabel="#{msg['label.selecione.item']}" itemValue="" />
                    <f:selectItems var="a" itemValue="#{a}" itemLabel="#{a.descricao}" value="#{acaoController.listarAcoesEmAberto()}" />
                </p:selectOneMenu> 
```

所以我有'Acao'实体。所有实体都是完全有效的，因为选择的 HTML 也是正确的（值是实体的正确 ID）。

我导入的数据（使用 SQL 文件）检查最后两行：

```
 INSERT INTO com_acao VALUES (190, 0.00, '2012-12-31', '2012-12-31', '2012-12-31', 'SELECIONADOS 2012-1', 0, 1, 1);
            ALTER SEQUENCE com_acao_id_seq RESTART WITH 191; 
```

好的，如果我插入一个新实体，它会正确插入，并使用正确的 ID，一切正常。

**问题**：在那个 SelectOneMenu 上，如果我选择一个与 SQL 文件一起导入的实体，它就可以工作。如果我选择一个使用系统保存的新实体，我会得到：

```
 javax.faces.component.UISelectOne.INVALID 
```

验证错误。同样，等号并没有被打破。我最好的选择是这与 Hibernate 相关。但是....它是如何添加、过滤、搜索实体并且没有发生错误的？只有验证错误发生？:(

这是实体 ID 声明：

```
 public class Acao {

     @Id
     @GeneratedValue(strategy = GenerationType.IDENTITY)
     private Integer id; 
```

谢谢 ！我的存储库是 Spring Data 的 PagingAndSorting 接口。我不知道这是否是相关信息...如果你们需要任何信息，请问！再次感谢！

**更新** 加载要在 SelectItems 上显示的“Acao”列表的方法：

```
public List<Acao> listarAcoesEmAberto() {
    return acaoService.listarAcoesEmAberto();
} 
```

执行此查询：

```
@Query("select a from Acao a where a.dataFinal is null OR current_date() <= a.dataFinal")
public List<Acao> listarAcoesEmAberto(); 
```

**更新 2**转换器方法：

```
@SuppressWarnings("unchecked")
@Override
public Object getAsObject(FacesContext arg0, UIComponent arg1, String arg2) {
    if (arg2 == null || arg2.equals("")) {
        return null;
    }

    try {
        return baseService.findOne((PK) new SimpleTypeConverter().convertIfNecessary(arg2, ReflectUtil.getPrimaryKeyField(entityClass).getType()));
    } catch (TypeMismatchException e) {
        return null;
    }
}

@Override
public String getAsString(FacesContext arg0, UIComponent arg1, Object arg2) {
    if (arg2 == null) {
        return "";
    }

    return arg2.toString();
} 
```

注意：这是一个通用转换器。真正的转换器是：

@Component @Scope("request") public class AcaoConverter extends BaseConverter implements Serializable {

```
private static final long serialVersionUID = 1L;

@Autowired
public AcaoConverter(AcaoService acaoService) {
    super(acaoService, Acao.class); 
} 
```

所以它对于所有实体都是相同的转换器。它有效。为什么不针对这种特殊情况？:(

**更新 3**让我们更好地看到问题......

这是从 sql 文件中导入的行： ![一个](../Images/20527d61177a0ed750eaaf09b71aceed.png)

这是我使用该程序创建的一行： ![2](../Images/01cb621bfb95392d71b37188bcfc3b36.png)

这在数据库上是一样的（所以它被提交了）： ![3](../Images/6bb852016c41443e04a66f71485f9287.png)

这是选择： ![4](../Images/93039d74f388b4cb7d3d53440dde2f15.png)

的HTML： ![5](../Images/ad524337b69021e79f886173036cc506.png)

成功案例（选择导入的行）： ![6](../Images/6a37e0bbdce768460754de695c4b40dc.png)

错误案例（选择创建的行）： ![7](../Images/d958112651cd5aa7612930e4650ddae0.png)

**更新 4**哇！我用其他一些导入的实体进行了测试，并且......其中一些不起作用。所以，底线：新实体不起作用，一些导入的实体不起作用！查看数据库，它们都是很好的数据，没有丢失或违规。好诡异！

另一件事..使用 autoComplete 组件它可以工作！！！！（一切正常）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:20:00.577

出色地，

selectOneMenu 没有解决方案。所以我使用了带有下拉菜单的自动完成功能（true）。

它工作正常。

因此，这并不是真正的解决方案，而是一种解决方法。谢谢大家的帮助。

# php - 检查未设置的模块位置

> ID：14479625
> 
> 赞同：0
> 
> 时间：2013-01-23T12:21:45.663
> 
> 标签：php, joomla

这是我用来计算 joomla 中的模块的代码，以查看它是否可用。

```
<?php if ($this->countModules( 'right' )) : ?> 
```

现在我想要与此相反的情况，例如，当未设置模块时..

我应该使用类似的东西：

```
<?php if (!$this->countModules( 'right' )) : ?> 
```

我的意思是，我应该使用什么来实现它？我想，不是假设，但我写的方式肯定是错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:24:31.143

```
 <?php if ($this->countModules( 'right' )) : ?> 
```

检查`true`

它的反面是这个

```
<?php if (!$this->countModules( 'right' )) : ?> 
```

它检查`false`

工作示例[http://codepad.viper-7.com/W2Am6k](http://codepad.viper-7.com/W2Am6k)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:24:32.280

你可以这样做：

```
if ($this->countModules( 'right' ) <= 0) : 
```

或者这个（更易读的恕我直言）：

```
if ( empty($this->countModules( 'right' )) ) : 
```

顺便说一下，`countModules()`只返回在该模块位置启用的模块数量，因此如果返回值为 0，则表示没有启用任何模块。

[http://docs.joomla.org/JDocumentHTML/countModules](http://docs.joomla.org/JDocumentHTML/countModules)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:25:27.677

这应该这样做：

```
<?php 

    if( $this->countModules( 'right' ) < 1 ) : echo 'No right modules'; endif; 

?> 
```

“！” 代表假，它是一个布尔值。“< 1”表示实数，换句话说，表示小于 1 的任何值。如果您使用 Joomla 的“countModules”功能，我们正在计算模块，因此使用数字比较是有意义的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-23T12:25:55.817

```
<?php
if ($this->countModules( 'right' )) : 
    //there are modules
else :
    //no modules
endif;
?> 
```

# c++ - Boost.Regex 表达式构建

> ID：14479626
> 
> 赞同：1
> 
> 时间：2013-01-23T12:21:53.530
> 
> 标签：c++, regex, boost

我需要构建一个匹配通用`#include "file.h"`代码行的表达式。

出于该目的，以下内容是否正确？

```
([[:blank:]]*#include[[:blank:]]*")([[:print:]]*\.h)([[:print:]]*) 
```

表达式应匹配以下内容：

```
#include     "header.h" //first include

     #include "header2.h"      //second include

#include "header3.h" 
```

我使用 boost 正则表达式库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:59:03.230

Boost Regex 可以使用 Perl，或 POSIX 正则表达式语法： http: [//www.boost.org/doc/libs/1_52_0/libs/regex/doc/html/boost_regex/syntax.html](http://www.boost.org/doc/libs/1_52_0/libs/regex/doc/html/boost_regex/syntax.html)

所以你可以在这里检查和测试你的正则表达式：[http ://www.regextester.com/](http://www.regextester.com/)

如果您使用 boost 的默认行为（见上文），只需设置为 preg (perl)。

# vba - Excel/VBA：将单个单元格作为参数传递

> ID：14479627
> 
> 赞同：12
> 
> 时间：2013-01-23T12:21:54.783
> 
> 标签：vba, excel

我想让我的自定义 VBA 函数只接受一个单元格参数。这样做的正确方法是什么：

*   经过`myCell as Cell`

或者：

*   默认情况下通过`myRange as Range`并获取（如何？）左上单元格？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-23T12:51:39.690

If you select more than one cell the function will exit:

```
Function AcceptOneCell(rng As Range)

If (rng.Cells.Count > 1) Then
    AcceptOneCell = "Only allow 1 cell"
    Exit Function
End If

    ' your code here

End Function 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-23T12:28:53.870

假设您的用户将输入一个包含多列和多行的范围，如果这是您在问题中的意思，您可以执行以下检查以退出该函数...

```
Function myFunction(ByRef myCell as Range) as SomeDataType_of_your_choice
Dim numRow as Long, numCol as Long

numRow = myCell.Columns.Count 
numCol = myCell.Rows.Count 

If numRow > 1 or numCol > 1 Then
   MsgBox "Only one cell is accepted"
   Exit Function    
Else
   '-- do other stuff you want to do here
End If
End Function 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-23T12:36:37.990

```
topLeftValue = myRange.Cells(1, 1).Value 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-24T18:51:44.267

我在我自己的函数/子程序中添加了以下范围检查，以便即使通过了 > 1 个单元格的范围也可以继续。如果将具有多个单元格的范围传递给函数，这将强制选择最左上角的单元格。这是其他答案的替代路径，而是结束当前功能。

```
Sub DoSomethingWithCells(StartCell As Range)
'Ensure that only the first cell of range is selected

If (StartCell.Cells.Count > 1) Then
    'Select only the first cell
    StartCell = StartCell.Cells(1, 1).Address
End If

'Do whatever you need to do here

End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-12T09:11:47.677

```
numRow = myCell.Columns.Count 

numCol = myCell.Rows.Count 
```

应该

```
numColum = myCell.Columns.Count 

numRow = myCell.Rows.Count 
```

# repository - 哪个网站或在线设施最适合存储向雇主展示的代码示例？

> ID：14479629
> 
> 赞同：0
> 
> 时间：2013-01-23T12:21:58.817
> 
> 标签：repository

哪个网站或在线设施最适合存储向雇主展示的代码示例？谷歌代码，Github 等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:40:41.010

GitHub。暂时看来是个不错的全能选手。

# xul - 如何将基于 XUL 的插件合并到基于 SDK 的插件中？

> ID：14479634
> 
> 赞同：0
> 
> 时间：2013-01-23T12:22:23.953
> 
> 标签：xul, firefox-addon-sdk

我有一个使用 Addon SDK 构建的插件，它操作 HTTP 请求和另一个操作 DOM 但以引导（XUL）方式构建的插件。基本上我必须将引导插件合并到基于 SDK 的插件中以组合它们的功能，但不对基于 XUL 的插件进行太多更改。

有没有办法在不大规模重写它们的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:11:31.397

自举附加组件非常相似但更加混乱，如果您打算维护它，那么组织您的代码是值得的，并且 sdk 提供了一个健全的测试框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:55:42.253

较旧的附加组件是否使用覆盖？如果是这样，将需要大量工作以编程方式将 UI 添加到 Firefox 中的无需重启的附加组件中。无论您是否使用 SDK，这都是正确的。

# joomla - $document -> addScript() 不适用于现有文件

> ID：14479635
> 
> 赞同：0
> 
> 时间：2013-01-23T12:22:26.247
> 
> 标签：joomla

我试图在 Joomla 的页面上包含 JS 和 CSS 文件。由于某些原因，如果预先添加 JURI::root() 或其他东西，它就不起作用。

在职的：

```
$document->addScript('http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'); 
```

不工作：

```
$document->addScript(JURI::root() . '/media/media/js/clubliga/jquery.min.js');
$document->addScript('/jupgrade/media/media/js/clubliga/jquery.min.js'); 
```

`addScript()`以某种方式过滤？我也尝试了所有的组合`.DS.`or `JHTML::script`...

我很茫然......感谢任何提示！

编辑：Joomla 在子目录中运行：[http ://www.xyz.com/jupgrade](http://www.xyz.com/jupgrade)

EDIT2：不工作：没有输出。

EDIT3：问题似乎是路径开头的jupgrade (=JURI:root(true))。由于某些原因，它阻止了输出。如果我一开始就跳过它，我会显示链接，但现在路径错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:54:55.203

我得到了解决方案：没有指向本地 JS 文件的链接。Joomla 正在获取所有本地 JS 文件并将它们打包到一个 chached 文件中。因此，只有 JS 文件（如 google 文件）不会合并在一起。

还没有意识到这一点。*掌心*

感谢您花费您的时间和精力！

# linux - 信号传递 时间场命令似乎不起作用

> ID：14479636
> 
> 赞同：1
> 
> 时间：2013-01-23T12:22:26.050
> 
> 标签：linux, bash

我一直在试验时间命令（/usr/bin/time）。我让时间命令运行如下

```
/usr/bin/time -v sleep 30 
```

在另一个终端上，我做了一个`ps -a`并找出了`sleep`进程的 PID。现在我向睡眠发送一条消息，使用`kill -1 PID`它终止了进程睡眠。由于睡眠是按时运行的，它列出了资源使用统计信息，如下所示

```
Command being timed: "sleep 30"
User time (seconds): 0.00
System time (seconds): 0.00
Percent of CPU this job got: 0%
Elapsed (wall clock) time (h:mm:ss or m:ss): 0:21.81
Average shared text size (kbytes): 0
Average unshared data size (kbytes): 0
Average stack size (kbytes): 0
Average total size (kbytes): 0
Maximum resident set size (kbytes): 2160
Average resident set size (kbytes): 0
Major (requiring I/O) page faults: 0
Minor (reclaiming a frame) page faults: 180
Voluntary context switches: 2
Involuntary context switches: 2
Swaps: 0
File system inputs: 0
File system outputs: 0
Socket messages sent: 0
Socket messages received: 0
Signals delivered: 0
Page size (bytes): 4096
Exit status: 0 
```

然而令我惊讶的是，Signals Delivered 字段的值为 0！这怎么可能？

编辑：

而不是`sleep 30`，我尝试了以下脚本。

```
trap "echo Hello" 1 2
sleep 30 
```

现在我为上面的脚本计时并向它发送信号 1 和 2。在那种情况下， Signals Delivered 字段仍然为 0。这让我得出结论 Signals Delivered 字段为 0 ，而不是因为未处理信号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:03:31.403

我正在使用这个程序：

```
#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>
#include <signal.h>

volatile unsigned int counter=0;

void exithandler(int signum)
{
_exit(1);
}

void ignorehandler(int signum)
{
counter += signum;
}

int main(int argc, char **argv)
{

int delay;

signal ( SIGHUP, ignorehandler );
signal ( SIGQUIT, exithandler );
for (delay = atoi(argv[1] ); delay > 0; ) {
        delay = sleep( delay);
        }

printf("Counter=%u\n", counter);
return 0;
} 
```

，我得到了类似的结果（显然，在 11 次 SIGHUPS 之后）：

```
Plasser@pisbak>$ Counter=11
Command being timed: "./mysleep 20"
User time (seconds): 0.00
System time (seconds): 0.00
Percent of CPU this job got: 0%
Elapsed (wall clock) time (h:mm:ss or m:ss): 0:22.56
Average shared text size (kbytes): 0
Average unshared data size (kbytes): 0
Average stack size (kbytes): 0
Average total size (kbytes): 0
Maximum resident set size (kbytes): 1856
Average resident set size (kbytes): 0
Major (requiring I/O) page faults: 0
Minor (reclaiming a frame) page faults: 163
Voluntary context switches: 13
Involuntary context switches: 1
Swaps: 0
File system inputs: 0
File system outputs: 0
Socket messages sent: 0
Socket messages received: 0
Signals delivered: 0
Page size (bytes): 4096
Exit status: 0
[1]+  Done                    /usr/bin/time -v ./mysleep 20
Plasser@pisbak>$ man getrusage 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:07:04.190

time 使用 wait4 系统调用。我发现一件事是 struct **rusage**的某些字段仍未维护。ru_nsignals 是 struct **rusage**中的一个这样的字段。[有关详细信息，请参阅此问题](https://stackoverflow.com/questions/7205806/is-getrusage-broken-in-linux-2-6-30)的正确答案

# php - 打开未在 facebook 中呈现的图形标签，例如

> ID：14479638
> 
> 赞同：0
> 
> 时间：2013-01-23T12:22:29.543
> 
> 标签：php, facebook, facebook-graph-api

我已经为 facebook 使用了 facebook 开放图形标签，但它们没有被渲染。默认的元标题和描述在 facebook 上发布时显示。这是演示网址[http://www.mypartyaid.com/event/photodetail/1913-lust-after-work-wednesdays-at-katra-nyc-4393214](http://www.mypartyaid.com/event/photodetail/1913-lust-after-work-wednesdays-at-katra-nyc-4393214)

当我使用调试器调试它时，它会给出错误**“你有标签之外的标签。这要么是因为你的格式错误并且它们在解析树中下降，要么你不小心把你的开放图标签放在错误的地方。无论哪种方式你需要在标签可用之前修复它。”**

而 og 标签在头部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:44:32.487

**问题似乎在这里：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" xmlns:fb="http://www.facebook.com/2008/fbml"> 
```

**如果您将其更改为：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

它应该可以正常工作。

# java - ProgressMonitorInputStream - 进度条不显示实际进度

> ID：14479640
> 
> 赞同：1
> 
> 时间：2013-01-23T12:22:36.370
> 
> 标签：java, swing, file-io, progress-bar, progressmonitor

这是我的代码：

```
class Copy extends SwingWorker<Void, Void> {

private File selectedfile = new File("D:/Adatok/proba.file");
private File chosenDestination = new File("D:/Adatok/ide/proba.file");

@Override
protected Void doInBackground() throws Exception {
try {
     FileInputStream fileInputStream = new FileInputStream(
     selectedfile);
     BufferedInputStream bufferedInputStream = new BufferedInputStream(fileInputStream);
     ProgressMonitorInputStream progressMonitorInputStream;
     progressMonitorInputStream = new ProgressMonitorInputStream(Panel.this,"Copying...", bufferedInputStream);
     File outputFile = new File("" + chosenDestination);
     FileOutputStream fileOutputStream = new FileOutputStream(outputFile);
    BufferedOutputStream bufferedOutputStream = new BufferedOutputStream(fileOutputStream);
    int data;
    byte[] buffer = new byte[1024];
    while ((data = progressMonitorInputStream.read(buffer)) > 0) {
         bufferedOutputStream.write(buffer);
    }
    bufferedOutputStream.close();
    progressMonitorInputStream.close();
} catch (FileNotFoundException e) {
e.printStackTrace();
} catch (IOException e) {
e.printStackTrace();
}
return null;
}

@Override
public void done() {
     JOptionPane.showMessageDialog(Panel.this, "Ready!", "Done", 1);
}
}

} 
```

它适用于较小的文件，但如果我尝试使用 3GB 文件，进度条会显示错误的进度。100%复制未完成时，剩余时间内进度条设置为`0%`不动。它出什么问题了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-30T13:58:01.227

我知道这很旧，但多年来我不止一次地发现了这个线程，同时不得不解决同样的问题。正如@Roberto 所指出的，这是Java 中的一个[错误。](https://bugs.java.com/bugdatabase/view_bug.do?bug_id=6445283)我做了一个与错误报告者发布的类似的解决方法。

1.  我复制了 ProgessMonitorInputStream 的源并创建了一个名为 ProgessMonitorInputStreamLongBased 的新类以避免混淆
2.  我检查文件的大小（以字节为单位），看看它是否大于 Integer.MAX_VALUE：
    *   如果小于则没有变化。
    *   如果更大，则 max size 是最大 int 值，并且将执行缩放。
3.  比例找到一次，它等于之前找到的“大小”除以文件的实际长度。

我希望这可以帮助遇到此问题的其他人。

# iphone - Iphone SDK 中地图的详细视图

> ID：14479644
> 
> 赞同：0
> 
> 时间：2013-01-23T12:22:50.017
> 
> 标签：iphone, ios, objective-c, xcode, mkmapview

在我的应用程序中，我实现了地图视图并添加了注释。

但是现在，我想在弹出窗口中显示单击注释的详细视图。到目前为止，我是在单击 calloutAccessoryControl 时执行此操作的。

但是弹出框必须从注释旁边开始，我不想显示 calloutAccessoryControl 或任何黑色默认标签。

我的代码是：

```
- (MKAnnotationView *)mapView:(MKMapView *)myMap viewForAnnotation:(id <MKAnnotation>)annotation
{
AnnotationImageView *myLocationImage = (AnnotationImageView *)[map dequeueReusableAnnotationViewWithIdentifier:defaultID];

    if (myLocationImage == nil )
    {
        myLocationImage = [[[AnnotationImageView alloc] initWithAnnotation:annotation reuseIdentifier:defaultID] autorelease];
        myLocationImage.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];     
    }

    myLocationImage.locationID = [currentAnnotation locationID];
    myLocation = myLocationImage;

    [myLocation setEnabled:YES];
    [myLocation setCanShowCallout:YES]; 

    return myLocation;
}

- (void)mapView:(MKMapView *)myMap annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{

detailsView *popUp=[[detailsView alloc] initWithNibName:@"detailsView_ipad" bundle:nil];

        popView = [[UIPopoverController alloc]initWithContentViewController:popUp];

        popView.delegate =self;

        [popView setPopoverContentSize:CGSizeMake(600, 500)];

AnnotationImageView *myLocationImage = (AnnotationImageView *)view;
        popUp.locationID = myLocationImage.locationID;

[popView presentPopoverFromRect:control.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];

} 
```

**单击注释时是否有任何方法调用？**

**我怎样才能做到这一点？？**

**我想这样展示**

![在此处输入图像描述](../Images/ee8512f1c5672aeb06a9159817f0a325.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:07:48.627

在实现的类中，`MKMapViewDelegate`您可以实现该`mapView:didSelectAnnotationView:`方法：

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)aView {
    //do something...like push a new UIViewController

    if (UIUserInterfaceIdiomPhone == UI_USER_INTERFACE_IDIOM()) {
        //only do something when the app is running on the iPhone
    }
} 
```

# c# - asp.net 生命周期中的 PageEvents 总数是多少

> ID：14479648
> 
> 赞同：1
> 
> 时间：2013-01-23T12:22:59.863
> 
> 标签：c#, asp.net, .net

asp.net 生命周期中的 PageEvents 总数是多少？我发现它有争议，因为在某些地方它是 9，有些超过 20（例如在 msdn 和 codeproject）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:24:16.353

对于 asp.net 文档，您必须坚持使用 msdn。[您可以在这里](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)计算有多少 msdn 声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:27:06.927

参考以下链接，它会清楚地解释

[http://msdn.microsoft.com/en-us/library/ms178472(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178472(v=vs.100).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:34:30.300

是的，就像他们展示的那样，您要查找 asp.net 和任何 .Net 产品的第一个地方是 MSDN。[这](http://wiki.asp.net/page.aspx/1512/aspnet-page-life-cycle-events/)是来自 ASP.NET 站点的 ASP.NET wiki 的一篇不错的文章。

# c# - 模拟与实体框架的关系 (CodeFirst)

> ID：14479655
> 
> 赞同：1
> 
> 时间：2013-01-23T12:23:12.260
> 
> 标签：c#, entity-framework, ef-code-first

我有一个非常混乱的遗留数据库设计，由于数据的当前状态，我无法更改。我想以某种方式“模拟”与数据库中未定义的实体框架的关系，特别是为了能够利用在应用程序的其他区域中运行良好的延迟加载。

结构类似于：

```
class Father {
    [Key]
    public int Id {get;set;} 
    public string someIdentifier {get;set;}
}

class Kid {
    [Key]
    public int Id {get;set;}
    public string SomeIdentifier {get;set;}
    public string Name {get;set;}
} 
```

一个父亲可以有多行 'Kid'，并且必须使用 someIdentifier 字符串来建立关系。此外，孩子们也可以有多排父亲。这种关系没有在数据库中表达，这就是我谈论“仿真”的原因。我不知道是否有可能有一些父亲/孩子类，如：

```
class Father {
    [Key]
    public int Id {get;set;} 
    public string someIdentifier {get;set;}
    public virtual<Kid> Kids {get;set;}
}

class Kid {
    [Key]
    public int Id {get;set;}
    public string SomeIdentifier {get;set;}
    public string Name {get;set;}
    public virtual<Father> Fathers {get;set;}
} 
```

非常感谢！

# python - 使用 minidom.toprettyxml 时出现空行

> ID：14479656
> 
> 赞同：25
> 
> 时间：2013-01-23T12:23:12.610
> 
> 标签：python, xml, pretty-print, minidom

我一直在使用 minidom.toprettyxml 来美化我的 xml 文件。当我创建 XML 文件并使用此方法时，一切正常，但如果我在修改 xml 文件后使用它（例如，我添加了一个额外的节点），然后我将它写回 XML ，我的空行，每次更新，我的空行越来越多...

我的代码：

```
file.write(prettify(xmlRoot))

def prettify(elem):
    rough_string = xml.tostring(elem, 'utf-8') //xml as ElementTree
    reparsed = mini.parseString(rough_string) //mini as minidom
    return reparsed.toprettyxml(indent=" ") 
```

结果：

```
<?xml version="1.0" ?>
<testsuite errors="0" failures="3" name="TestSet_2013-01-23 14_28_00.510935" skip="0"     tests="3" time="142.695" timestamp="2013-01-23 14:28:00.515460">

    <testcase classname="TC test" name="t1" status="Failed" time="27.013"/>

    <testcase classname="TC test" name="t2" status="Failed" time="78.325"/>

    <testcase classname="TC test" name="t3" status="Failed" time="37.357"/>
</testsuite> 
```

有什么建议么 ？

谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-24T04:29:22.817

我在这里找到了解决方案：http: [//code.activestate.com/recipes/576750-pretty-print-xml/](http://code.activestate.com/recipes/576750-pretty-print-xml/)

然后我将其修改为采用字符串而不是文件。

```
from xml.dom.minidom import parseString

pretty_print = lambda data: '\n'.join([line for line in parseString(data).toprettyxml(indent=' '*2).split('\n') if line.strip()]) 
```

输出：

```
<?xml version="1.0" ?>
<testsuite errors="0" failures="3" name="TestSet_2013-01-23 14_28_00.510935" skip="0" tests="3" time="142.695" timestamp="2013-01-23 14:28:00.515460">
  <testcase classname="TC test" name="t1" status="Failed" time="27.013"/>
  <testcase classname="TC test" name="t2" status="Failed" time="78.325"/>
  <testcase classname="TC test" name="t3" status="Failed" time="37.357"/>
</testsuite> 
```

这可能会帮助您更轻松地将其融入您的功能：

```
def new_prettify():
    reparsed = parseString(CONTENT)
    print '\n'.join([line for line in reparsed.toprettyxml(indent=' '*2).split('\n') if line.strip()]) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-04-20T10:46:35.960

我为这个问题找到了一个简单的解决方案，只需更改 prettify() 的最后一行，它将是：

```
def prettify(elem):
rough_string = xml.tostring(elem, 'utf-8') //xml as ElementTree
reparsed = mini.parseString(rough_string) //mini as minidom
return reparsed.toprettyxml(indent=" ", newl='') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-07T22:37:23.800

用它来解决线条问题

`toprettyxml(indent=' ', newl='\r', encoding="utf-8")`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-01T22:35:22.907

我在 Windows 10 机器上遇到了与 Python 2.7 (32b) 相同的问题。问题似乎在于，当 python 将 XML 文本解析为 ElementTree 对象时，它会在每个元素的“文本”或“尾部”属性中添加一些烦人的换行符。

此脚本删除此类换行符：

```
def removeAnnoyingLines(elem):
    hasWords = re.compile("\\w")
    for element in elem.iter():
        if not re.search(hasWords,str(element.tail)):
            element.tail=""
        if not re.search(hasWords,str(element.text)):
            element.text = "" 
```

在“漂亮打印”您的树之前使用此功能：

```
removeAnnoyingLines(element)
myXml = xml.dom.minidom.parseString(xml.etree.ElementTree.tostring(element))
print myXml.toprettyxml() 
```

它对我有用。我希望这个对你有用！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-12T17:04:53.587

这是一个 Python3 解决方案，它摆脱了丑陋的换行问题（大量空白），并且它只使用标准库，与大多数其他实现不同。

```
import xml.etree.ElementTree as ET
import xml.dom.minidom
import os

def pretty_print_xml_given_root(root, output_xml):
    """
    Useful for when you are editing xml data on the fly
    """
    xml_string = xml.dom.minidom.parseString(ET.tostring(root)).toprettyxml()
    xml_string = os.linesep.join([s for s in xml_string.splitlines() if s.strip()]) # remove the weird newline issue
    with open(output_xml, "w") as file_out:
        file_out.write(xml_string)

def pretty_print_xml_given_file(input_xml, output_xml):
    """
    Useful for when you want to reformat an already existing xml file
    """
    tree = ET.parse(input_xml)
    root = tree.getroot()
    pretty_print_xml_given_root(root, output_xml) 
```

[我在这里](https://stackoverflow.com/a/39984422/7487335)找到了如何解决常见的换行问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-02T09:52:20.840

问题是 minidom 不能很好地处理新行字符（在 Windows 上）。无论如何，它不需要它们，因此将它们从刺痛中移除是解决方案：

```
reparsed = mini.parseString(rough_string) //mini as minidom 
```

用。。。来代替

```
reparsed = mini.parseString(rough_string.replace('\n','')) //mini as minidom 
```

但请注意，这是仅适用于 Windows 的解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-18T02:16:32.290

由于 minidom toprettyxml 插入了太多行，我的解决方案是通过检查是否至少有一个“<”字符来删除其中没有有用数据的行（可能有更好的主意）。这对于我遇到的类似问题（在 Windows 上）非常有效。

```
text = md.toprettyxml() # get the prettyxml string from minidom Document md
# text = text.replace('    ', '\t') # for those using tabs :)
spl = text.split('\n') # split lines into a list
spl = [i for i in spl if '<' in i] # keep only element with data inside
text = '\n'.join(spl) # join again all elements of the filtered list into a string

# write the result to file (I use codecs because I needed the utf-8 encoding)
import codecs # if not imported yet (just to show this import is needed)
with codecs.open('yourfile.xml', 'w', encoding='utf-8') as f:
    f.write(text) 
```

# c# - 使用c#将微不足道的代码转换为unicode？

> ID：14479659
> 
> 赞同：0
> 
> 时间：2013-01-23T12:23:25.237
> 
> 标签：c#, punycode

> **可能重复：**
> [C# 中的 Punycode 转换器](https://stackoverflow.com/questions/5125566/punycode-converter-at-c-sharp)

我正在寻找使用 C# 将[微不足道的代码](http://en.wikipedia.org/wiki/Punycode)转换为 unicode。

我确实遇到了一些 js，包括这个名为[“punycode.js”](https://github.com/bestiejs/punycode.js)的 js以及关于 SO 的[这个问题。](https://stackoverflow.com/questions/183485/can-anyone-recommend-a-good-free-javascript-for-punycode-to-unicode-conversion)

但我的要求是使用 C# 做同样的事情，原因是

> 我正在制作WEB API，需要使用C#来做这个转换操作，然后通过API返回数据..所以没有JS

请分享您对此的看法。

# sql-server - XML 嵌入数据源的 SSRS ReportViewer 问题

> ID：14479665
> 
> 赞同：0
> 
> 时间：2013-01-23T12:23:38.710
> 
> 标签：sql-server, xml, reporting-services, rdl

我有 C# (WPF) 应用程序，我想在 ReportViewer 控件中显示 SSRS 报告。本地报告文件中嵌入了 XML 数据源。从 SQL Server Business Intelligence Development Studio 运行时，报表会正确显示。但是当我使用我的应用程序运行时，出现以下错误：

```
A data source instance has not been supplied for the data source '...'. 
```

所以这就是我正在做的事情：

我已经定义了嵌入式 XML 数据，如本教程[从嵌入式 XML 数据定义报表数据](http://msdn.microsoft.com/en-US/library/aa337458%28v=sql.90%29.aspx)集中所述。我有一个名为 的数据源`XmlDataSource_TopCustomers`和一个名为 的数据集`XmlDataSet_TopCustomers`，使用该数据源。我已经在表格和图表中引用了数据集。总的来说，RDL 看起来像这样（当然，这只是必不可少的）：

```
    <报告 xmlns="http://schemas.microsoft.com/sqlserver/reporting/2008/01/reportdefinition" xmlns:rd="http://schemas.microsoft.com/SQLServer/reporting/reportdesigner">
      <身体>
        <报告项目>
          <Tablix 名称="Tablix1">
            <Da​​taSetName>XmlDataSet_TopCustomers</DataSetName>
          </Tablix>
          <图表名称="图表1">
            <Da​​taSetName>XmlDataSet_TopCustomers</DataSetName>
          </图>
        </报告项目>
      </正文>
      <数据源>
        <Da​​taSource Name="XmlDataSource_TopCustomers">
          <连接属性>
            <Da​​taProvider>XML</DataProvider>
            <连接字符串 />
          </连接属性>
          <rd:SecurityType>无</rd:SecurityType>
          <rd:DataSourceID>47833b52-231f-4634-8af4-3c63272b02a7</rd:DataSourceID>
        </数据源>
      </数据源>
      <数据集>
        <数据集名称="XmlDataSet_TopCustomers">
          <查询>
            <Da​​taSourceName>XmlDataSource_TopCustomers</DataSourceName>
            <命令文本><查询>
     <ElementPath>Root /CustomerOrder {@CustomerNo, @CustomerName, @OrdersCount (Integer), @Total(Float), @AveragePerOrder(Float)}</ElementPath>
     <XmlData>
      <根>
    <CustomerOrder CustomerNo="10001" CustomerName="Name 1" OrdersCount="2" Total="5.446740000000000e+003" AveragePerOrder="2.723370000000000e+003" />
    <CustomerOrder CustomerNo="10894" CustomerName="Name 2" OrdersCount="5" Total="3.334750000000000e+003" AveragePerOrder="6.669500000000001e+002" />
    <CustomerOrder CustomerNo="12980" CustomerName="Name 3" OrdersCount="2" Total="2.003290000000000e+003" AveragePerOrder="1.001645000000000e+003" />
      </根>
     </XmlData>
    </Query></CommandText>
            <rd:UseGenericDesigner>真</rd:UseGenericDesigner>
          </查询>
          <字段>...

      </数据集>
      <rd:ReportUnitType>英寸</rd:ReportUnitType>
      <rd:ReportID>02172db8-2a1d-4c35-9555-b37ee6193544</rd:ReportID>
    </报告>

```

此时，IDE 中一切正常。

在我的 C# 应用程序中，我有一个 ReportViewer 和以下代码：

```
Viewer.LocalReport.ReportPath = @"<actualpath>\TopCustomers.rdl"; // actual path is OK
Viewer.RefreshReport(); 
```

然后我明白了

```
A data source instance has not been supplied for the data source 'XmlDataSet_TopCustomers'. 
```

我见过其他人有同样的问题，但在大多数情况下，问题是多个数据源，这里不是这种情况，正如您从上面的 RDL 片段中看到的那样。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:54:48.543

我的问题的答案也可以在这里找到[何时在 RDL 报告上使用 RDLC？](https://stackoverflow.com/questions/1079162/when-to-use-rdlc-over-rdl-reports)在这里[http://www.gotreportviewer.com/](http://www.gotreportviewer.com/)。基本上是这样的：

> 与报表服务器不同，ReportViewer 控件不连接到数据库或执行查询。此外，在本地模式下，唯一可用的导出格式是 Excel、Word 和 PDF。（在远程模式下，报表服务器支持的所有格式都可用。）不能通过添加自定义呈现器或自定义报表项来扩展 ReportViewer 控件。

更多信息可以在这里找到[http://msdn.microsoft.com/en-us/library/ms252109(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms252109(v=vs.80).aspx)。

> 处理 .rdlc 文件的 ReportViewer 控件忽略 RDL 的元素。如果报表定义包含查询，控件将不会处理它。

和

> 将 .rdl 文件转换为 .rdlc 格式时，您必须手动将报表定义中的数据源和查询信息替换为应用程序中提供的数据结构

因此，您必须显式获取数据并提供与 RDL 文件中`ReportViewer`的`ReportDataSource`数据集具有完全相同名称的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:53:23.397

我有一个小型命令行应用程序，它执行类似的操作，但在定义报告路径和使用报告查看器执行任何操作之间，我正在为要运行的报告设置数据源：

```
report.DataSources.Add(new ReportDataSource("DataSet_for_Distribution", table)); 
```

...表是一个数据表。

之后，我以编程方式调用报告渲染方法没有问题。

你能在渲染之前设置一个中断，看看报表实际有哪些数据源吗？

要尝试的另一件事，可能只是您将其格式化（或堆栈格式化）以将其发布到此处，但是当我在报告中嵌入 XML 数据集时，它都使用如下格式：

```
<CommandText>&lt;Query&gt;
    &lt;ElementPath&gt;Root /S  {@OrderDate (Date), @TotalDue (Decimal)} /C {@LastName} &lt;/ElementPath&gt;
    &lt;XmlData&gt;
    &lt;Root&gt;
    &lt;S OrderDate="2003-07-01T00:00:00" SalesOrderNumber="SO51131" TotalDue="247913.9138"&gt;
      &lt;C FirstName="Shu" LastName="Ito" /&gt;
    &lt;/S&gt;
    &lt;S OrderDate="2003-10-01T00:00:00" SalesOrderNumber="SO55282" TotalDue="227737.7215"&gt;
      &lt;C FirstName="Shu" LastName="Ito" /&gt;
    &lt;/S&gt;
    &lt;S OrderDate="2002-07-01T00:00:00" SalesOrderNumber="SO46616" TotalDue="207058.3754"&gt;
      &lt;C FirstName="Jae" LastName="Pak" /&gt;
    &lt;/S&gt;
    &lt;S OrderDate="2002-08-01T00:00:00" SalesOrderNumber="SO46981" TotalDue="201490.4144"&gt;
      &lt;C FirstName="Ranjit" LastName="Varkey Chudukatil" /&gt;
    &lt;/S&gt;
    &lt;S OrderDate="2002-09-01T00:00:00" SalesOrderNumber="SO47395" TotalDue="198628.3054"&gt;
      &lt;C FirstName="Michael" LastName="Blythe" /&gt;
    &lt;/S&gt;
    &lt;/Root&gt;
    &lt;/XmlData&gt;
    &lt;/Query&gt;</CommandText> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:16:40.587

如果数据源具有指定的凭据，我不确定您所说的内容。

这部分在这里：

```
<ConnectionProperties>
            <DataProvider>XML</DataProvider>
            <ConnectString />
          </ConnectionProperties> 
```

一般来说，对于 SQL 数据源，当无法查看其他人或来自应用程序的报告时，这是由于托管服务器假定的凭据与构建应用程序的 IDE 不同。它不知道我的名字是否是 Brett，我的凭据在远程调用它时正在运行它。当您在托管报告的服务器上指定凭据时，通常可以解决此问题。您进入托管报告的服务器，我假设您正在这样做，因为您有一个“rdl”报告与一个 rdlc 报告。找到数据源，单击属性，将设置更改为“使用这些凭据”。提供您知道有效的凭据。

这可能会解决问题。我不确定 Sharepoint 连接和 XML 连接，但这在查看 SQL Server 连接问题时很常见。

# iphone - 如何进行 json 嵌套解析

> ID：14479670
> 
> 赞同：-1
> 
> 时间：2013-01-23T12:23:50.503
> 
> 标签：iphone, objective-c

我已经解析了 json 字符串，然后我又得到了另一个针对关键“数据”的 json 字符串，请指导我如何针对这个 json 字符串获取值，这是 json。我正在尝试使用字典来解析它，但我无法第二次解析它

```
 {
        AC =         (
                        {
                "ac_id" = 1;
                name = Wanted;
            },
                        {
                "ac_id" = 2;
                name = "Not Wanted";
            },
                        {
                "ac_id" = 3;
                name = Available;
            },
                        {
                "ac_id" = 4;
                name = "Not Available";
            }
        );
        Accomodation =         (
                        {
                "accomodation_id" = 1;
                name = Wanted;
            },
                        {
                "accomodation_id" = 2;
                name = Available;
            }
        );
        Accomodationfor =         (
                        {
                "accomodation_for_id" = 1;
                name = "Gents Bachelor";
            },
                        {
                "accomodation_for_id" = 2;
                name = "Ladies Bachelor";
            },
                        {
                "accomodation_for_id" = 3;
                name = Couple;
            },
                        {
                "accomodation_for_id" = 4;
                name = Family;
            },
                        {
                "accomodation_for_id" = 5;
                name = "Paying Guest";
            }
        );
        Accomodationtype =         (
                        {
                name = "Bed Space";
                "type_id" = 1;
            },
                        {
                name = "Studio Room";
                "type_id" = 2;
            },
                        {
                name = "Sharing room in flats/appartments";
                "type_id" = 3;
            },
                        {
                name = "Sharing room in House/Villa";
                "type_id" = 4;
            },
                        {
                name = "Flat/Appartment";
                "type_id" = 5;
            }
        );
        Cities =         (
                        {
                "city_id" = 1;
                "country_id" = 1;
                name = Lahore;
            },
                        {
                "city_id" = 2;
                "country_id" = 1;
                name = Islamabad;
            },
                        {
                "city_id" = 3;
                "country_id" = 1;
                name = Multan;
            },
                        {
                "city_id" = 4;
                "country_id" = 1;
                name = Karachi;
            },
                        {
                "city_id" = 5;
                "country_id" = 1;
                name = Queta;
            },
                        {
                "city_id" = 6;
                "country_id" = 2;
                name = Mumbai;
            },
                        {
                "city_id" = 7;
                "country_id" = 2;
                name = Delhi;
            },
                        {
                "city_id" = 8;
                "country_id" = 4;
                name = Dhaka;
            },
                        {
                "city_id" = 9;
                "country_id" = 5;
                name = "New York";
            },
                        {
                "city_id" = 10;
                "country_id" = 5;
                name = Washington;
            }
        );
        Cooking =         (
                        {
                "cooking_id" = 1;
                name = Wanted;
            },
                        {
                "cooking_id" = 2;
                name = "Not Wanted";
            },
                        {
                "cooking_id" = 3;
                name = Available;
            },
                        {
                "cooking_id" = 4;
                name = "Not Available";
            }
        );
        Countries =         (
                        {
                "country_id" = 1;
                name = Pakistan;
            },
                        {
                "country_id" = 2;
                name = India;
            },
                        {
                "country_id" = 4;
                name = Bangladesh;
            },
                        {
                "country_id" = 5;
                name = USA;
            }
        );
        Furnish =         (
                        {
                "furnish_id" = 1;
                name = "Fully furnished";
            },
                        {
                "furnish_id" = 2;
                name = "Semi furnished";
            },
                        {
                "furnish_id" = 3;
                name = "Not furnished";
            }
        );
        Nationality =         (
                        {
                name = Pakistani;
                "nationality_id" = 1;
            },
                        {
                name = Indian;
                "nationality_id" = 2;
            },
                        {
                name = American;
                "nationality_id" = 3;
            },
                        {
                name = Russian;
                "nationality_id" = 4;
            }
        );
        Power =         (
                        {
                name = "Govt.Authority";
                "power_id" = 1;
            },
                        {
                name = "Building Generator";
                "power_id" = 2;
            }
        );
        Religion =         (
                        {
                name = Islam;
                "religion_id" = 1;
            },
                        {
                name = Christianity;
                "religion_id" = 2;
            },
                        {
                name = Judaism;
                "religion_id" = 3;
            }
        );
    }
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:45:45.743

试试下面这个。然后，

```
SBJSON *json=[[SBJSON alloc] init];
NSDictionary *dict = [json objectWithString:data error:&error];
NSDictionary *datadict=[dict objectForKey:@"data"];

NSDictionary *ac=[datadict objectForKey:@"AC"];
NSDictionary *Accomodation =[datadict objectForKey:@"Accomodation"];
NSDictionary *Accomodationfor =[datadict objectForKey:@"Accomodationfor"];
NSDictionary *Accomodationtype =[datadict objectForKey:@"Accomodationtype"];
NSDictionary *Cities =[datadict objectForKey:@"Cities"];
NSDictionary *Cooking =[datadict objectForKey:@"Cooking"];
NSDictionary *Countries =[datadict objectForKey:@"Countries"];
NSDictionary *Furnish =[datadict objectForKey:@"Furnish"];
NSDictionary *Nationality =[datadict objectForKey:@"Nationality"];
NSDictionary *Power =[datadict objectForKey:@"Power"];
NSDictionary *Religion =[datadict objectForKey:@"Religion"]; 
```

这些都是你的子词典。这些具有子数组。要访问使用数组概念，即“ObjectAtindex”。

# ruby-on-rails - 带导轨的主干

> ID：14479671
> 
> 赞同：0
> 
> 时间：2013-01-23T12:23:55.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3, backbone.js, backbone-views

我从服务中获取数据，然后将数据设置为我的 bean 对象，并希望在我的视图中使用相同的数据，现在在 rails 视图中以表单形式显示它。现在我想使用主干验证这个表单。

我是 Rails 和 Backbone 的新手。

请给我一个关于如何继续进行的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:58:00.070

我想您可能对 Web 应用程序的工作方式感到困惑。Backbone 是一个*客户端*框架；它使用在您的用户浏览器中运行的 Javascript 代码。Rails 是一个*服务器*端框架；它使用在您的服务器上运行的 Ruby 代码。

鉴于所有这些，您的 Backbone 代码和 Rails 代码的定义必须完全分开。两者只能通过两种方式进行通信：

1) 您的 Rails 代码可以将`<script>`标签写入页面（在 .html.erb 文件中）并将变量数据放在那里；例如：

```
<script>
var myVarFromRails = '<%= someRailsVariable %>';
</script> 
```

当它从服务器返回时（即当您查看页面的源代码时）将转换为：

```
<script>
var myVarFromRails = 'foo';
</script> 
```

（假设 'foo' 是 的值`someRailsVariable`）。

2) 您的 Javacript 代码可以向 Rails URL 发出 AJAX 请求，Rails 代码输出的任何内容都会作为对您的 AJAX 请求的响应返回。换句话说，你可以这样做：

```
 $.ajax({url: someRailsUrl, complete: function(response) {
      // whatever the server sent back will be inside the "response" variable
 }}); 
```

除此之外，两者几乎完全分开，如果你想在它们中做同样的事情（例如验证表单），你基本上必须编写两次代码，一次用于 Ruby，一次用于 Javascript。

我说“基本上”是因为 Rails 插件以不同的方式为您执行 #1 和 #2。我不是 Rails 专家，即使我是这样的插件太多了，您也确实需要自己寻找以找出存在的内容以及对您的代码库有意义的内容。

希望有帮助。

*** 编辑 ***

我知道我*刚刚*说过我不会列出库，但后来我意识到如果我至少提供一些帮助您入门会更有帮助。只是不要把这些当作经典；它们目前只是一些流行的库，但它们可能适合也可能不适合您。

1.  [https://github.com/codebrew/backbone-rails](https://github.com/codebrew/backbone-rails)
2.  [https://github.com/meleyal/backbone-on-rails](https://github.com/meleyal/backbone-on-rails)
3.  [https://github.com/aflatter/backbone-rails](https://github.com/aflatter/backbone-rails)
4.  [https://learn.thoughtbot.com/products/1-backbone-js-on-rails](https://learn.thoughtbot.com/products/1-backbone-js-on-rails)
5.  [http://kiranb.scripts.mit.edu/backbone-slides/](http://kiranb.scripts.mit.edu/backbone-slides/)

最后两个实际上不是图书馆，它们是一本书/演示文稿，但我认为它们可能有用。

# c - tar_append_tree 上的 libtar 段错误

> ID：14479673
> 
> 赞同：0
> 
> 时间：2013-01-23T12:23:59.840
> 
> 标签：c, linux, tar

Linux 机器 3.2.0-34-generic，x86_64

来源：libtar 版本：1.2.11-8

```
#include <stdio.h>
#include <libtar.h>
#include <fcntl.h>
int main(void)
{
TAR *pTar;
char *tarFilename = "file.tar";
char *srcDir = "/home/test";
char *extractTo = ".";
tar_open(&pTar, tarFilename, NULL, O_WRONLY | O_CREAT, 0644, TAR_GNU);
tar_append_tree(pTar, srcDir, extractTo);
tar_close(pTar);
return (0);
} 
```

编译为：

gcc main.c -o 运行 -ltar

得到段错误

现在使用“gcc main.c -g3 -O0 -o run -ltar”

```
Program received signal SIGABRT, Aborted.
0x00007ffff7845425 in __GI_raise (sig=<optimized out>)
at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
64  ../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.
(gdb) bt
0  0x00007ffff7845425 in __GI_raise (sig=<optimized out>)
at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
1  0x00007ffff7848b8b in __GI_abort () at abort.c:91
2  0x00007ffff788339e in __libc_message (do_abort=2, 
  fmt=0x7ffff798ae3f "*** %s ***: %s terminated\n")
  at ../sysdeps/unix/sysv/linux/libc_fatal.c:201
3  0x00007ffff7919807 in __GI___fortify_fail (
  msg=0x7ffff798add6 "buffer overflow detected") at fortify_fail.c:32
4  0x00007ffff7918700 in __GI___chk_fail () at chk_fail.c:29
5  0x00007ffff79179e6 in __strncpy_chk (s1=<optimized out>, 
  s2=<optimized out>, n=<optimized out>, s1len=<optimized out>)
  at strncpy_chk.c:34
6  0x00007ffff7bd12ef in th_finish () from /usr/lib/libtar.so.0
7  0x00007ffff7bd0dc1 in th_write () from /usr/lib/libtar.so.0
8  0x00007ffff7bd07f0 in tar_append_file () from /usr/lib/libtar.so.0
9  0x00007ffff7bd3c12 in tar_append_tree () from /usr/lib/libtar.so.0
10 0x00000000004006f1 in main () at main.c:12 
```

所有示例，这里是 fe

[使用 libtar 压缩目录](https://stackoverflow.com/questions/958597/using-libtar-to-compress-a-directory)

似乎工作正常......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:46:12.837

它看起来像一个库缺陷 [https://bugzilla.redhat.com/show_bug.cgi?id=538770](https://bugzilla.redhat.com/show_bug.cgi?id=538770)

您可能需要升级 libtar-devel

# mysql - MySQL 程序中的错误：错误 1064

> ID：14479674
> 
> 赞同：-1
> 
> 时间：2013-01-23T12:24:05.260
> 
> 标签：mysql, while-loop

以下是我的 MySQL 程序。

```
DELIMITER $$

DROP PROCEDURE IF EXISTS  set_dummy_feedback $$
CREATE PROCEDURE set_dummy_feedback ( )
BEGIN
-- First we declare all the variables we will need
DECLARE current_code,current_emp_id,current_subject_id        VARCHAR(150);
DECLARE current_count_facultyfeedback,current_count_studentfeedback     INT     DEFAULT 0;
DECLARE temp_index                                                      INT     DEFAULT 0;
DECLARE gpa                                                             DECIMAL(4,2);
-- flag which will be set to true, when cursor reaches end of table
DECLARE exit_loop BOOLEAN;         

-- Declare the sql for the cursor
DECLARE example_cursor CURSOR FOR
SELECT DISTINCT emp_id,subject_id,code,c
FROM feedback_subjectfaculty

ORDER BY `c` ASC ;
-- Let mysql set exit_loop to true, if there are no more rows to iterate
DECLARE CONTINUE HANDLER FOR NOT FOUND SET exit_loop = TRUE;

-- open the cursor
OPEN example_cursor;

-- marks the beginning of the loop
example_loop: LOOP

-- read the name from next row into the variable l_name
FETCH  example_cursor INTO   current_emp_id,current_subject_id,current_code,current_count_facultyfeedback;

-- check if the exit_loop flag has been set by mysql, 
-- if it has been set we close the cursor and exit 
-- the loop
IF exit_loop THEN
    CLOSE example_cursor;
    LEAVE example_loop;
END IF;
-- fetch data from table feedback_studentfeedback
SELECT SQL_CALC_FOUND_ROWS * FROM `feedback_studentfeedback` where 
fb_subjects_10 like CONCAT("%",current_code,"%") ;
-- save the number of rows fetched in the previous select
SET current_count_studentfeedback = FOUND_ROWS() ;
SET temp_index = current_count_studentfeedback ;
IF temp_index IS NULL
    THEN SET temp_index = 0;
END IF;
IF current_count_facultyfeedback IS NULL
    THEN SET current_count_facultyfeedback = 0;
END IF;

WHILE temp_index > current_count_facultyfeedback DO

    SET gpa = ((round( abs( (rand( ) *100 ) )) %5)*2)+2.12);
    IF gpa > 10.0
        THEN SET gpa = 8.12;
    END IF;

    INSERT INTO tbl2 VALUES             
    ('B.Tech',
    'CSE',
    current_emp_id,
    '0',
    current_subject_id,
    'MONSOON',
    "2012",
    (round( abs( (rand( ) *100 ) )) %5 +1),
    '',
    gpa);
SET temp_index = temp_index - 1;
END WHILE;
END LOOP;
CLOSE example_cursor;

END $$

DELIMITER ; 
```

尽管我尽了最大努力，它仍然给我以下错误：

```
1064 - You have an error in your SQL syntax; check the manual that corresponds to
your MySQL server version for the right syntax to use near 

   '); 
    IF gpa > 10.0
        THEN SET gpa = 8.12;
    END IF;' 
```

我需要最早完成这个，但似乎无法弄清楚出了什么问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:27:20.323

检查这一行：

```
SET gpa = ((round( abs( (rand( ) *100 ) )) %5)*2)+2.12); 
```

您有 6 个左括号和 7 个右括号，导致*语法错误*！

删除最后一个关闭的，因为它似乎不需要

```
SET gpa = ((round( abs( (rand( ) *100 ) )) %5)*2)+2.12; 
```

# javascript - 使用 Angular.js 从现有 HTML 中提取数据

> ID：14479690
> 
> 赞同：6
> 
> 时间：2013-01-23T12:24:40.640
> 
> 标签：javascript, angularjs

[angular.js](http://angularjs.org/)非常适合基于 JavaScript 的复杂客户端 Web 应用程序，但我也考虑将它用于较小的简单 JavaScript 任务。

例如，我有一个包含一些项目的列表：

```
<ul>
    <li data-id="1">Foo</li>
    <li data-id="2">Bar</li>
</ul> 
```

现在我想向 HTML 添加一些按钮，这些按钮应该在一些用户输入后过滤和/或排序列表，这应该是一件容易的事。

有没有办法从现有的 HTML 元素中提取数据以将它们与 angular.js 一起使用？数据需要在 HTML 中，所以搜索引擎也可以得到什么

**为清楚起见进行编辑**：

最终结果是`ul`列表中的数据将被推送到处理列表的控制器模型中。( `[{id:1, text:"Foo"}, {id:2, text:"Bar"}]`)
如果我将更多对象推入模型，列表应显示它们。
如果我对模型应用过滤器，它应该过滤`li`元素。

最好的情况是这样的：

```
<div ng-model="data">
    <ul ng-repeat="object in data | filter:filterCriteria">
        <li data-id="1">Foo</li>
        <li data-id="2">Bar</li>
        <li data-id="{{object.id}}">{{object.text}}</li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:24:23.703

好的。显然，在默认的 Angular.js 应用程序中没有办法做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T15:48:08.700

我在我正在做的一个项目中遇到了同样的问题。我的解决方案是将 html 中的数据添加到我的角度控制器中的变量中，然后隐藏初始 html。此方法将原始列表保留在 html 中，供 SEO、旧浏览器和没有 javascript 的用户使用。它将这个列表替换为为其他用户生成的角度列表。

下面粘贴了一个使用您的代码的工作示例，或者您可以在[此链接](http://work.jtcraddock.ie/angular-example/)中查看它。

我知道这是一个老问题，所以我的回答可能对最初的海报没有帮助。我的解决方案是针对遇到与我们相同的问题的任何其他人。

```
<!doctype html>
<html xmlns:ng="http://angularjs.org" id="ng-app">
  <head>
    <script src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.8/angular.min.js"></script>
    <script>
      function Ctrl($scope) {
        $scope.objects = [];
        $scope.init = function(){
          $("ul.data").hide();
          $("ul.data li").each(function(){
            var $this = $(this);
            var newObject = {
              name: $this.html(),
              id: $this.attr("data-id")
            };
            $scope.objects.push(newObject);
          });
        };
      }
    </script>
  </head>
  <body>
    <div ng-app>
      <div ng-controller="Ctrl" ng-init="init()">
        <ul>
        <li ng-repeat="object in objects" data-id="{{object.id}}">{{object.name}}</li>
        </ul>
        <ul class="data">
            <li data-id="1">Foo</li>
            <li data-id="2">Bar</li>
        </ul>
      </div>
    </div>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-05T09:05:24.090

如果我正确理解了这个问题，您可以将 angular.element().scope 用于有问题的 html 元素。

我将这种方法用于某些无法直接使用 angular 开箱即用处理的交互。

# jquery - 更改属性但不工作的非常简单的代码

> ID：14479691
> 
> 赞同：0
> 
> 时间：2013-01-23T12:24:41.327
> 
> 标签：jquery, attr

单击链接时，我试图更改 div 的标题属性，但它不起作用这是代码

```
<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(e) {
        $("a#change").click(function() {
            $("#city").attr("title", "new title");          
        }); 
    });
</script> 
```

和身体：

```
<a href="#" id="change">change</a>
<div id="city" title=""></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:26:54.060

```
$(document).ready(function(e) {
    $("a#change").click(function(e) {
        e.preventDefault();
        $("#city").attr("title", "new title");           
    }); 
}); 
```

[***工作小提琴***](http://jsfiddle.net/RFADu/2/)

如果要更改元素的任何属性，可以使用`.attr()`或`.prop()`。但在这里我使用了`.attr()`.

有关更多示例，请参阅文档：

[文档](http://api.jquery.com/attr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:28:28.750

尝试以下代码行之一：

```
// this will change the content of the div itself
$("#city").html("new title");

// this will change the title attribute's value
$("#city").attr("title", "new title"); 
```

# symfony - Symfony2 - 无法显示来自实体的值

> ID：14479694
> 
> 赞同：1
> 
> 时间：2013-01-23T12:24:50.157
> 
> 标签：symfony, doctrine

我`findOneBy`在我的实体中找到（使用）单行。这是代码：

```
$userown = $this->getDoctrine()->getRepository('GameShelfUsersBundle:Own')
    ->findOneBy(array(
        'game' => $game->getId(),
        'user' => $em->getRepository('GameShelfUsersBundle:User')->find($session->getId())
    )); 
```

现在我将它作为`userown`. 但是当我尝试使用 twig 打印它时`{{ userown.typo }}`，它会引发错误：

```
An exception has been thrown during the rendering of a template ("Catchable Fatal Error: Object of class Proxies\__CG__\GameShelf\UsersBundle\Entity\OwnState could not be converted to string in D:\!!XAMPP\htdocs\ 
```

我的实体在[这里](http://pastebin.com/RraXX3jA)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T12:32:23.293

Doctrine 会自动解析你的外键，所以`$typo`不是字符串而是对象。正如错误消息告诉您的那样，该对象无法转换为字符串，因此打印失败。

您可以`__toString()`在 Entity 中实现该方法`OwnState`（它应该返回一个字符串），也可以打印 OwnState 对象的实际属性：`{{ userown.type.someProperty }}`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T02:19:14.703

你确定这是正确的

`'game' => $game->getId()`

我认为它应该是游戏对象本身而不是 id

`'game' => $game,`

# ios - 这是一个保留周期吗？

> ID：14479695
> 
> 赞同：3
> 
> 时间：2013-01-23T12:24:52.560
> 
> 标签：ios, objective-c, cocoa-touch

当我在 self 保留的块中调用 self 上的任何内容时，我通常会收到警告：

```
[self.someView doSomething:^{
        self.aVar = @"Hello!";
    }]; 
```

我要做：

```
 __weak SomeObject *weakSelf = self;
[self.someView doSomething:^{
        weakSelf.aVar = @"Hello!";
    }]; 
```

但是，如果我在weakSelf 上调用一个方法，并且该方法使用self，即使我没有收到警告，这是否会导致保留周期？我说的是这个：

```
 __weak SomeObject *weakSelf = self;
[self.someView doSomething:^{
        weakSelf.aVar = @"Hello!";
        [weakSelf aMethod];
    }]; 
```

和 aMethod 使用`self`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T12:42:16.457

只要您[在您的 block 之外声明](https://stackoverflow.com/a/14479824/2998)`weakSelf`，就没有保留周期。

在块内使用对象会隐式增加保留计数。但是你会打电话`aMethod`给*`weakSelf`*而不是`self`，所以保留计数不受影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T12:31:21.143

你应该在你`__weak`的`self`块之外声明：

```
__weak SomeObject *weakSelf = self;
[self.someView doSomething:^{
     weakSelf.aVar = @"Hello!";
     [weakSelf aMethod];
}]; 
```

否则编译器将已经保留 self ，因为它与块一起使用。

甚至更好的是使用该`__block`指令，因为`__weak`仅适用于 iOS 5 及更高版本。

```
__block SomeObject *weakSelf = self;
[self.someView doSomething:^{
     weakSelf.aVar = @"Hello!";
     [weakSelf aMethod];
}]; 
```

关于另一个调用 self 并导致保留的方法，我从未见过这种行为。我总是使用`__block`可能会捕获该指令的指令。

# linux - 如何在 SD 卡上设置写/读保护？

> ID：14479696
> 
> 赞同：0
> 
> 时间：2013-01-23T12:24:56.070
> 
> 标签：linux

在 linux 中，使用 Linux 内置命令，如何在 sd 卡上设置写/读保护？我将通过命令设置保护，例如用户不能在 sd 卡上写东西，因为我已经通过命令启用了唯一的读取保护。

如果您知道没有命令，请随时分享

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:28:41.480

无论如何，使用软件，您只能在一个`filesytem`级别中完成它。如果有人格式化了pendrive，他们将获得他们想做的任何事情的许可。如果在硬件级别上有一些东西可以制作 a `sdcard` `readonly`，你会在这里得到你所问的。

# c# - 使用 Open XML SDK 从 Word 文档中获取特定页面

> ID：14479698
> 
> 赞同：0
> 
> 时间：2013-01-23T12:25:01.040
> 
> 标签：c#, openxml

我想将文档的每一页转换为单独的 word 文档。所以我需要获取文档的每一页。我无法区分开放 xml 格式的页面。所以请让我朝着正确的方向前进。

```
 using (WordprocessingDocument document = WordprocessingDocument.Open("test.docx", true))
        {
            MainDocumentPart mainPart = document.MainDocumentPart;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:54:24.060

根据[此处](http://msdn.microsoft.com/en-us/library/office/documentformat.openxml.wordprocessing.lastrenderedpagebreak.aspx)`LastRenderedPageBreak`的文档，客户端在上次保存时使用来识别页面。它的xml是：

```
<w:lastRenderedPageBreak/> 
```

我认为您可以使用它来检查和分页，除非您正在使用的文档是自动生成的并且没有任何`lastRenderedPageBreak`s。

此外，此方法仅适用于具有单列布局的文档。但是对于具有多列布局的文档，[似乎存在问题。](http://social.msdn.microsoft.com/Forums/en-US/oxmlsdk/thread/3d0a3027-3062-4ecf-9e74-50cea3ae9a60)

# javascript - jQuery只是不工作

> ID：14479703
> 
> 赞同：0
> 
> 时间：2013-01-23T12:25:24.940
> 
> 标签：javascript, jquery, html

出于某种原因，我的 jQuery 脚本只是不想工作，而且它真的很简单，除了实际的 jquery 脚本之外，我已经把所有东西都拿走了，这真的很烦人，请帮忙。谢谢！

```
 <!doctype html>
<html>

    <head>
        <script src="jquery.js"></script>
        <script>
            $("#click").click(function () {
                alert("works!");
            });
        </script>
    </head>

    <body>
        <a href="#" id="click">Button</a>
    </body>

</html> 
```

PS jQuery JS 文件有效。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T12:28:02.853

将您的代码更改为此。它确保在所有 HTML 元素都加载到页面后执行 JavaScript：

```
$(document).ready(function () {
   $("#click").click(function() {
      alert("works!");
   });
}); 
```

但是，**您应该将脚本标签移动到页面底部**，以确保它们不会被阻塞。这也意味着您实际上不需要 $(document).ready 回调。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T12:27:18.667

您需要将代码包装在

```
$(function(){
    // your code here which relies on DOM elements
}); 
```

否则，您的 DOM 尚未加载，事件将不会绑定到元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T12:28:03.463

将您的函数包装到`$(document).ready()`

```
$(document).ready(function(){
    $("#click").click(function() {
        alert("works!");
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T12:29:18.190

`document.ready`像这样在里面添加你的代码

```
$(document).ready(function () {
  $("#click").click(function () {
       alert("works!");
   });
}); 
```

或像这样在文档末尾添加您的代码

```
<body>
   <a href="#" id="click">Button</a>
   // Other elements...
    <script type="text/javascript">
            $("#click").click(function () {
                alert("works!");
            });
    </script>
</body> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T12:34:57.250

```
$(document).ready(function(e) {
//TO DO  your code goes here         
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T13:09:44.197

只需将您的脚本标签更改为“/body”标签。这将让浏览器创建 DOM 并一一读取脚本！干杯!

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-23T12:31:16.757

尝试这个：

```
$("#click").live("click",function() {
    alert("works!");
}); 
```

# node.js - TypeScript 0.8.2 在内部模块中导入 Node.js 模块

> ID：14479708
> 
> 赞同：8
> 
> 时间：2013-01-23T12:25:38.097
> 
> 标签：node.js, module, external, typescript, internal

好的，我可以看到您想在项目中使用内部模块。好吧，TypeScript 0.8.1.1 中有一个解决方法，您可以定义非导出模块（内部）并在其上方添加导入。在 0.8.2 中，这似乎不再起作用了。我在这里看到的唯一选择是完全省略导入语法并为节点模块使用标准要求。我不知道这是否是一个好主意，但请分享您的意见。我知道使用导入语法会使模块成为外部的（语言规范），但在 0.8.1.1 中并非如此，也许是错误？

在 TypeScript 0.8.1.1 中这有效并且在 0.8.2 中不再有效：

```
import path = module('path');
import fs = module('fs');
module SomeNamespace.Controller {
    export class Index {
        ...
    }
} 
```

我可以使用其他内部模块中文件顶部的引用语法来引用包括上述代码的文件，并且通常调用：

```
var ctrl = new SomeNamespace.Controller.Index;
ctrl.index(); 
```

似乎在 0.8.2 中，这是它对内部模块起作用的唯一方法：

```
var path = require('path');
var fs = require('fs');
module SomeNamespace.Controller {
    export class Index {
        ...
    }
} 
```

是否还有其他可能将内部模块与 Node.js 模块混合使用？上面的 require 用法有什么问题吗（它编译并运行正常......）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:21:40.880

我认为 TypeScript 0.8.2 让我们更接近规范。

语法：

```
import x = module('SomeModule'); 
```

特别是`ExternalModuleReference`TypeScript 语言规范中的一个。

将使用以下方法导入内部模块：

```
///<reference path="SomeModule.ts" />
import x = SomeModule; 
```

但是导入内部模块不会`require`在 JavaScript 中生成语句。

取自 TypeScript 语言规范 0.8 - 9.2.2 导入声明

**进口声明：**

```
import Identifier = ModuleReference ; 
```

**模块参考：**

```
ExternalModuleReference
ModuleName 
```

**外部模块参考：**

```
module ( StringLiteral ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:50:52.533

好的，这个错误是由于 TypeScript 的版本造成的。在 TypeScript 0.8.1.1 中导入外部模块的语法必须是：

```
export import <moduleName> = module(“&lt;path>”); 
```

这是最新版本的 TypeScript 中发现的错误，您可以返回到以前的版本或更改语法以使其与 v0.8.1.1 兼容。请记住，这是一个错误，在未来的版本中，您应该能够使用原始语法。

这是这个错误的官方线程：http: [//typescript.codeplex.com/discussions/405800](http://typescript.codeplex.com/discussions/405800)

# ruby-on-rails - 使用重定向，如果多次

> ID：14479713
> 
> 赞同：-1
> 
> 时间：2013-01-23T12:25:42.030
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sorcery

我的问题实际上很简单，我如何进行创建操作来检查用户是否已登录，以及她/他是否被重定向到仪表板，而不是呈现他们有链接和内容的索引页面并注册。还有为什么下面的代码不起作用。

类用户控制器 < 应用控制器

```
def new
  @user = User.new
end

def create
  if current_user.nil?
    redirect_to dplace_index_path
  if current_user
        @user = User.new(params[:user])
      if @user.save
          auto_login(@user)
          redirect_to dplace_index_path
  end
end
end
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:36:29.990

您的代码没有按照您的预期执行，因为 if 语句实际上是嵌套的（您希望`elsif`使用相同的结构 - 或者请参阅下面我建议的修复）。这是您的代码在正确格式化后的实际样子：

```
def create
  if current_user.nil?
    redirect_to dplace_index_path
    if current_user
      @user = User.new(params[:user])
      if @user.save
        auto_login(@user)
        redirect_to dplace_index_path
      end
    end
  end
end 
```

从逻辑上讲，你永远不会陷入第二`if`条语句，因为`current_user`必须要`nil`进入第一条。尝试这样的事情：

```
def create
  if current_user
    @user = User.new(params[:user])
    if @user.save
      auto_login(@user)
      redirect_to dplace_index_path
    end
  else
    redirect_to dplace_index_path
  end
end 
```

我重新排列了代码，但它应该在逻辑上做你现在想要的。我把“快乐路径”放在第一位（`current_user`存在），然后将重定向移动到 else 语句中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:32:46.453

**普通用户认证：**

```
 def create
      user = User.find_by_email(params[:email])
      if user && user.authenticate(params[:password])
        session[:user_id] = user.id
        redirect_to dashboard_url, :notice => "Logged in!"
      else
        flash.now.alert = "Invalid email or password"
        render "new"
      end
    end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:32:47.940

尝试：

```
def create
  if current_user.blank? # .blank? will check both blank and nil
    # logic when user is not logged in
    redirect_to index_path
  else 
    # logic when user is logged in
    redirect_to dashboard_path
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T13:23:28.783

```
def create
  redirect_to dplace_index_path unless current_user
  # no need to check current_user again
  @user = User.new(params[:user])
  if @user.save
    auto_login(@user)
    redirect_to dplace_index_path
  end
end 
```

# ruby - Ruby gem Trollop 中的输出

> ID：14479716
> 
> 赞同：2
> 
> 时间：2013-01-23T12:25:59.407
> 
> 标签：ruby, parsing, gem

这是 Trollop 的示例输出，Ruby 选项解析 gem v0.0.1a

```
Options:
      --input, -i <s>:   Input file location (required)
     --output, -o <s>:   Output file destination (required)
      --cores, -c <i>:   Number of cores (default: 4)
  --threshold, -t <f>:   Threshold (default: 1.0)
        --version, -v:   Print version and exit
           --help, -h:   Show this message 
```

它是可用的最佳选项解析器，因为它小而整洁，但我真的不喜欢帮助消息的中心对齐方式。我以前从未在我使用过的程序中看到过这种输出，我更希望它把选项对齐到左边，然后在第二列中将描述放在左边。有可能让它做到这一点吗？干杯

编辑：在最新版本的 trollop 中，现在使用左对齐格式。这很棒！虽然我确实在短时间内习惯了中心对齐。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T15:56:07.723

没有。Trollop 现在是 2.0.0 版，帮助格式仍然在代码中硬编码。如果你想增加输出格式，你可以破解[trollop.rb 。](https://gitorious.org/trollop/mainline/source/43d5a92971f41079c77f4b0b13bcc8d25dcba197%3alib/trollop.rb#L425)

# c# - 如何以编程方式安全关闭 Google Chrome

> ID：14479724
> 
> 赞同：8
> 
> 时间：2013-01-23T12:26:14.507
> 
> 标签：c#, .net, google-chrome

如何通过 C# 安全地关闭谷歌浏览器？我可以杀死 chrome 进程，但在这种情况下，Google Chrome 会在下次运行时报告 appcrash。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-23T12:49:18.763

您可以使用鲜为人知的[UI 自动化 API](http://msdn.microsoft.com/en-us/library/ms747327.aspx)，如下所示：

```
static void CloseAllChromeBrowsers()
{
    foreach (Process process in Process.GetProcessesByName("chrome"))
    {
        if (process.MainWindowHandle == IntPtr.Zero) // some have no UI
            continue;

        AutomationElement element = AutomationElement.FromHandle(process.MainWindowHandle);
        if (element != null)
        {
            ((WindowPattern)element.GetCurrentPattern(WindowPattern.Pattern)).Close();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T12:29:03.417

您可以尝试使用`Process`该类确定窗口句柄并向窗口发送`WM_CLOSE`消息。

# c# - 序列化问题

> ID：14479726
> 
> 赞同：0
> 
> 时间：2013-01-23T12:26:23.103
> 
> 标签：c#, design-patterns, serialization

我有序列化的问题。我知道方法不能被序列化是有充分理由的，所以我创建了一个工厂类来将我现有的类转换为更易于管理的类。

这是原始类：

```
using Assets.Components;
using Assets.Data;
using IO.Components;
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Web;

namespace Assets
{
[Serializable]
public class Asset
{

    #region Fields

    Metadata _metadata;
    string _fileName;
    string _companyId;

    #endregion

    #region Properties

    [Required]
    public string DisplayName { get; set; }
    public string Description { get; set; }
    public string Tags { get; set; }

    public int Id { get; set; }
    public int CategoryId { get; set; }
    public AssetType Type { get; set; }
    public int LanguageId { get; set; }
    public int StatusId { get; set; }

    public DateTime DateCreated { get; set; }
    public long DateCreatedMilliseconds { get { return DateCreated.ToJavaScriptMilliseconds(); } }

    public int Views { get; set; }
    public int Downloads { get; set; }

    public string ThumbNail { get; set; }

    public string Filename
    {
        set { _fileName = value; }
    }

    [Required]
    public string CompanyId
    {
        set { _companyId = value; }
    }

    public string GetBaseDirectory
    {
        get { return "/Public/Uploads/" + this._companyId + "/0"; }
    }

    public double Rating
    {
        get
        {
            List<int> Score = new List<int>();

            foreach (IRating oRating in this.Ratings())
            {
                Score.Add(oRating.Score);
            }

            return (Score.Count > 0) ? Score.Average() : 0;
        }
    }

    public Metadata Metadata
    {
        get
        {
            if (_metadata == null)
            {
                _metadata = new Metadata(this.Id);
                if (_metadata.AssetId == 0)
                {
                    try
                    {
                        if (GetFilename() != null)
                        {
                            string path = System.IO.Path.Combine(HttpContext.Current.Server.MapPath(this.GetBaseDirectory), GetFilename());
                            if (!System.IO.File.Exists(path))
                                _metadata = new Metadata();
                            else
                            {
                                _metadata = MetadataExtractor.Create(path, this.Id);
                                _metadata.save();
                            }
                        }
                        else
                        {
                            _metadata = new Metadata();
                        }
                    }
                    catch
                    {
                        _metadata = new Metadata();
                    }
                }
            }
            return _metadata;
        }
    }

    public bool IsConverted { get; set; }
    public string UserId { get; set; }

    public DateTime DateModified { get; set; }

    public long DateModifiedMilliseconds { get { return DateCreated.ToJavaScriptMilliseconds(); } }

    public string Culture { get; set; }
    public string Language { get; set; }

    public string UserName { get; set; }
    public string Email { get; set; }

    public int CategoryCount { get; set; }
    public int AssetCount { get; set; }

    public bool IgnoreRights { get; set; }

    #endregion

    #region Contructors

    /// <summary>
    /// Default constructor
    /// </summary>
    public Asset()
    {
    }

    /// <summary>
    /// Get's the asset from the database, but set's the status to the profiles Requires Approval state.
    /// </summary>
    /// <param name="Id">Asset Id</param>
    /// <param name="IsViewing">Boolean to update the reports table</param>
    /// <param name="IsDownloading">Boolean to update the reports table</param>
    public Asset(int Id, string UserId, string CompanyId, bool IsViewing, bool IsDownloading)
    {
        try
        {
            Asset oAsset = AssetData.GetAsset(Id, IsViewing, IsDownloading, UserId, CompanyId);          

            // Assign the values to this class
            this.Id = oAsset.Id;
            this.DisplayName = oAsset.DisplayName;

            this.IsConverted = oAsset.IsConverted;
            this.StatusId = oAsset.StatusId;
            this.Type = oAsset.Type;

            this.UserId = oAsset.UserId;
            this.UserName = oAsset.UserName;
            this.CompanyId = oAsset.GetCompanyId();

            this.Description = oAsset.Description;
            this.Tags = oAsset.Tags;

            this.LanguageId = oAsset.LanguageId;
            this.Culture = oAsset.Culture;
            this.Language = oAsset.Language;

            if (oAsset.ThumbNail != null) this.ThumbNail = oAsset.ThumbNail;
            this.Filename = oAsset.GetFilename();
            if (oAsset.Views != 0) this.Views = oAsset.Views;
            if (oAsset.Downloads != 0) this.Downloads = oAsset.Downloads;
        }
        catch (Exception ex)
        {
            Stars.BLL.Error.Handling.LogError("Skipstone", "Asset", "Asset", ex.Message, ex.ToString()); // Record our error
        }
    }

    /// <summary>
    /// Used for executing some of the public methods
    /// </summary>
    /// <param name="Id">Id of the asset to retrieve</param>
    /// <param name="CompanyId">The CompanyId of the company for the User</param>
    public Asset(int Id, string CompanyId)
    {
        this.Id = Id;
        this.CompanyId = CompanyId;
    }

    #endregion

    #region Public methods

    public string GetCompanyId()
    {
        return _companyId;
    }

    public string GetFilename()
    {
        return _fileName;
    }

    public string GetThumbnail()
    {
        return this.GetBaseDirectory + "/" + this.ThumbNail;
    }

    public string GetSmallThumbnail()
    {
        return this.GetBaseDirectory + "/sml_" + this.ThumbNail;
    }

    public Collection<IRating> Ratings()
    {
        Collection<IRating> oRatings = new Collection<IRating>();
        try
        {
            oRatings = RatingData.get(this.Id);
        }
        catch
        {
            // record our error
        }
        return oRatings;
    }

    public Collection<IComment> Comments()
    {
        Collection<IComment> oComments = new Collection<IComment>();
        try
        {
            oComments = CommentData.getAssetComments(this.Id);
        }
        catch (Exception ex)
        {
            // record our error
        }
        return oComments;
    }

    public void SaveMetadata()
    {
    }

    public Collection<GenericType> Categories()
    {
        return MiscellaneousManager.AssetCategories(this.Id, GetCompanyId());
    }

    public void Save()
    {
        if (this.Id > 0)
        {
            AssetData.update(this);
        }
        else
        {
            Asset oAsset = AssetData.create(this);
            this.Id = oAsset.Id;
            this.DisplayName = oAsset.DisplayName;
            this.Type = oAsset.Type;

            this.UserId = oAsset.UserId;
            this.CompanyId = oAsset.GetCompanyId();

            this.Description = oAsset.Description;
            this.Tags = oAsset.Tags;

            this.LanguageId = oAsset.LanguageId;
            this.Culture = oAsset.Culture;
            this.Language = oAsset.Language;

            if (oAsset.ThumbNail != null) this.ThumbNail = oAsset.ThumbNail;
            this.Filename = oAsset.GetFilename();
            if (oAsset.Views != 0) this.Views = oAsset.Views;
            if (oAsset.Downloads != 0) this.Downloads = oAsset.Downloads;
        }
    }

    public void delete()
    {
        AssetData.delete(this.Id);
        AssetManager.RemoveFromCache(this);
    }

    #endregion

}
} 
```

这是我的工厂方法：

```
 private static SerialisedAsset AssetFactory(Assets.Asset Object)
    {
        SerialisedAsset FactoryObject = new SerialisedAsset()
        {
            Id = Object.Id,
            Name = Object.DisplayName,
            UserId = Object.UserId,
            UserName = Object.UserName,
            CompanyId = Object.GetCompanyId(),
            Description = Object.Description,
            Tags = Object.Tags,
            DateCreated = Object.DateCreated,
            Path = Object.GetBaseDirectory,
            FileName = Object.GetFilename(),
            ThumbnailName = Object.ThumbNail
        };

        return FactoryObject;
    } 
```

这是我的 audittrailmanager 课程的一部分：

```
using Assets;
using Core;
using Reports.Objects;
using System;
using System.IO;
using System.Xml.Serialization;

namespace Reports.Components
{
public static class AuditTrailManager
{

    #region Public methods

    public static Audit AuditTrailFactory(Profile Profile, Object Object, Event Event)
    {
        Audit Audit = new Audit(SerializeObject(Object))
        {
            UserId = Profile.UserId,
            UserName = Profile.UserName,
            CompanyId = Profile.CompanyId,
            ObjectName = GetObjectNameFromType(Object.GetType().ToString()),
            Event = Event
        };

        return Audit;
    }

    #endregion

    #region Private methods

    private static string GetObjectNameFromType(string Type)
    {
        switch (Type)
        {
            case "Assets.Asset": return "Asset";
            case "Core.SiteSetting": return "CompanySettings";
        }

        return "";
    }

    private static string SerializeObject(Object Object)
    {
        string ObjectType = Object.GetType().ToString();

        switch (ObjectType)
        {
            case "Assets.Asset": return Serialize(AssetFactory((Asset)Object));
        }

        return ""; // If we fail
    }

    private static string Serialize(Object Object)
    {
        XmlSerializer ser = new XmlSerializer(Object.GetType());
        using (StringWriter Xml = new StringWriter())
        {
            ser.Serialize(Xml, Object);
            return (Xml.ToString());
        }
    }

    private static SerialisedAsset AssetFactory(Assets.Asset Object)
    {
        SerialisedAsset FactoryObject = new SerialisedAsset()
        {
            Id = Object.Id,
            Name = Object.DisplayName,
            UserId = Object.UserId,
            UserName = Object.UserName,
            CompanyId = Object.GetCompanyId(),
            Description = Object.Description,
            Tags = Object.Tags,
            DateCreated = Object.DateCreated,
            Path = Object.GetBaseDirectory,
            FileName = Object.GetFilename(),
            ThumbnailName = Object.ThumbNail
        };

        return FactoryObject;
    }

    #endregion

}
} 
```

我要做的是创建一个审计跟踪，记录我正在处理的对象（在本例中是资产），我正在序列化该类并将其插入数据库以用于报告等。

我的问题是；这是这样做的方法吗？有没有更好的办法？

# android - 从android中的不同活动停止并取消绑定服务

> ID：14479727
> 
> 赞同：2
> 
> 时间：2013-01-23T12:26:26.730
> 
> 标签：android, android-activity, android-service, android-preferences

我在我的偏好活动中提供退出选项。在该选项中，我想取消绑定并停止服务。但是我的应用程序关闭但服务没有停止。我正在从另一个活动启动和绑定服务。在偏好活动中，我没有开始或绑定。

这是我的偏好活动代码：

```
Preference exit = findPreference("Exit");
        exit.setOnPreferenceClickListener(new OnPreferenceClickListener() {

            public boolean onPreferenceClick(Preference preference) {
                // TODO Auto-generated method stub
                new AlertDialog.Builder(SettingsActivity.this)
                .setTitle("Exit :")
                .setMessage("Are You Sure??")
                .setNegativeButton("No", null)
                .setPositiveButton("Yes",
                        new Dialog.OnClickListener() {
                            public void onClick(DialogInterface dialog, int which) {

                                stopService(new Intent(getApplicationContext(), MyService.class));                              
                                Intent intent = new Intent(Intent.ACTION_MAIN);
                                intent.addCategory(Intent.CATEGORY_HOME);
                                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                                startActivity(intent);
                            }
                        })
                .show();
                return true;
            }
        }); 
```

但是 myservice 并没有停止。我如何停止我的服务？？请帮帮我..

编辑 ：

出现错误

```
01-24 10:20:30.699: E/AndroidRuntime(18503): FATAL EXCEPTION: main
01-24 10:20:30.699: E/AndroidRuntime(18503): java.lang.IllegalArgumentException: Service not registered: com.androidhive.musicplayer.SettingsActivity$1@405c7af8
01-24 10:20:30.699: E/AndroidRuntime(18503):    at android.app.LoadedApk.forgetServiceDispatcher(LoadedApk.java:891)
01-24 10:20:30.699: E/AndroidRuntime(18503):    at android.app.ContextImpl.unbindService(ContextImpl.java:901)
01-24 10:20:30.699: E/AndroidRuntime(18503):    at android.content.ContextWrapper.unbindService(ContextWrapper.java:352) 
```

我已更改的代码：

```
getApplicationContext().stopService(new Intent(SettingsActivity.this, MyService.class));                    getApplicationContext().unbindService(serviceConnection); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T13:14:51.120

通常服务会在您的`onPause`最后*一个*活动中停止。`onDestroy`

 *我在我的一个项目中使用此代码：

```
@Override
protected void onDestroy() {
    super.onDestroy();
    getApplicationContext().unbindService(service);
} 
```

此代码在退出我的应用程序时退出我的服务。*

# scala - 例外应该是案例类吗？

> ID：14479732
> 
> 赞同：48
> 
> 时间：2013-01-23T12:26:43.687
> 
> 标签：scala, exception, case-class

我的自定义异常类型应该是`case class`es 吗？

从好的方面来说，我得到了提取器。

不利的一面是，我得到了不正确的相等语义。但我可以通过覆盖来避免这种情况`equals`。

那么，在概念层面上，将它们变成`case class`es 有意义吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-23T12:52:38.183

这当然是非常主观的，但在我看来，将异常类作为案例类是一种很好的做法。主要理由是，当您捕获异常时，您正在进行模式匹配，并且案例类更适合用于模式匹配。这是一个在使用案例类异常时利用在 catch 块中使用模式匹配的全部功能的示例：

```
object IOErrorType extends Enumeration {
  val FileNotFound, DeviceError, LockedFile = Value
}
case class IOError(message: String, errorType: IOErrorType.Value) extends  Exception(message)

def doSomeIO() { throw IOError("Oops, file not found!", IOErrorType.FileNotFound)  }

try {
  doSomeIO()
} catch {
  case IOError( msg, IOErrorType.FileNotFound ) =>
    println("File not found, please check the path! (" + msg + ")")
} 
```

在这个例子中，我们只有一个异常，但它包含一个`errorType`字段，当您想知道发生的确切错误类型时（通常这是通过异常层次结构建模的，我并不是说这是更好或更坏，示例只是说明性的）。因为这`IOError`是一个案例类，我可以简单地`case IOError( msg, IOErrorType.FileNotFound )`只为错误类型捕获异常`IOErrorType.FileNotFound`。如果没有我们通过案例类免费获得的提取器，我将不得不每次都捕获异常，然后重新抛出以防我实际上不感兴趣，这肯定更冗长。

你说案例类给你不正确的相等语义。我不这么认为。**你**，作为异常类的编写者来决定什么相等语义是有意义的。毕竟当你捕获一个异常时，catch 块是你决定捕获哪些异常的地方，通常仅基于类型，但也可以基于其字段的值或其他值，如我的示例所示。关键是异常类的相等语义与此无关。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-23T13:35:03.713

通过创建异常案例类而丢失的一个常见习惯用法是创建异常的子类层次结构的模式，其中子类化用于指示错误条件的更大特异性。案例类不能被子类化。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-04-14T11:06:00.247

我喜欢 Régis Jean-Gilles 的回答。但是，如果您有充分的理由不创建案例类（参见 Dave Griffith 的回答），您可以使用普通类归档与上述示例相同的内容并取消应用：

```
object IOErrorType extends Enumeration {
  val FileNotFound, DeviceError, LockedFile = Value
}
object IOError {
  def unapply(err: IOError): Option[(String, IOErrorType.Value)] = Some(err.message, err.errorType)
}
class IOError(val message: String, val errorType: IOErrorType.Value) extends  Exception(message)

def doSomeIO() { throw new IOError("Oops, file not found!", IOErrorType.FileNotFound) }

try {
  doSomeIO()
} catch {
  case IOError( msg, IOErrorType.FileNotFound ) =>
    println("File not found, please check the path! (" + msg + ")")
} 
```

# c# - 像asp的grid一样渲染时间改变griddata

> ID：14479733
> 
> 赞同：0
> 
> 时间：2013-01-23T12:26:50.253
> 
> 标签：c#, wpf, windows, rendering

我只想知道，当数据从 DataSet 在 WPF DataGrid 中呈现时，是否可以对数据进行处理。我已经将数据存储在矩阵形式的数据库中，我想直接将它附加到数据网格，但是当每个单元格的渲染过程正在进行时，我会选择它并检查，因此我想设置背景颜色，前景该单元格的颜色或任何设计。

请告诉我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:30:57.360

如果要设置单元格的颜色，则需要使用样式。

这篇文章很好地涵盖了它：

[http://blogs.msdn.com/b/jaimer/archive/2009/01/20/styling-microsoft-s-wpf-datagrid.aspx](http://blogs.msdn.com/b/jaimer/archive/2009/01/20/styling-microsoft-s-wpf-datagrid.aspx)

# video - 视频在 IE 中播放不好

> ID：14479738
> 
> 赞同：0
> 
> 时间：2013-01-23T12:26:59.187
> 
> 标签：video, html5-video, flash, mp4, video.js

嗨，我有一个视频[在](http://thesuperheroblueprint.com)IE 和 Mozilla 中播放良好，但是当我在 IE 中打开页面并播放视频时.. 视频播放效果不如在 chrome 中播放的视频？我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:37:59.477

我遇到了同样的问题，从今天（2013 年 1 月 24 日）开始安装，与 IE9 播放 MP4 文件有关。该视频在 Chrome、Firefox 和 Safari 上播放良好，但不是从 IE 开始。

# c - 确定您连接的交换机端口的mac地址

> ID：14479742
> 
> 赞同：1
> 
> 时间：2013-01-23T12:27:08.570
> 
> 标签：c, tcp-ip

是否可以弄清楚您连接的**交换机端口的mac地址是什么？**

我正在查看tcpdump，但似乎在每个以太网数据包中都有发送者和目的地的MAC，而不是它传递的那些MAC。但我正在寻找找出您**直接**连接的交换机**MAC的方法。**

 **我应该是一个通用的解决方案。例如托管的*CISCO*交换机，还不是解决方案。

我可以使用 C/C++ 或任何其他语言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:42:43.803

阅读： [http ://en.wikipedia.org/wiki/Network_switch#Layer_1_.28Hubs_versus_higher-layer_switches.29](http://en.wikipedia.org/wiki/Network_switch#Layer_1_.28Hubs_versus_higher-layer_switches.29)

在普通交换机中，它们没有 MAC 地址。除非您使用的是桥梁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:38:54.607

TCP/IP 在[网络层抽象](http://en.wikipedia.org/wiki/Internet_protocol_suite)中高于交换机。具体来说，它们分别位于传输层和 Internet 层（传输层位于 Internet 之上）。您需要检查原始以太网数据包以获取链路层数据。**

# windows-phone-7 - Windows Phone 8 中未触发诺基亚 Exchang 广告事件

> ID：14479743
> 
> 赞同：0
> 
> 时间：2013-01-23T12:27:08.557
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone

当我使用诺基亚 Exchange Add SDk 时，我尝试在它触发时使用 add 事件，我在文档中发现：

```
public MainPage()
        {
            InitializeComponent();
            InneractiveAd.AdClicked += new 
            InneractiveAd.IaAdClicked(InneractiveAd_AdClicked);
        }

void InneractiveAd_AdClicked(object sender)
{
 System.Diagnostics.Debug.WriteLine("InneractiveAd: AdClicked");
} 
```

当我单击添加时，什么都没有发生，并且在调试此方法的无入口时，这意味着该事件没有触发。

那么这段代码有什么错误吗？还是有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:13:44.693

最近发布了适用于 Windows Phone 8 的新版本 inneractiveAdSDK-Nokia-WP8-v1.1.2。更新您的 SDK，它应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T20:26:51.323

试试这个：

```
public MainPage()
{
   InitializeComponent();
   InneractiveAd.AdClicked += InneractiveAd_AdClicked;
}

void InneractiveAd_AdClicked(object sender, EventArgs e)
{
   System.Diagnostics.Debug.WriteLine("InneractiveAd: AdClicked");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T08:18:50.867

如发行说明中所述，这已在 v1.1.2 中解决：

inneractiveAdSDK-Nokia-WP8-v1.1.2 - 发布日期：1/29/2013 - 支持 WP 8.0 - 添加广告尺寸支持的可选参数。Banner 的必需/可选参数仅与 C# 相关。- 额外的广告对齐可选参数。 **- 事件不再是静态的。- 事件错误已解决。**
- 添加了验证处理。- 改进刷新广告处理。- 性能得到改善。

# android - Android：片段更改时如何重新创建操作栏

> ID：14479749
> 
> 赞同：24
> 
> 时间：2013-01-23T12:27:30.340
> 
> 标签：android, android-actionbar, swipe

我有一个显示一些片段的活动。Activity 视图仅包含使用自定义 FragmentPagerAdapter 初始化的 ViewPager。此适配器提供 3 个片段之间的导航。

除了操作栏外，一切似乎都很好。

我在片段中覆盖 onCreateOptionsMenu() 方法，为任何片段创建单独的操作栏：

```
    @覆盖
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater)
    {
        super.onCreateOptionsMenu(menu, inflater);
        menu.clear();

 `//fragment specific menu creation
    }` 

当我滑动时，会出现新的片段，但操作栏会保持几秒钟不变。可能在几秒钟后调用此方法并更改操作栏。

在滑动完成后一段时间内更改操作栏时，这看起来很糟糕。如何在开始滑动之前立即重新创建操作栏？   

            回答 #1

赞同：26

时间：2013-01-23T13:14:15.713

您可以通过调用要求 android 在自动执行之前重新创建操作栏`invalidateOptionsMenu();`

在靠近更改片段的位置执行此操作，以尝试减少片段和操作栏更改之间的“滞后”。

**编辑**

一个完整的解决方案可能如下所示：

```
class activity extends Activity{

private void switchFragment(){

...do fragment changing stuff

activity.invalidateOptionsMenu();

}

}

class someFragment extends Fragment{

@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater)
{
    super.onCreateOptionsMenu(menu, inflater);
    menu.clear();

    //fragment specific menu creation
}

} 
```

无论哪个片段在

```
activity.invalidateOptionsMenu(); 
```

然后将调用其

```
 onCreateOptionsMenu 
```

你可以在那里创建片段特定的菜单

            回答 #2

赞同：4

时间：2013-05-18T08:16:49.263

可以通过实现 onCreateOptionsMenu 并在每个片段的 onAttach 回调中调用 setHasOptionsMenu(true) 并相应地更改操作来完成。

显示没有任何动作的片段 setHasOptionsMenu(false)

            回答 #3

赞同：2

时间：2014-08-31T15:43:47.070

如果您使用的是 ActionBar 选项卡，您希望看到以下答案：

[如何动态更改操作栏操作？](https://stackoverflow.com/questions/8279981/how-can-i-change-action-bar-actions-dynamically)

            回答 #4

赞同：1

时间：2013-01-27T10:17:12.830

最后我找不到任何合理的方法来实现这一点。

最好的办法是让操作栏成为片段的一部分，而不是活动，但这是不可能的。

我最终在滑动开始时清除操作栏菜单和标题（您可以在 PageView 中设置特殊侦听器）并在滑动完成和显示新片段时再次设置菜单和标题。

In 有一些时间延迟，并且在滑动过程中操作栏看起来很空，但这是你能做的最好的事情。

Android API 是...

```

# sql-server - SQL server 中的 sum in case 与 case in sum ？

> ID：14479752
> 
> 赞同：1
> 
> 时间：2013-01-23T12:27:39.120
> 
> 标签：sql-server, sql-server-2008

写作之间有什么区别：

```
select
...,
mySum= CASE 
           WHEN i  IS NULL THEN 0 ELSE  SUM(i) 
       END  
... 
```

对比

```
select
...,
mySum=  SUM( CASE WHEN i IS NULL THEN 0  ELSE i
             END
           ) 
... 
```

还是只是 100% 相同（*逻辑上和陷阱......*）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:38:18.890

在我的测试数据上，我得到了相同的结果，并且执行计划几乎相同：

![在此处输入图像描述](../Images/dde291d59a4f835defa776a15031d5b1.png)

所有相同的成本，只是两个操作相反。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:46:56.213

我认为逻辑上没有区别。但我认为在这种情况下您不需要检查 null，因为[聚合函数会忽略 null](http://msdn.microsoft.com/en-us/library/ms173454.aspx)

`case`顺便说一句，您可以简化`isnull`如下。（**编辑：**错误添加`sum(isnull(i,0))`更改为`Isnull(sum(i),0)`）

```
select Col1, Isnull(sum(i),0) as mySum
from yourTable
group by Col1 
```

# android - 将 PDF 文件的内容读入 webView

> ID：14479754
> 
> 赞同：1
> 
> 时间：2013-01-23T12:27:40.530
> 
> 标签：android, webview

在我的项目中，我必须将位于 assets 文件夹中的 PDF 的内容加载到 WebView 上。可以直接通过将内容读取到 WebView 上来实现。我搜索了很多，我发现我需要使用第三方PDF阅读器实现一样吗？

如果是这样，请给我 GITHUB 的 PDF 阅读器的源链接。我找不到它。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:32:50.180

如果您在 webview 中加载 pdf，则 unicode 文本类型或图像将不可见。所以你要

去 OCR 工具。

使用一组库和 sdk

这可能会帮助你

[http://www.qoppa.com/android/pdfsdk/](http://www.qoppa.com/android/pdfsdk/)

[http://code.google.com/p/droidreader/](http://code.google.com/p/droidreader/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:46:42.377

mupdf 是性能方面最好的库，到目前为止我发现的所有库，您也可以在您的应用程序中使用它。但它需要ndk的知识。

[点击这里了解更多描述](https://github.com/muennich/mupdf/tree/master/android)

# dart - JsonObject 打破了新的 Dart 库？

> ID：14479756
> 
> 赞同：1
> 
> 时间：2013-01-23T12:27:51.760
> 
> 标签：dart

看起来今天早上的新 Dart 库正在破坏 JsonObject 库。运行现有代码时，我得到的输出是：

```
Exception: NoSuchMethodError : method not found: 'JSON'
Receiver: Type: class 'JsonObject' 
```

如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:11:44.423

这是因为 JSON 库现在具有`stringify`和`parse`作为顶级对象。

我已更新[JsonOjbect](https://github.com/chrisbu/dartwatch-JsonObject)以使用最新版本的编辑器 (17328)。

不幸的是，这也意味着我必须删除`objectToJson`顶级函数，这需要一些工作才能使其与新的未来语法一起工作。

尝试`pub update`拉入最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:17:50.130

好吧，删除 pubspec.lock 并运行 pub update 解决了这个问题。必须与 Dart 编辑器（版本 0.3.1_r17328）的更新版本相关。

# javascript - Javascript 对不同的输出使用不同的配置

> ID：14479766
> 
> 赞同：0
> 
> 时间：2013-01-23T12:28:03.980
> 
> 标签：javascript

嗨，我现在是一个彻头彻尾的白痴，我盯着这些东西看了好几个小时，现在不知道我在做什么。

基本上在我将在这里命名为 product.js 的一个中，我修复了全局变量

```
var AREA_MAX_MAXX = 1000;
var AREA_MAX_MINX = 60; 
```

然后这些将在另一个 js 中使用，我将使用以下内容调用 library.js：

```
this.area_max_maxx = AREA_MAX_MAXX;
this.area_max_miny = AREA_MAX_MINX;

this.calcPos = function() {
  var areaMaxWidth = this.area_max_maxx - this.area_max_minx; 
```

我想要做的是删除全局变量，而是用数组设置它，这样无论数组是什么值都将被设置为`area_max_maxx`

有人可以帮我吗？？？我说得有道理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:43:49.783

你的意思是这样吗？

```
this.minAndMax = [60, 1000];
this.calcPos = function() {
  var areaMaxWidth = this.minAndMax[1] - this.minAndMax[0];
} 
```

我建议改为使用对象：

```
this.areaParameters = {min: 60, max: 1000}
this.calcPos = function() {
  var areaMaxWidth = this.areaParameters.max - this.areaParameters.min;
} 
```

稍后，您可以说`this.areaParameters.max = 3000`，下次`calcPos`被调用时，它将使用新值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:33:02.273

这是不可能的。您在这里传递的不是参考值：

```
this.area_max_maxx = AREA_MAX_MAXX; 
```

# ruby-on-rails - I18n.locale 的 kaminari page_entires_info 错误

> ID：14479769
> 
> 赞同：2
> 
> 时间：2013-01-23T12:28:15.040
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, kaminari

我使用[https://github.com/amatsuda/kaminari](https://github.com/amatsuda/kaminari)对我的 Rails 项目进行分页。

在此页面[https://github.com/amatsuda/kaminari/issues/257](https://github.com/amatsuda/kaminari/issues/257)上显示此助手的问题。

我已经检查了从 master 分支添加到我的 gem 文件 kaminari ：

```
gem 'kaminari', :git => 'git://github.com/amatsuda/kaminari.git' 
```

我也检查了最后一个版本`kaminari 0.14.1`，但它仍然没有翻译成另一种语言：

我可以在我的视图中看到错误：

`Display Entries`和`translation missing: es.helpers.page_entries_info.more_pages.display_entries`

我已添加到我`es.yml`的下一个代码中：

```
helpers:
    page_entries_info:
      one_page:
        display_entries:
          zero: "Ningún %{entry_name} encontrado"
          one: "Mostrando <b>1</b> %{entry_name}"
          other: "Mostrando <b>todos %{count}</b> %{entry_name}"
      more_pages:
        display_entries: "Mostrando %{entry_name} <b>%{first}&nbsp;-&nbsp;%{last}</b> de <b>%{total}</b> en total"
  views:
    pagination:
      first: "&laquo; Primero"
      last: "Último &raquo;"
      previous: "&lsaquo; Anterior"
      next: "Siguiente &rsaquo;"
      truncate: "..." 
```

第一个，最后一个，上一个...等视图工作正常，但`page_entries_info:`助手工作不正常。

**如果有人设法解决了这个问题，如果你分享解决方案会很好。谢谢**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:34:39.193

我有同样的问题......
我把这个放在我的`pt-BR.yml`

```
pt-BR:
  views:
    pagination:
      first: "&laquo; Primeiro"
      last: "Ultimo &raquo;"
      previous: "&lsaquo; Anterior"
      next: "Proximo &rsaquo;"
      truncate: "..." 
```

这在我的`application.rb`

```
config.i18n.available_locales = ['pt-BR'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T10:24:52.803

我已经解决了这个问题：

```
helpers:
  page_entries_info:
    one_page:
      display_entries:
        zero: "Ningún %{entry_name} encontrado"
        one: "Mostrando <b>1</b> %{entry_name}"
        other: "Mostrando <b>todos %{count}</b> %{entry_name}"
      more_pages:
        display_entries: "Mostrando %{entry_name} <b>%{first}&nbsp;-&nbsp;%{last}</b> de <b>%{total}</b> en total" 
```

问候！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-28T19:44:53.150

将此添加到您的语言环境：

```
helpers:
  page_entries_info:
    one_page:
      display_entries: "Mostrando todos os %{entry_name}"
    more_pages:
      display_entries: "Mostrando %{entry_name} <b>%{first}&nbsp;-&nbsp;%{last}</b> de <b>%{total}</b> no total" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-23T21:23:23.963

如果你愿意，你可以使用这个：

```
en:
  views:
    pagination:
      first: "&laquo; Primero" 
      last: "Último &raquo;"
      previous: "&lsaquo; Anterior"
      next: "Siguiente &rsaquo;"
      truncate: "..."
  helpers:
    page_entries_info:
      one_page:
        display_entries:
          zero: "No se encontraron datos, <strong>%{count}</strong> en total"
          one: "Mostrando solo <strong>%{count}</strong> %{entry_name}"
          other: "Mostrando un total de <strong>%{count}</strong> %{entry_name}"
      more_pages:
        display_entries: "Mostrando %{entry_name} del orden del <strong>%{first} al %{last}</strong> de un total de <strong>%{total}</strong>" 
```

不要忘记将 *.yml 设置为 UTF-8（例如在 Windows 中）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-24T23:09:31.687

我已经解决了我的问题，在我的 YML 文件中寻找另一个帮助声明，这正在发生。您只需剪切此 kaminari 的“助手”部分，并粘贴到下面的部分中，以便在您的文件中添加一个“助手”声明。

看起来像这样：

 `````
helpers:
    page_entries_info:
      one_page:
        display_entries:
          zero: "Sem %{entry_name} encontrados"
          one: "Mostrando 1 %{entry_name}"
          other: "Mostrando todos %{count} %{entry_name}"
      more_pages:
        display_entries: "Mostrando %{entry_name} %{first} - %{last} de %{total} no total"
    select:
      prompt: Por favor selecione
    submit:
      create: Criar %{model}
      submit: Salvar %{model}
      update: Atualizar %{model}

`````

# iphone - 关于 iOS 6.0.1 中的 Map Kit

> ID：14479770
> 
> 赞同：0
> 
> 时间：2013-01-23T12:28:17.277
> 
> 标签：iphone, map, ios6, gps, xcode4.5

![在此处输入图像描述](../Images/e5483bdd2ff44aea7cc08eeb5bb158be.png)我无法在 iOS 6.0.1 中获取当前位置，！[当我尝试获取当前位置时，请查看屏幕截图地图视图未显示它只是显示空白地图屏幕我当前位置的纬度经度都是正确的

我的代码如下： -

```
 //Start fetching logged in user current location
    self.m_LocationManager = [[CLLocationManager alloc] init];
    self.m_LocationManager.distanceFilter = kCLDistanceFilterNone;
    self.m_LocationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters;
    self.m_LocationManager.delegate = self;

    [self.m_LocationManager startUpdatingLocation];

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {

    [manager stopUpdatingLocation];

    self.m_LatitudeValue = newLocation.coordinate.latitude;
    self.m_LongitudeValue = newLocation.coordinate.longitude;

    NSLog(@"lat %f long %f",self.m_LatitudeValue,self.m_LongitudeValue);
}

//for showing current location

- (void)addAnnotations { 

    MKCoordinateSpan span;
    span.latitudeDelta=0.08;
    span.longitudeDelta=0.08;

    Social_Check_InAppDelegate *appDelegate = (Social_Check_InAppDelegate *)[[UIApplication sharedApplication] delegate];

    //user current location
        double latitudeValue = appDelegate.m_LatitudeValue;
        double longitudeValue = appDelegate.m_LongitudeValue;

    CLLocationCoordinate2D coardinate1 = {latitudeValue,longitudeValue};
    MKCoordinateRegion region;
    region.center=coardinate1;
    region.span=span;

    CSMapAnnotation *ann = [[CSMapAnnotation alloc]initWithCoordinate:coardinate1];
    ann.title = m_PlacesNameString;
    ann.type = @"green";

    [m_MapView setRegion:region animated:TRUE];
    [m_MapView regionThatFits:region];
    [m_MapView addAnnotation:ann];

    [ann release];
} 
```

上面显示治愈的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:40:03.507

这可能是因为 iOS 6 不支持

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
```

方法。请检查[文档](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW1)。上述方法已弃用。在 iOS 6 及更高版本中，位置管理器在事件`locationManager:didUpdateLocations:`可用时将事件报告给其委托的方法。

# php - 使用 PHP 解析 HTML 页面以从下拉列表中获取选定的值。是否可以？

> ID：14479776
> 
> 赞同：0
> 
> 时间：2013-01-23T12:28:31.210
> 
> 标签：php, javascript, html, dom

我有一个程序可以上传高尔夫比分的 .csv 文件。上传后，文件中的数据会在浏览器中以 html 表格的形式显示。代码如下所示。

```
echo '<div class="tablediv"><table><form method="post" action="new.php" >';

while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        if($ctr ==1)
        {
        echo '<tr>';
        echo "<th>" . $data[3] . "</th><th>" .  $data[4] .
        "</th><th>  " .     $data[5] . "</th><th> " . $data[6].
        "</th><th>" . $data[7] ."</th><th> Prize </th>" ;
        echo '</tr>';
        $ctr++ ;
        }
        else if ($ctr > 1) 
        {
        echo '<tr>';
        echo "<td>" .$data[9] . "</td><td>" .  $data[10] .
       "</td><td>" . $data[11] . "</td><td>  " . $data[12]. "</td><td>" . $data[13] . "</td><td><select name='dropdown'>
        <option value='empty'>None Allocated</option>
        <option value='firstprize'>First Prize</option>
        <option value='secondprize'>Second Prize</option>
        <option value='thirdprize'>Third Prize</option>
        </select></td>";
        echo '</tr>';
        }

    }
    echo '<input type="submit" name="submit" value="Submit" class="submit1" /></form></table></div></br>';

fclose($handle);
} 
```

一旦用户上传了文件并显示出来，我希望用户能够通过下拉列表分配奖品，然后，一旦完成，数据就可以提交到数据库。我需要做的基本上也是获得选定的奖品位置并将其与其他数据一起提交到数据库。我只是不太确定如何获得下拉列表中的选定值。最好的方法是使用 PHP 简单的 HTML DOM 解析器吗？或者有谁知道更简单的方法。非常感谢您提前提供的帮助！

文件的初始上传如下所示。最后一列是下拉列表

```
 Player name    H'cap   Score   Front   Back    Prize
 name           18        66    33.0    33.0    none allocated
 name           11        67    33.5    33.5    none allocated
 name           4         67    33.0    34.0    none allocated
 name           12        67    31.0    36.0    none allocated
 name           11        68    34.5    33.5    none allocated
 name           6         68    34.0    34.0    none allocated
 name           19        68    31.5    36.5    none allocated
 name           11        69    36.5    32.5    none allocated
 name           11        69    33.5    35.5    none allocated 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:40:41.810

我猜是！你可以这样做：

```
echo "<td>" .$data[9] . "</td><td>" .  $data[10] .
       "</td><td>" . $data[11] . "</td><td>  " . $data[12]. "</td><td>" . $data[13] . "</td><td><select>
        <option value='empty'", ($prize == "None") ? ' class="selected"' : '',">None Allocated</option>
        <option value='firstprize'", ($prize == "First Prize") ? ' class="selected"' : '',">First Prize</option>
        <option value='secondprize'", ($prize == "Second Prize") ? ' class="selected"' : '',">Second Prize</option>
        <option value='thirdprize'", ($prize == "Third Prize") ? ' class="selected"' : '',">Third Prize</option>
        </select></td>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:40:52.617

正如@Carsten 所说，您无需将其复杂化。您可以轻松地从下拉列表中获取值：

```
<form action="page.php" method="post">
<select name="example">
        <option value='empty'>None Allocated</option>
        <option value='firstprize'>First Prize</option>
        <option value='secondprize'>Second Prize</option>
        <option value='thirdprize'>Third Prize</option>
</select>
</form>

<!-- page.php -->

<?
    echo $_POST['example']; 
```

如果您选择“二等奖”，它将回显“二等奖”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T15:22:56.487

我的解决方案是这样的。这样我就可以使用 var_dump($_POST) 在 new.php 页面上获取发布数据。我创建另一个计数器“$counter2”并将其初始化为 1。然后将计数器附加到下拉列表名称“和 var_dump($_POST) 给我这样的输出

```
 array(76) { ["dropdown1"]=> string(11) "secondprize"    
 ["dropdown2"]=> string(5) "empty" ["dropdown3"]=> string(10) "firstprize" 
 ["dropdown4"]=> string(5) "empty" ["dropdown5"]=> string(5) "empty" 
```

这是我对函数所做的更改。

```
 if ($this->fileerror > 0) {
    echo "Error: " . $this->fileerror . "<br />"; 
}else{ 
if (($handle = fopen($this->filetemp, "r")) !== FALSE) {
    $ctr = 1; // used to exclude the CSV header
            $count2 = 1;        
    echo '<div class="tablediv"><table><form method="post" action="new.php" >';

    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        if($ctr ==1)
        {

        echo '<tr>';
        echo "<th>" . $data[3] . "</th><th>" .  $data[4] . "</th><th>  " . $data[5] . "</th><th> " . $data[6]. "</th><th>" . $data[7] ."</th><th> Prize </th>" ;
        echo '</tr>';
        $ctr++ ;
        }
        else if ($ctr > 1) 
        {
        echo '<tr>';
        echo "<td>" .$data[9] . "</td><td>" .  $data[10] . "</td><td>" . $data[11] . "</td><td>  " . $data[12]. "</td><td>" . $data[13] . "</td><td><select name='dropdown" .  $count2."'>
        <option value='empty'>None Allocated</option>
        <option value='firstprize'>First Prize</option>
        <option value='secondprize'>Second Prize</option>
        <option value='thirdprize'>Third Prize</option>
        </select></td>";
        echo '</tr>';
        $count2++;
        }

    }
    echo '</br><input type="submit" name="submit" value="Submit" /></form></table></div></br>';

fclose($handle);
} 
```

这是我知道的一个相当草率的解决方案。因此，您可能为此拥有的任何其他解决方案将不胜感激。谢谢。

# java - TCP 连接期间应用程序崩溃

> ID：14479780
> 
> 赞同：0
> 
> 时间：2013-01-23T12:28:38.100
> 
> 标签：java, android, eclipse, android-asynctask, tcpclient

我是 Android 编程新手。我的应用程序在创建套接字时崩溃。我添加了清单互联网权限，并且 Wifi 已打开。我在 PC 上有一台服务器等待 Android 客户端；它适用于我的其他应用程序。我不知道这个应用程序的问题出在哪里。我会很感激任何帮助。

记录错误

> 01-23 13:10:32.110: E/AndroidRuntime(4493): 致命异常: main
> 01-23 13:10:32.110: E/AndroidRuntime(4493): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. example.usapp/com.example.usapp.Settings}：android.os.NetworkOnMainThreadException
> 01-23 13:10:32.110：E/AndroidRuntime(4493)：在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1751)
> 01 -23 13:10:32.110: E/AndroidRuntime(4493): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1767)
> 01-23 13:10:32.110: E/AndroidRuntime(4493): 在 android.app .ActivityThread.access$1500(ActivityThread.java:122)
> 01-23 13:10:32.110: E/AndroidRuntime(4493): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1005)
> 01-23 13:10:32.110: E/AndroidRuntime(4493): 在 android.os.Handler.dispatchMessage(Handler.java:99)
> 01-23 13:10:32.110: E/AndroidRuntime(4493): 在 android. os.Looper.loop(Looper.java:132)
> 01-23 13:10:32.110: E/AndroidRuntime(4493): 在 android.app.ActivityThread.main(ActivityThread.java:4028)
> 01-23 13:10: 32.110: E/AndroidRuntime(4493): 在 java.lang.reflect.Method.invokeNative(Native Method)
> 01-23 13:10:32.110: E/AndroidRuntime(4493): 在 java.lang.reflect.Method.invoke( Method.java:491)
> 01-23 13:10:32.110: E/AndroidRuntime(4493): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
> 01-23 13:10: 32.110: E/AndroidRuntime(4493): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
> 01-23 13:10:32.110: E/AndroidRuntime(4493): at dalvik.system.NativeStart.main(Native Method)
> 01-23 13:10:32.110: E/AndroidRuntime(4493): 引起：android.os .NetworkOnMainThreadException
> 01-23 13:10:32.110: E/AndroidRuntime(4493): 在 android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1077)
> 01-23 13:10:32.110: E/AndroidRuntime(4493) : 在 dalvik.system.BlockGuard$WrappedNetworkSystem.connect(BlockGuard.java:368)
> 01-23 13:10:32.110: E/AndroidRuntime(4493): 在 org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl .java:208)
> 01-23 13:10:32.110: E/AndroidRuntime(4493): 在 org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:431)
> 01-23 13:10:32.110: E/AndroidRuntime(4493): 在 java.net.Socket.connect(Socket.java:901)
> 01-23 13:10:32.110: E/AndroidRuntime(4493): 在 java. net.Socket.connect(Socket.java:844)
> 01-23 13:10:32.110: E/AndroidRuntime(4493): at com.example.usapp.Stream.doInBackground(Stream.java:46)
> 01-23 13: 10:32.110: E/AndroidRuntime(4493): 在 com.example.usapp.Settings.onCreate(Settings.java:37)
> 01-23 13:10:32.110: E/AndroidRuntime(4493): 在 android.app.Instrumentation .callActivityOnCreate(Instrumentation.java:1048)
> 01-23 13:10:32.110: E/AndroidRuntime(4493): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1715)
> 01-23 13:10:32.110: E /AndroidRuntime(4493): ... 11 更多

Java 类

```
package com.example.usapp;
import java.io.BufferedInputStream;
import java.io.IOException;
import java.net.InetSocketAddress;
import java.net.Socket;
import java.net.SocketAddress;
import java.net.UnknownHostException;
import java.nio.ByteBuffer;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;
import android.os.Handler;
import android.util.Log;
public class Stream extends AsyncTask<Void, Void, Void>{
  Bitmap image;
  int frameCounter=0;
  int checkCounterFPS=0;
  long lastFpsTime=0;
  double FPS;
  protected Handler handler_bitmap, handlerdata;
  boolean firstSetOfFPS=false;
  double availableFPS;
  double toleranceValue;
  boolean firstFalseFPS = false;
  byte[] datainput = new byte[1024];
  Socket socket;
  @Override
  protected Void doInBackground(Void... params) {
    Log.i("DUPA","po String doInBackground(String... params) ");
    try {
      Log.i("DUPA","przed socket");
      socket = new Socket();
      InetSocketAddress adres = new InetSocketAddress("192.168.1.50", 4444);
      //adres.
      socket.connect(adres);
      //socket = new Socket("192.168.1.50", 4444);
      Log.i("DUPA","po socket");
      BufferedInputStream in = new BufferedInputStream(socket.getInputStream());
      Log.i("DUPA","po socketconnected ");  
      /*
      do {
        try {
          ByteBuffer buffer = ByteBuffer.allocate(9);
          in.read(buffer.array());
          byte[] bBuffer = new byte[9];
          buffer.get(bBuffer, 0, 9);
          int len = Integer.parseInt(new String(bBuffer,"US-ASCII"));
          int bytesRecieved = 0;
          ByteBuffer completeBuf;
          completeBuf = ByteBuffer.allocate(len);
          while (len > bytesRecieved) {
            int inSize = in.available();
            if (inSize > len- bytesRecieved) {
              buffer = ByteBuffer.allocate(len- bytesRecieved);
              bytesRecieved += len- bytesRecieved;
              in.read(buffer.array());
              completeBuf.put(buffer);
            } else {
              bytesRecieved += inSize;
              buffer = ByteBuffer.allocate(inSize);
              in.read(buffer.array());
              completeBuf.put(buffer);
            }
          }
          frameCounter++;
          long delay = (long) (System.currentTimeMillis() - lastFpsTime);
          if (delay > 1000) {
            checkCounterFPS++;
            FPS = (((double) frameCounter) / delay) * 1000;
            handler_bitmap.post(new Runnable() {
              public void run() {
                ///usunieto fps set text
              }
            });
            frameCounter = 0;
            lastFpsTime = System.currentTimeMillis();
          }
          if (checkCounterFPS >= 3 && firstSetOfFPS == true) {
            checkCounterFPS = 0;
            if (FPS <= ((double) availableFPS - toleranceValue)
                || FPS >= ((double) availableFPS + toleranceValue)) {
              firstFalseFPS = true;
            }
          } else if (firstFalseFPS == true) {
            if (FPS <= ((double) availableFPS - toleranceValue)
                || FPS >= ((double) availableFPS + toleranceValue)) {
              // setSendText("FPS",(int) FPS);
              firstFalseFPS = false;
            }
          }
          //publishProgress(completeBuf);
        } catch (NumberFormatException e) {
          // TODO Auto-generated catch block
          e.printStackTrace();
          Log.i("DUPA","blad1");
        } catch (UnknownHostException e) {
          // TODO Auto-generated catch block
          e.printStackTrace();
          Log.i("DUPA","blad2");
        }
      } while (!socket.isInputShutdown() && !socket.isClosed()); //
      // publishProgress("Status: Closed".getBytes());*/
    } catch (IOException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
      Log.i("DUPA","blad3");
    }
    Log.i("AsyncTask", "doInBackground: Finished");
    return null;
  }
  protected Bitmap onProgressUpdate(ByteBuffer... values) {
    Log.i("DUPA","blad4");
    return image = BitmapFactory.decodeByteArray(values[0].array(), 0,values[0].array().length);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:55:59.873

正如其他人正确指出的那样，自 Honeycomb 及更高版本以来，android 不允许在主 UI 线程上进行网络操作。我可以看到你创建了一个扩展 AsyncTask 的类，它是 android 提供的一个特殊的类，用于做后台操作。您需要创建一个单独的活动并从中触发您的 AsyncTask。这样，其中的代码`doInBackground()`将在单独的线程中执行，并且不会阻塞您的主要活动。例如，您可以使您`Stream`的类成为另一个活动的内部类，将以下代码添加到活动的`onCreate()`方法中

```
Stream task = new Stream();
task.execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:39:09.353

正如@pingw33n 在他的评论中提到的，Android 网络连接必须在 AsyncTask 线程中完成，而不是在主线程中。这在旧版本的 android 中有效，但在最新版本中，您的网络连接无法在主线程中完成。

# asp.net - 搜索表中的空字段

> ID：14479783
> 
> 赞同：1
> 
> 时间：2013-01-23T12:28:51.310
> 
> 标签：asp.net, mysql, gridview

我尝试了下面的命令。这是 a `DataSource`of a`GridView`并且写在我的`.aspx`页面上，所以我不能使用像`""`or之类的字符`''`。这段代码不会给我任何回报。我还尝试将 (string.empty, "" and null) 作为参数传递给`codebehind`. 没有任何效果，我不知道还能做什么......

```
SelectCommand="SELECT ch.id, sit.descricao as situacao, resp.responsavel, ch.dt_cadastro, ch.previsao_termino, func.descricao as funcionalidade, 
                                  proj.descricao as projeto ,pr.id as prid, pr.prioridade, clb.clube
                                  FROM chamados AS ch  
                                  INNER JOIN prioridades as pr  ON ch.prioridade = pr.id
                                  INNER JOIN clubes as clb ON ch.clube = clb.id 
                                  INNER JOIN responsaveis as resp ON ch.responsavel = resp.id
                                  INNER JOIN situacoes as sit ON ch.situacao = sit.id 
                                  INNER JOIN projetos as proj ON ch.projeto = proj.id
                                  INNER JOIN funcionalidades as func ON ch.funcionalidade = func.id WHERE ch.responsavel IS NULL" 
```

`Obs:`我要过滤的字段，因为`null`它们是`int32`字段。（我知道那`int32`不可能`null`）但我只是不知道该怎么做，所以我尝试了所有想到的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:41:57.933

此查询将始终不返回任何结果，因为您`INNER JOIN`在此语句中使用：

```
INNER JOIN responsaveis as resp ON ch.responsavel = resp.id 
```

并使用`WHERE`您将其中一个文件`INNER JOIN`与`NULL`

```
WHERE ch.responsavel IS NULL 
```

**仅**`INNER JOIN`连接不为空的字段。所以这两种说法相互除外。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T18:25:24.890

I found out the problem, it was:

I'm using `INNER JOINS` and as @valex told me:

`The INNER JOIN joins ONLY fields which are NOT NULL. So these two statement except each other.`

The solution was change the `INNER JOIN` for `LEFT JOIN` and worked like a charm !

Thanks everyone !**

# android - 如果服务器关闭，TCPsending 会使应用程序崩溃

> ID：14479785
> 
> 赞同：0
> 
> 时间：2013-01-23T12:28:56.060
> 
> 标签：android, tcp, client

我为我们的全球 Leadbord 编写了一个服务器，该服务器现在可以正常工作。如果它处于活动状态，我可以向它发送数据。但如果它出现故障，我的应用程序不会停止。我没有得到解决方案我希望你能帮助我。这是发送：

```
public void saveToDatabase(LeadboardElement element2) {
    final LeadboardElement element = element2;
    send = false;
    // Need to be a thread! else android blocks it because it could take to
    // long to send!
    this.thread = new Thread() {
        public void run() {
            try {
                Socket soc = new Socket(Config.TCP_SERVERNAME_IP,
                        Config.TCP_PORT);
                DataOutputStream out = new DataOutputStream(
                        soc.getOutputStream());
                DataInputStream in = new DataInputStream(
                        new BufferedInputStream(soc.getInputStream()));

                // to call the save statement!
                out.writeInt(0);
                // give the stuff
                out.writeUTF(element.getName());
                out.writeInt(element.getLevel());
                out.writeInt(element.getKillPoints());

                // close it
                out.close();
                in.close();
                soc.close();
                send = true;
                //join at every error
            } catch (UnknownHostException e) {
                e.printStackTrace();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    };
    // start it
    thread.start();

    // join thread
    if (!send) {
        boolean retry = true;
        while(retry)
        try {
            this.thread.join();
            retry = false;
            Log.w(TAG, "sending to server stopped!");
        } catch (InterruptedException e2) {
            Log.w(TAG, "Thread could not be joined");
        }
    }
} 
```

我注意到自 API 5 以来我需要在一个线程中执行此操作，因此它的工作方式如下。如果玩家触摸屏幕，它会在游戏结束时调用。一切都停止了，数据被发送到服务器。如果他下来它不起作用，我们就会陷入褪色到黑色。我想我需要类似超时的东西。我用 a 试过，`CountDownTimer`但这并不能解决问题。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:34:07.807

更改初始化套接字的方式，可以设置超时。

```
Socket s1 = new Socket();
s1.setSoTimeout(200);
s1.connect(new InetSocketAddress("192.168.1." + i, 1254), 200); 
```

[创建新 Socket 时添加超时](https://stackoverflow.com/questions/9525972/add-a-timeout-when-creating-a-new-socket)

# ruby - 在 Sinatra 路线中获取完整路径，包括问号后的所有内容

> ID：14479787
> 
> 赞同：2
> 
> 时间：2013-01-23T12:29:01.237
> 
> 标签：ruby, routing, sinatra

我有以下路径：

```
http://192.168.56.10:4567/browse/foo/bar?x=100&y=200 
```

我绝对想要字符串中“http://192.168.56.10:4567/browse/”*之后的所有内容。*

使用 splat 不起作用（仅捕获“foo/bar”）：

```
get '/browse/*' do 
```

正则表达式也没有（也只捕获“foo/bar”）：

```
get %r{/browse/(.*)} do 
```

x 和 y 参数都可以在 params 哈希中访问，但是在我想要的那些上做一个 .map 似乎不合理且不像 ruby​​ （另外，这只是一个例子......我的参数实际上是非常动态和众多的） . 有一个更好的方法吗？

更多信息：我的路径看起来是这样的，因为它正在与 API 通信，并且我使用路由来确定我将进行的 API 调用。我需要字符串这样看。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T13:57:50.983

如果您愿意忽略路径参数中的哈希标记，这应该可以工作（顺便说一句，浏览器会忽略 URL 中的哈希后的任何内容）

*更新的答案*

```
get "/browse/*" do
  p "#{request.path}?#{request.query_string}".split("browse/")[1]
end 
```

或者更简单

```
request.fullpath.split("browse/")[1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:06:26.967

```
get "/browse/*" do
  a = "#{params[:splat]}?#{request.env['rack.request.query_string']}"
  "Got #{a}"
end 
```

# magento - 在 magento 中创建多存储的停放域方法

> ID：14479792
> 
> 赞同：0
> 
> 时间：2013-01-23T12:29:18.300
> 
> 标签：magento

我正在寻找在 magento 中创建多存储....当我读到有四种方法可以在 magento 中创建多存储时：- 停放域方法、附加方法、子域方法和子目录方法...任何人都可以告诉我所有这些方法之间的区别以及每种方法的相应优缺点是什么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:20:44.270

子域是 new.shop.com 而子目录是 shop.com/new

我使用目录方法。谷歌通常将 subdomin 视为一个单独的站点，因此对于 SEO 子域对小公司不利。（如果您可以为站点和子域获得良好的排名，那就更好了，但需要两倍的工作）。

# delphi - 如何为 Delphi Synapse HTTP Server 添加 SOAP 接口？

> ID：14479793
> 
> 赞同：2
> 
> 时间：2013-01-23T12:29:19.520
> 
> 标签：delphi, soap, delphi-7

我有一个使用 Delphi 7 和 Ararat Synapse 创建的自定义 HTTP 服务器，它使用一组简单的变量从另一个应用程序接收 HTTP GET。

例如： http://myserver.com/get?Variable1=adsds&Variable2=asdasdasdsa&Variable3= [aasdsadasdsad](http://myserver.com/get?Variable1=adsds&Variable2=asdasdasdsa&Variable3=aasdsadasdsad)

应用程序源与此类似 - [http://searchco.de/codesearch/view/13374072](http://searchco.de/codesearch/view/13374072)

现在，我的客户需要我提供一个 SOAP 接口。对 SOAP 完全陌生，我做了一些研究，发现它非常复杂。我想知道将此接口合并到我的 HTTP 服务器的更简单方法是什么。或者如果有这样的软件，我应该找到现成的 SOAP 到 HTTP 转换应用程序。谢谢你。

注意：我不是 HTTP Server 的原始开发者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T13:31:12.857

您需要编写一个 SOAP 服务器，它不仅从 SOAP 请求生成 SOAP 响应，而且还提供一个 WSDL 文档，告诉用户他们可以提出什么请求。

由于您对 SOAP 完全陌生，因此这里有一些“入门”链接：

一般的：

[SOAP、WDSL、HTTP、XSD？什么？](http://www.rpg-xml.com/Articles/AcronymnArticle.html)
[公开可用的 Web 服务列表](http://www.xmethods.com/ve2/index.po)（我会开始编写一个使用 SOAP 的小型测试应用程序）

使用德尔福：

[使用 Delphi 开发 Web 服务 使用 Delphi](http://delphi.about.com/od/webservices/Developing_Web_Services_with_Delphi.htm)
[轻松开发 Web 服务 使用](http://www.devarticles.com/c/a/Delphi-Kylix/Web-Services-Made-Easy-With-Delphi/)
[Delphi开发 Web 服务](http://www.onlinedelphitraining.com/newsletters/webservices.htm)

您使用 Delphi 7 的事实使事情变得更加困难，因为更高版本有更好的支持：
[Debugging/Testing Win32 SOAP Web Services (D2007)](http://www.bobswart.nl/Weblog/Blog.aspx?RootId=5:1424)。Bob 有[更多 SOAP 文章](http://www.drbob42.com/soap/index.htm)

为了测试服务和消费 SOAP，您应该使用[SoapUI](http://www.soapui.org/)，这是一个很棒的免费工具（[什么是 SOAPUI？](http://www.soapui.org/About-SoapUI/what-is-soapui.html)）。

一旦掌握了 WDSL，您[应该知道存在哪些类型的 WSDL](http://www.ibm.com/developerworks/webservices/library/ws-tip-namespace/index.html)以及整个命名空间混乱......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T13:53:02.903

有一个用于 Free Pascal 和 Delphi 的[Web 服务工具包](http://wiki.freepascal.org/Web_Service_Toolkit)，可用于编写 SOAP 服务器。

我自己还没有使用它，但它正在积极开发中，可能与 Synapse 兼容。

更新：当前版本似乎包括对 Internet Direct (Indy) 和 Synapse（HTTP 服务器和 TCP 服务器）的支持。

# python - simplejson - 编码正则表达式 \d+

> ID：14479794
> 
> 赞同：1
> 
> 时间：2013-01-23T12:29:21.107
> 
> 标签：python, simplejson

我对编码正则表达式有一些误解：

```
>>> simplejson.dumps({'title':r'\d+'})
'{"title": "\\\\d+"}'
>>> simplejson.loads('{"title": "\\\\d+"}')
{u'title': u'\\d+'}
>>> print simplejson.loads('{"title": "\\\\d+"}')['title']
\d+ 
```

因此，不使用`print`I see `\\`，使用`print`I see `\`。那么，加载 dict 的值包含什么 - with`\\`或 with `\`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:35:49.543

这是一个技巧：`list`用于查看字符串中真正的字符：

```
In [3]: list(u'\\d+')
Out[3]: [u'\\', u'd', u'+'] 
```

`list`将字符串分解为单个字符。`u'\\'`一个角色也是如此。（中的双反斜杠`u'\\'`是一个[转义序列](http://docs.python.org/2/reference/lexical_analysis.html)。）它代表一个反斜杠字符。这是正确的，因为`r'\d+'`也只有一个反斜杠：

```
In [4]: list(r'\d+')
Out[4]: ['\\', 'd', '+'] 
```

# reporting-services - 堆叠图表的类别组向下钻取 - ssrs 2008？

> ID：14479797
> 
> 赞同：4
> 
> 时间：2013-01-23T12:29:37.010
> 
> 标签：reporting-services, drilldown

是否可以在堆叠条形图报告的类别组（x 轴）中包含向下钻取或链接到报告功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:44:59.280

好的，根据上面的评论，不可能完全按照您的要求进行操作。您当然可以在**数据**级别应用钻取操作，这意味着用户可以单击图表区域：

![在此处输入图像描述](../Images/b579290a2524ea93b4ded181b1db1b77.png)

因此，您需要设置 Action 以传递基于单击区域的系列/类别的参数，这将有效地实现相同的结果，只是方式略有不同。但是直接点击轴是不可能的。

# javascript - javascript 刷新文本

> ID：14479798
> 
> 赞同：1
> 
> 时间：2013-01-23T12:29:37.767
> 
> 标签：javascript, html

我正在尝试更改`h3`标签中的文本，但在函数结束之前不会发生更改。我想立即更改文本。

例如：

```
<h3 id="myText"></h3>
<input type="button" onClick="changeText('Hello');">

<script type="text/javascript">
   function changeText(str){
      document.getElementById('myText').innerHTML = str;
   }
</script> 
```

更改文本后是否可以立即刷新屏幕？（就像`flush()`C 中的命令）。

请注意，如果我`alert`在命令后面加上一个，文本会立即更改：

```
function changeText(str){
    document.getElementById('myText').innerHTML = str;
    alert('HelloWorld');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:32:18.903

要强制立即刷新，您可以这样做：

```
document.getElementById('myText').innerHTML = str; // change the dom
setTimeout(function(){
   // do other things
}, 0); 
```

代码将`do other things`在刷新后执行。

但是让脚本持续运行几秒钟是非常不寻常的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:39:25.933

如果您正在谈论刷新所有页面，您将丢失在客户端更改的内容，因为它是无状态的（在请求之间）。如果您将其保存在服务器端的存储库（会话、应用程序、您可以读写的文件、数据库等）上，您可以从服务器端读取并将其保存在您的 html 元素中。

在 Javascript 中，您可以实现一个字典（键上的元素 id 和值上的 innerHTML）并将其用作缓存并实现一个刷新方法来显示所有更改，尝试类似：

```
<script>

var cacheChanges = {};

function addChange(element, value){
   cacheChanges[element] = value; 
}

function flush() {
  for(var i in cacheChanges)
  {
    var element = document.getElementById(i);
    if (element) {
      element.innerHTML = cacheChanges[i];
    }
  }
}

function ChangeSomething(){
  // do some changes
  addChange('myText', 'Hello');
  addChange('myText2', 'Hello 2');
  addChange('myText3', 'Hello 3');

  // apply all them
  flush();
}

</script> 
```

在你的 html 中：

```
 <h3 id="myText"></h3>
  <h3 id="myText2"></h3>
  <h3 id="myText3"></h3>

  <input type="button" onClick="ChangeSomething();"> 
```

# android - 从资产复制到 SD 卡打开失败：ENOENT（没有这样的文件或目录）

> ID：14479800
> 
> 赞同：2
> 
> 时间：2013-01-23T12:29:50.340
> 
> 标签：android, sd-card, assets

我正在尝试从资产复制到 sdcard 这是我的代码的一部分

```
private void CopyAssets(String folder) {

        File folders = new File(Environment.getExternalStorageDirectory().toString()+"/beatscache/"+folder);
        folders.mkdirs();
        AssetManager assetManager = getAssets();
        String[] files = null;
                try {
            files = assetManager.list(folder);
        } catch (IOException e) {
            Log.e("tag", e.getMessage());
        }

        for(String filename : files) {
            InputStream in = null;
            OutputStream out = null;
            try {
              in = assetManager.open(folder+"/"+filename);   // if files resides inside the "Files" directory itself
              out = new FileOutputStream(Environment.getExternalStorageDirectory().toString()+"/"+"beatscache"+"/"+folder +"/" + filename);
              copyFile(in, out);
              in.close();
              in = null;
              out.flush();
              out.close();
              out = null;
            } catch(Exception e) {
                Log.e("tag", e.getMessage());
            }
        }
    }
    private void copyFile(InputStream in, OutputStream out) throws IOException {
        byte[] buffer = new byte[1024];
        int read;
        while((read = in.read(buffer)) != -1){
          out.write(buffer, 0, read);
        }
    } 
```

和

```
CopyAssets("bin"); 
```

日志显示

> E/tag（3801）：/mnt/sdcard/beatscache/bin/alsa_ctl：打开失败：ENOENT（没有这样的文件或目录）

我在 AndroidManifest.xml 中授予了 READ 和 WRITE 权限，并检查了 Environment.MEDIA_MOUNTED.equals(state) 返回 true。

并且文件夹没有被创建。

你能告诉我哪里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:44:15.283

首先检查文件是否存在，然后将您的内容移到那里

```
final File dir = new File(cEnvironment.getExternalStorageDirectory()+"/beatscache/"+folder +"/");
if(dir.exists()==false)
{
dir.mkdirs(); //create folders where write files
final File file = new File(dir, filename);
} 
```

# php - 使用正则表达式从 textarea 发布结果中删除行

> ID：14479803
> 
> 赞同：2
> 
> 时间：2013-01-23T12:30:13.870
> 
> 标签：php, html, regex

我正在尝试从 textarea 发布结果中删除一行，以“To”开头我的尝试：

```
$var = 'Date: __date\n"."Mime-Version: 1.0\nFrom: __From \nTo: __To\nSubject: __Subject         \nReply-To: __Reply-To\nX-Job: __X-Job';

$text = preg_replace("/To(.*)$\n/s","",$var); 
```

但它没有用。

我想要这个输出

```
Date: __date\n"."Mime-Version: 1.0\nFrom: __From \nSubject: __Subject         \nReply-To: __Reply-To\nX-Job: __X-Job' 
```

编辑：我使用的最后一个解决方案，考虑到输入来自 textarea

```
 $text = preg_replace("/To.*?Subject:/s","Subject:",$var); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:37:00.243

第一个解决方案，不使用`\n`和任何*修饰符*，首先是问题描述：

```
$text = preg_replace("/To.*?Subject:/","Subject:",$var); 
```

这是一个更通用的版本，它使用结尾`\n`作为分隔符。

```
$text = preg_replace("/\bTo:.*?\n/", "", $var, 1); 
```

*   `\b`标记单词的开头
*   `.*?``?`有为*不贪心*`\n`，意思是遇到匹配就停止
*   最后`1`告诉`preg_replace`只替换一个（第一个）出现
    （我最初忘记了，默认是全部 - *PHP*不是*Perl* ..）

注意：在 php`$var = ' x\n y\n';`中不会扩展`\n`as CR，因为使用了单引号`'`。必须使用双引号：`$var = " x\n y\n";`获取`x`和`y`在不同的行上。

--

（实际上，更准确地说，`/\bTo:.*\n/`也可以，因为`s`不使用修饰符与 .`.*`不匹配`\n`。使`s`修饰符`.`匹配 the`\n`和 the`?`是必要的：`/\bTo:.*?\n/s`。但无论如何使用它更清楚`?`，更好不要忘记这个有用的选项！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:44:59.517

您需要`/m`修饰符以`^`匹配每行的开头，然后使用此表达式：

```
$text = preg_replace("/^To:.*/m", "", $var); 
```

我没有使用`/s`修饰符，因为这也会导致`.`匹配换行符，这不是你想要的。

[**演示**](http://codepad.viper-7.com/C1ltu3)

顺便说一句，根据规范，MIME 标头可能跨越多行；我在这个答案中忽略了这一点:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:38:52.840

尝试使用[爆炸](http://in3.php.net/explode)：

```
$var = 'Date: __date\n"."Mime-Version: 1.0\nFrom: __From \nTo: __To\nSubject: __Subject         \nReply-To: __Reply-To\nX-Job: __X-Job';
$arr = explode('\n', $var); 
```

现在取消设置你想要的键

# vb.net - 在最终用户机器上分发数据库

> ID：14479811
> 
> 赞同：0
> 
> 时间：2013-01-23T12:30:47.237
> 
> 标签：vb.net, visual-studio-2010, sqlite, ms-access, connection-string

我有一个使用`*.db3`数据库的小桌面应用程序。当我在我的其他机器上运行应用程序时，找不到数据库：使用了绝对路径。

目前，在我的`App.Config`文件中，我有

```
connectionStrings>
    add name="MyProject.My.MySettings.MyProjectSQLiteConnectionString"
            connectionString="data source=&quot;N:\Long path do my DB\MyDB.db3&quot;"
            providerName="System.Data.SQLite" />
/connectionStrings> 
```

我想用这样的东西替换数据源（不幸的是不工作）

```
data source =|DataDirectory|\MyDB.db3 
```

如何在我的连接字符串中输入应用程序目录（相对路径）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:43:21.713

从史蒂夫 B 的评论开始，后来找到这篇[文章](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/67c417e8-cf39-4ae2-928c-2b4f709b146d)，我通过以下方式解决了我的问题：

1.  在用户机器上，数据库被复制到`%AppData%`目录中。
2.  在`|DataDirectory|`Debug 和 Release 模式之间动态改变。

这允许不更改连接字符串。

同时，我选择了 MS Access *.accdb 数据库，但无论如何，这里是我的代码。

```
Private Sub Main_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

#If (Not Debug) Then

    pathMyAppData = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) & "\MyApp"

    '"DataDirectory" is used in the Connection String
    AppDomain.CurrentDomain.SetData("DataDirectory", pathMyAppData)

    'The application closes if no database is found
    If Not File.Exists(pathMyAppData & "\MyDB.accdb) Then
        MsgBox("Database not found. Program closes.", MsgBoxStyle.Critical, "Error")
        Me.Close()
    End If

#End If 
```

# java - 线程主 java.util.no 这样的元素中的 JAVA 异常

> ID：14479814
> 
> 赞同：1
> 
> 时间：2013-01-23T12:30:54.490
> 
> 标签：java, exception

执行程序时遇到错误。

我执行我的程序并在输入文件中输入数据。

输入文件的内容

```
LIMIT
2
ADD 30 60
MUL -60 60 
```

我收到如下异常错误。

```
Exception in thread "main" java.util.NoSuchElementException
        at java.util.Scanner.throwFor(Scanner.java:907)
        at java.util.Scanner.next(Scanner.java:1530)
        at java.util.Scanner.nextInt(Scanner.java:2160)
        at java.util.Scanner.nextInt(Scanner.java:2119)
        at Test.doLimit(Test.java:41)
        at Test.checkResult(Test.java:24)
        at Test.main(Test.java:15) 
```

我用谷歌搜索，我相信 String input = sc.next(); for 循环内部应该导致错误。我可以知道如何解决此错误吗？

我的代码如下所示。

```
public static void main(String[] args) {
    Scanner sc = new Scanner(System.in);
    String input = sc.nextLine();
    checkResult(input);
}

public static void checkResult(String input)
{
    if(input.equals("LIMIT"))
    {
        //do stuff
        doLimit();
    }
    else if(input.equals("SENT"))
    {
        //do stuff

    }
    else
    {
        //do stuff

    }
}
public static void doLimit()
{
    Scanner sc = new Scanner(System.in);
    int numOfInput = sc.nextInt();
    int x,y;
    for(int i = 0; i < numOfInput; i++)
    {
        String input = sc.next();
        x = sc.nextInt();
        y = sc.nextInt();

        if(input.equals("ADD"))
        {
            //add

        }
        else if(input.equals("SUB"))
        {
            //sub

        }
        else
        {
            //multiple

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:34:57.600

您应该检查是否有更多输入。您可以在所`nextInt`涉及的堆栈跟踪中看到，如果您查看 SDK，您会看到在

> 输入已耗尽。

无论如何，你的问题就在这里：

```
int numOfInput = sc.nextInt(); 
```

所以在要求之前确保你有有效的输入：

```
if (sc.hasNextInt()) {
  .
  .
  .
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:35:07.680

如果您通过输入文件发送数据，则必须`file`在`Scanner()`构造函数中提供。

提供了您当前所做的`System.in`。

**编辑 ：**

此外，您只需打开文件上的扫描仪一次并在整个过程中使用它。在这种情况下，

1）您正在打开扫描仪并读取第一行。

2) 然后在 doLimit 函数中，再次打开扫描仪并读取输入文件的第一行，该行不是整数。

因此，错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:37:08.487

扫描仪的默认分隔符是空格。但是，您计划将新行用作前两行的输入作为分隔符，然后使用空格和新行，因为它首先出现。也许这就是问题所在。尝试将所有内容写在一行上，空格分隔。

# java - CORBA :: 使用 IIOP 获取客户端 ORB 地址和端口

> ID：14479816
> 
> 赞同：3
> 
> 时间：2013-01-23T12:30:58.613
> 
> 标签：java, corba, iiop, orb

我在 CORBA 中有使用 IIOP 协议的应用程序，我正在使用 JDK 6 的 Java IDL 组件，这是另一个 ORB 实现。

用Java语言实现客户端和服务器。

JDK ORB 实现中是否有任何方法可以从服务器 (ORB) 代码中获取客户端 ORB 的主机和端口？

或者

有什么方法可以使用 IIOP 协议，让客户端获取主机和端口？

这是我们正在做的识别客户以跟踪谁被请求

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T20:58:47.733

我认为没有任何便携的方法可以做到这一点。也许有你特定的 ORB，我不知道。回想一下，CORBA 非常努力地向应用程序隐藏传输细节。应用程序甚至可能没有使用 IIOP，因此无论如何都无法获取 TCP 主机和端口信息。

您可能需要考虑向 IDL 添加额外的标识符参数，以便服务器可以识别客户端。您还可以考虑让客户端调用服务器上的“注册”函数，然后服务器分发一个标识符，所有客户端必须在后续调用中将其传递回服务器。

此标识符可以像字符串或整数一样简单，也可以像服务器必须使用公钥验证的某种安全令牌一样复杂。这一切都取决于您的应用程序的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-25T15:37:31.027

这取决于具体情况，但有时您需要从 IOR 中提取主机/端口以进行测试、日志记录和调试。IOR 包含主机和端口，您只需要从 IOR 表示的字节数组中对其进行解码。因此，只需以 GNU Classpath 中的 CORBA 规范和 IorParser.java（大量依赖项）为例，如果您在周末有时间，请自行解码 :)

如果你没有时间，可以使用 ORB 附带的命令行实用程序：

1.  TAO/ACE ORB 中的 tao_catio
2.  Orbix/Orbacus ORB 中的 iordump
3.  [使用网络在线工具http://www2.parc.com/istl/projects/ILU/parseIOR/](http://www2.parc.com/istl/projects/ILU/parseIOR/)解析 IOR
4.  还没有找到使用 JDK CORBA 进行解析的可能性。虽然代码肯定在内部 sun 包中的某个地方。
5.  Jacorb ORB中的dior。或者 java jacorb.Orb.util.PrintIOR -i [IOR-string]

对我来说，答案#5 已经足够好了。我使用 Jacorb 作为基于 java 的测试工具。但话又说回来，PrintIOR 要求 org.jacorb.orb.ORB 由 org.omg.CORBA.ORB.init() 实例化。因此，如果您被迫在同一个 JVM 中使用 JDK ORB，这可能会很棘手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-25T14:52:02.577

[这在使用 Java 和 Corba 的点对点文件共享中](https://stackoverflow.com/questions/25475644/identify-client-in-peer-to-peer-filesharing-using-java-and-corba-and-build-sock)由识别客户端复制。[并在 2 个客户端之间建立套接字套接字](https://stackoverflow.com/questions/25475644/identify-client-in-peer-to-peer-filesharing-using-java-and-corba-and-build-sock)

有一个基于 JacORB 的解决方案。

# php - 如何在数组中分离和存储数据？

> ID：14479817
> 
> 赞同：0
> 
> 时间：2013-01-23T12:31:03.947
> 
> 标签：php, arrays

我有一个数据库字段，其中有由分号“;”分隔的记录。现在我很容易获取整个数据，但是我如何将它们分开并存储在一个数组中。

例子 ： `data : abc;def;ghi;`

我需要在一个数组中获取这些值，`array[0]=abc; array[1] = def`依此类推......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T12:33:01.293

尝试使用[爆炸](http://php.net/manual/en/function.explode.php)：

```
<?php
$string = "abc;def;ghi;";
$array = explode(";", $string);
print_r($array); // will display the array with [0] => abc, [1] => def etc..
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T12:33:20.683

使用 PHP 的[explode()](http://php.net/explode)函数

```
$array = explode(";", $data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T12:33:40.433

就是这个：`$values = explode(";",str);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T12:33:49.617

假设您有变量中的数据，`$data`那么可以通过爆炸来完成分离。 `$data = explode(';',$data);`

就像提示一样，如果您使用`;`分隔符存储多个值，我不会推荐它。您应该使用一些不常见的分隔符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-23T12:35:57.643

用这个

```
$data = "abd;def;gui";
$array = explode(';',$data); 
```

这将返回一个包含所有元素的数组。

# javascript - 使用 JavaScript 自由手绘

> ID：14479820
> 
> 赞同：-4
> 
> 时间：2013-01-23T12:31:16.053
> 
> 标签：javascript, svg, drawing, html5-canvas, vml

除了 HTML5 画布，还有哪些方案可以在 JavaScript 中实现徒手绘图？

我曾尝试使用 HTML5 画布，但没有成功，因为我在保存画布和文本时遇到了问题。此外，画布只能保存为图像。但我需要将它保存为我可以打开并再次绘制和编辑文本的格式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:00:24.340

**更新：** 现在，在您向问题添加更多信息后，我知道您为什么不想使用画布（您仍然可以使用画布，但使用的方式与以前不同，但您可能更喜欢应用程序的另一种方法 - 请参阅以下）。人们已投票关闭您的答案，这意味着在重新打开之前无法发布新答案，因此我将尝试更新我的答案。我也投票决定重新提出你的问题。

## 在 JavaScript 选项中绘图

对于 HTML 中的徒手绘图，您只有 3 个选项：

1.  帆布
2.  SVG（IE 上的 VML）
3.  插件（例如 Flash、Java、Silverlight）

你没有解释为什么你不想使用画布。

## 浏览器支持

如果您需要定位的浏览器不支持 Canvas，那么您可以：

*   使用 SVG 或 VML（或使用 SVG/VML 的库，如 Raphaël）
*   使用实现画布的东西（例如在 Flash 中），例如：
    *   [http://code.google.com/p/fxcanvas/](http://code.google.com/p/fxcanvas/)
    *   [http://flashcanvas.net/](http://flashcanvas.net/)
    *   [http://excanvas.sourceforge.net/](http://excanvas.sourceforge.net/)

## API

如果原生 Canvas API 不适合您的需求，那么您可以使用一些提供更多功能或更好 API 的画布库。

以下是一些帮助您入门的快速链接：

*   [http://dmitrybaranovskiy.github.io/raphael/](http://dmitrybaranovskiy.github.io/raphael/)
*   [http://processingjs.org/](http://processingjs.org/)
*   [http://kineticjs.com/](http://kineticjs.com/)（不再维护！）
*   [http://www.createjs.com/#!/EaselJS](http://www.createjs.com/#!/EaselJS)
*   [http://paperjs.org/](http://paperjs.org/)
*   [http://www.bhivecanvas.com/](http://www.bhivecanvas.com/)
*   [http://fabricjs.com/](http://fabricjs.com/)

## 保留模式与立即模式

您需要的是[保留模式](http://en.wikipedia.org/wiki/Retained_mode)渲染（与[立即模式](http://en.wikipedia.org/wiki/Immediate_mode)相反）。

Canvas 是即时模式渲染的一个示例，而 SVG/VML 在保留模式下工作。这意味着一旦你在画布上绘制了一些东西，它只是像素，你不能操纵绘制的对象或保存除平面光栅图像之外的任何东西。另一方面，SVG 保留了您绘制的对象的整个 DOM（就像在 HTML 中一样），您可以轻松地操作那里的所有内容、附加事件、更改颜色、填充样式、在绘制或保存后移动它们等.

你仍然可以使用 Canvas 做你想做的事，但你需要一些库来帮助你跟踪正在绘制的所有内容 - 一个提供保留模式作为即时模式 Canvas API 之上的抽象层的库 - 一些我之前描述的库以这种方式工作，请参阅上面的链接 - 但您仍然可能会找到另一种更适合您需求的方法。

## 一个现成的解决方案

看看[SVG-edit](http://code.google.com/p/svg-edit/)（或[GitHub 上](https://github.com/SVG-Edit/svgedit)的）项目——尤其[是使用 SVG-edit](http://code.google.com/p/svg-edit/wiki/ProjectsThatUseSvgEdit)[的演示](http://svg-edit.googlecode.com/svn/branches/2.7/editor/svg-editor.html)和其他项目。使用 SVG-edit 可能是实现目标的最简单方法。

# windows - 如何找到 Windows 可执行文件在运行时打开或访问的所有文件？

> ID：14479829
> 
> 赞同：6
> 
> 时间：2013-01-23T12:31:52.273
> 
> 标签：windows, file

我想了解和跟踪可执行程序/应用程序/进程在我的计算机上做什么。如何找到它在运行时打开或正在访问的所有文件（如输出文件、日志文件等）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T12:35:15.797

[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)有第二个窗格，显示所有打开的句柄：

![在此处输入图像描述](../Images/87c9a0dbe61032522533a8924955c4ec.png)

[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)还可以监视和记录来自进程的所有注册表和文件访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T12:34:34.490

[Process Monitor](http://technet.microsoft.com/en-gb/sysinternals/bb896645.aspx)听起来正是您想要的。

只需找到您的流程，它就会详细地告诉您流程在做什么，比 Process Explorer 更详细。

# jquery - tinymce 自定义字体大小进入字体大小列表

> ID：14479845
> 
> 赞同：5
> 
> 时间：2013-01-23T12:32:44.800
> 
> 标签：jquery, tinymce, font-size

我知道如何在 TinyMCE 中增加字体大小选项，但我想添加用户可以输入自己的字体大小值的选项。

我目前在 tinyMCE 初始化函数中使用这个选项：

```
theme_advanced_font_sizes : 
"8=8px,10=10px,12=12px,14=14px,16=16px,18=18px,20=20px,22=22px,24=24px,26=26px,28=28px,30=30px,32=32px,34=34px,36=36px,38=38px,40=40px,42=42px,44=44px,46=46px,48=48px,50=50px,52=52px,54=54px,56=56px,58=58px,60=60px,62=62px,64=64px,66=66px,68=68px,70=70px,72=72px,74=74px,76=76px,78=78px,80=80px", 
```

但是如果用户想使用 12.5 怎么办？所以我希望它成为一个输入选择框，而不仅仅是一个选择框。

我的意思是，就像它在 MS Word 中的方式一样，有点像输入选择控件：

![在此处输入图像描述](../Images/cbbcb065d5d2f70bc3d8a8d8417e0d5d.png)

我们如何添加此控件或编辑现有控件以将其变为此控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:19:18.733

由于在编辑器初始化时会读取此设置，因此您必须在`theme_advanced_font_sizes`初始化编辑器之前为其创建字符串。另一种方法是使用此设置重新启动编辑。然而，在用户选择所需的选项后，您关闭 tinymce 并重新启动它。对于配置，这将执行以下操作：

```
theme_advanced_font_sizes : "8=8px,10=10px,12=12.5px ..." 
```

# twitter - Twitter关注不同浏览器中的按钮问题

> ID：14479852
> 
> 赞同：2
> 
> 时间：2013-01-23T09:40:34.640
> 
> 标签：twitter, plugins, cross-browser, compatibility

我正在我的本地网站上进行社交插件集成，我正在尝试在其上添加 twitter 关注按钮......但它在不同的浏览器中表现不同......通常它在页面中的工作......我里面有一个滑块有这个代码......这就是它显示它的地方......我不知道为什么关注按钮在不同的浏览器中呈现不同......

我用来呈现关注按钮的代码，

```
<a href="https://twitter.com/Test" class="twitter-follow-button"
                  data-show-count="false" data-size="medium"></a> 
```

和这里的脚本，

```
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];
    if(!d.getElementById(id)){js=d.createElement(s);
    js.id=id;js.src="//platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
</script> 
```

我试过的类似代码，

```
<a href="https://twitter.com/Test" class="twitter-follow-button"
                  data-show-count="false" data-size="medium">Follow @Test</a> 
```

还有这个，

```
<a href="https://twitter.com/Test" class="twitter-follow-button"
                  data-show-count="false" data-size="medium">Follow</a> 
```

我已经用以下浏览器测试了这段代码，

**1.Firefox 2.Opera 3.Chrome 4.Safari**

1&2 正常工作，但 3&4 不能正常工作...

1&2 其节目**关注@Test**

3&4 只显示**关注**

有什么问题？为什么**@Test**在 3&4 浏览器中被遗漏了......或者我的代码需要一些更改......还是浏览器问题......

# objective-c - NSAttributedString 文本位置

> ID：14479854
> 
> 赞同：2
> 
> 时间：2013-01-23T12:33:09.470
> 
> 标签：objective-c, ios6, nsattributedstring

我对 a 进行了分类`UILabel`，所以我可以`TitleLabel`在几个地方使用它。这`TitleLabel`有一个自定义字体。`lineheight`设置为`NSAttributedString`.

**这是`drawTextInRect`覆盖方法：**

```
- (void)drawTextInRect:(CGRect)rect {
    self.text = @"THIS IS A TEST";
    NSMutableAttributedString *attStr = [[NSMutableAttributedString alloc] initWithString:self.text];

    NSMutableParagraphStyle *paragraphStyle = [[NSMutableParagraphStyle alloc] init];
    paragraphStyle.minimumLineHeight = 15.f;
    paragraphStyle.maximumLineHeight = 15.f;

    [attStr addAttribute:NSBackgroundColorAttributeName value:[UIColor yellowColor] range:NSMakeRange(0,7)];
    [attStr addAttribute:NSParagraphStyleAttributeName value:paragraphStyle range:NSMakeRange(0, self.text.length)];
    [attStr addAttribute:NSFontAttributeName value:[UIFont fontWithName:TITLE_FONT_NAME size:TITLE_FONT_SIZE] range:NSMakeRange(0, self.text.length)];

    self.attributedText = attStr;

    [super drawTextInRect:rect];
} 
```

添加背景颜色用于测试目的。如您所见，黄色背景颜色的位置正确。文本**THIS IS**应位于黄色背景中，但位于背景上方。 `TITLE_FONT_SIZE`是`15`，在别处定义。

![在此处输入图像描述](../Images/8d0a650f1e95b8a2ffd4faefd7652765.png)

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:44:00.287

您正在更改字体大小，因此如果字体太大，文本会被剪切。这很正常，根据矩形大小更改字体大小。让它变成这样：

```
[attStr addAttribute:NSFontAttributeName value:[UIFont fontWithName:TITLE_FONT_NAME size: MIN(rect.size.height*0.4,rect.size.width*0.4)] range:NSMakeRange(0, self.text.length)]; 
```

**编辑**

不确定哪个矩形被传递给该方法。文档中没有任何内容，可能是框架而不是视图边界。尝试这个：

```
[super drawTextInRect: [self convertRect: rect fromView: nil] ]; 
```

# selenium - WebDriver - Internet Explorer 中的键盘命令

> ID：14479870
> 
> 赞同：4
> 
> 时间：2013-01-23T12:34:00.500
> 
> 标签：selenium, webdriver

我在 WinXP32 上使用 Selenium 2.28 和 IE8。我需要能够将以下键盘命令发送到我的网页：`ALT + k`

以下在 Chrome 和 Firefox17 中完美运行：

```
- Chrome:
Actions builder = new Actions(driver);
builder.sendKeys(Keys.ALT, "k").build().perform();

- Firefox 17 (requires extra command key for same effect):
Actions builder = new Actions(driver);
builder.sendKeys(Keys.SHIFT, Keys.ALT, "k").build().perform(); 
```

我在 IE 中尝试了以下所有方法，但均未成功：

```
- builder.sendKeys(Keys.ALT, "k").build().perform();
- builder.sendKeys(Keys.ALT, Keys.SHIFT, "k").build().perform();
- builder.sendKeys(Keys.chord(Keys.ALT, "k")).build().perform();
- builder.sendKeys(Keys.chord(Keys.SHIFT, Keys.ALT, "k")).build().perform();
- builder.keyDown(Keys.ALT).sendKeys("k").build().perform();
- builder.keyDown(Keys.ALT).sendKeys("k").keyUp(Keys.ALT).build().perform();
- builder.keyDown(Keys.SHIFT).keyDown(Keys.ALT).sendKeys("k").build().perform();
- builder.keyDown(Keys.SHIFT).keyDown(Keys.ALT).sendKeys("k").keyUp(Keys.ALT).keyUp(Keys.SHIFT).build().perform(); 
```

关于如何实现我想要的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T17:00:25.773

我不得不求助于使用机器人来为 Internet Explorer 做这件事：

```
import java.awt.Robot
...
Robot robot;
try { 
  robot = new Robot();          
  robot.keyPress(KeyEvent.VK_ALT);
  robot.keyPress(KeyEvent.VK_K);
  robot.keyRelease(KeyEvent.VK_K);
  robot.keyRelease(KeyEvent.VK_ALT);
}catch (AWTException e) {
  e.printStackTrace();
} 
```

我宁愿只使用 Selenium API 来做这件事，但这种解决方法就足够了，直到有可能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-28T16:06:27.297

当前具有默认选项的驱动程序 (2.45) 使用 PostMessage，这对于模拟修饰键 [1] [2] 是不可靠的。如果您将 IE 选项“RequireWindowFocus”设置为 true，则驱动程序将使用 SendInput，这将起作用。

如果使用 C#，您将创建如下驱动程序：

```
var options = new InternetExplorerOptions();
options.RequireWindowFocus = true;

var driver = new InternetExplorerDriver(options); 
```

1.  [http://blogs.msdn.com/b/oldnewthing/archive/2005/05/30/423202.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2005/05/30/423202.aspx)
2.  [PostMessage WM_KEYDOWN 发送多个键？](https://stackoverflow.com/questions/7732633/postmessage-wm-keydown-send-multiply-keys)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-03T14:23:04.853

改写[daw](https://stackoverflow.com/a/29924449/4163398)对 Java 的回答，这是我发现将诸如 Control 之类的键发送到 IE 的唯一方法：

```
DesiredCapabilities capabilities = DesiredCapabilities.internetExplorer();
capabilities.setCapability(InternetExplorerDriver.REQUIRE_WINDOW_FOCUS, true);
WebDriver driver = new InternetExplorerDriver(capabilities); 
```

这具有 IEDriver 接管您的鼠标的副作用。

# components - 我在渲染页面时遇到了一些麻烦

> ID：14479876
> 
> 赞同：0
> 
> 时间：2013-01-23T12:34:13.457
> 
> 标签：components, render, apex-code

我有一个网站页面..在那个页面上我有一个注册表单和视频和一些文字......当我在注册页面注册然后回到这个已经注册的页面时，注册框消失了..看起来我已将我呈现的标签设置为在登录时隐藏注册表单。

我为此使用的代码-

```
<c:HomePageRightReglanding rendered="{!ISPICKVAL($User.UserType,'Guest')}" /> 
```

`HomePageRightReglanding`我有表单要显示的组件名称...

请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:09:21.110

访问公共站点的用户，用户类型为guest，但如果您已注册，用户类型将更改。

用户类型取决于用户许可证。

> 用户许可证的类别。每个 UserType 都与一个或多个 UserLicense 记录相关联。每个 UserLicense 都与一个或多个配置文件相关联。在 API 版本 10.0 及更高版本中，有效值包括：
> 
> *   标准：用户许可证。此用户类型还包括 Salesforce Platform 和 Salesforce Platform One 用户许可证。标签是标准的。
> *   PowerPartner：PRM 用户，由于他或她是合作伙伴，因此访问受到限制，通常通过合作伙伴门户访问应用程序。标签是合作伙伴。
> *   CSPLitePortal：访问受限的用户，因为他或她是组织的客户并通过客户门户访问应用程序。标签是高容量门户。
> *   CustomerSuccess：访问受限的用户，因为他或她是组织的客户并通过客户门户访问应用程序。标签是客户门户用户。
> *   PowerCustomerSuccess：访问受限的用户，因为他或她是组织的客户并通过客户门户访问应用程序。标签是客户门户经理。具有此许可类型的用户可以查看和编辑他们直接拥有的数据或客户门户角色层次结构中由他们拥有或与他们下面的用户共享的数据。

# wpf - 如何将另一个dll中的页面添加到wpf中的窗口中

> ID：14479881
> 
> 赞同：1
> 
> 时间：2013-01-23T12:34:30.917
> 
> 标签：wpf, wpf-controls

我用默认的 MainWindow.xaml 创建了一个新的 wpf 应用程序，

我创建了一个新页面：Page1.xaml，其中有一个按钮。

我想将页面嵌入到窗口中，所以我尝试了：

```
 <Window x:Class="WpfApplication1.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:WpfApplication1="clr-namespace:WpfApplication1" Title="MainWindow" Height="350" Width="525">
        <Grid>
            <WpfApplication1:Page1></WpfApplication1:Page1>
        </Grid>
    </Window> 
```

然后我得到了一个例外。

我在这里搜索，并得到了另一个解决方案，使用

所以我尝试了这个：

```
 <Window x:Class="WpfApplication1.MainWindow"
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:WpfApplication1="clr-namespace:WpfApplication1" Title="MainWindow" Height="350" Width="525">
        <Grid>
            <Frame Source="Page1.xaml"/>
        </Grid>
    </Window> 
```

有效。

但

如果 Page1.xaml 不在当前项目中而是在 dll 文件中怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:43:12.203

从另一个程序集获取资源的通用模板是：`Source="pack://application:,,,/YourAssembly;component/Subfolder/YourResourceFile.xaml"`

[在MSDN](http://msdn.microsoft.com/en-us/library/aa970069%28VS.85%29.aspx)上看看这个

# android - 使用 OverlayView 发送触摸事件

> ID：14479882
> 
> 赞同：1
> 
> 时间：2013-01-23T12:34:32.890
> 
> 标签：android, mouse-cursor, overlay-view

我正在部署一个使用 OverlayView 创建光标的应用程序。我可以在屏幕周围和我的应用程序（服务）之外移动它。

但现在我想实现触摸事件。我在服务中运行光标，所以我仍然可以在菜单或任何地方移动它。但我不知道如何点击。

因此，一旦我在我的应用程序之外，如果此服务获得点击事件（以编程方式或远程），我想在我的光标下的视图上进行触摸事件。

知道如何获取视图下的视图或如何发送系统触摸事件吗？

这就是我控制和绘制光标的方式：

```
class OverlayView extends ViewGroup {
private Paint mLoadPaint;
boolean mShowCursor;

Bitmap  cursor;
public int x = 0,y = 0;

public void Update(int nx, int ny) {
    x = nx; y = ny;
}
public void ShowCursor(boolean status) {
    mShowCursor = status;
}
public boolean isCursorShown() {
    return mShowCursor;
}

public OverlayView(Context context) {
    super(context);
    cursor = BitmapFactory.decodeResource(context.getResources(), R.drawable.ic_launcher);
    mLoadPaint = new Paint();
    mLoadPaint.setAntiAlias(true);
    mLoadPaint.setTextSize(10);
    mLoadPaint.setARGB(255, 255, 0, 0);
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    //canvas.drawText("Hello World", 0, 0, mLoadPaint);
    if (mShowCursor) canvas.drawBitmap(cursor,x,y,null);
}

@Override
protected void onLayout(boolean arg0, int arg1, int arg2, int arg3, int arg4) {
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    return true;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:19:21.570

正常的方法是使用`Instrumentation.sendPointerSync(motionEvent);`which use 权限：

```
<uses-permission android:name="android.permission.INJECT_EVENTS">
</uses-permission> 
```

但是...要获得 INJECT_EVENTS 权限，您的应用程序必须使用与系统签名相同的签名进行签名。（运行应用程序的设备的平台密钥...）例如：如果您想在三星设备上运行您的应用程序，您必须使用三星密钥签署您的应用程序...只有构造函数可以这样做...（对不起）

总之，您的应用程序只能在自身内部注入事件。（否则这将是一场安全噩梦，想象一个允许用户控制手机的 apk ......）

编辑：如果您有密钥（例如，如果您构建自己的设备、自己的 ROM），您应该使用 signapk.jar（Android 平台源包中包含的工具）对 apk 进行签名：

```
java -jar signapk.jar certificate.pem key.pk8 your-app.apk your-signed-app.apk 
```

# c# - WCF 在自托管服务上流式传输大数据 (500MB / 1GB)

> ID：14479885
> 
> 赞同：22
> 
> 时间：2013-01-23T12:34:46.703
> 
> 标签：c#, .net, wcf, wcf-data-services

我目前在尝试使用 WCF 自托管服务（无 IIS）发送大数据时遇到问题。使用流式传输结果传输 500MB，而我的服务因 System.OutOfMemoryException 而崩溃。是否有可能传输如此大量的数据？

这是我的 WCF 配置：

```
<system.serviceModel>
<services>
  <service  name="CIService" behaviorConfiguration="CIBehavior">        
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://localhost:6547/CIService/CIService.svc" />
      </baseAddresses>
    </host>
    <endpoint binding="netTcpBinding" 
        bindingConfiguration="netTcpBindingConfig" 
        behaviorConfiguration="CIBehavior.EndpointBehavior" 
        contract="CIService.ICreatable" />
    <endpoint address="mex" 
        binding="mexHttpBinding" 
        name="mexTcpBinding" 
        contract="IMetadataExchange" />
  </service>
</services>
<serviceHostingEnvironment multippleSiteBindingEnabled="True" />
<bindings>
  <netTcpBinding>
    <binding name="netTcpBindingConfig" closeTimeout="00:01:00" openTimeout="00:01:00" 
        receiveTimeout="01:00:00" sendTimeout="00:10:00" 
        hostNameComparisonMode="StrongWildcard" listenBacklog="10" maxConnections="10"
        maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" 
        transferMode="Streamed">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647"
        maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
    </binding>
  </netTcpBinding>
</bindings>

<behaviors>
  <serviceBehaviors>
    <behavior name="CIBehavior">
      <serviceMetadata httpGetEnabled="False" />
      <serviceDebug includeExceptionDetailInFaults="true" />
      <serviceThrottling maxConcurrentCalls="200"  maxConcurrentInstances="2147483647" maxConcurrentSessions="100" />
      <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
    </behavior>
  </serviceBehaviors>
  <endpointBehavior>
    <behavior name="CIBehavior.EndpointBehavior">
      <dataContractSerializer maxItemsInObjectGraph="2147483647" />
    </behavior>
  </endpointBehavior>
</behaviors>
</system.serviceModel> 
```

我的客户端配置：

```
<system.serviceModel>
<bindings>
  <netTcpBinding>
    <binding name="NetTcpBinding_ICreatable" 
             closeTimeout="00:01:00" openTimeout="00:01:00" 
             receiveTimeout="01:00:00" sendTimeout="00:10:00" 
             transactionFlow="false" 
             transferMode="Streamed" 
             transactionProtocol="OleTransactions" 
             hostNameComparisonMode="StrongWildcard" 
             listenBacklog="10" 
             maxBufferPoolSize="2147483647" 
             maxBufferSize="2147483647" 
             maxConnections="10"
             maxReceivedMessageSize ="2147483647">
      <readerQuotas
        maxDepth="2147483647" 
        maxStringContentLength="2147483647" 
        maxArrayLength="2147483647" 
        maxBytesPerRead="2147483647" 
        maxNameTableCharCount="2147483647" />
      <reliableSession ordered="true" inactivityTimeout="00:10:00" anabled="false" />
    </binding>
  </netTcpBinding>
</bindings>
<client>
  <endpoint name="NetTcpBinding_ICreatable" 
      address="net.tcp://localhost:6547/CIService/CIService.svc" 
      binding="netTcpBinding" 
      bindingConfiguration="NetTcpBinding_ICreatable" 
      behaviorConfiguration="CIBehavior.EndpointBehavior" 
      contract="ICreatable" />
</client>
<behaviors>
  <endpointBehavior>
    <behavior name="CIBehavior.EndpointBehavior">
      <dataContractSerializer maxItemsInObjectGraph="2147483647" />
    </behavior>
  </endpointBehavior>
</behaviors>
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-04T22:24:10.473

您不需要将**maxBufferSize**或**maxBufferPoolSize**设置得如此之高，这些可能会导致您的内存不足异常。默认值应该没问题。

查看MSDN 上的[大数据和流式传输，](http://msdn.microsoft.com/en-us/library/ms733742.aspx "大数据和流媒体")**特别是大数据的特殊安全注意事项**部分，这段文字很重要

> MaxBufferSize 属性是约束 WCF 缓冲的内存所必需的。流式传输时将其设置为安全值（或保持默认值）很重要。例如，假设您的服务必须接收最大为 4 GB 的文件并将它们存储在本地磁盘上。还假设您的内存受到限制，您一次只能缓冲 64 KB 的数据。然后将 MaxReceivedMessageSize 设置为 4 GB，将 MaxBufferSize 设置为 64 KB。此外，在您的服务实现中，您必须确保仅从 64 KB 块中的传入流中读取，并且在前一个块写入磁盘并从内存中丢弃之前不要读取下一个块。

我整理了一个非常简单的示例，将数据从自托管服务流式传输到控制台客户端。为了保持帖子简短，我只添加了服务器代码和客户端的一部分。

**服务合同**

```
using System.IO;
using System.ServiceModel;

namespace Service
{
    [ServiceContract]
    public interface IStream
    {
        [OperationContract]
        Stream GetLargeObject();
    }
} 
```

服务实现

```
using System;
using System.IO;
using System.ServiceModel;

namespace Service
{
   [ServiceBehavior]
   public class StreamService : IStream
   {
       public Stream GetLargeObject()
       {
           // Add path to a big file, this one is 2.5 gb
           string filePath = Path.Combine(Environment.CurrentDirectory, "C:\\Temp\\BFBC2_PC_Client_R11_795745_Patch.exe");

        try
        {
            FileStream imageFile = File.OpenRead(filePath);
            return imageFile;
        }
        catch (IOException ex)
        {
            Console.WriteLine(String.Format("An exception was thrown while trying to open file {0}", filePath));
            Console.WriteLine("Exception is: ");
            Console.WriteLine(ex.ToString());
            throw;
        }
    }
 }
} 
```

服务主体

```
using System;
using System.ServiceModel;

namespace Service
{
    class Program
    {
        static void Main(string[] args)
        {
            try
            {
                using (var serviceHost = new ServiceHost(typeof(StreamService)))
                {
                    serviceHost.Open();

                    Console.WriteLine("Press Any Key to end");
                    Console.ReadKey();
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
            }
        }
    }
} 
```

服务 app.config

```
<?xml version="1.0"?>
<configuration>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>

  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="StreamServiceBehavior">
          <serviceMetadata httpGetEnabled="True" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <netTcpBinding>
        <binding name="NewBinding0" transferMode="Streamed"/>
      </netTcpBinding>
    </bindings>
    <services>
      <service behaviorConfiguration="StreamServiceBehavior" name="Service.StreamService">
        <endpoint address="net.tcp://localhost:9000/streamserver" binding="netTcpBinding"
          bindingConfiguration="NewBinding0" bindingName="" contract="Service.IStream" />
        <endpoint address="mex" binding="mexHttpBinding"
          contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8080/StreamService" />
          </baseAddresses>
        </host>
      </service>
    </services>
  </system.serviceModel>
</configuration> 
```

启动服务，可能需要在管理员账户下运行才能打开套接字。创建客户端控制台应用程序并使用 url http://localhost:8080 / StreamService 添加服务引用，使用 Service 作为生成客户端的命名空间。

客户端主

```
using System;
using System.IO;
using Client.Service;

namespace Client
{
    class Program
    {
        static void Main(string[] args)
        {
            try
            {
                using (StreamClient streamClient = new StreamClient())
                {
                    streamClient.Open();

                    using (FileStream fileStream = new FileStream("c:\\temp\\bigfile.exe",FileMode.Create))
                    {
                        streamClient.GetLargeObject().CopyTo(fileStream);    
                    }
                }

                Console.WriteLine("Press any key to end");
                Console.ReadKey();
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex);
            }
        }
    }
} 
```

生成的客户端配置文件需要稍作修改，增加**receiveTimeout**并设置**maxReceivedMessageSize="4294967295"**

```
<system.serviceModel>
    <bindings>
        <netTcpBinding>
            <binding name="NetTcpBinding_IStream" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:30:00" sendTimeout="00:01:00"
                transactionFlow="false" transferMode="Streamed" transactionProtocol="OleTransactions"
                hostNameComparisonMode="StrongWildcard" listenBacklog="10"
                maxBufferPoolSize="524288" maxBufferSize="65536" maxConnections="10"
                maxReceivedMessageSize="4294967295">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00"
                    enabled="false" />
                <security mode="Transport">
                    <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
                    <message clientCredentialType="Windows" />
                </security>
            </binding>
        </netTcpBinding>
    </bindings>
    <client>
        <endpoint address="net.tcp://localhost:9000/streamserver" binding="netTcpBinding"
            bindingConfiguration="NetTcpBinding_IStream" contract="Service.IStream"
            name="NetTcpBinding_IStream">

        </endpoint>
    </client>
</system.serviceModel> 
```

启动服务，然后启动客户端。它将毫无问题地流式传输一个大文件。

# ios - 多对多关系中的CoreData排序

> ID：14479886
> 
> 赞同：0
> 
> 时间：2013-01-23T12:34:55.643
> 
> 标签：ios, core-data

我有一个核心数据设计问题，我是新手，我仍在研究 Apple 指南。

我有两个实体：“BOX”（属性：名称、颜色、orderingValue）和“CD”（唯一属性：名称）。这是一个多对多的关系。

在我的虚拟办公桌上，我可以有很多盒子。

一个盒子可以包含许多 CD。同一张 CD 的副本可以存储在桌子上的不同 BOX 中。

我使用 orderingValue 属性对 BOX 进行排序，以便它们可以在桌子上交换位置。

问题出在 CD 上。

我希望能够重新排列每个 BOX 中 CD 的顺序。我不能像对 BOX 那样对 CD 实体使用 orderingValue 属性，因为如果我将其设置为“5”，那么该 CD 将位于每个 BOX 中的第 5 位，这不是我想要的。

我想使用有序关系，但我放弃了这个选项，因为它还不兼容我想要支持的 iCloud。

使用标准数据库，我将使用 BOX.Id、CD.Id 和 orderingValue 创建第三个表，并将其与 JOIN 一起用于排序。

在不使用有序关系的情况下，在 CoreData 中处理这种情况的最佳选择是什么？

谢谢

尼古拉

更新：我听从了 codeghost 的建议，它完美无缺！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:46:39.940

我遵循了 codeghost 的建议：

1）我创建了第三个实体，我称之为“LinkedCD”，只有一个属性：orderingValue；

2）我创建了从实体“Box”到“LinkedCD”的一对多关系；

3) 我创建了从实体“Cd”到“LinkedCD”的一对多关系。

我现在可以对每个盒子的 CD 进行独立排序。

当我将 CD 添加到一个 BOX 时，我在 CoreData 中插入了一个新的 LinkedCD 实体，并计算了每次将 CD 移动到 BOX UITableView 内时我都会更新的起始 orderingValue。加载 UITableView 时，我用所有按 LinkedCD.orderingValue 排序的 LinkedCD.Cd.name 填充它。

一切都完美无缺。

尼古拉

# php - 在 php 中更新记录后图像应保持不变

> ID：14479889
> 
> 赞同：0
> 
> 时间：2013-01-23T12:34:58.807
> 
> 标签：php, mysql

我正在将一些包含标题、新闻日期和图像的数据上传到数据库，但是当我想更新它时，我遇到了问题。如果我更新除图像之外的所有行，那么基本上我想做什么，则不会发生更新。当我必须更新时，我基本上想要什么让我们假设只有标题才应该更新它，但所有其他数据应该保持不变，但问题是我必须在更新时再次从我的电脑中选择图像。我的情况是，我只是将名称保存在 db 中，而不是整个路径，并对我需要显示图像的路径进行硬编码

这是html

```
 <div class="row">
                            <label>Image upload</label>
                            <div class="right"><input type="file" name="file" value="<?php echo $row['images'];?>" /></div>
                        </div> 
```

这是php

```
 if(($_GET['mod']=='edit') && (isset($_POST['hidden'])))
{

    echo $_FILES["file"]["name"];
        $allowedExts = array("jpg", "jpeg", "gif", "png");
        $extension = end(explode(".", $images));
        if ((($_FILES["file"]["type"] == "image/gif")
        || ($_FILES["file"]["type"]   == "image/jpeg")
        || ($_FILES["file"]["type"]   == "image/png")
        || ($_FILES["file"]["type"]   == "image/pjpeg"))

        && in_array($extension, $allowedExts))
          {
           if ($_FILES["file"]["error"] > 0)
            {

            echo $_FILES["file"]["error"] . "<br>";
            }
          else
            {
            move_uploaded_file($_FILES["file"]["tmp_name"], "upload-images/" . $images);
            $update="UPDATE headline SET 
                                                headline_title  = '$title',   
                                                headline_des    = '$description',   
                                                month           = '$month_name', 
                                                day             = '$day_name', 
                                                year            = '$year_name', 
                                                featured        = '$featured',
                                                headline        = '$headline',
                                                images          = '$images' 
                                                where id        = ".$_GET['id']."";
             $result = mysql_query($update);    

              }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:42:36.897

再次提交表单将导致文件输入的新值将为**空** ，因此您必须检查它是否为空并根据状态进行操作

例如

```
if($_FILES['file']['name'] != "")
{
      //upload the image with what ever you want 
      //move_uploaded_file($_FILES['file']['tmp_name'],$target.$image );
      //the SQL query should contain the updating the image column 
         if(($_GET['mod']=='edit') && (isset($_POST['hidden'])))
         {

echo $_FILES["file"]["name"];
    $allowedExts = array("jpg", "jpeg", "gif", "png");
    $extension = end(explode(".", $images));
    if ((($_FILES["file"]["type"] == "image/gif")
    || ($_FILES["file"]["type"]   == "image/jpeg")
    || ($_FILES["file"]["type"]   == "image/png")
    || ($_FILES["file"]["type"]   == "image/pjpeg"))

    && in_array($extension, $allowedExts))
      {
       if ($_FILES["file"]["error"] > 0)
        {

        echo $_FILES["file"]["error"] . "<br>";
        }
      else
        {
        move_uploaded_file($_FILES["file"]["tmp_name"], "upload-images/" . $images);
        $update="UPDATE headline SET 
                                            headline_title  = '$title',   
                                            headline_des    = '$description',   
                                            month           = '$month_name', 
                                            day             = '$day_name', 
                                            year            = '$year_name', 
                                            featured        = '$featured',
                                            headline        = '$headline',
                                            images          = '$images' 
                                            where id        = ".$_GET['id']."";
         $result = mysql_query($update);    

          }
        }
}
else
{
      //SQL update without image 
        $update="UPDATE headline SET 
                                            headline_title  = '$title',   
                                            headline_des    = '$description',   
                                            month           = '$month_name', 
                                            day             = '$day_name', 
                                            year            = '$year_name', 
                                            featured        = '$featured',
                                            headline        = '$headline'
                                            WHERE id        = ".$_GET['id']."";
         $result = mysql_query($update);    

} 
```

如果您不想简单地编辑图像，您可以将其从更新中删除，并使用用于该图像的表单，或者它是隐藏输入中的路径

希望这会有所帮助

根据您的评论，查询应该是这样的

```
 $update="UPDATE headline SET 
                                            headline_title  = '$title',   
                                            headline_des    = '$description',   
                                            month           = '$month_name', 
                                            day             = '$day_name', 
                                            year            = '$year_name', 
                                            featured        = '$featured',
                                            headline        = '$headline'
                                            WHERE id        = ".$_GET['id']."";
         $result = mysql_query($update); 
```

**我认为您需要使用良好的意图使您的代码在将来更具可读性和可维护性:)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-27T17:35:17.880

解决方案

1.  检查文件是否为空：`if(!empty($_FILES['fileToUpload']['name']))`
2.  在 IF 语句中使用表中提及图像列的更新查询， **如果图像未上传，则将上传**。
3.  在 ELSE 语句中不提及表中的图像列进行更新查询，如果文件为空，则会上传

***结论***

下次当您更新任何其他字段时，图像不会消失，这意味着数据库中的文件路径不会为空，并且如果已经存在，除非您手动更改它，否则它不会更改..

# php - 高级订购

> ID：14479893
> 
> 赞同：-3
> 
> 时间：2013-01-23T12:35:22.333
> 
> 标签：php, mysql, sql, select

我正在导出一些记录以放入 Excel 并发送给客户，问题是让记录以正确的顺序从数据库中出来。

基本上我有一个带有股票代码（abc13424）的产品表，然后是产品名称（洗手-香水，身体黄油-香水等）。

我混合了来自不同年份的股票代码，所以 abc11234、abc12834、abc13424 等。我需要实现的是基本上显示按产品名称购买的“手洗”分组的记录，然后最终在内部和外部拥有这些组按股票代码排序。

样本结果：-

![在此处输入图像描述](../Images/09b10e5f613529ca970c91dea81e74cf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:48:13.420

您搜索的内容似乎是这样的：

```
SELECT * 
FROM `productTable`
ORDER BY `name`, `code` 
```

`ORDER BY`您可以在子句中列出任意数量的列。然后排序将使用您提到的第一列对结果数据进行排序。如果您在多行的第一列中有相同的条目，它们将按给定的第二列排序。如果它们再次相等，则将使用第三列，依此类推。

**编辑**

因此，根据您的评论，我们似乎需要拆分一列，以便进行适当的排序。

假设该`-`字符是分隔符，我们可以使用如下[`SUBSTRING_INDEX`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index)方式拆分`name`列：

```
SELECT *,
       SUBSTRING_INDEX( `name`, '-', 1) AS `category`
FROM `productTable`
ORDER BY `category`, `code` 
```

# supervisord - 停止supervisord：关闭

> ID：14479894
> 
> 赞同：49
> 
> 时间：2013-01-23T12:35:22.443
> 
> 标签：supervisord

我厌倦了启动主管，但出现错误。任何人都可以帮忙吗？谢谢

/etc/init.d/supervisord 文件。

```
SUPERVISORD=/usr/local/bin/supervisord
SUPERVISORCTL=/usr/local/bin/supervisorctl
case $1 in
start)
        echo -n "Starting supervisord: "
        $SUPERVISORD
        echo
        ;;
stop)
        echo -n "Stopping supervisord: "
        $SUPERVISORCTL shutdown
        echo
        ;;
restart)
        echo -n "Stopping supervisord: "
        $SUPERVISORCTL shutdown
        echo
        echo -n "Starting supervisord: "
        $SUPERVISORD
        echo
        ;;
esac 
```

然后运行这些

```
sudo chmod +x /etc/init.d/supervisord
sudo update-rc.d supervisord defaults
sudo /etc/init.d/supervisord start 
```

得到这个：

```
Stopping supervisord: Shut down

Starting supervisord: /usr/local/lib/python2.7/dist-packages/supervisor/options.py:286: UserWarning: Supervisord is running as root and it is searching for its configuration file in default locations (including its current working directory); you probably want to specify a "-c" argument specifying an absolute path to a configuration file for improved security.
  'Supervisord is running as root and it is searching '
Error: Another program is already listening on a port that one of our HTTP servers is configured to use.  Shut this program down first before starting supervisord.
For help, use /usr/local/bin/supervisord -h 
```

配置文件（位于`/etc/supervisord.conf`）：

```
[unix_http_server]
file=/tmp/supervisor.sock; (the path to the socket file)

[supervisord]
logfile=/tmp/supervisord.log ; (main log file;default $CWD/supervisord.log)
logfile_maxbytes=50MB       ; (max main logfile bytes b4 rotation;default 50MB)
logfile_backups=10          ; (num of main logfile rotation backups;default 10)
loglevel=info               ; (log level;default info; others: debug,warn,trace)
pidfile=/tmp/supervisord.pid ; (supervisord pidfile;default supervisord.pid)
nodaemon=false              ; (start in foreground if true;default false)
minfds=1024                 ; (min. avail startup file descriptors;default 1024)
minprocs=200                ; (min. avail process descriptors;default 200)

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl=unix:///tmp/supervisor.sock; use a unix:// URL  for a unix socket

[program:myproject]
command=/home/richard/envs/myproject_stage/bin/python /home/richard/webapps/myproject/manage.py run_gunicorn -b 127.0.0.1:8002 --log-file=/tmp/myproject_stage_gunicorn.log
directory=/home/richard/webapps/myproject/
user=www-data
autostart=true
autorestart=true
stdout_logfile=/tmp/myproject_stage_supervisord.log
redirect_stderr=true 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2014-05-06T21:56:44.137

首先，在您的控制台或终端上输入

```
ps -ef | grep supervisord 
```

你会得到一些supervisord的pid，就像这些

> 根 2641 12938 0 04:52 pts/1 00:00:00 grep --color=auto supervisord
> 
> 根 29646 1 0 04:45 ？00:00:00 /usr/bin/python /usr/local/bin/supervisord

如果你得到这样的输出，你的 pid 是第二个。那么如果你想关闭你的主管，你可以这样做

```
kill -s SIGTERM 29646 
```

希望它有帮助。参考：[http ://supervisord.org/running.html#signals](http://supervisord.org/running.html#signals)

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-01-23T12:41:55.427

```
sudo unlink /tmp/supervisor.sock 
```

此*.sock*文件在`/etc/supervisord.conf`[ **unix_http_server** ] 的文件配置值中定义（默认为 /tmp/supervisor.sock）。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-11-15T06:31:52.383

```
$ ps aux | grep supervisor
alexamil         54253   0.0  0.0  2506960   6440   ??  Ss   10:09PM   0:00.26 /usr/bin/python /usr/local/bin/supervisord -c supervisord.conf 
```

所以我们可以使用：

```
$ pkill -f supervisord  # kill it 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-07-08T07:10:34.957

尝试运行这些命令

```
sudo unlink /run/supervisor.sock 
```

和

```
sudo /etc/init.d/supervisor start 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-02-04T22:42:56.687

这对我有用。在终端中运行以下命令（适用于 Linux 机器）

要检查进程是否正在运行：

```
sudo systemctl status supervisor 
```

要停止该过程：

```
sudo systemctl stop supervisor 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-02-14T16:07:44.017

从 version 开始`3.0a11`，您可以这样做：

`sudo kill -s SIGTERM $(sudo supervisorctl pid)`它跳到函数的后面`supervisorctl pid`。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-02-06T12:58:48.650

          There are many answers already available. I shall present a **cleaner way** to shut down supervisord.

          supervisord by default, creates a file named **supervisord.pid** in the directory where supervisord.conf file exists. That file consists the pid of the supervisord daemon. Read the pid from the file and kill the supervisord process.

          However, you can configure where the supervisord.pid file should be created. Refer this link to configure it, [http://supervisord.org/configuration.html](http://supervisord.org/configuration.html)

# javascript - 主干视图输出

> ID：14479895
> 
> 赞同：0
> 
> 时间：2013-01-23T12:35:22.383
> 
> 标签：javascript, backbone.js

我正在尝试使用主干视图在页面上输出一些 h1 文本，但由于某种原因它不起作用。如果我在准备好的文档中使用它，我可以显示 h1，但在渲染函数中使用它时不能。

```
var HomeView = Backbone.View.extend({
  el:'body',
  intialize: function () {
    this.render();
    },
  render: function () {
    this.$el.empty();
    this.$el.append("<h1>My first Backbone app</h1>"); // not showing on the page
    return this;
    }
})
$(document).ready(function () {
  wineApp = new HomeView();
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:39:47.700

`this.el`是一个 DOM 元素，而`this.$el`是一个 jQuery 对象。jQuery 对象有一个[`append`](http://api.jquery.com/append/)对普通 DOM 元素不可用的功能。

您还可以通过运行将 DOM 元素转换为 jQuery 对象`$(this.el)`。

* * *

这是一个错字：该函数`intialize`应该在*i* ialize 中调用。目前该函数根本没有被调用。

# java - 如何在我的 android 应用程序中使用 onItemClick？

> ID：14479897
> 
> 赞同：0
> 
> 时间：2013-01-23T12:35:25.550
> 
> 标签：java, android, sqlite, listview, onitemclick

嗨，我的 android 应用程序中的 onItemClick 有问题。我试了一下，但我得到了一个错误。我希望在我的列表视图中从 sqlite 数据库中获取数据，并且可以单击此列表中的一个值以使用该值启动另一个活动。有关更多信息，请参阅我的代码：

我的活动：

```
public class ShowActivity extends ListActivity { 
```

我的方法：

```
private void ladeDaten() {
        Cursor KlassenCursor = mDatenbank.rawQuery(KLASSEN_SELECT_ROW, null); 
        startManagingCursor(KlassenCursor); 

        android.widget.SimpleCursorAdapter KlassenAdapter = new android.widget.SimpleCursorAdapter(this,
                android.R.layout.simple_list_item_1, 
                KlassenCursor, 
                new String[] {"name"},
                new int[] {
                android.R.id.text1
                });

        setListAdapter(KlassenAdapter);

        ListView lv = (ListView)findViewById(android.R.id.list); 

        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent,View view,int position,long id){

                Cursor cursor = (Cursor)parent.getItemAtPosition(position);

                String item = cursor.getString(cursor.getColumnIndex("name"));

                Intent intent = new Intent(this,ShowActivity.class); //here is the error

                intent.putExtra("iteid", item); 

                startActivity(intent);
            }
        });

    } 
```

我的布局：...

```
 </ListView> 
```

...

我的错误：

```
The constructor Intent(new AdapterView.OnItemClickListener(){}, Class<ShowActivity>) is undefined 
```

我能做些什么？:(

**更新：**

```
public void onItemClick(AdapterView<?> parent,View view,int position,long id){

                Cursor cursor = (Cursor)parent.getItemAtPosition(position);

                String item = cursor.getString(cursor.getColumnIndex("name"));

                Intent intent = new Intent(ShowDayActitiy,ShowDayActivity.class); //here is the error

                intent.putExtra("iteid", item); 

                startActivity(intent);
            }
        }); 
```

我想开始一个活动:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:42:49.733

发生这种情况是因为在您创建意图时，第一个参数是 context 。您正在从 onClick() 创建意图，因此其中的上下文不属于外部活动。意图应该将当前活动的上下文作为第一个参数

因此使用`ShowActivity.this`或`getApplicationContext()`代替使用这个

```
Intent intent = new Intent(getApplicationContext(), SecondActivity.class) 
```

或者

```
Intent intent = new Intent(FirstActivity.this, SecondActivity.class) 
```

会成功的。

请随时提出任何进一步的疑问

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:36:32.070

改变这个

```
Intent intent = new Intent(this,ShowActivity.class); 
```

到

```
Intent intent = new Intent(ShowActivity.this,ShowActivity.class); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T12:36:51.613

采用

```
Intent intent = new Intent(ShowActivity.this,ShowActivity.class); 
```

或者

```
Intent intent = new Intent(view.getContext(),ShowActivity.class); 
```

代替

```
Intent intent = new Intent(this,ShowActivity.class); 
```

要启动 Activity，您需要传递 Activity 上下文而不是视图

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T12:39:31.047

您的意图代码有问题

```
Intent intent = new Intent(getapplicationContext(),ShowActivity.class); 
intent.putExtra("iteid", item); 
startActivity(intent); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-23T12:40:04.753

检查代码中 OnItemClickListener() 的导入。您使用了 adapter.onitemClickListener。

删除该导入并导入**ListView.onItemClickListener**。

您可以使用

onItemClick(AdapterView adapterView, View view, int position, long value) {}

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-23T12:40:33.067

`Intent intent = new Intent(ShowActivity.this,ShowActivity.class);`当您在 nItemClickListener 中使用“this”时设置，您没有获得 Activity 上下文。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-23T12:50:37.273

AdapterView 父级

使用 parent.getitematpostion(postion).toString()。它会帮助你。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-08-31T18:55:04.577

请更正代码

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);        
        setContentView(R.layout.showroom);        
        initView(); 

        ListView list = getListView();
        list.setOnItemClickListener(new OnItemClickListener() {
             public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

         if(dialog != null)  dialog.dismiss();
            Dialog_Sh_Adapter task = new Dialog_Sh_Adapter(GStore.this, data);
            setListAdapter(task); 

                }
            }); 
```

# iphone - iPhone，In Flurry Ads 只会出现视频广告

> ID：14479901
> 
> 赞同：0
> 
> 时间：2013-01-23T12:35:36.983
> 
> 标签：iphone, ios, xcode, flurry

我在我的应用程序中使用 Flurry Ads，它运行良好

现在我的问题是什么时候会出现乱舞广告，它只显示视频广告，我可以看到像 iAd 或 RevMobs 广告这样的广告吗

请提供任何帮助

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:50:45.537

我得到了答案

```
[FlurryAds fetchAdForSpace:@"adSpace" frame:self.view.frame size:BANNER_BOTTOM]; 
```

我们只得到像 iAd 和 RevMobs 这样的广告

# php - PHP- Google Api 获得目标完成量

> ID：14479904
> 
> 赞同：3
> 
> 时间：2013-01-23T12:35:54.210
> 
> 标签：php, google-api, google-api-client, google-api-php-client

我使用来自 google api 的这段代码

我得到了所有的目标名称和编号

但我看不到获得目标完成金额的方法

这就是我得到的：

```
 Account ID               = xxx
            Web Property ID          = xxx
            Internal Web Property ID = xxx
            Profile ID               = xxx

            Goal Number = 1
            Goal Name   = Open User (MT Register)
            Goal Value  = 0
            Goal Active = 1
            Goal Type   = URL_DESTINATION

            Created = 2012-07-22T10:20:02.183Z
            Updated = 2012-08-15T12:43:06.045Z

Goal URL            = /04_thankyou.php
Case Sensitive      = 
Match Type          = REGEX
First Step Required = 1

Destination Goal Steps

Step Number = 1
Step Name   = abc
  Step URL    = /01_insert_phone.php

Step Number = 2
Step Name   = abcd
  Step URL    = /02_progress.step

Step Number = 3
Step Name   = abcde
  Step URL    = /03_insert_pincode.php 
```

这是代码：

```
function getEventDetailsHtml(&$details) {
  $html = '<h4>Event Goal</h4><pre>' .
          'Use Event Value = ' . $details->getUseEventValue();

  // Get all the event goal conditions.
  $conditions = $details->getEventConditions();

  foreach ($conditions as &$condition) {
    $html .= "Event Type = $condition->getEventType()";

    $eventType = $condition->getType();
    if ($condition->getType() == 'VALUE') {
      // Process VALUE.
      $html .= "Comparison Type  = $condition->getComparisonType()" .
               "Comparison Value = $condition->getComparisonValue()";

    } else {
      // Process CATEGORY, ACTION, LABEL.
      $html .= "Match Type = $condition->getMatchType()" .
               "Expression = $condition->getExpression()";
    }
  }

  return $html . '</pre>';
}

function getVisitNumPagesDetailsHtml(&$details) {
  $html = '<h4>Visit Num Pages Goal</h4>';
  $html .= <<<HTML
<pre>

Comparison Type  = {$details->getComparisonType()}
Comparison Value = {$details->getComparisonValue()}

</pre>
HTML;
  return $html;
}

function getVisitTimeOnSiteDetailsHtml(&$details) {
  $html = '<h4>Visit Time On Site Goal</h4>';
  $html .= <<<HTML
<pre>

Comparison Type  = {$details->getComparisonType()}
Comparison Value = {$details->getComparisonValue()}

</pre>
HTML;
  return $html;
}

function getUrlDestinationDetailsHtml(&$details) {
  $html .= <<<HTML

<pre>

Goal URL            = {$details->getUrl()}
Case Sensitive      = {$details->getCaseSensitive()}
Match Type          = {$details->getMatchType()}
First Step Required = {$details->getFirstStepRequired()}

</pre>
HTML;

  $html .= '<h4>Destination Goal Steps</h4>';
  $steps = $details->getSteps();
  if (count($steps) == 0) {
    $html .= '<p>No Steps Configured</p>';

  } else {
    foreach ($steps as &$step) {
      $html .= <<<HTML
<pre>

Step Number = {$step->getNumber()}
Step Name   = {$step->getName()}
  Step URL    = {$step->getUrl()}

  </pre>
HTML;
    }
  }
  return $html;
}

    require_once 'google_api.php';

    if (isset($_SESSION['token'])) { 
        $client->setAccessToken($_SESSION['token']); 
    }

    if (!$client->getAccessToken()) {
      $authUrl = $client->createAuthUrl();
      print "<a class='login' href='$authUrl'>Connect Me!</a>";

    } else {
      $analytics = new Google_AnalyticsService($client);

        try {
          $goals = $analytics->management_goals
                             ->listManagementGoals('25788360',
                                                   'UA-25788360-20',
                                                   '~all');

        } catch (Exception $e) {
          print 'There was a general API error '
            . $e->getCode() . ':' . $e->getMessage();
        }

        $html = '';
$items = $goals->getItems();
  foreach ($items as &$goal) {
    $html .= "
            <pre>
            Account ID               = {$goal->getAccountId()}
            Web Property ID          = {$goal->getWebPropertyId()}
            Internal Web Property ID = {$goal->getInternalWebPropertyId()}
            Profile ID               = {$goal->getProfileId()}

            Goal Number = {$goal->getId()}
            Goal Name   = {$goal->getName()}
            Goal Value  = {$goal->getValue()}
            Goal Active = {$goal->getActive()}
            Goal Type   = {$goal->getType()}

            Created = {$goal->getCreated()}
            Updated = {$goal->getUpdated()}
            </pre>";

    // Now get the HTML for the type of goal.
    switch($goal->getType()) {
      case 'URL_DESTINATION':
        $html .= getUrlDestinationDetailsHtml(
            $goal->getUrlDestinationDetails());
        break;

      case 'VISIT_TIME_ON_SITE':
        $html .= getVisitTimeOnSiteDetailsHtml(
            $goal->getVisitTimeOnSiteDetails());
        break;

      case 'VISIT_NUM_PAGES':
        $html .= getVisitNumPagesDetailsHtml(
            $goal->getVisitNumPagesDetails());
        break;

      case 'EVENT':
        $html .= getEventDetailsHtml(
            $goal->getEventDetails());
        break;
  }

    echo $html;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:35:56.500

您似乎正在使用管理 API。这仅用于管理目的。获得和设定目标。

如果您还需要来自目标的数据，则需要查看 Core Reporting API。

可在此处找到目标的可用数据： [https ://developers.google.com/analytics/devguides/reporting/core/dimsmets/goalconversions](https://developers.google.com/analytics/devguides/reporting/core/dimsmets/goalconversions)

可在此处找到实施指南： [https ://developers.google.com/analytics/devguides/reporting/core/v3/coreDevguide](https://developers.google.com/analytics/devguides/reporting/core/v3/coreDevguide)

我没有提供完整的实现示例，因为您已经知道如何设置 Google API 的使用。

祝你任务顺利！

编辑：添加了一个关于如何使用它的示例：

```
<?php
$client = new apiAnalyticsService();

function queryCoreReportingApi() {
    $optParams = array( //OPTINAL SETTINGS
      'dimensions' => '', //A comma-separated list of Multi-Channel Funnels dimensions. E.g., 'mcf:source,mcf:medium'. (string)
      'sort' => '', //A comma-separated list of dimensions or metrics that determine the sort order for the Analytics data. (string)
      'filters' => '', //A comma-separated list of dimension or metric filters to be applied to the Analytics data. (string)
      'start-index' => '', //An index of the first entity to retrieve. Use this parameter as a pagination mechanism along with the max-results parameter. (integer, 1+)
      'fields' => '', //Selector specifying which fields to include in a partial response.
      'max-results' => '25'); //The maximum number of entries to include in this feed. (integer)

  return $service->data_mcf->get(
      $id, //Unique table ID for retrieving Analytics data. Table ID is of the form ga:XXXX, where XXXX is the Analytics profile ID. (string)
      '2010-01-01', //Start date for fetching Analytics data. All requests should specify a start date formatted as YYYY-MM-DD. (string)
      '2010-01-15', //End date for fetching Analytics data. All requests should specify an end date formatted as YYYY-MM-DD. (string)
      'ga:totalConversions', //A comma-separated list of Multi-Channel Funnels metrics. E.g., 'mcf:totalConversions,mcf:totalConversionValue'. At least one metric must be specified. (string)
      $optParams);
} 
```

# c# - 带有参数的 ASP.NET 报告

> ID：14479905
> 
> 赞同：1
> 
> 时间：2013-01-23T12:35:54.647
> 
> 标签：c#, asp.net, reporting-services

我有一个名为“Graph”的存储过程，它应该获取参数@Material 的值，并且我在 ASP.NET 中创建了一个报告，该报告应该使用来自存储过程的数据显示一个图表。

但是，当我尝试加载报告时，我得到：

> 报告处理过程中发生错误。无法创建到数据源“PhilipsMaterialsDataSet”的连接。ObjectDataSource“ObjectDataSource1”找不到没有参数的非泛型方法“GetData”。

我尝试了不同的解决方案，但都没有奏效。另外，我不确定是否应该在 ASP 代码中声明参数。

（顺便说一句，GetData 在这里无法识别，因为它有一个参数（@Material-来自存储过程），并且由于某种原因，它在没有任何参数的情况下被调用）

后面的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Configuration;
using System.Data;
using System.Data.SqlClient;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using Microsoft.Reporting.WebForms;

public partial class StatisticsPage : System.Web.UI.Page
{
    string Connectionstring = "server=(local)\\SQLEXPRESS;database=PhilipsMaterials;Integrated Security=SSPI";
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {

        }

    }

   protected void btndisplay_Click(object sender, EventArgs e)
    {
        BindReport();
    }
    private void BindReport()
    {
        SSRSReport report = new SSRSReport();
        SqlParameter[] sqlParams = new SqlParameter[] {
         new SqlParameter("@Material","453567068441")

      };
        string ReportDataSource = "DataSet1";
        bool bind = report.CreateReport(Connectionstring, "graph", sqlParams, ref ReportViewer1, ReportDataSource);
        if (bind)
        {
            ReportViewer1.Visible = true;
        }
    }
}

public class SSRSReport
{

       public SSRSReport()
       {
              //
              // TODO: Add constructor logic here
              //
       }
    public bool CreateReport(String Connectionstring,string StoreProcedureName ,SqlParameter[] Parameter,ref  Microsoft.Reporting.WebForms.ReportViewer ReportViewer,string ReportDataSource)
    {
        bool reportbind = false;
        using (SqlConnection con = new SqlConnection(Connectionstring))
        {

            SqlCommand com = new SqlCommand();
            com.Connection = con;
            com.CommandType = CommandType.StoredProcedure;
            com.CommandText = StoreProcedureName;
            com.Parameters.AddRange(Parameter);
            DataSet ds = new DataSet();
            SqlDataAdapter da = new SqlDataAdapter(com);
            da.Fill(ds);
            ReportDataSource datasource = new ReportDataSource(ReportDataSource, ds.Tables[0]);
            if ( ds.Tables[0].Rows.Count > 0)
            {
                ReportViewer.LocalReport.DataSources.Clear();
                ReportViewer.LocalReport.DataSources.Add(datasource);

                //This is another solution I tried:

                //List<ReportParameter> lstReportParameters = new List<ReportParameter>();
                //ReportParameter objReportParameter = new ReportParameter("Material", "453567068441");
                //lstReportParameters.Add(objReportParameter);
                //ReportViewer.LocalReport.SetParameters(lstReportParameters);
               // ReportViewer.ServerReport.Refresh();

                reportbind = true;
            }                       
        }
       return  reportbind;
    }

} 
```

ASP 代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="StatisticsPage.aspx.cs" Inherits="StatisticsPage" %>

<%@ Register assembly="Microsoft.ReportViewer.WebForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" namespace="Microsoft.Reporting.WebForms" tagprefix="rsweb" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title>Test SSRS</title>
</head>
<body>
      <form id="form1" runat="server">
    <div>

    </div>
        <rsweb:ReportViewer ID="ReportViewer1" runat="server" Font-Names="Verdana" Font-Size="8pt" WaitMessageFont-Names="Verdana" WaitMessageFont-Size="14pt" Height="610px" Width="1179px" ShowParameterPrompts="true">
            <LocalReport ReportPath="Report.rdlc" >
                <DataSources>
                    <rsweb:ReportDataSource DataSourceId="ObjectDataSource1" Name="DataSet1" />
                </DataSources>
            </LocalReport>
        </rsweb:ReportViewer>
        <asp:ObjectDataSource ID="ObjectDataSource1" runat="server" SelectMethod="GetData" TypeName="PhilipsMaterialsDataSetTableAdapters.GraphTableAdapter" >
        </asp:ObjectDataSource>
          <asp:ScriptManager ID="ScriptManager1" runat="server">
          </asp:ScriptManager>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:10:22.250

错误是说 GetData 需要一些参数，您必须通过添加如下参数来提供它们：

```
<asp:ObjectDataSource ID="ObjectDataSource1" runat="server" SelectMethod="GetData" TypeName="PhilipsMaterialsDataSetTableAdapters.GraphTableAdapter" >
   <SelectParameters>
        <asp:Parameter Name="X" DefaultValue="Y" .. />
   </SelectParameters>
</asp:ObjectDataSource> 
```

# javascript - DOM 找到当前选中的下拉元素

> ID：14479909
> 
> 赞同：0
> 
> 时间：2013-01-23T12:36:04.550
> 
> 标签：javascript, dom

> **可能重复：**
> [如何使用 JavaScript 获取下拉列表的选定值？](https://stackoverflow.com/questions/1085801/how-to-get-the-selected-value-of-dropdownlist-using-javascript)
> [javascript 选择值](https://stackoverflow.com/questions/5416767/javascript-selected-value)

我有一个数量的下拉列表，如下所示：

```
<select id="Quantity" name="Quantity" class="quantity_select">
    <option id="1" selected="selected" value="1">1</option>
    <option id="2" value="2">2</option>
    <option id="3" value="3">3</option>
</select> 
```

我需要使用 javascript 来查找当前选定数量的值。当我选择例如选项 2 时， selected="selected" 不会更改为新选项。如何使用 DOM 获取当前选择的数量？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T12:38:38.453

**选项1**

HTML

```
<select id="Quantity" name="Quantity" 
        class="quantity_select" onchange="SetValue(this.value)>
    <option id="1" selected="selected" value="1">1</option>
    <option id="2" value="2">2</option>
    <option id="3" value="3">3</option>
</select> 
```

JavaScript

```
function SetValue(val) {
    alert(val); // This will be the selected value in the drop down
} 
```

**选项 2**

如果您已经有 JS，并且不想使用选项 1，则可以简单地使用以下命令获取值`getElementById()`：

```
var ddl = document.getElementById('Quantity');
var val = ddl.options[ddl.selectedIndex].value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T12:38:29.987

采用`document.getElementById('Quantity').value`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T12:39:30.563

采用

```
document.getElementById('Quantity').options[document.getElementById('Quantity').selectedIndex].value; 
```

# aptana - Aptana 无法更新或添加插件

> ID：14479911
> 
> 赞同：5
> 
> 时间：2013-01-23T12:36:11.907
> 
> 标签：aptana, aptana3

您好，提前感谢您的帮助。我在 Aptana 上遇到问题。如果我尝试更新或添加新插件，则会出现错误弹出窗口，并显示以下消息：

在“联系软件站点”期间发生内部错误。org/eclipse/ecf/core/identity/ID.

我的配置：带有肉桂 Aptana Studio 3 的 Ubuntu 12.10，构建：3.3.1.201212171919

```
the last Error log
******************
!ENTRY org.eclipse.core.jobs 4 2 2013-01-23 13:06:06.236
!MESSAGE An internal error occurred during: "Contacting Software Sites".
!STACK 0
java.lang.NoClassDefFoundError: org/eclipse/ecf/core/identity/ID
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defineClass(DefaultClassLoader.java:188)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClassHoldingLock(ClasspathManager.java:626)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClass(ClasspathManager.java:601)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findClassImpl(ClasspathManager.java:562)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClassImpl(ClasspathManager.java:486)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:459)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:400)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:473)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at org.eclipse.equinox.internal.p2.transport.ecf.RepositoryTransport.download(RepositoryTransport.java:86)
    at org.eclipse.equinox.internal.p2.transport.ecf.RepositoryTransport.download(RepositoryTransport.java:137)
    at org.eclipse.equinox.internal.p2.repository.helpers.AbstractRepositoryManager.loadIndexFile(AbstractRepositoryManager.java:721)
    at org.eclipse.equinox.internal.p2.repository.helpers.AbstractRepositoryManager.loadRepository(AbstractRepositoryManager.java:640)
    at org.eclipse.equinox.internal.p2.metadata.repository.MetadataRepositoryManager.loadRepository(MetadataRepositoryManager.java:96)
    at org.eclipse.equinox.internal.p2.metadata.repository.MetadataRepositoryManager.loadRepository(MetadataRepositoryManager.java:92)
    at org.eclipse.equinox.p2.ui.LoadMetadataRepositoryJob.doLoad(LoadMetadataRepositoryJob.java:117)
    at org.eclipse.equinox.p2.ui.LoadMetadataRepositoryJob.runModal(LoadMetadataRepositoryJob.java:102)
    at org.eclipse.equinox.internal.p2.ui.sdk.PreloadingRepositoryHandler$2.runModal(PreloadingRepositoryHandler.java:82)
    at org.eclipse.equinox.p2.operations.ProvisioningJob.run(ProvisioningJob.java:177)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
Caused by: org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter$TerminatingClassNotFoundException: An error occurred while automatically activating bundle org.eclipse.ecf.identity (440).
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:122)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:463)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:400)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:473)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defineClass(DefaultClassLoader.java:188)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClassHoldingLock(ClasspathManager.java:626)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClass(ClasspathManager.java:601)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findClassImpl(ClasspathManager.java:562)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClassImpl(ClasspathManager.java:486)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:459)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:400)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:473)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at org.eclipse.equinox.internal.p2.transport.ecf.RepositoryTransport.download(RepositoryTransport.java:86)
    at org.eclipse.equinox.internal.p2.transport.ecf.RepositoryTransport.download(RepositoryTransport.java:137)
    at org.eclipse.equinox.internal.p2.repository.helpers.AbstractRepositoryManager.loadIndexFile(AbstractRepositoryManager.java:721)
    at org.eclipse.equinox.internal.p2.repository.helpers.AbstractRepositoryManager.loadRepository(AbstractRepositoryManager.java:640)
    at org.eclipse.equinox.internal.p2.metadata.repository.MetadataRepositoryManager.loadRepository(MetadataRepositoryManager.java:96)
    at org.eclipse.equinox.internal.p2.metadata.repository.MetadataRepositoryManager.loadRepository(MetadataRepositoryManager.java:92)
    at org.eclipse.equinox.internal.p2.updatechecker.UpdateChecker.getAvailableRepositories(UpdateChecker.java:150)
    at org.eclipse.equinox.internal.p2.updatechecker.UpdateChecker.checkForUpdates(UpdateChecker.java:128)
    at org.eclipse.equinox.internal.p2.updatechecker.UpdateChecker$UpdateCheckThread.run(UpdateChecker.java:72)
Caused by: org.osgi.framework.BundleException: Exception in org.eclipse.ecf.internal.core.identity.Activator.start() of bundle org.eclipse.ecf.identity.
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:299)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:268)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    ... 34 more
Caused by: java.lang.VerifyError: (class: org/eclipse/ecf/core/identity/BaseID, method: implies signature: (Ljavax/security/auth/Subject;)Z) Illegal use of nonvirtual function call
    at org.eclipse.ecf.core.identity.StringID$StringIDNamespace.<init>(StringID.java:26)
    at org.eclipse.ecf.core.identity.IDFactory.<clinit>(IDFactory.java:36)
    at org.eclipse.ecf.internal.core.identity.Activator.start(Activator.java:123)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    ... 40 more

A part of the aptana config
***************************
*** System properties:
awt.toolkit=sun.awt.X11.XToolkit
eclipse.application=com.aptana.rcp.application
eclipse.buildId=3.3.1.201212171919
eclipse.commands=-os
linux
-ws
gtk
-arch
x86_64
-showsplash
-launcher
/opt/Aptana_Studio_3/AptanaStudio3
-name
AptanaStudio3
--launcher.library
/opt/Aptana_Studio_3//plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.1.100.v20110505/eclipse_1407.so
-startup
/opt/Aptana_Studio_3//plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.overrideVmargs
-exitdata
160004
-vm
/usr/bin/java
eclipse.home.location=file:/opt/Aptana_Studio_3/
eclipse.launcher=/opt/Aptana_Studio_3/AptanaStudio3
eclipse.launcher.name=AptanaStudio3
eclipse.log.backup.max=5
eclipse.log.size.max=10000
eclipse.p2.data.area=@config.dir/../p2/
eclipse.p2.profile=AptanaProfile
eclipse.p2.unsignedPolicy=allow
eclipse.product=com.aptana.rcp.product
eclipse.startTime=1358940458057
eclipse.vm=/usr/bin/java
eclipse.vmargs=-Xms40m
-Xmx512m
-Declipse.p2.unsignedPolicy=allow
-Declipse.log.size.max=10000
-Declipse.log.backup.max=5
-Djava.awt.headless=true
-XX:MaxPermSize=256m
-jar
/opt/Aptana_Studio_3//plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
equinox.use.ds=true
file.encoding=UTF-8
file.encoding.pkg=sun.io
file.separator=/
java.awt.graphicsenv=sun.awt.X11GraphicsEnvironment
java.awt.headless=true
java.awt.printerjob=sun.print.PSPrinterJob
java.class.path=/opt/Aptana_Studio_3//plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
java.class.version=52.0
java.endorsed.dirs=/usr/lib/jvm/java-8-oracle/jre/lib/endorsed
java.ext.dirs=/usr/lib/jvm/java-8-oracle/jre/lib/ext:/usr/java/packages/lib/ext
java.home=/usr/lib/jvm/java-8-oracle/jre
java.io.tmpdir=/tmp
java.library.path=/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib
java.runtime.name=Java(TM) SE Runtime Environment
java.runtime.version=1.8.0-ea-b73
java.specification.name=Java Platform API Specification
java.specification.vendor=Oracle Corporation
java.specification.version=1.8
java.vendor=Oracle Corporation
java.vendor.url=http://java.oracle.com/
java.vendor.url.bug=http://bugreport.sun.com/bugreport/
java.version=1.8.0-ea
java.vm.info=mixed mode
java.vm.name=Java HotSpot(TM) 64-Bit Server VM
java.vm.specification.name=Java Virtual Machine Specification
java.vm.specification.vendor=Oracle Corporation
java.vm.specification.version=1.8
java.vm.vendor=Oracle Corporation
java.vm.version=25.0-b14
line.separator=

org.eclipse.debug.ui.breakpoints.toggleFactoriesUsed=false
org.eclipse.equinox.launcher.splash.location=/opt/Aptana_Studio_3/configuration/org.eclipse.equinox.launcher/com.aptana.rcp_3.3.1.201212171919/splash.bmp
org.eclipse.equinox.simpleconfigurator.configUrl=file:org.eclipse.equinox.simpleconfigurator/bundles.info
org.eclipse.update.reconcile=false
org.osgi.framework.executionenvironment=OSGi/Minimum-1.0,OSGi/Minimum-1.1,OSGi/Minimum-1.2,JRE-1.1,J2SE-1.2,J2SE-1.3,J2SE-1.4,J2SE-1.5,JavaSE-1.6,JavaSE-1.7
org.osgi.framework.language=fr
org.osgi.framework.os.name=Linux
org.osgi.framework.os.version=3.5.0
org.osgi.framework.processor=x86-64
org.osgi.framework.system.capabilities=osgi.ee; osgi.ee="OSGi/Minimum"; version:List<Version>="1.0, 1.1, 1.2",osgi.ee; osgi.ee="JavaSE"; version:List<Version>="1.0, 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7"
org.osgi.framework.system.packages=javax.accessibility,javax.activation,javax.activity,javax.annotation,javax.annotation.processing,javax.crypto,javax.crypto.interfaces,javax.crypto.spec,javax.imageio,javax.imageio.event,javax.imageio.metadata,javax.imageio.plugins.bmp,javax.imageio.plugins.jpeg,javax.imageio.spi,javax.imageio.stream,javax.jws,javax.jws.soap,javax.lang.model,javax.lang.model.element,javax.lang.model.type,javax.lang.model.util,javax.management,javax.management.event,javax.management.loading,javax.management.modelmbean,javax.management.monitor,javax.management.namespace,javax.management.openmbean,javax.management.relation,javax.management.remote,javax.management.remote.rmi,javax.management.timer,javax.naming,javax.naming.directory,javax.naming.event,javax.naming.ldap,javax.naming.spi,javax.net,javax.net.ssl,javax.print,javax.print.attribute,javax.print.attribute.standard,javax.print.event,javax.rmi,javax.rmi.CORBA,javax.rmi.ssl,javax.script,javax.security.auth,javax.security.auth.callback,javax.security.auth.kerberos,javax.security.auth.login,javax.security.auth.spi,javax.security.auth.x500,javax.security.cert,javax.security.sasl,javax.sound.midi,javax.sound.midi.spi,javax.sound.sampled,javax.sound.sampled.spi,javax.sql,javax.sql.rowset,javax.sql.rowset.serial,javax.sql.rowset.spi,javax.swing,javax.swing.border,javax.swing.colorchooser,javax.swing.event,javax.swing.filechooser,javax.swing.plaf,javax.swing.plaf.basic,javax.swing.plaf.metal,javax.swing.plaf.multi,javax.swing.plaf.nimbus,javax.swing.plaf.synth,javax.swing.table,javax.swing.text,javax.swing.text.html,javax.swing.text.html.parser,javax.swing.text.rtf,javax.swing.tree,javax.swing.undo,javax.tools,javax.transaction,javax.transaction.xa,javax.xml,javax.xml.bind,javax.xml.bind.annotation,javax.xml.bind.annotation.adapters,javax.xml.bind.attachment,javax.xml.bind.helpers,javax.xml.bind.util,javax.xml.crypto,javax.xml.crypto.dom,javax.xml.crypto.dsig,javax.xml.crypto.dsig.dom,javax.xml.crypto.dsig.keyinfo,javax.xml.crypto.dsig.spec,javax.xml.datatype,javax.xml.namespace,javax.xml.parsers,javax.xml.soap,javax.xml.stream,javax.xml.stream.events,javax.xml.stream.util,javax.xml.transform,javax.xml.transform.dom,javax.xml.transform.sax,javax.xml.transform.stax,javax.xml.transform.stream,javax.xml.validation,javax.xml.ws,javax.xml.ws.handler,javax.xml.ws.handler.soap,javax.xml.ws.http,javax.xml.ws.soap,javax.xml.ws.spi,javax.xml.ws.spi.http,javax.xml.ws.wsaddressing,javax.xml.xpath,org.ietf.jgss,org.omg.CORBA,org.omg.CORBA_2_3,org.omg.CORBA_2_3.portable,org.omg.CORBA.DynAnyPackage,org.omg.CORBA.ORBPackage,org.omg.CORBA.portable,org.omg.CORBA.TypeCodePackage,org.omg.CosNaming,org.omg.CosNaming.NamingContextExtPackage,org.omg.CosNaming.NamingContextPackage,org.omg.Dynamic,org.omg.DynamicAny,org.omg.DynamicAny.DynAnyFactoryPackage,org.omg.DynamicAny.DynAnyPackage,org.omg.IOP,org.omg.IOP.CodecFactoryPackage,org.omg.IOP.CodecPackage,org.omg.Messaging,org.omg.PortableInterceptor,org.omg.PortableInterceptor.ORBInitInfoPackage,org.omg.PortableServer,org.omg.PortableServer.CurrentPackage,org.omg.PortableServer.POAManagerPackage,org.omg.PortableServer.POAPackage,org.omg.PortableServer.portable,org.omg.PortableServer.ServantLocatorPackage,org.omg.SendingContext,org.omg.stub.java.rmi,org.w3c.dom,org.w3c.dom.bootstrap,org.w3c.dom.css,org.w3c.dom.events,org.w3c.dom.html,org.w3c.dom.ls,org.w3c.dom.ranges,org.w3c.dom.stylesheets,org.w3c.dom.traversal,org.w3c.dom.views,org.w3c.dom.xpath,org.xml.sax,org.xml.sax.ext,org.xml.sax.helpers
org.osgi.framework.uuid=50cc6fe4-4f65-0012-1c56-fd2bf80d8562
org.osgi.framework.vendor=Eclipse
org.osgi.framework.version=1.6.0
org.osgi.supports.framework.extension=true
org.osgi.supports.framework.fragment=true
org.osgi.supports.framework.requirebundle=true
os.arch=amd64
os.name=Linux
os.version=3.5.0-22-generic
osgi.arch=x86_64
osgi.bundles=reference:file:org.eclipse.equinox.simpleconfigurator_1.0.200.v20110815-1438.jar@1:start
osgi.bundles.defaultStartLevel=4
osgi.bundlestore=/opt/Aptana_Studio_3/configuration/org.eclipse.osgi/bundles
osgi.configuration.area=file:/opt/Aptana_Studio_3/configuration/
osgi.framework=file:/opt/Aptana_Studio_3/plugins/org.eclipse.osgi_3.7.2.v20120110-1415.jar
osgi.framework.extensions=
osgi.framework.shape=jar
osgi.framework.version=3.7.2.v20120110-1415
osgi.install.area=file:/opt/Aptana_Studio_3/
osgi.instance.area=file:/home/tony/Lociciels/ubuntu/install/Aptana Studio 3 Workspace/
osgi.instance.area.default=file:/home/tony/Documents/Aptana Studio 3 Workspace/
osgi.logfile=/home/tony/Lociciels/ubuntu/install/Aptana Studio 3 Workspace/.metadata/.log
osgi.manifest.cache=/opt/Aptana_Studio_3/configuration/org.eclipse.osgi/manifests
osgi.nl=fr_FR
osgi.os=linux
osgi.splashLocation=/opt/Aptana_Studio_3/configuration/org.eclipse.equinox.launcher/com.aptana.rcp_3.3.1.201212171919/splash.bmp
osgi.splashPath=platform:/base/plugins/com.aptana.rcp
osgi.syspath=/opt/Aptana_Studio_3/plugins
osgi.tracefile=/home/tony/Lociciels/ubuntu/install/Aptana Studio 3 Workspace/.metadata/trace.log
osgi.ws=gtk
path.separator=:
sun.arch.data.model=64
sun.boot.class.path=/usr/lib/jvm/java-8-oracle/jre/lib/resources.jar:/usr/lib/jvm/java-8-oracle/jre/lib/rt.jar:/usr/lib/jvm/java-8-oracle/jre/lib/sunrsasign.jar:/usr/lib/jvm/java-8-oracle/jre/lib/jsse.jar:/usr/lib/jvm/java-8-oracle/jre/lib/jce.jar:/usr/lib/jvm/java-8-oracle/jre/lib/charsets.jar:/usr/lib/jvm/java-8-oracle/jre/lib/jfr.jar:/usr/lib/jvm/java-8-oracle/jre/classes
sun.boot.library.path=/usr/lib/jvm/java-8-oracle/jre/lib/amd64
sun.cpu.endian=little
sun.cpu.isalist=
sun.desktop=gnome
sun.io.unicode.encoding=UnicodeLittle
sun.java.command=/opt/Aptana_Studio_3//plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar -os linux -ws gtk -arch x86_64 -showsplash -launcher /opt/Aptana_Studio_3/AptanaStudio3 -name AptanaStudio3 --launcher.library /opt/Aptana_Studio_3//plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.1.100.v20110505/eclipse_1407.so -startup /opt/Aptana_Studio_3//plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar --launcher.overrideVmargs -exitdata 160004 -vm /usr/bin/java -vmargs -Xms40m -Xmx512m -Declipse.p2.unsignedPolicy=allow -Declipse.log.size.max=10000 -Declipse.log.backup.max=5 -Djava.awt.headless=true -XX:MaxPermSize=256m -jar /opt/Aptana_Studio_3//plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
sun.java.launcher=SUN_STANDARD
sun.jnu.encoding=UTF-8
sun.management.compiler=HotSpot 64-Bit Tiered Compilers
sun.os.patch.level=unknown
user.country=FR
user.dir=/home/tony
user.home=/home/tony
user.language=fr
user.name=tony
user.timezone=Europe/Paris

*** Features:
com.aptana.feature (3.3.1.1355795126-BP7P8JBebBpDEmXx71DC44EXt-dS) "Aptana Studio 3"
com.aptana.feature.rcp (3.3.1.201212171919-7o7lFDDFFeFt-ajpeO4csz0uKWjZ) "Aptana Studio 3"
com.aptana.feature.studio (3.3.1.201212171835-7G7F07UIRYTaR0Q6Sz-8biKsz0da) "Aptana Studio 3"
com.aptana.php.feature (3.3.0.201212171814-7J7E-7IOVQZXgWOT) "Aptana PHP Editor"
com.aptana.pydev.feature (2.7.0.2012110722-7g9I-8Jez0Iz-z-gwJI) "Pydev - Python Development Environment"
org.eclipse.help (1.3.0.v20110530-0844-7i7uFFmFFl8nvqbDpEqTvx) "Help System Base"
org.eclipse.platform (3.7.2.v20120207-1839-9gF7UHPDFxGjd-PqDr2jX_4yKaumkoHTz04_q-q) "Eclipse Platform"
org.eclipse.rcp (3.7.2.v20120120-1424-9DB5FmnFq5JCf1UA38R-kz0S0272) "Eclipse RCP"
org.radrails.rails (3.3.0.201212171824-7e-7Q7f5FNTNHIZ_) "Aptana Ruby Editor" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T16:52:15.043

是的，它与 Java 1.8 相关。

我刚刚在 1.8 旁边安装了 Java 1.7 并使用 Java 1.7 启动 Eclipse 和 ZendStudio 使更新再次工作。

# .net - Silverlight 5 中的堆栈面板

> ID：14479913
> 
> 赞同：-2
> 
> 时间：2013-01-23T12:36:13.863
> 
> 标签：.net, xaml, silverlight-5.0

谁能告诉我如何在 .cs 编码中创建 stackPanels？我需要通过编码创建多个堆栈面板。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:47:31.283

您需要在您的堆栈面板的主页中有一个容器。

**Xaml**

```
<Grid x:Name="LayoutRoot" Background="White" Width="500" Height="500">

</Grid> 
```

**代码**

```
StackPanel sp = new StackPanel(); 
sp.Orientation = Orientation.Horizontal; 
//add something in your stack panel
LayoutRoot.Children.Add(sp); 
```

# django - Django 管理员停止验证只读内联

> ID：14479914
> 
> 赞同：0
> 
> 时间：2013-01-23T12:36:16.547
> 
> 标签：django, django-admin

我有一些经过大量验证的表。为方便起见，我在相关表格中内联了其中一些。内联是只读的，所有字段都标记为只读。但是，当您保存它们内联到的页面时，它们仍在被验证。这会创建一些非常大的页面保存时间。什么是防止这种行为的安全方法？所谓安全，我的意思是非常重要的是，在没有运行验证的情况下不会意外保存它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:24:54.243

This is what I have so far, it makes sense and seems to work:

```
class ReadOnlyInlineFormSet(BaseInlineFormSet):
    """ This inline can't save and subsequently doesn't need to validate """

    def save(self, commit=True):
        self.new_objects = []
        self.changed_objects = []
        self.deleted_objects = []
        return []

    def is_valid(self):
        return True 
```

And then in the each inline:

```
formset = ReadOnlyInlineFormSet 
```

# php - 访问对象中的数组

> ID：14479923
> 
> 赞同：2
> 
> 时间：2013-01-23T12:36:43.747
> 
> 标签：php, arrays, object

如果我知道要搜索的正确术语，那么很容易用谷歌搜索，但我不确定术语。

我有一个返回大对象的 API。我通过以下方式访问一个特定的：

```
$bug->fields->customfield_10205[0]->name;
//result is johndoe@gmail.com 
```

有很多值，我可以通过将其从 0 更改为 1 来访问它们，依此类推

但我想遍历数组（也许那不是正确的术语）并在那里获取所有电子邮件并将其添加到这样的字符串中：

```
implode(',', $array);
//This is private code so not worried too much about escaping 
```

本来以为我只是做类似的事情： echo implode(',', $bug->fields->customfield_10205->name);

还尝试了 echo implode(',', $bug->fields->customfield_10205);

和 echo implode(',', $bug->fields->customfield_10205[]->name);

我正在寻找的输出是：'johndoe@gmail.com,marydoe@gmail.com,patdoe@gmail.com'

我哪里错了，我提前为这个愚蠢的问题道歉，这可能是新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:42:42.817

您需要一个迭代，例如

```
# an array to store all the name attribute
$names = array();

foreach ($bug->fields->customfield_10205 as $idx=>$obj)
{
  $names[] = $obj->name;
}

# then format it to whatever format your like
$str_names = implode(',', $names); 
```

PS：您应该寻找属性电子邮件而不是名称，但是，我只是按照您的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:42:04.067

使用此代码，并循环遍历数组。

```
$arr = array();
for($i = 0; $i < count($bug->fields->customfield_10205); $i++)
{
    $arr[] = $bug->fields->customfield_10205[$i]->name;
}
$arr = implode(','$arr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:42:35.487

如果不使用额外的循环和临时列表，这在 PHP 中是不可能的：

```
$names = array();
foreach($bug->fields->customfield_10205 as $v)
{
    $names[] = $v->name;
}
implode(',', $names); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T12:48:13.547

您可以使用`array_map`这样的功能

```
function map($item)
{
    return $item->fields->customfield_10205[0]->name;
}

implode(',', array_map("map", $bugs)); // the $bugs is the original array 
```

# c++ - 使用 alglib 无需每次都编译

> ID：14479928
> 
> 赞同：0
> 
> 时间：2013-01-23T12:36:54.037
> 
> 标签：c++, compilation, makefile, alglib

我正在使用 c++ AlgLib 库中的一些方法。在我使用过的其他库中，有一些安装说明，之后我可以包含 .h 文件并使用 -l 进行编译（例如，使用 GMP 库并使用 -lgmp 进行编译）。然而，有了 alglib，我唯一能够运行的就是使用 makefile 并编译所有需要的 .cpp 文件——每次我编译我的程序时。以下是生成文件的示例：

```
all:    
g++ name.cpp ap.cpp integration.cpp interpolation.cpp alglibinternal.cpp linalg.cpp
    alglibmisc.cpp specialfunctions.cpp solvers.cpp optimization.cpp -o name 
```

由于每次编译所有这些文件都比较耗时，有没有办法避免呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:16:25.513

您可以使用制作功能。Make 是一个工具，它控制从程序的源文件生成程序的可执行文件和其他非源文件。查看页面：[http](http://www.gnu.org/software/make/) ://www.gnu.org/software/make/以使用此工具。

# apache - 使用 htaccess 删除部分 Url

> ID：14479931
> 
> 赞同：0
> 
> 时间：2013-01-23T12:37:08.943
> 
> 标签：apache, .htaccess, mod-rewrite

让我简要解释一下。我的产品页面上有一个 FB 按钮，如果有人点击它上面的点赞按钮。我的页面位于 Facebook 上的“活动”选项卡下，因此如果有人在 facebook 中单击我的页面链接，它会重定向回我的页面，但是 facebook 将查询字符串添加为

```
www.abcd.com/shop/productx/&fb_action_ids=485653551476299&fb_action_types=og.likes&fb_ref=.UPeDRHNDS9c.like&fb_source=aggregation&fb_aggregation_id=246965925417366 
```

但是在此链接到达我的站点后，内部配置将所有 & 更改为 / 这是

```
www.abcd.com/shop/productx/fb_action_ids/4748009931767/fb_action_types/og.likes/fb_ref/.UPbzP0K2Q0g.like/fb_source/timeline_og/action_object_map/%7B%224748009931767%22:537586299592758%7D/action_type_map/%7B%224748009931767%22:%22og.likes%22%7D/action_ref_map/%7B%224748009931767%22:%22.UPbzP0K2Q0g.like%22%7D 
```

所以它不再是一个查询字符串，而是变成了正确的 url。这使我的网站进入无限循环。

目前我的 htaccess conf 是：

```
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule ^(.*) index.php?/$1 [E=VAR1:$1,QSA] 
```

如何删除 facebook 添加的额外 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:19:15.190

在您当前的规则之上添加这个将删除从**&fb_action**开始的所有内容。

```
RewriteRule ^(.*?)&fb_action /$1 [L,R=301] 
```

请注意，我假设这实际上不是查询字符串，因为在您的问题中，您的 URL 看起来像：

```
www.abcd.com/shop/productx/&fb_action_...
# no ? here----------------^ 
```

# performance - Matlab 的 blockproc 与 for 循环速度

> ID：14479940
> 
> 赞同：0
> 
> 时间：2013-01-23T12:38:00.200
> 
> 标签：performance, matlab, image-processing

我需要为图像中的每个像素执行计算。我目前有一个需要很长时间的双 for 循环代码。将其转换为“blockproc（I，[1 1]，fun）”会加快速度吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:49:27.487

If you have access to the Parallel Computing Toolbox and R2012a or later, you can [use `blockproc` with the 'parallel'-option](http://www.mathworks.com/company/newsletters/articles/new-features-for-high-performance-image-processing-in-matlab.html). Alternatively, you can `parfor` the outer loop. While it's possible `blockproc` is still faster, you should definitely profile the two options side-by-side.

Alternatively, you may be able to achieve important speed gains by changing your algorithm - for example, break down a 2D filter into 2 1D filters, etc.

* * *

/aside: The big advantage `blockproc` can have over nested-loop solutions is that it can work on images that are too big to fit in RAM, i.e. it takes care of loading sub-images for you.

# php - 在内存中缓存模板

> ID：14479942
> 
> 赞同：0
> 
> 时间：2013-01-23T12:38:15.240
> 
> 标签：php, caching, web-applications

到目前为止，我只看到网站视图/模板缓存在目录/文件中。

但是今天我看到了一个新的开源缓存组件，它将所有视图/模板保存在 RAM 中。

我不确定这是好习惯还是坏习惯。你能建议我如何评价这种技术吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T17:46:32.583

缓存策略完全取决于您项目的特定需求和您可以使用的资源。在内存中缓存通常比从磁盘缓存性能要好得多，但您需要平衡您的需求和资源。

首先，问问自己：“我真的需要额外的缓存吗？” 您可能不这样做，而且不值得努力设置其他东西。缓存很少是简单的，即使它看起来应该是简单的，并且通常需要大量的试验和错误。

如果第一个问题的答案是“是”，请问问自己：“我是否有足够的可用内存来满足我的缓存需求？如果没有，我能买得起更多，或者买一台专门用于内存缓存的单独机器吗？

如果答案是“是”，请使用内存缓存。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T12:43:48.303

如果您想从浏览器中删除缓存，您可以在 head 标签中添加这行代码，这是不好的做法，但添加此行后您的问题将解决。

```
header("Cache-Control: no-cache, must-revalidate") 
```

# javascript - javascript中的正则表达式 - 不起作用

> ID：14479944
> 
> 赞同：0
> 
> 时间：2013-01-23T12:38:22.687
> 
> 标签：javascript, regex, validation, date, comparison

我有以下从本网站找到的正则表达式：

Bt 某处语法不正确并引发错误：

```
var myDate = /^(0?[1-9]|1[0-2])\/(0?[1-9]|[12][0-9]|3[01])\/(19|20)[0-9]{2}; 
```

只是要清楚：

日期可以是 01/01/1900 到 31/12/2099 之间的任何值，但格式应严格：

日/月/年

我知道网络上有几种解决方案，都类似，但不知何故它抛出了 javascript 错误。

可能是语法错误，因为在此之上我已经进行了电子邮件验证，效果很好：

```
var email = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T12:44:55.170

来自控制台的消息说

`SyntaxError: unterminated regular expression literal`

你`/`在行尾缺少 a ，所以应该是

```
var myDate = /^(0?[1-9]|1[0-2])\/(0?[1-9]|[12][0-9]|3[01])\/(19|20)[0-9]{2}/; 
```

正如评论中所指出的，您*可能*还打算`$`在`/`. 这向正则表达式表明您应该匹配字符串的结尾（请参阅 OP 中的电子邮件示例）。

作为旁白; 使用正则表达式验证日期的*一般格式*是有效且值得的。尝试使用正则表达式验证它是一个实际的、有效的（即，不是 2012 年 2 月 30 日）日期是愚蠢的。能够正确执行此操作的正则表达式将是一页又一页！

# android - parseLong Numberformat 异常 7.7

> ID：14479946
> 
> 赞同：0
> 
> 时间：2013-01-23T12:38:26.197
> 
> 标签：android, parsing, android-edittext, long-integer

我正在从 EditText 中检索一个数字：

```
long org=0;
String EnteredOrgAmount=amount.getText().toString();

if(!EnteredOrgAmount.equalsIgnoreCase("")) {
    org=Long.parseLong(EnteredOrgAmount);
} 
```

这工作正常，直到我输入 7.7，例如，我得到一个 numberFormatException。我不能使用逗号，因为我将 XML 中的 EditText 声明为： `android:inputType="numberDecimal"`

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:50:41.500

而不是在 Double 中的 Long 解析中进行解析，如果您只需要 long 值，则在 double 中解析并存储在 long 值中

```
double org=0;
String EnteredOrgAmount=amount.getText().toString();

if(!EnteredOrgAmount.equalsIgnoreCase("")) {
    org=Double.parseDouble(EnteredOrgAmount);
} 
```

长期只声明 org as long 而不是 double

```
long org=0;
String EnteredOrgAmount=amount.getText().toString();

if(!EnteredOrgAmount.equalsIgnoreCase("")) {
    org=(long)Double.parseDouble(EnteredOrgAmount);
} 
```

# php - 来自包含文件的 mysqli_connect 不起作用

> ID：14479948
> 
> 赞同：2
> 
> 时间：2013-01-23T12:38:37.357
> 
> 标签：php, mysql, mysqli

我在一个名为 config.php 的文件上有这个 mysqli_connect ：

```
$DbServer = 'localhost';
$DbUser = 'username';
$DbPassword = 'password';
$DbName = 'dbname';
$con = mysqli_connect($DbServer, $DbUser, $DbPassword, $DbName); 
```

然后我有另一个名为 sendrequest.php 的 PHP 文件：

```
<?php    
session_start();
require_once ('config.php');
$Key = mysqli_real_escape_string ($con, $_GET["key"]);
... 
?> 
```

这个 sendrequest.php 总是产生这个错误信息：

```
Warning: mysqli_real_escape_string(): Couldn't fetch mysqli in /home/public_html/sendingrequest.php on line 4 
```

我试图通过将 mysqli_connect() 放在同一个文件上而不是 require_once() 来修改脚本，令人惊讶的是它可以工作......

```
<?php    
session_start();
//require_once ('config.php');

$DbServer = 'localhost';
$DbUser = 'username';
$DbPassword = 'password';
$DbName = 'dbname';
$con = mysqli_connect($DbServer, $DbUser, $DbPassword, $DbName);

$Key = mysqli_real_escape_string ($con, $_GET["key"]);
... 
?> 
```

我的 require_once 有什么问题？为什么 mysqli_real_escape_string 无法使用它？谢谢！

# java - Java：这个算法的优秀、平均和最差的案例复杂度是多少？

> ID：14479952
> 
> 赞同：-4
> 
> 时间：2013-01-23T12:38:49.350
> 
> 标签：java, algorithm, complexity-theory

我想知道这个算法的复杂性。在我的情况下，好、中等和最差都是 O(n^2)

```
public char getModa(char[] a){
   int ii[] =new int[a.length];
   char[] t= new char[a.length];

   for(int i=0;i<a.length;i++){
    for(int j=0;j<a.length;j++){
       if(a[j]==a[i]){ 
          ii[i]++;
          t[i]=a[j];
       }
     }
   }
   int cc=0;
   for(int i=0;i<ii.length;i++){
     if(ii[i]>ii[cc]) cc=i;
   }
   return a[cc];
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T12:41:56.997

所有情况的复杂性（最佳/平均/最差）是`O(n^2)`，瓶颈是 中的双重迭代`(i,j)`。`range([0,a.length),[0,a.length))`

澄清为什么确实如此`O(n^2)`，而不是`O(n^3)`像人们想象的那样 - 因为最后一个循环没有“嵌套”在瓶颈侧，所以 3 个循环的复杂性基本上是`O(n^2+n)`，但是因为`O(n^2+n) = O(n^2)`，这就是答案。

事实上 - 对于相同长度的数组，根本没有变化 - 该算法具有相同数量的迭代，无论输入到底是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:45:06.647

嵌套 for 循环内的代码运行 (a.length)^2 次，最后一个 for 循环内的代码运行 ii.length = a.length 次。所以，我们总共有 (a.length)^2 + a.length 迭代，结果为 O(a.length^2)。

迭代的数量（以及复杂性）仅取决于 a 的大小，而不是其中的值。因此，在最好和最坏的情况下都是一样的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T12:56:31.943

你的复杂性是`O(N^2)`

**如果使用Hash Table**`O(N)`可能会复杂地解决类似的问题。

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T12:44:41.007

for 循环直接取决于数组的长度`a`。

所以`O(n*n)`在所有情况下都是如此。

最后一个 for 循环不会影响程序的复杂性，因为它已经`O(n*n)`**

# android - Android捏缩放ImageView

> ID：14479958
> 
> 赞同：8
> 
> 时间：2013-01-23T12:38:57.093
> 
> 标签：android, android-imageview, pinchzoom

我有一个单一的图像`ImageView`布局。

```
import android.app.Activity;
import android.os.Bundle;

public class americanfootball extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.americanfootball);
    }

} 
```

如何启用简单的捏来放大图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T12:43:44.463

您必须使用自定义 ImageView 来做到这一点。使用这样的东西：

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.drawable.BitmapDrawable;
import android.util.AttributeSet;
import android.util.Log;
import android.view.MotionEvent;
import android.view.ScaleGestureDetector;
import android.view.View;

public class PinchImageView extends View {

private static final int INVALID_POINTER_ID = -1;

private Drawable mImage;
private float mPosX;
private float mPosY;

private float mLastTouchX;
private float mLastTouchY;
private int mActivePointerId = INVALID_POINTER_ID;

private ScaleGestureDetector mScaleDetector;
private float mScaleFactor = 1.f;

public PinchImageView(Context context) {
    this(context, null, 0);
mImage=act.getResources().getDrawable(context.getResources().getIdentifier("imag­ename", "drawable", "packagename"));

    mImage.setBounds(0, 0, mImage.getIntrinsicWidth(), mImage.getIntrinsicHeight());
}

public PinchImageView(Context context, AttributeSet attrs) {
    this(context, attrs, 0);
}

public PinchImageView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());
}

@Override
public boolean onTouchEvent(MotionEvent ev) {
    // Let the ScaleGestureDetector inspect all events.
    mScaleDetector.onTouchEvent(ev);

    final int action = ev.getAction();
    switch (action & MotionEvent.ACTION_MASK) {
    case MotionEvent.ACTION_DOWN: {
        final float x = ev.getX();
        final float y = ev.getY();

        mLastTouchX = x;
        mLastTouchY = y;
        mActivePointerId = ev.getPointerId(0);
        break;
    }

    case MotionEvent.ACTION_MOVE: {
        final int pointerIndex = ev.findPointerIndex(mActivePointerId);
        final float x = ev.getX(pointerIndex);
        final float y = ev.getY(pointerIndex);

        // Only move if the ScaleGestureDetector isn't processing a gesture.
        if (!mScaleDetector.isInProgress()) {
            final float dx = x - mLastTouchX;
            final float dy = y - mLastTouchY;

            mPosX += dx;
            mPosY += dy;

            invalidate();
        }

        mLastTouchX = x;
        mLastTouchY = y;

        break;
    }

    case MotionEvent.ACTION_UP: {
        mActivePointerId = INVALID_POINTER_ID;
        break;
    }

    case MotionEvent.ACTION_CANCEL: {
        mActivePointerId = INVALID_POINTER_ID;
        break;
    }

    case MotionEvent.ACTION_POINTER_UP: {
        final int pointerIndex = (ev.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) 
                >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
        final int pointerId = ev.getPointerId(pointerIndex);
        if (pointerId == mActivePointerId) {
            // This was our active pointer going up. Choose a new
            // active pointer and adjust accordingly.
            final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
            mLastTouchX = ev.getX(newPointerIndex);
            mLastTouchY = ev.getY(newPointerIndex);
            mActivePointerId = ev.getPointerId(newPointerIndex);
        }
        break;
    }
    }

    return true;
}

@Override
public void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    canvas.save();
    Log.d("DEBUG", "X: "+mPosX+" Y: "+mPosY);
    canvas.translate(mPosX, mPosY);
    canvas.scale(mScaleFactor, mScaleFactor);
    mImage.draw(canvas);
    canvas.restore();
}

private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
    @Override
    public boolean onScale(ScaleGestureDetector detector) {
        mScaleFactor *= detector.getScaleFactor();

        // Don't let the object get too small or too large.
        mScaleFactor = Math.max(0.1f, Math.min(mScaleFactor, 10.0f));

        invalidate();
        return true;
    }
}

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-07T19:40:30.470

与其创建自定义*ImageView* ，不如试试这个开源库：[https ://github.com/martinwithaar/PinchToZoom](https://github.com/martinwithaar/PinchToZoom)

它不扩展*ImageView*类，因此您也可以使用其他*ImageView*实现。除此之外，它还有一些非常时尚的动画恕我直言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-07T14:59:28.303

你可以看到下面的链接：

[https://androidcookbook.com/Recipe.seam?recipeId=2273](https://androidcookbook.com/Recipe.seam?recipeId=2273)

## 笔记：

这是我发现的最适合缩放（和移动）的示例！</p>

1.  将 android:scaleType="matrix" 添加到 XML 文件中的 ImageView。

前任：

```
<ImageView android:layout_width="wrap_content" android:layout_height="wrap_content"  app:srcCompat="@drawable/menu2" android:id="@+id/imageView7"android:scaleType="matrix"
    /> 
```

2.  复制代码并粘贴到您的活动中

请记住将下面的代码更改为您自己的图像。“ImageView 视图 = (ImageView) findViewById(R.id.imageView);”

# visual-studio-2010 - 在 AfterBuild 中实施 BeforePublish

> ID：14479963
> 
> 赞同：3
> 
> 时间：2013-01-23T12:39:16.317
> 
> 标签：visual-studio-2010, msbuild, msbuild-task

我有两个应用程序配置文件（app.debug.config 和 app.production.config），我找到了根据当前构建配置名称将配置文件复制到输出文件夹的解决方案：

```
 <Target Name="AfterBuild">
    <Delete Files="$(TargetDir)$(TargetFileName).config" />
    <Copy SourceFiles="$(ProjectDir)\App.$(Configuration).config" DestinationFiles="$(TargetDir)$(TargetFileName).config" />
  </Target> 
```

因此，在选择（生产）构建配置后，MSbuild 将自动复制 app.production.config 并将其重命名为输出文件夹中的 projectname.config。

不幸的是，发布的情况不一样，因为当我将项目发布到 Web 服务器时，配置文件没有发布。

我怎样才能为发布做同样的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:52:43.937

我找到了解决方案，我在项目文件中添加了以下内容：

```
 <ItemGroup>
    <CustomConfigFile Include="$(ProjectDir)\App.$(Configuration).config">
      <Visible>False</Visible>
    </CustomConfigFile>
  </ItemGroup>
<Target Name="BeforePublish">
<CreateItem Include="@(CustomConfigFile)" AdditionalMetadata="TargetPath=$(TargetFileName).config;IsDataFile=false">
      <Output TaskParameter="Include" ItemName="_DeploymentManifestFiles" />
    </CreateItem>
</Target> 
```

# javascript - 检查在 Javascript 中至少选择了一个复选框列表项

> ID：14479966
> 
> 赞同：-4
> 
> 时间：2013-01-23T12:39:30.003
> 
> 标签：javascript, asp.net

我想检查 asp:checkbox 列表中的至少一项是否被选中，如果在 checkboxlist 中至少选择一项，那么我想启用按钮。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:46:47.797

[有关详细信息，请参阅Validating checkboxList Asp.Net control using javascript](http://www.dotnetspider.com/resources/2769-Validating-checkboxList-Asp-Netcontrol-javascript.aspx)链接。请试试：

```
<script language="javascript" type="text/javascript"> 
function CheckItem(sender, args){     
    var chkControlId = '<%=chkMealPeriod.ClientID%> '    
    var options = document.getElementById(chkControlId).getElementsByTagName('input');    
    var ischecked=false;    
    args.IsValid =false;    
    for(i=0;i<options.length;i++)    
    {        
        var opt = options[i];        
        if(opt.type=="checkbox")        
        {                       
            if(opt.checked)            
            {                
                ischecked= true;                
                args.IsValid = true;                            
            }        
        }     
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-25T09:09:32.270

```
var checkboxs=document.getElementsByName("chkControlId[]");
    var okay=false;
    var l=checkboxs.length;
    for(var i=0;i<l;i++)
    {
        if(checkboxs[i].checked)
        {
            okay=true;
            break;
        }
    }
    if(!okay)
    {
        alert("Please Select atleast one");
    return false;
    } 
```

# heroku - Heroku 服务器时区和记录时间

> ID：14479970
> 
> 赞同：7
> 
> 时间：2013-01-23T12:39:30.180
> 
> 标签：heroku

我正在尝试更改 Heroku 服务器时区。

我已经按照[为什么 Heroku 使用服务器时间而不是 Rails 时区进行日志记录中的步骤进行操作？](https://stackoverflow.com/questions/2719330/why-does-heroku-log-using-the-server-time-rather-than-the-rails-time-zone)

执行`heroku config`：`TZ: Atlantic/Cape_Verde`

执行`heroku run bash date`：`Wed Jan 23 11:24:52 CVT 2013`

但是`heroku logs --tail`仍然显示我当地时区 GMT 的日期

我错过了什么吗？多谢你们：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-05-16T19:11:12.403

从版本 6.15.5-1f03166

```
heroku config:add TZ="America/New_York" 
```

为我工作。确保在导航到应用程序目录后运行该命令。有关时区的正确性，请查看此[维基百科](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)页面。例如使用

`heroku config:add TZ="Asia/Kolkata"`

获取印度标准时间的日志。
如果您不在项目目录中，Heroku-cli 需要一个额外的标志：

```
heroku config:add TZ="Asia/Kolkata" --app appname 
```

其中*appname*是出现在 Heroku 仪表板上的应用程序名称，而**不是**您的项目名称。

**注意：**默认情况下，更新时区会重新部署正在运行的应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-07-08T11:24:49.023

如果您使用的是像 PaperTrail 这样的日志查看器，则需要一个额外的设置：PaperTrail > Settings > Profile > TimeZone > DropDown of selectable TimeZones

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-10-23T04:45:47.833

Heroku 日志的时区无法更改，`UTC`即使您更改了 dyno 时区，日志也会保留。这也不推荐，时区最好在您的应用程序中处理，对于日志，日志查看器可以提供 timzezone 设置。

用于记录的 Heroku 插件 - [https://elements.heroku.com/addons#logging](https://elements.heroku.com/addons#logging)

来源：[https ://help.heroku.com/JZKJJ4NC/how-do-i-set-the-timezone-on-my-dyno](https://help.heroku.com/JZKJJ4NC/how-do-i-set-the-timezone-on-my-dyno)

# c# - 如何使用 MongoDB 和 C# 驱动程序更新子文档集合

> ID：14479971
> 
> 赞同：3
> 
> 时间：2013-01-23T12:39:39.660
> 
> 标签：c#, mongodb

我有一个包含这种形式的文档的集合：

```
{
    "_id" : ObjectId("50f81542a63cfa27fca7df43"),
    "_t" : "ClockRecord",
    "ClockName" : "AAA-TEST123-002",
    "IngestionDateTime" : ISODate("2013-01-17T15:14:10.757Z"),
    "FilesList" : 
    [
        {
            "FileName" : "AAA-TEST123-002.mpg",
            "FileStatus" : "Arriving",
        }, 
        {
            "FileName" : "AAA-TEST123-002.aiff",
            "FileStatus" : "Arriving",
        }
    ]
 } 
```

使用这两种类型：

```
public class ClockRecord : IDatabaseRecord
{
    public ClockRecord()
    {
        FilesList = new List<ClockRecordFile>();
    }

    public string ClockName { get; set; }

    public DateTime IngestionDateTime { get; set; }        

    public List<ClockRecordFile> FilesList { get; set; }

    public BsonObjectId _id { get; set; }
}

public class ClockRecordFile
{
     public string FileName { get; set; }

     public string FileStatus { get; set; }
} 
```

我已经阅读了很多 Stack 回复和 mongodb 站点，这似乎是正确的技术：

```
var collection = MongoDatabase.GetCollection<ClockRecord>("Clocks");
var update = Update.Set("FilesList.FileStatus", "TEST");
var result = collection.Update(
        Query.And(
                   Query.EQ("_id", clockDocumentID),
                   Query.ElemMatch("FilesList",Query.EQ("FileName","AAA-TEST123-002.mpg"))
                 ),  
                 update, UpdateFlags.Upsert
                              ); 
```

但什么也没发生。如何更新子文档中的 FileStatus？

我的最终目标是用不同的子文档替换 FilesList 子文档，所以如果您也知道如何做到这一点，那将是一个奖励。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T16:35:44.030

似乎代码的 Update.Set 部分应该有一个 $ 。

这有效

```
var collection = MongoDatabase.GetCollection<ClockRecord>("Clocks");
var update = Update.Set("FilesList.$.FileStatus", "TEST");      <-----$ added here
var result = collection.Update(
        Query.And(
          Query.EQ("_id", clockDocumentID),
          Query.ElemMatch("FilesList",Query.EQ("FileName","AAA-TEST123-002.mpg"))
        ),  
        update, UpdateFlags.Upsert
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:11:53.230

上述解决方案的问题是它只会更新数组中的第一个匹配文档。使用 $ 运算符您只能更新第一个匹配文档。目前 mongodb 不提供使用位置运算符（$）更新多个数组元素的功能。看看在以下链接 [https://jira.mongodb.org/browse/SERVER-1243](https://jira.mongodb.org/browse/SERVER-1243)

# javascript - 如何在不同的窗口中实现 oauth 进程，然后重新加载调用者窗口

> ID：14479974
> 
> 赞同：2
> 
> 时间：2013-01-23T12:39:53.263
> 
> 标签：javascript, python, google-app-engine, oauth-2.0, google-oauth

我正在尝试使用**OAuth 2.0对 Google 日历进行授权的****Google App Engine 应用程序**执行此操作（仅限于 Google Apps 域的用户）

 **1.  如果用户尚未授权该应用访问他/她的日历，请显示“使用您的 Google Apps 帐户授权此应用”按钮。
2.  当用户按下该按钮时，打开一个新窗口，授权过程从该窗口开始（网址格式为[https://accounts.google.com/o/oauth2/auth?state=CALLER_URL&redirect_uri=CALLBACK_URL&response_type=code&client_id=CLIENT_ID&scope= https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcalendar&access_type=offline](https://accounts.google.com/o/oauth2/auth?state=CALLER_URL&redirect_uri=CALLBACK_URL&response_type=code&client_id=CLIENT_ID&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcalendar&access_type=offline) )
3.  用户授权应用程序访问他/她的日历，然后**关闭此窗口并重新加载调用者窗口，以显示应用程序**。

**第 1 步**非常简单。**第2步**，有点。我可以在新窗口中打开该 url，但随后，该过程的其余部分将在该新窗口中进行。我的意思是：当用户授权应用程序时，url 回退到回调 uri 中，但**在同一个窗口中，而不是在调用者 one**中。

有没有办法做到这一点？我在更多的网站上看到过。您按下一个按钮，打开一个新窗口，授予调用者应用程序访问您的数据的权限（Twitter 帐户、Facebook 墙、Google 联系人......等等），然后关闭该窗口并重新加载调用者窗口，并使用所需的授权令牌并准备工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:01:36.177

您肯定希望它回发到子窗口。这不是问题，因为父窗口和子窗口可以通信。例如：

1.  一些JS打开子窗口并将其位置设置为谷歌授权页面
2.  当用户接受对话框时，子窗口将被转发到您的回调 URL
3.  您的服务器保存从转发 URL 获得的令牌数据（它不知道也不关心请求来自哪个窗口）
4.  服务器返回一个页面，该页面被加载到子窗口中。
5.  该页面是空白的，但包含一些 javascript 来提醒底层页面并关闭窗口

例如，javascript 可能如下所示：

```
window.parent.location.reload();
window.close(); 
```**

# android - 对在 android 中被杀死的应用程序的操作

> ID：14479979
> 
> 赞同：6
> 
> 时间：2013-01-23T12:40:06.250
> 
> 标签：android

当应用程序从任务管理器或任何其他应用程序中终止时，我想执行操作/事件。应用程序被杀死时是否有任何要执行的操作。我的应用程序像服务一样在后台运行。如果我终止应用程序，则主服务停止。我想重新开始。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T12:50:11.927

不，没有可靠的方法可以知道您的应用程序是否被另一个进程杀死。“杀死”应用程序的全部意义在于尽快终止它，而不让它运行任何代码。

**== 不要在生产应用程序中实际使用以下建议。它们在这里纯粹是作为潜在的技术解决方案，但通常对于在最终用户设备上运行的应用程序来说并不是一个好主意。==**

可能可以[`IBinder.linkToDeath()`](http://developer.android.com/reference/android/os/IBinder.html#linkToDeath%28android.os.IBinder.DeathRecipient,%20int%29)从辅助应用程序中使用，该辅助应用程序充当主要应用程序的监视器。但是，您还必须说服用户安装辅助应用程序。如果你能做到，你可以在两个应用程序之间建立双向监控，如果第二个被杀死，则让其中一个重新启动另一个。

您还可以尝试通过[`AlarmManager`](http://developer.android.com/reference/android/app/AlarmManager.html)每隔一段时间触发的警报设置警报，以在它被杀死时重新启动您的应用程序。但是，如果您的警报周期过长，您可能会有一定的时间段无法运行您的应用程序。如果您的时间段太短，很可能您的应用不会被 Google 允许进入 Google Play 商店，并且手机上的恶意软件应用分析 (JB+) 可能会启动。此外，过于频繁启动的警报会持续设备唤醒，并很快耗尽电池。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:41:48.273

如果你杀死某个进程，你只是杀死它，所以它立即停止工作。没有事件发送到应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T12:47:08.060

我寻找同样的东西，我发现的答案是：不，应用程序不去`OnDestroy()`或类似的东西。

# teamcity - Teamcity 结帐目录

> ID：14479980
> 
> 赞同：2
> 
> 时间：2013-01-23T12:40:08.097
> 
> 标签：teamcity

我想知道 teamcity 如何处理多个配置的结帐。他们建议使用`Auto`在所有配置之间共享结帐目录的选项。那么，如果当前正在构建一种配置，而另一种配置将要签出，会发生什么情况？我想我真的必须为这些设置不同的目录吗？此外，如果运行了不同的配置，它们的输出将被彼此覆盖。

*附带说明：我们有一个项目具有三种配置，即 Continuous、Nightly 和 Weekly。也许我必须将它们分成不同的项目？！但另一方面我认为不同的项目更适合不同的分支左右。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T04:28:03.933

Teamcity 永远不会同时在一个代理上运行两个构建，因此您永远不会遇到两个构建尝试同时使用同一个目录的情况。

但除此之外，Teamcity*将为*具有不同 VCS 根的配置使用不同的目录；只有当它们具有相同的 VCS 根和相同的结帐规则时，它才会共享。但这不应该给你带来任何问题，如果你设置正确的话。

> 此外，如果运行了不同的配置，它们的输出将被彼此覆盖。

您不应该依赖该目录中的文件。如果您需要访问这些文件，您应该将它们发布为[artifacts](http://confluence.jetbrains.net/display/TCD7/Build+Artifact)，并设置需要它们的构建配置，使其具有对工件的[工件依赖](http://confluence.jetbrains.net/display/TCD7/Artifact+Dependencies)项。

> 附带说明：我们有一个项目具有三种配置，即 Continuous、Nightly 和 Weekly。也许我必须将它们分成不同的项目？！

你不应该这样做；为什么需要拆分它们？它们可以在同一个项目中正常运行，但如果您愿意，可以将它们移动到单独的项目中。

# c# - 如何检查位掩码是否包含位？

> ID：14479981
> 
> 赞同：21
> 
> 时间：2013-01-23T12:40:09.230
> 
> 标签：c#, bit-manipulation, bitmask

我不太了解整个位掩码概念。

假设我有一个面具：

```
var bitMask = 8 | 524288; 
```

我不明白这就是我将如何结合`8`and`524288`和 get `524296`。

但是，我该如何走另一条路？如何检查我的位掩码，看它是否包含`8`和/或`524288`？

为了让它更复杂一点，假设我拥有的位掩码是`18358536`，我需要检查是否`8`并且`524288`在那个位掩码中。我到底该怎么做？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-23T12:43:50.823

好

```
if (8 & bitmask == 8 ) {
} 
```

将检查位掩码是否包含 8。

更复杂

```
int mask = 8 | 12345;
if (mask & bitmask == mask) {
   //true if, and only if, bitmask contains 8 | 12345
}

if (mask & bitmask != 0) {
   //true if bitmask contains 8 or 12345 or (8 | 12345)
} 
```

可能对 enum 感兴趣，尤其是[FlagsAttibute](http://msdn.microsoft.com/fr-fr/library/vstudio/system.flagsattribute.aspx)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-23T12:44:53.633

我很确定位掩码`(A & B)==B`在哪里，并且是您想要检查的任何内容。`A``B`

例子：

```
if((18358536 & 8) == 8) 
{
    // mask contains 8
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-05-31T07:45:24.683

首先，位掩码用于操作位，而不是整数。当我们只处理 1 和 0 时，比处理更复杂的数字更容易理解。

例如：

```
1000110000010000100001000 = 18358536 // in binary.

0000010000000000000000000 = 524288   // in binary.

0000000000000000000001000 = 8        // in binary.

0000010000000000000001000 = 524296   // in binary. 
```

有了这个，很明显整数 8 是右侧的第 4 位，没有标记其他位，所以当我们将 8 添加到 524288（仅第 20 位）时，我们只是将第 4 位和第 20 位标记为真。因此，我们可以使用为整数保留的相同内存空间来保存定义一些布尔属性的多个标志。

正如 Alex 已经解释的那样，您可以使用按位 AND 运算符检查位掩码中是否有任何标志可用：

```
if ((mask & flag) == flag) { /* mask has flag set as true */ } 
```

您可以[在本文中阅读有关位掩码的所有内容](https://alemil.com/bitmask)

# drupal - 如何在不安装模块的情况下将 Google 自定义搜索与 Drupal 一起使用？

> ID：14479983
> 
> 赞同：1
> 
> 时间：2013-01-23T12:40:18.450
> 
> 标签：drupal, search, search-engine

我想对我的网站进行更强大的搜索。我当前的搜索无法忽略拼写错误，而且由于我们的网站是多语言的，我们真的需要这种能力。谷歌有一个很好的方法来做到这一点。

我知道 Google 自定义搜索，如何在不安装模块的情况下将其安装到 drupal？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:04:35.563

这是有关如何通过将一些代码粘贴到您的模板（或块或节点）中来将 GCS 添加到您的网站的文档

[https://developers.google.com/custom-search/docs/element](https://developers.google.com/custom-search/docs/element)。

我在[http://www.greens.org.nz/](http://www.greens.org.nz/)上执行了此方法，因此请参阅该网站以获取工作示例。

# c# - VisualStudio - 当基类在另一个程序集中时，如何为基类函数自动创建访问器？

> ID：14479985
> 
> 赞同：1
> 
> 时间：2013-01-23T12:40:22.140
> 
> 标签：c#, unit-testing, vs-unit-testing-framework

我有以下设置。具有 3 个项目的解决方案。

项目 A，命名空间 A，A 类

项目 B，命名空间 B，B 类：A

*和一个用于 B 上的单元测试的测试项目。要访问 B 的私有功能，我使用Create Private Accessor -> Test*在我的测试项目中创建一个访问器。

似乎 A 在另一个程序集中 VS 没有为 A 创建访问器函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:41:04.073

您需要使用多个访问器。考虑一下：

```
// Assembly A
public class ClassA
{
    protected int someInt = 1;
    private void DoSthmWithA()
    {
        someInt = 10;
    }
}

// Assembly B
public class ClassB : ClassA
{
    private void DoSthmWithB()
    {
        someInt = 11;
    }
}

[TestMethod()]
public void Testing
{
    var target = new ClassB();

    var poA = new PrivateObject(target, new PrivateType(typeof (ClassA)));
    var poB = new PrivateObject(target);

    var accA = new ClassA_Accessor(poA);
    var accB = new ClassB_Accessor(poB);
    accA.DoSthmWithA();
    Assert.AreEqual(accA.someInt, 10);
    accB.DoSthmWithB();
    Assert.AreEqual(accA.someInt, 11);
} 
```

或者

```
[TestMethod()]
public void Testing
{
   var target = new ClassB();

   var poA = new PrivateObject(target, new PrivateType(typeof(ClassA)));
   var poB = new PrivateObject(target);

   poA.Invoke("DoSthmWithA");

   var accA = new ClassA_Accessor(poA);
   Assert.AreEqual(accA.someInt, 10);

   poB.Invoke("DoSthmWithB");

   Assert.AreEqual(accA.someInt, 11);
} 
```

# java - 如何使用 JFileChooser 将 .txt 文件保存在所需位置

> ID：14479988
> 
> 赞同：0
> 
> 时间：2013-01-23T12:40:26.763
> 
> 标签：java, swing, file-io, jfilechooser, java-io

使用以下代码，我可以将 program.txt 存储在工作项目文件夹中，但是如何使用 JFileChooser 或任何其他选项将文件保存在选定位置？

```
b2.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent arg0) {
            try {

                o = new BufferedWriter(new FileWriter("program.txt"));

                o.write(t1.getText());
                o.write(",");
                o.write(t2.getText());
                o.write(",");
                o.write(t3.getText());
                o.write(",");
                o.write(t4.getText());
                o.write(",");
                o.write(t5.getText());
                o.write(",");
                o.write(t6.getText());
                o.write(",");
                o.write(t7.getText());
                o.write(",");
                o.close();

            }
             catch (IOException e) {
                e.printStackTrace();
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:50:05.243

```
final JFileChooser fc = new JFileChooser();
int returnVal = fc.showSaveDialog(aComponent); //parent component to JFileChooser
if (returnVal == JFileChooser.APPROVE_OPTION) { //OK button pressed by user
        File file = fc.getSelectedFile(); //get File selected by user
        o = new BufferedWriter(new FileWriter(file)); //use its name

        ...
        //your writing code goes here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:46:10.270

您可以通过在 JFileChooser 对象中设置 File 对象来做到这一点

```
File f = new File("filename");
myJFileChooser.setSelectedFile(f); 
```

查看这篇文章了解更多

[http://www.coderanch.com/t/561950/GUI/java/Save-JTextArea-JFileChooser-TXT-file](http://www.coderanch.com/t/561950/GUI/java/Save-JTextArea-JFileChooser-TXT-file)

# c# - 如何使用 void ManagementObject.InvokeMethod(...) 获取 Win32_Volume 类的 Format 方法的返回值？

> ID：14479992
> 
> 赞同：1
> 
> 时间：2013-01-23T12:40:41.053
> 
> 标签：c#, c#-4.0, wmi

如何获取[Win32_Volume 类的 Format 方法](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390432%28v=vs.85%29.aspx)的返回值？

我使用: [`public void ManagementObject.InvokeMethod(ManagementOperationObserver watcher, string methodName, Object[] args)`](http://msdn.microsoft.com/en-us/library/xeecdb0s%28v=vs.100%29.aspx)that in `System.Management`，它有`void`返回签名。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T18:00:31.107

要直接获取结果，您可以使用[`ManagementObject.InvokeMethod Method (String, ManagementBaseObject, InvokeMethodOptions)`](http://msdn.microsoft.com/en-us/library/ssk42c11%28v=vs.100%29.aspx)InvokeMethod 方法的版本。

像这样

```
using System;
using System.Collections.Generic;
using System.Management;
using System.Text;

namespace GetWMI_Info
{
    class Program
    {
// This method is used to format the volume.

        static void Main(string[] args)
        {
            try
            {
                ManagementScope Scope;                
                Scope = new ManagementScope("\\\\.\\root\\CIMV2", null);

                Scope.Connect();
                ObjectGetOptions Options      = new ObjectGetOptions();
                ManagementPath Path           = new ManagementPath("Win32_Volume.DeviceID=\"\\\\\\\\?\\\\Volume{178edf63-2039-11e2-8012-005056c00008}\\\\\"");
                ManagementObject ClassInstance= new ManagementObject(Scope, Path, Options);
                ManagementBaseObject inParams = ClassInstance.GetMethodParameters("Format");

                ManagementBaseObject outParams= ClassInstance.InvokeMethod("Format", inParams ,null);
                Console.WriteLine("{0,-35} {1,-40}","Return Value",outParams["ReturnValue"]);

            }
            catch (Exception e)
            {
                Console.WriteLine(String.Format("Exception {0} Trace {1}",e.Message,e.StackTrace));
            }
            Console.WriteLine("Press Enter to exit");
            Console.Read();
        }
    }
} 
```

现在如果您使用[ManagementOperationObserver](http://msdn.microsoft.com/en-us/library/system.management.managementoperationobserver%28v=vs.100%29.aspx) 进行异步执行，您可以在[`ObjectReady`](http://msdn.microsoft.com/en-us/library/system.management.managementoperationobserver.objectready%28v=vs.100%29.aspx)事件中获取结果

像这样

```
using System;
using System.Collections.Generic;
using System.Management;
using System.Text;

namespace GetWMI_Info
{
    public class InvokeAsync
    {
        public InvokeAsync()
        {

            // Create a results watcher object,
            ManagementOperationObserver results = new ManagementOperationObserver();

            // Attach handler to events for results and completion
            results.ObjectReady += new ObjectReadyEventHandler(this.NewObject);
            results.Completed += new CompletedEventHandler(this.Done);

            ManagementScope Scope;
            Scope = new ManagementScope("\\\\.\\root\\CIMV2", null);

            Scope.Connect();
            ObjectGetOptions Options = new ObjectGetOptions();
            ManagementPath Path = new ManagementPath("Win32_Volume.DeviceID=\"\\\\\\\\?\\\\Volume{178edf63-2039-11e2-8012-005056c00008}\\\\\"");
            ManagementObject ClassInstance = new ManagementObject(Scope, Path, Options);
            ManagementBaseObject inParams = ClassInstance.GetMethodParameters("Format");

            ClassInstance.InvokeMethod(results, "Format", inParams, null);

            while (!this.Completed)
            {
                System.Threading.Thread.Sleep(1000);
            }

            this.Reset();

        }

        private bool isCompleted = false;

        private void NewObject(object sender,
            ObjectReadyEventArgs obj)
        {
            Console.WriteLine("ReturnValue : {0}", obj.NewObject["ReturnValue"]);
        }

        private bool Completed
        {
            get
            {
                return isCompleted;
            }
        }

        private void Reset()
        {
            isCompleted = false;
        }

        private void Done(object sender,
            CompletedEventArgs obj)
        {
            isCompleted = true;
        }

        public static void Main()
        {
            InvokeAsync example =
                new InvokeAsync();

            return;
        }

    }
} 
```

# c# - 如何在 mvc3 的控制器中访问动态创建的复选框值？

> ID：14479995
> 
> 赞同：1
> 
> 时间：2013-01-23T12:40:44.547
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我有一个包含复选框和提交按钮的视图，如下所示。

```
@using (Html.BeginForm())
    {
        <fieldset>
            <legend style="font-size: 100%; font-weight: normal">Delete</legend>
            <p> Are you sure you want to delete?</p>
            @foreach (string resource in resources)
            {
                if (resource != "")
                {
                    <input type="checkbox" name="Resources" title="@resource" value="@resource" checked="checked"/>@resource
                    <br />
                }
            }
            <br />

            @Html.HiddenFor(m => m.AttendeeListString)
        @Html.HiddenFor(m => m.ResourceListString)

            <span class="desc-text">
                <input type="submit" value="Yes" id="btnYes" />
            </span>
            <span class="desc-text">
                <input type="submit" value="No" id="btnNo" />
            </span>
        </fieldset>
    } 
```

下面是控制器代码...

```
public ActionResult DeleteResource(RoomModel roomModel)
{
...
} 
```

RoomModel 包含一些其他数据...

现在我如何访问控制器中的复选框值？注意：当我点击提交按钮时，我有更多信息需要发送到控制器......有人可以提出一些解决方案......

回答 ：

我已将这两个属性添加到我的模型中

```
public List<SelectListItem> Resources
{
    get;
    set;
}

public string[] **SelectedResource**
{
    get;
    set;
} 
```

我的视图复选框已更新如下

```
@foreach (var item in Model.Resources)
{
<input type="checkbox" name="**SelectedResource**" title="@item.Text" value="@item.Value" checked="checked"/>@item.Text
<br /><br />
} 
```

在控制器中...

```
if (roomModel.SelectedResource != null)
{
    foreach (string room in roomModel.**SelectedResource**)
    {
      resourceList.Add(room);
    }
} 
```

注意：模型中复选框和属性的名称应该相同。就我而言，它是**SelectedResource**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:46:47.133

你有几个选择。最简单的是：

1) 参数将视图模型与 Resources 属性绑定。我推荐这种方式，因为它是首选的 MVC 范例，您只需为需要捕获的任何其他字段添加属性（并且只需添加属性即可轻松利用验证）。

定义一个新的视图模型：

```
public class MyViewModel
{
    public MyViewModel()
    {
       Resources = new List<string>();
    }

    public List<string> Resources { get; set; }

    // add properties for any additional fields you want to display and capture
} 
```

在控制器中创建操作：

```
public ActionResult Submit(MyViewModel model)
{
      if (ModelState.IsValid)
      {
           // model.Resources will contain selected values
      }
      return View();   
} 
```

`resources`2) 参数绑定一个直接在action中命名的字符串列表：

```
public ActionResult Submit(List<string> resources)
{
      // resources will contain selected values

      return View();   

} 
```

重要的是要注意，在问题中，视图正在创建复选框，这些复选框将发送所有已检查资源的字符串值，而不是布尔值（如果您使用了`@Html.CheckBox`帮助程序，您可能会期望）指示是否检查了每个项目。很好，我只是指出为什么我的答案不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:45:39.927

使用 javascript 或 jquery 收集所有值并发布到控制器

```
var valuesToSend='';

$('input:checked').each(function(){
valuesToSend+=$(this).val() + "$";//assuming you are passing number or replace with your logic.
}); 
```

并在提交调用ajax函数后

```
$.ajax({
url:'yourController/Action',
data:valuesTosend,
dataType:'json',
success:function(data){//dosomething with returndata}
}) 
```

否则您可以将模型传递给控制器​​。如果您实现了 Model -View-ViewModel 模式。

```
public class yourViewModel
{
    public string Id { get; set; }
    public bool Checked { get; set; }
} 
```

动作方法

```
[HttpPost]
    public ActionResult Index(IEnumerable<yourViewModel> items)
    {
         if(ModelState.IsValid)
          {
            //do with items. (model is passed to the action, when you submit)
          }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:44:34.450

在 MVC 动作中，有一个对应于复选框名称的参数，例如：

```
bool resources
bool[] resources 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T08:39:23.587

我已将这两个属性添加到我的模型中

```
public List<SelectListItem> Resources
{
    get;
    set;
}

public string[] **SelectedResource**
{
    get;
    set;
} 
```

我的视图复选框已更新如下

```
@foreach (var item in Model.Resources)
{
<input type="checkbox" name="**SelectedResource**" title="@item.Text" value="@item.Value" checked="checked"/>@item.Text
<br /><br />
} 
```

在控制器中...

```
if (roomModel.SelectedResource != null)
{
    foreach (string room in roomModel.**SelectedResource**)
    {
      resourceList.Add(room);
    }
} 
```

注意：模型中复选框和属性的名称应该相同。就我而言，它是 SelectedResource

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T09:40:06.100

我假设`resources`变量是在 Controller 中生成的，或者可以放在 ViewModel 上。如果是这样，那么这就是我将如何处理它：

您的视图模型将`Resources`添加一个字典，看起来像这样：

```
public class RoomModel
{
    public Dictionary<string,bool> Resources { get; set; }

    // other values...
} 
```

`Resources`您使用资源项的名称作为键 ( )填充字典，`string`并将“已检查”值 ( `bool`) 设置为默认状态 false。

例如（在您的`[HttpGet]`控制器中）

```
// assuming that `resource` is your original string list of resources
string [] resource = GetResources();
model.Resources = new Dictionary<string, bool>();
foreach(string resource in resources)
{
  model.Resources.Add(resource, false);
} 
```

要在视图中渲染，请执行以下操作：

```
@foreach (string key in Model.Resources.Keys)
{
  <li>
    @Html.CheckBoxFor(r => r.Resources[key])
    @Html.LabelFor(r => r.Resources[key], key)
  </li>
} 
```

这将使 [HttpPost] 控制器在您回发时自动将字典填充到模型上：

```
public ActionResult DeleteResource(RoomModel roomModel)
{
  // process checkbox values
  foreach(var checkbox in roomModel.Resources)
  {
    // grab values
    string resource = checkbox.Key;
    bool isResourceChecked = checkbox.Value;

    //process values...
    if(isResourceChecked)
    {
      // delete the resource
    }

    // do other things...
  }
} 
```

# java - java - 如何在java Spring非控制器类中访问propery文件

> ID：14479996
> 
> 赞同：1
> 
> 时间：2013-01-23T12:40:46.613
> 
> 标签：java, spring, spring-mvc

我的非控制器类将是，

```
public class Authorization {
String licensePath ;

@Value("${licenseKeyNotFound}")
String licenseKeyNotFound;

    public boolean checkIn(String licensepath) {
    System.out.println("hello "+licenseKeyNotFound);
    licensePath = licensepath;
    return checkIn();
    }

} 
```

这是我的属性文件。

```
licenseKeyNotFound = License File Corrupted 
```

我的`login-servlet.xml`意志是

```
<context:property-placeholder location="conf/LicenseSettings.properties"
     order="2" ignore-unresolvable="true" /> 
```

我没有把它放在 applicationcontext.xml 中。对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:43:30.277

我认为 Spring 没有找到该位置`location="conf/LicenseSettings.properties"`，并且因为您已经设置`ignore-unresolvable="true"`它并没有抱怨它。

尝试将文件放在类路径中并使用`classpath:LicenseSettings.properties`或使用绝对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:51:48.700

I think your problem that you put this in the `servlet.xml` but should in the spring config a `applicationContext.xml`

```
<context:property-placeholder location="conf/LicenseSettings.properties"
     order="2" ignore-unresolvable="true" /> 
```

# sql - 如何在 MS SQL 中限制和排序？

> ID：14479998
> 
> 赞同：10
> 
> 时间：2013-01-23T12:40:51.817
> 
> 标签：sql, sql-server, select

我熟悉 MySQL 但不熟悉 MS SQL，

在 MySQL 中，查询将是这样的：

```
SELECT * from tablename ORDER BY RAND() LIMIT 5 
```

上面的查询从表中给出了 5 个随机数的结果。相同的查询如何处理 MS SQL？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T12:42:17.437

尝试，

```
SELECT TOP 5 * from tablename ORDER BY NEWID() 
```

*   [新ID()](http://msdn.microsoft.com/en-us/library/ms190348.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T12:43:05.277

看看使用[TOP](http://msdn.microsoft.com/en-us/library/ms189463.aspx)和按[NEWID排序](http://msdn.microsoft.com/en-us/library/ms190348.aspx)

就像是

```
SELECT TOP 5 *
FROM TableName 
ORDER BY NEWID() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T12:44:42.263

这将是：

```
SELECT TOP 5 * FROM tablename
ORDER BY NEWID() 
```

在 MSSQL 2005 中测试。