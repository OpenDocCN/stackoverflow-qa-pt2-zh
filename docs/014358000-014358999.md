# StackOverflow 问答 14358000-14358999

# php - 使用html2pdf api保存php和html表中生成的mysql数据

> ID：14358000
> 
> 赞同：0
> 
> 时间：2013-01-16T12:01:36.387
> 
> 标签：php, html, html2pdf

我正在尝试使用 html2pdf 创建 php 文件的 pdf，该文件包含从 mysql 数据库中获取并使用 while 循环生成的 vich 数据表，但是当我尝试运行 php 文件时，它会显示以下错误

> TCPDF ERROR: 一些数据已经输出，不能发送 PDF 文件

谁能帮我解决这个问题？这是我的代码：

```
<?php

session_start();
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . "GMT");
header("Cache-Control: no-cache, must-revalidate");
header("Pragma: no-cache");
//error_reporting(0);
/*
  Author : yaser kazi
  Description : This File Contain Additions and Editing part for the Paxes
 */

if (!isset($_SESSION["username"])) {
    header("location: unauthorize_access.html");
    exit();
}

if (isset($_GET["cityprin"])) {

    mysql_connect("localhost", "root", '') or die(mysql_error());
    mysql_select_db('webapp') or die(mysql_error());

    $get = mysql_query("SELECT code, `name` FROM city ORDER BY `name`") or die(mysql_error());

    $ctr = 0;

    ini_set("memory_limit", "50M");
    ob_start();
    ?>   
<style type="text/css" media="all">
                <!--
                body {
                    margin:0px;
                    font-family:Verdana, Arial, Helvetica, sans-serif;
                    font-size:12px;
                }

                span {
                    font-size:14px;
                }

                td {
                    width: 100mm;
                    max-width: 100mm;
                    height: 33mm;
                    max-height:33mm;
                    top:0mm;
                }
                table {
                    border-collapse:collapse;
                }
                -->
            </style>

    <?php

            echo "<table border=\"1\" align=\"right\" style =\"width: 205mm;\">";
            echo "<th>Srno</th>";
            echo "<th>Code</th>";
            echo "<th>Name</th>";

    while ($city = mysql_fetch_array($get)) {
            $ctr++;
            echo "<td style=\"width: 100mm; max-width: 100mm; height:33mm; padding-left:1mm;\" valign=\"right\">".$ctr."</td>";
            echo "<td style=\"width: 100mm; max-width: 100mm; height:33mm; padding-left:7mm;\" valign=\"right\">".$city['code']."</td>";
            echo "<td style=\"width: 100mm; max-width: 100mm; height:33mm; padding-left:7mm;\" valign=\"right\">".$city['name']."</td>";
              }
    echo "</table>";
} // Submit Tag Close

?>

            <?php
            $content = ob_get_clean();
// conversion HTML => PDF
            require_once('html2pdf/html2pdf.class.php');
            try {
                $html2pdf = new HTML2PDF('P', 'A4', 'EN', false, 'ISO-8859-15', array("5mm", "13mm", "0mm", "0mm"));
                $html2pdf->pdf->SetAuthor('CepheiSys');
                $html2pdf->pdf->SetTitle('City_list');
//        $html2pdf->pdf->SetSubject('HTML2PDF Wiki');
                //       $html2pdf->pdf->SetKeywords('HTML2PDF, TCPDF, example, wiki');
                $html2pdf->setDefaultFont('Arial');
                $html2pdf->writeHTML($content);
                $html2pdf->Output('City_list.pdf');
            } catch (HTML2PDF_exception $e) {
                echo $e;
            }
            ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:30:21.007

在输出这些标题之前，您已经获得了某种输出。有几件事需要检查：

*   您在代码前面是否有任何 echo 语句（或类似语句）？
*   在那个 PHP 标记之前有任何空格吗？一个新的行或标签会触发输出被发送到浏览器
*   您是否在编辑器中关闭了 BOM 功能，因为这可能会导致 UTF8 文档出现问题并触发输出被发送到浏览器
*   检查错误日志，该错误应该有一个行号。它应该让您知道从哪里开始寻找

# intuit-partner-platform - 无法通过 Intuit 数据服务和同步管理器在 QB Desktop 中创建新帐户（使用 IntuitDataSyncEngine）

> ID：14358002
> 
> 赞同：0
> 
> 时间：2013-01-16T12:01:38.747
> 
> 标签：intuit-partner-platform

我正在（使用 POST 方法）将此请求（针对新帐户）发布到 url [https://services.intuit.com/sb/account/v2/570357950](https://services.intuit.com/sb/account/v2/570357950)

123456789 CurrentAccount true 费用 费用 1111

但收到此错误：

## 500内部服务器错误。

### 您要查找的资源有问题，无法显示。

我正在使用 Intuit OAuth API 控制台发布测试请求。虽然我能够在相同的场景中从 QB 桌面（通过 IDS 和同步管理器）获取数据。

任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:58:29.263

该 URL 对 POST 数据无效。

如果您参考[文档](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0100_Calling_Data_Services/0011_Creating_an_Object)，您会注意到创建帐户的正确 URL 格式是：

```
https://services.intuit.com/sb/<objectName>/v2/<realmID> 
```

您使用的网址是：

```
https://services.intuit.com/sb/account/v2/ 
```

缺少哪个组件（它应该是一个大约 6 到 12 位的整数）

修正你的网址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:47:19.547

我的问题解决了。使用来自 intuit 的这个新工具进行测试：[http ://apiexplorer.developer.intuit.com](http://apiexplorer.developer.intuit.com)

# xml - 如何将复杂的xml数据导入excel

> ID：14358003
> 
> 赞同：1
> 
> 时间：2013-01-16T12:01:41.070
> 
> 标签：xml, excel

如何将 xml 数据导入到具有复杂数据的 excel 中，例如：

```
<company>
  <employee>
  <Name>rock</rock>
  <Designation>E1</designation>
  <Address>
    <Address1></Address1>
    <Address2></Address2>
  </employee>
</company> 
```

# extjs - 如何设置 Ext.Form 脏状态？

> ID：14358004
> 
> 赞同：9
> 
> 时间：2013-01-16T12:01:49.147
> 
> 标签：extjs

如何将`dirty`表单的状态更改为`false`？

有类似`setDirty(false)`的方法`Ext.Form.Panel`吗？

**升级版：**

我的任务是跟踪`Form`脏状态，以便仅在表单发生任何更改时才启用停靠的 SAVE 按钮。

我正在跟踪`dirtychange`事件：

```
init: function() {
    this.control({
        'form': {
            dirtychange: function(form) {
                alert('change');      
            }
        }
    });
} 
```

但是，当我通过`loadRecord()`方法将记录加载到表单中时，我在加载记录时收到`chage`警报，并且在加载记录后表单变脏。

我想`dirty`在记录加载后立即重置表单的状态，并在记录填写的表单上开始跟踪`dirtychange`事件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-16T12:35:45.927

> **更正**
> 
> 有一个可用的属性可以在设置值时更改原始值。
> 
> *trackResetOnLoad：真*
> 
> 看到这个**[JSFiddle](http://jsfiddle.net/sran/SgkzZ/)**

*下面的旧答案可能不方便，但我让它保持不变*

**首先我不得不说你不会找到任何这样的方法**

那是因为表单没有这样的状态，字段有它。表单所做的只是遍历每个字段并检查它是否脏。如果任何字段是脏的，则将检查该值（脏标记）自上次检查以来是否已更改，如果`dirtychange`是则触发事件。然后将其保存为最后一次检查 ( `wasDirty`)

**现在让我们看看这些字段，因为它们真正触发了它：**

他们正在通过检查调用时间`onChange`的值在哪里`onReset`来检查字段是否脏。`!me.isEqual(me.getValue(), me.originalValue)``originalValue``initValue`

**现在如何“设置”表单不再“脏”**

`getFields()`现在使用on遍历表单的所有字段，`Ext.form.Basic`我们将通过调用每个字段将当前值设置为原始值（reset 现在将重置为此值），仅此`initValue`而已。

*删除了错误的代码*

**编辑**

好吧，我已经将上面的最后一个代码修改为

```
var items = form.getForm().getFields().items,
      i = 0,
      len = items.length;
  for(; i < len; i++) {
    var c = items[i];
    if(c.mixins && c.mixins.field && typeof c.mixins.field['initValue'] == 'function') {
      c.mixins.field.initValue.apply(c);
      c.wasDirty = false;
    }
} 
```

并分叉了一个**[工作示例](http://jsfiddle.net/sZR8M/)**。在检测到任何更改之前，该按钮将保持非活动状态，如果您删除更改，它将再次设置为非活动状态。玩弄它我想这就是你要找的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T09:24:15.707

有方法[`reset()`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-method-reset "Ext.form.Basic.reset()")。如果不带参数使用，它会保留加载的表单数据`loadRecord()`。

所以如果你`reset()`在加载数据后调用，你的表单不应该再脏了。

```
myForm.loadRecord(record);
myForm.reset(); 
```

我认为，该`dirtychange`事件也将通过加载数据来调用，但之后`reset()`您可以使用`isDirty()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-24T07:47:45.617

这里的解决方法是使用隐藏字段并设置它的值以强制表单变脏。我们在不包含表单字段的小部件中使用它。要将表单设置为脏，我们只需更改隐藏字段的值，将其设置为干净，我们将其重置为原始值。

# c# - ExecutionEngineException 仅在调试时

> ID：14358008
> 
> 赞同：2
> 
> 时间：2013-01-16T12:02:12.797
> 
> 标签：c#, .net, visual-studio-2012, entity-framework-5, executionengineexception

我的 C# 代码仅在调试时抛出 ExecutionEngineException。当我从 Visual Studio 运行它而不进行调试（按“不调试开始”）按钮时，这段代码可以正常工作。但是当我从 Visual Studio 调试它时，它会抛出 ExecutionEngineException。

由于这个问题，我无法调试我的应用程序，因为我尝试调试的代码是在有问题的代码之后执行的。

以下是一些细节：

*   我正在使用 Visual Studio 2012
*   主应用程序是调用我的 C# 代码的 C++/CLI 应用程序
*   应用程序运行一段时间，直到它到达 C# 中有问题的代码行
*   相关代码是针对实体框架上下文的查询。
*   我正在使用实体框架 5
*   存储我的实体的数据库是 SQL Server LocalDB（VS2012 自带的那个）

**编辑**

进一步调查表明，实际问题是源自 System.Data.DataSet 的默认构造函数的访问冲突异常，如果我只写`new DataSet()`.

**编辑 2** 我创建了一个小应用程序来演示这个问题。源代码可以在[这里](https://docs.google.com/file/d/0B4QQDeKuMr4eQ3IwZERmNTctbDQ/edit)找到。

欢迎您编译它并尝试运行该项目`Application`。创建新`Adder.cs`的. 请注意，调试器应该是混合的，而不是托管/原生的。`ExecutionEngineException``DataSet`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T14:33:49.293

您的 C++/CLI 代码很可能会破坏垃圾收集堆。非托管代码行为不端的一种非常典型的方式。这直到以后才会被发现，例如当您新建一个对象或垃圾收集器运行时。因此，崩溃的代码与导致损坏的代码完全无关，并且不会提示您错误的位置。

调试它并没有什么乐趣，它通常需要彻底的代码审查，对非托管代码进行大量单元测试以及几天的调试才能找到它。“仅在调试版本中崩溃”的情况也很常见，这并不意味着发布版本中没有堆损坏。你有点幸运，它像这样失败了，当它发生在发布版本中时，堆损坏*更难*调试。你会想要投资一个调试分配器来捕捉正在运行的错误，就像你从`<crtdbg.h>`. 这个问题通常使垃圾收集器成为管理内存的首选方式。

我的哀悼和祝你好运。

# javascript - do循环的形成

> ID：14358009
> 
> 赞同：0
> 
> 时间：2013-01-16T12:02:15.697
> 
> 标签：javascript

我正在完成 Jeremy Keith 编写的名为“DOM 脚本 - 使用 JavaScript 和文档对象模型的网页设计”的书。

这是`'do...while'`给出的示例：

```
var count = 1;
do {
    console.log(count);
    count++;
} while (count < 11); 
```

在书中他说过，如果我们看一下`do...while`循环示例，我们可以像这样完整地表述它：

```
initialize;
while (condition) {
    statements;
    increment;
} 
```

当然，这实际上是一个错误，这实际上是`while`循环而不是`do...while`循环的公式。

我还检查了勘误表，看看这是否是书中的错误，但没有提及。

我说这是`while`循环而不是`do...while`循环的公式是否正确？有没有我可以参考的权威 ECMAScript 文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:22:28.933

在您上面提到的书中，do-while 是这样描述的：

```
 As with the if statement, it is possible that the statements contained within the curly
    braces of a while loop may never be executed. If the condition evaluates as false on the
    first loop, then the code won’t be executed even once.
    There are times when you will want the code contained within a loop to be executed at
    least once. In this case, it’s best to use a do loop. This is the syntax for a do loop:
    do {
    statements;
    } while (condition);
    This is very similar to the syntax for a regular while loop, but with a subtle difference. Even
    if the condition evaluates as false on the very first loop, the statements contained within
    the curly braces will still be executed once. 
```

因此，阅读本节后很清楚，作者从未说过 do-while 和 while 是相同的。他说的是，无论你在做什么使用 while，你都可以使用 do-while 来做同样的事情。但是，在一段时间内，如果在第一次迭代本身期间条件评估为假，它甚至不会进入循环。但是在do-while中，由于语法中的迭代是后面指定的，所以它至少会进入循环一次。他的意思差不多就是这个。

# java - 在超类中调用超类方法

> ID：14358012
> 
> 赞同：3
> 
> 时间：2013-01-16T12:02:24.730
> 
> 标签：java, inheritance, overriding, subclass, superclass

我找不到一个好的总结来描述我的问题（欢迎提出建议）

我有以下两个课程：

**测试1**

```
import java.lang.reflect.Method;

abstract class Test1 {

    boolean condition = true;

    public void f() {
        System.out.println("Test1 : f");
    }

    public void g() {
        System.out.println("Test1 : g");
        f();
        if (condition) {
            f(); // call Test1.f() here. HOW?

            // Following didn't work
            try {
                Method m = Test1.class.getDeclaredMethod("f");
                m.invoke(this);
            } catch (Exception e) {
                System.err.println(e);
            }
        }
    }
} 
```

**测试2**

```
class Test2 extends Test1 {

    public void f() {
        System.out.println("Test2 : f ");
    }

    public static void main(String[] args) {
        Test2 t2 = new Test2();
        t2.g();
    }

} 
```

输出是：

```
Test1 : g
Test2 : f
Test2 : f
Test2 : f 
```

问题是，由于`condition`字段给出的一些特殊条件，即使`Test1`我使用.`Test1``f()``g()``Test2`

我尝试了反射，但它也不起作用。有什么建议么？

**编辑1：** 我没有具体提到它，但如果你仔细看，Test1 是抽象的。所以我无法创建它的对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T12:08:56.403

You should seriously consider the logic you are trying to build. The reason you tried to override the method f in child class has sure a reason behind it.

Alternatively, you can have boolean value as return from method f and in child method use `boolean r = super.f(); if(r){//execute child logic.}` This should solve your problem.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T11:33:06.933

我的理解。

**你的问题：**
如果在类`g()`中调用方法那么为什么它运行子（Test2）类。`f()``Test1``f()`

**答案：** 来自[JLS-8.4.8.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.8.1)

子类 Test2 声明了一个方法`f()`，它覆盖了`f()`Test1 的方法。它继承了`g()` Test1 类的方法。

本例中关于覆盖的关键点在于，`g()`Test1类中声明的方法调用`f()`了当前对象定义的方法，而当前对象`this`不一定是`f()`Test1类中声明的方法。

因此，当`g()`在 main 中使用 Test2 对象 t2 调用时，方法`f()`主体中`g()`的调用是`f()`对对象 t2 的调用。`f()`这允许 Test1 的子类在不重新定义方法的情况下更改方法的行为。

**脑震荡：**

因此，如果某个类覆盖了其父类的某个方法，则契约说，Test1 旨在扩展，应该清楚地表明类与其子类之间的契约是什么，并且应该清楚地表明子类可以`f()`以这种方式覆盖该方法.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T12:07:15.017

Add a method f2 in Test1:

```
private void f2() {
    System.out.println("Test1 : f");
}
public void f() {
    this.f2()
} 
```

This way you can call f2() when the condition is true.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T12:11:20.853

如果方法名称相同，则不能这样做。
其他方式是可以通过使用 super.f() 直接在子类中调用超类方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T12:44:52.713

继承只允许您继承行为`super.f()`、覆盖它`@Override`或两者兼而有之

```
@Override
public void f(){
    super.f(); 
    //do something  
} 
```

您不能覆盖一个方法，然后在它被覆盖之前尝试调用父方法状态。继承不是这样工作的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T12:23:00.147

**UPD：**专门针对那个不太专心的人，我正在做解释。

在下面的代码中，我正在使用括号创建新的**匿名**`{ }`类。这使我可以创建 subclassed 的新实例`Test1`。

* * *

而不是使用`reflection`你可以做这样有趣的事情：

```
public void g() {
    System.out.println("Test1 : g");
    f();
    if (condition) {
         new Test1(){}.f();
    }
} 
```

唯一的一个缺点是`f()`这样调用的方法是调用绝对另一个对象的方法。

# syntax - 由于递归规则调用，Xtext 规则具有非 LL(*) 决策

> ID：14358015
> 
> 赞同：0
> 
> 时间：2013-01-16T12:02:26.927
> 
> 标签：syntax, grammar, xtext

我正在尝试在 Xtext 中实现一个简单的语法来**识别**由 ID 和函数调用组成的函数调用，这些函数调用由一个点分隔（类似 Java 的语法）。即任何由 ID 和/或函数组成的链，总是以函数结尾。

示例源代码：`a.b(a).c(b()).b.d();`

我编写了以下 Xtext 语法：

```
Test: Chain ';';
Chain: (IdOrFunc '.')* ID Func;
IdOrFunc: ID Func?;
Func: '(' IdOrFunc? ')'; 
```

但是，尝试通过 Xtext 生成语言代码时出现以下错误：

```
[fatal] rule ruleChain has non-LL(*) decision due to recursive rule invocations reachable from alts 1,2\.  Resolve by left-factoring or using syntactic predicates or using backtrack=true option. 
```

`ID`如果我在`Chain`规则中替换为 ，则语法开始起作用`'xyz'`，即

```
Chain: (IdOrFunc '.')* 'xyz' Func;` 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:29:39.393

那么：

```
Test: Chain ';';
Chain: IdOrFunc ('.' ID Func)*;
IdOrFunc: ID Func?;
Func: '(' IdOrFunc? ')'; 
```

但是，我不完全确定它解析完全相同的表达式，因为我只是快速查看了它（左递归在 (IdOrFund '.')* 语句中）。

# jquery - jQuery UI 滑块检测滑块句柄拖放事件

> ID：14358021
> 
> 赞同：3
> 
> 时间：2013-01-16T12:02:36.943
> 
> 标签：jquery, jquery-ui, slider

你能检测到滑块手柄的拖放事件吗？我发现只有这个事件 - 幻灯片 - 更改 - 开始 - 停止

但我需要拖动事件。你怎么能检测到它？

```
$(".slider").slider({
    value   : 3
    min     : 1,
    max     : 5,
    step    : 1,
    slide   : function(e, ui) { },
    change  : function(e, ui) { },
    start   : function(e, ui) { },
    stop    : function(e, ui) { }
}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T13:12:21.810

## [http://jsfiddle.net/e4tr7/34/](http://jsfiddle.net/e4tr7/34/)

拖动事件开始，放下事件停止

```
$(".slider").slider({
   slide : function(e, ui) { 
   //user is dragging
   },
   stop    : function(e, ui) {
   //user has dropped            
   }        
}); 
```

# http-headers - 在烧瓶中获取客户端IP地址

> ID：14358022
> 
> 赞同：1
> 
> 时间：2013-01-16T12:02:37.270
> 
> 标签：http-headers, ip, client-server, flask

在以下情况下，我试图在服务器 Y 上获取客户端 IP，

客户端请求服务器 X，服务器 X 将请求转发到服务器 Y。

并且返回流程是Y->X->client

http标头中的'REMOTE_ADDR'（实际上我是从request.environ ['REMOTE_ADDR']获取的）具有服务器X的IP。从哪里可以获得服务器Y的客户端IP？

**更新：**

X有一个公共IP。Y 在专用网络中，外部无法访问。现在我在同一个专用网络中使用客户端，我通过公共网络请求 X。

我只想知道标头是否已经具有我需要的内容，而无需在 X 处操作标头以包含客户端的 ip。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:04:49.560

如果您的应用程序位于代理之后，那么在您的应用程序看来，请求的远程地址将来自代理，而不是实际的客户端。

http 规范中没有规定传递“真实”地址，但这样做的事实上的标准是让您的代理设置一个[X-Forwarded-For 标头](http://en.wikipedia.org/wiki/X-Forwarded-For)

Werkzeug 提供了一个[修复程序来帮助解决这个问题，](http://werkzeug.pocoo.org/docs/contrib/fixers/#werkzeug.contrib.fixers.ProxyFix) [Flask 文档](http://flask.pocoo.org/docs/0.10/deploying/wsgi-standalone/#proxy-setups)中有一个详细的示例，`request.remote_addr`应该是你所期望的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:27:38.567

尽管您声称，X 基本上是一个代理，因为它根据用户提出的请求向 Y 发出自己的请求。所以它`REMOTE_ADDR`是 X 之一是完全有效的。

您必须在 X 的请求中添加自定义标头，例如`X-Original-User-IP`使用户的 IP 可用于 Y。`ProxyFix`如果需要，您可以使用它，它将重写`X-Forwarded-For`为`REMOTE_ADDR`

**您应该确保 Y 仅对 X 可用并且不能直接访问。否则，只需发送该自定义标头即可欺骗他的 IP 地址。**

# image - Flexslider 响应性

> ID：14358024
> 
> 赞同：0
> 
> 时间：2013-01-16T12:03:07.303
> 
> 标签：image, responsive-design, flexslider

只是想知道是否有人使用 Flexslider 发现当从不同大小的浏览器窗口来回切换时，幻灯片图像不会自动调整到新的高度和宽度。

让我澄清一下 - 它们确实缩小了，但是当缩小幻灯片中的第一张图像时，会卡在以前的纵横比上，直到下一张幻灯片进来，此时整个事情都会调整。

为了阻止我的内容受到影响，我为 flexslider 创建了一个固定高度的容器，并使用媒体查询来改变它的高度，因为它被缩小了。这可以完美地按比例缩小。

似乎正在备份的路上，它无法将图像高度分类。

我会提供链接，但这是一个有信心的新客户项目。

除了容器 div 上的固定高度和媒体查询之外，所有编码都与演示文件中的完全相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-01T23:34:38.157

我遇到了同样的问题 - 我发现并非所有宽度都具有相同的值。

例如

```
.clone  { display: block; float: left; width: 994px!important; }

<img src="http://www.website.com/images/panel1.jpg" alt="" width="980px"> 
```

在我的 css 中大约有 4 个实例具有不同的宽度 [耻辱] 所以我进去查看 css 文件。

我希望这有帮助

祝你好运

# javascript - 使用 show.hide 显示 div 的问题？

> ID：14358025
> 
> 赞同：0
> 
> 时间：2013-01-16T12:03:08.067
> 
> 标签：javascript, jquery, html, web

嗨，我有一些JavaScript在一个独立的网页上有5个，它所做的就是选择一个选项，它将显示一个基于下拉选择的div并隐藏其他人。基本上代码所做的是什么时候在下拉列表中选择将显示相应的 DIV，例如 pubs。

**我遇到的问题是在我想要这个工作的网页中我有很多 Div 标签，当页面加载时页面上的所有 Div 都被隐藏了，显然我不想要这个。**

任何帮助将非常感激

在页面加载时隐藏所有 div 的代码是

```
$('div').not(name).hide(); 
```

有没有办法解决这个问题，我现在看不到我将如何解决它。？

JS

```
<script>

    $(document).ready(function () {

        function showTab( name ) 
        {
        name = '#' + name;

        $('div').not(name).hide();

        $(name).show();
    }

    $('#dropdown').change( function() {

        showTab( $( this ).val() );
    });

    showTab( $('#dropdown').val() );

}); 
```

HTML

```
<form>
          <p>
          <select id="dropdown" name="dropdown">
              <option value="Pub-Chains" selected="selected">Pubs </option>
              <option value="Councils">Councils </option>
              <option value="Property">Property </option>
              <option value="Various">Various </option>
              <option value="Universitys">Universitys </option>
          </select>
          </p>
     </form> 
```

我的 Div 是这样命名的

```
Div id="Pub-Chains"
Div id="Councils"
Div id="Property"
Div id="Various"
Div id="Universitys" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:05:33.833

试试这个：

```
$(document).ready(function () {

    function showTab( name ){
       name = '#' + name;
       $(name).siblings().hide(); //<-- hide this way
       $(name).show();
    } 
```

如果这不起作用，那么你可以这样做，只是把它放在外面`doc ready handler`

```
 function showTab( name ){
       name = '#' + name;
       $(name).siblings().hide(); //<-- hide this way
       $(name).show();
    }
   $(document).ready(function () {
   // then all your change stuff here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:06:20.970

为所有这些 div 创建一个父 div ...并在选择器中调用它..

试试这个

```
<div id="tabdivs">
Div id="Pub-Chains"
Div id="Councils"
Div id="Property"
Div id="Various"
Div id="Universitys"
</div> 
```

**jQuery** **更新**

```
$('#tabdivs').children().not(name).hide(); 
```

[在这里](http://jsfiddle.net/cTvdM/1/)摆弄..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T12:07:08.950

您必须将要参与显示隐藏的 div 分组，以将它们与页面上的其他 div 分开。您可以为它们分配一个公共类并使用该类来隐藏它们。

```
Div id="Pub-Chains" class="opt"
Div id="Councils" class="opt"
Div id="Property" class="opt"
Div id="Various" class="opt"
Div id="Universitys" class="opt"

$('div.opt').hide(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T12:08:53.783

如果您的目标`<div>`都是兄弟姐妹，那么您可以轻松地执行以下操作。

```
<div>
  <div id="Pub-Chains">
  <div id="Councils">
  <div id="Property">
  ...
</div> 
```

```
$(function(){
  $("select#dropdown").change(function(){
    $('#' + $(this).val()).show().siblings().hide();
  }).change();
}); 
```

[看这里。](http://jsfiddle.net/q4Le6/)

如果您有更复杂的布局，那么您可以考虑使用类名来对`<div>`元素进行分组。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-16T12:16:16.363

```
$(document).ready(function () {
  var ddl = $("#dropdown");
  $('#' + ddl.val()).show().siblings().hide();
  ddl.change(function () {
  $('#' + $(this).val()).fadeIn().siblings().hide();
 });
}); 
```

看[演示](http://jsfiddle.net/SpeWq/)

# asp.net - 如何连接数据输出分隔值？

> ID：14358034
> 
> 赞同：0
> 
> 时间：2013-01-16T12:03:32.637
> 
> 标签：asp.net, sql, gridview, csv, concatenation

我正在创建一个视图作为矩阵报告，它将来自各种表的行数据显示为列。我认为它可以通过连接来实现这一点，但我有点卡住了。我的查询效果很好，但是我使用的是显示在网格视图中的反转数据表（数据透视表），而我目前得到的是我所有的多个值都在每个单元格中相加！

```
Set Name    James   Smith   Jones
Training 1      9       5       7
Training 2      5       7       8
Training 3     12      10       9 
```

这就是我想要输出的！

```
Set Name    James    Smith     Jones
Training 1  3,1,2,3  2,3       5,2
Training 2  4,1      1,1,5     2,2,2,2 
Training 3  1,4,4,3  2,2,2,4   1,3,2,3 
```

我在用户和培训之间建立了多对多的关系，因为一个用户可以在特定时间段内进行许多具有多种结果的培训实例。

此`userProfilesTbl` 表存储来自 ASP.NET 成员、角色和配置文件表的其他用户信息。

```
•   PK UserId (int) 
•   StaffNo (varchar) 
•   forename (varchar) 
•   surname (varchar) 
•   FK st_id (int) 
```

此`storeTbl`表引用组中的所有商店

```
•   PK st_id (int) 
•   store (varchar) 
•   storeNo (varchar) 
•   FK d_id (int) 
```

该`shiftTbl`表引用了不同的班次模式

```
•   PK wa_id (int) 
•   Shift (varchar) 
```

该`userAssessmentTbl`表包含与用户、进行的培训和培训的结果有关的信息。o_id 只能是一个值 1、2、3 或 4

```
•   PK ti_id (int) 
•   FK UserId (UID) 
•   FK tt_id (int) 
•   o_id (int) 
•   n_id (int) 
```

此`setTbl`表是每个培训课程的名称

```
•   PK s_id (int) 
•   setName (varchar) 
•   instruction (varchar) 
•   link (varchar) 
•   setNo (int) 
```

这是我的 sql 查询字符串，如果我`LEFT JOIN`使用下面的 SQL 在表上执行 plain 's，我将得到与一个人相关的几行：

```
Dim query As String = "SELECT * 
                       FROM userProfilesTbl 
                       LEFT JOIN storeTbl ON userProfilesTbl.st_id = storeTbl.st_id 
                       LEFT JOIN shiftTbl ON userProfilesTbl.wa_id = shiftTbl.wa_id
                       LEFT JOIN userAssessmentTbl ON userProfilesTbl.UserId = userAssessmentTbl.UserId 
                       LEFT JOIN trainingTbl ON userAssessmentTbl.tt_id = trainingTbl.tt_id
                       LEFT JOIN setsTbl ON trainingTbl.s_id = setsTbl.s_id 
                       WHERE userProfilesTbl.st_id=@st_id 
                       AND userProfilesTbl.wa_id=@wa_id 
                       AND DATEPART(mm,t_date) = @m_date 
                       AND DATEPART(yyyy,t_date) = @y_date  
                       ORDER BY surname ASC" 
```

有任何想法吗？

# windows - ccmake。在 cygwin 和 Windows 7（64 位）中

> ID：14358037
> 
> 赞同：1
> 
> 时间：2013-01-16T12:03:36.027
> 
> 标签：windows, cygwin

我过去只使用Mac编译，所以我对以下问题有点迷茫。

我正在尝试通过 cygwin 在 Windows 7 中编译一个程序。svn co 获取源代码的工作原理，但在$ ccmake 上。出现错误“找不到命令”。我有开发。来自 cygwin 设置的工具，以及安装的 cmake 和 MinGW-64。错误可能在哪里？是ccmake。cygwin 完全支持命令吗？

任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T02:46:34.010

如果你使用 Cygwin，你也应该使用 Cygwin 安装 Cmake。该软件包应称为“cmake”。完成后，您应该在以下位置找到 ccmake

```
/usr/bin/ccmake 
```

又名

```
C:\cygwin\bin\ccmake.exe 
```

你应该确保你的`PATH`包含`/usr/bin`

[**参考**](http://cygwin.com/packages/cmake/cmake-2.8.9-2)

# javascript - Firefox 中的 div 滚动

> ID：14358038
> 
> 赞同：0
> 
> 时间：2013-01-16T12:03:39.573
> 
> 标签：javascript, events, firefox, scroll, mousewheel

我使用此代码滚动我的 div

```
mydiv.addEventListener('mousewheel', function(e)
    {
    var col = 255;
    if(e.wheelDelta/120 > 0)
        {
        if(col < 245)
            {
            col+=10;
            }
        this.scrollTop = this.scrollTop-25;
        }
    else
        {
        if(col > 10)
            {
            col-=10;
            }
        this.scrollTop = this.scrollTop+25;
        }
    }); 
```

*它在Opera*中运行没有问题，在*Firefox*中它什么也没做，而且一开始没有错误，所以我不知道问题出在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:12:49.277

Firefox 目前不支持鼠标滚轮事件。

相反，它支持 DOMMouseScroll 事件。

[http://www.sitepoint.com/html5-javascript-mouse-wheel/](http://www.sitepoint.com/html5-javascript-mouse-wheel/)

# php - 如何在 PHP 中解析像 geo:point 这样的 JSON？

> ID：14358040
> 
> 赞同：1
> 
> 时间：2013-01-16T12:03:51.280
> 
> 标签：php, json, parsing

> **可能重复：**
> [如何使用减号访问对象属性？](https://stackoverflow.com/questions/11940244/how-to-access-an-object-property-with-a-minus-sign)

我正在尝试解析 geo:point / geo:lat 但无处可去。这是我到目前为止的代码

```
 $content = get_data('http://ws.audioscrobbler.com/2.0/?method=geo.getevents&location=united+kingdom&api_key=XXX&format=json&limit=10000&festivalsonly=1');
  $LFMdata = json_decode($content);
  foreach ($LFMdata->events->event as $event) {
      $venue_lat = $event->venue->location["geo:point"]["geo:lat"];
      $venue_long = $event->venue->location["geo:point"]["geo:long"]; 
```

JSON 将包含类似

```
"geo:point": {
     "geo:lat": "52.7352",
     "geo:long": "-1.695392"
} 
```

有人知道吗？在 JavaScript 中看到了示例，但在 PHP 中没有看到

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:13:19.343

您可以使用

```
$venue_lat = $event->venue->location->{"geo:point"}->{"geo:lat"}; 
```

或者让它像关联数组一样返回所有内容（`json_decode`设置为的第二个参数`true`）：

```
 $LFMdata = json_decode($content, true);
  foreach ($LFMdata["events"]["event"] as $event) {
      $venue_lat = $event["venue"]["location"]["geo:point"]["geo:lat"];
      $venue_long = $event["venue"]["location"]["geo:point"]["geo:long"]; 
```

# windows - 如何在 Windows 中设置 Erlang 环境变量，特别是 ERL_MAX_PORTS？

> ID：14358045
> 
> 赞同：1
> 
> 时间：2013-01-16T12:04:07.203
> 
> 标签：windows, erlang, cmd, environment-variables

我遇到了一个 Erlang 程序的问题，我已经达到了打开文件的最大数量。我在[其他地方](https://stackoverflow.com/questions/4242887/while-tesing-i-got-erlang-error-badmatch-error-system-limit-module-funct)看到，可以使用环境变量来增加这个最大值`ERL_MAX_PORTS`。但是，我正在努力弄清楚如何做到这一点。

当我输入`set`时，`cmd`我没有看到任何与 Erlang 相关的环境变量，我应该这样做吗？

我该如何设置`ERL_MAX_PORTS`？来自 Erlang shell 还是 OS Shell？

笔记。我正在使用 Windows 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:25:56.583

您应该能够通过启动它来将 ERL_MAX_PORTS 添加到传递给 Erlang VM 的参数中，`erl -env ERL_MAX_PORTS X`其中 X 是所需的端口数。

# unit-testing - 使用集成单元测试调用层次结构

> ID：14358046
> 
> 赞同：0
> 
> 时间：2013-01-16T12:04:09.973
> 
> 标签：unit-testing, visual-studio-2012, integration-testing, mstest, code-coverage

我使用 VS2012 单元测试进行集成测试。我的庞大而庞大的对象模型是直接针对 SQL 数据库编写的。我知道，我知道，但事实就是这样。这不是一个小项目。设计存在一些问题，但我们将继续讨论实际问题......

是否有更好的测试资源管理器允许我按 SQL 存储过程名称、它调用的函数（嵌套测试）和调用它的函数有效地对测试进行分组。以及显示 NCrunch 类型代码覆盖率。

我刚刚编写的一些代码的一个陈旧而可怕但有效的示例。

```
Stored Procedures: GetUser (@UserID)
                   GetPermissions(@UserID, @Element) 
```

班级用户：

```
Public Function GetUserFromDb(userId As Integer) As User
    '... sql command etc for GetUser
    FillUserFromReader(myUserInstance, myDataReader)
End Function

Public Shared Function FillUserFromReader(instance As User, r As SqlDataReader)
    instance.ID = CStr(r("ID"))
    instance.Name = CStr(r("Name"))
    instance.Initials = CStr(r("Initials"))
End Function 
```

另一个名为 Permissions 的类...

```
'Returns both permission and user on same row...
Public Function GetPermissionsFromDb(userId As Integer) As UserPermission
    '... sql command for GetPermissions
    'use similar FillPermissionsFromReader as above
    myPermissionsInstance.User = New User()
    User.FillUserFromReader(myPermissions.User, myDataReader)
End Function 
```

我的测试看起来像：

```
<TestCategory("Runs GetUserFromDb"),
 TestCategory("Calls GetUser"),
 TestCategory("Runs User.FillUserFromReader")> 'sproc then .net category
Public Sub GetUserTest()
    Dim u = User.GetUser(1)
    Assert.IsNotNull(u) 'etc
    Assert.IsTrue(u.Name = "Tom")
End Sub

<TestCategory("Calls GetPermissions"),
 TestCategory("Runs Permissions.GetPermissionsFromDb"),
 TestCategory("Runs Permissions.FillPermissionsFromReader")
 TestCategory("Runs GetUserFromDb"),
 TestCategory("Calls GetUser"),
 TestCategory("Runs User.FillUserFromReader")> 'sproc then .net category
Public Sub GetPermissionTest()
    Dim p = Permissions.GetPermissions(1)
    Assert.IsNotNull(p) 'etc
    Assert.IsTrue(p.User.Name = "Tom")
End Sub 
```

你能看到我在这里做什么吗？！这是一个很小的例子。当我更改存储过程时，我可以快速找到“Calls ...”，然后运行使用该过程的所有测试。真是一团糟，有没有更好的解决方案（不涉及代码重组或编写我自己的测试资源管理器）？

注意：我故意不使用 ，`TestPropertyAttribute`因为它不会在测试资源管理器中分组两次。所以它只会显示在属性“组”之一中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:26:08.467

In VS 2012 quarterly update1 (ref [http://blogs.msdn.com/b/visualstudioalm/archive/2012/11/26/visual-studio-and-team-foundation-server-2012-update-1-now-available.aspx](http://blogs.msdn.com/b/visualstudioalm/archive/2012/11/26/visual-studio-and-team-foundation-server-2012-update-1-now-available.aspx) ), we added group by traits support which allows you to group by TestCategory.

In your case, tests can potentially shown in more than one categories (which I believe is what you're looking for!).

HTH Patrick MSFT VS-ALM team.

# android - 为 Android 创建位置跟踪应用程序：原生还是 phonegap？

> ID：14358048
> 
> 赞同：2
> 
> 时间：2013-01-16T12:04:11.537
> 
> 标签：android, cordova, geolocation

我们需要创建一个应用程序，它可以用于员工的时间跟踪以及位置跟踪。我们只想为 Android 编程，但我们没有任何 Android 技能。

因此 phonegap 成为了一个很好的选择。但是有几个问题，我在网上找不到明确的答案。

*   如果手机处于待机状态，phonegap-app还能发送位置数据吗？这仍然是phonegap标准还是我需要使用插件？

*   智能手机将非常简单且便宜。是否存在更高的风险，Android 关闭 phonegap 应用程序以释放内存然后用于原生应用程序？

总而言之，是否建议花时间学习 Android 或者留在我们的语言 JS 会更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:47:06.157

使用 phonegap 编写位置跟踪应用程序并让它 a) 在低规格的 android 手机上以高性能方式工作是完全可行的，b) 当手机处于待机模式时，让应用程序在后台运行。

为了让应用程序在 android 的后台运行，有必要获取部分唤醒锁（请参阅[android powermanager](http://developer.android.com/reference/android/os/PowerManager.html)）。在 phonegap 中，您需要使用插件来实现这一点。从好的方面来说，有一个[现有的 phonegap 插件](https://github.com/phonegap/phonegap-plugins/tree/master/Android/PowerManagement)可以做到这一点。缺点是为了使用自定义插件，您将无法使用方便的[phonegap 构建](https://build.phonegap.com/)方法来构建您的应用程序，因此需要通过 Eclipse IDE 进行手动过程，但这不是很麻烦设置（见[这里](http://www.adobe.com/devnet/html5/articles/getting-started-with-phonegap-in-eclipse-for-android.html)）。

就您的应用程序由于 android 内存不足而关闭，并且还让它在廉价、低规格的设备上响应执行而言，只要您小心以最佳方式编写您的 javascript 代码，这将不是问题. 我已经使用 phonegap 实现了一个位置跟踪应用程序，该应用程序使用自定义地图，并在包括 HTC Desire 和 HTC Wildfire 在内的旧安卓设备上进行测试，性能是可以接受的并且部分唤醒锁工作 - 我没有因为缺少而关闭应用程序的问题记忆。

我之所以选择 phonegap 而不是 native，是因为我是一名 Web 开发人员，所以 Javascript 对我来说比从头开始使用 Java 和 android SDK 更方便，还因为我能够使用相同的 JS 代码库和适当的插件来生成适用于 iOS 的相同应用程序。Phonegap 能够访问设备上的 GPS 硬件，在外部测试中，我发现平均精度在 4 到 8 米之间，具体取决于设备。希望这可以帮助！

# php - 动态输入字段的自动建议

> ID：14358051
> 
> 赞同：0
> 
> 时间：2013-01-16T12:04:28.187
> 
> 标签：php, javascript, ajax

如果有人可以帮助我处理此代码，我将不胜感激。我有通过单击链接动态创建的输入字段。自动建议仅适用于第一个 - 静态输入字段，但我无法使其适用于动态输入字段。

这是 HTML 代码：

```
<tr>
  <td><label for="addassureed">Additional Assured</label></td>
 <td>
  <div class="wrapSearch">
  <div>
 <input type="text" name="addassured[]" class="input1" id="addassured" size="45" maxlength="1000" onkeyup="autoSuggest(this.id, 'listWrap2', 'searchList2', 'addassured', event);" onKeyDown="keyBoardNav(event, this.id);" />
 <a href="#" onClick="addInput('dynamicInput');" /><img src="../../img/add.png" height="16" width="16" /></a>
      </div>
      <div class="listWrap" id="listWrap2">
      <ul class="searchList" id="searchList2">
       </ul>
       </div>
       </div>
</td> 
```

用于创建输入字段的代码：

```
var counterAssured = 1;
var limit = 10;
function addInput(divName){ 
 if (counterAssured == limit)  {
      alert("You have reached the limit of adding " + counterAssured + " inputs");
 } else {
      var newdiv = document.createElement('div');
      newdiv.innerHTML = " <td><label>Additional Assured " + (counterAssured + 1) + "</label></td><td><input type='text' name='addassured["+counterAssured+"]' class='input1'></td>";
      document.getElementById(divName).appendChild(newdiv);
      counterAssured++;
}
} 
```

以及用于查询数据库的 php 代码：autosuggest.php

```
$dbhost = 'localhost';  // Database Host
$dbuser = '';       // Database Username
$dbpass = '';           // Database Password
$dbname = '';      // Database Name

$limit = 20;
if (!isset($_POST['itemCode']))
exit;
$input = trim($_POST['itemCode']);

$conn = mysql_connect($dbhost, $dbuser, $dbpass) or die(mysql_error());
mysql_select_db($dbname);

$sql = "SELECT company_name FROM contacts WHERE company_name LIKE  '".$input."%' LIMIT $limit";

$result = mysql_query($sql);
if (!$result || !mysql_num_rows($result))
 exit;
 include_once "headers.php";
 echo "<response>";
 while ($row = mysql_fetch_array($result))
 {
$keywords = $row['company_name'];
 echo "<keywords>". $keywords ."</keywords>";       
 }
echo "</response>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:07:37.777

您在动态创建的字段中错过了这两个事件 [onkeyup&onKeyDown]

试试这个，

```
newdiv.innerHTML = ' <td><label>Additional Assured ' + (counterAssured + 1) + '</label></td><td><input type="text" name="addassured['+counterAssured+']" class="input1" onkeyup="autoSuggest(this.id, \'listWrap2\', \'searchList2\', \'addassured\', event);" onKeyDown="keyBoardNav(event, this.id);"></td>'; 
```

或使用备用引号语法：

```
newdiv.innerHTML = " <td><label>Additional Assured " + (counterAssured + 1) + "</label></td><td><input type=\"text\" name=\"addassured["+counterAssured+"]\" class=\"input1\" onkeyup=\"autoSuggest(this.id, 'listWrap2', 'searchList2', 'addassured', event);\" onKeyDown=\"keyBoardNav(event, this.id);\"></td>"; 
```

# php - 如何清除 Smarty 错误或启用调试

> ID：14358059
> 
> 赞同：0
> 
> 时间：2013-01-16T12:04:49.280
> 
> 标签：php, debugging, error-handling, smarty

当我在 Smarty 中遇到问题时，我会收到一条肮脏的错误消息。

如何启用调试模式或如何获得明确的错误消息？

这是一个示例错误：

```
Fatal error: Uncaught exception 'SmartyException' with message 'Unable to load template file 'list.tpl'' in
H:\Server\FrameWork\smarty\libs\sysplugins\smarty_internal_templatebase.php:127 
Stack trace: #0 H:\Server\FrameWork\smarty\libs\sysplugins\smarty_internal_templatebase.php(374):
Smarty_Internal_TemplateBase->fetch('news/li...', NULL, NULL, NULL, true) #1 
H:\Server\news\list.php(157): Smarty_Internal_TemplateBase->display('news/li...') #2 
H:\Server\news\news.php(24): include('H:\Serve...') #3 H:\Server\sec.php(13): 
include('H:\Serve...') #4 {main} thrown in 
H:\Server\FrameWork\smarty\libs\sysplugins\smarty_internal_templatebase.php on line 127 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:28:09.580

这是一个“回溯”或“堆栈跟踪”——它向您显示程序中发生错误的确切点，并追溯到代码的最外层。

最有用的发现是：

1.  第一行是一条非常合理的错误消息：'无法加载模板文件'list.tpl''
2.  在提到 Smarty 内部部件的行之后，您可以看到`H:\Server\news\list.php(157)`. 因此，在文件的第 157 行`H:\Server\news\list.php`，您要求 Smarty 呈现模板，这就是错误的来源。

因此，在这种情况下，您有一行 PHP 代码要求 Smarty 呈现一个不存在的模板。很难想象还能提供更多信息。

# ruby-on-rails - 奇怪的 ActiveRecord 模型行为

> ID：14358060
> 
> 赞同：0
> 
> 时间：2013-01-16T12:04:50.410
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-activerecord

我有模特

```
class Owner < ActiveRecord::Base
  attr_accessible :telephone
  validates_uniqueness_of :telephone
  validates_telephone_number_of :telephone
  before_validation :telephone_normalize
end 
```

在导轨控制台中

```
a = Owner.new(:telephone => '949123456')
=> #<Owner id: nil, telephone: "949123456", created_at: nil, updated_at: nil> 
1.9.3-p362 :002 > a.valid?
Owner Exists (0.1ms)  SELECT 1 AS one FROM "owners" WHERE "owners"."telephone" = '+421949123456' LIMIT 1
=> false
1.9.3-p362 :003 > a
=> #<Owner id: nil, telephone: "421949123456", created_at: nil, updated_at: nil> 
```

同样，当我保存唯一号码时：

```
1.9.3-p362 :006 > a.telephone = '949123457'
=> "949123457" 
1.9.3-p362 :007 > a.save
(0.1ms)  begin transaction
Owner Exists (0.2ms)  SELECT 1 AS one FROM "owners" WHERE "owners"."telephone" = '+421949123457' LIMIT 1
SQL (2.3ms)  INSERT INTO "owners" ("created_at", "telephone", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 16 Jan 2013 11:55:44 UTC +00:00], ["telephone", "421949123457"], ["updated_at", Wed, 16 Jan 2013 11:55:44 UTC +00:00]]
(88.3ms)  commit transaction
=> true 
```

Rails (3.2.11) 省略了数字开头的“+”。数字类型是字符串。它也保存它而不带加号（如果它是唯一的），但是在验证时，它用加号调用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:08:47.993

它认为数据库中的**电话**列是**整数**类型。所以你传递的字符串超出了它的范围。这就是你面临这个问题的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:43:22.997

不幸的是，我的`validates_telephone_number_of`验证器中有错误。它修改了属性：-/

说

```
> a = 'aaa' # => 'aaa'
> b = a.to_s # => 'aaa'
> b << 'c' # => 'aaac'
> b  # => 'aaac'
> a  # => 'aaac' 
```

需要使用`b = a.to_s.dup`。

# android - 在tabhost中添加android片段

> ID：14358064
> 
> 赞同：1
> 
> 时间：2013-01-16T12:05:15.207
> 
> 标签：android, fragment

我有一个承载 4 个片段的视图寻呼机：这是 viewPagerActivity 的 xml

```
<TabHost
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:orientation="horizontal" />

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="0dp"
                android:layout_height="0dp" />

            <android.support.v4.view.ViewPager
                android:id="@+id/tabviewpager"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="16dp"
                android:layout_marginLeft="16dp"
                android:layout_marginRight="16dp"
                android:layout_marginTop="16dp" >

            </android.support.v4.view.ViewPager>
    </LinearLayout>

</TabHost> 
```

现在在其中一个片段中，我有一个 Listview。在其 onListItemClick 函数中，我编写了上面的代码，以便每次单击列表上的项目时，都会出现一个片段，提供一些额外的信息。我已经完成了演示（我只有一个 LinearLayout，我会在那里添加它）。但我不能在我的应用程序中这样做。

```
 public void onListItemClick(ListView l, View v, int position, long id) {

    int MARGIN = 16;

    ft = getActivity().getSupportFragmentManager().beginTransaction();

    RightFragment rightFragment =  new RightFragment(getResources().getColor(
            R.color.honeycombish_blue), 2f, MARGIN / 2, MARGIN, MARGIN,
            MARGIN);

    ft.add(R.id.,rightFragment );

    ft.commit();

} 
```

那是我的片段类：

```
public class RightFragment extends SherlockFragment {

private View mView;
private int mColour;
private float mWeight;
private int marginLeft, marginRight, marginTop, marginBottom;

// need a public empty constructor for framework to instantiate
public RightFragment() {

}

public RightFragment(int colour, float weight, int margin_left,
        int margin_right, int margin_top, int margin_bottom) {
    mColour = colour;
    mWeight = weight;
    marginLeft = margin_left;
    marginRight = margin_right;
    marginTop = margin_top;
    marginBottom = margin_bottom;

}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mView = new View(getActivity());

    GradientDrawable background = (GradientDrawable) getResources()
            .getDrawable(R.drawable.rounded_rect);
    background.setColor(mColour);

    mView.setBackgroundDrawable(background);
    LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(0,
            LayoutParams.FILL_PARENT, mWeight);
    lp.setMargins(marginLeft, marginTop, marginRight, marginBottom);
    mView.setLayoutParams(lp);

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    System.out.println("'");
  mView =  inflater.inflate(R.layout.myfrg, container, false);

  GradientDrawable background = (GradientDrawable) getResources()
          .getDrawable(R.drawable.rounded_rect);
  background.setColor(mColour);

  mView.setBackgroundDrawable(background);
  LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(0,
          LayoutParams.FILL_PARENT, mWeight);
  lp.setMargins(marginLeft, marginTop, marginRight, marginBottom);
  mView.setLayoutParams(lp);

  return mView;
}

} 
```

！我应该使用哪个布局作为我的新片段的根。希望图片有帮助[1](http://i.stack.imgur.com/DuORc.png)

# asp.net - ASP.NET mvc 多路由

> ID：14358066
> 
> 赞同：0
> 
> 时间：2013-01-16T12:05:19.983
> 
> 标签：asp.net, asp.net-mvc-4, routes, asp.net-web-api-routing

我用谷歌搜索了很多具有相同问题的页面，但我无法解决我的问题。所以我在控制器中有这个

```
public IEnumerable<questions> Get()
    {
        return (UOW.Questions.GetAll());
    }

    // GET api/questions/5
    public questions Get(int id)
    {
        return (UOW.Questions.GetById(id));
    }

    ////Basic Questions :: api/questions/basic
    [ActionName("basic")]
    public IEnumerable<questions> GetBasicQuestions()
    {
        return (UOW.Questions.GetBasicQuestions());
    }

    [ActionName("basic")]
    public questions GetBasicQuestionsById(int id)
    {
        return (UOW.Questions.GetBasicQuestions(id));
    } 
```

这在 WEBApiConfig 中：

```
public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute(
            name: "DefaultController",
            routeTemplate: "api/{controller}"
        );

        config.Routes.MapHttpRoute(
            name: "DefaultControllerId",
            routeTemplate: "api/{controller}/{id}",
            defaults: null,
            constraints: new { id = @"^\d+$" }
        );

        config.Routes.MapHttpRoute(
            name: "DefaultAction",
            routeTemplate: "api/{controller}/{action}"
        );

        config.Routes.MapHttpRoute(
            name: "DefaultActionId",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { action = RouteParameter.Optional }
        );
    } 
```

当我输入 localhost/api/questions 和 localhost/api/questions/1 时，我不明白

给我多个路线错误...

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:54:17.343

将您的路由更改如下：

```
config.Routes.MapHttpRoute(
    name: "DefaultController",
    routeTemplate: "api/{controller}",
    defaults: new { action = "GET" }
);

config.Routes.MapHttpRoute(
    name: "DefaultControllerId",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { action = "GET" },
    constraints: new { id = @"^\d+$" }
);

config.Routes.MapHttpRoute(
    name: "DefaultAction",
    routeTemplate: "api/{controller}/{action}"
);

config.Routes.MapHttpRoute(
    name: "DefaultActionId",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

# joomla - 传值 joomla

> ID：14358073
> 
> 赞同：0
> 
> 时间：2013-01-16T12:05:32.133
> 
> 标签：joomla, joomla2.5

我有这个选择框，我想传递选择的值

我认为这是

```
<form id="search-restaurant"  method="post" action="<?php echo JURI::root()?>index.php/hardware/buscarCategoria">
<?php 
echo JHTML::_('select.genericlist', $options ,'myfilter','onChange="this.form.submit()"','value','text');     
?>
</form> 
```

我采用这样选择的值

```
$input=JFactory::getApplication()->input;
$value=$input->get('myfilter'); 
```

值是正确的，但我做了一个 print_r 或 echo of value

```
 print_r($value); 
```

我获得`0combo`或`1combo` 为什么组合有效，没关系？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:32:46.930

你在寻找这样的东西。

[http://docs.joomla.org/API16:JHtmlSelect/options](http://docs.joomla.org/API16:JHtmlSelect/options)

您可以传递具有适当值的 $selected 参数，它将为您设置默认列表选项。

# string - 读取特定的 txt 文件并将其重新排列为给定的格式

> ID：14358075
> 
> 赞同：0
> 
> 时间：2013-01-16T12:05:38.983
> 
> 标签：string

下面是化学分析仪器的输出。我需要重新排列格式并以每个元素的百分比数字低于其名称的方式对其进行排序。我的问题是如何逐字阅读这个文件？我该如何选择，例如第 12 个单词？

txt文件格式：

Header_1 日期时间 Method_Name (Filter_Name) Calc_Mode Heat No. Quality Anal。代码 样品 ID C Si Mn PS Cr Mo Ni Al Co Cu Nb Ti VW Pb Sn As Bi Ca Sb Se B Zn N Fe 位置代码 工作相

# Single 13.01.13 09:51:10 Fe-10 Test AutoResult 12A 00001.040 00000.437 00000.292 00000.023 00000.007 00001.505 00000.263 00000.081 00000.012 00000.014 00000.110 00000.155 00000.040 00000.098 00000.015 00000.014 00000.013 00000.012 00000.002 00000.001 00000.016 00000.014 00000.005 00000.001 00000.016 00095.813

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:26:51.023

要找到第 12 个单词，逐个字符地阅读该行，直到您看到 11 个用于分隔单词的实例（您没有指定）；接下来，直到下一个这样的分隔符，将是第 12 个单词。

# c# - C# 中的 3D 开发

> ID：14358080
> 
> 赞同：2
> 
> 时间：2013-01-16T12:05:52.260
> 
> 标签：c#, frameworks, 3d

我想重温我在 1990 年代后期所做的一些 3D 工作（使用 VRML97-Java），最终，我想为即将推出的[LEAP Motion](http://www.leapmotion.com)控制器开发应用程序，因此我想拥有一种环境构建技术，其中玩。

任何人都可以推荐一个易于使用、*高级*（我强调**不是**数学家）的 C# 或 Java 框架，我可以用它来做这件事吗？到目前为止，谷歌搜索和阅读 SO 让我找到了 Unity3D、MS XNA、SDL.NET 和 AutoCAD，但我不确定哪个最适合 RAD 和原型设计。当然，如果现代 VRML/X3d 技术可用，我可能更愿意使用它，但看起来[两者都已死](https://stackoverflow.com/questions/3668821/whatever-happened-to-vrml/3671313#3671313)。

任何指点将不胜感激。

# ios - AudioOutputUnitStart 替换 Music 应用

> ID：14358082
> 
> 赞同：0
> 
> 时间：2013-01-16T12:05:58.780
> 
> 标签：ios, audio, remoteio

我的应用程序（VoIP 一）正在使用`kAudioSessionCategory_PlayAndRecord`类别。一切正常，期待调用`AudioOutputUnitStart`音乐应用程序时被我的应用程序替换。

基本上，如果我双击主页按钮并翻转到音乐应用程序，我看不到默认音乐应用程序，而是可以在音乐控件附近看到我的应用程序日志。

有谁知道可以是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T11:50:28.133

检查你是否在某处调用它

```
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
[self becomeFirstResponder]; 
```

这可能会导致您的应用出现在音乐控制栏中

# c# - .NET 在其他线程的主线程（UI）中执行函数

> ID：14358092
> 
> 赞同：2
> 
> 时间：2013-01-16T12:06:23.037
> 
> 标签：c#, wpf, dispatcher

我的应用程序从主（UI）线程以外的线程中的硬件设备接收一些命令。

```
// start receiver-thread
m_recThread = new Thread(RecThread) { Name = "RS" }; 
```

从这个线程我想对 UI Theraad 做一些操作。说一键点击！！！我在用

```
Dispatcher.CurrentDispatcher.Invoke(DispatcherPriority.Normal, 
  new Action<Vote>(StartThisVote), presidentvote); 
```

但这没有用。请让我知道谁可以从这个后台线程执行主线程（UI）中的命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:10:16.757

在后台线程中，[`CurrentDispatcher`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.currentdispatcher.aspx)将为空。您需要使用与要修改的 UI 关联的调度程序。如果您无法从线程代码访问控件本身，则可以在启动线程时直接传递调度程序。（假设您在启动辅助线程时位于 UI 线程上。）

如评论中所述，假设您只有一个调度程序（很可能），您可以`Application.Current.Dispatcher`在任何地方使用它来访问它。（通过这种静态方法更难测试，但很容易编码......）

或者，如果您使用的是 C# 5 和 .NET 4.5，我建议您研究异步方法，这会使事情变得更简单。

# backbone.js - 如何组织 html 以分 3 部分呈现页面？

> ID：14358093
> 
> 赞同：0
> 
> 时间：2013-01-16T12:06:25.737
> 
> 标签：backbone.js

我想通过渲染来渲染我的页面

1.  标题
2.  身体

问题是，当我渲染这两个部分时，主体没有被包裹到`.content`div 中，这里有一些代码：

```
<html>
<head></head>
<body>
  <div id="content">

      <script type="text/template" id="header-template">
        <div>navbar</div>
      </script>
      <div id='header-container'></div>

      <script type="text/template" id="body-template">
        <p>Welcome !</p> <!-- Is not wraped inte the #content div -->
      </script>

    </div>
</body>
</html> 
```

使用backone，我只是这样做：

```
hearder.render();
body.render(); 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:51:20.497

您的 HTML 完全被破坏：您的模板有一个 unclosed `<div>`，但`</div>`页面上有一个不匹配的关闭标记。看起来您正在尝试某种`document.write`样式模板，其中第一个模板打开一个标签，而后一个模板将其关闭。我不会推荐它。查看[Backbone.View 文档](http://backbonejs.org/#View)，了解如何将视图呈现到某个元素。

基本上你应该在 DOM 中有容器元素：

```
<div id="header-container"></div>
<div id="content"></div>
<div id="footer-container"></div> 
```

然后将视图渲染**到**该元素中：

```
body.render({el:"#content"}); 
```

或者：

```
body.render();
$("#content").html(body.el); 
```

我敢打赌，如果你解决了这些问题，它可能会更好一些。

# asp.net - 连接到报表服务器的尝试失败 - 在 ASP.NET 中设置 URL 和路径？

> ID：14358098
> 
> 赞同：4
> 
> 时间：2013-01-16T12:06:44.283
> 
> 标签：asp.net, reporting-services, reportviewer, report-viewer2010

我正在尝试`Report`使用 ASP.NET Web 应用程序连接到（rdlc 文件）。我正在使用 VS2010 并且`Report Server`是 2008 版。

我有以下工作正常的报告 URL：

```
http://server url/Products/_layouts/ReportServer/RSViewerPage.aspx?rv:RelativeReportUrl=/Products/Dashboards/Product_tool.rdl&Source=Server Url/Products/Dashboards/Forms/AllItems.aspx&DefaultItemOpen=1 
```

当我在浏览器中输入该 URL 时，它首先要求输入用户名密码。当我登录然后`Report`显示就好了。

现在我需要在`Report Viewer`. 所以我在我的页面上添加了一个`Report Viewer`控件。`aspx`我为它配置了 URls，如下所示：

`Report Server:** http://server url/Products/_layouts/ReportServer`

`Report Path:** /Products/Dashboards/Product_tool.rdl`

我不确定这是否正确..？

无论如何，在我的`PageLoad`我有以下代码行：

```
eportViewer1.ServerReport.ReportServerCredentials = new ReportCredentials("myuser", "mypass"); 
```

该`ReposrtCredentials`课程取自：[http](http://social.msdn.microsoft.com/Forums/en-US/vsreportcontrols/thread/c65abca7-0fdb-40fb-aabe-718f63377a55/) ://social.msdn.microsoft.com/Forums/en-US/vsreportcontrols/thread/c65abca7-0fdb-40fb-aabe-718f63377a55/ （来自Phil）

现在，当我运行我的 Web 应用程序时，我收到以下错误：

> 连接到报表服务器的尝试失败。检查您的连接信息以及报表服务器是否为兼容版本。

现在我不确定我提供给的 URL`Report Viewer`是否正确？或者还有什么问题。

任何人有任何想法..？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T13:53:13.477

为了将 SSRS 报告集成到 ASP.NET 应用程序中，请执行以下步骤。

首先，实现 IReportServerConnection2 接口。我做了这样的事情：

```
 public sealed class CustomReportServerConnection : IReportServerConnection2
    {
        public WindowsIdentity ImpersonationUser
        {
            get
            {
                // Use the default Windows user.  Credentials will be
                // provided by the NetworkCredentials property.
                return null;
            }
        }
        public ICredentials NetworkCredentials
        {
            get
            {
                // Read the user information from the web.config file.  
                // By reading the information on demand instead of 
                // storing it, the credentials will not be stored in 
                // session, reducing the vulnerable surface area to the
                // web.config file, which can be secured with an ACL.

                // User name
                string userName = ConfigurationManager.AppSettings[Utility.Constants.AppConst.REPORT_USER].ToString(); 

                if (string.IsNullOrEmpty(userName))
                    throw new Exception(Utility.Constants.AppConst.MESSAGE_MISSING_USER_NAME);

                // Password
                string password = ConfigurationManager.AppSettings[Utility.Constants.AppConst.REPORT_PASSWORD].ToString();

                if (string.IsNullOrEmpty(password))
                    throw new Exception(Utility.Constants.AppConst.MESSAGE_MISSING_PWD);

                // Domain
                string domain = ConfigurationManager.AppSettings[Utility.Constants.AppConst.REPORTS_DOMAIN].ToString();

                if (string.IsNullOrEmpty(domain))
                    throw new Exception(Utility.Constants.AppConst.MESSAGE_MISSING_DOMAIN);

                return new NetworkCredential(userName, password, domain);
            }
        }
        public bool GetFormsCredentials(out Cookie authCookie, out string userName, out string password, out string authority)
        {
            authCookie = null;
            userName = null;
            password = null;
            authority = null;
            // Not using form credentials
            return false;
        }
        public Uri ReportServerUrl
        {
            get
            {
                string url = ConfigurationManager.AppSettings[Utility.Constants.AppConst.REPORT_SERVER_URL].ToString();

                if (string.IsNullOrEmpty(url))
                    throw new Exception(Utility.Constants.AppConst.MESSAGE_MISSING_URL);

                return new Uri(url);
            }
        }
        public int Timeout
        {
            get
            {
                return int.Parse(ConfigurationManager.AppSettings[Utility.Constants.AppConst.REPORT_SERVER_TIME_OUT].ToString());
                // return 60000; // 60 seconds
            }
        }
        public IEnumerable<Cookie> Cookies
        {
            get
            {
                // No custom cookies
                return null;
            }
        }
        public IEnumerable<string> Headers
        {
            get
            {
                // No custom headers
                return null;
            }
        }
    } 
```

现在在您的 Configuration AppSettings 中放置以下键（或从任何您想要的地方提供这些值）：

```
 <add key="ReportServerUrl" value="http://sqlServerURL/ReportServer_SQL2008R2"/>

    <!--Development TargetReportFolder-->
    <add key="TargetReportFolder" value="/AppReporting/"/>
    <add key="ReportServerTimeOut" value="600000"/>
    <add key="ReportViewerServerConnection" value="FullyQualified Name of ur CustomReportServerConnection,ProjectName"/>
    <add key="ReportsUser" value="ReportUser"/>
    <add key="ReportsPassword" value="reportPassword"/>
    <add key="ReportsDomain" value="myDomain"/> 
```

现在，在您的 .aspx 页面中，拖动一个 reportViewer，如下所示：

```
<rsweb:ReportViewer ID="RptViewer" runat="server" AsyncRendering="False" SizeToReportContent="true"
            ProcessingMode="Remote" Width="100%" BackColor="#F7F8F9" OnReportError="RptViewer_ReportError"
            OnReportRefresh="RptViewer_ReportRefresh1" Height="">
        </rsweb:ReportViewer> 
```

并在 codeBehind 中配置您的 ReportViewer..`ReportParameter`正确放置。

它给你一个想法......

关键是，您需要正确进行身份验证，因此编写自定义 ReportServerConnection

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:25:25.303

配置报表查看器时，请检查**您使用的帐户是否具有查看报表的权限，**因为在使用服务器报表时需要您具有访问权限。也看看这个链接。他们会有所帮助：[http ://forums.asp.net/t/1562624.aspx/1](http://forums.asp.net/t/1562624.aspx/1)

# java - c3p0 "getConnection" is slow

> ID：14358106
> 
> 赞同：0
> 
> 时间：2013-01-16T12:07:05.873
> 
> 标签：java, applet, c3p0

I'm using c3p0 connection pool for communication between my (unsigned) Java applet and MySql db. I have this code for initializing pool:

```
DataSource pool = pools.get(db_name);
if(pool == null) 
    pool = initializePool(db_name);
return pool.getConnection(); 
```

Initialize pool method looks like this:

```
protected DataSource initializePool(String db_name) throws SQLException {
    try {
        ComboPooledDataSource cpds = new ComboPooledDataSource();
        cpds.setDriverClass("com.mysql.jdbc.Driver");
        cpds.setJdbcUrl(connectionDetails.getConnectionString(db_name));
        cpds.setUser(connectionDetails.getUsername()); 
        cpds.setPassword(connectionDetails.getPassword());
        pools.put(db_name, cpds);
        return cpds;
    } catch (PropertyVetoException e) {
        e.printStackTrace();
        throw new SQLException("JDBC driver could not be initialized propertly");   
    }
} 
```

My c3p0-config.xml is simple:

```
<c3p0-config><default-config>
<property name="acquireIncrement">1</property>
<property name="initialPoolSize">5</property>
<property name="minPoolSize">1</property>
<property name="maxPoolSize">7</property>
<property name="maxConnectionAge">0</property>
<property name="maxIdleTime">600</property>
<property name="maxIdleTimeExcessConnections">120</property> 
<property name="automaticTestTable">C3p0_test_table</property>
<property name="idleConnectionTestPeriod">60</property>
<property name="testConnectionOnCheckin">true</property></default-config></c3p0-config> 
```

The problem is that "getConnection" call takes sometimes even 10 or more seconds to respond when i call a database for the first time (second time i contact a db it's faster). I've been looking all over the net and "c3p0" manual for way to speedup connection pool without luck.

When i run my applet (from server) java console output looks like this:

```
Jan 16, 2013 12:57:14 PM com.mchange.v2.log.MLog <clinit>
INFO: MLog clients using java 1.4+ standard logging.
Jan 16, 2013 12:57:16 PM com.mchange.v2.c3p0.C3P0Registry <clinit>
INFO: jdk1.5 management interfaces unavailable... JMX support disabled.
java.security.AccessControlException: access denied ("javax.management.MBeanServerPermission" "createMBeanServer")
    at java.security.AccessControlContext.checkPermission(Unknown Source)
    at java.security.AccessController.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPermission(Unknown Source)
    at java.lang.management.ManagementFactory.getPlatformMBeanServer(Unknown Source)
    at com.mchange.v2.c3p0.management.ActiveManagementCoordinator.<init>(ActiveManagementCoordinator.java:42)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at com.mchange.v2.c3p0.C3P0Registry.<clinit>(C3P0Registry.java:134)
    at com.mchange.v2.c3p0.impl.PoolBackedDataSourceBase.<init>(PoolBackedDataSourceBase.java:228)
    at com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource.<init>(AbstractPoolBackedDataSource.java:62)
    at com.mchange.v2.c3p0.ComboPooledDataSource.<init>(ComboPooledDataSource.java:109)
    at com.mchange.v2.c3p0.ComboPooledDataSource.<init>(ComboPooledDataSource.java:105)
    ...

Jan 16, 2013 12:57:16 PM com.mchange.v2.c3p0.C3P0Registry banner
INFO: Initializing c3p0-0.9.1.2 [built 21-May-2007 15:05:05; debug? true; trace: 10]
Jan 16, 2013 12:57:16 PM com.mchange.v2.c3p0.PoolConfig <clinit>
WARNING: Read of system Properties blocked -- ignoring any c3p0 configuration via System properties! (But any configuration via a c3p0.properties file is still okay!)
java.security.AccessControlException: access denied ("java.util.PropertyPermission" "*" "read,write")
    at java.security.AccessControlContext.checkPermission(Unknown Source)
    at java.security.AccessController.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPropertiesAccess(Unknown Source)
    at java.lang.System.getProperties(Unknown Source)
    at com.mchange.v2.c3p0.PoolConfig.<clinit>(PoolConfig.java:101)
    at com.mchange.v2.c3p0.impl.C3P0ImplUtils.defaultConnectionTester(C3P0ImplUtils.java:283)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.<init>(WrapperConnectionPoolDataSource.java:47)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.<init>(WrapperConnectionPoolDataSource.java:67)
    at com.mchange.v2.c3p0.ComboPooledDataSource.<init>(ComboPooledDataSource.java:114)
    at com.mchange.v2.c3p0.ComboPooledDataSource.<init>(ComboPooledDataSource.java:105)
    ...

started taking connection - Wed Jan 16 12:57:16 CET 2013
Jan 16, 2013 12:57:20 PM com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource getPoolManager
INFO: Initializing c3p0 pool... com.mchange.v2.c3p0.ComboPooledDataSource [ some connection info and params for DB1]
Connection taken - Wed Jan 16 12:57:23 CET 2013
started taking connection - Wed Jan 16 12:57:23 CET 2013
Jan 16, 2013 12:57:24 PM com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource getPoolManager
INFO: Initializing c3p0 pool... com.mchange.v2.c3p0.ComboPooledDataSource [ some connection info and params for DB2]
Connection taken - Wed Jan 16 12:57:24 CET 2013 
```

What am i missing? Is there a way to speed up process of getting connection? I thought that it might be a server issue, but i'm having those lags even when i run my applet from eclipse (and make it contact remote database at server). Please help, or at least explain me why getting connection is so slow?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T00:01:42.717

很可能是 testConnectionOnCheckin=true 杀死了你。由于 c3p0 将这项工作卸载到后台线程 - 这些操作似乎已备份，并且连接不会立即可用于重用。

# iphone - How does the iphone camera display graphics?

> ID：14358112
> 
> 赞同：0
> 
> 时间：2013-01-16T12:07:16.890
> 
> 标签：iphone, ios, ipad, camera

I was curious to know how the iphone/ipad/ipod camera show the display screen i.e. once we open up the camera app, how does the app show up the graphics on the display ? How does it paint the content on the display layer/surface? Does it use the GPU for that ?

Any Links on the same would be very useful.

Thanks.

# php - How to subscribe for multiple items with paypal?

> ID：14358118
> 
> 赞同：2
> 
> 时间：2013-01-16T12:07:31.333
> 
> 标签：php, paypal, paypal-sandbox, paypal-subscriptions

I have series of subscription plans, among which user can select anyone and make payments via paypal but apart from that, there is one extra facility one may want to avail with any of the package .i.e. that is home delivery.

I have taken help from this site : [LINK](http://www.paypalobjects.com/en_US/ebook/subscriptions/html.html#1033038)

But there is no option for adding 2nd item that can be selected as checkbox with any of the plan. I tried this code

```
<input type="hidden" name="item_name_1" value="Item Name 1">
<input type="hidden" name="amount_1" value="1.00">
<input type="hidden" name="item_name_2" value="Item Name 2">
<input type="hidden" name="amount_2" value="2.00"> 
```

But using this code, I now can't even see the original "plan" name which was displayed before on paypal site.

Am I missing something?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:28:28.537

您可以使用 on1 变量添加第二个下拉选项。

```
 <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<table>
<tr><td><input type="hidden" name="on0" value="Product Test">Product Test</td></tr><tr><td><select name="os0">
    <option value="Monthly">Monthly : $1.00 USD - monthly</option>
    <option value="Yearly">Yearly : $2.00 USD - monthly</option>
    <option value="5 - Year">5 - Year : $3.00 USD - monthly</option>
</select> </td></tr>
<tr><td><input type="hidden" name="on1" value="Colors">Colors</td></tr><tr><td><select name="os1">
    <option value="Red">Red </option>
    <option value="Blue">Blue </option>
    <option value="Black">Black </option>
</select> </td></tr>
</table>
<input type="hidden" name="currency_code" value="USD">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_subscribeCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

# bing-api - Draw roadmap for a vehicle positioning

> ID：14358120
> 
> 赞同：0
> 
> 时间：2013-01-16T12:07:34.750
> 
> 标签：bing-api, bing-maps

We have a vehicle tracker service which basically returns the vehicle position (latitude and langitude) at every minute. I need to draw the vehicle position on the road map as soon as service retuns it. I'm exploring the bing-map features but not able to find out any solution yet.

Just to clear the requirements, I know the feature where we can design the map with single latitude/langitude point. But with realtime, my requirement is to show multiple positions of the vehicle on the map. Can you please help me on this ASAP.

Thanks & Regards, Amit

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:51:31.623

为了基于 Bing 地图创建静态图像，您可以使用 REST 或 SOAP 中的专用图像服务：

*   对于 SOAP：http: [//msdn.microsoft.com/en-us/library/cc981090.aspx](http://msdn.microsoft.com/en-us/library/cc981090.aspx)
*   对于 REST：http: [//msdn.microsoft.com/en-us/library/ff701724.aspx](http://msdn.microsoft.com/en-us/library/ff701724.aspx)

您应该能够为车辆的多个位置生成道路样式的地图。

# java - 如何使用 Struts2 在服务器启动时运行操作？

> ID：14358123
> 
> 赞同：6
> 
> 时间：2013-01-16T12:07:46.440
> 
> 标签：java, tomcat, struts2, action, startup

我必须在服务器启动时而不是在第一个请求时执行 struts2 操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T16:24:23.980

在应用程序启动时加载数据是一项常见任务，您可以在网上找到几个示例。正如在其他答案中所说，您应该实现一个 ServletContextListener （不是 Struts2 特定的）...您可以[**在此处阅读一个很好的示例**](http://www.mkyong.com/servlet/what-is-listener-servletcontextlistener-example/)。

这里重要的是理解 Action 概念：

在`Struts2 MVC`（模型视图控制器）框架中，an`Action`是`Controller`（和一部分`Model`）。

`Action``Request`s 由来自s的 s 调用`Client`（并且每个请求都会创建一个 Action，因此它们是线程安全的）。

这意味着您需要一个客户端，这*通常*意味着一个人在电脑前，点击浏览器......然后，客户端调用不是对共享对象执行自动服务器端操作的正确触发器。

当然，您可以实现某种形式`lazy-initialitazion`（例如，在自定义拦截器的帮助下），以便第一个用户在 Application 范围内设置一些东西，而其他用户将检索已经填充的对象，但这不是最好的方法（您应该在初始化时处理并发，并且您将有一个用户，第一个，等待服务器本可以在启动时在夜间完成的操作......）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T12:15:04.697

编写一个 ServletContextListener，每个 Web 应用程序只有一个可用，并且在部署应用程序时将被实例化。

这是[帖子](http://www.javabeat.net/2009/02/servletcontextlistener-example/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T12:28:10.987

在 servlet 和 jsp 中启动时加载如下所示

您可以要求在服务器启动时加载页面。这是通过`web.xml`文件完成的

```
<servlet>
<servlet-name>login</servlet-name>
<jsp-file>/login.jsp</jsp-file>
<load-on-startup>1</load-on-startup>
</servlet> 
```

通常 jsp 文件在第一次命中时编译。现在代码说预编译一个jsp文件而不等待第一次命中。

```
For struts2 you can change programatically in web.xml 

<listener>
    <listener-class>your listener class</listener-class>
</listener> 
```

参考这个链接它可能对你有帮助

[加载启动](http://yoprogrammer.wordpress.com/2012/07/26/struts2-programmatically-change-devmode-configuration/)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T15:36:02.443

如果您想在您的*Web 应用程序*（又名*Servlet Context*）第一次启动时运行一些代码，那么您应该利用该技术提供的挂钩。Servlet API 为您提供了生命周期钩子，用于在 Web 应用程序的各个生命周期阶段触发代码。由于所有 Struts 2 应用程序都是*Servlet API* Web 应用程序，因此您可以自己利用它。

[ServletContextListener](http://tomcat.apache.org/tomcat-7.0-doc/servletapi/index.html)接口提供了一个 init hook 方法。您只需实现此接口并在 web.xml 中注册您的实现。

请注意，如果您需要做的是更多特定于 Struts 2 的操作，那么您可以考虑使用 Struts 2 API 本身中的某些内容。

# c# - Image name generation

> ID：14358124
> 
> 赞同：1
> 
> 时间：2013-01-16T12:07:54.137
> 
> 标签：c#, windows-phone

I am working on a window phone application where I am capturing `image` from the primary camera and want to generate the image name based on different parameter like `date ,time` etc. For that I am defining a method:

```
private string fnGenerate()
        {
            string fileName = "";

            // Logic to be put later.
            fileName = "testImage5.jpg";
            return fileName;
        } 
```

image will come from this:

```
public void fnSaveImage(Stream imgStream, out string imageName)
        {
            imageName = fnGenerateFileName();

            BitmapImage appCapImg = new BitmapImage();
            appCapImg.SetSource(imgStream);
            IsolatedStorageFile appImgStore = IsolatedStorageFile.GetUserStoreForApplication();
            IsolatedStorageFileStream appNewStream = appImgStore.CreateFile(imageName);

            WriteableBitmap appWrtBmp = new WriteableBitmap(appCapImg);
            appWrtBmp.SaveJpeg(appNewStream, appWrtBmp.PixelWidth, appWrtBmp.PixelHeight, 0, 10);
            appNewStream.Close();       

        } 
```

But as of now I have hard coded the image name, but I want to generate the image name on the above parameter. Can any one help how to generate the name for `image`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:17:06.593

你搜索

```
DateTime.Now.ToString(format); 
```

有关格式，请参阅此链接：http: [//msdn.microsoft.com/en-us/library/az4se3k1.aspx](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:25:42.593

```
private string GenerateImageName()
{
    var fileName = "Image_{0}{1}{2}_{3}{4}";
    var date = DateTime.Now;

    return String.Format(filename, date.Day, date.Month, day.Year, day.Hour, day.Minute);
} 
```

例如，当 DateTime 对象值为 16/1/2013 13:24 时，该方法将返回：“Image_1312013_1324”。您可以将其更改为您的偏好。希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T06:15:55.940

如果您希望您的图像名称是唯一的，请获取以下项目：

1.  指导
2.  日期时间.Now

连接这两个并散列整体值。最后将哈希值设置为您的图像名称。这是安全性强的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-06T14:49:05.783

您可以使用`Guid.NewGuid()`来生成您的图像名称。

# ruby-on-rails - 仅在 virt_attribute 为 false 时验证字段

> ID：14358126
> 
> 赞同：0
> 
> 时间：2013-01-16T12:08:02.697
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, model

我有这样的模型：

```
class Order < ActiveRecord::Base
  attr_accessible :**** :phone_number, :receiver, :shipping_id, :street, :totalcost, :user_id, :zip, :use_user_data
  attr_accessor :use_user_data
  validates :city, :presence => {:message =>  I18n.t(:city_not_chosen)}
  validates :zip, :presence => {:message =>  I18n.t(:zip_not_chosen)}
  validates :street, :presence => {:message =>  I18n.t(:street__not_chosen)}
  validates :building, :presence => {:message =>  I18n.t(:building_not_chosen)}
  validates :phone_number, :presence => {:message =>  I18n.t(:phone_number_not_chosen)}
  validates :receiver, :presence => {:message =>  I18n.t(:receiver_not_chosen)}
end 
```

如您所见，我在模型中设置了一些非数据库字段（use_user_data）的字段-虚拟属性...

但是怎么办，如果 :use_user_data 是假的，好的和正确的验证，但是当真时没有验证？

我这样尝试：

```
validates :city, :presence => {:message =>  I18n.t(:city_not_chosen)}, :unless => :use_user_data 
```

所以

```
with_options :unless => :use_user_data do |order|
    order.validates :city, :presence => {:message =>  I18n.t(:city_not_chosen)}
  end 
```

但这对我没有帮助...为什么？

还有我的表格：

```
= form_for @order do |f|
  %div
    = f.label :use_user_data , "Использовать данные вашего профиля*: "
    = label :use_user_data , "Да"
    = f.radio_button :use_user_data, true, :required => true, :id => "use_user_data", :checked => true
    = label :use_user_data , "Нет"
    = f.radio_button :use_user_data, false, :required => true, :id => "dont_use_user_data" 
```

还有当我写

```
validates :city, :presence => {:message =>  I18n.t(:city_not_chosen)}, :if => :use_user_data 
```

我收到验证消息...但是只有在错误的情况下怎么办？为什么我的解决方案不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:56:20.830

表单将“true”或“false”字符串传递给对象，而不是布尔值`true`或`false`。因为它是一个虚拟属性，所以没有进行类型转换。在 Ruby 中，"true" 和 "false" 都是`true`，所以你需要使用一些东西来对值进行类型转换

```
with_options :unless => Proc.new{ |a| a.use_user_data == 'true' } do |order|
  order.validates ...
end 
```

或者

```
with_options :unless => :use_user_data? do |order|
  order.validates ...
end

def use_user_data?
  use_user_data == 'true'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:53:57.467

您需要将`:if`or`:unless`条件放入 lambda 或[`Proc`](http://www.ruby-doc.org/core-1.9.3/Proc.html).

```
validates ..., :if => Proc.new { |a| a.use_user_data === false } 
```

这会导致在验证期间执行上述行`:use_user_data`之前不会评估检查*（**作为值传递给**or**选项以由 Rails 评估）*。将接收当前模型属性作为参数，允许您检查这些属性*（在本例中**为 being* *）*。`validates`*`Proc``:if``:unless`*`Proc`*`:use_user_data``false`*

# php - wrong format of exported file

> ID：14358130
> 
> 赞同：1
> 
> 时间：2013-01-16T12:08:19.103
> 
> 标签：php

I have following codes for exporting from my php file

```
 header("Content-type: application/msexcel");
 header("Content-Disposition: attachment; filename=exceldata.xls");
 header("Pragma: no-cache");
 header("Expires: 0");" 
```

This code produces following error

> The file you are trying to open is in a different format than specified by the file extension. Verify that the file is not corrupted and is from a trusted source before opening the file. Do you want to open the file now?

Please suggest some solution?Thanks in advance!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:10:38.543

如果您生成的文件不是 Excel BIFF 格式的文件（例如，如果它是 CSV 或 HTML 标记），您将收到此错误。要么使用可用于 PHP 的众多库之一创建正确的格式文件以生成真正的 Excel 文件，要么为您实际创建的文件使用正确的 mimetype 和扩展名。

# google-api - Customized Custom Google Search API

> ID：14358133
> 
> 赞同：-1
> 
> 时间：2013-01-16T12:08:27.473
> 
> 标签：google-api

We actually just need the **number** of search results from google. However, the Custom Search API is an overkill, and we are just limited for 100 searches per day. We could resort to scraping but are worried that it might ban us...

Is there any way we could get what we need?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:12:58.293

Google 有一个带有此[示例的](http://code.google.com/apis/ajax/playground/#large_result_set)[AJAX 搜索 API](https://developers.google.com/products/?hl=tr)搜索结果数

# c# - 添加基于图像列的 DataGridViewCheckBoxCell

> ID：14358147
> 
> 赞同：0
> 
> 时间：2013-01-16T12:09:31.443
> 
> 标签：c#, image, for-loop, datagridview

这是我编码的：

```
private void DeleteButton_Click(object sender, EventArgs e)
    {
        //Add column for status
        DataGridViewImageColumn imageColumn = new DataGridViewImageColumn();
        imageColumn.Name = "ImageColumn";
        imageColumn.HeaderText = "Status";
        FilesDataGridView.Columns.Add(imageColumn);
        FilesDataGridView.Columns[2].Width = 45;

        foreach (DataGridViewRow dr in FilesDataGridView.Rows)
        {
            DataGridViewCheckBoxCell checkCell = (DataGridViewCheckBoxCell)dr.Cells["ChkColumn"];

            DataGridViewImageCell cell = dr.Cells[2] as DataGridViewImageCell;

            if (checkCell.Selected == true)
            {
                //need code to display the Image for this column here..
            }
            else
            {
                //need code to display the Image for this column here..
            }
        }
    } 
```

# javascript - 根据另一个值存储数组的项目

> ID：14358151
> 
> 赞同：3
> 
> 时间：2013-01-16T12:09:52.547
> 
> 标签：javascript, jquery, arrays

我有一个名为目录的数组，其中包含 4 个项目：

packageid、dataid、categoryid 和 datapackage。

我想要做的是将等于和等于的项目的所有 dataids推入数组**dataids**中。如果 和 的值都为 0，那么它应该将目录的所有数据 ID 推送到数组中。目前它只是推送 packageid 等于 3 的项目的 dataids。`packageid``packageBtnFilter``categoryid``categoryBtnFilter``packageBtnFilter``categoryBtnFilter``dataids`

```
 var packageBtnFilter = $('#packages').val();
              var categoryBtnFilter = $('#categories').val();   

                var dataids = new Array();

                $(catalogue).each(function () {
                  if (this.packageid == 3) dataids.push(this.dataid);
                }); 
```

谢谢！完整的代码在这里 [http://jsfiddle.net/hunter/Tcwgf/1/](http://jsfiddle.net/hunter/Tcwgf/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:14:38.860

使用[filter](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)函数过滤结果并[映射](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)到 ids：

```
var dataids = (
   categoryBtnFilter==0 && packageBtnFilter==0
   ? catalogue
   : catalogue.filter(function(i) {
       return i.categoryid=categoryBtnFilter && i.packageid==packageBtnFilter
   })
).map(function(i){return i.dataid}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:15:50.197

我想你的情况应该是这样的

```
if ((packageBtnFilter == 0 && categoryBtnFilter == 0) || this.packageid == packageBtnFilter || this.packageid == categoryBtnFilter) dataids.push(this.dataid); 
```

# java - 将 Java 程序转换为 C++

> ID：14358154
> 
> 赞同：0
> 
> 时间：2013-01-16T12:10:11.750
> 
> 标签：java, c++

我已将此代码从转换为`java`，`C++`但我无法转换`boolean`（变量）及其相关代码。请帮助并告诉我是否可以使用任何标题。

```
boolean[][] bombs = new boolean[M+2][N+2];
  for (int i = 1; i <= M; i++){
     for (int j = 1; j <= N; j++){
        bombs[i][j] = (Math.random() < p);
    }
}
  for (int i = 1; i <= M; i++) {
     for (int j = 1; j <= N; j++){
        if (bombs[i][j]) cout<<"* ";
        else             cout<<". ";
    }
     cout<<endl;
  }
  int[][] sol = new int[M+2][N+2];
  for (int i = 1; i <= M; i++)
     for (int j = 1; j <= N; j++)
        for (int ii = i - 1; ii <= i + 1; ii++)
           for (int jj = j - 1; jj <= j + 1; jj++)
              if (bombs[ii][jj]) sol[i][j]++;

  cout<<endl;

  for (int i = 1; i <= M; i++) {
     for (int j = 1; j <= N; j++)
        if (bombs[i][j]) cout<<"* ";
        else             cout<<sol[i][j] + " ";
     cout<<endl;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:16:56.993

我不会为你写代码（闻起来像作业），甚至不会开始评论那些循环。

几个问题：

1.  `boolean``bool`用c++拼写

2.  如果你想拥有可变长度的数组，你必须使用`std::vector`，或者你可以使用原始指针来获取数组语法（但不要忘记删除它们

3.  顺便说一句，`T[] foo`在 c++ 中是不正确的。如果你想要一个静态数组，那就是`T foo[]`

此外，仅仅因为您*可以*编写非常密集的 C++ 代码，而无需在运算符之间使用大括号或空格，并不意味着您*应该*.

Can vs. should 是优秀 c++ 的一个非常重要的部分——比许多其他限制性更强的语言（例如 Java）更重要。`</soapbox>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:16:46.620

您应该使用[bool](http://www.functionx.com/cpp/keywords/bool.htm)数据类型。您不需要为此使用任何头文件。

# objective-c - OCLint 规则自定义

> ID：14358158
> 
> 赞同：7
> 
> 时间：2013-01-16T12:10:25.477
> 
> 标签：objective-c, code-analysis

我正在为 Objective-C 使用 OCLint 静态代码分析工具，想了解如何自定义规则？规则由一组 dylib 文件表示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-23T08:59:18.110

代替将配置作为参数传递（请参阅 Jon Boydell 的回答），您还可以创建一个`.oclint`在项目目录中命名的 YML 文件。

这是一个自定义一些内容的示例文件：

```
rules:
  - LongLine
disable-rules:
rulePaths:
  - /etc/rules
rule-configurations:
 - key: LONG_LINE
   value: 20
output: filename
report-type: xml
max-priority-1: 10
max-priority-2: 20
max-priority-3: 30
enable-clang-static-analyzer: false 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T16:54:32.740

与许多事情一样，答案是视情况而定。

1.  如果您想编写自己的自定义规则，那么您需要在现有源代码之上用 C++ 编写自己的规则。检查`oclint-rules/rules`目录，`size/LongLineRule.cpp`这是一个简单的规则。您需要重新编译等。

2.  如果要更改现有规则的参数，则需要将命令行参数添加`-rc=<rulename>=<value>`到对`oclint`. 例如，如果您希望长行规则仅激活超过 150 个字符的行，您需要添加`-rc=LONG_LINE=150`.

我没有耐心列出您可以更改的所有不同参数。规则列表在这里[http://docs.oclint.org/en/dev/rules/index.html](http://docs.oclint.org/en/dev/rules/index.html)和基于阈值的规则列表在这里[http://docs.oclint.org/en/dev/customizing/rules .html](http://docs.oclint.org/en/dev/customizing/rules.html)但没有可接受值的列表，我不知道这两个 URL 是否涵盖所有规则。您可能需要查看每个规则的源代码以了解其工作原理。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-18T21:55:46.197

如果你使用的是 Xcode 脚本，你应该`oclint_args`像这样使用：

> oclint-json 编译数据库 oclint_args "-rc LONG_LINE=150" | sed 's/(.. *\m{1,2}:[0-9]* :[0-9]*:)/\1 警告：/'

在该示例中，我将 LONG_LINE 的规则更改为 150 个字符

# wordpress - 弹出窗口在 Wordpress 帖子中不起作用

> ID：14358161
> 
> 赞同：0
> 
> 时间：2013-01-16T12:10:32.007
> 
> 标签：wordpress, post

我有一个*HTML*表单，它是一个弹出窗口。当用户单击按钮时，表单将出现在同一页面上。

但是此代码在 Wordpress 帖子中不起作用：

```
<a href="javascript: void(0)" onClick="OpenPopup();">
    <img border="0" src="submit.jpg">
</a> 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:33:21.270

Iexplore 不支持 onClick，也许你可以通过创建一个*jQuery*函数来做到这一点：

先加*ID*：

```
 <img id='image_id' border="0" src="submit.jpg"/> 
```

然后，jQuery函数：

```
 <script>
 $(document).ready(function(){  
    $('#image_id').click(function(){
       OpenPopup();
    });
 });
 </script> 
```

# plone - Funnelweb 错误，无法导入 OrderedDict

> ID：14358162
> 
> 赞同：7
> 
> 时间：2013-01-16T12:10:34.040
> 
> 标签：plone, ordereddictionary, plone-funnelweb

我正在尝试使用 funnelweb 插件从网站导入一些静态页面。这是我写的：`bin/funnelweb --crawler:url=http://wiki.scandiatransplant.com --crawler:max=50 --ploneupload=http://admin:admin@localhost:8080/TestPage`。

我得到这个错误：

```
ImportError: cannot import name OrderedDict 
```

下面添加了完整的回溯。有谁知道如何解决这个问题？

```
Traceback (most recent call last):
  File "bin/funnelweb", line 116, in <module>
    mr.migrator.runner.runner({},"funnelweb.remote")
  File "/home/magiq/Plone/buildout-cache/eggs/mr.migrator-1.0.1-py2.6.egg/mr/migrator/runner/__init__.py", line 69, in runner
    load_config('autoinclude.zcml', mr.migrator)
  File "/home/magiq/Plone/buildout-cache/eggs/Zope2-2.13.12-py2.6.egg/Zope2/App/zcml.py", line 55, in load_config
    _context = xmlconfig.file(config, package, _context, execute=execute)
  File "/home/magiq/Plone/buildout-cache/eggs/zope.configuration-3.7.4-py2.6.egg/zope/configuration/xmlconfig.py", line 649, in file
    include(context, name, package)
  File "/home/magiq/Plone/buildout-cache/eggs/zope.configuration-3.7.4-py2.6.egg/zope/configuration/xmlconfig.py", line 548, in include
    processxmlfile(f, context)
  File "/home/magiq/Plone/buildout-cache/eggs/zope.configuration-3.7.4-py2.6.egg/zope/configuration/xmlconfig.py", line 380, in processxmlfile
    parser.parse(src)
  File "/home/magiq/Plone/Python-2.6/lib/python2.6/xml/sax/expatreader.py", line 107, in parse
    xmlreader.IncrementalParser.parse(self, source)
  File "/home/magiq/Plone/Python-2.6/lib/python2.6/xml/sax/xmlreader.py", line 123, in parse
    self.feed(buffer)
  File "/home/magiq/Plone/Python-2.6/lib/python2.6/xml/sax/expatreader.py", line 207, in feed
    self._parser.Parse(data, isFinal)
  File "/home/magiq/Plone/Python-2.6/lib/python2.6/xml/sax/expatreader.py", line 349, in end_element_ns
    self._cont_handler.endElementNS(pair, None)
  File "/home/magiq/Plone/buildout-cache/eggs/zope.configuration-3.7.4-py2.6.egg/zope/configuration/xmlconfig.py", line 359, in endElementNS
    self.context.end()
  File "/home/magiq/Plone/buildout-cache/eggs/zope.configuration-3.7.4-py2.6.egg/zope/configuration/config.py", line 558, in end
    self.stack.pop().finish()
  File "/home/magiq/Plone/buildout-cache/eggs/zope.configuration-3.7.4-py2.6.egg/zope/configuration/config.py", line 706, in finish
    actions = self.handler(context, **args)
  File "/home/magiq/Plone/buildout-cache/eggs/z3c.autoinclude-0.3.4-py2.6.egg/z3c/autoinclude/zcml.py", line 104, in includePluginsDirective
    includeZCMLGroup(_context, info, filename)
  File "/home/magiq/Plone/buildout-cache/eggs/z3c.autoinclude-0.3.4-py2.6.egg/z3c/autoinclude/zcml.py", line 30, in includeZCMLGroup
    include(_context, filename, includable_package)
  File "/home/magiq/Plone/buildout-cache/eggs/zope.configuration-3.7.4-py2.6.egg/zope/configuration/xmlconfig.py", line 548, in include
    processxmlfile(f, context)
  File "/home/magiq/Plone/buildout-cache/eggs/zope.configuration-3.7.4-py2.6.egg/zope/configuration/xmlconfig.py", line 380, in processxmlfile
    parser.parse(src)
  File "/home/magiq/Plone/Python-2.6/lib/python2.6/xml/sax/expatreader.py", line 107, in parse
    xmlreader.IncrementalParser.parse(self, source)
  File "/home/magiq/Plone/Python-2.6/lib/python2.6/xml/sax/xmlreader.py", line 123, in parse
    self.feed(buffer)
  File "/home/magiq/Plone/Python-2.6/lib/python2.6/xml/sax/expatreader.py", line 207, in feed
    self._parser.Parse(data, isFinal)
  File "/home/magiq/Plone/Python-2.6/lib/python2.6/xml/sax/expatreader.py", line 349, in end_element_ns
    self._cont_handler.endElementNS(pair, None)
  File "/home/magiq/Plone/buildout-cache/eggs/zope.configuration-3.7.4-py2.6.egg/zope/configuration/xmlconfig.py", line 359, in endElementNS
    self.context.end()
  File "/home/magiq/Plone/buildout-cache/eggs/zope.configuration-3.7.4-py2.6.egg/zope/configuration/config.py", line 558, in end
    self.stack.pop().finish()
  File "/home/magiq/Plone/buildout-cache/eggs/zope.configuration-3.7.4-py2.6.egg/zope/configuration/config.py", line 705, in finish
    args = toargs(context, *self.argdata)
  File "/home/magiq/Plone/buildout-cache/eggs/zope.configuration-3.7.4-py2.6.egg/zope/configuration/config.py", line 1397, in toargs
    args[str(name)] = field.fromUnicode(s)
  File "/home/magiq/Plone/buildout-cache/eggs/zope.configuration-3.7.4-py2.6.egg/zope/configuration/fields.py", line 137, in fromUnicode
    value = self.context.resolve(name)
  File "/home/magiq/Plone/buildout-cache/eggs/zope.configuration-3.7.4-py2.6.egg/zope/configuration/config.py", line 179, in resolve
    mod = __import__(mname, *_import_chickens)
  File "/home/magiq/Plone/buildout-cache/eggs/transmogrify.webcrawler-1.2.1-py2.6.egg/transmogrify/webcrawler/webcrawler.py", line 21, in <module>
    from collections import OrderedDict
zope.configuration.xmlconfig.ZopeXMLConfigurationError: File "/home/magiq/Plone/buildout-cache/eggs/mr.migrator-1.0.1-py2.6.egg/mr/migrator/autoinclude.zcml", line 10.4-10.85
    ZopeXMLConfigurationError: File "/home/magiq/Plone/buildout-cache/eggs/transmogrify.webcrawler-1.2.1-py2.6.egg/transmogrify/webcrawler/configure.zcml", line 9.4-10.46
    ImportError: cannot import name OrderedDict 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-16T12:23:49.323

`OrderedDict`是添加到 Python 2.7 中的一个新类，因此在您的情况下它是缺失的。

您可以安装一个[反向端口](http://pypi.python.org/pypi/ordereddict)：

```
pip install ordereddict 
```

或将其添加为您的构建中的依赖项，并编辑`Plone/buildout-cache/eggs/transmogrify.webcrawler-1.2.1-py2.6.egg/transmogrify/webcrawler/webcrawler.py`第 21 行以更改导入：

```
from collections import OrderedDict 
```

到

```
try:
    from collections import OrderedDict
except ImportError:
    # python 2.6 or earlier, use backport
    from ordereddict import OrderedDict 
```

我在[funnelweb 问题跟踪器](https://github.com/collective/funnelweb/issues)中提交了一个问题，要求将其添加到包的未来版本中，请参阅[问题 22](https://github.com/collective/funnelweb/issues/22)。

# html - chrome 中的 Facebook 登录（连接）按钮渲染失败

> ID：14358165
> 
> 赞同：5
> 
> 时间：2013-01-16T12:10:37.783
> 
> 标签：html, css, facebook

今天我意识到 FB 登录按钮在 chrome 中不再正确呈现（可能是因为浏览器更新 - 谁知道）。在 IE 和 Chrome 中查看这个[http://goo.gl/mK6sf网站。](http://goo.gl/mK6sf)每个按钮在 chrome 中都有一些额外的“padding-top”，并且 iframe 没有正确隐藏。这是 png 预览[http://goo.gl/sfUl5](http://goo.gl/sfUl5)

**编辑** 如何使 FB 登录按钮像在 IE 中一样正确呈现？你在其他网站上看到过类似的问题吗？Facebook 是否改变了某些东西，还是应该归咎于 Chrome？

**EDIT2 2013-01-16** 看看这个线程：[https](https://developers.facebook.com/bugs/592452207446912) ://developers.facebook.com/bugs/592452207446912这可能是 Facebook API 错误。当他们修复它时，我会发布回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:54:09.273

感谢 Facebook 开发者论坛的 Matt Bower，临时解决方案是：

```
#fb_login_button { 
    width: 80px; 
}
#fb_login_button span, 
#fb_login_button iframe {.
    width: 80px! important;
    height: 25px! important;
} 
```

我仍在等待 Facebook 开发人员解决此问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T16:05:48.500

您不能在 iframe 中使用登录插件。请使用 JavaScript SDK 和 XFBML 或 HTML5 实现。试试这个代码：

```
<fb:login-button show-faces="false" width="200" max-rows="1"></fb:login-button> 
```

# spring - Prevent autowiring by type for certain beans in Spring

> ID：14358169
> 
> 赞同：2
> 
> 时间：2013-01-16T12:10:52.420
> 
> 标签：spring, autowired

In my spring context I am creating a service bean and a proxy for this service bean (explicitly). Both implement the same interface.

Can I ensure that autowiring cannot inject the target bean?

I would like to be able to use the target service with the @Resource or @Qualifier annotations, but when autowiring it should always be the proxy.

Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:30:51.637

Use the [Primary](http://develop.nydi.ch/2010/12/spring-primary-bean-injection/) annotation. It will indicate which bean should be use preferably when autowiring.

Hope this helps :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:06:42.947

You can put @Primary annotation in your proxy service like bellow:

```
@Primary
@Repository
public class ProxyOfSomeService implements SomeService 
```

And after that when you use, @Autowired annotation on `SomeService` field, the `ProxyOfSomeService` will be injected by deafault.

But when you need the real service you can have it like bellow:

```
@Autowired
@Resource(name="someRealService")
private SomeService someService; 
```

I think this serves your need, thanks!

# iphone - 如何在绘图中实现撤消功能，以便用户可以清除他的最后一行

> ID：14358171
> 
> 赞同：3
> 
> 时间：2013-01-16T12:11:15.517
> 
> 标签：iphone, objective-c, ios5, ios6

我正在使用 CoreGraphics 实现自由手绘，这对我来说效果很好，现在我想为此绘图实现 Undo 功能，以便用户可以清除他的最后一笔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T12:20:22.777

在你的方法中：

```
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    if(imageView2.image != nil){
        [pathArray addObject:imageView2.image];
    }

} 
```

在撤消按钮上：

```
if([pathArray count]>0)
{
    [pathArray removeLastObject];
    if([pathArray count]==0)
    {
        imageView2.image = GlobalImage2;
    }
    else
    {
        imageView2.image=[pathArray objectAtIndex:[pathArray count]-1];
    }

} 
```

从数组中检索此图像。我在我的几个应用程序中使用了相同的代码。我希望它对你有用。

谢谢，

鹤芒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:18:33.840

你应该阅读备忘录模式。一些链接：

*   [http://www.oodesign.com/memento-pattern.html](http://www.oodesign.com/memento-pattern.html)
*   [http://java.dzone.com/articles/design-patterns-memento](http://java.dzone.com/articles/design-patterns-memento)

及时，抱歉没有在这里解释。但是有很多关于它的书籍和文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:17:38.283

我从来没有用过这个，但你可以在这里找到撤消或清除最后的事情

[http://www.cocoacontrols.com/controls/acedrawingview?utm_source=Cocoa+Controls&utm_campaign=eaef7635b9-Cocoa_Controls_Weekly_Roundup_2013_01_1%27&utm_medium=email](http://www.cocoacontrols.com/controls/acedrawingview?utm_source=Cocoa%20Controls&utm_campaign=eaef7635b9-Cocoa_Controls_Weekly_Roundup_2013_01_1%27&utm_medium=email)

# wcf - WCF REST 错误 HTTP 307

> ID：14358178
> 
> 赞同：4
> 
> 时间：2013-01-16T12:11:42.027
> 
> 标签：wcf, c#-4.0, rest, wcf-rest

我有一个 REST WCF 服务。当对该服务进行 POST 尝试进行如下所述的操作时，我收到以下错误：

```
[OperationContract]
[WebInvoke(Method = "POST", UriTemplate = "", RequestFormat = WebMessageFormat.Xml, BodyStyle = WebMessageBodyStyle.Bare)]
void Write(); 
```

**错误：** HTTP 307 没有监听[https://xx.xxx.xx.xxx/EnrollmentServer/Discovery.svc](https://xx.xxx.xx.xxx/EnrollmentServer/Discovery.svc)的操作，但是有监听[https://xx.xxx.xx.xxx/EnrollmentServer/Discovery的操作.svc/](https://xx.xxx.xx.xxx/EnrollmentServer/Discovery.svc/)，所以你被重定向到那里。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T20:31:32.400

将您的 UriTemplate 改为“/”。RESTful WCF 有一个关于希望 Uris 以 / 结尾而不是没有结尾的“事情”。

此外，使用带有结尾斜杠的 Uri 以避免 WCF 响应 307。

# mysql - 我的 SQL 查询非常慢，有 50K+ 条记录

> ID：14358179
> 
> 赞同：0
> 
> 时间：2013-01-16T12:11:46.210
> 
> 标签：mysql, performance, sqlperformance

我有一个名为 links 的表，其中有 50000 多条记录，其中三个字段的索引顺序为`link_id`, `org_id`, `data_id`。

这里的问题是，当我使用 group by sql 查询时，加载需要更多时间。

查询是这样的

```
SELECT DISTINCT `links`.* 
FROM `links` 
WHERE `links`.`org_id` = 2 AND (link !="") 
GROUP BY link 
```

该表有近 20 多列

是否有任何解决方案可以加快查询访问速度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T12:15:55.360

建立索引`(org_id, link)`

`org_id`优化您的`WHERE`条款，并`link`为您的`group by`（以及部分`where`）。

将 LINK_ID 放在首位可能是阻碍您查询的原因。

```
create index LinksByOrgAndLink on Links ( Org_ID, Link ); 
```

[MySQL 创建索引语法](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:22:31.777

问题出在你的 DISTINCT.* GROUP BY 已经在做的工作`DISTINCT`，所以做不同的两次，一个`SELECT DISTINCT` 和另一个`GROUP BY`

尝试这个

```
 SELECT  * 
    FROM `links` 
    WHERE org_id` = 2 AND (link !="") 
    GROUP BY link 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:22:29.603

我想在你的“链接”列中添加一个索引会改善结果。 [http://dev.mysql.com/doc/refman/5.0/en/create-index.html](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)

只选择您需要的列。

为什么.* 有一个不同的`links`？你的表中是否有一些行正好翻了一番？

另一方面，将值“”更改为 NULL 可能会改进您的选择语句，但我不确定这一点。

# actionscript-3 - 如何在 Back 类中创建 Collisions var

> ID：14358181
> 
> 赞同：1
> 
> 时间：2013-01-16T12:11:51.930
> 
> 标签：actionscript-3, flash, class, var

编辑：我现在包含了一个 Player.as 和一个 addchild

我整天都在努力了解如何做到这一点，并在这样做的过程中再次学到了很多东西。但我已经到了需要帮助的地步。

**我知道我必须这样做：**在 Back1 类中创建一个 Collisions 变量。

因为名为 Back1 的背景是包含碰撞图像的影片剪辑

我找到了一个或 2 个很好的站点，可以很好地解释变量和类，但我仍然不知道应该如何解决这个问题

***变量和类之后的研究：***

[http://www.republicofcode.com/tutorials/flash/as3variables/](http://www.republicofcode.com/tutorials/flash/as3variables/)

[http://www.photonstorm.com/archives/1136/flash-game-dev-tip-1-creating-a-cross-game-communications-structure](http://www.photonstorm.com/archives/1136/flash-game-dev-tip-1-creating-a-cross-game-communications-structure)

上述问题导致以下错误，但我认为这是由于未在 Back1 类中创建 Collisions var

ArgumentError：错误 #1063：Bumper() 上的参数计数不匹配。预期：2，值 0。

*   在 flash.display::MovieClip/gotoAndStop() 在 DocumentClass/onRequestStart()DocumentClass.as:64] 在 flash.events::EventDispatcher/dispatchEventFunction() 在 flash.events::EventDispatcher/dispatchEvent() 在 MenuScreen/onClickStart( )MenuScreen.as:18]

    ```
    package 
     {
    import flash.display.MovieClip;
    import flash.events.*;
    import flash.events.KeyboardEvent;
    import flash.ui.Keyboard;
    import flash.geom.Point;
    import Bumper;
    //import Back1;

    public class Test extends MovieClip
    {

        public var leftBumping:Boolean = false;
    public var rightBumping:Boolean = false;
    public var upBumping:Boolean = false;
    public var downBumping:Boolean = false;

    public var leftBumpPoint:Point = new Point(-30,-55);
    public var rightBumpPoint:Point = new Point(30,-55);
    public var upBumpPoint:Point = new Point(0,-120);
    public var downBumpPoint:Point = new Point(0,0);

    public var scrollX:Number = 0;
    public var scrollY:Number = 500;

    public var xSpeed:Number = 0;
    public var ySpeed:Number = 0;

    public var speedConstant:Number = 4;
    public var frictionConstant:Number = 0.9;
    public var gravityConstant:Number = 1.8;
    public var jumpConstant:Number = -35;
    public var maxSpeedConstant:Number = 18;

    public var doubleJumpReady:Boolean = false;
    public var upReleasedInAir:Boolean = false;

    public var keyCollected:Boolean = false;
    public var doorOpen:Boolean = false;

    public var currentLevel:int = 1;

    public var animationState:String = "idle";

    public var bulletList:Array = new Array();
    public var enemyList:Array = new Array();
    public var bumperList:Array = new Array();
     public var back1:Back1;
    public var collisions:Collisions;
    //public var back1:Collisions = new Collisions ;
     public var player:Player;

    public function Test()
    {
        addEventListener(Event.ADDED_TO_STAGE, init);
    }

    public function init(e:Event):void
    {

        player = new Player(320, 360);
        back1 = new Back1();
        collisions = new Collisions();
        //back1.collisions = new Collisons();
              addBumpersToLevel1();
    }
    public function addBumpersToLevel1():void
    {
        addBumper(500, -115);
        addBumper(740, -115);
    }
            public function addPlayerTolevel1():void 
    {
        addPlayer(320, 360);
    }
    public function loop(e:Event):void
    {
        trace("back1.collisions "+back1.collisions);
                    trace("back1 "+back1);
                    trace("collisions "+collisions);
        if (back1.collisions.hitTestPoint(player.x + leftBumpPoint.x,player.y + leftBumpPoint.y,true))
        { 
    ```

以防万一我添加了 Bumper.as

```
package  {
import flash.display.MovieClip;
import flash.events.Event;

public class Bumper extends MovieClip{
    public function Bumper(xLocation:int, yLocation:int) {
        // constructor code
        x = xLocation;
        y = yLocation;

        addEventListener(Event.ENTER_FRAME, bumper);
    }

    public function bumper(e:Event):void{
        //code here
    }
}

} 
```

播放器.as

```
 package  {
    import flash.display.MovieClip;
    import flash.events.Event;

    public class Player extends MovieClip {

        public function Player(xLocation:int, yLocation:int) {
            // constructor code
            x = xLocation;
            y = yLocation;
           }

     //   public function removeSelf():void {
      //      trace("remove enemy");
       //     removeEventListener(Event.ENTER_FRAME, loop);
       //     this.parent.removeChild(this);
       // }

 }
 } 
```

Back1.as 文件（注意它必须被错误地实例化）

```
package  {
import flash.display.MovieClip;

public class Back1 extends MovieClip {
    //public var collisions:Back1;
           //what should i put here?
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:16:35.927

我不确定我是否完全理解你的意思。这个问题措辞很奇怪。

我假设您想在背景对象（Back 类）和播放器对象之间实现碰撞？我无法从您发布的代码中看到播放器对象是什么，因为您的 Test 类中没有这样的变量。

要测试两个对象之间的碰撞检查，请使用以下代码：

```
if(someObject.hitTestObject(anotherObject)) 
```

或者在您使用 hitTestPoint 时：

```
if(back1.hitTestPoint(player.x, player.y,true)) 
```

再说一次，我不知道您发布的代码中 back1 类的外观。如果它扩展了 MovieClip 或 Sprite，并且您有一个执行相同操作的 Player 类（或任何 DisplayObject），这应该可以工作。

这： *Bumper() 上的参数计数不匹配。预期：2，值 0。*

您得到的错误似乎来自代码中未显示的另一个地方。我假设您没有将任何参数传递给 Bumper 类的构造函数。

顺便说一句，这是 Flash IDE 示例还是其他程序，例如 FlashDevelop 或 FlashBuilder？如果您使用 Flash IDE 并尝试将代码附加到放置在场景中的影片剪辑实例，我认为不可能将参数传递给它。抱歉，自从我在 Flash IDE 中工作以来已经有一段时间了。

**编辑：**

这是一些示例代码：

```
//::  Change Back1 class to this

package  {
import flash.display.MovieClip;

public class Back1 extends MovieClip {
    public function Back1()
    {
        graphics.beginFill(0xFF0000);
        graphics.drawRect(0, 0, 50, 50);
        graphics.endFill();
    }
}
}

//::  Then in your Main class (Or the Test class) add the following

var player:Player = new Player(25, 25);
var collidable:Back1 = new Back1();

addChild(player);
addChild(collidable);

//::  Goes in your loop/update
if (collidable.hitTestPoint(player.x, player.y, true))
{
    trace("HIT PLAYER");
} 
```

如何将图形应用到 Back1 类取决于您，我只是画了一个简单的框。它可以是任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:29:35.570

为 Bumper 类设置默认参数：

```
package  {
    import flash.display.MovieClip;
    import flash.events.Event;

    public class Bumper extends MovieClip{
        public function Bumper(xLocation:int = 0, yLocation:int = 0) {
            // constructor code
            x = xLocation;
            y = yLocation;

            addEventListener(Event.ENTER_FRAME, bumper);
        }

        public function bumper(e:Event):void{
            //code here
        }
    }

    } 
```

# android - 如何以编程方式创建具有所需背景颜色的 Drawable？

> ID：14358184
> 
> 赞同：19
> 
> 时间：2013-01-16T12:11:59.730
> 
> 标签：android

我需要创建一个`Drawable`具有所需颜色作为背景颜色的简单对象，但我不知道如何在不使用 XML 模式的情况下以编程方式完成它（真的有可能吗？）。请告诉我，我需要它来制作`LayerDrawable`和使用（以编程方式`SeekBar`更改背景）。`SeekBar`先感谢您。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-16T12:16:51.253

您应该尝试使用[ColorDrawable](http://developer.android.com/reference/android/graphics/drawable/ColorDrawable.html)。可以使用构造函数用颜色构造`ColorDrawable(int color)`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-05-18T12:59:54.840

正如@Thrakbad 所建议的，您可以使用`ColorDrawable`：

```
 TextView textView = new TextView(this);
    ColorDrawable colorDrawable = new ColorDrawable(0xFFFF0000);
    textView.setBackgroundDrawable(colorDrawable); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-16T12:22:40.930

[ColorDrawable](http://developer.android.com/reference/android/graphics/drawable/ColorDrawable.html)在您的情况下会对您有所帮助，您可以为您的可绘制对象传递参数[颜色](http://developer.android.com/reference/android/graphics/drawable/ColorDrawable.html#ColorDrawable%28%29)。

或者您可以执行以下操作：

```
ImageView imgStatus = (ImageView) findViewById(R.id.imgInfoIcon);
// Load the icon as drawable object
Drawable d = getResources().getDrawable(R.drawable.ic_menu_info_details);

// Get the color of the icon depending on system state
int iconColor = android.graphics.Color.BLACK
if (systemState == Status.ERROR)
    iconColor = android.graphics.Color.RED
else if (systemState == Status.WARNING)
    iconColor = android.graphics.Color.YELLOW
else if (systemState == Status.OK)
    iconColor = android.graphics.Color.GREEN

// Set the correct new color
d.setColorFilter( iconColor, Mode.MULTIPLY );

// Load the updated drawable to the image viewer
imgStatus.setImageDrawable(d); 
```

上面的代码最初发布[在这里](http://blog.syedgakbar.com/2012/07/31/changing-color-of-the-drawable-or-imageview-at-runtime-in-android/)

# java - Hibernate JPA 值删除 OneToMany 关系

> ID：14358188
> 
> 赞同：0
> 
> 时间：2013-01-16T12:12:14.173
> 
> 标签：java, hibernate, jpa

我有两个表，其中有一个 OneToMany，MnatToOne 关系。

当我将 AlarmnotifyEmailEntity 的实例添加到 alarmnotifyEmailEntityList 对象并更新 AlarmnotifyEmailConfEntity 的实例时，值将正确保存到数据库中。

但是在删除alarmnotifyEmailEntityList 的一项时，我不能做同样的事情。我确信该值已从 alarmnotifyEmailEntityList 中删除，但它并未将这些更改反映到数据库中

```
 @Entity(name ="alarmnotify_email_conf")
    @Table(name = "alarmnotify_email_conf")
    public class AlarmnotifyEmailConfEntity implements Serializable {

    @OneToMany(mappedBy = "alarmnotifyEmailConfRef",cascade=CascadeType.ALL)
        private List<AlarmnotifyEmailEntity> alarmnotifyEmailEntityList;

    }//end of Class

    @Entity (name ="alarmnotify_email")
    @Table(name = "alarmnotify_email")
    public class AlarmnotifyEmailEntity implements Serializable {
     @JoinColumn(name = "alarmnotify_email_conf_ref", referencedColumnName = "id")
        @ManyToOne
        private AlarmnotifyEmailConfEntity alarmnotifyEmailConfRef;
    }end of Class 
```

我只是调用以下语句进行更新。

JPAManager.getJPAManagerInstance().update(alarmnotifyemailconf);

```
 public Object update(Object o) {

  try {
     tx.begin();
     EntityManager em = getEntityManager();          
     System.out.println("updating object:" + o);
     o = em.merge(o);
     em.close();
     tx.commit();
     System.out.println("closed and commited merge operation");
     return o;
  }
  catch (Exception e) {
     e.printStackTrace();
  }
  return o; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:18:28.053

根据我的经验，级联仅适用于相同的操作。如果我们保存父级，那么子级也将使用更新保存相同的案例。但是我认为，当您要删除其中一个孩子时，我们必须使用实体管理器显式删除，并且不能仅仅合并父级并期望将级联删除到子级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:30:15.857

[我在jpa 从 collection 中删除 child](https://stackoverflow.com/questions/3738934/jpa-removing-child-from-collection)中找到了答案。结果添加**orphanRemoval=true**解决了这个问题。

> @Entity(name ="alarmnotify_email_conf") @Table(name = "alarmnotify_email_conf") 公共类 AlarmnotifyEmailConfEntity 实现可序列化 {
> 
> @OneToMany(mappedBy = "alarmnotifyEmailConfRef",cascade=CascadeType.ALL , **orphanRemoval=true** ) 私有列表 alarmnotifyEmailEntityList;
> 
> ```
> }//end of Class 
> ```

# html - 在专用服务器中解析网站的 HTML，而不是在手机中解析

> ID：14358192
> 
> 赞同：2
> 
> 时间：2013-01-16T12:12:32.887
> 
> 标签：html, ios, parsing, tomcat

我有一个 iOS 应用程序，它从网络（不是我的）下载 HTML 并解析它以获得我需要的数据。问题是，当他们更改网络的 HTML 时，移动应用程序崩溃了，我必须更改代码，而 Apple 停留了一个多星期来接受更新。这个想法是针对现在我在服务器或网络中的移动应用程序中执行的所有操作，就像必须像一座桥梁一样，即这个服务器/网络将下载 HTML 网络，解析它并将结果发送到移动应用。在这种形式下，我可以立即进行任何更改。

我的问题是我是否可以在不使用需要 servlet 和 Tomcat 服务器的应用程序的情况下做到这一点。我可以用 php 文件或类似的东西来做吗？我不需要保存任何数据，只需要解析一个 HTML 并向手机返回指定格式的响应。

谢谢大家。

PD：对不起我的英语，但这不是我的母语。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T12:21:00.840

是的，你可以用 PHP 做到这一点。但只有当您的网络空间配置正确时，非常便宜且免费的提供商通常会禁用来自您服务器的传出连接。

* * *

[在 PHP 中，您只需一行就](http://us.php.net/manual/en/function.file-get-contents.php)可以发出 HTTP GET 请求：

```
$htmlContent = file_get_contents("http://www.example.com/file.html"); 
```

* * *

如果您需要获取有关 HTTP GET 请求结果的更多信息（如标头），您仍然可以使用以下方法轻松完成此操作[`http_get()`](http://us2.php.net/manual/en/function.http-get.php)：

```
$htmlContent = http_get("http://www.example.com/file.html", array("timeout"=>10), $info);
print_r($info); // <- $info now contains information about header fields 
```

* * *

对于更高级的 GET/POST 请求，您可以安装[CURL 库](http://us3.php.net/curl)：

```
$ch = curl_init("http://www.example.com/file.html");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, 0);
$htmlContent = curl_exec($ch);
curl_close($ch); 
```

# .htaccess - 将版本更改为 2.1.1 后，.htaccess 文件在 codeigniter 中不起作用

> ID：14358195
> 
> 赞同：0
> 
> 时间：2013-01-16T12:12:45.750
> 
> 标签：.htaccess, codeigniter, version

我想从

[http://www.mydomain.com/b2b/testarab](http://www.mydomain.com/b2b/testarab)

至

[http://www.mydomain.com/b2b/index.php/business/show/testarab](http://www.mydomain.com/b2b/index.php/business/show/testarab)

我也设置了

```
$config['index_page'] = ''; 
```

我的 .htaccess 文件是

```
RewriteEngine on
php_value max_file_uploads 30
RewriteBase /b2b
RewriteCond %{REQUEST_URI} \s
RewriteRule  ^(home.*|buyers.*|sellers.*|companies.*|mall.*|category.*|product_details.*|contact_now.*|join.*|login.*|myprofile.*|dashboard.*|buy_sell_items.*|trade.*|media.*|myadvertise.*|mycontacts.*|myemail.*|myhotel.*|mymedia.*|payment.*|tradeshows.*|tradeshow_details.*|search_tradeshows.*|business.*)$ index.php/$1 [NC,L,QSA]
RewriteRule ^([a-zA-Z0-9._-\s]+)$ index.php/business/show/$1 [NC,L,QSA] 
```

在这个文件中，第一个 RewriteRule 正在工作..第二个不工作..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:49:36.100

.htaccess

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

将变量设置为空，如下所示。

```
$config['index_page'] = ''; 
```

尝试用这些参数（'AUTO'、'PATH_INFO'、'QUERY_STRING'、'REQUEST_URI'和'ORIG_PATH_INFO'）一一替换以下变量

```
$config['uri_protocol'] = 'AUTO'; 
```

# c++ - 从一个链接对象访问另一个

> ID：14358203
> 
> 赞同：0
> 
> 时间：2013-01-16T12:12:59.013
> 
> 标签：c++

我的 c++ 项目有问题。我编译了 2 个`.cpp`文件并将它们链接到一个共享库`.so`。我想使用一种方法从其中一个到另一个，但是接收`undefined reference vtable *`。这些文件有头文件。任何人都可以提供任何提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:48:08.117

因为您在头文件中为您的类定义了一些方法，但忘记在您的 cpp 文件中实现它们。请一一检查该类的所有方法（定义与实现）。

# c++ - 对静态常量变量 collect2 的未定义引用：ld 返回 1 退出状态

> ID：14358208
> 
> 赞同：1
> 
> 时间：2013-01-16T12:13:13.113
> 
> 标签：c++

请帮我

错误详情如下：

> src/a.cpp:2972: 未定义引用`B::XTT collect2: ld 返回 1 退出状态

`B::XTT`是`B`结构中的静态常量变量。

```
2969     if (index != B::XTT) {
2970         index_map_iter = lookup_index.find(merchandising_index);
2971         merchandising_index = index_map_iter != output_index.end() ? \
2972                index_map_iter->second : B::XTT; 
```

很奇怪，我第一次`B::XTT`在2969行使用，居然没有报错。但是在 2972​​ 我使用`B::XTT`，它会产生错误。

如果我`-O2`在使用`g++`命令时添加选项，它不会产生错误。但它确实会产生错误而没有`-O2`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:16:55.870

当你声明一个静态 const 成员变量时

```
class foo {
    // omitted other members
    static int MyConst;
}; 
```

您必须在一个编译单元中定义它。

```
int foo:MyConst = 42; 
```

# java - java中的变音符号问题

> ID：14358211
> 
> 赞同：4
> 
> 时间：2013-01-16T12:13:16.143
> 
> 标签：java

我正在尝试通过控制台读取一些数据并将其写入文件。当来自控制台的数据包含变音字符时，我遇到了问题。它打印出'？而不是变音符号。请在下面找到我的代码。有人可以帮帮我吗

```
 String cmd = "cmd /C si viewproject"+ cmdLine+" --recurse --fields=indent,name --project="+name;

        Process p = Runtime.getRuntime().exec(cmd);
        BufferedReader in = new BufferedReader(new InputStreamReader(
                p.getInputStream()));
        String line = null;

        File filename = new File(System.getProperty("java.io.tmpdir"),
                "Project" + ".tmp");

        OutputStreamWriter osw = new OutputStreamWriter(new FileOutputStream(filename), Charset.forName("UTF-8").newEncoder());
        while ((line = in.readLine()) != null) {

            osw.write(line);
            osw.write("\n");
        }
        osw.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:17:25.880

尝试使用 cmd 启动`cmd /U`并将输入读取为 UTF-16LE。

看到这个问题[cmd.exe 使用什么编码/代码页？](https://stackoverflow.com/questions/1259084/what-encoding-code-page-is-cmd-exe-using)了解更多信息。

# php - Mysql查询每日最高票数

> ID：14358215
> 
> 赞同：0
> 
> 时间：2013-01-16T12:13:44.483
> 
> 标签：php, mysql, sql

我有一个以下数据库表`review_vote`

```
review_id | user_id | status | date_added 
 2             3        good     20130116135259
 3             3        normal   20130116145259
 4             2        normal   20130116155259
 5             2        good     20130116165259
 6             2        good     20130116175259
 7             1        great    20130116185259
 8             3        good     20130117135259
 9             3        normal   20130117145259 
```

目前我可以通过使用以下查询获得最高投票：

```
SELECT review_id FROM review_vote GROUP BY review_id HAVING COUNT(*) = 
(
   SELECT MAX(x.counts) FROM 
   ( 
       SELECT review_id, COUNT(*) counts FROM review_vote GROUP BY review_id
   )x 
) 
order by date_added desc 
```

但是如果我需要每天获得最高投票，我该如何修改上面的代码？这意味着如果今天`2013-01-16`我需要为昨天获得最高票`2013-01-15`

我尝试使用`date_added = CURDATE()`失败。SQLFIDDLE：[http ://sqlfiddle.com/#!2/9a2b5/6](http://sqlfiddle.com/#!2/9a2b5/6)

更新查询：

```
CREATE TABLE IF NOT EXISTS `review_vote` (
  `review_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  `status` varchar(100) NOT NULL,
  `date_added` varchar(100) NOT NULL,
  KEY `review_id` (`review_id`,`user_id`) USING BTREE
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT INTO `review_vote` (`review_id`, `user_id`, `status`, `date_added`) VALUES
(223, 2, 'lame', '20130116195259');
INSERT INTO `review_vote` (`review_id`, `user_id`, `status`, `date_added`) VALUES(222, 2, 'lame', '20130115195259'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:18:01.047

只需将其添加到您的 where 条件中：

```
DATE_FORMAT(date_added, '%Y-%m-%d') = CURDATE() 
```

根据您的错误更新

```
SELECT review_id FROM review_vote AS RV WHERE DATE_FORMAT(RV.date_added, '%Y-%m-%d') = CURDATE()    
    GROUP BY review_id HAVING COUNT() = 
(
    SELECT MAX(x.counts) FROM 
    (
        SELECT review_id, COUNT() counts FROM review_vote GROUP BY review_id
    )x
) 
```

请看演示：[演示](http://sqlfiddle.com/#!2/9a2b5/16)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:16:18.680

```
SELECT   review_id
FROM     review_vote
WHERE    date_added LIKE '20130115%'
GROUP BY review_id
ORDER BY COUNT(*) DESC
LIMIT    1 
```

但实际上您应该考虑将您的`date_added`列更改为适当的时间类型，例如[`DATETIME`or`TIMESTAMP`](http://dev.mysql.com/doc/en/datetime.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:22:49.183

将以下内容添加到您的 WHERE 子句中：

```
`date_added` BETWEEN
  DATE_FORMAT(DATE_SUB(CURDATE(), INTERVAL 1 DAY), '%Y%m%d')
  AND DATE_FORMAT(CURDATE(), '%Y%m%d') 
```

确保你有一个索引`date_added`！

日期函数的文档都在这里：[http ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

`date_added`如果您的列是原生日期类型，那么您的生活会更轻松。

# css - 正文标签后的奇怪空格

> ID：14358219
> 
> 赞同：1
> 
> 时间：2013-01-16T12:14:12.257
> 
> 标签：css

请看一下网站底部[http://nurmura.kz](http://nurmura.kz)就在蓝线之后有一个空白我在 Firefox 18 中注意到蓝线应该贴在窗口底部，在谷歌浏览器中我可以没看到。关于如何摆脱那个空白的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:23:12.600

你必须清除你的**#footer-bottom**。像这样写：

```
#footer-bottom {
    height: 53px;
    margin: 0 auto;
    overflow: hidden;
    padding: 0 40px;
    width: 940px;
} 
```

# javascript - Jquery用每个修改html

> ID：14358225
> 
> 赞同：3
> 
> 时间：2013-01-16T12:14:24.520
> 
> 标签：javascript, jquery, html, web

我对 jQuery 有疑问。我想编写一个函数来动态替换我的 HTML 中的某些内容。

这是功能：

```
function renderPage(datas, html) {
    $(html).find("*").each(function(){
       if ($(this).attr("data-func")) {
           var df = $(this).attr("data-func");
           var content = null;
           eval("content = " + df + "($(this),datas);");
           console.log(content);
       }
    });
} 
```

问题是，它没有效果！我在日志中看到内容变量是正确的，但输出没有什么不同。

我在 eval 中的功能：

```
function fill(element,data) {
    element.html("BASSZA MEG");
    var events = data.events;

    var i = 0;
    var n = events.length;

    for (;i<n; i++) {
        obj = events[i];
        var tr = $("<tr>");
        var nev = $("<td>");
        var link = $("<a href='programbelso.html#id="+obj["event_id"]+"&logo="+obj["event_logo"]+"'>");
        link.html(obj["event_name"]);
        nev.append(link);
        tr.append(nev);
        element.append(tr);
    }

    console.log("element: " + element);
    return element;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:20:41.073

首先，不要遍历文档中的每个元素，然后使用`if()`语句。您可以通过使用正确的选择器来显着提高性能。

以下示例应该可以实现您想要做的事情，而无需使用 evil`eval()`功能：

```
function renderPage(datas, html) {
    $('[data-func]').each(function() {
       var df = $(this).attr("data-func");
       var the_func = window[$(this).attr("data-func")]; 

       if(typeof the_func === 'function') {
           var content = the_func($(this), datas);
           console.log(content);
       }
    });
} 
```

# javascript - JavaScript - IE 9 XML 文本内容

> ID：14358226
> 
> 赞同：1
> 
> 时间：2013-01-16T12:14:31.087
> 
> 标签：javascript, xml, firefox, internet-explorer-9

下一个代码在 Firefox 下运行良好，但 IE 9 给出了 udnefiend 作为结果：

```
var url = "http://www.w3schools.com/xml/note.xml";

var xmlhttp = new XMLHttpRequest();
xmlhttp.open("GET", url, true);
xmlhttp.onreadystatechange = function(event){ processRequest(event,xmlhttp); };
xmlhttp.send();

function processRequest(event,xmlhttp) {
    if(xmlhttp.readyState != 4) return;
    if(xmlhttp.status != 200) return;
    var responseXML = xmlhttp.responseXML;
    alert(responseXML.getElementsByTagName("note")[0].getElementsByTagName("to")[0].textContent);
} 
```

如何在 IE9 中获取 XML 元素的 textContent？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:11:29.093

要从 XML DOM 对象访问任何节点的值，请使用属性

```
dom_node.nodeValue; 
```

textContent 不是 W3C 标准推荐。要求您使用跨浏览器兼容的标准属性。

# powershell - 查询某个时间段之间的应用程序事件日志

> ID：14358230
> 
> 赞同：0
> 
> 时间：2013-01-16T12:14:36.887
> 
> 标签：powershell, event-log

我正在尝试查询某个时间段的应用程序事件日志，以检查确认应用程序备份状态的特定事件。由于备份计划设置在晚上 10:00 到晚上 11:00 之间，因此我正在尝试获取有关事件 ID 18264 的信息。

我用：

```
gwmi -computername somename -namespace root\cimv2 -query "Select EventCode from Win32_NTLogEvent where LogFile = 'Application' and EventCode = '18264'" 
```

现在，发生的事情是我得到了不止一个输出。我想将输出限制为 1，这是基于最新的。例子; 获取昨天晚上 10 点到 11 点之间的事件 ID。我看到一个专栏为 TimeWritten。有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:21:47.017

有用于读取事件日志的特定 cmdlet，这些比使用 WMI 容易得多。例如。

```
Get-WinEvent -ComputerName comp1,comp2 `
             -FilterHashtable @{LogName='application'; 
                                starttime=([datetime]::today.AddDays(-1)); 
                                endtime=([datetime]::Today);
                                id=1704} 
```

（为清楚起见添加了换行符）

这将从计算机`comp1`和`comp2`昨天返回所有事件 #1704。查看`Get-WinEvent`'s`FilterHashtable`参数 ( `get-help get-WinEvent -param FilterHashtable`) 的帮助以获得更多搜索条件（例如，您可以传递多个日志名称和 ID）。

还有一个`-MaxEvents`参数可以将输出限制为多个事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-13T13:17:40.090

您可以创建自定义 XPath 查询，该查询可在 PowerShell、C# 中进一步用于查询或观察事件日志。

```
<QueryList>
  <Query Id="0" Path="Application">
    <Select Path="Application">*[System[(Level=1  or Level=2 or Level=3 or Level=4 or Level=0 or Level=5) and (EventID=18264) and TimeCreated[timediff(@SystemTime) &lt;= 3600000]]]</Select>
  </Query>
</QueryList> 
```

# c# - 正则表达式重构 - 搜索匹配，如果找到，将其替换为一行

> ID：14358234
> 
> 赞同：1
> 
> 时间：2013-01-16T12:14:41.210
> 
> 标签：c#, regex

你好，我正在学习正则表达式，我需要你的智慧来解决这个问题。

我需要知道我是否可以在某处搜索某个单词的匹配项，如果匹配，我将整篇文章与集合匹配，然后我在集合中的每个项目中搜索`foreach`并用另一个关键字替换...此代码有效，但我需要知道如果可以不这样做，`foreach`因为它浪费内存....

```
MatchCollection mc;
List<string> listek = new List<string>();

Regex r = new Regex(@".*" + word + @".*");

mc = r.Matches(text);
foreach (var item in mc)
{
    listek.Add(Regex.Replace(item.ToString(), word, @"<span class=""highlighted"">" + word + "</span>"));
} 
```

* * *

我有以下 XML：

```
<article>
    <title>title 1</title>
    <text>some long text</text>
</article>
<article>
    <title>title 2</title>
    <text>some long text</text>
</article> 
```

我需要在每个文本节点中搜索关键字，如果我找到匹配项，我需要返回文章女巫替换关键字......我的代码显示了它但是虚拟方式..（@“。*”+ word + @“。* ”）这意味着我添加到集合整个文本但只有包含我的关键字我想同时替换关键字并且我不知道如何

* * *

我是这样解决的：

```
internal static string SearchWordInXml()
{
    var all = from a in WordBase.Descendants("ITEM")
    select new
    {
        title = a.Element("TITLE").Value,
        text = a.Element("TEXT").Value
                  };
        foreach (var d in all)
        {
            Regex r = new Regex(@".*" + service.word + @".*");
            Match v = r.Match(d.text);
            Template();
            var xElemData = TempBase.XPathSelectElement("//DATA");
            if (v.Success)
            {
                XElement elemSet = new XElement("DATASET");
                XElement elemId = new XElement("DATAPIECE");
                XAttribute attId = new XAttribute("ATT", "TITLE");
                XAttribute valueId = new XAttribute("VALUE", d.title);
                elemSet.Add(elemId);
                elemId.Add(attId);
                elemId.Add(valueId);
                XElement elemName = new XElement("DATAPIECE");
                XAttribute attName = new XAttribute("ATT", "TEXT");
                XAttribute valueName = new XAttribute("VALUE", Regex.Replace(d.text, service.word, @"<span class=""highlighted"">" + service.word + "</span>"));
                xElemData.Add(elemSet);
                elemSet.Add(elemName);
                elemName.Add(attName);
                elemName.Add(valueName);
            }
        }
    return convert(TempBase);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:55:08.013

如果您只查看文本节点，我可能会选择这样的东西

```
string text = "<article><title>title 1</title><text>some long text</text></article><article><title>title 2</title><text>some long text</text></article>";
string word = "long";
Regex r = new Regex("(?<=<text>.*?)"+word+"(?=.*?</text>)");
text = r.Replace(text, "<span class=\"highlighted\">$&</span>"); 
```

文本现在将只包含您正确的值。

请注意，这`$&`是对完整匹配的反向引用。如果您想要任何类型的分组（使用括号`()`），您可以使用`$1`, `$2`,`$3`等。

只有一条线可以使用

```
text = Regex.Replace(text, "(?<=<text>.*?)"+word+"(?=.*?</text>)","<span class=\"highlighted\">$&</span>"); 
```

# asp.net - 在代码隐藏 VS2005 中使用 vb.net 的 Asp.net Web 应用程序

> ID：14358235
> 
> 赞同：1
> 
> 时间：2013-01-16T12:14:42.880
> 
> 标签：asp.net, vb.net, debugging, visual-studio-2005

我想知道是否有任何方法可以在调试时编辑 Asp.net Web 应用程序的代码隐藏？

当我尝试这个时，状态栏上会显示一条消息，说“当前无法在编辑器中修改此文本。它是只读的”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:24:02.177

该应用程序实际上是在您的代码的编译版本之外运行的。如果您修改它，它必须重新编译它才能使您的更改生效，这意味着它需要将运行版本换成新的编译版本。这是一个相当困难的问题——这就是为什么我认为微软让它不可能做到。更多的是保护您免于思考某些更改实际上并没有发生。

# c# - 在 Windows 8 应用程序中从数据库中获取数据

> ID：14358236
> 
> 赞同：0
> 
> 时间：2013-01-16T12:14:43.947
> 
> 标签：c#, xaml, windows-8, adomd.net

我正在构建一个 Windows 8 应用程序，它需要我从远程托管的服务器获取数据。我可以使用哪个 API 来获取所需的数据？我正在使用 c# 和 xaml。我基本上想与 Microsoft SQL Server Analysis Services 进行通信。ADOMD.NET 无法使用，因为 Windows 8 商店应用程序不支持它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T13:15:44.440

在 Windows 8 应用程序中，我们可以指定例如连接字符串来读取存储在服务器端数据库中的数据。这不仅会带来巨大的安全风险（想象一下，您的连接字符串存在于下载您的应用程序的数千台设备上！），将它放在那里也毫无用处。WinRT 不知道与（远程）数据库对话。这意味着 API 中没有 ADO.NET 或 LINQ-To-SQL 类。

Windows 8 风格的应用程序没有开箱即用的功能来联系数据库。所以你需要网络服务来连接远程数据库。

如果您在 Web 服务器上有一个可以为其编写 OData 服务的数据库，那么这是一个选择。您可以使用 OData 库

我希望[http://blogs.msdn.com/b/phaniraj/archive/2012/04/26/developing-windows-8-metro-style-applications-that-c​​onsume-odata.aspx](http://blogs.msdn.com/b/phaniraj/archive/2012/04/26/developing-windows-8-metro-style-applications-that-consume-odata.aspx)会帮助你。

# queue - 以完全相同的方式处理的作业的独立有序队列

> ID：14358238
> 
> 赞同：0
> 
> 时间：2013-01-16T12:14:54.913
> 
> 标签：queue, message-queue, amqp

我正在寻找一种排队工具来帮助我按顺序处理工作。我将使用用户加入网站的示例来帮助传达问题，在现实生活中，它们是比较枯燥的工作，每个工作最多需要 1 分钟，有几千个用户。

**user1** - 注册 -> 处理付款 -> 上传照片 -> 调整照片大小

**user2** - 重置密码 -> 登录 -> 上传照片 -> 调整照片大小

上述作业都需要为该用户处理。即您不能在注册完成之前处理付款。这些作业中的每一个都以相同的方式处理（向外部服务发出 http 请求）。

如果用户 1 注册需要很长时间，用户 2 没有理由等待他的密码重置。如果我在一个队列中有多个工作人员，那么下一个要弹出的作业可能是任何东西，因此用户任务可能会以错误的顺序处理。

目前，我有一个组合系统，它使用 redis 列表来执行此操作，但它并不理想，需要改进。如果有现成的工具或模式可以做到这一点，那就太好了。我以为我可以通过编程方式为每个用户在rabbitmq 上创建一个新队列，但我觉得它并不是为此而设计的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:00:02.717

答案是使用一些客户端支持的 [amqp 消息组](http://qpid.apache.org/books/0.20/AMQP-Messaging-Broker-CPP-Book/html/Using-message-groups.html)，因为我已经在使用 nodejs ，所以我最终使用了[童话。](https://github.com/baoshan/fairy)

# android - Android并将“ü”发送到服务器

> ID：14358241
> 
> 赞同：0
> 
> 时间：2013-01-16T12:15:09.090
> 
> 标签：android, json

我在使用 json 向服务器发送 ü 时遇到问题。我认为我在服务器上实现了所有好的广告错误。这是代码：

```
public void sendMail(List<String> addresses, String title, String contents, boolean addVcard){
        JSONObject args = new JSONObject();
        HashMap<Long, ArrayList<Long>> pdfs = new HashMap<Long, ArrayList<Long>>();
        if(list == null)
            list = (EmailListFragment)getSupportFragmentManager().findFragmentById(R.id.list_fragment);
        if(list == null)
            list = (EmailListFragment)getSupportFragmentManager().findFragmentByTag(LIST_FRAGMENT);
        if(list != null){
            for(TreeFile pdf: list.getPDFs()){

                if(pdf.type == FilesLoader.PAGE){
                    ArrayList<Long> pages = pdfs.get(pdf.parent);
                    if(pages == null){
                        pages = new ArrayList<Long>();
                        pdfs.put(pdf.parent, pages);
                    }
                    pages.add(pdf.id);
                }else if(pdf.type == FilesLoader.PDF){
                    if(pdfs.get(pdf.id) == null)
                        pdfs.put(pdf.id, new ArrayList<Long>());
                }
            }
        }
        try {
            args.put("emails", new JSONArray(addresses));
            Iterator<Entry<Long, ArrayList<Long>>> it = pdfs.entrySet().iterator();
            JSONObject pdfsArgs = new JSONObject();
                // attachment added by user

            while (it.hasNext()) {
                Entry<Long, ArrayList<Long>> pairs = it.next();
                JSONArray pages = new JSONArray();

                // sorting pages by id
                ArrayList<Long> pageList = (ArrayList<Long>)pairs.getValue();
                Collections.sort(pageList);

                for(Long id: pageList){
                    pages.put(id+"");
                }
                if(pages.length() > 0)
                    pdfsArgs.put(pairs.getKey() + "", pages);
                it.remove(); // avoids a ConcurrentModificationException
            }
            args.put("magazines", pdfsArgs);
//          String mes = null;
//          try {
//              mes = URLEncoder.encode(contents, "CP1252");
//          } catch (UnsupportedEncodingException e) {
//              // TODO Auto-generated catch block
//              e.printStackTrace();
//          }
            args.put("message", contents);
            args.put("subject", title);
            if(getvca.emailPref != null && getvca.emailPref.length() > 0
                    && getvca.emailPref.matches("[a-zA-Z0-9._@+,; \\-]+"))
                args.put("sender", getvca.emailPref);
            else
                args.put("sender", GlobalConfig.getUser());

            if(addVcard){
                args.put("vcard", "1");
                getvca.addTo(args);
            }else{
                args.put("vcard", "0");
            }

        } catch (JSONException e) {
            MY_DEBUG.print(e);
        }

        postData = new SendPostData();
        postData.execute(args);
    }

    private class SendPostData extends AsyncTask<JSONObject, String, Long> {
        ByteArrayOutputStream out;
         @Override
        protected Long doInBackground(JSONObject... objects) {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(GlobalConfig.getSendEmail());

            httppost.addHeader("Authorization", "Basic " + Base64.encodeToString(
                    (GlobalConfig.getAuthString()).getBytes(),Base64.NO_WRAP));
            httppost.addHeader("Accept-Encoding", "CP1252");
            httppost.addHeader("Accept-Encoding", "UTF-8");
            try {
                MY_DEBUG.print(objects[0].toString(4));
                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                nameValuePairs.add(new BasicNameValuePair("data", objects[0].toString()));
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                // Execute HTTP Post Request
                HttpResponse response = httpclient.execute(httppost);
                out = new ByteArrayOutputStream();
                response.getEntity().writeTo(out);
                out.close();

                publishProgress(out.toString());
                setOut(out);
                MY_DEBUG.LOG(getClass(), "Email server response: " + out.toString());
                if(out != null && out.toString().contains("0"))
                    return (long) 0;
                else
                    return (long) 1;
            } catch (ClientProtocolException e) {
                MY_DEBUG.print(e);
            } catch (IOException e) {
                MY_DEBUG.print(e);
            } catch (JSONException e) {
                MY_DEBUG.print(e);
            }

            Long startPosition = (long) 1;
            return startPosition;
         }
        public void setOut(ByteArrayOutputStream out) {
            this.out = out;
        }

        @Override
        protected void onProgressUpdate(String... progress) {
//             if(progress[0].contains("0")){
         } 
```

在日志中我看到：

```
01-16 13:12:42.167: E/ASDASD(27672): {
01-16 13:12:42.167: E/ASDASD(27672):     "position": "",
01-16 13:12:42.167: E/ASDASD(27672):     "phone": "",
01-16 13:12:42.167: E/ASDASD(27672):     "fax": "",
01-16 13:12:42.167: E/ASDASD(27672):     "subject": "",
01-16 13:12:42.167: E/ASDASD(27672):     "surname": "",
01-16 13:12:42.167: E/ASDASD(27672):     "firstname": "",
01-16 13:12:42.167: E/ASDASD(27672):     "emails": [
01-16 13:12:42.167: E/ASDASD(27672):         "test@test.pl"
01-16 13:12:42.167: E/ASDASD(27672):     ],
01-16 13:12:42.167: E/ASDASD(27672):     "vcard": "1",
01-16 13:12:42.167: E/ASDASD(27672):     "sender": "ediusz@gmail.com",
01-16 13:12:42.167: E/ASDASD(27672):     "message": "ü",
01-16 13:12:42.167: E/ASDASD(27672):     "email": "ediusz@gmail.com",
01-16 13:12:42.167: E/ASDASD(27672):     "company": "",
01-16 13:12:42.167: E/ASDASD(27672):     "magazines": {
01-16 13:12:42.167: E/ASDASD(27672):         "90": [
01-16 13:12:42.167: E/ASDASD(27672):             "1",
01-16 13:12:42.167: E/ASDASD(27672):             "2",
01-16 13:12:42.167: E/ASDASD(27672):             "3"
01-16 13:12:42.167: E/ASDASD(27672):         ]
01-16 13:12:42.167: E/ASDASD(27672):     },
01-16 13:12:42.167: E/ASDASD(27672):     "internet": "",
01-16 13:12:42.167: E/ASDASD(27672):     "mobile": ""
01-16 13:12:42.167: E/ASDASD(27672): } 
```

所以我认为一切正常，但服务器返回错误。我无权访问服务器。你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:19:50.217

您需要找出服务器使用的编码（可能/希望是*UTF-8*）并将您的内容从您使用的编码转换为正确的（服务器）编码：

```
contents = new String(contents.getBytes("ISO-8859-1"), "UTF-8"); 
```

注意：您需要对所有数据执行此操作。

如果您使用错误的编码，它可能（确实）导致服务器出错。

# ember.js - 模板中的选定项目，是否有上下文感知 bindAttr 的任何解决方案？

> ID：14358242
> 
> 赞同：1
> 
> 时间：2013-01-16T12:15:10.413
> 
> 标签：ember.js

问题如下：在我们的应用程序中，我们有几个按钮、导航图标等，当它们被点击时我们希望它们被“选中”。我们可以同时标记多个元素。

我想要这样做的第二个原因是，当我阅读 emberjs.com 上的新指南时，我觉得模板应该比之前所说的更多地使用，并且模板应该负责渲染 DOM，而视图应该用于处理复杂的事件（如果有）或创建公共/共享组件以在应用程序中重用。

目前视图正在处理这个：

```
app.NavView = Ember.CollectionView.extend({
    ...
    itemViewClass: Ember.View.extend({
        ...
        classNameBindings: ['isSelected:selected']
        isSelected: function () {
            return this.get('controller.selected') === this.get('content');
        }.property('controller.selected')
    })
}); 
```

但这就是 View 基本上所做的一切，我想删除整个 View 并为此使用模板

我尝试过使用模板方法，并放弃了整个 View 概念。

```
<div id="main-menu">
    {{#each content}}
    <div {{bindAttr class="controller.isSelected:selected"}}>
        {{{iconsvg}}}
        {{name}}
    </div>
    {{/each}}
</div> 
```

但是我的问题当然是 bindAttr 不知道它所在的上下文，并且不能将其“发送”到控制器上的 isSelected 属性以评估是否选择了此元素。

有没有一个很好的解决方案可以在没有视图的情况下执行此操作，还是我被迫使用视图？还是我认为模板/视图/控制器的设计部分和责任是错误的？

任何回应表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:15:45.380

在当前文档中：[http](http://emberjs.com/guides/templates/displaying-a-list-of-items/) ://emberjs.com/guides/templates/displaying-a-list-of-items/中提到了如何使用不覆盖当前上下文的 {{each}} 助手.

在你的情况下，这将是这样的：

```
<div id="main-menu">
  {{#each item in controller}}
  <div {{bindAttr class="isSelected:selected"}}>
    {{{item.iconsvg}}}
    {{item.name}}
  </div>
  {{/each}}
</div> 
```

注意我已经删除了 {{bindAttr}} 中对“控制器”的引用，因为我假设它是一个 ember 控制器，那么它就是当前上下文，所以基本上 isSelected 相当于 controller.isSelected

# html - 对齐：从下到上

> ID：14358243
> 
> 赞同：0
> 
> 时间：2013-01-16T12:15:26.687
> 
> 标签：html, css, position, alignment

我想知道是否可以将具有未知高度的相对容器放置在网站的左下角，以便其中的任何文本从底部开始并上升（当我们添加它时）？这与浏览器通常呈现它的方式完全相反（从上到下，垂直）。

例子：

```
<div class="container">Unknown amount of text</div>
.container { max-width: 600px; left: 100px; bottom: 100px; position: absolute; } 
```

这工作得很好，但如果`Unknown amount of text`长于用户显示器的高度，则不会出现垂直滚动条。那么它需要`position: relative;`，但有什么方法可以让这个容器粘在左下角`position: relative;`吗？

我正在寻找 HTML/CSS 解决方案（如果可能的话）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:25:32.473

您可以使用外部 div 来获得一些操作效果。

`bg color`给两者相同，`parent and child div`然后它给出从下到上的效果。

**HTML**

```
<div class="wrap">
  <div class="container">Unknown amount of text</div>
</div> 
```

**CSS**

```
html, body{height:100%}
.wrap{ background:green; overflow:auto; height:100%}
.container { max-width: 600px; background:green; position:absolute; bottom:0; } 
```

**[演示](http://jsfiddle.net/vdgEK/3/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:55:45.673

你可以试试这个我认为这个可以帮助你改变css。& 在底部，您只需增加边距顶部以设置底部对齐。

```
.container { max-width: 600px; left:0; margin-top:200px; position: relative; } 
```

# joomla2.5 - joomla模板自定义html重写组件输出

> ID：14358244
> 
> 赞同：0
> 
> 时间：2013-01-16T12:15:31.460
> 
> 标签：joomla2.5, joomla-extensions, joomla-template

我正在使用带有 sobipro（joomla 2.5）的 ja elastica 免费模板。

Joomla 模板系统让我可以自定义特定模板的视图。

例子：

joomlasite/templates/mytemplate/html/com_content/article/default.php

此文件重写/自定义文章的 com_content 输出。

我对没有“观点”的 sobipro 组件很感兴趣。

有什么建议吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T23:09:59.763

如果您的组件没有视图，则您无法使用模板覆盖其视图。

模板只能使用模板目录中的 html/com_YOUCOMPONENT/YOURVIEW/ 重写。

# javascript - datePick 仅在双击时显示

> ID：14358245
> 
> 赞同：1
> 
> 时间：2013-01-16T12:15:31.910
> 
> 标签：javascript, php, jquery

我正在尝试在我的网站上实现日期选择，但我遇到了一个小问题：要让它出现，我必须单击文本字段，单击外部，然后再次单击内部以显示。我该如何解决？这是我的代码的一部分：

```
 function datePicker(){                         
                $( "#from" ).datepicker({
                    defaultDate: "+1w",
                    changeMonth: true,
                    changeYear: true,
                    onClose: function( selectedDate ) {
                        $( "#to" ).datepicker( "option", "minDate", selectedDate );
                        $( "#to" ).datepicker( "option", "dateFormat", "dd/mm/yy" );
                    }
                });
                $( "#to" ).datepicker({
                    defaultDate: "+1w",
                    changeMonth: true,
                    changeYear: true,
                    onClose: function( selectedDate ) {
                        $( "#from" ).datepicker( "option", "maxDate", selectedDate );
                        $( "#from" ).datepicker( "option", "dateFormat", "dd/mm/yy" );
                    }
                });
            }   
    <input type="text" class ="date" id= "from" name="from" onclick="datePicker();"/>
    <BR>
    <input type="text" class = "date" id= "to" name="to" onfocus="datePicker();"/> 
```

我很感激任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:20:33.010

```
$(document).ready(function(){
     datePicker();
}); 
```

在 document.ready 上调用 datePicker 函数并删除 onclick 然后尝试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:20:59.840

问题如下：在函数中`datePicker()`实例化日期选择器，只有在那之后它才会知道打开它。

删除函数行和 onclick="" 看起来像这样：

```
 <script type="text/javascript">
           jQuery(document).ready(function($){
                $( "#from" ).datepicker({
                    defaultDate: "+1w",
                    changeMonth: true,
                    changeYear: true,
                    onClose: function( selectedDate ) {
                        $( "#to" ).datepicker( "option", "minDate", selectedDate );
                        $( "#to" ).datepicker( "option", "dateFormat", "dd/mm/yy" );
                    }
                });
                $( "#to" ).datepicker({
                    defaultDate: "+1w",
                    changeMonth: true,
                    changeYear: true,
                    onClose: function( selectedDate ) {
                        $( "#from" ).datepicker( "option", "maxDate", selectedDate );
                        $( "#from" ).datepicker( "option", "dateFormat", "dd/mm/yy" );
                    }
                });
            });  
       </script>
    <input type="text" class ="date" id= "from" name="from" />
    <BR>
    <input type="text" class = "date" id= "to" name="to"/> 
```

# database-schema - sc.sh 中的架构爬虫问题

> ID：14358254
> 
> 赞同：0
> 
> 时间：2013-01-16T12:15:54.193
> 
> 标签：database-schema, schema-compare, schemacrawler

我正在尝试使用 SourceForge 的 SchemaCrawler 实用程序获取 Oracle 数据库模式的文本转储。在命令行提供以下参数

```
./sc.sh -driver=oracle.jdbc.driver.OracleDriver 
-host=<hostName> 
-port=<portNumber> 
-database=iknowit 
-schemas=IM_OWNER 
-user=im_owner 
-password=im_owner 
-table_types=TABLE,VIEW 
-infolevel=maximum 
-command=schema > dump-AF_ITA.txt 
```

然而，这会卡在一个特定的点，看起来像一个无限循环

schemacrawler.schema.IndexColumnSortSequence valueOfFromCode 中的异常

未知代码空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:43:16.707

正如@Sualeh Fatehi 在[https://sourceforge.net/p/schemacrawler/discussion/495990/thread/b4781831/](https://sourceforge.net/p/schemacrawler/discussion/495990/thread/b4781831/)上所建议的那样，我使用了 -loglevel=ALL 和 -infolevel=standard 而不是建议的最小值。

同样最初我观察到我只得到了表名，然后我修改了 schemacrawler.config.properties 并将所有文本格式选项设置为 true，因为我需要整个表定义

```
schemacrawler.format.show_unqualified_names=true
schemacrawler.format.hide_primarykey_names=true
schemacrawler.format.hide_foreignkey_names=true
schemacrawler.format.hide_index_names=true
schemacrawler.format.hide_constraint_names=true 
```

那完成了工作！

感谢 Sualeh Fatehi 提供的帮助以及如此出色的可配置实用程序。

干杯，海娜

# inno-setup - 如何使用运行部分执行文件并从函数中读取参数

> ID：14358256
> 
> 赞同：2
> 
> 时间：2013-01-16T12:15:57.517
> 
> 标签：inno-setup

如何使用 Run 部分执行文件但从函数 XYZ 读取参数：

```
[Run]
Filename: {app}\e.exe; Parameters: funcXYZ('1'); Description: {cm:ALaunchProgram,{#ti}}; 
```

我不想使用 ShellExec 或 Exec。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:18:21.220

[请参阅帮助文件](http://www.jrsoftware.org/ishelp/topic_scriptconstants.htm)。

您正在调用的函数必须与帮助中显示的签名**完全相同**——特别注意它必须接受单个字符串参数，即使您实际上没有向它传递任何内容。

# c# - Telerik 获取过滤后的行 radGridView

> ID：14358257
> 
> 赞同：0
> 
> 时间：2013-01-16T12:16:02.913
> 
> 标签：c#, asp.net, .net, telerik

我已经打开了分页的 radGridView。我也有单独的导出到 excel 按钮，它将所有过滤的行导出到 excel（所有行不是仅在当前页面上可见的行）

将行导出到 excel 后，我想将其列“exported”中的每个导出行值更改为 true。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-22T06:10:30.287

假设您有一个像这样的过滤数据库查询

```
select 
    field1,
    field2
from table where field1 like 'filter' 
```

您可以执行相同的查询，而不是 where 子句，使用相同的逻辑选择 0 或 1

```
select 
    field1, 
    field2, 
    case when field1 like 'filter' 
        then 1 
        else 0 
    as wasexported 
from table 
```

# html - 表格不适用于电子邮件

> ID：14358260
> 
> 赞同：-2
> 
> 时间：2013-01-16T12:16:09.663
> 
> 标签：html, forms

我有一个简单的 HTML 表单，需要发布到外部电子邮件：vynora2011@hotmail.com，如下所示：

```
<form method="post" action="mailto:vynora2011@hotmail.com" ENCTYPE="text/plain">
                <label for="Name">Naam:</label>
                <input type="text" name="Name" id="Name" />

                <label for="City">Plaats:</label>
                <input type="text" name="City" id="City"  />

                <label for="Email">Email:</label>
                <input type="text" name="Email" id="Email" />

                <label for="Message">Bericht:</label>
                <textarea name="Message" rows="5" cols="20" id="Message"></textarea>

            <input type="submit" name="submit" value="Bericht verzenden" class="submit-button" />
            </form> 
```

示例：[JsFiddle](http://jsfiddle.net/PsLGm/)

当我检查我的电子邮件时，我看不到任何消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:27:57.860

你应该有一些 PHP（或其他语言）。因为我心情不错，所以我会为你做的。只需复制/粘贴此代码：

```
 <?php 
if ($_POST["email"]<>'') { 
    $ToEmail = 'vynora2011@hotmail.com'; 
    $EmailSubject = 'Mail Subject'; 
    $mailheader = "From: ".$_POST["email"]."\r\n"; 
    $mailheader .= "Reply-To: ".$_POST["email"]."\r\n"; 
    $mailheader .= "Content-type: text/html; charset=iso-8859-1\r\n"; 
    $MESSAGE_BODY = "Name: ".$_POST["name"].""; 
    $MESSAGE_BODY .= "Email: ".$_POST["email"]."";
    $MESSAGE_BODY = "City: ".$_POST["city"].""; 
    $MESSAGE_BODY .= "Message: ".nl2br($_POST["message"]).""; 
    mail($ToEmail, $EmailSubject, $MESSAGE_BODY, $mailheader) or die ("Failure"); 
?>
    Your message has been send. 
    <?php 
} else { 
?>
    <form id="contato-main" action="index.php" method="post">
      <input id="name" name="name" type="text" required="required" placeholder="Naam"/>
      <input id="email" name="email" type="text" required="required" placeholder="E-Mail" />
      <input id="city" name="city" type="text" placeholder="Plaats"/>
      <textarea id="message" name="message" required="required" placeholder="Bericht></textarea>
      <br />
      <input id="submit" type="submit" name="Submit" value="Submit" />
    </form>
    <?php 
}; 
?> 
```

当然，编辑以适应您的（css）需求。此外，将“$EmailSubject = '' 中的邮件主题编辑为您想要的内容。

# talend - JEXL 与 TalendDate.isDate

> ID：14358262
> 
> 赞同：-1
> 
> 时间：2013-01-16T12:16:10.850
> 
> 标签：talend, jexl

在 Talend DI 4.2.1 中使用 tScriptRule 组件。使用 jexl 表达式评估日期模式的结果对于所有条件都为 false。从测试作业派生的代码段如下：

```
public class Script {

static class Row {

    public String EFFECTIVEDATE;

    public String getEFFECTIVEDATE() {
        return this.EFFECTIVEDATE;
    }
}

public static void main(String[] args) {
    Row row1 = new Row();
    row1.EFFECTIVEDATE = "10-01-2012"; 
    com.bekwam.tscriptrules.JexlRowEvaluator e_tScriptRules_2 = new com.bekwam.tscriptrules.JexlRowEvaluator();
    boolean ruleTest_tScriptRules_2_1 = e_tScriptRules_2
    .evalTrue("'${TalendDate.isDate(row1.EFFECTIVEDATE, \"dd-mm-yyyy\")}' == true", "row1", row1);
    System.out.println(ruleTest_tScriptRules_2_1);
}
} 
```

库/组件来自[tScriptRules](https://sites.google.com/site/bekwam/home/tscriptrules-wiki)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:44:39.577

Talend 函数不由 jexl 表达式处理器计算。您只能在 jexl 表达式中使用字段（在您的输入行中）。正如您在生成的 java 代码中所见，传递给该方法的唯一参数是行及其所有字段

`com.bekwam.talend.component.scriptrules.Result result_tScriptRules_1 = rulesBean_tScriptRules_1.process(row1, row2, row3, counter_tScriptRules_1);`

*   row1 : 输入行
*   row2 : 过滤的行
*   row3 : 被拒绝的行

如果您想在 jexl 表达式处理器中添加 Talend 方法评估，您可以修改 tscriptrules-2.0.1.jar 库。

相反，我建议使用 tmap 进行这种数据质量检查

tMap 设计： http: [//imageshack.us/a/img842/879/talendtmap.jpg](http://imageshack.us/a/img842/879/talendtmap.jpg) tMap 结果：http: [//imageshack.us/a/img541/5950/talendtmapresult.jpg](http://imageshack.us/a/img541/5950/talendtmapresult.jpg)

[天才](/questions/tagged/talend "显示标记为“talend”的问题") [杰克斯](/questions/tagged/jexl "显示标记为“jexl”的问题")

# java - 我们如何编辑 java.jar 文件？为此我们需要使用什么工具？

> ID：14358263
> 
> 赞同：0
> 
> 时间：2013-01-16T12:16:13.733
> 
> 标签：java, android

我在我的 android 应用程序中使用 gcm.jar 文件。我需要编辑 jar 文件（即）来打印一些数据`System.out.println()`，以便检查控制流。这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T10:00:03.193

您可以通过首先反编译来编辑 jar 文件，使用 Java Decompliers
然后您可以将代码添加到 .java 文件中，
现在重新打包或编译并构建新的 JAR 文件，使用任何 IDE 甚至 JDK 和记事本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:29:44.127

您有一个 jar 文件，并且想要编辑代码以输入打印语句。您不太可能被允许这样做。jar 文件可能已以某种方式编码以避免反编译。现在，@Anup 可能是对的，您可能需要查看源代码（如果有）。如果没有，无论如何你都在喝汤。

您正在尝试做的是`hack`进入 jar 文件的方式，现在使用类乱码技术阻止了这种方式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-16T12:25:26.167

jar 文件是 Java ARchive。这通常可以使用普通的 Zip 工具打开（想到 7zip）。尽管您可能无法对该 JAR 的内容做太多事情。它可能包含 .class 文件，这些文件是字节码，必须反编译。尝试获取源代码，它应该更容易。

您可能可以更好地使用调试器来获取您想要的值。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-16T12:22:08.070

jar 只不过是一个 zip 文件。因此，您可以使用标准的 zip 实用程序。此外，还可以使用 jar 命令行工具。

如果您需要在代码中打开它，可以使用各种开源库来操作 zip/jar 文件，或者您甚至可以使用 java.util.zip 包中的内置 zip 实用程序。

# python - 使代码兼容 python 2.6

> ID：14358265
> 
> 赞同：0
> 
> 时间：2013-01-16T12:16:15.903
> 
> 标签：python, argparse

这个问题正在跟进[链接](https://stackoverflow.com/questions/14101989/using-positional-arguments-from-argparse-as-function-name)

```
#!/usr/bin/env python

import argparse
import sys
import itertools as IT
from snemail import *

parser = argparse.ArgumentParser(
        prog='snemail',
        usage='%(prog)s [-h] [--usage] action target [input]',
        epilog="refer to '%(prog)s usage' for examples of how to run snemail"
        )
parser.add_argument('action', metavar='action', nargs='?', type=str, choices=('list', 'add', 'remove'), help="list | remove | add")
parser.add_argument('target', metavar='target', nargs='?', type=str, choices=('domain', 'forwarding', 'transport', 'user', 'all'), help="domain | forwarding | transport | user")
parser.add_argument('input', nargs='?', type=str, default=None, help="required input to go with the 'remove' and 'add' flags. 'list' requires no input field")
parser.add_argument('--usage', action='store_true', help="show usage examples for snemail")
args = parser.parse_args()

if args.usage:
        usage()
        sys.exit(0)
if args.action is None or args.target is None:
        parser.print_help()
        sys.exit(0)
if args.target == 'all':
        all_list()
        sys.exit(0)
if len(sys.argv) >= 3:
        input = args.input
        input = input.split(',')
else:
        input = None

def usage():
        print 'usage info here'

targets = 'domain forwarding transport user'.split()
actions = 'list add remove'.split()

dispatch = {key:globals()['%s_%s' % key] for key in IT.product(targets, actions)}

if input is not None:
        dispatch.get((args.target, args.action), usage)(input)
elif args.action is not None and args.target is not None:
        parser.print_help()
        sys.exit(0) 
```

这段代码可能会让专业 python 编码器的皮肤爬行，但它适用于我，在 Python 2.7（我用于我的开发机器）上，但是当我尝试在将要执行的机器上执行这段代码时在生产中运行此代码，它没有执行代码，因为

```
dispatch = {key:globals()['%s_%s' % key] for key in IT.product(targets, actions)} 
```

在 2.7 中不起作用。

亲爱的互联网专家，如何在 Python 2.6 上进行这项工作？（因为升级到 2.7 不是一个选项，但更重要的是我想编写合适的 Python）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T12:17:42.053

将 a`dict()`与生成器表达式一起使用：

```
dispatch = dict((key, globals()['%s_%s' % key]) for key in IT.product(targets, actions)) 
```

生成器表达式创建`(key, value)`2 值元组；这适用于 2.6 和 2.7（或 python 3，就此而言）。

# c# - 根据 C# 中的条件删除包含 List<> 对象的 ListBox 的最后一项

> ID：14358270
> 
> 赞同：3
> 
> 时间：2013-01-16T12:16:21.247
> 
> 标签：c#, windows-phone-7

我有一个 ListBox，其中的数据绑定到一个 List<> 对象。在 ListBox_SelectionChanged 事件中，我正在检查所选索引是否是 List<> 的最后一项。如果 selectedIndex 是最后一个项目，那么我想删除该项目并调用我的 Web 服务以将更多项目添加到列表中。但是如果 selectedIndex 不是最后一项，我想导航到一个页面。我的问题是，如果 selectedTndex 是最后一项，它会删除最后一项，但它再次回到相同的“如果”条件，我检查 selectedIndex 是否是最后一项。因此，它不会调用我的服务，而是导航到下一页。谁能告诉我为什么它再次调用 if() 条件以及如何处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:23:47.387

我认为当您从列表框中删除您的项目时，他（ListBox 控件）会自动选择上一个项目，这会触发 SelectionChanged 事件。所以你可以在之前取消订阅这个事件（在伪代码中）：

```
bool isLast = ... ;
if (isLast)
{
   listBox.SelectionChanged -= OnSelectionChanged;
   Remove(item);
   listBox.SelectionChanged += OnSelectionChanged;
} 
```

因此，当您删除您的项目时，此事件将不会再次触发。此外，您可能想要清除选择：

```
listBox.SelectedIndex = -1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:22:28.980

也许如果您清除列表框并再次加载它会有所帮助。

# c# - SearchFilter 逻辑运算符 AND 和 Or

> ID：14358277
> 
> 赞同：0
> 
> 时间：2013-01-16T12:16:51.440
> 
> 标签：c#, exchangewebservices, ews-managed-api

如何根据用户选择的操作执行 SearchFilter 逻辑运算符`AND`和`OR`编程？

如果用户给出这样的选择`"[To]ContainsSubstring'Ram' OR [To]containssubstring'lak'` 如何执行呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:18:14.947

您可以将单个过滤器定义为表达式，然后根据用户的选择组合它们。

* * *

编辑：我提议的是创建谓词（据我所知，现在已弃用，建议使用基本相同的 Func），然后将它们组合成一个表达式并将其应用于您必须过滤的列表。

我在这里找到的一个例子：[组合多个谓词](https://stackoverflow.com/questions/1248232/combine-multiple-predicates)

* * *

我过去所做的是根据用户的选择组合谓词，然后将它们编译成一个表达式，然后将其用作 Linq Where 扩展方法的参数。

所以，一个例子（不确定它是否会编译现在写它：）：

```
List<Customer> list = new List<Customer>();
List<Func<Customer,bool>> predicateList = new List<Func<Customer,bool>>();

if(/*user choice condition*/)
{
    predicateList.Add(c => c.Name.Contains("test"));
}
if (/*user choice condition*/)
{
    predicateList.Add(c => c.Name.Contains("test") || c.Description.Contains("buyer"));
}
//etc.

Expression<Func<IWorkItem, bool>> filterExpression = c => whereClausePredicates.All(pred => pred(c));
var filteredCustomers = list.Where(filterExpression.Compile()); 
```

# android - 如何正确删除 Google API 控制台项目？

> ID：14358278
> 
> 赞同：1
> 
> 时间：2013-01-16T12:16:51.920
> 
> 标签：android, google-api, project, google-drive-api

我在从 Google API 控制台删除项目时遇到问题。根据[Google API 控制台帮助](https://developers.google.com/console/help/?hl=bg#deletingaproject)，可以在删除后的 7 天内取消删除项目，之后该项目将无法访问。

对我来说，问题是该项目现在可以取消删除一个多月（我想我是在 11 月底删除的）。当我使用我的 android 应用程序时，我仍然可以访问 Google Drive（Drive API 是项目中唯一启用的服务）。创建这个项目只是为了用我的个人谷歌账户测试应用程序，但现在我需要“官方账户”中项目的包名和证书指纹。

所以 - 知道我在删除项目时可能做错了什么吗？

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:07:32.947

我认为您没有做错任何事情，永久项目（和客户凭据）删除目前正在进行中，应该很快就会投入生产。

# grails - Grails 中的语言环境链接

> ID：14358281
> 
> 赞同：1
> 
> 时间：2013-01-16T12:17:00.153
> 
> 标签：grails, hyperlink

当我在我的项目中更改语言环境时，会得到一个这样的链接：

```
http://localhost:8080/someapp/?lang=en 
```

我如何获得宁静风格的链接，例如：

```
http://localhost:8080/someapp/en 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T13:42:32.937

在 URLMapping中的 param **lang**中定义，例如：

```
"/$lang?/contact_us"(controller: "pages", action: "contact_us") 
```

使用**createLink**正确生成链接。

# python - Python - 如何为我的散点图设置动画？

> ID：14358284
> 
> 赞同：1
> 
> 时间：2013-01-16T12:17:13.897
> 
> 标签：python, numpy, matplotlib

到目前为止，这是我的脚本：

```
import numpy as np
import matplotlib.pyplot as plt
import random
t=0
r=3.0
n=0
A=[]
for x in range(10):
  for y in range(10):
    A.append([random.uniform(0,1),random.uniform(0,1)])
for m in range(len(A)):
  plt.plot(A[m][0],A[m][1], "x", color="blue")
plt.show()
while n<=100:
  for m in range(len(A)):
    A[m][0]=r*A[m][0]*(1-A[m][0])
    A[m][1]=r*A[m][1]*(1-A[m][1])
  for m in range(len(A)):
    plt.plot(A[m][0],A[m][1], "x", color="blue")
  plt.show()
  n+=1 
```

我现在要做的是为其设置动画，这样我就不必每次都关闭绘图，以便 python 重新计算并显示下一张图像。相反，它应该每隔 5 秒向我展示一个新的情节。对我来说最好的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T13:49:34.930

您可以使用`matplotlib.animation`包：

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.animation as animation
import random

t=0
r=3.0
n=0
A=[]

for x in range(10):
    for y in range(10):
        A.append([random.uniform(0,1),random.uniform(0,1)])
A = np.array(A).transpose()

fig = plt.figure()
line, = plt.plot(A[0],A[1], "x", color="blue")

def update():
    for i in range(100):
        A[0], A[1] = r*A[0]*(1-A[0]), r*A[1]*(1-A[1])
        yield A

def draw(data):
    line.set_xdata(data[0])
    line.set_ydata(data[1])
    return line,

ani = animation.FuncAnimation(fig, draw, update, interval=1000, blit=False)

plt.show() 
```

该`update`函数是一个生成器，它为后续步骤生成数​​据，而`draw`它是一个更新绘图数据并返回它的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T13:37:40.660

用于`plt.ion()`启用交互式绘图（打开绘图窗口时不会停止执行），然后用于`plt.clf()`清除绘图。

一个工作样本是：

```
import numpy as np
import matplotlib.pyplot as plt
plt.ion()

import random
t=0
r=3.0
n=0
A=[]
for x in range(10):
    for y in range(10):
        A.append([random.uniform(0,1),random.uniform(0,1)])

for m in range(len(A)):
    plt.plot(A[m][0],A[m][1], "x", color="blue")
    plt.draw()
plt.pause(1)

while n<=100:
    for m in range(len(A)):
        A[m][0]=r*A[m][0]*(1-A[m][0])
        A[m][1]=r*A[m][1]*(1-A[m][1])
    for m in range(len(A)):
        plt.plot(A[m][0],A[m][1], "x", color="blue")
    plt.draw()
    plt.pause(1)
    plt.clf() 
```

您必须使用`plt.draw()`来强制 GUI 立即更新并`plt.pause(t)`中断 t 秒。实际上，我不太确定您想如何处理脚本的两个部分（包含绘图命令的两个循环），但希望我的代码能以正确的方式指导您。

**评论**

首先，我建议在编写 python 代码时遵守一些约定。使用 4 空格缩进，这使您的代码更具可读性。其次，我建议将 numpy 用于数组。你导入它但你不使用它。这使您的代码绝对更快。第三，也是最后，你知道`plot(x,y,"bx")`matplotlib 的签名吗？我觉得真的很方便。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T13:54:15.593

我建议使用 matplotlib 的面向对象接口，在[美工教程](http://matplotlib.org/users/artists.html#artist-tutorial)中得到了很好的总结。

有了这个，您可以更好地控制图形行为，并且可以简单地在循环中重绘绘图：

```
import numpy as np
import matplotlib.pyplot as plt
import random
from time import sleep
t=0
r=3.0
n=0
A=[]
for x in range(10):
    for y in range(10):
        A.append([random.uniform(0,1),random.uniform(0,1)])
fig = plt.figure()
ax = fig.add_subplot(111)
for m in range(len(A)):
    ax.plot(A[m][0],A[m][1], "x", color="blue")
fig.show()
sleep(1)
while n<=100:
    for m in range(len(A)):
        A[m][0]=r*A[m][0]*(1-A[m][0])
        A[m][1]=r*A[m][1]*(1-A[m][1])
    ax.clear()
    for m in range(len(A)):
        ax.plot(A[m][0],A[m][1], "x", color="blue")
    fig.canvas.draw()
    sleep(1)
    n+=1 
```

脚本中的关键更改正在使用`fig.show`而不是在更改数据后`plt.show`更新图形。`fig.canvas.draw`

# testing - 突变测试工具

> ID：14358287
> 
> 赞同：1
> 
> 时间：2013-01-16T12:17:26.220
> 
> 标签：testing

在我们公司，我们希望通过在我们的代码上创建突变来开始评估单元测试的质量。

有谁知道任何使用 Maven 并且可以集成到 hudson 中的突变测试工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:05:30.233

PIT 它是我所知道的唯一提供 Maven 插件的工具。

此处提供了一些其他选项的摘要

[http://pitest.org/java_mutation_testing_systems/](http://pitest.org/java_mutation_testing_systems/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:23:09.633

假设 Java 是您选择的语言，[PIT](http://pitest.org/)是一个很好的工具。我还建议您阅读这篇文章[突变测试，进一步完善](http://blog.octo.com/en/mutation-testing-a-step-further-to-the-perfection/)

这个线程比较了其他可用的工具：[如何对我的 Java 程序执行突变测试？](https://stackoverflow.com/questions/6487784/how-can-i-perform-mutation-testing-of-my-java-program)

# c# - 在 C# 中解析网页的有用内容

> ID：14358288
> 
> 赞同：3
> 
> 时间：2013-01-16T12:17:27.977
> 
> 标签：c#, html-parsing, webpage

> **可能重复：**
> [解析网页](https://stackoverflow.com/questions/1786689/parsing-web-pages)

我正在尝试用 C# 解析网页的内容。这是我使用的代码：

```
WebRequest request = WebRequest.Create("URL");
WebResponse response = request.GetResponse();
Stream data = response.GetResponseStream();
string html = String.Empty;
using (StreamReader sr = new StreamReader(data))
{
    html = sr.ReadToEnd();
} 
```

但问题是我得到了 html 包含的所有数据。

您对如何以“干净”的方式获取有用的数据有什么建议，或者我必须构建自己的解析器？例如：包含标题和与之相关的文本的帖子，类似博客的格式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T12:29:36.827

如果您确实尝试从网页解析博客文章，**请不要那样做**，甚至不要考虑使用 HTML Agility Pack。

相反，您应该使用.Net 框架（自 v3.5 起）中已内置的[SyndicationFeed和相关类。](http://msdn.microsoft.com/en-us/library/system.servicemodel.syndication.syndicationfeed.aspx)这些是为消费和拆分 RSS 提要量身定制的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T12:21:06.480

只需使用[Html Agility Pack](http://htmlagilitypack.codeplex.com/)即可。太强大了！

您可以在 Internet 上找到许多教程，例如[http://runtingsproper.blogspot.fr/2009/09/htmlagilitypack-article-series.html](http://runtingsproper.blogspot.fr/2009/09/htmlagilitypack-article-series.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T12:22:54.670

使用`Regex`. 要解析两个标签之间的数据（我假设您想要这样做），您可以执行以下操作：

```
string match = Regex.Match(data, string.Format("<a>(?<inbetween>.+?)</a>")).Groups["inbetween"].Value; 
```

与敏捷包不同，使用 a`Regex`不需要外部依赖项，这对于可移植的独立应用程序非常有用。

# parameters - 参数传递方式

> ID：14358289
> 
> 赞同：0
> 
> 时间：2013-01-16T12:17:35.107
> 
> 标签：parameters

所有这些传递参数之间有什么区别

1）。值 2)。参考 3).纯参考 4) 值结果，仅在子程序条目 5) 上评估参数。值结果，子程序进入和退出参数的评估

我用类似（FORTRAN）的伪代码编写了以下函数

```
DIMENTION X(2)
I=2
X(1) = 10
X(2) = 20
CALL SUB (I, X(I))

SUBROUTINE SUB (A, B)
A = 1
B = 30
RETURN 
END 
```

我想知道在使用上述条件传递值后 I、X(1)、X(2) 会发生什么。

# java - Hibernate ServiceImplementation 抛出 NullPointerException

> ID：14358295
> 
> 赞同：1
> 
> 时间：2013-01-16T12:17:50.377
> 
> 标签：java, spring, hibernate, nullpointerexception

我的程序使用 Spring 和 Hibernate 时遇到问题。
我有这个类：
**departament.java**

```
@Entity
@Table(name="apps_departaments")
public class Departament
{
    @Id
    @GeneratedValue
    private int id;

    @Column(name="dep_codi")
    private String CodDep;

    @Column(name="dep_nomc")
    private String nom;

    @Column(name="dep_nomm")
    private String nomCurt;
} 
```

**部门DAO.java**

```
public interface DepartamentDAO
{
    public void afegirDepartament(Departament dep);
    public List<Departament> getDepartaments();
} 
```

**部门DAOImpl.java**

```
@Repository
public class DepartamentDAOImpl implements DepartamentDAO
{
    @Autowired
    private SessionFactory sessionFactory;

    public void afegirDepartament(Departament dep)
    {
        sessionFactory.getCurrentSession().save(dep);
    }

    public List<Departament> getDepartaments()
    {
        return (List<Departament>)(sessionFactory.getCurrentSession().createCriteria(Departament.class).list());
    }
} 
```

**部门服务.java**

```
public interface DepartamentService
{
    public void afegirDepartament(Departament dep);
    public List<Departament> getDepartaments();
} 
```

**部门ServiceImpl.java**

```
@Service
@Transactional(propagation = Propagation.SUPPORTS, readOnly = true)
public class DepartamentServiceImp implements DepartamentService
{
    @Autowired
    private DepartamentDAO depDAO;

    @Transactional(propagation = Propagation.REQUIRED, readOnly = false)
    @Override
    public void afegirDepartament(Departament dep)
    {
        depDAO.afegirDepartament(dep);
    }

    @Override
    public List<Departament> getDepartaments() {
        return depDAO.getDepartaments();
    }
} 
```

我的配置设置是：
**web-application-config.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:p="http://www.springframework.org/schema/p"
   xsi:schemaLocation="
       http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:component-scan base-package="net.grupgirona.intranet" />
    <context:annotation-config />
    <context:property-placeholder location="classpath*:jdbc.properties"/>
    <import resource="webmvc-config.xml" />
    <import resource="webflow-config.xml" />
    <import resource="data-access-config.xml" />
</beans> 
```

**数据访问-config.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:p="http://www.springframework.org/schema/p"
   xsi:schemaLocation="
       http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/tx
       http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

<tx:annotation-driven transaction-manager="transactionManager" />
<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource"
    p:driverClassName="${jdbc.driverClassName}"
    p:url="${jdbc.databaseurl}" p:username="${jdbc.username}"
    p:password="${jdbc.password}" />

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="configurationClass">
        <value>org.hibernate.cfg.AnnotationConfiguration</value>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${jdbc.dialect}</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">update</prop>
        </props>
    </property>
    <property name="packagesToScan" value="net.grupgirona.dades"/>
  </bean>

  <bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>
</beans> 
```

好的，当我尝试以这种方式访问​​数据时：

```
DepartamentServiceImp dades = new DepartamentServiceImp(); 
```

我得到一个 NullPointerException （调试时，dades 为空）。
当我阅读hibernate的输出时，这似乎不是什么奇怪的事情，并且与数据库的连接出现了（hibernate已经正确创建了表app_departaments）。
我不知道我是否在配置中遗漏了什么，或者什么。

我会寻求任何帮助。

**堆栈跟踪**

java.lang.NullPointerException at com.hpcds.grupgirona.dades.service.imp.DepartamentServiceImp.getDepartaments(DepartamentServiceImp.java:57) at com.hpcds.grupgirona.components.plantilla.LlistatDepartament.encodeEnd(LlistatDepartament.java:51) at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1854) 在 javax.faces.component.UIComponent.encodeAll(UIComponent.java:1850) 在 com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy. java:440) 在 com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131) 在 org.springframework.faces.webflow.FlowViewHandler.renderView(FlowViewHandler.java:99) 在 com.sun.faces .lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:120) 在 com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) 在 com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:202) 在 org.springframework.faces.mvc.JsfView.renderMergedOutputModel(JsfView.java:85) 在 org.springframework.web.servlet.view .AbstractView.render(AbstractView.java:250) 在 org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047) 在 org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817) 在org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719) at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669) at org.springframework.web.servlet.FrameworkServlet.doGet( FrameworkServlet.java:574) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:621) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 在 org.springframework.web.filter.CharacterEncodingFilter .doFilterInternal(CharacterEncodingFilter.java:88) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) at org. apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222) 在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve. java:123) 在 org.apache.catalina.authenticator.AuthenticatorBase。调用（AuthenticatorBase.java:472）在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99) 在 org.apache .catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java :407) 在 org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589) 在 org.apache.tomcat.util 的 org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)。 net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) 在 java.util.concurrent。ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:25:45.787

你不能使用这条线

```
DepartamentServiceImp dades = new DepartamentServiceImp(); 
```

因为您在 DepartamentServiceImp 中有一个 @Autowired 注释状态变量。

Spring 不鼓励使用`new`关键字。您需要的所有实例都必须从 spring 上下文中实例化和检索。

如果您仍想自己实例化对象，请使用 setter 并设置`DepartamentDAO`dao 。`DepartamentServiceImp`

# jquery - 使用 Jquery 连接到所有控件的单击事件

> ID：14358297
> 
> 赞同：0
> 
> 时间：2013-01-16T12:17:58.733
> 
> 标签：jquery, asp.net, ajax, events, controls

目前，一旦有人单击按钮（使用按钮的事件）并使用以下 ajax，我就会在代码中调用一个函数：

```
$('.toggleBtn').click(function(e) {
    $.ajax({
                        type: "POST",
                        url: "page.aspx/function",
                        data: "{'id': '" + id + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        async: false,

                        success: function (msg) { 
```

是否可以在 jquery 中挂钩到当前页面中的所有控件事件并只运行一个 $.ajax。

假设我有四个控件、两个文本框和两个组合框，并且想要相应地更新数据库。如果我想运行上面的代码，我需要一一挂钩他们的点击事件，并在后面的代码中运行单独的函数，这并不理想。

换句话说，一旦用户选择/输入控件值，就想填充我的对象。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:20:46.060

我认为您可以使用以下逻辑：

```
var request = 0; //global flag

$('.toggleBtn').click(function(e) {
    if (!request) {
      $.ajax({
         ..
         success: function(){
           request = 1; //update the flag
         }
      });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:33:14.960

如果我理解您的问题，您是在询问如何为一组元素的单击事件触发相同的代码，但希望将被单击元素的 ID 作为数据中的参数传递。如果是这样，这将对具有该类的所有元素执行此操作`className`...

```
$('.className').click(function(e) {
    $.ajax({
        type: "POST",
        url: "page.aspx/function",
        data: "{'id': '" + this.id + "'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: false,
        success: function (msg) {
            ...
            ...
        }
    });
}); 
```

# java - 显示进度对话框，直到任务完成

> ID：14358299
> 
> 赞同：1
> 
> 时间：2013-01-16T12:18:02.843
> 
> 标签：java, android

好的，我有一个程序需要等到 android 完全启用 wifi 适配器。我有这个活动代码并且它可以工作，但老实说，我认为这不是等待某些任务完成的正确方法（在这种情况下，android 需要启用 wifi）。

```
public class MainActivity extends Activity implements Runnable {

ProgressDialog pd;
WifiManager wm;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    wm = (WifiManager) getSystemService(WIFI_SERVICE);

    if(!wm.isWifiEnabled()) {
    pd = ProgressDialog.show(this, "Stand by", "Doing work");

    Thread t = new Thread(this);
    t.start();
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);

    return true;
}

@Override
public void run() {

    wm.setWifiEnabled(true);
    while(wm.getWifiState() != 3) {

        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    pd.dismiss();
    }
} 
```

有人可以告诉我，等待程序执行直到某个任务完成的正确方法是什么？所以程序场景：

1.  如果 wifi 被禁用，执行 if 语句（显示进度对话框并启用 wifi）
2.  显示进度对话框，直到任务完成（在这种情况下 wifi 完全启用）
3.  启用 wifi 时停止显示进度对话框

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:24:44.327

子类 AsyncTask，这正是 AsyncTask 的创建目的。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:25:39.313

Using AsyncTask:

```
private class MyTask extends AsyncTask<URL, Integer, Long> {

   private Context context;

   public MyTask(Context context) {
     this.context = context;
   }

   protected void onPreExecute() {
      progressDialog = ProgressDialog.show(context, "", "msg", true); 
   }

  protected Long doInBackground(URL... urls) {
       //do something
  }

 protected void onPostExecute(Long result) {
     progressDialog.dismiss();  
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:27:58.257

Something like this will work:

```
 if(!wm.isWifiEnabled()) {

        pd = ProgressDialog.show(this, "Stand by", "Doing work");
        WifiManager wifiManager = (WifiManager)getBaseContext().getSystemService(Context.WIFI_SERVICE);
        wifiManager.setWifiEnabled(true);

    }

public void testWifi(){

  WifiManager wifi = (WifiManager)getSystemService(Context.WIFI_SERVICE);
  if (wifi.isWifiEnabled()){
    pd.dismiss();
    //continue code
  }else{
    new Handler().postDelayed(new Runnable() {
      testWifi();
    } , 200);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T12:58:02.957

Use AsyncTask for this. Show your progress bar in OnPreExecute() and do the loading process or something that needs time in doInBackground() and finally dismiss your progress dialog in onPostExecute(). Here is the working sample-

[http://huuah.com/android-progress-bar-and-thread-updating/](http://huuah.com/android-progress-bar-and-thread-updating/)

Hope it will help you

# visual-c++ - 如何判断 Visual Studio 项目文件是代表应用程序、DLL 还是静态库项目？

> ID：14358302
> 
> 赞同：5
> 
> 时间：2013-01-16T12:18:07.517
> 
> 标签：visual-c++, visual-studio-2005, .net-2.0

我正在编写一个工具来检查我的源代码树以查找 .vcproj 和 .csproj 项目（VS2005）。我想让它知道每个项目是应用程序、DLL 还是静态库项目。

对于 C#，我认为这个问题有答案（[How do you tell the Visual Studio project type from an existing Visual Studio project](https://stackoverflow.com/questions/660790/how-do-you-tell-the-visual-studio-project-type-from-an-existing-visual-studio-pr)），但我在 C++ 项目中找不到明显的相似之处。如果可能的话，我更喜欢可以在文本中用作简单搜索词的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T15:53:32.517

您需要解析 .vcproj 文件中的“ConfigurationType”属性。`<VisualStudioProject><Configurations><Configuration>`元素的一个属性。DLL 项目为“2”，静态库项目为“4”。请注意，不同的配置可能对此属性有不同的值，尽管这将是非常不寻常的。

通常，您通过制作 .vcproj 文件的副本对这些内容进行逆向工程，在 Project + Property 页面中进行更改，使用 File + SaveAll 然后比较两个 .vcproj 文件以查看更改的内容。

请注意在 Visual Studio 的旧版本中投入大量精力。八年对于软件工程来说是一段很长的时间，尤其是在 C++11 标准发布之后。C++ 项目文件格式在 VS2010 发生了巨大变化，现在是一个 .vcxproj 文件，它通过支持通过 MSBuild 构建来加入 VS 中的其他语言。当你有一天升级你的 VS 版本时，你一定要重做所有这些。最好现在就这样做，因为以后当您开始依赖您的工具时，这样做肯定不会更容易。

# python - 如何在 Python 中将整个序列推送到 redis

> ID：14358304
> 
> 赞同：11
> 
> 时间：2013-01-16T12:18:14.983
> 
> 标签：python, python-2.7, redis

我可以使用`Redis.rpush('key', 1, 2, 3)`将三个元素推送到redis，但是如果有序列：

```
seq = [1, 2, 3]

Redis.rpush('key', seq) 
```

它会将“seq”元素推送到redis，但不会推送三个数字。有什么办法可以将整个序列推送到redis？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-16T12:19:13.740

你可以使用这个：

```
Redis.rpush('key', *seq) 
```

更多在[SO](https://stackoverflow.com/questions/36901/what-does-double-star-and-star-do-for-python-parameters)。

# ruby-on-rails - 使用 MongoDB (Rails) 时我应该如何设计用户和朋友表

> ID：14358306
> 
> 赞同：3
> 
> 时间：2013-01-16T12:18:21.423
> 
> 标签：ruby-on-rails, mongodb, mongoid

我在一个社交网络项目中工作，建议的数据库是 MongoDB。

我之前从事过各种项目，并在关系数据库系统中设计过数据库，但因为我是 NoSQL db (MongoDB) 的新手。我被设计的东西困住了。

考虑下面的例子，

1）应用程序将有用户和朋友表来保存用户和用户的朋友的数据。

现在，下面的设计是否正确？

**用户：**

```
_id       username password other_fields
----------------------------------------
2gsyexej2 balan    adsfasf  .. 
```

**用户朋友：**

```
_id user_id friends
--------------------
1  2gsyexej2 friends
               - 0 
                 - friend_user_id = asdfdf23adfsasdf
               - 1
                  - friend_user_id = efex89sdfsw0dfssf
                        etc., 
```

在上述模型中，我使用了“手动参考”，从 users 表中获取用户 ID，并将其用作 user_friends 表中的参考。

这种方法正确吗？如果没有，请提出更好的方法。

谢谢，

巴兰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T15:55:16.047

> 一位用户有 30 000 000 个朋友。

严重地？新浪微博中文版推特上最大的追随者，人均追随者数量使Facebook和Twitter相形见绌，单人约2000万。然而，这种情况很少见。

话虽如此，将根文档中的朋友关系作为文档（[http://docs.mongodb.org/manual/core/data-modeling/](http://docs.mongodb.org/manual/core/data-modeling/)）和@jorscas 建议的做法根本不明智。

我可以很容易地想象，随着用户在网站上花费更多时间访问更多朋友关系，文档会以持续快速的速度增长。这会很糟糕，有几个原因，一个是 MongoDB 范围内的空间碎片，两个是因为快速增长的文档可能需要在磁盘上移动，这本身就是一个缓慢而密集的操作。还有更多的原因，但这已经足够了。

您还必须考虑 16meg 的限制，即使 8,000 个连接也会达到该限制。

所以我已经说不要嵌入。你知道在关系模型中设计这个的方式吗？我会这样做，在需要时去规范化，同时规范用户之间的关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T13:59:20.777

为了在 mongodb 中表示用户之间的关系，最自然的方式是在单个用户的集合中使用[引用，如下所示：](http://docs.mongodb.org/manual/applications/database-references/#manual-references)

```
{
 _id: ObjectId("5099803df3f4948bd2f98391"),
 username: "balan",
 password: "adsafs",
 ...
 other fields
 ...
 friends: [ ObjectId("5099803df3f4948bd2f2334445"), ..., ... ],
} 
```

考虑到朋友的数量很大并且`sharding`需要的情况下，以前的结构可能很难找到合适的`shard key`. 在这种情况下，我会使用一个单独的朋友对集合：

```
{
  _id: ObjectId("..."),
  user_id: ObjectId("..."),
  friend_id: ObjectId("...")
} 
```

# c++ - C++ 输入运算符重载

> ID：14358307
> 
> 赞同：4
> 
> 时间：2013-01-16T12:18:24.333
> 
> 标签：c++, class, operator-overloading, inputstream

我正在尝试在我创建的 UserLogin 类上重载输入运算符。不会引发编译时错误，但也不会设置值。

一切都运行了，但 ul 的内容仍然存在： string id is sally 登录时间为 00:00 注销时间为 00:00

入口点

```
#include <iostream>
#include "UserLogin.h"

using namespace std;

int main() {
    UserLogin ul;

    cout << ul << endl; // xxx 00:00 00:00
    cin >> ul; // sally 23:56 00:02
    cout << ul << endl; // Should show sally 23:56 00:02
                        // Instead, it shows xxx 00:00 00:00 again

    cout << endl;
    system("PAUSE");
} 
```

用户登录.h

```
#include <iostream>
#include <string>
#include "Time.h"

using namespace std;

class UserLogin
{
    // Operator Overloaders
    friend ostream &operator <<(ostream &output, const UserLogin user);
    friend istream &operator >>(istream &input, const UserLogin &user);

    private:
        // Private Data Members
        Time login, logout;
        string id;

    public:
        // Public Method Prototypes
        UserLogin() : id("xxx") {};
        UserLogin( string id, Time login, Time logout ) : id(id), login(login), logout(logout) {};
}; 
```

用户登录.cpp

```
#include "UserLogin.h"

ostream &operator <<( ostream &output, const UserLogin user )
{
    output << setfill(' ');
    output << setw(15) << left << user.id << user.login << " " << user.logout;

    return output;
}

istream &operator >>( istream &input, const UserLogin &user )
{
    input >> ( string ) user.id;
    input >> ( Time ) user.login;
    input >> ( Time ) user.logout;

    return input;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T12:22:43.223

你的定义`operator>>`是错误的。您需要`user`通过非常量引用传递参数，并摆脱强制转换：

```
istream &operator >>( istream &input, UserLogin &user )
{
    input >> user.id;
    input >> user.login;
    input >> user.logout;

    return input;
} 
```

演员表使您读入一个临时文件，然后立即将其丢弃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:23:24.940

```
input >> (type) var; 
```

错了，不要这样做。做简单

```
input >> var; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-11-29T07:45:35.480

```
#ifndef STRING_H
#define STRING_H

#include <iostream>
using namespace std;

class String{
    friend ostream &operator<<(ostream&,const String & );

    friend istream &operator>>(istream&,String & );

public:
    String(const char[] = "0");
    void set(const char[]);
    const char * get() const;
    int length();

    /*void bubbleSort(char,int);
    int binSearch(char,char,int);

    bool operator==(const String&);
    const String &operator=(const String &);
    int &operator+(String );*/

private:
        const char *myPtr;
    int length1;

};
#endif 
```

# iphone - 仅允许在 textField 中使用字母

> ID：14358309
> 
> 赞同：2
> 
> 时间：2013-01-16T12:18:29.143
> 
> 标签：iphone, uitextfield, xcode4.5

我想让 UITextField 只接受字符并在输入数字或特殊字符时显示错误。但是当我这样做时，当我输入字母时也会显示错误。不明白我哪里出错了？

```
NSString *FNameReg=@"[A-Za-z]";
NSPredicate *FNametest=[NSPredicate predicateWithFormat:@"SELF MATCHES %@",FNameReg];
 if(![FNametest evaluateWithObject:txtfirstname.text])
    {
        lblvalidateFName.hidden=NO;
        [testScroll setContentOffset:CGPointMake( 0 , 74)];
        return;
    } 
```

但是现在当我给出字母表时也会显示错误。是这样吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T13:26:01.167

创建一种验证方法，如下所示：

```
-(BOOL) validateAlphabets: (NSString *)alpha
{
NSString *abnRegex = @"[A-Za-z]+"; // check for one or more occurrence of string you can also use * instead + for ignoring null value 
NSPredicate *abnTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", abnRegex];
BOOL isValid = [abnTest evaluateWithObject:alpha];
return isValid;
} 
```

现在检查您想要的验证，如下所示：

```
bool checkAlphabets = [self validateAlphabets:txtfirstname.text];

if(!checkAlphabets)
{
   NSLog(@"Not Matches..");
}
else
{
  NSLog(@"Matches..");
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T12:23:11.350

您可以使用以下代码验证字母字符串。

使用`NSPredicate`

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

    return [self validateStringWithAlphabet:string]; 
}

- (BOOL)validateStringWithAlphabet:(NSString *)string {
    NSString *stringRegex = @"[A-Za-z]";
    NSPredicate *stringPredicate = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", stringRegex];

    return [stringPredicate evaluateWithObject:string]; 
} 
```

使用`NSCharacterSet`

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
 {
        if(textField == yourTextField)
        {
            NSCharacterSet *invalidCharSet = [[NSCharacterSet characterSetWithCharactersInString:@"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"] invertedSet];
            NSString *filtered = [[string componentsSeparatedByCharactersInSet:invalidCharSet] componentsJoinedByString:@""];
            return [string isEqualToString:filtered];
        }

        return YES;
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-13T21:42:31.150

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

NSCharacterSet *blockedCharacters = [[NSCharacterSet whitespaceCharacterSet] invertedSet]; NSCharacterSet *blockedCharacters2 = [[NSCharacterSet letterCharacterSet]invertedSet]; 

if([string rangeOfCharacterFromSet:blockedCharacters].location == NSNotFound || [string rangeOfCharacterFromSet:blockedCharacters2].location)
{

 // enter your alert 
[alert show];
}
return ([string rangeOfCharacterFromSet:blockedCharacters].location == NSNotFound || [string rangeOfCharacterFromSet:blockedCharacters2].location) ;

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T12:35:47.627

如果您只想允许字母表，请尝试下面的代码我的朋友。

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{

   NSCharacterSet *nonNumberSet = [[NSCharacterSet characterSetWithCharactersInString:@"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"] invertedSet];

   NSString *trimmedReplacement = [[ text componentsSeparatedByCharactersInSet: nonNumberSet] componentsJoinedByString:@""];

   return ([text stringByTrimmingCharactersInSet:nonNumberSet].length > 0); 

} 
```

让我知道它是否有效！！！！

快乐编码！！！！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-23T10:15:31.990

```
Check this out . First if block for backspace , next if to allow only letters , next if to allow only numbers.

  - (BOOL)textField:(UITextField *)field shouldChangeCharactersInRange:(NSRange)range       replacementString:(NSString *)characters
 {
NSCharacterSet *blockedCharacters = [[NSCharacterSet alphanumericCharacterSet] invertedSet] ;
NSCharacterSet *letters = [NSCharacterSet letterCharacterSet]  ;
NSCharacterSet *numbers = [NSCharacterSet decimalDigitCharacterSet]  ;

NSLog(@"%@",[blockedCharacters description]);

//for allowing backspace.
if([characters isEqualToString:@""])
{
    return true;
}
if(field==self.firstNameTextField || field==self.lastNameTextField || field==self.addrLocalityTextField || field==self.addrRegionField){

    if([characters rangeOfCharacterFromSet:letters].location) {
        [self shakeWithIterations:0 direction:1 size:4 view:field];

        return false;
    }
}

if(field==self.addrPostalCodeTextField || field==self.accountNumTextField || field==self.routingNumTextField ){

    if( field==self.addrPostalCodeTextField ){
    NSUInteger newLength = [addrPostalCodeTextField.text length] + [characters length] - range.length;
    return (newLength > 5) ? NO : YES;
    }
    if([characters rangeOfCharacterFromSet:numbers].location) {
        [self shakeWithIterations:0 direction:1 size:4 view:field];
        return false;
    }
}
 return true;} 
```

# cluster-computing - 如何在两个虚拟机之间设置故障转移集群

> ID：14358316
> 
> 赞同：1
> 
> 时间：2013-01-16T12:18:47.660
> 
> 标签：cluster-computing, windows-server-2008, virtualization, windows-clustering

有谁知道如何在两个虚拟机或 Hypev 之间设置故障转移集群的链接或文档？

我需要 vSphere Client 和 ESX/ESXi 主机吗？我一直在寻找一个清晰的文档，但没有结果

操作系统版本为 Windows Server 2008

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:56:47.347

Xenserver 也支持该功能，但您需要为该功能向 Citrix 付费。

# php - 在 .JS 文件中编写 php while 循环代码

> ID：14358317
> 
> 赞同：0
> 
> 时间：2013-01-16T12:18:56.360
> 
> 标签：php, javascript, loops

在一个 JS 图片幻灯片文件脚本中是这样的

```
slides :    [           // Slideshow Images
                                            {image : 'images/bgslide/r1.jpg', title : '<h1>Välkommen till Restaurangen SPICE</h1> <p>Bokabord/Beställa Online/ Smaka Gott<br><span></span></p>',},
                                            {image : 'images/bgslide/r2.jpg', title : '<h1>Thai Veg-Tallrik</h1> <p>Blandade Thai veg-rätter med sallad. Helgenserbjudande<br> <span>:89 </span></p>',},
                                            {image : 'images/bgslide/r3.jpg', title : '<h1>Välkommen till Restaurangen SPICE</h1> <p>Bokabord/Beställa Online/ Smaka Gott<br> <span></span> </p>',},
                                            {image : 'images/bgslide/r4.jpg', title : '<h1>Dessert</h1> <p>vaniljglass med körsbär<br><span>:59 </span></p>',}
                                    ], 
```

但我想用 php mysql 制作这张幻灯片。想使用while循环。我写的循环代码是

`slides : [ // Slideshow Images <?php $q_f ="SELECT * FROM bgslide order by id" or die($query."<br/>".mysql_error()); $r_f = mysql_query($q_f); $comma=''; while($row = mysql_fetch_array($r_f)) { ?> <?php echo $comma; ?> {image : 'images/bgslide/<?php echo $row["bgimg"]; ?>', title : '<h1><?php echo $row["captitle"]; ?></h1> <p><?php echo $row["capdsc"]; ?><br><span><?php echo $row["price"]; $comma=', '; ?></span></p>',} <?php } ?> ],` 它不工作。任何人都可以帮助我解决这个问题..？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-16T12:28:47.563

Just try this-

```
<?php 
    $q_f ="SELECT * FROM bgslide order by id" or die($query."<br/>".mysql_error()); 
    $r_f = mysql_query($q_f); 
    $slide = ''; 
    while($row = mysql_fetch_array($r_f)) {
        $slide .= "{image : 'images/bgslide/".$row["bgimg"]."', title : '<h1>".$row["captitle"]."</h1> <p>".$row["capdsc"]."<br><span></span></p>',},";
    }
    ?>
slides :    [<?php echo $slide?>], 
```

# jquery - JQuery Countdown 插件（由 Keith Wood 编写）在 chrome 版本 24.0.1312.52 上不起作用

> ID：14358318
> 
> 赞同：8
> 
> 时间：2013-01-16T12:18:58.520
> 
> 标签：jquery, countdown

我一直在使用 Keith Wood 的 jQuery Countdown 插件，它在 Chrome 版本 23 之前一直运行良好。但是，我最近将浏览器升级到版本 24.0.1312.52，现在计时器已停止更新。相反，时间仅在页面刷新时刷新。

相同的插件在 IE 8/9、FF（最新版本）上运行良好。

还有其他人面临这个问题吗？

我访问了插件的主页，但那里的计时器工作得非常好。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-16T22:10:56.877

确保您使用的是 Countdown 插件的 1.6.1 版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-03T15:50:37.633

我在使用 firefox 23 版时遇到了同样的问题。我将 Countdown 插件更新到了 1.6.3 版，现在可以正常工作了。

你可以从这里下载：[JQuery Countdown](http://keith-wood.name/countdown.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T08:46:54.387

我从脚本的缩小版本（jquery.countdown.min.js）更改为普通版本（jquery.countdown.js），倒计时开始了。现在它工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-03T19:23:46.450

刮那个！我刚刚更新到 1.6.2 版，现在可以正常工作了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-10T04:19:13.063

我有一个类似的问题。我的倒计时在任何浏览器上都不起作用。在倒计时脚本之前加载插件脚本似乎解决了我的问题。

# collision-detection - LibGDX - BoundingBox 和 Ray 相交

> ID：14358319
> 
> 赞同：0
> 
> 时间：2013-01-16T12:19:02.107
> 
> 标签：collision-detection, libgdx, intersection

LibGDX 具有`Intersector`包含`intersectRayBoundsFast`函数的类。我想知道怎么用？首先如何像下面这样限制我的飞机？：

![在此处输入图像描述](../Images/5673392eff3834c967fb2c7381237d52.png)

第二个问题是如何正确移动这个`BoundingBox`？没有类似的函数`setPosition`，`rotate`等等。第三个是如何创建正确的`Ray`对象来找到外壳和飞机之间的交点？

![在此处输入图像描述](../Images/69b57fbeb7ad8edcca603d02709e828b.png)

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:00:24.437

通常边界框是粗略的测试。为了测试速度，边界框通常是“轴对齐的”（缩写为“AABB”），特别是这意味着它们不随对象旋转，而是随着包含的对象旋转而调整大小。（您在问题中包含的图像是飞机精灵的 AABB 的合理示例。）

边界框相交测试运行速度很快，因此它们可以消除所有完全不相关的元素，但会留下一组*可能会*被击中的元素。之后，您可以（如果有必要，而且*通常没有必要*）进行更精确的相交测试。例如，基于底层几何或使用基于像素的射线相交。请注意，像素碰撞[在 libGDX 中很复杂](http://code.google.com/p/libgdx/issues/detail?id=350)。

对于您的具体情况，我认为您可以将飞机建模为线。想象一下从机头到机尾画一条线，如果炮弹击中那条线，它就会击中飞机。您实际上并不需要精确的基于像素的碰撞检测（这种方法看起来已经足够好了）。

假设你的壳是垂直移动的，你只需要计算两条线段的交点：[计算交点的高效数学算法](https://stackoverflow.com/questions/385305/efficient-maths-algorithm-to-calculate-intersections)

话虽如此，您甚至可能不需要那么精确，并且可以摆脱基于粗略的 AABB 测试。例如，在底部图像中，虽然外壳实际上还没有与平面相交，但它显然会相交。假设它移动得足够快，玩家将无法分辨。如果您想让游戏更轻松或更宽容，您可以通过使边界框更小一些（也许留下一些框的尾端）来稍微捏造它。

另外，不要使用`Ray`检测交叉点（用于测试触摸点是否与框相交之类的事情）。您应该为外壳使用 AABB，并进行[矩形重叠测试](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/math/Intersector.html)。

# javascript - 弹出窗口打开时将内容加载到弹出框

> ID：14358325
> 
> 赞同：2
> 
> 时间：2013-01-16T12:19:26.553
> 
> 标签：javascript, jquery

我正在使用此脚本在我的网站中有一个带有一些设置的弹出框：

[http://codeissue.com/articles/a04daf3210c8b0a/cross-browser-modal-popup-using-javascript-jquery](http://codeissue.com/articles/a04daf3210c8b0a/cross-browser-modal-popup-using-javascript-jquery)

单击按钮/文本时会打开弹出窗口：

```
<a href="#" onclick="ShowModalPopup('name_of_div_in_popup_box'); return false;">Text</a> 
```

我想知道是否可以将内容（`#name_of_div_in_popup_box`）从外部页面（在同一网站中）加载到弹出框中，而不是将 div 隐藏在带有此弹出框的所有页面中。问题是弹出窗口存在于许多页面中，因此在当前情况下，我必须粘贴`#name_of_div_in_popup_box`到具有弹出窗口的每个页面中，并且在该 div 中进行编辑时，我必须在所有页面中进行编辑。

更容易从外部页面示例 content.html #name_of_div_in_popup_box 将内容加载到弹出框，因此在更改 div 时，我只需在该站点中进行更改。

这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T01:52:29.527

Javascript 无法访问服务器上的其他文件（可能使用 AJAX 除外），因为它是客户端。但是，如果您使用 php 或 shtml 包含，这应该允许您从需要它的网页访问文件，而无需添加完整的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T02:03:22.983

使用 jQuery [.load()](http://api.jquery.com/load/)

```
$('#name_of_div_in_popup_box').load('load_from_this_page.html'); 
```

> 补充说明：
> 
> 由于浏览器安全限制，大部分“Ajax”请求都受同源策略的约束；请求无法从不同的域、子域或协议成功检索数据。

# mysql - MySQL 类别表结构

> ID：14358327
> 
> 赞同：0
> 
> 时间：2013-01-16T12:19:30.797
> 
> 标签：mysql, database, database-design

我需要为具有不同部分的网站设计一个数据库，例如：产品、文章和成员。

这些部门中的每一个都应分为不同的类别，例如：

### 产品类别：

1.  鞋
2.  衬衫
3.  帽子

### 会员类别：

1.  贵宾会员
2.  正式会员
3.  折扣会员

等等..

我的问题是：我应该使用一个大类别表，该表在每一行都有一个标志，指示它是哪种类别（例如`members_category`, `products_category`），还是应该为每个部门使用单独的类别表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:16:12.257

在其他条件相同的情况下，您应该使用单独的类别表。这将使以声明方式强制执行引用完整性变得容易，而不必担心连接到错误的类别。

例如，您可以简单地在 PRODUCT 和 PRODUCT_CATEGORY 表之间创建一个 FOREIGN KEY，在 MEMBER 和 MEMBER_CATEGORY 之间创建一个 FOREIGN KEY，如果您尝试将产品连接到成员类别或将成员连接到产品，数据库将自动“保护”自己类别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:31:19.913

我认为为不同的类别使用不同的表格是个好主意。使用引用（外键）在它们之间进行映射。这样，您的调试将在数据库上变得容易。

如果您在同一个表中管理所有类别，则表的管理很困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:34:32.600

为所有类别类型创建表不是一个好主意。如果要使用一个类别表，则必须为类别类型再创建一个表。

示例->

CategoryType 表 -> ID,Name

1.  产品分类
2.  会员类别

类别表 -> 名称,CategoryTypeID

插入一个类别；

> '鞋子',1（产品类别类型 ID）
> 
> 'VIP会员',2(会员CategoryTypeID)

希望能帮助它

# android - 如何使用 Google MAps API v2 围绕引脚绘制圆圈

> ID：14358328
> 
> 赞同：16
> 
> 时间：2013-01-16T12:19:32.790
> 
> 标签：android, google-maps-api-2

我正在为我的 android 应用程序使用新的 API（Google Map API V2），我已经完成了创建地图并向其添加标记，现在我的任务是手动围绕任何标记创建一个圆圈，并且我想提供一个向用户提供的功能是他可以相应地增加该圆的半径，为此我给出了一个条，当用户增加该条时，圆的半径将增加，反之亦然。

如果有人知道如何使用 Google Map API V2 执行此操作，请提供帮助，

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-17T12:36:28.903

我也一直在努力，我找到了以下解决方案。它仍然不完美，因为我必须制作一个非常大的 Canvas 以防止圆的边缘变得模糊。

```
private void addCircleToMap() {

    // circle settings  
    int radiusM = // your radius in meters
    double latitude = // your center latitude
    double longitude = // your center longitude
    LatLng latLng = new LatLng(latitude,longitude);

    // draw circle
    int d = 500; // diameter 
    Bitmap bm = Bitmap.createBitmap(d, d, Config.ARGB_8888);
    Canvas c = new Canvas(bm);
    Paint p = new Paint();
    p.setColor(getResources().getColor(R.color.green));
    c.drawCircle(d/2, d/2, d/2, p);

    // generate BitmapDescriptor from circle Bitmap
    BitmapDescriptor bmD = BitmapDescriptorFactory.fromBitmap(bm);

// mapView is the GoogleMap
    mapView.addGroundOverlay(new GroundOverlayOptions().
            image(bmD).
            position(latLng,radiusM*2,radiusM*2).
            transparency(0.4f));
} 
```

-- 编辑 -- Google 更新了 API。您现在可以轻松地在地图中添加一个圆圈： [https ://developers.google.com/maps/documentation/android/shapes?hl=nl#circles](https://developers.google.com/maps/documentation/android/shapes?hl=nl#circles)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-31T08:33:13.087

Google 制作的地图 v2 很简单。下面的代码片段演示了绘制标记和圆圈以及一起更新它们的位置。

```
private Circle mCircle;
private Marker mMarker;
private GoogleMap mGoogleMap;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mGoogleMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.mapFragment)).getMap();
    mGoogleMap.setMyLocationEnabled(true);
    mGoogleMap.setOnMyLocationChangeListener(new GoogleMap.OnMyLocationChangeListener() {
        @Override
        public void onMyLocationChange(Location location) {
            LatLng latLng = new LatLng(location.getLatitude(), location.getLongitude());
            if(mCircle == null || mMarker == null){
                drawMarkerWithCircle(latLng);
            }else{
                updateMarkerWithCircle(latLng);
            }
        }
    });
}

private void updateMarkerWithCircle(LatLng position) {
    mCircle.setCenter(position);
    mMarker.setPosition(position);
}

private void drawMarkerWithCircle(LatLng position){
    double radiusInMeters = 100.0;
    int strokeColor = 0xffff0000; //red outline
    int shadeColor = 0x44ff0000; //opaque red fill

    CircleOptions circleOptions = new CircleOptions().center(position).radius(radiusInMeters).fillColor(shadeColor).strokeColor(strokeColor).strokeWidth(8);
    mCircle = mGoogleMap.addCircle(circleOptions);

    MarkerOptions markerOptions = new MarkerOptions().position(position);
    mMarker = mGoogleMap.addMarker(markerOptions);
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-07-13T09:49:28.483

这个更好：

```
 double radiusInMeters = 100.0;
     //red outline
    int strokeColor = 0xffff0000;
    //opaque red fill
    int shadeColor = 0x44ff0000; 

    CircleOptions circleOptions = new CircleOptions().center(position).radius(radiusInMeters).fillColor(shadeColor).strokeColor(strokeColor).strokeWidth(2);
    mCircle = map.addCircle(circleOptions);

    MarkerOptions markerOptions = new MarkerOptions().position(position);
    mMarker = map.addMarker(markerOptions); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-08-22T07:31:43.097

也许可以帮助您：

```
 GoogleMap map;
 // ... get a map.
 // Add a circle in Sydney
 Circle circle = map.addCircle(new CircleOptions()
     .center(new LatLng(-33.87365, 151.20689))
     .radius(10000)
     .strokeColor(Color.RED)
     .fillColor(Color.BLUE)); 
```

从这里 ：

[这里](https://developers.google.com/android/reference/com/google/android/gms/maps/model/Circle)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-08T13:00:23.760

使用此方法，您可以选择任何标记，它将为特定标记创建圆形对象。您可以通过将标记对象和半径值传递给 createCircle() 方法来动态更改圆的半径。

```
 private GoogleMap mMap;
    /*Create circle objects*/
    Circle currentCircle;
     /**
     * create circle when user want to set region
     * @param currentMarker this is user selected marker
     * @param radius pass radius value to circle object
     */
    private void createCircle(Marker currentMarker ,Double radius){

          //check circle is exist or not 
               //if exist remove
               if(currentCircle!=null){
                 currentCircle.remove();
                 }
        currentCircle=mMap.addCircle(new CircleOptions().center(currentMarker.getPosition()).radius(radius)
            .strokeColor(Color.parseColor("#FF007A93"))
            .fillColor(Color.parseColor("#40007A93"))
            .strokeWidth(2));
        float zoomLevel = getZoomLevel(radius);
        mMap.animateCamera(CameraUpdateFactory.newLatLngZoom(currentMarker.getPosition(), zoomLevel));
    } 
```

# c++ - 为什么只接受我密钥中的前 2 个字符？C++

> ID：14358329
> 
> 赞同：-2
> 
> 时间：2013-01-16T12:19:37.790
> 
> 标签：c++, visual-studio-2010, visual-c++

在Visual Studio 2010专业版的ac ++项目中插入密钥时遇到一个小问题。

当我放键时，只接受前两个键，当你放一个以前两个字符开头的类似键时，这可能是个问题。

但是，当我将密钥直接放入十六进制字符时，会验证所有内容。

我提前说清楚了，我学c++知道的很少，这就是我目前所做的。

```
 //****************** AES decryption ********************
const int size = 32;
unsigned char aesKey[size];
char* p;

for (int i = 1; i < argc || i < size; ++i)
{
    aesKey[i] = (unsigned char)strtol(argv[2], &p, 16);
} 

unsigned char *buf;

aes256_context ctx;
aes256_init(&ctx, aesKey);

for (unsigned long i = 0; i < lSize/16; i++) {
    buf = text + (i * 16);
    aes256_decrypt_ecb(&ctx, buf);
}

aes256_done(&ctx);
//****************************************************** 
```

我有参数 argv[2] 的地方是因为我必须使用参数 2

任何建议或想法，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:33:58.333

这段代码可以有很多修复，但这是我能看到的基本

```
//****************** AES decryption ********************
const int size = 32;
unsigned char aesKey[size];
char* p;

//check you have argv[2]
if (argc < 3)
{
    //TODO: return or handle the error as you wish...
}

//i need to start from 0 (it's a zero base index)
//argc = argument count. and this should not be here
//you have 3 arguments and this is why it read 2 chars...
for (int i = 0;i < size; ++i)
{
    aesKey[i] = (unsigned char)strtol(argv[2], &p, 16);
} 

unsigned char *buf;

aes256_context ctx;
aes256_init(&ctx, aesKey);

//I don't know where lsize is coming from but I would calculate the division out side:
unsigned long myMax = lSize/16;
for (unsigned long i = 0; i < myMax; i++) {
    buf = text + (i * 16);
    aes256_decrypt_ecb(&ctx, buf);
}

aes256_done(&ctx);
//****************************************************** 
```

# php - PHP imagecreatefromgif() 总是返回 false

> ID：14358330
> 
> 赞同：1
> 
> 时间：2013-01-16T12:19:41.577
> 
> 标签：php, image, fpdf

我正在使用 FPDF 生成 PDF 并出现以下错误

```
 FPDF error: Missing or incorrect image file 
```

我之前的猜测是我的 GIF 图像有问题，现在我正在使用 PHP 函数验证我的图像

```
image_type_to_extension() 
```

返回 gif。

所以我不知道为什么

```
imagecreatefromgif() 
```

返回 false，导致 FPDF 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:27:13.727

函数 imagecreatefromgif() 需要一个图像路径为 imagecreatefromgif("/var/www/image.gif");

你发送完整路径吗？

尝试

```
if(file_exists($fullPath))
{
 $image = imagecreatefromgif($fullPath));
}
else
  die("Image Not found"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:28:50.270

包括说明问题的简短程序的完整源文件。这样我们中的一个人可能会更改路径名并运行它以查看它是否有效。

顺便说一句，如果 PHP 正在由 HTTP 服务器执行，则绝对路径名将不起作用。为此，图像必须位于网站内的路径中。

# php - 用于 Android 应用程序的 Web 服务，用于在其中搜索和选择文件

> ID：14358334
> 
> 赞同：0
> 
> 时间：2013-01-16T12:19:55.757
> 
> 标签：php, android, web-services, dropbox

我开发了一个专门的 Android 应用程序，其操作部分依赖于第三方生成的文件。这些文件基本上包含应用程序为了使用外部硬件设备而需要的配置脚本。硬件的不同变体具有独特的脚本文件，因此更新和新脚本非常频繁。迄今为止，只需将脚本文件与应用程序捆绑在一起并在新脚本可用时推出频繁的应用程序更新就足够了。但是，更理想的解决方案是让应用程序从 Web 服务中获取适当的文件，如果该文件在设备本地不可用。

目前不存在用于获取这些文件的在线 Web 服务，因此我将自己创建它，并且我将手动将文件放置到服务器上。

要找到合适的文件，应用程序需要匹配文件中的特定*字符串*。因此，给定一个文本字符串（将在查询字符串中提供 - 类似于`findfile.php?identifier=fredbloggs`），Web 服务需要搜索所有保存的文件并返回一个包含该字符串的文件，或者指示未找到该资源.

我以前没有做过很多 PHP，但我的目的是拼凑一个简单的 PHP 脚本，当请求时，它最初会读取并缓存来自服务器上所有脚本的标识符字符串，然后返回包含匹配的标识符字符串。

我的问题是，现在有没有更好、更简单或更“时尚”的方法来解决这样的问题？例如，有没有一种方法可以使用 Dropbox，或者是否有其他现有的在线存储服务已经提供了一个方便的 API 来完成这一切，从而节省我自己编写 PHP 服务的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:15:48.530

我建议您始终计划扩展能力，而不是寻找更简单/时尚的方式。

您可能应该使用 MySQL 数据库来存储关键字和相应文件的路径以提供服务。（可以手动填充此数据库/或手动在服务器上运行脚本）。当您需要获取脚本时，您可以调用 Web 服务来查询数据库、获取正确的文件并提供服务。这也是推荐的，因为将来您可能有一些与脚本相关的其他数据要查找（比如脚本版本号，也许？）。遍历所有可用的脚本将是低效的。

处理 PHP 和 mySQL 真的很简单，通过 w3schools 课程运行可以让你了解。

# python - 优雅地打乱列表

> ID：14358342
> 
> 赞同：1
> 
> 时间：2013-01-16T12:20:30.090
> 
> 标签：python

> **可能重复：**
> [使用 python 随机排列数组](https://stackoverflow.com/questions/473973/shuffle-an-array-with-python)

假设我有一个列表`myList=[1,2,3,4,5]`，我想随机打乱它：

```
disorder(myList) # myList is something like [5,3,2,1,4] or [3,5,1,2,4] now 
```

我使用的方式是

```
from random import randint
upperBound = len(myList)-1
for i in range(10):
    myList.insert(randint(0, upperBound), myList.pop(randint(0, upperBound))) 
```

这行得通，但我认为这显然不优雅。我想知道是否有一种优雅而有效的方式来实现我的目标。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T12:21:54.863

用于`random.shuffle()`就地打乱列表：

```
>>> import random
>>> l = range(10)
>>> l
    [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> random.shuffle(l)
>>> l
    [0, 2, 8, 7, 9, 1, 3, 4, 6, 5] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-16T12:21:32.773

如果您已经随机导入：

```
random.shuffle(myList) 
```

它洗牌`myList`就地。这意味着你只需要运行这个命令，不要使用这个函数的返回值，它总是`None`.

# php - 如何构建包含文件夹结构的数组？

> ID：14358346
> 
> 赞同：2
> 
> 时间：2013-01-16T12:20:40.870
> 
> 标签：php, json

我想构建一个 Json 输出来列出 ExtJS 树面板中的文件夹结构。该结构应该等同于 Json 中的这个数组：

```
Array
(
    [text] => .
    [children] => Array
        (
            [0] => Array
                (
                    [text] => files
                    [children] => 
                )

            [1] => Array
                (
                    [text] => folder 1
                    [children] => 
                )

            [2] => Array
                (
                    [text] => New directory
                    [children] => array(
                        [0] => Array
                            (
                                [text] => sub_1
                                [children] => array(
                                    [0] => Array
                                        (
                                            [text] => sub_1_1
                                            [children] => 
                                        )
                                    [1] => Array
                                        (
                                            [text] => sub_1_2
                                            [children] => 
                                        )                                    
                                )
                            )
                        [1] => Array
                            (
                                [text] => sub_2
                                [children] => 
                            )                             
                    )
                )    
        )    
) 
```

我制作了这个函数，通过 PHP 手册和示例显示结构

```
listFolders('../file_uploads/');
function listFolders($dir){
    $dh = scandir($dir);
    echo '<ul>';
    foreach($dh as $folder){
        if($folder != '.' && $folder != '..')
        {
            if(is_dir($dir.'/'.$folder)){
                echo '<li>'.$folder.'</li>';
                listFolders($dir.'/'.$folder);
            }
        }
    }
    echo '</ul>';
} 
```

这输出结构

*   新目录

*   sub_1

*   sub_1_1

*   sub_1_1_1

*   sub_1_2

*   sub_2

*   文件

*   文件夹 1

我想知道如何将此输出转换为上面的数组（或 Json）？

**解决方案**

```
print "<pre>";
print_r(listFolders('../file_uploads/'));

function listFolders($dir)
{
    $dh = scandir($dir);
    $return = array();

    foreach ($dh as $folder) {
        if ($folder != '.' && $folder != '..') {
            if (is_dir($dir . '/' . $folder)) {
                $return[] = array(
                    'text' => $folder,
                    'children' => listFolders($dir . '/' . $folder)
                );
            }
        }
    }
    return $return;
} 
```

![在此处输入图像描述](../Images/d96c0a845c2ef9d4af293ce41d06de05.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T12:29:55.487

试试下面的代码：

```
function listFolders($dir)
{
    $dh = scandir($dir);
    $return = array();

    foreach ($dh as $folder) {
        if ($folder != '.' && $folder != '..') {
            if (is_dir($dir . '/' . $folder)) {
                $return[] = array($folder => listFolders($dir . '/' . $folder));
            } else {
                $return[] = $folder;
            }
        }
    }
    return $return;
} 
```

似乎对我有用，但没有正确测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:22:42.897

首先创建一个数组。对于每个创建的目录，使用 array_push 到数组？

[另请查看http://php.net/manual/en/function.scandir.php](http://php.net/manual/en/function.scandir.php)上的评论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T12:32:31.333

```
<?php
error_reporting(0);

$array_folders  = listFolders('../file_uploads/');
echo "<pre>";
print_r($array_folders);

function listFolders($dir){
    global $ret_array;
    $dh = scandir($dir);
    foreach($dh as $folder){
        if($folder != '.' && $folder != '..')
        {
            if(is_dir($dir.'/'.$folder)){
                $ret_array[$dir][]  = $folder;
                listFolders($dir.'/'.$folder);
            }
        }
    }
    return $ret_array;
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-23T18:21:49.400

我认为您正在寻找递归目录列表。使用下面的代码，希望对您有所帮助。这个对我有用。

```
<?php
/**
 * Function for recursive directory file list search as an array.
 *
 * @param mixed $dir Main Directory Path.
 *
 * @return array
 */
function listFolderFiles($dir)
{
    $fileInfo     = scandir($dir);
    $allFileLists = [];

    foreach ($fileInfo as $folder) {
        if ($folder !== '.' && $folder !== '..') {
            if (is_dir($dir . DIRECTORY_SEPARATOR . $folder) === true) {
                $allFileLists[$folder . '/'] = listFolderFiles($dir . DIRECTORY_SEPARATOR . $folder);
            } else {
                $allFileLists[$folder] = $folder;
            }
        }
    }

    return $allFileLists;
}//end listFolderFiles()

$dir = listFolderFiles('your searching directory path ex:-F:\xampp\htdocs\abc');
echo '<pre>';
print_r($dir);
echo '</pre>'

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-27T14:53:37.017

要获得完全相同的结果，请遵循以下代码

```
function listFolderFiles($dir){
    $ffs = scandir($dir);

    unset($ffs[array_search('.', $ffs, true)]);
    unset($ffs[array_search('..', $ffs, true)]);

    // prevent empty ordered elements
    //if (count($ffs) < 1)
    //    return;

    $dirStrArr = array();
    foreach($ffs as $ff){
        if(is_dir($dir.'/'.$ff)) {
            $dirStrArr[]=array('parent' => $ff, 'children' => listFolderFiles($dir . '/' . $ff));
        }else{
            $dirStrArr[]=$ff;
        }
    }
    return $dirStrArr;
} 
```

或者要获取文件夹名称作为索引和索引数组中的子详细信息，您可以按照以下代码进行操作

```
function listFolderFiles($dir){
    $ffs = scandir($dir);

    unset($ffs[array_search('.', $ffs, true)]);
    unset($ffs[array_search('..', $ffs, true)]);

    // prevent empty ordered elements
    //if (count($ffs) < 1)
    //    return;

    $dirStrArr = array();
    foreach($ffs as $ff){
        if(is_dir($dir.'/'.$ff)) {
            $dirStrArr[$ff]=listFolderFiles($dir . '/' . $ff);
        }else{
            $dirStrArr[]=$ff;
        }
    }
    return $dirStrArr;
} 
```

# java - 右对齐图像上的文本

> ID：14358349
> 
> 赞同：2
> 
> 时间：2013-01-16T12:20:47.620
> 
> 标签：java, graphics, 2d, awt, fontmetrics

```
 Graphics g = image.getGraphics(); 
     FontMetrics fm = g.getFontMetrics();
      int actual_width= fm.stringWidth("My Value");
     drawString("My Value",total_width-actual_width,ypos);
    g.dispose();
    ImageIO.write(image, "bmp", new File(c:\\output.bmp)); 
```

如何使这个**正确对齐**？

**实际输出**

![在此处输入图像描述](../Images/5f6061b2dabac133e743d83b02acbfb1.png)

**所需输出**

![在此处输入图像描述](../Images/9b4d69587e508153cc633e7e57f8ca5b.png)

输出：-

```
System.out.println("total_width=" + image.getWidth() + " actual_width=" + actual_width);

    total_width=352 actual_width=46
    total_width=352 actual_width=38
    total_width=352 actual_width=68
    total_width=352 actual_width=73
    total_width=352 actual_width=36 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T12:22:23.863

这是一个小型[SSCCE](http://sscce.org/)，演示了您的问题的解决方案：

```
import javax.swing.*;
import java.awt.*;
import java.awt.image.*;

public class Test extends JFrame{

    public static void main(String [] args){
        new Test();
    }

    private Test(){
        final BufferedImage img = new BufferedImage(300, 300, BufferedImage.TYPE_INT_ARGB);
        Graphics g = img.createGraphics();
        g.setColor(Color.BLACK);

        int total_width = img.getWidth();
        int y = 30;
        int padding = 100;

        String [] words = new String[]{"Example", "Of", "Right", "Alignment"};
        for(int i = 0; i < words.length; i++){
            int actual_width = g.getFontMetrics().stringWidth(words[i]);
            int x = total_width - actual_width - padding;
            g.drawString(words[i], x, y += 30);
        }
        g.dispose();

        setContentPane(new JPanel(){
            public void paintComponent(Graphics g){
                super.paintComponent(g);
                g.drawImage(img, 0, 0, null);
            }
        });

        setSize(300,300);
        setResizable(false);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }
} 
```

# java - 谷歌 GSON 嵌套 HashMaps 反序列化

> ID：14358350
> 
> 赞同：14
> 
> 时间：2013-01-16T12:20:53.023
> 
> 标签：java, json, gson

在我当前的项目中，我在 android 中使用 GSON 库，并且遇到了嵌套 Maps 反序列化的问题。这就是初始 json 的样子

```
 {

"5":{
    "id":5,
    "name":"initial name",
    "image_url":"uploads/71d44b5247cc1a7c56e62fa51ca91d9b.png",
    "status":"1",
    "flowers":{
        "7":{
            "id":7,
            "category_id":"5",
            "name":"test",
            "description":"some description",
            "price":"1000",
            "image_url":"uploads/test.png",
            "status":"1",
            "color":"red",

        }
    }
  }
 } 
```

还有我的pojo

```
class Category {
long id;
String name;
String image_url;
HashMap<String,Flower> flowers;
} 
```

和花类

```
class Flower {
long id;
String category_id;
String name;
String description;
String price;
String image_url;
String status;
} 
```

但是当我尝试反序列化这些对象时，我可以访问嵌套的哈希图，示例代码是

```
public class TestJson {
public static void main(String[] args) {
  Gson gson = new Gson();
    try {
    BufferedReader br = new BufferedReader(
        new FileReader("2.txt"));
    HashMap<String,Category> map = gson.fromJson(br, HashMap.class);
    Collection<Category> asd = map.values();
            System.out.println(map.values());

       } catch (IOException e) {
        e.printStackTrace();
       }

    }
 } 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-16T12:50:07.160

这`gson.fromJson(br, HashMap.class);`告诉 Gson 你想反序列化为一个未知值类型的 Map。你会很想指定类似的东西`Map<String,Category>.class`，但你不能在 Java 中这样做，所以解决方案是在 Gson 中使用他们所谓的 TypeToken。

```
Map<String, Category> categoryMap = gson.fromJson(br, new TypeToken<Map<String, Category>>(){}.getType()); 
```

# php - 如何在管理员中向 magento 销售电子邮件添加块

> ID：14358353
> 
> 赞同：0
> 
> 时间：2013-01-16T12:21:06.033
> 
> 标签：php, magento-1.7, magento

我想在magento管理员的销售电子邮件页面中添加一个非常类似于订单或订单评论的部分/块，但我从未找到与之相关的模板文件。任何人都请解释或粘贴链接，以便我弄清楚页面是如何处理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:36:20.233

为此，我在 code/Mage/Sales/etc/system.xml 中包含了与订单、订单注释部分相同的 XML。

1.  打开 system.xml 文件。
2.  搜索 sales_email。
3.  此标签之间的所有 XML 都与 Admin 的 sales_email 页面相关。
4.  复制 XML 标记并根据需要进行修改。

新块中的字段和值将保存到 core_config_data。从那里您可以查询字段值。

# android - 从相机活动中获取照片并显示在 mainactivity，android

> ID：14358357
> 
> 赞同：0
> 
> 时间：2013-01-16T12:21:40.270
> 
> 标签：android, android-camera

我想创建自己的相机应用程序。主要活动有一个按钮，单击该按钮时，它将转到相机活动（带有预览和“拍摄”按钮）。一旦我按下“拍摄”按钮，照片就会被拍摄。拍摄的照片将返回到主要活动并显示在图像视图中。问题是，我不知道如何将照片从相机活动传回主要活动。希望有人能给出提示或例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:40:41.153

的确！你必须用 发送相机意图`startActivityForResult`，看看下面的代码：

定义要存储图像的路径：

```
 String filepath = Environment.getExternalStorageDirectory()+"/foldername/"+filename;
 File file = new File(_path);
Uri outputFileUri = Uri.fromFile(file); 
```

*相机意图*

```
Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
            startActivityForResult(intent, 1212); 
```

*覆盖 startActivityForResult*

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

            if (requestCode == 1212) {
            //here you can decode your path and use for displaying an image. 
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:41:21.827

在按钮单击事件上使用以下代码

```
 Intent action = new Intent("android.media.action.IMAGE_CAPTURE");
 action.putExtra(MediaStore.EXTRA_OUTPUT,MediaStore.Images.Media.EXTERNAL_CONTENT_URI.toString());
startActivityForResult(action,TAKE_PICTURE_FROM_CAMERA); 
```

你必须使用

```
public void onActivityResult(int reqCode, int resultCode, Intent data) {
    super.onActivityResult(reqCode, resultCode, data);

}

if (resultCode == Activity.RESULT_OK) {
                uri = data.getData();
                try {
                    photoBitMap = (Bitmap) data.getExtras().get("data");
                    int h = 100; // height in pixels
                    int w = 100; // width in pixels
                    photoBitMap = Bitmap.createScaledBitmap(photoBitMap, h, w,
                            true);

                    uri = Uri.parse(android.provider.MediaStore.Images.Media
                            .insertImage(getContentResolver(), photoBitMap,
                                    null, null));
                    Bitmap usableBMP = Bitmap.createScaledBitmap(photoBitMap,
                            68, 80, true);

                    if (!Calculations.encodeImageToBase64(photoBitMap).equals(
                            "")
                            && Calculations.encodeImageToBase64(photoBitMap) != null) {
                        // userPhoto.setImageBitmap(usableBMP);
                        userPhoto.setImageBitmap(Calculations
                                .getRoundedCornerBitmap(this, usableBMP));

                    } else {
                        userPhoto.setImageBitmap(null);
                        userPhoto.setImageResource(R.drawable.default_user_img);
                        Toast.makeText(RegisterActivity.this,
                                getString(R.string.imageSizeValidation),
                                Toast.LENGTH_SHORT).show();
                    }
                    userPhoto.setScaleType(ScaleType.FIT_XY);
                } catch (Exception e) {
                    e.printStackTrace();
                } catch (OutOfMemoryError e) {
                    e.printStackTrace();
                    Toast.makeText(RegisterActivity.this,
                            getString(R.string.imageSizeValidation),
                            Toast.LENGTH_SHORT).show();
                }
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T13:29:48.237

嗨，请尝试使用此代码。

```
package com.example.stackoverflow;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.math.BigInteger;
import java.security.SecureRandom;
import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.view.KeyEvent;
import android.view.View;
import android.widget.Button;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.Toast;

public class MyCameraActivity extends Activity {
    private static final int CAMERA_REQUEST = 1888; 

    static String str_Camera_Photo_ImagePath = "";
    private static File f;
    private static int Take_Photo = 2;
    private static String str_randomnumber = "";
    static String str_Camera_Photo_ImageName = "";
    public static String str_SaveFolderName;
    private static File wallpaperDirectory;
    Bitmap bitmap;
    int storeposition = 0;
    public static GridView gridview;
    public static ImageView imageView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.ccccc);
        this.imageView = (ImageView)this.findViewById(R.id.imageView1);
        Button photoButton = (Button) this.findViewById(R.id.button1);
        photoButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                str_SaveFolderName = Environment
                        .getExternalStorageDirectory()
                        .getAbsolutePath()
                        + "/rajeshsample";
                str_randomnumber = String.valueOf(nextSessionId());
                wallpaperDirectory = new File(str_SaveFolderName);
                if (!wallpaperDirectory.exists())
                    wallpaperDirectory.mkdirs();
                str_Camera_Photo_ImageName = str_randomnumber
                        + ".jpg";
                str_Camera_Photo_ImagePath = str_SaveFolderName
                        + "/" + str_randomnumber + ".jpg";
                System.err.println(" str_Camera_Photo_ImagePath  "
                        + str_Camera_Photo_ImagePath);
                f = new File(str_Camera_Photo_ImagePath);
                startActivityForResult(new Intent(
                        MediaStore.ACTION_IMAGE_CAPTURE).putExtra(
                        MediaStore.EXTRA_OUTPUT, Uri.fromFile(f)),
                        Take_Photo);
                System.err.println("f  " + f);
            }
        });
    }

    // used to create randon numbers
    public String nextSessionId() {
        SecureRandom random = new SecureRandom();
        return new BigInteger(130, random).toString(32);
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        // TODO Auto-generated method stub
        if (event.getAction() == KeyEvent.ACTION_DOWN) {
            switch (keyCode) {
            case KeyEvent.KEYCODE_HOME:
                finish();
                Toast.makeText(getApplicationContext(), "TTTTTTTTTTTT", Toast.LENGTH_LONG).show();
                return true;
            }
        }

        return super.onKeyDown(keyCode, event);
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
        if (requestCode == Take_Photo) {
            String filePath = null;

            filePath = str_Camera_Photo_ImagePath;
            if (filePath != null) {
                Bitmap faceView = ( new_decode(new File(
                                filePath))); // ========================> good
                                                // lines

                imageView.setImageBitmap(faceView);

            } else {
                bitmap = null;
            }
        }
    } 

    public static Bitmap new_decode(File f) {

        // decode image size

        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        o.inDither = false; // Disable Dithering mode

        o.inPurgeable = true; // Tell to gc that whether it needs free memory,
                                // the Bitmap can be cleared

        o.inInputShareable = true; // Which kind of reference will be used to
                                    // recover the Bitmap data after being
                                    // clear, when it will be used in the future
        try {
            BitmapFactory.decodeStream(new FileInputStream(f), null, o);
        } catch (FileNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        // Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE = 300;
        int width_tmp = o.outWidth, height_tmp = o.outHeight;
        int scale = 1;
        while (true) {
            if (width_tmp / 1.5 < REQUIRED_SIZE && height_tmp / 1.5 < REQUIRED_SIZE)
                break;
            width_tmp /= 1.5;
            height_tmp /= 1.5;
            scale *= 1.5;
        }

        // decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        // o2.inSampleSize=scale;
        o.inDither = false; // Disable Dithering mode

        o.inPurgeable = true; // Tell to gc that whether it needs free memory,
                                // the Bitmap can be cleared

        o.inInputShareable = true; // Which kind of reference will be used to
                                    // recover the Bitmap data after being
                                    // clear, when it will be used in the future
        // return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        try {

//          return BitmapFactory.decodeStream(new FileInputStream(f), null,
//                  null);
            Bitmap bitmap= BitmapFactory.decodeStream(new FileInputStream(f), null, null);
            System.out.println(" IW " + width_tmp);
            System.out.println("IHH " + height_tmp);           
               int iW = width_tmp;
                int iH = height_tmp;

               return Bitmap.createScaledBitmap(bitmap, iW, iH, true);

        } catch (OutOfMemoryError e) {
            // TODO: handle exception
            e.printStackTrace();
            // clearCache();

            // System.out.println("bitmap creating success");
            System.gc();
            return null;
            // System.runFinalization();
            // Runtime.getRuntime().gc();
            // System.gc();
            // decodeFile(f);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return null;
        }

    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T12:32:54.763

通过路径将意图发送到相机屏幕。图像将被捕获并存储在该路径上。

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
           if (!APP_FILE_PATH_Media.exists()) 
          {
               APP_FILE_PATH_Media.mkdirs();
          }
         uriSavedImage =new File(APP_FILE_PATH_Media+ "/" +
                    "IMG_"+ getTimeStamp() + ".jpeg");
       cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(uriSavedImage));
       startActivityForResult(cameraIntent, CAMERA_REQUEST); 
```

现在，当您单击 take 时，它​​将调用主 Activity 的 onActivityResult 方法。在 OnActivityResult 中：

```
path=uriSavedImage.getAbsolutePath(); 
```

您可以使用此路径来显示图像。

# ios - 从 Titanium 中的 UTC 时间获取设备时间/本地时间

> ID：14358365
> 
> 赞同：1
> 
> 时间：2013-01-16T12:22:01.213
> 
> 标签：ios, datetime, titanium, titanium-mobile

我正在开发一个 Titanium 应用程序。我想在其中取当地时间。我的问题是，当我使用：

```
var currentDateTime = new Date(); 
```

它显示**UTC 时间**。

反正有没有获得当前的本地时间或设备时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:22:01.213

我使用该`getTimezoneOffset`功能解决了这个问题。

我写了一个**以UTC时间为参数并返回本地时间的方法**

```
//Function Processes the passed UTC time and returns the current device time.
function changeUTCToLocal(utcTime)
{
    var offset = utcTime.getTimezoneOffset();
    var localTime = utcTime + offset;
    return localTime;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:38:10.243

获取与 GMT 时间的时间间隔以及当前本地时间与 GMT 的偏移量，将它们相加得到与本地时间的实时间隔：

假设 timeInterval 是 GMT 的 NSInteger 毫秒时间，使用以下获取偏移量

```
 NSInteger millisecondsFromGMT = 1000 * [[NSTimeZone localTimeZone] secondsFromGMT]; 
```

现在添加这两个以获得实时间隔

```
NSInteger realTimeInterval = timeInterval + millisecondsFromGMT ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:51:18.520

我认为 moment.js 也可以解决这个问题

# c# - 如何使用 Lambda 语法从列表中删除

> ID：14358372
> 
> 赞同：24
> 
> 时间：2013-01-16T12:22:12.677
> 
> 标签：c#, list, lambda

鉴于：

```
List<Name> names = new List<Name>(); //list full of names

public void RemoveName(string name) {
   List<Name> n = names.Where(x => x.UserName == name);;
   names.Remove(n);
} 
```

执行删除的 Lambda 语法是什么？

如果该功能是否删除，我如何获得“成功”的指示？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-16T12:23:05.983

```
names.RemoveAll(x => x.UserName == name); 
```

请注意，所有*lambda 语法*所做的只是提供一个`Predicate<T>`; lambda 语法与它最终对 lambda*所做*的事情完全无关。

或单场比赛（见评论）：

```
var found = names.Find(x => x.UserName == name);
if(found != null) names.Remove(found); 
```

或者：

```
var index = names.FindIndex(x => x.UserName == name);
if(index >= 0) names.RemoveAt(index); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T12:25:56.560

```
var n = names.SingleOrDefault(x => x.UserName == name)
if(n != null && n.UserName.length > 0)
{
 names.Remove(n);
} 
```

或者

```
var n= names.Where(x => x.UserName == name).First();
names.Remove(n) 
```

# eclipse - Eclipse：在视图中启用从右到左

> ID：14358374
> 
> 赞同：1
> 
> 时间：2013-01-16T12:22:17.440
> 
> 标签：eclipse, right-to-left

是否可以从右到左显示视图（例如任务）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:26:51.930

是的。
在“查看菜单”选项“配置列”下的“任务”视图中。将允许您更改列的顺序，以便您可以将其显示为从右到左。
**要查找查看菜单，请参见下图。** ![在此处输入图像描述](../Images/31ee1ce860cae08eecf31c9fac2df9de.png)

# android - 如何进入列表视图对话框

> ID：14358377
> 
> 赞同：1
> 
> 时间：2013-01-16T12:22:26.017
> 
> 标签：android, android-layout, listview, dialog

我的列表视图出现错误，我尝试了很多方法。我没明白。我错过了什么？我应该做哪些改变？如果我在没有对话的情况下尝试使用 arrayadapter 成功运行。我是android的新手。我提前非常感谢..

**代码-**

```
 LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            viewList = Topic.this.getLayoutInflater().inflate(R.layout.list_row, null);
            dialogMarketList = new Dialog(Topic.this);
        dialogMarketList.requestWindowFeature(Window.FEATURE_NO_TITLE);
            dialogMarketList.setContentView(viewList);      
            dialogMarketList.show();
            Display newDisplay = getWindowManager().getDefaultDisplay(); 
            int width = newDisplay.getWidth();
        lvForDialog = (ListView) viewList.findViewById(R.id.ListView);
       ArrayAdapter<String> adapter =(new ArrayAdapter<String>(Topic.this,R.layout.topic_row,R.id.childname, groupnamelist));
       lvForDialog.setAdapter(adapter);
    //   lv = (ListView) findViewById(R.id.ListView);
     //   ArrayAdapter<String>adapter=new ArrayAdapter<String>(Topic.this,android.R.layout.simple_list_item_1,groupnamelist);
     //   lv.setAdapter(adapter);
        lvForDialog.setOnItemClickListener(new OnItemClickListener()
    {
            @Override
           public void onItemClick(AdapterView<?> parent, View view, int position,long id) 
```

> topic_row的布局

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

<ListView
    android:id="@+id/childname"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView>

</LinearLayout> 
```

**LogCat-**

```
 450: E/AndroidRuntime(1540): FATAL EXCEPTION: main
   450: E/AndroidRuntime(1540): java.lang.IllegalStateException: ArrayAdapter requires
   the resource ID to be a TextView
   450: E/AndroidRuntime(1540):     at 
   android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:347)
   450: E/AndroidRuntime(1540):     at
   android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
   450: E/AndroidRuntime(1540):     at 
   android.widget.AbsListView.obtainView(AbsListView.java:1430)
   450: E/AndroidRuntime(1540):     at 
   android.widget.ListView.measureHeightOfChildren(ListView.java:1216)
   01-16 17:11:09.450: E/AndroidRuntime(1540):  at 
   android.widget.ListView.onMeasure(ListView.java:1127)
   01-16 17:11:09.450: E/AndroidRuntime(1540):  at 
   android.view.View.measure(View.java:8313)
   01-16 17:11:09.450: E/AndroidRuntime(1540):  at 
   android.widget.RelativeLayout.measureChild(RelativeLayout.java:566)
   01-16 17:11:09.450: E/AndroidRuntime(1540):  at 
   android.widget.RelativeLayout.onMeasure(RelativeLayout.java:381)
   01-16 17:11:09.450: E/AndroidRuntime(1540):  at 
   android.view.View.measure(View.java:8313)
   01-16 17:11:09.450: E/AndroidRuntime(1540):  at 
   android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
   450: E/AndroidRuntime(1540):     at 
   android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
   E/AndroidRuntime(1540):  at 
   android.view.View.measure(View.java:8313)
   450: E/AndroidRuntime(1540):     at 
   android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
   450: E/AndroidRuntime(1540):     at 
   android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
    E/AndroidRuntime(1540):     at 
   android.view.View.measure(View.java:8313)
   450: E/AndroidRuntime(1540):     at 
    android.view.ViewRoot.performTraversals(ViewRoot.java:839)
   450: E/AndroidRuntime(1540):     at
   android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
   450: E/AndroidRuntime(1540):     at 
   android.os.Handler.dispatchMessage(Handler.java:99)
   450: E/AndroidRuntime(1540):     at 
   android.os.Looper.loop(Looper.java:123) 
   450: E/AndroidRuntime(1540):     at 
   android.app.ActivityThread.main(ActivityThread.java:3683)
   450: E/AndroidRuntime(1540):     at 
   java.lang.reflect.Method.invokeNative(Native Method)
   450: E/AndroidRuntime(1540):     at 
   java.lang.reflect.Method.invoke(Method.java:507)
   450: E/AndroidRuntime(1540):     at 
   com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    450: E/AndroidRuntime(1540):    at 
    com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
     450: E/AndroidRuntime(1540):   at 
    dalvik.system.NativeStart.main(Native Method)
     450: E/AndroidRuntime(1540): Caused by: 
     java.lang.ClassCastException: android.widget.ListView
     450: E/AndroidRuntime(1540):   at 
     android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:343) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T05:44:48.480

我不确定您在做什么，但您似乎正在尝试在对话框中显示列表视图，如下面的屏幕截图：

![在此处输入图像描述](../Images/cc81e37f9ce50d25dfc056982ace6f55.png)

我在您发布的代码的帮助下实现了这一点，几乎没有更改，我发布的代码只是通过并让我知道：

**MainActivity.java**

```
public class MainActivity extends Activity {
    Dialog dialogMarketList;
    ListView lvForDialog;
    public String[] groupnamelist = { "one", "two", "three", "one", "two",
            "three", "one", "two", "three" };
    View viewList;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        viewList = MainActivity.this.getLayoutInflater().inflate(R.layout.main,
                null);
        dialogMarketList = new Dialog(MainActivity.this);
        dialogMarketList.requestWindowFeature(Window.FEATURE_NO_TITLE);
        dialogMarketList.setContentView(viewList);
        dialogMarketList.show();
        Display newDisplay = getWindowManager().getDefaultDisplay();
        int width = newDisplay.getWidth();
        lvForDialog = (ListView) viewList.findViewById(R.id.listView);
        ArrayAdapter<String> adapter = (new ArrayAdapter<String>(
                MainActivity.this, R.layout.topic_row, R.id.childname,
                groupnamelist));
        lvForDialog.setAdapter(adapter);
    }

} 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <ListView
        android:id="@+id/listView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </ListView>

</RelativeLayout> 
```

**topic_row.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/childname"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:gravity="center_vertical"
    android:paddingLeft="6dip"
    android:minHeight="?android:attr/listPreferredItemHeight"
/> 
```

# javascript - 数组到隐藏的输入字段

> ID：14358383
> 
> 赞同：1
> 
> 时间：2013-01-16T12:22:30.167
> 
> 标签：javascript, asp-classic

是否可以将数组值放入隐藏的输入字段？

我正在使用带有 javascript 的 ASP 经典代码。

我有这个 asp 代码，它将数组的每个内容都放到我的隐藏字段中。

```
Dim Data

    For Each Data in aRecords(14)
        Response.write "<INPUT type='hidden' name='hdn_field' value=""" & Data & """>" 
    Next 
```

它出现在视图源中，如下所示：

```
<INPUT type='hidden' name='hdn_field' value="arrayvalue1">
<INPUT type='hidden' name='hdn_field' value="arrayvalue2"> 
```

但是当我尝试通过javascript代码获取“hdn_field”的值时。它不起作用。

我通过这样做来调用它（javascript）：

```
testValue = document.frm_MainPage.hdn_field.value 
```

我不确定错误是否在于将其分配给隐藏字段的方式或我在 javascript 中调用它的方式。

请帮忙。

对你的帮助表示感谢。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:24:29.177

尝试将数组中的值迭代为分隔字符串或逗号分隔的字符串，然后在隐藏的输入字段中赋值。当你从隐藏的值中获取值时，只需用逗号分隔即可获取数组的内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:38:23.067

因为有几个具有相同名称的隐藏输入，所以当您获得“hdn_field”的值时，您会一次性获得所有这些值。要仅获得一个值，您需要为每个隐藏的输入指定一个唯一的名称。

尝试这样的事情：

```
Dim length,i

length=ubound(aRecords)

for i=0 to length
    response.write "<INPUT type=""hidden"" name=""hdn_field" & i & """ value=""" & aRecords(i) & """>"
next 
```

# visual-c++ - 使用 VS2005 的 BoundChecker 编译警告

> ID：14358384
> 
> 赞同：0
> 
> 时间：2013-01-16T12:22:31.493
> 
> 标签：visual-c++, memory-leaks, visual-studio-2005, devpartner

编译我的代码以在 VS2005 中使用 Compuware BoundChecker 8.1 对其进行检测时，我收到以下警告

1>编译...

1>cl：命令行警告 D9002：忽略未知选项“/NMbcOn”

1>cl：命令行警告 D9002：忽略未知选项'/NMclver:8.0'

1>IDEProject.cpp

1>链接...

1>NMLINK : 警告 LNK4044: 无法识别的选项 '/NMbcOn'; 忽略

1>NMLINK : 警告 LNK4044: 无法识别的选项 '/NMclver:8.0'; 忽略

我认为，由于上述警告，BoundChecker 没有报告运行时错误。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:11:06.703

/NMbcOn 是告诉 NMCL 使用边界检查器检测的开关。CL 当然不知道那个开关是什么，它应该在调用 CL 之前被 NMCL 剥离。

/NMclver:8.0 告诉 NMCL 您正在使用哪个版本的 CL，即 VS2005。同样，这应该在调用 CL 之前由 NMCL 剥离。

你是如何编译项目的？您是否在输出中看到显示 NMCL 版本的标题？

# mifare - Desfire 卡中的写入错误

> ID：14358390
> 
> 赞同：0
> 
> 时间：2013-01-16T12:22:48.327
> 
> 标签：mifare

我用一个文件创建了一个应用程序。（file_id = 0×09）

我想在该文件中写入 13(=​​0x0d) 字节数据。我使用了这个命令：

90 cd 00 00 14 09 00 00 00 0d 00 00 13 字节数据 00

我收到 91 f0

91 f0 表示 FILE_NOT_FOUND 而如果我创建另一个文件 file_id = 0×09

我收到 91 de（重复错误）

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-23T11:31:05.257

Desfire 命令分为不同的类别。例如，在文件中写入数据是数据操作命令的一部分。在任何通信开始时，您都处于 PICC 级别。因此，在发送写入命令之前，您必须首先选择具有此应用程序 AID 的应用程序。

以包装的 APDU ISO 7816 格式选择应用程序的命令如下：

```
cls  ins    p1   p2   lc [data] le
0x90 [0x5A] 0x00 0x00 lc [AID]  0x00 
```

以包装的 APDU ISO 7816 格式将数据写入文件的命令如下：

```
cls  ins    p1   p2   lc [data]                        le
0x90 [0x3D] 0x00 0x00 lc [fileNO,offset,length, data]  0x00 
```

注意：一旦您选择了应用程序，根据文件的设置，可能需要进行身份验证并创建会话密钥，然后才能将数据写入此文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T07:31:29.907

您必须首先选择该文件所在的应用程序，然后选择该文件。

# php - 如何在动态表的每一行中添加超链接？

> ID：14358392
> 
> 赞同：-1
> 
> 时间：2013-01-16T12:22:49.713
> 
> 标签：php, sql, mysqli, html-table

```
serialID(AI)|locations | telephone | address
---------------------------------------------
1           | A       
2           | B
3           | C
4           | D

users table
userID | location choosen
-------------------------
1      | A
2      | B
3      | B 
```

如何在动态表的每一行中添加超链接？

例如（这是一个动态表）它会改变..取决于用户的喜好。

```
location | address | telephone | user's favourable
B        |  -      | -         |  2
A        |  -      | -         |  1
C        |  -      | -         |  0
D        |   -     | -         |  0 
```

因此，如果我将鼠标悬停在 A 行，我可以转到另一个 php 页面并显示必要的详细信息示例，例如哪些用户选择了位置 A。有什么办法吗？请帮忙。

这是创建表代码->

```
<?php
include mysqli.connect.php";

   $retrieveLocation = SELECT l.locations, l.telephone, l.address, COUNT (u.userID) as userID
    FROM location AS l
    LEFT OUTER JOIN users AS u on l.locations = u.location_chosen
    GROUP BY l.locations
    ORDER BY userID DESC;

   $result = $mysqli->query($retrieveLocation);

      while ($row = $result->fetch_array(MYSQLI_ASSOC))
      { 
        echo "<tr><td>{$row['locations']}</td><td>{$row['telephone']}</td><td>{$row['addression']}</td><td>{$row['userID']}</td></tr>";
      }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:03:48.803

试试这段代码在 html + php 中生成表格：

```
<table>
<thead>
<tr>
<th>Location</th>
<th>Address</th>
<th>Telephone</th>
</tr>
</thead>
<tbody>
<?php foreach($query as $row) { ?>
<tr>
<td><a href="your_url_page_here.php"><?php echo $row["location"]; ?></a></td>
<td><?php echo $row["address"]; ?></td>
<td><?php echo $row["telephone"]; ?></td>
</tr>
<?php } ?>
</tbody>
</table> 
```

# asp.net - 在 Linq 中更新不提交更改（）

> ID：14358394
> 
> 赞同：-2
> 
> 时间：2013-01-16T12:22:56.043
> 
> 标签：asp.net, linq

当我从 ddl 中选择文本框时，我有填充文本框的代码。这很好用，并且在我的页面加载方法中。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        //drp_Customer.ClearSelection();

        using (CustomerDataContext obj = new CustomerDataContext())
        {
            // Get fields for drp_Customer
            // ===========================
            var allCustomers = from c in obj.Customers
                               orderby c.FirstName
                               select new
                               {
                                   c.FirstName,
                                   c.CustomerId
                               };

            drp_Customer.DataTextField = "FirstName";
            drp_Customer.DataValueField = "CustomerId";
            drp_Customer.DataSource = allCustomers.ToList();
            drp_Customer.DataBind();

            if (drp_Customer.SelectedItem.Text == " -- Select Customer -- ")
            {
                lbl_message.Text = "Please select a customer to update";
            }
            else
            {
                Customer myCust = obj.Customers.SingleOrDefault(c => c.CustomerId == Convert.ToInt32(drp_Customer.SelectedItem.Value));

                if (myCust != null)
                {
                    txt_FirstName.Text = myCust.FirstName;
                    txt_Surname.Text = myCust.Surname;
                    txt_HouseNumber.Text = myCust.HouseNumberName;
                    txt_Address.Text = myCust.Address;
                    txt_Town.Text = myCust.Town;
                    txt_Telephone.Text = myCust.Telephone;
                    txt_Postcode.Text = myCust.Postcode;
                }

            }

        }

    } 
```

我在页面上有一个更新按钮，该按钮用于更新但由于此代码有效而停止工作。

```
 protected void btn_Update_Click(object sender, EventArgs e)
    {
        using (CustomerDataContext obj = new CustomerDataContext())
        {
            Customer myCust = obj.Customers.SingleOrDefault(c => c.CustomerId == Convert.ToInt32(drp_Customer.SelectedValue));

            // Check If any are empty 
            // ======================
            if (myCust != null)
            {
                myCust.FirstName = txt_FirstName.Text;
                myCust.Surname = txt_Surname.Text;
                myCust.HouseNumberName = txt_HouseNumber.Text;
                myCust.Address = txt_Address.Text;
                myCust.Town = txt_Town.Text;
                myCust.Telephone = txt_Telephone.Text;
                myCust.Postcode = txt_Postcode.Text;
            }

            obj.SubmitChanges();
        }

    } 
```

我正在查询同一个 customerId，当我单步执行代码时， // myCust.FirstName = txt_FirstName.Text; 当我改变它时不会改变。

页面是否需要刷新才能实施更改？还是我需要以某种方式在页面加载中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:00:10.683

看来您正在重新加载所有控件`Page_Load`，请尝试添加方法`!Page.IsPostback`。`Page_Load`像这样的东西：

```
protected void Page_Load(object sender, EventArgs e)
{
     if (!Page.IsPostback)
     {
         //Your code goes here.
     }
} 
```

# c# - byte[] 的 byte.length() 是最大大小还是实际大小？

> ID：14358398
> 
> 赞同：0
> 
> 时间：2013-01-16T12:23:09.790
> 
> 标签：c#, encoding, bytearray

我觉得我在这个问题上退了两步，但有些事情让我有点困惑。我正在通过 TCP/IP 和 byte[] 进行一些通信。

所以我开始构建我的 byte[] 数组，第三个字节需要 byte[] 的长度。如果我这样声明我的字节；

```
byte[] bytesToSend = new byte[119]; 
```

然后用数据填充前三个字节..

```
bytesToSend[0] = 0x40;
bytesToSend[1] = 0x40;
bytesToSend[2] = Encoding.ASCII.GetBytes(bytesToSend.Length.ToString())[0]; 
```

最后打印出第三个字节，它应该包含长度；

```
MessageBox.Show(BitConverter.ToString(bytesToSend)); 
```

我应该期望它返回 119 的字节大小，还是这只是最大大小？目前它正在返回十六进制“0x31”，据我所知，它不等于 119 或 3。这无疑是我所缺少的简单/基本的东西，但有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T12:27:37.457

似乎你不清楚你在这里实际做什么：

```
bytesToSend[2] = Encoding.ASCII.GetBytes(bytesToSend.Length.ToString())[0]; 
```

让我们分解这条线：

```
bytesToSend.Length 
```

返回整数 119

```
.ToString() 
```

返回字符串“119”

```
Encoding.ASCII.GetBytes("119") 
```

返回组成 ascii 字符串“119”的字符的字节数组。

```
[0] 
```

仅获取此数组的第一个字节，它等于 0x31，因为这是字符“1”的 ascii 代码。

此外，没有 ac# 的*实际*大小`Array`。只有一个`Length`。如果您的意思是询问有多少元素包含非零字节，那就是另一回事了，但是一旦您声明

```
byte[] bytesToSend = new byte[119]; 
```

你得到一个包含 119 个元素的字节数组`Length`，无论你修改了多少元素，它总是 119。

如果您需要使用具有更动态大小的集合，请考虑使用 a`List<byte>`代替。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T12:28:09.980

`bytesToSend.Length`将是 119。但是，您不是存储`119`在 中，而是`bytesToSend[2]`

*   将其转换为字符串，`"119"`
*   将该字符串转换为字节数组中的 ASCII 表示，`[49, 49, 57]`
*   取该结果的第一个字节，`49`或`0x31`.

你只需要做

```
bytesToSend[2] = (byte)bytesToSend.Length; 
```

虽然如果您发送超过 255 个字节，这会中断，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T12:27:32.887

```
bytesToSend.Length == 119
bytesToSend.Length.ToString() == "119"
Encoding.ASCII.GetBytes(bytesToSend.Length.ToString()) == {0x31,0x31,0x39}
Encoding.ASCII.GetBytes(bytesToSend.Length.ToString())[0] == 0x31 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T12:30:17.217

这：

```
Encoding.ASCII.GetBytes(bytesToSend.Length.ToString())[0]; 
```

首先将值“119”（数组长度的字符串值）转换为字节数组 {0x31, 0x31, 0x39}，即 1、1、9 的 ascii 值。然后您将其中的第一个值分配给字节发送[2]。这就是你获得的方式`0x31`。

所以要回答你的问题，数组的长度就是你给它的长度，在这种情况下是 119。

# typo3-tca - 如何在 TCA 中创建链接输入字段

> ID：14358401
> 
> 赞同：5
> 
> 时间：2013-01-16T12:23:18.180
> 
> 标签：typo3-tca

我需要与 TYPO3 标准相同的功能。在那里您可以选择一个链接（外部站点、内部站点、文件等）

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T14:02:48.350

您可以在typo3/sysext/cms/tbl_tt_content.php 和typo3/sysext/cms/tbl_cms.php 文件中找到TYPO3 后端的TCA。在这里您可以找到 header_link 示例。

**TYPO3 6.1 及更低版本的解决方案：**

```
'header_link' => array(
    'label' => 'LLL:EXT:cms/locallang_ttc.xml:header_link',
    'exclude' => 1,
    'config' => array(
        'type' => 'input',
        'size' => '50',
        'max' => '256',
        'eval' => 'trim',
        'wizards' => array(
            '_PADDING' => 2,
            'link' => array(
                'type' => 'popup',
                'title' => 'LLL:EXT:cms/locallang_ttc.xml:header_link_formlabel',
                'icon' => 'link_popup.gif',
                'script' => 'browse_links.php?mode=wizard',
                'JSopenParams' => 'height=300,width=500,status=0,menubar=0,scrollbars=1',
            ),
        ),
        'softref' => 'typolink',
    ),
), 
```

**TYPO3 6.2.x - 7.6.x 的解决方案：**

```
'header_link' => array(
    'label' => 'LLL:EXT:cms/locallang_ttc.xml:header_link',
    'exclude' => 1,
    'config' => array(
        'type' => 'input',
        'size' => '50',
        'max' => '256',
        'eval' => 'trim',
        'wizards' => array(
            '_PADDING' => 2,
            'link' => array(
                'type' => 'popup',
                'title' => 'LLL:EXT:cms/locallang_ttc.xml:header_link_formlabel',
                'icon' => 'EXT:backend/Resources/Public/Images/FormFieldWizard/wizard_link.gif',
                'module' => array(
                    'name' => 'wizard_element_browser',
                    'urlParameters' => array(
                        'mode' => 'wizard',
                        'act' => 'page'
                    )
                ),
                'JSopenParams' => 'height=300,width=500,status=0,menubar=0,scrollbars=1',
            ),
        ),
        'softref' => 'typolink',
    ),
), 
```

**TYPO3 8.x 的解决方案：**

```
'header_link' => array(
    'label' => 'LLL:EXT:cms/locallang_ttc.xml:header_link',
    'exclude' => 1,
    'config' => array(
        'type' => 'input',
        'renderType' => 'inputLink',
    ),
), 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-30T10:47:02.753

TCA 在 TYPO3 的新版本 7 中看起来略有不同：

```
 'link' => array(
            'label' => 'LLL:EXT:cms/locallang_ttc.xlf:header_link',
            'exclude' => 1,
            'config' => array(
                'type' => 'input',
                'size' => '50',
                'max' => '1024',
                'eval' => 'trim',
                'wizards' => array(
                    'link' => array(
                        'type' => 'popup',
                        'title' => 'LLL:EXT:cms/locallang_ttc.xlf:header_link_formlabel',
                        'icon' => 'link_popup.gif',
                        'module' => array(
                            'name' => 'wizard_element_browser',
                            'urlParameters' => array(
                                'mode' => 'wizard'
                            )
                        ),
                        'JSopenParams' => 'height=300,width=500,status=0,menubar=0,scrollbars=1'
                    )
                ),
                'softref' => 'typolink'
            )
        ), 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-12-14T09:55:17.547

在 TYPO3 8.x 中，这很简单，只需添加[`'renderType' => 'inputLink'`](https://docs.typo3.org/typo3cms/TCAReference/ColumnsConfig/Type/Input.html#rendertype-inputlink)到您的`input`字段中即可。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-12-12T13:13:42.210

以下将适用于 TYPO3 7.6.X

```
'detailpage' => array(
            'exclude' => 1,
            'label' => 'LLL:EXT:myExt/Resources/Private/Language/locallang_db.xlf:tx_myExt_domain_model_mdl1.detailpage',
            'config' => array(
                'type' => 'input',
                'size' => 30,
                'eval' => 'trim',
                'wizards' => array(
                    '_PADDING' => 2,
                    'link' => array(
                        'type' => 'popup',
                        'title' => 'LLL:EXT:cms/locallang_ttc.xml:header_link_formlabel',
                        'icon' => 'link_popup.gif',
                        'module' => array(
                            'name' => 'wizard_element_browser',
                            'urlParameters' => array(
                                'mode' => 'wizard',
                                'act' => 'page'
                            )
                        ),
                        'JSopenParams' => 'height=300,width=500,status=0,menubar=0,scrollbars=1',
                    ),
                ),
                'softref' => 'typolink',
            ),
), 
```

# ruby-on-rails - 如何在 Rails 中渲染复杂的 json？

> ID：14358402
> 
> 赞同：0
> 
> 时间：2013-01-16T12:23:20.100
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json

我的 Rails 应用程序中有对象导航。但是 nav obj 将有另一个 nav obj。

我的问题是，我怎样才能像这样输出或渲染 json 导航有另一个子导航并且可能有无限的深度？非常感谢！！！

```
"nav": [
            {
                "id": 1,
                "name": "Home",
                "icon": "home",
                "nav": [{  id: 2,
                           name: "game"
                           icon: 'game'
                           etc.......

  }], 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:27:04.477

使用[Jbuilder](http://railscasts.com/episodes/320-jbuilder)、[Rabl](http://railscasts.com/episodes/322-rabl)等工具...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:37:58.327

jbuider 是复杂 json 的解决方案。

检查复杂 json 的精彩教程（jbuider） -

1) [jbuider Asciicast](http://railscasts.com/episodes/320-jbuilder?view=asciicast)

2）[jbuider定制的Json](http://blog.crowdint.com/2012/08/24/using-jbuilder-to-customize-json-objects.html)

# delphi - 货币价值/恒定价值比较的奇怪结果

> ID：14358407
> 
> 赞同：18
> 
> 时间：2013-01-16T12:23:31.427
> 
> 标签：delphi, compare, delphi-2009

当用 Delphi 2009 编译并运行时，这个控制台应用程序写“奇怪”。“小于”运算符两边的值相等，但代码表现得好像它们不相等。我能做些什么来避免这个问题？

```
program Project5;

{$APPTYPE CONSOLE}

var
  C: Currency;
begin
  C := 1.32;

  if C < 1.32 then
  begin
    WriteLn('strange');
  end;

  ReadLn;
end. 
```

ps 代码适用于其他值。

Barry Kelly 的这个[回答](https://stackoverflow.com/a/182822/80901)解释说 Currency 类型“不像浮点代码那样容易受到精度问题的影响”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T14:38:48.160

这似乎是德尔福的回归。

Delphi 2010 中的输出是“奇怪的”。但在 XE2 中没有输出，因此该错误不存在。我手头没有 XE 可供测试，但感谢@Sertac 确认 XE 也输出“奇怪”。请注意，旧版本的 Delphi 也很好，所以这是 D2009 左右的回归。

2010年生成的代码是：

```
Project106.dpr.10: if C < 1.32 then
004050D6 DB2D18514000     fld tbyte ptr [$00405118]
004050DC DF2D789B4000     fild qword ptr [$00409b78]
004050E2 DED9             fcompp 
004050E4 9B               wait 
004050E5 DFE0             fstsw ax
004050E7 9E               sahf 
004050E8 7319             jnb $00405103
Project106.dpr.12: WriteLn('strange'); 
```

文字 1.32 存储为一个 10 字节的浮点值，其值应为 13200。这是一个可精确表示的二进制浮点值。存储为 10 字节浮点数的 13200 的位模式为：

```
00 00 00 00 00 00 40 CE 0C 40

```

但是，存储在 $00405118 的文字中的位模式是不同的，并且略大于`13200`. 值为：

```
01 00 00 00 00 00 40 CE 0C 40

```

这就解释了为什么`C < 1.32`评估为`True`.

在 XE2 上生成的代码是：

```
Project106.dpr.10: if C < 1.32 then
004060E6 DF2DA0AB4000     fild qword ptr [$0040aba0]
004060EC D81D28614000     fcomp dword ptr [$00406128]
004060F2 9B               wait 
004060F3 DFE0             fstsw ax
004060F5 9E               sahf 
004060F6 7319             jnb $00406111
Project106.dpr.12: WriteLn('strange'); 
```

请注意，文字保存在 4 字节浮点数中。这可以从我们比较的事实中看出`dword ptr [$00406128]`。如果我们查看存储在的单精度浮点数的内容，`$00406128`我们会发现：

```
00 40 4E 46

```

这正是 13200 表示为 4 字节浮点数。

我的猜测是，2010 年的编译器在遇到以下问题时会执行以下操作`1.32`：

*   将 1.32 转换为最接近的可精确表示的 10 字节浮点数。
*   将该值乘以 10000。
*   将生成的 10 字节浮点数存储在`$00405118`.

因为 1.32 不能完全表示，所以最终的 10 字节浮点数并不完全是 13200。并且推测当编译器从将这些文字存储在 4 字节浮点数中切换到将它们存储在 10 字节浮点数中时，就会出现回归。

根本问题是德尔福对`Currency`数据类型的支持是建立在一个完全有缺陷的设计之上的。使用二进制浮点运算来实现十进制定点数据类型简直是自找麻烦。修复设计的唯一合理方法是完全重新设计编译器以使用定点整数运算。令人失望的是，新的 64 位编译器使用与 32 位编译器相同的设计。

老实说，我会阻止 Delphi 编译器对`Currency`文字进行任何浮点运算。这只是一个完整的雷区。我会像这样在脑海中进行 10,000 次转变：

```
function ShiftedInt64ToCurrency(Value: Int64): Currency;
begin
  PInt64(@Result)^ := Value;
end; 
```

然后调用代码将是：

```
C := 1.32;
if C < ShiftedInt64ToCurrency(13200) then
  Writeln ('strange'); 
```

编译器没有办法把它搞砸！

哼!

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T13:18:22.740

像 Currency(1.32) 这样的硬转换是不可能的，您可以使用以下内容进行显式转换

```
Function ToCurrency(d:Double):Currency;
    begin
       Result := d;
    end;

procedure TForm1.Button1Click(Sender: TObject);

var
  C: Currency;

begin
  C := 1.32;
  if C < ToCurrency(1.32) then
  begin
    Writeln ('strange');
  end;
end; 
```

另一种方法可以通过使用 const 或变量来强制使用 curreny

```
const
  comp:Currency=1.32;
var
  C: Currency;
begin
  C := 1.32;
  if C < comp then
  begin
    writeln ('strange');
  end;
end; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T16:13:37.387

为避免此问题（编译器中的错误），您可以按照@bummi 的建议进行操作，或者尝试以下运行时强制转换：

```
if C < Currency(Variant(1.32)) then 
```

为避免往返 FPU（和舍入误差），请考虑使用此比较函数：

```
function CompCurrency(const A,B: Currency): Int64;
var
  A64: Int64 absolute A; // Currency maps internally as an Int64
  B64: Int64 absolute B;
begin
  result := A64-B64;
end;
...
if CompCurrency(C,1.32) < 0 then
begin
  WriteLn('strange');
end; 
```

有关更多信息，请参阅此页面[`Floating point and Currency fields`](http://synopse.info/forum/viewtopic.php?id=500)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T17:19:39.587

添加到大卫的答案 - 下一个代码并不奇怪，虽然相当于 OP 代码：

```
program Project2;

{$APPTYPE CONSOLE}

var
  I: Int64;
  E: Extended;

begin
  I:= 13200;
  E:= 13200;
  if I < E then
  begin
    WriteLn('strange');
  end;
  ReadLn;
end. 
```

现在编译器为 Extended(13200) 生成正确的二进制值，所以问题似乎与`Currency`Delphi 编译器中的错误类型实现有关。

# android - “更新”功能如何在 Android 移动应用程序中发挥作用？

> ID：14358409
> 
> 赞同：0
> 
> 时间：2013-01-16T12:23:38.953
> 
> 标签：android, mobile-application

我正在开发 android 移动应用程序，其中我使用 xml 来显示数据，并且该应用程序也有图像。当我第一次生成 apk 并安装它时，它会正常工作。

我的问题是更新应用程序。

我在服务器上的数据库中有数据，并且在单独的目录中也有图像。当我将更新应用程序时，我想要来自数据库的数据和来自服务器的图像。为此，我将生成包含数据库表值的 xml。

我的问题是，是否可以在移动应用程序中用新的 xml 覆盖现有的 xml，并将图像从服务器添加到移动设备？

其背后的逻辑，用户将离线使用此应用程序。

我不想在应用程序中使用数据库。

下面是示例 xml 代码

```
<?xml version="1.0" encoding="iso-8859-1"?>
<projects>
    <list>
        <project1>
            <name>Project1</name>
        </project1>
        <project2>Project2</project2>
        .
        .
        .
    </list>
</projects> 
```

如果我选择 project1，那么它将显示来自 project1 的相关 xml 的数据，即 project1.xml

```
<?xml version="1.0" encoding="iso-8859-1"?>
<project1>
    <overview>some text here</overview>
    <amenities>
        <amenity1>
            <title>Title1</title>
            <description>Some text here</description>
        </amenity1>
        <images>
            <sample1>Image Path</sample1>
            <sample2>Image Path</sample2>
        </images>
        .
        .
        .
    </amenities>
</project1> 
```

在上面的例子中，第一个 xml 是所有项目的列表。第二个示例是每个项目的相关 xml。现在，当我更新应用程序时，它将替换新更新的 xmls 或在应用程序中添加新的 xmls。这可能吗？另外，更新时是否可以下载新图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:30:33.020

当您更新应用程序时 - 通过增加版本号并在市场上发布 - 用户手机中的 apk 文件将被您的最新文件替换。因此，如果您更改了代码，使其使用一些新的 xml 来检索数据，它应该可以工作。对于数据库，如果您增加了数据库版本号，将调用类中的`onUpgrade()`方法`SQLiteOpenHelper`，您也可以根据需要修改数据库。

**编辑**（回答编辑的问题）：

> 现在，当我更新应用程序时，它将替换新更新的 xmls 或在应用程序中添加新的 xmls。这可能吗？

就像我上面提到的，如果你有一个新版本的apk，它有你的新xmls，那么当用户完成更新时，他的应用程序就会有你的新xmls。但我要说的是，您可能需要更改您的代码，以便它可以解析和处理来自服务器和所有的新图像路径。

> 更新时是否可以下载新图像？

这在更新时是不可能的。但是，一旦您的应用程序打开，您可能会调用一些函数来读取和解析您的 xml，并开始从您的服务器中提取图像和数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:27:52.997

您无法更新使用 XML 的应用程序的 UI 部分，除非从 Play 商店（或备用商店）更新您的应用程序。

您可以将 XML 或 JSON 格式的数据从您的服务器传递到您的应用程序。您可以解析这些数据，并且必须创建某种形式的持久层来存储它（这将是一个本地数据库或其他东西）。

然后，您可以从本地数据库中检索此数据并根据需要使用它。

# asp.net-mvc - 在 MVC4 上更改基本视图类型

> ID：14358410
> 
> 赞同：23
> 
> 时间：2013-01-16T12:23:40.603
> 
> 标签：asp.net-mvc, view, asp.net-mvc-4, base

我从下面的链接中阅读了一篇关于在 MVC 上更改基本视图类型的帖子：

[http://haacked.com/archive/2011/02/21/changeing-base-type-of-a-razor-view.aspx](http://haacked.com/archive/2011/02/21/changing-base-type-of-a-razor-view.aspx)

我按照说明进行操作，但我的页面仍然继承自`System.Web.Mvc.WebViewPage`. 我无法访问自定义视图库中定义的任何属性，并且在运行时出现错误。当我使用`@inherits`关键字时，它会修复。

**网页配置**

```
<pages pageBaseType="[MyNamespace].WebViewPageBase">
  <namespaces>
    <add namespace="System.Web.Helpers" />
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Optimization" />
    <add namespace="System.Web.Routing" />
    <add namespace="System.Web.WebPages" />
  </namespaces>
</pages> 
```

**WebViewPageBase**

```
public class WebViewPageBase : WebViewPage
{
    public SomeType MyProperty { get; set; }

    public override void InitHelpers()
    {
        base.InitHelpers();
        MyProperty = { foo };
    }

    public override void Execute()
    {

    }
}

public class WebViewPageBase<T> : WebViewPage<T>
{
    public SomeType MyProperty { get; set; }

    public override void InitHelpers()
    {
        base.InitHelpers();
        MyProperty = { foo };
    }

    public override void Execute()
    {

    }
} 
```

**局部视图**

```
@model TopMenuModel

<div class="topMenu">
@MyProperty
</div> 
```

但是在我读过的帖子中没有关于`@inherits`关键字的说明。有什么我想念的东西，或者有什么方法可以`@inherits`在所有页面中没有关键字的情况下完成这项工作吗？

**解决了：**

`web.config`目录中的文件`root`不是正确的。`web.config`我在目录下的文件中更改了基本类型`View`并修复了它。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-16T12:36:46.643

你为什么展示两个版本`WebViewPageBase`：通用和非通用？

您只需要通用版本：

```
public class MyWebView<T> : WebViewPage<T>
{
    public SomeType MyProperty { get; set; }

    public override void InitHelpers()
    {
        base.InitHelpers();
        MyProperty = new SomeType();
    }

    public override void Execute()
    {
    }
} 
```

进而：

```
<pages pageBaseType="MvcApplication1.WebViews.MyWebView">
  <namespaces>
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Routing" />
  </namespaces>
</pages> 
```

现在在您的视图中，您将能够使用该属性：

```
@model TopMenuModel

<div class="topMenu">
    @MyProperty
</div> 
```

* * *

更新：

分步设置：

1.  使用 Internet 模板创建一个新的 ASP.NET MVC 3 应用程序
2.  添加自定义基础视图：

    ```
    namespace MvcApplication1
    {
        public class MyWebView<T> : WebViewPage<T>
        {
            public string MyProperty { get; set; }

            public override void InitHelpers()
            {
                base.InitHelpers();
                MyProperty = "Hello World";
            }

            public override void Execute()
            {
            }
        }
    } 
    ```

3.  设置`pageBaseType`属性`~/Views/web.config`（不要与 混淆`~/web.config`）：

    ```
    <pages pageBaseType="MvcApplication1.MyWebView">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
      </namespaces>
    </pages> 
    ```

4.  内部`~/Views/Home/Index.cshtml`使用属性：

    ```
    <div>
        @MyProperty
    </div> 
    ```

5.  点击`Ctrl+F5`运行应用程序，如果一切顺利，您将收到一个`Hello World`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-27T22:02:51.430

您遇到的问题是因为您需要修改 VIEWS 文件夹的 web.config 文件。所以基本上这一行：

```
 <pages pageBaseType="[MyNamespace].WebViewPageBase"> 
```

需要位于视图文件夹中的 web.config 中，而不是主项目的 web.config 中。Darin Dimitrov 的回答清楚地说明了这一点，但人们通常会忽略这个细节。我知道，因为我是他们中的一员。实际上Phil Haack的文章也是如此......

# asp.net - 你能在不访问数据库的情况下获取当前 asp.net 用户的 GUID 吗？

> ID：14358412
> 
> 赞同：1
> 
> 时间：2013-01-16T12:23:42.847
> 
> 标签：asp.net, forms-authentication

我知道你可以这样做来获取当前用户的用户 ID

```
(Guid)Membership.GetUser().ProviderUserKey; 
```

但这会进行数据库查找。有没有办法在没有数据库查找的情况下获取当前用户的 GUID，可以从 auth cookie 中确定吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T05:07:24.950

很不幸的是，不行。Membership.GetUser() 调用使用“用户名”进行此查找。

auth cookie 仅包含此用户名（以及一些其他详细信息，例如问题和到期日期）

如果这是您真正需要的东西，您可以查找一次，并将其存储在 cookie 的 UserData 属性中 -[以编程方式更改 FormsAuthenticationTicket 中的用户数据](https://stackoverflow.com/questions/3402909/change-the-user-data-in-formsauthenticationticket-programatically/3428256#3428256)

# android - 第一次没有调用 onMenuItemClick - SherlockListActivity

> ID：14358413
> 
> 赞同：0
> 
> 时间：2013-01-16T12:23:45.890
> 
> 标签：android, android-actionbar, actionbarsherlock, onclicklistener, optionmenu

我使用 SherlockListActivity，我在创建活动后第一次单击它时创建了带有一个项目及其 clickListener 的 ActionBar，不调用 onMenuItemClick，但是在第一次单击后的每次单击中，都可以正常工作

为什么 ？

```
private void BuildTopActionBar() {
        BitmapDrawable bg = (BitmapDrawable) getResources().getDrawable(
                R.drawable.ic_action_bg);
        bg.setTileModeXY(TileMode.REPEAT, TileMode.REPEAT);
        getSupportActionBar().setBackgroundDrawable(bg);

        this.getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        this.getSupportActionBar().setHomeButtonEnabled(true);
        this.getSupportActionBar().setTitle("bookmarks");
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            // This is called when the Home (Up) button is pressed in the Action Bar.
            finish();
            return true;
        case add_bookmark_item:
            // add
            item.setOnMenuItemClickListener(new OnMenuItemClickListener() {

                public boolean onMenuItemClick(MenuItem item) {
                    customAmbilWarnaDialog dialog = new customAmbilWarnaDialog(
                            BookMarksActivity.this, 0xffffffff,
                            new OnAmbilWarnaListener() {

                                public void onCancel(
                                        customAmbilWarnaDialog dialog) {
                                }

                                public void onOk(customAmbilWarnaDialog dialog,
                                        int color, String name, int hasName) {
                                    myDbHelper.AddNewBookmark(name,
                                            currentPageNum, color, hasName);
                                    // code
                                    lv.smoothScrollToPosition((lv.getCount() - 1));
                                }
                            });
                    dialog.show();                  
                    return true;
                }
            });

        }

        return super.onOptionsItemSelected(item);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {

        menu.add(0, add_bookmark_item, 0, "add bookmark")
                .setIcon(R.drawable.bookmark_add)
                .setShowAsAction(
                        MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW
                                | MenuItem.SHOW_AS_ACTION_ALWAYS);

        return true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:40:57.770

原因是你在方法中调用`item.setOnMenuItemClickListener(new OnMenuItemClickListener() {...`了`onOptionsItemSelected()`。

这意味着它将在您第一次单击时设置`menuItem`（然后在每次单击时重置），并且其中的代码只有在您至少单击一次后才会运行。

要么调用它，`onCreateOptionsMenu()`要么简单地将代码从`onMenuItemClick()`开关/外壳移到

# c# - 将 dbo.Table 名称设置为 DataTable Name

> ID：14358415
> 
> 赞同：1
> 
> 时间：2013-01-16T12:23:49.017
> 
> 标签：c#, sql

我有一个返回 14 个表的存储过程。现在，在我的应用程序中，数据集包含所有 DataTable 名称为 table、table1、table2、table3 ... 的数据表。我在这里想要的是，我的数据集应该包含与数据库表名称相同的所有数据表。可能吗 ？

提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:54:03.130

您可以使用[`TableMappings`](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.tablemappings%28v=vs.110%29.aspx)for your`DataAdapter`来获取正确的表名：

```
using (var con = new SqlConnection(connectionString))
{
   string sql = @"SELECT * FROM locGSP; 
                  SELECT * FROM locCountry; 
                  SELECT * FROM locMarketUnit";
   using(var da = new SqlDataAdapter(sql, con))
   {
       // demonstrate the issue here:
       DataSet dsWrong = new DataSet();
       da.Fill(dsWrong); // now all tables are in this format: Table,Table1,Table2

       // following will map the correct names to the tables
       DataSet dsCorrect = new DataSet();
       da.TableMappings.Add("Table", "locGSP");
       da.TableMappings.Add("Table1", "locCountry");
       da.TableMappings.Add("Table2", "locMarketUnit");
       da.Fill(dsCorrect); // now we have the correct table-names: locGSP,locCountry,locMarketUnit
   }
} 
```

这是使用`DataReader`and[`DataSet.Load`](http://msdn.microsoft.com/en-us/library/skef0k7a.aspx)填充的另一种方式`DataSet`：

```
using (var con = new SqlConnection(connectionString))
{
   string sql = @"SELECT * FROM locGSP; 
                  SELECT * FROM locCountry; 
                  SELECT * FROM locMarketUnit";
   using (var cmd = new SqlCommand(sql, con))
   {
       con.Open();
       using (var rdr = cmd.ExecuteReader())
       {
           // after the next line the DataSet will have the correct table-names
           ds.Load(rdr, LoadOption.OverwriteChanges, "locGSP", "locCountry", "locMarketUnit");
       }
   }
} 
```

背景：

[**从 DataAdapter 填充 DataSet**](http://msdn.microsoft.com/en-us/library/bh8kx08z.aspx)

> **多个结果集**：如果 DataAdapter 遇到多个结果集，它会在 DataSet 中创建多个表。这些表被赋予一个递增的默认名称**TableN**，从 Table0 的“Table”开始。如果将表名作为参数传递给 Fill 方法，则会为表指定一个递增的默认名称 TableNameN，从 TableName0 的“TableName”开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:04:46.227

[在这里](https://gist.github.com/4546973)，您有一个要点可以帮助您进行此映射。

用法：

```
SomeDataSet dt = DataUtil.Fill<SomeDataSet>(
    procedureName: "someSP", 
    connectionString: "yourConnectionString", 
    values: new {
        someValue = 15,
        otherValue = "test",
    },
    mappings: new { 
        Table1: "YourDataSetTable1",
        Table2: "YourDataSetTable2",
    }
); 
```

（最后的代码仅适用于框架 4.0）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-16T12:29:27.453

您的过程返回 14 个结果集，而不是表。除非您特别命名它们，否则它们是未命名的结果集。例如，以下查询的表名是什么？

```
select c.Name,sum(o.orders) as NumOrder,sum(o.price) as TotalPrice
from 
customer c 
join orders o on o.cust_id=c.cust_id
group by c.name 
```

有效的 SQL 查询，但 SQL 不知道如何称呼这个“虚拟表”或结果集。

# mysql - 需要在没有 UNION 的情况下获得所需的结果

> ID：14358420
> 
> 赞同：1
> 
> 时间：2013-01-16T12:23:56.193
> 
> 标签：mysql, select

我有桌子，

```
id  | OpenDate             |  CloseDate
------------------------------------------------
1   | 2013-01-16 07:30:48  |  2013-01-16 10:49:48
2   | 2013-01-16 08:30:00  |  NULL 
```

我需要得到如下组合结果

```
 id | date                 |   type
 ---------------------------------
 1  | 2013-01-16 07:30:48  |  Open
 1  | 2013-01-16 10:49:48  |  Close
 2  | 2013-01-16 08:30:00  |  Open 
```

使用 UNION 我们可以做到这一点，但是如何在不使用 UNION 的情况下获得想要的结果呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:32:38.200

据我所知，如果不使用联合，就不可能按照您的建议获得 MySQL 结果集。

这个问题读起来更像是一个谜题（家庭作业），而不是一个真正的编程问题——为什么 UNION 不可用？为什么要直接从 PHPMyAdmin 或 mysql 命令行客户端等通用工具访问数据？一旦你在顶层实现了一层代码，比如表示和访问控制，不使用 UNION 就很简单了——但使用 UNION 语句可能会简单得多：你为什么要问？

**更新** 我已经解决了不使用 UNION 的问题 - 但这很明显这是一个家庭作业/面试问题。

**UPDATE2** 由于 LearneR 已发布（然后删除）另一个问题*，暗示*他对 UNION 查询的性能不满意，这看起来不太可能是一个家庭作业/面试问题。但只是为了娱乐价值，我将推迟发布我的解决方案，看看是否有其他人可以解决这个难题（提示：我的解决方案根本不应该提高查询的性能 - 这只是试图获得的学术练习在不使用 UNION 的情况下获得所需的结果）。

**更新3**

没人知道吗？

```
SELECT t.id
,        IF(rowmultiplier.id=1, t.opendate, t.closedate) AS `date`
,        IF(rowmultiplier.id=1, 'Open', 'Close') AS `type`
FROM yourtable t
,    (SELECT id
    FROM yourtable AS tablealias
    WHERE id IN (1,2) ) AS rowmultiplier
WHERE rowmultiplier.id=1
OR t.closedate IS NOT NULL; 
```

（有一些调整空间，在没有任何排序/过滤的情况下，然后强制外部查询的全表表扫描和内部查询的索引查找可以使它比联合查询快很多）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:26:13.910

尝试使用 case 语句 [http://dev.mysql.com/doc/refman/5.0/en/case.html](http://dev.mysql.com/doc/refman/5.0/en/case.html)

它可能类似于（未测试）

```
select date,
    case time(formatted_timefield)
        when between '07:00:00' and '18:00:00'
        then 'open'
        else 'close'
    end case 
```

所以你可以使用多重检查，比如

```
select 
CASE WHEN 1=1 AND 2=2 THEN 'open' ELSE 'closed' END
from Table 
```

所以完全尝试类似的东西

```
select
    date,
    CASE WHEN OpenDate < now() AND CloseDate > now() THEN 'open' ELSE 'closed' END
from
    table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:28:02.743

使用`IF`条件...

```
SELECT 
      id, 
      OpenDate as Open_Date, 
      IF (CloseDate, 'close', 'open') as Close_Date, 
      IF (CloseDate, CloseDate, '') as type 
FROM table; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T13:24:19.150

看来你给我们难题了。当有 UNION 关键字可用时，为什么要使查询变得复杂。如果您给我们一个难题，我的答案是使用“UNION ALL”。

# sql - 如何在 JPA/Hibernate 中执行本机 SQL 脚本？

> ID：14358425
> 
> 赞同：44
> 
> 时间：2013-01-16T12:24:06.590
> 
> 标签：sql, oracle, hibernate, jpa

我有一个带有数据库转储的 SQL 脚本。如何使用 Hibernate 执行它`EntityManager`？

我试过这样：

```
EntityManager manager = getEntityManager(); 
Query q = manager.createNativeQuery(sqlScript);
q.executeUpdate(); 
```

但它仅在`sqlScript`包含单个 SQL 查询时才有效，而我需要运行多个插入和其他复杂的东西。

RDBMS：Oracle Database 11g Express Edition Release 11.2.0.2.0 - 64 位生产

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-01-16T12:42:27.877

用开始结束块包装您的查询。像

```
EntityManager manager = getEntityManager(); 
Query q = manager.createNativeQuery("BEGIN " + sqlScript + " END;");
q.executeUpdate(); 
```

# javascript - 在 TideSDK 中强制下载文件

> ID：14358427
> 
> 赞同：1
> 
> 时间：2013-01-16T12:24:13.640
> 
> 标签：javascript, html, tidesdk

我正在制作一个基于 html 的 CD 自动运行，我打算用 TideSDK 打包。一切正常，我面临的唯一问题是当有人点击文件下载链接（pdf、zip 等）时，所有文件都在应用程序窗口内打开，因为 webkit 引擎不理解文件类型（例如，zip文件）它显示奇怪的字符而不是下载文件。

所以我想知道我应该如何强制下载文件，以便用户可以将其保存在他的系统中或使用关联的应用程序打开它。

我正在为基于 Windows 的系统制作应用程序。

提前感谢所有抽出时间回复的人:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T04:33:01.803

mimetype 必须更改为“application/octet-stream”，这在普通服务器上很容易做到。但是，据我所知，没有办法轻松地将 mimetypes 添加到 TideSDK。我还没有对此进行测试，但可以在潮汐中使用 PHP 之类的东西并从 PHP 设置 mime 类型。[请参阅此帖子以供参考](https://stackoverflow.com/questions/365777/starting-file-download-with-javascript)。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T17:39:14.843

我们使用的`Ti.Platform.openApplication()`方法是使用外部应用程序打开文件，我不知道它是否正是您需要的，但您可以尝试一下。这是官方文档：[http ://tidesdk.multipart.net/docs/user-dev/generated/#!/api/Ti.Platform-method-openApplication](http://tidesdk.multipart.net/docs/user-dev/generated/#!/api/Ti.Platform-method-openApplication)

我们这样使用它：

```
path = Ti.Filesystem.getFile(Ti.Filesystem.getApplicationDataDirectory().nativePath(), 'contents', @get('pdf_path'))
Ti.Platform.openApplication(path.nativePath()) 
```

使用外部应用程序打开 pdf 文档。

# php - 函数 money_format 第二个参数的语言环境列表

> ID：14358429
> 
> 赞同：-1
> 
> 时间：2013-01-16T12:24:22.797
> 
> 标签：php

我想要所有语言环境的列表。例如对于日本它的 ja_JP。像这样，我想要所有 reigons 的所有列表。

```
setlocale(LC_MONETARY, 'ja_JP'); 
```

我被困了很长时间，有人可以帮忙。我还需要已定义代码的国家/地区。

等待正面回应。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-16T12:55:14.297

您将在这里找到答案：[所有语言环境及其短代码列表？](https://stackoverflow.com/questions/3191664/list-of-all-locales-and-their-short-codes)

从那里，您可以看到其中哪些对您正在寻找的实现有用。

我建议先在这个网站和谷歌上运行一个长搜索，然后如果你没有找到任何东西，你可以寻求帮助。

希望这对您有所帮助。

亲切的问候。

# php - 为什么我不能使用 zend 框架操作触发浏览器下载对话框？

> ID：14358431
> 
> 赞同：1
> 
> 时间：2013-01-16T12:24:25.843
> 
> 标签：php, zend-framework, http-headers

我构建了一个小脚本来触发下载对话框，如下所示：

```
<?php
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.'123.txt');
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');

ob_end_clean();
echo ' '; 
flush();

//do something long
//for example
sleep(5);
for($i = 0; $i<10; $i++){
echo $i . PHP_EOL;
sleep(1);             
} 
```

如果我将它放入一个名为 download.php 的文件中，它会正常运行；立即弹出下载对话框。

如果我将它放入 Zend Framework Action 并禁用布局和视图渲染，它的行为会有所不同（大约 15 秒后会弹出下载对话框）。

为什么会有这种差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:15:14.820

Zend Framework 处理一个动作的输出，并会添加额外的头文件并可能覆盖头文件。

```
 // Disable default phtml rendering
 $this->_helper->viewRenderer->setNoRender(true);
 $response->clearAllHeaders(); 
```

对于 ZF1，我们使用此行来关闭视图的正常渲染以允许下载工作。

# regex - 如何使用 sed 替换

> ID：14358433
> 
> 赞同：0
> 
> 时间：2013-01-16T12:24:30.133
> 
> 标签：regex, sed

我实际上可以这样做`<h1>`：

```
sed s/\<h1\>/\<h2\>/ myblog.html 
```

但我如何让它也做尾随`</h1>`？

所以我想从：

```
<h1> some header </h1> to <h2> some header </h2> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:34:35.103

定义 sed 替换命令时不需要使用斜杠，它可以是另一个符号：

```
sed -e 's/<h1>/<h2>/g' -e 's_</h1>_</h2>_g' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:26:20.390

使用捕获组捕获可选`/`并通过反向引用捕获组来替换：

```
sed -r 's/<(\/?)h1>/<\1h2>/' myblog.html 
```

`-r`选项是激活扩展正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:37:34.490

有时我发现 HTML 标记最简单的解决方案是完全忽略结束标记中的斜线，并将打开和关闭与单个模式匹配，如下所示：

```
sed 's/h1>/h2>/' myblog.html 
```

# android - 选择设备时 DDMS 冻结

> ID：14358436
> 
> 赞同：0
> 
> 时间：2013-01-16T12:24:49.553
> 
> 标签：android, ddms

在 linux 上，我运行了一个 Android ARM 模拟器。我想查看日志输出，所以我在命令行上启动了 ddms。ddms 打开后，我选择了设备。然后在两三秒后 DDMS 冻结。只有在我选择设备后它才会冻结。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:31:33.063

同样的[问题](https://stackoverflow.com/questions/11560901/android-ddms-tool-hangs-after-selecting-a-device)，试试这个解决方案：

```
You don't need ddms to see the log output, just do 'adb logcat' in a shell 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:32:45.527

这是ddms的常见问题。你可以试试`adb kill-server`，`adb start-server`。这应该有效。

# nsis - 如何在 nsis 中进行字符串替换？

> ID：14358438
> 
> 赞同：0
> 
> 时间：2013-01-16T12:24:57.803
> 
> 标签：nsis

我想在 NSIS 中对以下字符串进行字符串替换： `C:/Program Files (86)`替换为`C:/Program Files`.

我已经搜索并获得了此[链接](http://nsis.sourceforge.net/Replace_Sub_String_%28macro%29)以进行字符串替换。

从那个链接我需要包括整个功能。它可以最大化编码。是否有任何内置功能或任何其他方式是可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:59:31.023

NSIS 只有 3 个基本字符串指令`StrCpy`：`StrLen`和`StrCmp`. 其他一切都建立在宏和函数之上......

将“Program Files (86)”转换为其他东西不是一个好主意，Program Files 文件夹可能有不同的名称（在我的系统上它称为 Applications）！使用`$ProgramFiles32`或`$ProgramFiles64`获取您想要的目录...

# jquery - jQuery - 获取标签内的文本并将其用作 CSS 规则

> ID：14358439
> 
> 赞同：1
> 
> 时间：2013-01-16T12:24:57.403
> 
> 标签：jquery, css

假设我有这个 HTML：

```
 <ul>
       <li>
           <a>Item one</a>
           <small>#000000</small>
           <span class="corner"></span>
       </li>
       <li>
           <a>Item two</a>
           <small>#ffffff</small>
           <span class="corner"></span>
       </li>
    </ul> 
```

我想获取跨度标记之间的文本，并将其作为背景色应用于同一“li”内的“跨度”。

所以我尝试的是：

```
jQuery(document).ready(function ($) {

    $("span.corner").addClass("custom-color"); //apply class custom-color to span

     if ($("span.corner").hasClass("custom-color")) { //if the span.corner has custom-color class do the next

           var cornerColor = $('.corner').prev('small').text(); //this should get the text between the 'small' tags

            if (cornerColor !== '') { //if there is some text between 'small' tags, apply it as a css rule to the 'corner.span'
                $('.corner').css('background-color', cornerColor);
            }
        }
}); 
```

不幸的是，它不起作用，它应用了“自定义颜色”类，但它不应用 css 规则。如果我将变量cornerColor 替换为实际颜色，则可以。所以我猜错误是在变量中获取跨度内的文本。任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:29:39.137

```
jQuery(document).ready(function ($) {
    $("li").each(function(){
        $(this).find("span.corner").addClass("custom-color"); //apply class custom-color to span
        if ($(this).find("span.corner").hasClass("custom-color")) {
            var cornerColor = $(this).find('small').text();
            if (cornerColor) {
                $(this).find("span.corner").css('background-color', cornerColor);
            }
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:35:13.370

当你这样做时，`var cornerColor = $('.corner').prev('small').text();`你正在获取`small`连接所有标签的文本。所以基本上`cornerColor = "#000000#fffff"`; 这显然是无效的。

```
$("span.corner").addClass("custom-color"); //apply class custom-color to span
if ($("span.corner").hasClass("custom-color")) { 
  $('.corner').prev('small').each(function(){
    var cornerColor = $(this).text(); 
    if (cornerColor !== '') {
      $(this).next('.corner').css('background-color', cornerColor);
    }
  });
} 
```

上面的代码使用 .each 遍历每个小标签，将其获取内部文本并应用于`span.corner`它旁边。演示：http: [//jsfiddle.net/4Su4G/1/](http://jsfiddle.net/4Su4G/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:40:19.893

```
jQuery(document).ready(function () {
 $("span.corner").addClass("custom-color"); //apply class custom-color to span
 if ($("span.corner").hasClass("custom-color")) {
   $('span.corner').each(function () {
     var cornerColor = $(this).prev('small').html();
     if (cornerColor) {
     $(this).css('background-color', cornerColor);
     }
   });
 }
}); 
```

看到这个：http: [//jsfiddle.net/nN6Nd/2/](http://jsfiddle.net/nN6Nd/2/)

# html - 复选框：如何显示文本？

> ID：14358440
> 
> 赞同：20
> 
> 时间：2013-01-16T12:25:06.743
> 
> 标签：html, css

我想连同它一起显示复选框的相关文本。

```
<input id="Checkbox1" type="checkbox" value="Admin"><span>Admin User</span> 
```

这是最常用的标记。`span`但是对复选框使用单独的感觉并不好。而且它甚至看起来都不好看。

有没有办法将这两者联系起来？或者最好的方法是什么？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-16T12:26:48.200

使用 a`Label`和[for](http://www.w3schools.com/tags/att_label_for.asp)属性。

> for 属性指定标签绑定到哪个表单元素

```
<input id="Checkbox1" name="Checkbox1" type="checkbox" value="Admin" />
<label for="Checkbox1">AdminUser</label> 
```

也给你的输入`name`

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-03-17T16:29:14.797

`for`您可以使用嵌套的而不是使用属性`<input type="checkbox">`：

```
<label><input name="Checkbox1" type="checkbox">Admin User</label> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-16T12:26:54.963

`<span>`您可以使用[`<label>`](http://www.w3schools.com/tags/tag_label.asp)-tag代替使用：

```
<label for="Checkbox1">Admin User</label> 
```

它会将标签“附加”到您的复选框，从某种意义上说，当单击标签时，就好像用户单击了复选框。

对于样式，您需要应用自己的样式以使它们看起来“在一起”。

# vba - VBA - 工作表列表（超链接）

> ID：14358443
> 
> 赞同：2
> 
> 时间：2013-01-16T12:25:16.110
> 
> 标签：vba, excel

我有一个 Excel 工作簿。在此工作簿中，通过 VBA 创建了一个新工作表。

这个工作簿的工作表越多就越令人困惑，因为我必须滚动很长时间才能到达中间的任何工作表。

我想创建一个概览表

*   其中列出了工作表的名称和
*   工作表的名称必须是超链接。

我的代码根本不起作用-顺便说一句，我必须使用 Excel 2003

这是我所拥有的：

```
Sub GetHyperlinks()
    Dim ws As Worksheet
    Dim i As Integer

    i = 4

    ActiveWorkbook.Sheets("overview").Cells(i, 1).Select

    For Each ws In Worksheets
        ActiveWorkbook.Sheets("overwies").Hyperlinks.Add _
        Ancor:=Selection, _
        Address:="", _
        SubAddress:="'ws.name'", _
        TextToDisplay:="'ws.name'"

        i = i + 1
    Next ws
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T12:31:49.367

稍微更改了您的代码-现在可以使用：

```
Sub GetHyperlinks()
    Dim ws As Worksheet
    Dim i As Integer

    i = 4

    For Each ws In ThisWorkbook.Worksheets
        ActiveWorkbook.Sheets("overview").Hyperlinks.Add _
        Anchor:=ActiveWorkbook.Sheets("overview").Cells(i, 1), _
        Address:="", _
        SubAddress:="'" & ws.Name & "'!A1", _
        TextToDisplay:=ws.Name

        i = i + 1
    Next ws
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-25T09:32:14.030

有两种方法用于创建指向活动工作簿表的链接：

1.  为标准工作表创建简单的超链接。
2.  不太常用的图表表 - 甚至更罕见的对话框表 - 不能超链接。如果此代码检测到非 Worksheet 类型，则会以编程方式将 Sheet BeforeDoubleClick 事件添加到 TOC 工作表中，以便仍然可以通过快捷方式引用这些工作表。

请注意，(2) 要求启用宏才能使此方法起作用。

![在此处输入图像描述](../Images/d6e907d5b8bf54485cc7e28b29fb9401.png)

```
Option Explicit

Sub CreateTOC()
    Dim ws As Worksheet
    Dim nmToc As Name
    Dim rng1 As Range
    Dim lngProceed As Boolean
    Dim bNonWkSht As Boolean
    Dim lngSht As Long
    Dim lngShtNum As Long
    Dim strWScode As String
    Dim vbCodeMod

    'Test for an ActiveWorkbook to summarise
    If ActiveWorkbook Is Nothing Then
        MsgBox "You must have a workbook open first!", vbInformation, "No Open Book"
        Exit Sub
    End If

    'Turn off updates, alerts and events
    With Application
        .ScreenUpdating = False
        .DisplayAlerts = False
        .EnableEvents = False
    End With

    'If the Table of Contents exists (using a marker range name "TOC_Index") prompt the user whether to proceed
    On Error Resume Next
    Set nmToc = ActiveWorkbook.Names("TOC_Index")
    If Not nmToc Is Nothing Then
        lngProceed = MsgBox("Index exists!" & vbCrLf & "Do you want to overwrite it?", vbYesNo + vbCritical, "Warning")
        If lngProceed = vbYes Then
            Exit Sub
        Else
            ActiveWorkbook.Sheets(Range("TOC_Index").Parent.Name).Delete
        End If
    End If
    Set ws = ActiveWorkbook.Sheets.Add
    ws.Move before:=Sheets(1)
    'Add the marker range name
    ActiveWorkbook.Names.Add "TOC_INDEX", ws.[a1]
    ws.Name = "TOC_Index"
    On Error GoTo 0

    On Error GoTo ErrHandler

    For lngSht = 2 To ActiveWorkbook.Sheets.Count
        'set to start at A6 of TOC sheet
        'Test sheets to determine whether they are normal worksheets
        ws.Cells(lngSht + 4, 2).Value = TypeName(ActiveWorkbook.Sheets(lngSht))
        If TypeName(ActiveWorkbook.Sheets(lngSht)) = "Worksheet" Then
            'Add hyperlinks to normal worksheets
            ws.Hyperlinks.Add Anchor:=ws.Cells(lngSht + 4, 1), Address:="", SubAddress:="'" & ActiveWorkbook.Sheets(lngSht).Name & "'!A1", TextToDisplay:=ActiveWorkbook.Sheets(lngSht).Name
        Else
            'Add name of any non-worksheets
            ws.Cells(lngSht + 4, 1).Value = ActiveWorkbook.Sheets(lngSht).Name
            'Colour these sheets yellow
            ws.Cells(lngSht + 4, 1).Interior.Color = vbYellow
            ws.Cells(lngSht + 4, 2).Font.Italic = True
            bNonWkSht = True
        End If
    Next lngSht

    'Add headers and formatting
    With ws
        With .[a1:a4]
            .Value = Application.Transpose(Array(ActiveWorkbook.Name, "", Format(Now(), "dd-mmm-yy hh:mm"), ActiveWorkbook.Sheets.Count - 1 & " sheets"))
            .Font.Size = 14
            .Cells(1).Font.Bold = True
        End With
        With .[a6].Resize(lngSht - 1, 1)
            .Font.Bold = True
            .Font.ColorIndex = 41
            .Resize(1, 2).EntireColumn.HorizontalAlignment = xlLeft
            .Columns("A:B").EntireColumn.AutoFit
        End With
    End With

    'Add warnings and macro code if there are non WorkSheet types present
    If bNonWkSht Then
        With ws.[A5]
            .Value = "This workbook contains at least one Chart or Dialog Sheet. These sheets will only be activated if macros are enabled (NB: Please doubleclick yellow sheet names to select them)"
            .Font.ColorIndex = 3
            .Font.Italic = True
        End With
        strWScode = "Private Sub Worksheet_BeforeDoubleClick(ByVal Target As Range, Cancel As Boolean)" & vbCrLf _
                    & "     Dim rng1 As Range" & vbCrLf _
                    & "     Set rng1 = Intersect(Target, Range([a6], Cells(Rows.Count, 1).End(xlUp)))" & vbCrLf _
                    & "     If rng1 Is Nothing Then Exit Sub" & vbCrLf _
                    & "     On Error Resume Next" & vbCrLf _
                    & "     If Target.Cells(1).Offset(0, 1) <> ""Worksheet"" Then Sheets(Target.Value).Activate" & vbCrLf _
                    & "     If Err.Number <> 0 Then MsgBox ""Could not select sheet"" & Target.Value" & vbCrLf _
                    & "End Sub" & vbCrLf

        Set vbCodeMod = ActiveWorkbook.VBProject.VBComponents(ws.CodeName)
        vbCodeMod.CodeModule.AddFromString strWScode
    End If

    'tidy up Application settins
    With Application
        .ScreenUpdating = True
        .DisplayAlerts = True
        .EnableEvents = True
    End With

ErrHandler:
    If Err.Number <> 0 Then MsgBox Err.Description & vbCrLf & "Please note that your Application settings have been reset", vbCritical, "Code Error!"
End Sub 
```

# jquery - 如何使用正则表达式在jquery中使用一位小数

> ID：14358444
> 
> 赞同：0
> 
> 时间：2013-01-16T12:25:17.627
> 
> 标签：jquery

我只想在输入类型中使用一位小数和唯一的数字。所以我使用的是 jquery，但问题是他使用了更多的小数？？？？？？我想喜欢这个：123.1245454
而不是 12345.12245.4554

```
$('#edit-discount').keyup(function() {
        var $th = $(this);
        $th.val($th.val().replace(/[^0-9.]/g, function(str) {
            $("#req-productdis").hide();
            $("#alpha1").show();
            return '';
        })); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:33:44.527

匹配`\d+\.?(\d+)?`并丢弃所有其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:36:22.617

看看这是否适合你。

```
alert(parseFloat('12345.12245.4554')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:41:51.327

试试这个：

```
var n = '12345.12245.4554';
n = n.replace(/[^0-9.]/g, ''); // trim to just numbers and dots
n = n.replace(/\./, 'x'); // note: NOT global - replaces first dot with x
n = n.replace(/\./g, ''); // note: global replace - remove all other dots
n = n.replace(/x/, '.'); // swap x back to .
alert(n); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T11:45:25.743

解决在具有十进制值的字段中查找多个小数点的方法。找不到回归。您可以使用以下代码：

```
function checkDot(textVal) {
    var amount = textVal.val();
    var dots = amount.split(".").length;
    if (dots > 2) {

        return false;
    } else {
        return true;
    }
} 
```

# ios - KVO 和重构

> ID：14358449
> 
> 赞同：5
> 
> 时间：2013-01-16T12:25:38.963
> 
> 标签：ios, objective-c, properties, refactoring, key-value-observing

可以说我有：

```
@property NSNumber* number; 
```

我的控制器正在观察：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ...
{
    if ([keyPath isEqualToString:@"number"]) ...
} 
```

我的问题是 -**你重构`number`属性**名称的方法是什么？

很明显，我需要更新观察者代码中的观察键，但是我怎样才能以某种智能/自动的方式来完成它，并且不会错过任何观察者来处理我的属性的变化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T12:59:45.030

一种方法是为所有正在观察的属性声明字符串常量。使用这些常量添加观察者和比较`keypath`。每当您想重命名属性时，都应该更改这些字符串常量的值。

我认为完全雾化是不可能的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T15:53:39.543

好的，我会回答自己：）我的解决方案是 Apurv 解决方案和单元测试的混合。

这里是：

**1**对于`MyClass`定义中的每个观察到的属性：

`static NSString* MyClassPropertyNameNumber = @"number";`

**2**在`- (void)observeValueForKeyPath:(NSString *)keyPath ...`实现中**仅**使用定义的 NSStrings。

```
- (void)observeValueForKeyPath:(NSString *)keyPath ...
{
    if ([keyPath isEqualToString:MyClassPropertyNameNumber]) ...
} 
```

**3**编写单元测试，它将检查 MyClass 对象是否响应`setNumber:`和`number`选择器。

```
- (void)testMyClass
{
    SEL numberGetter = NSSelectorFromString(MyClassPropertyNameNumber);
    SEL numberSetter = NSSelectorFromString([NSString stringWithFormat:@"set%@:", MyClassPropertyNameNumber]);

    MyClass* testMyClass = [[MyClass alloc] init];
    if (![testMyClass respondsToSelector:numberGetter] || ![testMyClass respondsToSelector:numberSetter])
    {
        STFail(@"%@: %@ property name has changed! Please update your defined property name!", NSStringFromClass([MyClass class]), MyClassPropertyNameNumber);
    }
} 
```

如果您更改属性名称并且不更新定义的属性名称，它将失败。

我希望它对某人有帮助:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T16:09:35.060

为每个观察到的键路径定义一个变量，在注册时和在观察者处理程序方法中使用它们作为上下文：

```
static void * numberKVO = &numberKVO;
static void * letterKVO = &letterKVO;

...
[self addObserver:self 
       forKeyPath:@"kp.4.number" 
          options:NSKeyValueObservingOptionNew 
          context:numberKVO];
[self addObserver:self 
       forKeyPath:@"kp.4.letter" 
          options:NSKeyValueObservingOptionNew 
          context:letterKVO];   
...

- (void) observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    if (context == numberKVO) {
        ...
    } else if (context == letterKVO) {
        ...
    }
} 
```

您可以在不更改任何其他内容的情况下修改属性和键路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-16T09:03:46.870

在处理 Core Data 模型类时，[Mogenerator是一个很棒的工具。](http://rentzsch.github.com/mogenerator/)它为所有属性、关系和获取的属性生成 NSString：

```
extern const struct ModelClassAttributes
extern const struct ModelClassRelationships
extern const struct ModelClassFetchedProperties 
```

# mysql - 按特定顺序排列数据

> ID：14358456
> 
> 赞同：6
> 
> 时间：2013-01-16T12:26:07.940
> 
> 标签：mysql, sql

我有一个包含 8 条记录的用户表。我想根据字段**id**（即该表的主键）按降序排列数据，但 id 3 和 5 除外。所以最终结果应该是

```
id  name
--  ----
3   peter
5   david
8   john
7   stella
6   jim
4   jack
2   nancy
1   scott 
```

除了 id 3 和 5 其余数据应按降序排列，3 和 5 应按升序排列。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T12:29:05.740

```
SELECT * FROM user ORDER BY IF(id=3 OR id=5, id, ~id) ASC 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T12:28:35.790

像这样的东西：

```
order by 
   case 
     when id = 3 then 999
     when id = 5 then 998
     else id
   end desc 
```

这假设您确实没有超过 8 行。否则，您必须更改将 3 和 5 移到顶部的“魔术”数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T12:29:05.427

我认为这里的诀窍是使用枚举。

```
SELECT id, name FROM my_table WHERE id IN (3, 5) ORDER BY ASC
UNION
SELECT id, name FROM my_table WHERE id NOT IN(3, 5) ORDER BY DESC 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T12:50:37.377

在 MySQL 中，有一个函数称为`FIELD`* 如果在列表中找不到值，则返回零，例如，

```
SELECT *
FROM   tableName
ORDER BY FIELD(id, 5, 3) DESC, id DESC 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/b93a1/5)

*   [场地](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_field)

# javascript - js修改输入值后“滚动”到输入的末尾

> ID：14358462
> 
> 赞同：8
> 
> 时间：2013-01-16T12:26:34.307
> 
> 标签：javascript, jquery

我有一个`<input id="inp" type="text">`用户写的，有时使用字典中的建议。选择建议后，我会：

```
var input = $('#inp'); 
input.val(input.val()+suggestedText+' '); 
input.focus(); // that is because the suggest can be selected with mouse 
```

一切都很好，但是在添加一个建议后，导致结果`input.val()`太长而无法放入编辑字段时，光标位于字符串的末尾（这很好），但只有字符串的开头在编辑中可见字段，所以光标也被隐藏了。

只要按下一个键（改变值的键），“滚动”就会转到隐藏开头的字符串的末尾......如何自动触发此行为，而无需按下键？

我在[这里](https://stackoverflow.com/questions/1962168/scroll-to-the-very-right-of-a-long-text-input)找到了一个解决方案- 但它并不好，因为整个输入体验都发生了变化......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:31:00.397

你有没有尝试过：

```
var input = $('#inp'); 
input.val(input.val()+suggestedText+' '); 
input.focus(); // that is because the suggest can be selected with mouse

var height=input.contents()[0].outerHeight()
input.animate({
    scrollTop:height
},'normal'); 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T13:49:25.683

谢谢大家的回答，同时我也发现了……当使用鼠标单击输入时失去焦点（单击其他），然后重新获得它（感谢input.focus（））-“滚动”到最后，但是当使用键盘选择建议时，焦点永远不会丢失，这就是它本身不是“滚动”的原因。我只是在 input.focus() 之前添加了 input.blur()，现在就像一个魅力......看看工作示例

```
http://46.4.128.78/input/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:35:27.377

要完成这项工作，您需要在设置值**之前**设置 focus() 。您可以通过多种方式解决此问题，例如：

```
input.focus(); // that is because the suggest can be selected with mouse
var input = $('#inp'); 
input.val(input.val() + suggestedText + ' '); 
```

或者这个：

```
function changeValue(element, newValue) {
    element.focus();
    element.val(element.val() + newValue + ' ');
} 
```

# asp.net - 自动生成部分类

> ID：14358463
> 
> 赞同：0
> 
> 时间：2013-01-16T12:26:36.167
> 
> 标签：asp.net, entity-framework, visual-studio-2012

这是我第一次在 VS2012 中使用 EF，因为到目前为止我一直在使用 2010。我添加了实体框架模型，它添加了 2 个扩展名为 .tt 的文件，我确信 VS2010 中不存在这些文件。在其中之一下，它会生成部分类以匹配实体。但是，我已经在我的应用程序根目录下另一个名为 Entites 的手动创建的文件夹中拥有这些部分类。当它们发生冲突时，这会导致构建问题......

我如何要么阻止它们自动生成，要么如何让它们与我手动创建的部分类一起玩得很好？VS2012 在不询问的情况下执行此操作非常烦人，因为它破坏了我的代码！

自动生成类的示例

```
namespace StatisticsServer
{
    using System;
    using System.Collections.Generic;

    public partial class Statistic
    {
        public int StatID { get; set; }
        public int CategoryID { get; set; }
        public int FranchiseID { get; set; }
        public double StatValue { get; set; }
    }
} 
```

手动创建类的示例

```
namespace StatisticsServer.Entities
{
    public partial class Statistic
    {
        public static List<Statistic> GetStatisticsSet(int categoryID)
        {
            List<Statistic> statSet = new List<Statistic>();
            using (var context = new StatisticsTestEntities())
            {
                statSet = (from s in context.Statistics where s.CategoryID == categoryID select s).ToList();
            }
            return statSet;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:45:17.607

确保您手动创建的类与自动生成的类位于相同的命名空间中。

否则这两个类将被视为单独的部分类，如果您在同一个调用类中使用两个命名空间，则无法确定您指的是哪个类。

因此，例如，在您的情况下，您可能有：

```
using StatisticsServer;
using StatisticsServer.Entities; 
```

然后，当您`Statistic`在该类中声明该类型的对象时，构建将失败，因为`Statistic`该类存在于两个命名空间中。

# gradle - 如何使用不同的规则集为 Main 和 Test 类生成 Codenarc 报告？

> ID：14358471
> 
> 赞同：2
> 
> 时间：2013-01-16T12:26:52.507
> 
> 标签：gradle, codenarc

我正在使用 CodeNarc 在我的项目中编写最佳实践，它工作得非常好。一般来说，Codenarc 根据配置文件中定义的规则集（在我的例子中为 codenarc.xml）为所有 Main 类和 Test 类分别生成报告。我已经习惯在我的项目中使用以下代码片段：

```
apply plugin: 'codenarc'

dependencies {
    codenarc group: 'org.codenarc', name: 'CodeNarc', version: '0.17'
}

codenarc {
    configFile = file('src/conf/codenarc.xml')
} 
```

我不想强制执行 Main 和 Test 类的所有规则（**例如，我可能想从 Test 类中排除一些规则集**）。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T13:19:06.680

您可以单独配置`CodeNarc`任务：

```
codenarcMain {
    configFile = ...
}

codenarcTest {
    configFile = ...
} 
```

PS：我建议使用简写依赖表示法：

```
dependencies {
    codenarc "org.codenarc:CodeNarc:0.17"
} 
```

# ios - 从 PhoneGap 应用程序中删除未使用的启动屏幕和图标

> ID：14358476
> 
> 赞同：3
> 
> 时间：2013-01-16T12:27:11.090
> 
> 标签：ios, cordova, icons, splash-screen

我有一个非常大的应用程序大小。我试图删除不必要的初始屏幕和图标的默认图像文件（我不支持 ipad）。但是我得到一个 PBXCp 错误（如 /icon-72.png：没有这样的文件或目录），即使我只为 iphone 配置了项目，并且我已经删除了 -Info.plist 上的 ipad 图标引用。

任何人都知道为什么我会收到此错误？

我还想尽可能减小文件大小。我已经删除了不需要的 Capture.bundle 文件。还有什么想法吗？

非常感谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T12:29:30.603

1)

您的项目中仍然有对“ `icon-72.png`”文件的引用。

检查您的项目的构建阶段（例如，特别是“复制捆绑资源”阶段）并打开项目中的所有文件夹以确保那里没有列出红色（即丢失）文件。

2)

对于较大的图形文件，将图像或其他任何内容托管在您的一台服务器上，然后让应用程序下载并缓存它。这将有助于减少初始下载大小。

# php - 需要在magento的控制器功能中退出

> ID：14358478
> 
> 赞同：0
> 
> 时间：2013-01-16T12:27:16.920
> 
> 标签：php, magento

我正在阅读**Alan Storm**写的**No frills magento layout** book 。我遇到了以下代码：

 **```
public function handleAction()
{
    $this ->loadLayout();
    $handles = Mage::getSingleton('core/layout')->getUpdate()->getHandles();
    var_dump($handles);
    exit;
} 
```

这段代码中那个**出口的需要是什么？**该代码在没有那个**exit**的情况下完美运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:32:45.093

它停止执行其余代码，查看该脚本似乎它的目的是调试某些东西。渲染页面的其余部分不会使调试变得更容易，因为将应用 CSS 样式可能会`var_dump()`降低可读性。

也可能涉及重定向或其他可能导致您`var_dump()`立即消失`exit`的情况，使用您阻止重定向发生。

最重要的是，不需要渲染其余的代码。**

# svn - SVN HTML文件未在chrome中打开

> ID：14358481
> 
> 赞同：1
> 
> 时间：2013-01-16T12:27:20.703
> 
> 标签：svn

我为设计原型创建了 SVN 颠覆，并使用 Design 创建了 HTML 文件以显示客户端。

HTML 文件在 IE 中可以正常打开。在 Firefox 和 Chrome 中，它显示的是 HTML 代码而不是页面。

如何让它在 Firefox 和 Chrome 中正确显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T12:31:48.500

听起来您没有为文件设置 mime 类型，因此服务器将其作为 text/plain 发送，并由两个浏览器进行相应解释。

如果您的文件名为“myfile.html”，请尝试设置其 mime 类型，因此：

```
svn propset svn:mime-type "text/html" myfile.html 
```

有关详细信息，请参阅[red-bean SVN Book](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.httpd.html#svn.serverconfig.httpd.extra.browsing.mimetype)（和[此处](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.propset.html)）。

# cakephp - cakePHP 1.3 选择具有相同值但不同文本的类型

> ID：14358483
> 
> 赞同：1
> 
> 时间：2013-01-16T12:27:25.257
> 
> 标签：cakephp, cakephp-1.3

我想要下面的东西：

```
<select>
<option value="">Select...</option>
<option value="1">1</option>
<option value="1">2</option>
<option value="1">3</option>
</select> 
```

我为选择类型的选项使用了一个数组，但该数组不允许我拥有一个具有相同索引的数组（这是值）

```
echo $this->Form->input('something', array('options'=>$array)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:07:18.877

您不能创建如下数组：

```
array(1 => 1, 1 => 2, 1 => 3); 
```

所以只能手动制作。

```
<select name="data[something]" id="something">
    <option value="">Select...</option>
    <option value="1">1</option>
    <option value="1">2</option>
    <option value="1">3</option>
</select> 
```

或者按照通常的方式使用jquery之类的东西

```
$('select').on('change', function() {
    $(this).val(1);
}); 
```

# datepicker - 剑道日期选择器深度去年最后一天

> ID：14358484
> 
> 赞同：0
> 
> 时间：2013-01-16T12:27:27.410
> 
> 标签：datepicker, kendo-ui

我正在尝试使用以下选项初始化剑道“日期选择器”：

```
$("#elementid").kendoDatePicker({
    //... 
    depth: "year"
}); 
```

当我在小部件中更改月份时，我想在我的视图模型中设置所选月份的最后一天（而不是默认情况下的第一天）。

例如：通过选择“一月”，日期选择器设置为“01/01/2013”​​，但我希望它返回“31/01/2013”​​（最后一天）。

有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:54:25.110

将您定义`kendoDatePicker`为：

```
$("#elementid").kendoDatePicker({
    ...
    depth : "year",
    change: function (e) {
        var val = this.value();
        this.value(new Date(val.setMonth(val.getMonth() + 1, 0)));
    }
}); 
```

我们处理该`change`事件并使用 JavaScript 计算所选日期的最后一天。

# javascript - HTML5 应用程序中的后台数据下载到浏览器数据库 - settimeout 与工作线程

> ID：14358491
> 
> 赞同：0
> 
> 时间：2013-01-16T12:27:47.550
> 
> 标签：javascript, settimeout, worker-thread

知道

*   Javascript 是严格的单线程并且 settimeout 不会产生新线程。相反，它遵循事件循环模型
*   工作线程是 HTML5 的新特性，但并非所有 HTML5 浏览器都支持它

我应该使用哪一个来进行后台数据下载？如果您有任何经验或有任何可用的基准数据，请分享。

不知道问这个问题有多重要，但为了完整起见，我想提一下数据应该是 XML 格式，并且将调用多个服务器端服务来获取数据。是否已经有一个框架可以同时满足基于手持设备的浏览器和基于桌面的浏览器数据下载的需求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:30:59.400

Javascript 是单线程的，但这并不意味着数据不会并行下载。如果您进行异步 AJAX 调用，则您正在后台下载数据，而其余代码正在运行。

Web Worker 的目的是在主线程之外执行 CPU 繁重的工作。它们不会帮助您更快地获取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T01:06:12.000

这是一个线程，他们展示了如何使用 JQuery 运行一堆并行 AJAX 调用 使用 jQuery 的[并行异步 Ajax 请求](https://stackoverflow.com/questions/1060539/parallel-asynchronous-ajax-requests-using-jquery/1060784#1060784)

我能想到使用工作线程的唯一原因是让它不断与服务器通信，但在这种情况下，websockets 是一个更好的解决方案[http://www.html5rocks.com/en/tutorials/websockets/basics/](http://www.html5rocks.com/en/tutorials/websockets/basics/)

Web Worker 仅在 IE10+ 上受支持，因此如果您想支持旧版本的 IE，您仍然需要一个备用解决方案。[http://msdn.microsoft.com/en-us/library/ie/hh673568(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/hh673568(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T04:03:06.347

工作线程尚未在所有主要浏览器上得到支持，因此我认为将工作线程纳入您的设计并不是一个好主意，除非您只想支持最新的浏览器。

所有的 Ajax 调用都可以并行进行，但我想你的问题将是如何知道所有 ajax 调用的响应已经到来并且数据被插入/更新到浏览器的数据库中。知道所有 AJAX 响应都已处理的一种方法是链接所有 AJAX 调用。但这将保证您将 AJAX 调用序列硬编码到您的代码库中。如果这不是可取的，那么您将需要一个单独的异步流来继续检查是否所有 AJAX 调用都已得到响应。您可以通过为每个 ajax 调用设置一个标志并在使用响应时将其设置为 true 来实现这一点。然后，您将继续检查另一个流程中所有标志的状态（使用 settimeout 开始）。

我知道任何现有的框架都可以处理这种复杂的活动，因此您必须自己编写代码。希望这会帮助你给出一些方向。

# php - PHP - 通过超链接删除目录中列出的文件

> ID：14358492
> 
> 赞同：0
> 
> 时间：2013-01-16T12:27:52.310
> 
> 标签：php, directory, unlink

我正在尝试列出目录中的所有文件并在单击“删除”链接时删除文件，但是，它告诉我该文件不存在，向我显示以下错误消息：

```
Notice: Undefined index: dir in C:\xampp\htdocs\Task2PHP\final\deletefile.php on line 4

Warning: unlink(adam.png): No such file or directory in C:\xampp\htdocs\Task2PHP\final\deletefile.php on line 7 
```

files.php（代码块）：

```
@$selected_path = $_POST['myFiles'];

$dir = $selected_path;

echo "<br>Current files in: " . $dir . " <br /><br />";

if ($handle = opendir($dir)) {
   while (false !== ($file = readdir($handle))) {
        if ($file != "." && $file != "..") {

            echo "$file <a href=deletefile.php?file=$file>DELETE</a><br />"; 
        }
    }
    closedir($handle);
} 
```

删除文件.php

```
<?php
session_start();
$username = $_SESSION['username'];
$dir = $_SESSION['dir'];
$file= basename($_GET['file']);//added

unlink("$file");

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:35:51.510

该`unlink()`函数将查找`adam.png`相对于 的位置`deletefile.php`。如果图像在目录中，则需要如下所示：

```
session_start();
$username = $_SESSION['username'];
$dir = $_SESSION['dir'];
$file= basename($_GET['file']);//added
unlink('folder/container/'.$file); // or maybe you want unlink($dir.$file); 
```

或者，您可以通过将您的语句`deletefile.php`更改为来传递目录：`echo``files.php`

```
echo "$file <a href=\"deletefile.php?file=$file&dir=$dir\">DELETE</a><br />"; 
```

然后您可以在`deletefile.php`through内部访问它`$_GET['dir']`，因此您的代码将类似于：

```
$dir = $_GET['dir'];
$file = basename($_GET['file']);
unlink($dir.$file); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:42:15.053

这是因为`unlink("$file");`$file 只是文件名，它应该是绝对路径或正确的相对路径。检查路径使用 ../ 和 ./ 给出相对路径。

# c++ - C++ 中的 fprintf 和 vfprintf 有什么区别？

> ID：14358497
> 
> 赞同：5
> 
> 时间：2013-01-16T12:28:06.410
> 
> 标签：c++, c, access-violation, printf

我无法找到以下问题的答案，并且遇到了一些与功能相关的问题。

我的主要编程是用 C# 完成的，在学习时从未真正学习过 C++，但在我目前的工作中，我还必须做一些 C++ 编程。

大多数 C++ 编程都是由一位前雇员完成的，他制作了一个日志功能。

有时，此功能会导致错误（访问冲突） - 这不会向用户显示，但我在通过调试器运行代码时会看到它。

当错误发生时，它指向这行代码：

```
vfprintf( LogFile, fmt, va ); 
```

然后我仔细查看了之前和之后的代码，并将上面的代码放入上下文中，代码是：

```
void FileLog( char *fmt, ... )
{
  va_list       va;
  struct  time  t;
  struct  date  d;
  long          clk;
  static int    ReEntrant = 0;

  if( FileLogEnabled == false )
    return;

  ReEntrant++;
  if( ReEntrant > 1 )
    return;

  if( LogFile == NULL )
    LogFile = fopen( LogFileName, "a+" );
  if( LogFile != NULL )
  {
    gettime( &t );
    getdate( &d );
    fprintf( LogFile, "\n%d-%02d-%02d %2d:%02d:%02d.%02d0> ", d.da_year, d.da_mon, d.da_day, t.ti_hour, t.ti_min, t.ti_sec, t.ti_hund );

    va_start( va, fmt );
    vfprintf( LogFile, fmt, va );
    va_end( va );

    fflush( LogFile );
    ...
  }
  ReEntrant = 0;
} 
```

实际上我不明白为什么需要它（如果需要？）调用 fprintf 然后调用 vfprintf？我认为第一个 fprintf 调用会将格式化的字符串写入流（文件），这就足够了吗？

一点解释或一些信息将不胜感激:)

**编辑：**在 nos 发表评论后 - 我追踪了对今天经常导致此错误的函数的特定调用。

```
FileLog( "TimerRestore[%d], Name=%s", Package.CurGame->Timers[ Index ].Name.c_str() ); 
```

我确实认为这可能会引起一些麻烦，因为“TimerRestore[%d], Name=%s”后面应该跟着一个小数和字符串argumtn，但是只给出了一个字符串参数。我需要做一些测试，但我确定编写此代码的作者的意思是：

```
FileLog( "TimerRestore[%d], Name=%s", Index, Package.CurGame->Timers[ Index ].Name.c_str() ); 
```

但是我仍然不明白为什么函数调用似乎并不总是导致错误。或者可能是 FileLog 函数中的“ReEntrant”变量在它没有失败时阻止它的原因？

非常感谢所有的反馈和信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T12:33:21.737

`vprintf()`（和朋友）允许[`va_list`](http://www.cplusplus.com/reference/cstdarg/va_list/)用作参数，这在您的函数具有可变数量的参数时很有用：

```
void log(FILE *file, const char* format, ... )
{
  va_list args;
  va_start (args, format);
  fprintf(file, "%s: ", getTimestamp());
  vfprintf (file, format, args);
  va_end (args);
} 
```

在您的应用程序中，您可以使用可变数量的参数调用此函数：

```
log(file, "i=%d\n", i);           // 3 arguments
log(file, "x=%d, y=%d\n", x, y);  // 4 arguments 
```

我不知道你的函数为什么会导致错误。您的代码片段没有提供足够的详细信息。提供的函数参数类型的数量*可能*是原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T12:38:44.470

首先，在 C++ 中使用`fprintf()`and （尤其是）是**邪恶的。**`vfprintf()`

 **要点：`fprintf()`是一个可变参数函数，它接受任意数量的参数。在内部，可变参数函数是通过使用 和 来“解包”可变参数来实现`va_list`的。`va_start()``va_end()`

`vfprintf()`当您在解压缩自己的可变参数（即，您可以访问实例）*后*`fprintf()`从您自己的可变参数函数中访问 的功能时使用。不是可变**的**；它接受存储参数。*`va_list``vfprintf()`**`va_list`***

 ***您尚未发布函数调用的声明`fprintf()`and `vfprintf()`，但我们可以假设它是可变参数。它首先用于`fprintf()`将一些数据打印到 中`LogFile`，然后用于`vfprintf()`在其中打印自己的可变参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:33:26.197

`vfprintf`允许您拥有*可变参数列表*，这意味着您可以在运行时动态创建参数列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T12:36:44.627

这对于日志记录非常常见。您想制作一个 printf 样式的日志消息，例如：

```
Log("The value of x is now %d", x); 
```

但这需要可变参数。所以你需要`vfprintf`. 使用的原因`fprintf`也是因为它想要写入日期/时间戳，并且您不能将额外的内容添加到传递给`vfprintf`.

另一种方法是使用字符串 version `vsprintf`，并制作一个大字符串，然后将其写入文件。但这更容易出错（如缓冲区溢出）。*****

# java - 如何在 Swing 上将 ImageIcon 变为灰色

> ID：14358499
> 
> 赞同：10
> 
> 时间：2013-01-16T12:28:06.743
> 
> 标签：java, image, swing, image-processing, grayscale

我想知道 Swing 中是否有某种方法可以将 ImageIcon 转换为灰度，例如：

```
component.setIcon(greyed(imageIcon)); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-16T13:59:20.797

一个限制`GrayFilter.createDisabledImage()`是它旨在为各种外观实现中的图标创建*禁用外观。*使用此`ColorConvertOp` [示例](https://stackoverflow.com/a/12228640/230513)，以下图像对比效果：

`GrayFilter.createDisabledImage()`：`com.apple.laf.AquaLookAndFeel` ![图片](../Images/7eb8083df8669dea254b9a1379a3969c.png)

`ColorConvertOp#filter()`：`com.apple.laf.AquaLookAndFeel` ![图片](../Images/d5b31743d3c340437df9eb70123bfafd.png)

`GrayFilter.createDisabledImage()`：`com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel` ![图片](../Images/4c6522b5f09020ffa96eb1f1664e9256.png)

`ColorConvertOp#filter()`：`com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel` ![图片](../Images/24bf14f4757266880476fd6f74bc86a5.png)

```
/**
 * @see https://stackoverflow.com/q/14358499/230513
 * @see https://stackoverflow.com/a/12228640/230513
 */
private Icon getGray(Icon icon) {
    final int w = icon.getIconWidth();
    final int h = icon.getIconHeight();
    GraphicsEnvironment ge =
        GraphicsEnvironment.getLocalGraphicsEnvironment();
    GraphicsDevice gd = ge.getDefaultScreenDevice();
    GraphicsConfiguration gc = gd.getDefaultConfiguration();
    BufferedImage image = gc.createCompatibleImage(w, h);
    Graphics2D g2d = image.createGraphics();
    icon.paintIcon(null, g2d, 0, 0);
    Image gray = GrayFilter.createDisabledImage(image);
    return new ImageIcon(gray);
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-16T12:28:06.743

您可以使用以下内容：

```
ImageIcon icon = new ImageIcon("yourFile.gif");
Image normalImage = icon.getImage();
Image grayImage = GrayFilter.createDisabledImage(normalImage); 
```

# ios - 重命名 iCloud 文档

> ID：14358504
> 
> 赞同：4
> 
> 时间：2013-01-16T12:28:21.527
> 
> 标签：ios, icloud, nsfilemanager, uidocument, nsfilecoordinator

## 问题

到目前为止，我所拥有的是创建新本地文件并删除 iCloud 文件的代码。

**是否可以重命名 iCloud 文档以使其保留在 iCloud 中？**

GarageBand 可以做到。可以重命名 iCloud 歌曲。重命名完成后，歌曲仍在 iCloud 中。但是 GarageBand 是 Apple 应用程序，因此它可能使用私有 api。

我当前的代码：

```
- (void)moveFrom:(NSURL*)sourceURL
          moveTo:(NSString*)destinationName
      completion:(void (^)())completion
{
    MyDocument *document = [[MyDocument alloc] initWithFileURL:sourceURL];
    [document openWithCompletionHandler:^(BOOL success)
    {
        NSURL *fileURL = [self.localRoot URLByAppendingPathComponent:destinationName];
        DLog(@"Create %@", fileURL);
        [document saveToURL:fileURL
           forSaveOperation:UIDocumentSaveForCreating
          completionHandler:^(BOOL success)
        {
            NSLog(@"Saved %@", fileURL);
            [document closeWithCompletionHandler:^(BOOL success) {
                // Delete the old document from a secondary thread
                dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^()
                {
                    NSFileCoordinator* fileCoordinator = [[NSFileCoordinator alloc] initWithFilePresenter:nil];
                    [fileCoordinator coordinateWritingItemAtURL:sourceURL
                                                        options:NSFileCoordinatorWritingForDeleting
                                                          error:nil
                                                     byAccessor:^(NSURL* writingURL) {
                        NSFileManager* fileManager = [[NSFileManager alloc] init];
                        [fileManager removeItemAtURL:writingURL error:nil];
                        DLog(@"Deleted %@", sourceURL);
                        completion();
                    }];
                });
            }];
        }];
    }];
} 
```

## 更新：仍然没有运气

我发现`-setUbiquitous:itemAtURL:destinationURL:error:`不能用于重命名文档。

如果我在已经本地的文件上调用 [setUbiquitous:NO itemAtURL:oldLocalURL destinationURL:newLocalURL error:&error]，则：

> 错误域=NSCocoaErrorDomain 代码=512“操作无法完成。（Cocoa 错误 512。）”UserInfo=0x1fdf6730 {NSURL=file://localhost/var/mobile/Applications/4BABA000-B100-49FC-B928-B0F403FC75FF /Documents/LocalDrawing.td2/, NSUnderlyingError=0x20940e80 “操作无法完成。（LibrarianErrorDomain 错误 2 - 无法在未同步的项目上禁用同步。）”}

如果我在已经云文件上调用 [setUbiquitous:YES itemAtURL:oldCloudURL destinationURL:newCloudURL error:&error]，则：

> 错误域=NSCocoaErrorDomain 代码=512“操作无法完成。（Cocoa 错误 512。）”UserInfo=0x208e9820 {NSURL=file://localhost/var/mobile/Library/Mobile%20Documents/22DR89XVRF~com~opcoders ~triangle-draw/Documents/CloudDrawing.td2/, NSUnderlyingError=0x208d45b0 “操作无法完成。（LibrarianErrorDomain 错误 2 - 无法在同步项目上启用同步。）”}

因此`-setUbiquitous:itemAtURL:destinationURL:error:`不能用于重命名文档。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T01:22:58.357

我终于解决了。到目前为止，这是我的代码：

```
- (void)_moveURL:(NSURL*)sourceURL
         destURL:(NSURL*)destinationURL
         success:(void (^)())successBlock
         failure:(void (^)(NSError *))failureBlock
{
    NSParameterAssert(sourceURL);
    NSParameterAssert(destinationURL);
    NSParameterAssert(successBlock);
    NSParameterAssert(failureBlock);

    // Do the actual renaming
    __block NSError *moveError = nil;
    __block BOOL moveSuccess = NO;
    void (^accessor)(NSURL*, NSURL*) = ^(NSURL *newURL1, NSURL *newURL2) {
        NSFileManager *fileManager = [[NSFileManager alloc] init];
        moveSuccess = [fileManager moveItemAtURL:sourceURL toURL:destinationURL error:&moveError];
    };

    // Coordinate renaming
    NSError *coordinatorError = nil;
    NSFileCoordinator *coordinator = [[NSFileCoordinator alloc] initWithFilePresenter:nil];
    [coordinator coordinateWritingItemAtURL:sourceURL
                                    options:NSFileCoordinatorWritingForMoving
                           writingItemAtURL:destinationURL
                                    options:NSFileCoordinatorWritingForReplacing
                                      error:&coordinatorError
                                 byAccessor:accessor];
    if (moveSuccess) {
        successBlock();
        return;
    }
    if (moveError) {
        failureBlock(moveError);
        return;
    }
    if (coordinatorError) {
        failureBlock(coordinatorError);
        return;
    }
    NSAssert(NO, @"should not happen");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-17T00:17:01.253

有一种更简单的方法可以重命名任何给定 URL 上的项目，包括 iCloud URL。

```
url.setResourceValue(newName, forKey: NSURLNameKey) 
```

我在我的可可应用程序的生产代码中使用它。

**编辑：** 在 Swift 5 中，这看起来有点不同，但仍然运行良好：

```
var resourceValues = URLResourceValues()
resourceValues.name = newName
try previousFileURL.setResourceValues(resourceValues) 
```

# c# - 从嵌入列表中删除项目 using LINQ All, I have the following class structure public class Foo : IComparable <foo>{ public List <bar>Bars; } public class Bar : IComparable <bar>{ public List <con 1="" 1111="" 问问题="" 2013-01-16t12:28:25.307="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" all,="" i="" have="" the="" following="" class="" structure="" public="" foo="" :="" icomparable<foo="">{ public List <bar>Bars; } public class Bar : IComparable <bar>{ public List <con>Cons; } public class Con : IComparable <con>{ ... } I know how to remove object from a list authorsList.RemoveAll(x => x.FirstName == "Bob"); But how, for my class above, do I remove a List <con>called badConList, from my base object Foo? Explicitly, the class hierarchy is populated like Foo foo = new Foo(); foo.Bars = new List<bar>() { /* Some Bar list */ }; foreach (Bar bar in foo.Bars) bar.Cons = new List<con>() { /* Some Con list */ }; // Now a bad Con list. List <con>badCons = new List() { /* Some bad Con list */ }; How do I remove the badCons from foo for each Bar using LINQ? Thanks for your time. Ps. LINQ may not be the quickest method here; a simple loop might be (which is what LINQ will be doing under the hood anyway). Can you comment on this also? Date , String , format java , android datepicker I have a String which contains date in the format dd/mm/yyyy. For example lastDate = "1/2/2012" -> I get this date from date picker dialog. Now I have questions for this . I need to add 0 infront of date or month , if it is single digit . after the operation my date should be 20120201 ,any how I have done removing the delimeters and reversing the string , but I am stuck up , In adding 0 for day or month , if they are less than 10 , or single digit. c#linqclass 4 1 回答 1 This answer is useful 3 您仍然可以使用RemoveAll： bar.Cons.RemoveAll(x => badCons.Contains(x)); 另一种解决方案是使用循环： foreach(var badCon in badCons) bar.Cons.Remove(badCon); 两个版本都会多次循环列表之一： 第一个版本循环badConsN 次，其中 N 为bar.Cons.Count()。 第二个版本循环bar.ConsN 次，其中 N 为badCons.Count()。 如果两个列表中的一个比另一个大，最好选择只循环大列表一次的版本，否则使用对您和代码库的读者更容易理解的版本。 于 2013-01-16T12:31:15.217 回答 Related 2 cocos2d-iphone - 无法停止 cocos2d 中的操作 1 c# - 装饰通用注册的子集 1 java - 从本地服务器数据库到嵌入式数据库 1 mysql - 访问等于值的 SQL 计数字段 1 r - Cedergren 数据集在 ubuntu 中下载 1 google-maps - 使用 Geoxml3 在 Google 地图上加载 KML 图层 1 php - 使用 JQuery 访问 HTML 下拉菜单值，然后调用 PHP 函数 3 sql - 比较地址 1 c# - ASP .NET 用户配置文件中的 WebSecurity 未创建 5 php - 通过 CLI 获取“不推荐使用以 '#' 开头的评论”消息 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</con></con></bar></con></con></con></bar></bar></con></bar></bar></foo>

> ID：14358505
> 
> 赞同：1
> 
> 时间：
> 
> 标签：c#, linq, class

All, I have the following class structure

```
public class Foo : IComparable<Foo> 
{
    public List<Bar> Bars;
}

public class Bar : IComparable<Bar> 
{
    public List<Con> Cons;
}

public class Con : IComparable<Con>
{
    ...
} 
```

I know how to remove object from a list

```
authorsList.RemoveAll(x => x.FirstName == "Bob"); 
```

But how, for my class above, do I remove a `List<Con>` called `badConList`, from my base object `Foo`? Explicitly, the class hierarchy is populated like

```
Foo foo = new Foo();
foo.Bars = new List<Bar>() { /* Some Bar list */ };
foreach (Bar bar in foo.Bars)
    bar.Cons = new List<Con>() { /* Some Con list */ };

// Now a bad Con list.
List<Con> badCons = new List() { /* Some bad Con list */ }; 
```

How do I remove the `badCons` from `foo` for each `Bar` using LINQ?

Thanks for your time.

*Ps. LINQ may not be the quickest method here; a simple loop might be (which is what LINQ will be doing under the hood anyway). Can you comment on this also?*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T12:31:15.217

您仍然可以使用`RemoveAll`：

```
bar.Cons.RemoveAll(x => badCons.Contains(x)); 
```

另一种解决方案是使用循环：

```
foreach(var badCon in badCons)
    bar.Cons.Remove(badCon); 
```

两个版本都会多次循环列表之一：

1.  第一个版本循环`badCons`N 次，其中 N 为`bar.Cons.Count()`。
2.  第二个版本循环`bar.Cons`N 次，其中 N 为`badCons.Count()`。

如果两个列表中的一个比另一个大，最好选择只循环大列表一次的版本，否则使用对您和代码库的读者更容易理解的版本。

# java - 日期，字符串，格式java，android datepicker

> ID：14358506
> 
> 赞同：2
> 
> 时间：2013-01-16T12:28:29.590
> 
> 标签：java, android, string, date, date-format

我有一个包含日期格式的字符串`dd/mm/yyyy`。例如`lastDate = "1/2/2012"`-> 我从日期选择器对话框中获取此日期。现在我对此有疑问。如果是个位数，我需要在日期或月份前面添加 0。操作后我的日期应该是`20120201`，无论我如何删除分隔符并反转字符串，但我被卡住了，如果它们小于 10 或单个数字，则添加 0 表示日或月。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:32:56.977

如果您使用`DatePicker`，那么您将获得年、月和日作为整数。因此，要构建所需的字符串，您可以使用`String.format`：

```
String.format("%d%02d%02d", year, month, day); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:51:17.643

如果您使用的是 DatePicker，则可以使用 @NikitaBeloglazov 方法。但在其他情况下，如果您将日期作为字符串，则可以使用[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)类为您进行解析和格式化。有关详细信息和教程请检查[http://www.xyzws.com/javafaq/how-to-use-simpledateformat-class-formating-parsing-date-and-time/142](http://www.xyzws.com/javafaq/how-to-use-simpledateformat-class-formating-parsing-date-and-time/142)

# fonts - Merge ttf files

> ID：14358510
> 
> 赞同：22
> 
> 时间：2013-01-16T12:28:40.947
> 
> 标签：fonts, merge

Does anyone know how what is the best way to merge different ttf files. I mean font files.
I have two ttf file and I want to have one where English characters are taken from the first one and Japanese from another one.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-17T10:23:37.467

使用字体编辑器复制和粘贴。我过去使用过[FontForge](http://fontforge.github.io/)（开源、免费、Windows、OSX、Linux）和[FontLab](http://www.fontlab.com/)（商业、Windows、OSX），效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-08T19:36:40.030

如果您只需要合并字体，那么FontLab 的[TransType](http://www.fontlab.com/font-converter/transtype/)是一个不错的选择。我不隶属于，只是使用该应用程序十多年！

# image - Sobel Edge detection – matlab

> ID：14358512
> 
> 赞同：4
> 
> 时间：2013-01-16T12:28:47.483
> 
> 标签：image, matlab, image-processing

hello as part of my Homework. i need to calculate and display the edge magnitude image and the edge direction image of image balls1.tif, using Sobel Edge detection.

Do not use matlab's edge function. You may use conv2. Display a binary edge image (1 edge pixel, 0 no edge) of strong edge pixels (above a threshold). Determine a threshold that eliminates the ball shadows.

here is my main.m

```
addpath(fullfile(pwd,'TOOLBOX'));
addpath(fullfile(pwd,'images'));

%Sobel Edge Detection 
Image = readImage('balls1.tif');
showImage(Image);
message = sprintf('Sobel Edge Detection');
sobelEdgeDetection(Image);
uiwait(msgbox(message,'Done', 'help'));
close all 
```

here is my SobeEdgeDetection.m

```
function [ output_args ] = SobelEdgeDetection( Image )

maskX = [-1 0 1 ; -2 0 2; -1 0 1];
maskY = [-1 -2 -1 ; 0 0 0 ; 1 2 1] ;

resX = conv2(Image, maskX);
resY = conv2(Image, maskY);

magnitude = sqrt(resX.^2 + resY.^2);
direction = atan(resY/resX);
thresh = magnitude < 101;
magnitude(thresh) = 0;
showImage(magnitude);

end 
```

my questions are:
1\. i what is the direction used for ? and how can i display it?
2\. is there a better way to get a threshold to eliminate the ball shadows. i used trial and error....

![enter image description here](../Images/492324bcd47de01426a642f8646b49bb.png)

these are my result as far as showing the magnitude:

![enter image description here](../Images/4d966aea92ebed02ccab5976790e6064.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:52:27.320

这是您第一个问题的答案：

在 Sobel 边缘检测算法中。得到的方向基本上是梯度。

**图像处理中的梯度**定义为强度变化最大的方向。变化可以是强度增加或强度降低。此外，这种变化是针对每个像素计算的，这意味着对于每个像素，强度的最大变化都会被测量。resX （在您的问题示例中，SobelEdgeDetection.m）表示 X 方向的变化， resY 定义 Y 方向的变化。

看到它实际上只是在 Matlab 的命令窗口中触发这个命令： imshow(resX);

也试试，imshow(resY)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:02:06.097

根据你作业的第二部分你已经解决了它，即你消除了阴影。

对于第一个问题：方向可以以多种不同的方式使用。这是最简单的方法：用它制作漂亮的照片。考虑它的一个更有用的理由是当您进行非最大抑制时，但由于您不是手动执行它，因此它没有太多直接用途。为了可视化渐变方向的结果，只需为您考虑的每个方向建立颜色即可。为了进一步简化可视化，还假设您将方向从 0 开始减少到 30 度到 180 的增量。这样，如果您有 35 度的方向，例如，您将其视为 30 度（因为它是最近的在您的精简列表中的一个）。

![在此处输入图像描述](../Images/06fc7a5cf3cd5674e6fa9711dc59a3be.png) ![在此处输入图像描述](../Images/739498e015df5f9081e974ae6b496268.png)

自动确定好的阈值通常不是一件容易的事。例如，您可以从 Otsu 方法提供的值开始，然后根据您要解决的问题，根据其他一些直方图分析来减少或增加其值。

# android - android.view.windowmanager Bad TokenException:unable to add window for Dialog on android

> ID：14358516
> 
> 赞同：0
> 
> 时间：2013-01-16T12:28:55.643
> 
> 标签：android, android-dialog

在我的应用程序中，我正在显示来自非活动类的自定义对话框。它可以工作，但很少崩溃，原因如下：

```
android.view.windowmanager Bad TokenException:unable to add window-
token android.os.binderproxy@2afac69d8 is not valid;is your activity running? 
```

我的编码结构：

```
 MainActivity.java(Activity class)

 public class MainActivity extends TabActivity {
    @Override
     public void onCreate(Bundle savedInstanceState)
      {
        super.onCreate(savedInstanceState);
            ........
            UpdateClass obj = new UpdateClass(MainActivity.this);
            obj.checkUpdate(); 
      }
 } 
```

UpdateClass.java（非活动类）

```
public class UpdateClass{

UpdateClass(MainActivity mainActivity ){
  this.context = mainActivity;
}

checkUpdate(){

    dialog_Update = new Dialog(context);
    ...
    updateButton.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {
        ....
        }
    });
    cancelButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            dialog_Update.dismiss();
        }
    });

    dialog_Update.show();  
   ......               
 } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:56:48.463

只需尝试如下实现：

> ```
> public class MainActivity extends TabActivity {
> @Override
>  private Context context;
>  public void onCreate(Bundle savedInstanceState)
>   {
>     super.onCreate(savedInstanceState);
>         ........
>       context=MainActivity.this;
>         UpdateClass obj = new UpdateClass(context);
>         obj.checkUpdate(); 
>   } 
> ```
> 
> }

在您的`UpdateClass`. 而不是传递`MainActivity`in 构造函数传递`Activity`如下：

> ```
> public class UpdateClass{
>     pdateClass(Activity mainActivity ){ <----Pass the activity here.
>     this.context = mainActivity;
>   }
>      ......               
>   } 
>  } 
> ```

# dojo - 如何使dojo离线工作

> ID：14358517
> 
> 赞同：0
> 
> 时间：2013-01-16T12:28:55.690
> 
> 标签：dojo, offline

我有一个加载[http://ajax.googleapis.com/ajax/libs/dojo/1.3.2/dojo/dojo.xd.js](http://ajax.googleapis.com/ajax/libs/dojo/1.3.2/dojo/dojo.xd.js)的项目，我希望能够离线使用这个项目我尝试下载 dojo.xd .js 并在本地链接到它，但这仍然无法离线工作在 firebug 中，在 net 选项卡上，我可以看到有更多的 .js 文件加载

有没有一种简单的方法可以使这项工作脱机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:39:38.930

集成方式取决于您使用它的方式。

我假设你有本地运行的网络服务器（没有 inet 访问）？！

在[dojo 网站上](http://dojotoolkit.org/download/)，有几种可用的 dojo 集成方式。只需下载其中一个（不要使用 CDN）并将文件放在本地 Web 服务器上。然后它可以通过本地 url 获得（可以相对于您的站点）。

如果您不想在没有网络服务器的情况下构建“离线”应用程序，请查看 Adob​​e AIR 以及 dojo 工具包与[Dojo Extensions for Adob](http://code.google.com/p/dair/) ​​e AIR 的交互。

另一种选择可能是与[PhoneGap](http://phonegap.com/)或[Cordova](http://cordova.apache.org/)集成以构建离线应用程序，例如使用HTML/Javascript 的iPhone 等。M$ AppStore 的 Win8/RT 应用程序也支持 HTML/Javascript（尚未使用 Dojo 测试过）。

请记住，如果您计划将您的应用程序“发布”为简单的 html 文件（单击以在浏览器中打开），那么还有一些安全限制（例如 JavaScript 的加载和执行）。

# php - 如何使用 Javascript 在浏览器中显示所有 PHP 运行时错误

> ID：14358518
> 
> 赞同：1
> 
> 时间：2013-01-16T12:29:00.313
> 
> 标签：php, javascript, error-handling, runtime-error, xdebug

通常在开发周期中，当一个人在编写 PHP 和测试时，每次运行只会看到一个错误。

您可以使用 php.exe 或使用在线工具[pilliapp](http://www.piliapp.com/php-syntax-check/)或 [phpcodechecker](http://phpcodechecker.com/)查看语法错误。但是，您无法检测到运行时错误，例如未定义的变量。

您可以使用**XDebug**进行跟踪，但这很无聊。

**如何在浏览器中显示所有 PHP 运行时错误？**

因此，用户可以同时以不显眼的方式处理所有愚蠢的问题。（不是逻辑错误）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:29:00.313

论坛和问答网站确实是一个很好的学习资源！

昨天我在[stackoverflow .com 上提出了一个](http://stackoverflow.com)[问题，讨论启发了我创建一种新方法来使用](https://stackoverflow.com/questions/14348252/php-runtime-error/14351468#14351468)**PHP**和**Javascript**来驯服 PHP 中的绝大多数运行时错误。

 ****假设我有一个包含许多潜在运行时错误的 PHP 源代码。所以我将我的代码放在 HTML 标记内的以下行中，例如放在我需要使用 PHP 代码的初始位置。

```
 <script type="text/javascript">
 var nerrors = 0;               // PHP Errors count in Javascript

 function PHPErrors() {         // Javascript  Function that wraps the PHP Code
  <?php
               // MyErrorHandler is my function that my custom error handler
               // uses with error parameters in that given order.

     function myErrorHandler($errno, $errstr, $errfile, $errline) {
     echo "document.getElementById('PHPError').innerHTML += " . 
      "\"$errno: $errstr ($errline)<br>\";\r\n";        
     echo "nerrors = nerrors + 1;\r\n";
     return true;
 }
      // That's the line the set my custom new error-handling
      // disabling the default error handling
 $old_error_handler = set_error_handler("myErrorHandler");

      // Below random PHP code full of errors 
 $b = $a;                 // PHP Error 1
 $c = $a +1;              // PHP Error 2
 $d = $a + 1;             // PHP Error 3  
 $e = $_SESSION['glove'];  // PHP Error 4
?>
      // No PHP runtime error deserves a nice messagen
if (nerrors===0) {
   document.getElementById('PHPError').innerHTML =
                    "Well done! PHP without errors."; } 
}                        // End Javascript Function 
```

在这段代码之后，您可以自由地添加额外的 Javascript 和 PHP。最后，我将以下 2 行放在 HTML 正文中的某个位置。

```
 <p id="PHPError"> </p>
    <button onclick="PHPErrors()">Show me all PHP runtime errors</button> 
```

所以当我浏览这个 PHP 页面时，我可以看到

![按下按钮以查看错误](../Images/5dc1d27a2db3e46d58eb1ed8f69b3c6b.png)

最后我按下它，我可以看到所有 PHP 运行时错误消息

```
8: Undefined variable: a (26)
8: Undefined variable: d (27)
8: Undefined variable: c (28)
8: Undefined index: glove (29) 
```

或令人愉快的

```
Well done! PHP without errors. 
```

显然，不需要任何按钮，并且可以将此代码包含在 javascript onload 函数中。****

# php - 上传图像 (JPEG) 时有没有办法检查 DPI？

> ID：14358524
> 
> 赞同：3
> 
> 时间：2013-01-16T12:29:23.650
> 
> 标签：php, image-processing, file-upload, symfony1, symfony-1.4

上传图像 (JPEG) 时有没有办法检查 DPI？

我想将它集成到一个表单中，以便作为验证器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T13:00:19.947

您必须使用 Imagick（或 Gmagick）打开图像，然后调用[`getImageResolution`](http://php.net/manual/fr/imagick.getimageresolution.php).

```
$image = new Imagick($path_to_image);
var_dump($image->getImageResolution()); 
```

结果：

```
Array
(
    [x]=>75
    [y]=>75
) 
```

**编辑：**

要集成到 symfony，您可以使用自定义验证器。您可以扩展默认设置以验证文件并添加 DPI 限制。

将此创建为`/lib/validator/myCustomValidatorFile .class.php`：

```
<?php

class myCustomValidatorFile extends sfValidatorFile
{
  protected function configure($options = array(), $messages = array())
  {
    parent::configure($options, $messages);

    $this->addOption('resolution_dpi');
    $this->addMessage('resolution_dpi', 'DPI resolution is wrong, you should use image with %resolution_dpi% DPI.');
  }

  protected function doClean($value)
  {
    $validated_file = parent::doClean($value);

    $image      = new Imagick($validated_file->getTempName());
    $resolution = $image->getImageResolution();

    if (empty($resolution))
    {
      throw new sfValidatorError($this, 'invalid');
    }

    if ((isset($resolution['x']) && $resolution['x'] < $this->getOption('resolution_dpi')) || (isset($resolution['y']) && $resolution['y'] < $this->getOption('resolution_dpi')))
    {
      throw new sfValidatorError($this, 'resolution_dpi', array('resolution_dpi' => $this->getOption('resolution_dpi')));
    }

    return $validated_file;
  }
} 
```

然后，在您的表单中，为您的文件使用此验证器：

```
$this->validatorSchema['file'] = new myCustomValidatorFile(array(
  'resolution_dpi' => 300,
  'mime_types'     => 'web_images',
  'path'           => sfConfig::get('sf_upload_dir'),
  'required'       => true
)); 
```

# solr - 字段中的多个面，用分号分隔

> ID：14358525
> 
> 赞同：0
> 
> 时间：2013-01-16T12:29:24.553
> 
> 标签：solr, facet

我有一个包含这样数据的字段。这是一个示例行：

伦敦;大伦敦;伦敦市

我想结束以下方面

伦敦（计数 10） 大伦敦（计数 5） 伦敦市（计数 2）

我只是坚持使用正确的查询。

Solr 可以在单个字段中具有多个方面吗？

干杯

ķ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:56:38.170

你有两个选择。

最好的一种是使用多值字段。这意味着您需要拆分以分号进入的内容。这将取决于您如何获取数据。例如，CSV 允许您将字段声明为多值并以分号分隔。DataImportHandler 具有 RegexTransformer，它还允许您吐出内容。或者您可以使用可以应用于任何来源的请求处理器，但我认为没有开箱即用的拆分。你需要写一个。

另一种选择是意识到分面字段使用标记化的值而不是存储的值。通常，正是因为它，才将多面字段定义为字符串。但是，如果您根本无法使用第一种方法（并且您应该努力），您可以配置一个特殊的字段类型，它只将标记拆分为分号而不进行其他处理。您将为此使用[PatternTokenizerFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.PatternTokenizerFactory)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-10T21:50:53.680

根据 Alexandre Rafalovitch 的建议，我找到了一个不错的选择。我没有进入 Java，而是创建了一些简单的 javascript，并从 StatelessScriptUpdateProcessorFactory 中调用它。就我而言，我需要以这种方式拆分几个字段，因此我的一些代码反映了这一点。

我还应该指出，这基本上是原型代码。您可能想花一点时间改进它，使其更易于配置等。我知道我会的！但是当我完成这个时，我可能会忘记更新这个问题，而且我认为一个 hacky 的答案总比没有答案要好。:-)（我会尽量记住在完成后回来更新，但是......）

现在，在 solrconfig.xml 中，我添加了一个 updateRequestProcessingChain：

```
 <updateRequestProcessorChain name="splitting">
    <processor class="solr.StatelessScriptUpdateProcessorFactory">
      <str name="script">split-script.js</str>
      <lst name="params">
        <str name="splitFields">firstfield,secondfield</str>
      </lst>
    </processor>
    <processor class="solr.RunUpdateProcessorFactory" />
  </updateRequestProcessorChain> 
```

我还将它添加到“默认”配置中`/update/extract`：

```
<str name="update.chain">splitting</str> 
```

对于 split-script.js，我只是复制了`conf`文件夹中已有的示例 update-script.js 并修改了`processAdd`函数：

```
function processAdd(cmd) {

  doc = cmd.solrDoc;  // org.apache.solr.common.SolrInputDocument
  id = doc.getFieldValue("id");
  logger.info("splitter-script#processAdd: id=" + id);

  fields_param = params.get('splitFields');  // "params" only exists if processor configured with <lst name="params">

  fields = fields_param.split(',');
  for (var i = 0; i < fields.length; i++)
  {
    var fieldName = fields[i];
    var field = doc.getField(fieldName);
    if (field)
    {
      var value = field.getValue();
      if (value)
      {
        // Remove the old field so the un-split value doesn't also show up in the list...
        doc.removeField(fieldName);
        doc.addField(fieldName, value.split(';'));
      }
    }
  }
} 
```

似乎为我工作，希望它也可以帮助别人！

# r - 控制并排基本图形和 ggplot2 图形的列宽

> ID：14358526
> 
> 赞同：0
> 
> 时间：2013-01-16T12:29:26.397
> 
> 标签：r, graphics, ggplot2

@Ricardo Saporta 在[这里](https://stackoverflow.com/questions/14124373/combine-base-and-ggplot-graphics-in-r-figure-window)提出了一种将基本图形和 ggplot 图形组合在多个绘图图中的简单方法。

我使用这种方式在左侧绘制一个基本图形，在右侧绘制一个 ggplot 图形，它实际上包含两个图形（这是一个人工示例，不是真实示例，但它与我的真实示例具有相同的结构）：

```
library(ggplot2)
library(gridExtra)
library(plotrix)

Mvalues <- matrix(rpois(9,1), ncol=3)
Mcolors <- matrix(rpois(9,5), ncol=3)

par(mfrow=c(1,2))
color2D.matplot(x=Mvalues, show.values=2, cellcolors=Mcolors, 
    xlab="x", ylab="y", axes=FALSE, vcex=0.4)
gg2 <- ggplot(diamonds, aes(clarity, fill=cut)) + geom_bar(position="dodge") 
ta <- do.call(arrangeGrob, list(gg2,gg2))
vp.Left <- viewport(height=unit(1, "npc"), width=unit(0.5, "npc"), 
    just="left", y=0.5, x=0.5)
print(ta, vp=vp.Left) 
```

![阴谋](../Images/d6e77c8e92ea8b61d27301bd90cc254d.png)

非常好。但现在我希望基础图形的宽度比 ggplot 图形更大。怎么做 ？我没有成功尝试使用该`layout()`功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T12:42:57.520

干得好：

使用不同宽度的布局。请注意我如何将第一列定义为第二列宽度的两倍：

```
layout(matrix(c(1, 2, 1, 3), ncol=2, byrow=TRUE), widths=c(2, 1)) 
```

设置图形

```
layout(matrix(c(1, 2, 1, 3), ncol=2, byrow=TRUE), widths=c(2, 1))
color2D.matplot(x=Mvalues, show.values=2, cellcolors=Mcolors, 
                                xlab="x", ylab="y", axes=FALSE, vcex=0.4)
gg2 <- ggplot(diamonds, aes(clarity, fill=cut)) + geom_bar(position="dodge") 
ta <- do.call(arrangeGrob, list(gg2,gg2)) 
```

现在定义视口。您的代码几乎就在那里。我只是将其修改为右对齐，并将宽度更改为 33%：

```
vp <- viewport(height=unit(1, "npc"), width=unit(0.33, "npc"), 
               just="right", x=1, y=0.5) 
```

最后，打印剩余的图形：

```
print(ta, vp=vp) 
```

![在此处输入图像描述](../Images/648183edeff96746f5e6c976bd3ddcc5.png)

# vba - 我想从 excel 的工作表中调用私有子，并且 sheet1 中的值应该改变

> ID：14358528
> 
> 赞同：0
> 
> 时间：2013-01-16T12:29:27.627
> 
> 标签：vba, excel

我的查询是如果我使用按钮插入行，它还应该将序列号添加到 1、2、3 等行中......

我在工作表的 Sheet1 中有以下代码，用于在添加行时添加序列号

```
Private Sub Worksheet_Change1(ByVal Target As Range)
    Dim StartNum As Integer
    Dim FirstCell As Integer
    Dim LastCell As Integer

    StartNum = 2
    FirstCell = 3
    LastCell = 17

    Application.EnableEvents = False
    Do While FirstCell <= LastCell
        Range("B" & FirstCell).Value = StartNum
        FirstCell = FirstCell + 1
        StartNum = StartNum + 1
    Loop
    Range("B" & LastCell + 1).Value = ""
    Application.EnableEvents = True
End Sub 
```

下面的代码写在 module1 中以插入行，将 A1 的公式复制到新行

```
Sub Macro2()
    Rows("2:2").Select
    Selection.Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
    Range("B1:D1").Select
    Selection.AutoFill Destination:=Range("B1:D2"), Type:=xlFillDefault
    Range("B1:D2").Select
End Sub 
```

现在我的问题是如何在插入行时从 Module Macro2 代码调用私有子

任何建议，第一时间等待您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:42:49.883

就像我提到的那样，您不需要此`Worksheet_Change`代码。将以下代码粘贴到模块中并尝试..

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim lRow As Long, i As Long

    '~~> Set this to the relevant sheet
    Set ws = Sheets("Sheet1")

    With ws
        '~~> Insert at row 2
        .Rows(2).Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
        '~~> Autofill B1:D1 to C1:D2
        .Range("B1:D1").AutoFill Destination:=.Range("B1:D2"), Type:=xlFillDefault

        '~~> Find the last row
        If Application.WorksheetFunction.CountA(.Cells) <> 0 Then
            lRow = .Cells.Find(What:="*", _
                               After:=.Range("A1"), _
                               Lookat:=xlPart, _
                               LookIn:=xlFormulas, _
                               SearchOrder:=xlByRows, _
                               SearchDirection:=xlPrevious, _
                               MatchCase:=False).Row
        Else
            lRow = 1
        End If

        '~~> Renumber the cells in Col B
        For i = 1 To lRow
            .Range("B" & i).Value = i
        Next i
    End With
End Sub 
```

**跟进**

```
Sub Sample()
    Dim ws As Worksheet
    Dim lRow As Long, i As Long, j As Double

    '~~> Set this to the relevant sheet
    Set ws = Sheets("Sheet1")

    With ws
        '~~> Insert at row 2
        .Rows(2).Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
        '~~> Autofill B1:D1 to C1:D2
        .Range("B1:D1").AutoFill Destination:=.Range("B1:D2"), Type:=xlFillDefault

        '~~> Find the last row
        If Application.WorksheetFunction.CountA(.Cells) <> 0 Then
            lRow = .Cells.Find(What:="*", _
                               After:=.Range("A1"), _
                               Lookat:=xlPart, _
                               LookIn:=xlFormulas, _
                               SearchOrder:=xlByRows, _
                               SearchDirection:=xlPrevious, _
                               MatchCase:=False).Row
        Else
            lRow = 1
        End If

        '~~> Renumber the cells in Col B 1,1.1,1.2,1.3 etc
        j = 1

        For i = 1 To lRow
            .Range("B" & i).Value = j
            j = j + 0.1
        Next i
    End With
End Sub 
```

# jquery - WordPress 似乎重写了 POST AJAX 调用中的绝对 URL

> ID：14358529
> 
> 赞同：1
> 
> 时间：2013-01-16T12:29:30.090
> 
> 标签：jquery, ajax, wordpress

我被“要求”在 WordPress 环境中开发一个相当复杂的应用程序，我知道我一直在使用非正统的技术，但我的可用时间是三天。我对 WordPress 几乎没有经验，我想你可以明白为什么我不可能研究这个框架。

所以，我一直在使用 ExecPHP 插件来包含一个 .js 文件

```
[insert_php]
echo '<script type="text/javascript" src="' . content_url() . '/spesa-prodotti/spesa.js"></script>';
[/insert_php] 
```

在里面`spesa.js`我有一个 JQuery AJAX 调用

```
 $h.post({
        url: "http://www.isalaioli.it/_invia-spesa.php",
        data: _dataString,
        success: function (data) {
            console.log(data);
        }
    }); 
```

控制台说：

```
http://www.isalaioli.it/spesa-online/[object%20Object] 
```

我猜这意味着 URL 会被重写。是否有解决方法来防止这种情况？

# javascript - 如何消除 html 中图像加载的延迟？

> ID：14358532
> 
> 赞同：1
> 
> 时间：2013-01-16T12:29:36.740
> 
> 标签：javascript, html, web

我创建了一个网页并在该页面上放置了一个 img 标签。img.src 是来自网络 IP 摄像机的图像的 url。它有效，但我得到的流有延迟。我知道这种延迟是因为我加载图像并且加载图像需要一些时间。我的问题是如何减少这些延迟。我执行以下操作；

```
<script language="Javascript">
    x = document.getElementById("stream");
    intervalID = setInterval(LoadImage, 0);

    function LoadImage()
    {
      x = document.getElementById("stream");
      x.src = "http://IP:PORT/jpg/image.jpg";
    }
</script>    

<img id="stream"     
    width="640" height="480" 
    alt="Press reload if no video displays" 
    border="0" style="cursor:crosshair; border:medium; border:thick" />

<button type="button" id="btnStartLive" onclick="onStartLiveBtnClick()">Start Live</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-04T23:03:04.423

我刚刚在未回答的部分找到了您的问题，并决定试一试。以下脚本创建一个内部`<img>`标签（带有`new Image()`），分配必要的属性，然后设置一个`onload`“事件处理程序”属性，该属性检查图像何时加载。调用该函数时，将`#stream`替换为新的内部图像标记。

如果`#stream`不在 body 标记内（即在另一个元素内，如 a `<div>`），请编辑`streamParentElement`以指向图像的父元素。

我在字符串中添加了一个`?nocache`查询参数，因为在测试代码时，我发现图像标签发生了变化，但可见图像保持不变。我还添加了一个`loadDelay`，因为我的客户端上的图像加载速度太快，以至于它使我的浏览器崩溃了。我建议你不要将该值降低到 50 以下。[这里代码的现场演示](http://jsfiddle.net/DJDavid98/6fL6a/)

```
<script language="Javascript">
    var streamParentElement = document.body, loadDelay = 200;
    setTimeout(MakeImage,1);    

    function MakeImage(){
        var img = new Image();
        img.src = "http://IP:PORT/jpg/image.jpg?nocahce="+new Date().getTime()+Math.random();
        img.width = 640;
        img.height = 480;
        img.style.border = 0;
        img.style.cursor = 'crosshair';
        img.id = 'stream';
        img.onload = function(){
            var stream = document.getElementById("stream");
            streamParentElement.insertBefore(img,stream);
            stream.outerHTML = '';
            setTimeout(MakeImage, loadDelay);
        };
    }
</script>    

<img id="stream" alt="Press reload if no video displays" /> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-16T13:35:15.717

创建您的 html 页面。例如：

```
<html>
<head>
    <title>
        Some Page
    </title>
    </link rel="stylesheet" href="path to your css file"/>
    <script type="text/javascript" src="path to you javasctipt file"></script>
</head>
<body>
    <h1 onClick="javascript:someFunction()">
        Click here
    </h1>
</body>
</html> 
```

然后，您可以创建许多其他“someFunction”函数。他们都只是引用AJAX函数。这只是为了减少打字......

最简单的ajax方式：

```
var path;
var div;
var xmlhttp = new XMLHttpRequest();

function someFunction()
    {
        path = "path to another html file";
        div = "the name of the div tag's content you want to change eg. content";
        AJAX(path, div);
    }

function AJAX(path, div)
    {
        xmlhttp.open("GET", path, false);
        xmlhttp.send();
        if (xmlhttp.readyState == 4)
        {
            document.getElementById(div).innerHTML = xmlhttp.responseText;
        }
    } 
```

现在只需将图像包含在 html 文件中。ajax 允许您只更改您给它的 div 的内容，而无需重新加载整个页面。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-16T15:25:21.917

我会尝试将您的图像放入 Photoshop 并使分辨率为 72 或更低。此外，如果您将图像保存为 GIF，它们应该小得多。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-06-16T19:07:39.910

也许在运行速度比网页刷新快的外部脚本中处理图像加载，然后嵌入它？像“videoloader.js”这样它可以单独加载，而不必等待 html 页面加载。

```
<script src="videoloader.js"></script> 
```

您还可以使用 javascript 将即时显示的图像转换为质量较差的 jpg

看看这是否有帮助： [如果有更高的 inst 可用，则加载较低质量的图像](https://stackoverflow.com/questions/20165528/load-lower-quality-image-if-higher-one-inst-available)

# perl - 循环遍历 perl 中的哈希

> ID：14358539
> 
> 赞同：1
> 
> 时间：2013-01-16T12:30:00.700
> 
> 标签：perl

我现在正在学习 perl，并且有一个简短的脚本，我可以在其中访问数据库（DBI 模块）以提取一些统计数据。下面发布的代码似乎有点重复，我想知道它是否可以简化为哈希循环。每个数据库查询的唯一区别是 myo_maps_study 中的正则表达式

```
#Get the number of myo stress studies
$sth = $dbh->prepare("SELECT count(myo_maps_study) FROM myo WHERE myo_maps_study ~ 'MYO[0-9]*\$' AND myo_date <= ? AND myo_date >= ?");
$sth->execute($date_stop,$date_start) or die "Couldn't execute myo stress query" . $sth->errstr;
my $n_myo_stress = $sth->fetchrow_array;

#Get the number of myo redistribution studies
$sth = $dbh->prepare("SELECT count(myo_maps_study) FROM myo WHERE myo_maps_study ~ 'MYO[0-9]*R\$' AND myo_date <= ? AND myo_date >= ?");
$sth->execute($date_stop,$date_start) or die "Couldn't execute myo rep query" . $sth->errstr;
my $n_myo_rep = $sth->fetchrow_array;

#Stress tomos
$sth = $dbh->prepare("SELECT count(myo_maps_study) FROM myo WHERE myo_maps_study ~ 'MYO[0-9]*T\$' AND myo_date <= ? AND myo_date >= ?");
$sth->execute($date_stop,$date_start) or die "Couldn't execute myo stress tomo query" . $sth->errstr;
my $n_stress_tomo = $sth->fetchrow_array;

#Rest tomos
$sth = $dbh->prepare("SELECT count(myo_maps_study) FROM myo WHERE myo_maps_study ~ 'MYO[0-9]*U\$' AND myo_date <= ? AND myo_date >= ?");
$sth->execute($date_stop,$date_start) or die "Couldn't execute myo rest tomo query" . $sth->errstr;
my $n_rest_tomo = $sth->fetchrow_array;

print "***** Imaging Statistics  ************\n";
print "n_myo_stress: $n_myo_stress \n";
print "n_myo_rep: $n_myo_rep \n";
print "n_stress_tomo: $n_stress_tomo \n";
print "n_rest_tomo: $n_rest_tomo \n";
print "\n\n***********************************\n"; 
```

例如，我可以创建一个哈希数组，其中键值为 n_myo_stress、n_myo_rep 等，它们的值是正则表达式 MYO[0-9]\$、MYO[0-9]*R\$ 等

然后我可以执行我的数据库查询，`$sth->execute(hash value, $date_stop, $date_start)`并将查询的结果分配给具有 $hash_key 形式的标量（即 $n_myo_stress）。最后将结果打印到终端

我为糟糕的格式和缩进道歉，我不确定如何在堆栈溢出时执行此操作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T12:45:31.933

你不需要哈希，你可以这样做：

```
$sth = $dbh->prepare("SELECT count(myo_maps_study) FROM myo WHERE 
        myo_maps_study ~ ? AND myo_date <= ? AND myo_date >= ?");

my @results;

for my $myo (qw(MYO[0-9]*$ MYO[0-9]*R$ MYO[0-9]*T$ MYO[0-9]*U$)) {
    $sth->execute($myo, $date_stop, $date_start) 
        or die "Couldn't execute query for $myo: " . $sth->errstr;
    push @results, $sth->fetchrow_array;
} 
```

# c# - 填充后清空本地数据库

> ID：14358546
> 
> 赞同：1
> 
> 时间：2013-01-16T12:30:23.063
> 
> 标签：c#, windows-phone-8, local-database

我正在使用本地数据库将我的数据存储在 Windows Phone 8 应用程序中。首先，我将数据存储在 JSON 对象中，该对象转换为我的类对象，然后我尝试将这些对象的集合存储在本地数据库中。我在调试模式下检查并且数据在这些对象中，但是当我检查数据库时，它是空的。

这就是我将数据从集合移动到数据库的方式：

```
// Data context for the local database
private TablesDataContext tablesDB;

// Define the query to gather all of items.
var customersTablesInDB = from CustomerItem todo in tablesDB.CustomersTable
                                select todo;

// Execute the query and place the results into a collection.
CustomersTable = new ObservableCollection<CustomerItem>(customersTablesInDB);

foreach (Customer customer in customersList) 
{
    // Create a new item
    CustomerItem newCustomer = new CustomerItem 
    { 
        Id = customer.id,
        Number = customer.number.Value,
        Name = customer.name,
        Email = customer.email
    };

    // Add item to the observable collection.
    CustomersTable.Add(newCustomer);

    // Add item to the local database.
    tablesDB.CustomersTable.InsertOnSubmit(newCustomer);   
} 
```

这是我的课程`DataContext`：

```
public class TablesDataContext : DataContext
{
    // Specify the connection string as a static, used in main page and app.xaml.
    public static string DBConnectionString = "Data Source=isostore:/Customers.sdf";

    // Pass the connection string to the base class.
    public TablesDataContext(string connectionString)
        : base(connectionString)
    { }

    // Specify a single table for the items.
    public Table<CustomerItem> CustomersTable;
} 
```

这是我的`CustomerItem`课：

```
[Table]
public class CustomerItem : INotifyPropertyChanged, INotifyPropertyChanging
{
    // Define ID: private field, public property and database column.
    private int _id;

    [Column(IsPrimaryKey = true, IsDbGenerated = false, DbType = "INT NOT NULL Identity", CanBeNull = false, AutoSync = AutoSync.OnInsert)]
    public int Id
    {
        get
        {
            return _id;
        }
        set
        {
            if (_id != value)
            {
                NotifyPropertyChanging("Id");
                _id = value;
                NotifyPropertyChanged("Id");
            }
        }
    }

    // Define item name: private field, public property and database column.
    private int? _number;

    [Column]
    public int? Number
    {
        get
        {
            return _number;
        }
        set
        {
            if (_number != value)
            {
                NotifyPropertyChanging("Number");
                _number = value;
                NotifyPropertyChanged("Number");
            }
        }
    }

    // Define completion value: private field, public property and database column.
    private String _name;

    [Column]
    public String Name
    {
        get
        {
            return _name;
        }
        set
        {
            if (_name != value)
            {
                NotifyPropertyChanging("Name");
                name = value;
                NotifyPropertyChanged("Name");
            }
        }
    }

    // Define completion value: private field, public property and database column.
    private String _email;

    [Column]
    public String Email
    {
        get
        {
            return _email;
        }
        set
        {
            if (_email != value)
            {
                NotifyPropertyChanging("Email");
                _email = value;
                NotifyPropertyChanged("Email");
            }
        }
    }

    // Version column aids update performance.
    [Column(IsVersion = true)]
    private Binary _version;

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    // Used to notify the page that a data context property changed
    private void NotifyPropertyChanged(String propertyName)
    {
        if (PropertyChanged != null)
        {
           PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    #endregion

    #region INotifyPropertyChanging Members

    public event PropertyChangingEventHandler PropertyChanging;

    // Used to notify the data context that a data context property is about to change
    private void NotifyPropertyChanging(String propertyName)
    {
        if (PropertyChanging != null)
        {
            PropertyChanging(this, new PropertyChangingEventArgs(propertyName));
        }
    }

    #endregion

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:46:33.623

在 foreach 循环之后，您缺少“tablesDB.SubmitChanges()”。

# php - PHP函数获取字符数

> ID：14358548
> 
> 赞同：6
> 
> 时间：2013-01-16T12:30:29.697
> 
> 标签：php, iteration

如何编写一个函数，给我传递给它的字符的编号

例如，如果功能名称是`GetCharacterNumber`并且我传递`B`给它，那么它应该给我`2`

```
GetCharacterNumber("A") // should print 1
GetCharacterNumber("C") // should print 3
GetCharacterNumber("Z") // should print 26
GetCharacterNumber("AA") // should print 27
GetCharacterNumber("AA") // should print 27
GetCharacterNumber("AC") // should print 29 
```

甚至有可能实现这一目标吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T12:34:03.857

有一个名为[ord](http://php.net/manual/en/function.ord.php)的函数，它为您提供字符的 ASCII 编号。

```
ord($chr) - ord('A') + 1 
```

为您提供一个字符的正确结果。对于较长的字符串，您可以使用循环。

```
<?php
    function GetCharacterNumber($str) {
        $num = 0;
        for ($i = 0; $i < strlen($str); $i++) {
            $num = 26 * $num + ord($str[$i]) - 64;
        }
        return $num;
    }
    GetCharacterNumber("A"); //1
    GetCharacterNumber("C"); //3
    GetCharacterNumber("Z"); //26
    GetCharacterNumber("AA"); //27
    GetCharacterNumber("AC"); //29
    GetCharacterNumber("BA"); //53
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T12:44:12.293

效率不是很高，但可以完成工作：

```
function get_character_number($end) 
{
    $count = 1;
    $char = 'A';
    $end = strtoupper($end);
    while ($char !== $end) {
        $count++;
        $char++;
    }
    return $count;
}

echo get_character_number('AA'); // 27 
```

[演示](http://codepad.org/vtUzjjYF)

这是有效的，因为当你得到类似`$char = 'A'`and do的东西时`$char++`，它会变为'B'，然后是'C'，'D'，......'Z'，'AA'，'AB'等等。

请注意，这将变得越慢越长`$end`。对于“ZZZZ”（475254 次迭代）之外的任何内容，或者如果您需要许多类似的查找，我不会推荐此方法。

一个性能更好的替代方案是

```
function get_character_number($string) {
    $number = 0;
    $string = strtoupper($string);
    $dictionary = array_combine(range('A', 'Z'), range(1, 26));
    for ($pos = 0; isset($string[$pos]); $pos++) {
        $number += $dictionary[$string[$pos]] + $pos * 26 - $pos;
    }
    return $number;
}

echo get_character_number(''), PHP_EOL; // 0
echo get_character_number('Z'), PHP_EOL; // 26
echo get_character_number('AA'), PHP_EOL; // 27 
```

[演示](http://codepad.org/UPxdlNpU)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T12:36:11.090

使用范围和 strpos：

```
$letter = 'z';
$alphabet = range('a', 'z');
$position = strpos($alphabet, $letter); 
```

对于双字母（例如 zz），您可能需要使用自定义函数创建自己的字母表：

```
$alphabet = range('a', 'z');
$dictionary = range('a','z');
foreach($alphabet AS $a1){
    foreach($alphabet AS $a2) {
        $dictionary[] = $a1 . $a2;
    }
} 
```

然后使用 $dictionary 代替 $alphabet。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T12:34:44.133

这是执行您想要的完整代码。

对其进行了测试，并且非常适合您提供的示例。

```
define('BASE', 26);

function singleOrd($chr) {
    if (strlen($chr) == 1) {
        return (ord($chr)-64);
    } else{
        return 0;
    }
}

function multiOrd($string) {
    if (strlen($string) == 0) {
        return 0;
    } elseif (strlen($string) == 1) {
        return singleOrd($string);
    } else{
        $sum = 0;
        for($i = strlen($string) - 1; $i >= 0; $i--) {
            $sum += singleOrd($string[$i]) * pow(BASE, $i);
        }
    }
    return $sum;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T17:36:13.240

我认为 ord 应该是一种更有效的方式来获取您的号码：

```
$string = strtolower($string);
$result = 0;
$length = strlen($string);
foreach($string as $key=>$value){
   $result = ($length -$key - 1)*(ord($value)-ord(a)+1);
} 
```

结果将包含您想要的内容。

# javascript - Adobe Flex 还值得学习吗？

> ID：14358550
> 
> 赞同：3
> 
> 时间：2013-01-16T12:30:33.720
> 
> 标签：javascript, html, flash, apache-flex, adobe

我在 IT 学校的第 4 年，今天我们开始为期一个月的 Adob​​e Flex 工作。在过去的 4 年里主要是面向 Web 的，这个（我学校的）决定让我很惊讶，因为 Adob​​e 正在放弃 Flash 和 Flex，主要是因为移动支持和性能不佳，而他们的新项目 Adob​​e Edge 是显然是 Flash 的继任者……但它是基于 HTML5/CSS3/JS 的。你觉得还值得学习吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T12:40:37.470

不，我认为这不值得学习。我在瑞典认识的大多数 Flash 开发人员都很难找到工作，因此正试图将他们的技能转化为新的语言。

话虽如此，但由于时间和预算限制、应用程序本身的重量等原因，您仍然会使用 flash 和 flex 而不是其他解决方案。

# c#-4.0 - ASP.NET Web API 身份验证始终重定向到登录页面

> ID：14358551
> 
> 赞同：3
> 
> 时间：2013-01-16T12:30:36.007
> 
> 标签：c#-4.0, asp.net-mvc-4, asp.net-web-api

我的 ASP.NET MVC 应用程序使用带有`[System.Web.Mvc.Authorize]`. 我想使用`[System.Web.Http.Authorize]`属性来保护我的 Web API 控制器，因为我是`HttpClient`从我的 MVC 控制器调用它，所以我已经实现了一个自定义委托处理程序，如下面的帖子中的那个：

[使用成员资格提供程序的 ASP.NET MVC 4 Web API 身份验证](https://stackoverflow.com/questions/11535075/asp-net-mvc-4-web-api-authentication-with-membership-provider/11536349#11536349)

调试时，我可以看到主体已设置并且用户具有正确的角色，但我仍然被重定向到登录页面？

因此，基本上当我登录并使用浏览器访问 WebAPI 操作时，一切正常（就像我从我的视图中使用 AJAX 一样），但是当我`HttpClient`在控制器内部使用基本身份验证时（我知道这是一个具有不同上下文的新请求）和设置我总是被重定向的主体。

我已经尝试了很多解决方案/解决方法，但我总是被重定向到登录页面。任何人都有想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-30T14:53:51.410

这是一个解释：

[System-web-http-authorize x 系统-web-mvc-authorize](https://stackoverflow.com/questions/19152109/system-web-http-authorize-versus-system-web-mvc-authorize)

另一个有趣的点是您使用自定义授权。我做到了，它奏效了。以下示例：

[自定义授权 Mvc 4](https://stackoverflow.com/questions/20942042/customized-authorization-attribute-in-mvc-4-with-roles)

祝你好运

# c# - 当 UI 在 Task.Wait() 上处于当前状态时，使用 Dispatcher 强制 UI 线程更新控件；

> ID：14358552
> 
> 赞同：0
> 
> 时间：2013-01-16T12:30:41.193
> 
> 标签：c#, winforms, multithreading, c#-4.0, task-parallel-library

是否可以强制 UI 线程停止等待任务完成，通过 Dispatcher 更新 UI 控件，然后让 UI 恢复到等待任务完成？

我刚刚尝试了以下代码，但它似乎不起作用

```
UpdatePB(int NewValue) 
```

方法正在由非 UI 线程执行。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Threading.Tasks;
using System.Threading;
using System.Windows.Threading;
using System.Windows.Threading;

namespace UpdateControlViaDispatcherUITaskWaitAll
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        public void UpdatePB(int NewValue)
        {
            pb1.Value = NewValue;
        }

        private void btn1_Click(object sender, EventArgs e)
        {
            Task tk = Task.Factory.StartNew(() =>
            {
                Worker();
            });
            tk.Wait();
        }

        public void Worker()
        {
            int currentValue = 0;

            for (int i = 0; i < 100; i++)
            {
                currentValue = i;

                Dispatcher.CurrentDispatcher.Invoke(new Action(() =>
                {
                    UpdatePB(currentValue);
                }));

                Thread.Sleep(1000);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:15:41.580

避免阻塞 UI 线程：

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    Task.Factory
        .StartNew(this.Worker)
        .ContinueWith(this.OnWorkerCompleted);
}

public void Worker()
{
    Dispatcher.Invoke(new Action(() =>
    {
        btn1.IsEnabled = false;
    }));
    // your stuff here...
}

private void OnWorkerCompleted(Task obj)
{
    Dispatcher.Invoke(new Action(() =>
    {
        btn1.IsEnabled = true;
    }));
} 
```

尽量减少对 Dispatcher 的调用，并尝试使用 BackgroundWorker，它支持后台线程和 UI 线程之间的自动同步，带有 ProgressChanged 和 RunWorkerComplete 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:36:51.447

`WPF Dispatcher`有任务队列`DispatcherOperation`，所以当你调用`tk.Wait();`它时会阻塞 Dispatcher 线程直到`tk`完成。您无法暂停此等待并再次恢复，而只能取消`DispatcherOperation`。但在你的情况下，我假设你最好禁用按钮（或整个窗口）并在`tk`完成时启用它。所以你应该考虑异步等待`tk`完成。

# wpf - 通过 wpf 中的属性绑定图像源

> ID：14358553
> 
> 赞同：7
> 
> 时间：2013-01-16T12:30:52.240
> 
> 标签：wpf, xaml

我正在尝试使用图像源（.jpg）显示图标。我在视图模型中创建了一个 Icon 属性并尝试为其分配图像的路径，但我在视图中看不到任何图像。我尝试将路径转换为位图图像，但不起作用。我在这里有什么遗漏吗？

```
<StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding Path=Name}"/>
                                <Image Source="{Binding Path=Icon}"></Image>
                            </StackPanel>

BitmapImage img = new BitmapImage();
                    img.BeginInit();
                    img.CacheOption = BitmapCacheOption.OnLoad;
                    img.CreateOptions = BitmapCreateOptions.IgnoreImageCache;
                    img.UriSource = new Uri("C:\\Users\\Public\\Pictures\\Sample Pictures\\Chrysanthemum.jpg", UriKind.Absolute);
                    img.EndInit();
                    Icon = img; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-16T12:46:58.243

我自己遇到过一次，虽然可能不是最好的解决方案，但以下对我有用。

**1\. 将图像添加到您的项目中，例如：**

*   为您的项目创建一个文件夹 images/icons 并在其中添加图像。
*   将图像的构建操作设置为内容（如果较新则复制）

**2\. 创建一个 ImageSource 属性：**

```
 public ImageSource YourImage
    {
        get { return _yourImage; }
        set 
        { 
            _yourImage = value;
            NotifyOfPropertyChange(() => YourImage);
        }
    } 
```

（注：我用caliburn micro辅助绑定）

**3\. 像这样更新 ImageSource：**

```
 if(!string.IsNullOrEmpty("TheImageYouWantToShow"))
            {
                var yourImage = new BitmapImage(new Uri(String.Format("Images/Icons/{0}.jpg", TheImageYouWantToShow), UriKind.Relative));
                yourImage.Freeze(); // -> to prevent error: "Must create DependencySource on same Thread as the DependencyObject"
                YourImage = yourImage;
            }
            else
            {
                YourImage = null;   
            } 
```

**4\. 将源属性绑定到 YourImage 属性：**

（你已经这样做了）

# jquery - 通过 ie6,7,8 中的 jquery 或 javascript 访问 SVG 元素

> ID：14358557
> 
> 赞同：0
> 
> 时间：2013-01-16T12:31:15.263
> 
> 标签：jquery, internet-explorer, svg

我有关于 ie6、7、8 的问题。我知道这些版本不支持 SVG。

我的问题是我有 svg 代码并在隐藏的 div 中呈现，因此不用于显示。现在我想操作 SVG 标签的属性，如 defs、rect 等。

我用谷歌搜索了很多，但找不到任何有价值的信息。

# joomla2.5 - 在 Joomla 中更改 URL

> ID：14358560
> 
> 赞同：0
> 
> 时间：2013-01-16T12:31:19.460
> 
> 标签：joomla2.5, joomla-sef-urls

我正在使用 Joomla 2.5 和 Sobipro。因此，当我访问添加的条目时，url 是**mywebsite.com/menuitem/entryid-entryname**并且我希望它是**mywebsite.com/entryname**没有条目 id 和没有 menuitem 名称。这能以某种方式实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:46:05.220

使用 SEF Components 是最好的解决方案，他们有自己的自定义 url 重写工具。使用 AceSEF ：

*   [http://extensions.joomla.org/extensions/site-management/sef/10019](http://extensions.joomla.org/extensions/site-management/sef/10019)

重写网址的好工具！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T05:58:57.227

您可以在 joomla 2.5 中使用 sh404SEF 组件进行 url 重写

很棒的组件，使用它。

# php - 认证后页面重定向到上一页

> ID：14358565
> 
> 赞同：1
> 
> 时间：2013-01-16T12:31:40.437
> 
> 标签：php

我试图在身份验证后将用户重定向到上一页。它适用于以下代码。

该文件`login_page.php`（用户输入登录凭据的页面）包含以下代码，该代码存储**SOURCE URL**并将其传递到下一页。

```
<input type="hidden" name="url" value=<?php echo $_SERVER['HTTP_REFERER'] ; ?> /> 
```

文件`do_authentication.php`（进行身份验证的页面）具有`echo "<meta http-equiv='Refresh' content=0;url='$_POST[url]'>";`重定向到**SOURCE URL的代码**

在正常情况下它可以工作，但在用户输入错误凭据的情况下，页面被重定向到`login_page.php`并要求用户使用正确的凭据重试。此时，'url' 值变为`login_page.php`.

解决这个问题的正确/更好的逻辑是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:34:39.483

采用：

```
header("location: ".$_POST['url']); // Redirects to posted page
exit; // Prevents execution of other code after this 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:36:01.330

登录时，我一直使用会话来保留原始页面。如果会话不受支持，这将不起作用。然后我只是将用户发送到主页。

讨论此问题的 Stack Overflow 帖子是*[使用 PHP 登录后重定向到上一页](https://stackoverflow.com/questions/2308003)*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:43:07.800

在`login_page.php`，你可以检查你是否已经传递了一个[URL](http://en.wikipedia.org/wiki/Uniform_Resource_Locator)；如果是这样，传递这个而不是 HTTP_REFERER。

```
<?php if(isset($_POST['url']) ?>
    <input type="hidden" name="url" value=<?php echo $_POST['url'] ; ?> />
<?php else ?>
    <input type="hidden" name="url" value=<?php echo $_SERVER['HTTP_REFERER'] ; ?> /> 
```

或者以更简洁的方式

```
<?php $url= (isset($_POST['url'])) ? $_POST['url'] : $_SERVER['HTTP_REFERER']; ?>
<input type="hidden" name="url" value=<?php echo $url; ?> /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T12:44:57.687

您应该考虑使用会话变量来存储要重定向到的页面的值。HTTP_REFERRER 不是正确的选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T12:51:58.047

试试下面：

```
<input type="hidden" name="url" value=<?php echo pathinfo(__FILE__,PATHINFO_FILENAME ).".".pathinfo(__FILE__,PATHINFO_EXTENSION); ?> /> 
```

# python - 在 pandas 数据框中查找连续段

> ID：14358567
> 
> 赞同：30
> 
> 时间：2013-01-16T12:31:42.877
> 
> 标签：python, pandas

我有一个 pandas.DataFrame 在连续的时间点进行测量。随着每次测量，被观察的系统在每个时间点都有不同的状态。因此，DataFrame 还包含一个列，其中包含每次测量时系统的状态。状态变化比测量间隔慢得多。因此，指示状态的列可能如下所示（索引：状态）：

```
1:  3
2:  3
3:  3
4:  3
5:  4
6:  4
7:  4
8:  4
9:  1
10: 1
11: 1
12: 1
13: 1 
```

有没有一种简单的方法来检索每个连续相等状态段的索引。这意味着我想得到这样的东西：

```
[[1,2,3,4], [5,6,7,8], [9,10,11,12,13]] 
```

结果也可能与普通列表不同。

到目前为止，我能想到的唯一解决方案是手动迭代行，找到段变化点并从这些变化点重建索引，但我希望有一个更简单的解决方案。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-01-16T14:16:30.810

单线：

```
df.reset_index().groupby('A')['index'].apply(np.array) 
```

代码例如：

```
In [1]: import numpy as np

In [2]: from pandas import *

In [3]: df = DataFrame([3]*4+[4]*4+[1]*4, columns=['A'])
In [4]: df
Out[4]:
    A
0   3
1   3
2   3
3   3
4   4
5   4
6   4
7   4
8   1
9   1
10  1
11  1

In [5]: df.reset_index().groupby('A')['index'].apply(np.array)
Out[5]:
A
1    [8, 9, 10, 11]
3      [0, 1, 2, 3]
4      [4, 5, 6, 7] 
```

您还可以直接从 groupby 对象访问信息：

```
In [1]: grp = df.groupby('A')

In [2]: grp.indices
Out[2]:
{1L: array([ 8,  9, 10, 11], dtype=int64),
 3L: array([0, 1, 2, 3], dtype=int64),
 4L: array([4, 5, 6, 7], dtype=int64)}

In [3]: grp.indices[3]
Out[3]: array([0, 1, 2, 3], dtype=int64) 
```

要解决 DSM 提到的情况，您可以执行以下操作：

```
In [1]: df['block'] = (df.A.shift(1) != df.A).astype(int).cumsum()

In [2]: df
Out[2]:
    A  block
0   3      1
1   3      1
2   3      1
3   3      1
4   4      2
5   4      2
6   4      2
7   4      2
8   1      3
9   1      3
10  1      3
11  1      3
12  3      4
13  3      4
14  3      4
15  3      4 
```

现在按两列分组并应用 lambda 函数：

```
In [77]: df.reset_index().groupby(['A','block'])['index'].apply(np.array)
Out[77]:
A  block
1  3          [8, 9, 10, 11]
3  1            [0, 1, 2, 3]
   4        [12, 13, 14, 15]
4  2            [4, 5, 6, 7] 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-16T13:07:53.240

您可以使用 np.diff() 来测试段的开始/结束位置并迭代这些结果。它是一个非常简单的解决方案，因此可能不是最有效的解决方案。

```
a = np.array([3,3,3,3,3,4,4,4,4,4,1,1,1,1,4,4,12,12,12])

prev = 0
splits = np.append(np.where(np.diff(a) != 0)[0],len(a)+1)+1

for split in splits:
    print np.arange(1,a.size+1,1)[prev:split]
    prev = split 
```

结果是：

```
[1 2 3 4 5]
[ 6  7  8  9 10]
[11 12 13 14]
[15 16]
[17 18 19] 
```

# android - getLatitude() , getLongitude() 返回错误的纬度和经度值

> ID：14358574
> 
> 赞同：0
> 
> 时间：2013-01-16T12:32:16.140
> 
> 标签：android, map, geolocation

这是我用来查找当前位置的代码，但它没有准确地指向位置，它返回的位置为 9.920473,78.102423 而不是 9.909076, 78.100758

我无法弄清楚我哪里出错了，请帮助我提出建议。

```
 try {
        locationManager = (LocationManager) mContext.getSystemService(LOCATION_SERVICE);

        // getting GPS status
        isGPSEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);

        // getting network status
        isNetworkEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        if (!isGPSEnabled && !isNetworkEnabled) {
            // no network provider is enabled
        }
        else {
            this.canGetLocation = true;
            if (isNetworkEnabled)   {
    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, MIN_TIME_BW_UPDATES, MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    if (locationManager != null) {
                        location = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                        Log.e("latitude", ""+latitude);
                        Log.e("longitude", ""+longitude);
                    }
                }
                // if GPS Enabled get lat/long using GPS Services
                if (isGPSEnabled) {
                    if (location == null) {
                        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, MIN_TIME_BW_UPDATES, MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                        if (locationManager != null) {
                            location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
                            if (location != null) {
                                latitude = location.getLatitude();                      
                                longitude = location.getLongitude();
                            }
                            Log.e("latitude", ""+latitude);
                            Log.e("longitude", ""+longitude);
                        }
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:36:27.250

您首先使用网络提供商，这不是很准确。如果您从 Network 获得位置修复，您的代码将不会使用 GPS 位置。在这种情况下，可以预期位置会有如此大的变化。如果您需要确切的位置，请使用 GPS 提供程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:11:14.803

试试这个代码：

```
 public void onLocationChanged(Location location) {
          if (location != null) {
            GeoPoint point = new GeoPoint(
                (int) (location.getLatitude() * 1E6), 
                (int) (location.getLongitude() * 1E6));

            Toast.makeText(getBaseContext(), 
                "Latitude: " + location.getLatitude() + 
                " Longitude: " + location.getLongitude(), 
                Toast.LENGTH_SHORT).show(); 
```

}

# c# - Process.Start 出错：接口数据库

> ID：14358576
> 
> 赞同：0
> 
> 时间：2013-01-16T12:32:24.597
> 
> 标签：c#, process.start

在尝试使用 C# 在 MVS2010 中使用 Process.Start 打开程序时，我收到以下错误消息：

> “iecmilib.dll：无法分配接口数据库描述”

下一个窗口显示以下内容：

> “无法初始化接口库！”

该软件安装在我的电脑中，直接打开时可以正常工作。仅在使用 C# 打开时，库似乎存在一些问题。我尝试了以下代码，它们基本相同：

```
Process.Start(@"C:\'path'\iecmint.exe") 
```

和

```
Process IECM = new Process();
IECM.StartInfo.FileName = @"C:'path'\iecmint.exe";
IECM.Start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:40:49.910

```
ProcessStartInfo info = new ProcessStartInfo();
info.FileName = "iecmint.exe";
info.UseShellExecute = true;
info.Verb = "runas";
info.WorkingDirectory = // Path To iecmint.exe

Process.Start(info); 
```

# date - Air - 允许根据日期安装应用程序

> ID：14358579
> 
> 赞同：0
> 
> 时间：2013-01-16T12:32:33.827
> 
> 标签：date, air, installation

我需要找到一种方法，仅当当前日期在今年内时才允许安装基于 Adob​​e Air 的应用程序。怎么可能呢？

编辑：它适用于 Windows 应用程序的 Adob​​e Air。我会将 Air 应用程序作为 Windows Installer .exe 发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:00:17.073

您添加到 AIR 应用程序的 p12 证书包含用于确定是否可以安装应用程序的开始日期和结束日期。这些日期由您选择的证书颁发机构（VeriSign、Thawte...）设置。

Flash Builder 和 Flash CS 允许您创建自签名证书，但它们不允许您设置开始和结束日期（它们默认为从当前日期起 5 年）。

如果您想创建一个自签名证书并自己指定结束日期，您可以使用[AIR Developer Tool (ADT)](http://help.adobe.com/en_US/air/build/WS901d38e593cd1bac1e63e3d128fc240122-7ffc.html)来完成。ADT 接受一个可选的“-validityPeriod”标志，您可以使用它指定年数。

# client-side - Sammy.js 导航菜单

> ID：14358585
> 
> 赞同：0
> 
> 时间：2013-01-16T12:32:49.460
> 
> 标签：client-side, sammy.js, single-page-application

我正在玩 sammy.js 并试图为我的 SPA 构建一个不错的菜单。我的 HTML 结构如下所示：

```
<nav class="navMain">
  <ul class="nav">
    <li class="active"><a href="/#/">Home</a></li>
    <li><a href="/#aroute">A route</a></li>
    <li><a href="/#anotherroute">Anouther route</a></li>
  </ul>
</nav>
<div class="main">
  <!-- here goes everything I do with sammy -->
</div> 
```

当然，我想做的是将`active`课程提供给路由到该页面的其他菜单项。到目前为止，我没有找到任何例子，我想出了这个：

```
this.bind('run-route', function() {
  var path = this.params.path;      
  $('.navMain li').removeClass('active').find('a[href*="' + path + '"]').parent().addClass('active');
}); 
```

在工作时，这看起来不是解决这个非常常见问题的好方法。我想一定有更简单和惯用的东西，但我找不到任何东西。

谁能指出我更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:10:45.440

更新路由处理程序代码中的类，它知道您现在在哪条路由上**，**并且可以在列表中找到它。

对于这个标记：

```
<nav class="navMain">
  <ul class="nav">
    <li class="active"><a href="#/">Home</a></li>
    <li><a href="#/aroute/">A route</a></li>
    <li><a href="#/anotherroute/">Anouther route</a></li>
  </ul>
</nav> 
```

这是JS：

```
function SetActiveLink(name){
    var ul = $('ul')

    ul.children().removeClass('active')

    ul.find('a[href="#/'+name+'/"]').parent().addClass('active')
}

sammyapp.route('get','#/a/', function() {
    SetActiveLink('a')
})

sammyapp.route('get','#/b/', function() {
    SetActiveLink('b')
}) 
```

# android - 我想在android中制作webview，但是后退按钮功能不起作用？

> ID：14358590
> 
> 赞同：1
> 
> 时间：2013-01-16T12:33:11.850
> 
> 标签：android, webview

我在 android 中制作 webview，我是 android 的初学者。在我的代码下方，我面临以下问题。

1.  后退按钮不起作用，当我访问我的应用程序的不同页面并按下后退按钮时，它不起作用并给出错误应用程序已停止并在我的手机主屏幕上收回我。

2.  第二，当任何用户打开此应用程序时，如果互联网未连接或无法正常工作，那么它会发出警报，例如“此应用程序需要互联网连接”，并且默认情况下在后台我给定的背景显示 wihotu 互联网连接。如果找到互联网连接，则此应用程序可以正常工作。

我是安卓新手。在此我非常感谢您的帮助。并请在您的回答中编写代码以解决以下问题。提前致谢

```
package com.example.edarabia;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.webkit.WebView;
import android.webkit.WebSettings;
import android.webkit.WebViewClient;
import android.annotation.SuppressLint;
import android.view.KeyEvent;

@SuppressLint("SetJavaScriptEnabled")

public class MainActivity extends Activity {
WebView mywebview;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    WebView mywebview = (WebView) findViewById(R.id.webview);
        mywebview.loadUrl("http://www.grafdom.com/operations/projects/ma/edarabiaapp/");        
    WebSettings webSettings = mywebview.getSettings();
    webSettings.setJavaScriptEnabled(true);
    webSettings.setBuiltInZoomControls(true);
    mywebview.setWebViewClient(new WebViewClient());
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // Check if the key event was the Back button and if there's history
    if ((keyCode == KeyEvent.KEYCODE_BACK) && mywebview.canGoBack()) {
        mywebview.goBack();
        return true;
    }

    return super.onKeyDown(keyCode, event);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:42:07.350

您可以执行以下操作，

**1.覆盖后退按钮功能**

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        // Check if the key event was the Back button and if there's history
        if ((keyCode == KeyEvent.KEYCODE_BACK) && mWebView.canGoBack()) {
            mWebView.goBack();
            return true;
        }

        return super.onKeyDown(keyCode, event);
    } 
```

**2.为了在应用程序启动时检查互联网连接，请将以下代码放入 onCreate()**

```
ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo info = cm.getActiveNetworkInfo();
        if (info != null) {
            if (!info.isConnected()) {

                Toast.makeText(this,
                        "Please check your wireless connection and try again.",
                        Toast.LENGTH_LONG).show();

            }

            // if positive, fetch the articles in background
            else
                // Do your task...
        } else {
            Toast.makeText(this,
                    "Please check your wireless connection and try again.",
                    Toast.LENGTH_SHORT).show();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:44:48.627

您还没有初始化 main`WebView webView;`并且您在您的`onBackPressed()`方法中引用了它，这就是它给您错误的原因。

只需在您的文件中进行如下更改：

> ```
> public class MainActivity extends Activity {
>     WebView mywebview;   <<--- instead of webview use mywebview which you have declared in your onCreate.
>    @Override
>   protected void onCreate(Bundle savedInstanceState) {
>      super.onCreate(savedInstanceState);
>      setContentView(R.layout.activity_main);
>      mywebview = (WebView) findViewById(R.id.webView1);
>      mywebview.loadUrl("http://www.grafdom.com/operations/projects/ma/edarabiaapp/");        
>      WebSettings webSettings = mywebview.getSettings();
>      webSettings.setJavaScriptEnabled(true);
>      webSettings.setBuiltInZoomControls(true);
>      mywebview.setWebViewClient(new WebViewClient());
>  }
>  @Override
>  public boolean onCreateOptionsMenu(Menu menu) {
>      // Inflate the menu; this adds items to the action bar if it is present.
>      getMenuInflater().inflate(R.menu.activity_main, menu);
>      return true;
>  }
>  @Override
>  public void onBackPressed (){
>  if(mywebview.canGoBack()) mywebview.goBack();
>     else super.onBackPressed();  
>  }
>  } 
> ```

对于您的第二个查询：

您可以使用以下方法检查您的互联网连接：

> ```
>  public static boolean IsNetConnected()
> {
>     boolean m_netConnected = false;
>     try
>     {
>         ConnectivityManager m_connectivity = (ConnectivityManager) AppConstants.m_context.getSystemService(Context.CONNECTIVITY_SERVICE);
>         if (m_connectivity == null)
>         {
>             Log.w(TAG, "couldn't get connectivity manager");
>             m_netConnected = false;
>         }
>         else
>         {
>             NetworkInfo[] m_info = m_connectivity.getAllNetworkInfo();
>             if (m_info != null)
>             {
>                 for (int i = 0; i < m_info.length; i++)
>                 {
>                     if (m_info[i].getState() == NetworkInfo.State.CONNECTED)
>                     {
>                         m_netConnected = true;
>                     }
>                 }
>             }
>         }
>     }
>     catch (Throwable e)
>     {
>         ErrorReporter.getInstance().handleException(e);
>         if (AppConstants.DEBUG)
>         {
>             Log.e(TAG, "IsNetConnected Error" + e.toString(), e);
>             }
>         m_netConnected = false;
>     }
>     return m_netConnected;
> } 
> ```

您可以使用上述方法，如下所示：

> ```
>  if(!IsNetConnected())
>     {
>    showDialog(MainActivity.this,"This application required internet connection");
>      //set your default background as per your requirements.
>    } 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:40:08.420

1.  你应该删除

    ```
    @Override
    public void onBackPressed (){
        if(webView.canGoBack()) webView.goBack();
        else super.onBackPressed();
    } 
    ```

避免 NullPointerException。你为什么使用这样的实现？
2\. 您可以将此类功能用于您的目的：

```
 public boolean isOnline() {
       boolean res = false;
       ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
       NetworkInfo netInfo = cm.getActiveNetworkInfo();
       if (netInfo != null && netInfo.isConnectedOrConnecting()) {
           res= true;
       }
       else
       {
           Toast.makeText(context, "You've lost internet connection. Please check it and try again", Toast.LENGTH_LONG).show();
           res = false;
        }
       return res;
   } 
```

并在活动中：

```
boolean isOnline = isOnline();
if (isOnline)
 {
      //What you want to do if there's a connection..
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-20T13:26:12.003

覆盖**onBackPressed()的功能**

```
@Override
  public void onBackPressed() {
      finish();
  } 
```

希望这会帮助你。

# matlab - 如何使用matlab从模拟中选择某些行？

> ID：14358595
> 
> 赞同：1
> 
> 时间：2013-01-16T12:33:30.737
> 
> 标签：matlab, matrix, simulation

我在 Matlab 中做了一个模拟，输出一个矩阵。因此，经过 500 次运行后，我将拥有 500 个矩阵。如何从这些矩阵中选择某一行？行是`[xxx 1 0 0 0]`，其中 `xxx`表示从一个矩阵到另一个矩阵不同的现有数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:41:53.480

你可以用`ismember`这个

idxL = ismember(bigMatrix,[25,1,0,0],'rows');

`idxL`是一个逻辑向量，其中的行`bigMatrix`等于目标行值，否则为零。您可以使用它来索引其他数组。如果您需要行号，请使用`rowNumbers = find(idxL)`.

# google-visualization - 谷歌图表 y 轴文本被截断（svg-tag 太宽）

> ID：14358596
> 
> 赞同：1
> 
> 时间：2013-01-16T12:33:34.563
> 
> 标签：google-visualization

我在工作中实现了一个谷歌图表功能，它通常工作得很好。

我刚刚注意到图表中的一个错误。图表的左侧（更具体地说是 y 轴的文本，正在被截断。

目前我的谷歌图表宽度为 460 像素，但是当我用萤火虫查看图表时，我看到图表中的 svg-tag 正确设置为 460 宽度，但实际上是 472 像素宽（导致你可以在下图中看到）。

[http://i.imgur.com/uAuD7.png](http://i.imgur.com/uAuD7.png)

有趣的是，在更大的显示器（fx. 600px 宽）中它工作得非常好。如果我在 javascript 中插入一个 yAxis 标题，它也可以工作。

我不知道如何解决这个问题，但我希望你们中的一些人遇到了同样的问题，并提出了解决方案或修复方案。

用于绘制图表的普通 div 的图片，在 firebug 布局打开的情况下拍摄

谷歌图表中 svg-tag 的图片（请注意，该元素比另一个元素大，并且它使用的左侧空间比其父元素（div）更多。

两者都可以在这里找到：

[http://imgur.com/8owiA,SsgM2#0](http://imgur.com/8owiA,SsgM2#0)

问候，马丁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:34:50.017

问题是谷歌图表计算图表中考虑字体大小的位置和大小。

我的 css 覆盖了谷歌图表使用的“自动”字体大小（在我的例子中是 12px），我的 css 中有 13px 的字体大小。

解决方案是获取指定的“文本”css-path（在本例中为：svg ggg 文本）并使文本为 12px（在 .css 文件中）

或者简单地在 javascript for google chart 中设置与我的 CSS 相关的正确字体大小，如下所示：

```
vAxis: {textStyle: {fontSize: 13}} 
```

# windows - 无法让 mvn 在他的路径上工作

> ID：14358598
> 
> 赞同：-1
> 
> 时间：2013-01-16T12:33:40.907
> 
> 标签：windows, maven

> **可能重复：**
> [在 windows 7 64bit 上安装 maven](https://stackoverflow.com/questions/7219628/installing-maven-on-windows-7-64bit)

maven 在直接从 bin 目录调用时可以工作，但是尝试了与 windows 7 环境变量的各种组合，但没有任何效果。

希望下面的屏幕截图能捕捉到所有内容——路径已设置，m2_home 已设置，当直接在路径上指定的相同位置调用 mvn 时，mvn 可以工作......

![mvn wtf ?](../Images/54b6a64a2aa084f2dbf316ecc71b83d2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:36:19.277

您必须在 %M2_HOME% 之前删除空格 - Windows PATH 环境变量不允许使用空格而不会感到困惑。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T12:37:19.337

之间是否有空格`CATALINA_HOME%\bin;`并`M2_HOME\bin`尝试将其删除。顺便说一句，当你回显时你会得到什么`PATH`？

# javascript - 对象不支持此操作 IE9 与 CustomEvent 初始化

> ID：14358599
> 
> 赞同：15
> 
> 时间：2013-01-16T12:33:43.580
> 
> 标签：javascript, internet-explorer, dom-events

我在 IE9 中收到以下错误：

> “对象不支持此操作”。

关于这个有各种各样的问题，但我的问题是专门针对以下代码的：

```
 var myEvent = new CustomEvent("additem"); 
```

据我了解，`CustomEvent`IE9 支持作为 DOM 操作命令。这在 Chrome 中运行良好，没有任何例外。

任何人都有这个问题并且知道如何解决它？谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-16T12:44:26.160

IE 不支持 Afaik 自定义事件，仅在普通浏览器中支持。我建议使用提供像 Jquery 触发器这样的浏览器独立实现的 javascript 库：http: [//api.jquery.com/trigger/](http://api.jquery.com/trigger/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-04-08T19:22:03.317

您可以使用 javascript 函数来检测浏览器是否为 IE11 或更低版本，然后应用下一个 polyfill：

```
 (function () {
      function CustomEvent ( event, params ) {
        params = params || { bubbles: false, cancelable: false, detail: undefined };
        var evt = document.createEvent( 'CustomEvent' );
        evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );
        return evt;
      };

      CustomEvent.prototype = window.Event.prototype;
      window.CustomEvent = CustomEvent;
    })(); 
```

上面的 polyfill 取自 MDN： [https ://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-11-13T00:03:43.067

试试这个不替换原生（和功能）CustomEvent 方法的 polyfill。

```
(function () {
  try {
    new CustomEvent('test');
    return;
  } catch(e) {
    // ignore this error and continue below
  }

  function CustomEvent ( event, params ) {
    params = params || { bubbles: false, cancelable: false, detail: undefined };
    var evt = document.createEvent( 'CustomEvent' );
    evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );
    return evt;
  };

  CustomEvent.prototype = window.Event.prototype;
  window.CustomEvent = CustomEvent;
})(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-19T04:11:16.697

以下 polyfill 不会取代本机 CustomEvent()，
部分来源来自：[MDN CustomEvent()](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent)：

```
(function () {

  if (typeof CustomEvent === 'function') { return; }

  function customEvent(event, params) {

      params = params || {bubbles: false, cancelable: false, detail: undefined};

      var evt = document.createEvent('CustomEvent');

      evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);

      return evt;
  }

  customEvent.prototype = window.Event.prototype;
  window.CustomEvent = customEvent;
})(); 
```

# javascript - 如何向 javascript 方法添加多个回调？

> ID：14358613
> 
> 赞同：8
> 
> 时间：2013-01-16T12:34:46.313
> 
> 标签：javascript, jquery, callback

我使用“函数”技术创建了一个简单的 javascript 类。在课堂上，我有一个 websocket 侦听器，它在收到特定消息时触发一个函数。我可以轻松地为其添加外部回调，如下所示

```
function MyClass() {
    self = this; // to access main object from methods

    // websocket definition

    function websocketMessageInterpreter(message){
       if(message == "Hello!")  onHelloMessageBase();
     }

    function onHelloMessageBase(param){

    // call user defined callback
    self.userDefinedCallback(param);
    }
    this.userDefinedCallback= function(param){}; //default empty callback
} 
```

在外部，我将其用作

```
var myObject = new MyClass();
myObject.userDefinedCallback = function(){alert("Someone said hello!");}; 
```

有没有一个模型可以让我做这样的事情？

```
myObject.userDefinedCallback += function1;
myObject.userDefinedCallback += function2; 
```

也许以后

```
myObject.userDefinedCallback -= function1; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T12:37:17.873

执行此操作的常用方法是拥有一组回调，以及类似的方法，`addCallback(callback)`并`removeCallback(callback)`让 API 的用户添加和删除回调。

`addCallback`基本上是：

```
function addCallback(callback) {
    if (this.callbacks.indexOf(callback) < 0) {
        this.callbacks.push(callback);
    }
} 
```

`removeCallback`基本上是：

```
function removeCallback(callback) {
    var index;
    if ((index = this.callbacks.indexOf(callback)) >= 0) {
        this.callbacks.splice(index, 1);
    }
} 
```

如果您需要支持 IE6 等可能没有的非常旧的浏览器`Array#indexOf`，因为您使用的是 jQuery，所以您可以使用[`jQuery.inArray`](http://api.jquery.com/jQuery.inArray/)。

# inno-setup - 如何根据外部应用程序的返回码强制重启？

> ID：14358614
> 
> 赞同：3
> 
> 时间：2013-01-16T12:34:50.113
> 
> 标签：inno-setup

如果外部应用程序返回退出代码 5，我可以以某种方式强制重启吗？

```
[Run]
Filename: {app}\e.exe; Parameters: Z; Description: {cm:ALaunchProgram,{#ti}}; 
```

如果 RUN 部分不可能，我可以在哪里调用 ShellExec 以便在后期阶段运行可执行文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T13:14:54.360

`[Run]`除非执行的文件执行了 Inno 可以自动检测为需要重新启动的操作（例如安排在重新启动时替换或删除文件），否则无法从条目触发重新启动。这是通过`RestartIfNeededByRun`设置控制的，默认为`yes`.

如果您希望能够捕获返回值并用它做一些有趣的事情，您必须使用`[Code]`. 如果您必须在安装后进行，那么建议的位置是`CurStepChanged(ssPostInstall)`（实际上发生在`[Run]`条目通常之后）。

此时，您可以使用`Exec`来运行程序并检查退出代码，可选择设置一些全局变量来指示它是否要重新启动。然后，您可以在`NeedRestart`事件函数中使用该值。

但是，在走这条路之前，如果您尝试运行的东西实际上是某种必备组件，您应该强烈考虑从其安装它`PrepareToInstall`。Inno 中包含了一个示例，包括在先决条件安装和主应用程序安装之间触发重新启动的示例。

# c++ - 更少的内存使用

> ID：14358615
> 
> 赞同：1
> 
> 时间：2013-01-16T12:34:50.997
> 
> 标签：c++, memory

我有一个函数可以检查模式是否在提供的字符串内。该模式是预定义的，并且有很多可用，例如：

```
 const char* a1 = "apple";
  const char* a2 = "Orange";
  const char* a3 = "mango";
  const char* a4 = "grapes";
  ...
  ...
  ...
  const char* an = "Banana"; 
```

PS：a1,a2,a3 都是 FRUIT 类的成员变量。并且赋值是在构造函数中完成的。我有这个功能：

```
 void FindPattern(sample_String, predefined_string)
  {
     if(strstr(sample_string,predefined_string))
     {
      do sth...
     }
     else
       do another thing

   } 
```

所以我怀疑创建一个表示predefstrings（a1到an）的枚举并将它们传递给函数并在switch case或其他地方分配“apple”“orange”值的更好方法。这种方法会比在构造函数中初始化使用更少的内存吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:53:59.467

我不太确定我是否了解您想要优化的内存，这里。

假设它是实际成员，并且它们的类型确实是`const char*`，这些字符串只是指向编译时常量的指针。这些常量将（很可能）放置在堆栈或堆之外的某个常量内存区域内，并且仅在任何执行开始之前通过将程序加载到内存中“初始化”。因此，实际上没有任何内存使用可供您优化，因为字符串需要存储在程序生成的二进制文件中的*某个位置。*

因此，您实际用于此类实例的唯一内存是每个字符串的单个指针。如果这些指针对于每个实例都是相同的，则可以将它们设为`static`，这更清楚地表明了意图。如果它们在对象之间确实存在差异，则无法进行优化。在任何一种情况下，这都是如此少量的内存，它不应该有任何影响，而且您很可能正在考虑过早的优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:50:49.593

如果所有实例共享相同的集合，`a1,a2,...,an`并且在构造函数中设置它们后从未更改过，那么将它们设为 的`static`成员可能是个好主意`Fruit`，如下所示：

```
class Fruit {
  static const char* const a1;
  static const char* const a2;
  //...
  static const char* const an;
};

// In Fruit.cpp:
static const char* const Fruit::a1 = "apple";
static const char* const Fruit::a2 = "orange";
//...
static const char* const Fruit::an = "banana"; 
```

所有实例将共享成员`a1,a2,...,an`，而不会浪费任何内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:39:51.440

不，无论哪种方式，您都需要字符串常量。

# c# - 货币类别的正则表达式问题

> ID：14358617
> 
> 赞同：0
> 
> 时间：2013-01-16T12:34:58.643
> 
> 标签：c#, regex

我在 c# 中使用了非常好的货币类。课程效果很好，但是当我需要将美元转换为 IDR（印尼盾）时出现此错误

```
 "{lhs: \"1,0 U.S. dollar\",rhs: \"9 708,73786 Indonesian rupiahs\",error: \"\",icc: true}" 
```

问题是由 9 708,73786 中的空间引起的。我认为我需要删除空间。这是关于类的代码：

```
 public static class CurrencyConverter
{
    public static string Convert(decimal amount, string from, string to)
    {
        WebClient web = new WebClient();

        string url = string.Format("http://www.google.com/ig/calculator?hl=en&q={0}{1}=?{2}", amount, from.ToUpper(), to.ToUpper());

        string response = web.DownloadString(url);

        Regex regex = new Regex("rhs: \\\"(\\d*(.|,)\\d*)");
        Match match = regex.Match(response);

        return System.Convert.ToDecimal(match.Groups[1].Value).ToString();
    }
} 
```

}

可能我需要修改正则表达式，但我不知道有什么变化：

```
new Regex("rhs: \\\"(\\d*(.|,)\\d*)") 
```

这是 Visual Studio 2010（Windows 窗体）中的屏幕截图

![在此处输入图像描述](../Images/16bba63ac61fff4aef6f2d34d702d526.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:54:24.383

我建议这样做：

```
Regex regex = new Regex(@"(?<=rhs: \"")(\d[\s,]?)+");
Match match = regex.Match(response);
string value = Regex.Replace(match.ToString(), @"\s", "");
return System.Convert.ToDecimal(value).ToString(); 
```

在这里试试：http: [//ideone.com/ySISDU](http://ideone.com/ySISDU)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:48:02.867

尝试全局替换：

```
`\s(?=[0-9])` 
```

对于空字符串，然后才处理您的输入。

（请注意，`\d`在 .NET 语言中匹配任何 Unicode 数字，因此使用`[0-9]`代替）

# iphone - 申请未能及时恢复

> ID：14358620
> 
> 赞同：3
> 
> 时间：2013-01-16T12:35:15.620
> 
> 标签：iphone, ios

我在一个非常具体的场景中遇到了“未能及时恢复”崩溃（我认为这与看门狗有关）：仅在从后台恢复时，并且仅在进入后台后很短的时间内执行（a最多几秒钟）。

这似乎是相关的崩溃日志：

```
Incident Identifier: E30F2238-5B15-49A1-BCBC-386791AC93FA
CrashReporter Key:   84f4fb61c9e5c597750146695fffdc55f7273fb7
Hardware Model:      iPod4,1
Process:         XXXXXXX
Path:            /var/mobile/Applications/DE774CCE-D452-418D-A862-4562A0E5F1D0/XXXXXXX.app/XXXXXXX
Identifier:      XXXXXXX
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2013-01-14 13:15:41.955 +0200
OS Version:      iOS 6.0 (10A403)
Report Version:  104

Exception Type:  00000020
Exception Codes: 0x000000008badf00d
Highlighted Thread:  0

Application Specific Information:
XXXXXXX failed to resume in time

Elapsed total CPU time (seconds): 9.140 (user 9.140, system 0.000), 91% CPU 
Elapsed application CPU time (seconds): 7.806, 78% CPU

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0:
0   libsystem_kernel.dylib          0x336fa7cc fsync + 8
1   Foundation                      0x3a444974 _NSWriteBytesToFileWithExtendedAttributes + 668
2   Foundation                      0x3a4446ce _NSWriteBytesToFile + 22
3   Foundation                      0x3a4446ac -[NSData(NSData) writeToFile:atomically:] + 80
4   XXXXXX                          0x001777ee 0xe3000 + 608238
5   CoreFoundation                  0x38361034 _CFXNotificationPost + 1424
6   Foundation                      0x3a437d8c -[NSNotificationCenter postNotificationName:object:userInfo:] + 68
7   Foundation                      0x3a43b84e -[NSNotificationCenter postNotificationName:object:] + 26
8   XXXXXX                          0x000e6616 0xe3000 + 13846
9   UIKit                           0x37e050e4 -[UIApplication _handleApplicationSuspend:eventInfo:] + 780
10  UIKit                           0x37d7b1ea -[UIApplication handleEvent:withNewEvent:] + 2454
11  UIKit                           0x37d7a6d0 -[UIApplication sendEvent:] + 68
12  UIKit                           0x37d7a11e _UIApplicationHandleEvent + 6150
13  GraphicsServices                0x3600d5a0 _PurpleEventCallback + 588
14  GraphicsServices                0x3600d1ce PurpleEventCallback + 30
15  CoreFoundation                  0x383e5170 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
16  CoreFoundation                  0x383e5112 __CFRunLoopDoSource1 + 134
17  CoreFoundation                  0x383e3f94 __CFRunLoopRun + 1380
18  CoreFoundation                  0x38356eb8 CFRunLoopRunSpecific + 352
19  CoreFoundation                  0x38356d44 CFRunLoopRunInMode + 100
20  GraphicsServices                0x3600c2e6 GSEventRunModal + 70
21  UIKit                           0x37dce2fc UIApplicationMain + 1116
22  XXXXXXX                         0x000e5cd0 0xe3000 + 11472
23  XXXXXXX                         0x000e5c6c 0xe3000 + 11372 
```

我试过调试这个，但连接到调试器时似乎没有发生（我发现的所有相关信息都表明连接到调试器时 wacthdog 被禁用），所以我然后尝试将进程记录到尝试并遵循发生的事情。

我已将日志记录添加到所有`AppDelegate`相关方法（`applicationWillResignActive`、、、甚至）中`applicationDidEnterBackground`，但从后台返回时没有日志，只有在进入后台时。我知道，即使应用程序在后台运行了指定的时间，某些进程也可以以一种使它们能够恢复的方式进行调度，但我不会自己执行任何此类进程。也许 Facebook SDK 做了类似的事情，但我也找不到任何参考，崩溃日志也没有提供任何指示。`applicationWillEnterForeground``applicationDidBecomeActive``applicationWillTerminate`

我在这里有点不知所措，如果朝着正确的方向推动甚至轻推，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T13:29:33.097

是的，这与看门狗有关。

您的写作过程是否有可能在主线程上花费了太多时间并且阻塞了那个？这可以解释为什么从后台返回时没有显示日志数据，并且只有在进入后台后不久恢复时才会发生这种情况。

我建议执行以下操作：

1.  进入后台而不是在主线程中写入数据，而是通过以下方式使用后台任务：

    `[[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^{...`

2.  如果应用程序在后台任务仍在运行时恢复，则采取相应措施，例如在完成写入之前不要读取，或者如果它仍在写入则不要再次写入。所以你需要了解自己的状态

最大的规则：永远不要用任何可能花费超过几分之一秒的东西阻塞主线程。将所有内容移到后台线程中，或者在这种情况下移到后台任务中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-24T11:27:26.857

找到你的应用程序崩溃的线程把那个线程放进去 `dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ dispatch_async(dispatch_get_main_queue(), ^{ // run that crashing thread here. }); });`

# xaml - 在 Windows 8 中绑定到对象的一种方式

> ID：14358621
> 
> 赞同：0
> 
> 时间：2013-01-16T12:35:18.097
> 
> 标签：xaml, data-binding, windows-8, windows-runtime, windows-store-apps

我有一个实现 INotifyPropertyChanged 接口的 Observable 对象集合，它绑定到 ListView。我为 ItemTemplate 创建了一个 DataTemplate，其中我有几个元素绑定到带有转换器的项目属性以定义显示的内容。
这一切都按预期工作，当项目属性通过转换器通知和更新其相关元素时。
我需要做的是通过基于几个项目属性的转换器绑定数据模板中的元素。我设法通过将元素绑定到完整的数据项来做到这一点。但是，如果更新了任何属性，则不会通知元素并且不会更新值。我将如何实现这一目标？我需要以某种方式创建一个通知，当它的任何属性发生变化时，该项目已更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:43:27.703

从转换器中获取逻辑并将其移动到类的新属性，并在它所依赖的属性的设置器中调用新属性的 PropertyChanged。

如果该类是密封的或不可更改的，您可以创建一个包装器来执行此操作。然后将转换器添加到您的 ItemsSource 绑定中，以包装您的集合中的项目。

# r - 计算一系列csv文件的行数

> ID：14358629
> 
> 赞同：6
> 
> 时间：2013-01-16T12:36:02.260
> 
> 标签：r, apply, lapply

我正在研究 R 教程，并怀疑我必须使用其中一个功能，但我不确定是哪个（是的，我研究了它们，但直到我对 R 术语更加流利，它们才变得相当混乱）。

在我的工作目录中有一个文件夹“specdata”。Specdata 包含数百个名为 001.csv - 300.csv 的 CSV 文件。

我正在处理的函数必须计算输入的 csv 文件数的总行数。因此，如果函数中的参数是`1:10`并且每个文件都有十行，则返回 100。

这是我到目前为止所拥有的：

```
complete <- function(directory,id = 1:332) {
    setpath <- paste("/Users/gcameron/Desktop",directory,sep="/")
    setwd(setpath)
    csvfile <- sprintf("%03d.csv", id)
    file <- read.csv(csvfile)
    nrow(file)
 } 
```

这在 ID 参数是一个数字时有效，比如 17。但是，如果我输入 10:50 作为参数，我会收到一个错误：

```
Error in file(file, "rt") : invalid 'description' argument 
```

我应该怎么做才能从输入的 ID 参数中计算总行数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T12:44:31.400

`read.csv`期望只读取一个文件，因此您需要遍历文件，这样做的 R 惯用方法是使用`sapply`：

```
nrows <- sapply( csvfile, function(f) nrow(read.csv(f)) )
sum(nrows) 
```

例如，这是您的`complete`函数的重写：

```
complete <- function(directory,id = 1:332) {
    csvfiles <- sprintf("/Users/gcameron/Desktop/%s/%03d.csv", directory, id)
    nrows <- sapply( csvfiles, function(f) nrow(read.csv(f)) )
    sum(nrows)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:47:47.307

家庭作业问题通常会被标记为这样，虽然我不知道这是否需要，但这显然是家庭作业。

您编写的函数期望 id*不是*向量（尽管默认值是整数向量）。

将其更改为使用 *apply 函数之一（更简洁和通用），甚至使用显式循环。对于 id 向量中的每个元素，您必须调用一个函数来打开该文件并计算观察值。

[这篇 stackoverflow 帖子](https://stackoverflow.com/questions/3505701/r-grouping-functions-sapply-vs-lapply-vs-apply-vs-tapply-vs-by-vs-aggrega)很好地解释了 *apply 函数之间的区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-09T13:52:20.433

```
id <-c(1:332)
filenames=list.files(path="source_path", full.names=TRUE)

for(a in id){

    dataset <- read.csv(filenames[a])

    res <- nrow(na.exclude(dataset))  #nrow count the row of the dataset

    df <-data.frame(
    id =a,
    nobs =res,  
    stringsAsFactors=FALSE)
}   

df 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-29T17:10:59.663

```
complete <- function(directory, id = 1:332){
  mylist <- list.files(path = directory, pattern = ".csv")
  result <- data.frame()
  for(i in id){
    my_data <- read.csv(paste(directory,mylist[i],sep=""))
    res <- nrow(na.exclude(my_data))  #nrow count the row of the dataset
    df <- data.frame("id" = i,"nobs" = res,  stringsAsFactors=FALSE)
    result <- rbind(result,df)
  }
  return(result)
} 
```

# c# - 使用 NEST 字段提升的弹性搜索

> ID：14358630
> 
> 赞同：10
> 
> 时间：2013-01-16T12:36:06.550
> 
> 标签：c#, elasticsearch, nest

我正在使用 NEST 强类型客户端在 C# 中使用 Elastic Search。我有一个包含条目的索引：

```
[ElasticType(Name = "Entry", IdProperty = "Id")]
public class Entry
{
    public string Id { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }
    public string Award { get; set; }
    public int Year { get; set; }
} 
```

其中 Year 是参赛作品的年份，例如 2012 年，Award 是参赛作品获得的奖项类型，可以为空。

然后我想使用提升来搜索这些条目以获得不同的属性。在下面的代码中，我希望与标题匹配的结果排名高于与描述匹配的结果。

```
private IQueryResponse<Entry> GetMatchedEntries(string searchText)
{
    return _elasticClient.Search<Entry>(
                body =>
                body.Query(q => 
                           q.QueryString(qs => 
                                         qs.OnFieldsWithBoost(d => 
                                                              d.Add(entry => entry.Title, 5.0)
                                                              .Add(entry => entry.Description, 2.0))
                           .Query(searchText))));
} 
```

我现在被要求提升获奖者的成绩，并提升新的参赛作品（即按年度）。

我该怎么做呢？它是作为索引服务的一部分还是作为搜索的一部分需要完成的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T11:42:04.820

`boosting`您可以通过查询和`custom_score`查询的组合来实现这一点

我们不是提高年份，而是根据年份改变分数，因为：

```
(_score + 2013) > (_score + 1999) 
```

较新的结果将浮到顶部。

通过使用提升查询，我们可以有效地将缺少奖励字段的结果降级。

请参阅： [https ://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-boosting-query.html](https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-boosting-query.html) [https://www.elastic.co/guide/en/elasticsearch/reference/current /query-dsl-function-score-query.html](https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-function-score-query.html)

```
_client.Search<Entry>(s=>s
    .Query(q =>q
        .Boosting(bq=>bq
            .Positive(pq=>pq
                .CustomScore(cbf=>cbf
                    .Query(cbfq=>cbfq
                        .QueryString(qs => qs
                            .OnFieldsWithBoost(d =>
                                d.Add(entry => entry.Title, 5.0)
                                .Add(entry => entry.Description, 2.0)
                            )
                            .Query(searchText)
                        )
                    )
                    .Script("_score + doc['year'].value")
                )
            )
            .Negative(nq=>nq
                .Filtered(nfq=>nfq
                    .Query(qq=>qq.MatchAll())
                    .Filter(f=>f.Missing(p=>p.Award))
                )
            )
            .NegativeBoost(0.2)
        )
    )
); 
```

# websphere - 如何安全地处理 JMX 远程客户端中缺少的本地类

> ID：14358631
> 
> 赞同：1
> 
> 时间：2013-01-16T12:36:08.437
> 
> 标签：websphere, rmi, jmx, classnotfoundexception, corba

我一直在玩一个可编程的远程 JMX 客户端，它连接到 WebSphere Application Server 的 MBean 服务器。到目前为止一切顺利，我可以使用适当的 JMXServiceURL 进行连接并订阅来自我的 bean 的通知。

但是 - 如果一个 bean 发送一个通知，其中包含一个不在我的本地类路径上的类，它会以一个很好的堆栈跟踪爆炸：

```
SEVERE: Failed to fetch notification, stopping thread. Error is: java.rmi.RemoteException: CORBA NO_IMPLEMENT 1330646337 No; nested exception is: 
    org.omg.CORBA.NO_IMPLEMENT: The sender's class RMI:com.mycompany.MyWeirdClass:143EC4C84209B825:EAD08F0965BC6044 is not present on the local classpath, and the class is not marked as truncatable, so it cannot be unmarshaled.  vmcid: OMG  minor code: 1  completed: No
java.rmi.RemoteException: CORBA NO_IMPLEMENT
... more frames ... 
```

这最终是由以下原因引起的：

```
Caused by: java.lang.ClassNotFoundException: com.mycompany.MyWeirdClass
    at com.ibm.rmi.util.RepositoryId.loadClass(RepositoryId.java:675)
    at com.ibm.rmi.util.RepositoryId.checkClassCache(RepositoryId.java:644)
    ... 
```

看起来它在 IBM 的代码深处爆炸了，而且似乎没有任何地方我可以做任何事情；有问题的通知永远不会到达我的 NotificationListener。

所以; 在不阻止我收到进一步通知的情况下，我能做些什么来处理这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:51:02.377

我可以想出 4 种方法来解决这个问题，按复杂度升序排列（我认为）：

**将类库添加到客户端类路径**

陈述显而易见，但力求全面。

**修改通知**

*考虑修改服务器生成的通知，将com.mycompany.MyWeirdClass*实例换成格式化字符串。如果对象很复杂，请考虑使用 XML 或 JSON。如果您可以修改通知发送者以编组实例，那可能是最简单的。如果没有，您可以修改*com.mycompany.MyWeirdClass*类（应该是[Serializable](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)，对吗？）并添加一个[writeReplace](http://docs.oracle.com/javase/6/docs/platform/serialization/spec/output.html#5324)方法，该方法返回实例的 String 表示形式。

**远程类加载器**

在您的 WebSphere 应用程序中实现一个 HTTP 服务器，该服务器返回包含*com.mycompany.MyWeirdClass*类及其所有依赖项的 JAR。（从技术上讲，HTTP 服务器可以在任何地方，只要它提供正确的类。）假设 JAR 在***http://classloader.mycompany.com/Weird.jar***可用。现在使用添加的系统属性启动您的客户端，如下所示：

```
java .....  -D-Djava.rmi.server.codebase=http://classloader.mycompany.com/Weird.jar ... 
```

[这里](https://github.com/nickman/GroovyMX/blob/master/gmx/src/main/java/org/helios/gmx/classloading/ReverseClassLoader.java)有一个提供动态类加载的 HTTP 服务器实现示例。

**将类实现为 JMX OpenType**

最常见的方法是使类成为[MXBean](http://docs.oracle.com/javase/tutorial/jmx/mbeans/mxbeans.html)，或者您可以实现[CompositeData](http://docs.oracle.com/javase/7/docs/api/javax/management/openmbean/CompositeData.html)或扩展[CompositeDataSupport](http://docs.oracle.com/javase/7/docs/api/javax/management/openmbean/CompositeDataSupport.html)。如果您不介意使用 **com.sun**类，java 运行时 (1.6+) 包含[DefaultMXBeanMappingFactory](http://www.docjar.com/docs/api/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.html) 它将为您创建一个复合数据实例，因此这个有用的实用程序可以与上述解决方案之一一起使用。例如，您像这样实现*writeReplace*轨道：

```
import com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory;
import com.sun.jmx.mbeanserver.MXBeanMapping;
final MXBeanMapping mapping = 
   DefaultMXBeanMappingFactory.DEFAULT.mappingForType(
      com.mycompany.MyWeirdClass.class, 
      DefaultMXBeanMappingFactory.DEFAULT
   );
private Object writeReplace() throws ObjectStreamException {
   try {
      return mapping.toOpenValue(this);
   } catch (Exception ex) {
      throw new RuntimeException(ex);
   }
} 
```

# javascript - 补间 css 颜色属性，最好使用 tweenlite javascript

> ID：14358643
> 
> 赞同：0
> 
> 时间：2013-01-16T12:36:51.980
> 
> 标签：javascript, jquery, css-transitions, gsap

我有一个按钮可以反转我网站上的颜色。它利用一个名为 rgb color 的插件 - [http://www.phpied.com/rgb-color-parser-in-javascript/](http://www.phpied.com/rgb-color-parser-in-javascript/)来获取所有 dom 元素的颜色值，并将它们反转。我正在使用以下代码执行此操作：

```
invertColors: function(){
      var colorProperties = ['color', 'background-color'];

      //iterate through every element
      $('*').each(function() {
        var color = null;

        for (var prop in colorProperties) {
            prop = colorProperties[prop];
            if (!$(this).css(prop)) continue; //if we can't find this property or it's null, continue
            color = new RGBColor($(this).css(prop)); //create RGBColor object
            if (color.ok) { //good to go, build RGB
              var element = $(this);
              $(this).css(prop, 'rgb(' + (255 - color.r) + ', ' + (255 - color.g) + ', ' + (255 - color.b) + ')'); //subtract each color component from 255
            }
            color = null; //some cleanup
        } //end each for prop in colorproperties
      }); //end each
    } //end invert colors 
```

我想做的不仅仅是翻转颜色，补间它。我很想试试 greensock 补间引擎，因为据说它比 jquery 快 20 倍，但如果必须，我可以使用不同的方法。他们的补间引擎记录在这里：

[http://www.greensock.com/get-started-js/#css](http://www.greensock.com/get-started-js/#css)

所以据说，我应该能够拨打这样的电话：

```
TweenLite.to(element, 1, {css:{prop:'rgb(' + (255 - color.r) + ', ' + (255 - color.g) + ', ' + (255 - color.b) + ')' }, ease:Power2.easeOut}); 
```

但这不起作用（没有抛出错误），所以我不确定我做错了什么。任何人都对如何使其工作有任何想法，或者对所有这些颜色属性进行补间的最快方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T22:10:27.613

在这里解决： [http ://forums.greensock.com/topic/7101-tweening-a-css-color-propertys-rgb-values/#entry26465](http://forums.greensock.com/topic/7101-tweening-a-css-color-propertys-r-g-b-values/#entry26465)

您绝对可以使用 GSAP 做到这一点。问题与未正确分配属性有关（您实际上是在要求 TweenLite 补间“prop”而不是“color”或“backgroundColor”），并且 TweenLite 需要 camelCase 属性（“backgroundColor”，而不是“background-color”）。

```
function invertColors() {
    var colorProperties = ['color', 'backgroundColor'];

    //iterate through every element
    $('*').each(function() {
        var color = null,
           obj, css, prop;
       for (prop in colorProperties) {
           prop = colorProperties[prop];
           obj = $(this);
           if (!obj.css(prop)) continue; //if we can't find this property or it's null, continue
           css = {};
           color = new RGBColor(obj.css(prop));
           if (color.ok) { 
               css[prop] = 'rgb(' + (255 - color.r) + ', ' + (255 - color.g) + ', ' + (255 - color.B) + ')';
               TweenLite.to(this, 2, {css:css});
            }
        } 
    }); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:30:55.710

还没有想出如何使用补间引擎甚至 requestAnimationFrame 来做到这一点，但我用 css 过渡做到了：

```
this.invertColors = function(){
      var colorProperties = ['color', 'background-color'];

      //iterate through every element
      $('*').each(function() {

        var $thisElement = $(this);

        for (var prop in colorProperties) {
            prop = colorProperties[prop];
            if (!$(this).css(prop)) continue; //if we can't find this property or it's null, continue
            color = new RGBColor($(this).css(prop)); //create RGBColor object
            if (color.ok) { //good to go, build RGB
              var newColor = new RGBColor('rgb(' + Math.abs(255-color.r) + ', ' + Math.abs(255-color.g) + ', ' + Math.abs(255-color.b) +')');
              if (prop == "background-color"){
                $thisElement.css({'transition':'background 1s'});
                $thisElement.css({'background-color': 'rgb('+newColor.r+','+newColor.g+','+newColor.b+')'});
              } else {
                $thisElement.css({'transition':'color 1s'});
                $thisElement.css({'color': 'rgb('+newColor.r+','+newColor.g+','+newColor.b+')'});
              }

              //$thisElement.css(prop, 'rgb(' + Math.abs(255 - color.r) + ', ' + Math.abs(255 - color.g) + ', ' + Math.abs(255 - color.b) + ')'); //subtract each color component from 255
            }
            color = null; //some cleanup
        } //end each for prop in colorproperties*/
      }); //end each
    } //end invert colors 
```

# jquery - 如何使用 Jquery 只检查 gridview 的几个复选框？

> ID：14358644
> 
> 赞同：0
> 
> 时间：2013-01-16T12:37:11.383
> 
> 标签：jquery

我有一个有几列的网格

```
<div id="AbstractDiv" runat="server" class="DivGrid">
<asp:GridView GridLines="None" ID="Abstract_GridView" runat="server" AutoGenerateColumns="False" CssClass="Grid" CellPadding="0"> 
<Columns>
<asp:TemplateField HeaderText="Select">
 <HeaderTemplate>
 <asp:CheckBox ID="AllChk" runat="server" TabIndex="3"  CssClass="smallCheckbox"/>
 </HeaderTemplate>
 <ItemStyle HorizontalAlign="Center" />
 <ItemTemplate>
 <asp:CheckBox ID="SelectChk" runat="server" TabIndex="5" CssClass="smallCheckbox" />
 </ItemTemplate>
 </asp:TemplateField>
<asp:TemplateField>
 <ItemTemplate>
 <asp:HiddenField ID="EqpNo" runat="server" value='<%# Bind("Equipmnt_No") %>' />
 </ItemTemplate>
</asp:TemplateField>
</Columns>
  </asp:GridView>
 </div> 
```

我在同时检查几个复选框时遇到了问题。我有一列 EqpNo，其 EqpNo 与所选行匹配的所有行都应选中该行复选框。

我提到了[url](https://stackoverflow.com/questions/9355889/asp-net-grid-view-select-row-using-jquery)，但它只允许检查一行。下面是我的 Jquery 代码，它检查所有行而不是只匹配一个。

```
$('#<%=Abstract_GridView.ClientID %>').delegate('tr', 'click', function () {
 var SelectRowEqpNo = $(this).find("input[id*=EqpNo]").attr("value"); //trying to get the clicked row EqpNo
 $('#<%=Abstract_GridView.ClientID %> tr input[id*="EqpNo"]').each(function () {
   var Eachrw = $(this).val(); //getting each row EqpNo
   if (SelectRowEqpNo == Eachrw) { //Comparing both values if matching 
$('#<%=Abstract_GridView.ClientID %> tr input[id*="SelectChk"]:checkbox').attr('checked', true);              
}
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:52:15.440

尝试：

```
$('#<%=Abstract_GridView.ClientID %>').on('click', 'tr', function () {

 var SelectRowEqpNo = $(this).find("input[id*=EqpNo]").val(); //trying to get the clicked row EqpNo

 $('#<%=Abstract_GridView.ClientID %> tr input[id*="EqpNo"]').each(function () {
   var Eachrw = $(this).val(); //getting each row EqpNo
   if (SelectRowEqpNo === Eachrw) { //Comparing both values if matching 
   $('#<%=Abstract_GridView.ClientID %> tr input[id*="SelectChk"]:checkbox').attr('checked', true);              
     }
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:52:23.040

我会将 css 类添加到隐藏字段（仅用于更简单的 jQuery 选择器）：

```
<asp:HiddenField ID="EqpNo" runat="server" value='<%# Bind("Equipmnt_No") %>' class="EqpNo" /> 
```

**UPD：**哎呀。似乎那里根本不允许上课......奇怪......代码更新以反映这一点。

而不是使用如下代码：

```
$('.DivGrid').delegate('tr', 'click', function () {
      var SelectRowEqpNo = $(this).find("input.EqpNo").val();
      $(this).closest("table").find('tr input[id*="SelectChk"][value="'+SelectRowEqpNo+'"]')
      .each(function() {
            $("this").closest("tr").find(".smallCheckbox").attr('checked', true);
      });
  }); 
```

希望括号没有错误）

另请注意，我已经删除了所有`#<%=Abstract_GridView.ClientID %>`类似的内容，并将它们替换为查找与当前单击的 tr 相关的元素的函数（如`.closest`, `.find`）。现在它完全独立于ID，代码更简洁，可以很容易地放入外部类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:59:26.720

这是整个代码工作。我改变了 if 块中的 jQuery 行：

```
<asp:GridView GridLines="None" ID="Abstract_GridView" runat="server" AutoGenerateColumns="False"
        CssClass="Grid" CellPadding="0">
        <Columns>
            <asp:TemplateField HeaderText="Select">
                <HeaderTemplate>
                    <asp:CheckBox ID="AllChk" runat="server" TabIndex="3" CssClass="smallCheckbox" />
                </HeaderTemplate>
                <ItemStyle HorizontalAlign="Center" />
                <ItemTemplate>
                    <asp:CheckBox ID="SelectChk" runat="server" TabIndex="5" CssClass="smallCheckbox" />
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField>
                <ItemTemplate>
                    <asp:HiddenField ID="EqpNo" runat="server" Value='<%# Bind("Equipmnt_No") %>' />
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField>
                <ItemTemplate>
                    <asp:Label ID="lbl" runat="server" Text='<%# Bind("Equipmnt_No") %>' />
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

和 jQuery 块：

```
 $(document).ready(function () {
        $('#<%=Abstract_GridView.ClientID %>').delegate('tr', 'click', function () {
            var SelectRowEqpNo = $(this).find("input[id*=EqpNo]").attr("value"); //trying to get the clicked row EqpNo
            $('#<%=Abstract_GridView.ClientID %> tr input[id*="EqpNo"]').each(function (i, v) {
                var Eachrw = $(this).val(); //getting each row EqpNo
                if (SelectRowEqpNo == Eachrw) { //Comparing both values if matching 
                    $(this).parents("tr").find('input[id*="SelectChk"]:checkbox').attr('checked', true);
                }
            });
        });
    }); 
```

基本上：找到所有者 tr 向上遍历 DOM，然后再次找到向下遍历 DOM 的复选框。

希望这可以帮助。

# objective-c - 一个图形核心图中的折线图和条形图

> ID：14358645
> 
> 赞同：2
> 
> 时间：2013-01-16T12:37:12.967
> 
> 标签：objective-c, graph, xcode4.5, core-plot

嗨，我正在寻找一个图表，我可以在条形图上绘制散点图（条形图上的线），是否可以使用核心图在同一个图中绘制折线图和条形图？

我尝试跟随以获得相同的结果，但我没有成功。

```
CPTGraphHostingView *hostingView = [[CPTGraphHostingView alloc] initWithFrame:CGRectMake(0, 0, width, height)];

CPTXYGraph *graph = [[CPTXYGraph alloc] initWithFrame: hostingView.bounds];
hostingView.hostedGraph = graph;

CPTBarPlot *cptBarPlot = [[CPTBarPlot alloc] init];
            cptBarPlot.fill = [CPTFill fillWithColor:color];
            cptBarPlot.lineStyle = nil;
            cptBarPlot.identifier = [columnSeries objectForKey:@"id"];
            cptBarPlot.name = [columnSeries objectForKey:@"displayName"];
            cptBarPlot.plotRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(BarInitialX) length:CPTDecimalFromDouble(xAxisLength)];

            cptBarPlot.barWidth = CPTDecimalFromDouble(BarWidth);
            cptBarPlot.dataSource = self;
            //cptBarPlot.opacity = 0.0f;
            cptBarPlot.delegate = self;

[graph addPlot:cptBarPlot];

CPTXYPlotSpace * secondPlotSpace = [[CPTXYPlotSpace alloc]init];
        secondPlotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(BarInitialX) length:CPTDecimalFromDouble(xAxisLength+1)];
        secondPlotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(0.0) length:CPTDecimalFromFloat(yAxisLength)];

        //[graph addPlotSpace:secondPlotSpace];

        CPTScatterPlot * linePlot = [[CPTScatterPlot alloc] init];

        CPTMutableLineStyle * lineStyle = [CPTMutableLineStyle lineStyle];
        lineStyle.lineWidth = 1.f;
        lineStyle.lineColor = color;
        lineStyle.dashPattern = [NSArray arrayWithObjects:[NSNumber numberWithFloat:3.0f],nil];

        linePlot.dataLineStyle = lineStyle;
        linePlot.identifier = [lineSeries objectForKey:@"id"];
        linePlot.dataSource = self;
        linePlot.name = [lineSeries objectForKey:@"displayName"];

        //linePlot.plotRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(BarInitialX) length:CPTDecimalFromDouble(xAxisLength)];

        [graph addPlot: linePlot]; 
```

我在上面尝试过，还尝试在不同的绘图空间中添加绘图，即 [graph addPlot:linePlot toPlotSpace:secondPlotSpace] 仍然没有成功。

我想我错过了一些东西，但找不到它。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T18:32:05.150

您是否实现了以下方法来返回图表值？

```
 -(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index
{
    if ( [plot isKindOfClass:[CPTBarPlot class]] ) {
        switch (fieldEnum) {
            case CPTBarPlotFieldBarLocation:
                return ...;
                break;
            case CPTBarPlotFieldBarTip:
                return ...;
                break;
            case CPTBarPlotFieldBarBase:
                return ...;
            default:
                return 0;
                break;
        }
    } else {
        switch (fieldEnum) {
            case CPTScatterPlotFieldX:
                return ...;
                break;
            case CPTScatterPlotFieldY:
                return ...;
                break;
            default:
                return 0;
                break;
        }

    }
} 
```

# c# - 如何检查一个类的所有公共方法都是虚拟的

> ID：14358652
> 
> 赞同：2
> 
> 时间：2013-01-16T12:37:27.877
> 
> 标签：c#, .net, nunit, nservicebus

在 .net 项目中有很多用 c# 实现的实体。使用的库（saga 实体的 nservicebus）的要求是所有访问方法都必须声明为公共和虚拟的，否则在部署过程中会失败。

在单元测试阶段检查实体的访问方法是否是虚拟的是合理的，部署可能需要很长时间（在它被发现之前）

有谁知道检查类中的所有公共方法是否在 nunit 测试中声明为虚拟的好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T12:40:50.970

我使用相同的测试来验证，游戏引擎包装器具有所有公共方法作为虚拟。它使测试更容易，并且可以显着减少反馈时间。我将这些方法放在特殊类下`DesignTests`，例如，我测试在我的项目中没有违反约定。有复杂的东西，`FxCop`无法检测。你可以看到下面的代码：

```
[Test]
public void AllPublicMethodsInUnityFacade_ShouldBeVirtual()
{
    var allPublicMethods = 
        typeof(UnityFacade).GetMethods(BindingFlags.DeclaredOnly |
                                       BindingFlags.Instance |
                                       BindingFlags.Public);

    Assert.IsTrue(allPublicMethods.All(method => method.IsVirtual),
                  string.Join(", ", allPublicMethods
                                        .Where(method => !method.IsVirtual)
                                        .Select(method => method.Name)) 
                                     + " is not virtual");

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:40:34.140

使用反射，卢克。

[http://msdn.microsoft.com/en-us/library/system.reflection.methodbase.isvirtual.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.methodbase.isvirtual.aspx)

```
using System;
using System.Reflection;

public class MyClass 
{
    public void MyMethod() 
    {
    }
    public static void Main() 
    {
        MethodBase m = typeof(MyClass).GetMethod("MyMethod");
        Console.WriteLine("The IsFinal property value of MyMethod is {0}.", 
                          m.IsFinal);
        Console.WriteLine("The IsVirtual property value of MyMethod is {0}.",
                          m.IsVirtual);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T23:54:33.140

你也可以使用像[Fody/Virtuosity](https://github.com/Fody/Virtuosity#readme)这样的工具来为你完成这项工作:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T12:48:14.763

```
public static void Main() 
{
    MethodInfo[] methodInfos = 
        typeof(MyClass).GetMethods(BindingFlags.Public 
                                   | BindingFlags.Instance 
                                   | BindingFlags.DeclaredOnly);

    Console.WriteLine("The number of public methods is: {0}", 
                      methodInfos.Length);

    Int32 virtualCount = 0;

    foreach (MethodInfo methodInfo in methodInfos)
    {
        if (methodInfo.IsVirtual)
            ++virtualCount;
    }

    if (virtualCount == methods.Length)
        Console.WriteLine("All the methods are virtual!");
    else
        Console.WriteLine("Only {0}/{1} methods are virtual!", 
                          virtualCount, methods.Length);    
} 
```

# iphone - 滑动时获取触摸位置

> ID：14358655
> 
> 赞同：0
> 
> 时间：2013-01-16T12:37:51.960
> 
> 标签：iphone, uigesturerecognizer, uiswipegesturerecognizer

任何人都知道在用户滑动时获取当前触摸位置（不是开始或结束位置）的方法吗？

类似的东西

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView{
    NSLog(@"%f", scrollView.contentOffset.x);
} 
```

但是对于 UISwipeGestureRecognizer

谢谢，

最大限度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:10:48.633

该类`UISwipeGestureRecognizer`仅提供手势的起点和方向。但是，反复调用它的关联动作方法，您每次`UIPanGestureRecognizer`都可以获得手势的当前位置（使用）。`locationInView:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:13:01.157

采用`PanGestureRecognizer`

```
- (void)onDraggingLetter:(UIPanGestureRecognizer *)panGR {
CGPoint translation = [panGR translationInView:baseView];

    if (panGR.state == UIGestureRecognizerStateBegan) {
    } else if (panGR.state == UIGestureRecognizerStateChanged) { 
    }
    else if (panGR.state == UIGestureRecognizerStateEnded) {
    }
} 
```

# mysql - MySQL 从起始值开始排序

> ID：14358656
> 
> 赞同：4
> 
> 时间：2013-01-16T12:37:53.840
> 
> 标签：mysql, sql, select, sql-order-by

在产品页面上，我有一个下拉列表，列出了与产品页面关联的当前颜色选项。

在此示例中，产品页面 SKU 为 250E，可用于：

```
GREEN
BLACK 
```

如果客户选择 GREEN，那么我想运行一个 MySQL 命令，该命令将根据下面显示的 custom_order 值首先更改数据以显示 GREEN 值。

起始值应覆盖其他数据项，然后应保留 custom_order 值。custom_order 字段具有 c1、c2 之类的字母（它们将始终位于底部）

```
Colour Table
============
ID      COLOURID        NAME
-------------------------------------
2           5           BLACK
3           6           GREEN

Product Table
=============
ID      SKU         PICTURE URL             COLOURID            CUSTOM_ORDER        
-----------------------------------------------------------------
22      250E        cdn_hash_1.jpg          5                   1
23      250E        cdn_hash_2.jpg          5                   2
24      250E        cdn_hash_3.jpg          5                   3
225     250E        cdn_hash_4.jpg          5                   4
226     250E        cdn_hash_5.jpg          6                   5
227     250E        cdn_hash_6.jpg          6                   6
325     250E        cdn_hash_c1.jpg         -                   c1
426     250E        cdn_hash_c2.jpg         -                   c2
527     250E        cdn_hash_c3.jpg         -                   c3 
```

**SELECT * FROM products WHERE ORDER BY custom_order DESC**

现在，我想做以下事情：

**SELECT * FROM products WHERE ORDER BY custom_order AND START VALUE = '6'**

因此，无论如何，c1、c2 保持不变，结果将是：

```
22      250E        cdn_hash_5.jpg          6                   5
23      250E        cdn_hash_6.jpg          6                   6
24      250E        cdn_hash_1.jpg          5                   1
225     250E        cdn_hash_2.jpg          5                   2
226     250E        cdn_hash_3.jpg          5                   3
227     250E        cdn_hash_4.jpg          5                   4
325     250E        cdn_hash_c1.jpg         -                   c1
426     250E        cdn_hash_c2.jpg         -                   c2
527     250E        cdn_hash_c3.jpg         -                   c3 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T13:22:29.077

这是我一直在寻找的答案。我希望我不会因此而被否决，但我设法解决了这个问题。

让我再解释一下更简单的术语。MySQL ORDER BY + Start with..

```
MySQL:

id | name  |
------------
1  | Joe   |
2  | Craig |
3  | Shawn |
4  | Ryan  |
5  | Seth  | 
```

PHP：

```
$a = mysql_query("SELECT * FROM table_name ORDER BY name DESC"); 
```

我想做的是，我想从 id: 3 开始，所以它应该输出：

```
3,4,5,1,2 
```

# 解决方案 1

```
SELECT id, name
FROM table_name
ORDER BY id < 3, id 
```

结果：

```
3  Shawn
4  Ryan
5  Seth
1  Joe
2  Craig 
```

# 解决方案 2

您可以使用`FIELD`，例如

```
SELECT * 
FROM products 
ORDER BY FIELD(`order`, 6) ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:38:42.623

 ~~`WHERE`条件应该在`ORDER BY`子句之前

```
SELECT * 
FROM products 
WHERE START_VALUE = '6' 
ORDER BY order 
```

作为旁注，`ORDER`是一个`RESERVED`关键字。逃避它的一种方法是用反引号包裹。例如，

```
SELECT * 
FROM products 
WHERE START_VALUE = '6' 
ORDER BY `order` 
```

另一种是通过提供`ALIAS`

```
SELECT * 
FROM products p
WHERE START_VALUE = '6' 
ORDER BY p.order 
```

 ~~但回顾您的问题，您想自定义数据排序吗？您可以使用`FIELD`，例如

```
SELECT * 
FROM products 
ORDER BY FIELD(`order`, 6) ASC 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-16T12:46:57.760

请清除您的问题。如果您想要所有记录，请使用如下查询...

SELECT * FROM products WHERE ORDER BY COLOURID ASC, order DESC~~~~

# css - 检查父母是否使用LESS上课

> ID：14358664
> 
> 赞同：27
> 
> 时间：2013-01-16T12:38:10.423
> 
> 标签：css, sass, less

示例场景：如果用户启用了 javascript，我想隐藏一个子导航菜单，以便通过单击导航层次结构中进一步向上的导航链接来显示它。如果启用了 javascript，Modernizr 会在 html 标记中添加一个类“js”，以便我可以使用它进行检测。

在 SASS 中，我可以这样做：

```
div.subnav{

   display: block;

   html.js & {
      display: none;
   }

} 
```

这可以使用LESS来完成吗？我可以从另一个规则中定位父母吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-01-16T12:44:14.947

> 这可以使用LESS来完成吗？

是的。

您提供的代码在 LESS 中有效。作品[相同](http://lesscss.org/features/#parent-selectors-feature-changing-selector-order)[。`& combinator`](http://lesscss.org/features/#parent-selectors-feature-changing-selector-order)

最后，生成的选择器用于：

```
div.subnav {
    ...
    html.js & {
        ...
    }
} 
```

将会：

```
div.subnav {
    ...
}

html.js div.subnav {
    ...
} 
```

# .net - .net 序列化不同的框架

> ID：14358667
> 
> 赞同：0
> 
> 时间：2013-01-16T12:38:25.977
> 
> 标签：.net

使用不同的 .net 框架（框架 2 和 4）进行序列化和反序列化时，很容易重现错误。当我使用框架 2 序列化 System.Globalization.CompareInfo 并尝试使用框架 4 对其进行反序列化时，将会出现 OverflowException。代码如下：

```
private void button1_Click(object sender, EventArgs e)
{
    CompareInfo ci = CompareInfo.GetCompareInfo("de-DE");

    Stream stream = File.Open("C:\\Temp\\test.bin", FileMode.Create);
    BinaryFormatter formatter = new BinaryFormatter();
    formatter.AssemblyFormat = System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Simple;
    formatter.TypeFormat = System.Runtime.Serialization.Formatters.FormatterTypeStyle.XsdString;
    formatter.Serialize(stream, ci);
    stream.Close();
}

private void button2_Click(object sender, EventArgs e)
{
    Stream stream = File.Open("C:\\Temp\\test.bin", FileMode.Open);
    BinaryFormatter formatter = new BinaryFormatter();
    CompareInfo ci = (CompareInfo)formatter.Deserialize(stream);
    stream.Close();
} 
```

当我使用相同的版本（2 或 4）执行此操作时，它按预期工作。当我用框架 2 保存文件并尝试用框架 4 打开它时，我会得到 OverflowException。现在我正在寻找一种解决方法（因为我们的客户有数千个使用框架 2.0 编写的文件）。我尝试了一种方法，例如[如何添加充当 ISerializable 接口的自定义序列化属性，](https://stackoverflow.com/questions/2174591/net-c-how-to-add-a-custom-serialization-attribute-that-acts-as-iserializable)但没有成功。有任何想法吗？

对不起，我省略了导致可能代码崩溃的两行：

```
 formatter.AssemblyFormat = System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Simple;
  formatter.TypeFormat = System.Runtime.Serialization.Formatters.FormatterTypeStyle.XsdString; 
```

因为我认为它们没有必要。现在我更新了代码，它正在崩溃。读取文件时包含这些行无济于事。

# java - 关于Java中的静态final关键字

> ID：14358670
> 
> 赞同：45
> 
> 时间：2013-01-16T12:38:47.553
> 
> 标签：java, static, constants, final

根据[教程](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)：

> 修饰符与修饰符`static`结合使用`final`，也用于定义常量。修饰符表示该`final`字段的值不能改变。

只有当所涉及的类型是原始的时，我才会同意这一点。对于引用类型，例如`Point2D`位置属性不存在的类的实例`final`（即，我们可以更改其位置），此类变量的属性`public static final Point2D A = new Point2D(x,y);`仍然可以更改。这是真的？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-01-16T12:42:54.850

是的，它可以改变。只有引用不能更改，但其内部字段可以。以下代码显示了它：

```
public class Final {
    static final Point p = new Point();
    public static void main(String[] args) {
        p = new Point(); // Fails
        p.b = 10; // OK
        p.a = 20; // Fails
    }
}

class Point {
    static final int a = 10;
    static int b = 20;
} 
```

[Groovy](http://en.wikipedia.org/wiki/Groovy_%28programming_language%29)（另一种[JVM](http://en.wikipedia.org/wiki/Java_virtual_machine)语言）有一个名为[@Immutable](http://groovy.codehaus.org/Immutable+AST+Macro)的注解，它会阻止对象在构造后更改为内部状态。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-16T12:41:34.170

没错，还是可以改的。在这种情况下，“静态最终”是指引用本身，不能更改。但是，如果它所引用的对象是可变的，那么它所引用的对象就可以改变。

一个不可变的对象，例如一个字符串，将是一个常量。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-16T12:41:41.813

```
public static final Point2D A = new Point2D(x,y); 
```

这里的**引用** `A`是**最终**的，而**不是**类中的值`Point2D`。

在定义 A static final 后你不能这样做：

```
//somewhere else in code
A = new Point2D(x1,y1); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-16T12:41:30.750

> public static final Point2D A = new Point2D(x,y); 仍然可以更改。这是真的？

A 的引用无法更改，但如果属性不是最终的，则可以更改**其真实关联对象的值。**

```
class Point2D{
  private int x;
  private int y;
  <getter & setter>
} 
class Constant{
  Public static final Point2D A = new Point2D(1,2);
  public static void main(String[] args){
     A.setX(10); // this will work 
     A = new Point2D(10,20);// this will not work
  }
} 
```

如果`Point2D's`属性是最终的，那么`Point2D` `class`将是`immutable`.

或者您可以发送可克隆对象。

喜欢 -

```
 private static final Point2D A = new Point2D(x,y);
 public static getA(){
     return A.clone();
 } 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-01-16T12:41:51.110

这是真的。`final`修饰符不是以任何可能的方式传递的。

这只意味着参考不会改变。引用的内容（对象的字段）可能会随着时间而改变。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-16T12:41:18.867

对这一点的引用（`A`在你的情况下）不能改变。只有对象的状态可以改变。所以你不能创建一个新的`Point2D`并将它分配给变量。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-16T12:42:23.073

只有引用是最终的，被引用的对象是可以改变的（除非它是一个不可变的对象，比如 Integer 之类的）。所以是的，它仅对于给定的“常数”值是常数。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-22T19:35:06.010

你可以在这里找到一个非常相似的问题，并有很好的解释：

HERE： [为什么可以修改最终对象？](https://stackoverflow.com/questions/2435163/why-can-final-object-be-modified)

顺便说一句，我开始考虑反射机制....

理论上......我相信你可以获得拥有类实例..然后获取类成员，找到当前实例并检查它是否是最终的......

我没有检查它，我什至不知道它是否可能 - 这只是一个想法（也许？）

在

```
public class Final {
    static final Point p = new Point();

    public static void main(String[] args) throws MyImmutableException {
        p = new Point(); // Fails
        p.setB(10); // OK
        p.setA(20); // Fails - throws MyImmutableException
    }
}       

public class Point() {
    int a = 10;
    int b = 20;

    public setA(int a) {
        this.a = a;
    }
    public setB(int b) throws MyImmutableException {
        detectIsFinal()
        this.b = b;
    }

    private void detectIsFinal() throws MyImmutableException {
        int mod = this.getClass().getModifiers()
        if (Modifier.isFinal(mod)) {
            throw new MyImmutableException();
        }
    }   
}

public class MyImmutableException extends Exception { 
    public MyImmutableException() {super(); }
} 
```

我在想你还能做什么......再次它只是一个!!!!!!!!! 伪代码！！！我不确定它是否会起作用：P

也许具有注释知识的人会受到启发并使其发挥作用。不幸的是，这周我没有更多的时间。也许稍后我会尝试制作 POC。

```
public class Final {
    @Immutable
    static final Point p = new Point();

    public static void main(String[] args)  {
        p = new Point(); // Fails
        p.setB(10); // Fails
        p.setA(20); // OK
    }
}       

public class Point() {
    int a = 10;
    @ImmutableOnThisInstance
    int b = 20;

    @DetectIsImmutable
    public setA(int a) {            
        this.a = a;
    }

    @DetectIsImmutable
    public setB(int b) {
        this.b = b;
    }      
}

class Immutable {
    ?????????????????
}

class DetectIsImmutable {
    /**
     * Just a pseudocode - I don't know how to work with ANNOTATIONS :) :) :)
     * SORRY :)
     * @throws MyImmutableException
     */
    private void detectMethod() throws MyImmutableException {
        Immutable instance = CLASS_THAT_IS_ANNOTATED.getClass().getAnnotation(Immutable.class)
        if (instance != null) {
            // get parent Method invocation name (from stacktrace list)
            String methodName = .............;
            if (methodName.startsWith("set")) {
                // check id we have variable with this settername
                String fieldName = ...; // cut "set" get rest of it, make first letterSmall 
                // find this field in object fields
                Field f = this.getClass().getDeclaredField(fieldName);
                if (f.getAnnotation(ImmutableOnThisInstance.class) != null) {
                    throw MyImmutableException();
                }
            }
        }
    }           

} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-16T18:50:39.247

是的。

当然，您也可以稍后更改 final 字段的值，[如别处所述](https://stackoverflow.com/questions/3301635/change-private-static-final-field-using-java-reflection)。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-16T14:09:59.520

正如其他已经提到的，它是对您的 Point2D 对象的引用，它是静态最终的，而不是属性 x 和 y。如果要确保不能更改 Point2D 对象的位置，则应在 Point2D 类中设置属性 x 和 y 静态和最终（初始化）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-01-16T12:42:30.303

它仍然是真实的。

有一种方法可以证明您引用的声明是真实的。`static final`描述了一个*变量*，这个变量确实不能改变，常数也是如此。变量是指向对象的指针，并且该对象可以更改。但这并不能阻止变量成为常数。

这是一种不太强大的真实方式，您可以`const`在 C++ 中实现，但它确实如此。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-01-16T12:42:32.027

是的，你是对的。引用不能改变，但被引用的对象可以。这样的事情是完全合法的：

```
public static final List<Object> someList = new ArrayList<Object>();

// ...

someList.add(someThing); // <-- this would be illegal if the referenced object was also constant 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-01-16T12:43:08.797

您可以更改 Point2D 的属性，但不能创建它的新实例。

我还应该提到 Point2D 是抽象的，因此您必须创建一个子类的实例来扩展它。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-03-21T14:04:15.750

当引用变量被声明为 final 时，一旦它引用了一个对象，您就不能重新分配一个新对象给它。但是，您可以更改最终引用变量指向的对象的状态。看下面的例子..

```
class A
{
    int i = 10;
}

public class UseOfFinalKeyword
{
    public static void main(String[] args)
    {
        final A a = new A();  //final reference variable

        a.i = 50;
        //you can change the state of an object to which final reference variable is pointing

        a = new A();  //compile time error

        //you can't re-assign a new object to final reference variable
    }
} 
```

有关更多信息，请点击链接：[java 中的 final 关键字](http://javaconceptoftheday.com/final-keyword-in-java/)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-01-29T06:09:00.267

```
static final Point2D A = new Point2D(x,y); 
```

它所说的只是类的引用`Point2D`不能改变。

```
 _____________
           |             |
A----------|--->(x,Y)    |
           |             | 
           |_____________|Heap 
```

**所以你不能通过指向不同的对象来改变 A 但是你当然可以改变 (x,y) 的值或者 Point Object 的内容**

如果你想让你的对象也保持不变，你必须使 Point 对象不可变。

# windows-phone - 从 windows phone 8 的照片库中选择多个图像

> ID：14358673
> 
> 赞同：1
> 
> 时间：2013-01-16T12:38:56.090
> 
> 标签：windows-phone

当我正在开发一个需要从手机照片库中选择多个图像来执行此操作的 Windows Phone 8 应用程序时，我使用了 PhotoChooserTask 但它返回一个图像，任何人都可以建议我使用其他类或方法来提取多个图像，谢谢进步。

# c# - 禁用 WPF 数据网格中的行

> ID：14358674
> 
> 赞同：0
> 
> 时间：2013-01-16T12:38:58.870
> 
> 标签：c#, wpf, datagrid, prism, datatrigger

我有一个绑定到数据网格的 observablecollection。该集合是从搜索结果中填充的。我还可以将项目添加到数据网格。我想禁用原始集合中的行。我添加的新行应该是可编辑的。我的限制是，我不能在集合中使用布尔属性来在数据触发器中使用。有没有办法做到这一点？

编辑：忘了提到我正在使用 MVVM 框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T20:42:00.790

如果您无法将“IsEnabled”属性添加到集合中的项目，您始终可以创建从这些项目的类/类型继承的新类。

```
 public class MyDataGridPresenterClass : OriginalItemClass
    {
        public bool IsEnabled { get; set; }
    } 
```

并使用这个新`type`的，因为`ObservableCollection`没有什么可以阻止你这样做......当然，每个`MyDataGridPresenterClass`都是`OriginalItemClass`因为它继承自它。

所以你可以拥有

```
 ObservableCollection<MyDataGridPresenterClass> DataGridItems
    {
        get { return this.dataGridItems; }
        set
        {
            this.dataGridItems = value;
            RaisePropertyChanged("DataGridItems");
        }
    } 
```

现在你有了`IsEnabled`属性，所以你可以在你提到的那个 DataTrigger 中使用它，你没有修改`OriginalItemClass`，每个人都很高兴。：） 还有一件事情。只是要清楚:) MVVM 不是一个框架...... MVVM 是设计模式。我希望这会有所帮助 :) 最好的问候和好运 :)

# r - 从R写出Excel格式

> ID：14358675
> 
> 赞同：1
> 
> 时间：2013-01-16T12:39:02.943
> 
> 标签：r, xls

我正在尝试找出如何从 R 中以 Excel 格式写出大文件。我有一个`.RData`文件，我想将它写在一个适当的 Excel 文件中，而不仅仅是带有`.xls`扩展名的制表符分隔的文本文件。

我测试了 3 个包：

1.  xlsx

2.  数据框2xls

3.  写XLS

    但到目前为止，两者都没有取得很好的成功。

**`xlsx->`**拒绝处理大文件，处理较小的文件。

**`dataframes2xls->`**什么都没写

**`WriteXLS ->`**太慢了

我需要一种运行速度快的方法，最多几秒钟，并且需要写出文件，以便在 excel 中定义和正确打开列类型。

有其他套餐的建议吗？或以某种方式使用其中一个软件包使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-05T13:27:22.047

可以使用`XLConnect`包，编写14万行的xlsx文件不到几秒钟，请注意`options(java.parameters = "-Xmx2048m")`在加载之前应该设置`XLConnect`：

```
options(java.parameters = "-Xmx2048m")

set.seed(123)
big_df <- data.frame(x = rnorm(140000), y = rnorm(140000), z = rnorm(140000))

library(XLConnect)
wb <- loadWorkbook("test.xlsx", create = TRUE)
createSheet(wb, "test")
writeWorksheet(wb, big_df, "test")
saveWorkbook(wb) 
```

# c# - 如何配置asp.net webforms WebMethod 日期格式

> ID：14358676
> 
> 赞同：2
> 
> 时间：2013-01-16T12:39:26.637
> 
> 标签：c#, asp.net, webforms, date-format, webmethod

我有一个接收包含日期属性的对象的网络方法。我将代表对象的 json 传递给 webmethod。asp.net 自动将 json 字符串转换为对象，因此我的方法如下所示：

```
[WebMethod]
public static Object Save(MyObject item)
{
   ....
}

public class MyObject 
{
     DateTime date;
     .....
} 
```

当日期以美国格式发送时，这一切都很好：`'MM/dd/yyyy'` 当日期以欧洲格式发送时：`'dd/MM/yyy'`我收到一个错误。

我在全球 asax 中设置线程的文化：

```
void Application_AcquireRequestState(object sender, EventArgs e)
{
     var s = GetSessionValues();
     System.Threading.Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo(s.CultureID);
     System.Threading.Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo(s.CultureID);
} 
```

此代码运行正确，它从会话中读取文化 ID 并设置它。从数据库登录时，文化 ID 被读入会话。

但这似乎对我收到错误的 web 方法预期的日期格式没有影响：

```
"31/08/2012 is not a valid value for DateTime.",
"StackTrace":"  
at System.ComponentModel.DateTimeConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, Object value)\r\n  
at System.Web.Script.Serialization.ObjectConverter.ConvertObjectToTypeInternal(Object o, Type type, JavaScriptSerializer serializer, Boolean throwOnError, Object& convertedObject)\r\n  
at System.Web.Script.Serialization.ObjectConverter.ConvertObjectToTypeMain(Object o, Type type, JavaScriptSerializer serializer, Boolean throwOnError, Object& convertedObject)\r\n  
at System.Web.Script.Serialization.ObjectConverter.AssignToPropertyOrField(Object propertyValue, Object o, String memberName, JavaScriptSerializer serializer, Boolean throwOnError)\r\n  
at System.Web.Script.Serialization.ObjectConverter.ConvertDictionaryToObject(IDictionary`2 dictionary, Type type, JavaScriptSerializer serializer, Boolean throwOnError, Object& convertedObject)\r\n  
at System.Web.Script.Serialization.ObjectConverter.ConvertObjectToTypeInternal(Object o, Type type, JavaScriptSerializer serializer, Boolean throwOnError, Object& convertedObject)\r\n  
at System.Web.Script.Serialization.ObjectConverter.ConvertObjectToTypeMain(Object o, Type type, JavaScriptSerializer serializer, Boolean throwOnError, Object& convertedObject)\r\n  
at System.Web.Script.Serialization.ObjectConverter.ConvertObjectToType(Object o, Type type, JavaScriptSerializer serializer)\r\n  
at System.Web.Script.Services.WebServiceMethodData.StrongTypeParameters(IDictionary`2 rawParams)\r\n  
at System.Web.Script.Services.WebServiceMethodData.CallMethodFromRawParams(Object target, IDictionary`2 parameters)\r\n  
at System.Web.Script.Services.RestHandler.InvokeMethod(HttpContext context, WebServiceMethodData methodData, IDictionary`2 rawParams)\r\n  
at System.Web.Script.Services.RestHandler.ExecuteWebServiceCall(HttpContext context, WebServiceMethodData methodData)","ExceptionType":"System.FormatException"} 
```

如何为 webmethod 设置预期的日期格式（我有很多这样的 web 方法，所以很明显我想要一个适用于所有这些方法的解决方案）。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-20T13:55:59.243

> 我有一个接收包含日期属性的对象的网络方法。我将代表对象的 json 传递给 webmethod。asp.net 自动将 json 字符串转换为对象

鉴于您接受 JSON，这不应该*是*文化敏感的 IMO。在客户端将所有数据（包括数字和日期/时间）转换为不区分文化的格式。

因此，如果您在 UI 中接受日期输入，请让 JavaScript 将其转换为本地日期/时间对象，然后将其转换为您想要使用的任何特定格式。（我个人建议使用`yyyy-MM-ddTHH:mm:ss.fffZ`一种非常明确的格式，但我们开始了。）

将 JSON 视为一种机器可读的序列化格式，它*恰好*也很容易被人类阅读。将所有特定于文化的解析保留在客户端将使您的生活变得更加简单。

编辑：从根本上说，你需要弄清楚你在 JSON 中的价值意味着什么。如果它是供人类消费的文本，则将其视为字符串，不要尝试解析它，并以您想要显示的任何文化生成它。*如果它是机器*消费的日期/时间值，那么就以这种方式对待它并以文化中立的方式（固定格式，不变的文化）生产它。试图将值视为人类可读和机器可读的混合物*会给*你带来这样的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T10:50:34.007

您可以将参数类型更改为字符串，然后您可以将该字符串转换为您想要的任何类型

```
public void Save(MyObject itemdate){
    *Code*
}
public class MyObject 
{
     string date;
     .....
} 
```

IE：

```
DateTime myEurpeonDate= DateTime.ParseExact(MyObject.date, "dd/MM/yyyy", null); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T09:42:51.463

尝试在 web.config 中设置`culture`和：`uiCulture``en-GB`

```
<system.web>
    <globalization culture="en-GB" uiCulture="en-GB" />
<system.web> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T11:05:04.153

调用**DateTime**或**DateTimeOffset类型的****TryParse**或**Parse**方法来尝试转换。还要在其中使用**CultureInfo**对象。下面给出了一个很好的例子..

 *******   [向 Web 用户显示本地化的日期和时间信息](http://msdn.microsoft.com/en-us/library/bb882561.aspx)

也可能有帮助..

*   [自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)******

# xml - WAR 容器中 XML 中的文件夹路径

> ID：14358678
> 
> 赞同：0
> 
> 时间：2013-01-16T12:39:31.893
> 
> 标签：xml, maven, path, war

我有一个通过 Maven 部署到 .war 文件的 java-servlet 项目。这在 tomcat servlet 容器中运行。因为我使用的是 Wordnet（准确地说，我使用了这个 API：[http](http://extjwnl.sourceforge.net/) : //extjwnl.sourceforge.net/），所以我有一个所谓的 file_properties.xml 文件，其中包含“dictionary_path”的值。此值应保存存储字典的路径。当我在本地机器上测试以下值时 - 当然 - 有效：“C:\Users\XY\Documents\NetBeansProjects\project-name\src\main\resources\dict\”

在部署到战争文件并在 tomcat 中运行之后，这条路径当然不再起作用了。如何正确输入 XML 中的值？目标文件夹位于“\WEB-INF\classes”文件夹中的战争文件中。

xml 现在看起来像这样： `<param name="dictionary_path" value="C:\Users\username\Documents\NetBeansProjects\projectname\src\main\resources\dict\"/>`

解决方案：我们现在通过解决方法解决了这个问题：我们不再需要 XML 文件。相反，我们通过提供路径来实例化字典：

```
String dictPath = WordNetDictionary.class.getResource("/dict").toExternalForm();
//trim dictPath here depending on the OS
this.dictionary = Dictionary.getFileBackedInstance(dictPath); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:41:40.450

鉴于您的框架似乎需要一个文件，并且您正在打包为 .war，因此您的直接问题是。

我也许会采取以下方法。将属性文件打包到 .war 中。然后，您可以使用[ClassLoader.getResourceAsStream()](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)。这将找到与您的类一起打包的属性文件。阅读它，并将*其写入指定目录*。该目录应与您的 XML 配置中的目录匹配。然后，您可以使用给定的配置实例化您的框架，并且该路径将指向您编写文件的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:20:31.070

解决方案：我们现在通过解决方法解决了这个问题：我们不再需要 XML 文件。相反，我们通过提供路径来实例化字典：

```
String dictPath = WordNetDictionary.class.getResource("/dict").toExternalForm();
//trim dictPath here depending on the OS
this.dictionary = Dictionary.getFileBackedInstance(dictPath); 
```

# javascript - ScriptDB：用于快速批量更新的记录的自定义 ID？

> ID：14358681
> 
> 赞同：0
> 
> 时间：2013-01-16T12:39:48.493
> 
> 标签：javascript, google-apps-script

我有 20,000 条记录 ScriptDB 的产品信息，我希望每小时更新一次当前的价格/库存信息。就目前而言，我在设计一些不首先达到执行限制的东西时遇到了麻烦。

下载的 stockfile 是可定制的，目前我有它作为 JSON，如：

```
[
{"sku":"MYSKU1","price":14.99,"qty":2},
{"sku":"MYSKU2","price":22.99,"qty":25},
{"sku":"MYSKU3","price":91.99,"qty":31}
] 
```

目前我做类似的事情：

```
var prod_feed = UrlFetchApp.fetch("https://www.site.com/myJSONfile").getContentText();
var prod_data = JSON.parse(prod_feed);
var prod_qty = 0, i = 0;
var prod_code = "";
var prod_price = "";

var db = ScriptDb.getMyDb();
var result_array = [];
var result_current = {};
var time_obj = dbDateObject();

for(i = 0; i < prod_data.length; i++) {

    var result = db.query({sku: prod_data[i]["sku"]}).next(); // result will be null if no match

    if (!result) {
    // No match, create new object with this SKU for insertion
      result = {};
      result["sku"] = prod_data[i]["sku"];
    }

    result["qty"] = prod_data[i]["qty"];
    result["price_default"] = prod_data[i]["price"];
    result["last_product_update"] = time_obj;
    result_array[i] = result;

}

var results = db.saveBatch(result_array, false); 
```

我可以通过这种方式浏览大约 2,500 条记录，并在达到时间限制之前保存它们。

有什么办法可以直接使用 SKU 作为记录 ID？然后它实际上将是 3 行代码......

```
var prod_feed = UrlFetchApp.fetch("https://www.site.com/myJSONfile").getContentText();
var prod_data = JSON.parse(prod_feed);
var results = db.saveBatch(prod_data, false); 
```

如果没有，有什么明显的方法可以提高这种效率吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:23:51.640

> 有什么办法可以直接使用 SKU 作为记录 ID？

可悲的是没有。`Every ScriptDb object has an id, assigned by the system when it is stored, which is an opaque, immutable string value.`（[ScriptDb 文档](https://developers.google.com/apps-script/scriptdb)。）

但是，您可以将产品存储在单个对象中，而不是对象数组，并将 SKU 用作对象属性。您仍然需要遍历输入，但您将只有 2 次调用 ScriptDB 服务，而不是数千次。

尝试这个：

```
 var prod_feed = UrlFetchApp.fetch("https://www.site.com/myJSONfile").getContentText();
  var prod_data = JSON.parse(prod_feed);

  var db = ScriptDb.getMyDb();
  var result = db.query({type: "products"});
  var products = {};
  if (result.hasNext()) {
    // Projects database object already exists
    products = result.next();
  }
  else {
    // Not found, so create the Projects database object.
    var product_data = new Object();
    products = {type: "products", data: product_data};
  }

  var time_obj = dbDateObject();

  for (var i = 0; i < prod_data.length; i++) {

    if (!(prod_data[i]["sku"] in products.data)) {
      // No match, create new object with this SKU for insertion
      products.data[prod_data[i]["sku"]] = {};
    }

    // Update info for this item
    var item = products.data[prod_data[i]["sku"]];
    item.qty = prod_data[i].qty;
    item.price_default = prod_data[i].price;
    item.last_product_update = time_obj;
  }

  var results = db.save(products); 
```

这是调试器的屏幕截图，显示了从 ScriptDb 检索时“产品”对象的外观。如果您可以稍微修改一下您的输入数据，您可能会获得您梦寐以求的一次性写入！

![“产品”对象的调试器屏幕截图](../Images/4b6c0cc22447571649b583f1ad29d8ed.png)

笔记：我用过`price`，和`price_default`你一样……但我怀疑这是一个错字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T04:16:14.930

如果您达到了 6 分钟的运行时间限制，那么只需 (a) 使您的工作具有幂等性，并且 (b) 一次又一次地运行它，直到您的工作完成。

要做 (a) - 您可以“记住”您正在处理的 sku 或将它们作为电子表格中的 lineitems 并添加“完成”列。

要执行 (b)，在您的主循环中，如果您超过 5 分钟且不到 6 分钟，您可以退出并重新安排作业以在 10 分钟内再次运行（或更短，但那时您需要锁定）。

# javascript - 键盘消除了后退按钮事件 - Android

> ID：14358683
> 
> 赞同：1
> 
> 时间：2013-01-16T12:39:51.020
> 
> 标签：javascript, android, html, cordova

我在一个`PhoneGap`应用程序上输入了`Android`.

打开键盘时，它必须抬起屏幕才能看到输入，然后在键盘上方看到它。

一旦她成功了，我写给后退按钮的事件就不再起作用了！当我按下不同的输入并且屏幕变得正常时，事件起作用..

也许有人知道为什么会这样？

**我使用PhoneGap 2.2.0 版本-Android 设备2.2 版本**

这是我的活动：

```
document.addEventListener("backbutton", function (e) {
    alert('U press back');
}, false); 
```

这是我的输入：

```
<input type="text" id="MyInp"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:01:43.573

考虑到这一点，当您点击输入框时，Android 会自行执行带入键盘的操作，因为它是输入框的属性。

自然的后退按钮动作是撤消上一个动作或移动到上一页等。因此，默认的后退按钮行为是隐藏键盘。

Android 没有提供覆盖该操作的规定，如果焦点位于输入框内，它将始终隐藏键盘。

希望有帮助。

@Sahil Mahajan Mj：由于 100% 的接受率，这些问题被突出显示。希望我的也能被接受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:14:17.227

当我添加时问题解决了：

`android: windowSoftInputMode = "adjustPan"`

在 Manifest.xml 文件中，

我不知道为什么..**但它已经解决了！**

# jbpm - JBPM 人工任务状态在声明后没有改变？

> ID：14358685
> 
> 赞同：3
> 
> 时间：2013-01-16T12:39:53.827
> 
> 标签：jbpm

成功执行该方法后，人工任务状态未更改（仍显示为就绪状态）

```
private void claimTask(TaskClient taskClient, String taskOwnerName, TaskSummary task) {
BlockingTaskOperationResponseHandler operationResponseHandler = new BlockingTaskOperationResponseHandler();
taskClient.claim(task.getId(), taskOwnerName, operationResponseHandler);
logger.debug("clamed task status is: " + task.getStatus()); 
```

}

记录器说任务仍处于**就绪**状态。状态必须移动到**保留**状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-16T05:53:36.027

您正在使用的 TaskSummary 对象是未直接链接到基础数据库的分离对象。它不反映执行“声明”方法后数据库中任务的最新状态。对于任务的最新状态，我建议在记录其状态之前先检索它，如下所示：

```
private void claimTask(TaskClient taskClient, String taskOwnerName, TaskSummary task) {
  BlockingTaskOperationResponseHandler operationResponseHandler = new BlockingTaskOperationResponseHandler();
  taskClient.claim(task.getId(), taskOwnerName, operationResponseHandler);
  BlockingGetTaskResponseHandler getTaskHandler=new BlockingGetTaskResponseHandler();
  taskClient.getTaskById(task.getId(),getTaskHandler);
  logger.debug("claimed task status is: " + getTaskHandler.getTask().getStatus());
} 
```

# php - 表字段（数据库）中的坐标集合

> ID：14358692
> 
> 赞同：1
> 
> 时间：2013-01-16T12:40:26.083
> 
> 标签：php, javascript, sql, database, json

我有一个这样的 JSON 文件：

```
{
    "wijken": {
        "11": {
            "coords": "3.79073170001967,51.1717753664505,0 3.79020920176376,51.1723018883706,0 3.78989543642226,51.1729670713336,0 3.78983091856725,51.1736482209016,0 3.79035112720225,51.174896701853,0 3.79089521566258,51.1755715564749,0 3.7915999971046,51.1759188204827,0 3.79248490395883,51.1767623261609,0 3.79147318323356,51.1776832394604,0 ",
            "id": "kml_1",
            "fid": "0",
            "wijziging": "Ja",
            "nieuwnr": "11",
            "naam": "Noordoost",
            "wijk": "Kanaaldorpen en -zone",
            "wijknr": "11",
            "objectid": "1",
            "area": "0",
            "len": "0"
        }
... 
```

现在我想将这些数据加载到我的数据库中。这适用于“id”和“wijk”。但是如何将“坐标”加载到我的表格字段中？

该领域的属性是什么？（十进制，整数，...？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:49:05.480

你用的是什么数据库？一些引擎（如 MS SQL Server）有自己的类型：`GEOGRAPHY`

[如果您使用 MySQL 或 postgreSQL，通常的方法是为此创建一个新表，如您在Google Maps API 文档](https://developers.google.com/maps/articles/phpsqlajax_v3#createtable)中所见：

```
CREATE TABLE `markers` (
  `id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY ,
  `name` VARCHAR( 60 ) NOT NULL ,
  `address` VARCHAR( 80 ) NOT NULL ,
  `lat` FLOAT( 10, 6 ) NOT NULL ,
  `lng` FLOAT( 10, 6 ) NOT NULL ,
  `type` VARCHAR( 30 ) NOT NULL
) ENGINE = MYISAM ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:43:46.520

您可以将坐标作为单个文本字段输入，也可以为其创建单独的表格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:49:01.453

遵循数据库规范化原则（更准确的[第一范式](http://en.wikipedia.org/wiki/First_normal_form)）你应该有你的领域的解剖结构，即每一列应该负责表示单个值。

根据您的域，每个坐标可以在不同的列甚至表内...

例如，如果您有一个域对象 City，那么表 City 可能类似于：

```
________________________________________________
|---|----------|-----------|------|------------|
|id | latitude | longitude | name | population |
|___|__________|___________|______|____________| 
```

*   请注意，以下原则适用于关系数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T12:53:12.693

你是什​​么DBMS？

如果您使用 MySQL 之类的关系 DBMS，请将数据保存在文本字段中，然后使用 PHP`implode`和`explode`函数来操作这些数据。您也可以将其保存在另一个单独的表中，并`JOIN`在 SQL 查询中调用表达式（借助`GROUP BY`and `group_concat()`）来获取数据。

如果您使用像 MongoDB 这样的基于文档的 DBMS，请随意将`coords`字段保存为浮点数组。

# date - yymmdd 格式有合适的名称吗？

> ID：14358694
> 
> 赞同：2
> 
> 时间：2013-01-16T12:40:30.177
> 
> 标签：date

当我尝试与开发人员讨论使用 yymmdd 格式时，是否有一种简单的方法来引用它？

希望这是这个论坛可以接受的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T12:43:12.043

您可以尝试使用 ISO 8601：

[http://en.wikipedia.org/wiki/ISO_8601](http://en.wikipedia.org/wiki/ISO_8601) http://www.w3.org/TR/NOTE-datetime

# ipv6 - 用于 WinINet API 的 IPv6

> ID：14358696
> 
> 赞同：0
> 
> 时间：2013-01-16T12:40:34.467
> 
> 标签：ipv6, wininet

WinINet提供InternetCanonicalizeUrl、InternetConnect等功能。我想知道这些调用是否适用于 IPv6 地址？

在我使用 WinINet api 与 FTP 服务器连接的应用程序中，当给出 IPv6 地址时无法访问 FTP 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:47:01.753

根据 MSDN，WinINet 从与 IE7 捆绑的版本开始支持 IPv6。见这里： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa385325 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385325(v=vs.85).aspx)

对于 URL，您可能需要将地址放在方括号中才能正常工作（上面的链接中有一个示例）。

# python - 面向对象的编程实践 - 将概念/实体转化为对象

> ID：14358703
> 
> 赞同：1
> 
> 时间：2013-01-16T12:40:50.953
> 
> 标签：python, oop

在 OOP 方面，我非常业余，使用 python 自学。

我主要关心的是把概念或实体分解成对象。

例如，我刚刚编写了一些代码来控制连接到我的树莓派的交通灯系统。

该系统包含：

*   一辆汽车点燃了红绿灯（红、黄、绿）。
*   请求过境的按钮。
*   还有一个绿灯和红灯告诉行人什么时候过马路

现在我最终将我的代码建模为一个完整的类。对象内部的方法调用对象中的其他方法。例如，当对象被初始化时，initialize 方法调用“等待按钮按下”方法，当检测到按钮按下时，该方法然后调用“运行光序列”方法。

这是不好的做法吗？每个概念/实体是否应该是一个单独的类/对象，例如交通灯对象、按钮对象、行人灯对象？

很抱歉这个问题的开放性。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:54:52.603

您目前拥有的内容违反了[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。基本上你的班级做得太多了。

您可以执行以下操作：

为汽车交通灯、行人交通灯和请求开始过马路的按钮设置单独的类。

之后，您可以将按钮类注入行人灯类。并将汽车和行人类都注入到“控制”/“管理”类中，这些类用于管理灯光。

您甚至可以在此之后进一步抽象它，例如将实际灯光注入交通灯类。

您可能还想了解其他[SOLID 原则](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)。

# c# - 如何优雅地记录上下文信息以及每条消息

> ID：14358708
> 
> 赞同：6
> 
> 时间：2013-01-16T12:41:13.653
> 
> 标签：c#, logging, enterprise-library

我正在寻找一些关于日志记录的建议。我编写了一个名为的包装器`Logger` ，它在内部使用[Microsoft Enterprise Library 5.0](http://msdn.microsoft.com/en-us/library/ff632023.aspx)。目前它使我们能够以这种方式登录：

```
Logger.Error(LogCategory.Server, "Some message with some state {0}", state); 
```

我面临的问题是 EventViewer 中的每个日志似乎都是不相关的，即使*它们中的一些*以某种方式相关，例如它们都来自处理来自特定客户端的请求。

让我详细说明这个问题。假设我正在开发一个需要同时处理来自多个客户端的请求的服务，每个客户端都将不同的参数集传递给服务方法。很少有参数*可以用来*识别请求，例如*哪个*客户端正在使用*哪些唯一可识别的参数发出**什么*样的请求等。假设这些参数是（调用上下文信息）：

 **   服务器配置文件 ID
*   WebProfileId
*   请求编号
*   会话信息

现在服务开始处理请求，一件接一件地做（就像一个工作流）。在此过程中，我正在记录本地¹消息，例如*"file not found"*或*"entry not found in DB"*，但我不想在每个日志中*手动*记录上述信息（上下文信息），而是我想要每次我记录本地消息时，记录器都会自动记录它们：

```
Logger.Error(LogCategory.Server, "requested file not found"); 
```

我希望上面的调用记录*上下文信息*以及*“未找到请求的文件”*消息，以便我可以将消息与其上下文相关联。

问题是，我应该如何设计这样一个自动记录上下文的记录器包装器？我希望它足够灵活，以便我可以在服务处理请求的过程中添加更*具体的上下文信息，因为所有重要信息在请求开始时**可能都不可用*！

我还想让它可配置，这样我就可以在*不记录上下文信息的情况下记录*本地消息，因为当一切正常时不需要它们。:-)

* * *

^(1.*本地*信息是指更具体、更本地化的信息。相比之下，我会说，上下文信息是*全局*消息，因为它们对于处理请求的整个流程都有意义。)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:02:42.267

这是一种使用相当容易设置的企业库的方法。您可以使用[活动跟踪](http://msdn.microsoft.com/en-us/library/ff664542%28v=pandp.50%29.aspx)来存储全局上下文，使用扩展属性来存储本地上下文。

作为示例，我将使用没有任何包装类的服务定位器来演示该方法。

```
var traceManager = EnterpriseLibraryContainer.Current.GetInstance<TraceManager>();

using (var tracer1 = traceManager.StartTrace("MyRequestId=" + GetRequestId().ToString()))
using (var tracer2 = traceManager.StartTrace("ClientID=" + clientId))
{
    DoSomething();
}

static void DoSomething()
{
    var logWriter = EnterpriseLibraryContainer.Current.GetInstance<LogWriter>();
    logWriter.Write("doing something", "General");

    DoSomethingElse("ABC.txt");
}

static void DoSomethingElse(string fileName)
{
    var logWriter = EnterpriseLibraryContainer.Current.GetInstance<LogWriter>();

    // Oops need to log
    LogEntry logEntry = new LogEntry()
    {
        Categories = new string[] { "General" },
        Message = "requested file not found",
        ExtendedProperties = new Dictionary<string, object>() { { "filename", fileName } }
    };

    logWriter.Write(logEntry);
} 
```

配置如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <section name="loggingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.LoggingSettings, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true" />
    </configSections>
    <loggingConfiguration name="" tracingEnabled="true" defaultCategory="General"
        logWarningsWhenNoCategoriesMatch="false">
        <listeners>
            <add name="Flat File Trace Listener" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.FlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                fileName="trace.log" formatter="Text Formatter" traceOutputOptions="LogicalOperationStack" />
        </listeners>
        <formatters>
            <add type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                template="Timestamp: {timestamp}&#xA;Message: {message}&#xA;ActivityID: {activity}&#xA;Context: {category}&#xA;Priority: {priority}&#xA;EventId: {eventid}&#xA;Severity: {severity}&#xA;Title:{title}&#xA;Machine: {localMachine}&#xA;App Domain: {localAppDomain}&#xA;ProcessId: {localProcessId}&#xA;Process Name: {localProcessName}&#xA;Thread Name: {threadName}&#xA;Win32 ThreadId:{win32ThreadId}&#xA;Local Context: {dictionary({key} - {value}{newline})}"
                name="Text Formatter" />
        </formatters>
        <categorySources>
            <add switchValue="All" name="General">
                <listeners>
                    <add name="Flat File Trace Listener" />
                </listeners>
            </add>
        </categorySources>
        <specialSources>
            <allEvents switchValue="All" name="All Events" />
            <notProcessed switchValue="All" name="Unprocessed Category" />
            <errors switchValue="All" name="Logging Errors &amp; Warnings" />
        </specialSources>
    </loggingConfiguration>
</configuration> 
```

这将导致如下输出：

```
----------------------------------------
Timestamp: 1/16/2013 3:50:11 PM
Message: doing something
ActivityID: 5b765d8c-935a-445c-b9fb-bde4db73124f
Context: General, ClientID=123456, MyRequestId=8f2828be-44bf-436c-9e24-9641963db09a
Priority: -1
EventId: 1
Severity: Information
Title:
Machine: MACHINE
App Domain: LoggingTracerNDC.exe
ProcessId: 5320
Process Name: LoggingTracerNDC.exe
Thread Name: 
Win32 ThreadId:8472
Local Context: 
----------------------------------------
----------------------------------------
Timestamp: 1/16/2013 3:50:11 PM
Message: requested file not found
ActivityID: 5b765d8c-935a-445c-b9fb-bde4db73124f
Context: General, ClientID=123456, MyRequestId=8f2828be-44bf-436c-9e24-9641963db09a
Priority: -1
EventId: 0
Severity: Information
Title:
Machine: MACHINE
App Domain: LoggingTracerNDC.exe
ProcessId: 5320
Process Name: LoggingTracerNDC.exe
Thread Name: 
Win32 ThreadId:8472
Local Context: filename - ABC.txt

---------------------------------------- 
```

注意事项：

*   由于我们正在使用跟踪，因此我们免费获得了可用于关联活动的 .NET 活动 ID。当然，我们也可以使用我们自己的上下文信息（自定义请求 ID、客户端 ID 等）。
*   企业库使用跟踪“操作名称”作为类别，因此我们需要设置 logWarningsWhenNoCategoriesMatch="false" 否则我们会收到一连串的警告消息。
*   这种方法的缺点可能是性能（但我没有测量它）。

如果你想禁用全局上下文（在这个实现中，跟踪）那么你需要做的就是编辑配置文件并设置tracingEnabled="false"。

这似乎是使用内置企业库功能实现目标的一种相当直接的方式。

其他要考虑的方法是可能使用某种非常优雅的拦截（自定义 LogCallHandler）（但这可能取决于现有设计）。

如果您要使用自定义实现来收集和管理上下文，那么您可以考虑使用[Trace.CorrelationManager](http://msdn.microsoft.com/en-us/library/system.diagnostics.trace.correlationmanager.aspx)来处理每个线程上下文。您还可以查看创建一个[`IExtraInformationProvider`](http://msdn.microsoft.com/en-us/library/microsoft.practices.enterpriselibrary.logging.extrainformation.iextrainformationprovider%28v=pandp.50%29.aspx)以填充扩展属性字典（有关示例，请参见 [Enterprise Library 3.1 Logging Formatter Template - Include URL Request](https://stackoverflow.com/questions/4946311/enterprise-library-3-1-logging-formatter-template-include-url-request)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:03:10.483

***免责声明：我不知道微软技术栈的细节。***

在这种情况下，我会做的事情是：

实现一个 Singleton（在服务器实例级别，如果您的应用程序部署到集群，它不需要是全局单例），它基本上是一种 Hashmap，其中“Key”是您请求的唯一有意义的标识符加工。在 Java 中，我会使用线程 ID（假设您通过从线程池调度线程来服务请求）。如果这在您的情况下不可能/没有意义，则必须使用请求 ID（但在这种情况下，您必须使其渗透到日志管理器，而我的想法是使用本质上可用的东西线程本身）。

Hashmap 的“值”将是一组数据——在你的情况下是 ServerProfileId、WebProfileId、RequestId（除非它已经是键）、SessionInfo——以便日志管理器可以有条件地检索这些并获取对一个有意义的部分特定的日志事件。

所以：在请求管理开始时创建一个全局可用的请求状态引用，并确保日志管理器可以*在需要时*检索请求状态。

当然，您必须确保正确管理哈希图（通过在处理请求后删除状态）。*

# android - Android：动画在开始下一个活动之前没有完成

> ID：14358711
> 
> 赞同：0
> 
> 时间：2013-01-16T12:41:25.007
> 
> 标签：android, animation

我为图像按钮设置了动画。我期望它做的是淡出，然后开始下一个活动。

这不是正在发生的事情。

它正在启动下一个活动，然后当按下“返回”时，动画仍在“运行”，并完成淡出。我尝试了各种组合：在 XML 中设置更长的动画持续时间，将动画放在线程中，使用线程睡眠，将动画放在睡眠线程中......我没有找到获胜的组合！在下一个活动开始之前仍然没有让动画完成。

任何帮助表示赞赏！

用于淡出的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/linear_interpolator">
<alpha
  android:fromAlpha="1.0"
  android:toAlpha="0.1"
  android:duration="1000"
  />
</set> 
```

android中的代码：（用于imageButton的onClick）

```
public void onClick(View v) {
            Intent intent = new Intent(Current.this, Next.class);
            v.startAnimation(animationFadeOut);
            try {

                Thread.sleep(1200);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            startActivity(intent);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:51:56.143

您也可以尝试使用 AnimationListener，如下所示：

```
animationFadeOut.setAnimationListener(new AnimationListener() {

    @Override
    public void onAnimationStart(Animation animation) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onAnimationRepeat(Animation animation) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onAnimationEnd(Animation animation) {
        // TODO Auto-generated method stub

        startActivity(intent);

    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:51:25.477

您应该使用[这里](http://developer.android.com/reference/android/view/animation/Animation.AnimationListener.html)`AnimationListener`描述的并开始您的. 你可以这样使用：`onAnimationEnd``Activity``animationFadeOut.setAnimationListener(listener)`

# c# - 如何在我的 .net 代码中向 GridView 表添加圆角？

> ID：14358718
> 
> 赞同：4
> 
> 时间：2013-01-16T12:41:37.113
> 
> 标签：c#, asp.net, .net, css, gridview

我尝试将 webkit 边框半径/moz 边框半径/边框半径添加到 css 定义和 .net 定义中，但无济于事。帮助！

```
<tr>
    <td width="60%" align="center">
        <asp:GridView ID="GridView_VE" runat="server" CssClass="table1" HorizontalAlign="Center" Width="80%"   
        OnPageIndexChanging="GridView_VE_PageIndexChanging" Font-Names="Century Gothic" Font-Size="Large" Height="100%"
        AllowPaging="True" PageSize="4" RowStyle-Height="30px" -webkit-border-radius= "10px" -moz-border-radius="10px"
        border-radius="10px" border="2px" border-color="Black">
            <Columns>
            ...
            </Columns>
            <PagerStyle Height="20px" />
            <RowStyle Wrap="True" />
         </asp:GridView>
    </td>
</tr> 
```

我也尝试过实现 td 、 tr 和 table 的角落。但是，再次失败。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T12:43:13.587

将其包裹`<asp:GridView>`在一个 div 中，然后将圆角放在该 div 上。

```
<div class="rounded-corners">
    <asp:GridView>....</asp:GridView>
</div> 
```

和 CSS

```
.rounded-corners {
  border: 1px solid black;
  -webkit-border-radius: 8px;
  -moz-border-radius: 8px;
  border-radius: 8px;
  overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:47:03.150

您应该将样式元素包装在`style=""`元素中。像这样： `<table style="border-radius: 8px; -moz-border-radius: 8px; -webkit-border-radius: 8px;">`

但最好只在第一行和最后一行设置边界半径。

无论如何，这里有几个选项：http: [//jsfiddle.net/wMGnq/](http://jsfiddle.net/wMGnq/)

哦，还要确保没有将边框折叠设置为折叠！参见：[https ://developer.mozilla.org/en/CSS/border-radius](https://developer.mozilla.org/en/CSS/border-radius)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T13:07:12.603

我没有看到问题，只需给您的表类并添加以下 css：

```
.bordered {
    border: 1px solid #CCCCCC;
    border-radius: 6px;
} 
```

# android - 在Android中查找触摸屏的采样率

> ID：14358722
> 
> 赞同：8
> 
> 时间：2013-01-16T12:41:42.590
> 
> 标签：android

有没有办法找出 Android 设备中触摸屏的采样率？

我尝试了这个 stackoverflow 帖子，但没有帮助我的确切要求 [Adjust touch input sample rate on Android](https://stackoverflow.com/questions/6746127/adjust-touch-input-sample-rate-on-android)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T07:46:14.413

如果您对从命令行测量采样率感兴趣，可以使用以下方法获取一些信息：

```
adb shell getevent 
```

# forms - Wordpress 插件不会发送电子邮件

> ID：14358723
> 
> 赞同：0
> 
> 时间：2013-01-16T12:41:44.123
> 
> 标签：forms, wordpress

我在我的网站上将 Jazzy Forms 用于两个表单。每个表格都通过电子邮件发送到一个电子邮件地址。

该插件运行良好，直到今天。每当我尝试提交表单时，它都会给我一个错误。不发送电子邮件。

知道什么可以解决这个问题吗？

PS：页面可以在这里找到： http: [//ais-steigerbouw.be/standaard-materiaallijst/](http://ais-steigerbouw.be/standaard-materiaallijst/) 和[http://ais-steigerbouw.be/uitgebreide-materiaallijst/](http://ais-steigerbouw.be/uitgebreide-materiaallijst/)

# java - 如何从枚举中获取值？

> ID：14358725
> 
> 赞同：0
> 
> 时间：2013-01-16T12:41:47.053
> 
> 标签：java

如何使用 switch 语句从此枚举中生成实际值？

```
public enum Gender {
    Unknown(0),
    Male(1),
    Female(2);

    private static final SparseArray<Gender> lookupTable = new SparseArray<Gender>();
    static {
        for (final Gender gender : EnumSet.allOf(Gender.class)) {
            lookupTable.put(gender.intValue, gender);
        }
    }

    private final int intValue;

    public static Gender getByIntValue(int val) {
        return lookupTable.get(val);
    }

    private Gender(int intValue) {
        this.intValue = intValue;
    }

    public int getIntValue() {
        return intValue;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T12:46:38.463

您的意思是“*使用 switch 语句来自这个枚举的实际值*”并不完全清楚。所以这里是与这个枚举有关的事情：

您可以在 - 语句中使用枚举，`switch`如下所示：

```
Gender g = ...
switch(g) {
   case Male:
     // Do something for the males
     break;
   case Female:
     // Do something for the females
     break;
   case Unknown:
     // Argh... What to do?!
     break;
} 
```

如果你想抓住`intValue`g，你可以使用：

```
int value = g.getIntValue(); 
```

如果你想`Gender`从 an 中获取一个值，`int`你可以使用：

```
Gender g = Gender.getByIntValue(1); 
```

如果你想`Gender`从 a 中获取一个值，`String`你可以使用：

```
Gender g = Enum.valueOf(Gender, "Male"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:48:34.623

那是你要的吗 ？

```
switch (genderVar) {
 case Unknown:
 case Male:
 case Female:
 default:
} 
```

# java - 创建带圆角的表格

> ID：14358731
> 
> 赞同：0
> 
> 时间：2013-01-16T12:42:02.423
> 
> 标签：java, swing, jframe

我正在使用 NetBeans，但我有一个空白的`JFrame`. `JFrame`字面上是空的。我希望这个`JFrame`有圆角。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T15:22:52.240

如果你想要圆角，那么你想要一个有形的框架。您可以通过调用[`Frame.setShape`](http://docs.oracle.com/javase/7/docs/api/java/awt/Frame.html#setShape%28java.awt.Shape%29). 引用其文档：

> 必须满足以下条件才能设置非空形状：
> 
> *   `PERPIXEL_TRANSPARENT`半透明必须得到底层系统的支持
> *   窗口必须是未装饰的（参见[setUndecorated(boolean)](http://docs.oracle.com/javase/7/docs/api/java/awt/Frame.html#setUndecorated%28boolean%29)和[`Dialog.setUndecorated(boolean)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Dialog.html#setUndecorated%28boolean%29)）
> *   窗口不得处于全屏模式（请参阅[`GraphicsDevice.setFullScreenWindow(Window)`](http://docs.oracle.com/javase/7/docs/api/java/awt/GraphicsDevice.html#setFullScreenWindow%28java.awt.Window%29)）

这些点中的第二点，一个未装饰的框架，对应于您原始问题的一部分，该问题在随后的编辑中被重新表述：它将给您

> 没有窗口之类的东西，只有表单，没有退出按钮，什么都没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-08T09:11:57.533

试试这个。这是工作 ：）

```
yourframe.setBackground(new Color(0, 0, 0, 180));
yourframe.setUndecorated(true);
yourframe.addComponentListener(new ComponentAdapter() {
               @Override
                public void componentResized(ComponentEvent e) {
                    setShape(new RoundRectangle2D.Double(0, 0, getWidth(), getHeight(), 80, 80));
                }
            }); 
```

# android - android 手机上的 linux vm 是否可以将 web 内容传送到移动浏览器？

> ID：14358745
> 
> 赞同：2
> 
> 时间：2013-01-16T12:42:39.757
> 
> 标签：android, linux, browser, virtual-machine

您可以在 Android 手机或平板电脑上运行 linux vm，并通过 vnc 或 ssh 客户端连接到它。是否有可能使 linux vm 成为服务器并从它向移动浏览器提供内容？那怎么可能呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:53:42.363

您可以从应用程序本身（没有 Web 服务器）提供 Web 内容，或者您​​可以使用像[i-jetty](http://code.google.com/p/i-jetty/)这样的迷你 servlet 容器。

查看[phonegap](http://phonegap.com/)，了解如何在您的应用程序中嵌入移动浏览器（使用 javascript API）。

顺便说一句，看起来有人也将[QEMU](http://wiki.qemu.org/Main_Page)移植到了 Android：[Limbo PC Emulator](https://play.google.com/store/apps/details?id=com.max2idea.android.limbo.main&hl=it)。

所以你可以结合上面的东西，制作你的应用程序。

# iphone - iOS 5 或 6 中的 call_history.db 位置

> ID：14358747
> 
> 赞同：0
> 
> 时间：2013-01-16T12:42:48.987
> 
> 标签：iphone, objective-c, ios5, ios6, jailbreak

iOS 5 或 iOS 6 中通话记录文件的位置是什么。通话记录文件的名称是什么。在 iOS 4 通话记录 sqlite 文件位置是

```
"/private/var/wireless/Library/CallHistory/call_history.db" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:34:41.580

我刚刚检查了我越狱的 iOS 5.0.1 iPhone 4，该文件位于完全相同的位置：

```
/private/var/wireless/Library/CallHistory/call_history.db 
```

# php - 是否可以在打开语句时直接通过链接运行 mysqli 查询？

> ID：14358748
> 
> 赞同：1
> 
> 时间：2013-01-16T12:42:49.080
> 
> 标签：php, mysql

我正在尝试对 MySQL 数据库执行一个简单的操作：我的联系人的全名位于一个名为`first_name`而该列为`last_name`空的列上。

所以我想取出`first_name`列上的内容并在第一次出现空白时将其拆分，并将第一部分放在`first_name`列上，将第二部分放在`last_name`列上。

我使用以下代码，但它不起作用：

```
$connection = new mysqli(DATABASE_SERVER, DATABASE_USERNAME, DATABASE_PASSWORD, DATABASE_NAME, DATABASE_PORT);

$statement = $connection->prepare("SELECT id, first_name FROM contacts");

$statement->execute();

$statement->bind_result($row->id, $row->firstName);

while ($statement->fetch()) {
  $names = separateNames($row->firstName);

  $connection->query('UPDATE contacts SET first_name="'.$names[0].'", last_name="'.$names[1].'" WHERE id='.$row->id);
}

$statement->free_result();
$statement->close();

$connection->close(); 
```

我可以使用`$connection->query`while 来打开语句吗？

最好的祝福。

**更新**

`$connection->query(...)`返回，我收到以下`FALSE`错误：

```
PHP Fatal error:  Uncaught exception 'Exception' with message 'MySQL Error - 2014 : Commands out of sync; you can't run this command now' 
```

我将代码更改为以下并工作：

```
$connection = new mysqli(DATABASE_SERVER, DATABASE_USERNAME, DATABASE_PASSWORD, DATABASE_NAME, DATABASE_PORT);

$result = $connection->query("SELECT id, first_name FROM contacts");

while ($row = $result->fetch_row()) {
  $names = separateNames($row[1]);

  $connection->query('UPDATE contacts SET first_name="'.$names[0].'", last_name="'.$names[1].'" WHERE id='.$row[0]);
}

$connection->close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:48:55.993

> 我可以使用`$connection->query`while 来打开语句吗？

是的。它将返回一个新的结果对象或只是一个布尔值，具体取决于 SQL 查询，请参阅[http://php.net/mysqli_query](http://php.net/mysqli_query) - 在您运行查询的情况下，如果失败，如果它有效`UPDATE`，它将始终返回一个布尔值。`FALSE``TRUE`

顺便说一句，[Mysqli 连接对象](http://php.net/class.mysqli)不是[Mysqli 语句对象](http://php.net/class.mysqli-stmt)，因此它们通常不会相互干扰（在某些情况下断开连接可能会破坏/破坏某些语句，但我认为这是您可以忽略的问题的边缘情况片刻）。

我想知道你为什么要问。也许你应该改进你解决问题的方式？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:55:21.857

在给定时间我只能有一个活动语句，因此我必须通过该`$connection->query()`方法进行其中一个查询。

正如@hakre 提到的：

> 我仍然保留我的建议，即您应该（必须！）执行准备好的语句而不是 query() 以正确编码更新值

我选择使用语句方法进行更新查询，所以最终的工作代码如下：

```
$connection = new mysqli(DATABASE_SERVER, DATABASE_USERNAME, DATABASE_PASSWORD, DATABASE_NAME, DATABASE_PORT);

$result = $connection->query("SELECT id, first_name FROM contacts");

$statement = $connection->prepare("UPDATE contacts SET first_name=?, last_name=? WHERE id=?");

while ($row = $result->fetch_row()) {
  $names = separateNames($row[1]);

  $statement->bind_param('ssi', $names[0], $names[1], $row[0]);
  throwExceptionOnMySQLStatementError($statement, "Could not bind parameters", $logger);

  $statement->execute();
  throwExceptionOnMySQLStatementError($statement, "Could not execute", $logger);
}

$statement->free_result();
$statement->close();

$connection->close(); 
```

感谢所有提供意见的人，特别是@hakre，他们帮助我达成了最终解决方案。

# ios - 钛中的 NSDateFormatter 等效/在钛中以指定格式转换日期

> ID：14358749
> 
> 赞同：1
> 
> 时间：2013-01-16T12:42:52.590
> 
> 标签：ios, datetime, titanium, nsdateformatter, titanium-mobile

我正在使用基于 Titanium 的 iOS 应用程序中的日期和时间。

我的问题是，我得到以下格式的时间：

```
Wed Jan 16 2013 17:32:40 GMT+0530 (IST) 
```

我想改变它：

```
Jan 16, 2013, 05:32 pm 
```

在 iOS 中有**[NSDateFormatter](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)**可以做到这一点。

**我做了什么 ：**

1.  目前我正在使用`split`和 switch手动进行`cases`，但如果输入时间格式发生变化，它会失败，那么我需要为更改的格式重新编写代码。
2.  **[我在Titanium Docs](http://docs.appcelerator.com/titanium/latest/#!/api)**中搜索了很多，但没有得到任何解决方案。
3.  [我在他们的论坛](http://developer.appcelerator.com/question/146975/convert-date-in-specified-format)上问了同样的问题，直到现在没有得到任何答复。

在 Titanium 中有没有办法做到这一点？

请帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:47:52.083

查找用于日期格式的 moment.js JavaScript 模块

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T05:25:18.030

我没有找到`NSDateFormatter`钛合金的任何替代品。

我测试了 Moment.js，但它不适用于我的情况。

我实现了一个 JavaScript 函数来实现我的输出。

```
/**
 * Function for formatting the date and time 
 * @param {Object} dateTime 
 */
function formatDateTime(dateTime)
{
    var arr = dateTime.split(' ');
    var convertedDate = arr[1]+' '+arr[2]+', '+arr[3];
    var convertedTime = arr[4];
    var returnValue = convertedDate+', '+convertedTime;
    return returnValue;
} 
```

**2014 年 2 月 27 日编辑**

在面对不同场合的 JavaScript 日期格式问题后，我终于开发了自己的 JavaScript 模块，该模块将 JavaScript 日期对象格式化为指定格式。你可以在这里找到它：[**MMP_DateTime**](https://github.com/Midhun-MP/MMP_DateTime)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T06:50:24.907

我编写了一个函数，它将根据我的要求转换日期，如下所示

```
var getRequiredDate = function(date) {
              var monthList = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

    var day = date.getDate();
    var month = date.getMonth();
    var year = date.getFullYear(); // Use standard date methods
    var newdate = monthList[month] + ' ' + day + ", " + year;
    Ti.API.info("Date :" + newdate); 
```

};

希望这对您有所帮助。

# python - 没有提供参数时的python argparse设置行为

> ID：14358753
> 
> 赞同：9
> 
> 时间：2013-01-16T12:42:57.587
> 
> 标签：python, python-2.7, argparse

我对 python 还很陌生，并且在使用命令行参数时我被困在如何构造我的简单脚本上。

该脚本的目的是自动化我工作中与排序和处理图像相关的一些日常任务。

我可以指定参数并让它们调用相关函数，但我也想在没有提供参数时设置默认操作。

这是我目前的结构。

```
parser = argparse.ArgumentParser()
parser.add_argument("-l", "--list", help="Create CSV of images", action="store_true")
parser.add_argument("-d", "--dimensions", help="Copy images with incorrect dimensions to new directory", action="store_true")
parser.add_argument("-i", "--interactive", help="Run script in interactive mode", action="store_true")
args = parser.parse_args()

if args.list:
    func1()
if args.interactive:
    func2()
if args.dimensions:
    func3() 
```

但是当我不提供任何参数时，什么都不会被调用。

```
Namespace(dimensions=False, interactive=False, list=False) 
```

如果没有提供争论，我想要的是一些默认行为

```
if args.list:
        func1()
    if args.interactive:
        func2()
    if args.dimensions:
        func3()
    if no args supplied:
        func1()
        func2()
        func3() 
```

这似乎应该很容易实现，但我迷失了如何检测所有参数是否为假而不循环参数并测试是否全部为假的逻辑。

## 更新

多个参数一起有效，这就是我没有走 elif 路线的原因。

## 更新 2

这是我的更新代码，考虑到@unutbu 的答案

这似乎并不理想，因为所有内容都包含在 if 语句中，但在短期内我找不到更好的解决方案。我很高兴接受@unutbu 的回答，如果提供任何其他改进，我们将不胜感激。

```
lists = analyseImages()
    if lists:
        statusTable(lists)

        createCsvPartial = partial(createCsv, lists['file_list'])
        controlInputParital = partial(controlInput, lists)
        resizeImagePartial = partial(resizeImage, lists['resized'])
        optimiseImagePartial = partial(optimiseImage, lists['size_issues'])
        dimensionIssuesPartial = partial(dimensionIssues, lists['dim_issues'])

        parser = argparse.ArgumentParser()
        parser.add_argument(
        "-l", "--list", 
        dest='funcs', action="append_const", const=createCsvPartial,
        help="Create CSV of images",)
        parser.add_argument(
        "-c", "--convert", 
        dest='funcs', action="append_const", const=resizeImagePartial,
        help="Convert images from 1500 x 2000px to 900 x 1200px ",)
        parser.add_argument(
        "-o", "--optimise", 
        dest='funcs', action="append_const", const=optimiseImagePartial,    
        help="Optimise filesize for 900 x 1200px images",)
        parser.add_argument(
        "-d", "--dimensions", 
        dest='funcs', action="append_const", const=dimensionIssuesPartial,
        help="Copy images with incorrect dimensions to new directory",)
        parser.add_argument(
        "-i", "--interactive", 
        dest='funcs', action="append_const", const=controlInputParital,
        help="Run script in interactive mode",)
        args = parser.parse_args()

        if not args.funcs:
            args.funcs = [createCsvPartial, resizeImagePartial, optimiseImagePartial, dimensionIssuesPartial]

        for func in args.funcs:
            func()

    else:
        print 'No jpegs found' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T13:19:39.203

如果没有设置选项，您可以`append_const`将 funcs 设置为属性，`args.funcs`然后使用一个 if 语句来提供默认行为：

```
if not args.funcs:
    args.funcs = [func1, func2, func3] 
```

* * *

```
import argparse

def func1(): pass
def func2(): pass
def func3(): pass

parser = argparse.ArgumentParser()
parser.add_argument(
    "-l", "--list",
    dest='funcs', action="append_const", const=func1,
    help="Create CSV of images", )
parser.add_argument(
    "-i", "--interactive",
    dest='funcs', action="append_const", const=func2,
    help="Run script in interactive mode",)
parser.add_argument(
    "-d", "--dimensions",
    dest='funcs', action='append_const', const=func3,
    help="Copy images with incorrect dimensions to new directory")
args = parser.parse_args()
if not args.funcs:
    args.funcs = [func1, func2, func3]

for func in args.funcs:
    print(func.func_name)
    func() 
```

* * *

```
% test.py
func1
func2
func3

% test.py -d
func3

% test.py -d -i
func3
func2 
```

请注意，与您的原始代码不同，这允许用户控制调用函数的顺序：

```
% test.py -i -d
func2
func3 
```

这可能是可取的，也可能不是可取的。

* * *

响应**更新 2**：

您的代码可以正常工作。但是，这是您可以组织它的另一种方式：

*   代替将主程序嵌套在`if`子句中，您可以使用

    ```
    if not lists:
        sys.exit('No jpegs found')
    # put main program here, unnested 
    ```

    [sys.exit](http://docs.python.org/2/library/sys.html#sys.exit)将打印`No jpegs found`到`stderr`并以退出代码 1 终止。

*   虽然我最初建议使用`functools.partial`，但现在我想到了另一种——也许更简单——的方法：而不是

    ```
    for func in args.funcs:
        func() 
    ```

    我们可以说

    ```
    for func, args in args.funcs:
        func(args) 
    ```

    我们需要做的就是存储一个元组`(func, args)`而`args.func` 不是单独存储一个函数。

例如：

```
import argparse
import sys

def parse_args(lists):
    funcs = {
        'createCsv': (createCsv, lists['file_list']),
        'resizeImage': (resizeImage, lists['resized']),
        'optimiseImage': (optimiseImage, lists['size_issues']),
        'dimensionIssues': (dimensionIssues, lists['dim_issues']),
        'controlInput': (controlInput, lists)
    }
    parser = argparse.ArgumentParser()
    parser.add_argument(
        "-l", "--list",
        dest='funcs', action="append_const", const=funcs['createCsv'],
        help="Create CSV of images",)
    parser.add_argument(
        "-c", "--convert",
        dest='funcs', action="append_const", const=funcs['resizeImage'],
        help="Convert images from 1500 x 2000px to 900 x 1200px ",)
    parser.add_argument(
        "-o", "--optimise",
        dest='funcs', action="append_const", const=funcs['optimiseImage'],
        help="Optimise filesize for 900 x 1200px images",)
    parser.add_argument(
        "-d", "--dimensions",
        dest='funcs', action="append_const", const=funcs['dimensionIssues'],
        help="Copy images with incorrect dimensions to new directory",)
    parser.add_argument(
        "-i", "--interactive",
        dest='funcs', action="append_const", const=funcs['controlInput'],
        help="Run script in interactive mode",)
    args = parser.parse_args()
    if not args.funcs:
        args.funcs = [funcs[task] for task in
                      ('createCsv', 'resizeImage', 'optimiseImage', 'dimensionIssues')]
    return args

if __name__ == '__main__':
    lists = analyseImages()

    if not lists:
        sys.exit('No jpegs found')

    args = parse_args(lists)   
    statusTable(lists)    
    for func, args in args.funcs:
        func(args) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-03-07T19:44:34.377

您可以通过检查 args 的数量是否等于 1 来处理此问题。这意味着仅传递了您的 python 命令。

```
import argparse
import sys

parser = argparse.ArgumentParser()
parser.add_argument("-l", "--list", help="Create CSV of images", action="store_true")
parser.add_argument("-d", "--dimensions", help="Copy images with incorrect dimensions to new directory", action="store_true")
parser.add_argument("-i", "--interactive", help="Run script in interactive mode", action="store_true")
args = parser.parse_args()

if len(sys.argv)==1:
    # display help message when no args are passed.
    parser.print_help()
    sys.exit(1) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-16T12:46:12.243

那是你要的吗？

```
if args.list:
    func1()
if args.interactive:
    func2()
if args.dimensions:
    func3()
if not any(vars(args).values()):
    func1()
    func2()
    func3() 
```

（感谢@JFSebastian 的`any`版本）

# java - 如何在 Java（Android）中生成与 .Net 中相同的 AES 密钥？

> ID：14358754
> 
> 赞同：5
> 
> 时间：2013-01-16T12:42:59.373
> 
> 标签：java, android, .net, encryption, aes

我需要从.Net WebService 提供的盐和密码生成Java（Android）中的AES 密钥。我需要具有与 .net 中生成的密钥相同的密钥，并且具有相同的密码和盐（使用 Rfc2898DeriveBytes 和 AesManaged()）。这是我在 Android 中的代码：

```
char[] passwordAsCharArray = password.toCharArray();
PBEKeySpec pbeKeySpec = new PBEKeySpec(passwordAsCharArray, salt, 1000, 256); 
SecretKeyFactory factory = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");
SecretKeySpec secretKey = new SecretKeySpec(factory.generateSecret(spec).getEncoded(), "AES"); 
```

这是.net中的代码：

```
byte[] keyBytes = Encoding.Unicode.GetBytes(key);
Rfc2898DeriveBytes derivedKey = new Rfc2898DeriveBytes(key, keyBytes);
AesManaged rijndaelCSP = new AesManaged();
rijndaelCSP.BlockSize = 128;
rijndaelCSP.KeySize = 256;
rijndaelCSP.Key = derivedKey.GetBytes(rijndaelCSP.KeySize / 8);
rijndaelCSP.IV = derivedKey.GetBytes(rijndaelCSP.BlockSize / 8);                

ICryptoTransform decryptor = rijndaelCSP.CreateDecryptor(); 
```

当我比较两个键时，它们是不同的。任何想法如何在 Android 上生成与 .Net 中相同的密钥？（我知道在.net 中生成的密钥是正确的）。.Net 中的迭代次数为 1000，salt 和密码也与 Android 相同。

* * *

好的，事实证明我不需要完全相同的密钥（作为字节数组）。我需要这个来解密已经在.Net中加密的文件（用Java） - 使用这个密钥它给了我Bad Padding Exception所以我认为密钥不同并且导致问题，但我需要做的就是生成IV 像一把钥匙 - 这解决了我的问题。感谢您的回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:06:48.387

看起来您在 .NET 代码中使用“密钥”（应该是密码）作为盐，而 Java 部分使用指定的盐。此外，您指定了用于解码盐的 Unicode 字符集，这很奇怪，盐从一开始就应该是一个随机八位字节字符串（== 字节数组）。

我建议您首先将您的密码和随机盐转换为字节数组，使用十六进制表示（在您的控制台或调试器中）进行比较，然后才将它们用作每个中 PBKDF2 函数的输入参数。我建议您的密码使用 UTF-8 编码。

始终指定密码学中的所有参数，尽量不要使用默认值，例如迭代计数。如果您的输入偏离了一位，则输出将完全不正确，并且无法判断哪个参数负责。

看起来 Java 和 .NET PBKDF2“原语”在两个平台上是相同的，互联网上有工作代码。

# r - 使用 R 在 igraph 中解释 watts.strogatz.game() 中的参数

> ID：14358757
> 
> 赞同：2
> 
> 时间：2013-01-16T12:43:08.283
> 
> 标签：r, igraph

我无法解释 igraph 中 watts strogatz 模型中的参数，并且文档并没有真正帮助。

如果我生成一个网络：

```
watts.strogatz.game(dim=1,size=2000,nei=10, p=0.01) 
```

这里的 size 参数应该指示节点的数量，而 p 参数应该指示重新布线的概率。

我不理解 dim 和 nei 的论点。当开始添加边缘时，dim 是否意味着网络的大小？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T14:09:54.893

没有添加边缘，而是重新布线。初始图是格子，即非常规则的图。`dim`和参数描述了这个`nei`初始晶格（在任何重新布线发生之前）。有`size^dim`顶点。

这是维度 1 和 2 的格子。

```
library(igraph)
g <- graph.lattice(5)
plot(g, layout=layout.grid(g,width=5)) 
```

![一维晶格](../Images/65431c900ba137c9a310788d1f3e44c3.png)

```
plot(graph.lattice(c(5,5))) 
```

![二维晶格](../Images/e5fdc9135ec57369e7de120d908edbff.png)

在这些示例中，每个顶点在每个方向上都连接到 1 个邻居：您可以更改`nei`以增加此数字。

```
g <- graph.lattice(10, nei=2)
plot(g, layout=layout.circle) 
```

![更多邻居](../Images/429957e0be01ca75b8ef3065d1fda1f6.png)

使用的格子实际上是圆形的（我设置`p=0`删除重新布线 - 您可以更改它以查看模型的工作原理）：

```
g <- watts.strogatz.game(dim=1,size=10,nei=2, p=0)
plot(g) 
```

![在此处输入图像描述](../Images/85e4932682455fa5900b3f7e8da53fd3.png)

# joomla - Joomla 中的 URL 不起作用

> ID：14358765
> 
> 赞同：0
> 
> 时间：2013-01-16T12:43:31.237
> 
> 标签：joomla

我有一个实时 joomla 网站，我将它复制到我的开发服务器上，其 URL 为“dev.xxx.ch”。基础站点可以工作，但是当我单击链接时它会失败。链接生成正确：dev.xxx.ch/gyger/ 但随后站点转到 xxx.ch

任何人都可以修复我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:55:28.310

检查`configuration.php`根目录中的文件。这一行应该说：

```
public $live_site = 'http://dev.pingag.ch'; 
```

如果它不改变它。话虽如此，这并不是您唯一需要担心的事情。确保您已按照正确的指示[复制网站](http://docs.joomla.org/Copying_a_Joomla_website)。

我也强烈推荐使用[Akeeba 备份](https://www.akeebabackup.com/)。它是免费的，可以为您处理一切。真的是唯一的出路。尽管对 Akeeba 备份有一点警告，但请务必仔细阅读文档，这将为您节省大量时间。

# javascript - 同时使用 2-legged 和 3-legged OAuth

> ID：14358767
> 
> 赞同：2
> 
> 时间：2013-01-16T12:43:46.650
> 
> 标签：javascript, security, authentication, oauth, authorization

我正在构建一个可供我们的开发人员（编写网站）和第三方使用的 API。似乎 OAuth 在这里很合适，而且我认为我们需要同时实现 2-legged 和 3-legged OAuth，因为：a) 它使 API 保持一致。b) 它允许我们保持开发者注册的一致性。

以上似乎正确吗？

此外，我对 2-legged OAuth 有一个烦人的问题。它要求客户端在每笔交易中发回一个“承载”标头，这对我来说并不合适……客户端将其添加到每个服务器调用中似乎很繁重，而且它似乎进一步增加了复杂性跨页面转换维护此承载令牌。是否有关于如何维护 2-legged OAuth 会话的任何标准 --- 例如，将 Bearer 令牌通过 cookie 发送给客户端是否有意义，以便客户端不需要添加的麻烦它手动到每个调用？

# java - 请求并从 servlet 获取响应

> ID：14358768
> 
> 赞同：0
> 
> 时间：2013-01-16T12:43:48.623
> 
> 标签：java, jsp, servlets

我必须将客户信息发送到服务器并从中获得响应。我的流程是使用 POST 从 JSP 向 Servlet 发送客户信息。从 Servlet，我将发送数据并从响应中获取状态。但是当我向服务器发送数据时，我收到了 http 错误 500。我可以将数据发送到 HTTP 或 HTTPS。如果我必须使用 HTTPS 协议来请求服务器，我该如何实现呢？

这是servlet代码。

```
 String refNo = request.getParameter("ref");
    String amount = request.getParameter("amt");

    response.setContentType(CONTENT_TYPE);

    URL      url;
    URLConnection    urlConn;
    DataOutputStream cgiInput;

    // URL of target page script.
    url = new URL("http://uat.telemoney.com.sg/easypay2/paymentpage.do");
    urlConn = url.openConnection();

    urlConn.setDoInput(true);
    urlConn.setDoOutput(true);
    urlConn.setUseCaches(false);
    urlConn.setRequestProperty("Content-Type", 
                   "application/x-www-form-urlencoded");

    String content = "mid=" + URLEncoder.encode(MERCHANT_ID) + "&ref=" + URLEncoder.encode(refNo)+ "&cur=" + URLEncoder.encode("SGD");
    content += "&statusurl=" + URLEncoder.encode("http://www.winsondbs.com:8080/TestWeb/Servlet/DBSController") + "&paytype=" + URLEncoder.encode("2");
    content += "&ccnum=" + URLEncoder.encode("5111111111111115") + "&ccdate=" + URLEncoder.encode("1511") + "&cccvv=" + URLEncoder.encode("989");
    content += "&amt=" + URLEncoder.encode(amount) + "&creditCardName=" + URLEncoder.encode("raymond") + "&cccvv=" + URLEncoder.encode("989");

    System.out.println(content);
    // Send POST output.
    cgiInput = new DataOutputStream(urlConn.getOutputStream());
    cgiInput.writeBytes(content);
    cgiInput.flush();
    cgiInput.close();

    // reads the CGI response and print it inside the servlet content
    BufferedReader cgiOutput = 
        new BufferedReader(new InputStreamReader(urlConn.getInputStream()));
    PrintWriter servletOutput = response.getWriter();        
    servletOutput.print("<html><body><h1>This is the Source Servlet</h1><p />");
    String line = null;
    while (null != (line = cgiOutput.readLine())){
        servletOutput.println(line);
    }
    cgiOutput.close();
    servletOutput.print("</body></html>");
    servletOutput.close(); 
```

以下是错误：

```
 Jan 16, 2013 8:33:04 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet DBSController threw exception
java.io.IOException: Server returned HTTP response code: 500 for URL: http://uat.telemoney.com.sg/easypay2/paymentpage.do
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at servlet.com.dbs.www.DBSController.doPost(DBSController.java:163)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:34:29.580

你不应该写 DataOutputStream。另一端的服务器是否需要 DataOutputStream。

替换这个

```
cgiInput = new DataOutputStream(urlConn.getOutputStream());
cgiInput.writeBytes(content); 
```

和

```
cgiInput = urlConn.getOutputStream());
cgiInput.write(content.getBytes()); 
```

# java - 如何通过 JAXB xml 解析获取特定元素？

> ID：14358769
> 
> 赞同：7
> 
> 时间：2013-01-16T12:43:49.543
> 
> 标签：java, xml, xml-parsing, jaxb

我已经使用 JAXB 解析 XML。如何通过 JAXB xml 解析获取特定元素（即子节点），而不将该元素解析为节点。

```
<?xml version="1.0" encoding="UTF-8"?>
        <Header>
            <From>
            <Credential
                        domain="NetworkId"><Identity>ANXXXNNN</Identity>
            </Credential>
            </From>

            <To>
            <Credential
                        domain="NetworkId"><Identity>ANNNXXXXXT</Identity>
            </Credential>
            </To>

            <To>
            <Credential
                        domain="NetworkId"><Identity>BNNXXXT</Identity>
            </Credential>
            </To>
        </Header> 
```

我已经完成了这样的解组，它工作正常。为了性能，我不希望元素作为节点。还有其他方法吗？

```
Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
dbf.setNamespaceAware(true);
DocumentBuilder db = dbf.newDocumentBuilder();
    Document doc;
    doc = db.parse(file);
    NodeList node = (NodeList)doc.getElementsByTagName("TO");

   JAXBElement<ToType> element =  jaxbUnmarshaller.unmarshal(node.item(0),ToType.class); 
```

对象模型就像

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "ToType", propOrder = {
    "credential"
})
public class ToType {

    @XmlElement(name = "Credential", required = true)
    protected CredentialType credential;

    public CredentialType getCredential() {
        return credential;
    }

    public void setCredential(CredentialType value) {
        this.credential = value;
    } 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T13:45:56.977

可以使用[**StAX (JSR-173)**](http://www.jcp.org/en/jsr/detail?id=173)解析器（包含在从 Java SE 6 开始的 JDK/JRE 中）。然后你可以推进`XMLStreamReader`到子节点并从那里解组。

```
import javax.xml.stream.*;
import javax.xml.transform.stream.StreamSource;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        XMLInputFactory xif = XMLInputFactory.newFactory();
        StreamSource xml = new StreamSource("src/forum14358769/input.xml");
        XMLStreamReader xsr = xif.createXMLStreamReader(xml);

        // Advance to the "To" element.
        while(xsr.hasNext()) {
            if(xsr.isStartElement() && "To".equals(xsr.getLocalName())) {
                break;
            }
            xsr.next();
         }

        // Unmarshal from the XMLStreamReader that has been advanced
        JAXBContext jc = JAXBContext.newInstance(ToType.class);
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        ToType toType = unmarshaller.unmarshal(xsr, ToType.class).getValue();
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2012/08/handle-middle-of-xml-document-with-jaxb.html](http://blog.bdoughan.com/2012/08/handle-middle-of-xml-document-with-jaxb.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:53:26.110

您必须执行以下代码来执行[JAXB Unmarshalling](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/api/javax/xml/bind/Unmarshaller.html)：

```
unmarshaler.unmarshal(source); 
```

这将返回您使用 xjc 命令生成的类的**实例。**

然后，您可以使用 bean 方法访问任何属性。

# javascript - 如何在 waterwheelCarousel 中将 img 更改为 div？

> ID：14358771
> 
> 赞同：0
> 
> 时间：2013-01-16T12:43:59.233
> 
> 标签：javascript, jquery, dom

我想更改 waterwheelCarousel 中的 img[元素](http://code.google.com/p/proyectofinalingles/source/browse/trunk/js/jquery.waterwheelCarousel.js?r=7)

我试图用 .js/.css 中的 div 替换 img

所以我的 html 看起来像：

```
<div id="waterwheel-carousel-default">
      <div class="carousel-controls">
        <div class="carousel-prev"></div>
        <div class="carousel-next"></div>
      </div>
      <div class="carousel-images">

   <div style="background-image:url('images/testImage1.png')">hhhhh</div>
   <div style="background-image:url('images/testImage1.png')">hhhhh</div> 
   <div style="background-image:url('images/testImage1.png')">hhhhh</div> 
   <div style="background-image:url('images/testImage1.png')">hhhhh</div>     

      </div>
 </div> 
```

我的 Js 文件已替换每个：

```
 $(this).find(".carousel-images img").length 
   itemsContainer.find('img') 
```

分别与：

```
 $(this).find(".carousel-images > div").length
    itemsContainer.find('div') 
```

但它不起作用任何人都可以提供帮助？

# android - 使用 Android 中的“请求对话框”向 Facebook 中的所有朋友发送应用请求

> ID：14358773
> 
> 赞同：12
> 
> 时间：2013-01-16T12:44:08.827
> 
> 标签：android, facebook-graph-api, facebook-app-requests, facebook-friends, facebook-invite-friends

我想知道如何从 android 应用程序向我所有的 facebook 朋友发送应用程序请求。我在图形 API 中尝试过。但是，没办法完成。

```
https://graph.facebook.com/apprequests?ids=friend1,friend2&message='Hi'&method=post&access_token=ACCESS_TOKEN 
```

我知道这是一个重复的问题。但是，还没有找到答案。我在上述 API 上收到此错误。

```
"All users in param ids must have accepted TOS." 
```

我希望有一种方法可以通过点击向所有手机上的朋友发送应用请求。请分享。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T10:18:47.567

您收到的错误消息（“param ids 中的所有用户必须已接受 TOS”）是因为您尝试将应用生成的请求发送给未连接到您的应用的用户。

请参阅[此处的开发人员文档](https://developers.facebook.com/docs/requests/#app_to_user)。

使用请求对话框发送的请求和应用生成的请求不同，您不能使用应用生成的请求邀请用户加入您的应用。

无法通过图形 API 发送 Facebook 应用程序请求。您可以使用[应用程序请求 java-script 对话框](https://developers.facebook.com/docs/reference/dialogs/requests/)来发送请求，您只需要在“to”属性中指定用户的 ID，如文档中所述。

示例功能：

```
<script>
  FB.init({ appId: '**appId**', status: true, cookie: true, xfbml : true });

  function sendRequest(to) {
    FB.ui({method: 'apprequests', to: to, message: 'You should learn more about this awesome site.', data: 'tracking information for the user'});
    return false;
  }
</script> 
```

然后只需将每个图像的 onclick 连接到类似的东西`onclick="return sendRequest('**friendId**');"`

你也可以在javascript中调用这个函数：它会给你所有的朋友照片。还有一群目前正在使用同一应用程序的朋友。您可以向其中任何一个发送请求。

```
function sendRequestViaMultiFriendSelector() {
    FB.ui({
        method: 'apprequests',
        message: "You should learn more about this awesome site."
    });     
} 
```

请参阅[Facebook 好友请求 - 错误 - 'param ids 中的所有用户都必须接受 TOS'](https://stackoverflow.com/questions/7767688/facebook-friend-request-error-all-users-in-param-ids-must-have-accepted-tos)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T05:12:55.577

你在 developer.facebook.com 看过“Hackbook”的演示吗？

您可以参考[HACKBOOK APP REQUEST FROM HERE](http://developers.facebook.com/docs/mobile/android/hackbook/)。

您可以通过以下代码实现将应用请求仅发布给一位朋友。

代码：

```
Bundle params = new Bundle();

            JSONObject attachment = new JSONObject();
            JSONObject properties = new JSONObject();
            JSONObject prop1 = new JSONObject();
            JSONObject prop2 = new JSONObject();
            JSONObject media = new JSONObject();
            JSONStringer actions = null;
            try {
                attachment.put("name", "YOUR_APP");
                attachment.put("href", "http://www.google.com/");
                attachment.put("description", "ANY_TEXT");
                media.put("type", "image");
                media.put("src", "IMAGE_LINK");
                media.put("href", "http://www.google.com/");
                attachment.put("media", new JSONArray().put(media));
                prop1.put("text", "www.google.com");
                prop1.put("href", "http://www.google.com");
                properties.put("Visit our website to download the app", prop1);
               /* prop2.put("href", "http://www.google.com");
                properties.put("iTunes Link      ", prop2);*/
                attachment.put("properties", properties);
                Log.d("FACEBOOK", attachment.toString());

                actions = new JSONStringer().object()
                            .key("name").value("APP_NAME")
                            .key("link").value("http://www.google.com/").endObject();

            } catch (JSONException e) {
                e.printStackTrace();
            }

            System.out.println("ACTIONS STRING: "+actions.toString());
            System.out.println("ATTACHMENT STRING: "+attachment.toString());

            params.putString("actions", actions.toString());
            params.putString("attachment", attachment.toString()); // Original
            params.putString("to", "YOUR_FRIEND_FACEBOOK_ID");
            Utility.mFacebook.dialog(getParent(), "stream.publish", params,new PostDialogListener());

 public class PostDialogListener extends BaseDialogListener {
    @Override
    public void onComplete(Bundle values) {
        final String postId = values.getString("post_id");
        if (postId != null) {
            Toast.makeText(getApplicationContext(), ""+getResources().getString(R.string.facebook_response_msg_posted), Toast.LENGTH_SHORT).show();
        } else {
            Toast.makeText(getApplicationContext(), ""+getResources().getString(R.string.facebook_response_msg_not_posted), Toast.LENGTH_SHORT).show();
        }
    }
} 
```

如果您只想在一个朋友的墙上发布 Apprequest，上面的代码就完美了。如果你想在所有人上发帖，那么你必须制作 asynckTask，它为所有朋友发布并在所有墙上发布应用程序请求运行。

## 更新

这是[PHP](https://stackoverflow.com/questions/11446983/how-to-send-app-request-to-user-all-friends-using-facebook-request-dialog)中的链接，它完成了向所有 Facebook 朋友发送请求的相同工作。

并且[这里清楚地解释了[3](https://stackoverflow.com/questions/5307612/how-can-a-facebook-application-send-a-message-to-all-of-a-users-friends?rq=1)，它被 Facebook 阻止向超过 15-20 个朋友发送好友请求。

现在，您只需要一个选项即可，在 AsyncTask 中使用上述代码将好友请求一一发送给所有好友。

# ios - 如何可靠地检测 UIWebView 中的链接点击？

> ID：14358774
> 
> 赞同：9
> 
> 时间：2013-01-16T12:44:10.233
> 
> 标签：ios, uiwebview

我有一个`UIWebView`，当用户点击一个链接时我需要做一些事情。有一个委托回调可用于检测水龙头：

```
- (BOOL) webView: (UIWebView*) webView
    shouldStartLoadWithRequest: (NSURLRequest*) request
    navigationType: (UIWebViewNavigationType) navigationType
{
    if (navigationType == UIWebViewNavigationTypeLinkClicked) {
        …
    }
} 
```

问题是这段代码不能处理所有的链接点击。例如，一个普通的 Google 搜索结果页面对链接做了一些奇怪的事情：

```
<a href="http://example.com/" class="l" onmousedown="return rwt(…)">
    <em>Link Text</em>
</a> 
```

该`rwt`功能导致`UIWebViewNavigationTypeLinkClicked`点击时链接不会触发事件。有没有办法可靠地检测落入“导航到其他页面”存储桶的所有事件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T10:51:13.120

到目前为止，我已经得出以下解决方案。首先，我在加载时将一些 JS 代码注入到页面中：

```
function reportBackToObjectiveC(string)
{
    var iframe = document.createElement("iframe");
    iframe.setAttribute("src", "callback://" + string);
    document.documentElement.appendChild(iframe);
    iframe.parentNode.removeChild(iframe);
    iframe = null;
}

var links = document.getElementsByTagName("a");
for (var i=0; i<links.length; i++) {
    links[i].addEventListener("click", function() {
        reportBackToObjectiveC("link-clicked");
    }, true);
} 
```

`webView:shouldStartLoadWithRequest: navigationType:`当用户点击链接时，由于委托调用，我提前知道：

```
if ([[[request URL] scheme] isEqualToString:@"callback"]) {
    [self setNavigationLeavingCurrentPage:YES];
    return NO;
} 
```

然后，如果另一个请求来了并且`_navigationLeavingCurrentPage`是真的，我知道用户已经点击了一个链接，即使导航类型标志是`UIWebViewNavigationTypeOther`. 我仍然需要对解决方案进行广泛的测试，因为我担心它会导致一些误报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:07:33.113

我相信这是可以做到的，通过在网站的 HTML 代码中嵌入一个自定义 JavaScript 来监控事件，并根据您要监控的事件，它可以触发带有自定义 URL 方案的页面重定向，您可以在 shouldStartLoadWithRequest 中拦截。

像这样的东西：

```
<script>
// Function to capture events
function captureEvent(el) {
  window.location.href="callback://"+el.href;  
}

var elms = document.getElementsByTagName("a"); 
for (var i=0; i<elms.length; i++) {
  elms[i].addEventListener("onmousedown", function(){captureEvent(el)}, true); 

 }
</script> 
```

然后在 shouldStartLoadWithRequest 中，您可以搜索具有 callback:// url 方案的 NSURLRequest，然后做任何您想做的事情。

这尚未经过测试，但这样的事情可能会让您朝着正确的方向前进。

此外，由于提到了这一点，是的，您可以使用以下方法将自定义脚本添加到任何网页：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView 
{
    [super webViewDidFinishLoad:webView];    
    [webView stringByEvaluatingJavaScriptFromString:@"document.body.insertAdjacentHTML('BeforeEnd','<script>....</script>');"];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-27T11:47:51.040

您需要添加此行

> webView.dataDetectorTypes = UIDataDetectorTypeAll;

然后

> *   (BOOL) webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType

方法将被调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-14T05:57:28.017

我有很多问题要让它工作。使用 UITapGestureRecognizer 是可行的，只是它总是会收到点击，即使是链接也是如此。不幸的是，链接在被识别之前有大约 300 毫秒的延迟，这意味着手势识别器会在识别链接之前获得点击，这会产生时间问题（更糟糕的是，因为您不应该硬编码时间等待以防万一苹果改变了它）。此外，等待 300 多毫秒的点击时间会给我的应用带来糟糕的用户体验。

所以我最终做的是在所有获得非链接点击的东西之上覆盖一个透明的 div。然后，将链接放在更高的 z 级别。最后，确保一切都使用`ontouchend="javascript:window.location.href='...';"`. ontouchend 只会在点击发布时起作用，这是用户所期望的。设置 window.location.href 会加载一个新页面，确保所有点击都会调用`-webView:shouldStartLoadWithRequest:navigationType:`，并且我可以检查 URL 以查看需要执行的操作。

HTML 看起来像： ... ... ... ...

（我不完全确定“位置：相对”是否总是将事物放在与其他位置相同的位置，但它对我的简单页面很有效；您的里程可能会有所不同。但是，您需要 position:something 才能获得 z -索引工作。）

# java - 请求接收时间戳，不包含应用层代码

> ID：14358776
> 
> 赞同：2
> 
> 时间：2013-01-16T12:44:14.023
> 
> 标签：java, servlets, request

我想基本上监控java端的服务器调用。那么有什么方法可以直接获取收到请求时的时间戳。

换句话说，我不想明确地制作日期对象并找出时间戳。相反，如果请求对象提供了任何时间戳参数实用程序，我很感兴趣。

由 ServletActionContext.getRequest() 或任何可用解决方案提供的东西，无需编写代码来创建 Date() 对象并找出答案。

我说的原因是我有大约 50-60 个服务器调用，并且将来在我的应用程序中可能会更多，所以每次我需要应用程序层中的代码时，我都会使用这个现成的工具。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T12:49:24.307

[HttpServletRequest.getDateHeader](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getDateHeader%28java.lang.String%29)为您提供时间戳作为`long`值。

尽管这是来自请求标头而*不是*接收时间，但它可能会起作用，因为它提供了自纪元以来的毫秒数。

您还可以查看[Filter](http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html)，它允许您

> 已为此设计确定的示例有：
> 1\. 身份验证过滤器
> 2.*日志记录和审计过滤器*
> ......

[事件侦听器](http://docs.oracle.com/cd/B15904_01/web.1012/b14017/filters.htm#i1000654)可能是另一种工具，您可以在其中挂钩到 servlet 的处理。

回到你的问题：

ServletActionContext.getRequest() -> HttpServletRequest.getSession() -> [HttpSession.getLastAccessedTime](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#getLastAccessedTime%28%29)

> 返回客户端上次发送与此会话关联的请求的时间，作为自格林威治标准时间 1970 年 1 月 1 日午夜以来的毫秒数，并以容器收到请求的时间为标记。

# c# - 编辑时无法捕获错误

> ID：14358784
> 
> 赞同：0
> 
> 时间：2013-01-16T12:44:32.990
> 
> 标签：c#, database, winforms, datagridview, dataset

我对 c# 和 winforms 有点陌生，需要一些帮助。

我创建了一个`dataset`并将其插入 2 个表“ **order_lines** ”和“ **products** ”。我有一个`datagridview`从表“ **order_lines** ”中提取的列，这是一个空表（没有数据）。

因此，在`datagridview`我有 3 个空列：`quantity`，`product` *（`combobox`取自其他数据集表`products`）*和`total`我自己创建的列*（所有其他列，例如`product_id`和`order_num`是不可见的）*。

我试图允许用户编辑并将数据插入`datagridview`到列数量*（插入编号）*到列产品*（从组合框中选择产品）*并且总数应该是计算`quantity*product_price` *（根据从选择的产品组合框每个产品都有一个ID，价格应`products` 根据产品从表格中获取`id`）*

我有两个问题：

1.  我正在尝试使用`cell_validating`事件检查用户插入的数据，`data_error` 但它不起作用，而不是当用户输入无效数据时收到我的错误消息，我得到一个`"object cannot be cast from dbnull to other types"`我不明白为什么的异常
2.  我似乎没有设法从`dataset`表中获取价格`products`并根据所选产品在总列中使用它（在显示数据集表“ **order_lines** ”的datagridview中，数据集表中还有一个隐藏列“product_id” “**产品**”当用户选择我需要获取价格的产品时，我有列“product_id”和“product_name”，这是 datagridview 中的组合框。

我希望我设法解释了我的问题，任何想法将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:39:59.013

我建议你这样做：

```
DataTable products;

public Form1()
{
    InitializeComponent();

    // handle cell changes
    dataGridView1.CellValueChanged += dataGridView1_CellValueChanged;

    // used for manually raising the ComboBox change
    dataGridView1.CurrentCellDirtyStateChanged += dataGridView1_CurrentCellDirtyStateChanged;
}

void dataGridView1_CellValueChanged(object sender, DataGridViewCellEventArgs e)
{
    // return if the row or column headers were changed
    if (e.RowIndex < 0 || e.ColumnIndex < 0)
        return;
    if (e.ColumnIndex != dataGridView1.Columns["total"].Index)
    {
        var value = 0;

        // get the product id from the ComboBox
        var product = dataGridView1.Rows[e.RowIndex].Cells[dataGridView1.Columns["Product"].Index].Value;

        // get the quantity
        var quantity = dataGridView1.Rows[e.RowIndex].Cells[dataGridView1.Columns["TotalQuantity"].Index].Value.ToString();

        if (product != null && !String.IsNullOrEmpty(quantity))
        {
            value =
                int.Parse(quantity) *
                int.Parse(products.Select("product_id = " + product.ToString())[0]["product_price"].ToString());

            dataGridView1.Rows[e.RowIndex].Cells[dataGridView1.Columns["total"].Index].Value = value;
            dataGridView1.Invalidate();
        }
    }
}

void dataGridView1_CurrentCellDirtyStateChanged(object sender, EventArgs e)
{
    dataGridView1.CommitEdit(DataGridViewDataErrorContexts.Commit);
} 
```

# opengl - VS2010下用OpenGL“缺少glut32.dll”

> ID：14358787
> 
> 赞同：1
> 
> 时间：2013-01-16T12:44:44.710
> 
> 标签：opengl

我在VS2010下用OpenGL做一个程序很久了。直到现在，该程序始终可以独立运行（我的意思是不是从 vs2010 运行，而是在 IDE 外部双击）。“missing glut32.dll”显示让我把它放在同一个目录下。

有人可能会说我可能会在 system32 中丢失 glut32.dll（或者在我的情况下， syswow64 用于 64 位窗口）。当我把它放在目录中时，它被证明是正确的。问题是：我以前从未删除过它。怎么会是这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T12:55:29.710

`glut32.dll`不是核心系统库。默认情况下它没有安装在那里。也许某些程序的安装程序确实将其自己的副本放入系统目录并在卸载时将其删除。

无论如何，`glut32.dll`它不是一个标准库，因此用你自己的程序发布一个独立的副本并不是一件坏事。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-14T14:09:32.650

您必须将 glut.dll 文件放入：

C:/Windows/SysWOW64 这是 32 位 .dll 所在的文件夹。

C:/Windows/System32 包含 64 位 .dll。如果您想安全一点，您也可以将 GLUT.dll 放在 System32 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T12:47:55.293

你可能只是卸载了一些东西。我认为它首先不应该存在，因为它不是某种标准库。

无论如何，提供程序所需的所有库总是明智的。您可以在不同版本中拥有多个使用 GLUT 的应用程序，因此最好保持它接近可执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-23T08:56:06.030

将文件复制并粘贴到`glut32.dil`location `C:\Windows`，它将解决您的所有问题。

如果这不起作用，请按照以下步骤操作：

1.  转到设置->编译器->链接器设置->添加 `C:\MinGw\lib\glut32.lib`，然后按确定。
2.  转到设置->编译器->工具链可执行文件->`C:\Program Files (x86)\CodeBlocks\MinGW`
3.  然后将文件复制并粘贴到`glut32.dll`位置`C:\Windows`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-09T21:15:49.483

在 W10 (64b) 中，glut32.dll 没有作为标准安装，约定似乎是“去查找源代码并编译它”（假设像我一样，你不喜欢从通用 dll 下载站点获取它）。

最终，在访问[https://opengl.org/resources/libraries/glut/](https://opengl.org/resources/libraries/glut/)后，我找到了[http://vis.eng.uci.edu/~jkimball/eecs205/glut.html ，它在](http://vis.eng.uci.edu/~jkimball/eecs205/glut.html)[https](https://user.xmission.com/~nate/glut.html)处有指向 DLL 的链接[://user.xmission.com/~nate/glut.html](https://user.xmission.com/~nate/glut.html)

奇怪的是，regsvr32 不会注册它，但将其放入 c:\Windows\SysWOW64\ 工作正常。

不要与已经存在的 glu32.dll 混淆。

希望这可以帮助。请不要在没有解释的情况下投反对票或修改我对布朗尼积分的回复。我想帮你一个忙。

# asp.net-mvc - Visual Studio 在 razor 语句中显示语法错误但有效

> ID：14358789
> 
> 赞同：5
> 
> 时间：2013-01-16T12:44:47.030
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, visual-studio-2012, syntax-error

我在 MVC 3 中有一个项目。它运行良好，每次构建它时，它都会成功。但是，Visual Studio 坚持在每个 razor 语法的视图中显示编译错误。例如：

> 当前上下文中不存在名称“模型” D:\ ... Detail.cshtml

那行很简单：

```
@model Namespace.DetailViewModel 
```

我已经尝试过：

*   清洗液
*   清洁解决方案并删除`bin`和`obj`文件夹。
*   关闭 VS 并重新打开它（即使在中间重新启动）。

*注意：*我使用的是 Visual Studio 2012。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:07:20.510

我已经解决了！

该项目是在计算机尚未安装 MVC 4 时创建的。安装后，由于某种原因，它一直在工作（尽管如此[）](https://stackoverflow.com/questions/7510484/modelclientvalidationrule-conflict)。

所以我所做的是在安装 MVC 4 后进行 MVC 3 项目中应该进行的更改：[请参阅此处](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253815)

之后，它编译并且错误消失了，但是某些库的版本（`System.Web.WebPages`，`System.Web.WebPages.Razor`和其他一些）出现错误。原来是因为他们已经`Copy Local`开始了`True`。改变之后，一切都开始运作良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:49:22.580

打开位于 Views 文件夹内的 web.config 文件，如果缺少此部分，请添加：

```
<system.web.webPages.razor>
  <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  <pages pageBaseType="System.Web.Mvc.WebViewPage">
    <namespaces>
      <add namespace="System.Web.Mvc" />
      <add namespace="System.Web.Mvc.Ajax" />
      <add namespace="System.Web.Mvc.Html" />
      <add namespace="System.Web.Routing" />
    </namespaces>
  </pages>
</system.web.webPages.razor> 
```

# c# - 在 Neo4j 中使用索引

> ID：14358797
> 
> 赞同：0
> 
> 时间：2013-01-16T12:45:15.247
> 
> 标签：c#, neo4j, cypher, neo4jclient

我一直在浏览 Neo4J 和 Neo4J C# 客户端..

[neo4jclient wiki](http://hg.readify.net/neo4jclient/wiki)帮助我进行节点 crud 操作.. 但是 wiki 突然结束了.. 我在源代码中探索了测试[方法](http://hg.readify.net/neo4jclient/src/4693da483a90/Test/RelationshipTests.cs)并设法了解关系并在线搜索以了解索引的工作原理。

到目前为止，这就是我所拥有的，大致如下：

```
//create indexing on user and car
client.CreateIndex("User", new IndexConfiguration() { Provider = IndexProvider.lucene, Type = IndexType.fulltext }, IndexFor.Node); 
client.CreateIndex("Car", new IndexConfiguration() { Provider = IndexProvider.lucene, Type = IndexType.fulltext }, IndexFor.Node);

//create user
client.Create(new User() { Name = "Dovakiin", Job = "Dragon Slayer" });
client.Create(new User() { Name = "Ulfric stormcloak", Job = "Imperial Slayer" });

//create Car
client.Create(new Car() { Name = "Paarthurnax", Modal = 212 });

//User owns car relationship
client.CreateRelationship(userRef, new Owns_CarRelationship(CarRef)); 
```

这就是我现在卡住的地方。当我尝试按名称查找用户时，我的密码查询返回零结果：

```
 start u=node:User(Name="Dovakiin") return u; 
```

而且我不太明白为什么它清楚地返回零节点

```
start n=node(*) return n; 
```

显示所有节点。

索引时我是否遗漏了其他内容？或者这根本与索引无关？我不需要将每个节点添加到索引中吗？

我要做的就是选择具有给定属性的节点：`Name = "Dovakiin"`在这种情况下..我该如何选择这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T18:46:04.450

只是为了扩展 ulkas 的答案，如果您想启用自动索引并发现文档有点混乱（就像我第一次阅读它时所做的那样），这就是您设置它的方式。

假设您想自动索引一些节点属性；比如说“姓名”和“工作”。打开 /conf/neo4j.properties 文件，您应该会看到如下内容：

```
# Autoindexing

# Enable auto-indexing for nodes, default is false
#node_auto_indexing=true

# The node property keys to be auto-indexed, if enabled
#node_keys_indexable=name,age 
```

然后，您必须将文件编辑为以下内容：

```
# Autoindexing

# Enable auto-indexing for nodes, default is false
node_auto_indexing=true

# The node property keys to be auto-indexed, if enabled
node_keys_indexable=name,job 
```

完成此操作后，为了使自动索引生效，您必须重新启动 neo4j。此外，作为旁注，任何当前存在的节点都不会被自动索引，这意味着您必须重新创建它们。如果您不想从头开始，这里有一些关于如何更新它们的文档：http: [//docs.neo4j.org/chunked/milestone/auto-indexing.html#auto-indexing-update-removal](http://docs.neo4j.org/chunked/milestone/auto-indexing.html#auto-indexing-update-removal)（I'我从来没有尝试过）。

然后你可以开始寻找这样的节点：

```
start n=node:node_auto_index(name="Dovakiin"), or
start n=node:node_auto_index(job="Dragon Slayer") 
```

或者，像这样使用 C# 客户端：

```
Node<User> myNode = client.QueryIndex<User>("node_auto_index", IndexFor.Node, "name:Dovakiin").First();, or
Node<User> myNode = client.QueryIndex<User>("node_auto_index", IndexFor.Node, "job:Dragon Slayer").First(); 
```

只要在 /conf/neo4j.properties 文件中设置它，您也可以对关系执行相同的操作。您的操作方式与节点完全相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T14:41:27.203

您必须[手动将](http://docs.neo4j.org/chunked/milestone/indexing-add.html)节点添加到索引中，例如

`client.indexRef1.addToIndex(nodeRef, 'name', 'Dovakiin')` `client.indexRef2.addToIndex(nodeRef, 'job', 'Dragon Slayer')`

如果您希望将节点自动添加到索引中，neo4j 中还有一个[自动索引功能。](http://docs.neo4j.org/chunked/milestone/auto-indexing.html)

# c# - 从代码中设置 CellStyle

> ID：14358802
> 
> 赞同：1
> 
> 时间：2013-01-16T12:45:22.437
> 
> 标签：c#, wpf, datagrid, converter, datagridviewcellstyle

我想根据它的值更改单元格内容文本的字体和颜色，但我需要从代码中添加列。问题是表格显示了十六进制值，而不是对单元格值进行着色。

我在 XAML 资源中添加了：

```
<Style x:Key="MyStyle" TargetType="{x:Type TextBlock}">
        <Setter Property="Foreground" Value="{Binding TextColor}" />
</Style> 
```

以下代码行初始化列：

```
DataGridTextColumn column = new DataGridTextColumn();
                        column.Header = field.name;
                        column.Binding = new Binding(field.name)
                        {
                            Mode = BindingMode.TwoWay,
                            UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged,
                            Converter = new NameToBrushConverter()
                        };
                        column.ElementStyle = this.FindResource("MyStyle") as Style;
                        dgwDataMain.Columns.Add(column); 
```

我的自定义功能：

```
public class NameToBrushConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return ((string)value == "asd") ? Brushes.Red : Brushes.Black;
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return Binding.DoNothing;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:36:51.983

您可以使用`MultiValueConverter`.

例子：

```
DataGridTextColumn column = new DataGridTextColumn();
column.Header = "Name";
column.Binding = new Binding("Name")
{
      Mode = BindingMode.TwoWay,
      UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged                
};
column.ElementStyle = this.FindResource("MyStyle") as Style;
grid.Columns.Add(column);

List<Foo> _source = new List<Foo> 
{
        new Foo{ Name ="test1"},
        new Foo{ Name ="test2"},
        new Foo{ Name ="test3"}
};

grid.ItemsSource = _source; 
```

富类：

```
class Foo
{
   public string Name { get; set; }       
} 
```

样式 XAML：

```
<local:NameToBrushConverter x:Key="nameToBC" />

<Style x:Key="MyStyle" TargetType="{x:Type TextBlock}">
   <Setter Property="Foreground" >
            <Setter.Value>
                 <MultiBinding Converter="{StaticResource nameToBC}" >                       
                       <Binding Path="." />                      
                 </MultiBinding>
             </Setter.Value>
    </Setter>
</Style> 
```

多值转换器代码：

```
 class NameToBrushConverter : IMultiValueConverter
    {
        public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
        {
            Foo item = values[0] as Foo;
            if (item != null)
            {               
                if (item.Name == "test2")
                    return Brushes.Red;
                else
                    return Brushes.Black;
            }

            return Brushes.Black;
        }
        public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    } 
```

# javascript - 无法使用 Classic ASP 和 JAVAScript 生成 csv 文件

> ID：14358806
> 
> 赞同：0
> 
> 时间：2013-01-16T12:45:35.220
> 
> 标签：javascript, asp-classic

我编写了以下 asp 代码来生成一个 csv 文件：

```
<%@ Language=JScript %>

<%
Response.ContentType = "text/csv";

     var boCaseDetail = Server.CreateObject ("ADODB.Recordset");
var strCon = "DSN=FAS";
var adForwardOnly = 3;
var adLockReadOnly = 1;
var adCmdText = 1;

     var sSqlCaseDetail = "Select objid,id_number, case2address,case_reporter2contact, case_reporter2site, x_fault_id from table_case where id_number in (" + filterFID + ") " ;

     boCaseDetail.Open(sSqlCaseDetail, strCon, adForwardOnly, adLockReadOnly, adCmdText);

     while(!boCaseDetail.EOF)
{
         output = boCaseDetail("x_fault_id").value + " " + cstrDelim + boCaseDetail("id_number").value + cstrDelim + "\n";

         Response.Write (output);

         boCaseDetail.MoveNext();   
}  
boCaseDetail.Close();
}

%> 
```

上面的脚本在单击按钮时生成一个 asp 文件。当获取的记录数少于 200 时，它正在创建一个 asp 文件。但是当记录数超过 200 时，不会生成文件。相反，数据显示在 Web 浏览器中。

无论记录数如何，我都需要成功生成一个 csv 文件（而不是 .asp 文件）。怎么做到呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:42:21.207

尝试发送标头以告诉浏览器它是具有给定文件名的可下载文件：

```
<%
Response.ContentType = "text/csv";
Response.AddHeader "Content-Disposition", "attachment; filename=YourFileName.csv" 
```

# asp.net-mvc - 仅 ASP.Net MVC 或 HTML5 客户端

> ID：14358809
> 
> 赞同：0
> 
> 时间：2013-01-16T12:45:41.200
> 
> 标签：asp.net-mvc, html, kendo-ui

我最近使用 HTML5 和 KendoUI 套件开发了一个应用程序，我发现它的开发速度比使用 MVC 或 ASP.Net 快得多。

由于 HTML5 从供应商那里得到了如此多的支持，并且有了 PhoneGap 和 Windows 8 应用程序等工具和平台，我想知道会提出什么论据来宁愿选择 MVC 而不是 HTML5 客户端？

我只是想获得一些建设性的动机来支持和反对仅使用 HTML5 客户端，而不是使用 ASP.Net MVC 或任何其他服务器端技术来生成客户端 HTML。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T13:44:55.740

如果没有某种类型的服务器端数据处理，您将永远无法完成非常复杂的事情，除非您的应用程序只是微不足道的。如果选择我永远不会回到 ASP.Net，但 MVC4、Razor、EF5、Kendo 和 HTML5 就像涂了油的闪电一样。您可以根据具体情况选择重点，以选择最适合解决该生态系统中特定问题的位置。如果您愿意，您仍然可以非常依赖客户端。不过，适当架构的东西有它们的位置，我发现 MVC 模型给了我几乎任何我需要的灵活性。我真的不认为 MVC 会生成我的 HTML 客户端代码，而是作为一个促进者，这让我很好奇你以前的 MVC 项目是否可能因为过多的服务器端依赖而污染了你。但最终我们应该从问题中制定解决方案，不要试图用相同的解决方案来解决所有问题，因此您的查询可能完全符合要求。（我相信我什么都没说。）

# r - 从 lme 拟合中提取预测带

> ID：14358811
> 
> 赞同：25
> 
> 时间：2013-01-16T12:45:45.543
> 
> 标签：r, prediction, confidence-interval, mixed-models

我有以下型号

```
x  <- rep(seq(0, 100, by=1), 10)
y  <- 15 + 2*rnorm(1010, 10, 4)*x + rnorm(1010, 20, 100)
id <- NULL
for(i in 1:10){ id <- c(id, rep(i,101)) }
dtfr <- data.frame(x=x,y=y, id=id)
library(nlme)
with(dtfr, summary(     lme(y~x, random=~1+x|id, na.action=na.omit)))
model.mx <- with(dtfr, (lme(y~x, random=~1+x|id, na.action=na.omit)))
pd       <- predict( model.mx, newdata=data.frame(x=0:100), level=0)
with(dtfr, plot(x, y))
lines(0:100, predict(model.mx, newdata=data.frame(x=0:100), level=0), col="darkred", lwd=7) 
```

![在此处输入图像描述](../Images/a705f50c645c3ccfb4b606da8fed665d.png)

和我可以绘制平均人口反应`predict`。`level=0`如何从整个人口的 nlme 对象中提取和绘制 95% 置信区间/预测带？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-21T09:47:24.463

**警告：**在执行此操作之前，请阅读[有关 r-sig-mixed 模型的此线程](https://stat.ethz.ch/pipermail/r-sig-mixed-models/2010q2/003585.html)。解释结果预测带时要非常小心。

根据您的示例调整的[r-sig-mixed 模型常见问题解答：](http://bbolker.github.io/mixedmodels-misc/glmmFAQ.html#predictions-andor-confidence-or-prediction-intervals-on-predictions)

```
set.seed(42)
x <- rep(0:100,10)
y <- 15 + 2*rnorm(1010,10,4)*x + rnorm(1010,20,100)
id<-rep(1:10,each=101)

dtfr <- data.frame(x=x ,y=y, id=id)

library(nlme)

model.mx <- lme(y~x,random=~1+x|id,data=dtfr)

#create data.frame with new values for predictors
#more than one predictor is possible
new.dat <- data.frame(x=0:100)
#predict response
new.dat$pred <- predict(model.mx, newdata=new.dat,level=0)

#create design matrix
Designmat <- model.matrix(eval(eval(model.mx$call$fixed)[-2]), new.dat[-ncol(new.dat)])

#compute standard error for predictions
predvar <- diag(Designmat %*% model.mx$varFix %*% t(Designmat))
new.dat$SE <- sqrt(predvar) 
new.dat$SE2 <- sqrt(predvar+model.mx$sigma^2)

library(ggplot2) 
p1 <- ggplot(new.dat,aes(x=x,y=pred)) + 
geom_line() +
geom_ribbon(aes(ymin=pred-2*SE2,ymax=pred+2*SE2),alpha=0.2,fill="red") +
geom_ribbon(aes(ymin=pred-2*SE,ymax=pred+2*SE),alpha=0.2,fill="blue") +
geom_point(data=dtfr,aes(x=x,y=y)) +
scale_y_continuous("y")
p1 
```

![阴谋](../Images/ffa43f005a598d0c98b459e5deb4ca4d.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-18T09:02:30.137

很抱歉回到这么老的话题，但这可能会在这里发表评论：

> 如果某些软件包可以提供此功能，那就太好了

此功能包含在[ggeffects-package](http://strengejacke.github.io/ggeffects)中，当您使用时`type = "re"`（它将包括*随机效应方差*，而不仅仅是*残差方差*，但在这个特定示例中是相同的）。

```
library(nlme)
library(ggeffects)

x  <- rep(seq(0, 100, by = 1), 10)
y  <- 15 + 2 * rnorm(1010, 10, 4) * x + rnorm(1010, 20, 100)
id <- NULL
for (i in 1:10) {
  id <- c(id, rep(i, 101))
}
dtfr <- data.frame(x = x, y = y, id = id)
m <- lme(y ~ x,
         random =  ~ 1 + x | id,
         data = dtfr,
         na.action = na.omit)

ggpredict(m, "x") %>% plot(rawdata = T, dot.alpha = 0.2) 
```

![](../Images/03e8a63ec2191e2d4120c0125a260c30.png)

```
ggpredict(m, "x", type = "re") %>% plot(rawdata = T, dot.alpha = 0.2) 
```

![](../Images/aba611cc68354d3c558c703d411f4bdb.png)

^(由[reprex 包](https://reprex.tidyverse.org)（v0.3.0）于 2019 年 6 月 18 日创建)

# r - R CMD 检查中的错误：需要但不可用的包

> ID：14358814
> 
> 赞同：8
> 
> 时间：2013-01-16T12:46:01.043
> 
> 标签：r, packaging

我正在尝试创建一个包。这取决于几个包。我将导入添加到命名空间文件和描述文件中的 Depends。

我在[这里](https://stackoverflow.com/questions/10146348/r-package-dependencies)和[这里](https://stackoverflow.com/questions/6432968/error-with-r-cmd-check-because-of-package-dependency)找到了可能的解决方案，但这些都不起作用——我想是因为我在 CentOS 上。

这是我在屏幕上看到的：

```
[hadoop@localhost RProjects]$ sudo R CMD check TextPreProcess
* using log directory ‘/home/hadoop/RProjects/TextPreProcess.Rcheck’
* using R version 2.15.1 (2012-06-22)
* using platform: x86_64-redhat-linux-gnu (64-bit)
* using session charset: UTF-8
* checking for file ‘TextPreProcess/DESCRIPTION’ ... OK
* checking extension type ... Package
* this is package ‘TextPreProcess’ version ‘1.0’
* checking package namespace information ... OK
* checking package dependencies ... ERROR
Packages required but not available:
  ‘RWeka’ ‘Snowball’ ‘lsa’ ‘plyr’ ‘snowfall’ ‘tau’ ‘tm’

See the information on DESCRIPTION files in the chapter ‘Creating R
packages’ of the ‘Writing R Extensions’ manual. 
```

我经历了编写 R 扩展，但我无法获得很多关于如何解决我的问题的见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:20:30.087

它现在正在工作。

我所做的是：

1.  添加`~/R/x86_64-redhat-linux-gnu-library/2.15`到 .libPaths （那是我的 R 库所在的位置）
2.  分离 R 中的所有库
3.  重新启动 R 会话。（对于多个会话，关闭所有会话。）
4.  安装所需的软件包。
5.  检查命名空间文件中的导入和导出是否正确。
6.  检查描述文件中是否提供了必填字段。确保在“Depends”、“Imports”、“Suggests”和“Enhances”之间处理所有依赖关系。
7.  检查了它。`R CMD check <pkg>`. 建造它。`R CMD build <pkg>`. 安装它。`R CMD INSTALL <tarball>`.
8.  完毕。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-24T10:30:50.047

我遇到了同样的问题，因为**安装了软件包但针对不同的 R 版本**。

为了解决这个问题，我打开了旧的 R 版本（构建包的那个版本），并在该版本下安装了缺少的包，它解决了问题。

例如

```
# Version should match the version your package was built in
R.version
# 3.5.1

install.packages(c('stringr', 'lubridate', 'testthat')) 
```

### 尖端

*   如果您需要检查您的 R 版本，只需键入`R.version`
*   如果您需要切换 R 版本，请在 Windows 上启动 RStudio 时保持控制，或者在 Mac 上下载一个名为[RSwitch](https://rud.is/rswitch/)的非常简单的应用程序以立即在版本之间切换（您仍然需要重新启动 R 会话`.rs.restartR()`

# javascript - 字符串和标签本地化和全球化的最佳实践

> ID：14358817
> 
> 赞同：128
> 
> 时间：2013-01-16T12:46:05.320
> 
> 标签：javascript, localization, translation, client-side, globalization

我是一个拥有 20 多名开发人员的团队的成员。每个开发人员都在一个单独的模块上工作（大约 10 个模块）。在每个模块中，我们可能至少有 50 个 CRUD 表单，这意味着我们目前有近 500 个**添加按钮**、**保存按钮**、**编辑按钮**等。

然而，因为我们想要全球化我们的应用程序，我们需要能够在我们的应用程序中翻译文本。例如，在任何地方，对于法语用户来说， **add**这个词都应该变成**ajouter 。**

到目前为止，我们所做的是，对于 UI 或表示层中的每个视图，我们都有一个翻译键/值对的字典。然后在渲染视图时，我们使用这个字典翻译所需的文本和字符串。但是，通过这种方法，我们已经在 500 个字典中**添加了近 500 个内容。**这意味着我们违反了 DRY 原则。

另一方面，如果我们将常用字符串集中起来，比如将**add**放在一个地方，并要求开发人员在任何地方使用它，我们就会遇到不确定字符串是否已经在集中字典中定义的问题。

另一种选择可能是没有翻译词典并使用在线翻译服务，如谷歌翻译、必应翻译等。

我们遇到的另一个问题是一些开发人员在按时交付项目的压力下无法记住**翻译键**。例如，对于添加按钮的文本，一个开发人员使用了**add**而另一个开发人员使用了**new**等。

应用程序的字符串资源全球化和本地化的最佳实践或最著名的方法是什么？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-16T13:03:42.613

据我所知，有一个很好的库，叫做`localeplanet`JavaScript 中的本地化和国际化。此外，我认为它是原生的，并且不依赖于其他库（例如 jQuery）

这是图书馆的网站：[http ://www.localeplanet.com/](http://www.localeplanet.com/)

另外看看Mozilla的这篇文章，你可以找到非常好的客户端翻译方法和算法：http: [//blog.mozilla.org/webdev/2011/10/06/i18njs-internationalize-your-javascript-with-来自 json 和服务器的小帮助/](http://blog.mozilla.org/webdev/2011/10/06/i18njs-internationalize-your-javascript-with-a-little-help-from-json-and-the-server/)

所有这些文章/库的共同部分是它们使用一个`i18n`类和一个`get`方法（在某些方面还定义了一个较小的函数名称，如`_`）来检索/`key`转换`value`. 在我解释`key`要翻译的字符串的`value`意思和翻译的字符串的意思时。
然后，您只需要一个 JSON 文档来存储`key`'s 和`value`'s。

例如：

```
var _ = document.webL10n.get;
alert(_('test')); 
```

这里是 JSON：

```
{ test: "blah blah" } 
```

我相信使用当前流行的图书馆解决方案是一个好方法。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-01-28T05:56:56.557

> 当您面临要解决的问题时（坦率地说，现在谁不是？），我们计算机人通常采取的基本策略称为“分而治之”。它是这样的：
> 
> *   将特定问题概念化为一组较小的子问题。
> *   解决每个较小的问题。
> *   将结果组合成特定问题的解决方案。
> 
> 但“分而治之”并不是唯一可能的策略。我们还可以采取更通用的方法：
> 
> *   将特定问题概念化为更一般问题的特例。
> *   以某种方式解决一般问题。
> *   使一般问题的解决方案适应具体问题。
> 
> ***- 埃里克·利珀特***

我相信在 ASP.Net/C# 等服务器端语言中已经存在许多解决方案来解决这个问题。

我已经概述了问题的一些主要方面

*   **问题**：我们只需要加载所需语言的数据

    **解决方案**：为此，我们将数据保存到每种语言的单独文件中

前任。res.de.js, res.fr.js, res.en.js, res.js（默认语言）

*   问题：每个页面的资源文件应该分开，所以我们只得到我们需要的数据

    **解决方案**：我们可以使用一些已经存在的工具，例如 [https://github.com/rgrove/lazyload](https://github.com/rgrove/lazyload)

*   问题：我们需要一个键/值对结构来保存我们的数据

    **解决方案**：我建议使用 javascript 对象而不是字符串/字符串空气。我们可以从 IDE 的智能感知中受益

*   问题：一般成员应存储在公共文件中，所有页面都应访问它们

    **解决方案**：为此，我在 Web 应用程序的根目录中创建了一个名为 Global_Resources 的文件夹，并为每个子文件夹存储全局文件，我们将其命名为“Local_Resources”

*   问题：每个子系统/子文件夹/模块成员都应覆盖其范围内的 Global_Resources 成员

    **解决方案**：我考虑了每个文件

应用结构

> ```
> root/
>     Global_Resources/
>         default.js
>         default.fr.js
>     UserManagementSystem/
>         Local_Resources/
>             default.js
>             default.fr.js
>             createUser.js
>         Login.htm
>         CreateUser.htm 
> ```

文件对应的代码：

**Global_Resources/default.js**

```
var res = {
    Create : "Create",
    Update : "Save Changes",
    Delete : "Delete"
}; 
```

**Global_Resources/default.fr.js**

```
var res = {
    Create : "créer",
    Update : "Enregistrer les modifications",
    Delete : "effacer"
}; 
```

所需语言的资源文件应加载到从 Global_Resource 选择的页面上 - 这应该是所有页面上加载的第一个文件。

**用户管理系统/Local_Resources/default.js**

```
res.Name = "Name";
res.UserName = "UserName";
res.Password = "Password"; 
```

**UserManagementSystem/Local_Resources/default.fr.js**

```
res.Name = "nom";
res.UserName = "Nom d'utilisateur";
res.Password = "Mot de passe"; 
```

**UserManagementSystem/Local_Resources/createUser.js**

```
// Override res.Create on Global_Resources/default.js
res.Create = "Create User"; 
```

**UserManagementSystem/Local_Resources/createUser.fr.js**

```
// Override Global_Resources/default.fr.js
res.Create = "Créer un utilisateur"; 
```

**manager.js 文件**（这个文件应该最后加载）

```
res.lang = "fr";

var globalResourcePath = "Global_Resources";
var resourceFiles = [];

var currentFile = globalResourcePath + "\\default" + res.lang + ".js" ;

if(!IsFileExist(currentFile))
    currentFile = globalResourcePath + "\\default.js" ;
if(!IsFileExist(currentFile)) throw new Exception("File Not Found");

resourceFiles.push(currentFile);

// Push parent folder on folder into folder
foreach(var folder in parent folder of current page)
{
    currentFile = folder + "\\Local_Resource\\default." + res.lang + ".js";

    if(!IsExist(currentFile))
        currentFile = folder + "\\Local_Resource\\default.js";
    if(!IsExist(currentFile)) throw new Exception("File Not Found");

    resourceFiles.push(currentFile);
}

for(int i = 0; i < resourceFiles.length; i++) { Load.js(resourceFiles[i]); }

// Get current page name
var pageNameWithoutExtension = "SomePage";

currentFile = currentPageFolderPath + pageNameWithoutExtension + res.lang + ".js" ;

if(!IsExist(currentFile))
    currentFile = currentPageFolderPath + pageNameWithoutExtension + ".js" ;
if(!IsExist(currentFile)) throw new Exception("File Not Found"); 
```

希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-16T12:52:09.263

**jQuery.i18n**是一个轻量级的 jQuery 插件，用于在您的网页中实现国际化。它允许您将自定义资源字符串打包到“.properties”文件中，就像在 Java 资源包中一样。它根据提供的语言或浏览器报告的语言加载和解析资源包（.properties）。

要了解更多信息，请查看[如何使用 JQuery 国际化您的页面？](http://jqfaq.com/how-to-internationalize-your-pages-using-jquery/)

# javascript - html5 格式的电子邮件和 html5shiv：这些在电子邮件通讯中是否可行？

> ID：14358823
> 
> 赞同：0
> 
> 时间：2013-01-16T12:46:27.543
> 
> 标签：javascript, html, email, newsletter, html5shiv

假设一个网站提供了编写每月电子邮件通讯并将其发送给订阅者的功能。电子邮件内容本质上是 html。

**将内容迁移到 html5 的含义是什么？** 特别是，如果出现以下情况，大多数不合规的电子邮件查看器将如何处理 html5shiv 脚本：

1.  html5shiv 被引用为外部 javascript，
2.  html5shiv 包含在多部分 mime 电子邮件编码中，或者
3.  html5shiv 直接嵌入在脚本元素中？

或者，html5 是否还不能用作可发送电子邮件的格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:47:32.150

不，html5shiv 在电子邮件中不可行。html5shiv 是 JavaScript。JavaScript 在 HTML 格式的电子邮件中不可行。

我不知道有任何电子邮件客户端允许 JavaScript 执行（除了通过（已经修补的）安全漏洞）。

# android - Android CSS3 支持、webview 和渲染引擎

> ID：14358825
> 
> 赞同：2
> 
> 时间：2013-01-16T12:46:29.717
> 
> 标签：android, css, webview, webkit, opera

我在一个 android 应用程序中使用 WebView，并且我对早期 android 版本的 CSS3 支持有问题。

我以这个 css 类为例（应该显示一个绿色圆圈）：

```
.board {
  border-radius: 50%;
  width: 200px;
  height: 200px; 
  background: green;

} 
```

如果在 android 4.2 中运行它可以正常工作，但在 Android 2.2 中我没有得到圆形而是方形（如果没有 CSS3 支持，则如预期的那样）。

如果我在 Android 2.2 中启动 Opera 浏览器，它可以正常工作，但我需要它在 WebView 中运行我的 html。

所以，问题是：

*   无论如何将 Opera 引擎嵌入到我的 WebView 中，或者是否有任何由 Opera 导出的视图可以在我的应用程序中使用？
*   我是否需要将我的应用程序的可用性限制为 android 3.x 或 android 4.x？
*   我还有什么其他选择？

谢谢。

# java - 如何通过正则表达式检测奇数长度的01序列

> ID：14358826
> 
> 赞同：0
> 
> 时间：2013-01-16T12:46:32.930
> 
> 标签：java, regex, matcher

我想通过具有奇数长度的 01 正则表达式字符串进行匹配。例子：`"0","001","111","11111" etc.`

这个想法是奇数长度的序列是 0 或 1，后跟成对的 0 或 1。但我的正则表达式似乎不起作用。我做的：

```
String regex = "[0-1]{1}[[0-1]{2}]{0,}";
    String txt = "01";
    Pattern p = Pattern.compile(regex);
    Matcher m = p.matcher(txt);

        System.out.println(m.matches()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T12:50:53.150

尝试这个：

```
String regex = "[01]([01][01])*";
"00011".matches(regex) => true
"0001".matches(regex) => false 
```

# java - 如何在 Eclipse 的运行配置中将“作为 java 应用程序运行”作为快捷方式

> ID：14358832
> 
> 赞同：0
> 
> 时间：2013-01-16T12:46:56.100
> 
> 标签：java, eclipse

```
 import stanford.karel.*;
 public class MidpointFindingKarel extends SuperKarel 
{ 
     public void run()
   {
    move(); 
   }    
} 
```

这是我的示例代码。方法 run() 继承自 SuperKarel 类。我想要的只是将此代码和这样的代码作为Java应用程序运行。但是当我单击“运行方式”时，我在那里只看到“以Java小程序运行”。如何获得“以Java应用程序运行”选项那里'。我知道如何创建运行配置，但是当我这样做时，该配置仅适用于特定的 java 文件。如何运行这样的代码，而无需每次为新的 java 文件创建运行配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:48:47.040

您需要声明`main()`为

```
public static void main(String[] args) 
```

例如，您可能会将您的课程更改为

```
public class MidpointFindingKarel extends SuperKarel { 
  public void run() {
    move(); 
  }

  public static void main(String[] args) {
    MidpointFindingKarel mfk = new MidpointFindingKarel();
    mfk.run();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:50:26.037

为此，您需要一个

```
public static void main(String[] args) {
} 
```

你班上的方法。可能是 MidpointFindingKarel 被其他地方定义的主类使用。在这种情况下，搜索它并运行该类。

本质上，Eclipse 根据编辑器中具有焦点的当前类填充运行菜单。

一旦设置好运行配置，您当然可以简单地右键单击运行菜单下拉框并选择要执行的类（通常在工具栏的左上角）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:50:09.200

您需要在类中添加一个 main 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T12:53:34.377

Run as Java Application 仅适用于具有公共静态 main 方法的类。更改代码以添加 main 方法。您将找到运行方式的选项。

# mysql - MySQL更新零列

> ID：14358837
> 
> 赞同：1
> 
> 时间：2013-01-16T12:47:03.533
> 
> 标签：mysql

是否可以在 MySQL 更新查询中更新零列？

我想在选择此特定行时利用时间戳列的自动更新。有没有人有任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:49:44.247

所以你希望你的更新查询只更新时间戳列？只需自己更新，而不是依赖自动更新：

```
UPDATE mytable SET tscolumn = NOW() WHERE ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:49:28.203

试试类似的东西：

```
UPDATE myTable SET someField = someField WHERE id = myId 
```

所以数据值不会移动，自动时间戳会被更新。

正如 GaryG 所说，您也可以直接更新时间戳。

# ios - 如何保护应用内购买内容？

> ID：14358843
> 
> 赞同：0
> 
> 时间：2013-01-16T12:47:24.453
> 
> 标签：ios, xcode, in-app-purchase

> **可能重复：**
> [通过应用内购买解锁完整版本的安全方式](https://stackoverflow.com/questions/14138730/secure-way-to-unlock-full-version-via-in-app-purchase)

保护在应用内购买后下载的内容不被复制到另一台设备的推荐方法是什么？典型的过程似乎是将内容复制到“应用程序支持”文件夹并在 NSUserDefaults 中设置一个标志。这两者都可以由通过 Finder 或类似设备访问 iOS 设备的人进行更新。如果我存储交易收据，也可以复制。

我可以潜在地使用 restoreTransactions 功能来验证设备何时在线，但这需要用户输入他们的密码，因此它不是静默背景检查，如果设备离线，显然将无法工作。

我很想在下载内容时使用设备 ID 将内容绑定到设备，但 Apple 建议不要使用此功能。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:17:24.797

正如您所提到的，将其保存在中的状态`NSUserDefaults`很容易编辑，但是将状态保存在 KeyChain 中会使用户更难更改下载的标志状态。

我将所有 IAP 下载状态保存在 KeyChain 中，确保您不能只将密钥设置为 true `NSUserDefaults`。

在我们开发的游戏中，如果用户购买了游戏物品，我们还会检查服务器端（也包括收据检查）。

在阅读器中，我们通过一种基于名称和一些秘密内容的随机代码使 PDF 受密码保护；）

我的猜测是，这应该会让你不那么容易破解，但请记住，你也不能保持头脑清醒。但你绝对可以减慢它们的速度。

# android - Android - 经常用数据填充应用程序

> ID：14358844
> 
> 赞同：0
> 
> 时间：2013-01-16T12:47:26.730
> 
> 标签：android, xml

我必须创建一个应用程序，该应用程序显示一个类别列表，其中包含每个类别的产品。该应用程序的所有者使用它来通知客户他的产品，因此每周都会对产品进行更新。

现在我正在努力如何创建这个应用程序，因为有很多选项可以做到这一点，但我当然想把它做好。

所以我正在考虑做以下事情。1\. 创建一个简单的 Web 应用程序，所有者可以在其中管理他的产品并按照他的意愿添加/编辑/删除它们。进行更改后，他可以按下“发布”按钮，该按钮会创建一个 xml 文件。2.当应用程序启动并有互联网连接时，最新的xml将被下载到设备中，应用程序将列出xml中的类别、产品。将存储 xml，以便在没有可用互联网连接时读取数据。

这是一个很好的解决方法吗？或者也许创建一个网络服务是一个更好的主意？但是，用户应该始终连接到互联网。

欢迎一些好的建议:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:44:02.217

互联网连接应该随时可用，如果没有，它不应该是您需要解决的问题。但是，如果您想抓住这种情况，您将需要（或可以使用）XML 将最新数据保存到设备中，以防您的应用程序必须在没有互联网连接的情况下启动。

我会考虑一个 RESTful WebService，因为一旦你运行它就可以轻松地添加功能（当然这可能会变得很棘手）。这是您可以使用的教程：[http ://www.vogella.com/articles/REST/article.html](http://www.vogella.com/articles/REST/article.html)

# linux-device-driver - 并口的针脚多高

> ID：14358846
> 
> 赞同：0
> 
> 时间：2013-01-16T12:47:39.060
> 
> 标签：linux-device-driver

```
/* Necessary includes for drivers */
#include <linux/init.h>
//#include <linux/config.h>
#include <linux/module.h>
#include <linux/kernel.h>       /* printk() */
#include <linux/slab.h>         /* kmalloc() */
#include <linux/fs.h>           /* everything... */
#include <linux/errno.h>        /* error codes */
#include <linux/types.h>        /* size_t */
#include <linux/proc_fs.h>
#include <linux/fcntl.h>        /* O_ACCMODE */
#include <linux/ioport.h>
#include <asm/system.h>         /* cli(), *_flags */
#include <asm/uaccess.h>        /* copy_from/to_user */
#include <asm/io.h>             /* inb, outb */

MODULE_LICENSE("Dual BSD/GPL");
MODULE_AUTHOR("Nikunj");

/* Function declaration of parlelport.c */ 
int parlelport_open(struct inode *inode, struct file *filp); 
int parlelport_release(struct inode *inode, struct file *filp); 
ssize_t parlelport_read(struct file *filp, char *buf, size_t count, loff_t *f_pos); 
ssize_t parlelport_write(struct file *filp, char *buf, size_t count, loff_t *f_pos); 
void parlelport_exit(void);
int parlelport_init(void);

/* Structure that declares the common */
/* file access fcuntions */
struct file_operations parlelport_fops = { 
    read    : parlelport_read,
    write   : parlelport_write,
    open    : parlelport_open,
    release : parlelport_release
    };

/* Driver global variables */
/* Major number */
int parlelport_major = 61;

/* Control variable for memory */ 
/* reservation of the parallel port*/
int port;

module_init(parlelport_init);
module_exit(parlelport_exit);

int parlelport_init(void) 
{ 
    int result;

    /* Registering device */
    result = register_chrdev(parlelport_major, "parlelport", &parlelport_fops);
    if (result < 0) 
    { 
        printk("<1>parlelport: cannot obtain major number %d\n",parlelport_major); 
        return result; 
    } 

    /* Registering port */
    port = check_region(0x378, 1);
    if (port) 
    { 
        printk("<1>parlelport: cannot reserve 0x378\n"); 
        result = port; 
        goto fail;
    }

    request_region(0x378, 1, "parlelport");

    printk("<1>Inserting parlelport module\n"); 
    return 0;

    fail: 
    parlelport_exit(); 
    return result;
}

void parlelport_exit(void) 
{
    /* Make major number free! */
    unregister_chrdev(parlelport_major, "parlelport");

     /* Make port free! */ 
    if (!port) 
    { 
            release_region(0x378,1);
    }

    printk("<1>Removing parlelport module\n");
}

int parlelport_open(struct inode *inode, struct file *filp) 
{
    /* Success */
    return 0;
}
int parlelport_release(struct inode *inode, struct file *filp) 
{
    /* Success */
    return 0; 
}
ssize_t parlelport_read(struct file *filp, char *buf, size_t count, loff_t *f_pos) 
{

    /* Buffer to read the device */
    char parlelport_buffer;

    /* Reading port */
    parlelport_buffer = inb(0x378);

    /* We transfer data to user space */
    copy_to_user(buf,&parlelport_buffer,1); 

    /* We change the reading position as best suits */
    if (*f_pos == 0) 
    { 
        *f_pos+=1; 
        return 1; 
    } 
    else 
    { 
        return 0; 
    }
}
ssize_t parlelport_write( struct file *filp, char *buf, size_t count, loff_t *f_pos) 
{
    char *tmp;

    /* Buffer writing to the device */
    char parlelport_buffer;

    tmp=buf+count-1;
    copy_from_user(&parlelport_buffer,tmp,1);

    /* Writing to the port */
    outb(parlelport_buffer,0x378);

    return 1; 
} 
```

这是并行端口设备驱动程序的代码，这是我的第一个 c 代码。请帮我解决以下问题

我已成功编译代码并成功创建 .ko 文件并成功加载到 ubuntu 9.10 操作系统中，但你的引脚没有高低，所以请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:40:08.217

你如何检查答案？安装模块后执行
dmesg

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T13:12:47.200

实际上，您无法在 0x378 处获取区域。因为默认情况下系统将此分配给parport0。

执行 cat /proc/ioports，这样你会发现在 0x378 处有 parport0。您可以直接在该地址 (0x378) 上写入，而无需使用该检查和请求。

我的建议是不要直接采用复杂的形式。在写入功能中，只需写入 outb(0x378,1) 并检查（通过插入具有 LED 的硬件）数据引脚上的 LED 开/关。

# c++ - 在 qt windows 内绘图

> ID：14358847
> 
> 赞同：0
> 
> 时间：2013-01-16T12:47:39.787
> 
> 标签：c++, qt, qt4

我想在 QT 窗口中绘制一个颜色“框架”。所以我有

```
setFixedSize(WIDTH, HEIGHT); 
```

我想在宽度和高度内绘制一个红色（填充）边框。谁能帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:55:43.957

取决于几件事：

*   它是现有小部件周围的边框吗？如果它只是现有小部件周围的边框，则不要沿着自己绘制的路线走，使用[样式表](http://qt-project.org/doc/qt-4.8/stylesheet-reference.html)比绘制它要简单得多。

*   如果您当然需要自定义或非常特定的样式，那么您最好使用[绘画系统](http://doc.qt.digia.com/qt/paintsystem.html)来绘制它。我强烈建议您使用样式表，除非您确实需要详细信息。仅向小部件添加边框时，绘制系统可能有点笨拙。

# android - 来自服务的锁定屏幕

> ID：14358848
> 
> 赞同：1
> 
> 时间：2013-01-16T12:47:41.390
> 
> 标签：android

我想通过服务锁定屏幕，该服务将根据广播接收器的行为被调用，它已成功解锁活动，现在可以从服务锁定屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:13:47.970

如果您的应用程序包含已注册的`DeviceAdminReceiver`，并且用户已通过设置启用您的应用程序成为设备管理员，则您可以使用`DevicePolicyManager`和`lockNow()`锁定设备。

# asp.net-mvc - MVC 4 中的 ReportViewer 部分

> ID：14358850
> 
> 赞同：5
> 
> 时间：2013-01-16T12:47:46.980
> 
> 标签：asp.net-mvc, asp.net-mvc-4, reportviewer, ascx

我仍然不确定最好的方法。

我已经阅读了很多资源，但仍然没有接近可行的解决方案。

1.  我创建了一个部分 ASCX 文件。向其中添加了报告查看器，然后在我的 CSHTML 文件中呈现所述部分内容。这是我最近的一次。在那里我可以看到报告查看器、按钮等。但由于某种原因，数据从未显示。

2.  我已经尝试过 ASPX 页面，`IFrame`但这不是我想要的方式，关于使这个解决方案工作。

3.  直接加载 ASPX 页面。但我失去了我的`_Layout.cshtml`主页风格。

有些人建议更改 config / Global.asax 中的各种东西，而有些人说这甚至没有必要。

理想情况下，我希望将其作为页面的一部分。但是如果我保持我的主要布局，可以处理它是页面上唯一的东西。

我对旧语法/页面/非 MVC 的经验仅限于这个项目 - 试图让它工作。

我的数据通过组件设置链接。该连接在 aspx 页面中工作正常，作为单页或 iframe。但不是在 ascx 中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T17:56:24.223

ReportView 控件需要启用 ViewState。在 ASP.NET MVC 中，这样的概念不再存在。这意味着您不能在本机 ASP.NET MVC 视图或部分视图中使用此控件。您只能在经典 WebForm（而不是 ASP.NET MVC 视图）中使用它，并将此 WebForm 嵌入到当前 ASP.NET MVC 视图或部分视图中的 iframe 中。例如，您可以将报表呈现为图像并直接将其流式传输到响应，而无需使用此控件。这是一篇说明该技术的[博客文章。](http://weblogs.asp.net/rajbk/archive/2006/03/02/How-to-render-client-report-definition-files-_28002E00_rdlc_2900_-directly-to-the-Response-stream-without-preview.aspx)`<img>`因此，您可以有一个控制器操作，将报告生成为 JPEG 图像，然后使用标签从您的视图链接到此控制器操作。不幸的是，这只会生成报表的静态副本，用户无法与之交互。

您还可以查看[这篇博文](http://weblogs.asp.net/rajbk/archive/2010/05/11/running-asp-net-webforms-and-asp-net-mvc-side-by-side.aspx)，它说明了如何同时运行 ASP.NET MVC 和经典 WebForms。

# c# - 使用 xaml 的 wpf 用户控件数据绑定

> ID：14358856
> 
> 赞同：0
> 
> 时间：2013-01-16T12:47:55.460
> 
> 标签：c#, wpf, data-binding, user-controls

我有这样的 wfp 表格：

```
public partial class MediaPlayerControlMain : Window
{
    MediaPlayerMain MediaPlayerMain;

    public MediaPlayerControlMain()
    {
        MediaPlayerMain = new MediaPlayerMain();
        InitializeComponent();
    }
} 
```

我有使用 MediaPlayerMain 对象的用户控件（播放列表）。该用户控件具有：

```
public partial class PlayList : UserControl
{
    public MediaPlayerMain MediaPlayer
    {
        get { return (MediaPlayerMain)GetValue(MediaPlayerProperty); }
        set { SetValue(MediaPlayerProperty, value); }
    }

    public static readonly DependencyProperty MediaPlayerProperty =
        DependencyProperty.Register(
            "MediaPlayer", typeof(MediaPlayerMain), typeof(PlayList),
            new FrameworkPropertyMetadata()
        ); 
```

}

有没有办法只使用 xaml 设置 MediaPlayer 属性。我尝试使用“{Binding ElementName=MediaPlayerMain}”，但似乎 MediaPlayerMain 尚未初始化。虽然我在 InitializeComponent() 函数之前对其进行了初始化。我究竟做错了什么？。将此对象传递给我的用户控件的最佳选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:53:42.117

您需要在标记中命名您的根元素（Window/UserControl 本身）。IE：

```
<Window x:Name="mediaPlayer"
    ....>
    <TextBlock Text="{Binding SomeProperty,ElementName=mediaPlayer}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T13:11:02.767

```
public partial class MediaPlayerControlMain : Window,INotifyPropertyChanged
    {

        public MediaPlayerControlMain()
        {                
            InitializeComponent();
            MediaPlayerMain = new MediaPlayerMain();
        }
        private MediaPlayerMain mediaPlayerMain;

        public MediaPlayerMain MediaPlayerMain
        {
            get { return mediaPlayerMain; }
            set { mediaPlayerMain = value; Notify("MediaPlayerMain"); }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        private void Notify(string propName)
        {
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propName));

        }
    }

 "{Binding MediaPlayerMain RelativeSource={RelativeSource AncestorType=Window}}" 
```

问题是您试图绑定字段而不是属性。因为绑定源必须是属性而不是字段，因为**绑定系统使用反射并且只查找属性而不是字段**。我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T13:51:12.787

我没有看到您设置`DataContext`任何地方，并且我认为您`MediaPlayerMain`的 XAML 树中没有命名的对象

当您编写时`{Binding ElementName=MediaPlayerMain}`，您是在告诉 WPF 将属性设置为等于名为 Visual Tree 的 XAML 对象`MediaPlayerMain`

相反，您可能正在寻找的是绑定到名为 DataContext 的属性`MediaPlayerMain`，在这种情况下，您的绑定将如下所示：

```
<local:PlayList MediaPlayer="{Binding MediaPlayerMain}" /> 
```

但这将不起作用，除非将您`DataContext`设置为包含该属性的对象`MediaPlayerMain`，例如`this.DataContext = this`在 Window 的构造函数中设置。

作为替代方案，您可以`ElementName`在绑定中使用来告诉 WPF 在 Visual Tree 中而不是`DataContext`在`Window`.

```
<local:MediaPlayerControlMain x:Name="MainWindow" ...>
    <local:PlayList MediaPlayer="{Binding MediaPlayerMain, ElementName=MainWindow}" />
</local:MediaPlayerControlMain> 
```

这将使您的绑定`MediaPlayerMain`在名为 的 XAML 元素中查找属性，该元素`MainWindow`是您的`MediaPlayerControlMain`类。

如果您不熟悉 WPF 的 DataBinding，实际上我的博客上有一篇专门针对初学者的文章，可以帮助您更好地理解它是什么以及它是如何工作的：[您所说的“DataContext”是什么？](http://rachel53461.wordpress.com/2012/07/14/what-is-this-datacontext-you-speak-of/)

# c++ - C++：Asterisk 和 Ampersnd 一起使用

> ID：14358861
> 
> 赞同：-4
> 
> 时间：2013-01-16T12:48:08.160
> 
> 标签：c++, pointers

> **可能重复：**
> [对指针的引用](https://stackoverflow.com/questions/3128662/reference-to-a-pointer)

我正在浏览一些代码，然后查看`Foo*& bar`. 这要怎么解释？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:49:27.020

`bar`是对指向 的指针的引用`Foo`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T12:49:33.633

它是对指向 的指针的引用`Foo`。通常的用例是当您希望函数更改作为参数传递给它的指针时：

```
void foo(Foo*& bar)
{
  bar = something_else;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T12:51:17.283

从右到左阅读：

```
Foo*& bar

[bar] is a [reference] to a [pointer] to a [Foo] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T12:51:48.733

从右到左阅读这样的声明通常很有帮助：

```
Foo*& bar; 
```

*   `bar`
*   是参考`&`
*   指向一个指针`*`
*   到一个`Foo`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T12:50:04.167

对指针的引用，对 Foo 的引用。
可能用作函数参数？
可能是“输出参数”。

# html - 基本 HTML/CSS - 边距和显示行为

> ID：14358862
> 
> 赞同：0
> 
> 时间：2013-01-16T12:48:08.280
> 
> 标签：html, css, margin

我有一个关于 HTML/CSS 和某些元素的边距行为的基本问题。
为了说明我的观点，我创建了这个小提琴：http: [//jsfiddle.net/5VA5h/](http://jsfiddle.net/5VA5h/)

你看，我应用了某种“重置”并为所有`h1`.
在第一个示例中，`margin`from`h1`应用于盒子的外部，而在`#c`, where `h1`is set`display: inline;`中，它应用于盒子的内部。

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T12:58:40.137

在您的第一个示例中，`<h1>`作为块元素，上[边距正在折叠](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)（强调我的）：

> 在 CSS 中，两个或多个框（可能是或不是兄弟）的**相邻边距可以组合形成一个边距。**以这种方式组合的边距称为折叠边距，由此产生的组合边距称为折叠边距。

...然后：

> 两个边距相邻当且仅当：
> 
> *   两者都属于参与相同块格式化上下文的流入块级框
> *   没有线框，没有间隙，没有填充和没有边框将它们分开（请注意，某些零高度的线框（见 9.4.2）为此目的被忽略。）
> *   两者都属于垂直相邻的框边，即形成以下对之一：
>     *   **一个盒子的上边距和它的第一个流入孩子的上边距**
>     *   框的下边距和其下一个流入跟随兄弟的上边距
>     *   如果父级具有“自动”计算高度，则最后一个流入子级的下边距和其父级的下边距
>     *   没有建立新的块格式化上下文并且具有零计算的“最小高度”、零或“自动”计算的“高度”且没有流入子级的框的顶部和底部边距

第二个例子，`<h1>`作为内联元素，[垂直边距不生效](http://www.w3.org/TR/CSS2/box.html#margin-properties)：

> 'margin' 速记属性设置所有四个边的边距，而其他边距属性只设置它们各自的边。这些属性适用于所有元素，但**垂直边距不会对未替换的内联元素产生任何影响**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:49:56.367

具有 display:inline 的元素不使用 Margin-Top 和 Margin-Bottom；请参阅：[内联元素中的顶部边距](https://stackoverflow.com/questions/10324527/margin-top-in-inline-element)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:55:14.303

内联元素中的顶部和底部边距并不重要。在内联元素中，每个元素代表文本中的一个单词。

# installation - 使用 JScript 进行卸载脚本

> ID：14358863
> 
> 赞同：0
> 
> 时间：2013-01-16T12:48:09.513
> 
> 标签：installation, jscript, wsh, windows-scripting

我正在 VS2010 中构建安装程序，并希望在卸载后运行脚本（以删除许可证文件）。我发现 JScript 作为 Windows 7 的脚本语言，并实现了一个简单的脚本来删除目录（效果很好）：

```
var wshShell = WScript.CreateObject("WScript.Shell");

var result = wshShell.Popup("Remove license?", 0, "Remove license?", 4);

if (result == 6) {
    var license_dir = wshShell.ExpandEnvironmentStrings("%ProgramData%");

    license_dir += "\\<my product>";

    var fso;
    fso = new ActiveXObject("Scripting.FileSystemObject");

    if (fso.FolderExists(license_dir)) {
        fso.DeleteFolder(license_dir, true);
    } else {
        WScript.Echo(license_dir + " didn't exist. Nothing removed.");
    }
} 
```

我的问题是，这是一种有效且（更重要的是）可移植的方式吗？

# java - 为什么以下行不会阻止 EDT？

> ID：14358865
> 
> 赞同：-1
> 
> 时间：2013-01-16T12:48:20.427
> 
> 标签：java, multithreading, swing, jdbc, event-dispatch-thread

```
 public lyridisplay (java.awt.Frame parent, boolean modal) {
    super(parent, modal); 

    initComponents();//to create a JList

   /* folowing code inside  try preforms DB operations*/
   /*It will return array of  string s*/
       try {
            s = insert.select();
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(lyridisplay.class.getName()).log(Level.SEVERE, null, ex);
        } catch (SQLException ex) {
            Logger.getLogger(lyridisplay.class.getName()).log(Level.SEVERE, null, ex);
        }

    //now set the string s to JList

      jList1.setModel(new javax.swing.AbstractListModel() {
        String[] strings =s;
        public int getSize() { return strings.length; }
        public Object getElementAt(int i) { return strings[i]; }
    });

     } 
```

我认为上面的代码应该阻止`EDT`，因为在设置之前的数据库操作`JList`并且它运行。`EDT`但它没有。程序运行顺利。我之前做过类似的事情，导致被阻止`EDT`和冻结的程序。我执行了根据 SO users 的建议，在单独的线程中编写代码。为什么这段代码不会阻塞`EDT`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:33:01.780

假设 Swing GUI 对象是在[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)(EDT) 上构建的，那么查询肯定会在某个*不确定*的时间段内阻塞 EDT。如[*内存一致性属性*](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html#MemoryVisibility)中所述：

> 线程中的每个动作都*发生在该线程中的每个动作之前*，这些动作按程序的顺序出现在后面。

问题不在于理想条件下的时间有多*短*，而在于出现问题时时间可能会变得多*长。*[GUI 用户对 EDT活跃](http://docs.oracle.com/javase/tutorial/essential/concurrency/liveness.html)度非常敏感；[工作线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)是防止用户不满的良好保险。

# svn - svndumpfilter - 不支持的转储文件版本

> ID：14358869
> 
> 赞同：3
> 
> 时间：2013-01-16T12:48:44.107
> 
> 标签：svn, svnadmin, svndump, svndumpfilter

我'，试图将我的 SVN 存储库的一部分迁移到新位置。我转储了整个存储库，现在尝试过滤掉我感兴趣的文件夹：

```
$ svndumpfilter include sandwiches < dumpfile > filtered-dumpfile 
```

但后来我收到以下错误：

```
svndumpfilter: unsuported dump file version: 3 
```

我遇到了[相当古老的文章](http://creatingwithcode.com/howto/extracting-projects-from-shared-svn/)`--deltas`，说如果存储库转储是使用标志创建的，则转储过滤器不起作用。

**问题：**是否有可能使用`svndumpfilter`带有增量的转储文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:30:08.030

不，你不能。`svndumpfilter`无法使用 deltified 转储操作。

检查[SVNBook](http://svnbook.red-bean.com/en/1.7/svn.ref.svnadmin.c.dump.html)：

> 第二个有用的选项是 --deltas。这个选项会导致 svnadmin dump，而不是发出文件内容和属性列表的全文表示，而是只发出这些项目相对于它们以前版本的增量。这会减少（在某些情况下，极大地） svnadmin dump 创建的转储文件的大小。然而，使用这个选项也有一些缺点——创建 deltified 转储文件时 CPU 密集度更高，**不能由 svndumpfilter 操作**，并且在使用第三方工具（如 gzip 和bzip2.

# java - maven 程序集插件和配置文件

> ID：14358877
> 
> 赞同：4
> 
> 时间：2013-01-16T12:49:08.827
> 
> 标签：java, maven, maven-assembly-plugin, maven-resources-plugin

我有一个 Maven (3.0.4) 项目，其中处理一些外部资源，并使用配置文件中定义的一些属性过滤它们。

当我启动程序集插件（手动或挂接到阶段）时，maven-resource-plugin 似乎不认为命令行指定的配置文件处于活动状态。这样，与指定配置文件中定义的属性相关的标记不会被替换。

如果我定义了一个配置文件activeByDefault，即使命令行指定了另一个配置文件，它也被认为是活动的......

这是一个例子：

```
<plugin>
    <artifactId>maven-resources-plugin</artifactId>
    <version>2.5</version>
    <executions>
      <execution>
        <id>copy-script</id>
        <phase>process-resources</phase>
        <goals>
           <goal>copy-resources</goal>
        </goals>
        <configuration>
          <outputDirectory>${basedir}/target</outputDirectory>
          <resources>
            <resource>
              <directory>${basedir}/src/main/bash</directory>
              <filtering>true</filtering>
            </resource>
          </resources>
        </configuration>
      </execution>
    </executions>
</plugin>
...
<profiles>
  <profile>
    <id>staging</id>
    <properties>
      <remote.url>some_stag_value</remote.url>
    </properties>
  </profile>
  <profile>
    <id>prod</id>
    <properties>
      <remote.url>some_prod_value</remote.url>
    </properties>
  </profile>
</profiles> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:15:12.953

尝试使用以下方法停用配置文件`!`：

```
mvn groupId:artifactId:goal -P profile_you_want !default_profile 
```

# jpa - 一次选择现有和非现有的连接实体

> ID：14358879
> 
> 赞同：0
> 
> 时间：2013-01-16T12:49:13.073
> 
> 标签：jpa, jpql

我有一个连接表，看起来像这样。

```
EXCHANGE_RATE
------------------------------
ID                  BIGINT  PK
SOURCE_CURRENCY_ID  BIGINT  FK
TARGET_CURRENCY_ID  BIGINT  FK 
```

映射的 ExchangeRate.java

```
public class ExchangeRate {

    protected ExchangeRage() {
        this(null, null);
    }

    // for SELECT NEW
    public ExchangeRate(Currency sourceCurrency, Currency targetCurrency) {
        this.sourceCurrency = sourceCurrency;
        this.targetCurrency = targetCurrency;
    }

    @Id private Long id;
    @ManyToOne private Currency sourceCurrency;
    @ManyToOne private Currency targetCurrency;
} 
```

如何列出所有现有和不存在`ExchangeRate`的给定`sourceCurrency`？

例如，

1.  共有三种货币。A、B 和 C。
2.  已经有一个从 A 到 B 的 ExhangeRate

用下面的方法，如果`sourceCurrency`是`A`，

```
public List<ExchangeRate> listExchangeable(Currency sourceCurrency) {
    //
} 
```

如何获得以下列表？

```
ExchangeRate {
    id:             0
    sourceCurrency: A
    targetCurrency: B
},
ExchangeRate {
    id:             NULL
    sourceCurrency: A
    targetCurrency: C
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:16:58.310

必填查询

```
// get all exchange rates for a source currency
public List<ExchangeRate> listExchangeable(Currency sourceCurrency) {
  Query qry = em.createQuery("select r from ExchangeRate r where 
                                 r.sourceCurrency = :sourceCurrency");
  qry.setParameter("sourceCurrency", sourceCurrency);
  return qry.getResultList();
} 
```

对于给定 sourceCurrency 的非现有 ExchangeRates

```
Query qry = em.createQuery("select r from ExchangeRate r where 
                                 r.sourceCurrency != :sourceCurrency"); 
```

# iphone - 性能和同步：存储在 CoreData 中或作为数组保存在文件中

> ID：14358881
> 
> 赞同：0
> 
> 时间：2013-01-16T12:49:16.080
> 
> 标签：iphone, ios, performance, core-data, nsarray

我目前有一个应用程序，它通过将 NSArray 转换为 NSData 来存储它的数据，并将其写入这样的文件中：

```
NSData *theData = [NSKeyedArchiver archivedDataWithRootObject:theSaveArray];
        [theData writeToFile:[self filePath:@"/Time.dat"] atomically:YES]; 
```

典型的用户每天都会保存数据，这意味着数组会在短时间内变得非常大。

我正在考虑更新应用程序并使用 sqllite 将数据迁移到 CoreData，但我不确定它是否会有所改进（现在我看不到问题，但我有点担心未来会发生什么） .

数组填充一个 TableView。但是当数组有 1000 多个条目时，几年后会发生什么？那么 iCloud 同步呢？我知道 CoreData 可以轻松同步本地文件呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:53:05.740

是的，毫无疑问，Core Data 是要走的路。从编码的角度来看，这个问题似乎微不足道。如果您不切换到更强大的存储解决方案，您预期的问题确实**会实现。**

# android - 使用 Wifi 为非 root 设备连接 ADB

> ID：14358882
> 
> 赞同：43
> 
> 时间：2013-01-16T12:49:20.263
> 
> 标签：android, port, adb

我正在尝试在我的非 root android 设备上使用 WIFI 连接 ADB。目前我有 3 台 Android 设备，其中 2 台在 Android 4.0.4 上运行，1 台在 2.3 上运行。我的设备 IP 是 192.168.2.122、192.168.2.131、192.168.2.115

我已经在所有这些设备上启用了 USB 调试，并按照[此处列出的所有步骤进行操作](http://developer.android.com/tools/help/adb.html)

在命令行上，我做了以下

```
adb tcpip 5555
restarting in TCP mode port:5555 
adb connect 192.168.2.131 
```

我的问题出在我的一台设备上（Android 4.0.4） ADB 正在连接消息说

```
connected to 192.168.2.122:5555 
```

但是，当我尝试连接其他时，它说

```
unable to connect to 192.168.2.131:5555 
```

终端页面截图： ![终端页面截图：](../Images/788937b99962adf8405875c6e7631797.png)

连接设备上的终端图像： ![在此处输入图像描述](../Images/8761464d3715a4963c1fdca7e3193763.png)

未连接的设备上的终端图像： ![在此处输入图像描述](../Images/87a371cf159f0f33daeb35900cc2fb0f.png)

Stack Over Flow 上的许多帖子都说我需要为我的手机植根，但 ADB 连接的设备也没有植根。

设备未连接的问题可能是它们的端口没有被监听。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-05-04T10:28:44.933

我有同样的问题。

我首先通过 USB 连接了基于 Android4.0.3 的设备，并将 TCP/IP 端口设置为 5555

```
$ adb tcpip 5555 
```

之后，我断开了 USB 连接并通过 WiFi IP 连接到设备，它工作正常。

```
$ adb kill-server
$ adb connect 192.168.2.5 
* daemon not running. starting it now on port 5037 *
* daemon started successfully *
connected to 192.168.2.5:5555 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-06-25T03:54:43.800

步骤是正确的，只有一小部分不同：连接步骤必须在取出电缆后完成。重申完全按照以下步骤操作，它也适用于无根设备。我用几个无根设备测试了它，包括 Moto G、Nexus 1、Videocon 等。

1.  通过 USB 连接手机并输入：

    ```
    adb tcpip 5555 
    ```

2.  要查找移动 ip 类型：

    ```
    adb shell ip -f inet addr show wlan0 
    ```

ip 地址将显示在第二行，如下所示：

```
inet 192.168.1.233/24 brd 192.168.1.255 scope global wlan0 
```

其中 192.168.1.233 是您手机的 IP 地址。

3.  拔下 USB 数据线并键入：

    ```
    adb connect mobile-ip:5555 
    ```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-10-20T18:04:39.733

阅读此问题后，我决定创建一个易于使用的解决方案来解决此问题。您可以使用我开发的开源 IntelliJ 插件。[这](https://github.com/pedrovgs/AndroidWiFiADB)是代码，[这里](https://plugins.jetbrains.com/plugin/7983)是可以使用的插件。

用法很简单。这里有一个 gif：

[![在此处输入图像描述](../Images/83a8e60e3a769f43e54313859618f0f1.png)](https://i.stack.imgur.com/Fvy8z.gif)

请记住，使用 Android 2.X 的旧设备不支持此 Android 调试桥功能。这就是您无法连接屏幕截图中显示的设备的原因。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-17T05:29:57.323

它与 android 4.0.4 完美配合。但是，低于它不起作用。因此，您的问题的答案是将所有设备升级到 4.0.4。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-12-31T07:58:50.413

![终端页面截图](../Images/5e373cad356ec532ff946296aebbf9a1.png)

首先使用 USB 连接设备

然后应用命令....

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-11T09:34:57.237

在手机上打开 adb over wifi [![在此处输入图像描述](../Images/92aa2368944d39196cfa3aef0914dc3d.png)](https://i.stack.imgur.com/osv5R.jpg)

然后在您的桌面前创建文件。'connect.bat' 并粘贴此代码（您只需更改 sdk、端口和 ip）：

```
SET sdk=F:\Praca\sdk\platform-tools
SET port=5555
SET ip=192.168.1.101

cd /dd %sdk%
adb tcpip "%port%"
adb shell netcfg
adb connect  "%ip%:%port%"
echo connected by WiFi
pause
adb -s "%ip%:%port%" usb
echo disconnected
pause 
```

这是非常快速且简单的解决方案。玩得开心！

# python - Python：迭代中的语法分配错误

> ID：14358883
> 
> 赞同：0
> 
> 时间：2013-01-16T12:49:21.547
> 
> 标签：python, syntax, iteration, counter

我正在为 python 中的自学做一个简单的脚本，其中脚本依次找到第 1000 个素数，但出现语法错误。

```
x = 0
y = 2
counter = x
integer = y
while (counter>999):
      if (y%2 == 0 or y%3 == 0):
          y = y + 1
      else:(counter = counter + 1 and integer = integer + 1)
print (y) 
```

当涉及到 ELSE 运算符之后的 = 赋值时，我不明白为什么当这在其他迭代场景中有效时它不会让我在计数器和整数中都加一个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:57:08.567

在 python 中，您不能在表达式中进行赋值，以避免 and 之间的拼写`=`错误`==`。因此，您必须分两行执行此操作：

```
x = 0
y = 2
counter = x
integer = y
while (counter>999):
    if (y%2 == 0 or y%3 == 0):
        y = y + 1
    else:
        counter += 1
        integer += 1
print (y) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:50:13.010

尝试这个

```
 else:
      counter = counter + 1
      integer = integer + 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T13:05:37.257

在 python 中，对变量的赋值没有布尔值。并且意味着布尔运算符不这样做和这样做。

所以你需要拆分语句。

```
x = 0
y = 2
counter = x
integer = y
while (counter>999):
    if (y%2 == 0 or y%3 == 0):
        y = y + 1
    else:
        counter += 1
        integer += 1
print (y) 
```

# phpfox - phpFox 3 的访客模块

> ID：14358888
> 
> 赞同：0
> 
> 时间：2013-01-16T12:49:36.537
> 
> 标签：phpfox

我已经安装了 phpFox，我想添加到我的网站访客模块我该怎么做！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:15:44.437

首先，我认为您应该使您的问题更具体，否则其他人将很难帮助您。

据我了解，您想将访客模块添加到您的网站中。有两种可能的情况：

*   您已经拥有包含访客模块的软件包：您只需将该软件包解压缩到您的网站并转到 AdminCP/Extensions/Product/Import Product/ 然后选择访客产品并单击安装

*   如果你没有那个包，你需要联系你的包供应商来得到一个，然后按照我上面说的做

# java - slf4j 总是使用 NOPMDCAdapter

> ID：14358889
> 
> 赞同：5
> 
> 时间：2013-01-16T12:49:40.313
> 
> 标签：java, log4j, slf4j, mdc

我使用 slf4j 登录我的项目。我想使用 MDC 来记录用户 ID 参数。所以我检查了教程和文档，并制作了如下代码：

```
MDC.put("key", userId) 
```

userId 实际上是一个字符串。

我使用我常用的 log4j xml 和 appenders 等属性。添加 %X{key} 但没有任何反应。我根本看不到任何代替 %X{key} 的东西，但是 %-5p 或 %c 等其他参数效果很好。

所以我用调试来观察 MDC.put() 方法中发生了什么，并发现在 MDC 的初始化中使用了：

```
MDCAdapter mdcAdapter;
mdcAdapter = StaticMDCBinder.SINGLETON.getMDCA(); 
```

IDEA 中的调试表明它具有“Log4jMDCAdapter”，就像 MDCAdapter 的实现之一。但后来我看看StaticMDCBinder，有这样的代码：

```
public MDCAdapter getMDCA() {
   return new NOPMDCAdapter();
} 
```

那么 slf4j 怎么可能用适当的适配器初始化 MDC，例如 log4j ？？？我没明白。因为它总是使用 NOPMDCAdapter 它不能在 MDC 中存储任何东西，也不能在日志中显示它。我该如何解决？

在类路径中我有：

*   log4j-1.2.16.jar
*   slf4j-api-1.6.1.jar
*   slf4j-api-1.6.2.jar
*   slf4j-jcl-1.6.2.jar
*   slf4j-log4j12-1.6.2.jar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-06-18T13:16:09.053

SLF4J 的 MDC 只是一个门面，用于切换基于底层 logger 的 MDC 的适用实现。如果它没有从记录器中找到任何合适的 MDCAdapter，它将回退到 NO-OP 适配器。为此，它尝试查找名为 StaticMDCBinder [https://github.com/qos-ch/slf4j/blob/v_1.7.25/slf4j-api/src/main/java/org/slf4j/MDC.java#L99的类](https://github.com/qos-ch/slf4j/blob/v_1.7.25/slf4j-api/src/main/java/org/slf4j/MDC.java#L99)

因此，在这种情况下，如@Wizzard 的回答中所述，如果您的类路径中有两个 StaticMDCBinder 类，tomcat 将选择其中一个。

slf4j-simple 确实有一个 StaticMDCBinder，它默认为 NO-OP 适配器，因此删除 slf4j-simple jar 应该可以解决这里的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:57:35.593

问题解决了。它是项目中使用的其他库的超越依赖。即slf4j-jcl，我将部分添加到maven pom中，现在它工作正常。

# c++ - 在 MFC 中分配巨大的内存

> ID：14358891
> 
> 赞同：0
> 
> 时间：2013-01-16T12:49:52.497
> 
> 标签：c++, windows, visual-studio-2010, stl, mfc

有时我需要处理巨大的 PDF 文件，在这种情况下，我会在循环中使用一些 new 运算符，这是一个非常大的循环，以至于将使用超过 10 GB 的内存。众所周知，我必须使用一些WIN API函数来使用硬盘。但我不知道如何实现它。任何人都可以帮助我吗？

这是一个代码片段：

```
CMyObject gg_data;
for(__int64 i = 0; i < up_limit(__int64); ++i)
{
   //add new data to the PDF file
   CCAry pData = new CCAry("myData");
   gg_data.AddRef(pData);
}

//after the loop, save file and free memory so that no memory leaks occur...
//Caution: the "save" is a very expensive work, it will take several hours!!!
gg_data.save(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T13:00:40.137

[内存映射文件](http://msdn.microsoft.com/en-gb/library/ms810613.aspx)是您想要的。这会将文件映射到内存的“缓冲区”中，操作系统会为您管理它，以便您可以像处理大量 RAM 一样操作文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:00:26.767

如果您想使用特定于 Windows 的分配调用，您可能应该选择`VirtualAlloc()`. 但我猜想 using`new`已经在分配虚拟内存，因此 Windows 也应该处理对硬盘的分页。

如果您使用如此大量的内存，您可能需要增加硬盘上页面文件的大小。

# json - 将 Ajax JSON POST 方法绑定到 KnockoutJS Viewmodel

> ID：14358894
> 
> 赞同：2
> 
> 时间：2013-01-16T12:49:56.303
> 
> 标签：json, knockout.js

我想从 AJAX JSON 条目更新 KnockoutJS 视图模型。我不确定如何做到这一点。

这是我的代码：

```
 var CurrencyModel = function (Currencies) {
        var self = this;
        self.Currencies = ko.observableArray(Currencies);

        self.AddCurrency = function () {
            self.Currencies.push({
                CurrencyFrom: "",
                CurrencyTo: ""
            });
        };

        self.RemoveCurrency = function (Currency) {
            self.Currencies.remove(Currency);
        };

        self.Save = function (Form) {
            alert("Could Now Save: " + ko.utils.stringifyJson(self.Currencies));
        };

        $.ajax({
            url: "CurrencyConfiguration.aspx/GetConfiguredCurrencies",
            // Current Page, Method  
            data: '{}',
            // parameter map as JSON  
            type: "POST",
            // data has to be POSTed  
            contentType: "application/json; charset=utf-8",
            // posting JSON content      
            dataType: "JSON",
            // type of data is JSON (must be upper case!)  
            timeout: 10000,
            // AJAX timeout  
            success: function (Result) {
                //Need to Get method to Bind To CurrencyModel;
            },
            error: function (xhr, status) {
                alert(status + " - " + xhr.responseText);
            }
        });
    };

    $(document).ready(function () {
        var VM = new CurrencyModel();
        ko.applyBindings(VM);
    }) 
```

这是从服务器获取的 JSON 数据：

```
{
"d": [
    {
        "__type": "Finance.Tracntrace.Members_Only.DAL.DataModel.Currency.CurrencyConfigurationDM",
        "CurrencyFrom": "ZAR",
        "CurrencyTo": "USD"
    },
    {
        "__type": "Finance.Tracntrace.Members_Only.DAL.DataModel.Currency.CurrencyConfigurationDM",
        "CurrencyFrom": "USD",
        "CurrencyTo": "ZAR"
    }
]
} 
```

HTML：

```
 <table class="table table-striped">
            <thead>
                <tr>
                    <th>
                        Currency From
                    </th>
                    <th>
                        Currency To
                    </th>
                </tr>
            </thead>
            <tbody data-bind="foreach: Currencies">
                <tr>
                    <td data-bind="text: CurrencyFrom">
                    </td>
                     <td data-bind="text: CurrencyTo">
                    </td>
                </tr>
            </tbody>
        </table> 
```

Viewmodel 非常简单，我有一个货币 From 和一个要从表中添加和删除的货币。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:57:23.323

我会在这里做两件事。

首先，为 Currency 定义一个类。

```
var currency = function(data) {
  var self = this;
  self.CurrencyFrom = ko.observable(data.CurrencyFrom);
  self.CurrencyTo = ko.observable(data.CurrencyTo);
} 
```

之后，你的成功方法就变成了这样。

```
success: function(Result) {
   // use jQuery's $.map function to translate values
   // should be stored in .d property, according to your JSON
   var mappedCurrencies = 
     $.map(Result.d, 
           // Here, $.map will just new up a new currency,
           // using the constructor argument to set fields
           function(item){ return new currency(item);});

   // Finally, set the currencies.  VM should update automatically.
   self.Currencies(mappedCurrencies);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:03:37.757

我建议您将视图模型和数据上下文分开。为您的 ajax 请求开设课程是一种更好的做法

我假设您需要将数组“self.Currencies”与从服务接收的数据绑定，因此您只需在成功函数上执行此操作：

```
 success: function (Result) {
            ko.utils.arrayPushAll(self.Currencies, Result);
        } 
```

# php - 在列出文件时使用忽略数组 RecursiveIterator

> ID：14358895
> 
> 赞同：0
> 
> 时间：2013-01-16T12:50:03.013
> 
> 标签：php, recursion, iterator

我正在使用此函数以递归方式获取文件列表，并且它可以工作。

但是，如何修改它以使其忽略`$ignore`数组中定义的文件和文件夹？

```
 function directoryScan($path = 'files', $onlyfiles = true, $fullpath = false)
  {
    $dir = '';
    $ignore = array('.','..','cgi-bin','.DS_STORE','thumb.db','.gitignore', 'folder_to_be_ignored');

    if (isset($path) && is_readable($path))
    {
      $dlist = Array();
      $dir = realpath($path);

      if ($onlyfiles)
      {
        $objects = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($dir));
      }
      else
      {
        $objects = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($dir), RecursiveIteratorIterator::SELF_FIRST);
      }

      foreach($objects as $entry => $object)
      {
        if (!$fullpath)
        {
          $entry = str_replace($dir, '', $entry);
          $entry = $path . $entry;
        }

        $dlist[] = $entry;
      }

      vdebug($dlist);
      return $dlist;
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:01:46.997

```
 foreach($objects as $entry => $object)
  {
    if (!in_array($entry, $ignore)
    {
      if (!$fullpath)
      {
        $entry = str_replace($dir, '', $entry);
        $entry = $path . $entry;
      }

      $dlist[] = $entry;
    }
  } 
```

# java - 用改变 StopX 和 StopY 的位图画线

> ID：14358901
> 
> 赞同：0
> 
> 时间：2013-01-16T12:50:13.553
> 
> 标签：java, android, matrix

我正在开发一个指南针应用程序，我想在其中制作一个具有良好用户界面的指南针，特别是在指南针指针显示为良好位图的地方。我已经很好地实现了功能，并且工作正常，但是针头有问题。我想将位图设置为一条线并独立旋转它。位图对象有一个参数可以更改**Line**`n`对象中给定的 stopX 和 StopY 参数。

 **您能提出解决方案或替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:04:36.997

据我了解，您想根据指南针方向旋转位图吗？如果是这种情况，你应该看看我的 Thread 帮助我解决了这个问题：[Android rotate bitmap around center without resizing](https://stackoverflow.com/questions/11192757/android-rotate-bitmap-around-center-without-resizing)

我希望这有帮助。**

# azure - 对于 Azure Worker Roles，cscfg 文件和 App.config 文件如何相互关联？

> ID：14358903
> 
> 赞同：14
> 
> 时间：2013-01-16T12:50:15.913
> 
> 标签：azure, configuration, azure-worker-roles

在“本地”世界中，当创建像 Windows 服务这样的应用程序时，我通常会使用 App.config 文件来存储有关应用程序的各种配置信息，从数据库连接字符串到 WCF 端点信息。

在 Azure Worker Role 世界中，我现在看到了 .cscfg 文件，据说这些文件包含“针对该角色”的信息。

我不明白这些文件是为了补充应用程序的配置，还是完全替换 App.config 文件。这两个文件如何配置 Azure Worker 角色？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-16T13:29:19.797

**非常基本的解释**：

从概念上讲，它们是相同的。在传统应用程序中，您使用 app.config 文件来定义与应用程序相关的各种设置（在 appSettings 部分中）。同样，您使用 cscfg 文件来定义与您的云应用程序相关的各种设置（在 ConfigurationSettings 部分）。与 app.config 文件一样，您可以在 cscfg 文件中定义其他内容（例如，云应用程序的实例数）。

如果您愿意，您仍然可以在 app.config 文件中定义一些设置，但要记住的一件事是 app.config 文件被“打包”并部署，为了更改设置，您必须重新打包您的应用程序并部署它。但是，您可以使用门户或服务管理 API 即时更改 cscfg 文件中的设置，而无需重新打包和重新部署应用程序。例如，考虑在设置文件中定义数据库连接字符串的场景。如果您在 app.config 中指定，为了更改它，您需要在 app.config 文件中进行更改 --> 构建应用程序 --> 发布应用程序。对于 cscfg 文件，您只需在门户中更改此值。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-16T13:34:08.930

对于 Web/Worker 角色，传统的配置文件 (app/web.config) 将像在本地部署中一样继续工作。但重要的是要知道此文件包含在服务包中，这意味着它是部署的一部分。

这意味着您无法在不重新部署应用程序的情况下更改 app/web.config 中的设置。另一方面，ServiceConfiguration.cscfg 是在云服务部署槽级别定义的，位于实际服务包旁边。这意味着您可以更改此配置文件，而无需重新部署您的应用程序。这些设置也可以通过调用`RoleEnvironment.GetConfigurationSettingValue`（类似于`ConfigurationManager.AppSettings`）从您的应用程序中访问。

如果您考虑构建一个可在本地和 Windows Azure 中运行的应用程序，请考虑使用[Microsoft.WindowsAzure.ConfigurationManager 包](http://nuget.org/packages/Microsoft.WindowsAzure.ConfigurationManager)。它会根据应用程序的运行位置自动选择 cscfg 或 app/web.config。

提示：通过订阅 RoleEnvironment.Changing/Changed 事件，您可以拦截对此配置文件的更改。例如，您可以处理这个以更新代码中的 web.config（[在此处解释](http://blogs.msdn.com/b/vbertocci/archive/2011/05/31/edit-and-apply-new-wif-s-config-settings-in-your-windows-azure-webrole-without-redeploying.aspx)）。

# php - PHP：比较 NULL 和 FALSE - 转换为 ~Negative Infinity

> ID：14358904
> 
> 赞同：3
> 
> 时间：2013-01-16T12:50:19.580
> 
> 标签：php, c, comparison, programming-pearls

我最近偶然发现了一个充其量似乎是一个错误的情况。在比较中使用时，两者`null`和`false`似乎都被评估为较低但不等于负无穷大。

我目前的测试用例：

```
var_dump(
    PHP_OS,
    PHP_VERSION,
    null == 0,                        # true
    false == 0,                       # true
    INF==INF,                         # true
    (-1*INF) == (-1*INF),             # true
    (-1*INF) < (-1*INF),              # false!
    (-1*INF) > (-1*INF),              # false!
    'Insane In The Membrane',
    null == (-1*INF),                 # false!?
    false == (-1*INF),                # false!?
    null  < (-1*INF),                 # true!
    false < (-1*INF)                  # true!
); 
```

这是在各种[PHP 版本](http://sandbox.onlinephpfunctions.com/code/97fbf369d1b8525473125566443ee7dcd5b3981a)和我可以访问的一些 Windows 机器上运行的。所有人都有惊人的相同结果。

* * *

忽略前两个调试转储，如果您是一位经验丰富的 PHP 开发人员，接下来的 6 个结果是您所期望的。前两个是由于[类型杂耍](http://www.php.net/manual/en/language.types.type-juggling.php)，后四个是由于[PHP](http://php.net/manual/en/math.constants.php)和[math](http://www.wolframalpha.com/input/?i=infinity%20=%20infinity,%20-infinity%20=%20-infinity,%20-infinity%20%3C%20-infinity,%20-infinity%20%3E%20-infinity)。

* * *

现在最后四个是困扰我的地方。

我不确定低于负无穷大的东西在数学中是否*有效。*

更奇怪的是前两个和后两个比较的组合。不知何故，相同类型的杂耍算法使其有效：

```
var_dump(
    'Insane In The Membrane (Redux)',
    (null  == 0) && (null  < (-1*INF)),     # true
    (false == 0) && (false < (-1*INF))      # true
); 
```

如果有人可以就这些类型转换如何以如此不同的方式进行评估以及**为什么**将不胜感激提供任何见解。

* * *

PS[我](http://www.whathaveyoutried.com)[一次又一次](https://stackoverflow.com/search?q=is:question%20%5Bphp%5D%20false%20compare)[地](https://stackoverflow.com/search?q=is:question%20%5Bphp%5D%20null%20compare)尝试[搜索](https://stackoverflow.com/search?q=is:question%20%5Bphp%5D%20infinity)SO ，[PHP手册](http://php.net/manual/en/language.types.null.php)甚至[PHP错误跟踪器](https://bugs.php.net/search.php?cmd=display&search_for=infinity)，都无济于事。我尝试查看 C 源代码以确定使该代码以它的方式工作的点点滴滴。还是没有骰子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:27:08.270

我昨天刚在看这个。我们将冒险查看 PHP 手册并查看比较运算符页面：

[http://php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)

那里有一个很棒的图表，它解释了比较不同类型的对象时会发生什么，这是它的列之一：

```
bool or null    anything    Convert to bool, FALSE < TRUE 
```

因此，null 被强制转换为 false，任何非零数都被强制转换为 true。[来源](http://php.net/manual/en/language.types.boolean.php) 而且，如您所见，FALSE < TRUE。这就是为什么你会出现所谓的疯狂行为 - 至于为什么会出现这种情况，可能是因为 C 的类似行为。（但是 C 永远不会让你在打字系统上玩得这么快又松！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T13:33:04.780

也许这会有所帮助：

[http://gynvael.coldwind.pl/?id=492](http://gynvael.coldwind.pl/?id=492)

它主要涵盖 == 运算符，但也有一些关于一般比较如何工作的信息和指针。

# java - 从类名中获取类成员

> ID：14358910
> 
> 赞同：0
> 
> 时间：2013-01-16T12:50:27.520
> 
> 标签：java, reflection

我有一个类名（作为 a `String`），我想获取所有成员及其类型。我知道我需要使用反射，但是如何？

例如，如果我有

```
class MyClass {
    Integer a;
    String b;
} 
```

如何获取 and 的类型和`a`名称`b`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T13:01:17.390

如果 jvm 已经加载了类，可以使用 Class 的静态方法 Class.forName(String className); 它会为您返回反射对象的句柄。

你会这样做：

```
//get class reflections object method 1
Class aClassHandle = Class.forName("MyClass");

//get class reflections object method 2(preferred)
Class aClassHandle = MyClass.class;

//get a class reflections object method 3: from an instance of the class
MyClass aClassInstance = new MyClass(...);
Class aClassHandle = aClassInstance.getClass();

//get public class variables from classHandle
Field[] fields = aClassHandle.getFields();

//get all variables of a class whether they are public or not. (may throw security exception)
Field[] fields = aClassHandle.getDeclaredFields();

//get public class methods from classHandle
Method[] methods = aClassHandle.getMethods();

//get all methods of a class whether they are public or not. (may throw security exception)
Method[] methods = aClassHandle.getDeclaredMethods();

//get public class constructors from classHandle
Constructor[] constructors = aClassHandle.getConstructors();

//get all constructors of a class whether they are public or not. (may throw security exception)
Constructor[] constructors = aClassHandle.getDeclaredConstructors(); 
```

要从 MyClass 中获取名为 b 的变量，可以这样做。

```
Class classHandle = Class.forName("MyClass");
Field b = classHandle.getDeclaredField("b"); 
```

如果 b 是整数类型，我会得到它的值。

```
int bValue = (Integer)b.get(classInstance);//if its an instance variable` 
```

或者

```
int bValue = (Integer)b.get(null);//if its a static variable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:56:53.917

首先获取类：

```
Class clazz=ClassforName("NameOfTheClass") 
```

比询问所有其他信息 [Class API](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html)

# c# - 在 DataGridView 中手动添加行

> ID：14358913
> 
> 赞同：0
> 
> 时间：2013-01-16T12:50:37.533
> 
> 标签：c#, datagridview

我想测试 DataGridView 中的行颜色变化，所以我编写了该代码：

```
dataGridView1.Rows.Add(new object[] { "Uno", "No" });
dataGridView1.Rows.Add(new object[] { "Due", "No" });
dataGridView1.Rows.Add(new object[] { "Tre", "Yes" });
dataGridView1.Rows.Add(new object[] { "Quattro", "No" });
dataGridView1.Rows.Add(new object[] { "Cinque", "Yes" });

private void button1_Click(object sender, EventArgs e)
    {            
        foreach (DataGridViewRow row in dataGridView1.Rows)
        {
            if (row.Cells[1].Value.ToString() == "Yes")
                row.DefaultCellStyle.ForeColor = Color.Red;
            else
                row.DefaultCellStyle.ForeColor = Color.Green;
        }
    } 
```

所以，有五行两列。但是当我试图改变颜色时，它给了我一个 NullReference 异常，说 row.Cells[1] 值为空。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:55:59.077

通过更改您的颜色，`rows`您`DataGridView`可以在[DataGridView.CellFormatting 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellformatting.aspx)中执行此操作，并且您的主要问题是使用[String.IsNullOrWhiteSpace 方法](http://msdn.microsoft.com/en-us/library/system.string.isnullorwhitespace.aspx)。

```
private void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    if (e.ColumnIndex == 1)
    {
        if (string.IsNullOrEmpty(dataGridView1[e.ColumnIndex, e.RowIndex].EditedFormattedValue.ToString()))
        {
            if (dataGridView1[e.ColumnIndex, e.RowIndex].EditedFormattedValue.ToString() == "Yes")
            {
                dataGridView1.Rows[e.RowIndex].DefaultCellStyle.ForeColor = Color.Red;
            }
            else
            {
                dataGridView1.Rows[e.RowIndex].DefaultCellStyle.ForeColor = Color.Green;
            }
        }
        else
            dataGridView1.Rows[e.RowIndex].DefaultCellStyle.ForeColor = Color.Green;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:22:26.363

尝试使用 check row.IsNewRow，例如

```
foreach (DataGridViewRow row in dataGridView1.Rows)
{
    if (row.IsNewRow)
      continue;
    if (row.Cells[1].Value.ToString() == "Yes")
      row.DefaultCellStyle.ForeColor = Color.Red;
    else
      row.DefaultCellStyle.ForeColor = Color.Green;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:58:11.463

~~删除 if 中的“toString()”，它正在工作。值正在返回一个字符串；）~~

更新：使用这个。它将对象转换为字符串

```
 if ((string)row.Cells[1].Value == "Yes")
                row.DefaultCellStyle.ForeColor = Color.Red;
            else
                row.DefaultCellStyle.ForeColor = Color.Green; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T12:58:38.080

我认为您的方法的问题是，一旦将行连接到网格，您就无法更改行的设计。

但是要实现您想要的，您可以使用 RowPrePaint 事件。

即来自我的一个应用程序：

```
private void tSEventsDataGridView_RowPrePaint(object sender, DataGridViewRowPrePaintEventArgs e)
{
    if (e.RowIndex >= 0)
    {
        //create new CellStyle
        DataGridViewCellStyle cellStyle = new DataGridViewCellStyle();

        //if we have a value and that value is greater than the MaximumHoursWarning setting
        object cellValue = tSEventsDataGridView[eventTimeDataGridViewTextBoxColumn.Index, e.RowIndex].Value;
        if (cellValue is double
            && (double) cellValue > Timesheets.Properties.Settings.Default.MaximumHoursWarning)
            cellStyle.BackColor = Color.FromArgb(255, 220, 220);  //change the color to light red
        else if (e.RowIndex % 2 == 0)
            cellStyle.BackColor = Color.FromArgb(240, 240, 240);          //else keep the alternating background
        else
            cellStyle.BackColor = Color.White;

        //set the CellStyle for this row.
        tSEventsDataGridView.Rows[e.RowIndex].DefaultCellStyle = cellStyle;
    }
} 
```

# php - 需要帮助在 PHP 中创建通用“getter”函数

> ID：14358915
> 
> 赞同：0
> 
> 时间：2013-01-16T12:50:42.043
> 
> 标签：php, function, pdo

我目前正在尝试创建一个函数，我可以在其中控制哪些字段和哪些值被拉取。这是我的想法，但它不起作用。我没有收到错误，它返回一个空数组。

```
public function test ($field, $id) {
  $sql = $this->con->prepare("SELECT ? FROM Content WHERE id=?");
  $sql->bindParam(1, $field);
  $sql->bindParam(2, $id);
  $sql->execute();

  while ($row = $sql->fetch()) {
    echo $row;
  }
} 
```

我不确定“SELECT ?...”部分我不是 100% 确定这是正确的方法。基本想法是我可以在任何地方拨打电话，例如：

`< ?php $obj = new handler; $obj->test($_GET['Title'], $_GET['id']); ?>`这将使用正确的 id 回显标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:56:46.867

准备好的语句的工作方式是准备好查询，然后发送字段的数据。因为第一个'？指无法准备的查询的实际部分。解决方法：a）获取整行并仅返回您需要的字段

```
$this->con->prepare("SELECT * FROM Content WHERE id=?");
//.......
return $row->$field; 
```

b) 将字段 raw 插入到查询中（尽管您可以使用引号）

```
$this->con->prepare("SELECT `{$field}` FROM Content WHERE id=?"); 
```

此外，如果您打算按照您描述的方式使用它，您可能会对数据库进行大量重复调用

# image - 在灰度 jpg 图像上使用 CUDA 和 OpenCV 应用 Sobel 边缘检测

> ID：14358916
> 
> 赞同：3
> 
> 时间：2013-01-16T12:50:41.857
> 
> 标签：image, opencv, cuda

这个问题之前已经被问过，但是提问者没有提供足够的信息并且没有回答，我对这个程序很好奇。

[**原始问题链接**](https://stackoverflow.com/questions/11091274/sobel-filter-in-x-direction-in-cuda)

我正在尝试使用opencv和cuda库进行sobel边缘检测，X方向的sobel内核是

```
-1 0 1   
-2 0 2  
-1 0 1 
```

我的项目中有 3 个文件

```
main.cpp
CudaKernel.cu
CudaKernel.h 
```

**主文件**

```
#include <stdlib.h>
#include <iostream>
#include <string.h>
#include <Windows.h>
#include <opencv2\core\core.hpp>
#include <opencv2\highgui\highgui.hpp>
#include <opencv2\gpu\gpu.hpp>
#include <cuda_runtime.h>
#include <cuda_gl_interop.h>
#include "CudaKernel.h"

using namespace cv;
using namespace std;

int main(int argc, char** argv) 
{
    IplImage* image;

    try
    {
        image = cvLoadImage("4555472_460s.jpg", CV_LOAD_IMAGE_GRAYSCALE);
        gpu::DeviceInfo info = gpu::getDevice();
        cout << info.name() << endl;
        cout << "Stream Processor : "<< info.multiProcessorCount() << endl;
        cout << "Total Graphic Memory :" << info.totalMemory()/1048576 << " MB" << endl; 
    }
    catch (const cv::Exception* ex)
    {
        cout << "Error: " << ex->what() << endl;
    }
    if(!image )
        {
             cout << "Could not open or find the image" << std::endl ;
             return -1;
        }

    IplImage* image2=cvCreateImage(cvGetSize(image),IPL_DEPTH_32F,image->nChannels);
    IplImage* image3=cvCreateImage(cvGetSize(image),IPL_DEPTH_32F,image->nChannels);

    unsigned char * pseudo_input=(unsigned char *)image->imageData;
    float *output=(float*)image2->imageData;
    float *input=(float*)image3->imageData;
    int s=image->widthStep/sizeof(float);
        for(int w=0;w<=(image->height);w++)
            for(int h=0;h<(image->width*image->nChannels);h++)
            {
                input[w*s+h]= pseudo_input[w*s+h];
            }

    Pixel *fagget  = (unsigned char*) image->imageData;
    kernelcall(input, output, image->width,image->height, image->widthStep);

//  cv::namedWindow( "Display window", CV_WINDOW_AUTOSIZE );// Create a window for display.
    cvShowImage( "Original Image", image ); // Show our image inside it.
    cvShowImage("Sobeled Image", image2);
    waitKey(0); // Wait for a keystroke in the window
    return 0;

} 
```

**CudaKernel.cu**

```
#include<cuda.h>
#include<iostream>
#include "CudaKernel.h"
using namespace std;
#define CudaSafeCall( err ) __cudaSafeCall( err, __FILE__, __LINE__ )
#define CudaCheckError()    __cudaCheckError( __FILE__, __LINE__ )
#define checkCudaErrors(err) __checkCudaErrors (err, __FILE__, __LINE__)

texture <float,2,cudaReadModeElementType> tex1;
texture<unsigned char, 2> tex;
static cudaArray *array = NULL;
static cudaArray *cuArray = NULL;

//Kernel for x direction sobel
__global__ void implement_x_sobel(float* garbage,float* output,int width,int height,int widthStep)
{
    int x=blockIdx.x*blockDim.x+threadIdx.x;
    int y=blockIdx.y*blockDim.y+threadIdx.y;

    float output_value=((0*tex2D(tex1,x,y))+(2*tex2D(tex1,x+1,y))+(-2*tex2D(tex1,x-  1,y))+(0*tex2D(tex1,x,y+1))+(1*tex2D(tex1,x+1,y+1))+(-1*tex2D(tex1,x-1,y+1))+  (1*tex2D(tex1,x+1,y-1))+(0*tex2D(tex1,x,y-1))+(-1*tex2D(tex1,x-1,y-1)));
    output[y*widthStep+x]=output_value;
}

inline void __checkCudaErrors( cudaError err, const char *file, const int line )
{
    if( cudaSuccess != err) {
        fprintf(stderr, "%s(%i) : CUDA Runtime API error %d: %s.\n",
                file, line, (int)err, cudaGetErrorString( err ) );
        exit(-1);
    }
}   

//Host Code
 inline void __cudaSafeCall( cudaError err, const char *file, const int line )
{
#ifdef CUDA_ERROR_CHECK
if ( cudaSuccess != err )
{
    printf("cudaSafeCall() failed at %s:%i : %s\n",
             file, line, cudaGetErrorString( err ) );
    exit( -1 );
}    
#endif

return;
}
inline void __cudaCheckError( const char *file, const int line )
{
#ifdef CUDA_ERROR_CHECK
cudaError err = cudaGetLastError();
if ( cudaSuccess != err )
{
    printf("cudaCheckError() failed at %s:%i : %s\n",
             file, line, cudaGetErrorString( err ) );
   exit( -1 );
}
#endif

return;
}

void kernelcall(float* input,float* output,int width,int height,int widthStep){
    //cudaChannelFormatDesc channelDesc=cudaCreateChannelDesc(32,32,0,0,cudaChannelFormatKindFloat);
    cudaChannelFormatDesc channelDesc = cudaCreateChannelDesc<float>();
    //cudaArray *cuArray;
    CudaSafeCall(cudaMallocArray(&cuArray,&channelDesc,width,height));
    cudaMemcpyToArray(cuArray,0,0,input,widthStep*height,cudaMemcpyHostToDevice);

    tex1.addressMode[0]=cudaAddressModeClamp;
    tex1.addressMode[1]=cudaAddressModeClamp;
    tex1.filterMode=cudaFilterModeLinear;
    cudaBindTextureToArray(tex1,cuArray,channelDesc);
    tex1.normalized=false;
    float * D_output_x;
    float * garbage=NULL;
    CudaSafeCall(cudaMalloc(&D_output_x,widthStep*height)); 
    dim3 blocksize(16,16);
    dim3 gridsize;
    gridsize.x=(width+blocksize.x-1)/blocksize.x;
    gridsize.y=(height+blocksize.y-1)/blocksize.y;

    implement_x_sobel<<<gridsize,blocksize>>>(garbage,D_output_x,width,height,widthStep/sizeof(float));
    cudaThreadSynchronize();
    CudaCheckError();
    CudaSafeCall(cudaMemcpy(output,D_output_x,height*widthStep,cudaMemcpyDeviceToHost));
    cudaFree(D_output_x);
    cudaFree(garbage);
    cudaFreeArray(cuArray);
} 
```

结果真的一塌糊涂，根本不像原图

**结果：**

![结果不正确](../Images/7403ba61f03a6637a3d9cbe10cc6b1be.png)

我将代码的某些行更改为

```
float *pseudo_input=(float *)image->imageData;
float *output=(float*)image2->imageData;
float *input=(float*)image3->imageData;
float *inputnormalized=(float *)image4->imageData;

int s=image->widthStep/sizeof(float);
for(int w=0;w<=(image->height);w++)
    for(int h=0;h<(image->width*image->nChannels);h++)
    {
        input[w*s+h]= pseudo_input[w*s+h];
    }

kernelcall(input, output, image->width,image->height, image->widthStep);

cvNormalize(input,inputnormalized,0,255,NORM_MINMAX, CV_8UC1);

cvShowImage( "Original Image", image ); // Show our image inside it.
cvShowImage("Sobeled Image", image2); 
```

但现在我得到一个未处理的异常错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T19:25:53.833

OpenCV 规则 1：

> 除非绝对必要，否则切勿通过底层数据指针直接访问图像数据，例如将数据复制到 GPU。参考（我：p）

**错误/建议：**

1.  不是通过循环通过图像数据指针来转换图像，而是使用`cvConvert`更改图像数据类型。循环很容易出错。

2.  在调用名为 的函数时`kernelcall`，您传递的是`float`图像的数据指针，但传递的`widthStep`是原始 8 位图像的指针。这是错误结果的主要原因，因为它会导致内核内部的索引不正确。

3.  在具有不同 widthSteps 的 2 个倾斜指针之间执行内存复制时，始终使用 CUDA 运行时中可用的 2D 内存复制功能，例如`cudaMemcpy2D`等`cudaMemcpy2DToArray`。在您的情况下，`cuArray`内部具有未知的 widthstep，并且输入的`IplImage`widthStep 与 的不同`cuArray`。

4.  避免不必要的标题、赋值和标识符声明。

5.  在 CUDA 内核中添加绑定检查，以便只有那些线程执行位于映像内的内存读/写。它可能会引起一点分歧，但它比无效的内存读/写要好。

# 修改后的代码（测试）：

**主文件**

```
#include <iostream>
#include <opencv2/opencv.hpp>
#include "CudaKernel.h"

using namespace cv;
using namespace std;

int main(int argc, char** argv) 
{
    IplImage* image;

    image = cvLoadImage("4555472_460s.jpg", CV_LOAD_IMAGE_GRAYSCALE);

    if(!image )
    {
        cout << "Could not open or find the image" << std::endl;
        return -1;
    }

    IplImage* image2 = cvCreateImage(cvGetSize(image),IPL_DEPTH_32F,image->nChannels);
    IplImage* image3 = cvCreateImage(cvGetSize(image),IPL_DEPTH_32F,image->nChannels);

    //Convert the input image to float
    cvConvert(image,image3);

    float *output = (float*)image2->imageData;
    float *input =  (float*)image3->imageData;

    kernelcall(input, output, image->width,image->height, image3->widthStep);

    //Normalize the output values from 0.0 to 1.0
    cvScale(image2,image2,1.0/255.0);

    cvShowImage("Original Image", image );
    cvShowImage("Sobeled Image", image2);
    cvWaitKey(0);
    return 0;
} 
```

**CudaKernel.cu**

```
#include<cuda.h>
#include<iostream>
#include "CudaKernel.h"

using namespace std;

#define CudaSafeCall( err ) __cudaSafeCall( err, __FILE__, __LINE__ )
#define CudaCheckError()    __cudaCheckError( __FILE__, __LINE__ )
#define checkCudaErrors(err) __checkCudaErrors (err, __FILE__, __LINE__)

texture <float,2,cudaReadModeElementType> tex1;

static cudaArray *cuArray = NULL;

//Kernel for x direction sobel
__global__ void implement_x_sobel(float* output,int width,int height,int widthStep)
{
    int x = blockIdx.x * blockDim.x + threadIdx.x;
    int y = blockIdx.y * blockDim.y + threadIdx.y;

    //Make sure that thread is inside image bounds
    if(x<width && y<height)
    {
        float output_value = (-1*tex2D(tex1,x-1,y-1)) + (0*tex2D(tex1,x,y-1)) + (1*tex2D(tex1,x+1,y-1))
                           + (-2*tex2D(tex1,x-1,y))   + (0*tex2D(tex1,x,y))   + (2*tex2D(tex1,x+1,y))
                           + (-1*tex2D(tex1,x-1,y+1)) + (0*tex2D(tex1,x,y+1)) + (1*tex2D(tex1,x+1,y+1));

        output[y*widthStep+x]=output_value;
    }

}

inline void __checkCudaErrors( cudaError err, const char *file, const int line )
{
    if( cudaSuccess != err) {
        fprintf(stderr, "%s(%i) : CUDA Runtime API error %d: %s.\n",
            file, line, (int)err, cudaGetErrorString( err ) );
        exit(-1);
    }
}   

//Host Code
inline void __cudaSafeCall( cudaError err, const char *file, const int line )
{
#ifdef CUDA_ERROR_CHECK
    if ( cudaSuccess != err )
    {
        printf("cudaSafeCall() failed at %s:%i : %s\n",
            file, line, cudaGetErrorString( err ) );
        exit( -1 );
    }    
#endif

    return;
}
inline void __cudaCheckError( const char *file, const int line )
{
#ifdef CUDA_ERROR_CHECK
    cudaError err = cudaGetLastError();
    if ( cudaSuccess != err )
    {
        printf("cudaCheckError() failed at %s:%i : %s\n",
            file, line, cudaGetErrorString( err ) );
        exit( -1 );
    }
#endif

    return;
}

void kernelcall(float* input,float* output,int width,int height,int widthStep)
{
    cudaChannelFormatDesc channelDesc = cudaCreateChannelDesc<float>();

    CudaSafeCall(cudaMallocArray(&cuArray,&channelDesc,width,height));

    //Never use 1D memory copy if host and device pointers have different widthStep.
    // You don't know the width step of CUDA array, so its better to use cudaMemcpy2D...
    cudaMemcpy2DToArray(cuArray,0,0,input,widthStep,width * sizeof(float),height,cudaMemcpyHostToDevice);

    cudaBindTextureToArray(tex1,cuArray,channelDesc);

    float * D_output_x;
    CudaSafeCall(cudaMalloc(&D_output_x,widthStep*height)); 

    dim3 blocksize(16,16);
    dim3 gridsize;
    gridsize.x=(width+blocksize.x-1)/blocksize.x;
    gridsize.y=(height+blocksize.y-1)/blocksize.y;

    implement_x_sobel<<<gridsize,blocksize>>>(D_output_x,width,height,widthStep/sizeof(float));

    cudaThreadSynchronize();
    CudaCheckError();

    //Don't forget to unbind the texture
    cudaUnbindTexture(tex1);

    CudaSafeCall(cudaMemcpy(output,D_output_x,height*widthStep,cudaMemcpyDeviceToHost));

    cudaFree(D_output_x);
    cudaFreeArray(cuArray);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:16:57.793

```
Here:-

unsigned char * pseudo_input=(unsigned char *)image->imageData;
float *output=(float*)image2->imageData;
float *input=(float*)image3->imageData;
int s=image->widthStep/sizeof(float);
    for(int w=0;w<=(image->height);w++)
        for(int h=0;h<(image->width*image->nChannels);h++)
        {
            input[w*s+h]= pseudo_input[w*s+h];
        } 
```

输入是 float* 和 pseudo_input 是 uchar* 。将所有内容转换为浮动然后处理。最后，使用带有 NORM_MINMAX 的 cvNormalize 在 0 和 255 之间进行归一化以获得正确的结果。

# android - 需要以 Google API 为目标 - 慢得无法忍受的模拟器

> ID：14358918
> 
> 赞同：3
> 
> 时间：2013-01-16T12:50:50.903
> 
> 标签：android, android-emulator

任何 Android 开发人员都知道 ADT 模拟器速度慢得让人难以忍受。这可以通过安装 Intel 的[HAXM](http://software.intel.com/en-us/articles/intel-hardware-accelerated-execution-manager "HAXM")来解决。但是，我正在开发的应用程序需要将通知从服务器发送到我的 Android 应用程序，因此我使用的是 GCM，它要求我以 Google API 而非 Android API 为目标。当您以 Google API 为目标时，HAXM 似乎不起作用。

因此，如果没有 HAXM，我现在正在尝试在需要 5 分钟以上加载的模拟器上进行开发。必须使用 Google API 的人究竟是如何在这方面进行开发的，肯定有一种方法可以加快它的速度或让它与 HAXM 一起工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:42:43.103

我现在将模拟器保存为快照，它可用于开发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T13:48:38.007

您可以尝试将[bluestacks](http://www.bluestacks.com)作为测试设备。它速度超快，可与 google API 配合使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:36:38.273

有这个黑客：

[http://38911bytes.blogspot.com/2012/03/how-to-use-google-maps-api-in-android.html](http://38911bytes.blogspot.com/2012/03/how-to-use-google-maps-api-in-android.html)

但请注意 SDK 的 v21，因为 v21 似乎通过 v21 中的所有仿真器更改打破了这种黑客攻击。实际上，我现在正在恢复到 sdk v20。

# java - 从文件到 JTable

> ID：14358923
> 
> 赞同：1
> 
> 时间：2013-01-16T12:51:00.593
> 
> 标签：java, swing, file, jtable

我有一个包含 3 列数据的文件，我想将它们传递到 JTable 中。有人可以建议我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T13:41:06.013

java中的数据不是存储在表中，而是存储在表的模型中——例如[DefaultTableModel](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/table/DefaultTableModel.html)，以便对其进行操作。JTable 自动“看到”模型中的数据变化。

```
DefaultListModel myModel = new DefaultListModel();
myModel.setColumnIdentifiers([column names]); 
```

在这种情况下，如果您的列以某种独特的方式分隔，读取数据的最简单方法是使用 java [Scanner](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)：

```
Scanner s = new Scanner(new FileInputStream(new File(filePath)));
s.useDelimiter(delim);
while (s.next()) {
   System.out.println(s.nextInt());
   // or put data directly into the table:
   myModel.addRow([data from s]);
} 
```

delim 是将文件分成列的标志。您最终还需要将创建的模型分配给现有的 JTable：

```
myTable.setModel(myModel); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:59:39.780

在 Swing 中，您需要处理 Model 对象以管理多个 UI 组件，例如 JTree、JTable 和 JList。

您可以使用开箱即用提供给您的 Default 实现，或者扩展它或实现 Model 接口。

对于 JTables，默认模型类称为 DefaultTableModel，接口称为 TableModel。

现在回到您的问题，您必须读取文件，然后获取模型实例，以便您可以将数据传递给它，以便它显示在表格上。不要忘记将您的新表格模型与表格相关联。

这是一个[指南](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)，可以帮助您更多。

# jquery - AJAX 发布到 Spring MVC 控制器 - 错误

> ID：14358924
> 
> 赞同：0
> 
> 时间：2013-01-16T12:51:01.573
> 
> 标签：jquery, ajax, post, spring-mvc, http-post

下面是将表单数据发布到 Spring Controller 的两个片段。

1.

```
$("#formData").submit(function(event){ 
            event.preventDefault();
            var jqxhr = $.post("submitdata", $("#formData").serialize(), function(data){ 
                console.log(data); 
            }) 
            .success(function() { 
                // Success
            }) 
            .error(function() {  
                // Error 
            }); 
            jqxhr.complete(function(){ 
                //Ajax Process complete... 
            }); 
        }); 
```

2.

```
$("#formData").submit(function(event){ 
            event.preventDefault();
            var request = $.ajax({
                url: "submitdata",
                type: "post",
                data: $("#formData").serialize(),
                cache: false,
                contentType: "multipart/form-data",
                success: function(data){
                    alert(data);
                }
            });
        }); 
```

**1 号**发布成功并显示响应，而**2 号**返回**404**。

URL 自动占用上下文路径。我可以从 Inspect Element -> Network 进行验证，并触发写入 URL。

任何人都可以解决什么问题？我解决这个问题的目的是将文件与数据一起发送到服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:28:31.797

您使用了错误的参数`contentType`。把它留给`application/x-www-form-urlencoded`.

问题出在您的表单定义中。要将文件发送到服务器，只需使用第一个并将此属性放入`<form>`标签：

`enctype="multipart/form-data"`（[见此](http://www.w3schools.com/tags/att_form_enctype.asp)）

例子：

```
<form action="demo_post_enctype.asp" method="post" enctype="multipart/form-data">
    First name: <input type="text" name="fname"><br>
    Last name: <input type="text" name="lname"><br>
   <input type="submit" value="Submit">
</form>
<script>
    $.post("submitdata", $("#formData").serialize(), function(data){ 
        console.log(data); 
    });
</script> 
```

# bash - 为什么此 sed 命令在终端中有效，但在 bash ".sh" 脚本中无效

> ID：14358925
> 
> 赞同：0
> 
> 时间：2013-01-16T12:51:06.863
> 
> 标签：bash, sed, environment-variables

抱歉，这似乎以各种不同的方式被问了很多，但没有一个能帮助我理解为什么这不起作用。

如果我运行以下命令：

```
sed -i".bak" "s:$PRELOADER_BASH::" ~/.bashrc 
```

在终端中，它可以工作。但是我想将它作为 sh 脚本的一部分运行，当我这样做时，我收到以下错误：

```
sed: -e expression #1, char 8: unterminated `s' command 
```

有人可以向我解释为什么这样做吗？

环境变量 PRELOADER_BASH 是：

```
export LD_PRELOAD=/usr/lib/mylib1.so /usr/lib/mylib2.so 
```

空格和斜线给我带来了早期的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:57:53.993

您的变量 PRELOADER_BASH 对 shell 脚本来说是已知的吗？您必须导出它才能在子 shell 中访问它（例如在 shell 脚本中）。

像这样定义你的变量：

```
export PRELOADER_BASH="export LD_PRELOAD=/usr/lib/mylib1.so /usr/lib/mylib2.so" 
```

然后运行你的shell脚本，它就会工作。它将用任何内容替换`export LD_PRELOAD=/usr/lib/mylib1.so /usr/lib/mylib2.so`您的 ~/.bashrc 文件中的所有出现（即删除它）。

**解释**

在命令行上，您可能已经像这样定义了您的变量：

```
PRELOADER_BASH="export LD_PRELOAD=/usr/lib/mylib1.so /usr/lib/mylib2.so" 
```

这使它在当前 shell 中可用，但在子 shell 中不可用。因此，您需要使用`export`.

除了导出之外，您还可以在 shell 脚本中定义变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:00:37.613

好的，事实证明我有点过于谨慎和愚蠢，因为我没有在这里发布确切的脚本代码，在 bash 文件生命周期的早期尝试解决空格和 / 的问题时，我在下面导出 PRELOADER_BASH方法：

```
PRELOADER_BASH='export LD_PRELOAD="/usr/lib/libopenvg.so /usr/lib/libinterposer.so"' 
```

这实际上是导致错误的原因！最好的方法是执行以下操作：

```
PRELOADER_BASH="export LD_PRELOAD=/usr/lib/libopenvg.so /usr/lib/libinterposer.so" 
```

事后看来，它真的很愚蠢，因为我的“过度”预加载器 bash 设置可能直接将其扩展为：

```
sed -i".bak" "s:'export LD_PRELOAD="/usr/lib/libopenvg.so /usr/lib/libinterposer.so"'::" ~/.bashrc 
```

所以 sed 命令确实有一个“未终止的`s'命令”

sed -i".bak" **"** s:'export LD_PRELOAD="/usr/lib/libopenvg.so /usr/lib/libinterposer.so **"** '::" ~/.bashrc

很抱歉在这上面浪费了人们的时间，显然我需要一杯咖啡！

# android - 与 Android 设置向导交互

> ID：14358931
> 
> 赞同：3
> 
> 时间：2013-01-16T12:51:17.237
> 
> 标签：android, wizard

我正在尝试为 Android 开发一个设置向导，因为我想为 Google 现有的功能添加一些功能。是否可以以某种方式与 Android 向导进行交互？因为当我搜索信息时，我发现不使用 Google 的向导可能会导致一些麻烦，比如 gmail 帐户激活等。

如果没有，是否可以在 Google 向导之前或之后立即调用活动？只听 BOOT_COMPLETED 事件就足够了吗？

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:20:59.527

I don't know how you will use this unless you are making a rom and can add your app to system but basically you make your setupwizard add-on a Home activity with action MAIN, and categories HOME,DEFAULT. You should also set the priority higher than 1\. If any of this is unclear you can look at the Launcher source/manifest that is publicly available.

When your activity is done it should deactivate itself with the PackageManager ([setComponentEnabledSetting](http://developer.android.com/reference/android/content/pm/PackageManager.html#setComponentEnabledSetting%28android.content.ComponentName,%20int,%20int%29)) and that should be it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T17:24:23.197

您可以添加在手机首次启动时启动的其他活动。您只需要模仿与 Google 相同的行为`SetupWizardActivity`。

这是供参考的相关部分`AndroidManifest.xml`：

```
<activity android:theme="@style/InvisibleNoTitle" android:label="@string/setup_wizard_title" android:name="SetupWizardActivity" android:excludeFromRecents="true" android:launchMode="singleTop" android:immersive="true">
    <intent-filter android:priority="5">
        <action android:name="android.intent.action.MAIN" />
        <action android:name="android.intent.action.DEVICE_INITIALIZATION_WIZARD" />
        <category android:name="android.intent.category.HOME" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

这将允许您在之前/之后运行您的应用程序`SetupWizardActivity`，具体取决于您的优先级。我相信`android:prioirity`首先运行的数字更高，但不要引用我的话。

您可以使用[apktool](http://code.google.com/p/android-apktool/)`xml`找到各种与 Android 相关的 apk的 AndroidManifest 。您甚至可以检查您从 Play 商店或任何其他来源获取的一些 apk。

# jpa - 如何获取 JPA 生成的 SQL 查询？

> ID：14358934
> 
> 赞同：18
> 
> 时间：2013-01-16T12:51:36.050
> 
> 标签：jpa, spring-data-jpa

我使用 JPA 规范和 Hibernate 作为我的供应商。我需要以某种方式获取发送到数据库的生成的 SQL 查询（打印到 sysout）并将其保存为一个简单的字符串。

有没有办法做到这一点？

**编辑**

让我更清楚一点：我不需要休眠日志。我需要能够在不同的数据库上执行相同的查询。因此，我需要按原样获取 SQL 查询，并将其保存在一个普通的 String 变量中。

**编辑 2**

有没有我可以提供一个 bean 的工具，它会自动生成一个插入查询？我可以在这里以某种方式使用 Hibernate bean 吗？我知道这是一个节拍情结。

谢谢，

伊多布

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-09-30T06:02:28.187

像这样创建一个 bean。

```
@Bean
public JpaVendorAdapter jpaVendorAdapter(){
    HibernateJpaVendorAdapter jpaVendorAdapter = new HibernateJpaVendorAdapter();
    jpaVendorAdapter.setGenerateDdl(true);
    jpaVendorAdapter.setShowSql(true);

    return jpaVendorAdapter;
} 
```

如果您使用的是 Spring Boot，请将其添加到您的 @Configuration 中。

由此创建的日志可以在 MySQL 工作台中执行。您说您正在使用 JPA 和 Hibernate。除非您支持的数据库受 JPA 支持，否则别无他法。在这种情况下，您可以实现一个 AbstractJpaVendorAdapter。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-11T19:34:28.580

对您的问题的简单回答是否定的。您想要做的是许多开发人员也想做的事情，但它不是 JPA 规范的一部分，因此获取生成的 SQL 的能力将取决于供应商决定什么做。使用 Hibernate 获取 SQL 的唯一方法是通过日志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T12:54:53.937

您必须启用 log4j 日志记录并为 Hibernate 添加一个附加程序以显示查询。

此处已对此进行了描述：[How to print a query string with parameter values when using Hibernate](https://stackoverflow.com/questions/1710476/print-query-string-in-hibernate-with-parameter-values)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-30T06:35:15.423

如果我理解正确，您希望获取 Hibernate 在一个数据库上执行的插入查询，并通过代码在不同的数据库上运行它`entityManager#executeUpdate`或类似。

Hibernate 不会公开生成的查询，因为它特定于目标数据库的方言。因此，即使要获得插入查询，也可能毫无意义。

但是，在您的情况下，您可以创建两个数据库连接（在您的情况下通过两个`DataSource`或`EntityManagerFactory`其他任何方式）并为两个数据库调用`dao.persist(entity)`两次，并让 Hibernate 处理查询构造部分。

编辑：这里的查询是指本地查询，两个数据库的 HQL 查询是相同的。希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-13T15:16:08.607

我不知道生成的查询是什么意思，但如果你使用 Hibernate 并且你有`javax.persistence.Query query`你可以很容易地获得 HQL 字符串（对于 EclipseLink 它是相似的）。如果你有 HQL，你可以用 QueryTranslator 将它翻译成 SQL。

```
// Get HQL
String hqlQueryString = query.unwrap(org.hibernate.query.Query.class).getQueryString();

// Translate HQL to SQL
ASTQueryTranslatorFactory queryTranslatorFactory = new ASTQueryTranslatorFactory();
SessionImplementor hibernateSession = em.unwrap(SessionImplementor.class);
QueryTranslator queryTranslator = queryTranslatorFactory.createQueryTranslator("", hqlQueryString, Collections.emptyMap(), hibernateSession.getFactory(), null);
queryTranslator.compile(Collections.emptyMap(), false);
String sqlQueryString = queryTranslator.getSQLString(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-31T04:46:57.937

尝试在 LocalContainerEntityManagerFactoryBean 实例中添加属性，它对我有用：-

```
@EnableJpaRepositories(basePackages = "org.common.persistence.dao")
public class PersistenceJPAConfig {

    @Bean
    public LocalContainerEntityManagerFactoryBean entityManagerFactory() {
        final LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean();
        em.setDataSource(dataSource());
        em.setPackagesToScan(new String[] { "org.common.persistence.model" });
        final HibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();
        em.setJpaVendorAdapter(vendorAdapter);
        em.setJpaProperties(additionalProperties());
        return em;
    }

    final Properties additionalProperties() {
        final Properties hibernateProperties = new Properties();
        hibernateProperties.setProperty("showSql", "true");
        hibernateProperties.setProperty("hibernate.show_sql", "true");
        hibernateProperties.setProperty("hibernate.format_sql", "true");
        hibernateProperties.setProperty("hibernate.query.substitutions", "false");
        return hibernateProperties;
    }
} 
```

# scala - 使用 sbt 从 scala 运行外部进程！Windows下的运算符

> ID：14358935
> 
> 赞同：0
> 
> 时间：2013-01-16T12:51:37.770
> 
> 标签：scala, batch-file, sbt, external-process, exitstatus

我的 scala 程序中有以下两行

```
val success:Int = ("d:\\program.bat" !)
println("started "+success) 
```

program.bat 看起来像这样

```
@echo off
start "" "d:\notepad.exe"
echo DONE 
```

该程序实际上启动了tomcat服务器，但对于firefox，notepad等都是一样的......所以我将它简化为notepad.exe

我想启动记事本并看到“started 0”。

问题是代码停在第一行并且在我关闭记事本之前不会打印“started 0”

program.bat 的最后一行是

```
echo DONE 
```

并且 DONE 是执行停止之前打印出来的最后一件事（所以我假设它不会在 program.bat 中停止）。

我尝试将 EXIT /B 0 放在我的 program.bat 脚本的末尾，但它并没有改变任何东西。

我听说它在 linux 下运行良好（当然使用 program.sh）。

有什么建议可以真正从 program.bat 中分离记事本并返回 0？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T13:29:06.273

这种行为是意料之中的，因为`!`操作符返回被调用程序的退出代码——这意味着程序必须在退出代码返回之前终止。引用[`process`文档](http://www.scala-lang.org/api/current/index.html#scala.sys.process.package)中的示例：

```
import scala.sys.process._

// This uses ! to get the exit code
def fileExists(name: String) = Seq("test", "-f", name).! == 0

// This uses !! to get the whole result as a string
val dirContents = "ls".!!

// This "fire-and-forgets" the method, which can be lazily read through
// a Stream[String]
def sourceFilesAt(baseDir: String): Stream[String] = {
  val cmd = Seq("find", baseDir, "-name", "*.scala", "-type", "f")
  cmd.lines
} 
```

如果您对退出代码感兴趣，但希望您的 Scala 程序同时取得进展，例如，打印被调用程序的输出，您可以使用它`ProcessBuilder.hasExitValue`来找出退出代码何时可用。

# qml - 如何在黑莓 10 级联中将图像上传到服务器？

> ID：14358938
> 
> 赞同：1
> 
> 时间：2013-01-16T12:51:55.893
> 
> 标签：qml, blackberry-10, blackberry-cascades

我已经尝试使用以下代码上传图像，在此代码中能够从服务器获得响应，但服务器中的图像大小始终为零。任何人都可以帮助我解决这方面的问题，

```
 void App::uploadImage(){
 QString path(QDir::currentPath() + "/app/native/assets/Icon/img.jpg");
 QNetworkRequest request(
 QUrl( "http://domain.com?type=uploadimages&deviceid=12323"));
 QByteArray boundary = "-------------------------32142544626177"; 
 QFile file(path);
 if (!file.open(QIODevice::ReadOnly)) {
 qDebug() << "error read image";
 return;
 }
QByteArray fileContent(file.readAll());

 QByteArray data = "--" + boundary + "\r\n";
 data +=
 "Content-Disposition: form-data; name=\"data\"; filename=\"img.jpg\";\r\n";
data += "Content-Type: image/jpg\r\n\r\n" + fileContent + "\r\n";
 data += "--" + boundary + "--\r\n";
  request.setRawHeader("Content-Type",
 "multipart/form-data; boundary=" + boundary);
 request.setRawHeader("Content-Length",
 QString::number(data.size()).toAscii());
 file.close();
 qDebug() << "data" << data.size();
 QNetworkAccessManager *am = new QNetworkAccessManager(this);
 QNetworkReply *reply = am->post(request, "&data=" +data);

 QObject::connect(am, SIGNAL(finished(QNetworkReply*)), this,
 SLOT(replyFinished(QNetworkReply*)));
}
void App::replyFinished(QNetworkReply* reply) {
    reply->open(QIODevice::ReadOnly);
    if (reply->error() == QNetworkReply::NoError) {
        QByteArray str = (reply->readAll());
        QString response = QString::fromUtf8(str.data(), str.size());
        qDebug() << " response " << response;
    }
    else{
        qDebug() << "error response server";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T06:45:46.760

```
QString body = "" ;

const QUrl url("http://someurl.to/make/the/post" );
 QHttpMultiPart *multiPart = new QHttpMultiPart(QHttpMultiPart::FormDataType);
 QHttpPart textPartData;
 body = "" ;
 QTextStream(&body) << "";
 textPartData.setHeader(QNetworkRequest::ContentTypeHeader, "application/json; charset=utf-8");
 textPartData.setHeader(QNetworkRequest::ContentDispositionHeader, QVariant("form-data; name=\"data\""));
 textPartData.setBody(body.toAscii());

     for(int i=0; i< number_of_files_to_send ; i++){
             QHttpPart imagePart;
             QString header_body = "";
             QTextStream(&header_body) << "form-data; name=\"" << name_of_the_file << "\"; filename=\"" << name_of_the_file << ".jpg\"" ;
             imagePart.setHeader(QNetworkRequest::ContentDispositionHeader, QVariant(header_body));
             imagePart.setHeader(QNetworkRequest::ContentTypeHeader, QVariant("image/jpeg"));

             //prepare file for upload
             QString filepath;
             QTextStream(&filepath) << FunkyPigeonBlackberry::getInstance()->dataModelProductDetails()->custom_image(i).value("cut_image").toString();

             // pack the new file
             QFile *file = new QFile(filepath);
             file->open(QIODevice::ReadOnly);
             imagePart.setBodyDevice(file);
             file->setParent(multiPart); // we cannot delete the file now, so delete it with the multiPart
             multiPart->append(imagePart);
     }

 multiPart->append(textPartData);
 multiPart->append(textPartProductDetails);
 multiPart->append(textPartDataDelivery);

 QNetworkRequest request(url);

 QNetworkReply* reply = m_networkAccessManager->post(request, multiPart);
 connect(reply, SIGNAL(finished()), this, SLOT(onNetworkResponse())); 
```

# c++ - 是否可以使用 C++ 访问 CPU 中的溢出标志寄存器？

> ID：14358943
> 
> 赞同：13
> 
> 时间：2013-01-16T12:52:12.303
> 
> 标签：c++, assembly, flags, integer-overflow

在执行数学运算后，例如，将两个整数相乘，是否可以使用 C++ 访问 CPU 中的溢出标志寄存器？如果不是还有什么其他快速检查溢出的方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T12:59:07.733

不，一般是不可能的。有些 CPU 甚至没有这样的标志（例如 MIPS）。

其中一条评论中提供的[链接](https://stackoverflow.com/questions/199333/best-way-to-detect-integer-overflow-in-c-c)将为您提供有关如何进行溢出检查的想法。

请记住，在 C 和 C++ 中，有符号整数溢出会导致未定义的行为，并且法律上您不能在事后执行溢出检查。您要么需要使用无符号算术，要么在算术运算之前进行检查。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-16T13:12:12.633

我建议在每个适当的情况下阅读此书。从 [用 C++ 优化软件](http://www.agner.org/optimize/optimizing_cpp.pdf)-

> 整数溢出是另一个安全问题。官方 C 标准说有符号整数在溢出的情况下的行为是“未定义的”。这允许编译器忽略溢出或假设它不会发生。在 Gnu 编译器的情况下，没有发生有符号整数溢出的假设具有不幸的结果，它允许编译器优化溢出检查。有许多可能的补救措施来解决这个问题：(1) 在溢出发生之前检查溢出，(2) 使用无符号整数 - 它们保证可以回绕，(3) 使用 option 捕获整数溢出`-ftrapv`，但这是非常低效的, (4) 使用 option 获得此类优化的编译器警告 `-Wstrict-overflow=2`，或 (5) 使用 option 明确定义溢出行为 `-fwrapv`或`-fno-strict-overflow`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-13T19:11:10.110

您必须执行该操作并检查内联汇编中的溢出位。您可以这样做并在溢出时跳转到标签，或者（更普遍但效率较低）在溢出时设置变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-12T18:29:07.267

[没有。最好的方法在这里](https://codereview.stackexchange.com/a/37178)提前检查

> 如果不是还有什么其他快速检查溢出的方法？

如果您需要在操作后进行测试，您可以使用浮点表示（双精度） - 每个 32 位整数都可以完全表示为浮点数。如果您所针对的所有机器都支持 IEEE（如果您不必考虑大型机，可能就是这种情况），您可以只执行操作，然后在结果上使用 isfinite 或 isinf。快速（就程序员的努力而言）方式是：IEEE 浮点算术标准（IEEE 754）定义了五个异常，每个异常都返回一个默认值并具有相应的状态标志（在某些下溢情况下除外）发生异常时引发。五个可能的例外是：

*   无效运算：数学上未定义，例如，负数的平方根。默认情况下，返回 qNaN。
*   除以零：对有限操作数的运算给出精确的无限结果，例如 1/0 或 log(0)。默认情况下，返回±无穷大。
*   **溢出：结果太大而无法正确表示（即，其具有无限指数范围的指数将大于 emax）。默认情况下，对于最近舍入模式返回 ±infinity（并遵循有向舍入模式的舍入规则）。**
*   下溢：结果非常小（超出正常范围）且不精确。默认情况下，返回次正规或零（遵循舍入规则）。
*   不精确：精确（即未四舍五入的）结果不能精确表示。默认情况下，返回正确舍入的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T20:33:05.787

这可能不是您想要做的，原因有两个：

1.  不是每个 CPU 都有溢出标志
2.  使用 C++ 实际上没有办法访问溢出标志

人们之前发布的溢出检查提示可能很有用。

如果您真的想非常快速地编写将两个整数相乘并检查溢出标志的代码，您将不得不使用汇编。如果您想要一些 x86 的示例，请询问

# xsd - 如何强制生成@XmlSeeAlso 注释？

> ID：14358945
> 
> 赞同：4
> 
> 时间：2013-01-16T12:52:15.940
> 
> 标签：xsd, jaxb

我正在使用 JAXB 从**几个 XSD 文件**生成 Java 代码。然后，在 OSGi 容器中，我将 XML 文件解组为生成的代码。XSD 使用 xsd:any 元素：

```
<xsd:complexType name="GetReservationRSType">
    <xsd:sequence>
        <xsd:element name="Errors" type="pnrb:Errors.PNRB"
            minOccurs="0" />
        <xsd:choice>
            <xsd:element name="Reservation" type="pnrb:Reservation.PNRB"
                minOccurs="0" />
            <xsd:element name="Content" minOccurs="0">
                <xsd:complexType>
                    <xsd:choice>
                        <xsd:any processContents="lax" />
                    </xsd:choice>
                </xsd:complexType>
            </xsd:element>
        </xsd:choice>
    </xsd:sequence>
</xsd:complexType> 
```

我在使其在生产代码中工作时遇到了几个问题，但最终我在手动添加 @XmlSeeAlso 注释时解决了它（`@XmlSeeAlso(value = { OTATravelItineraryRS.class })`在下面的代码中）：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "GetReservationRSType", propOrder = {
    "warnings",
    "errors",
    "reservation",
    "content"
})
@XmlSeeAlso({
    GetReservationRS.class
})
public class GetReservationRSType {

    @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "", propOrder = {
        "any"
    })
    @XmlSeeAlso(value = { OTATravelItineraryRS.class })
    public static class Content {
       //  ...
    }
    // ...
} 
```

有什么办法可以强制 JAXB 自动添加这样的注释？例如，通过添加一些 JAXB 绑定配置选项或修改 XSD 文件？

编辑：

我在 OSGi env 中的 JAXBContext 以以下方式初始化（​​它获取所有生成的包名称作为参数） - 它们使用冒号分隔符列出，正如在几个与 JAXB 相关的帖子中所建议的那样：

```
<bean id="jaxbContext" class="javax.xml.bind.JAXBContext" factory-method="newInstance">
    <constructor-arg index="0" value="com.sabre.webservices.pnrbuilder:com.sabre.webservices.sabrexml._2003._07" />    
</bean> 
```

我收到以下异常：

```
Caused by: javax.xml.bind.MarshalException
 - with linked exception:
[javax.xml.bind.JAXBException: class com.sabre.webservices.sabrexml._2003._07.OTATravelItineraryRS nor any of its super class is known to this context.]
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:318)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:244)
    at javax.xml.bind.helpers.AbstractMarshallerImpl.marshal(AbstractMarshallerImpl.java:105)
    at org.apache.camel.converter.jaxb.FallbackTypeConverter.marshall(FallbackTypeConverter.java:174)
    at org.apache.camel.converter.jaxb.FallbackTypeConverter.convertTo(FallbackTypeConverter.java:88)
    ... 94 more
Caused by: javax.xml.bind.JAXBException: class com.sabre.webservices.sabrexml._2003._07.OTATravelItineraryRS nor any of its super class is known to this context.
    at com.sun.xml.bind.v2.runtime.XMLSerializer.reportError(XMLSerializer.java:246)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.reportError(XMLSerializer.java:261)
    at com.sun.xml.bind.v2.runtime.property.SingleReferenceNodeProperty.serializeBody(SingleReferenceNodeProperty.java:113)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:332)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:699)
    at com.sun.xml.bind.v2.runtime.property.SingleElementNodeProperty.serializeBody(SingleElementNodeProperty.java:152)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:332)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:328)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsSoleContent(XMLSerializer.java:593)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeRoot(ClassBeanInfoImpl.java:320)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:494)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:315)
    ... 98 more
Caused by: javax.xml.bind.JAXBException: class com.sabre.webservices.sabrexml._2003._07.OTATravelItineraryRS nor any of its super class is known to this context.
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getBeanInfo(JAXBContextImpl.java:590)
    at com.sun.xml.bind.v2.runtime.property.SingleReferenceNodeProperty.serializeBody(SingleReferenceNodeProperty.java:105)
    ... 107 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T18:20:59.900

我找到了一个令人满意的解决方法。它使用[jaxb 注释插件](https://github.com/highsource/jaxb2-annotate-plugin)。也许这不是完美的解决方案，但 - 至少 - 它阻止我将生成的类提交到 SVN 存储库。提到的插件只是添加了想要的注释。

这是**pom.xml**中所需的配置：

```
 <plugin>
            <groupId>org.jvnet.jaxb2.maven2</groupId>
            <artifactId>maven-jaxb2-plugin</artifactId>

            <executions>
                <execution>
                    <id>schema-pnr-service</id>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                    <configuration>
                        <schemaDirectory>src/main/resources/xsd</schemaDirectory>
                        <schemaIncludes>
                            <include>GetReservationSTLRQ_v0.01.xsd</include>
                            <include>GetReservationSTLRS_v0.01.xsd</include>
                            <include>OTA_TravelItineraryReadCDI1.0.5RQ.xsd</include>
                            <include>OTA_TravelItineraryReadCDI1.0.5RQRS.xsd</include>
                            <include>OTA_TravelItineraryReadCDI1.0.5RS.xsd</include>
                            <include>OTA_TravelItineraryReadPNR1.0.5RS.xsd</include>
                        </schemaIncludes>
                        <extension>true</extension>
                        <args>
                            <arg>-Xannotate</arg>
                            <arg>-Xannotate-defaultFieldTarget=setter</arg>
                        </args>
                        <plugins>
                            <plugin>
                                <groupId>org.jvnet.jaxb2_commons</groupId>
                                <artifactId>jaxb2-basics-annotate</artifactId>
                            </plugin>
                        </plugins>                            
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

并且想要的注释在**bindings.xjb**文件中配置，该文件应该与 *.xsd 文件位于同一目录中 - 这里是它的内容：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bindings xmlns="http://java.sun.com/xml/ns/jaxb"
                xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance"
                xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                xsi:schemaLocation="http://java.sun.com/xml/ns/jaxb http://java.sun.com/xml/ns/jaxb/bindingschema_2_0.xsd"
                xmlns:annox="http://annox.dev.java.net" 
                extensionBindingPrefixes="annox" version="2.1">
    <globalBindings typesafeEnumMaxMembers="600"/>

    <bindings schemaLocation="GetReservationSTLRS_v0.01.xsd" node="/xsd:schema">
        <bindings node="xsd:complexType[@name='GetReservationRSType']/xsd:sequence/xsd:choice/xsd:element[@name='Content']/xsd:complexType">
            <annox:annotate target="class">
                <annox:annotate annox:class="javax.xml.bind.annotation.XmlSeeAlso" value="com.sabre.webservices.sabrexml._2003._07.OTATravelItineraryRS" />
            </annox:annotate>           
        </bindings>

    </bindings>    
</bindings> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:09:38.233

而不是试图强制`@XmlSeeAlso`注释，您应该`JAXBContext`在生成的包名称上创建。这样您就可以确保所有的类都被处理了。由于您处于 OSGi 环境中，因此可以使用其中一种带有`ClassLoader`参数的方法。

```
JAXBContext jc = JAXBContext.newInstance("com.example.foo", ObjectFactory.class.getClassLoader()); 
```

如果生成的包名不止一个，则上下文路径被`:`分隔。

```
JAXBContext jc = JAXBContext.newInstance("com.example.foo:org.example.bar", ObjectFactory.class.getClassLoader()); 
```

# entity-framework - 实体框架中与 POCO 类的多对多关系（DB 优先）

> ID：14358946
> 
> 赞同：0
> 
> 时间：2013-01-16T12:52:17.013
> 
> 标签：entity-framework, many-to-many, poco

我有一个看起来像这样的上下文：

```
public DbSet<User> Users { get; set; }
public DbSet<AccessGroup> AccessGroups { get; set; }
public DbSet<UserAccessGroup> UsersAccessGroups { get; set; } 
```

该数据库有三个表：

*   用户 [Pk = Id, ...]
*   AccessGroups [Pk = Id, ...]
*   UsersAccessGroups [Pk = Id, Fk = UserId, Fk = AccessGroupId, ...]（具有创建者和创建时间的列）

我们有三个班级：

```
public class User
{
  public virtual int Id { get; set; }
  public virtual ICollection<UserAccessGroup> UsersAccessGroups { get; set; }
  // Some more..
}

public class AccessGroup
{
  public virtual int Id { get; set; }
  public virtual ICollection<UserAccessGroup> UsersAccessGroups { get; set; }
  // Some more..
}

[Table("UsersAccessGroups")]
public class UserAccessGroup
{
  public virtual int Id { get; set; }
  public virtual int UserId { get; set; }
  public virtual int AccessGroupId { get; set; }
  public virtual int CreatedByUserId { get; set; }
  public virtual DateTime CreatedAt { get; set; }

  public virtual User User { get; set; }
  public virtual AccessGroup AccessGroup { get; set; }
  public virtual User CreatedByUser { get; set; }
} 
```

我希望能够使用这样的用户对象：

```
var user = Context.Users.Select(x => x);
var accessGroup = user.UsersAccessGroups.Select(x => x.AccessGroup).ToList(); 
```

然而，第二行不起作用。我收到错误提示“无效的列名 User_Id” 当我有一对一的关系（如 CreatedByUser）时，相同的代码有效。

我也尝试过这样的事情：

```
Context.Users.Include("UsersAccessGroups")
  .Include("UsersAccessGroups.AccessGroup")
  .Include("UsersAccessGroups.User").Select(...); 
```

但我遇到了同样的问题。

是否有可能让它工作，或者我必须以某种方式做不同的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:16:20.867

您需要为 CreatedByUser 指定外键，因为 EF 将无法按照约定映射它。

```
[Table("UsersAccessGroups")]
public class UserAccessGroup
{
  public virtual int Id { get; set; }
  public virtual int UserId { get; set; }
  public virtual int AccessGroupId { get; set; }
  public virtual int CreatedByUserId { get; set; }
  public virtual DateTime CreatedAt { get; set; }

  public virtual User User { get; set; }
  public virtual AccessGroup AccessGroup { get; set; }
  [ForeignKey("CreatedByUserId")]
  public virtual User CreatedByUser { get; set; }
} 
```

# php - 需要通过一个 Ajax 请求获取 XML 中的谷歌地图标记和基于 HTML 中相同参数的另一个数据

> ID：14358947
> 
> 赞同：0
> 
> 时间：2013-01-16T12:52:21.963
> 
> 标签：php, html, xml, ajax, google-maps

我有一个脚本获取用户的当前位置，通过 Ajax 请求将其发送到一个 php 文件，该请求使用数据库检查附近的坐标并返回一个 xml 格式的标记，然后将其填充到谷歌地图中。我的问题是我还需要根据该 ajax 请求获取一些表格数据，这些数据不会进入谷歌地图插件。它将出现在地图的顶部，就像实际地图上标记的相关数据一样。问题是我不知道如何创建 xml 表。

**我真正想要做的是让我的 php 脚本生成一些 html 格式的表，然后通过我用于获取 xml 标记的相同 ajax 请求将这些表附加到我的 html 文件中。**

PHP解析文件 -

```
 <?php
include("config.php");

// Get parameters from URL
$center_lat = $_GET["lat"];
$center_lng = $_GET["lng"];
$radius = $_GET["radius"];

// Start XML file, create parent node
$dom = new DOMDocument("1.0");
$node = $dom->createElement("markers");
$parnode = $dom->appendChild($node);

// Search the rows in the markers table
$query = sprintf("SELECT address, name, lat, lng, ( 3959 * acos( cos( radians('".$center_lat."') ) * cos( radians( lat ) ) * cos( radians( lng ) - radians('".$center_lng."') ) + sin( radians('".$center_lat."') ) * sin( radians( lat ) ) ) ) AS distance FROM venues HAVING distance < '".$radius."' ORDER BY distance LIMIT 0 , 20",
  mysqli_real_escape_string($mysqli, $center_lat),
  mysqli_real_escape_string($mysqli, $center_lng),
  mysqli_real_escape_string($mysqli, $center_lat),
  mysqli_real_escape_string($mysqli, $radius));
$result = mysqli_query($mysqli, $query);

$result = mysqli_query($mysqli, $query);
if (!$result) {
  die("Invalid query: " . mysqli_error($mysqli));
}

// Iterate through the rows, adding XML nodes for each
while ($row = @mysqli_fetch_assoc($result)){
  $node = $dom->createElement("marker");
  $newnode = $parnode->appendChild($node);
  $newnode->setAttribute("name", $row['name']);
  $newnode->setAttribute("address", $row['address']);
  $newnode->setAttribute("lat", $row['lat']);
  $newnode->setAttribute("lng", $row['lng']);
  $newnode->setAttribute("distance", $row['distance']);

}

echo $dom->saveXML();
?> 
```

还有我的 Ajax 请求。

```
$(document).ready(function(){   
    var clientPosition ;
    $("#map_canvas").gmap().live("init", function(evt, map) {
        $("#map_canvas").gmap("getCurrentPosition", function(position, status) {
        if ( status === "OK" ) {
            var lat = position.coords.latitude;
            var lng = position.coords.longitude;
            var currentPositionMarker = "<marker name=\'Your Position\'     lat="+lat+" lng="+lng+"/>";
            var clientPosition = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
            $("#map_canvas").gmap("addMarker", {"position": clientPosition, "bounds": \'true\'});
            $.ajax({
                type:"GET",
                url: "someurl.php",           
                dataType: "xml",
                data:{
                    lat:lat,
                    lng:lng,
                    radius:250
                },
                success: function(data) {
                    var markers = (data).getElementsByTagName("marker");
                    $(currentPositionMarker).appendTo(markers);
                    var bounds = new google.maps.LatLngBounds();
                    for (var i = 0; i < markers.length; i++) {
                        var name = markers[i].getAttribute("name");
                        var address = markers[i].getAttribute("address");
                        var type = markers[i].getAttribute("type");
                        var point = new google.maps.LatLng(
                        parseFloat(markers[i].getAttribute("lat")),
                        parseFloat(markers[i].getAttribute("lng")));
                        var html = "<b>" + name + "</b> <br/>" + address;
                        bounds.extend(point);   
                        displayMarker(name,point);
                        map.fitBounds(bounds);
                    };
                }
            });
            function displayMarker(title, point) {
                infowindow = new google.maps.InfoWindow;
                var marker = new google.maps.Marker({
                    map: map,
                    title: title,

                    position: point
                });
                google.maps.event.addListener(marker, "click", function() {
                    infowindow.setContent(title);
                    infowindow.open(map, marker);
                });
            }
        }
        });
    });
}); 
```

我知道这应该很简单，我查看了 PHP 文档并找到了一些相关的东西，但是当我实现它时，例如 $dom->loadHTML(); ajax 脚本停止工作，甚至不填充新的相关标记。

提前致谢！

# ssl - 获取 SSL 证书信息 - UIWebview

> ID：14358949
> 
> 赞同：3
> 
> 时间：2013-01-16T12:52:26.143
> 
> 标签：ssl, uiwebview, nsurlconnection, nsurlrequest

如何获取证书信息？

我正在使用 Uiwebview 并且出于某种原因需要获取证书信息，我找不到这样做的方法..

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-22T11:04:47.323

SSL 证书通过域提供（存储在 Web 服务器上）。要获取证书信息，您可以使用 sslshopper 和 digicert 等在线实用程序。要获取密钥，您可以转到证书目录 /etc/pki/tls/certs（在 linux 中）或 C:\Apache2\certs（在 Windows 中）。

# opencv - 更新 dylib 以引用其他 dylib 的正确版本（自制）

> ID：14358950
> 
> 赞同：0
> 
> 时间：2013-01-16T12:52:28.840
> 
> 标签：opencv, homebrew, dylib

我正在尝试构建一个使用 QT 和 OpenCV 的程序。它编译正确，但是当我运行应用程序时，我得到：

```
Starting /Users/Me/MyApp/Contents/MacOS/Foo...
dyld: Library not loaded: /usr/local/lib/libavformat.54.29.104.dylib
  Referenced from: /usr/local/lib/libopencv_highgui.2.4.3.dylib
  Reason: image not found
The program has unexpectedly finished.
/Users/Me/MyApp/Contents/MacOS/Foo exited with code 0 
```

我查看了我`/usr/local/lib`的文件，文件在那里正确链接，问题是`libav`现在版本更高并且`opencv`没有反映这一点（例如，在十六进制编辑器中查看 opencv dylib 我发现它想要什么上面说，但实际上在我的 lib 文件夹中的是版本`54.59.106`。我尝试运行`brew update/upgrade`并重新链接所有内容，但没有运气。

我可以通过复制有问题的 dylib 并将它们重命名为旧版本来快速修复。这确实会导致程序正确打开，但这有点麻烦。

显然我可以通过重新安装相关库来解决这个问题，但这需要宝贵的时间..从这个线程来看，这似乎是唯一的选择，但我不知道这是否已经修复：[https ://github.com /mxcl/homebrew/issues/11832](https://github.com/mxcl/homebrew/issues/11832)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:47:44.393

似乎解决此问题的唯一方法是运行：

`brew rm ffmpeg && brew install ffmpeg`

`brew rm opencv && brew install opencv`

可能不需要repour ffmpeg，但我没有看到它有任何危害。事实证明，当一个包更新到一个主要的新版本而另一个包还没有更新时，有时会发生这种情况。

# android - 在 Android 中检查 Internet 连接

> ID：14358952
> 
> 赞同：1
> 
> 时间：2013-01-16T12:52:33.630
> 
> 标签：android, connection, android-internet

是否有任何后台任务在应用程序中运行以检查以下常见情况的互联网连接？

1.开始从服务器解析/获取数据

2.在解析/从服务器获取之间

任何示例代码或链接都对我有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:00:13.847

您可以启动`IntentService`or`Service`并使用它：

```
public boolean CheckInternet() 
    {
        ConnectivityManager connec = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        android.net.NetworkInfo wifi = connec.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
        android.net.NetworkInfo mobile = connec.getNetworkInfo(ConnectivityManager.

        if (wifi.isConnected()) {
            return true;
        } else if (mobile.isConnected()) {
            return true;
        }
        return false;
    } 
```

也不要忘记将此权限添加到`AndroidManifest`文件中：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:57:41.993

您可以为这两项任务使用服务。

*   对于第一个，在下载开始时调用服务。

*   在服务中使用一段时间后执行的线程来检查活动的互联网连接。

**编辑-**

它可能是这样的，

```
Thread thread = new Thread()
{
      @Override
      public void run() {
          try {
              while(true) {
                  sleep(1000);
                  Toast.makeText(getBaseContext(), "Running Thread...", Toast.LENGTH_LONG).show();
                  // Check internet connectivity here
              }
          } catch (InterruptedException e) {
           Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_LONG).show();
          }
      }
  };

thread.start(); 
```

也看看这个[帖子](https://stackoverflow.com/a/4178756/1626878)。

我还发现了另外两个选择，

看看**定时器任务**和**警报管理器**也可以在一段时间后检查互联网连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-14T15:16:12.363

您可以使用以下实用程序类，确保在清单中授予 Internet 权限。

让我知道是否有任何问题。

```
private static NetworkUtil mInstance;
private volatile boolean mIsOnline;

private NetworkUtil() {
    ScheduledExecutorService exec = Executors.newSingleThreadScheduledExecutor();
    exec.scheduleAtFixedRate(new Runnable() {
        @Override
        public void run() {
            boolean reachable = false;
            try {
                Process process = java.lang.Runtime.getRuntime().exec("ping -c 1 www.google.com");
                int returnVal = process.waitFor();
                reachable = (returnVal==0);
            } catch (Exception e) {
                e.printStackTrace();
            }
            mIsOnline = reachable;
        }
    }, 0, 5, TimeUnit.SECONDS);
}

public static NetworkUtil getInstance() {
    if (mInstance == null) {
        synchronized (NetworkUtil.class) {
            if (mInstance == null) {
                mInstance = new NetworkUtil();
            }
        }
    }
    return mInstance;
}

public boolean isOnline() {
    return mIsOnline;
} 
```

# sql - SQL 将字符串转换为日期

> ID：14358954
> 
> 赞同：0
> 
> 时间：2013-01-16T12:52:39.603
> 
> 标签：sql, sql-server-2005

我正在尝试找到一种方法来提取字符串的第一部分并将其分隔为日期。以下是部分数据的示例。

```
17/10/12 lskell Still waiting for one more signature on the 
```

我尝试将整个字段转换为日期，然后转换为日期，但是这些都失败了吗？

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:02:51.890

为 MySql 试试这个

```
DATE_FORMAT(STR_TO_DATE(SUBSTRING_INDEX(columnname,' ',1), '%d/%m/%y'), '%Y-%m-%d') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:07:39.340

尝试：

```
SELECT SUBSTRING('10/17/12 lskell Still waiting for one more signature on the', 1, 8) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T13:03:57.663

（假设日期采用这种格式）

```
-- MYSQL:

SELECT Str_to_Date(Left(yourstring,8),'%d/%m/%y') from yourtable;

-- Oracle

SELECT TO_DATE(left(yourstring,8),'dd/mm/yy')
from your table;

--- sql server
SELECT CONVERT(DATETIME,left(yourstring,8),120) from your table; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T13:04:51.220

如果你知道

*   字符串中的第一个“单词”将*始终*是日期
*   日期将*始终*用空格与字符串的其余部分隔开
*   日期将具有一致的格式
*   你在 MySQL 工作

然后试试这个：

```
SELECT CAST(SUBSTRING_INDEX(myfield, ' ', 1) AS DATE) adate FROM mytable; 
```

# php - jQuery POST to PHP 没有成功功能

> ID：14358955
> 
> 赞同：2
> 
> 时间：2013-01-16T12:52:41.900
> 
> 标签：php, javascript, jquery

我有一个简单的 jQuery post 函数，它调用 PHP 脚本以便从数据库返回值。

在 Firebug 中，我看到正在以 200 OK 状态调用 PHP 文件，但是没有调用 JS 中的成功函数。

为了测试这个问题，我将 PHP 更改为只回显一个简单的字符串，但效果不佳。

当我直接在浏览器中查看 PHP 文件时，我确实看到了回显的字符串。

这是JS代码：

```
$.post(PATH + "load.php", { id: _id },
    function (data) {
        console.log("LOADED " + data);
}); 
```

这是简单的 PHP 代码：

```
<?
echo "bla bla bla"
?> 
```

我不知道问题是什么。我的 HTML+JS 文件是本地文件，它调用一个在线 PHP 文件。也许这就是原因？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T12:54:27.047

> 我的 HTML+JS 文件是本地文件，它调用一个在线 PHP 文件。也许这就是原因？

答：**是**
原因：**同源策略**规则

[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

**Grant Thomas**提出了一种可能的解决方法：您可以将调用委托给调用外部资源的同源服务器上的方法。

# svn - 使用 sshfs 将 SVN 工作副本存储在服务器上

> ID：14358956
> 
> 赞同：0
> 
> 时间：2013-01-16T12:52:43.337
> 
> 标签：svn, tortoisesvn, sshfs

我正在使用 Tortoise SVN 与我们的存储库进行交互。当我正在开发时，我想立即测试我正在处理的代码。这就是为什么我想使用 sshfs 将我的工作副本存储在网络服务器上。

在这个挂载的驱动器中签出时，Tortoise 给了我以下错误：
错误：数据库已锁定，正在执行语句 'PRAGMA 同步 = OFF;PRAGMA
错误：recursive_triggers = ON;'

签出到本地文件夹或将本地文件夹复制到已安装的驱动器工作。

这是服务器上的任何配置的问题还是 sshfs 的限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:43:03.023

Subversion 使用[SQLite](http://sqlite.org/)来存储工作副本的元数据。SQLite 对存储它的文件系统有一些[特定的要求](http://www.sqlite.org/lockingv3.html#how_to_corrupt)。

我很确定 sshfs 不支持 SQLite 所需的正确锁定。

# .htaccess - 我的本地主机上 joomla 中的 HTaccess 问题

> ID：14358957
> 
> 赞同：0
> 
> 时间：2013-01-16T12:52:46.343
> 
> 标签：.htaccess, joomla, joomla2.5, joomla1.5

我已将我的实时网站复制到我的本地主机以迁移到更高版本。出现的问题是我的菜单和组件没有打开，它说它没有找到任何已分配给菜单的文章和组件。所以我只想知道，如果我将我目前有 1.5.26 版本的 joomla 网站升级到 2.5，那么当我稍后在迁移到更高版本后上传它时它会影响我的网站。一切都会正常工作还是仍然存在htaccess问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:54:50.920

不能保证升级后它会起作用。在我看来，你需要在升级之前让它在本地站点上运行。

尝试禁用 SEF url 并查看该站点是否开始工作。如果是这样，那么您知道这是一个 .htaccess 问题，您应该可以升级和上传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T02:28:12.200

首先确保在您的 Apache 配置中启用了 mod_rewrite。

你得到什么错误 - 500？

# openerp - 从功能字段中删除了metho=True

> ID：14358958
> 
> 赞同：1
> 
> 时间：2013-01-16T12:52:50.780
> 
> 标签：openerp

为什么从新 openerp 的功能字段中删除**method=True参数？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T13:32:10.523

Yes`fields.function()`不再采用“方法”参数[1]。它没用，每个字段都在传递 method=True。也可以传递一个普通函数，它只需要有正确的签名

* * *

[1] 服务器版本 3495 revid odo@openerp.com-20110701232328-flgxulxva70vnyxr 和插件版本 4844 revid odo@openerp.com-20110701234124-a61zl0idvdfz3hyb

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:25:59.153

**method=True**参数不会从 openERP-7 中删除。您可以在插件中检查它。

您可以在第 182-183 行找到[account.py](http://bazaar.launchpad.net/~openerp/openobject-addons/7.0/view/head:/account/account_cash_statement.py)

# c++ - -Wconversion-null 不考虑所有构造函数

> ID：14358960
> 
> 赞同：2
> 
> 时间：2013-01-16T12:52:56.533
> 
> 标签：c++, gcc, g++, gnu

升级一些遗留代码后，我开始收到来自 g++ 的“警告：将 NULL 传递给 'Identifier::Identifier(int)' [-Wconversion-null] 的非指针参数 1”消息。大多数情况下这很好，但似乎没有考虑到具有多个构造函数的类。

例如，拿这个测试代码：

```
#include <stdio.h>

class Identifier
{
  private:
    int m_iID;

  public:
    Identifier(const char* p_c) { m_iID = p_c ? p_c[0] : 0; }
    Identifier(int i) { m_iID = i; }
};

int main(int argc, char* argv[])
{
  Identifier* p_ID = new Identifier(NULL);

  return 0;
} 
```

（请忽略构造函数的实际作用，这只是问题的一个说明。对于上下文，有问题的代码是一个以哈希值形式存储标识符的类。构造函数可以将字符串转换为散列，或直接散列值。）

倒数第三行的“new”语句会引发此警告。令我困惑的是 g++ 显然假设它需要使用 Identifier(int i) 构造函数，而忽略了 Identifier(const char* p_c) 构造函数，它*是*一个指针。

请注意，将整数更改为无符号整数会导致歧义错误，这是 32 位系统。

我知道指定 -Wno-conversion-null 可以解决问题，就像传递 0 或将 NULL 显式转换为 const char* 一样。但我很好奇为什么看似有效的构造函数被忽略了。另外，我想避免大量的搜索和替换工作，同时保持警告处于活动状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:56:15.143

至少在这个 CentOS 机器上，NULL 定义在`linux/stddef.h`：

```
#undef NULL
#if defined(__cplusplus)
#define NULL 0
#else
#define NULL ((void *)0)
#endif 
```

因此，C++ 中的 NULL*是*一个整数；因此编译器`int`默认选择构造函数并给你你看到的警告。

# batch-file - BAT 文件以在不同文件夹中打开另一个 bat 文件

> ID：14358964
> 
> 赞同：1
> 
> 时间：2013-01-16T12:53:15.690
> 
> 标签：batch-file

这是调用位于不同文件夹中的 BAT 文件的正确方法吗？

调用“C:\程序文件...\test.bat”

我无法移动程序 bat 文件，但我的启动 bat 位于与其调用的程序不同的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:40:01.657

```
pushd C:\program files...\test.bat\..\
call test.bat
popd 
```

这是你要找的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:40:11.003

是的，你做得很好。

```
call "C:\your path\your batch.bat" 
```

# c# - C#\Java 和 Java\C# 对 client\server - 客户端（套接字）关闭时正常断开连接

> ID：14358966
> 
> 赞同：3
> 
> 时间：2013-01-16T12:53:17.373
> 
> 标签：c#, java, tcp, client-server

这可能更像是一个讨论而不是一个问题。

**背景：**
我有两对服务器/客户端，一对用 Java 编写，一对用 C# 编写。两对都在做同样的事情。当我使用 Java\Java 和 C#\C# 组合时没有问题。我想让 Java\C# 和 C#\Java 的组合也能正常工作。I\O 没问题，我使用的是表示 XML 格式字符串的字节数组。我一定会使用 TCP。

我需要关心优雅的断开连接，在 Java 中没有这样的事情。当您关闭客户端的套接字时，服务器端套接字仍处于被动关闭状态 - 因此处理此套接字的服务器线程仍然存在，并且在许多客户端的情况下，我最终可能会得到数千个不必要的线程。在 C# 中，调用 TcpClient.Available 来确定缓冲区中是否有数据或客户端是否已关闭（SocketException）就足够了。在Java中，我可以想到两种方法：

1.  您必须向套接字的底层流写入一些内容才能真正测试，另一端是否仍然打开。

2.  您必须让另一方知道，您正在关闭连接的一侧，然后再关闭它。我已经实现了这个，在关闭客户端套接字之前，我将包含 0x04 字节（传输结束）的数据包发送到服务器，服务器通过关闭套接字的服务器端对此字节做出反应。

不幸的是，当涉及到 C#\Java 和 Java\C# 客户端\服务器对时，这两种方法都让我进退两难。如果我希望这些对能够相互通信，我将不得不添加用于将 0x04 字节发送到 C# 客户端的代码，当然还有将其处理到 C# 服务器的代码，这是一种开销。但是我可以忍受不必要的网络流量，主要问题是，这个 C# 代码是核心通信库的一部分，除非绝对必要，否则我不想碰它

**问题：**
Java 中是否有其他方法可以优雅地断开连接，不需要写入底层套接字流并检查结果，因此我也不必在 C# 代码中处理这个问题？当涉及到使用的库时，我可以自由支配，我不必只使用 Java SE\EE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:50:16.397

[我在这个答案中](https://stackoverflow.com/a/9399617/1098603)对这个“优雅的断开连接”主题给出了（我认为是一个）简明的解释，我希望你觉得它有用。

请记住，双方*都必须*使用相同的优雅断开模式。我发现自己试图优雅地断开客户端套接字，但服务器一直在发送数据（没有关闭自己的端），这导致了无限循环......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:22:52.840

答案很明显。在 C# 中也没有像优雅断开这样的东西，它是关于 TCP 协议合约的。所以存在与 Java 相同的问题，只是略有不同，您可以在某些情况下解决 -> 如果您通过 NetworkStream 发送 0 个字节然后检查 TcpClient.Connected 状态，它在某种程度上是正确的。然而，从我在互联网上发现的情况来看，这既不可靠也不受欢迎，如何在 C# 中测试连接。当然在我的 C# 库中它已经被使用了。在 Java 中，您根本无法使用它。

所以我在客户端断开连接时向服务器发送“传输结束”数据包的解决方案是可靠的，我也在 C# 库中引入了它。现在我只是害怕出现第一个错误......

最后一点，我还必须实现某种机制，为崩溃的客户端收集服务器上的处理线程。请记住，如果您正在做类似的事情，则没有客户必然会按预期结束；）

# c - 打印 uint8_t

> ID：14358967
> 
> 赞同：8
> 
> 时间：2013-01-16T12:53:18.347
> 
> 标签：c, debugging

我有`uint8_t orig[ETH_ALEN];`

如何使用打印它`__printf(3, 4)`

定义为`#define __printf(a, b) __attribute__((format(printf, a, b)))`

Orig 应该是以太网硬件地址。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-16T12:56:52.687

使用 C99 格式说明符：

```
#include <inttypes.h>

printf("%" PRIu8 "\n", orig[0]); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-16T12:56:37.250

您需要构造一个合适的格式字符串。该`printf()`函数无法一次性打印数组，因此您需要将其拆分并打印每个`uint8_t`：

```
__printf("MAC: %02x:%02x:%02x:%02x:%02x:%02x\n",
         orig[0] & 0xff, orig[1] & 0xff, orig[2] & 0xff,
         orig[3] & 0xff, orig[4] & 0xff, orig[5] & 0xff); 
```

这`& 0xff`是为了确保onlu 8位被发送到`printf()`；像这样的无符号类型不应该需要它们，`uint8_t`因此您也可以尝试不使用它们。

这假定一个常规的 48 位 MAC，并使用[传统](http://en.wikipedia.org/wiki/MAC_address#Notational_conventions)的冒号分隔的十六进制样式打印。

# javascript - javascript 文件中的变量无法在对象属性中访问

> ID：14358968
> 
> 赞同：0
> 
> 时间：2013-01-16T12:53:25.333
> 
> 标签：javascript, scope, extjs3

我有以下问题。我有一个 JS 文件，其中包含一些变量。我在函数中初始化的那些：

```
var currentYear;
var previousYear;
var urlQuarterDates;
var urlHalfYear;
var urlYear;
var urlMonth;
var urlProposalsSentAndReceived; //= '/Marketing/ListProposalsSentAndReceived';
var urlProposalsResponsibleMonth;

function initTabReportProposalsMonth(_currentYear, _previousYear, _urlViewProposal,
_urlQuarterDates, _urlHalfYear, _urlYear, _urlMonth, _urlProposalsSentAndReceived, 
_urlProposalsResponsibleMonth) {
    currentYear = _currentYear;
    previousYear = _previousYear;
    urlQuarterDates = _urlQuarterDates;
    urlHalfYear = _urlHalfYear;
    urlYear = _urlYear;
    urlMonth = _urlMonth;
    urlProposalsSentAndReceived = _urlProposalsSentAndReceived;
    urlProposalsResponsibleMonth = _urlProposalsResponsibleMonth;
} 
```

我在同一个 JS 文件中定义了一个事件处理程序：

```
function onPeriodSelect(combo, rec, i) {
    var conn = new Ext.data.Connection();
    var params = { }; 
    switch(rec.get('myId'))
    {
        case _currentQuarter1:
            conn.url = urlQuarterDates;
            params.y = currentYear;
            params.index = 1;
            break;
    }
    reload(); //
} 
```

变量 urlQuarterDates 和 currentYear 很容易访问。到目前为止，一切都很好...

我还有一个 ExtJs Grid，其中包含声明为内联的数据存储：

```
var gridSentAndReceived = new Ext.grid.GridPanel({
    title: 'Totaal',
    autoHeight: true,
    autoWidth: true,
    store: new Ext.data.Store({
        id: 'idStoreSentAndReceived',
        proxy: new Ext.data.HttpProxy({ url: urlProposalsSentAndReceived, 
            timeout: 1800000 }),
        reader: new Ext.data.JsonReader(
            {
                root: 'rows'
            },
            [
                { name: 'Status' },
                { name: 'nrOfProposals' },
                { name: 'TotalRevenueHardware' },
                { name: 'TotalRevenueYearly' },
                { name: 'TotalRevenueHours' }
            ]),
        remoteSort: false
    }),
    frame: true,
    iconCls: 'icon-grid',
        columns: [
        ...   
    ],
    viewConfig: {
        forceFit: true
    }
}); 
```

reload() 函数调用gridSentAndReceived 的store 的加载。这会产生一个异常：根本没有定义 url。如果我在其声明处初始化 url（当前已被注释掉，它工作正常。当我使用调试器浏览时，它显示 urlProposalsSentAndReceived*已*初始化。但它声称没有 URL。

这似乎是一个范围问题，因为变量可以从事件处理程序访问，但显然不能从其他地方访问。有人知道如何解决吗？URL 是使用服务器标签创建的，不能放在 JS 文件中。我不喜欢将它们作为文本字符串直接放入 JS 文件中。有没有可能的解决方案？

**更新**

我尝试了更多的东西，但没有任何效果。

我努力了：

```
'beforeload': function (store, options) {
    store.proxy.setUrl('/Marketing/ListProposalsSentAndReceived');
} 
```

但即使这样也没有用。仍然有同样的例外。我真的不知道为什么会失败，我从'api'下的[ExtJs 文档中获取了代码。](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.data.HttpProxy "就在这儿")

现在我别无选择，只能在我的 js 文件中硬编码 url，尽管我非常喜欢使用 servertags 并动态添加它们。希望有一天，当我更改控制器操作的位置时，我会找到一种解决方案，而不是出现运行时错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:03:26.120

这不是范围问题。在您运行您的代码时`urlProposalsSentAndReceived`未定义。如果您通过事件处理程序设置该变量，则该值始终在`gridSentAndReceived`初始化后设置。

# language-agnostic - 列出函数参数顺序的指南

> ID：14358971
> 
> 赞同：0
> 
> 时间：2013-01-16T12:53:39.060
> 
> 标签：language-agnostic

您是否遵循任何规则来确定函数参数的顺序？例如，`float pow(float x, float exponent)`与`float pow(float exponent, float x)`. 具体来说，可以使用 C++，但这个问题对所有编程语言都有效。

我主要关注的是可用性，而不是运行时性能。

**编辑**：一些可能的订购基础可能是：

*   输入与输出
*   通常写“公式”的方式，即从左到写的参数。
*   对函数上下文的参数的特殊性，即，它是“一般”参数，例如系统的单例对象，还是特定的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:58:54.770

在您引用的示例中，我认为顺序是根据数学符号 x ^(exponent)决定的，其中底数写在指数之前并成为左参数。

除了尝试想象您的用户期望和/或容易记住的内容之外，我不知道任何真正合理的一般原则。`std::copy`人们甚至没有完全同意在复制（与比较）时是否应该写（源，目标）或（目标，源）`std::memcpy`，尽管我很确定前者现在更常见。

但是，有很多通用约定，不同的人在不同程度上遵循：

*   如果该功能被认为主要作用于特定对象，则将其放在首位
*   被认为是“配置”函数操作的参数位于被认为是函数的主要主题的参数之后。
*   out-params 排在最后（但我怀疑有些人会反过来）

在某种程度上，这并不重要——即您的用户在多大程度上拥有 IDE，在他们键入函数名称时告诉他们参数顺序。

# java - 执行 mvn sql:execute 时出错

> ID：14358978
> 
> 赞同：2
> 
> 时间：2013-01-16T12:53:55.877
> 
> 标签：java, mysql, maven

我希望 Maven 执行 sql 文件，它生成的数据库模式稍后将在我的程序中使用。但它不起作用，可能是由“DELIMITER”引起的。当我执行'mvn sql:execute'时，它会打印出

```
[ERROR] Failed to execute:  DELIMITER $$ 
```

这是我的 pom.xml 的一部分

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>  
            <artifactId>sql-maven-plugin</artifactId>
            <version>1.5</version>
            <dependencies>
                <dependency>
                    <groupId>mysql</groupId>
                    <artifactId>mysql-connector-java</artifactId>
                    <version>5.1.21</version>
                </dependency>
            </dependencies>
            <executions>
                <execution>
                    <id>init-schema</id>
                    <goals>
                        <goal>site</goal>
                    </goals>
                    <phase>deploy</phase>
                </execution>
            </executions>
            <configuration>
                <driver>com.mysql.jdbc.Driver</driver>
                <username>root</username>
                <password>root</password>
                <url>jdbc:mysql://127.0.0.1:3306/?useUnicode=true&amp;characterEncoding=UTF-8</url>
                <autocommit>false</autocommit>
                <srcFiles>
                    <srcFile>src/main/sql/jellyjolly-schema.sql</srcFile>
                </srcFiles>
            </configuration>
        </plugin> 
```

这是我的 sql 文件的一部分

```
DELIMITER $$

USE `jellyjolly_schema`$$
DROP TRIGGER IF EXISTS `jellyjolly_schema`.`delete_user` $$
USE `jellyjolly_schema`$$

CREATE TRIGGER delete_user
AFTER DELETE
ON jj_users
FOR EACH ROW
BEGIN
    ## delete the posts that belong to the user
    DELETE FROM jj_blog_posts WHERE author_user_id=OLD.user_id;
END
$$ 
```

是不是因为 Maven 调用的 MySQL Java 连接器不支持关键字“DELIMITER”。那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T13:47:06.127

阅读您的评论后，我相信最好的解决方案是[这里接受](https://stackoverflow.com/questions/13072354/sql-maven-plugin-with-multiple-delimiters)的解决方案。也就是说，只使用一个分隔符（最好是默认分隔符，`;`）并使用`sql-maven-plugin`配置来**要求分隔符出现在它自己的行**上以实际成为分隔符。

```
 <configuration>
      <delimiterType>row</delimiterType>
    </configuration> 

```

*（[感谢@Zheka](https://stackoverflow.com/users/794494/zheka)）*

您的触发器将如下所示：

```
CREATE TRIGGER delete_user
AFTER DELETE
ON jj_users
FOR EACH ROW
BEGIN
    ## delete the posts that belong to the user
    DELETE FROM jj_blog_posts WHERE author_user_id=OLD.user_id; # this delimiter is ignored
END
; # this delimiter is recognized 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:00:28.747

您可以像这样在配置中指定新的分隔符`sql-maven-plugin`：

```
 <configuration>
     <delimiter>$$</delimiter>
   </configuration> 

```

有关此配置参数的更多信息，请访问此[页面](http://www.mojohaus.org/sql-maven-plugin/execute-mojo.html#delimiter)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-28T23:52:01.767

如果您不想使用`<delimiterType>row</delimiterType>`其他方式来做到这一点，除了肖恩的回答是摆脱 DELIMITER $$ 和 $$ 并在插件中使用分号以外的分隔符。

首先更改插件中的分隔符，例如

```
<delimiter>;;</delimiter> 
```

然后上面的示例触发器将如下所示

```
USE `jellyjolly_schema`;;
DROP TRIGGER IF EXISTS `jellyjolly_schema`.`delete_user`;;
USE `jellyjolly_schema`;;

CREATE TRIGGER delete_user
AFTER DELETE
ON jj_users
FOR EACH ROW
BEGIN
    ## delete the posts that belong to the user
    DELETE FROM jj_blog_posts WHERE author_user_id=OLD.user_id;
END;; 
```

或者您可以使用其他东西作为插件中的分隔符并更改触发器；；因此

# android - 布局问题

> ID：14358989
> 
> 赞同：0
> 
> 时间：2013-01-16T12:54:32.337
> 
> 标签：android, layout

我对一个相当简单的布局有点麻烦。这里是：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

  <TextView
        android:id="@+id/id1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:ellipsize="end"
        android:maxLines="1"/>

  <TextView
        android:id="@+id/id2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceSmall"/>
</LinearLayout> 
```

3个问题：

*   如何在父 LinearLayout 中垂直居中两个 TextView（或者更好地说，这些视图中的文本）？左视图垂直居中可以，但右视图（因为它的字体较小）不是。它似乎在顶部垂直居中。我显然尝试过使用第二个视图的 layout_gravity ，但这没有任何区别。我可以解决它的唯一方法是将第二个 TextView 包装在 LinearLayout 中，并将其布局高度参数设置为 match_parent （但这是正确的方法吗？）

*   同样，我希望左侧的视图水平居中于左侧，右侧的视图水平居中于右侧。目前，右视图紧挨着左视图放置。我可以解决这个问题的唯一方法是在两个文本视图之间添加类似这样的内容：

    ```
    <TextView
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:text=""> 
    ```

    基本上充当一个间隔，其大小取决于两个 TextView 中文本的长度

*   如果视图的组合文本不适合水平放置，我希望截断左侧视图中的文本。没有换行。目前，左侧视图中的文本只是将右侧的文本“推”出父视图。不知道如何实现这一点（除了添加`android:maxLines="1"`以阻止文本换行）。我试过`android:ellipsize="end"`了，但这似乎没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:20:22.003

最好的方法是使用相对布局，但如果你想在线性布局中做同样的事情而不是在你的 xml 文件中做一些更改 - 首先将线性布局高度设置为匹配父级：

```
<LinearLayout android:layout_width="fill_parent"
android:layout_height="match_parent"
android:orientation="horizonatal"> 
```

-第二个使视图在中心垂直处可见

```
android:layout_gravity="center_vertical" 
```

相同的属性 android:layout_gravity = "center_horizo​​ntal" ，您还必须添加第二个文本视图。

它将使您的两个文本视图都显示在垂直中心，但一个相邻。为了使第二个视图出现在右侧，我认为您可以添加 android:layout_marginLeft="xx dp" 放置一些值来代替 xx。

对于关于截断文本的第三个问题，你应该给你的 TextView 一些大小而不是包装内容。喜欢`android:layout_width ="25dp"` 然后使用`android:ellipsize="end"`.

我想你会明白的……其实我很着急，该离开办公室了。

# php - PHPUnit assertTrue 问题

> ID：14358990
> 
> 赞同：2
> 
> 时间：2013-01-16T12:54:41.973
> 
> 标签：php, phpunit

我正在使用 PHPUnit 来测试我的代码但是当我使用 assertTrue phpunit 时，它的行为符合预期。这是否是 phpunit 的正常行为。我收到以下错误。

无法断言 1 为真。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T12:58:08.170

1 不是“真正的”真实值。你可以试试这个：

```
true == 1 // return true
true === 1 // return false
false == null // return true
false === null // return false 
```

PHPUnit`===`在`assertTrue`. 所以如果你这样做`assertTrue(1);`了，PHPUnit 就会停止，因为断言是错误的。

# php - snowbabel 扩展翻译错误

> ID：14358991
> 
> 赞同：0
> 
> 时间：2013-01-16T12:54:42.553
> 
> 标签：php, typo3, typoscript

我对 Snowbabel 扩展有疑问。我正在使用typo3 4.7.2 版和Snowbabel 3.6.1。我的默认语言是德语和英语。我正在尝试使用 snowbabel 翻译扩展 sr_feuser_register。当我为德语内容添加翻译时，它工作正常。但是英文翻译的问题。在英文翻译中， sr_feuser_register 扩展显示来自 locallang 文件的默认英文文本，而不是使用 snowbabel 翻译的文本。

我需要使用 snowbabel 更改默认的英语语言标签。

可能吗 ？在手册中，我看到我们无法使用 snowbabel 编辑默认文本。如果问题不清楚，请告诉我。

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:30:14.970

Snowbabel 不会触及扩展中的原始标签。所以它不是为编辑默认语言而创建的。

它使用 TYPO3 的“l10n”机制。例如，xml 或 xliff 文件将在typo3conf/l10n/{langKey}/{myext}/../{langKey}.locallang.xml 中创建。

但是您的问题位于此处： http: [//forge.typo3.org/issues/42084](http://forge.typo3.org/issues/42084)

由于typo3 总是将typo3conf/l10n/en/ 中的'en' 更改为'default' 文件将不再起作用。只要这个问题在typo3核心中没有解决，系统就不会识别你在typo3conf/l10n/中的'en'翻译

同时使用 Typoscript 或用钩子覆盖整个翻译文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T05:37:02.630

我们不能为英语语言标签使用单独的数组吗，因为您已经说过无法修改默认语言标签（typo3conf/l10n/en/sr_feuser_register/en.locallang.xml 或扩展 locallang.xml 文件本身) ?

我认为使用打字稿语言配置，您可以获取默认语言的那些英语语言标签。

# social-networking - OrientDB 适合社交网络分析吗？

> ID：14358992
> 
> 赞同：3
> 
> 时间：2013-01-16T12:54:43.553
> 
> 标签：social-networking, traversal, orientdb

我正在尝试使用 OrientDB 进行社交网络分析，但它适合吗？在我的应用程序中，可能有数十亿个节点和关系，因为 OrientDB 支持分布式服务器，所以我认为可扩展性不会成为问题。

我还需要得到一个人的朋友，两个人的共同朋友，朋友推荐和合并两个节点，以防它们实际上是一个人。OrientDB traverse 似乎不太适合这些查询。

OrientDB 是否适合我的应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:14:38.740

当然是！OrientDB SQL Traverse 命令功能强大，但您始终可以使用[Gremlin](https://github.com/tinkerpop/gremlin/wiki)来执行此类操作。

# php - 用户之间交换的 Codeigniter 会话

> ID：14358994
> 
> 赞同：0
> 
> 时间：2013-01-16T12:54:48.367
> 
> 标签：php, codeigniter, session

我在一个客户的网站上遇到了一个问题，似乎两个用户的会话正在交换。我正在使用 CodeIgniter 并具有以下配置：

```
$config['sess_cookie_name']     = 'ci_session';
$config['sess_expiration']      = 7200;
$config['sess_expire_on_close'] = FALSE;
$config['sess_encrypt_cookie']  = FALSE;
$config['sess_use_database']    = TRUE;
$config['sess_table_name']      = 'sessions';
$config['sess_match_ip']        = TRUE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 300; 
```

昨天我遇到了一个问题，其中一位用户在每个页面上都重新生成了他的会话。我增加了会话表中 User-Agent 数据库字段的大小，并将上面的 match_ip 切换为 TRUE，作为额外的预防措施。

今天，似乎有两个用户正在登录，他们每个人的标题中都有“欢迎 X”消息作为另一个人的名字。不幸的是，我只从我的客户那里获得这些信息，所以我无法在我的机器上调试或复制它，因为会话似乎对我来说工作正常（本地和在线）。

有没有人对我如何进一步调试、了解我的情况或问题可能有什么建议或见解？我尝试添加：

```
$this->session->sess_destroy();
$this->session->sess_create(); 
```

关于用户登录，但我不确定这是否是问题所在。

当然，我还仔细检查了我的实际登录代码没有任何问题......但是，它只是从 POST 中检索电子邮件+密码并在数据库中找到匹配的记录，这是通常的过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:09:45.097

好吧，这是一个奇怪的问题，请**提供更长的加密密钥并加密您的 cookie**，看看它们是否再次出现问题。

这些是我在许多网站上使用的设置，没有遇到这个问题（**加密密钥、加密 cookie 和关闭时过期**）。

```
$config['encryption_key'] = 'dkfhlgsugT&(657865876t0967(*)&^)(*&*(&$^&%#%^#_)(+JKBVKHJFDC^*%VR^C@%C^';

$config['sess_cookie_name']     = 'ci_session';
$config['sess_expiration']      = 7200;
$config['sess_expire_on_close'] = TRUE;
$config['sess_encrypt_cookie']  = TRUE;
$config['sess_use_database']    = TRUE;
$config['sess_table_name']      = 'ci_sessions';
$config['sess_match_ip']        = TRUE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 300; 
```

并确保在用户**注销页面**和登录页面上销毁会话（如您所述）：

```
$this->session->sess_destroy(); 
```

# android - 在Android中使用自定义视图无限滚动

> ID：14358996
> 
> 赞同：4
> 
> 时间：2013-01-16T12:54:53.520
> 
> 标签：android, view, calendar, scroll, custom-draw

我正在编写一个日历应用程序，它以面向周的视图显示约会。

我通过在 View 的 onDraw() 中自定义绘图来实现图形。

图形包含固定部分（时间栏）和日历相关部分（天、约会）。

在日历中实现水平滚动的最佳方法是什么？

我不能使用 ScrollView，因为我没有固定的最大宽度，因为用户应该能够在过去和将来“*无限*”滚动。

我想在包含 2 天以上的图像中绘制相关部分，因为周视图需要（一个左一个右），并在 Views Canvas 上绘制具有计算偏移量的位图。

一旦偏移量超过一天，我就不得不重新绘制位图。

有人知道更优雅的解决方案吗？

问候安德烈亚斯

# jquery - jquery ui向上和向下调整块大小，仅垂直

> ID：14358998
> 
> 赞同：0
> 
> 时间：2013-01-16T12:55:06.700
> 
> 标签：jquery, jquery-ui

如何使用 jquery ui 调整块的大小以仅获取垂直方向。好的，在一些调整大小的例子中，通过在块的底部移动，但我需要从顶部方向和底部方向完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T13:07:24.600

您应该首先阅读 JQuery UI Resizable 文档： http: [//docs.jquery.com/UI/API/1.8/Resizable](http://docs.jquery.com/UI/API/1.8/Resizable)但这是答案：您正在寻找此属性：句柄。这允许您声明元素的侧面可以调整大小：{n, s, e ,w}。

[http://jsfiddle.net/n8gTj/](http://jsfiddle.net/n8gTj/) // 你会看到基本的行为。

```
$('.resizable').resizable({
  handles: 'n, s'
}); 
```

从那里，您可以使用“resize”方法和调整大小对象的属性来调整它的大小。

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T12:59:55.580

## [http://jsfiddle.net/N6syV/](http://jsfiddle.net/N6syV/)

```
$(".selector").resizable({
  handles: "n, s",
  resize: function (event, ui) {
    ui.size.width = ui.originalSize.width;
  }
}); 
```