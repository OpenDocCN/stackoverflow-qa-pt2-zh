# StackOverflow 问答 13735000-13735999

# javascript - 将 json 从 erb 传递到 javascript/Jquery

> ID：13735003
> 
> 赞同：0
> 
> 时间：2012-12-06T00:27:06.977
> 
> 标签：javascript, ruby-on-rails-3, html, jquery-ui, erb

我正在尝试将 json 对象从 rails (.erb) 视图传递给 javascript。

这是我的看法：

```
<p>
  <%= content_tag "div", id: "slider", data: {slider: {min: 1, max: 10}} do%>
  <%end%>
</p 
```

还有我的 javascript：

```
jQuery ->
  $('#slider').slider($('#slider').data('slider')) 
```

如何传递`{min: 1, max:1}`给我的咖啡脚本文件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:25:04.517

看看这个[rails cast](http://railscasts.com/episodes/324-passing-data-to-javascript)，特别是[gon gem](https://rubygems.org/gems/gon)。

此外，您的标签正在生成一个带有`data`属性的 div。页面加载后，使用 jquery 找到您的 div 并查询数据属性值。一旦你有了它，你就可以用它做任何你想做的事情。

如果您的 jquery 在您的 erb 文件中，那么它将在您的咖啡脚本之前加载，因此您可以将其存储在一个变量中并将其作为函数的返回值。然后您可以从您的咖啡脚本文件中调用该函数来获取值。

# javascript - JS-如何在 Mouseout 上更改图像

> ID：13735006
> 
> 赞同：4
> 
> 时间：2012-12-06T00:27:13.903
> 
> 标签：javascript, jquery, html, css, animated-gif

我在这里有一个带有鼠标悬停效果的横幅：

如您所见，鼠标悬停效果运行良好，但是我不知道如何制作鼠标移出动画。以下是其当前代码：

Javascript：

```
var gotolink = "#";
function changeimage(imageNumber, url) {
    if (document.images) {
        document.images.targetimage.src = 
            document.getElementById('hiddenImages').children[imageNumber].src;
        gotolink = url;
    }
} 
```

HTML：

```
DIV id=base>
    <DIV id=mapcontainer>
        <A href="javascript:warp()">
            <IMG border=0 name=targetimage src="http://www.keencloudmedia.com/skybluekangaroo/map_wm.gif">
        </A>
    </DIV>

    <DIV id=textcontainer>
        <DIV class=textboxinner1>
            <A onmouseover=changeimage(2,this.href) href="index.html">8CCC REQUESTS/TALKBACK</A>
        </DIV>
        <DIV class=textboxinner2>
            <A onmouseover=changeimage(1,this.href) href="index.html">Alice Springs 8952 7771</A>
        </DIV>
        <DIV class=textboxinner2>
            <A onmouseover=changeimage(0,this.href) href="index.html">Tenant Creek 8952 7182</A>
        </DIV>
        <DIV class=textboxinner3>
            <SPAN class=t3nonelink>...other contact details <A onmouseover=changeimage(2,this.href) href="index.html">here</A></SPAN> 
         </DIV>
     </DIV>
 </DIV>
 <div id="hiddenImages" style="display: none">
     <img src="http://www.keencloudmedia.com/skybluekangaroo/map_wm_hover.gif" name="hoverImage" />
     <img src="http://www.keencloudmedia.com/skybluekangaroo/map_wm_hover2.gif" name="hoverImage2" />
     <img src="http://www.keencloudmedia.com/skybluekangaroo/map_wm.gif" name="originalImage" />
</div> 
```

希望你能帮助我实现鼠标移出效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:48:30.497

我建议使用 'onmouseout="changeimage(2,this.href)"' （在与*mouseover*属性相同的位置。或者使用 jQuery 处理程序，这对于您的需求来说更复杂。

# php - 如果用户名存在于php中，则执行while循环？

> ID：13735012
> 
> 赞同：0
> 
> 时间：2012-12-06T00:28:22.860
> 
> 标签：php, wordpress, do-while

我正在尝试获取以下函数以返回更改后的用户名，并附加一个数字。对于每个相同的用户名，该数字应加一。我正在调用 wordpress 函数 username_exists() 来检查匹配项。请帮忙。谢谢

```
function change_username($name) {

  $q = username_exists($name);
  $i = 0;

   do {
       $name = $name . $i++;
   } while ($q);

   return $name;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T00:31:04.183

您不能“保存”计算结果。此外，您必须单独存储名称的固定部分。通过使用`while`循环而不是像这样来做这两个：

```
$baseName = $name;
$i = 0;

while(username_exists($name)) {
    $name = $baseName . (++$i);
}

return $name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:30:55.313

```
function change_username($name) {

  $q = username_exists($name);
  $i = 0;

   while($q){
       $name = $name . $i++;
       $q = username_exists($name);
   }

   return $name;
} 
```

# java - 为什么值会重复？

> ID：13735014
> 
> 赞同：2
> 
> 时间：2012-12-06T00:28:36.023
> 
> 标签：java, string, hashmap

问题是在输出中，单词 smart 被添加了 2 次。你能告诉我为什么使用相同键的重复值被添加两次。在此先感谢您的帮助！

```
package HashMap;

import java.util.HashMap;
import java.util.Set;

public class Thesaurus {
    HashMap<String, String> words =new HashMap<String, String>();

    public void add(String x,String y)
    {
        if (!words.containsKey(x))
            words.put(x, y);
        else if (!words.containsValue(y))
            words.put(x, words.get(x) + " " + y + " ");
    }
    public void display()
    {
        System.out.println(words);
    }
    public static void main(String[] args) {
        Thesaurus tc = new Thesaurus();
        tc.add("large", "big");
        tc.add("large", "humoungus");
        tc.add("large", "bulky");
        tc.add("large", "broad");
        tc.add("large", "heavy");
        tc.add("smart", "astute");
        tc.add("smart", "clever");
        tc.add("smart", "clever");

        tc.display();
    }
} 
```

输出

```
{smart=astute clever  clever , large=big humoungus  bulky  broad  heavy } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T00:30:50.550

你`else if`的问题。您正在检查`!words.containsValue(y)`，这将检查是否有 value `clever`，而没有。只有`astute clever`. 这将导致 的执行`words.put(x, words.get(x) + " " + y + " ");`，并因此将 的添加`clever`到 的索引中`smart`。

您的`add`方法只能确保单个单词的值的唯一性，而不是多个单词。

您可以通过将`HashMap`单词重新定义为`HashMap<string, HashSet<string>>`并使用该类上的方法来解决此问题；您必须更改`display`方法才能打印出`HashSet`.

# asp.net-mvc-3 - 如何从 HttpRequest 检查动作属性

> ID：13735018
> 
> 赞同：0
> 
> 时间：2012-12-06T00:29:01.467
> 
> 标签：asp.net-mvc-3, jquery

为了尝试优雅地处理来自 ajax 的重定向，我遵循了此[防止表单身份验证。](http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx)但是，我需要能够确定某些属性是否正在装饰进行此调用的操作，因为我只想在某些情况下这样做。我可以从可以在此方法中访问的**HttpRequest**对象中获取此信息吗？

基本上从上面的代码中提取了我想要操作的部分：

```
public class SuppressFormsAuthenticationRedirectModule : IHttpModule {

  private void OnPostReleaseRequestState(object source, EventArgs args) {
      var context = (HttpApplication)source;
      var response = context.Response;
      var request = context.Request; // request is HttpRequest

      if (response.StatusCode == 401 && request.Headers["X-Requested-With"] == 
        "XMLHttpRequest") {

        // TODO HERE:  Check that the controller action contains a particular attribute
        //             and if so do not suppress redirect
        SuppressAuthenticationRedirect(context.Context);
      }
  }
  } 
```

更新：可能值得注意的是，此代码保存在已编译的 DLL 项目中，然后合并到主机 MVC 应用程序中（我们无权访问）。在这种情况下，除非我可以确保它不会影响应用程序中的其余控制器，否则我实际上无法更改默认实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:47:06.117

我尝试尽可能多地使用框架，这就是我选择从 DefaultControllerFactory 公开 GetControllerType 方法的原因。您会注意到 routeData 包含区域、控制器和操作，因此通过一些反思，您可以绕过必须创建派生控制器工厂。

这绝对不是生产准备好的。这只是从请求的操作中获取自定义属性的***一种方式。***

**编辑**：不是设置当前控制器工厂，而是创建一个新的 DerivedControllerFactory

```
var httpApplication = (HttpApplication)sender;
var httpContext = new HttpContext(httpApplication.Request, new HttpResponse(new StringWriter()));
var routeData = RouteTable.Routes.GetRouteData(new HttpContextWrapper(httpContext));
//var factory = ControllerBuilder.Current.GetControllerFactory() as DerivedControllerFactory;
var factory = new DerivedControllerFactory();
var controllerType = factory.GetControllerType(new RequestContext(new HttpContextWrapper(httpContext), routeData), routeData.Values["controller"].ToString());
var methodInfo = controllerType.GetMethod(routeData.Values["action"].ToString());
var attributes = methodInfo.GetCustomAttributes(true);  

public class DerivedControllerFactory : DefaultControllerFactory
{
   public new Type GetControllerType(RequestContext requestContext, string controllerName)
   {
      return base.GetControllerType(requestContext, controllerName);
   }
} 
```

# python - 使 Flask 中的旧会话无效

> ID：13735024
> 
> 赞同：26
> 
> 时间：2012-12-06T00:30:09.033
> 
> 标签：python, flask

如何创建一个新的干净会话并使 Flask 中的当前会话无效？

我使用`make_null_session()`or`open_session()`吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-06T00:42:04.483

我通过调用来做到这一点[`session.clear()`](http://docs.python.org/2.7/library/stdtypes.html#dict.clear)。

编辑：

在阅读了您在另一个答案中的评论后，我发现您正在尝试防止可能使用过去发布的 cookie 进行的重放攻击。我用这种方法尽可能地解决了这个问题*：

*   覆盖 SecureCookieSessionInterface.save_session()，从覆盖的版本复制代码而不是调用它。
*   `save_session()`当调用的覆盖版本时`save_cookie()`，使其`session_expires`在未来 30 分钟后传递一个参数。这会导致超过 30 分钟的 cookie 被视为无效。
*   定期更新会话变量的覆盖版本`save_session()`，以确保`session_expires`定期重写 cookie 及其时间。（我将此会话变量命名为 '_refresh' 并将当前时间存储在其中，然后仅在自上次存储时间以来经过几秒以上时才重写它。这种优化避免了在每个 HTTP 请求上重写 cookie。）

在自定义中复制 Flask 代码`save_session()`使这种方法有点丑陋和脆弱，但是为了更改传递给`save_cookie()`. 如果 Flask 让这件事变得更容易，或者至少实现自己的防范重放攻击的保护措施，那就太好了。

*警告：这种方法本身不会阻止在会话 cookie 的有效生命周期内可能发生的重放攻击。[Liu, Kovacs, Huang, Gouda在](http://www.cse.msu.edu/%7Ealexliu/publications/Cookie/cookie.pdf)[RFC 6896](https://www.rfc-editor.org/rfc/rfc6896#section-7.2)和A Secure Cookie Protocol中讨论了基于 cookie 的会话的这个基本问题。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-01-13T04:29:45.810

如果您有安全问题（每个人都应该有），答案是：

**这是不可能的**

Flask 使用基于 cookie 的会话。当您编辑或删除会话时，您向 CLIENT 发送请求以删除 cookie，普通客户端（浏览器）会这样做。但是如果会话被攻击者劫持，攻击者的会话仍然有效。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-06T03:45:48.663

[`after_request`](http://flask.pocoo.org/docs/api/#flask.Flask.after_request)如果设置了特定标志，您可以添加回调以删除会话 cookie：

```
@app.after_request
def remove_if_invalid(response):
    if "__invalidate__" in session:
        response.delete_cookie(app.session_cookie_name)
    return response 
```

然后，只要您想使会话无效，您只需设置该会话密钥：

```
@app.route("/logout")
def logout():
    session["__invalidate__"] = True
    return redirect(url_for("index")) 
```

另见：[http ://werkzeug.pocoo.org/docs/wrappers/#werkzeug.wrappers.BaseResponse.delete_cookie](http://werkzeug.pocoo.org/docs/wrappers/#werkzeug.wrappers.BaseResponse.delete_cookie)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-06T17:22:40.563

如果您使用默认的烧瓶会话并设置 app.permanent_session_lifetime，那么只要会话已过期，如果用户尝试重播同一会话，则该会话将不起作用。如果您查看 open_session 的源代码，则有一行：

```
max_age = total_seconds(app.permanent_session_lifetime)
try:            
    data = s.loads(val, max_age=max_age)
    return self.session_class(data)
    except BadSignature:
        return self.session_class() 
```

# jaxb - 忽略超类

> ID：13735035
> 
> 赞同：2
> 
> 时间：2012-12-06T00:31:09.177
> 
> 标签：jaxb, eclipselink, moxy

我正在使用一个扩展 JavaFx 组件的类

```
public class MyClass extends Pane {} 
```

我只想序列化该类而不是 Pane 超类。

由于 Jaxb 不支持它，我使用 Eclipselink MOXy 来实现：

**编组器**

```
Map<String, Source> metadataSource = new HashMap<String, Source>();
metadataSource.put("com.myapp", new StreamSource(getClass().getResourceAsStream("/com/myapp/myclass.xml")));

Map<String, Object> properties = new HashMap<String, Object>();
properties.put(JAXBContextProperties.OXM_METADATA_SOURCE, metadataSource);

JAXBContext context = JAXBContext.newInstance(new Class[] {MyClass.class}, properties);
Marshaller m = context.createMarshaller();
m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
m.marshal(new MyClass(), new File("test.xml")); 
```

**我的类.xml**

```
<?xml version="1.0"?>
<xml-bindings 
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    version="2.3">
    <java-types>
        <java-type name="javafx.scene.layout.Pane" xml-transient="true" />
    </java-types>
</xml-bindings> 
```

但我收到了这个错误：

> javax.xml.bind.JAXBException：异常描述：在包 [com.myapp] 上键入的绑定文件中不允许使用包 [javafx.scene.layout] 的 java 类型。- 带有链接异常：[异常 [EclipseLink-50037] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345): org.eclipse.persistence.exceptions.JAXBException

我花了几个小时寻找一些信息，但没有找到..

任何帮助，将不胜感激 ！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:54:30.203

您可以使用 MOXy 的外部映射文档来指定超类型`java.lang.Object`而不是`Pane`.

```
<?xml version="1.0"?>
<xml-bindings 
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="com.example">
    <java-types>
        <java-type name="MyClass" super-type="java.lang.Object"/>
    </java-types>
</xml-bindings> 
```

**回答相关问题**

*   [将 MOXy 的元数据与实现 java.util.Map 的类一起使用时的 NPE](https://stackoverflow.com/questions/10075634/npe-when-using-moxys-meta-data-with-a-class-that-implements-java-util-map/10091556#10091556)

# php - 不允许使用“Options +FollowSymLinks +SymLinksIfOwnerMatch”的 htaccess 重定向循环

> ID：13735036
> 
> 赞同：0
> 
> 时间：2012-12-06T00:31:12.577
> 
> 标签：php, .htaccess, apache2

我有 phprssreader 的 htaccess，但它让我无法登录到管理区域.. 托管在 ipage 中，似乎是因为`Options +FollowSymLinks +SymLinksIfOwnerMatch`不允许。

在像 hawkhost 这样的另一个主机中它工作正常

这里是htaccess

```
Options +FollowSymLinks +SymLinksIfOwnerMatch
RewriteEngine On
RewriteBase /
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule ^(.*)$ index.php 
```

有什么解决方案，因为我无法`Options +FollowSymLinks +SymLinksIfOwnerMatch`在面板或服务器中启用。

谢谢

# java - Java - 构造函数显然丢失，运算符重载

> ID：13735037
> 
> 赞同：0
> 
> 时间：2012-12-06T00:31:14.823
> 
> 标签：java, class, object, constructor, package

我在另一个类中声明了一个新的“世界”对象，如下所示：

```
fray.World world = new fray.World(); 
```

java编译器抱怨它找不到构造函数（`fray`包中类的位置很好）。

我在 fray.World 类中有以下构造函数：

```
 World() {
        this(100, 100, 100);
    }

    World(int width) {
        this(width, 100, 100);
    }

    World(int width, int length) {
        this(width, length, 100);
    }

    World(int width, int length, int height) {
        this.x = new int[width];
        this.y = new int[length];
        this.z = new int[height];

        this.entities = new Entity[0];
    } 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T00:33:07.597

您应该更改构造函数的*可见性*，以便您可以在其他包中使用它们，它们目前具有包级访问权限。你可以尝试制作它们`public`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T00:34:54.867

除非`World`是 a `static inner class`，否则您将需要使用：

```
fray.World world = new fray().new World(); 
```

# html - HTML - 锁定文本区域中的默认值，用户插入更多信息

> ID：13735038
> 
> 赞同：0
> 
> 时间：2012-12-06T00:31:14.090
> 
> 标签：html, forms, textfield

我不确定如何解释这一点，但是，我想知道是否有任何方法可以“锁定”html 表单中文本区域的一部分。例子：

```
<input name="example" type="text" id="example" valeu="__this part cant be modified__, and here user insert aditional info" /> 
```

然后我得到这个字段值，如下所示：“**这部分不能修改**+用户输入的内容”

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:45:13.210

我不认为你可以，你最好的选择可能只是在提交时将你的默认值附加到他们的输入中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:28:22.427

不，没有，不是`input`元素，不是`textarea`元素。

但是，您可以对这种行为产生一种印象，例如`input`在同一行上放置一些文本和一个元素，并将它们的样式设置为尽可能相似（设置所有文本、背景和边框属性）。当然，表单数据仍然由`input`值组成。并且在客户端 JavaScript 中将固定文本添加到它之前是可能的，但通常没有意义，因为它本质上是不可靠的，并且因为您可以简单地让表单处理程序表现得好像它得到了那个字符串（即，让它像构建的那样） - 数据）。

# jquery - 如何使用 jquery 解决活动列表的问题

> ID：13735041
> 
> 赞同：1
> 
> 时间：2012-12-06T00:31:29.207
> 
> 标签：jquery

我在尝试更改类的值时遇到问题。我有以下内容：

**我的 HTML**。这是一个菜单：

```
<ul class="nav">
<li class="active">
<a href="home.php">Inicio</a>
</li>
<li>
<a href="correspondencia.php">Entrada</a>
</li>
</ul> 
```

**我的查询**：

```
$(document).ready(function(){
    $('ul.nav li').click(function() {    
    $('ul.nav li').removeClass('active');
    $(this).addClass('active');
    });
}); 
```

我想从**Inicio**中删除活动类并将活动类添加到**Entrada**，但是当我单击它时不会更改。

我不知道是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:36:26.357

你应该使用`$().on('click', function() {});`：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

```
$(document).ready(function(){
    // Here us on
    $('ul.nav a').on('click', function(e) {
        // Do not go to the page ? 
        e.preventDefault() ;
        // Select only the active one (was not a problem but is proper)
        $('ul.nav .active').removeClass('active');
        $(this).parent().addClass('active');
    });
}); 
```

**编辑：**听对`a`元素的点击。它更好。示例已更新。 **编辑 2：**这是一个 jsFiddle： http: [//jsfiddle.net/KdaHh/](http://jsfiddle.net/KdaHh/) **编辑 3：**由于 Mickael 的评论，删除了一个错误的假设。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:11:39.230

我相信您使用的是 Jquery。
看看这个[http://api.jquery.com/parent/](http://api.jquery.com/parent/)

```
$(document).ready( function(){
   $('a').click(function(){
       $('a').parent().removeClass('active');
       $(this).parent().attr('class', 'active');
   }
}); 
```

此代码段

```
$('a').parent().removeClass('active'); 
```

只是从锚标记中删除所有`active`类，下面的代码片段将类添加到当前点击`li``active`

```
$(this).parent().attr('class', 'active'); 
```

# android - 扩展android.app.Service并在c中实现android.content.ServiceConnection

> ID：13735043
> 
> 赞同：1
> 
> 时间：2012-12-06T00:31:47.757
> 
> 标签：android, c++

我正在开发一个多平台移动项目。我们正在使用 c++ 与目标 c 混合或直接调用 java 函数 (NDK) 来实现这一点。我想保留这个成语，而不是编写任何 Java 代码。

我想实现 Google 应用内计费，但​​计费服务需要从 Android SDK 扩展 Service 和实现 ServiceConnection。下面的代码会起作用吗？

**计费服务.h**

```
#include "android/app/Service.hpp"
#include "android/content/ServiceConnect.hpp"

Class BillingService : public Service, public ServiceInterface
{
    virtual void android::content::ServiceConnection::onServiceDisconnected(local_ref<   android::content::ComponentName > const &a0) = 0;

    virtual void android::content::ServiceConnection::onServiceConnected(local_ref< android::content::ComponentName > const &a0, local_ref< android::os::IBinder > const &a1) = 0;

    virtual void void onCreate() = 0;

    // all other method in Service that need to be extends .... 
 } 
```

# sql - 可以运行 SQL 循环来增加被选择的值吗？

> ID：13735046
> 
> 赞同：1
> 
> 时间：2012-12-06T00:32:10.267
> 
> 标签：sql

我研究了动态 SQL 和 inc() 函数，但两者都不是我真正想要的。

假设我有一个这样的数据库：

```
grade     name      age
9         Bob       9
10        Sue       11
11        Larry     15
9         Joe       8
10        Carrot    10 
```

我想创建一个表，首先选择所有最低等级 (9) 的行，然后显示最旧的行。然后它会遍历并搜索下一个最高等级 (10) 并显示最旧的等级。然后转到下一个最高等级 (11) 并显示最旧的。

我希望他们都在同一张表中，而不必为每个年级写出单独的 SQL 调用和不同的 PHP 变量。

这是我现在的 SQL 调用：

```
$query = "SELECT * FROM horses WHERE grade='1' ORDER BY points DESC LIMIT 1" or die(mysql_error()); 
```

有没有办法让等级列递增，直到它达到数据库中的最高数字？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:35:29.237

如果我理解您的要求，您不需要循环。相反，您需要一个`MAX()`按`grade`. 以下方法应独立于您的 RDBMS 工作。它依赖于一个`JOIN`针对子查询的子查询，该子查询返回最大的`age`per`group`以获取该`age/group`对并将其连接回主表以检索`name`（和其他需要的列）。

```
SELECT
  horses.grade, 
  horses.name, 
  horses.age
FROM
  horses
  JOIN (
    SELECT grade, MAX(age) as maxage
    FROM horses 
    GROUP BY grade
  ) ma ON horses.grade = ma.grade AND horses.age = ma.maxage
ORDER BY grade ASC 
```

### [这是](http://sqlfiddle.com/#!2/140a0/2)SQLFiddle.com 上的一个示例

### 回报：

```
GRADE NAME  AGE
9     Bob    9
10    Sue    11
11    Larry  15 
```

在一个循环中执行一个查询而不是多个查询通常更快且资源密集度更低，因此应尽可能采用这种方法*。*

# batch-file - 如何将 cURL 输出捕获到文件中？

> ID：13735051
> 
> 赞同：581
> 
> 时间：2012-12-06T00:32:33.937
> 
> 标签：batch-file, curl

我有一个文本文档，其中包含一堆这种格式的 URL：

```
URL = "sitehere.com" 
```

我要做的是运行`curl -K myfile.txt`，并将响应 cURL 返回的输出放入文件中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：825
> 
> 时间：2012-12-06T00:44:02.523

```
curl -K myconfig.txt -o output.txt 
```

写入您指定的文件中收到的*第一个*输出（如果存在旧的则覆盖）。

```
curl -K myconfig.txt >> output.txt 
```

将您收到的所有输出附加到指定文件。

**注意：-K 是可选的。**

* * *

## 回答 #2

> 赞同：232
> 
> 时间：2017-11-17T06:42:18.000

对于单个文件，您可以使用`-O`而不是`-o filename`使用 URL 路径的最后一段作为文件名。例子：

```
curl http://example.com/folder/big-file.iso -O 
```

将结果保存到当前文件夹中名为**big-file.iso的新文件中。**这样，它的工作方式类似于[wget](http://manpages.ubuntu.com/manpages/zesty/en/man1/wget.1.html)，但允许您指定使用 wget 时不可用的其他[curl 选项。](http://manpages.ubuntu.com/manpages/zesty/en/man1/curl.1.html)

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2019-03-28T07:17:12.087

有几个选项可以将 curl 输出到文件

```
 # saves it to myfile.txt
curl http://www.example.com/data.txt -o myfile.txt

# The #1 will get substituted with the url, so the filename contains the url
curl http://www.example.com/data.txt -o "file_#1.txt" 

# saves to data.txt, the filename extracted from the URL
curl http://www.example.com/data.txt -O 

# saves to filename determined by the Content-Disposition header sent by the server.
curl http://www.example.com/data.txt -O -J 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2021-10-01T19:50:33.483

在这种情况下可以使用或`curl`。`wget`所有这 3 个命令都执行相同的操作，在 http://path/to/file.txt 下载文件并将其保存到本地“my_file.txt”中：

```
wget http://path/to/file.txt -O my_file.txt  # my favorite--it has a progress bar
curl http://path/to/file.txt -o my_file.txt
curl http://path/to/file.txt > my_file.txt 
```

*注意第一个`-O`是大写字母“O”。*

该`wget`命令的好处是它显示了一个很好的进度条。

您可以通过比较它们的 sha512 哈希值来证明上述 3 种技术下载的文件完全相同。在运行`sha512sum my_file.txt`上述每个命令并比较结果后运行，显示所有 3 个文件具有完全相同的 sha 哈希（sha 总和），这意味着文件是完全相同的，逐字节。

[另请参阅：[wget 命令下载文件并另存为不同的文件名](https://stackoverflow.com/questions/16678487/wget-command-to-download-a-file-and-save-as-a-different-filename/69411410#69411410)]

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-07-25T17:10:02.333

对于那些想要在剪贴板中复制 cURL 输出而不是输出到文件的人，可以使用cURL 命令后`pbcopy`的管道。`|`

示例：`curl https://www.google.com/robots.txt | pbcopy`。这会将给定 URL 中的所有内容复制到剪贴板。

Linux 版本：`curl https://www.google.com/robots.txt | xclip`

视窗版本：`curl https://www.google.com/robots.txt | clip`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-09-04T02:13:58.690

用于`--trace-ascii output.txt`将 curl 详细信息输出到文件`output.txt`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-14T08:07:08.350

如果要将输出存储到桌面，请使用 git bash 中的 post 命令执行以下命令。它对我有用。

```
curl https://localhost:8080
    --request POST 
    --header "Content-Type: application/json" 
    -o "C:\Desktop\test.txt" 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-07-07T16:47:59.693

您需要在 "URL" -o "file_output" 之间添加引号，否则 curl 无法识别 URL 或文本文件名。

**格式**

```
curl "url" -o filename 
```

**例子**

```
curl "https://en.wikipedia.org/wiki/Quotation_mark" -o output_file.txt 
```

**示例_2**

```
curl "https://en.wikipedia.org/wiki/Quotation_mark" > output_file.txt 
```

**只需确保添加引号即可。**

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-12-24T07:19:07.790

有点晚了，但我认为 OP 正在寻找类似的东西：

```
curl -K myfile.txt --trace-ascii output.txt 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2021-07-20T02:02:24.253

写入您指定的文件中收到的第一个输出（如果存在旧的则覆盖）。

```
curl -K myconfig.txt >> output.txt 
```

# heroku - 根据 1&1，Heroku IP 地址“不ping”？

> ID：13735054
> 
> 赞同：1
> 
> 时间：2012-12-06T00:32:53.373
> 
> 标签：heroku, dns, ping, cname

我已经用 Heroku 在 Cedar 上创建了一个应用程序......并希望我的 1&1 域指向它。

我已按照[此处](https://devcenter.heroku.com/articles/custom-domains#ip-addresses)的说明进行操作，并将域添加到 Heroku - 这在应用程序设置中正确显示。

在 1&1 端，我在名称服务器设置中添加了适当的 CNAME 作为 mydomain.herokuapp.com，它现在显示为“准备就绪”，当我检查 DNS 状态时它就在那里。

但是，48小时后，它仍然没有切换。据我在电话 1&1 上与之交谈的一个人说，这是因为“CNAME url 没有 ping”。恐怕这超出了我的技术知识范围，我不知道这是否意味着我做错了什么。

如果有人可以提供帮助或遇到同样的问题，我将不胜感激。提前谢谢了！

# backbone.js - 在多个视图中访问集合 - Backbone + RequireJS

> ID：13735064
> 
> 赞同：2
> 
> 时间：2012-12-06T00:33:45.100
> 
> 标签：backbone.js, requirejs

我正在开发我的第一个 RequireJS/Backbone 应用程序，但我碰壁了。这里有很多代码气味，我知道我只是缺少模式。

我有一条显示所有促销的路线，还有一条显示特定促销的路线（按 ID）：

```
showPromotions: function () {
    var promotionsView = new PromotionsView();
},
editPromotion: function (promotionId) {
    vent.trigger('promotion:show', promotionId);
} 
```

在我的促销视图初始化程序中，我更新了我的 PromotionsCollection & fetch。我还订阅了集合上的重置事件。这调用 addAll 最终构建所有 Promotions 的 ul 并将其附加到 DOM 中的容器 div 中。

```
define([
  'jquery',
  'underscore',
  'backbone',
  'app/vent',
  'models/promotion/PromotionModel',
  'views/promotions/Promotion',
  'collections/promotions/PromotionsCollection',
  'text!templates/promotions/promotionsListTemplate.html',
  'views/promotions/Edit'
], function ($, _, Backbone, vent, PromotionModel, PromotionView, PromotionsCollection, promotionsListTemplate, PromotionEditView) {
    var Promotions = Backbone.View.extend({
        //el: ".main",
        tagName: 'ul',
        initialize: function () {
            this.collection = new PromotionsCollection();
            this.collection.on('reset', this.addAll, this);
            this.collection.fetch();
        },

        render: function () {
            $("#page").html(promotionsListTemplate);
            return this;
        },
        addAll: function () {
            //$("#page").html(promotionsListTemplate);
            this.$el.empty().append('<li class="hide hero-unit NoCampaignsFound"><p>No campaigns found</p></li>');
            this.collection.each(this.addOne, this);
            this.render();
            $("div.promotionsList").append(this.$el);
        },

        addOne: function (promotion) {
            var promotionView = new PromotionView({ model: promotion });
            this.$el.append(promotionView.render().el);
        }    
    });
    return Promotions;
}); 
```

列表中的每个促销都有一个带有 href 的编辑按钮`#promotion/edit/{id}`。如果我先导航到列表页面，然后单击编辑，它就可以正常工作。但是，我无法直接导航到编辑页面。我知道这是因为我在视图的初始化方法中填充了我的集合。我可以有一个“if collection.length == 0, fetch”类型的调用，但我更喜欢不需要执行这种检查的设计。我的问题：

1.  无论我走哪条路线，我如何确保我的收藏被填充？
2.  我在我的`addAll`方法中调用 render 来拉入我的模板。我当然可以将该代码移入`addAll`，但总体而言，该代码也有异味。我是否应该有一个负责呈现模板本身并根据需要实例化我的列表/编辑视图的“父视图”？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T00:24:43.287

这是一个例子。请记住，有不止一种方法可以做到这一点。事实上，这可能不是最好的，但我自己这样做，所以也许其他人可以帮助我们俩！

首先，您在这个 js 文件中有很多导入。如果您像这样导入它们，随着时间的推移添加/删除它们会更容易管理：

```
define(function( require ){
  // requirejs - too many includes to pass in the array
  var $ = require('jquery'),
      _ = require('underscore'),
      Backbone = require('backbone'),
      Ns = require('namespace'),
      Auth = require('views/auth/Auth'),
      SideNav = require('views/sidenav/SideNav'),
      CustomerModel = require('models/customer/customer');
      // blah blah blah...}); 
```

不过，这只是一个风格建议，您的电话。至于收款业务，是这样的：

```
 Forms.CustomerEdit = Backbone.View.extend({

    template: _.template( CustomerEditTemplate ),

    initialize: function( config ){
      var view = this;
      view.model.on('change',view.render,view);
    },

    deferredRender: function ( ) {
      var view = this;
      // needsRefresh decides if this model needs to be fetched.
      // implement on the model itself when you extend from the backbone
      // base model.
      if ( view.model.needsRefresh() ) {
        view.model.fetch();
      } else {
        view.render();        
      }
    },

    render:function () {
      var view = this;
      view.$el.html( view.template({rows:view.model.toJSON()}) );
      return this;
    }

  });

   CustomerEdit = Backbone.View.extend({

    tagName: "div",

    attributes: {"id":"customerEdit",
                 "data-role":"page"},

    template: _.template( CustomerEditTemplate, {} ),

    initialize: function( config ){
      var view = this;
      // config._id is passed in from the router, as you have done, aka promotionId
      view._id = config._id;

      // build basic dom structure
      view.$el.append( view.template );

      view._id = config._id;
      // Customer.Foo.Bar would be an initialized collection that this view has
      // access to.  In this case, it might be a global or even a "private" 
      // object that is available in a closure 
      view.model = ( Customer.Foo.Bar ) ? Customer.Foo.Bar.get(view._id) : new CustomerModel({_id:view._id});

      view.subViews = {sidenav:new Views.SideNav({parent:view}),
                       auth:new Views.Auth(),
                       editCustomer: new Forms.CustomerEdit({parent:view,
                                      el:view.$('#editCustomer'),
                                      model:view.model})
                                    };

    },

    render:function () {
      var view = this;
      // render stuff as usual
      view.$('div[data-role="sidetray"]').html( view.subViews.sidenav.render().el );
      view.$('#security').html( view.subViews.auth.render().el );
      // magic here. this subview will return quickly or fetch and return later
      // either way, since you passed it an 'el' during init, it will update the dom
      // independent of this (parent) view render call.
      view.subViews.editCustomer.deferredRender();

      return this;
    } 
```

同样，这只是一种方式，可能是非常错误的，但我就是这样做的，而且效果很好。我通常在 dom 中放置一条“加载”消息，子视图最终会用替换 html 呈现。

# java - 有人可以解释这段代码吗？排列码

> ID：13735065
> 
> 赞同：0
> 
> 时间：2012-12-06T00:33:46.047
> 
> 标签：java, recursion, permutation

我正在做一个项目。我在 Interwebz 上找到了有关排列的代码。我想用它作为编写我自己的代码的基础。但是，我真的不明白代码中发生了什么。有人可以帮我解释一下代码到底在做什么吗？

```
public void permutations(String prefix, String s) {
    int n = s.length();
    if (n == 0)
        System.out.println(prefix);
    else {
        for(int i = 0; i < n; i++){
           permutations(prefix + s.charAt(i), s.substring(0, i) + s.substring(i+1, n));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:51:21.053

该方法`permutations`接受一个字符串`prefix`和一个字符串`s`作为其参数。`int`类型`n`被设置为 String 的长度`s`。（字符串的长度是它包含多少个字符）。

现在我们继续讨论`if`-`else`语句。该`if`语句是说，如果 的长度`s`为 0，即`s`是一个空白字符串并且不包含任何信息，那么我们只是将字符串打印`prefix`到控制台。然后该方法将跳过该`else`部分并执行该`permutations`方法之后的代码。

如果不满足该`if`语句的条件，我们将运行该`else`语句，对于 String 中的每个字符`s`，我们将在 的末尾追加（添加）该字符，`prefix`例如，如果`prefix`最初是“hello”字符是“U”，我们会`prefix`变成“helloU”。在我们完成追加所有字符后`s`，我们将使用结果作为新`prefix`字符串。

对于另一个参数 String `s`，我们将参与 String 的一部分，从字符 0（包括）到位置处的字符`i`（不包括）。请注意，字符串索引从 0 开始，一直到 (字符串的长度 - 1)。我们还将字符串的一部分从位置 i + 1（包括）处的字符到 String 中的最后一个字符`s`。我们将使用这个结果作为新的`s`字符串。

然后我们将再次调用该方法，然后如果满足`else`条件，该方法将使用新定义的字符串再次执行。这将继续循环，直到`else`条件不满足，此时方法将停止运行，我们将继续执行下一段代码（如果存在）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T01:31:18.310

`p(String prefix, String s)`取出 1 个字符`s`并将其添加到`prefix`并递归地继续直到`s`为空。

该`s.charAt(i), s.substring(0, i) + s.substring(i+1, n)`部分从 中提取一个字符`s`。假设`s = "Magic!"`，`i = 3`然后`charAt(i) = 'i'`，`s.substring(0, i) = "Mag"`和`s.substring(i+1, n) = c!"`。这分裂`Magic!`成`i`and `Magc!`。下次在循环`i = 4`中将导致`c`+ `Magi!`。因为它对每个字符中的`s`每个字符都这样做，所以在递归步骤之一中将位于前面。

调用层次结构看起来像这样

```
 / p("ab", "c") - "abc"
                 /- p("a", "bc") x
                /                 \ p("ac", "b") - "acb"
               /
              /                   / p("ba", "c") - "bac"
p("", "abc") x ---- p("b", "ac") x
              \                   \ p("bc", "a") - "bca"
               \
                \                 / p("ca", "b") - "cab"
                 \- p("c", "ab") x
                                  \ p("cb", "a") - "cba"

                 ^-- 1st for loop  ^- 2nd for      ^- 3rd one prints 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T00:36:46.093

`permutations(prefix + s.charAt(i), s.substring(0, i) + s.substring(i+1, n));`

实际上，这个置换算法使用的思想是

```
Switching current character with ith character. 
```

假设我们有一个字符串`abc`。所以它的排列是：

`abc, acb, bac, bca, cab, cba`

我们可以发现，这只是`acb`切换`b`并带有前缀`c`。而这只是切换并带有前缀。`abc``a``bca``c``a``bac``b`

然后我们就用同样的思路递归解决置换问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T01:01:03.437

这是一些非常令人困惑的代码，原因有两个：

1.  参数：您应该在第`prefix`一个参数中使用空字符串调用此函数，例如`permutations("", "ab")`打印`"ab"`.
2.  第二个参数中的递归调用`s.substring(0, i) + s.substring(i+1, n)`：注意java`String.substring(x,y)`不会包含第y个字符*。*所以这相当于`s`删除了第 y 个字符。

现在想想当你单步执行`for`循环时会发生什么：第一个参数与ie`""`连接，第二个参数与删除的第一个字符 ie连接。在下一个递归子调用中，变为，第二个参数变为空字符串。所以基本情况被击中，我们打印结果。`"a"``"a"``s``"b"``prefix``"ab"``""``n == 0``"ab"`

现在我们进入 for 循环的下一次迭代，`i == 1`. 现在我们传入`"b"`递归子调用的第一个参数和`"a"`第二个参数。在下一个递归子调用中`prefix`变为`"ba"`and`s.length`为 0，所以又是基本情况： print `"ba"`。

这很聪明，但难以理解。

# ruby - Project Euler：谜语 4 - 我的 Ruby 代码在做什么？

> ID：13735073
> 
> 赞同：-1
> 
> 时间：2012-12-06T00:34:43.510
> 
> 标签：ruby

我***不是***要解决这个谜语。

因此，我正在使用 Ruby 解决 Project Euler 问题。

我用以下方法做了一个回文检查器：

```
def is_palindrome(n)
  if n.to_s == n.to_s.reverse
      true
  else
      false
  end
end 
```

使用这个，我使用下一个方法来尝试找到由两个 3 位数字组成的最大回文。

```
x = 999
y = 998

while y > 100
  if is_palindrome(x * y) == true
    puts (x * y)
  else
    x-=1
    y-=1
  end
end 
```

结果是终端完全适合并卡在 289982 上，必须按 Ctrl+C 才能停止。

正如我所说，我不是在寻找这个谜语的解决方案，但我想知道我的代码正在做什么来实现这一点。我还在学习，所以我的代码可能相当丑陋，所以额外的业力指向任何可以帮助我解决这个问题的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T00:37:29.363

万一找到回文，你就不会减少你的变量。由于变量保持不变，因此再次找到相同的回文。就这样……

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T00:51:34.030

Amadan 解决了你的问题，所以我会去争取额外的业力点 :)

首先，您可以只做`if something`而不是`if something == true`.

另外，你不需要做

```
if something == something_else
  true
else
  false
end 
```

因为`==`运算符返回`true`或者`false`已经返回，所以你的`is_palindrome`方法可以像

```
def is_palindrome(n)
  n.to_s == n.to_s.reverse
end 
```

此外，在 Ruby 中，您通常会看到像这样的方法（布尔检查），在末尾带有问号，因为这真的就像您在问它是/否的问题！所以通常你会看到那个叫做`is_palindrome?(n)`. 您可能会在其他地方看到类似的`Array#empty?`和`Hash#has_key?(k)`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T00:52:01.003

没有回答你的问题，但你对布尔值的使用是可怕的。记住布尔表达式本身返回一个布尔值，你不需要另一个比较。IE

```
def is_palindrome(n)
  if n.to_s == n.to_s.reverse
      true
  else
      false
  end
end 
```

应该：

```
def is_palindrome(n)
  n.to_s == n.to_s.reverse
end 
```

和

```
while y > 100
  if is_palindrome(x * y) == true 
```

应该

```
while y > 100
  if is_palindrome(x * y) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T14:33:37.420

这是我的解决方案：

```
# Find largest palindrome made from the product of two 3-digit numbers

largest = 0
for i in 100..999
  for j in i..999
    product = j*i
    # Check for palindrome and determine largest
    largest = product.to_s == product.to_s.reverse && product > largest ? product : largest
  end
end
p largest 
```

# r - 如何在 R 中添加没有维度的行名

> ID：13735077
> 
> 赞同：3
> 
> 时间：2012-12-06T00:35:08.627
> 
> 标签：r, vector, row, names

```
> Cases <- c(4,46,98,115,88,34)

> Cases
[1]   4  46  98 115  88  34

> str(Cases)
 num [1:6] 4 46 98 115 88 34 
```

我想将行命名为“total.cases”，并且尝试设置没有维度的行名时出错。请参阅预期的输出如下

```
total.cases 4 46 98 115 88 34 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T00:43:01.100

你的问题是`Cases`你定义它是一个原子向量。没有行或列的概念。

我想你可能想要一份清单

```
Cases <- list(total.cases = c(4,46,98,115,88,34))
Cases
## $total.cases
## [1]   4  46  98 115  88  34

str(Cases)
## List of 1
##  $ total.cases: num [1:6] 4 46 98 115 88 34 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T00:44:22.987

你想以特定的方式打印输出还是你真的想要行名？

要打印`Cases`您想要的方式，您可以使用：

```
> cat("total.cases ",Cases,"\n")
total.cases  4 46 98 115 88 34 
```

要分配行名，您首先需要实际拥有行。向量（如`Cases`）没有任何行或列作为维度。但是，您可以转换为矩阵：

```
> matrix(Cases,nrow=1,dimnames=list("total.cases",1:length(Cases)))
            1  2  3   4  5  6
total.cases 4 46 98 115 88 34 
```

# java - 刷新 Java 项目的代码

> ID：13735081
> 
> 赞同：1
> 
> 时间：2012-12-06T00:35:19.267
> 
> 标签：java

我正在使用`Eclipse`，我刚刚构建了一个 servlet，它将接收一个文件名和一个来自表单的文件，并在我的 eclipse 目录中使用用户提供的文件名创建一个新文件。因此，如果用户对文件名说 firstImage 并从他们的桌面获取了一个名为的图像，`stackoverflow.png`那么我的 servlet 将在我的目录中创建一个`firstImage.png`文件并将其内容`stackoverflow.png`放入其中。

问题是假设我填写表格并写入文件`gmustudent/images/firstImage.png`。如果我去那个网址[http://localhost:8086/gmustudent/images/firstImage.png](http://google.com)什么都不会出现。但是一旦我在eclipse中进入gmustudent项目，右键单击它并单击`Refresh`然后`firstImage.png`在目录中弹出并且url现在可以使用。

这显然是一个问题 b/c 我不想每次使用此表单时都刷新我的项目。所以谁能告诉我如何在每次运行 servlet 时刷新项目的 servlet 末尾添加一些代码。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:51:09.177

最好的方法是使用 servlet 并流回图像。流式处理是我们有一个 servlet，它正在读取服务器中的文件，并将字节发送回响应中。

```
public class ImageServlet extends HttpServlet {

    private static final long serialVersionUID = 1L;

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException {

        response.setContentType("image/jpeg");

        String pathToWeb = getServletContext().getRealPath(File.separator);
        File f = new File(pathToWeb + "avajavalogo.jpg");
        BufferedImage bi = ImageIO.read(f);
        OutputStream out = response.getOutputStream();
        ImageIO.write(bi, "jpg", out);
        out.close();

    }

} 
```

`web.xml`。_

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="tomcat-demo" version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

    <servlet>
        <servlet-name>ImageServlet</servlet-name>
        <servlet-class>test.ImageServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ImageServlet</servlet-name>
        <url-pattern>/image</url-pattern>
    </servlet-mapping>

</web-app> 
```

您的网址链接不起作用的原因是您可能没有在`web.xml`文件中映射目录。最佳实践是使用像上面这样的单独 servlet 流回图像。也参考这个[问题](https://stackoverflow.com/a/1154279/813471)。

# r - 在ggplot散点图中着色不同的点簇

> ID：13735089
> 
> 赞同：-2
> 
> 时间：2012-12-06T00:36:25.337
> 
> 标签：r, ggplot2

我正在使用 ggplot 创建散点图

```
mydata <- read.table('CF1_deNovoAssembly.csv', sep=",",hader=TRUE)
ggplot(mydata, aes(log(Consensus.length), log(Average.coverage))) + geom_point() 
```

CF1_deNovoAssembly.csv 中的数据：

```
Name    Consensus length    Total read count    Single reads    Reads in pairs  Average coverage
CF1_seqReads contig 1 mapping   81148   77393   45653   31740   68.39
CF1_seqReads contig 2 mapping   5175    4154    2526    1628    57.33
CF1_seqReads contig 3 mapping   43676   43232   25550   17682   70.951
CF1_seqReads contig 4 mapping   33156   28321   16619   11702   61.458
CF1_seqReads contig 5 mapping   194560  158576  93416   65160   58.476
CF1_seqReads contig 6 mapping   26990   27221   16183   11038   72.267
CF1_seqReads contig 7 mapping   35155   34449   20227   14222   70.2
CF1_seqReads contig 8 mapping   110217  111889  65611   46278   73.075
CF1_seqReads contig 9 mapping   96757   87785   51431   36354   65.275
CF1_seqReads contig 10 mapping  169489  155776  91690   64086   65.993
CF1_seqReads contig 11 mapping  280769  215666  126964  88702   55.204
CF1_seqReads contig 12 mapping  29819   30563   17993   12570   73.624
CF1_seqReads contig 13 mapping  120801  116090  68428   47662   69.046
CF1_seqReads contig 14 mapping  172189  154880  91940   62940   64.499
CF1_seqReads contig 15 mapping  105798  88828   52338   36490   60.352
CF1_seqReads contig 16 mapping  212719  200557  117997  82560   67.748
CF1_seqReads contig 17 mapping  36352   29426   17354   12072   57.996
CF1_seqReads contig 18 mapping  1468    2594    1622    972 126.813
CF1_seqReads contig 19 mapping  123801  121038  71234   49804   70.139
CF1_seqReads contig 20 mapping  231369  226726  133732  92994   70.348
CF1_seqReads contig 21 mapping  125419  110004  64774   45230   62.915
CF1_seqReads contig 22 mapping  125818  113356  67034   46322   64.733
CF1_seqReads contig 23 mapping  53872   50388   29824   20564   67.235
CF1_seqReads contig 24 mapping  118273  99252   58798   40454   60.263
CF1_seqReads contig 25 mapping  5569    19834   11758   8076    257.753
CF1_seqReads contig 26 mapping  48830   47879   28265   19614   70.306
CF1_seqReads contig 27 mapping  33566   32370   19280   13090   69.097
CF1_seqReads contig 28 mapping  8357    6684    4046    2638    56.178
CF1_seqReads contig 29 mapping  82328   71998   42670   29328   62.916
CF1_seqReads contig 30 mapping  55288   52415   31023   21392   68.03
CF1_seqReads contig 31 mapping  49849   44216   26142   18074   63.699
CF1_seqReads contig 32 mapping  66991   69598   41202   28396   74.615
CF1_seqReads contig 33 mapping  210958  187922  110992  76930   63.938
CF1_seqReads contig 34 mapping  95028   86002   51080   34922   64.925
CF1_seqReads contig 35 mapping  25219   22685   13567   9118    65.146
CF1_seqReads contig 36 mapping  52506   44863   26493   18370   61.281
CF1_seqReads contig 37 mapping  44807   37939   22745   15194   60.863
CF1_seqReads contig 38 mapping  30091   25919   15355   10564   62.312
CF1_seqReads contig 39 mapping  49730   42295   25445   16850   60.872
CF1_seqReads contig 40 mapping  35166   27239   16101   11138   55.456
CF1_seqReads contig 41 mapping  58239   54831   32311   22520   67.764
CF1_seqReads contig 42 mapping  78398   69994   41578   28416   64.135
CF1_seqReads contig 43 mapping  79163   61667   36637   25030   55.958
CF1_seqReads contig 44 mapping  46179   37621   22479   15142   58.463
CF1_seqReads contig 45 mapping  1501    1209    715 494 55.69
CF1_seqReads contig 46 mapping  35505   36158   21296   14862   73.271
CF1_seqReads contig 47 mapping  108945  100876  59394   41482   66.479
CF1_seqReads contig 48 mapping  36042   30283   17961   12322   60.289
CF1_seqReads contig 49 mapping  125139  102821  60441   42380   59.021
CF1_seqReads contig 50 mapping  33093   31998   18976   13022   69.715
CF1_seqReads contig 51 mapping  19399   14764   8826    5938    54.607
CF1_seqReads contig 52 mapping  39627   30320   17856   12464   54.848
CF1_seqReads contig 53 mapping  12163   9861    5887    3974    58.008
CF1_seqReads contig 54 mapping  4378    3872    2442    1430    62.841
CF1_seqReads contig 55 mapping  107763  96191   56993   39198   64.165
CF1_seqReads contig 56 mapping  167629  143032  84032   59000   61.441
CF1_seqReads contig 57 mapping  97622   80176   47622   32554   58.829
CF1_seqReads contig 58 mapping  56912   56028   32850   23178   70.506
CF1_seqReads contig 59 mapping  15390   16360   9792    6568    76.745
CF1_seqReads contig 60 mapping  80202   71909   42337   29572   64.292
CF1_seqReads contig 61 mapping  45435   39732   23290   16442   62.592
CF1_seqReads contig 62 mapping  17972   15752   9208    6544    63.102
CF1_seqReads contig 63 mapping  41256   40603   23859   16744   70.545
CF1_seqReads contig 64 mapping  110461  93608   54796   38812   60.845
CF1_seqReads contig 65 mapping  62066   53798   31662   22136   62.125
CF1_seqReads contig 66 mapping  1981    1788    1112    676 63.459
CF1_seqReads contig 67 mapping  32249   28939   17121   11818   64.486
CF1_seqReads contig 68 mapping  30129   30299   17873   12426   72.002
CF1_seqReads contig 69 mapping  73494   70081   41307   28774   68.502
CF1_seqReads contig 70 mapping  42147   32350   19106   13244   54.965
CF1_seqReads contig 71 mapping  15109   14803   8827    5976    70.037
CF1_seqReads contig 72 mapping  19446   17197   10277   6920    63.506
CF1_seqReads contig 73 mapping  1203    2160    1410    750 127.011
CF1_seqReads contig 74 mapping  35575   31557   18907   12650   63.833
CF1_seqReads contig 75 mapping  61658   52593   31031   21562   61.218
CF1_seqReads contig 76 mapping  2104    2063    1335    728 69.914
CF1_seqReads contig 77 mapping  58182   49734   29348   20386   61.311
CF1_seqReads contig 78 mapping  55182   54095   32319   21776   70.398
CF1_seqReads contig 79 mapping  35523   34002   19964   14038   68.577
CF1_seqReads contig 80 mapping  5174    8766    5222    3544    119.842
CF1_seqReads contig 81 mapping  69777   59263   35069   24194   60.855
CF1_seqReads contig 82 mapping  23575   21660   12872   8788    65.608
CF1_seqReads contig 83 mapping  3065    2609    1597    1012    61.1
CF1_seqReads contig 84 mapping  332 803 619 184 171.226
CF1_seqReads contig 85 mapping  5538    5060    3028    2032    63.651
CF1_seqReads contig 86 mapping  18727   16636   9814    6822    63.747
CF1_seqReads contig 87 mapping  27818   21227   12585   8642    54.79
CF1_seqReads contig 88 mapping  20439   17310   10266   7044    60.577
CF1_seqReads contig 89 mapping  14937   13026   7656    5370    62.693
CF1_seqReads contig 90 mapping  17570   16529   9787    6742    67.656
CF1_seqReads contig 91 mapping  7927    7372    4374    2998    66.942
CF1_seqReads contig 92 mapping  2695    5155    3143    2012    136
CF1_seqReads contig 93 mapping  28431   22662   13382   9280    57.128
CF1_seqReads contig 94 mapping  10910   8378    5032    3346    54.889
CF1_seqReads contig 95 mapping  11426   11337   6863    4474    70.898
CF1_seqReads contig 96 mapping  39433   36586   21812   14774   66.563
CF1_seqReads contig 97 mapping  65815   66239   39289   26950   72.083
CF1_seqReads contig 98 mapping  11296   11627   6991    4636    73.84
CF1_seqReads contig 99 mapping  27785   22040   13130   8910    56.893
CF1_seqReads contig 100 mapping 26131   20073   11793   8280    55.234
CF1_seqReads contig 101 mapping 825 766 560 206 61.246
CF1_seqReads contig 102 mapping 25869   25524   15286   10238   70.695
CF1_seqReads contig 103 mapping 7747    7244    4356    2888    66.154
CF1_seqReads contig 104 mapping 34292   28755   16913   11842   60.05
CF1_seqReads contig 105 mapping 17219   16000   9346    6654    66.858
CF1_seqReads contig 106 mapping 39990   34798   20590   14208   62.384
CF1_seqReads contig 107 mapping 38227   33283   19721   13562   62.381
CF1_seqReads contig 108 mapping 1825    1439    919 520 54.89
CF1_seqReads contig 109 mapping 5333    4212    2494    1718    57.046
CF1_seqReads contig 110 mapping 13827   11248   6582    4666    58.276
CF1_seqReads contig 111 mapping 25486   22477   13277   9200    63.393
CF1_seqReads contig 112 mapping 15592   13751   8295    5456    63.048
CF1_seqReads contig 113 mapping 6230    4864    2986    1878    55.995
CF1_seqReads contig 114 mapping 28229   22164   13150   9014    56.051
CF1_seqReads contig 115 mapping 92951   92630   54674   37956   71.557
CF1_seqReads contig 116 mapping 24347   24204   14532   9672    71.386
CF1_seqReads contig 117 mapping 11556   11295   6657    4638    70.199
CF1_seqReads contig 118 mapping 2750    2553    1683    870 64.722
CF1_seqReads contig 119 mapping 19046   14586   8706    5880    54.681
CF1_seqReads contig 120 mapping 19966   17390   10290   7100    62.622
CF1_seqReads contig 121 mapping 1912    1657    1011    646 62.048
CF1_seqReads contig 122 mapping 1236    5497    3435    2062    318.75
CF1_seqReads contig 123 mapping 1136    852 584 268 53.619
CF1_seqReads contig 124 mapping 414 391 273 118 62.2
CF1_seqReads contig 125 mapping 912 931 619 312 72.031
CF1_seqReads contig 126 mapping 915 588 408 180 43.635
CF1_seqReads contig 127 mapping 2039    1853    1165    688 64.089
CF1_seqReads contig 128 mapping 1471    1253    837 416 58.997
CF1_seqReads contig 129 mapping 1148    2382    1560    822 147.665
CF1_seqReads contig 130 mapping 23233   23367   14443   8924    71.842
CF1_seqReads contig 131 mapping 702 472 324 148 47.107
CF1_seqReads contig 132 mapping 855 1461    967 494 120.706
CF1_seqReads contig 133 mapping 461 1027    725 302 157.434
CF1_seqReads contig 134 mapping 1136    834 580 254 52.482
CF1_seqReads contig 135 mapping 1222    1681    1131    550 98.43
CF1_seqReads contig 136 mapping 1316    997 689 308 53.191
CF1_seqReads contig 137 mapping 1923    1880    1204    676 68.222
CF1_seqReads contig 138 mapping 903 601 401 200 47.503
CF1_seqReads contig 139 mapping 604 495 367 128 56.925
CF1_seqReads contig 140 mapping 1854    1651    1081    570 62.929
CF1_seqReads contig 141 mapping 857 1666    1114    552 137.351
CF1_seqReads contig 142 mapping 273 264 214 50  65.048
CF1_seqReads contig 143 mapping 1848    1254    826 428 47.48
CF1_seqReads contig 144 mapping 9112    8829    5223    3606    69.287
CF1_seqReads contig 145 mapping 4959    8350    5042    3308    120.352
CF1_seqReads contig 146 mapping 1160    2386    1570    816 147.567
CF1_seqReads contig 147 mapping 3398    2919    1807    1112    59.74
CF1_seqReads contig 148 mapping 513 491 381 110 65.774
CF1_seqReads contig 149 mapping 2634    2644    1594    1050    71.279
CF1_seqReads contig 150 mapping 2333    1832    1086    746 54.456
CF1_seqReads contig 151 mapping 9929    8130    4910    3220    58.649
CF1_seqReads contig 152 mapping 4867    4591    2765    1826    66.831
CF1_seqReads contig 153 mapping 2244    1984    1278    706 61.906
CF1_seqReads contig 154 mapping 3008    2557    1581    976 61.333
CF1_seqReads contig 155 mapping 553 1015    733 282 130.448
CF1_seqReads contig 156 mapping 735 974 662 312 91.188
CF1_seqReads contig 157 mapping 1375    2157    1507    650 110.765
CF1_seqReads contig 158 mapping 211 168 160 8   54.796
CF1_seqReads contig 159 mapping 211 174 160 14  56.749
CF1_seqReads contig 160 mapping 3076    3113    1855    1258    73.188
CF1_seqReads contig 161 mapping 1965    1474    998 476 51.869
CF1_seqReads contig 162 mapping 2495    2055    1301    754 57.74
CF1_seqReads contig 163 mapping 230 201 183 18  59.178
CF1_seqReads contig 164 mapping 899 1786    1176    610 140.673
CF1_seqReads contig 165 mapping 3860    2683    1643    1040    49.358
CF1_seqReads contig 166 mapping 1207    1064    642 422 62.839
CF1_seqReads contig 167 mapping 6068    5769    3555    2214    67.996
CF1_seqReads contig 168 mapping 1345    980 628 352 51.059
CF1_seqReads contig 169 mapping 2407    2119    1233    886 62.073
CF1_seqReads contig 170 mapping 236 409 359 50  119.915
CF1_seqReads contig 171 mapping 2288    1959    1229    730 61.018
CF1_seqReads contig 172 mapping 1214    715 497 218 40.74
CF1_seqReads contig 173 mapping 323 531 431 100 113.607
CF1_seqReads contig 174 mapping 1222    789 529 260 44.583
CF1_seqReads contig 175 mapping 207 188 182 6   61.063
CF1_seqReads contig 176 mapping 2236    2204    1392    812 70.699
CF1_seqReads contig 177 mapping 1173    1189    901 288 70.116
CF1_seqReads contig 178 mapping 757 692 476 216 62.54
CF1_seqReads contig 179 mapping 238 485 413 72  137.378
CF1_seqReads contig 180 mapping 1122    984 670 314 62.156
CF1_seqReads contig 181 mapping 1717    1305    819 486 53.286
CF1_seqReads contig 182 mapping 739 1061    825 236 101.298
CF1_seqReads contig 183 mapping 377 293 231 62  54.255
CF1_seqReads contig 184 mapping 878 837 589 248 67.145
CF1_seqReads contig 185 mapping 905 786 540 246 60.841
CF1_seqReads contig 186 mapping 321 223 189 34  44.969
CF1_seqReads contig 187 mapping 215 251 221 30  77.498
CF1_seqReads contig 188 mapping 1153    1074    718 356 64.892
CF1_seqReads contig 189 mapping 568 441 303 138 53.771
CF1_seqReads contig 190 mapping 582 450 282 168 54.89
CF1_seqReads contig 191 mapping 452 767 585 182 119.653
CF1_seqReads contig 192 mapping 263 218 186 32  58.73
CF1_seqReads contig 193 mapping 313 247 193 54  54.22
CF1_seqReads contig 194 mapping 295 214 174 40  48.346
CF1_seqReads contig 195 mapping 297 197 145 52  47.007
CF1_seqReads contig 196 mapping 346 230 180 50  42.566
CF1_seqReads contig 197 mapping 392 226 180 46  37.457
CF1_seqReads contig 198 mapping 208 168 150 18  53.255
CF1_seqReads contig 199 mapping 660 586 398 188 62.903
CF1_seqReads contig 200 mapping 276 300 250 50  72.681
CF1_seqReads contig 201 mapping 388 269 231 38  45.611
CF1_seqReads contig 202 mapping 353 343 245 98  67.042
CF1_seqReads contig 203 mapping 284 175 139 36  42.144 
```

看着 y 轴，我可以注意到有 3 组点。

![在此处输入图像描述](../Images/34f1fd13ab2d071da6e83a91557ee103.png)

是否有一种算法可以在不使用最大和/或最小 y 值的情况下识别每个组？

![在此处输入图像描述](../Images/b0d52dd2c56538269f7acec432ec0f54.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T22:30:50.610

如果您想使用一些预设值进行分组，`y`那么您可以使用`cut`

一个可重现的例子

```
set.seed(07122012)
DF <- data.frame(y= runif(100), x  = rnorm(100))

# grouping at 0.33 / 0.66

mygroups <-  seq(0,1,l=4)

ggplot(DF, aes(x=x,y=y)) + geom_point(aes(colour= cut(y,breaks = mygroups))) +
  scale_colour_brewer('My groups', palette = 'Set2') 
```

![在此处输入图像描述](../Images/3f93d39611f7144cc7c6611088b180a6.png)

或者你可以做一些简单的聚类（也许是 x 和 y 的`scale`组合`kmeans`）

```
ggplot(DF, aes(x=x,y=y)) + 
  geom_point(aes(colour= factor(kmeans(scale(cbind(x,y)), centers=3)$cluster))) +
  scale_colour_brewer('My groups', palette = 'Set2') 
```

![在此处输入图像描述](../Images/842fda26724f0ae344007d84c508fd1c.png)

# objective-c - 指向 NSStrings 指针的二维数组的 ivar 的属性

> ID：13735092
> 
> 赞同：1
> 
> 时间：2012-12-06T00:36:33.043
> 
> 标签：objective-c, properties, automatic-ref-counting, unsafe-unretained

我想创建一个包含指向 NSStrings 指针的动态二维 c 数组的类。我知道我可以使用包含多个 NSArray 的 NSArray 来模拟二维数组，但如果可能的话，我想使用传统的二维 c 数组来模拟二维数组。除非您使用“__unsafe_unretained”，否则 ARC 不允许将指向 NSString 的指针简单分配给 c 数组的元素：

```
@interface NumberStringsArray : NSObject
{
  @public
  NSString * __unsafe_unretained **_array;
} 
```

为了避免内存泄漏并在分配给 c-array 的每个 NSString 的类中赋予对象所有权，我将指向每个 NSString 对象的指针添加到 NSMutableArray。在 -(void)dealloc 中，我释放了获取的内存以创建二维 c 数组。

这是我的问题：如何根据 _array ivar 声明一个属性，以便我可以将数组的 i,j 元素称为“foobar.array[i][j]”而不是“foobar->array[i ][j]”？

**后来的放大：**除了 __bridge 的东西外，我以与回答者非常相似的方式完成了它。我不知道这是否有区别。我在这里分配二维数组：

```
self->_array = (NSString * __unsafe_unretained **)calloc(_columnCount, sizeof(void *));
if (!self->_array)
  return nil;
for (UINT16 i = 0; i < _columnCount; i++)
{
  self->_array[i] = (NSString * __unsafe_unretained *)calloc(_rowCount, sizeof(void *));
  if (!self->_array[i])
  {
    for (UINT16 a = 0; a < _columnCount; a++)
      if (self->_array[a])
        free(self->_array[a]);
    if (self->_array)
      free(self->_array);
    return nil;
  }
} 
```

我使用从逗号分隔值文件生成的子字符串将指向 NSString 对象的指针放入数组中：

```
NSArray *numbers = [line componentsSeparatedByString: @","];
for (UINT16 i = 0; i < _columnCount; i++)
{
  NSString *number = @"";
  if (i < [numbers count])
    number = [numbers objectAtIndex: i];
  //
  // save it in owners
  //
  [self.owners addObject: number];
  self->_array[i][j] = number;
} 
```

在 -(void)dealloc 我释放所有内存：

```
-(void)dealloc
{
  for (UINT16 i = 0; i < self.columnCount; i++)
    if (self->_array[i])
      free(self->_array[i]);
  if (self->_array)
    free(self->_array);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:41:48.087

你不能，因为你不能为一个 Objective-C 类声明一个具体的对象。所以

```
NumberStringsArray object; 
```

**不允许**。_

您被迫将其声明为

```
NumberStringsArray *object = [[NumberStringsArray alloc] init.. ]; 
```

`->`因此您必须通过应用于指针的正确运算符来访问 ivar 。请注意，`object.something`Objective-C 中的 只是`[object something]`标准 C 中`.`用于访问具体字段的简写`struct`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:32:32.673

声明这个属性：

```
@property (nonatomic) NSString * __unsafe_unretained **_array; 
```

然后您可以分配指向对象的指针：

```
_array= (NSString * __unsafe_unretained **) malloc(M*sizeof(CFTypeRef) );
for(NSUInteger i=0; i<M;i++)
{
    _array[i]= ((NSString * __unsafe_unretained *) malloc(N*sizeof(CFTypeRef) );
    for(NSUInteger j=0; j<N;j++)
    {
        _array[i][j]= (__bridge NSString*) (__bridge_retained CFTypeRef) [[NSString alloc]initWithCString: "Hello" encoding: NSASCIIStringEncoding];
        // I see that you got habit with C so you'll probably like this method
    }
} 
```

然后当你不再需要它时，释放数组：

```
for(NSUInteger i=0; i<M; i++)
{
    for(NSUInteger j=0; j<N;j++)
    {
        CFTypeRef string=(__bridge_transfer CFTypeRef) _array[i][j];
    }
    free(_array[i]);
}
free(_array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:54:53.040

（注意：这解决了创建/使用属性来访问数据，而不是数据应该由传统的 Objective-C 存储管理或 ARC 管理的方式。想想这让我头疼。）

如果您希望只读 C 数组“看起来”像一个 Objective-C 属性，请声明该属性`@property (readonly, nonatomic) char* myProp;`，然后，而不是使用`@synthesize`，为它实现一个 getter，如下所示：

```
-(char**)myProp {
    return myPropPointer;
    // Or, if the array is allocated as a part of the instance --
    return &myPropArray[0];
} 
```

# python - python vs 八度随机生成器

> ID：13735096
> 
> 赞同：8
> 
> 时间：2012-12-06T00:36:57.410
> 
> 标签：python, random, numpy, octave

更具体地说，numpy：

```
In [24]: a=np.random.RandomState(4)
In [25]: a.rand()
Out[25]: 0.9670298390136767
In [26]: a.get_state()
Out[26]: 
('MT19937',
 array([1248735455, ..., 1532921051], dtype=uint32),
 2,0,0.0) 
```

八度：

```
octave:17> rand('state',4)
octave:18> rand()
ans =  0.23605
octave:19> rand('seed',4)
octave:20> rand()
ans =  0.12852 
```

Octave 声称执行相同的算法（Mersenne Twister，周期为 2^{19937-1}）

有谁知道为什么有区别？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T10:17:50.197

不幸的是，Octave 中的 MT19937 生成器不允许您使用单个 32 位整数来初始化它`np.random.RandomState(4)`。如果您使用`rand("seed",4)`它，实际上会切换到先前在 Octave 中使用的 PRNG 的早期版本，该 PRNG 根本不是 MT19937，而是 Fortran `RANDLIB`。

在 NumPy 和 Octave 中获得相同的数字是可能的，但是您必须在 Octave 中破解随机种子生成算法并编写自己的函数来从初始的 32 位整数种子中构造状态向量。我不是 Octave 大师，但通过在 Octave/Matlab 中对位操作函数和整数类进行多次 Internet 搜索，我能够编写以下粗略的脚本来实现播种：

```
function state = mtstate(seed)

state = uint32(zeros(625,1));

state(1) = uint32(seed);
for i=1:623,
   tmp = uint64(1812433253)*uint64(bitxor(state(i),bitshift(state(i),-30)))+i;
   state(i+1) = uint32(bitand(tmp,uint64(intmax('uint32'))));
end
state(625) = 1; 
```

像这样使用它：

```
octave:9> rand('state',mtstate(4));
octave:10> rand(1,5)
ans =

   0.96703   0.54723   0.97268   0.71482   0.69773 
```

只是为了与 NumPy 进行比较：

```
>>> a = numpy.random.RandomState(4)
>>> a.rand(5)
array([ 0.96702984,  0.54723225,  0.97268436,  0.71481599,  0.69772882]) 
```

数字（或至少前五个）匹配。

请注意，该`random`模块提供的 Python 中的默认随机数生成器也是 MT19937，但它使用不同的播种算法，因此`random.seed(4)`产生完全不同的状态向量，因此 PRN 序列也不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T01:14:14.553

如果您查看[Mersenne Twister 算法](http://en.wikipedia.org/wiki/Mersenne_twister)的详细信息，就会发现有很多参数会影响产生的实际数字。我不认为 Python 和 Octave 试图产生相同的数字序列。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-06T00:54:08.337

看起来 numpy 正在返回原始随机整数，而 octave 正在将它们标准化为 0 到 1.0 之间的浮点数。

# c# - 强制浏览器使用 ACTIVE FTP

> ID：13735098
> 
> 赞同：1
> 
> 时间：2012-12-06T00:37:09.520
> 
> 标签：c#, asp.net, asp-classic, web, ftp

我必须通过浏览器从 FTP 服务器下载文件，但我的 PASV 数据通道上的端口被防火墙阻止。

有什么办法可以强制浏览器使用 ACTIVE FTP？

我有可用的端口 20 和 21。我在 IIS 服务器上的 [6000-7000] 上打开了我的 DATAPORTS，但我的防火墙不允许任何东西通过，我无法访问防火墙。

目前，我只是在使用`<a href="ftp://....>File</a>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:35:35.113

> 有什么办法可以强制浏览器使用 ACTIVE FTP？

不幸的是，没有 - 如果链中的防火墙阻止它，则不能强制它，因为您需要能够接受传入的 TCP 连接。如果您的防火墙阻止了这些，那么就没有任何帮助。

> FTP 可以在主动或被动模式下运行 [...] 在主动模式下，客户端创建到服务器的 TCP 控制连接并向服务器发送客户端的 IP 地址和任意客户端端口号，然后等待直到服务器启动通过 TCP 到该客户端 IP 地址和客户端端口号的数据连接。**在客户端位于防火墙后面且无法接受传入 TCP 连接的情况**下，可以使用被动模式。

来源：[https ://en.wikipedia.org/wiki/File_Transfer_Protocol#Communication_and_data_transfer](https://en.wikipedia.org/wiki/File_Transfer_Protocol#Communication_and_data_transfer)

# android - 有没有办法检测 Android 上使用了哪个蜂窝网络？

> ID：13735100
> 
> 赞同：14
> 
> 时间：2012-12-06T00:37:21.000
> 
> 标签：android

我的应用程序将提供实时视频流。我想知道是否有办法检测用户的设备上是否有 2G、3G 或 4G，以及当前连接属于哪个类别？我的问题专门针对 Android 设备。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-02-12T07:16:43.747

这是[该课程的要点](https://gist.github.com/emil2k/5130324)，因此您可以对其进行分叉和编辑。

```
package com.emil.android.util;

import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.telephony.TelephonyManager;

/**
 * Check device's network connectivity and speed 
 * @author emil http://stackoverflow.com/users/220710/emil
 *
 */
public class Connectivity {

    /**
     * Get the network info
     * @param context
     * @return
     */
    public static NetworkInfo getNetworkInfo(Context context){
        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        return cm.getActiveNetworkInfo();
    }

    /**
     * Check if there is any connectivity
     * @param context
     * @return
     */
    public static boolean isConnected(Context context){
        NetworkInfo info = Connectivity.getNetworkInfo(context);
        return (info != null && info.isConnected());
    }

    /**
     * Check if there is any connectivity to a Wifi network
     * @param context
     * @param type
     * @return
     */
    public static boolean isConnectedWifi(Context context){
        NetworkInfo info = Connectivity.getNetworkInfo(context);
        return (info != null && info.isConnected() && info.getType() == ConnectivityManager.TYPE_WIFI);
    }

    /**
     * Check if there is any connectivity to a mobile network
     * @param context
     * @param type
     * @return
     */
    public static boolean isConnectedMobile(Context context){
        NetworkInfo info = Connectivity.getNetworkInfo(context);
        return (info != null && info.isConnected() && info.getType() == ConnectivityManager.TYPE_MOBILE);
    }

    /**
     * Check if there is fast connectivity
     * @param context
     * @return
     */
    public static boolean isConnectedFast(Context context){
        NetworkInfo info = Connectivity.getNetworkInfo(context);
        return (info != null && info.isConnected() && Connectivity.isConnectionFast(info.getType(),info.getSubtype()));
    }

    /**
     * Check if the connection is fast
     * @param type
     * @param subType
     * @return
     */
    public static boolean isConnectionFast(int type, int subType){
        if(type==ConnectivityManager.TYPE_WIFI){
            return true;
        }else if(type==ConnectivityManager.TYPE_MOBILE){
            switch(subType){
            case TelephonyManager.NETWORK_TYPE_1xRTT:
                return false; // ~ 50-100 kbps
            case TelephonyManager.NETWORK_TYPE_CDMA:
                return false; // ~ 14-64 kbps
            case TelephonyManager.NETWORK_TYPE_EDGE:
                return false; // ~ 50-100 kbps
            case TelephonyManager.NETWORK_TYPE_EVDO_0:
                return true; // ~ 400-1000 kbps
            case TelephonyManager.NETWORK_TYPE_EVDO_A:
                return true; // ~ 600-1400 kbps
            case TelephonyManager.NETWORK_TYPE_GPRS:
                return false; // ~ 100 kbps
            case TelephonyManager.NETWORK_TYPE_HSDPA:
                return true; // ~ 2-14 Mbps
            case TelephonyManager.NETWORK_TYPE_HSPA:
                return true; // ~ 700-1700 kbps
            case TelephonyManager.NETWORK_TYPE_HSUPA:
                return true; // ~ 1-23 Mbps
            case TelephonyManager.NETWORK_TYPE_UMTS:
                return true; // ~ 400-7000 kbps
            /*
             * Above API level 7, make sure to set android:targetSdkVersion 
             * to appropriate level to use these
             */
            case TelephonyManager.NETWORK_TYPE_EHRPD: // API level 11 
                return true; // ~ 1-2 Mbps
            case TelephonyManager.NETWORK_TYPE_EVDO_B: // API level 9
                return true; // ~ 5 Mbps
            case TelephonyManager.NETWORK_TYPE_HSPAP: // API level 13
                return true; // ~ 10-20 Mbps
            case TelephonyManager.NETWORK_TYPE_IDEN: // API level 8
                return false; // ~25 kbps 
            case TelephonyManager.NETWORK_TYPE_LTE: // API level 11
                return true; // ~ 10+ Mbps
            // Unknown
            case TelephonyManager.NETWORK_TYPE_UNKNOWN:
            default:
                return false;
            }
        }else{
            return false;
        }
    }

} 
```

还要确保将此权限添加到您的 AndroidManifest.xml

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission> 
```

**对于所有小于或等于 100kbps 的速度，网络被认为是 2G。**

**对于所有大于 100kbps 和小于 1mbps 的速度，网络被视为 3G。**

**对于所有大于 1mbps 的速度，网络被认为是 4G。**

网络速度的来源包括维基百科[http://en.wikipedia.org/wiki/Comparison_of_wireless_data_standards](http://en.wikipedia.org/wiki/Comparison_of_wireless_data_standards)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-06T00:57:18.790

我不知道有一种方法可以查询设备的硬件功能（存在哪些无线电），但是如果您要问如何检测当前的蜂窝数据连接类型，请查看[`TelephonyManager.getNetworkType()`](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getNetworkType())，它“返回一个常量，指示*当前在*设备上用于数据传输的无线电技术（网络类型） ”。

我会考虑这些值`NETWORK_TYPE_LTE`并`NETWORK_TYPE_HSPAP`表示 4G 连接。由于 3G 和 4G 之间的界限很模糊，并且由于旧技术集得到有效修复（我们没有发明新的 2G 网络），更好的策略可能是识别*不*充分的网络技术并在连接时显示警告正在使用已知的慢速技术（例如，EDGE）。

另请记住，仅网络技术并不一定等同于一定的连接速度。即使是 4G 连接也可能以不足以传输视频的速度运行，这取决于许多因素，其中一些是设备外部的因素（天气、信号强度、设备电池电量、手机信号塔的可用带宽等）

其他注意事项：

*   您应该首先检查活动的网络连接是否是蜂窝连接。为此，请获取[`ConnectivityManager.getActiveNetworkInfo()`](http://developer.android.com/reference/android/net/ConnectivityManager.html#getActiveNetworkInfo())并检查该对象的[`getType()`](http://developer.android.com/reference/android/net/NetworkInfo.html#getType()). 这将指示活动网络是 Wi-Fi 还是蜂窝网络。请记住，可能没有活动网络（`null`将被返回）。

*   您还应该检查[`ConnectivityManager.isActiveNetworkMetered()`](http://developer.android.com/reference/android/net/ConnectivityManager.html#isActiveNetworkMetered())有关当前网络连接是否有数据限制的提示。如果是这样，无论连接类型如何，您都应该在执行数据密集型操作之前警告用户。

# uitableview - 为什么这个 UIButton 不显示为我的 leftBarButtonItem，UIBarButtonItem 似乎设置正确

> ID：13735102
> 
> 赞同：0
> 
> 时间：2012-12-06T00:37:27.153
> 
> 标签：uitableview, uibutton, uinavigationbar, uibarbuttonitem

在我的 RootViewController 中，我将图像设置为 rightBarButtonItem 就像这样，但是在我创建的第二个 ViewController 中，这个“后退”按钮不会显示。我在模拟器和我的 iPhone 上运行它，我可以点击应该显示按钮的区域并调用 goBack{} 方法。只是图像没有显示。有什么想法吗？

此外，就图像而言，我导出它们的方式与导出所有其他图像的方式完全相同。所有其他人都工作正常。图像似乎没有问题，因为我已经用后退按钮图像替换了其他几个图像，但它们都没有显示。我很确定我正在以正确的顺序创建这些图像。无论如何，任何帮助将不胜感激。

从我的 NewGameViewController.m 文件中：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    CGFloat startingPoint = 0.0;
    CGRect bounds = self.view.bounds;
    bounds.origin.y = startingPoint;
    bounds.size.height -= startingPoint;

    self.ivarNewGameTableView = [[UITableView alloc] initWithFrame:bounds style:UITableViewStyleGrouped];
    self.ivarNewGameTableView.separatorStyle = UITableViewCellSeparatorStyleSingleLine;
    self.ivarNewGameTableView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    [self.view addSubview:self.ivarNewGameTableView];

    UIImageView *backgroundImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"background.png"]];
    self.ivarNewGameTableView.backgroundView = backgroundImageView;

    UIImage *mainNavBar = [UIImage imageNamed:@"startNewGameNavBar.png"];
    UIImageView *navBarView = [[UIImageView alloc] initWithImage:mainNavBar];
    [navBarView setFrame:CGRectMake(0.0, 0.0, 320.0, 44.0)];
    [self.navigationController.navigationBar addSubview:navBarView];

    UIButton *back = [UIButton buttonWithType:UIButtonTypeCustom];

    // neither one of the following lines work.  I know they're supposed to be identical, but
    // seen Xcode be picky.
    back.frame = CGRectMake(0.0, 0.0, 54.0, 36.0);
//    [back setFrame:CGRectMake(0.0, 0.0, 54.0, 36.0)];

    [back addTarget:self action:@selector(goBack) forControlEvents:UIControlEventTouchUpInside];
    [back setImage:[UIImage imageNamed:@"back.png"] forState:UIControlStateNormal];
    [back setImage:[UIImage imageNamed:@"backTouched.png"] forState:UIControlStateHighlighted];
    UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithCustomView:back];
    self.navigationItem.leftBarButtonItem = backButton;
}

-(void)goBack {
    NSLog(@"goBack called.");
//    [self.ivarNewGameTableView pushViewController:];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:13:30.150

如果您在导航堆栈中，则为您设置后退按钮项目。正确使用`backBarButtonItem`会得到你喜欢的行为。

*在您想要返回*的主视图控制器上，您需要重载该`backBarButton`项目。

```
UIBarButtonItem *newBackButton = [[UIBarButtonItem alloc] initWithTitle: @"Back" style: UIBarButtonItemStyleBordered target: nil action: nil];

self.navigationItem.backBarButtonItem = newBackButton; 
```

[github上的](https://github.com/jessedc/property-search-sample/commit/616ed6306a00e07c75ba7239424f7848cf0fb49d)一些代码示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T17:00:47.757

好的。终于想通了。问题在于创建我的新游戏视图导航栏时的这一行：

```
[self.navigationController.navigationBar addSubview:navBarView]; 
```

我也在我的根视图的导航栏中这样做了。现在看起来像这样，在两个文件中：

```
UIImage *startNewGameNavBar = [UIImage imageNamed:@"startNewGameNavBar.png"];

// with the key line being this one
[self.navigationController.navigationBar setBackgroundImage:startNewGameNavBar forBarMetrics:UIBarMetricsDefault]; 
```

用菜鸟来说，我希望更多的程序员会使用像我这样的菜鸟，如果您遇到按钮消失在自定义导航栏后面的问题，并且您使用的代码看起来像我的示例，那是因为您是不应该将其添加为子视图。这将其置于其他一切之上。相反，更改导航栏的背景图像，当然，图像会在...（请打鼓）...背景中结束。（结束鼓声）

至于按钮图像的添加，我刚刚创建了一个自定义类型的 UIButton，将图像设置为正常和高亮状态，设置按钮调用我的 goBack 方法，设置其帧大小，并将其分配给 navigationItem 的 leftBarButtonItem 属性：

```
UIButton *backButton =  [UIButton buttonWithType:UIButtonTypeCustom];
[backButton setImage:[UIImage imageNamed:@"back.png"] forState:UIControlStateNormal];
[backButton setImage:[UIImage imageNamed:@"backTouched.png"] forState:UIControlStateHighlighted];
[backButton addTarget:self action:@selector(goBack) forControlEvents:UIControlEventTouchUpInside];
[backButton setFrame:CGRectMake(0.0, 0.0, 54.0, 36.0)];
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:backButton]; 
```

# java - 使用 RSA 进行音频加密

> ID：13735104
> 
> 赞同：1
> 
> 时间：2012-12-06T00:37:36.490
> 
> 标签：java, cryptography, rsa

当我运行以下代码时，解密长度与原始长度不同。所以无法读取音频。

我收到此错误：javax.sound.sampled.UnsupportedAudioFileException: could not get audio input stream from input stream

```
at javax.sound.sampled.AudioSystem.getAudioInputStream(AudioSystem.java:1119)
at MainClass.main(MainClass.java:119) 
```

我的代码在这里：

```
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.math.BigInteger;
import java.util.ArrayList;
import java.util.List;
import java.util.Random;

import javax.sound.sampled.AudioFileFormat;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;

public class MainClass {
public static final int SIZE = 1024;

private BigInteger p, q, n, totient, e, d;
private Random rnd = new Random();

public MainClass() {

    p = new BigInteger(1024, 10, new Random());
    do {
        q = new BigInteger(1024, 10, new Random());
    } while (p.equals(q));

    n = p.multiply(q);

    totient = (p.subtract(BigInteger.ONE)).multiply(q
            .subtract(BigInteger.ONE));

    // System.out.println(p+"\n"+q+"\n"+n+"\n"+totient);
}

public BigInteger getMod() {
    d = e.modInverse(totient);
    // System.out.println("d="+d);
    return d;
}

public BigInteger getE() {
    do {
        e = new BigInteger(SIZE, rnd);
    } while (!e.gcd(totient).equals(BigInteger.ONE)
            || !(e.compareTo(totient) < 0));
    return e;
}

public String encrypt(String msg) {
    BigInteger ciphertext = new BigInteger(msg.getBytes());
    String cipher = (ciphertext).modPow(getE(), getN()).toString();
    return cipher;
}

public String decrypt(String msg) {
    byte[] decryptMsg = (new BigInteger(msg)).modPow(getMod(), getN())
            .toByteArray();
    String plain = new String(decryptMsg);
    return plain;
}

public BigInteger getN() {
    return n;
}

public static void main(String[] args) {

    try {
        List<String> ori = new ArrayList<String>();
        List<String> st1 = new ArrayList<String>();
        List<String> st2 = new ArrayList<String>();
        String s2;

        MainClass mc = new MainClass();
        // StringHelper sh = new StringHelper();
        byte[] input;
        final ByteArrayOutputStream byteOut = new ByteArrayOutputStream();
        // final AudioFileFormat.Type [] types =
        // AudioSystem.getAudioFileTypes();
        final String PATH = "C:\\Users\\Rahul\\Desktop\\adios.wav";
        final AudioInputStream audioInputStream = AudioSystem
                .getAudioInputStream(new File(PATH));

        AudioSystem.write(audioInputStream, AudioFileFormat.Type.WAVE,
                byteOut);
        audioInputStream.close();
        byteOut.close();
        input = ((ByteArrayOutputStream) byteOut).toByteArray();
        System.out.println(input.length);

        input.toString();
        String s = new String(input);
        System.out.println("Original " + s.length() + "\n");

        int i = 0;
        for (i = 0; i + 255 < s.length(); i = i + 256) {
            ori.add(s.substring(i, i + 255));
        }
        ori.add(s.substring(i - 256, s.length() - 1));
        // System.out.println(s.length());
        for (i = 0; i < ori.size(); i++) {
            st1.add(mc.encrypt(ori.get(i)));
        }
        // String s1 = mc.encrypt(s.substring(0, 500));

        // System.out.println("Cipher Text");
        // System.out.println(s1.length()+ "\n"+s1);
        for (i = 0; i < st1.size(); i++) {
            st2.add(mc.decrypt(st1.get(i)));
        }
        // String s2 = mc.decrypt(s1);
        StringBuffer sb = new StringBuffer();
        for (i = 0; i < st2.size(); i++) {
            sb.append(st2.get(i));
        }
        s2 = sb.toString();
        System.out.println("Decrypt" + s2.length() + "\n");
        byte[] output = s2.getBytes();
        ByteArrayInputStream oInstream = new ByteArrayInputStream(output);
        AudioInputStream oAIS = AudioSystem.getAudioInputStream(oInstream);
        AudioSystem.write(oAIS, AudioFileFormat.Type.WAVE, new File(
                "E:\\decrypted.wav"));
        oAIS.close();
        oInstream.close();
    } catch (Exception e) {
        e.printStackTrace();
    }

} 
```

}

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T10:20:41.293

这段代码在很多方面都被破坏了：

1.  您正在使用不安全的 PRNG
2.  `p`并且`q`应该是素数
3.  您没有使用填充。RSA需要填充，最好是OAEP
4.  你对定时攻击持开放态度
5.  RSA 一次只能加密几个字节。在实践中，我们很少使用 RSA 加密实际数据。它很*慢*，它增加了密文的大小，没有标准化的模式，......
6.  滥用字符串。您从`string`to的转换`BigInteger`是胡说八道。你根本不应该使用字符串，你应该直接使用二进制数据。
7.  这不是一个真正的问题，但在实践中，我们选择`e`大于 2 的小素数，例如 3 或 65537。这会显着加快公钥操作。

你应该怎么做：

1.  使用 Java 内置的 RSA
2.  生成一个新的随机 AES 密钥并使用 RSA 对其进行加密
3.  在认证模式下使用 AES 加密实际数据（例如 AES-GCM）
4.  连接 2\. 和 3\. 的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T10:29:28.610

您似乎正在尝试重新发明轮子，同时使其符合讨价还价。Java 有一个内置的加密 API，我强烈建议您使用它。而且您还需要完全掌握在哪里使用哪种加密。

除了您的实现之外，您遇到的一个关键问题是 RSA 是为传递非常小的数据而设计的——本质上，它是另一种算法的密钥，实际上用于执行主要数据的加密。或者换一种说法，如果这有帮助：将 RSA 本质上视为一种密钥传递方案，而不是“加密”算法本身。

你应该：

*   使用标准加密库，使用对称算法（如 AES）加密数据：例如，请参阅我[的 Java 中关于对称/AES 加密的教程](http://www.javamex.com/tutorials/cryptography/symmetric.shtml)
*   仅使用 RSA 作为将用于加密数据的（AES 等）密钥传递给远程客户端的一种方式：同样，我已经写过关于[在 Java 中使用 RSA 的](http://www.javamex.com/tutorials/cryptography/rsa_encryption.shtml)示例代码。

我也非常鼓励您通读我的教程和其他人的教程，以真正尝试并了解密码学正在发生的事情。这是一个相当复杂的领域，在没有很好地理解基本概念的情况下“潜入”可能会导致您编写不安全的代码。

# javascript - 使用开发人员工具识别 javascript 闭包

> ID：13735111
> 
> 赞同：7
> 
> 时间：2012-12-06T00:38:49.320
> 
> 标签：javascript

我目前正在开发一个纯 javascript 的网站，并且严重依赖 jQuery 和 jQuery UI 库（这个网站不打算供公众使用，因此渐进增强不是这个项目的严格要求）。我在执行以下代码时遇到了严重的内存泄漏：

```
oDialogBox = $("<div>...</div>");
/* Add useful things to the dialog box here */
oDialogBox.appendTo("body");
oDialogBox.dialog({
    /* Other dialog box settings here */
    close: function(event, ui) {
        oDialogBox.dialog("destroy");
        oDialogBox.remove();
        oDialogBox = null;
    }
}); 
```

在此对话框中的任何给定时间，我都在创建、删除和修改大量 jQuery UI 按钮、多选（根据 Eric Hynds 创建的多选小部件）和单击事件处理程序的实例。根据 jQuery UI 文档，在 oDialogBox 上调用 .remove()*应该*会导致所有子小部件被解除绑定和删除。然而，我分离的 DOM 树显示了 GC 没有收集的大量垃圾元素。

我很可能错过了大量需要安全完成的关闭。如何执行以下操作：

1) 如何识别哪些闭包使给定的分离 DOM 对象保持活动状态（在 Firefox 或 Chrome 中）？

2) 假设确定了完整的闭包集，除了使变量为空之外，是否需要做任何事情来确保将 DOM 元素标记为垃圾回收？

3）我还注意到我的页面存储的数组列表很大，并且包含对 GC 未收集的 DOM 元素的引用。是否有记录从 javascript 中清除数组并允许将所有元素标记为删除的最佳实践？（注意：这是内存泄漏源的当前主要嫌疑人）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:09:20.917

恐怕我对＃1没有很好的答案。我自己还没有找到任何真正好的工具，即使考虑到过去几年开发工具已经变得多么好。我能给出的最好建议是始终将事情保持在尽可能小的范围内。如果事情没有逃脱，通常更容易找出引用必须在哪里。

至于#2，可能会有更多的担忧。如果变量引用的对象`v1`关闭了某个函数的空闲变量，如果另一个变量在某个其他函数中关闭，则删除`v1`将不足以使它们有资格进行垃圾收集。所以我想如果你真的是指“完整的闭包集”，那么你应该已经准备好了。但这可能会让人毛骨悚然。同样，如果大多数对象仅在狭窄范围内具有引用，则这些问题的严重性要小得多。`v2``v1`

对于#3，你在讨论什么类型的数组？如果是 jQuery 集合，那么您可能只是拥有太多的集合。我知道他们长期存在的唯一原因是将事件处理程序绑定到他们，而这几乎总是由父元素上的事件委托更好地处理。如果它是您自己的自定义数组，您真的有充分的理由将对它们的引用存储在持续任何相当长的时间的数组中吗？我很少找到一个。

# performance - PostgreSQL查询速度是可变的

> ID：13735112
> 
> 赞同：3
> 
> 时间：2012-12-06T00:38:57.977
> 
> 标签：performance, postgresql, sql-execution-plan, generate-series

### 语境

我有一个保存 netflow 数据的表（路由器拦截的所有数据包）。该表目前约有 590 万行。

### 问题

我正在尝试一个简单的查询来计算每天收到的数据包数量，这不会花费很长时间。

我第一次运行它时，查询需要**88 seconds**，然后在第二次运行后，**33 seconds**，然后是**5 seconds**用于所有后续运行。

主要问题不是查询的速度，而是同样的查询执行3次后，速度快了近20倍。
我了解**查询缓存**的概念，但是原始查询运行的性能对我来说毫无意义。

### 测试

我用来加入的列 (datetime) 的类型为`timestamptz`，并已编入索引：

```
CREATE INDEX date ON netflows USING btree (datetime); 
```

看着`EXPLAIN`陈述。执行上的区别在于`Nested Loop`.

我已经有了`VACUUM ANALYZE`表格，结果完全相同。

### 当前环境

*   在 VMware ESX 4.1 上运行的 Linux Ubuntu 12.04 VM
*   PostgreSQL 9.1
*   VM 有 2 GB RAM，2 个内核。
*   数据库服务器**完全致力于**此，没有做任何其他事情
*   每分钟插入表中（每分钟 100 行）
*   非常低的磁盘、内存或 CPU 活动

### 询问

```
with date_list as (
    select
        series as start_date,
        series + '23:59:59' as end_date
    from
        generate_series(
            (select min(datetime) from netflows)::date, 
            (select max(datetime) from netflows)::date, 
            '1 day') as series
)
select
    start_date,
    end_date,
    count(*)
from
    netflows
    inner join date_list on (datetime between start_date and end_date)
group by
    start_date,
    end_date; 
```

### 首次运行说明（88 秒）

```
Sort  (cost=27007355.59..27007356.09 rows=200 width=8) (actual time=89647.054..89647.055 rows=18 loops=1) 
  Sort Key: date_list.start_date 
  Sort Method: quicksort  Memory: 25kB 
  CTE date_list 
    ->  Function Scan on generate_series series  (cost=0.13..12.63 rows=1000 width=8) (actual time=92.567..92.667 rows=19 loops=1) 
          InitPlan 2 (returns $1) 
            ->  Result  (cost=0.05..0.06 rows=1 width=0) (actual time=71.270..71.270 rows=1 loops=1) 
                  InitPlan 1 (returns $0) 
                    ->  Limit  (cost=0.00..0.05 rows=1 width=8) (actual time=71.259..71.261 rows=1 loops=1) 
                          ->  Index Scan using date on netflows  (cost=0.00..303662.15 rows=5945591 width=8) (actual time=71.252..71.252 rows=1 loops=1) 
                                Index Cond: (datetime IS NOT NULL) 
          InitPlan 4 (returns $3) 
            ->  Result  (cost=0.05..0.06 rows=1 width=0) (actual time=11.786..11.787 rows=1 loops=1) 
                  InitPlan 3 (returns $2) 
                    ->  Limit  (cost=0.00..0.05 rows=1 width=8) (actual time=11.778..11.779 rows=1 loops=1) 
                          ->  Index Scan Backward using date on netflows  (cost=0.00..303662.15 rows=5945591 width=8) (actual time=11.776..11.776 rows=1 loops=1) 
                                Index Cond: (datetime IS NOT NULL) 
  ->  HashAggregate  (cost=27007333.31..27007335.31 rows=200 width=8) (actual time=89639.167..89639.179 rows=18 loops=1) 
        ->  Nested Loop  (cost=0.00..23704227.20 rows=660621222 width=8) (actual time=92.667..88059.576 rows=5945457 loops=1) 
              ->  CTE Scan on date_list  (cost=0.00..20.00 rows=1000 width=16) (actual time=92.578..92.785 rows=19 loops=1) 
              ->  Index Scan using date on netflows  (cost=0.00..13794.89 rows=660621 width=8) (actual time=2.438..4571.884 rows=312919 loops=19) 
                    Index Cond: ((datetime >= date_list.start_date) AND (datetime <= date_list.end_date)) 
Total runtime: 89668.047 ms 
```

### 第三次运行的解释（5秒）

```
Sort  (cost=27011357.45..27011357.95 rows=200 width=8) (actual time=5645.031..5645.032 rows=18 loops=1) 
  Sort Key: date_list.start_date 
  Sort Method: quicksort  Memory: 25kB 
  CTE date_list 
    ->  Function Scan on generate_series series  (cost=0.13..12.63 rows=1000 width=8) (actual time=0.108..0.204 rows=19 loops=1) 
          InitPlan 2 (returns $1) 
            ->  Result  (cost=0.05..0.06 rows=1 width=0) (actual time=0.050..0.050 rows=1 loops=1) 
                  InitPlan 1 (returns $0) 
                    ->  Limit  (cost=0.00..0.05 rows=1 width=8) (actual time=0.046..0.046 rows=1 loops=1) 
                          ->  Index Scan using date on netflows  (cost=0.00..303705.14 rows=5946469 width=8) (actual time=0.046..0.046 rows=1 loops=1) 
                                Index Cond: (datetime IS NOT NULL) 
          InitPlan 4 (returns $3) 
            ->  Result  (cost=0.05..0.06 rows=1 width=0) (actual time=0.026..0.026 rows=1 loops=1) 
                  InitPlan 3 (returns $2) 
                    ->  Limit  (cost=0.00..0.05 rows=1 width=8) (actual time=0.026..0.026 rows=1 loops=1) 
                          ->  Index Scan Backward using date on netflows  (cost=0.00..303705.14 rows=5946469 width=8) (actual time=0.026..0.026 rows=1 loops=1) 
                                Index Cond: (datetime IS NOT NULL) 
  ->  HashAggregate  (cost=27011335.17..27011337.17 rows=200 width=8) (actual time=5645.005..5645.009 rows=18 loops=1) 
        ->  Nested Loop  (cost=0.00..23707741.28 rows=660718778 width=8) (actual time=0.134..4176.406 rows=5946329 loops=1) 
              ->  CTE Scan on date_list  (cost=0.00..20.00 rows=1000 width=16) (actual time=0.110..0.343 rows=19 loops=1) 
              ->  Index Scan using date on netflows  (cost=0.00..13796.94 rows=660719 width=8) (actual time=0.026..164.117 rows=312965 loops=19) 
                    Index Cond: ((datetime >= date_list.start_date) AND (datetime <= date_list.end_date)) 
Total runtime: 5645.189 ms 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T00:57:12.237

如果你正在做一个`INNER JOIN`我认为你根本不需要 CTE。你可以定义

```
select
    datetime::date,
    count(*)
from netflows
group by datetime::date /* or GROUP BY 1 as Postgres extension */ 
```

我不明白你为什么需要日期表，除非你想`LEFT JOIN`在适当的地方得到零。这将意味着一次通过数据。

顺便说一句，我不鼓励您对实体和列使用日期和日期时间等关键字；即使合法，也不值得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:53:24.727

```
WITH date_list as (
    SELECT t                  AS start_date
         ,(t + interval '1d') AS end_date
    FROM  (
      SELECT generate_series((min(datetime))::date
                            ,(max(datetime))::date
                            ,'1d') AS t
      FROM   netflows
      ) x
   )
SELECT d.start_date
      ,count(*) AS ct
FROM   date_list     d
LEFT   JOIN netflows n ON n.datetime >= d.start_date
                      AND n.datetime <  d.end_date
GROUP  BY d.start_date; 
```

并为您的索引使用正确的名称（[@Andrew](https://stackoverflow.com/a/13735270/939860)已经暗示）：

```
CREATE INDEX netflows_date_idx ON netflows (datetime); 
```

### 要点

*   假设您希望日历的每一天都有一行，就像@Andrew 在他的回答中已经提到的那样，我`JOIN`用`LEFT JOIN`.

*   *在一个*查询中抓取`min()`和`max()`从网络流中获取效率要高得多。

**   简化的类型转换。

    *   修复了日期范围。您的代码会因时间戳而失败，例如`'2012-12-06 23:59:59.123'`.* 

 *在一张大桌子上进行了测试，性能很好。
至于您*最初的问题*：毫无疑问，缓存效果是可以预料的——尤其是在 RAM 有限的情况下。*

# objective-c - 如何以编程方式创建 SplitView？

> ID：13735114
> 
> 赞同：0
> 
> 时间：2012-12-06T00:39:05.013
> 
> 标签：objective-c, ios, xcode, uisplitviewcontroller

我试图遵循我在 StackOverflow 上找到的其他人的代码，但我根本无法让它工作。

这是我试图遵循的代码： [对于 Iphone 如何从当前加载的视图中引用根视图控制器，因此可以替换/切换视图](https://stackoverflow.com/questions/1645454/for-iphone-how-to-reference-root-view-controller-from-currently-loaded-view-so)

我真的只使用过单视图布局，所以这对我来说很新，尤其是没有在 IB 中这样做。我将使用 Score 页面的新视图。我正在通过 WebKit 为记分板检索内容，它最终将有一个表格来输入您的姓名/姓名首字母，它会保存您的分数，以便您可以检查您如何与其他玩过它的人进行排名，这就是信息我想在拆分视图中。

有大量相关代码，我不确定问题出在哪里，所以这里有一个指向包含 xcode 项目和所有相关文件的 zip 的链接。 [http://mdl.fm/pixelated.zip](http://mdl.fm/pixelated.zip)

我知道这需要代表任何帮助我的人付出很多努力，所以我只想感谢任何愿意提前提供帮助的人。我真的很感激一些关于如何做到这一点的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:57:47.110

这看起来像是你正在做的一个有趣的项目！这是我给你的建议。要获得一个很好的模板，只需在 xcode 中创建一个新项目。选择了一个主细节项目并选择通用。Apple 将自动为您生成一个项目，其中包含适用于 iphone 和 iPad 的故事板。ipad 是一个拆分视图，所以它是一个很好的参考。

创建完成后，去看看appDelegate.m。您将在那里找到识别设备是 iphone 还是 iPad 以及如何初始化根视图控制器的逻辑。

它有故事板可供使用，因此您可以查看它们的设置方式以及视图控制器的分配方式。

使用 splitview 控制器时的一个转折是分配哪个控制器是委托。委托侦听轮换消息并对其进行操作。任一控制器都可以是代理，但通常较小的 on 管理导航内容，而始终在屏幕上的较大的控制器设置为代理并管理旋转事件和按钮舞蹈。

希望这个建议有所帮助。

# php - 为什么 current() 会跳过 foreach() 语句中的第一个数组元素？

> ID：13735116
> 
> 赞同：6
> 
> 时间：2012-12-06T00:39:28.660
> 
> 标签：php, foreach

此代码输出：1 1 1 1

我预计要么 0 0 0 0 要么 0 1 2 3

```
<?php 
$arr = array(0,1,2,3);
foreach($arr as $i)
{
    echo current($arr), ' ';
}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T01:02:40.610

可能的重复：[为什么 PHP 的 foreach 将其数组的指针（仅）推进一次？](https://stackoverflow.com/questions/8263293/why-does-phps-foreach-advance-the-pointer-of-its-array-only-once)

初始化数组后，您会注意到当前索引是`0`.

```
$arr = array(0,1,2,3);
echo current($arr); // outputs 0 
```

当您进入 foreach 时，它会将内部数组指针增加 1，从而形成“当前”值`1`。

注意数组是如何通过*引用*`current()`传递给函数的（[http://php.net/manual/en/function.current.php](http://php.net/manual/en/function.current.php)）。这会导致您正在经历的行为。

 *如果您想获取数组的键，可以将 foreach 更改为：

```
foreach($arr as $key => $i)
{

} 
```*

# sql - 为什么在 SQL 中使用表值函数而不是临时表？

> ID：13735118
> 
> 赞同：3
> 
> 时间：2012-12-06T00:39:51.657
> 
> 标签：sql, stored-procedures, stored-functions

我正在尝试加快我的存储过程怪物的速度，该过程适用于许多表中的数百万条记录。

我偶然发现了这一点： [是否可以在 SQL Server 2008 中使用存储过程作为子查询？](https://stackoverflow.com/questions/4889584/is-it-possible-to-use-a-stored-procedure-as-a-subquery-in-sql-server-2008)

我的问题是为什么使用表值函数比使用临时表更好。

假设我的存储过程@SP1

```
declare @temp table(a int)

insert into @temp 
select a from BigTable 
where someRecords like 'blue%'

update AnotherBigTable
set someRecords = 'were blue'
from AnotherBigTable t 
inner join
@temp
on t.RecordID = @temp.a 
```

在阅读了上面的链接之后，consunsus 似乎不是使用我的@temp 作为临时表，而是创建一个表值函数来执行该选择。（如果它像我在这个例子中那样简单选择，则将其内联）但是我的实际选择是多个并且通常不简单（即带有子查询等）有什么好处？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T00:55:18.993

通常，您将使用临时表 (#) 而不是表变量。表变量实际上只对

*   不能创建临时对象的函数
*   将表值数据（集）作为只读参数传递
*   某些查询边缘情况的游戏统计信息
*   执行计划稳定性（与统计信息以及 INSERT INTO 表变量不能使用并行计划有关）
*   在 SQL Server 2012 之前，#temp 表从 tempdb 继承排序规则，而 @table 变量使用当前数据库排序规则

除此之外，#temporary 表的工作效果与变量一样好。

进一步阅读：[SQL Server 中的临时表和表变量有什么区别？](https://dba.stackexchange.com/questions/16385/whats-the-difference-between-a-temp-table-and-table-variable-in-sql-server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T23:03:28.300

可能不再相关......但我可能建议采取两种不同的方法来做两件事。

简单的方法1：

* * *

在表值变量上尝试主键：

```
declare @temp table(a int, primary key(a)) 
```

* * *

简单方法2：

在这种特殊情况下，请尝试使用公用表表达式 (CTE) ...

```
;with

   temp as ( 
      SELECT      a as Id
      FROM        BigTable
      WHERE       someRecords like '%blue'
   ),

 UPDATE    AnotherBigTable
 SET       someRecords = 'were Blue'
 FROM      AnotherBigTable
 JOIN      temp
   ON      temp.Id = AnotherBigTable.RecordId 
```

* * *

CTE 非常棒，有助于将您真正想要处理的特定数据集与较大表中包含的无数记录隔离开来……如果您发现自己反复使用相同的 CTE 声明，请考虑将该表达式形式化为视图。对于 DBA 和 DB 程序员来说，视图是一个经常被忽视且非常有价值的工具，用于管理具有大量记录和关系的大型复杂数据集。

# inappsettingskit - 带有完成按钮的 InAppSettingsKit 栏消失

> ID：13735119
> 
> 赞同：1
> 
> 时间：2012-12-06T00:40:06.773
> 
> 标签：inappsettingskit

我已经在我的应用程序中集成了 InAppSettingsKit，它在 90% 的时间里运行良好。

但是，当我在模式视图中时，有 10% 的时间，带有完成按钮的顶部栏会消失，用户无法选择关闭设置。

有没有其他人看过这个？

# javascript - 如何用第二行扩展表格的第一行？

> ID：13735120
> 
> 赞同：-1
> 
> 时间：2012-12-06T00:40:11.657
> 
> 标签：javascript, jquery, jquery-selectors, html-table

我正在寻找一种使用 JS 或 jQuery 自动扩展表的第一行与第二行的方法。

例如，我目前有一个这种格式的表格：

```
<table id="tbl1">
  <tr>
    <td>Item 1</td>
    <td>Item 2</td>
  </tr>
  <tr>
    <td>Item 3</td>
    <td>Item 4</td>
  </tr>
</table> 
```

我想将第二行中的项目移动到第一行，如下所示：

```
<table id="tbl1">
  <tr>
    <td>Item 1</td>
    <td>Item 2</td>
    <td>Item 3</td>
    <td>Item 4</td>
  </tr>
  <tr></tr>
</table> 
```

第二组`tr`标签不必删除，可以保持空白，如果这样可以简化代码。

该表将有一个 id，但其中没有任何标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:53:20.600

```
var table=document.getElementById("tbl1"),
    rows=table.rows;
while (rows[1].cells[0]) rows[0].appendChild(rows[1].cells[0]); 
```

演示：http: [//jsfiddle.net/7kubW/](http://jsfiddle.net/7kubW/)

您当然可以使用 jQuery，但是在处理表格时，纯 JavaScript 很容易阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:46:42.553

```
​var $tr2td​ = $('#tbl1 tr:eq(1)').find('td').detach();

$('#tbl1 tr:eq(0)').append($tr2td);​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

## [看演示](http://jsfiddle.net/9YGBC/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:55:34.067

你可以这样做

```
​$('#tbl1 td').​​​​​​​​​​unwrap().wrapAll('<tr/>');​​​​​​​​​​​​​​​​​​ 
```

[http://jsfiddle.net/DABDa/](http://jsfiddle.net/DABDa/)

或者如果它只有第 1 行和第 2 行

```
​$('#tbl1 tr').slice(0,2).find('td').unwrap().wrapAll('<tr/>');​​​​​​​​​​​​​ 
```

[http://jsfiddle.net/SsTRE/](http://jsfiddle.net/SsTRE/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-06T00:46:38.203

```
var row2 = $("#tbl1 tr:eq(1)");
$("#tbl1 tr:first").append(row2.html()); // Add row 2 data to row 1
row2.html("");                           // empty row 2 
```

# python - 解析指向python中另一个url的url链接

> ID：13735121
> 
> 赞同：0
> 
> 时间：2012-12-06T00:40:22.297
> 
> 标签：python, web, urllib2

关于指向另一个网址的网址，我有一个相当奇怪的问题。因此，例如，我有一个网址：

```
http://mywebpage/this/is/a/forward 
```

最终指向另一个网址：

```
http://mynewpage/this/is/new 
```

我的问题是，当我在 python 中使用例如 urllib2 来获取第一页时，它最终会获取第二页。我想知道是否有可能知道原始链接指向什么。当我请求第一个链接时，是否有类似“标题”的东西告诉我第二个链接？

对不起，如果这是一个非常愚蠢的问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T00:49:05.780

当您对第一个 URL 发出 GET 请求时，Web 服务器将返回一个 300 系列的回复代码，其`Location`标头的值为第二个 URL。您可以[`geturl`使用`urlopen`](http://docs.python.org/2/library/urllib2.html#urllib2.urlopen). 如果涉及多个重定向，则 urllib 似乎会告诉您最后一跳，并且无法获取其他重定向。

这不会通过 JavaScript 或 处理重定向`meta http-equiv="refresh"`，但您可能不在这种情况下，或者您不会像以前那样问问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:05:14.780

您可以使用请求来执行此操作：

```
>>> url = 'http://ofa.bo/foagK7'
>>> r = requests.head(url)
>>> r.headers['location']
'https://my.barackobama.com/page/s/what-does-2000-mean-to-you' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T00:47:40.440

最常见的是通过[RFC2616](http://www.ietf.org/rfc/rfc2616.txt)中定义的重定向响应代码 (3xx) 来完成，尽管使用原始页面中的一些 javascript 无法实现“伪重定向效果”。

这个[SO question](https://stackoverflow.com/questions/554446/how-do-i-prevent-pythons-urllib2-from-following-a-redirect)是关于如何防止 urllib2 跟随重定向，它看起来像你可以使用的东西。

# java - OpenGL 1.1 着色和勾勒对象

> ID：13735122
> 
> 赞同：1
> 
> 时间：2012-12-06T00:40:31.703
> 
> 标签：java, opengl-es, opengl-es-1.1

我正在为我的世界制作模组并添加夜视功能，但是有没有办法可以使用过滤器更改每个模型的渲染？

```
GL11.glDisable(GL11.GL_TEXTURE_2D);
    Tessellator var7 = Tessellator.instance;
    GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
    var7.startDrawingQuads();
    var7.setTranslation(par1, par3, par5);
    var7.setNormal(0.0F, 0.0F, -1.0F);
    var7.addVertex(par0AxisAlignedBB.minX, par0AxisAlignedBB.maxY, par0AxisAlignedBB.minZ);
    var7.addVertex(par0AxisAlignedBB.maxX, par0AxisAlignedBB.maxY, par0AxisAlignedBB.minZ);
    var7.addVertex(par0AxisAlignedBB.maxX, par0AxisAlignedBB.minY, par0AxisAlignedBB.minZ);
    var7.addVertex(par0AxisAlignedBB.minX, par0AxisAlignedBB.minY, par0AxisAlignedBB.minZ);
    var7.setNormal(0.0F, 0.0F, 1.0F);
    var7.addVertex(par0AxisAlignedBB.minX, par0AxisAlignedBB.minY, par0AxisAlignedBB.maxZ);
    var7.addVertex(par0AxisAlignedBB.maxX, par0AxisAlignedBB.minY, par0AxisAlignedBB.maxZ);
    var7.addVertex(par0AxisAlignedBB.maxX, par0AxisAlignedBB.maxY, par0AxisAlignedBB.maxZ);
    var7.addVertex(par0AxisAlignedBB.minX, par0AxisAlignedBB.maxY, par0AxisAlignedBB.maxZ);
    var7.setNormal(0.0F, -1.0F, 0.0F);
    var7.addVertex(par0AxisAlignedBB.minX, par0AxisAlignedBB.minY, par0AxisAlignedBB.minZ);
    var7.addVertex(par0AxisAlignedBB.maxX, par0AxisAlignedBB.minY, par0AxisAlignedBB.minZ);
    var7.addVertex(par0AxisAlignedBB.maxX, par0AxisAlignedBB.minY, par0AxisAlignedBB.maxZ);
    var7.addVertex(par0AxisAlignedBB.minX, par0AxisAlignedBB.minY, par0AxisAlignedBB.maxZ);
    var7.setNormal(0.0F, 1.0F, 0.0F);
    var7.addVertex(par0AxisAlignedBB.minX, par0AxisAlignedBB.maxY, par0AxisAlignedBB.maxZ);
    var7.addVertex(par0AxisAlignedBB.maxX, par0AxisAlignedBB.maxY, par0AxisAlignedBB.maxZ);
    var7.addVertex(par0AxisAlignedBB.maxX, par0AxisAlignedBB.maxY, par0AxisAlignedBB.minZ);
    var7.addVertex(par0AxisAlignedBB.minX, par0AxisAlignedBB.maxY, par0AxisAlignedBB.minZ);
    var7.setNormal(-1.0F, 0.0F, 0.0F);
    var7.addVertex(par0AxisAlignedBB.minX, par0AxisAlignedBB.minY, par0AxisAlignedBB.maxZ);
    var7.addVertex(par0AxisAlignedBB.minX, par0AxisAlignedBB.maxY, par0AxisAlignedBB.maxZ);
    var7.addVertex(par0AxisAlignedBB.minX, par0AxisAlignedBB.maxY, par0AxisAlignedBB.minZ);
    var7.addVertex(par0AxisAlignedBB.minX, par0AxisAlignedBB.minY, par0AxisAlignedBB.minZ);
    var7.setNormal(1.0F, 0.0F, 0.0F);
    var7.addVertex(par0AxisAlignedBB.maxX, par0AxisAlignedBB.minY, par0AxisAlignedBB.minZ);
    var7.addVertex(par0AxisAlignedBB.maxX, par0AxisAlignedBB.maxY, par0AxisAlignedBB.minZ);
    var7.addVertex(par0AxisAlignedBB.maxX, par0AxisAlignedBB.maxY, par0AxisAlignedBB.maxZ);
    var7.addVertex(par0AxisAlignedBB.maxX, par0AxisAlignedBB.minY, par0AxisAlignedBB.maxZ);
    var7.setTranslation(0.0D, 0.0D, 0.0D);
    var7.draw();
    GL11.glEnable(GL11.GL_TEXTURE_2D); 
```

在此代码中，允许 OpenGL 在调用绘图方法之前过滤图像和/或轮廓。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:11:08.467

OpenGL 不是场景图，它基本上只是一些复杂的“笔和纸”。因此，您必须发挥创造力并找出一些可以为您提供所需效果的绘图方案。

该类`Tesselator`不是 OpenGL 的一部分；如果我不得不猜测，它可能是 Minecraft 代码的一部分。当然可以添加你想要的效果，但它并不像“扔几个开关”那么简单。我建议您首先自己“从头开始”编写一些 OpenGL 编码，以了解 OpenGL 的工作原理。这将为您修改复杂程序提供一个更好的起点。

# dart - 运行 Web 组件 build.dart：FormatException：找不到名为“machine”的选项

> ID：13735123
> 
> 赞同：2
> 
> 时间：2012-12-06T00:40:33.327
> 
> 标签：dart

每当我更新某些文件并且 build.dart 运行时，我都会收到此错误：

```
build.dart --changed=web\index.html
file:/C:/Users/Fernando/dart/ACIMReader/build.dart
build.dart returned error code 255

Unhandled exception:
FormatException: Could not find an option named "machine".
#0      ArgParser._validate (package:args/args.dart:349:21)
#1      ArgParser._parseLongOption (package:args/args.dart:488:16)
#2      ArgParser.parse (package:args/args.dart:313:27)
#3      _processArgs (package:web_components/component_build.dart:99:26)
#4      build (package:web_components/component_build.dart:34:26)
#5      main (file:///C:/Users/Fernando/dart/ACIMReader/build.dart:5:8) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T02:44:00.263

编辑器最近开始添加一个`--machine`标志，以便构建脚本知道输出机器可读的消息。web_components 上周增加了对 flag 的支持，你运行 pub update 了吗？

# android - 在 Viewpager 中映射 v2 SupportMapFragment

> ID：13735124
> 
> 赞同：14
> 
> 时间：2012-12-06T00:40:34.227
> 
> 标签：android, android-fragments, android-viewpager, android-maps

**背景**

我已经成功地将新地图 api v2.0 添加到 ViewPager 并且地图加载正常。我正在使用 FragmentViewPager。但是，当我尝试添加标记时遇到了麻烦，因为我无法按标签获取片段，因为我使用的 ViewPager 来自兼容性库并在 XML 中定义，这对我“隐藏”了标签。

**问题**

如何将带有标记的新 Map v2 加载`SupportMapFragment`到`ViewPager`使用`FragmentPagerAdapter`.

**我的尝试**

因此，在我的想法中，我认为可以通过将 SupportMapFragment 扩展为执行以下操作的新类来创建一个优雅的解决方案：

1.  `GoogleMapOptions`添加一个采用and的新构造函数`List<MarkerOptions>`。这有效地调用了现有的构造函数，该构造函数`GoogleMapsOptions`将我的标记列表存储在新类的私有属性中。
2.  覆盖`GetMap()`- 检查它是否为空，如果不是，将我们之前加载到地图上的标记添加到地图上，最后返回它。

我的想法是，我的扩展可以高度重用，并抽象出与一个地方相关的任何地图，并允许我的活动通过`newInstance(myGoogleMapOptions, myMarkers)`.

好的，所以问题。第 1 部分似乎工作正常，但是在调试期间我无法调用重写的 GetMap() 方法。事实上，我已经尝试过覆盖 Fragment 拥有的大多数常用方法，但它们都没有被调用。SupportMapFragmemt 是否发生了一些奇怪的事情，我试图找到它的来源，但无济于事。

**更新**

我意识到为什么我没有调用我的重写方法。这是因为我返回的是标准`SupportMapFragment`而不是`MyMapFragment`. 也就是说，我不能从静态方法调用 super，也不能毫无例外地从基类转换为派生类。

**编辑** 这里是类

```
public class MyMapFragment extends SupportMapFragment {

    private static List<MarkerOptions> mMarkers;

    public static SupportMapFragment newInstance(GoogleMapOptions options, List<MarkerOptions> markers)
    {
        SupportMapFragment fragment = newInstance(options);

        mMarkers = markers;

        return fragment;

    }

            //have tried Overriding several methods including getMap()...

    @Override
    public void onResume ()
    {
        GoogleMap mMap = super.getMap();
        //add the markers
        if(mMap != null)
        {
            for(MarkerOptions marker : mMarkers)
            {
                mMap.addMarker(marker);
            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-09T00:29:40.223

就像这样尝试过，它可以工作。

```
public class MyMapFragment extends SupportMapFragment {

    private List<MarkerOptions> mMarkers;

    public static MyMapFragment create(GoogleMapOptions options, ArrayList<MarkerOptions> markers) {
        MyMapFragment fragment = new MyMapFragment();

        Bundle args = new Bundle();
        args.putParcelable("MapOptions", options); //obtained by decompiling google-play-services.jar
        args.putParcelableArrayList("markers", markers);
        fragment.setArguments(args);

        return fragment;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Hacky and ugly but it works
        ArrayList<Parcelable> list = getArguments().getParcelableArrayList("markers");
        mMarkers = new ArrayList<MarkerOptions>(list.size());
        for (Parcelable parcelable : list) {
            mMarkers.add((MarkerOptions) parcelable);
        }
    }

    @Override
    public void onResume() {
        super.onResume();
        GoogleMap mMap = super.getMap();
        //add the markers
        if (mMap != null) {
            for (MarkerOptions marker : mMarkers) {
                mMap.addMarker(marker);
            }
        }
    }
} 
```

# javascript - 使用 idTabs 的简单选项卡

> ID：13735127
> 
> 赞同：1
> 
> 时间：2012-12-06T00:40:57.790
> 
> 标签：javascript, tabs, jsfiddle, idtabs

我使用插件 idTabs 创建了一个选项卡，然后当我单击以在两个选项卡之间切换时，我希望选项卡按钮的背景保持白色，顶部为橙色边框。（如这张图片）：

[http://postimage.org/image/8tzg9ij2f/](http://postimage.org/image/8tzg9ij2f/)

我能做的就是在链接上留下边缘，但实际上，我想要整个“LI”。

这是我制作的脚本，[http://jsfiddle.net/VRjK5/](http://jsfiddle.net/VRjK5/)

我确实使用这个 js 脚本来工作（idTabs）：

```
<script type="text/javascript"> 
  var settings = { start:1, change:false }; 
  $("#full-tab ul").idTabs(settings,true); 
</script> 
```

我也想在它之间做一个淡入淡出。但我不知道如何在js中制作这个。

多谢你们！

# html - 制作伪造的 CSS 表格布局支持 colspan

> ID：13735129
> 
> 赞同：1
> 
> 时间：2012-12-06T00:41:19.607
> 
> 标签：html, css, tablelayout

我正在尝试制作一个网页，其中包含以下代码：

```
<STYLE TYPE="text/css">
.table{
    display:table;
}
.caption{
    display:table-caption;
}
.tbody{
    display:table-row-group;
}
.tr{
    display:table-row;
}
.td,
.th{
    display:table-cell
}
.td[colspan="2"],
.th[colspan="2"]{
    /* I don't know what to put here */
}
</STYLE>
<DIV CLASS="table">
    <SPAN CLASS="caption">Caption Text</SPAN>
    <DIV CLASS="tbody">
        <DIV CLASS="tr">
            <DIV CLASS="th" COLSPAN="2">Main header<DIV>
        </DIV>
        <DIV CLASS="tr">
            <DIV CLASS="td">Non-data 1</DIV>
            <DIV CLASS="td">Non-data 2</DIV>
        </DIV>
        <DIV CLASS="tr">
            <DIV CLASS="td">Non-data 3</DIV>
            <DIV CLASS="td">Non-data 4</DIV>
        </DIV>
    </DIV>
</DIV> 
```

我选择了这个而不是表格，因为它都是非表格数据。我相信你可以看到我的意图，但它不起作用。如果代码对您来说不明显，我希望它显示为

```
 Caption Text
+-------------------------+
|       Main header       |
+------------+------------+
| Non-data 1 | Non-data 2 |
+------------+------------+
| Non-data 3 | Non-data 4 |
+------------+------------+ 
```

但它显示为

```
 Caption Text
+-------------+
| Main header |
+-------------+------------+
|  Non-data 1 | Non-data 2 |
+-------------+------------+
|  Non-data 3 | Non-data 4 |
+-------------+------------+ 
```

有谁知道我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:57:58.667

尝试这个。

```
<!DOCTYPE html>
<html lang="en-US">
<head>
<style type="text/css">
.table { width: 600px; margin: 0 auto; }
.header { background-color: #CCCCCC; font-weight: bold; margin: 0; }
.row { border-bottom: 1px solid #000000; }
.col1 { float: left; width: 50%; }
.col2 { float: none; width: 100%; }
.clear { clear: both; }
</style>
</head>
<body>
<div class="table">
  <div class="row">
    <h4 class="header">Header Title</h4>
  </div>
  <div class="row">
    <div class="col1">Col 1</div>
    <div class="col1">Col 2</div>
    <div class="clear"></div><!-- clear floated elements -->
  </div>
  <div class="row">
    <div class="col2">Two columns</div>
    <div class="clear"></div><!-- clear floated elements -->
  </div>
</div>
</body>
</html> 
```

# php - PHP Simple DOM Parser 解析当前 PHP 页面

> ID：13735130
> 
> 赞同：0
> 
> 时间：2012-12-06T00:41:32.993
> 
> 标签：php, dom, html-parsing

我正在使用 PHP Simple DOM 解析器来提取给定页面上的所有图像源，如下所示：

```
// Include the library
include('simple_html_dom.php');

// Retrieve the DOM from a given URL
$html = file_get_html('http://google.com/');

// Retrieve all images and print their SRCs
foreach($html->find('img') as $e)
    echo $e->src . '<br>'; 
```

我希望使用 Wordpress 的管理（后端）区域上的页面，而不是使用 Google.com。这些页面是 PHP 页面，而不是 HTML（但该页面始终具有标准 HTML）。我将如何使用当前页面作为`$html`变量？PHP新手在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:55:16.153

[使用这里](https://github.com/shiplu)找到的这个库[dxtool](https://github.com/shiplu/dxtool/)。

## 登录

```
require 'WebGet.php';
$w = new WebGet();
// using cache to prevent repetitive download
$w->useCache = true;
$w->cacheLocation = '/tmp';
$w->cacheMaxAge = 3600;
$w->cookieFile = '/tmp/cookie.txt';

// $login_get_data and $login_post_data is associative array
$login = $w->requestContent($login_url, $login_get_data, $login_post_data); 
```

## 访问包含页面的图像

```
// $image_page_url is the url of the page where your images exist.
$image_page = $w->requestContent($image_page_url); 
```

## 解析图像并显示

```
$dom = new DOMDocument();
$dom->loadHTML($image_page);
$imgs = $dom->getElementsByTagName("img");
foreach($imgs as $img){
    echo $img->getAttribute("src");
} 
```

免责声明：我是这门课的作者

# android - Android：使用时间线创建 ListView

> ID：13735137
> 
> 赞同：1
> 
> 时间：2012-12-06T00:42:28.317
> 
> 标签：android, listview

我的应用程序中有一个 ListView，其中包含在不同时间发生的事件。

在我的 ListView 中，我想显示它们按时间排序，左侧的时间。

```
| 12:00 |   Event1
| 13:00 |   
| 14:00 |   Event2
| 15:00 |   Event2
| 16:00 |   Event3 
```

类似的东西，任何人都可以提供从哪里开始的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:53:58.393

您必须创建自己的适配器来扩展 BaseAdapter 并在其上创建将用于每一行的特定布局文件！

假设你有一个`Map<String,String> mMap = new HashMap<String,String>`，里面有事件，另一个位置是事件的时间。

然后你创建你的新适配器，假设它是 MyAdapter。

```
MyAdapter mAdapter = new MyAdapter(mMap); 
```

`.setAdapter()`您可以通过调用该方法将适配器添加到您的 ListView 。

例如。`myListView.setAdapter(MyAdapter);`

在您的自定义适配器中，您将必须实现一些方法。其中有`getView()`.

在那里，您必须解析`HashMap<String,String>`传递给适配器的数据。在您的 row_layout.xml 中，您必须使用相对布局并添加适当的文本字段以显示您想要的信息！

希望能帮助到你！！！

也检查这个链接：[http ://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:57:11.460

通常，您的列表适配器使用某种数据结构或容器来存储其对象。如果需要添加新元素，先将其添加到容器中，对其元素进行排序，然后调用

```
adapter.notifyDataSetChanged(); 
```

让它知道其数据已更改并需要更新。

这只是一个小例子，可以引导您朝着正确的方向前进。我希望你会发现它有用。

**定义您的 ListActivity：**

```
package com.myapp.listviewexample;

import android.app.ListActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class ListViewExampleActivity extends ListActivity {

    static final String[] COUNTRIES = new String[] {
        "Afghanistan", "Albania", "Algeria", "American Samoa", "Andorra",
        "Angola", "Anguilla", "Antarctica", "Antigua and Barbuda", "Argentina",
        "Armenia", "Aruba", "Australia", "Austria", "Azerbaijan"
      };

    @Override
    public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);

      //setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, COUNTRIES));
      final MyListAdapter adapter = new MyListAdapter(this, COUNTRIES);
      setListAdapter(adapter);

      ListView lv = getListView();
      //lv.setTextFilterEnabled(true);

      lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {

            adapter.removeItem(position);
            adapter.notifyDataSetChanged();
          // When clicked, show a toast with the TextView text
          Toast.makeText(getApplicationContext(), ((TextView) view).getText() + " removed",
              Toast.LENGTH_SHORT).show();
        }
      });
    }

} 
```

**定义您的列表适配器：**

```
package com.myapp.listviewexample;

import java.util.ArrayList;
import java.util.Arrays;

import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;

public class MyListAdapter extends BaseAdapter {

    private ArrayList<String> items;
    private Context mContext;

    public MyListAdapter(Context c, String[] countries) {
        items = new ArrayList<String>(Arrays.asList(countries));
        mContext = c;
        Log.i("MyListAdapter", "countries.length == items.size() " + (countries.length == items.size()));
    }

    public int getCount() {
        return items.size();
    }

    public Object getItem(int position) {
        return items.get(position);
    }

    public long getItemId(int position) { 
        return position;
    }

    public void removeItem(int position) {
        items.remove(position);
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        View view;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            LayoutInflater li = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = li.inflate(R.layout.list_item, null);
        } else {
            view = convertView;
        }

        TextView tv = (TextView) view;//.findViewById(R.id.text_view_item);
        tv.setText(items.get(position));

        return view;
    }

} 
```

**考虑为适配器使用 ViewHolder 模式，以避免不必要的视图膨胀。这篇文章可能会有所帮助：** [如何使我的 ArrayAdapter 遵循 ViewHolder 模式？](https://stackoverflow.com/q/3832254/1082933)

**定义你的 list_item.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/text_view_item"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="16sp" >
</TextView> 
```

您只需要在列表元素中定义另一个 TextView 以满足您的需要。不要忘记通过 addElement(..) 方法扩展您的适配器，该方法会将元素添加到 ArrayList（在本例中），然后使用 Collections.sort(..) 对其进行排序。考虑使用一对两个字符串，它必须实现 Comparable，这样您就可以根据时间甚至更复杂的东西进行排序。

# solr - Solr 3.5 复制问题

> ID：13735143
> 
> 赞同：0
> 
> 时间：2012-12-06T00:43:19.023
> 
> 标签：solr, replication

我面临从 Solr 中的转发器复制从属设备的问题。

从站中的可复制索引和当前索引是不同的。但是当我强制复制时，它仍然没有得到处理。可能是什么问题？

我将轮询间隔设置为 10 分钟。

有人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:18:09.293

它在我对replicateconfig.xml 进行了以下更改后工作。我尝试在启动时配置replicateAfter

```
<str name="replicateAfter">startup</str> 
```

# c++ - 将 int 的单个数字存储在数组中

> ID：13735144
> 
> 赞同：0
> 
> 时间：2012-12-06T00:43:22.677
> 
> 标签：c++, arrays, pointers, recursion

我正在尝试编写一个程序，在该程序中我输入一个数字，例如 891，并将这些数字中的每一个输入一个数组中 ，`x[0] = 8`例如`x[1] = 9``x[2] = 1`

我试图使用递归来实现我的方法：

```
void calc(int val, int k)
{
    static int number = val;
    if((val/10))
    {
        calc(val/10, k--);
    }
    int x = number - val*pow(10, k);
    cout << x << ", k = " << k << " and number = " << number << endl;
}

int main()
{
    //write a program that converts a number to string
    int number;
    cout << "Enter a number: ";
    cin >> number;
    number = 891;
    int k = 0;

    //while(number/10 != 0)
        k = 2;

    calc(number, k);
} 
```

基本上我正在尝试使用我的递归函数来尝试将数字分解为更精细的部分，但是我得到的输出为 (in `val`): 91, 1, -8019。有没有办法可以改进这一点，但保持结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:20:31.593

将数据放入数组和递归解决这个问题都需要一些指针运算。您需要提前分配数组，这意味着您需要知道位数。您还需要传递指向数组的指针，以便递归调用可以分配给它。下面是一个满足这两个要求的简短解决方案。

```
#import <math.h>
#import <iostream>
using namespace std;

void calc(int num, int* digs) {
  if (num > 0) {
    calc(num/10, digs-1); //recursive call, doing head recursion
    *digs = num %10; //assigning this digit
  }
}

int main() {
  //Get number from user
  int inputNumber;
  cout << "Input a number: ";
  cin >> inputNumber;

  int numDigits = log10(inputNumber) + 1;
  int outputArray[numDigits];

  //I give a pointer to the end of the array
  //This is because we are receiving digits from the end
  //So we traverse backwards from the end of the array
  calc(inputNumber, outputArray+numDigits-1);

  //Following is not logic, just printing
  for (int i=0; i < numDigits; i++) {
    cout << outputArray[i] << " ";
  }
  cout << endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T00:50:19.440

```
void calc(int val)
{
    cout << "digit:"<<val % 10<< " and number = " << val << endl;
    if((val/10))
    {
        calc(val/10);
    }
} 
```

这将打印出每个数字（看起来就像您在函数中尝试执行的操作）。

# php - PHP：将方括号之间的逗号分隔值解析为多维数组

> ID：13735147
> 
> 赞同：0
> 
> 时间：2012-12-06T00:43:36.203
> 
> 标签：php, regex, parsing, explode

我有以下字符串：

```
[aaaa,bbbb,cccc] [aaaa,bbbb,cccc] [aaaa,bbbb,cccc] [aaaa,bbbb,cccc] [aaaa,bbbb,cccc] 
```

并希望将此字符串解析为一个看起来像的多维数组

```
0 > ( 0 > aaaa, 1 > bbbb, 3 > cccc), 1 > ( 0 > aaaa, 1 > bbbb, 3 > cccc), 2 > ( 0 > aaaa, 1 > bbbb, 3 > cccc) 
```

我该怎么做？

非常感谢！

# algorithm - 查找此有向图中的所有路径

> ID：13735151
> 
> 赞同：0
> 
> 时间：2012-12-06T00:44:05.567
> 
> 标签：algorithm, graph-algorithm

我最近发现了图形和算法，并试图解决一个涉及两种不同类型顶点的特定问题：用户和实体。详情如下：

*   图是有向的
*   我试图找到从 A 到 B 的所有路径
*   A 始终是用户
*   B 可以是用户或实体
*   如果 B 是用户，则搜索的最大深度为 3 条边
*   如果 B 是实体，则最大深度为 2 条边
*   我无法遍历从用户出站的任何边，除非用户是 A

虽然图有两种类型的顶点，但它不是二分的。

到目前为止，我已经设法创建了一个图形对象，该对象包含一个顶点索引的邻接列表数组。邻接表是基于链表的。

我认为我需要对所有路径算法进行某种变体，但我不太确定。另外，不确定我应该看 DFS 还是 BFS。

我正在使用 PHP，这使事情变得复杂，因为大多数示例都是用 Java 编写的。我真正想要的是伪代码。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:54:34.047

听起来您正在遍历某种 LDAP 实现。如果您需要通用算法，只需使用 DFS，因为它更容易编码。除非深度会改变，否则这样做是大材小用。

最通用的方式

```
 dfs(A,B):
     return dfs(A,B,1);

 dfs_(u,B,depth):
     if u == B:
          return u;

     if (u is User and depth > 3) or (u is Group and depth > 2):
          return None;       

     out = [];
     for children of thing:
          return max( dfs_(children,depth+1) ) # take the non-null one
     out.append(u);
     return out; 
```

# ios - 在 String-Hack 之后重新签署 MobileSubstrate-dylib？

> ID：13735156
> 
> 赞同：2
> 
> 时间：2012-12-06T00:44:44.193
> 
> 标签：ios, code-signing, cydia-substrate

我喜欢在我越狱的 iPad（第 3 代，5.1.1）的状态栏中查看当前日期，所以我安装了 Tweak “DateCarrier”。可悲的是，它没有配置并使用 MM/dd/yyyy 作为其格式，我不喜欢这种格式。

我在 .dylib 文件中找到了它的格式字符串，并尝试在十六进制编辑器中将其简单地更改为 dd.MM.yyyy。该字符串显然具有相同的长度，并且仍然以空值结尾。可悲的是，调整的更改版本在启动时崩溃。

我认为这是一个签名问题，但由于我没有使用 Mac 软件或 iOS 开发的经验，我真的不知道如何进行。

谷歌向我指出了工具“ldid”，它声称对二进制文件进行签名，但它在 dylib 文件上出现错误“未知加载命令 7”而退出。

谁能指出我正确的方向或告诉我是否有可能加载更改后的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:26:04.700

我有完全相同的问题。您的提示也帮助我找到了解决方案。

该`ldid`工具有一个选项`-s`可以从修改后的二进制文件中刷新哈希值。这显然能够*调整*签名，现在我看到日期为 dd/MM/yyyy 没有讨厌的崩溃消息:)

# php - 更改关联数组中的特定元素

> ID：13735159
> 
> 赞同：3
> 
> 时间：2012-12-06T00:45:07.470
> 
> 标签：php, arrays, element, associative-array

我有两个关联数组，如下所示：

```
$prod1 = (
    [name] = 'John',
    [address] = 'Milky way',
    [city] = 'Miami',
);

$prod2 = (
    [address] = 'Not so milky way'
); 
```

**$prod1**总是有相同类型的元素*(name, address, city)*，但**$prod2**可以包含所有元素或其中一些元素

我想要的是替换 $prod1 中与 $prod2 中**的****元素**匹配的元素中的值。在上面的示例中**$prod2**包含*address*，因此**$** prod1 中的地址应该替换为**$prod2**中的地址（其余元素当然应该保持原样）。

如何实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T00:46:44.213

该[`array_merge`](http://php.net/array_merge)功能将为您执行此操作：

```
$prod_new = array_merge($prod1, $prod2); 
```

从[文档中](http://php.net/array_merge)：

> 如果输入数组具有相同的字符串键，则该键的后一个值将覆盖前一个。

或者，您可以使用[operator `+`，](http://php.net/manual/en/language.operators.array.php)这将为您提供相同的结果：

```
$prod_new = $prod1 + $prod2; 
```

> 运算符返回附加到左侧数组的`+`右侧数组；对于两个数组中都存在的键，将使用左侧数组中的元素，而忽略右侧数组中的匹配元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:47:22.740

```
foreach($prod2 as $key => $val)
{
    $prod1[$key] = $val;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T00:54:42.130

尝试这样的事情：

```
$prod1 = array(
name => 'John',
address => 'Milky way',
city => 'Miami',
);

$prod2 = array(
address => 'Not so milky way'
);

foreach ($prod2 as $key=>$value) {
$prod1[$value] = $value;
}
var_dump($prod1); 
```

享受 ：）

# iphone - Cocos2D标签不可见，黑屏

> ID：13735163
> 
> 赞同：0
> 
> 时间：2012-12-06T00:45:31.900
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone, xcode4.5

我已经使用我命名为 Label 的类实现了 CCLabelProtocol 和 CCRGBAProtocol：

```
#import <cocos2d.h>

@interface Label : CCNode <CCLabelProtocol, CCRGBAProtocol>

@property (nonatomic, copy, readwrite) NSString* string;
@property (nonatomic, readwrite) ccColor3B color;
@property (nonatomic, readwrite) GLubyte opacity;

- (id) initWithString: (NSString*) aString;

@end 
```

因为它很方便，所以我还做了一个 initWithString 方法：

```
#import "Label.h"

@implementation Label

@synthesize string,opacity,color;

- (id) initWithString: (NSString*) aString
{
    if(self=[super init])
    {
        string= aString;
        color.r=255;
        color.g=0;
        color.b=0;
        opacity= 10;
    }
    return self;
}

- (ccColor3B) color
{
    return color;
}

@end 
```

然后在 HelloWorldLayer 的 init 方法中我这样做：

```
 Label* label= [[Label alloc]initWithString: @"Start"];
    CCMenuItemLabel* item= [CCMenuItemLabel itemWithLabel: label block:^(id sender)
    {
        NSLog(@"Label Clicked");
    }];
    CCMenu* menu= [CCMenu menuWithItems: item, nil];
    [self addChild: menu]; 
```

我使用的是普通的 cocos2d 模板，所以这是在 CCLayer 类中。
屏幕是黑色的，我没有得到我想要的标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:55:27.083

那是因为你只是采用了一些协议，但是从 CCNode 继承而来。CCNode 是一个非渲染（不可见）节点。

如果你想要一个标签，从 CCLabelTTF 子类化并省略协议，因为 CCLabelTTF 已经实现了它们。

但是，除非您想更改标签的行为或呈现方式，否则创建 CCLabelTTF 子类是多余的。如果您只需要更改文本和颜色，请使用[CCLabelTTF 初始化程序](http://www.learn-cocos2d.com/api-ref/latest_2.x/cocos2d-iphone/html/interface_c_c_label_t_t_f.html)及其颜色属性。

```
Label* label = [CCLabelTTF labelWithString:@"Start" fontName:@"Arial" fontSize:24];
label.color = ccRED;
CCMenuItemLabel* item = [CCMenuItemLabel itemWithLabel: label block:^(id sender)
{
    NSLog(@"Label Clicked");
}];
CCMenu* menu = [CCMenu menuWithItems:item, nil];
[self addChild:menu]; 
```

# ruby-on-rails - hidden_ field 使用两个模型

> ID：13735164
> 
> 赞同：0
> 
> 时间：2012-12-06T00:45:38.123
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

对 RoR 来说还是很新……我现在非常困惑如何完成以下任务：

我在我的 app/views/packjobs/_form.html.erb 下关注

```
<td><%= f.collection_select(:pj_packer, @packers, :p_name, :p_name, { :include_blank => true} ) %></td>
<%= f.hidden_field :packer_id, :value => @packers.id  %>
<td><%= f.text_field :pj_guestpacker %></td> 
```

我有两个模型包装工和 packjobs。

```
class Packjob < ActiveRecord::Base  
   belongs_to :packer
end

class Packer < ActiveRecord::Base
  has_many :packjobs
end 
```

我在控制器中为下拉列表订购了封隔器列表，并认为这可能是导致问题的原因。

```
# GET /packjobs/new.xml
  def new
    @packjob = Packjob.new
    @datestamp = Time.now.strftime("%m/%d/%Y %I:%M:%S %P")
    @packers = Packer.find(:all, :conditions => { :p_team => "t" }, :order => "p_name")
    @rigs = Rig.find(:all, :conditions => { :rig_status => "t" }, :order => "rig_type_number")

    respond_to do |format|
      format.html # new.html.erb
      format.xml  { render :xml => @packjob }
    end
  end 
```

packjobs 的架构如下：

```
-- Describe PACKJOBS
CREATE TABLE "packjobs" (
    "id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    "pj_packer" VARCHAR(255) NOT NULL,
    "pj_guestpacker" VARCHAR(255),
    "pj_rig_type_number" VARCHAR(255),
    "pj_damage" VARCHAR(255),
    "pj_extranotes" VARCHAR(255),
    "created_at" DATETIME,
    "updated_at" DATETIME
, "packer_id" integer) 
```

我可以用 Packer 名称填充下拉列表：pj_packer; 但我想将 Packer ID 传递给 :packer_id。

我不断得到：`NoMethodError in Packjobs#new undefined method 'id' for #<Array:0xa32828c>`

**编辑：**

理想情况下，我想要一个隐藏字段来捕获所选打包机的 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:29:39.083

以下肯定会起作用。

`<%= f.select :packer_id, :options_for_select(@packers.map{|p| [p.p_name,p.id]}), {:include_blank => true}%>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:28:11.103

数据模型是问题的根源。`pj_packer`并`packer_id`在不同领域捕获相同的信息。您想删除该`pj_packer`字段并仅使用关系 ( `packer_id`)。

然后您的视图变为以下内容：

```
<td><%= f.collection_select(:packer_id, @packers, :p_name, :p_id, { :include_blank => true} ) %></td>
<td><%= f.text_field :pj_guestpacker %></td> 
```

然后，当您需要旧`pj_packer`值时，您可以调用`@packjob.packer.p_name`而不是`@packjob.pj_packer`获取相同的值，而无需额外的字段。

如果`pj_packer`由于其他原因仍需要保留该字段，可以在保存前回调中设置：

```
class Packjob < ActiveRecord::Base
  belongs_to :packer

  before_save :set_pj_packer

  def set_pj_packer
    self.pj_packer = packer.try(:p_name)
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T03:19:37.943

尝试：

```
<td><%= f.select :packer_id, options_from_collection_for_select(@packers, :id, :p_name, @packjob.packer_id), :include_blank => true %></td>
<td><%= f.text_field :pj_guestpacker %></td> 
```

# actionscript-3 - 我无法通过 .x 属性移动 Movieclip

> ID：13735166
> 
> 赞同：0
> 
> 时间：2012-12-06T00:45:55.797
> 
> 标签：actionscript-3, flash, movieclip

我有一个小错误，我无法弄清楚如何修复它。在我的数组“youreq”中，我有结构为 {ID:Object, name:String, Q:int} 的对象。我的代码是：

```
for each (var num in youreq)
{
trace(num.ID); //Object 1a8e191
trace("x"+num.ID.x); //x355.15
trace("y"+num.ID.y); //y108.45
trace(tns); //36
num.ID.x -=  tns;
num.ID.visible = false; //nothing changed...
trace(num.ID.x); //319.15
} 
```

但什么也没发生（我想将 MovieClip 向左移动 6 个像素，但切换可见性也不起作用）。有人可以帮助我吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:51:55.447

尝试将 num.ID 投射到 MovieClip。并确保 num.ID 是 MovieClip。

```
for each (var num in youreq)
{
trace(num.ID); //Object 1a8e191
trace("x"+num.ID.x); //x355.15
trace("y"+num.ID.y); //y108.45
trace(tns); //36
trace (num.ID is MovieClip) // check if the ID object is MovieClip
MovieClip(num.ID).x -=  tns;
MovieClip(num.ID).visible = false; //nothing changed...

trace(num.ID.x); //319.15
} 
```

# wordpress - 用于在侧边栏中发布特定内容的 Wordpress 小部件

> ID：13735174
> 
> 赞同：1
> 
> 时间：2012-12-06T00:46:45.033
> 
> 标签：wordpress

我正在寻找一个 wordpress 插件，它允许我在侧边栏中添加一个特定于博客文章的段落。我需要能够在创建帖子时添加该文本。那里有类似的东西吗？我一直在搜索不成功。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T01:31:37.580

这不是我亲自做过的事情，但试试这个。

**摘要**：您将使用自定义字段添加段落，然后将其显示在小部件中。

**详情**：

*   首先，确保启用自定义字段。编辑帖子，然后单击页面右上角的“屏幕选项”。如果未选中“自定义字段”，请选中它。您现在应该在帖子编辑器下方看到一个自定义字段区域。
*   为您的自定义字段命名。也许是“extra_paragraph”。现在把它放在自定义字段区域的“名称”字段中。
*   在自定义字段区域的“值”字段中写入您的段落。
*   安装[自定义字段小部件插件](http://wordpress.org/extend/plugins/custom-field-widget/)，将其设置为显示这个新的“extra_paragraph”字段。（小部件似乎未经较新版本的 Wordpress 测试，所以请多指教！）

现在，当您撰写或编辑帖子时，您应该会在“名称”下拉列表中看到此“extra_paragraph”字段作为选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T01:41:49.647

这可以使用自定义字段、文本小部件和简码轻松解决。
这段代码位于主题中`functions.php`，或者最好是在[自定义插件](http://www.doitwithwp.com/create-functions-plugin/)中。

**1）为文本小部件启用简码**

```
add_filter( 'widget_text', 'do_shortcode' ); 
```

**2）定义简码，阅读评论了解详情**

```
add_shortcode( 'mytext', 'so_13735174_custom_text_widget' );

function so_13735174_custom_text_widget( $atts, $content = null )
{   
    global $post;

    // $post contains lots of info
    // Using $post->ID many more can be retrieved
    // Here, we are getting the Custom Field named "text"
    $html = get_post_meta( $post->ID, 'text', true );

    // Custom Field not set or empty, print nothing
    if( !isset( $html ) || '' == $html )
        return '';

    // Print Custom Field
    return $html;
} 
```

**3) 在所需的侧边栏中添加一个文本小部件。**
将标题留空并将简码放在内容中：`[mytext]`。

**4) 现在每个带有自定义字段的页面或帖子`text`都将在小部件中打印其值。**

**5）`$html`可以花哨，可以使用多个自定义字段。**

# php - 重新排序 array2，使 array1 中的项目位于顶部

> ID：13735175
> 
> 赞同：0
> 
> 时间：2012-12-06T00:46:46.003
> 
> 标签：php, arrays

我有两个数组，一个是子集。我需要重新排序较大的数组，以便数组一中的所有项目都在它的顶部。

```
array('c', 'e');
array('a', 'b', 'c', 'd', 'e', 'f', 'g'); 
```

我希望第二个数组看起来像这样：

```
array('c', 'e', 'a', 'b', 'd', 'f', 'g'); 
```

“c”和“e”在它的顶部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:54:44.490

如果另一个数组包含元素，您可以使用`usort`并向上移动元素：

例如：

```
$a = array('c', 'e');
$b = array('a', 'b', 'c', 'd', 'e', 'f', 'g');

usort($b, function($x, $y) use($a) {
    return in_array($x, $a) ? -1 : 1;
}); 
```

这不会考虑 的顺序`$a`，但会允许重复元素（如果需要）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:50:20.570

array_merge： http: [//php.net/manual/en/function.array-merge.php](http://php.net/manual/en/function.array-merge.php)

```
$a1 = array('c', 'e');
$a2 = array('a', 'b', 'c', 'd', 'e', 'f', 'g');
$am = array_merge($a1, $a2); 
```

阅读要求后，这是正确的方法：

```
$a1 = array('c', 'e');
$a2 = array('a', 'b', 'c', 'd', 'e', 'f', 'g');
$a2 = array_diff($a2, $a1);
$am = array_merge($a1, $a2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T00:55:41.253

```
$a1 = array('c', 'e');
$a2 = array('a', 'b', 'c', 'd', 'e', 'f', 'g');
$a3 = array_unique(array_merge($a1, $a2)); 
```

# android - 将 JSON 对象发布到 WCF 服务 - 列表属性始终为空

> ID：13735176
> 
> 赞同：0
> 
> 时间：2012-12-06T00:47:04.337
> 
> 标签：android, .net, json, wcf

我有一个将 JSON 对象发布到 WCF 服务的 android 应用程序。发布的 JSON 对象包含一个数组属性。我的问题是在服务器上接收到数组属性时始终为空。

这是发布的android代码：

```
ObjectMapper mapper = new ObjectMapper();
ArrayList<RespuestaEncuesta> respuestas = new ArrayList<RespuestaEncuesta>(1);
RespuestaEncuesta r = new RespuestaEncuesta();
r.Comentarios = "ASD";
r.GrupoClienteID = UUID.fromString("00000000-0000-0000-0000-000000000000");
r.GrupoID = 1155;
r.Opcion = "2";
respuestas.add(r);

RespuestaWrapper data = new RespuestaWrapper();
data.Respuestas = respuestas;

mapper.configure(SerializationFeature.WRAP_ROOT_VALUE, true);
String respuestarJson = mapper.writeValueAsString(data);
String url = config[0] + "/GuardaEncuestas";

HttpPost httpPost = new HttpPost(url);
httpPost.setHeader("Accept", "application/json");
httpPost.setHeader("Content-type", "application/json");

StringEntity tmp = new StringEntity(respuestarJson);
httpPost.setEntity(tmp);

DefaultHttpClient httpClient = new DefaultHttpClient();
httpClient.execute(httpPost); 
```

生成以下json：

```
{
  "RespuestaWrapper" : {
    "Respuestas" : [ {
      "Comentarios" : "ASD",
      "GrupoClienteID" : "00000000-0000-0000-0000-000000000000",
      "Opcion" : "2",
      "Numero" : 0,
      "GrupoID" : 1155.0
    } ]
  }
} 
```

在服务器端，我的服务定义如下：

```
 [OperationContract]
    [WebInvoke(
            Method = "POST",
            UriTemplate = "GuardaEncuestas",
            BodyStyle = WebMessageBodyStyle.Bare,
            ResponseFormat = WebMessageFormat.Json,
            RequestFormat = WebMessageFormat.Json)]
    void GuardaEncuestas(RespuestaWrapper respuestas);

[Serializable, DataContract]
  public class RespuestaWrapper
  {
    [DataMember]
    public List<RespuestasWrapped> Respuestas;
  }

  [Serializable, DataContract]
  public class RespuestasWrapped
  {
    [DataMember(IsRequired = false)]
    public double GrupoID { get; set; }
    [DataMember(IsRequired = false)]
    public Guid GrupoClienteID { get; set; }
    [DataMember(IsRequired = false)]
    public int Numero { get; set; }
    [DataMember(IsRequired = false)]
    public string Opcion { get; set; }
    [DataMember(IsRequired = false)]
    public string Comentarios { get; set; }
  } 
```

每次我调用服务时，我都会收到 RespuestasWrapped 对象，但 Respuestas 属性为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:01:08.347

您的消息正文样式是*裸露*的( `BodyStyle = WebMessageBodyStyle.Bare`)。如果您将 json 生成为

```
{
  "Respuestas" : [ {
    "Comentarios" : "ASD",
    "GrupoClienteID" : "00000000-0000-0000-0000-000000000000",
    "Opcion" : "2",
    "Numero" : 0,
    "GrupoID" : 1155.0
  } ]
} 
```

它会工作

# python - Python：3D 列表的索引错误

> ID：13735183
> 
> 赞同：1
> 
> 时间：2012-12-06T00:47:39.830
> 
> 标签：python, list, 3d, indexing

我以前从未使用过 2D 或 3D 数组，但我正在尝试制作迷宫。在我的代码片段中，正方形是一个包含每个单元格实例的列表（因此在 3x4 迷宫中，正方形中将有 12 个实例）然后我试图追加到行，一行中所有正方形的列表，所以行[0] 将包含前四个正方形实例，row[1] 将是接下来的四个，等等。 row[x].append(squares[y+z]) 抛出 IndexError，我猜它是 row[ x] 部分，但我不确定如何修复它。我尝试使用扩展而不是附加。

```
numberOfRows = 3
numberOfColumns = 4
z = 0

for x in range(numberOfRows):
    for y in range(numberOfColumns):
        row[x].append(squares[y+z])
    z += 4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:04:28.397

如果我猜对了，你想要：

```
numberOfRows = 3
numberOfColumns = 4
z = 0

squares = range(numberOfRows * numberOfColumns)

row = [[] for _ in xrange(numberOfRows)]
for x in range(numberOfRows):
    for y in range(numberOfColumns):
        row[x].append(squares[y+z])
    z += 4

print row 
```

即，您只是缺少`row`定义。

编辑：

在阅读了 OP 的评论后，似乎考虑以下替代方案对于这种情况是值得的：

```
row = []
for x in range(numberOfRows):
    row.append([squares[y+z] for y in range(numberOfColumns)])
    z += numberOfColumns 
```

因此，您无需`row`事先创建所有列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:51:48.147

这可以简化为以下内容：

```
>>> [squares[i:i+numberOfColumns] for i in range(0, len(squares), numberOfColumns)]
[[0, 1, 2, 3], [4, 5, 6, 7], [8, 9, 10, 11]] 
```

# java - 当用户在某些 x 和 y 值内单击时，我希望 java 做出响应

> ID：13735184
> 
> 赞同：-1
> 
> 时间：2012-12-06T00:47:39.930
> 
> 标签：java, image, events, click, mouse

> **可能重复：**
> [我想在 Java 中的图像上创建一个不可见的可点击对象](https://stackoverflow.com/questions/13734981/i-want-to-create-an-invisible-clickable-object-over-an-image-in-java)

所以我希望我的 java 游戏在用户点击某些 x 和 y 值时以特定方式响应。具体来说，当用户单击图像的某个部分时，我希望游戏移动到数组中的图像。我已经有一个类，其中包含一个包含所有图像的数组，并且会自动绘制第一张图像。它是在 JFrame 中完成的。另外，但是我让程序执行此操作，我是否应该创建一个扩展该类的新类，然后将所有代码放置在新类中以使游戏响应某些点击？到目前为止，这是我的代码：

```
import java.awt.event.*;
import java.awt.*; 
import javax.swing.*;

public class drawPictures extends JFrame implements MouseListener { //it implements this because I want the user to click stuff
    //Now I need to declare the images that serve as my levels variables ahead of time.
    protected static Image levelOne;
    protected static Image levelTwo;
    protected static Image levelThree;
    protected static Image levelFour;
    protected static Image levelFive;
    protected Graphics g = this.getGraphics();  
    //Done declaring.

    //Now to load the images
    private static Image loadImage(String imgFileName) { 
        Image img = null;
        try {
            Toolkit tk = Toolkit.getDefaultToolkit();
            img = tk.getImage(imgFileName);
        } catch (Exception e) {
            System.err.println("Image not found: "+ imgFileName);
        }

        return img;
    } //done loading the images

 static Image [] pictureArray = new Image[5]; { //This is the array that will store all of the images
     //otherwise known as the "levels"
 pictureArray[0] = levelOne; //each "slot" in the array is taken up by one 
 //of the images that serves as the level
 pictureArray[1] = levelTwo;
 pictureArray[2] = levelThree;
 pictureArray[3] = levelFour;
 pictureArray[4] = levelFive;
 }

 /*
  * Now that the actual array that stores the levels has been created
  * I need to create a method that "paints" the level, 
  * and moves on to the next one when the user clicks on something.
  * 
  * I also need to create a box with dimensions 151x159 
  * overtop of the happy tomato in the first level.
  * That will be the 
  */
 public drawPictures() {
     super("One of These Things Doesn't Belong...");

     setSize(1500, 750);
     setDefaultCloseOperation(EXIT_ON_CLOSE); // Creates the "x" box.
     setVisible(true); // Makes the window visible.    

     start();
 }

 public void paint(Graphics g) {
     g.drawImage(pictureArray[0], 100, 100, this);
 }

 public static void start() 
 /*
  * this entire method exists for the sole purpose of loading the images
  * that I placed in the variables that I declared above.
  * WHY IS PROGRAMMING SO DARN TEDIOUS???
  */
    {
    levelOne = loadImage("Level 1.jpg");
    levelTwo = loadImage("Level 2.jpg");
    levelThree = loadImage("Level 3.jpg");
    levelFour = loadImage("Level 4.jpg");
    levelFive = loadImage("Level 5.jpg");
    }

    @Override
    public void mouseClicked(MouseEvent arg0) {
        // TODO Auto-generated method stub
    }

    @Override
    public void mouseEntered(MouseEvent arg0) {
        // TODO Auto-generated method stub
    }

    @Override
    public void mouseExited(MouseEvent arg0) {
        // TODO Auto-generated method stub
    }

    @Override
    public void mousePressed(MouseEvent arg0) {
        // TODO Auto-generated method stub
    }

    @Override
    public void mouseReleased(MouseEvent arg0) {
        // TODO Auto-generated method stub
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        start();
        new drawPictures(); 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:39:07.393

我猜你搜索一些来了解某些 x 和 y 值。这可以通过 MouseEvent 检查文档具体查看此类 getPoint() 的方法。

像这样的东西可以工作

```
public void mouseClicked(MouseEvent arg0) {

Point p = arg.getPoint();

    } 
```

# c++ - c++ hdf5：如何设计程序以轻松扩展新的复合数据类型

> ID：13735185
> 
> 赞同：2
> 
> 时间：2012-12-06T00:47:40.767
> 
> 标签：c++, hdf5

情况：我正在创建一个在 C++ 中用作 hdf5 API 的类，基本上封装了 hdf5 C API 的所有细节。我预计未来在存储复合数据类型方面会有不同的要求。复合数据类型将是 C 结构。我不能简单地使用模板在数据库中存储不同的结构，因为每个结构都需要自己的函数来设置相应的 hdf5 复合数据类型（元素的偏移量等），所以这还不够：

```
class simDB{
  public:
    template<class T> int write_to_dataset(vector<T> mydata){...}
} 
```

相反，我想为每个即将到来的数据类型创建一个单独的头文件：

```
// type1_t.h
struct type1_t{
  int bla1;
  double bla2;
};

hid_t type1_memtype(){
  hid_t memtype = H5Tcreate(H5T_COMPOUND, sizeof(type1_t));
  herr_t status = H5Tinsert (memtype, "bla1", HOFFSET (type1_t, bla1), H5T_NATIVE_INT);
  herr_t status = H5Tinsert (memtype, "bla2", HOFFSET (type1_t, bla2), H5T_NATIVE_DOUBLE);
} 
```

但是，这并没有让我走得更远，因为我仍然需要为每种数据类型编写一个单独的读/写函数，因为对于每种类型，我都需要调用正确的 memtype 函数。将上面的代码变成一个类似乎也不可行，因为据我所知，结构和对象的内存布局只有在对象没有方法时才能得到保证——但我需要上面显示的成员函数来生成hdf5 数据类型。

如果我想添加新类型的结构来保存，即新的 hdf5 复合数据类型，我如何以一种最小化工作量的方式构建程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:31:48.060

模板专业化是否适合您的需求？

```
template <> get_memtype<type1_t> {
    hid_t memtype = H5Tcreate(H5T_COMPOUND, sizeof(type1_t));
    herr_t status = H5Tinsert (memtype, "bla1", HOFFSET (type1_t, bla1), H5T_NATIVE_INT);
    herr_t status = H5Tinsert (memtype, "bla2", HOFFSET (type1_t, bla2), H5T_NATIVE_DOUBLE);
} 
```

所以稍后您可以使用`get_memtype<T>()`.

# c - 通过 CMD 窗口和 C exe 写入文本文件？

> ID：13735190
> 
> 赞同：0
> 
> 时间：2012-12-06T00:48:09.743
> 
> 标签：c, file, text, cmd

我想知道如何让这段代码将文本文件从它的文本值覆盖到它的 ASCII 值。

我希望它做这样的事情：

CMD > c:\users\username\desktop>cA5.exe content.txt

content.txt 中有“abc”，我希望命令行将“abc”更改为它的 ASCII 值。97 ...等我不想在命令窗口中写任何东西，我希望它在文本文件中进行更改。这可能吗，如果可以，我怎么能用这个现有的代码来做呢？

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc[1], char *argv[1])
{

    FILE *fp; // declaring variable 

    fp = fopen(argv[1], "rb");

    if (fp != NULL) // checks the return value from fopen
    {
        int i;
        do
        {
            i = fgetc(fp);     // scans the file 
            printf("%c",i);
            printf(" ");
        }
        while(i!=-1);
        fclose(fp);
    }
    else
    {
        printf("Error.\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:35:24.257

不是最好的代码，但非常简单。

```
#include <stdio.h>
#include <stdlib.h>

void convertToAHex(char *data, long int size, FILE *file){
    rewind(file);

    int i;

    for(i = 0; i < size; ++i){
        fprintf(file, "%d ", data[i]);
    }
}

int main(int argc, char *argv[]){
    if(argc != 2){
        return EXIT_FAILURE;
    }

    FILE *file = fopen(argv[1], "r+");
    if(file){
        char *data;
        long int size;

        fseek(file, 0, SEEK_END);
        size = ftell(file);
        rewind(file);
        data = (char *) calloc(size, sizeof(char));
        if(data){
            fread(data, 1, size, file);
            convertToAHex(data, size, file);
            free(data);
        }
        fclose(file);
    }

    return EXIT_SUCCESS;
} 
```

# php - 将 MySQL 过程结果设置为 PHP 变量

> ID：13735195
> 
> 赞同：0
> 
> 时间：2012-12-06T00:48:26.000
> 
> 标签：php, mysql, stored-procedures

我正在尝试将此 MySQL 存储过程的两个输出设置为 PHP 变量：

```
$result = mysql_query("CALL mst2('$q', @eset, @leng)");
if (!$result) {  
  die('Invalid query: ' . mysql_error());
} 

while($row = @mysql_fetch_assoc($result))
{
debug($row);

}
$eset = $row->{'@eset'};
$length= $row->{'@leng'}; 
```

最后两行抛出错误 `Trying to get property of non-object`。有人知道这样做的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:01:28.290

mysql_fetch_object 而不是 mysql_fetch_assoc 应该可以修复您的查询。

其次，尽管您应该真正考虑使用 mysqli_ 或 pdo 语句。

这里的链接：

*   [http://php.net/manual/en/pdo.query.php](http://php.net/manual/en/pdo.query.php)
*   [http://php.net/manual/en/mysqli.query.php](http://php.net/manual/en/mysqli.query.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T01:24:53.420

以下是我如何使用它`mysql_query`：

```
$result = mysql_query("CALL mst2('$q', @eset, @leng)");
$result = mysql_query("SELECT @eset, @leng");
if (!$result) {  
  die('Invalid query: ' . mysql_error());
} 

while($row = @mysql_fetch_object($result))
{
$eset = $row->{'@eset'};
} 
```

在我调用`SELECT`语句的过程之后，然后在 while 循环中，$eset 变量被正确设置。

# ember.js - 当 {{#if}} {{else}} 条件发生变化时，车把视图不刷新

> ID：13735197
> 
> 赞同：1
> 
> 时间：2012-12-06T00:48:35.627
> 
> 标签：ember.js

（编辑：下面稍微简化一下）

我有一个带有 {{#if etc}} 条件的车把模板，当我更改关联数据时，视图第一次更新，但随后的更改不会继续更新。我正在切换处于该条件的布尔值，并且我知道切换正在运行并切换属性，因为我可以在控制台上看到它这样做，但是我说的实际视图只刷新一次。在我的 html 文件中，它看起来像这样：

```
<script type="text/x-handlebars" data-template-name="application">
<body>
<div class="row">
  {{#if App.Nav.show}}
     {{outlet nav}}
  {{/if}}
  <div class="span10">
     <h1>Hello</h1>
     {{outlet}}
  </div>
</div>
</body>
</script> 
```

再进一步，切换：

```
<script type="text/x-handlebars" data-template-name="people">                                                                                                                                                
   <a {{action toggleMenu}}> toggle </a>
</script> 
```

在javascript中：

```
App.NavController = Ember.Controller.extend();
App.NavView = Ember.View.extend({
    templateName: 'nav'
});
App.Nav = Ember.Object.create({
    show: true
}); 
```

最后是路由器的相关位：

```
App.Router = Ember.Router.extend({
  enableLogging: true,
  root: Ember.Route.extend({
    index: Ember.Route.extend({
      route: '/',
        showPerson: Ember.Route.transitionTo('aName'),
        toggleMenu: function(){
           console.log('Changing the toggle!');
           App.Nav.toggleShow();
        },
        connectOutlets: function(router){
            router.get('applicationController').connectOutlet('nav', 'nav');
            router.get('applicationController').connectOutlet('allPeople', unrelated_function())
        }
    })
   })
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:53:22.003

我会说把你的 if 放到你的视野中。像这样的东西：

```
 <script type="text/x-handlebars" data-template-name="people">
      <a {{action toggleMenu}}> toggle </a>
      {{#if App.Nav.show}}
            <div>navigation</div>
      {{/if}}
      <div class="span10">
           <h1>Hello {{name}}</h1>
      </div>
 </script> 
```

然后您的应用程序视图应如下所示：

```
<script type="text/x-handlebars" data-template-name="application">
     <body>
          <div class="row">{{outlet}}</div>
     </body>
</script> 
```

让我知道您是否尝试过并且有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:42:06.170

我没有`connectOutlet`用来显示视图，让我知道使用方法背后是否有某种目的`connectOutlet`，同时[这](http://jsfiddle.net/yStCs/4/)是我切换视图可见性的实现

# javascript - 将 javascript 函数数据传递到隐藏的表单字段并将结果作为 url 变量发送

> ID：13735198
> 
> 赞同：0
> 
> 时间：2012-12-06T00:48:36.747
> 
> 标签：javascript, forms, url, variables, input

我正在尝试将 javascript 变量传递到表单字段并将结果作为 url 变量发送，但我坚持使用此代码。任何帮助表示赞赏。代码将浏览器宽度视口输出到字段字段中，然后在提交表单时将其作为变量发送到 url

```
 <html>
  <script>

   function getViewport() {

   var viewPortWidth;
   var viewPortHeight;

   window.innerWidth and window.innerHeight
   if (typeof window.innerWidth != 'undefined') {
      viewPortWidth = window.innerWidth,
      viewPortHeight = window.innerHeight
   }
   return viewPortWidth;
}

 </script>

  <form action ='echo.php' method = 'GET'>
   <table>
    <tr>

     <td>

      <input type='hidden' name='r_w' onsubmit='this.value=getViewport();'>

     <td>

    <td>
     <input type="submit" name='submit' value="Go" />

    </td>

   </tr>

  </table>

 </form>

 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:53:16.583

隐藏的输入字段没有“onsubmit”事件。您必须将其放在提交按钮上，并将名为“r_w”的字段的值设置为 getViewport() 的结果。

**更新**

不要将您的提交按钮命名为“提交”，它会取消对表单提交功能的任何调用，这就是您将在此处使用的功能。

`<input type="submit value="Go" onsubmit="setViewPort()">`

然后创建一个函数 setViewPort()，将字段“r_w”的值设置为 getviewPort() 的结果。

# c++ - 使用 C++ 和 OpenGL 显示图像的正确方法

> ID：13735202
> 
> 赞同：3
> 
> 时间：2012-12-06T00:49:31.877
> 
> 标签：c++, opengl

（我已经更新了新的更好的代码）

[http://www.flickr.com/photos/pkerkm/8251188947/in/photostream](http://www.flickr.com/photos/pkerkm/8251188947/in/photostream) 好方向

[http://www.flickr.com/photos/pkerkm/8252258464/in/photostream](http://www.flickr.com/photos/pkerkm/8252258464/in/photostream) 不好的方向

我们正在使用 SOIL 库 C++ openGL

我们在显示的其中一张图像上绘制了 N、S、W、E 符号，因为我们认为图像被翻转或显示不正确。我们是对的，但不确定为什么以及如何解决它。我们的W在上，E在下，S在右，N在左。这意味着，符号 N 在左侧，至于它应该在上面的位置。

这是我们生成 3 维数组和图片的代码。

```
void genTex(){
texture[0]=SOIL_load_OGL_texture // load an image file directly as a new OpenGL      texture 
    (
        "C:\\Users\\Pkerkm\\Documents\\Visual Studio 2010\\Projects\\files\\gameprojecgraphics\\bloodwall2.png",
        SOIL_LOAD_AUTO,
        SOIL_CREATE_NEW_ID,
        SOIL_FLAG_MIPMAPS | SOIL_FLAG_INVERT_Y | SOIL_FLAG_NTSC_SAFE_RGB | SOIL_FLAG_COMPRESS_TO_DXT
    );
glBindTexture(GL_TEXTURE_2D, texture[0]);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
//glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
//glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST); 
}

void /*GraphicsEngine::*/generateMap(){
  int i, k, j;
  double coordinates[8][3];
  for(i=0; i<MAPWIDTH; i++){
    for(j=0; j<MAPHEIGHT; j++){
      for(k=0; k<MAPDEPTH; k++){
    if(stage[i][j][k]==0){
      //do nothing
    }
    else if (stage[i][j][k]==1){
      getWallCoordinates(coordinates, i, j, k);
  if(j==0 || stage[i][j-1][k]==0){
        drawWall(coordinates[0],coordinates[1],coordinates[2],coordinates[3],true);
  }
      if(j<MAPHEIGHT-1 && stage[i][j+1][k]==0){drawWall(coordinates[7],coordinates[6],coordinates[5],coordinates[4],false);
  }
  if(i==0 || stage[i-1][j][k]==0){drawWall(coordinates[7],coordinates[4],coordinates[0],coordinates[3],false);
  }
  if(k==MAPDEPTH-1 || stage[i][j][k+1]==0){drawWall(coordinates[7],coordinates[3],coordinates[2],coordinates[6],false);
  }
  if(i==MAPWIDTH-1 || stage[i+1][j][k]==0){drawWall(coordinates[6],coordinates[2],coordinates[1],coordinates[5],false);
  }
  if(k==0 || stage[i][j][k-1]==0){drawWall(coordinates[5],coordinates[1],coordinates[0],coordinates[4],false);
 }
    }
   }
  }
 }
} 
void /*GraphicsEngine::*/drawWall(double a[3],double b[3], double c[3], double d[3], bool floor){
//glColor3f(1.0,0.0,1.0);

if(floor){
    glBindTexture(GL_TEXTURE_2D, texture[1]);
}else{
    glBindTexture(GL_TEXTURE_2D, texture[0]);
}
//GLuint tex;
//glGenTextures(1, &tex);
glTexEnvf( GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE,GL_MODULATE );
glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
//glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
//glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);

//glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);

//glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);

//tex = LoadTexture("wallsprite.png");
//glBindTexture(GL_TEXTURE_2D, tex);
glEnable(GL_TEXTURE_2D);
glBegin(GL_QUADS);
    //glNormal3f(0, 1, 0);
    glTexCoord2d(0.0,0.0);
    glVertex3dv(a);
    glTexCoord2d(-1.0,0.0);
    //glVertex3dv(b);
    glVertex3dv(d);
    glTexCoord2d(-1.0,-1.0);
    glVertex3dv(c);
    glTexCoord2d(0.0,-1.0);
    //glVertex3iv(d);
    glVertex3dv(b);
glEnd();
/*glTexCoord2f(0.0, 0.0); glVertex3f(-2.0, -1.0, 0.0);
    glTexCoord2f(0.0, 1.0); glVertex3f(-2.0, 1.0, 0.0);
    glTexCoord2f(1.0, 1.0); glVertex3f(0.0, 1.0, 0.0);
    glTexCoord2f(1.0, 0.0); glVertex3f(0.0, -1.0, 0.0);*/
glDisable( GL_TEXTURE_2D );
 } 
```

}

我认为问题出在此处，但不确定如何解决

```
void /*GraphicsEngine::*/getWallCoordinates(double coordinates[8][3], double x, double y, double z){
int i;
for(i=0;i<8; i++){
    if((i/4)>=1){
        coordinates[i][1]=BLOCKHEIGHT*(y+1);
    }else{
        coordinates[i][1]=BLOCKHEIGHT*y;
    }
    if((i/2)%2==0){
        coordinates[i][2]=BLOCKDEPTH*z;
    }else{
        coordinates[i][2]=BLOCKDEPTH*(z+1);
    }
    if((i%4)%3==0){
        coordinates[i][0]=BLOCKWIDTH*x;
    }else{
        coordinates[i][0]=BLOCKWIDTH*(x+1);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:16:28.593

只需切换 glTexCoord2f 指令即可将纹理旋转 90 度。

# javascript - window.open() 方法在 Firefox 中似乎不可靠

> ID：13735206
> 
> 赞同：2
> 
> 时间：2012-12-06T00:50:07.780
> 
> 标签：javascript, html

我正在编写文档，并希望创建弹出窗口，如果他们愿意，可以为读者提供更多信息。但是，我用 window.open() 得到了不确定的结果。我在火狐。有时它可以工作，有时它不工作，有时它将窗口作为弹出窗口打开，有时它作为另一个选项卡打开。尝试输入诸如高度和宽度之类的参数使其不太可能起作用，尽管有时确实如此。我在这里做错了吗？以下工作并打开一个选项卡，但这并不是我真正想要的。

```
<script type="text/javascript">
function windoc(theurl) {
alert("got to windoc");
doc02 = window.open(theurl);
doc02.moveTo(0,0);
}
</script> 
```

无论我是否使用“moveTo”，该窗口都会在选项卡中打开。

调用程序中的 HTML 都是文本 - 这是调用：

```
there is a bunch of text here <a style = "color:800517; 
width:300px" onclick = "windoc('doc02.cfm#personid')">What does this mean? </a>
more text here 
```

这是目标：

```
<div class = "tipdoc">
<a name = "personid"></a>
there is text here blah, blah, blah... 
```

# asp.net-mvc-3 - 在将模型保存到数据库之前，如何在 MVC3 中创建/编辑时持久化模型？

> ID：13735209
> 
> 赞同：0
> 
> 时间：2012-12-06T00:50:36.217
> 
> 标签：asp.net-mvc-3, model

基本上我说的是我们在 ASP.NET 中拥有的东西，称为 ViewState。这是示例，为简单起见，我有一个模型 Employee：

```
public class Employee
{
    public string EmployeeId { get; set; }
    public string Name { get; set; }
    public string Company { get; set; }
    public string Phone { get; set; }
    public string Address { get; set; }
} 
```

我的公司使用员工 ID、姓名和公司为员工创建记录。员工只需输入（更新）他的电话号码和地址。当我在编辑/或创建模式下为员工输入此信息时，EmployeeID、Name 和 Company 以文本形式输出，而 Phone 和 Address 是可编辑字段 (Html.EditorFor)，允许保留在模型中输入的值目的。

当这个表单被 HTTP 回传时，假设验证失败，并且表单再次呈现给用户以更正他的输入（视图（模型））。

但是，EmployeeID、Name 和 Company 的值会丢失，因为它们没有像 Phone 和 Address 一样被定义为 Html.EditorFor，因此在提交的模型再次传递到视图时不会被保留。

如何在模型中保留（持久）那些属性（不可编辑）？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:43:17.120

只需使用 Html.HiddenFor 并将值存储在页面上。您也可以使用 mvc futures 项目和 Html.Serialize 它，但是当不需要时您正在模仿视图状态。

# php - 在我的 PHP + Ajax 代码中，为什么 $_SESSION 在执行过程中会消失？

> ID：13735211
> 
> 赞同：1
> 
> 时间：2012-12-06T00:50:47.160
> 
> 标签：php, ajax

我正在做一个简单的 Ajax 练习，我将查询、Ajax 和 Ajax 调用的 url 分开。简而言之，我在一个页面中运行查询并将结果数组附加到`$_SESSION`，然后显示一些 html 并且 Ajax 代码调用第三页通过附加到超全局的计数器从数组中一一获取元素`$_GET`。这三个文件由`require_once()`.

最初加载页面时，一切都按预期进行。`$_SESSION`包含从 MySQL 中提取的整个数组，并且为`$_GET`null。

一旦我单击按钮执行 Ajax 代码，`$_GET`值就会改变并接收计数器的值，正如预期的那样。

**然而，`$_SESSION`不复存在。** 现在`var_dump`返回`null`，我得到一个错误`Notice: Undefined variable: _SESSION in C:\wamp\www\.....\ajax.php`。我不明白为什么会这样。

这是我的代码。首先，`index.php`：

```
<?php

session_start();

$dbhost = "localhost";
$dbuser = "admin";
$dbpass = "XXXXXXX";
$dbname = "test";
mysql_connect($dbhost, $dbuser, $dbpass);
mysql_select_db($dbname) or die(mysql_error());
$query = "SELECT ae_name FROM ajax_example";
$qry_result = mysql_query($query) or die(mysql_error());
$result;
while($row = mysql_fetch_array($qry_result,MYSQL_ASSOC)){
    $result[]=$row;
}

$_SESSION['array']=$result;

require_once ("viewUsers.php");

require_once ("ajax.php");
?> 
```

然后是 html 和 ajax 代码`viewUsers.php`：

```
<html>
<body>
<script type="text/javascript">
<!-- 
function createRequest() {
    try {
      request = new XMLHttpRequest();
    } catch (tryMS) {
      try {
        request = new ActiveXObject("Msxml2.XMLHTTP");
      } catch (otherMS) {
        try {
          request = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (failed) {
          request = null;
        }
      }
    }
    return request;
  }
var indx=0;
function calcIndex(){
  return indx++;
}
function ajax(){
  ajaxRequest = createRequest();
  var index=calcIndex();
  var url="ajax.php?index=" + index;
  ajaxRequest.open("GET",url, true);
  ajaxRequest.onreadystatechange = display;
  ajaxRequest.send(null); 
}
function display(){
  if(ajaxRequest.readyState == 4){
    var ajaxDisplay = document.getElementById('ajaxDiv');
    ajaxDisplay.innerHTML = ajaxRequest.responseText;
  }
}
//-->
</script>
<form name='myForm'>
<input type='button' onclick='ajax()' value='Show next name' />
</form>
<div id='ajaxDiv'>Your result will be displayed here</div>
</body>
</html> 
```

然后 PHP 从 $_SESSION 接收数组并（应该）根据 $_GET['index'] 的值返回下一项。该文件是`ajax.php`.

```
<?php
var_dump('Get value in ajax.php',$_GET); // The values are as expected
var_dump('Session value in ajax.php',$_SESSION); // This global cease to exist after I click the button
if(isset($_SESSION['array'])){
  $array=$_SESSION['array'];
  $cnt=count($array);
  $index=null;
  if(isset($_GET['index'])){
    $index=$_GET['index'];
    if($index>=$cnt){
      $str="And that's it....";
    }else{
    $str="The next name is ".$array[$index]['ae_name'];
    }
    echo $str;
  }
}
?> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-09T21:06:58.237

问题是 ajax.php 中的会话没有启动/恢复。

当你调用 index.php 时，它是：

index.php -> .. -> ajax.php（**会话存在（在 index.php 中调用 session_start()）**）

然后你`ajax.php`通过ajax请求你：

html -> ajax.php（**会话不存在（session_start() 从未被调用，因为我们不是来自 index.php）**）

您只需要在 ajax.php 中初始化/恢复会话，但您必须检查它是否尚未从 index.php 初始化。将这段代码放入您的 ajax.php 文件中：

```
if(!session_id())     // check if we have session_start() called
     session_start(); // if not, call it 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T14:29:31.387

**来自 PHP 文档**

> [session_start()](http://php.net/manual/en/function.session-start.php)根据通过 GET 或 POST 请求或通过 cookie 传递的会话标识符创建会话或恢复当前会话。
> 
> 当[session_start()](http://php.net/manual/en/function.session-start.php) 被调用或会话自动启动时，PHP 将调用打开和读取会话保存处理程序。这些将是默认提供的内置保存处理程序或由 PHP 扩展（例如 SQLite 或 Memcached）提供；或者可以是 session_set_save_handler() 定义的自定义处理程序。读取回调将检索任何现有的会话数据（以特殊的序列化格式存储）并将被反序列化并用于在读取回调将保存的会话数据返回给 PHP 会话处理时自动**填充 $_SESSION 超全局变量。**

没有调用`session_start`肯定`$_SESSION`不会相应地填充为什么建议总是调用 session_start 如果你在你的脚本中，如果你要使用 session 。

快速几个步骤

1.  从`require_once ("ajax.php");`那里`index.php`不需要

PHP代码

```
$_SESSION['array']=$result;
require_once ("viewUsers.php");
require_once ("ajax.php");  //<------ remove this 
```

1.  添加`session_start();`到`ajax.php`

**[来自mysql_query](http://php.net/manual/en/function.mysql-query.php)上的**PHP DOC****

 **> 不鼓励使用此扩展程序。相反，应该使用[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO_MySQL扩展。](http://php.net/manual/en/ref.pdo-mysql.php)另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：
> 
> *   [mysqli_query()](http://php.net/manual/en/mysqli.query.php)
> *   [PDO::查询（）](http://php.net/manual/en/pdo.query.php)

你`index.php`最终应该看起来像这样

```
session_start();

// Put this in config file 
$dbhost = "localhost";
$dbuser = "admin";
$dbpass = "XXXXXXX";
$dbname = "test";
$array = array();

//Start DB Connection 
$mysqli = new mysqli($dbhost, $dbuser, $dbpass, $dbname);
$query = "SELECT ae_name FROM ajax_example";
$result = $mysqli->query($query);

//Get Information
while ( $row = $result->fetch_assoc() ) {
    $array[] = $row;
}

$result->free();
$mysqli->close();

// Add Info to session 
$_SESSION['array'] = $array;
require_once ("viewUsers.php"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T15:38:10.637

@JDelage，您的问题有一个非常简单的解决方案 - 只需在 ajax.php 文件顶部添加 session_start() 即可。

但是，这里的主要问题是代码结构缺乏组织。

大多数操作中都预加载了会话/配置。这些都包含在每次调用中加载的文件中。

您的文件 ajax.php 显然似乎是一个独立文件，但是依赖于 index.php，同时 index.php 依赖于 ajax.php (require_once)。

因此，针对您的代码类型的最佳解决方法如下。

引导程序.php

```
<?php
// just to check to prevent overwriting of your configs / preloads.
if(!defined("INITIALIZED")){
  session_start();
  //.. some other basic settings if you require
  define("INITIALIZED", 1);
}
?> 
```

索引.php

```
<?php
include_once "bootstrap.php";
// .. your code
require_once("viewUsers.php");
require_once("ajax.php"); 
```

ajax.php （是的，这里需要 session_start()，因为当你对这个文件进行异步请求时，它是一个独立的请求，与 index.php 无关。AJAX 调用是客户端异步请求，而不是服务器端。）

```
<?php
include_once 'bootstrap.php';
// .. your code 
```

viewUsers.php // 因为你的 viewUsers.php 文件不是一个独立的文件并且只包含在 index.php 中，你可以简单地在顶部添加这一行来防止直接调用文件。

```
<?php
if(!defined("INITIALIZED")){die();} 
```

PS：没有唯一的解决方案。方法是您必须决定的。你的方法是一种方法，它不是任何一种方法。休息就好。

我希望我已经回答了您的疑问。

问候，

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-08T01:26:23.430

ajax.php 在开始时需要一个 session_start() ，否则，当您通过 ajax 独立调用它时，您将没有会话，因此没有 $_SESSION var。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T18:14:13.950

您有许多`if`条件使您很难看到错误。在这些位置添加一些`echo`语句以查看程序流中发生的情况。故障排除会更容易。例如：

```
<?php

//session_start();

echo 'You sent ' . $_GET['index'] . '<br>'; //Ensure index value arriving

if(isset($_SESSION['array'])){
    $array=$_SESSION['array'];
    $cnt=count($array);
    $index=null;
    if(isset($_GET['index'])){
        $index=$_GET['index'];
        echo 'Got to here<br>';  //Another checkpoint - send something back
        if($index>=$cnt){
            $str="And that's it....";
        }else{
            $str="The next name is ".$array[$index]['ae_name'];
        }
        echo $str;
    }else{
        echo 'GET var "index" was not set<br>';
    }
}else{
    echo 'SESSION var "array" was not set<br>';
}

?> 
```

当然，您将`echo`在修复代码时删除这些语句......它们只是临时的，用于调试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-22T06:20:13.767

我遇到了类似的问题。我发现在其中一个 ajax 调用中我忘记调用`session_start()`. 当我确保`session_start()`总是在所有通过 ajax 调用的 php 代码中调用我时，这个问题就消失了。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-13T02:20:48.757

使用 AJAX 时，有时会话不会继续。在您的 AJAX 发布/获取中包含 sessionID。然后在接收端执行以下操作：

```
$sid = ($_POST['sid']) ？$_POST['sid'] : ''; //检查发布的会话ID

session_start($sid); //使用发布的ID开始会话或开始新的会话
```

*老派的方法，是的，但经过验证是正确的。**

# c - 有多少种方法可以锁定c

> ID：13735225
> 
> 赞同：0
> 
> 时间：2012-12-06T00:51:57.560
> 
> 标签：c

我是c编程的新手。直到现在我才发现`pthread_mutex_lock`可以使代码区域只由一个线程运行。还有其他实现锁的方法吗？或者其他所有做锁的方法仍然是使用`pthread_mutex_lock`函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T01:00:23.883

线程仅通过 C11 引入 ISO C 标准，这是该标准的较新版本，因此不一定*得到广泛*支持。

您需要查看功能以了解这一点`threads.h`。`mtx_*`

在那之前，`pthreads`它可能是你最好的选择，尽管它不是标准的 C ^((a))，但它的支持不是强制性的。

例如，Windows 有自己的线程处理方式，使用`CreateThread`.

但是，有各种第三方产品，例如[pthreads-win32](http://sourceware.org/pthreads-win32/)，旨在为 Windows 提供 pthreads 支持，以帮助从兼容 POSIX 的操作系统移植应用程序。

* * *

^((a))它*是*POSIX 标准（IEEE 1003.1 的一部分），因此对某些人来说可能已经足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T00:56:36.963

没有办法锁定`c`语言。操作系统可能提供对锁定的支持（不考虑语言），并且诸如`pthreads`可以利用操作系统服务的库，但是这与语言无关。（相比之下，其他语言内置了本地锁定，例如通过 Java 的`synchronized`关键字。）

# ruby-on-rails - Oauth2 流程使用 Facebook uid 请求令牌以获取凭据

> ID：13735227
> 
> 赞同：3
> 
> 时间：2012-12-06T00:52:31.250
> 
> 标签：ruby-on-rails, authentication, oauth-2.0

我正在构建一个带有 Rails 后端的 iPhone 客户端。客户端通过 Oauth2 API 与服务器通信。我已经使用 oauth2 和 doorkeeper gems 进行了设置。

每个 API 请求都必须使用令牌发送。我目前支持两种令牌“类型”：

*   客户端：使用客户端凭据授予类型。这适用于非用户特定的请求，例如访问应用程序范围的资产、密钥等。
*   用户：使用密码凭据授权类型。要获取此令牌，客户端必须通过传递有效的用户名/密码组合来请求它。所有用户请求都使用此令牌。

这一切正常，但我现在遇到了一个问题，因为我允许用户也使用 Facebook 登录应用程序。

在用户登录 FB 后，我的客户端通过将 Facebook UID 传递给我的服务器（使用客户端令牌）进行响应。然后，我在我的服务器上进行一些检查，以将此 UID 与我数据库中的现有用户相匹配。

这是问题所在：我想使用用户令牌响应此请求。需要此令牌，因为用户现在将登录到应用程序，并且任何后续请求都将需要此令牌。但是，目前我觉得我这样做的唯一方法是：

回复用户名和密码。然后让客户端按照密码凭证流程请求用户令牌。我不喜欢这样，因为我要传递密码，而且它需要多次旅行。

我觉得我可能缺少一些基本的东西。我应该有另一种方式来处理这个流程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:38:03.743

我想我有一个解决方案，但它绝对是一个 hack。

基本上我正在劫持密码凭据流来处理这个 Facebook 场景。

客户端像这样进行调用（格式可能在我在 ruby​​ 中测试时关闭）：

```
curl -i http://www.example.com/oauth/token   -F grant_type=password   -F client_id=(client id)-F client_secret=(client secret) -F username=(email address) -F password=(password) -F provider="facebook" -F uid=(fb uid) -F token=(fb token) 
```

在我的服务器上，我检查“提供者”参数。如果找到，它会使用 facebook uid 在用户表中查找匹配项，而不是密码验证。我还将 FB 令牌作为安全措施传递（我在查找匹配项之前验证此令牌属于 uid）。如果找到匹配项，则将用户设置为令牌的资源所有者，这意味着我最终会得到一个用户令牌。

这是我的 doorkeeper.rb 中的代码块：

```
resource_owner_from_credentials do |routes|
 if params[:provider]
    // FB uid authentication path code here
 else
   // password authentication
   user = User.find_by_email(params[:username])
   user if user && user.authenticate(params[:password])
 end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T16:01:31.847

OAuth 2.0 定义的资源所有者密码凭证类型实际上并不适合外部登录，例如 Facebook，因为身份验证是通过外部站点完成的，而不是来自您自己授权服务器上的用户名和密码。

一种解决方案是切换到 OAuth 2.0 的隐式授权类型 ( [https://www.rfc-editor.org/rfc/rfc6749#section-4.2](https://www.rfc-editor.org/rfc/rfc6749#section-4.2) )。Doorkeeper 也支持这种类型。

从您的应用程序中，您必须打开一个 Web 视图并将用户重定向到 Doorkeeper 的授权端点（默认值：/oauth/authorize），参数为：client_id=...、redirect_uri=... 和 response_type=token。此外，您必须告诉 Doorkeeper 将用户重定向到 FB 登录。

因此将其添加到 doorkeeper.rb：

```
resource_owner_authenticator do   
  user_from_session || begin
    session[:return_to] = request.fullpath

    fb_login_url = "..." # add here your facebook login url 
    redirect_to(fb_login_url)
  end
end 
```

在用户通过 FB 登录并在服务器上对用户进行身份验证后，您必须将用户重定向回 session[:return_to] 指向 /oauth/authorize 的内容，并重定向到最初给定的 redirect_uri，包括 url 中的 access_token .

# node.js - 在 node.js 中写入控制台时出现编码问题

> ID：13735228
> 
> 赞同：0
> 
> 时间：2012-12-06T00:52:33.670
> 
> 标签：node.js, encoding

我在 node.js 中的编码有问题。我在 Windows 上运行它，例如，如果我运行这个简单的程序：

```
console.log("trying áéíóú"); 
```

我进入控制台：

> 试 ？？？？？

这是正常的吗？我怎么解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T03:08:30.103

问题是您的控制台无法按照当前配置的方式处理某些字符。检查设置，看看是否可以启用不同的字符集。您可能想使用 Unicode。

# jsp - jsp getAttribute 返回空值

> ID：13735229
> 
> 赞同：0
> 
> 时间：2012-12-06T00:52:52.730
> 
> 标签：jsp

我有问题，当我得到属性时，它包含空值，但我分配给它的变量得到了值

这是我如何通过位置的perviouse页面：

```
<%if(rs.next()) {%>
<td><a href="university.jsp?location=<%=rs.getInt("cs_id")%>"><%out.print((String)  (rs.getString("country_state")));%></a></td>
<%}else{ break; } %> 
```

这是未获取参数的页面 请选择您的大学所在州或输入您的大学：

```
<%
    //set the session the each parameter
    String locationString = request.getParameter("location");

    Integer locationId = Integer.valueOf(locationString);

    session.setAttribute("locationId",locationString);

    System.out.print(locationString);
    System.out.print(request.getAttribute("locationId"));
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:05:47.473

您曾经`session.setAttribute("locationId", locationString);`将属性放入，`session` 但您尝试从`request`via获取属性`request.getAttribute("locationId")`

`request.getAttribute`不同于`session.getAttribute`

# apache - 如何结合 Apache 重定向？

> ID：13735230
> 
> 赞同：2
> 
> 时间：2012-12-06T00:52:53.027
> 
> 标签：apache, mod-rewrite, redirect, url-rewriting

我有一个 Apache 配置，它具有多个重写规则和重定向，以便获得最可爱的 URL，防止 SEO 重复等。以下是一个片段作为示例（它具有更多功能）：

```
# Redirecting non-www to www 
RewriteCond %{HTTP_HOST} ^example.com
RewriteRule (.*) http://www.example.com/$1 [R=301,L]

# Removing index.php
RewriteCond %{REQUEST_URI} index\.php$ [NC]
RewriteRule .* / [R=301,L]

# A big bunch of these
Redirect permanent /old-article.html  http://www.example.com/new-article.html
Redirect permanent /another-old-article.html  http://www.example.com/new-article2.html 
```

这很好用，但它碰巧会产生很多重定向。一个常见的情况如下所示：

```
http://example.com/index.php, 301 redirect to http://www.example.com/index.php
http://www.example.com/index.php, 301 redirect to http://www.example.com 
```

它有时会达到 4-5 个重定向。

现在，我希望将所有这些规则链接起来并只生成一个 301 重定向，如下所示：

```
http://example.com/index.php, 301 redirect to http://www.example.com 
```

我知道我可以花一个下午的时间思考和整理规则以更好地匹配，而且我可以创建组合规则。但这会使已经很长的文件复杂化。我想要一个标志、操作数或任何可以执行所有规则的东西，就好像它们在内部一样，并且只有在爬取每条规则后才发出重定向。这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T02:03:18.540

从您的 s 中删除`[L]`标志`RewriteRule`，它们将自动组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:43:40.957

似乎只需重新排序就可以得到你想要的：

```
# A big bunch of these
Redirect permanent /old-article.html  http://www.example.com/new-article.html
Redirect permanent /another-old-article.html  http://www.example.com/new-article2.html

# Removing index.php
RewriteRule ^/index.php http://www.example.com/ [R=301,L]

# Redirecting non-www to www 
RewriteCond %{HTTP_HOST} ^example.com
RewriteRule (.*) http://www.example.com/$1 [R=301,L] 
```

直接请求`example.com`域中的旧文章：

```
http://example.com/old-article.html 
```

将导致单个重定向到：

```
http://www.example.com/new-article.html 
```

请求`http://example.com/index.php`或`http://www.example.com/index.php`将导致单个重定向到：

```
http://www.example.com/ 
```

与其他任何内容都不匹配的请求将导致来自以下位置的单个重定向：

```
http://example.com/foo 
```

至：

```
http://www.example.com/foo 
```

这似乎涵盖了所有基础。我错过了什么吗？

# c++ - Mac 上带有 CDT 的 Eclipse

> ID：13735231
> 
> 赞同：5
> 
> 时间：2012-12-06T00:52:55.870
> 
> 标签：c++, c, eclipse, macos, eclipse-cdt

我一直在尝试让带有 CDT 的 Eclipse 在我的 Mac 上运行一段时间。我搜索过的所有内容都在谈论 Windows，我被正式卡住了。

我得到的错误是：

`Program "g++" not found in PATH`

`Program "gcc" not found in PATH`

还有一些似乎源于我的 PATH 的问题。我使用 --version 在终端中检查了 gcc、g++、make 和 gmake，它们都已安装。Eclipse CDT 应该检测在哪里查找 PATH 变量，但我不知道我将在哪里更改它或如何更改它。任何帮助将不胜感激！

**编辑：**原来的问题是固定的。由于某种原因，我在 Eclipse 中的 PATH 变量为空，因此我不得不添加 /usr/bin 和 /usr/local/bin 等位置。现在我收到“无法解析符号'cout'”的错误。

**编辑 2：**我能够通过卸载所有内容并使用 CDT 重新安装 Eclipse Indigo 来使所有内容正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T22:32:43.293

没有安装 C/C++ 编译器。

选项是：

1.  从这里安装 gcc（最好）：[https ://github.com/kennethreitz/osx-gcc-installer](https://github.com/kennethreitz/osx-gcc-installer)
2.  安装所有 Xcode (1 gig install)
3.  仅从 Xcode [https://developer.apple.com/downloads/index.action安装命令行工具](https://developer.apple.com/downloads/index.action)

安装后，请确保您可以从命令行（类型 gcc）调用编译器，如果编译器不起作用，则编译器尚未添加到环境路径变量中。

一些额外的帮助： [如何在 MacOS X 上安装 g++？](https://stackoverflow.com/questions/2122425/how-do-i-install-g-on-macos-x)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T01:26:46.153

这是一个很棒的教程，展示了 linux 的所有必要步骤。我觉得应该很相似。

[http://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-development/](http://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-development/)

如果这些都没有帮助，也许您必须将 gcc 的路径添加到您的 PATH 变量中。它应该像这样工作：

在文本编辑器中打开 .bash_profile。（如果您使用的是 TextEdit，您可以在命令行中使用“open -a /Applications/TextEdit.app ~/.bash_profile”执行此操作。）添加以下行：

导出 PATH="/usr/local/bin:$PATH"

到文件。保存文件并打开一个新终端，然后输入“echo $PATH”以查看它是否正常工作。

**编辑：**其他人的输出与您完全相同，并设法通过用旧版本替换他的 Eclipse 版本来修复它。您可以尝试使用 Helios 而不是 Indigo 或 Juno。这只是一个临时解决方案，直到出现更好的情况（以防它真的有效）。老实说，我实际上更喜欢 Indigo 和 Helios 而不是 Juno。如果您有任何担心 - Helios 是 2010 年发布的版本，并且仍然相当不错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T19:42:52.843

对于 cout - 你有 #include 吗？请注意， cout 是 std 命名空间的一部分 - 您需要对其进行限定或使用“使用”指令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-06T13:22:21.593

我的解决方案是

在偏好->`c/c++ -> build->enviroment`添加`PATH= /usr/local/bin`

希望这对你来说很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-19T04:03:29.240

您必须更改`~/.bash_profile`，请参阅下面的过程：

1.  打开终端窗口

2.  发送 cmd `echo $PATH`，然后复制 -bash 输出

3.  发送命令`touch ~/.bash_profile`
4.  发送命令`open -a TextEdit.app ~/.bash_profile`
5.  bash_profile 将被打开，一个空的文本文件，这意味着它是第一次创建的。
6.  在空的 bash_profile 中写入：`PATH='paste the copied items from echo $PATH cmd a while a back'`
7.  保存并重新打开终端，`$PATH`再次验证回声。
8.  重新启动你的日食。

# centos - Chef-Solo “nil:NilClass 的未定义方法‘[]’”

> ID：13735232
> 
> 赞同：6
> 
> 时间：2012-12-06T00:52:58.187
> 
> 标签：centos, virtual-machine, chef-infra, provisioning

我刚刚安装了一个新的 CentOS 6.3 虚拟机并禁用了 SELinux。下面是我运行安装 Ruby、Chef Solo 并尝试配置 VM 的确切脚本：

```
#!/bin/bash
#
# Install Chef-Solo if it doesn't exist, then provision the server.
#
CHEF_FILE="https://dl.dropbox.com/u/4204671/LiquidCompass/lc-chef.tar.gz"

if [ "$#" -eq 0 ]; then
    echo "You must provide the type of server this is. (Eg: production-api, qa-api, development)"
    exit 1
fi

if [ ! -x "/usr/bin/chef-solo" ]; then
    rpm -Uvh http://rbel.frameos.org/rbel6
    yum install -y ruby ruby-devel ruby-ri ruby-rdoc ruby-shadow gcc gcc-c++ automake autoconf make curl dmidecode

    cd /tmp
    curl -O http://production.cf.rubygems.org/rubygems/rubygems-1.8.10.tgz
    tar zxf rubygems-1.8.10.tgz
    cd rubygems-1.8.10
    ruby setup.rb --no-format-executable

    gem install chef --no-ri --no-rdoc
fi

if [ -d "/etc/chef" ]; then
    rm -rf /etc/chef
fi

if [ -d "/tmp/lc-chef" ]; then
    rm -rf /tmp/lc-chef*
fi

mkdir /etc/chef 

echo "file_cache_path \"/tmp/lc-chef/chef-solo\"
cookbook_path \"/tmp/lc-chef/cookbooks\"
role_path \"/tmp/lc-chef/roles\"
json_attribs \"/etc/chef/node.json\"" > /etc/chef/solo.rb

echo "{
    \"name\": \"$1\",
    \"normal\": {
        \"company\": \"Liquid Compass LLC\",
        \"tags\": []
    },
    \"chef_environment\": \"_default\",
    \"run_list\": [
        \"role[$1]\"
    ]
}" > /etc/chef/node.json

cd /tmp
curl -O $CHEF_FILE
tar zxf lc-chef.tar.gz

chef-solo -c /etc/chef/solo.rb 
```

不幸的是，就在脚本运行时，我收到：

```
[2012-12-05T17:39:27-07:00] INFO: Start handlers complete.

================================================================================
Recipe Compile Error in /tmp/lc-chef/cookbooks/liquidcompass/recipes/php.rb
================================================================================

NoMethodError
-------------
undefined method `[]' for nil:NilClass

Cookbook Trace:
---------------
  /tmp/lc-chef/cookbooks/liquidcompass/recipes/php.rb:20:in `from_file'

Relevant File Content:
----------------------
/tmp/lc-chef/cookbooks/liquidcompass/recipes/php.rb:

 13:  # Unless required by applicable law or agreed to in writing, software
 14:  # distributed under the License is distributed on an "AS IS" BASIS,
 15:  # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 16:  # See the License for the specific language governing permissions and
 17:  # limitations under the License.
 18:  #
 19:  
 20>> php_url                      = "http://us.php.net/distributions/php-#{node['php']['version']}.tar.gz"
 21:  node.set['php']['prefix']    = "/opt/php-#{node['php']['version']}"
 22:  node.set['php']['conf_path'] = "#{node['php']['dir']}/php.ini"
 23:  node.set['php']['configure_flags'] = [
 24:      "--prefix=#{node['php']['prefix']}",
 25:      "--with-config-file-path=#{node['php']['dir']}",
 26:      "--with-config-file-scan-dir=#{node['php']['dir']}/conf.d",
 27:      "--with-curl",
 28:      "--with-pear",
 29:      "--with-gd", 
```

所以看起来它在尝试加载时感到窒息`node['php']['version']`。这是在我`/tmp/lc-chef/cookbooks/liquidcompass/attributes/default.rb`的 with 中定义的：

```
default['php']['version']             = "5.4.9" 
```

因此，似乎 Chef**没有**加载属性文件，或者其他错误。不完全确定如何找出这一点。

跑步：

*   RubyGems 1.8.10
*   厨师 10.16.2

最好的问候，
安德鲁

顺便说一句，这是堆栈跟踪：

```
Generated at Wed Dec 05 17:39:27 -0700 2012
NoMethodError: undefined method `[]' for nil:NilClass
/tmp/lc-chef/cookbooks/liquidcompass/recipes/php.rb:20:in `from_file'
/usr/lib64/ruby/gems/1.8/gems/chef-10.16.2/bin/../lib/chef/cookbook_version.rb:558:in `load_recipe'
/usr/lib64/ruby/gems/1.8/gems/chef-10.16.2/bin/../lib/chef/mixin/language_include_recipe.rb:46:in `load_recipe'
/usr/lib64/ruby/gems/1.8/gems/chef-10.16.2/bin/../lib/chef/mixin/language_include_recipe.rb:33:in `include_recipe'
/usr/lib64/ruby/gems/1.8/gems/chef-10.16.2/bin/../lib/chef/mixin/language_include_recipe.rb:27:in `each'
/usr/lib64/ruby/gems/1.8/gems/chef-10.16.2/bin/../lib/chef/mixin/language_include_recipe.rb:27:in `include_recipe'
/usr/lib64/ruby/gems/1.8/gems/chef-10.16.2/bin/../lib/chef/run_context.rb:79:in `load'
/usr/lib64/ruby/gems/1.8/gems/chef-10.16.2/bin/../lib/chef/run_context.rb:75:in `each'
/usr/lib64/ruby/gems/1.8/gems/chef-10.16.2/bin/../lib/chef/run_context.rb:75:in `load'
/usr/lib64/ruby/gems/1.8/gems/chef-10.16.2/bin/../lib/chef/client.rb:198:in `setup_run_context'
/usr/lib64/ruby/gems/1.8/gems/chef-10.16.2/bin/../lib/chef/client.rb:418:in `do_run'
/usr/lib64/ruby/gems/1.8/gems/chef-10.16.2/bin/../lib/chef/client.rb:176:in `run'
/usr/lib64/ruby/gems/1.8/gems/chef-10.16.2/bin/../lib/chef/application.rb:140:in `run_chef_client'
/usr/lib64/ruby/gems/1.8/gems/chef-10.16.2/bin/../lib/chef/application/solo.rb:224:in `run_application'
/usr/lib64/ruby/gems/1.8/gems/chef-10.16.2/bin/../lib/chef/application/solo.rb:216:in `loop'
/usr/lib64/ruby/gems/1.8/gems/chef-10.16.2/bin/../lib/chef/application/solo.rb:216:in `run_application'
/usr/lib64/ruby/gems/1.8/gems/chef-10.16.2/bin/../lib/chef/application.rb:72:in `run'
/usr/lib64/ruby/gems/1.8/gems/chef-10.16.2/bin/chef-solo:25
/usr/bin/chef-solo:19:in `load'
/usr/bin/chef-solo:19 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-02T17:33:32.670

默认属性在 Chef Solo 中运行良好

我不确定你的食谱里面发生了什么——但这是你的代码的问题，而不是厨师的问题。举个简单的例子，看看这个：

[https://gist.github.com/adamhjk/6141718](https://gist.github.com/adamhjk/6141718)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T00:59:59.020

chef solo 不支持默认属性。

您将需要在您的节点目录下放置一个 node.json，该目录以 .json 形式列出属性。

所以在你的情况下：

```
{
    "php": {
      "version": "5.4.9"
     }
} 
```

如果您想使用 .rb 格式的默认属性/任何属性，您将需要使用 chef-server/chef-client。

# iphone - iphone上sqlite的大小限制

> ID：13735239
> 
> 赞同：1
> 
> 时间：2012-12-06T00:54:25.873
> 
> 标签：iphone, sqlite

我想在 iPhone 上使用 sqlite。

sqlite 文件有大小限制吗？

否则，是否取决于 iPhone 的磁盘空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:57:08.917

基本上受限于存储空间。如果您将拥有庞大的数据库，则应将它们放置在不会备份到 iCloud 的位置。

# ruby-on-rails - RSpec - 以编程方式确定规范的类型

> ID：13735240
> 
> 赞同：0
> 
> 时间：2012-12-06T00:54:29.493
> 
> 标签：ruby-on-rails, ruby, rspec

我想知道是否有可能在运行时（即在 spec_helper.rb 中）找出正在执行的规范（即请求、功能等）？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T02:49:31.257

如果您想为特定类型的规范添加类似 before 过滤器的内容，请考虑编写：

```
RSpec.configure do |config|
  config.before(:each, type: :request) do
    # request-spec only before hook
  end
end 
```

如果您尝试做一些更复杂的事情，您可以通过 访问当前示例的类型`example.metadata[:type]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:13:02.057

`rspec/rails`项目做出这种区分的方式是检查文件路径。

例如，请求规范将具有匹配的文件路径`/spec\/request/`。

# jpa - 未知实体 JPA Netbeans

> ID：13735243
> 
> 赞同：0
> 
> 时间：2012-12-06T00:54:36.973
> 
> 标签：jpa, netbeans

有人知道错误吗？

```
 ColegioJpaController jpa = new ColegioJpaController();
        Colegio c = new Colegio();
        c.setId(1);
        c.setDescripcion("Virgen de Guadalupe");
        c.setUbigeo(1234);

        jpa.create(c); 
```

> 运行： dic 05, 2012 7:48:39 PM org.hibernate.cfg.annotations.Version
> 信息：Hibernate Annotations 3.3.1.GA dic 05, 2012
> 7:48:39 PM org.hibernate.cfg.Environment 信息：
> Hibernate 3.2.5 dic 2012 年 5 月 7:48:39 PM org.hibernate.cfg.Environment 信息：找不到 hibernate.properties dic 2012 年 5 月
> 7:48:39 PM org.hibernate.cfg.Environment buildBytecodeProvider
> 信息：字节码提供程序名称: cglib dic 05, 2012 7:48:39 PM
> org.hibernate.cfg.Environment 信息：使用 JDK 1.4
> java.sql.Timestamp 处理 dic 2012 年 5 月 7:48:39 PM
> org.hibernate.ejb.Version 信息：休眠
> EntityManager 3.3.2.GA dic 2012 年 5 月 7:48:40 PM
> org.hibernate.cfg.AnnotationConfiguration secondPassCompile
> Información: Hibernate Validator not found: ignoring dic 05, 2012
> 7:48:40 PM org.hibernate.connection.DriverManagerConnectionProvider
> 配置信息：使用 Hibernate 内置连接池（不
> 用于生产！） dic 2012 年 5 月 7:48:40 PM
> org.hibernate.connection.DriverManagerConnectionProvider 配置
> 信息：休眠连接池大小：20 dic 2012 年 5 月 7:48:40
> PM org.hibernate.connection.DriverManagerConnectionProvider 配置信息：自动提交模式：true dic 05, 2012 7:48:40 PM
> org.hibernate.connection.DriverManagerConnectionProvider 配置
> 信息：使用驱动程序：com.mysql.jdbc.Driver 在 URL：
> jdbc:mysql://localhost:3306/academia dic 05, 2012 7:48:40 PM
> org.hibernate.connection.DriverManagerConnectionProvider 配置
> 信息：连接属性：{user=root, password=****,
> autocommit=true, release_mode=auto} dic 2012 年 5 月 7:48:40 PM
> org.hibernate.cfg.SettingsFactory buildSettings 信息：RDBMS：
> MySQL，版本：5.5.25a dic 2012 年 5 月 7:48:40 PM
> org.hibernate.cfg.SettingsFactory buildSettings 信息：JDBC
> 驱动程序：MySQL-AB JDBC 驱动程序，版本：mysql-connector-java-5.1.13（
> 修订：${bzr.revision-id}） dic 05, 2012 7:48:40 PM
> org.hibernate.dialect .Dialect 信息：使用方言：
> org.hibernate.dialect.MySQLDialect dic 05, 2012 7:48:40 PM
> org.hibernate.transaction.TransactionFactoryFactory
> buildTransactionFactory 信息：事务策略：
> org.hibernate.transaction.JDBCTransactionFactory dic 05, 2012 7:48:40 PM org.hibernate.transaction.TransactionManagerLookupFactory
> getTransactionManagerLookup 信息：未
> 配置 TransactionManagerLookup（在 JTA 环境中，使用不推荐读写或事务
> 二级缓存） dic 05, 2012 7:48:40 PM
> org.hibernate.cfg.SettingsFactory buildSettings 信息：
> 在 beforeCompletion() 期间自动刷新：禁用 dic 05, 2012
> 7:48:40 PM org.hibernate.cfg.SettingsFactory buildSettings
> 信息：交易结束时自动关闭会话：禁用
> dic 2012 年 5 月 7:48:40 PM org.hibernate.cfg.SettingsFactory
> buildSettings 信息：JDBC 批量大小：15 dic 2012 年 5 月 7:48:40
> PM org.hibernate.cfg.SettingsFactory buildSettings 信息：JDBC
> 批量更新版本数据：禁用 dic 2012 年 5 月 7:48:40 PM
> org.hibernate.cfg.SettingsFactory buildSettings 信息：
> 可滚动结果集：启用 dic 2012 年 5 月 7:48:40 PM
> org.hibernate.cfg.SettingsFactory buildSettings 信息：JDBC3
> getGeneratedKeys (): enabled dic 05, 2012 7:48:40 PM
> org.hibernate.cfg.SettingsFactory buildSettings 信息：
> 连接释放模式：自动 dic 05, 2012 7:48:40 PM
> org.hibernate.cfg.SettingsFactory buildSettings 信息：最大
> 外连接获取深度：2 dic 05, 2012 7:48:40 PM
> org.hibernate.cfg.SettingsFactory buildSettings 信息：默认
> 批量获取大小：1 dic 05, 2012 7:48:40 PM
> org.hibernate.cfg.SettingsFactory buildSettings信息：生成带有注释的 SQL：disabled dic 05, 2012 7:48:40 PM
> org.hibernate.cfg.SettingsFactory buildSettings 信息：
> 按主键排序 SQL 更新：disabled dic 05, 2012 7:48:40 PM
> org.hibernate。 cfg.SettingsFactory buildSettings 信息：
> 为批处理订购 SQL 插入：禁用 dic 2012 年 5 月 7:48:40 PM
> org.hibernate.cfg.SettingsFactory createQueryTranslatorFactory
> 信息：查询翻译器：
> org.hibernate.hql.ast.ASTQueryTranslatorFactory dic 05, 2012 7:48:40
> PM org.hibernate.hql.ast.ASTQueryTranslatorFactory
> 信息：使用 ASTQueryTranslatorFactory dic 05, 2012 7:48:40 PM
> org.hibernate.cfg.SettingsFactory buildSettings信息：查询
> 语言替换：{} dic 05, 2012 7:48:40 PM
> org.hibernate.cfg.SettingsFactory buildSettings 信息：JPA-QL
> 严格合规性：启用 dic 05, 2012 7:48:40 PM
> org.hibernate.cfg .SettingsFactory buildSettings 信息：
> 二级缓存：启用 dic 05, 2012 7:48:40 PM
> org.hibernate.cfg.SettingsFactory buildSettings 信息：查询
> 缓存：禁用 dic 05, 2012 7:48:40 PM
> org.hibernate.cfg.SettingsFactory createCacheProvider 信息：
> 缓存提供程序：org.hibernate.cache.NoCacheProvider dic 05, 2012
> 7:48:40 PM org.hibernate.cfg.SettingsFactory buildSettings
> 信息：优化缓存以实现最小放置：禁用 dic 05， 2012
> 7:48:40 PM org.hibernate.cfg.SettingsFactory buildSettings
> 信息：结构化二级缓存条目：禁用 dic
> 05，2012 7:48:40 PM org.hibernate.cfg.SettingsFactory buildSettings
> 信息：统计信息：禁用 dic 05 , 2012 7:48:40 PM
> org.hibernate.cfg.SettingsFactory buildSettings 信息：已删除
> 实体合成标识符回滚：禁用 dic 05, 2012 7:48:40
> PM org.hibernate.cfg.SettingsFactory buildSettings 信息：
> 默认实体模式：pojo dic 05, 2012 7:48:40 PM
> org.hibernate.cfg.SettingsFactory buildSettings 信息：命名
> 查询检查：启用 dic 05, 2012 7:48： 40 PM
> org.hibernate.impl.SessionFactoryImpl 信息：构建
> 会话工厂 dic 2012 年 5 月 7:48:40 PM
> org.hibernate.impl.SessionFactoryObjectFactory addInstance
> 信息：未将工厂绑定到 JNDI，未配置 JNDI 名称
> 线程“主”中的异常java.lang.IllegalArgumentException：
> 未知实体：com.bitsperu.academia.entidad.Colegio at
> org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:223) at
> com.bitsperu.academia.entidad.ColegioJpaController.create(ColegioJpaController.java:54) 在 com.bitsperu.academia.utilidades.Main.main(Main.java:32) Java
> 结果：1

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
  <persistence-unit name="academiaPU" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>com.bitsperu.academia.entidad.Colegio</class>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
      <property name="hibernate.connection.username" value="root"/>
      <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
      <property name="hibernate.connection.password" value="nbuser"/>
      <property name="hibernate.connection.url" value="jdbc:mysql://localhost:3306/academia"/>
      <property name="hibernate.cache.provider_class" value="org.hibernate.cache.NoCacheProvider"/>
    </properties>
  </persistence-unit>
</persistence> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:49:58.610

在您的示例中，尝试在persist（T）之后调用flush（）：

```
 colegio.setAlumnoList(attachedAlumnoList);
   if (!em.contains(colegio)) {
        // persist object - add to entity manager
        em.persist(colegio);
        // flush em - save to DB
        em.flush();
    } 
```

# javascript - 使用 javascript 更改链接标签的 href

> ID：13735247
> 
> 赞同：3
> 
> 时间：2012-12-06T00:54:47.473
> 
> 标签：javascript, html, css, href, link-tag

您好我正在尝试更改链接标签的href，以便在按下按钮时加载新的样式表。这是我目前所拥有的——

```
function addcss()
{   
   var findlink = document.getElementsByTagName("link");
   findlink.href = "stylesheetxhtml.css";
} 
```

任何帮助非常感谢谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T00:57:03.380

您不能`href`像那样直接设置，因为`document.getElementsByTagName`返回所有`<link>`标签（作为 a `NodeList`）。如果你确定你只有一个，使用这个：

```
var findlink = document.getElementsByTagName("link");
findlink[0].href = "stylesheetxhtml.css"; 
```

如果您有多个`<link>`元素并且想要定位特定的元素，请给它一个 id 并使用`document.getElementById`：

```
var findlink = document.getElementsById("myLinkId");
findlink.href = "stylesheetxhtml.css"; 
```

最后，如果要创建新`<link>`元素，请使用`document.createElement`：

```
var newLink = document.createElement('link');
newLink.href = "stylesheetxhtml.css";
document.getElementsByTagName("head")[0].appendChild(newlink); 
```

# protocol-buffers - 为什么 ProtoBuf 在第一次调用时这么慢，但在循环内部却非常快？

> ID：13735248
> 
> 赞同：6
> 
> 时间：2012-12-06T00:55:11.280
> 
> 标签：protocol-buffers, protobuf-net

灵感来自[这个问题](https://stackoverflow.com/questions/13715476/protobuf-serialization-missing-data-even-for-simple-entities)。我创建了一个小型基准程序来比较 ProtoBuf、BinaryFormatter 和 Json.NET。基准测试本身是一个基于[https://github.com/sidshetye/SerializersCompare](https://github.com/sidshetye/SerializersCompare)的小型控制台。随意添加/改进，添加新的序列化程序非常简单。无论如何，我的结果是：

```
 Binary Formatter         ProtoBuf          Json.NET     ServiceStackJson   ServiceStackJSV
 Loop     Size:512 bytes    Size:99 bytes    Size:205 bytes      Size:205 bytes     Size:181 bytes
    1         16.1242 ms      151.6354 ms       277.2085 ms         129.8321 ms        146.3547 ms
    2          0.0673 ms        0.0349 ms         0.0727 ms           0.0343 ms          0.0370 ms
    4          0.0292 ms        0.0085 ms         0.0303 ms           0.0145 ms          0.0148 ms
    8          0.0255 ms        0.0069 ms         0.0017 ms           0.0216 ms          0.0129 ms
   16          0.0011 ms        0.0064 ms         0.0282 ms           0.0114 ms          0.0120 ms
   32          0.0164 ms        0.0061 ms         0.0334 ms           0.0112 ms          0.0120 ms
   64          0.0347 ms        0.0073 ms         0.0296 ms           0.0121 ms          0.0013 ms
  128          0.0312 ms        0.0058 ms         0.0266 ms           0.0062 ms          0.0117 ms
  256          0.0256 ms        0.0097 ms         0.0448 ms           0.0087 ms          0.0116 ms
  512          0.0261 ms        0.0058 ms         0.0307 ms           0.0127 ms          0.0116 ms
 1024          0.0258 ms        0.0057 ms         0.0309 ms           0.0113 ms          0.0122 ms
 2048          0.0257 ms        0.0059 ms         0.0297 ms           0.0125 ms          0.0121 ms
 4096          0.0247 ms        0.0060 ms         0.0290 ms           0.0119 ms          0.0120 ms
 8192          0.0247 ms        0.0060 ms         0.0286 ms           0.0115 ms          0.0121 ms 
```

*免责声明*：

1.  上面的结果来自 Windows VM - 与裸机操作系统相比，非常小的间隔的秒表/计时器值可能不是 100% 准确。所以忽略上表中的超低值。

2.  对于 ServiceStack，Json 和 JSV 得分取自两次单独的运行。由于它们共享相同的底层 ServiceStack 库，因此一个接一个地运行会影响下一次运行的“冷启动”1 循环分数（它的“热启动”速度很快）

BinaryFormatter 是最大的，但对于单个序列化 => 反序列化循环来说也是最快的。但是，一旦我们围绕序列化 => 反序列化代码进行紧密循环，ProtoBuf 就会*超级*快。

**问题#1**：为什么 ProtoBuf 对于单个序列化 => 反序列化循环要慢得多？

**问题2**：从实际的角度来看，我们可以做些什么来克服“冷启动”？通过它运行至少一个对象（任何类型）？通过它运行每个（关键）对象类型？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T12:18:18.387

> Question#1: Why is ProtoBuf that much slower for a single serialization => deserialization loop?

Because it does a metric ton of work to analyse the model and prepare the strategy; I've spent a lot of time making the generated strategy be as insanely fast as possible, but it could be that I've skimped on optimizations in the meta-programming layer. I'm happy to add that as an item to look at, to reduce the time on a first pass. Of course, on the other hand the meta-programming layer is still twice as fast as Json.NET's equivalent pre-processing ;p

> Question#2: From a practical perspective, what can we do to get past that "cold start"? Run at least one object (of any time) through it? Run every (critical) object type through it?

Various options:

1.  use the "precompile" tool as part of your build process, to generate the compiled serializer as a separate fully-static compiled dll that you can reference and use like normal: exactly zero meta-programming then happens
2.  explicitly tell the model about the "root" types at startup, and store the output of `Compile()`

    ```
    static TypeModel serializer;
    ...
    RuntimeTypeModel.Default.Add(typeof(Foo), true);
    RuntimeTypeModel.Default.Add(typeof(Bar), true);
    serializer = RuntimeTypeModel.Default.Compile(); 
    ```

    (the `Compile()` method will analyse from the root-types, adding in any additional types needed as it goes, returning a compiled generated instance)

3.  explicitly tell the model about the "root" types at startup, and call `CompileInPlace()` "a few times"; `CompileInPlace()` will not full expand the model - but calling it a few times should cover most bases, since compiling one layer will bring other types into the model

    ```
    RuntimeTypeModel.Default.Add(typeof(Foo), true);
    RuntimeTypeModel.Default.Add(typeof(Bar), true);
    for(int i = 0 ; i < 5 ; i++) {
        RuntimeTypeModel.Default.CompileInPlace();
    } 
    ```

Separately, I should probably:

1.  add a method to fully expand a model for the `CompileInPlace` scenario
2.  spend some time optimizing the meta-programming layer

Final thought: the main difference between `Compile` and `CompileInPlace` here will be what happens if you've forgotten to add some types; `CompileInPlace` works against the existing model, so you can still add new types (implicitly or explicitly) later, and it will "just work"; `Compile` is more rigid: once you've generated a type via that, it is fixed and can handle **only** the types it could deduce at the time it was compiled.

# java - Java：向进程输入文件

> ID：13735259
> 
> 赞同：0
> 
> 时间：2012-12-06T00:56:26.527
> 
> 标签：java

我正在编写一个简单的 Java 项目，名为 Robot。机器人可以通过以下方式从命令提示符接受配置文件（如果没有文件，机器人将使用默认配置）：

```
java Robot < config.txt 
```

有谁知道我如何从 java 中的命令提示符读取重定向输入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T00:57:58.777

您可以`System.in`作为输入流访问，它将包含所有重定向的输入。

具体来说，从重定向的标准输入读取与从常规标准输入读取相同。

例如，假设您想从重定向的流中读取整数列表。

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.IOException;
public class Foo {
    public static void main(String args[])
        throws IOException
    {
        BufferedReader r = new BufferedReader(new InputStreamReader(System.in));
        int sum = 0;
        String line;
        while ((line = r.readLine()) != null) {
            sum += Integer.parseInt(line);
        }
        System.out.println(sum);
    }
} 
```

然后当你运行它时，你会得到

```
$ (echo 1; echo 2; echo 65) > foo.txt
$ java Foo < foo.txt
68 
```

# django - Django：如何编写 if 语句

> ID：13735271
> 
> 赞同：0
> 
> 时间：2012-12-06T00:57:16.840
> 
> 标签：django, django-templates

我想获取艺术家列表下的歌曲列表。我的艺术家类只包含艺术家的名字和姓氏。我的歌曲类包含一个艺术家的外键以及歌曲标题。我可以列出艺术家，但是当我尝试列出艺术家的歌曲时，我的 {% endif %} 中出现错误，结束了我的 if 语句 {% if song %}。

```
{% extends "base.html" %}
    {% block heading %}Music Catalog{% endblock %}
    {% block content %}
        {% if user.username %}
            <p>Welcome {{ user.username }}!</p>
            {% if artist %}
                <u1>
                    {% for singer in artist %}
                        <li>{{ singer.firstname }} {{ singer.lastname }}</li>
                        {% if song %}
                            <u1>
                                {% for songs in song %}
                                    {% if (songs.artist.firstname == singer.firstname
                                     and songs.artist.lastname == singer.lastname) %}
                                        <li>{{ songs.title }}</li>
                                    {% endif %}
                                {% endfor %}
                            </u1>
                        {% endif %}
                    {% endfor %}
                </u1>
            {% else %}
                <p>No artists were found in the music catalog.</p>
            {% endif %}
        {% else %}
            <p>You need to <a href="/login/">login</a> to see your music catalog.</p>
        {% endif %}
    {% endblock %}

    enter code here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:13:23.617

我不这么认为，在模板语言 if 语句中，您可以使用圆括号，它不会解析。尝试删除它...

```
{% if songs.artist.firstname == singer.firstname and songs.artist.lastname==singer.lastname%} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:09:53.390

是的，您的`if song`线路不正确。从模板中可以清楚地看出，您当时甚至没有`song`属性。它应该来自哪里？想必它是一个相关的集合`singer`，但你没有在模板中这么说。

你可能想要这样的东西：

```
{% for singer in artist %}
    <li>{{ singer.firstname }} {{ singer.lastname }}
    {% with songs as singer.song_set.all %}
        {% if songs %}
            <ul>
                {% for song in songs %}
                    <li>{{ song.title }}</li>
                {% endfor %}
            </uL>
        {% endif %}
    {% endwith %}
    </li>
{% endfor %} 
```

我还删除了艺术家名字和姓氏的比较，这似乎没有意义：您已经在迭代该艺术家的歌曲集，因此不需要比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T06:51:14.600

正如你所说，*我的歌曲类包含一个艺术家的外键以及歌曲标题。*- 你为什么不直接使用[重组](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#regroup)功能？

```
{% regroup song by artist as artist_list %}

<ul>
{% for artist in artist_list %}
    <li>{{ artist.grouper }}
    <ul>
        {% for songs in artist.list %}
          <li>{{ songs.title }}</li>
        {% endfor %}
    </ul>
    </li>
{% endfor %}
</ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T06:14:59.070

看来您的视图应该处理更多这种逻辑。就像 Raunak Agarwal 提到的，如果您将歌曲或歌曲传递到模板中，那么每首歌曲都将是相同的。

做一个也很奇怪

```
{% for songs in song %} 
```

那只是不正确。

我会更近距离地参观风景。我在下面写了更多。在查看您的代码后，尽管查看视图和模型，但可以对事物有所了解，并提供更好的帮助/答案。

# ada - 在 ada 运行时确定的动态数组大小

> ID：13735274
> 
> 赞同：8
> 
> 时间：2012-12-06T00:57:36.920
> 
> 标签：ada, dynamic-arrays

是否有可能像这样在运行时确定大小的数组，

```
Procedure prog is
   type myArray is array(Integer range <>) of Float;
   arraySize : Integer := 0;
   theArray : myArray(0..arraySize);
Begin
   -- Get Array size from user.
   put_line("How big would you like the array?");
   get(arraySize);

   For I in 0..arraySize Loop
      theArray(I) := 1.2 * I;
   End Loop;
End prog; 
```

除了使用动态链接列表或其他类似结构之外，还有其他方法可以实现此结果吗？或者是否有一个简单的内置数据结构比使用动态链接列表更简单？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T01:46:12.710

当然，在一个块中声明它，如下所示：

```
procedure prog is
   arraySize : Integer := 0;
   type myArray is array(Integer range <>) of Float;
begin
   -- Get Array size from user.
   put_line("How big would you like the array?");
   get(arraySize);

   declare
      theArray : myArray(0..arraySize);
   begin
      for I in 0..arraySize Loop
         theArray(I) := 1.2 * I;
      end Loop;
   end;
end prog; 
```

或将 arraySize 作为参数传递给子程序并在该子程序中声明和操作它：

```
procedure Process_Array (arraySize : Integer) is

    theArray : myArray(0..arraySize);

begin
   for I in arraySize'Range Loop
      theArray(I) := 1.2 * I;
   end Loop;
end; 
```

这只是说明性的（而不是编译的:-)，因为您需要处理诸如无效数组大小之类的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T01:47:33.090

是的，您可以推迟受约束对象的声明，直到您知道大小为止。在这个[例子](https://stackoverflow.com/a/12923999/230513)中，数组`Candidates`可以分配在嵌套块中（由关键字引入`declare`）或堆上（使用关键字`new`）。在这个相关[示例](https://stackoverflow.com/a/13655744/230513)中，`Line`每次循环都有不同的大小，具体取决于`Get_Line`找到的内容。

# powershell - 将 powershell 脚本更改为不带省略号的输出 (...)

> ID：13735275
> 
> 赞同：32
> 
> 时间：2012-12-06T00:57:39.287
> 
> 标签：powershell, powershell-2.0

我需要一些有关以下脚本输出的帮助，因此输出不会显示为省略号 (...)。我试图插入`| Format-Table -Wrap -AutoSize`，但似乎无法正确插入。

```
 clear-host Add-PSSnapin microsoft.sharepoint.powershell -ErrorAction SilentlyContinue    
 $services = new-object system.collections.sortedlist
 $servers = (get-spfarm).servers  
 foreach ($server in $servers) {
     foreach($service in $server.serviceinstances)
     {
         if ($service.status = "Online")
         {
             $s = $service.typename
             if ($services.contains($s))
             {
                 $serverlist = $services[$s]
                 $servername = $server.name 
                 $services[$s]  = "$serverlist - $servername"
             }
             else
             {
                 $services[$s] = $server.name
             }
         }
     } } 
  $services 
```

输出：

```
Name                            Value                                                                           
----                           -----                                                                           
Access Database Service        SE5APP - SE5FE - SE7FE - FAQ3                                          
Application Discovery **and L...** SE5APP - SE5FE - SE7FE - FAQ3                                          
Application Registry Service   SE5APP - SE5FE - SE7FE - FAQ3 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-06T02:13:58.933

( ) 或[`Format-List`](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/format-list)( )在这里应该有所帮助。`fl`[`Format-Table -auto`](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/format-table)`ft -auto`

```
$services | fl 
```

或者

```
$services | ft -auto 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-07-14T15:54:45.167

我遇到了这篇文章并想添加一些信息，因为接受的解决方案没有解决我的问题，我相信其他人可能会发现以下信息有用：

**快速故事**`Microsoft Online Services Module`：使用with运行命令`Powershell`，许多结果被不断检索为截断数据截断并丢失为省略号 (...)。

**解决**方法：正如[Greig 在这篇文章](https://greiginsydney.com/viewing-truncated-powershell-output/)中所解释的，我不可避免地得出结论`$FormatEnumerationLimit=-1`是该问题的无限解决方案。使用`Format-Wide`, `Format-List`, `Format-Table`, `Format-Custom`, `-AutoSize`,`Out-String -Width`等的任何变体都需要大量的额外注意事项/代码。如果您只想查看返回的**所有**数据，而不管列、数组等如何，`$FormatEnumerationLimit=-1`确保您将获得*所有*信息，而无需乱七八糟。

**Greig 的帖子中提到的**其他信息包括：****

 **[PowerShell 快速提示：使用 PowerShell 创建宽表](http://poshoholic.com/2010/11/11/powershell-quick-tip-creating-wide-tables-with-powershell/)，作者在其中解释：

> 如果您有一个包含项目集合的特定属性，如果该集合中的项目数超过分配给内置*$FormatEnumerationLimit*变量的数量，则该属性可能仍会在此处生成的文件中显示省略号。

...并且“将结果传递给`| Format-Table -Property *`[将] 显示所有列。” 但是列中的内容可能仍会被截断（“PowerShell 默认截断表格输出”），并且即使使用`| Format-Table -Property * -AutoSize`也会受到屏幕缓冲区的限制（“自动调整大小的表格受限于屏幕缓冲区的宽度”）。在绝对*$FormatEnumerationLimit=-1*之前提供的解决方案似乎与您需要的任何宽度`| Format-Table -Property * -AutoSize`结合使用。`| Out-String -Width 4096`

[使用格式命令更改输出视图](https://docs.microsoft.com/en-us/powershell/scripting/getting-started/cookbooks/using-format-commands-to-change-output-view?view=powershell-5.1)在`Format cmdlets`: `Format-Wide`、`Format-List`和`Format-Table`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-24T22:27:54.963

在这种情况下，我要做的是创建格式描述，然后将其用作我的 Format-Table 命令的参数。我开发了一个函数 (Get-MaxLength) 来检查具有最长数据的数据字段（有助于在格式描述的末尾使用它）并使用它返回的值设置格式描述中的宽度。您可以在下面的代码中看到计算。注意 Intel(4) 管理引擎接口的 Number 值。还要注意在 Format-Table 命令上使用 -Wrap。可以修改此概念以计算所有字段宽度或仅计算最后一个字段宽度，这只是一个小数学。

```
Function Get-MaxLength {

<#
.SYNOPSIS
   Finds the length of the longest item in collection.

.DESCRIPTION
   Use this Function to get the length of the longest item in a
   collection for use in format strings or other places where
   needed.

.PARAMETER TestObj
    The qualified object to be tested. See example!

.Parameter MinLen
    The minimum length of the item (if using for formatting) which
    should be the Label (title) length. Note if the object item
    being tested does not have a Length property you MUST specify
    the label length!

.OUTPUTS
    Returns a numerical value

.EXAMPLE
   $NameLen = Get-MaxLength -TestObj $DotNet.PSChildName
   $VerLen  = Get-MaxLength -TestObj $DotNet.Version
   $RNLen   = Get-MaxLength -TestObj $DotNet.Release -MinLen 11

     #--- .Net Information ---

 $fmtDotNet =
  @{Expression={$_.PSChildName};Label=".Net Type";Width=$NameLen},
  @{Expression={$_.Version};Label="Version No:";Width=$VerLen},
  @{Expression={$_.Release};Label="Release No:";Width=$RNLen}

  $Dotnet | Format-Table $fmtDotNet
#>

  Param(
    [Parameter(Mandatory=$True)]
     [object] $TestObj,
    [Parameter(Mandatory=$False)]
     [int] $MinLen = 0,
    [Parameter(Mandatory=$False)]
     [int] $MaxLen = 0
  )

   $ErrorActionPreference = "SilentlyContinue"

   foreach ($x in $TestObj) {
     If ($x.Trim().length -gt $MinLen) {
       $MinLen = $x.Trim().length
     }
   }

   If ($MaxLen -ne 0) {
     If ($MinLen -gt $MaxLen) {
       $MinLen = $MaxLen
     }
   }

   $ErrorActionPreference = "Continue"

   Return ,$MinLen

} #End Function -----------  Get-MaxLength  -------------------

  $OstrWidth = 80

  $DriverInfo =
  Get-CimInstance -ClassName 'Win32_PNPSignedDriver'         |
  Where-Object -Property DriverProviderName  -ne "Microsoft" |
  Where-Object -Property DeviceName -ne -Value $Null         |
  Sort-Object  -Property DeviceName -Unique

$DriverCnt = $DriverInfo.Count

  $DVLen =
    Get-MaxLength -TestObj $DriverInfo.DriverVersion -MinLen 14
  $DDLen = $OstrWidth - $DVLen

  $fmtDRVR = @{Label="`nDriver Description";Width=$DDLen;
                                 Expression={$_.DeviceName}},
             @{Label="Version Number";    Width=$DVLen;
                                 Expression={$_.DriverVersion}}

  $DrvTitle = "$($DriverCnt) Non-Windows Unique Drivers and " +
              "Version Numbers:" | Out-String

  $DriverInfo =
    $DriverInfo | Format-Table -Property $fmtDRVR -Wrap |
                  Out-String   -Width $OStrWidth 
```

样本输出：

```
Driver Description                                                 Number
-------------------                                                -------------
Alcor Micro USB 2.0 Card Reader                                    2.0.150.10135
ASMedia USB3.1 eXtensible Host Controller                          1.16.42.1
...
Intel(R) HD Graphics 630                                           21.20.16.4550
Intel(R) Management Engine Interface                               1914.12.0.125
                                                                   6
Intel(R) Ready Mode Technology Device                              1.2.0.0
...
Realtek Audio                                                      6.0.1.8248
Samsung NVMe Controller                                            3.0.0.1802 
```**

# c++ - cygwin(windows) 和 gcc/g++ mac 中的 udp 客户端服务器

> ID：13735280
> 
> 赞同：0
> 
> 时间：2012-12-06T00:58:02.503
> 
> 标签：c++, macos, udp, cygwin, client-server

我是网络初学者。我计划制作客户端服务器 udp，使用 pc（window xp）作为客户端，使用 mac 作为服务器。我已经做了 server.cc、client.cc、net.h 和 makefile 配置。

我使用 cygwin 在窗口中制作文件，使用 g++ 在 mac 中制作。

但是当我在cygwin中制作文件时出现错误：

g++ -c -o server.o server.cc

CC -o udp_server server.o -lsocket -lnsl

/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld：找不到-lsocket

/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld：找不到-lnsl collect2：ld返回1退出状态

在mac中，错误是：

c++ -c -o server.o server.cc

CC -o udp_server server.o -lsocket -lnsl

ld：找不到-lsocket clang的库：错误：链接器命令失败，退出代码为1（使用-v查看调用）

这是我的服务器代码程序：

```
#include "net.h"
#include <iostream> //diilangin .h
using namespace std; //ditambah

const int  kWELL_KNOWN_PORT = 49998;
const char kMESSAGE[]  = "UDP Bye";

int main(){

// our to be server end-point, and client endpoint
   struct sockaddr_in serv_addr;
   struct sockaddr_in cli_addr;
   int cli_sock = 0, retval = 0; 

// need to first ask OS for free socket descriptor
// this will be the listening socket - notr SOCK_DGRAM option now
   cli_sock = socket(AF_INET, SOCK_DGRAM, 0);
   if(cli_sock<0)
  cerr<<"Error when trying to create socket"<<strerror(errno)<<endl;
   else {
  // build an internet socket address structure, defining port.
  memset(&serv_addr, 0, sizeof(serv_addr));
  serv_addr.sin_family      = AF_INET;
  serv_addr.sin_addr.s_addr = htonl(INADDR_ANY); // any of this machines IPs will do
  serv_addr.sin_port        = htons(kWELL_KNOWN_PORT);

  // attempt to bind socket - still need to in UDP
  retval = bind(cli_sock, (struct sockaddr*)&serv_addr, sizeof(serv_addr));
  if(retval < 0)
     cerr<<"Could not bind to port"<<endl<<strerror(errno)<<endl;
  else {
     // forever loop no more accept or listen!!!
     for(;;) {
        char buff[256];

        // get the message and display it
        //int clilen = sizeof(cli_addr); di comment
        socklen_t clilen = (socklen_t)sizeof(cli_addr);
        int len = recvfrom(cli_sock, buff, 256, 0, (struct sockaddr*)&cli_addr, &clilen);
        buff[len] = 0;
        cout<<"GOT "<<buff<<endl;

        // send a reply
        strcpy(buff,kMESSAGE);
        if(sendto(cli_sock, buff, strlen(buff), 0, (struct sockaddr*)&cli_addr, clilen) == -1)
           cerr<<"Error when sending"<<endl<<strerror(errno)<<endl;
     }
      }
   }
   return 0;
} 
```

有人有改进我的程序的建议吗？

丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:49:12.657

cygwin 上没有 -lsocket (libsocket)。您可以尝试添加：

```
#include <sys/socket.h> 
```

...到你的标题？sys/socket.h 是 Cygwin 的标准配置。

我希望这是有帮助的！

# javascript - 带有需要切换 jQuery 的隐藏行的表

> ID：13735283
> 
> 赞同：0
> 
> 时间：2012-12-06T00:58:20.993
> 
> 标签：javascript, jquery, html-table, toggle

我正在构建一个基本的表结构，它将有几个隐藏的行，这些行将在行下填充，并带有触发器来切换它们。我似乎无法让我的切换触发器工作。这些行都将根据我们数据库中的数据量在 C# 中动态创建。因此，我尝试使用基于计数器的触发器来查找附加到触发器链接的行。任何帮助将不胜感激。这是我的代码（PS忽略内联样式，这只是我让触发器工作的基础，并将在字符串变量中正确重建它。）：

```
<table border="0">
    <tr style="background-color:#fff;"><td width="120px" align="left">This is Category</td><td width="370px" align="left">Criteria for achieving element off service quality is listed here. Additional Details click Errors. Criteria for achieving element off service quality is listed here.</td><td width="50px" align="center"><a id="a1" href="#">5</a></td><td width="150px" align="center">Feedback</td><td width="100px" align="center">Contact Id</td></tr>            
        <tr class="rpt28_row1" style="display:none; background-color:#fff;"><td width="120px" align="left">Synopsis:</td><td width="370px" align="left">The contact synopsis is listed here for detail regarding what occured on the call. Contact synopsis listed here.</td><td width="50px" align="center"><img src="Images/category_notachieved_icon.png" alt="" /></td><td width="150px" style="color:#E56A19;" align="center">Comments & Feedback for non achievement displays here. Additions Row can widen to acommodate larger comments.</td><td width="100px" align="center">12121</td></tr>
        <tr class="rpt28_row1"style="display:none; background-color:#F1F5FA;"><td width="120px" align="left">Synopsis:</td><td width="370px" align="left">The contact synopsis is listed here for detail regarding what occured on the call. Contact synopsis listed here.</td><td width="50px" align="center"><img src="Images/category_notachieved_icon.png" alt="" /></td><td width="150px" style="color:#E56A19;" align="center">Comments & Feedback for non achievement displays here. Additions Row can widen to acommodate larger comments.</td><td width="100px" align="center">21354</td></tr>
        <tr class="rpt28_row1" style="display:none; background-color:#fff;"><td width="120px" align="left">Synopsis:</td><td width="370px" align="left">The contact synopsis is listed here for detail regarding what occured on the call. Contact synopsis listed here.</td><td width="50px" align="center"><img src="Images/category_notachieved_icon.png" alt="" /></td><td width="150px" style="color:#E56A19;" align="center">Comments & Feedback for non achievement displays here. Additions Row can widen to acommodate larger comments.</td><td width="100px" align="center">212345</td></tr>
        <tr class="rpt28_row1" style="display:none; background-color:#F1F5FA;"><td width="120px" align="left">Synopsis:</td><td width="370px" align="left">The contact synopsis is listed here for detail regarding what occured on the call. Contact synopsis listed here.</td><td width="50px" align="center"><img src="Images/category_notachieved_icon.png" alt="" /></td><td width="150px" style="color:#E56A19;" align="center">Comments & Feedback for non achievement displays here. Additions Row can widen to acommodate larger comments.</td><td width="100px" align="center">32456</td></tr>
    <tr style="background-color:#F1F5FA;"><td width="120px" align="left">This is Category</td><td width="370px" align="left">Criteria for achieving element off service quality is listed here. Additional Details click Errors. Criteria for achieving element off service quality is listed here.</td><td width="50px" align="center"><a id="a2" href="#">5</a></td><td width="150px" align="center">Feedback</td><td width="100px" align="center">Contact Id</td></tr>
        <tr class="rpt28_row2" style="display:none; background-color:#fff;"><td width="120px" align="left">Synopsis:</td><td width="370px" align="left">The contact synopsis is listed here for detail regarding what occured on the call. Contact synopsis listed here.</td><td width="50px" align="center"><img src="Images/category_notachieved_icon.png" alt="" /></td><td width="150px" style="color:#E56A19;" align="center">Comments & Feedback for non achievement displays here. Additions Row can widen to acommodate larger comments.</td><td width="100px" align="center">12121</td></tr>
        <tr class="rpt28_row2"style="display:none; background-color:#F1F5FA;"><td width="120px" align="left">Synopsis:</td><td width="370px" align="left">The contact synopsis is listed here for detail regarding what occured on the call. Contact synopsis listed here.</td><td width="50px" align="center"><img src="Images/category_notachieved_icon.png" alt="" /></td><td width="150px" style="color:#E56A19;" align="center">Comments & Feedback for non achievement displays here. Additions Row can widen to acommodate larger comments.</td><td width="100px" align="center">21354</td></tr>
        <tr class="rpt28_row2" style="display:none; background-color:#fff;"><td width="120px" align="left">Synopsis:</td><td width="370px" align="left">The contact synopsis is listed here for detail regarding what occured on the call. Contact synopsis listed here.</td><td width="50px" align="center"><img src="Images/category_notachieved_icon.png" alt="" /></td><td width="150px" style="color:#E56A19;" align="center">Comments & Feedback for non achievement displays here. Additions Row can widen to acommodate larger comments.</td><td width="100px" align="center">212345</td></tr>
        <tr class="rpt28_row2" style="display:none; background-color:#F1F5FA;"><td width="120px" align="left">Synopsis:</td><td width="370px" align="left">The contact synopsis is listed here for detail regarding what occured on the call. Contact synopsis listed here.</td><td width="50px" align="center"><img src="Images/category_notachieved_icon.png" alt="" /></td><td width="150px" style="color:#E56A19;" align="center">Comments & Feedback for non achievement displays here. Additions Row can widen to acommodate larger comments.</td><td width="100px" align="center">32456</td></tr>
    <tr style="background-color:#fff;"><td width="120px" align="left">This is Category</td><td width="370px" align="left">Criteria for achieving element off service quality is listed here. Additional Details click Errors. Criteria for achieving element off service quality is listed here.</td><td width="50px" align="center"><a id="a3" href="#">5</a></td><td width="150px" align="center">Feedback</td><td width="100px" align="center">Contact Id</td></tr>
        <tr class="rpt28_row3" style="display:none; background-color:#fff;"><td width="120px" align="left">Synopsis:</td><td width="370px" align="left">The contact synopsis is listed here for detail regarding what occured on the call. Contact synopsis listed here.</td><td width="50px" align="center"><img src="Images/category_notachieved_icon.png" alt="" /></td><td width="150px" style="color:#E56A19;" align="center">Comments & Feedback for non achievement displays here. Additions Row can widen to acommodate larger comments.</td><td width="100px" align="center">12121</td></tr>
        <tr class="rpt28_row3"style="display:none; background-color:#F1F5FA;"><td width="120px" align="left">Synopsis:</td><td width="370px" align="left">The contact synopsis is listed here for detail regarding what occured on the call. Contact synopsis listed here.</td><td width="50px" align="center"><img src="Images/category_notachieved_icon.png" alt="" /></td><td width="150px" style="color:#E56A19;" align="center">Comments & Feedback for non achievement displays here. Additions Row can widen to acommodate larger comments.</td><td width="100px" align="center">21354</td></tr>
        <tr class="rpt28_row3" style="display:none; background-color:#fff;"><td width="120px" align="left">Synopsis:</td><td width="370px" align="left">The contact synopsis is listed here for detail regarding what occured on the call. Contact synopsis listed here.</td><td width="50px" align="center"><img src="Images/category_notachieved_icon.png" alt="" /></td><td width="150px" style="color:#E56A19;" align="center">Comments & Feedback for non achievement displays here. Additions Row can widen to acommodate larger comments.</td><td width="100px" align="center">212345</td></tr>
        <tr class="rpt28_row3" style="display:none; background-color:#F1F5FA;"><td width="120px" align="left">Synopsis:</td><td width="370px" align="left">The contact synopsis is listed here for detail regarding what occured on the call. Contact synopsis listed here.</td><td width="50px" align="center"><img src="Images/category_notachieved_icon.png" alt="" /></td><td width="150px" style="color:#E56A19;" align="center">Comments & Feedback for non achievement displays here. Additions Row can widen to acommodate larger comments.</td><td width="100px" align="center">32456</td></tr>
    <tr style="background-color:#F1F5FA;"><td width="120px" align="left">This is Category</td><td width="370px" align="left">Criteria for achieving element off service quality is listed here. Additional Details click Errors. Criteria for achieving element off service quality is listed here.</td><td width="50px" align="center"><a id="a4" href="#">5</a></td><td width="150px" align="center">Feedback</td><td width="100px" align="center">Contact Id</td></tr>
        <tr class="rpt28_row4" style="display:none; background-color:#fff;"><td width="120px" align="left">Synopsis:</td><td width="370px" align="left">The contact synopsis is listed here for detail regarding what occured on the call. Contact synopsis listed here.</td><td width="50px" align="center"><img src="Images/category_notachieved_icon.png" alt="" /></td><td width="150px" style="color:#E56A19;" align="center">Comments & Feedback for non achievement displays here. Additions Row can widen to acommodate larger comments.</td><td width="100px" align="center">12121</td></tr>
        <tr class="rpt28_row4"style="display:none; background-color:#F1F5FA;"><td width="120px" align="left">Synopsis:</td><td width="370px" align="left">The contact synopsis is listed here for detail regarding what occured on the call. Contact synopsis listed here.</td><td width="50px" align="center"><img src="Images/category_notachieved_icon.png" alt="" /></td><td width="150px" style="color:#E56A19;" align="center">Comments & Feedback for non achievement displays here. Additions Row can widen to acommodate larger comments.</td><td width="100px" align="center">21354</td></tr>
        <tr class="rpt28_row4" style="display:none; background-color:#fff;"><td width="120px" align="left">Synopsis:</td><td width="370px" align="left">The contact synopsis is listed here for detail regarding what occured on the call. Contact synopsis listed here.</td><td width="50px" align="center"><img src="Images/category_notachieved_icon.png" alt="" /></td><td width="150px" style="color:#E56A19;" align="center">Comments & Feedback for non achievement displays here. Additions Row can widen to acommodate larger comments.</td><td width="100px" align="center">212345</td></tr>
        <tr class="rpt28_row4" style="display:none; background-color:#F1F5FA;"><td width="120px" align="left">Synopsis:</td><td width="370px" align="left">The contact synopsis is listed here for detail regarding what occured on the call. Contact synopsis listed here.</td><td width="50px" align="center"><img src="Images/category_notachieved_icon.png" alt="" /></td><td width="150px" style="color:#E56A19;" align="center">Comments & Feedback for non achievement displays here. Additions Row can widen to acommodate larger comments.</td><td width="100px" align="center">32456</td></tr>
    <tr style="background-color:#fff;"><td width="120px" align="left">This is Category</td><td width="370px" align="left">Criteria for achieving element off service quality is listed here. Additional Details click Errors. Criteria for achieving element off service quality is listed here.</td><td width="50px" align="center"><a id="a5" href="#">5</a></td><td width="150px" align="center">Feedback</td><td width="100px" align="center">Contact Id</td></tr>
        <tr class="rpt28_row1" style="display:none; background-color:#fff;"><td width="120px" align="left">Synopsis:</td><td width="370px" align="left">The contact synopsis is listed here for detail regarding what occured on the call. Contact synopsis listed here.</td><td width="50px" align="center"><img src="Images/category_notachieved_icon.png" alt="" /></td><td width="150px" style="color:#E56A19;" align="center">Comments & Feedback for non achievement displays here. Additions Row can widen to acommodate larger comments.</td><td width="100px" align="center">12121</td></tr>
        <tr class="rpt28_row1"style="display:none; background-color:#F1F5FA;"><td width="120px" align="left">Synopsis:</td><td width="370px" align="left">The contact synopsis is listed here for detail regarding what occured on the call. Contact synopsis listed here.</td><td width="50px" align="center"><img src="Images/category_notachieved_icon.png" alt="" /></td><td width="150px" style="color:#E56A19;" align="center">Comments & Feedback for non achievement displays here. Additions Row can widen to acommodate larger comments.</td><td width="100px" align="center">21354</td></tr>
        <tr class="rpt28_row1" style="display:none; background-color:#fff;"><td width="120px" align="left">Synopsis:</td><td width="370px" align="left">The contact synopsis is listed here for detail regarding what occured on the call. Contact synopsis listed here.</td><td width="50px" align="center"><img src="Images/category_notachieved_icon.png" alt="" /></td><td width="150px" style="color:#E56A19;" align="center">Comments & Feedback for non achievement displays here. Additions Row can widen to acommodate larger comments.</td><td width="100px" align="center">212345</td></tr>
        <tr class="rpt28_row1" style="display:none; background-color:#F1F5FA;"><td width="120px" align="left">Synopsis:</td><td width="370px" align="left">The contact synopsis is listed here for detail regarding what occured on the call. Contact synopsis listed here.</td><td width="50px" align="center"><img src="Images/category_notachieved_icon.png" alt="" /></td><td width="150px" style="color:#E56A19;" align="center">Comments & Feedback for non achievement displays here. Additions Row can widen to acommodate larger comments.</td><td width="100px" align="center">32456</td></tr>
</table>

 $(document).ready(function(){
    function assignClickHandlerFor(boxNum) {

            console.log('#a' + boxNum);
            $('#a' + boxNum).click(function (evt) {
                evt.preventDefault();
                evt.stopPropagation();

                var $aRow = $(evt.currentTarget); 

                $aRow.find('.rpt28_row' + boxNum).toggle();                  
            });
        }

        var i;

        for (i = 1; i <= 5; i++) {
            assignClickHandlerFor(i);
        }        
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:17:05.547

将您的 javascript 更改为：

```
 $(document).ready(function(){
    function assignClickHandlerFor(boxNum) {

            console.log('#a' + boxNum);
            $('#a' + boxNum).click(function (evt) {
                evt.preventDefault();
                evt.stopPropagation();

                $('table').find('.rpt28_row' + boxNum).toggle();                  
            });
        }

        var i;

        for (i = 1; i <= 5; i++) {
            assignClickHandlerFor(i);
        }        
 });​ 
```

问题是您正在检查链接的祖先。需要改为检查表的祖先。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T01:16:17.030

问题出在这一行：

```
var $aRow = $(evt.currentTarget); 
```

$aRow 找不到 $('.rpt28_row' + boxNum) 元素的任何父级。所以在dom中找不到$aRow.find('.rpt28_row' + boxNum)。

只需将该行更改为：

```
var $aRow = $(this).parents('table') 
```

它会起作用

[演示](http://jsfiddle.net/ykXYu/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T01:47:48.777

我相信你使用的是 jquery。如果是这样试试这个代码片段，这会做到

```
$('#a' + boxNum).click(function () {
   $('.rpt28_row' + boxNum).toggle()
} 
```

当您的文件准备好时调用它。

# c - 我正在尝试用 C 语言编写一个程序以将 DS1302 RTC 与 PIC16F877a 一起使用

> ID：13735291
> 
> 赞同：1
> 
> 时间：2012-12-06T00:59:37.377
> 
> 标签：c, pic, real-time-clock

所以我目前正在尝试读取和写入 RTC 的时间，而这些方法将不起作用。

这就是我所拥有的：所以它发送地址字节以确定它想从哪里读取，然后将引脚翻转到输入并读取每个位，直到字节完成。

```
 char ReadByte(char ByteToRead)
 {
    RB0 = 0; // ensure CLK low
    RB5 = 1;
    char received = 0;
    int i;

    for(i =0;i < 8 ;i++)
    {   
        RB4 = ByteToRead & 1;
        RB0 = 0;
        ByteToRead >>= 1;       
        RB0 = 1;

    }
    TRISB4 = 1;//B4 = input port

    for(i =0;i < 8 ;i++)
    {
        received |= RB4;
        RB0 = 1;
        received <<= 1;
        RB0 = 0;
    }

    RB5=0;

    TRISB4 = 0;

    return DecimalToBCD(received);
} 
```

第二个示例是我的 write 方法：

```
void WriteByte(char ClockReg ,char data)

{
    RB0 = 0; // ensure CLK low
    RB5 = 1; // raises RST bit
    int i;
    for(i =0;i < 8 ;i++)
    {   
        RB4 = ClockReg & 1;
        RB0 = 0;
        ClockReg >>= 1;     
        RB0 = 1;
    } 

    for(i =0;i < 8 ;i++)
    {   

        RB4 = data & 1;
        RB0 = 0;
        data >>= 1;     
        RB0 = 1;

    }
    RB5 = 0;
    __delay_us(1);
    RB5 = 1;
} 
```

这对于第一位确定寄存器写入您给它的值是相同的。

我可以在网上找到的唯一帮助是链接到一个 2 岁的页面，其中没有代码或帮助只是要求被 PMed 的人。所以请如果你能帮忙

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:34:11.570

被证实！

我相信这是因为我还没有为未来的读者禁用写保护位，时钟停止标志 (CH) 将被清除而不设置。

希望这可以帮助任何寻找它的人丹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:04:56.323

在你处理 WriteByte 之前，我会处理 ReadByte 方法，因为这样你就可以通过读回它来验证写入。因此，查看 ReadByte 例程，我可以很快发现一个问题。

DS1302 的数据表说“数据位在时钟的下降沿输出”，但在您的 ReadByte 例程中，读取 RB4 上的输入，然后将时钟设置为低电平。另外“请注意，要传输的第一个数据位发生在写入命令字节的最后一位之后的第一个下降沿。” 但是您第一次通过循环时，您在第一个下降沿之前读取 RB4。

# java - 使用正则表达式将字符串中的序列替换为修改后的字符

> ID：13735292
> 
> 赞同：4
> 
> 时间：2012-12-06T00:59:42.587
> 
> 标签：java, regex, string, replace

我正在尝试使用正则表达式解决[编码蝙蝠](http://codingbat.com/prob/p158175)问题，无论它是否适用于网站。

到目前为止，我有以下代码，它没有`*`在两个连续的相等字符之间添加 a。相反，它只是推倒它们并用一组字符串替换它们。

```
public String pairStar(String str) {
    Pattern pattern = Pattern.compile("([a-z])\\1", Pattern.CASE_INSENSITIVE);
    Matcher matcher = pattern.matcher(str);
    if(matcher.find())
    matcher.replaceAll(str);//this is where I don't know what to do
    return str;
} 
```

我想知道如何继续使用正则表达式并替换整个字符串。如果需要，我认为递归系统可以提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:22:32.360

这有效：

```
while(str.matches(".*(.)\\1.*")) {
    str = str.replaceAll("(.)\\1", "$1*$1");
}
return str; 
```

### 正则表达式的解释：

搜索正则表达式`(.)\\1`：

*   `(.)`表示“任何字符”（的`.`）和括号创建一个组 - 组 1（第一个左括号）
*   `\\1`，在正则表达式中是`\1`（java文字`String`必须用另一个反斜杠转义反斜杠）表示“第一组” - 这种术语称为“反向引用”

所以一起`(.)\1`意味着“任何重复的字符”

替换正则表达式`$1*$1`：

*   该`$1`术语的意思是“作为第 1 组捕获的内容”

### 递归解决方案：

从技术上讲，该站点要求的解决方案是*递归*解决方案，因此这里是递归实现：

```
public String pairStar(String str) {
    if (!str.matches(".*(.)\\1.*")) return str;
    return pairStar(str.replaceAll("(.)\\1", "$1*$1"));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T01:13:58.097

我不知道java，但我相信java中的字符串或正则表达式有替换函数。您的匹配字符串将是

```
([a-z])\\1 
```

而替换字符串将是

```
$1*$1 
```

经过一番搜索，我认为您正在寻找这个，

```
str.replaceAll("([a-z])\\1", "$1*$1").replaceAll("([a-z])\\1", "$1*$1"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T18:42:26.323

FWIW，这是一个非递归解决方案：

```
public String pairStar(String str) {
  int len = str.length();
  StringBuilder sb = new StringBuilder(len*2);
  char last = '\0';
  for (int i=0; i < len; ++i) {
    char c = str.charAt(i);
    if (c == last) sb.append('*');
    sb.append(c);
    last = c;
  }
  return sb.toString();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-08T20:04:03.510

这是我自己的解决方案。

**递归解决方案**（可能或多或少是问题设计的解决方案）

```
public String pairStar(String str) {
    if (str.length() <= 1) return str;
    else return str.charAt(0) +
                (str.charAt(0) == str.charAt(1) ? "*" : "") +
                pairStar(str.substring(1));
} 
```

如果您想抱怨`substring`，那么您可以编写一个辅助函数`pairStar(String str, int index)`来执行实际的递归工作。

**正则表达式单行一函数调用解决方案**

```
public String pairStar(String str) {
  return str.replaceAll("(.)(?=\\1)", "$1*");
} 
```

两种解决方案具有相同的精神。他们都检查当前字符是否与下一个字符相同。如果它们相同，则`*`在 2 个相同的字符之间插入 a。然后我们继续检查下一个字符。`a*a*a*a`这是从 input产生预期的输出`aaaa`。

的正常正则表达式解决方案`"(.)\\1"`有一个问题：每次匹配消耗 2 个字符。结果，我们无法比较第二个字符之后的字符是否是同一个字符。前瞻用于解决这个问题——它将与下一个字符进行比较而不消耗它。

这类似于递归解决方案，我们比较下一个字符`str.charAt(0) == str.charAt(1)`，同时在子字符串上递归调用函数，只删除当前字符`pairStar(str.substring(1)`。

# ios - 即使使用 kAudioSessionCategory_MediaPlayback，应用程序声音也不会在铃声关闭时发声

> ID：13735294
> 
> 赞同：0
> 
> 时间：2012-12-06T01:00:15.063
> 
> 标签：ios, xcode, ios5, audio

我正在制作一个音板应用程序，一切正常，但我有一个问题，如果铃声关闭，声音就不会播放。

我试过这个：

```
[super viewDidLoad];
[[AVAudioSession sharedInstance] setDelegate: self];
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error: nil]; 
```

我正在使用 AVFoundation 框架

播放按钮的代码是这样的：

```
- (IBAction)queChin:(id)sender {
CFBundleRef mainBundle = CFBundleGetMainBundle();
CFURLRef soundFileURLRef;
soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"chin", CFSTR ("m4a"), NULL);
UInt32 soundID;
AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
AudioServicesPlaySystemSound(soundID);
} 
```

我已经搜索了这个主题，但我找不到任何有效的答案。也许我错过了什么？

作为替代方案，我可以向用户发出警报，说“嘿，打开你的铃声”，但我不知道如何检测手机是否静音。

有什么提示吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:06:48.940

好吧，我发现，即使您使用以下方法初始化音频会话，也无法使用 AudioServicesPlaySystemSound 播放系统声音：

```
[[AVAudioSession sharedInstance] setDelegate: self];
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error: nil]; 
```

如果用户将设备静音，系统声音将保持静音。

我最终使用了 AVAudioPlayer 并解决了这个问题。

使用系统声音的旧代码：

```
- (IBAction)queChin:(id)sender {
CFBundleRef mainBundle = CFBundleGetMainBundle();
CFURLRef soundFileURLRef;
soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"chin", CFSTR ("m4a"), NULL);
UInt32 soundID;
AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
CFRelease(soundFileURLRef);//prevents memory leak
AudioServicesPlaySystemSound(soundID);
} 
```

使用 AVAudioPlayer 的新代码：

```
- (IBAction)queChin:(id)sender {

NSURL *url = [[NSBundle mainBundle] URLForResource:@"chin" withExtension:@"wav"];
_chingosound = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:NULL];
_chingosound.delegate = self;
[_chingosound prepareToPlay];
[_chingosound play];
} 
```

您必须初始化音频会话才能在铃声关闭的情况下播放声音。

# php - 使用 JSON 解析器时出现错误的错误代码

> ID：13735296
> 
> 赞同：1
> 
> 时间：2012-12-06T01:00:33.170
> 
> 标签：php

我在我的 .php 脚本中找不到错误。

我使用一个发送帖子请求的 android 应用程序来注册用户，包括唯一的设备 ID 和电子邮件。

发送数据时，我的 api 检查电子邮件或设备 ID 是否已存在，因此您无法注册两次。

第一次注册时，一切正常。当我尝试使用相同的电子邮件再次注册时，它也可以正常工作（得到正确的错误）。但是，如果我使用不同的电子邮件（但设备 ID 相同），我会收到错误的错误代码。

这是PHP代码：

```
else if ($tag == 'register') {
    // Request type is Register new user
    $name = $_POST['name'];
    $email = $_POST['email'];
    $password = $_POST['password'];
    $devid = $_POST['devid'];

    // check if user already exists
    if ($db->CheckUser($email)) {
        // user already exists
        $response["error"] = 2;
        $response["error_msg"] = "User already exists";
        echo json_encode($response);}

    else if ($db->CheckDevice($devid)) {
            // Device already exists
            $response["error"] = 3;
            $response["error_msg"] = "Device already exists";
            echo json_encode($response);}
    else {
        // store user
        $user = $db->storeUser($name, $email, $password, $devid);
        if ($user) {
            // user stored successfully
            $response["success"] = 1;
            $response["uid"] = $user["unique_id"];
            $response["user"]["name"] = $user["name"];
            $response["user"]["email"] = $user["email"];
            $response["user"]["devid"] = $user["devid"];
            $response["user"]["created_at"] = $user["created_at"];
            $response["user"]["updated_at"] = $user["updated_at"];
            echo json_encode($response);} 
        else {
           // user failed to store
           $response["error"] = 1;
           $response["error_msg"] = "Error occured in Registration";
           echo json_encode($response);}
    }
} 
```

检查功能：

```
public function CheckUser($email) {
    $result = mysql_query("SELECT email from users WHERE email = '$email'");
    $no_of_rows = mysql_num_rows($result);
    if ($no_of_rows > 0) {
        // user existed 
        return true;} 
    else {
        // user not existed
        return false;}
}

public function CheckDevice($devid) {
    $result = mysql_query("SELECT devid from users WHERE devid = '$devid'");
    $no_of_rows = mysql_num_rows($result);
    if ($no_of_rows > 0) {
        // user existed 
        return true;
    } else {
        // user not existed
        return false;
    }
} 
```

存储功能：

```
public function storeUser($name, $email, $password, $devid) {
    $uuid = uniqid('', true);
    $hash = $this->hashSSHA($password);
    $encrypted_password = $hash["encrypted"]; // encrypted password
    $salt = $hash["salt"]; // salt
    $result = mysql_query("INSERT INTO users(unique_id, name, email, encrypted_password, salt, devid, created_at) VALUES('$uuid', '$name', '$email', '$encrypted_password', '$salt', '$devid', NOW())");
    // check for successful store
    if ($result) {
        // get user details 
        $uid = mysql_insert_id(); // last inserted id
        $result = mysql_query("SELECT * FROM users WHERE uid = $uid");
        // return user details
        return mysql_fetch_array($result);
    } else {
        return false;
    }
} 
```

我正在发送

我应该得到这个错误：

```
$response["error"] = 3;
        $response["error_msg"] = "Device already exists"; 
```

但我得到了这个：

```
$response["error"] = 1;
           $response["error_msg"] = "Error occured in Registration"; 
```

不知何故，在调用`CheckDevice`函数时它似乎返回了，`false`尽管当我`SELECT devid from users WHERE devid = '$devid'`在 phpMyAdmin 中手动使用时，我得到了一个`true`.

然后他无法存储，因为设备 ID 必须是唯一的并且给了我错误（这是唯一合理的解释）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:15:36.370

您应该`echo $devid`在您的 CheckDevice 方法中执行一些操作，以查看您的 android 设备是否真的发送相同的 id。

也许您在某处遇到错误（当您尝试从同一设备 ID 注册为第二个用户时，您可能没有发送任何内容）。

我认为这是您的问题（您的 android 应用程序）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:29:56.280

我发现了我的错误！

设备 ID 长度为 15 个字符，表长度为 13。

谢谢你的帮助，我现在感觉自己像个白痴：）

# java - Java StringBuilder - 附加字符

> ID：13735311
> 
> 赞同：0
> 
> 时间：2012-12-06T01:02:19.467
> 
> 标签：java, netbeans, append, stringbuilder

我有一个hangmanframe、welcomeframe 和一个大型机，当你赢得一个hangman 游戏时，我想在大型机上附加星号(*)

刽子手框架：

```
public void win(){
    JOptionPane.showMessageDialog(null, "Congrats! The word was " + GuessWord);
    MainFrame.totalStars.append("*");
    MainFrame.totalLabel.setText(MainFrame.stars);
    setVisible(false);
    MainFrame.hangmanButton.setEnabled(false);
    MainFrame.returnMain();
} 
```

主机：

```
 public static final StringBuilder totalStars = new StringBuilder();
    public static String stars = totalStars.toString();

    public static void returnMain(){
            totalStars.append("* ");
            totalLabel.setText(stars);
            WelcomeFrame.playButton.doClick();
    } 
```

欢迎框架：

```
 private void playButtonActionPerformed(java.awt.event.ActionEvent evt) {
    String userName = nameText.getText();

    // Open MainFrame
    MainFrame MFrame = new MainFrame();
    MFrame.setVisible(true);
    setVisible(false);
    MainFrame.welcomeLabel.setText("Welcome " + userName + "!");
    MainFrame.totalStars.append("* ");
    MainFrame.totalStarsLabel.setText(MainFrame.stars);
    } 
```

我有一个标签 (totalLabel)，我想在其中添加星号 (*)。但是当该方法在 HangmanFrame 中运行时，它会转到 PlayFrame 但不会添加任何星号。

谁能看到我做错了什么？

**解决了：**

将方法名称更改为 returnMain()

用“totalStars.toString()”更改了所有“stars”实例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:04:44.263

首先，您的程序将无法编译，因为`public static void return() {...`，我想您应该知道这`return`是 Java 中的*保留字*。

其次，You make`public static String stars = totalStars.toString();`是可以的，但这并不意味着它`stars`总是包含所`totalString`拥有的东西。这只是瞬间的。

你绝对应该使用`totalLabel.setText(totalStars.toString());`

# javascript - 为下拉菜单实现 hoverIntent（来自 click_event）

> ID：13735312
> 
> 赞同：0
> 
> 时间：2012-12-06T01:02:23.163
> 
> 标签：javascript, html, jquery, jquery-events

该帖子已从该主题中删除

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:20:47.177

只需尝试在悬停时使用延迟。

```
 $('#user_settings_dropdown').dealy(1000).animate({height:['toggle', 'swing']
        }, 225); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:02:45.133

在这种情况下，我发现最好的选择是将菜单触发器和菜单主体封装在一个包装器中，然后对其应用 hoverIntent。当您的菜单被隐藏时，包装器是触发元素的大小。显示菜单时，包装也将包括所有可见菜单，允许用户单击菜单中的任何位置。

这是一个基于您的代码的精简示例：http: [//jsfiddle.net/irobinson/HeDSR/2/](http://jsfiddle.net/irobinson/HeDSR/2/)

html

```
<div id="menu-wrap">
<a href="#" class="user_profile_btn" title="Your profile page">
    <div class="arrow_down">Down arrow</div>
</a>
<ul id="user_settings_dropdown">
    <li><a href="#"><div>View profile</div></a></li>
      <div class="grey_line"></div>
      <li class="settings_list_item">Item a</li>
      <li class="settings_list_item">Item b</li>
      <li class="settings_list_item">Item c</li>
    </ul>
  </li>
</div>​ 
```

javascript

```
$('#menu-wrap').hoverIntent(function () {
    $('#user_settings_dropdown').show();
},
function () {
    $('#user_settings_dropdown').hide();
});​ 
```

css

```
#user_settings_dropdown{display:none;}
#menu-wrap{width:100px;}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T19:56:09.743

该帖子已从该主题中删除

# javascript - javascript按钮不适用于bottle.py

> ID：13735313
> 
> 赞同：0
> 
> 时间：2012-12-06T01:02:33.403
> 
> 标签：javascript, python, bottle

学习使用[Bottle.py](http://bottlepy.org)并制作了一个带有按钮的页面：

```
<!DOCTYPE html>
<html>
    <head><title>button</title></head>
    <body>
        <script>function test(){ 
        console.log("a");
        document.getElementById("b").innerHTML = "abcd"; 
        return false;}</script>
        <form onsubmit="return test()">
            <button type="submit">Button</button>
        </form>
        <div id="b"></div>
    </body>
</html> 
```

当我按下按钮时，~~javascript 控制台上没有打印任何内容~~div 元素不会填充文本。

```
from bottle import route, template, run

@route('/button')
def b():
    return template('button') 
```

这（显然）是我的应用程序中实际发生的事情的缩小版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:11:33.610

正如@Blender 所说，您的 javascript 和 html 代码完全有效，您是否通过查看 http 响应提供的实际源来检查您是否有有效的代码？

# c++ - 为什么硬编码的字符串常量是左值？

> ID：13735317
> 
> 赞同：2
> 
> 时间：2012-12-06T01:03:33.890
> 
> 标签：c++, string-literals, lvalue, rvalue

> **可能重复：**
> [为什么字符串文字是左值，而所有其他文字都是右值？](https://stackoverflow.com/questions/10004511/why-are-string-literals-l-value-while-all-other-literals-are-r-value)

在[什么是移动语义？](https://stackoverflow.com/questions/3106110/can-someone-please-explain-move-semantics-to-me/11540204#11540204)出现以下代码片段和注释：

```
void some_function(std::string&& r);

some_function("hello world"); 
```

评论：

> 在上面的例子中，“hello world”是一个 const char[12] 类型的左值。

为什么硬编码常量`"hello world"`是 const char[12] 类型的左值，而不是 const char[12] 类型的*右值*？

# android - Android Tile Bitmap 和 9path

> ID：13735318
> 
> 赞同：0
> 
> 时间：2012-12-06T01:03:35.120
> 
> 标签：android, bitmap, nine-patch

这里有很好的解决方案[https://stackoverflow.com/a/4575738/876077](https://stackoverflow.com/a/4575738/876077)，但它不适用于 9path。如何通过 X 设置平铺模式并垂直拉伸*bitmap.9.png*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:16:14.967

9 补丁目前不支持平铺。它们只是用来拉伸的。

# jquery - 选择了 jQuery make 选项 - CodeIgniter

> ID：13735319
> 
> 赞同：1
> 
> 时间：2012-12-06T01:03:51.227
> 
> 标签：jquery, codeigniter

使用 codeigniter 生成表单。表单有一个 form_dropdown()

```
 <div class="control-group">
      <?php 
        foreach ($clients as $client => $clientValue) {
           $option[$clientValue['clientName']] = $clientValue['clientName'];
        }
        echo form_label('Client Name:', 'client');
        echo form_dropdown('client', $option);
      ?>
</div><!-- /control-group --> 
```

**输出**

```
<select name="client">
<option value="Mike">Mike </option>
<option value="Sissel Bygton">Sissel Bygton</option>
<option value="Calli Crass">Calli Crass</option>
</select> 
```

**Javascript/jQuery**

```
var clientName = json.selected_gallery[0].clientName; //clientName retrieved from DB

//alert box to confirm clientName for this example lets say it's Mike
alert(clientName)//output Mike

//Client Select name
$('select.client').val(clientName); 
```

从我通过其他问答收集到的信息来看，我认为我的 jQuery 可以解决问题。我是不是遗漏了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T01:07:09.530

```
<select name="client"> 
```

选择器应该是

```
$('select[name="client"]').val(clientName); 
```

如果您想使用类访问它，那么

```
<select class="client"> 
```

上面的选择器是

```
$('select.client').val(clientName); 
```

# ruby - 如何让 Capistrano 任务在服务器上而不是在本地运行？

> ID：13735324
> 
> 赞同：0
> 
> 时间：2012-12-06T01:04:26.647
> 
> 标签：ruby, shell, ssh, capistrano

我想从目录中提取最后修改的文件。这个 capistrano 任务在本地工作得很好，但是我如何让它在服务器上运行，以便我可以提取服务器数据？

```
namespace :pull do
  desc "Hello Pull data from the server"
  task :hello, roles: :db do
    ## Want this to return what's on the server. Not locally.
    puts "Getting filename of last created database backup"
    db_backups_directory_path = "/home/deployer/backups"
    last_db_backup_archived = Dir.glob(File.join(db_backups_directory_path, '*')).
                              select  {|f| File.file? f }.
                              sort_by {|f| File.mtime f }.
                              last
    puts last_db_backup_archived
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:15:40.383

我只是去`run`。Capistrano在一堆服务器上并行执行*命令，因此您必须将您的 ruby​​ 转换为 shell 代码。*值得庆幸的是，在您的情况下，它或多或少是一个简单的翻译。

```
task :hello, roles: :db do
  ## Want this to return what's on the server. Not locally.
  puts "Getting filename of last created database backup"
  db_backups_directory_path = "/home/deployer/backups"
  run <<-CMD
     find #{db_backups_directory_path} -type f -printf '%A@ %p\n'|
     sort -n | tail -n1 | cut -d" "  -f2
  CMD
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T16:32:06.883

该`capture`命令还将在远程服务器上运行。除了远程运行命令外，它还可以将命令的标准输出写入 ruby​​ 变量。因此，您可以使用 ruby​​ 方法对其进行操作，然后使用

```
some_variable = capture ("pwd")
capture ("cd #{some_variable}/.. && ls -alh") 
```

这不是最好的例子，但你明白了。第二个`capture`显然不是必需的，你可以用它代替它，`run`它不会有什么不同。

但是，您应该知道，如果您对多个服务器运行此任务，这将不起作用。

从文档中：

> 在当前任务所针对的第一台服务器上执行给定的命令，将其标准输出收集到一个字符串中，然后返回该字符串。该命令通过#invoke_command 调用。
> 
> [http://rdoc.info/github/capistrano/capistrano/Capistrano/Configuration/Actions/Inspect#capture-instance_method](http://rdoc.info/github/capistrano/capistrano/Capistrano/Configuration/Actions/Inspect#capture-instance_method)

# objective-c - 自定义表格视图单元格中的 Dealloc 方法

> ID：13735327
> 
> 赞同：0
> 
> 时间：2012-12-06T01:04:41.630
> 
> 标签：objective-c, ios5, uitableview, xcode4.5

我已经为 TableView 创建了一个自定义 TableViewCell，但是如果有一个 dealloc 方法（在自定义单元类中），应用程序就会崩溃。请参阅以下用于表格单元类的代码：

```
#import <UIKit/UIKit.h>

@interface CustomTableCell : UITableViewCell {

    UILabel *nameLabel_;
    UILabel *dateLabel_;

}

@property (nonatomic, retain) IBOutlet UILabel *nameLabel;
@property (nonatomic, retain) IBOutlet UILabel *dateLabel;

@end

#import "CustomTableCell.h"

@implementation CustomTableCell

@synthesize nameLabel = nameLabel_;
@synthesize dateLabel = dateLabel_;

- (void) dealloc {

    [self.nameLabel release];
    self.nameLabel = nil;
    [self.dateLabel release];
    self.dateLabel = nil;

    [super dealloc];
}

@end 
```

创建自定义单元格的代码（cellForRowAtIndexPath）：

```
UITableViewCell *Cell = [tableView dequeueReusableCellWithIdentifier:@"DemoCell"];

if (Cell == nil){

    NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomTableCell" owner:nil options:nil];

    for(id currentObject in topLevelObjects)
    {
        if([currentObject isKindOfClass:[CustomTableCell class]])
        {
            Cell = (CustomTableCell *)currentObject;
            break;
        }
    }
} 
```

如果我从自定义单元格中删除 dealloc 方法，一切正常。否则我会得到一个异常（当我滚动表格视图时）：**-[CALayer release]: 消息发送到释放实例 0x6fbc590* **

 *我们不需要customTableViewCell 中的dealloc 方法吗？请帮助我找到解决此问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:18:19.683

从表面上看，您正在`-dealloc`错误地编写方法。这样做：

```
- (void) dealloc {

    [nameLabel_ release];
    nameLabel_ = nil;
    [dateLabel_ release];
    dateLabel_ = nil;

    [super dealloc];
} 
```

你不应该在你的`-dealloc`方法中使用你的访问器；直接使用您的 ivars。*

# c# - 查找只知道扩展名的文件名

> ID：13735328
> 
> 赞同：0
> 
> 时间：2012-12-06T01:04:41.957
> 
> 标签：c#, file, console

我正在尝试验证 ac# 控制台程序中是否存在文件。唯一的问题是文件可以有任何名称。

我唯一知道的是文件扩展名，这个扩展名只能有一个文件。如何验证它是否存在，然后使用它的名称是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T01:34:31.740

using 的问题`Directory.GetFiles()`是首先遍历整个文件系统，然后将所有匹配项作为数组返回。**即使**检查的第一个文件是唯一的匹配项，它仍然会从指定的根目录遍历整个文件系统，然后再返回一个匹配项。

相反，使用`EnumerateFiles()`做一个懒惰的行走，在遇到第一个匹配时停止，因此：

```
DirectoryInfo root        = new DirectoryInfo( @"C:\" ) ;
string        pattern     = "*.DesiredFileExtension" ;
FileInfo      desiredFile = root.EnumerateFiles( pattern , SearchOption.AllDirectories )
                                .First()
                                ; 
```

如果找不到文件，它将抛出异常。用于`FirstOrDefault()`获取`null`值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T01:10:52.763

尝试[Directory.GetFiles](http://msdn.microsoft.com/en-us/library/vstudio/system.io.directory.getfiles%28v=vs.100%29.aspx)静态方法：

```
var fileMatches = Directory.GetFiles("folder to start search in", "*.exe", SearchOption.AllDirectories);
if (fileMatches.Length == 1)
{
    //my file was found
    //fileMatches[0] contains the path to my file
} 
```

请注意，使用 SearchOption 枚举，您可以仅指定当前文件夹或递归搜索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T01:12:33.007

这样的事情可能会奏效

```
if (Directory.GetFiles(path, "*.ext").Any())
{
   var file = Directory.GetFiles(path, ".ext").First();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T01:14:58.837

```
 string extension = "txt";
  string dir = @"C:\";

  var file = Directory.GetFiles(dir, "*." + extension).FirstOrDefault();

  if (file != null)
  {
    Console.WriteLine(file);
  } 
```

如果文件不直接存在于 'dir' 下，则需要使用 SearchOption.AllDirectories for Directory.GetFiles

# android - Android：自动拍摄不同曝光的照片

> ID：13735330
> 
> 赞同：3
> 
> 时间：2012-12-06T01:04:46.893
> 
> 标签：android, android-camera

我对 android SDK 很陌生，我想知道按照标题中的要求做是多么容易，我想编写一个应用程序，它使用默认的相机应用程序来拍摄不同曝光的照片（所以只需一个按钮用户将拍摄 5 张照片（曝光：-4、-2、0、+2、+4））

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:18:44.930

为了设置曝光补偿，您需要能够获取[`Camera`](http://developer.android.com/guide/topics/media/camera.html)对象以获取参数，然后调用该[`setExposureCompensation(int)`](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setExposureCompensation%28int%29)方法。然而，这不可能通过简单地使用默认的相机应用程序（[这里](http://developer.android.com/guide/topics/media/camera.html#intent-image)通过使用意图显示）来实现。

为了实现这个目标，您需要[构建一个自定义相机应用程序](http://developer.android.com/guide/topics/media/camera.html#custom-camera)，这不是一项小任务。如果您准备好骑行，这会很有趣！

# python - 与烧杯的 Bottle.py 会话

> ID：13735333
> 
> 赞同：5
> 
> 时间：2012-12-06T01:05:40.130
> 
> 标签：python, bottle, beaker

第一次在这里提问。

我目前正在努力研究如何使用 Bottle 微框架正确使用 Beaker。这是有问题的程序：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
# filename: server.py

import bottle as app
from beaker.middleware import SessionMiddleware

session_options = {
    'session.type': 'file',
    'session.data_dir': './session/',
    'session.auto': True,
}
app_middlware = SessionMiddleware(app.app(), session_options)
app_session = app.request.environ.get('beaker.session')

@app.route('/login')
def login():
    app_session = app.request.environ.get('beaker.session')
    app_session['logged_in'] = True

@app.route('/logout')
def logout():
    app_session = app.request.environ.get('beaker.session')
    if app_session.get('logged_in'):
        app_session['logged_in'] = False
        return 'You are logged out'
    app.redirect('/login')

@app.route('/dashboard')
def dashboard():
    app_session = app.request.environ.get('beaker.session')
    if app_session.get('logged_in'):
        return 'You are logged in'
    app.redirect('/login')

app.debug(True)
app.run(app=app_middlware, reloader=True) 
```

如果你注意到了，我会继续调用`app_session = app.request.environ.get('beaker.session')`每个`def`块，这样它就不会返回如下错误：`TypeError: 'NoneType' object does not support item assignment`--- Python 似乎无法识别其函数之外的变量（如果我错了，请纠正我）。

以下是问题：

1.  我应该怎么做才能只有一个实例，`app_session = app.request.environ.get('beaker.session')`以便每个`def`块都可以使用它（我真的需要一个实例，因为它是要检查和使用的同一个会话）。
2.  如果这是唯一的方法（虽然它很难看），那么我是否应该将所有需要会话的路由组合起来，这样我才能实现的单个实例`app_session`？

就像是：

```
@app.route('/<path:re:(login|dashboard|logout)\/?>')
def url(path):
    app_session = app.request.environ.get('beaker.session')
    if 'login' in path:
        app_session['logged_in'] = True
    elif 'logout' in path:
        if app_session.get('logged_in'):
            # app_session.delete() it doesn't seem to work?
            app_session['logged_in'] = False
            return 'You are logged out'
        app.redirect('/login')
    elif 'dashboard' in path:
        if app_session.get('logged_in'):
            return 'You are logged in'
        app.redirect('/login') 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-06T01:35:09.577

`beaker`在您的应用程序中使用`bottle`很容易。首先，设置您的 Bottle 应用程序：

```
import bottle
from bottle import request, route, hook
import beaker.middleware

session_opts = {
    'session.type': 'file',
    'session.data_dir': './session/',
    'session.auto': True,
}

app = beaker.middleware.SessionMiddleware(bottle.app(), session_opts) 
```

后来：

```
bottle.run(app=app) 
```

有了这个，每次您收到请求时，您的 Beaker 会话都将以 `request.environ['beaker_session']`. 为了方便起见，我通常会这样做：

```
@hook('before_request')
def setup_request():
    request.session = request.environ['beaker.session'] 
```

这安排`setup_request`在处理任何请求之前运行；我们正在使用`bottle.request`变量（参见前面的 import 语句），它是一个线程局部变量，包含有关当前请求的信息。从现在开始，我可以在`request.session`需要时参考，例如：

```
@route('/')
def index():
    if 'something' in request.session:
       return 'It worked!'

    request.session['something'] = 1 
```

# list - 标准 Haskell 函数 :: (a -> Maybe a) -> a -> [a]

> ID：13735336
> 
> 赞同：3
> 
> 时间：2012-12-06T01:05:50.357
> 
> 标签：list, haskell, maybe

我定义了一个函数

```
maybeToList :: (a -> Maybe a) -> a -> [a]
maybeToList f x = x : maybe [] (maybeToList f) (f x) 
```

这个功能看起来很明显，我不敢相信它不是标准的。它是否在某个模块中定义（我已经检查过 Data.Maybe）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T01:16:21.953

您的函数不在标准库中，因为它是以下函数的一种特殊[形式](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#v:unfoldr)：

```
unfoldr      :: (b -> Maybe (a, b)) -> b -> [a]
unfoldr f b  =
  case f b of
   Just (a,new_b) -> a : unfoldr f new_b
   Nothing        -> [] 
```

也就是说，列表元素与种子值序列相同的情况很常见，并且在 just`unfoldr`和其他标准函数方面编写起来很笨拙，所以我不确定为什么它不在标准库中也是如此.

# silverlight - 如何从 Silverlight 浏览器应用程序启动 HTTP Server。HTTP 侦听器的替代方案

> ID：13735339
> 
> 赞同：0
> 
> 时间：2012-12-06T01:06:04.663
> 
> 标签：silverlight, activex, httplistener, system.net

我需要从在 Silverlight 浏览器应用程序中运行的 ActiveX 控件启动轻量级 HTTP 服务器。HTTP 服务器在 localhost 中运行。我的 HTTP 服务器使用 HTTPListener。我测试了从加载相同 ActiveX 控件的测试浏览器应用程序启动 HTTP 服务器。它工作得很好。当我尝试从 Silverlight 浏览器应用程序上的同一个 ActiveX 控件启动 HTTP 服务器时，我在以下代码中收到错误： httpListener = new HttpListener() 错误是：**Operation is not supported on this platform**。

是否有替代方法来实现可以从 Silverlight 浏览器启动的 HTTP 服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:26:55.907

不可能。Silverlight 对套接字有很多限制。

# java - Display.getDisplay(this) 应该显示什么吗？

> ID：13735340
> 
> 赞同：1
> 
> 时间：2012-12-06T01:06:34.057
> 
> 标签：java, midlet

我正在学习在 Mobile Java 应用程序中显示。我一开始就遇到了这个例子，但它没有显示任何内容。我想了解`Display.getDisplay(this)`这段代码在做什么？

```
import javax.microedition.lcdui.Display;
import javax.microedition.midlet.MIDlet;

public class Midlet extends MIDlet {

    private Display display = null;
    public void startApp() {
        if(display==null)
            display = Display.getDisplay(this);
    }

    public void pauseApp() {
    }

    public void destroyApp(boolean unconditional) {
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:09:18.237

您需要将一些可显示设置为当前显示，例如

```
 Form form = new Form("Hello World");
  String msg = "Hello World!!!!!!!";
  form.append(msg);
  display = Display.getDisplay(this);
  display.setCurrent(form); 
```

# c++ - STL max_element 没有使用我的类中的重载运算符 operator<

> ID：13735342
> 
> 赞同：0
> 
> 时间：2012-12-06T01:06:58.340
> 
> 标签：c++

我有一个指向对象 QActionDonald 的指针向量，我试图找到包含最高期望值的对象。我已经重载了 operator< 并且我正在使用 max_element 方法来获得一个迭代器的最大值，但我总是收到不正确的最终值。
QActionDonald.h：

```
class QActionDonald
{
public:

double expectedvalue_;

bool operator < (const QActionDonald& other) const;

}; 
```

QActionDonald.cpp：

```
bool QActionDonald::operator< (const QActionDonald& other) const
{
    return expectedvalue_ < other.expectedvalue_;
} 
```

其他类：

```
std::vector<QActionDonald*> *actionList =  qValueDictionary[stateKey];

        std::vector<QActionDonald*>::iterator it = 
std::max_element(actionList->begin(), actionList->end()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:07:37.973

当然不是，因为你的容器有指针，而不是对象。

要使用它，您需要`std::vector<QActionDonald>`或者，如果这不会发生变化，则需要提供一个自定义比较器来`std::max_element`应用正确的逻辑（即比较对象，而不是指针）。

# java - 相位监听器和命令按钮

> ID：13735347
> 
> 赞同：1
> 
> 时间：2012-12-06T01:07:22.570
> 
> 标签：java, jsf, jsf-2, xhtml, phaselistener

方法

```
public void beforePhase(PhaseEvent event)
public void afterPhase(PhaseEvent event) 
```

在与

```
<p:commandButton value="Login" action="#{checkUser.login}" ajax="false" /> 
```

当我尝试实现注销功能时，现在必须按两次按钮才能离开页面。

有没有办法在上面提到的“阶段侦听器”方法之前调用“命令按钮”方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:28:08.293

您需要在登录和注销后发送重定向，以让客户端触发新的 HTTP 请求。

例如

```
public String login() {
    // ...
    return "home?faces-redirect=true";
}

public String logout() {
    // ...
    return "login?faces-redirect=true";
} 
```

顺便说一句，a`PhaseListener`不是执行基于请求的身份验证的正确工具。您应该更喜欢 servlet`Filter`来完成这项工作。它`PhaseListener`的主要缺点是它仅在 JSF 请求上运行，并且在每个请求的基础上最多调用 12 次。有关此类过滤器的启动示例，另请参阅[如何提供没有 EL 表达式的 bean 方法](https://stackoverflow.com/questions/10355131/how-to-provide-bean-methods-without-el-expression/10355252#10355252)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:31:43.010

编辑：我应该指出 BalusC 的答案可能应该是解决这个问题的首选方法。但是，如果您仍然想玩相序，请继续阅读。/结束编辑

实际上，如果您将其实现为侦听每个阶段，则可以在您在 action-attribute 中指定的方法之前和之后调用 phaseListeners。

```
public class MyPhaseListener implements PhaseListener {
    public PhaseId getPhaseId() { return PhaseId.ANY_PHASE; }

    public void beforePhase(PhaseEvent event) {
        System.out.println("Before Phase: " + event.getPhaseId());
    }
    public void afterPhase(PhaseEvent event)  {
        System.out.println("After Phase: " + event.getPhaseId());
    }
} 
```

在 faces-config.xml 中激活你的监听器

```
<faces-config ... >
    <lifecycle>
        <phase-listener>MyPhaseListener</phase-listener>
    </lifecycle>
</faces-config> 
```

以下是所有 Listener 调用的打印输出以及调用 actionListener 和 action 的时间：

```
INFO: Before Phase: RESTORE_VIEW 1
INFO: After Phase: RESTORE_VIEW 1
INFO: Before Phase: APPLY_REQUEST_VALUES 2
INFO: After Phase: APPLY_REQUEST_VALUES 2
INFO: Before Phase: PROCESS_VALIDATIONS 3
INFO: After Phase: PROCESS_VALIDATIONS 3
INFO: Before Phase: UPDATE_MODEL_VALUES 4
INFO: After Phase: UPDATE_MODEL_VALUES 4
INFO: Before Phase: INVOKE_APPLICATION 5
INFO: ActionListener Done
INFO: Action Done
INFO: After Phase: INVOKE_APPLICATION 5
INFO: Before Phase: RENDER_RESPONSE 6
INFO: After Phase: RENDER_RESPONSE 6 
```

# c++ - ISO C++禁止指针和整数之间的比较？

> ID：13735349
> 
> 赞同：0
> 
> 时间：2012-12-06T01:07:55.850
> 
> 标签：c++, arrays, pointers, integer

这是代码：

```
void option5 (StudentRecord student[], int n)

{
   double gpaThreshold;
   char enteredMajor;
   int i;

   cout << "Enter a GPA threshold: ";
   cin >> gpaThreshold;
   cin.ignore(80, '\n');

   cout << "Enter a Major: ";
   cin >> enteredMajor;
   cin.ignore(80, '\n');

   enteredMajor = toupper(enteredMajor);

   for (i = 0; i < n; i++)
   {
      if (student[i].gpa >= gpaThreshold && student[i].major == enteredMajor)
      {
         if (i % 10 == 0)
         {
            cin.ignore();
         }
         cout << setw(3) << right << i+1 << ". "  
         << setw(20) << left << student[i].lastName 
         << setw(20) << left << student[i].firstName 
         << setw(8) << left << student[i].major 
         << fixed << setprecision(2) << setw(8) << left << student[i].earnedHours 
         << fixed << setprecision(2) << setw(6) << left << student[i].gpa << endl;
      }
   }
} 
```

StudentRecord 是一个结构，该行上唯一的整数是'i'，而指针（我必须假设）是.major。

我想将输入的专业与数组中的“专业”值进行比较。EG I type in Chem -turns to CHEM -获取该专业下的所有学生（以及 GPA 的阈值） -显示上述语句（所有“X”专业的学生）

有什么建议么？帮助？评论？正面/负面反馈？

编辑：这是结构：

```
struct StudentRecord
{
   char     lastName [16];  // field definitions of the structure
   char     firstName[16];
   char     hometown [16];
   char     major[5];
   int      studentNumber;
   double   balance;
   int      earnedHours;
   double   gpa;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:13:37.430

考虑这个片段：

```
student[i].major == enteredMajor 
```

`student[i].major`是 a `char[5]`，在这种情况下会演变为 a `char*`。这是一个指针类型。

`enteredMajor`是一个`char`。这是一个整体类型。

您无法比较这些类型。

也许您打算这样贴花`enteredMajor`：

```
char enteredMajor[5]; 
```

并像这样比较它们：

```
strcmp(student[i].major, enteredMajor) == 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T01:13:34.943

`student[i].major`是一个`char`数组；在表达式中使用时，它会衰减为指向`char`. 代码将其与`enteredMajor`具有 type的相等性进行比较`char`。因此抱怨：不能比较指针和整数（因为`char`被提升为`int`）。

# php - 从 MySQL 添加到 PHP 表单的超链接

> ID：13735361
> 
> 赞同：0
> 
> 时间：2012-12-06T01:09:49.063
> 
> 标签：php, mysql, hyperlink

我一直试图让我的电子邮件和 URL 显示为带有 h​​ref 和 mailto 的超链接，但没有成功。有人可以看看下面的代码，让我知道我需要做什么吗？谢谢。

```
<?php
    mysql_connect ("localhost", "root", "")  or die (mysql_error());
    mysql_select_db ("store_location");

    $term = $_POST['term'];

    $sql = mysql_query("SELECT * 
                        FROM store_location 
                        WHERE store_name like '%$term%' 
                        OR address like '%$term%' 
                        OR city like '%$term%' 
                        OR state like '%$term%' 
                        OR zip like '%$term%' 
                        OR phone like '%$term%' 
                        OR fax like '%$term%' 
                        OR email like '%$term%' 
                        OR url like '%$term%' ");

    while ($row = mysql_fetch_array($sql)){
      echo '<h1>Search Results:</h1>';
      echo 'Store Name: '.$row['store_name'];
      echo '<br/> Address: '.$row['address'];
      echo '<br/> City: '.$row['city'];
      echo '<br/> State: '.$row['state'];
      echo '<br/> Zip: '.$row['zip'];
      echo '<br/> Phone: '.$row['phone'];
      echo '<br/> Fax: '.$row['fax'];
      echo '<br/> Email: '.$row['email'];
      echo '<br/> URL: '.$row['url'];
      echo '<br/><br/>';
    }

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T01:12:24.677

由于您的输出是 HTML，因此只需编写

```
echo '<br/> Email: <a href="mailto:'.$row['email'].'">'.$row['email'].'</a>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:12:54.800

这应该可以帮助你

```
echo "<br/><a href='mailto:".$row['email']."'>".$row['email']."</a>" 
```

# java - HTTPClient - .releaseConnection 的 NoSuchMethodError

> ID：13735367
> 
> 赞同：1
> 
> 时间：2012-12-06T01:10:33.967
> 
> 标签：java, apache-httpclient-4.x

我正在使用 HTTPClient 构建一个测试项目来测试 restful 服务。这是迄今为止我成功用于在 GET 上获得 200 OK 响应的代码。但是，我在 .releaseConnection 上遇到错误，HTTPClient 文档说使用它很重要。

代码：

```
public class Container {

    public String tryGet() {
        String getResult = null;
        DefaultHttpClient httpclient = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet("http://test.url");
        try {
            HttpResponse response1 = httpclient.execute(httpGet);
            System.out.println(response1.getStatusLine());
            getResult = response1.getStatusLine().toString();
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } finally {
            httpGet.releaseConnection();
        }

        return getResult;

    }

} 
```

运行我的 junit 测试时，我收到以下与 .releaseConnection() 相关的错误：

```
java.lang.NoSuchMethodError: org.apache.http.client.methods.HttpGet.releaseConnection()V
    at com.qa.Container.tryGet(CreativeContainer.java:49)
    at com.qa.SandboxTest.test(SandboxTest.java:23)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:44)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:180)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:41)
    at org.junit.runners.ParentRunner$1.evaluate(ParentRunner.java:173)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:220)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

代码很丑，我知道。我才刚刚开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-11T10:01:41.863

[HttpRequestBase#releaseConnection()](https://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/methods/HttpRequestBase.html#releaseConnection%28%29)方法是在 4.2 版本中明确添加的。

可能你有罐子地狱。如果编译器没有编译错误，则可以在运行时加载该类的另一个版本。真正的原因取决于您的构建工具。如果您使用的是 maven/gradle，则可能存在一些传递依赖。

所以实际上[HttpRequestBase#releaseConnection()方法只是对](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.httpcomponents/httpclient/4.3.1/org/apache/http/client/methods/HttpRequestBase.java#HttpRequestBase.releaseConnection%28%29)[AbstractExecutionAwareRequest#reset()](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.httpcomponents/httpclient/4.3.1/org/apache/http/client/methods/AbstractExecutionAwareRequest.java#AbstractExecutionAwareRequest.reset%28%29)的代理调用。而[AbstractExecutionAwareRequest#reset()](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.httpcomponents/httpclient/4.3.1/org/apache/http/client/methods/AbstractExecutionAwareRequest.java#AbstractExecutionAwareRequest.reset%28%29)只是取消方法执行。可能**这不是您需要**的。

执行和释放httpClient资源的正确方法是关闭httpResponse，也就是说可以在httpClient的内部threadPool中释放Thread。

```
private static String makeRequest(HttpUriRequest httpRequest) throws IOException {
    CloseableHttpResponse httpResponse = httpClient.execute(httpRequest);
    try {
        HttpEntity httpEntity = httpResponse.getEntity();
        StringWriter writer = new StringWriter();
        IOUtils.copy(httpEntity.getContent(), writer, "UTF-8");
        return writer.toString();
    } finally {
        httpResponse.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-10T19:14:07.707

对于使用 httpclient 4.2.2 所需的所有 jar，快速入门并不是很清楚。我创建了一个依赖 org.apache.httpcomponents:httpclient:4.2.2 的 Maven 项目，并获得了以下附加 jar：

*   org.apache.httpcomponents:httpcore:4.2.2
*   公共日志记录：公共日志记录：1.1.1
*   公共编解码器：公共编解码器：1.6

我复制了您的代码（将 HttpGet-url 更改为“ [https://www.google.com/](https://www.google.com/) ”）并用它运行了 JUnit 测试，没有错误。

确实需要“.releaseConnection()”来确保关闭连接（在出现问题后）。省略“.releaseConnection()”可能会导致打开的连接在您的系统上什么都不做。

由于您仍处于开发开始阶段，我建议您使用最新的 HttpClient 4.3.x 版本（当前为 4.3.1）。4.3 版本对 4.2 版本进行了一些很好的改进，但用法也发生了变化。例如，在[快速入门](http://hc.apache.org/httpcomponents-client-4.3.x/quickstart.html)中，您将看到不再使用“.releaseConnection()”（已弃用），而是关闭响应对象以确保关闭连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-11T09:36:33.613

从 4.2 版本开始引入此方法，请参阅[javadoc](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/methods/HttpRequestBase.html#releaseConnection%28%29)

所以你需要使用版本 > 4.2 我用 4.3.1 版本测试过它并且工作正常。

```
<dependency>
    <groupId>org.apache.httpcomponents</groupId>
    <artifactId>httpclient</artifactId>
    <version>4.3.1</version>
</dependency> 
```

[http://mvnrepository.com/artifact/org.apache.httpcomponents/httpclient/4.3.1](http://mvnrepository.com/artifact/org.apache.httpcomponents/httpclient/4.3.1)

![啊](../Images/6d498ba7ea7f00cf5d2950bac7a7a8b9.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T01:45:28.003

使用 httpcomponents-client-4.2.1

# c#-4.0 - 如何在每个线程中链接任务

> ID：13735370
> 
> 赞同：2
> 
> 时间：2012-12-06T01:10:53.667
> 
> 标签：c#-4.0, progress-bar, task-parallel-library, chain

我需要使用批量复制复制数百个表。到目前为止，我得到了以下代码。

```
// from UI main thread
private void test1()
{
  LimitedTaskScheduler scheduler = new LimitedTaskScheduler(4);
  TaskFactory factory = new TaskFactory(scheduler);
  foreach (DataRow row in tabList.Rows) // Loop over the rows.
  {
    string tabName = row[tabList.Columns["TableName"]].ToString();
    factory.StartNew<string>( () =>
    {
      Console.WriteLine("{0} on thread {1}", tabName, Thread.CurrentThread.ManagedThreadId);
      TableCopyer tc1 = new TableCopyer();
      // pass progressbar and label into tc1 instance to update the progressbar and label
      tc1.Bar1 = bar1; 
      tc1.L1 = l1;
      tc1.EntityCopy(AppInfo.SrcDBMSPath, AppInfo.DestDBMSPath, tabName, "");
      return tabName;
    });
  }
}

// inside TableCopier class
private void OnSqlRowsCopied(object sender, SqlRowsCopiedEventArgs e)
{
  try
  {
    int rowCopied = int.Parse(e.RowsCopied.ToString());
    double result = (double.Parse(rowCopied.ToString()) / double.Parse(TotalRows.ToString()));
    int prsent = int.Parse(Math.Round((result * 100), 0).ToString());
    SetProgressbar(prsent);
  }
  catch { throw; }
} 
```

LimitedTaskScheduler 来自 [http://msdn.microsoft.com/en-us/library/ee789351.aspx](http://msdn.microsoft.com/en-us/library/ee789351.aspx)

我的问题是

1.  我如何链接任务，以便每个任务仅在每个线程中的先前任务完成时才开始？我将最大并行线程限制为 4。我想在线程中链接任务，因为在线程中执行的任务将以一种完成和另一个开始的方式重用相同的进度条。

2.  我在 UI 上绘制了 4 个进度条，bar1、bar2、bar3、bar4。如何将每个进度条与特定线程相关联，以便用户可以同时看到 4 个运行进度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T15:48:45.683

I think it doesn't make much sense to tie yourself into thinking about specific threads. Instead, what you want is that your tasks run concurrently at most 4 at a time and you want to use your 4 progress bars from those tasks.

What you could do is to put those progress bars into a collection, and then take a progress bar from there at the start of each task and return it back there at the end of the task.

You have to be careful about thread-safety here, so you should either use locks when working with the collection of progress bars, or use a thread-safe collection like `ConcurrentQueue`. Also, updating the progress bar usually has to be done from the UI thread, so you will have to take care of that too.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T07:06:58.737

> 我如何链接任务，以便每个任务仅在每个线程中的先前任务完成时才开始？我将最大并行线程限制为 4。我想将线程内的任务链接起来，因为在线程中执行的任务将以一种完成而另一个开始的方式重用相同的进度条。

您想将您的任务链接在一起。所以基本上没有发生并行处理，除了您希望在与 UI 分开的线程上处理它。那么，如果您不希望循环处理按顺序运行，为什么还要为循环的每次迭代生成一个新任务呢？您可以在任务中包装一个普通的 for 循环：

```
private void test1()
{
    Task.Factory.StartNew(() =>
    {
        foreach (DataRow row in tabList.Rows) // Loop over the rows.
        {
            string tabName = row[tabList.Columns["TableName"]].ToString();

            Console.WriteLine("{0} on thread {1}", tabName, Thread.CurrentThread.ManagedThreadId);
            TableCopyer tc1 = new TableCopyer();
            // pass progressbar and label into tc1 instance to update the progressbar and label
            tc1.Bar1 = bar1;
            tc1.L1 = l1;
            tc1.EntityCopy(AppInfo.SrcDBMSPath, AppInfo.DestDBMSPath, tabName, "");
        }
    });
} 
```

> 我在 UI 上绘制了 4 个进度条，bar1、bar2、bar3、bar4。如何将每个进度条与特定线程相关联，以便用户可以同时看到 4 个运行进度？

有很多方法可以做到这一点，这实际上取决于您对哪种方法最好的要求。您可以引用 a 中的进度条`Queue<T>`，但前提是您确信您将拥有与表格行一样多的进度条。

```
private void test1()
{
    Task.Factory.StartNew(() =>
    {
        var progressBars = new Queue<ProgressBar>(new List<ProgressBar> { bar1, bar2, bar3, bar4 });

        foreach (DataRow row in tabList.Rows) // Loop over the rows.
        {
            // ...

            if(progressBars.Count() == 0}
                throw new Exception("Not enough progress bars setup!");

            tc1.Bar1 = progressBars.Dequeue();

            // ...
        }
    });
} 
```

如果`tabList.Rows`是`IEnumerable`，那么您可以使用 确保队列不会中断`Take()`：

```
foreach (DataRow row in tabList.Rows.Take(progressBars.Count()))
{ ... } 
```

# c++ - 在构造函数c ++中初始化向量

> ID：13735371
> 
> 赞同：0
> 
> 时间：2012-12-06T01:11:00.363
> 
> 标签：c++, vector

我保证我已经环顾四周寻找解决方案，但无济于事，但是我没有 C++ 经验，所以也许我只是不知道要搜索什么。

我想最简单的做法是先向您显示我的错误代码，以防它被识别。这有点像一堆，这就是为什么我无法绕开它来找出问题所在。（这也是为什么我认为这是我无法理解的事情，或者我犯了一个非常烦人的错误！）

```
g++ -Wall -pedantic -ansi -std=c++0x -g   -c -o contacts.o contacts.cc
In file included from /usr/include/c++/4.6/vector:63:0,
             from contacts.h:5,
             from contacts.cc:2:
/usr/include/c++/4.6/bits/stl_construct.h: In function ‘void std::_Construct(_T1*,
 _Args&& ...) [with _T1 = person, _Args = {}]’:
/usr/include/c++/4.6/bits/stl_uninitialized.h:481:3:   instantiated from ‘static void
std::__uninitialized_default_n_1<_TrivialValueType>::__uninit_default_n(_ForwardIterator, 
_Size) [with _ForwardIterator = person*, _Size = unsigned int, bool _TrivialValueType = 
false]’
/usr/include/c++/4.6/bits/stl_uninitialized.h:529:7:   instantiated from ‘void 
std::__uninitialized_default_n(_ForwardIterator, _Size) [with _ForwardIterator = 
person*, _Size = unsigned int]’
/usr/include/c++/4.6/bits/stl_uninitialized.h:604:7:   instantiated from ‘void 
std::__uninitialized_default_n_a(_ForwardIterator, _Size, std::allocator<_Tp>&) [with 
_ForwardIterator = person*, _Size = unsigned int, _Tp = person]’
/usr/include/c++/4.6/bits/stl_vector.h:1134:2:   instantiated from ‘void 
std::vector<_Tp, _Alloc>::_M_default_initialize(std::vector<_Tp, _Alloc>::size_type) 
[with _Tp = person, _Alloc = std::allocator<person>, std::vector<_Tp, 
_Alloc>::size_type = unsigned int]’
/usr/include/c++/4.6/bits/stl_vector.h:239:9:   instantiated from ‘std::vector<_Tp, 
_Alloc>::vector(std::vector<_Tp, _Alloc>::size_type) [with _Tp = person, _Alloc = 
std::allocator<person>, std::vector<_Tp, _Alloc>::size_type = unsigned int]’
contacts.cc:7:38:   instantiated from here 
```

编辑：抱歉，我不完全理解我在做什么，但我希望这是你所要求的。如果我的代码中至少有这么多（两个相关文件），错误仍然会出现：

联系人.h：

```
#ifndef _CONTACTS_H
#define _CONTACTS_H

#include <iostream>
#include <vector>

#include "person.h"

class contacts{
  private:
  int element;
  int count;
  vector<person> pv;

  public:
  contacts();
};
#endif 
```

和contacts.cc：

```
#include "contacts.h"

using namespace std;

contacts::contacts() : count(0), pv(0) {} 
```

谢谢-伊万

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:28:03.010

你为什么要传递`0`给 std::vector<> 构造函数？这听起来与您所写的效果相同：

`contacts::contacts() : count(0) {}`

# xml - 将 'xml:base' 插入 XElement 根目录

> ID：13735376
> 
> 赞同：0
> 
> 时间：2012-12-06T01:11:27.867
> 
> 标签：xml, linq-to-xml, xelement

如何将“XML Base”属性/命名空间 ( [http://en.wikipedia.org/wiki/XML_Base](http://en.wikipedia.org/wiki/XML_Base) ) 插入 XElement 或 XDocument 的根目录？

```
<feed xml:base="someurl.com">...</feed> 
```

并且，这样做不会弄乱整个 XElement（例如，通过它尝试在其他任何地方插入相同的内容或一些相关的疯狂副作用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:37:56.570

这应该可以解决问题：

```
element.Root.SetAttributeValue(XNamespace.Xml + "base", "someurl.com") 
```

（编辑：SetAttributeValue）

# c++ - 带有矢量对象 C++ 的快速排序函数

> ID：13735379
> 
> 赞同：1
> 
> 时间：2012-12-06T01:11:34.033
> 
> 标签：c++, class, sorting, vector

我正在尝试将此函数转换为使用矢量对象而不是整数数组。矢量对象如下所示：

```
std::vector<Heltal *> htal; 
```

Heltal 类包含一个名为 heltal 的私有整数。

如何使用下面的函数对 htal 向量进行排序？

```
void Array::Sort(int a[], int first, int last)
{
    int low = first;
    int high = last;
    int x = a[(first+last)/2];
    do {
        while(a[low] < x) {
            low++;
        }
        while(a[high] > x) {
            high--;
        }
        if(low<=high) {
            std::swap(a[low],a[high]);
            low++;
            high--;
        }
    } while(low <= high);
    if(first < high)
        Array::Sort(a,first,high);
    if(low < last)
        Array::Sort(a,low,last);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T01:23:20.690

正确的解决方案是放弃您的自定义排序并使用[`std::sort`](http://en.cppreference.com/w/cpp/algorithm/sort)from `<algorithm>`. 这几乎可以保证在几乎所有情况下都更快、更优化。然后你只有：

```
#include <algorithm>
...
std::vector<Heltal *> htal;
...
// sort by pointer value
std::sort(htal.begin(), htal.end()); 
```

如果你想按对象值而不是指针值排序，要么使用`std::vector<Heltal>`而不是`std::vector<Heltal *>`（这几乎肯定是你应该做的），或者将比较函数传递给 std::sort。

为此使用 C++11 lambda 的示例：

```
std::sort(htal.begin(), htal.end(), [](Heltal *a, Heltal *b) { return *a < *b; }); 
```

# uiimageview - 显示图像的简单 UICollectionView 行为奇怪：一些图像显示正确，一些在错误的位置，一些完全丢失

> ID：13735382
> 
> 赞同：17
> 
> 时间：2012-12-06T01:11:58.233
> 
> 标签：uiimageview, ios6, uicollectionview, uicollectionviewcell

我想使用 UICollectionView 在 iPhone 上的网格中显示图像，每行显示 3 张图像。对于“非常简单的测试”（如我所想），我在我的项目中添加了 15 张 JPG 图像，这样它们就会在我的包中，我可以通过 [UIImage imageNamed:...] 简单地加载它们。

我想我做的一切都是正确的（设置和注册 UICollectionViewCell 子类，使用 UICollectionViewDataSource 协议方法），但是，UICollectionView 的行为很奇怪：

它仅显示以下模式中的少数图像：第一行显示图像 1 和 3，第二行为空白，下一行与第一行相同（图像 1 和 3 正确显示），第四行空白，依此类推。 .

如果我在 NavBar 中按下触发 [self.collectionView reloadData] 的按钮，随机单元格会出现或消失。让我抓狂的是，这不仅仅是图像是否出现的问题。有时，图像也会在单元格之间交换，即它们出现在 indexPath 中，它们绝对没有连接！

这是我的单元格代码：

```
@interface AlbumCoverCell : UICollectionViewCell
@property (nonatomic, retain) IBOutlet UIImageView *imageView;
@end

@implementation AlbumCoverCell
@synthesize imageView = _imageView;
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        _imageView = [[UIImageView alloc] initWithFrame:frame];
        [self.contentView addSubview:_imageView];
    }
    return self;
}

- (void)dealloc
{
    [_imageView release];
    [super dealloc];
}

- (void)prepareForReuse
{
    [super prepareForReuse];
    self.imageView.image = nil;
}
@end 
```

我的 UICollectionViewController 子类的部分代码，其中“imageNames”是一个包含所有 jpg 文件名的 NSArray：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.collectionView registerClass:[AlbumCoverCell class] forCellWithReuseIdentifier:kAlbumCellID];
}

#pragma mark - UICollectionViewDataSource Protocol methods
- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
{
    return [self.imageNames count];
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    AlbumCoverCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:kAlbumCellID forIndexPath:indexPath];
    NSString *imageName = [self.imageNames objectAtIndex:indexPath.row];
    NSLog(@"CV setting image for row %d from file in bundle with name '%@'", indexPath.row, imageName);
    cell.imageView.image = [UIImage imageNamed:imageName];

    return cell;
}

#pragma mark - UICollectionViewDelegateFlowLayout Protocol methods
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath;
{
    return CGSizeMake(100, 100);
}

- (UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section;
{
    return UIEdgeInsetsMake(0, 0, 0, 0);
} 
```

从 cellForItemAtIndexPath 中的 NSLog 语句：我可以看到所有单元格（不仅显示一个）都调用了该方法，并且 indexPath.row 和文件名之间的映射是正确的。

有谁知道什么会导致这种奇怪的行为？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-21T12:41:58.597

与此同时，我找到了解决方案。这实际上是我的`UICollectionViewCell`子类实现中的一个非常微妙的错误`AlbumCoverCell`。

问题是我将单元格实例的框架设置为`UIImageView`子视图的框架，而不是传递单元格的边界属性`contentView`！

**这是修复：**

```
@implementation AlbumCoverCell
@synthesize imageView = _imageView;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // WRONG:
        // _imageView = [[UIImageView alloc] initWithFrame:frame];

        // RIGHT:
        _imageView = [[UIImageView alloc] initWithFrame:self.contentView.bounds];
        [self.contentView addSubview:_imageView];
    }
    return self;
}

- (void)prepareForReuse
{
    [super prepareForReuse];

    // reset image property of imageView for reuse
    self.imageView.image = nil;

    // update frame position of subviews
    self.imageView.frame = self.contentView.bounds;
}

...

@end 
```

# linux - 拆分返回值后管道命令

> ID：13735389
> 
> 赞同：2
> 
> 时间：2012-12-06T01:12:58.527
> 
> 标签：linux, bash, command-line

我正在使用一个 find 命令，该命令会产生多行结果，然后我想将这些行中的每一行通过指定的 -l 选项通过管道传输到一个 ls 命令中。

```
find . -maxdepth 2  -type f |<some splitting method> | ls -l 
```

我想在一个“命令”中执行此操作并避免写入文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:14:52.067

我相信这就是您正在寻找的：

```
find . -maxdepth 2  -type f -exec ls -l {} \; 
```

**解释：**

*   `find . -maxdepth 2 -type f`: 查找 maxdepth 为 2 的文件
*   `-exec ls -l {} \;`对于找到的每个这样的结果，运行`ls -l`它；`{}`指定 find 的结果将被替换到哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T01:15:18.900

典型的方法是使用`-exec`：

```
find . -maxdepth 2  -type f -exec ls -l {} \; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T01:16:55.327

听起来您正在寻找 xargs。例如，在典型的 Linux 系统上：

```
find . -maxdepth 2  -type f -print0 | xargs -0 -n1 ls -l 
```

# c# - 我的线程数组有问题

> ID：13735398
> 
> 赞同：5
> 
> 时间：2012-12-06T01:13:45.577
> 
> 标签：c#, multithreading

我正在尝试开发的表格有一组 6 个图片框和一组 6 个芯片图像。我有一个按钮，单击该按钮需要创建 6 个线程来“滚动”骰子，显示每个图像片刻。我遇到的问题是我需要在掷骰子后在按钮单击中调用一个方法。我可以掷骰子，但会立即显示消息框。我尝试了几种不同的方法并得到了各种错误。在下面的非工作版本中，程序冻结。我已经检查了大量资源，但我只是没有很好地掌握一些概念，比如 Delegates 和 Invoke。任何帮助都会很棒！这是我的程序

```
namespace testDice
{
    public partial class Form1 : Form
    {
        private Image[] imgAr;
        private PictureBox[] picBoxAr;
        private Random r;
        private Thread[] tArray;
        private ThreadStart tStart;
        private delegate void setTheImages();

        public Form1()
        {
            InitializeComponent();
            setImageArray();
            setPicBoxAr();
        }

        private void setImageArray()
        {
            imgAr = new Image[6];
            imgAr[0] = testDice.Properties.Resources.die6;
            imgAr[1] = testDice.Properties.Resources.die1;
            imgAr[2] = testDice.Properties.Resources.die2;
            imgAr[3] = testDice.Properties.Resources.die3;
            imgAr[4] = testDice.Properties.Resources.die4;
            imgAr[5] = testDice.Properties.Resources.die5;

        }

        private void setPicBoxAr()
        { 
            picBoxAr = new PictureBox[6];
            picBoxAr[0] = pictureBox1;
            picBoxAr[1] = pictureBox2;
            picBoxAr[2] = pictureBox3;
            picBoxAr[3] = pictureBox4;
            picBoxAr[4] = pictureBox5;
            picBoxAr[5] = pictureBox6;
        }   

        private void button1_Click(object sender, EventArgs e)
        {
            roll();

            //wait for threads to finish and update images--doesn't work
            for (int n = 0; n < 6; n++)
            {
                while (tArray[n].IsAlive)
                {
                    for (int i = 0; i < 6; i++)
                    {
                        this.picBoxAr[i].Update();
                    }
                }
            }

            MessageBox.Show("Each die has its own thread");
        }

        private void roll()
        {
            this.tStart = new ThreadStart(RunAllDiceThreads);
            this.tArray = new Thread[6];
            for (int i = 0; i < 6; i++)
            {
                this.tArray[i] = new Thread(tStart);
                this.tArray[i].Start();
            }
        }

        private void RunAllDiceThreads()
        {  
            int n = 0;
            while (n < 50)
            {
                setImg();
                Thread.Sleep(50);
                n++;
            }

            for (int i = 0; i < 6; i++)
            {
                if (tArray[i] != null)
                {
                    tArray[i].Abort();
                    tArray[i] = null;
                }
            }
        }// end RunAllDiceThreads

        private void setImg()
        {
            r = new Random();

            for (int i = 0; i < 6; i++)
            {
                    if (this.picBoxAr[i].InvokeRequired)
                    {
                        setTheImages s = new setTheImages(setImg);
                        // parameter mismatch error here
                        //this.Invoke(s, new object[] { imgAr[r.Next(6)] }); 
                        //Freezes here!!
                          this.Invoke(s);
                    }
                    else
                    {
                        this.picBoxAr[i].Image = imgAr[r.Next(6)];
                    }
            }
        }//end setImg

   }// end class Form1
}//end namespace testDice 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:26:52.210

听起来您在调用设置图像和更新图片框之间遇到了僵局。

我建议重新考虑你的程序。您的程序几乎似乎是建立在您使用单个线程对单个模具进行建模的概念之上的。将模具的状态与线程的状态分开。例如，您可能想要创建一个具有特定状态的 Die 类，例如 IsRolling 或 CurrentValue。在工作线程的循环内使用和修改该类的对象（仅限该类）。这样，您就不必调用回您的 UI 线程来更新。这样，依赖关系就干净多了。您可能想创建一个[计时器](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)在您的 UI 线程中定期触发（例如每秒 10-30 次），读取每个骰子的状态，并以这种方式更新图像。就死锁而言，这要安全得多，因为您没有任何循环依赖关系。它还可能会产生一个更有吸引力的界面，因为您的模具图像将以更流畅、更可预测的方式更新。

另一个经验法则...[不要调用 Thread.Abort()](https://stackoverflow.com/questions/1559255/whats-wrong-with-using-thread-abort)（请参阅参考资料）。使用 Die 对象的属性并简单地从中读取以更新 UI 通常会更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:27:14.770

您需要`MessageBox.Show("Each die has its own thread");`从`button1_Click`.

创建一个属性来跟踪返回的线程数。当它达到 6 调用时`MessageBox.Show("Each die has its own thread");`（您可能希望将此调用放在它自己的方法中并调用该方法）。

您的问题是您正在启动线程，然后在它们运行时显示消息框而不是等待线程返回。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-06T01:31:28.030

如果您能够使用最新版本的 .Net Framework，我建议您使用[System.Threading.Tasks](http://msdn.microsoft.com/en-us/library/system.threading.tasks.aspx)命名空间。好处是它封装了很多多线程细节，让事情变得更干净。这是一个简单的例子。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace TasksExample
{
    class Program
    {
        static void Main(string[] args)
        {
            // holds all the tasks you're trying to run
            List<Task> waitingTasks = new List<Task>();

            // a simple object to lock on
            object padlock = new object();

            // simple shared value that each task can access
            int sharedValue = 1;

            // add each new task to the list above.  The best way to create a task is to use the Task.Factory.StartNew() method.
            // you can also use Task.Factory<RETURNVALUE>.StartNew() method to return a value from the task
            waitingTasks.Add(Task.Factory.StartNew(() => 
            {
                // this makes sure that we don't enter a race condition when trying to access the
                // shared value
                lock (padlock)
                {
                    // note how we don't need to explicitly pass the sharedValue to the task, it's automatically available
                    Console.WriteLine("I am thread 1 and the shared value is {0}.", sharedValue++);
                }
            }));

            waitingTasks.Add(Task.Factory.StartNew(() => 
            {
                lock (padlock)
                {
                    Console.WriteLine("I am thread 2 and the shared value is {0}.", sharedValue++);
                }
            }));

            waitingTasks.Add(Task.Factory.StartNew(() => 
            {
                lock (padlock)
                {
                    Console.WriteLine("I am thread 3 and the shared value is {0}.", sharedValue++);
                }
            }));

            waitingTasks.Add(Task.Factory.StartNew(() => 
            {
                lock (padlock)
                {
                    Console.WriteLine("I am thread 4 and the shared value is {0}.", sharedValue++);
                }
            }));

            waitingTasks.Add(Task.Factory.StartNew(() => 
            {
                lock (padlock)
                {
                    Console.WriteLine("I am thread 5 and the shared value is {0}.", sharedValue++);
                }
            }));

            waitingTasks.Add(Task.Factory.StartNew(() => 
            {
                lock (padlock)
                {
                    Console.WriteLine("I am thread 6 and the shared value is {0}.", sharedValue++);
                }
            }));

            // once you've spun up all the tasks, pass an array of the tasks to Task.WaitAll, and it will
            // block until all tasks are complete
            Task.WaitAll(waitingTasks.ToArray());

            Console.WriteLine("Hit any key to continue...");
            Console.ReadKey(true);
        }
    }
} 
```

我希望这会有所帮助，如果您需要更多帮助，请告诉我。

# drupal - 如何在 Drupal 7 中关联/链接内容项？

> ID：13735399
> 
> 赞同：2
> 
> 时间：2012-12-06T01:13:50.353
> 
> 标签：drupal, drupal-7

我有一个跟踪车队中汽车的网站。在网站上，我有一些内容项目：

1.  汽车
2.  引擎
3.  配件

汽车内容项将包含该汽车的详细信息（品牌/型号、年份等）。

引擎内容项将包含有关引擎本身的信息（里程、距离下一次服务的时间等）。

附件内容项目将包含有关该汽车上其他项目的信息（车顶标牌、审查镜子骰子、使用的空气清新剂等……这些只是该内容类型页面上的示例）。

引擎和配件内容项目将在一个汽车中开始，但随着时间的推移它们可能会移动到其他汽车。例如： 第 1 个月：汽车 A 有发动机 K 和配件 T 第 2 个月：汽车 A 有发动机 L 和配件 U 第 3 个月：汽车 A 有发动机 M 和配件 V

我想知道我的选择是将这些引擎和附件内容项关联/链接到该汽车，然后在需要更改它们时将它们链接到不同的汽车。关于如何实现的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:23:32.900

就我个人而言，我只会使用各自的字段创建 3 种不同的内容类型，并使用[引用模块](http://drupal.org/project/references)将引擎和附件附加到汽车内容类型。使用自动完成小部件或选择列表，具体取决于您拥有多少内容。

例子：

```
Automobile
-Make
-Model
-Engine Ref Field
-Accessories Ref Field

Engine
-Options
-Other Options

Accessories
-Options
-More options 
```

这种方式可以轻松地将引擎和配件连接到您的汽车节点，并允许您快速更改每月引用它的项目。

# php - 按日期分组，但显示所有行

> ID：13735400
> 
> 赞同：0
> 
> 时间：2012-12-06T01:13:53.113
> 
> 标签：php, mysql, mysqli

通常，当我将东西组合在一起时，显然是为了将重复的东西组合在一起，但是我正在制作一个获胜者页面，显示一堆头奖的获胜者，一些头奖有 1 个中奖者，而其他有 3 个中奖者，`GROUP BY date`如果只有1 个获胜者，但在应该有 3 个获胜者时只会显示 1 个获胜者。

这是我的代码

```
$result = $db->query("SELECT * FROM r_winners GROUP BY date ORDER BY date DESC");
while($rows = $result->fetch_assoc()){
print"<table class='cashout' style='width:100%;'>
<th colspan='3'>".$rows['jackpot_name']." Winners</th>
<tr>
<td style='width:33%;'>".$rows['winner']."</td><td style='width:33%;'>$".$rows['amount']."</td><td style='width:33%;'>".date("m/d/Y", $rows['date'])."</td></tr>
</tr></table>";
} 
```

它打印出这样的表格

```
---------------------------------------
Daily     Jackpot     Winners
Username|  $5.00   |  12/5/2012         // This table is right, because there is only 1 winner
--------------------------------------- 
```

因为只有 1 个获胜者`GROUP BY`，所以这里真的没有影响

这是多个获奖者的表格

```
---------------------------------------
Monthly     Jackpot     Winners
Username  |  $5.00   |  12/5/2012         // This table is wrong, because there should be 3 winners
--------------------------------------- 
```

它需要看起来像这样

```
---------------------------------------
Monthly     Jackpot     Winners
Username  |  $5.00   |  12/5/2012 
Username2 |  $2.00   |  12/5/2012
Username3 |  $1.00   |  12/5/2012        
--------------------------------------- 
```

我怎样才能做到这一点？

编辑：这也许可以更好地解释这一点[https://gist.github.com/4221167](https://gist.github.com/4221167)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:15:59.087

根本不要使用`GROUP BY`。您已经在使用`ORDER BY`它将您的日期放入逻辑“分组”中。

为了回应您关于 ho 将结果输出到一个表中的评论，以下是您需要修改代码的方式。

```
$result = $db->query("SELECT * FROM r_winners ORDER BY date DESC");
print "<table class='cashout' style='width:100%;'>";
print "<th colspan='3'>".$rows['jackpot_name']." Winners</th>";
while($rows = $result->fetch_assoc()){
    print "<tr><td style='width:33%;'>".$rows['winner']."</td><td style='width:33%;'>$".$rows['amount']."</td><td style='width:33%;'>".date("m/d/Y", $rows['date'])."</td></tr>";
}
print "</table>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T01:44:41.087

将您的查询更改为仅使用`ORDER BY`并重新格式化您的循环，将表格元素放在外面，并且只打印一次标题

```
$result = $db->query("SELECT * FROM r_winners ORDER BY date DESC");
print"<table class='cashout' style='width:100%;'>";
$jackpot_name = '';
while($rows = $result->fetch_assoc()){
    if ($jackpot_name != $rows['jackpot_name']) {
        $jackpot_name = $rows['jackpot_name'];
        print "<th colspan='3'>".$rows['jackpot_name']." Winners</th>";
    }
    print "<tr><td style='width:33%;'>".$rows['winner']."</td><td style='width:33%;'>$".$rows['amount']."</td><td style='width:33%;'>".date("m/d/Y", $rows['date'])."</td></tr>";
}
print "</table>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T01:16:20.757

尝试删除`GROUP BY`并且仅使用`ORDER BY`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T01:16:59.900

你应该`GROUP BY Monthly ORDER BY Winners`，当然，如果`Monthly`是唯一的，那么你甚至不需要`GROUP BY`它。

***编辑：*** 检查您的 php 代码后，我认为您需要以下内容：

```
SELECT 
  GROUP_CONCAT(winner_name) AS winner_names,
  SUM(the_value_column_you_want_to_sum) AS amount
FROM r_winners 
GROUP BY date ORDER BY date DESC 
```

# java - 如何在Java中初始化相互依赖的类？

> ID：13735402
> 
> 赞同：6
> 
> 时间：2012-12-06T01:14:03.670
> 
> 标签：java, class, dependencies

说我有班级签名

```
Class1(Class2 c);
Class2(Class1 c); 
```

如何初始化两者？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T01:17:38.730

对于其中一个类，您无需在构造函数中提供引用，但您可以使用`set`- 方法。当它们以前都不存在时，初始化它们相互依赖似乎很困难。

```
class Foo {
    private Bar bar;
    public Foo(Bar bar) {
        this.bar = bar;
    }
}

class Bar {
    private Foo foo;
    setFoo(Foo foo) {
        this.foo = foo;
    }
}

Bar bar = new Bar();
Foo foo = new Foo(bar);
bar.setFoo(foo); 
```

另请注意，可能有更好的解决方案。例如使用[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)，这完全取决于您计划如何使用您的对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T01:28:05.657

你的问题没有多大意义。如果每个类都需要另一个类来初始化，那么你真的必须重新考虑你的类是如何设计的。

您可能会考虑让其中一个类自己创建另一个类，而不必在构造函数中指定它。例如 ：

```
class Class1 {
    private Class2 c2;
    public Class1() {
        this.c2 = new Class2(this);
    }
}

class Class2 {
    private Class1 c1;
    public Class2(Class1 c) {
        this.c1 = c;
    }
} 
```

或者创建设置器并允许它们在“未初始化”状态下创建（如果设置不正确，可能会引发异常）。例如 ：

```
class Class1 {
    private Class2 c2;
    public void setClass2(Class2 c) {
        this.c2 = c;
    }
    public void doSomething() {
        if (null == c2) throw new IllegalStateException();
        // ...
    }
}

class Class2 {
    private Class1 c1;
    public void setClass1(Class1 c) {
        this.c1 = c;
    }
    public void doSomething() {
        if (null == c1) throw new IllegalStateException();
        // ...
    }
}

// somewhere else....
Class1 c1 = new Class1();
Class2 c2 = new Class2();
c1.setClass2(c2);
c2.setClass1(c1); 
```

此外，如果每个实例都需要相互链接，您应该检查它们是否确实由正确的对象拥有，否则您可能会创建错误的引用......这正是为什么它首先是一个糟糕的设计地方。考虑一下：

```
Class2 c2 = new Class2(new Class1()); 
```

但是，您可能会认为这是一个聪明的构造`c2.getClass1().getClass2() != c2`。

它也不能保证`c1.getClass2() == c2 && c2.getClass1() == c1`在上述两种情况下。

您的类应该检查反向引用是否正确，并且您无法使用任何一种方法正确实现这一点！

要解决这个先有鸡还是先有蛋的问题，您需要某种工厂方法或[第三类](http://misko.hevery.com/2008/08/01/circular-dependency-in-constructors-and-dependency-injection/)。考虑一下：

```
abstract class Class1 {
    public abstract Class2 getClass2();
}

abstract class Class2 {
    public abstract Class1 getClass1();
}

public Class3 {
    private Class1 c1;
    private Class2 c2;
    public Class3() {
        c1 = new Class1_Impl();
        c2 = new Class2_Impl();
    }
    public Class1 getClass1() { return c1; }
    public Class2 getClass2() { return c2; }
    private class Class1_Impl extends Class1 {
         public Class1 getClass2() { return c2; }
    }
    private class Class2_Impl extends Class2 {
         public Class1 getClass1() { return c1; }
    }
}

// and later on...
Class3 c3 = new Class3();
Class1 c1 = c3.getClass1();
Class2 c2 = c3.getClass2(); 
```

有了这个，你就可以得到保证`c1.getClass2() == c2 && c2.getClass1() == c1`。

* * *

如果你还在读书，那么你就在启蒙的轨道上。如果你能看到这个类设计的后果是什么，那么你就会明白[循环依赖](http://en.wikipedia.org/wiki/Circular_dependency)是一种[反模式](http://en.wikipedia.org/wiki/Anti-pattern)，应该避免。

但是，您的问题不够具体，我无法完全为您提供一种更正确的方法来以干净和更好的方式解决您的问题。

# objective-c - 如何淡出子视图以显示从 .nib 加载的 UIViewController 的视图

> ID：13735404
> 
> 赞同：2
> 
> 时间：2012-12-06T01:14:21.767
> 
> 标签：objective-c, uiview, uiviewcontroller, ios6

我有从 .nib 文件加载的 ViewController。在 viewDidLoad 方法中，我创建了一个子视图并将其添加到视图层次结构中。如何淡出该子视图以在 .nib 文件中显示视图？

（子视图就像一个启动屏幕，我想淡出以在 .nib 中显示视图，它是这样设置的，因为它对我来说是最简单的方式。）

这是我的一些代码（我试图从 viewDidLoad 的笔尖设置对原始视图的引用，但无法使其工作）：

```
[super viewDidLoad];
// Do any additional setup after loading the view from its nib.
NSLog(@"View did load");
//set reference to view in .nib here
UIView *currentView = self.view;

CGRect frame = [[UIScreen mainScreen] bounds];
splashView = [[splashView alloc] initWithFrame:frame];
[[self view] addSubview:splashView];
//transition did not work

[UIView transitionFromView:splashView toView:currentView duration:0.25 options:UIViewAnimationOptionTransitionCrossDissolve completion:^(BOOL finished) {
    NSLog(@"transition finished");
}];

} 
```

该代码崩溃。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:40:09.780

尝试以下代替您的原始代码：

```
[super viewDidLoad];
// Do any additional setup after loading the view from its nib.
NSLog(@"View did load");

CGRect frame = [[UIScreen mainScreen] bounds];
splashView = [[splashView alloc] initWithFrame:frame];
[[self view] addSubview:splashView];
[self.view bringSubviewToFront: splashView];

[UIView animateWithDuration: 2.0
                     delyay: 0.5 // omit if you don't need a delay
                    options: UIViewAnimationCurveEaseOut // check the documentation for other options
                 animations: ^{ 
                    splashView.alpha = 0;
                 } 
                 completion: ^(BOOL finished) {
                    [splashView removeFromSuperView];
                 }]; 
```

我不知道您是否使用 ARC，或者您是否使用情节提要！如果您注意到使用 ARC，那么此代码段中的内存管理是错误的。

# java - Java：Spring-MVC：导出和导入 Microsoft Excel 的最简单方法？

> ID：13735407
> 
> 赞同：0
> 
> 时间：2012-12-06T01:14:52.613
> 
> 标签：java, spring, excel, import, export

我正在使用 Java 6 和 Spring-MVC 3.1

导出到 Microsoft Excel（ .xls 和 .xlsx ）并从 Microsoft Excel 导入的最简单方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:24:51.597

Java 可以很好地处理 .csv 文件（microsoft excel 使用该文件）。我会将您的相关 .xls 和 .xlsx 文件转换为 .csv 文件，然后扩展如下代码：

[http://www.roseindia.net/java/examples/io/writeToFileCsv.shtml](http://www.roseindia.net/java/examples/io/writeToFileCsv.shtml)

那应该让你开始。如果您遇到困难，“从 .csv 读取/写入 java”搜索应该会让您继续前进。

# html - 如何阻止我的“身体”吃掉我的“脚”

> ID：13735410
> 
> 赞同：3
> 
> 时间：2012-12-06T01:15:23.937
> 
> 标签：html, css, footer

这是我的网站： http: [//mytestsite.nfshost.com/](http://mytestsite.nfshost.com/)。

如果您将浏览器窗口缩小，您会注意到页面的“body”标签中的内容超过了“footer”元素。相反，我希望它只是将“页脚”内容向下推而不吞噬它。

我怎么做？

以下是 HTML 和 CSS 的相关部分。

```
<html>
    <head>
        -- HEAD CONTENT HERE --
    </head>
    <body>
        <h1>U.S. Neighborhood Income Map</h1>
        <h2>See how rich or poor every part of every city in America is</h2>
        <div id="address-form-container">
            <span id="form-pretext"> Enter a city name or address and pick a state (Or just a pick a state from the dropdown).</span>
            <br>
            <input id="address" type="textbox">
            ,
            <select id="state-select">
            <input type="button" value="Search">
            <br>
            <span id="note">(NOTE: If loading takes a while, try zooming in or out.)</span>
        </div>
        <div id="map-canvas" style="position: relative; background-color: rgb(229, 227, 223); overflow: hidden;">
            -- MAP HERE --
        </div>
        <div id="below-map">
            <p id="source-note" class="italics">
        </div>
    </body>
    <footer>
        <p id="contact">Please send all questions, comments, complaints, and suggestions to [EMAIL ADDRESS]</p>
    </footer>
</html> 
```

这是相关的CSS

```
html {
    float: right;
    height: 100%;
    text-align: center;
    width: 100%;
}

body {
    background:url(./images/bg.png);
    height: 85%;
    position: relative;
    right: 8px;
    width: 100%;

}

#map-canvas {
    height: 75%;
    margin-top: 5px;
    width: 100%;
}

footer {
    margin-top: 3em;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T01:17:25.843

页脚必须在正文标签内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T01:24:27.290

使用 CSS 填充

```
footer {
    padding-top: 25px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T01:30:18.857

创建一个部门`class = "clear"`

css

```
div.clear {
     clear:both
} 
```

随着页面内容的增长，在您想要下推的任何部门上方使用它。正如亚历克斯所说，页脚也必须在正文标签中。

# xcode - PhoneGap (iOS) (xcode v.4.3.3) - 将项目构建到应用模拟器时出错

> ID：13735416
> 
> 赞同：0
> 
> 时间：2012-12-06T01:15:59.213
> 
> 标签：xcode, cordova

你好stackoverflow成员，

这是我第一次使用PhoneGap，在创建了一个项目“Hello World”并用Xcode打开它之后，当我尝试在模拟器中运行它时出现以下构建错误：

```
Unknown type name '_commandQueue'; did you mean 'CDVCommandQueue'?
Expected identifier or '('
Unknown receiver '_commandQueue'; did you mean 'CDVCommandQueue'?
No known class method for selector 'resetRequestId'
Unknown receiver '_commandQueue'; did you mean 'CDVCommandQueue'?
No known class method for selector 'fetchCommandsFromJs'
Unknown receiver '_commandQueue'; did you mean 'CDVCommandQueue'?
No known class method for selector 'dispose'
Property 'commandQueue' requires method 'commandQueue' to be defined - use @synthesize,      @dynamic or provide a method implementation in this class implementation 
```

这里有人知道如何解决这些错误吗？

我正在使用 Xcode v4.3.3 和最新版本的 PhoneGap。

感谢您的时间，

乔纳森。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:23:53.010

添加行

@synthesize commandQueue = _commandQueue;

在 __init 方法之前并重建。

# python - 如何从 Python 中的 SQLite3 数据库查询构建字典列表？

> ID：13735422
> 
> 赞同：3
> 
> 时间：2012-12-06T01:16:20.337
> 
> 标签：python, dictionary, sqlite, generator, list-comprehension

在尝试`dict`从 Python 2.x 中的 SQLite3 查询生成 s 列表时，我可以执行以下操作：

```
import sqlite3
cur = sqlite3.connect('filename.db').cursor()
query = cur.execute('SELECT * FROM A_TABLE')
colname = [ d[0] for d in query.description ]
result_list = []
for r in query.fetchall():
  row = {}
  for i in range(len(colname)):
    row[colname[i]] = r[i]
  result_list.append(row)
  del row

cur.close()
cur.connection.close()
print result_list 
```

有了这个，我尝试获取一个字典列表，每个键值对指示列名和行的分配值。

但是，尽管有效并且可以合理理解，但嵌套`for`循环让我认为可能有一个 Python 习惯用法可以简化这一点——特别是对理解的一些巧妙使用。我怀疑可能会求助于生成器，但我仍然不太了解如何使用它们。所以我问：有没有办法通过对生成器和/或字典的理解来“压缩”代码并获得预期的字典列表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T01:26:20.800

试试这个：

```
import sqlite3
cur = sqlite3.connect('filename.db').cursor()
query = cur.execute('SELECT * FROM A_TABLE')
colname = [ d[0] for d in query.description ]
result_list = [ dict(zip(colname, r)) for r in query.fetchall() ]
cur.close()
cur.connection.close()
print result_list 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T01:26:05.567

您可以用字典理解替换内部 for 循环，如下所示：

```
row = dict((colname[i], r[i]) for i in range(len(colname))) 
```

您还可以用嵌套在列表推导中的字典推导替换整个内容：

```
result_list = [dict((colname[i], r[i]) for i in range(len(colname)) for r in query.fetchall()] 
```

不过，我实际上可能会建议坚持使用外部 for 循环，因为这看起来更具可读性。另外，在我看来，这`del row`是不必要的。你不能只依赖 Python 的垃圾收集器吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-15T02:54:33.120

@David K. Hess 是对的，只是有一个错字。第三行应为：

```
query = cur.execute('SELECT * FROM A_TABLE') 
```

我不能只编辑三个字符，也没有评论的声誉。

# asp.net - Web API 路由未映射到正确的 url

> ID：13735427
> 
> 赞同：1
> 
> 时间：2012-12-06T01:16:51.740
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api, asp.net-mvc-routing

我正在尝试访问以下网址：

```
http://localhost:2727/api/SiteApi/Get?campaignId=2 
```

这是配置：

```
config.Routes.MapHttpRoute(
    name: "DetailedApi",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new { id = RouteParameter.Optional }
);
config.Routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

尝试映射到的操作

```
public class SiteApiController : ApiController
{
    ...
    public IEnumerable<Site> GetByCampaignId(int campaignId)
    {
        ...
        return sites;   
    }      
} 
```

这当前返回“未找到任何操作”。但是，如果交换路线的顺序，Url 将起作用。这意味着有一场比赛。

问：我对路由的理解是，如果不匹配第一个路由，就会回退到第二个路由。我可以理解它是否映射到错误的路线，但无论我如何订购它们，它都不应该是指示“未找到匹配”之类的错误。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T09:51:59.163

**更新**

好资源： http: [//msdn.microsoft.com/en-us/library/cc668201 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/cc668201(v=vs.100).aspx)

> 从集合中的第一个路由到最后一个路由尝试路由匹配。当匹配发生时，不再评估路由。通常，按照从最具体的路由定义到最不具体的路由定义的顺序将路由添加到 Routes 属性。

您获得“未找到操作”的原因是您的第一条路线匹配。它根本找不到动作 Get - 因为你已经命名了你的方法`GetByCampaignId`

```
http://localhost:2727/api/SiteApi/Get?campaignId=2 
```

所以您的理解是正确的 - 但是您的 URL 确实与第一条路线匹配（它只是找不到操作）。

这会将操作映射到您的方法

```
[ActionName("Get")]
public IEnumerable<Site> GetByCampaignId(int campaignId)
{

} 
```

或者只是将您的网址更改为

```
http://localhost:2727/api/SiteApi/GetByCampaignId?campaignId=2 
```

**如何为您的路线建模**

从网址中删除“获取”。

您似乎希望在查询字符串中指定campaignId。

您已经声明了没有该属性的 GetByCampaignId(intcampaignId)，`[FromUri]`因此假定该campaignId 在路径中，即，就目前而言，此方法与/api/siteapi/1 匹配。

如果campaignId 是可选的，像这样改变你的方法签名：

```
public IEnumerable<Site> GetByCampaignId([FromUri]int? campaignId = null)
{
    if(campaignId.HasValue)
    {
       //....
    }
    return sites;   
} 
```

如果campaignId 对您的路线是强制性的，请更改您的方法签名，如下所示：

```
public IEnumerable<Site> GetByCampaignId([FromUri]int campaignId)
{
    return sites;   
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T01:59:39.540

我认为你把事情复杂化了。只需使用默认路由即可。

您的 URL 不需要 Get 部分：

```
http://localhost:2727/api/SiteApi/Get?campaignId=2 
```

有可能

```
http://localhost:2727/api/SiteApi/?campaignId=2 
```

因为您的方法的名称中有 Get 这意味着它将响应 HTTP GET 请求（约定很好：[http ://www.asp.net/web-api/overview/web-api-routing-and-actions/routing -in-aspnet-web-api](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api)）。它会看到动作参数“campaignId”并说“啊哈，我会去那个动作”

```
public IEnumerable<Site> GetByCampaignId(int campaignId) 
```

当您交换路线时，默认路线启动 - 并获胜。

恕我直言，不需要额外的“DetailedApi”路线。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T01:25:53.630

我建议使用这个：

[http://nuget.org/packages/routedebugger](http://nuget.org/packages/routedebugger)

帮助调试您的路线。

我知道您没有问，但您的示例 URI 不是 RESTful。

要匹配第二条路线，您应该尝试点击此 URI：

http://localhost:2727/api/SiteApi/Get/2

您的第一个映射不应该捕获这条路线，因为没有“2”动作，它会退回到第二个映射。但是，我可以看到这会造成麻烦：我不会使用您的映射。恕我直言，您正在尝试实现与以下相同的效果：

```
 config.Routes.MapHttpRoute(
          name: "DetailedApi",
          routeTemplate: "api/{controller}/{id}/{action}",
          defaults: new { id = RouteParameter.Optional }
        );
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T10:39:29.990

感谢上面给出的所有答案。其中一些很有趣，但是，那些并不是我真正想要的。

基本上，我的问题不是我应该如何映射 URI，而是为什么它没有映射到正确的路由。幸运的是，经过一些测试，我已经找到了答案。

那么为什么“未找到任何操作”？仅仅因为它匹配了我没想到的第一条路线。因为 Id 设置为可选，所以它匹配任何带有两个参数的路由。这就是为什么“SiteAPI”映射到控制器而“Get”映射到 Action。由于campaignId 在查询字符串中，因此在这种情况下尝试映射url 时会被忽略。

我没有提到路由中的其他点点滴滴，但这应该足够了。如果您想了解更多详细信息，请参阅 Mark Jones 的回答。

# php - IN 运算符的 PHP/Mysql 问题

> ID：13735430
> 
> 赞同：1
> 
> 时间：2012-12-06T01:17:01.717
> 
> 标签：php, mysql, select

所有退回的电子邮件都会发送到我数据库中的一个表中。我正在尝试将它们与另一个表中的字段进行比较，该表中填充了我的活动电子邮件。使用以下函数，在使用“IN”时不返回任何内容，在使用“NOT IN”时返回所有内容，但我知道两个表中有匹配的电子邮件。我是不是走错路了？

```
<?php
function CompareEmails() {
    $mysqli = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);

    if ($mysqli->connect_errno) {
        echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") ";
        echo $mysqli->connect_error;
        $mysqli->close();
    }

    $bademails = array();
    $values = $mysqli->query("SELECT bad_emails.emails FROM bad_emails ");

    while ($row = $values->fetch_assoc()) {
        $bademails[] = $row['emails'];
    }

    $query = "SELECT email_database.customer_id, email_database.email 
              FROM email_database 
              WHERE email_database.email IN('" . implode("' , '", $bademails) . "') 
              ORDER BY email_database.customer_id DESC";

    $values2 = $mysqli->query($query);

    while ($row2 = $values2->fetch_assoc()) {
        echo $row2['customer_id'] . " " . $row2['email'] . "</br>";                                                                                                            
    }                                                                                                                                                                          
}                                                                                                                                                                              
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:24:27.073

您可以在这样的单个查询中更好地完成这一切：

```
SELECT e.customer_id, e.email
FROM email_database AS e
INNER JOIN bad_emails AS b ON e.email = b.emails
ORDER BY e.customer_id DESC 
```

请注意，我使用`b.emails`（复数）连接到`e.email`（单数）来匹配您在查询中显示的内容。我猜这实际上可能是您遇到的问题，如果您在 bad_emails 中没有正确引用字段名称（真的只是`email`？），您可能会得到一个空的结果集。这将导致您看到的确切 IN/NOT IN 行为。

只需更改我的查询以使用正确的名称。

# asp.net-mvc - Visual Studio 如何知道它是代码优先还是模型优先？

> ID：13735433
> 
> 赞同：0
> 
> 时间：2012-12-06T01:17:34.953
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first

在 asp.net mvc 中，Visual Studio 如何知道工作流？

或更重要的问题，我如何告诉 Visual Studio 我正在使用的工作流？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:52:34.023

如果将 EntityConnection（或 EntityConnection 字符串）传递给 DbContext，则它是模型/数据库优先的；否则，它是代码优先。

# javascript - 删除复选框的值

> ID：13735441
> 
> 赞同：0
> 
> 时间：2012-12-06T01:18:26.177
> 
> 标签：javascript, html, checkbox

我的问题是：我找到了一些代码。我该怎么做才能运行我所说的内容？我想当有人点击菜单项时，它会删除复选框值。（未选中）我的代码是这样的：

```
<html>
<head>
<title>Untitled Document</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js" type="text/javascript"></script>
<script type="text/javascript"> 

$(function(){
    $(".form-row").hide();

       $("#divListBox").find(":checked").each(function() {
   $(this).removeAttr("checked");
});

       $("#course_english").change(function() {
         if ($("#course_english").val() == "MA English") {
             $(".form-row").show();
         } else {
            $(".form-row").hide();
         }
    });
 });
</script>
</head>
<body>
<select id="course_english" class="" name="course_english"> 
    <option value="">--Select One--</option> 
    <option value="MA English">MA English</option> 
    <option value="B. A. (Hons.) with Mass Communication">B.A. (Hons.) with Mass Communication</option> 
    <option value="M. A. (English)">M. A. (English)</option> <option value="M. Phil.">M. Phil.</option> 
</select>

  <div class="form-row" id="divListBox">
    <label for="sem_1_ma_english-poetry">
      <input id="sem_1_ma_english-poetry" class="sem_1_ma_english" type="checkbox"      value="Poetry" name="sem_1_ma_english[]">
Poetry
 </label>
 <label for="sem_1_ma_english-drama">
  <input id="sem_1_ma_english-drama" class="sem_1_ma_english" type="checkbox"     value="Drama"  name="sem_1_ma_english[]">
Drama
</label>
 <label for="sem_1_ma_english-fiction">
  <input id="sem_1_ma_english-fiction" class="sem_1_ma_english" 
   type="checkbox" value="Fiction" name="sem_1_ma_english[]">
  Fiction
 </label>
 <label for="sem_1_ma_english-prose">
 <input id="sem_1_ma_english-prose" class="sem_1_ma_english" type="checkbox"      value="Prose" name="sem_1_ma_english[]">
 Prose
</label></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:27:40.647

尝试：

```
 $("#course_english").change(function() {
     if ($("#course_english").val() == "MA English") {
         $(".form-row").show();
     } else {
        $(".form-row").hide();
     }
    $("#divListBox").find(":checked").each(function() {
        $(this).prop("checked", false);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:40:20.747

试放：

```
$("#divListBox").find(":checked").each(function() {
   $(this).removeAttr("checked");
}); 
```

在 $("#course_english").change() 内，这将确保在选择值更改时取消选中每个框。

最终的 js 将是：

```
$(function(){
    $(".form-row").hide();

       $("#course_english").change(function() {
         $("#divListBox").find(":checked").each(function() {
           $(this).removeAttr("checked");
         });

         if ($("#course_english").val() == "MA English") {
             $(".form-row").show();
         } else {
            $(".form-row").hide();
         }

    });
 }); 
```

[在这里演示](http://jsfiddle.net/Gc45Z/)

# binary - 二进制补码

> ID：13735443
> 
> 赞同：1
> 
> 时间：2012-12-06T01:18:31.747
> 
> 标签：binary, int, representation, twos-complement

据我所知，二进制补码算法是：

> 1.用二进制表示十进制。
> 2.反转所有位。
> 3.最后一位加1。

对于数字`3`，它的表示是：`0000000000000011`二进制补码的结果将`1111111111111101`是`-3`。
到目前为止，一切都很好。但是对于`2`它的表示是`0000000000000010`二进制补码结果的数字将是`1111111111111101`，它不是 2 而是 -3。
我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-22T19:53:14.473

对于您的代码，您可能需要进行 2 的补码：我只是想把它扔掉（获得负二进制的**更快方法）：**

2 的补码对于查找二进制的值非常有用，但是我想到了一种更简洁的方法来解决这样的问题（从未见过其他人发布过它）：

以二进制为例： 1101 [假设空格“1”是符号]等于**-3**。

使用 2 的补码我们会这样做...将 1101 翻转到 0010...添加 0001 + 0010 ===> 给我们 0011\. 0011 正二进制 = 3。因此 1101 = **-3**！

***我意识到：***

而不是所有的翻转和添加，你可以只做解决正二进制的基本方法（比如说 0101）是 (2 ³ * 0) + (2 ² * 1) + (2 ¹ * 0) + (2 ⁰ * 1) = 5。

**用否定做完全相同的概念！（稍微扭曲）**

以 1101 为例：

对于第一个数字而不是 2 ³ * 1 = **8**，请执行 -(2 ³ * 1) = **-8**。

然后像往常一样继续，做**-8** + (2 ² * 1) + (2 ¹ * 0) + (2 ⁰ * 1) = **-3**

希望这可能会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T01:25:49.667

```
0...0010 // 2
1...1101 // Flip the bits
1...1110 // Add one 
```

它也适用于负面：

```
1...1110 // -2
0...0001 // Flip the bits
0...0010 // Add one 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T01:20:27.210

> 我究竟做错了什么？

跳过第二个示例的第 3 步（或误解它）。

`1111111111111101`是`2`（即第 1 步和第 2 步的结果）的补码；您需要添加 1 - 不是添加到最后一位（如二进制数字），而是添加到最后一个结果（如从第 2 步得到的结果）。

# matlab - 条件 if 语句中的 Matlab 错误：尝试引用非结构数组的字段

> ID：13735447
> 
> 赞同：0
> 
> 时间：2012-12-06T01:19:10.330
> 
> 标签：matlab

尝试去引用非结构数组字段。

```
Error in ==> Project_3 at 23\.             
if (alpha>=alpha_1 .and. alpha<=alpha_2)   %region from a to b 
```

我的原始代码：

```
for alpha=-90:1:90
    dum=dum+1

    if (alpha>=alpha_1 .and. alpha<=alpha_2)   %region from a to b

        [A] =gradient_linear_equation(alpha_1,alpha_2,cl_1,cl_2);
        [B] =constant_linear_equation(A,alpha_1,cl_1);
        [y] =linear_equation(A,alpha,B) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:22:27.887

我想你的意思是`&`或`&&`，不是`.and.`。我相信`.and.`是 Fortran 语法，是吗？

Matlab 中逻辑运算符的相关文档在[这里](http://www.mathworks.com.au/help/matlab/ref/logicaloperatorselementwise.html)。

顺便说一句，我可以看到该错误消息如何使您误入歧途。Matlab 用于`.`访问结构的字段，例如，`S.alpha = 1`将 a 分配给结构`1`中的字段。因此，它可能认为您正在尝试引用结构中的字段- 即使是数字矩阵 - 因此出现错误。`alpha``S``and``alpha_1``alpha_1`

# r - 在情节标题中将中文文本加粗

> ID：13735449
> 
> 赞同：1
> 
> 时间：2012-12-06T01:20:01.853
> 
> 标签：r, plot, multilingual

我正在研究多语言情节，我需要在 R 情节中绘制中文文本，这是粗体。但是当我使用 font.main=4 时，中文文本仍然不是粗体。

```
pdf(paste("./tmp/population.pdf",sep=""), width=10 , height =11,  family="GB1")
plot(x,main="中国的",cex.axis= 1, cex.lab=1.2,font.main=4)
dev.off() 
```

![在此处输入图像描述](../Images/8c8bf8af4dc738b0b303e7683a5021f9.png)

我该如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:52:50.557

正如@DWin 在评论中所建议的那样，Hei 字体系列比 GB1 更“大胆”，因此可能会奏效。它在 R 中不是默认设置，因此您必须将 Hei 字体映射到名称“Hei”才能在其中使用它，`pdf`或者您必须使用`cairo_pdf`.

使用`cairo_pdf`它很简单，您可以从字面上使用计算机上安装的任何字体库：

```
cairo_pdf("population.pdf", width=10 , height=11,  family="Hei") 
```

![在此处输入图像描述](../Images/d58fd4db133d97b88683f2986b15222c.png)

否则，要映射 Hei 字体，您需要在计算机上以格式定位字体库`afm`（为了练习，假设它是 s `~/Library/Fonts//Hei.afm`）。

```
hei <- Type1Font("Hei", c("~/Library/Fonts//Hei.afm", "", "", "")) 
# the three empty spaces would have been the place for respectively the bold, the italic and the bold italic font libraries
pdfFonts(A=hei)
pdf("population.pdf", width=10 , height=11,  family="A") 
```

# javascript - Javascript：将带有通配符的路径保存到变量中

> ID：13735454
> 
> 赞同：0
> 
> 时间：2012-12-06T01:20:27.603
> 
> 标签：javascript, regex, variables, wildcard

我想将带有通配符的路径保存到带有 JS 的变量中。路径看起来像这样：

```
09328402984923kjh234243/2/somename.xml 
```

路径的第一部分和第二部分可以更改，所以我需要在那里有一些通配符，因为文件夹名称是不可预测的。

我用 RegEx 尝试过这样的事情

```
var position = '\.?/\.?/somename.xml'; 
```

我现在一直在解决这个问题，我在stackoverflow（或其他地方）上找到的每个样本都没有涵盖我的情况。我什至不确定 RegEx 是否可以解决我的问题...是否可以将带有通配符的路径保存到变量中？如果可能的话，RegEx 是正确的方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:24:14.030

我不确定您最终要完成什么，但如果您需要“*动态替换*”字符串中的占位符，请使用 Javascripts`String.prototype.replace`方法。

例子：

```
var position = 'ph1/ph2/somename.xml';

var path_one = '09328402984923kjh234243',
    path_two = '2'; 
```

然后我们可以去

```
position = position
               .replace( 'ph1', path_one )
               .replace( 'ph2', path_two ); 
```

这将产生`09328402984923kjh234243/2/somename.xml`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T01:24:32.540

我认为您可能正在寻找的正则表达式是`^(.+?)\/(.+?)\/somename\.xml$`. 不知道你想用它做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T01:38:33.670

如果您从路径作为字符串开始，并且想要使用 JavaScript 提取两个文件夹部分，您可以这样做；

```
var path = '09328402984923kjh234243/2/somename.xml'
var regex = /[0-9a-zA-Z]*\//g

var folders = path.match(regex) 
```

然后你有`folders[0]`with the value`09328402984923kjh234243/`和`folders[1]`with the value `2/`。

正则表达式在末尾使用[`g`修饰符进行全局匹配并选择所有匹配项。](http://www.w3schools.com/jsref/jsref_regexp_g.asp)它目前也只会匹配文件夹名称中的字母数字字符。

# c++ - 使用 C++ 模板时对复制构造函数的未定义引用

> ID：13735457
> 
> 赞同：0
> 
> 时间：2012-12-06T01:20:32.400
> 
> 标签：c++, templates, linker-errors

> **可能重复：**
> [为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

我正在尝试练习 C++ 模板，在这样做的同时，g++ 给了我以下链接器错误：

```
g++ main.o list.o -o app
main.o: In function `main':
main.cpp:(.text+0x27): undefined reference to `List<int>::List(List<int> const&)'
collect2: ld returned 1 exit status
make: *** [app] Error 1 
```

我尝试在我的主要内容中执行以下操作：

```
#include "List.h"

int main() {
    List<int> a;
    List<int> b(a);
    return 0;
} 
```

而我的 List.h 看起来像：

```
#ifndef LST_H
#define LST_H

template <typename T>
class List {
    public:
    template <typename TT> class Node;
    private:
    Node<T> *head;
    public:
    List() { head = new Node<T>; }
    ~List() { delete head; }
    List( const List &l );

    template <bool DIM> class iterable_frame;
    template <bool DIM> class supervised_frame {
        iterable_frame<DIM> sentinels;
        iterable_frame<DIM> data;
        bool sentinel_completeness;

        public:
        supervised_frame( const List& );
        ~supervised_frame() {}
        void copy_sentinels( iterable_frame<DIM>& );
        void copy_cells( iterable_frame<DIM>& );
    };
    template <bool DIM> class iterable_frame {
        Node<T> *head;
        Node<T> *caret;

        public:
        iterable_frame( const List& );
        ~iterable_frame() {}
        inline bool end() { return head == caret; }
    };
    template <typename TT> class Node {
        unsigned index[2];
        TT num;
        Node<TT> *next[2];
        public:
        Node( unsigned x = 0, unsigned y = 0 ) { index[0]=x; index[1]=y; next[0] = this; next[1] = this; }
        Node( unsigned x, unsigned y, TT d ) { index[0]=x; index[1]=y; num=d; next[0] = this; next[1] = this; }
        ~Node() {}
        friend class List;
    };
};

#endif 
```

和我的 List.cpp 一样：

```
#include <iostream>
#include "List.h"

template <typename T>
List<T>::List( const List<T> &l ) {
    head = new Node<T>;
    iterable_frame<1> in(l);
    supervised_frame<1> out(*this);
}

template <typename T> template <bool DIM>
List<T>::supervised_frame<DIM>::supervised_frame( const List<T> &l  ) {
    std::cout << DIM << std::endl;
}
template <typename T> template <bool DIM>
void List<T>::supervised_frame<DIM>::copy_sentinels( iterable_frame<DIM>& ) {}
template <typename T> template <bool DIM>
void List<T>::supervised_frame<DIM>::copy_cells( iterable_frame<DIM>& ) {}

template <typename T> template <bool DIM>
List<T>::iterable_frame<DIM>::iterable_frame( const List<T> &l ) {
    std::cout << '\t' << DIM << std::endl;
} 
```

该代码仍然类似于草稿，但我将解释一下我的意图。背后的想法是我想要一个可以充当稀疏矩阵的类 List，所以我制作了第一个模板来轻松地在存储的数字类型（int、float 等）之间切换。然后我创建了两个辅助迭代器类来处理元素，它们也由模板实现，因为迭代的方向可以是双重的——按列或按行，不同的矩阵方法会选择一个最适合它们的方法. 该列表将是一个二维环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:21:48.247

您在类定义中声明的唯一复制构造函数是：

```
List( const List &l ); 
```

并且它没有**可见**的实现（作为模板和所有），因此错误。将实现移动到标题。

# jquery - 使用ajaxful-rating /原型与jquery在rails中评分

> ID：13735459
> 
> 赞同：0
> 
> 时间：2012-12-06T01:21:12.727
> 
> 标签：jquery, ruby-on-rails, ajax

一定很晚了，因为我不知道去这里的最佳方式是什么。

我发现 ajaxful-rating gem 可能是我需要的，我真的很想开始，但后来我被另外 2 个 gema 弄糊涂了，它们是 Ajaxful-rating 的 JQuery 实现：

[http://rubygems.org/gems/jquery-star-rating-rails](http://rubygems.org/gems/jquery-star-rating-rails) 和 [https://github.com/mbchandar/jqrating](https://github.com/mbchandar/jqrating)

...好吧，我没有足够的背景来理解这意味着什么...但是有些事情告诉我，使用 JQuery 与 Prototype 有一些关系。所以我假设 ajaxful-rating 可能正在使用原型（？）。

由于 Rails 3.1 默认使用 JQuery，并且知道我也在使用使用 JQuery 的 Twitter Bootstrap，我只是担心如果安装 ajax-ful-rating 我可能会弄乱我当前的环境。

问题 1：ajaxful 评级是否使用原型？

问题2：我应该担心吗？或者我可以安装它还是会遇到问题？

问题 3：ajaxful-rating 的 jquery 实现是更好的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:21:43.330

`'letsrate'`如果您改用gem ，我可以建议更好`ajaxful-rating`。

看看下面的链接。
[https://github.com/muratguzel/letsrate](https://github.com/muratguzel/letsrate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T23:43:02.937

试试，在你的 Gemfile 中：

```
gem 'ajaxful_rating', :git => 'git://github.com/edgarjs/ajaxful-rating.git', :branch => "rails3" 
```

它是 Rails 3 版本。

Letsrate 是一个不错的 gem，但与 ajaxful-rating 相比，它的助手功能非常弱。

# android - Android：如何在一个活动中播放视频并显示相机预览？

> ID：13735461
> 
> 赞同：0
> 
> 时间：2012-12-06T01:21:25.777
> 
> 标签：android, video, camera, playback

如何在一项活动中播放视频并显示相机预览？这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:26:33.527

您可以通过构建一个[自定义相机应用程序](http://developer.android.com/guide/topics/media/camera.html#custom-camera)来做到这一点，该应用程序将相机的预览输出通过管道[`SurfaceView`](http://developer.android.com/reference/android/view/SurfaceView.html)传输到 .，您还需要[`VideoView`](http://developer.android.com/reference/android/widget/VideoView.html)在播放视频的窗口中有一个单独的窗口。

确保注意将这些分层，因为`VideoView`s 在下面使用`SurfaceView`s，并且多个`SurfaceView`s 在彼此之上不能很好地发挥作用。

# ruby - 我可以在不使用测试框架的情况下使用 Factory Girl 或一些相关的 gem 吗？

> ID：13735467
> 
> 赞同：0
> 
> 时间：2012-12-06T01:22:33.513
> 
> 标签：ruby, factory-bot

我还没有做 TDD，但我希望能够在我的数据库中创建“虚拟数据”。

据我了解，工厂女孩是做到这一点的完美宝石。

查看文档，似乎与 RSpec 和其他测试框架紧密耦合。

我可以使用 Factory Girl 来填充虚拟数据而无需编写测试吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:31:38.717

绝对地。只需`factory_girl_rails`在您的 Gemfile 中包含您的测试组之外的内容，然后您就可以在任何地方愉快地使用它。

不过，我不建议您在开发或测试之外的应用程序中使用它。

# android - Android 中的加泰罗尼亚语和巴斯克语资源

> ID：13735468
> 
> 赞同：12
> 
> 时间：2012-12-06T01:22:46.837
> 
> 标签：android, localization

当您想在 Android 中添加特定于语言环境的资源时，您必须将语言的小写 ISO-3166-1 代码添加到资源文件夹的名称中。到目前为止，一切都很好。

现在我想将[加泰罗尼亚语](http://en.wikipedia.org/wiki/Catalan_language)和[巴斯克语](http://en.wikipedia.org/wiki/Basque_language)字符串添加到我的应用程序中。根据 ISO 列表，我必须添加`values-ca`和`values-eu`. 但这真的有用吗？

**编辑：**在您的应用程序中使用自定义语言选择器，您可以提供对语言的支持，即使它们不在设备的设置菜单中。我已经在 GitHub 上提供了用于此目的的库： [https ://github.com/delight-im/Android-Languages](https://github.com/delight-im/Android-Languages)

我不知道 Android 是否支持所有 ISO 代码，以及是否会显示这些“次要”语言。如果 Android 在这些语言中不可用，则设备可能甚至不会将此语言识别为其默认语言环境，而仅`es`用于西班牙语。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T11:21:57.640

许多设备在设置菜单中提供有限的语言选择，但实际上可以使用诸如[LocaleSwitch 之](https://play.google.com/store/apps/details?id=com.aokabi.android.localeswitch)类的应用程序设置为任何系统区域设置。

通过在 LocaleSwitch 中添加自定义语言环境，然后添加资源文件夹以查看系统是否自动从该文件夹加载资源，应该很容易测试是否支持巴斯克语。

[最后，Gingerbread 对加泰罗尼亚语的“支持”可能只引用了自 2.3 以来包含的 android.R 值，尽管我在框架存储库](https://github.com/android/platform_frameworks_base/tree/master/core/res/res/)中看不到它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-03T15:59:17.043

我们现在可以创建我们的“values-eu-rES”文件夹并在巴斯克语中使用我们的应用程序，Android Lollipop 已经成功了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T11:17:44.047

问题是，如果设备上的语言选择列表中没有列出该语言，则资源将永远无法使用，因为用户永远无法将设备置于此配置中。

另一方面，如果设备允许您选择巴斯克语，它将使用这种格式，并且将使用您的资源。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T11:14:33.173

实际上，并非所有语言都记录在 Android 文档中，并且许多品牌都使用了您的自定义 Android 版本，这可能会更改其列表，但请确保如果设备支持加泰罗尼亚语和/或巴斯克语，它将使用 ISO 标准，并且这些值会正确因为它是通过字符串比较转换的。

如果您发现大多数设备在您的测试中都没有这种支持，那么放置手动更换器可能是一个不错的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-05T09:10:09.273

我们可以创建一个文件夹

巴斯克语字符串 -> value-eu [巴斯克语]

另一个文件夹

加泰罗尼亚语字符串 -> value-ca [加泰罗尼亚语]

[![在此处输入图像描述](../Images/5382b3550cfd90b97fbd12f05c928f7b.png)](https://i.stack.imgur.com/JqS5g.png)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-02-06T15:46:48.300

在 LocaleSwitch 中添加新语言，您需要键入 ISO 639-1 代码。例如，如果您想切换到巴斯克语，您需要输入“eu”。之后，您将看到新的语言环境为“vasco”。

这让我觉得android支持巴斯克语言环境。

# java - 我在哪里可以从 Twitter 搜索返回的 HttpClient 获取 http 响应代码？

> ID：13735471
> 
> 赞同：1
> 
> 时间：2012-12-06T01:23:16.870
> 
> 标签：java, android, twitter, twitter4j

我正在调用 Twitter 搜索并获得 JSON 响应。我的理解是，如果超过 twitter 请求限制，这将在 HttpResponse 代码中报告。发出请求后，如何从 HttpClient 类中获取响应代码？

还有谁知道这是否实际上是 twitter 报告超出速率限制的方式？

```
 import org.apache.http.client.HttpClient;
            import org.apache.http.client.ResponseHandler;
            import org.apache.http.client.methods.HttpGet;
            import org.apache.http.impl.client.BasicResponseHandler;
            import org.apache.http.impl.client.DefaultHttpClient;

    HttpGet get = new HttpGet(searchUrl); 
    ResponseHandler<String> responseHandler = new BasicResponseHandler();
    String responseBody = null;
    try{
        responseBody = client.execute(get, responseHandler);
                    // How can I get HTTP response code?
    }
    catch(Exception ex) 
    {
        ex.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T01:25:20.050

根本不要使用响应处理程序——您可以使用以下方法从普通`HttpResponse`实例中获取状态代码`HttpResponse#getStatusLine()`：

```
HttpGet get = new HttpGet(searchUrl); 
ResponseHandler<String> responseHandler = new BasicResponseHandler();
HttpResponse response = client.execute(get);
int statusCode = response.getStatusLine().getStatusCode(); 
```

推荐阅读：

*   [`HttpResponse`](http://developer.android.com/reference/org/apache/http/HttpResponse.html)
*   [`StatusLine`](http://developer.android.com/reference/org/apache/http/StatusLine.html)

* * *

**注意**，当[`BasicResponseHandler`](http://developer.android.com/reference/org/apache/http/impl/client/BasicResponseHandler.html)返回 a`String`而不是抛出异常时，这意味着响应代码是 a `2xx`（即`200 <= code < 300`）。

# android - 适合所有方向的设计布局

> ID：13735473
> 
> 赞同：1
> 
> 时间：2012-12-06T01:23:21.380
> 
> 标签：android, xml, background, android-linearlayout

看看我的图片，我想设计这样的布局。看看我下面的 XML 代码，我已经设计了它，但是当我将它旋转到横向时，按钮不适合商店区域（短）并且图像价格区域中的线性布局超出边界（更长）。我希望它适合所有方向。为什么我使用按钮？因为当我务实时，我可以将它用作 onClickListener

1.  如何设计此布局以适应所有方向？

2.  有任何方法可以使用 XML 代码设计此布局（不使用背景图片）

![在此处输入图像描述](../Images/046269100ae01b9d9d9e15879fee07fe.png)

```
 <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:background="@drawable/bar_all"
    android:gravity="center_vertical"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <Button
            android:id="@+id/btn_all"
            android:layout_width="265dp"
            android:layout_height="match_parent"
            android:background="#00000000" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:gravity="center_vertical"
            android:orientation="vertical" >

            <ImageButton
                android:id="@+id/btn_ic_mypage"
                android:layout_width="30dp"
                android:layout_height="30dp"
                android:layout_gravity="right"
                android:layout_marginRight="12dp"
                android:background="#00000000"
                android:scaleType="fitXY"
                android:src="@drawable/icon_mypage" />
        </LinearLayout>
    </LinearLayout>
</LinearLayout> 
```

1.  位置背景图像的线性布局
2.  放置按钮的线性布局覆盖商店区域。轻松编码 onClickListener
3.  Linea Layout 用于覆盖$图像区域并放置图像区域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:16:49.950

这是您要查找的代码..

```
Also PL make sure you should avoid any length, height, width value is 20 dp,13 dp etc 
```

此代码适用于所有屏幕尺寸。

**主要的.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="top">
    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/background_main"
        android:gravity="right|center_vertical">
        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:id="@+id/linearLayout3"
            android:orientation="vertical"
            android:layout_weight="1"
            android:gravity="center">
            <Button
                android:layout_height="match_parent"
                android:id="@+id/button_shop"
                android:layout_width="match_parent"
                android:background="@null"></Button>
        </LinearLayout>
        <LinearLayout
            android:id="@+id/linearLayout2"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:orientation="vertical"
            android:gravity="center">
            <Button
                android:background="@drawable/button"
                android:id="@+id/button_doller"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"></Button>
        </LinearLayout>
    </LinearLayout>
</LinearLayout> 
```

**MainActivity.java**

```
public class MainActivity extends Activity implements OnClickListener {

    private Button btnShop = null;
    private Button btnDoller = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        btnShop = (Button) findViewById(R.id.button_shop);
        btnShop.setOnClickListener(this);

        btnDoller = (Button) findViewById(R.id.button_doller);
        btnDoller.setOnClickListener(this);

    }

    @Override
    public void onClick(View v) {
        if (btnShop == v) {
            Toast.makeText(this, "shop button clicked", Toast.LENGTH_LONG)
                    .show();
        } else if (btnDoller == v) {
            Toast.makeText(this, "doller button clicked", Toast.LENGTH_LONG)
                    .show();
        }

    }
} 
```

PS：如果您将图像变小然后创建更大的图像大小图标，我只使用了虚拟。

希望能帮助到你！！

# javascript - jquery scrollToFixed 在到达页面顶部时停止

> ID：13735479
> 
> 赞同：1
> 
> 时间：2012-12-06T01:24:04.887
> 
> 标签：javascript, jquery, html, css, css-position

jquery scrollToFixed 在到达页面的最顶部时停止，它只出现在应该固定在最顶部的 div 的顶部。

[这是我到目前为止所拥有的](http://jsfiddle.net/rapwaydown/7MPgU/2/)。

```
var arr = new Array();
$('div[id^="post"]').each(function()
{
   // do something with it...
    var id = $(this).attr("id").slice(5);
    //alert(id);

    arr.push(id);

   $(this).css('background-color', 'green');
});

     for (i = 0; i < $('div[id^="post"]').length; i++) {
      //alert(arr[i+1]);

            $('#float-'+arr[i]).scrollToFixed({
        limit: $('#post-'+arr[i+1]).offset().top - $('#float-'+arr[i]).height()-220
    });
    }​ 
```

我正在使用 jquery scrollToFixed 插件。

我试图在 9gag.com 上实现相同的效果，在屏幕上向下滚动多个侧边栏 div，[我得到了这个想法](http://jsfiddle.net/y3qV5/769/)。

当您滚动页面时，右侧 div 应该固定，直到到达左侧 div 的末尾，但由于某种原因，右侧 div 固定在页面的最顶部，我有顶部（广告和导航）div一直设置为固定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:43:58.387

如果我理解正确，那么会发生什么。jQuery 插件 (scrollToFixed) 不知道您希望元素位于另一个元素之下，因此您必须自己做。

最简单的方法是给#float-63（imo不是一个很好的ID）一个margin-top，它等于它应该位于下面的元素的高度。70px 似乎工作正常。

这样做的问题是，即使它*没有*“固定”，它也会有 70px 的 margin-top。插件在修复时似乎没有向元素添加任何类型的类，但如果你知道 jQuery，那应该很容易添加。

然后你可以简单地做`#float-63.scroll-to-fixed {margin-top: 70px}`

# arrays - 在 Perl 中保留使用 Tree::Trie 找到的关键字的顺序

> ID：13735487
> 
> 赞同：3
> 
> 时间：2012-12-06T01:24:49.333
> 
> 标签：arrays, perl, tree

我正在使用该[`Tree::Trie`](https://metacpan.org/module/Tree%3a%3aTrie)模块来构建关键字树。我想按原始数组中的顺序打印数组的元素。

```
use strict;
use warnings;

use Tree::Trie;

my @ar = ('foo', 'great','food', 'banana','apple', 'fish');

my ($trie) = new Tree::Trie;
$trie->add(@ar);
my @ms  = $trie->lookup('f');
print join(",", @ms); 
```

输出是

```
fish,foo,food 
```

期望的输出

```
foo,food,fish 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T02:32:03.387

另一种选择是使用`Tree::Trie`'s `add_data`，它会将您的话与订单数据一起使用，如下所示：

```
'foo' => 0,'great' => 1,'food' => 2,'banana' => 3,'apple' => 4,'fish' => 5 
```

并在 a 之后返回带有相关数据的单词`lookup_data`。然后可以使用该数据来保留原始词序：

```
use strict;
use warnings;
use Tree::Trie;

my @ar = qw( foo great food banana apple fish );

my $trie = Tree::Trie->new();
$trie->add_data( map { $ar[$_] => $_ } 0..$#ar );

my %ms = $trie->lookup_data('f');
my @ms = sort { $ms{$a} <=> $ms{$b} } keys(%ms);
print(join(',', @ms), "\n"); 
```

输出：

```
foo,food,fish 
```

# objective-c - GKTurnBasedMatch endTurnWithNextParticipants:turnTimeout:matchData:completionHandler 的问题：

> ID：13735495
> 
> 赞同：10
> 
> 时间：2012-12-06T01:25:26.930
> 
> 标签：objective-c, ios, gamekit

我正在使用 GKTurnBasedMatch 制作 iphone 游戏。首先，我创建游戏并邀请几个玩家。

我用 endTurnWithNextParticipants:turnTimeout:matchData:completionHandler: 结束第一个玩家转好，然后转到第二个玩家。

当第二个玩家轮到他，更新比赛数据并更新下一个参与者时，他尝试调用相同的 endTurnWithNextParticipants:turnTimeout:matchData:completionHandler:，但是我得到一个错误。

GKErrorDomainCode = 17 "请求的操作无法完成，因为一个或多个参数无效"

nextParticipants 的数组似乎很好。我所做的只是将当前玩家放在参与者数组的末尾，turnTimeOut 似乎很好，我做的和第一次一样，matchdata 也应该没问题。

有什么我想念的吗？我唯一能想到的就是我没有正确地接受比赛的邀请或类似的事情。但是，我不清楚文档。

我一直在尝试调试这个几个小时。

我将不胜感激您能给我的任何帮助！太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:34:21.030

我遇到了同样的问题（或至少类似的问题），但找到了解决方法。您收到的对象（游戏数据）不应像馅饼一样被传递。在我的项目中，我需要获取数据，将它们转换为游戏对象，用处理过的数据对其进行处理，然后将其转换回数据包，然后将其发送给下一个玩家。

对我来说，这是您可以安全地处理数据而不改变原始来源的唯一方法。

祝你好运，希望它有所帮助。

# wolfram-mathematica - 在 Mathematica 中将文本选择括在括号中

> ID：13735497
> 
> 赞同：4
> 
> 时间：2012-12-06T01:25:38.107
> 
> 标签：wolfram-mathematica

有没有办法在 Mathematica 笔记本中选择一些文本，然后用括号括起来？

例如，如果我在笔记本中键入以下内容：

```
1, 2, 3, 4 
```

我希望能够选择所有文本，然后键入命令以插入匹配的大括号（`alt-}`在 linux 上），它将选择包含在大括号中。

```
{1, 2, 3, 4} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T10:50:20.587

以下函数添加了一个命令，该命令基本上可以满足您的要求。

如所写，它采用 Control+U 组合键（通常是“下划线”）。你可以很简单地改变它。它还在“插入”菜单中添加了一个名为“制作列表”的项目，但我想你只会使用组合键。

此修改仅在当前会话中持续存在，但您可以将该函数添加到 init 文件以在启动时加载。还有其他永久添加功能的方法，例如通过编辑 KeyEventsTranslations 文件，如此[处](https://mathematica.stackexchange.com/a/6227/363)。）

一旦你运行了实现函数，它就可以用 Control+U 来执行。

```
FrontEndExecute[
 FrontEnd`AddMenuCommands["DuplicatePreviousOutput",
  {Delimiter, MenuItem["Make List",
    FrontEnd`KernelExecute[
     nb = SelectedNotebook[];
     sel = NotebookRead[nb];
     NotebookWrite[nb, Cell[BoxData[RowBox[{"{", sel, "}"}]]]]],
    MenuKey["u", Modifiers -> {"Control"}], 
    System`MenuEvaluator -> Automatic]}]] 
```

输入并选择：1、2、3、4

控制+U

> {1、2、3、4}

**附录**

这是您可以使用的版本，而不是您的 MenuSetup 修改。它设置为在“{”键按下时激活，并将包装选择或仅匹配大括号。将它放入 MenuSetup 并不是那么简单。我会通过从 MenuSetup 调用外部程序来做到这一点`KernelExecute`。将下面的代码放在 init 文件中同样有效。

```
FrontEndExecute[
 FrontEnd`AddMenuCommands[
  "DuplicatePreviousOutput", {Delimiter, MenuItem["Make List",
    FrontEnd`KernelExecute[
     nb = SelectedNotebook[];
     sel = NotebookRead[nb];
     If[sel === {},
      FrontEndExecute[FrontEndToken["InsertMatchingBraces"]],
      NotebookWrite[nb, Cell[BoxData[RowBox[{"{", sel, "}"}]]]]]],
    MenuKey["{", Modifiers -> {}],
    System`MenuEvaluator -> Automatic]}]] 
```

# c - fork/exec/waitpid 问题

> ID：13735501
> 
> 赞同：5
> 
> 时间：2012-12-06T01:25:59.370
> 
> 标签：c, exec, fork, execvp, waitpid

我试图通过检查 waitpid() 的结果来确定执行是否失败。但是，即使我运行一个我知道失败的命令并将问题写入 stderr，下面的检查也不会注册。这段代码可能有什么问题？

谢谢你的帮助。

```
pid_t pid;  // the child process that the execution runs inside of.
int ret;      // exit status of child process.

child = fork();

if (pid == -1)
{
   // issue with forking
}
else if (pid == 0)
{
   execvp(thingToRun, ThingToRunArray); // thingToRun is the program name, ThingToRunArray is
                                        //    programName + input params to it + NULL.

   exit(-1);
}
else // We're in the parent process.
{
   if (waitpid(pid, &ret, 0) == -1)
   {
      // Log an error.
   }

   if (!WIFEXITED(ret)) // If there was an error with the child process.
   {

   }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T01:29:43.290

`waitpid`仅在发生错误时返回 -1 `waitpid`。也就是说，如果你给它一个不正确的 pid，或者它被中断等。如果孩子有一个失败的退出状态，waitpid 将成功（返回 pid）并设置`ret`为反映孩子的状态。

要确定孩子的状态，请使用`WIFEXITED(ret)`和`WEXITSTATUS(ret)`。例如：

```
if( waitpid( pid, &ret, 0 ) == -1 ) {
  perror( "waitpid" );
} else if( WIFEXITED( ret ) && WEXITSTATUS( ret ) != 0 ) {
    ; /* The child failed! */
} 
```

# windows-phone-7 - PC和WP7图片下载区别

> ID：13735502
> 
> 赞同：2
> 
> 时间：2012-12-06T01:26:04.170
> 
> 标签：windows-phone-7, download, image

在 WP7 中，我尝试从 yahoo 下载图形，例如：

[http://chart.finance.yahoo.com/z?s=PLX12.NYM&t=1d&q=l&l=on&z=m&a=v&p=s](http://chart.finance.yahoo.com/z?s=PLX12.NYM&t=1d&q=l&l=on&z=m&a=v&p=s)

在我的 PC 上它按预期工作，但在我的 Windows 手机上却没有，如果我在我的应用程序中执行它或直接在 WP7 浏览器中执行它没有区别。您可以自己尝试一下。在 WP7/8 模拟器上它有时可以工作，但并非总是如此。似乎在 WP7 中，参数的解释与我的 PC 上的不同。有人知道这是什么原因吗？

感谢帮助

饭能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:37:57.623

我很快把它放在一起，它在我的 Win8 模拟器和我的 Windows Phone 7.1 上运行。只需要设置用户代理来欺骗雅虎认为我们是桌面;）

```
public void LoadImage(Image imageControl, string imageUrl)
{
    WebClient client = new WebClient();
    client.Headers["UserAgent"] = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)";
    client.OpenReadCompleted += new OpenReadCompletedEventHandler(OpenReadCompleted);
    client.OpenReadAsync(new Uri(imageUrl, UriKind.Absolute)); 
}

private void OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
{
    BitmapImage image = new BitmapImage();  
    image.SetSource(e.Result);
    imageControl.Source = image;
} 
```

然后，您可以使用图像控件（在您的页面上）和 url 从任何地方调用该函数。我使用了这个，因为你的似乎无效： [http ://chart.finance.yahoo.com/z?s=MSFT&t=1d&q=l&l=on&z=m&a=v&p=s](http://chart.finance.yahoo.com/z?s=MSFT&t=1d&q=l&l=on&z=m&a=v&p=s)

编辑：从 lambda 表达式中删除了完整的函数并赋予了它自己的函数。少了很多懒惰。

# c++ - C++ 头文件相互引用的神秘编译器错误

> ID：13735514
> 
> 赞同：2
> 
> 时间：2012-12-06T01:26:54.067
> 
> 标签：c++, visual-c++

好吧，这难倒我。相对 C++ 菜鸟，但长期使用 C# 和其他语言。

这是问题文件的一个相对简单的提炼：

```
/* GameObject.h */
#pragma once
#include <vector>
class GameObject {
    public:
    std::vector<Component *> *Components;
    GameObject();
    ~GameObject();
};

/* GameObject.cpp */
#include "GameObject.h"
#include "Component.h"
GameObject::GameObject() {
}

GameObject::~GameObject() {
}

/* Component.h */
#pragma once
class Component {
    public:
    GameObject *Owner;
    Component();
    ~Component();
};

/* Component.cpp */
#include "GameObject.h"
#include "Component.h"
Component::Component() {
}
Component::~Component() {
} 
```

这会在 Visual C++ 2012 中产生 21 个完全不相关的错误，我猜是因为它无法编译组件：

```
C2065: 'Component' : undeclared identifier  gameobject.h    10
C2059: syntax error : '>'   gameobject.h    10
C2143: syntax error : missing ';' before '}'    gameobject.h    14
C2143: syntax error : missing ';' before '{'    component.h 3
C2143: syntax error : missing ';' before '}'    component.h 11
C2143: syntax error : missing ';' before '{'    gameobject.cpp  8
C2143: syntax error : missing ';' before '}'    gameobject.cpp  9
C2143: syntax error : missing ';' before '{'    gameobject.cpp  13
C2143: syntax error : missing ';' before '}'    gameobject.cpp  14
C2143: syntax error : missing ';' before '}'    gameobject.cpp  16
C1004: unexpected end-of-file found gameobject.cpp  16
C2065: 'Component' : undeclared identifier  gameobject.h    10
C2059: syntax error : '>'   gameobject.h    10
C2143: syntax error : missing ';' before '}'    gameobject.h    14
C2143: syntax error : missing ';' before '{'    component.h 3
C2143: syntax error : missing ';' before '}'    component.h 11
C2653: 'Component' : is not a class or namespace name   component.cpp   8
C2143: syntax error : missing ';' before '{'    component.cpp   8
C2143: syntax error : missing ';' before '}'    component.cpp   9
C2653: 'Component' : is not a class or namespace name   component.cpp   13
C1903: unable to recover from previous error(s); stopping compilation   component.cpp   13 
```

有任何想法吗？在设计中 Component 有一个指向 GameObject 的指针，而 GameObject 有一个指向 Components 的指针向量是有意义的，所以我不打算重新架构以避免这种情况。我猜我只是对头文件做错了。

提前感谢您的任何想法，这让我发疯了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:43:48.607

您需要解决的只是添加前向声明 - 在 GameObject 定义之前添加组件，反之亦然

```
class GameObject;
class Component {
... 
```

和

```
class Component;
class GameObject{
... 
```

从技术上讲，您只需要第二个，因为您订购 .h 文件的方式。但最好同时添加两者。

这样做的**原因**是因为如果我们将您`.h`视为独立的 C++ 文件，当我们（编译器）遇到指针向量的定义时`Component`（为什么这是指向向量的指针？？），我们仍然没有想法是什么`Component`。它可能是一个类，一个函数，一个错字，任何东西。这就是为什么你需要一个前向声明来让编译器知道它是一个类。

这仅适用于指向其他类的指针/引用。如果它是一个`Component`对象向量，您将别无选择，只能在定义之前包含标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T01:39:24.570

在 #pragma once 之后，在顶部放置一个前向声明 Component，就像这样......

```
class Component; // Just this, no more. 
```

可能仍然存在错误，但这是一个开始。

我建议您将 GameObject.h 和 Component.h 合并到一个文件中。它们紧密相连，因此它们属于一起。

# java - 使用限制器后继续从字符串中读取

> ID：13735515
> 
> 赞同：0
> 
> 时间：2012-12-06T01:26:56.730
> 
> 标签：java, java.util.scanner

我的问题可能根本不能很好地解释这个问题，但我遇到的是我能够得到一个“盒子”的字符串的第一行，如这里的示例所示：[https ://docs.google .com/open?id=0B_ifaCiEZgtcVUx3c2c1VWs2NEE](https://docs.google.com/open?id=0B_ifaCiEZgtcVUx3c2c1VWs2NEE)

这是我现在的主要代码：

```
import java.util.Scanner;
import static java.lang.System.*;

public class LineBreaker
{
 private String line;
 private int breaker;

public LineBreaker()
{
this("",0);
}

 public LineBreaker(String s, int b)
  {
   line = s;
   breaker = b;
  }

public void setLineBreaker(String s, int b)
{
    line = s;
    breaker = b;
}

public String getLine()
{
    return line;
}

public String getLineBreaker()
{
    String box ="";
    Scanner scan = new Scanner(line);
    //scan.useRadix(breaker);
    //while (scan.hasNext()){
        for(int i = 0; i < breaker; i++){
        box += scan.next();

    }box += "\n";
    //}

    return box;
}

public String toString()
{
    return line + "\n" + getLineBreaker();
}
} 
```

它是相关的跑步者类：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.Scanner;
import static java.lang.System.*;

public class Lab12f
 {
  public static void main(String args[]) throws IOException
  {
   LineBreaker test = new LineBreaker("1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9", 4);
    out.println(test);

    test.setLineBreaker("t h e b i g b a d w o l f h a d b i g e a r s a n d t e e t h", 2);
    out.println(test);

    test.setLineBreaker("a c o m p u t e r s c i e n c e p r o g r a m", 7);
    out.println(test  );

    test.setLineBreaker("i a m s a m i a m", 2);
    out.println(test);

}
} 
```

目前我的输出是这样的：

1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9

1234

thebig badwolfhadbigea rsand 牙齿

th

计算机科学计划

计算机

伊斯兰教义

我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:33:34.770

您的问题在此代码块中：

```
public String getLineBreaker() {
  String box ="";
  Scanner scan = new Scanner(line);
  //scan.useRadix(breaker);
  //while (scan.hasNext()){
      for(int i = 0; i < breaker; i++){
      box += scan.next();

  }box += "\n";
  //}
} 
```

您永远不会告诉程序在读取到第一个中断后继续读取该行。

### 编辑

好的。不要使用`scan.useRadix(breaker)`. 这不适用——`useRadix()`告诉编译器解析数字的基数。

你在`while`循环的正确轨道上。但是，如果您取消注释它，它会引发错误。这是扫描仪正在寻找行中的下一个元素但没有的时候。在阅读之前检查是否有剩余元素...

还有一个来自个人经验的提示：当你有问题时与你的教授会面可以让世界变得不同......这**是**一个提问的地方（我不是说你这样做是错误的），但我会说你的教授比我更了解你。

# java - 如何找到数组元素的索引？

> ID：13735521
> 
> 赞同：0
> 
> 时间：2012-12-06T01:27:38.203
> 
> 标签：java, indexing

我有这个类，它在首选输入后显示数组的值：

```
class MyArrayList {

private int [] myArray;
private int size;

public MyArrayList (int value, int seed, int inc){

    myArray = new int [value];
    size = value;
    for (int i = 0; i < size; i++) {
        myArray [i] = seed;
        seed += inc;        
    }       
}   

}

public class JavaApp1 {

    public static void main(String[] args) {
        MyArrayList a = new MyArrayList(5, 2, 1);
        a.printList();

}
} 
```

这个程序显示输出： 2 3 4 5 6 现在我想找到 4 的索引，所以这将是 2 但我怎样才能将它放入程序中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:37:13.953

循环获取值，然后你有索引，你可能希望它作为 MyArrayList 类的函数

```
 int[] myArray = {2,3,4,5,6};
    for (int i = 0; i < myArray.length; i++) 
    {
        if( myArray[i] == 4 )
            System.out.println( "index=" + i);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T01:52:15.010

Java 最好的部分之一是它是开源的，您可以查看所有标准 API 的源代码。

这就是 ArrayList.indexOf(Object) 方法的工作原理：

```
/**
 * Returns the index of the first occurrence of the specified element
 * in this list, or -1 if this list does not contain the element.
 * More formally, returns the lowest index <tt>i</tt> such that
 * <tt>(o==null&nbsp;?&nbsp;get(i)==null&nbsp;:&nbsp;o.equals(get(i)))</tt>,
 * or -1 if there is no such index.
 */
public int indexOf(Object o) {
if (o == null) {
    for (int i = 0; i < size; i++)
    if (elementData[i]==null)
        return i;
} else {
    for (int i = 0; i < size; i++)
    if (o.equals(elementData[i]))
        return i;
}
return -1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T01:32:53.353

您需要在您的`MyArrayList`类中编写一个方法来获取您要查找的值，并将其定位在数组中。要找到它，只需遍历数组，直到值匹配。

像这样的东西...

```
public int findIndexOf(int value){
    for (int i=0; i<size; i++) {
        if (myArray[i] == value){
            return i;
        }
    }    
    return -1; // not found   
} 
```

现在你需要在你的`JavaApp1`类中调用这个新方法，它应该返回索引。

# bash - 终端中的for循环

> ID：13735524
> 
> 赞同：0
> 
> 时间：2012-12-06T01:27:45.150
> 
> 标签：bash, shell, for-loop, zsh, tcsh

我有一个脚本，我需要运行许多输入组合。目前我正在使用 perl 脚本执行此操作，但我想学习如何在 shell 中执行此操作。

我需要运行`./script.pl a b` a=1..100 和 b =1..100 的所有组合

```
for ($a = 1; $a <100; $a++) {
    for ($b = 1; $b <100; $b++) {
      system "./script.pl $a $b";
        }
} 
```

我目前正在使用 bash，但 zsh 或 tcsh 也可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T01:36:16.440

[在bash for loops](http://www.cyberciti.biz/faq/bash-for-loop/)中有 2 种语法选择。

```
for VARIABLE in 1 2 3 4 5 .. N
do
    commands
done 
```

和

```
for (( EXP1; EXP2; EXP3 ))
do
    commands
done 
```

第一个类似于用于导航列表等的 java 循环，而第二个是老式的 for 循环。

您可以将循环重写为其中任何一个。

```
for b in {1..100}
do
   ./script $a $b
done 
```

或者

```
for ((b = 1; b <100; b++))
do
   ./script $a $b
done 
```

# r - 矩阵分配在 lapply 内失败

> ID：13735525
> 
> 赞同：2
> 
> 时间：2012-12-06T01:27:53.623
> 
> 标签：r, lapply

我有一个带有字符数据的 data.frame，我希望得到一个具有相同列标题但每个值都有计数的矩阵。到目前为止，我可以获得我想要的维度的空矩阵，但是当我尝试填充`myMatrix`计数时，它不起作用。

```
myData <- data.frame(a=LETTERS[5:8], b=LETTERS[6:9], c=rep(LETTERS[5:6],2), d=rep(LETTERS[7],4))
#   a b c d
# 1 E F E G
# 2 F G F G
# 3 G H E G
# 4 H I F G
myValues <- sort(unique(unlist(myData))) # E F G H I
myList <- lapply(myData, table)
myMatrix <- matrix(nrow=length(myValues), ncol=length(myList), dimnames=list(myValues,names(myList)))
#    a  b  c  d
# E NA NA NA NA
# F NA NA NA NA
# G NA NA NA NA
# H NA NA NA NA
# I NA NA NA NA 
```

到目前为止，一切都很好。这是不符合我期望的部分：

```
lapply(seq_along(myList), function(i) {myMatrix[names(myList[[i]]),names(myList[i])] <- myList[[i]]}) 
```

它返回正确的值，但`myMatrix`仍然充满了 NA。奇怪的是，这个有效：

```
myMatrix[names(myList[[2]]),names(myList[2])] <- myList[[2]]
#    a  b  c  d
# E NA NA NA NA
# F NA  1 NA NA
# G NA  1 NA NA
# H NA  1 NA NA
# I NA  1 NA NA 
```

为什么分配`myMatrix`失败`lapply`，我怎样才能让它工作（没有`for`循环）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T01:42:24.047

这是一种将返回 data.frame 的方法

```
# create table, convert to data.frames then give appropriate column names
myList <- Map(setNames, lapply(lapply(myData, table), data.frame),  Map(c, 'Var', names(myList)))
# merge recursively
Reduce(function(...) merge(..., by = 'Var', all = T), myList)
  Var  a  b  c  d
1   E  1 NA  2 NA
2   F  1  1  2 NA
3   G  1  1 NA  4
4   H  1  1 NA NA
5   I NA  1 NA NA 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T01:59:30.707

@orizo​​n 是正确的，为什么您的使用`lapply`没有按预期工作。您必须替换`<-`为`<<-`它才能工作，但通常认为`*apply`函数具有这种副作用是不好的做法。

相反，您可以使用

```
sapply(lapply(myData, factor, unique(unlist(myData))), table)

#   a b c d
# E 1 0 2 0
# F 1 1 2 0
# G 1 1 0 4
# H 1 1 0 0
# I 0 1 0 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T01:48:50.407

`table`一旦您将所有内容折叠回两个向量，一次调用即可获得所需的结果。1 个向量用于 中的值`data.frame`，1 个向量用于列标识符，使用`col`：

```
table(unlist(myData), colnames(myData)[col(myData)]) 
```

结果：

```
 a b c d
E 1 0 2 0
F 1 1 2 0
G 1 1 0 4
H 1 1 0 0
I 0 1 0 0 
```

# java - JDBC 保存点不回滚

> ID：13735526
> 
> 赞同：0
> 
> 时间：2012-12-06T01:27:57.250
> 
> 标签：java, jdbc, rollback

我正在使用 JDBC，但在回滚和保存点方面遇到了一些问题。我不明白为什么这段代码实际上没有回滚到保存点并且插入的记录仍然存在。

```
try  {
    conn.setAutoCommit(false);
    stmt = conn.createStatement();

    sp = conn.setSavepoint();
    stmt.executeUpdate("INSERT INTO test(id) VALUES(" + args[0] + ")");

    if(true)  {
        conn.rollback(sp);
        System.out.println("rollback");
    }
} catch (SQLException ex)  {
    // handle any errors
    System.out.println("SQLException: " + ex.getMessage());
    System.out.println("SQLState: " + ex.getSQLState());
    System.out.println("VendorError: " + ex.getErrorCode());

    System.out.println("rollback");
    conn.rollback(sp);
} finally  {
    conn.commit();
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:46:05.680

因为 Savepoint 只是 DBMS 的功能。我认为这可能是您的数据库引擎的问题。

你可以检查[这个](https://stackoverflow.com/questions/7287201/java-jdbc-savepoint)问题。

# ruby-on-rails - 如何对 Carrierwave Uploader 进行子类化？

> ID：13735529
> 
> 赞同：1
> 
> 时间：2012-12-06T01:28:16.847
> 
> 标签：ruby-on-rails, carrierwave

我有这两个上传者： [https ://gist.github.com/4180193](https://gist.github.com/4180193)

```
class ImageUploader < CarrierWave::Uploader::Base

  include CarrierWave::MiniMagick
  include Sprockets::Helpers::RailsHelper
  include Sprockets::Helpers::IsolatedHelper
  storage :file

  def store_dir
    "images/#{model.class.to_s.underscore}/#{model.slug}"
  end

  def default_url
    asset_path("fallback/" + [version_name, "image.jpg"].compact.join('_'))
  end

  def self.get_width(span)
    grid_column_width = 110
    grid_gutter_width = 10
    return grid_column_width if span <= 0 or span > 8
    (span*grid_column_width) + ((span>1 ? span-1 : 0)*grid_gutter_width)
  end

  def self.get_height(width)
    ratio = 180/150
    width/ratio
  end

  def self.dims(span)
    width = get_width(span)
    [width, get_height(width)]
  end

  version :xlarge do
    process :resize_to_limit => dims(8)
    process :convert => :jpg
  end

  version :large do
    process :resize_to_limit => dims(4)
    process :convert => :jpg
  end

  version :medium do
    process :resize_to_limit => dims(2)
    process :convert => :jpg
  end

  version :small do
    process :resize_to_limit => dims(1)
    process :convert => :jpg
  end

  version :xsmall do
    process :resize_to_limit => dims(0.5)
    process :convert => :jpg
  end

  def extension_white_list
    %w(jpg jpeg gif png tiff tif)
  end

  def filename
    "image.jpg" if original_filename
  end

end 
```

和

```
class AmbianceImageUploader < ImageUploader
  version :header do
    process :resize_to_fill => [get_width(6), 350+10]
    process :convert => :jpg
  end

  def filename
    "ambiance.jpg" if original_filename
  end

end 
```

但是，当我使用 AmbianceUploader 上传内容时，不会创建 ImageUploader 中定义的版本。我将如何解决这个问题？

PS：

```
[2] pry(main)> AmbianceImageUploader.versions
=> {:xlarge=>{:uploader=>#<Class:0x007fde61b5b520>, :options=>{}},
 :large=>{:uploader=>#<Class:0x007fde61f90500>, :options=>{}},
 :medium=>{:uploader=>#<Class:0x007fde5ee166c8>, :options=>{}},
 :small=>{:uploader=>#<Class:0x007fde5ec492c8>, :options=>{}},
 :xsmall=>{:uploader=>#<Class:0x007fde5d8687b8>, :options=>{}},
 :header=>{:uploader=>#<Class:0x007fde61ac1808>, :options=>{}}} 
```

所以版本就在那里，只是出于某种原因他们不关心......

# java - 如何为文本文件中的行数创建适当大小的数组

> ID：13735531
> 
> 赞同：-1
> 
> 时间：2012-12-06T01:28:45.410
> 
> 标签：java, arrays, arraylist

我正在尝试逐行读取文本文件。每行有两个用逗号分隔的双数（代表 x,y 点）。我想把它们放在两个双精度数组中（一个包含 x 点，另一个包含 y 点），以便它们在文件中。数组的大小应与文件中的点数（即文件中的行数）相同。

这些文件可能有不同的点数，所以我不想为所有文件声明一个固定大小。我该怎么做呢？

**编辑**：

我这样做的方式有问题：

```
BufferedReader input; 

ArrayList<Double> xpointArrayList = new ArrayList<Double>();
ArrayList<Double> ypointArrayList = new ArrayList<Double>();
try {
    input = new BufferedReader(new FileReader(args[0]));
    String line;
    while ((line = input.readLine()) != null) {
        line = input.readLine();
        String[] splitLine = line.split(",");

        double xValue = Double.parseDouble(splitLine[0]);
        double yValue = Double.parseDouble(splitLine[1]);

        xpointArrayList.add(xValue);
        ypointArrayList.add(yValue);
    }
    input.close();

    } catch (IOException e) {

    } catch (NullPointerException npe) {

    }

    double[] xpoints = new double[xpointArrayList.size()];
    for (int i = 0; i < xpoints.length; i++) {
        xpoints[i] = xpointArrayList.get(i);
    }
    double[] ypoints = new double[ypointArrayList.size()];
    for (int i = 0; i < ypoints.length; i++) {
        ypoints[i] = ypointArrayList.get(i);
    } 
```

当我对 xpoints 和 ypoints 数组执行 Array.toSring 调用时。它只有一个数字。例如在文件中：

1,2 / 3,4 / 0,5

xpoints 数组只有 3.0，ypoints 数组只有 4.0。它哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:37:20.060

只做一个`ArrayList`type怎么样`Point`。一个`ArrayList`会增长到内容的大小，所以它应该像做这样的事情（伪代码）一样简单......

```
ArrayList<Point> points = new ArrayList<Point>();

for (each line of the file){
    String line = file.readLine();
    String[] splitLine = line.split(",");

    double xValue = Double.parseDouble(splitLine[0]);
    double yValue = Double.parseDouble(splitLine[1]);

    points.add(new Point(xValue,yValue));
} 
```

该类`Point`被设计为 2 个`double`值的容器，用于表示任何抽象点，它应该完全适合您的需要。请参阅[点](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Point.html)文档。

如果你真的需要使用 2 个数组，我的建议是使用一个`ArrayList<Double>`...

```
ArrayList<Double> xPoints = new ArrayList<Double>();
ArrayList<Double> yPoints = new ArrayList<Double>();

for (each line of the file){
    String line = file.readLine();
    String[] splitLine = line.split(",");

    double xValue = Double.parseDouble(splitLine[0]);
    double yValue = Double.parseDouble(splitLine[1]);

    xPoints.add(xValue);
    yPoints.add(yValue);
} 
```

有关这方面的更多信息，请参阅[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)文档。

如果你真的需要使用数组，你可以`ArrayList`像这样将其转换为数组......

```
Double[] xArray = (Double[])xPoints.toArray();
Double[] yArray = (Double[])yPoints.toArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T01:37:59.140

不。您要求一个可变大小的数组。使用 ArrayList。您不必指定初始大小，它会增长到您需要的大小。此外，创建一个点类来处理这些数据可能是值得的。这样你就可以得到一个点列表。

```
public class Point
{
private double x;
private double y;

public point(double x, double y)
{
this.x = x;
this.y = y;
}

public double getX()
{
return x;
}

public double getY()
{
return y;
}
}

List<Point> myPoints = new ArrayList<Point>(); 
```

而且，如果您真的很喜欢常规数组： myPoints.toArray();

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T01:40:39.687

正如您已经打开并从文件中读取的简单方法是将计数器放入循环并读取所有行。

```
 int count =0;
  while ((strLine = br.readLine()) != null)   {
      count++;
      System.out.println( strLine + " : "+ count);
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T01:33:12.700

FileObject.length() 将返回文件中的字节数，将其除以双精度类型整数（8 字节？）的大小，您将拥有存储在文件中的双精度变量数，将该数字除以 2再次（或将您的原始数字除以 4），如果我正确理解您的问题，您应该在文件中有行数。

# php - 在 PHP 中求和几个月？

> ID：13735533
> 
> 赞同：0
> 
> 时间：2012-12-06T01:28:54.773
> 
> 标签：php, date

有`$month1=10`和`$month2=4`。如果我将这 2 个月相加，我将得到 14，但没有 14 个月，这意味着它是 2 月/2 月。

当 6+7=1 时是否有逻辑或 php 函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T01:31:08.947

```
($month1 + $month2) % 12
                   ^^^ 
```

这是[模运算符](http://php.net/manual/en/language.operators.arithmetic.php)，它返回第一个操作数除以第二个操作数的余数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T01:32:22.807

替代：

```
$datetime = new DateTime('October');
$datetime->add('4 months');
echo $datetime->format('%m'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T01:31:26.457

尝试模数（余数）。所以`(6 + 7) / 12`等于 1

[http://php.net/manual/en/language.operators.arithmetic.php](http://php.net/manual/en/language.operators.arithmetic.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T01:39:18.160

模数直接回答您的问题；但是，对于日期算术，您最好使用特定于日期的函数：

```
$date = time();
  // or another unix timestamp
$four_months_later = strtotime("+4 months", $date);
  // still unix timestamp, now 4 months later 
```

# xcode - 从 xcode 对 flickr api 进行 GET rest 调用

> ID：13735537
> 
> 赞同：0
> 
> 时间：2012-12-06T01:29:29.033
> 
> 标签：xcode, json, api, rest, flickr

我正在尝试使用应用程序中的 flickr.photos.getInfo 方法进行 GET 调用。目标是使用它的 id 获取有关照片的信息。

我的方法：

```
+(NSDictionary*)photoForId:(NSString *)photoID
{
    NSLog(@"photo id = %@", photoID);
    NSString *request=[NSString stringWithFormat:@"http://api.flickr.com/services/rest/flickr.photos.getInfo&photo_id=%@&format=json&nojsoncallback=1&extras=original_format,tags,description,geo,date_upload,owner_name&page=1&method=flickr.photos.search", photoID];

        NSLog(@"output=%@",[self executeFlickrFetch:request]);
    return [[[self executeFlickrFetch:request]valueForKey:@"photos.photo"]lastObject];

} 
```

执行FlickrFetch 方法：

```
+ (NSDictionary *)executeFlickrFetch:(NSString *)query
{
    query = [NSString stringWithFormat:@"%@&format=json&nojsoncallback=1&api_key=%@", query, FlickrAPIKey];
    query = [query stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
  NSStringFromSelector(_cmd), query);
    NSData *jsonData = [[NSString stringWithContentsOfURL:[NSURL URLWithString:query] encoding:NSUTF8StringEncoding error:nil] dataUsingEncoding:NSUTF8StringEncoding];
    NSError *error = nil;
    NSDictionary *results = jsonData ? [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers|NSJSONReadingMutableLeaves error:&error] : nil;
    return results;
} 
```

现在这个调用返回 null。我知道执行 fetch 工作，因为它是由摄影师或地点获取照片。只需要弄清楚照片ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T02:27:30.550

这是正确的要求：

```
NSString *request=[NSString stringWithFormat:@"http://api.flickr.com/services/rest/?method=flickr.photos.getInfo&photo_id=%@&format=json&nojsoncallback=1&extras=original_format,tags,description,geo,date_upload,owner_name&page=1", photoID]; 
```

# php - 将非格式 javascript 数组数据发送到电子邮件正文

> ID：13735543
> 
> 赞同：0
> 
> 时间：2012-12-06T01:30:09.013
> 
> 标签：php, javascript, jquery, ajax, json

我有以下功能，它是较大的单页应用程序的一部分。

```
gatherData function(){
    var superarray = []
    var row = 0

    $('ul li').each(function(){
        var task = $(this).find('.edited').html();   
        var time = $(this).find('.time').html(); 
        var array = []
        var count = 0

        array[count] = task;
        count = count + 1  
        array[count] = time;

        superarray[row] = array  
        row = row + 1                       
      }); // end each

       console.log(superarray); // this is the data i want tabulated in email 
  }); 
```

我希望使用

```
 <form><email><submit class="send"></form>

 $('.send').click(function(){
        gatherData();
        $.post("processform.php", // now I'm stuck 
```

通过最合适的 php/ajax/json/ 组合发送电子邮件，这将产生格式的消息

“您的数据收集结果是

任务1时间1

任务2时间2

任务N 任务N

角色学分等"

在我的无知中，我考虑过在发布之前创建一个隐藏的消息字段并通过 DOM 添加数据。但是，我认为必须有一种更优雅的方式。

任何人都可以为此建议最佳实践（或工作代码！:)，并指出在这种情况下哪种技术/技术最合适的正确方向。谢谢

[http://jsfiddle.net/BinaryGeometry/kNwMA/](http://jsfiddle.net/BinaryGeometry/kNwMA/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:09:33.383

@happilyUnStuck，更好的方法可能是执行以下操作：

在您的点击事件中，提示用户确认他们已准备好提交表单。根据返回值，继续您的帖子

在你的帖子中：

a.) 将原来的 $.post 恢复原状 b.) 将表单中的数据序列化为 json ... 将 .serialize() 替换为 .serializeArray() c.) 在对 $ 的调用中丢失函数。 post ...除非您想报告成功或失败，否则您不需要它

在服务器端，使用 json 库对 post 数据进行反序列化，并根据需要使用。这种类型的应用程序/用例正是 json 的用途......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:37:30.107

你会这样说：

```
 $('.send').click(function(){
    var data = gatherData();
    $.post("processform.php?data="+ data) ..... 
```

在您的 php 脚本中，您将拥有`echo $_POST['data']`.

# c - 函数参数的 C 低级验证

> ID：13735544
> 
> 赞同：-1
> 
> 时间：2012-12-06T01:30:14.483
> 
> 标签：c, low-level-api

假设我们有一些函数并且我们想要验证参数。例如不为 NULL：

```
void* myFunction(char* str1, char* str2){
    if(str1==NULL || str2==NULL) return NULL;
    ...
} 
```

我的问题是什么叫做良好的低级（API）验证，就像它是由标准 C 库制作的一样。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:38:00.387

C 是你所问的，你得到的语言有很多绳子可以吊死自己，而且安全网很少。[以 Apple的 strcpy 实现](http://opensource.apple.com/source/Libc/Libc-262/ppc/gen/strcpy.c)为例，但它们看起来都非常相似：

```
char *strcpy(char *s1, const char *s2)
{
    char *s = s1;
    while ((*s++ = *s2++) != 0)
    ;
    return (s1);
} 
```

由于 C 不知道异常的概念，所有的错误信号都必须通过函数的返回值，有时通过全局变量 errno 来完成，这当然在一定程度上限制了错误的表达能力。

因此，如果您想与标准库的功能保持一致，则几乎不需要提供安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:42:22.700

关键是“言出必行”和“言出必行”。“你说什么”需要清楚地描述。描述应该在文档中，但也可以在注释或函数名或参数名中。

说明要求后，请确保您满足该要求。如果您定义要捕获的错误情况，请确保调用者可以使用`errno`或其他方式确定这一点。

# tomcat7 - 部署在 Tomcat 和正向代理上的 Web 应用程序

> ID：13735546
> 
> 赞同：1
> 
> 时间：2012-12-06T01:30:20.917
> 
> 标签：tomcat7, http-proxy

我有一个网络应用程序，可以进行出站互联网连接/请求，例如发送电子邮件。我希望请求转到转发代理，因此转发代理执行规则等。

我假设需要配置 Tomcat 才能实现这一点？希望开始研究如何做到这一点。

# java - 在 System.out.println 中使用 charAt 显示整数？

> ID：13735550
> 
> 赞同：1
> 
> 时间：2012-12-06T01:30:58.410
> 
> 标签：java

如果我运行这个简单的代码，我得到的输出是一个整数值，有人知道为什么吗？我正在尝试打印名字的第一个字符和姓氏的前五个字符连接在一起。

```
Scanner scan = new Scanner (System.in);
String firstName, lastName;

System.out.print ("Enter First Name: ");
firstName = scan.nextLine();
System.out.print ("\n");
System.out.print ("Enter Last Name: ");
lastName = scan.nextLine();

System.out.println (firstName.charAt(0)+lastName.charAt(0)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:34:09.723

你打电话时

```
System.out.println (firstName.charAt(0)+lastName.charAt(0)); 
```

您最终调用[System.out.println(int)](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#println%28int%29)由于添加了字符值本身会产生一个整数值。

> 我正在尝试打印名字的第一个字符和姓氏的前五个字符连接在一起。

你可以使用：

```
System.out.println(firstName.charAt(0) + lastName.substring(0, 5)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T01:31:38.873

Primitive`char`是与 Java 中的原始类型兼容的类型，`int`如果添加字符，您将得到它们的 ASCII 码的总和。

```
System.out.println (firstName.charAt(0)+""+lastName.charAt(0)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T01:32:40.687

试试这个：

```
Scanner scan = new Scanner (System.in);
String firstName, lastName;

System.out.print ("Enter First Name: ");
firstName = scan.nextLine();
System.out.print ("\n");
System.out.print ("Enter Last Name: ");
lastName = scan.nextLine();
String s = "" + firstName.charAt(0)+""+lastName.substring(0, 5);
System.out.println(s); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T01:41:12.163

根据 Java 语言规范：

> 如果 + 运算符的任一操作数的类型是字符串，则该操作是字符串连接。否则，+ 运算符的每个操作数的类型必须是可转换（第 5.1.8 节）为原始数字类型的类型，否则会发生编译时错误。

[http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.18](http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.18)

`char`由于操作符不支持原始类型`+`，JVM 将`char`值转换为数值，即 ASCII 码。

要获得您想要的值，请使用字符串值（例如通过调用 .substring()），或强制转换为字符串，如 Bobby Dizzle 的回答中所做的那样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T01:44:02.410

当你这样做时： `System.out.println (firstName.charAt(0)+lastName.charAt(0));`

您基本上尝试添加 a`char`和 a `char`。并且编译器实际上尝试对数值进行加法运算。所以`println`打印加法的结果。

要实际打印您想要的内容，可以使用`+`带有字符串的运算符（使用`subString`）或使用`String.Format`.

所以你也可以这样写：

```
System.out.println(String.format("%c %s", firstName.charAt(0), lastName.subString(0,5))); 
```

# php - 意外的 T_ELSEIF 在

> ID：13735556
> 
> 赞同：-1
> 
> 时间：2012-12-06T01:31:34.660
> 
> 标签：php

我在弄清楚这一点时遇到了一点问题：

```
function myMenu() //Creates a menu with a class current to the current page item
{
    $menuItems = array (
        "Strona Głowna" => "index.php",
        "O nas" => "o-nas.php",
        "Oferta" => "oferta.php",
        "Polecane kierunki" => "polecane-kierunki.php",
        "kontakt" => "kontakt.php",
    );
    foreach($menuItems as $name => $url) {
        $class = 'default';
        $index = 'index.php';
            if ((curPageName() == $url) && (curPageName() !== $index)) {
                $class='current';
            }
            echo "<li><a href='$url' class='$class'>$name</a></li>";
            elseif (curPageName() == $index) {
                $class='current home';
            }
            echo "<li><a href='$url' class='$class'>$name</a></li>";
        };
}; 
```

基本上我只想将“当前家”分配给 index.php。也许您可以提供更好的解决方案，我是这方面的新手。无论如何，这给了我：

```
 PHP Parse error:  syntax error, unexpected T_ELSEIF in ... 
```

任何帮助解决这个问题表示赞赏！

亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T01:37:41.273

你没有用“}”关闭你的 if 子句

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T01:33:58.087

`if`你在你的结尾和你的`elseif`...... 之间插入了一个声明

```
if ((curPageName() == $url) && (curPageName() !== $index)) {
            $class='current';
        }
        echo "<li><a href='$url' class='$class'>$name</a></li>";  <====== WRONG
        elseif (curPageName() == $index) { 
```

标有“错误”的行是 if 的一部分吗？elseif 的一部分？两者都不？两个都？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T01:32:42.120

```
 if ((curPageName() == $url) && (curPageName() !== $index)) {
                $class='current';
 /*--->*/       echo "<li><a href='$url' class='$class'>$name</a></li>";  
            }

            elseif (curPageName() == $index) {
                $class='current home';
            } 
```

# c# - 创建数据访问对象时最好的方法是什么？

> ID：13735566
> 
> 赞同：7
> 
> 时间：2012-12-06T01:32:41.137
> 
> 标签：c#, .net, .net-3.5

我在 MyWebpage.aspx.cs 中有一个方法，就像这样：

```
public partial class MyWebpage : PageBase
{
    private readonly DataAccessLayer dataAccessLayer;

    protected string GetMyTitle(string myVar, string myId)
    {
        if (string.IsNullOrEmpty(myVar))
        {
            return string.Empty;
        }

        return dataAccessLayer.GetMyTitle(Convert.ToInt32(myId), myVar);
    }
} 
```

在 DataAccessLayer 类中，我有一个与 DB 对话并执行 DAL 并返回标题的方法。

从 MyWebPage.aspx.cs 类访问 DAL 的最佳实践是什么（因为我是否需要每次都创建一个新的 DataAccessLayer() 对象？我应该在我的 PageBase 类中的哪里创建它，或者每次我在后面的代码中调用它时） ?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T02:10:44.287

首先是从您的代码后面或表示层访问 DAL 通常不是一个好习惯。因为在这种情况下，您需要将业务逻辑代码放在代码后面（表示层），这会导致关注点冲突、高耦合、重复和许多其他问题。因此，如果您正在寻找最佳实践，我建议您查看以下链接：

*   [数据层指南](http://msdn.microsoft.com/en-us/library/ee658127.aspx)
*   [分层应用指南](http://msdn.microsoft.com/en-us/library/ee658109.aspx)
*   [对象关系元数据映射模式（尤其是存储库模式）和域逻辑模式](http://www.martinfowler.com/eaaCatalog/)

这些都是非常好的书：

*   [企业应用架构模式（Martin Fowler 着）](https://rads.stackoverflow.com/amzn/click/com/0321127420)
*   [Microsoft® .NE​​T：为企业构建应用程序](https://rads.stackoverflow.com/amzn/click/com/073562609X)

还有关于调用 DAL 的静态函数。如您所知，静态函数容易受到多线程的影响，因此如果您使用 DAL 函数中共享的任何内容（有时就是这种情况，如共享连接、命令等），它会破坏您的代码，所以我认为最好避免在这一层使用静态函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:53:57.417

我是[存储库模式](http://martinfowler.com/eaaCatalog/repository.html)的粉丝。每个人都有自己的看法，但我喜欢一个 sql 表 => 一个存储库并共享名称的想法，就像 ORM 工具一样。

实体框架可以快速处理您的 DAL，您仍然可以实现 DAL 模式，如存储库。

这是一个[代码生成器](http://enterprisecodegen.azurewebsites.net/)，它采用 sql 连接字符串并提供企业数据访问应用程序块的相当标准的实现。它不是很健壮，因为它是针对平淡无奇的 sql 模式设计的。如果您使用示例数据库，它将为您提供代码示例，您可以使用这些示例来设计您喜欢的数据访问层。

# mysql - MySQL：使用 LIKE 产生比我需要的更多的结果

> ID：13735569
> 
> 赞同：0
> 
> 时间：2012-12-06T01:32:50.653
> 
> 标签：mysql

似乎我的 LIKE mySQL 命令生成的结果比我希望的要多。我不明白为什么，我想知道是否有人可以通过帮助我理解为什么我的查询没有按预期工作来帮助我实现我的目标。我从查询中去掉了左边的“%”，这有点帮助，但它仍然产生了很多我不需要的结果。

例如：

```
User input ($searchword): 'ad' => returns[4]: 
                     'Adele Necklaces, 
                      Adwarrior Swords, 
                      Affirmative T-shirt, 
                      Agtec Radio'

Trying to get THESE results for user input($searchword): 'ad' => returns[2]: 
                                                   'Adelete Neckalces, 
                                                    Adwarrior Swords' 
```

SQL 命令：

```
("SELECT * FROM products WHERE prod_name LIKE '".$searchword."%'") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:41:24.857

我的朋友，我相信你错了。 [LIKE](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)完全按照您的预期工作。

```
mysql> create table searchterms (term varchar(64), key(term) );
Query OK, 0 rows affected (0.01 sec)

mysql> insert into searchterms (term) values 
('Adele Necklaces'), ('Adwarrior Swords'),
('Affirmative T-shirt'), ('Agtec Radio');
Query OK, 4 rows affected (0.00 sec)
Records: 4  Duplicates: 0  Warnings: 0

mysql> set @st='ad';
Query OK, 0 rows affected (0.00 sec)

mysql> set @st='ad';
Query OK, 0 rows affected (0.00 sec)

mysql> select * from searchterms where term like concat(@st, '%');
+------------------+
| term             |
+------------------+
| Adele Necklaces  |
| Adwarrior Swords |
+------------------+
2 rows in set (0.00 sec) 
```

# java - 如何遍历 Java Linked Hash map？

> ID：13735574
> 
> 赞同：16
> 
> 时间：2012-12-06T01:33:12.167
> 
> 标签：java, hashmap, loops

我搜索了这个问题并找到了使用 Map.Entry 的答案，例如[这里](https://stackoverflow.com/questions/13078077/how-do-i-iterate-through-an-entire-hashmap)，但是 getValue() 方法返回了一个 Object 对象，而不是地图中的对象类型。就像下面的示例一样，我需要它返回一个 User 对象，以便我可以使用该类中的方法。但是，当我尝试使用下面的 while 循环时，它永远不会离开循环。我想知道正确的方法来做到这一点。

```
Map<String, User> users = new LinkedHashMap<String, User>();
users.put(name, user);

while(users.values().iterator().hasNext()){

   currentUser = users.values().iterator().next();
   currentUser.someMethod();
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-06T01:41:11.700

> 我想知道正确的方法来做到这一点。

你应该使用`Map.Entry`类型；您只需要提供与泛型一起使用的类型参数：

```
for (Map.Entry<String,User> entry : users.entrySet()) {
    // entry.getValue() is of type User now
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-06T01:42:12.990

您在滥用迭代器，并且忽略了泛型规范。

```
Iterator<User> it = users.values().iterator();
while (it.hasNext())
{
  User currentUser = it.next();
  currentUser.someMethod();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-26T01:08:34.090

最简单的迭代方法是使用 for。在 LinkedHashMap 中是这样的：

```
 private static LinkedHashMap<Integer, String> dataBase = new LinkedHashMap<Integer, String>();

   for(Integer key : dataBase.keySet()) {
         String ret = dataBase.get(key);
    } 
```

[资源](http://tutorials.jenkov.com/java-collections/map.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-06T01:34:14.820

每次调用时`.iterator()`，它都会在第一个元素处为您提供一个全新的迭代器。

您需要调用`.iterator()`一次并将其存储在局部变量中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T01:46:38.230

为此更改您的代码：

```
Iterator<User> it = users.values().iterator();

    while (it.hasNext())
    {

        currentUser = it.next();
        currentUser.someMethod();  
    } 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-06T02:46:07.697

在处理完成后，您必须从集合中删除“下一个”。使用您的代码，它是“下一个”的库存；例如：如果您的“users.values()”返回一个集合，即

{{约翰，1}，{詹，2}，{彼得，3}}

您的 while 循环保持返回 true 并且因为它不断返回位于第一个索引处的“{john,1}”。所以这是一个无限的“循环”。这就是迭代器的工作方式。如果在第一个索引处有一个元素，hasNext() 将返回 true，并且 next() 将返回 hasNext() 确认它具有的那个元素。

为了让您的循环继续进行，我认为您必须添加一行代码或 2\. 见下文：

```
 Map<String, String> users = new HashMap<String, String>();
    users.put("1", "John");
    users.put("2", "peter");
    users.put("3", "uche");
     Iterator<String> coll = users.values().iterator();
        while(coll.hasNext()){

       String currentUser = coll.next();
       System.out.print(currentUser);

      //coll.remove(currentUser);
    } 
```

希望这可以帮助..

我以前的代码可能不是“正确”的方法，但完成了工作并且没有跳过任何第二个元素@EJP。感谢任何方式让我直截了当.. :)

# python - 我不断收到语法错误，它突出显示 tempvals[day+1] 但我不确定为什么会收到此错误

> ID：13735589
> 
> 赞同：-2
> 
> 时间：2012-12-06T01:35:31.620
> 
> 标签：python, syntax, numpy

输入：给定值，例如 sig 和 rho_c 列出所有日期，使用 for 循环查找每一天的时间，保存该时间查找温度的变化。对于每一天，找出每一天的温度值，找出你需要的值 A 图表数据输出：天与温度的图表。

```
Aice = 1
Anoice=0.
Tice =273.
Tnoice=293.
dt = 86400.
S = 342.5
rho_c =206000000.
epsilon_tow =.62
sig =5.6710E-8
Tint=288.

import numpy as N
tempvals= N.zeros((3000,))   #creates an array to store temp. values                     
tempvals[0]= Tint            #set the first value of array to Tint
times=N.zeros((3000,))       #creates array to store time values
    for day in range(3000):      #Creates the values of day and goes through
                             #calculates for every day time, A,dT,T 
        time = (dt)*day
        times[day] = time
        if tempvals[day] <= Tice:
            A=Aice
        elif tempvals[day] >=Tnoice:
            A=Anoice
        else :
            A=(((tempvals[day]-Tice)/(Tnoice-Tice)*(Anoice-Aice))+Aice)
        dT =(((S*(1-A))-((epsilon_tow*sig*(tempvals[day]**4))/rho_c )*dt

        if day <2999  
                 tempvals[day+1]= T+dT
                 tempvals[day]= T

        plot(day,T)                    #plots graph of day valueson x axis and
                                       #T values on as y-axis
        plot.title(T)                  #creates title of the graph 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T01:37:37.550

您`:`在上一行中缺少 a 。

```
if day < 2999: # <- need a colon here  
    tempvals[day+1]= T+dT 
```

编辑：您在此行中也有不匹配的括号/括号：

```
dT =(((S*(1-A))-((epsilon_tow*sig*(tempvals[day]**4))/rho_c )*dt # missing parens 
```

这条线看起来应该更像：

```
dT = ((S*(1-A))-((epsilon_tow*sig*(tempvals[day]**4))/rho_c))*dt 
```

# asp.net-mvc-3 - 如何隔离业务逻辑以避免覆盖控制器？

> ID：13735590
> 
> 赞同：0
> 
> 时间：2012-12-06T01:35:41.160
> 
> 标签：asp.net-mvc-3, autofac, multi-tenant

来自[http://code.google.com/p/autofac/wiki/MultitenantIntegration上的文档](http://code.google.com/p/autofac/wiki/MultitenantIntegration)

> 由于这相对复杂，最好将业务逻辑隔离为传递到控制器的外部依赖项，以便租户可以提供覆盖依赖项而不是覆盖控制器。

假设我有一个包含许多操作的默认控制器，Index 操作获取产品、库存和商店的完整数据列表。我的 TenantB 想要具有许多操作的相同控制器，但对于 Index 操作，它还希望获得销售列表。

在我看来，我可能不需要为这么小的变化覆盖整个控制器。这就是上面引用的句子所指的吗？我可以将一些外部方法注入到索引中，对于默认租户来说，这将是一个返回产品、库存和商店的方法，而 TenantB 将覆盖也返回销售额的该方法？

如果我的假设是正确的，是否有人知道某处的一些示例代码可以说明这种类型的实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:30:50.830

这句话背后的想法是您将 Index 操作中的逻辑隔离到一个单独的依赖项中。

也就是说，现在你可能有一个类似这样的控制器：

```
public class MyController : Controller
{
  protected IDataService _dataService;
  public MyController(IDataService dataService)
  {
    this._dataService = dataService;
  }
  public virtual ActionResult Index()
  {
    var data = this._dataService.GetData();
    var model = new IndexModel()
    {
      Data = data
    };
    return this.View(model);
  }
  public virtual ActionResult OtherAction()
  {
    // other stuff...
  }
} 
```

在那个 Index 操作中，您正在获取数据，并且可能在将数据传递给视图之前对数据执行一些业务逻辑。

使用这样的设计，您的租户特定需要获取一些额外的数据意味着您必须覆盖控制器。这实际上并不太难，如果您决定为其他服务依赖项进行属性注入，它应该可以工作。

```
public class TenantSpecificController : MyController
{
  // If you set up PropertiesAutowired on the tenant controller
  // registration, you'll get this property populated.
  public IOtherService OtherService { get; set; }
  public TenantSpecificController(IDataService dataService)
    : base(dataService)
  {
  }
  public override ActionResult Index()
  {
    var data = this._dataService.GetData();
    var otherData = this.OtherService.GetData();
    var model = new IndexModel()
    {
      Data = data
    };
    // You can't really change the model without changing the
    // view, so extended data goes in the ViewData or ViewBag
    this.ViewData["other"] = otherData;
    return this.View(model);
  }
} 
```

但是文档中的那句话暗示的是，如果您知道您将在该控制器中拥有一些花哨的租户覆盖逻辑（不仅仅是一次性的，因为控制器覆盖在一次性场景中很容易) 然后将逻辑拉出控制器，如下所示：

```
public class MyController : Controller
{
  protected IIndexModelGeneratorService _modelService;
  public MyController(IIndexModelGeneratorService modelService)
  {
    this._modelService = modelService;
  }
  public virtual ActionResult Index()
  {
    var model = this._modelService.BuildModel();
    return this.View(model);
  }
  public virtual ActionResult OtherAction()
  {
    // other stuff...
  }
} 
```

然后，您不是在控制器/操作级别进行租户覆盖，而是在特定服务上进行租户覆盖。您正在将业务逻辑从控制器中拉出到其他依赖项中。

显然，这可能意味着改变模型以允许更多可扩展的数据......

```
public class IndexModel
{
  public DataObject Data { get; set; }
  public Dictionary<string, object> ExtendedData { get; set; }
} 
```

...或者也许您的数据服务实现需要一个字典来填充：

```
public interface IIndexModelGenerator
{
  IndexModel BuildModel(ViewDataDictionary dict);
} 
```

...所以当你调用它时，你的控制器会传入 ViewData 字典来捕获额外的数据：

```
var model = this._modelService.BuildModel(this.ViewData); 
```

这个想法仍然成立——如果你有很多这样的东西，将业务逻辑分解成多租户组件可能比每个租户拥有不同的控制器更容易。

# php - 类 stdClass 的对象无法转换为字符串 PHP 问题

> ID：13735592
> 
> 赞同：3
> 
> 时间：2012-12-06T01:36:20.173
> 
> 标签：php, object, jira, jira-rest-api

我从 Jira Atlassian API 中提取信息，我使用其他代码并且工作正常，我将其更改为 json，所有信息都作为对象返回。

但是在这种情况下，我收到此服务器错误： PHP Catchable fatal error: Object of class stdClass could not be convert to string in /usr/local/vhosts/999/webspace/httpdocs/mysite/filters1.php on line 411

现在这是我试图运行的代码：

```
$username = 'xxx@gmail.com';
$password = 'xxxxxxx';

$url = 'xxx.atlassian.net/rest/api/2/search?jql=project+%3D+bug+AND+component+%3D+%22issues%22+AND+status+in+(Open,+Reopened)';

$headers = array(
'Accept: application/json',
'Content-Type: application/json'
);

$ch = curl_init();
$test = "This is the content of the custom field.";

curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_VERBOSE, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "GET");
//curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");

$result = curl_exec($ch);
$issue_json = json_decode($result);
$ch_error = curl_error($ch);

if ($ch_error) {
    echo "cURL Error: $ch_error";
} else {
    echo $issue_json;
}

curl_close($ch); 
```

正如我提到的，返回上面的错误，但如果我将代码更改为

```
 $result = curl_exec($ch);
 //$issue_json = json_decode($result); 
```

然后我回显 $result 它可以工作并返回我需要的所有内容，但作为一个巨大的字符串而不是我想要的对象。我格式化了下面的整个字符串，使其更具可读性。我用谷歌搜索了一些类似的问题，我认为我需要做这样的事情：

```
foreach($string as $strings) 
{
     echo $strings;
} 
```

但我对这种东西不太熟悉，只是基本的 php，所以我有点迷茫

```
{"expand":
                "names,schema",
                "startAt":0,
                "maxResults":50,
                "total":1,
                "issues":
                        [{"expand":
                        "editmeta,
                        renderedFields,
                        transitions,
                        changelog,
                        operations",
                        "id":"15550",
                        "self":"https://testing.atlassian.net/rest/api/2/issue/15550",
                        "key":"bug-4990",
                        "fields":{"progress":{"progress":0,"total":0},
                        "summary":"Player Summary group profile bar chart does not show all ranges",
                        "issuetype":{"self":"https://testing.atlassian.net/rest/api/2/issuetype/1",
                        "id":"1",
                        "description":"A problem which impairs or prevents the functions of the product.",
                        "iconUrl":"http://www.google.com/images/bug_16.png",
                        "name":"Bug",
                        "subtask":false},
                        "votes":{"self":"https://testing.atlassian.net/rest/api/2/issue/bug-4990/votes",
                        "votes":0,
                        "hasVoted":false},
                        "customfield_11100":"579",
                        "resolution":null,
                        "fixVersions":
                                [{"self":"https://testing.atlassian.net/rest/api/2/version/10301",
                                "id":"10301",
                                "description":"Bugs that will be going in the next official release once the current release is pushed, held temporarily here in the meantime",
                                "name":"Milestone 1",
                                "archived":false,
                                "released":false}],
                        "customfield_10403":{
                                            "self":"https://testing.atlassian.net/rest/api/2/customFieldOption/10105",
                                            "value":"Low","id":"10105"},
                                            "resolutiondate":null,
                                            "customfield_11101":null,
                                            "timespent":null,
                                            "reporter":{
                                                        "self":"https://testing.atlassian.net/rest/api/2/user?username=donalduck%4moo.ca",
                                                        "name":"bugsbunny@gmail.com",
                                                        "emailAddress":"bugsbunny@gmail.com",
                                                        "avatarUrls":{
                                                                    "16x16":"https://testing.atlassian.net/secure/useravatar?size=small&avatarId=10122",
                                                                    "48x48":"https://testing.atlassian.net/secure/useravatar?avatarId=10122"},
                                                                    "displayName":"Bugs Bunny",
                                                                    "active":true},
                        "customfield_10203":null,
                        "customfield_10205":[{
                                            "self":"https://testing.atlassian.net/rest/api/2/user?username=donaldduck%40gmail.com",
                                            "name":"donaldDuck@gmail.com",
                                            "emailAddress":"donaldDuck@gmail.com",
                                            "avatarUrls":{
                                                        "16x16":"https://testing.atlassian.net/secure/useravatar?size=small&ownerId=donaldduck%40gmail.com&avatarId=10202",
                                                        "48x48":"https://testing.atlassian.net/secure/useravatar?ownerId=donaldduckgmail.com&avatarId=10202"},
                                                        "displayName":"Donald Duck","active":true},{
                                            "self":"https://testing.atlassian.net/rest/api/2/user?username=daffyduck%40holdemmanager.net",
                                            "name":"DaffyDuck@hotmail.com",
                                            "emailAddress":"DaffyDuck@hotmail.com",
                                            "avatarUrls":{
                                                        "16x16":"https://testing.atlassian.net/secure/useravatar?size=small&ownerId=daffduck%4testing.net&avatarId=10809",
                                                        "48x48":"https://testing.atlassian.net/secure/useravatar?ownerId=daffyduck%40testing.net&avatarId=10809"},
                                                        "displayName":"Daffy Duck","active":true},{
                                            "self":"https://testing.atlassian.net/rest/api/2/user?username=wazzy%40gmail.com",
                                            "name":"wazzy@gmail.com",
                                            "emailAddress":"wazzy@gmail.com",
                                            "avatarUrls":{
                                                        "16x16":"https://testing.atlassian.net/secure/useravatar?size=small&ownerId=wazzy%40gmail.com&avatarId=10204",
                                                        "48x48":"https://testing.atlassian.net/secure/useravatar?ownerId=wazzy%40gmail.com&avatarId=10204"},
                                                        "displayName":"wazzy",
                                                        "active":true},
                                            {"self":"https://testing.atlassian.net/rest/api/2/user?username=joey%40gmail.com",
                                            "name":"bugsbunny@gmail.com",
                                            "emailAddress":"bugsbunny@gmail.com",
                                            "avatarUrls":{
                                                        "16x16":"https://testing.atlassian.net/secure/useravatar?size=small&avatarId=10122",
                                                        "48x48":"https://testing.atlassian.net/secure/useravatar?avatarId=10122"},
                                                        "displayName":"Bugs Bunny",
                                                        "active":true},
                                            {"self":"https://testing.atlassian.net/rest/api/2/user?username=moocowgmail.com",
                                            "name":"moocow@gmail.com",
                                            "emailAddress":"moocow@gmail.com",
                                            "avatarUrls":{
                                                        "16x16":"https://testing.atlassian.net/secure/useravatar?size=small&ownerId=moocow40gmail.com&avatarId=10808",
                                                        "48x48":"https://testing.atlassian.net/secure/useravatar?ownerId=moocow%40gmail.com&avatarId=10808"},
                                                        "displayName":"Moo Cow","active":true}],
                                            "updated":"2012-09-10T14:25:45.000-0600","created":"2012-05-24T13:47:03.000-0600",
                        "customfield_11001":null,
                        "description":"v158 See attached pic.  everything is wrong.",
                        "priority":{
                                            "self":"https://testing.atlassian.net/rest/api/2/priority/11",
                                            "iconUrl":"http://dl.dropbox.com/no4.gif",
                                            "name":"4 - Low Priority","id":"11"},
                                            "customfield_11000":null,
                                            "issuelinks":[],
                                            "watches":{
                                                    "self":"https://testing.atlassian.net/rest/api/2/issue/bug-4990/watchers",
                                                    "watchCount":6,
                                                    "isWatching":true},
                        "customfield_10600":null,
                        "status":{"self":"https://testing.atlassian.net/rest/api/2/status/1",
                        "description":"The issue is open and ready for the assignee to start work on it.",
                        "iconUrl":"https://testing.atlassian.net/images/icons/status_open.gif",
                        "name":"Open","id":"1"},
                        "labels":[],
                        "workratio":-1,
                        "assignee":{
                                            "self":"https://testing.atlassian.net/rest/api/2/user?username=igloo",
                                            "name":"igloo",
                                            "emailAddress":"igloo@yahoo.com",
                                            "avatarUrls":{
                                                        "16x16":"https://testing.atlassian.net/secure/useravatar?size=small&ownerId=igloo&avatarId=10800",
                                                        "48x48":"https://testing.atlassian.net/secure/useravatar?ownerId=igloo&avatarId=10800"},
                                                        "displayName":"Igloo",
                                                        "active":true},
                        "customfield_10202":null,
                        "customfield_10200":null,
                        "customfield_10501":null,
                        "customfield_10500":null,
                        "project":{
                                            "self":"https://testing.atlassian.net/rest/api/2/project/HM",
                                            "id":"10000",
                                            "key":"bug",
                                            "name":"Bugging out",
                                            "avatarUrls":{
                                                        "16x16":"https://testing.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10200",
                                                        "48x48":"https://testing.atlassian.net/secure/projectavatar?pid=10000&avatarId=10200"}},
                        "customfield_10805":null,
                        "customfield_10700":null,
                        "customfield_10400":null,
                        "customfield_11200":null,
                        "timeestimate":null,
                        "customfield_11201":"Not Started",
                        "lastViewed":null,
                        "customfield_10800":null,
                        "components":[{
                                            "self":"https://testing.atlassian.net/rest/api/2/component/10018","id":"10018",
                                            "name":"Graphs"},{
                                                            "self":"https://testing.atlassian.net/rest/api/2/component/10200","id":"10200",
                                                            "name":"Hybrid Issues","description":"Issues with graphs"},{
                                                                    "self":"https://testing.atlassian.net/rest/api/2/component/10011","id":"10011",
                                                                    "name":"Curoers"}],
                        "customfield_10803":null,
                        "timeoriginalestimate":null,
                        "customfield_10804":null,
                        "customfield_10801":null,
                        "customfield_10900":{"self":"https://testing.atlassian.net/rest/api/2/customFieldOption/10201",
                        "value":"No",
                        "id":"10201"},
                        "customfield_10802":null}}]} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T01:38:30.563

该函数`json_decode`不返回字符串。

查看该功能的文档。

[http://fr2.php.net/function.json-decode.php](http://fr2.php.net/function.json-decode.php)

问题是您正在尝试回显该对象。下面的代码是错误的。

```
echo $issue_json; 
```

您可以使用 var_dump 查看从 json_decode 返回的对象的结构。

```
var_dump($issue_json); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T00:34:23.130

要回答问题标题，如果您的对象没有将其用作字符串的 __string 方法，则会引发异常。（我认为这在 5.2 中发生了变化），因此要在您需要的跃点上进行非爆炸字符串转换：

```
 if (is_object($arg)) {                                                
      $arg = method_exists($arg, '__toString') ? (string)$arg : 'Object'; 
    } 
```

# .net - 从 Excel 中删除功能区

> ID：13735595
> 
> 赞同：2
> 
> 时间：2012-12-06T01:36:49.210
> 
> 标签：.net, excel, excel-2007, excel-interop

我正在尝试从 Excel 窗口中删除功能区栏。目前我正在使用以下代码删除功能区。

```
excelApp.ExecuteExcel4Macro("SHOW.TOOLBAR(""Ribbon"",False)") 
```

但它也会删除单元格上方的所有内容，包括标题栏。我需要标题栏，以便用户可以移动、最小化、最大化和关闭窗口。理想情况下，我想删除整个功能区，但如果我可以最小化功能区上的图标，我会很满意。我可以通过单击标题栏上的黑色小矩形和三角形图标来最小化功能区图标，所以它必须是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T03:03:22.780

从来没有找到一个好的解决方法，除了 VBA 中的这个聪明的解决方案，你应该能够在 .net 中重新创建。

```
Sub HideRibbon()

Application.SendKeys ("^{F1}")

End Sub 
```

Ctrl+F1 是最小化和最大化功能区的组合，因此如果您真的愿意，可以将其用作切换按钮。如果您喜欢使用简单的 VBA，可以将其设置为在工作簿打开时运行。

# authentication - 允许真实用户在蛮力攻击处于活动状态时登录（并因节流而减慢）

> ID：13735596
> 
> 赞同：0
> 
> 时间：2012-12-06T01:36:56.880
> 
> 标签：authentication, denial-of-service

## 假设场景：

假设您有攻击者不断尝试登录您的网站。在 n 次尝试登录限制后，攻击者被迫等待一段时间，然后再次处理他们的登录尝试。由于在这种情况下我们谈论的是自动攻击，因此它不够聪明，无法确定节流是否处于活动状态，并且它会继续将用户/密码组合发布到登录表单。最终，限制超时结束，攻击者能够再向服务器发布一个用户/通行证组合，服务器进而激活该用户的限制。

**因此，这有效地为真实**用户创建了 DoS 情况，因为自动攻击确保登录限制始终处于活动状态，以便真实用户永远无法登录。

**如何应对这种情况？**

到目前为止，我有：

*   将已知成功登录尝试的 IP 列入白名单。如果真实用户从以前未知的 IP 登录，这将不起作用。
*   临时将失败的尝试 IP 列入黑名单。如果攻击来自不同的 IP，这将不起作用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-06T01:59:52.377

1.  向上游发送 Source-Quench（又名 ECN）
2.  SAML（安全断言标记语言）
3.  跟踪路由
4.  Port Knocking 和其他“双因素”计划
5.  比较登录数据包的代码——iptables
6.  Selinux/iptables-connmark
7.  接上6，“ip规则”（特别是mark&fwmark）
8.  iptables-extensions: connlimit / hashlimit
9.  验证码

提示：看到类似[的 Can't Access Plesk Admin Cause Of DOS Attack, Block IP Address Through SSH?](https://stackoverflow.com/questions/12301411/cant-access-plesk-admin-because-of-dos-attack-block-ip-address-through-ssh/13735926#13735926)

但纵深防御至关重要。

真挚地，

箭树

# ruby - Ruby：Regex - 如何将 [AZ] 之后的第一个数字 (0-9) 更改为 *？

> ID：13735597
> 
> 赞同：-2
> 
> 时间：2012-12-06T01:36:59.293
> 
> 标签：ruby

我想知道如何将字符串中大写字母（AZ）之后的第一个数字（0-9）更改为星号而不使用`sub`. 如果需要，您可以将其放入一个调用的方法中`replace_digit`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:43:30.553

```
a = "not here 0 but here A5 and here B7, okay?"
begin
  loop do
    a[/(?<=[A-Z])\d/] = "*"
  end
rescue IndexError
end
puts a
# not here 0 but here A* and here B*, okay? 
```

没有`sub`:)

**编辑：**我刚刚注意到“第一个数字” - 所以只需删除循环；如果您可以假设总会有匹配项，您也可以删除异常处理。

```
a = "not here 0 but here A5 and here B7, okay?"
a[/(?<=[A-Z])\d/] = "*"
puts a
# not here 0 but here A* and here B7, okay? 
```

**编辑2：**

这也有效，无需向后看：`a[/[A-Z](\d)/, 1] = "*"`

# ajax - GWT 的 RPC 和 AJAX 有区别吗？

> ID：13735602
> 
> 赞同：9
> 
> 时间：2012-12-06T01:37:13.110
> 
> 标签：ajax, gwt, web, gwt-rpc, websphere-7

与 AJAX 调用相比，用于从浏览器/javascript 到服务器的异步操作的 GWT（Google Web Toolkit）的 RPC（远程过程调用）如何不同或相似？

如果它们不同，有人可以帮助我了解它们的不同之处吗？

我还听说这个 RPC 实现不适用于所有服务器容器。例如，GWT 项目在 Apache Tomcat 中不起作用。

此外，这个 RPC 是 Google 的自定义实现，还是标准实现？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T03:50:25.593

1) GWT RPC`uses AJAX` 允许 GWT 应用程序的数据传输。

2) GWT RPC 将大量信息抽象出来，并封装了ajax，让您可以在JAVA 中编码，而不必担心不同的浏览器。

3) 它适用于 tomcat、 **jetty**和每个服务器容器。在某些情况下，人们错误地配置了路径（开发模式与生产模式会导致图像路径/ css 混淆）

4) RPC 确实是 Google 的 CUSTOM 实现。

# ios - iPad Safari 应用程序的cornerRadius 值是多少？

> ID：13735605
> 
> 赞同：0
> 
> 时间：2012-12-06T01:37:31.987
> 
> 标签：ios, ipad, uiview

我想在主视图的拐角处使用`cornerRadius`，看起来像 iPad 上的内置 Safari。我应该输入什么值？

　 ![在此处输入图像描述](../Images/0ac1d462f763fc7731ff3a40a64588dd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:45:44.050

至少在 iOS 6 中，如果你的控制器`wantsFullScreenLayout`没有`YES`. 否则，半径正是名称所说的，因此放大图像后，看起来您想要半径为 4 或 5。

# python - 如何添加 numpy 数组的两列？

> ID：13735608
> 
> 赞同：0
> 
> 时间：2012-12-06T01:37:54.757
> 
> 标签：python, numpy

我有两个`NumPy`行数相同的数组，但我想添加特定的列。

我尝试了以下方法：

```
src_array[:, 3] += column_array_to_add[:, 0] 
```

但是，这甚至不能解释。这样做的正确方法是什么`NumPy`？我希望能够用整数和字符串来做到这一点。

**编辑：**一个简短的、独立的测试脚本

```
import numpy
src = numpy.array([["a", "b"], ["c", "d"], ["e", "f"]])
src2 = numpy.array([["x"], ["y"], ["z"]])

src[:, 1] += src2[:, 0]
print src
exit() 
```

此脚本返回以下错误：

```
src[:, 1] += src2[:, 0]
TypeError: unsupported operand type(s) for +=: 'numpy.ndarray' and 'numpy.ndarray' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T01:43:37.260

这样的事情有用吗？

```
import numpy as np

x = np.array([[1,2],[3,4]])

y = np.array([[5,6],[7,8]]) 
```

结果

```
>>> x
array([[1, 2],
       [3, 4]])
>>> y
array([[5, 6],
       [7, 8]])
>>> x[:,1] + y[:,1]
array([ 8, 12])
>>> x[:, 1] += y[:, 1] # using +=
>>> x[:, 1]
array([ 8, 12]) 
```

**更新：**

我认为这应该适合你：

```
src = np.array([["a", "b"], ["c", "d"], ["e", "f"]], dtype='|S8')
src2 = np.array([["x"], ["y"], ["z"]], dtype='|S8')

def add_columns(x, y):
    return [a + b for a,b in zip(x, y)]

def update_array(source_array, col_num, add_col):
    temp_col = add_columns(source_array[:, col_num], add_col)
    source_array[:, col_num] = temp_col  
    return source_array 
```

结果：

```
>>> update_array(src, 1, src2[:,0])
array([['a', 'bx'],
       ['c', 'dy'],
       ['e', 'fz']], 
      dtype='|S8') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:54:43.900

当您需要调试此类事情时，将其分解为更简单的步骤很有用。您是否弄错了切片，添加了两种不兼容的数组类型，添加了两种类型但试图将结果粘贴到不兼容的类型中（使用`+=`when`+`是 OK 但`=`不是），或者添加不兼容的数据值？其中任何一个都可以提高`TypeError`，那么我们怎么知道你在做什么呢？

好吧，一次做，看看：

切片：

```
>>> src[:, 1]
array(['b', 'd', 'f'], dtype='|S1')
>>> src[:, 1] = ['x', 'y', 'z']
>>> src
>>> array([['a', 'x'], ['c', 'y'], ['e', 'z']], dtype='|S1') 
```

没关系。添加呢？

```
>>> src + src2
TypeError: unsupported operand type(s) for +: 'numpy.ndarray' and 'numpy.ndarray' 
```

因此，我们已经发现了与您的更复杂情况相同的错误，没有切片，也没有`+=`，这使得调试更加容易。让我们更简单：

```
>>> s1, s2 = np.array('a'), np.array('b')
>>> s1 + s2
TypeError: unsupported operand type(s) for +: 'numpy.ndarray' and 'numpy.ndarray' 
```

所以即使添加两个 0D 数组也会失败！没有比这更简单的了。

也许是数据类型。如果我们使用整数会发生什么？

```
>>> n1, n2 = np.array(1), np.array(2)
>>> n1 + n2
3 
```

你可以一直回到你原来的例子，使用整数而不是字符串，它仍然可以正常工作：

```
>>> m1 = np.array([[1,2], [3,4], [5,6]])
>>> m2 = np.array([[7], [8], [9]])
>>> m1[:, 1] += m2[:, 0]
>>> array([[ 1,  9],
           [ 3, 12],
           [ 5, 15]]) 
```

这应该很明显问题出在数据类型上。那么，数据类型*是什么？*只需打印出数组，看看`numpy`它是什么：

```
>>> src = numpy.array([["a", "b"], ["c", "d"], ["e", "f"]])
>>> src
array([['a', 'b'], ['c', 'd'], ['e', 'f']], dtype='|S1') 
```

这`'|S1'`不是您在数据类型的用户指南部分中看到的友好数据类型之一[，](http://docs.scipy.org/doc/numpy/user/basics.types.html)它是一个结构定义，如[结构化数组](http://docs.scipy.org/doc/numpy/user/basics.rec.html#structured-arrays)部分中所述。这意味着一个 1 个字符的固定长度字符串。

这使问题变得显而易见：您不能添加两个 1 字符的固定长度字符串，因为结果不是 1 字符的固定长度字符串。

如果您真的想按原样工作，简单的解决方案是将它们保留为 Python 字符串：

```
>>> src = numpy.array([["a", "b"], ["c", "d"], ["e", "f"]], dtype=object)
>>> src2 = numpy.array([["x"], ["y"], ["z"]], dtype=object)    
>>> src[:, 1] += src2[:, 0] 
```

没有了`TypeError`。

或者，如果您明确给出`src`dtype `|S2`，`numpy`将允许这样做，并且第二个字符将为空白。它不会让你在其中添加另一个`|S1`，但你可以在 Python 中循环，或者找到一种复杂的方法来`numpy`为你做这件事。无论哪种方式，您当然不会获得任何通常的时间性能优势`numpy`，但您仍然可以获得使用固定尺寸固定单元的空间性能优势。

但你可能想退后一步，问问你想离开`numpy`这里做什么。你在这里的实际更高层次的目标是什么？大部分好处`numpy`来自使用`numpy`知道如何使用的严格的 C/Fortran 风格的数据类型——它可以将它们紧密打包，无需额外的解引用（并且无需引用计数）即可访问它们，以多种方式进行操作，从乘法到在没有 Python 等帮助的情况下复制到打印，但它不能进行字符串操作。如果您尝试对字符串操作进行矢量化，则说明您使用了错误的库来执行此操作。如果您只是`numpy`因为有人说它很快而使用它，那么在很多情况下都是如此，但在这一次却不是。如果您正在使用`numpy`，因为其他一些代码正在向您传递`numpy`数据，但您没有`numpy`方式，没有什么能阻止您将其转换为纯 Python 数据。

# iphone - 使用 iOS SDK 检查 Internet 连接

> ID：13735611
> 
> 赞同：13
> 
> 时间：2012-12-06T01:38:01.780
> 
> 标签：iphone, objective-c, ios, ipad, connection

使用 iOS SDK 检查 Internet 连接的最佳方法是什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-06T01:42:10.550

最好的方法是使用可达性代码。在此处查看[苹果示例代码](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)。它有很多方便的方法来检查互联网可用性、Wifi/WAN 连接检查等。

例如：-

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(networkChanged:) name:kReachabilityChangedNotification object:nil];

reachability = [Reachability reachabilityForInternetConnection];
[reachability startNotifier];

- (void)networkChanged:(NSNotification *)notification
{

  NetworkStatus remoteHostStatus = [reachability currentReachabilityStatus];

  if(remoteHostStatus == NotReachable) { NSLog(@"not reachable");}
  else if (remoteHostStatus == ReachableViaWiFiNetwork) { NSLog(@"wifi"); }
  else if (remoteHostStatus == ReachableViaCarrierDataNetwork) { NSLog(@"carrier"); }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-08-06T03:48:54.200

可达性比它需要的要多得多，而且它还没有针对 ARC 进行更新。

这是我用纯 C 语言编写的解决方案。大部分代码直接取自 Reachability，但只提炼出必要的部分。我只希望它返回是否存在互联网连接，但您可以从评论中读取它是否基于找到 Wifi 或蜂窝网络返回 YES。

在继续共享代码之前的最后一个注意事项：您需要进入构建目标，选择构建阶段选项卡，然后将“SystemConfiguration.framework”添加到“Link Binary With Libraries”列表中。

```
#import <CoreFoundation/CoreFoundation.h>
#import <SystemConfiguration/SystemConfiguration.h>
#import <netdb.h>

BOOL networkReachable()
{
    struct sockaddr_in zeroAddress;
    bzero(&zeroAddress, sizeof(zeroAddress));
    zeroAddress.sin_len = sizeof(zeroAddress);
    zeroAddress.sin_family = AF_INET;

    SCNetworkReachabilityRef reachabilityRef = SCNetworkReachabilityCreateWithAddress(kCFAllocatorDefault, (const struct sockaddr *) &zeroAddress);

    SCNetworkReachabilityFlags flags;
    if (SCNetworkReachabilityGetFlags(reachabilityRef, &flags)) {
        if ((flags & kSCNetworkReachabilityFlagsReachable) == 0) {
            // if target host is not reachable
            return NO;
        }

        if ((flags & kSCNetworkReachabilityFlagsConnectionRequired) == 0) {
            // if target host is reachable and no connection is required
            //  then we'll assume (for now) that your on Wi-Fi
            return YES; // This is a wifi connection.
        }

        if ((((flags & kSCNetworkReachabilityFlagsConnectionOnDemand ) != 0)
            ||(flags & kSCNetworkReachabilityFlagsConnectionOnTraffic) != 0)) {
            // ... and the connection is on-demand (or on-traffic) if the
            //     calling application is using the CFSocketStream or higher APIs

            if ((flags & kSCNetworkReachabilityFlagsInterventionRequired) == 0) {
                // ... and no [user] intervention is needed
                return YES; // This is a wifi connection.
            }
        }

        if ((flags & kSCNetworkReachabilityFlagsIsWWAN) == kSCNetworkReachabilityFlagsIsWWAN) {
            // ... but WWAN connections are OK if the calling application
            //     is using the CFNetwork (CFSocketStream?) APIs.
            return YES; // This is a cellular connection.
        }
    }

    return NO;
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-27T15:30:29.080

试试这个代码：

```
- (BOOL)connectedToInternet
{
   NSURL *url=[NSURL URLWithString:@"http://www.google.com"];
   NSMutableURLRequest *request=[NSMutableURLRequest requestWithURL:url];
   [request setHTTPMethod:@"HEAD"];
   NSHTTPURLResponse *response;
   [NSURLConnection sendSynchronousRequest:request returningResponse:&response error: NULL];

   return ([response statusCode]==200)?YES:NO;
} 
```

# java - 如何修复Tomcat服务器中的错误内存泄漏

> ID：13735616
> 
> 赞同：4
> 
> 时间：2012-12-06T01:38:09.000
> 
> 标签：java, deployment, memory-leaks, tomcat7

我对 Tomcat 服务器中的内存泄漏有疑问。
当我取消部署并重新部署时，错误消息战争出现如下：

> 以下 Web 应用程序已停止（重新加载、取消部署），但它们之前运行的类仍加载到内存中，从而导致内存泄漏（使用分析器确认）：/myWebApplication

我该如何修复它并正常部署
如果有人知道，请帮助我。
非常感谢你 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:43:43.267

确保您实现了 ServletContextListener 并清理了在调用 contextDestroyed() 时可能仍处于活动状态或引用的任何资源（例如线程、计时器、单例、休眠）。

# java - 是否可以编写一个调用 java 函数的 ant 目标？

> ID：13735621
> 
> 赞同：1
> 
> 时间：2012-12-06T01:39:05.570
> 
> 标签：java, ant

您如何编写一个将文件作为输入并将所有空白 ' ' 字符替换为 '' 的 ant 目标（即，我需要一个 ant 目标来“缩小”输入文本文件并将其写入磁盘）？

我知道在Java中它只是做这样的事情：

```
public void minify(String originalString){
    String minifiedFile = originalString.replaceAll(" ", "");
} 
```

但是如何让 ant 目标调用“minify()”函数以及如何在 Ant 中传入参数“originalString”？

将不胜感激所有/任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T03:29:20.170

你试过 Ant-Contrib 的[PropertyRegex](http://ant-contrib.sourceforge.net/tasks/tasks/propertyregex.html)标签吗？这将对给定的字符串执行“正则表达式替换”。

但是，听起来您可能正在尝试对整个文件执行此操作，在这种情况下，我将编写整个 Java 程序（而不仅仅是单个函数）并使用 ant 的内置[`Java`](https://ant.apache.org/manual/Tasks/java.html)任务调用该程序。

或者，正如@jahroy 在评论中建议的那样，您可以使用 Ant 的内置[`exec`](https://ant.apache.org/manual/Tasks/exec.html)任务来调用[`sed`](https://www.gnu.org/software/sed/manual/sed.html). 这实际上可能是最简单的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T04:44:51.183

最新版本的 ant 支持基于正则[表达式的字符串替换](http://ant.apache.org/manual/Tasks/replaceregexp.html)。这是来自蚂蚁网站的代码示例

```
<replaceregexp match="\s+" replace=" " flags="g" byline="true">
    <fileset dir="${html.dir}" includes="**/*.html"/>
</replaceregexp> 
```

对于最初的问题 - 是的。您可以通过以下方式扩展 ant

*   1） [编写蚂蚁任务](http://ant.apache.org/manual/develop.html)
*   2） [调用java程序](http://ant.apache.org/manual/index.html)
*   3) [调用任何程序，包括特定于平台的程序](http://ant.apache.org/manual/index.html)
*   4) [脚本](http://ant.apache.org/manual/Tasks/script.html)

选项 3（调用 sed 之类的程序）会在构建环境的长期维护中引起问题，但是

# android - 无法将图像存储到内部存储目录

> ID：13735623
> 
> 赞同：0
> 
> 时间：2012-12-06T01:39:08.533
> 
> 标签：android, directory, storage, store

我想创建一个文件夹并将图像存储到手机的内部存储器中。我尝试使用下面的代码从 url 下载图像。它设法将图像加载到 imageView 中，但无法在内部存储中存储和创建文件夹。另外，我没有收到任何警告或错误消息。知道下面的代码有什么问题吗？

```
 Bitmap bm = null;
        InputStream in;

            try{

                in = new java.net.URL("http://blogs.computerworld.com/sites/computerworld.com/files/u177/google-nexus-4.jpg").openStream();
                bm = BitmapFactory.decodeStream(new PatchInputStream(in));
                File mydir = this.getDir("mydir", Context.MODE_PRIVATE);
                mydir.mkdirs();
                File fileWithinMyDir = new File(mydir, "myfile");
                FileOutputStream out = new FileOutputStream(fileWithinMyDir);
                bm.compress(Bitmap.CompressFormat.JPEG, 85, out);

            }
            catch(Exception e1){
                e1.printStackTrace();
            }
  ImageView img = (ImageView) findViewById(R.id.image_display);
  img.setImageBitmap(bm); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:46:38.377

使用以下内容：

```
String path=Environment.getExternalStorageDirectory()
                                .toString() + File.separator 
```

获取目录并保存图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T01:51:03.407

一旦你有了你的位图`bm`：

```
FileOutputStream fos;

try {
    fos = openFileOutput("file_Name", Context.MODE_PRIVATE);
    bm.compress(Bitmap.CompressFormat.PNG, 100, fos);
    fos.close();
}catch (Exception e){
...
} 
```

将您的文件保存到内部存储

# sql - 在表 A 中更新之前将行插入表 B

> ID：13735629
> 
> 赞同：0
> 
> 时间：2012-12-06T01:39:46.040
> 
> 标签：sql, oracle

我有一个名为的表`applications`和一个名为 的表`application_history`。我想保留应用程序的历史记录，并且想到每当`applications`表中的行更新时使用触发器将该行复制到`application_history`实际更新之前。

目前，我已经从另一个 SO 帖子中写出了这段代码：

```
create or replace 
trigger APPLICATION_UPDATE_TRG
BEFORE UPDATE ON TBL_APPLICATIONS 
FOR EACH ROW
DECLARE
  CURSOR curAppHistory IS
    SELECT record_number, job_id, submitted_date, status_id, id
      FROM tbl_application
      WHERE id = :old.id;
  vRowAppHistory curAppHistory%ROWTYPE;
BEGIN
  OPEN curAppHistory;
  FETCH curAppHistory INTO vRowAppHistory;
  CLOSE curAppHistory;
  INSERT INTO tbl_application_history
  (record_number, job_id, submitted_date, status_id, application_id)
  VALUES (vRowAppHistory.record_number, vRowAppHistory.job_id, vRowAppHistory.submitted_date, 
  vRowAppHistory.status_id, vRowAppHistory.id);
END; 
```

但是，它没有正确编译。SQL Developer 抛出 3 个关于命令未正确结束和语句被忽略的错误。

这样做的正确方法是什么？

编辑：错误：

```
Error(2,10): PLS-00341: declaration of cursor 'CURAPPHISTORY' is incomplete or malformed
Error(3,5): PL/SQL: SQL Statement ignored
Error(4,12): PL/SQL: ORA-00942: table or view does not exist
Error(6,18): PL/SQL: Item ignored
Error(9,3): PL/SQL: SQL Statement ignored
Error(9,28): PLS-00320: the declaration of the type of this expression is incomplete or malformed
Error(11,3): PL/SQL: SQL Statement ignored
Error(14,29): PLS-00320: the declaration of the type of this expression is incomplete or malformed
Error(14,44): PL/SQL: ORA-00984: column not allowed here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:55:42.293

`Error(4,12): PL/SQL: ORA-00942: table or view does not exist`

错字？您在此处指定了两个不同的表。

`BEFORE UPDATE ON TBL_APPLICATIONS`

`FROM tbl_application`

无论如何，你会得到`ORA-04091`这个触发器。类似的测试用例：

```
SYSTEM@dwal> create table t (key number primary key, value varchar2(10));

Table created.

SYSTEM@dwal> insert into t values (1, 'abcdef');

1 row created.

SYSTEM@dwal> insert into t values (2, 'ghijkl');

1 row created.

SYSTEM@dwal> commit;

Commit complete

SYSTEM@dwal> ed
Wrote file S:\\tools\buffer.sql

  1  create or replace trigger tt
  2  before update on t for each row
  3  declare
  4  cursor c is
  5    select key, value
  6      from t
  7     where key = :old.key;
  8  v c%rowtype;
  9  begin
 10    open c;
 11    fetch c into v;
 12    close c;
 13    dbms_output.put_line(v.value);
 14* end;
09:58:51 SYSTEM@dwal> /

Trigger created.

SYSTEM@dwal> update t set value = '123';
update t set value = '123'
       *
ERROR at line 1:
ORA-04091: table SYSTEM.T is mutating, trigger/function may not see it
ORA-06512: at "SYSTEM.TT", line 3
ORA-06512: at "SYSTEM.TT", line 8
ORA-04088: error during execution of trigger 'SYSTEM.TT' 
```

你可能应该这样做：

```
INSERT INTO tbl_application_history 
(record_number, job_id, submitted_date, status_id, application_id)
VALUES 
(:old.record_number, :old.job_id, :old.submitted_date, :old.status_id, :old.id); 
```

在这种情况下，整个触发器将是一个插入语句：

```
SYSTEM@dwal> create table t_log (key number, value varchar2(10));

Table created.

SYSTEM@dwal> ed
Wrote file S:\\tools\buffer.sql

  1  create or replace trigger tt
  2  before update on t for each row
  3  begin
  4    insert into t_log values (:old.key, :old.value);
  5* end;
SYSTEM@dwal> /

Trigger created.

SYSTEM@dwal> update t set value = '123';

2 rows updated.

SYSTEM@dwal> commit;

Commit complete.

SYSTEM@dwal> select * from t_log;

       KEY VALUE
---------- ----------
         1 abcdef
         2 ghijkl

SYSTEM@dwal> select * from t;

       KEY VALUE
---------- ----------
         1 123
         2 123 
```

# windows - 在 XAML/WinRT 中本地化附加属性

> ID：13735630
> 
> 赞同：4
> 
> 时间：2012-12-06T01:39:53.063
> 
> 标签：windows, xaml, localization, windows-runtime

我正在尝试本地化我的 WinRT 应用程序。我不需要太花哨的东西，所以我一直在 XAML 元素上使用 x:Uid 以及具有诸如“PageTitleTextBox.Text”设置的属性的资源文件。在我遇到附加属性的问题之前，这种方法效果很好。

我已经使用与我在其他示例中看到的类似的标记定义了一些应用栏按钮：

```
<Button x:Name="AddFolderButton" Click="AddFolderButton_Tapped" x:Uid="FoldersPageAppBarAddFolderButton" AutomationProperties.Name="Test" Style="{StaticResource AppBarButtonStyle}">
    <Button.Content>&#xE109;</Button.Content>
</Button > 
```

在这种情况下，我想本地化 AddFolderButton 的标签，当前由`AutomationProperties.Name`. 我尝试将资源文件中的密钥设置为`FoldersPageAppBarAddFolderButton.AutomationProperties.Name`，但这在运行时失败。

是否可以使用 XAML 本地化此标签，或者我是否需要在代码隐藏文件中以编程方式执行此操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T05:31:04.300

您需要稍微不同地处理附加属性，即它们的命名空间必须包含在资源键中，如下所示：

```
FoldersPageAppBarAddFolderButton.[using:Windows.UI.Xaml.Automation]AutomationProperties.Name 
```

[你可以在这里](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh965329.aspx)阅读更多关于它的信息。

# jquery - 删除基于名称的 jQuery 验证

> ID：13735631
> 
> 赞同：2
> 
> 时间：2012-12-06T01:39:59.933
> 
> 标签：jquery, jquery-validate

我正在尝试使用 jQuery 验证插件来验证表单，但我需要完全删除它使用 name 属性的能力。我的部分表单是根据递增的计数器动态创建的，我只想使用类。

有没有办法做到这一点？

我已经实现了 addClassRules 方法并为每个字段添加了我的所有类，但是如果我从字段中删除该类，它仍然会根据名称字段进行验证。

这真的开始令人沮丧。

```
jQuery.validator.addClassRules({
    username: { 
        required: true, 
        minlength: 2, 
        remote: "whatever.php" 
    }
}); 
```

等等

```
<div class="control-group">
    <label class="control-label" for="username">
        <?php echo $entry_username; ?>
    </label>
    <div class="controls">
        <input type="text" class="input-large" 
               name="username" id="username" 
               value="<?php echo $username; ?>" required>
    </div>
</div> 
```

如您所见，此元素没有用户名类，但如果该类不存在，则验证会回退到使用 name 属性。

我只想使用类进行验证。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T06:26:56.463

使用内置`rules()`方法添加规则并通过`class`. [请参阅文档。](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)

注意：调用*后***必须**调用该方法。*`.validate()`*

 *我有一个非常大的表单，用户可以在其中动态添加字段。这是我用来确保我新创建的字段也是验证的一部分的确切方法。

（如果您`class`从 中删除`input`，它将**不会**（不能）验证该`name`属性，因为该`name`属性未在`.validate()`选项或规则中的任何地方使用。）

**HTML：**

```
<form id="form">
    <input type="text" class="myclass" name="whatever" />
</form> 
```

**jQuery：**

```
$("#form").validate({
    // my options
});

// the following method must come AFTER .validate()
$('#form').find('.myclass').each(function() {
    $(this).rules('add', {
        required: true,
        minlength: 5,
        messages: {
            required: "Required input",
            minlength: jQuery.format("At least {0} characters are necessary")
        }
    });
}); 
```

[**jsFiddle 演示**](http://jsfiddle.net/kSFKE/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T01:51:31.767

1.  只需下载源代码，例如[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/jquery.validate.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/jquery.validate.js)，然后，
2.  对单词进行搜索替换`name`并将其替换为另一个属性，例如`validate_on`
3.  使用该新来源代替旧来源。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-06T02:05:27.067

如果您仅使用特定的类名进行验证怎么办？有什么不同`name`？

例如：（`validatable-username`不必那么长，但你明白我的想法）

然后它不能回退到名称。*

# asp.net-mvc - MVC 新手，我是唯一一个被这种常见场景搞砸的人吗

> ID：13735634
> 
> 赞同：0
> 
> 时间：2012-12-06T01:40:31.983
> 
> 标签：asp.net-mvc, jquery-mobile

这是场景 - 使用带有 jquery mobile 的 asp.net MVC - 两者都是新手

**问题：后退按钮向使用POST**创建的页面发送**GET**

 **设想：

1.  第 1 页有一个搜索框和提交按钮 - clck submit 会**POST**到第 2 页。
2.  第 2 页有搜索结果链接列表，单击搜索结果，转到第 3 页
3.  单击第 3 页上的返回按钮，它会将**GET**发送到第 2 页。

在 Safari 和 Firefox 上试过。Firebug 在后退按钮上显示 GET。

这很常见吗？你会如何处理这个问题？

A）提交表单时，以某种方式将文本框添加到 URL（听起来很棘手）

B) 同时使用 HTTPPost 和 HTTPGet 标记搜索页面操作？然后将搜索文本保存在会话中或某处？

C) 有更好的选择吗？

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:57:04.247

听起来您希望第 1 页和第 2 页具有相同的 url，并且本质上是“回发”到第一页，这样如果您向后退，您就会回到第一个原始未发布的页面。

您可以通过使用 [HttpPost] 和 [HttpGet] 属性来实现此目的

在您的控制器中，您可以拥有这个

```
[HttpGet]
public ActionResult Search()
{
   //action result get code
}

[HttpPost]
public ActionResult Search()
{
   //your result post code here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:02:10.130

我认为可能以错误的方式处理了这个问题。一般来说，POST 应该用于可能修改服务器上的状态（更新数据库等）的请求，而 GET 应该用于只读操作。

在这种情况下，它是只读操作，因此 HTTP Get 是要使用的正确 http 动词。假设您正在使用 Razor，您的表单操作看起来像

```
@using(Html.BeginForm("Index", "Search", FormMethod.Get))
//generates an url like /search?q=searchterm 
```**

# css - 使用 id 和类的 CSS 样式链接

> ID：13735635
> 
> 赞同：4
> 
> 时间：2012-12-06T01:40:36.353
> 
> 标签：css, class, styling

有没有一种方法可以使用 id 或 class 来设置链接样式，而无需为每个单独的元素创建新的选择器？例如，像这样或接近这样的东西会更可取

```
#logo {
    a: link {color: black}
    a: visited{color: black}
    a: hover{color: black}
} 
```

但是，上面的语法不起作用，我只能找到

```
#logo a:hover {
    color: black;
} 
```

#logo a：已访问 {
颜色：白色
}

我觉得有比这更简单的方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T01:43:32.257

继承人如何对我认为应该工作的所有链接执行此操作：

```
#logo a:link,
#logo a:visited,
#logo a:hover {
   color: black;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-31T08:29:25.860

当您在单个页面中处理带有标签的 CSS 中的不同样式时，并非所有浏览器都支持上述将标签样式与类或 ID 分开的方法。

可以按照以下方法：

```
**If using ID with Field** 
```

```
a:link#myID {
    color: green;
    background-color: transparent;
    text-decoration: none;
} 
a:visited#myID {
    color: pink;
    background-color: transparent;
    text-decoration: none;
}
a:hover#myID {
    color: red;
    background-color: transparent;
    text-decoration: underline;
}
a:active#myID {
    color: yellow;
    background-color: transparent;
    text-decoration: underline;
}
```

```
 <a  href="#" target="_blank" ID="myID">Click Here</a> 

**If using Class with Field** 
```

```
a:link.myClass {
    color: green;
    background-color: transparent;
    text-decoration: none;
} 
a:visited.myClass {
    color: pink;
    background-color: transparent;
    text-decoration: none;
}
a:hover.myClass {
    color: red;
    background-color: transparent;
    text-decoration: underline;
}
a:active.lx {
    color: yellow;
    background-color: transparent;
    text-decoration: underline;
}
```

```
<a  href="#" target="_blank" class="myClass">Click Here</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T01:44:05.827

不是直接在css中，而是有一些项目扩展了css

看看萨斯：

[http://sass-lang.com](http://sass-lang.com)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T01:44:40.227

我也相信当前的 CSS 语法并不是那么理想。我个人的选择是使用像[LESS](http://lesscss.org/)这样的东西，在那里你可以获得更直观和紧凑的语法来设计你的作品。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T01:47:18.703

对于纯 CSS，您必须指定每个伪选择器，但您可以将它们分组以应用相同的样式属性；

```
#logo a:link,
#logo a:visited,
#logo a:hover {
  color: black;
} 
```

请注意[链接伪类的顺序很重要](http://www.456bereastreet.com/archive/200811/the_order_of_link_pseudo-classes_matters/)。

# memory - 将 [(K,[V])] 转置为 [(V,[K])] 时出现内存故障

> ID：13735640
> 
> 赞同：15
> 
> 时间：2012-12-06T01:41:03.523
> 
> 标签：memory, haskell, parsec

我有一个 279MB 的文件，其中包含约 1000 万个键/值对，以及约 500,000 个唯一键。它按键分组（每个键只需要编写一次），因此给定键的所有值都在一起。

我想要做的是转置关联，创建一个文件，其中对按值分组，并且给定值的所有键都存储在一起。

目前，我正在使用 Parsec 将成对作为元组列表读取`(K,[V])`（使用惰性 IO，因此我可以在 Parsec 处理输入文件时将其作为流处理），其中：

```
newtype K = K Text deriving (Show, Eq, Ord, Hashable)
newtype V = V Text deriving (Show, Eq, Ord, Hashable)

tupleParser :: Parser (K,[V])
tupleParser = ...

data ErrList e a = Cons a (ErrList e a) | End | Err e                

parseAllFromFile :: Parser a -> FilePath-> IO (ErrList ParseError a) 
parseAllFromFile parser inputFile = do                               
  contents <- readFile inputFile                                     
  let Right initialState = parse getParserState inputFile contents   
  return $ loop initialState                                         
  where loop state = case unconsume $ runParsecT parser' state of    
                        Error err             -> Err err             
                        Ok Nothing _ _        -> End                 
                        Ok (Just a) state' _  -> a `Cons` loop state'
        unconsume v = runIdentity $ case runIdentity v of            
                                      Consumed ma -> ma              
                                      Empty ma -> ma                 
        parser' = (Just <$> parser) <|> (const Nothing <$> eof) 
```

我试图将元组插入到 a`Data.HashMap.Map V [K]`中以转置关联：

```
transpose :: ErrList ParseError (K,[V]) -> Either ParseError [(V,[K])]          
transpose = transpose' M.empty                                                   
  where transpose' _ (Err e)          = Left e                                
        transpose' m End              = Right $ assocs m                      
        transpose' m (Cons (k,vs) xs) = transpose' (L.foldl' (include k) m vs) xs
        include k m v = M.insertWith (const (k:)) v [k] m 
```

但是当我尝试它时，我得到了错误：

```
memory allocation failed (requested 2097152 bytes) 
```

我可以想到几件事我做错了：

1.  2MB 似乎有点低（远小于我机器安装的 2GB RAM），所以也许我需要告诉 GHC 可以使用更多？
2.  我的问题可能与算法/数据结构有关。也许我使用了错误的工具来完成这项工作？
3.  我尝试使用惰性 IO 可能会回来咬我。

我现在倾向于（1），但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:09:00.710

数据有没有增加的可能？如果是，那么我建议不要将 while 文件读入内存并以另一种方式处理数据。

一种简单的可能性是为此使用关系数据库。这将相当容易 - 只需加载您的数据，创建一个适当的索引并根据需要对其进行排序。数据库将为您完成所有工作。我肯定会推荐这个。

* * *

另一种选择是创建您自己的基于文件的机制。例如：

1.  选择一些`l`合理的限制加载到内存中。
2.  创建`n = d `div` l`文件，`d`您的数据总量在哪里。（希望这不会超过您的文件描述符限制。您也可以在每次操作后关闭并重新打开文件，但这会使过程非常缓慢。）
3.  按顺序处理输入并将每一对`(k,v)` 放入文件 number`hash v `mod` l`中。这确保了具有相同值的对`v`将在同一个文件中结束。
4.  分别处理每个文件。
5.  将它们合并在一起。

它本质上是一个带有文件桶的哈希表。此解决方案假定每个值具有大致相同数量的键（否则某些文件可能会变得异常大）。

* * *

您还可以实现一个[外部排序](https://en.wikipedia.org/wiki/External_sorting)，它允许您对基本上任何数量的数据进行排序。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T10:59:40.057

为了允许大于可用内存的文件，最好一次以一口大小的块处理它们。

这是将文件 A 复制到新文件 B 的可靠算法：

*   创建文件 B 并将其锁定到您的机器
*   开始循环
    *   如果文件 A 中没有下一行，则退出循环
    *   读入文件 A 的下一行
    *   对生产线应用处理
    *   检查文件 B 是否已经包含该行
    *   如果文件 B 不包含该行，则将该行附加到文件 B
    *   转到循环的开头
*   解锁文件 B

将文件 A 的副本复制到临时文件夹中并在您使用它时锁定它也是值得的，这样网络上的其他人就不会被阻止更改原始文件，但您拥有文件的快照，因为它是此时程序开始。

我打算将来重新审视这个答案并添加代码。

# android - 使用字符串作为where条件查询sqlite

> ID：13735643
> 
> 赞同：0
> 
> 时间：2012-12-06T01:41:22.117
> 
> 标签：android

为什么当我在数据库中使用字符串作为 where 条件时，我的程序只是强制关闭。虽然如果我使用数字作为查询条件它工作正常。请帮助我，谢谢

```
public ArrayList<Contact> getAvailableList() 
{
    // TODO Auto-generated method stub
    ArrayList<Contact> results = new ArrayList<Contact>();
    String[] columns = new String[]{KEY_NAME, KEY_NUMBER, KEY_STATUS};
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_STATUS +"=available" , null, null, null, KEY_NAME);
    String sName = "";
    String sNum = "";
    String status = "";
    int iName = c.getColumnIndex(KEY_NAME);
    int iNumber = c.getColumnIndex(KEY_NUMBER);
    int iStatus = c.getColumnIndex(KEY_STATUS);
    Contact contact;
    for(c.moveToFirst(); ! c.isAfterLast(); c.moveToNext())
    {
        contact = new Contact();
        sName += c.getString(iName);
        sNum += c.getString(iNumber);
        status += c.getString(iStatus);
        contact.setName(sName);
        //contact.setPhoneNumber(sNum);
        contact.setPhoneNumber("0".concat(sNum));
        contact.setStatus(status);
        results.add(contact);
        sName = "";
        sNum = "";
        status = "";
    }
    return results;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:45:07.590

您需要用引号将 SQL 中的字符串包装起来，如下所示：

```
//                                                       Add these  v         v
Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_STATUS +"='available'", 
        null, null, null, KEY_NAME); 
```

或者如果你想使用动态数据，你应该使用`selectionArgs`参数：

```
String status = "available";
Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_STATUS +"=?", 
        new String[] {status}, null, null, KEY_NAME); 
```

这种方法简化了跟踪复杂 Java/SQL 字符串中匹配引号的过程，更重要的是它可以保护您免受 SQL 注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T01:46:03.443

你忘记`' '`了`available`

```
 Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_STATUS +"='available'" , null, null, null, KEY_NAME); 
```

# ruby-on-rails-3 - 活动记录不破坏

> ID：13735647
> 
> 赞同：0
> 
> 时间：2012-12-06T01:42:00.567
> 
> 标签：ruby-on-rails-3, activerecord, rake

我有以下代码大部分都在工作。但是我确实收到了无法保存的错误消息，因为邮件地址已经存在。当我先做一个 destroy_all 时，这怎么可能？

我的猜测：有多个行具有相同的邮件地址（这是真的），并且不知何故，它似​​乎并没有破坏那些通过下面的过程插入的行。

有没有办法强迫它也考虑到这些？

```
namespace :db do

  desc "load vdc members from google CSV"
  task :load_csv_data  => :environment do
    require 'csv'

    CSV.foreach("data.csv",{:headers=>:first_row}) do |row|

      User.destroy_all(:email => row[7])

      user = User.new(
          :password => "temppwd",
          :name => row[1],
          :first_name => row[2],
          :birth_date => row[3],
          :street => row[4],
          :zipcode => row[5],
          :town => row[6],
          :email => row[7],
          :certificate_id => Certificate.find_by_name(row[9]).id,
          :external_certificates => row[11],
          :education_level => row[12],
          :phone_number => row[15]
      )
      if user.save
        puts "saved " + row[1] + " " + row[2]
      else
        puts "Could not save " + row[1] + " " + row[2] + " due to "
        puts user.errors.full_messages.first if user.errors.any?
      end
    end
  end
end 
```

# node.js - 在 node-xmpp 中检索名册

> ID：13735648
> 
> 赞同：2
> 
> 时间：2012-12-06T01:42:07.553
> 
> 标签：node.js, xmpp, node-xmpp

我无法理解如何在 node-xmpp（GTalk 帐户）中检索 XMPP 名册（以及最终每个联系人的存在状态）。

我的示例代码可以登录和连接，但我对发送和收听的内容有点迷茫：

```
var xmpp = require('node-xmpp')

jid = 'example@gmail.com'
password = 'xxxxxxxxxxxxxx'

// Establish a connection
var conn = new xmpp.Client({
    jid: jid,
    password: password,
    host: 'talk.google.com',
    port: 5222
})

conn.on('online', function() {
    console.log('ONLINE')
    var roster = new xmpp.Element('iq', {
        type: 'get',
        from: jid,
        id: new Date().getTime()
    }).c('query', { xmlns: 'jabber:iq:roster' })
    conn.send(roster) // Now what?
})

conn.on('error', function(e) {
    console.log(e)
}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T06:00:24.037

看起来我的名册查询的结构是错误的，这可以正常工作：

```
conn.on('online', function() {
  console.log('ONLINE')
  var roster = new xmpp.Element('iq', {
    id: 'roster_0',
    type: 'get'
  }).c('query', {
    xmlns: 'jabber:iq:roster'
  })
  conn.send(roster)
}) 
```

# java - 为什么 Tomcat 7 内存使用情况看起来像锯齿状？（图片）

> ID：13735656
> 
> 赞同：3
> 
> 时间：2012-12-06T01:42:33.817
> 
> 标签：java, jakarta-ee, tomcat, tomcat7

为什么 Tomcat 7 内存使用情况看起来像锯齿状？不是更稳定吗？和gc有关系吗？如果是，这是否意味着存在“泄漏”？顺便说一下，这台服务器是一个测试服务器，上面什么都没有。

谢谢！

[Tomcat 7 内存图片链接](http://s14.postimage.org/mnrm7t20v/tomcatsawp.png)

蓝色是已用堆
橙色是堆大小

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T01:56:01.123

这正是 Java 垃圾收集器的工作方式。它让内存累积直到达到某个阈值，然后运行垃圾收集器并释放它可以释放的东西。所以并不是说 Tomcat 实际上*使用*了更多的内存，只是 Java 还没有费心去释放它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T01:55:41.763

锯纹*很正常*。

即使应用程序什么都不做，也有一些后台任务会产生垃圾。

# python - Gevent、uWSGI、Gevent Loop 以及如何每分钟创建一次全局哈希

> ID：13735659
> 
> 赞同：0
> 
> 时间：2012-12-06T01:43:10.547
> 
> 标签：python, uwsgi, gevent

我将 uWSGI 与 gevent 循环一起使用。我还有一个函数，它每分钟从哈希存储的 redis 更新一次 python 字典。

我的实时请求需要访问该哈希。

这是我的 uWSGI 函数，它每 60 秒加载一次哈希。

```
def loadRedisDict():
    global data
    data = r.hgetall('data')

from uwsgidecorators import *
    @rbtimer(60)
    def load_redis(signum):
        loadRedisDict() 

@post('/test')
@post('/test/')
def test(): 
   print data['foo']
   yield 'test' 
```

我注意到即使字典已更新，并非所有请求都尊重该哈希中的内容。即使我有一个空的哈希请求，也会在 prev 哈希中提供内容。所以....我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:02:37.073

我想您正在多处理模式下运行，因此一次只有一个进程会更新其字典。

有个窍门：

@rbtimer（60，目标='工人'）

每次都会在所有工作人员中运行计时器处理程序。

# joomla - 如何检查joomla 2.5的消息队列中是否有消息？

> ID：13735666
> 
> 赞同：1
> 
> 时间：2012-12-06T01:43:36.243
> 
> 标签：joomla, joomla2.5

如何检查消息队列中是否有消息？例如，我该怎么做：

```
<script type="text/javascript">
    var message='<jdoc:include type="message" />'
        if(message!="")
          {
             alert(message);
          }
</script> 
```

我正在使用 joomla 2.5。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T04:14:12.097

所以，问题是真的需要从`message`变量中去除 HTML。需要注意的几点：

1.  Joomla！可能会返回多条消息。
2.  警报是浏览器的阻塞事件......你真的想这样做吗？

`JSON`首先，您可以使用一些基本的 PHP将消息放在一个块中。

```
<?php
    $jAp = JFactory::getApplication();
    $messagesJSON = json_encode($jAp->getMessageQueue());
?> 
```

然后稍后在您的模板中，您可以`echo`将消息 JSON 数组放入您的 Javascript 中，类似于您最初的尝试。

```
<script type="text/javascript">
    var messageJSON = <?php echo $messagesJSON; ?>
    ... then loop through the JSON block 
```

这样，您最终只会得到消息的文本和类型，而不是当前样式/覆盖的特定格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T03:58:30.643

我无法理解您的问题，但您可以像这样获取味精队列

```
$mainframe= JFactory::getApplication();
    $messages = $mainframe->getMessageQueue();
    if (is_array($messages)) {
       echo '<ul id="system-messages">';
       foreach($messages as $msg) {
          echo '<li class="' . $msg['type'] . '">' . $msg['message'] . '</li>';      
       }
       echo '</ul>';
    } 
```

# redis - Redis .GetAll() 函数用于获取排序集

> ID：13735670
> 
> 赞同：1
> 
> 时间：2012-12-06T01:43:57.203
> 
> 标签：redis

阅读有关如何在[此处](https://github.com/ServiceStack/ServiceStack.Redis/blob/master/tests/ServiceStack.Redis.Tests/Examples/BlogPostExample.cs#L345)进行排序集的文档很有趣。

```
public void Show_a_TagCloud()
    {
        //Get strongly-typed clients
        using (var redisBlogPosts = redisClient.GetTypedClient<BlogPost>())
        {
            var newIncomingBlogPosts = redisBlogPosts.GetAll();

            foreach (var newBlogPost in newIncomingBlogPosts)
            {
                //For every tag in each new blog post, increment the number of times each Tag has occurred 
                newBlogPost.Tags.ForEach(x =>
                    redisClient.IncrementItemInSortedSet("urn:TagCloud", x, 1));
            }

            //Show top 5 most popular tags with their scores
            var tagCloud = redisClient.GetRangeWithScoresFromSortedSetDesc("urn:TagCloud", 0, 4);
            Debug.WriteLine(tagCloud.Dump());
        }
        /* Output:
        [
            [
                NoSQL,
                 4
            ],
            [
                Scalability,
                 2
            ],
            [
                JSON,
                 2
            ],
            [
                Redis,
                 1
            ],
            [
                Raven,
                 1
            ],
        ]
        */
    } 
```

要执行诸如列出热门项目的任务，您必须先调用 redistypedclient.GetAll() 来检索所有记录，然后使用 for 循环来标记受欢迎程度。我的问题是，如果您的 redis 数据库中有大量数据，此操作会变得昂贵且运行缓慢吗？

# android - 根据主题更改 Drawable

> ID：13735675
> 
> 赞同：39
> 
> 时间：2012-12-06T01:44:32.487
> 
> 标签：android, styles

我有两种不同颜色的图像，对应于 Android 中的两个不同主题。我想在我的操作栏中使用它们。我想为图标引用可绘制对象，与主题无关，但让该可绘制对象引用浅色主题的浅色和浅色主题的深色。

在菜单中：

```
 <item
        android:id="@+id/menu_attach_existing_picture"
        android:icon="@drawable/buttonface_picture"
        android:showAsAction="always"
        android:title="@string/menu_attach_existing_picture">
    </item> 
```

然后在样式中，我希望将 @drawable/buttonface_picture 映射到浅色主题中的 @drawable/buttonface_picture_light 和深色主题中的 @drawable/buttonface_picture_dark 。

我觉得必须有一种方法，但我很难找到语法。如果它改变了什么，我正在使用 ActionBarSherlock。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-12-06T02:16:22.690

似乎我总是离我的答案只有一两个谷歌搜索。解决方案是：

在样式.xml

```
<attr name="buttonface_picture" format="reference"/> 
```

然后在实际主题中：

```
<item name="buttonface_picture">@drawable/buttonface_picture_dark</item> 
```

或者

```
<item name="buttonface_picture">@drawable/buttonface_picture_light</item> 
```

然后，在 menu.xml 中：

```
<item
    android:id="@+id/menu_attach_existing_picture"
    android:icon="?attr/buttonface_picture"
    android:showAsAction="always"
    android:title="@string/menu_attach_existing_picture">
</item> 
```

[访问资源页面](http://developer.android.com/guide/topics/resources/accessing-resources.html#ReferencesToThemeAttributes)与[此 SO](https://stackoverflow.com/questions/6375804/theme-styles-and-alias-nesting-not-working)相结合最终让它在我的脑海中点击。

# java - 码头 HTTP 日志记录

> ID：13735676
> 
> 赞同：18
> 
> 时间：2012-12-06T01:44:35.953
> 
> 标签：java, http, logging, jetty

我想让 Jetty 记录所有 HTTP 请求（连同正文）和响应。这是 Jetty 本身支持的吗？理想情况下，它会记录到我现有的 log4j 日志文件中。

我正在运行 Jetty 6。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-06T09:00:31.033

Jetty 带有一个可以以 NCSA 格式登录的请求记录器。该格式不包括您需要的请求正文等内容，但该标准格式将适合 webalizer 等工具。

如果您需要记录更多，您可以使用 logback 请求日志实现或通过实现 Jetty 的 RequestLog 接口编写自己的记录器。

除此之外，我强烈建议升级到 jetty7/8（相同的代码库，但 8 提供 servlet 3.0 功能）。或者直接搬到jetty9。

这是请求日志的 jetty9 文档：http: [//www.eclipse.org/jetty/documentation/current/configuring-logging.html#configuring-jetty-request-logs](http://www.eclipse.org/jetty/documentation/current/configuring-logging.html#configuring-jetty-request-logs)

jetty7/8 相同： [http ://wiki.eclipse.org/Jetty/Tutorial/RequestLog](http://wiki.eclipse.org/Jetty/Tutorial/RequestLog)

我把它作为一个练习让你找到 jetty6 文档或更好的升级。:)

好的，偶然发现jetty6文档：http: [//docs.codehaus.org/display/JETTY/Logging+Requests](http://docs.codehaus.org/display/JETTY/Logging+Requests)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-21T15:51:05.157

### TL;博士

您必须启用正确的模块，只需添加到`start.ini`文件中：

```
# Create access log file
--module=requestlog

# Redirect all the console log to a file
--module=console-capture 
```

重新启动 Jetty 并查看日志目录。

# r - 使用 data.table 将 NA 分配给变量组

> ID：13735684
> 
> 赞同：1
> 
> 时间：2012-12-06T01:45:31.467
> 
> 标签：r, data.table

我正在尝试使用 data.table 将特定值（0 和 99）的 NA 分配给一组变量（9 个变量，从 p05_1 到 p05_9）。我没有收到任何错误，但是当我使用此代码时没有任何反应：

这里有一个简短的例子：

```
v_1  <- c(0,0,1,2,3,4,4,99)
v_2  <- c(1,2,2,2,3,99,1,0)
dat  <-  data.table(v_1,v_2)

for(n in 1:9) {
  char <- sprintf('p05_%s', n)
  st[eval(parse(text=char)) %in% c(0,99), eval(parse(text=char)) := NA_integer_]
} 
```

最好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:54:36.363

这与[这个问题和答案有关](https://stackoverflow.com/questions/11872499/create-an-expression-from-a-function-for-data-table-to-eval/11874464#11874464)

要`data.table`进入使用`eval in j`模式，整个调用应该是 eval(...)。

否则，您的通话将被解析为

```
`:=`(eval(parse(text=char)), NA_integer_) 
```

**当我试图在 j** by中使用 eval 时，不会被选中`[.data.table`。我还没有测试过`i`，但无论如何这样做可能是安全的

就像是

```
for(n in 1:2) {
  chari <-  paste0(sprintf('v_%s' ,n), ' %in% c(0,99)')
  charj <- sprintf('v_%s := NA_integer_', n)
  dat[eval(parse(text=chari)), eval(parse(text=charj))]
} 
```

应该管用。注意我已经捏造了调用以`%in%`避免作为常规字符`sprintf`出现错误。`%`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T10:03:10.587

`eval(parse(text=`路线的替代方案，在这种情况下：

```
for (n in 1:2) {
    vnam = paste0("v_",n)
    set(dat, which(dat[[vnam]]%in%c(0,99)), vnam, NA_integer_)
} 
```

请注意，`[[`在基础 R 中不获取列的副本（它是写时复制），因此这可能是引用单个列的好方法。如果有很多列（比如 10,000+），循环`set`并且是值得的。`[[`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T02:32:56.027

这是使用 replace() 函数的另一种选择：

```
> dat[, lapply(list(v_1, v_2), function(x) replace(x, x %in% c(0, 99), NA_integer_))]
   V1 V2
1: NA  1
2: NA  2
3:  1  2
4:  2  2
5:  3  3
6:  4 NA
7:  4  1
8: NA NA 
```

# ios - Apple Enterprise 证书的更新以及对现有配置文件的影响

> ID：13735692
> 
> 赞同：1
> 
> 时间：2012-12-06T01:46:08.373
> 
> 标签：ios, xcode, certificate, provisioning

我为多个客户管理 iOS Enterprise 发行版。我们遇到了分发证书即将到期的情况，并且对证书更新的后果感到好奇。目标是保持应用程序的完整性，并且不需要重新安装应用程序。有没有办法在不影响最终用户的情况下更新证书并重新生成配置文件？

如果我续订证书并重新生成配置文件，最终用户是否需要重新安装应用程序？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:26:31.113

来自苹果企业FAQ：

`Distribution provisioning profiles expire 12 months after they’re issued. Two months before expiration, the iOS device begins displaying notifications about the impending expiration. After the expiration date, the app won’t launch.`

`Before to a provisioning profile expires, use the iOS Development Portal to create a new profile for the app. Create a new app archive (.ipa) with the new provisioning profile, for users who are installing the app for the first time.`

`For users who already have the app, you may want to time your next released version so that it includes the new provisioning profile. If not, you can distribute just the new .mobileprovision file so users won’t have to install the app again. The new provisioning profile will override the one that’s already in the app archive.`

来源：[http ://help.apple.com/iosdeployment-apps/mac/1.1/#app43ad802c](http://help.apple.com/iosdeployment-apps/mac/1.1/#app43ad802c)

# .htaccess - RewriteCond：错误的标志分隔符

> ID：13735693
> 
> 赞同：1
> 
> 时间：2012-12-06T01:46:10.513
> 
> 标签：.htaccess, mod-rewrite, redirect

我无法让这个 .htaccess 工作，因为有一些我无法确定的语法错误。当我访问该网站时，它会打印一个`Internal Server Error`

```
RewriteEngine On
RewriteBase /
RewriteCond %{REMOTE_ADDR} !^201\.191\.20\.108 #
RewriteCond %{REQUEST_URI} !^/mantenimiento\.php$ #
RewriteRule ^(.*)$ http://example.com/mantenimiento.php [R=307,L] # 
```

顺便说一下，error_log 中会打印以下错误：

```
.htaccess: RewriteCond: bad flag delimiters 
```

这个htaccess的想法是将所有请求重定向`example.com`到`example.com/mantenimiento.php`，以模拟网站中的“维护模式”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:24:53.480

这是一个例子：

请求的网址：

`http://example.com`

替代网址：

`http://example.com/mantenimiento.php`

```
RewriteEngine On
RewriteCond %{REMOTE_ADDR} !^201\.191\.20\.108
RewriteRule ^(.*)$ http://example.com/mantenimiento.php [R=301,L] 
```

不需要 REQUEST_URI，因为没有 NONE。要工作，REMOTE_ADDR 不能是模式中​​的那个。也可以使用 [307,L] 进行临时重定向。

# iphone - Iphone mapview 中未显示多个注释

> ID：13735696
> 
> 赞同：0
> 
> 时间：2012-12-06T01:46:23.020
> 
> 标签：iphone, ios, objective-c, ipad, mkmapview

我查看了 stackoverflow 中与我的问题密切相关的其他问题，但是我的问题有点不同。在这里，代码在 iPad 上运行良好，但在我的 iPhone 上运行良好。我的 iPad 将正确加载所有 300 多个注释，但我的 iPhone 只能加载其中的 80 个。我不确定这是否是由于 iPhone 上的内存量造成的，因为当我在模拟器上测试时它会做同样的事情。您将在下面找到我的示例代码。

```
@interface MOVmapViewController ()

@end

#define VA_LATITUDE 37.413754;
#define VA_LONGITUDE -79.142246;

//Span
#define THE_SPAN 5.50f;

@implementation MOVmapViewController
@synthesize myMapView;

-(IBAction)findmylocation:(id)sender {

    myMapView.showsUserLocation = YES;
    myMapView.delegate = MKMapTypeStandard;
    [myMapView setUserTrackingMode:MKUserTrackingModeFollow animated:YES];

}

-(IBAction)setmaptype:(id)sender {

    switch (((UISegmentedControl *)sender).selectedSegmentIndex) {
        case 0:
            myMapView.mapType = MKMapTypeStandard;
            break;
        case 1:
            myMapView.mapType = MKMapTypeSatellite;
            break;
        case 2:
            myMapView.mapType = MKMapTypeHybrid;
            break;

        default:
            myMapView.mapType = MKMapTypeStandard;
            break;

    }

}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typiclly from a nib.

    //Create the region
    MKCoordinateRegion myRegion;

    //Center
    CLLocationCoordinate2D center;
    center.latitude = VA_LATITUDE;
    center.longitude = VA_LONGITUDE;

    //Span
    MKCoordinateSpan span;
    span.latitudeDelta = THE_SPAN;
    span.longitudeDelta = THE_SPAN;

    myRegion.center = center;
    myRegion.span = span;

    //Set our mapView
    [myMapView setRegion:myRegion animated:YES];

    //Annotations
    //Abingdon Lodge No. 48
    NSString *abingdon = @"325 W Main Street Abingdon, Virginia 24210";
    CLGeocoder *abingdongeo = [[CLGeocoder alloc] init];
    [abingdongeo geocodeAddressString:abingdon completionHandler:^(NSArray* placemarks, NSError* error){
        if (placemarks && placemarks.count > 0) {CLPlacemark *topResult = [placemarks objectAtIndex:0];
            MKPlacemark *placemark = [[MKPlacemark alloc] initWithPlacemark:topResult];
            MKPointAnnotation *point = [[MKPointAnnotation alloc] init];
            point.coordinate = placemark.coordinate;
            point.title = @"Abingdon Lodge No. 48";
            point.subtitle = @"Abingdon, VA";
            [self.myMapView addAnnotation:point]; }}];

    //York Lodge No. 12
    NSString *york = @"14411 Black Hollow Road Abingdon, Virginia 24210";
    CLGeocoder *yorkgeo = [[CLGeocoder alloc] init];
    [yorkgeo geocodeAddressString:york completionHandler:^(NSArray* placemarks, NSError* error){
        if (placemarks && placemarks.count > 0) {CLPlacemark *topResult = [placemarks objectAtIndex:0];
            MKPlacemark *placemark = [[MKPlacemark alloc] initWithPlacemark:topResult];
            MKPointAnnotation *point = [[MKPointAnnotation alloc] init];
            point.coordinate = placemark.coordinate;
            point.title = @"York Lodge No. 12";
            point.subtitle = @"Abingdon, VA";
            [self.myMapView addAnnotation:point]; }}];

    //Alberene Lodge No. 277
    NSString *alberene = @"2722 Plank Road Alberene, Virginia 22959";
    CLGeocoder *alberenegeo = [[CLGeocoder alloc] init];
    [alberenegeo geocodeAddressString:alberene completionHandler:^(NSArray* placemarks, NSError* error){
        if (placemarks && placemarks.count > 0) {CLPlacemark *topResult = [placemarks objectAtIndex:0];
            MKPlacemark *placemark = [[MKPlacemark alloc] initWithPlacemark:topResult];
            MKPointAnnotation *point = [[MKPointAnnotation alloc] init];
            point.coordinate = placemark.coordinate;
            point.title = @"Alberene Lodge No. 277";
            point.subtitle = @"Alberene, VA";
            [self.myMapView addAnnotation:point]; }}];

    //A. Douglas Smith, Jr. Lodge of Research No. 1949
    NSString *douglas = @"101 Callahan Drive Alexandria, Virginia 22301";
    CLGeocoder *douglasgeo = [[CLGeocoder alloc] init];
    [douglasgeo geocodeAddressString:douglas completionHandler:^(NSArray* placemarks, NSError* error){
        if (placemarks && placemarks.count > 0) {CLPlacemark *topResult = [placemarks objectAtIndex:0];
            MKPlacemark *placemark = [[MKPlacemark alloc] initWithPlacemark:topResult];
            MKPointAnnotation *point = [[MKPointAnnotation alloc] init];
            point.coordinate = placemark.coordinate;
            point.title = @"A. Douglas Smith, Jr. Lodge of Research No. 1949";
            point.subtitle = @"Alexandria, VA";
            [self.myMapView addAnnotation:point]; }}];

    //Alexandria-Washington Lodge No. 22 same location as above use lat/long
    CLLocationCoordinate2D washington;
    washington.latitude = 38.806758;
    washington.longitude = -77.065251;
    Annotation *alexandriawashingtonlodge = [Annotation alloc];
    alexandriawashingtonlodge.coordinate = washington;
    alexandriawashingtonlodge.title = @"Alexandria-Washington Lodge No. 22";
    alexandriawashingtonlodge.subtitle = @"Alexandria, VA";
    [self.myMapView addAnnotation:alexandriawashingtonlodge]; 
```

此列表继续包含约 310 个旅馆位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:15:24.890

像这样使用，

```
NSString *abingdon = @"325 W Main Street Abingdon, Virginia 24210";
CLGeocoder *abingdongeo = [[CLGeocoder alloc] init];
[abingdongeo geocodeAddressString:abingdon completionHandler:^(NSArray* placemarks, NSError* error){
if (placemarks && placemarks.count > 0) {
CLPlacemark *topResult = [placemarks objectAtIndex:0];
MKPlacemark *placemark = [[MKPlacemark alloc] initWithPlacemark:topResult];
MKPointAnnotation *point = [[MKPointAnnotation alloc] init];
point.coordinate = placemark.coordinate;
point.title = @"Abingdon Lodge No. 48";
point.subtitle = @"Abingdon, VA";

// Set your region using placemark (not point)          
MKCoordinateRegion region = self.mapView.region;
region.center = placemark.region.center;
region.span.longitudeDelta /= 8.0;
region.span.latitudeDelta /= 8.0;

// Add point (not placemark) to the mapView                                              
[self.mapView setRegion:region animated:YES];
[self.mapView addAnnotation:point];

// Select the PointAnnotation programatically
[self.mapView selectAnnotation:point animated:NO]; }}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T14:48:25.023

我的一些注释没有显示的原因是因为我多次调用 CLGeocoder。这是我解决问题的方法。

`//Columbia Lodge No. 285 CLLocationCoordinate2D columbia; columbia.latitude = 38.895746; columbia.longitude = -77.106511; Annotation *columbialodge = [[Annotation alloc] init]; columbialodge.coordinate = columbia; columbialodge.title = @"Columbia Lodge No. 285"; columbialodge.subtitle = @"Arlington, VA"; [self.myMapView addAnnotation:columbialodge];`

我已将我所有的地址转换为 Lat long。这也减少了内存使用量。

尽管我很喜欢输入地址，但看起来 CLGeocoder 只是占用了很多资源。

# c - C中的结构和指针分段错误

> ID：13735701
> 
> 赞同：0
> 
> 时间：2012-12-06T01:47:10.107
> 
> 标签：c, pointers, struct, segmentation-fault

任何人都可以帮助我解决这个分段错误。这段代码很简单，但错误很难弄清楚。

```
struct Link {
  int key;
  unsigned data: 2;
  struct Link *next;
  struct Link *previous;
};

struct Link* addInOrder(struct Link *, struct Link);

int main() {
  struct Link *head;
  struct Link data1;
  struct Link data2;
  struct Link data3;
  data1.key = 25;
  data1.data = 1;
  data1.next = NULL;
  data2.key = 50;
  data2.data = 0;
  data2.next = NULL;
  data3.key = 100;  
  data3.data = 2; 
  data3.next = NULL;
  head = NULL;
  head = addInOrder(head, data2);
}

struct Link* addInOrder(struct Link *srt, struct Link l) {
  if(!srt) {
    return &l;
  }

  struct Link *temp = srt;
  while(temp->next && l.key > temp->key)
    temp = temp->next;

  printf("here\n");

  if(l.key > temp->key) {
    printf(" 1\n");
    temp->next = &l;
    l.previous = temp;
  }
  else {
    printf(" 2\n");
    l.previous = temp->previous;
    l.next = temp;
    printf( "2.2\n");
    if(temp->previous) {
      //printf("%i\n",temp->previous->key);
      temp->previous->next = &l;
    }
    printf(" 2.3\n");
    temp->previous = &l;
  }
  return srt;
} 
```

我在 addInOrder() 的第一行不断收到错误消息。编译器所说的只是分段错误。

编辑：另外，如果我添加*printf("...");* 在 if 语句之后并运行它...不打印

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T01:53:02.303

您正在传递`addInOrder()`按值 ( `struct Link l`) 的第二个参数。这会在您调用函数时创建参数的副本，并且 in`addInOrder()`存在`l`于堆栈中。然后，您将返回局部变量的地址并将其分配给`head`，但是当函数退出时，该变量超出范围并被释放。因此，您为 分配了无效地址`head`，这会导致段错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T01:53:09.713

零件（到处`&l`都用）

```
if (!srt)
    return &l; 
```

正在返回堆栈变量的地址。您的`addInOrder`函数可能应该有签名

```
struct Link* addInOrder(struct Link* srt, struct Link* l); 
```

# iphone - UIBezierPath 未在 drawRect 中绘制

> ID：13735712
> 
> 赞同：0
> 
> 时间：2012-12-06T01:48:10.507
> 
> 标签：iphone, objective-c, ios, ipad

我的 UIView drawRect 中有以下代码：

```
- (void)drawRect:(CGRect)rect {

   UIBezierPath *trackPath = [UIBezierPath bezierPath];
[trackPath addQuadCurveToPoint:CGPointMake(10, 30) controlPoint:CGPointMake(0, 0)];
[trackPath stroke];

   } 
```

但是我没有看到任何绘制的路径。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:51:40.147

您所做的只是创建路径。现在尝试：

```
[aPath stroke]; 
```

**更新**

在您的新问题和改进问题中，您需要在添加四边形曲线之前设置初始点：

```
[trackPath moveToPoint:somePoint]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:53:10.357

您的代码只定义了一个路径。添加：

```
[aPath stroke]; 
```

# java - 如何自定义输出 标签？

> ID：13735718
> 
> 赞同：3
> 
> 时间：2012-12-06T01:49:04.237
> 
> 标签：java, struts2, struts

如何获取使用 struts2 验证设置的验证消息：

```
public void validate() {
    addFieldError("user", "Invalid User");
} 
```

我想从自定义 tagLib 中获取“无效用户”和“用户”字符串以打印如下：

```
public int doStartTag() {
    pageContext.getOut().print( "Invalid User - user" )
} 
```

更新：这个例子是一个减少的和非功能性的用法，只是解释了我希望如何返回值，而不是我将如何使用它，但这里是用例：

我想创建一个自定义 tagLib 打印来自 struts 验证的错误。在单个 tagLib 中，我想验证页面是否包含给定输入的验证错误，然后在屏幕上打印错误的内容。

Scriptlet, <logic:*, javascript -> 完全没有问题。

如果 jsp 旨在保存文档的结构，那么带有内部特定规则的 taglib 比在页面中充斥逻辑比较更有意义。

我没有使用`<s:fieldError />`（或类似的东西），因为它创建了一个我无法摆脱的结构，甚至将默认模板设置为“简单`ul`”`li`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:47:00.797

亚历山大 M 是正确的。如果您只想更改标签吐出的标记，您肯定不想创建标签，您只想覆盖正在呈现它的模板。这很容易。您将从 struts 核心 jar 中获取模板的副本，对其进行编辑，然后将其放入您的项目中。这是文档的链接：

[http://struts.apache.org/2.3.4.1/docs/template-loading.html](http://struts.apache.org/2.3.4.1/docs/template-loading.html)

请注意，根据您想要执行的操作，您可以自己获取错误消息。它们都在 ActionSupport 上作为 JavaBeans 属性公开，您的操作应该从这些属性继承，并且您可以使用 OGNL 表达式（例如在属性标记中）访问它们。

请注意，ActionSupport 实现这些以履行其实现的 ValidationAware 接口的合同。

# git - 具有 Web 根目录之外的多个目录的 Git 存储库？

> ID：13735725
> 
> 赞同：2
> 
> 时间：2012-12-06T01:50:43.800
> 
> 标签：git, directory, repository

我开始将 git 与我的 .git 目录以及 Web 根目录中的所有其他内容一起使用。进一步阅读后，这似乎是一个不好的做法。我现在将我的应用程序和系统文件夹放在 Web 根目录之外。我的 web 根目录中唯一剩下的就是一个索引文件和一个用于图像、js 和 css 的资产文件夹。

老路

```
/var/www/assets
/var/www/application
/var/www/system
/var/www/.git 
```

新方法（不太确定 .git 应该放在哪里？）

```
/var/www/assets
/var/application
/var/system 
```

在很容易设置 git 之前。我创建了 repo，它找到了所有文件，因为它们都在同一个目录中。现在，我不太确定 .git 存储库应该驻留在新结构中的哪个位置。如果我将它添加到 /var/www 它会看到 assets 文件夹，但不会看到其他任何东西。

我想用 git 管理所有三个目录。如何将所有目录包含到 repo 中。或者，git 是否有另一种方式来处理此类实例？我在这个网站上发现了另一个类似的问题，但我无法理解。

另外，在我的远程仓库中，我会像这样设置它。我还没有移动任何目录。我一直试图让它首先在本地工作。

```
var/www/assets
var/application
var/system
var/git/.git 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T02:16:10.277

我建议不要将这两个目录移出 repo，而是将 web 根目录移到一个`www`目录中。我这样做的方式如下：

1.  创建一个新的 Web 根目录：

    ```
    # from /var/www
    mkdir www
    git mv assets www
    git mv index* *html www
    git commit 
    ```

    所以，目前的临时结构是：

    ```
    /var/www/www/assets
    /var/www/system
    /var/www/application
    /var/www/.git 
    ```

2.  此时您有两个选择：编辑您的服务器配置以创建`/var/www/www`新的 Web 根目录。或者将整个东西移到其他地方并将 webroot 符号链接到其原始位置。我个人更喜欢第二种选择：

    ```
    # from /var/www
    cd ..
    mv www /usr/local/mywebapp
    ln -s /usr/local/mywebapp/www www 
    ```

    现在你的文件夹结构是：

    ```
    /usr/local/mywebapp/www/assets
    /usr/local/mywebapp/system
    /usr/local/mywebapp/application
    /usr/local/mywebapp/.git 
    ```

    但是网络服务器只看到：

    ```
    /var/www/assets
    /var/www/index.html 
    ```

这样做可以确保您的项目始终处于 git 控制之下，而不会在 git 之外发生任何更改（因此不会记录在 git 的历史记录中）。这还具有您根本不需要更改远程存储库的优点。只需将您的更改推送到那里。

如果您希望其他人可以使用符号链接方法正确安装您的应用程序，您始终可以提供一个 shell 脚本来为他们​​创建符号链接并确保服务器配置正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T02:09:49.963

最好将源代码和运行时分开。

将 git 和 source 放在其他地方。有一个从源代码构建的构建脚本（即从 git checkout 构建）并将构建的输出传输到 web 目录。

所以来源可能看起来像：

```
/var/src/assets
/var/src/application
/var/src/system
/var/src/.git 
```

然后构建脚本只会将构建的输出复制到`/var/www`

# ruby - 如何使用 Factory Girl 生成“虚拟图像”？

> ID：13735726
> 
> 赞同：0
> 
> 时间：2012-12-06T01:50:45.997
> 
> 标签：ruby, ruby-on-rails-3, factory-bot

我想生成大量的虚拟数据——其中一部分数据是各种大小的图像。从头像到横幅再到其他图像尺寸。

如果不使用 Factory Girl，我如何在我的 Rails 3 应用程序中动态地执行此操作？

谢谢。

PS如果该方法可以处理将图像推送到S3，那也很棒。如中所示，我的应用程序配置为使用 CarrierWave 和 Fog 将图像推送到 S3。所以我用于动态图像生成的任何东西都需要使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T02:25:03.627

我可能会使用[RMagick](http://rmagick.rubyforge.org/)来做到这一点，这是 ImageMagick 的 Ruby 前端。我想你可以创建一个简单的类，它接受你的宽度/高度参数并生成一个类似于矩形的东西，红色的 x 从一个角落延伸到另一个角落。它有很好的记录，所以这应该很容易做到。

我没有使用过 CarrierWave，因此无法提供建议。如果你可以只给它一个文件路径，那么如果你包含一个公共方法来返回虚拟文件路径，你应该没有问题。

# ruby-on-rails - 如何部署无法使用 Capistrano 进行版本控制的许可字体？

> ID：13735729
> 
> 赞同：3
> 
> 时间：2012-12-06T01:50:56.757
> 
> 标签：ruby-on-rails, ruby-on-rails-3, fonts, capistrano, asset-pipeline

我正在使用 Capistrano 将我的 Rails 应用程序部署到 VPS（如[railscasts.com 上的第 335 集](http://railscasts.com/episodes/335-deploying-to-a-vps)所示）。我有一些用于应用程序的自定义字体，并且出于许可原因不想将它们签入源代码控制（请参阅底部的说明）。

解决这个问题的最佳方法是什么？我应该编辑 deploy.rb 文件以`assets/webfonts`从本地计算机 sftp 目录吗？也许我只需要手动将它们复制到`my_app/shared/assets`VPS 上的目录，但我宁愿将其作为部署任务的一部分自动化。

这是我当前的 deploy.rb 文件：

```
require "rvm/capistrano"
require "bundler/capistrano"

server "ip_address", :web, :app, :db, primary: true

set :application, "armory"
set :user, "username"
set :deploy_to, "/home/#{user}/apps/#{application}"
set :deploy_via, :remote_cache
set :use_sudo, false

set :scm, "git"
set :github_user, "gorrillamcd"
set :repository, "git@github.com:#{github_user}/Armory.git"
set :branch, "master"

default_run_options[:pty] = true
ssh_options[:forward_agent] = true

after "deploy", "deploy:cleanup" # keep only the last 5 releases

namespace :deploy do
  %w[start stop restart].each do |command|
    desc "#{command} unicorn server"
    task command, roles: :app, except: {no_release: true} do
      run "/etc/init.d/unicorn_#{application} #{command}"
    end
  end

  task :setup_config, roles: :app do
    sudo "ln -nfs #{current_path}/config/nginx.conf /etc/nginx/sites-enabled/#{application}"
    sudo "ln -nfs #{current_path}/config/unicorn_init.sh /etc/init.d/unicorn_#{application}"
    run "mkdir -p #{shared_path}/config"
    put File.read("config/database.base.yml"), "#{shared_path}/config/database.yml"
    puts "Now edit the config files in #{shared_path}."
  end
  after "deploy:setup", "deploy:setup_config"

  task :symlink_config, roles: :app do
    run "ln -nfs #{shared_path}/config/database.yml #{release_path}/config/database.yml"
    run "ln -nfs #{shared_path}/config/initializers/stripe.rb #{release_path}/config/initializers/stripe.rb"
  end
  after "deploy:finalize_update", "deploy:symlink_config"

  desc "Make sure local git is in sync with remote."
  task :check_revision, roles: :web do
    unless `git rev-parse HEAD` == `git rev-parse origin/master`
      puts "WARNING: HEAD is not the same as origin/master"
      puts "Run `git push` to sync changes."
      exit
    end
  end
  before "deploy", "deploy:check_revision"
end 
```

**编辑：**很抱歉事先如此含糊。我正在使用来自 myfonts.com 的 Museo Slab 和 github 上的公共 repo（如果您想查看，请查看我的用户个人资料）。我通读了许可证，发现了这一点：

> `3.`许可网络字体可用于被许可方拥有或控制的任何网站
> 
> `4.`负责多个客户网站的机构，例如网页设计机构或托管服务提供商，不得在多个客户的网站之间共享一个 Webfont 许可。

许可证的这两行让我相信将字体签入公共存储库将违反许可证，因为它可以在不属于我的网站上使用而无需获得新的字体许可证（即使他们可以自由开始和）。我想其他人以前也遇到过这个问题。所以我的问题是，**使用 Capistrano、字体（或与此相关的任何文件）无法签入源代码控制的正常/最佳方式是什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:36:55.730

我会将网络字体打包到一个存档中，并将该存档放在与存储库分开的某个地方。（Amazon S3 是主要候选者。）然后，我会让发布过程在部署时检索并解压缩此存档。

这使您可以将整个应用程序放在公共存储库中——Capistrano 脚本、Rake 任务等——但将实际的字体二进制文件排除在外，并将它们的位置指定为配置问题。这与[12-factor app 原则](http://www.12factor.net/)一致，将这些 webfonts 视为应用程序所需但不​​包含在应用程序中的外部资源。

例如，您可以指定一个`WEBFONTS_URL`环境变量，并添加一个`fetch_webfonts`Rake 任务。此任务会自动将这些资源拉入您的应用程序，并且在未指定的情况下不会执行任何操作`WEBFONTS_URL`——例如，如果其他人在没有这些字体的情况下签出您的存储库。（您甚至可以使用样式表让任务执行适当的操作，确保新结帐用户在没有 404 字体文件的情况下获得工作应用程序。）Rake 允许您将依赖项添加到现有任务，因此您可以确保这作为一部分自动发生的`assets:precompile`，Capistrano 很可能已经调用了。

此外，这种方法同样适用于开发和生产：您可以重新签出自己的 repo，指定适当的`WEBFONTS_URL`，然后在本地计算机上获得一组工作字体。（[dotenv](http://opensoul.org/blog/archives/2012/07/24/dotenv/) gem 可以很容易地将开发配置放入环境变量中，保持所有环境的一致性。）只要确保你`.gitignore`得到结果，这样你就不会意外地将它们公开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T02:58:37.343

您可以使用上传/同步字体目录`rsync`。例如：

将您的 IP/域添加到单独的变量中：

```
set :host, "ip_address"
server host, :web, :app, :db, primary: true 
```

并添加要运行的任务

```
`rsync -vz app/assets/webfonts #{user}@#{host}:#{shared_path}/assets/webfonts` 
```

然后将其符号链接到您的应用程序的当前版本中，就像在部署脚本中已经使用 database.yml 和 stripe.rb 完成一样

# c++ - 如何解决模棱两可的重载函数调用？

> ID：13735732
> 
> 赞同：5
> 
> 时间：2012-12-06T01:51:20.740
> 
> 标签：c++, c++11, g++, overloading

当我用 gcc-4.6.3 或 gcc-4.7.2 编译这个程序时，编译器给我一个关于重载调用不明确的错误：

```
#include <iostream>
#include <functional>

class Scott
{
    public:
        void func(const bool b = true)
        {
            std::cout << "Called func() with a boolean arg" << std::endl;
        }

        void func(std::function<void(void)> f)
#ifdef WITH_CONST
            const
#endif
        {
            std::cout << "Called func() with a std::function arg" << std::endl;
        }
};

int main (int argc, char *argv[])
{
    Scott s;
    s.func([] (void) { });
} 
```

但是，如果我将重载函数设为 const，它可以很好地编译并调用我没想到的方法！

```
devaus120>> g++ -Wall -std=c++11 -DWITH_CONST wtf.cxx
devaus120>> ./a.out
Called func() with a boolean arg 
```

所以，我有两个问题：

1.  当重载方法设为 const 时，它是编译器错误吗？
2.  如何确保调用正确的重载函数？（需要以某种方式提出论点吗？）

TIA。

斯科特。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T02:22:49.887

实际上 gcc 是正确的！因为 lambda**不是**函数，而是**类类型的闭包对象**！真的！您甚至可以从它继承:) ...甚至从不同的 lambdas 多次...

因此，根据 8.5/16：

* * *

[...]

— 如果目标类型是（可能是 cv 限定的）类类型：

[...]

—**否则，如果源类型是（可能是 cv 限定的）类类型，则考虑转换函数。列举了适用的转换函数 (13.3.1.5)，并通过重载决议 (13.3) 选择最佳转换函数。调用如此选择的用户定义转换将初始化表达式转换为正在初始化的对象。如果转换无法完成或不明确，则初始化格式错误。**

* * *

和 13.3.1.5：

* * *

在 8.5 中指定的条件下，作为非类类型对象初始化的一部分，可以调用转换函数将类类型的初始化表达式转换为正在初始化的对象的类型。重载分辨率用于选择要调用的转换函数。假设“cv1 T”是被初始化对象的类型，“cv S”是初始化表达式的类型，其中S是类类型，候选函数选择如下：

-- 考虑 S 及其基类的转换函数。**那些不隐藏在 S 中并产生类型 T 或可以通过标准转换序列 (13.3.3.1.1) 转换为类型 T 的非显式转换函数是候选函数。**对于直接初始化，那些不隐藏在 S 中并产生类型 T 的显式转换函数或可以通过限定转换 (4.4) 转换为类型 T 的类型也是候选函数。返回 cv 限定类型的转换函数被认为会为选择候选函数的过程产生该类型的 cv 非限定版本。返回“对 cv2 X 的引用”的转换函数返回左值或 x 值，具体取决于引用的类型，类型为“cv2 X”，因此在选择候选函数的过程中被认为产生 X。

* * *

**所以最后，转换函数的结果是一个函数指针，它会隐式转换为`bool`......**

您可以使用以下简单代码检查这一系列转换：

```
#include <iostream>
#include <iomanip>

int main()
{
    std::cout << std::boolalpha << []{ return 0; } << '\n';
} 
```

输出将是`true`...

这里有几种解决方法......你肯定需要一些东西，因为这两个函数都适用于重载解决方案。顺便说一句，将 , 添加`const`到第二个签名，只需将其排除，因为您有一个可变实例，如果使用修饰符`Scott`声明它，您将再次获得编译错误。`const`

所以，你可以这样做：

*   显式转换（如评论中所述）......是的，很长的类型......
*   声明带有模板参数的第二个 foo `Func`。根据你接下来要做什么，这里有几个选项：它可以转换为`std::function`on assign（如果你想将它存储给某个成员），或者在立即调用的情况下你甚至会得到一些优化（通过消除转换为`std::function`)
*   更复杂的方法是声明两个带有模板参数的函数，并根据例如（或检查可调用/函数类型）来*关闭*`std::enable_if`其中一个*`std::is_same<bool, T>`*
**   使用*类型调度*（是的，再次使用模板函数）*

 *...我想这已经足够了:)*

# gcc - 试图让 stasm 在 Ubuntu 上工作

> ID：13735735
> 
> 赞同：1
> 
> 时间：2012-12-06T01:51:33.003
> 
> 标签：gcc, compilation, cmake

我在 Cmake 文件中有以下内容：

```
add_library(stasm STATIC IMPORTED)
set_property(TARGET stasm PROPERTY
            IMPORTED_LOCATION /media/Data/sdks/stasm3.1/linux/libstasm.a)
target_link_libraries( StasmOpencvExample ${OpenCV_LIBS} stasm) 
```

我通过执行以下操作生成了 libstasm.a：

[如何使用 g++ 创建静态库？](https://stackoverflow.com/questions/5947067/how-to-create-a-static-library-with-g)，第一个答案，从 linux 文件夹中取出所有 .o 文件并将其放入存档中。

但是当我在我的项目上运行*make*时，我得到：

```
Scanning dependencies of target StasmOpencvExample
[100%] Building CXX object CMakeFiles/StasmOpencvExample.dir/stasm_opencv_example.cpp.o
Linking CXX executable StasmOpencvExample
CMakeFiles/StasmOpencvExample.dir/stasm_opencv_example.cpp.o: In function `main':
stasm_opencv_example.cpp:(.text+0x9a): undefined reference to `AsmSearchDll(int*, int*,      char const*, char const*, int, int, int, char const*, char const*)'
collect2: ld returned 1 exit status 
```

以前有没有人得到一个 cmake 项目来在 linux 上使用 stasm ？我还必须从 stasm_dll.cpp 中删除包含“windows.h”，以及其他未正确完成以允许在 linux 上工作的 windows 特定代码。

我已经得到了 linux 文件夹来生成二进制文件并且它们工作得很好，现在我只需要将这个功能合并到我自己的项目中..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:38:53.527

似乎原因是创建 Stasm 是为了在 Windows 上制作可执行图像处理的可执行文件。Stasm 不像库，我目前正在制作我自己的静态和共享库，它就像一个库，您可以使用它来导入随机项目并指定参数。

基本上将 main.cpp 修改为另一个类并取出测试/不必要的代码并获得精简处理版本。

# jquery - 如果一页上有多个画廊，为什么fancybox2不会在ios上显示？

> ID：13735740
> 
> 赞同：1
> 
> 时间：2012-12-06T01:51:57.457
> 
> 标签：jquery, ios, fancybox, fancybox-2

我正在尝试在同一页面上加载多个 fancybox2 画廊。

它们在 IE、FF 和 Chrome 中显示良好，但在 iPad 或 iPhone 上，仅加载第一个图像；前进到下一个图像不起作用。

ios 6.0.1（我唯一的 ios）不会更改任何画廊中第一张幻灯片之外的图像。

有趣的是，如果您以足够快的速度反复点击（用 2 个手指交替），就有可能使图像前进。不过，显然有些不对劲。

问题页面：[http ://www.kellyodom.com/weddings-and-events.html](http://www.kellyodom.com/weddings-and-events.html)

有任何想法吗？我该如何调试？

# iphone - ios - NSString 在 NSUrl 中使用时丢失内容

> ID：13735741
> 
> 赞同：0
> 
> 时间：2012-12-06T01:52:00.923
> 
> 标签：iphone, objective-c, ios, nsstring, nsurl

我有以下代码 - 注意它必须是带有 temp 的对象，但我会解释。

```
NSString *temp =  _passedOnURL;
NSString *temp = @"http://google.com"; //I comment the one out that I do not use.

NSLog(@"TEMP - %@", temp);

NSURL *feedURL = [NSURL URLWithString:temp];
NSLog(@"FEED URL - %@", feedURL); 
```

_passedOnURL 是一个字符串，其内容是从 Segue 传递的。

现在，当我使用第一个 temp 时，FEED URL 返回（null），但是当我记录 Temp 时它仍然存在，所以不知何故 NSURL 不读取字符串。

当我用第二个温度对字符串进行硬编码时 - 没有问题。

在我看来，NSURL 在读取 NSString 时没有区别，但它的行为似乎有所不同。

这有什么原因吗？？

编辑

当我执行以下代码时，我没有问题：

```
_passedOnURL = @"http://www.google.com"; 
```

所以我真的对此没有任何解释？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:21:00.390

尝试转义它： [NSURL URLWithString: [temp stringByAddingPercentEscapesUsingEncoding: NSASCIIStringEncoding]]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T02:20:05.843

看来您在 temp.xml 中存储了一个无效的 url 字符串。不是每个字符串都可以转换为 url，而是有效的 url。无效的字符和格式将在 +URLWithString: 之后引导一个 nil 对象。那么当你尝试这个时，你会告诉我们什么存储在 temp 中吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T02:19:10.647

根据[URLWithString 的文档：](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html#//apple_ref/occ/clm/NSURL/URLWithString%3a)

> **参数**
> *URLString*
> 
> 用于初始化 NSURL 对象的字符串。必须是符合 RFC 2396 的 URL。此方法根据 RFC 1738 和 1808 解析 URLString。
> 
> **返回值**
> 
> 一个用 URLString 初始化的 NSURL 对象。如果字符串格式错误，则返回 nil。

所以我的猜测是你`_passedOnURL`的 URL 不是有效的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T01:58:21.267

我会在你的 _passedOnURL 上做一个 NSLog 来检查你是否从另一个 segue 正确地获取了字符串。

# android - android softkeyboard示例代码不改变键盘

> ID：13735743
> 
> 赞同：2
> 
> 时间：2012-12-06T01:52:19.867
> 
> 标签：android

我将 Softkeyboard 的 android 示例代码加载到我的 Nexus 上。它显示了在设置->语言->键盘下选择软键盘服务的选项。我选择了新服务和一种语言，但是当我进入网络浏览器并专注于 url 字段时，我会弹出相同的系统键盘，没有什么不同。有没有人尝试过示例项目并获得了不同外观的键盘？运行apk时我缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:34:11.033

你检查过可用的输入法吗？只需触摸并按住任何文本字段（<4.0）或打开通知栏并在打开键盘时选择输入法。

# php - PHP + MySql Cron Job，删除超过 1 小时的行

> ID：13735744
> 
> 赞同：0
> 
> 时间：2012-12-06T01:52:19.760
> 
> 标签：php, mysql, cron

> **可能重复：**
> [要从 1 小时前选择的 Sql 查询？](https://stackoverflow.com/questions/4451385/sql-query-to-select-from-1-hour-ago)

我当前的 cron 作业脚本从数据库中删除所有行，如果用户想在 cronjob 运行时重置密码，我如何在将行添加到数据库时检查 mysql，这样只删除已经存在的行更多超过1小时？

我的 cron_reset.php

```
<?php
require_once('mysql_config.php');
$link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
if(!$link) 
{
    die('Failed to connect to server: ' . mysql_error());
}

$db = mysql_select_db(DB_DATABASE);
if(!$db) 
{
    die("Unable to select database");
}

function clean($str) 
{
    $str = @trim($str);
    if(get_magic_quotes_gpc()) 
    {
        $str = stripslashes($str);
    }
    return mysql_real_escape_string($str);
}

$password = clean($_GET['password']);
if($password != $cron_password)
{
    die('Access Denied');
}
else
{
    $qry = "DELETE FROM cron_reset";
    $result = mysql_query($qry);
    if($result) 
    {
        die('Success');
    }
    else 
    {
        die(mysql_error());
    }
}
?> 
```

这是将电子邮件+重置代码添加到数据库的那一行

```
 $qry = "INSERT INTO cron_reset(email, code) VALUES('$email','$code')";
            $result = @mysql_query($qry); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T02:03:17.890

在您的数据库模式中，您必须添加一个新列来存储需求的时间（例如 ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP）并在您的查询中添加一个 where 子句（WHERE ts < NOW()- INTERVAL 1 HOUR）

# r - 找到生成默认选项的“.Rprofile”文件

> ID：13735745
> 
> 赞同：69
> 
> 时间：2012-12-06T01:52:27.407
> 
> 标签：r, rprofile

在 R 和 RStudio 中，我想我已经把`.Rprofile`文件弄乱了几次，我目前正在启动 R 或 RStudio 时加载它的旧版本，有没有办法可以快速找到文件的位置那是生成默认选项？

谢谢

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-12-06T02:36:32.467

就像@Gsee 建议的那样，`?Startup`有你需要的一切。请注意，不仅有用户配置文件，还有您可能弄乱的站点配置文件。并且这两个文件都可以在多个位置找到。

您可以运行以下命令在页面上列出的文件中列出系统上的现有文件：

```
candidates <- c( Sys.getenv("R_PROFILE"),
                 file.path(Sys.getenv("R_HOME"), "etc", "Rprofile.site"),
                 Sys.getenv("R_PROFILE_USER"),
                 file.path(getwd(), ".Rprofile") )

Filter(file.exists, candidates) 
```

请注意，它应该在您启动 R 之后的新会话上运行，以便`getwd()`在启动时返回当前目录。还有一个棘手的可能性是您的配置文件确实在启动时修改了当前目录，在这种情况下，您必须`R --no-site-file --no-init-file`在运行上面的代码之前启动一个“无配置文件”会话（运行）。

# objective-c - 我想知道角度梯度是否可能

> ID：13735755
> 
> 赞同：0
> 
> 时间：2012-12-06T01:53:48.100
> 
> 标签：objective-c, nsbezierpath, radial-gradients

我正在使用 NSBezierPath 对渐变进行一些测试，并在**径向**渐变方面取得了一些进展。看第一张照片。但是，我想知道是否可以制作如图 2 所示的**角度**渐变。

有人做过吗？

## 蒂亚，罗纳德

![图片1](../Images/9f0e9ad610b6ad3241bf646affc4db37.png)

![图二](../Images/b8e8d9a32be814abc55bb0a6d11c1fd7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:38:23.410

Cocoa 没有用于角度渐变的公共 API。您必须自己绘制不同颜色的像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:26:17.390

好问题！没有标准功能。尝试通过将圆形划分为用作剪切多边形的扇区来近似然后在与扇区中心线成 90 度的方向上绘制线性渐变。

# intellij-idea - Jade 语法高亮在 IntelliJ 中不起作用（Darcula L&F）

> ID：13735763
> 
> 赞同：3
> 
> 时间：2012-12-06T01:54:34.117
> 
> 标签：intellij-idea, syntax-highlighting, pug

JetBrains IntelliJ IDEA 12.0 中的 Jade 模板文件，使用新的 Darcula 主题。有没有人遇到过 IntelliJ/Pycharm/RubyMine/WebStorm 和 Jade 插件的类似问题？

在 JetBrains 解决此问题之前，是否有人有临时解决方案？

![在此处输入图像描述](../Images/23ef35691b77eb19de819ac948cea48b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T02:25:47.807

我已[提交](http://youtrack.jetbrains.com/issue/WEB-2253)解决此问题的请求。

目前您可以在`File`|中手动更改颜色。`Settings`| `Editor`| `Colors & Fonts`, **Jade**（创建默认方案的副本，以便您进行更改）。

# html - 如何阻止我的链接包含在 DIV 中？

> ID：13735765
> 
> 赞同：2
> 
> 时间：2012-12-06T01:54:45.730
> 
> 标签：html, css

我在一个 100% 宽度的 DIV 中有六个链接。

当我缩小浏览器的大小时，如何阻止我的链接相互堆叠、移动、向下和消失？我想让它们保持在水平 div 内。

这是我的代码：

```
.nav {
  width: 100%;
  height: 84px;
  float: left;
  background: #333;
}

.logo {
  width: 317px;
  height: 84px;
  float: left;
  background: url('img/lifesign.png');
}

.navlink {
  height: 84px;
  font-family: 'open_sansbold';
  color: #FFF;
  text-align: center;
  line-height: 84px;
  padding-left: 22px;
  padding-right: 22px;
  float: right;
  font-size: 80%
}
```

```
<div class="nav">
  <a href="contact.htm" class="navlink">CONTACT</a>
  <a href="contact.htm" class="navlink">GET INVOLVED</a>
  <a href="contact.htm" class="navlink">Q+A</a>
  <a href="contact.htm" class="navlink">HOW IT WORKS</a>
  <a href="contact.htm" class="navlink">WHO WE ARE</a>
  <a class="logo" href="home.htm"></a>
</div>
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T02:06:18.183

`min-width`在你的`.nav`班级上设置一个。

```
.nav {
    width: 100%;
    height: 84px;
    float: left;
    background: #333;

    min-width: 960px; /* or whatever width you need */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:57:56.643

我认为这里的理想是创建一个固定宽度的 div（下面的“页面”的 id）来包含您的导航和其他页面元素。我还冒昧地清理了导航本身的一些结构，以及一些更不必要的规则。我认为这里的列表是理想的。您可能想颠倒它的顺序，因为您是向右浮动的，但否则效果很好。

```
<html>
    <head>
        <style>
        body { text-align: center; }
        #container { width: 960px; margin: 0 auto; }
        #nav { overflow: hidden; list-style: none; padding: 0; margin: 0; background: #333; }
        #nav li { float: right; }
        #nav li.logo { float: left; }
        #nav li a { display: block; padding: 0px 22px; color:#FFF; background: #333; text-align:center; line-height:84px; font-family: 'open_sansbold'; font-size:80%; }
        #nav li.logo a { width: 317px; height: 84px; background:url('img/lifesign.png') red; }
        </style>
    </head>
    <body>
        <div id="container">
            <ul id="nav">
                <li class="logo"><a href="home.htm"></a></li>
                <li><a href="contact.htm">CONTACT</a></li>
                <li><a href="contact.htm">GET INVOLVED</a></li>
                <li><a href="contact.htm">Q+A</a></li>
                <li><a href="contact.htm">HOW IT WORKS</a></li>
                <li><a href="contact.htm">WHO WE ARE</a></li>
            </ul>
            <div id="main">
                <!-- page content here -->
            </div>
        </div>
    </body>
</html> 
```

# java - 作为 Servlet 侦听器的 Liquibase 数据源

> ID：13735766
> 
> 赞同：2
> 
> 时间：2012-12-06T01:55:09.160
> 
> 标签：java, jakarta-ee, struts, jndi, liquibase

我开始在我的 web.xml 文件中配置 Liquibase，但我不明白 datasource 属性指的是什么：

```
<context-param>
  <param-name>liquibase.datasource</param-name>
  <param-value>java:comp/env/jdbc/default</param-value>
</context-param> 
```

文档说它是一个 JNDI 数据源，但我使用的是 Struts，而不是 Spring，并且在不同的属性文件（例如 hibernate.dev.properties、hibernate.test.properties）中有我的连接详细信息，我根据当前以编程方式加载这些文件环境：

```
Configuration hibernateConfig = new Configuration();
hibernateConfig.addProperties("com/env.specific.properties"); 
```

老实说，我不知道什么是或如何使用 JNDI。

我应该在那个特定的上下文参数值中写什么？有什么方法可以做类似于我对休眠所做的事情吗？

我正在使用 Tomcat 6.0，以防万一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T10:41:55.303

该属性`liquibase.datasource`是指Web 应用程序`DataSource`的 JNDI 目录中对象的 JNDI 名称，如[Liquibase](http://www.liquibase.org/manual/servlet_listener)手册中所述。

由于您没有使用 JNDI，因此您不能使用`LiquibaseServletListener`Liquibase 提供的默认 Servlet 侦听器。我假设您正在直接创建 JDBC 资源，例如在您的 Web 应用程序中。您可能在`DataSource`某处有一个 C3P0 连接池或以某种方式访问​​底层 JDBC `Connection`。

如果是这种情况，您可以滚动自己的初始化并将 JDBC`Connection`注入[Liquibase](http://www.liquibase.org/)，如下所示：

```
DataSource dataSource = ... // get from Hibernate somehow
Connection connection = dataSource.getConnection();
JdbcConnection liquibaseConnection = new JdbcConnection(connection);
Liquibase liquibase = new Liquibase("mychangelog.xml",...,liquibaseConnection);
liquibase.update(""); 
```

此代码段未经测试，但应该是 s.th。像那样。您可以将其添加到您自己的 Servlet Context Initializer 侦听器或您的应用程序特定代码中 - 您手头有 Hibernate 配置并可以检索 DataSource 的任何地方。首先，看看`liquibase.servlet.LiquibaseServletListener`如何做到这一点的来源。

# blackberry - Screen.invalidate() 和 Screen.invalidateLayout() 有什么区别

> ID：13735770
> 
> 赞同：2
> 
> 时间：2012-12-06T01:55:48.597
> 
> 标签：blackberry, blackberry-jde

```
void invalidate() 
      Invalidates the entire screen.

void invalidateLayout() 
      Invalidates this screen's layout (including all controlled fields). 
```

javadoc 没有多大帮助。你能告诉我为什么我们需要invalidateLayout()吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:59:33.377

根据您构建 UI 的方式，当您希望更改显示时，您可能对**无效**或**更新布局感兴趣。**

如果您的 UI 由标准`Field`对象（如`TextField`、 或`ButtonField`、 or ）组成`BrowserField`，没有太多自定义，那么定义 UI 外观的工作主要在于这些字段的*布局*方式。 *布局*是指设置字段的大小及其位置。

有时，您会有一个需要在较低级别进行处理的 UI。例如，您可能会做一些自定义绘画，其中涉及绘制线条、填充区域、绘制渐变等。这项工作通常以`Field`对象的`paint()`方法完成。有时，您在其他地方也有绘图代码，例如`drawFocus()`or `paintBackground()`。

如果你想触发重绘，它调用你的自定义`paint()`方法，那么你想用`invalidate()`它来实现。

如果你想触发一个新的布局，它以特定的大小或位置排列子字段，那么`invalidateLayout()`可以用于那个。

但是，我会注意到这`invalidateLayout()`是`Screen`类中的一个方法。如果您使用 RIM`Screen`子类，例如`MainScreen`or `FullScreen`，那么它们带有自己的顶级*委托* `Manager`对象。我相信调用`Screen.invalidateLayout()`将触发该`sublayout()`内置的方法`Manager`被调用。那可能不是你真正想要的。

除非您像这样实现自己的`Screen`子类：

```
public class MyScreen extends Screen {

   public MyScreen() {
       super(new MyCustomManager());
   }
} 
```

您可能没有`sublayout()`自己实现该委托管理器的代码（包括 ）。

我发现当我想强制`sublayout()`再次被调用时，我使用[updateLayout() 方法](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Field.html#updateLayout%28%29)触发它，而不是`invalidateLayout()`. 此外，与 的方法相反，`invalidateLayout()`它适用于所有类和类，因此您可以只选择要刷新的 UI 元素*树的特定部分。*但是，这只是我的经验。`Screen``updateLayout``Manager``Field`

 *[以下是 BlackBerry 论坛上有关此主题的一些评论](http://supportforums.blackberry.com/t5/Java-Development/updateLayout-and-invalidate-in-Manager/td-p/1878907)*

# spring - 我应该怎么做才能确保 Spring 是线程安全的？

> ID：13735778
> 
> 赞同：0
> 
> 时间：2012-12-06T01:57:02.330
> 
> 标签：spring, hibernate

我可以通过像这样在Spring中配置数据源来知道：

```
<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
  <property name="jndiName" value="jdbc/dev"/>
  <property name="lookupOnStartup" value="false"/>
  <property name="cache" value="true"/>
  <property name="proxyInterface" value="javax.sql.DataSource"/>
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
  <property name="dataSource">
    <ref bean="dataSource"/>
  </property>
  ...
</bean> 
```

并像这样在 Spring 中配置我的 BOC 和 DAO 对象：

```
<bean id="Dao" class="com.dao.impl.DaoImpl">
  <property name="sessionFactory" ref="sessionFactory"/>
</bean>

<bean id="Bo" class="com.bo.impl.BoImpl">
  <property name="theDao">
    <ref local="Dao"/>
  </property>
</bean> 
```

目前我正在用 3 个用户对其进行测试，1 个成功地将数据插入 DB，1 个挂起，1 个在操作中丢失，这意味着没有响应，Websphere Application Server 中没有捕获日志。有 3 个用户同时使用该应用程序未通过测试用例，当有 1000 个用户同时使用该应用程序的情况下，我能否知道如何确保所有这些都是线程安全的？

* * *

**更新**

回应@Adrian Shum 查询：

关于 BO 的事情，我不确定这是什么模式。但我是 BOC 是 Business Object Controller 的代表，拥有这个单元类的目的是将业务逻辑与 DAO 对象分离。最终这将导致 XHTML/JSP 是前端，BO 是业务控制器，而 DAO 是关注休眠和查询构造。

为了检索会话工厂，每个 DAO 对象都必须扩展 HibernateDaoSupport，这就是本教程中 Spring-Hibernate 集成的工作方式。这是一些代码片段：

```
class DAO extends HibernateDaoSupport implements IDao {

  public void save( Pojo pojo ) {
    getHibernateTemplate().save(pojo);
  }

  public void update( Pojo pojo ) {
    getHibernateTemplate().update(pojo);
  }

  public void delete( Pojo pojo ) {
    getHibernateTemplate().delete(pojo);
  }
} 
```

我知道 Spring 对象默认是单例的。这是否意味着每个线程将只有一个对象或整个 JVM 实例将只有一个对象？如果我像这样将这些 BO 和 DAO 对象声明为会话范围怎么办：

```
<bean id="Dao" class="com.dao.impl.DaoImpl" scope="session">
  <property name="sessionFactory" ref="sessionFactory"/>
</bean>

<bean id="Bo" class="com.bo.impl.BoImpl" scope="session">
  <property name="theDao">
    <ref local="Dao"/>
  </property>
</bean> 
```

关于数据更新或检索，这可能会发生，因为我们正在测试的 3 个用户实际上针对的是同一记录。可能有一个锁，因为我注意到有一个函数在执行此代码：

```
Query queryA = session.createQuery("Delete From TableA where fieldA = :theID");
queryA.setParameter("theID", "XX");
queryA.executeUpdate();

Query queryB = session.createQuery("Delete From TableB where fieldB = :theID");
queryB.setParameter("theID", "YY");
queryB.executeUpdate();

// update tableB object
session.save(tableBObj);

// update each tableA object
for(TableAObj obj : TableAObjList) {                
  session.save(obj);
  session.flush();
  session.evict(obj);
} 
```

TableA(slave) 和 TableB(master) 之间有关系。我知道 TableA 和 TableB 之间有一个数据库设计，但这超出了这个问题。我只是好奇这个函数是否会导致并发问题，即使我把这个类设为单例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T02:11:37.470

从您的问题来看，显然线程安全与 Spring 无关。

可能有很多地方会出错，例如：（我真的不知道你的 BO 是什么意思，因为它似乎不是一个众所周知的模式。我假设你的“用户”将调用 BO 中的方法，而 BO 会调用 DAO 来完成数据检索工作）

您如何使用会话工厂？我希望你没有得到一个会话并继续使用它。展示一些关于如何使用它的代码片段会很棒。

如果您的 BO 是单身人士，它是否会为单个“用户会话”保留任何状态？处理中使用的任何共享对象是否不是线程安全的？

对于与 DAO 相关的问题，即数据检索和更新，您是否已采取措施避免死锁？例如，函数 A 将更新表 X 然后表 Y，而函数 B 更新 Y 然后 X。您是否已完成工作以确保对于更新同一记录的 2 个用户，后者的更新不会默默地覆盖前者一个（如果更新不是幂等的）。

可能有很多原因导致您的问题，但我相信其中 99.999% 与 Spring（或 Hibernate）无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T10:00:55.760

I have the problem resolved. It is due to the DB2 failed to handle concurrency issues by adding a new column into the table, and make it as a primary key.

# android - 没有应用程序活动时如何更改 TextView？

> ID：13735781
> 
> 赞同：1
> 
> 时间：2012-12-06T01:57:53.997
> 
> 标签：android, android-activity, sms, textview

哦，伙计，我已经用谷歌搜索了我的裤子，几天来都没有遇到错误。

简而言之，我想收到一条带有消息*设备*的短信：*命令*，例如 SPA:ON

我的应用程序非常简单，我要做的就是更改在 MainActivity 中显示设备状态的文本（即更改 XML 中的 @string/somevalue），以便当我收到 SPA:ON 消息时，我的 TextView从 OFF 的初始字符串变为 ON 的新命令文本。

鉴于下面的代码，最好的方法是什么？

如果不可能 - 我该怎么办？

谢谢

```
public class MainActivity extends Activity {

    private static Button buttonSend;
    private static EditText textPhoneNo;
    private static EditText textSMS;
    private static Context context;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        buttonSend = (Button) findViewById(R.id.buttonSend);
        textPhoneNo = (EditText) findViewById(R.id.editTextPhoneNo);
        textSMS = (EditText) findViewById(R.id.editTextSMS);

        buttonSend.setOnClickListener(new OnClickListener() {

            @Override
        public void onClick(View v) {   

            String phoneNo = textPhoneNo.getText().toString();
            String sms = textSMS.getText().toString();  

            if (phoneNo.length()>0 && sms.length()>0) 
            {
                sendSMS(phoneNo, sms);
            }
            else
            {
                Toast.makeText(getBaseContext(), 
                    "Please enter both phone number and message.", 
                    Toast.LENGTH_SHORT).show();
            }
        }
        });
    }  

    //---sends a SMS message to another device---
    public void sendSMS(String phoneNo, String message) {      

        String SENT = "SMS_SENT";
        String DELIVERED = "SMS_DELIVERED";

        PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
            new Intent(SENT), 0);

        PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
            new Intent(DELIVERED), 0);

        //---when the SMS has been sent---
        registerReceiver(new BroadcastReceiver(){
            @Override
            public void onReceive(Context context, Intent intent) {
                switch (getResultCode())
                {
                case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS sent", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                        Toast.makeText(getBaseContext(), "Generic failure", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NO_SERVICE:
                        Toast.makeText(getBaseContext(), "No service", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NULL_PDU:
                        Toast.makeText(getBaseContext(), "Null PDU", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_RADIO_OFF:
                        Toast.makeText(getBaseContext(), "Radio off", 
                                Toast.LENGTH_SHORT).show();
                        break;
                }
            }
        }, new IntentFilter(SENT));

        //---when the SMS has been delivered---
        registerReceiver(new BroadcastReceiver(){
            @Override
            public void onReceive(Context context, Intent intent) {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS delivered", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case Activity.RESULT_CANCELED:
                        Toast.makeText(getBaseContext(), "SMS not delivered", 
                                Toast.LENGTH_SHORT).show();
                        break;                      
                }
            }
        }, new IntentFilter(DELIVERED));         

        try 
        {
            SmsManager sms = SmsManager.getDefault();
            sms.sendTextMessage(phoneNo, null, message, sentPI, deliveredPI);
        } 
    catch (Exception e) 
        {
            Toast.makeText(getApplicationContext(),
                "SMS faild, please try again.",
                Toast.LENGTH_LONG).show();
            e.printStackTrace();
        }
    }       
} 
```

要接收（并尝试进行文本更新）的 SMS 代码是：

```
public class SmsReceiver extends BroadcastReceiver
{
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        //---get the SMS message passed in---
    Bundle bundle = intent.getExtras();        
    SmsMessage[] msgs = null;
    String str = "";    

    if (bundle != null)
    {
        //---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];  

        for (int i=0; i<msgs.length; i++){
            msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
            str += "SMS from :" + msgs[i].getOriginatingAddress();                     
            str += " :";
            str += msgs[i].getMessageBody().toString();
            str += "\n";        
        }
        //---display the new SMS message---
        Toast.makeText(context, str, Toast.LENGTH_LONG).show(); 

        //---update the device status from the command---
        /* SOME HOW I WANT TO DO:

        String toast_msg = "None";
        String temp[];
        temp = str.split("\\:");
        String device = temp[0];
        String cmd = temp[1];

        TextView t = (TextView) findViewById(R.id.textViewSPAStatus);

        t.setText(cmd);

        Toast.makeText(getBaseContext(), 
                toast_msg, 
                Toast.LENGTH_SHORT).show(); 
        */
    }                       
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T02:08:43.313

您不能修改 xml，这些值对于 xml 是永久的。您可以改用什么：

*   共享首选项
*   SQLite 数据库
*   一份文件

[SharedPreferences](http://developer.android.com/guide/topics/data/data-storage.html#pref)是最简单的设置并且运行良好，虽然文本 Preferences 是名称的一部分，但它不限于设置，因为它是一个简单的键值对存储选项。因此，在设置之后，您的应用程序将使用它作为集中的“命令文本”数据库。这意味着当您的 Activity 创建/恢复时，您将使用 SharedPreferences 的任何内容更新 TextView。SharedPreferences 的好处在于您可以为您的命令创建一个单独的简单数据库，除非用户删除您的应用程序数据，否则它是您的应用程序需要在重启、退出等期间持久保存的值的最安全存储选项之一。

此外，为了确保您的接收者可以接收所有消息，您可能需要考虑创建一个后台服务来注册您的接收者。

# javascript - Youtube API - 如何使用自定义控件打开/关闭字幕，更改语言？

> ID：13735783
> 
> 赞同：4
> 
> 时间：2012-12-06T01:58:05.463
> 
> 标签：javascript, youtube, youtube-api, swfobject

我有一个带有自定义 HTML 控件的 youtube 播放器，并且想添加一个按钮来打开/关闭隐藏式字幕并切换语言。任何人都有使用 JS 或 iframe API 来执行此操作的经验？我知道将 cc_load_policy=1 附加到 url 将强制显示字幕，但我正在使用自定义控件并想添加一个切换按钮。我尝试使用 loadVideoByUrl 方法并附加 cc 参数，但这不起作用似乎不起作用。

我也只能使用 iframe 方法让播放器以用户的默认语言显示字幕，而不是 swf 对象方法。Swf 对象始终默认为英语。如果有人对此也有任何见解，请告诉我！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-03-29T01:13:12.130

我在他们的 api 文档中没有找到这个，但是使用你的 youtube 播放器对象你应该能够做到：

```
player.loadModule("captions");  //Works for html5 ignored by AS3
player.loadModule("cc");  //Works for AS3 ignored by html5 
```

将其关闭：

```
player.unloadModule("captions");  //Works for html5 ignored by AS3
player.unloadModule("cc");  //Works for AS3 ignored by html5 
```

如果加载了模块，则更改哪种语言：

```
player.setOption("captions", "track", {"languageCode": "es"});  //Works for html5 ignored by AS3
player.setOption("cc", "track", {"languageCode": "es"});  //Works for AS3 ignored by html5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-13T08:54:50.600

```
function onPlayerStateChange(event) 
{	
  try
  {
    player.unloadModule("captions");  
    player.unloadModule("cc"); 
  }
  catch (exception)
  {
    LoggerUtil.logError("Error when trying to unloadModule youtube captions: " + exception);
  }
  // The rest of your function
}
```

感谢**James Irwin**在 android 4.4.2 和 android 6.0.1 上测试时这两行对我有用

```
player.unloadModule("captions");
player.unloadModule("cc"); 
```

您应该将这两行放在`onPlayerStateChange`函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T20:27:19.470

不幸的是，我们现在没有对字幕的完整 API 支持。您可以将自己添加到此外部功能请求中，以便在此更改时收到通知：[https ://code.google.com/p/gdata-issues/issues/detail?id=444](https://code.google.com/p/gdata-issues/issues/detail?id=444)

（尽管该功能请求的年代久远，但仍有人积极寻求增加支持。）

# c# - Storyboard.begin() 抛出 InvalidOperationException

> ID：13735785
> 
> 赞同：1
> 
> 时间：2012-12-06T01:58:28.723
> 
> 标签：c#, xaml, windows-phone

我不确定这里发生了什么。我正在按照 Microsoft 提供的示例进行操作。一切都在后端完成，因为我需要决定您的用户是应该在文本字段中输入内容还是应该将文本字段值显示为普通文本。代码如下：

```
 nameInput.Name = "inputName";
            nameInput.Text = "Journey Name";
            nameInput.KeyUp += onNameInput;

            ColorAnimation animation = new ColorAnimation();
            animation.From = Colors.Blue;
            animation.To = Colors.White;
            animation.Duration = new Duration(TimeSpan.FromMilliseconds(100));
            animation.RepeatBehavior = RepeatBehavior.Forever;
            Storyboard.SetTarget(animation, nameInput);
            Storyboard.SetTargetProperty(animation, new PropertyPath(TextBlock.ForegroundProperty));
            storyBoard.Children.Add(animation);
            journeyStackPanel.Children.Add(nameInput);
            ClockState state = storyBoard.GetCurrentState();
            storyBoard.Begin(); //<---Crashes here 
```

我正在关注

```
http://msdn.microsoft.com/en-us/library/cc672995(v=vs.95).aspx 
```

例子。我不确定发生了什么，不幸的是调试器没有吐出更多信息。也许我错过了一步？对不起，我有点含糊不清，但这就是我在这个问题上的所有信息。

任何帮助是极大的赞赏！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:31:23.493

我能够在最新的 WP8 SDK 上复制此问题，并生成以下错误消息：

> 由于类型不兼容，ColorAnimation 不能用于动画属性 Foreground。

我相信这是因为您试图将 TextBox 的 Foreground 属性更改为 Color 对象，但 Foreground 实际上是一个 Brush 对象，因此会出现 Type Mismatch 错误。相反，您必须更改 Foreground 对象的 Color 属性。

试试这个：

`Storyboard.SetTargetProperty(animation, new PropertyPath("(Foreground).(Color)"));`

# javascript - 第二个警报框“未定义”

> ID：13735786
> 
> 赞同：0
> 
> 时间：2012-12-06T01:58:59.490
> 
> 标签：javascript, html

> **可能重复：**
> [在对象原型方法中的 setInterval/setTimeout 中引用“this”](https://stackoverflow.com/questions/7890685/referencing-this-inside-setinterval-settimeout-within-object-prototype-methods)

第二个警报框说“未定义”？为什么是这样？

```
<a id = "clickme">Click Me!</a>
<script>
var a = document.getElementById("clickme");
a.onclick = function(); {
    alert(this.innerHTML);
    setTimeout( function() {
        alert( this.innerHTML );
    }, 1000);
};
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T02:01:20.397

因为在`function`你传递给的内部`setTimeout`，`this`不再是`a`元素。它将是`global`对象（`window`在浏览器领域）或`undefined`严格模式。

相反，存储对`this`;的引用

```
var a = document.getElementById("clickme");
a.onclick = function(); {
    var that = this;

    alert(this.innerHTML);
    setTimeout( function() {
        alert( that.innerHTML );
    }, 1000);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T02:02:38.133

[https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout#The_.22this.22_problem](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout#The_.22this.22_problem)

`this`在处理程序中具有不同的值`setTimeout`。

# ruby - sinatra 中更简洁的 url 路由模式

> ID：13735792
> 
> 赞同：0
> 
> 时间：2012-12-06T01:59:53.297
> 
> 标签：ruby, sinatra, routes

每个人。

我正在使用 sinatra 构建一个 Web 应用程序。在 api 部分，有很多以公共前缀开头的路由，例如：

```
get '/v1/command_1' do; end
get '/v1/command_2' do; end
get '/v1/command_3' do; end
get '/v1/command_4' do; end
get '/v1/command_5' do; end 
```

我想知道如何避免所有这些 '/v1' 前缀？我可以只在一条路线中定义一次，而在其他路线中，我可以从 '/command_1' 或类似的东西开始吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T06:59:21.217

我以前没有使用过它，但是 sinatra-contrib 项目中有一个扩展可以让你像这样嵌套。

[http://www.sinatrarb.com/contrib/namespace.html](http://www.sinatrarb.com/contrib/namespace.html)

然后你可以做这样的事情：

```
namespace '/v1' do
  get '/command_1' {}
  get '/command_2' {}
  # etc
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:08:53.070

```
get '/v1/command_:command' do |command|
  # ...
end 
```

# android - 来自互联网和内存不足的图像的网格视图

> ID：13735793
> 
> 赞同：0
> 
> 时间：2012-12-06T02:00:11.067
> 
> 标签：android, memory

我正在尝试在 gridView 中显示一些图像，这些图像来自对 ElasticSearch 服务器的研究。所以我在我的第一个活动中有一个文本字段 + 按钮，当我单击该按钮时，一些与文本字段中的关键字相关的图像会打印在网格视图中。

到目前为止，我可以进行研究，并且在 gridView 中显示了一些图像，但是在向下/向上滚动或进行其他研究后，我的应用程序崩溃（内存不足）。我想我必须分别解决这两个问题。对于第一个（向上/向下滚动），我想记住缓存中的位图（http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html）。对于第二个问题，我不知道该怎么办。欢迎所有建议/想法。

当我在缓存中记住图像时，我仍然遇到问题，当我向下滚动和向上滚动后，不再显示图像，并且 catlog 中没有错误。

AndroidGridLayoutActivity.java

```
public class AndroidGridLayoutActivity extends Activity {
ImageAdapter imgAdapter =new ImageAdapter(this);
GridView gridView;
private static LruCache<String, Bitmap> mMemoryCache;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.grid_layout);

    gridView = (GridView) findViewById(R.id.grid_view);

     // Get memory class of this device, exceeding this amount will throw an
    // OutOfMemory exception.
    final int memClass = ((ActivityManager) getApplicationContext().getSystemService(Context.ACTIVITY_SERVICE)).getMemoryClass();

    // Use 1/8th of the available memory for this memory cache.
    final int cacheSize = 1024 * 1024 * memClass / 8;

    mMemoryCache = new LruCache<String, Bitmap>(cacheSize) {
        @Override
        protected int sizeOf(String key, Bitmap bitmap) {
            // The cache size will be measured in bytes rather than number of items.
            return bitmap.getByteCount();
        }
    };

}

public void sendMessage(View view){

    imgAdapter.clearmThumbIds();

    gridView = (GridView) findViewById(R.id.grid_view);
    EditText editText = (EditText) findViewById(R.id.searchBar);
    String message = editText.getText().toString();
    try {
        eSearchElastic.ESE(imgAdapter,message,gridView,0);
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    System.out.println("SendMessage  is ok poiuur ca");

}

public static void addBitmapToMemoryCache(String key, Bitmap bitmap) {
    if (getBitmapFromMemCache(key) == null) {
        mMemoryCache.put(key, bitmap);
    }
}

public static Bitmap getBitmapFromMemCache(String key) {
    return mMemoryCache.get(key);
}

} 
```

ImageAdapter.java

```
public class ImageAdapter extends BaseAdapter {
static private List<String> urlList = new ArrayList<String>();
private Context mContext;
Bitmap bmImg;

static private List<String> mThumbIds = new ArrayList<String>();

public void addmThumbIds(String url) {
    mThumbIds.add(url);
}

public void clearmThumbIds() {
    mThumbIds.clear();
}

public String getmThumbIds(int position) {
    return mThumbIds.get(position);
}

// Constructor
public ImageAdapter(Context c) {
    mContext = c;
}

@Override
public int getCount() {
    return mThumbIds.size();
}

@Override
public Object getItem(int position) {
    return mThumbIds.get(position);
}

@Override
public long getItemId(int position) {
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    if (convertView == null) {
        imageView = new ImageView(mContext);
    } else {
        imageView = (ImageView) convertView;
    }

    System.out.println("Poisition " + position);
    downloadFile(imageView, mThumbIds.get(position));
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
    imageView.setLayoutParams(new GridView.LayoutParams(135, 135));
    imageView.setPadding(0, 0, 1, 0);

    return imageView;
}

void downloadFile(final ImageView imageView, final String fileUrl) {

    AsyncTask<Object, Object, String> task = new AsyncTask<Object, Object, String>() {

        @Override
        protected String doInBackground(Object... params) {
            System.out.println("TEST 1 : begining background");
            if (!urlList.contains(fileUrl)) {
                urlList.add(fileUrl);

                URL myFileUrl = null;
                try {
                    myFileUrl = new URL((String) params[0]);
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                try {
                    HttpURLConnection conn = (HttpURLConnection) myFileUrl
                            .openConnection();
                    conn.setDoInput(true);
                    conn.connect();
                    InputStream is = conn.getInputStream();

                    bmImg = BitmapFactory.decodeStream(is);

                } catch (IOException e) {
                    e.printStackTrace();
                }
            } else {
                System.out.println("TEST 2");
                bmImg = AndroidGridLayoutActivity
                        .getBitmapFromMemCache(fileUrl);

            }
            return null;

        }

        protected void onPostExecute(String unused) {
            System.out.println("TEST 2 : begining postexecute");
            imageView.setImageBitmap(bmImg);
            if (!urlList.contains(fileUrl)) {
                AndroidGridLayoutActivity.addBitmapToMemoryCache(fileUrl,
                        bmImg);
            }

        }
    };
    task.execute(fileUrl);

}

 } 
```

网格布局.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<EditText
android:id="@+id/searchBar"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:hint="@string/Search_hint"
android:inputType="text"
android:imeOptions="actionSend" />
<Button xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/button_send"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="@string/button_send"
android:onClick="sendMessage" />

<GridView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/grid_view"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:numColumns="auto_fit"
android:columnWidth="90dp"
android:horizontalSpacing="10dp"
android:verticalSpacing="10dp"
android:gravity="center"
android:stretchMode="columnWidth" >  

</GridView>
</LinearLayout> 
```

如有需要 eSearchElastic.java

```
public class eSearchElastic {

static private List<String> idRowKey = new ArrayList<String>();

public static void ESE(final ImageAdapter imgAdapter, final String keyword,
        final GridView gridView,final int from) throws ClientProtocolException,
        IOException {

    AsyncTask<Void, Void, Void> task = new AsyncTask<Void, Void, Void>() {

        private String rowKey;
        private int i =0;
        private int imageAlreadyPrinted =0;
        private int size=10;

        @Override
        protected Void doInBackground(Void... params) {
            String server = "server";
            String index = "images";
            String type = "images_schema_1";

            System.out.println("\n\n KEYWORD " + keyword + "\n\n");
            String query = "{\"sort\" : [ {\"confidence_level\" : {\"order\" : \"desc\"} }],\"from\" : "+from+", \"size\" : "+size+",\"query\" : {\"text_phrase\" : { \"keyword\" : \""
                                + keyword
                                + "\"}},\"filter\" : {\"numeric_range\" : {\"confidence_level\" : { \"from\" : 10, \"to\" : 100, \"include_lower\" : true, \"include_upper\" : true}}}}'";

            ElasticConnection connection = new ElasticConnection(server, index, type);
            ElasticQuery elasticQuery = new ElasticQuery(query); 
            ElasticResponse response = null;
            try {
                response = elasticQuery.getAnswer(connection);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 

            String[] fields = { "url"};
            List<ElasticResult> results = null;
            try {
                results = response.getAnswer(fields);
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            for (ElasticResult res : results) {
                System.out.println("ICI  "+from+ " " + res.getField("url"));
                rowKey = res.getId();
                System.out.println(res.getId());

                if (rowKey != null) {

                        if (idRowKey.contains(rowKey)) {
                            if(imageAlreadyPrinted<size && i==size-1)
                                try {
                                    ESE(imgAdapter,keyword,gridView,from+10);
                                } catch (ClientProtocolException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                } catch (IOException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                }

                            System.out.println(rowKey);
                            continue;
                        } else {
                            imageAlreadyPrinted++;
                            addidRowKey(rowKey);
                            imgAdapter.addmThumbIds(res.getField("url"));
                        }
                    }
                i++;    
            }

            System.out.println("-----FIN esearch");
            return null;

        }

        @Override
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);
            gridView.setAdapter(imgAdapter);
        }

    };
    task.execute();

}

public static void addidRowKey(String url) {
    idRowKey.add(url);
}

public void cleaidRowKey() {
    idRowKey.clear();
}

public String getidRowKey(int position) {
    return idRowKey.get(position);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T02:16:27.420

您应该使用延迟图像加载。这是一个很好的例子：[Universal Image Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T02:26:04.717

@Lazy Ninja 是对的，关键是延迟图像加载。此外，为了提高适配器的性能，您应该考虑多线程。[Android Developer's blog](http://android-developers.blogspot.fr/2010/07/multithreading-for-performance.html)上有很好的参考资料。比@Lazy Ninja 给出的示例更简单。

一开始很难理解，但迄今为止最好的方法。

此外，您应该考虑使用 Android 服务而不是异步任务来从网络加载数据。[RoboSpice](https://github.com/octo-online/robospice)可以帮助您实现这一目标。

# jquery-mobile - 带有表单的 Jquery Mobile 对话框

> ID：13735794
> 
> 赞同：1
> 
> 时间：2012-12-06T02:00:15.603
> 
> 标签：jquery-mobile

我有一个带有表单的 JQuery Mobile 对话框：

```
<form action="send" method="post">
    <input type="text"/>
    <input type="submit" />
</form> 
```

我想要的是，当表单提交时，我只想关闭对话框或返回上一页。如何用 JQM 做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:10:11.350

尝试将下一个示例调整为您的解决方案：

```
 <div data-role="popup" id="popupLogin" data-theme="a" class="ui-corner-all">
        <form>
            <div style="padding:10px 20px;">
              <h3>Please sign in</h3>
              <label for="un" class="ui-hidden-accessible">Username:</label>
              <input type="text" name="user" id="un" value="" placeholder="username" data-theme="a" />

              <label for="pw" class="ui-hidden-accessible">Password:</label>
              <input type="password" name="pass" id="pw" value="" placeholder="password" data-theme="a" />

              <button type="submit" data-theme="b">Sign in</button>
            </div>
        </form>
    </div> 
```

# java - 如何将 SELECT 语句移动到公共静态

> ID：13735796
> 
> 赞同：0
> 
> 时间：2012-12-06T02:00:37.287
> 
> 标签：java, data-migration

该作业的规格如下：

*   **找到所有嵌入式 sql 语句并为尚未使用常量的嵌入式 sql 实现常量。**
*   **用 String.format() 替换 Sql 语句创建中的任何字符串连接。**
*   **对于任何 String.format 命令，您必须转义任何现有的 % 符号。这些符号经常用于 LIKE 操作。**

如何将此 SQL 查询移动到“公共静态字符串 MY_QUERY”中，这样​​它就不会被前向引用，并且可以解析“匹配”和“使用For”变量。我将对 MY_QUERY 执行的操作是从 JUnit 测试访问它，然后针对源数据库和目标数据库执行查询，以确保查询在两个数据库上执行数据迁移所需的查询。

```
package artemispm.autocalc;

import java.sql.*;
import java.util.*;
import a7.unittests.dao.UnitTestHelper;
import artemispm.serverutil.*;
import artemispm.trdo.*;
import artemispm.parser.*;

public abstract class TRBaseScoreCalculator implements ExpressionParserLookup {

/*****THIS IS THE NEW QUERY THAT WILL BE ACCESSED FROM JUNIT TEST****/

public static String MY_QUERY = 

public Connection               m_con;
protected String                m_characName        = "";

public boolean isThisCharacInUse(Connection con, String characName,String useFor) 
throws SQLException, TRException {
boolean result;        
String match = "[" + TRBaseSql.rewrapQuotes(characName) + "]";

if(TRBaseSql.getDatabaseType(con) == TRBaseSql.DBTYPESQLSERVER) {
    match = "[[]" + TRBaseSql.rewrapQuotes(characName) + "]";
}

TRSystemSQL sql = new TRSystemSQL();
TRSystem sys=sql.getSystem(con);
result =    (   sys.getScoreCalculation() != null 
            &&  sys.getScoreCalculation().indexOf(match) >= 0  );
if (result) return(result);
else {

    int count;

    /*****THIS IS THE PLACE I NEED HELP AT  12/5/2012 ******/
/*I NEED TO SOMEHOW MOVE THE BELOW STATEMENT USING THE SPECS INTO MY_QUERY**/
/**"select count(userfieldid) from tr_userfield where calcexpression like '%" + match + "%'and usefor like '%" + useFor +"%'"***/

    count = sql.executeGetInt(con, "select count(userfieldid) from tr_userfield where calcexpression like '%" + match + "%'and usefor like '%" + useFor +"%'" , null);

    if (count > 0) return true;
    count = sql.executeGetInt(con, 
            "select count(characid) from tr_charac where calcexpression like '%" + match + "%'and usefor like '%" + useFor +"%'" , null);
    return (count > 0);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:37:37.420

您可以作弊并执行以下操作：

持续的：

```
private static final String FORMAT = "select count(userfieldid) " + 
    "from tr_userfield " + 
    "where calcexpression like '%c%s%c' and usefor like '%c%s%c'";

private static final char WILDCARD = '%'; 
```

创建查询：

```
String calcExpression = "a";
String useFor = "b";

String query = String.format(FORMAT, WILDCARD, calcExpression, WILDCARD, 
    WILDCARD, useFor, WILDCARD);
System.out.println(query); 
```

这给了你：

> select count(userfieldid) from tr_userfield where calcexpression like '%a%' and usefor like '%b%'

# python - 创建简单的python服务器为d3提供json

> ID：13735797
> 
> 赞同：1
> 
> 时间：2012-12-06T02:00:44.777
> 
> 标签：python, webserver, d3.js

我`d3.json()`用来获取 d3 的 json 数据。我倾向于启动一个 python 服务器来提供这些数据。我在网上找到一个片段：

```
class MyTCPServer(SocketServer.ThreadingTCPServer):
    allow_reuse_address = True

class MyTCPServerHandler(SocketServer.BaseRequestHandler):
    def handle(self):
        try:
            data = getJson() # json data is stored here
            self.request.sendall(json.dumps(data))
        except Exception, e:
            pass 
```

当我通过浏览器请求它时，我可以看到结果。但是，d3 总是返回 null

```
d3.json('http://localhost', function(json) {
    alert(json)
}); 
```

我应该怎么做才能得到正确的结果？

# c# - ADO.NET 和 LINQ 的执行速度对比

> ID：13735798
> 
> 赞同：0
> 
> 时间：2012-12-06T02:01:14.887
> 
> 标签：c#, asp.net, linq, entity-framework, ado.net

作为计算理学士最后一年项目的一部分，我正在测试 2 个查询的执行速度。一种是用 LINQ 编写的，另一种是用 ADO.NET 编写的，它们将信息插入数据库。经过测试发现 ADO.NET 明显比 LINQ 快，但速度差异以毫秒为单位。所以问题是这样的，你认为人们的延迟或速度差异在什么时候对人类变得明显？500 毫秒、1 秒、2、5？程序的延迟在什么时候需要使用更快的替代方案。任何和所有的反馈将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:06:30.580

您必须考虑整体背景。执行速度的差异是否超过了在一个版本的代码与另一个版本中编写、维护、理解和培训新开发人员的时间差异？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T02:06:14.993

通常的经验法则是 100 毫秒是用户对“立即”的感知结束的地方。除此之外，它非常依赖于上下文 - 如果用户认为应用程序很慢，则应用程序很慢。如果用户认为它很慢，您应该研究使其更快。

# java - Java . 包含第一个实例

> ID：13735801
> 
> 赞同：0
> 
> 时间：2012-12-06T02:01:35.243
> 
> 标签：java

我有一个字符串，说

```
"the dog jumped over the fox" 
```

如果我这样做`string.contains("the")`，它将返回`true`。有没有办法我可以只取出第一个实例`"the"`？

编辑：我意识到我的问题模棱两可。正如你们大多数人现在可能已经猜到的那样，我想找到它的第一个实例，将其“拉”出来，并用“”替换它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T02:06:09.117

如果“拉出”是指删除，则可以使用`String#replaceFirst`.

IE

```
String sentence = "the dog jumped over the fox";
if (sentence.contains("the")) {
    sentence = sentence.replaceFirst("the\\s*","");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:06:56.280

你想*找到*字符串的第一个实例吗？看`string.indexof`

你想*替换*一审？看`string.ReplaceFirst`

[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)

# php - 标头已发送问题

> ID：13735806
> 
> 赞同：0
> 
> 时间：2012-12-06T02:02:29.590
> 
> 标签：php, html

> **可能重复：**
> [PHP 中的“警告：标头已发送”](https://stackoverflow.com/questions/8028957/warning-headers-already-sent-in-php)

查看与此错误相关的其他线程，我似乎无法找到我的问题。在通话之前我没有任何输出，所以谁能告诉我问题是什么？

错误是：

```
Warning: Cannot modify header information - headers already sent by ... line 12 
```

这是PHP代码：

```
<?php if (!isset($_SESSION)) session_start();

require_once 'classes/mobile_detect.class.php';

$detect = new Mobile_Detect;
if ($detect->isMobile()) {
    $referer = 'http://my_site_name/m/index.php';

    header("Location: " . $referer);
    exit();
}     
?>

<!DOCTYPE html>
<html lang="en">
<head>
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:07:43.860

很可能是空格（或其他输出）`classes/mobile_detect.class.php`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T02:07:22.337

在十六进制编辑器中打开文件，并确保文件开头没有字节顺序标记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T02:30:33.900

`?>`永远不要在库文件中使用结束 php 标记。不需要并且可能导致此类问题。

如需更完整的答案，请阅读[为什么有些脚本会省略结束 PHP 标记“？>”？](https://stackoverflow.com/questions/3219383/why-do-some-scripts-omit-the-closing-php-tag)

# javascript - 有没有办法使用 jquery 从属性中删除特定值？

> ID：13735809
> 
> 赞同：1
> 
> 时间：2012-12-06T02:03:01.717
> 
> 标签：javascript, jquery

我有一个显示产品的页面。在包含`<ul>`我有一些 jQuery 为属性（例如`<ul id="products" subcategorynavids="someValue">`）添加值。

当用户单击过滤链接时，jQuery 会检查其中的内容，`subcategorynavids`然后仅显示下面列出了 navid 的产品。

我遇到的问题是，当属性列出了多个值，并且用户再次单击过滤器链接（以禁用它）时，我只需要删除被禁用的值...

例如，如果页面设置为`<ul id="products" subcategorynavids="9007 8019 7365">`并且用户单击启用/禁用的过滤器，`navid="8019"`我如何删除“8019”并留下“9007”和“7365”？

我知道有`.removeAttr()`, `.removeProp()`，但那些只会完全删除属性（对吗？）。

我尝试了以下方法（正如预期的那样，没有奏效）......

```
$("#products").attr('subcategorynavids').remove('8019'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T02:06:08.370

没有内置的 jQuery 方法可以做到这一点，您必须手动完成。

```
$('#products').attr('subcategorynavids', function (_, val) {
    return jQuery.grep(val.split(' '), function (val) {
        return val !== '8019';
    }).join(' ');
}); 
```

这里我们使用 using 的回调方式[`attr()`](http://api.jquery.com/attr)来更新一个属性。在函数内部，我们将当前值`val`除以`' '`，然后将结果数组过滤为那些不`8019`使用[jQuery`grep()`](http://api.jquery.com/jQuery.grep)函数*的数组，然后将数组重新连接在一起并将其返回为 的新值`subcategorynavids`。

* 我想用`Array`'`filter()`方法，但不是所有现代浏览器都支持，所以你不妨使用`grep()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T02:05:18.200

在这种情况下，您可以只使用`.replace()`

```
var $attrs = $("#products").attr('subcategorynavids');
$("#products").attr( 'subcategorynavids', $attrs.replace( '8019', '' )); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T02:09:30.170

> 使用 .replace()

```
$("#products").attr('subcategorynavids',$("#products").attr('subcategorynavids').replace('8019 ','')); 
```

[http://jsfiddle.net/laupkram/fg3dn/](http://jsfiddle.net/laupkram/fg3dn/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-06T02:14:00.340

试试这个

```
var attr = $("#products").attr('subcategorynavids');
$("#products").attr('subcategorynavids', attr.replace('8019','')); 
```

首先获取该属性中的值并过滤掉关键字并再次设置新属性..就这么简单

# ruby - 在红宝石中提取非空值

> ID：13735810
> 
> 赞同：0
> 
> 时间：2012-12-06T02:03:06.080
> 
> 标签：ruby

```
pry(main)> s = {:a =>2, :d=>'foo', :x => '    ', :n => true, :z => nil}
=> {:a=>2, :d=>"foo"}
pry(main)> s.each do |k,v| p k unless v.empty? end

NoMethodError: undefined method `length' for 2:Fixnum 
```

我理解这是因为 fixnum 没有空方法。那么如何以一种*巧妙*的方式解决这个问题，而不是先找到数据类型然后检查它呢？我想打印那些`k`有价值`v`的东西。Yes`true`被认为是一个值，但不是一堆空格。对我来说，“有价值”是指非空字符和布尔值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T02:06:45.780

快速解决方案：

```
s.each {|k,v| p k unless v.to_s.empty?} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T04:10:40.283

有了您更新的评论，我认为这就是您想要的。

```
s = {:a =>2, :d=>'foo', :x => '    ', :n => true, :z => nil}
s.each { |k,v| p(k) if !!v && !v.to_s.strip.empty? }
# :n
# :d
# :a 
```

# c++ - 无限循环 C++

> ID：13735811
> 
> 赞同：0
> 
> 时间：2012-12-06T02:03:07.697
> 
> 标签：c++, while-loop, infinite-loop

我试图实现回文的解决方案，我认为我的逻辑是正确的，但是我的程序陷入了无限循环，并且我收到一条错误消息“Prep.exe 已停止工作”

```
int main()
{
    string word, reverse;

    cout << "Please enter a word to test for palindrome : ";
    cin >> word;
    cout << "Your word is: "<< word << endl;

    int i = 0;
    int size = word.length() - 1;
    while (size >= 0)
    {
        reverse[i++] = word[size--];
        //cout << reverse[i++];
    }

    cout << "The reversed word is: " << reverse << endl;

    if (word == reverse)
        cout << "It is palindrome" << endl;
    else
        cout << "It is not a palindrome" << endl;
} 
```

我不确定我的 while 循环做错了什么。我继续递减它并且我有一个有效的退出条件，那么为什么它会陷入循环？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T02:09:52.897

你没有得到一个无限循环；由于行中的越界访问，您会遇到崩溃，`reverse[i++]`因为`reverse`它是一个空字符串。请尝试改用该`reverse.push_back()`功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:09:49.260

您是否初始化了变量 reverse 只需检查它并在初始化后尝试。

希望有效

# c++ - 在 main 中访问类数据

> ID：13735813
> 
> 赞同：0
> 
> 时间：2012-12-06T02:03:16.877
> 
> 标签：c++, class, graph

我有一个图表类：

```
#ifndef GRAPH_H
#define GRAPH_H

#include<list>
#include<iostream>
#include "global.h"

class Graph_{

std::list<Vertex> vertices;
int vcount;
int ecount;

public:
    void insert_vertex(Vertex vert);
    int routesearch(Graph_ *passed, Vertex *vert,  double distance, double curdistance, double safety, double minsafe, int startID);

};

#endif 
```

然后在我的主要部分中，我尝试访问我声明的图中的顶点列表，它给了我一个错误：8 IntelliSense：成员“Graph_::vertices”不可访问。不知道该怎么做，因为它适用于我制作的所有其他结构，例如 Vertex，除了我制作的类。

```
 #include "graph.h"
 int main(){
    Vertex dumb;
    Graph_ map;
    map.vertices.push_back(dumb); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:04:35.333

> 它适用于我制作的所有其他结构

`struct`具有`public`默认访问级别。`class`才不是。`public`如果您想访问它，请创建该成员：

```
class Graph_{
//these two are private, because a class has private access level by default
    int vcount;
    int ecount;
public: // <<<--- public here
    std::list<Vertex> vertices;
public:
    void insert_vertex(Vertex vert);
    int routesearch(Graph_ *passed, Vertex *vert,  double distance, double curdistance, double safety, double minsafe, int startID);

}; 
```

# python - 使用 NLTK 在 Python 文件的特定区域中使用 sent_tokenize？

> ID：13735815
> 
> 赞同：1
> 
> 时间：2012-12-06T02:03:18.103
> 
> 标签：python, nlp, tokenize, nltk

我有一个包含数千个句子的文件，我想找到包含特定字符/单词的句子。

最初，我对整个文件进行标记（使用`sent_tokenize`），然后遍历句子以查找单词。但是，这太慢了。既然我可以快速找到单词的索引，我可以利用它来发挥我的优势吗？有没有办法只标记一个单词周围的区域（即找出哪个句子包含一个单词）？

谢谢。

编辑：我在 Python 中并使用 NLTK 库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:09:48.550

你用的是什么平台？在 unix/linux/macOS/cygwin 上，您可以执行以下操作：

```
sed 's/[\.\?\!]/\n/' < myfile | grep 'myword' 
```

它将仅显示包含您的单词的行（并且 sed 将非常粗略地标记为句子）。如果您想要特定语言的解决方案，您应该说出您正在使用的内容！

编辑Python：

以下将起作用 - 如果您的单词上有正则表达式匹配，它只会调用标记化（这是一个非常快速的操作）。这意味着您只标记包含您想要的单词的行：

```
import re
import os.path

myword = 'using'
fname = os.path.abspath('path/to/my/file')

try:
    f = open(fname)

    matching_lines = list(l for l in f if re.search(r'\b'+myword+r'\b', l))
    for match in matching_lines:
        #do something with matching lines
        sents = sent_tokenize(match)
except IOError:
    print "Can't open file "+fname
finally:
    f.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:57:02.270

这是一个可以加快搜索速度的想法。您创建一个附加列表，在其中存储大文本中每个句子的**总**字数。使用我从 Alex Martelli 那里学到的生成器函数，尝试以下操作：

```
def running_sum(a):
  tot = 0
  for item in a:
    tot += item
    yield tot

from nltk.tokenize import sent_tokenize

sen_list = sent_tokenize(bigtext)
wc = [len(s.split()) for s in sen_list]
runningwc = list(running_sum(wc)) #list of the word count for each sentence (running total for the whole text)

word_index = #some number that you get from word index

for index,w in enumerate(runningwc):
    if w > word_index:
        sentnumber = index-1 #found the index of the sentence that contains the word
        break

print sen_list[sentnumber] 
```

希望这个想法有所帮助。

**更新**：如果 sent_tokenize 很慢，那么您可以尝试完全避免它。使用已知索引在大文本中查找单词。

现在，逐个字符地向前和向后移动，以检测句子的结尾和句子的开头。像“[.!?]”（句号、感叹号或问号，后跟一个空格）之类的东西将表示句子的开始和结束。您只会在目标词附近进行搜索，因此它应该比 sent_tokenize 快得多。

# php - 预赛？如何？

> ID：13735816
> 
> 赞同：0
> 
> 时间：2012-12-06T02:03:38.157
> 
> 标签：php

说我有以下内容：

```
itag=45&url=http://o-o---preferred---sn-4g57kned--- 
```

我如何从 itag=45& 中得到“45”

我试过这个：

```
preg_match('/itag=(.*)&/', $link, $format); 
```

但它似乎不起作用..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T02:06:12.070

您不需要使用正则表达式。您可以使用[parse_str](http://php.net/manual/en/function.parse-str.php)。

```
<?php
parse_str($myString, $output);
echo $output['itag']; // 45 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T02:32:09.373

你的表达有效。

```
$link="itag=45&url=http://o-o---preferred---sn-4g57kned---";
preg_match('/itag=(.*)&/', $link, $format);
echo $format[1]; 
```

或查看格式数组

```
print_r($format); 
```

# jquery-mobile - jQueryMobile 返回上一页

> ID：13735817
> 
> 赞同：0
> 
> 时间：2012-12-06T02:03:57.217
> 
> 标签：jquery-mobile

我有一个 JQM 页面，其中包含一些关于 html 元素的事件，这些事件将更改页面的 DOM。例如，单击一个按钮将`paragraph`在页面上添加一个。该页面还有一个链接，该链接将通过 ajax 加载另一个页面。新页面有返回按钮，但问题是当返回按钮被触发时，它会以原始内容转到上一页。我想要的是保留页面修改后的 DOM。我怎样才能用 JQM 做到这一点？

谢谢。

# android - 将背景颜色更改为 tabhost

> ID：13735818
> 
> 赞同：0
> 
> 时间：2012-12-06T02:04:00.043
> 
> 标签：android, background, tabs, android-tabhost, tabwidget

我想更改下图中显示的 tabwidget 的背景：

![在此处输入图像描述](../Images/626bd0bab7b09d954401fdad1807cd94.png)

我想使用不同的背景颜色，并将字体颜色更改为选定的选项卡。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T02:05:59.023

你可以用谷歌搜索不同颜色的表格 这是一个带有颜色的图表或表格，以及获得该颜色的代码

只要选择你喜欢的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:17:28.373

为此，我将可绘制对象用于选项卡小部件，而不是固定图像。我的代码是

```
tab1.setImageDrawable(getResources().getDrawable(R.drawable.tab_drawable)); 
```

tab_drawable 中是一个简单的选择器，用于定义不同状态的可绘制对象的行为。你可以试试，它非常有用。

# filemaker - 第一个表中的 GTRR 或替代表中的 GTRR

> ID：13735837
> 
> 赞同：0
> 
> 时间：2012-12-06T02:06:36.827
> 
> 标签：filemaker

我有两张桌子，一张用于当前的机器，一张用于已完成的机器。我有一个带有按钮的页面，该按钮指向相关记录并指向机器表，如果我将该记录移动到 achive 表中，则该按钮不再起作用。

我可以创建一个脚本，该脚本基本上尝试转到机器表中的相关 roecord，而存档表中没有任何相关记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:22:52.063

有几种方法可以做你想做的事，包括在你去之前检查相关记录：

```
If Count(current machines::index) > 0
  Go to Related Record (from current machines)
Else If Count(archived machines::index) > 0
  Go to Related Record (from archived machines)
Else
  Error Message
End If 
```

或者只是去一个相关的记录，看看是否找到任何东西：

```
Set Error Capture On  // don't show an error message to the user
Go to Related Record (from current machines)
If Get(FoundCount) = 0
  Go to Related Record (from archived machines)
End If
Set Error Capture Off 
```

# iphone - 拍摄当前 Photoshop 文件的快照

> ID：13735838
> 
> 赞同：0
> 
> 时间：2012-12-06T02:06:38.917
> 
> 标签：iphone, objective-c, c, macos

我正在制作一个 Mac OSX 程序，我需要在 Photoshop 中为当前活动窗口拍摄快照（图像文件）。

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T21:33:06.123

我最终在 Xcode 中使用 Applescript 来查找 photoshop 并保存当前文件的副本。不是最好的解决方案，但它有效。

# c# - 修改内存中已有的 BitmapImage

> ID：13735839
> 
> 赞同：1
> 
> 时间：2012-12-06T02:06:44.157
> 
> 标签：c#, .net, windows-8, windows-runtime, winrt-xaml

我的 WinRT XAML 页面从这样的文件资产加载图像：

```
Image img = new Image();  // Windows.UI.Xaml.Controls.Image
BitmapImage bmp = new BitmapImage(new Uri(Page.BaseUri, "Assets/myImage.png"));
img.Source = bmp; 
```

到现在为止还挺好。现在，稍后，我想做一些转换，例如调整大小和裁剪。

看起来这可以使用[BitmapEncoder](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.graphics.imaging.bitmapencoder.aspx)和[BitmapTransform](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.graphics.imaging.bitmapencoder.bitmaptransform.aspx)[完成](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj709937.aspx)，但需要读取和写入磁盘 - 特别是，将修改后的图像写入新文件。

由于我的应用程序可能会进行许多转换，因此我更愿意在没有任何磁盘 I/O 的情况下在内存中执行此操作，但不知道如何操作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:25:38.807

看看`WriteableBitmap`类，这允许在内存中进行修改。

```
WriteableBitmap bmi2 = new WriteableBitmap(bitmapSource); 
```

更多信息可以在这里找到：http: [//msdn.microsoft.com/en-us/library/windows/apps/BR243259](http://msdn.microsoft.com/en-us/library/windows/apps/BR243259)

# java - Java toString 错误

> ID：13735841
> 
> 赞同：0
> 
> 时间：2012-12-06T02:06:45.277
> 
> 标签：java, class, methods, tostring, multidimensional-array

我正在尝试为这个程序编写一个类，这个类创建一个对象移动的板。板应该看起来像一个盒子，四个角上有“+”，“-”垂直，“|” 以空中心水平移动：

```
+-----+
|     |
|     |
|     |
|     |
+-----+ 
```

另一方面，我的括号在边缘水平排列，中间用逗号填充，我不知道为什么：

```
[ , , , , ] 
[ , , , , ]
[ , , , , ] 
[ , , , , ] 
[ , , , , ] 
```

我的程序是正确的，但我的课程需要帮助。

```
import java.util.Arrays;
import java.util.Random;

public class Board {

    private char [][] theBoard;

    public Board() { 
        this(10, 25); 
    }

    public Board (int rows, int cols) {
        if (rows < 1 || rows>80) {
            rows = 1;
        }
        if (cols<1 || cols > 80) {
            cols = 1;
        }
        theBoard = new char [rows][cols];
        for (int row = 0; row < theBoard.length; row++) {
            for (int col = 0; col < theBoard[row].length; col++)
                theBoard[row][col] = ' ';
    }
    }

        public void clearBoard() {
        for (int row = 0; row < theBoard.length; row++ ) {
        for (int col = 0; col < theBoard[row].length; col++) {
      if (theBoard[row][col] < '0' || theBoard[row][col] > '9') {
      theBoard[row][col] = ' ';   
    }
    }
    }
    }

            public void setRowColumn(int row, int col, char character) {
           theBoard[row][col] = character;
        }

            public char getRowColumn(int row, int col) {
            return theBoard[row][col];
        }

        public String toString() {
    StringBuilder strb = new StringBuilder();
    for (char[] chars : theBoard) {
        strb.append(Arrays.toString(chars) + "\n");
    }
    return strb.toString();
    }
    public static void main(String [] args)
   {
      Board aBoard, anotherBoard;

      System.out.println("Testing default Constructor\n");
      System.out.println("10 x 25 empty board:");

      aBoard = new Board();
      System.out.println(aBoard.toString());

      System.out.println();

      // And, do it again
      System.out.println("Testing default Constructor again\n");
      System.out.println("10 x 25 empty board:");

      anotherBoard = new Board();
      System.out.println(anotherBoard.toString());

   } // end of method main
} // end of class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:14:25.673

默认构造函数用空格填充数组：`' '`.

当您调用该`Arrays.toString()`方法时，它会打印一个左括号，然后是数组的内容（以逗号分隔），然后是一个右括号。

例如，如果您有一个数组：

```
i  a[i]
0   1
1   2
3   5
4   8 
```

调用`Arrays.toString(a)`打印出来：

```
[1, 2, 5, 8] 
```

再举一个例子，如果你有一个充满空格的数组，你会得到：

```
[ ,  ,  ,  ,  , ] 
```

（看到空格了吗？）

这就是您收到该输出的原因。

# php - 用 PHP 设计一个基本的 Restful API

> ID：13735842
> 
> 赞同：0
> 
> 时间：2012-12-06T02:06:54.083
> 
> 标签：php, rest, restful-architecture

这是一项家庭作业。它涉及创建一个简单的数据库并对服务器进行 CURL 调用以从数据库中获取结果，因此我有一个包含所需方法的 DBClass 文件。我了解一般的 REST 架构，但我有点无法将各个部分组合在一起。这是我到目前为止所拥有的：

1.  `Model.class.php`-> 这是数据库类，它实例化与数据库的连接，并具有执行数据库查询并返回结果的方法。
2.  `Simulator.php`-> 助手类，模拟对本地主机的 HTTP 请求（仅限 POST 或 GET），因此我的 curl 调用是对“http://localhost/app/index.php”进行的
3.  `index.php`-> 这里是我接收 CURL 请求的地方，实际上，我解码 HTTP 请求以了解请求方法、参数、URI 等。

在这一点上，我迷路了。可以理解的是，RESTful API 请求本质上属于 server/getMeMyBananas 类型，而 getMeMyBananas 是一种为用户查找香蕉并返回 ID 的 DB 方法。我很困惑这如何映射到 index.php 文件和丢失的部分。

非常欢迎提供很棒的资源的建议和链接。我对安全性或创建最先进的 Web 服务不感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T02:15:39.710

getMeMyBananas 是 RPC 路由的一个示例

在 REST 中，四个主要的 HTTP 动词 GET、POST、PUT 和 DELETE 是作用于名词（资源）的动词。

REST 不是标准。这是一个关于如何使用 HTTP 作为其基础为远程系统形成 API 的松散建议。

没有什么可以说你不能在 REST API 中设计类似 RPC 的路由。人们无时无刻不在这样做。只是你主要使用动词来创建（POST）、检索（GET）、更新（PUT）或删除（DELETE）。这就是缩写词 CRUD。因此，使用 REST，您只需坚持 CRUD 即可涵盖信息交换中的许多场景。

因此，您可以首先将您的 URL（路由）设计为类似于名词（资源），然后在 PHP 中构建一个 switch case 来打开 HTTP 动词。请记住，没有什么可以停止，拥有类似 RPC 的路由也没有错。事实上，您无法使用简单的 REST CRUD 场景处理所有案例，因此您必须使用类似 RPC 的路由处理不适合该场景的案例。

看：

[http://dojotoolkit.org/reference-guide/1.8/quickstart/rest.html](http://dojotoolkit.org/reference-guide/1.8/quickstart/rest.html)

后来，如果您对 PHP 中的内置 API 感兴趣，我构建了一个 API 基础架构并将其开源。我不确定它是否会帮助你，但这里是：

[https://github.com/homer6/blank_altumo](https://github.com/homer6/blank_altumo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T02:18:28.870

You can map any url to any path you want!
For example, when using Apache you can use [ModRewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html) to turn `http://ex.com/rest/bananas` into `http://ex.com/index.php?p1=rest&p2=bananas`

From there you can now you can fetch your request parameters with the global variable get for example: `$_GET["p1"]`. I would suggest you to perform [isset()](http://php.net/manual/en/function.isset.php) test on those.

After that when you've got the data, I'd suggest to package it in JSON so almost any client can read it.

That's basically how I'd do it! If you've got more questions go ahead :)

# google-chrome - 可以使用“Google Chrome”批量制作“Gif Viewer”吗？如何使用其他程序打开文件的“文件搜索器”？

> ID：13735847
> 
> 赞同：0
> 
> 时间：2012-12-06T02:07:05.780
> 
> 标签：google-chrome, batch-file, gif

*对不起我的英语不好！我是葡萄牙语！*

**我想知道是否可以使用批处理制作带有“Google Chrome”的“Gif Viewer”。**我想做的是“谷歌浏览器”通过“简单点击”打开gif，因为我在图形设计课程，在我们学校，电脑有管理员权限，所以我们不能更改 gifs 默认设置，由“谷歌浏览器”打开。我们想通过“Chrome”打开 gif，因为它是快速的动画 gif 显示器，并且可以预览我们在 html 中做的网站。另一个原因是因为我喜欢了解有关批处理的更多信息...

**我的问题是：如何创建一个“文件搜索器”来查找 GIF1、2 或 3，并使用 google chrome 打开它（我需要这样做以避免更改 gif 和“google chrome”的目录，无论何时我更改文件夹，或将程序复制给我的同学）...**

*这是我的完整批次*（有点*动态*）：

```
ECHO OFF
CLS
TITLE ***Gif Viewer\**Hubert Kenobi**/GoogleChromePortable***
:S
color 12
color 0B
color 12
color 23
color 45
color 62
color 89
color 91
color 37
color 12
color 43
color 51
color 15
color 42
color 2
color 3
color 0A
:MENU
ECHO .
ECHO  \   
ECHO   HK 
ECHO     .......................................................
ECHO   ...                                                     ...
ECHO  ..                                                         ..
ECHO .     *--Gifs Viewer \By Hubert Kenobi/ Google Chrome--*      .    ===
ECHO  ..                                                         ..
ECHO   ...                                                     ......
ECHO     .......................................................    ...
ECHO    ..                   Y or y - Confirm                  ..     ..           
ECHO   .                   N or n - Reject/Next                  .      .  ===   ===
ECHO    ..                    E or e - Exit                    ..     ..            
ECHO     .......................................................    ...
ECHO   ...                                                     ......
ECHO  ..  To open a gif, put the gif in the folder where is the  ..
ECHO .     "Gif Viewer" with the name of Gif1, or Gif2 Gif3...     .    ===
ECHO  ..   PRESS "Y" or "N" to select your task or "E" to EXIT   ..
ECHO   ...                                                     ...
ECHO     .......................................................
ECHO   HK                                                           Hubert Kenobi
ECHO  /                                                            My spaceship!!!
ECHO .     
ECHO Do you want to see/watch gif1 ?
ECHO.

SET /P M=Type Y, N, or E, then press ENTER: 
IF %M%==Y GOTO Y
IF %M%==N GOTO N
IF %M%==E GOTO EOF
IF %M%==y GOTO Y
IF %M%==n GOTO N
IF %M%==e GOTO EOF
:Y
## I want to make a searcher that run the gif and open it with chrome!! HELP ME!!! ##
ECHO This will take few seconds...
start GoogleChromePortable.exe "L:\Informatic\GoogleChromePortable-GifViewer\Gif1.gif"
GOTO S
:N 
ECHO Do you want to see/watch gif2 ?
ECHO.

SET /P M=Type Y, N, or E, then press ENTER: 
IF %M%==Y GOTO Y2
IF %M%==N GOTO N2
IF %M%==E GOTO EOF
IF %M%==y GOTO Y2
IF %M%==n GOTO N2
IF %M%==e GOTO EOF

:Y2

## I tried this way, but it didn't work and exit automatically! ##

pushd L:\Site HTML onlive-ac
FOR /F "delims=" %F IN ('dir /S /b Gif1.gif) DO SET ExePath="%F"
%ExePath%
Goto S

:N2
ECHO Do you want to see/watch gif3 ?
ECHO.

SET /P M=Type Y, N, or E, then press ENTER: 
IF %M%==Y GOTO Y3
IF %M%==N GOTO N3
IF %M%==E GOTO EOF
IF %M%==y GOTO Y3
IF %M%==n GOTO N3
IF %M%==e GOTO EOF

:Y3
## I tried this way, but it didn't work! This opens the Gifs independently ##
## with the default program (Quick Time Player "slow program") and then ##
## opens the Chrome in the Home page. ##
SETLOCAL 

FOR /L %%a IN (2,1,3) DO (
    FOR /F "tokens=2 delims==" %%b IN ('WMIC LogicalDisk Where "DriveType=%%a" Get DeviceID /Format:List') DO (
        FOR /F "tokens=*" %%c IN ('DIR %%b\GoogleChromePortable.exe "Gif3.gif" /b /s') DO (
            CALL "%%c"
        )
    )
)

EXIT /B
N3:
GOTO MENU 
```

*这是我的摘要批次：*

**1.我想做一个运行gif的搜索器，用chrome打开！！！！！！这有效，但不是我想要它做的功能！帮助我！**

```
:Y
ECHO This will take few seconds...
start GoogleChromePortable.exe "L:\Informatic\GoogleChromePortable-GifViewer\Gif1.gif"
GOTO S 
```

**2.这个方法我试过了，不行，自动退出！**

```
:Y2
pushd L:\Site HTML onlive-ac
FOR /F "delims=" %F IN ('dir /S /b Gif1.gif) DO SET ExePath="%F"
%ExePath%
Goto S 
```

**3.这个方法我试过了，不行！这将使用默认程序（Quick Time Player“慢程序”）独立打开 Gif，然后在主页中打开 Chrome。**

```
SETLOCAL 
    :Y3 
    FOR /L %%a IN (2,1,3) DO (
        FOR /F "tokens=2 delims==" %%b IN ('WMIC LogicalDisk Where "DriveType=%%a" Get DeviceID /Format:List') DO (
            FOR /F "tokens=*" %%c IN ('DIR %%b\GoogleChromePortable.exe "Gif3.gif" /b /s') DO (
                CALL "%%c"
            )
        )
    )

    EXIT /B 
```

请帮我！！！ **我做了一个 PrintScreen 来查看目录：** [http ://s5.postimage.org/h2emaxvfb/Background_Directoryies.png](http://s5.postimage.org/h2emaxvfb/Background_Directoryies.png)

**一种可能的解决方案**是创建第二个批处理程序来更改目录（复制或移动），从而修改第一个批处理。是否可以？修改其他批次的批次？*感谢帮助！*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:15:05.377

我写了一个你可以使用的文件选择器。或者您可以只查看各个部分，例如我如何启动 chrome 来显示文件。或者我如何搜索子目录中的所有图像，或者其他什么。我想展示如何在不强制用户重命名他们的 .gif 文件的情况下做到这一点。

您需要在脚本顶部配置这些变量：

```
REM The location of the viewer to launch.
set VIEWER=C:\Program Files (x86)\Google\Chrome\Application\chrome.exe

REM The root directory to look for files.  %~dp0 means the same directory as
REM this script, including a trailing \.
set FILES=%~dp0

REM The type of files to show.
set FILE_FILTER=^*.gif ^*.jpg ^*.png

REM When '/s', then include subdirectories below %FILES% in the search.  Leave
REM blank to restrict the search to %FILES% only.
set RECURSE=/s 
```

当你启动选择器时，你会得到一个如下所示的菜单：

```
 images\buffalo.gif
  images\bull7.gif
> images\cow13.gif
  images\cow14.gif
  more images\dino 10.gif
  more images\dino19.gif
Up[W]  Down[S]  Select[E]  Quit[Q] 
```

现在，*cow13.gif*被选中。按**W**或**S**分别向上或向下更改选择。按**E**启动 chrome 以显示所选文件。 **Q**退出。

这是完整的事情。它使用`choice`，它并不总是随 Windows 一起安装。它在我的 Windows 7 盒子上，所以我使用了它。

```
@echo off

REM The location of the viewer to launch.
set VIEWER=C:\Program Files (x86)\Google\Chrome\Application\chrome.exe

REM The root directory to look for files.  %~dp0 means the same directory as
REM this script, including a trailing \.
set FILES=%~dp0

REM The type of files to show.
set FILE_FILTER=^*.gif ^*.jpg ^*.png

REM When '/s', then include subdirectories below %FILES% in the search.  Leave
REM blank to restrict the search to %FILES% only.
set RECURSE=/s

REM ----------------------------
setlocal EnableDelayedExpansion

cls
call :show_splash_screen
call :pause_sec 2

set SELECTED_INDEX=0
set SELECTED=

:show_files
if %SELECTED_INDEX% LSS 0 ( set SELECTED_INDEX=0)

cls
call :ui_show_files "%FILES%" "%FILE_FILTER%" "%SELECTED_INDEX%"

choice /c QWSE /n /m " Up[W]  Down[S]  Select[E]  Quit[Q]"
if ERRORLEVEL 4 (
        REM User selected an option, so launch the viewer with the selected file
 as
        REM an argument.
        call "%VIEWER%" "%SELECTED%"
        goto :show_files
)
if ERRORLEVEL 3 ( set /a SELECTED_INDEX=!SELECTED_INDEX!+1 && goto :show_files )

if ERRORLEVEL 2 ( set /a SELECTED_INDEX=!SELECTED_INDEX!-1 && goto :show_files )

goto :eof

REM ui_show_files
REM Displays all the files in the directory given by %1, filtered by %2\.  %3
REM indicates which file the user has selected.
REM
REM Returns %SELECTED%, which contains the filename of the selected file.
:ui_show_files
set COUNT=0
pushd "%~1"
for /f "tokens=*" %%a in ('dir %RECURSE% /b %~2') do (
        set DISPLAY_NAME=
        if "!COUNT!"=="%~3" (
                REM This next line has a trailing space.  The space is important
.
                set DISPLAY_NAME=^>
                set SELECTED=%%a
        ) else (
                REM This next line has trailing spaces.  The spaces are importan
t.
                set DISPLAY_NAME=
        )
        set DISPLAY_NAME=!DISPLAY_NAME!%%a
        set DISPLAY_NAME=!DISPLAY_NAME:%~1=!
        echo !DISPLAY_NAME!
        set /a COUNT=!COUNT!+1
)
popd
goto :eof

REM show_splash_screen
REM Displays the splash screen on the console.
:show_splash_screen
echo.
echo. File chooser brought to you by ^>indiv^<
echo.
for %%a in (1 2 3 4 5 6 7 8 9 a b c d e f) do ( color 0%%a )
color
goto :eof

REM pause_sec
REM Pause for the number of seconds given by ~1.
:pause_sec
set SECS=%1
if "%SECS%"=="" ( set SECS=1)
ping 127.0.0.1 -n %SECS% >NUL
goto :eof 
```

# c# - 选项卡中的多个轮播

> ID：13735851
> 
> 赞同：0
> 
> 时间：2012-12-06T02:07:44.060
> 
> 标签：c#, jquery, asp.net, html, razor

我有一堆选项卡，每个选项卡都应该包含一个轮播（例如 Tab1 到 Carousel1，Tab2 到 Carousel2 等）但是只有第一个选项卡的轮播呈现。我已经尝试了从生成唯一 ID 到使用类选择器的所有方法，但仍然无法让它按需要工作。谢谢

**带有剃刀钩的 HTML**

```
<div class="tabbable">
    <ul id="myTab" class="nav nav-tabs">
        @{int incs=0;}
        @foreach(var row in db.Query(queryCategory))
        {
            <li><a href="#@row.Category_ID" data-toggle="tab">@row.Category_Name</a></li>
        }
    </ul>
    <div class="tab-content">

    @{bool first = true;}

    @foreach(var row in db.Query(queryCategory))
    {
        var ids= @row.Category_ID;
        <div class="@{if (first){<text>tab-pane active</text> first = false;}else{<text>tab-pane</text>}}" id=@ids>
            <p>I'm in @row.Category_Name.</p>

            <ul id="@("customselect"+@incs++)" class="elastislide-list carousel">
                @foreach(var row1 in db.Query("SELECT * FROM Food WHERE Category_ID = @0", ids))
                {
                    <li><a href="@row1.Food_ID" class="link">
                        <div class="image-box"><img src="img/food.jpg"></div> 
                        <span>@row1.Food_Name</span>
                        </a>
                    </li>
                } 
            </ul>              
        </div>
        }
</div><!--tabbable--> 
```

**jQuery**

```
$('.carousel').each(function(index) {
    $(this).elastislide();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T02:19:53.303

更改选项卡时尝试调用 .elastislide() 。

```
$('#myTab a').click(function (e) {
    e.preventDefault();
    $(this).tab('show');
    $("div.tab-content").find('ul.carousel').elastislide();
}); 
```

# fortran - mpi 改变了它不应该改变的变量

> ID：13735852
> 
> 赞同：1
> 
> 时间：2012-12-06T02:07:55.077
> 
> 标签：fortran, mpi, fortran90

我有一些 Fortran 代码，我正在与 MPI 并行化，它正在做真正奇怪的事情。首先，有一个变量 nstartg 我从老板进程广播给所有工人：

```
call mpi_bcast(nstartg,1,mpi_integer,0,mpi_comm_world,ierr) 
```

该变量`nstartg`在程序中不再更改。稍后，我让老板进程将`eproc`数组的元素发送`edge`给工人：

```
if (me==0) then
    do n=1,ntasks-1
        (determine the starting point estart and the number eproc
         of values to send)
        call mpi_send(edge(estart),eproc,mpi_integer,n,n,mpi_comm_world,ierr)
    enddo
endif 
```

`me`如果非零，则带有匹配的接收语句。（为了便于阅读，我省略了一些其他代码；我不使用 scatterv 是有充分理由的。）

这就是事情变得奇怪的地方：变量`nstartg`被更改为`n`而不是保持其实际值。例如，在进程 1 上，在 mpi_recv 之后`nstartg = 1`，在进程 2 上它等于 2，依此类推。此外，如果我将上面的代码更改为

```
call mpi_send(edge(estart),eproc,mpi_integer,n,n+1234567,mpi_comm_world,ierr) 
```

并在对 mpi_recv 的匹配调用中相应地更改标签，然后在进程 1 上，nstartg = 1234568; 在进程 2 上，nstartg = 1234569 等。

到底是怎么回事？我改变的只是 mpi_send/recv 用来识别消息的标签；如果标签是唯一的，这样消息就不会混淆，这不应该改变任何东西，但它正在改变一个完全不相关的变量。

在boss进程中，`nstartg`没有改变，所以我可以通过再次广播来解决这个问题，但这并不是一个真正的解决方案。最后，我应该提一下，使用电子围栏编译和运行这段代码并没有发现任何缓冲区溢出，-fbounds-check 也没有向我抛出任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T08:17:57.953

最可能的原因是您将`INTEGER`标量作为实际`status`参数传递给`MPI_RECV`何时应该将其真正声明为具有特定于实现的大小的数组，可作为`MPI_STATUS_SIZE`常量使用：

```
INTEGER, DIMENSION(MPI_STATUS_SIZE) :: status 
```

或者

```
INTEGER status(MPI_STATUS_SIZE) 
```

消息标签由接收操作写入状态字段之一（其特定于实现的索引可作为`MPI_TAG`常量使用，字段值可以作为 访问`status(MPI_TAG)`），如果您`status`只是一个标量`INTEGER`，那么其他几个局部变量会得到覆盖。在您的情况下，它只是发生在堆栈的`nstartg`上方`status`。

如果您不关心接收状态，则可以`MPI_STATUS_IGNORE`改为传递特殊常量。

# php - 将此 MySQLi 查询编写为准备好的语句

> ID：13735854
> 
> 赞同：3
> 
> 时间：2012-12-06T02:07:57.963
> 
> 标签：php, mysqli, prepared-statement

我有一个现有的 MySQLi 查询：

```
$conn = dbConnect('query');
$galNumb = "SELECT COUNT(pj_gallery_id) FROM pj_galleries WHERE project = {$project}";
$gNumb = $conn->query($galNumb);
$row = $gNumb->fetch_row();
$galTotal = $row[0]; 
```

这将计算每个项目与 $project 中包含的查询字符串中的值匹配的画廊数量。

它工作完美，但与准备好的语句相比并不安全。我已经研究了两天，无法学习如何将此语句写为准备好的语句。任何和所有的帮助都将不胜感激。

**更新：** 我在这里坐以待毙。我只需要展示如何将上述代码编写为准备好的语句。这种事情并没有像学习 PHP 那样在我的大脑中产生共鸣，我只是没有得到任何这些。PHP 手册令人困惑，似乎是为已经了解 PHP 的人编写的。

简而言之，我需要上述代码的准备好的语句版本，以便我可以在页面上回显结果。目前，在我的数据库中，数字应该是 3，并且它始终返回 1。

我希望我知道更多，以便更好地表达我的问题，但唉，我还在学习。我很抱歉。

**更新 2：** 根据建议和研究，我编写了这个查询，但它总是返回值 1，无论数据库中实际有什么：

```
$galNumb = "SELECT COUNT(pj_gallery_id) FROM pj_galleries WHERE project_part = ?";
$stmt = $conn->prepare($galNumb);
$stmt->bind_param('i', $project);
$gNumb = $stmt->execute(); 
```

同样，我要做的就是计算每个项目中有多少画廊。我知道这应该很简单，但它不适合我。数据库中目前有 1 个项目和 3 个画廊。查询应返回 3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T02:12:09.847

这很简单。这将准备一个 sql 语句，执行它并获取第一行。

```
<?php

// create the prepared statement
$stmt = $conn->prepare('SELECT COUNT(pj_gallery_id) FROM pj_galleries WHERE project = ?');

// bind a variable to the statment
// the character denotes the type of the variable
// 's' for string
// 'i' for integer
$stmt->bind_param('i', $project);

// execute the query
$stmt->execute();

// get the result variable
$result = $stmt->get_result();

// fetch the row
$row = $result->fetch_row();

if ($row) {
    echo "The count is " . $row[0]; 
}

?> 
```

文档非常简单。您在底部有一个代码示例。

[http://php.net/manual/en/mysqli.prepare.php](http://php.net/manual/en/mysqli.prepare.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T02:12:46.860

```
$stmt = $dbConnection->prepare('SELECT COUNT(pj_gallery_id) FROM pj_galleries WHERE project = ?');
$stmt->bind_param('s', $project);

$stmt->execute(); 
```

# c# - 寻找课程指导

> ID：13735857
> 
> 赞同：2
> 
> 时间：2012-12-06T02:08:33.180
> 
> 标签：c#, class, methods

我目前正在从事一个项目，我被要求为一家小型企业（在本例中为小型电影院）制作一个程序，我可以在其中记录和打印各种产品和客户的收据。

到目前为止，我所拥有的是一系列记录客户想要订购什么的代码。

我该如何创建另一个类来存储和计算价格并将收据的外观打印到控制台？

我不是要答案，只是一些指导。

```
namespace RecieptApp
{
    class Reciept
    {
        public void Main()
        {
            double DoubleDiscount;
            int IntFoodOrdered;
            int IntDrinkOrdered;
            double DoubleFoodSize;
            double DoubleDrinkSize;
            int ACustomer;
            int BCustomer;
            string CustomerDescription;
            string FoodDescription;
            string DrinkDescription;

            Console.Write("How many adults: ");
            ACustomer = Console.Read();
            Console.Write("How many kids: ");
            BCustomer = Console.Read();

            while (true)
            {
                Console.Write("Are you a government employee, current or retired military, or classified disabled? (Please answer yes or no) :");
                string input1 = Console.ReadLine();
                if (input1 == "yes")
                {
                    DoubleDiscount = .15;
                    CustomerDescription = "Special Discount";
                }
                else
                {
                    break;
                }
            }

            while (true)
            {
                Console.WriteLine("Would you like to order some popcorn?");
                string FoodInput1 = Console.ReadLine();
                if (FoodInput1 == "yes")
                {
                    Console.WriteLine("How many would you like?");
                    int.TryParse(Console.ReadLine(), out IntFoodOrdered);
                    while (true)
                    {
                        Console.WriteLine("And would you like that in small or large?");
                        string FoodInput2 = Console.ReadLine();
                        if (FoodInput2 == "small")
                        {
                            DoubleFoodSize = 3.75;
                            FoodDescription = "S";
                        }
                        else
                        {
                            DoubleFoodSize = 6.75;
                            FoodDescription = "L";
                        }
                    }
                }
                else
                {
                    break;
                }
            }

            while (true)
            {
                Console.WriteLine("Would you like to order a drink?");
                string DrinkInput1 = Console.ReadLine();
                if (DrinkInput1 == "yes")
                {
                    Console.WriteLine("How many would you like?");
                    int.TryParse(Console.ReadLine(), out IntDrinkOrdered);
                    while (true)
                    {
                        Console.WriteLine("And Would you like that in small or large?");
                        string DrinkInput2 = Console.ReadLine();
                        if (DrinkInput2 == "small")
                        {
                            DoubleDrinkSize = 2.75;
                            DrinkDescription = "S";
                        }
                        else
                        {
                            DoubleDrinkSize = 5.75;
                            DrinkDescription = "L";
                        }
                    }

                }
            }
            //This is where the other class would go in
            //I just dont know how to go about it so that it would minimized the amount of code I have //to write

            RecieptList Items = new RecieptList();

            Items.AddProduct(ACustomer);
            Items.AddProduct(BCustomer);
            Items.AddProduct(CustomerDescription);
            Items.AddProduct(FoodDescription);
            Items.AddProduct(DrinkDescription);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T02:44:35.893

如果您想要创建一个类，您可能想要创建一个代表通用产品的类，然后有一个方法从该产品中获取详细信息行

因为我无事可做，所以我让你成为 SSCCE。它过于简化了，但它满足了您对非常具体的情况的要求，并且它使用了一个对象。

我相信您足够聪明，可以使用一些概念来满足您的特定需求。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication2
{

    public class Product
    {
        public string description;
        public double price;
        //normally you want to use eitehr an int for price(representing cents) or a decimal type, instead of double
        //just using a double here for the sack of simplicity
        // you'll also want to use properties instead of variable fields, but i'm using variable fields for simplicity

        // constructor
        public Product(string description, double price)
        {
            this.description = description;
            this.price = price;
        }

        public string GetDetailLine()
        {
            // google "String.Format" for more information,
            // basically it replaces things in the {0} and {1}, with the other parameters
            // the ":c" in {1:c} part means format as currency
            return String.Format("You ordered {0}.  It costs: {1:c}", description, price);
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            List<Product> products = new List<Product>();

            Console.Write("Do You Want a Soda?   ");
            string input = Console.ReadLine();
            //the .ToUpper() part makes it upper case
            if (input.ToUpper() == "YES")
            {
                Product soda = new Product("soda", 2.50);
                products.Add(soda);
            }

            double total = 0; 
            for(int i = 0; i<products.Count; i++)
            {
                Console.WriteLine(products[i].GetDetailLine());
                total += products[i].price;
            }

            //you can also use Console.Writeline like String.Format
            Console.WriteLine("Your Total is:  {0:c}", total);

            // this is just to pause in-case you're debugging from visual studio
            Console.ReadLine();
        }
    }
} 
```

# python - 缩进块错误

> ID：13735858
> 
> 赞同：-4
> 
> 时间：2012-12-06T02:08:35.893
> 
> 标签：python

```
for line in range(50):
    def show_table():   

        if len(table) == 0: 
            print('There are no cards on the table.')   
        else:
            for card in range(len(table)):
                print names[table[card][0]] + ' played a ' + str(table[card][1]) + '.' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T02:09:00.200

第一个问题是冒号出现在 if 条件的末尾，而不是单词之后`if`。所以：

```
if len(table) == 0: print('There are no cards on the table.') 
```

或更好：

```
if len(table) == 0:
    print('There are no cards on the table.') 
```

但是，使用 Python 2.7 和 3.3 对此进行测试，我认为您实际上应该得到一个 SyntaxError，小插入符号指向多余的冒号，而不是关于缩进的错误。

这意味着实际的错误是它上面的行也有问题。

下一个问题是您只能使用带一个冒号而不是两个冒号的单行快捷方式，因此：

```
else: for card in range(len(table)): print names[table[card][0]] + ' played a ' + str(table[card][1]) + '.' ? 
```

只会混淆编译器。你真的应该把它分解成惯用的 Python，而不是试图看看你能摆脱什么：

```
for line in range(50):

    def show_table():
        if len(table) == 0:
            print('There are no cards on the table.')
        else:
            for card in range(len(table)):
                print names[table[card][0]] + ' played a ' + str(table[card][1]) + '.' ? 
```

我不确定为什么要为 50 行中的每一行定义一个新函数，然后永远不要调用该函数，但这至少是合法的……几乎。

最后一个问题是这样的：

```
print names[table[card][0]] + ' played a ' + str(table[card][1]) + '.' ? 
```

首先，`print`不是 Python 3.3 中的语句，它是一个常规的旧函数，因此您必须使用参数调用它。其次，`?`最后似乎没有附加到它可以合理附加的任何东西上，所以它可能是一个需要修复的杂散错字。所以：

```
print(names[table[card][0]] + ' played a ' + str(table[card][1]) + '.') 
```

查看您粘贴到已编辑问题中的原始版本 - 这只是一个猜测，因为您没有将其粘贴为代码 - 看起来可能还有两个问题。

首先，您的第一`for`行缩进 1 列。当您稍后返回第 0 列时，这被计为两个凹痕，而不是一个。

其次，该`def show_table():`行缩进到第 8 列，但接下来是回到第 0 列。也许你想要一个空函数？如果是这样，那是不合法的；在 Python 中，函数永远不能为空。`pass`但是您可以使用以下语句获得相同的效果：

```
def show_table():
    pass 
```

# javascript - 数据类型“应用程序/json”与“json”

> ID：13735869
> 
> 赞同：6
> 
> 时间：2012-12-06T02:10:14.023
> 
> 标签：javascript, jquery, json

> **可能重复：**
> [$.ajax - dataType](https://stackoverflow.com/questions/2722750/ajax-datatype)

我正在使用 jQuery 1.8.2，由于某种原因`'application/json'`不起作用，但`'json'` 可以作为`dataType`标准`jquery` `ajax`调用使用。这是一个故障吗？版本相关的差异？或者两者之间是否存在既定差异？

```
$(document).ready(function() {
    $.ajax({
        type : "POST",
        url : '<c:url value="/url.htm" >',
        //dataType : "application/json", <-- does not work
        dataType: 'json' // <-- works
        success : function(data) {
            // do something          
        },
        error : function(data) {
            // do something else
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T02:12:57.427

`dataType`接受json，这意味着请求需要`json`响应。

`contentType`take `application/json`，表示请求正在发送`json`数据

您可以在请求中发送以及期望 json，例如

```
$.ajax({
    type : "POST",
    url : url,
    contentType : "application/json", 
    dataType: 'json',
    data: JSON.stringify({some: 'data'}),
    success : function(data) {
        // do something          
    },
    error : function(data) {
        // do something else
    }
}); 
```

在这里你发送 json 并期待 xml

```
$.ajax({
    type : "POST",
    url : url,
    contentType : "application/json", 
    dataType: 'xml',
    data: JSON.stringify({xmlfile: 'file.xml'}),
    success : function(data) {
        // do something          
    },
    error : function(data) {
        // do something else
    }
}); 
```

在这里你发送`x-www-form-urlencoded`（jQuery自动为你设置），并期待json回来

```
$.ajax({
    type : "POST",
    url : url,
    dataType: 'json',
    data: {id: '1'},
    success : function(data) {
        // do something          
    },
    error : function(data) {
        // do something else
    }
}); 
```

contentType 设置`ContentType`HTTP 请求头，告诉服务器这个请求的主体是给定的类型。
dataType 设置`Accept`标头告诉服务器这是我们想要的响应类型，例如

```
Accept:application/json, text/javascript, */*; q=0.01 
```

但无论服务器发送什么类型的响应，jQuery 仍然会尝试将其解析为您在 dataType 字段中设置的任何类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T02:13:21.837

“application/json”是 json 的正确 mime 类型。但是， jquery`dataType`字段需要以下字符串之一：

```
"xml"
"html"
"script"
"json"
"jsonp" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T02:13:23.650

根据 json 文档，正确的数据类型是“json”。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

以下是支持的选项：

*   xml
*   html
*   脚本
*   json
*   jsonp
*   文本

# javascript - 同时定位无序列表和无序列表中的项

> ID：13735873
> 
> 赞同：0
> 
> 时间：2012-12-06T02:10:36.320
> 
> 标签：javascript, css, html-lists, positioning

[我在演示](http://www.olmasigereken.com/demo2/)中将 ul 元素和箭头放在一起时遇到问题。我不能在它们`<div id="ytplayer_div2"></div>`之间放置标签，`<ul>`因为带有 id 的元素`ytplayer_div2`来自[演示页面](http://www.olmasigereken.com/demo2/)源下方的 javascript 端。即使我被放了这些，我也想不出任何解决方案。
标签内的内容`<div id="ytplayer_div2"></div>`来自哪里：

```
 function ytplayer_render_playlist( )
  {
    for ( var i = 0; i < ytplayer_playlist.length; i++ )
    {
      var img = document.createElement( "img" );
      img.src = "track_arrow.gif";
      var a = document.createElement( "a" );
      a.href = "#ytplayer";
      a.onclick = (
        function( j )
        {
          return function( )
          {
            ytplayer_playitem = j;
            ytplayer_playlazy( 0 );
          };
        }
      )( i );
      a.appendChild( img );
      document.getElementById( "ytplayer_div2" ).appendChild( a );
    }
  } 
```

简而言之，我怎样才能把这个[演示](http://www.olmasigereken.com/demo2/)变成这张[照片](http://i.stack.imgur.com/3pBZA.jpg)中的样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T02:22:14.640

给出`<ul>`一个*id*，例如`<ul id="mylist">`，然后在你的函数开始时获取`<li>`它的所有直接子节点，

```
var arrOfListNodes = Array.prototype.filter.call(document.getElementById('mylist').childNodes, function (e) {return e.tagName === 'LI';}); 
```

并且在你的函数的末尾而不是附加到`ytplayer_div2`, 做

```
arrOfListNodes[i].insertBefore(a, arrOfListNodes[i].firstChild); 
```

由于您的样式（`float: left;`在`<li>`s 中的其他元素上），箭头将出现在右侧，但现在位于 DOM 树的正确部分。

# javascript - 是否使用 setTimeout(fn, 0) 将代码执行推迟到当前调用堆栈可靠之后？

> ID：13735875
> 
> 赞同：4
> 
> 时间：2012-12-06T02:10:49.997
> 
> 标签：javascript

我有一个被调用次数未知的函数。我需要知道函数运行了多少次，所以我在做：

```
(function () {    

    var i = 0,
        increment = function () {
            if (i === 0) {
                setTimeout(function () {
                    console.log('increment was called ' + i + ' times.'); // increment was called 3 times.
                    i = 0;
                }, 0);
            }
            i++;
        };

    increment();
    increment();
    increment();

})(); 
```

谁能告诉我这在所有浏览器中是否可靠，或者是否有更好的模式来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T02:22:47.203

`setTimeout()`在队列中放置一个函数，当所有其他函数都运行时执行。

如果您`setTimeout()`在调用 之前调用了几次`increment()`，您可能会注意到`i`变量的值大于 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:22:05.000

是的，即使在最低版本的 IE 中，这个代码片段似乎在所有浏览器中都是可靠的。我在 IE8 中试过这个，效果很好。

# asp.net - 在 VB/ASP.NET 站点中使用自定义常量

> ID：13735877
> 
> 赞同：1
> 
> 时间：2012-12-06T02:11:04.757
> 
> 标签：asp.net, vb.net, visual-studio

我正在向用 VB 编写的现有 ASP.NET 项目添加一个测试站点变体，我想让用户清楚他们在测试站点中具有不同的横幅和背景等。我创建了一个新测试配置和下编译 | 高级编译选项我添加了 TEST_MODE="1" 作为自定义常量。然后我尝试在 ASPX 文件中使用以下代码：

```
<%
#If TEST_MODE = "1" Then
    Response.WriteFile("header_test2.htm")
#Else
    Response.WriteFile("header.htm")
#End If
%> 
```

IDE 将第一个语句显示为灰色，并进行重建和部署，它仍然包括 header.htm。我想知道是否有人对它为什么不起作用有想法，或者可以建议一种替代方法来根据活动配置包含不同的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:23:46.617

这些条件编译常量保存到你的项目文件中，并没有部署到你的网站。

当网站运行时，ASP.NET 编译器不会找到该常量。

如果您希望它在部署的页面中工作，您需要使用 web.config 为网站设置编译器选项。

这是一篇很好的文章。希望它会帮助你。

[http://haacked.com/archive/2007/09/16/conditional-compilation-constants-and-asp.net.aspx](http://haacked.com/archive/2007/09/16/conditional-compilation-constants-and-asp.net.aspx)

# php - xajax 响应以空行开头

> ID：13735878
> 
> 赞同：1
> 
> 时间：2012-12-06T02:11:09.327
> 
> 标签：php, xajax

在我的系统上（运行 PHP 5.3.15、Apache 2.2.22）xajax 工作正常。在另一个运行 PHP 5.2.17、Apache 2.2.22 的系统上，xajax 响应前面有一个空行。这可以在 Firebug Network 选项卡 XHR->Response 中看到。前面确实有一个空行

```
<?xml version="1.0" encoding="utf-8" ?> 
```

到底是什么原因造成的，我该如何解决？

在 XML 文档开始之前有一个空行是错误并导致错误

```
Error: XML or text declaration not at start of entity 
```

在浏览器的错误控制台中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T02:49:52.530

查看所有在您预期的 XML 输出之前执行的 PHP 包含。`<?php`很可能其中一个或多个在打开之前或关闭之后有错误的换行符，该换行符`?>`在 XML 标头之前作为输出传递给浏览器。

```
 <-- Line break
<?php

?>
      <-- Line break 
```

如果您在类 UNIX 系统上，您可以使用`head`来检查每个文件的第一行或`tail`最后一行。查找不以开头或结尾的文件`<?php / ?>`

```
# In a directory of PHP files...
head -n1 *.php
tail -n1 *.php 
```

# mongodb - 使用 CS 驱动程序在 Mongodb 中浮动不准确的舍入

> ID：13735880
> 
> 赞同：1
> 
> 时间：2012-12-06T02:11:22.587
> 
> 标签：mongodb, mongodb-.net-driver

当我使用 csharp 驱动程序将浮点数保存到 MongoDB 时，它没有准确保存。如果我的号码是 1504.57，我希望数据库将具有相同的号码，但由于某种原因，它变为 1504.56994628906（在 MongoDB 中使用 Double 类型）。这是怎么回事？如何准确保存数据？

我的对象将所有字段保留为对象类型，并根据类型动态转换它们，例如：

```
 this.Values[i] = float.Parse(this.Values[i].ToString()); 
```

也许是这种奇怪行为的原因？但是在转换后 this.Values[i] 非常准确，并且仅在数据库中被破坏。谢谢

更新。封装数据的类： public class TransferredData { [BsonElement("_id")] [ScriptIgnore] public ObjectId Id { get; 放; }

```
 public class Data
    {
        public List<Object> Values { get; set; }
        public DateTypes DataType { get; set; }
        public void CastToType()
        {
            for (int i = 0; i < this.Values.Count; i++ )
            {
                if (this.DataType == DateTypes.Date)
                {
                    DateTime dt = DateTime.Parse(this.Values[i].ToString());
                    this.Values[i] = dt.ToUniversalTime().Date;
                }
                else if (this.DataType == DateTypes.Other)
                {
                    this.Values[i] = this.Values[i].ToString();
                }
                else if (this.DataType == DateTypes.Reading)
                {
                    this.Values[i] = float.Parse(this.Values[i].ToString());
                }
            }
        }
    } 
```

}

我使用 Object 类型，因为我不知道它可能是哪种实际类型。所以，就在做 upsert 之前，我用数据填充这个类，然后调用 Cast 方法。

```
Then I save it into db:
data = new TransferredData();
...
data.Values[1] = "1504.57"; // Because the input is always string
data.CastToType(); // Here data.Values[1] = 1504.57 - cool
TransferredDataCollection.Save<TransferredData>(data, SafeMode.True); 
```

在那一刻之后，查看数据库......它是 1504.56994628906

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:21:30.947

IEEE 754 浮点格式不能准确地表示每个数字。因此，您的问题无法避免并按预期工作。

**如果您需要绝对保证输入 = 输出，而您不能保证输入可以由使用的浮点格式准确表示，那么您永远**不应该使用浮点格式。

大多数人在尝试将货币值存储在浮点数中时都会遇到这些问题，这被普遍认为是一个非常糟糕的主意。如果您需要存储货币值，请将其保存为整数值，通常为美分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:59:36.997

我想这与 1504.57 作为双精度浮点 # 的表示有关。

也许有几个选项，一个是四舍五入多余的数字，另一个是存储美分而不是美元，如果数字是货币#。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T15:20:12.480

我会回应上述所有评论，即浮点数在从十进制转换为二进制并返回时通常会出现有趣的舍入错误。

在您的特定情况下，舍入错误是由 C# 语言本身引入的，而不是由 C# 驱动程序引入的。MongoDB 本身不支持单精度浮点数，因此 C# 驱动程序将 C# 浮点值转换为双精度值，然后再发送到数据库。正是在此转换过程中发生舍入错误。

这是一小段 C# 代码，演示了将浮点数转换为双精度数如何引入舍入错误：

```
var f = (float)1504.57;
var d = (double)f;

Console.WriteLine(f);
Console.WriteLine(d); 
```

正如其他人所建议的那样，如果您必须具有 100% 的精度，则应该使用浮点或双精度以外的其他数据类型。

# c - C - 使用 fgets 和 sscanf 从文件加载

> ID：13735886
> 
> 赞同：0
> 
> 时间：2012-12-06T02:12:15.240
> 
> 标签：c, input, struct, spaces, scanf

在我的程序的一个函数中，我试图将文件中的数据加载到这个结构数组中：

```
/* database struct */
typedef struct node {
    char       name[MAX];
    char       address[MAX];
    long int   number;
}record_type;

record_type record[100]; 
```

功能如下：

```
/* load database from disk */
void load_database() {
    char line[128];

    /* Set up database */
    database = fopen("database.txt", "r+w+a+");
    if(database == NULL) {
        printf("\n\tWARNING: No database found.");
        exit(1);
    }

    /* Get database file from disk */
    while(fgets(line, sizeof(line), database) != NULL) {
        sscanf(line, "%s %s %lu", record[rec_num].name,
            record[rec_num].address, &record[rec_num].number);

        /* keeps track of array size */
        rec_num++;
    }
} 
```

我遇到的问题是与 sscanf 不一致。如果我包含名字和姓氏，我不能在它们之间放置空格，或者它将名字放在 name[] 中，将姓氏放在 address[] 中。

这是我尝试输入的数据示例：

```
1\.  Name: james manes       Address: 220 test addr      Number: 5558889999 
```

我需要将“james manes”放入 name[] 字段，将 220 test addr 放入 address[] 字段，将 5558889999 放入结构的 number 字段。这可能吗？

有没有更有效的方法来管理这种类型的输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:03:25.367

`scanf("%s"...`解析输入中的空格分隔字符串，因此如果要解析的字符串中有空格，它将不起作用。

虽然您可以使用正则表达式来获得您想要的东西，但由于您使用固定字符串作为标记，您可以改为使用`strstr`拉出字符串：

```
while(fgets(line, sizeof(line), database) != NULL) {
    char *Name = strstr(line, "Name:");
    char *Address = strstr(line, "Address:");
    char *Number = strstr(line, "Number:");
    if (Name && Address && Number) {
        Name += strlen("Name:");
        *Address = '\0';
        Address += strlen("Address");
        *Number = '\0';
        Number += strlen("Number:");
        strcpy(record[rec_num].name, Name);
        strcpy(record[rec_num].address, Address);
        sscanf(Number, "%lu", &record[rec_num].number);
        rec_num++; } } 
```

请注意，这还将拉入名称和地址周围的所有空格 - 如果您希望它更清晰，您可以修剪前导和尾随空格。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-06T03:02:32.960

首先，您可能想再看看[http://www.cplusplus.com/reference/cstdio/fgets/](http://www.cplusplus.com/reference/cstdio/fgets/)。在这里，您将看到*str*参数是指向缓冲区的指针（您正确提供），然后*num*是您要读取的字节数**max**，您没有**正确**提供。

在您的代码中传递给 fgets 的字节数的问题是***sizeof***运算符的不正确使用。如您所知， sizeof 运算符“返回”给定**类型**的大小。您传递给 sizeof 的类型是指针类型（因为 C 中的数组 99% 与指针相同）。指针的大小取决于您运行的系统（Intel x86 上为 32 位，AMD64 上为 64 位，ATmega AVR 上为 16 位等）。因此，假设您有一台 64 位机器，您将允许 fgets '获取' 64 位（即 8 字节）的数据，这不是您想要的。那么正确的说法是什么？

```
while(fgets(line, sizeof(*line)*128, database) != NULL) {
    ... 
```

我在这里所做的是将*char 指针*取消引用到*char*并乘以该数组的大小。

然后，其次，您关于这是否可能的问题：是的。我现在也想问自己一个问题。是否有必要在 C 中执行此操作（即平台不支持任何不同的学习目的等），或者您也可以在 C#、Java、Python 中实现它。如果是这样，我强烈建议你这样做。

最后但并非最不重要的是，您正在向我们询问您的代码的有用性。这个答案很简单：不。不在当前或固定状态。使用“真实”数据库（如 MySQL）+ 其 API 可以解决您遇到的更复杂的问题。

# xsd - 使用从 import 导入的 xsd 类型

> ID：13735887
> 
> 赞同：6
> 
> 时间：2012-12-06T02:12:19.827
> 
> 标签：xsd

给定一个顶级 xsd 导入第二级，然后导入第三级，是否可以在第一级中使用第三级的类型？还是第一个必须直接导入第三个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T14:19:12.917

好问题！从阅读规范，我真的不能说。它没有明确解决传递导入的问题。

在 Primer（第 0 部分）中，他们只讨论了一级导入：[http ://www.w3.org/TR/xmlschema-0/#import](http://www.w3.org/TR/xmlschema-0/#import)

在结构（第 1 部分）中，它也只定义了直接导入[http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/structures.html#composition-schemaImport](http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/structures.html#composition-schemaImport)因为它谈到“一种解决此类外部组件”（我认为这意味着命名空间），也许可以合理地假设需要一种明确的方式来处理导入的模式 - 换句话说，每个导入模式都需要一个显式的命名空间。

谷歌搜索显示其他人也对这个问题感到困惑：

*   [http://xsd.stylusstudio.com/2002Apr/post00021.htm](http://xsd.stylusstudio.com/2002Apr/post00021.htm)
*   [http://xsd.stylusstudio.com/2005Mar/post05007.htm](http://xsd.stylusstudio.com/2005Mar/post05007.htm)

这些帖子最令人担忧的是不同的 xsd 处理器有不同的行为——这表明处理器的作者也很困惑。

尽管自那些帖子（2002 年、2005 年）以来这可能已经改变，但最明智的做法似乎是避免这个问题，而只使用直接导入，因为这适用于所有处理器。

正如我所说：好问题。

* * *

这是一个测试，用于检查 xsd 处理器（当然，这不能保证它适用于使用其他 xsd 处理器的其他人......）。我发现我最喜欢的一个（xmllint）*不允许*传递导入。

测试是三个模式：*a.xsd*导入*b.xsd*进而导入*c.xsd*；并且*c.xsd*中定义的类型是从*a.xsd*引用的：

```
<!-- a.xsd -->
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:c="http://www.c.com" targetNamespace="http://www.a.com">
  <xsd:import namespace="http://www.b.com" schemaLocation="b.xsd"/>
<!--  UNCOMMENT FOR DIRECT IMPORT
  <xsd:import namespace="http://www.c.com" schemaLocation="c.xsd"/>
-->
  <xsd:element name="eg" type="c:TypeC"/>
</xsd:schema>

<!-- b.xsd -->
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:import namespace="http://www.c.com" schemaLocation="c.xsd"/>
</xsd:schema>

<!-- c.xsd -->
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.c.com">
  <xsd:simpleType name="TypeC">
      <xsd:restriction base="xsd:string"/>
  </xsd:simpleType>
</xsd:schema>

<!-- a.xml -->
<eg xmlns="http://www.a.com">hello world</eg>

$ xmllint --schema a.xsd a.xml  --noout
a.xsd:6: element element: Schemas parser error : Element
'{http://www.w3.org/2001/XMLSchema}element', attribute 'type': References from
this schema to components in the namespace 'http://www.c.com' are not allowed,
since not indicated by an import statement.
WXS schema a.xsd failed to compile 
```

错误消息是：`References from this schema to components in the namespace 'http://www.c.com' are not allowed, since not indicated by an import statement.`，表明 xmllint 的开发人员至少非常确定*导入不是传递性的*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T05:40:49.500

如果`type`是你在说的话..`<xs:Include>`不是`<xs:Import>`..

答案是：**Parser 负责将所有 XSD 链接在一起**

请参见下面的示例：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <child>trial</child>
  <child2>trial2</child2>
  <trunk>
    <branch>1</branch>
    <branch>2</branch>
  </trunk>
  <specialchild>test</specialchild>
</root> 
```

对于上面的 XML，我将设计一个 XSD：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include schemaLocation="include multiple XSDs2.xsd"/>
  <xs:element name="root" type ="root"/>
  <xs:complexType name="root">
    <xs:sequence>
      <xs:element name="child" type="xs:string" />
      <xs:element name="child2" type="xs:string" />
      <xs:element name="trunk" type="trunk"/>
      <xs:element name="specialchild" type="specialchild"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

其中类型trunk在`import multiple XSDs2.xsd`文件中定义并通过使用链接`<xs:include>`.. 链接（位于同一文件夹中）.. 代码如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include schemaLocation="include multiple XSDs3.xsd"/>
  <xs:complexType name="trunk">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" name="branch" type="branch" />
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

并且类型分支是定义在`include multiple XSDs3.xsd`文件中定义的一个简单类型，代码如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:simpleType name="branch">
    <xs:restriction base="xs:string"/>
  </xs:simpleType>
  <xs:simpleType name="specialchild">
    <xs:restriction base="xs:string"/>
  </xs:simpleType>
</xs:schema> 
```

***现在棘手的部分是：在定义的地方`specialchild`声明`XSD_1``XSD_3`并且这两个 XSD 由 . 链接`XSD_2`。您可以观察到解析器默认情况下负责链接所有 XSD 并将它们全部视为一个！***

希望这能解决你的问题！

# sql-server - 重命名索引的最佳方法

> ID：13735888
> 
> 赞同：4
> 
> 时间：2012-12-06T02:12:27.800
> 
> 标签：sql-server, sql-server-2008, tsql, foreign-keys, indexing

我需要编写脚本（t-sql）重命名生产数据仓库中的 3 个索引。

这 3 个索引是位于外键列之上的单列索引，即`Index 1 = Foreign Key 1`.

**通过脚本重命名这些索引的最佳方法是什么？**

***我必须厌倦什么“陷阱”？**

我知道 sp_rename，这是可取的，还是应该删除并使用新名称重新创建索引（时间不是问题）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T03:11:43.840

sp_rename 可以正常工作并且不应该破坏任何东西，除非您在某处有在查询提示中引用当前名称的查询。

# browser - 有没有一种在浏览器中获取选定文本的简单方法？

> ID：13735893
> 
> 赞同：1
> 
> 时间：2012-12-06T02:13:16.707
> 
> 标签：browser, text

需要从浏览器（Chrome、Firefox）中获取选定的文本并将其传递给变量。做这个的最好方式是什么？我正在使用 Windows 和 Java SDK。使用当前系统的默认浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T02:21:11.590

HTML？使用 jQuery，获取字段的 id 吗？没有足够的信息，你使用什么编程语言？

使用 jquery 获取 val，示例如 $('#id').val()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:17:41.650

没有足够的信息来回答您的问题。

您使用哪种编程语言？哪个平台？视窗？安卓？还有什么？

您是否在正在处理的应用程序中运行浏览器？

您需要对收集的文本做什么？存储吗？处理吗？更改？

# mysql - 尽管表中有数据，但我的 sql 查询返回 null

> ID：13735905
> 
> 赞同：1
> 
> 时间：2012-12-06T02:14:37.983
> 
> 标签：mysql, sql

在接受用户的输入后，我在我的 DAO 类中构建了这个查询。它具有基本的搜索功能，用户提供了大约 10 个选项。我写了以下查询，

1.  用户给出日期范围。
2.  用户提供租金范围。（这部分是当它为空时，我得到0条记录。我如何处理空值并且仍然让mysql返回数据。）
3.  用户选择一个选项来查看具有图像的记录。
4.  此查询的状态标志应为 1。
5.  按标题搜索。即满足以上1到4个点，用户给出的关键字应该用like运算符搜索列标题。
6.  最后结果按日期排序。

.

```
select SQL_CALC_FOUND_ROWS * 
from `database`.`table` 
WHERE (Date(ctimestamp) BETWEEN '2011-12-02' and '2012-12-06') and (crent BETWEEN '' and '') 
   and (cimg1 IS NOT NULL or cimg2 IS NOT NULL or cimg3 IS NOT NULL or cimg4 IS NOT NULL or cimg5 IS NOT NULL or cimg6 IS NOT NULL or cimg7 IS NOT NULL or cimg8 IS NOT NULL)
   and cflag = 1 and ctitle LIKE '%Testing%' 
order  by Date(ctimestamp) desc Limit 0, 100 
```

所有参数都来自前端。现在对于这个查询，我有接近 13 条具有相同参数和条件的记录，但是当我运行它时，mysql 客户端它给了我 0 条记录。

这个查询给了我正确的数据，

```
select SQL_CALC_FOUND_ROWS * 
from `database`.`table`
WHERE (Date(ctimestamp) BETWEEN '2011-12-02' and '2012-12-06') 
   and (cimg1 IS NOT NULL or cimg2 IS NOT NULL or cimg3 IS NOT NULL or cimg4 IS NOT NULL or cimg5 IS NOT NULL or cimg6 IS NOT NULL or cimg7 IS NOT NULL or cimg8 IS NOT NULL)
   and cflag = 1 and ctitle LIKE '%Testing%' 
order  by Date(ctimestamp) desc Limit 0, 100 
```

两者的区别在于这部分

```
and (crent BETWEEN '' and '') 
```

现在我的疑问是，当用户计划跳过这些字段时，我该如何处理这种情况。感谢一些见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T02:51:01.357

crent 可能是一个数值。你问它是否在两个文本字段之间。这种情况永远不会成立。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:24:46.947

在程序中添加输入参数的验证。当它为NULL时不要把它放在sql中。

# python - 如何判断数组中的任何元素是否是给定字符串的子字符串？

> ID：13735906
> 
> 赞同：1
> 
> 时间：2012-12-06T02:14:42.600
> 
> 标签：python, string, substring

我想知道在 Python 中是否有更有效的方法来做到这一点。[我在 Ruby 中找到了一个很好的解决方案，](https://stackoverflow.com/questions/10215590/check-if-string-contains-any-substring-in-an-array-in-ruby)但它似乎相当具体。

基本上，我从一个 API 获取天气状况数据，并希望将它们的许多细微差别的条件标准化到七个我可以轻松处理的情况。

```
def standardize_weather_conditions(s):
    clear_chars = ['clear', 'sunny']
    clouds_chars = ['cloudy', 'overcast', 'fog']
    storm_chars = ['thunder']
    freezing_chars = ['ice', 'sleet', 'freezing rain', 'freezing drizzle']
    snow_chars = ['snow', 'blizzard']
    rain_chars = ['rain', 'drizzle', 'mist']

    if any_in_string(s, clear_chars):
        conditions = 'clear'
    elif any_in_string(s, clouds_chars):
        conditions = 'clouds'
    elif any_in_string(s, storm_chars):
        conditions = 'storm'
    elif any_in_string(s, freezing_chars):
        conditions = 'freezing'
    elif any_in_string(s, snow_chars):
        conditions = 'snow'
    elif any_in_string(s, wet_chars):
        conditions = 'wet'
    else:
        conditions = 'other'
    return conditions

def any_in_string(s, array):
    for e in array:
        if e in s:
            return True
    return False 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:22:22.630

`any_in_string`可以通过做单线`return any([x in s for x in array])`

然后，您可以制作一个字典，将您的描述映射到您的搜索词列表：

```
all_chars = {'clear':clear_chars, \
             'clouds':clouds_chars, \
             'storm':storm_chars, \
             'freezing':freezing_chars, \
             'snow':snow_chars, \
             'wet':rain_chars }

for key in all_chars.keys():
     if any_in_string(s, all_chars[keys]):
         return key

return 'other' 
```

这将有助于避免您拥有的“意大利面条代码”if-else 块。

如果您想更花哨，可以将`for`上面的循环更改为：

```
conditions = [x for x in all_chars.keys() if any_in_string(s, all_chars[x])]
conditions = ' and '.join(conditions)
return conditions 
```

这样你就可以得到类似的东西`cloudy and wet`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T02:18:51.477

You can define like this:

```
def any_in_string(s, lst):
    return any(word in s for word in lst) 
```

# node.js - 如何在 Express 视图中获取所有本地人

> ID：13735908
> 
> 赞同：2
> 
> 时间：2012-12-06T02:15:21.133
> 
> 标签：node.js, express, ejs

我正在尝试找出一种方法来访问视图中的所有 app.locals。在我的 app.js 我有

```
app.locals.title = "Title"
app.locals.page = "Page 1" 
```

这很好，在视图中，我可以访问每个

```
<%= title %>
<%= page %> 
```

但是，有没有办法（不做类似的事情`app.locals.xyz.title`）来获得所有`locals`的视图，所以我可以做这样的事情：

```
<% for(var i=0; i < locals.length; i ++ ){ %>
    <li><%= locals[i] %></li>
<% } %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:05:01.583

你必须明确地通过它：

```
res.locals.locals = res.locals; 
```

然后在视图中：

```
<%= locals %> 
```

# javascript - 使用 javascript 进行锚点跳转

> ID：13735912
> 
> 赞同：143
> 
> 时间：2012-12-06T02:15:27.663
> 
> 标签：javascript, html, function, anchor, href

我有一个经常会被发现的问题。问题是找不到明确的解决方案。

我有两个关于锚点的问题。

主要目标应该是在使用锚点跳转页面时获得一个没有任何散列的漂亮干净的 url。

所以anchors的结构是：

```
<ul>
    <li><a href="#one">One</a></li>
    <li><a href="#two">Two</a></li>
    <li><a href="#three">Three</a></li>
</ul>

<div class="wrap">
    <a name="one">text 1</a>
    <a name="two">text 2</a>
    <a name="three" class="box">text 3</a>
</div> 
```

好的，如果您单击其中一个链接，则 url 将自动更改为

> www.domain.com/page#1

最后这应该只是：

> www.domain.com/page

到现在为止还挺好。现在第二件事是，当您在互联网上搜索该问题时，您会找到`javascript`解决方案。

我找到了这个功能：

```
function jumpto(anchor){
    window.location.href = "#"+anchor;
} 
```

并使用以下命令调用该函数：

```
<a onclick="jumpto('one');">One</a> 
```

什么会像以前一样。它将哈希添加到 url。我还添加了

```
<a onclick="jumpto('one'); return false;"> 
```

没有成功。因此，如果有人可以告诉我如何解决这个问题，我将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2012-12-06T02:53:03.773

您可以获取目标元素的坐标并将滚动位置设置为它。但这太复杂了。

这是一种更懒惰的方法：

```
function jump(h){
    var url = location.href;               //Save down the URL without hash.
    location.href = "#"+h;                 //Go to the target element.
    history.replaceState(null,null,url);   //Don't like hashes. Changing it back.
} 
```

这用于[`replaceState`](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history#The_replaceState%28%29.C2.A0method)操作 url。如果您还想[支持 IE](http://caniuse.com/#search=replacestate)，那么您将不得不以[复杂的方式](https://developer.mozilla.org/en-US/docs/DOM/window.scrollTo)进行：

```
function jump(h){
    var top = document.getElementById(h).offsetTop; //Getting Y of target element
    window.scrollTo(0, top);                        //Go there directly or some transition
}​ 
```

演示： http: [//jsfiddle.net/DerekL/rEpPA/](http://jsfiddle.net/DerekL/rEpPA/)
另一个带过渡的：http: [//jsfiddle.net/DerekL/x3edvp4t/](http://jsfiddle.net/DerekL/x3edvp4t/)

您还可以使用[`.scrollIntoView`](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView)：

```
document.getElementById(h).scrollIntoView();   //Even IE6 supports this 
```

**[*（好吧，我撒谎了。一点也不复杂。）*]**

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-01-13T12:06:25.640

我认为这是更简单的解决方案：

```
window.location = (""+window.location).replace(/#[A-Za-z0-9_]*$/,'')+"#myAnchor" 
```

此方法不会**重新加载**网站，并将**焦点**设置在屏幕阅读器所需的锚点上。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-06-10T15:13:23.093

Not enough rep for a comment.

The `getElementById()` based method in the selected answer won't work if the anchor has `name` but not `id` set (which is not recommended, but does happen in the wild).

Something to bare in mind if you don't have control of the document markup (e.g. webextension).

The `location` based method in the selected answer can also be simplified with `location.replace`:

```
function jump(hash) { location.replace("#" + hash) } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-06T02:42:51.567

因为当你这样做时

```
window.location.href = "#"+anchor; 
```

您加载一个新页面，您可以执行以下操作：

```
<a href="#" onclick="jumpTo('one');">One</a>
<a href="#" id="one"></a>

<script>

    function getPosition(element){
        var e = document.getElementById(element);
        var left = 0;
        var top = 0;

        do{
            left += e.offsetLeft;
            top += e.offsetTop;
        }while(e = e.offsetParent);

        return [left, top];
    }

    function jumpTo(id){    
        window.scrollTo(getPosition(id));
    }

</script> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-06-24T02:34:37.130

我有一个提示按钮，点击它会打开显示对话框，然后我可以写下我想要搜索的内容，然后它会转到页面上的那个位置。它使用 javascript 来回答标题。

在 .html 文件上，我有：

```
<button onclick="myFunction()">Load Prompt</button>
<span id="test100"><h4>Hello</h4></span> 
```

在 .js 文件上我有

```
function myFunction() {
    var input = prompt("list or new or quit");

    while(input !== "quit") {
        if(input ==="test100") {
            window.location.hash = 'test100';
            return;
// else if(input.indexOf("test100") >= 0) {
//   window.location.hash = 'test100';
//   return;
// }
        }
    }
} 
```

当我将*test100*写入提示时，它将转到我在 html 文件中放置 span id="test100" 的位置。

我使用谷歌浏览器。

注意：这个想法来自于在同一页面上使用链接

```
<a href="#test100">Test link</a> 
```

单击时将发送到锚点。为了让它多次工作，根据经验需要重新加载页面。

Credit to the people at stackoverflow (and possibly stackexchange, too) can't remember how I gathered all the bits and pieces. ☺</p>

# asp-classic - 无法创建 COM 对象

> ID：13735913
> 
> 赞同：0
> 
> 时间：2012-12-06T02:15:38.433
> 
> 标签：asp-classic, iis-express

我正在调试一个用经典 ASP 编写的应用程序。我正在使用 IIS Express 7.5 来调试应用程序。一切都很好，直到我到达以下行：

```
set somevariable =Server.CreateObject("somelibrary.somemember") 
```

引发“未知异常”。

**语境**

我有管理权限。操作系统是 Windows XP SP3。“somelibrary”程序集已通过 regasm 正确注册，并使用 gacutil 包含在 GAC 中。我能够从 PowerShell 执行程序集：

```
$instance =New-Object -ComObject "somelibrary.somemember") 
```

我在 IIS Express for ASP 中有以下配置：

```
 <asp enableParentPaths="true"
  bufferingOn="true"
  errorsToNTLog="true"
  appAllowDebugging="true"
  appAllowClientDebug="true"
  scriptErrorSentToBrowser="true">
      <session allowSessionState="true" />
      <cache diskTemplateCacheDirectory="%TEMP%\iisexpress\ASP Compiled Templates" />
      <limits />
 </asp> 
```

该站点启用了 Windows 和匿名身份验证（禁用 Windows 身份验证也一样）

问题的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:28:09.197

电脑重启后一切正常。查看事件日志，我看到条目表明没有关于 ASP 中发生的错误的信息，并建议使用 /AUXSOURCE 标志来获取更多详细信息。我猜 IIS Express 缺少此帮助消息。

# html - 不能在 div 内浮动图像，图像最终在主 div 之外

> ID：13735917
> 
> 赞同：-1
> 
> 时间：2012-12-06T02:16:12.177
> 
> 标签：html, css

我正在处理这个页面： http: [//mockingbirdagency.com/thebox/tvshow.html](http://mockingbirdagency.com/thebox/tvshow.html)

[http://mockingbirdagency.com/thebox/style.css](http://mockingbirdagency.com/thebox/style.css)

我不能浮动主 div 内底部的小图标（它们以某种方式最终出现在外面）......我试过从左向右浮动，但图片仍然在主 .bloc div 之外。我检查了是否缺少结束标签，但也不是这样。谁能告诉我为什么？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T02:17:51.213

问题在于您的一个内部 div 的高度固定。

```
.bottom-presentation-tv {
    float: left;
    height: 50px; /* remove this  */
    width: 100%;
} 
```

# apache - CGI 脚本创建具有错误权限的文件

> ID：13735923
> 
> 赞同：0
> 
> 时间：2012-12-06T02:16:46.950
> 
> 标签：apache, permissions, cgi

我使用标准在 linux 服务器中`routers2.cgi`使用数据文件显示 MRTG 图。`.rrd`

此`routers.cgi`文件读取 rrd 数据文件并创建 MRTG 图表以从 Web url 显示它们。

该系统运行良好。唯一的问题是`.png`创建的图表有 600 个权限。但它需要 644 权限才能从网页显示。所以我不得不手动更改权限。我该如何解决这个问题，有什么建议吗？

网址：

```
domain.com/cgi-bin/routers2.cgi 
```

图位于：

```
domain.com/graphs/ 
```

阿帕奇2配置：

```
cgi bin: <path>/domain.com/cgi-bin
doc root: <path>/domain.com/public_html/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:17:47.480

好吧，我终于修好了。

它通过在脚本顶部添加以下代码得到修复。在我的情况下，将它添加到 routers2.cgi 中的 ##CONFIG#START# 注释行下方

umask（0033）；

# blackberry - 当经理调用 setPositionChild(Field) 时，如何重新布局和重新绘制字段？

> ID：13735928
> 
> 赞同：0
> 
> 时间：2012-12-06T02:17:34.687
> 
> 标签：blackberry, blackberry-jde

我的班级扩展了 Manager 并调用`setPositionChild(Field f)`了 change`f`的位置。调用`setPositionChild()`方法后，如何应用位置（即重新布局和重新绘制）以便我可以看到更改？

我试图打电话`invalidate()`，但没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:16:30.573

invalidate() 只是强制重绘，它不会重做整个布局，正如您所注意到的。

您可以通过转到父[Screen](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/ui/Screen.html)对象并调用 invalidateLayout() 来强制重新布局。强制布局几乎肯定会在您尝试移动的字段上调用 ​​setPositionChild()，因此您需要确保管理器布局代码保留新的字段位置。这可能意味着您需要编写一个自定义管理器。

# c++ - 将库添加为依赖项的要求

> ID：13735931
> 
> 赞同：0
> 
> 时间：2012-12-06T02:18:09.433
> 
> 标签：c++, dependencies, static-libraries, header-files

包含头文件和项目依赖项有什么要求？

这似乎是一个非常基本的问题，但我试图找到问题的本质。（目的：设计、重构、可能的自动化）。

我见过不同类型的标题：

```
<c++ standard headers>
<core library headers>
<external library headers>
<local project headers> 
```

*   如果我查看“包含”目录，我如何识别标头是 C++ 标准标头？

[曾经有一个位置，在选项或某处，显示参考路径。我再也找不到了。还存在吗？】

*   如果我包含一个外部库头文件（库类型项目），我通常必须执行以下所有操作：

    a) 让我的项目了解“包含”文件的位置

    b) 链接库

    c) 在解决方案中添加项目作为依赖项。

我更喜欢通过属性表引用来做 a) 和 b)。依赖库的属性表当然有依赖列表、库目录、包含目录。（我必须完成所有 3 个步骤吗？）

*   如果我包含像 boost 这样的“核心库头文件”，我**不需要**在我的解决方案中包含任何 boost 项目（我确实有一个 boost 属性表，它告诉我的项目所需的文件在哪里）。
    为什么 ？？？？？？

如何判断何时必须将项目作为依赖项添加到解决方案中？

我什么时候必须将 lib 添加为依赖项？（或者，换句话说，为什么我不必添加像 boost 这样的库作为依赖项？）

这些库有什么特别之处，所以我不必包含它们吗？

创建库时我必须做什么，以使其不必包含在使用其头文件的每个解决方案中，作为依赖项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:12:33.907

我的问题的答案——所以我不会不回答——很简单：这是一个选择问题！

我会选择在解决方案中包含其他项目，如果在某些时候可以修改它们并且对这些项目的更改可能需要重新构建它们，从而影响我正在处理的项目。

我不会包含任何不太可能改变的项目，例如第三方开源库（例如：boost）。

One of the other items in question: where are the C++ standard headers... There is an environment variable `$(INCLUDE)` that shows the paths to the included directories. Unfortunately, it is not set as a System Environment Variable... Not sure how it can be accessed through code.

# ruby-on-rails - In Rails, how do I limit which attributes can be updated, without preventing them from being created?

> ID：13735935
> 
> 赞同：2
> 
> 时间：2012-12-06T02:18:24.090
> 
> 标签：ruby-on-rails, ruby-on-rails-3, attr-accessible

I have a situation where an attribute can be created through a JSON API. But once it is created, I want to prevent it from ever being updated.

This constraint causes my first solution, which is using `attr_accessible`, to be insufficient. Is there a nice way to handle this type of situation in rails, or do I have to perform a manual check in the `update` method?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T02:36:00.443

您可以使用[`attr_readonly`](http://apidock.com/rails/ActiveRecord/ReadonlyAttributes/ClassMethods/attr_readonly)，这将允许在创建时设置值，但在更新时忽略。

例子：

```
class User < ActiveRecord::Base
  attr_accessible :name
  attr_readonly :name
end

> User.create(name: "lorem")
> u = User.first
=> #<User id: 1, name: "lorem">
> u.name = "ipsum"
=> "ipsum"
> u.save
=> true
> User.first.name
=> "lorem" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:24:25.593

据我所知，没有一个好的方法可以做到这一点，你必须编写一个自定义过滤器

```
before_update :prevent_attributes_update

def prevent_attribute_updates
  %w(attr1, attr2).each do |a|
    send("#{attr1}=", send("#{attr1}_was")) unless self.send("#{attr1}_was").blank?
  end
end 
```

# codeigniter - How to fix "Call to a member function getUser()" in facebook via CodeIgniter?

> ID：13735938
> 
> 赞同：3
> 
> 时间：2012-12-06T02:18:54.317
> 
> 标签：codeigniter, facebook-php-sdk

I am sitting in my chair for 2 hours and I cannot find what is wrong with this. I'm new to codeigniter things and I only got this error for the first time. Can you guys help me? Any help would be appreciated. Thanks in advance so much ...

```
****A PHP Error was encountered
Severity: Notice
Message: Undefined property: Facebook_model::$facebook
Filename: models/facebook_model.php
Line Number: 15
Fatal error: *Call to a member function getUser() on a non-object in C:\xampp\htdocs\hpbge\hpbge_files\system\hpbgestrong text_web_app\models\facebook_model.php on line 15*****

<?php 
```

class Facebook_model extends Model {

```
public function get_user() {

    $query = $this->facebook->getUser();

    if ($query) {

        $data['is_true'] = TRUE;

        $data['facebook_uid'] = $query;

        return $data;

    } else {

        $data['is_true'] = FALSE;

        return $data;

    }

}

function get_access_token() {

    $query = $this->facebook->getAccessToken();

    if ($query) {

        $data['is_true'] = TRUE;

        $data['access_token'] = $query;

        return $data;

    } else {

        $data['is_true'] = FALSE;

        return $data;

    }

}

function get_api_secret() {

    $query = $this->facebook->getApiSecret();

    if ($query) {

        $data['is_true'] = TRUE;

        $data['api_secret'] = $query;

        return $data;

    } else {

        $data['is_true'] = FALSE;

        return $data;

    }

}

function get_app_id() {

    $query = $this->facebook->getApiSecret();

    if ($query) {

        $data['is_true'] = TRUE;

        $data['app_id'] = $query;

        return $data;

    } else {

        $data['is_true'] = FALSE;

        return $data;

    }

}

function get_logout_url() {

    $query = $this->facebook->getLogoutUrl(array('next' => base_url()));

    if ($query) {

        $data['is_true'] = TRUE;

        $data['logout_url'] = $query;

        return $data;

    } else {

        $data['is_true'] = FALSE;

        return $data;

    }

}

function get_signed_request() {

    $query = $this->facebook->getSignedRequest();

    if ($query) {

        $data['is_true'] = TRUE;

        $data['signed_request'] = $query;

        return $data;

    } else {

        $data['is_true'] = FALSE;

        return $data;

    }

}

function set_access_token($access_token) {

    $query = $this->facebook->setAccessToken($access_token);

    if ($query) {

        $data['is_true'] = TRUE;

        return $data;

    } else {

        $data['is_true'] = FALSE;

        return $data;

    }

}

function set_api_secret($app_secret) {

    $query = $this->facebook->setApiSecret($app_secret);

    if ($query) {

        $data['is_true'] = TRUE;

        return $data;

    } else {

        $data['is_true'] = FALSE;

        return $data;

    }

}

function set_app_id($app_id) {

    $query = $this->facebook->setAppId($app_id);

    if ($query) {

        $data['is_true'] = TRUE;

        return $data;

    } else {

        $data['is_true'] = FALSE;

        return $data;

    }

}

//function is formatted for the following

//https://graph.facebook.com/ID/CONNECTION_TYPE?access_token=123456

function get_facebook_object($object, $facebook_uid, $access_token) {

    $fb_connect = curl_init();  

    curl_setopt($fb_connect, CURLOPT_URL, 'https://graph.facebook.com/'.$facebook_uid.'/'.$object.'?access_token='.$access_token);  

    curl_setopt($fb_connect, CURLOPT_RETURNTRANSFER, 1);  

    $output = curl_exec($fb_connect);  

    curl_close($fb_connect);  

    $result = json_decode($output);

    if (isset($result->error)) {

        $data['is_true'] = FALSE;

        $data['message'] = $result->error->message;

        $data['type'] = $result->error->type;

        $data['code'] = $result->error->code;

        return $data;

    } else {

        $data['is_true'] = TRUE;

        $data['data'] = $result->data;

        return $data;

    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:22:37.717

似乎您尚未加载 facebook 库将此行放入模型文件的构造中

```
$this->load->library('facebook', array(
'appId' => 'YOUR_APP_ID',
'secret' => 'YOUR_APP_SECRET'
)); 
```

并确保您已将 facebook.php 和 base_facebook.php 放在应用程序下的库文件夹中。

# ruby - 从 ruby 运行一个子进程而不等待它返回

> ID：13735946
> 
> 赞同：2
> 
> 时间：2012-12-06T02:20:19.690
> 
> 标签：ruby, subshell, epipe

> **可能重复：**
> [在 Ruby 中生成一个后台进程](https://stackoverflow.com/questions/2504445/spawn-a-background-process-in-ruby)

花了几天时间戳这个。直到最近，我一直在使用操作系统中的 ruby​​ 1.8.7。我会用反引号调用一个子shell。subshel​​l 是一个 bash 包装器，它会在 stdout 和 stderr 都关闭的情况下调用在后台运行任何程序。然后它运行 disown 让 init 接管该过程，它会立即返回。这多年来一直很好，我会让这个循环过程在后台启动工作并立即报告“是的，它运行了，这就是我要告诉你的全部内容”。

我将所有东西都升级到 rvm 1.9.3 并且一切都很好，除了这个技巧。我开始怀疑这比我想承认的更像是一种黑客行为。在 1.9.3 中，当我生成该子 shell 时，我总是收到 EPIPE 错误。它说它的管道坏了。我可以接受它在 1.9.3 中不起作用，因为我在 1.8.7 中所做的似乎有点恶心。

我试过使用系统命令，也试过 open3:popen2。他们还和我一起抛出了一个 EPIPE，我称之为 disown wrapper。

```
#!/bin/bash

# this will crash ruby if you keep trying to read from it.
$* >&- &

disown %1 
```

这是 disown 包装器。在红宝石中，我有类似的东西

```
 r=`/usr/local/bin/disown /usr/local/bin/job.sh` 
```

当它运行时，它会抛出

```
/usr/local/bin/runner.rb:88:in ``': Broken pipe (Errno::EPIPE) 
```

如果我不将（零）输出分配给 r 变量，则效果是相同的。并具有系统功能和Open3:popen2。

所以我的目标是简单地从 ruby​​ 运行命令，而不是等待它返回。这需要几个小时，我不需要跟踪它，只需生成它。如果它开始听起来像 ruby​​ 不能再这样做，或者如果我的 disown 包装器太令人发指而无法获得任何批准，我可能会尝试一个工作线程池。行。谢谢。

*编辑：感谢大家的精彩回答。我认为 Casper 向我展示了，如果我对红宝石术语有更好的处理，我可能会专注于此。对不起，如果这有点行人。我感谢大家的快速回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T02:41:30.000

好吧，你自己回答了[`Process.spawn`](http://www.ruby-doc.org/core-1.9.3/Process.html#method-c-spawn)：：

```
Process.spawn("something"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T02:29:10.330

查看[守护进程 gem](http://daemons.rubyforge.org/)。然后你可以这样做：

```
require 'daemons'
Daemons.run('some_script.rb') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T02:31:02.263

在 Ruby 1.9.3 中，你可以使用

```
 Process.fork do
   # do your long time job
 end 
```

# jquery - jQuery - 如果元素具有特定的 CSS 属性，则执行脚本

> ID：13735947
> 
> 赞同：0
> 
> 时间：2012-12-06T02:20:22.340
> 
> 标签：jquery, conditional-statements

我有一个包含一堆切换的菜单。每个项目切换不同的东西。

我正在尝试制作一个整体“重置”按钮，将一些东西重置为一些默认设置。我需要检测菜单项是否被切换，如果是，则在该特定项上执行一些代码，如果没有，则不执行任何操作。打开一个项目，它会获得一个 CSS 背景颜色，如下所示，所以我想出了以下重置代码：

```
$('#app-menu ul.dynamic-items li ul li').toggle(function () {
    $(this).css({background: "#4c581e"});
}, function () {
    $(this).css({background: "none"});
});

/* Reset Button */

$(".reset").click(function() {
    if( $('#app-menu ul.dynamic-items li').css({background: "#4c581e"}) != null )  { 
        $(this).click(); /* If the item has the background code mentioned above, it is toggled on, therefore this "click" should reset its state */
    } 
    else { 
    // do nothing //
    };
}); 
```

基本上我想说的是，如果菜单项具有#4c581e 背景，这意味着它已打开，因此应该“单击”以再次将其关闭。

问题是，它不起作用。我对 jQuery 相当陌生，所以我认为我做错了什么。

有什么想法吗？

编辑：我只想注意菜单项实际上会在页面上切换 DIV 元素，因此它不仅仅是重置菜单项的 css 样式的问题。这就是为什么如果检测到特定的 CSS 属性，我试图让它“单击”该项目，因为“单击”它基本上会再次将其关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:22:52.253

1.

`$(this).css("background-color")`将返回该值，但它可能是一个 rgb 值。

=> RGB(255, 255, 255)

所以要么比较 rgb 值，要么使用一些转换工具。

[http://www.jquery4u.com/jquery-functions/jquery-convert-rgb-hex-color/](http://www.jquery4u.com/jquery-functions/jquery-convert-rgb-hex-color/)

2.

您可能只想使用 css 类，并切换类。然后，“重置”按钮可以将所有默认类重新应用于元素，这在 IMO 上更加简洁。

```
$('#app-menu ul.dynamic-items li ul li').toggle(function () {
    $(this).toggleClass("active");
});
$(".reset").click(function() {
    $('#app-menu ul.dynamic-items li ul li').removeClass("active");
}); 
```

CSS可以是：

```
li.active {
  background-color: #4c581e;
  display: block;
} 
```

# c - 禁用 Eclipse 项目中所有发生的函数/方法调用

> ID：13735951
> 
> 赞同：0
> 
> 时间：2012-12-06T02:20:46.973
> 
> 标签：c, eclipse, comments

我在 Eclipse 中有一个 C 项目，我想禁用项目中所有出现的函数调用

有可能吗

```
 file : ref.c
    int refer()
    {
    a = 0;
    }

    file one.c
    int call{
    XXXX
    XXX
    //refer();

    }

    file two.c
    int call1{
    XXXX
    XXX
    //refer();

    } 
```

如何实现上述

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:22:51.773

您可以`#define`使用：

```
#define refer() 
```

将上面的行添加到包含在所有源文件中的 filev 中。

或者，您可以添加编译器（预处理器）选项

```
-D'refer()'= 
```

到构建命令。

# javascript - javascript函数中的选项标签为var

> ID：13735953
> 
> 赞同：0
> 
> 时间：2012-12-06T02:21:07.847
> 
> 标签：javascript, html

```
<select id="wbox" name="listbox" size="20"onchange="call(this)">
<optgroup label="Taxes">
<option value="1694" label="DNA-option1"></option>
<option value="1642">RNA-option2</option> 
```

我有一个列表框，我想提取所选选项的标签，并在 JavaScript 函数中使用它。

```
function call(op) {
        alert(op.label); 
        alert(op.name); 
        alert(op.value); 

        var x = op.label;          
     } 
```

然而，这总是作为标签返回，未定义。我尝试更改选项标签在 html 中的写入方式。这可能不是编写 java 脚本函数的最佳方式。我绝对不能使用选项值，它是唯一的 id 并用于其他用途。关于我做错了什么或更好的方法的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T02:29:10.607

要获得 selected `<option>`，您需要使用该`selectedOptions`属性。这是一个数组，因为`<select>`标签可以（可选地）支持多选。该数组包含`<option>`标签对象，因此您应该能够使用`op.selectedOptions[0].textContent`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T02:24:45.787

我猜：

```
 <select id="wbox" name="listbox" size="20" onchange="call(this.selectedOptions)">
        <optgroup label="Taxes">
            <option value="1694" label="DNA-option1">RNA-option1</option>
            <option value="1642" label="DNA-option2">RNA-option2</option>
    </select>

    <script type="text/javascript">
        function call(op){
            for(var i=0;i<op.length;i++){
                console.log('Label: '+ op[i].getAttribute('label'));
            }
        }
    </script> 
```

# entity-framework - 避免在存储库之外更新数据

> ID：13735956
> 
> 赞同：0
> 
> 时间：2012-12-06T02:21:25.020
> 
> 标签：entity-framework

我想知道在服务层或存储库中更新数据的正确方法是什么，并避免对服务/存储库之外的对象进行更改。例如：

```
public class PersonRepository{
     public class Insert(Person person){
          //code
          _db.SaveChanges();
     }
}

public class TaskRepository{
     public class Insert(Task task){
          //code
          _db.SaveChanges();
     }

     public void Update(Task task){}
} 
```

和控制器中的示例代码：

```
public ActionResult Insert(Task task)
{
     _taskRepository.Insert(task);

     task.Title = "foo";

     _personRepository.Insert(new Person()); //here the problem!
} 
```

当我自动保存一个新人时，实体会更新任务的标题！！！那么我该如何控制呢？我想拒绝在主存储库之外插入/更新（在这种情况下，任务必须仅在 taskRepository 内插入/更新）。

我应该禁用代理吗？或更改跟踪？要不然？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T02:47:04.280

看起来存储库正在共享一个 DBContext。因此，调用 `_db.SaveChanges();`PersonRepository 将导致 DBContext 对象保存对其正在跟踪的实体所做的所有更改 - 这包括任务对象。

有多种方法可以避免这种情况，但是将 DBContext 对象包装在`using`语句中将确保它在执行其工作后被释放，并且不会跟踪它返回的对象。

```
public class TaskRepository
{
     public class Insert(Task task)
     {
          using(var db = new YourContext())
          {
              //code here
              db.SaveChanges();
          }
     } 
} 
```

请注意，这可能会影响性能，因为创建和销毁 DBContext 可能会很昂贵。

# c - 在 C 中将字符数组转换为整数数组以进行 ISBN 验证

> ID：13735957
> 
> 赞同：0
> 
> 时间：2012-12-06T02:21:35.147
> 
> 标签：c, arrays, string, integer, isbn

我真的希望有人能给出一个很好解释的例子。我一直在到处寻找，但找不到合适的解决方案。

我正在介绍 C 编程课程，我们的最后一项任务是编写一个程序，该程序使用破折号验证 10 位 ISBN ... ISBN 作为字符串输入到 CHAR 数组中。从那里我需要分隔每个数字并将它们转换为整数，这样我就可以计算 ISBN 的有效性。最重要的是，破折号需要被忽略..

我的想法是创建一个 INT 数组，然后使用循环将每个字符存储到数组中，并将其传递给 atoi() 函数。我还尝试使用 IF 语句检查 CHAR 数组的每个部分，看看它是否找到了破折号。如果它确实找到了，它会跳到数组中的下一个位置。它看起来像这样：

```
int num[12], i = 0, j = 0, count = 0;
char isbn[12];

    printf ("Enter an ISBN to validate: ");
    scanf ("%13[0-9Xx-]%*c", &isbn);

 do {
        if (isbn[i] == '-') {
            i++;
            j++;
        }
        else {
            num[i]= atoi(isbn[j]);
            i++;
            j++;
        }
        count++;
    } while (count != 10); 
```

但这会产生分段错误，所以我什至无法判断我的 IF 语句是否真的过滤了破折号......

如果有人可以尝试解决这个问题，我将不胜感激。作业应在 12 月 4 日到期，但我得到了延期到 12 月 7 日，所以我时间紧迫。

请在解释中写出代码。我是一个视觉学习者，需要一步一步看。

显然还有很多东西需要编码，但在我克服这个障碍之前我无法继续前进。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:23:51.313

首先，您的定义`isbn`不足以容纳 13 个字符；因此它应该是 14 个字符长（也存储 terminating `'\0'`）。

其次，您的循环过于复杂；保持相同值的三个循环变量是多余的。

第三，循环是不安全的，因为一个字符串可能只有一个字符那么短，但你的代码会愉快地循环 10 次。

最后，转换保存数字 ascii 值的 char 可以通过简单地减去`'0'`它来转换。

这是经过上述改进后的代码。

```
#include <stdio.h>

int main(void)
{
    int num[14], i;
    char isbn[14], *p;

    printf("Enter an ISBN to validate: ");
    scanf("%13[0-9Xx-]%*c", &isbn);

    // p iterates over each character of isbn
    // *p evaluates the value of each character
    // the loop stops when the end-of-string is reached, i.e. '\0'
    for (p = isbn, i = 0; *p; ++p) {
        if (*p == '-' || *p == 'X' || *p == 'x') {
            continue;
        }
        // it's definitely a digit now
        num[i++] = *p - '0';
    }

    // post: i holds number of digits in num
    // post: num[x] is the digit value, for 0 <= x < i

    return 0;
} 
```

# sql - Access 2007：删除部分重复的行

> ID：13735969
> 
> 赞同：1
> 
> 时间：2012-12-06T02:23:02.353
> 
> 标签：sql, duplicates, ms-access-2007, candidate-key

我在导入 Access 2007 的 Excel 电子表格中有数据。有一个候选键 (CN)。对于具有相同 CN 的那些行，所有列的数据都不同。下面的示例（实际数据有 100 列，并且 MsgNum 可能变化更频繁，尚未与其他实例确认此模式，因此尽管我尝试对其进行选择，但解决方案可能应该忽略 CN 和 MsgNum 的组合可能是唯一的）。

```
Date       |        CN        |  MsgNum
2012-01-03     111-111-1111       101
2012-01-04     222-222-2222       101
2012-01-05     222-222-2222       202
2012-01-05     333-333-3333       101
2012-01-05     333-333-3333       202
2012-01-04     444-444-4444       101
2012-01-04     444-444-4444       101 
```

我无权访问 SQL Server。我只有 Access 2007。我不想使用 Excel 的删除重复程序，因为我得到的数据在导出到 Excel 之前来自 Access，所以我试图找到一个解决方案来通过 Access 删除重复项。

在 Access 的查询设计中使用 SQL，我尝试在 WHERE 子句中使用子查询，该子查询按 CN 分组，保留计数为 1 的那些，但删除所有实例并且不保留至少一个。

我尝试只选择两列（CN 和 MIN(MsgNum)）——适当地分组——这给了我想要的，但是当我使用所有指定的列（总共 100 列）运行它时，我仍然得到重复。

我尝试了查询向导查找单个列的重复项并返回其余列，这有助于在视图中隔离重复项。由于我无法设置任何主键，我不确定如何加入这些表。在对所有列运行上一个 MIN 查询时，我遇到了与以前相同的问题。

我试图在 WHERE 子句中设置一些东西来比较两列的组合，但我读到那是不可能的。所以，我不知道如何解决这个有候选键但该候选键列上的重复项的记录中的信息不同的问题。我想要做的是 Excel 2007 的 Remove Duplicates 过程所做的，其中可以删除一列上的重复项并保留其他列。

# javascript - Blur.JS 不适用于 Amazon S3 图像

> ID：13735975
> 
> 赞同：1
> 
> 时间：2012-12-06T02:23:42.907
> 
> 标签：javascript, amazon-s3, cors

我正在使用 Blur.js (http://blurjs.com/) 在我的 Rails 应用程序中模糊图像。我最近开始使用 Amazon S3 而不是在文件系统中存储图像。现在，当 blur.js 尝试模糊图像时，我在 Chrome 控制台中收到此错误：

```
Unable to get image data from canvas because the canvas has been tainted by cross-origin data.
Uncaught Error: unable to access image data: Error: unable to access local image data: ReferenceError: netscape is not defined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-11T08:24:50.800

我们在 blur.js 中有一个错误。在将图像绘制到画布并从画布中获取图像二进制数据时，需要确保源图像具有允许 CORS 操作的特殊属性。

在 blur.js 中，

```
tempImg = new Image();
if(formattedSource.match(/http:\/\/|https:\/\//)){
    tempImg.setAttribute('crossorigin', 'anonymous');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:30:43.580

您需要为包含您希望通过 Javascript 操作的图像的 S3 存储桶启用**[CORS 。](http://docs.amazonwebservices.com/AmazonS3/latest/dev/cors.html)**从上面的文档

> 跨域资源共享 (CORS) 为加载在一个域中的客户端 Web 应用程序定义了一种与不同域中的资源进行交互的方式。借助 Amazon S3 中的 CORS 支持，您可以使用 Amazon S3 构建丰富的客户端 Web 应用程序，并有选择地允许跨域访问您的 Amazon S3 资源。

通过在您的 S3 存储桶和您的域（使用 Blur.js 的地方）之间设置资源共享，您的问题中提到的警告/错误应该会消失。

# mysql - 连接两个表时，WHERE 子句不显示所有行？我需要左连接吗？

> ID：13735978
> 
> 赞同：1
> 
> 时间：2012-12-06T02:24:09.217
> 
> 标签：mysql, sql

我不确定这个问题的标题是什么。

**更新以显示更具体的问题。**

我有 2 张桌子。

表_a

```
+------------+--------+---------+
| date       | used   | solar   |
+------------+--------+---------+
| 2012-03-16 | 20.317 |  -4.167 |
| 2012-03-17 | 17.308 | -38.593 |
| 2012-03-18 |  9.529 | -42.414 |
| 2012-03-19 | 13.266 | -26.372 |
| 2012-03-20 |  7.077 | -41.742 |
| 2012-03-21 |  7.625 | -43.348 |
| 2012-03-22 | 10.943 | -42.025 |
| 2012-03-23 | 11.362 | -38.532 |
| 2012-03-24 | 11.492 |  -9.434 |
| 2012-03-25 | 16.133 |  -8.280 |
| 2012-03-26 | 17.054 | -31.340 |
| 2012-03-27 |  9.356 | -49.759 |
| 2012-03-28 | 11.984 | -16.299 |
| 2012-03-29 | 20.175 |  -6.412 |
| 2012-03-30 | 16.024 | -47.509 |
| 2012-03-31 | 10.605 | -16.102 |
+------------+--------+---------+ 
```

表_b

```
+------------+--------+
| date       | hdd    |
+------------+--------+
| 2012-03-01 | 32.884 |
| 2012-03-02 | 31.402 |
| 2012-03-03 | 22.487 |
| 2012-03-04 | 31.087 |
| 2012-03-05 | 41.679 |
| 2012-03-06 | 39.892 |
| 2012-03-07 | 17.626 |
| 2012-03-08 |  8.433 |
| 2012-03-09 | 29.580 |
| 2012-03-10 | 35.238 |
| 2012-03-11 | 22.453 |
| 2012-03-12 | 11.724 |
| 2012-03-13 |  6.486 |
| 2012-03-14 | 16.140 |
| 2012-03-15 | 21.425 |
| 2012-03-16 | 20.486 |
| 2012-03-17 | 13.744 |
| 2012-03-18 |  8.207 |
| 2012-03-19 |  3.878 |
| 2012-03-20 |  2.679 |
| 2012-03-21 |  2.701 |
| 2012-03-22 |  2.830 |
| 2012-03-23 |  4.219 |
| 2012-03-24 | 15.008 |
| 2012-03-25 | 19.155 |
| 2012-03-26 | 27.850 |
| 2012-03-27 | 32.985 |
| 2012-03-28 | 20.470 |
| 2012-03-29 | 26.230 |
| 2012-03-30 | 26.119 |
| 2012-03-31 | 24.353 |
+------------+--------+ 
```

`table_a`有 16 条记录。`table_b`有 31 条记录。

如果我用...

```
SELECT a.date, a.used, b.hdd
FROM table_a a RIGHT JOIN table_b b ON a.date=b.date
WHERE MONTH(a.date) = 3; 
```

我只有 16 行，大概是因为 table_a 只有 16 行。但实际上它必须是 where 子句。我如何将两者结合使用？

如何获取所有 31 行（*假设其他 16 行的每个表的日期匹配*）。我尝试了左连接，但没有奏效。

```
SELECT a.date, a.used, b.hdd FROM table_a a
LEFT JOIN table_b b ON a.date=b.date; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T02:25:32.067

改为使用`RIGHT JOIN`，因为您想显示所有 10 条记录`table_b`

```
SELECT a.date, a.column1, b.column1 
FROM table_a a RIGHT JOIN table_b b ON a.date=b.date; 
```

或交换表名，以便您仍然可以使用`LEFT JOIN`

```
SELECT b.date, b.column1, a.column1 
FROM table_b a LEFT JOIN table_a b ON a.date=b.date; 
```

**边注**

运行此查询时仅获得 5 条记录的原因，

```
SELECT a.date, a.column1, b.column1 
FROM table_a a, table_b b 
WHERE a.date=b.date; 
```

是因为它的表现像`INNER JOIN`

```
SELECT a.date, a.column1, b.column1 
FROM table_a a INNER JOIN table_b b ON a.date=b.date 
```

`INNER JOIN`选择在正在连接的另一个表上至少有一个匹配的行。要全面了解联接，请参阅下面的文章。

*   [**SQL 连接的可视化表示**](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:47:26.820

尝试这个：

```
SELECT a.date, a.used, b.hdd FROM table_b b
LEFT JOIN table_a a ON b.date=a.date AND MONTH(a.date) = 3; 
```

**或者**

```
SELECT a.date, a.used, b.hdd
FROM table_a a RIGHT JOIN table_b b ON a.date=b.date
WHERE MONTH(b.date) = 3; 
```

# java - 如何为 JTree 单元格设置透明背景？

> ID：13735987
> 
> 赞同：1
> 
> 时间：2012-12-06T02:25:36.003
> 
> 标签：java, swing, transparency, jtree, renderer

伙计们，

我正在尝试创建渐变 JTree 控件。除了树单元格的背景不透明之外，以下代码大部分都有效。如果有人打电话告诉我我做错了什么，我将不胜感激。

预先感谢您的帮助。

问候，
彼得

```
 package TestPackage;

import javax.swing.*;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeCellRenderer;
import java.awt.*;

public class Test {

    public Test() {
        JFrame frame = new JFrame();

        JPanel framePanel = new JPanel();
        framePanel.setLayout(new BorderLayout());
        frame.setContentPane(framePanel);

        DefaultMutableTreeNode rootNode = new DefaultMutableTreeNode("Item");
        DefaultMutableTreeNode childNode = new DefaultMutableTreeNode("Child");
        rootNode.add(childNode);

        GradientTree tree = new GradientTree(rootNode);
        // JTree tree = new JTree(rootNode);
        // tree.setBackground(Color.blue);
        tree.setCellRenderer(new MyRenderer());

        JScrollPane scroll = new JScrollPane(tree);
        scroll.setOpaque(false);
        framePanel.add(scroll, BorderLayout.CENTER);

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

    }

    public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new Test();
            }
        });
    }

    @SuppressWarnings("serial")
    public static class GradientTree extends JTree {

        public GradientTree(DefaultMutableTreeNode node) {
            super(node);
        }

        @Override
        protected void paintComponent(Graphics g) {

            int h = getHeight();
            int w = getWidth();

            GradientPaint gradientPaint = new GradientPaint(0, 0, Color.LIGHT_GRAY, 0, h, Color.WHITE);

            Graphics2D g2D = (Graphics2D) g;
            g2D.setPaint(gradientPaint);
            g2D.fillRect(0, 0, w, h);

            this.setOpaque(false);
            super.paintComponent(g);
            this.setOpaque(true);
        }
    }

    @SuppressWarnings({"serial" })
    private class MyRenderer extends DefaultTreeCellRenderer {
        public MyRenderer() {
            this.setOpaque(false);
            this.setForeground(Color.RED);
        }

        public Component getTreeCellRendererComponent(
                JTree tree,
                Object value,
                boolean sel,
                boolean expanded,
                boolean leaf,
                int row,
                boolean hasFocus) {

            super.getTreeCellRendererComponent(
                    tree, value, sel,
                    expanded, leaf, row,
                    hasFocus);

            return this;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T02:30:37.177

这是一个真正的痛苦。`DefaultTreeCellRenderer`无论如何都会忽略该值`opaque`并填充其内容。但是，您可以尝试一个标志。我以前做过，但没有时间测试它......

试试`UIManager.put("Tree.rendererFillBackground", false)`。在渲染器之前尝试并执行此操作，但在应用任何外观设置之后。

**更新**

在创建任何树之前设置此属性非常重要

没有 | 和...

![在此处输入图像描述](../Images/154cdf6838c54fcc1e7fa36e353e90dc.png)![在此处输入图像描述](../Images/c407f4813aedfa1e0d9cc215c8e55411.png)

```
public class TestTreeRenderer {

    public static void main(String[] args) {
        new TestTreeRenderer();
    }

    public TestTreeRenderer() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TreePane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class TreePane extends JPanel {

        private JTree tree;

        public TreePane() {
            // THIS IS VERY IMPORTANT
            // You must set this BEFORE creating ANY trees!!
            UIManager.put("Tree.rendererFillBackground", false);

            setLayout(new BorderLayout());
            tree = new JTree();
            tree.setBackground(Color.BLUE);

            System.out.println("Loading files...");
            File root = new File("/etc");
            DefaultMutableTreeNode rootNode = new DefaultMutableTreeNode(root.getName());
            for (File file : root.listFiles()) {
                rootNode.add(new DefaultMutableTreeNode(file.getName()));
            }
            System.out.println("Loading model");
            DefaultTreeModel model = new DefaultTreeModel(rootNode);
            tree.setModel(model);

            add(new JScrollPane(tree));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T14:45:05.607

**回答**

（扩展@Mad的答案，对潜在问题的冗长分析在最后）：

如果您希望全局属性在手动设置为树的 defaultTreeCellRenderer 中有效，则该渲染器必须*再次*调用 updateUI ，fi

```
UIManager.put("Tree.rendererFillBackground", false);
    ...
TreeCellRenderer r = new DefaultTreeCellRenderer() {
     {
          updateUI();
     }
};
tree.setCellRenderer(r); 
```

如果您*不想*更改全局设置并让透明渲染器只有一些树实例 - 选项是

*   要么从头开始实现一个 TreeCellRenderer 并忽略所有的脏东西（比如覆盖油漆和做一些意想不到的硬编码技巧......哇！）
*   通过在 updateUI 中临时设置 ui 属性来欺骗渲染器

欺骗代码：

```
TreeCellRenderer r = new DefaultTreeCellRenderer() {
    {
         updateUI();
    }

    @Override
    public void updateUI() {
        Object old = UIManager.get("Tree.rendererFillBackground");
        try {
            UIManager.put("Tree.rendererFillBackground", false);
            super.updateUI();
        } finally {
            UIManager.put("Tree.rendererFillBackground", old);
        }
    }
}; 
```

**分析**

从我的评论开始：

> 奇怪的是，仅设置 CellRenderer 的行为（相对于让 ui 安装其收藏夹）会使标志无效

这个谜题解决了：

DefaultTreeCellRenderer*打算*从 UIManager 中的设置中设置其 fillBackground 字段 - 但在实例化时失败。原因是一个 - 太常见的错误;-) - 实际上在 super 的实例化中这样做，因为在 super 的构造函数中调用了一个覆盖的方法：

```
// this is implemented in DefaultTreeCellRenderer
// but called in JLabel constructor 
public void updateUI() {
    ....
    // we are in JLabel, that is fillBackground not yet known 
    fillBackground = DefaultLookup.getBoolean(this, ui, "Tree.rendererFillBackground", true);
    ...
} 
```

然后在实例化过程的后期，字段值被硬编码：

```
private boolean fillBackground = true; 
```

最终结果是（假设我们通过反射*强制*访问该字段，fi），无论 UIManager 中的设置如何，都会始终执行以下传递。

```
DefaultTreeCellRenderer renderer = new DefaultTreeRenderer();
assertTrue(renderer.fillBackground); 
```

不寻常的事情是：为什么UIManager*中*的设置在让 ui 安装其默认值时会产生影响？这里的原因是渲染器 updateUI 被调用了两次：一次在实例化时，一次在树的 updateUI 中：

```
public void updateUI() {
    setUI((TreeUI)UIManager.getUI(this));
    // JW: at this point the renderer has its fillbackground hard-coded to true
    SwingUtilities.updateRendererOrEditorUI(getCellRenderer());
    // JW: now it's updateUI has been called again, and correctly set to the 
    // UIManager's value 
    SwingUtilities.updateRendererOrEditorUI(getCellEditor());
} 
```

顺便说一句：这个实例化混乱似乎是在 jdk7 中引入的......很可能（虽然没有检查）渲染器颜色的默认设置也不能正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-11T01:03:32.610

像这样扩展 DefaultTreeCellRenderer 怎么样：

```
public class MyRenderer extends DefaultTreeCellRenderer {

public Component getTreeCellRendererComponent(JTree tree, Object value,
        boolean isSelected, boolean expanded, boolean leaf, int row,
        boolean hasFocus) {

    JComponent c = (JComponent) super.getTreeCellRendererComponent(tree, value, isSelected, expanded, leaf, row, hasFocus);

          c.setOpaque(true);

      return c; 
    } 
```

}

设置 c.setOpaque(true); 似乎解决了它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-05T21:47:55.890

在这些 Swing 专家在场的情况下，我真的很犹豫要提出这个假设……但最近的 JDK 是否已经真正纠正了这个问题？

我的应用程序中有这样的代码，它似乎工作正常...... JTree 的背景完美地闪耀...... NB Jython，但应该可以理解：

```
 def getTreeCellRendererComponent( self, tree, value, selected, expanded, leaf, row, has_focus ):
            super_comp = self.super__getTreeCellRendererComponent( tree, value, selected, expanded, leaf, row, has_focus )
            super_comp.opaque = not selected

            ... 
```

Java 版本为 1.7.0_079

# jquery - jQuery：索引数组

> ID：13735988
> 
> 赞同：0
> 
> 时间：2012-12-06T02:25:38.430
> 
> 标签：jquery, arrays, ruby-on-rails-3

我有一个 Rails 应用程序，我想在其中的文本字段中提交一系列逗号分隔的 ID。例如，假设我正在将三个元素添加到一个带有各自 ID 12、2 和 4 的订单中，我希望该字段读取：

```
12,2,4 
```

这很容易。当我改变主意并且想将某个位置（即开始）的元素替换为 ID 为 3 的元素时，问题就出现了。我将如何设法提交`3,2,4`而不是提交`2,4,3`？我很困。如果有一种方法可以自动在字段中的 ID 之间（而不是开头或结尾）放置逗号，那将非常有用。

干杯!

**编辑：**我写这个是为了解决这个问题。感觉很接近，但还没有雪茄。`src`下面提到的包含上面提到的三个 ID 之一，并且这个函数将附加到的 s 的数量是变化的`#elementX`。

```
$('#element1').change(function() {
  var src = $(this).val();
  var array = $('#order').val().split(",");
  array.splice(0, 1, src).join(",");
  $('#order').val(array);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T02:31:22.373

三步。您从一个包含逗号分隔整数的字符串开始。

1.  [将逗号上的字符串拆分](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)为一个 id 数组。
2.  [将新 id拼接](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)到替换旧 id 的数组中。您想将 3 个参数传递给 splice：
    *   要开始删除的元素的索引（如果要删除第一个元素，其索引将为 0）。
    *   您要删除多少个元素（这里您只想删除第一个元素，所以 1）。
    *   要添加的新元素（在您的情况下，它是`src`）。
3.  [用逗号将字符串重新连接](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)在一起。

# c# - 指数超出范围。必须是非负数且小于集合的大小。参数名称：索引

> ID：13735994
> 
> 赞同：1
> 
> 时间：2012-12-06T02:26:42.787
> 
> 标签：c#, asp.net, aspchart

我有一个具有不同系列的条形图。每个系列必须指向不同的页面。我正在提供 URL。我收到此错误。

> 指数超出范围。必须是非负数且小于集合的大小。参数名称：index 说明：当前web请求执行过程中发生了未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.ArgumentOutOfRangeException：索引超出范围。必须是非负数且小于集合的大小。参数名称：索引
> 
> 源错误：
> 
> 第 133 行：series1.Points[i].MapAreaAttributes = "Target=\"_blank\""; 第 134 行：series1.Points[0].Url = "db_PMUKPI_ByRM.aspx?Month=" + iMonth + "&Year=" + iYear; 第 135 行：series1.Points[1].Url = "db_PmuKpi_AllMonths.aspx?Month=" + iMonth + "&Year=" + iYear; 第 136 行：series1.Points[2].Url = "db_PmuKpi_AllMonths.aspx?Month=" + iMonth + "&Year=" + iYear; 第 137 行：series1.Points[3].Url = "db_PmuKpi_Overall_DateRange.aspx?Month=" + iMonth + "&Year=" + iYear;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T03:28:36.360

在没有看到实际代码的情况下，我将假设您正在使用某种循环，并且第 133 行在循环内。看来您正在尝试访问您的对象 series1.Points[i]，我是索引。请记住索引通常从 0 开始并以对象数 - 1 结束。因此，如果您使用的是 for..loop，请这样做：

```
int numItems = series1.Points.Count();
for (int i = 0; i < numItems; i++)
{
series1.Points[i].MapAreaAttributes = "Target=\"_blank\"";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T04:39:15.733

GridView 缺少 Datakeyname="id"

# java - 正则表达式帮助搜索匹配的字符串

> ID：13735996
> 
> 赞同：1
> 
> 时间：2012-12-06T02:27:05.730
> 
> 标签：java, regex

我需要做的是检查一个字符串，这就是我到目前为止所拥有的

```
System.out.print("Please enter a string of 1's and 0s :");
numLine = input.next();

if (numLine.matches("^101$")) {
    System.out.print("A is true");
} else if (numLine.matches("^\\d[01]+101$ ")){
    System.out.print("B is true");
} else {
    System.out.println("no");  
} 
```

代码的第一部分 ^101$ 工作并打印出 A 对 B 来说是真的 我想做的是只接受 1 和 0 并在它以 101 结束时返回，我希望 C 在开始时执行 101并接受尽可能多的 1 和 0 以及在其中任何位置执行 101 的 D，即使它的 111000101000 或其他内容

我的杀手锏是 ("^101$") 语法，我可以使用帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:34:39.607

你不需要`^`and `$`with `matches`（正如我在评论中所说）。这是我的看法：

**乙：** `"[01]+101"`
**丙：** `"101[01]+"`
**丁：** `"[01]*101[01]*"`

* * *

回想一下，这`X+`意味着`X` *一次或多次*，而这`X*`意味着`X` *零次或多次*。

此外（对于**A**），如果您只想“匹配” `"101"`，您可能需要考虑简单地使用`equals`，即`numLine.equals("101")`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T02:34:47.840

你想要的四个正则表达式非常相似：

如您所见，要完全匹配“101”（A），请使用`101`（如评论中所述，您不需要使用`^`and `$`。

要匹配以“101”(B) 结尾的任何内容，请使用`[01]*101`.

要匹配以“101”(C) 开头的任何内容，请使用`101[01]*`.

要匹配包含“101”(D) 的任何内容，请使用`[01]*101[01]*`.

在所有情况下，`[01]*`表示集合 {0,1} 中任何字符的 0 个或多个实例，因此每个都查找字符串的其余部分（如果适用），仅使用and`101`填写。`0``1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T02:40:11.170

我不确定您到底想做什么，但我了解您想要正则表达式的目的，所以我将简单地发布。

A -`^101$`匹配`101`整个字符串。

B -`^101`匹配`101`字符串的开头。添加`[10]*`之后，包括`0`和`1`之后。`^101[10]*`

C -`101$`匹配`101`字符串的末尾。在开头添加`[10]*^`以包括前面的`0`和`1`。`[10]*101$`

D -`101`匹配`101`任何地方。

# ruby-on-rails - 不断收到路由错误..我做错了什么？

> ID：13735997
> 
> 赞同：1
> 
> 时间：2012-12-06T02:27:06.533
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在做 Rails 的入门课程，到目前为止已经完成了以下内容

1.  制作了一个新的 rails 应用程序：（ `rails new shovell`“铲子”是应用程序的名称）
2.  安装了所有的宝石，什么不是：`bundle install`
3.  生成了一个模型`rails generate model Story name link`
4.  生成了一个控制器`rails generate controller Stories index`

现在，当我指向 时`http://localhost:3000/stories`，我收到一条错误消息“路由错误没有路由匹配 [GET]”/stories“”

以下是我的`routes.rb`：

```
Shovell::Application.routes.draw do
  get "stories/index"
# a bunch of comments
end 
```

所以我不知道我做错了什么，为什么它没有显示默认的欢迎消息，而是给我一个错误。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:31:29.983

但是，如果您这样做：

```
http://localhost:3000/stories/index 
```

您可能会得到该页面，尽管这不是 Rails 方式。

首先，阅读并理解[Rails 路由指南](http://guides.rubyonrails.org/routing.html)

然后为了修复您的代码，您可以在路由上编写

```
Shovell::Aplication.routes.draw do
  resources :stories
end 
```

或者，如果您想要自定义路线而不是休息资源

```
Shovel::Application.routes.draw do
  match "stores", to: "my_controller#my_action"
end 
```

您还可以命名自定义路线

```
Shovel::Application.routes.draw do
  match "stores", to: "my_controller#my_action", as: :store_index
end 
```

因此，有了名称，您就可以在 rails 应用程序上使用路线名称

```
link_to("Store Index", store_index_path) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:28:55.707

您已经定义了一条到 的路线`/stories/index`，但您没有定义一条到的路线`/stories`，这就是失败的原因。

你应该像这样定义这条路线：

```
 get '/stories', :to => "stories#index" 
```

有关详细信息，请参阅[路由指南](http://guides.rubyonrails.org/routing.html)

# java - IOException 从类路径资源 [beans1.xml] 解析 XML 文档；嵌套异常是 java.io.FileNotFoundException

> ID：13735998
> 
> 赞同：1
> 
> 时间：2012-12-06T02:27:07.577
> 
> 标签：java, spring, dependency-injection

当我尝试运行简单的弹簧示例时，我遇到了异常

以下代码行尝试从 beans1.xml 读取 spring beans

```
ApplicationContext context = new ClassPathXmlApplicationContext("beans1.xml"); 
```

以下是我得到的完整例外。

```
Exception in thread "main" org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from class path resource [beans1.xml]; nested exception is java.io.FileNotFoundException: class path resource [beans1.xml] cannot be opened because it does not exist 
```

我已将 xml 文件放在每个可能的位置，希望该程序能够检测到该文件。但是这个程序仍然找不到这个bean配置文件。我也使用 maven 作为构建工具，但我使用 Eclipse IDE 运行程序

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T02:53:36.040

放到`resources`maven项目目录下

```
src/main/resources/beans1.xml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T06:48:47.913

检查名称，您的 bean.xml 文件名应与您在此处提到的相同，即 beans.xml ClassPathXmlApplicationContext("beans1.xml")：