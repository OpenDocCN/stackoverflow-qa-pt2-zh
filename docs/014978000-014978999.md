# StackOverflow 问答 14978000-14978999

# yii - 隐藏的分页摘要文本

> ID：14978000
> 
> 赞同：1
> 
> 时间：2013-02-20T10:51:01.360
> 
> 标签：yii, yii-components, yii-events

我在 Yii 中使用 CGridView 来创建表格。

我想用分页显示我的表格，但在顶部隐藏摘要文本，这表明页面的数量（显示 4 个结果中的 1-4 个。）

那可能吗？谢谢你

对不起我的英语不好

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T11:04:43.810

有一个`template`选项。默认情况下它等于`{summary}\n{items}\n{pager}`

如果您在 gridview 配置中覆盖它，您将能够删除摘要部分：

```
$this->widget(
                'zii.widgets.CGridView',
                array(
                    Your options here ...
                    'template' => '{items}\n{pager}',
                )
            ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T13:15:51.743

另一种选择是将`CGridView` `summaryText`值设置为 false

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-15T03:55:23.973

因为YII使用了CListView，所以还在asset文件夹中添加了一定的汇总类CSS。因此，为了解决这个问题，只需覆盖 css。

将此添加到您的 CSS 中。

```
#yw0>.summary{ 
    display:none;
} 
```

# java - 如何在 android 中访问第三方应用程序中的电子邮件帐户？

> ID：14978005
> 
> 赞同：0
> 
> 时间：2013-02-20T10:51:05.743
> 
> 标签：java, android, email

我正在创建一个应用程序来访问 GMail 帐户和其他一些不是 GMail 的电子邮件帐户。如何访问我的应用程序的这些电子邮件帐户的收件箱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:59:16.500

我假设如下：

*   您想使用 Java。
*   您正在尝试检索电子邮件列表。
*   您需要为 GMail 和非 GMail 帐户执行此操作。
*   您没有提到将邮件保留在设备上的任何内容，因此我假设您想要收件箱的快速快照。
*   您没有提及是否要将电子邮件留在收件箱中或在检索时将其删除，因此您需要选择有关该选项的选项。
*   您不知道如何从技术上获取电子邮件。

因此，首先您需要决定如何访问邮件。由于您需要访问 GMail 和非 GMail 帐户，因此[通过 POP3 访问邮件](http://en.wikipedia.org/wiki/Post_Office_Protocol)似乎很自然。“通常”这种访问方法也会从用户收件箱中删除邮件，但是有一个选项可以下载邮件而不删除它们。通过 POP3 进行身份验证有多种处理方式，因此我会选择一个为您执行此操作的库。

我既不是 Android 开发人员，也不是 JSF 之外的 Java，但[Java Mail API](http://javamail.kenai.com/nonav/javadocs/)似乎能够进行 POP3 检索。并且有一个[针对 Android 的实现](https://code.google.com/p/javamail-android/)。

除此之外，您的 GUI**可能**缺少指定服务器、端口和选择相关加密的选项的可能性。您当然可以从用户电子邮件地址的给定域中“猜测”这些参数，但您将需要此信息来检索电子邮件。

当然，您也可以使用[IMAP](http://en.wikipedia.org/wiki/Internet_Message_Access_Protocol)，Java Mail API 似乎也可以。

# php - 来自帖子 ID 的 Wordpress 多个帖子

> ID：14978007
> 
> 赞同：0
> 
> 时间：2013-02-20T10:51:11.993
> 
> 标签：php, string, wordpress

我为我的用户设置了一个用户元，将最喜欢的帖子保存到他们的个人资料中。我得到了这个 usemeta（其中保留了帖子 ID）。一旦我得到它，我就把它放在一个一维数组中。我想显示他们最喜欢的帖子的列表。我试过这个：

```
$favorites //array of favorites, that has come from the databese 

$query = new WP_Query( array( 'post__in' => array( 2, 5, 12, 14, 20 ) ) ); 
```

如果我对帖子 ID 进行硬编码，它会正常工作，但由于它是一个数组，我不能只传入这样的数组，它什么也不返回。

```
$query = new WP_Query( array( 'post__in' => $favorites) ); 
```

它不接受它，我也尝试将数组内爆成这样的字符串：

```
$fav_list = implode("," , $favorites); 
```

我明白了，这正是我需要的字符串“124,126,125,130,132,140,​​142”，不带引号。然后我会这样使用它：

```
$query = new WP_Query( array( 'post__in' => array($fav_list) ) ); 
```

但同样它不起作用，它什么也不返回。由于收藏夹列表是从 usermeta 中提取的，并且用户可以更改它，因此我无法对列表进行硬编码。

谁能帮我？WP_Query 是否有可能。不知道为什么它不接受字符串或我做错了什么。我浏览了 Wordpress 文档，但没有找到解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:23:47.817

数组不会作为数组存储在数据库中。他们被序列化。当您从数据库中拉出数组时，您必须使用`unserialize()`它。

[http://php.net/manual/en/function.unserialize.php](http://php.net/manual/en/function.unserialize.php)

如果你`var_dump($favorites)`在它从数据库中出来之后，你会注意到它是一个看起来很奇怪的字符串，而不是一个数组。`var_dump(unserialize($favorites))`将向您展示您的原始数组。

# oracle - 数据库重新启动后无法登记分布式事务

> ID：14978008
> 
> 赞同：0
> 
> 时间：2013-02-20T10:51:14.850
> 
> 标签：oracle, ado.net, oracle11g, odp.net, msdtc

嗨，我在数据库重新启动后登记分布式事务有问题。

我的环境：

*   带有 SP1 的 Windows 7 x64
*   Oracle 数据库 11g 快捷版
*   ODP.NET 4.112.3.0

我的程序：

```
const string connectionString = "Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=LOCALHOST)(PORT=1521)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=XE)));User Id=system;Password=sasa;";

static void Main(string[] args)
{
    using (TransactionScope scope = new TransactionScope())
    {
        while (true)
        {
           using (OracleConnection connection = new OracleConnection(connectionString))
           {
               try
               {
                   connection.Open();
                   Console.WriteLine("Connection opened");
               }
               catch (Exception ex)
               {
                   Console.WriteLine(ex.Message);
               }
           }
           Thread.Sleep(1000);
        }
    }
} 
```

应用程序启动后一切正常。当我开始停止数据库时，我得到 NRE 和一些异常告诉我数据库正在关闭。再次启动后，我收到错误 - 无法加入分布式事务。不再打印打开的连接。

输出：

```
Connection opened
Connection opened
Connection opened
Connection opened
Connection opened
-- here I'm stopping database
ORA-12518: TNS:listener could not hand off client connection
ORA-12528: TNS:listener: all appropriate instances are blocking new connections
-- here database is stopped I suppose
ORA-12514: TNS:listener does not currently know of service requested in connect descriptor
-- here I'm starting database again
ORA-12528: TNS:listener: all appropriate instances are blocking new connections
ORA-1033: ORACLE initialization or shutdown in progress
Unable to enlist in a distributed transaction
Unable to enlist in a distributed transaction
Unable to enlist in a distributed transaction
Unable to enlist in a distributed transaction
Unable to enlist in a distributed transaction
... 
```

*   这种行为的原因是什么？
*   如何诊断发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:08:55.960

您的测试无效。您正在单个事务的上下文**中循环。**当数据库关闭时，任何正在进行的分布式事务都会中止。您的循环正试图在该已死事务下建立一个新连接。

我不确定您要测试的确切内容，但将 TransactionScope 移动到 while 循环内应该可以解决它。

# c++ - win32 I/O 性能问题

> ID：14978011
> 
> 赞同：0
> 
> 时间：2013-02-20T10:51:20.730
> 
> 标签：c++, winapi, io

我对 win32 I/O 性能有疑问：我正在尝试使用 OpenFile/WriteFile 实现不错的写入速度。使用资源监视器（Windows 自带）我测量了以下代码的写入速度，发现它的写入速度为 2MB/秒...

```
HANDLE hFile = INVALID_HANDLE_VALUE;
hFile = CreateFile(
    L"test",
    (GENERIC_READ | GENERIC_WRITE),
    FILE_SHARE_READ,
    NULL,
    OPEN_ALWAYS,
    (FILE_ATTRIBUTE_NORMAL |
    FILE_FLAG_WRITE_THROUGH |
    FILE_FLAG_NO_BUFFERING),
    NULL);
if (hFile != INVALID_HANDLE_VALUE)
{
    //OK
    unsigned long bytesWritten = 0;
    unsigned long* Buffer = (unsigned long*)malloc(4096*sizeof(unsigned long));
    ZeroMemory(Buffer, 4096); //thanks to 'bash.d'
    while (true)
    {
        /*the infinite loop is intentional
          because I wanted to see if the writing speed of 2MB/sec
          was right */
        WriteFile(hFile,
            Buffer,
            4096,
            &bytesWritten,
            NULL);
        if (bytesWritten <= 0)
        {
            break;
        }
    }
} 
```

我尝试了以下，它是一样的......

```
hFile = CreateFile(
    L"test",
    (GENERIC_READ | GENERIC_WRITE),
    FILE_SHARE_READ,
    NULL,
    OPEN_ALWAYS,
    (FILE_ATTRIBUTE_NORMAL); 
```

我在做什么错（关于写作速度）？以及如何提高写作速度？谢谢你，对不起我的英语

编辑：我在本地磁盘上写

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:06:25.697

这非常有趣，与我遇到的问题类似，并且可以在 2 个不同的服务器上使用 Windows Server 2003 SP2 64 位（单个硬盘驱动器，而不是 RAID）重现。只需在循环中执行 36 字节的 WriteFile() 和 99964 字节就会产生类似的行为（我猜它与单次写入和其他一些 Windows 版本相同；这正是我碰巧使用的） . CPU 使用率一开始非常低，然后逐渐增加——在一台服务器上，测试大约 50% 的 CPU 使用率在 175GB 左右（其中大约 95% 是内核时间；60% 在我的程序中，40% 在“系统”中）。

您也可以尝试异步 IO 来获得测试性能。即使用 FILE_FLAG_OVERLAPPED 打开文件并使用 WriteFile 的 LPOVERLAPPED 参数。使用 FILE_FLAG_NO_BUFFERING 可能会或可能不会获得更好的性能。你必须测试才能看到。

FILE_FLAG_NO_BUFFERING 通常会为您提供更一致的速度和更好的流式传输行为，并且它可以避免您可能不再需要的数据污染磁盘缓存，但总体上不一定更快。

您还应该测试以查看每个 IO 块的最佳大小。根据我的经验，一次复制 4k 文件和一次复制 1Mb 文件之间存在巨大的性能差异。

在我过去（几年前）对此的测试中，我发现低于约 64kB 的块大小主要由开销决定，并且总吞吐量随着更大的块大小达到约 512KB 继续提高。如果使用今天的驱动器，您需要使用大于 1MB 的块大小来获得最大吞吐量，我不会感到惊讶。

您当前使用的数字似乎是合理的，但可能不是最佳的。此外，我相当确定 FILE_FLAG_WRITE_THROUGH 会阻止使用磁盘缓存，因此会降低您的性能。

尝试下面的东西是值得的......

1) 启用 FILE_FLAG_SEQUENTIAL_SCAN 标志

2) 设备管理器“磁盘策略”中的“启用高级性能”

3) 将磁盘块大小从 64 KB 更改为 4096 ...

4) 尝试 FILE_FLAG_NO_BUFFERING

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:31:27.440

1.  [使用绑定到完成端口的异步 IO](http://rusanu.com/2008/11/11/high-performance-windows-programs/)
2.  [使用SetFileValidData](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365544%28v=vs.85%29.aspx)预增长文件
3.  打开手柄`FILE_FLAG_NO_BUFFERING | FILE_FLAG_WRITE_THROUGH`

消费级驱动器（甚至 5400RPM）应该能够写入约 130MB/秒（单轴，无 RAID）。不应同时发生其他 IO（无头部移动）。

有关示例，请参见[https://github.com/rusanu/writing-a-binary-file-in-c-very-fast 。](https://github.com/rusanu/writing-a-binary-file-in-c-very-fast)

# cakephp - 如何通过过滤子模型数据来删除父模型数据？

> ID：14978013
> 
> 赞同：0
> 
> 时间：2013-02-20T10:51:22.247
> 
> 标签：cakephp, cakephp-2.2

# 任务

我正在尝试根据相关模型中的条件返回一组数据。

# 问题

目前我能得到的最接近的是使用 Containable 返回所有匹配的模型数据，但仅在匹配包含条件时才返回子数据。这并不理想，因为我的数据仍然包含主要模型数据，而不是被删除。

我正在使用 HABTM 关系，例如`Product`和之间的关系，`Category`并且我想查找特定类别中的所有产品。

# 最初的想法

基本方法是使用可包含的。

```
$this->Product->find('all', array(
    'contain' => array(
        'Category' => array(
            'conditions' => array(
                'Category.id' => $categoryId
            )
        )
    )
)); 
```

尽管这将返回所有产品，并且如果 Category 维度与包含条件不匹配，则只需删除它。

# 迄今为止最近的

```
$this->Product->find('all', array(
    'contain' => false,
    'joins' => array(
        array(
            'table' => 'categories_products',
            'alias' => 'CategoriesProduct',
            'type' => 'LEFT',
            'conditions' => array(
                'CategoriesProduct.product_id' => 'Product.id'
            )
        ),
        array(
            'table' => 'categories',
            'alias' => 'Category',
            'type' => 'LEFT',
            'conditions' => array(
                'Category.id' => 'CategoriesProduct.category_id'
            )
        )
    ),
    'conditions' => array(
        'Product.status_id' => 1,
        'Category.id' => $categoryId
    ),
)); 
```

这会生成以下查询，

```
SELECT `Product`.`id`, `Product`.`name`, `Product`.`intro`, `Product`.`content`, `Product`.`price`, `Product`.`image`, `Product`.`image_dir`, `Product`.`icon`, `Product`.`icon_dir`, `Product`.`created`, `Product`.`modified`, `Product`.`status_id` 
FROM `skyapps`.`products` AS `Product` 
LEFT JOIN `skyapps`.`categories_products` AS `CategoriesProduct` ON (`CategoriesProduct`.`product_id` = 'Product.id') 
LEFT JOIN `skyapps`.`categories` AS `Category` ON (`Category`.`id` = 'CategoriesProduct.category_id') 
WHERE `Product`.`status_id` = 1 
AND `Category`.`id` = 12 
```

这个查询是正确的，除了连接条件被引用 ' 而不是 `，这会中断查询。

# 手动查询

```
SELECT * 
FROM products
JOIN categories_products ON categories_products.product_id = products.id
JOIN categories ON categories.id = categories_products.category_id
WHERE categories.id = 12 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:09:08.770

问题在于我定义连接条件的方式。它不是一个关联数组，而是一个字符串。

```
 'conditions' => array(
            'CategoriesProduct.product_id' => 'Product.id'
        ) 
```

更改为

```
 'conditions' => array(
            'CategoriesProduct.product_id = Product.id'
        ) 
```

# python - 通过 Python 打开新的 bash 选项卡窗口

> ID：14978015
> 
> 赞同：3
> 
> 时间：2013-02-20T10:51:27.407
> 
> 标签：python, bash

在 bash 终端上，我可以发出“Ctrl-Shift-T”来打开一个新的终端窗口。如何从我在 bash 终端上运行的 python 脚本执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:02:03.200

Ctrl-Shift-T 与 bash 完全无关，而是您使用的终端模拟器！

如果你想打开一个新窗口，你只需使用 subprocess 模块并执行终端命令（gnome-terminal、xterm 等）

但根据我的经验，Ctrl-Shift-T 打开的不是一个新窗口，而是当前窗口中的一个新选项卡。这有点棘手。但[这里有一个示例](https://stackoverflow.com/questions/1188959/open-a-new-tab-in-gnome-terminal-using-command-line)，您将如何在 bash 脚本中执行此操作。然而，这似乎可以在您的本地机器上运行。但这并没有给我带来良好的氛围。是否有另一种方法可以完成在其他机器上也更安全的任务？在那种情况下，我会推荐它。

我将链接到的 bash 脚本重写为 Python 脚本。只需确保您已安装工具 xprop、xdotool 和 wmctrl。

```
import subprocess

wid = None
xprop_out = subprocess.check_output(['xprop', '-root'])

for line in xprop_out.splitlines():
    if '_NET_ACTIVE_WINDOW(WINDOW)' in line:
        wid = line.split()[-1]

if wid:
    subprocess.check_call(['xdotool', 'windowfocus', wid])
    subprocess.check_call(['xdotool', 'key', 'ctrl+shift+t'])
    subprocess.check_call(['wmctrl', '-i', '-a', wid])
else:
    print 'Failed to find window ID' 
```

# android - 在 android 中使用 SOAP 将 SAX 或 DOM 应用于 Xml？

> ID：14978017
> 
> 赞同：0
> 
> 时间：2013-02-20T10:51:39.173
> 
> 标签：android

我需要一些关于 android 中的 SOAP 服务的帮助。我一直在解析使用 Php 创建的 xml 数据。但是我对解析使用 .net 服务创建的 xml 是全新的。我正在使用 Soap Library。我们是否将数据（xml）作为一个字符串。我的问题是我可以对我在soap服务中得到的响应应用SAX或DOM解析器吗？有人可以给我一些关于soapservices教程的链接并解析数据/从webservice中获取数据。或者是否我需要使用子字符串来获取数据吗？这是我的 xml 文件的一部分：我将有多个 .

```
<DataSet>
<xs:schema id="NewDataSet">
<xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true"><xs:complexType><xs:choice minOccurs="0" maxOccurs="unbounded"><xs:element name="ProfileData">
.
.
.
.
.
</xs:complexType>
</xs:element>
</xs:schema>
<diffgr:diffgram>
<NewDataSet>
<ProfileData diffgr:id="ProfileData1" msdata:rowOrder="0">
<ProfileID>170</ProfileID>
<MerchantID>59</MerchantID>
</ProfileData>
<IPhoneData diffgr:id="IPhoneData1" msdata:rowOrder="0">
<Value>38813</Value>
<Amount>-0.02</Amount>
<ApprovalCode/>
<Status>a</Status>
<DueDate>2013-02-18T09:36:00.133-05:00</DueDate><InsertedOn>2013-02-19T04:27:39.03-05:00</InsertedOn>
<Type>2</Type>
</IPhoneData>
<IPhoneData diffgr:id="IPhoneData2" msdata:rowOrder="2">
<Value>38813</Value>
<Amount>-0.02</Amount>
<ApprovalCode/>
<Status>a</Status>
<DueDate>2013-02-18T09:36:00.133-05:00</DueDate><InsertedOn>2013-02-19T04:27:39.03-05:00</InsertedOn>
<Type>2</Type>
</IPhoneData> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:01:09.860

在这里您正在读取数据，因此您应该只使用 SAX 解析器。DOM 通常用于读取/写入 XML 文件。见差异。[这边](http://allu.wordpress.com/2006/12/28/difference-between-sax-and-dom-parsers/)。_

[您可以在此处](http://developer.android.com/reference/javax/xml/parsers/SAXParser.html)找到更多信息。

# java - Eclipse - 如何在不单击/更改主视图的情况下知道我在哪个工作区工作

> ID：14978020
> 
> 赞同：28
> 
> 时间：2013-02-20T10:51:50.997
> 
> 标签：java, windows, eclipse, eclipse-plugin

目前在一个项目的 4 个不同的分支上工作。

对于每个分支，Eclipse 中都有不同的工作区。

问题是当我在不同的工作空间上打开多个 Eclipse 时，我很难区分它们并理解当前查看的是哪个工作空间。（路径相同，因此所有分支上的窗口名称都相同

我可以选择这样做：

`File->Switch Workspace->Other...`

它将显示当前工作区的名称，但我正在寻找一种方法让它出现在我的主显示窗口中，所以我不需要每天执行 100 次此操作

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-23T06:53:04.430

如果完整路径（如另一个答案所示）太长，那么您可以改用`Window -> Preferences -> General -> Workspace -> Workspace Name`为每个工作区设置自定义标签，然后在标题栏中突出显示。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-20T10:56:24.517

尝试添加选项

> -演出地点

在 eclipse.ini 或启动 Eclipse 时的命令行中。

工作区位置将出现在窗口标题栏中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-06T10:16:29.270

转到 Eclipse，窗口 -> 首选项 -> 常规 -> 工作区 -> 选中“在窗口标题中显示工作区路径”复选框

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T11:03:32.083

编辑：只需右键单击项目，然后转到属性，它将显示您的项目所在的完整路径。此外，如果您有 Juno，搜索“工作区”转到“工作区名称（显示在 Windows 标题中）并添加类似“工作区 1”的文本，它会显示您在任务栏上工作的工作区

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-19T06:41:36.310

添加`-showlocation`到`eclipse.ini`位于 eclipse 文件夹内的文件或添加如下屏幕截图的快捷方式（右键单击 eclicpse 图标 - 转到快捷方式选项卡，添加`-showlocation`到目标字段）

![在此处输入图像描述](../Images/060debc3adae17e1766a6b9416ae9943.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-28T13:06:08.590

您可以使用

> 窗口 -> 首选项 -> 常规 -> 工作区 -> 工作区名称

或从工具栏

> 文件-> 切换工作区-> 其他

**无论该弹出窗口中显示的路径是什么，这都是您当前的路径。**

正如@samuel 所说，您可以添加

> -演出地点

在你的**eclipse.ini**中

# java - 使用应用程序上下文设置春季电子邮件

> ID：14978026
> 
> 赞同：1
> 
> 时间：2013-02-20T10:52:18.373
> 
> 标签：java, spring, annotations, jakarta-mail

我希望我的应用程序能够按需发送电子邮件。我目前正在使用来自[www.mykong.com](http://www.mkyong.com/spring/spring-sending-e-mail-via-gmail-smtp-server-with-mailsender/)的教程，其中详细介绍了设置 gmail 设置。

但是，我无法将配置设置放入带注释的弹簧控制器中：我想避免使用以下内容：

```
ApplicationContext context = new FileSystemXmlApplicationContext(email-context.xml");
MailMail mm = (MailMail) context.getBean("mailMail");
mm.send(message); 
```

从我的调查来看，这似乎相当不受欢迎。我尝试了几件事，但似乎都没有找到正确的 bean 并产生空指针异常。有没有办法可以将它添加到任何必要的控制器中，例如`@Property(mailMail)`或`@Autowired private mailMail`？还是我应该将设置从我的电子邮件上下文移动到 java 本身？

我的文件如下：

**电子邮件发件人.java**

```
public class EmailSender {

@Autowired
private MailSender mailSender;

public void sendMail(String subject, String msg) {

    SimpleMailMessage message = new SimpleMailMessage();

    message.setFrom("beesden@*.com");
    message.setTo("beesden@*.com");
    message.setSubject(subject);
    message.setText(msg);
    mailSender.send(message);   
    }
} 
```

**页面控制器**

```
@RequestMapping(value = { "/{name}" }, method = RequestMethod.GET)
public String showPage(@PathVariable("name") String name, HttpServletRequest request, Model model) {
    logger.debug("Page request: " + name);      
    mm.sendMail("Hi","Test");       
    return "webpage";
} 
```

**电子邮件上下文.xml**

```
<bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
    <property name="host" value="smtp.gmail.com" />
    <property name="port" value="587" />
    <property name="username" value="toby@gmail.com" />
    <property name="password" value="tobytobytoby" />

    <property name="javaMailProperties">
       <props>
              <prop key="mail.smtp.auth">true</prop>
              <prop key="mail.smtp.starttls.enable">true</prop>
           </props>
    </property>
</bean>

<bean id="mailMail" class="org.system.EmailSender">
    <property name="mailSender" ref="mailSender" />
</bean> 
```

*（注意我在这里更改了用户名和密码，它们在系统中是正确的......）*

非常感谢

# java - 格式优于串联的优点

> ID：14978029
> 
> 赞同：1
> 
> 时间：2013-02-20T10:52:22.713
> 
> 标签：java, concatenation, string-formatting

我正在使用 Java，我想知道使用格式是否比简单连接有任何优势。

我会像这样的格式： `a = String.format("%s/hi", b);`

或像这样： `a = (b + "/hi");`

使用其中一种是否有任何优势（除了清洁度）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:55:53.660

使用`String.format`over是更好的做法`String.concat`。

`String.format()`不仅仅是连接字符串。例如，您可以使用`String.format()`.

但是，如果您不关心本地化，从功能上讲，没有区别。也许一个比另一个快，但在大多数情况下，它可以忽略不计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:56:06.987

下一行将只创建一个字符串，

```
a = String.format("%s/hi", b); 
```

在以下行中创建了多个字符串

```
a = (b + "/hi"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T10:59:31.267

如果需要，Format 可以处理相当复杂的模式和格式。除了在大循环中使用的代码之外，我个人会考虑任何感知到的“性能”优势的可读性。谁在乎你的方法是否创建了几个对象，这些对象很快就会被垃圾收集起来？

# javascript - 删除和创建 VS 搜索和更新 Jquery

> ID：14978037
> 
> 赞同：0
> 
> 时间：2013-02-20T10:52:49.343
> 
> 标签：javascript, jquery, html, performance

1.  假设我有[**这个 HTML 模型**](http://jsbin.com/udoxuv/3)。
2.  假设我需要定期更新信息（Value header），1s。应该对模型中的每个表都这样做。我通过 websocket 以 JSON 格式获取数据。

**问题**是：更新表中数据的最佳方法是什么？删除内容并创建新的 DOM 元素或搜索 DOM 元素并更新它们的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:50:45.317

最快的方法是在 js 中保留对 DOM 元素的引用 - 使用

`tableRefs[row][col]=document.createElement('td');`

并保留对它的引用。然后只需通过更新

```
tableRefs[row][col].innerHTML='yourDataHere'; 
```

除非您计划在古老/低性能设备上运行并且您的数据大约为 100 行，否则我不会担心性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T07:35:47.030

我最终通过 jquery 进行选择器访问。[**我更新了 HTML 模型**](http://jsbin.com/udoxuv/12/edit)，因为我忘了提到我可以通过类选择器轻松识别我必须更新的值。我之前有这个类选择器，但后来简化了模型以在这里提出问题。[**性能测试**](http://jsperf.com/testing-remove-create-vs-searching-update/4)在这里完成。**虽然[这个](https://stackoverflow.com/a/14979177/2064818)答案不适用于我的情况是完全有效的。**

更新值的有效代码是：

```
$('.values').each(function() {
  if ($(this).html() != "&nbsp;") {
    $(this).text("UP1");
  }
}); 
```

您还可以将 jquery 查找范围缩小到特定表（来自 HTML 模型的示例表）：

```
$('#tableWrap_group_1 .values').each(function() {
  if ($(this).html() != "&nbsp;") {
    $(this).text("UP1");
  }
}); 
```

# c# - 如何从 LIST 中删除对象

> ID：14978042
> 
> 赞同：-2
> 
> 时间：2013-02-20T10:53:06.310
> 
> 标签：c#, c#-4.0

我的清单是

```
 public List<BaseHomePage.QueueListItem> QueueDataSource
         {
          get { return this._queueDataSource; }
          set { this._queueDataSource = value; }
         } 
```

我想从列表中删除对象，我的代码是

```
 for (int i = 0; i < _queueDataSource.Count; i++)
        {
            object queue = _queueDataSource[i];

            if (objQuery.BranchOutQueue)
            {
                this._queueDataSource.Remove(queue); //Here I want to getting erroe

            } 
```

> 错误：匹配的最佳重载方法`system.collections.Generic.List<baseHomePage.QueueListItem>.Remove(BaseHome.QueueList)`有一些无效参数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:55:14.390

代替

```
object queue = _queueDataSource[i]; 
```

和

```
var queue = _queueDataSource[i]; 
```

甚至

```
BaseHomePage.QueueListItem queue = _queueDataSource[i]; 
```

目前您正在丢弃`queue`属于特定类型项目的信息，但您只能从列表中删除该特定类型的项目。

# bash - bash：从掩码列表中复制文件的最后一个版本

> ID：14978043
> 
> 赞同：1
> 
> 时间：2013-02-20T10:53:06.057
> 
> 标签：bash, list, loops, for-loop, mask

源文件夹中有一组程序，但只有最新版本必须复制到目标 USB 驱动器。

从[Bash Script - Copy the latest version of a directory in a directory recursively](https://stackoverflow.com/questions/11174207/bash-script-copy-latest-version-of-a-file-in-a-directory-recursively)，它表明我的公式是：

```
f=$(find . -name AdbeRdr\*.exe | sort -n | tail -1) 
```

那么如何在一组掩码上的 for 循环中进行 find 工作呢？

```
set1="AdbeRdr\*.exe jre-\*.exe LibreOffice\*.msi"
for m in $set1
do
    echo "m: $m"
    f=$(find . -name $m | sort -n | tail -1)
    echo "f: $f"
    cp $f /media/USB
done 
```

`$m`输出正确的值（AdbeRdr*.exe 等），`$f`为空并`cp`复制整个父目录。如果我在没有变量 ( ) 的情况下明确指定掩码`find . -name AdbeRdr\*.exe | sort -n | tail -1`，则正确输出最后一个文件。

我哪里错了？如果文件名中出现空格，我该如何处理？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:15:09.117

使用数组而不是字符串来保存元素，如下所示：

```
set1=( 'AdbeRdr*.exe' 'jre-*.exe' 'LibreOffice*.msi' )
for m in "${set1[@]}"
do
    echo "m: $m"
    f=$(find . -name "$m" | sort -n | tail -1)
    echo "f: $f"
    cp "$f" /media/USB
done 
```

在变量周围使用双引号来处理文件名中的空格。

# php - 将 PHP 数组编码为 JSON 格式的数据时数据丢失

> ID：14978050
> 
> 赞同：0
> 
> 时间：2013-02-20T10:53:31.507
> 
> 标签：php, json

我有一些数据存储在 MySQL 表中，我使用 PDO 将其取出。该函数将查询结果放入一个数组中，并且所有字段都存在：

```
 Array ( 
    [0] => Array ( [id] => 1 [nome] => Oggetto 1 [descr] => Questa è la favolosa descrizione dell'oggetto 1 [prezzo] => 50.00 [imgpath] => dummy.jpg [url] => http://localhost/ [cat] => 1 [avail] => 1 ) 
    [1] => Array ( [id] => 2 [nome] => Oggetto 2 [descr] => Questa è la favolosa descrizione dell'oggetto 2 [prezzo] => 45.00 [imgpath] => dummy.jpg [url] => http://localhost/ [cat] => 1 [avail] => 1 ) 
    [2] => Array ( [id] => 3 [nome] => Oggetto 3 [descr] => Questa è la meravigliosa descrizione dell'oggetto 3 [prezzo] => 120.00 [imgpath] => dummy.jpg [url] => http://localhost/ [cat] => 3 [avail] => 1 ) 
    [3] => Array ( [id] => 4 [nome] => Oggetto 4 [descr] => Questa è la meravigliosa descrizione dell'oggetto 4 [prezzo] => 200.00 [imgpath] => dummy.jpg [url] => http://localhost [cat] => 2 [avail] => 1 ) 
    [4] => Array ( [id] => 5 [nome] => Oggetto 5 [descr] => Questa è la fantasiosa descrizione dell'oggetto 5 [prezzo] => [imgpath] => dummy.jpg [url] => http://locahost [cat] => 4 [avail] => 1 ) ) 
```

问题是我需要一个 json 格式的数据响应，所以我使用该`json_encode`函数将 PHP 数组转换为 JSON 格式的数据，但是正如您从以下输出中看到的那样，该字段`descr`已经丢失，我不知道为什么：

```
 [
      {"id":"1","nome":"Oggetto 1","descr":null,"prezzo":"50.00","imgpath":"dummy.jpg","url":"http:\/\/localhost\/","cat":"1","avail":"1"},
      {"id":"2","nome":"Oggetto 2","descr":null,"prezzo":"45.00","imgpath":"dummy.jpg","url":"http:\/\/localhost\/","cat":"1","avail":"1"},
      {"id":"3","nome":"Oggetto 3","descr":null,"prezzo":"120.00","imgpath":"dummy.jpg","url":"http:\/\/localhost\/","cat":"3","avail":"1"},
      {"id":"4","nome":"Oggetto 4","descr":null,"prezzo":"200.00","imgpath":"dummy.jpg","url":"http:\/\/localhost","cat":"2","avail":"1"},
      {"id":"5","nome":"Oggetto 5","descr":null,"prezzo":null,"imgpath":"dummy.jpg","url":"http:\/\/locahost","cat":"4","avail":"1"}
    ] 
```

这可能是因为我`desc`在表格中声明了 as 文本字段吗？如果是这样，我如何确保从 PHP 数组传递到 JSON 格式数据时该字段中的数据不会丢失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:04:48.163

因为 [descr] 字符串包含扩展字符，您可能需要使用 PHP 的*htmlentities*函数对其进行编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:13:01.950

检查您的`descr`字段值，该字符`è`在 JSON 中不是可执行字符，因此`htmlentities($_POST[descr])`在获取数组结果之前使用。

**前任：**

```
<?php
    $a = htmlentities("Questa è la favolosa descrizione dell'oggetto 1");
    $arr = array('a' => $a);

    echo json_encode($arr);
?> 
```

**结果是，**

```
{"a":"Questa è la favolosa descrizione dell'oggetto 1"} 
```

[http://codepad.org/M2P8mnR8](http://codepad.org/M2P8mnR8)

**注意：** 您可以使用 UTF8 使用 MYSQL 本身对这些字符进行编码

# java - 只有创建视图层次结构的原始线程才能接触其视图。在安卓上

> ID：14978052
> 
> 赞同：23
> 
> 时间：2013-02-20T10:53:36.050
> 
> 标签：java, android, error-handling

我只是一个初学者，所以请原谅我问了一个可能很愚蠢的问题

* * *

我不明白只有创建视图层次结构的原始线程才能触及其视图的含义。

请有人教我为什么会发生此错误以及如何解决此问题。

谢谢你

这是我的课

```
public class MainActivity extends Activity {
    TextView title;
    Random   random  = new Random();
    int      counter = 1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.startup);
        startingUp();
    }

    private void startingUp() {
        Thread timer = new Thread() { //new thread         
            public void run() {
                Boolean b = true;
                try {
                    do {
                        counter++;
                        title();
                        sleep(1000);
                        title.clearComposingText();

                    }
                    while (b == true);
                } catch (IntruptedException e) {
                    e.printStackTrace();
                }
                finally {
                }
            };
        };
        timer.start();
    }

    public void title() {
        title = (TextView) findViewById(R.id.tvTitle);
        switch (random.nextInt(2)) {
            case 0:
                title.setGravity(Gravity.RIGHT);
                break;
            case 1:
                title.setGravity(Gravity.CENTER);
                break;
            case 2:
                title.setGravity(Gravity.LEFT);
                break;
        }
        title.setTextColor(Color.rgb(random.nextInt(250), random.nextInt(250), random.nextInt(250)));
        title.setTextSize(random.nextInt(55) + 10);
    }
} 
```

这是我的 LogCat

```
02-20 10:53:19.293: I/Adreno200-EGLSUB(5816): <ConfigWindowMatch:2078>: Format RGBA_8888.
02-20 10:53:19.303: D/memalloc(5816): /dev/pmem: Mapped buffer base:0x5c914000 size:14135296 offset:10366976 fd:64
02-20 10:53:19.303: E/(5816): Can't open file for reading
02-20 10:53:19.303: E/(5816): Can't open file for reading
02-20 10:53:19.303: D/OpenGLRenderer(5816): Enabling debug mode 0
02-20 10:53:19.373: D/memalloc(5816): /dev/pmem: Mapped buffer base:0x5db58000 size:3768320 offset:0 fd:67
02-20 10:53:20.143: W/dalvikvm(5816): threadid=11: thread exiting with uncaught exception (group=0x40abc210)
02-20 10:53:20.143: E/AndroidRuntime(5816): FATAL EXCEPTION: Thread-3102
02-20 10:53:20.143: E/AndroidRuntime(5816): android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
02-20 10:53:20.143: E/AndroidRuntime(5816):     at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4039)
02-20 10:53:20.143: E/AndroidRuntime(5816):     at android.view.ViewRootImpl.invalidateChild(ViewRootImpl.java:722)
02-20 10:53:20.143: E/AndroidRuntime(5816):     at android.view.ViewRootImpl.invalidateChildInParent(ViewRootImpl.java:771)
02-20 10:53:20.143: E/AndroidRuntime(5816):     at android.view.ViewGroup.invalidateChild(ViewGroup.java:4112)
02-20 10:53:20.143: E/AndroidRuntime(5816):     at android.view.View.invalidate(View.java:8639)
02-20 10:53:20.143: E/AndroidRuntime(5816):     at android.view.View.invalidate(View.java:8590)
02-20 10:53:20.143: E/AndroidRuntime(5816):     at android.widget.TextView.setGravity(TextView.java:2538)
02-20 10:53:20.143: E/AndroidRuntime(5816):     at com.example.saikoro.MainActivity.title(MainActivity.java:58)
02-20 10:53:20.143: E/AndroidRuntime(5816):     at com.example.saikoro.MainActivity$1.run(MainActivity.java:36) 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-20T11:04:22.080

把你`startingUp()`改成这个。

```
 private void startingUp() {
    Thread timer = new Thread() { //new thread         
        public void run() {
            Boolean b = true;
            try {
                do {
                    counter++;
                    title();
                    sleep(1000);

                    runOnUiThread(new Runnable() {  
                    @Override
                    public void run() {
                        // TODO Auto-generated method stub

                        title.clearComposingText();
                    }
                });

                }
                while (b == true);
            } catch (IntruptedException e) {
                e.printStackTrace();
            }
            finally {
            }
        };
    };
    timer.start();
} 
```

***您不能从非 UI 线程修改视图。***

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-10T10:26:01.183

由于**title.clearComposingText()，不会出现此异常。** 即使这条线没有用，我们可以删除这条线。**由于非 UI 线程正在尝试修改视图，**因此该异常进入title() 函数。 所以我们需要在***UI Thread 或 Handler 中调用这个函数。***

```
private void startingUp() {
        Thread timer = new Thread() { //new thread         
            public void run() {
                boolean b = true;
                try {
                    do {
                        counter++;

                        sleep(1000);
                        runOnUiThread(new Runnable() {

                            @Override
                            public void run() {
                                  title();
                                //title.clearComposingText();//not useful

                            }
                        });

                    }
                    while (b == true);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                finally {
                }
            };
        };
        timer.start();
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T11:01:35.043

[您不应该从 UI 线程以外的线程更新 textView。您可以为此](http://developer.android.com/reference/android/os/AsyncTask.html)使用 asynctask。可以参考

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-20T10:59:59.657

您不能`title.clearComposingText();`在线程内部修改文本，因为您只能从 UI 线程修改视图。改用处理程序并让他更改文本。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-20T11:05:21.660

正如其他人已经说过的，您不能从后台线程修改 UI。

您可以使用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)，或使用[`Activity.runOnUiThread()`](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)方法

# jquery - 通过类 JQuery 用鼠标更改背景颜色

> ID：14978053
> 
> 赞同：0
> 
> 时间：2013-02-20T10:53:40.567
> 
> 标签：jquery

我已经给一组 div 上课，并希望在鼠标悬停时更改 div 的背景颜色。我所做的是：
**HTML**

```
<div class="menu_top">
<div id="1" class="menu_top_menu">Home</div> 
<div id="2" class="menu_top_menu">About Us</div> 
<div id="3" class="menu_top_menu">Register</div> 
<div id="4" class="menu_top_menu">Contact Us</div> 
</div> 
```

**jQuery**

```
$(document).ready(function() {
    $('.menu_top_menu').mouseover(function(){
    $('this').attr('style','background-color:yellow;');
    });
}); 
```

这确实适用于 ID 参考，但我想使用类。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T10:54:55.780

使用`$(this)`而不是`$('this')`- 周围没有引号`this`。

此外，您通常不会使用`attr()`来设置`style`，而是使用该[`.css()`方法](http://api.jquery.com/css/)来设置相关的特定 CSS 属性：

```
$(this).css('background-color', 'yellow'); 
```

请注意，如果打算仅在鼠标悬停在元素上时更改背景（即，在鼠标移出时将其更改回），您可以通过使用`:hover`CSS 中的伪类轻松地在没有 JS 的情况下完成它：

```
div.menu_top_menu:hover {
    background-color : yellow;
} 
```

# asp.net - 如何在asp.net c#中将日期字符串“dd/MM/yyyy”格式转换为“MM/dd/yyyy”？

> ID：14978054
> 
> 赞同：6
> 
> 时间：2013-02-20T10:53:40.460
> 
> 标签：asp.net

我想在 c# 示例中将字符串日期格式“dd/MM/yyyy”转换为“MM/dd/yyyy”

```
 string d ="25/02/2012";  i want to convert into 02/25/2012 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-20T10:55:21.593

您可以将其解析为`DateTime`对象`DateTime.ParseExact`，然后使用`ToString(`“MM/dd/yyyy”) `to display the`DateTime` 对象之类的。

```
string d ="25/02/2012";
DateTime dt = DateTime.ParseExact(d, "d/M/yyyy", CultureInfo.InvariantCulture);
// for both "1/1/2000" or "25/1/2000" formats
string newString = dt.ToString("MM/dd/yyyy"); 
```

确保包括`using System.Globalization;`在顶部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T11:11:10.397

```
DateTime dt = new DateTime(2008, 3, 9, 16, 5, 7, 123);
String.Format("{0:y yy yyy yyyy}", dt);  // "8 08 008 2008"   year
String.Format("{0:M MM MMM MMMM}", dt);  // "3 03 Mar March"  month
String.Format("{0:d dd ddd dddd}", dt);  // "9 09 Sun Sunday" day
String.Format("{0:h hh H HH}",     dt);  // "4 04 16 16"      hour 12/24
String.Format("{0:m mm}",          dt);  // "5 05"            minute
String.Format("{0:s ss}",          dt);  // "7 07"            second
String.Format("{0:f ff fff ffff}", dt);  // "1 12 123 1230"   sec.fraction
String.Format("{0:F FF FFF FFFF}", dt);  // "1 12 123 123"    without zeroes
String.Format("{0:t tt}",          dt);  // "P PM"            A.M. or P.M.
String.Format("{0:z zz zzz}",      dt);  // "-6 -06 -06:00"   time zone
String.Format("{0:M/d/yyyy}", dt);            // "3/9/2008"
String.Format("{0:MM/dd/yyyy}", dt);          // "03/09/2008"
String.Format("{0:ddd, MMM d, yyyy}", dt);    // "Sun, Mar 9, 2008"
String.Format("{0:dddd, MMMM d, yyyy}", dt);  // "Sunday, March 9, 2008"
String.Format("{0:MM/dd/yy}", dt);            // "03/09/08"
String.Format("{0:MM/dd/yyyy}", dt);          // "03/09/2008" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-16T13:36:43.763

尝试这个：

```
string d ="25/02/2012";  
DateTime dtReturn = DateTime.MinValue;

DateTime.TryParseExact(d , "dd/MM/yyyy", dateFormat,
DateTimeStyles.AllowWhiteSpaces, out dtReturn) 
```

将返回“2/25/2012 12:00:00 AM”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-23T09:09:45.583

```
DateTime dt = DateTime.ParseExact(your string date, "d/M/yyyy",
                                  CultureInfo.InvariantCulture);
// for both "1/1/2000" or "25/1/2000" formats
string ndt = dt.ToString("MM/dd/yyyy"); 
```

也使用这个命名空间：`using System.Globalization;`

# ios - 如何正确保存 iOS 应用程序状态？

> ID：14978056
> 
> 赞同：3
> 
> 时间：2013-02-20T10:53:44.720
> 
> 标签：ios, objective-c, cocoa-touch

我正在开发一个能够在后台播放音乐的音乐播放器应用程序。只要音乐正在播放，应用程序就不会被终止，但如果播放停止并且应用程序处于后台，它可能会被终止。为了让应用程序对用户更加友好，我想在应用程序被系统终止时保存播放队列和状态，因此我在应用程序委托中实现了以下几行：

```
- (BOOL)application:(UIApplication *)application shouldSaveApplicationState:(NSCoder *)coder
{
    /*
     Archive the current queue controller to be able to continue the playback like the app never has been terminated
     when user is launching it again.
     */
    SMKQueueController *queueController = [[UIApplication sharedApplication] queueController];
    [coder encodeObject:queueController forKey:@"queueController"];
    return YES;
}

- (BOOL)application:(UIApplication *)application shouldRestoreApplicationState:(NSCoder *)coder
{
    /*
     Restore the recently used queue controller to be able to continue the playback like the app never has been
     terminated when use is launching it again.
     */
    SMKQueueController *queueController = [coder decodeObjectForKey:@"queueController"];
    [[UIApplication sharedApplication] setQueueController:queueController];
    return YES;
} 
```

有时（尤其是当我通过双击主页按钮菜单手动杀死它时）它会像我预期的那样工作。但有时，当应用程序被终止时，不会调用此方法。

所以我的问题是：**我是否误解了这些方法的工作原理或它们的用途？或者有没有更好的地方来实现这样的功能？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T00:42:39.403

我参加了一个 WWDC 2012 会议，确切地描述了应该如何做。如果您是注册的 Apple 开发人员，则可以访问会议中的视频。这篇文章的标题是“在 iOS 上保存和恢复应用程序状态”。我发现这是一个关于这个主题的内容非常丰富的会议。

# css - 样式表中htc文件的相对路径问题

> ID：14978058
> 
> 赞同：1
> 
> 时间：2013-02-20T10:53:49.213
> 
> 标签：css, styles, stylesheet

我有一个 style.css 文件，我在其中使用以下样式。

```
* {
*behavior: url('~boxsizing.htc'); 
```

}

这里 boxsizing.htc 位于项目目录中。当我使用这个 style.css 时，它不会调用这个文件。但是我也使用了以下代码

```
 * {
    *behavior: url('http://wwww.mysite.com/boxsizing.htc');
} 
```

我可以从 url [http://wwww.mysite.com/boxsizing.htc](http://wwww.mysite.com/boxsizing.htc)打开文件目录。请让我知道如何调用此文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-09T14:13:36.063

你现在可能已经找到了这个问题的答案，但是对于其他正在寻找它的人来说，你去吧......

HTC 文件的 URL 必须相对于您的 HTML(!) 文档，而不是相对于您的 CSS。

因此，请使用绝对路径，从站点根目录开始，如下所示：

如果这些是你的路径

```
htc file location: http://www.mysite.com/scripts/boxsizing.htc 
```

和

```
css location: http://www.mysite.com/css/style.css 
```

CSS中的链接是这样的：

```
* {
    box-sizing: border-box;
     *behavior: url(/scripts/boxsizing.htc);
} 
```

文档链接在这里： [https ://github.com/Schepp/box-sizing-polyfill](https://github.com/Schepp/box-sizing-polyfill)

# php - 在控制器或视图文件中获取当前操作

> ID：14978066
> 
> 赞同：-4
> 
> 时间：2013-02-20T10:54:03.007
> 
> 标签：php, laravel

在使用 Yii 时，我发现它确实提供了方便的方法来检索当前操作。该方法在 Laravel 中可用吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:17:29.703

利用

```
Request::route()->controller_action 
```

返回当前请求的`Request::route()`路由对象。您将在此对象中找到路由详细信息。如果它不是控制器路由而是关闭路由，那么`Request::route()->controller_action`将为空。

# iis - 在安装 Web 应用程序 IIS 期间添加脚本映射

> ID：14978072
> 
> 赞同：3
> 
> 时间：2013-02-20T10:54:33.853
> 
> 标签：iis, wix

有没有人成功地将 IIS 脚本映射添加到他们的 Wix 安装中。我一直在使用这个：

```
 <CustomAction Id="AddHandlers_Cmd" Property="AddHandlers" Value="&quot;[SystemFolder]inetsrv\appcmd&quot; set config -section:system.webServer/handlers /+&quot;[\[]name='GSOAP',path='*.dll', verb='*',modules='IsapiModule',scriptProcessor='[BIN]mod_gsoap.dll',resourceType='File', requireAccess='Execute'[\]]&quot;" Execute="immediate"/>
  <CustomAction Id="AddHandlers" BinaryKey="WixCA" DllEntry="CAQuietExec" Execute="deferred" Return="check" Impersonate="no"/> 
```

但是，我从我的 Web 应用程序中收到 404 错误，并且当我在安装应用程序后手动添加脚本映射时，它可以完美运行。如果有人能分享他们是如何做到这一点的，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:33:05.507

听起来您需要将处理程序映射添加到您的 Web 应用程序。如果是这种情况，那么您不需要自定义操作来完成此操作。

看看[WebApplicationExtension](http://wix.sourceforge.net/manual-wix3/iis_xsd_webapplicationextension.htm)元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:50:52.497

我们正在用 C# 编写一个单独的自定义操作，并在安装完成后将其调度以添加处理程序。

试试这个，你可以用你自己的自定义动作做任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:53:11.577

我没有使用 GSOAP 处理程序，但使用了 ASP.NET ISAPI 扩展。我想基本上它具有相同的集成水平。我将发布 ASP.NET 的代码，希望您将其更改为 GSOAP 不会有问题。我很可能会错误地更改某些内容并使示例对您无法使用，因此我让您做得更好。

如果不是，这是我注册扩展本身的代码

```
<Component Id="Iis6ConfigExtentions" Guid="{GuidHash({ProductId}-1822E4F3-5850-47D5-9281-D1E0E20C77D4)}" KeyPath="yes" Permanent="yes">
    <Condition><![CDATA[Installed OR (IISMAJORVERSION AND (IISMAJORVERSION = "#6"))]]></Condition>
    <iis:WebServiceExtension Id="ExtensionASP4" Group="ASP.NET v4.0.30319" Allow="yes" File="[FRAMEWORKROOT]v4.0.30319\aspnet_isapi.dll" Description="ASP.NET v4.0.30319"/>
</Component> 
```

并且要将它们添加到您需要使用 WebApplicationExtention 的具体站点，正如@Yan 已经提到的：

```
<iis:WebApplication Id="IIS6WebApp" Name="[SITE_APP_NAME]" WebAppPool="AppPool" >
  <iis:WebApplicationExtension Verbs="GET,HEAD,POST" CheckPath="no" Script="yes" Executable="[FRAMEWORKROOT]v4.0.30319\aspnet_isapi.dll" />
</iis:WebApplication> 
```

在`CheckPath="no"`IIS 6 上是必需的，因为我们使用 ASP.NET MVC，它不会将 url 映射到磁盘上的文件。您可能也需要它，因为服务地址可能不会映射到物理文件。

**更新：**

看起来真的不可能直接在 WIX 中完成（至少在 3.5 版本中）。您正朝着正确的方向前进 - 使用 appcmd 进行自定义操作。但是提供的自定义操作不完整或您需要什么：第一个只是将属性值设置为您需要执行的命令，第二个调用一些未提供的 Dll 自定义操作。

我要尝试执行的是：

```
<CustomAction Id="AddGsoapHandler" Directory="TARGETDIR" Impersonate="no" Execute="deferred" Return="check" ExeCommand="[SystemFolder]inetsrv\appcmd.exe set config -section:system.webServer/handlers /+&quot;[\[]name='GSOAP',path='*.dll', verb='*',modules='IsapiModule',scriptProcessor='[BIN]mod_gsoap.dll',resourceType='File', requireAccess='Execute'[\]]&quot; /commit:apphost" /> 
```

请注意您的处理程序配置的**路径**属性。**它会将处理程序的使用限制为仅以“.dll”结尾的 URL** - 我只是从您的代码中复制了它，但不确定您是故意这样做还是只是从Microsoft 站点的[示例中复制。](http://technet.microsoft.com/en-us/library/cc753249%28v=ws.10%29.aspx)即使处理程序注册成功，这也可能导致 401 错误。

我还添加了`/commit:apphost`论点。不确定你是否真的需要这个，但我用它来明确指定我需要配置我的应用程序的配置。

**更新 2：**

如果您需要将配置设置为仅单个应用程序，则应将应用程序对象指定为 appcmd 的参数，而不是表示全局配置的 'config'。请试试这个：

```
<CustomAction Id="AddGsoapHandler" Directory="TARGETDIR" Impersonate="no" Execute="deferred" Return="check" ExeCommand="[SystemFolder]inetsrv\appcmd.exe set app "MySite/app1" -section:system.webServer/handlers /+&quot;[\[]name='GSOAP',path='*.dll', verb='*',modules='IsapiModule',scriptProcessor='[BIN]mod_gsoap.dll',resourceType='File', requireAccess='Execute'[\]]&quot; /commit:apphost" /> 
```

有关更多详细信息，您可以阅读[本教程](http://www.iis.net/learn/get-started/getting-started-with-iis/getting-started-with-appcmdexe)。

# php - 未定义索引：第 321 行 [...]\joomla\user\authentication.php 中的用户名

> ID：14978073
> 
> 赞同：0
> 
> 时间：2013-02-20T10:54:35.353
> 
> 标签：php, authentication, joomla, login

我是 Joomla 的新手，想了解 Joomla！API 有效。

我在连接到另一个 joomla 站点调用 APITEST 的外部文件中有这段代码

基本上，我已经创建了一个具有 username:`demo`和 password的用户`demo12`。我想使用课堂上的`login()`方法`JApplication`。

```
<?php
define( '_JEXEC', 1 );
define( 'DS', DIRECTORY_SEPARATOR );
define( 'JPATH_BASE', dirname(__FILE__).DS."../apitest/");

require_once( JPATH_BASE . DS . 'includes' . DS . 'defines.php' );
require_once( JPATH_BASE . DS . 'includes' . DS . 'framework.php' );
require_once( JPATH_BASE . DS . 'libraries' . DS . 'joomla' . DS . 'factory.php' );

$user = JFactory::getApplication('site');

$credential = array('demo', 'demo12');
$remember = array(true);

print_r($user->login($credential, $remember));

?> 
```

但是它给了我这个错误信息：

```
Notice: Undefined index: username in C:\xampp\htdocs\apitest\libraries\joomla\user\authentication.php on line 321

Notice: Undefined index: username in C:\xampp\htdocs\apitest\libraries\joomla\user\authentication.php on line 326

Notice: Undefined index: password in C:\xampp\htdocs\apitest\libraries\joomla\user\authentication.php on line 331 
```

我希望结果返回 True。我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:58:18.760

Joomla 在关联数组中查找用户名和密码，而不是数字键数组，这就是您所拥有的。

改成：

```
$credential = array('username' => 'demo', 'password' => 'demo12'); 
```

# android - 如何从自定义列表中获取父活动的点击视图

> ID：14978075
> 
> 赞同：0
> 
> 时间：2013-02-20T10:54:39.690
> 
> 标签：android, android-arrayadapter

我有一个带有自定义数组适配器的自定义列表视图。我的问题是在单击编辑图像时，我需要在编辑文本上使用相关文本。我搜索了很多，但我无法得到解决方案。

我的代码是：

```
public class SimpleAdapter1 extends ArrayAdapter<Data> implements OnClickListener {

private ArrayList<Data> items;
Context context;
TextView tv1;
ImageView edit;
ImageView delete;

public SimpleAdapter1(Context context, int textViewResourceId,
        List<Data> catDesc) {
    super(context, textViewResourceId, catDesc);
    this.items = (ArrayList<Data>) catDesc;
    this.context = context;     
    System.out.println(items);
}

@Override
public View getView(final int position, View convertView, final ViewGroup parent) {
    View v = convertView;
    if (v == null) {
        LayoutInflater vi = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.masterlist, null);
    }
    Data dt = items.get(position);
    if (dt != null) {
        tv1 = (TextView) v.findViewById(R.id.mastext1);
        if (tv1 != null) {
            tv1.setText(dt.getDesc());
        }
    }
    });
    tv1.setOnClickListener(this);       
    edit = (ImageView) v.findViewById(R.id.editImage);
    delete = (ImageView) v.findViewById(R.id.deleteImage);
    edit.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

        }
    });
    delete.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            Toast.makeText(context,
                    items.get(position).getDesc() + " delete",
                    Toast.LENGTH_SHORT).show();
        }
    });
    return v;
}

public void onClick(View v) {
    switch (v.getId()) {
    case R.id.mastext1:         
        break;  
    }

}
} 
```

![这是图像](../Images/0de39b150dd834850f06c8941fc3df3e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:02:07.957

在您的 SampleAdapter 中添加：

```
private DeleteClickListener mDeleteClickListener;

public void setOnDeleteClickListener(DeleteClickListener deleteClickListener) {
    mDeleteClickListener = deleteClickListener;
}

public static interface DeleteClickListener {
    public void onDelete(int id);
} 
```

然后从您的活动中`implements` `DeleteClickListener`调用 this `myAdapter.setOnDeleteClickListener(this);`。现在在你`getView()`这样做：

```
 delete.setOnClickListener(new OnClickListener() {

    public void onClick(View arg0) {
        if(mDeleteClickListener!=null){
             mDeleteClickListener.onDelete(position);
        }
    }
}); 
```

PS：编辑按钮的步骤相同。

# c# - 使用 Linq 选择数据时调用随机数生成方法

> ID：14978081
> 
> 赞同：0
> 
> 时间：2013-02-20T10:54:52.763
> 
> 标签：c#, linq

我正在查询对象列表。

其中一些对象具有可能具有空值的属性 startTime。

对于这些情况，我想生成一个随机数。对于其他情况，我想获得当前时间和相应的项目开始时间之间的差异

```
var data =  List.Select(e => new myCustomItem 
                             {
                                Item = e,
                                TimeDistance = (e.StartTime.HasValue ? (e.StartTime.Value - DateTime.Now).TotalMinutes : RandomNumber(-5000, 5000))
                             })
                .OrderBy(e => e.TimeDistance)
                .ToList(); 
```

这是应该在每个具有空值的结果时调用的函数。

```
private int RandomNumber(int min, int max)
    {
        Random random = new Random();
        return random.Next(min, max);
    } 
```

问题是所有结果都接收到相同的值。

对于其他分配了 startDate（非空）的人，它正在执行计算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:02:09.813

如果我理解正确，你想要这样的东西：

```
var random = new Random();
var data =  List.Select(e => new myCustomItem 
{
    Item = e , 
    TimeDistance = (e.StartTime.HasValue ? 
         (e.StartTime.Value - DateTime.Now).TotalMinutes :
          Enumerable.Range(-5, 5).OrderBy(i => random.NextDouble()).ToList().First()) 
}).OrderBy(e => e.TimeDistance).ToList(); 
```

# ruby - 有效地获取枚举器的切片

> ID：14978084
> 
> 赞同：2
> 
> 时间：2013-02-20T10:54:57.313
> 
> 标签：ruby, enumerable

`Enumerator`我无法在合理的时间内获得无限的实例序列的一部分。我第一次尝试`drop`并`take`链接，但它永远挂起，因为`drop`试图返回无限`Array`。接下来，我切换了这些方法的顺序，但是在十万分之一的样本之后，我仍然需要等待大约十分钟才能获得 100 个值：

```
print exbioseq.drop(10**7).take(100) 
```

可以做些什么来更快地获得切片吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:39:53.653

An`Enumerator`是一个非常通用的接口，它只对它正在遍历的“集合”做出非常简单的假设。特别是，它实际上只支持两种操作：获取当前元素并迭代到下一个元素。

考虑到这两个操作，如果你想得到第 1000 万个元素，你只能做一件事：迭代 1000 万次。这需要时间。

没有“切片”这样的事情`Enumerator`。一个`Enumerator`枚举。就是这样。

现在，正如您所发现的，还有*另一个*问题：Ruby 的集合操作不是类型保留的。无论您调用什么类型的集合`map`或`select`或`take`或其他什么，它总是会返回相同的类型：完全实现的、具体的、严格`Array`的。这就是大多数语言中的大多数集合框架的工作方式，例如在 .NET 中，所有集合操作都返回`IEnumerable`. `Enumerable`这是因为这些方法中的大多数在mixin中只有一个通用实现。

Smalltalk 是一个例外，但还有另一个问题：每个集合类型的集合操作都是重复的。每种集合类型都有自己的几乎不明确的复制和粘贴实现`collect:`等`select:`。这种代码重复很难维护，并且给任何想要将自己的集合集成到框架中的人带来很大的*负担*。在 Ruby 中，这很容易：实现`each`、混合`Enumerable`，然后就完成了。

注意：从 Ruby 1.9 开始，实际上*有一些*重复：`Hash`实现自己的版本，`select`它实际上返回 a`Hash`而不是 a `Array`。所以，现在，不仅存在代码重复，而且接口中也存在不对称：`select`return`Array`的所有实现，除了 in 中的那个`Hash`。

Scala 2.8 集合框架是有史以来第一次有人想出如何在不重复代码的情况下提供类型保留的集合操作。但是 Ruby 的集合框架是在 Scala 2.8 之前 15 年设计的，因此它无法利用这些知识。

在 Ruby 2.0 中，有 lazy `Enumerator`s，所有的收集操作都返回另一个 lazy `Enumerator`。但这在这里对您没有帮助：唯一的区别是惰性`Enumerator`将延迟 1000 万次迭代，直到您真正`print`获得值为止。它仍然必须执行这 1000 万次迭代，因为根本没有其他办法。

如果要切片，则需要一个可切片的数据结构，例如`Array`.

# python - 如何使用 gdata api 在 Google 联系人中避免重复字段输入

> ID：14978087
> 
> 赞同：1
> 
> 时间：2013-02-20T10:55:05.473
> 
> 标签：python, gdata, gdata-api

我正在开发一个网络应用程序。它基本上通过 gdata 客户端更新谷歌联系人。我面临一个问题，即根据执行在联系人中创建重复字段。我正在使用下面的代码

```
contact_entry= self.gd_client.GetContact(contact_url)
contact_entry.website.append(gdata.contacts.data.Website(href='www.fb.com',label='Fb Profile')) 
```

当我运行 2 程序 2 次时。它将在我的谷歌联系人中创建 2 个 Fb 个人资料条目。如何覆盖而不是附加。

任何解决方案都非常受欢迎

# android - Android NDK：致命信号 11 + 包括标头

> ID：14978090
> 
> 赞同：0
> 
> 时间：2013-02-20T10:55:09.730
> 
> 标签：android, c++, android-ndk

我有一个关于 android ndk 的问题。由于这是我的第一个应用程序，我编写了一个等效的 C++ 应用程序并首先在我的计算机上运行它，以确保没有逻辑错误。我使用 g++-4.6 编译器。程序运行完美。因此，我开始编写 Android 同类产品，但遇到了一些问题。当我`ndk-build`在命令行中运行时，程序会编译。但是当我将程序侧加载到我的 android 上时，我收到了致命信号 11 (SIGSEGV) 错误。这是我的`Android.mk`文件

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_SRC_FILES := com_native_method.cpp file2.cpp file3.cpp
LOCAL_C_INCLUDES := header.h
LOCAL_MODULE := com_native_method
include $(BUILD_SHARED_LIBRARY) 
```

我通过 youtube 和在线论坛学习了 android 开发，并且我知道您必须使用等效类型（jint、jdouble 等）。但是当我在这种情况下运行 ndk-build 时，我注意到我收到错误告诉我`jint`并且`jdouble`没有在`file2.cpp`and中定义`file3.cpp`，所以我将它们改回 int、double，同时将 com_native_method.cpp 中的类型保留为 jdouble 和 jint . 我实在想不通问题所在。

感谢您的帮助，

谢谢，

交换

# c# - Stream Reader Readline 检测换行符

> ID：14978095
> 
> 赞同：0
> 
> 时间：2013-02-20T10:55:27.760
> 
> 标签：c#, string, streamreader

我正在尝试从日志文件中的每一行文本中删除任何“换行符”字符。

下面是我正在使用 Stream Reader 阅读的示例条目：-

```
<![LOG[Raising event:
[SMS_CodePage(850), SMS_LocaleID(2057)]
instance of SoftDistProgramStartedEvent
{
    AdvertisementId = "000216F6";
    ClientID = "GUID:B55C2757-CBAE-468E-B54F-46CAF2ECF68F";
    CommandLine = "\"C:\\WINNT\\system32\\cscript.exe\" /nologo Shutdown_Desktops_Overnight.vbs";
    DateTime = "20130211080211.784000+000";
    MachineName = "DWD*****";
    PackageName = "0000073C";
    ProcessID = 2516;
    ProgramName = "Shutdown Desktops Overnight";
    SiteCode = "S00";
    ThreadID = 3640;
    UserContext = "NT AUTHORITY\\SYSTEM";
    WorkingDirectory = "C:\\WINNT\\system32\\CCM\\Cache\\0000073C.1.System\\";
};
]LOG]!><time="08:02:11.800+000" date="02-11-2013" component="execmgr" context="" type="1" thread="3640" file="event.cpp:522"> 
```

在实际的日志文件中，这显示为文件中的一行，“换行符”替换为正方形。

我正在使用以下代码读取日志条目：-

```
using (StreamReader sr = new StreamReader(@"C:\Documents and Settings\riversd\Desktop\Logfile2.log"))
        {
            string Line;

            while ((Line = sr.ReadLine()) != null)
            {

            }
        } 
```

问题是，当 StreamReader 从 txt 文件中读取此条目时，它会在以下位置中断：-

```
"<![LOG[Raising event:" 
```

我需要即时删除此条目中的所有换行符。我不想将整个文件读入内存然后删除它们，我宁愿在阅读时处理每个日志。

是否可以？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-12-23T21:31:15.680

[由于StreamReader.ReadLine](https://msdn.microsoft.com/en-us/library/system.io.streamreader.readline(v=vs.110).aspx)的 MSDN 文档中的详细信息，对 Replace 的调用不起作用：

> 行定义为字符序列后跟换行符 ("\n")、回车符 ("\r") 或回车符后紧跟换行符 ("\r\n")。**返回的字符串不包含终止的回车符或换行符**。

因此，如果您要使用 StreamReader.ReadLine 读取输入，您可以使用 StringBuilder.Append（而不是 AppendLine）构建一个新字符串，因为 StreamReader.ReadLine 会隐式删除换行符。

```
var filePath = "text.txt";
StringBuilder sb = new StringBuilder();

using (StreamReader reader = new StreamReader(filePath))
{
    while (!reader.EndOfStream)
    {
        sb.Append(reader.ReadLine());
    }
}

File.WriteAllText(filePath, sb.ToString()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T10:58:13.540

```
sr.ReadLine().Replace(Environment.NewLine, String.Empty); 
```

**编辑：** 如果行尾不是`\r\n`，但`\n`您可以使用正则表达式：

```
Line = Regex.Replace(sr.ReadLine(), @"(\r\n|\n)", String.Empty); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-09T04:53:16.097

我不知道其他人是否有这个问题。这是我用来解决此问题的代码。

```
 using (System.IO.FileStream File = new System.IO.FileStream(e.FullPath, System.IO.FileMode.Open, System.IO.FileAccess.Read, System.IO.FileShare.ReadWrite))
            {
                using (System.IO.StreamReader Reader = new System.IO.StreamReader(File, Encoding.Default))
                {
                    String CompleteData = Reader.ReadToEnd();
                    foreach (String Line in CompleteData.Split(new char[] { (char)13 }, StringSplitOptions.RemoveEmptyEntries))
                    {
                        if (Line.Split(new String[] { Environment.NewLine }, StringSplitOptions.RemoveEmptyEntries)[0].Contains("Raising event"))
                        {
                             //Do Stuff
                        }
                    }
                    Reader.Close();
                }
                File.Close();
            } 
```

出于某种原因，我不得不这样做，因为仅使用 streamreader 会引发异常，说明该文件正在从另一个进程中使用。

它可能会在以后对其他人有所帮助..

# indexing - 如何创建文件夹/文件（pdfs）结构（基本文档结构/存储）的自动索引 html/php 文件

> ID：14978100
> 
> 赞同：0
> 
> 时间：2013-02-20T10:55:37.060
> 
> 标签：indexing, document, sitemap

我需要使我的网站的一部分成为一个基本的 pdf 文档存储，其中包含一个索引页来访问我上传的任何 pdf。有没有办法自动更新索引...即索引列出文件夹/树结构/站点地图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:11:58.693

如果您在 Apache/PHP 环境中，那么执行此操作的方法很少：

[Apache DirectoryIndex](http://httpd.apache.org/docs/2.2/mod/mod_dir.html)，也许使用[h5ai](http://larsjung.de/h5ai/)创建精美的索引。

使用 PHP[`glob`](http://www.php.net/manual/en/function.glob.php)函数读取文件系统并显示指向它们的链接。

# django - 刮无链接

> ID：14978101
> 
> 赞同：0
> 
> 时间：2013-02-20T10:55:39.550
> 
> 标签：django, web-scraping

我正在使用 django-dynamic-scraper aka DSS (django+scrapy) 学习 xpath 和网络抓取，并尝试使用以下代码从网站检索数据：

```
<tr valign="top">
    <td align="center" valign="top">
        <p><img src="someimage.jpg"></p>
    </td>
    <td>
    &nbsp;
    </td>
    <td>
        <div align="left">
            <span class="style1">
                <strong>Title1</strong>
            </span>
            <span class="style2">Title2:</span>ContentA<br />
            <span class="style2">Title3:</span>ContentB<br />
            <span class="style2">Title4:</span>ContentC<br />
        </div>
    </td>
</tr> 
```

我的问题：

*   `an URL object of DSS`如果该代码没有链接，xpath 是什么？
*   如果 first 没有类，检索图像文件的 xpath 是什么`<td>`？
*   如果跨度的类是，如何从 ContentA、ContentB 和 ContentC中检索*每个*`same`数据的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:30:33.733

> 如果该代码中没有链接，DSS 的 URL 对象的 xpath 是什么？

无法回答问题，能解释一下吗？

> 如果 first 没有类，检索图像文件的 xpath 是什么？

`//tr[1]/td[1]//img/@src`

> 如果跨度的类相同，如何从 ContentA、ContentB 和 ContentC 中检索每个数据的数据？

`//text()[preceding-sibling::span[@class="style2"]]`

# javascript - YUI 菜单更改页面内容而不是整个页面

> ID：14978110
> 
> 赞同：0
> 
> 时间：2013-02-20T10:56:12.500
> 
> 标签：javascript, yui

我将html页面分为：

```
<body>
    <div class="menu_container">
        <!-- added menu here -->
    </div>
    <div class="content">
        <!-- body content here -->
    </div>
</body> 
```

当我选择菜单项时，我想更改“内容”div 的内容。即取决于菜单项选择 div 内容应该改变，就像在 Tabviews 中发生的那样。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:14:20.467

最新版本的 YUI 包含了 Pjax 的概念，它使用 History 和 Ajax 来更新页面。它非常容易设置，并且可以让您的 URL 正常工作。查看用户指南：http: [//yuilibrary.com/yui/docs/pjax/](http://yuilibrary.com/yui/docs/pjax/)。

您只需将`yui3-pjax`类添加到更新页面的每个菜单、应用菜单插件、插入 Pjax 插件并让您的服务器返回正确的 HTML 内容。

```
<div id="menu-1" class="yui3-menu">
  <div class="yui3-menu-content">
    <ul>
      <li class="yui3-menuitem">
        <a class="yui3-menuitem-content yui3-pjax" href="/some-page.html">Some page</a>
      </li>
    </ul>
  </div>
</div>
<div id="content">
  <!-- here goes the page content -->
</div>
<script type="text/javascript">
YUI().use('node-menunav', 'pjax-plugin', function (Y) {
  Y.one('#menu-1').plug(Y.Plugin.NodeMenuNav);
  Y.one('#content').plug(Y.Plugin.Pjax);
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:22:32.180

这应该可以解决问题：

```
Y.one('.menu_container').on('click', function(e) {
  Y.one('.content').setHTML("<h1>Hello, <em>World</em>!</h1>");
}); 
```

根据使用的选择器而不是 menu_container，您可以相应地更新内容。

编辑：事实上，委托可能更适合您的需求：

```
Y.one('.menu_container').delegate('click', onClick, '.menu-item'); 
```

[http://jsfiddle.net/olan/w2jfh/](http://jsfiddle.net/olan/w2jfh/)

# javascript - 用 Javascript 解析 XML 不起作用

> ID：14978111
> 
> 赞同：0
> 
> 时间：2013-02-20T10:56:15.920
> 
> 标签：javascript, html, xml

非常简单的一段代码：

```
<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <script type="text/javascript">          
            function loadXMLDoc(dname)
            {
                if (window.XMLHttpRequest)
                {
                    xhttp = new XMLHttpRequest();
                }
                else
                {
                    xhttp = new ActiveXObject("Microsoft.XMLHTTP");
                }
                xhttp.open("GET",dname,false);
                xhttp.send();
                return xhttp.responseXML;
            }

            xmlDoc = loadXMLDoc("feedback.xml");

            x=xmlDoc.getElementsByTagName("quote");
            for (i=0;i<x.length;i++)
            { 
                document.write(x[i].childNodes[0].nodeValue);
                document.write("<br>");
            }
        </script>    
    </body>
</html> 
```

我正在加载如下所示的 XML 文件“feedback.xml”：

```
<feedback>
   <quote id="1">"This is a quote."</quote>
   <quote id="2">"This is another quote."</quote>
</feedback> 
```

我从[http://www.w3schools.com/dom/tryit.asp?filename=try_dom_list_loop](http://www.w3schools.com/dom/tryit.asp?filename=try_dom_list_loop)获得了代码，但没有真正发生。当我试图`alert(x)`检查里面有什么时，我得到一个“[object HTMLCollection]”。但是，当我想检查时，`alert(x[0])`我得到“未定义”。任何想法为什么这不起作用？看起来很简单，XML 文件与这个 html 文件在同一个文件夹中，并且 Firebug 不会抛出任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:25:29.873

添加`<?xml version="1.0" encoding="ISO-8859-1"?>`到 xml 的顶部是我最初的建议。但是，我已经在 Ubuntu 中检查了我的 Firefox，并且您的代码正在运行。我试图更改编码可能是问题所在，但事实并非如此。

本来我以为没有标题的 XML 文档不会被 Javascript 识别为同一个对象。但同样，在我的 Ubuntu 上，Firefox 没有任何区别，文档是 XMLDocument，列表是 HTMLCollection ...

所以我真的很困惑什么是/是什么问题。

# tomcat - 当错误页面抛出异常时避免堆栈跟踪泄露

> ID：14978118
> 
> 赞同：0
> 
> 时间：2013-02-20T10:56:51.353
> 
> 标签：tomcat

在 Tomcat 7 中运行的 webapp 中，我在 中定义了自定义错误页面`web.xml`，例如：

```
<error-page>
    <error-code>500</error-code>
    <location>/error/error500.xhtml</location>
</error-page> 
```

但是，当由于某些意外情况，错误页面本身（作为带有 i18n 等的 JSF 视图）引发异常时，Tomcat 似乎会退回到其通用错误页面，显示堆栈跟踪和版本信息。当然，我宁愿不透露这些信息，而是显示一些通用的东西，比如空白页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:11:47.513

修复您的错误页面并使其更加健壮。如果自定义错误页面抛出错误，Tomcat 将回退到其内部错误处理。

# gem - 当我运行Bundle update 时，我在设置一个新的rails 应用程序后得到一个（SyntaxError）？为什么会这样

> ID：14978122
> 
> 赞同：0
> 
> 时间：2013-02-20T10:57:11.860
> 
> 标签：gem, ruby-on-rails-3.2, bundle, bundler, railstutorial.org

我是 Rails 新手，正在学习 Hartl Rails 教程并使用 Railsinstaller 安装

C:\Sites\sample_app>捆绑更新

C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/dsl.rb:7:in`instance_eval': C:/Sites/sample_app/Gemfile:43: syntax error, unexp ected $end, expecting keyword_end (SyntaxError) from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22 /lib/bundler/dsl.rb:7:in`评估'来自 C:/RailsInstaller/Ruby1.9.3/ lib/ruby/gems/1.9.1/gems/bundler-1.0.22 /lib/bundler/definition.rb:17:in `build' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22 /lib/bundler.rb:138:in`definition' 来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1 /gems/bundler-1.0.22 /lib/bundler/cli.rb:262:in `update' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22 /lib/bundler/vendor/thor/task.rb:22:in`run' 从 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22 / lib/bundler/vendor/thor/invocation.rb:118:in `invoke_task' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22 /lib/bundler/vendor/thor.rb:263:in`dispatch' 来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22 /lib/bundler/vendor /thor/base.rb:386:in `start' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22 /bin/bundle:13:in`'来自 C:/RailsInstaller/Ruby1.9.3/bin/bundle:19:in `load' from C:/RailsInstaller/Ruby1.9.3/bin/bundle:19:in`'

这是我的宝石文件。它看起来是正确的，但我只是不知道捆绑安装出错了。

```
Source 'https://rubygems.org'

gem 'rails', '3.2.12'

group :development, :test do
gem 'sqlite3', '1.3.5'
gem 'rspec-rails', '2.11.0'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
gem 'sass-rails',   '3.2.5'
gem 'coffee-rails', '3.2.2'
gem 'uglifier', '1.2.3'
gem 'jquery-rails', '2.0.2'
gem 'rb-readline'

group :test do
gem 'capybara', '1.1.2'
end

group :production do
gem 'pg', '0.12.2'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:48:22.777

`test, development`您还没有关闭该组`assets`。你需要像这样关闭它们：

```
group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.11.0'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.5'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
  gem 'jquery-rails', '2.0.2'
  gem 'rb-readline'
end 
```

PS：尽量保持你的代码缩进。只需浏览文件，就可以帮助找出未关闭的标签。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:53:26.890

加载 sqlite3 gem 的开发和测试组永远不会结束。应该是这样的：

```
group :development, :test do
    gem 'sqlite3', '1.3.5'
    gem 'rspec-rails', '2.11.0'
end 
```

# javascript - 允许的正则表达式 - 不超过 2 次

> ID：14978124
> 
> 赞同：-1
> 
> 时间：2013-02-20T10:57:17.810
> 
> 标签：javascript, regex, jsp

我正在使用`^(^[a-z]?[a0-z9]+[.|-][a0-z9]+[a-z]+[.|-][a0-z9]+[a-z]?$)+$`，这迫使用户在他的表达中输入 2 连字符（-）....

但我需要正则表达式可以在他的表达式中允许最多 2 个连字符和最少一个连字符....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:04:10.793

这是一个简单的重新实现。

`/^[^-]+(-[^-]+){1,2}$/`

和测试结果：

```
"123".match(/^[^-]+(-[^-]+){1,2}$/)
null

"123-123".match(/^[^-]+(-[^-]+){1,2}$/)
["123-123", "-123"]

"123-123-123".match(/^[^-]+(-[^-]+){1,2}$/)
["123-123-123", "-123"]

"123-123-123-123".match(/^[^-]+(-[^-]+){1,2}$/)
null 
```

如果你只是从其他人那里复制一个，那么你应该尝试自己写一个。
如果没有，您应该删除它并重新启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:07:56.100

```
^[^-]*-+[^-]*-{0,1}[^-]*$ 
```

String1：abc-pqr，String2：aaa-bbb，String3 aaa-bbb-ccc-ddd，其中String 1和2有效，3无效？

这允许字符串 1 和 2。但不允许字符串 3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:20:58.307

这个正则表达式应该可以工作......

```
/^[^-]*-[^-]*-[^-]*$/ 
```

它的工作原理是捕获除连字符（零次或多次）之外的任何内容，然后是一个连字符，然后是其他任何内容，然后是另一个连字符，然后是其他任何内容。它有一个开始和结束标记，以确保整个字符串不再包含连字符。

就这样崩溃了……

```
/       # begin regex
^       # start of string
[^-]*   # not hyphen ([^-]), zero or more times (*)
-       # hyphen
[^-]*   # not hyphen ([^-]), zero or more times (*)
-       # hyphen
[^-]*   # not hyphen ([^-]), zero or more times (*)
$       # end of string
/       # end regex 
```

# iphone - 应用程序无法使用蜂窝网络连接 (3G)

> ID：14978127
> 
> 赞同：2
> 
> 时间：2013-02-20T10:57:31.440
> 
> 标签：iphone, ios, reachability

在我的 iPhone 应用程序中，我使用苹果的可达性类来检查网络可用性。使用 Wifi 时它工作正常。但是当我使用移动网络（3G）的应用程序时，它不工作

我找不到解决方案。如果有人遇到同样的问题..请帮忙

**编辑 - 这是我的可达性代码**

**AppDelegate.h**

```
 #import <UIKit/UIKit.h>
   #import "Reachability.h"

   @class ViewController;

   @interface AppDelegate : UIResponder <UIApplicationDelegate>{
    Reachability* hostReach;
    Reachability* internetReach;
    Reachability* wifiReach;

    }
   @property (strong, nonatomic) UIWindow *window;
   @property (nonatomic,assign)BOOL networkAvailable;

  -(void)updateInterfaceWithReachability: (Reachability*) curReach;
  -(void)displayNetworkAvailability:(id)sender;

   @end 
```

**AppDelegate.m**

```
 #import "AppDelegate.h"
 implementation AppDelegate

  - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
 {
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

//reachability
[[UIApplication sharedApplication]
 registerForRemoteNotificationTypes:
 (UIRemoteNotificationTypeAlert |
  UIRemoteNotificationTypeBadge |
  UIRemoteNotificationTypeSound)];

[[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(reachabilityChanged:) name: kReachabilityChangedNotification object: nil];

hostReach = [Reachability reachabilityWithHostName: @"www.google.com"] ;
[hostReach startNotifier];
[self updateInterfaceWithReachability: hostReach];

internetReach = [Reachability reachabilityForInternetConnection] ;
[internetReach startNotifier];
[self updateInterfaceWithReachability: internetReach];

wifiReach = [Reachability reachabilityForLocalWiFi] ;
[wifiReach startNotifier];
[self updateInterfaceWithReachability: wifiReach];

 -(void) updateInterfaceWithReachability: (Reachability*) curReach
  {

if(curReach == hostReach)
{

  }
if(curReach == internetReach)
{   NSLog(@"internet reach");
    //[self configureTextField: internetConnectionStatusField imageView: internetConnectionIcon reachability: curReach];
}
if(curReach == wifiReach)
{
    NSLog(@"wifi reach");
    //[self configureTextField: localWiFiConnectionStatusField imageView: localWiFiConnectionIcon reachability: curReach];
}
NetworkStatus hostStatus = [curReach currentReachabilityStatus];
switch (hostStatus)

 {
    case NotReachable:
    {
        NSLog(@"A gateway to the host server is down.");

        self.networkAvailable=NO;
        break;

    }
    case ReachableViaWiFi:
    {
        NSLog(@"A gateway to the host server is working via WIFI.");
        self.networkAvailable=YES;
        break;

    }
    case ReachableViaWWAN:
    {
        NSLog(@"A gateway to the host server is working via WWAN.");
        self.networkAvailable=YES;
        break;

    }
}
if (!self.networkAvailable ) {
    [[NSNotificationCenter defaultCenter] postNotificationName:@"NONETWORKFOUND"  object:@"NO"];

}else {

    [[NSNotificationCenter defaultCenter] postNotificationName:@"NONETWORKFOUND"  object:@"YES"];

   }

 }

 - (void) reachabilityChanged: (NSNotification* )note{
Reachability* curReach = [note object];
NSParameterAssert([curReach isKindOfClass: [Reachability class]]);
[self updateInterfaceWithReachability: curReach];

    }

  - (void) displayNetworkAvailability:(id)sender{

UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Couldnot connect to server" message:@"Please check network connection!!"  delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
[alert show];

   [[NSNotificationCenter defaultCenter] postNotificationName:@"NONETWORKFOUND"  object:@"NO"];

   }

 @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:28:18.700

我不明白你是否需要区分蜂窝和 WiFi，但如果你只需要一个类来检查互联网连接，你可以在这里查看我的 ALData 类： [https ://gist.github.com/andrealufino/4994901](https://gist.github.com/andrealufino/4994901)

# jsf - 动态改变输入类型

> ID：14978130
> 
> 赞同：0
> 
> 时间：2013-02-20T10:57:35.563
> 
> 标签：jsf

我正在使用 JSF 2.2。我正在尝试建立一个考试系统。有些问题有 1 个正确答案，有些问题有多个正确答案。据此，我的视图应该显示单选按钮或复选框。我的 XHTML 页面中有一个硬编码示例：

```
<h:dataTable value="#{main.answerList}" var="list">
    <h:column>
        <h:selectBooleanCheckbox id="checkboxAnswer" value="#{list.check}"/>
        <h:outputText value="#{list.ansValue}"/>
    </h:column>
</h:dataTable> 
```

如何根据问题类型在单选按钮和复选框之间进行切换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:31:27.967

只需使用该`rendered`属性根据问题类型在输入类型之间切换。您问题中的代码（变量名称）不是自记录的，因此我也在对其进行更改，以便它变得更加自记录，并且这些属性中的每一个代表什么是显而易见的。

```
<h:dataTable value="#{bean.questions}" var="question">
    <h:column>
        <h:selectOneRadio value="#{question.selectedAnswer}" rendered="#{question.type == 'SINGLE_CHOICE'}">
            <f:selectItems value="#{question.availableAnswers}" />
        </h:selectOneRadio>
        <h:selectManyCheckbox value="#{question.selectedAnswers}" rendered="#{question.type == 'MULTIPLE_CHOICE'}">
            <f:selectItems value="#{question.availableAnswers}" />
        </h:selectManyCheckbox>
    </h:column>
</h:dataTable> 
```

`#{question.type}`应该代表`enum`具有上述值的一个。

# javascript - 车把每个助手

> ID：14978139
> 
> 赞同：0
> 
> 时间：2013-02-20T10:58:13.870
> 
> 标签：javascript, json, handlebars.js

我想为传入编译的所有对象添加 _first = true 到第一个对象。_first = true 应该添加到 data 和 company 仅用于第一个数组。

模板

```
<script id="firsttemp" type="text/x-handlebars-template">

        {{#each objects}}
        <tr>

        <td class="tableFirstCol"><input type="checkbox" class="check" id="childcheck" /></td>
        <td class="tableFirstCol"><input type="checkbox" class="star" id="childstar" /></td>
        <td class="tableFirstCol"><input type="checkbox" class="alarm" id="childalarm" /></td>
        <td class="tableFirstCol">{{name}}<span>{{name}}</span></td>

        </tr>
        {{/each}}
</script> 
```

json

```
company =    {
            "name": "IBM",
            "lastprice": 310.2,
            "dayschange": 120.1,
            "dayshigh": 220.9,
            "volume": 140.3,
            "52weekhigh": 200.3,
            "name2": "herohonda",
            "dataset": [1200,2000,5200],
            "lastprice2": "1:10pm",
            "dayschange2": "8%",
            "dayshigh2": "1.5%",
            "volume2": "1:10 Pm",
            "52weekhigh2": "1:10 Pm"
        },
         {
            "name": "zbHero Honda",
            "lastprice": 310.2,
            "dayschange": 220.1,
            "dayshigh": 220.9,
            "volume": 140.3,
            "52weekhigh": 200.3,
            "name2": "herohonda",
            "dataset": [3200,3500,5000],
             "dataset1":[20,+54,1000],
            "lastprice2": "1:10pm",
            "dayschange2": "8%",
            "dayshigh2": "1.5%",
            "volume2": "1:10 Pm",
            "52weekhigh2": "1:10 Pm"
        } 
```

编译：

```
$("#row-2-td-1-table").html( template({objects:company}) );  
$("#row-2-td-1-table").html( template({objects:data}) ); 
```

结果应该是：

```
company =    {
            "_first" : true,
            "name": "IBM",
            "lastprice": 310.2,
            "dayschange": 120.1,
            "dayshigh": 220.9,
            "volume": 140.3,
            "52weekhigh": 200.3,
            "name2": "herohonda",
            "dataset": [1200,2000,5200],
            "lastprice2": "1:10pm",
            "dayschange2": "8%",
            "dayshigh2": "1.5%",
            "volume2": "1:10 Pm",
            "52weekhigh2": "1:10 Pm"
        },
         {
            "name": "zbHero Honda",
            "lastprice": 310.2,
            "dayschange": 220.1,
            "dayshigh": 220.9,
            "volume": 140.3,
            "52weekhigh": 200.3,
            "name2": "herohonda",
            "dataset": [3200,3500,5000],
             "dataset1":[20,+54,1000],
            "lastprice2": "1:10pm",
            "dayschange2": "8%",
            "dayshigh2": "1.5%",
            "volume2": "1:10 Pm",
            "52weekhigh2": "1:10 Pm"
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:49:05.137

模板：

```
<tr  {{#equal @index}}{{/equal}}>
</tr> 
```

Regitry 助手：

```
Handlebars.registerHelper('equal', function(lvalue, options) {

    if( lvalue==0 ) {
        return "id=firstTr-1";
    } 
}); 
```

# php - PHP preg_match 与 ï

> ID：14978143
> 
> 赞同：0
> 
> 时间：2013-02-20T10:58:20.020
> 
> 标签：php, preg-match

如何使用 preg_match 接受所有普通字符，并且只接受 i 重音字符 (ï)？

```
preg_match('#^[ a-zA-Z0-9\[\]()-.!?~*]+$#', $string); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:04:37.187

只需将其添加到现有字符类的末尾...

```
<?php 

  // without the accented i    
  // returns 0, no match :(
  $string = "abcï";
  echo preg_match('#^[ a-zA-Z0-9\[\]()-.!?~*]+$#', $string);

  // adding the accented i to the end of the character class
  // returns 1, a match!
  $string = "abcï";
  echo preg_match('#^[ a-zA-Z0-9\[\]()-.!?~*ï]+$#', $string);

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:10:46.443

如果您匹配 unicode，则需要[设置 /u（unicode）标志](http://php.net/manual/en/function.preg-match.php)，然后在您的范围内包含 unicode 字符。

```
 preg_match('#^[ \x{00EF} a-z A-Z 0-9 \[\]()-.!?~*]+$#u', $string); 
```

[这里](http://en.wikipedia.org/wiki/List_of_Unicode_characters)有完整的 unicode 字符列表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:26:43.643

使用 unicode 属性：

```
preg_match('#^[\pL\pN \[\]().!?~*-]+$#', $string); 
```

`\pL` 代表任何语言的任何字母
`\pN` 代表任何语言的任何数字

# backbone.js - 仍然导航触发并更新我的网址，该方法没有调用

> ID：14978146
> 
> 赞同：0
> 
> 时间：2013-02-20T10:58:32.583
> 
> 标签：backbone.js, backbone-views, backbone-routing

在我的主干应用程序中，我使用`requirejs`加载 js 文件。我也需要不同的视图，我的下拉菜单中没有链接。根据下拉菜单添加`#url`示例：

```
http://localhost:85/bino/html/interface-I.html#projectName/project11 
```

导航方法可以正常工作并更新 url，每当我将此 url 复制并粘贴到任何其他浏览器/使用当前哈希状态刷新时，我的`router`方法都可以正常工作。

但是单击下拉菜单中的链接不起作用，方法没有调用...是什么原因，我该如何解决这个问题..？

我的代码：主 js 文件（部分代码）

```
var extender = _.extend({},backBone.Events);
            var params ={
                boardHolder :$('.boardHolder'),
                column      :3,
                space       :30,
                extender    :extender
            };
            var listApp = new routerer(params);
            backBone.history.start();
            extender.bind("list:selected",function(post){
                listApp.navigate(post.category+'/'+post.filter);
            }); 
```

我的路由器代码：

```
define(["backBone","singleton","listCollection","listView","listViews"],function(Backbone,singleton,listCollection,listView,listViews){
    singleton.router = Backbone.Router.extend({
        routes:{
            ""                          :"appView",
            "post"                      :"postView",
            "projectName/:id"           :"projectNameView",
            "assignedTo/:id"            :"assignedToView",
            "sortBy/:id"                :"sortByView"
        },
        initialize:function(params){
            this.params = params;
            this.collection = new listCollection;
            console.log('i am called');
        },
        hashView:function(){
            console.log('from hash view');
        },
        appView:function(){
            var that = this;
//          var defaultApp = new listCollection();
            this.collection.fetch({
                success:function(data){
                    new listViews({model:data,params:that.params})
                }
            })
        },
        projectNameView:function(thisView){ // not calling not sync
            console.log('called',thisView); // on click not works
        },
        assignedToView:function(thisView){ // not calling not sync
            console.log(thisView); // on click not works
        },
        sortByView:function(thisView){ // not calling not sync
            console.log(thisView); // on click not works
        }
    });
    return singleton.router;
}) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:40:43.797

导航仅更新 url，您还必须通过将触发器选项设置为 true 来调用路由函数。如果您想更新 URL 而不在浏览器的历史记录中创建条目，请将替换选项设置为 true。

```
listApp.navigate(post.category+'/'+post.filter); 
```

会成为

```
listApp.navigate(post.category+'/'+post.filter, {trigger: true}); 
```

# html - IE8 css下拉问题悬停不起作用

> ID：14978154
> 
> 赞同：1
> 
> 时间：2013-02-20T10:59:08.573
> 
> 标签：html, css, internet-explorer, drop-down-menu

我有一个 CSS 下拉代码，它在除 IE8 怪癖模式之外的所有浏览器中都能正常工作。严重卡住我的代码请帮助。我认为悬停在 IE8 怪癖模式下不起作用。我对css知之甚少，请指导。

这是html

```
<UL id=navmenu-h>
   <LI><A href="#">Home</A></LI>
   <LI><A href="#">Paper Rolls </A>
        <UL>
            <LI><A href="#">ATM Rolls </A></LI>
        </UL>
    </LI>
</UL> 
```

这是CSS

```
UL#navmenu-h {
    Z-INDEX: 1; POSITION: relative; PADDING-BOTTOM: 0px; LIST-STYLE-TYPE: none; MARGIN: 0px; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; BACKGROUND: #54b948; PADDING-TOP: 0px
}
UL#navmenu-h UL {
    Z-INDEX: 1; POSITION: absolute; PADDING-BOTTOM: 0px; LIST-STYLE-TYPE: none; MARGIN: 0px; PADDING-LEFT: 0px; WIDTH: 200px; PADDING-RIGHT: 0px; DISPLAY: none; TOP: 100%; PADDING-TOP: 0px; LEFT: 0px
}
UL#navmenu-h UL UL {
    Z-INDEX: 1; TOP: 0px; LEFT: 100%
}
UL#navmenu-h UL UL UL {
    Z-INDEX: 1; TOP: 0px; LEFT: 100%
}
UL#navmenu-h LI {
    Z-INDEX: 1; POSITION: relative; DISPLAY: inline; FLOAT: left; COLOR: #54b948
}
UL#navmenu-h UL LI {
    Z-INDEX: 1; WIDTH: 100%
}
UL#navmenu-h A {
    Z-INDEX: 1; PADDING-BOTTOM: 6px; PADDING-LEFT: 6px; WIDTH: auto; PADDING-RIGHT: 6px; DISPLAY: block; FONT: bold 13px Arial, sans-serif; BACKGROUND: #54b948; FLOAT: left; COLOR: #fff; BORDER-RIGHT: #fff 0px solid; TEXT-DECORATION: none; PADDING-TOP: 6px
}
UL#navmenu-h A:hover {
    Z-INDEX: 1; BORDER-BOTTOM-COLOR: #f0f0f0; BORDER-TOP-COLOR: #f0f0f0; BACKGROUND: #54b948; COLOR: #fff; BORDER-RIGHT-COLOR: #f0f0f0; BORDER-LEFT-COLOR: #f0f0f0
}
UL#navmenu-h LI:hover A {
    Z-INDEX: 1; BORDER-BOTTOM-COLOR: #f0f0f0; BORDER-TOP-COLOR: #f0f0f0; BACKGROUND: #54b948; COLOR: #fff; BORDER-RIGHT-COLOR: #f0f0f0; BORDER-LEFT-COLOR: #f0f0f0
}
UL#navmenu-h LI:hover LI:hover LI A:hover {
    BACKGROUND: #54b948; COLOR: #fff
}
UL#navmenu-h LI:hover LI:hover LI:hover A {
    BACKGROUND: #54b948; COLOR: #fff
}
UL#navmenu-h LI:hover UL UL {
    DISPLAY: none
}
UL#navmenu-h LI:hover UL UL UL {
    DISPLAY: none
}
UL#navmenu-h LI:hover UL UL UL UL {
    DISPLAY: none
}
UL#navmenu-h LI:hover UL UL UL UL UL {
    DISPLAY: none
}
UL#navmenu-h LI:hover UL {
    DISPLAY: block
}
UL#navmenu-h UL LI:hover UL {
    Z-INDEX: 1; DISPLAY: block
}
UL#navmenu-h UL UL LI:hover UL {
    Z-INDEX: 1; DISPLAY: block
}
UL#navmenu-h UL UL UL LI:hover UL {
    Z-INDEX: 1; DISPLAY: block
}
UL#navmenu-h UL UL UL UL LI:hover UL {
    Z-INDEX: 1; DISPLAY: block
}
UL#navmenu-h LI:hover LI A {
    Z-INDEX: 1; BORDER-BOTTOM: 1px solid; BORDER-LEFT: 1px solid; FONT: bold 11px Arial, sans-serif; BACKGROUND: #fff; FLOAT: none; COLOR: #656565; BORDER-TOP: 1px solid; BORDER-RIGHT: 1px solid
}
UL#navmenu-h LI:hover LI:hover LI A {
    Z-INDEX: 1; BORDER-BOTTOM: 1px solid; BORDER-LEFT: 1px solid; FONT: bold 11px Arial, sans-serif; BACKGROUND: #fff; FLOAT: none; COLOR: #656565; BORDER-TOP: 1px solid; BORDER-RIGHT: 1px solid
}
UL#navmenu-h LI:hover LI:hover LI:hover LI A {
    Z-INDEX: 1; BORDER-BOTTOM: 1px solid; BORDER-LEFT: 1px solid; FONT: bold 11px Arial, sans-serif; BACKGROUND: #fff; FLOAT: none; COLOR: #656565; BORDER-TOP: 1px solid; BORDER-RIGHT: 1px solid
}
UL#navmenu-h LI:hover LI:hover LI:hover LI:hover LI A {
    Z-INDEX: 1; BORDER-BOTTOM: 1px solid; BORDER-LEFT: 1px solid; FONT: bold 11px Arial, sans-serif; BACKGROUND: #fff; FLOAT: none; COLOR: #656565; BORDER-TOP: 1px solid; BORDER-RIGHT: 1px solid
}
UL#navmenu-h LI:hover LI A:hover {
    Z-INDEX: 1; BACKGROUND: #54b948; COLOR: #fff
}
UL#navmenu-h LI:hover LI:hover A {
    Z-INDEX: 1; BACKGROUND: #54b948; COLOR: #fff
}
UL#navmenu-h LI:hover LI:hover LI:hover LI A:hover {
    Z-INDEX: 1; BACKGROUND: #54b948; COLOR: #fff
}
UL#navmenu-h LI:hover LI:hover LI:hover LI:hover A {
    Z-INDEX: 1; BACKGROUND: #54b948; COLOR: #fff
}
UL#navmenu-h LI:hover LI:hover LI:hover LI:hover LI A:hover {
    Z-INDEX: 1; BACKGROUND: #54b948; COLOR: #fff
}
UL#navmenu-h LI:hover LI:hover LI:hover LI:hover LI:hover A {
    Z-INDEX: 1; BACKGROUND: #54b948; COLOR: #fff
}
.menuColor {
    BACKGROUND-COLOR: #54b948
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T01:49:09.967

我遇到了完全相同的问题。原来我失踪了。

在我的 HTML 页面顶部输入以下内容解决了我的问题：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-20T15:50:59.277

在菜单下的 div 上添加 position:relative

# c# - GetHashCodes - 如何以及何时使用？

> ID：14978155
> 
> 赞同：2
> 
> 时间：2013-02-20T10:59:10.177
> 
> 标签：c#, hashcode

好的覆盖`GetHashCode`方法应该是什么样子？（例如对于包含三个字符串属性的纯模型类）在编写此类方法时是否有任何共同的原则/模式？它到底在哪里使用（除了 HashTables/Dictionaries）？当我们比较对象相等性时，依赖哈希码是个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:04:14.383

我喜欢使用[这个实现](https://stackoverflow.com/a/263416/146622)：

```
public override int GetHashCode()
{
    unchecked
    {
        int hash = 17;
        // Check for null
        hash = hash * 29 + field1.GetHashCode();
        hash = hash * 29 + field2.GetHashCode();
        return hash;
    }
} 
```

# symfony - 如何在 symfony2 中创建自定义或辅助函数，如 codeigniter？我应该保存在哪里？

> ID：14978156
> 
> 赞同：1
> 
> 时间：2013-02-20T10:59:18.853
> 
> 标签：symfony

我可以在 symfony2 中创建像 codeigniter 这样的辅助函数吗？

我想要一个函数，它应该在 pre 标签内打印数组，比如

```
public function print_in_pre_tag($array) {
    echo "<pre>";
    print_r($array);
    echo "</pre>";    
} 
```

我经常以这种格式打印数组来检查值。

请提出一些解决方案，让我知道我可以在哪里保留该功能？

**编辑1：**如果我像 print_in_pre_tag($array); 在上面的任何控制器中
都应该调用函数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T11:59:04.957

您应该为此创建一个服务（codeIgniter 中的帮助程序）。

在您的包中创建一个名为 Services 的文件夹。在该文件夹中创建一个名为“PrintManager.php”的文件（或者您想调用它 - 但确保第一个是大写）

然后在 PrintManager.php 中输入：

> 命名空间公司\MyBundle\Services；
> 
> 类打印管理器 {
> 
> ```
> public function print_in_pre_tag($array) {
>     echo "<pre>";
>     print_r($array);
>     echo "</pre>";    
> } } 
> ```

然后在您的 services.yml 中设置文件：

> 参数：print_manager.class：Company\MyBundle\Services\PrintManager（注意，没有 .php 扩展名）
> 
> 服务：print_manager：类：“%print_manager.class%”

然后在您的控制器中，您可以像这样调用它：

> $printManager = $this->get('print_manager');
> 
> $printManager->print_in_pre_tag($array);

顺便说一句，您可以做的最好的事情是让您的服务处理功能部分，并让它将结果返回给您的控制器，然后您可以从那里处理结果。

比如： $text = $printManager->print_in_pre_tag($array);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-19T10:16:27.160

实际上，我不明白人们为什么推荐服务。服务必须包含业务逻辑。对于您的任务，请使用 Helpers。它们是静态的，您不需要实例！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-15T10:49:52.823

您应该使用完全符合您要求的[LadybugBundle 。](https://github.com/raulfraile/LadybugBundle)它更容易使用，因为您可以使用以下调用进行调试：

```
ld($array);
ldd($array); 
```

此外，这些[助手](https://github.com/raulfraile/ladybug-helpers/blob/master/helpers.php)可以在您的 PHP 代码中的**任何地方**使用，而无需请求或定义服务。最后，它还可以在控制台中调试、Ajax 调用、Twig 模板......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-12T09:45:15.653

实际上，这个问题太老了，无法回答，实际上我的回答不是关于 Helper，而是关于您需要的功能。你需要一个漂亮的 var_dump()。

**从 Symfony 2.6 开始，我们有了 VarDumper 组件**。当然，您可以在任何需要的地方、任何时候、在您的 php 代码中使用它。

您必须使用函数**dump()**。您可以在开发人员栏中看到转储，也可以在重定向页面中看到。转储的输出格式更好，因为您有箭头来展开所有内部数组。

只是为了让大家知道

# mysql - 单个查询或存储过程来获取数据

> ID：14978159
> 
> 赞同：0
> 
> 时间：2013-02-20T10:59:31.537
> 
> 标签：mysql, sql, stored-procedures

我创建了三个表

在这里，我想获取与特定问题（id）相关的所有 question_tags 和答案。对于需要的单个查询或存储过程

```
create table questions(id varchar(100),title varchar(140),body varchar(2000),
primary key(id));

create table question_tags(id varchar(50),tag_name varchar(50),question_id varchar(100),
primary key(id),foreign key(question_id) references questions(id));

create table answers(id varchar(50),answer varchar(2000),question_id varchar(100),
primary key(id),foreign key(question_id) references questions(id)); 
```

以及表中的以下数据

```
 mysql> select * from questions;
     +----+-------+-------------+
     | id | title | body        |
     +----+-------+-------------+
     | 1  | a     | hello       |
     | 2  | b     | hii         |
     | 3  | c     | bye         |
     | 4  | d     | how are you |
     +----+-------+-------------+
     4 rows in set (0.03 sec)

     mysql> select * from question_tags
     +----+----------+-------------+
     | id | tag_name | question_id |
     +----+----------+-------------+
     | t1 | java     | 1           |
     | t2 | mysql    | 1           |
     | t3 | jquery   | 1           |
     +----+----------+-------------+
     3 rows in set (0.00 sec)

     mysql> select * from answers;
     +----+-----------+-------------+
     | id | answer    | question_id |
     +----+-----------+-------------+
     | a1 | good      | 1           |
     | a2 | excellent | 1           |
     | a3 | ok        | 1           |
     +----+-----------+-------------+
     3 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:18:20.617

我认为您搜索 JOIN [ON] 语句。对于您的 Tablelayout，它应该是这样的：

```
SELECT `question_tags`.*, `answers`.* 
FROM `questions`
   JOIN  `answers` 
        ON `questions`.`id` = `answers`.`question_id`
   JOIN `question_tags` 
        ON `questions`.`id` = `question_tags`.`question_id`
WHERE `questions`.`id` = {YOUR_ID} 
```

或者只有问题 ID、答案、标签：

```
SELECT `questions`.`id` AS `question_id`, 
         `question_tags`.`tag_name`, 
         `answers`.`answer` 
FROM `questions`
   JOIN  `answers` 
        ON `questions`.`id` = `answers`.`question_id`
   JOIN `question_tags` 
        ON `questions`.`id` = `question_tags`.`question_id`
WHERE `questions`.`id` = 0 
```

**编辑：** 对于一行中的所有内容：

```
SELECT  `questions`.`id` AS  `question_id` ,
(
    SELECT GROUP_CONCAT(  `question_tags`.`tag_name` SEPARATOR ';') 
    FROM  `question_tags` 
    WHERE  `question_id` =0
) AS  `Tags` ,
(
    SELECT GROUP_CONCAT(  `answers`.`answer` SEPARATOR ';' ) 
    FROM  `answers` 
    WHERE  `question_id` =0
) AS  `Answers` 
FROM  `questions` 
WHERE  `questions`.`id` =0 
```

请记住，这**不是**执行此操作的最佳方式。我无法为您提供存储过程，因为我不熟悉 MySQL 中的 SP。在我看来，没有办法选择/返回/显示您想要的格式作为表格。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-20T11:19:13.057

查询是：

```
select * from questions join question_tags on (questions.id = question_tags.question_id) join answers on (questions.id=answers.question_id); 
```

[这](http://sqlfiddle.com/#!2/e9606/2)是一个小提琴；如果您向我们提供您的问题，它会极大地帮助我们帮助您。
请阅读有关 mySQL 命名约定（符号表）和 keyreferences 的信息（我已将您的更改为`integer`s，但您也可以`auto_increment`等）。

# php - 只有在 mysql 查询中 if 为真时才使用 AND 语句

> ID：14978161
> 
> 赞同：0
> 
> 时间：2013-02-20T10:59:33.170
> 
> 标签：php, mysql, database, if-statement

我更新了旧系统，但遇到了查询问题。

要开展业务，这是直接的问题：

有一些新记录与其他记录的 id 相关联。也有没有的旧记录。

*   Case1：有一个 INT id，当它存在时，查询必须在包含之后使用 AND。
*   案例 2：当 INT id 的值为 0 时，它什么都不做

这是查询的一部分，我需要在其中创建变量 AND 语句：

```
LEFT JOIN table v ON v.producten_id = i.producten_id AND v.t5_id = i.t5_id AND i.id = v.inkoop_id 
```

我从未在查询中使用过 IF 雄蕊，但我正在寻找这样的东西：

```
LEFT JOIN table v ON v.producten_id = i.producten_id AND v.t5_id = i.t5_id if(v.inkoop_id > 0){AND i.id = v.inkoop_id} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:05:35.263

尝试这个：

```
LEFT JOIN table v
  ON v.producten_id = i.producten_id
    AND v.t5_id = i.t5_id
    AND (v.inkoop_id <= 0 OR i.id = v.inkoop_id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:05:58.477

这个怎么样....

```
LEFT JOIN table v ON v.producten_id = i.producten_id
   AND v.t5_id = i.t5_id
   AND ((v.inkoop_id > 0 AND i.id = v.inkoop_id) OR (v.inkoop_id = 0)) 
```

# arrays - 我的阵列正在调整大小

> ID：14978168
> 
> 赞同：1
> 
> 时间：2013-02-20T10:59:48.620
> 
> 标签：arrays, vb.net

如果我这样做，`Dim array As String()`我似乎能够调整该数组的大小并即时将任何内容放入其中。例如：

```
Dim PackUrls As String()
PackUrls = Split(WebRequest("http://" + sPackBaseURI, sPackBaseURIUsername, sPackBaseURIPassword), ":") 
```

而且我没有收到错误，并且数组没有发生任何奇怪的事情。

我没有考虑就这样做了然后我读到您必须先指定数组的大小！为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:23:22.330

当您将数组分配给 var 时，无论大小如何，您都将用新数组替换它。var 现在指向相同类型的新数据，因此不需要错误。

当您将数组分配给数组 var 时，您不是单独复制项目，而是变量指向新数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:40:16.053

这就是您的代码中发生的事情

```
'Create an empty string array called PackUrls
Dim PackUrls As String()

'Create a new string array from the Split function 
'and assign it to the variable PackUrls, replacing the old value.
PackUrls = Split(WebRequest("http://" + sPackBaseURI, _
                            sPackBaseURIUsername, sPackBaseURIPassword), ":") 
```

没有从`Split`to的结果复制`PackUrls`。原始内容（顺便说一句）被替换为来自`Split`. 因此无需调整数组的大小。您可以像这样轻松地重写您的代码，它会起作用：

```
Dim PackUrls As String() = Split(WebRequest("http://" + sPackBaseURI, _
                           sPackBaseURIUsername, sPackBaseURIPassword), ":") 
```

# c++ - 在 C++ 中将 std::string 转换为 Unicode 字符串

> ID：14978169
> 
> 赞同：3
> 
> 时间：2013-02-20T10:59:49.850
> 
> 标签：c++, string, unicode, c++builder

我有个问题。我需要将字符串类型转换为 unicode。我知道方法喜欢

```
string.c_str(); 
```

但它在我的代码中不起作用。

我有功能

```
void modify(string infstring, string* poststring) 
```

在其中我需要在备忘录中显示 infstring。像一个

```
Form1->Memo1->Lines->Add("some text "+infstring.c_str()+" some text"); 
```

但编译器说我“E2085 无效指针添加”

我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T11:20:25.037

```
Form1->Memo1->Lines->Add("some text "+infstring.c_str()+" some text"); 
```

应该

```
Form1->Memo1->Lines->Add(("some text "+infstring+" some text").c_str()); 
```

即，您将字符串文字添加到`std::string` *then*用于`c_str()`从中获取 a `const char*`。

如果函数采用不同的类型，那仍然不起作用`Add()`，但是您没有提供足够的信息来知道您在问什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T11:03:08.320

使用字符串流

```
#include <sstream>
std::stringstream ss;
ss << "some text" << mystring << "some text";
Form1->Memo1->Lines->Add(ss.str().c_str()); 
```

# javascript - 一个特定的点击功能在任何版本的 IE 中都不起作用

> ID：14978175
> 
> 赞同：0
> 
> 时间：2013-02-20T11:00:05.227
> 
> 标签：javascript, jquery, internet-explorer

我在一个页面上有几个点击功能，在 IE 中都触发了，除了一个。它也只发生在 IE 中，Firefox 和 Chrome 都很好。

该网站可以在这里看到（它的页脚不起作用，它应该显示一个带有视频的弹出窗口）：[http ://sealection.info/](http://sealection.info/)

```
$('#footer').click(function() {

    event.preventDefault();

    $('.splash').stop().delay(200).fadeIn('300');
    $('.splashcontent').stop().delay(400).fadeIn('300');

    $('.overlay').stop().fadeOut('300');

    $('#vimeo_frame').attr('src', 'http://player.vimeo.com/video/22659728?title=0&amp;byline=0&amp;portrait=0&amp;autoplay=1');

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:03:10.303

尝试这个

```
 $('#footer').click(function(event) {

   event.preventDefault();
   ..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:02:09.450

你有例外：

```
event.preventDefault(); 
```

事件未定义

# doctrine-orm - Zend 框架 2 LDAP

> ID：14978176
> 
> 赞同：5
> 
> 时间：2013-02-20T11:00:10.980
> 
> 标签：doctrine-orm, zend-framework2, openldap

我想将 Zend Framework 2 与 Doctrine 2 和 openLDAP 一起使用。我的目标是为我的 LDAP 创建持久性。我怎样才能在 ZF2 中做到这一点？

我注意到我们可以使用 Zend\Ldap\Node 从 LDAP 获取对象。

谁能向我展示如何从 LDAP 进行搜索并将结果转换为节点和/或可能转换为节点集合的示例？

我想在搜索后处理一些对象。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-03T13:52:07.197

好吧，这可能会“有点”晚，但只是为了给其他人一些关于如何做到这一点的指示。我创建了一个名为的模块[`SamLdapUser`](https://github.com/manuakasam/SamLdapUser)，它针对 Ldap / AD 运行其身份验证。提供了一个示例配置。

持久层（应用程序中的用户对象）是通过第二个模块创建的。该模块连接到`getIdentity()`身份验证服务的功能，然后在数据库中查询用户对象。如果不存在对象，则将创建一个新对象。您也可以查看我的模块的源代码[`SamLdapUserObject`](https://github.com/manuakasam/SamLdapUserObject)。

# drupal-7 - Drupal 7，使用 managed_file 永久上传和保存图像

> ID：14978178
> 
> 赞同：1
> 
> 时间：2013-02-20T11:00:16.937
> 
> 标签：drupal-7

我似乎无法保存使用 FAPI 上传的图像文件。

图像作为托管文件上传，我需要永久保存它们，但它们始终以状态 1 保存在数据库中。

知道我做错了什么吗？谢谢，

//fapi

```
 $form['fieldset_3']['pic_3'] = array(
 '#type' => 'managed_file',
 '#title' => t('Image'),
 '#required' => TRUE,
 '#default_value' => variable_get('pic_3'),    
 '#description' => t('Allowed extensions: gif png jpg jpeg.'),
 '#upload_validators' => array(
 'file_validate_extensions' => array('gif png jpg jpeg'),
 'file_validate_size' => array('MAX_FILE_SIZE' * 1200 * 300),
 ),  
 '#theme' => 'image_multifield_multitype',
 '#upload_location' => 'public://carousel',
 ); 
```

//在提交函数中

```
$file = file_load($form_state['fieldset_1']['pic_1']);
$file = file_save_upload($file->uri,$validators, 'public://carousel/' .  $file->filename, FILE_EXISTS_REPLACE);
$file->status = FILE_STATUS_PERMANENT;
file_save($file); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:27:33.273

我的错，问题是提交处理程序没有被调用......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-25T08:44:26.113

通过fid加载图像并将状态设置为永久

```
$file = file_load($form_state['values']['image_fid']);
$file->status = FILE_STATUS_PERMANENT;
$file_saved =file_save($file);
variable_set('image_fid', $file_saved->fid); 
```

# c++ - C ++如何#define/rename嵌套函数？

> ID：14978185
> 
> 赞同：0
> 
> 时间：2013-02-20T11:00:35.693
> 
> 标签：c++, macros

```
 namespace first {
    namespace second {
        class Third {
            static void foo() {
                std::cout << "foo\n";
            }
        };
    }
    }

    void bar() {
        std::cout << "bar\n";
    }

    #define first::second::Third::foo bar//this doesn't work 
```

那么，将嵌套函数映射到另一个函数的正确方法是什么？

# 更新：

更类似的情况是：

```
 struct ReleaseVersion {
        static void foo() {
            std::cout << "release version\n";
        }
    };

    struct DebugVersion {
        static void foo() {
            std::cout << "debug version\n";
        }
    };

    #ifdef _DEBUG 
    #define ReleaseVersion::foo DebugVersion::foo
    #else
    #define DebugVersion::foo ReleaseVersion::foo
    #endif 
```

我要做的就像malloc和_malloc_dbg一样，当#define _CRTDBG_MAP_ALLOC时，在debug模式下malloc会映射到_malloc_dbg，而在release模式下，_malloc_dbg会映射到malloc

# 再次更新

更类似的情况是：

```
 namespace first {
    namespace second {
    struct ReleaseVersion {
        static void foo() {
            std::cout << "release version\n";
        }
    };

    struct DebugVersion {
        static void foo(const char* file, long line) {
            std::cout << "debug version\n";
        }
    };
    }
    }
    #ifdef _DEBUG 
    #define ReleaseVersion::foo() DebugVersion::foo(__FILE__, __LINE__)
    #else
    #define DebugVersion::foo(file, line) ReleaseVersion::foo()
    #endif 
```

所以，这两个版本的函数可能有不同的参数，我不能只调用一个。我知道我可以做到这一点

```
 #ifdef _DEBUG 
    #define Foo() first::second::DebugVersion::foo(__FILE__, __LINE__)
    #else
    #define Foo() first::second::ReleaseVersion::foo() 
```

但是这样一来，我必须一直使用 Foo()，即使在最终发布模式下，它仍然是一个宏。我想知道是否有更灵活的方法可以做到这一点。

# 一种解决方案

```
 #ifdef _DEBUG 
    #define foo() foo(__FILE__, __LINE__)
    #define ReleaseVersion DebugVersion
    #else
    #define foo(file, line) foo()
    #define DebugVersion ReleaseVersion
    #endif

    int main() {
        first::second::DebugVersion::foo(__FILE__, __LINE__);
        first::second::ReleaseVersion::foo();
        return 0;
    } 
```

当其他命名空间中有另一个 foo() 或 RealeaseVersion/DebugVersion 时可能很危险，但如果你能确保不会有，我认为这可能是一个可以接受的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:09:44.050

你`#define`的方法是错误的：

```
#define bar first::second::Third::foo 
```

意味着`bar`它将被替换`first::second::Third::foo`，我相信这就是你想要的。

这是相反的`typedef`，事情是相反的。

我不确定你想要什么，但这有效：

```
namespace first {
namespace second {
    class Third {
        public: static void foo() {
            std::cout << "foo\n";
        }
    };
}
}

#define bar first::second::Third::foo

int main()
{
  bar();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:18:23.677

`malloc`/工作方式`free`是通过宏替换：

```
#ifdef WANT_DEBUG_MALLOC
#define malloc(x) debug_malloc(x, __FILE__, __LINE__)
#define free(x)   debug_free(x, __FILE__, __LINE__)
#endif 
```

当预处理器看到`struct foo *p = malloc(sizeof(struct foo) * 10);`它将替换为`struct foo *p = debug_malloc(sizeof(struct foo) * 10, "myfile.c", 103);`

但是，如上所述，在进行宏替换时，您不能真正使用命名空间。您必须单独替换命名空间，或者单独替换函数名。当然，可以有两个宏，一个替换命名空间，一个替换函数名。但它很快就会变得非常混乱，所以最好避免，我会说。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:31:32.573

我宁愿使用内联函数

```
#ifdef _DEBUG 
static inline void DoFoo() { DebugVersion::foo(); }
#else
static inline void DoFoo() { ReleaseVersion::foo(); }
#endif 
```

# javascript - 以 json 格式计算持续时间

> ID：14978190
> 
> 赞同：0
> 
> 时间：2013-02-20T11:00:43.193
> 
> 标签：javascript, json, d3.js

我想以 hh:mm:ss 的格式存储 json 对象中所有 **N PROCESSES ** 的持续时间。但问题是所有格式都是为了显示当前时间。

例如，如果我得到 30 分钟作为 n 个进程工作持续时间的持续时间，那么它应该存储 00:30:00。如何实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:09:57.277

JSON 是一种用纯文本表示结构化数据的方法，它提供了一种可供多个应用程序使用的通用语法。在这种方式下，它很像 XML。这意味着 javascript 对象不能保存在 JSON 中，只能保存它们的序列化，因此您需要保存以表示持续时间的是 HH:MM:SS 形式的字符串，您可以稍后在任何将使用此数据的应用程序中对其进行解释。

使用提供的数据格式编辑：

```
{ 
    "process" :"process-name 2", 
    "stage" : "stage name 2", 
    "duration": "02:00:00",
    "activities": [ 
        { 
            "activity_name": "waiting", 
            "start": "2012-10-22T06:45+05:30", 
            "end": "2012-10-25T08:45+05:30", 
            "color": "#CDC9C9"
        } 
    ]
} 
```

如果您不确定它是否有效，请使用[http://jsonlint.com/验证您的 json](http://jsonlint.com/)

# php - 保存由 TCPDF 生成的文件

> ID：14978191
> 
> 赞同：2
> 
> 时间：2013-02-20T11:00:43.730
> 
> 标签：php, jquery, tcpdf

当用户单击按钮时，我想生成并打开 PDF。到目前为止，这是我的代码：

索引.php：

```
</html>
<head>
<script>
$('.cmd_butt').click(function() {
    $.ajax({
    url: 'create_pdf.php',
    data: {id: $(this).attr('order_id'), name: $(this).attr('name')},
    type: 'post'
    });
}
</script>
</head>
<body>
<button class="cmd_butt" order_id="250" name="pdf_but">Download PDF</button>
</body>
</html> 
```

创建_pdf.php：

```
<?php

//header('Content-type: application/pdf')
header("Content-type: application-download");
//header("Content-Length: $size");
header("Content-Disposition: attachment; filename=MyPDF.pdf");
header("Content-Transfer-Encoding: binary");

require_once('tcpdf/config/lang/eng.php');
require_once('tcpdf/tcpdf.php');

// create new PDF document
// some code
// some code

//$pdf->Output('test.pdf', 'I');
//$pdf->Output('test.pdf', 'FD');
$pdf->Output();

?> 
```

如何使用生成的 PDF 打开一个新窗口？或者通过“另存为”对话框通知用户下载此 PDF？我尝试了不同的 Output() 组合，但都没有奏效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T11:10:59.063

你试过这个

```
$pdf->Output('yourfilename.pdf','D'); 
```

这将提示用户选择保存 PDF 文件的位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T11:22:42.977

Ajax 只能获取文本数据，它不能直接或在新窗口中显示 PDF（来自响应）。

您需要提交表单而不是 AJAX，或者从 ajax 调用创建一个文件，作为响应，获取有关创建文件的响应。例如创建的文件名，然后基于它打开一个新窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T10:47:32.073

改变

```
<button class="cmd_butt" order_id="250" name="pdf_but">Download PDF</button> 
```

到

```
<a href="create_pdf.php?order_id=250" target="_blank">Download PDF</a> 
```

*删除index.php*中的 java删除*create_pdf.php*
中的标头

# android - Android NDK：未找到本机 xxxxxx 的实现

> ID：14978197
> 
> 赞同：0
> 
> 时间：2013-02-20T11:00:57.217
> 
> 标签：android, android-ndk

我做了一个使用 Tess-two 的项目，我想使用该方法`pixConvertRGBToLuminance`，但它总是错误：

```
No implementation found for native Lcom/googlecode/leptonica/android/Pix;.nativePixConvertRGBToLuminance:(I)I. 
```

我的代码Java是：

```
public static Pix pixConvertRGBToLuminance(Pix pixs){
    if (pixs == null)
        throw new IllegalArgumentException("Source pix must be non-null");

    int nativePixd = nativePixConvertRGBToLuminance(pixs.getNativePix());

    return new Pix(nativePixd);

} 
```

我的代码 .cpp 是：

```
jint Java_com_googlecode_letonica_android_Pix_nativePixConvertRGBToLuminance(JNIEnv *env,
    jclass clazz, jint nativePixs){

PIX *pixs = (PIX *)nativePixs;

LOGE("------------------>Failed to find native pixConvertRGBToLuminance File");
PIX *pixd = pixConvertRGBToLuminance(pixs);
return (jint) pixd;
} 
```

Leptonica 的原始代码是：

```
PIX * pixConvertRGBToLuminance(PIX *pixs)
{
  return pixConvertRGBToGray(pixs, 0.0, 0.0, 0.0);
}` 
```

那为什么我总是有错？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:08:05.883

答案是 C++ 名称修饰的另一个问题 - 将您的函数声明为`èxtern "C"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:32:06.207

```
extern "C" jint Java_com_googlecode_letonica_android_Pix_nativePixConvertRGBToLuminance(JNIEnv *env,
    jclass clazz, jint nativePixs){

PIX *pixs = (PIX *)nativePixs;

LOGE("------------------>Failed to find native pixConvertRGBToLuminance File");
PIX *pixd = pixConvertRGBToLuminance(pixs);
return (jint) pixd;
} 
```

请参阅[通过 JNI 从 Android 上的 C++ 调用 Java 函数](https://stackoverflow.com/questions/9428001/calling-a-java-function-from-c-on-android-over-jni)

# c# - Viewstate 加载动态控件的问题（使用 ListBox）

> ID：14978198
> 
> 赞同：0
> 
> 时间：2013-02-20T11:00:58.350
> 
> 标签：c#, asp.net, viewstate

这是我的第一个问题，如果我做错了什么，我深表歉意。我也是 Asp.net 的新手。这是我的问题：

我有一个“添加控制按钮”，它添加了一个用户控件，只不过是一个预配置的列表框。（这个想法是根据用户的需要添加用户控件。）到目前为止一切都很好。当我在 ListBox 中标记一个元素时，选择在第一次回发后丢失（例如在单击添加控制按钮后）。似乎是生命周期问题，不知道。我的错误解决方案（根据我在网上找到的内容进行了调整）如下：我使用一个列表来恢复基于其 ID 的每个用户控件。谢谢你。这是代码：

```
protected List<string> ControlsList
{
    get
    {
        if (ViewState["controls"] == null)
        {
            ViewState["controls"] = new List<string>();
        }
        return (List<string>)ViewState["controls"];
    }
}

//Restore Controls based on IDs in ControlsList
protected override void LoadViewState(object savedState)
{
    base.LoadViewState(savedState);        

foreach (string contrID in ControlsList)
    { 
            Control c;
            c = LoadControl("v1.ascx");
            c.ID = "v1-" + contrID;
            PlaceHolder1.Controls.Add(c);
      }

//Button Click adds Control
protected void addControl(object sender, EventArgs e)
{
    Control c;
    c = LoadControl("v1.ascx");
    c.ID = "v1-" + NextID.ToString();
    ControlsList.Add(c.ID);
    PlaceHolder1.Controls.Add(c);
} 
```

这里是用户控制：

```
public partial class v1 : System.Web.UI.UserControl
{
protected void Page_Init(object sender, EventArgs e)
{
    v1_ListBox1.DataSourceID = "A1Vm1_SqlDataSource";
    v1_ListBox1.DataTextField = "Vm1";
    v1_ListBox1.DataValueField = "Vm1";
    v1_ListBox1.SelectionMode = ListSelectionMode.Multiple;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:21:40.823

您应该更改 ViewState 的保存方式

```
protected override object SaveViewState()
{
    var a = this.ControlsList;
    var b = base.SaveViewState();
    if (a.Count == 0 && b == null)
        return null;

    return new System.Web.UI.Pair(a, b);
}

protected override void LoadViewState(object savedState)
{
    if (savedState == null)
        return;

    var pair = (System.Web.UI.Pair)savedState;
    if (pair.First != null)
    {
        foreach (var id in (IList<string>)pair.First)
        {
            // add the control
        }
    }

    if (pair.Second != null)
        base.LoadViewState(pair.Second);
} 
```

这种方法将让您首先初始化子控件，然后为它们加载视图状态。

您可能还希望将[ViewStateModeByIdAttribute](http://msdn.microsoft.com/en-us/library/system.web.ui.viewstatemodebyidattribute%28v=vs.110%29.aspx)添加到动态添加控件的控件中，以便在您开始删除控件时加载视图状态不会失败。

# iphone - Ios Map：获取纬度和经度

> ID：14978203
> 
> 赞同：1
> 
> 时间：2013-02-20T11:01:06.540
> 
> 标签：iphone, cocoa-touch, ios6

当用户在 ios 地图位置上触摸（点击）时，我试图读取经度和纬度，我想获得那个特定的（用户点击位置）位置的纬度和经度点。 **（对于（例如）如果用户触摸 ios 总部意味着我想显示 ios 总部地点的经度和纬度点）**。我怎样才能做到这一点。任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:04:11.580

覆盖触摸处理程序（`touchesBegan`或`UITapGestureRecognizer`），然后 `- (CLLocationCoordinate2D)convertPoint:(CGPoint)point toCoordinateFromView:(UIView *)view`在[此处](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html)`MKMapView`的类引用中使用。然后使用符合协议的类向地图添加适当的注释，例如.`MKAnnotation``MKPinAnnotationView`

因此，示例触摸处理程序方法如下所示：

```
-(void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event 
{ 
    CGPoint pt = [[touches  anyObject]locationInView:self.mapView];  
    CLLocationCoordinate2D latLong = [self.mapView convertPoint:pt toCoordinateFromView:self.mapView]; 
    //add code here for annotation 
} 
```

然后添加注释 - 本教程[http://www.raywenderlich.com/21365/introduction-to-mapkit-in-ios-6-tutorial](http://www.raywenderlich.com/21365/introduction-to-mapkit-in-ios-6-tutorial)应该可以帮助您 - 在同一站点上也有 iOS5 版本。

# xml - Silverlight 项目方向图

> ID：14978204
> 
> 赞同：-2
> 
> 时间：2013-02-20T11:01:07.923
> 
> 标签：xml, silverlight, diagram

大家，早安 ！

我刚刚在 Silverlight 5 下启动了一个新项目：

该项目将创建一个简单的层次图并生成一个 XML 文件以将其导出。这是我想要的示例：

![](../Images/aad80e977a25c446f815e280621950b8.png)

在每个文件或选择等中...我想存储一些信息（名称、日期等...），并且可以通过 PopUpWindow 方式进行编辑。在设计结束时，用户可以将所有这些信息导出为 XML 文件。

所以，我在这里问你一些建议，以简单的方式做到这一点。谢谢和问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:17:54.587

当然，一种简单的方法是使用现有的图表控制库之一来完成这项任务！

[http://www.google.com/#hl=en&q=silverlight+diagramming+control](http://www.google.com/#hl=en&q=silverlight+diagramming+control)

有很多优秀的商业库和开源项目可以完成这类任务。只选择最适合您的一款！可能任何商业图书馆都可以很好地满足您的要求，而且大多数开源图书馆也很可能会满足您的要求。

# erlang - 获取表的最后一个值

> ID：14978206
> 
> 赞同：-3
> 
> 时间：2013-02-20T11:01:12.030
> 
> 标签：erlang

我有一个有这个记录的表人：

```
-record(person, {id, firstname, lastname, address}). 
```

我想开发一个函数来检索这个表的最后一个 id

我尝试使用此功能：

```
get_userId() ->
    Q = qlc:q([{X#person.id} || X <- mnesia:table(person)
                ]),
    case do(Q) of
        [{H}] ->
            {ok, H};
        [] ->
            {error, notfound}
    end. 
```

我用这段代码做测试

```
test()->
    case get_userId() of
         {ok, H}->io:format("~s~n",[H]);

         [] ->
            {error, notfound}
     end. 
```

但是当我进行测试时出现错误

```
2> model:test().
** exception error: no case clause matching [{238},
                                             {82},
                                             {76},
                                             {257},
                                             {141},
                                             {2},
                                             {315},
                                             {336},
                                             {275},
                                             {88},
                                             {326},
                                             {211},
                                             {81},
                                             {333},
                                             {351},
                                             {214},
                                             {64},
                                             {265},
                                             {210},
                                             {90},
                                             {302},
                                             {98},
                                             {212},
                                             {197},
                                             {194},
                                             {132},
                                             {226},
                                             {3},
                                             {...}|...]
     in function  model:get_userId/0
     in call from model:test/0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:49:05.480

问题是返回的值`do(Q)`是一个包含许多元素的列表。您会在错误报告中看到它们。但是，您仅匹配此值的模式将匹配具有**一个**元素`[{H}]`的列表，没有元素的列表，空列表`[]`。因此，您会收到一个`case_clause`错误，因为没有任何子句匹配。

# php - PDO - fetchAll 语法不起作用

> ID：14978207
> 
> 赞同：0
> 
> 时间：2013-02-20T11:01:13.730
> 
> 标签：php, pdo

> 一般错误：2014 在其他无缓冲查询处于活动状态时无法执行查询。考虑使用 PDOStatement::fetchAll()。或者，如果您的代码只针对 mysql 运行，您可以通过设置 PDO::MYSQL_ATTR_USE_BUFFERED_QUERY 属性来启用查询缓冲。

我的代码：- 创建一个选择标签并用数据库中的记录填充它

```
<?php
    echo "<select name='test'>";
    $call = $dbh->prepare('call listmfg_codes()');
    $call->execute();
    $result = $call->fetchALL(PDO::FETCH_COLUMN, 0);
    foreach($result as $row)
    {
?>      
    <option value="<?php echo $row['mfg_code'];?>"><?php echo $row['mfg_code'];?>      </option>";
<?php       
}
echo "</select>"; 
?> 
```

它似乎不起作用。请指教。谢谢

* * *

然后我再次尝试修改脚本，以适应 closeCurosr() 和 fetchAll()。还是不行

```
<?php
....
$stmt_call -> closeCursor();

echo "<select name='test'>";
$stmt_call = $dbh->prepare('call listmfg_codes()');
$stmt_call->execute();
foreach ($stmt_call -> fetchAll() as $row)
{
?>
<option value="<?php echo $row['mfg_code'];?>"> <?php echo $row['mfg_code'];?> </option>";
<?php       
}
echo "</select>";
?> 
```

即使包含 fetchAll() 和 closeCursor()，同样的错误仍然存​​在。

我仍在寻找 stachOverFlow 之外的答案。请告知谢谢克莱门特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:04:53.590

以下代码适用于我。

```
<?php
    echo "<select name='test'>";
   $call = $dbh->prepare("SELECT DISTINCT(mfg_code) FROM test");
    $call->execute();
    $result = $call->fetchALL(PDO::FETCH_COLUMN, 0);
    foreach($result as $row)
    {
?>      
    <option value="<?php echo $row['mfg_code'];?>"><?php echo $row['mfg_code'];?>      </option>";
<?php       
}
echo "</select>"; 
}

?> 
```

# c - 长比较

> ID：14978211
> 
> 赞同：0
> 
> 时间：2013-02-20T11:01:24.583
> 
> 标签：c, long-integer

我有以下代码

```
long x;
scanf("%ld",&x)
if(x==-1) // does this comparison is allowed
    printf("just test\n"); 
```

在比较之前`long`参数是否需要任何转换？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T11:03:53.830

`-1`是一个小数`int`。`int`从to有一个隐式转换（提升）`long`，因此`-1`会自动“转换”为`long`.

此外，两者`-1`和`x`都是有符号类型。不需要任何额外的演员表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T11:24:19.077

正如meh所说，那很好。如果你想避免“类型焦虑”，你*可以*让文字有 type `long`：

```
if(x == -1l)
          ^
          |
     lower-case 'L'
    means "long int" 
```

但在某些情况下，这本身就有点让人焦虑。

# sql-server-2008-r2 - 尝试安装 SQL Server 2008 时出错

> ID：14978216
> 
> 赞同：0
> 
> 时间：2013-02-20T11:01:54.630
> 
> 标签：sql-server-2008-r2, windows-xp

当我尝试运行 setup.exe 开始安装时，我在 windows_xp 中收到以下错误：

Microsoft .NET Framework CAS 策略管理器遇到问题，需要关闭。

这是错误签名中的内容： AppName: caspol.exe AppVer: 2.0.50727.3053 AppStamp:4889dd08 ModName: mscorwks.dll ModVer: 2.0.50727.3607 ModStamp:4add5446 fDebug: 0 Offset: 000d0494

我已尝试完全删除并重新安装我的所有 .net 安装，但并没有解决问题。这很奇怪，因为有一次我尝试运行 setup 我得到了两个应用程序事件，但随后的尝试没有产生更多事件。

第一个事件的 id 是 1023：

.NET 运行时版本 2.0.50727.3607 - 致命的执行引擎错误 (7A09795E) (80131506)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:24:18.843

卸载可能没有删除所有对象，例如注册表项。

这可能有一些用处，但我无法验证自己没有使用它的成功率。

[http://www.justanswer.com/computer/5gtob-microsoft-net-framework-cas-policy-manager-encountered.html](http://www.justanswer.com/computer/5gtob-microsoft-net-framework-cas-policy-manager-encountered.html)

# html - 使用引导程序使用单选按钮进行选项卡控制

> ID：14978224
> 
> 赞同：21
> 
> 时间：2013-02-20T11:02:09.987
> 
> 标签：html, twitter-bootstrap

我正在尝试使用单选按钮控制选项卡以更改计划屏幕的内容区域。除了单选按钮不检查之外，这工作正常。

有人知道如何解决这个问题吗？

```
<div>
    <div>
        <input id="optDaily" name="intervaltype" checked type="radio" data-target="#scheduleDaily" data-toggle="tab">
        <label for="optDaily">Daily</label>
    </div>
    <div>
        <input id="optWeekly" name="intervaltype" type="radio" data-target="#scheduleWeekly" data-toggle="tab">
        <label for="optWeekly">Weekly</label>
    </div>
    <div>
        <input id="optMonthly" name="intervaltype" type="radio" data-target="#scheduleMonthly" data-toggle="tab">
        <label for="optMonthly">Monthly</label>
    </div>
</div>

<div class="tab-content">
    <div id="scheduleDaily" class="tab-pane active schedule-pane" >
        Daily
    </div>

    <div id="scheduleWeekly" class="tab-pane schedule-pane" >
        Weekly
    </div>

    <div id="scheduleMonthly" class="tab-pane schedule-pane" >
        Montly
    </div>
</div> 
```

这是 jsfiddle [http://jsfiddle.net/nEWMq/中的示例](http://jsfiddle.net/nEWMq/)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-21T04:28:16.513

由于[此代码](https://github.com/twbs/bootstrap/blob/v2.3.0/js/bootstrap-tab.js#L140)，未检查单选按钮：

```
e.preventDefault() 
```

要解决此问题，`data-toggle="tab"`请从单选按钮中删除，然后添加以下 jQuery 代码：

```
$('input[name="intervaltype"]').click(function () {
    $(this).tab('show');
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-11-20T23:49:44.587

Bootstrap 4.3.1 工作选项卡作为单选按钮

```
$(document).ready(function () {
  $('input[name="intervaltype"]').click(function () {
      $(this).tab('show');
      $(this).removeClass('active');
  });
})
```

```
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"> 
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> 
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script> 
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script> 

<div class="nav nav-tabs" role="tablist">
<div>
    <input id="optDaily" checked name="intervaltype" type="radio" data-target="#scheduleDaily">
    <label for="optDaily">Daily</label>
</div>
<div>
    <input id="optWeekly" name="intervaltype" type="radio" data-target="#scheduleWeekly">
    <label for="optWeekly">Weekly</label>
</div>
<div>
    <input id="optMonthly" name="intervaltype" type="radio" data-target="#scheduleMonthly">
    <label for="optMonthly">Monthly</label>
</div>
</div>
<div class="tab-content">
    <div id="scheduleDaily" class="tab-pane active">Daily</div>
    <div id="scheduleWeekly" class="tab-pane">Weekly</div>
    <div id="scheduleMonthly" class="tab-pane">Montly</div>
</div>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-21T19:23:35.073

试试这个对我有用

```
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet" type="text/css" />

<div class="container">
	<div class="row">
		<div class="span12">
			<p class="lead">Bare minimum radio button tabs example:</p>

			<div id="tab" class="btn-group" data-toggle="buttons">
				<a href="#prices" class="btn btn-default active" data-toggle="tab">
                    <input type="radio" />Prices</a>
				<a href="#features" class="btn btn-default" data-toggle="tab">
                    <input type="radio" />Features</a>
				<a href="#requests" class="btn btn-default" data-toggle="tab">
                    <input type="radio" />Requests</a>
				<a href="#contact" class="btn btn-default" data-toggle="tab">
                    <input type="radio" />Contact</a>
			</div>

			<div class="tab-content">
				<div class="tab-pane active" id="prices">Prices content</div>
				<div class="tab-pane" id="features">Features Content</div>
				<div class="tab-pane" id="requests">Requests Content</div>
				<div class="tab-pane" id="contact">Contact Content</div>
			</div>
		</div>
	</div>
</div>
```

# c++ - 将 GLSL 着色器纹理转换为 OpenCV

> ID：14978226
> 
> 赞同：1
> 
> 时间：2013-02-20T11:02:11.503
> 
> 标签：c++, opencv, opengl-es

我正在尝试将片段着色器生成的纹理转换为opencv。我在 beagleboard 上使用 opengles2 运行着色器。我认为我的驱动程序存在一些兼容性问题，或者在与 OpenCV 结合时出现了一些错误。所以基本上，我有一个着色纹理，然后我对它进行了一些处理，然后我将它保存，我需要再次将结果显示在四边形上。这是绘图的代码。它每帧执行一次。

```
 // Bind the base map
        glActiveTexture ( GL_TEXTURE0 );
        glBindTexture ( GL_TEXTURE_2D, userData->baseMapTexId );
       //  Set the base map sampler to texture unit to 0
        glUniform1i ( userData->baseMapLoc, 0 );
        cv::Mat img(1024, 1024, CV_8UC3);
        //cv::Mat flipped;
        cv::Mat thresholded;
        glPixelStorei(GL_PACK_ALIGNMENT, (img.step & 3) ? 1 : 4);
        glReadPixels(0, 0, img.cols, img.rows, GL_LUMINANCE, GL_UNSIGNED_BYTE, img.data);
       // cv::flip(img, flipped, 0);
        cv::threshold(img, thresholded, 20, 255, CV_THRESH_BINARY );

        GLuint textureID;
        glGenTextures(1, &textureID);
        glBindTexture(GL_TEXTURE_2D, textureID);
        GLenum inputColourFormat = GL_LUMINANCE;

        // Create the texture
        glTexImage2D(GL_TEXTURE_2D,     // Type of texture
                     0,                 // Pyramid level (for mip-mapping) - 0 is the top level
                     GL_RGB,            // Internal colour format to convert to
                     thresholded.cols,          // Image width  i.e. 640 for Kinect in standard mode
                     thresholded.rows,          // Image height i.e. 480 for Kinect in standard mode
                     0,                 // Border width in pixels (can either be 1 or 0)
                     inputColourFormat, // Input image format (i.e. GL_RGB, GL_RGBA, GL_BGR etc.)
                     GL_UNSIGNED_BYTE,  // Image data type
                     thresholded.ptr());        // The actual image data itself
        // Bind texture
        glBindTexture(GL_TEXTURE_2D, textureID);

        glDrawElements ( GL_TRIANGLES, 6, GL_UNSIGNED_SHORT, indices );

        glDeleteTextures(1, &textureID);

       eglSwapBuffers ( esContext->eglDisplay, esContext->eglSurface ); 
```

# sql - Oracle：混合IN和LIKE，可以吗？

> ID：14978231
> 
> 赞同：0
> 
> 时间：2013-02-20T11:02:20.637
> 
> 标签：sql, oracle

有可能做这样的事情吗？

IE。

IN ('%1', '%2')

**值不少**

你将如何解决这个任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:35:53.887

您也可以使用 REGEXP_LIKE 代替 LIKE。在这种情况下它可以更加灵活。

要获得以“1”或“2”结尾的所有内容，只需使用：

```
SELECT * FROM table_name WHERE REGEXP_LIKE(col_name, '[12]$') 
```

[12] 表示匹配 1 或 2。 $ 表示匹配字符串的结尾。

如果你需要这样的东西：

```
LIKE '%1' OR LIKE '%2' or LIKE '%A' or LIKE '%W' 
```

...您只需在方括号内添加其他字符：

```
SELECT * FROM table_name WHERE REGEXP_LIKE(col_name, '[12AW]$') 
```

或者，如果你想要*任何*以数字结尾的东西，你可以使用这个：

```
SELECT * FROM table_name WHERE REGEXP_LIKE(col_name, '[[:digit:]]$' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T11:06:57.510

如果您只有几个，只需将它们与`or`：

```
column like '%1' or column like '%2' or... 
```

如果你有很多，你可以创建一个包含模式的表并加入它。

```
create table matches (
   match char(10)
);

insert into matches values
    ('%1'),('%2'),...;

select * from table
    inner join matches on table.column like matches.match; 
```

如果单行匹配多个模式，则重复行会出现一些问题，但您可以根据您想要的最终输出类型来修改它。

作为第三种选择，您可以使用`substr()`而不是`like`它们的长度相同：

```
select * from table where substr(column,-1,1) in ('1','2',...) 
```

这将检查最后一个字符是否在值集中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:06:36.603

使用 like 本身怎么样？

```
Column LIKE '%1' OR Column LIKE '%2' 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-20T21:39:50.940

与其他示例基本相同，但最接近您的示例：

```
SELECT deptno, empno, ename FROM scott.emp
 WHERE job IN 
   (SELECT job FROM scott.emp WHERE job Like ('SALE%') OR job Like ('MANAG%'))
/ 
```

# python - llvm 中的虚拟表 (llvm-py)

> ID：14978233
> 
> 赞同：4
> 
> 时间：2013-02-20T11:02:21.290
> 
> 标签：python, compiler-construction, llvm, vtable, llvm-ir

我正在使用 llvm-py 为一些人工创建一个 DIY 编译器，并且需要在全球范围内有一个虚拟方法表。我的概念是有几个函数指针数组（每个类一个）。不幸的是，没有用于全局范围的 LLVM IR Builder，我不能使用 ptrtoint 来获得所有数组元素的统一类型（否则我会将函数地址存储为 64 位整数并在调用之前将它们转换为适当的类型）。你知道任何合理的解决方案吗？也可以用 C++ LLVM api 来说明，因为 llvm-py 非常相似。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T12:07:15.770

确实，`IRBuilder`不会公开一个接口来执行此操作，但您可以手动创建它 - 例如通过使用`GlobalVariable`. 您可以使用转换常量表达式将所有指针存储在数组中，即通过生成：

```
@global = global [4 x i64*] [
  i64* bitcast (void()* @f to i64*),
  i64* bitcast (float(i32)* @g to i64*),
  ...
] 
```

因此，用于`ConstantExpr::getBitCast()`生成从`Function`到数组元素类型的强制转换（最好是指针，我看不到存储 的优势`i64`）。然后`GlobalVariable`在模块中创建一个新的并使用您创建的所有常量表达式对其进行初始化。

# django - Django：混合翻译问题

> ID：14978236
> 
> 赞同：0
> 
> 时间：2013-02-20T11:02:42.220
> 
> 标签：django, internationalization, http-headers

我将我的应用程序配置为支持 2 种语言：英语和意大利语。在我的 settings.py 中，我指定了与 i18n 相关的内容，如下所示：

```
USE_I18N = True
USE_L10N = True
USE_TZ = True
LANGUAGES = (
    ('en', 'ENGLISH'),
    ('it', 'ITALIAN'),
) 
```

然后我为每个应用程序创建了一个“locale”文件夹，并使用以下命令生成 .po/.mo 文件：

```
django-admin.py makemessages -l en --no-location --no-obsolete
django-admin.py makemessages -l it --no-location --no-obsolete
django-admin.py compilemessages 
```

一切正常，但我有一个模板，其中两种翻译混合在一起（即：部分文本是意大利语，其他是英语）。我认为问题与我的浏览器（Chrome）如何发送语言标头（当前：）有关`Accept-Language: it,en-US;q=0.8,en;q=0.6`。我机器上的其他浏览器（如 Firefox）正在发送：`Accept-Language: en-US,en;q=0.5` 好的，这可能是与“奇怪的浏览器配置”有关的个人问题，但出现这样的结果是不可接受的……我怎样才能避免这个问题并获得连贯的翻译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:38:23.877

是否有可能有一些内容来自数据库，因此没有提供翻译？

另一方面，在 .po 文件或 .html 文件中呈现多行字段可能是问题（确保所有内容都被 {% trans ... %} 包装。

最后，如果在 Chrome 中您在意大利网站上要求翻译英文，它是否会为您提供所有英文内容，反之亦然？

# asp.net - 使用 EF5 和 Newtonsoft.Json 的自引用循环

> ID：14978238
> 
> 赞同：2
> 
> 时间：2013-02-20T11:02:45.693
> 
> 标签：asp.net, json, entity-framework, serialization

我首先将 MVC4 与 EF5 数据库一起使用，并将`Newtonsoft.Json`对象序列化为 JSON，例如在 Web API 控制器中。

为了避免自引用循环的问题，我将属性设置为`[JsonIgnore]`我生成的类中的特定集合。

我现在的问题是，每次我更新我的模型时，我都必须将属性读取到类中。

我怎样才能避免这种情况？我想我必须编辑`DBModel.tt`脚本？我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:41:54.857

您应该能够使用具有 MetadataType 属性的元数据类。如果您生成的类是：

```
public partial class MyClass{

    public string SomeProperty {get; set; }

    public string SomePropertyToIgnore {get; set; }
} 
```

然后你需要像这样创建一个元数据类（在同一个命名空间中）：

```
public class MyClass_Metadata{
    [JsonIgnore]
    public string SomePropertyToIgnore {get; set; }
} 
```

创建应用了 MetadatType 属性的生成类的一部分（在同一命名空间中）：

```
[MetadataType(typeof(MyClass_Metadata))]
public partial class MyClass{
} 
```

参考： http: [//msdn.microsoft.com/en-us/library/ee707339 (v=vs.91).aspx](http://msdn.microsoft.com/en-us/library/ee707339(v=vs.91).aspx)

# networking - 如何访问机器？配置有相同私有 IP 的路由表到不同的网络接口

> ID：14978240
> 
> 赞同：-1
> 
> 时间：2013-02-20T11:02:53.100
> 
> 标签：networking, network-programming, virtualbox

我需要启动具有相同私有 ip（不同 vpn）并连接不同接口的机器。我改变了我的路由表如下：

```
**Destination    Gateway           Genmask         Flags Metric Ref    Use Iface**

192.168.79.0       *                255.255.255.0   U     0      0        0 vboxnet1

192.168.79.0       *               255.255.255.0   U     0      0        0 vboxtap0

192.168.79.0       *               255.255.255.0   U     0      0        0 vboxnet2

192.168.79.0       *               255.255.255.0   U     0      0        0 vboxnet3 
```

现在，如果我从我的主机启动两个具有相同 ip(192.168.79.1) 且具有不同接口 vboxnet1、vboxnet0 的虚拟机，我只能 ping vboxnet1 机器。

有没有办法同时使用接口和ip连接机器？这样通信将通过接口进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:12:14.113

模拟具有 2 台设备的网络，具有相同的 IP 与使用硬件 = IP 冲突进行模拟相同。它们确实有不同的 MAC 地址，但它们在 LAN 中争夺相同的 IP。我建议使用不同的 IP。但是，如果您仍想使用相同的 IP 作为一种故障保护，请尝试在两个（虚拟）设备上设置 VRRP：

[http://en.wikipedia.org/wiki/Virtual_Router_Redundancy_Protocol](http://en.wikipedia.org/wiki/Virtual_Router_Redundancy_Protocol)

# asp.net-mvc - 如何处理对集合的每一行重复相同形式的 MVC 模型绑定前缀？

> ID：14978241
> 
> 赞同：3
> 
> 时间：2013-02-20T11:02:55.170
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-binding

我的主视图模型有一个 ChildViewModel 的集合。在视图中，我遍历集合并调用 EditorFor()，如下所示：

```
@for (int i = 0; i < Model.Children.Count; i++)
{
    @Html.EditorFor(m => m.Child[i]);
} 
```

编辑器模板如下所示：

```
@model ChildModel

@using (Html.BeginForm("EditChild", "MyController"))
{
    @Html.HiddenFor(m => m.ChildId)
    @Html.TextBoxFor(m => m.ChildName)
} 
```

这将生成标记，其中每个孩子都在一个单独的表单中，并且每个这样的表单都将有一个名称为 Child[0].ChildName 的输入控件。我为每个孩子使用单独的表单，因为孩子将在每一行显示一个，然后用户可以编辑和提交单行。

我的表单操作方法是：

```
[HttpPost]
public ActionResult EditChild(ChildViewModel form) { } 
```

问题是，当调用 this 时，模型的所有属性都将为空，因为模型绑定器不知道前缀。在某些情况下，我们可以使用 BindAttribute 告诉模型绑定器前缀，但在这种情况下，前缀不是常量：它将是 Child[0]、Child[1] 等。

**总之，我们希望为集合的每一行重复相同的表单，然后允许用户发布单个表单。在这种情况下，Web 如何处理 id、name、prefix 和 model 绑定？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T07:42:24.310

我和你有同样的问题，有我的解决方法，希望对你有帮助。

**在 EditorTemplate 或 Partial View 中添加隐藏输入**

```
<input type="hidden" name="__prefix" value="@ViewData.TemplateInfo.HtmlFieldPrefix" /> 
```

**定义自定义模型绑定器并覆盖 BindModel 方法**

```
public class CustomModelBinder : DefaultModelBinder
{
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var prefixValue = bindingContext.ValueProvider.GetValue("__prefix");
        if (prefixValue != null)
        {
            var prefix = (String)prefixValue.ConvertTo(typeof(String));
            if (!String.IsNullOrEmpty(prefix) && !bindingContext.ModelName.StartsWith(prefix))
            {
                if (String.IsNullOrEmpty(bindingContext.ModelName))
                {
                    bindingContext.ModelName = prefix;
                }
                else
                {
                    bindingContext.ModelName = prefix + "." + bindingContext.ModelName;

                    // fall back
                    if (bindingContext.FallbackToEmptyPrefix && 
                        !bindingContext.ValueProvider.ContainsPrefix(bindingContext.ModelName))
                    {
                        bindingContext.ModelName = prefix;
                    }
                }
            }
        }
        return base.BindModel(controllerContext, bindingContext);
    }
} 
```

模型绑定器将修剪前缀并使默认模型绑定工作。

# c++ - std::map 中的智能指针

> ID：14978243
> 
> 赞同：1
> 
> 时间：2013-02-20T11:03:00.723
> 
> 标签：c++, map, smart-pointers, assign, auto-ptr

我已经定义了一个类`myClass`，它的一个数据成员是

```
std::map<int,data*> dataMap 
```

数据定义为

```
struct data
{
    int d1;
    int d2;
    std::string d3;
} 
```

向 dataMap 中插入数据的过程如下：`dataMap[key] = new data;` 以下赋值会导致问题：

```
myClass a1,a2;
//init a1;
a2 = a1; 
```

我想对数据使用 auto_ptr 而不是 data*。我该怎么做？ - 因为在 a2 被破坏后破坏“a1 数据的坏指针”存在问题。`std::map<int,std::auto_ptr<data> >`编译有问题

**Upd**正如你所建议的，我使用 std::shared_ptr 但它仍然会导致问题：在`VS10`

```
error C2440: 'delete' : cannot convert from 'std::tr1::shared_ptr<_Ty>' to 'void *'
1>          with
1>          [
1>              _Ty=data
1>          ] 
```

您能否编写示例代码来指出使用 shared_ptr 的正确方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T11:05:52.703

一般来说，使用是一个坏主意（它已被弃用），[当与标准容器结合使用时](https://stackoverflow.com/questions/111478/why-is-it-wrong-to-use-stdauto-ptr-with-standard-containers)`auto_ptr`甚至更糟。

Prefer the better designed `std::shared_ptr` or `std::unique_ptr` ([depending on your situation](https://stackoverflow.com/questions/569775/smart-pointers-boost-explained)) and your code will work with one exception: You need to construct the correct smart pointer type when trying to insert it into the container, as the smart pointers are not implicitly constructible from raw pointers.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:06:29.363

`std::auto_ptr` is not safe to be used in containers, that why it's been deprecated. Use `std::shared_ptr` or `boost::shared_ptr` if available.

You could also use `std::unique_ptr` if appropriate and available, but it is a bit trickier.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T11:07:00.717

You can use either `std::unique_ptr` in C++11 if you have a unique ownership (ie, the object will never be shared and only the creator can destruct it again) or you can use `std::shared_ptr` if you will have shared ownership.

If you're using C++03 you can use `boost::shared_ptr` or `boost::unique_ptr` instead.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T12:05:04.017

For this error:
`error C2440: 'delete' : cannot convert from 'std::tr1::shared_ptr<_Ty>' to 'void *'`
You don't need to delete an instant of shared_ptr. The shared_ptr would hold the resource (the `new data`) with a reference counter, and delete it automatically when the reference counter is 0, meaning that the resource was not used at all. See the [manual of shared_ptr](http://www.cplusplus.com/reference/memory/shared_ptr/) for detail

# sql - SQL 两张表并创建一个链接表

> ID：14978244
> 
> 赞同：10
> 
> 时间：2013-02-20T11:03:04.653
> 
> 标签：sql, sql-server, tsql, relational-database, relational

我有两个表：员工（ID，姓名，地址）和商店（ID，地址），我想记录在每个商店工作的人的信息。

我想制作一个名为 Employee_List 表的新表。我的问题：

1- Employee_List 和 Employee 有一对多的关系，对吧？

2-要存储的 Employee_list 具有一对一的关系，对吗？

3- 如何为 Employee_List 表定义外键和主键？

![在此处输入图像描述](../Images/02b1a0d65fb7b25cf30a1d8170cfd1dd.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-20T11:08:49.783

Employee_list 应该有：

*   employee_listid (INT PK)
*   employee_id (INT FK)
*   store_id (INT FK)

我建议更改表名以表示复合表，即 `EmployeeStores`. 这将使您的架构具有可扩展性，员工可以在多个商店工作。

在`SQL Server`：

```
CREATE TABLE EmployeeStores
(
   EMPLOYEEStoreID   INT IDENTITY,
   EMPLOYEEID INT FOREIGN KEY REFERENCES Employee(employee_id),
   STOREID INT FOREIGN KEY REFERENCES Store(store_id)
) 
```

# perl - Perl：如何 tar 和解压缩目录的所有内容，包括文件和子目录

> ID：14978248
> 
> 赞同：0
> 
> 时间：2013-02-20T11:03:09.823
> 
> 标签：perl

我正在编写一个 Perl 脚本，在脚本的末尾，我想将特定目录（比如`selected`）的所有内容 tar 为 say `selected.tar`。

现在，我需要`selected.tar`从另一个位置的另一个 perl 脚本解压到另一个`selected`目录。

这是我的绝对要求，我需要保留所有权限级别，并且 untar 应该在`SECURE_EXTRACT_MODE`.

总之，请告诉我如何 tar 和解压缩目录的所有内容，包括文件和子目录。

高度赞赏在这种情况下的任何帮助。

如果您需要更多详细信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:57:27.530

要做到这一点而不需要花费`tar`你将需要 [`Archive::Tar::Streamed`](https://metacpan.org/module/Archive%3a%3aTar%3a%3aStreamed) 与 [`File::Find`](https://metacpan.org/module/File%3a%3aFind). 此外，每个文件必须足够小，才能完整地读入 perl 进程内存。

像这样的东西应该做你想做的事。

```
use strict;
use warnings;
use autodie;

use File::Find 'find';
use Archive::Tar::Streamed;

open my $fh, '>:raw', 'selected.tar';
my $tar = Archive::Tar::Streamed->new($fh);

find(sub { $tar->add($File::Find::name) }, '/path/to/selected');

close $fh; 
```

# java - jtree中的文件夹排序

> ID：14978253
> 
> 赞同：0
> 
> 时间：2013-02-20T11:03:34.567
> 
> 标签：java, swing, sorting, jtree, comparator

有没有办法对只有根（DefaultMutableTreeNode）的已经创建的树进行排序？它具有随机顺序的文件夹和文件（具有层次结构）。是否可以按字母顺序在文件顶部显示文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:13:06.020

您可以使用以下递归方法来实现，

```
public static DefaultMutableTreeNode sortTree(DefaultMutableTreeNode root) {
    {
        for (int i = 0; i < root.getChildCount() - 1; i++) {
            DefaultMutableTreeNode node = (DefaultMutableTreeNode) root
                    .getChildAt(i);
            String nt = node.getUserObject().toString();

            for (int j = i + 1; j <= root.getChildCount() - 1; j++) {
                DefaultMutableTreeNode prevNode = (DefaultMutableTreeNode) root
                        .getChildAt(j);
                String np = prevNode.getUserObject().toString();

                System.out.println(nt + " " + np);
                if (nt.compareToIgnoreCase(np) > 0) {

                    root.insert(node, j);
                    break;
                }
            }
            if (node.getChildCount() > 0) {
                node = sortTree(node);
            }
        }

        return root;
    }
} 
```

# c++ - 使用 C++ 的 Windows 上的异步对话框

> ID：14978257
> 
> 赞同：1
> 
> 时间：2013-02-20T11:03:50.083
> 
> 标签：c++, mfc, dialog, c++builder

现在我正在开发一个实时软件，但我让自己实现了表单 - 使用 C++Builder 2007 - 用于确认消息（你知道，那些带有 OK 和 Cancel 的对话框，或者只有在出错时才 OK），并且我读到 Windows MFC 上有一个 DialogBox 类。问题是调用会中断线程，直到在对话框上完成某些输入，这是我无法承受的，因为应用程序上可能正在发生其他事情。

我已经阅读了有关无模式对话框的信息，但我不确定它是否是我需要的或如何实现。Windows MFC 上是否有默认的异步对话框，如果有，我该如何调用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:43:34.347

你不需要线程，你需要无模式对话框......它们最终成为同一个调度线程上的窗口。

# macos - COCOA : 将应用程序置于前端，从 NPAPI 插件启动

> ID：14978266
> 
> 赞同：0
> 
> 时间：2013-02-20T11:04:20.210
> 
> 标签：macos, cocoa, nstask, nsworkspace

我有一个用于 MAC 的 NPAPI 插件，可以从服务器下载并运行应用程序。

当我使用 NSTask 打开应用程序时。该应用程序没有出现在前面。

```
NSBundle *bundle = [NSBundle bundleWithPath:AppPath];
NSString *path = [bundle executablePath];
NSTask *task = [[NSTask alloc] init];
NSArray *arguments;
arguments = [NSArray arrayWithObjects:AppParam,nil];

[task setLaunchPath:path];
[task setArguments:arguments];
[task launch]; 
```

我搜索了解决方案并想出了代码

```
int pid  = [task processIdentifier];
ProcessSerialNumber psn;
GetProcessForPID(pid, &psn);
SetFrontProcess(&psn); 
```

但是这段代码没有把应用程序带到前面然后我尝试了下面的代码。

```
NSRunningApplication *runapp = [NSRunningApplication runningApplicationWithProcessIdentifier:pid];
[runapp activateWithOptions:0]; 
```

这没有产生预期的结果。

经过一番搜索，我发现了一些建议使用 NSWorkspace 来启动和激活应用程序的帖子。我想出了代码。

```
[workspace
    launchApplicationAtURL:[bundle bundleURL]
    options:NSWorkspaceLaunchNewInstance
    configuration:[NSDictionary
        dictionaryWithObject:arguments
        forKey:NSWorkspaceLaunchConfigurationArguments]
    error:error]; 
```

这一切正常，但不是在一种情况下。当应用程序通过 NSworkspace 命令第一次下载并执行时，MAC 会提示一个对话框“是从 Internet 下载的应用程序。您确定要打开它吗”。

如果按下确定，应用程序会启动但不会出现在最前面。此对话框仅在应用程序通过 NSWorkspace 启动时出现。使用 NSTask 启动，MAC 在执行前不会提示对话框。

找不到解决问题的解决方案。我对 NSWorkspace 的确认对话框很满意，但是任何人都可以提出一些在单击“确定”后仍会将应用程序带到前面的建议。

我也试过用。

```
[[NSApplication sharedApplication] activateIgnoringOtherApps:YES];
[[NSWorkspace sharedWorkspace] activeApplication]; 
```

对此的任何帮助将不胜感激。提前致谢。

问候，

懒人编码器 7.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:45:04.447

`xattr`如果您想绕过对话框从而避免它产生的焦点问题，您可以在启动应用程序之前手动剥离隔离标志。

（这个问题实际上与 NPAPI 无关；您在独立应用程序中执行此操作时会有完全相同的行为集。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:52:02.227

通常，您可能不应该绕过隔离标志。需要这样做通常表明设计不佳。

NSWorkspace 将以用户级权限运行。NSTask 可以设置它的环境，即使它默认为父进程的环境。

# sql-server-2008 - 如何在 Microsoft visio 中将数据库图生成为 PDF？

> ID：14978268
> 
> 赞同：0
> 
> 时间：2013-02-20T11:04:23.573
> 
> 标签：sql-server-2008, database-design, database-schema, visio, database-diagramming

我正在尝试以以下方式在 visio 中生成数据库图。，

Start--> Microsoft visio -->File-->New-->Template Categories (DataBase and Software) -->Data Base Model Diagram，现在在这个.,

查看-->逆向工程师-->逆向工程师向导（Microsoft SQL Server）-->我的数据源名称、用户、密码（给出正确的详细信息）

这里我无法连接到我的数据库，也无法连接到我的用户服务器和我的本地系统数据库。我正在使用 Microsoft SQL Server 2008

有人可以帮忙吗

或者谁能​​告诉我其他将数据库图生成为 PDF 的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:55:21.343

由于 Visio 无法如此轻松地帮助我，而且我已经尝试了我的水平并且无法从中解决问题，所以我尝试了其他方式..，

[http://www.a-pdf.com/image2pdf/index.htm](http://www.a-pdf.com/image2pdf/index.htm)

这是一个链接，我尝试将 IMAGE 转换为 PDF 并发现它的质量也很好..

# html - html输入元素的高度不同，计算错误

> ID：14978270
> 
> 赞同：2
> 
> 时间：2013-02-20T11:04:25.200
> 
> 标签：html, css, input, firebug

我对输入元素的样式有疑问。firebug 的计算选项卡将字段的高度显示为 16px，尽管高度的 css 值为 18px。正如您在屏幕截图中看到的那样，输入区域应该与右侧的按钮一样高。

截屏：

![](../Images/19ba1e2b7f5c36d9bc508c05d060934f.png)

该站点主要是动态生成站点的静态 html 再造。虽然我用相应的类、名称和 ID 重新创建了整个结构。

值 16px 从未设置，我猜这是浏览器默认值，但为什么值 18px 被忽略？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:23:35.437

`<!DOCTYPE html .. etc.`站点的静态重建中缺少doctype 元素。这就是为什么高度计算错误的原因。

# javascript - 为浏览器宽度设置 cookie

> ID：14978277
> 
> 赞同：0
> 
> 时间：2013-02-20T11:04:48.860
> 
> 标签：javascript, jquery, cookiestore

我目前正在使用 cookie 来存储屏幕的宽度，但我想知道每次页面刷新时浏览器的宽度。

```
if(!isset($_COOKIE['screenwidth'])) 
{
    return "<script>
        if (window.outerWidth) {
            document.cookie='screenwidth='+window.outerWidth+'; path=/';location.reload(true);
        } else {
            document.cookie='screenwidth='+document.documentElement.clientWidth+'; path=/';location.reload(true);
        }
    </script>";
} 
```

这是我目前拥有的。有没有办法用jQuery设置宽度？我对此更加熟悉。另外，我将如何使用 JavaScript 设置宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:17:33.513

首先下载[**jQuery.Cookies**](https://github.com/carhartl/jquery-cookie)。

如下使用它。

```
<script type="text/javascript">

    $(document).ready(function ()
    {
        var checkCookie = $.cookie("browser_width");
        if (checkCookie != "")
        {
            alert(checkCookie);
        }
        else
        {
            $.cookie("browser_width", CODEFORBROWSERWIDTH);
        }
    });

</script>
```

# database - 一次下载一件事还是整个数据库？

> ID：14978278
> 
> 赞同：0
> 
> 时间：2013-02-20T11:04:51.473
> 
> 标签：database, performance

我实际上正在用 javascript 开发某种问答示例应用程序，最终将转换为智能手机应用程序。问题和答案在数据库中。

我的问题是这样的：每次我想在屏幕上提出一个问题时，应用程序都会与服务器建立一个 ajax 连接并检索完整的问答 json 对象......或者只检索所有问题和答案是否更好？时间和移动客户端内部的逻辑？

我想知道是否有一些指导方针或一些规则可以做出决定。

国际文凭组织

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:11:16.720

如果您知道客户可能需要所有数据，那么您可能应该一次性提供所有数据。该规则的例外情况是，如果数据太大并且如果一次全部使用会耗尽网络、CPU 或内存等资源。在这种情况下，小块是合适的。

# iphone - iOS 在对象中引用 NSMutableArray - 解密语法

> ID：14978279
> 
> 赞同：0
> 
> 时间：2013-02-20T11:04:52.447
> 
> 标签：iphone, xcode, nsmutablearray, addressbook

xCode iOS 未注册：

```
currentCard = [myBook getCard:cardIndex]; 
```

在对象（addressCard）中的特定索引（int index），NSMutableArray（book）中，对象（addressBook）中，为字符串调用get方法（名称）有些困难。

**基本上，iOS viewController 有自己的 addressBook 实例，它在它实例化的 NSMutableArray 中保存 addressCards。然而在 viewController 的 viewLoad 中，AddressBook 却没有拿到卡片。**

在这种特殊情况下，语法是否有某种特殊形式？

对 iOS 来说相当新，因为它的一个应用程序有几个文件，但主要问题与 addressBook.m 的 addCard 和 getCard 方法直接相关。该项目基于 Kochan 的学习 Objective-C 的课程，如果有人熟悉它（或者可以推荐更好的学习 iOS 的资源）。

```
Method within AddressBook.m

//Add a method for getting the current card in view
-(AddressCard*) getCard: (int) index{
    AddressCard *cardC = [book objectAtIndex:index];
    return cardC;    
}

ViewController.m

#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
{
    BOOL isNew;
    int cardIndex;
    AddressBook *myBook;
    AddressCard *currentCard;
    BOOL cardChanged;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    //Initialize the Address Book
    NSString *presetName1 = @"Dave Strider";
    NSString *presetName2 = @"Rose Tyler";
    NSString *presetName3 = @"Sherlock Holmes";

    NSString *presetEmail1 = @"TurntechGodhead@skaia.net";
    NSString *presetEmail2 = @"DoctorsBetterHalf@tardis.Who";
    NSString *presetEmail3 = @"SHolmes@221Baker.st";

    AddressCard *card1 = [[AddressCard alloc]init];
    AddressCard *card2 = [[AddressCard alloc]init];
    AddressCard *card3 = [[AddressCard alloc]init];

    [card1 setName: presetName1 andEmail:presetEmail1];
    [card2 setName: presetName2 andEmail:presetEmail2];
    [card3 setName: presetName3 andEmail:presetEmail3];

    [myBook addCard:card1];
    [myBook addCard:card2];
    [myBook addCard:card3];

    //set the addybook index to zero
    cardIndex = 0;

    //set card to current card
    //***** ISSUE IS HERE *****
    currentCard = [myBook getCard:cardIndex];

    //set field values ***** currentCard gains no variables. 
    [_nameField setText:[currentCard name]];
    [_emailField setText:[currentCard email]];

    isNew = false;
    cardChanged = false;

  //*****  TESTING SYNTAX *****
  // This method however works perfectly, the card, and its string are accepted ****
  //   [_nameField setText:[card1 name]];

   // [_nameField setText:presetName1];
   // [_emailField setText:presetEmail1];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)btnNext_touch:(id)sender {
//check bools

//go to next card, check for last.
    int i = [myBook entries];
    if (i == cardIndex)
    {cardIndex = 0;}
    else {
        cardIndex++;
    }

//reset current bools
    isNew = false;
    cardChanged = false;

    //set card to current card
    currentCard = [myBook getCard:cardIndex];

    //set field values
    [_nameField setText:[currentCard name]];
    [_emailField setText:[currentCard email]];

}

- (IBAction)nameFieldChanged:(id)sender {
    cardChanged = true;

    //    if (isNew != true)
    //  {

    //    [_nameField setText:[];
    //}   else{

    //}
}

- (IBAction)emailFieldChanged:(id)sender {
    cardChanged = true;
}

@end 
```

如果他们对理解这个小问题有额外的帮助，这里是其余的课程。

```
ViewController.h
//
//  ViewController.h
//  Lozano007-p4
//
//  Created by antonio a lozano ii on 2/19/13.
//  Copyright (c) 2013 antonio a lozano ii. All rights reserved.
//

#import <UIKit/UIKit.h>
#import "AddressBook.h"

@interface ViewController : UIViewController

@property (strong, nonatomic) IBOutlet UITextField *nameField;
@property (strong, nonatomic) IBOutlet UITextField *emailField;

@property (strong, nonatomic) IBOutlet UIButton *btnNext;

- (IBAction)btnNext_touch:(id)sender;

- (IBAction)nameFieldChanged:(id)sender;
- (IBAction)emailFieldChanged:(id)sender;

@end

AddressCard.h

//
//  AddressCard.h
//  Lozano007-p4
//
//  Created by antonio a lozano ii on 2/19/13.
//  Copyright (c) 2013 antonio a lozano ii. All rights reserved.
//

#import <Foundation/Foundation.h>
@interface AddressCard : NSObject <NSCopying, NSCoding>

@property (nonatomic, copy) NSString *name, *email;
-(void) setName: (NSString *) theName andEmail: (NSString *) theEmail;
-(void) assignName: (NSString *) theName andEmail: (NSString *) theEmail;
-(NSComparisonResult) compareNames: (id) element;
-(void) print;
@end

AddressCard.m
//
//  AddressCard.m
//  Lozano007-p4
//
//  Created by antonio a lozano ii on 2/19/13.
//  Copyright (c) 2013 antonio a lozano ii. All rights reserved.
//

#import "AddressCard.h"

@implementation AddressCard
@synthesize name, email;

-(void) setName: (NSString *) theName andEmail: (NSString *) theEmail
{
    self.name = theName;
    self.email = theEmail;
}

// Compare the two names from the specified address cards
-(NSComparisonResult) compareNames: (id) element
{
    return [name compare: [element name]];
}

-(void) print
{
    NSLog (@"====================================");
    NSLog (@"|                                  |");
    NSLog (@"| %-31s |", [name UTF8String]);
    NSLog (@"| %-31s |", [email UTF8String]);
    NSLog (@"|                                  |");
    NSLog (@"|                                  |");
    NSLog (@"|                                  |");
    NSLog (@"|       O                O         |");
    NSLog (@"====================================");
}

-(id) copyWithZone: (NSZone *) zone
{
id newCard = [[[self class] allocWithZone: zone]init];
              [newCard assignName: name andEmail: email];
              return newCard;
}

              -(void) assignName: (NSString *) theName andEmail: (NSString *) theEmail
{
                  name = theName;
                  email = theEmail;
}
              -(void) encodeWithCoder: (NSCoder *) encoder
{
                  [encoder encodeObject: name forKey: @"AddressCardName"];
                  [encoder encodeObject: email forKey: @"AddressCardEmail"];
}
              -(id) initWithCoder: (NSCoder *) decoder
{
    name = [decoder decodeObjectForKey: @"AddressCardName"];
    email = [decoder decodeObjectForKey: @"AddressCardEmail"];
    return self;
}

@end

AddressBook.h

//
//  AddressBook.h
//  Lozano007-p4
//
//  Created by antonio a lozano ii on 2/19/13.
//  Copyright (c) 2013 antonio a lozano ii. All rights reserved.
//

#import <Foundation/Foundation.h> 
#import "AddressCard.h"
@interface AddressBook: NSObject <NSCopying, NSCoding>

//{

 //Add a mutable array for the address cards
  //  NSMutableArray *cardArray;

//}

@property (nonatomic, copy) NSString *bookName;
@property (nonatomic, strong) NSMutableArray *book;
-(id) initWithName: (NSString *) name;
-(void) sort;
-(void) addCard: (AddressCard *) theCard;
-(void) sort2;
-(void) removeCard: (AddressCard *) theCard;
-(int) entries;
-(void) list;
-(AddressCard *) lookup: (NSString *) theName;

//Add a getMethod for the Current Display'd card.
-(AddressCard*) getCard: (int) index;
@end

AddressBook.m
//
//  AddressBook.m
//  Lozano007-p4
//
//  Created by antonio a lozano ii on 2/19/13.
//  Copyright (c) 2013 antonio a lozano ii. All rights reserved.
//

#import "AddressBook.h"

@implementation AddressBook

@synthesize book, bookName;

// set up the AddressBook's name and an empty book
-(id) initWithName: (NSString *) name
{
    self = [super init];

    if (self) {
        bookName = [NSString stringWithString: name];
        book = [NSMutableArray array];

    }

    return self;
}

-(id) init
{
    return [self initWithName: @"Unnamed Book"];
            }

// Write our own book setter to create a mutable copy
-(void) setBook: (NSArray *) theBook
{
 book = [theBook mutableCopy];
}

-(void) sort
{
[book sortUsingSelector: @selector(compareNames:)];
}

// Alternate sort using blocks
-(void) sort2
{
[book sortUsingComparator:
    ^(id obj1, id obj2) {
                    return [[obj1 name] compare: [obj2 name]];}];
}

-(void) addCard: (AddressCard *) theCard
{
    [book addObject: theCard];
}

-(void) removeCard: (AddressCard *) theCard
{
    [book removeObjectIdenticalTo: theCard];
}

-(int) entries
{
    return [book count];
}

-(void) list
{
    NSLog (@"======== Contents of: %@ =========", bookName);

    for ( AddressCard *theCard in book )
        NSLog (@"%-20s %-32s", [theCard.name UTF8String],
               [theCard.email UTF8String]);

    NSLog (@"==================================================");
}

// lookup address card by name — assumes an exact match

-(AddressCard *) lookup: (NSString *) theName
{
    for ( AddressCard *nextCard in book )
        if ( [[nextCard name] caseInsensitiveCompare: theName]
            == NSOrderedSame )
            return nextCard;

    return nil;
}

-(void) encodeWithCoder: (NSCoder *) encoder
{
    [encoder encodeObject:bookName forKey: @"AddressBookBookName"];
    [encoder encodeObject:book forKey: @"AddressBookBook"];
}

-(id) initWithCoder: (NSCoder *) decoder
{
    bookName = [decoder decodeObjectForKey: @"AddressBookBookName"];
    book = [decoder decodeObjectForKey: @"AddressBookBook"];

    return self;
}

// Method for NSCopying protocol

-(id) copyWithZone: (NSZone *) zone
    {
id newBook = [[[self class] allocWithZone: zone] init];

[newBook setBookName: bookName];

// The following will do a shallow copy of the address book
    [newBook setBook: book];

        return newBook;
    }

//Add a method for getting the current card in view
-(AddressCard*) getCard: (int) index{
    AddressCard *cardC = [book objectAtIndex:index];
    return cardC;

}
@end 
```

-- 再一次，代码并没有专门生成错误消息。更重要的是，顶部指定的代码行对代码没有任何影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:26:51.417

这是 ViewController 的全部来源吗？如果是这样，我看不到您在哪里创建了通讯簿实例。

通常，如果您向某事发送消息但没有任何反应，您应该检查“某事”是否为 nil。在你的 Java 时代，你会看到一个 NPE。在这种语言中，什么都不会发生。'myBook' 在这里可能为零。

像这样的事情`viewDidLoad`应该做：

```
myBook = [[AddressBook alloc] initWithName:@"Some Name"]; 
```

# asp.net - html 编码/解码 - ckeditor

> ID：14978281
> 
> 赞同：2
> 
> 时间：2013-02-20T11:05:00.863
> 
> 标签：asp.net, razor, ckeditor

我在 cshtml 页面中使用 ckeditor 将内容输入到我的数据库中，这些内容稍后将显示在带有 html 标签的页面上，以使文本更易于阅读。由于我通过 textarea 输入内容，我收到一条错误消息，指出我输入的 html 标签`<h1><p>`具有潜在危险。

为了绕过这个而不将 RequestValidation 设置为 false，在我的 cinfig.js 文件中我设置了：

```
config.htmlEncodeOutput = true; 
```

在我的页面中显示时，我正在从数据库中解码数据。

```
@Html.Raw(System.Web.HttpUtility.HtmlDecode(row.Memo)) 
```

这很好用。只有当我第二次尝试编辑数据库中的内容时才会遇到麻烦。

我在编辑器中显示如下：

```
<textarea class="ckeditor" id="editor1" name="Memo" rows="25" cols="120">@Memo</textarea> 
```

在`@Memo`文本区域中，当前数据库内容显示在编辑器中。问题是一旦将原始文本编码发送到数据库，我相信当它重新显示在编辑器中时，它仍然是编码的，当它需要解码时。因此，编辑器将编码标签视为文本，并在现有标签周围放置新标签，这会造成混乱。

任何想法将不胜感激。让我知道这是否需要更多说明。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:22:23.873

在我提交这个问题之后，我给了这个恰到好处的想法。

我曾经`@Html.Raw(System.Web.HttpUtility.HtmlDecode(row.Memo))`对要在页面上显示的数据进行解码，因此我可以在编辑器中使用`@Html.Raw(System.Web.HttpUtility.HtmlDecode(Memo))`代替`@Memo`来显示，从而纠正了我的问题。

# database - 为什么在 DB API 中如此调用游标？

> ID：14978283
> 
> 赞同：0
> 
> 时间：2013-02-20T11:05:17.320
> 
> 标签：database, database-connection

我想我会在其他一些 SE 网站上问这个问题，但我没能从所有候选人（SO、程序员、超级用户……？）中选出一个最好的，所以在这里问。

5 年多来，我一直在使用各种语言和堆栈中的各种 DB API，而且我从来没有费心去想它——为什么数据库 API 中的`cursor`对象被称为那个？仅仅是文化吗？传统，与 i/o 流中的状态有关吗？闪烁？哈！请有人告诉“我们”。

一个好的答案是尝试成为语言或堆栈不可知论者，或者参考通常解决问题的历史或文化起源（或其他任何东西）。

我对此很认真！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:09:52.197

游标不仅是流，而且是双向流。光标也可以*向后*移动。您可以通过它们修改数据。这使它们成为一种指向数据序列元素的指针。也许他们之所以得名，是因为文本光标非常相似。或者因为“指针”已经被当作一个概念。

# oracle - 使用 C++ 的 Oracle 数据库服务器连接

> ID：14978285
> 
> 赞同：1
> 
> 时间：2013-02-20T11:05:22.893
> 
> 标签：oracle, visual-c++, visual-studio-2005, oledb

我在 Linux 环境中编写了 C++ 程序。目前我需要在 Visual Studio 2005 版本上工作。

我有一项任务需要从 Oracle 数据库中获取一些数据。我以前从未做过这种类型的任务。

我刚刚搜索了一下，发现它可以通过 C++ 和 C# 实现。由于我只能使用 Visual Studio 2005，哪种方法应该更好——C++ 还是 C#？

我从谷歌发现我可以使用 C++ 使用 OLE DB 或 OCCI。如果它的 C#，我应该使用 OLE DB。

您能否建议我应该为这项任务使用哪种语言和方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:39:02.277

**警告**

我严重警告您不要使用 Visual Studio 2005，不是因为它不是一个很好的工具，而是因为它已经严重过时，Visual Studio 2008、2010 和现在的 2012 带来了很大的改进。自 2005 年以来，托管 C++ 有了很大改进。新的扩展和附加组件不再随 2005 支持而发布，并且对许多技术（例如 Team Foundation Server、WCF、Windows Presentation Foundation 等）的支持没有得到很好的支持或在此版本上完全支持。根据您正在尝试做的事情以及您计划的高级程度，您应该研究免费且受商业项目支持的 Visual Studio Express 版本。

**C# 与 C++**

我不会讨论 C# 还是 C++ 更好，如果你精通 C++，那么继续使用 C++ 可能更容易。就我个人而言，我发现 C# 更容易编程，因为 .NET 框架抽象出了构建复杂应用程序的许多困难部分。这将完全由您做出决定。

**数据库技术**

要连接到 Windows 平台上的 Oracle 数据库，您有多种选择：

*   ODBC，OleDB 的前身。它有很好的文档记录，您可能会找到大量关于如何从 C++ 使用它的示例，也不会抽象数据库，并且可能需要更多的本地设置。自 OleDB 和 ADO.NET 发布以来，对 ODBC 的支持正在下降。
*   Ole DB，对数据库提供者进行了抽象的改进版本，因此您（理论上）应该能够切换数据库平台。对本机 C++、托管 C++ 和 C# 的良好支持。
*   ADO.NET 与 Oracle Data Provider for .NET 相结合，为 C# 和托管 C++ 提供了很好的支持。通过抽象可以很容易地在不同的数据库上重用。设计器支持和代码生成（[实体框架](http://download.oracle.com/oll/obe/EntityFrameworkOBE/EntityFrameworkOBE.htm)）。
*   Oracle Native API (Oracle Client)，深度原生集成，在执行方面可能是最快的，Oracle 数据库平台的专用代码，不能重用。我怀疑您不会在 Visual Studio 中找到任何形式的设计器支持，因为现在这一切都集中在 ADO.NET 上。

# android - Android @RestService 通过 androidannotations 注入导致 nullPointerException

> ID：14978288
> 
> 赞同：3
> 
> 时间：2013-02-20T11:05:29.570
> 
> 标签：android, rest, service, null, android-annotations

我在这一行 wsresult = restClientInterface.skuska(); 上遇到空指针异常；用于restClientInterface。这是我的示例：

```
import org.springframework.http.converter.json.GsonHttpMessageConverter;

import com.googlecode.androidannotations.annotations.rest.Get;
import com.googlecode.androidannotations.annotations.rest.Rest;

@Rest(rootUrl = "http://my_ip_address/webresources", converters = {GsonHttpMessageConverter.class})
public interface RestClient {

    @Get("/persons")
    String skuska();    
} 
```

我正在使用它片段

```
 @EFragment
public class HomeFragment extends Fragment {

private Button ws;
private TextView wsstring;
private String wsresult;        

        @RestService
        RestClient restClientInterface;

        wsstring = (TextView) view.findViewById(R.id.wsstring);

                ws = (Button) view.findViewById(R.id.ws);
                ws.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {
                        getWSResult();
                        wsstring.setText(wsresult);         
                    }
                });

                return view;
            }

            @Background
            public void getWSResult() {
                 wsresult = restClientInterface.skuska();       
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:13:25.117

您的 RestClient 应该在您的片段准备好后由 AA 正确注入。你能复制/粘贴生成的类来看看发生了什么吗？

此外，您正在调用`getWSResult()`（这是一个后台方法），并且就在您在 TextView 中设置 Rest 调用的结果之后。但是您不能说结果是否在您尝试将其设置到您的对象之前到达。

您应该尝试使用这样的代码：

```
@EFragment(R.layout.homeFragment)
public class homeFragment extends Fragment {

    @ViewById
    Button ws;

    @ViewById
    TextView wsstring;

    @RestService
    RestClient restClientInterface;

    private String wsresult;

    @Click
    void wsstringClicked() {
        getWSResult();
    }

    @Background
    void getWSResult() {
        wsresult = restClientInterface.skuska();
    }

    @UiThread
    void updateUI() {
        wsstring.setText(wsresult);
    }
} 
```

编辑：刚刚`private`在`@ViewById`带注释的字段上删除

EDIT2：只是想一想。你是如何在你的活动中使用这个片段的？您使用的是`@FragmentById`还是`@FragmentByTag`？

# java - 与 Bean Validation API 结合使用时，Hibernate 不遵循 JPA 规范？

> ID：14978291
> 
> 赞同：10
> 
> 时间：2013-02-20T11:05:46.110
> 
> 标签：java, hibernate, jpa, eclipselink, bean-validation

这个问题是这个问题的后续：[JPA ConstraintViolation vs Rollback](https://stackoverflow.com/questions/14354849/jpa-constraintviolation-vs-rollback/14810664)

我对 JPA 和验证 API (JSR-303) 的组合进行了一些测试。

我在[JPA 规范](http://download.oracle.com/otn-pub/jcp/persistence-2.0-fr-eval-oth-JSpec/persistence-2_0-final-spec.pdf)（第 101-102 页）中找到了以下内容：

> 默认情况下，默认的 Bean Validation 组（组 Default）将根据 pre-persist 和 pre-update 生命周期验证事件进行验证
> 
> ...
> 
> 如果 validate 方法返回的 ConstraintViolation 对象集不为空，则持久性提供程序必须抛出包含对返回的 ConstraintViolation 对象集的引用的 javax.validation.ConstraintViolationException，并且必须将事务标记为回滚。

我设置了以下测试：

*   HibernateValidator 作为 JSR-303 实现
*   2 PersistenceProvider Hibernate 和 EclipseLink
*   一个具有默认策略 ( ) 和列`NameNotNullWithDefaultGeneratedStrategy`生成的 id 的实体`@Generated``@NotNull String name`
*   另一个具有由表策略 ( ) 和列`NameNotNullWithTableGeneratedStrategy`生成的 id 的实体`@TableGenerated``@NotNull String name`
*   测试尝试`persist`使用 null 对每个实体的一个实例`name`。
*   预期结果是`javax.validation.ConstraintViolationException`由persist 方法抛出的，事务标记为`rollback only`（即这些假设基于本文引用的JPA 规范）。

结果是：

*   使用 eclipse 链接作为提供者：
    *   该`persist`方法为两个实体抛出一个`javax.validation.ConstraintViolationException`。
    *   `rollback only`交易在两种情况下都标记为
*   使用休眠作为提供者：
    *   `persist`抛出一个`javax.validation.ConstraintViolationException`for entity `NameNotNullWithDefaultGeneratedStrategy`+ transaction 标记为`rollback only`
    *   `persist`不要为**未标记**为的实体`NameNotNullWithTableGeneratedStrategy`+事务抛出任何异常**`rollback only`**
    ***   `commit`因为`NameNotNullWithTableGeneratedStrategy`失败了`RollbackException`**

 **问题是：

*   这真的违反了 JPA 规范吗？或者我错过了表格生成策略的特殊情况？
*   如果是违规行为：是否有任何与之相关的现有错误报告？

这是我的测试代码：

```
package com.example.jpa.validator;
import org.junit.Assert;
import org.junit.Test;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityTransaction;
import javax.persistence.Persistence;
import javax.persistence.RollbackException;

public class ConstraintViolationExceptionTest {

    @Test
    public void testHibernateDefaultStrategy() {  // Success
        testPersistWithNullName("pu-hibernate",new NameNotNullWithDefaultGeneratedStrategy());
    }

    @Test
    public void testHibernateTableStrategy() {
        testPersistWithNullName("pu-hibernate",new NameNotNullWithTableGeneratedStrategy());
        //this test fail with :
        //java.lang.AssertionError: Expecting a javax.validation.ConstraintViolationException, but persist() succeed !
    }

    @Test
    public void testEclipseLinkDefaultStrategy() {  // Success
        testPersistWithNullName("pu-eclipselink",new NameNotNullWithDefaultGeneratedStrategy());
    }

    @Test
    public void testEclipseLinkTableStrategy() {  // Success
        testPersistWithNullName("pu-eclipselink",new NameNotNullWithTableGeneratedStrategy());
    }

    private void testPersistWithNullName(String persistenceUnitName, Object entity){
        EntityManagerFactory emf = Persistence.createEntityManagerFactory(persistenceUnitName);
        EntityManager entityManager = emf.createEntityManager();
        try {
            final EntityTransaction transaction = entityManager.getTransaction();
            transaction.begin();
            try {
                try {
                    entityManager.persist(entity);
                    Assert.fail("Expecting a javax.validation.ConstraintViolationException, but persist() succeed !");
                } catch (javax.validation.ConstraintViolationException cve) {
                    //That's expected
                    Assert.assertTrue("According JPA specs transaction must be flagged as rollback only",transaction.getRollbackOnly());
                } catch (Exception e) {
                    Assert.assertTrue("According JPA specs transaction must be flagged as rollback only",transaction.getRollbackOnly());
                    e.printStackTrace();
                    Assert.fail("Expecting a javax.validation.ConstraintViolationException, but got " + e.getClass());
                }
                transaction.commit();
                Assert.fail("persisted with null name !!!");
            } catch (RollbackException e) {
                //That's expected
            }  catch (Exception e) {
                e.printStackTrace();
                Assert.fail("Unexpected exception :"+e.getMessage());
            }
        } finally {
            entityManager.close();
        }
    }
} 
```

**实体**

默认策略

```
package com.example.jpa.validator;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.validation.constraints.NotNull;

@Entity
public class NameNotNullWithDefaultGeneratedStrategy {

    @Id @GeneratedValue private Long id;
    @NotNull public String name;
    public NameNotNullWithDefaultGeneratedStrategy() {}
} 
```

表策略：

```
package com.example.jpa.validator;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.TableGenerator;
import javax.validation.constraints.NotNull;

@Entity
public class NameNotNullWithTableGeneratedStrategy {

    @GeneratedValue(strategy = GenerationType.TABLE,
        generator = "NAME_MUST_NOT_BE_NULL_ID_GENERATOR")
    @TableGenerator(name = "NAME_MUST_NOT_BE_NULL_ID_GENERATOR")
    @Id @NotNull private Long id;
    @NotNull public String name;
    public NameNotNullWithTableGeneratedStrategy() {}
} 
```

**持久性.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
    <persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
        <persistence-unit name="pu-hibernate" transaction-type="RESOURCE_LOCAL">
            <provider>org.hibernate.ejb.HibernatePersistence</provider>
            <class>com.example.jpa.validator.NameNotNullWithTableGeneratedStrategy</class>
            <class>com.example.jpa.validator.NameNotNullWithDefaultGeneratedStrategy</class>
            <properties>
                <property name="javax.persistence.jdbc.driver" value="org.h2.Driver"/>
                <property name="javax.persistence.jdbc.url" value="jdbc:h2:mem:test_mem_hibernate"/>
                <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
                <property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"/>
            </properties>
        </persistence-unit>
        <persistence-unit name="pu-eclipselink" transaction-type="RESOURCE_LOCAL">
            <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
            <class>com.example.jpa.validator.NameNotNullWithTableGeneratedStrategy</class>
            <class>com.example.jpa.validator.NameNotNullWithDefaultGeneratedStrategy</class>
            <properties>
                <property name="javax.persistence.jdbc.driver" value="org.h2.Driver"/>
                <property name="javax.persistence.jdbc.url" value="jdbc:h2:mem:test_mem"/>
                <property name="eclipselink.ddl-generation" value="create-tables"/>
                <property name="eclipselink.target-database" value="org.eclipse.persistence.platform.database.H2Platform"/>
            </properties>
        </persistence-unit>
    </persistence> 
```

**pom.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
    <project xmlns="http://maven.apache.org/POM/4.0.0"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
        <modelVersion>4.0.0</modelVersion>

        <groupId>com.example</groupId>
        <artifactId>com.example.jpa.validator</artifactId>
        <version>1.0-SNAPSHOT</version>
        <properties>
            <hibernate.version>4.2.0.CR1</hibernate.version>
            <hibernate-validator.version>4.3.1.Final</hibernate-validator.version>
            <junit.version>4.11</junit.version>
            <h2.version>1.3.170</h2.version>
        </properties>

        <dependencies>
            <dependency>
                <groupId>org.hibernate</groupId>
                <artifactId>hibernate-validator</artifactId>
                <version>${hibernate-validator.version}</version>
            </dependency>
            <dependency>
                <groupId>com.h2database</groupId>
                <artifactId>h2</artifactId>
                <version>${h2.version}</version>
                <scope>test</scope>
            </dependency>
            <dependency>
                <groupId>junit</groupId>
                <artifactId>junit</artifactId>
                <scope>test</scope>
                <version>${junit.version}</version>
            </dependency>

            <dependency>
                <groupId>org.hibernate</groupId>
                <artifactId>hibernate-core</artifactId>
                <version>${hibernate.version}</version>
            </dependency>
            <dependency>
                <groupId>org.hibernate</groupId>
                <artifactId>hibernate-entitymanager</artifactId>
                <version>${hibernate.version}</version>
            </dependency>

            <dependency>
                <groupId>org.eclipse.persistence</groupId>
                <artifactId>org.eclipse.persistence.jpa</artifactId>
                <version>2.4.0</version>
            </dependency>
            <dependency>
                <groupId>org.eclipse.persistence</groupId>
                <artifactId>javax.persistence</artifactId>
                <version>2.0.0</version>
            </dependency>
        </dependencies>

        <repositories>
            <repository>
                <url>http://download.eclipse.org/rt/eclipselink/maven.repo/</url>
                <id>eclipselink</id>
                <layout>default</layout>
                <name>Repository for library EclipseLink (JPA 2.0)</name>
            </repository>
        </repositories>
    </project> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T11:10:17.160

我为此提交了一个错误报告：[https ://hibernate.onjira.com/browse/HHH-8028](https://hibernate.onjira.com/browse/HHH-8028)**

# javascript - 在 jquery 中按行分隔并发布

> ID：14978295
> 
> 赞同：-1
> 
> 时间：2013-02-20T11:05:52.847
> 
> 标签：javascript, jquery

```
Html:
<textarea id="game" type="text" class="resizedTextbox"/></textarea>
<input id="times" type="text" class="resizedTextbox" value=1>
<textarea id="info" type="text" class="resizedTextbox"/></textarea>

JS:
$(document).ready(function()
{
    $('#game').change(UpdateInfo);
    $('#times').change(UpdateInfo);
});

   function UpdateInfo()
   {
          var times = $('#times').val();
         var game = 
             $('#game').val();
     var line = 'Play ' + game + " " + times
     var info ="Games \n" + line;
     $('#info').val(info);
   } 
```

我还提供了上述代码的[jsFiddle 演示。](http://jsfiddle.net/Wfzr8/)

现在我被困在这里：

当我在文本框 1 中键入此内容时：

```
1Text
2Text 
```

我希望它在文本框 2 中显示为这样

```
Games 
Play 1text 1
Play 2text 1 
```

现在，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:12:00.687

`\n`您可以使用字符拆分行。例如，您可以运行：

```
$(this).val().split("\n"); 
```

因此，您的代码将如下所示：

```
function UpdateInfo()
{
    var times = $('#times').val(),
        games = $('#game').val().split("\n"),
       output = "Games\n";

    for(var i = 0; i < games.length; i++)
    {
         output += "Play "+games[i]+" "+times+"\n";   
    }

     $('#info').val(output);
} 
```

这是一个有效的[**jsFiddle 演示**](http://jsfiddle.net/Wfzr8/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:13:30.857

您需要按行拆分值。然后为每一行生成结果。

```
function UpdateInfo()
   {
       var times = $('#times').val();
       var game = $('#game').val().split("\n");
       var info = 'Games \n';
       for (var i = 0; i < game.length; i++) {
           info += 'Play ' + game[i] + " " + times + "\n"
       }
       $('#info').val(info);
   } 
```

# android - 无法启动活动：UnsupportedOperationException：适配器视图不支持 addView(View, LayoutParams)

> ID：14978296
> 
> 赞同：41
> 
> 时间：2013-02-20T11:05:53.717
> 
> 标签：android, android-listview, android-adapterview

我想以`ListView`基本格式编写一个，但出现错误：

```
UnsupportedOperationException: addView(View, LayoutParams) is not supported in AdapterView 
```

和：

```
androidview.LayoutInfalater.inflate(LayoutInflater.java: some numbers....like 720,658...so on) 
```

我知道应该在适配器类中做一些事情：

```
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    RelativeLayout rv = new RelativeLayout(c);

    TextView tv = new TextView(c);
    TextView tv1 = new TextView(c);
    ImageView imgv = new ImageView(c);

    tv.setText(s[position]);
    tv1.setText(i[position]);
    imgv.setImageResource(d[position]);

    rv.addView(tv);
    rv.addView(tv1);
    rv.addView(imgv);
    return rv;

} 
```

我应该怎么做才能解决问题

LOGCAT：

```
02-20 16:40:24.967: E/Trace(1715): error opening trace file: No such file or directory (2)
02-20 16:40:25.819: W/ResourceType(1715): No package identifier when getting value for resource number 0x000020d0
02-20 16:40:25.819: D/AndroidRuntime(1715): Shutting down VM
02-20 16:40:25.819: W/dalvikvm(1715): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
02-20 16:40:25.857: E/AndroidRuntime(1715): FATAL EXCEPTION: main
02-20 16:40:25.857: E/AndroidRuntime(1715): android.content.res.Resources$NotFoundException: String resource ID #0x20d0
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.content.res.Resources.getText(Resources.java:229)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.widget.TextView.setText(TextView.java:3620)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at com.example.systemzap2.adapt.getView(adapt.java:59)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.widget.AbsListView.obtainView(AbsListView.java:2271)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.widget.ListView.onMeasure(ListView.java:1156)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.view.View.measure(View.java:15172)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:617)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:399)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.view.View.measure(View.java:15172)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.view.View.measure(View.java:15172)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.view.View.measure(View.java:15172)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2148)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.view.View.measure(View.java:15172)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1850)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1102)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1275)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1000)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4214)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.view.Choreographer.doCallbacks(Choreographer.java:555)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.view.Choreographer.doFrame(Choreographer.java:525)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.os.Handler.handleCallback(Handler.java:615)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.os.Looper.loop(Looper.java:137)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at android.app.ActivityThread.main(ActivityThread.java:4745)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at java.lang.reflect.Method.invokeNative(Native Method)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at java.lang.reflect.Method.invoke(Method.java:511)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-20 16:40:25.857: E/AndroidRuntime(1715):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2013-02-20T11:40:47.500

> 我该怎么办？？？

更正您的代码。

> UnsupportedOperationException：AdapterView 不支持 addView(View, LayoutParams)

`AdapterView`像 a 这样的子类`ListView` **不能**在布局文件中手动添加子类，也不能在代码中添加子类。因此，如果您在其中一种布局中有此内容：

```
<ListView // .. other attributes>
     <// other views <-- notice the children of the ListView tag
</ListView> 
```

**不要这样做**，因为这会调用的`addView`方法`ListView`，抛出异常。而是使用：

```
<ListView // .. other attributes />
< // other views 
```

您也**不能**使用以下代码中的任何`addView`方法`ListView`：

```
listViewReference.addView(anotherView); // <-- don't do it 
```

此外，如果您在或适配器`LayoutInflater.inflate`的代码中使用该方法（其方法），**请不要将**其作为第二个参数传递。例如，**不要使用**：`Activity``getView`**`ListView`**

 ****```
convertView  = inflator.inflate(R.layout.child_rows, parent); 
```

就像在 Tamilarasi Sivaraj 的回答中那样，这将再次引发异常。而是使用：

```
convertView  = inflator.inflate(R.layout.child_rows, parent, false); 
```

与您在问题中发布的异常相关，您似乎将该`setText`方法与一个`int`（`s`或`i`数组之一是`int`数组）一起使用。问题是，在这种情况下，`TextView`您会认为您正在尝试使用这样的字符串资源来设置文本`R.string.astring`。您传递的`int`不是字符串资源，因此将引发异常。如果`s`or`i`是 an`int`并且您试图在`TextView`use this 中显示它：

```
tv.setText(String.valueOf(s[position])); // assuming s is the int array 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-20T11:13:49.783

在充气机中替换您的布局

```
 @Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub

    if (convertView == null) {

        LayoutInflater inflater = (LayoutInflater) LayoutInflater
                .from(contex);
        convertView = inflater.inflate(R.layout.your_layout, parent, false);

    }

    txtName = (TextView) convertView.findViewById(R.id.txtName);
    txtName.setText(""+ContactsArr.get(position).get("ContName"));
    txtPhoneNumber = (TextView) convertView.findViewById(R.id.txtContact);
    txtPhoneNumber.setText(""+ContactsArr.get(position).get("ContPhone"));

    return convertView;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-01-06T17:51:30.177

如果您像我一样完全跳过了@Luksprog 的答案中我需要的答案，因为它被埋在其中，请尝试使用将第三个参数添加到`inflate`方法中，这里也提到[了](https://stackoverflow.com/questions/24832497/avoid-passing-null-as-the-view-root-need-to-resolve-layout-parameters-on-the-in)：

```
inflater.inflate(R.layout.group_row, parent, false); 
```

不要使用`true`代替，`false`否则您将得到与将您带到这里的相同错误，因为它试图将其附加/添加到父级，因此出现`addView is not supported in AdapterView`错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T11:16:41.617

试试这个像这样：

```
public static class ViewHolder {
    public ImageView imageView;
    public TextView textView; 

    public View getView(int position, View convertView, ViewGroup parent) {
        try{
            ViewHolder holder;

            if (convertView == null)  {
                holder = new ViewHolder(); 
                LayoutInflater inflater = context1.getLayoutInflater();
                convertView = inflater.inflate(R.layout.your_layout, null,true);  

                holder.imageView = (ImageView) convertView.findViewById(R.id.imgview);

                holder.textView = (TextView) convertView.findViewById(R.id.txtview);

                convertView.setTag(holder);  
            } else {
                holder = (ViewHolder) convertView.getTag();  
            }

            holder.textView.setText("your text");
            holder.imageView.setImageResource("your image resource");
        } catch (Exception e) {
            System.out.println("Error: "+e);    
        }

        return convertView;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-31T18:45:56.953

我也收到了这个问题：

> android.view.InflateException: Binary XML file line #2: addView(View, LayoutParams) is not supported in AdapterView 原因：java.lang.UnsupportedOperationException: addView(View, LayoutParams) 在 AdapterView 中不受支持

我在充气时忘记添加**“false”**`.xml`。添加后它可以工作。我的代码短语如下。我`LinearLayout`为我的`.xml`.

```
if(convertView == null){
        convertView = LayoutInflater.from(getContext()).inflate(R.layout.row_format,parent,false);
    } 
```****

# ruby-on-rails - 每页创建一个小计n个大虾栏

> ID：14978297
> 
> 赞同：0
> 
> 时间：2013-02-20T11:05:57.320
> 
> 标签：ruby-on-rails, prawn, prawnto

所以我用我的铁轨上的虾和一些会计数据来生成我的报告。我做我的虾创建一个 file.pdf.prawn 并将报告的布局放在那里，而不是来自模型。我需要这样我的报告在底部的每一页都有一个小计。这与从控制器生成的 all_total 不同。

我的意思是，就像我需要知道一页上将打印多少数据，然后我可以对这些数据求和。

感谢和尊重

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:26:20.610

如果行的高度相等，您可以简单地测试其中有多少行适合您的纸张，然后自己计算。

如果您的行大小不相等，您可以尝试计算`Table`与`Cell`类类似的行的大小。您只需添加定义一行的条件：

```
# this code probably won't work because it's not tested
# I just typed it right here to show concept

module Prawn
  class Cell
    def custom_row_height(row_id)
      each do |cell|
        index = cell.send(:row)
        if index == row_id do
          result = cell.send(:height_ignoring_span)].compact.send(:max) 
        end
      end
      result 
    end 
```

来自[https://github.com/prawnpdf/prawn/blob/master/lib/prawn/table/cells.rb](https://github.com/prawnpdf/prawn/blob/master/lib/prawn/table/cells.rb)和[https://github.com/prawnpdf/prawn/blob/master/lib/prawn/table/的代码细胞.rb](https://github.com/prawnpdf/prawn/blob/master/lib/prawn/table/cell.rb)：

```
module Prawn
  class Cell
    # Sum up a min/max value over rows or columns in the cells selected.
    # Takes the min/max (per +aggregate+) of the result of sending +meth+ to
    # each cell, grouped by +row_or_column+.
    #
    def aggregate_cell_values(row_or_column, meth, aggregate)
      values = {}
      each do |cell|
        index = cell.send(row_or_column)
        values[index] = [values[index], cell.send(meth)].compact.send(aggregate)
      end
      values.values.inject(0, &:+)
    end

module Prawn
  class Table
    class Cell
      # Returns the total height of all rows in the selected set.
      def height
        aggregate_cell_values(:row, :height_ignoring_span, :max)
      end 
```

# asp.net - 单击按钮时想要在gridview中显示数据

> ID：14978299
> 
> 赞同：0
> 
> 时间：2013-02-20T11:06:01.067
> 
> 标签：asp.net, validation, gridview

我有两个文本框，一个下拉菜单和两个按钮。当我在文本框中输入值时，从下拉列表中选择值并按`button1`，我的数据将存储在数据库中，当我单击 时，我可以在我的网格中查看它`button2`。

但问题是，当我在`button2`不输入任何详细信息的情况下按下它时，它应该显示我在文本框和下拉列表中添加的验证错误。

**aspx.cs 的代码**：

```
protected void Button1_Click(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection(@"Data Source=.;Initial Catalog=EMS;Integrated Security=True");
    con.Open();

    string UserName = TextBox1.Text;
    string Password = TextBox2.Text;
    string Role = DropDownList1.Text;

    using (SqlCommand cmd = con.CreateCommand())
    {
        cmd.CommandText = "insert into Login(UserName,Password,Role) values('" + UserName + "','" + Password + "','" + Role + "')";
        cmd.Parameters.AddWithValue("@UserName", TextBox1.Text);
        cmd.Parameters.AddWithValue("@Password", TextBox2.Text);
        cmd.Parameters.AddWithValue("@Role", DropDownList1.Text);
        cmd.ExecuteNonQuery();
    }

    con.Close();
    TextBox1.Text = string.Empty;
    TextBox2.Text = string.Empty;
    DropDownList1.Text = string.Empty;
    TextBox1.Focus();
} 
protected void Button2_Click1(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection(@"Data Source=.;Initial Catalog=EMS;Integrated Security=True");
    con.Open();

    using (SqlCommand cmd = con.CreateCommand())
    {
        SqlCommand com = new SqlCommand("Select * from Login", con);
        SqlDataAdapter sda = new SqlDataAdapter(com);

        DataSet ds = new DataSet();
        sda.Fill(ds);

        GridView1.DataSource = ds;
        GridView1.DataBind();
    }
    con.Close();
} 
```

**aspx 的代码**：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<style type="text/css">
    .style1
    {
        width: 100%;
        height: 178px;
    }
    .style3
    {
        width: 87px;
    }
    .style4
    {
        width: 87px;
        height: 110px;
    }
    .style5
    {
        height: 110px;
    }
</style>
 </head>
 <body style="height: 387px">
<form id="form1" runat="server">
  <div>
            <tr>
            <td class="style3">
          &nbsp;User name</td>
            <td>
         <asp:TextBox ID="TextBox1" runat="server" style="margin-left: 0px"> </asp:TextBox>
              &nbsp;&nbsp;
                <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
                    ControlToValidate="TextBox1" ErrorMessage="Enter User Name" Font- Bold="True">*</asp:RequiredFieldValidator>
            </td>
            </tr>
              <tr>
            <td class="style3">
                Password</td>
            <td>
    <asp:TextBox ID="TextBox2" runat="server" TextMode="Password"></asp:TextBox>
    &nbsp;&nbsp;
                <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" 
                    ControlToValidate="TextBox2" ErrorMessage="Enter Password" Font- Bold="True">*</asp:RequiredFieldValidator>
            </td>
        </tr>
        <tr>
            <td class="style3">
                Select Role</td>
            <td>
                <asp:DropDownList ID="DropDownList1" runat="server">
                    <asp:ListItem>Select One</asp:ListItem>
                    <asp:ListItem>Admin</asp:ListItem>
                    <asp:ListItem>Manager</asp:ListItem>
                    <asp:ListItem>User</asp:ListItem>
                    <asp:ListItem></asp:ListItem>
                </asp:DropDownList>
                  <asp:RequiredFieldValidator ID="RequiredFieldValidator3"  runat="server" 
                    ControlToValidate="DropDownList1" ErrorMessage="Select Role">*</asp:RequiredFieldValidator>
                &nbsp;</td>
            </tr>
             <tr>
            <td class="style4">
                </td>
            <td class="style5">
    <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Sumit" />

    <asp:ValidationSummary ID="ValidationSummary1" runat="server" Height="65px" />

            </td>
        </tr>
        </table>

</div>
<p>
                             &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <asp:Button ID="Button2" runat="server" onclick="Button2_Click1" Text="Show" />
                &nbsp;</p>
<p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:39:49.040

请将第二个按钮的验证组属性设置为任何值，如下所示：

```
validationgroup="xyz" 
```

并让我知道问题是否仍然存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:54:46.357

您可以尝试提供`ValidationGroup`要验证的控件。
通过使用此属性，您可以对特定控件设置验证。
尝试这样做。让我知道这是否解决了您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:55:28.807

如果您希望在客户端进行验证，请尝试将按钮的 Causesvalidation 属性设置为 true。

```
 Causesvalidation=true; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-07T12:09:02.983

```
protected void Button1_Click(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection(@"Data Source=.;Initial Catalog=EMS;Integrated Security=True");
    con.Open();

    string UserName = TextBox1.Text;
    string Password = TextBox2.Text;
    string Role = DropDownList1.Text;

    using (SqlCommand cmd = con.CreateCommand())
    {
        cmd.CommandText = "insert into Login(UserName,Password,Role) values('" + UserName + "','" + Password + "','" + Role + "')";
        cmd.Parameters.AddWithValue("@UserName", TextBox1.Text);
        cmd.Parameters.AddWithValue("@Password", TextBox2.Text);
        cmd.Parameters.AddWithValue("@Role", DropDownList1.Text);
        cmd.ExecuteNonQuery();
    }

    con.Close();
    TextBox1.Text = string.Empty;
    TextBox2.Text = string.Empty;
    DropDownList1.Text = string.Empty;
    TextBox1.Focus();
} 
protected void Button2_Click1(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection(@"Data Source=.;Initial Catalog=EMS;Integrated Security=True");
    con.Open();

    using (SqlCommand cmd = con.CreateCommand())
    {
        SqlCommand com = new SqlCommand("Select * from Login", con);
        SqlDataAdapter sda = new SqlDataAdapter(com);

        DataSet ds = new DataSet();
        sda.Fill(ds);

        GridView1.DataSource = ds;
        GridView1.DataBind();
    }
    con.Close();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T11:42:14.680

检查你在哪里写的

```
string.Empty; -> This is making your textbox empty. 
```

因此，您将无法在 button2_click() 上访问其值。由于文本框控件为空，因此引发验证错误。有断点并检查哪里出了问题并纠正它。

**建议**

使用**nbsp；**for space in markup 会在不同的浏览器中以不同的方式呈现您的页面。我建议你使用

```
<span style="margin:0 0 0 20px"> Some text here</span> 
```

用于内联样式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T10:51:29.807

标记删除：[我已经添加了我的样本，没关系改变它]

```
<asp:TemplateField HeaderText="modify">
  <ItemTemplate>
    <asp:ImageButton ID="imgmodify" CommandName="modify" runat="server" ImageUrl="~/database/images/edit.jpg" ToolTip="Edit" Height="20px" Width="20px"/>

 </ItemTemplate>
</asp:TemplateField>

<asp:TemplateField HeaderText="Remove">
  <ItemTemplate>
  <asp:ImageButton ID="imgbtnDelete" CommandName="Delete" CommandArgument='<%#Eval("catID") %>' runat="server" ImageUrl="~/database/images/DeleteRed.jpg" ToolTip="Delete" Height="20px" Width="20px" />
</ItemTemplate>
</asp:TemplateField> 
```

代码：

```
 protected void gvcat_rowcmd(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "modify")
    {
        //Your edit code here..
         Page.ClientScript.RegisterStartupScript(this.GetType(), "Call my function", "editpopup();", true);
    }
    if (e.CommandName == "Delete")
    {
        //Your delete code here
        categoryID = Convert.ToInt32(e.CommandArgument);
        Session["cat"] = categoryID;
        Page.ClientScript.RegisterStartupScript(this.GetType(), "Call my function", "showpopup();", true);
    }
} 
```

要删除行：

```
 if (e.CommandName == "delete")
    {
      int productcode = Convert.ToInt32(e.CommandArgument);
        string Cond = "Pid=" + productcode;
        DataRow[] mrow = dtCartItems.Select(Cond);
        if (mrow.Length > 0)
        {
            mrow[0].Delete();
        }
        dtCartItems.AcceptChanges();
        mrow = dtCartItems.Select();
        gridbind();
     } 
```

# php - php文件中utf8中的HTML元素？

> ID：14978300
> 
> 赞同：1
> 
> 时间：2013-02-20T11:06:00.457
> 
> 标签：php, html, utf-8

我在 php 文件中显示 unicode 字符时遇到问题。

问题是该行`<td>Märkus</td>`不`<td>Tooterühm</td>`显示“ä”和“ü”字符。有任何想法吗？谢谢！

这是整个代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Sisestamine</title>

</head>

<body>

<?php
header('Content-type: text/html; charset=utf-8');

session_start();

    echo 'Tere tulemast, '.$_SESSION['user']. '<br> <br>';

if(isset($_POST['save'])){

include 'config.php';

extract($_REQUEST);

$user = $_SESSION['user']; 

$query=mysql_query("insert into norse5_proov SET osakond='$osakond', soetusaasta='$soetusaasta', it_number='$it_number', tooteruhm='$tooteruhm', mudeli_nimetus='$mudeli_nimetus', sn='$sn', riigivara_nr='$riigivara_nr', inventaari_nr='$inventaari_nr', maja='$maja', ruum='$ruum', vastutaja='$vastutaja', markus='$markus', kasutajanimi='$user'") or die(mysql_error());

if($query){

echo "Andmed sisestatud";

}

}

?>

<form action='#' method='post' border='0'>

<table>
<br>
<tr>

<td>Osakond</td>

<td><input type='text' name='osakond' /></td>

</tr>

<tr>

<td>Soetusaasta</td>

<td><input type='text' name='soetusaasta' /></td>

</tr>

<tr>

<td>IT Number</td>

<td><input type='text' name='it_number' /></td>

</tr>

<tr>

<td>Tooterühm</td>

<td><input type='text' name='tooteruhm' /></td>

</tr>

<tr>

<td>Mudeli nimetus</td>

<td><input type='text' name='mudeli_nimetus' /></td>

</tr>

<tr>

<td>SN</td>

<td><input type='text' name='sn' /></td>

</tr>

<tr>

<td>Riigivara nr</td>

<td><input type='text' name='riigivara_nr' /></td>

</tr>

<tr>

<td>Inventaari nr</td>

<td><input type='text' name='inventaari_nr' /></td>

</tr>

<tr>

<td>Maja</td>

<td><input type='text' name='maja' /></td>

</tr>

<tr>

<td>Ruum</td>

<td><input type='text' name='ruum' /></td>

</tr>

<tr>

<td>Vastutaja</td>

<td><input type='text' name='vastutaja' /></td>

</tr>

<tr>

<td>Märkus</td>

<td><input type='text' name='markus' /></td>

<tr>

<td></td>

<td>

<input type='submit' value='Salvesta' name="save" />
<br>
<br>

<a href="update.php">Uuenda andmeid</a><br>
<a href="delete.php">Kustuta andmeid</a><br>
<a href="show_data.php">Kuva andmeid</a><br>
<br>
<a href="index.php">Algusesse...</a>

</td>

</tr>

</table>

</form>

</body>

</html> 
```

问题是 Märkus 和 Tooterühm 行不显示“ä”和“ü”字符。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:11:15.747

可能是因为您在输出内容后设置了标题。您需要`header`在脚本有任何输出之前调用，并且您还应该在发送标头之前开始会话。文件的开头应该是这样的......

```
<?php 
session_start();
header('Content-type: text/html; charset=utf-8');
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T11:14:24.943

检查**文件是否保存为 UTF-8**。有时文件是 ANSI 编码的，因此即使您正确设置了标题，也不会显示 UTF 字符。

所以检查两件事：

1.  `<meta http-equiv="Content-Type" content="text/html; charset=utf-8">`
2.  您的 PHP 文件编码。

*注意：如果文件没有使用 UTF-8 编码，并且您更改了它，请记住再次检查特殊字符，因为当您使用新格式保存文件时它们可能会更改。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:16:05.220

检查字段在数据库中的编码方式。可能问题就在那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T11:12:34.470

您应该确保 HTTP 服务器标头是正确的。

特别是标题：

```
Content-Type: text/html; charset=utf-8 
```

应该在场。

如果存在 HTTP 标头，则浏览器会忽略元标记。或者将 HTML 实体用于特殊字符这里是[html 特殊字符代码的链接。](http://www.ascii.cl/htmlcodes.htm)

# qml - 如何从 bb 10 级联中的 listview 按钮单击事件导航到另一个页面？

> ID：14978302
> 
> 赞同：1
> 
> 时间：2013-02-20T11:06:07.790
> 
> 标签：qml, blackberry-10, blackberry-cascades

单击列表视图按钮时，我需要推送一个页面。我已经尝试了下面的编码，但它不起作用。

```
ListItemComponent {
    type: "imageItem"
    Container {
        id: publicimageItem
         ......

         ......

        ImageButton {
            defaultImageSource: "asset:///defaultimg.png"
            pressedImageSource: "asset:///pressedimg.png" 

            onClicked: {
                var new_page = publicimageItem.ListItem.view.nextpage.createObject();
                publicimageItem.ListItem.view.navigationPane.push(new_page);
            }
            attachedObjects: [
                ComponentDefinition {
                    id: nextpage
                    source: "NextPage.qml"
                }
            ]
        }// ImageButton
    }// Container
}// ListView 
```

当我在列表视图之外尝试时，它会毫无问题地进入下一页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:46:46.660

使用以下代码将对象存储到全局变量的另一种最简单的方法对我来说很好用。

```
 onCreationCompleted: {
     Qt.tabbedPane = tabbedPane;
     Qt.homeTab = homeTab;
    } 
```

在这里，我在页面创建完成时将 tabbedPane 存储在全局变量 Qt.tabbedPane 中。现在我可以使用 Qt.tabbedPane 从 ListItemComponent 访问它。

在您的情况下，将导航窗格存储到 Qt.navigationPane=NavigationId，然后尝试从 ListItemComponent 作为 Qt.navigationPane 访问它。

希望它会有所帮助。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T00:04:37.433

建议该路径`NextPage.qml`和页面本身是有效的并且设置正确，我建议将代码更改为`onClicked()`以下内容：

```
var new_page = nextpage.createObject();
navigationPane.push(new_page); 
```

请确保可以在此处访问 navigationPane。[如前所述，启用控制台日志记录（或使用终端slog2info](https://stackoverflow.com/users/201113/barry)实用程序）可能是个好主意。这样你就可以看到你的代码发生了什么以及为什么。

作为另一种变体，如果您想通过与整个列表项（而不是其中的特定小部件）交互来导航到其他页面，则需要将相同的代码放在`onTriggered()`插槽中：

```
ListView {
    ListItemComponent {
        type: "imageItem"
        Container {
            id: publicimageItem
             ......
        }// Container
    }// ListItemComponent

    onTriggered: {
        var new_page = nextpage.createObject();
        navigationPane.push(new_page);
    }

    attachedObjects: [
        ComponentDefinition {
            id: nextpage
            source: "NextPage.qml"
        }
    ]    
} // ListView 
```

# eclipse - Eclipse 在创建云端点期间挂起

> ID：14978315
> 
> 赞同：1
> 
> 时间：2013-02-20T11:06:43.870
> 
> 标签：eclipse, google-app-engine, google-cloud-endpoints, google-plugin-eclipse

我正在为 Eclipse 使用最新的谷歌插件（1.7.5），但是当我尝试创建一个应用引擎连接的 android 项目时，Eclipse 在“生成云端点库”期间挂断

当我创建一个谷歌应用引擎项目然后手动创建端点时也是如此。

这个问题有什么解决方法吗？

# jsf-2 - 在“listener”属性上调用 valueChangeListener 方法时出错 对于事件="valueChange"

> ID：14978317
> 
> 赞同：1
> 
> 时间：2013-02-20T11:06:54.560
> 
> 标签：jsf-2

我正在使用以下规格：

JSF 2.0、带有 JDK 1.6 的 Netbeans 7.1.2 和 Glassfish 3.1.2

下面是我的**index.xhtml**代码：

```
<h:form>
    <h:panelGrid columns="2">
        <h:outputText value="Select a country:" />
        <h:selectOneMenu id="countryBox" value="#{ab.selCountry}">
            <f:selectItem itemLabel="India" itemValue="India" />
            <f:selectItem itemLabel="United States of America" itemValue="USA" />
            <f:ajax execute="countryBox" render="stateBox" event="valueChange" listener="#{ab.result}"/>
        </h:selectOneMenu> 
        <h:outputText value="Select a state:" />
        <h:selectOneMenu value="#{ab.country}" id="stateBox">
            <f:selectItems value="#{ab.state}" />
        </h:selectOneMenu>
    </h:panelGrid>
</h:form> 
```

这是我的**AJAXBean.java**代码：

```
@ManagedBean (name="ab")
@RequestScoped
public class AJAXBean {

    /**
     * Creates a new instance of AJAXBean
     */

    private List<SelectItem> country;
    private List<SelectItem> state;
    private String selCountry;

    // getters and setters of properties

    public AJAXBean() 
    {
        country = new ArrayList<SelectItem>();
        state = new ArrayList<SelectItem>();
    }

    public void result(ValueChangeEvent vce) // valueChangeListener for ajax call. Is this valid?
    {
        System.out.println("Inside valueChangeListener");

        String value = (String) vce.getNewValue();
        state.clear();

        if (value.equals("India"))
        {
            state.add(new SelectItem("Maharashtra"));
            state.add(new SelectItem("Madhya Pradesh"));
            state.add(new SelectItem("Andhra Pradesh"));
            state.add(new SelectItem("Uttar Pradesh"));
            state.add(new SelectItem("Rajasthan"));

        }
        else if (value.equals("USA"))
        {
            state.add(new SelectItem("Missouri"));
            state.add(new SelectItem("Kentucky"));
            state.add(new SelectItem("North Carolina"));
            state.add(new SelectItem("South Carolina"));
            state.add(new SelectItem("Colorado"));

        }
    }
} 
```

基本上**我在这里要做的是：**

一个在 event="valueChange" 和 listener="#{ab.result}" 上触发 AJAX 调用。此处的结果方法修改了（SelectItems 的）“状态”列表的值。

我的值更改侦听器方法的语法是否正确？因为当我尝试执行此操作时，它会显示一个警告框，说明 MethodNotFoundException + 方法 #{ab.result(AJAXBehaviorEvent)} 未找到，即它正在尝试搜索捕获 AJAXBehaviorEvent 对象的“结果”方法。所以，我的问题是，当值更改侦听器方法与 f:ajax 调用一起使用时，它的签名是否有任何不同？

PS：它尝试使用#{ab.result()}。在这种情况下，它只是说 MethodNotFoundException。如果使用#{ab.result(vce)} 而不是#{ab.result()} / #{ab.result}，它会给我一个 NullPointerException。

如果我将相同的函数放在 h:selectOneMenu 的 valueChangeListener 属性中，它就可以工作。我的意思是，显然它会起作用。但这并不能解决我的目的。我的目的是对 valueChange 事件进行简单的 ajax 调用，它更新 bean 中的列表并重新呈现（第二个）链接的 h:selectOneMenu 作为结果

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:17:58.970

听听你得到的例外。它说它找不到带有`AjaxBehaviorEvent`参数的方法。`ValueChangeEvent`以论据改变`AjaxBehaviorEvent`论据。

```
public void result(AjaxBehaviorEvent event) {
    // ...
} 
```

而不是`ValueChangeEvent#getNewValue()`，直接访问`selCountry`。

顺便说一句，这`event="valueChange"`已经是默认设置。只需摆脱它以减少代码噪音。

### 也可以看看：

*   [何时使用 valueChangeListener 或 f:ajax 监听器？](https://stackoverflow.com/questions/11879138/when-to-use-valuechangelistener-or-fajax-listener/11883021#11883021)
*   [我们的 selectOneMenu wiki 页面](https://stackoverflow.com/tags/selectonemenu/info)- 在底部您可以找到另一个填充子下拉列表的示例

# asp.net - 接收HTTP响应时出错，返回大量记录（约20000条以上）

> ID：14978322
> 
> 赞同：0
> 
> 时间：2013-02-20T11:07:13.257
> 
> 标签：asp.net, wcf, http-request

问题：我有一个函数会返回大量的列表记录，因此在获取此记录时，会引发以下异常。异常和堆栈跟踪的详细信息如下所述：

**异常**：接收 HTTP 响应时发生错误这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文（可能是由于服务关闭）。有关更多详细信息，请参阅服务器日志。

**堆栈跟踪：** 服务器堆栈跟踪：在 System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException（WebException webException，HttpWebRequest 请求，HttpAbortReason abortReason）

在 System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply（时间跨度超时）

在 System.ServiceModel.Channels.RequestChannel.Request（消息消息，TimeSpan 超时）

在 System.ServiceModel.Dispatcher.RequestChannelBinder.Request（消息消息，TimeSpan 超时）

在 System.ServiceModel.Channels.ServiceChannel.Call（字符串操作，布尔单向，ProxyOperationRuntime 操作，Object[] 输入，Object[] 输出，TimeSpan 超时）

在 System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime 操作)

在 System.ServiceModel.Channels.ServiceChannelProxy.Invoke（IMessage 消息）

在 [0] 处重新抛出异常：在 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)

在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke（MessageData& msgData，Int32 类型）

据我了解，这是一种请求超时问题。我***试图***在 web.config 中设置以下内容，但没有帮助。

```
 <system.web>
    <httpRuntime maxRequestLength="102400" />
    </system.web> 
```

如何解决这个问题，任何解决方法？或任何替代解决方案？可以避免任何可以处理大量数据或此异常的方法/技术。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:01:01.920

您需要将大型数据绑定值放入配置中。在您的服务配置中添加以下服务行为。

```
 <behaviors>
      <serviceBehaviors>
        <behavior name="SilverlightWCFLargeDataApplication">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>

      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="SilverlightWCFLargeDataApplication">
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
      </endpointBehaviors>
    </behaviors> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:34:15.493

您可以在 web.config 中设置此值。例如，要更改一个特定页面的超时时间：

```
<location path="somefile.aspx">
    <system.web>
            <httpRuntime executionTimeout="180"/>
    </system.web>
</location> 
```

有关详细信息，请参阅[http://msdn2.microsoft.com/en-us/library/e1f13641.aspx 。](http://msdn2.microsoft.com/en-us/library/e1f13641.aspx)

希望有帮助。

# c# - 用 Javascript 分配的控制值

> ID：14978327
> 
> 赞同：0
> 
> 时间：2013-02-20T11:07:30.330
> 
> 标签：c#, javascript, asp.net

为什么当我用 javascript 分配 HiddenField 控件的新值时，当我用 "<%= this.HiddenField.Value %>" 调用它时，在这种情况下 HiddenField 控件的值保持相同的状态 (5)？但是当我用“console.log(document.getElementById('<%= this.HiddenField.ClientID %>').value);”调用它时 在这种情况下，这会返回 chagned 状态“活动”，为什么？如何在后面的代码中获取更改的值（我希望“<%= this.HiddenField.Value %>”返回“活动”（更改的值））？

```
<script>
    $(function () {
        document.getElementById('<%= this.HiddenField.ClientID %>').value = "active";
        console.log(document.getElementById('<%= this.HiddenField.ClientID %>').value); // this return te changed value "active"
        console.log('<%= this.HiddenField.Value %>') //this again is 5 not "active"
    });
</script>
<asp:HiddenField ID="HiddenField" runat="server" Value="5" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:10:32.300

asp.net 是一种服务器端语言。当你使用 "<%=" 时，它会像 response.write 一样对你的 html 文档做同样的事情。您正在通过客户端浏览器中的 jQuery 在运行时更改值，这显然发生在您已经将值写入 Log 函数之后。

只需查看生成的脚本，就应该立即清楚为什么会得到这些结果。

# java - 如何仅将 XMLGregorianCalendar 与日期部分（日、月、年）进行比较？

> ID：14978328
> 
> 赞同：4
> 
> 时间：2013-02-20T11:07:30.923
> 
> 标签：java, web-services, xsd, jaxb, gregorian-calendar

我正在开发一个与 spring-struts web 应用程序集成的 web 服务，在 XSD 中有一个 XMLGregorianCalendar 类型属性，假设属性名称是**trxDate**。

在 SOAPUI 测试应用程序中，如果我将 trxDate 的值插入为：**2013-02-21**，然后我发送了soap xml请求数据并在服务方法中打印了该值： System.out.println(trxDate) 方法，打印输出结果与输入的相同：2013-02-21。

现在，我正在尝试创建一个函数来将**trxDate**与当前日期进行比较。我知道我们可以使用 trxDate.compare(currentDate) 方法进行比较。问题是我不如何使用当前日期创建 XMLGregorianCalendar 对象集，仅使用日期部分（日、月和年）进行比较。

我试过这段代码：

```
 GregorianCalendar gc = new GregorianCalendar();
    gc.set(GregorianCalendar.HOUR_OF_DAY, 0);
    gc.set(GregorianCalendar.MINUTE, 0);
    gc.set(GregorianCalendar.SECOND, 0);
    gc.set(GregorianCalendar.MILLISECOND, 0);

    XMLGregorianCalendar xgc = DatatypeFactory.newInstance().newXMLGregorianCalendar(gc);
    System.out.println(xgc); 
```

结果是：
2013-02-20T00:00:00.000+07:00

但我期待：
2013-02-20

如果使用日期（**xgc**）与**trxDate**进行比较：

```
int result = trxDate.compare(xgc); 
```

结果为 2，这意味着： INDETERMINATE（来自 DatatypeConstants 类）。正确的结果应该是 -1、0 或 1。

那么我的代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T11:37:09.867

与其尝试从 中清除不需要的字段，`GregorianCalendar`不如创建一个未初始化的字段*，*`XMLGregorianCalendar`然后只复制您想要的字段：

 *```
XMLGregorianCalendar xgc = DatatypeFactory.newInstance().newXMLGregorianCalendar();
GregorianCalendar now = new GregorianCalendar();
xgc.setYear(now.get(Calendar.YEAR));
xgc.setMonth(now.get(Calendar.MONTH) + 1);
xgc.setDay(now.get(Calendar.DAY_OF_MONTH));
System.out.println(xgc); 
```

这样可以避免往返 String 并再次返回，如果您使用`newXMLGregorianCalendar(lexicalRepresentation)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T11:29:06.810

[XMLGregorianCalendar.compare](http://docs.oracle.com/javase/7/docs/api/javax/xml/datatype/XMLGregorianCalendar.html#compare%28javax.xml.datatype.XMLGregorianCalendar%29)的javadoc解释说它使用[XML Schema 规范](http://www.w3.org/TR/xmlschema-2/#dateTime-order)中的规则进行比较，javadoc 链接到这些规则。

B.1 节。比较算法声明两个日期时间必须具有完全相同的（子）集{年、月、日、小时、分钟、秒}字段定义。如果他们不这样做，结果是不确定的。（XML Schema 规范`<>`在算法描述中使用来指示不确定的结果。）

因此，如果您有一个只定义了年、月和日的 XMLGregorianCalendar，那么您必须将它与另一个只定义了年、月和日的 XMLGregorianCalendar 进行比较。正如 Blaise 建议的那样，您必须从字符串中解析它，或者您必须实例化一个 XMLGregorianCalendar 并自己调用`setYear`, 。`setMonth``setDay`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T11:20:37.247

**更新**

您也可以`XMLGregorianCalendar`这样创建：

```
 XMLGregorianCalendar xgc = df.newXMLGregorianCalendar(
            2012, 
            DatatypeConstants.FEBRUARY, 
            21, 
            DatatypeConstants.FIELD_UNDEFINED, 
            DatatypeConstants.FIELD_UNDEFINED, 
            DatatypeConstants.FIELD_UNDEFINED, 
            DatatypeConstants.FIELD_UNDEFINED, 
            DatatypeConstants.FIELD_UNDEFINED);
    System.out.println(xgc); 
```

* * *

您可以使用以下方法：

*   newXMLGregorianCalendar（字符串词法表示）

**演示**

```
import javax.xml.datatype.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        DatatypeFactory df = DatatypeFactory.newInstance();

        XMLGregorianCalendar xgc = df.newXMLGregorianCalendar("2013-02-12");
        System.out.println(xgc);
    }

} 
```

**输出**

```
2013-02-12 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T11:24:07.783

尝试

```
 String str = new SimpleDateFormat("yyyy-MM-dd").format(new Date());
    XMLGregorianCalendar xgc = DatatypeFactory.newInstance().newXMLGregorianCalendar(str);
    System.out.println(xgc); 
```

这是 XMLGregorianCalendar 使用`xsd:date`未定义时间的类型的提示（顺序）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-09T03:45:50.997

以防有人仍在寻找替代方案。这符合我的要求。

```
 ...

    date.setTimezone(DatatypeConstants.FIELD_UNDEFINED);
    date.setTime(DatatypeConstants.FIELD_UNDEFINED,
            DatatypeConstants.FIELD_UNDEFINED,
            DatatypeConstants.FIELD_UNDEFINED,
            DatatypeConstants.FIELD_UNDEFINED);
    ... 
```

这将删除时区和时间戳。*

# asp.net - 复选框列表的客户端过滤

> ID：14978331
> 
> 赞同：2
> 
> 时间：2013-02-20T11:07:39.503
> 
> 标签：asp.net, dynamic, autocomplete, filter, checkboxlist

我有一个包含 100 多个条目的复选框列表。我需要复选框列表的过滤器选项。

所需的功能是，当我输入过滤器 TextBox 时，CheckBox 列表的内容将根据输入的文本进行过滤（类似于自动完成）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:43:33.980

`OnBlur`您应该使用 jQuery 或类似的客户端 JavaScript 框架为您的过滤框设置一个事件`Input`，以便当其文本更改时，它会根据已被过滤的文本之间的匹配显示/隐藏 CheckBox 列表中的特定项目输入，以及`Attribute`各个`CheckBox`条目的值。没有看到您的特定 html 设置，不能比这更具体。

# c# - 从静态函数调用非静态函数

> ID：14978332
> 
> 赞同：2
> 
> 时间：2013-02-20T11:07:43.967
> 
> 标签：c#, javascript, asp.net

我无法从静态函数调用非静态函数（或）我想从静态函数调用 javascript 函数。

```
[WebMethod]
public static void add_items(string itemslist)
{
    get_price(itemslist); // Error An object reference is required for non-static

    //(or)
    ScriptManager.RegisterStartupScript(this, 
        this.GetType(), 
        "script", 
        "<Script language='javascript' "
           + "type='text/javascript'>message();</script>", 
        false); //Error in this, this
}

protected void get_price(string item_id)
{

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:30:06.200

由于无论您是否实例化该类，都可以访问静态方法，因此从静态方法访问类成员可能意味着您正在引用堆栈或堆中尚不存在的东西，从而在运行时创建异常.

出于这个原因，如果不先实例化非静态成员，就不能在静态方法中引用非静态成员，这就是您收到错误的原因。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:15:30.103

不幸的是，您不能在静态方法中调用实例方法。在您的情况下可以跟随吗？

```
 [WebMethod]
    public static void add_items(string itemslist, Action<string> instanceMethod)
    {
        //get_price(itemslist);// Error An object reference is required for non-static

        instanceMethod(itemlist);
    }

    protected void get_price(string item_id)
    {

    } 
```

然后像这样传递 get_price 作为参数。

```
add_items(anItemslist, get_price); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T11:10:56.517

你当然不能。如果你想这样做，你需要先实例化包含非静态方法的对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T11:11:30.007

直接选项是创建类的对象，然后调用方法。如果您没有更新对象状态（在这种情况下对我来说似乎），则将`get_price`方法签名转换为`static`

# java - 仅将 udp 套接字绑定到 ipv6 地址

> ID：14978338
> 
> 赞同：2
> 
> 时间：2013-02-20T11:07:51.593
> 
> 标签：java, sockets, bind, ipv6

我想知道如何通过执行以下代码将 UDP 套接字绑定到 IPv6 环回：

```
DatagramSocket datagramSocket = 
    new DatagramSocket(5000,Inet6Address.getByName("::1")); 
```

我得到以下 netstat 输出，绑定到 IPv4 的套接字以及 IPv6 地址。

```
UDP    0.0.0.0:5000           *:*                                    2932
UDP    [::1]:5000             *:*                                    2932 
```

但是当我尝试使用 TCP 而不是 UDP 的代码时

```
new ServerSocket().bind(new InetSocketAddress(
    InetAddress.getByName("::1"), 5000)); 
```

我只将套接字绑定到 IPv6 环回地址

```
TCP    [::1]:5000             [::]:0                 LISTENING       3856 
```

# permissions - 如何列出对 liferay 中的资源具有查看权限的用户？

> ID：14978340
> 
> 赞同：0
> 
> 时间：2013-02-20T11:07:53.193
> 
> 标签：permissions, liferay-6

我正在使用 liferay 6.1 GA2

我想实现一个功能，允许用户通过电子邮件发送 messageBaordmessage 的内容。我想将该发送限制为那些对消息具有查看权限的人。

如何列出具有查看权限的用户？

谢谢， 阿兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:51:22.077

Liferay 6.1 GA2 已经内置了邮件功能，因此假设不能满足您的需求，我认为您可以提供一个新操作来调用该功能，因为它已经知道如何检查 MBMessage、MBThread 和所有父 MBCategories。

有关实现，请参见 com.liferay.portlet.messageboards.service.impl.MBMessageLocalServiceImpl。

# spring-security - SpringSecurity 外部 ProviderManager

> ID：14978346
> 
> 赞同：0
> 
> 时间：2013-02-20T11:08:06.273
> 
> 标签：spring-security

我在 Spring 中创建身份验证服务。

在我的身份验证中，我需要连接到外部 webserwice，发送登录名和密码，以检查用户是否存在于另一个系统中。

我想做的方式是创建外部ProviderManarer。

我的`spring-security.xml`文件是：

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:security="http://www.springframework.org/schema/security"
       xmlns:beans="http://www.springframework.org/schema/beans"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/security
       http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <security:http pattern="/resources/**" security="none"/>
    <security:http authentication-manager-ref="userAuthManager" disable-url-rewriting="true" auto-config="true" use-expressions="true">
        <security:intercept-url pattern="/" access="permitAll"/>
        <security:intercept-url pattern="/adminPanel/" access="permitAll"/>
        <security:intercept-url pattern="/adminPanem/**" access="hasAnyRole('USER_ROLE', 'ADMIN_ROLE')"/>
        <security:form-login login-page="/adminPanel" default-target-url="/adminPanel/panel"
                authentication-failure-url="/adminPanel"/>
        <security:logout logout-success-url="/adminPanel"/>
    </security:http>

    <bean id="userAuth" class="org.myapp.app.backEnd.auth.UserAuthentication"/>

    <beans:bean id="userAuthManager" class="org.springframework.security.authentication.ProviderManager">
        <beans:property name="providers">
            <beans:list>
                <beans:ref local="userAuth"/>
            </beans:list>
        </beans:property>
    </beans:bean>

</beans> 
```

我的测试认证提供者是：

```
public class UserAuthentication implements  AuthenticationProvider{

     @Override
        public Authentication authenticate(Authentication authentication) throws AuthenticationException {

            System.out.println(" test " );

            System.out.println(authentication.getCredentials().toString());

            List<GrantedAuthority> authorities = new ArrayList<GrantedAuthority>();

            authorities.add(new SimpleGrantedAuthority("ADMIN_ROLE"));

            return new UsernamePasswordAuthenticationToken("test", authentication.getCredentials(), authorities);  //To change body of implemented methods use File | Settings | File Templates.
        }

        @Override
        public boolean supports(Class<?> aClass) {
            return false;  //To change body of implemented methods use File | Settings | File Templates.
        }
    } 
```

但是，有一个问题——我的配置没有调用`public Authentication authenticate`方法。

没有输出。

**此外**

我在 Spring 3.2 中看到了这一点：

```
<beans:bean id="userAuthManager" class="org.springframework.security.authentication.ProviderManager">
    <beans:property name="providers">
        <beans:list>
            <beans:ref local="userAuth"/>
        </beans:list>
    </beans:property>
</beans:bean> 
```

这：

```
<beans:property name="providers"> is depricated. 
```

你知道如何在 Spring 3.2 中正确配置它吗？

如何创建正确的配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:12:46.067

使用[此处](http://static.springsource.org/spring-security/site/docs/3.2.x/reference/springsecurity-single.html#ns-auth-providers)[`<authentication-manager>`](http://static.springsource.org/spring-security/site/docs/3.2.x/reference/springsecurity-single.html#nsa-authentication-manager)描述的标签：

```
<security:authentication-manager alias="userAuthManager">
  <security:authentication-provider ref="userAuth" />
</security:authentication-manager> 
```

# java - Jasper Report 与 Java 的集成

> ID：14978355
> 
> 赞同：1
> 
> 时间：2013-02-20T11:08:29.177
> 
> 标签：java, jasper-reports

尝试了下面的代码，但没有生成 PDF 报告。刚开始使用 Jasper integartion。请帮忙。

```
public String mainReport() {
      HashMap jrxmlParams = null;

      try {
       System.out.println("Start ....");
       // Get jasper report
       String jrxmlFileName = "C:/Jasper/DP_crosstabs.jrxml";

       JasperReport objJReport = JasperCompileManager.compileReport(jrxmlFileName);

       connection = getConnection();

       jrxmlParams = new HashMap();
       jrxmlParams.put("ID", "null");

       JasperPrint objJPrint = JasperFillManager.fillReport(objJReport, jrxmlParams, connection);

       ByteArrayOutputStream objBAOutputStream = new ByteArrayOutputStream();

       JasperExportManager.exportReportToPdfStream(objJPrint, objBAOutputStream);

       System.out.println("Done exporting reports to pdf");

      } catch (Exception e) {
       System.out.print("Exceptiion" + e);
      }
    return null;
     } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T13:37:37.563

试试下面的代码，

```
public static void main(String[] args) {

     String reportPath = "/report3.jasper";
     Map<String, Object> params = new HashMap<String, Object>();
     Connection connection;

    try {

          Class.forName("com.mysql.jdbc.Driver");
          connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/person","root","password");

        System.out.println("Filling report...");
        JasperPrint jasperPrint = JasperFillManager.fillReport(reportPath, params, connection);
        JasperExportManager.exportReportToPdfFile(jasperPrint,
                            "/Test.pdf");
        JasperViewer.viewReport(jasperPrint, false);
        connection.close();
    } catch (Exception e) {
        System.out.println(e.getMessage());
    }

    }} 
```

# java - 使用 class.ForName 注册 HSQLDB 驱动程序

> ID：14978359
> 
> 赞同：0
> 
> 时间：2013-02-20T11:08:37.977
> 
> 标签：java, junit4, hsqldb

我在使用 NetBeans 5.5.1 时遇到了一个奇怪的问题。我正在为我的一个课程创建一个测试课程。我正在测试的方法是从一个名为 getConnection 的方法中获取自己的连接，如下所示：

```
//This method was mainly done for an HSQLDB connection
public static Connection getConnection(String connectionString,String databaseDriver, String user, String pass) throws Exception
{
    Connection conn = null;
    try 
    {
        System.out.println("Registering database driver "+databaseDriver);
        Class.forName(databaseDriver);
        System.out.println("Successfully registered database driver "+databaseDriver);
        Properties props = new Properties();
        props.setProperty("user",user);
        props.setProperty("password",pass);

        conn = DriverManager.getConnection(connectionString, props);
    } 
       catch (ClassNotFoundException ex) 
       {
        System.out.println("Reached catch block getConnection()");
        throw new Exception ("Unable to create connection to database", ex);
    }

    catch (Exception ex) 
    {
        System.out.println("Reached catch block getConnection()");
        throw new Exception ("Unable to create connection to database", ex);
    }

        return new DatabaseConnection(conn).getConnection();

} 
```

我使用的数据库驱动程序是 HSQLDB。运行我的测试方法后，打印到我的输出的唯一日志语句是 **注册数据库驱动程序 org.hsqldb.jdbcDriver**

我的预期结果是： **注册数据库驱动 org.hsqldb.jdbcDriver** **成功注册数据库驱动 org.hsqldb.jdbcDriver**

当我故意使用错误的数据库驱动程序时，我可以清楚地看到抛出异常，这意味着我正在使用的上述驱动程序正在工作，并且可以在我的 classPath 中找到它。

那么问题似乎是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:45:33.340

正如“Ian Roberts”所建议的那样，当将异常作为 Throwable 捕获时，我意识到 Class.ForName 抱怨类号错误（当您尝试使用比您的库之一更旧的 JDK 编译时会发生这种情况） . 将 HSQLDB 从版本 2.2.9 更改为 2.2.8.jdk5 解决了这个问题。

# java - 找不到 JRE（弹性）

> ID：14978371
> 
> 赞同：0
> 
> 时间：2013-02-20T11:09:21.427
> 
> 标签：java, apache-flex, actionscript

我已经安装了 java JDK，当我打开控制台（Windows 7）并编写 javac.exe 或 java.exe 时，一切正常，但是当我编写 mxmlc.exe 时，它​​给我一个错误，即没有 Java 运行时环境，如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:31:57.050

可能是因为 javac.exe 和 java.exe 是 jdk 内 jre 的一部分。jre 的 /bin 在你的路径上，jdk 的 /bin 不在。

编辑：你还需要让 JAVA_HOME 指向正确的目录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-14T23:35:39.583

请务必安装 32 位版本的 JRE。这似乎是 Flex SDK 4.6 所期望的。

# ios - 我可以在 UITabBarController 中添加 UITabBarController 吗？

> ID：14978373
> 
> 赞同：0
> 
> 时间：2013-02-20T11:09:26.190
> 
> 标签：ios, objective-c, app-store, xcode4.5

我有两个菜单，第一个（主要）水平和第二个（单击第一个菜单的第二个按钮）垂直。我想做第一个菜单使用 UITabBarController，第二个菜单也使用 UITabBarController。

**我可以做吗？**

**如何自定义功能将更改控制器的第二个菜单？**

**App Store 可以通过这个功能拒绝这个应用吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:47:18.880

> App Store 可以通过这个功能拒绝这个应用吗？

也许，请注意 10.3 和 10.6：

![应用商店规则第 10 节](../Images/7829c574cf8e3fa24986708bfe457372.png)

# android - 是否可以在 android 的主屏幕上将 View 设置为墙纸？

> ID：14978375
> 
> 赞同：0
> 
> 时间：2013-02-20T11:09:35.277
> 
> 标签：android

我的问题是我正在通过扩展 View 创建一个自定义模拟时钟，我想在主屏幕上显示这个时钟作为墙纸。任何人都可以知道答案..任何建议表示赞赏...在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:40:21.013

您只能在动态壁纸中绘制模拟时钟并将其用作背景。您不能只将视图设置为墙纸。

# c# - 如何将时间转换为百分比？（内有说明）

> ID：14978379
> 
> 赞同：-2
> 
> 时间：2013-02-20T11:09:49.463
> 
> 标签：c#, windows-phone-8

我正在做一个日常工作的计划项目 windows phone。最初我会将最大小时或分钟设置为一个变量，假设为 100%。如果时间减少，那么百分比也应该减少。

例如，假设我们为 100% 分配 10 小时，如果小时数减少到 5，则百分比应为 50%。

有人告诉我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:24:06.900

一个简单的功能就足够了。你可以试试这个吗？

```
 //Example initial time to 1 houre == 100%
    TimeSpan InitialTime = new TimeSpan(1, 0, 0);

    private double getPercentOnTime(TimeSpan currentTime,TimeSpan timeToRemove)
    {

        //Convert all to minutes
        double currentTime_minute = currentTime.TotalMinutes;
        double timeToRemove_minute = timeToRemove.TotalMinutes;
        double InitialTime_minute = InitialTime.TotalMinutes;

        //Calcul the additional time to remove from InitialTime
        double totaltimeToRemove = currentTime_minute + timeToRemove_minute;

        //calcul the new percent
        double percent = (InitialTime_minute / 100.0) * totaltimeToRemove;

        return percent;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:13:24.647

```
TimeSpan totalTime;
TimeSpan actualTime

actualTime.TotalMiliseconds / totalTime.TotalMiliseconds * 100 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:15:44.883

像这样的东西：

```
var tenHours = TimeSpan.FromHours(10); // 100%
var testHours = TimeSpan.FromHours(3); // 30%
var percent = ((float) testHours.Ticks/tenHours.Ticks)*100f; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T11:18:29.223

您可以使用[“P”格式化程序](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)`double`将值（0.0 - 1.0）格式化为百分比。

```
(0.5).ToString("P0"); // "50%" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T11:25:34.740

简单的比例。如果 10 小时是 100% 5 小时是多少... 5/10*100

# asp.net - 使用 html 中的样式和颜色创建 PDF

> ID：14978384
> 
> 赞同：0
> 
> 时间：2013-02-20T11:09:57.847
> 
> 标签：asp.net, css, pdf

在 Web 应用程序项目中，我正在动态创建 PDF 文件，为此我们使用第三方工具，如 itextsharp 、 Winnovative 等，它工作正常，但在 PDF 文件中，样式和颜色没有反映，我想创建 PDF 就像XEROX 网页的副本。是否有任何第三方组件可以像 html 一样创建 PDF 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:20:15.333

如果您的意思是将 HTML 直接添加到 PDF 中，可以使用 iTextSharp 来实现。
[使用 itextsharp 在 PDF 中直接插入 HTML](https://stackoverflow.com/questions/12529244/insert-html-directly-in-pdf-using-itextsharp)

iTextSharp还可以用来添加颜色、字体、形状、图形……那系列文章详细讲解了 [在ASP.NET中创建PDF——iTextSharp入门](http://www.mikesdotnetting.com/Article/80/Create-PDFs-in-ASP.NET-getting-started-with-iTextSharp)

# ruby-on-rails - 你能把 Arel 表变回示波器吗？

> ID：14978385
> 
> 赞同：2
> 
> 时间：2013-02-20T11:09:58.130
> 
> 标签：ruby-on-rails, ruby, arel

我需要 Arel 做一些 ActiveRecord 无法完成的事情，但我的方法应该返回一个范围，因为调用者可能想要添加他们自己的一些范围。

这可能吗？

例如`User.arel_table.scoped.first`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T15:16:34.450

您可以在中使用 arel 语句`Relation#where`

例子 ：

```
Model.where( Model.arel_table[:column].not_eq( nil )
               .or(Model.arel_table[:other_column].gt( 0 )) ) 
```

关于它有一个很好的[ASCIIcast](http://asciicasts.com/episodes/215-advanced-queries-in-rails-3)（最后是 arel）。此外，您可能对[squeel](https://github.com/ernie/squeel)感兴趣。

# android - Android：如何以编程方式设置 drawablePadding？

> ID：14978389
> 
> 赞同：49
> 
> 时间：2013-02-20T11:10:14.150
> 
> 标签：android

这是我在 xml 布局中的代码：

```
<TextView
    android:id="@+id/mail_message_content_field"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Medium Text"
    android:autoLink="web"
    android:drawableLeft="@drawable/attachment"
    android:drawablePadding="10dp"
    android:gravity="center|left"
    android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

与我想以编程方式更改 drawablePadding 的方式相同。这该怎么做？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-02-20T11:19:56.557

您可以获得您的文本视图的引用，然后可以设置

```
UrTextView.setCompoundDrawablePadding(your padding value); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-20T12:29:42.307

```
textView.setCompoundDrwablePadding(takes_only_one_argument_for_all_side_padding); 
```

# extjs - 如何在 extjs 中使用具有不同 URL 的同一商店

> ID：14978390
> 
> 赞同：4
> 
> 时间：2013-02-20T11:10:23.143
> 
> 标签：extjs, extjs4, store

我在 extjs 工作。我有商店-

```
 Ext.define('Balaee.store.qb.QbqnsStore',{
            extend: 'Ext.data.Store',
            model: 'Balaee.model.qb.QbqnsModel',
            autoLoad: true,

            proxy:
            {
                type:'ajax',
                api:
                {
        read:index.php/QuestionBank/qbpaper/createpaper',

        },
                reader:
                {type:'json',
                    //root:'polls',},
                writer:
                {type:'json',
                    root:'data',
                }}}); 
```

所以proxy的read属性设置在Url上面。现在我想将同一个商店用于其他视图，但使用不同的 Url 读取属性。那么如何动态更改商店的读取 URL？我曾尝试过按钮单击事件我想从 url-/index.php/QuestionBank/qbpaper/Reviewquestionpaper111 读取数据

所以在按钮点击功能上，我写成——

```
review:function()
    {
        //alert("hello");

        var QbqnsStore=this.getStore('qb.QbqnsStore');
        proxy=QbqnsStore.getProxy();
        Ext.apply(proxy.api,{
            read:'http://127.0.0.1/s_balaee/Balaee/index.php/QuestionBank/qbpaper/Reviewquestionpaper',

        }); 
```

我已经创建了这家商店的变量并提供了新的所需 URL。Bt 它不工作。那么如何在读取属性中使用不同的 URL 来使用相同的存储。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:41:34.357

您可以尝试如下：

```
QbqnsStore.proxy.url =  'new url'; 
```

这将改变它的读取网址。确保在更改网址后您应该重新加载您的商店：

```
QbqnsStore.reload(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T10:51:43.473

您可以使用以下代码：

```
 var QbqnsStore=this.getStore('qb.QbqnsStore').load({url:'newUrl'}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-21T12:01:15.490

您可以简单地更改对象**代理的****读取**属性：

 **```
 var store = this.getStore('qb.QbqnsStore');
  proxy = store.getProxy();
  proxy.api.read = 'http://127.0.0.1/myNewUrl'; 
```

然后调用`store.sync()`或`store.load()`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-25T13:33:52.980

store.proxy.api.read = '新网址';**

# asp.net - Umbraco 用户控件包装器中的错误

> ID：14978391
> 
> 赞同：0
> 
> 时间：2013-02-20T11:10:29.970
> 
> 标签：asp.net, umbraco

我使用 Umbraco 用户控件包装器在 umbraco 中创建了一个自定义数据类型，但是当我在 umbraco 节点中运行它时，它给了我一个错误

```
 At /umbraco/editContent.aspx?id=2969 (Referred by: http://aksp:201/umbraco/umbraco.aspx): System.InvalidCastException: Unable to cast object of type 'ASP.usercontrols_shopdata_ascx' to type 'umbraco.editorControls.userControlGrapper.IUsercontrolDataEditor'.     at umbraco.editorControls.userControlGrapper.usercontrolDataEditor.OnInit(EventArgs e)     at System.Web.UI.Control.InitRecursive(Control namingContainer)     at System.Web.UI.Control.InitRecursive(Control namingContainer)     at System.Web.UI.Control.InitRecursive(Control namingContainer)     at System.Web.UI.Control.InitRecursive(Control namingContainer)     at System.Web.UI.Control.InitRecursive(Control namingContainer)     at System.Web.UI.Control.AddedControl(Control control, Int32 index)     at umbraco.controls.ContentControl.addControlNew(Property p, TabPage tp, String Caption)     at umbraco.controls.ContentControl.CreateChildControls()     at System.Web.UI.Control.EnsureChildControls()     at umbraco.controls.ContentControl.OnInit(EventArgs e)     at System.Web.UI.Control.InitRecursive(Control namingContainer)     at System.Web.UI.Control.AddedControl(Control control, Int32 index)     at umbraco.cms.presentation.editContent.OnInit(EventArgs e)     at System.Web.UI.Control.InitRecursive(Control namingContainer)     at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

我不知道出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:59:27.807

这是一个无效的强制转换，它试图将您的自定义`shopdata`用户控件强制转换`IUsercontrolDataEditor`为无效的。

确保您的控件实现了`umbraco.editorControls.userControlGrapper.IUsercontrolDataEditor`接口

[这里](http://www.nibble.be/?p=24)和[这里](http://www.oshyn.com/_blog/Web_Content_Management/post/Custom_DataTypes_in_Umbraco/)是关于如何使用 UmbracoUsercontrol 包装器创建自定义数据类型的很好的指南。

# android - Android：缩放 TextView 背景图像以适合 XY

> ID：14978395
> 
> 赞同：9
> 
> 时间：2013-02-20T11:10:38.957
> 
> 标签：android, android-layout, textview

我有以下文本视图，它使用一个简单的导航栏 png 文件作为其背景图像。这是代码：

```
<TextView
        android:id="@+id/titleNameText"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:background="@drawable/navbar"
        android:gravity="center_horizontal"
        android:singleLine="true"
        android:textColor="@color/WHITE"
        android:textSize="18sp"
        android:textStyle="bold" /> 
```

问题是在更大的屏幕上导航栏不能水平缩放以适应屏幕，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-12-09T16:07:09.947

在 TextView 后面放置一个 imageview 并使用 android:align... 使其大小与 TextView 的大小相对应：

```
<RelativeLayout android:layout_width="wrap_content"
                android:layout_height="wrap_content">
    <ImageView android:layout_width="match_parent"
               android:layout_height="match_parent"
               android:layout_alignBottom="@id/titleNameText"
               android:layout_alignLeft="@id/titleNameText"
               android:layout_alignRight="@id/titleNameText"
               android:layout_alignTop="@id/titleNameText"
               android:scaleType="fitXY"
               android:src="@drawable/navbar"/>

    <TextView
        android:id="@+id/titleNameText"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:background="@drawable/navbar"
        android:gravity="center_horizontal"
        android:singleLine="true"
        android:textColor="@color/WHITE"
        android:textSize="18sp"
        android:textStyle="bold"/>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T11:22:51.177

设置为 a 的 android:background `TextView`（*在此上下文中*）没有该属性`android:scaleType="fitXY"`（或任何其他值）。该属性位于`ImageViews`和上`ImageButtons`。

话虽这么说，我会针对您目前的情况提出 2 条建议。

1.  将 更改`android:layout_width="wrap_content"`为`android:layout_width="fill_parent"`。当然，TextView 的可绘制集将尊重 TextView 的宽度。我只是推测（*在 OP 中没有截图*）内容在较大的显示器上不够宽以填充宽度。

2.  如果您还没有这样做，请使用[Shape Drawable XML](http://developer.android.com/reference/android/graphics/drawable/ShapeDrawable.html)或[9-patch](http://developer.android.com/tools/help/draw9patch.html)。这将确保跨多种屏幕尺寸的一致质量。

*如果我完全错了，请发布屏幕截图。这会让事情变得更清楚。;-)*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:18:11.527

您需要修改`android:layout_height="50dp"`以使视图“更高”，例如尝试`match_parent`而不是`50dp`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T11:45:02.233

您应该为背景图像使用[九个补丁](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)。希望这会帮助你。

# ruby-on-rails - ember-data RC1（ember 数据修订版 11）中一对一关系的 createRecord 失败

> ID：14978408
> 
> 赞同：1
> 
> 时间：2013-02-20T11:11:21.210
> 
> 标签：ruby-on-rails, mongodb, ember.js, ember-data

`createRecord`从不创建`belongsTo`对象。

*在存在这种关系并且评论始终*`Post-> hasOne -> Comment`嵌入在帖子中的情况下，是否有任何解决方法可以创建子模型对象。

 *这适用于`Post -> hasMany -> Comments`（如在 ember-data-example 中。需要帮助，我们遇到了这个问题。

```
 App.Test  = DS.Model.extend({
      text: DS.attr('string'),
      contact: DS.belongsTo('App.Contact')
    });
    App.Contact  = DS.Model.extend({
      id: DS.attr('number'),
      phoneNumbers: DS.hasMany('App.PhoneNumber'),
      test: DS.belongsTo('App.Test')
    });
    App.PhoneNumber = DS.Model.extend({
      number:  DS.attr('string'),
      contact: DS.belongsTo('App.Contact')
    });

    App.RESTSerializer = DS.RESTSerializer.extend({
    init: function() {
      this._super();

    this.map('App.Contact', {
      phoneNumbers: {embedded: 'always'},
      test: {embedded: 'always'}
    });
   }
});

/* in some controller code */
this.transitionToRoute('contact', this.get('content')); 
```

以下代码行有效：

```
this.get('content.phoneNumbers').createRecord(); 
```

以下代码行失败：

```
 this.get('content.test').createRecord(); 
```

这是错误：

```
Uncaught TypeError: Object <App.Test:ember354:null> has no method 'createRecord' 
```

所以 hasMany 与 createRecord 一起工作，但 1:1 失败。难道我做错了什么 ？什么必须是正确的方法/不可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:12:55.343

关系`hasMany`用 表示`DS.ManyArray`。该数组默认为空，但仍公开一个`createRecord`方法。

`belongsTo`关联只是对记录的引用。`null`默认情况下。所以你没有任何方法可以调用它。

在您的情况下，您希望首先创建一条记录，然后将其分配给另一条记录。

```
this.set('test', App.Test.createRecord()); // the controller is a proxy to your model, no need to use content 
```

或者您可以将联系人分配给新`App.Test`记录

```
App.Test.createRecord( { contact: this.get('content') } ); 
```*

# jquery - Jquery将变量添加到后退按钮

> ID：14978409
> 
> 赞同：0
> 
> 时间：2013-02-20T11:11:21.773
> 
> 标签：jquery, ajax, button, back

我在页面上有一个 AJAX 调用，它在页面加载时使用来自 url 的一些变量。

```
www.myurl.com/?mayvar=foo 
```

这些变量可以在用户转到下一页之前更改。例如，用户选中一个复选框，我得到了新变量。

```
mynewwar=bar 
```

如何制作后退按钮以指向新地址

```
www.myurl.com/?mayvar=foo&mynewwar=bar 
```

如果用户想回去？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:34:14.990

尝试将变量放入哈希中：

```
var variable = 'mayvar=foo&mynewvar=bar';
location.hash = variable; 
```

这将在不离开页面的情况下更改 url，并且后退按钮将记住
过去的哈希（当然，您必须相应地更改脚本才能从哈希中读取）

# linux - 在 Linux 中使用 cURL 进行 HTTP POST 和 GET

> ID：14978411
> 
> 赞同：402
> 
> 时间：2013-02-20T11:11:26.853
> 
> 标签：linux, web-services, curl

我有一个在 Windows 上用 ASP.NET 编写的服务器应用程序，它提供 Web 服务。

如何使用 cURL 在 Linux 中调用 Web 服务？

* * *

## 回答 #1

> 赞同：779
> 
> 时间：2013-02-20T11:25:02.720

*nix 提供了一个不错的小命令，它让我们的生活更轻松。

**得到：**

*使用 JSON：*

```
curl -i -H "Accept: application/json" -H "Content-Type: application/json" -X GET http://hostname/resource 
```

*使用 XML：*

```
curl -H "Accept: application/xml" -H "Content-Type: application/xml" -X GET http://hostname/resource 
```

**邮政：**

*对于发布数据：*

```
curl --data "param1=value1&param2=value2" http://hostname/resource 
```

*对于文件上传：*

```
curl --form "fileupload=@filename.txt" http://hostname/resource 
```

*RESTful HTTP 帖子：*

```
curl -X POST -d @filename http://hostname/resource 
```

*登录网站（auth）：*

```
curl -d "username=admin&password=admin&submit=Login" --dump-header headers http://localhost/Login
curl -L -b headers http://localhost/ 
```

**漂亮地打印卷曲结果：**

*对于 JSON：*

如果你使用`npm`and ，你可以通过运行这个命令`nodejs`来安装包：`json`

```
npm install -g json 
```

用法：

```
curl -i -H "Accept: application/json" -H "Content-Type: application/json" -X GET http://hostname/resource | json 
```

如果你使用`pip`and ，你可以通过运行这个命令`python`来安装包：`pjson`

```
pip install pjson 
```

用法：

```
curl -i -H "Accept: application/json" -H "Content-Type: application/json" -X GET http://hostname/resource | pjson 
```

如果您使用 Python 2.6+，则 json 工具捆绑在其中。

用法：

```
curl -i -H "Accept: application/json" -H "Content-Type: application/json" -X GET http://hostname/resource | python -m json.tool 
```

如果你使用`gem`and ，你可以通过运行这个命令`ruby`来安装包：`colorful_json`

```
gem install colorful_json 
```

用法：

```
curl -i -H "Accept: application/json" -H "Content-Type: application/json" -X GET http://hostname/resource | cjson 
```

如果您使用`apt-get`（Linux 发行版的 aptitude 包管理器），您可以`yajl-tools`通过运行以下命令来安装包：

```
sudo apt-get install yajl-tools 
```

用法：

```
curl -i -H "Accept: application/json" -H "Content-Type: application/json" -X GET http://hostname/resource |  json_reformat 
```

*对于 XML：*

如果您在 Debian/Gnome 环境中使用 *nix，请安装`libxml2-utils`：

```
sudo apt-get install libxml2-utils 
```

用法：

```
curl -H "Accept: application/xml" -H "Content-Type: application/xml" -X GET http://hostname/resource | xmllint --format - 
```

或安装`tidy`：

```
sudo apt-get install tidy 
```

用法：

```
curl -H "Accept: application/xml" -H "Content-Type: application/xml" -X GET http://hostname/resource | tidy -xml -i - 
```

**将 curl 响应保存到文件中**

```
curl http://hostname/resource >> /path/to/your/file 
```

或者

```
curl http://hostname/resource -o /path/to/your/file 
```

有关 curl 命令的详细说明，请点击：

```
man curl 
```

有关 curl 命令的选项/开关的详细信息，请点击：

```
curl -h 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2014-01-21T20:54:13.333

我认为 Amith Koujalgi 是正确的，但如果 web 服务响应是 JSON 格式，那么以干净的 JSON 格式而不是很长的字符串查看结果可能更有用。只需添加 | grep }| python -mjson.tool 到 curl 命令的结尾这里是两个例子：

**带有 JSON 结果的 GET 方法**

```
curl -i -H "Accept: application/json" http://someHostName/someEndpoint | grep }| python -mjson.tool 
```

**带有 JSON 结果的 POST 方法**

```
curl -X POST  -H "Accept: Application/json" -H "Content-Type: application/json" http://someHostName/someEndpoint -d '{"id":"IDVALUE","name":"Mike"}' | grep }| python -mjson.tool 
```

![在此处输入图像描述](../Images/34be9bb152308ab0c200f63a1102a906.png)

# android - 用户从状态栏中删除所有通知，如何获取事件

> ID：14978413
> 
> 赞同：1
> 
> 时间：2013-02-20T11:11:31.417
> 
> 标签：android, notifications

在我的应用程序中，我创建了一个通知并在用户单击它时将其删除，并且它可以正常工作。但是，用户也可以通过按下状态栏上清除所有通知的键来删除通知，我如何才能监听此事件以更好地管理数据库中的通知？

编辑：感谢 Zielony，要完成答案，必须为该操作注册一个 BroadcastReceiver`notification_cancelled`并添加`.setDeleteIntent(PendentIntent())`到 Notification.Builder

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:18:56.100

您应该使用 deleteIntent 操作替换单击。

[删除意图](http://developer.android.com/reference/android/app/Notification.html#deleteIntent)

# android - 将android项目组合在一起

> ID：14978414
> 
> 赞同：3
> 
> 时间：2013-02-20T11:11:33.140
> 
> 标签：android, android-activity, project

我想以这样的方式将 2 个 android 项目组合在一起，当从一个活动（第一个项目）按下按钮时，它应该从（第二个项目）开始我的活动，这两个项目都是功能齐全的应用程序。只是他们是分部分开发的

我要调用的活动是

> 当从第一个项目的活动中按下按钮时，来自第二个项目的 MainActivity.java

我想将项目组合在一起..以便我可以将其导出为单个 apk...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T12:02:22.993

答案取决于您打算如何处理这些项目。

如果您希望将项目合并到单个应用程序中，至少应将其中一个设置为 android 库，并且另一个项目应使用它。这样，合并后的项目将能够相互识别。

如果您希望拥有 2 个应用程序而不是单个应用程序，那么您希望从另一个 Activity 访问的每个 Activity 都应该在清单中（使用 Intent 过滤器）有一个关于如何打开它的特殊定义，因为它不是默认行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T11:46:24.610

如果您只需要显示一个新`MainActivity`实例，则需要在“第二个项目”清单中声明一个意图过滤器：

```
 <activity android:name=".MainActivity">
   <intent-filter>
     <action android:name="your.package.here.MainActivity" />
     <category android:name="android.intent.category.DEFAULT" />
   </intent-filter>
 </activity> 
```

然后在您的第一个项目中使用相同的操作字符串创建一个意图：

```
Intent intent = new Intent("your.package.here.MainActivity");
startActivity(intent); 
```

# c - C - 传递可变参数

> ID：14978415
> 
> 赞同：1
> 
> 时间：2013-02-20T11:11:34.820
> 
> 标签：c, variadic-functions

我基本上是在写一个`printf`. 我想要它，以便您可以在字符串中传递许多字符串，例如：

```
kprintf("Hello %s", "Goodbye %s", "Farewell\n"); 
```

不要问为什么，这很可能是疯了。无论如何，它会在查找它传递的字符串中有多少个 % 字符后递归调用自己；因此，如果其中超过 1%，它应该传递许多参数。但是，我无法以任何优雅的方式实现这一目标，请参见以下内容：

```
case 1:
    kprintf(str, argus[0]);
break;
case 2:
    kprintf(str, argus[0], argus[1]);
break;
case 3:
    kprintf(str, argus[0], argus[1], argus[2]);
break;
case 4:
    kprintf(str, argus[0], argus[1], argus[2], argus[3]);
break;
case 5:
    kprintf(str, argus[0], argus[1], argus[2], argus[3], argus[4]);
break; 
```

作为`argus`指针数组。这行得通，但我讨厌它。有没有办法将变量参数传递给函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:18:14.740

有一种类型可以做你的工作。它被称为“va_list”，你可以给它提供参数（我猜最多 4096 个）。为了使用它，包含`starg.h`-header 并且您需要`...`在函数声明中使用省略号。

```
int kprintf(int count, ...){
va_list vl;
va_start(vl,count);
for (i=0;i<n;i++)
{
val=va_arg(vl,double);
printf (" [%.2f]",val);
}
va_end(vl);
} 
```

有关示例，请参见[此处。](http://www.cplusplus.com/reference/cstdarg/va_start/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:17:14.127

如果你会使用 C++，[在这里](http://www.codeproject.com/Articles/4181/Variable-Argument-Functions)你可以找到一篇关于可变参数函数的文章，带有可下载的源代码，应该可以解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:41:23.043

虽然可以编写`%<something>`在传递给的字符串中解析的内容`%s`，但通常不是在 C/C++ 中完成的。

如果要将格式化的字符串放入`printf`语句中，请使用`sprintf()`格式化第一个字符串（在临时缓冲区中），然后将该字符串传递给实际`printf`函数。是的，这涉及一个额外的步骤，但它使代码更容易 - 如果您正在解析传递给 的字符串`printf`，您几乎必须进行`printf`递归[或在 printf 中包含某种内容`stack`，以跟踪您在做什么]。

# jquery - 为什么此代码在单击按钮后未在 html 页面中显示任何验证错误

> ID：14978416
> 
> 赞同：1
> 
> 时间：2013-02-20T11:11:39.510
> 
> 标签：jquery, jquery-validate, puremvc

jQuery 验证在我用来验证表单的代码中不起作用。

我使用了 PureMVC，并在 index.html 文件中使用了从 ajax 请求加载的contact.html 文件。如果我在单击按钮时发出 javascript 警报，那么我可以看到它们，但它们不会在单击按钮时进行任何验证

```
$("#contactUsSubmit").live('click', function() {

                $("#contactForm").validate({
                    errorLabelContainer: $("#contactAlert ul"),
                    rules: {
                        contactName: {
                            required: true,
                            minlength: 6
                        }
                    }
                });

            }); 
```

有人知道我在这段代码中做错了什么。#contactname 是 contactName 的 ID

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:15:56.897

那么该`live('click', (...)`函数是否被正确调用？JQuery 1.9 删除了 .live 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:57:59.470

你的代码：

```
$("#contactUsSubmit").live('click', function() {
    $("#contactForm").validate({
        //options,
        ...
    });
}); 
```

你不应该那样实现它。您只是在每次点击时初始化插件。直到第一次单击初始化插件后才会发生验证（然后第二次单击将验证*）*。该插件已经内置了`click`事件处理程序，并且会自动捕获。

[`.validate()`](http://docs.jquery.com/Plugins/Validation/validate#options)应该在准备*初始化*插件的 DOM 中调用*一次。*

 *```
$(document).ready(function() {

    $("#contactForm").validate({
        //options,
        rules: {
            contactName: {
                required: true,
                minlength: 6
            }
        }
    });

}); 
```

请注意，该`name`属性对于所有输入元素都是必需的：

```
<form id="contactForm">
    <input type="text" name="contactName" id="contactName"/>
    <input id="contactUsSubmit" type="submit" />
</form> 
```

**播放您的表单演示：http: [//jsfiddle.net/FfJCV/](http://jsfiddle.net/FfJCV/)**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-20T16:50:01.797

我认为它对您不起作用可能是因为[您的表单字段上必须有名称元素](https://stackoverflow.com/a/13994503/678338)。查看这个 PUREMVC 示例，它没有字段元素的名称。

**编辑** url 粘贴在下面，因为编辑器有问题

这段代码没有理由不起作用，请注意，您必须调用 valid() 才能立即查看任何错误消息。

```
$("#contactUsSubmit").live('click', function() {

    $("#contactForm").validate({
        errorLabelContainer: $("#contactAlert ul"),
        rules: {
            contactName: {
                required: true,
                minlength: 6
            }
        }
    });
    // call valid to see errors
    $("#contactForm").valid();

}); 
```

纯 Mvc 示例 [http://darkstar.puremvc.org/content_header.html?url=http://puremvc.org/pages/demos/TS/PureMVC_TS_Demo_EmployeeAdmin&desc=PureMVC%20TypeScript%20Demo:%20Employee%20Admin](http://darkstar.puremvc.org/content_header.html?url=http://puremvc.org/pages/demos/TS/PureMVC_TS_Demo_EmployeeAdmin&desc=PureMVC%20TypeScript%20Demo:%20Employee%20Admin)*

# javascript - 想要使用 javascript 和 html 在 webapp 中创建 gridview

> ID：14978417
> 
> 赞同：0
> 
> 时间：2013-02-20T11:11:47.610
> 
> 标签：javascript, html, blackberry-webworks

我是 webworks 的新手，我想使用 javascript 和 html 在 BB10 os 中创建 gridview。

如何在 Web 应用程序中创建 gridView，从远程 json 文件中获取 gridview 中的图像。

简而言之，我想从远程解析它并在该 json 文件中获取数据并设置为 gridview 图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:29:07.373

使用 Jquery 而不是 javaScript.. 因为 jQuery 与 javascript 相比快速且高效。
[jquery 网格教程](http://jquerygrid.net/)

# sql - 从一个表插入到另一个表，然后从表中删除

> ID：14978420
> 
> 赞同：-1
> 
> 时间：2013-02-20T11:11:58.610
> 
> 标签：sql

如何从一个表插入另一个表，然后在插入后从第一个表中删除？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:13:59.037

为此，您需要两个查询。

第一个查询是从第一个表中复制记录，

```
INSERT INTO tableTwo(col1, col2,...,colN)
SELECT  col1, col2,...,colN
FROM    tableOne 
```

第二个是从第一个表中删除记录，

```
DELETE FROM tableOne 
```

为了打一个电话，您可以将这些查询包装在一个`STORED PROCEDURE`

```
CREATE PROCEDURE procName()
BEGIN

    INSERT INTO tableTwo(col1, col2,...,colN)
    SELECT  col1, col2,...,colN
    FROM    tableOne;

    DELETE FROM tableOne;

END 
```

并调用程序

```
CALL procName(); 
```

* * *

*上面存储过程的语法适用于`MySQL`. 您正在使用什么[RDBMS](http://en.wikipedia.org/wiki/Relational_database_management_system)？`SQL Server`? `MySQL`? `Oracle`? `DB2`? 等等..所以我可以更新答案。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-06T10:30:09.270

一次调用移动记录怎么样？

```
DELETE FROM tableOne
OUTPUT col1, col2,..., colN
INTO tableTwo 
```

# html - 是否可以仅使用 html 将消息发布到 Facebook 墙上？

> ID：14978424
> 
> 赞同：0
> 
> 时间：2013-02-20T11:12:10.800
> 
> 标签：html, facebook

一位客户询问是否可以包含一个链接，该链接通过 html 时事通讯将消息发布到您的 Facebook 墙上。这通常通过 iframe 发生，但是否可以复制链接并将其用作`<a>`标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:15:59.333

听起来您正在寻找 facebook 分享者链接？

```
https://www.facebook.com/sharer/sharer.php?u=URL_TO_SHARE 
```

where`URL_TO_SHARE`替换为您要在 facebook 上分享的网址，例如`www.google.com`

HTML

```
<a href="https://www.facebook.com/sharer/sharer.php?u=http://www.google.com" target="_blank">Click Here To Share</a> 
```

# c++ - R(C::*)(P1,P2) 是什么意思？

> ID：14978426
> 
> 赞同：3
> 
> 时间：2013-02-20T11:12:16.450
> 
> 标签：c++, templates

我看到了这个模板声明：

```
template<typename C, typename R, typename P1, typename P2> struct mystruct<R(C::*)(P1,P2)> { ... }; 
```

我知道 C::* 表示“指向 C 成员的指针”，但我不明白 R(C::*)(P1,P2) 的作用

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T11:15:02.033

```
R(C::*)(P1,P2) 
```

指向类 C 的成员函数的指针，采用 P1 和 P2 类型的参数，返回 R。

该行作为一个整体是一个类模板特化（必须至少存在一个用于`mystruct`某处的主模板的声明）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-20T11:19:39.920

这意味着传递给模板参数的类型`mystruct`是指向`C`具有返回类型的成员函数的指针，该成员函数接受类型和`R`两个参数。`P1``P2`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-20T11:14:49.327

`R(C::*)(P1,P2)`表示指向函数的指针，该函数是 C 返回 R 的成员，并将 P1 和 P2 作为参数。

# xcode - NSTask 执行字符串

> ID：14978428
> 
> 赞同：0
> 
> 时间：2013-02-20T11:12:23.167
> 
> 标签：xcode, macos, nstask

如何使用 NSTask 执行一组 shell 脚本

下面的字符串必须使用 NSTask 执行。

```
 NSString *aString = @"MY_USERNAME=\"SAM\"\
PROJDIR=\"/Path\"\
APPLICATION_NAME=\"AppName\"\
PROJECT_NAME=\"${APPLICATION_NAME}\" # .xcodeproj ommitted\
TARGET_SDK=\"iphoneos6.0\"\
PROJECT_BUILDDIR=\"${PROJDIR}/build/Release-iphoneos\"\
TARGET_TEST_NAME=\"UnitTests\"\
BUILD_HISTORY_DIR=\"/Users/${MY_USERNAME}/Desktop\"\
DEVELOPPER_NAME=\"iPhone Developer: Name (********)\"\
PROVISONNING_PROFILE=\"/Users/${MY_USERNAME}/Desktop/***************.mobileprovision\"\
/usr/libexec/PlistBuddy -h\
/usr/libexec/PlistBuddy -c \"Print :netId\" \"path/Info.plist\"\
myversion=40675\
/usr/libexec/PlistBuddy -c \"Set :netId '${myversion}'\" \"path/Info.plist\"\
# compile project\
echo Building Project\
cd \"${PROJDIR}\"\
xcodebuild -target \"${PROJECT_NAME}\" -sdk \"${TARGET_SDK}\" -configuration Release\
#Check if build succeeded\
if [ $? != 0 ]\
then\
exit 1\
fi\
/usr/bin/xcrun -sdk iphoneos PackageApplication -v \"${PROJECT_BUILDDIR}/${APPLICATION_NAME}.app\" -o \"${BUILD_HISTORY_DIR}/${APPLICATION_NAME}.ipa\" --sign \"${DEVELOPPER_NAME}\" --embed \"${PROVISONNING_PROFILE}\""; 
```

# asp.net-mvc - Mvc4 - 部署的应用程序在 chrome 上运行良好，但在 IE 9 上是空白页？

> ID：14978429
> 
> 赞同：0
> 
> 时间：2013-02-20T11:12:25.390
> 
> 标签：asp.net-mvc, internet-explorer, iis, asp.net-mvc-4

我在 Web 服务器上部署了我的 Intranet mvc4 应用程序。它在谷歌浏览器上运行良好，但在 IE9 上，应用程序出现一秒钟，然后我看到的只是一个空白页面。但是，如果我使用“F12 工具”，我可以看到所有数据都在那里。我在我的应用程序中使用了来自 Twitter 的 MVC4、Jquery UI、Bootstrap。任何帮助将不胜感激 ？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-29T10:11:44.280

出于某些完全未知的原因（对我而言..），Microsoft 已决定 IE7 是 Intranet 站点的事实标准。

**当 IE8、IE9 和 IE10 检测到/认为站点位于Intranet**上时，它们都会退回到兼容模式（IE7 模式）。

您可以通过告诉您的网站（服务器）告诉您的浏览器使用哪种模式来解决此问题。通过将以下内容添加到 _layout.cshtml 的部分来执行此操作：

```
<meta http-equiv="X-UA-Compatible" content="IE=9"> 
```

或者

```
<meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
```

IE=9 / IE=8 强制使用特定版本，IE=Edge 强制使用最新的 IE（即您拥有的浏览器版本）。在我的情况下，我使用 IE9，因为我针对 IE9 开发并针对 IE9 进行了测试，IE10 中的任何细微更改都不会破坏站点，因为 IE10 将以 IE9 模式打开。

编辑：这里有*更多*信息：[stackoverflow/6771258](https://stackoverflow.com/questions/6771258/whats-the-difference-if-meta-http-equiv-x-ua-compatible-content-ie-edge)

# javascript - 我无法检查未定义中的评估变量是否

> ID：14978430
> 
> 赞同：1
> 
> 时间：2013-02-20T11:12:24.573
> 
> 标签：javascript, eval

我有以下代码，我想在其中评估连接，然后检查它是否已定义，

```
var image1="images/pic1.png";
var image2="images/pic2.png";
var image3="images/pic3.png";
var image4="images/pic4.png";
/*
var image5="";
var image6="";
var image7="";
var image8="";
var image9="";
var image10="";
var image11="";
var image12="";
*/

var imageLink;
var count=12;

for (i=0;i<count;i++){

    var imageLink=eval("image"+(i+1));

    if (typeof imageLink === "undefined"){
        alert("imageLink is undefined");
        imageLink="";
    } 
```

所以最后一块是行不通的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:19:39.960

```
var images = [];

images.push( 'images/pic1.png' );
images.push( 'images/pic2.png' );
images.push( 'images/pic3.png' );
images.push( 'images/pic4.png' );

var imageLink = '';

for ( i=0; i<images.length; i++ ){

    imageLink = images[ i ];

    if ( !imageLink ){
       alert( 'imageLink is undefined' );
       imageLink = '';
    }
} 
```

按照评论中的建议，将数据放在一个数组中，然后循环遍历 for 上的每个元素，这样您的代码就会变得更简洁，并且您不必进行 eval。

# oracle - 如何在异常处理块中重新引发 pl/sql 异常？

> ID：14978431
> 
> 赞同：21
> 
> 时间：2013-02-20T11:12:31.310
> 
> 标签：oracle, exception-handling, plsql

我有一些应用程序使用的以下过程：

```
procedure p1
is
begin
  bla bla bla;  
end; 
```

但是没有异常处理块。所以应用程序是根据这个特性编写的。

现在我需要在 p1 中记录错误。但它不应影响使用此过程的应用程序。

像这样的东西：

```
procedure p1
is
begin
  bla bla bla;

  exception when others then
    log_error(sqlcode, sqlerrm);
    raise_new_exception (sqlcode, sqlerrm);
end; 
```

在**raise_application_error**的情况下，第一个参数应该在 [-20000, -20999] 范围内。因此，如果出现异常 no_data_found，则不会引发此错误。

在**exception_init**的情况下，第二个参数不应该是可变的。它必须是数字文字。

PS：作为临时解决方案，我使用的是**立即执行**

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-20T11:24:26.410

如果您的错误保持不变，请更改为

```
...
exception when others then
  log_error(sqlcode, sqlerrm);
  raise;
end;
/ 
```

这[在文档中进行了](https://docs.oracle.com/cd/E18283_01/appdev.112/e17126/errors.htm#i3359)解释。

# iphone - Objective c - UIActivityViewController 方向模式

> ID：14978432
> 
> 赞同：3
> 
> 时间：2013-02-20T11:12:32.247
> 
> 标签：iphone, ios, objective-c, uiinterfaceorientation, uiactivityviewcontroller

我的 iPhone 应用程序设计为仅支持纵向，除了一个显示照片的视图控制器，还支持横向模式。

所以总的来说我的项目支持所有的方向，但是每个视图控制器（除了照片视图控制器）都实现了这个方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

**问题：**

在我的一个（仅纵向）视图控制器中，我`UIActivityViewController`用来让用户选择通过电子邮件或 SMS 共享内容。

当用户选择电子邮件选项时，它会自动显示 ios 本机电子邮件视图控制器。

如果用户现在将设备的方向更改为横向，电子邮件视图控制器也会更改为横向，现在如果用户点击取消/发送按钮，电子邮件控制器将被关闭，现在我的所有应用程序都是横向的！

有没有办法强制 eamil 视图控制器仅处于纵向模式？

我知道我可以创建自己的电子邮件视图控制器和子类`UIActivity`来显示它，但是`UIActivityViewController`在呈现时不会显示默认的电子邮件图标，我真的很喜欢它来显示它，而不是我的其他（必须是灰色）图标会提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-29T21:44:10.763

您应该制作另一个 uinavigationcontroller 并从那里呈现 uiactivityviewcontroller。在这段代码中，_image 是一个你想分享的 UIImage。BlankViewController 只是您可以在 IB 中创建的占位符视图控制器，您还可以将其视图的背景颜色清除并执行您想做的任何外观更改。

```
__weak  CurrentViewController  *weakSelf    =   self  ;

UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:@[_image] applicationActivities:nil]   ;
UIViewController        *viewC  =   [[UIViewController alloc] initWithNibName:@"BlankViewController" bundle:nil] ;
UINavigationController  *navC   =   [[UINavigationController alloc] initWithRootViewController:viewC]  ;
activityViewController.completionHandler = ^(NSString *activityType, BOOL completed)
{
    [weakSelf dismissViewControllerAnimated:NO completion: ^ {
        ;    // Your completion handler
    }]  ;
};
[self presentViewController:navC animated:NO completion: ^ {
    [navC presentViewController:activityViewController animated:YES completion: ^ {
        ;
    }]  ;
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:24:59.910

我目前正在开发的应用程序中遇到了类似的问题。我最终覆盖了更多的旋转方法，以确保我自己的视图控制器保持纵向。

这对我有用（IOS5+）：

```
- (BOOL) shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationPortrait;
}

- (BOOL)shouldAutorotateToInterfaceOrientation (UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

如果您是 ios5 之前的版本或者这对您不起作用，请查看：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

希望你让它工作。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:20:08.577

也许你应该试试

```
- (void)viewWillAppear:(BOOL)animated
{
   [self shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationLandscapeRight];
   [super viewWillAppear:animated];
} 
```

在你看来？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T13:03:55.697

找不到解决这个问题的方法，所以我最终实现了自己的电子邮件 UIActivity 子类......

# python - Python urllib3 和代理

> ID：14978434
> 
> 赞同：4
> 
> 时间：2013-02-20T11:12:38.480
> 
> 标签：python, multithreading, url, proxy, urllib

我想弄清楚如何使用代理和多线程。

此代码有效：

```
requester = urllib3.PoolManager(maxsize = 10, headers = self.headers)
thread_pool = workerpool.WorkerPool()

thread_pool.map(grab_wrapper, [item['link'] for item in products])

thread_pool.shutdown()
thread_pool.wait() 
```

然后在`grab_wrapper`

```
requested_page = requester.request('GET', url, assert_same_host = False, headers = self.headers) 
```

标头包括：Accept、Accept-Charset、Accept-Encoding、Accept-Language 和 User-Agent

但这在生产中不起作用，因为它必须通过代理，不需要授权。

我尝试了不同的东西（传递`proxies`给请求，在标头中等）。唯一有效的是：

```
requester = urllib3.proxy_from_url(self._PROXY_URL, maxsize = 7, headers = self.headers)
thread_pool = workerpool.WorkerPool(size = 10)

thread_pool.map(grab_wrapper, [item['link'] for item in products])

thread_pool.shutdown()
thread_pool.wait() 
```

现在，当我运行程序时，它将发出 10 个请求（10 个线程），然后……停止。没有错误，没有任何警告。这是我可以绕过代理的唯一方法，但它似乎无法同时`proxy_from_url`使用`WorkerPool`。

任何想法如何将这两者结合成一个工作代码？由于时间限制，我宁愿避免将其重写为scrapy等

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:32:57.690

首先，我建议避免像瘟疫一样使用 urllib，而是使用请求，它对代理的支持非常简单：http: [//docs.python-requests.org/en/latest/user/advanced/#proxies](http://docs.python-requests.org/en/latest/user/advanced/#proxies)
接下来，我没有将它与多线程一起使用，但与多处理一起使用并且效果非常好，你唯一需要弄清楚的是你是否有一个动态队列或一个相当固定的列表，你可以分布在工作人员身上，后者的示例将 url 列表均匀地分布在 x 个进程上：

```
# *** prepare multi processing
nr_processes = 4
chunksize = int(math.ceil(total_nr_urls / float(nr_processes)))
procs = []
# *** start up processes
for i in range(nr_processes):
    start_row = chunksize * i
    end_row = min(chunksize * (i + 1), total_nr_store)
    p = multiprocessing.Process(
            target=url_loop,
            args=(start_row, end_row, str(i), job_id_input))
    procs.append(p)
    p.start()
# *** Wait for all worker processes to finish
for p in procs:
    p.join() 
```

每个 url_loop 进程都会将自己的数据集写入数据库中的表中，因此我不必担心在 python 中将它们连接在一起。

编辑：关于在进程之间共享数据 -> 有关详细信息，请参阅：[http ://docs.python.org/2/library/multiprocessing.html?highlight=multiprocessing#multiprocessing](http://docs.python.org/2/library/multiprocessing.html?highlight=multiprocessing#multiprocessing)

```
from multiprocessing import Process, Value, Array

def f(n, a):
    n.value = 3.1415927
    for i in range(len(a)):
        a[i] = -a[i]

if __name__ == '__main__':
    num = Value('d', 0.0)
    arr = Array('i', range(10))

    p = Process(target=f, args=(num, arr))
    p.start()
    p.join()

    print num.value
    print arr[:] 
```

但正如您所看到的，基本上这些特殊类型（值和数组）可以在进程之间共享数据。如果您改为寻找队列来执行类似循环的过程，则可以使用 JoinableQueue。希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T17:40:39.710

看来您正在丢弃调用`thread_pool.map()` Try 将其分配给变量的结果：

```
requester = urllib3.proxy_from_url(PROXY, maxsize=7)
thread_pool = workerpool.WorkerPool(size=10)

def grab_wrapper(url):
    return requester.request('GET', url)

results = thread_pool.map(grab_wrapper, LINKS)

thread_pool.shutdown()
thread_pool.wait() 
```

注意：如果您使用的是 python 3.2 或更高版本，则可以使用`concurrent.futures.ThreadPoolExecutor`. 它的引用类似于`workerpool`但包含在标准库中。

# d3.js - 在表 d3.js 中显示气泡图每一圈的数据

> ID：14978435
> 
> 赞同：0
> 
> 时间：2013-02-20T11:12:38.313
> 
> 标签：d3.js

我制作了一个气泡图并且工作正常。但我需要甚至基于功能，在该功能中我单击每个圆圈，与该圆圈相关的数据将以表格形式显示在另一个 div 中。

```
<div id="bubblechart"></div>
<div id="table"></div> 
```

第一个 div 包含气泡图并且工作正常。table div 用作生成表的容器。

这是我的代码。

```
var node = svg.selectAll(".node")
                  .data(bubble.nodes(classes(root))
                  .filter(function(d) { return !d.children; }))
                  .enter().append("g")
                  .attr("class", "node")
                  .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });
node.append("circle")
                  .attr("r", function(d) { return d.r; })
                  .style("fill", function(d) { return color(d.packageName); })
                  .on("mouseover", animateFirstStep)
                  .on("mouseout", animateSecondStep);
node.append("text")
                  .attr("dy", ".3em")
                  .style("text-anchor", "middle")
                  .text(function(d) { return d.className; }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:43:44.297

您可以将 .on("click", clickFunction) 添加到节点。这将像您的 mouseover 和 mouseout 线一样工作。

在 clickFunction 函数中，使用控制目标 div 的内容

```
document.getElementById('targetDiv').innerHTML = targetText; 
```

或使用 jQuery

```
$("#targetDiv").html(targetText); 
```

# java - JavaCC 词法分析器无法按预期工作（不忽略空格）

> ID：14978444
> 
> 赞同：1
> 
> 时间：2013-02-20T11:13:11.160
> 
> 标签：java, parsing, javacc

我正在尝试为下面列出的示例文件实现解析器。我想将`'+'`它们之间的带引号的字符串识别为单个标记。所以我创建了一个 jj 文件，但它不匹配这样的字符串。我的印象是 JavaCC 应该匹配每个令牌规范的最长匹配。但这对我来说似乎不是这样。

我在这里做错了什么？为什么我的`<STRING>`令牌不匹配，`'+'`即使它在那里指定？为什么空白不被忽略？

```
options {
  TOKEN_FACTORY = "Token";
}

PARSER_BEGIN(Parser)

package com.example.parser;

public class Parser {

  public static void main(String args[]) throws ParseException {

      ParserTokenManager manager = new ParserTokenManager(new SimpleCharStream(Parser.class.getResourceAsStream("example")));
      Token token = manager.getNextToken();
      while (token != null && token.kind != ParserConstants.EOF) {
          System.out.println(token.toString() + "[" + token.kind + "]");
          token = manager.getNextToken();
      }

      Parser parser = new Parser(Parser.class.getResourceAsStream("example"));
      parser.start();
  }

}

PARSER_END(Parser)

// WHITE SPACE
<DEFAULT, IN_STRING_KEYWORD>
SKIP :
{
  " " // <-- skipping spaces
| "\t"
| "\n"
| "\r"
| "\f"
}

// TOKENS
TOKEN :
{
< KEYWORD1 : "keyword1" > : IN_STRING_KEYWORD
}

<IN_STRING_KEYWORD>
TOKEN : {<STRING : <CONCAT_STRING> | <UNQUOTED_STRING> > : DEFAULT 
| <#CONCAT_STRING : <QUOTED_STRING> ("+" <QUOTED_STRING>)+ >
// <-- CONCAT_STRING never matches   "+" part when input is "'smth' +", because whitespace is not ignored!?
| <#QUOTED_STRING : <SINGLEQUOTED_STRING> | <DOUBLEQUOTED_STRING> >
| <#SINGLEQUOTED_STRING : "'" (~["'"])* "'" >
| <#DOUBLEQUOTED_STRING : 
    "\""
      (
        (~["\"", "\\"]) |
        ("\\" ["n", "t", "\"", "\\"])
      )* 
    "\""
  >
| <#UNQUOTED_STRING : (~[" ","\t", ";", "{", "}", "/", "*", "'", "\"", "\n", "\r"] | "/" ~["/", "*"] | "*" ~["/"])+ >
}

void start() :
{}
{
  (<KEYWORD1><STRING>";")+ <EOF>
} 
```

这是一个应该被解析的示例文件：

```
keyword1 "foo" + ' bar'; 
```

我想将第一个参数匹配`keyword1`为单个`<STRING>`标记。

电流输出：

```
keyword1[6]
Exception in thread "main" com.example.parser.TokenMgrError: Lexical error at line 1, column 15\.  Encountered: " " (32), after : "\"foo\""
    at com.example.parser.ParserTokenManager.getNextToken(ParserTokenManager.java:616)
    at com.example.parser.Parser.main(Parser.java:12) 
```

我正在使用 JavaCC 5.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T15:26:39.147

`STRING`正在扩展到可以匹配的最长序列，`"foo"`如错误所示。右双引号后的空格不是私有令牌定义的一部分`CONCAT_STRING`。跳过标记不适用于其他标记的定义，因此您必须将空格直接合并到定义中，位于`+`.

顺便说一句，我建议有一个像这样的最终令牌定义：

```
<each-state-in-which-the-empty-string-cannot-be-recognized>
TOKEN : {
    < ILLEGAL : ~[] >
} 
```

这可以防止`TokenMgrError`s 被抛出并使调试更容易一些。

# c# - 如何使用我机器的 IPAddress 在 C:\inetpub\wwwroot\ 上创建一个文件夹？

> ID：14978446
> 
> 赞同：-1
> 
> 时间：2013-02-20T11:13:15.583
> 
> 标签：c#

如何使用我机器的 IPAddress 在 C:\inetpub\wwwroot\ 上创建一个文件夹？ff 代码似乎对我不起作用。它给出错误：不支持给定路径的格式。

```
 `     string appPath = Request.PhysicalApplicationPath;
                string IPAddress = HttpContext.Current.Request.UserHostAddress;

                Directory.CreateDirectory(appPath + "//GM_KanbanTracking/" + IPAddress); error     here The given path's format is not supported.
                StreamWriter w;
                w = File.CreateText(appPath + "//GM_KanbanTracking/" + IPAddress +     "/test.txt");
                w.WriteLine(fileContents.ToString());
                w.Flush();
                w.Close(); 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:18:00.533

虽然您可能有一个常规 IPv4 地址（例如 192.168.1.1），但在这种情况下，主机地址可能是一个 IPv6 地址，如下所示：`2001:0:9d38:953c:cad:20fd:3f57:fa08`. `:`由于文件名中不允许使用冒号 ( )，因此您必须将它们更改为其他名称，如下所示：

```
string IPAddress = HttpContext.Current.Request.UserHostAddress.Replace(":", "_"); 
```

这会将我的 IP 地址转换`2001_0_9d38_953c_cad_20fd_3f57_fa08`为有效的文件名。

如果您有 IPv4 地址，则问题在于路径规范的其余部分。不仅冒号是无效字符，斜线 ( `/`) 也是如此。您的示例代码显示斜杠必须是反斜杠才能工作。

# javascript - jquery ajax回调不起作用

> ID：14978449
> 
> 赞同：0
> 
> 时间：2013-02-20T11:13:21.193
> 
> 标签：javascript, spring, jquery, callback

我想通过ajax调用获得一个值，这就是我所做的，

```
<input type="text" id="CIMtrek_CI_CER" name="CIMtrek_CI_CER" onblur="getProjectInfo()"/> 
```

这就是我的剧本，

```
function getProjectInfo(){
    var cerNo = document.getElementById('CIMtrek_CI_CER').value;
     $.ajax({
         type: "POST",
         url: "CIMtrek_Project_Information",
         data: {
             cerNo: cerNo
         },
         success: function (msg) {
             alert("msg : "+msg);
             document.getElementById('div_CIMtrek_CI_Used_By_ProjNo').innerHTML=msg;
         }
     });
} 
```

这就是我的弹簧方法：

```
 @RequestMapping(value = "/CIMtrek_Project_Information", method = RequestMethod.POST)
    public String getProjectInfotmation(@RequestParam("cerNo") String cerNo,HttpServletRequest request,HttpServletResponse response) throws Exception {
        System.out.println("cerNo : "+cerNo);

        return cerNo;
    } 
```

controll 转到此方法并打印该值，但它不会在我分配该值的回调中复制。

```
success: function (msg) {
                 alert("msg : "+msg);
                 document.getElementById('div_CIMtrek_CI_Used_By_ProjNo').innerHTML=msg;
             } 
```

当我使用萤火虫时，响应是`HTTP Status 404 - /ProjectCapexMonitoring/WEB-INF/views/81723.jsp`

`81723`是添加了我使用此输入提供的输入`.jsp`并给出了此异常。

请帮助我解决问题和解决方案。

最好的祝福。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:23:49.840

如果您期待 json 响应并且在您的类路径中有 jackson jars

添加`@ResponseBody`到您的方法中

改变

```
@RequestMapping(value = "/CIMtrek_Project_Information", method = RequestMethod.POST)
public String getProjectInfotmation(@RequestParam("cerNo") String cerNo,HttpServletRequest request,HttpServletResponse response) throws Exception {
    System.out.println("cerNo : "+cerNo);

    return cerNo;
} 
```

到

```
@RequestMapping(value = "/CIMtrek_Project_Information", method = RequestMethod.POST)
public @ResponseBody String getProjectInfotmation(@RequestParam("cerNo") String cerNo,HttpServletRequest request,HttpServletResponse response) throws Exception {
    System.out.println("cerNo : "+cerNo);

    return cerNo;
} 
```

# php - 删除带有 .htaccess 子域的 .php 扩展名？

> ID：14978451
> 
> 赞同：2
> 
> 时间：2013-02-20T11:13:27.667
> 
> 标签：php, .htaccess, url-rewriting

我不是 url-rewrites 方面的专家。

我的域名是`helloboy`.

我的子域是`www`和`labs`。

我想仅删除**子域****和**目录的**.php 扩展名**？ **`labs` **`graph`****

 ****来自： http: [//labs.helloboy.com/graph/load/show.php](http://labs.helloboy.com/graph/load/show.php)

至： http: [//labs.helloboy.com/graph/load/show/](http://labs.helloboy.com/graph/load/show/)

我怎样才能做到这一点？

**这是我的代码`.htaccess`：**

```
 RewriteEngine on
 RewriteBase /
 RewriteCond %{HTTP_HOST} ^labs\.helloboy\.com$ /$1.php -f
 RewriteRule ^(graph/load/.*?)/?$ $1.php [L,NC] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:43:20.913

我建议您在图形下创建一个文件（或者实际上任何地方，这取决于您），例如`graph/index.php`，它将处理图形重写请求。然后，您将`show.php`（以及您想要重定向的其他文件）移动到适合处理内容的不同文件夹，例如在`graph/lib`.

现在假设[http://labs.helloboy.com/graph/](http://labs.helloboy.com/graph/)之后的所有内容都是“不存在的”，您只需根据路径处理请求（如*[http://labs.helloboy.com/graph/load/show](http://labs.helloboy.com/graph/load/show)*）。

虚构的文件结构是这样的：

```
root (in your case it would prolly be www/labs)
-- .htaccess
-- graph
   -- index.php (handles rewrites, can be anywhere you want but it must be reflected in the .htacces file)
   -- lib (location to store the existing files, can be anywhere you want)
      -- show.php
      -- delete.php
      -- ..etc 
```

首先，让我们在 .htaccess 中添加将处理请求并执行 .php 重定向的规则：

## .htaccess

```
RewriteEngine on

# Make sure index.php requests are NOT rewritten, otherwise we'll end up in an endless loop.
RewriteCond %{HTTP_HOST} ^labs\.helloboy\.com$
RewriteCond %{REQUEST_URI} ^graph/index\.php$
RewriteRule .* - [L,NC,QSA]

# Redirect all .php files and remove the extension
RewriteCond %{HTTP_HOST} ^labs\.helloboy\.com$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(graph/.+)\.php$ $1 [R,NC,QSA]

# Make sure that we won't match existing files or directories, otherwise the lib files will fail. Get the path after "graph/" and add it as a path argument to "graph/index.php".
RewriteCond %{HTTP_HOST} ^labs\.helloboy\.com$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^graph/(.*) graph/index.php?path=$1 [L,NC,QSA] 
```

然后我们需要处理发送给我们的处理程序的路径参数，以便我们可以用它做一些有用的事情。注意 DEBUG 注释，它们下面的调用会创建输出，我稍后会展示。

## 图/index.php

```
<?php

// NOTE: Consider returning a 404 status code with the header and possibly a redirect if you can't process the paths sanely.

//======
// DEBUG
//======

?><pre><?php var_export( $_GET ) ?></pre><?php

$path = isset( $_GET['path'] ) ? $_GET['path'] : '';

if ( $path ) {
    // Split the path into parts. For example load/show/ becomes an array with two elements: ['load', 'show']
    $paths = array_filter( explode( '/', $path ) );

    //======
    // DEBUG
    //======

    ?><pre><?php var_export( $paths ) ?></pre><?php

    $len = count( $paths );

    if ( $paths ) {
            // If we have any path we attempt to process it

        if ( $paths[0] === 'load' ) {

            // Do something if load

            if ( $len > 1 ) {
                $action = $paths[1];

                switch ( $action ) {
                    case 'show':
                        $file = dirname( __FILE__ ) . DIRECTORY_SEPARATOR . 'lib' . DIRECTORY_SEPARATOR . "$action.php";

                        //======
                        // DEBUG
                        //======

                        var_dump( $file ) ;

                        if ( file_exists( $file ) ) 
                            require_once $file;
                    break;
                }
            }
        }
    }
}

?> 
```

对于路径[http://labs.helloboy.com/graph/load/show/](http://labs.helloboy.com/graph/load/show/)，脚本将输出以下内容：

```
// This is the contents of the supervariabel $_GET
array (
  'path' => 'load/show/',
)

// This is the path parts after splitting and filtering of the path argument
array (
  0 => 'load',
  1 => 'show',
)

// Here we illustrate that we can include/process any file we wish based on the path contents
string '/your/server/path/graph/lib/show.php' (length=xx) 
```

如果您需要进一步简化以理解此建议性解决方案，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:48:07.630

也许这会有所帮助：

```
RewriteCond %{HTTP_HOST}  labs.helloboy.com$ 
RewriteRule ^graph/(.*)/?$ graph/$1.php [L,NC] 
```****

# c# - JavaScript 函数阻止 C# 函数被执行？

> ID：14978454
> 
> 赞同：1
> 
> 时间：2013-02-20T11:13:34.557
> 
> 标签：c#, javascript, asp.net

在我的 aspx 页面上，我有两个按钮。一个调用一些 javascript，另一个调用代码页上的 C# 函数。当我在文档头部调用 javascript 文件时，JavaScript 函数运行良好，但 C# 却不行。单击按钮不会执行任何操作。如果我删除了 javascript 调用，那么 C# 函数可以正常工作。

我该如何克服呢？似乎它期望在 JavaScript 文件中找到 C# 函数。

ASP：

```
<head>
<script src="MyFunctions.js" language="javascript" type="text/javascript"></script>
</head>
<body>
<asp:Button id="btn1" Text="Submit" runat="server" OnClick="buttonSumbit_Click" />
<asp:Button id="btn2" Text="Show" runat="server" OnClientClick="buttonShow_Click()" />
</body> 
```

C＃：

```
protected void buttonSumbit_Click(object sender, EventArgs e)
{
//SOME CODE HERE
} 
```

JavaScript：

```
function buttonShow_Click()
{
//SOME CODE HERE
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:18:31.407

您需要将所有 Asp.Net 服务器控件放在`<form runat="server"></form>`标签内

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:34:16.753

你需要修改你的javascript函数调用是这样的

```
<asp:Button id="btn2" Text="Show" runat="server" OnClientClick="return buttonShow_Click()" /> 
```

并确保您的 javascript 函数返回 true 以便回发（执行 C# 函数）发生。如果您的 javascript 函数返回 false，则不会回发到服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:23:11.493

我建议您使用它来调用 javascript 函数：

```
OnClientClick="if(!hidepopup())return false;" 
```

您还可以从代码隐藏中调用 javascript 函数：

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "Call my function", "jsfunction();", true); 
```

# iphone - 在视图控制器中使用多个表视图时使用委托方法

> ID：14978455
> 
> 赞同：1
> 
> 时间：2013-02-20T11:13:39.013
> 
> 标签：iphone, ios, objective-c, uitableview

在我的应用程序中，我想在单个`ViewController`. 问题是如何`UITableViewDelegate`单独使用方法。例如; 我可以通过标记`cellForRowAtIndexPath`为每个单独使用方法。`UITableView`但是，我不知道对每个 tableview 不同地使用`numberOfRowsInSection`or`numberOfSectionsInTableView`方法。是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T11:20:47.100

对于数据源和委托方法中具有条件的所有表，仅使用一种数据源和委托方法。

```
 - (NSInteger)numberOfRowsInSection:(NSInteger)section;
      {
     return 1;
     }
  - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:  (NSInteger)section;
   {
if (tableView==tabl1) {
        return [arr1 count];
}
if (tableView==tabl2) {
        return [arr2 count];

}
if (tableView==tabl3) {
        return [arr3 count];
}
return 0;

   }

  - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
 {
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell==nil) {
    cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier ];
    cell.selectionStyle=UITableViewCellSelectionStyleNone;
    cell.backgroundColor=[UIColor clearColor];
}
if (tableView==tabl1) {
    cell.textLabel.text = [arr1 objectAtIndex:indexPath.row];
}
if (tableView==tabl2) {
    cell.textLabel.text = [arr2 objectAtIndex:indexPath.row];
}
if (tableView==tabl3) {
    cell.textLabel.text = [arr3 objectAtIndex:indexPath.row];
}
return cell;
      } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T11:21:36.747

**在YourViewController.h**中创建3 个`UITableView`变量：

 **```
YourViewController : UIViewController
{
    UITableView* tableView1;
    UITableView* tableView2;
    UITableView* tableView3;
} 
```

**你的视图控制器.m：**

```
-(NSInteger)tableView:(UITableView*)tableView numberOfRowsInSection:(NSInteger)section
{

    if (tableView == tableView1)
    {
        //Your code
    }
    if (tableView == tableView2)
    {
        //Your code
    }
    if (tableView == tableView3)
    {
        //Your code
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T11:18:11.620

您不应该使用单独的委托方法。相反，在每个委托方法中`cellForRowAtIndexPath`，您应该将您的表标识为

```
if(tableview == TableView1) 
{ 

}
else if(tableview == TableView2)
{

}
else
{

} 
```

等等 。这是正确的方法，因为您操作的任何表都将具有通用的委托方法，然后您只需要指定表的名称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T11:18:44.907

当然：

所有 tableview 委托函数都将 tableView 作为第一个参数，因此您所要做的就是跟踪三个表视图，并在每个委托函数中检查委托调用是针对哪个表视图：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if(tableView == firstTableView) {
    ...
    }
    else if (tableView == secondTableView) {
    ...
    }
    else if (tableView == thirdTableView) {
    ...
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-20T11:29:28.113

您还可以创建三个表格视图控制器类（以防每个表格视图在其单元格显示逻辑中涉及一些复杂性）。将它们添加为`[self addChildViewController:(Your Controller Class)`，然后添加下一行`[self.view addSubview:(Your Controller Class' view)]`，并将视图调整为您要设置的框架。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-20T12:01:57.113

请参阅本教程可能对您有所帮助 [http://www.edumobile.org/iphone/ipad-development/a-tableview-based-menu-for-ipad/](http://www.edumobile.org/iphone/ipad-development/a-tableview-based-menu-for-ipad/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-20T11:19:19.263

在所有委托和数据源方法中，第一个参数是对 tableview 对象的引用。所以你总是可以区分你的tableviews。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-20T11:29:15.083

在`ViewController.h`

```
{
    NSArray *arr1;
    NSArray *arr2;
    NSArray *arr3;
}
@property (nonatomic, retain) IBOutlet UITableView *tbl1;
@property (nonatomic, retain) IBOutlet UITableView *tbl2;
@property (nonatomic, retain) IBOutlet UITableView *tbl3; 
```

不要忘记将此属性与`XIB's`UITableView 实例连接起来。

在`ViewController.m`

```
@synthesize tbl1, tbl2, tbl3;

- (NSInteger)tableView:(UITableView *)tableView 
 numberOfRowsInSection:(NSInteger)section {
    if (tableView == tbl1)
        return [arr1 count];
    if (tableView == tbl2)
        return [arr2 count];
    if (tableView == tbl3)
        return [arr3 count];
    return 0;
} 
```

我希望我对你有所帮助。**

# c++ - 我可以使用 C++ 在 EXE 文件中找到资源的偏移量吗？

> ID：14978456
> 
> 赞同：0
> 
> 时间：2013-02-20T11:13:43.710
> 
> 标签：c++, winapi, exe

我正在编写一个自定义模块来检查 EXE 文件的一致性（这不是这个问题的一部分。）为此，我需要知道 EXE 文件中某个资源的偏移量来计算 EXE 文件正文的大小我需要检查。

我想出了以下代码来获取文件中`IDR_HTML_DLG`资源的偏移量`strExeFilePath`：

```
int ncbOffsetInBytes = 0;
HMODULE hModule = LoadLibrary(strExeFilePath);
if(hModule)
{
    HRSRC hRes = ::FindResource(hModule, MAKEINTRESOURCE(IDR_HTML_DLG), RT_HTML);
    if(hRes)
    {
        long szLength = ::SizeofResource(hModule, hRes);
        HGLOBAL hGlobal = ::LoadResource(hModule, hRes);
        if(szLength && hGlobal)
        {
            BYTE* pData = (BYTE*)LockResource(hGlobal);
            DWORD dwLast = (DWORD)(pData + szLength);
            DWORD dwFirst = (DWORD)hModule;

            ncbOffsetInBytes = dwLast - dwFirst;
        }
    }

    ::FreeLibrary(hModule);
    hModule = NULL;
} 
```

但结果`ncbOffsetInBytes`却比 EXE 文件本身大。知道如何纠正它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:52:14.593

正如@rodrigo 指出的那样，当一个PE文件被加载到内存中时，每个相关部分都将被加载到不同的内存部分中，每个部分之间都有填充，部分的偏移量以及模块本身的大小将与磁盘上的 PE 文件不同。这里有一些关于它是如何工作的[信息](http://msdn.microsoft.com/en-us/magazine/cc301805.aspx)。

正如我所看到的，有两种方法可以做你想做的事情。你要么需要考虑内存中 PE 的大小，并以此为基础进行计算——我相信`SizeOfImage`成员[`IMAGE_OPTIONAL_HEADER`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680339%28v=vs.85%29.aspx)给出了图像大小加载到内存中。另一种选择是继续使用磁盘上 PE 文件的大小，在这种情况下，您可以将 PE 文件作为数据文件加载到内存中（而不是使用`LoadLibrary`），然后从那里开始工作。在这种情况下，如果您需要从文件中检索资源的偏移量等，您可能需要手动解析和抓取 PE 文件结构 - 这里有一个很好的[参考资料](http://msdn.microsoft.com/en-us/magazine/ms809762.aspx)。

# php - 警告：stream_socket_enable_crypto()：此流不支持第 197 行 C:\xampp\htdocs\12work\class.smtp.php 中的 SSL/加密

> ID：14978459
> 
> 赞同：14
> 
> 时间：2013-02-20T11:13:51.007
> 
> 标签：php

我正在使用 XAMPP，当尝试通过它发送电子邮件时，`localhost`我收到以下警告：

> **警告：：** `stream_socket_enable_crypto()`此流不支持`C:\xampp\htdocs\12work\class.smtp.php`第 197 行的 SSL/加密

这是我的代码：

```
$mail = new PHPMailer();

$mail->IsSMTP(); // set mailer to use SMTP

$mail->Host = "smtp.gmail.com"; // specify main and backup server

$mail->SMTPAuth = true;
$mail->Port = 25;

$mail->SMTPSecure = "tls";

$mail->SMTPAuth = true; // turn on SMTP authentication

$mail->Username = "sheikh.abm@gmail.com"; // SMTP username

$mail->Password = "mypassword"; // SMTP password

$mail->From = "sheikh.abm@gmail.com"; //do NOT fake header.

$mail->FromName = "MailMan";

$mail->AddAddress("sheikh.abm@gmail.com"); // Email on which you want to send mail

$mail->IsHTML(true);

$mail->Subject = "Just a Test";

$mail->Body = "Hello. I am testing <b>PHP Mailer.</b>";

if(!$mail->Send())

{

echo $mail->ErrorInfo;

}else{

echo "email was sent";

} 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-20T11:26:30.480

好的，我们需要启用***Open SSL***模块。这是如何做到的：

1.  找到并打开您的`php.ini`文件
2.  搜索行：`;extension=php_openssl.dll`
3.  **`;`**通过删除char启用模块。
4.  保存文件并重新启动 Apache。

* * *

**提示：** 如果您对文件不熟悉，`php.ini`建议修改前创建备份。Ini 是一个配置文件，错误配置或损坏的 ini 会导致 Web 服务器无法启动。

如果您使用 LAMP 堆栈（例如 wamp），则应该可以通过图形界面启用模块。

更多关于`php.ini`：**[https ://secure.php.net/manual/en/configuration.file.php](https://secure.php.net/manual/en/configuration.file.php)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-03-16T16:12:00.503

在我的本地系统中，avast mail shield 打开了，一旦我禁用它，我就不允许通过 smtp gmail 发送任何邮件，邮件是通过 smtp 在本地系统中发送的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-09T21:00:39.730

只是一个简短的说明，
你使用 `$mail->Port = 25;`

```
 $mail->SMTPSecure = "tls"; 
```

gmail /tls 的端口应为 587
请参阅[https://support.google.com/mail/answer/78775?hl=el](https://support.google.com/mail/answer/78775?hl=el)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-27T13:23:15.743

在我的本地系统中，我的计算机上有 avast 防病毒软件，一旦我禁用它，我就不允许通过 SMTP Gmail 发送任何邮件，这些电子邮件是通过 SMTP 在本地系统中发送的

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-07-23T06:45:13.687

我解决了这个

Hust 关闭 selinux

```
 #setenforce 0 
```

# ios - 使用objective-c获取以分贝为单位的声级

> ID：14978462
> 
> 赞同：2
> 
> 时间：2013-02-20T11:14:03.257
> 
> 标签：ios, objective-c, xcode

我是 iOS 世界的新手。我有个疑问 。我想实现 dB SPL 计。我有两个按钮 1\. 播放歌曲 2\. 显示分贝值。当我单击播放歌曲按钮时，它正在播放歌曲。我的问题是在播放声音时，我必须以分贝显示来自 iPhone 的声音值。我在谷歌搜索过。但是我没有任何基本的想法来启动这个应用程序。请给我一个想法来做到这一点。如果我的问题不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:47:21.000

您没有指定用于播放的框架。但假设您使用的是 AVFoundation，您可以使用[AVCaptureAudioChannel](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVCaptureAudioChannel_Class/Reference/Reference.html#//apple_ref/occ/cl/AVCaptureAudioChannel) `averagePowerLevel`或`peakHoldLevel`.

您的问题的相关属性似乎`averagePowerLevel`是（来自文档）：

> 瞬时平均功率电平，以 dB 为单位。（只读）

有关详细信息，请参阅 Apple 的 AVFoundation 编程指南，其中[包含有关音频预览的部分](http://developer.apple.com/library/ios/#DOCUMENTATION/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html#//apple_ref/doc/uid/TP40010188-CH5-SW42)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-31T21:05:43.123

解决您的问题的一个可能方法是将其从对数转换为线性刻度：

```
CGFloar linearScale = powf(10.f, logarithmicScale) * 20.f; 
```

`logarithmicScale`您从 AVFoundation 获得的价值在哪里。线性比例应该更容易可视化！

# django - Django REST：嵌套对象添加创建（POST）而不仅仅是更新（PUT）

> ID：14978464
> 
> 赞同：9
> 
> 时间：2013-02-20T11:14:13.940
> 
> 标签：django, django-rest-framework

使用[Django 休息](http://django-rest-framework.org/)

下面是我的 serializer.py 的方式。

```
class ProfileSerializer(serializers.ModelSerializer):

    class Meta:
        model = Profile
        fields = ('id', 'name', 'active', 'type') 
```

**类型是平面视图**

然后我对其进行了更改，因此像这样为每个配置文件嵌套了“类型”...

```
class TypeSerializer(serializers.ModelSerializer):
    class Meta:
        model = Type
        fields = ('id', 'name', 'active')

class ProfileSerializer(serializers.ModelSerializer):

    type = TypeSerializer()

    class Meta:
        model = Profile
        fields = ('id', 'name', 'active', 'type'') 
```

现在这很完美，但我现在只能在配置文件详细信息中更新“类型”，它现在是只读的。

如何在创建新配置文件时添加类型并仍保留此嵌套视图？

我希望我已经解释清楚了。

**更新：**

好的，我刚读到这个：

> 注意：嵌套序列化程序仅适用于只读表示，因为在某些情况下，如果在更新实例时使用它们会产生模棱两可或不明显的行为。对于读写表示，您应该始终通过使用相关字段子类之一来使用平面表示。

所以这是有道理的。所以我把它改成......

```
type = serializers.PrimaryKeyRelatedField() 
```

这让它回到 POST 并工作，但很遗憾，我不能用 ID 和名称表示“类型”，这样对最终用户更有意义吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-20T11:50:05.320

对可写嵌套序列化程序的完全支持是一项[正在进行](https://github.com/tomchristie/django-rest-framework/issues/395)的工作，但同时一种解决方案是`create`在每种情况下覆盖视图中的方法：

```
class FooListCreateView(ListCreateAPIView):
    model = Foo
    serializer_class = FooSerializer

    def create(self, request, *args, **kwargs):
        data=request.DATA

        f = Foo.objects.create()

        # ... create nested objects from request data ...  

        # ...
        return Response(serializer.data, 
                        status=status.HTTP_201_CREATED,
                        headers=headers) 
```

可能并不理想，但它对我有用，直到出现正确的方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-04T15:36:49.690

我在 django-rest-framework 中遇到了同样的问题，并且我创建了一个视图来快速执行此操作，您可以在以下要点中找到它：[https ://gist.github.com/edulix/5311365](https://gist.github.com/edulix/5311365)

**CRUDManyToManyView**的基本用法如下：

**视图.py**

```
from models import Project
from serializers import TaskSerializer
from lib.crudmanytomanyview import CRUDManyToManyView

class ProjectTasks(CRUDManyToManyView):
    model = Project
    field_name = 'tasks'
    serializer_class = TaskSerializer 
```

**网址.py**

```
from django.conf.urls import patterns, url
import views

urlpatterns = patterns(
'',
    url(r'^projects/(?P<pk>[0-9]+)/tasks/((?P<field_pk>[0-9]+)/)?$',
        views.ProjectTasks.as_view()),
) 
```

**序列化程序.py**

```
from rest_framework import serializers
from models import Task

class TaskSerializer(serializers.ModelSerializer):
    class Meta:
        model = Task
        fields = ('id', 'name') 
```

**模型.py**

```
from django.db import models

class Task(models.Model):
    name = models.CharField(max_length=140, blank=False, null=False)

class Project(models.Model):
    name = models.CharField(max_length=140, blank=False, null=False)
    tasks = models.ManyToManyField(Task, related_name='projects') 
```

然后您可以执行以下操作：

*   **GET projects/12/tasks/**将列出项目任务
*   **POST projects/12/tasks/1/**这会将任务 1 添加到项目 12 任务列表中（任务 1 必须已经存在）
*   **DELETE projects/12/tasks/1/**将从项目 12 任务列表中删除任务 1

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-01T19:04:07.473

现在支持这一点（我使用的是 2.3.6 版，但它可能会更早引入）。您可以像这样在序列化程序中直接使用它：

```
class SongSerializer(serializers.ModelSerializer):
    class Meta:
        model = Song

class AlbumSerializer(serializers.ModelSerializer):
    songs = SongSerializer(many=True)

    class Meta:
        model = Album 
```

希望能帮助到你 ：）

# php - 通过PHP的CSS下拉菜单，逻辑打败了我

> ID：14978468
> 
> 赞同：3
> 
> 时间：2013-02-20T11:14:40.013
> 
> 标签：php, html, arrays, drop-down-menu

今天早上我的大脑似乎不想工作..我有以下数组：

```
private $nav_pages = [['0', 'Home', 'home'],
                      ['0', 'About Us', 'about'],
                      ['0', 'Our Services', 'services'],
                      ['1', 'PROCURE TO PAY (P2P)', 'procure'],
                      ['1', 'ORDER TO CASH (02C)', 'cash'],
                      ['1', 'GENERAL ACCOUNTING', 'general'],
                      ['2', 'Charting of Accounts', 'charting'],
                      ['2', 'General Ledger Maintenance', 'maintenance'],
                      ['2', 'Accounts Receivable Services', 'receivable'],
                      ['2', 'Accounts Payable Services', 'payable'],
                      ['2', 'Reconciliation of Bank Accounts and Credit Cards', 'reconciliation'],
                      ['2', 'Preparing Financial Statements', 'statements'],
                      ['2', 'Payroll Processing', 'payroll'],
                      ['1', 'CLOSING & REPORTING', 'closing'],
                      ['0', 'How It Works', 'how-it-works'],
                      ['0', 'Contact Us','contact'],
                      ['0', 'Careers', 'careers']]; 
```

然后将其馈送到一个 php 页面，该页面旨在布置一个多层纯 css 下拉菜单.. php 页面代码是：

```
<ul class="<?php echo $ul_class; ?>">

<?php $this_layer = 0;

// place array content into variables
foreach ($links as $link) {

    $item_layer  = $link[0];
    $item_string = $link[1];
    $item_link   = $link[2];

    if ($item_layer > $this_layer) { ?>
        <ul>
    <?php $this_layer++; }
    elseif ($item_layer == $this_layer) { ?>
        <li class="<?php echo $item_link; ?>">
            <a class="<?php echo $item_link; ?>"
               href="/<?php echo $item_link; ?>">
                <?php echo $item_string; ?>
            </a>
        </li>
    <?php }
    elseif ($item_layer < $this_layer) { ?>
        </li></ul>
    <?php $this_layer--; } ?>
<?php } ?> 
```

但是，输出不正确，因为上面的代码总是在第二层准备好关闭之前关闭包含第二层的列表项。如果这有意义..

```
<ul class="pages_nav">
<li class="home">
    <a class="home"
       href="/home">
        Home                
    </a>
</li>
<li class="about">
    <a class="about"
       href="/about">
        About Us                
    </a>
</li>
<li class="services">
    <a class="services"
       href="/services">
        Our Services                
    </a>
</li>
<ul>
    <li class="cash">
        <a class="cash"
           href="/cash">
            ORDER TO CASH (02C)                
        </a>
    </li>
    <li class="general">
        <a class="general"
           href="/general">
            GENERAL ACCOUNTING                
        </a>
    </li>
    <ul>
        <li class="maintenance">
            <a class="maintenance"
               href="/maintenance">
                General Ledger Maintenance                
            </a>
        </li>
        <li class="receivable">
            <a class="receivable"
               href="/receivable">
                Accounts Receivable Services                
            </a>
        </li>
        <li class="payable">
            <a class="payable"
               href="/payable">
                Accounts Payable Services                
            </a>
        </li>
        <li class="reconciliation">
            <a class="reconciliation"
               href="/reconciliation">
                Reconciliation of Bank Accounts and Credit Cards                
            </a>
        </li>
        <li class="statements">
            <a class="statements"
               href="/statements">
                Preparing Financial Statements               
            </a>
        </li>
        <li class="payroll">
            <a class="payroll"
               href="/payroll">
                Payroll Processing                
            </a>
        </li>
        </li></ul>
    </li></ul>
<li class="contact">
    <a class="contact"
       href="/contact">
        Contact Us                
    </a>
</li>
<li class="careers">
    <a class="careers"
       href="/careers">
        Careers                
    </a>
</li> 
```

**解决方案：**

```
<ul class="<?php echo $ul_class; ?>">

<?php $this_layer = 0;

// place array content into variables
foreach ($links as $link) {

    $item_layer  = $link[0];
    $item_string = $link[1];
    $item_link   = $link[2];

    // check if link needs to be manipulated
    switch($do) {
        case 'strtolower':
            $item_string = strtolower($item_string);
            break;
        case 'strtoupper':
            $item_string = strtoupper($item_string);
            break;
    } ?>

    <?php if ($item_layer > $this_layer) { ?>
        <ul>
        <li class="<?php echo $item_link; ?>">
            <a class="<?php echo $item_link; ?>"
               href="/<?php echo $item_link; ?>">
                <?php echo $item_string; ?>
            </a>
    <?php $this_layer++; }
    elseif ($item_layer == $this_layer) { ?>
        </li><li class="<?php echo $item_link; ?>">
            <a class="<?php echo $item_link; ?>"
               href="/<?php echo $item_link; ?>">
                <?php echo $item_string; ?>
            </a>
    <?php }
    elseif ($item_layer < $this_layer) { ?>
        </li></ul></li><li class="<?php echo $item_link; ?>">
        <a class="<?php echo $item_link; ?>"
           href="/<?php echo $item_link; ?>">
            <?php echo $item_string; ?>
        </a>
        <?php $this_layer--; } ?>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:22:11.103

不得不稍微修改代码，通常我以树形组织 php 菜单结构，这样更容易解析成 html 菜单，但这里是：

```
<ul class="<?php echo $ul_class; ?>">
<?php 
$this_layer = 0;
$closeit = false;
// place array content into variables
foreach ($nav_pages as $link) {
    $item_layer  = $link[0];
    $item_string = $link[1];
    $item_link   = $link[2];

    if ($item_layer > $this_layer) { 
      // Changing level, dont close the previous li
      ?><ul><?php 
      $closeit = false;
      $this_layer++; 
    }
    if ($item_layer == $this_layer) { 
      // Same level, check if you need to close previous li
      if ($closeit) {
        ?></li><?php
      }
      // Render the li
    ?>
  <li class="<?php echo $item_link; ?>">
    <a class="<?php echo $item_link; ?>"
        href="/<?php echo $item_link; ?>">
      <?php echo $item_string; ?>
    </a>
    <?php 
      // Close it on next loop
      $closeit = true;
    }
    elseif ($item_layer < $this_layer) { 
      // Changing layer back down, close the previous li and the current level ul
      ?>
  </li>
</ul>
    <?php
      $this_layer--; 
    } 
} 
// Finished loop, there should still be a li waiting to be closed
if ($closeit) { 
  ?></li><?php 
}
// Close menu
?>
</ul> 
```

应该可以工作，如果不是，请告诉我

建议的php菜单结构：

```
$menu = array(
    array(
        "url"=>"/place.php",
        "text"=>"Go to place"
    ),
    array(
        "url"=>"/place2.php", // not necessary
        "text"=>"with submenu",
        "children"=>array(
            array(
                "url"=>"/placewithinplace2.php",
                "text"=>"submenu item"
            )
        )
    )
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:38:05.600

永远不要关闭 li 标签，添加东西时关闭它

```
foreach ($links as $link) {
    if ($item_layer > $this_layer) { 
        echo '<ul><li> ......';
        this_layer++; 
    }elseif ($item_layer == $this_layer) {
        echo '</li><li>......';
    }elseif ($item_layer < $this_layer) {
        echo '</li></ul><li>......';
        $this_layer--; 
    }
} 
```

最后，您可能需要`echo '</li></ul>'`在 foreach 之外添加一个以关闭所有内容

# jenkins - 詹金斯条件矩阵

> ID：14978469
> 
> 赞同：6
> 
> 时间：2013-02-20T11:14:40.553
> 
> 标签：jenkins, jenkins-plugins

我需要在具有多个浏览器的多个平台上运行一些 Selenium 测试，但我不知道如何为多配置项目配置矩阵。我想要的是排除 Windows 节点上的 Safari 测试。这是我需要的矩阵：

```
 Firefox Chrome IE  Safari
 Windows (slave)     x       x    x     -
 Mac (slave)         -       -    -     x

 'x'=test, '-'=ignore 
```

对于执行部分，我可以编写一个 python 脚本，它将根据当前操作系统发出正确的命令

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T12:44:24.950

在**Configuration Matrix**类别的作业配置中，有一个复选框**Combination Filter**。在此处添加以下内容：

```
!(label == 'Windows' && browser == 'Safari') 
```

假设*label*和*browser*是您正在使用的变量的正确名称。如果仍有疑问，请按“？” 文本字段的右侧。那里有一个非常好的帮助文本。

# wordpress - 在 WordPress .htaccess 中使用额外的重写规则来阻止 DDOS 攻击

> ID：14978473
> 
> 赞同：0
> 
> 时间：2013-02-20T11:14:51.377
> 
> 标签：wordpress, .htaccess, ddos

我们突然成为 DDOS 攻击的受害者。我们正在尝试使用一些 .htaccess 规则来阻止 affending 参数，使用以下命令向主页上发出的任何帖子请求以及查询字符串开头具有特定字段的任何请求显示 403 禁止页面：

`RewriteEngine On`

`RewriteCond %{QUERY_STRING} ^(ptrxcz|xclzve).* [NC]`

`RewriteRule ^(.*)$ http://%{REMOTE_ADDR} [F,L]`

`RewriteEngine On`

`RewriteCond %{REQUEST_METHOD} POST`

`RewriteCond %{REQUEST_URI} /`

`RewriteRule ^(.*)$ http://%{REMOTE_ADDR} [F,L]`

基本上，只要我在 SSH 中使用 wget 访问带有有问题的查询字符串的文件，但不在浏览器窗口中，这都能正常工作。

此外，Postmaster Google Chrome 插件会阻止对主页的发布请求，但是 curl -d 请求不会被阻止，所以我很难确定哪些工具可以信任，因为它们会给出不同的结果（浏览器、SSH、邮局局长）。

我也在使用带有永久链接的 Wordpress，我想知道这些是否会以某种方式影响这一点，因为这些是 .htaccess 文件中唯一的其他内容。一旦我从 .htaccess 文件中删除了这些，我就会按预期工作。这是我当前规则之后的 Wordpress .htaccess。

`<IfModule mod_rewrite.c>`

`RewriteEngine On`

`RewriteBase /`

`RewriteRule ^index\.php$ - [L]`

`RewriteCond %{REQUEST_FILENAME} !-f`

`RewriteCond %{REQUEST_FILENAME} !-d`

`RewriteRule . /index.php [L]`

`</IfModule>`

此外，如果我更改我的预 Wordpress 规则并删除 [F] 和 REMOTE_ADDR 部分并将其替换为以下内容以将其重定向到不存在的 URL，则此重定向正确，这意味着它可能与 [ F] 和 REMOTE_ADDR 部分。

`RewriteEngine On`

`RewriteCond %{QUERY_STRING} ^(ptrxcz|xclzve).* [NC]`

`RewriteRule ^(.*)$ http://www.pleasegoawayandnevercomebackagain.com [R=301,L]`

`RewriteEngine On`

`RewriteCond %{REQUEST_METHOD} POST`

`RewriteCond %{REQUEST_URI} ^/$`

`RewriteRule ^(.*)$ http://www.pleasegoawayandnevercomebackagain.com [R=301,L]`

除上述外，还有待进一步调查。以下规则有效：

`RewriteEngine On`

`RewriteCond %{QUERY_STRING} !.*test.* [NC]`

`RewriteRule ^(.*)$ http://%{REMOTE_ADDR} [F]`

这里的区别是我正在检查查询字符串值的负匹配。这意味着除了查询字符串中带有 test 的页面外，每个页面都被禁止。您知道为什么否定匹配有效而肯定搜索无效吗？这是语法问题还是与在 htaccess 重写条件中搜索正值有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:27:02.610

一些可能对您有帮助的想法：

1.  确保在 .htaccess 文件中维护 #BEGIN WordPress 和 #END WordPress。把其余的放在你的规则上面

2.  尝试安装插件：更好的 WP 安全性：[http](http://wordpress.org/extend/plugins/better-wp-security/) ://wordpress.org/extend/plugins/better-wp-security/ - 这是一个救生员:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:06:56.527

如果您`QUERY_STRING`在上面的代码中替换为`THE_REQUEST`then 这可以正常工作，并且完全符合 WordPress 中的要求。

# date - 如何在 Jekyll 中显示文件的修改日期？

> ID：14978474
> 
> 赞同：30
> 
> 时间：2013-02-20T11:14:54.083
> 
> 标签：date, jekyll, liquid

我知道我可以`date`在文件的 YAML frontmatter 中指定一个变量并使用`{{ page.date }}`. 这很麻烦，因为人们很容易忘记更改文件更新的日期。那么如何访问文件的修改日期呢？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-01-15T23:13:22.703

这是一个相对较新的插件，可以满足您的需求：

[https://github.com/gjtorikian/jekyll-last-modified-at](https://github.com/gjtorikian/jekyll-last-modified-at)

（在谷歌搜索该线程中其他答案的替代品时找到了它）

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-08-14T13:39:45.550

从 Jekyll 1.x 开始，有一个`page.path`可以为您提供当前正在处理的帖子或页面的文件名。添加以下过滤器（例如放在 中`_plugins/myfilters.rb`）以获取给定文件名的修改时间：

```
module Jekyll
  module MyFilters
    def file_date(input)
      File.mtime(input)
    end
  end
end

Liquid::Template.register_filter(Jekyll::MyFilters) 
```

所以现在你可以在你的帖子和页面上呈现日期，例如，

```
{{ page.path | file_date | date_to_string }} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-11-15T15:33:17.393

根据 krlmlr 的帖子，我编写了一个 pre-commit 脚本来更新`date:`已修改文件的 YAML front matter 中字段的修改时间。

```
#!/bin/sh
# Contents of .git/hooks/pre-commit

git diff --cached --name-status | grep "^M" | while read a b; do
  cat $b | sed "/---.*/,/---.*/s/^date:.*$/date: $(date -u "+%Y-%m-%d %T %Z")/" > tmp
  mv tmp $b
  git add $b
done 
```

它对我来说很好。我其实用`update:`field来表示修改时间，用`date:`field来表示创建时间。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-20T20:05:42.627

I don't think it's possible to do this without using the YAML frontmatter. Note, however, that specifying `date` in the frontmatter actually overrides the `date` given in the post's filename.

So if you have a file `2013-02-19-my-post.md` and in its frontmatter you have `date: 2013-02-20`, the frontmatter takes precedence, and the post's date is `2013-02-20`.

If you want to keep track of when a post is modified, I'm afraid there's no way to do this without using a custom field in your frontmatter. Call it `modified-date` or something. Yes, it is a bit tedious. I have a TextExpander snippet that automatically outputs current date/time in the proper format, which is handy.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-04-10T11:09:48.067

如果您使用的是 Git，您可以安装一个预提交挂钩，该挂钩会自动更新已修改文件前面的日期字段。得知预提交挂钩确实可以更改提交的内容，我感到非常惊讶！您只需在存储库的每个克隆中手动安装一个预提交挂钩——以下粗略的草稿适用于我更新整个网站的整体修改时间：

```
#!/bin/sh
# Contents of .git/hooks/pre-commit

set -e
set -x

sed -i "s/^date:.*$/date: $(TZ=UTC date "+%Y-%m-%d %H:%M:%S %Z")/" _config.yml
git add _config.yml 
```

预计`_config.yml`会有一个字段“日期”，其内容将被每次提交替换。然后可以通过 访问它`{{ site.date }}`。例子：

```
date: 2015-04-10 10:51:37 UTC 
```

该脚本可以概括为仅更新那些已更改的页面或帖子（通过查询`git diff-index --cached`）——我没有时间实现这一点，但我有兴趣了解最终是否会出现更简洁的解决方案。

# c# - 如何处理 Windows Phone 8 中的 ManipulationCompleted 事件？

> ID：14978478
> 
> 赞同：2
> 
> 时间：2013-02-20T11:15:28.060
> 
> 标签：c#, windows-phone-8

我有以下代码，但它不起作用任何人都可以建议我需要做哪些更改才能使其正常工作。

```
Mainscroll.ManipulationCompleted += new EventHandler<System.Windows.Input.ManipulationCompletedEventArgs>(Mainscroll_completed);
 private void Mainscroll_completed(object sender, System.Windows.Input.ManipulationCompletedEventArgs e)
        {
            UIElement target = sender as UIElement;
            target.AddHandler(UIElement.ManipulationCompletedEvent, new EventHandler(layoutroot), true);
           // throw new NotImplementedException();
        }

        private void layoutroot(object sender, EventArgs e)
        {
            MessageBox.Show("done");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-02T13:27:35.680

替换这一行：

```
Mainscroll.ManipulationCompleted += 
    new EventHandler<System.Windows.Input.ManipulationCompletedEventArgs>(Mainscroll_completed); 
```

用这条线：

```
this.Mainscroll.AddHandler(
    Pivot.ManipulationCompletedEvent, 
    new EventHandler<ManipulationCompletedEventArgs>(Mainscroll_completed), true); 
```

并删除：

```
target.AddHandler(UIElement.ManipulationCompletedEvent...... 
```

# mysql - MySql 错误 > 超过锁定等待超时；尝试重新启动事务 SQLState：41000 VendorError：1205

> ID：14978480
> 
> 赞同：11
> 
> 时间：2013-02-20T11:15:36.203
> 
> 标签：mysql, locking

多年来，我一直在处理这个问题，但一直无法深入了解它。我不知道是什么导致了这些锁。

错误是：`Lock wait timeout exceeded; try restarting transaction SQLState: 41000 VendorError: 1205`

SQL 语句是在事务中运行的单个插入语句。所有插入都是这种形式，因此没有批量插入或混合模式插入等。

`INSERT INTO attachment( id, entityid, entitytype , addeduserid , deleteduserid , fullpath , filename, status, creationdate, lastupdated, deletiondate, hasfile,notes,history,type,mimeinfo,archivedby,archivedon, referencedate,changedby,changedon ) values (0,0,2,360,null,NULL,NULL,1,'2013-02-20 08:45:31','2013-02-20 08:45:31',NULL,0,NULL,'20/02/2013 08:45:UserA:File uploaded internally. <br>',0,NULL,null,NULL,NULL,null,NULL);`

系统配置：Mysql 版本：'Server version: 5.1.61 Source distribution'（在 Redhat 上）

存储：INNODB

INNODB 相关配置（部分来自 my.cnf 编辑）：

```
innodb_file_per_table=1
innodb_buffer_pool_size=3G
innodb_additional_mem_pool_size=20M
innodb_log_file_size=512M
innodb_log_files_in_group=2
innodb_log_buffer_size=16M
innodb_support_xa=1
innodb_doublewrite=1
innodb_thread_concurrency=0
innodb_flush_log_at_trx_commit=2
innodb_autoinc_lock_mode=2**
innodb_rollback_on_timeout=1
innodb_locks_unsafe_for_binlog=1**
thread_cache_size=8
query_cache_size=256M
query_cache_limit=4M
table_cache=2048
table_definition_cache=1024
tmp_table_size=512M
max_heap_table_size=512M
transaction-isolation=READ-COMMITTED**
innodb_table_locks=0**
innodb_lock_wait_timeout=50** 
```

** 这些是针对此问题专门添加的。

一般来说：

系统（即有 6 个应用程序实例，每个实例具有相同的数据库结构，都在一个 mysql 实例上运行）可以运行好几天，然后可以在开始发生锁定等待的情况下运行，并且通常会让它们在此期间以组的形式出现的一天。每个单独的错误都会重复发生，因为一旦失败，我会再试一次，通常重试会失败。我已配置为重试 4 次。通常，锁只会出现在几个不同的表上。

今天这个问题的具体实例：

今天早上在`attachment`桌子上，从昨晚开始，桌子上就没有插入过。自前一天晚上以来，桌面上也没有任何更新。如果锁与其他用户进行更新和插入无关，那么某些选择语句会导致锁吗？我试图确保所有选择语句都使用`attachment_general_index`？

由于我主要在几个不同的表上得到这个 - 这是这个表的结构。

```
CREATE TABLE `attachment` (
`id` int(10) unsigned NOT NULL AUTO_INCREMENT,
`entityid` int(10) unsigned DEFAULT NULL,
`entitytype` tinyint(3) unsigned NOT NULL DEFAULT '0',
`addeduserid` int(10) unsigned NOT NULL,
`deleteduserid` int(10) unsigned DEFAULT NULL,
`fullpath` varchar(255) DEFAULT NULL,
`filename` varchar(255) DEFAULT NULL,
`status` tinyint(3) unsigned NOT NULL DEFAULT '0',
`creationdate` varchar(40) DEFAULT NULL,
`lastupdated` varchar(40) DEFAULT NULL,
`deletiondate` varchar(40) DEFAULT NULL,
`hasfile` tinyint(3) unsigned NOT NULL DEFAULT '0',
`notes` text,
`history` text,
`type` tinyint(3) unsigned DEFAULT '0',
`lastupdatedby` int(10) DEFAULT '0',
`lastupdatedinfo` varchar(255) DEFAULT NULL,
`mimeinfo` varchar(255) DEFAULT NULL,
`archivedby` int(10) unsigned DEFAULT NULL,
`archivedon` varchar(40) DEFAULT NULL,
`referencedate` varchar(40) DEFAULT NULL,
`changedby` int(10) unsigned DEFAULT NULL,
`changedon` varchar(40) DEFAULT NULL,
PRIMARY KEY (`id`),
KEY `attachment_addeduserid_fkey` (`addeduserid`),
KEY `attachment_deleteduserid_fkey` (`deleteduserid`),
KEY `attachment_archivedby_fkey` (`archivedby`),
KEY `attachment_changedby_fkey` (`changedby`),
KEY `attachment_general_index` (`entitytype`,`entityid`,`status`,`type`),
CONSTRAINT `attachment_ibfk_1` FOREIGN KEY (`addeduserid`) REFERENCES `user` (`id`),
CONSTRAINT `attachment_ibfk_2` FOREIGN KEY (`deleteduserid`) REFERENCES `user` (`id`),
CONSTRAINT `attachment_ibfk_3` FOREIGN KEY (`archivedby`) REFERENCES `user` (`id`),
CONSTRAINT `attachment_ibfk_4` FOREIGN KEY (`changedby`) REFERENCES `user` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3619 DEFAULT CHARSET=latin1$$ 
```

我附上了最近的 SHOW INNODB STATUS，这是从今天开始的，从昨天开始就没有锁等待。我不明白所有这些输出，但主要是锁似乎从未出现在这里。我认为是因为它们没有被归类为死锁？

[https://docs.google.com/document/d/1Hslf2B594n8ofAUYxN54Gh8FrSCIFNGGMtthVI_Lv4k/pub](https://docs.google.com/document/d/1Hslf2B594n8ofAUYxN54Gh8FrSCIFNGGMtthVI_Lv4k/pub)

是否只有死锁区域对此问题感兴趣？如果有其他方面我会尽量收集，当它发生并可以提供。

任何帮助，将不胜感激。

缺口

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-22T22:17:46.743

我想与那些因事务超时而摸不着头脑并发现建议的服务器配置更改都无济于事的人分享我的“尤里卡”时刻。

我陷入了困境，以至于我正在认真考虑重写我的一些应用程序，以便我可以适应事务超时（全世界都能听到集体的呻吟声）。

我对从我的业务交易中丢失任何东西感到偏执，所以我运行一个 cron 作业，全天每 10 分钟执行一次完整的 mysqldump（这是在双重复制之上）。

我发现 mysqldump 占用了服务器，锁定了表，并且几乎禁止其他任何东西在它做这件事时使用数据库。当我发现事务失败与 mysqldump 运行时间同时发生时，我的尤里卡时刻到来了。

长话短说，有 3 个命令行选项可以防止 mysqldump 杀死你的服务器。这些是

1.  --单笔交易
2.  - 快的
3.  --lock-tables=false

非常感谢 CA3LE @[如何减慢 MySQL 转储速度而不影响服务器上的当前负载？](https://stackoverflow.com/questions/5666784/how-can-i-slow-down-a-mysql-dump-as-to-not-affect-current-load-on-the-server)为了启发我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T00:46:41.153

（这可能应该是一个评论，但我有太多的文字，需要格式化）。

[我认为这是一个与以下描述的](http://www.xaprb.com/blog/2006/08/03/a-little-known-way-to-cause-a-database-deadlock/)问题非常相似的问题：

1.  一个事务在表的末尾有一个锁。
2.  第二个事务锁定了表的大部分。
3.  第一个事务尝试更新/插入第二个事务持有的锁。这失败了，因此交易之一被选择终止。

感谢您发布`show status`. 您是对的，显示的死锁似乎与您所询问的表无关，但它似乎与 Xaprb 中的死锁相同。

> 是否只有死锁区域对此问题感兴趣？

是的，确切的部分是：

```
Transaction 1

UPDATE operative SET  lastupdated='2013-02-19 17:12:44'=N<EDITED> RECORD LOCKS space id 1789 page no 3622 n bits 112  index `PRIMARY` of table `<EDITED> `.`operative` trx id 0 233901602  lock_mode X locks rec but not gap waiting

*** (1) WAITING FOR THIS LOCK TO BE GRANTED: RECORD LOCKS space id 1789 page no 3622 n bits 112 index `PRIMARY` of table `<EDITED> `.`operative`  trx id 0 233901602 lock_mode X locks rec but not gap waiting

Transaction 2

INSERT INTO opdate(operativeId,opdate,updatingUser,dategroup,type,notes,lastupdated) values (....) RECORD LOCKS space id 1789 page no 3622 n bits 112 index `PRIMARY` of table `<EDITED> `.`operative`  trx id 0 233901603 lock mode S locks rec but not gap

*** (2) WAITING FOR THIS LOCK TO BE GRANTED: RECORD LOCKS space id 830 page no 112 n bits 808  index `opdate_unique` of table `<EDITED> `.`opdate` trx id 0 233901603 lock mode S waiting Record lock, heap no 739 PHYSICAL RECORD: n_fields 3; compact format; info bits 0 
```

这感觉与 xaprb 中列出的问题非常相似。IE

1.  事务 2 已对表进行了插入操作，现在在主键上持有锁。
2.  事务 1 正在执行表扫描以进行更新，并且正在等待对该主键的锁定。
3.  事务 2 正在尝试进行另一个插入，并且需要获得一个锁，但由于事务 1 已经拥有它而被阻止这样做（我实际上是在猜测那里，因为你混淆了表名）。

我建议先解决这个僵局，然后尝试解决您所询问的问题。

实际上，我认为您的问题可能不会出现在 INNODB 状态中。您收到错误代码 1205 - 这是 ER_LOCK_WAIT_TIMEOUT，而不是错误 1213 ER_LOCK_DEADLOCK。因此，尽管您实际上陷入了僵局，但它并没有被归类为这样。

我认为如果你能`SHOW ENGINE INNODB STATUS`在问题发生时做一段时间，你应该能够看到那里的停滞事务的锁，即使它们没有显示为最新的死锁。

# svn - 从特定版本创建 svn 分支

> ID：14978483
> 
> 赞同：2
> 
> 时间：2013-02-20T11:15:47.840
> 
> 标签：svn, tortoisesvn

有什么方法可以从特定修订版中创建（svn）分支，因为我想在我的提交历史中跳过一些修订版（在新分支中）。例如，我有从 1 到 1590 的修订，我想创建一个新分支并跳过提交（从修订 1504 到 1574）和修订#1584、修订#1586 和修订#1587。

请帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:31:24.457

有两种方法可以从旧版本创建新分支。一种是将您的工作副本设置为旧版本（右键单击 > TortoiseSVN > 更新到版本），然后创建一个分支（右键单击 > TortoiseSVN > 分支/标签）。之后使用通常的更新命令更新到头部修订。

另一种方法是使用存储库浏览器（右键单击 > TortoiseSVN > Repo-browser），选择修订版（单击右上角带有文本 HEAD 的按钮），然后使用 Ctrl+鼠标拖放复制文件夹（或，或者，右键单击文件夹>复制到）。

编辑：因为您希望在新分支中进行一些以后的修订，所以在创建分支后进行合并。将主线中您想要的所有修订合并到新分支中。

我现在看到还有第三种方法。您可以从 HEAD 修订版中创建一个分支，然后进行“反向合并”，以删除不需要的修订版。合并时只需选择该选项。

![反向合并示例](../Images/024925b4ace91959a161b8519266fdc2.png)

# php - 仅 SPHINX 匹配短语和 PHP 中的 SPHINX 自动索引

> ID：14978489
> 
> 赞同：0
> 
> 时间：2013-02-20T11:16:06.190
> 
> 标签：php, linux, indexing, full-text-search, sphinx

我正在构建一个返回短语结果的全文搜索引擎。

(a) 我正在尝试使用 PHP 在 SPHINX 中仅使用 SPH_MATCH_PHRASE 匹配短语。问题是当我搜索时，例如“这是一个短语”，它也会产生“这是一个短语”和“一个短语”和“这是一个”和“这是”和“短语”等的相关结果. 有没有办法将结果限制为只有完整的短语？

我尝试过的：我搜索了 S/O 并找到[了如何查询 Sphinx 以获得完全匹配的短语？](https://stackoverflow.com/questions/5424780/sphinx-how-do-i-set-sphinx-to-do-exact-string-match)这建议将搜索查询放在引号中。我试过了，但是当附加到搜索词时，它返回了零搜索结果。

(b) 这是我第一次使用 SPHINX，我几乎没有 Linux 经验，但我设法在 Linux VPS 上启动并运行它。我启动了索引器服务，但我不知道如何让它每隔一段时间自动重新索引。这是 SPHINX 配置还是 Linux 命令？

我尝试过的：我在 S/O 中搜索了上面的 (b) 并找到了这个，但是对于 Ruby on Rails[考虑 sphinx 自动索引](https://stackoverflow.com/questions/6844251/thinking-sphinx-automatic-indexing)，所以它对我没有帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:20:34.723

> *这建议将搜索查询放在引号中。*

是的。那是与扩展匹配模式一起使用的。`SPH_MATCH_EXTENDED`

在 php 中确保您正确使用 $cl->setMatchMode()。

> *我不知道如何让它每隔一段时间自动重新索引。*

克朗。您设置了一个 crontab 作业，以在适合您情况的任何时间间隔调用索引器程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:05:54.490

Baryhunter 在上面接受的答案中的许多链接和提示被证明是有用的。这为我做了索引部分，以防以后有人需要。

```
/usr/local/sphinx/bin/indexer --config /usr/local/sphinx/etc/sphinx.conf && /usr/local/sphinx/bin/searchd --rotate --config /usr/local/sphinx/etc/sphinx.conf 
```

# android - 如何获取 PopupWindow 的上下文？

> ID：14978491
> 
> 赞同：0
> 
> 时间：2013-02-20T11:16:24.270
> 
> 标签：android, popupwindow, android-context

我有一个进度条，我想在其中显示`PopupWindow`，但目前它显示在窗口外。我认为这可能与 Context 有关。我该怎么做？这是我的示例代码：

```
protected void onPreExecute(){
      super.onPreExecute();
      progressdialog = new ProgressDialog(MainActivity.this);
      progressdialog.setMessage("Downloading Image");
      progressdialog.show(); 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-06T08:33:25.330

由于您已经在使用自定义视图（使用布局充气器）您可以扩展`PopupWindow`，然后`getContentView().getContext()`在需要它的上下文时使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:25:15.610

在您的情况下，PopupWindow 或对话框没有任何自己的上下文。它需要显示它的活动的上下文。进度对话框也是如此。因此，在您的情况下，您可以将活动用作 PopupWindow 并将其上下文传递到进度对话框

**编辑：** 将此清单添加到您的活动中，您的活动将作为对话框工作

```
<activity android:theme="@android:style/Theme.Dialog" /> 
```

# asp.net - 回发后无法更改文字文本

> ID：14978493
> 
> 赞同：0
> 
> 时间：2013-02-20T11:16:34.743
> 
> 标签：asp.net, vb.net

VB

```
Protected Sub Page_Init(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Init
    If Me.IsPostBack Then
tb.Text = Request.Form("ctl00$cphContent$tb").ToString()
    End If
            If Not String.IsNullOrEmpty(tb.Text) Then
                lit.Text = "Not Empty"
            Else
                lit.Text = "Empty"
                End If
End Sub 
```

ASP

```
<asp:Literal ID="lit" runat="server"></asp:Literal> 
<asp:TextBox ID="tb" runat="server" Text=""></asp:TextBox>
<asp:Button ID="btn" runat="server" Text="click me" /> 
```

如果我第一次调用该页面，则 literal.text 为“空”。比我设置一个断点为 lit.Text = "Not Empty"。在我在文本框中输入内容并单击按钮后，断点处的元素显示 lit.Text 现在为“非空”。一切都很好......但是页面上的 lit.Text 仍然是“空”而不是“非空”......为什么？我无法更改 lit.Text。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:56:21.163

发生这种情况是因为您在`Page_Init`事件期间修改了值。尝试在 中或之后对其进行修改`Page_Load`。

阅读[ASP.net Page LifeCycle](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)。当您在 中设置值时`Page_Init`，发生这种情况后，在控件的 ViewState 中被加载，并且此设置将控件的值恢复为“空”。

# php - 有没有类似于 PHP 的 JSON_DECODE 函数的 Javascript 函数？

> ID：14978498
> 
> 赞同：-2
> 
> 时间：2013-02-20T11:16:51.540
> 
> 标签：php, jquery, ajax, json

我正在使用 jQuery AJAX 加载我的网页的一部分。我的 AJAX 数据类型是 HTML。我听说 JSON 更快，我也使用过它。但是当数据有点大时，JSON似乎不起作用，例如：

它在数据短时起作用：

```
{"name" : "John Smith" , "age" : "32" , "status" : "married" }

{"name" : "Bella Gilbert" , "age" : "26" , "status" : "single" } 
```

但当数据有点大时：

```
{"name" : "John Smith" , "age" : "32" , "status" : "married" }

{"name" : "Bella Gilbert" , "age" : "26" , "status" : "single" }

{"name" : "Joseph Morgan" , "age" : "28" , "status" : "single" }

{"name" : "Paul Wesley" , "age" : "24" , "status" : "single" } 
```

有什么方法可以获取数据而不将 dataType 声明为 JSON，然后使用 javascript 对其进行解码，类似于 PHP 的函数：

> json_decode($data);

或者如果没有，请建议一种使用 jQuery AJAX 处理大型 JSON 数据的方法。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T11:18:18.257

用这个

```
var obj = jQuery.parseJSON(json_data); 
```

它将解码 json_data

[http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-20T11:21:30.350

用于`JSON.parse()`将 JSON 字符串转换为对象：

```
var jsontext = '{"firstname":"Jesper","surname":"Aaberg","phone":["555-0100","555-0120"]}';
var contact = JSON.parse(jsontext);
document.write(contact.surname + ", " + contact.firstname);

// Output: Aaberg, Jesper 
```

jQuery版本：（`Parses a JSON string.`）

```
var obj = jQuery.parseJSON('{"name":"John"}');
alert(obj.name); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-20T11:18:30.580

您可以使用该[`$.parseJSON()`](http://api.jquery.com/jQuery.parseJSON/)方法将 JSON 编码的字符串解析为相应的 javascript 对象。但是如果你正在向你的服务器执行一个 AJAX 请求并且数据来自它，你根本不需要使用这个方法，因为 jQuery 会自动解析传递给成功函数的结果：

```
$.ajax({
    url: '/somescript.php',
    dataType: 'json',
    success: function(result) {
        // result is already a parsed javascript object that you could manipulate directly here
    }
}); 
```

如果您正确编写服务器端脚本，以便将响应`Content-Type`HTTP 标头设置为`application/json`（无论如何您都应该这样做），您甚至不需要向 jQuery 指示`dataType`参数。jQuery 会分析这个响应头并自动为你解析结果：

```
$.ajax({
    url: '/somescript.php',
    success: function(result) {
        // result is already a parsed javascript object that you could manipulate directly here
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T11:19:29.267

[jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/)方法可以做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T11:43:07.107

您的 json 对象格式错误。应该是这样的：

```
[{"name" : "John Smith" , "age" : "32" , "status" : "married" },

{"name" : "Bella Gilbert" , "age" : "26" , "status" : "single" },

{"name" : "Joseph Morgan" , "age" : "28" , "status" : "single" },

{"name" : "Paul Wesley" , "age" : "24" , "status" : "single" }] 
```

使用[此](http://json.parser.online.fr/)工具检查您的对象。

# javascript - 在 Javascript 中选择框触发事件

> ID：14978500
> 
> 赞同：0
> 
> 时间：2013-02-20T11:16:59.863
> 
> 标签：javascript, javascript-events

当您双击表格单元格并单击选项时，我有 javascript 创建一个通用选择框，当您单击一个选项时，选择框将被删除并记录选择的选项。表格单元格显示选定的选项。

但是，如果双击表格单元格并创建了选择框，但您只是单击选择框而不选择选项，则选择框仍然存在，并且页面的其余部分从那时起中断。

如果焦点丢失，我希望删除选择框，但适用于输入框的 onblur 方法似乎不适用于选择框。

有谁知道触发了什么事件？

双击表格单元格以创建选择框时的 Javascript 代码：

```
var object_input = document.createElement ("SELECT");   //Put an select box in the cell

object_input.setAttribute("name", "course_price_select");
object_input.setAttribute("id", "course_price_select");
object_input.style.width = (current_cell.clientWidth - 20) + "px";

object_input.attachEvent ("onblur", focus_lost);  
object_input.attachEvent ("onkeypress", checkForEnter); 
```

这两行不行！（focus_lost 和 checkForEnter 方法以 alert('hi'); 开头，所以我知道它们没有被触发）

```
object_input.onchange = function() {focus_lost()};

//Populate with options.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:24:00.437

`attachEvent`是一个 IE 唯一的功能。您还应该使用 绑定您的事件`addEventListener`，例如：

```
if(object_input.addEventListener)
{
    object_input.addEventListener('blur', focus_lost);  
    object_input.addEventListener('keypress', checkForEnter);
}
else
{
    object_input.attachEvent('onblur', focus_lost);  
    object_input.attachEvent('onkeypress', checkForEnter);
} 
```

你可以在这里看到一个 jsFiddle[**演示**](http://jsfiddle.net/sFx7u/)。

您应该注意，`addEventListener`不需要在事件前面加上`on`，而需要`attachEvent`。

# java - 如何为需要 HTTP 请求的 API 编写 JUnit 测试用例

> ID：14978502
> 
> 赞同：0
> 
> 时间：2013-02-20T11:17:07.723
> 
> 标签：java, jakarta-ee, junit

我有一个 API，它以**javax.jcr.Session**作为输入并做了一些工作。那么我如何为这个 API 生成 JUnit 测试用例。如何从中创建 HTTP 请求对象和 jcr 会话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:31:01.973

如果可以，请使用[Mockito](http://code.google.com/p/mockito/)。对我来说，这是获取复杂对象的最简单方法之一，您只需要测试您的东西即可。

您可以执行以下操作：

```
Session mockSession = Mockito.mock(Session.class);
someApiMethod(mockSession); 
```

您可以查看[Mockito 站点上的文档](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html)。

# google-maps - 在给定坐标的谷歌地图上弹出信息窗口

> ID：14978505
> 
> 赞同：-1
> 
> 时间：2013-02-20T11:17:12.743
> 
> 标签：google-maps

我想知道有没有办法自动弹出提供坐标的标记的信息窗口。我想点击页面上的一个链接，我将从那里得到一个地理位置，（并且这个位置已经在地图上标记了）有了这个坐标，就会弹出相应的信息窗口，就像我在地图上点击它一样。有谁知道如何做到这一点？

谢谢。

--

一般来说，这就像你可以用谷歌地图做的那样，如果你在左边有多个位置，你点击一个，地图上对应的标记会弹出一个信息窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:00:31.347

有可能，您所需要的只是对相关标记的引用，然后您可以触发对标记的单击，信息窗口将打开。

如何获取对标记的引用取决于您的应用程序（创建标记和链接的方式）

# android - setFragment 中的错误 - FB-Native 登录

> ID：14978507
> 
> 赞同：2
> 
> 时间：2013-02-20T11:17:19.317
> 
> 标签：android, facebook, fragment, android-fragmentactivity

我正在使用 Facebook Nativelogin，因此它比传统方法更快，但我得到如下错误（图片），

![图片](../Images/8f918d061a24a53de1342a20c8ba702f.png)

其实`this`这里的指针指向的是当前的 Fragment 是吗？如果不是，这个`this`指针指向什么？为什么我会收到这个错误？我不知道我哪里出错了。

我正在关注[https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/#protip1](https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/#protip1)

和[http://code.google.com/p/app-container/source/browse/trunk/AppContainer/src/levelrewind/android/app/FacebookFragment.java?spec=svn237&r=237](http://code.google.com/p/app-container/source/browse/trunk/AppContainer/src/levelrewind/android/app/FacebookFragment.java?spec=svn237&r=237)

但是我得到了同样的错误，我已经搜索了很多，但是关于本机 FB 登录的线程只有几个，我已经浏览了所有这些线程，但我没有成功

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-01T22:34:37.733

我遇到了同样的问题。我相当肯定这是因为 Facebook 3.0 API 使用了 android 支持库片段，所以你必须做同样的事情，即

导入android.support.v4.app.Fragment；

问题就解决了。但是，由于进行此更改，您可能需要解决其他问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-04T17:25:47.113

如果您深入研究 LoginButton 类，您会注意到 facebook sdk 正在使用

`import android.support.v4.app.Fragment;`

我只能假设您正在使用

```
import android.app.Fragment; 
```

所以需要使用支持库提供的Fragment

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-19T14:36:06.687

如果您的 IDE 说这`this`是引用的实例`MainActivity`，我很确定您的方法放错了位置。

`Fragment`您必须在您的中创建一个并在此片段中`MainActivity`移动您的方法。`onCreateView()`这样做，您将引用一个`Fragment`writing的实例`authButton.setFragment(this);`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-21T04:47:16.720

我有同样的问题，但能够解决它。

如果您转到 facebook 库中小部件包下的 LoginButton.java，您可能会看到 setFragment 函数对 Fragment 对象有错误。它与 facebook 正在使用的支持库的版本以及您的项目正在使用的版本有关。在 Android Studio 中，我可以通过将鼠标悬停在错误上并选择将该版本的支持库添加到我的类路径的选项来解决它。

# jquery - 手风琴部分在开始时关闭 JqueryUI

> ID：14978519
> 
> 赞同：0
> 
> 时间：2013-02-20T11:17:55.750
> 
> 标签：jquery

当我用这种方式声明的手风琴打开一个页面时

```
 $(function() {
    $( "#accordition1" ).accordion({collapsible: true});
  }); 
```

有四个部分，第一个是永远打开的。

我怎样才能让手风琴的第一部分在开始时关闭？

问候，鲁道夫·罗洛。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:22:42.857

如果您使用的是 jQueryUI 手风琴：

```
$(function() {
    $( "#accordition1" ).accordion({collapsible: true,active:false});
  }); 
```

# c# - 使用 RedGate Memory Profiler 了解 ASP.net 中的内存泄漏

> ID：14978522
> 
> 赞同：6
> 
> 时间：2013-02-20T11:18:11.513
> 
> 标签：c#, asp.net, memory-leaks, redgate, memory-profiling

我正在运行一个大型 ASP.net 4.0 网站。它使用流行的 .Net 内容管理系统，拥有数千个内容项，数百个并发用户 - 基本上是一个重量级网站。

在 1 天的过程中，IIS7 工作进程的内存使用量可以上升到 8-10GB。服务器已安装 16GB，当前设置为每天回收一次应用程序池。

我面临着减少内存使用的压力。大部分内存使用是由于缓存了大量数据字符串 - 但缓存间隔仅设置为 5-10 分钟 - 所以这些字符串最终应该从内存中过期。

然而，在运行 RedGate Memory Profiler 之后，我可以看到我认为是内存泄漏。我已经按“由 Disposed Objects 专门保存在内存中”的对象过滤了我的实例列表结果（我在 RedGate 论坛上读到，这就是你发现内存泄漏的方式）。这给了我一长串保存在内存中的字符串。

对于每个字符串，我使用 Instance Retention Graph 来查看内存中的内容。System.string 对象似乎在某个时候被 System.Web.Caching.CacheDependency 缓存了。如果我一直跟踪图表，它会遍历各种其他类，包括 System.Collections.Specialized.ListDictionary，直到到达 System.Web.FileMonitor。这是有道理的，因为字符串是文件的路径（图像/PDF/等）。

似乎 CMS 正在缓存文件的路径，但这些缓存的对象随后被“泄露”。随着时间的推移，这会积累并消耗 RAM。

对不起，这是冗长的......我有办法阻止这些内存泄漏吗？或者在不回收应用程序池的情况下清除它们？我可以找到正在缓存的类/代码以查看是否可以修复泄漏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:08:58.430

这听起来像是作为会话状态的一部分留在内存中的非常常见的问题。如果是这种情况，您唯一的选择是 1\. 不要在每个用户的会话中放太多东西，2\. 将会话生命周期设置为更短（我认为默认值为 20 分钟），以及 3\. 定期回收应用程序池.

作为 1 的一部分。我发现在数据网格控件中呈现数据有“好方法”和“坏方法”。您可能想要检查您是否只复制您需要的数据，而不是意外维护对整个数据网格的引用。

# c# - 如何在winrt上删除localstorage中的文件？

> ID：14978526
> 
> 赞同：6
> 
> 时间：2013-02-20T11:18:14.793
> 
> 标签：c#, windows-8, windows-runtime, local-storage, storagefile

我尝试删除本地存储中的文件，但没有成功。没错，我拍了一张照片，我想稍后用一个按钮删除它，例如。但是当我点击按钮时，应用程序错误并且我有：“访问被拒绝”。

在 StorageFile 中获取文件后，我使用了一个简单的 Delete.Async()。

```
 private async void delete_click(object sender, RoutedEventArgs e)
    {

            StorageFile filed = await ApplicationData.Current.LocalFolder.GetFileAsync("myImg.jpg");
            if (filed != null)
            {
                await filed.DeleteAsync();

            }

    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T07:09:58.730

试试下面的代码，看看它是否适合你。

```
 private async void takephoto_click(object sender, RoutedEventArgs e)
    {

        var ui = new CameraCaptureUI();
        ui.PhotoSettings.CroppedAspectRatio = new Size(4, 3);
        var file = await ui.CaptureFileAsync(CameraCaptureUIMode.Photo);

        if (file != null) 
        {
           // store the file
           var myFile = await ApplicationData.Current.LocalFolder.CreateFileAsync("myImg.jpg");
           await file.MoveAndReplaceAsync(myFile);

           // display the file
           var bitmap = new BitmapImage();
           bitmap.SetSource(await file.OpenAsync(FileAccessMode.Read));
           Photo.Source = bitmap;
        }

    }

    private async void delete_click(object sender, RoutedEventArgs e)
    {
        StorageFile filed = await ApplicationData.Current.LocalFolder.GetFileAsync("myImg.jpg");
        if (filed != null)
        {
            await filed.DeleteAsync();
        }

        StorageFile filefound = await ApplicationData.Current.LocalFolder.GetFileAsync("myImg.jpg");

        if (filefound != null)
        {
           // do something here 
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-23T08:27:24.283

我在从本地存储中删除文件时遇到了同样的问题。本地存储中存储了许多不同名称的文件，那么如何删除其他文件。在上述情况下，您已硬编码要删除的文件名。

StorageFile filefound = await ApplicationData.Current.LocalFolder.GetFileAsync("myImg.jpg"); 而不是 myImg.jpg 用户想要删除其他文件然后用户将如何删除

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-13T15:33:15.283

```
 /// <summary>
    /// Delete the indicated application file
    /// </summary>
    /// <param name="strFilePathName">The file path name to delete</param>
    /// <returns>True, if successful; else false</returns>
    public async static Task<bool> DeleteAppFile(string strFilePathName)
    {
        try
        {
            StorageFile fDelete = null;

            if (!strFilePathName.Equals(""))
            {
                fDelete = await ApplicationData.Current.LocalFolder.GetFileAsync(strFilePathName);
                if (fDelete != null)
                {
                    try
                    {
                        await fDelete.DeleteAsync();
                    }
                    catch (Exception ex)
                    {
                        AFFECTS.App.ShowMessage(true, "Error", "DeleteAppFile {" + strFilePathName + "}", ex.Message);

                        return false;
                    }

                    return true;
                }
            }
            else
                AFFECTS.App.ShowMessage(true, "Error", "DeleteAppFile", "File path name is empty.");
        }
        catch (Exception ex)
        {
            AFFECTS.App.ShowMessage(true, "Error", "DeleteAppFile {" + strFilePathName + "}", ex.Message);
        }

        return false;
    } 
```

# visual-c++ - 如何将 CMFCPropertyGridCtrl 添加到对话框

> ID：14978529
> 
> 赞同：0
> 
> 时间：2013-02-20T11:18:15.813
> 
> 标签：visual-c++, mfc, mfc-feature-pack

有人可以给我一个将 CMFCPropertyGridCtrl 添加到对话框的示例。我试图创建一个对话框并添加一个 CMFCPropertyGridCtrl。但它给了我错误。非常感谢教程或工作代码。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:09:18.297

最后我学会了添加一个CMFCPropertyGridCtrl。这是代码..

```
CMFCPropertyGridCtrl m_wndPropList1;
m_wndPropList1.Create( WS_CHILD | WS_VISIBLE | WS_TABSTOP | WS_BORDER, rectPropList1, this, MY_GRID_CTRL_ID);

m_wndPropList1.EnableHeaderCtrl();
//m_wndPropList.EnableDescriptionArea();
m_wndPropList1.SetVSDotNetLook(TRUE);
m_wndPropList1.MarkModifiedProperties(TRUE);
m_wndPropList1.SetAlphabeticMode(!TRUE);
m_wndPropList1.SetShowDragContext(TRUE);

CMFCPropertyGridProperty* pGroupFont = new CMFCPropertyGridProperty(_T("Theme Header Text Properties"));
LOGFONT lf;
CFont* font = CFont::FromHandle((HFONT) GetStockObject(DEFAULT_GUI_FONT));
font->GetLogFont(&lf);
lstrcpy(lf.lfFaceName, _T("Arial"));
COLORREF col = RGB(0 , 0 ,0);
pGroupFont->AddSubItem(new CMFCPropertyGridFontProperty(_T("Header Font"), lf,
    CF_EFFECTS | CF_SCREENFONTS, _T("Specifies the default font for the dialog") , IDC_PROPERTY_GRID1_FONT , col) );

CMFCPropertyGridColorProperty* pColorProp = new CMFCPropertyGridColorProperty(_T("Header Font Color"),
    RGB(0, 0, 0), NULL, _T("Specifies the default dialog font color") , IDC_PROPERTY_GRID1_FONT_COLOR);
pColorProp->EnableOtherButton(_T("Other..."));
pColorProp->EnableAutomaticButton(_T("Default"), ::GetSysColor(COLOR_3DFACE));
pGroupFont->AddSubItem(pColorProp);

CMFCPropertyGridColorProperty* pColorProp2 = new CMFCPropertyGridColorProperty(_T("Header Back Color"),
    RGB(255, 255, 255), NULL, _T("Specifies the default dialog background color") , IDC_PROPERTY_GRID1_BACK_COLOR);
pColorProp2->EnableOtherButton(_T("Other..."));
pColorProp2->EnableAutomaticButton(_T("Default"), ::GetSysColor(COLOR_3DFACE));
pGroupFont->AddSubItem(pColorProp2);

m_wndPropList1.AddProperty(pGroupFont); 
```

# c# - 在 C# 中访问 Windows 便携式设备自动化 API

> ID：14978530
> 
> 赞同：0
> 
> 时间：2013-02-20T11:18:17.130
> 
> 标签：c#, microsoft-metro, windows-store-apps, bluetooth-lowenergy, wpd

我正在编写一个 Metro Style C#/XAML 应用程序，它连接到蓝牙低功耗设备并从中接收数据。Microsoft 共享了一个使用 WPD API 的示例，它可以满足我的所有需求。但它是用 javascript 编写的，并使用 javascript 特定的方法，如 ActiveXObject()。

```
var deviceFactory = new ActiveXObject("PortableDeviceAutomation.Factory"); 
```

有没有办法将此代码移植到 C# Metro 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T07:48:22.237

此 API 仅适用于 JavaScript。如果您需要在 Windows 8 中从 C# 访问低功耗蓝牙设备，您可以使用 WPD C++/COM API 编写一个 Windows 运行时组件，以投射您需要访问的功能。

示例（有关设备服务示例，请参见场景 6）：[http ://code.msdn.microsoft.com/windowsapps/Portable-Device-API-57c4e696](http://code.msdn.microsoft.com/windowsapps/Portable-Device-API-57c4e696)

Windows 运行时组件（可以从 JS 或 C# 使用）：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh755833.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh755833.aspx)

# codeigniter - 以 codeigniter 风格编写联合查询

> ID：14978532
> 
> 赞同：2
> 
> 时间：2013-02-20T11:18:19.817
> 
> 标签：codeigniter

如何以 Codeigniter 样式编写以下查询。

```
SELECT COUNT(`id`) AS reccount
  FROM 
    (SELECT `id` FROM table1 
     WHERE tid= '101' AND `status` =  1
     UNION ALL
    SELECT `id` FROM table2 
     WHERE tid= '101' AND `status` =  1
     UNION ALL
    SELECT `id` FROM table3
     WHERE tid= '101' AND `status` =  1) t 
```

我使用了以下方式来执行它。

这是唯一正确的方法还是您有任何改进的建议？

```
 $q = $this->db->query(SELECT COUNT(`id`) AS reccount
                        FROM 
                        (SELECT `id` FROM table1 
                         WHERE tid= '101' AND `status` =  1
                         UNION ALL
                         SELECT `id` FROM table2 
                         WHERE tid= '101' AND `status` =  1
                         UNION ALL
                         SELECT `id` FROM table3
                         WHERE tid= '101' AND `status` =  1) t "); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-03-06T21:38:16.697

从 CodeIgniter 3 开始，它在 Active Record 中被引入了在`get_compiled_select()`不实际执行查询的情况下提供查询字符串的函数。

这允许@MDeSilva 方法使用更少的资源，调整如下：

```
function get_merged_result($ids){                   
    $this->db->select("column");
    $this->db->distinct();
    $this->db->from("table_name");
    $this->db->where_in("id",$model_ids);
    $query1 = $this->db->get_compiled_select(); // It resets the query just like a get()

    $this->db->select("column2 as column");
    $this->db->distinct();
    $this->db->from("table_name");
    $this->db->where_in("id",$model_ids);
    $query2 = $this->db->get_compiled_select(); 

    $query = $this->db->query($query1." UNION ".$query2);

    return $query->result();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-09T21:47:14.583

您可以使用 CI 生成联合查询。但是，最新版本使这比以前困难得多。

DB 有一个名为 _compile_select 的方法，在以前的 CI 版本中它是公开的，但现在它受到保护，因此您不能只`$this->db->_compile_select()`从控制器调用。为了正确地做到这一点，可以：

1.  创建自定义加载器类以能够扩展核心/数据库类（即加载`MY_DB_active_record`而不是`CI_DB_active_record`）。
2.  创建自定义活动记录类，只需一种方法：

    ```
    public function compile_select() {
        return $this->_compile_select();
    } 
    ```

3.  在您的控制器中，创建所有必要的查询，使用我们的公共方法将它们编译成字符串数组`compile_select()`

4.  将数组加入单个查询：`'(' . implode(') UNION (', $queries) . ')'`. 您还可以将其包装到自定义 AR 类中的单独方法中。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-20T11:27:21.900

```
function get_merged_result($ids){                   
    $this->db->select("column");
    $this->db->distinct();
    $this->db->from("table_name");
    $this->db->where_in("id",$model_ids);
    $this->db->get(); 
    $query1 = $this->db->last_query();

    $this->db->select("column2 as column");
    $this->db->distinct();
    $this->db->from("table_name");
    $this->db->where_in("id",$model_ids);

    $this->db->get(); 
    $query2 =  $this->db->last_query();
    $query = $this->db->query($query1." UNION ".$query2);

    return $query->result();
} 
```

# javascript - jQuery scrollTo 但中间减慢

> ID：14978533
> 
> 赞同：6
> 
> 时间：2013-02-20T11:18:19.820
> 
> 标签：javascript, jquery, scrollto

我正在使用一段简单的代码（基于“[带有 jQ​​uery 的 ScrollTo Posts](http://webdesignerwall.com/tutorials/scrollto-posts-with-jquery) ”，它允许您单击下一个/上一个链接，它会跳转到每个帖子的顶部。

我有我的 HTML 结构，所以它是 post > image > post > image 等。

我想知道是否有可能如果您单击下一个/上一个按钮，它会正常滚动到下一个帖子，但它会挂起/悬停在中间的图像/div 上？所以它最终完成了它的滚动，但在中间的 div 上放慢了速度。

这是我的 jQuery 代码：

```
$(function () {
    function a(f) {
        var b, e, c = [],
            d = $(window).scrollTop(),
            g = $('.section-slide');
        g.each(function () {
            c.push(parseInt($(this).offset()['top'], 10))
        });
        for (e = 0; e < c.length; e++) {
            if (f == 'next' && c[e] > d) {
                b = g.get(e);
                break
            }
            if (f == 'prev' && e > 0 && c[e] >= d) {
                b = g.get(e - 1);
                break
            }
        }
        if (b) {
            $.scrollTo(b, {
                duration: 1400
            })
        }
        return false
    }
    $('#next,#prev').click(function () {
        return a($(this).attr('id'))
    });
    $('.scrolltoanchor').click(function () {
        $.scrollTo($($(this).attr('href')), {
            duration: 1400
        });
        return false
    })
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:46:05.540

假设您的结构将保持静态：post -> image -> post -> image 等。您可以通过找到要滚动到的帖子的上一个/下一个图像来完成此操作，然后首先滚动到它，然后使用`onAfter`回调/从`$.scrollTo`插件设置以在预定义后触发辅助滚动，`setTimeout`如下所示：

```
$(function () {
    function scroll(direction) {
        var scroll, scrollImage, i,
            positions = [],
            here = $(window).scrollTop(),
            collection = $('.post');

        collection.each(function () {
            positions.push(parseInt($(this).offset()['top'], 10));
        });

        for (i = 0; i < positions.length; i++) {
            if (direction == 'next' && positions[i] > here) {
                scroll = collection.get(i);

                // Find Image Before Post
                scrollImage = $(scroll).prev('.image').get(0);

                break;
            }
            if (direction == 'prev' && i > 0 && positions[i] >= here) {
                scroll = collection.get(i - 1);

                // Find Image After Post
                scrollImage = $(scroll).next('.image').get(0);

                break;
            }
        }

        if (scroll) {
            // Check if Scroll Image Exists
            if (scrollImage){
                // Scroll with Image Delay
                $.scrollTo(scrollImage, {
                    duration: 750,
                    onAfter: function(){
                        setTimeout(function(){
                            $.scrollTo(scroll, {
                                duration: 750
                            });
                        }, 1000); // Change the Delay to Increase / Decrease the Hover
                    }
                });                
            } else {
                $.scrollTo(scroll, {
                    duration: 750
                });
            }
        }

        return false;
    }

    $("#next,#prev").click(function () {
        return scroll($(this).attr('id'));
    });

    $(".scrolltoanchor").click(function () {
        $.scrollTo($($(this).attr("href")), {
            duration: 750
        });
        return false;
    });
}); 
```

你可以在这里找到一个更新的小提琴：http: [//jsfiddle.net/hfg2v/2/](http://jsfiddle.net/hfg2v/2/)

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:01:43.033

发生这种情况是因为您正在使用视差滚动库 (Stellar.js)，它使不同的元素以不同的速度滚动。

一个可能的解决方法是在当前视口中没有元素时以更高的速度滚动，直到下一个元素的边缘刚刚离开屏幕，然后立即以原始滚动速度滚动，直到视口中再次没有元素，并不断重复此操作，直到达到所需的滚动偏移量。

# 编辑：

抱歉，在我写答案时出现了一些问题，我没有时间完成代码。

但是，在研究了一段时间后，我开始认为我提出的解决方案行不通。我在想一些事情：

```
$(window).scrollTo(640, {onAfter: function () {
    var scrollRatio = 3;
    var distance = 855 - 640;

    $(window).scrollTo(855, {
        easing: 'linear',
        duration: distance * scrollRatio / speed,
        onAfter: function () {
            var scrollRatio = 1;
            var distance = 1200 - 855;
            $(window).scrollTo(1200, {
                easing: 'linear',
                duration: distance * scrollRatio / speed,
                onAfter: function () {
                    var scrollRatio = 3;
                    var distance = 1280 - 1200;
                    $(window).scrollTo(1280, {
                        easing: 'linear',
                        duration: distance * scrollRatio / speed
                    });
                }
            });
        }
    });
}}); 
```

如果您将前面的代码粘贴到问题中提供的网站 ( [http://dev.du.st/field-station/](http://dev.du.st/field-station/) ) 中，您将被带到第一个元素，它会尝试将您滚动到下一个元素一个使用我描述的方法。我对偏移值进行了硬编码，因为我仍在试验它。但是，我认为这种方法行不通，因为它仍然感觉不对。这是因为在动画中间立即改变速度总是很明显。

现在，我认为减轻视差滚动导致的缓慢滚动感觉的最佳方法是使用不同的缓动函数。毕竟，让背景图片变慢，正是您使用视差滚动的目的。

以下代码在您的网站中运行时，将使所有动画默认使用“easeOutCirc”作为其缓动功能，经过一些试验，我发现它是使滚动感觉最不奇怪的一种：

```
// Add the jQuery-easing plugin, needed for the more sophisticated easing functions.
$.getScript('//cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js');

// Set easeOutCirc as the default easing.
jQuery.easing.def = 'easeOutCirc'; 
```

[您可以在此网站上](http://jqueryui.com/resources/demos/effect/easing.html)找到更多缓动功能

一旦你完成了实验，如果你决定使用缓动（你可以使用不同的缓动来向上和向下滚动），那么你应该保持默认缓动，只需通过添加来更改滚动动画中的缓动`{easing: EASING_NAME}`到`scrollTo`函数中的选项散列。所以你的代码看起来像这样：

```
$.scrollTo($($(this).attr("href")), {
    duration: 750,
    easing: 'easeOutCirc'
}); 
```

# cordova - 在子浏览器中访问 phonegap 摄像头

> ID：14978543
> 
> 赞同：1
> 
> 时间：2013-02-20T11:18:51.240
> 
> 标签：cordova, childbrowser

我在我的 android 应用程序中使用[childbrowser](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser)插件作为电话间隙来查看我的外部站点。有没有办法在该外部网站上点击按钮激活相机？我尝试将下面的代码添加到我的按钮点击功能，但它不起作用。

```
 pictureSource=navigator.camera.PictureSourceType;
    destinationType=navigator.camera.DestinationType;
    navigator.camera.getPicture(onSuccess, onFail, { quality: 50,
    destinationType: destinationType.DATA_URL });
    function onFail(message) {
        alert('Failed because: ' + message);
    }
    function onSuccess(message) {
        alert('Success because: ' + message);
    } 
```

并运行 childbrowser（工作正常）我使用：

```
window.plugins.childBrowser.showWebPage(_url, { showLocationBar: false }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:52:18.577

ChildBrowser 不应该公开本机功能。

您是否有理由不将远程站点中的内容直接加载到 PhoneGap 视图中？

# unix - 按组复制文件夹中的文件

> ID：14978547
> 
> 赞同：-1
> 
> 时间：2013-02-20T11:19:06.983
> 
> 标签：unix

我是 Unix 编码的新手。我有一个文件列表：

```
output_00.txt        
output_01.txt        
output_02.txt          
output_03.txt          
output_04.txt       
output_05.txt         
output_06.txt        
.............          
output_94.txt 
```

以及 10 个文件夹的列表：

```
output1         
output2        
output3       
output4         
output5     
output6         
output7     
output8        
output9        
output10 
```

我想复制文件夹中的 .txt 文件，以便从 output_00.txt 到 output_09.txt 的文件位于“output1”文件夹中，从 output_10.txt 到 output_19.txt 的文件位于“output2”文件夹中，并且很快。因此，文件将按 10 个文件夹中的 10 个组进行拆分。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:21:59.773

为此使用[大括号扩展](https://www.gnu.org/software/bash/manual/bashref.html#Brace-Expansion)：

```
for i in {1..10}
do
   mv output_$((i-1))*.txt output$i/
done 
```

# windows - 环境变量中的 Windows 控制台宽度

> ID：14978548
> 
> 赞同：8
> 
> 时间：2013-02-20T11:19:10.990
> 
> 标签：windows, command-line, batch-file, console, cmd

如何在批处理文件的环境变量中获取 Windows 控制台的**当前宽度？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T13:39:38.733

`mode`我喜欢在 Windows中使用内置命令的方法。尝试以下批处理文件：

```
@echo off
for /F "usebackq tokens=2* delims=: " %%W in (`mode con ^| findstr Columns`) do set CONSOLE_WIDTH=%%W
echo Console is %CONSOLE_WIDTH% characters wide 
```

请注意，这将返回控制台缓冲区的大小，而不是窗口的大小（可滚动）。

如果您想要 Windows 控制台的高度，可以`Columns`在`findstr`表达式中替换为`Lines`. 同样，它将返回缓冲区的高度，而不是窗口...我个人喜欢有一个大缓冲区来允许回滚历史，所以对我来说，Lines 通常报告大约 3000 :)

* * *

只是为了好玩，这是一个不`findstr`用于过滤输出的版本......以防万一（出于某种原因）您不喜欢`findstr`：

```
@echo off
for /F "usebackq tokens=1,2* delims=: " %%V in (`mode con`) do (
    if .%%V==.Columns (
        set CONSOLE_WIDTH=%%W
        goto done
    )
)
:done
echo Console is %CONSOLE_WIDTH% characters wide 
```

请注意，这都是在 Windows XP SP3 中尝试过的，在许多不同的窗口中（包括一个正在执行的 FAR 管理器）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-11T14:47:02.520

试试这个（语言/区域设置/.net 独立）：

```
@ECHO OFF
SET "ConsoleWidth="
SET /A LINECOUNT=0
SETLOCAL ENABLEDELAYEDEXPANSION
FOR /F "tokens=1,2,*" %%A IN ('mode con') DO (SET /A LINECOUNT=!LINECOUNT!+1&IF !LINECOUNT! EQU 4 SET ConsoleWidth=%%B)
SETLOCAL DISABLEDELAYEDEXPANSION
SET "LINECOUNT="
ECHO ConsoleWidth: %ConsoleWidth% characters 
```

在 Windows XP 和 Windows 7 上测试，均使用捷克语

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T13:00:31.537

Powershell 的`(Get-Host).UI.RawUI.WindowSize`属性设置或返回当前控制台窗口的尺寸。因此，您可以使用`for`循环捕获它：

```
for /f %%I in ('powershell ^(Get-Host^).UI.RawUI.WindowSize.width') do set width=%%I 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T13:35:04.850

好的，这是不需要安装powershell的。它编写、运行和删除 .Net 应用程序以设置批处理脚本变量。:)

```
@echo off
setlocal
pushd "%windir%\microsoft.net\"
for /f "delims=" %%I in ('dir /s /b csc.exe') do (
    set csc=%%I
    goto next
)
:next
popd
echo using System;>width.cs
echo class Width {>>width.cs
echo public static void Main() {>>width.cs
echo string m1 = "{0}";>>width.cs
echo Console.WriteLine^(m1, Console.WindowWidth^); } }>>width.cs
"%csc%" /out:width.exe width.cs >NUL 2>NUL
for /f %%I in ('width.exe') do set width=%%I
del width.exe width.cs
echo %width% 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T11:33:37.713

您无法在环境变量中获取它，但它存储在注册表中，因此您可以从批处理脚本中访问它。

这里有关于如何更改它的答案： [How to change Screen buffer size in Windows Command Prompt from batch script](https://stackoverflow.com/questions/4692673/how-to-change-screen-buffer-size-in-dos-command-prompt-from-batch-script)

以类似的方式，您可以使用`reg.exe QUERY [key details]`而不是`reg.exe ADD [details]`. 有关详细信息，请参阅[Technet 文档](http://technet.microsoft.com/en-us/library/cc978570.aspx)`HKCU\Console`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-19T14:41:46.580

对于一个简单的行：

 ****```
for /f tokens^=2 %%w in ('mode con^|find "Col"')do set _width=%%~w" 
```****

# android - 带有WebView的JavaApplication之上的NDK NativeActivity？

> ID：14978554
> 
> 赞同：2
> 
> 时间：2013-02-20T11:19:34.540
> 
> 标签：android, android-layout, android-ndk, native-activity

我正在寻找一种方法，让我的 OpenGL 的一部分[`NativeActivity`](http://developer.android.com/reference/android/app/NativeActivity.html)在具有 Web 视图的 Java 应用程序之上透明，这样我就可以在我的应用程序中使用浏览器。移植 WebKit 是有问题的，而且花费的时间比我多。有谁知道如何将我的 OpenGL 渲染为覆盖在另一个应用程序之上？

# windows-runtime - Windows 8 - XAML/C# 如何设置相机的纵横比

> ID：14978563
> 
> 赞同：1
> 
> 时间：2013-02-20T11:19:54.727
> 
> 标签：windows-runtime, windows-store-apps, winrt-xaml

我的 Microsoft HD 网络摄像头支持 16:9 纵横比。我可以从 Microsoft LifeCam 实用程序以 16:9 的纵横比预览和捕捉。

在我的应用程序中，预览仅以 4:3 的纵横比显示。有没有办法把它设置为16:9？我用谷歌搜索了它，搜索了 MSDN API，但找不到方法。

到目前为止，我的代码如下所示：

XAML `<CaptureElement x:Name="CameraCaptureElement" Stretch="Uniform" ></CaptureElement>`

C# 代码

```
private async void InitializeCamera()
{
MediaCapture mediaCaptureMgr = new Windows.Media.Capture.MediaCapture();
await mediaCaptureMgr.InitializeAsync();
CameraCaptureElement.Source = mediaCaptureMgr;
await mediaCaptureMgr.StartPreviewAsync();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:29:47.017

您可以设置一个`Clip`以`CameraCaptureElement`将预览剪辑到所需的纵横比。然后在您拍摄照片后 - 您需要对其进行裁剪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:49:48.030

我认为没有使用 MediaCapture 设置纵横比的 API，因此如果纵横比选择对您很重要，您可能需要考虑使用 CameraCaptureUI，尽管 CameraCaptureUI 会将源纵横比的选择留给用户（但是，如果用户选择裁剪原始捕获，您可以以编程方式控制裁剪图像的起始纵横比）。

查看以下示例：

[http://code.msdn.microsoft.com/windowsapps/CameraCaptureUI-Sample-845a53ac](http://code.msdn.microsoft.com/windowsapps/CameraCaptureUI-Sample-845a53ac)

它展示了如何使用 CameraCaptureUI 对象来设置裁剪的纵横比，我相信这是您可以通过编程实现的最佳效果。以下是相关代码：

```
CameraCaptureUI dialog = new CameraCaptureUI();
Size aspectRatio = new Size(16, 9);
dialog.PhotoSettings.CroppedAspectRatio = aspectRatio; 
```

您还可以限制用户可以选择的最大分辨率，但不能限制捕获纵横比。

当通过 CaptureFileAsync 调用 CameraCaptureUI 时，用户可以通过 Camera Options 按钮调整纵横比，如下所示：

![相机选项](../Images/47c654efb23b8dd9e0ad3e1b88e7d05f.png)

有关 Windows 应用商店应用开发的更多信息，请注册[Generation App](http://bit.ly/gd30tolaunch)。

# c# - 基于持续时间的城市和国家 asp.net

> ID：14978564
> 
> 赞同：0
> 
> 时间：2013-02-20T11:19:55.247
> 
> 标签：c#, asp.net

我想找出两个不同时区之间的持续时间。问题是，我只有两个日期时间的城市和国家。我在想，如果我能够获得基于城市和国家的时区，那么我将能够减去持续时间。

假设我列出了航班结果页面，其中包含出发日期时间和到达日期时间。

# android - 如何从android中的图库中获取选定的图像？

> ID：14978566
> 
> 赞同：1
> 
> 时间：2013-02-20T11:19:58.390
> 
> 标签：android

我有一个问题：我有一个功能可以从图库中获取图像；但是当我选择图像时，我没有得到它。

```
public void funzione(View v){
int SELECT_IMAGE=1;
Intent intent = new Intent();
intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(Intent.createChooser(intent, "Select Picture"),SELECT_IMAGE); 
```

我必须通过电子邮件发送这张图片，但我现在不知道如何实现：

```
Intent i = new Intent();
i.setType("application/octet-stream"); 
i.setAction(Intent.ACTION_SEND);
i.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{ "prova@libero.it" });
i.putExtra(android.content.Intent.EXTRA_SUBJECT, "Test subj");
i.putExtra(android.content.Intent.EXTRA_TEXT, "corpo mail test");
startActivity(Intent.createChooser(i, "Send email"));

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T11:28:39.393

在顶部的类声明之后声明全局变量：

```
 private static int RESULT_LOAD_IMAGE = 1;
 private static final int PICK_FROM_GALLERY = 2;
 Bitmap thumbnail = null; 
```

像这样调用意图：（您的 funizone() 函数）

```
 public void funzione(){
       Intent in = new   Intent(Intent.ACTION_PICK,android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                      startActivityForResult(in, RESULT_LOAD_IMAGE);

   } 
```

像这样处理结果：在类的任何地方的 onCreate 之外声明它。

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {  

    super.onActivityResult(requestCode, resultCode, data);     

     if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data){

         Uri selectedImage = data.getData();
            String[] filePathColumn = { MediaStore.Images.Media.DATA };
            Cursor cursor = getContentResolver().query(selectedImage,filePathColumn, null, null, null);
            cursor.moveToFirst();
            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String picturePath = cursor.getString(columnIndex);
            cursor.close();
            thumbnail = (BitmapFactory.decodeFile(picturePath)); 
```

缩略图是你的照片，现在玩吧！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-19T17:41:22.333

```
package com.example.assignment;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.graphics.BitmapFactory;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

private static int RESULT_LOAD_IMAGE = 1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button buttonLoadImage = (Button) findViewById(R.id.buttonLoadPicture);
    buttonLoadImage.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {

            Intent i = new Intent(
                    Intent.ACTION_PICK,
                    android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

            startActivityForResult(i, RESULT_LOAD_IMAGE);
        }
    });
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {
        Uri selectedImage = data.getData();
        String[] filePathColumn = { MediaStore.Images.Media.DATA };

        Cursor cursor = getContentResolver().query(selectedImage,
                filePathColumn, null, null, null);
        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        String picturePath = cursor.getString(columnIndex);
        cursor.close();

        ImageView imageView = (ImageView) findViewById(R.id.imgView);
        imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));
    }
    }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-12T18:51:13.733

**把这个放在行动监听器中，从哪里选择图像**

```
Intent i = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                startActivityForResult(i, 100); 
```

这第二个动作监听器

```
Intent i = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                    startActivityForResult(i, 200); 
```

从画廊返回后，结果通过请求代码 **这里代码是 100 和 200 **

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        if (requestCode == 100 && resultCode == RESULT_OK && data != null){
            Uri imageUri=data.getData();
            try {
                Bitmap bitmap = MediaStore.Images.Media.getBitmap(this.getContentResolver(), imageUri);
                reg_certificate.setImageBitmap(bitmap);

            } catch (IOException e) {
                e.printStackTrace();
            }

        }

        if(requestCode == 200 && resultCode == RESULT_OK && data !=null){
            Uri imageUri=data.getData();
            try {
                Bitmap bitmap= MediaStore.Images.Media.getBitmap(this.getContentResolver(),imageUri);
                org_logo.setImageBitmap(bitmap);

            } catch (IOException e) {
                e.printStackTrace();
            }

        }
    } 
```

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2013-02-20T11:30:38.687

**使用以下代码在应用程序中添加图像。**

```
public class MainActivity extends Activity {

@Override
         public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            ImageView image = (ImageView) findViewById(R.id.test_image);
            image.setImageResource(R.drawable.test2);
        }
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    /* Inflate the menu; this adds items to the action bar if it is present.*/
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

 } 
```

# forms - symfony2 form twig 输入值

> ID：14978567
> 
> 赞同：1
> 
> 时间：2013-02-20T11:20:03.460
> 
> 标签：forms, symfony, input, twig

我正在使用 symfony2 和 twig 制作表格，表格从 BDD 获取信息。我想根据一些信息自定义渲染。

如果我的数据通道为空，我想显示输入来设置它。如果我的数据不为空，我想显示一个显示数据的段落，以及一个用于修改值并显示输入的链接。

我尝试这样的事情：

```
{% if form_widget(session.chanson).attrvalue!='' %}
 <p>{{form_widget(session.chanson).attrvalue}} <a>modify</a></p>
{% else %}
 <p>{{ form_label(session.chanson,"Chanson : ") }}
 {{ form_errors(session.chanson) }}
 {{ form_widget(session.chanson) }}</p>
{% endif %} 
```

它不工作。我尝试使用 value 而不是 attrvalue，它也不起作用。这是 symfony 所说的：`Item "attrvalue" for "<input type="text" id="form_chanson" name="form[chanson]" required="required" value="La Rage" />" does not exist in CDUserBundle:Prof:edit_session.html.twig at line 19`

有人知道这个问题吗？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:51:09.613

您可以检查`app.session.chanson`变量是否为空，而不是使用：

```
{% if app.session.chanson %}
   <p>{{ app.session.chanson }} <a href="#">modify</a></p>
{% else %}
   <p>{{ form_label(app.session.chanson,"Chanson : ") }}
   {{ form_errors(app.session.chanson) }}
   {{ form_widget(app.session.chanson) }}</p>
{% endif %} 
```

然后，您需要在`modify`链接上插入所需的操作。

另请注意，如果您的对象`chanson`存储在会话中，则在 twig 模板中访问它的正确方法是使用该`app.session`对象。

# c# - 在 C# 中按类名作为字符串获取类属性

> ID：14978571
> 
> 赞同：1
> 
> 时间：2013-02-20T11:20:10.087
> 
> 标签：c#, reflection, .net-assembly

如果我将类名作为字符串，我可以获得类属性吗？我的实体在类库项目中，我尝试了不同的方法来获取类型和获取程序集，但我无法获取类实例。

```
var obj = (object)"User";
var type = obj.GetType();
System.Activator.CreateInstance(type);

object oform;
var clsName = System.Reflection.Assembly.GetExecutingAssembly().CreateInstance("[namespace].[formname]");

Type type = Type.GetType("BOEntities.User");
Object user = Activator.CreateInstance(type); 
```

没有任何工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T11:22:00.523

我怀疑你正在寻找：

```
Type type = Type.GetType("User");
Object user = Activator.CreateInstance(type); 
```

笔记：

*   这只会查看`mscorlib`当前正在执行的程序集，除非您还在名称中指定程序集
*   它需要是一个命名空间限定的名称，例如`MyProject.User`

编辑：要访问*不同*程序集中的类型，您可以使用程序集限定的类型名称，或者只使用`Assembly.GetType`，例如

```
Assembly libraryAssembly = typeof(SomeKnownTypeInLibrary).Assembly;
Type type = libraryAssembly.GetType("LibraryNamespace.User");
Object user = Activator.CreateInstance(type); 
```

（请注意，我没有解决获取*属性*的问题，因为您的问题中没有其他内容谈到这一点。但`Type.GetProperties`应该可以正常工作。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T11:22:19.743

> 如果我将类名作为字符串，我可以获得类属性吗？

当然：

```
var type = obj.GetType();
PropertyInfo[] properties = type.GetProperties(); 
```

这将获得公共实例属性的列表。如果您需要访问私有或静态属性，您可能需要指出：

```
var type = obj.GetType();
PropertyInfo[] properties = type.GetProperties(BindingFlags.NonPublic); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:23:35.037

尝试

```
Type type = Type.GetType("Assembly with namespace"); 
```

# python - 在 Python 中编写和读取相同的 csv 文件

> ID：14978575
> 
> 赞同：7
> 
> 时间：2013-02-20T11:20:20.590
> 
> 标签：python, csv, python-2.7

我们可以使用 csv 库在 Python 中写入（这里应该是编辑事实）并同时读取相同的 csv 文件吗？

可以打开 csv 文件进行编辑和附加吗？

如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:41:55.720

简短的回答：没有

* * *

长答案：这取决于

使用 CSV 编写器完全可以附加数据。`"a"`只需以附加模式打开文件：

```
with file("data.csv", "a" as fh:
    w = csvwriter(fh):
    w.writerow(...) 
```

编辑 CSV 文件并不是那么简单，因为您需要插入和删除文件的某些部分，除非您正在编辑的列是固定长度的。该`csv`模块没有为此的内置方法。

您可以打开原始文件，删除（或重命名原始文件）并打开一个具有相同名称的新文件：

```
with file("data.csv", "r") as rfh:
    os.remove("data.csv"):
    r = csvreader(rfh)
    with file("data.csv", "w") as wfh:
        w = csvwriter(wfh)
        # ... read from r and write to w 
```

在 Linux 下，原始文件将一直可供读取，直到它关闭为止，因此您无需事先重命名它。我对 Windows 不太熟悉，因此您可能需要在创建新文件之前重命名原始文件，并在关闭旧文件后删除旧文件。

* * *

另一个重要的一点：如果您的写入仅限于附加数据，您可以毫无困难地读取和写入同一个文件。

```
with file("data.csv", "r") as rfh, file("data.csv", "a") as wfh:
    r = csvreader(rfh)
    w = csvwriter(wfh)
    # you can read using r and append using w 
```

请注意 - 您的读者将能够阅读您刚刚使用 writer 编写的行。请注意不要陷入无限循环，导致文件**非常大**。

# ruby-on-rails - 使收集路线通用

> ID：14978576
> 
> 赞同：0
> 
> 时间：2013-02-20T11:20:24.100
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在一个项目中使用 Rails 3.2，我需要为所有控制器创建一个路由。

目前，路线是：

```
resources :people do
  collection do
    get 'search_for'
  end
end 
```

我需要对应用程序中的所有控制器执行“search_for”操作。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:23:09.820

你可以使用这条路线

```
match "/:controller/search_for" => redirect("/%{controller}/search_for") 
```

更新：上面的路由将不起作用，并且会导致重定向循环错误，因为它会导致 301 重定向到同一路由。解决方案是只使用

```
match "/:controller/search_for" 
```

请务必将此路由置于所有路由之上，以便执行 show 操作的路由不会像这样覆盖此路由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:16:20.947

简单地把它放在所有路线之上：

```
get ':controller/search_for' 
```

# xpages - 重复控件中的 RowSpan 和 colspan 表属性

> ID：14978579
> 
> 赞同：0
> 
> 时间：2013-02-20T11:20:38.897
> 
> 标签：xpages

我将表放在重复控件内，我需要`<xp:td>`使用 rowspan 和 colspan 属性构造标签，其中属性值动态变化。我无法找到解决方案，您能否建议我最好的解决方案。这是我的场景-

基本上，我需要根据开始日期和结束日期的选择每季度显示一个表格，其中行跨度发生变化。例如

开始日期：2013 年 2 月 1 日和结束日期：2013 年 12 月 30 日 -

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:56:11.170

在 a 的“所有属性”中，`<xp:td>`您可以找到 rowspan 和 colspan。这两个属性都可以计算。我建议您在使用某些参数调用的函数中进行计算，然后将其移交。您可能需要一个`requestScope`或`viewScope`对象来跟踪您的行/列跨度使用情况。使用 JSON，让事情变得更容易。

Hth

# php - 在 magento 中实现外部反馈表

> ID：14978583
> 
> 赞同：0
> 
> 时间：2013-02-20T11:21:03.637
> 
> 标签：php, magento, user-feedback

我必须实现一些反馈客户代码才能注册到他们的商店数据库中。代码是：

```
try {
$Client = new TrustedShop('key'); 
$Client->SetEmail();
$Client->AddProduct('Name of first purchased product');
$Client->AddProduct('Name of second purchased product');
$Client->Send(); 
```

很好很简单。

逻辑是，几天后，他们会向我的客户发送反馈，询问他们在商店的购物体验。

我目前已将其嵌入`/public_html/app/design/frontend/base/default/template/persistent/checkout/onepage/billing.phtml`

与`$Client->SetEmail($this->getAddress()->getEmail());`

这里没有问题，但是（还有一个很大的问题:)）我如何在计费 phtml 中检索客户订购的 sku？如果订购的商品包含 2 或 10 个 sku，我如何将它们发送给我的合作伙伴？

这是实现代码的正确路径，还是在 magento 中有更好的位置，我可以在其中检索客户电子邮件和订购的 skus？

PS对不起，如果这是一个愚蠢的简单问题，新手在这里踩油门:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:51:17.113

编辑：

“肮脏的黑客”解决方案：

在`billing.phtml`尚未下订单时，客户可以退后一步并退出购物。插入逻辑不是好点。相反，请使用`checkout/success.phtml`hack 模板。您可以在那里执行以下操作：

```
<?php 
$order = Mage::getModel('sales/order')->loadByIncrementId($this->getOrderId());
Mage::log($order->getCustomerEmail());
Mage::log($order->getCustomerFirstname());
Mage::log($order->getCustomerLastname());
foreach ($order->getAllVisibleItems() as $item) {
Mage::log($item->getSku());
};
?> 
```

就是这样，您拥有实现自定义逻辑的所有数据。

推荐的解决方案从这里开始：

据我了解，您必须将订购产品的名称或 SKU 通过客户的电子邮件发送给外部客户。Magento 有一个事件驱动的架构，所以在这样的问题中，最好创建一个观察者来捕获事件。[（链接到“如何创建观察者”）](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)您的案例中的事件是“sales_order_place_after”。为此，您需要在模块的配置中，例如。应用程序/代码/本地/您的/模块/etc/config.xml：

```
<events>
    <sales_order_place_after>
        <observers>
            <any_unique_name_of_your_observer>
                <type>singleton</type>
                <class>yourclass/observer</class>
                <method>sendOrderInfo</method>
            </any_unique_name_of_your_observer>
        </observers>
    </sales_order_place_after>
</events> 
```

在你的 Observer 中，它是 app/code/local/YOUR/MODULE/Model/Observer.php：

```
class YOUR_MODULE_Model_Observer extends Mage_Core_Model_Observer
{
public function sendOrderInfo($observer)
{
#get the order
$order = $observer->getEvent()->getOrder();

Mage::log($order->getBillingAddress());
Mage::log($order->getShippingAddress())
Mage::log($order->getCustomerEmail());
Mage::log($order->getCustomerFirstname());
Mage::log($order->getCustomerLastname());
foreach ($order->getAllVisibleItems() as $item) {
    $sku = $item->getSku();
... 
```

这是一个如何检索所需数据的示例，然后您可以在 Observer 的方法中实现您的自定义逻辑。

编辑：获取`sku`订购商品的更详细示例

# android - 如何通过 Fragment 回调到详细信息活动来避免代码重复？

> ID：14978584
> 
> 赞同：3
> 
> 时间：2013-02-20T11:21:05.567
> 
> 标签：android, android-fragments, code-duplication

我正在使用主/细节模式，其中一个活动管理 2 窗格视图和选择器列表，另一个活动管理细节片段。我正在使用一个接口来处理对活动的片段回调。

尽管细节活动从 2 窗格活动中复制了许多回调方法，但似乎有很多代码重复。在适当的情况下，我使用了不需要上下文的静态方法，但在需要上下文的地方，我不确定如何巧妙地删除代码重复。

使用抽象父 Activity 继承是一种选择，但似乎开销很大。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:08:29.733

因此，假设您有控制 Frag A 和 Fragment B 的 Activity AB。
我的答案：
如果 Frag A 和 Frag B 使用该变量，请将其放在 Activity AB 中。然后将其传递给 Frag A 或 Frag B 他们需要的一切。或者让 Frag A 或 Frag B 从 Activity AB 中检索它。如果该变量仅被 Frag A 或 Frag B 使用，则将其分别放在 Frag A 或 Frag B 中。

对于 Frag A 和 Frag B 都使用的方法，将这些方法放在另一个类中，并在 Frag A 和 Frag B 中为要使用的 2 个片段中的每一个创建该类的实例。

以下是我给另一个人的答案。但是，这似乎与您的问题有关，因此我在此处重新发布。
在 Fragment A 内部，您需要一个 Activity AB 可以实现的接口。在示例 android 代码中，它们具有：

`private Callbacks mCallbacks = sDummyCallbacks;`

/*包含此片段的所有活动都必须实现的回调接口。此机制允许将项目选择通知活动。*/

```
public interface Callbacks {
/*Callback for when an item has been selected. */    
      public void onItemSelected(String id);
}

/*A dummy implementation of the {@link Callbacks} interface that does nothing. Used only when this fragment is not attached to an activity. */    
private static Callbacks sDummyCallbacks = new Callbacks() {
    @Override
    public void onItemSelected(String id) {
    }
}; 
```

回调接口放在您的一个片段（假设片段 A）中。我认为这个 Callbacks 接口的目的就像 Frag A 中的一个嵌套类，任何 Activity 都可以实现。因此，如果 Fragment A 是电视，则 CallBacks 是允许 Activity AB 使用 Fragment A 的 TV Remote（接口）。我可能对细节有误，因为我是菜鸟，但我确实让我的程序在所有屏幕尺寸上都能完美运行，这就是我使用的。

所以在片段 A 中，我们有：（我从 Android 的示例程序中获取了这个）

```
@Override
public void onListItemClick(ListView listView, View view, int position, long id) {
super.onListItemClick(listView, view, position, id);
// Notify the active callbacks interface (the activity, if the
// fragment is attached to one) that an item has been selected.
mCallbacks.onItemSelected(DummyContent.ITEMS.get(position).id);
//mCallbacks.onItemSelected( PUT YOUR SHIT HERE. int, String, etc.);
//mCallbacks.onItemSelected (Object);
} 
```

在 Activity AB 中，我们覆盖了 onItemSelected 方法：

```
public class AB extends FragmentActivity implements ItemListFragment.Callbacks {
//...
@Override
//public void onItemSelected (CATCH YOUR SHIT HERE) {
//public void onItemSelected (Object obj) {
    public void onItemSelected(String id) {
    //Pass Data to Fragment B. For example:
    Bundle arguments = new Bundle();
    arguments.putString(“FragmentB_package”, id);
    FragmentB fragment = new FragmentB();
    fragment.setArguments(arguments);
    getSupportFragmentManager().beginTransaction().replace(R.id.item_detail_container, fragment).commit();
    } 
```

因此，在 Activity AB 中，您基本上将所有内容都放入 Bundle 中并将其传递给 B。如果您不确定如何使用 Bundle，请查看该类。

我基本上是通过 Android 提供的示例代码。带有 DummyContent 内容的那个。当你制作一个新的 Android 应用程序包时，它的标题是 MasterDetailFlow。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:33:01.567

我在这里问了一个类似的问题：[多少活动与片段？](https://stackoverflow.com/questions/12363790/how-many-activities-vs-fragments)

我也担心逻辑的重复，我得到的答案引起了相当健康的辩论。

* * *

最后，我选择遵循[斯蒂芬的回答](https://stackoverflow.com/a/12528434/383414)，将尽可能多的逻辑放入`Fragments`自身中。

然而，其他贡献者似乎非常热衷于按照示例复制逻辑。

# c# - 未捕获 HttpWebRequest.GetRequestStream 引发的 System.Net.WebException

> ID：14978597
> 
> 赞同：1
> 
> 时间：2013-02-20T11:21:52.583
> 
> 标签：c#, exception, httpwebrequest, webexception

我正在创建一个简单的（控制台）应用程序来使用带有 C# 的 HTTP 请求来远程控制视频设备（编码器）。我需要向设备发送 XML 数据，设备通过发送 XML 数据进行响应。

我用来执行此请求的代码如下： http: [//pastebin.com/59CXR3m9](http://pastebin.com/59CXR3m9)

当我尝试测试此代码时，会创建请求并写入流。我可以按预期看到`"stream created"`标志，但是，没有任何反应。即使我使用特定的低超时（例如 5 秒），应用程序似乎也卡住了。

为了解决这个问题，我激活了`System.Net`跟踪记录。我发现 a `WebException`is throwed by `GetRequestStream`，但出于一个原因，我的代码**中没有捕获**到这个异常。`try/catch`这是一个例外：

`System.Net Error: 0 : [1344] Exception in the HttpWebRequest#44223604:: - The underlying connection was closed: The connection was closed unexpectedly.`

我可以按需发送完整的跟踪。

我还对调用堆栈进行了另一次跟踪，显示异常是由以下原因引发的`GetRequestStream`： http: [//pastebin.com/vE5QZGBe](http://pastebin.com/vE5QZGBe)

我用另一台设备测试了这段代码，它运行良好，所以这*也*与设备相关，但我看不出有什么理由不会捕获该异常。由于这可能是生产环境，代码必须能够正确处理（而不是无休止地等待响应）。

有人已经有这种行为了吗？任何建议都非常感谢:)

谢谢！

仅供参考：如果有帮助，我也有成功请求的痕迹

# delphi - 如何使用 Synapse for Delphi 中止 SMTP 发送操作？

> ID：14978600
> 
> 赞同：5
> 
> 时间：2013-02-20T11:22:00.260
> 
> 标签：delphi, email

目前我正在测试 Ararat Synapse 在 Delphi 中发送电子邮件。

本地函数创建 TSMTPSend 并发送电子邮件。
*如何中止此操作？* 我设置了一个分配给 SMTP.Sock.OnStatus 的回调函数来执行一些状态输出。
当我想中止发送进度时，我想我可以在回调函数中使用 TSMTPSend 的 TTCPBlockSocket，因为在这个函数中我无法直接访问 TSMTPSend。

我想做的看起来基本上像

```
MyCallBack(Sender: TObject; Reason: THookSocketReason; const Value: string);
begin
  if FCancelWasClicked then
  begin
    if Sender is TTCPBlockSocket then
      TTCPBlockSocket(Sender).StopFlag := True;
      // or TTCPBlockSocket(Sender).AbortSocket or CloseSocket
  end;
end; 
```

但是 StopFlag 没有显示任何效果，并且 AbortSocket/ CloseSocket 会导致 StackOverFlow，因为套接字将无休止地发送 HR_CloseSocket 消息。

我做错了吗？还有其他选择吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T11:50:56.733

Synapse 提供了一个心跳函数，它允许实现 Cancel 行为。

[http://www.ararat.cz/synapse/doku.php/public:howto:heartbeat](http://www.ararat.cz/synapse/doku.php/public:howto:heartbeat)

处理 OnHeartbeat 事件，将 HeartbeatRate 属性设置为心跳之间的间隔，并设置 StopFlag 以取消操作。

# python - 将目录路径与python中的值匹配

> ID：14978603
> 
> 赞同：1
> 
> 时间：2013-02-20T11:22:07.627
> 
> 标签：python

我有这段代码，我在其中搜索一个值（inputCategory），该值通常位于路径的末尾（例如`/blah/blah/<category/blah`，有时`/blah/blah/<category>`

```
def category_search(inputDirectory, inputCategory, root):
    categorySearch = os.path.split(os.path.normpath(inputDirectory)) 
    if categorySearch[1] == inputName:
        Logger.info("SEARCH: Files appear to be in their own directory")
        categorySearch2 = os.path.split(os.path.normpath(categorySearch[0]))
        if categorySearch2[1] == twoCategory or categorySearch2[1] == oneCategory:
            if not inputCategory:
            Logger.info("SEARCH: Determined Category to be: %s", categorySearch2[1])
                inputCategory = categorySearch2[1]
        elif not inputCategory:
            Logger.error("SEARCH: Could not identify category from the directory structure.")
            sys.exit(-1)
        else:
            pass

    elif categorySearch[1] == twoCategory or categorySearch[1] == oneCategory:
        if os.path.isdir(os.path.join(inputDirectory, inputName)):
            inputDirectory = os.path.join(inputDirectory, inputName)
        else:
            Logger.info("SEARCH: The directory passed is the root directory for category %s", categorySearch[1])
            Logger.info("SEARCH: We will try and determine which files to process, individually")
            root = 1
        if not inputCategory:
            Logger.info("SEARCH: Determined Category to be: %s", categorySearch[1])
            inputCategory = categorySearch[1]
    elif not inputCategory:
        Logger.error("SEARCH: Could not identify category from the directory structure")
        sys.exit(-1)
    else:
        Logger.info("SEARCH: The directory passed does not appear to include a category")
        root = 1
    return inputDirectory, inputCategory, root 
```

但问题是代码不是很动态，例如，如果我得到类似的路径`/blah/blah/<category>/blah/blah`

我正在寻找有关如何优化此代码、捕获上述情况以及可能更多的输入？

我是python的新手，所以要温柔:)谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:53:57.557

我用这样的东西进行路径检查，但不确定它是否是你要找的……我在 python 中也很绿色！

```
# deconstruct the folder: /a/b/c --> /a/b --> /a --> /
pathHead, pathTail = os.path.split(inputDirectory)  
while pathTail and ( pathTail != inputCategory ): 
    pathHead,pathTail = os.path.split(pathHead)

if not pathTail:
    print 'didnt find category'
else:
    print 'found category: ',pathTail , ' in path: ' , pathHead 
```

编辑：将 elif 固定为 else ...

# javascript - Sencha Touch - NavigationView 中的 NestedList

> ID：14978609
> 
> 赞同：0
> 
> 时间：2013-02-20T11:22:18.680
> 
> 标签：javascript, html, sencha-touch, sencha-touch-2, toolbar

我的整个应用程序都在`NavigationView`处理不同屏幕之间的导航的内部。在主屏幕中，我有一个打开一个按钮`NestedList`（始终在 NavigationView 内）

![NavigationView 内的 NestedList](../Images/62c3c2d5367d0ac65bac7ca30c578c2b.png)

如何删除**NestedList 工具栏**，并能够使用主**NavigationView 工具栏**来处理导航？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:19:40.437

要使导航视图的后退按钮表现得像嵌套列表的后退按钮，您需要覆盖导航视图的后退按钮点击事件。为此，请按照我对类似问题的回答，[如何覆盖导航视图上的后退按钮](https://stackoverflow.com/a/14860869/1211980)。

完成此操作后，您需要每次确定当前显示的是哪个视图。如果它是嵌套列表以外的普通视图，您可以简单地弹出该视图。

但如果它是一个嵌套列表，那么 -

1.  你必须找到它的水平。我的意思是你现在处于哪个水平。
2.  从列表中找到它的父项。
3.  加载该视图。

但是做所有这些都需要大量的努力和时间。相反，您可以将嵌套列表的[工具栏配置](http://docs.sencha.com/touch/2-1/#!/api/Ext.dataview.NestedList-cfg-toolbar)放在底部，并在不同位置放置两个单独的后退按钮。嵌套列表的后退按钮将始终使用`text`或`displayField`配置为应用于它的文本，并且`back`导航视图的按钮将具有一些其他文本。

我做了小提琴来展示它的外观。如果可能，您可能也需要考虑这一点。[见演示小提琴](http://www.senchafiddle.com/#3e2It)

**更新**

如果你仍然想去你提到的问题。这是另一种方式..

不要在导航视图中推送嵌套列表视图。使用嵌套列表本身并尝试仅在第一级将**后退**按钮和其他按钮添加到顶部的工具栏。然后深入后，您将自动获得**返回**按钮。从第一级开始，编写自定义处理程序，该处理程序将弹出嵌套列表，即当前视图并加载前一个视图。如果你愿意，我会在业余时间帮助你解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:07:48.510

试试这个代码：

```
yourNestedList.getToolbar().hide(); 
```

例如在`onShow()`您的嵌套列表/视图中。

在文档中，您可以看到可用于嵌套列表的方法列表：

[http://docs.sencha.com/touch/2-1/#!/api/Ext.dataview.NestedList](http://docs.sencha.com/touch/2-1/#!/api/Ext.dataview.NestedList)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T21:07:01.707

您也可以将其用作嵌套列表中的配置：

```
useToolbar: false 
```

# c# - 使用 SKYPE4COM 获取个人资料图片

> ID：14978612
> 
> 赞同：3
> 
> 时间：2013-02-20T11:22:27.160
> 
> 标签：c#, c#-4.0, skype, skype4com

这是否可以在图片框控件中显示我的个人资料图片以及我的朋友的个人资料图片？我正在使用 c# 和 SKYPE4COM。有什么建议么..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:20:57.167

尝试使用[命令](http://dev.skype.com/desktop-api-reference#COMMANDS)：

```
var cmd = new SKYPE4COMLib.Command();
cmd.Command = string.Format("GET USER {0} AVATAR 1 {1}", userHandle, rootedPathFileName);
var skype = new SKYPE4COMLib.Skype();
skype.SendCommand(cmd); 
```

有关详细信息，请参阅[此链接](http://community.skype.com/t5/Windows-desktop-client/how-to-get-the-profile-picture-of-users-using-skype4com-api-with/td-p/444063)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-10T15:23:58.330

对于个人资料图片添加 url 或按钮单击并将用户名放在文本框中其简单..!!

```
profilePictureUrl = "http://api.skype.com/users/" 
                       + textBox2.Text + "/profile/avatar";
pictureBox1.ImageLocation = profilePictureUrl; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T09:19:41.053

查看[GET USER AVATAR 命令](http://dev.skype.com/desktop-api-reference#COMMAND_GET_USER_AVATAR)，它允许您保存图像。

然后，您可以将图片框指向图像文件。

[可以在此处找到](http://devforum.skype.com/t5/Desktop-API/Skype4COM-What-is-it-and-what-can-it-do/m-p/8155)有关如何使用 Skype4COM 执行命令的信息

# java - MySQL连接和休眠c3p0设置，8小时后超时？

> ID：14978617
> 
> 赞同：6
> 
> 时间：2013-02-20T11:22:55.247
> 
> 标签：java, mysql, hibernate, c3p0

我正在使用 Amazon EC2 运行我的 Java Wicket 应用程序，并且我正在为该应用程序运行 Amazon MySQL 实例。一切正常，但 8 小时后我的数据库连接丢失。我试图配置 c3p0 设置，这样就不会发生这种情况。我也尝试过更新 MySQL 设置，但没有帮助。

这是我的 persitence.xml

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<persistence xmlns="xyz">
<persistence-unit name="mysqldb-ds" transaction-type="RESOURCE_LOCAL">

  <description>Persistence Unit</description>
  <provider>org.hibernate.ejb.HibernatePersistence</provider>

  <properties>
    <property name="hibernate.hbm2ddl.auto" value="update"/>
    <property name="hibernate.show_sql" value="true"/>
    <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
    <property name="hibernate.connection.username" value="XXXXX"/>
    <property name="hibernate.connection.password" value="YYYYY"/>
    <property name="hibernate.connection.url" value="jdbc:mysql://xxxx.yyyyy.us-east-1.rds.amazonaws.com:3306/paaluttaja"/>
    <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
    <property name="connection.pool_size" value="1" />
    <property name="cache.provider_class" value="org.hibernate.cache.NoCacheProvider" />
    <property name="hibernate.c3p0.min_size" value="5" />
    <property name="hibernate.c3p0.max_size" value="20" />
    <property name="hibernate.c3p0.timeout" value="300" />
    <property name="hibernate.c3p0.max_statements" value="50" />
    <property name="hibernate.c3p0.idle_test_period" value="3000" />
  </properties>

</persistence-unit>
</persistence> 
```

我正在做这样的查询：

```
@Service
public class LoginServiceImpl implements LoginService{

@Override
public Customer login(String username, String password) throws LSGeneralException {
    EntityManager em = EntityManagerUtil.getEm();

    TypedQuery<Customer> query = em.createQuery("SELECT c FROM Customer c "
            + "WHERE c.username = '" + username + "' "
            + "AND c.password = '" + password + "'", Customer.class);

    Customer customer = null;

    try {
        customer = (Customer) query.getSingleResult();
    }catch(Exception e){
        if(e instanceof NoResultException){
            throw new LSGeneralException("login.failed.wrong.credentials", e);
        }else{
            throw new LSGeneralException("failure", e);
        }
    }

    customer.setLogged(true);

    return customer;

}

} 
```

所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:13:24.253

首先，您可能想检查您的日志以了解 c3p0 的配置转储；您的 5 分钟超时应该可以防止 MySQL 连接在 8 小时后过时，但由于某种原因，您似乎不会发生这种情况。您想查看 c3p0 属性 'maxIdleTime' 是否按预期实际为 300。无论如何，您可以尝试添加

```
hibernate.c3p0.preferredTestQuery=SELECT 1
hibernate.c3p0.testConnectionOnCheckout=true 
```

这是确保连接有效性的最简单方法——在每次结帐时测试它们（使用有效的查询）。它也相对昂贵；如果你发现这是一个问题，你可以去一些更精明的东西。但是最好确保您可以获得可靠的设置，然后从那里进行优化。[见这里](http://www.mchange.com/projects/c3p0/#configuring_connection_testing)。

请注意`hibernate.c3p0.idle_test_period=3000`，如果您的池配置为您认为的那样，那么您的没有用。空闲连接将在 3000 秒测试间隔过去很久之前超时。

# python - lxml 和 cssselect 如何获取文本

> ID：14978619
> 
> 赞同：1
> 
> 时间：2013-02-20T11:23:03.103
> 
> 标签：python, css-selectors, lxml

例子：

```
html='<div class="a"><input type="text" value="bla bla bla">some text</div>'
import lxml.html
doc = lxml.html.document_fromstring(html)
a=doc.cssselect("div.a")
print a[0].text 
```

这个打印空字符串......我如何得到“一些文本”？

# vb.net - 捕获 Datagridview 单元格按住事件

> ID：14978620
> 
> 赞同：3
> 
> 时间：2013-02-20T11:23:05.077
> 
> 标签：vb.net

任何人都可以给我代码示例如何捕获 datagridview 单元格按键事件吗？Datagridview_keypress 没有帮助。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-17T02:21:28.543

根据 Fco Navarro 的回答，除了 using`e.Control`并不总是有效，因为`e`传递给`EditingControlShowing`事件`ByVal`意味着对控件的任何更改（例如更改`.Text`属性）都不会反映在 DataGridView 中。如果您需要对事件处理程序中的实际 TextBox 控件执行任何操作，可以`DataGridView1.EditingControl`使用`e.Control`.

```
Private WithEvents txtNumeric As New DataGridViewTextBoxEditingControl

Private Sub DataGridView1_EditingControlShowing(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewEditingControlShowingEventArgs) Handles DataGridView1.EditingControlShowing
    txtNumeric = CType(DataGridView1.EditingControl, DataGridViewTextBoxEditingControl)
End Sub

Private Sub txtNumeric_KeyPress(ByVal sender As Object, ByVal e As KeyPressEventArgs) Handles txtNumeric.KeyPress
    txtNumeric.Text = txtNumeric.Text.ToUpper()
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-24T17:20:43.043

```
Private WithEvents txtNumeric As New DataGridViewTextBoxEditingControl

Private Sub DataGridView1_EditingControlShowing(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewEditingControlShowingEventArgs) Handles DataGridView1.EditingControlShowing
    txtNumeric = CType(e.Control, DataGridViewTextBoxEditingControl)
End Sub

Private Sub txtNumeric_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles txtNumeric.KeyDown
    If (e.KeyData >= Keys.A And e.KeyData <= Keys.Z) Then
        e.SuppressKeyPress = True
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T11:29:35.100

尝试这个：

```
Private Sub DataGridView1_EditingControlShowing(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewEditingControlShowingEventArgs) 处理 DataGridView1.EditingControlShowing

    如果 Me.DataGridView1.CurrentCell.ColumnIndex = 0 而不是 e.Control 什么都不是，那么
        Dim tb As TextBox = CType(e.Control, TextBox)
        AddHandler tb.KeyDown, AddressOf TextBox_KeyDown
        AddHandler tb.KeyPress, AddressOf TextBox_KeyPress
    万一

结束子

Private Sub TextBox_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs)
    如果 e.KeyCode = Keys.Space 那么
        标志 = 真
    万一
结束子

Private Sub TextBox_KeyPress(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyPressEventArgs)
    e.Handled = 标志
    标志 = 假
结束子

```

[从这里](http://www.coderewind.com/article/handling-keypress-and-keydown-events-for-datagridview/)提取。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-06T16:55:43.973

我使用 KeyUp 事件而不是 KeyPress。诀窍是当单元格处于活动状态时，将处理程序事件附加到表单的 ActiveControl 属性。

```
Private Sub grid_CellBeginEdit(sender As Object, e As DataGridViewCellCancelEventArgs) Handles grid.CellBeginEdit
    AddHandler Me.ActiveControl.KeyUp, AddressOf Cell_KeyUp
End Sub

Private Sub Cell_KeyUp(sender As Object, e As KeyEventArgs)
    Console.WriteLine(sender.Text) 'content of cell
End Sub 
```

如果您还想使用 RemoveHandler 方法，您可以在类中添加一个全局变量（使用这个变量而不是 Me.ActiveControl），并在 DataGridView 的 CellEndEdit 事件中调用 RemoveHandler，例如。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T11:33:46.487

如果您在 asp.net（网站）中使用您的 gridview 是不可能的。没有按键事件。确实有可能，但您必须使用 JavaScript 对每个 keychanged（客户端）进行回发。但这不是一种好的编程风格，不应该使用（你会收到很多回发，这会减慢整个系统的速度）。

如果您使用 Windows 表单：请查看 sysdragon 的答案。

希望这个对你有帮助。

最好的问候，没有人

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-19T19:39:22.247

以下代码完美运行：

```
Private WithEvents txtmontant As DataGridViewTextBoxEditingControl
Private Sub DGdivers_EditingControlShowing(sender As Object, e As DataGridViewEditingControlShowingEventArgs) Handles DGdivers.EditingControlShowing
    If DGdivers.CurrentCell.ColumnIndex = 1 Then
        Dim txtmontant = CType(e.Control, DataGridViewTextBoxEditingControl)
        AddHandler txtmontant.KeyPress, AddressOf txtmontant_keypress
    Else
        RemoveHandler txtmontant.KeyPress, AddressOf txtmontant_keypress
    End If

End Sub

Private Sub txtmontant_keypress(sender As Object, e As KeyPressEventArgs) Handles txtmontant.KeyPress
    If e.KeyChar = vbCr Then
        DGdivers.Rows.Add()
        Exit Sub
    End If
    If e.KeyChar = vbBack Then
        Exit Sub
    End If
    If InStr("0123456789.,", e.KeyChar) = 0 Then
        e.KeyChar = ""
    End If
End Sub 
```

# javascript - 正则表达式检查字符串是否以开头，忽略大小写差异

> ID：14978625
> 
> 赞同：45
> 
> 时间：2013-02-20T11:23:21.123
> 
> 标签：javascript, regex

我需要检查一个单词是否以忽略大小写差异的特定子字符串开头。我一直在使用以下正则表达式搜索模式进行此检查，但是当字符串之间的大小写存在差异时，这无济于事。

我区分大小写的方式：

```
var searchPattern = new RegExp('^' + query);
if (searchPattern.test(stringToCheck)) {} 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-02-20T11:24:39.980

`i`将修饰符作为第二个参数传递：

```
new RegExp('^' + query, 'i'); 
```

查看[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)以获取更多信息。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-20T11:30:22.410

您根本不需要正则表达式，只需比较字符串：

```
if (stringToCheck.substr(0, query.length).toUpperCase() == query.toUpperCase()) 
```

演示：http: [//jsfiddle.net/Guffa/AMD7V/](http://jsfiddle.net/Guffa/AMD7V/)

这还可以处理您需要转义字符以使 RegExp 解决方案工作的情况，例如，如果`query="4*5?"`它总是匹配其他所有内容。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-12-22T01:49:16.577

我认为所有先前的答案都是正确的。这是另一个类似于 SERPRO 的示例，但不同之处在于没有新的构造函数：

**注意：** `i`忽略大小写并`^`表示“以”开头。

```
 var whateverString = "My test String";
 var pattern = /^my/i;
 var result = pattern.test(whateverString);
 if (result === true) {
     console.log(pattern, "pattern matched!");
 } else {
     console.log(pattern, "pattern did NOT match!");
 } 
```

如果您想尝试一下，这里是[jsfiddle （旧版本）。](https://jsfiddle.net/ywu0bhhb/)

[![在此处输入图像描述](../Images/a0c9640e42fa87affe9bb3b3c56dc9ef.png)](https://i.stack.imgur.com/16IsZ.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-20T11:25:30.217

在此[页面](http://www.javascriptkit.com/javatutors/redev.shtml)中，您可以看到修饰符可以作为第二个参数添加。在您的情况下，您正在寻找“我”（Canse 不敏感）

```
//Syntax
var patt=new RegExp(pattern,modifiers);

//or more simply:

var patt=/pattern/modifiers; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-19T08:28:41.203

对于此类情况，JS Regex 提供了一个名为“标志”的功能。它们在使正则表达式更有效和更广泛适用方面提供了额外的帮助。

在这里，可以使用的标志是“i”标志，它忽略大小写（大写和小写），并且不考虑它们（大小写）进行匹配。

字面符号：

```
let string = 'PowerRangers'
let regex = /powerrangers/i
let result = regex.test(string) // true 
```

使用 JS 'RegExp' 构造函数：

```
let string = 'PowerRangers'
let regex = new RegExp('powerrangers', 'i')
let result = regex.test(string) 
```

# jquery - 如何在全日历中使过去的日期无法选择？

> ID：14978629
> 
> 赞同：29
> 
> 时间：2013-02-20T11:23:30.840
> 
> 标签：jquery, date, fullcalendar

问题是，如何在 fullcalendar 的月/周视图中禁用 PAST DATES 的可选项。

我希望用户不允许单击/选择过去的日期。

![在此处输入图像描述](../Images/824b3786480f717fd6f950dab43fd75b.png)

**这是我试图在事件渲染上实现的一些谷歌代码片段：**

```
selectable: true,
selectHelper: false,
select: function(start, end, allDay) {
        var appdate = jQuery.datepicker.formatDate('<?php echo $DPFormat; ?>', new Date(start));
        jQuery('#appdate').val(appdate);
        jQuery('#AppFirstModal').show();
    },
    eventRender: function(event, element, view)
    {
        var view = 'month' ;
       if(event.start.getMonth() !== view.start.getMonth()) { return false; }
    }, 
```

但它不起作用。

我也尝试了下面的 CSS，这有助于我只隐藏过去的日期文本，但可选择的仍然适用于过去的日期框。

```
.fc-other-month .fc-day-number {
     display:none;
} 
```

我真的被这个问题困住了。请有人帮助我。谢谢...

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-21T23:15:59.177

我已经在我的完整日历中完成了这项工作，并且运行良好。

您可以在您的选择功能中添加此代码。

```
 select: function(start, end, allDay) {
    var check = $.fullCalendar.formatDate(start,'yyyy-MM-dd');
    var today = $.fullCalendar.formatDate(new Date(),'yyyy-MM-dd');
    if(check < today)
    {
        // Previous Day. show message if you want otherwise do nothing.
        // So it will be unselectable
    }
    else
    {
        // Its a right date
        // Do something
    }
  }, 
```

我希望它会帮助你。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2016-04-26T18:39:11.447

我喜欢这种方法：

```
select: function(start, end) {
    if(start.isBefore(moment())) {
        $('#calendar').fullCalendar('unselect');
        return false;
    }
} 
```

它基本上会在“现在”之前的时间禁用选择。

[取消选择方法](https://fullcalendar.io/docs/selection/unselect_method/)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-01-30T12:45:36.927

感谢[这个答案](https://stackoverflow.com/a/35011150/1214902)，我找到了以下解决方案：

```
$('#full-calendar').fullCalendar({
    selectable: true,
    selectConstraint: {
        start: $.fullCalendar.moment().subtract(1, 'days'),
        end: $.fullCalendar.moment().startOf('month').add(1, 'month')
    }
}); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-08-07T20:27:47.047

在 FullCalendar v3.0 中，有属性[selectAllow](https://fullcalendar.io/docs/selectAllow)：

```
selectAllow: function(info) {
    if (info.start.isBefore(moment()))
        return false;
    return true;          
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-11-08T16:39:46.247

我试过这种方法，效果很好。

```
$('#calendar').fullCalendar({
   defaultView: 'month',
   selectable: true,
   selectAllow: function(select) {
      return moment().diff(select.start, 'days') <= 0
   }
}) 
```

享受！

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-02-21T09:18:36.363

您可以组合：

- 如问题所述，通过 CSS 隐藏文本

-[在当前月份禁用 PREV 按钮](http://www.theantichris.com/2013/01/disable-previous-month-navigation-in-fullcalendar/)

- 检查 dayClick/eventDrop 等日期：

```
dayClick: function(date, allDay, jsEvent, view) {
    var now = new Date();
    if (date.setHours(0,0,0,0) < now.setHours(0,0,0,0)){
        alert('test');
    }
    else{
         //do something
    }
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-10-14T11:42:16.090

这个问题的旧答案是好的......

但是，官方文档提出了一个新的、更简洁的解决方案：

首先设置您想要成为下限的日期

```
 var today = new Date().toISOString().slice(0,10); 
```

然后使用 包含范围`validRange`。简单地省略`end`日期。

```
 validRange: {
    start: today
 } 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-05-21T07:33:56.483

在 fullcalendar 3.9 中，您可能更喜欢[`validRange function parameter`](https://fullcalendar.io/docs/validRange)：

```
validRange: function(nowDate){
    return {start: nowDate} //to prevent anterior dates
}, 
```

缺点：这也隐藏了该日期时间之前的事件

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-11-23T20:33:34.953

以下是我现在使用的解决方案：

```
 select: function(start, end, jsEvent, view) {
            if (moment().diff(start, 'days') > 0) {
                $('#calendar').fullCalendar('unselect');
                // or display some sort of alert
                return false;
            } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-08-13T16:06:00.640

不需要很长的程序，试试这个。

```
checkout.setMinSelectableDate(Calendar.getInstance().getTime());    
Calendar.getInstance().getTime() 
```

给我们当前日期。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-06-26T15:02:34.593

这是我目前正在使用的

还添加了 .add() 函数，因此用户无法在同一时间添加事件

```
select: function(start, end, jsEvent, view) {
               if(end.isBefore(moment().add(1,'hour').format())) {
               $('#calendar').fullCalendar('unselect');
               return false;
             } 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-06-27T08:58:22.623

你可以使用这个：

```
var start_date= $.fullCalendar.formatDate(start,'YYYY-MM-DD');

var today_date = moment().format('YYYY-MM-DD');

if(check < today)
{
    alert("Back date event not allowed ");
    $('#calendar').fullCalendar('unselect');
    return false
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-07-28T12:22:13.777

我一直在使用`validRange`选项。

`validRange: { start: Date.now(), end: Date.now() + (7776000) // sets end dynamically to 90 days after now (86400*90) }`

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-10-26T06:31:17.637

在 Fullcalendar 中，我通过 dayClick 事件实现了它。我认为这是简单的方法。

这是我的代码..

```
 dayClick: function (date, cell) {
              var current_date = moment().format('YYYY-MM-DD')
              // date.format() returns selected date from fullcalendar
              if(current_date <= date.format()) {
                //your code
              }
            } 
```

希望它有助于过去和未来的日期将无法选择..

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-04-18T10:03:02.453

如果任何一个答案不适合你，请试试这个，我希望它对你有用。

```
 select: function(start, end, allDay) {                

              var check = formatDate(start.startStr);
              var today = formatDate(new Date());

              if(check < today)
              {
                 console.log('past');                     
              }
              else
              {                    
                console.log('future');
              }
} 
```

并为日期格式创建函数，如下所示

```
function formatDate(date) {
      var d = new Date(date),
          month = '' + (d.getMonth() + 1),
          day = '' + d.getDate(),
          year = d.getFullYear();

      if (month.length < 2) month = '0' + month;
      if (day.length < 2) day = '0' + day;

      return [year, month, day].join('-');
  } 
```

我已经尝试了上述所有问题，但对我不起作用

如果任何其他答案对你有用，你可以试试这个。

谢谢

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2022-03-04T10:39:09.327

只需添加此 if 语句

```
 select(info) {
      if (moment(info.start).format() > moment().format()) {
       //your code here
      } else {
        toast.error("Please select valid date");
      }
    },
```

# node.js - Promise 与 q 框架和 Node.js 中的回调模式？

> ID：14978630
> 
> 赞同：4
> 
> 时间：2013-02-20T11:23:33.030
> 
> 标签：node.js, asynchronous, promise, q

如果你用 Node.js 编程几天，即使有据可查的[q 框架](https://github.com/kriskowal/q)也很难理解。但我喜欢学习它！

```
var Q  = require('q');
var fs = require('fs');

// Make the promise manually (returns a value or throws an error)
var read1 = fs.readFile(fname, enc, function (err, data) {
    if(err) throw err;

    return data;
});

// Convenient helper for node, equivalent to read1?
var read2 = Q.nfbind(fs.readFile);

// Uh?!
var read3 = function (fname, enc) {
    var deferred = Q.defer();

    fs.readFile(fname, enc, function (error, text) {
        if (error) {
            deferred.reject(new Error(error));
        } else {
            deferred.resolve(text);
        }

        return deferred.promise;
    });
};

// Execute
Q.fncall(read1).then(function (data) {}, function (err) {}).done(); 
```

是`read1`和等价`read2`的吗？每次函数的最后一个参数接受回调样式时，`read3`我可以使用吗？`Q.nfbind``function (err, value)`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T17:43:30.293

您的示例中有一些错误。

### 读1

这不是“手动做出承诺”，这只是进行正常的异步调用。在您的代码中，您`readFile`立即调用，`read1`其返回值`readFile`也是`undefined`. 要获得类似于的行为`read2`，`read3`您需要执行以下操作：

```
var read1 = function(fname, env, success, error){
  fs.readFile(fname, enc, function (err, data) {
    // Throwing here would just crash your application.
    if(err) error(err);

    // Returning from inside 'readFile' does nothing, instead you use a callback.
    else success(data);
  });
}; 
```

### 读取2

```
// Not equivalent to read1 because of the notes above,
// Equivalent to read3, with the fixes I mention below.
var read2 = Q.nfbind(fs.readFile); 
```

### 读3

```
var read3 = function (fname, enc) {
    var deferred = Q.defer();

    fs.readFile(fname, enc, function (error, text) {
        if (error) {
            // 'error' is already an error object, you don't need 'new Error()'.
            deferred.reject(error);
        } else {
            deferred.resolve(text);
        }

        // HERE: Again returning a value from 'readFile' does not make sense.
        return deferred.promise;
    });

    // INSTEAD: Return here, so you can access the promise when you call 'read3'.
    return deferred.promise.
}; 
```

您确实可以`nfbind`在将回调作为最后一个参数的任何东西上使用。根据我的评论，`read2`实现`read3`相同的目标，即创建一个函数，该函数将采用文件名和编码，并返回一个 promise 对象。

对于那些，你可以这样做：

```
read2('file.txt', 'utf8').then(function (data) {}, function (err) {}).done();
read3('file.txt', 'utf8').then(function (data) {}, function (err) {}).done(); 
```

对于`read1`，您可以这样称呼它：

```
read1('file.txt', 'utf8', function (data) {}, function (err) {}); 
```

### 更新

自从回答这个问题以来，标准承诺已经发生了一些变化，如果您倾向于`read3`，我建议您执行以下操作：

```
var read4 = function (fname, enc) {
    return Q.promise(function(resolve, reject){
        fs.readFile(fname, enc, function (error, text) {
            if (error) {
                // 'error' is already an error object, you don't need 'new Error()'.
                reject(error);
            } else {
                resolve(text);
            }
        });
    });
}; 
```

这更符合标准 ES6 承诺和 bluebird，因此您可以更轻松地推进代码。使用中提到的方法`read3`还引入了同步抛出异常而不是在 Promise 链中捕获它们的可能性，这通常是不可取的。请参阅[延迟反模式](https://github.com/petkaantonov/bluebird/wiki/Promise-anti-patterns#the-deferred-anti-pattern)。

# css - vs2012智能感知在添加多个css类时不起作用

> ID：14978631
> 
> 赞同：2
> 
> 时间：2013-02-20T11:23:34.240
> 
> 标签：css, visual-studio-2012, intellisense

我安装了新的 vs2012 并且我正在使用 HTML5，但是当我尝试添加多个 css 类时有些方法。Intellisense 只显示一个已经添加的类。
我已经尝试修复的事情：

1.  我已经安装了 vs2012 update1

2.  从 %AppData%Roaming\Microsoft\VisualStudio\11.0\ReflectedSchemas 中删除文件

3.  从工具>导出和导入设置>重置所有设置重置vs2012设置

4.  我已经安装了 Web Essentials 2012

以上都不适合我，任何人都可以帮我解决视觉工作室越来越烦人的问题。

# lotus-domino - Lotus Domino 搜索公式

> ID：14978637
> 
> 赞同：0
> 
> 时间：2013-02-20T11:23:46.347
> 
> 标签：lotus-domino

我有一个小方法可以连接到 Lotus Domino 数据库：

```
Session session = NotesFactory.createSession(host, user, password);
Database db = session.getDatabase(serverName, dbName); 
```

所以现在我需要使用 search() 方法从 db 获取一些信息。据我所知，我需要使用一些“搜索公式”。例如`form="formUnit" & @IsUnavailable($Conflict)`

这是什么类型的脚本，在哪里可以找到有关此的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:44:55.853

它是 Notes/Domino 公式语言。更多信息在这里：

[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.designer.domino.main.doc%2FH_NOTES_FORMULA_LANGUAGE.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.designer.domino.main.doc%2FH_NOTES_FORMULA_LANGUAGE.html)

您不能`@Commands`在 db.search() 中使用，也不能在 all 中使用`@Formulas`。还要检查`db.FTSearch()`在大型数据库中哪个更快，但数据库需要全文索引。

# python - 计算不同长度的 3 维数组的平均值

> ID：14978638
> 
> 赞同：3
> 
> 时间：2013-02-20T11:23:47.810
> 
> 标签：python, numpy, scipy

我有一个维度为 n * d * m 的 3 维数组。但是，ni 可以变化。它看起来像这样

```
[[[1,1,3],  [[3,2,1],  [[4,3,2],  
  [3,4,2]],  [3,4,2],   [5,2,3]]]
             [4,5,3]], 
```

我需要计算所有数据点的平均值。我正在使用该`scipy.stats.mean`功能，但抛出了关于尺寸不匹配的错误。因此，我正在考虑将数组填充到最大的 ni 以便它具有像这样的统一尺寸

```
[[[  1,  1,  3],  [[3,2,1],  [[  4,  3,  2],  
  [  3,  4,  2],   [3,4,2],   [  5,  2,  3],
  [NaN,NaN,NaN]],  [4,5,3]],  [NaN,NaN,NaN]]] 
```

但我不知道这是否是最好的解决方案，也不知道如何用 NaN 计算平均值。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:37:34.973

您可以使用[掩码数组](http://docs.scipy.org/doc/numpy/reference/maskedarray.html)：

```
>>> from numpy import ma, nan
>>> a = ma.array([[1,1,3], [3,4,2], [nan,nan,nan]], mask=[[0,0,0],[0,0,0],[1,1,1]])
>>> b = ma.array([[3,2,1], [3,4,2], [4,5,3]])
>>> c = ma.array([[4,3,2], [5,2,3], [nan,nan,nan]], mask=[[0,0,0],[0,0,0],[1,1,1]])
>>> X = ma.array([a, b, c]) 
```

然后在任何轴上取平均值将忽略掩码值：

```
>>> X.mean(axis=0)
masked_array(data =
 [[2.66666666667 2.0 2.0]
 [3.66666666667 3.33333333333 2.33333333333]
 [4.0 5.0 3.0]],
             mask =
 [[False False False]
 [False False False]
 [False False False]],
       fill_value = 1e+20)

>>> X.mean(axis=1)
masked_array(data =
 [[2.0 2.5 2.5]
 [3.33333333333 3.66666666667 2.0]
 [4.5 2.5 2.5]],
             mask =
 [[False False False]
 [False False False]
 [False False False]],
       fill_value = 1e+20)

>>> X.mean(axis=2)
masked_array(data =
 [[1.66666666667 3.0 --]
 [2.0 3.0 4.0]
 [3.0 3.33333333333 --]],
             mask =
 [[False False  True]
 [False False False]
 [False False  True]],
       fill_value = 1e+20) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:02:52.570

假设您的数组实际上`[[[1,1,3],[3,4,2]],[[3,2,1],[3,4,2],[4,5,3]],[[4,3,2],[5,2,3]]]`是您提到的应该是 3 维数组，那么可以使用循环找到平均值：

```
>>> l = [[[1,1,3],[3,4,2]],[[3,2,1],[3,4,2],[4,5,3]],[[4,3,2],[5,2,3]]]
>>> s = 0; n=0;

>>> for i in l:    #First loop traverses through the first dimension
        for j in i:    #Traverses through the second dimension
            s += sum(j)
            n += len(j)

>>> print("Average is ", s/n)
Average is  2.85714 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:53:11.177

看起来所有 numpy 数组函数都失败了，因为您的对象是 2D 数组列表而不是 3D numpy 数组。

一种解决方案是展开列表并分别计算均值。在您的情况下，这将是：

```
In [23]: import numpy as np

In [24]: L = np.array([[[1,1,3],[3,4,2]],
                  [[3,2,1],[3,4,2],[4,5,3]],[[4,3,2],[5,2,3]]])

In [28]: Lsum = ( np.sum(L[0]) + np.sum(L[1]) + np.sum(L[2]) ) 

In [29]: Lmean = Lsum.astype(float) \ 
                   / ( np.size(L[0]) + np.size(L[1]) + np.size(L[2]) )

In [46]: Lmean
Out[46]: 2.8571428571428572 
```

这可以放入一个循环以改变第三维......

# javascript - 如何在 epub3 文件中添加在线图像？

> ID：14978640
> 
> 赞同：0
> 
> 时间：2013-02-20T11:23:52.853
> 
> 标签：javascript, android, jquery, ibooks, epub3

我想在我的 EPUB3 文件中包含在线图像，但是当我验证它时，它显示错误“仅允许音频和视频远程资源”。当我使用 javascript 包含它时，它在 Android e 阅读器中工作正常，但图像未显示在电子书。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T04:18:13.387

您可能需要将图像保存或下载到您的 android 项目文件夹中，并且应该访问这些图像。参考[this](https://stackoverflow.com/questions/7510721/how-to-get-the-images-of-epub-book-in-android)以供参考

# eclipse - Cassandra / Eclipse - 无法建立连接

> ID：14978642
> 
> 赞同：5
> 
> 时间：2013-02-20T11:24:03.357
> 
> 标签：eclipse, jdbc, connection, cassandra

所以我在我的项目中使用 Cassandra，我必须在 Eclipse 和数据库之间建立连接。我尝试使用我在 code.google.com 上找到的兼容 JDBC 的驱动程序，但我遇到了这个异常：

*线程“主”java.lang.StringIndexOutOfBoundsException 中的异常：字符串索引超出范围：-1*

这是我的代码：

```
package cassandrasampledriver;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import org.apache.cassandra.cql.jdbc.DriverResolverException;
import org.apache.cassandra.cql.jdbc.InvalidUrlException;

 public class CassandraDriver 
{

 public static void main(String[] args)  {
     Connection con = null;
     String KS = "cassandrademocql";

     try 
     {
         Class.forName("org.apache.cassandra.cql.jdbc.CassandraDriver");
         con = DriverManager.getConnection("jdbc:cassandra://localhost:9160/" + KS);

        Statement stmt = con.createStatement();
        String query = "DROP KEYSPACE cassandrademocql;";
        ResultSet result = stmt.executeQuery(query);

     }

     catch (ClassNotFoundException e) {
         e.printStackTrace();
     }
     catch (SQLException e) {
         e.printStackTrace();
     }
 }
} 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T17:57:34.437

我使用[这个 cql 驱动程序](http://bit.ly/WQOMvG)（版本 1.1.2 与 cassandra 1.2 兼容。在 JDK6 上没有错误运行您的代码。也许您的类路径中缺少引用？代码的唯一问题是您将变量分配给方法调用那不会返回任何东西`ResultSet result = stmt.executeQuery(query);`，所以`java.sql.SQLNonTransientException`会抛出异常。

您说您是 Cassandra 的新手，只是一些友好的建议，我会在做出选择之前[对 Cassandra 的可用 API 进行](http://brianoneill.blogspot.co.uk/2012/08/cassandra-apis-laundry-list.html)一些研究。

这些是我使用的 JAR

*   apache-cassandra-1.2.0-rc1-SNAPSHOT.jar
*   apache-cassandra-clientutil-1.2.0-rc1-SNAPSHOT.jar
*   apache-cassandra-thrift-1.2.0-rc1-SNAPSHOT.jar
*   cassandra-jdbc-1.1.2.jar libthrift-0.9.0.jar log4j-1.2.16.jar
*   log4j-over-slf4j-1.7.2.jar selenium-server-standalone-2.21.0.jar
*   slf4j-api-1.7.2.jar slf4j-simple-1.7.2.jar

我运行的完整代码：

```
package cassandrasampledriver;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class CassandraDriver {
    public static void main(String[] args)  {
         Connection con = null;
         String KS = "cassandrademocql";

         try 
         {
             Class.forName("org.apache.cassandra.cql.jdbc.CassandraDriver");
             con = DriverManager.getConnection("jdbc:cassandra://localhost:9160/" + KS);

            Statement stmt = con.createStatement();
            String query = "DROP KEYSPACE cassandrademocql;";

            // Because you are droping the KS this will not return anything
            // So the result set will be null and a java.sql.SQLNonTransientException exception will be thrown every time.
            ResultSet result = stmt.executeQuery(query);

         }

         catch (Exception ex) {
             ex.printStackTrace();
         }
     }
} 
```

# java - 具有多个静态部分的路由 URL 问题

> ID：14978654
> 
> 赞同：0
> 
> 时间：2013-02-20T11:24:57.837
> 
> 标签：java, playframework, playframework-1.x

这只是我的特殊问题，但每次我尝试使用多个静态部分映射 URL 时都会说：

```
POST /search/apps SomeController.someMethod 
```

我收到 404 错误。

如果我将 URL 更改为`/search/apps/`（带有斜杠），它就可以工作。

这是默认设置的吗？我正在使用 PF 1.2.5

# java - 我如何使用小程序通过 rxtxComm.jar 在 ubuntu 上将数据发送到串口

> ID：14978658
> 
> 赞同：1
> 
> 时间：2013-02-20T11:25:07.913
> 
> 标签：java, linux, applet, policy, rxtx

我写了一个程序使用applet通过rxtxComm.jar访问串口，我更改了java.policy，所以applet可以在没有签名的情况下访问串口。当程序在Windows上运行时，它是有效的。但是在ubuntu上有一些execptions（**java.lang.reflect.InvocationTargetException 和“npobject 上的错误调用方法”**）。为了解决这个问题，我用了很多次谷歌，我无法解决。有人有同样的问题吗？这是关于这个程序的代码。

**打印.html**：

```
function print() {
    var zplText = $("#zplText").val();
    document.printApplet.print(zplText);
}

<textarea rows="5" cols="6" id="zplText"></textarea>
<a href="#" onClick="print()">print</a>
<applet id="printApplet" alt="" codebase=.. code="zpl/ZplPrint.class">
    <PARAM NAME="archive" VALUE="../lib/RXTXcomm.jar">
</applet> 
```

**ZplPrint.java**：

```
public class ZplPrint extends Applet {
static String zpl;
static CommPortIdentifier portId;
static CommPort commPort;
static SerialPort serialPort;
@SuppressWarnings("rawtypes")
static Enumeration portList;
static OutputStream out;

public void print(String zplText) {
    zpl = zplText;
    if (zpl == null) {
        return;
    }
    byte[] zplByte = zpl.getBytes();

    portList = CommPortIdentifier.getPortIdentifiers();
    while (portList.hasMoreElements()) {
        portId = (CommPortIdentifier) portList.nextElement();
        if (portId.getPortType() == CommPortIdentifier.PORT_SERIAL) {

            try {

                commPort = portId.open(portId.getName(), 2000);
                serialPort = (SerialPort) commPort;

                serialPort.setSerialPortParams(9600, SerialPort.DATABITS_8, SerialPort.STOPBITS_1,
                        SerialPort.PARITY_NONE);
                out = serialPort.getOutputStream();
                out.write(zplByte);
                commPort.close();
            } catch (PortInUseException e) {
                e.printStackTrace();
            } catch (UnsupportedCommOperationException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } catch (NullPointerException e) {
                e.printStackTrace();
            }

            System.out.println("Find CommPort: " + portId.getName());
        }
    }

} 
```

**java.policy**：

*   权限 java.lang.RuntimePermission "loadLibrary.rxtxSerial";
*   权限 java.io.FilePermission "${java.home}${/}lib${/}ext${/}x86${/}rxtxSerial.dll", "read";
*   权限 java.util.PropertyPermission "gnu.io.log.mode", "read";
*   权限 java.util.PropertyPermission "gnu.io.SerialPorts", "write,read";
*   权限 java.util.PropertyPermission "gnu.io.rxtx.SerialPorts", "read,write";
*   权限 java.util.PropertyPermission "gnu.io.ParallelPorts", "read";
*   权限 java.util.PropertyPermission "gnu.io.rxtx.ParallelPorts", "read";
*   权限 java.lang.RuntimePermission "modifyThreadGroup";
*   权限 java.lang.RuntimePermission "modifyThread";

第一行和第二行与ubuntu不同，当ubuntu是：

*   权限 java.lang.RuntimePermission "loadLibrary.librxtxSerial";
*   权限 java.io.FilePermission "${java.home}${/}lib${/}amd64${/}librxtxSerial.so", "read";

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:15:32.723

我已经解决了自己。

```
 permission java.lang.RuntimePermission "loadLibrary.rxtxSerial";

   permission java.io.FilePermission "${java.home}${/}lib${/}ext${/}amd64${/}librxtxSerial.so", "read";

   permission java.io.FilePermission "${java.home}${/}lib${/}ext${/}librxtxSerial.so", "read";

   permission java.io.FilePermission "${/}dev", "read";

   permission java.util.PropertyPermission "gnu.io.log.mode", "read";

   permission java.util.PropertyPermission "gnu.io.SerialPorts", "write,read";

   permission java.util.PropertyPermission "gnu.io.rxtx.SerialPorts", "read,write";

   permission java.util.PropertyPermission "gnu.io.ParallelPorts", "read";

   permission java.util.PropertyPermission "gnu.io.rxtx.ParallelPorts", "read";

   permission java.lang.RuntimePermission "modifyThreadGroup";

   permission java.lang.RuntimePermission "modifyThread"; 
```

# java - 没有为使用 CharMappingFilter 和 Lucene 4.1 的分析器获取匹配项

> ID：14978662
> 
> 赞同：0
> 
> 时间：2013-02-20T11:25:19.777
> 
> 标签：java, search, lucene

只是将代码库从 Lucene 3.6 更新到 Lucene 4.1，似乎我使用 NormalizeCharMap 替换分析器中的字符的测试不起作用。

下面我创建了一个独立的测试用例，这是我运行它时的输出

```
--term=and--
--term=gold--
--term=platinum--
name:"platinum and gold"
Size1
name:"platinum & gold"
Size0

java.lang.AssertionError: 
Expected :1
Actual   :0
 <Click to see difference>
    at org.junit.Assert.fail(Assert.java:93)
    at org.junit.Assert.failNotEquals(Assert.java:647)
    at org.junit.Assert.assertEquals(Assert.java:128)
    at org.junit.Assert.assertEquals(Assert.java:472)
    at org.junit.Assert.assertEquals(Assert.java:456)
    at org.musicbrainz.search.analysis.Lucene41CharFilterTest.
    testAmpersandSearching(Lucene41CharFilterTest.java:89) 
```

正如您所看到的，charfilter 似乎确实有效，因为文本“白金和黄金”被转换为三个术语“白金和黄金”。事实上，搜索适用于“白金和黄金”，但不适用于原始“白金和黄金”，即使索引和搜索都使用相同的分析器

```
package org.musicbrainz.search.analysis;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.Tokenizer;
import org.apache.lucene.analysis.charfilter.MappingCharFilter;
import org.apache.lucene.analysis.charfilter.NormalizeCharMap;
import org.apache.lucene.analysis.core.LowerCaseFilter;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.*;
import org.apache.lucene.queryparser.classic.QueryParser;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.TopDocs;
import org.apache.lucene.store.RAMDirectory;
import org.apache.lucene.util.BytesRef;
import org.apache.lucene.util.Version;
import org.junit.Test;
import java.io.Reader;

import static org.junit.Assert.assertEquals;

public class Lucene41CharFilterTest
{
    class SimpleAnalyzer extends Analyzer {

        protected NormalizeCharMap charConvertMap;

        protected void setCharConvertMap() {

            NormalizeCharMap.Builder builder = new NormalizeCharMap.Builder();
            builder.add("&","and");
            charConvertMap = builder.build();
        }

        public SimpleAnalyzer() {
            setCharConvertMap();
        }

        @Override
        protected TokenStreamComponents createComponents(String fieldName, 
                                                         Reader reader) {
            Tokenizer source = new MusicbrainzTokenizer(Version.LUCENE_41,

                    new MappingCharFilter(charConvertMap, reader));
            TokenStream filter = new LowerCaseFilter(Version.LUCENE_41,source);
            return new TokenStreamComponents(source, filter);
        }
    }

    @Test
    public void testAmpersandSearching() throws Exception {

        Analyzer analyzer = new SimpleAnalyzer();
        RAMDirectory dir = new RAMDirectory();
        IndexWriterConfig writerConfig = new
            IndexWriterConfig(Version.LUCENE_41,analyzer);
        IndexWriter writer = new IndexWriter(dir, writerConfig);
        {
            Document doc = new Document();
            doc.add(new Field("name", "platinum & gold", Field.Store.YES,
                  Field.Index.ANALYZED));
            writer.addDocument(doc);
        }
        writer.close();

        IndexReader ir = DirectoryReader.open(dir);
        Fields fields = MultiFields.getFields(ir);
        Terms terms = fields.terms("name");
        TermsEnum termsEnum = terms.iterator(null);
        BytesRef text;
        while((text = termsEnum.next()) != null) {
            System.out.println("--term=" + text.utf8ToString()+"--");
        }
        ir.close();

        IndexSearcher searcher = new IndexSearcher(IndexReader.open(dir));
        {
            Query q = new QueryParser(Version.LUCENE_41, "name", analyzer)
                .parse("\"platinum and gold\"");
            System.out.println(q);
            TopDocs td = searcher.search(q, 10);
            System.out.println("Size"+td.scoreDocs.length);
            assertEquals(1, searcher.search(q, 10).totalHits);
        }

        searcher = new IndexSearcher(IndexReader.open(dir));
        {
            Query q = new QueryParser(Version.LUCENE_41, "name", analyzer)
                .parse("\"platinum & gold\"");
            System.out.println(q);
            TopDocs td = searcher.search(q, 10);
            System.out.println("Size"+td.scoreDocs.length);
            assertEquals(1, searcher.search(q, 10).totalHits);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:41:53.023

不太确定，但我猜 QueryParser 不仅仅是分析.. 'and' 例如是一个特殊的关键字。你可能会遇到一个有趣的边缘情况:)

在 4.1 中还有更多 QueryParser 实现...参见例如[http://lucene.apache.org/core/4_1_0/queryparser/org/apache/lucene/queryparser/flexible/standard/package-summary.html](http://lucene.apache.org/core/4_1_0/queryparser/org/apache/lucene/queryparser/flexible/standard/package-summary.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:19:13.667

我发现当分析器与 QueryParser 一起使用时，我必须重写新的 initReader() 方法才能应用它的问题。不确定过滤器是否也需要在 createComponents() 中构建，但如果我只是添加到 initReader 则测试是否有效。

```
class SimpleAnalyzer extends Analyzer {

        protected NormalizeCharMap charConvertMap;

        protected void setCharConvertMap() {

            NormalizeCharMap.Builder builder = new NormalizeCharMap.Builder();
            builder.add("&","and");
            charConvertMap = builder.build();
        }

        public SimpleAnalyzer() {
            setCharConvertMap();
        }

        @Override
        protected TokenStreamComponents createComponents(String fieldName, Reader reader) {
            Tokenizer source = new MusicbrainzTokenizer(Version.LUCENE_35,
                    reader);
            TokenStream filter = new LowerCaseFilter(Version.LUCENE_35,source);
            return new TokenStreamComponents(source, filter);
        }

        @Override
        protected Reader initReader(String fieldName,
                                    Reader reader)
        {
            return new MappingCharFilter(charConvertMap, reader);
        }
    } 
```

# ruby-on-rails - rails 和 cancan - 如何通过关联将公司显示操作限制为 has_many 中的用户所有者

> ID：14978663
> 
> 赞同：0
> 
> 时间：2013-02-20T11:25:20.870
> 
> 标签：ruby-on-rails, cancan, has-many-through

我正在尝试使用 cancan gem 解决用户的能力问题。公司和用户通过 user_company_assignment 关联，这样公司有很多用户，用户拥有并属于许多公司 下面是两个模型的代码和具有初始化角色继承和卖方用户方法的能力.rb 片段，但这不起作用，它总是向我显示公司详细信息。

公司.rb

```
has_many :user_company_assignments
has_many :user, :through => :user_company_assignments 
```

用户.rb

```
has_many :user_company_assignments
has_many :companies, :through => :user_company_assignments 
```

能力.rb

```
def initialize(user)
  @user = user || User.new # for guest
  @user.roles.each { |role| send(role.name.downcase) }
end

def seller
  can :manage, :all
  cannot :destroy, :all

  can :show, Company do |company|
    company.user_ids.include? @user.id
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:34:28.400

您的错误是由于能力优先：[https://github.com/ryanb/cancan/wiki/Ability-Precedence](https://github.com/ryanb/cancan/wiki/Ability-Precedence)

此行会覆盖以下所有能力：`can :manage, :all`

由于您已经声明卖方可以管理所有内容，因此卖方可以对公司执行任何类型的操作，而不管其他`can`声明如何。

一种解决方案是使用`cannot`，就像您使用`:destroy`. 它将覆盖该`:manage, :all`子句。

```
def seller
  can :manage, :all
  cannot :destroy, :all
  cannot :show, Company do |company|
    !company.user_ids.include? @user.id
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:31:28.290

您需要`load_and_authorize_resource`在控制器中调用该方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:48:48.050

好的jesper，我已经更改了我的ability.rb并且它可以工作，但我不确定这是设置能力的最佳方法，奇怪的是我需要指定卖家有权执行展示操作的每个模型. 告诉我这是否是最好的方法：

能力.rb

```
def seller
  can [:index, :create], :all
  cannot :destroy, :all

  can :show, Company do |company|
    company.user_ids.include? @user.id
  end

  can :show, [Report, Client]

end 
```

# matlab - 有哪些数据集可用于联合聚类？

> ID：14978668
> 
> 赞同：0
> 
> 时间：2013-02-20T11:25:52.350
> 
> 标签：matlab, dataset, cluster-analysis

我正在寻找新的文档数据集，从中提取矩阵术语文档，以执行联合聚类算法。

我只寻找单标签数据集，更喜欢免费访问的数据集。

我已经知道以下数据集：
CSTR
WebKB4
Newsgroups
Reuters
K1A, K1B, wap (WebACE Project)

你知道其他人吗？

您还知道过去两年创建的新的联合聚类算法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:29:17.857

[对于数据集，请参阅本工作](http://arxiv.org/abs/1112.2903)的实验部分。

有关新算法，请参见：

*   [Vitaladevuni 和 Basri](http://www.wisdom.weizmann.ac.il/~ronen/papers/Vitaladevuni%20Basri%20-%20Co-Clustering%20of%20Image%20Segments%20Using%20Convex%20Optimization%20Applied%20to%20EM%20Neuronal%20Reconstruction.pdf) CVPR 2010

*   [Bagon 和 Galun](http://arxiv.org/abs/1112.2903) arXiv 2011。

*   [Yarkony 等人](http://arxiv.org/abs/1208.0378)ECCV 2012

*   [金等人](http://www.nowozin.net/sebastian/papers/kim2011clustering.pdf)NIPS 2011

*   [安德烈斯等人](http://hci.iwr.uni-heidelberg.de/publications/mip/techrep/andres_12_globally.pdf)ECCV 2012

仅举几个。

# ios - 有没有办法抑制特定应用的 iOS App Store 更新指示器？

> ID：14978669
> 
> 赞同：0
> 
> 时间：2013-02-20T11:25:58.537
> 
> 标签：ios, xcode, app-store

*编辑*

我不知道*为什么*有人要这样做！事实上，是一位客户声称这*是*可能的，我想证明他是错的；你的反应清楚地表明这不是真的。

* * *

如果我向 Apple App Store 上的现有应用程序提交更新，则具有先前版本的 iOS 设备将开始显示更新可用的指示符。显示在应用商店应用程序顶部的这个徽章：它会受到影响吗？如果提交了新版本，有没有办法抑制它？info.plist 中的一些设置可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:31:32.363

不，你想做什么是不可能的。而且，在我看来，没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:11:39.830

为什么要发布应用程序版本而不鼓励人们安装它？但在回答你的问题时，没有。

# email - 在线 SpamAssassin 评估/RFC 一致性检查

> ID：14978674
> 
> 赞同：13
> 
> 时间：2013-02-20T11:26:11.500
> 
> 标签：email, spam, rfc, spam-prevention, spamassassin

我想检查电子邮件的 SpamAssassin SPAM 分数，包括由 WebApp 的脚本生成的标头。

因此，我需要通过 SpamAssassin 运行此邮件以获取特定的垃圾邮件标头，例如：

```
Yes, score=6.032 
HTML_IMAGE_ONLY_24=1.282 
HTML_MESSAGE=0.001 
HTML_MIME_NO_HTML_TAG=0.635 
MIME_HEADER_CTYPE_ONLY=1.996 
MIME_HTML_ONLY=1.105
RP_MATCHES_RCVD=-0.001 
SPF_PASS=-0.001 
SUBJECT_NEEDS_ENCODING=0.1
SUBJ_ILLEGAL_CHARS=1.105
T_REMOTE_IMAGE=0.01 
```

一种可能是在服务器上安装 SpamAssassin 并通过此安装运行它。

**是否有一些在线服务可以让我粘贴/发送邮件，并且该服务会为我提供垃圾邮件标题？**

是的，我知道您可以使用不同的设置配置 SpamAssassin，因此垃圾邮件分数可能因安装而异，但基本评估已经有所帮助。

**或者是否有可能检查消息的 RFC 一致性？**（因为 SpamAssassin 也会对此进行评估（例如 MIME_HTML_ONLY，这意味着您没有纯文本内容，因此邮件不符合 RFC））。

谢谢！！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-20T11:34:13.350

以下是一些用于检查垃圾邮件分数的在线资源：

*   [http://www.port25.com/support/authentication-center/email-verification/](http://www.port25.com/support/authentication-center/email-verification/)
*   [http://isnotspam.com/](http://isnotspam.com/)
*   [http://spamscorechecker.com/](http://spamscorechecker.com/)
*   [http://spamcheck-services.com/](http://spamcheck-services.com/)

或用于离线检查：

*   [http://www.mailingcheck.com/download-spam-checker/](http://www.mailingcheck.com/download-spam-checker/)

这里有一些避免误报的提示：[http ://wiki.apache.org/spamassassin/AvoidingFpsForSenders](http://wiki.apache.org/spamassassin/AvoidingFpsForSenders)

# android - 带有历史的 EditText

> ID：14978676
> 
> 赞同：5
> 
> 时间：2013-02-20T11:26:30.797
> 
> 标签：android, search, autocomplete, textview, history

我想展示在 TextView 中引入的文本的历史。它应该类似于 google play 上的搜索栏：

![谷歌播放搜索](../Images/afad76466459379fdc3e1243fb3bc1e4.png)

目前我正在使用带有 android:completionThreshold="1" 的 AutoCompleteTextView，但我希望在建议开始之前不需要写任何文本。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-17T06:53:07.603

试试这个它工作正常：

MainActivity.java

```
import android.app.Activity;
import android.app.ActionBar;
import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;
import android.os.Build;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final String[] COUNTRIES = new String[] {
            "Belgium", "France", "Italy", "Germany", "Spain"
        };

        // In the onCreate method
        AutoCompleteTextView textView = (AutoCompleteTextView) findViewById(R.id.autoCompleteTextView1);
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line, COUNTRIES);
        textView.setAdapter(adapter);
    }
} 
```

activity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<AutoCompleteTextView
    android:id="@+id/autoCompleteTextView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:text="AutoCompleteTextView" >

    <requestFocus />
</AutoCompleteTextView>

</LinearLayout> 
```

# opengl - 如何填充这个十六进制

> ID：14978684
> 
> 赞同：0
> 
> 时间：2013-02-20T11:27:16.117
> 
> 标签：opengl

我有一个这样的六边形

```
glEnable(GL_TEXTURE_2D);

//GRASS
glTexImage2d(GL_TEXTURE_2D,Level,Colorcomps,sGrass,tGrass,Border,GL_RGB,GL_UNSIGNED_BYTE,background);
glBegin(GL_POLYGON);
    for I := 0 to 6 do
    begin
      glVertex3f(COS(i/6.0*2*PI)/10+offsetx+0.2,SIN(i/6.0*2*pi)/10+offsety,-2);
    end;
glEnd; 
```

我现在如何添加坐标以将纹理添加到此？我以前做过的唯一方法是为每一行设置它们。像这样`glTexCoord2f(0.0,0.0);`因为这是在一个 for 循环中我不能这样做。还有其他方法吗？还是我必须删除 for 循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:15:30.487

`glTexCoord2f()`假设您可以参数化计算所需的纹理坐标，没有什么能阻止您从循环内部调用。

您应该在相应`glVertex3f()`的提交之前调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:16:26.233

将 glTexCoord2f 调用放在循环中，就在 glVertex3f 调用的上方。

要使用的坐标取决于您想要什么。如果您希望所有六边形具有相同的纹理，则为它们提供所有相同的纹理坐标。最简单的情况是其中刻有六边形的正方形纹理。绳子是这样的：

glTexCoord2f(COS(i/6.0*2*PI)*0.5+0.5, SIN(i/6.0*2*pi)*0.5+0.5);

六边形线从 -1 变为 1，因此乘以 0.5 会使它们变为 -0.5 到 0.5。然后添加 0.5 使它们从 0 变为 1，这就是归一化纹理坐标。

# python - 如何从python sql select访问项目

> ID：14978686
> 
> 赞同：1
> 
> 时间：2013-02-20T11:27:31.220
> 
> 标签：python, sql

我正在尝试从 SQL SELECT 查询中获取随机行：

```
 SQL = 'SELECT * FROM tblQuestion'
    cursor = Databaseconnector.SELECT(SQL)
    rows = cursor.fetchall()

    rand = random.random(0,10)
    pprint.pprint(rows)

    row = rows(rand) 
```

但是，它抱怨说：

```
 Type Error: List object is not callable 
```

在最后一行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:33:01.057

用这个：

```
row = random.choice(rows) 
```

这将从列表中选择一个随机元素`rows`。

或者检查是否可以直接选择随机行：

```
SELECT * FROM tblQuestion ORDER BY RAND() LIMIT 1 
```

# selenium - 测试activeX组件

> ID：14978687
> 
> 赞同：1
> 
> 时间：2013-02-20T11:27:33.200
> 
> 标签：selenium, activex

是否可以使用 Selenium 自动测试具有一些 ativeX 组件的应用程序？

谢谢！

# jquery - 如何让我的 div 在第二次单击时返回其原始背景颜色？

> ID：14978689
> 
> 赞同：1
> 
> 时间：2013-02-20T11:27:36.453
> 
> 标签：jquery, html, css, addclass, removeclass

我正在使用 jquery addClass 和 removeClass 动画功能。

我正在做的是单击链接时...下拉导航将出现...它适用于响应式站点...但一切正常。但是会发生什么......当点击链接时，div类发生变化并且链接类发生变化..这是有效的

但是，当现在再次单击该链接时...我希望两个类都恢复为它们所在的默认类

这是我的代码：

```
<div class="display-menu">
<div class="container">
<a id="displaymenu" class="click" style="color:#ffffff;" href="javascript:slideToggle();">In This Section</a>
<script>
    $("a.click").click(function(){
        $("div.display-menu").removeClass("display-menu").addClass("display-menu1");
        $("a.click").removeClass("click").addClass("current");
    });
</script>
</div>
</div> 
```

有没有人对我有任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T11:29:51.100

尝试`toggleClass`

```
 $("div.display-menu").toggleClass("display-menu").toggleClass("display-menu1");
    $("a.click").toggleClass("click").toggleClass("current"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T11:31:37.077

将 id 添加到顶部 div 并更改代码以在元素 id 上可靠

```
<div class="display-menu" id="displaydiv">
    <div class="container">
        <a id="displaymenu" class="click" style="color:#ffffff;" href="javascript:slideToggle();">In This Section</a>
        <script>
            $("a.click").click(function(){
                $("div#displaydiv").toggleClass("display-menu display-menu1");
                $("a#displaymenu").toggleClass("click current");
            });
        </script>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T11:30:41.090

由于您正在更改类，因此最好使用 id 作为选择器，并且像其他人所说的那样，使用切换类。

否则，处理程序中的选择将不会在第二次单击时起作用。

```
<div id="display-menu-div" class="display-menu">

$("#displaymenu").click(function(){
    $("#display-menu-div").toggleClass("display-menu display-menu1");
    $("#displaymenu").toggleClass("click current");
}); 
```

# c# - 更改查询表适配器数据库连接

> ID：14978692
> 
> 赞同：0
> 
> 时间：2013-02-20T11:27:50.383
> 
> 标签：c#, .net-4.0, xsd, dataset

我正在尝试更新我在 DataSet（XSD 文件）中创建的 QueriesTableAdapter 中每个查询的连接字符串。我已经制作了尝试通过反射来做到这一点的方法（我有一个使用表适配器的类似方法）但是它似乎无法访问查询。这是我所做的方法：

```
 /// <summary>
        /// Changes the database all the queries in a queries table adapter connect to
        /// </summary>
        /// <typeparam name="IQA">The type of the queries table adapter</typeparam>
        /// <param name="InstanceQueriesAdapter">The instance of the queries table adapter</param>
        /// <param name="sqlDatabaseName">The name of the database the queries table adapter queries should connect to</param>
        public static void GetInstanceQueriesAdapter<IQA>(ref IQA InstanceQueriesAdapter, string sqlDatabaseName)
        {
            try
            {
                PropertyInfo qAdapterCommandCollection = InstanceQueriesAdapter.GetType().GetProperty("CommandCollection");

                if (qAdapterCommandCollection != null)
                {
                    SqlCommand[] qaCC = (SqlCommand[])qAdapterCommandCollection.GetValue(InstanceQueriesAdapter, null);

                    foreach (SqlCommand singleCommand in qaCC)
                    {
                        SqlConnection newSQLConnection = singleCommand.Connection;

                        SqlConnectionStringBuilder csBulider = new SqlConnectionStringBuilder(newSQLConnection.ConnectionString);

                        csBulider.InitialCatalog = sqlDatabaseName;

                        newSQLConnection.ConnectionString = csBulider.ConnectionString;

                        singleCommand.Connection = newSQLConnection;
                    }

                    qAdapterCommandCollection.SetValue(InstanceQueriesAdapter, qaCC, null);
                }
                else
                {
                    throw new Exception("Could not find command collection.");
                }
            }
            catch (Exception _exception)
            {
                throw new Exception(_exception.ToString());
            }
        } 
```

由于 GetProperty 方法返回 null，因此失败。但是您可以在这里看到该属性确实存在：

![1](../Images/ae031ea2af8ee1ad1d60c584bd7989d4.png)

这是即时窗口的输出：

```
? InstanceQueriesAdapter.GetType().GetProperties()
{System.Reflection.PropertyInfo[2]}
    [0]: {System.ComponentModel.ISite Site}
    [1]: {System.ComponentModel.IContainer Container}
? InstanceQueriesAdapter.GetType().GetMethods()
{System.Reflection.MethodInfo[14]}
    [0]: {System.Object ImportProcess(System.Object, System.Object, System.Object, System.Object, System.Object, System.Object, System.Nullable`1[System.Guid], System.String ByRef)}
    [1]: {Void add_Disposed(System.EventHandler)}
    [2]: {Void remove_Disposed(System.EventHandler)}
    [3]: {System.ComponentModel.ISite get_Site()}
    [4]: {Void set_Site(System.ComponentModel.ISite)}
    [5]: {Void Dispose()}
    [6]: {System.ComponentModel.IContainer get_Container()}
    [7]: {System.String ToString()}
    [8]: {System.Object GetLifetimeService()}
    [9]: {System.Object InitializeLifetimeService()}
    [10]: {System.Runtime.Remoting.ObjRef CreateObjRef(System.Type)}
    [11]: {Boolean Equals(System.Object)}
    [12]: {Int32 GetHashCode()}
    [13]: {System.Type GetType()} 
```

有谁知道进入这个“CommandCollection”的方法，以便我可以动态更改连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:07:30.397

据我所知，CommandCollection 属性是受保护的；试试这个：

```
GetProperty( "CommandCollection", BindingFlags.GetProperty | BindingFlags.Instance | BindingFlags.NonPublic ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:47:38.747

更改数据库的工作代码。还值得注意的是，连接的所有部分都可以在这里更改，例如超时等。

```
/// <summary>
/// Changes the database all the queries in a queries table adapter connect to
/// </summary>
/// <typeparam name="IQA">The type of the queries table adapter</typeparam>
/// <param name="InstanceQueriesAdapter">The instance of the queries table adapter</param>
/// <param name="sqlDatabaseName">The name of the database the queries table adapter queries should connect to</param>
public static void GetInstanceQueriesAdapter<IQA>(ref IQA InstanceQueriesAdapter, string sqlDatabaseName)
{
    try
    {
        FieldInfo qAdapterCommandCollection = InstanceQueriesAdapter.GetType().GetField("_commandCollection", BindingFlags.GetProperty | BindingFlags.Instance | BindingFlags.NonPublic);
        MethodInfo initCC = InstanceQueriesAdapter.GetType().GetMethod("InitCommandCollection", BindingFlags.GetProperty | BindingFlags.Instance | BindingFlags.NonPublic);

        if (qAdapterCommandCollection != null && initCC != null)
        {
            initCC.Invoke(InstanceQueriesAdapter, null);

            IDbCommand[] qaCC = (IDbCommand[])qAdapterCommandCollection.GetValue(InstanceQueriesAdapter);

            foreach (SqlCommand singleCommand in qaCC)
            {
                SqlConnection newSQLConnection = singleCommand.Connection;

                SqlConnectionStringBuilder csBulider = new SqlConnectionStringBuilder(newSQLConnection.ConnectionString);

                csBulider.InitialCatalog = sqlDatabaseName;

                newSQLConnection.ConnectionString = csBulider.ConnectionString;

                singleCommand.Connection = newSQLConnection;
            }

            qAdapterCommandCollection.SetValue(InstanceQueriesAdapter, qaCC);
        }
        else
        {
            throw new Exception("Could not find command collection.");
        }
    }
    catch (Exception _exception)
    {
        throw new Exception(_exception.ToString());
    }
} 
```

# java - java进程内存泄漏

> ID：14978693
> 
> 赞同：2
> 
> 时间：2013-02-20T11:27:54.187
> 
> 标签：java, memory-leaks, jvm

[root@TJHY251-103 ~]# java -version

java版本“1.6.0_39”

Java(TM) SE 运行时环境 (build 1.6.0_39-b04)

Java HotSpot(TM) 64 位服务器 VM（内部版本 20.14-b01，混合模式）

jvm参数：</p>

```
-Xmx4g -Xms4g -XX:PermSize=256m -XX:MaxPermSize=256m -Xss256K 
```

热门信息：

```
 PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                                    
12594 root      25   0 10.3g 7.5g 4764 S 23.6 95.6  71:37.33 java 
```

使用的直接内存：

```
345.664551 MB 
```

gperftools 结果：

```
Total: 3169.2 MB 

3147.6  99.3%  99.3%   3147.6  99.3% os::malloc 
    12.7   0.4%  99.7%     12.7   0.4% ObjectSynchronizer::omAlloc 
     4.6   0.1%  99.9%      4.6   0.1% zcalloc 
     3.0   0.1% 100.0%      3.0   0.1% init 
     0.5   0.0% 100.0%      0.5   0.0% readCEN 
     0.3   0.0% 100.0%      0.3   0.0% _dl_allocate_tls 
     0.1   0.0% 100.0%      0.1   0.0% instanceKlass::add_dependent_nmethod 
     0.1   0.0% 100.0%      0.1   0.0% pthread_cond_wait@GLIBC_2.2.5 
     0.0   0.0% 100.0%      3.9   0.1% Thread::Thread 
     0.0   0.0% 100.0%      0.0   0.0% pthread_cond_timedwait@GLIBC_2.2.5 
     0.0   0.0% 100.0%      0.0   0.0% allocZip 
     0.0   0.0% 100.0%      0.0   0.0% _dl_new_object 
     0.0   0.0% 100.0%      0.0   0.0% addMetaName 
     0.0   0.0% 100.0%      4.6   0.1% Java_java_util_zip_Inflater_init 
     0.0   0.0% 100.0%      0.0   0.0% pthread_cond_signal@GLIBC_2.2.5 
     0.0   0.0% 100.0%      0.0   0.0% newEntry 
     0.0   0.0% 100.0%      0.0   0.0% strdup 
     0.0   0.0% 100.0%      0.0   0.0% _nl_intern_locale_data 
     0.0   0.0% 100.0%      0.0   0.0% growMetaNames 
     0.0   0.0% 100.0%      0.0   0.0% JLI_MemAlloc 
     0.0   0.0% 100.0%      0.0   0.0% _dl_check_map_versions 
     0.0   0.0% 100.0%      0.0   0.0% _dl_map_object_deps 
     0.0   0.0% 100.0%      0.0   0.0% getpwuid 
     0.0   0.0% 100.0%      0.0   0.0% __fopen_internal 
     0.0   0.0% 100.0%      0.0   0.0% _dl_scope_free 
     0.0   0.0% 100.0%      0.0   0.0% dl_open_worker 
     0.0   0.0% 100.0%      0.0   0.0% initLoopbackRoutes 
     0.0   0.0% 100.0%      0.0   0.0% os::format_boot_path 
     0.0   0.0% 100.0%      0.0   0.0% os::strdup 
     0.0   0.0% 100.0%      0.0   0.0% __tzfile_read 
     0.0   0.0% 100.0%      0.0   0.0% new_composite_name 
     0.0   0.0% 100.0%      0.0   0.0% add_to_global 
     0.0   0.0% 100.0%      0.0   0.0% os::realloc 
     0.0   0.0% 100.0%      0.0   0.0% _nl_load_locale_from_archive 
     0.0   0.0% 100.0%      0.0   0.0% expand_dynamic_string_token 
     0.0   0.0% 100.0%      0.0   0.0% __tzstring 
     0.0   0.0% 100.0%     24.9   0.8% 0x00002aaaab08d44d 
     0.0   0.0% 100.0%     10.8   0.3% 0x00002aaaab092859 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab09289e 
     0.0   0.0% 100.0%      8.4   0.3% 0x00002aaaab092928 
     0.0   0.0% 100.0%      0.1   0.0% 0x00002aaaab09296d 
     0.0   0.0% 100.0%      5.1   0.2% 0x00002aaaab0929b2 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab0929f7 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab092a3c 
     0.0   0.0% 100.0%     25.7   0.8% 0x00002aaaab092a81 
     0.0   0.0% 100.0%      0.2   0.0% 0x00002aaaab092d33 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab092dbd 
     0.0   0.0% 100.0%      0.8   0.0% 0x00002aaaab092e02 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab092e47 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab092e8c 
     0.0   0.0% 100.0%     19.4   0.6% 0x00002aaaab092f5b 
     0.0   0.0% 100.0%      0.1   0.0% 0x00002aaaab09d47d 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab09d493 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab09d7ad 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab09d9b9 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab09eb2b 
     0.0   0.0% 100.0%     16.7   0.5% 0x00002aaaab09ecab 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab09f287 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab09f29d 
     0.0   0.0% 100.0%      0.1   0.0% 0x00002aaaab09f771 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab09fd4d 
     0.0   0.0% 100.0%      0.1   0.0% 0x00002aaaab0a0783 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab0a0799 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab0a0907 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab0a091d 
     0.0   0.0% 100.0%      0.1   0.0% 0x00002aaaab0a987d 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab0a9893 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab0a9cbd 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab0aa1a1 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab0aa1b7 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab0aa401 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab0aa417 
     0.0   0.0% 100.0%      0.2   0.0% 0x00002aaaab0aa581 
     0.0   0.0% 100.0%      2.2   0.1% 0x00002aaaab0aa597 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab0aa701 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab0aa717 
     0.0   0.0% 100.0%      0.3   0.0% 0x00002aaaab0aafb1 
     0.0   0.0% 100.0%      0.2   0.0% 0x00002aaaab0aafc7 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab0ab1ba 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab0ab34b 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab0ab361 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab0ab5ab 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab0ab5c1 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab0ab907 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab0ab91d 
     0.0   0.0% 100.0%      2.2   0.1% 0x00002aaaab0c5c00 
     0.0   0.0% 100.0%      0.3   0.0% 0x00002aaaab0ea7bd 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab0ead3c 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab0eadfa 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab0eaecd 
     0.0   0.0% 100.0%      0.3   0.0% 0x00002aaaab0edc3a 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab10ac1c 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab145704 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab187c64 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab36819c 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab3741b3 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab387157 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab39666f 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab4b37e7 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab4e847a 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab505ce8 
     0.0   0.0% 100.0%     10.9   0.3% 0x00002aaaab569ce6 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab574e97 
     0.0   0.0% 100.0%   3102.7  97.9% 0x00002aaaab601926
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab67fb23 
     0.0   0.0% 100.0%      0.0   0.0% 0x00002aaaab7d2075 
     0.0   0.0% 100.0%      0.0   0.0% AbstractCompiler::initialize_runtimes 
     0.0   0.0% 100.0%      0.0   0.0% AbstractInterpreterGenerator::generate_method_entry 
     0.0   0.0% 100.0%      0.0   0.0% AdapterFingerPrint::AdapterFingerPrint 
     0.0   0.0% 100.0%      0.0   0.0% AdapterHandlerLibrary::create_native_wrapper 
```

java进程的内存不断增加，直到用完。

“0x00002aaaab601926”是什么意思？我该如何解决？

# performance - Git - 在克隆之前/之后过滤

> ID：14978694
> 
> 赞同：3
> 
> 时间：2013-02-20T11:27:55.440
> 
> 标签：performance, git, filter, git-clone

我有一个庞大的存储库——它不仅仅是一个千兆字节。克隆存储库需要数小时。但是，该大小的大部分是因为不需要在本地处理项目的数据目录。但是，我当然无权简单地从存储库中删除目录。

有没有办法在克隆*之前*将过滤器应用于存储库，以便我只下载我实际需要处理的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:56:29.817

不，根据 git 的设计，这是绝对不可能的。您将不得不更改中央存储库。

作为临时解决方案，您可以创建一个新分支，仅过滤此分支并从`master`您的分支进行空合并。现在人们可以只克隆你的分支并在它上面工作。然后，您将不得不合并到`master`某个地方。但是由于您添加了空合并，您现在可以随时在这两个分支之间合并 - 只要您不更改 master 上的数据目录。

**编辑**：对不起，空合并会破坏整个目的，因为客户端会再次拉下所有数据。

# c# - 如何使用 Aforge.Net AviWriter 创建 mp4 视频

> ID：14978695
> 
> 赞同：2
> 
> 时间：2013-02-20T11:27:59.630
> 
> 标签：c#, mp4, avi, aforge

我正在使用 Aforge.net 库从网络摄像头捕获视频并使用 XVID 创建 .avi 文件。

我正在使用的代码片段（这不是完整的代码） -

```
writer = new AVIWriter("XVID");

public void StartCapture()
{
            videoSource.Start();
            writer.FrameRate = 30;
            writer.Open(videoFilename, frameWidth, frameHeight);
}

public void video_NewFrame(object sender, NewFrameEventArgs eventArgs)
{
            writer.AddFrame((Bitmap)eventArgs.Frame);
}

public void EndCapture()
{
            if (!(videoSource == null))
            {
                if (videoSource.IsRunning)
                {
                    videoSource.SignalToStop();
                    videoSource = null;
                    writer.Close();
                }
            }

} 
```

我的下一个要求是在浏览器的嵌入式播放器中显示此视频。谷歌搜索后，我发现只有 DivX 网络播放器可以从浏览器播放 avi 文件。但是我想使用 HTML5 视频标签来播放视频，这样我的视频就可以在所有浏览器中播放，而且我不必为每个 IE、Firefox、Safari 等安装单独的插件。

如果有人可以指导如何使用 Aforge.net 或任何将我的 avi 文件转换为 mp4 的 Windows 命令行工具来创建 mp4 视频文件，那将是非常有帮助的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-04T15:01:30.833

我也将 AVIWriter 与 x264 一起使用来创建 AVI 视频，然后使用 ffmpeg CLI 将视频容器转换为 MP4。

您可以从这里安装 ffmpeg CLI：[http ://www.ffmpeg.org/download.html](http://www.ffmpeg.org/download.html)

并使用这个命令：“-i %input -c:v copy %output”

将 %input 替换为您的 AVI 文件路径，并将 %output 替换为带有 MP4 扩展名的结果文件路径。

# java - 使用 Google Guava 库进行 Android 开发是个好主意吗？

> ID：14978699
> 
> 赞同：128
> 
> 时间：2013-02-20T11:28:03.280
> 
> 标签：java, android, guava

我参与了 Android 应用程序的开发，这是一个相当“厚”的 Web 服务移动客户端。它与服务器进行大量通信，但也有很多内部逻辑。所以，我决定使用`Google Guava`库的一些特性来简化开发过程。以下是我非常感兴趣的特性列表：不可变集合、基本实用程序、集合扩展、函数式编程糖和惯用语（`common.collect`和`common.base`）、原语实用程序（`common.primitives`）、散列实用程序（`common.hash`）、并发实用程序（期货和`AsyncFunction`）。我**不想**在 Android 中使用的东西：（`common.cache`见下面的问题），`common.eventbus`（我们有更好的 Android 特定库，例如[Otto](https://github.com/square/otto)），`common.io`（我们可以使用[okio](https://github.com/square/okio)现在适用于 Android）。

我读到使用 Guava for Android 会显着减慢编译过程并降低整个运行时性能： [Android 上使用 Guava Cache 的性能不佳](https://stackoverflow.com/questions/9283070/bad-performance-with-guava-cache) （在这种情况下这是合理的，不需要使用 Guava 的 Android 缓存）和 [添加 Google Guava 到 Android 项目 - 显着减慢构建速度](https://stackoverflow.com/questions/7548038/adding-google-guava-to-android-project-significantly-slows-down-the-build)

那么，在 Android 项目中使用 Guava 库是否有效，或者该库旨在**仅**用于服务器端开发，我应该使用标准解决方案？任何解释将不胜感激。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-02-20T11:44:50.830

（评论太大了，所以我发布了一个答案。）就我个人而言，我在每个 Java 项目中使用整个 Guava 库，并且当我没有*显着且正确分析*的性能问题时。例如，如果您确实有内存问题，例如在 Android 环境中，您可以使用[ProGuard](https://github.com/google/guava/wiki/UsingProGuardWithGuava)仅获取您真正需要的 Guava 的这些部分。

此外，[还有许多使用 Guava 的 Android 应用程序](http://www.appbrain.com/stats/libraries/details/guava/google-guava)- 不仅是小型应用程序，即直接来自 Google 的 Google Search 和 Youtube。

（您还应该看到[兼容性说明](https://github.com/google/guava/wiki/Compatibility)。）

# file - LogParser 蜥蜴

> ID：14978701
> 
> 赞同：0
> 
> 时间：2013-02-20T11:28:10.827
> 
> 标签：file, logging, log4net, file-access, logparser

我正在使用 LogParser Lizard 解析 Log4Net 文件，并且当我尝试执行以下查询时：SELECT * FROM "C:\Logs*.log"。我收到一条错误消息，提示“该进程无法访问文件 [...]，因为它正在被另一个进程使用”（正确，这是我在 IIS 中部署的 Web 应用程序当前正在写入它）。有没有办法规避这种行为，即使文件当前正在使用，仍然可以打开文件进行读取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T15:19:49.083

这个问题有点老了，但无论如何我都会给出我的解决方法。将日志文件复制到临时文件夹。然后在副本上使用 Log Parser Lizard。

# c# - 在 namevaluecollection 中使用逗号设置值

> ID：14978704
> 
> 赞同：1
> 
> 时间：2013-02-20T11:28:22.910
> 
> 标签：c#, query-string, namevaluecollection

我正在使用以下代码来访问和操作查询字符串

```
NameValueCollection qs = HttpUtility.ParseQueryString(Request.Url.Query);
qs.Set("OID", "5,6,7");
Response.Redirect( absolutepath + "?" + qs); 
```

问题是查询字符串最终像这样**"something.aspx?OID=5%2c6%2c7"**而不是**something.aspx?OID=5,6,7**

如何格式化 qs 以获取逗号而不是 %2c？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:30:17.810

采用`HttpUtility.UrlDecode(qs);`

# sql - 单个查询的 RCSI

> ID：14978705
> 
> 赞同：0
> 
> 时间：2013-02-20T11:28:23.713
> 
> 标签：sql, sql-server, performance, sql-server-2008-r2

我可以为特定查询设置读取提交快照隔离吗？为了运行 Read uncommitted 之类的查询，我们可以使用“with (nolock)”。有没有类似于 RCSI 的东西？我使用 SQL Server 2008R2 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:30:23.717

最简洁的答案是不。已提交读快照数据库设置更改已提交读隔离级别的语义，以便它采用乐观锁定（而不是默认的悲观锁定）。但是，您可以`set transaction isolation level snapshot`在查询之前尝试一下，看看这是否会完成您正在寻找的内容。注意：为了使用快照隔离，需要将数据库配置为允许它。检查 sys.databases 中的 snapshot_isolation_state_desc 列。如果它关闭，`alter database [yourdb] set ALLOW_SNAPSHOT_ISOLATION on`将做的伎俩。

# php - 单击href属性无法打开网站链接

> ID：14978706
> 
> 赞同：-2
> 
> 时间：2013-02-20T11:28:30.570
> 
> 标签：php, hyperlink

我正在创建一个用户点击链接的网页，新网站将在新窗口中打开

**例子**

```
echo "<a href='www.google.com' target='_blank'>Click Here</a>"; 
```

如果我单击此链接，站点将在根链接（localhost/mysite/www.google.com）中打开，而不是 www.google.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:32:47.173

协议无关版本：

```
<a href='//something/test/and/rest' target='_blank'>Click Here</a> 
```

`//`将正常`http://`工作`https://`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:30:05.967

```
<a href='http://www.google.com' target='_blank'>Click Here</a> 
```

`http://`在您的链接之前添加

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:31:06.247

尝试

```
echo "<a href='http://www.google.com' target='_blank'>Click Here</a>"; 
```

您必须拥有`http://`或`https://`因为没有它，浏览器认为它是具有相同域的同一页面。

因此，您需要告诉浏览器发送其他`http request`内容，而不是将其添加到同一域中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T11:37:29.520

要在 html 中创建将在新窗口中打开的链接：

```
<a href="http://example.com" target="_blank">Click Me</a> 
```

对于 PHP，回显字符串并使用反斜杠转义双引号（如果您使用它们而不是单引号）：

```
echo "<a href=\"http://example.com\" target=\"_blank\">Click Me</a>"; 
```

# codeigniter - jquery ajax 存储 %20 而不是空格

> ID：14978707
> 
> 赞同：0
> 
> 时间：2013-02-20T11:28:30.373
> 
> 标签：codeigniter, jquery

我的 codeigniter 视图中有 jquery ajax 函数，它将 textfiled 值存储到 Mysql 数据库表中的字段中。问题是它将空格以 %20 的形式存储在数据中。实际上，我什至不确定问题出在 ajax 函数上还是那里发生了什么。

查询：

```
var url = "<?php echo base_url();?>index.php/it_inventory/saveNewAssetType/" + asset_name;
    $.ajax({
        type: "POST",
        url: url,
        success: function()
        {   
          alert("New asset saved!");
        }

    }); 
```

控制器功能：

```
function saveNewAssetType($asset_name="") {
        return($this->it_inventory_model->saveNewAssetType($asset_name))?TRUE:FALSE;
} 
```

型号功能：

```
function saveNewAssetType($asset_name){
            $asset_data = array ('code'=>'','name'=>$asset_name);
            return($this->db->insert('asset_types',$asset_data))?TRUE:FALSE;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:30:57.917

在插入表之前使用 rawurldecode()，

```
$asset_name = rawurldecode($asset_name); 
```

# sql - 从 Reporting Services 导入时在 Excel 中按日期排序

> ID：14978708
> 
> 赞同：4
> 
> 时间：2013-02-20T11:28:35.233
> 
> 标签：sql, excel, reporting-services, ssrs-2008

我正在尝试制作报告，以便在将其导出到 excel 时可以按日期排序，如下所示： ![在此处输入图像描述](../Images/d83728914b07ce327a2d6e12302deb62.png)

在我的 SQL 中，日期被转换为 VARCHAR，因此它可以以我想要的格式显示：

```
CONVERT(VARCHAR, a.a_start, 106) 
```

我知道因为它是 VARCHAR，所以导出时，excel 只会对 A - Z 进行排序。我尝试在 SSRS 和查询中将其更改为日期格式，但这会在报告服务中显示 DATETIME 格式，而不是我原来的格式寻找。

所以基本上有没有办法在报告服务中将日期显示为“dd/mm/yyyy”或“dd month yyyy”格式，但是在导出到excel时可以按日期排序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:46:20.510

tablix 上有一个用于格式化单元格的选项，您可以在此处设置“dd/mm/yyyy”。

1.  右键单击单元格/文本框并选择属性。
2.  一旦单元格是日期格式，您就可以在 Excel 中进行排序。

![设置日期](../Images/f00e592783a1af8471ce64e9d5d08118.png)

# grails - 如何从 grails 应用程序中的 gsp 重定向到控制器的操作

> ID：14978709
> 
> 赞同：1
> 
> 时间：2013-02-20T11:28:37.450
> 
> 标签：grails, redirect, controller, gsp

我的要求是，我有一个 gsp，其中使用`<g:if>`我正在检查条件的标签。
如果满足该条件，那么我必须将控件自动重定向到控制器中的操作。
我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:50:41.323

您可以使用 JavaScript，例如：

```
<g:if ...>
<g:javascript>
window.location.href = '<g:createLink ... >';
</g:javascript>
</g:if> 
```

顺便说一句，在控制器本身中做到这一点要容易得多，也更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:35:20.243

我做过类似的事情。

我使用带有闭包的自定义标签来检查例如登录用户是否具有特定角色或其他东西，然后您可以从您的闭包中进行重定向。

您只需将标签放在 gsp 页面中。

# java - 树节点中的动画 gif 图像

> ID：14978711
> 
> 赞同：2
> 
> 时间：2013-02-20T11:28:42.790
> 
> 标签：java, swing, jtree, animated-gif, treenode

我正在尝试将动画 gif 图像添加到树节点，但显然 JTree 是唯一无法呈现 gif 动画的组件。你能告诉我如何解决这个问题吗？

```
import java.awt.BorderLayout;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTree;
import javax.swing.tree.DefaultTreeCellRenderer;

public class Test extends JFrame {

    public static void main(String[] args) {

        ImageIcon leafIcon = new ImageIcon(any_gif_animated_image);

        DefaultTreeCellRenderer renderer = new DefaultTreeCellRenderer();
        renderer.setClosedIcon(leafIcon);
        renderer.setOpenIcon(leafIcon);
        renderer.setLeafIcon(leafIcon);

        JTree tree = new JTree();
        tree.setCellRenderer(renderer);

        JLabel label = new JLabel(leafIcon);
        label.setText("loading");

        JPanel panel = new JPanel(new BorderLayout());

        panel.add(label, BorderLayout.NORTH);
        panel.add(tree, BorderLayout.CENTER);

        JFrame frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(panel);
        frame.setSize(900, 600);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:59:10.163

1.  [动画图标树示例](http://www.java2s.com/Code/Java/Swing-Components/AnimatedIconTreeExample.htm)

2.  [动画 Gif 图标 (any_gif_animated_image)](http://www.gifanimations.com/GA/animation/MenuSelection/1/28)

3.  在 JTree 节点中产生疯狂的动画

![在此处输入图像描述](../Images/86857c81892e8781263f4d89d3ac3a1c.png)

![在此处输入图像描述](../Images/f98b73fa47e0502a65629d5de4dd5527.png)

# cocoa-touch - iOS - 尝试检索标签的当前字体大小设置为

> ID：14978712
> 
> 赞同：0
> 
> 时间：2013-02-20T11:28:43.210
> 
> 标签：cocoa-touch, uilabel, font-size

我正在尝试找到一种以编程方式检索标签当前字体大小的方法。像这样的东西：

```
int sizeFont = myLabel.font.labelFontSize; 
```

我知道如何检索点大小：

```
int sizePoint = myLabel.font.pointSize; 
```

寻找字体大小。谢谢你的帮助！

****这里是标签被初始化`-(void)viewDidLoad`的地方，为了便于阅读，从许多其他代码中调用****

 **```
-(void)initializeUIElements
{
    // create a new UIView
    UIView *newView = [[UIView alloc] initWithFrame:CGRectMake(0,0,320,480)];

    // initializing close scroll label
    close_scroll = [[UILabel alloc] initWithFrame:CGRectMake(258, 155, 70, 30)];
    close_scroll.text = @"Close Scroll";
    close_scroll.textColor = [UIColor colorWithRed:(255/255.0) green:(240/255.0) blue:(5/255.0) alpha:1];
    close_scroll.font = [UIFont fontWithName:user.display_font size:10];
    close_scroll.transform = CGAffineTransformMakeRotation(3.14159265358979323846264338327950288 * 1.5);
    [newView addSubview:close_scroll];

    // add the new view as a subview to the superview
    [self.view addSubview:newView];
} 
```

****这被调用来更新标签的字体。这个想法是用户可以从配置文件配置屏幕返回，并选择不同的字体类型。字体选择得很好，只是大小变得扭曲。**

```
-(void)viewWillAppear:(BOOL)animated
{
    CGFloat test2 = close_scroll.font.pointSize;

    // updating fonts displayed in case of a profile change
    close_scroll.font = [UIFont fontWithName:user.display_font size:test2];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T00:20:37.190

好的，我想通了。感谢所有帮助过的人。显然，我进入例程的自定义字体名称很糟糕。因此，显示默认为某些系统默认大小而不会引发任何错误。下面的行将用于检索标签的当前字体大小。

```
// if you want to retrieve the font size as a separate value, this will work
int sizeLabelFont = labelOpenScroll.font.pointSize;

// this is actually how I am using the line
labelOpenScroll.font = [UIFont fontWithName:user.display_font size:labelOpenScroll.font.pointSize]; 
```**

# zend-framework - Zend ini 路由无限子页面

> ID：14978714
> 
> 赞同：0
> 
> 时间：2013-02-20T11:28:56.250
> 
> 标签：zend-framework, subroutine

目前我正在开发一个具有内置页面的系统。这些页面与父页面和子页面一起使用，这意味着子页面可以工作。现在，我整个上午都在网上搜索，以了解我应该如何编写路由以创建（无限）子页面机制，您可以在其中拥有 :language/page/parent/child-1/child-2/ child-3/:alias... 等等。我的示例中的 :alias 对应于数据库表字段（必须始终位于末尾）。

```
[routes]

routes.language.type                                        = "Zend_Controller_Router_Route"
routes.language.route                                       = ":lang"
routes.language.defaults.lang                               = "en"

routes.language.chains.frontend_page.type                   = "Zend_Controller_Router_Route"
routes.language.chains.frontend_page.route                  = "page/:alias"
routes.language.chains.frontend_page.defaults.module        = "default"
routes.language.chains.frontend_page.defaults.controller    = "index"
routes.language.chains.frontend_page.defaults.action        = "index"
routes.language.chains.frontend_page.defaults.alias         = "index" 
```

这就是我的（简单）路由当前的样子。我想我身边的很多人都在为这个问题寻找一个好的解决方案。因此，如果那里有愿意解释的天才...请=D！

此致

# raspberry-pi - 如何在 Raspberry Pi 上使用 ZXing 解码 QR 码

> ID：14978715
> 
> 赞同：1
> 
> 时间：2013-02-20T11:28:56.283
> 
> 标签：raspberry-pi

我有一个涉及二维码识别和生成的大学项目。我看过 Arduino 和 Raspberry Pi，但在我的研究中，我发现由于 Arduino 的内存限制，Pi 更适合图像解码（如果我错了，请纠正我）

我的问题是：如何使用 ZXing 用 Pi 解码图像？我读过有人用 Android 刷他们的 Pi 并从那里继续，但我想避免这种情况，因为我可能想在没有 Android 的情况下扩展项目。

# selenium - 如何在 Webdriver 控制的浏览器 Firefox 窗口上设置焦点？

> ID：14978716
> 
> 赞同：2
> 
> 时间：2013-02-20T11:28:57.217
> 
> 标签：selenium, webdriver, x11, selenium-firefoxdriver

我的操作系统是 Ubuntu。我想将操作系统窗口焦点设置为由 Webdriver 控制的 Firefox 窗口。我想这样做，因为我想使用 XDoTool 按 Ctrl+S，然后执行一些操作系统本机鼠标单击/键盘按键来处理“另存为操作系统”窗口。

我试过了：

```
driver.switch_to.default_content
driver.execute_script('window.focus();') 
```

但它不会改变焦点。

我还考虑过使用 xdotool 并按名称选择窗口，但我可能打开了其他同名的窗口。

如何将窗口焦点设置到该浏览器窗口？

# .net - 具有传输模式和 ClientCridentialType None 模式的 NetTcpBinding 要求证书启动主机

> ID：14978723
> 
> 赞同：1
> 
> 时间：2013-02-20T11:29:15.390
> 
> 标签：.net, wcf, security

真的不可能使用传输安全性进行 netTcpBinding 和 None 身份验证吗？我真的不想为我的服务使用任何证书，我在下面使用了我们的服务配置，当我启动我的服务主机时，我收到下面提到的应用程序错误（要求证书，我什至没有提到应用程序中任何地方的证书）。但是，在我将服务凭据放入行为后，服务开始运行。谁能告诉我这是什么原因？

***错误：“未提供服务证书。在 ServiceCredentials 中指定服务证书。”***

```
 <service name="ConsoleApplication1.WCFService1" behaviorConfiguration="" >
                <endpoint address="net.tcp://localhost:853/WCFService1" binding="netTcpBinding"
                    bindingConfiguration="SecurityCheckBinding"  name="TCPEndpoint" contract="ConsoleApplication1.IService1" />

                <host>
                    <baseAddresses>
                        <add baseAddress="net.tcp://localhost:853/WCFService1" />

                    </baseAddresses>
                </host>

            </service>

<bindings>
        <netTcpBinding>
          <binding name="SecurityCheckBinding">
            <security mode="Transport">
              <transport clientCredentialType="None"  ></transport>
            </security>
          </binding>
        </netTcpBinding>
      </bindings> 
```

这种情况我遇到了上述错误，但是当我刚刚指定受信任的证书参数时，它开始运行。

```
 <behaviors>
    <serviceBehaviors>
      <behavior name="MyServiceBehaviour">
        <serviceCredentials>
          <serviceCertificate findValue="MyTestCA" x509FindType="FindByIssuerName" storeLocation="LocalMachine" storeName="My" />
        </serviceCredentials>

      </behavior>
    </serviceBehaviors>
  </behaviors> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:27:18.910

当您选择了具有传输安全性的 NetTpcBinding 时，您声明必须在传输级别上保护通道。为此，您应该使用 Windows SSPI 机制或生成用于加密的证书。第一个选项假定您使用 Windows 凭据通过设置使 SSPI libaraies 在内部处理加密：

```
<transport clientCredentialType="Windows"></transport> 
```

在这种情况下，进程将是透明的，但如果您的客户端在另一个域上，您必须应用额外的跨域信任设置。另一种选择是安装证书，这很容易并且在internat中有很多示例：

```
<transport clientCredentialType="Certificate"></transport> 
```

该证书是自动签名的（在服务器本身上生成），所以它不会花费你一些钱，你只需要在服务器上 - 客户端不需要安装任何东西。

即使您声明无凭据，您仍然需要提供加密证书：

```
<transport clientCredentialType="None"></transport> 
```

而且您仍然可以选择不使用安全性，然后您的按摩将在飞机文本中。要关闭安全性，只需通过设置更改传输安全性：

```
<security mode="None"> 
```

# ruby-on-rails - 什么是收藏，什么是会员？

> ID：14978731
> 
> 赞同：-1
> 
> 时间：2013-02-20T11:29:46.873
> 
> 标签：ruby-on-rails

什么是收藏，什么是会员？

```
resources :photos do
  member do
    get :preview
  end
end 
```

# 对比

```
resources :photos do
  collection do
    get :search
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:52:28.873

第一个让你请求[GET]：

```
/photos/1/preview

# action 'preview' within PhotosController with params[:photo_id] == 1 
```

第二个让你请求[GET]：

```
/photos/search

# action 'search' within PhotosController 
```

# java - 基于 Java 的词映射（语义）应用程序

> ID：14978741
> 
> 赞同：2
> 
> 时间：2013-02-20T11:30:16.403
> 
> 标签：java, semantics, semantic-web, text-mining, wordnet

我想开发一个基于 Java 的应用程序来将同义词映射到唯一的代码或单词。例如，在医学术语中，单词 `heart attack` 或 `cardiac arrest`等表示相同的东西。所以我想建立一个数据库（不需要是一个 RDBMS）来存储这样的映射。以后必须添加/修改或删除此类映射。

主要目标是开发一个应用程序以在语义上将实体映射在一起。

我的输入就像一个两三个词的短语，它会被映射到一个标准代码。例如**心脏病发作**和**心脏骤停**映射到疾病代码**HA50122445**。明天，如果我发现一个新短语说**myo** heart crazy ，我想将其映射到代码**HA50122445**

我查看了[Apache Lucene](http://lucene.apache.org/core/index.html)，但它是用于文本挖掘，基于搜索关键字的优先级。我的要求有点类似于[Wordnet](http://wordnet.princeton.edu/wordnet/)。Wordnet 数据库是否可编辑或可修改？我的研究说不。这样对吗 ？

如果您能指导我，那将非常有帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T22:46:21.807

查看 Brat 快速注释工具

[http://brat.nlplab.org/index.html](http://brat.nlplab.org/index.html)

它使您可以注释文档，指示两个不同的短语实际上是同一件事，并将这些实体指向规范引用。

它将数据存储在平面文件中。您甚至可以使用斯坦福大学的 CoreNLP 来学习变体（如心脏病发作或“心肌梗塞”）并将它们识别为同一事物。

Wordnet 是可下载的，您可以随时向下载的版本添加新信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T22:58:28.123

您可能想查看[UMLS metathesaurus](http://www.nlm.nih.gov/pubs/factsheets/umlsmeta.html)和[MetaMap](http://metamap.nlm.nih.gov/)。前者是“一个包含数百万个生物医学和健康相关概念的大型、多用途、多语言的词库”。那必须有一些标识符。您可以以此为基础建立您的“数据库”，因为随着时间的推移自己构建它将会非常费力。后者是一个自然语言处理工具包，它可以扫描文本、发现医学概念并将它们映射到 UMLS 词库中的条目。

免责声明：我没有使用这些资源中的任何一个。我的团队为客户构建了类似的资源，但没有免费提供，因此我不推荐它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:38:25.133

`HashMap`，与您的一个“HA501225..”对象的键同义。

```
Map<String, String> lookup = new HashMap<>();
lookup.put("Heart Attack", "HA50..");
lookup.put("cardiac arrest", "HA50..");

//lookup is now simple -
lookup.get("Heart Attack") // gives us HA5012.. 
```

简单的启动解决方案，一旦遇到问题，然后在遇到扩展问题或遇到问题时从那里进行优化。您也许可以查看 Redis，或其他可以为您提供这些映射的键值数据库。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-20T11:41:10.047

RDBMS 是最好的解决方案。只需选择一个。嵌入式示例：HSQLDB。但是任何 mysql 或 postgre 都应该适合。

# c# - 如何使 c# texbox 将 unicode 字符作为大小为 1 的字符

> ID：14978746
> 
> 赞同：0
> 
> 时间：2013-02-20T11:30:36.253
> 
> 标签：c#, unicode, character

我在 ac#.net 项目 (ASP.Net) 中有一个文本框控件，它接受 50 个字符。如果我添加一个 unicode 心 (♥) 符号，它将需要大约 4 个字符大小，因此不会正确触发验证。例如，如果我在文本框中键入 49 个字符和一个 unicode heart(♥)，验证会触发为“您在文本框中输入了 50 多个字符”，我的问题是 C# 中有什么方法可以将 unicode 字符（如 ♥）视为一个字符，或者任何人都可以告诉我我们如何处理这种情况.. ???请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:38:23.993

# php - php 警告：strtotime() 错误

> ID：14978751
> 
> 赞同：4
> 
> 时间：2013-02-20T11:30:46.283
> 
> 标签：php, string, wordpress, joomla, phpmyadmin

我已将我的 joomla 和 wordpress 文件从旧服务器更改为新服务器。在前端和管理方面它的工作没有任何错误。但是在数据库（phpmyadmin）部分它显示了一些像这样的警告消息..

```
Warning: strtotime() [function.strtotime]: It is not safe to rely on the system's timezone settings. 
You are *required* to use the date.timezone setting or the date_default_timezone_set() function. 
In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier.
We selected 'Asia/Calcutta' for 'IST/5.0/no DST' instead in /usr/share/phpmyadmin/libraries/db_info.inc.php on line 88

Warning: strftime() [function.strftime]: It is not safe to rely on the system's timezone settings.
You are *required* to use the date.timezone setting or the date_default_timezone_set() function.
In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier.
We selected 'Asia/Calcutta' for 'IST/5.0/no DST' instead in /usr/share/phpmyadmin/libraries/common.lib.php on line 1483 
```

您能否建议，如何隐藏这些警告消息？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T15:41:00.160

您真的只是想隐藏错误消息还是想解决问题，他们正在指示？

在您的新服务器上，您应该会`date.timezone`在`php.ini`文件中找到已注释掉的设置。在这里，您必须指定您的服务器所在的时区。例如，我的服务器位于德国，所以我`Europe/Berlin`在这里使用：

```
date.timezone = Europe/Berlin 
```

您可以在此处找到支持的时区的完整列表：

[http://www.php.net/manual/en/timezones.php](http://www.php.net/manual/en/timezones.php)

更改此设置后，重新启动您的 Web 服务器，警告应该会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T08:34:14.697

```
date_default_timezone_set('Europe/London'); 
```

试试这个PHP代码可能是你的问题已经解决...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T11:37:40.173

查看如何使用error_reporting，[http ://php.net/manual/en/function.error-reporting.php](http://php.net/manual/en/function.error-reporting.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-04T15:50:39.197

最好的方法是设置默认时区。在 config.inc.php 文件中，插入一行：

```
date_default_timezone_set('America/Sao_Paulo'); 
```

在我的情况下，我使用“America/Sao_Paulo”在你的情况下我认为是“Asia/Calcutta”

有关时区的更多详细信息，请访问[http://php.net/manual/en/function.date-default-timezone-set.php](http://php.net/manual/en/function.date-default-timezone-set.php)

# lync - 无法获取非联系 Lync 用户的可用性状态

> ID：14978757
> 
> 赞同：1
> 
> 时间：2013-02-20T11:31:04.133
> 
> 标签：lync

我们的解决方案通过 Lync 将进入我们软件的消息中继给用户。如果用户在 Lync 中不可用，则一旦用户在 Lync 中再次变为“可用”，我们就会将邮件排队等待传递。我已经为所有联系人（112）创建了一个基于 ContactInformationType.Availability 的订阅，并为 contact.ContactInformationChanged 事件连接了一个事件处理程序，该事件在联系人的可用性发生变化时引发。

我的订阅代码如下所示，

```
 /// <summary>
    /// Subscribes to contacts.
    /// </summary>
    /// <param name="group">List of Lync contacts.</param>
    void SubscribeToContacts(List<Contact> contacts)
    {
        Console.WriteLine("Total Contacts: " + contacts.Count.ToString());

        foreach (var contact in contacts)
            contact.ContactInformationChanged += new EventHandler<ContactInformationChangedEventArgs>(Contact_ContactInformationChanged);

        contactSubscription = contactManager.CreateSubscription();

        //Choose the types of presence changes to listen for
        var contactInformationTypes = new List<ContactInformationType>() { ContactInformationType.Availability };

        contactSubscription.Subscribe(ContactSubscriptionRefreshRate.High, contactInformationTypes);

        //contactSubscription.AddContacts(contacts);
        foreach (var item in contacts)
        {
            Console.WriteLine(item.Uri);
            contactSubscription.AddContact(item);

            Console.WriteLine(item.GetContactInformation(ContactInformationType.Availability).ToString());
        }
    } 
```

我遇到的问题是，如果用户不是我列表中的联系人或从未参与过搜索，那么该用户的存在状态始终为“无”或（0），因此尽管用户可能在线并且在 Lync 中可用，我可以“看到”它们。我在网上看到一些地方说这应该可以，但我似乎也无法理解。此外，似乎也没有引发该类型用户的 contact.ContactInformationChanged 事件。

我应该提到我正在通过 Office 365 使用 Lync SDK 和在线服务。

我已经为此苦苦挣扎了太久了，因为我认为应该像我所拥有的那样工作。任何想法或建议将不胜感激。

特洛伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-24T07:33:06.687

由于非 Lync 联系人没有通过 Lync Server 访问应用程序，或者您可能会说，**他们没有使用 Lync**，因此此类 ID 的存在对于 Lync 客户端将是未知的。

# c# - 在代码隐藏中获得控制价值

> ID：14978762
> 
> 赞同：0
> 
> 时间：2013-02-20T11:31:23.270
> 
> 标签：c#, javascript, asp.net

当我`<%= this.HiddenField.Value %>`在这种情况下调用 HiddenField 控件的值时保持相同的状态 (5) ？但是当我用`console.log(document.getElementById('<%= this.HiddenField.ClientID %>').value);`这个来调用它时，在这种情况下“活动”返回改变的状态，为什么？如何在后面的代码中获取更改的值（我想`<%= this.HiddenField.Value %>`返回“活动”（更改的值））？

代码：

```
<script>
    $(function () {
        document.getElementById('<%= this.HiddenField.ClientID %>').value = "active";
        console.log(document.getElementById('<%= this.HiddenField.ClientID %>').value); // this return te changed value "active"
        console.log('<%= this.HiddenField.Value %>') //this again is 5 not "active"
    });
</script>
<asp:HiddenField ID="HiddenField" runat="server" Value="5" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:36:18.863

您混淆了服务器端和客户端代码以及它们何时运行。

服务器端代码首先运行。这就是`<%=%>`块中的内容。其中，在使用时`this.HiddenField.Value`，它将输出控件在客户端更改之前的*服务器端值。*`this.HiddenField.ClientID`将控件 ID 输出为服务器的输出，以便您可以从*客户端*代码中获取它。

当页面首次加载时，这些`<%=%>`部分将被替换为服务器端的值。

这看起来像（在页面加载后在浏览器中执行 - 查看源代码以查看实际呈现给浏览器的内容）：

```
<script>
    $(function () {
        document.getElementById('someId').value = "active";
        console.log(document.getElementById('someId').value); // this return te changed value "active"
        console.log('5') //this again is 5 not "active"
    });
</script>
<input type="HiddenField" ID="someId" Value="5" /> 
```

然后，并且只有这样，客户端代码才会运行，并显示您所看到的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:36:18.100

在下一行

```
 console.log('<%= this.HiddenField.Value %>') 
```

`<%= this.HiddenField.Value %>`在服务器上进行评估，因此在浏览器中

```
console.log('5') 
```

因为那是表达式的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:36:09.503

`<%= whatever %>`评估`whatever`页面何时在服务器上呈现。

如果您查看发送给客户端的 HTML，您会发现类似

```
$(function () {
    document.getElementById('blahblah_HiddenField').value = "active";
    console.log(document.getElementById('blahblah_HiddenField').value);
    console.log('5')
}); 
```

由`5`服务器呈现 - 客户端没有任何内容将其链接`5`到隐藏字段中的值，因此当隐藏字段的值更改时它不会更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T11:37:20.407

发生这种情况是因为 asp.net 控件显示“服务器”值，即 5。使用 javascript，您正在修改客户端的 dom，asp.net 控件值在您发布页面之前不会改变。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T11:41:48.490

或者您可以使用 **ClientIDMode**

```
<asp:HiddenField ID="HiddenField1" runat="server" ClientIDMode="Static" /> 
```

**设置和获取；**

*在jQuery中*

```
$('#HiddenField1').val('active');
console.log($('#HiddenField1').val()); 
```

*在javascript中*

```
document.getElementById('HiddenField1').value = 'active';
console.log(document.getElementById('HiddenField1').value); 
```

# php - 如何在 php 中生成 6 位数字？

> ID：14978766
> 
> 赞同：0
> 
> 时间：2013-02-20T11:31:29.093
> 
> 标签：php, mysql

如何自动生成一个唯一的随机 6 位数字以插入到 mysql 表的列中？随机生成的数字必须不存在于列中。

我正在通过 php 访问 mysql。

表格格式是这样的，随机数在 reqnumber 列中：

```
id,status,reqnumber 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T11:37:46.807

```
 function gen(){
    $num = rand(100000,999999);
    if($num == ifnumberinyourdatabase){
    gen();
    }
    return $num;
    } 
```

您也可以在此处使用递归函数。哪个检查数字是否是您的数据库，如果不是，则生成新的数据库，如果不返回唯一的数字

```
function gen(){
        $num = rand(100000,999999);
$query_idgetrs = "SELECT * FROM servicetbl where reqnumber = $num";
$idgetrs = mysql_query($query_idgetrs, $dbconnection) or die(mysql_error());
$row = mysql_num_rows($idgetrs);

        if($row >= 1){
        gen();
        }
        return $num;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:34:19.020

只需生成一个随机数，然后使用[`str_pad()`](http://php.net/manual/en/function.str-pad.php)：

```
$myRandom = str_pad(rand(1,999999), 6, '0', STR_PAD_LEFT); 
```

您将遇到的问题是，由于您要求它是随机的，因此在生成之前无法知道它是否存在于表中。您必须进行循环并继续检查数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:34:09.617

对 reqnumber 字段设置唯一约束，并在 PHP 中放置错误处理代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T11:37:16.760

虽然随机也可以，但请注意，6 位数字仅提供 100 万种组合。我不确定在您开始出现重复的主键错误之前需要多长时间。

更好的解决方案是使用唯一值。这与随机值非常不同，因为唯一值保证每次都不同。MySql 有 auto_increment 数据类型来帮助你。不幸的是，当使用 6 位数字时，您仍然被限制为 100 万个条目。

如果你想要一个完全随机的长标识符，请查看[MySql 的 UUID 函数](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html)。它将生成一个保证永远不会重复的唯一字符串。然而，它比 6 个字符长得多，因为这是实现唯一性所需要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T11:37:21.030

表结构的一部分必须是：

```
`id` mediumint(6) AUTO_INCREMENT NOT NULL,
PRIMARY KEY (`id`) 
```

如果您真的总是需要 6 位数字：

`ALTER TABLE tbl AUTO_INCREMENT = 100000;`

或使用 `sprintf()`

# php - 如何获得重复错误

> ID：14978768
> 
> 赞同：0
> 
> 时间：2013-02-20T11:31:36.457
> 
> 标签：php

我只想在我的程序运行时出现重复错误。

我做了一个条件，如果用户已经注册了一个学生（匹配`studId`和`sy`），它会给我一个错误，比如“你已经注册了”。否则，它将执行插入查询。在我的表中，我插入了一个`studId(c-1111)`＆`sy(2011)`，例如，有一个老学生正在/正在注册，但是在我的情况下，当我单击“生成并保存”按钮时，它总是给我错误消息，即使`sy`是 2013 年与`studId`c-1111 相同。这是我的代码。请帮我解决我的程序。

```
 for($i=0; $i <= $row->studId; $i++){           
        $generated_pass = genpass($i);
        echo "<td>$generated_pass</td>";
        $year = date("Y");
        $info = $mysqli->query("SELECT studId, sy FROM tbl_student WHERE
                    studId='".$row->studId."' AND sy= '$year'");
        if($info){
            echo "<script type='text/jscript'>
        alert('You already did the enrollment.')
        window.location='admin.php';</script>";
            }
        else {
        $insert = $mysqli->query("INSERT IGNORE INTO  tbl_student (studId,
                    fname,  lname, mname, password, dob, address, f_fname, f_mname,
                    f_lname, m_fname, m_mname, m_lname, departmentId, sy) VALUES 
                    ('".$row->studId."', '".$row->fname."', '".$row->lname."', 
                    '".$row->mname."', '".md5($generated_pass)."', '".$row->dob."', 
                    '".$row->address."', '".$row->f_fname."', '".$row->f_mname."', 
                    '".$row->f_lname."', '".$row->m_fname."', '".$row->m_mname."', 
                    '".$row->m_lname."', '".$row->departmentId."', '".$row->sy."')");
                }
                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:36:08.607

是否可以选择添加 studID 和 sy 是唯一键的 MySQL 表约束？那样的话，任何插入重复的查询都会失败，PHP 会得到一个它可以处理的错误。

编辑：应该删除 IGNORE 关键字才能使上述内容起作用，因为它本质上要求不遵守约束。[http://dev.mysql.com/doc/refman/5.1/en/constraint-primary-key.html](http://dev.mysql.com/doc/refman/5.1/en/constraint-primary-key.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:42:49.253

请调试什么

```
$info = $mysqli->query("SELECT studId, sy FROM tbl_student WHERE studId='".$row->studId."' AND sy= '$year'"); 
```

$info 返回。在这种情况下，如果你的 if($info) 不起作用，那么它可能会返回空数组，那么你需要检查`empty()`etc

# vb.net - 将详细信息视图与类对象绑定

> ID：14978769
> 
> 赞同：0
> 
> 时间：2013-02-20T11:31:37.107
> 
> 标签：vb.net

如何绑定详细信息视图并返回一个类对象？

```
Dim _obj As New NewRequestDetailsBL

_obj = NewRequestDetailsBL.SelectRequestDetails(Session("requestid"), 
Session("contactid"))
dvAdmin1.DataSource = _obj ' this line is giving the error
dvAdmin1.DataBind() 
```

错误：

```
System.InvalidOperationException: Data source is an invalid type.  
It must be either  an IListSource, IEnumerable, or IDataSource. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T20:24:58.817

该错误包含您需要的所有信息！

> 它必须是[IListSource](http://msdn.microsoft.com/en-us/library/system.componentmodel.ilistsource%28v=vs.100%29.aspx)、[IEnumerable](http://msdn.microsoft.com/en-gb/library/system.collections.ienumerable%28v=vs.100%29.aspx)或[IDataSource](http://msdn.microsoft.com/en-gb/library/system.web.ui.idatasource.aspx)。

您的类必须至少实现其中一个接口，然后您才能设置`DataSource`为`NewRequestDetailsBL`类的实例。

# html - 画布中的线宽

> ID：14978771
> 
> 赞同：2
> 
> 时间：2013-02-20T11:31:38.343
> 
> 标签：html, canvas, html5-canvas

好吧，如果我在 HTML5 Canvas 中画一条 lineWidth 为奇数的线，我会得到一条模糊的线，我知道这个问题的原因。

现在，我想知道克服这个问题的解决方案。我已经知道了一个解决方案，但我现在无法实施。因此，请评论此问题的任何其他解决方案。

**我的解决方案**：如果您必须绘制一条奇数宽度的线，那么您必须将线的中心向上或向下偏移 0.5。这样渲染将发生在像素的边界而不是中间，并且您将始终有一条清晰的线，在末端边缘没有残留物。

让我知道除上述以外的任何其他解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T01:47:14.623

令人高兴（也很遗憾）当您添加/减去 0.5 个像素以使您的线条与像素边界对齐时，您已经正确实现了“像素捕捉”。与 Photoshop 不同，没有选项可以在画布中自动进行像素对齐。...我感觉到你的痛苦！

# zend-framework2 - 我需要有关输入过滤器的帮助

> ID：14978772
> 
> 赞同：0
> 
> 时间：2013-02-20T11:31:39.057
> 
> 标签：zend-framework2, zend-inputfilter

我在模型 TaiKhoan 中有这个方法

```
public function getInputFilter()
{
   if (!$this->inputFilter) 
   {
      $inputFilter = new InputFilter();
      $factory     = new InputFactory();

      $inputFilter->add($factory->createInput(array(
            'name'     => 'TenTaiKhoan',
            'required' => true,
            'filters'  => array(
                  array('name' => 'StripTags'),
                  array('name' => 'StringTrim'),
            ),
      )));

      $inputFilter->add($factory->createInput(array(
            'name'     => 'MatKhau',
            'required' => true,
            'filters'  => array(
                  array('name' => 'StripTags'),
                  array('name' => 'StringTrim'),
            ),
      )));
   }

   return $this->$inputFilter;
} 
```

然后我在我的控制器中使用它

```
$taikhoan = new TaiKhoan(); 
```

$form->setInputFilter($taikhoan->getInputFilter());

当我运行时，它告诉我这个错误

```
Catchable fatal error: Object of class Zend\InputFilter\InputFilter could not be converted to string in C:\wamp\www\ZF\module\CPanel\src\CPanel\Model\TaiKhoan.php on line 59 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:03:04.703

问题是此语句中的错字：

```
return $this->$inputFilter; 
```

PHP 将此行解释为动态属性名称，并将其转换为字符串。正确的版本是：

```
return $this->inputFilter; 
```

您还需要为输入过滤器分配一些东西：

```
public function getInputFilter()
{
    if (!$this->inputFilter) 
    {
        // ...
        $this->inputFilter = $inputFilter;
    }

    return $this->inputFilter;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:37:09.097

您延迟加载输入过滤器，但从不设置`$this->inputFilter`.

```
public function getInputFilter()
{
    if (!$this->inputFilter)
    {
        $this->inputFilter = new InputFilter();
    }
    return $this->inputFilter;
} 
```

不确定这是否是您的问题，因为错误是关于将输入过滤器转换为字符串。请在 TaiKhoan.php 的第 59 行提供准确的代码。

# parameters - MEF+MVVM：如何用非导入或混合参数实例化一个类

> ID：14978773
> 
> 赞同：3
> 
> 时间：2013-02-20T11:31:41.910
> 
> 标签：parameters, constructor, viewmodel, mef, factory

我一直在试验 MEF 和 MVVM。我想让 MEF 使用字符串构造函数参数初始化 NonShared ViewModel 实例，例如：

```
// BarViewModel's constructor has one single string parameter
IBarViewModel bar = container.GetExportedValue<IBarViewModel>("bar title"); 
```

显然MEF不会让我这样做。

我用谷歌搜索，有人说 ExportFactory 是正确的工具，但没有语法示例。我一直无法弄清楚如何使用 ExportFactory 来初始化带有构造函数参数的实例（或者我应该说非导入参数）。

所以我尝试使用 ViewModelFactory 来实现这一点。我参考了这篇[文章](http://pglazkov.blogspot.com.au/2011/04/mvvm-with-mef-viewmodelfactory.html)

并想出了这样的事情：

```
[Export(typeof(IBarViewModelFactory))]
public class BarViewModelFactory : IBarViewModelFactory
{
    [Import]
    public Lazy<CompositionContainer> Container { get; set; }

    public IBarViewModel CreateBarViewModel(string text)
    {
        IBarViewModel result = null;
        var tempContainer = CreateTemporaryDisposableContainer(Container.Value);
        try
        {
            result = new BarViewModel(text);
            tempContainer.ComposeParts(result);
        }
        catch (Exception ex)
        {
        }
        finally
        {              
        }

        return result;
    } 
```

基本上我在这里做的是（1）从其他地方导入一个容器（2）用参数新建VM（3）使用临时容器来解决新实例的依赖关系。

这段代码似乎工作正常，但后来我发现 (a) BarViewModel 不能再具有 [ImportingConstructor] (b) 我不能在其构造函数中使用 BarViewModel 的 [Import] 属性，因为它们在 ctor 范围内为空。

这意味着 ViewModel 的使用非常有限，也意味着无法使用 MEF 初始化这样的类：

```
[Import]
public ILogger Logger {get;set;}

[ImportingConstructor]
public SomeClass(IDataService service, string text)
{
    Logger.Trace(text);
} 
```

现在我不知道如何用 MEF 实例化这个类。我想这是一个很常见的场景，所以我想知道 MEF 是否无法处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:36:37.097

有两种方法可以做你想做的事情：

*   创建一个工厂并将所有必要的部分导入工厂，然后将其传递给类的构造函数。为此，您必须让您的工厂了解实现`IBarViewModel`接口的不同类以及它们实例化所需的部分，或者使用反射将它们放在某个列表中。

**BarViewModelFactory：**

```
[Export(typeof(IBarViewModelFactory))]
public class BarViewModelFactory : IBarViewModelFactory
{
    [Import] private IServiceA ServiceA { get; set; }
    [Import] private IServiceB ServiceB { get; set; }

    // val is some metadata value to help decide which class to instantiate.
    public IBarViewModel CreateBarViewModel(string val, string text)
    {
        IBarViewModel result = null;

        try
        {
            // Select using metadata...
            if (String.Equals(val, "x", StringComparison.OrdinalIgnoreCase))
                result = new SuperBarViewModel(ServiceA, ServiceB, text);
            else
                result = new BarViewModel(ServiceA, text);
        }
        catch (Exception ex) { ... }
        finally { ... }

        return result;
    }    
} 
```

**IBarViewModel 实现：**

```
public sealed class BarViewModel : ViewModelBase, IBarViewModel
{
    public BarViewModel(IServiceA svcA, string text)
    {
        ServiceA = svcA;

        // Do something with text, etc...
    }

    private IServiceA ServiceA { get; set; }
}

public sealed class SuperBarViewModel : ViewModelBase, IBarViewModel
{
    public BarViewModel(IServiceA svcA, IServiceB svcB, string text)
    {
        ServiceA = svcA;
        ServiceB = svcB;

        // Do something with text, etc...
    }

    private IServiceA ServiceA { get; set; }
    private IServiceB ServiceB { get; set; }
} 
```

* * *

*   或者，您也许可以利用`ExportFactory<T, TMetadata>`. 它是[MEF (Silverlight)](http://msdn.microsoft.com/en-us/library/ff382771(v=vs.95).aspx)、[MEF Codeplex 库（版本 2）](http://mef.codeplex.com/)和[Microsoft.Net 4.5](http://msdn.microsoft.com/en-us/library/ff382771(v=vs.110).aspx)的一部分。请注意，ExportFactory 无法实例化类并将参数传递给构造函数，因此您必须`text`在创建实例后通过设置属性（或调用方法）来使用。此外，这里是有关[使用 ExportMetadataAttribute](http://mef.codeplex.com/wikipage?title=Exports%20and%20Metadata)的一些信息。

**BarViewModelFactory：**

```
[Export(typeof(IBarViewModelFactory))]
public class BarViewModelFactory : IBarViewModelFactory
{
    [ImportMany]
    private IEnumerable<ExportFactory<IBarViewModel, IBarViewModelMetadata>> Factories { get; set; }

    // val is some metadata value to help decide which class to return.
    public IBarViewModel CreateBarViewModel(string val, string text)
    {
        IBarViewModel result = null;

        try
        {
            result = Factories.Single(x => String.Equals(x.Metadata.Value, val, StringComparison.OrdinalIgnoreCase))
                              .CreateExport()
                              .Value;

            result.Text = text;
        }
        catch (Exception ex) { ... }
        finally { ... }

        return result;
    }
} 
```

**IBarViewModel 实现：**

```
[ExportMetadata(typeof(IBarViewModel, ""))]
public sealed class BarViewModel : ViewModelBase, IBarViewModel
{
    [Import] private IServiceA ServiceA { get; set; }

    public string Text { get; set; }
}

[ExportMetadata(typeof(IBarViewModel, "x"))]
public sealed class SuperBarViewModel : ViewModelBase, IBarViewModel
{
    [Import] private IServiceA ServiceA { get; set; }
    [Import] private IServiceB ServiceB { get; set; }

    public string Text { get; set; }
} 
```

* * *

对于这两种情况，我选择使用字符串文本来区分`SuperBarViewModel`("x") 和`BarViewModel`("")，但您实际上可以选择任何您想要帮助选择的元数据。

**使用示例（适用于两种情况）：**

```
[Export]
public sealed class SomeClass
{
    [Import]
    private IBarViewModelFactory BarViewModelFactory { get; set; }

    public void SomeMethod()
    {
        // Get the "Super" version by passing in "x" (metadata).
        var barVM = BarViewModelFactory.CreateBarViewModel("x", "my text");

        // etc...
    }
} 
```

* * *

显然，您可以在此基础上做更多事情，例如创建自己的自定义`ExportAttribute`，而不是使用默认`ExportMetadataAttribute`导出元数据。这将允许您创建更复杂的元数据。此外，如果需要， `SatisfyImports`/是需要研究的东西。`SatisfyImportsOnce`基本上，您可以扩展此答案以自定义您的解决方案。

# objective-c - Xcode 告诉我我有一个“不完整的实现”

> ID：14978774
> 
> 赞同：1
> 
> 时间：2013-02-20T11:31:42.963
> 
> 标签：objective-c, xcode, implementation

我的老师给了我这个 main.m，我必须为其编写 .h 和 .m 方法。在我制作的 .m(not main) 文件中，我收到了来自 Xcode 的“不完整实现”警告。我已经为所有被调用的方法制定了方法，所以我无法弄清楚它为什么这么说。这是给我们的代码，我无法修改：

```
#import <Foundation/Foundation.h>
#import "ChutesAndLadders.h"
int main(int argc, const char * argv[])
{
    @autoreleasepool {
        ChutesAndLadders *cl = [[ChutesAndLadders alloc]init];
        [cl initBoard];
        [cl makeChutes:10];
        [cl makeLadders:10]
        int chutes=0;
        int ladders=0;
        for(int i=0;i<cl.board.count;i++){
            NSString * cell = (NSString *)[cl.board objectAtIndex:i];
            int additionalSpaces = (int)[cl addToMove:cell];
            if(additionalSpaces>0)
                ladders++;
            else if (additionalSpaces<0)
                chutes++;
        }
        [cl printBoard];
    }
    return 0;
} 
```

这是我编码的.h，我相信没问题：

```
#import <Foundation/Foundation.h>
@interface ChutesAndLadders : NSObject{
    @private
    NSMutableArray * board;
}
@property (readwrite, retain) NSMutableArray *board;
-(id) initBoard;
-(NSString *)addToMove: (NSString *) cell;
-(void)makeChutes: (int) length;
-(void)makeLadders: (int) length;
-(void)printBoard;
@end 
```

这是我的 .m，这是我在“@implementation ChutesAndLadders”行遇到问题的地方：

```
#import "ChutesAndLadders.h"
@implementation ChutesAndLadders//incomplete impementation????????????
@synthesize board=_board;
-(void) initBoard{
    //self = [super init];
    //if (self){
        _board = [board initWithCapacity: 100];
        //self._board=[[NSMutableArray alloc]initWithCapacity:100];
        for(int i =0; i < 100; i++){
            [_board addObject:@""];
        //}
    }
}
-(void)makeChutes: (int) length {
    //Make argument number of Chutes randomly across the board.
    for(int i = 0; i < length;){
        int random = arc4random_uniform(101);
        if ([[_board objectAtIndex:random] isEqual:@""]) {
            NSString *fString = [NSString stringWithFormat:@"C%d", length];
            [_board replaceObjectAtIndex:random withObject:fString];
            i++;
        }
    }
}
-(void)makeLadders: (int) length {
    //Make argument number of Ladders randomly across the board.
     for(int i = 0; i < length;){
        int random = arc4random_uniform(101);
        if ([[_board objectAtIndex:random] isEqual:@""]) {
                NSString *fString = [NSString stringWithFormat:@"L%d", length];
            [_board replaceObjectAtIndex:random withObject:fString];
            i++;
        }
    }
}
-(NSString *)addToMove: (NSString*) cell {
    if([[_board objectAtIndex:[cell integerValue]] isEqualToString:@"C10"]){
        return (@"-10");
     }
    if([[_board objectAtIndex:[cell integerValue]] isEqualToString:@"L10"]){
        return (@"10");
    }
     else
        return (@"0"); 
}
-(void) printboard {
    //Print the board in rows of 10 so that it looks like a square in console.
    for(int i=0; i < (_board.count/10); i++){
        for(int j = 0; j < 10; j++){
            NSLog(@"|");
            NSLog(@"%@", [_board objectAtIndex:(i+j)]);
            NSLog(@"|");
        }
        NSLog(@"\n");
    }
}
@end 
```

这是我在 Objective-C 中的第一个任务，一般来说是 Mac，我已经从事了一段时间，主要是研究/学习，我只是看不出我做错了什么。

我还没有运行这个程序，很抱歉你可能会看到任何其他愚蠢的错误，一旦我可以真正让它输出到控制台，我会弄清楚它们，这样我就可以看看它是否在做它应该做的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T11:40:25.043

通过左上角的三角形/感叹号按钮打开问题导航器：

![在此处输入图像描述](../Images/061b9ac09981c275a3b2480989656d65.png)

如果你用左边的小三角形扩展你的“不完整的实现”语义问题，你可以看到 XCode 投诉的细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T11:40:49.160

该方法在文件`initBoard`中具有不同的返回类型。`m`此外，Objective-C 区分大小写。`printBoard`并且`printboard`对于 obj-c 编译器不相等。顺便提一句。您应该`init...`只对构造函数使用名称。请参阅Apple 的[命名方法](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingMethods.html#//apple_ref/doc/uid/20001282-BCIGIJJF)文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T11:39:48.030

在您的 .h 文件中，有一个名为`-(void)printBoard;`But 在您的 .m 文件中的方法，它的名称是`-(void)printboard`. Objective-C 是案例密集型的。

而且，`-(id)initBoard;`和`-(void)initBoard`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T11:35:27.013

您已在头文件中定义`addToMove`和`printBoard`，但在 .m 文件中缺少它们。这就是警告的原因。

# android - 无法播放录制的音频文件

> ID：14978777
> 
> 赞同：2
> 
> 时间：2013-02-20T11:31:52.220
> 
> 标签：android, audio-recording, real-time-updates

我正在使用一个教程录制语音，并且为了录制我正在使用课程`AudioRecord`，因为我想显示带有一些噪音水平的进度条。我正在提供将存储音频数据的文件。随着获取音频数据，文件的大小正在增加。但是当我手动播放该录制的文件但它不播放任何东西时。谁能告诉我我错过了什么？

```
private class RecordAudio extends AsyncTask<Void, Void, Void> {

        boolean alertshown = false;
        boolean smsdone = false;
        boolean calldone = false;
        int blocksize = 256;
        @Override
        protected Void doInBackground(Void... params) {
            //isRecording = true;
            try {
                BufferedOutputStream dos = new BufferedOutputStream(new FileOutputStream(babyNoiseFile));
                DataOutputStream dosTemp = new DataOutputStream(new BufferedOutputStream(new FileOutputStream(babyNoiseTempFile)));

                int bufferSize = AudioRecord.getMinBufferSize(frequency,channelConfiguration, audioEncoding);
                AudioRecord audioRecord = new AudioRecord(MediaRecorder.AudioSource.MIC, frequency,channelConfiguration, audioEncoding, bufferSize);

                short[] buffer = new short[bufferSize];
                audioRecord.startRecording();

                while (isMonitoringStarted) {
                    int bufferReadResult = audioRecord.read(buffer, 0,bufferSize);

                    //for (int i = 0; i < buffer.length; i++) {
                    for (int i = 0; i < bufferReadResult; i++) {

                        prgrssbarNoiseStatus.setProgress(buffer[i]);
                        lastlevel = buffer[i];
                        //txtvwProgress.setText(""+lastlevel);
                        //System.out.println(lastlevel);
                        if (lastlevel > lowSensitivityLevel && lastlevel < mediumSensitivityLevel){
                            dos.write(buffer[i]);
                            publishProgress();
                            break;
                        } 
                        if (lastlevel > mediumSensitivityLevel && lastlevel < highSensitivityLevel) {
                            dos.write(buffer[i]);
                            publishProgress();
                            break;
                        }
                        if (lastlevel > highSensitivityLevel) {
                            dos.write(buffer[i]);
                            publishProgress();
                            break;
                        }

                    }
                    for (int i = 0; i < bufferReadResult; i++) {
                        dosTemp.writeShort(buffer[i]);

                    }
                    //publishProgress(new Integer(r));
                }
                audioRecord.stop();
                if (isMonitoringStarted) {

                }
                dos.close();
                dosTemp.close();
            } catch (Throwable t) {
                t.getStackTrace();
                t.printStackTrace();
                Log.e("AudioRecord", "Recording Failed");
            }
            return null;
        }

        protected void onProgressUpdate(Void... progress) {

            if (lastlevel > lowSensitivityLevel && lastlevel < mediumSensitivityLevel) {
                //islowFired = false;
                System.out.println("low");
                if (!islowFired) {
                    islowFired = true;
                    lowTimer = new LowActionTimer(2000, 1000);
                    lowTimer.start();
                }

                //Toast.makeText(HomeActivity.this, "Call will fire!!", Toast.LENGTH_SHORT).show();
            }
            if (lastlevel > mediumSensitivityLevel && lastlevel < highSensitivityLevel) {
                //if (islowFired) {
                lowTimer.cancel();
                mediumTimer = new MediumActionTimer(2000, 1000);
                mediumTimer.start();
                //}
                //Toast.makeText(HomeActivity.this, "email will fire!!", Toast.LENGTH_SHORT).show();
                System.out.println("medium");
            }
            if (lastlevel > highSensitivityLevel) {
                //Toast.makeText(HomeActivity.this, "notification will fire!!", Toast.LENGTH_SHORT).show();
                System.out.println("call will fire!!");
            }
}
        protected void onPostExecute(Void result) {

        }
    } 
```

提前致谢。

# git - tortoisegit 与分支一起工作并与原点合并

> ID：14978782
> 
> 赞同：1
> 
> 时间：2013-02-20T11:32:21.493
> 
> 标签：git, tortoisegit, assembla

我想知道将分支中的 1 个已更改文件合并回源源分支的最佳方法是什么，但不想推送所有已更改的文件，因为我有许多未准备好合并的已更改文件。例如，我可以只推送 1 个更改的文件来合并，而不是从我的分支更改的 3 个文件。有没有办法将您不想合并的那些设置为 tortoisegit 中的特定设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:44:07.287

是的，这是可能的。

首先，您应该创建一个完全镜像远程源分支的本地分支。我会告诉你命令行命令，当然你也可以使用 Tortoise Git。我们使用“tmp”作为临时本地分支的名称，使用“src”作为您当前正在使用的本地分支，并假设远程分支名称是 remotebranchname。

```
$ git fetch origin
$ git branch -b tmp origin/remotebranchname 
```

接下来，您将获得单个更改的文件。如果您对该文件的更改进行了一次不错的单次提交，则可以使用“cherry-pick”仅传输这一次提交。我将假设您没有在一次提交中进行这些更改，因此我们创建一个新的：

```
$ git checkout src mychangedfile 
```

这会将更改的文件提取到您的 tmp 分支中。现在你可以做一个新的提交，最后你可以把这个分支推送到 origin/remotebranch。

附带说明一下，我建议您尝试[Git Extensions](http://code.google.com/p/gitextensions/)。我觉得使用 Git Extensions 在 Windows 中使用 Git 比使用 Tortoise Git 更容易。

# java - 如何找到 int[][] Java 中所有值的总和？

> ID：14978783
> 
> 赞同：3
> 
> 时间：2013-02-20T11:32:22.917
> 
> 标签：java, int

我有一个整数数组'int像素[][]'的数组

我想找到所有这些的总和，这样我就可以找到平均像素值

这将用于我可以将像素的平均值设置为 pbm 图像的阈值

如果该值高于阈值，我将导出一个白色像素，如果低于阈值，我将导出一个黑色像素（只是为了提供一些上下文）

我假设下面的代码根本不正确，因为它的输出是 6.0 但我认为它是这样的

```
 double threshold = 0;
   for(int i = 0; i < pixels.length; i++)
   {
       threshold += (double)pixels[i][i];
   }
   System.out.print(threshold); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T11:35:31.297

你想迭代数组中的所有数字，你可以试试这个：

```
 double threshold = 0;
           for(int i = 0; i < pixels.length; i++)
           {
               for(int j=0;j<pixels[i].length;j++){
                   threshold += (double)pixels[i][j];
               }
           }
           System.out.print(threshold); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:35:34.433

你需要在`for`这里使用双精度。像这样的东西： -

```
for(int i = 0; i < pixels.length; i++){
        for(int i = 0; i < pixels[i].length; i++){
               threshold += (double)pixels[i][j];
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:36:24.107

您需要遍历数组中的每一行和每一列，因此需要 2 个 for 循环。您当前所做的仅涵盖以下内容：`(0,0), (1,1), (2,2), ...`.

这将起作用：（假设一个非锯齿状数组，至少对于阈值计算）

```
long sum = 0;
for (int i = 0; i < pixels.length; i++)
for (int j = 0; j < pixels[i].length; j++)
{
   sum += pixels[i][j];
}
double threshold = (double)sum / (pixels.length * pixels[0].length);
System.out.print(threshold); 
```

或者更简单地说：（假设一个非锯齿状数组，至少对于阈值计算）

```
long sum = 0;
for (int[] i: pixels)
for (int j: i)
{
   sum += j;
}
double threshold = (double)sum / (pixels.length * pixels[0].length);
System.out.print(threshold); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T11:37:16.840

暗示

你有一个二维数组，所以要添加每个元素，你需要遍历每一行的每一列。对于这 2 个 for 循环可能会有一些用处。

遍历每个值并添加它们

退出循环

将总和除以元素数以获得平均值（您可能需要考虑在此处键入强制转换）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T11:39:24.773

计算整数总和时不需要双精度数，这是一种浪费，使用长整数会更快

```
 long sum = 0;
    int n = 0;
    for (int[] a : pixels) {
        for (int e : a) {
            sum += e;
            n++;
        }
    }
    double avg = ((double) sum) / n; 
```

# macos - Code::Blocks OSX 上的控制台程序问题

> ID：14978786
> 
> 赞同：2
> 
> 时间：2013-02-20T11:32:28.717
> 
> 标签：macos, terminal, applescript, codeblocks, iterm

我通常在 CodeBlocks 中为算法问题做控制台应用程序，最近切换到 OSX Mountain Lion 机器。安装 xCode 和 CodeBlocks SP1 后我遇到了问题。

当我运行程序时，控制台终端应该会出现输出。此代码在首选项中，但它不起作用：

```
osascript -e 'tell app "Terminal"' -e 'activate' -e 'do script "$SCRIPT"' -e 'end tell' 
```

我有可能启动 iTerm2 窗口吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-04T13:59:02.637

osascript -e '告诉应用程序“iTerm”' -e '创建新终端' -e '告诉第一个终端' -e '激活当前会话' -e '启动会话“默认会话”' -e '告诉最后一个会话' -e '写文本“$SCRIPT”' -e '结束讲述' -e '结束讲述' -e '结束讲述'

# requirejs - Zurb Foundation 3 + RequireJS：插件加载问题

> ID：14978796
> 
> 赞同：4
> 
> 时间：2013-02-20T11:32:49.030
> 
> 标签：requirejs, zurb-foundation

我正在尝试使用 RequireJS 加载 Zurb Foundation 3。这是我的配置部分：

```
require.config({
    paths:
    {
        'jquery': 'libs/jquery/jquery',
        'foundation': 'libs/foundation/foundation.min',
        'foundation-init': 'libs/foundation/app'
    },
    shim:
    {
        'foundation': {
            deps: ['jquery']
        },
        'foundation-init': {
            deps: ['foundation']
        }
    }
}); 
```

然后，总是在主文件中，我包括 Foundation：

```
require(['foundation-init']); 
```

问题是，例如，顶栏没有像它应该做的那样展开（jquery 动画）（见这里： http: [//foundation.zurb.com/docs/navigation.php#topbarEx](http://foundation.zurb.com/docs/navigation.php#topbarEx)）。就像 Foundation jQuery 插件没有正确加载一样。正如我所读到的，这就是为什么在 Foundation 文档**中将脚本加载到 body 末尾的**原因。但是，很明显，使用 RequireJS 会稍微复杂一些。我已经按照 RequireJS 文档（“页面加载后加载代码”部分）中的建议进行了临时修复，设置了这样的超时：

```
setTimeout(function() { require(['foundation-init']); }, 500); 
```

我不认为这是一个好的解决方案。任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T12:40:03.640

**好的，我用一个小技巧**解决了这个问题！

正如我猜想*的那样，问题在于使用 Backbone 进行视图渲染后的新 DOM 部分没有绑定 Foundation jQuery 事件。*

我的解决方案是**创建一个新的插件函数`.foundation()`，它必须应用于 DOM 的一部分以在其上初始化 Foundation**。因此，我从以下位置修改`app.js`了 Foundation 包的文件：

```
;(function ($, window, undefined) {
  'use strict';

  var $doc = $(document),
      Modernizr = window.Modernizr;

  $(document).ready(function() {
    $.fn.foundationAlerts           ? $doc.foundationAlerts() : null;
    $.fn.foundationButtons          ? $doc.foundationButtons() : null;
    $.fn.foundationAccordion        ? $doc.foundationAccordion() : null;
    $.fn.foundationNavigation       ? $doc.foundationNavigation() : null;
    $.fn.foundationTopBar           ? $doc.foundationTopBar() : null;
    $.fn.foundationCustomForms      ? $doc.foundationCustomForms() : null;
    $.fn.foundationMediaQueryViewer ? $doc.foundationMediaQueryViewer() : null;
    $.fn.foundationTabs             ? $doc.foundationTabs({callback : $.foundation.customForms.appendCustomMarkup}) : null;
    $.fn.foundationTooltips         ? $doc.foundationTooltips() : null;
    $.fn.foundationMagellan         ? $doc.foundationMagellan() : null;
    $.fn.foundationClearing         ? $doc.foundationClearing() : null;

    $.fn.placeholder                ? $('input, textarea').placeholder() : null;
  });

  // UNCOMMENT THE LINE YOU WANT BELOW IF YOU WANT IE8 SUPPORT AND ARE USING .block-grids
  // $('.block-grid.two-up>li:nth-child(2n+1)').css({clear: 'both'});
  // $('.block-grid.three-up>li:nth-child(3n+1)').css({clear: 'both'});
  // $('.block-grid.four-up>li:nth-child(4n+1)').css({clear: 'both'});
  // $('.block-grid.five-up>li:nth-child(5n+1)').css({clear: 'both'});

  // Hide address bar on mobile devices (except if #hash present, so we don't mess up deep linking).
  if (Modernizr.touch && !window.location.hash) {
    $(window).load(function () {
      setTimeout(function () {
        window.scrollTo(0, 1);
      }, 0);
    });
  }

})(jQuery, this); 
```

到：

```
;(function ($, window, undefined) {
  'use strict';

  $.fn.foundation = function () {
    $.fn.foundationAlerts           ? $(this).foundationAlerts() : null;
    $.fn.foundationButtons          ? $(this).foundationButtons() : null;
    $.fn.foundationAccordion        ? $(this).foundationAccordion() : null;
    $.fn.foundationNavigation       ? $(this).foundationNavigation() : null;
    $.fn.foundationTopBar           ? $(this).foundationTopBar() : null;
    $.fn.foundationCustomForms      ? $(this).foundationCustomForms() : null;
    $.fn.foundationMediaQueryViewer ? $(this).foundationMediaQueryViewer() : null;
    $.fn.foundationTabs             ? $(this).foundationTabs({callback : $.foundation.customForms.appendCustomMarkup}) : null;
    $.fn.foundationTooltips         ? $(this).foundationTooltips() : null;
    $.fn.foundationMagellan         ? $(this).foundationMagellan() : null;
    $.fn.foundationClearing         ? $(this).foundationClearing() : null;
    $.fn.placeholder                ? $(this).find('input, textarea').placeholder() : null;
  };

  var $doc = $(document),
      Modernizr = window.Modernizr;

  $(document).ready(function() {
    $doc.foundation();
  });

  // UNCOMMENT THE LINE YOU WANT BELOW IF YOU WANT IE8 SUPPORT AND ARE USING .block-grids
  // $('.block-grid.two-up>li:nth-child(2n+1)').css({clear: 'both'});
  // $('.block-grid.three-up>li:nth-child(3n+1)').css({clear: 'both'});
  // $('.block-grid.four-up>li:nth-child(4n+1)').css({clear: 'both'});
  // $('.block-grid.five-up>li:nth-child(5n+1)').css({clear: 'both'});

  // Hide address bar on mobile devices (except if #hash present, so we don't mess up deep linking).
  if (Modernizr.touch && !window.location.hash) {
    $(window).load(function () {
      setTimeout(function () {
        window.scrollTo(0, 1);
      }, 0);
    });
  }

})(jQuery, this); 
```

* * *

关于 RequireJS，有必要包含所有 Foundation (ver 3.2.5) 插件文件，而不是缩小的插件文件。所以，我的`main.js`样子是这样的：

```
require.config({
    paths:
    {
        'jquery': 'libs/jquery/jquery',
        'underscore': 'libs/underscore/underscore',
        'backbone': 'libs/backbone/backbone',
        'jquery-event-move': 'libs/foundation/jquery.event.move',
        'jquery-event-swipe': 'libs/foundation/jquery.event.swipe',
        'jquery-placeholder': 'libs/foundation/jquery.placeholder',
        'foundation-modernizr': 'libs/foundation/modernizr.foundation',
        'foundation-accordion': 'libs/foundation/jquery.foundation.accordion',
        'foundation-alerts': 'libs/foundation/jquery.foundation.alerts',
        'foundation-buttons': 'libs/foundation/jquery.foundation.buttons',
        'foundation-clearing': 'libs/foundation/jquery.foundation.clearing',
        'foundation-forms': 'libs/foundation/jquery.foundation.forms',
        'foundation-joyride': 'libs/foundation/jquery.foundation.joyride',
        'foundation-magellan': 'libs/foundation/jquery.foundation.magellan',
        'foundation-media-query-toggle': 'libs/foundation/jquery.foundation.mediaQueryToggle',
        'foundation-navigation': 'libs/foundation/jquery.foundation.navigation',
        'foundation-orbit': 'libs/foundation/jquery.foundation.orbit',
        'foundation-reveal': 'libs/foundation/jquery.foundation.reveal',
        'foundation-tabs': 'libs/foundation/jquery.foundation.tabs',
        'foundation-tooltips': 'libs/foundation/jquery.foundation.tooltips',
        'foundation-topbar': 'libs/foundation/jquery.foundation.topbar',
        'foundation-app': 'libs/foundation/app',
    },
    shim:
    {
        'underscore': {
            deps: ['jquery'],
            exports: '_'
        },
        'backbone': {
            deps: ['underscore'],
            exports: 'Backbone'
        },
        'models/User': {
            deps: ['backbone', 'environment'],
            exports: 'User'
        },
        'models/Token': {
            deps: ['backbone', 'environment'],
            exports: 'Token'
        },
        'jquery-event-move': {
            deps: ['jquery']
        },
        'jquery-event-swipe': {
            deps: ['jquery']
        },
        'jquery-placeholder': {
            deps: ['jquery']
        },
        'foundation-modernizer': {
            deps: ['jquery']
        },
        'foundation-accordion': {
            deps: ['jquery']
        },
        'foundation-alerts': {
            deps: ['jquery']
        },
        'foundation-buttons': {
            deps: ['jquery']
        },
        'foundation-clearing': {
            deps: ['jquery']
        },
        'foundation-forms': {
            deps: ['jquery']
        },
        'foundation-joyride': {
            deps: ['jquery']
        },
        'foundation-magellan': {
            deps: ['jquery']
        },
        'foundation-media-query-toggle': {
            deps: ['jquery']
        },
        'foundation-navigation': {
            deps: ['jquery']
        },
        'foundation-orbit': {
            deps: ['jquery']
        },
        'foundation-reveal': {
            deps: ['jquery']
        },
        'foundation-tabs': {
            deps: ['jquery']
        },
        'foundation-tooltips': {
            deps: ['jquery']
        },
        'foundation-topbar': {
            deps: ['jquery']
        },
        'foundation-app': {
            deps: [
                'jquery',
                'jquery-event-move',
                'jquery-event-swipe',
                'jquery-placeholder',
                'foundation-modernizr',
                'foundation-alerts',
                'foundation-buttons',
                'foundation-clearing',
                'foundation-forms',
                'foundation-joyride',
                'foundation-magellan',
                'foundation-media-query-toggle',
                'foundation-navigation',
                'foundation-orbit',
                'foundation-reveal',
                'foundation-tabs',
                'foundation-tooltips',
                'foundation-topbar',
            ]
        },
    }
});

// Requiring Foundation framework
require(['foundation-app']);

// Instantiating MVC
require([
    'app',
], function(App)
{
    App.initialize();
}); 
```

* * *

最后，为了使 Backbone 视图能够使用 Foundation 正确呈现（至少使用新的 DOM 部分），我确实喜欢这样：

```
define([
    'jquery',
    'underscore',
    'backbone',
    'foundation-app'
], function($, _, Backbone)
{
    var FoundationView = Backbone.View.extend(
    {
        el: $('#view-placeholder'),

        initialize: function()
        {
            this.on('post-render', this.onPostRender, this);
        },

        render: function(content)
        {
            var content = 'new dom section';
            $(this.el).html(content);

            this.trigger('post-render');
        },

        onPostRender: function()
        {
            $(this.el).foundation();
        }
    });

    return FoundationView;
}); 
```

# python - 尝试导入 python 模块时的疯狂行为

> ID：14978801
> 
> 赞同：4
> 
> 时间：2013-02-20T11:33:05.077
> 
> 标签：python, django, pip, python-module, django-tagging

我想用 Apache mod-wsgi 部署的 django webapp 有一些问题，我已经将它们追溯到这一行（缺少 django-tagging 模块）：

```
[2013 年 2 月 20 日星期三 13:08:42] [错误] [客户端 172.19.130.50] ImportError: No module named tagging

```

现在，这是我尝试以 root 和 apache 用户身份运行 pip-python（我使用的是 CENTOS 6）时的输出：

```
[root@app1 site-packages]# pip-python freeze | grep 标签
django 标记==0.3.1
django-taggit==0.9.3

```

标记已安装...

```
[root@app1 站点包]# sudo -u apache pip-python freeze | grep 标签
django 标记==0.3.1
django-taggit==0.9.3

```

Apache用户也这么说！

```
[root@app1 /]#python
Python 2.6.6（r266:84292，2012 年 9 月 11 日，08:34:23）
[GCC 4.4.6 20120305 (Red Hat 4.4.6-4)] 在 linux2 上
输入“帮助”、“版权”、“信用”或“许可”以获取更多信息。
>>> 导入标记
>>>

```

好的root可以导入标签！

```
[root@app1 /]# sudo -u apache python
Python 2.6.6（r266:84292，2012 年 9 月 11 日，08:34:23）
[GCC 4.4.6 20120305 (Red Hat 4.4.6-4)] 在 linux2 上
输入“帮助”、“版权”、“信用”或“许可”以获取更多信息。
>>> 导入标记
回溯（最近一次通话最后）：
  文件“”，第 1 行，在
ImportError：没有名为标记的模块
>>>

```

但是apache用户不能！！！！！！我怎样才能使这项工作????

我已经双重和三重检查了 /usr/lib/python2.6/site-packages/ 的所有权限以进行 django-tagging，它们与我的其他包相同。

**更新 1：** 我真的不记得我是如何安装 django-tagging 模块的 - 但可能是 root 用户，因为 apache 无法全局安装模块！

**更新 2：** 这是 martijn-pieters 的建议的输出：

```
[root@app1 /]# sudo -u apache python -c 'import sys; 打印 sys.path'
['', '/usr/lib64/python2.6/site-packages/Twisted-12.1.0-py2.6-linux-x86_64.egg', '/usr/lib/python2.6/site-packages/django_cas -2.1.1-py2.6.egg', '/usr/lib64/python26.zip', '/usr/lib64/python2.6', '/usr/lib64/python2.6/plat-linux2', ' /usr/lib64/python2.6/lib-tk'、'/usr/lib64/python2.6/lib-old'、'/usr/lib64/python2.6/lib-dynload'、'/usr/lib64/ python2.6/site-packages'，'/usr/lib/python2.6/site-packages'，'/usr/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg-info ']
[root@app1 /]# python -c 'import sys; 打印 sys.path'
['', '/usr/lib64/python2.6/site-packages/Twisted-12.1.0-py2.6-linux-x86_64.egg', '/usr/lib/python2.6/site-packages/django_cas -2.1.1-py2.6.egg', '/usr/lib64/python26.zip', '/usr/lib64/python2.6', '/usr/lib64/python2.6/plat-linux2', ' /usr/lib64/python2.6/lib-tk'、'/usr/lib64/python2.6/lib-old'、'/usr/lib64/python2.6/lib-dynload'、'/usr/lib64/ python2.6/site-packages'，'/usr/lib/python2.6/site-packages'，'/usr/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg-info ']
[root@app1 /]# sudo -u apache head `which pip-python`
#!/usr/bin/python
# EASY-INSTALL-ENTRY-SCRIPT: 'pip==0.8','console_scripts','pip'
__requires__ = 'pip==0.8'
导入系统
从 pkg_resources 导入 load_entry_point

如果 __name__ == '__main__'：
    系统退出（
        load_entry_point('pip==0.8', 'console_scripts', 'pip')()
    )
[root@app1 /]# head `which pip-python`
#!/usr/bin/python
# EASY-INSTALL-ENTRY-SCRIPT: 'pip==0.8','console_scripts','pip'
__requires__ = 'pip==0.8'
导入系统
从 pkg_resources 导入 load_entry_point

如果 __name__ == '__main__'：
    系统退出（
        load_entry_point('pip==0.8', 'console_scripts', 'pip')()
    )

```

完全一样:(

**更新 3：** 是的，apache 用户可以加载其他模块：

```
[root@app1 /]# sudo -u apache python
Python 2.6.6（r266:84292，2012 年 9 月 11 日，08:34:23）
[GCC 4.4.6 20120305 (Red Hat 4.4.6-4)] 在 linux2 上
输入“帮助”、“版权”、“信用”或“许可”以获取更多信息。
>>> 导入 django
>>> 进口扭曲
>>> 进口开罗

```

**更新4：**我讨厌自己。问题是 /usr/lib/python2.6/site-packages/tagging/ 目录的访问权限！它们是 drw-r--r-- (644) 而不是正确的 drwxr-xr-x(755)，因此 apache 用户无法进入目录:(

现在一切正常，感谢所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:25:30.797

我经历过与这种行为类似的事情，最终将要导入的模块的确切路径添加到 Django wsgi.py 文件中：

```
import sys
PACKAGES ='/usr/local/lib/python2.6/dist-packages/'
sys.path.append(PACKAGES + 'django_compressor-1.1.1-py2.6.egg') 
```

希望能帮助到你。

谁该受责备？不确定，也许是 apache 或 mod_wsgi。这在 Ubuntu 10.04 的 apache2 中发生在我身上。Debian stable 和 testing 中的 apache2 中的最新设置不再需要 sys.path.append。

# java - 突出显示 JavaFX 2.0 单元格的文本属性中的子字符串

> ID：14978803
> 
> 赞同：1
> 
> 时间：2013-02-20T11:33:06.363
> 
> 标签：java, javafx-2

例如，是否可以通过为子字符串提供另一种颜色来突出显示 JavaFX 2 中 TableView 单元格内的子字符串？如果是，这如何实现？

很高兴有任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:13:47.917

Java7 的一种可能的解决方案。为您的细胞使用[细胞工厂](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TableColumn.html#setCellFactory%28javafx.util.Callback%29)。从工厂返回一个[TextField](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TextField.html)。将 TextField 设置为[不可编辑](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TextInputControl.html#setEditable%28boolean%29)。使用 TextField 的方法选择要突出显示[的文本（可能需要](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TextInputControl.html#selectPositionCaret%28int%29)[Platform.runLater](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html#runLater%28java.lang.Runnable%29)方法来执行此操作，并且可能需要聚焦该字段以允许选择文本）。一旦选择完成（并真正显示），[禁用鼠标输入](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#setMouseTransparent%28boolean%29)和TextField 上的[焦点遍历](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#setFocusTraversable%28boolean%29)，以便用户无法更改选择，也可能在 Platform.runLater 中。

对于 Java8，您可以执行类似的操作，但不要使用 TextField，而是使用[TextFlow](http://download.java.net/jdk8/jfxdocs/javafx/scene/text/TextFlow.html)并使用 css 或 Java API 设置文本流中的子文本样式。

如果您只想突出显示单元格中的所有文本，而不是其中的一部分，那么您可以使用标准的[Label](http://docs.oracle.com/javafx/2/api/javafx/scene/control/Label.html)和 css 样式。部分文本突出显示的另一种解决方案是使用 FlowPane，其中包含多个标签，每个标签都有不同的样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-27T01:31:46.107

有很多方法可以突出显示 tableview 单元格的子字符串。我用过`HBox`，`label`而且看起来不错。

这是我的代码：

```
public Callback<TableColumn<Address, String>, TableCell<Address, String>> getCellFactory() {
        return new Callback<TableColumn<Address, String>, TableCell<Address, String>>() {
            @Override
            public TableCell<Address, String> call( final TableColumn<Address, String> param ) {
                final TableCell<Address, String> cell = new TableCell<Address, String>() {
                    @Override
                    protected void updateItem( final String value, final boolean empty ) {
                        setGraphic( null );
                        if( null != getTableRow() && !empty ) {
                            final HBox hbox = new HBox();
                            hbox.setAlignment( Pos.CENTER_LEFT );
                            hbox.getChildren().clear();
                            if( null == value ) {
                                return;
                            }

                        final int index = value.toLowerCase().indexOf(str);

                        if( -1 == index ) {
                            //no match
                            hbox.getChildren().add( new Label( value ) );
                        } else {
                            //part of string before match
                            hbox.getChildren().add( new Label( value.substring( 0, index ) ) );
                            //matched part
                            final Label label = new Label( value.substring( index, index + str.length() ) );
                            label.setStyle( "-fx-background-color: #FFFFBF;-fx-text-fill: #FF0000;" );
                            hbox.getChildren().add( label );
                            //part of string after match
                            final int lastPartIndex = index + str.length();
                            if( lastPartIndex < value.length() ) {
                                hbox.getChildren().add( new Label( value.substring( lastPartIndex ) ) );
                            }
                        }
                        setGraphic( hbox );
                    }
                }
            };
            return cell;
        }
    };
} 
```

# api - 如何根据 cj api 中的类别检索产品目录？

> ID：14978805
> 
> 赞同：6
> 
> 时间：2013-02-20T11:33:13.370
> 
> 标签：api, cj

我正在使用 CJ API，我们需要根据类别检索所有产品目录。任何人使用这种类型的概念，请与我分享

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T04:08:20.980

**更新的答案** 我为在 Commission Junction 测试 REST API 而编写的一个小脚本。

**PHP代码：**

```
<?php

function ConnectToCJ() 
{
    global $sort_order, $sort_by;

    //
    // Build REST URI for product search. Refer to 
    // documentation for more request parameters.
    //
    $URI = 'https://product-search.api.cj.com/v2/product-search?'.
        'website-id=<INSERT ID>'.   // USE YOUR OWN.
        '&low-price=1'.
        '&records-per-page=25'.
        '&sort-order='. $sort_order .
        '&sort-by='. $sort_by .
        '&keywords='. rawurlencode($_GET['keywords']);

    $context = stream_context_create(
    array(
    'http' => array(
        'method' => 'GET',
        'header' => 'Authorization: ' . // USE YOUR OWN.
            '0012345b5ffdb74cd401e1aade0f69cadca29c834781c0936'.
            'b0b0836383b4e3e8dd7b406612347c3813bda24f8354dd649'.
            '6679031d8bc46f0dea1943a747ae0025/0093500ab1417918'.
            'f621234038b1234e8c4b0b22ea9f9cbc1db37a592247676ae'.
            'c528388bad7a06c9532c46fba2d0815e81e1234a9b25d9173'.
            '2f46f93123444dc1'
        )
    ));

    $response = new SimpleXMLElement(file_get_contents($URI, false, $context));
    return $response;
}

// A separate function to parse data.
function FormatCJResponse($data) 
{
    global $sort_order;

    $ProductList = '<table border="0" cellspacing="2" cellpadding="2" style="width:800px; margin: auto 0px">'.
            '<tr style="font-weight:bold">'.
            '<td><a href="?keywords='. rawurlencode($_GET['keywords']) .'&sort-by=name&sort-order='. SetOrder('name') .'>Product Name</a></td>'.
            '<td>Advertiser Name</td>'.
            '<td><a href="?keywords='. rawurlencode($_GET['keywords']) .'&sort-by=price&sort-order='. SetOrder('price') .'>Price</a></td>'.
            '<td>Description</td>'.
            '<td>Image</td>'.
            '</tr>';

    $attributes = $data->products->attributes();
    if ($attributes->{'total-matched'} == '0')
        $ProductList .= '<tr><td colspan="5">No products found ...</td></tr>';

    foreach ($data->products[0] as $product) 
    {
        // Sanitize data.
        $price = number_format((float)$product->price, 2, '.', ' ');

        $image = '<img src="ImageHandler.php?fileName='. 
                $product->{'image-url'} .'">';

        // Add to list.
        $ProductList .= '<tr><td colspan="5"> </td></tr>'.
        '<tr>'.
        '<td valign="top">'. $product->name .'</td>'.
        '<td valign="top">'. $product->{'advertiser-name'} .'</td>'.
        '<td valign="top">'. $price .' '. $product->currency .'</td>'.
        '<td valign="top">'. $product->description .'</td>'.
        '<td valign="top">'. $image .'</td>'.
        '</tr>';
    }

    $ProductList .= '</table>';
    return $ProductList;
}

// Sorts out individual sorting.
function SetOrder($param)
{
    global $sort_by, $sort_order;

    if ($sort_by == $param && $sort_order == 'asc') {
        $order = 'desc" title="Sort by descending order"';
    } else {
        $order = 'asc" title="Sort by ascending order"';
    }

    return $order;
}

if (isset($_GET['keywords'])) {
    if ($_GET['keywords'] != '') {

        // Sort order.
        if (!isset($_GET['sort-order'])) {
            $sort_order = 'asc';
        } else {
            switch ($_GET['sort-order']) {
            case 'asc':
                $sort_order = 'asc';
                break;
            case 'desc':
                $sort_order = 'desc';
                break;
            default:
                $sort_order = 'asc';
            }
        }

        // Sort by
        if (!isset($_GET['sort-by']))
            $sort_by = 'name';
        else
            $sort_by = $_GET['sort-by'];

        // Connect to CJ and get formatted results.
        $ProductList = FormatCJResponse(ConnectToCJ());
    }
}
?> 
```

只需检查并打印 $ProductList 中的内容：

# css - 你可以对 :before/:after 伪元素 (content:url(image)) 应用宽度吗？

> ID：14978807
> 
> 赞同：12
> 
> 时间：2013-02-20T11:33:18.493
> 
> 标签：css, responsive-design, pseudo-element, css-content

这是对我最近的问题的补充： [是否可以使用伪元素使包含元素环绕绝对定位的元素（如 clearfix）？](https://stackoverflow.com/questions/14977324/is-it-possible-to-use-pseudo-elements-to-make-containing-elements-wrap-around-an)

JSFiddle：http: [//jsfiddle.net/derekmx271/T7A7M/](http://jsfiddle.net/derekmx271/T7A7M/)

我正在尝试使用伪元素来“清除”绝对定位的图像。我已经尽可能地将相同的图像显示在幻灯片后面，但似乎无法将宽度应用于插入的图像。我疯了吗，或者你不能对内容为内容的伪元素应用宽度：url(img/image.jpg)？我尝试了不同的显示变体：块等，但无济于事......

```
#slider ul:after {
  content: url(http://www.cs7tutorials.com/img/slide1.jpg);
  display: block;
  position:relative;
  width:70px;
} 
```

我需要将伪元素图像的宽度设置为 100%，将最大宽度设置为 800px，以便它具有与我的幻灯片相同的尺寸。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-20T12:01:31.410

`content`你没疯：用`url()`, `image()`, `image-set()`,`element()`或 CSS 渐变插入的图片确实不可能改变尺寸。图像始终按原样呈现。这称为替换内容或[替换元素](http://www.w3.org/TR/CSS21/conform.html#replaced-element)（除非我们在这里不讨论元素）。

*但是，由于可以使用*[CSS2.1 规范第 10 节中的](http://www.w3.org/TR/CSS21/visudet.html)`width`描述`height`来调整被替换元素的大小，这引发了为什么这些属性似乎不适用于这里的问题。看起来，这个问题的答案是属性确实适用，但适用于*伪元素框*——你可以通过给你的伪元素一个背景颜色来看到这一点。图像不是替换伪元素框本身，而是呈现为伪元素框的*子*元素，因此根本无法设置样式（因为它需要另一个不存在的伪元素）。

 **这就引出了另一个问题：为什么它不完全替换伪元素框？不幸的是，CSS2.1 根本没有指定这种行为，因此[达成一致的实现是将内容呈现为伪元素框的子元素](http://lists.w3.org/Archives/Public/www-style/2015Feb/0383.html)：

> CSS2.1 并没有真正明确定义 ::before 和 ::after 上的“内容”处理模型，但 CSS 2.1 中的信息示例，“内容”指定事物*列表*的事实，以及对一致性的渴望导致 UA 行为如下：'content' 属性指定成为 ::before 或 ::after 框的子项的事物列表。
> 
> -鲍里斯

希望这将在 CSS Generated Content level 3 中得到进一步解决，重写工作刚刚开始。

同时，如果您希望能够调整`:after`伪元素和生成的图像的大小，则需要将其应用为背景图像，并且——假设浏览器支持不是问题——使用`background-size`with`width`并`height`缩放它（基于这些属性适用于伪元素框的理解）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:57:13.583

看看演示使用`background-image`：http: [//jsfiddle.net/T7A7M/12/](http://jsfiddle.net/T7A7M/12/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-04T21:00:21.270

您可以设置宽度或高度，但不能同时设置，方法是使用`display: flex`并设置`flex-direction`到要设置的尺寸的相反轴。

例如：

```
.setWidth::before {
    content: url("myImg.png")
    display: flex;
    flex-direction: column;
    width: 200px;
}

.setHeight::before {
    content: url("myImg.png")
    display: flex;
    flex-direction: row;
    height: 200px;
} 
```

[演示在这里。](https://codepen.io/neil-h/pen/GRWKdWQ)**

# android - 在 Android 中拦截传出的短信

> ID：14978813
> 
> 赞同：1
> 
> 时间：2013-02-20T11:33:41.250
> 
> 标签：android, encryption, sms

我正在寻找为 android 编写一个自动加密/解密 sms/mms 应用程序。加密消息并将其发送到接收电话上的解密位置的想法。

虽然很容易在接收时自动解密消息，但您只需对其进行解密、删除并再次添加即可。在发送消息时拦截并更改它似乎很困难。

无论如何，在手机实际发送之前阅读和编辑正在发送的短信。因此，发送和接收手机上可能有解密密钥，而实际上不必使用不同的应用程序或手动加密来处理，手机会自动执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:52:39.560

**`ContentObserver`**对您发送的消息实施 a以拦截任何传出的短信。

```
ContentResolver mContentResolver = context.getContentResolver();
mContentResolver.registerContentObserver(Uri.parse("content://sms/out"),true, mObserver); 
```

用于**`Cursor`**转到任何短信并提取短信正文。

使用类似的东西

```
Uri smsUri = Uri.parse("content://sms/out");
Cursor mCursor = this.getContentResolver().query(smsUri, null, null, null, null);
mCursor.moveToNext();
mCursor.getString(mCursor.getColumnIndex("body")); 
```

看看[这个 StackOverflow question](https://stackoverflow.com/questions/5808577/listen-to-outgoing-sms-or-sent-box) ..它详细地回答了你的问题。

# c# - 从后面的代码中移动 WPF 画布上的矩形

> ID：14978820
> 
> 赞同：2
> 
> 时间：2013-02-20T11:34:04.253
> 
> 标签：c#, xaml, animation, coordinates

在我的 XAML 中，我在网格中有一个列表框和一些文本框，在画布中有一个反应角：

```
Title="MainWindow" Height="350" Width="500" WindowStartupLocation="CenterScreen">
<Grid>
<ListBox HorizontalAlignment="Left"
         Margin="12,12,0,12"
         Name="listBoxContainer"
         Width="120">
    <ListBoxItem Content="Item1" />
    <ListBoxItem Content="Item2" />
    <ListBoxItem Content="Item3" />
</ListBox>

<TextBox Height="23"
         Margin="138,12,85,0"
         Name="textBoxAddress"
         VerticalAlignment="Top" />

<TextBox Margin="138,41,85,12"
         Name="textBoxMsg" />

<Button Content="Button"
        Name="buttonAnimation"
        Width="75"
        Margin="0,10,5,0"
        Height="23"
        VerticalAlignment="Top"
        HorizontalAlignment="Right"
        Click="Button1Click" />

<Canvas Name="CanvasAnimation">
    <Rectangle Canvas.Left="408" 
               Canvas.Top="140" 
               Height="50" 
               Name="rectAnimation" 
               Stroke="Black" 
               Width="50" />
</Canvas>
</Grid> 
```

从我后面的代码中，我可以将矩形从它的位置移动到一段距离：

```
private void Button1Click(object sender, RoutedEventArgs e)
{
    var trs = new TranslateTransform();
    var anim3 = new DoubleAnimation(0, -200, TimeSpan.FromSeconds(2));
    trs.BeginAnimation(TranslateTransform.XProperty, anim3);
    trs.BeginAnimation(TranslateTransform.YProperty, anim3);
    CanvasAnimation.RenderTransform = trs;
} 
```

我想知道如何通过坐标将矩形从其位置移动到另一个位置？就像让矩形移动到列表框或文本框的位置一样

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:41:53.863

请注意，以下代码假定画布上的按钮坐标和表单上的坐标相同。这不是最佳的，您应该找到更好的解决方案，例如将按钮放在画布上。

```
private void Button1Click(object sender, RoutedEventArgs e)
{
  //Point relativePoint = buttonAnimation.TransformToAncestor(this).Transform(new Point(0, 0));
  Point relativePoint = buttonAnimation.TransformToVisual(CanvasAnimation).Transform(new Point(0, 0));

  var moveAnimX = new DoubleAnimation(Canvas.GetLeft(rectAnimation), relativePoint.X, new Duration(TimeSpan.FromSeconds(10)));
  var moveAnimY = new DoubleAnimation(Canvas.GetTop(rectAnimation), relativePoint.Y, new Duration(TimeSpan.FromSeconds(10)));

  rectAnimation.BeginAnimation(Canvas.LeftProperty, moveAnimX);
  rectAnimation.BeginAnimation(Canvas.TopProperty, moveAnimY);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T03:32:21.843

很抱歉回答迟了，但听起来你想设置一个依赖属性。

```
rectAnimation.SetValue(Canvas.TopProperty, 0.0);
rectAnimation.SetValue(Canvas.LeftProperty, 0.0); 
```

这将（立即）将矩形放置在包含画布的顶部和左侧。

# javascript - Javascript原型函数：时间字符串的十进制时间值

> ID：14978823
> 
> 赞同：5
> 
> 时间：2013-02-20T11:34:13.163
> 
> 标签：javascript, time, function-prototypes

在我目前正在使用 JavaScript 进行的一个项目中，我使用的是十进制格式，因此它更容易计算，而不是在字符串中使用小时/分钟格式（日历相关项目）。但是，要在用户屏幕上显示时间，时间码必须显示为 hh:mm。

我认为为此使用 String 原型函数会很棒，因为它允许我使用如下代码：

```
var time = 8.75;
document.write("Meeting at "+time.toTime()); // writes: Meeting at 8:45 
```

到目前为止，我几乎可以使用：

```
String.prototype.toTime = function(){
    var hrs = this.toString().slice(0,this.indexOf("."));
    var min = Math.round(this.toString().slice(this.indexOf("."))/100*60);
    min = min<10 ? "0"+min : min.toString();
    return hrs+":"+min;
} 
```

但是，问题在于，这仅在变量`time`是字符串时才有效。否则它将给出未定义的错误。

有没有办法将原型应用于 JavaScript 中的不同对象，这样我就不必使用了`time.toString().toTime()`？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T11:42:34.773

首先，您可以添加到`Number`原型中。许多人会警告不要修改原型，这在许多情况下是合理的。如果第 3 方脚本有可能与您的脚本一起运行，那么修改原型是很危险的。

其次，我稍微简化了你的代码，使用模数和下限来计算小时和分钟......

```
Number.prototype.toTime = function(){
  var hrs = Math.floor(this)
  var min = Math.round(this%1*60)
  min = min<10 ? "0"+min : min.toString();
  return hrs+":"+min;
}

var time = 8.25;
console.log("Meeting at "+time.toTime()); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-20T11:41:52.013

您可以使用`Object.prototype.toTime`.

# jquery - IE9文件输入触发错误点击事件

> ID：14978828
> 
> 赞同：0
> 
> 时间：2013-02-20T11:34:17.530
> 
> 标签：jquery, internet-explorer

我有一些 jQuery 允许用户通过单击“全选”复选框来选择所有复选框。

我的 jQuery 看起来像这样：

```
$('.select-all').on('click', function(){

    // alert($(this).attr('name')); - For debugging

    checkboxes = $(this).closest('.form-item').find('input[type=checkbox]');

    if($(this).attr('checked'))
    {
        $(checkboxes).prop('checked', true);
    }
    else
    {
        $(checkboxes).prop('checked', false);
    }

}); 
```

我的“全选”复选框有一个“全选”类，单击它会触发此 jQuery 代码。这一切都很好。

在表格的下方还有一个文件输入。现在由于某种原因在 IE9 中单击文件输入字段时，它也会触发上面的代码。两者没有任何联系。

这是我的文件输入 HTML：

```
<div id="form<?php echo $this->id; ?>_file" class="form-item">

<label for="file" class="mandatory"><span class="invisible">Mandatory field</span> Select file*</label>

    <span class="clearfix"></span>

    <input id="file-input" name="file" type="file" />
    <p class="tl_help tl_tip">Select the file to upload.</p>

</div> 
```

这是复选框的 HTML：

```
<div id="form52_country" class="form-item checkbox-group">
       <label for="country" class="mandatory"><span class="invisible">Mandatory field</span> Country*</label>
       <span class="clearfix"></span>

        <input class="select-all" type="checkbox" name="sa" value="">Select all<br>                      
        <input  type="checkbox" name="country[]" value="al"/>Albania<br>                     
        <input  type="checkbox" name="country[]" value="ar"/>Argentina<br>

        // Rest of checkboxes continue as above
</div> 
```

这是它变得更加陌生的地方。当我取消注释 jQuery 代码中的警报并尝试单击文件输入时，它会提醒我的“全选”复选框按钮的名称。

有什么想法吗？我无法理解它，它只发生在 IE 中。似乎它将我的文件输入字段视为我的“全选”复选框字段。

谢谢

**编辑 - 已解决**

设法追查造成这种情况的原因。在解决此问题后，我没有在表单的其他地方关闭我的标签标签之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:36:36.723

我不知道这是你冲突的原因..我在 ie8 中遇到了同样的问题

```
 <input id="file-input" name="file" type="file" /> 
```

输入被关闭为

```
 <input id="file-input" name="file" type="file" ></input> 
```

# c# - 如何将 BorderBrush 颜色更改为默认值

> ID：14978833
> 
> 赞同：1
> 
> 时间：2013-02-20T11:34:31.283
> 
> 标签：c#, .net, wpf, xaml, controltemplate

我正在尝试将 TextBox 的 BorderBrush 颜色更改为默认值。查看 ControlTemplate 后，似乎没有指定默认颜色。知道默认颜色是什么吗？

[这](http://msdn.microsoft.com/en-us/library/ms752068%28v=vs.85%29.aspx)似乎是 ControlTemplate。

我找到了许多 XAML 的示例，但是我需要在代码隐藏中完成，如下所示：

```
txtValue1.BorderBrush = Brushes.Gray; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T11:46:01.983

如果您确实想要该属性的默认值，请调用

```
txtValue1.ClearValue(Border.BorderBrushProperty); 
```

但这会将属性更改回其初始值（在这种情况下，我猜是黑色或透明）。我不确定，但我想你想要原始颜色给出当前使用的主题。因此，如果您希望清除本地更改，您可以使用[GetLocalValueEnumerator](http://msdn.microsoft.com/en-us/library/system.windows.dependencyobject.getlocalvalueenumerator.aspx)并查询所有本地设置属性并找到您要清除值的属性。但是，如果您对正在使用的元素有自定义样式，并且您想从中恢复一个属性，我认为这并不容易。

就此而言，[这](http://msdn.microsoft.com/en-us/library/ms743230.aspx)是一本重要的读物。

# objective-c - 宏和 ARC 的奇怪问题

> ID：14978834
> 
> 赞同：0
> 
> 时间：2013-02-20T11:34:35.523
> 
> 标签：objective-c, cocoa, macros, automatic-ref-counting, llvm

好的，这是我的问题...

**我的宏定义**

```
#define DRK_INIT(X) -(id)init \
{ \
self = [super init]; \
if (self) { \
X \
} \
return self; \
}

#define DRK_DEALLOC(X) -(void)dealloc \
{ \
X \
[super dealloc]; \
}

#define DRK_DICFROMFILE(X)          [NSDictionary dictionaryWithContentsOfFile:(X)]
#define DRK_MUTDICFROMFILE(X)       [NSMutableDictionary dictionaryWithContentsOfFile:(X)]
#define DRK_ARRFROMFILE(X)          [NSArray arrayWithContentsOfFile:(X)]
#define DRK_MUTARRFROMFILE(X)       [NSMutableArray arrayWithContentsOfFile:(X)]
#define DRK_STRFROMFILE(X)          [NSString stringWithContentsOfFile:(X) encoding:NSUTF8StringEncoding error:nil]

#define DRK_WRITESTRTOFILE(X,Y)     [(X) writeToFile:(Y) atomically:YES encoding:NSUTF8StringEncoding error:nil]
#define DRK_WRITEDICTOFILE(X,Y)     [(X) writeToFile:(Y) atomically:YES]
#define DRK_WRITEARRTOFILE(X,Y)     [(X) writeToFile:(Y) atomically:YES] 
```

现在，当我尝试使用它们时（就像我*不*使用 ARC 时一样），像这样，我不断收到警告：

```
// Type specifier missing, defaults to 'int'
DRK_INIT();

- (void)someFunction:(NSString*)str
{
    // Implicit conversion of 'int' to 'NSString *' is disallowed with ARC
    [self setContent:DRK_STRFROMFILE(str)];
} 
```

有什么想法吗？如何消除所有这些——实际上是无害的——警告/错误？

* * *

**提示：**

*   请注意，整个事情过去和现在仍在工作，但在转换为 ARC 后，它一直显示几个警告/错误。
*   我正在运行 Xcode 4.5.1、Mac OS X 10.7.5 (Lion) 并使用 LLVM 4.1 进行编译

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T23:26:20.180

请注意，您对 DRK_INIT 的定义需要一个参数，但您没有提供一个参数。

你也有一个';' 在 DRK_INIT() 调用结束时，它将在任何方法定义之外结束。

不要试图猜测发生了什么

使用 XCode 中的 Preprocess 选项来查看您实际生成的内容。

# networking - 从网络上的 IP 地址查找特定计算机

> ID：14978836
> 
> 赞同：1
> 
> 时间：2013-02-20T11:34:42.673
> 
> 标签：networking, ip, 3dsmax

我在工作中遇到了网络问题。我们的网络上有很多计算机，其中一台给我带来了问题。我正在通过 Backburner 从 3ds Max 进行渲染，我可以看到有另一个经理在分配作业。可以看到电脑的IP地址（198.162.1.61），就是不知道在哪里，叫什么名字。

如果我只知道它的 IP 地址，有什么方法可以获取特定的计算机信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:49:11.603

查阅 ARP 表。然后您将获得 MAC 地址，您可以通过以下方式与供应商匹配：

[http://www.adminsub.net/mac-address-finder](http://www.adminsub.net/mac-address-finder)

命令：

```
arp -a 
```

使用以下命令查看计算机的名称：

```
nbtstat –a <ipaddress> 
```

如果幸运的话，您还可以通过扫描收集信息（例如：autoscan、nmap、...）

# joomla - Joomla后端的textarea中没有自动换行符

> ID：14978839
> 
> 赞同：2
> 
> 时间：2013-02-20T11:34:50.063
> 
> 标签：joomla, textarea, joomla2.5, line-breaks, joomla-module

我正在为 Joomla 编写一个模块！2.5\. 在我的后端，我有一个文本区域，其中的值应该逐行写入。如果值太大，则换行符看起来非常混乱和混乱。

在普通的 html 中，我会`wrap="off"`在 textarea-tag 中添加一个（我知道它不符合 html，但它可以工作），但 textarea 是在模块的 xml 文件中定义的：

```
<field name="content" type="textarea" label="LWTAGCLOUD_CONTENT_LABEL" description="LWTAGCLOUD_CONTENT_DESCRIPTION" rows="20" cols="60" class="lw_tagcloud_textarea" default="VALUE; LINK"></field> 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T07:52:32.410

只用于`&#13;&#10;`换行！希望这对任何询问的人都有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:24:08.200

如果您不能仅使用 css 解决问题，并且由于您无法添加`wrap="off"`到 Joomla 中的 textarea 类型，您可以做的是创建一个自定义参数类型，就像 textarea 一样，只是`wrap=off`已经定义了。

有关如何执行此操作的更多详细信息，请查看[http://docs.joomla.org/Creating_custom_template_parameter_types](http://docs.joomla.org/Creating_custom_template_parameter_types)和[http://www.sanjeevshrestha.com.np/2010/01/creating-color-element-in-joomla -for-custom-parameter-type/](http://www.sanjeevshrestha.com.np/2010/01/creating-color-element-in-joomla-for-custom-parameter-type/)，做起来不难

# ios - 在 iOS 中录制视频时播放音频文件

> ID：14978840
> 
> 赞同：6
> 
> 时间：2013-02-20T11:35:04.030
> 
> 标签：ios, avaudioplayer

我想在用相机录制时播放音频文件。我使用 AVAudioPlayer 播放音频和 AVCamCaptureManager 进行录制。

但是当音频开始播放时，预览屏幕会冻结。我应该怎么办？

谢谢你的帮助。这是代码。（我正在研究 AVCam 示例。）

这是预览部分。

```
if ([self captureManager] == nil) {
        AVCamCaptureManager *manager = [[AVCamCaptureManager alloc] init];
        [self setCaptureManager:manager];

        [[self captureManager] setDelegate:self];

        if ([[self captureManager] setupSession]) {             
            AVCaptureVideoPreviewLayer *newCaptureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:[[self captureManager] session]];
            UIView *view = [self videoPreviewView];
            CALayer *viewLayer = [view layer];
            [viewLayer setMasksToBounds:YES];

            CGRect bounds = CGRectMake(0, 0, 480, 320);
            [newCaptureVideoPreviewLayer setFrame:bounds];

            if ([newCaptureVideoPreviewLayer isOrientationSupported]) {
                [newCaptureVideoPreviewLayer setOrientation:[DeviceProperties setPreviewOrientation]];
            }

            [newCaptureVideoPreviewLayer setVideoGravity:AVLayerVideoGravityResizeAspectFill];

            [viewLayer insertSublayer:newCaptureVideoPreviewLayer below:[[viewLayer sublayers] objectAtIndex:0]];

            [self setCaptureVideoPreviewLayer:newCaptureVideoPreviewLayer];
            dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
                [[[self captureManager] session] startRunning];
            });

            [self updateButtonStates];          
        } 
```

这是音频播放部分。

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"%@", sound] ofType:@"wav"]];
    AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:nil];
    [audioPlayer play]; 
```

如果我正常使用 AudioServicesPlaySystemSound 而不冻结，但这次它只适用于 viewDidLoad。

```
CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundFileRef;
    soundFileRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) CFBridgingRetain(@"sound"), CFSTR ("wav"), NULL);
    UInt32 soundID;
    AudioServicesCreateSystemSoundID(soundFileRef, &soundID);
    AudioServicesPlaySystemSound(soundID); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T16:53:46.860

我的问题不是视频，而是在通话中播放声音（voip 类型应用程序），这个问题的答案对我有用：

[同时使用振动和 AVCaptureSession](https://stackoverflow.com/questions/16425154/using-vibrate-and-avcapturesession-at-the-same-time)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-01T13:59:35.737

希望设置`AVAudioSession`分类能`AVAudioSessionCategoryPlayAndRecord`解决问题。并将其类别选项设置为`AVAudioSessionCategoryOptionDefaultToSpeaker|AVAudioSessionCategoryOptionMixWithOthers`. 请检查以下代码集

```
@property (strong, nonatomic) AVAudioPlayer *audioPlayer;

NSURL *soundUrl = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"VoicemailSound" ofType:@"mp3"]]; //Download and add a system sound to your project and mention its name and type here
self.audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:soundUrl error:nil];

[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayAndRecord withOptions:AVAudioSessionCategoryOptionDefaultToSpeaker|AVAudioSessionCategoryOptionMixWithOthers error: nil];

[self.audioPlayer prepareToPlay];
[self.audioPlayer play]; 
```

# android - android谷歌地图v2片段黑色bg问题

> ID：14978841
> 
> 赞同：6
> 
> 时间：2013-02-20T11:35:08.597
> 
> 标签：android

滚动时如何使谷歌地图v2中的黑色背景透明？

```
<RelativeLayout
                    android:id="@+id/relativeLayout1"
                    android:layout_width="match_parent"
                    android:layout_height="134dp"
                    android:layout_alignParentTop="true"
                    android:layout_gravity="center" >

                    <fragment
                        xmlns:android="http://schemas.android.com/apk/res/android"
                        android:id="@+id/map"
                        android:layout_width="fill_parent"
                        android:layout_height="434dp"
                        android:layout_marginBottom="-150dp"
                        android:layout_marginLeft="3dp"
                        android:layout_marginRight="3dp"
                        android:layout_marginTop="-150dp"                       
                        class="com.google.android.gms.maps.SupportMapFragment"
                        android:cacheColorHint="@color/transparent"
                        android:clickable="true" />

                    <FrameLayout
                        android:id="@+id/fram_lay"
                        android:layout_width="match_parent"
                        android:layout_height="172dp" >

                        <android.support.v4.view.ViewPager
                            android:id="@+id/fragment_container"
                            android:layout_width="fill_parent"
                            android:layout_height="134dp" >
                        </android.support.v4.view.ViewPager>

                        <FrameLayout
                            android:id="@+id/fram_lay2"
                            android:layout_width="match_parent"
                            android:layout_height="334dp"
                            android:layout_marginTop="-100dp"                            
                            android:background="@android:color/transparent"
                            android:cacheColorHint="#00000000" />
                    </FrameLayout>
                </RelativeLayout> 
```

我在地图上给出了透明框架，但它仍然在闪烁。请有人给我一个解决方案谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:02:10.037

MapView 上的透明框架只会解决黑洞问题，每次地图重新加载它的资源时仍然会发生闪烁，即何时`OnCreateView()`调用。

尝试[这里](https://stackoverflow.com/questions/14419521/moving-mapfragment-surfaceview-causes-black-background-flickering)发布的解决方案，在主 Activity 中添加一个 MapView，然后在初始化后将其隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-20T10:39:12.183

这背后的原因是 Map 使用 SurfaceView，当应用程序创建此视图时，它会在您的 Activity 后面创建一个窗口并打一个洞，这意味着您的 Activity 窗口中的东西在 SurfaceView 的原始位置下方看不到。

对我来说，这就像魅力一样，你可以使用这个库

[https://github.com/NyxDigital/NiceSupportMapFragment/](https://github.com/NyxDigital/NiceSupportMapFragment/)

这对我来说很好。

# java - apache.commons.fileuploads 一次解析后未解析请求

> ID：14978843
> 
> 赞同：0
> 
> 时间：2013-02-20T11:35:16.460
> 
> 标签：java, servlets, file-upload, apache-commons, multipartform-data

我正在提交带有文本和文件类型输入字段的表单并使用此代码获取文本数据

但问题是

```
List<FileItem> items = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(request);
for (FileItem item : items) {
if (item.isFormField()) {
    // Process normal fields here.
    //Taking all text and doing task
    System.out.println("Field name: " + item.getFieldName());
    System.out.println("Field value: " + item.getString());
} else {
    // Process <input type="file"> here.
    //And Leaving this at this time

}            
} 
```

如果我解析请求并从一个 BY 迭代它然后在 formField 中我曾经获取所有文本参数，然后我再次在文件类型条件中使用此代码上传文件，因此它不会再次解析

```
List<FileItem> items = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(request);
for (FileItem item : items) {
if (item.isFormField()) {
// Process normal fields here.
//Leaving this section this time
} else {
// Process <input type="file"> here.
//Use to Upload file
System.out.println("Field name: " + item.getFieldName());
System.out.println("Field value (file name): " + item.getName());
}            
} 
```

那么为什么它会发生......以及应该是什么解决方案......？？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T15:00:03.880

一个 HTTP 请求只能被解析一次，因为客户端只发送了一次。在第一次解析期间，HTTP 请求已被完全消耗。在同一请求的任何后续解析尝试期间，它不再可用。

如果你想解析它两次，那么客户端基本上必须发送它两次。但是，您不能要求/期望客户这样做，这完全没有意义。只需解析一次，然后为您的具体功能需求寻找不同的解决方案。例如，`items`为两个循环重复使用相同的列表。

```
List<FileItem> items = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(request);

for (FileItem item : items) {
    if (item.isFormField()) {
        // Process normal fields here.
    }
}            

for (FileItem item : items) {
    if (!item.isFormField()) {
        // Process file fields here.
    }
} 
```

请注意，这基本上是低效的代码。因此，我会重新考虑您的功能要求。

# groovy - 使用 AntBuilder 压缩特定文件

> ID：14978846
> 
> 赞同：0
> 
> 时间：2013-02-20T11:35:29.007
> 
> 标签：groovy, antbuilder

我需要将来自不同位置的文件集合压缩到一个 zip 中，保持它们的初始关系。例如，我只需要以下文件夹结构中的 a1 和 b2

```
Top -- A -- a1
         -- a2
    -- B -- b1
            b2 
```

我希望 zip 文件看起来像：

```
Top -- A -- a1
    -- B -- b2 
```

如何使用 AntBuilder 做到这一点？我试过了：

> def deploymentFiles = [ "$HOME/Songs/a.tsv", "$HOME/Songs/b.tsv", ]
> 
> def ant = new AntBuilder()
> 
> def zipFile = new File("deployment_zipFile.zip")
> 
> ant.zip( destFile: "${zipFile.getAbsolutePath()}" ) { fileset( dir: "$HOME" ) { deploymentFiles.each {f -> 包括：deploymentFiles.join(",") } } }

但这只是压缩了整个 HOME 文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:49:22.523

给定这样的目录结构：

```
-- home
   |-- Songs
   |   |-- A
       |   |-- a1.tsv
       |   \-- a2.tsv
       |-- B
           |-- b1.tsv
           \-- b2.tsv 
```

然后，这段代码：

```
def HOME = 'home'
def deploymentFiles = [ 'Songs/A/a1.tsv', 'Songs/B/b1.tsv' ]
def zipFile = new File("deployment_zipFile.zip")
new AntBuilder().zip( basedir: HOME,
                      destFile: zipFile.absolutePath,
                      includes: deploymentFiles.join( ' ' ) ) 
```

创建一个 zip 文件，提取时包含：

```
unzip ../deployment_zipFile.zip 
Archive:  ../deployment_zipFile.zip
   creating: Songs/
   creating: Songs/A/
  inflating: Songs/A/a1.tsv          
   creating: Songs/B/
  inflating: Songs/B/b1.tsv 
```

# javascript - 谷歌地理编码编码地址（）

> ID：14978850
> 
> 赞同：0
> 
> 时间：2013-02-20T11:35:34.857
> 
> 标签：javascript, jquery, parsing, google-maps-api-3, geocode

***从谷歌的回复中获取 lat & lng***时遇到问题。

谷歌正在响应一些看起来像的 xml：

```
 "location" : {
           "lat" : 53.55914120,
           "lng" : 10.00923520
        }, 
```

我正在解析这个`var r = results[0].geometry.location;`

和警报 (r) 说：

```
(53.55914120,10.00923520) 
```

***现在的问题***：

当我尝试 `var r = results[0].geometry.location.lat;`

和警报 (r) 说：

```
function (){return this[a]} 
```

所以***我的问题是：***

当 `r = results[0].geometry.location;`r =`(53.55914120,10.00923520)`

我如何从中获得 lat 和 lng ？

```
alert(r[0]r[1])  <!-- doesn´t work, returns "undefined" --> 
```

***或者***

我如何从一开始就将 lat & lng 存储在两个不同的变量中，

提前谢谢我的预期`var r = results[0].geometry.location.lat;`，但这不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:42:44.680

试试这个

```
var latitude = results[0].geometry.location.lat();
var longitude = results[0].geometry.location.lng(); 
```

# ios - 根据它使用的 UITableViewCell 的类型更改 heightForRowAtIndexPath？

> ID：14978858
> 
> 赞同：3
> 
> 时间：2013-02-20T11:36:03.830
> 
> 标签：ios, objective-c, uitableview

在`cellForRowAtIndexPath`中，我使用随机化来创建两种不同的自定义`UITableViewCell`类型之一，我们称它们为`LCImageCell`and `LCTextCell`（一个包含图像，一个包含一些文本，它是随机的，将显示在每一行中）。这基本上是这样排列的：

```
- (UITableViewCell *) tableView: (UITableView *) tableView cellForRowAtIndexPath: (NSIndexPath *) indexPath
{
    // Determine whether the cell should contain an image or text..
    BOOL isCellAnImage;
    int randomChanceOfImageAppearing = arc4random() % 5;
    if (randomChanceOfImageAppearing == 4) isCellAnImage = YES;
    else isCellAnImage = NO;

    // If the cell is going to contain an image..
    if (isCellAnImage) {
        LCIImageCell *imageCell = [tableView dequeueReusableCellWithIdentifier: @"ImageCell"];
        if (imageCell == nil) {
            imageCell = [[LCImageCell alloc] initWithStyle: UITableViewCellStyleValue1 reuseIdentifier: @"ImageCell"];
        }

        return imageCell;

    // Else the cell will contain text..
    } else {
        // Make and allocate the cell if necessary.
        LCTextCell *customCell = [tableView dequeueReusableCellWithIdentifier: @"CustomCell"];
        if (customCell == nil) {
            customCell = [[LCTextCell alloc] initWithStyle: UITableViewCellStyleValue1 reuseIdentifier: @"CustomCell"];
        }
        return customCell;
    }
} 
```

我需要动态设置带有文本（`LCTextCell`实例）的高度，并且工作正常。我现在要整合图像单元格，我想知道如何让我`heightForRowAtIndexPath`知道有问题的单元格是 an`LCImageCell`还是 a `LCTextCell`，以便我只能在有问题的单元格是时应用高度调整`LCTextCell`。

我可以在设置高度之前访问应用高度的单元格吗？它甚至在那个时间点被创建/分配/初始化了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T12:52:49.580

`-cellForRowAtIndexPath:`看似合乎逻辑的事情是从内部调用`-tableView:heightForRowAtIndexPath:`。然而，这是不好的形式（出于某种原因，后者在前者之前被调用）并且可能导致性能问题（每次显示表格时都会为表格中`heightForRowAtIndexPath`的*每个*单元格调用，甚至是不可见的单元格）。

相反，将单元格随机化移动到 viewController 生命周期的早期。例如，假设您事先知道每种单元格类型的高度（并且您的 tableView 有一个部分）：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSMutableArray *mutableArray = [[NSMutableArray alloc] init];

    for (int i = 0; i < [self.tableView numberOfRowsInSection:0]; i++) {
        if (arc4random() % 5 == 4) {
            [mutableArray addObject:[LCImageCell class]];
        } else {
            [mutableArray addObject:[LCImageCell class]];
        }
    }

    self.cellTypes = [NSArray arrayWithArray:mutableArray];
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([[self.cellTypes objectAtIndex:indexPath.row] isEqual:[LCImageCell class]]) {
        [LCImageCell height];  // class method returns static height for an image cell
    } else {
        [LCTextCell height];   // class method returns static height for a text cell
    };
} 
```

如果高度是动态的，您也应该提前[计算并存储它](https://stackoverflow.com/a/2213993/840428)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:52:50.373

为 LCTextCell 创建一个类（比如 A），为 LCImageCell 创建另一个类（比如 B）。您可以定义类来保存单元格特定信息（您可以在 A 类中定义一个 NSString 实例，它可以是在 LCTextCell 中显示的字符串，同样您可以在 B 类中有一个 url 实例，它代表显示的图像在 LCImageCell 内）。您必须在视图控制器中保存一个数组（例如 myArray），该数组将包含 A 或 B 的实例，具体取决于您希望在特定索引（tableview 行）上的哪个单元格。您只需确保在调用 heightForRowAtIndexPath 方法之前数组具有正确的条目。

然后你可以有

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{        
    if([[self.myArray objectAtIndex:row] isKindOfClass:[A class]])
    {
        //LCTextCell
        return ...;
    }
        else if([[self.myArray objectAtIndex:row] isKindOfClass:[B class]])
    {
        //LCImageCell
        return ...;
    }
    return 50.0f;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-20T11:40:10.907

你可以这样做：

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *customCell = [self.tableView cellForRowAtIndexPath:indexPath];
    if([customCell isMemberOfClass:[LCImageCell class])
    {
        return ...;
    }
        else if([customCell isMemberOfClass:[LCTextCell class])
    {
        return ...;
    }
    return 0.0f;
} 
```

# jquery - ASP.NET 服务器端控件未在 JQuery 弹出窗口中触发

> ID：14978868
> 
> 赞同：0
> 
> 时间：2013-02-20T11:36:40.740
> 
> 标签：jquery, asp.net

我有一个带有 2 个 jquery 弹出窗口的 ASPX 页面。每个弹出窗口都有一对服务器端按钮。问题是如果我按下这些按钮将不会触发。我知道这是 jQuery 弹出窗口的问题。我该如何解决这个问题？

编辑：按照代码

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
    <script type="text/javascript">
        $(document).ready(function () {

            var dlgSuggestSol = $('div#dlgSuggestSolution').dialog({ autoOpen: false, modal:true, width:640, height:480 })
            $('#btnOpenSuggestSolution').click(function () { $('div#dlgSuggestSolution').dialog('open'); });
            var dlgWaitSol = $('div#dlgWaitingSolution').dialog({ autoOpen: false, modal: true, width: 640, height: 480 })
            $('#btnReadSolutionAwaiting').click(function () { $('div#dlgWaitingSolution').dialog('open'); });

            })

    </script> 
```

……

```
<div id="dlgSuggestSolution">
    <h3>Proponi la tua soluzione</h3>
    <br />
    <asp:TextBox runat="server" ID="txtNewSolution" TextMode="MultiLine" Width="480px" Height="300px"></asp:TextBox>
    <br />
    <asp:Button runat="server" ID="btnSaveSolution" Text="Salva soluzione" />
    <asp:Button runat="server" id="aBUtton" Text="jjkkj" />
        <asp:Label runat="server" ID="lblMsg">
        </asp:Label>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:55:31.877

在弹出窗口中设置`UseSubmitBehavior="false"`按钮。原因是表单中显示的弹出窗口和通常的提交不会将目标控件 ID 传递给服务器。但是with `UseSubmitBehavior="false"`button 使用的是ASP.NET postback 机制（`__doPostBack`实际上是函数）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:46:25.083

您的 div“dlgSuggestSolution”在页面加载时是否可见？

我假设由于它是一个弹出窗口，因此 div 的初始行为将是`visible=false.` 如果是这种情况，您的代码将无法正常工作。

而不是,在样式下`visible=false`使用。`display=none`

# android - 设备方向更改时小部件丢失数据

> ID：14978873
> 
> 赞同：1
> 
> 时间：2013-02-20T11:36:54.517
> 
> 标签：android, listview, android-widget

我开发了一个应用程序，它有小部件，这些都运行良好，但是我改变了设备的方向，它显示得很好。但是有时当我更改方向数据时不会显示。任何人都可以帮助我，为什么这个问题会在某个时间发生。这是代码

```
 @Override
        public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
            super.onUpdate(context, appWidgetManager, appWidgetIds);
            Logger.d(TAG, "WidgetProvider ENTER onUpdate");
            String str = null;
            SharedPreferences prefs = context.getSharedPreferences("userInformation", Context.MODE_PRIVATE);
            if (prefs != null)
{
                str = prefs.getString("ImageURL", "").toString();
            }
            if (str != null && str != "") {
                Logger.d(TAG, "WidgetProvider (Account logined)");

                for (int j = 0; j < appWidgetIds.length; j++) {

                    Intent intent = new Intent(context, WidgetService.class);
                    intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetIds[j]);
                    intent.setData(Uri.parse(intent.toUri(Intent.URI_INTENT_SCHEME)));

                    RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.facedroid_widget_layout);
                    remoteViews.setRemoteAdapter(appWidgetIds[j], R.id.listTasks, intent);

                    remoteViews.setViewVisibility(R.id.rl_complete_widget, View.GONE);
                    // The empty view is displayed when the collection has no items.
                    // It
                    // should be a sibling
                    // of the collection view.

                    /******** Click Listener for All external items ***********/
                    // Register an onClickListener
                    Intent clickIntent = new Intent(context, WidgetProvider.class);

                    clickIntent.setAction(CLICK_ACTION_FACEDROID_LOGO_BUTTON);
                    clickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds[j]);
                    PendingIntent pendingIntent_facedroid_logo = PendingIntent.getBroadcast(context, 0, clickIntent, PendingIntent.FLAG_UPDATE_CURRENT);
                    remoteViews.setOnClickPendingIntent(R.id.rl_topManagerBar_logo, pendingIntent_facedroid_logo);

                    clickIntent.setAction(CLICK_ACTION_COMMENT_BUTTON);
                    clickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds[j]);
                    PendingIntent pendingIntent_commentBtn = PendingIntent.getBroadcast(context, 0, clickIntent, PendingIntent.FLAG_UPDATE_CURRENT);
                    remoteViews.setOnClickPendingIntent(R.id.commentBtn, pendingIntent_commentBtn);

                    clickIntent.setAction(CLICK_ACTION_CAMERA_BUTTON);
                    clickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds[j]);
                    PendingIntent pendingIntent_cameraBtn = PendingIntent.getBroadcast(context, 0, clickIntent, PendingIntent.FLAG_UPDATE_CURRENT);
                    remoteViews.setOnClickPendingIntent(R.id.cameraBtn, pendingIntent_cameraBtn);

                    clickIntent.setAction(CLICK_ACTION_CHECKIN_BUTTON);
                    clickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds[j]);
                    PendingIntent pendingIntent_checkinBtn = PendingIntent.getBroadcast(context, 0, clickIntent, PendingIntent.FLAG_UPDATE_CURRENT);
                    remoteViews.setOnClickPendingIntent(R.id.checkinBtn, pendingIntent_checkinBtn);

                    clickIntent.setAction(CLICK_ACTION_REFRESH_BUTTON);
                    clickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds[j]);
                    PendingIntent pendingIntent_refreshBtn = PendingIntent.getBroadcast(context, 0, clickIntent, PendingIntent.FLAG_UPDATE_CURRENT);
                    remoteViews.setOnClickPendingIntent(R.id.refreshBtn, pendingIntent_refreshBtn);
                    /******** Click Listener for All external items ***********/

                    clickIntent.setAction(CLICK_ACTION_ITEM_CLICK);
                    clickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetIds[j]);
                    intent.setData(Uri.parse(intent.toUri(Intent.URI_INTENT_SCHEME)));
                    PendingIntent toastPendingIntent = PendingIntent.getBroadcast(context, 0, clickIntent, PendingIntent.FLAG_UPDATE_CURRENT);
                    remoteViews.setPendingIntentTemplate(R.id.listTasks, toastPendingIntent);

                    appWidgetManager.updateAppWidget(appWidgetIds[j], remoteViews);
                }

            } else {
                Logger.d(TAG, "WidgetProvider (Account not logined)");

                for (int j = 0; j < appWidgetIds.length; j++) {

                    RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.facedroid_widget_layout);
                    /******** Click Listener for All external items ***********/
                    // Register an onClickListener
                    Intent clickIntent = new Intent(context, WidgetProvider.class);

                    clickIntent.setAction(CLICK_ACTION_COMPLETE_WIDGET_CLICK);
                    clickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds[j]);
                    PendingIntent pendingIntent_widget_top_bar = PendingIntent.getBroadcast(context, 0, clickIntent, PendingIntent.FLAG_UPDATE_CURRENT);
                    remoteViews.setOnClickPendingIntent(R.id.rl_complete_widget, pendingIntent_widget_top_bar);

                    appWidgetManager.updateAppWidget(appWidgetIds[j], remoteViews);
                }
            }

            Logger.d(TAG, "WidgetProvider EXIT onUpdate");
    //      super.onUpdate(context, appWidgetManager, appWidgetIds);
        } 
```

// 这里是 Onreceive 方法的代码

```
@Override
    public void onReceive(final Context context, Intent main_intent) {

        super.onReceive(context, main_intent);
        Logger.d(TAG, "WidgetProvider ENTER onReceive");

        // all the intents get handled by this method
        // mainly used to handle self created intents, which are not
        // handled by any other method

        // the super call delegates the action to the other methods

        // for example the APPWIDGET_UPDATE intent arrives here first
        // and the super call executes the onUpdate in this case
        // so it is even possible to handle the functionality of the
        // other methods here
        // or if you don't call super you can overwrite the standard
        // flow of intent handling
        String str = null;
        SharedPreferences prefs = context.getSharedPreferences("userInformation", Context.MODE_PRIVATE);
        if (prefs != null) {
            str = prefs.getString("ImageURL", "").toString();
        }
        if (str != null && str != "") {
            Logger.d(TAG, "WidgetProvider (Account logined)");

            if (main_intent.getAction().equals(AppWidgetManager.ACTION_APPWIDGET_UPDATE)) {
                Logger.d(TAG, "WidgetProvider UpdateAction");
                String updateType = main_intent.getStringExtra("updateType");
                Logger.d(TAG, "updateType=" + updateType);
                if (updateType != null) {
                    if (updateType.equals("single")) {
                        final int appWidgetId = main_intent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, 0);
                        final AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
                        updateAppWidgetSingle(context, appWidgetManager, appWidgetId);
                    } else if (updateType.equals("multiple")) {
                        final int[] appWidgetIds = (int[]) main_intent.getIntArrayExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS);
                        final AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
                        updateAppWidgetMultiple(context, appWidgetManager, appWidgetIds);
                    }
                }
            } else if (main_intent.getAction().equals(CLICK_ACTION_ITEM_CLICK)) {
                Logger.d(TAG, "WidgetProvider ItemClick");
                // int appWidgetId =
                // main_intent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,
                // AppWidgetManager.INVALID_APPWIDGET_ID);
                int viewIndex = main_intent.getIntExtra(EXTRA_ITEM, 0);

                LinkInfo info_s = null;
                try {
                    info_s = public_feed.DATA.get(viewIndex);
                } catch (Exception e) {
                    e.printStackTrace();
                    if (e != null) {
                        Log.e(TAG, "onReceive() " + e.getMessage().toString());
                    } else {
                        Log.e(TAG, "onReceive() e=null onReceive");
                    }
                }

                if (info_s != null) {
                    Intent i = new Intent(context.getApplicationContext(), SinglePostActivityWidget.class);
                    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    i.putExtra("LinkInfo", info_s);
                    context.getApplicationContext().startActivity(i);
                }

            } else if (main_intent.getAction().equals(CLICK_ACTION_FACEDROID_LOGO_BUTTON)) {
                Logger.d(TAG, "WidgetProvider FacedroidLogoButtonClicked");

                Intent intent = new Intent(Intent.ACTION_MAIN);
                intent.addCategory(Intent.CATEGORY_LAUNCHER);
                ComponentName component_name = new ComponentName("com.platinumapps.facedroid", "com.platinumapps.activities.Splash_Activity");
                intent.setComponent(component_name);
                intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                if (intent != null) {
                    context.startActivity(intent);
                }

            } else if (main_intent.getAction().equals(CLICK_ACTION_COMMENT_BUTTON)) {
                Logger.d(TAG, "WidgetProvider CommentButtonClicked");

                Intent i = new Intent(context.getApplicationContext(), StatusShareICS.class);
                i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.getApplicationContext().startActivity(i);

            } else if (main_intent.getAction().equals(CLICK_ACTION_CAMERA_BUTTON)) {
                Logger.d(TAG, "WidgetProvider CameraButtonClicked");

                Intent i = new Intent(context.getApplicationContext(), PhotoSharePopup_widget.class);
                i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.getApplicationContext().startActivity(i);

            } else if (main_intent.getAction().equals(CLICK_ACTION_CHECKIN_BUTTON)) {
                Logger.d(TAG, "WidgetProvider CheckinButtonClicked");

                Intent i = new Intent(context.getApplicationContext(), widget_place_checkin_dialog.class);
                i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.getApplicationContext().startActivity(i);

            } else if (main_intent.getAction().equals(CLICK_ACTION_REFRESH_BUTTON)) {
                Logger.d(TAG, "WidgetProvider RefreshButtonClicked");

                refresh_indicator = true;
                final int appWidgetId = main_intent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, AppWidgetManager.INVALID_APPWIDGET_ID);
                final AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);

                RemoteViews updateViews = new RemoteViews(context.getPackageName(), R.layout.facedroid_widget_layout);
                updateViews.setViewVisibility(R.id.pb_refreshing, View.VISIBLE);
                updateViews.setViewVisibility(R.id.refreshBtn, View.INVISIBLE);
                appWidgetManager.updateAppWidget(appWidgetId, updateViews);

                new Timer().schedule(new TimerTask() {
                    @Override
                    public void run() {
                        RemoteViews updateViews = new RemoteViews(context.getPackageName(), R.layout.facedroid_widget_layout);
                        updateViews.setViewVisibility(R.id.pb_refreshing, View.GONE);
                        updateViews.setViewVisibility(R.id.refreshBtn, View.VISIBLE);
                        appWidgetManager.updateAppWidget(appWidgetId, updateViews);
                    }
                }, 1000 * 10);

                Intent intent = new Intent(context, WidgetProvider.class);
                intent.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
                intent.putExtra("updateType", "single");
                intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
                context.sendBroadcast(intent);

            } else if (main_intent.getAction().equals(REFRESH_END)) {
                Logger.d(TAG, "WidgetProvider RefreshEnd");

                if (refresh_indicator) {

                    int appWidgetId = main_intent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, AppWidgetManager.INVALID_APPWIDGET_ID);
                    AppWidgetManager mgr = AppWidgetManager.getInstance(context);

                    RemoteViews updateViews = new RemoteViews(context.getPackageName(), R.layout.facedroid_widget_layout);
                    updateViews.setViewVisibility(R.id.pb_refreshing, View.GONE);
                    updateViews.setViewVisibility(R.id.refreshBtn, View.VISIBLE);
                    mgr.updateAppWidget(appWidgetId, updateViews);
                    refresh_indicator = false;
                }

                // if (WidgetService.isOrientationChanged) {
                // Log.e(TAG, "WidgetService.isOrientationChanged=true");
                // WidgetService.isOrientationChanged = false;
                // final int appWidgetId =
                // main_intent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,
                // 0);
                // final AppWidgetManager appWidgetManager =
                // AppWidgetManager.getInstance(context);
                // updateAppWidgetSingle(context, appWidgetManager,
                // appWidgetId);
                // } else {
                // Log.e(TAG, "WidgetService.isOrientationChanged=false");
                // }
            }

        } else {
            Logger.d(TAG, "WidgetProvider (Account not logined)");

            Toast.makeText(context, "Please login to facedroid", Toast.LENGTH_SHORT).show();

            if (main_intent.getAction().equals(CLICK_ACTION_COMPLETE_WIDGET_CLICK)) {
                Logger.d(TAG, "WidgetProvider HeaderWidgetClicked");

                Intent intent = new Intent(Intent.ACTION_MAIN);
                intent.addCategory(Intent.CATEGORY_LAUNCHER);
                ComponentName component_name = new ComponentName("com.platinumapps.facedroid", "com.platinumapps.activities.Splash_Activity");
                intent.setComponent(component_name);
                intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                if (intent != null) {
                    context.startActivity(intent);
                }

            } else if (main_intent.getAction().equals(CLICK_ACTION_WIDGET_CONTAINER_AREA)) {
                Logger.d(TAG, "WidgetProvider ContainerWidgetClicked");

                Intent intent = new Intent(Intent.ACTION_MAIN);
                intent.addCategory(Intent.CATEGORY_LAUNCHER);
                ComponentName component_name = new ComponentName("com.platinumapps.facedroid", "com.platinumapps.activities.Splash_Activity");
                intent.setComponent(component_name);
                intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                if (intent != null) {
                    context.startActivity(intent);
                }
            }
        }

        String updateType = main_intent.getStringExtra("updateType");
        Logger.d(TAG, "updateType=" + updateType);
        if (updateType != null) {
            if (updateType.equals("single")) {
                final int appWidgetId = main_intent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, 0);
                final AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
                updateAppWidgetSingle(context, appWidgetManager, appWidgetId);
            } else if (updateType.equals("multiple")) {
                final int[] appWidgetIds = (int[]) main_intent.getIntArrayExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS);
                final AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
                updateAppWidgetMultiple(context, appWidgetManager, appWidgetIds);
            }
        }

        Logger.d(TAG, "WidgetProvider EXIT onReceive");
        //super.onReceive(context, main_intent);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:43:47.343

当设备的方向改变时，会调用 Activity 的 onCreate 方法。因此，您必须保留数据，然后在 onCreate 方法中检索它。看看 [http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:02:46.000

当你旋转手机时，活动被破坏并重新创建。所以变量被重新初始化。这就是为什么`data does not display`。你可以通过阻止活动 onRotation 的破坏来克服这个问题。要实现这一点，请将其放入您的清单中：

```
<activity android:name="FriendPickerActivity"
android:label="@string/app_name" 
android:configChanges="orientation"/> 
```

我指的是`android:configChanges="orientation"`

或者你可以在你的活动中使用`onSaveInstanceState ()`和`onRestoreInstanceState ()`

# css - 如何使用正确的主题边框垂直设置 jQuery UI 选项卡的样式？

> ID：14978881
> 
> 赞同：2
> 
> 时间：2013-02-20T11:37:13.433
> 
> 标签：css, jquery-ui, themes, jquery-ui-tabs, jquery-ui-theme

我正在尝试将[jQuery UI 选项卡](http://api.jqueryui.com/tabs/)设置为垂直选项卡，但与它们提供的[垂直选项卡演示](http://jqueryui.com/tabs/#vertical)的样式略有不同。

我正在努力实现这一目标：

![我想要的是](../Images/3b8f3bb9f655f9580e31bf09ff2b7da5.png)

但我能得到的最好的是：

![我最好的尝试](../Images/66ac41900c3dedb9473bc978f9458843.png)

您会注意到选项卡底部边框的颜色与文本颜色相匹配，但我真的希望边框在整个选项卡周围保持一致。

我可以像这样添加一个css行：

```
.ui-tabs-vertical > .ui-tabs-nav li {
    border-bottom-color: #C5DBEC !important;
} 
```

但是我不想硬编码任何颜色，因为它们是由 jQuery UI 主题滚轮提供的，所以如果我决定更改主题，或者为我的网站的不同品牌设置不同的主题，那么这将成为一场噩梦维持。

更深入地研究这个问题，标准的 jQuery UI 主题 css 似乎是这样做的：

```
.ui-tabs .ui-tabs-nav li { border-bottom: 0 none; } 
```

这是因为整个东西都是为水平选项卡正常设置的，需要移除底部边框。我无法删除它，因为它是生成的主题滚轮 css 的一部分。我不认为这应该改变border-color 属性，因为只指定了速记边框的前两个（即宽度和样式）。所以我希望边框颜色不会在这里被覆盖，但实际上它是，并且它正在将它设置为字体颜色。

我为尝试还原此 css 行所做的是：

```
.ui-tabs-vertical .ui-tabs-nav li { border-bottom: 1px solid !important; } 
```

再次注意，我没有在这里触及边框底部颜色。

这个结果，至少在 Firefox 中，是取自 firebug 的：

![萤火虫捕获](../Images/57224e3a3784fd2d612c8112b5cf79b5.png)

出于某种原因，看起来颜色被设置回默认浏览器颜色，即使没有触及边框底部颜色。我只希望 .ui-widget-content .ui-state-default 中的颜色通过，但我不知道该怎么做。

使用继承不起作用，因为我不想从 DOM 中的父元素中获取颜色。

这是一个[jsFiddle 显示我的问题](http://jsfiddle.net/bg100/3mHeA/)。任何人都可以帮助我获得可维护的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-07T18:20:05.613

使用[@hexblot](https://stackoverflow.com/a/14979183/245495)的答案并动态获取颜色。

为此，请创建一个人造项目，应用您想要的 jQuery 类，然后使用它`.css()`来获取颜色。就那么简单。

+1 试图找到一个干净的解决方案，没有硬编码的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:51:02.353

只需添加

```
.ui-state-active { color: #2E6E9E !important; } 
```

你应该没事。用 CSS 中的这一行（最后一行）更新了小提琴。

# spring - 我们可以在整个项目中完全使用注释吗？

> ID：14978882
> 
> 赞同：1
> 
> 时间：2013-02-20T11:37:14.057
> 
> 标签：spring, hibernate, annotations, hibernate-annotations, spring-annotations

我只想问一件事关于注释。我在谷歌搜索了很多，我从很多网站上阅读，但我仍然不相信。所以，这就是为什么我想问自己。

以下是查询：

1.  我知道注释是什么，但我不知道是否在实际项目中使用它们。有人说理解、混淆和维护它们非常复杂。有人说他们节省了很多时间。

2.  我有一个要开始的春季项目。你真的会建议我在整个项目中使用注释吗？（我知道如何使用它们）

3.  我们什么时候应该准确地使用它们，什么时候不应该？

就个人而言，即使我讨厌注释，因为我觉得它们不太易于维护，而是我喜欢使用 xml 文件（当然，我不会将所有标签转储到单个 xml 文件中，我为每一层维护每个 xml（比如`dispatcher-dao.xml`dao 层，`dispatcher-view.xml`用于演示劳尔等）

那么，你能帮我解决这些问题吗？

等待您的回复！

# vb.net - 如何将文件复制/替换到 VB.NET 中的文件夹中？

> ID：14978894
> 
> 赞同：4
> 
> 时间：2013-02-20T11:37:38.767
> 
> 标签：vb.net

我用`File.Copy(source, target, True)`, where`source`是全路径名，比如`c:\source.txt`and`target`是一个文件夹，里面可能包含同名文件。如果文件已经存在，我想复制`source.txt`到目标文件夹并覆盖。

但我得到了错误：

> '目标是一个文件夹，而不是一个文件'

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T11:40:00.817

目标也必须包含一个文件名：

```
sSource = "C:\something.txt"
sTarget = "C:\folder\something.txt"

File.Copy(sSource, sTarget, True) 
```

如果您想以编程方式拥有相同的文件名，只需执行以下操作：

```
File.Copy(sSource, Path.Combine(sFolder, Path.GetFileName(sSource)), True) 
```

阅读[MSDN 文档](http://msdn.microsoft.com/en-us/library/c6cfw35a%28v=vs.80%29.aspx)以获取有关异常和方法使用的示例和信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-07T06:46:34.433

您还可以使用 FileStream 来读取和写入文件内容。如果您使用文件流，您可以读取和写入所有类型的二进制文件，而不仅仅是文本文件。

使用以下过程：

```
''' <summary>
    ''' copies a file from one location to another
    ''' </summary>
    ''' <param name="inputPath">full path to the input file</param>
    ''' <param name="outputPath">full path to the output file</param>
    ''' <param name="bufferSize">the size in bytes as an integer that will be read and written at a time from input file and to the output file</param>
    ''' <param name="overwrite">overwrite the output file if it already exists</param>
    ''' <returns></returns>
    Public Function CopyFile(ByVal inputPath As String,
                             ByVal outputPath As String,
                             ByVal bufferSize As Integer,
                             Optional ByVal overwrite As Boolean = False) As Boolean

        Dim PathIsClear As Boolean = True, SucOpt As Boolean = False
        Dim inputByteReaderObj As System.IO.FileStream = System.IO.File.Open(inputPath, IO.FileMode.Open) 'open a file stream for reading bytes from the input file
        Dim endofSize As Integer = My.Computer.FileSystem.GetFileInfo(inputPath).Length
        If overwrite AndAlso FileExists(outputPath) Then
            'if file exits, delete the output file
            PathIsClear = False
            PathIsClear = DeleteFilesOnDisk(outputPath) ' Delete the output file if it already exists
        End If

        ' Adjust array length for VB array declaration.

        Dim allBytesRead As Integer = 0, sucessfullBytes As Integer = 0, bytes As Byte() 'The byte array
        If bufferSize > endofSize Then
            bufferSize = endofSize
        End If
        If bufferSize >= 1 Then
            bytes = New Byte(bufferSize - 1) {} 'The byte array; create a byte array that will hold the data in length equal to the bufferSize; the array index starts at 0;
            If PathIsClear Then
                While inputByteReaderObj.Read(bytes, 0, bufferSize) > 0
                    'read bytes consequtively from the input file, each time read bytes equal in length to bufferSize
                    Try
                        My.Computer.FileSystem.WriteAllBytes(outputPath, bytes, True) ' Append to the file contents
                        sucessfullBytes += bufferSize
                    Catch ex As Exception
                        Stop
                    End Try
                    allBytesRead += bufferSize
                    If (allBytesRead + bufferSize) > endofSize Then
                        bufferSize = endofSize - allBytesRead 'change the size of the buffer match the end of the file
                    End If
                    If bufferSize >= 1 Then
                        bytes = New Byte(bufferSize - 1) {} 'the array index starts at zero, the bufferSize starts at 1
                    End If
                    If allBytesRead >= endofSize Or bufferSize = 0 Then
                        'the reader has already reached the end of file, exit the reader loop
                        Exit While
                    End If
                End While
                If sucessfullBytes = allBytesRead Then
                    SucOpt = True
                End If
            End If
        Else
            'write an empty file
            Try
                System.IO.File.Create(outputPath) 'Create an empty file because the size of the input file is zero
            Catch ex As Exception
                'an error occured in creating an empty file
            End Try
        End If

        inputByteReaderObj.Close()

        Return SucOpt
    End Function 
```

# c# - 从 Linq 编译查询返回 KeyValuePair

> ID：14978897
> 
> 赞同：3
> 
> 时间：2013-02-20T11:37:41.153
> 
> 标签：c#, linq, compiled-query, keyvaluepair

我刚刚开始掌握 Linq 中的编译查询，并且遇到了一些奇怪的行为。

此查询编译良好：

```
public static Func<DataContext, string, object> GetJourneyByUrl =
    CompiledQuery.Compile<DataContext, string, object>((DataContext dc, string urlSlug) =>
        from j in dc.Journeys
        where !j.Deleted
        where j.URLSlug.Equals(urlSlug)
        select new KeyValuePair<string, int>(j.URLSlug, j.JourneyId)
    ); 
```

但是当我尝试将返回类型从对象更改为 KeyValuePair 时，如下所示：

```
public static Func<DataContext, string, KeyValuePair<string, int>> GetJourneyByUrl =
    CompiledQuery.Compile<DataContext, string, KeyValuePair<string, int>>((DataContext dc, string urlSlug) =>
        from j in dc.Journeys
        where !j.Deleted
        where j.URLSlug.Equals(urlSlug)
        select new KeyValuePair<string, int>(j.URLSlug, j.JourneyId)
    ); 
```

我收到以下错误：

> CS1662：无法将 lambda 表达式转换为委托类型 'System.Func<DataContext,string,System.Collections.Generic.KeyValuePair<string,int>>' 因为块中的某些返回类型不能隐式转换为委托返回类型

如何`KeyValuePair`从已编译的查询中返回单个？或者我会以完全错误的方式解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T11:39:26.980

编译后的查询将返回一组值，因此为了使其正常工作，请尝试将返回类型更改为`IEnumerable<KeyValuePair<string, int>>`- 您正在返回一组值，而不仅仅是一个值。然后，您可能希望将已编译查询的函数名称更改为`GetJourneysByUrl`.

然后要从结果集中获取单个值（由 的函数名称暗示`GetJourneyByUrl`），您应该添加一个函数来返回编译查询返回的第一项。

```
public static KeyValuePair<string, int> GetJourneyByUrl(DataContext dc, string urlSlug) {
  return GetJourneysByUrl(dc, urlSlug).First();
} 
```

您也可以将其设置为，如[与已编译查询相关](http://msdn.microsoft.com/en-us/library/bb896297.aspx)`Func`的此 msdn 页面上所示。

# mysql - 组合排列查询

> ID：14978899
> 
> 赞同：0
> 
> 时间：2013-02-20T11:37:42.293
> 
> 标签：mysql

```
SELECT * FROM tbl_name 
WHERE column1='yes' AND column2='yes' 
```

如果你在上面看到 column1,column2 是 yes 现在我想用所有组合设置 reslut 即 column1,column2 是 No ,column1='yes' 和 column2='no' 等等。这是列的排列

而不是写 6 个查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:44:37.230

如果您没有任何其他可以出现在`column1`and中的值`column2`，那么您应该能够使用：

```
select * 
from tbl_name 
```

但是，如果您在这些列中有其他值，则可以使用：

```
select * 
from tbl_name 
where column1 in ('yes', 'no')
  and column2 in ('yes', 'no') 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/bd503/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:44:28.160

要查找表中存在的这 2 列的所有唯一组合，请使用 DISTINCT 或 GROUP BY

例如

```
SELECT DISTINCT column1, column2 FROM tbl_name 
```

或者

```
SELECT column1, column2 FROM tbl_name GROUP BY column1, column2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:40:25.410

```
select * from tbl_name 
```

这将为您提供所有记录，当然这将包含所有组合。

# mysql - Mysql查询INSERT两张表

> ID：14978900
> 
> 赞同：0
> 
> 时间：2013-02-20T11:37:43.930
> 
> 标签：mysql, sql

我有两张桌子：`table1`和`rating`

```
table1(id,name,category) 
rating (cid,rating,total_rating,total_rates,photoID) 
```

现在，当我将数据插入表 1 时，我想为表 1 中的特定 photoID 将表评级中的所有数据设置为零，但我不知道如何......有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:42:54.947

您可以使用它`LAST_INSERT_ID()`来检索您刚刚插入的 ID。例如，假设和`PhotoID`之间的关系：`table1``rating`

```
insert table1 (name,category) values ('waterfall 2', 'nature');
insert rating (rating,total_rating,total_rates,photoID) values
    (0, 0, 0, last_insert_id()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:43:14.713

我宁愿创建一个`STORED PROCEDURE`从应用程序进行单个调用。假设您想为每个插入`INSERT`记录在表上，并且将on设置为.`rating``table1``ID``table1``AUTO_INCREMENT`

```
DELIMITER $$
CREATE PROCEDURE procedureName
(
    IN _name VARCHAR(25),
    IN _category VARCHAR(25)
)
BEGIN
    INSERT INTO table1 (name, category)
    VALUES (_name, _category);

    SET @last_ID := LAST_INSERT_ID();

    INSERT INTO rating (cid, rating, total_rating, total_rates, photoID)
    VALUES (@last_ID, 0,0,0,0);
END $$
DELIMITER ; 
```

并调用程序，

```
CALL procedureName('nameHere','categoryHere') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T11:44:08.600

您可以使用 MySql 触发器[http://dev.mysql.com/doc/refman/5.0/en/trigger-syntax.html](http://dev.mysql.com/doc/refman/5.0/en/trigger-syntax.html)：

```
CREATE TRIGGER ins_rating AFTER INSERT ON table1
FOR EACH ROW
BEGIN
    INSERT INTO rating (cid,rating,total_rating,total_rates,photoID)
         VALUES( NEW.ID ,0,0,0,null)
END; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T11:42:47.867

如果要将数据插入 TABLE1 并从 TABLE2 中删除，可以编写以下列出的查询：

```
mysql_query("DELETE * FROM table2"); 
```

# google-app-engine - 如何使用lxml在Google App Engine上用Python动态替换HTML标签的内容？

> ID：14978910
> 
> 赞同：0
> 
> 时间：2013-02-20T11:38:11.577
> 
> 标签：google-app-engine, python-2.7, lxml

我正在使用 Google 应用引擎和 python 来构建应用程序。我对 python 和 GAE 非常陌生。我有一个 index.html 文件，其中包含我网站的基本模板。但是，我想根据 URL 替换一些标签的内容。例如，更新每个单独页面的标题标签。据我所知，推荐的方法是使用 lxml 库。

所以......今晚是我第一次使用lxml，我很难理解它。我一直在玩弄基本语法的几种排列，并且在理解它的工作原理方面没有取得太大的成功。我一直在寻找不同的教程，但文档很少而且相差甚远。

当我尝试以下代码时，我得到一个“lxml.etree._ElementTree”对象没有属性“find_class”错误，但是这里的文档：http://lxml.de/lxmlhtml.html#parsing-html[它](http://lxml.de/lxmlhtml.html#parsing-html)看起来确实像应该有那个课

我在正确的道路上吗？这是替换html标签内容的最有效/最好的方法吗？

```
import os
import webapp2
import lxml.html

doc = lxml.html.parse('index.html')
doc.find_class("title") == 'About Page'
self.response.write(lxml.html.tostring(doc)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:49:07.287

这绝对不是 Google App Engine 的方式。您应该使用某种模板框架，例如 Jinja2 或 Django 来实现您的目标。

但在此之前，您必须确保您完成了[入门教程](https://developers.google.com/appengine/docs/python/gettingstartedpython27/)，您可以在其中看到这些东西的实际应用。

# c++ - 为什么在核心转储中获得“第一次/第二次机会不可用”

> ID：14978914
> 
> 赞同：5
> 
> 时间：2013-02-20T11:38:26.433
> 
> 标签：c++, debugging, windbg, dump

我使用windbg调试故障转储，在windbg的以下输出中，您可以看到“第一次/第二次机会不可用”，为什么第一次/第二次机会在这里不可用？这是什么意思？

```
This dump file has an exception of interest stored in it.
The stored exception information can be accessed via .ecxr.
(e38.2270): Access violation - code c0000005 (first/second chance not available) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T11:45:31.920

*[第一次/第二次机会](http://support.microsoft.com/kb/105675)*是指可以抛出的异常和可以利用的调试器的处理机制。使用调试器调试应用程序时，调试器可以*在应用程序之前*看到异常，因此*第一次*有机会处理它们。

第*[一次机会异常](http://blogs.msdn.com/b/davidklinems/archive/2005/07/12/438061.aspx)*是由调试器处理异常的*第一次机会*机制处理的异常。

此处没有可用的事实很可能意味着在发生此错误的地方没有引发异常，或者调试器中没有第一次机会处理机制可用于处理引发的任何异常。

我会押注这个错误不会因此而引发异常，这只是一个段错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T08:09:15.690

根据[http://www.dumpanalysis.org/](http://www.dumpanalysis.org/) `(first/second chance not available)`意味着崩溃转储文件中缺少有关异常是第一次机会还是第二次机会的信息。[如何区分第一次和第二次机会](http://www.dumpanalysis.org/blog/index.php/2008/01/02/how-to-distinguish-between-1st-and-2nd-chances/)

揭开第一次机会异常的神秘面纱（第[1](http://www.dumpanalysis.org/blog/index.php/2008/05/22/demystifying-first-chance-exceptions-part-1/)部分 ，第[2](http://www.dumpanalysis.org/blog/index.php/2010/02/04/demystifying-first-chance-exceptions-part-2/)部分）。

# .net - 运行 Winform 应用程序时，Windows 7 任务栏中未显示 AssemblyTitle

> ID：14978916
> 
> 赞同：2
> 
> 时间：2013-02-20T11:38:39.533
> 
> 标签：.net, winforms, windows-7, taskbar

这是我无法理解的 Windows 7 64 位机器上的奇怪问题。

我有一个 WinFrom 应用程序。它`AssemblyInfo.cs`包含以下内容：

```
[assembly: AssemblyTitle("Test Application")]
[assembly: AssemblyDescription("Test Application")]

#if DEBUG
    [assembly: AssemblyConfiguration("Debug")]
#else
    [assembly: AssemblyConfiguration("Release")]
#endif

[assembly: CLSCompliant(true)]

[assembly: AssemblyInformationalVersion("1.0.000")] 
```

当我右键单击`.exe`文件并查看`Properties`文件时，我可以看到正确的`File Description`.

但是，当我运行应用程序时，**我`AssemblyTitle`在 Windows 7 任务栏的 jump-list 中看不到正确的名称（来自 ）**。我得到的是*我的应用程序`Main`方法*所在的命名空间。更令人惊讶的是，它有时会在*其他*一些Windows 7 机器上正确显示。

有没有人遇到过这样的问题？`AssemblyTitle`除了在 Windows 7 上运行的 .NET 4.0 Winform 应用程序之外，我们是否需要设置一些属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:57:45.660

您在桌面某处、开始菜单或固定到任务栏上都有一个应用程序的快捷方式，该快捷方式具有此确切名称。Windows 实际会搜索应用程序对应的快捷方式，并会从这里获取图标和名称。

# django - 所有视图中来自 base.html 的类别？

> ID：14978918
> 
> 赞同：1
> 
> 时间：2013-02-20T11:38:40.547
> 
> 标签：django

我有类别模型：

```
class Category(models.Model):
    name = models.CharField(max_length=255)
    slug = models.SlugField() 
```

我希望在我的基本 html 中有我的类别列表。怎么做？

```
 <ul>
        <li class="category">Search Property</li>

        {% for cat in category %}
            <li class="category_link"><a href="/category/{{ cat.slug }}/">{{ cat.name }}</a></li>
        {% endfor %}    
    </ul> 
```

视图.py

```
def category(request):
    category = Category.objects.all()
    return render_to_response('base.html',{'category':category}, context_instance=RequestContext(request)) 
```

网址.py：

```
url(r'^cat/','content.views.category'),
) 
```

此工作仅在**127.0.0.1:8000/cat**

我在所有视图中都需要这个（我的类别显示在 base.html 中）。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:43:09.223

您可以使用 Django 模板标签：[https ://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-tags](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-tags)

在 app/templatetags/categories.py

```
 from django.template.base import Library

    register = Library()

    @register.inclusion_tag('path/to/template')
    def categories():

        categories = Category.objects.all()
        return {'categories': categories,} 
```

在 html 中

```
{% load categories %} 
```

以及您想在哪里包括类别

```
{% categories %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T11:47:59.623

编写一个返回类别列表的[上下文处理器。](https://docs.djangoproject.com/en/dev/ref/templates/api/#writing-your-own-context-processors)像这样简单的东西应该可以工作：

```
def all_categories(request):
    return {'ALL_CATEGORIES': Category.objects.all()} 
```

并将其添加到您的`TEMPLATE_CONTEXT_PROCESSORS`设置中。

请注意，在这样做时，`ALL_CATEGORIES`将在每个使用[RequestContext](https://docs.djangoproject.com/en/dev/ref/templates/api/#django.template.RequestContext)的模板上下文中可用。

# html - 过渡和子节点 css

> ID：14978920
> 
> 赞同：1
> 
> 时间：2013-02-20T11:38:49.987
> 
> 标签：html, css

我不明白为什么子 div 显示没有淡入淡出效果？我需要当我将鼠标悬停在div（“黑色”）上时，div（红色）逐渐出现..怎么做？

[小提琴](http://jsfiddle.net/sGxgv/)

HTML

```
<div class="main">
    <div class="ok"></div>  
</div> 
```

CSS

```
.main {
    width: 200px;
    height: 200px;
    background: black;
}
.ok {
    width: 50px;
    height: 50px;
    background: red;
    display: none;
    -webkit-transition: opacity 1s linear;  
    opacity: 0;
}
.main:hover .ok{ 
    opacity: 1;
    display: block;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:47:02.367

`display`更改属性时不能应用过渡：

[显示器上的转换：属性](https://stackoverflow.com/questions/3331353/transitions-on-the-display-property)

只需卸下显示部分，它就可以工作：

```
.ok {
    width: 50px;
    height: 50px;
    background: red;    
    transition: opacity 1s linear;  
    opacity: 0;
}
.main:hover .ok{ 
    opacity: 1;
} 
```

小提琴：http: [//jsfiddle.net/sGxgv/1/](http://jsfiddle.net/sGxgv/1/)

# facebook - 如何获取 Facebook 用户的好友电子邮件

> ID：14978923
> 
> 赞同：0
> 
> 时间：2013-02-20T11:38:58.693
> 
> 标签：facebook, facebook-graph-api

晚上好，我只是问如何使用 Facebook API 或其他方式获取用户的朋友电子邮件，我想使用此功能的场景如下，我的应用程序有一个名为“导入 facebook 朋友”的功能，可以以下内容： - 验证该用户是否拥有有效的 facebook 帐户 - 询问他的 facebook 标识符（电子邮件） - 从他的标识符中获取他所有的朋友并获取每个人的电子邮件 我不知道是否有任何 API 可以执行此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:22:07.020

您可以获得几乎所有关于朋友的详细信息，例如他们的照片、兴趣、状态更新，但不能`email address`。

来自 Facebook[电子邮件权限页面](https://developers.facebook.com/docs/reference/login/email-permissions/)：“注意：应用程序无法获取用户朋友的电子邮件地址。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:23:39.933

要获取用户的电子邮件地址，您需要该`user_email`权限。`friends_email`但是，由于 Facebook 不允许应用程序获取这些电子邮件地址，因此没有等效的权限来获取朋友的电子邮件地址。

相反，您使用 Facebook 用户 ID 将朋友联系在一起。这是做事的正确方法，因为电子邮件地址无论如何都会改变。

# android - 在 UI 线程上加载和创建 AsyncTask 有什么区别？

> ID：14978924
> 
> 赞同：3
> 
> 时间：2013-02-20T11:39:01.677
> 
> 标签：android, android-asynctask

在阅读[AsyncTask 文档](http://developer.android.com/reference/android/os/AsyncTask.html)（关于线程规则的部分）时，我发现了这一点：

> *   AsyncTask 类必须在 UI 线程上加载。这是从 JELLY_BEAN 自动完成的。
> *   任务实例必须在 UI 线程上创建。
> *   必须在 UI 线程上调用 execute(Params...)。

*“加载”*是什么意思？它不是实例化或执行，正如文档稍后谈到的那样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-29T03:22:06.460

我不相信[这个答案](https://stackoverflow.com/a/14978983/119114)实际上是正确的。

如果这些东西实际上是相同的，那么文档**单独**列出*实例化*和*加载是没有意义的。*我相信这个说法

> AsyncTask 类必须在 UI 线程上加载。

指的是[Java 类加载](http://www.ibm.com/developerworks/library/j-dyn0429/)。换句话说，`AsyncTask` **类**本身需要加载到主线程上。在 Jelly Bean（或更高版本）中，这是自动的。但是，在旧版本的 Android 中，此类可能会加载到另一个线程上，这可能会导致问题。

[有关更多信息，请参阅此 Google 讨论](http://code.google.com/p/android/issues/detail?id=20915)。基本上，有一些条件（例如，使用 的代码`IntentService`）可能导致`AsyncTask`首先在错误的（非主）线程上*加载。*

在 Jelly Bean 之前，最简单的解决方法似乎是使用类似的东西：

```
Class.forName("android.os.AsyncTask"); 
```

在应用程序的[onCreate() 方法](http://developer.android.com/reference/android/app/Application.html#onCreate%28%29)中，强制类加载在您想要的时候发生。

* * *

**创建**`AsyncTask`实例可能就是您认为的那样......实例化它：

```
MyAsyncTask task = new MyAsyncTask(); 
```

这也应该在主线程上运行。

# azure - 为什么 Windows Azure CloudBlobContainer 访问偶尔会失败，根据验证程序远程证书无效

> ID：14978928
> 
> 赞同：6
> 
> 时间：2013-02-20T11:39:18.763
> 
> 标签：azure

我正在使用 Windows Azure 的评估订阅。

有时，当我尝试访问 CloudBlobContainer 上的方法（例如 GetPermissions()）时，Web 服务会挂起。添加一些日志记录后，我看到“底层连接已关闭：无法为 SSL/TLS 安全通道建立信任关系。根据验证过程，远程证书无效。” 在我的日志中。

我在使用 CreateIfNotExists() 时也发生过这种情况。

这可能是什么原因造成的？

我最近从版本 1.7 升级到版本 2 的存储客户端库，但仍然看到这种行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:47:05.370

这不是我以前遇到过的问题，但如果错误消息是准确的，那么存储中的 SSL 证书就会出现一些问题。一种可能的解决方法是不使用 SSL。如果您与同一数据中心的存储帐户交谈，我认为这不会对安全性产生不利影响。您应该可以通过将连接字符串中的 https 更改为 http 来做到这一点。

如果这确实有效，则可能需要联系 MS 支持，这可能表明他们有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T10:56:18.317

我将回答我自己的问题，希望对其他人有用。

问题是 ServicePointManager.ServerCertificateValidationCallback 的范围。

它是静态的，在设置后会影响 CloudBlobContainer 方法。

# multithreading - Akka：针对线程利用率的消息处理

> ID：14978931
> 
> 赞同：0
> 
> 时间：2013-02-20T11:39:31.250
> 
> 标签：multithreading, akka

当消息进入邮箱时，调度程序选择一个演员，恢复它并将其放在操作系统线程上。Java 线程与 OS 线程映射以执行执行。

Actor 将使用池中的一个线程并使用该线程进行消息处理并将线程释放到池中。

Actor 没有专用线程。有一个线程池，参与者将使用分配的线程来处理消息，一旦消息处理完成，线程将被释放。因此，Actor 与线程解耦。

现在让我们举个例子：

```
public class GreetingActor extends UntypedActor {
    LoggingAdapter log = Logging.getLogger(getContext().system(), this);

    public void onReceive(Object message) throws Exception {
        if (message instanceof String) {
            String sRmsg = (String) message;
            businessImpl.collectdata(sRmsg); // assume this method takes 1 mins for completion
        }
    }
}

ActorSystem system = ActorSystem.create("MySystem");
ActorRef greeter = system.actorOf(new Props(GreetingActor.class), "greeter");
greeter.tell("Charlie Parker"); 
```

在这里，greeter actor 使用 tell 方法发送消息，因此该消息将进入邮箱队列，调度程序将从队列中选择消息并使用该消息调用 actor。

当在 GreetingActor 的 'onReceive' 方法中接收到消息时-我的问题是演员使用的线程何时会被释放回池中-在 onReceive 方法中接收消息之后还是在执行 collectdata() 方法之后？

另外，“消息处理”表示什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:45:12.937

```
businessImpl.collectdata(sRmsg); // assume this method takes 1 mins for completion 
```

如果这条线可能会花费那么多时间，那么它应该被视为阻塞调用。文档中有一节解释了如何安全处理此类情况：

[http://doc.akka.io/docs/akka/2.1.0/general/actor-systems.html#blocking-needs-careful-management](http://doc.akka.io/docs/akka/2.1.0/general/actor-systems.html#blocking-needs-careful-management)

> 当在 GreetingActor 的 'onReceive' 方法中接收到消息时-我的问题是演员使用的线程何时会被释放回池中-在 onReceive 方法中接收消息之后还是在执行 collectdata() 方法之后？

它会在执行 long collectdata() 调用后将线程“释放”回池中——因此上面的代码很危险。

我在上面粘贴的链接有一些很好的模式如何解决这个问题，如果你不能将任务分成更小的部分（例如，因为你使用了一个你无法控制的外部库）。

如果您可以将该方法拆分为更细粒度的短时任务，由参与者处理和消息传递，那么您不需要特殊处理。

-Endre，
Akka 团队

# r - 在 R 中随时间绘制值

> ID：14978944
> 
> 赞同：0
> 
> 时间：2013-02-20T11:40:21.290
> 
> 标签：r

我有一个值向量：`b=read.csv('https://dl.dropbox.com/u/22681355/b.csv')`

我想用 x 轴上代表时间的值 1:2000 和 y 轴上的向量值来绘制它们。

当我使用它们绘制它们时，`hist(b)`我得到相反的东西，y 轴上的值是 1:2000，x 上是实际值。

我怎样才能扭转这种局面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:44:39.800

尝试`barplot(b)`或`plot(b,type="b")`代替。

（你的链接对我不起作用。）

# tsql - 使用 Datediff 求和

> ID：14978945
> 
> 赞同：0
> 
> 时间：2013-02-20T11:40:23.873
> 
> 标签：tsql, sum

我应该知道这一点，但我不记得了，如何添加另一列来显示 AmountDays* PitchValues.Value = results。

```
SELECT DATEDIFF(day, Bookings.ArrivalDate, Bookings.DepartureDate) AS AmountDays, 
   PitchValues.Value
FROM   Bookings 
INNER JOIN PitchValues 
   ON Bookings.PitchType_Skey = PitchValues.PitchType_Skey 
```

到目前为止的结果

```
AmountDays PitchValues.Value   BookingValue
    15           £15                
    7            £9
    8            £25 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:44:38.300

```
SELECT        
  DATEDIFF(day, Bookings.ArrivalDate, Bookings.DepartureDate) AS AmountDays, 
  PitchValues.Value,
  (DATEDIFF(day, Bookings.ArrivalDate, Bookings.DepartureDate)) * PitchValues.Value AS YourCol
FROM            
  Bookings INNER JOIN
  PitchValues ON Bookings.PitchType_Skey = PitchValues.PitchType_Skey 
```

或者，只是为了让它看起来很漂亮：

```
SELECT
  P0.AmountDays,
  P0.Value,
  (P0.AmountDays * P0.Value) as YourCol
FROM
  (
    SELECT        
      DATEDIFF(day, Bookings.ArrivalDate, Bookings.DepartureDate) AS AmountDays, 
      PitchValues.Value
    FROM            
      Bookings INNER JOIN
      PitchValues ON Bookings.PitchType_Skey = PitchValues.PitchType_Skey
  ) P0 
```

如果存在空值，您还可能希望在列周围执行 ISNULL(,0)，整个值将变为空值。像这样：

```
SELECT
  P0.AmountDays,
  P0.Value,
  (P0.AmountDays * P0.Value) as YourCol
FROM
  (
    SELECT        
      ISNULL(DATEDIFF(day, Bookings.ArrivalDate, Bookings.DepartureDate), 0) AS AmountDays, 
      ISNULL(PitchValues.Value, 0) as Value
    FROM            
      Bookings INNER JOIN
      PitchValues ON Bookings.PitchType_Skey = PitchValues.PitchType_Skey
  ) P0 
```

# c# - 在表格的每一行上添加一个按钮

> ID：14978954
> 
> 赞同：1
> 
> 时间：2013-02-20T11:40:51.533
> 
> 标签：c#, asp.net

我目前正在寻找一种在表格的每一行上插入按钮的方法（请注意，这是一个会定期更改的动态表格），此按钮将用于从表格中删除该行 - 我已经尝试使用此方法在每一行上添加一个按钮：

```
 foreach (string instrument in splitInstrumentList)
            {
                TableRow r = new TableRow();
                r.Cells.Add(new TableCell());
                Button deleteButton = new Button();

                string instrumentString = instrument.ToString();

                if (instrumentString.Contains(","))
                {
                    instrumentString.Replace(",", string.Empty);
                }

                if (instrumentString.Length > 0 && string.IsNullOrEmpty(instrumentString))
                {
                    r.Cells[0].Text = instrumentString;

                    this.instrumentTable.Rows.Add(r);
                    deleteButton.ID = "deleteButton";
                    deleteButton.Text = "Delete";
                    instrumentTable.Controls.Add(deleteButton);

                }
            } 
```

但是我不能这样做，因为 Table 不能使用我应该意识到的子类型 Button..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:44:24.837

您需要在行的单元格中添加按钮，目前您正在将按钮添加到表格本身。您应该创建一个新单元格，然后将 Button 添加到单元格中，然后将单元格添加到行中。

```
TableCell cell = new TableCell();
cell.Controls.Add(deleteButton);
r.Cells.Add(cell); 
```

您还应该在将按钮单击事件添加到要执行删除操作的单元格之前针对 Button Click 事件注册一个事件。

# javascript - 更改日期格式高级自定义字段 wordpress

> ID：14978955
> 
> 赞同：0
> 
> 时间：2013-02-20T11:41:05.263
> 
> 标签：javascript, wordpress, custom-fields, date-formatting

嗨，我正在使用 wordpress 处理高级自定义字段，我正在尝试修复要显示的日期：24/01/201 而不是 01/24/2013

我一直在查看 ACF 站点，但我似乎无法找到它为什么这样做。

请找到我的代码:)

```
<?php
 // start query
                       $query_args = array(

                           // number of featured items to show
                           'posts_per_page' => '-1',
                           'post_type' => 'product',

                       );

                       $args = array(
                            'meta_key' => 'time_&_date',
                            'orderby' => 'meta_value_num',
                            'order' => 'DESC'
                        );

                        $the_query = new WP_Query( $args );

                        while ( $the_query->have_posts() ) : $the_query->the_post();

                            $date = DateTime::createFromFormat('Ymd', get_field('time_&_date'));
                            echo $date->format('M d, Y');
                        endwhile;

                       // start loop
                       $wp_query = new WP_Query($query_args);
                       if ($wp_query->have_posts()) {
                       echo '<ul class="eventslist">';

                        echo '</br>';
                        echo '</br>';
                           // start while
                           while($wp_query->have_posts()) : $wp_query->the_post();
                           $_product = new jigoshop_product(get_the_ID());
                           echo '<li>';
                               // Event container
                               echo '<a href="'.get_permalink().'">';

                              // Event title
                              echo '<div class="loop_title lightlinksnounderline"> <span>&bull;</span>' . the_title('','',false);

                              echo '</a>';
                              echo '</div>';

                              echo '<h3 class="field_title_loop">Date &amp Time: '; the_field('time_&_date');

                                    echo '</h3>';
                                     echo '<div class="cart_button">' ; do_action('jigoshop_after_shop_loop_item', $post, $_product );
                                        echo '</div>';

                           echo '</li>';
                           echo '<div class="price_cart">' ; do_action('jigoshop_after_shop_loop_item_title', $post, $_product);
                                echo '</div>';
                           echo '</br>';

                            echo '<div class="cart_line">';
                                     echo '</div>';

                           // end while
                           endwhile;
                       echo '</ul>';

                       // end loop
                       // reset query
                       wp_reset_query();
                       }

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:23:48.080

你的 $date->format 不应该是 (d MY) 吗？

# netty - Netty 4 ChannelInboundMessageHandlerAdapter

> ID：14978959
> 
> 赞同：0
> 
> 时间：2013-02-20T11:41:12.373
> 
> 标签：netty

当此类已被实例化并连接到管道时，实际上会调用[ChannelInboundMessageHandlerAdapter](http://netty.io/4.0/api/io/netty/channel/ChannelInboundMessageHandlerAdapter.html)类的哪些方法？显然[messageReceived](http://netty.io/4.0/api/io/netty/channel/ChannelInboundMessageHandlerAdapter.html#messageReceived%28io.netty.channel.ChannelHandlerContext,%20I%29)是（如 Netty 3 中的情况）。[其文档](http://netty.io/4.0/api/io/netty/channel/ChannelInboundMessageHandlerAdapter.html#method_summary)中列出的其他方法呢？

为了处理消息，实现必须覆盖除[messageReceived](http://netty.io/4.0/api/io/netty/channel/ChannelInboundMessageHandlerAdapter.html#messageReceived%28io.netty.channel.ChannelHandlerContext,%20I%29)之外的任何其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:08:20.150

您只需要覆盖 messageReceived 即可处理消息。如果您想要一些“特殊”处理，您“可以”覆盖其他人。

# java - 具有用于构建实体的内部类的实体

> ID：14978963
> 
> 赞同：2
> 
> 时间：2013-02-20T11:41:23.890
> 
> 标签：java, hibernate, jpa, orm

我正在 JPA 中尝试一对一的映射，在这里我建立了学生和联系人之间的关系，每个学生都有一个联系人。

我创建学生实体如下，

```
@Entity
@Table(name="TBL_STUDENT")
public class Student  implements  Serializable{

   public Student(){ }
   @Id
   @GeneratedValue(strategy=GenerationType.IDENTITY)
   @Column(name="ID")  
   private Integer studentId;

   @OneToOne(targetEntity=StudentContact.class,fetch=FetchType.LAZY)
   @JoinColumn(name="CONTACT_ID")
   private StudentContact contact;
   ....
   ....
   ....
} 
```

现在 StudentContact 实体如下，

```
@Entity
@Table(name="TBL_STD_CONTACT")
public class StudentContact extends Serializable{
     public StudentContact(){ }

     @Id
     @Column(name="ID")
     @GeneratedValue(strategy = GenerationType.IDENTITY)
     private Integer contactId;
     ...
     ...
     // all the properties mapped,

     public static class Builder{
         private Integer contactId;
         private String phoneNo;
         private String streetAddr;
         ....
         // all the properties as same as StudentContact

         public Builder(String val){
            this.city = val;
         }

         public Builder setContactId(Integer contactId) {
            this.contactId = contactId;
            return this;
         }

         // rest all the setter methods are like the above, having return type Builder

         public StudentContact build(){
              return new StudentContact(this);
         }
     }

     private StudentContact(Builder builder){
            this.contactId = builder.contactId;
            this.city = builder.city;
            this.phoneNo = builder.phoneNo;
            .......
            ...
     }
} 
```

在上面的 StudentContact 实体中，您可以看到我创建了一个内部类 Builder，其职责是使用其“build”方法构建 StudentContact 对象，您可以在下面提到的 StudentTest 类中看到

现在我写了一个 StudentTest 类，它的主要方法如下，

```
public class StudentTest {
    public static void main(String [] args){
        try{
             StudentDAO dao = new StudentDAO();
             Student student = dao.getEntity(110);  
             StudentContact contact = new StudentContact.Builder("Bhubaneshwar")
                                      .setPhoneNo("9867342313")
                                      .setPinCode("400392")
                                      .setState("Odhisha").build(); 

             student.setContact(contact);
             dao.updateEntity(student);
           }catch(Exception e){
               e.printStackTrace();
           }
} 
```

当我从 netbeans IDE 运行 StudentTest 时，它给出错误

```
Exception in thread "main" java.lang.VerifyError: Constructor must call super() or this() before return in method com.entities.StudentContact.<init>()V at offset 0 
```

我无法理解这个错误，这个错误是否是因为我在 StudentContact 类中创建的内部类，

我该如何解决这个问题，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:40:39.717

`java.lang.VerifyError`表示字节码不正确。通常可以通过完全清理/重建项目来修复它。（我有时会在包/类重命名或类从一个包移动到另一个包之后看到它）。

正如评论中提到的：`extends Serializable`不正确。（也许是您的字节码问题的原因？）

# .net - 以前的数据保留在网络流上

> ID：14978965
> 
> 赞同：1
> 
> 时间：2013-02-20T11:41:27.100
> 
> 标签：.net, vb.net, networkstream

我目前正在构建一个具有一些日志记录功能的文件传输应用程序。它的作用是，每次客户端连接或断开连接时，它都会向服务器发送日志（字符串消息）。日志记录部分工作正常，但是当我尝试发送文件时，程序会出错。

看来这纯粹是服务器端问题。发生的是以前的数据；这是用于记录的字符串消息，从客户端发送似乎卡在网络流上。当我在连接到服务器后尝试发送文件时，我收到一条错误消息，指出*path 中的非法字符*。

**这是错误的屏幕截图。**

![在此处输入图像描述](../Images/8a5cf4c42db19a6546f612e4ff416638.png)

我相信发生这种情况是因为，正如您在上面的屏幕截图中的`FileName`变量中看到的那样，当客户端连接时发送的字符串的一部分（“已连接。”）卡在网络流上。hello.cpp 是正在发送的文件的名称。

**这是代码。**

```
Dim ClientSocket As TcpClient = CType(tcpSocket, TcpClient)

Dim networkStream As NetworkStream = ClientSocket.GetStream() 'This stream is
'for the logging part. This part here, I think causes the error because when I
'remove this and the conditions for the logging part, leaving the file sharing
'algorithm alone, the whole program works.

While FileSharingStarted

    If CBool(ClientSocket.Available) Then
        Dim ByteData(ClientSocket.ReceiveBufferSize) As Byte
        networkStream.Read(ByteData, 0, CInt(ClientSocket.ReceiveBufferSize))
        fileLogMessage = Encoding.ASCII.GetString(ByteData)

        If fileLogMessage.Contains("is connected." & Environment.NewLine) Then

            'This block here is for logging purposes. It receives the string 
            'message sent by the client when it connects and does some stuffs.

        ElseIf fileLogMessage.Contains("is disconnected." & Environment.NewLine) Then

            'This block here is for logging purposes again. It receives the 
            'string message sent by the client when it disconnects and then 
            'does some stuffs.

        Else

            'This part is for receiving the file sent by the client.

            Dim FileName, FilePath As String
            Dim FileLength As Long
            Dim binaryReader As New BinaryReader(ClientSocket.GetStream())

            FileName = binaryReader.ReadString()
            FileLength = binaryReader.ReadInt64()
            FilePath = Path.Combine(System.Environment.CurrentDirectory & "\home", FileName)

            Dim FileData(8092) As Byte
            Dim TotalData As Long = 0
            Dim ReadBytes As Integer = -1

            Using FileStream As New FileStream(FilePath, FileMode.Create, FileAccess.Write)
                FileSharingStatusBar.Panels.Item(1).Text = "Receiving file . . ."

                Do Until TotalData = FileLength
                    ReadBytes = ClientSocket.GetStream.Read(FileData, 0, FileData.Length())
                    FileStream.Write(FileData, 0, ReadBytes)
                    TotalData += ReadBytes
                Loop
            End Using

            MessageBox.Show("File received.", "Message", MessageBoxButtons.OK, MessageBoxIcon.Information)

            FileSharingStatusBar.Panels.Item(1).Text = "Idle."
        End If
    End If

End While 
```

我只是好奇为什么会这样。我在这里错过了什么吗？任何解释或建议来解决这个问题都将受到高度赞赏。请赐教。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:12:36.930

您的假设是正确的，即在您读取数据后，下次您从流中读取时，将不会再次返回相同的数据。每次从流中读取时，您在流中的位置都会自动向前移动。但是，问题似乎在于，当服务器从流中读取数据时，客户端已经发送了多条消息（在您的示例中，一条日志消息后跟一条文件传输消息）。当您的服务器应用程序读取流时，它不会解析多条消息并单独处理它们。此外，正如我在上面的评论中提到的，您的服务器应用程序需要处理它也可能接收部分消息的事实。它需要在通信进入时对其进行缓冲，并且仅在收到完整的消息数据后才处理消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:15:32.580

根据我对网络流的经验，我相信您对流清除自身的假设是正确的^([[1]](https://stackoverflow.com/questions/14978965#comment21042865_14978965))。

我在网络流中观察到的另一件事是，如果执行了一个或多个连续写入，则这些写入全部放在一起，并且在接收端将整个流读取到最后之前不会被清除。这对您意味着，如果在接收者读取流之前发送了多条消息，则可能无法区分消息。

解决此问题的一种方法是在流中插入占位符以标记不同消息的开始和/或结束。如果这样做了，您的程序将能够确定一块数据的开始位置和结束位置。在我看来，实施占位符应该可以让您摆脱当前遇到的麻烦。

**示例实现**
***说明：****斜体代码可能不正确*

```
Dim placeholder As Byte() = New Byte() {&H00, &H01, &HFE, &HFF}
Dim message As New List(Of Byte)()
Dim data As Byte()

Do While True
    *data = stream.ReadBytes(1024)*
    If *data.Skip(data.Length - placeholder.Length).SequenceEquals(placeholder)* Then
        message.AddRange(data.Take(data.Length - placeholder.Length)
        Exit Do
    Else
        message.AddRange(data)
    End If
Loop

' do something with the message read 
```

这样做是它读取流，直到它读取以占位符签名结尾的数据块，然后它停止并对从流中读取的消息执行某些操作。

当然，在您的实现中，您可以有多个连接的消息，因此您必须有一种方法来保存下一条“意外”读取的消息中的字节。您还必须对读取的数据块进行模式匹配，而不是检查开头/结尾是否与占位符匹配。

# xml - 将自定义属性添加到 magento1.7 购物车侧边栏

> ID：14978967
> 
> 赞同：1
> 
> 时间：2013-02-20T11:41:31.783
> 
> 标签：xml, magento, block, magento-1.7

我正在尝试在显示产品的每个地方显示商品的品牌，包括默认情况下通常显示在右侧的结帐购物车块。

我尝试了几种方法，但其中一种似乎奏效了。

**购物车/侧边栏/default.phtml**

```
$_item  = $this->getItem();
$_product   = $_item->getProduct()->load();
$attributes = $_product->getAttributes(); 
```

这会导致内存错误，所以我尝试使用获取自定义属性并将属性名称传递给它，但这也不起作用。获取自定义属性只返回 NULL

**默认/布局/checkout.xml**

```
 <default>

    <!-- Mage_Checkout -->
    <reference name="top.links">
        <block type="checkout/links" name="checkout_cart_link">
            <action method="addCartLink"></action>
            <action method="addCheckoutLink"></action>
        </block>
    </reference>
    <reference name="right">
        <block type="checkout/cart_sidebar" name="cart_sidebar" template="checkout/cart/sidebar.phtml" before="-">
            <action method="addItemRender"><type>simple</type><block>checkout/cart_item_renderer</block><template>checkout/cart/sidebar/default.phtml</template></action>
            <action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/cart/sidebar/default.phtml</template></action>
            <action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/cart/sidebar/default.phtml</template></action>
            <block type="core/text_list" name="cart_sidebar.extra_actions" as="extra_actions" translate="label" module="checkout">
                <label>Shopping Cart Sidebar Extra Actions</label>
                <action method="addAttribute"><attribute>brand</attribute></action>
            </block>
        </block>
    </reference>
</default> 
```

我编辑了这个，我认为包括我的自定义品牌属性，如果我理解正确，应该可以在侧边栏购物车中访问它......

从这一点来看，我无法说出我现在缺少什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T13:53:06.177

请试试这个。删除您自定义的所有内容。只需添加以下代码。你会看到魔法

```
 <?php $_product= Mage::getSingleton('catalog/product')->load($_item->getProductId()) ?>

    <?php echo $_product->getResource()->getAttribute('manufacturer')->getFrontend()->getValue($_product); 
```

上面的代码正在运行。在 1.7.0.2 中测试

# magento - Magento 导入产品错误

> ID：14978970
> 
> 赞同：4
> 
> 时间：2013-02-20T11:41:39.673
> 
> 标签：magento, magento-1.7, importerror

我正在尝试不走运为什么会出现这个错误。只有导入会产生错误，导出效果很好。我正在使用 CSV 文件导入产品数据，但无法正常工作。我在本地测试 Magento 设置中尝试了相同的 CSV，它工作正常。有没有人遇到过这个错误？

![在此处输入图像描述](../Images/dbc1496d7556be43ab466aae0800c294.png)

在进一步调查中，我发现显示的 DOCTYPE HTML 代码是 Dashboard 的 HTML。它在这里加载仪表板。可能是什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-13T17:20:48.507

添加另一个答案，因为这是为我解决问题的原因。`Number of records`选项卡中的选项`Profile Wizard`应设置为较小的数字。我认为这意味着导入中的记录总数，但它意味着它应该一次处理多少条记录。1 永远是安全的，但一次做更多的事情会使这个过程更快。我将它设置为 100 并将 php memory_limit 提高到 1G，一切都很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:15:31.700

您在上述过程中遇到错误或超时。Dataflow 中的错误消息非常*糟糕*，这意味着您要么按照 Fabian 的建议分解输入，要么删除一些日志记录代码以在[`Mage_Catalog_Model_Convert_Adapter_Product::parse()`(link)](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Catalog/Model/Convert/Adapter/Product.php#L378)中查找故障数据：

```
public function parse()
{
    $batchModel = Mage::getSingleton('dataflow/batch');
    /* @var $batchModel Mage_Dataflow_Model_Batch */

    $batchImportModel = $batchModel->getBatchImportModel();
    $importIds = $batchImportModel->getIdCollection();

    foreach ($importIds as $importId) {
        //print '<pre>'.memory_get_usage().'</pre>';
        $batchImportModel->load($importId);
        $importData = $batchImportModel->getBatchData();
        /**
         * Temp debug code:
         */
        Mage::log(
            $importData['sku'],
            Zend_Log::DEBUG,
            'dataflow.log',    // find @ var/log/dataflow.log
            true               // force logging
        );
        $this->saveRow($importData);
    }
} 
```

我会确保您将配置文件中的要导入设置的记录设置为相当低的值，以保持每批较小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T13:24:51.757

您是否尝试过使用 CSV 的一小部分？

我会说有一条或多条线是错误的。找到这一行，你会发现错误。

# android - 通过相机硬件捕获图像无法正常工作？

> ID：14978973
> 
> 赞同：0
> 
> 时间：2013-02-20T11:41:48.517
> 
> 标签：android, camera, android-camera, android-camera-intent

我正在尝试使用相机硬件来捕获图像列表。但是在启动相机视图时，视图看起来不像往常一样。屏幕截图附在下面。我正在测试这个`HTC Sensation running android 4.0.3`。

`Image ScreenShot while in portrait` ![在此处输入图像描述](../Images/33e7ea18c7e85a20fdae67acff8a895c.png)它看起来不像通常的相机视图。

这里有什么问题？

我在哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:48:47.330

这是在纵向模式下使用 Android 制作自定义相机的常见问题。您可能有一个 SurfaceView 用于显示您的相机预览。我将以下代码行添加到我的`surfaceCreated`方法中：

```
camera.setDisplayOrientation(90); 
```

有关更多信息，请查看有关此主题的其他一些答案（[这里是一个](https://stackoverflow.com/questions/5504605/camera-is-wrong-unless-keyboard-is-open/5504651#5504651)，[另一个](https://stackoverflow.com/questions/14472675/android-camera-orientation-for-newbie/14487177#14487177)）。基本上，Android 相机设置为在横向模式下显示，因此如果 Activity 处于纵向模式，则需要旋转方向以适应这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:56:54.260

默认情况下，硬件相机是风景（几乎很多设备），所以一旦你拍摄，我会自动旋转到 90 度 - 就好像它是在风景中拍摄的一样。

这就是为什么您在拍摄横向和 90 度旋转图像时在纵向模式下拍摄时获得正确图像的原因。

*   检测设备的方向，如果是纵向的，顺时针旋转90度，这样当它逆时针旋转90度时，它就会计数。

使用下面的代码来检测方向，

```
 @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) 
    {
        super.onRestoreInstanceState(savedInstanceState);
        if (savedInstanceState != null) 
        {
            if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT)
            {
                // code in portrait - rotate to 90 degree
            }
            else if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE)
            {
                    // code in landscape - do nothing
            }

        }
    } 
```

# sql - 如何使用 Scala 的 Slick sql 插值与所有者/模式名称前缀

> ID：14978974
> 
> 赞同：0
> 
> 时间：2013-02-20T11:41:50.923
> 
> 标签：sql, oracle, scala, scalaquery, slick

我们有一个数据库设置，其中我们有一个单独的用户，用于 Oracle 数据库中数据库表的所有者和用户。这意味着实际上每个查询的前缀如下：ownername.tablename

如果我只是在 Slick 的 SQLInterpolation.sql 函数中静态地编写整个内容，这会很好：

```
(sql"select foo_owner.foo_sequence.nextval from dual").as[Long].first() 
```

问题是，所有者前缀会根据测试/产品而变化。环境。我想做的是：

```
(sql"select $owner.foo_sequence.nextval from dual").as[Long].first() 
```

但是 SQL 插值不适用于它。我收到此错误甲骨文：

```
An exception or error caused a run to abort: ORA-22806: not an object or REF 
```

有什么建议么？我当然可以回退到更详细的 StaticQuery，但使用 sql/sqlu 插值会更紧凑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:52:26.120

使用`$foo`插入 foo 作为绑定变量。您需要为其添加前缀`#`以插入文字：

```
(sql"select #$owner.foo_sequence.nextval from dual").as[Long].first() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:42:19.387

删除前缀可以接受吗？在您的代码中，您可以运行 `ALTER SESSION SET CURRENT_SCHEMA=yourOwner`
这种方式，您不需要为 SQL 添加前缀。只要确保您没有 CREATE TABLE 或任何其他 DML，因为它会尝试在所有者的模式上运行它。

# ruby-on-rails - 黄瓜表差异，无论行顺序

> ID：14978984
> 
> 赞同：1
> 
> 时间：2013-02-20T11:42:20.560
> 
> 标签：ruby-on-rails, ruby, cucumber, bdd

有什么办法可以告诉黄瓜表的差异！方法，我不关心行顺序？

示例：该功能说：

```
| start | eat | left |
|  12   |  5  |  7   |
|  20   |  5  |  15  | 
```

代码输出

```
| start | eat | left |
|  20   |  5  |  15  |
|  12   |  5  |  7   | 
```

这对我来说没问题。尽管如此，Cucumber 还是会失败，因为它还会检查订单（在大多数情况下这很好）。

找不到解决方案:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:37:39.177

也许您可以以确保唯一顺序的方式对两个表（测试值和测试值）中的行进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-05T16:10:03.443

我原以为以下 Java 方法有相应的 ruby​​ 版本：

```
cucumber.api.DataTable#unorderedDiff(cucumber.api.DataTable) 
```

这是黄瓜核下的神器。

# opengl - 查明 GL_TEXTURE_2D 是否在着色器中处于活动状态

> ID：14978986
> 
> 赞同：12
> 
> 时间：2013-02-20T11:42:25.913
> 
> 标签：opengl, glsl

我想知道 GL_TEXTURE_2D 在着色器中是否处于活动状态。

我将颜色绑定到着色器以及活动纹理（如果设置了 GL_TEXTURE_2D）并且需要将这两者结合起来。

因此，如果绑定了纹理，则混合颜色和纹理（sampler2D * color），如果没有绑定纹理，则使用颜色。

或者我应该采取另一种方式来解决这个问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-20T14:35:53.160

'GL_TEXTURE_2D 处于活动状态'或'GL_TEXTURE_2D 已设置'的意思还不太清楚。

请注意以下事项：

*   `glEnable(GL_TEXTURE_2D)`对您的（片段）着色器没有影响。它将您刚刚通过使用片段着色器替换的管道的固定功能部分参数化。
*   没有“直接”/“干净”的方式可以从 GLSL 着色器内部判断是否存在绑定到与纹理采样器关联的纹理单元的有效纹理（据我所知）。
*   从 GLSL 1.3 开始，您可能会幸运地使用`textureSize(sampler, 0).x > 0`它来检测与*sampler*关联的有效纹理的存在，但这可能会导致未定义的行为。
*   ARB_texture_query_levels扩展确实明确声明[如果](http://www.opengl.org/registry/specs/ARB/texture_query_levels.txt)`textureQueryLevels(gsampler2D sampler)`没有与*sampler*关联的纹理，则返回 0 。

你应该采取另一种方式吗？我是这么认为的：与其在着色器中做出决定，不如简单地绑定一个 1x1 像素的“白色”纹理并无条件地对该纹理进行采样并将结果与*​​ color*相乘，这显然会返回`1.0 * color`。这也将更便携、更快。

# log4j - 我的应用程序是否使用 Log4j？

> ID：14978989
> 
> 赞同：0
> 
> 时间：2013-02-20T11:42:34.603
> 
> 标签：log4j

我有 20 个应用程序部署到单个 weblogic 服务器 [JVM]。我的任务是找出其中哪些使用 log4j，哪些不使用 log4j。

找出这一点的最好和最快的方法是什么？

注意：我只有应用程序“EARS”和“WARS”，无法访问源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:55:29.753

如果您使用的是 linux 机器，则 grep 实际上会在类文件中搜索正则表达式匹配项 - 因此您可以执行以下操作：

```
find [deployment_directory] -iname '*.ear' -o -iname '*.war' | xargs grep -R org.apache.log4j 
```

我确信这不是最优雅的解决方案，但它会为您提供与 Apache log4j 命名空间有依赖关系的每个部署。

# php - 定义变量变量并在 $_POST 中使用

> ID：14978991
> 
> 赞同：0
> 
> 时间：2013-02-20T11:42:35.730
> 
> 标签：php, variables, post

我希望简单的问题，但我无法得到解决方案。

我有一个 foreach 循环产生变量`$checkbox`。

然后我有一个字段名称，例如`approvereject`

我想创建一个结合字段名和forecah 值的新变量。

所以：

```
$joinedvariable=approvereject.$checkbox 
```

这不起作用，我也尝试过：

```
$joinedvariable=${approvereject_.$checkbox}; 
```

但是当我回显时，`$joinedvariable`我只会得到一个空白的结果。

最后，我想`$joinedvariable`在`$_POST`声明中使用：

`$_POST[$joinedvariable ]`- 这会奏效吗，因为我做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:44:45.403

试试这个 ：

```
$joinedvariable="approvereject".$checkbox;

$_POST[$joinedvariable]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:45:41.367

```
$joinedvariable='approvereject'.$checkbox 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T11:52:28.017

如果你有这样的代码：

```
foreach ($checkboxes as $checkbox) {
    echo '<input type="checkbox" name="approvereject_'. $checkbox .'" value="1">';
} 
```

在`<form>`with`method="post"`中，您可以尝试获取复选框的值，如下所示：

```
foreach ($checkboxes as $checkbox) {
    print_r(!empty($_POST['approvereject_'. $checkbox]));
} 
```

# backbone.js - 主干.js，为 2 个不同的视图连接相同的集合模型

> ID：14978992
> 
> 赞同：0
> 
> 时间：2013-02-20T11:42:36.570
> 
> 标签：backbone.js, binding, collections, views, models

我有一个集合，我正在尝试共享有关在两个不同视图之间选择的当前模型的信息

--> 简单地说，我希望能够从另一个视图访问在一个视图中选择的模型并更改/分配模型的属性

第一个视图定义为：

```
App.Views.Person = Backbone.View.extend({ 
    tagName: 'a',    
    template: template('personTemplate'),  
    initialize: function(){     
        this.model.on('change', this.render, this);
        this.model.on('destroy', this.remove, this);  
    },   
    render: function() {            
    this.$el.html( this.template(this.model.toJSON()) );
        this.input = this.$('.view');    
        return this;

    }, 
```

第二个视图定义为：

```
 App.Views.App = Backbone.View.extend({
    el: 'html',  

    initialize: function(){
    _.bindAll(this,"render");

    },
    render: function() {
              return this;
    }, 
```

我用以下内容创建了我的观点

```
addPersonView = new App.Views.AddPerson({ collection: peopleCollection });
appView = new App.Views.App({ model: person, collection: peopleCollection }); 
```

如何使在第二个视图中选择的模型与从我的集合中提取的第一个视图中的模型相同->例如，当我在底部视图的输入框中键入内容时，我想要能够使用：`this.set.model({name:title})`并为此设置在我的顶视图中选择的元素（与模型关联）的模型属性，但使用`this.set.model`不是选择在我的第一个视图中选择的正确模型

供进一步参考和混淆：我的模型正在添加到我的 PeopleView 中，其中包含我从数组加载的以下代码；

```
App.Views.People = Backbone.View.extend({
    // tagName: '',

    initialize: function() {
                var i = 1;
while(i < size)
{

var person = new App.Models.Person({ url: jsArray[i] });// creating a new person object..
        this.collection.add(person); 

        i++
}

        this.collection.on('add', this.addOne, this); 
        console.log(jsArray[1]);
        // listeners/anouncers for the collection on add..
    },

// refactored render method...  
    render: function() {

        this.collection.each(this.addOne, this);
        return this;
    },
// called from render method of collection view..
    addOne: function(person) {
        var personView = new App.Views.Person({ model: person, vent: vent });
        this.$el.append(personView.render().el);

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:01:31.213

我通过使用“通风口”来解决这个问题->（很棒的链接）通风口提供了视图交流等的方式

[http://lostechies.com/derickbailey/2012/04/03/revisiting-the-backbone-event-aggregator-lessons-learned/](http://lostechies.com/derickbailey/2012/04/03/revisiting-the-backbone-event-aggregator-lessons-learned/)，或者像这样的应用级聚合器：

```
MyApp.vent = _.extend({}, Backbone.Events);

MyApp.vent.on("some:event", function(){
alert("some event was fired!");
});

MyApp.vent.trigger("some:event"); 
```

# android - SQLite 数据库未在 android AVD 中加载

> ID：14978999
> 
> 赞同：0
> 
> 时间：2013-02-20T11:42:59.253
> 
> 标签：android, sqlite, intellij-idea

我已经运行了这段代码，但是当我想使用**db时，** **AVD**不起作用，我已将**.db**文件 复制到资产中！但不知道为什么不起作用！它说：**不幸的是程序停止了** ，任何人都可以帮忙吗？

 ******```
 public class MyActivity extends Activity {
        Button run;
        EditText ed;
        TextView v;
        SQLiteDatabase db;

        @Over

ride
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        run = (Button) findViewById(R.id.search);
        ed = (EditText) findViewById(R.id.word);
        v = (TextView) findViewById(R.id.res);

        try {
            String path="/data/data/"+getPackageName()+"/databases/dic.db";
            v.append("output file created ! \n");
            File dbfile= new File(path);
            if(!dbfile.exists())
            {   try
                {
                    v.append("file not exist !  \n");
                    InputStream in=getAssets().open("dic.db");
                    v.append("input file opend \n");
                    OutputStream out = new FileOutputStream(dbfile);
                    byte[] buffer = new byte[1024];
                    int length;

                    while ((length = in.read(buffer)) > 0)
                        out.write(buffer, 0, length);

                    out.flush();
                    out.close();
                    in.close();
                    v.append("db copied!");
                }
                catch (IOException e)
                {
                    v.append("ERR:"+e.getMessage());
                }
            }
        }
        catch (SQLException e)
        {
            v.append("ERR:"+e.getMessage());
        }

        run.setOnClickListener( new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                v.append(ed.getText()+":");
                try
                {
                    db=openOrCreateDatabase("dic.db",MODE_PRIVATE,null);
                    v.append("db opend \n");

                    Cursor c;
                    c = db.rawQuery("SELECT * FROM words WHERE en='"+ed.getText()+"';",null);
                    v.append(c.getString(1));

                }
                catch (SQLException e)
                {
                    v.append("ERR:"+e.getMessage());
                }
            }
        } );

    }
} 
```

干杯。******