# StackOverflow 问答 15997000-15997999

# c# - 多线程时，有些线程会挂几分钟

> ID：15997002
> 
> 赞同：0
> 
> 时间：2013-04-14T08:08:13.660
> 
> 标签：c#, multithreading

我在 C# 中有一个具有多个线程的应用程序，并且一些线程挂起很长时间（几分钟）。示例：我创建了 50 个线程...所有线程都具有相同的功能，但有些线程会停止并且几分钟不做任何处理，然后再次运行。这可能是什么原因？是因为处理器的线程有限吗？这看起来很奇怪，因为当处理器显示它只使用了百分之几的容量时，它等待的时间太长了，即没有过载。

这是我用来创建多个线程的一些代码：

```
clsCreateThread clsCreateThread = new clsCreateThread(dataA,dataB,dataC);
arrayThreads[i] = new Thread(new ThreadStart(clsCreateThread.StartNewThread));
arrayThreads[i].Start(); 
```

# java - 带有 .* 的 Java 正则表达式组与普通正则表达式

> ID：15997004
> 
> 赞同：2
> 
> 时间：2013-04-14T08:08:21.163
> 
> 标签：java, regex, regex-greedy

我正在尝试使用正则表达式来抓取 2 段完整的字符串。我的正则表达式在[http://gskinner.com/RegExr/上运行良好](http://gskinner.com/RegExr/)

这是一个示例字符串：

```
Regex is fun when it works 99 
```

这是我的正则表达式

`(.*)\\s+(\\d+)$`

这些是我在使用 Java 的匹配器 (matches()) 和模式时得到的组：

```
1: Regex is fun when it works 99
2: Regex is fun when it works 
```

使用普通的正则表达式（在 RegExr 上），我得到了我真正期望的结果：

```
1: Regex is fun when it works
2: 99 
```

将 Regex 放入 Java 时有什么需要注意的警告吗？我已经有特殊字符的 \\ 。也许使用 . ?

如果您想要复制和粘贴示例应用程序：

```
String str = "Regex is fun when it works 33";
String regx = "(.*)\\s+(\\d+)$"

Pattern p = Pattern.compile(regx);
Matcher m = p.matcher(str);

if (m.matches()) {
   for (int i = 0; i < m.groupCount(); i++) {
      System.out.println(i + ": " + m.group(i));
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T08:13:05.510

将您的第一次捕获更改为非贪婪，如下所示：

```
(.*?)\\s+(\\d+)$ 
```

[请参阅此正则表达式教程](http://www.regular-expressions.info/repeat.html)中的“注意贪婪” ，但简单地说，尾随`?`会使前面的`*`量词变得*懒惰*。也就是说，它将尽早停止消费字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T09:16:50.480

你没有得到`99`你期望的原因是整个比赛`group(0)`没有被计算在内`groupcount()`，所以`for`循环太早了。

因此，如果您更改`i < m.groupCount()`为，`i <= m.groupCount()`您将得到

> 0：正则表达式在起作用时很有趣 99
> 1：正则表达式在起作用时很有趣
> 2：99

# javascript - 使用 string.length + 计数器变量

> ID：15997008
> 
> 赞同：1
> 
> 时间：2013-04-14T08:08:42.460
> 
> 标签：javascript, string, function

我是编程新手，目前正在[CodeAcademy](https://www.codecademy.com)上学习 javascript 。下面的代码来自教程，程序将搜索字符串以查找名称。程序将遍历数组，将每个字母与你名字的第一个字母进行比较，如果它看到那个字母：它将把那个字母和它后面的所有字母推到一个数组中，当它推入的字母数量时停止等于你名字中的字母数。

我不明白的是这条线：`for (var j = i; j < (myName.length + i); j++)` 为什么`j <(myName.length + i)`而不是`j<(myName.length)`？如果“Eric”的字母“E”是字符串中的第 25 个字符，那么`j<(myName.length + i) = j<("4" + "25")`这不是错误的，因为正确的代码应该是`j<("4")`4 是名称 Eric 的长度。

我试过运行代码，`j<(myName.length)`但它无法工作，我似乎无法理解为什么。

```
text = "Blah blah blah blah blah blah Eric \
        blah blah blah Eric blah blah Eric blah blah \
        blah blah blah blah blah Eric";

var myName = "Eric";
var hits = [];

// Look for "E" in the text
for(var i = 0; i < text.length; i++) {
    if (text[i] == "E") {
        // If we find it, add characters up to the length of my name to the array
        for(var j = i; j < (myName.length + i); j++) {
            hits.push(text[j]);
        }
    }
}

if (hits.length === 0) {
    console.log("Your name wasn't found!");
} else {
    console.log(hits);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T08:16:15.333

在您的内部循环中，您正在执行以下操作：

```
for(var j = i; 
```

当条件`if (text[i] == "E") {`得到满足时， 的值`i`非常高（30）。

现在，**当你这样做时：**

```
for(var j = i; j < (myName.length); j++) { 
```

你基本上是在做这个-

```
 for(var j = 30; j < 4; j++) { 
```

所以循环永远不会开始；因为边界条件不满足。

但是**当你这样做时：**

```
for(var j = i; j < (myName.length+i); j++) { 
```

那么你正在这样做：

```
for(var j = 30; j < (30+4) ; j++) { 
```

因此，一切正常，它应该的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T08:20:59.037

我希望你在以后的项目中不要使用上面的代码 :)

```
text = 'Blah blah blah blah blah blah Eric blah blah blah Eric blah blah Eric blah blah blah blah blah blah blah Eric';
var hits = text.match(/Eric/g) || [];
if (hits.length) {
  console.log('Your name was found ' + hits.length + ' times');
}
else {
  console.log('Your name wasn\'t found!');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T08:48:34.160

如果我理解正确，您提供的代码可以正常工作，您不明白为什么？如果是这样，这是我的解释：

两者`i`和`j`标记中的位置`text`。`i`在 中初始化为零`for(var i = 0; i < text.length; i++) {`。循环的工作方式是它将`i`根据条件进行评估`i < text.length;`，如果为真，那么它将运行代码块，执行您的迭代器（`i++`这意味着将 1 添加到 i），然后通过评估条件来开始循环再次。

您会注意到它`j`被初始化为`i`而不是零。那么发生的情况是，如果`i`字符串位置的字母`text`是“E”，那么它将开始另一个循环，设置`j`为`i`（在上面的情况下为 25），然后向前迭代你的名字的长度。我相信这种情况让你感到困惑：

`for(var j = i; j < (myName.length + i); j++) {`

所以让我来看看这个循环会发生什么：

起初它会设置`j`为 中的当前位置`text`，这很方便`i`知道。所以假设`i`已经达到 25。所以循环设置`j`为 25 via `i`。现在，由于我们想要 的*下一个*四个字符，而不是*前*四个字符，`text`因此条件设置为`j < (myName.length + i)`。

由于“Eric”是四个字符，因此它将添加`text[25]`、`text[26]`、`text[27]`和`text[28]`。`hits`如果你看一下`texts`，你会注意到第 25 到第 28 个字母是（应该是）你的名字。

# scheme - 分配律简化

> ID：15997014
> 
> 赞同：3
> 
> 时间：2013-04-14T08:10:18.673
> 
> 标签：scheme

我正在尝试编写一个利用代数表达式的分配属性来简化它的过程：

```
(dist '(+ x y (exp x) (* x 5) y (* y 6)))
=> (+ (* x (+ 1 5))
      (* y (+ 1 1 6))
      (exp x))

(dist '(+ (* x y) x y))
=> (+ (* x (+ y 1))
      y)
; or
=> (+ (* y (+ x 1))
      x) 
```

正如第二个例子所示，可能有不止一种结果，我不需要一一列举，只需要一个有效的结果。我想知道是否有人可以向我提供至少一个关于他们将如何开始攻击这个问题的定性描述？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:52:17.040

Oleg Kiselyov 的[pmatch 宏](http://www.cs.indiana.edu/cgi-pub/c311/lib/exe/fetch.php?media=pmatch.scm)使得跨术语分布因子变得非常容易：

```
(define dist
  (λ (expr)
    (pmatch expr
      [(* ,factor (+ . ,addends))
        `(+ ,@(map (λ (addend)
                     (list factor addend))
                   addends))]
      [else
        expr])))

(dist '(* 5 (+ x y))) => (+ (5 x) (5 y)) 
```

主要技巧是匹配模式并从模式中相应插槽的表达式中提取元素。这需要一个带有棘手的表达式的`cond`and到列表中的正确位置和正确的元素。写给你。`let``cdr``car``pmatch``cond``let`

因式分解出公用项更难，因为您必须查看所有子表达式以找到公因式，然后将它们拉出：

```
(define factor-out-common-factors
  (λ (expr)
    (pmatch expr
      [(+ . ,terms) (guard (for-all (λ (t) (eq? '* (car t)))
                                    terms))
        (let ([commons (common-factors terms)])
          `(* ,@commons (+ ,@(remove-all commons (map cdr terms)))))]
      [else
        expr])))

(define common-factors
  (λ (exprs)
    (let ([exprs (map cdr exprs)]) ; remove * at start of each expr
      (fold-right (λ (factor acc)
                    (if (for-all (λ (e) (member factor e))
                                 exprs)
                        (cons factor acc)
                        acc))
                  '()
                  (uniq (apply append exprs))))))

(define uniq
  (λ (ls)
    (fold-right (λ (x acc)
                  (if (member x acc)
                      acc
                      (cons x acc)))
                '()
                ls)))

(factor-out-common-factors '(+ (* 2 x) (* 2 y)))
=> (* 2 (+ (x) (y))) 
```

输出可以再清理一些，这不包括分解出 1，并且 `remove-all`丢失了，但我会把所有这些都留给你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T08:44:01.840

一个非常通用的方法：

```
(dist expr var-list)
=> expr factored using terms in var-list 
```

`dist`必须了解“可分发”功能`+,-,*,/,etc`，以及它们各自的行为方式。如果说，它只知道前四个，那么：

```
(dist expr var-list
  (if (empty? var-list) expr
    (let* ([new-expr (factor expr (first var-list))])
      (return "(* var " (dist new-expr (rest var-list))))) 
```

"return "(* var " " 语法不正确，但你可能已经知道了。无论如何我都不是球拍或 lisp 专家，但基本上这归结为字符串处理？无论如何，`factor`需要充实，以便删除单个`var`from`*`函数和所有`var`from`+`函数（将它们替换为 1）。它还需要足够聪明，仅在至少有两个替换时才执行此操作（否则我们实际上没有做任何事情）。

# tcl - 是否有一种“本机”方法可以在 Tcl 中将数字转换为 dB

> ID：15997019
> 
> 赞同：2
> 
> 时间：2013-04-14T08:11:38.223
> 
> 标签：tcl

dB或[分贝](http://en.wikipedia.org/wiki/Decibel)是用于显示对数比例的单位，特别是，我感兴趣的dB定义是X（dB）= 20log（x），其中x是“正常”值，X (dB) 是以 dB 为单位的值。当写了一个在mil之间转换的代码。和 mm，我注意到如果我使用直接方法，即乘以单位之间的比率，我会在相反的转换中得到小错误，即：`to_mil [to_mm val_in_mil]`不等于`val_in_mil`和与 mm 相同。图书馆[单位](http://tcllib.sourceforge.net/doc/units.html)已经解决了这个问题，因为它所做的转换没有那个计算错误。但是具体不提供（或者我没有找到）在库中将数字转换为 dB 的选项。

是否有另一个库/命令可以将数字转换为 dB 并将 dB 转换为数字而不会出现计算错误？

我做了一个使用直接数学转换的实验，我得到的是：

```
>> set a 0.005
0.005
>> set b [expr {20*log10($a)}]
-46.0205999133
>> expr {pow(10,($b/20))}
0.00499999999999 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T08:29:30.717

这都是精确度的问题。我们经常倾向于忘记浮点数不是实数（在数学意义上的ℝ）。

你需要多少个十进制数字？

例如，如果您只需要 5 个十进制数字，则四舍五入 0.00499999999999 将为您提供 0.00500，这就是您想要的。

由于四舍五入 fp 数字不是一件容易的事，而且可能会产生更多的麻烦，您可能只需更改确定两个数字是否相等的方式：

```
 >> set a 0.005
 0.005
 >> set b [expr {20*log10($a)}]
 -46.0205999133
 >> set c [expr {pow(10,($b/20))}]
 0.00499999999999
 >> expr {abs($a - $c) < 1E-10}
 1
 >> expr {abs($a - $c) < 1E-20}
 0
 >> expr {$a - $c}
 8.673617379884035e-19 
```

您的示例中的数字可以被视为“等于”错误或 10 ^(-18)。请注意，这只是一个粗略的估计，而不是完整的解决方案。

如果您真的在处理对数值误差传播敏感的问题，您可能会更深入地研究“数值分析”。文章[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)，或者更好的是，这个站点： http: [//floating-point-gui.de](http://floating-point-gui.de/)可能是一个开始。

如果您需要更高的精度，则应放弃“本机”要求。

您可以使用 tcllib 提供的 BigFloat ( [http://tcllib.sourceforge.net/doc/bigfloat.html](http://tcllib.sourceforge.net/doc/bigfloat.html)，甚至可以通过 ffidl ( [http://elf.org/ffidl](http://elf.org/ffidl/) ) 使用 GMP (GNU 多精度算术库)。已经为它定义了一个接口：[gmp.tcl](http://www.opensource.apple.com/source/tcl/tcl-87/tcl_ext/ffidl/ffidl/demos/other/gmp.tcl)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T12:49:01.387

使用存储浮点数的方式，每个 log10(...) 不能正好对应一个 pow(10, ...)。所以你失去了精度，就像整数除法 89/7 和 88/7 都是 12。

当您将一个值转换为浮点格式时，您应该忘记知道它的精确值的能力，*除非您也保留旧的精确值*。如果您想要精确的 1/200，请将其存储为整数 1 和整数 200。如果您想要精确的 1/200 的十对数，请将其存储为 1、200 和十对数已完成的信息它。

您可以用 2 的平方根的前 x 个十进制数字填充整个内存，但它仍然不是您存储的 2 的平方根。

# css - 在 div 中移动 div？

> ID：15997021
> 
> 赞同：1
> 
> 时间：2013-04-14T08:11:42.937
> 
> 标签：css

嗨，我基本上想向下移动我的 logo div，它位于我的 topBar div 内，但是当我使用填充或边距时，它会将整个顶部栏向下移动，或者 logo 只是重复它自己（是的，我已经尝试过 background-repeat: 否-重复）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link href="style/style.css" rel="stylesheet" type="text/css" />
</head>

<body lang="en">
<div class="alert">Do you want advertsing space? Contact us: <b>advertising@chattrd.com</b></div>
<div class="topBar">
<div id="logo">
<p>chattrd</p>
</div>
</div>
</body>
</html>

body {
    background: #F7F7F7;
    font-family:Tahoma, Geneva, sans-serif;
    margin: 0;
    padding: 0;
}
.alert {
    font-size: 10px;
    color: #FFF;
    background: #1f1f1f;
    height: 14px;
    padding-left: 10px;
    font-family: Arial;
}
.topBar {
    background: #0C3;
    height: 40px;
}
#logo {
    background-image:url(../images/logo.png);
    height: 26px;
    width: 121px;
    overflow: hidden;
    display: block;
    text-indent:-999px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T09:06:51.443

这样做的原因是您将图像用作背景。如果您想继续使用这种方法，能够垂直移动它的最简单方法是在 #logo-div 之前放置另一个 div，如下所示：

```
<body lang="en">
<div class="alert">Do you want advertsing space? Contact us: <b>advertising@chattrd.com</b></div>
<div class="topBar">
<div id="spaceDiv"></div>
<div id="logo"></div>
</div>
</body> 
```

spaceDiv 的高度可用于使用以下 CSS 移动#logo-div：

```
#spaceDiv{
    height:6px;
} 
```

# c++ - 从 C++ 中的函数正确定义和返回数组

> ID：15997022
> 
> 赞同：2
> 
> 时间：2013-04-14T08:11:53.057
> 
> 标签：c++, arrays, function, c++11, return

如果我有以下程序：

```
#include <iostream>

// being lazy and using all std just for example.
using namespace std;

int (*some_func())[10]
{
    int arr[10]= {0,1,2,3,4,5,6,7,8,9};

    return arr;
}

int main()
{
    int arr2[10] = some_func();
    for(auto i : arr2)
        cout << i << endl;

    return 0;
} 
```

这是定义返回数组的函数的正确方法吗？我知道我在这里遗漏了一些重要的东西，我的知识告诉我，当你返回 arr 时，你会得到一个 * 到 arr 的第一个元素，但它也告诉我 arr 是在本地定义的，这意味着当函数完成时 arr 将是未定义的因此，当我从返回中实际将 arr 分配给 arr2 时，我为其分配了未定义的内存，这不是我想要的，但是如果我返回 &arr 是不是本质上是一样的？

任何有关理解上述示例的帮助都会很有用，似乎我在某个地方感到困惑，但我不太确定如何纠正它。

谢谢，

欧登

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T08:17:31.390

在 C++11 中你应该使用容器[`std::array`](http://en.cppreference.com/w/cpp/container/array)

```
#include <iostream>
#include <array>

std::array<int, 10> get_array()
{
    return {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
}

int main()
{
    auto arr = get_array();
    for(const auto& elem: arr)
        std::cout << elem << std::endl;
} 
```

### 为什么更可取？

1.  在 C++ 中，你不能返回一个数组，你可以返回指向第一个元素的指针。看代码：

    ```
    int* array()
    {
        // int arr[10]; // <-- DO NOT USE IT!
        int* arr = new int[10]; // Better, but still ugly
        return arr;
    }

    int main()
    {
        auto arr = array();
    } 
    ```

    但是内存呢？您应该在使用后删除数组，但您可以忘记它。所以，你需要一个智能指针。

    ```
    std::unique_ptr<int[]> array()
    {
        std::unique_ptr<int[]> arr(new int[10]);
        return arr;
    } 
    ```

    *注意*：两种实现都使用动态分配的数组，同时`std::array`封装静态数组。

2.  您不能像其他对象一样复制或分配数组，您需要遍历一个数组并将数据复制到另一个数组中。`std::array`容器让你忘记它。

    ```
    int main()
    {
        std::array<int, 10> arr1{{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}};
        std::array<int, 10> arr2;

        arr2 = arr1;

        arr1.at(4) = 42;

        // arr1: {1, 2, 3, 4, 42, 6, 7, 8, 9, 10}
        // arr2: {1, 2, 3, 4, 5,  6, 7, 8, 9, 10}
    } 
    ```

3.  `std::array`像其他容器一样提供了很多有用的成员函数，例如 - `std::array::at(pos)`.

    ```
    int main()
    {
        std::array<int, 10> arr;
        arr.at(42) = 42;
    } 
    ```

    如果`pos >= arr.size()`.

# regex - 使用 Sed 正则表达式删除字符串

> ID：15997023
> 
> 赞同：0
> 
> 时间：2013-04-14T08:12:00.407
> 
> 标签：regex, unix, sed

我想在命令行上进行字符串替换。我可以在 Python 中执行此操作，但如果我仅在 Unix 中执行此操作，我的工作流程会更容易。目前我正试图让它与`sed`.

我正在尝试删除由单引号引起来的任何信息。在引号内，我有不同的字母、数字、空格、破折号、方括号、下划线和分号组合。

这是一个例子......

```
(214016:0.13461,814430:0.04526)'o__stuff; f__[morestuff-123]':0.03063 
```

在python中，我可以做到这一点......

```
line = "(214016:0.13461,814430:0.04526)'o__stuff; f__[morestuff-123]':0.03063"
sub(r"\'[ \w;\-\[\]]+\'","",line) 
```

哪个正确打印...

```
(214016:0.13461,814430:0.04526):0.03063 
```

我现在正在尝试使用 来做到这一点`sed`，到目前为止，这对我来说还没有成功。我一直在尝试使用[本教程](http://www.tutorialspoint.com/unix/unix-regular-expressions.htm)，这很有帮助。这就是我所拥有的...

```
sed "s/\'[-[:alnum:] ;\[\]]+\'//g" file.txt 
```

这行不通。对出了什么问题有任何想法吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:52:23.583

这可能对您有用（GNU sed）：

```
sed 's/'\''[^'\'']*'\''//g' file 
```

NB 表达式`'\''`是一个 shell 设备来表示单个`'`

```
sed "s/'[^']*'//g" file 
```

也可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T08:25:07.710

您需要将破折号放在正则表达式的第一个或最后一个；两个字符之间的破折号定义了一个字符范围，即使其中一个是反斜杠也是如此。

同样，要匹配文字右方括号，请将其放在首位（在任何否定或破折号之后）。在传统的正则表达式中，反斜杠只是字符范围内的文字反斜杠，您可以通过将任何特殊字符（破折号、方括号）放在第一位或最后一位来消除歧义。

哦，失去;的[无用使用`cat`](http://partmaps.org/era/unix/award.html)

```
sed "s/\'[-][[:alnum:];]+\'//g" file.txt 
```

你真的需要每行替换多次出现吗？如果不是，则该`/g`标志是多余的（但大多数情况下是无害的）。

# angularjs - AngularJS - 错误：未知提供者：searchResultsProvider

> ID：15997025
> 
> 赞同：1
> 
> 时间：2013-04-14T08:12:36.357
> 
> 标签：angularjs, karma-runner

**编辑：我设法让我的单元测试运行 - 我将包含服务的代码移动到不同的文件和不同的模块，使这个新模块成为 fooBar 模块的要求，然后在调用每个“it”块之前，引入代码`beforeEach(module(<new_service_module_name))`。但是，我的应用程序仍然无法运行。控制台也没有错误。这是唯一剩下的问题——当我使用全局范围来定义控制器时，应用程序可以工作，但是当我使用 angular.module.controller 时——它不会。**

我有一个`app.js`包含以下内容的文件：

```
'use strict';

var app = angular.module('fooBar', []);

app.config(['$routeProvider', function($routeProvider) {
  $routeProvider.
  when('/', {
    templateUrl: 'partials/form-view.html',
    controller: FormViewCtrl
  }).
  when('/resultDisplay', {
    templateUrl: 'partials/table-view.html',
    controller: TableViewCtrl
  }).
  otherwise({redirectTo: '/'});
}]);

app.service('searchResults', function() {
  var results = {};

  return {
    getResults: function() {
      return results;
    },
    setResults: function(resultData) {
      results = resultData;
    }
  };
}); 
```

我有另一个文件`controllers.js`，其中包含以下内容：

```
'use strict';

var app = angular.module('fooBar', []);

app.controller('FormViewCtrl', ['$scope', '$location', '$http', 'searchResults', 
    function ($scope, $location, $http, searchResults) {
        //Controller code
}]); 
```

`searchResults`是我创建的一个服务，它只有 getter 和 setter 方法。上面的控制器使用 setter 方法，因此服务被注入其中。

结果，我的应用程序无法运行！**如果我将控制器代码更改为全局的，如下所示：**

```
function ($scope, $location, $http, searchResults) {
    //Controller code
} 
```

**然后应用程序工作！**

此外，如果我使用全局范围，则以下单元测试用例有效：

```
'use strict';

/*jasmine specs for controllers go here*/
describe('Foo Bar', function() {

    describe('FormViewCtrl', function() {
        var scope, ctrl;

        beforeEach(module('fooBar'));

        beforeEach(inject(function($rootScope, $controller) {
            scope = $rootScope.$new();
            ctrl = $controller('FormViewCtrl', {$scope: scope});
        }));
        }
        //"it" blocks
} 
```

如果我恢复到模块范围，我会收到错误 -
`Error: Unknown provider: searchResultsProvider <- searchResults`

因此，通过使用全局范围，我的应用程序和单元测试运行，但通过使用 app.controller，它们似乎中断了。

我注意到的另一点是，如果我将控制器代码包含在`app.js`而不是 中`controllers.js`，那么应用程序和单元测试将再次开始工作。但是我不能将它们包含在同一个文件中 - 如何在不破坏应用程序和单元测试的情况下让它在角度范围内运行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-18T16:28:09.503

你不需要走那条路。您可以使用模块化方法，但问题在于您的第二个参数。

在你的 app.js 你有这个：

```
var app = angular.module('fooBar', []); 
```

然后在你的控制器中，你有这个：

```
var app = angular.module('fooBar', []); 
```

你在那里做的是两次定义模块。如果您只是尝试附加到应用程序模块，则不能传入第二个参数（空数组：）`[]`，因为这会创建一个全新的模块，覆盖第一个。

以下是我的做法（基于[这篇](http://briantford.com/blog/huuuuuge-angular-apps.html)关于构建大型 AngularJS 应用程序的文章。

应用程序.js：

```
angular.module('fooBar',['fooBar.controllers', 'fooBar.services']);
angular.module('fooBar.controllers',[]);
angular.module('fooBar.services', []);
...etc 
```

控制器.js

```
angular.module('foobar.controllers') // notice the lack of second parameter
    .controller('FormViewCtrl', function($scope) {
        //controller stuffs
    }); 
```

或者，对于非常大的项目，建议不要按类型（指令、过滤器、服务、控制器）对顶级模块进行分组，而是按功能（包括所有部分......这样做的原因是完全模块化- 您可以创建一个具有相同名称、新部分和代码的新模块，将其放入您的项目中作为替换，它会简单地工作），例如

应用程序.js

```
angular.module('fooBar',['fooBar.formView', 'fooBar.otherView']);
angular.module('fooBar.formView',[]);
angular.module('fooBar.otherView', []);
...etc 
```

然后在一个`formView`挂在网络根目录下的文件夹中，然后根据类型将文件分开，例如：

```
formView.directives
formView.controllers
formView.services
formView.filters

And then, in each of those files, you open with: 

angular.module('formView')
    .controller('formViewCtrl', function($scope) {

angular.module('formView')
    .factory('Service', function() {

etc etc 
```

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T09:00:16.467

好的 - 我终于想通了。基本上，如果您希望使用模块范围而不是全局范围，那么我们需要执行以下操作（如果您有类似`app.js`and的设置`controllers.js`）：

1.  在 app.js 中，定义模块范围：

    `var myApp = angular.module(<module_name>, [<dependencies>]);`

2.  在 controllers.js 中，不要再次定义 myApp - 相反，直接使用它，如：

    `myApp.controller(..);`

成功了——我的应用程序和单元测试现在可以正常工作了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-24T15:04:35.630

最佳实践是只有一个全局变量，即您的应用程序并将所有需要的模块功能附加到该变量，以便您的应用程序启动

```
var app = angular.module('app',[ /* Dependencies */ ]); 
```

在您的 controller.js 中，您再次将其启动到一个新变量中，丢失了您之前附加到它的所有服务和配置，只启动您的应用程序变量一次，再次执行会使您失去附加到它的服务

然后添加一个服务（工厂版）

```
app.factory('NewLogic',[ /* Dependencies */ , function(  /* Dependencies */ ) {
return {
function1: function(){
   /* function1 code */

    }
  }
}]); 
```

对于控制器

```
app.controller('NewController',[ '$scope' /* Dependencies */ , function( $scope /* Dependencies */ ) {
$scope.function1 = function(){
   /* function1 code */
    };
  }
}]); 
```

对于指令和配置也类似，您创建一个应用程序模块并将所有需要的控制器、指令和服务附加到它，但都包含在父应用程序模块变量中。

我一次又一次地读到，对于 javascript，最好的做法是只有一个全局变量，所以 angularjs 架构确实很好地满足了这一要求，

哦，实际上并不需要依赖项的数组包装器，但如果你想缩小你的 JS，那么它会创建一堆全局变量并完全破坏应用程序，这是一个好主意，始终坚持最佳实践，而不是做变通来让事情正常工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-03T13:15:08.640

就我而言，我定义了一个新的提供者，比如说，`xyz`

```
angular.module('test')
.provider('xyz', function () {
    ....
}); 
```

当您要配置上述提供者时，您已经将其注入并附加了“**提供者**”字符串。

前任：

```
angular.module('App', ['test'])
.config(function (xyzProvider) {
     // do something with xyzProvider....
}); 
```

如果您在没有 'Provider' 字符串的情况下注入上述提供程序，您将在 OP 中得到类似的错误。

# ios - 分段控制给出一个数值

> ID：15997027
> 
> 赞同：0
> 
> 时间：2013-04-14T08:13:03.917
> 
> 标签：ios, objective-c, uisegmentedcontrol

我有一个分段控件，当用户选择第一段时，我希望它传递数字 0、第二段 1 和第三段 2。这样我以后可以这样做：

```
NSString *submitFormJS = [NSString   
stringWithFormat:@"document.getElementById('usertype').value='**%@**';", **segment**]; 
```

其中段等于数字：0、1 或 2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:20:11.603

`UISegmentedControl`有一个名为的属性`selectedSegmentIndex`，您*可能会*发现它对此很有用。

# algorithm - 为什么在相同输入上 O(n^2) 算法比 O(n) 算法运行得更快？

> ID：15997029
> 
> 赞同：13
> 
> 时间：2013-04-14T08:13:06.487
> 
> 标签：algorithm, sorting

两种算法说 A 和 B 是为了解决同一个问题而编写的。算法 A 是 O(n)。算法 B 是 (n^2)。您希望算法 A 能更好地工作。

但是，当您运行同一台机器的特定示例时，算法 B 运行得更快。给出理由来解释这样的事情是如何发生的？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-14T08:16:48.553

例如，算法 A 可以及时运行，`10000000*n`即`O(n)`.
如果算法 B 正在其中运行`n*n`，则`O(n^2)`A 对于每个 都会变慢`n < 10000000`。

`O(n), O(n^2)`是描述行为的渐近运行时`n->infinity`

**编辑 - 示例**

假设你有以下两个函数：

```
boolean flag;

void algoA(int n) {
  for (int i = 0; i < n; i++)
    for (int j = 0; j < 1000000; j++)
      flag = !flag;

void algoB(int n) {
  for (int i = 0; i < n; i++)
    for (int j = 0; j < n; j++)
      flag = !flag; 
```

`algoA`有`n*1000000`标志翻转操作，所以它是`O(n)`，而`algoB`有`n^2`标志翻转操作，所以它是`O(n^2)`。

只要解决不等式`1000000n > n^2`，你就会得到它，因为`n < 1000000`它成立。也就是说，该`O(n)`方法会更慢。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T08:18:01.453

Big-O-notation 没有说明速度本身，只说明当你改变速度时速度将如何变化`n`。

如果两种算法在一次迭代中花费相同的时间，@Itay 的示例也是正确的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-14T08:20:04.013

了解算法将有助于给出更准确的答案。

但对于一般情况，我可以想到一些相关因素：

*   硬件相关

    例如，如果较慢的算法很好地利用了缓存和局部性或类似的低级机制（参见 Quicksort 与其他理论上更快的排序算法相比的性能）。也值得阅读有关[timsort](http://en.wikipedia.org/wiki/Timsort)的内容，例如，使用“高效”算法将问题分解为较小的输入集，并在这些集上使用“更简单”且理论上“更高复杂度”的算法，因为它更快。

*   输入集的属性

    例如，如果输入大小很小，则效率不会在测试中通过；另外，例如再次排序，如果输入大部分是预先排序的而不是完全随机的，你会看到不同的结果。在这种类型的测试中应该使用许多不同的输入以获得准确的结果。仅使用一个示例是不够的，因为可以将输入设计为支持一种算法而不是另一种算法。

*   任一算法的具体实现

    例如，从算法的理论描述到实现还有很长的路要走；数据结构、递归、内存管理等使用不当会严重影响性能

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-14T09:16:18.623

虽然到目前为止所有答案似乎都是正确的……但在 CS 课程的背景下，没有一个人觉得真正“正确”。在计算复杂性课程中，您希望精确并使用定义。我将概述这个问题和一般计算复杂性的许多细微差别。最后，我们将总结为什么 Itay 的顶部解决方案可能是您应该编写的。我对 Itay 解决方案的主要问题是它缺少定义，而这些定义是为 CS 类编写良好证明的关键。请注意，我的定义可能与您的班级略有不同，因此请随意替换您想要的任何内容。

当我们说“一个算法是`O(n)`”时，我们实际上是指“这个算法在集合中`O(n)`”。并且该集合`O(n)`包含所有算法，其*最坏情况*渐近复杂度 `f(n)`具有`f(n) <= c*n + c_0`对于某个常数`c`和`c_0`where的属性`c, c_0 > 0`。

现在我们要证明你的主张。首先，*您陈述问题的方式*，它有一个简单的解决方案。那是因为我们的渐近界是“最坏情况”。对于许多“慢”算法，有*一些*输入运行得非常快。例如，如果输入已经排序，则插入排序是线性的！因此，使用插入排序 ( `O(n)`) 和合并排序 ( `O(nlog(n))`) 并注意如果传入排序数组，插入排序会运行得更快！砰，证明完成。

但是我假设您的考试更像是“说明为什么在最坏的情况下线性算法可能比二次算法运行得更快”。正如亚历克斯上面提到的，这是一个开放式问题。问题的症结在于运行时分析假设*某些操作是`O(1)`*（例如，对于某些问题，您可能会假设乘法`O(1)`即使对于大数而言它变得二次方慢（有人可能会争辩说，给定问题的数字是有界的） 100 位，所以它仍然是“恒定时间”））。由于您的课程可能专门关注计算复杂性，因此他们可能希望您忽略这个问题。所以我们将证明这个主张，假设我们的`O(1)`假设是正确的，因此没有像“缓存使这个算法比另一个更快”这样的细节。

所以现在我们有一个运行在`f(n)`which is中的`O(n)`算法和一些在 which is 中运行的其他`g(n)`算法`O(n^2)`。我们想使用上面的定义来表明对于某些`n`我们可以拥有`g(n) < f(n)`. 诀窍是我们的假设并没有固定`c, c_0, c', c_0'`. 正如 Itay 所提到的，我们可以为这些常数选择值，例如`g(n) < f(n)`对于 many `n`。其余的证明是他在上面写的（例如，让`c, c_0`是常数`f(n)`，说它们都是 100，而`c', c_0'`是常数`g(n)`，它们都是 1。然后`g(n) < f(n) => n + 1 < 100n^2 + 100 => 100n^2 - n + 99 > 0 => (factor to get actual bounds for n)`）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-14T08:29:48.150

这取决于不同的场景。有 3 种类型的场景 1.Best、2.Average、3.Worst。如果您知道排序技术，也会发生同样的事情。有关更多信息，请参阅以下链接：

[http://en.wikipedia.org/wiki/Sorting_algorithm](http://en.wikipedia.org/wiki/Sorting_algorithm)

如果我错了，请纠正我。

# iphone - 如何检测哪个 3rd sdk 使用 UDID？

> ID：15997031
> 
> 赞同：4
> 
> 时间：2013-04-14T08:13:11.617
> 
> 标签：iphone, ios, objective-c, appstore-approval, udid

我们使用了很多来自广告提供商的第三方 SDK，由于 Apple 将在 5 月 1 日之后不允许 UDID 访问，所以我想查看哪些 SDK 使用了 UDID 功能。有没有简单的方法或工具来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T08:59:34.127

一种简单而幼稚的方法是在库文件上运行`strings`和处理。`grep`IE

```
strings libSomething.a | grep uniqueIdentifier 
```

If you see any line that prints exactly `uniqueIdentifier` there is a risk they call it. This method is not 100% bullet proof. But I'd expect Apple doing a similar check in their automatic validation.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T01:33:35.167

您可以为 -[UIDevice uniqueIdentifier] 设置符号断点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T09:45:04.707

```
NSString *uuid = nil;
CFUUIDRef theUUID = CFUUIDCreate(kCFAllocatorDefault);
if (theUUID) {
  uuid = NSMakeCollectable(CFUUIDCreateString(kCFAllocatorDefault, theUUID));
  [uuid autorelease];
 CFRelease(theUUID);
} 
```

尝试这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-03T16:48:24.393

你为什么不试试secureudid (secureudid.org)？

# php - 如何提供 Facebook Meta 标签以链接到文件？

> ID：15997035
> 
> 赞同：0
> 
> 时间：2013-04-14T08:13:52.517
> 
> 标签：php, facebook, codeigniter

我的网站上有以下文件的网址：

```
http://www.foo.com/download/1 
```

[这将使用下载帮助](http://ellislab.com/codeigniter/user-guide/helpers/download_helper.html)程序使用 force_download 函数下载文件。

我被要求为这些文件提供类似按钮，这些文件显示在站点页面之一的 html 表格中。

因此，使用[facebook 之类的按钮工具](https://developers.facebook.com/docs/reference/plugins/like/)，我创建了以下按钮：

```
<div class="fb-like" data-href="http://www.foo.com/download/1" data-send="false" data-width="450" data-show-faces="false"></div> 
```

但是，因为这是到文件的直接链接，所以没有收到正确的打开图形元数据，例如描述是：“%PDF-1.3 %�ãÏÓ 1041 0 obj..”

所以**我的问题**是如何为我的下载链接提供开放图元数据？例如：

```
 <meta property="og:type"            content="website" /> 
  <meta property="og:url"             content="http://foo.com/download/1" /> 
  <meta property="og:title"           content="Download 1" /> 
  <meta property="og:image"           content="bar.png" /> 
  <meta property="og:description"     content="File description" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:18:40.767

对于您下载文件本身的网址，您不能，因为它（可能）不是 html 页面，即使是，您也不希望使用自己的元数据更改文件的内容。

您可以尝试对下载文件的客户端和 facebook 爬虫所使用的 URL 使用某种重定向，当然您也需要一个 url 来进行真正的下载。

在您为喜欢和用户发送的视图中：

```
<!-- meta tags -->
<meta property="og:type" content="website" />
<meta property="og:url" content="http://foo.com/download/1" /> 
<!-- .... -->
<body>
    <script>
    // imaginary real download url url
    window.location = '<?php site_url('download/real_download/'.$download_id);?>';
    </script>
</body> 
```

Facebook 似乎也不理解刷新元标记，因此您可以编写并避免使用 javascript：

```
<meta http-equiv="refresh" content="1;URL='<?php site_url('...')?>'"> 
```

*免责声明：*我没有从 facebook 找到任何描述他们的爬虫理解的文档，因此不能保证其中任何一个都将继续工作。我自己在类似的情况下使用 javascript 解决方案已经有一年了。

# c# - 加载多个 DLL 实例 (C#/.NET)

> ID：15997037
> 
> 赞同：2
> 
> 时间：2013-04-14T08:13:59.500
> 
> 标签：c#, .net, dll

我正在开发 C#/.NET 3.5 应用程序。我正在使用用 C 编写的旧版 dll，signals.dll。我使用 P/Invoke 从 .NET 包装器中调用它。我正在调用 2 种类型的处理函数，类型 A 和 B。当我只调用一种类型的处理时，一切正常。当我交错调用 A 和 B 处理时，数据结果已损坏。我相信 dll、signals.dll 正在使用 C 风格的全局变量，并且数据被破坏了。

为了解决这个问题，我在磁盘上创建了 2 个 dll 副本，signals.dll 和 signals2.dll。然后我使用 P/Invoke 修改了 .NET 包装器，将 A 类处理定向到一个 dll，将 B 类处理定向到另一个实例。现在，一切正常。

然后我在论坛和那里的解决方案上看到了类似的问题。（[支持具有全局数据的插件 DLL 的多个实例](https://stackoverflow.com/questions/4645558/supporting-multiple-instances-of-a-plugin-dll-with-global-data)）。基本上，该提议的解决方案是从代码动态放置，在磁盘上创建一个新的 .dll 实例（根据需要），然后加载它并从中调用函数。代码的关键部分如下所示：

```
private IntPtr dllHandle;
string myDllPath = Path.Combine(dllDir, String.Format("mylib-{0}.dll", GetHashCode()));
        File.Copy(origDllPath, myDllPath);
        dllPath = myDllPath;
        dllHandle = LoadLibrary(dllPath);
        _getVersion = GetProcEntryDelegate<_getVersionDelegate>(dllHandle, "GetVersion");

    private delegate int _getVersionDelegate();
    private readonly _getVersionDelegate _getVersion;

public int GetVersion()
    {
        return _getVersion();
    }

private static D GetProcEntryDelegate<D>(IntPtr hModule, string name)
        where D: class
    {
        IntPtr addr = _getProcAddress(hModule, name);
        if (addr == IntPtr.Zero)
            throw new Win32Exception();
        return Marshal.GetDelegateForFunctionPointer(addr, typeof(D)) as D;
    } 
```

我想到的是，是否可以修改上面的代码以在内存中创建 dll 的副本，而不是在磁盘上并从那里加载它。我认为只是需要欺骗 IntPtr dllHandle 从内存中获取价值，而不是从 LoadLibrary 中获取价值。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:29:10.067

[LoadLibrary](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx)和[LoadLibraryEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684179%28v=vs.85%29.aspx)都需要文件路径。您将需要一个自定义加载过程，包括内存映射等。我找到了[一篇](http://www.joachim-bauch.de/tutorials/loading-a-dll-from-memory/)描述该过程的博文（“从内存中加载 DLL”）和一个匹配的 GitHub 项目；[内存模块](https://github.com/fancycode/MemoryModule)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T11:41:04.223

什么都没有`just`:) - 它要复杂得多，涉及

这是一个可能有帮助的链接 -[从内存中加载库/模块](https://stackoverflow.com/questions/14158846/load-library-module-from-memory)

正如@Hans Passant 所说，我不鼓励你这样做——即使它在某些情况下可能是一个诱人的解决方案（但我不认为你真的需要这样，也许很好）。

它涉及处理可[移植的可执行格式](http://en.wikipedia.org/wiki/Portable_Executable#.NET.2C_metadata.2C_and_the_PE_format)——我怀疑该项目是否涵盖了所有需要完成的工作。

您可以尝试制作您的 C++/CLI 包装器 - 或导出`MemoryLoadLibrary`并尝试 P/Invoking - 但我怀疑这会很容易。

# ruby-on-rails - 每次用户重新登录时如何更新表属性？（rails 3 + omniauth）

> ID：15997038
> 
> 赞同：0
> 
> 时间：2013-04-14T08:14:04.690
> 
> 标签：ruby-on-rails, omniauth

我的用户表中有一个名为“图像”的列

此图像存储从用户的 Twitter 帐户中提取的头像的 URL。

用户表的一部分

```
create_table "users", :force => true do |t|
    t.string    "image"
  end 
```

我正在使用omniauth 来允许用户使用twitter、取消身份验证、重新身份验证等进行身份验证。

在他们取消身份验证并尝试重新进行身份验证之后，我想验证头像在我的网站上是否匹配。这是我正在使用的代码：

```
class AuthenticationsController < InheritedResources::Base
 def create
  omniauth = request.env['omniauth.auth']
  authentication = Authentication.find_by_provider_and_uid(omniauth['provider'], omniauth['uid'])
  if authentication
     user = User.find(authentication.user_id)
     sign_in_and_redirect user
  else current_user
   token = omniauth['credentials']['token']
   secret = omniauth['credentials']['secret']
   current_user.authentications.create!(:provider => omniauth['provider'], :uid => omniauth['uid'], :token => token, :secret => secret)
   current_user.update_attribute(:image => omniauth['info']['image'])
   flash[:success] = "Authentication successful"
   sign_in_and_redirect current_user
  end
 end 
```

当他们尝试重新验证时，基本上就是这条线

```
current_user.update_attribute(:image => omniauth['info']['image']) 
```

但是我遇到了错误。上面这个特定的代码给了我`wrong number of arguments (1 for 2)`。我尝试了其他方法，但我得到了`undefined method update_attribute`。任何人都知道如何使用来自 twitter + omniauth 的数据更新用户表中的“图像”列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T08:19:31.503

查看 的语法[`update_attribute`](http://apidock.com/rails/ActiveResource/Base/update_attribute)，它有 2 个参数`name`和`value`

```
current_user.update_attribute(:image, omniauth['info']['image']) 
```

此外，我很确定 twitter 中的头像 url 永远不会改变：它总是显示用户当前的头像。所以你不需要在你的数据库中更新它，直接在你的页面中使用它就可以得到最新的用户头像。

# c# - 按前文颜色对 dataGridView 列进行排序

> ID：15997045
> 
> 赞同：0
> 
> 时间：2013-04-14T08:15:10.267
> 
> 标签：c#, sorting, datagridview

我有一个带有数据的datagridview，数据行被着色（仅文本着色）如下：红色，橙色和黑色例如：

```
private void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
  switch (e.Value.ToString())
            {
                case "SDP":
                    e.Value = "Schedule Departure";
                    this.dataGridView1.Rows[e.RowIndex].DefaultCellStyle.ForeColor = Color.Red;
                    break;
                case "CKN":
                    e.Value = "Check-In";
                    this.dataGridView1.Rows[e.RowIndex].DefaultCellStyle.ForeColor = Color.Orange;
                    break;
                case "P2G":
                    e.Value = "Proceed to Gate";
                    this.dataGridView1.Rows[e.RowIndex].DefaultCellStyle.ForeColor = Color.Black;
                    break;
} 
```

我还创建了带有几个单选按钮的 Groupbox 来更改排序

```
 private void radioButton1_CheckedChanged(object sender, EventArgs e)
    {
        ListSortDirection direction;
        direction = ListSortDirection.Ascending;
        dataGridView1.Sort(arrTimeDataGridViewTextBoxColumn,direction);
    } 
```

但问题是：如何根据文本的颜色更改排序，例如：RED, ORANGE then Black？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:43:34.663

在您的列中创建一个`datagridview`可以保留多个`ForeColor`. 例如 ：

列将被命名为`dataGridView_ForeColorNum`，值将如下所示：

```
RED = 1
ORANGE = 2
BLACK = 3 
```

然后在处理程序中`dataGridView1_CellFormatting`设置此值同时更改`ForeColor`行的 a

```
cswitch (e.Value.ToString())
{
    case "SDP":
        e.Value = "Schedule Departure";
        this.dataGridView1.Rows[e.RowIndex].DefaultCellStyle.ForeColor = Color.Red;
        this.dataGridView1.Rows[e.RowIndex].Cells[dataGridView_ForeColorNum.Name].Value = 1;     
        break;
    case "SKN":
        e.Value = "Check-In";
        this.dataGridView1.Rows[e.RowIndex].DefaultCellStyle.ForeColor = Color.Orange;
        this.dataGridView1.Rows[e.RowIndex].Cells[dataGridView_ForeColorNum.Name].Value = 2;
        break;
    case "P2G":
        e.Value = "Proceed to gate";
        this.dataGridView1.Rows[e.RowIndex].DefaultCellStyle.ForeColor = Color.Black;
        this.dataGridView1.Rows[e.RowIndex].Cells[dataGridView_ForeColorNum.Name].Value = 3;            break;

} 
```

排序将照常进行，但用于对具有给 ForeColor 的编号的新列进行排序：

```
 private void radioButton1_CheckedChanged(object sender, EventArgs e)
 {
     ListSortDirection direction;
     direction = ListSortDirection.Ascending;
     dataGridView1.Sort(dataGridView_ForeColorNum,direction);
 } 
```

对于数据绑定 DataGridView，以前的解决方案将不起作用，因为预定义列的属性`IsDataBound`= False。[MSDN：datagridview.Sort](http://msdn.microsoft.com/en-us/library/vstudio/0868ft3z%28v=vs.90%29.aspx)

**在这种情况下，我想到的第一个解决方法是：**

在您的 SQL 查询中再添加一列，您将在其中`ForeColor`使用`CASE WHEN`语句设置数字：

```
CASE yourValueColumn
WHEN 'SDP' THEN 1
WHEN 'SKN' THEN 2
WHEN 'P2G' THEN 3
ELSE 0 END AS ForeColor 
```

在 datagridview 的预定义列`dataGridView_ForeColorNum`集属性`DataProperty = "ForeColor"`和`datagridview_CellFormatting`处理程序将如下：

```
{
    if(this.datagridview1.Columns[e.ColumnIndex].Name != this.dataGridView_ForeColorNum.Name)
        return;
    //if column is ForeColumn then set a ForeColor independent on the column value
    switch ((int)e.Value)
    {
        case 1: //SDP
            e.Value = "Schedule Departure";
            this.dataGridView1.Rows[e.RowIndex].DefaultCellStyle.ForeColor = Color.Red;     
            break;
        case 2: //SKN
            e.Value = "Check-In";
            this.dataGridView1.Rows[e.RowIndex].DefaultCellStyle.ForeColor = Color.Orange;
            break;
        case 3: //P2G
            e.Value = "Proceed to gate";
            this.dataGridView1.Rows[e.RowIndex].DefaultCellStyle.ForeColor = Color.Black;
            break;
    }
} 
```

# php - javascript从数据库onchange文本字段值中获取值

> ID：15997048
> 
> 赞同：0
> 
> 时间：2013-04-14T08:15:23.100
> 
> 标签：php, javascript, database

好吧，我是新来的，也是网络基础编程的新手。我有一个商店的数据库，现在我正在为此创建一个网站。在该数据库中有一个表 call stock，其中每个产品都有一个 ID、颜色、代码和尺寸。该颜色代码和尺寸用作复合键。并且也有价格。

现在在我的网站中，我创建了一个页面“salse.php”，通过选择选项下拉菜单输入代码、颜色、大小

`<label for="code">Code</label> <select name="code" size="1" id="code"> <option selected="selected">Choose One</option> <option>L</option> <option>G</option> <option>S</option> <option>B</option> </select>` 像那样。[1] 现在我希望当用户填写这 3 个字段代码、颜色和大小时，我的 java 脚本将自动从数据库中查找销售价格，并放入价格字段。

[2] 之后，当用户填写该数量标签时，通过将数量字段值乘以价格字段值并在总字段内打印来自动生成总价。

我试过了，这是我的代码

```
<this script will use to get price value -->
 <script type="text/javascript">
function price(str)
    {
    if (str =="")
    {
        price =document.getElementById('salse');
        price.value = Number (0);
        return;
    }
    if(window.XMLHttpRequest)
    {
        xmlhttp = new XMLHttpRequest();
    }
    xmlhttp.onreadystatechange= function()
    {
        if (xmlhttp.readyState ==4 && xmlhttp.status ==200)
        {
            price =document.getElementById('salse');
            price.value = Number(xmlhttp.responseBody);
                    }
    }
    xmlhttp.open("GET","price.php?q="+str,true);
    xmlhttp.send();
  }
  </script> 
```

并且该字段是`<?php Echo " <label for='size'>Size</label> <select name='size' size='1' id='size' **onchange= 'price(this.value)**'> <option selected='selected'>Choose Size</option>"; $size = 0; while($size <= 50) { Echo"<option>";echo $size; Echo"</option>"; $size++; } Echo"</select>";` 和内部 price.php 这段代码就像`

```
 while($row = mysql_fetch_array($result))
  {
     echo $row['salse_price'] ;

  }` 
```

但是输出是“未定义”..请帮助解决这个问题，我可以打印一个字符串，但我如何可能更改字段的值。

```
`<this script will use when to get total value -->

    <label for="quantity">Q'ty</label>
    <input type="text" name="quantity" id="quantity" value="" /> <br> 
    <label for="salse">Salse Price:</label>
    <input type="text" name="salse" id="salse" size="20" value=""/>&nbsp;<br>
    <label for ="total">Total</label>
    <input type="text" name="total" id="total" size="20" value =""/><br>
    <script type="text/javascript">
        var x    = document.getElementById('quantity'),
        y    = document.getElementById('salse'),
        total = document.getElementById('total');

        function calculate_total(){
         // Use your real calculation here
        total.value = Number(x.value) * Number(y.value) ;
        }

     if( window.addEventListener ) {
       x.addEventListener('change', calculate_total, false);
       y.addEventListener('change', calculate_total, false);
     } else if(window.attachEvent){
        x.attachEvent('onchange', calculate_total);
        y.attachEvent('onchange', calculate_total);
      }
    </script> ` 
```

现在可以通过用户输入数量和价格来填充总标签值.. 但无法检查 3 字段值是否已填充，也无法从数据库中打印价格值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T08:26:16.713

您需要一种在服务器端工作的语言/系统，它可以提取数据并生成您将发送给客户端的 HTML，例如您标记的 PHP。

[该网站](http://www.w3schools.com/website/web_php_database.asp)是任何网络的良好起点。

# websphere - 在 Websphere 6.1 上运行 Metro (JAX-WS) 的步骤

> ID：15997059
> 
> 赞同：1
> 
> 时间：2013-04-14T08:16:40.463
> 
> 标签：websphere, jax-ws, websphere-6.1

任何人都知道在 Websphere 6.1 上运行 JAX-WS 的步骤吗？JAX-WS 网站没有列出任何步骤。尽管 Apache cxf 等其他框架确实列出了在 Websphere 6.1 上配置的步骤

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:47:09.173

理想的方法是使用免费的、受支持的[WebSphere Feature Pack for Web Services](http://www-01.ibm.com/support/docview.wss?uid=swg21264563)。尽管令人遗憾的是，这需要您在 WebSphere 中创建一个新的概要文件。但它提供了集成的、受支持的 JAX-WS 功能，而无需额外的库。

您是在询问使用特定的 JAX-WS 实现吗？喜欢参考实现？如果是这样，您是否有特殊原因需要使用那个？

# mysql - 计算具有不同值的行

> ID：15997060
> 
> 赞同：0
> 
> 时间：2013-04-14T08:16:41.247
> 
> 标签：mysql, rows

我在 mysql 中有一个表，我想要这个输出：

```
HNSHAK  MOBILE COMPUTING =13
HNSHAK  STORAGE           =2 
```

每次我执行时，产品组都会改变。

桌子：

```
Productgroup    Created By
MOBILE COMPUTING    HNSHAK
MOBILE COMPUTING    HNSHAK
MOBILE COMPUTING    HNSHAK
MOBILE COMPUTING    HNSHAK
STORAGE             HNSHAK
MOBILE COMPUTING    HNSHAK
STORAGE             HNSHAK
MOBILE COMPUTING    HNSHAK
MOBILE COMPUTING    HNSHAK
MOBILE COMPUTING    HNSHAK
MOBILE COMPUTING    HNSHAK
MOBILE COMPUTING    HNSHAK
MOBILE COMPUTING    HNSHAK
MOBILE COMPUTING    HNSHAK
MOBILE COMPUTING    HNSHAK 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:18:22.957

您的查询应该是这样的：

```
SELECT `Created By`, ProductGroup, COUNT(*) `Count`
FROM tablename
GROUP BY `Created By`, ProductGroup; 
```

使用 a`GROUP BY Created_By, ProductGroup`和聚合函数`COUNT`。

这会给你：

```
Created By  ProductGroup           Count
HNSHAK      MOBILE COMPUTING        13
HNSHAK      STORAGE                 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T08:19:55.877

```
SELECT `Created_By`, `Productgroup`, COUNT(`Productgroup`)
FROM `table_name`
GROUP BY `Productgroup` 
```

你应该`GROUP BY`在这里使用。您还应该记住，如果其中的所有值`Created By`都不相同（例如其中一个是`COMPANY1`），那么您要么要忽略并选择出现在表中的`Productgroup`第一个值，要么您将拥有多行`Productgroup`每个 _manufacturer 的 Productgroup。要实现后者，您将使用`GROUP BY`这种方式

```
GROUP BY `Created_By`, `Productgroup` 
```

# triggers - onedit 触发器：browser.msgbox 停止执行

> ID：15997065
> 
> 赞同：0
> 
> 时间：2013-04-14T08:17:27.477
> 
> 标签：triggers, google-apps-script

我需要澄清我遇到的问题。

当使用由 onEdit 触发器触发的函数时，脚本似乎在 Browser.msgBox() 命令的第一个实例之后立即停止执行。

使用简单的代码：

```
function notifyStatus(event)     
    {
      try {

       Browser.msgBox("Message 1!") ;
       Browser.msgBox("Message 2!") ;

      } catch (e) {
        MailApp.sendEmail("myaddress@mydomain", "Bug" , e.message);
      }
    } 
```

将弹出“消息 1！” 正如预期的那样。但是“消息2！” 永远不会出现，我也没有收到任何有关错误的电子邮件通知...

在编辑器中运行它的行为符合预期。

我错过了什么？

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:15:33.297

onEdit 触发器是一个简单触发器（与可安装触发器不同）。onEdit 触发器可以操作电子表格相关的对象。它不能发送电子邮件。

有关详细信息，您可以查看以下两个参考链接。

*   [https://developers.google.com/apps-script/understanding_triggers](https://developers.google.com/apps-script/understanding_triggers)
*   [https://developers.google.com/apps-script/understanding_events](https://developers.google.com/apps-script/understanding_events)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-14T18:00:36.230

如果我的脚本中有这个简单的触发功能-

```
function onEdit(e) {
  notifyStatus(e);
} 
```

然后我看到两个消息框。但是，如果我在 notifyStatus 中抛出错误，我不会收到电子邮件。

但是，如果我删除 Simple 触发器功能并为 notifyStatus 创建一个可安装的 onEdit 触发器；我看到了两个消息框并收到了一封电子邮件。如果我手动运行脚本也是如此。

如果您使用可安装的触发器，则电子邮件似乎是使用触发器创建者的身份发送的。使用简单触发器时似乎并非如此。

# python - python和c中的内存分配

> ID：15997078
> 
> 赞同：1
> 
> 时间：2013-04-14T08:18:54.347
> 
> 标签：python, c

我正在查看 SO 中的一个问题，并查看了该问题。

[为什么 id 函数的行为与整数和浮点数不同？](https://stackoverflow.com/questions/15996984/why-id-function-behaves-differently-with-integer-and-float)

我在 python 中尝试过为 a&b 获取相同的 id。但是当我在c上尝试相同的时候，

```
main()
{
    int a=4,b;
    b=2+2;
    printf("%p\n",&a);
    printf("%p",&b);
} 
```

但这打印了不同的值。为什么有区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T08:31:10.667

等效的 Python 代码之所以起作用，是因为在您链接的问题的几个答案中给出的原因 - Python（或至少是 CPython）碰巧缓存了一些小整数值 - 其中 4 是其中之一，因此每个 Python 整数对象等于 4将是同一个对象，因此具有相同的`id`.

在 C 中，整数是可变的，所以编译器不能执行这种优化——如果你 increment `a`，你不会期望`b`改变`id``a``b`

在实现层面，`int`对 C 的意义与对 Python 的意义不同——即使它们碰巧在程序中服务于相同的目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T08:34:36.930

Python 缓存了一些小整数。来自 python 文档[http://docs.python.org/2/c-api/int.html](http://docs.python.org/2/c-api/int.html)

> 当前的实现为 -5 到 256 之间的所有整数保留一个整数对象数组，当您在该范围内创建一个 int 时，您实际上只是取回了对现有对象的引用。所以应该可以改变 1 的值。我怀疑 Python 在这种情况下的行为是未定义的。:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T08:35:23.913

在 C 中，两个变量总是有不同的地址，

唯一的例外是当你使用联合时，

考虑下面给出的代码，

```
union x
{
 int a;
 int b;

}y;

main()
{
    y.a=4;
    y.b=2+2;
    printf("%p\n",&y.a);
    printf("%p",&y.b);
} 
```

这里两者都`y.a`将`y.b`指向同一个地址。

# android - 通过eclipse重新安装apk文件后，getlastknownlocation总是返回null

> ID：15997079
> 
> 赞同：25
> 
> 时间：2013-04-14T08:18:58.060
> 
> 标签：android, gps, location

最近，我创建了一个简单的应用程序来获取 gps 位置并在 android 手机上显示。一开始我可以在几次尝试后获得位置，但是在我重新安装 apk 文件后，getLastKnownLocation() 总是返回一个空值。

使用的开发环境： - API 10 姜饼 2.3.6 - 使用 GPS 提供程序

下面是我在我的android项目中应用的代码：

```
 public class MyActivity extends MapActivity{
protected void onCreate(Bundle savedInstanceState) {

    mapView = (MapView)findViewById(R.id.myTripMap);
    mapController = mapView.getController();
    mapView.setSatellite(false);
    mapView.setStreetView(true);
    mapView.displayZoomControls(false);
    mapView.setBuiltInZoomControls(true);//
    mapView.setClickable(true);
    mapController.setZoom(14);      

    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    criteria.setAltitudeRequired(false);
    criteria.setBearingRequired(false);
    criteria.setCostAllowed(true);
    criteria.setPowerRequirement(Criteria.POWER_LOW);
    provider = locationManager.getBestProvider(criteria, true);
    location = locationManager.getLastKnownLocation(provider);

    updateMyCurrentLoc(location);

    locationManager.requestLocationUpdates(provider, 2, 1,locationListener);

}

          private final LocationListener locationListener = new LocationListener() {
        public void onLocationChanged(Location location) {
          updateMyCurrentLoc(location);
        }

        public void onProviderDisabled(String provider){
          updateMyCurrentLoc(null);
        }

        public void onProviderEnabled(String provider){ }
        public void onStatusChanged(String provider, int status, 
                                    Bundle extras){ }
      };

      private void updateMyCurrentLoc(Location location) {

            if (location != null) {

             // other codes to get the address and display
            Toast.makeText(getBaseContext(), "provider used : "+provider).show();   //testing purpose
            } 
            else {
              str = "No location found";
              Toast.makeText(getBaseContext(), str, Toast.LENGTH_SHORT).show();
            }

        }
    } 
```

谁能提出一个可能的解决方案来解决 getLastKnownLocation() 返回的空值？任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-14T08:52:22.363

这`getLastKnownLocation()`将返回最后一个已知位置...在您重新安装应用程序后，它不会有任何最后一个已知位置...所以它会导致 NPE...而不是使用下面的代码

```
public Location getLocation() {
    try {
        locationManager = (LocationManager) mContext
                .getSystemService(LOCATION_SERVICE);

        // getting GPS status
        isGPSEnabled = locationManager
                .isProviderEnabled(LocationManager.GPS_PROVIDER);

        // getting network status
        isNetworkEnabled = locationManager
                .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        if (!isGPSEnabled && !isNetworkEnabled) {
            // no network provider is enabled
        } else {
            this.canGetLocation = true;
            if (isNetworkEnabled) {
                locationManager.requestLocationUpdates(
                        LocationManager.NETWORK_PROVIDER,
                        MIN_TIME_BW_UPDATES,
                        MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                Log.d("Network", "Network Enabled");
                if (locationManager != null) {
                    location = locationManager
                            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                    if (location != null) {
                        latitude = location.getLatitude();
                        longitude = location.getLongitude();
                    }
                }
            }
            // if GPS Enabled get lat/long using GPS Services
            if (isGPSEnabled) {
                if (location == null) {
                    locationManager.requestLocationUpdates(
                            LocationManager.GPS_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("GPS", "GPS Enabled");
                    if (locationManager != null) {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
            }
        }

    } catch (Exception e) {
        e.printStackTrace();
    }

    return location;
} 
```

它对我有用……也应该对你有用……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-28T14:59:30.277

这个解决方案是我对@Karan Mer 代码的一点改进。

```
 public Location getLocation() {
    int MIN_TIME_BW_UPDATES = 10000;
    int MIN_DISTANCE_CHANGE_FOR_UPDATES = 10000;
    try {
        locationManager = (LocationManager) getApplicationContext()
                .getSystemService(LOCATION_SERVICE);

        boolean isGPSEnabled = locationManager
                .isProviderEnabled(LocationManager.GPS_PROVIDER);

        boolean isPassiveEnabled = locationManager
                .isProviderEnabled(LocationManager.PASSIVE_PROVIDER);

        boolean isNetworkEnabled = locationManager
                .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        if (isGPSEnabled || isNetworkEnabled || isPassiveEnabled) {

            this.canGetLocation = true;
            // if GPS Enabled get lat/long using GPS Services
            if (isGPSEnabled && location == null) {
                    locationManager.requestLocationUpdates(
                            LocationManager.GPS_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("GPS", "GPS Enabled");
                    if (locationManager != null) {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                    }
            }
            if (isPassiveEnabled && location == null) {
                locationManager.requestLocationUpdates(
                        LocationManager.PASSIVE_PROVIDER,
                        MIN_TIME_BW_UPDATES,
                        MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                Log.d("Network", "Network Enabled");
                if (locationManager != null) {
                    location = locationManager
                            .getLastKnownLocation(LocationManager.PASSIVE_PROVIDER);
                }
            }

            if (isNetworkEnabled && location == null) {
                locationManager.requestLocationUpdates(
                        LocationManager.NETWORK_PROVIDER,
                        MIN_TIME_BW_UPDATES,
                        MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                Log.d("Network", "Network Enabled");
                if (locationManager != null) {
                    location = locationManager
                            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                }
            }

        }else{
            return null;
        }

    } catch (Exception e) {
        e.printStackTrace();
    } 
```

享受

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-06T15:13:27.523

您只需要在代码中再添加一行

```
if (locationManager != null) {
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
    location = locationManager
            .getLastKnownLocation(LocationManager.GPS_PROVIDER);

    if (location != null) {
        latitude = location.getLatitude();
        longitude = location.getLongitude();

    } else {
        Toast.makeText(
                mContext,
                "Location Null", Toast.LENGTH_SHORT).show();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-01T05:09:29.397

尝试以下代码

```
LocationManager locationManager = (LocationManager) getActivity()
            .getSystemService(Context.LOCATION_SERVICE);

    String locationProvider = LocationManager.NETWORK_PROVIDER;
    Location lastlocation = locationManager.getLastKnownLocation(locationProvider);

    String CurLat = String.valueOf(lastlocation.getLatitude());
    String Curlongi= String.valueOf(lastlocation.getLongitude()); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-10-07T12:51:01.593

通过eclipse重新安装后我遇到了同样的问题。我解决了转到Android设置/安全/应用程序权限并确认应用程序的位置权限。

# c# - 使用内存流从 azure blob 存储中检索 msi 包会导致文件无效

> ID：15997083
> 
> 赞同：0
> 
> 时间：2013-04-14T08:19:09.507
> 
> 标签：c#, azure-blob-storage, memorystream

我有一个使用文件流返回 msi 包的方法。

```
public FileStream DownloadMsiFileStream()
{
    FileStream fs = new FileStream(@"C:\temp\test.msi", FileMode.Create,    System.IO.FileAccess.ReadWrite);

        // Retrieve reference to a previously created container.
        CloudBlobContainer container = blobClient.GetContainerReference("deviceupdate");

        // Retrieve reference to a blob named "KC.AttendanceManager.PrintServiceInstaller.msi".
        CloudBlockBlob blockBlob = container.GetBlockBlobReference("test.msi");

        //Retrive the memorystream
        blockBlob.DownloadToStream(fs);

        return fs;
   } 
```

这非常完美，我可以使用 web api 方法下载文件流，将流写入文件并最终得到一个工作的 msi 包。

但是现在我想避免将文件写入服务器端的磁盘，因为它会导致并发问题。相反，我尝试将文件流更改为 Memorystream，如下所示：

```
 public MemoryStream DownloadMsi()
        {

            // Retrieve reference to a previously created container.
            CloudBlobContainer container = blobClient.GetContainerReference("deviceupdate");

            // Retrieve reference to a blob named "KC.AttendanceManager.PrintServiceInstaller.msi".
            CloudBlockBlob blockBlob = container.GetBlockBlobReference("test.msi");

            MemoryStream ms = new MemoryStream();
            //Retrive the memorystream
            blockBlob.DownloadToStream(ms);

            return ms;
        } 
```

但是当我稍后尝试将流写入文件时（只是服务器端让它工作），如下所示：

```
MemoryStream ms = DeviceUpdateManager.GetClientUpdateMsi();
FileStream file = new FileStream(@"C:\temp\test2.msi", FileMode.OpenOrCreate);
                byte[] bytes = new byte[file.Length];
                file.Read(bytes, 0, (int)file.Length);
                ms.Write(bytes, 0, (int)file.Length);
                file.Close();
                ms.Close(); 
```

结果是无效（空）msi 文件。内存流不为空，因为`System.Text.Encoding.UTF8.GetString(ms.ToArray())`返回一堆。我如何最终得到一个工作的 msi？任何帮助appriciated。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:37:39.940

通常，解决方案太简单了。这就是我检索工作 msi 包所需的全部内容：

```
File.WriteAllBytes(@"C:\temp\test2.msi", ms.ToArray()); 
```

# mysql - mySQL中的交叉表视图？

> ID：15997090
> 
> 赞同：2
> 
> 时间：2013-04-14T08:20:15.980
> 
> 标签：mysql, sql, view

我不知道我的标题是正确的，但让我解释一下我在寻找什么。

我有两张桌子。

# **客户**

```
clID   (primary key)
ClName (varchar) 
```

# **分数**

```
ID     (Primay key)
clID   (F Key)
PlayDate  (Date/Time)
Score     (double) 
```

* * *

客户表数据如下所示

```
clID  clName
1     Chris
2     Gale
3     Donna 
```

分数表数据如下所示

```
ID  clID  PlayDate    Score
1   2     23/01/2012  -0.0125
2   2     24/01/2012  0.1011
3   3     24/01/2012  0.0002
4   3     26/01/2012  -0.0056
5   3     27/01/2012  0.0001
6   1     12/01/2012  0.0122
7   1     13/01/2012  0.0053 
```

* * *

是否可以创建一个看起来像这样的视图

```
Date         Chris   Gale    Donna
12/01/2012   0.0122   -        -
13/01/2012   0.0053   -        -
23/01/2012     -     -0.0125   -
24/01/2012     -     0.1011  0.0002
26/01/2012     -        -    -0.0056
27/01/2012     -        -    0.0001 
```

如果以后有另一个新客户端，那么我应该能够在现在将在此视图中创建的新列中检查该新客户端的数据。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T15:41:05.420

这种类型的数据转换称为 PIVOT。MySQL 没有数据透视函数，但您可以使用带有`CASE`表达式的聚合函数来获取结果。

如果`clients`提前知道名称，那么您可以对查询进行硬编码：

```
select s.playdate,
  sum(case when clname = 'Chris' then score end) Chris,
  sum(case when clname = 'Gale' then score end) Gale,
  sum(case when clname = 'Donna' then score end) Donna
from clients c
inner join scores s
  on c.clid = s.clid
group by s.playdate; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!9/ca16b/1)。

如果您有未知数量的客户端，或者您将添加您希望包含的新客户端而无需更改代码，那么您可以使用准备好的语句来生成动态 SQL：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(CASE WHEN clName = ''',
      clName,
      ''' THEN score else ''-'' END) AS `',
      clName, '`'
    )
  ) INTO @sql
FROM clients;

SET @sql 
  = CONCAT('SELECT s.playdate, ', @sql, ' 
            from clients c
            inner join scores s
              on c.clid = s.clid
            group by s.playdate');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!9/ca16b/3)。两个查询都会给出相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-26T06:33:04.530

对于每小时登录的快速“交叉表”概述，我使用：

```
SELECT _d
, GROUP_CONCAT(LPAD(_cnt,4," ") ORDER BY _h SEPARATOR " ") AS `. 00   01   02   03   04   05   06   07   08   09   10   11   12   13   14   15   16   17   18   19   20   21   22   23` 
FROM (
  SELECT FROM_UNIXTIME(last_access_epoch,"%Y-%m-%d") AS _d
  , FROM_UNIXTIME(last_access_epoch,"%H") AS _h
  , COUNT(*) AS _cnt 
  FROM login_log 
  WHERE last_access_epoch < 3600*(@@timestamp DIV 3600) /* before current hour */
  GROUP BY _d, _h
) AS t 
GROUP BY _d
HAVING MIN(_h)="00"  /* only full days */
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-02T14:29:43.407

如果上面的 GROUP_CONCAT 示例有大量数据，则可能需要更改 group_concat_max_len 以避免由于截断而导致语法错误。

```
SET SESSION group_concat_max_len=4096; 
```

请参阅：[MySQL 中 GROUP_CONCAT 和 Longtext 的问题](https://stackoverflow.com/questions/529105/trouble-with-group-concat-and-longtext-in-mysql)

# html - CSS混乱 - 图片下方的文字

> ID：15997093
> 
> 赞同：3
> 
> 时间：2013-04-14T08:20:58.793
> 
> 标签：html, css, image

无论我尝试什么，它都无法正常工作。

基本上我有一个图像列表，这些图像填​​满了我的整个 div 的宽度和高度。现在我只想在每个图像下方添加一些标题。我尝试的一切要么使图像全部垂直排列在一条线上，等等。

非常感谢我能得到的任何帮助！

```
<div id="index-gallery" style="float:left; padding:5px; margin:10px 0 0 0;">
     <? $ires3 = mysql_query("select `id`,`mp4`,`cover` from `d2pxhd`.`videos` WHERE `duration`>'0' AND `active`='1' AND `suspended`='0' AND `add_date`<now() ORDER BY `add_date` DESC limit 24",$db);
         while ($img3 = mysql_fetch_assoc($ires3)) {  ?>     
          <a href="/?play=<?=base64_encode(preg_replace('/\s+/', '', $img3['id']));?>&start=1">
          <img style="margin:20px 2px;" width="118" height="100" border="0" src="<?=$img3['cover']."002.jpg";?>"></a>

   SUBTITLE HERE!!!

        <? } ?>
  </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T08:29:23.173

尝试这个...

**HTML/PHP**

```
<div id="index-gallery">
  <?php $ires3 = mysql_query("select `id`,`mp4`,`cover` from `d2pxhd`.`videos` WHERE `duration`>'0' AND `active`='1' AND `suspended`='0' AND `add_date`<now() ORDER BY `add_date` DESC limit 24",$db);
    while ($img3 = mysql_fetch_assoc($ires3)) : ?>

      <div class="img-box">
        <a href="/?play=<?=base64_encode(preg_replace('/\s+/', '', $img3['id']));?>&start=1">
          <img style="margin:20px 2px;" width="118" height="100" border="0" src="<?=$img3['cover']."002.jpg";?>">
        </a>
        <p>SUBTITLE HERE!!!</p>
      </div>

    <?php endwhile; ?>

  <div class="clear-both"></div>

</div> 
```

**CSS**

```
#index-gallery {
  width:100%;
}

.img-box {
  float:left;
  padding:5px;
  margin:10px 0 0 0;
}

.img-box a, .img-box img {
  display:block;
}

.clear-both {
  clear:both;
} 
```

**每行中的固定列数**（以获得更一致的格式）

```
<?php $cols = 4; ?>

<div id="index-gallery">
  <?php $ires3 = mysql_query("select `id`,`mp4`,`cover` from `d2pxhd`.`videos` WHERE `duration`>'0' AND `active`='1' AND `suspended`='0' AND `add_date`<now() ORDER BY `add_date` DESC limit 24",$db); ?>

   <?php while ($img3 = mysql_fetch_assoc($ires3)) : ?>

     <?php for($i=1; $i <= $cols; $i++) : ?>

        <div class="img-box">
          <a href="/?play=<?=base64_encode(preg_replace('/\s+/', '', $img3['id']));?>&start=1">
            <img style="margin:20px 2px;" width="118" height="100" border="0" src="<?=$img3['cover']."002.jpg";?>">
          </a>
          <p>SUBTITLE HERE!!!</p>
        </div>

        <?php if($i == $cols) : ?>
          <div class="clear-both"></div>
        <?php $i=1; endif; ?>

      <?php endfor; ?>

    <?php endwhile; ?>

  <div class="clear-both"></div>

</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T08:34:22.837

看一下这个。

**[JSFIDDLE 示例](http://jsfiddle.net/dWM3E/)**

**HTML**

```
<div id="index-gallery">
    <div class="item">
        <img src="http://movingimages.files.wordpress.com/2009/10/earth-simulator-offers-peaks-into-our-planetary-future.jpg?w=780" alt=""/>
        <p>My Caption here</p>
    </div>

    <div class="item">
        <img src="http://movingimages.files.wordpress.com/2009/10/earth-simulator-offers-peaks-into-our-planetary-future.jpg?w=780" alt=""/>
        <p>My Caption here</p>
    </div>

    <div class="item">
        <img src="http://movingimages.files.wordpress.com/2009/10/earth-simulator-offers-peaks-into-our-planetary-future.jpg?w=780" alt=""/>
        <p>My Caption here</p>
    </div>

    <div class="item">
        <img src="http://movingimages.files.wordpress.com/2009/10/earth-simulator-offers-peaks-into-our-planetary-future.jpg?w=780" alt=""/>
        <p>My Caption here</p>
    </div>
</div> 
```

**CSS**

```
.item{
    width:200px;
    text-align:center;
    display:block;
    background-color: #ededed;
    border: 1px solid black;
    margin-right: 10px;
    margin-bottom: 10px;
    float:left;
}

#index-gallery{
    width:465px;
} 
```

# php - tpl 看不到 smarty 变量

> ID：15997097
> 
> 赞同：1
> 
> 时间：2013-04-14T08:21:28.657
> 
> 标签：php, smarty, prestashop

我正在尝试为 Prestashop 制作模块。但是我的 tpl 文件看不到变量。

**支付图标.php：**

```
function hookFooter($params){
    $group_id="{$base_dir}modules/mymodule/payicon.php";

    $smarty = new Smarty;
    $smarty->assign('group_id', '$group_id');
    return $this->display(__FILE__, 'payicon.tpl');
    return false;
} 
```

**payicon.tpl:**

```
<div id="payicon_block_footer" class="block">
    <h4>Welcome!</h4>
    <div class="block_content">
        <ul>
            <li><a href="{$group_id}" title="Click this link">Click me!</a></li>
        </ul>
    </div>
</div> 
```

**更新：**

这是安装：

```
public function install() {
    if (!parent::install() OR !$this->registerHook('Footer'))
    return false;

    return Db::getInstance()->execute('
        CREATE TABLE IF NOT EXISTS `'._DB_PREFIX_.'pay_icon` (
            `id_icon` int(10) unsigned NOT NULL,
            `icon_status` varchar(255) NOT NULL,
            `icon_img` varchar(255) DEFAULT NULL,
            `icon_link` varchar(255) NOT NULL,
            PRIMARY KEY (`id_icon`)
        )  ENGINE='._MYSQL_ENGINE_.' DEFAULT CHARSET=utf8;');
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:12:12.340

我不知道 prestashop 但我可以告诉你 smarty 和 PHP。我可以在代码中看到许多明显的问题

**1)** `$base_dir`在函数中不可用。添加

```
global $base_dir; 
```

在函数的开头，使其在此函数的范围内可用。

**2)**

```
 $smarty = new Smarty; 
```

我认为这条线不应该在那里。这是初始化一个`Smarty`与函数外部代码无关的新实例。
将此行替换为

```
global $smarty; 
```

这将使该函数中`$smarty`的全局（类实例）可用`Smarty`

**3)**

```
$smarty->assign('group_id', '$group_id'); 
```

是错的。将其替换为

```
$smarty->assign('group_id', $group_id); 
```

***可能*的解决方案**
由于您的问题没有引起太多关注，因此我会尽力想出一个答案，至少可以让您朝着正确的方向前进（如果不能解决您的问题）

尝试将此功能替换为

```
public function hookFooter($params){
    global $base_dir;
    global $smarty;

    $group_id="{$base_dir}modules/mymodule/payicon.php";

    $smarty->assign('group_id', '$group_id');
    return $this->display(__FILE__, 'payicon.tpl');
} 
```

**更新**

我的坏：D。忘记替换`'$group_id'`最终代码。尝试这个

```
public function hookFooter($params){
    global $base_dir;
    global $smarty;

    $group_id="{$base_dir}modules/mymodule/payicon.php";

    $smarty->assign('group_id', $group_id);
    return $this->display(__FILE__, 'payicon.tpl');
} 
```

# java - 边界布局东南？

> ID：15997099
> 
> 赞同：1
> 
> 时间：2013-04-14T08:21:37.707
> 
> 标签：java, swing, gridbaglayout, border-layout

我的问题是：
如何将 JPanel 添加到东南的 BorderLayout？
这是我的一组按钮：

```
buttonsPanel = new JPanel();
buttonsPanel.setLayout(new GridBagLayout());
buttonsPanel.add(cancel);
buttonsPanel.add(previous);
buttonsPanel.add(next); 
```

而取消、上一个和下一个按钮是JButtons-s，而buttonsPanel是一个JPanel。
声明：

```
JPanel buttonsPanel;
JButton cancel;
JButton previous;
JButton next; 
```

还有我的 JFrame:
`JFrame mainWindow;`- 声明。
其余代码：

```
mainWindow.setJMenuBar(menubar);
mainWindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
mainWindow.getContentPane().setLayout(new BorderLayout());
mainWindow.setSize(new Dimension(screenW / 3 + 200, screenH - 200));
mainWindow.setMinimumSize(new Dimension(screenW / 4, screenH - 500));
//mainWindow.getContentPane().add(BorderLayout.EAST, BorderLayout.SOUTH, buttonsPanel);
int w = mainWindow.getWidth();
int h = mainWindow.getHeight();
x = (screenW - w)/2;
y = (screenH - h)/2;
mainWindow.setLocation(x, y);
mainWindow.setVisible(true); 
```

那么我该怎么做才能移动主窗口东南方的buttonsPanel？请帮我。

提前致谢， Mateiaru

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T08:26:15.433

`JPanel`用 a创建一个`BorderLayout`，将此面板添加到`SOUTH`主面板的位置。

创建另一个`JPanel`，将您的按钮添加到此面板（使用您需要的任何布局管理器。

现在将“按钮”面板添加到南面板的`EAST`位置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T08:30:19.850

如果我理解正确，您希望您的按钮面板位于框架的南部，而您的按钮位于按钮面板的右侧。

为此，我将使用一个水平的 BoxLayout，其中包含一个胶水作为其第一个元素，在其按钮面板内布置按钮。然后我会在内容窗格的南边添加这个按钮面板。

[在swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)中阅读如何使用这两个布局管理器，因为您对 BorderLayour 的工作方式感到困惑：您不能在这种布局的南边和东边添加东西。

请注意，有关 BoxLayout 的教程页面有一个完全符合您要求的示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T19:16:33.820

```
buttonsPanel = new JPanel( new FlowLayout(FlowLayout.RIGHT) );
mainPanel.add(buttonsPanel, BorderLayout.SOUTH); 
```

# jquery - 使用 jquery 计算和日期的 Django 内联表单集

> ID：15997102
> 
> 赞同：0
> 
> 时间：2013-04-14T08:22:33.497
> 
> 标签：jquery, django, jquery-ui-datepicker, inline-formset

我有两个模型，它是一个标题/细节。

```
class Header(models.Model):  
   name = models.CharField(max_length=30,null=False)  

class Detail(models.Model):  
   header = models.ForeignKey(Header)  
   fromdate = models.DateField()  
   todate = models.DateField()  
   totaldays = models.IntegerField() 
```

如何将日期选择器放入`fromdate`并`todate`使用 jQuery。另外我如何计算`fromdate`和中的天数`todate`。如果它不是内联表单集，我可以使用静态日期选择器，但在内联表单集中它不是。请帮帮我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T08:45:38.730

当表单集被渲染时，字段的名称是 like `form-x-fieldname`，因此我总是做的是匹配字段名称。试试“ends-with”选择器（$=）：

```
$('input[name$=fromdate],input[name$=todate]') 
```

# cakephp-2.0 - Js Helper 在 cakephp 2.x 上提交问题

> ID：15997103
> 
> 赞同：0
> 
> 时间：2013-04-14T08:22:35.140
> 
> 标签：cakephp-2.0

我在我的 cakephp 2.x 版本中使用 JS Helper 提交。

我的代码很好，因为调用了函数。

```
<?php  echo $this->Js->submit("Apply", array(
'div' => false, 
'class' => 'general_button', 
'style' => array('float:none;', 'margin: 10px;'), 
'url' => array('controller' => 'poets', 'action' => 'index', 'field' => $search_term, 'value' => $search_value), 
'update' => '#listID', 
'confirm' => 'Are you sure you want to apply action to selected records ??', 
'before' => "return isAnySelect(this.form);", 
'success' => 'myShowMessage();')); ?> 
```

虽然`function isAnySelect(this.form)`被调用，但我的函数 this.form 返回未定义的问题与此代码..请解释。

我的功能

```
function isAnySelect(frmObject) {
console.log(frmObject);
return false;
varAllId = "";

for (i = 1; i < frmObject.chkRecordId.length; i++) {
    alert('Hiii');
    alert(varAllId + "xs");
    if (frmObject.chkRecordId[i].checked == true) {
        if (varAllId == "") {
            varAllId = frmObject.chkRecordId[i].value;
        } else {
            varAllId += "," + frmObject.chkRecordId[i].value;
        }
    }
}
if (varAllId == "") {
    alert("Please select atleast one record !!");
    return false;
} else {
    document.getElementById('idList').value = varAllId;
    return true;
}
} 
```

虽然调用了函数，但它在控制台上输出未定义。

# sql - 在 SQL 中使用触发器的非空约束

> ID：15997104
> 
> 赞同：0
> 
> 时间：2013-04-14T08:22:49.653
> 
> 标签：sql, postgresql, plpgsql

我想使用触发器对属性实现非空约束。这是我的代码：

```
create table mytable2(id int);

create or replace function p_fn() returns trigger as $prim_key$
begin
  if (tg_op='insert') then
    if (id is null) then
      raise notice 'ID cannot be null';
      return null;
    end if;
    return new;
  end if;
end;
$prim_key$ language plpgsql;

create trigger prim_key
before insert on mytable2
for each row execute procedure p_fn(); 
```

但是每当我尝试插入空值时，我都会收到一条错误消息，提示“控制已到达没有返回的触发过程结束”。我尝试将“return new”语句放在内部 IF 中，但它仍然给了我同样的错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T10:47:06.340

问题的直接原因是 PostgreSQL 字符串比较区分大小写。`INSERT`不一样`insert`。尝试：

```
IF tg_op = 'INSERT' THEN 
```

## 建议

你只是提出一个通知。这允许控制流继续到过程中的下一行。您通常`RAISE EXCEPTION`应该中止执行并回滚事务。见[`RAISE`](http://www.postgresql.org/docs/current/static/plpgsql-errors-and-messages.html)。就目前而言，触发器将导致不满足要求的插入*静默失败*，这通常不是您想要的。

此外，您的触发器通常应该以 a 结尾，`RAISE EXCEPTION`如果它们总是应该在函数结束之前返回。这将帮助您更快地了解问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T14:23:31.747

我会在已经提出的好建议中添加几件事：

*   确保您也处理 UPDATE 案例
*   RAISE 使用正确的错误条件。我在下面给出了一个基本示例 - 有关更多格式选项，请参阅[此处](http://www.postgresql.org/docs/current/interactive/plpgsql-errors-and-messages.html)的文档。
*   为清楚起见，我喜欢在触发器名称中至少包含表名

    ```
    CREATE OR REPLACE FUNCTION fn_validate_id_trigger() RETURNS TRIGGER AS
    $BODY$
    BEGIN
      IF (TG_OP IN ('INSERT', 'UPDATE')) THEN
        IF (NEW.id IS NULL) THEN
          RAISE not_null_violation;
        END IF;
      END IF;
      RETURN NULL;
    END;
    $BODY$
      LANGUAGE plpgsql;

    CREATE CONSTRAINT TRIGGER tr_mytable_validate_id
    AFTER INSERT OR UPDATE
    ON mytable2
    FOR EACH ROW EXECUTE PROCEDURE fn_validate_id_trigger(); 
    ```

更新：这现在是一个 CONSTRAINT 触发器，并在插入或更新后触发。在第一次编辑中，我提出了一个特定于列的触发器（UPDATE OF id）。这是有问题的，因为如果在表上执行的另一个触发器将列“id”更改为空，它不会触发。

同样，这不是处理约束的最有效方法，但很高兴知道。

# image - 相似图像压缩

> ID：15997106
> 
> 赞同：4
> 
> 时间：2013-04-14T08:23:03.487
> 
> 标签：image, compression, lossless-compression

我有一堆类似的图像。这些图像包含不同的噪声，但边缘和直方图非常相似。我需要无损压缩这些图像。是否有任何算法可以使用图像相似性进行更有效的压缩？我尝试通过预测来使用改进的压缩（从 LOCO 更改了 MED 预测器），但我的收益只有大约 0.4%

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:55:18.640

您所说的“相似”到底是什么意思？拥有相似的直方图不会有太大帮助。图像*看起来*一样吗？

您可以简单地尝试从这个图像中减去前一个图像，逐个像素和逐个颜色，看看差异图像是否更可压缩。

下一步是将一系列图像制作成视频，并使用视频压缩，这可以利用连续图像之间更复杂的相关性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-18T14:41:43.377

如果您听说过 Set Redundancy Compression ( [SRC](http://bit.csc.lsu.edu/~kosmas/Dissertation.pdf) )，这将使您的任务变得非常容易。它为一组相似图像提供了无损和有损图像压缩技术。

**最小-最大差分**技术可能是您寻求的技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T00:14:55.443

图像是灰度还是彩色的。如果它们是灰度的，我有一个 7 年前开发的应用程序。我可以给你试试。它基于一种称为 Set Redundancy Compression 的技术。

如果它们是彩色的，您可以尝试 Lagarith（视频编解码器）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-07T00:47:35.597

尝试`composite -compose difference image1 image2 diff`在连续图像上执行“”（如果您还没有订单，则以某种方式任意订购图像）。“差异”图像可能非常小，您可以通过执行`composite -compose difference diff image1`（或某些变体）来恢复 image2。

# asp.net - 使用 Ajax 每隔几秒保存一些数据 [到数据库中]

> ID：15997111
> 
> 赞同：0
> 
> 时间：2013-04-14T08:23:51.030
> 
> 标签：asp.net, sql, sql-server, ajax

我有一个页面，我必须每隔几秒保存一些数据 [到数据库中]。这类似于 gmail 或 stackoverflow 每隔几秒保存一次草稿。我正在使用 jQuery Ajax 来实现这一点。以下是我的 Ajax 调用：

**问题：**这是正确的方法吗？我对每隔几秒钟打开和关闭连接感到不舒服。

```
function ShowHtml() {
 var SaveStoryForEditing = '<%= Page.ResolveUrl("~")%>Webservices/WebService.asmx/SaveStoryForEditing';

            $('#savedata').html($('#InPlaceEdit').html());
            $("#InPlaceEdit").find("textarea").each(function (idx) {
                $("#savedata").find("textarea").eq(idx).text($(this).val());
            });
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: SaveStoryForEditing,
                dataType: 'json',
                async: false,
                data: "{'StoryEditId':" + $('#hfStoryEditID').val() + ",'AccountId':" + $('#hfAccID').val() + ",'StoryHtml':'" + $('#savedata').html() + "'}", // Page parameter to make sure we load new data
                success: function (data) {
                    var myObject = eval('(' + data.d + ')');

                    $('#InPlaceEdit').effect("highlight", { color: "#ff0000" }, 1000);
                    $('#savedata').html('');
                    AutoSave();

                },
                error: function (result) {
                    AutoSave();
                    alert(JSON.stringify(result));
                }
            });

        };

        function AutoSave() {
            setTimeout("ShowHtml()", 30000);
        }; 
```

这是我从网络服务调用的函数：

```
Public Shared Function SaveStoryForEditing(ByVal StoryEditId As Integer, ByVal AccountId As Integer, ByVal StoryHtml As String) As Object

        Dim db As SqlDatabase = Connection.Connection
        Dim scalar As Object
        Dim cmdIf As SqlCommand = CType(db.GetSqlStringCommand("UPDATE StoryEdit SET    StoryHtml=@StoryHtml WHERE AccountID=@AccountID AND StoryEditID=@StoryEditID"), SqlCommand)
        db.AddInParameter(cmdIf, "AccountID", DbType.Int32, AccountId)
        db.AddInParameter(cmdIf, "StoryEditID", DbType.Int32, StoryEditId)
        db.AddInParameter(cmdIf, "StoryHtml", DbType.String, StoryHtml)
        scalar = db.ExecuteNonQuery(cmdIf)
        Return scalar

    End Function 
```

这是我的连接对象类：

```
Imports Microsoft.Practices.EnterpriseLibrary.Data.Sql
Imports System.Data.SqlClient

Public Class Connection
    Public Shared Function Connection() As SqlDatabase
        Dim db As SqlDatabase = New SqlDatabase(System.Configuration.ConfigurationManager.ConnectionStrings("TripNestConStr").ConnectionString)
        Return db
    End Function

    End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T08:57:14.923

我相信这不是一个好方法。您正在创建（可能）不必要的流量。如果您真的需要这样的功能，我至少会考虑某种机制，该机制将跟踪更改并仅在上次服务器调用后发生更改时才执行。如果数据没有更改，您实际上不需要向服务器发送请求并访问数据库。

只是一些想法供您考虑，这完全取决于您的具体情况和需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T09:54:31.807

我在想为什么不使用隐藏字段类型的标志来检查值是否更新。在 textarea 的 keypressup 上，您可以将隐藏值设置为 true。在 autoSave 方法中检查隐藏字段的值，如果为真则只返回服务器。一旦您选择了值，再次将其更新回 false 。这样它会帮助你节省一些超载的时间。另一种方法不是保存 true false ，您还可以保存更改的时间戳并在 javascript 中有一个全局变量，它将告诉您上次在数据库中更新的时间。如果全局值过去与隐藏字段中的当前更新相比，则需要同步。

# java - 在多个线程中维护 Arraylist 的顺序

> ID：15997113
> 
> 赞同：0
> 
> 时间：2013-04-14T08:24:25.543
> 
> 标签：java, multithreading

当使用两个线程时，如何确保打印顺序与原始数组中的顺序相同？我希望它打印“0 1 2 3 4 5 6 7 8 9”，但目前不能保证订单。有什么办法让它井井有条吗？十分感谢。

```
public class Test {
    public static void main(String[] args){
        DataStore dataStore = new DataStore();
        for(int i=0; i<10; i++){
            dataStore.add(String.valueOf(i));
        }
        CopyThread t1 = new CopyThread(dataStore);
        CopyThread t2 = new CopyThread(dataStore);
        t1.start();
        t2.start();

        try {
            t1.join();
            t2.join();
        } catch(Throwable t) {
        }
    }   
}

class CopyThread extends Thread {
    private DataStore data; 

    public CopyThread(DataStore data){
        this.data = data;
    }
    public void run(){      
        DataStore.Line line = null;
        int lineID;

        while( (line = data.getLine()) != null ){       
            lineID = line.id;       
            System.out.println(Thread.currentThread().getName() + ": " + lineID);       
        }   
    }
}

class DataStore {
    ArrayList<String> lines = new ArrayList<String>();
    int current = 0;

    public synchronized Line getLine () {
        if (current >= lines.size()) {
            return null;
        }
        Line line = new Line(lines.get(current), current);
        current++;

        return line;
    }

    public synchronized void add (String s) {
        lines.add(s);
    }

    public synchronized int size () {
        return lines.size();
    }

    public static class Line {
        public String line;
        public int id;

        public Line (String str, int i) {
            line = str;
            id = i;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:26:42.460

尝试 Vector 而不是 ArrayList 。

[向量](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html)

> Vector 类实现了一个可增长的对象数组。像数组一样，它包含可以使用整数索引访问的组件。但是，Vector 的大小可以根据需要增加或缩小，以适应在创建 Vector 后添加和删除项目。
> 
> 每个向量都试图通过维护容量和容量增量来优化存储管理。容量总是至少与向量大小一样大；它通常更大，因为随着组件被添加到向量中，向量的存储以块的形式增加容量增量的大小。应用程序可以在插入大量组件之前增加向量的容量；这减少了增量重新分配的数量。
> 
> Vector 的 iterator 和 listIterator 方法返回的 Iterator 是快速失败的：如果在创建 Iterator 后的任何时间对 Vector 进行结构修改，除了通过 Iterator 自己的 remove 或 add 方法之外的任何方式，Iterator 将抛出 ConcurrentModificationException。因此，面对并发修改，迭代器快速而干净地失败，而不是在未来不确定的时间冒任意的、非确定性的行为。Vector 的 elements 方法返回的枚举不是快速失败的。
> 
> 请注意，不能保证迭代器的快速失败行为，因为一般来说，在存在不同步的并发修改的情况下，不可能做出任何硬保证。快速失败的迭代器会尽最大努力抛出 ConcurrentModificationException。因此，编写一个依赖于这个异常的正确性的程序是错误的：迭代器的快速失败行为应该只用于检测错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T09:17:34.730

您可以使用同步来实现：

```
synchronized(data) {
  while( (line = data.getLine()) != null ){       
        lineID = line.id;       
        System.out.println(Thread.currentThread().getName() + ": " + lineID);       
  }
} 
```

# c# - 引用父窗体到子窗体

> ID：15997114
> 
> 赞同：-1
> 
> 时间：2013-04-14T08:24:33.907
> 
> 标签：c#

我创建了一个 ParentForm。从 ParentForm 的菜单中，我从 ChildForm 菜单项创建了一个 ChildForm。创建 ChildForm 时，我将 ParentForm 上的 Childform 菜单项设置为禁用。在关闭 ChildForm 时，我必须设置和引用什么才能使 ParentForm 上的 ChildForm 菜单项启用。

谢谢

塔马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T21:47:16.830

```
 ParentForm form;
    public ChildForm(ParentForm _form) //pass ParentForm as Parameter
    {
        InitializeComponent();
        form = _form; //save Parameter to variable form
    }
    //raised when Form was closed
    private void ChildForm_FormClosed(object sender, FormClosedEventArgs e)
    {
        //set item to public modifier in properties window or specify getter and setter, then you can set it set it to enabled again like this
        //Pseudo: form.menu.item.enabled = true;
    }
    //create Instance of ChildForm like this "ChildForm child = new ChildForm(this);" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T09:37:17.487

```
public partial class myParent : Form {
      ...
      ...
      public myParent {
             initChildren();
      }
      void initiChildren() {
          myChildAlpha = new ChildForm();
          myChildAlpha.FormClosed += new FormClosedEventHandler(enable_menu)    
      }
      void enable_menu(object sender,FormClosedEventArgs e) {
          //check if sender == ChildForm -> if so enable the proper menu
      } 
} 
```

# r - 在 R 绘图图例中添加 pch 符号

> ID：15997121
> 
> 赞同：21
> 
> 时间：2013-04-14T08:25:56.263
> 
> 标签：r, formatting, plot, legend

我有一个用黑线表示的时间序列和一个用红色曲线表示的时间序列。然后我有单点，在 R 中有 8 的 pch 符号。这些是星星。见下图： ![星星](https://i.stack.imgur.com/ZhY5D.png)

目前我有以下传说：

```
legend("bottomleft", 
 legend=c("log loss","daily VaR","exceedance"),
 bty = "n",lwd=2, cex=1.2,y.intersp=1.4, col=c("black","red","blue"), lty=c(1,1,1)) 
```

但我不想在传说中有一条蓝线表示超越，而只是情节中的星星。我必须使用 pch=8。我只想拥有传说中的星星，而不是带有线条的星星。所以不是这些解决方案：[R 图例问题，点的符号被线掩盖](https://stackoverflow.com/questions/9915527/r-legend-issue-symbols-of-points-are-masked-by-lines)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-14T08:40:11.520

试试这个。您将 lty 设置为仅显示前两行，将 pch 设置为仅显示最后一点。

```
plot(1:10, rnorm(10) * 1:10)
legend("bottomleft", legend = c("entry1", "entry2", "something cpl different"), bty = "n",
       lwd = 2, cex = 1.2, col = c("black", "blue", "red"), lty = c(1, 1, NA), pch = c(NA, NA, 8)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/DAsSn.png)

# java - web.xml中的debug是什么意思

> ID：15997124
> 
> 赞同：1
> 
> 时间：2013-04-14T08:26:13.897
> 
> 标签：java, tomcat, logging, struts

下面我提到了一个链接，他们在其中讨论了 web.xml 中的调试级别

[http://dev.anyframejava.org/docs.en/anyframe/plugin/optional/struts/1.0.1/reference/html/ch02.html](http://dev.anyframejava.org/docs.en/anyframe/plugin/optional/struts/1.0.1/reference/html/ch02.html)

```
<init-param>
<param-name>debug</param-name>
<param-value>2</param-value>
</init-param> 
```

请我没有得到调试的正确含义以及他们在 0-6 之间谈论的级别，例如当我将值 2 传递给`<param-value>`我将获得什么样的信息或者它是否为 0 或1 或 6 我会得到什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T08:41:24.480

该参数将在 org.apache.struts.action.ActionServlet 内部使用以建立日志级别。我期望使用 6 时，您将拥有最详细的日志级别，即 TRACE，而使用 0 时，日志记录将关闭，因此您不会记​​录任何内容。

使用 2，您可能具有 INFO 级别，但要确保我会尝试一下。通过查看服务器日志，您应该能够立即意识到这一点。

# android - 在 x86 上构建 dalvikvm 时的依赖性问题

> ID：15997128
> 
> 赞同：1
> 
> 时间：2013-04-14T08:26:31.313
> 
> 标签：android, compilation, dalvik, android-x86

过去几天我一直在尝试在 x86 系统上编译 dalvikvm，以便仅运行 Dalvik 应用程序（没有本机，仅 dalvikvm）而没有 dalvik-arm-qemu-emulate-x86 的所有吞吐量，我获取了android 的整个 src 使用 repo sync 并使用“android-4.2_r1”标签

在 dalvik/vm *mk 中更改了几行（制作静态库而不是动态库，并添加 -j4 而不是 -j2）后，我遇到了我认为是编译依赖问题，我似乎无法解决

```
 mm
============================================
PLATFORM_VERSION_CODENAME=REL
PLATFORM_VERSION=4.0.1
TARGET_PRODUCT=full_x86
TARGET_BUILD_VARIANT=eng
TARGET_BUILD_TYPE=release
TARGET_BUILD_APPS=
TARGET_ARCH=x86
TARGET_ARCH_VARIANT=x86-atom
HOST_ARCH=x86
HOST_OS=linux
HOST_BUILD_TYPE=release
BUILD_ID=ITL41D
============================================
make: Entering directory `/home/_test_x86/_test_x86/src__test_x86/src__test_x86'
make: *** No rule to make target `out/host/linux-x86/obj/STATIC_LIBRARIES/libcutils_intermediates/libcutils.a', needed by `out/host/linux-x86/obj/STATIC_LIBRARIES/libdvm_intermediates/libdvm.a'.  Stop.
make: Leaving directory `/home/_test_x86/_test_x86/src__test_x86/src__test_x86' 
```

当我尝试从树的顶部执行'make clean'并重新编译它（混合.mk并将不同的库更改为静态或动态）时，我只得到相同的错误，而不是在libexpat或liblog周围出现的libc

如果有人能提示我如何解决它，我将不胜感激，因为这似乎是一场猫鼠竞赛。

# mobile - 在所有移动设备上将网站设置为全屏

> ID：15997137
> 
> 赞同：3
> 
> 时间：2013-04-14T08:26:58.303
> 
> 标签：mobile, web, fullscreen, viewport

我正在尝试找到一种将网站正文元素的大小设置为可用屏幕大小的方法。在桌面浏览器上，这很容易：`width=height=100%`但在移动设备上，这并不那么简单：

许多设备默认使用一些初始缩放设置，试图以最佳可读比例显示页面。`<head>`对于 Android，我可以使用以下-tag将其关闭：

```
<meta name="viewport" content="width=device-width, height=device-height, target-densitydpi=high-dpi, initial-scale=1.0> 
```

现在，设置正文的宽度可以按预期工作（在 Android 下）。高度是一个完全不同的问题，因为浏览器将根据地址栏的当前位置设置 100% 的含义。因此，如果您的页面最初比可见页面长并且已经滚动以使地址栏不在屏幕上，则将高度设置为 100% 具有预期的效果。但是一旦用户向下移动页面以显示地址栏，高度就会更新，因此不再可能向另一个方向滚动。

因此，对于移动设备，似乎正确设置体高的唯一方法是将其设置为像素大小而不是 100%。但是阅读[这篇关于所有不同可用尺寸度量（screen.height、window.outerheight、...）](http://tripleodeon.com/2011/12/first-understand-your-screen/)的文章让我对让它跨设备工作感到不寒而栗：

因此我的问题是：

是否有可靠的最佳实践方法来实现在移动设备上设置正文元素的大小，以使页面占据所有可用的屏幕空间（包括将地址栏推离屏幕），但仅此而已？额外的功劳：可以这样做，以便用户仍然可以放大（但不能缩小）页面吗？

使用 JavaScript 或 CSS 或两者的解决方案对我来说是完全可以接受的，但它们应该可以在尽可能多的设备上运行，至少在桌面（IE6+、Opera、Chrome、Firefox、Safari）和移动设备（手机、平板电脑）上、安卓、iOS、Windows 移动）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T12:20:28.047

我不完全清楚你的目标是什么，但看看这些建议是否有帮助。

对于元标记，请尝试

```
<meta name="viewport" content="width=device-width, initial-scale=1.0,  minimum-scale=1.0"> 
```

我不确定是否需要 target-densitydpi=high-dpi。如果有必要，很容易更换。

对于 CSS

```
 html,
 body {
    height: 100%;
  } 
```

并且为了隐藏地址栏，我之前用过[这段代码，效果不错](http://davidwalsh.name/hide-address-bar)，或者[这里是另一个我没用过的](http://menacingcloud.com/?c=iPhoneAddressBar)

祝你好运！

# c++ - 在 VS2012 中链接到 Boost Regex 库

> ID：15997144
> 
> 赞同：1
> 
> 时间：2013-04-14T08:27:44.183
> 
> 标签：c++, boost, visual-studio-2012, linker, firebreath

我正在尝试使用 Boost Regex 库构建我的 VS2012 C++ 项目。链接器似乎找不到库并给出错误：

```
error LNK1104: cannot open file 'libboost_regex-vc110-mt-gd-1_50.lib' 
```

在“项目属性：链接器：常规：附加库目录”中，我包含了一个路径，该路径（在子目录中）包含一个名为**`boost_regex.lib`**.

这是由第 3 方框架 (FireBreath) 构建的，我不应该更改它。如何让 VS2012 使用这个库，而不是在错误中引用的名称下寻找一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:30:56.893

首先，是什么让您如此确定 boost_regex.lib 是正确的？它甚至适用于您的编译器和版本吗？我也怀疑它是否适用于运行时库的调试变体。我的猜测是，您必须为正在使用的编译器构建它并正确安装它，Boost 网站上有相关说明。这也可能意味着为您的编译器重建 FireBreath，假设它也是一个 C++ 库。

然后，Boost 中检测编译器设置然后选择要链接的库的代码对于正常设置是正确的。此代码使用“#pragma comment(lib, ...)”来指定要链接的库，因此您应该能够找到该代码。在那里，您还应该能够检测到关闭此功能的宏。但是，您可能没有解决任何问题，而是您正在制造更多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-14T16:37:17.750

替换图书馆不是你想做的事情。反而：

*   将 Boost 下载到，比如说，`c:\boost`
*   打开 VS 命令提示符，进入`c:\boost`并运行`bjam`. 完成后，运行`b2`. 等待。
*   现在进入您的项目并添加`c:\boost\stage\lib`到 Additional Library Directories 设置。

这将允许您构建项目。

# java - 未删除的 ArrayList 元素

> ID：15997145
> 
> 赞同：-3
> 
> 时间：2013-04-14T08:27:47.293
> 
> 标签：java

```
import java.util.*;
class Drive{
    public static void main(String[] args) {
        ArrayList<String> lstStr = new ArrayList<String>();
        lstStr.add("A");
        lstStr.add("R");
        lstStr.add("C");
        String str;
        for(Iterator<String> it = lstStr.iterator(); it.hasNext();) {   
            str = it.next();
            if(str.equals("R")) {
                lstStr.remove(it);
            }
        }
        for(Iterator<String> it = lstStr.iterator(); it.hasNext();) {
            System.out.println(it.next());
        }
    }
} 
```

无法理解发生了什么，为什么没有从 ArrayList 中删除 R？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T08:29:44.910

```
if(str.equals("R"))
    lstStr.remove(it); 
```

上面应该是：

```
if(str.equals("R"))
    it.remove(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T08:37:29.443

`Iterator`当您试图安全地删除任何东西时，请使用'remove 方法`List`。根据 API ，`void remove()`: 从底层集合中删除迭代器返回的最后一个元素（可选操作）。每次调用 next 时，此方法只能调用一次。如果在迭代过程中以除调用此方法之外的任何方式修改了基础集合，则迭代器的行为是未指定的。

您的代码需要稍作更正：

```
for(Iterator<String> it = lstStr.iterator(); it.hasNext();)
{ 
    str = it.next();
    // instead of iterator "it" put string "str" as argument to the remove()
    if(str.equals("R")){lstStr.remove(str);}
 } 
```

虽然上面的代码在你的情况下可以工作，但是在很多边缘情况下它会失败。最好的方法是：

```
for(Iterator<String> it = lstStr.iterator(); it.hasNext();)
{ 
    str = it.next();
    // use iterator's remove()
    if(str.equals("R")){ it.remove();}
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T08:34:22.447

使用迭代器的 remove 方法，例如，

```
List<String> lstStr = new ArrayList<String>();
lstStr.add("A");
lstStr.add("R");
lstStr.add("C");
String str;

for(Iterator<String> it = lstStr.iterator(); it.hasNext();)
{ 
    str = it.next();
    if(str.equals("R"))
    {
        it.remove();
    }
}

for(Iterator<String> it = lstStr.iterator(); it.hasNext();)
{
    System.out.println(it.next());
} 
```

> 此类的 iterator 和 listIterator 方法返回的迭代器是快速失败的：如果在创建迭代器后的任何时间对列表进行结构修改，除了通过 **迭代器自己的 remove 或 add 方法**之外的任何方式，迭代器将抛出 ConcurrentModificationException。

[http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

# javascript - 创建没有孔的密集阵列。

> ID：15997148
> 
> 赞同：0
> 
> 时间：2013-04-14T08:28:39.713
> 
> 标签：javascript

稀疏数组：创建给定长度的稀疏数组很简单：

```
> var a = new Array(3);
> a
[ , ,  ]
> a.length
3
> a[0]
undefined 
```

当您对其进行迭代时，您可以看到它没有任何元素。JavaScript 跳过了这些漏洞。

```
> a.forEach(function (x, i) { console.log(i+". "+x) });

> a.map(function (x, i) { return i })
[ , ,  ] 
```

我们可以遍历元素，用值填充数组吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T08:30:17.193

当然！：

```
for (var i = 0; i < a.length; i++) {
    if (typeof a[i] === "undefined") {
        a[i] = "whatever";
    }
} 
```

取决于你想用什么填充它，但只需用填充物替换“whatever”。

# linux - 将 32 位程序转换为 16 位程序

> ID：15997150
> 
> 赞同：0
> 
> 时间：2013-04-14T08:29:14.047
> 
> 标签：linux, assembly, gnu-assembler

汇编程序为我的 16 位代码 movzbw (%ax) 抛出错误，%ax 错误：`(%ax)' 不是有效的基础/索引表达式

但以下指令对 32 位代码生成有效。movzbl (%eax), %eax

环境：处理器：英特尔（x86） 汇编器：“GNU AS” 操作系统：“Linux” 目的：在编写一个非常简单的引导加载程序时，将“Hello, World”打印到屏幕上，我试图将一个字符串传递给一个函数并然后逐字节遍历，然后打印。

我可以用来避免编写 16 位实模式代码时出错的等效指令是什么？

更多信息：下面是我试图在“16 位 GNU AS”汇编器中模拟的 C 代码

```
void _prints(char*);

int main(void)
{
   char* mess = "hello";
   _prints(mess);
   return 0;
}

void _prints(char* str)
{
   while(*str)
   {
      ++str;
   }
} 
```

注意：在尝试使用命令“gcc -S test.c”生成程序集文件时，我在 _prints 函数中看到指令“movzbl (%eax), %eax”。我想使用相同的汇编程序模拟 16 位实模式代码，但在使用“movzbw (%ax), %ax”时会引发错误

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T08:34:37.040

在实模式下，`(%ax)`( `[ax]`) 不是有效的间接寻址方法。你必须使用`%bp`寄存器。我建议你拿起英特尔（或 AMD）处理器手册，像我一样从前到后阅读第 2 卷（适用于英特尔）。

如果您只是删除`e`以模拟真实模式，则没有必要。您的程序不会编译为 16 位可执行文件。它仍然是 32 或 64 位可执行文件，带有`gcc`. 生成 16-but 可执行文件的唯一方法是使用 OpenWatcom。即使这样，也*没有*必要编写 16 位程序。它们很慢，并且在处理器上的真实模式和保护模式（更改执行线程）之间的切换很昂贵。

正如您所提到的，这是针对引导加载程序的，您不能像这样编写引导加载程序。您必须手动编写程序集。我知道没有例外。

# asp.net-mvc - 为什么 HtmlHelper.ViewBag 与 HtmlHelper.ViewContext.ViewBag 不同

> ID：15997156
> 
> 赞同：4
> 
> 时间：2013-04-14T08:30:11.957
> 
> 标签：asp.net-mvc

我已经为 HtmlHelper 编写了扩展方法，该方法是从需要访问 ViewBag 以获取页面设置的信息的母版页调用的。

这是方法签名：

```
public static string BuildFavoritesTitle(this HtmlHelper htmlHelper) { } 
```

我注意到如果我访问该方法内部

```
htmlHelper.ViewContext.ViewBag 
```

我得到空的 ViewBag，但如果访问

```
htmlHelper.ViewBag 
```

我得到了“正确”的 ViewBag。正确的意思是 ViewBag 与内页中添加的项目。

我只是想知道有什么区别，为什么有多个ViewBag？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-05T07:49:16.597

您在视图数据字典中设置值的目的是什么？确定如何呈现控件是某种属性吗？

考虑向 BuildFavoritesTitle 添加其他参数

```
public static string BuildFavoritesTitle(this HtmlHelper htmlHelper, string parameter) { } 
```

然后从您的视图中调用辅助方法（我不确定这是否是您的目标？）：

```
@Html.BuildFavoritesTitle("myParameter") 
```

此外，如果它是一个控件，或者您尝试在 html 帮助程序中构建的某种标记，请考虑使用 MvcHtmlString 作为返回类型。

# android - 在 EditText 和 Text View 之间传输数据

> ID：15997158
> 
> 赞同：0
> 
> 时间：2013-04-14T08:30:17.083
> 
> 标签：android, textview, android-edittext, runtimeexception

我正在尝试制作一个获取 EditText 值并将其放入另一个活动的 TextView 的活动。

这是第一个活动的代码，其中包含一个 Textview 和用于编辑它的选项菜单

```
public class Saturday extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.saturday);

    Intent i = getIntent();
    String txt = i.getExtras().getString("txtData","");
    final TextView Tclass1;
    Tclass1 = (TextView)findViewById(R.id.seven);
    Tclass1.setText(txt);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.saturday, menu);
    return true;
}
@Override
public boolean onOptionsItemSelected(MenuItem item)
{
 switch(item.getItemId())
 {
 case R.menu.saturday:
     edit_schedule();
  return true;
 }
 return super.onOptionsItemSelected(item);

}
public void edit_schedule() {
    final TextView Tclass1;
    Tclass1 = (TextView)findViewById(R.id.seven); 
    Intent i = new Intent(this, EditSaturday.class);
 i.putExtra("text" , Tclass1.getText().toString());
 startActivity(i);

}} 
```

这是包含带有保存按钮的 EditText 的其他活动的代码

```
public class EditSaturday extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.edit_saturday);

    Intent i = getIntent();
    String txt = i.getExtras().getString("txtData","");
    final EditText Eclass1;
    Eclass1 = (EditText)findViewById(R.id.eseven);
    Eclass1.setText(txt);

    findViewById(R.id.save).setOnClickListener(new View.OnClickListener() { 
        @Override
        public void onClick(View v) {

            save();
            }});

}

public void save() {
    final EditText Eclass1;
    Eclass1 = (EditText)findViewById(R.id.eseven);
    Intent i = new Intent(this, Saturday.class);
     i.putExtra("text" , Eclass1.getText().toString());
 startActivity(i);

}} 
```

运行应用程序后，它给了我一个错误

这是 logCat

```
04-14 08:15:17.911: E/AndroidRuntime(1202): FATAL EXCEPTION: main
04-14 08:15:17.911: E/AndroidRuntime(1202): java.lang.RuntimeException: Unable to start activity ComponentInfo{sarah.bodoor.sto/sarah.bodoor.sto.Saturday}: java.lang.NullPointerException
04-14 08:15:17.911: E/AndroidRuntime(1202):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-14 08:15:17.911: E/AndroidRuntime(1202):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-14 08:15:17.911: E/AndroidRuntime(1202):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-14 08:15:17.911: E/AndroidRuntime(1202):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-14 08:15:17.911: E/AndroidRuntime(1202):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-14 08:15:17.911: E/AndroidRuntime(1202):     at android.os.Looper.loop(Looper.java:137)
04-14 08:15:17.911: E/AndroidRuntime(1202):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-14 08:15:17.911: E/AndroidRuntime(1202):     at java.lang.reflect.Method.invokeNative(Native Method)
04-14 08:15:17.911: E/AndroidRuntime(1202):     at java.lang.reflect.Method.invoke(Method.java:511)
04-14 08:15:17.911: E/AndroidRuntime(1202):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-14 08:15:17.911: E/AndroidRuntime(1202):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-14 08:15:17.911: E/AndroidRuntime(1202):     at dalvik.system.NativeStart.main(Native Method)
04-14 08:15:17.911: E/AndroidRuntime(1202): Caused by: java.lang.NullPointerException
04-14 08:15:17.911: E/AndroidRuntime(1202):     at sarah.bodoor.sto.Saturday.onCreate(Saturday.java:22)
04-14 08:15:17.911: E/AndroidRuntime(1202):     at android.app.Activity.performCreate(Activity.java:5104)
04-14 08:15:17.911: E/AndroidRuntime(1202):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-14 08:15:17.911: E/AndroidRuntime(1202):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-14 08:15:17.911: E/AndroidRuntime(1202):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:37:15.983

```
Intent i = new Intent(this, Saturday.class); 
```

应该

```
Intent i = new Intent(EditSaturday.this, Saturday.class); 
// should be referring to activity context 
```

在你的 save()

还

```
 i.putExtra("text" , Eclass1.getText().toString());// key in EditSaturday 
   // keys should be the same 
   String txt = i.getExtras().getString("txtData","");// key in saturday
   // keys are different 
```

在您的第一个活动中，单击按钮获取 editext 值并使用意图在活动之间传递数据

```
EditText et= (EditText)findviewById(R.id.edittext);
String s= et.getText().toString();
Intent i= new Intent(firstActivity.this,secondActivity.class);
i.putExtra("key",s);
startActivity(i); 
```

在你的第二个活动 onCreate()

```
setContentView(R.layout.second); 
Bundle extras= getIntent().getExtras();
if(extras!=null)
{
  TextView tv= (TextView)findviewById(R.id.textView1);
  String value = extras.getString("key");
  tv.setText(value); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T08:58:11.123

尝试实现此代码。

```
String txt = i.getExtras().getString("text",""); 
```

用。。。来代替

```
String txt = i.getExtras().getString("txtData",""); 
```

因为您需要相同的密钥才能从传递意图中获取价值。

您在传递意图时输入密钥“文本”，并在获得两者不同的意图时使用密钥“txtData”，因此，使用相同的关键敌人传递和获取。

在您使用以下代码通过选项菜单单击调用下一个活动后。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    menu.add(0, 0, 0, "Next");
    return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item)
{
 switch(item.getItemId())
 {
 case 0:
     edit_schedule();
         return true;
 }
 return super.onOptionsItemSelected(item);

} 
```

# iphone - 绘图应用程序中的铅笔纹理

> ID：15997173
> 
> 赞同：3
> 
> 时间：2013-04-14T08:32:50.557
> 
> 标签：iphone, ios5, ios6, core-graphics, quartz-core

我正在开发一个绘图应用程序，我想在 App Store 上拥有类似 Paper（53）应用程序的铅笔效果。任何人都可以指导我这样做吗？我尝试了 UIBezierPath strokeWithBlendMode 但没有成功。

谢谢

# scala - 在 Play 2.1.1 中解决预定的 Akka 演员只会给我 RepointableActorRef

> ID：15997176
> 
> 赞同：0
> 
> 时间：2013-04-14T08:33:16.700
> 
> 标签：scala, playframework-2.0, akka

我有一个经常性的 Akka 作业，它从我在 Global.scala 中开始的外部 url 读取引号。像这样：

```
object Global extends GlobalSettings {
  override def onStart(app: Application) {
    val collector = Akka.system.actorOf(Props[QuoteCollector], "quoteCollector")
    Akka.system.scheduler.schedule(0.seconds, 10.seconds, collector, "tick")
  }
} 
```

现在我想在有人查看 / 页面时访问演员的数据，所以我在控制器中执行此操作：

```
def index = Action {
  val actor:ActorRef = Akka.system.actorFor("akka://application/user/quoteCollector")
  val collector = actor.asInstanceOf[QuoteCollector]
  val list: List = collector.quotes
  Ok(views.html.index("hi"))
} 
```

这是每次都会发生的事情：

```
error] application - 

! @6e1hjmdbo - Internal server error, for (GET) [/] ->

play.api.Application$$anon$1: Execution exception[[ClassCastException: akka.actor.RepointableActorRef cannot be cast to actors.QuoteCollector]]
    at play.api.Application$class.handleError(Application.scala:289) ~[play_2.10.jar:2.1.1]
    at play.api.DefaultApplication.handleError(Application.scala:383) [play_2.10.jar:2.1.1]
    at play.core.server.netty.PlayDefaultUpstreamHandler$$anonfun$17$$anonfun$apply$24.apply(PlayDefaultUpstreamHandler.scala:326) [play_2.10.jar:2.1.1]
    at play.core.server.netty.PlayDefaultUpstreamHandler$$anonfun$17$$anonfun$apply$24.apply(PlayDefaultUpstreamHandler.scala:324) [play_2.10.jar:2.1.1]
    at play.api.libs.concurrent.PlayPromise$$anonfun$extend1$1.apply(Promise.scala:113) [play_2.10.jar:2.1.1]
    at play.api.libs.concurrent.PlayPromise$$anonfun$extend1$1.apply(Promise.scala:113) [play_2.10.jar:2.1.1]
java.lang.ClassCastException: akka.actor.RepointableActorRef cannot be cast to actors.QuoteCollector
    at controllers.Application$$anonfun$index$1.apply(Application.scala:22) ~[classes/:na]
    at controllers.Application$$anonfun$index$1.apply(Application.scala:20) ~[classes/:na]
    at play.api.mvc.ActionBuilder$$anonfun$apply$11.apply(Action.scala:254) ~[play_2.10.jar:2.1.1]
    at play.api.mvc.ActionBuilder$$anonfun$apply$11.apply(Action.scala:254) ~[play_2.10.jar:2.1.1]
    at play.api.mvc.ActionBuilder$$anon$1.apply(Action.scala:217) ~[play_2.10.jar:2.1.1]
    at play.api.mvc.Action$$anonfun$apply$1$$anonfun$apply$2$$anonfun$apply$5$$anonfun$apply$6.apply(Action.scala:109) ~[play_2.10.jar:2.1.1] 
```

欢迎任何关于刚刚发生的事情以及我应该如何解决它的指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T08:57:00.147

Akka 保护你免受演员的伤害。您总是在处理地址（`ActorRef`s）。所以**后面**的演员`ActorRef`应该有逻辑来接受消息（比如`case object GetQuotes`）和逻辑来发回你的引号列表（`List[Quote]`）。

另请查看文档的[这一部分](http://doc.akka.io/docs/akka/2.1.2/scala/futures.html)。

# ios - IOS-滑块仅在 touchesEnded 时做出反应

> ID：15997182
> 
> 赞同：0
> 
> 时间：2013-04-14T08:34:10.503
> 
> 标签：ios, uislider

我是 iOS 新手，我想知道如何让我的滑块**仅**在触摸结束时做出反应。我用以下方法解决了这个问题：

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
```

但我不能让它工作。

有谁可以帮助我简单明了的例子？

**请以编程方式回答，我不使用故事板。**

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:53:15.183

您可以添加手势识别器：

```
 UITapGestureRecognizer *tapGestureRecognizer = [[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(onSliderTap:)] autorelease];
 [slider addGestureRecognizer:tapGestureRecognizer];

- (void)onSliderTap:(UIGestureRecognizer *)gestureRecognizer { 
   // handle event
} 
```

或在滑块上添加一些操作：

```
[slider addTarget:self action:@selector(onTouchEnded:) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T08:50:10.810

您可以连接`UIControlEventTouchUpInside`而`-Outside`不是`-ValueChanged`（如果您现在正在这样做）。

**编辑**：或者，我会说更优雅一点，使用`UIControlEventValueChanged`，但也将事件作为参数提供给您的方法：

`[self.slider addTarget:self action:@selector(handleValueChanged:withEvent:) forControlEvents:UIControlEventValueChanged];`

然后检查触摸的相位，看它是否处于`ended`状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T09:03:39.293

找到了答案！

这些家伙帮了我很多忙：[检测 UISlider 上的触摸？](https://stackoverflow.com/questions/10971154/detecting-touches-on-a-uislider)

精度低：

相关滑块的动作分配给他：

```
[self.slider addTarget:self action:@selector(touchEnded:) forControlEvents:UIControlEventTouchUpInside | UIControlEventTouchUpOutside]; 
```

方法签名是：

```
- (IBAction)touchEnded:(id) sender 
```

使用情节提要，在我看来，将动作分配给滑块有点不同。

感谢您的回答！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T11:31:42.870

您必须将属性设置为连续。

包含一个布尔值，指示滑块值的变化是否会生成连续更新事件。

```
mySlider.continuous= NO; 
```

# silverlight - 带两个手柄的滑块- Silverlight

> ID：15997185
> 
> 赞同：0
> 
> 时间：2013-04-14T08:34:26.543
> 
> 标签：silverlight, slider

是否有可能在 silverlight 中获得带有两个手柄的滑块？我想用相同的滑块设置最大值和最小值。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T04:02:35.083

为此，您必须创建一个自定义控件。

这里有一个关于 StackOverflow 的问题，它在 Metro XAML 控件中解决了这个问题，但在 Silverlight 中应该不会有太大的不同。

[地铁中的范围滑块](https://stackoverflow.com/questions/9805526/range-slider-metro-style-app)

# android - 是否可以直接在 string.xml 中设置字符串的颜色？

> ID：15997186
> 
> 赞同：15
> 
> 时间：2013-04-14T08:34:26.713
> 
> 标签：android, string, colors

我的意思是：

```
<string name="error" color="#9a1d1d">Error!</string> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-14T08:48:10.907

正如 rekire 所建议的那样，无法按照您的方式设置颜色。

您可以使用 rekire 建议的方法。

在您的 xml 中，您可以将 textview 的颜色指定为

```
 android:textColor="#0EFFFF" 
```

您还可以以编程方式设置文本颜色

```
 TextView tv= (TextView)findviewById(R.id.textView1);
  tv.setTextColor(Color.RED); 
```

要在 textview 中设置特定单词的颜色，可以使用 spannable string

```
 TextView tv= (TextView)findviewById(R.id.textView1);
    tv.setText("");  
    String s="Hello World";
    SpannableString ss=  new SpannableString(s);                
    ss.setSpan(new ForegroundColorSpan(Color.GREEN), 0, 5, 0);  
    tv.setText(ss); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-07-27T13:58:30.787

在 4.x 之前，您可以这样做：

```
<string name="error"><font fgcolor="#ff9a1d1d">Error!</font></string> 
```

但是，错误[https://code.google.com/p/android/issues/detail?id=58192](https://code.google.com/p/android/issues/detail?id=58192)破坏了此功能，因为它引入了一个整数解析器，该解析器无法处理具有最高位集的数字，不幸的是你可以' t 省略颜色的不透明度部分（大多数人更愿意将其设置为 ff，如本例所示。）

我昨天才学会了一个聪明的解决方法。你所做的是否定二进制补码中的十六进制颜色值。你如何做到这一点取决于你的十六进制计算器，但最简单的方法是从 0x100000000 中减去你的颜色。在您的情况下，这将导致 0x100000000 - 0xff9a1d1d = 0x65e2e3。（或者您可以将其反转，例如 0065e2e2 足够接近）。然后你用减号再次否定它：

```
<string name="error"><font fgcolor="-#65e2e3">Error!</font></string> 
```

瞧！你有你想要的颜色。

感谢 TWiStErRob 在[https://stackoverflow.com/a/11577658/338479中解决这个问题](https://stackoverflow.com/a/11577658/338479)

ETA：我刚刚发现如果您在 2.x 系统上执行此操作会使您的应用程序崩溃；它抛出一个 NumberFormat 异常

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-11-03T11:34:16.200

试试这个

```
<string name="some_text">Font color is <font fgcolor="#ffff0000">red</font></string> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-11-10T05:48:41.173

将此代码放入`string.xml`文件中：

```
<font color="Red"><a href="support@legacystories.org">HERE</a></font> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-06-24T17:08:38.063

Its possible try this..

**string.xml**

```
<string name="colorText"><![CDATA[ Give your string here. Like, This sentence has a<b><font color=#FF0000>Red color</b> text.]]></string> 
```

**ExampleClass.java**

```
TextView colorTextView = (TextView)findViewById(R.id.colorText);
String customColorText = getResources().getString(R.string.colorText)
colorTextView.setText(Html.fromHtml(customColorText)); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-07-09T06:30:24.533

字符串.xml

```
<string name="pbs_setup_title">Select %1$s <font fgcolor="#FF33B5E5">brand</font> or scan the <font fgcolor="#FFFF0000">Remote</font></string> 
```

类.java

```
String SelectedDeviceType_Str = "TV"

SetupYourDevice_TextView.setText(Html.fromHtml(String.format(Html.toHtml(new SpannedString(getResources().getText(R.string.pbs_setup_title))),
                    SelectedDeviceType_Str))); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-04-14T08:36:33.110

不，这是不可能的，您必须在布局中指定。但是您可以将颜色放在您的 colors.xml 中。

**颜色.xml**

```
<color name="foo">#abc123</color> 
```

**your_layout.xml**

```
<TextView android:textColor="@color/foo" android:text="@string/error" /> 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-02-12T02:41:30.247

1.  在 values.xml 文件中创建颜色

    ```
     <color name ="red">#ff0000</color> 
    ```

2.  在您的 strings.xml 中执行类似的操作

    ```
     <string name="some_text">The next word is <font fgcolor="red">red</font> but that is all</string> 
    ```

我发现我不能直接在 strings.xml 中使用十六进制代码

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-07-24T03:46:40.717

根据我的经验，我在 strings.xml 中存储的颜色看起来像

> **`<color name="name_color">#ffffff</color>`**

当我有一个视图并设置`

> **nameView.setBackgroundColor(R.color.name_color);**

没关系。

但是当我为文本设置颜色时

> **name_TextView.setTextColor(R.color.name_color);**

这不是**效果**。

如果你遇到同样的问题，只需设置

> **name_TextView.setTextColor(Color.parseColor("你想要的颜色代码"));**

希望它有所帮助。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-06-28T05:34:26.610

**我希望这对你有帮助。**

```
 TextView textView=findViewById(R.id.text);

   String error= getResources().getString(R.string.error);
   ForegroundColorSpan fgColor=new ForegroundColorSpan(Color.RED);  // here set the color of Text

   SpannableString ss=new SpannableString(error);  //here set the text to spannableString

   ss.setSpan(fgColor,0,error.length(),Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);  //here which color , when to where you will set the color
   textView.setText(ss); 
```

**什么是 Android 中的 SpannableString？**

Android SpanableString 示例。android 中的 SpannableString 是在 TextView 中设置字符串样式的绝佳方式。简而言之，它允许 TextView 为不同的文本区域提供不同的样式。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-11-21T12:27:55.533

> 您可以通过以下方式更改文本颜色`string.xml`：

```
<string name="completed_running_not_alloted"><font fgcolor="#6DC287">Completed /</font><font fgcolor="#FFCC29"> Running /</font> Not Alloted</string> 
```

> 如果您想以编程方式设置文本，那么您可以使用它，它将动态呈现您的文本颜色。

```
 private SpannableStringBuilder setSpan(int completed, int running){
            SpannableStringBuilder span1 = new SpannableStringBuilder(completed+" / ");
            ForegroundColorSpan color1=new ForegroundColorSpan(Color.parseColor("#6DC287"));
            span1.setSpan(color1, 0, span1.length(), Spannable.SPAN_INCLUSIVE_INCLUSIVE);

            SpannableStringBuilder span2 = new SpannableStringBuilder(running+"");
            ForegroundColorSpan color2=new ForegroundColorSpan(Color.parseColor("#FFCC29"));
            span2.setSpan(color2, 0, span2.length(), Spannable.SPAN_INCLUSIVE_INCLUSIVE);

            Spanned concatenated=(Spanned) TextUtils.concat(span1, span2);

            return new SpannableStringBuilder(concatenated);
        } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-10-28T15:33:18.367

在 Strings.xml 中：

```
<resources>
        <color name="etDisabled">#ac8888</color>
        <color name="myorange">#f56415</color>
        <color name="mygreen">#95cd08</color>
  </resources> 
```

然后在代码中：

```
 TextView myText = (TextView) findViewById(R.id.tvJugador1);
  myText.setTextColor(R.color.mygreen); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-03-07T16:02:47.763

是否可以直接在 string.xml 中设置字符串的颜色？

对的，这是可能的...

不要使用十六进制代码或您在颜色中定义的颜色！在 Android Studio 中使用默认颜色。RED WHITE BLACK 并自动建议这样的颜色。如果您使用十六进制代码，则在 api 19 之前的 api 中文本将不可见

```
<string name="try"><font color="RED">This is blue color words </font> this default color words</string> 
```

对于 Android Stduio 其他 HTML 代码

```
<string name="try2"><b>Bold style words</b> And this not bold ;) </string>
<string name="try3"><u>Underline style words</u> And this not underline </string>
<string name="try4"><i>italic style words</i> And this not underline </string> 
```

来源：[https ://developer.android.com/guide/topics/resources/string-resource.html#escaping_quotes](https://developer.android.com/guide/topics/resources/string-resource.html#escaping_quotes)

# winapi - 访问冲突 - 代码 c0000005（！！！第二次机会！！！）

> ID：15997187
> 
> 赞同：1
> 
> 时间：2013-04-14T08:34:30.947
> 
> 标签：winapi, windows-7, kernel, driver, windbg

我正在尝试使用 windbg 和 vmware 进行内核调试。当我尝试为自己的驱动程序指定断点时，我得到了类似的输出

```
Access violation - code c0000005 (!!! second chance !!!)
nt!MmFreePagesFromMdl+0xc:
82879761 f6430601        test    byte ptr [ebx+6],1 
```

这是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-14T08:41:50.373

那是访问冲突，即您的代码尝试访问无效的内存地址，即异常代码 0xC0000005。

第二*个机会*部分是调试器术语。每次抛出异常时，它都会向调试器发出信号（如果存在），以防它想要做某事：这是第*一次机会*。如果调试器什么都不做，异常就会传递给应用程序，或者在你的情况下传递给内核。如果应用程序没有处理它，异常会再次传递给调试器：这是*第二次机会*。

通常，调试器会忽略第*一次机会*，但会在*第二次机会*时中断，但通常两者都有一个调试器选项。

# javascript - 我想确保输入是 Javascript 中的字符串

> ID：15997191
> 
> 赞同：0
> 
> 时间：2013-04-14T08:35:03.563
> 
> 标签：javascript, servlets

在一个网络项目中，我正在创建一个学生注册计划。

我有一个 .jsp 文件供学生注册，以便添加/删除等。

我应该如何修改我的 javascript 代码以检查以确保用户名输入只允许字符串？

这是我的 .jsp 文件的一部分：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>New User Registration</title>
    </head>
    <body>
    <form method="get" action="RegServlet">
        <h1>Register!</h1>
            Fill out information below:<p>                

            Username:
            <input type="text" name="userName" value =""><p>
<input type="submit" value="Finish!"><p>

    <script type="text/javascript">
        var var1 = "userName";
            if(var1 == (""))
                document.write("<bSystem doesn't like an empty string.....Try Again!!!</b>");
            else if(var1 == ("notmatch"))
                document.write("<b>Inappropriate input!!!.....Try Again!!!</b>"); 
```

还有一件事情：

单击“完成！”时，我不断收到 HTTP 状态 404 错误。它应该将我引导到我的 RegServlet.java 文件中指示的 login.jsp 文件，因为 form method="get" action="RegServlet" 应该为我执行此操作。但它似乎告诉我它找不到“/Registrar/RegServlet”路径。我究竟做错了什么？

这是我的一段 RegServlet 代码：

```
 public void doStuff(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException, InstantiationException, IllegalAccessException, SQLException {
    //see if search parameter is present        
    String userName = request.getParameter("userName");
    String passWord = request.getParameter("passWord");
    String lastName = request.getParameter("lastName");
    String firstName = request.getParameter("firstName");
    String age = request.getParameter("age");
    char sex = request.getParameter("sex").charAt(0);
    String email = request.getParameter("email");

    if(!userName.isEmpty()&&!passWord.isEmpty()&&!lastName.isEmpty()&&!firstName.isEmpty()&&!age.isEmpty()&& sex!='F' || sex!='M' &&!email.isEmpty()) {
        try {
            SaveToDB.createConnection();
            toDB.insertNewUser(userName, passWord, lastName, firstName, age, sex, email);
            RequestDispatcher view = request.getRequestDispatcher("login.jsp");
            view.forward(request, response);
        } catch(SQLException sqlEx) {
            System.out.println("Error!");
        }
    } else {
        RequestDispatcher view = request.getRequestDispatcher("index.jsp");
        view.forward(request, response);
    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T08:45:24.430

一句警告：对于您的程序，所有客户端验证都是徒劳的：您永远不能信任它，您也必须始终进行服务器端验证。但是对于您的程序客户端验证的用户来说是一种方便：更快的反馈。

查看 HTML5 表单：您现在只能使用 html 进行验证：

```
 <input type="text" name="userName"  pattern="^[A-Za-z ]+$" > 
```

看

[http://www.html5rocks.com/en/tutorials/forms/html5forms/#toc-validation](http://www.html5rocks.com/en/tutorials/forms/html5forms/#toc-validation)

如果您想在 javascript 中进行客户端验证，您必须首先了解“onsubmit”事件。

[http://www.smashingmagazine.com/2009/07/07/web-form-validation-best-practices-and-tutorials/](http://www.smashingmagazine.com/2009/07/07/web-form-validation-best-practices-and-tutorials/)很好地概述了所有技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T08:49:10.920

对输入字符串应用正则表达式并检查特殊字符。

这是特殊字符正则表达式的示例： [匹配符号的正则表达式：!$%^&*()_+|~-=`{}[]:";'<>?,./](https://stackoverflow.com/questions/8359566/regex-to-match-symbols)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T08:38:35.160

输入正确的`action`路径`<form method="get" action="RegServlet">`以避免 404 错误。尝试`<form method="get" action="/RegServlet">`

# java - 单个java线程在mac上使用两个内核？

> ID：15997195
> 
> 赞同：1
> 
> 时间：2013-04-14T08:35:35.903
> 
> 标签：java, multithreading, concurrency, core

例如，在 Java Concurrency in Practice 中，我读过“只有一个线程的程序一次最多可以在一个处理器上运行”。

但是，如果我在我的 2.5 GHz Intel Core 2 Duo Macbook Pro 上运行单线程 Java 类，我可以看到（在 Activity Monitor 中）两个内核的 CPU 使用率从接近 0 上升到 60% 左右。

mac OS 是否以某种方式将我的线程从一个内核切换到另一个内核，如果是，为什么？

谢谢！这是代码..

```
public class PrimeCalculator {

    public static void findPrimes (int start, int end){
        int countPrimes = 0;
        for (int i=start; i<end; i++){
            if (i % 1000000 == 0){
                System.out.println("Did a million..");
            }
            boolean found = true;
            for (int check = 2; check <= Math.sqrt(i); check++){
                if (i % check == 0){
                    found = false;
                    break;
                }
            }
            if (found == true){
                //System.out.println(i);
                countPrimes++;
            }
        }
        System.out.println("I counted "+countPrimes+" primes");
    }

    public static void main(String[] args){
        findPrimes(0,100000000);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T08:45:51.257

Java 线程可以一对一地映射到内核线程，但并非必须如此。您的操作系统可以无缘无故地将线程从一个内核交换到另一个内核。即使您只使用一个线程，JVM 也可以使用多个内核。

也许您可以在这里找到更多信息： [为什么单线程进程在多个处理器/内核上执行？](https://stackoverflow.com/questions/8485947/why-does-a-single-threaded-process-execute-on-several-processors-cores)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T08:47:40.570

您可以使用 jstack 命令查看线程行为。不要忘记 Java 也在后台创建了许多线程——主要的例子是 GC 线程、终结器、信号调度器等。

在我的 Mac 上，它显示大约 8 个线程 - 您的里程可能会有所不同。操作系统和 JDK 实现可以自由地将线程调度到他们想要的位置！

# prolog - Prolog arg 内置在个人实现中，不起作用

> ID：15997196
> 
> 赞同：0
> 
> 时间：2013-04-14T08:35:45.700
> 
> 标签：prolog

我在要求我在 Prolog中实现经典的**arg谓词的练习中遇到了一些麻烦。**

```
arg(?Arg, +Term, ?Value) 
```

其中 Arg 是 Term 参数列表中参数的索引。值它是这个参数的值。

例如：

```
arg(1, t(f(X),Y,a), Value)
Value = f(X). 
```

因为 f(x) 它是 t 主函子的参数列表中的第一个参数。

所以我试图以这种方式使用 univ =.. 谓词来解决练习：

```
argom(ArgIndex,Term,ValueArg):- Term =.. [_|ArgsList],
                            element_n(ArgIndex,ArgsList,ValueArg).

element_n(1,[ValueArg,_],ValueArg).

element_n(N,[_,Tail],ValueArg):- N1 is N-1,
                                 element_n(N1,Tail,ValueArg). 
```

其中**argom**关系是我个人对内置谓词**arg的实现......**

问题是解决方案不起作用......这个想法是我有一个**argom**谓词：

1.  **ArgIndex**：我将获得的参数的索引。
2.  **术语**是一个表达式，如：**f(a,b,c)**
3.  **ValueArg**：表示以**ArgIndex**为索引的参数的值

所以，如果我有**f(a,b,c)**作为**Term**并且**ArgIndex**是 1，那么**ArgValue**必须是**a**。

我使用**unive**内置谓词，从我的**Term**创建一个列表，其中头部是我的**Term**的主要仿函数，尾部（名为**ArgsList**）是主要仿函数的参数列表。

我将使用第 n 个参数，因此我将使用 ArgsList 中的第 n 个元素并获得它，我定义了**element_n**关系：ArgIndex、ArgsList、ValueArg。

如果我希望列表中的**第一个**元素**ArgIndex**值为 1 并且基本情况匹配：

```
 element_n(1,[ValueArg,_],ValueArg). 
```

所以 ValueArg 在我的 ArgsList 参数列表的头部并统一它。

否则调用规则获取ArgsList中的第n个元素

问题是，当我咨询它不起作用时，答案总是：如果我尝试获取第一个元素也会**失败**（这是我使用基本案例规则的最简单情况）

查看跟踪我有同样的情况：

```
[trace] 9 ?- argom(1,f(a,b,c),a).
   Call: (6) argom(1, f(a, b, c), a) ? creep
   Call: (7) f(a, b, c)=..[_G3148|_G3149] ? creep
   Exit: (7) f(a, b, c)=..[f, a, b, c] ? creep
   Call: (7) element_n(1, [a, b, c], a) ? creep
   Fail: (7) element_n(1, [a, b, c], a) ? creep
   Fail: (6) argom(1, f(a, b, c), a) ? creep
false. 
```

因此，它调用 argom 规则对它说：**“主函子的第一个参数是 a 是真的吗？”**

它以正确的方式使用**univ =..**内置谓词从我的 Term **f(a, b, c)生成列表****[f, a, b, c]**

 **现在它调用**element_n**谓词，这是基本情况，因此必须将**ValueArg**与**列表的头部**统一，但随后**失败**

我也尝试过问：**如果 ArgIndex 值为 1 且 Term 为 f(a,b,c)，ValueArg 的值是多少？**

```
[trace] 10 ?- argom(1,f(a,b,c),ValueArg).
   Call: (6) argom(1, f(a, b, c), _G3483) ? creep
   Call: (7) f(a, b, c)=..[_G3553|_G3554] ? creep
   Exit: (7) f(a, b, c)=..[f, a, b, c] ? creep
   Call: (7) element_n(1, [a, b, c], _G3483) ? creep
   Fail: (7) element_n(1, [a, b, c], _G3483) ? creep
   Fail: (6) argom(1, f(a, b, c), _G3483) ? creep
false. 
```

所以很明显，问题在于将列表的头部与此规则中的 ValueArg 统一起来似乎有些问题：

```
element_n(1,[ValueArg,_],ValueArg). 
```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:43:37.707

琐碎：是`[Head|Tail]`，不是`[Head,Tail]`。这：`[A,B]`匹配一个二元素列表！

另请参阅[此处](https://stackoverflow.com/questions/15990890/how-to-implement-arg-predicate-in-prolog/15992019#15992019)....**

# java - 带有 Web 服务器 + 应用程序服务器的 Java EE 应用程序

> ID：15997202
> 
> 赞同：17
> 
> 时间：2013-04-14T08:37:18.780
> 
> 标签：java, jakarta-ee, web-applications

Java EE 应用程序是否需要具有诸如 SUN Java Web Server 之类的 Web 服务器来处理 servlet/jsp 请求并转发到诸如 IBM WebSphere 或 BEA WebLogic 之类的应用程序服务器？

既然应用服务器也能够处理这样的 servlet/jsp？

这种服务器架构的优点/缺点是什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-14T09:10:36.783

**Apache Tomcat**、**Jetty**和**Sun Java System Web Server**只是 Java Web (Servlet) 容器，这意味着它们只能执行 Servlets/JSP——它们不提供完整的 Java EE API 堆栈。

因此，它们只能部署`.war`文件，而不是`.ear`（也包括`.jar`带有 EJB 的模块），并且不支持开箱即用的一些 Java EE API，如 JSF 或 CDI。或其他功能/API。[需要注意的是，从 Java EE6 开始，[`.war`文件可能包含 EJB](https://stackoverflow.com/questions/4441237/packaging-ejb-in-javaee-6-war-vs-ear)。[有关和](https://stackoverflow.com/questions/1594667/war-vs-ear-file)[的差异的更多信息`.war``.ear`](https://stackoverflow.com/questions/1594667/war-vs-ear-file)]。

每个 Java EE 服务器都有一个**Web Container + EJB Container**。（您可以[在此处](http://tomcat.apache.org/)和[此处](http://www.eclipse.org/jetty/)看到 Tomcat 和 Jetty 并不声称是 JavaEE 服务器，只是 servlet (web) 容器。）

**JBoss Application Server**使用**JbossWeb**（一个 Apache Tomcat 分支）作为其 Web 容器。它的 EJB 容器就是 JBoss（除了“JBoss EJB Container”之外，它们没有单独的名称）。

其他的（IBM WebSphere、Oracle/BEA WebLogic、TomEE、Glassfish）也有他们的 Web 容器 + EJB 容器。

TomEE 显然使用 Apache Tomcat 作为其 Web 容器。**Glassfish**还使用 Apache Tomcat 分支。（是的，Apache Tomcat 似乎很受欢迎 :)

在下面的讨论中，您可以将 Tomcat 更改为“Web Container”，将 JBoss 更改为“功能齐全的 Java EE 服务器”，只要它们出现。（为了清楚起见，我使用了产品的名称。）

![JavaEE 服务器容器](https://i.stack.imgur.com/MM4vi.gif)

^(图片：Java EE 服务器和容器 - 来源：Java EE 教程。)

> 让 Java Web 服务器（例如 Tomcat）处理 Servlet/JSP 调用并将更复杂的请求转发到 JBoss（或 IBM WebSphere 或 BEA WebLogic）等应用服务器有什么（缺点）优势？

## 从功能的角度来看，没有有效的收益

如果您将 Tomcat 放在JBoss*之前*，您实际上是在将 Tomcat 放在JBossWeb（Web 容器，因此是每个 Web 应用程序的入口）*之前*，JBossWeb（Web 容器，因此是每个 Web 应用程序的入口）始终位于 JBoss 的 EJB 容器之前。如果我们谈论的是功能，那只是多余的，因为我们有两次交付相同的服务。

## 切换实现者或集群功能

*如果仅将 JBoss 用于其 EJB 容器，则在 JBoss之前*放置 Tomcat是有意义的：那么，此处的选择将是 Web 容器实现器中的简单切换。

此外，如果 Tomcat 位于不同的网络节点（或多个 Tomcat/节点），则可以应用集群功能（否则无法应用，因为 JBossWeb 和 JBoss 通常被视为一个，因此位于同一台机器上） .

## 提供静态内容和安全问题

很常见的是**在****Java Web Container 之前****放置一个 Web 服务器**（例如 Apache HTTPD 或 IIS）。这样做的主要动机有两个：

 ***   **使 HTTPD 提供静态内容**（例如图像）并将其余内容转发到 Java Web 容器。这样做是因为 Web 服务器通常在交付静态内容的任务中得到了更好的优化。
*   **安全性：仅在 DMZ 中公开 HTTPD**。可以在 DMZ 设置 Apache HTTPD，并使其简单地将所有内容转发到 Web 容器（Tomcat 等）和 JavaEE 服务器（JBoss 等）。

如果想要增加安全性，那么在 DMZ 中使用 Web 容器是没有意义的：如果它正在为应用程序提供服务（即，将`.war`文件部署到其中），那么应用程序仍然是“易受攻击的”；如果它只是转发请求/响应，那么 Apache HTTPD 是一个更好的选择！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T09:01:21.793

Sun Java Web Server、IBM WebSphere Application Server、WebLogic、JBoss Application Server、Tomcat、Jetty……它们都是**Java Web Application Server**，做同样的事情——运行 WAR 或 EAR 打包的应用程序（EAR 代表“企业”，包含 1 个以上的 WAR）。

如果您的设置中有两台服务器来运行一个应用程序，那么您的部署策略/设计可能有问题。

存在多服务器设置的情况，但通常是负载平衡和代理设置，在 Java 应用程序服务器前面有 Apache HTTP 服务器。

例如，您有一个 Tomcat 在端口 8080 上为您的应用程序提供服务，并且您希望`http://myserver.com/myapp/`使用`http://myserver.com:8080/myapp/`. 你不能单独使用 Tomcat 来做到这一点，因为**Java 不能低于端口 1024** (*)。为此，您需要在端口 80 上设置 Apache HTTP Server 并将其配置`mod_proxy`为将所有流量`/myapp`从`http://myserver.com:8080/myapp`.

*：我不记得确切的数字，但大约是 1024。这适用于 Linux，但可能不适用于 Windows，我已经有一段时间没有使用 Windows 设置了。

**更新：我的错，我忘了强调**[这里描述](https://stackoverflow.com/questions/5544713/starting-tomcat-on-port-80-on-centos-release-5-5-final) 的“作为系统服务运行”部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T09:30:44.433

好吧，既然应用服务器已经在板上包含了 Servlet 容器，那么再拥有一个处理传入 http 请求的 Web 服务器是多余的。

然而，一旦我参与了这个项目，这些层是分开的。我们有 JBoss 服务器集群和独立的 Tomcat 服务器集群。Tomcat 通过具有负载平衡的 RMI 调用 JBoss。这样做是为了安全（Jboss 服务器在 VPN 中）和可扩展性。**

# c# - C#中的Register关键字是什么

> ID：15997203
> 
> 赞同：3
> 
> 时间：2013-04-14T08:37:21.770
> 
> 标签：c#, keyword

在 C# 中，我在函数上方看到这段代码，想知道它的真正含义是什么？

```
[Register ("AppDelegate")] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T08:40:51.757

那不是关键字，而是属性，因此您可能需要阅读它。该属性将被称为`RegisterAttribute`，我以前从未见过它。MSDN 似乎也不承认它的存在。因此可以得出结论，它不是 .NET 的一部分，因此我们无法知道它的功能（除非您正在使用其他库，在这种情况下您应该将它们包含在您的帖子中）。

另一个选项是在您自己的项目中定义的（也许您从其他人那里导入了代码），在这种情况下，您应该右键单击`Register`并选择“转到定义”* 以找到它的定义（感谢@WillemDuncan，这是一个更好的解决方案）。

* * *

* 在 MonoDevelop 中是“转到声明”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T08:42:15.560

在您的代码中搜索 class `RegisterAttribute`。.Net 不提供具有此名称的任何属性，它必须是在代码中某处定义的自定义[属性](http://msdn.microsoft.com/en-in/library/aa288454%28v=vs.71%29.aspx)`F12`（按注册，它将带您到属性的定义） -

```
public class RegisterAttribute : Attribute
{ } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-14T08:42:22.653

它不是关键字，它是*[属性](http://msdn.microsoft.com/en-us/library/z0w1kczw%28v=vs.110%29.aspx)*的语法。

> 属性可以放置在大多数任何声明中，尽管特定属性可能会限制其有效的声明类型。在 C# 中，您可以通过将属性名称放在方括号 ( `[]`) 中来指定属性，

由于 .NET 没有被调用的`Register`属性，因此这可能是自定义属性。如果您右键单击此属性并在 之后`"Go To Definition"`，您可能会找到一个自定义定义，例如；

```
public class Register : System.Attribute
{
    private string name;

    public Register(string name)
    {
        this.name = name;
    }
} 
```

您可以从[`Creating Custom Attributes`](http://msdn.microsoft.com/en-us/library/sw480ze8%28v=vs.110%29.aspx)

# string - 将字符串文字与另一个字符串连接起来

> ID：15997206
> 
> 赞同：4
> 
> 时间：2013-04-14T08:37:32.613
> 
> 标签：string, concatenation, rust

为什么我不能将字符串文字与字符串变量连接起来有什么原因吗？以下代码：

```
fn main() {
    let x = ~"abcd";
    io::println("Message: " + x);
} 
```

给出这个错误：

```
test2.rs:3:16: 3:31 error: binary operation + cannot be applied to type `&'static str`
test2.rs:3     io::println("Message: " + x);
                           ^~~~~~~~~~~~~~~
error: aborting due to previous error 
```

我想这是一个非常基本且非常常见的模式，`fmt!`在这种情况下使用只会带来不必要的混乱。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-05T03:47:49.543

在最新版本的 Rust (0.11) 中，波浪号 ( `~`) 运算符已被弃用。

以下是如何使用 0.11 版修复它的示例：

```
let mut foo = "bar".to_string();
foo = foo + "foo"; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-14T08:40:23.177

默认情况下，字符串文字具有静态生命周期，并且无法连接唯一向量和静态向量。使用唯一的文字字符串有助于：

```
fn main() {
    let x = ~"abcd";
    io::println(~"Message: " + x);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T13:07:21.157

只是添加到上面的答案，只要最右边的字符串是 ~str 类型，那么您可以向其中添加任何类型的字符串。

```
let x = ~"Hello" + @" " + &"World" + "!"; 
```

# jquery - 如何自定义struts-jquery-tags日历的大小

> ID：15997208
> 
> 赞同：1
> 
> 时间：2013-04-14T08:37:50.663
> 
> 标签：jquery, struts2, struts2-jquery

在我使用的 struts2 应用程序中`struts-jquery-tags`。使用这个标签库正在制作日历属性，但它看起来非常大。我想让它变小。但我没有办法做到这一点。

```
<sj:datepicker  name="date" label="Aggrement DATE" changeMonth="true" changeYear="true"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:10:13.220

您可以通过添加自己的样式来覆盖 jQuery UI 的默认样式表来做到这一点，就像标准的 jQuery DatePicker 一样：

将其放在jQuery CSS 导入*之后。*

```
<style>
   div.ui-datepicker {
      font-size: 62.5%;
   }
</style> 
```

你可以从头开始编写一个全新的 jQuery 主题，但通常你只需要覆盖一些属性，就像在这种情况下一样。

[在这里阅读更多](https://stackoverflow.com/questions/659588/how-to-resize-the-jquery-datepicker-control)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:07:26.820

我们可以使用 Firebug（Firefox 的 Awesome 插件）自定义 struts 日历或 datetimepicker，每个开发人员都应该知道这种方法。

[http://forums.java4s.com/Thread-How-to-change-the-color-of-datetimepicker-in-struts2](http://forums.java4s.com/Thread-How-to-change-the-color-of-datetimepicker-in-struts2)

检查此链接。

问候

# c# - 检查字符串是否包含相同的字符两次

> ID：15997212
> 
> 赞同：-3
> 
> 时间：2013-04-14T08:38:21.323
> 
> 标签：c#, string

如何检查字符串是否包含两次相同的单词？

就像是：

*   `" <Item> MyString <Item> <Item> MyString <Item> "`→`true`
*   `" <Item> MyString <Item> <Item> NotMyString <Item> "`→`false`
*   `" <Item> MyString <Item> <Fact> MyString <Fact> "`→`false`

我只在运行时获取原始字符串，它不一定是字符串中的第一批单词。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T08:41:16.277

您可以使用`string.Split()`which 将根据空格拆分字符串，然后您可以检查要比较的字符串的计数，看看它是否等于或大于`2`

```
string strToCompare = "MyString";
string str = " MyString MyString ";

if(str.Split().Count(r=> r == strToCompare) >= 2)
   //exists twice or more 
```

**编辑：**由于问题现在已被编辑。您可以尝试以下方法：

```
var duplicateArray = str.Split()
                        .GroupBy(r=> r) 
                        .Where(t=> t.Count() >= 2)
                        .ToArray(); 
```

上面的 Tha 将为您提供字符串中计数为两倍或更多的单词的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T08:46:46.197

```
string str = " MyString MyString ";

var result = str.Split(new[]{' '}, StringSplitOptions.RemoveEmptyEntries)
                .GroupBy(word => word)
                .Any(grp => grp.Count() > 1);

Console.WriteLine (result); // will print true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T08:55:51.520

如果要检查要使用两次的任何单词，请使用该`Split`函数将字符串转换为单词，然后`Group`获取计数：

```
string input = "MyString MyString";
var words = input.Split().GroupBy(s => s).ToDictionary(
                                                  g => g.Key, 
                                                  g => g.Count()
                                          ); 
```

字典`words`将是一组`key`和`value`对，其中键是单词，值是它在输入字符串中的次数。如果要查找多次出现的单词：

```
bool hasDuplicateWords = words.Any(w => w.Value > 1); 
```

要查找哪些单词出现多次：

```
var duplicateWords = words.Where(w => w.Value > 1); 
```

* * *

编辑：编辑您的问题后，您似乎不是在解析简单的字符串，而是在解析 XML 代码。您应该使用 XML 解析器来处理 XML，如下所示（未在编辑器中检查）：

```
var input = "<Item> MyString <Item> <Item> MyString <Item>";
var xml = XElement.Parse(input);

bool hasDuplicateWords = xml.Children
                            .GroupBy(x => x.Name)
                            .Any(x => x.Count() > 1); 
```

# python - 处理来自 blob GAE 的图像

> ID：15997213
> 
> 赞同：0
> 
> 时间：2013-04-14T08:38:31.747
> 
> 标签：python, image, google-app-engine, blob

我设法在 Google App 引擎 blob 中存储了一张图片（我可以在仪表板的 Blob 查看器中看到它，也可以在我的应用程序中使用服务处理程序看到它）.. 但是，现在我有这张图片..我想要在为客户提供服务时调整它的大小...问题是我不能这样做...我不能从那个 blob 中制作图像...这是我的代码：

```
from google.appengine.api import images

from google.appengine.ext import blobstore      
from google.appengine.ext.webapp import blobstore_handlers  
....
class Image(webapp2.RequestHandler):
def get(self,id):
    product = Product.by_id(int(id))
    logging.info('pic key is' + str(product.small_pic.key()))
    img = images.Image(blob_key=str(product.small_pic.key()))
    img.im_feeling_lucky() # do a transform, otherwise GAE complains.

    img.execute_transforms(output_encoding=images.JPEG,quality=1)
    if img:
        self.response.headers['Content-Type'] = 'image/png'
        self.response.out.write(img)
    else:
        self.error(404) 
```

上面的代码取自这个线程：[GAE: How to get the blob-image height](https://stackoverflow.com/questions/4796793/gae-how-to-get-the-blob-image-height/4798806#4798806)

当我从上面的 ex /img/373 运行代码时，我得到了错误：

**图像“http:../img/373”无法显示，因为它包含错误** 我该怎么做？..我想要找到在图像中转换该 blob 然后处理图像的方法。 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-09T03:32:53.487

第一个答案很接近。这种细微的改进使您可以明确地调整大小：

```
from google.appengine.api.images import get_serving_url
url = get_serving_url( "blobkey",size=1024) 
```

在上面的代码中，size=1024 将源 blob 图像的大小动态调整为最长边为 1024 像素，同时保持图像的原始比例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T16:10:21.577

您不需要通过应用程序传送该图像。gae 有一个调整图像大小的服务：

```
from google.appengine.api.images import get_serving_url
url = get_serving_url( "blobkey") 
```

[然后将https://developers.google.com/appengine/docs/python/images/functions#imgsize](https://developers.google.com/appengine/docs/python/images/functions#imgsize)值之一附加到该 url，就完成了。

# ios - 带有集合的核心数据实体

> ID：15997216
> 
> 赞同：0
> 
> 时间：2013-04-14T08:38:46.633
> 
> 标签：ios, objective-c, core-data, entity-relationship

我有一个包含许多字段的核心数据实体。其中一个应包含预定义颜色的列表。稍后我希望能够对这些颜色中的一种或多种应用谓词（例如：找到具有黑色和绿色的对象）。我的颜色列表将是静态的。

如何设计我的实体？我应该有一个具有关系的颜色实体吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T08:57:51.650

是的，我建议创建一个*Color*`colors`实体和从您的*Entity*到*Color*的一对多关系。

如果是预定义颜色的静态列表，您可以在创建持久存储时创建颜色实体。或者，您可以在应用程序启动时“查找或创建”颜色实体。

如果*Color*实体具有`name`属性，您可以找到具有颜色的对象

```
[NSPredicate predicateWithFormat:@"ANY colors.name = %@", @"red"]; 
```

要检查两种颜色，您可以使用

```
[NSPredicate predicateWithFormat:@"(ANY colors.name = %@) AND (ANY colors.name = %@)", @"black", @"green"]; 
```

或（我确实​​希望这是正确的:-)：

```
NSArray *colorNames = @[@"black", @"green"];
[NSPredicate predicateWithFormat:@"SUBQUERY(colors, $c, $c.name IN %@).@count >= 2", colorNames]; 
```

您还可以（如果需要）`UIColor color`向*颜色*条目添加属性，核心数据编程指南中的“[非标准持久属性”中描述了各种策略。](http://developer.apple.com/Mac/library/documentation/Cocoa/Conceptual/CoreData/Articles/cdNSAttributes.html#//apple_ref/doc/uid/TP40001919-SW1)

# php - 计算总行数

> ID：15997220
> 
> 赞同：0
> 
> 时间：2013-04-14T08:39:29.350
> 
> 标签：php, mysql

我确实希望用户能够看到他们上传了多少张图片。

此代码已到位：

```
$result = mysql_query("select count(1) from userid = '$userid' where FROM picture");
$row = mysql_fetch_array($result);

$total = $row[0];
echo "Total picture: " . $total; 
```

但它什么也没显示。当我删除'userid'时，它会计算图片表中的所有行。

我尝试过，但失败了。

错误：

> 警告：mysql_fetch_array() 期望参数 1 是资源，第 14 行给出的布尔值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:41:12.973

您可以通过以下方式执行此操作`mysql_num_rows`：

> [`mysql_num_rows`](http://php.net/manual/en/function.mysql-num-rows.php)— 获取结果中的行数

喜欢：

```
echo mysql_num_rows($result); 
```

并且该**`mysql_*` [API](http://en.wikipedia.org/wiki/Application_programming_interface)在 PHP 5.5 及更高版本中已弃用，因此请使用`PDO`或`mysqli`**.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T08:54:27.527

您的 SQL 查询不正确，因此`$result`不是行集。这就是为什么您在`mysql_fetch_array()`. 假设*，如果您`mysql_error()`在执行该查询后立即检查，这将告诉您发生的错误。

您的查询是：

```
select count(1) from userid = '$userid' where FROM picture 
```

你应该有类似的东西：

```
SELECT count(1) AS picture_count FROM picture WHERE userid = '$userid' 
```

然后你可以得到你的总数`$row['picture_count']`。

*正如其他人所建议的那样，这些`mysql_*`功能已被弃用。请参阅[PHP 手册](http://www.php.net/manual/en/intro.mysql.php)。

> 此扩展自 PHP 5.5.0 起已弃用，不推荐用于编写新代码，因为它将在未来被删除。相反，应该使用 mysqli 或 PDO_MySQL 扩展。在选择 MySQL API 时，另请参阅 MySQL API 概述以获得更多帮助。

[mySql 改进 (mysqli_*)](http://www.php.net/manual/en/book.mysqli.php)函数将最容易实现。

# spring-security - 配置 saml-sample (SP) 以使用 Okta (IdP)

> ID：15997221
> 
> 赞同：4
> 
> 时间：2013-04-14T08:39:41.860
> 
> 标签：spring-security, saml-2.0, spring-saml

Okta 是用于 SAML 登录的 IdP。我有一个 Okta 的超级管理员用户。

我尝试使用 Spring 的 saml-sample 项目作为我的 SP（服务提供者）。当我在 Okta 系统中配置它（spring-saml-sample）时，我需要在我的 SP 上提供一些数据，例如“回发 URL”、“收件人”和“受众限制”。

在阅读 Okta 的文档后，我发现了这一点：

**受众限制**——这是服务提供商的实体 ID。它将由 SP 提供并且必须完全匹配。请查阅 SP 文档以获取此信息。

**Recipient** – 输入服务提供者的断言消费者服务 URL。请查阅 SP 文档以获取此信息。所以我发现这个 URL 应该是： [http ://srv101.watchdox.net/spring-security-saml2-sample/saml/SSO/alias/defaultAlias](http://srv101.watchdox.net/spring-security-saml2-sample/saml/SSO/alias/defaultAlias)

**Post Back URL** – 这是 SAML SP 端点（即您的用户将登录的位置）

**SAML 响应的目的地**——这是 saml 断言的预期目的地。除非 SP 指定，否则这通常与回发 URL 相同。请查阅 SP 文档以获取此信息。

问题：

我的应用程序（spring-saml-sample）有一个“欢迎”页面，用户可以在其中选择他想要登录的 IdP。所以我选择“Okta”IdP，然后我被重定向到 Okta 登录（直到这里完美），但登录后，我没有将我重定向回我的应用程序（到受保护的资源），而是留在 Okta系统并查看他们的框架。我确实在那里看到了我的应用程序。当我点击它时，我会进入我的第一页，选择 IdP。

我认为问题出在我的 URL 或 SAML 响应上…… Anyonw 有想法吗？

在这里粘贴请求和响应，如果可能有帮助。

我在此处粘贴了 SAML 请求和响应，以防万一。请注意，响应中的状态代码是“成功”！

有什么问题？我错过了什么？

要求：

```
POST https://watchdox.okta.com/app/template_saml_2_0/k3gvyf0mGFVVCVQBYTTA/sso/saml HTTP/1.1
Host: watchdox.okta.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:20.0) Gecko/20100101 Firefox/20.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Referer: https://srv101.watchdox.net/spring-security-saml2-sample/saml/login/alias/defaultAlias?idp=http%3A%2F%2Fwww.okta.com%2Fk3gvyf0mGFVVCVQBYTTA
Content-Type: application/x-www-form-urlencoded
Content-Length: 3906

HTTP/?.? 200 OK
Server: nginx/1.2.6
Date: Thu, 18 Apr 2013 08:49:39 GMT
Content-Type: text/html;charset=utf-8
Transfer-Encoding: chunked
Connection: keep-alive
P3P: CP="HONK"
Set-Cookie: sid=""; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Path=/
t=default; Path=/
X-Okta-backend: webapp09e.prod.saasure.com
Cache-Control: no-cache, public
Pragma: no-cache
Expires: 0
Content-Language: en-US
Content-Encoding: gzip 
```

SAML 请求：

```
<saml2p:AuthnRequest xmlns:saml2p="urn:oasis:names:tc:SAML:2.0:protocol"
                     AssertionConsumerServiceURL="https://srv101.watchdox.net:443/spring-security-saml2-sample/saml/SSO/alias/defaultAlias"
                     Destination="https://watchdox.okta.com/app/template_saml_2_0/k3gvyf0mGFVVCVQBYTTA/sso/saml"
                     ForceAuthn="false"
                     ID="a32a5d9jfge33c9b46gdaddid8gd41b"
                     IsPassive="false"
                     IssueInstant="2013-04-18T08:49:38.141Z"
                     ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST"
                     Version="2.0"
                     >
    <saml2:Issuer xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion">com.watchdox.ohad</saml2:Issuer>
    <ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
        <ds:SignedInfo>
            <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
            <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1" />
            <ds:Reference URI="#a32a5d9jfge33c9b46gdaddid8gd41b">
                <ds:Transforms>
                    <ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature" />
                    <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                </ds:Transforms>
                <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
                <ds:DigestValue>blwZT1B5451jbzeB9m0ogyGQuFY=</ds:DigestValue>
            </ds:Reference>
        </ds:SignedInfo>
        <ds:SignatureValue>RZeXySsMfy+iBglUngrCHg2XoaA4WzAkLrB/zhjRfqFQS45avePlF8f19N+MHoFSirI08R08lXNJqdT/+0tKEujwsluCzFMnOCVPhtZIs7DblxqD+nR0XmF9+fKt91z/KQRtGLQtO/bsl3X3dmkUULGUWBxi8ga9jyTnkGwMFjE8J/Ba0P9eZjLV9YV/Piui/3B1XbhezVIIAvPNOpwQzK1kSA19bwlSejCjsf1Xe9kLXoCdf56ykjGDSdj2HpEVKQcjbu2nfPTFAXRTehx6h5qiKVl5R1DdDtFfq9EOXpZgy5pcu4bHqDhNAMwhZCu57fIIRR5IWuC6YUAXTDFXbg==</ds:SignatureValue>
        <ds:KeyInfo>
            <ds:X509Data>
                <ds:X509Certificate>MIIDUjCCAjqgAwIBAgIEUOLIQTANBgkqhkiG9w0BAQUFADBrMQswCQYDVQQGEwJGSTEQMA4GA1UE
CBMHVXVzaW1hYTERMA8GA1UEBxMISGVsc2lua2kxGDAWBgNVBAoTD1JNNSBTb2Z0d2FyZSBPeTEM
MAoGA1UECwwDUiZEMQ8wDQYDVQQDEwZhcG9sbG8wHhcNMTMwMTAxMTEyODAxWhcNMjIxMjMwMTEy
ODAxWjBrMQswCQYDVQQGEwJGSTEQMA4GA1UECBMHVXVzaW1hYTERMA8GA1UEBxMISGVsc2lua2kx
GDAWBgNVBAoTD1JNNSBTb2Z0d2FyZSBPeTEMMAoGA1UECwwDUiZEMQ8wDQYDVQQDEwZhcG9sbG8w
ggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCXqP0wqL2Ai1haeTj0alwsLafhrDtUt00E
5xc7kdD7PISRA270ZmpYMB4W24Uk2QkuwaBp6dI/yRdUvPfOT45YZrqIxMe2451PAQWtEKWF5Z13
F0J4/lB71TtrzyH94RnqSHXFfvRN8EY/rzuEzrpZrHdtNs9LRyLqcRTXMMO4z7QghBuxh3K5gu7K
qxpHx6No83WNZj4B3gvWLRWv05nbXh/F9YMeQClTX1iBNAhLQxWhwXMKB4u1iPQ/KSaal3R26pON
UUmu1qVtU1quQozSTPD8HvsDqGG19v2+/N3uf5dRYtvEPfwXN3wIY+/R93vBA6lnl5nTctZIRsyg
0Gv5AgMBAAEwDQYJKoZIhvcNAQEFBQADggEBAFQwAAYUjso1VwjDc2kypK/RRcB8bMAUUIG0hLGL
82IvnKouGixGqAcULwQKIvTs6uGmlgbSG6Gn5ROb2mlBztXqQ49zRvi5qWNRttir6eyqwRFGOM6A
8rxj3Jhxi2Vb/MJn7XzeVHHLzA1sV5hwl/2PLnaL2h9WyG9QwBbwtmkMEqUt/dgixKb1Rvby/tBu
RogWgPONNSACiW+Z5o8UdAOqNMZQozD/i1gOjBXoF0F5OksjQN7xoQZLj9xXefxCFQ69FPcFDeEW
bHwSoBy5hLPNALaEUoa5zPDwlixwRjFQTc5XXaRpgIjy/2gsL8+Y5QRhyXnLqgO67BlLYW/GuHE=</ds:X509Certificate>
            </ds:X509Data>
        </ds:KeyInfo>
    </ds:Signature>
</saml2p:AuthnRequest> 
```

奥克塔回应：

```
POST http://srv101.watchdox.net/spring-security-saml2-sample/ HTTP/1.1
Host: srv101.watchdox.net
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:20.0) Gecko/20100101 Firefox/20.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Content-Type: application/x-www-form-urlencoded
Content-Length: 7863

HTTP/?.? 302 Found
Date: Thu, 18 Apr 2013 08:51:57 GMT
Server: Apache
Location: https://srv101.watchdox.net/spring-security-saml2-sample/
Content-Length: 241
Keep-Alive: timeout=30, max=100
Connection: Keep-Alive
Content-Type: text/html; charset=iso-8859-1 
```

SAML 响应：

```
<saml2p:Response xmlns:saml2p="urn:oasis:names:tc:SAML:2.0:protocol"
                 Destination="http://srv101.watchdox.net/spring-security-saml2-sample/"
                 ID="id141234960903909491594058959"
                 InResponseTo="a32a5d9jfge33c9b46gdaddid8gd41b"
                 IssueInstant="2013-04-18T08:51:49.819Z"
                 Version="2.0"
                 >
    <saml2:Issuer xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion"
                  Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity"
                  >http://www.okta.com/k3gvyf0mGFVVCVQBYTTA</saml2:Issuer>
    <ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
        <ds:SignedInfo>
            <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
            <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1" />
            <ds:Reference URI="#id141234960903909491594058959">
                <ds:Transforms>
                    <ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature" />
                    <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                </ds:Transforms>
                <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
                <ds:DigestValue>nCrBE9jowt9QAOk5ipw1SFnb248=</ds:DigestValue>
            </ds:Reference>
        </ds:SignedInfo>
        <ds:SignatureValue>lwSHBmy4Hqt3XjbnPni6PePFFCn9hUJb7K4jh3xAyUum+y59TUYftphi00lFhnFZXsV5Tj75zLru3JX1jt7bdT73wsYS6ccNcyOvZpJvNiqbBeUmydK45DBrzIVxDA9CWS94+PTH4rrWT5+OEWURBxwhv9BiKiFrLb60YIp6Q3o=</ds:SignatureValue>
        <ds:KeyInfo>
            <ds:X509Data>
                <ds:X509Certificate>MIICmzCCAgSgAwIBAgIGAT1+4eJ9MA0GCSqGSIb3DQEBBQUAMIGQMQswCQYDVQQGEwJVUzETMBEG
A1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNU2FuIEZyYW5jaXNjbzENMAsGA1UECgwET2t0YTEU
MBIGA1UECwwLU1NPUHJvdmlkZXIxETAPBgNVBAMMCHdhdGNoZG94MRwwGgYJKoZIhvcNAQkBFg1p
bmZvQG9rdGEuY29tMB4XDTEzMDMxODE5MDE0NVoXDTQzMDMxODE5MDI0NVowgZAxCzAJBgNVBAYT
AlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1TYW4gRnJhbmNpc2NvMQ0wCwYDVQQK
DARPa3RhMRQwEgYDVQQLDAtTU09Qcm92aWRlcjERMA8GA1UEAwwId2F0Y2hkb3gxHDAaBgkqhkiG
9w0BCQEWDWluZm9Ab2t0YS5jb20wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAL/raSnE0EXQ
mPgkSwyv8HIDPpmvU6prdySiWJSB3YztIC29VuneZbT0dFAOjAy6e/3NN7HjvBQU83YjhgBA43+U
f/7kwC2V8e5qi92J/pTrAWPB/UmTbCEVoCkR4BxSXr4bJ3dhk6eIPDGgOiuWjNCMTXoYX+aS1tsA
JDx0bXf5AgMBAAEwDQYJKoZIhvcNAQEFBQADgYEAfiBOI+/mpP52Qsg6Ea1jVN/mGm4snvKl6Nlh
5sYGhGw5zXBVDU4pI9ulm/8QZsCAlYZXltZ+eif7CRzy2VZvDVMGH3g69AD2xHveYr8UNYSjnLyB
ZPpVJVOysH7UgtBqNcHm0l00g4uUV2d52WcDiz85q/KjTBB9OjRdGVhkcow=</ds:X509Certificate>
            </ds:X509Data>
        </ds:KeyInfo>
    </ds:Signature>
    <saml2p:Status xmlns:saml2p="urn:oasis:names:tc:SAML:2.0:protocol">
        <saml2p:StatusCode Value="urn:oasis:names:tc:SAML:2.0:status:Success" />
    </saml2p:Status>
    <saml2:Assertion xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion"
                     ID="id14123496090473949894445897"
                     IssueInstant="2013-04-18T08:51:49.819Z"
                     Version="2.0"
                     >
        <saml2:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity"
                      xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion"
                      >http://www.okta.com/k3gvyf0mGFVVCVQBYTTA</saml2:Issuer>
        <ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
            <ds:SignedInfo>
                <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1" />
                <ds:Reference URI="#id14123496090473949894445897">
                    <ds:Transforms>
                        <ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature" />
                        <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                    </ds:Transforms>
                    <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
                    <ds:DigestValue>D/wZzyBDL0RXwrf7d44mvuysYz0=</ds:DigestValue>
                </ds:Reference>
            </ds:SignedInfo>
            <ds:SignatureValue>DCrm/mkLiVsD8dAc4puY/L3GR1bxtDBn6+sTifLgxDGokFbS4PShjA3Ak6mTW1dM48TwXi1oB9Pz++iOP4w6ZVeBj9bWIPJaCATjWn26xBlt3GHaPjiOpUdvG5YwwqCMUlQ1+M0RhJDlkChfZbjPIKXibcP8TBIsj2sekr5sQSI=</ds:SignatureValue>
            <ds:KeyInfo>
                <ds:X509Data>
                    <ds:X509Certificate>MIICmzCCAgSgAwIBAgIGAT1+4eJ9MA0GCSqGSIb3DQEBBQUAMIGQMQswCQYDVQQGEwJVUzETMBEG
A1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNU2FuIEZyYW5jaXNjbzENMAsGA1UECgwET2t0YTEU
MBIGA1UECwwLU1NPUHJvdmlkZXIxETAPBgNVBAMMCHdhdGNoZG94MRwwGgYJKoZIhvcNAQkBFg1p
bmZvQG9rdGEuY29tMB4XDTEzMDMxODE5MDE0NVoXDTQzMDMxODE5MDI0NVowgZAxCzAJBgNVBAYT
AlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1TYW4gRnJhbmNpc2NvMQ0wCwYDVQQK
DARPa3RhMRQwEgYDVQQLDAtTU09Qcm92aWRlcjERMA8GA1UEAwwId2F0Y2hkb3gxHDAaBgkqhkiG
9w0BCQEWDWluZm9Ab2t0YS5jb20wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAL/raSnE0EXQ
mPgkSwyv8HIDPpmvU6prdySiWJSB3YztIC29VuneZbT0dFAOjAy6e/3NN7HjvBQU83YjhgBA43+U
f/7kwC2V8e5qi92J/pTrAWPB/UmTbCEVoCkR4BxSXr4bJ3dhk6eIPDGgOiuWjNCMTXoYX+aS1tsA
JDx0bXf5AgMBAAEwDQYJKoZIhvcNAQEFBQADgYEAfiBOI+/mpP52Qsg6Ea1jVN/mGm4snvKl6Nlh
5sYGhGw5zXBVDU4pI9ulm/8QZsCAlYZXltZ+eif7CRzy2VZvDVMGH3g69AD2xHveYr8UNYSjnLyB
ZPpVJVOysH7UgtBqNcHm0l00g4uUV2d52WcDiz85q/KjTBB9OjRdGVhkcow=</ds:X509Certificate>
                </ds:X509Data>
            </ds:KeyInfo>
        </ds:Signature>
        <saml2:Subject xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion">
            <saml2:NameID Format="urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified">OhadR@watchdox.com</saml2:NameID>
            <saml2:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer">
                <saml2:SubjectConfirmationData InResponseTo="a32a5d9jfge33c9b46gdaddid8gd41b"
                                               NotOnOrAfter="2013-04-18T08:56:49.819Z"
                                               Recipient="http://srv101.watchdox.net/spring-security-saml2-sample/saml/SSO/alias/defaultAlias"
                                               />
            </saml2:SubjectConfirmation>
        </saml2:Subject>
        <saml2:Conditions NotBefore="2013-04-18T08:46:49.819Z"
                          NotOnOrAfter="2013-04-18T08:56:49.819Z"
                          xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion"
                          >
            <saml2:AudienceRestriction>
                <saml2:Audience>com.watchdox.ohad</saml2:Audience>
            </saml2:AudienceRestriction>
        </saml2:Conditions>
        <saml2:AuthnStatement AuthnInstant="2013-04-18T08:51:49.819Z"
                              SessionIndex="a32a5d9jfge33c9b46gdaddid8gd41b"
                              xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion"
                              >
            <saml2:AuthnContext>
                <saml2:AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport</saml2:AuthnContextClassRef>
            </saml2:AuthnContext>
        </saml2:AuthnStatement>
    </saml2:Assertion>
</saml2p:Response> 
```

感谢您的任何回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T20:30:48.397

如果将来可能对某人有所帮助-我现在就可以使用了！

我将所有 3 个 URL 设置为同一个（正如您一周前建议的那样）： [https ://srv101.watchdox.net:443/spring-security-saml2-sample/saml/SSO/alias/defaultAlias](https://srv101.watchdox.net:443/spring-security-saml2-sample/saml/SSO/alias/defaultAlias)

那么有什么区别，为什么现在可以工作？因为到目前为止我输入的 URL 是 http 而不是 https（并且没有 443）： [http ://srv101.watchdox.net/spring-security-saml2-sample/saml/SSO/alias/defaultAlias](http://srv101.watchdox.net/spring-security-saml2-sample/saml/SSO/alias/defaultAlias)

# ruby-on-rails - Omniauth-facebook：检索用户位置

> ID：15997223
> 
> 赞同：3
> 
> 时间：2013-04-14T08:40:10.460
> 
> 标签：ruby-on-rails, facebook, omniauth

我的 config/initializers/omniauth.rb 中有以下配置

```
provider :facebook, id, secret, {scope: 'email, user_location, user_birthday', image_size: {width: 400, height: 400}} 
```

但身份验证哈希不附带用户的位置信息。

我按照指南阅读了 facebook 的文档，但不知道出了什么问题。有没有遗漏的步骤？

有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T05:37:15.590

将用户位置添加到您的`scope`只是意味着您的应用有权读取用户的位置。这并不意味着 FB 会发送给您。您需要进行 FB API 调用才能找到它。查看 Koala gem - 使用您从登录获得的 access_token 对其进行初始化，然后调用 FB 查找位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:01:57.203

为请求图 API 使用“考拉”宝石

并使用“/我/位置”请求

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-24T11:53:07.480

您必须准确指定在获取用户信息时应返回哪些字段。可以用`info_fields`参数来完成

```
provider :facebook, id, secret, {
    scope: 'email, user_location, user_birthday',
    image_size: {width: 400, height: 400},
    info_fields: 'email, name, location'
} 
```

# cmd - 在cmd中的一行之后添加一行

> ID：15997228
> 
> 赞同：-3
> 
> 时间：2013-04-14T08:41:02.070
> 
> 标签：cmd

好的，这里有一个文件 txt.txt

```
line1
line2
add after this line  blah blah blah
line4
etc
etc 
```

我想在这一行之后添加一行，但我不知道同一行后面的内容`add after this line`

我想知道的是我必须在 [this] 代码中进行的所有更改

```
@ECHO OFF
SETLOCAL
SET /p info="enter info : "
:: read addafter line
(
FOR /f "delims=" %%i IN (poison1.txt) DO (
SET addafter=%%i
FOR /f "delims=" %%n IN (' findstr /n "^" txtfile.txt') DO (
SET line=%%n
SETLOCAL ENABLEDELAYEDEXPANSION
SET line=!line:*:=!
ECHO(!line!
IF "!line!"=="!addafter!" TYPE your_multiline_addition.txt
ENDLOCAL
)
)
)>newfile.txt

FC newfile.txt txtfile.txt

GOTO :eof 
```

任何帮助深表感谢。

不知道如何在字符串操作中使用通配符

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:28:21.337

你知道你的行包含什么 - 它在`!line!`
你知道你想找到什么 - 它在`!addafter!`

所以 - 找出是否`!addafter!`在`!line!`所有你需要做的是

```
echo !line!|findstr "!addafter!" >nul
if errorlevel 1 (echo not found) else (echo found) 
```

所以请阅读显示的文档

```
findstr /? 
```

并计算出您需要用 ... 找到“开始”或“结束”的内容，是否需要不区分大小写以及是否需要将 search-for-me-string 用作文字或“正则表达式” "（注意默认情况下假定为正则表达式）以及是否要 * *C* *组合“带空格的字符串”或搜索“集合中的任何单词”而不 * *C* *将它们组合为单个字符串。

# blackberry - 用于启动 Blackberry Messenger (BBM) 的 URL 方案，例如 mailto 或 tel

> ID：15997236
> 
> 赞同：1
> 
> 时间：2013-04-14T08:42:18.873
> 
> 标签：blackberry, custom-url, bb-messenger

是否有可以在 Blackberry 手机上启动 Blackberry Messenger 的自定义 URL 方案？我正在寻找诸如“mailto”或“tel”之类的东西，单击它会打开 BBM，理想情况下让我预先填写文本：`<a href="bbm:?text=Hi there">share by BBM</a>`或类似内容。需要明确的是，这并不是我可以代表用户发送 BBM：这只是为了打开 BBM 应用程序，让用户单击在其 Blackberry 上查看的网页中的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T18:43:09.027

可以使用像 BBM 这样的 URL 开始聊天。PIN 应使用大写字符。如果用户不是 BBM 联系人，则会打开一张卡片供用户邀请该联系人成为 BBM 联系人。这不允许您提供文本。

如果您在 BlackBerry 10 上使用调用框架，则可以提供文本。有关详细信息，请参阅此页面。

[调用 BBM](https://developer.blackberry.com/html5/documentation/bbm.html)

# objective-c - 正确的视图控制器处理来自 UIImagePickerController 的图片

> ID：15997238
> 
> 赞同：0
> 
> 时间：2013-04-14T08:42:37.597
> 
> 标签：objective-c, uiimagepickercontroller

在家庭 vc 上，有一个按钮可以让用户选择图片。我想知道何时调用按钮方法的更好方法。

选项A：在根视图控制器上模态地呈现ImagePickerController，获取图片，并推送一个新的处理图片的视图控制器。

选项B：推送一个新的vc，以模态方式将ImagePicker添加到第二个视图控制器上，获取图片，并在同一个视图控制器上处理图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:12:11.303

如果您在返回根之前对图片有任何实质性工作，我建议您关注 B。有两个原因：

1.  它减少了根控制器中的特定代码
2.  如果您最终需要在其他地方执行此操作，它会更容易重用

另外，我建议让根注册自己作为新 VC 的委托，并在完成后让新 VC 调用委托方法。在这种情况下，这通常是控制器重用的最佳模式。

# ruby-on-rails - 网络错误：使用回形针、S3 设置

> ID：15997240
> 
> 赞同：1
> 
> 时间：2013-04-14T08:43:27.387
> 
> 标签：ruby-on-rails, amazon-s3, paperclip

**对于开发模式 - 它使用本地路径：** url: "/system/documents/:id/:filename", path: "same to local path"

**仅适用于生产模式**，它检查 s3 存储：：s3，s3_credentials：

只要我连接到互联网，它就可以正常工作，当我断开 wifi 并启动 localhost 时，我遇到了以下异常。当我连接回互联网时，它工作正常，甚至从本地目录中提取文件。

```
AWS::Core::Client::NetworkError: AWS::Core::Client::NetworkError
gems/aws-sdk-1.8.0/lib/aws/core/client.rb:318:in `return_or_raise' 
```

知道为什么在`localhost/development`模式下或当 wifi 断开连接时检查 s3 网络吗？

# ios - iOS 在上下文中渲染图像在横向中无法按预期工作

> ID：15997241
> 
> 赞同：0
> 
> 时间：2013-04-14T08:43:29.487
> 
> 标签：ios, render, cglayer, uigraphicscontext

下面的代码似乎可以很好地从视网膜分辨率的视图中渲染图像。问题是当我的设备处于横向时它似乎不起作用。它返回旋转 90 度的图像。

我需要为图像或上下文方向添加选项吗？

```
 CGSize panelRect = CGSizeMake(selectedPanelView.frame.size.width, selectedPanelView.frame.size.height);

    UIGraphicsBeginImageContextWithOptions(panelRect, 1, 2);

    [[selectedPanelView layer] renderInContext:UIGraphicsGetCurrentContext()];
    renderedImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T04:31:41.077

问题似乎可以通过使用来解决：`UIImage imageWithCGImage:scale:orientation:`如下。

```
UIImage *renderedImageWithOrientation = [UIImage imageWithCGImage:renderedImage.CGImage scale:1 orientation:0]; 
```

我在渲染图像后运行它，然后将图像添加到 imageView。

# node.js - 使用带有 node.js 的 jquery AJAX，处理来自服务器的响应

> ID：15997243
> 
> 赞同：10
> 
> 时间：2013-04-14T08:43:47.333
> 
> 标签：node.js, jquery, express

这是我第一次在这里发布问题，我大多只是潜伏在其他问题上，但这是我一直试图弄清楚的事情，而且我一生都做不到。

基本上，我正在做的是从客户端使用 AJAX 跳转到服务器，运行一些代码来搜索外部 API，从而为我提供一些数据，然后我需要将这些数据返回给客户端。这是我的代码......这都是使用 node.js 和 express

**客户端**

```
$('#search').click(function(){
        $.ajax({
          type: "GET",
          url: "/search",
          dataType: "json"
        }).done (function (data) {
          alert(data);
        });
    }); 
```

**服务器端**

```
app.get('/search', function(req, res){
        factual.get('/t/places',{q:'starbucks'}, function (error, data) {
          console.log(data);
          res.send(data);
        });
  }); 
```

现在我知道，当单击#search 按钮时，它会转到服务器并成功运行该代码。但我不知道如何将这些数据从服务器中取出并返回到客户端以在那里使用它。

我发现了其他提到诸如 res.send/res.write/res.end 之类的帖子，据我所知，我已经尝试了所有这些形式，但我似乎永远无法将这些数据返回给客户端。

非常感谢任何提示或可能更好的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-12T16:25:55.320

尝试以下代码服务器端：

```
app.get('/search', function(req, res){
    factual.get('/t/places',{q:'starbucks'}, function (error, data) {
      console.log(data);
      res.writeHead(200, { 'Content-Type': 'application/json' }); 
      res.end(JSON.stringify(data));
    });
}); 
```

它应该工作。代码客户端看起来不错。

**编辑：**您也可以使用：

```
res.json(data); 
```

# oauth - 如何使用 sencha touch 使用linkedin API

> ID：15997245
> 
> 赞同：8
> 
> 时间：2013-04-14T08:44:08.663
> 
> 标签：oauth, sencha-touch-2.1, linkedin-jsapi

我想使用linkedin API集成登录，我们如何使用sencha touch 2.1.1使用linkedin Oauth？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-30T16:21:18.463

此处详细介绍了如何登录 LinkedIn 的分步过程：- [https://developer.linkedin.com/documents/sign-linkedin](https://developer.linkedin.com/documents/sign-linkedin)

从该文档中 - 您应该能够使用任何基于 JavaScript 的程序登录 - 包括 Sencha Touch。

# android - Android - 应用列表

> ID：15997246
> 
> 赞同：0
> 
> 时间：2013-04-14T08:44:17.517
> 
> 标签：android

我正在尝试制作一个应用程序，其中向用户显示已安装应用程序的列表，每个应用程序都在一个单独的复选框中。如果检查了一个应用程序，然后再打开，我如何在用户选择的应用程序打开时触发事件。我在这方面是一个完全的新手，因此代码或教程将不胜感激，因为我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T09:44:20.357

您想使用[PackageManager](http://developer.android.com/reference/android/content/pm/PackageManager.html) `getInstalledApplications()`或`getInstalledPackages()`获取已安装应用程序的列表。

我不明白你问题的以下部分：

> 如果检查了一个应用程序，然后再打开，我如何在用户选择的应用程序打开时触发事件。

听起来您想打开用户打开的确切应用程序，但这可能不是您的意思。

# javascript - 打开另一个页面时运行 javascript

> ID：15997248
> 
> 赞同：1
> 
> 时间：2013-04-14T08:45:10.927
> 
> 标签：javascript

我想从 javascript 打开另一个网页（如默认导航，而不是全屏 iframe 或 window.open）并在加载时运行一些 javascript 代码。

脚步：

1.  定义一个javascript函数
2.  导航到另一个页面
3.  浏览器在新页面上下文中运行功能

有没有办法做到这一点？我记得的唯一方法是通过使用ajax 加载页面并替换document.body.innerHtml 来模拟这一点，然后运行该函数，但这不会改变location.href，因此例如后退按钮或书签将不起作用。还必须在加载时重写相关链接等...

PS：我知道这会是一些丑陋的 XSS，但例如在编写加载页面并自动填写表单的小书签时需要它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T08:49:19.340

不，你不能那样做。这将允许你做一些事情，比如在幕后窃取 cookie 以进行会话劫持，所以根本没有浏览器允许你这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T09:09:30.807

如果您从自己的服务器加载其他页面，则可以执行所有这些操作：

假设你想在你的站点[http://mine.org中加载](http://mine.org)[http://other.com](http://other.com) 你编写了一个小的服务器端脚本，你可以像这样调用它： [http://mine.org/load.php?site1](http://mine.org/load.php?site1) （使用您要加载的所有站点的 URL 在 load.php 或某些数据库中列出）

但是现在您的站点存在安全问题：嵌入在 [http://other.com](http://other.com)中的 javascript 在您的站点上下文中运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T08:49:27.663

虽然可能有一些合法的用例，但出于安全原因，除非新页面位于同一域中，否则您不能这样做。

如果目标浏览器支持扩展，您可以做的是编写浏览器扩展，

或者告诉用户打开目标页面，并在该上下文中使用您的书签。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-14T09:13:02.640

OK，研究结果：

不可能的方法：

*   使用一些持久性功能在新页面上运行（就像我在问题中建议的那样）
*   使用 iframe 替换整个页面（丑陋且被大多数浏览器禁止）

矫枉过正的方法：

*   写一个浏览器插件
*   让远程页面所有者接受一些 GET 参数并为你做这些事情

剩下的方法一，需要用户交互：

```
(function(){
  if(self.location.href!=targetlocation){
    window.alert("Please run this bookmarklet again upon loading the page.");
    self.location.href=targetlocation;
  }else{
    doSomething();
  }
  return false;
})(); 
```

剩下的方法2，做一些讨厌的代理的东西：

*   编写一些 php/etc 脚本来“代理”目标页面
*   现在你可以：
    *   使用 iframe，因为它不再是跨站点的
    *   在交付给浏览器之前重写页面服务器端（自己做“矫枉过正的方法：GET参数”）

例子：

```
<?php //USAGE: ?uri=http://www.google.com&search[0]=L2dvb2dsZS8K&replace[0]=dGVzdAo=
  $page=file_get_contents($_GET["uri"]);
  $count = min(count($_GET["search"]),count($_GET["replace"]),100);
  for ($i = 0; $i < $count; $i++) {
    $page=preg_replace(base64_decode($_GET["search"][$i]),
                       base64_decode($_GET["replace"][$i]), $page);
  }
  echo $page;
?> 
```

# java - 如何在 JFreeChart 中显示过滤后的数据

> ID：15997251
> 
> 赞同：0
> 
> 时间：2013-04-14T08:45:33.123
> 
> 标签：java, mysql, jfreechart

我的问题是我无法在 JFreeChart 中显示按日期从数据库中过滤的数据。从数据库过滤工作正常，并显示在控制台上。但是如何将该数据插入数据集中的系列中。我仍在努力解决这个问题。我希望你们能提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T09:24:22.083

您可能会查看[`JDBCXYDataset`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/data/jdbc/JDBCXYDataset.html)，它可以检测基于元数据的时间序列。点击类名可以查看对应的源码，[例如](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/data/jdbc/JDBCXYDataset.html).

# jquery - 工具提示不起作用 jquery UI

> ID：15997252
> 
> 赞同：1
> 
> 时间：2013-04-14T08:45:36.263
> 
> 标签：jquery, jquery-ui, asp.net-mvc-4, tooltip

我正在尝试将 jQuery UI 工具提示加载到 MVC4 视图中的网页中，但出现错误：

**未捕获的类型错误：对象 [对象对象] 没有方法“工具提示”**

我正在使用 jQuery 1.9.1 和 jQuery-UI 1.10.2，据我所知应该允许我使用工具提示？查看 Chrome 中的 Sources 选项卡，我可以看到 jQuery 和 jQuery-UI JavaScript 文件以及 jQuery-UI css 文件。

这是我正在使用的标记：

```
<link href="@Url.Content("~/Content/themes/base/jquery-ui.css")" rel="stylesheet" type="text/css" />
<script src="../../Scripts/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery-ui-1.10.2.min.js" type="text/javascript"></script>
<script src="../../Scripts/TableCreationScript.js"></script>

<script>
    $(function () {
        $(document).tooltip();
    });
</script> 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:56:00.270

我最好的猜测是：

我很确定`../../Scripts`如果 url 与`www.domain.com/app_path/controller/action`

../ 与 url rewrite 一起加入不是你的朋友。**../ 正在处理相**对于当前 url的路径。

想象一下：

*   如果您当前的 url 是`http://www.example.com/app_path/home/index/`，那么`../../Scripts/jquery-ui-1.10.2.min.js`将转换为：`http://www.example.com/app_path/Scripts/jquery-ui-1.10.2.min.js`这很好。但是，如果您的 url 是：`http://www.example.com/app_path/home/`那么脚本`http://www.example.com/Scripts/jquery-ui-1.10.2.min.js`甚至会在您的应用程序之外。

ASP.NET 有一种处理**应用程序相关**url-s 的方法：

```
<link href="@Url.Content("~/Content/themes/base/jquery-ui.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/jquery-1.9.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.10.2.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/TableCreationScript.js")"></script>

<script>
    $(function () {
        $(document).tooltip();
    });
</script> 
```

**编辑**：

现在阅读评论后，我很确定脚本文件的 url 在某种程度上是错误的。您需要检查是否正确引用并找到了 javascript 文件：

请执行下列操作：

*   在合适的浏览器中打开文档的 html 源代码。
*   检查脚本 URL 指向的位置。（例如在 Firefox 中，您可以单击源中的 url，然后您可以查看指向站点的源。
*   在您的情况下，单击脚本的 url 需要将您带到脚本文件的来源！
*   如果它显示了 html 文件的来源，那么您很可能正在查看`404 Not Found`

或者你可以：

*   检查*chrome 开发人员工具*中的网络选项卡。您应该能够查看所有内容是否正确加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T09:24:23.240

感谢您的帮助，OhgodWhy 的控制台评论让我得到了这个答案：[MVC4 jQuery UI does not work](https://stackoverflow.com/questions/13112519/mvc4-jquery-ui-does-not-work)

现在它可以工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-17T00:42:31.493

好的，我找到了解决方案，但不明白为什么......

```
 <asp:ScriptManager runat="server">
        <Scripts>
            <%--Framework Scripts--%>
            <asp:ScriptReference Name="jquery" />
            <asp:ScriptReference Name="bootstrap" />

            <%--Site Scripts--%>
        </Scripts>
    </asp:ScriptManager> makes things work while... 
```

以下解决/加载脚本但不起作用...

```
<link href="../Content/bootstrap-theme.min.css" rel="stylesheet" />
<link href="../Content/bootstrap.min.css" rel="stylesheet" />
<script src="../Scripts/jquery-2.1.4.min.js"></script>
<script src="../Scripts/bootstrap.min.js"></script> 
```

# android - Android中带有线程的自定义视图和进度对话框

> ID：15997257
> 
> 赞同：0
> 
> 时间：2013-04-14T08:45:59.403
> 
> 标签：android, multithreading, progressdialog, android-custom-view

我有一个自定义视图，可以在上面绘制不同大小的文字和图像。因为我需要对各种用户操作执行各种计算并且它们可以持续 3-4 秒，所以我需要实现一种在用户等待时显示进度对话框的方法。

场景是这样的：例如，用户添加了一些文本和图像，我需要调整它们的大小，直到它们适合可用视图的空间。这一切都是在我的自定义视图的方法上完成的。

在我的情况下，使用线程和不确定进度对话框的最佳方法是什么？

我应该使用 asynctask 并在每次进行操作时调用它吗？使用简单的线程？我从未在视图中使用过任何线程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:13:49.757

你基本上有两个选择。很难判断哪个是最好的。

`AsyncTask`这里当然是一个选择。好的部分是它为您构建了与您的 UI 的同步。它将计算结果从`doInBackground()`（同时运行）传递到`onPostExecute()`（在 UI 线程上运行），以便您可以执行计算并安全地更新 UI。它还允许您通过`publisProgress()`/`onProgressUpdate()`方法对指示 UI 线程上的后台处理进度。

但是：AsyncTask 的行为在 API 1 和 API 17 之间发生了两次变化。根据设备运行的 Android 版本，默认情况下，多个 AsyncTask 可以并行运行或不并行运行。如果这对您很重要，您将不得不使用`executeOnExecutor()`；此调用是为 API 11 引入的，这意味着如果您想在 11 之前支持 API，则必须处理反射。

您的第二个选择是有一个明确的 worker `Thread`。这种方法的吸引力在于您有一个专门的线程来处理您的应用程序中经常发生的任务并且需要在后台完成。但是，您必须自己处理所有 UI 同步问题。如果你有纪律，这并不难。如果您的 Thread 知道`View`需要修改的对象，它可以使用`View.post()`, `View.postDelayed()`etc 方法来调度引用视图并将在 UI 线程上执行的代码片段。

无论您选择哪种方法，您还面临两种影响。

*   Android 将以后台优先级运行你`Thread`和你`AsyncTask`的，如果它们是 CPU 密集型的，如果你不调整它，将导致十倍的执行时间。有关详细讨论，请参阅[我对 AsyncTask 的回答，它必须承受这样的性能损失吗……？](https://stackoverflow.com/a/14217816/1856738).

*   您需要注意异步任务中的 View 引用。视图可能不再存在，因为用户按下*后退*或由于配置更改（例如设备旋转）而重新创建了您的活动。这意味着您经常为用户提供一种方法来启动许多线程，方法是非常快速地离开和重新进入您的活动，添加越来越多的线程来保存对不再可见的 View 对象的引用。如果你想变得聪明并且你的计算需要很长时间，你可能（这真的取决于）想要将你的线程重新附加到新的活动。如果您确保 Thread 以干净的方式结束并释放所有资源（如果您的 Activity 早已不复存在），则暂时忽略这一点是安全的。

# android - 将 matplotlib 集成到 Android 应用程序中？

> ID：15997259
> 
> 赞同：3
> 
> 时间：2013-04-14T08:46:34.633
> 
> 标签：android, python, matplotlib

我已经使用 python 和 matplotlib 玩了一段时间，并设法创建了一些简洁的桌面应用程序。[如线性代数的图形分析工具、地图的渲染引擎等。

我想知道我是否可以将这些应用程序变成安卓应用程序。我对android完全陌生。我计划使用 python（虽然我擅长 java）进行编码（我知道这可以通过 kivy 或 SL4P 等工具实现）。

我想知道在 android 中使用这些工具的限制。我什至可以将 matplotlib 放入 android 中吗？我到处搜索，但找不到如何使用基于 matplotlib 的 android 应用程序。

任何类型的指针都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:13:50.370

我怀疑您是否可以在 Android 设备（或任何其他类型的智能手机或平板电脑）上嵌入[matplotlib 。](http://matplotlib.org/)

另一种可能性是让您的应用程序连接到具有 matplotlib 的后端服务器，并使用它来生成图形并将图像发送回客户端。

*   优势：通过重用现有代码，可能会很快完成一个工作移动原型。
*   缺点：该应用程序无法离线工作，因为它依赖于您的中央服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-27T03:24:14.233

Matplotlib 不能为 android 编译，但 numpy 可以：

[https://code.google.com/p/android-scripting/issues/detail?id=260](https://code.google.com/p/android-scripting/issues/detail?id=260)

# java - 一个 List 变成空的，没有在 java 中修改它

> ID：15997261
> 
> 赞同：-1
> 
> 时间：2013-04-14T08:46:41.983
> 
> 标签：java, list

目前，我遇到了一个似乎是意外错误的问题。我正在使用 java 语言进行编程，使用 eclipse 作为 IDE。

有问题的名单声明如下：

```
private final List<Integer> resList; 
```

使用`eclipse`调试程序的“Watchpoint”功能，我看到了如下过程：`resList`List 两次返回后，第三次返回前，List 突然变空。

如果有人有建议给我以解决该问题，我会很高兴吗？

关于代码，我发布了所有访问 resList 列表并在程序中调用的方法：

这是第一个：

```
public CloudInformationService(String name) throws Exception {
        super(name);
        resList = new LinkedList<Integer>();
        arList = new LinkedList<Integer>();
        gisList = new LinkedList<Integer>();
    } 
```

第二个：

```
public void processEvent(SimEvent ev) {
        int id = -1;  // requester id
        switch (ev.getTag()) {
                ...
                    // A resource is requesting to register.
            case CloudSimTags.REGISTER_RESOURCE:
            resList.add((Integer) ev.getData());
            break;
                ...
            }
    } 
```

最后，第三个：

```
private static CloudInformationService cis;
    public static List<Integer> getCloudResourceList() {
        if (cis == null) {
            return null;
        }

        return cis.getList();// The implementation of this method is listed below
    }

    public List<Integer> getList() {
            return resList;
    } 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:29:54.100

第一步：使用 ctrl+alt+H 查找对 resList 的引用，并查找调用 remove、clear、removeAll 的方法。如果使用 resList 的方法太多，请转到第 2 步。

第二步：在 CloudInformationServices 构造函数中设置断点，当命中时，在所有 remove、clear、removeAll 方法中的 LinkedList/AbstractList（在 JDK 中）设置断点。在断点视图中，右键单击 resList 并选择实例断点。选择所有删除、清除、removeAll 断点并继续执行。现在您将获得断点命中，并且可以从列表被清空的位置观察。

如果没有更多的代码，恐怕您无法获得太多帮助。

# google-chrome-extension - 如何只允许两个域的扩展？

> ID：15997266
> 
> 赞同：0
> 
> 时间：2013-04-14T08:47:57.020
> 
> 标签：google-chrome-extension

我写了一个谷歌浏览器扩展。没关系，现在可以使用，但我希望扩展只在两个域上可用，因为它只为这两个网站编写，对其他人无用。有一个`context menu`唯一的。现在它甚至还没有弹出，或者右上角的操作按钮（默认隐藏）。怎样才能做到这一点？

我当前的**manifest.json**：

```
{
  "manifest_version": 2,
  "background": {
    "scripts": ["scripts/jquery.min.js", "scripts/background.js"]
  },
  "name": "Export Entries",
  "description": "some descriptions here",
  "version": "1.0",

  "icons": {
    "16": "images/logo.png",
    "48": "images/logo.png",
    "128": "images/logo.png"
  },
  "permissions": ["downloads", "tabs", "contextMenus", "http://my-own-domain-accessed-via-ajax-for-creating-some-files-there.com/*"],
  "content_scripts": [{
    "matches": ["*://allowed-domain1.com/*", "*://allowed-domain2.com/*"],
    "css": ["styles/style.css"],
    "js": ["scripts/jquery.min.js", "scripts/popup.js", "scripts/background.js"],
    "run_at": "document_end"
  }],
  "web_accessible_resources": [
    "images/logo.png"
  ]
} 
```

据我了解，不能绝对禁用扩展程序，它的进程将再次在后台运行。但这不是问题。我只想不在其他网站上显示上下文菜单项。

**background.js**创建上下文菜单项并处理其单击事件：

```
function exportEntries(info, tab) {
  if (info['linkUrl'].indexOf('domain1.com/user/') > -1) {
    var user = info['linkUrl'].substr('27');
  } else {
    var user = null; // export all entries from this topic
  }

  $.ajax({
    url: 'http://my-own-domain-which-creates-the-file.eu/exportEntries/create.php',
    method: 'POST',
    data: {
      topic: tab.url,
      user: user
    }
  }).done(function(url) {
    forceDownload(url);
  });
}

function forceDownload(url) {
  var filename = url.replace(/^.*\/|\.[^.]*$/g, '');

  chrome.downloads.download({
      url: url,
      saveAs: true
    }, // options array
    function(id) {
      // callback function
    }
  );
};

document.addEventListener('DOMContentLoaded', function() {
  chrome.contextMenus.create({
    'title': 'Export Entries',
    'contexts': ['link'],
    'onclick': function(info, tab) {
      exportEntries(info, tab);
    }
  });
}); 
```

**create.php**在我自己的域上。它只是获取当前页面的 URL 和用户的昵称。然后为给定用户导出给定主题的所有条目（即页面 ​​URL），创建一个文件（.txt、.pdf 等）并发回 url 以下载文件。

**popup.html**、**popup.js**、**css 文件**和其他东西暂时不用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T10:11:10.557

删除所有内容脚本，它们没有用，因为[`chrome.contextMenus`](https://developer.chrome.com/extensions/contextMenus.html)API 只能在后台页面上使用。

要将上下文菜单条目限制为某些域，`documentUrlPatterns`请在创建上下文菜单时使用以下键指定键[`chrome.contextMenus.create`](https://developer.chrome.com/extensions/contextMenus.html#method-create)：

```
chrome.contextMenus.create({
    'title': 'Export Entries',
    'contexts': ['link'],
    'onclick': function(info, tab) {
        exportEntries(info, tab);
    }**,
    'documentUrlPatterns': [
        '*://allowed-domain1.com/*',
        '*://allowed-domain2.com/*'
    ]**
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T08:59:53.830

根据[内容脚本文档](http://developer.chrome.com/extensions/content_scripts.html)：

“如果您只想偶尔注入代码，请改用权限字段，如[Programmatic injection](http://developer.chrome.com/extensions/content_scripts.html#pi)中所述。”

所以而不是

```
"content_scripts": [
  {
     "matches": [ "http://allowed-domain.com" ]
  }
], 
```

利用

```
permissions: [
  "tabs", "http://allowed-domain.com"
], 
```

# c# - 在 C# 中映射网络驱动器路径

> ID：15997271
> 
> 赞同：2
> 
> 时间：2013-04-14T08:48:13.040
> 
> 标签：c#

我想将映射网络驱动器的路径添加到 C# 代码中，并在用户单击它时链接它会自动打开我的代码的驱动器路径

```
IWshNetwork_Class network = new IWshNetwork_Class();
network.MapNetworkDrive("Z:", @"\\ms\temp");
string message1 = @"[1] Go to C:\" + Environment.NewLine + "[2] Replace Folder \"myTeX\" with myTeX exist in" + network + Environment.NewLine + "[3] Open Start menu-->All Programs-->MiKTeX 2.8-->Maintenance-->Settings-->Click on \"Refresh FNDB\" button then wait the process and try again, Good Luck ";
richTextBox2.Text = message1; 
```

但是此代码无法正常工作，因为出现在中的名称`message1`就像

```
[1] Go to C:\
[2] Replace Folder "myTeX" with myTeX exist inSystem.__ComObject
[3] Open Start menu-->All Programs-->MiKTeX 2.8-->Maintenance-->Settings-->Click on "Refresh FNDB" button then wait the process and try again, Good Luck 
```

所以`System._ComObject`应该`\\ms\temp`和链接，因为当用户点击它去驱动器`\\ms\temp`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T19:58:09.040

如果您使用本机 WINAPI 调用来实现您想要的，而不是脚本对象，您将获得更多的控制权。这些解决方案为您提供了更好的控制，并且在[http://pinvoke.net](http://pinvoke.net)等网站的帮助下，您总能找到 ac# 包装器或轻松创建一个。如果在 .Net Framwork 类之一中存在解决方案，您通常会找到指向该解决方案的链接。

您基本上需要来自 WINAPI 的两个函数：

*   [WNetAddConnection](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385413(v=vs.85).aspx)
    将远程路径映射到本地驱动器
*   [WNetGetconnection](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385453(v=vs.85).aspx)
    获取本地驱动器的远程映射路径

该解决方案包括映射和获取信息的方法以及一些帮助程序

### 映射驱动器和显示信息的方法

```
var mapResult = WNetAddConnection2(
    new NETRESOURCE {
    Scope = ResourceScope.Connected,
    ResourceType = ResourceType.Disk,
    DisplayType = ResourceDisplaytype.Generic,
    Usage = 0,
    LocalName = @"Z:",
    RemoteName = @"\\ms\temp",
    Comment = "from csharp",
    Provider = null
    }
    , null
    , null
    , 0);
if (mapResult!=0)
{
    throw new Exception("AddConnection failed");
    // >0? check  http://msdn.microsoft.com/en-us/library/windows/desktop/ms681383(v=vs.85).aspx
}

// get the remote connection path
int remoteBufLen = 0; // start with a 0 length buffer
StringBuilder remotePath = null;
var connRes = ERROR_MORE_DATA;  
// call twice if the buffer is too small
for (int t=0 ; t<2 && connRes == ERROR_MORE_DATA; t++)
{
    remotePath = new StringBuilder(remoteBufLen);
    // and error is returned 
    // and remoteBufLen holds the required size
    connRes = WNetGetConnection(@"Z:", remotePath, ref remoteBufLen);
}
if (connRes != 0)
{
   throw new Exception("getconnetion failed");
}

string message1 = String.Format(@"[1] Go to C:\{0}[2] Replace Folder ""myTeX"" with myTeX exist in {1}{0}[3] Open Start menu-->All Programs-->MiKTeX 2.8-->Maintenance-->Settings-->Click on ""Refresh FNDB"" button then wait the process and try again, Good Luck "
, Environment.NewLine, remotePath);

richTextBox2.Text = message1; 
```

### 帮手

我使用[http://pinvoke.net](http://pinvoke.net)查找 WINAPI 调用的 c# 声明

```
// http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382(v=vs.85).aspx
const int ERROR_MORE_DATA =0xEA;

// http://www.pinvoke.net/default.aspx/mpr.WNetGetConnection
[DllImport("mpr.dll", CharSet=CharSet.Auto, SetLastError=true)]
public static extern int WNetGetConnection(
    [MarshalAs(UnmanagedType.LPTStr)] string localName, 
    [MarshalAs(UnmanagedType.LPTStr)] StringBuilder remoteName, 
    ref int length);

//http://www.pinvoke.net/default.aspx/mpr.VVNetAddConnection2
[DllImport("mpr.dll")]    
public static extern int WNetAddConnection2(NETRESOURCE netResource,
    string password, string username, uint flags);

[StructLayout(LayoutKind.Sequential)]
public class NETRESOURCE
{
     public ResourceScope Scope;
     public ResourceType ResourceType;
     public ResourceDisplaytype DisplayType;
     public int Usage;
     public string LocalName;
     public string RemoteName;
     public string Comment;
     public string Provider;
}

public enum ResourceScope : int
{
     Connected = 1,
     GlobalNetwork,
     Remembered,
     Recent,
     Context
}

public enum ResourceType : int
{
    Any = 0,
     Disk = 1,
     Print = 2,
     Reserved = 8,
}

public enum ResourceDisplaytype : int
{
     Generic = 0x0,
     Domain = 0x01,
     Server = 0x02,
     Share = 0x03,
     File = 0x04,
     Group = 0x05,
     Network = 0x06,
     Root = 0x07,
     Shareadmin = 0x08,
     Directory = 0x09,
     Tree = 0x0a,
     Ndscontainer = 0x0b
} 
```

# c# - 在 EmguCv 中使用 SURFDetector 时崩溃

> ID：15997277
> 
> 赞同：0
> 
> 时间：2013-04-14T08:48:37.577
> 
> 标签：c#, crash, emgucv

我无法使用该`SURFDetector`对象，因为程序崩溃了。

我正在使用 Emgu 的 2.4.9 版本（[在此处](http://sourceforge.net/projects/emgucv/files/emgucv/2.4.9-alpha/)下载表格），并且我已按照有关添加 OpenCV 依赖项的说明进行操作（[链接](http://www.emgu.com/wiki/index.php/Download_And_Installation#Have_you_copied_the_OpenCV_dlls_to_the_execution_directory.3F)）：

> 对于 EMGU CV 版本 >=2.4 cudart64_42_9.dll、cvextern.dll、npp64_42_9.dll、opencv_calib3dXXX.dll、opencv_contribXXX.dll、opencv_coreXXX.dll、opencv_features2dXXX.dll、opencv_flannXXX.dll、opencv_highguiXXX.dll、opencv_imgprocXXX.dll、opencv_legacyXXX.dll , opencv_mlXXX.dll, opencv_nonfreXXX.dll, opencv_objectdetectXXX.dll, opencv_videoXXX.dll，其中 XXX 是 OpenCV 版本号。

我还添加了对`Emgu.CV.dll`和`Emgu.Util.dll`的引用`Emgu.CV.UI`。为了尝试解决问题，我尝试添加`Emgu.CV.GPU.dll`and `opencv_gpuXXX.dll`，但没有成功。

我正在使用安装了 Windows 7 的 64 位 PC，但我的项目是为 x86 构建的，并且我正在使用 x86 架构的依赖项。在使用该`SURFDetector`对象之前，一切正常。

当程序到达以下行时会发生崩溃：

```
SURFDetector surfCPU = new SURFDetector(500, false); 
```

该程序抛出两种异常（是的，两种），我无法理解为什么它抛出一种而不是另一种：

1.  mscorlib.dll 中的 System.Reflection.TargetInvocationException
2.  Emgu.CV.dll 中的 System.DllNotFoundException（无法加载“cvextern”DLL），带有奇怪的错误代码（HRESULT：0x8007007E）

在这两种情况下，VisualStudio 2012 都会打开一个名为“源不可用”或类似名称的新选项卡（我不确定 VisualStudio 英文版使用的确切单词，因为我使用的是意大利语版本）。

编辑：我想补充一点，与库一起提供的示例的可执行文件，称为 SURFFeature，可以完美运行......

# actionscript - 删除存储在多个 ArrayCollections 中的对象

> ID：15997290
> 
> 赞同：1
> 
> 时间：2013-04-14T08:50:17.873
> 
> 标签：actionscript, arraycollection

我有几个数组集合（我事先不知道它们的数量），它们包含一个相同的对象（以及其他对象）。

```
var obj:MyObject = new MyObject();
var arc1:ArrayCollection = new ArrayCollection();
arc1.addItem(obj)
// same operation for my x arraycollections 
```

是否可以在第一个数组集合中删除我的对象“obj”并在所有其他数组集合中自动删除它，而不在每个数组集合中一个一个地删除它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:36:55.583

假设您所有的数组集合共享一个公共源，我将创建 ListCollectionViews 而不是 ArrayCollections 并让它们都指向一个 ArrayCollection，即：

```
var masterCollection:ArrayCollection = new ArrayCollection();

for (var i:uint = 0; i < N; i++)
{
    slaveCollections[i] = new ListCollectionView(masterCollection);
} 
```

每当您从任何 slaveCollection 添加或删除项目时，它将从主服务器添加/删除，并且您的所有其他列表将通过 CollectionEvent 更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:44:49.740

假设您所有的数组集合不共享一个公共源，我会为每个集合添加一个集合事件侦听器来处理您的要求：

```
for (var i:uint = 0; i < N; i++)
{
    slaveCollections[i] = new ArrayCollection();
    slaveCollections[i].addEventListener(CollectionEvent.COLLECTION_CHANGE, collectionListener);
} 
```

...

```
private function collectionListener(event:CollectionEvent):void
{

   if (event.kind != CollectionEventKind.REMOVE)
        return

   for each(var slaveCollection:ArrayCollection in slaveCollections)
   {
      for each(var item:Object in event.items)
      {
          var itemIndex:int = slaveCollection.getItemIndex(item);
          if (itemIndex >= 0)
          {
              slaveCollection.removeItemAt(itemIndex);
          }
      }
   }

} 
```

这应该允许您在任何集合上调用： collection.removeItem(x) 并将该项目从其他集合中删除。

# asp.net-mvc-4 - SimpleMembership 通过登录获取自定义列值

> ID：15997294
> 
> 赞同：1
> 
> 时间：2013-04-14T08:50:58.703
> 
> 标签：asp.net-mvc-4, simplemembership

我自定义`UserProfile`了 Table 并添加了名为`IsActive`. 它适用于注册。现在我想`IsActive`在登录之前获取该自定义列的值。

```
WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe) 
```

需要这些场景

1.  检查用户名和密码是否有效
2.  如果登录有效，则检查用户是否处于活动状态。
3.  如果用户未处于活动状态，则不应登录。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:31:00.743

这只是我的想法并且未经测试，所以它可能不是100％正确，但它应该让你朝着正确的方向前进。

```
public ActionResult Login(LoginModel model)
{
    using(var db = new MyDbContext())
    {
        try
        {
            var user = db.UserProfile.FirstOrDefault(x => x.UserName == model.UserName);
            if(user != null)
            {   
                if(user.IsActive == true)
                {
                    if(ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
                    {
                        try
                        {
                            return View("SomeView");
                        }
                        catch(Exception e)
                        {
                            // handle exception
                        }
                    }
                }
                else
                {
                    return View("SomeView");
                }
            }
        }
        catch(Exception e)
        {
            // handle exception
        }
    }
    return View("SomeView");
} 
```

# android - 删除第一个发送的短信

> ID：15997295
> 
> 赞同：2
> 
> 时间：2013-04-14T08:51:02.987
> 
> 标签：android

嗨，我想从 android 中的已发送项目中删除第一条短信。我正在使用`uri` `content://sms/sent`。但我收到一个错误。这是我的代码

```
Uri uri = Uri.parse("content://sms/sent");

ContentResolver cr = getContentResolver();
Cursor c = cr.query(uri, null, null, null, null);
startManagingCursor(c);
c.moveToFirst();
String id = c.getString(c.getColumnIndex("_id"));
Log.d("TAGG", cr.delete(uri, "_id=?",new String[]{id})+" "); 
```

我得到的例外

```
FATAL EXCEPTION: main
04-14 13:44:39.876: E/AndroidRuntime(918): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.readingsentsms/com.example.readingsentsms.MainActivity}: java.lang.IllegalArgumentException: Unknown URL
04-14 13:44:39.876: E/AndroidRuntime(918):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2669)
04-14 13:44:39.876: E/AndroidRuntime(918):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2685)
04-14 13:44:39.876: E/AndroidRuntime(918):  at android.app.ActivityThread.access$2300(ActivityThread.java:126)
04-14 13:44:39.876: E/AndroidRuntime(918):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2038)
04-14 13:44:39.876: E/AndroidRuntime(918):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-14 13:44:39.876: E/AndroidRuntime(918):  at android.os.Looper.loop(Looper.java:123)
04-14 13:44:39.876: E/AndroidRuntime(918):  at android.app.ActivityThread.main(ActivityThread.java:4633)
04-14 13:44:39.876: E/AndroidRuntime(918):  at java.lang.reflect.Method.invokeNative(Native Method)
04-14 13:44:39.876: E/AndroidRuntime(918):  at java.lang.reflect.Method.invoke(Method.java:521)
04-14 13:44:39.876: E/AndroidRuntime(918):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
04-14 13:44:39.876: E/AndroidRuntime(918):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
04-14 13:44:39.876: E/AndroidRuntime(918):  at dalvik.system.NativeStart.main(Native Method)
04-14 13:44:39.876: E/AndroidRuntime(918): Caused by: java.lang.IllegalArgumentException: Unknown URL
04-14 13:44:39.876: E/AndroidRuntime(918):  at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:144)
04-14 13:44:39.876: E/AndroidRuntime(918):  at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:114)
04-14 13:44:39.876: E/AndroidRuntime(918):  at android.content.ContentProviderProxy.delete(ContentProviderNative.java:483)
04-14 13:44:39.876: E/AndroidRuntime(918):  at android.content.ContentResolver.delete(ContentResolver.java:675)
04-14 13:44:39.876: E/AndroidRuntime(918):  at com.example.readingsentsms.MainActivity.onCreate(MainActivity.java:25)
04-14 13:44:39.876: E/AndroidRuntime(918):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-14 13:44:39.876: E/AndroidRuntime(918):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2633)
04-14 13:44:39.876: E/AndroidRuntime(918):  ... 11 more 
```

# java - 检查是否在 Java 中加载了包 (API)

> ID：15997296
> 
> 赞同：2
> 
> 时间：2013-04-14T08:51:27.110
> 
> 标签：java, api, java-7, minecraft

我想问一下，有没有办法让java程序查看包x是否被加载？我一直在制作模组（用于我的世界），并且我意识到几乎我所有的程序都需要使用相同的方法。所以我想做一个API。但我需要确保如果未加载 API，程序将无法运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T08:56:34.803

您只能检查给定类在 Classpath 上是否可用，但这可能足以满足您的需要。

用于`Class.forName(...)`此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T08:57:56.483

正如在这篇[文章](https://stackoverflow.com/questions/2547867/checking-whether-a-package-is-existent-or-not)中已经说过的，您可以检查是否可以加载 API 的一个类。如果是这种情况，软件包是可用的。但如果 API 无法加载，程序无论如何都无法运行，因此您可以在第一次访问 API 时简单地检查异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T10:04:54.283

> 我想问一下，有没有办法让java程序查看包x是否被加载？

不，没有在 Java 中加载包这样的事情。

# javascript - 隐藏 MediaElement.js 播放器

> ID：15997299
> 
> 赞同：0
> 
> 时间：2013-04-14T08:51:57.613
> 
> 标签：javascript, jquery, mediaelement.js

如何隐藏 mediaelement.js 播放器？实际上我正在同时玩两个玩家，但我想在玩的时候隐藏一个。我找到了[mediaelement.js - 如何隐藏音频控件？](https://stackoverflow.com/questions/6708037/mediaelement-js-how-to-hide-audio-controls) 关于stackoverflow的问题，但它只是隐藏控件而不是播放器。

我正在为我想要隐藏的播放器使用以下代码。

```
<audio id="overlayplayer1" src="" autoplay type="audio/mp3" controls preload> 
  <embed src="" hidden=true autostart=true loop=false>
</audio>   in my html file 
```

和

```
this.MEplayer1 = new MediaElementPlayer('#overlayplayer1', {
            pluginPath: '../js/me281/',
            flashName: 'flashmediaelement.swf',
            silverlightName: 'silverlightmediaelement.xap',
            pauseOtherPlayers: false,
            enableAutosize: false,
            debug: false, 
            success: function (me, domobj) {
                console.log('player initiated successfully');
                ...
} 
```

对于我的 .js 文件。任何帮助将不胜感激来解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:53:52.460

我已经通过使用解决了这个问题

```
<div style="display:none"> 
```

这是代码：

```
 <div style="display:none">
<audio id="overlayplayer1" src="" autoplay type="audio/mp3" controls preload hidden=true> 
</audio>
</div>
    </div> 
```

# android - 在 Android 上停止应用程序恢复

> ID：15997302
> 
> 赞同：0
> 
> 时间：2013-04-14T08:52:20.973
> 
> 标签：android, process

我有一个应用程序，它在启动时从两个不同的服务器获取两个会话 ID。第一个活动是一个“登录”活动，它执行这种双重登录、存储会话 ID 并启动主要活动。

有时我的应用程序由于资源不足而被 Android 杀死。恢复后，Android 会立即恢复主要活动，给我留下可能过时的会话 ID。

我想要发生的是告诉Android*不要*恢复上次运行的活动，而是再次运行登录活动。在那里，我将检查会话 ID 并在必要时再次登录，然后转到所需的任何活动。

有没有办法告诉Android不要恢复应用程序，而是重新启动它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:59:09.670

在主要活动中添加对会话 ID 的检查。如果不是您所期望的，请再次调用登录活动。就像是：

```
 ...
    if (sessionId == null)
    {
        startLoginActivity();
        finish();
    } 
```

# apache - 使用正则表达式为子域动态设置文档根目录

> ID：15997303
> 
> 赞同：1
> 
> 时间：2013-04-14T08:52:21.740
> 
> 标签：apache, .htaccess, apache2

我已经设置子域通配符来接受任何子域，主要问题是我使用 DirectAdmin，我无法使用 DA API 将子域指向特定路径我想将任何子域指向名为 subdomian 的文件夹，该文件夹存在于子目录中

例如 sub.domian.com 应该指向 /public_html/subdomains/sub

像这样的东西

```
<VirtualHost *:80>
  VirtualDocumentRoot /public_html/subdomains/%1
</VirtualHost> 
```

如果我将包含“.x”之类的单词的子域设置为指向该路径，这将是我的理想选择

也许喜欢

```
<VirtualHost *.x:80>
  VirtualDocumentRoot /public_html/subdomains/%1
</VirtualHost> 
```

抱歉，如果问题听起来很愚蠢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-24T18:22:21.547

看起来这是你需要的：

```
<VirtualHost *:8080>
    ServerName localhost
    ServerAlias *.localhost

    #the %1 is the asterisk value! No regexp supported!
    VirtualDocumentRoot /home/%1/project 
    VirtualScriptAlias  /home/%1/project

    <Directory /home/*/project/>
    #...
    </Directory>
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-14T14:13:34.583

这可以完全使用 htaccess 来完成。您必须启用通配符子域名 *.domain.com 并将其指向 domain.com

然后您可以使用以下类型的规则：

```
RewriteCond %{HTTP_HOST} !www.domain.com [NC]
RewriteCond %{HTTP_HOST} ^([a-z0-9-]+).domain.com [NC]
RewriteRule ^(.*/) /%1/index.php [PT,L] 
```

您可以在存储子域文件时修改 RewriteRule。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-15T07:28:09.210

找到了答案

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{HTTP_HOST} !www\.domain\.com$[NC]
RewriteCond %{HTTP_HOST} ^(.*?)\.domain\.com$
RewriteCond %{REQUEST_URI} !folder/(.*?)/
RewriteRule ^(.*) /folder/%1%{REQUEST_URI} [L]
</IfModule> 
```

# php - PHP检查一个字符串是否有东西，如果有保存到变量

> ID：15997305
> 
> 赞同：-2
> 
> 时间：2013-04-14T08:52:23.220
> 
> 标签：php

我从我的站点获取我的 URL 并尝试将某个字段保存到变量中

```
$link = "$_SERVER[REQUEST_URI]";  
// example of $link = "/index.php?option=com_course&id=1&Itemid=104"
if(strpos($actual_link,'id=') !== false){
    $id =    // the number after id= in the string
} 
```

基本上我正在检查字符串中是否存在 id= 以及是否将 id 的编号保存到 $id。

所以上面列出的 $link 示例的结果将是 $id = 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:55:51.317

如果来自站点的 URL 正在传递变量，您可以只使用 GET？

```
$id = $_GET["id"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T08:56:00.583

首先，您希望第一行是`$link = $_SERVER['REQUEST_URI'];`.

但是对于这样的请求数据，从一个请求到你自己的服务器，有一个保留的全局变量：$_GET（[http://php.net/manual/en/reserved.variables.get.php](http://php.net/manual/en/reserved.variables.get.php)）

它会这样工作：`$id = $_GET['id'];`

# oracle - 每天创建和删除表

> ID：15997307
> 
> 赞同：0
> 
> 时间：2013-04-14T08:52:50.767
> 
> 标签：oracle, drop-table

我的客户想每天创建一个新表，例如`MyTable<yyyymmdd>`，然后我的应用程序将读取这个表并做一些交叉检查。完成所有交叉检查后，我需要删除此表。每天都会创建和删除表。

是很好的解决方案吗？可能是因为这个数据库会崩溃？

请给我建议。

*   我已经给出了另一种解决方案，客户只需将数据插入一个表中。之后，我将在完成后删除所有记录。但客户拒绝使用我的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T13:22:23.680

这是一个简单的生命周期问题。使用[区间分区](http://docs.oracle.com/cd/B28359_01/server.111/b32024/partition.htm)。易于管理，有利于性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T09:00:36.503

每天创建和删除具有相同列的表是没有意义的。如果该表中的列每天都在变化，您可以继续使用该方法。

您的数据库不会因此而崩溃。只需确保在删除表时服务不会访问该表。

# process - 运行链接到 0x400000 的多个可执行文件

> ID：15997314
> 
> 赞同：1
> 
> 时间：2013-04-14T08:53:36.910
> 
> 标签：process, executable, paging, virtual-memory, portable-executable

我对操作系统主题感兴趣，我有一个虚拟问题。标准 PE 可执行文件链接到`0x400000`. 我的问题是，当虚拟内存只是将虚拟地址映射到物理地址时，操作系统如何加载具有相同映像库的多个可执行文件。它是否在某处存储线程的 PDE 和 PTE 索引？在执行开始之前，每个地址是否有一些补充？它是如何工作的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T09:10:54.967

每个进程都有自己的[虚拟地址空间](http://en.wikipedia.org/wiki/Virtual_address_space)，因此没有冲突。系统中任一时间存在的所有虚拟地址空间都映射到物理地址空间。不能或当前未映射到特定物理内存的虚拟内存保存在交换文件（交换分区等）中——这称为[分页](http://en.wikipedia.org/wiki/Paging)。

在线程切换期间，当 CPU 即将从与目前执行的进程不同的进程中执行线程时，[操作系统的调度程序会](http://en.wikipedia.org/wiki/Scheduling_%28computing%29)通知 CPU（设置相应的寄存器）有关要使用的新虚拟地址转换表。因此，CPU 认为在给定时间只有一个虚拟地址空间，而操作系统可以管理更多，每个进程一个。

* * *

*免责声明：与现实相反，我的回答可能被认为有点肤浅或不精确。这是为了简单起见，就 OPs 问题的性质而言。此外，这些机制依赖于 CPU 和操作系统。*

# objective-c - UIButton 不会删除 UIControlEventtouchDragInside 的目标

> ID：15997316
> 
> 赞同：2
> 
> 时间：2013-04-14T08:54:00.497
> 
> 标签：objective-c, uibutton, target

从 UIButton 中删除目标时遇到一些问题。基本上我有一个日历，并且希望能够移动一个代表保存在日历中的事件的按钮。我开始：

> ```
> [self.chosenButton addTarget:self action:@selector(dragMoving:withEvent:) forControlEvents:UIControlEventTouchDragInside]; 
> ```

然后在移动完成后我打电话

> ```
> [self.chosenButton removeTarget:nil action:NULL forControlEvents:UIControlEventTouchDragInside]; 
> ```

然而，在那之后，我仍然可以移动按钮，即使它应该保持静止。在 dragMoving:withEvent: 函数中，我只根据触摸点分配按钮的坐标并检查其有效性（如果它在屏幕内等）

知道为什么仍然调用 dragMoving:WithEvent 吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:00:23.257

这是因为您实际上没有删除目标，请尝试：

```
[self.chosenButton removeTarget:self  action:@selector(dragMoving:withEvent:) forControlEvents:UIControlEventTouchDragInside]; 
```

# c# - 如何测试 8:00 PM 在 12:00 AM 之前是否有效？

> ID：15997318
> 
> 赞同：2
> 
> 时间：2013-04-14T08:54:17.607
> 
> 标签：c#, asp.net, datetime, utc

全部，

我最近[发布了一个](https://stackoverflow.com/questions/15966507/c-sharp-asp-net-using-timespan-to-restrict-hours-to-log-into-a-website)关于将用户登录时间限制为 4 小时的问题，并得到了很好的反馈/答案。

但我遇到了一个让我难过的场景。

客户可以从晚上 8:00 到第二天凌晨 12:00 登录 - 总共 4 小时。但是，我的代码看到 8:00 PM 随着时间的流逝，而不是 8:00 PM 是 12:00 AM 之前的时间。

如何让系统将 8:00 PM 视为第二天凌晨 12:00 之前尚未过去的时间？

这是我使用上午和下午的 12 小时制的代码 - 不是 UTC 或 24 小时制：

```
var orderTime = Convert.ToDateTime(orderDate); // 8:00 PM
var expirationTime = orderTime.AddHours(4); // 12:00 AM of the next day

// timeRemaining should be 4 hours but is 0
// DateTime.Now is 8:00 PM of the current day
// so timeRemaining = 8:00 PM - 12:00 AM (should be 4 hours) 
var timeRemaining = expirationTime - DateTime.Now;

// should be greater than 0 since timeRemaining is actually 4 hours (8:00 PM up to 12:00 AM of next day)
// but fails seeing it as passed
if (timeRemaining < TimeSpan.Zero)                     
    Response.Redirect("TimedOut.aspx"); 
```

我怎样才能使这种情况有效？也就是说，系统将晚上 8:00 视为第二天凌晨 12:00 之前尚未过去的时间？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:50:06.237

你的代码对我来说工作得很好。我相信这是您未在此处显示的代码或出于其他愚蠢的原因。我正在使用这段代码（以及它的许多变体）进行测试：

```
// force the date format to be 12hour like in US
System.Threading.Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo("en-US");
System.Threading.Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo("en-US");

DateTime start = DateTime.Parse("1/1/2013 7:00 PM").ToUniversalTime();
DateTime end = start.AddHours(5); // returns 1/2/2013 12:00:00 AM as it should

Console.WriteLine(end - start); // 05:00:00
Console.WriteLine((end - start) > TimeSpan.Zero); // True 
```

# php - 如何包装 HTML 代码而不在 Twig 中包含新文件？

> ID：15997320
> 
> 赞同：5
> 
> 时间：2013-04-14T08:54:23.013
> 
> 标签：php, symfony, tags, twig, wrapper

我有代表盒子的 CSS div，它们包装 html 代码。

```
<div class="box indent">
  <div class="padding">
    my code here
  </div>
</div> 
```

我创建了一个“layoutbundle”，其中每个 HTML 包装器（例如框、选项卡、网格等）都放在单独的 twig 文件中。通过这种方式，可以使用其他布局来实现其他捆绑包上的视图。

但我厌倦了包含。每个小的 html 包装器都需要一个包含，我想知道是否有更简单的方法来包装 HTML 代码。

让我们举一个简单盒子的例子。实际上，我创建了几个文件：

`box.html.twig`包含框并包含内容的文件：

```
<div class="box indent">
  <div class="padding">
    {% include content %}
  </div>
</div> 
```

几个*box-content* .html.twig 文件，包含我的盒子的内容。

最后，我通过执行以下操作在视图中创建了一个框：

```
{%
  include 'AcmeDemoBundle:layout:box.html.twig'
  with {
    'content': 'ReusableBundle:feature:xxx.html.twig'
  }
%} 
```

有没有办法创建包装器，例如：

a）我声明一次新的包装器：

```
{% wrapperheader "box" %}
    <div class="box indent">
      <div class="padding">
{% endwrapperheader %}

{% wrapperfooter "box" %}
      </div>
    </div>
{% endwrapperfooter %} 
```

b）然后在我的页面中，我使用：

```
{% wrapper "box" %}
  {# here my content #}
{% endwrapper %} 
```

我想我需要在 Twig 中添加新的标签扩展，但首先我想知道类似的东西是否在本机是可能的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-14T15:22:20.610

# 块法

该方法由[Sebastiaan Stok](https://github.com/sstok)在 GitHub 上提出。

这个想法使用了[块函数](http://twig.sensiolabs.org/doc/functions/block.html)。它写入给定的块内容，并且可以多次调用。

包装文件：

```
{# src/Fuz/LayoutBundle/Resources/views/Default/wrappers.html.twig #}

{% block box_head %}
    <div class="box indent">
      <div class="padding">
{% enblock %}

{% block box_foot %}
      </div>
    </div>
{% enblock %} 
```

特色页面：

```
{{ block('box_head') }}
Some content
{{ block('box_foot') }} 
```

* * *

# 带有宏的 wrap 扩展

这个想法是由[Charles](https://github.com/char101)在 GitHub 上提出的。

`macro.html.twig`首先，您在文件中声明一个宏。

```
{% macro box(content) %}
    <div class="box indent">
      <div class="padding">
         {{ content | raw }}
      </div>
    </div>
{% endmacro %} 
```

然后，Amd 而不是调用`{{ macros.box('my content') }}`（参见[文档](http://twig.sensiolabs.org/doc/tags/macro.html)，您开发了一个`{% wrap %}`处理宏调用的标记，其中的`[% wrap %}`和`{% endwrap %}`作为参数。

这个扩展很容易开发。我认为访问宏可能很难，但实际上，它们作为对象存储在上下文中，并且可以轻松编译调用。

只是一些变化：我们将使用以下语法：

```
{# to access a macro from an object #}
{% wrap macro_object macro_name %}
  my content here
{% endwrap %}

{# to access a macro declared in the same file #}
{% wrap macro_name %}
   macro
{% endwrap %} 
```

在下面的代码中，如果你想让它工作，不要忘记更改命名空间！

首先，在你的 services.yml 中添加扩展：

```
parameters:
    fuz_tools.twig.wrap_extension.class: Fuz\ToolsBundle\Twig\Extension\WrapExtension

services:
  fuz_tools.twig.wrap_extension:
    class: '%fuz_tools.twig.wrap_extension.class%'
    tags:
      - { name: twig.extension } 
```

在你的包中，创建一个 Twig 目录。

添加扩展，它将返回新的`TokenParser`（英文：它将声明新标签）。

Twig/Extension/WrapExtension.php：

```
<?php

// src/Fuz/ToolsBundle/Twig/Extension/WrapExtension.php

namespace Fuz\ToolsBundle\Twig\Extension;

use Fuz\ToolsBundle\Twig\TokenParser\WrapHeaderTokenParser;
use Fuz\ToolsBundle\Twig\TokenParser\WrapFooterTokenParser;
use Fuz\ToolsBundle\Twig\TokenParser\WrapTokenParser;

class WrapExtension extends \Twig_Extension
{

    public function getTokenParsers()
    {
        return array (
                new WrapTokenParser(),
        );
    }

    public function getName()
    {
        return 'wrap';
    }

} 
```

`{% wrap %}`然后添加TokenParser本身，当解析器找到标签时会遇到。这`TokenParser`将检查标签是否被正确调用（对于我们的示例，它有 2 个参数），存储这些参数并获取`{% wrap %}`和 {% endwrap %}` 之间的内容。

Twig/TokenParser/WrapTokenParser.php：

```
<?php

// src/Fuz/ToolsBundle/Twig/TokenParser/WrapTokenParser.php

namespace Fuz\ToolsBundle\Twig\TokenParser;

use Fuz\ToolsBundle\Twig\Node\WrapNode;

class WrapTokenParser extends \Twig_TokenParser
{

    public function parse(\Twig_Token $token)
    {
        $lineno = $token->getLine();
        $stream = $this->parser->getStream();

        $object = null;
        $name = $stream->expect(\Twig_Token::NAME_TYPE)->getValue();

        if ($stream->test(\Twig_Token::BLOCK_END_TYPE))
        {
            if (!$this->parser->hasMacro($name))
            {
                throw new \Twig_Error_Syntax("The macro '$name' does not exist", $lineno);
            }
        }
        else
        {
            $object = $name;
            $name = $stream->expect(\Twig_Token::NAME_TYPE)->getValue();
        }

        $this->parser->getStream()->expect(\Twig_Token::BLOCK_END_TYPE);
        $body = $this->parser->subparse(array ($this, 'decideWrapEnd'), true);
        $this->parser->getStream()->expect(\Twig_Token::BLOCK_END_TYPE);

        return new WrapNode($object, $name, $body, $token->getLine(), $this->getTag());
    }

    public function decideWrapEnd(\Twig_Token $token)
    {
        return $token->test('endwrap');
    }

    public function getTag()
    {
        return 'wrap';
    }

} 
```

接下来，我们需要一个编译器（树枝方言中的节点），它将生成与我们的`{% wrap %}`标签关联的 PHP 代码。

这个标签是 的别名`{{ macro_object.box(content) }}`，所以我在模板中写了这行代码，并在生成的 php 文件（存储在您的`app/cache/dev/twig`目录中）中观察了生成的代码。我有 ：

```
echo $this->getAttribute($this->getContext($context, "(macro object name)"), "(name)", array("(body)"), "method"); 
```

所以我的编译器变成了：

树枝/节点/WrapNode.php：

```
<?php

// src/Fuz/ToolsBundle/Twig/Node/WrapNode.php

namespace Fuz\ToolsBundle\Twig\Node;

class WrapNode extends \Twig_Node
{

    public function __construct($object, $name, $body, $lineno = 0, $tag = null)
    {
        parent::__construct(array ('body' => $body), array ('object' => $object, 'name' => $name), $lineno, $tag);
    }

    public function compile(\Twig_Compiler $compiler)
    {
        $compiler
           ->addDebugInfo($this)
           ->write('ob_start();');

        $compiler
           ->addDebugInfo($this)
           ->subcompile($this->getNode('body'));

        if (is_null($this->getAttribute('object')))
        {
            $compiler
               ->write(sprintf('echo $this->get%s(ob_get_clean());', $this->getAttribute('name')) . "\n");
        }
        else
        {
            $compiler
               ->write('echo $this->getAttribute($this->getContext($context, ')
               ->repr($this->getAttribute('object'))
               ->raw('), ')
               ->repr($this->getAttribute('name'))
               ->raw(', array(ob_get_clean()), "method");')
               ->raw("\n");
        }
    }

} 
```

注意：要了解子解析/子编译的工作原理，我阅读了`spaceless`扩展源代码。

就这样！我们得到一个别名，让我们可以使用具有大主体的宏。尝试一下：

宏.html.twig：

```
{% macro box(content) %}
    <div class="box indent">
      <div class="padding">
         {{ content | raw }} {# Don't forget the raw filter! #}
      </div>
    </div>
{% endmacro %} 
```

一些layout.html.twig：

```
{% import "FuzLayoutBundle:Default:macros.html.twig" as macros %}

{% wrap macros box %}
test
{% endwrap %}

{% macro test(content) %}
some {{ content | raw }} in the same file
{% endmacro %}

{% wrap test %}
macro
{% endwrap %} 
```

输出：

```
 <div class="box indent">
      <div class="padding">
test
      </div>
    </div>

some macro in the same file 
```

* * *

# wrapperheader、wrapperfooter、wrapper extension

这种方法是我在我的问题中告诉你的方法。如果你想用令牌解析器训练自己，你可以阅读/实现它，但从功能上讲，这不如以前的方法好。

在一个`wrapper.html.twig`文件中，您声明所有包装器：

```
{% wrapperheader box %}
    <div class="box">
{% endwrapper %}
{% wrapperfooter box %}
    </div>
{% endwrapperfooter %} 
```

在您的功能树枝文件中，您使用您的包装器：

```
{% wrapper box %}
This is my content
{% endwrapper %} 
```

以下扩展有 3 个问题：

*   无法在 Twig 环境中存储数据（例如上下文变量）。因此，当您定义 a 时`{% wrapperheader NAME %}`，您基本上没有干净的方法来检查是否`NAME`已经定义了标头（在此扩展中，我使用静态属性）。

*   当你`include`是一个 twig 文件时，它是在运行时解析的，而不是立即解析（我的意思是，包含的 twig 模板是在执行**生成的文件**时解析的，而不是在`include`解析标签时解析）。`{% wrapper NAME %}`因此，当您解析标签时，不可能知道先前包含的文件中是否存在包装器。如果您的包装器不存在，则此扩展程序仅显示介于两者之间的内容`{% wrapper %}`，而`{% endwrapper %}`没有任何通知。

*   这个扩展的想法是：当解析器遇到一个`wrapperheader`和`wrapperfooter`标记时，编译器将标记的内容存储在*某个地方*以供以后与`wrapper`标记一起使用。`{% include %}`但是树枝上下文是作为副本传递的，而不是通过引用传递的。因此，不可能将`{% wrapperheader %}`and`{% wrapperfooter %}`信息存储在该上下文中，以供上层使用（在包含文件的文件中）。我也需要使用全局上下文。

这是代码，请注意更改名称空间。

首先，我们需要创建一个扩展，它将向 Twig 添加新的令牌解析器。

在 bundle 的 services.yml 中，添加以下行来激活扩展：

```
parameters:
    fuz_tools.twig.wrapper_extension.class: Fuz\ToolsBundle\Twig\Extension\WrapperExtension

services:
  fuz_tools.twig.wrapper_extension:
    class: '%fuz_tools.twig.wrapper_extension.class%'
    tags:
      - { name: twig.extension } 
```

在你的包中，创建一个 Twig 目录。

创建以下 Twig\Extension\WrapperExtension.php 文件：

```
<?php

// src/Fuz/ToolsBundle/Twig/Extension/WrapperExtension.php

namespace Fuz\ToolsBundle\Twig\Extension;

use Fuz\ToolsBundle\Twig\TokenParser\WrapperHeaderTokenParser;
use Fuz\ToolsBundle\Twig\TokenParser\WrapperFooterTokenParser;
use Fuz\ToolsBundle\Twig\TokenParser\WrapperTokenParser;

class WrapperExtension extends \Twig_Extension
{

    public function getTokenParsers()
    {
        return array(
            new WrapperHeaderTokenParser(),
            new WrapperFooterTokenParser(),
            new WrapperTokenParser(),
        );
    }

    public function getName()
    {
        return 'wrapper';
    }

} 
```

现在我们需要添加标记解析器：我们的语法与and`{% wrapper NAME %} ... {% endwrapper %}`相同。因此，这些令牌解析器用于声明标签，检索包装器，并检索正文（和 endwrapper` 之间的内容）。`wrapperheader``wrapperfooter``NAME``wrapper`

包装器的令牌解析器：Twig\TokenParser\WrapperTokenParser.php：

```
<?php

// src/Fuz/ToolsBundle/Twig/TokenParser/WrapperTokenParser.php

namespace Fuz\ToolsBundle\Twig\TokenParser;

use Fuz\ToolsBundle\Twig\Node\WrapperNode;

class WrapperTokenParser extends \Twig_TokenParser
{

    public function parse(\Twig_Token $token)
    {
        $stream = $this->parser->getStream();
        $name = $stream->expect(\Twig_Token::NAME_TYPE)->getValue();
        $this->parser->getStream()->expect(\Twig_Token::BLOCK_END_TYPE);
        $body = $this->parser->subparse(array($this, 'decideWrapperEnd'), true);
        $this->parser->getStream()->expect(\Twig_Token::BLOCK_END_TYPE);
        return new WrapperNode($name, $body, $token->getLine(), $this->getTag());
    }

    public function decideWrapperEnd(\Twig_Token $token)
    {
        return $token->test('endwrapper');
    }

    public function getTag()
    {
        return 'wrapper';
    }

} 
```

wrapperheader 的令牌解析器：Twig\TokenParser\WrapperHeaderTokenParser.php：

```
<?php

// src/Fuz/ToolsBundle/Twig/TokenParser/WrapperHeaderTokenParser.php

namespace Fuz\ToolsBundle\Twig\TokenParser;

use Fuz\ToolsBundle\Twig\Node\WrapperHeaderNode;

class WrapperHeaderTokenParser extends \Twig_TokenParser
{
    static public $wrappers = array ();

    public function parse(\Twig_Token $token)
    {
        $lineno = $token->getLine();
        $stream = $this->parser->getStream();

        $name = $stream->expect(\Twig_Token::NAME_TYPE)->getValue();
        if (in_array($name, self::$wrappers))
        {
            throw new \Twig_Error_Syntax("The wrapper '$name''s header has already been defined.", $lineno);
        }
        self::$wrappers[] = $name;

        $this->parser->getStream()->expect(\Twig_Token::BLOCK_END_TYPE);
        $body = $this->parser->subparse(array($this, 'decideWrapperHeaderEnd'), true);
        $this->parser->getStream()->expect(\Twig_Token::BLOCK_END_TYPE);
        return new WrapperHeaderNode($name, $body, $token->getLine(), $this->getTag());
    }

    public function decideWrapperHeaderEnd(\Twig_Token $token)
    {
        return $token->test('endwrapperheader');
    }

    public function getTag()
    {
        return 'wrapperheader';
    }

} 
```

wrapperfooter 的令牌解析器：Twig\TokenParser\WrapperFooterTokenParser.php：

```
<?php

// src/Fuz/ToolsBundle/Twig/TokenParser/WrapperFooterTokenParser.php

namespace Fuz\ToolsBundle\Twig\TokenParser;

use Fuz\ToolsBundle\Twig\Node\WrapperFooterNode;

class WrapperFooterTokenParser extends \Twig_TokenParser
{

    static public $wrappers = array ();

    public function parse(\Twig_Token $token)
    {
        $lineno = $token->getLine();
        $stream = $this->parser->getStream();

        $name = $stream->expect(\Twig_Token::NAME_TYPE)->getValue();
        if (in_array($name, self::$wrappers))
        {
            throw new \Twig_Error_Syntax("The wrapper '$name''s footer has already been defined.", $lineno);
        }
        self::$wrappers[] = $name;

        $this->parser->getStream()->expect(\Twig_Token::BLOCK_END_TYPE);
        $body = $this->parser->subparse(array($this, 'decideWrapperFooterEnd'), true);
        $this->parser->getStream()->expect(\Twig_Token::BLOCK_END_TYPE);
        return new WrapperFooterNode($name, $body, $token->getLine(), $this->getTag());
    }

    public function decideWrapperFooterEnd(\Twig_Token $token)
    {
        return $token->test('endwrapperfooter');
    }

    public function getTag()
    {
        return 'wrapperfooter';
    }

} 
```

令牌解析器检索所有需要的信息，我们现在需要将这些信息编译成 PHP。此 PHP 代码将由 Twig_Template 实现中的 twig 引擎生成（您可以在缓存目录中找到生成的类）。它在方法中生成代码，并且包含文件的上下文不可用（因为上下文数组不是通过引用给出的）。这样，如果没有全局上下文，就不可能访问包含文件中的内容。这就是为什么在这里，我使用静态属性......这根本不好，但我不知道如何避免它们（如果你有想法，请告诉我！:)）。

包装标签的编译器：Twig\Nodes\WrapperNode.php

```
<?php

// src/Fuz/ToolsBundle/Twig/Node/WrapperNode.php

namespace Fuz\ToolsBundle\Twig\Node;

class WrapperNode extends \Twig_Node
{

    public function __construct($name, $body, $lineno = 0, $tag = null)
    {
        parent::__construct(array ('body' => $body), array ('name' => $name), $lineno, $tag);
    }

    public function compile(\Twig_Compiler $compiler)
    {
        $compiler
           ->addDebugInfo($this)
           ->write('if (isset(\\')
           ->raw(__NAMESPACE__)
           ->raw('\WrapperHeaderNode::$headers[')
           ->repr($this->getAttribute('name'))
           ->raw('])) {')
           ->raw("\n")
           ->indent()
           ->write('echo \\')
           ->raw(__NAMESPACE__)
           ->raw('\WrapperHeaderNode::$headers[')
           ->repr($this->getAttribute('name'))
           ->raw('];')
           ->raw("\n")
           ->outdent()
           ->write('}')
           ->raw("\n");

        $compiler
           ->addDebugInfo($this)
           ->subcompile($this->getNode('body'));

        $compiler
           ->addDebugInfo($this)
           ->write('if (isset(\\')
           ->raw(__NAMESPACE__)
           ->raw('\WrapperFooterNode::$footers[')
           ->repr($this->getAttribute('name'))
           ->raw('])) {')
           ->raw("\n")
           ->indent()
           ->write('echo \\')
           ->raw(__NAMESPACE__)
           ->raw('\WrapperFooterNode::$footers[')
           ->repr($this->getAttribute('name'))
           ->raw('];')
           ->raw("\n")
           ->outdent()
           ->write('}')
           ->raw("\n");
    }

} 
```

wrapperheader 标签的编译器：Twig\Nodes\WrapperHeaderNode.php

```
<?php

// src/Fuz/ToolsBundle/Twig/Node/WrapperHeaderNode.php

namespace Fuz\ToolsBundle\Twig\Node;

/**
 * @author alain tiemblo
 */
class WrapperHeaderNode extends \Twig_Node
{

    static public $headers = array();

    public function __construct($name, $body, $lineno = 0, $tag = null)
    {
        parent::__construct(array ('body' => $body), array ('name' => $name), $lineno, $tag);
    }

    public function compile(\Twig_Compiler $compiler)
    {
        $compiler
           ->write("ob_start();")
           ->raw("\n")
           ->subcompile($this->getNode('body'))
           ->write(__CLASS__)
           ->raw('::$headers[')
           ->repr($this->getAttribute('name'))
           ->raw('] = ob_get_clean();')
           ->raw("\n");
    }

} 
```

wrapperfooter 标签的编译器：Twig\Nodes\WrapperFooterNode.php

```
<?php

// src/Fuz/ToolsBundle/Twig/Node/WrapperFooterNode.php

namespace Fuz\ToolsBundle\Twig\Node;

class WrapperFooterNode extends \Twig_Node
{

    static public $footers = array();

    public function __construct($name, $body, $lineno = 0, $tag = null)
    {
        parent::__construct(array ('body' => $body), array ('name' => $name), $lineno, $tag);
    }

    public function compile(\Twig_Compiler $compiler)
    {
        $compiler
           ->write("ob_start();")
           ->raw("\n")
           ->subcompile($this->getNode('body'))
           ->write(__CLASS__)
           ->raw('::$footers[')
           ->repr($this->getAttribute('name'))
           ->raw('] = ob_get_clean();')
           ->raw("\n");
    }

} 
```

现在执行正常。让我们试试吧！

创建一个名为 wrappers.html.twig 的视图：

```
{# src/Fuz/LayoutBundle/Resources/views/Default/wrappers.html.twig #}

{% wrapperheader demo %}
HEAD
{% endwrapperheader %}

{% wrapperfooter demo %}
FOOT
{% endwrapperfooter %} 
```

创建一个名为 what you want.html.twig 的视图：

```
{# src/Fuz/HomeBundle/Resources/views/Default/index.html.twig #}

{% include 'FuzLayoutBundle:Default:wrappers.html.twig' %}

{% wrapper demo %}
O YEAH
{% endwrapper %} 
```

这显示：

> 头哦是的脚

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-08T19:10:52.720

Twig 变量和宏有一个相当直接的方法。

```
<div class="box indent">
  <div class="padding">
    my code here
  </div>
</div> 
```

创建一个宏：

```
{% macro box(content) %}
    <div class="box indent">
        <div class="padding">
            {{ content }}
        </div>
    </div>
{% endmacro %} 
```

并这样称呼它：

```
{% set content %}
    my code here
{% endset %}

{{ _self.box(content) }} 
```

不是特别优雅，但代码山更少！

# ruby-on-rails - 如何解决 rake db:migrate with 'rake-10.0.4'

> ID：15997323
> 
> 赞同：0
> 
> 时间：2013-04-14T08:54:42.063
> 
> 标签：ruby-on-rails, ruby

```
tim@ubuntu:~/rails_projects/sample_app$ bundle exec rake db:migrate
ERROR: 'rake/rdoctask' is obsolete and no longer supported. Use 'rdoc/task' (available in RDoc 2.4.2+) instead.

tim@ubuntu:~/rails_projects/sample_app$ gem uninstall rake --version 10.0.4

You have requested to uninstall the gem:
    rake-10.0.4
addressable-2.3.3 depends on [rake (>= 0.7.3)]
diff-lcs-1.2.2 depends on [rake (~> 10.0)]
excon-0.20.1 depends on [rake (>= 0)]
heroku-api-0.3.9 depends on [rake (>= 0)]
launchy-2.2.0 depends on [rake (~> 10.0.3)]
mime-types-1.22 depends on [rake (~> 10.0)]
nokogiri-1.5.9 depends on [rake (>= 0.9)]
rack-1.2.8 depends on [rake (>= 0)]
railties-3.0.1 depends on [rake (>= 0.8.4)]
rspec-core-2.13.1 depends on [rake (~> 10.0.0)]
rspec-expectations-2.13.0 depends on [rake (~> 10.0.0)]
rspec-mocks-2.13.1 depends on [rake (~> 10.0.0)]
rspec-rails-2.13.0 depends on [rake (~> 10.0.0)]
thor-0.14.6 depends on [rake (>= 0.8)]
treetop-1.4.12 depends on [rake (>= 0)]
If you remove this gems, one or more dependencies will not be met.
Continue with Uninstall? [Yn]  ^CERROR:  Interrupted 
```

对于 rake-10.0.4 的这些依赖关系，我不想回滚到 rake-0.8.7。

这个问题还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:48:12.403

如果您使用的是 rake 版本 > 10.0.0 。请编辑您的 Rakefile

从：

```
require 'rake'
require 'rake/testtask'
require 'rake/rdoctask'
require 'tasks/rails' 
```

至：

```
require 'rake'
require 'rake/testtask'
require 'rdoc/task'
require 'tasks/rails' 
```

# wso2 - WSO2：统计客户端

> ID：15997327
> 
> 赞同：0
> 
> 时间：2013-04-14T08:55:35.677
> 
> 标签：wso2, wso2esb, jmx, wso2dss, mbeans

**我如何使用应用程序服务器的 StatisticsAdmin**

我的场景是：我想获得部署在服务器（AppServer/DataServer..）上并由 ESB 使用治理 regidtry 的发现代理进行探测的服务的响应时间。如果有可能我该如何实施？否则我应该直接使用服务名称从 AppServer 获取服务响应时间。我可以使用这个包和接口创建 ServerAdminMBean 的代理

```
import org.wso2.carbon.server.admin.service.ServerAdminMBean 
```

但我需要使用 StatisticsAdmin 类型的属性和方法。我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:54:02.480

您可以使用 JMX 访问这些信息。有 StatisticAdmin MBena 可用于监视 . 您可以参考[这个](http://heshans.blogspot.com/2010/01/access-jmx-mbean-information-through.html)来了解如何使用 Java 调用它们。

![在此处输入图像描述](https://i.stack.imgur.com/qb8wV.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T09:01:21.483

你不需要做你自己的实现。它已经在服务统计页面中。您可以在监视器-->系统统计页面中找到服务统计详细信息。如果您需要有关服务的更细粒度的详细信息，则可能需要将 BAM 与 AS 集成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:50:56.087

部署任何服务后，服务器后端控制台中会打印一条日志消息。（您之前可能注意到了）。该消息由“LoggingAdmin”管理服务处理。在该管理服务中有一个名为“getSystemLog”的操作，该操作将所有日志消息一一发送。您可以创建简单的 java 类来调用该管理服务并获取您部署的每个服务的部署时间戳。如果您知道服务部署的开始时间，则通过上述管理服务，您可以获得每个服务部署的时间。

# c# - NetOffice-以 HTML 格式读取 word 文档

> ID：15997328
> 
> 赞同：0
> 
> 时间：2013-04-14T08:55:42.237
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010

我正在使用 Visual Studio 2010。C# 编程语言；.NET framework 4.0 对于阅读 word 文档，我使用的是 NetOffice 1.5.1.2 库。
在我的控制器中：

```
 NetOffice.Factory.Initialize();
        // open word and an existing document
        NetOffice.WordApi.Application wordApplication = new  NetOffice.WordApi.Application();
        NetOffice.WordApi.Document newDocument = wordApplication.Documents.Open(@"C:\myWordFile.docx");

        // read text of document
        string text= newDocument.Content.Text;

        // close word and dispose reference 
        wordApplication.Quit();
        wordApplication.Dispose(); 
```

但是，文本只是纯文本。我需要的是在浏览器中显示的 HTML 文本与 word 文档中的格式完全相同。包括表格，字体，...
我不知道该怎么做。任何帮助，请！
太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T09:04:48.223

[NetOffice](http://netoffice.codeplex.com/)在后台使用 COM，因此受到与 Interop 相同的限制 -**这是[根据 Microsoft 在 ASP.NET 中不支持等](http://support.microsoft.com/default.aspx?scid=kb;EN-US;q257757#kb2)！**

您可以使用其他库，例如[Microsoft 的 OpenXML](http://www.microsoft.com/download/en/details.aspx?id=5124)（免费）或[Aspose.Words](http://www.aspose.com/.net/word-component.aspx)（商业），它们不依赖于 Office，并且在像您这样的服务器方案中完全受支持。

# c++ - 结构作为属性

> ID：15997329
> 
> 赞同：0
> 
> 时间：2013-04-14T08:55:45.407
> 
> 标签：c++

这些是我班级的属性：

```
 class Addition_Struct: public Addition {
    // attributes
    struct a {
        int element;
        struct a *next;
    };
    struct b {
        int element;
        struct b *next;
    };
    struct outcome {
        int element;
        struct outcome *next;
    };
    struct a a_data;
    struct b b_data;
    struct outcome outcome_data;
// methods
a convertToStackA(int); // everything is right with this line 
```

如何从 .cpp 文件中调用它们？使用`this->a`语法返回“不允许类型名称”。使用`a*`as 方法的返回值显示“不允许使用标识符”和“声明与...不兼容”。

.cpp 文件：

```
a* Addition_Struct::convertToStackA(int number)
{
   // identifier "a" is undefined, and declaration is incompatible
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T09:03:59.267

这：

```
class Addition_Struct: public Addition {
// attributes
    typedef struct a {
        int element;
        struct a *next;
    } a;
}; 
```

只定义了一个名为`Addition_Struct::a`. 没有`a`您可以访问的成员`this-a`。删除`typedef`以获取您想要的成员。

**编辑**

您提供的方法定义不是内联的（它在类定义之外）。因此，您必须为返回类型使用完全范围的类型名称。

```
Addition_Struct::a* Addition_Struct::convertToStackA(int number)
{

} 
```

因为编译器看到的是 type`Addition_Struct::a`而不是 type `a`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T09:05:28.900

在课堂上，您可以使用`a`. 从类外部使用完全限定名称`Addition_Struct::a`。

顺便说一句，因为这是 C++，你可以使用

```
struct a {
    int element;
    a *next;
}; 
```

没有 typedef。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T09:01:44.767

在您的示例中，您仅声明了结构，因此您的 Addition_Struct 定义了 3 个结构，但没有数据成员。你需要添加类似的东西

```
a a_data;
b b_data;
outcome outcome_data; 
```

在结构声明之后，能够访问数据成员，例如：

```
this->a_data;
this->b_data;
this->outcome_data; 
```

# iphone - NSLog 指针语法

> ID：15997336
> 
> 赞同：5
> 
> 时间：2013-04-14T08:56:05.427
> 
> 标签：iphone, ios, objective-c, nslog

我对 NSLog 的语法有点困惑。例如，

```
    NSString *nameString = @"名称";
    NSLog(@"nameString is: %@", nameString);

```

如果我的理解是正确的（很可能不是），那么 nameString 被定义为指向字符串的指针。我当时认为这将打印 nameString 保存的内存地址，而不是该地址的值。因此，如果这是真的，那么在 NSLog 语句中，要获取指针的值，我们是否需要使用星号符号来访问 nameString 指向的内容，如下所示：

```
    NSLog(@"nameString 是：%@", *nameString);

```

? 自从用 C 编程以来已经有一段时间了，但由于 Objective-C 是 CI 的超集，因此认为它们的行为会相似。

一个解释将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-14T09:01:06.977

命令 %@ 就像调用`-description`接收器上的方法的“快捷方式”。对于 NSString 它只是显示字符串本身，因为它是从 NSObject 继承的，您可以覆盖它，如果您为自己的类创建非常有用。在这种情况下，默认行为是打印指针的值。
如果要打印字符串中指针的地址，只需替换为：

```
NSLog(@"nameString is: %p", nameString) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T09:01:25.713

我认为您仅使用星号来声明指针。然后，您只使用您决定的名称。例如：

```
NSString *foo = [[NSString alloc] initWithString:@"Hello"];

NSLog(@"%@", foo); 
```

如果我错了，请纠正我:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T09:04:06.403

它是一个对象，而 NSLog 是一个函数，它使用其格式说明符来确定如何处理参数。在这种情况下，说明符是 %@，它告诉 NSLog 调用对象上的方法。通常这将调用返回 NSString 的方法“description”，但它可能首先会先响应到方法，然后再使用其他一些字符串方法。

# iphone - iOS 使用 CHCSVParser 读取 CSV 文件

> ID：15997339
> 
> 赞同：0
> 
> 时间：2013-04-14T08:56:38.300
> 
> 标签：iphone, ios, ipad

这是我的代码，csv文件是
“Hello,Baby”,Testing
ByeBye,Testing

当我打印出 rowArray 时，我发现结果包含“
“Hello,Baby”

我怎样才能删除它

```
- (IBAction)importToDatabase:(id)sender {
    NSString *csvFilePath = [NSString stringWithFormat:@"%@/Documents/%@",NSHomeDirectory(),@"test1.csv"];
    if([[NSFileManager defaultManager] fileExistsAtPath:csvFilePath])
        NSLog(@"Exist");
    else
        NSLog(@"NOT EXIST");
    NSArray *rowArray = [NSArray arrayWithContentsOfCSVFile:csvFilePath];
    NSLog(@"%@",[[rowArray objectAtIndex:0]objectAtIndex:0]);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:26:36.927

您可以使用该函数`stringByReplacingOccurrencesOfString:withString:`将 替换`"`为空白字符串（请参阅[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/stringByReplacingOccurrencesOfString%3awithString%3a)）。如果可以访问该方法的代码，则`arrayWithContentsOfCSVFile:`可以在其中执行此操作，否则，您将不得不迭代抛出数组的值以将其删除。

# java - 更改构建目录后如何在netbeans中“保存时编译”？

> ID：15997341
> 
> 赞同：4
> 
> 时间：2013-04-14T08:56:56.167
> 
> 标签：java, netbeans

我的 NetBeans 的“保存时编译”功能运行良好。

但是在我通过添加一行来更改我的项目的构建目录之后

```
build.dir=path/to/my/own/build/dir 
```

或者

```
build.classes.dir=path_to_my_own_build_dir/classes 
```

对于文件`path_to_my_project/nbproject/private/private.properties`，NetBeans 不再“保存时编译”。

我必须单击“编译”或“清理并编译”按钮来编译我的项目。

我检查了`nbproject/private/private.properties`：有`compile.on.save=true`一行，并检查了项目属性对话框中的“保存时编译”复选框。

有没有办法让 NetBeans “保存时编译”？

# javascript - 同时设置一个对象的多个变量

> ID：15997345
> 
> 赞同：2
> 
> 时间：2013-04-14T08:57:30.413
> 
> 标签：javascript

有没有办法同时设置一个对象的多个变量。例如我有以下代码：

```
_p.a=1; 
_p.b=2;
_p.c=3; 
```

我想做的是如下所示：

```
_p.[{'a': 1, 'b': 2, 'c': 3}];  // this code does not do the trick 
```

有没有办法做这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T08:58:45.103

您可以使用[`Object.defineProperties`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperties)：

```
var _p = {
  foo: 'bar'
};
Object.defineProperties(_p, {
  'a': {
    value: 1,
    writable: true,
    enumerable: true
  },
  'b': {
    value: 2,
    writable: true,
    enumerable: true
  },
  'c': {
    value: 3,
    writable: true,
    enumerable: true
  }
});
console.log(_p); //Object {foo: "bar", a: 1, b: 2, c: 3} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T09:03:05.553

您有一个对象 _p 并希望使用另一个对象来扩展它 - 在您的情况下，是一个文字。

jquery 有一个实用程序：

[http://api.jquery.com/jQuery.extend/](http://api.jquery.com/jQuery.extend/)

```
 $.extend(_p, {'a': 1, 'b': 2, 'c': 3}); 
```

下划线也是如此：

[http://underscorejs.org/#extend](http://underscorejs.org/#extend)

```
_.extend(_p,  {'a': 1, 'b': 2, 'c': 3}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T09:04:59.537

我想你可以使用这样的东西：

```
Object.prototype.setProps = function(props){
    for(var i in props){
        if(props.hasOwnProperty(i))
            this[i] = props[i];
    }
} 
```

和：

```
_p.setProps({a: 1, b: 2, c: 3}); 
```

# python - 如何从字符串中运行大量 python 代码？

> ID：15997361
> 
> 赞同：2
> 
> 时间：2013-04-14T08:59:31.593
> 
> 标签：python, url, python-3.x, exec, dropbox

我需要能够从字符串中运行大量 python 代码。简单地使用`exec`似乎不起作用，因为虽然代码在正常设置下完美运行，但这样做似乎会引发错误。我也不认为我可以将它导入它，因为它托管在互联网上。这是代码：

```
import urllib.request

URL = "https://dl.dropboxusercontent.com/u/127476718/instructions.txt"  

def main():
    instructions = urllib.request.urlopen(URL)

    exec(instructions.read().decode())

if __name__ == "__main__":
    main() 
```

这是我得到的错误：

```
Traceback (most recent call last):
  File "C:\Python33\rc.py", line 12, in <module>
    main()
  File "C:\Python33\rc.py", line 9, in main
    exec(instructions.read().decode())
  File "<string>", line 144, in <module>
  File "<string>", line 120, in main
NameError: global name 'Player' is not defined 
```

我尝试运行的代码可在第一个代码片段的链接中找到。

如果你有任何问题，我会回答他们。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T13:53:01.693

在不指定全局变量的情况下，[`exec`函数](http://hg.python.org/cpython/file/d9893d13c628/Python/bltinmodule.c#l805)(Python/bltinmodule.c) 使用`PyEval_GetGlobals()`and `PyEval_GetLocals()`。对于函数的执行帧，后者会创建一个新的`f_locals`dict，它将成为编译代码中`IMPORT_NAME`, `STORE_NAME`, ops 的目标。`LOAD_NAME`

在 Python 的模块级别，正常情况是`globals() == locals()`. 在这种情况下`STORE_NAME`，使用模块的全局变量，这是在模块中定义的函数将用作其全局命名空间。但是，对全局变量和局部变量使用单独的 dicts 显然打破了这一假设。

解决方案是手动提供`globals`，这`exec`也将用作`locals`：

```
def main():
    instructions = urllib.request.urlopen(URL)
    exec(instructions.read().decode(), globals()) 
```

您还可以使用已`__name__`定义的新字典：

```
def main():
    instructions = urllib.request.urlopen(URL)
    g = {'__name__': '__main__'}
    exec(instructions.read().decode(), g) 
```

我在源代码中看到当前目录需要一个名为“pickup.wav”的声音文件，否则你只会得到另一个错误。

当然，关于`exec`像这样使用的安全问题的评论仍然适用。我只是在解决命名空间的技术问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T09:38:38.417

首先，我认为您可以尝试`__import__`使用 StringIO 对象。可能看起来像[StackOverflow: Local Import Statements in Python](https://stackoverflow.com/questions/1699108/local-import-statements-in-python)。

……但这是不对的。

然后我想到了使用该`imp`模块，但这也不起作用。

然后我查看了：Alex Martelli 对[Use of Eval in Python](https://stackoverflow.com/questions/1087255/use-of-eval-in-python)的回答——并尝试自己在一段愚蠢的代码上使用它。

我可以获取`ast`对象，以及从中获取的结果`compile()`（尽管如果您愿意，似乎也可以简单地调用`compile(some_string_containing_python_source, 'SomeName', 'exec')`而无需通过`ast.parse()`中间步骤。从我收集的内容来看，`ast`如果您想遍历结果语法，您会使用树，在编译之前检查并可能修改节点。

最后，在执行命名空间中定义结果函数、类或变量之前，您似乎需要`exec()`得到结果。`compile()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T09:03:39.677

您可以使用`pipe`将所有字符串放入 python 的子进程并从中获取输出结果。

谷歌`os.popen`或`subprocess.Popen`

# sql - 替代依赖 SQL 'where' 子句中条件的执行顺序

> ID：15997363
> 
> 赞同：0
> 
> 时间：2013-04-14T08:59:38.783
> 
> 标签：sql, sql-server-2000

在 JavaScript 等语言中，您可以有 2 个条件语句并用第一个“保护”第二个。例如：

```
if( scarryObject != null && scarryObject.scarryMethod() ) { ... }
// if scarryObject is null scarryMethod will not be called 
```

我想我会像这样在 SQL 中实现同样的效果：

```
where int_date > 19500101
    and month(CONVERT(smalldatetime, ... int_date)) 
```

这里的问题是，如果`int_date`是一些“坏”值，例如 -1、0、1，则转换将失败，并且 sp 将因错误而停止。我认为第一个检查`int_date > 19500101`将首先得到评估，如果为假，则将跳过第二个条件。

看起来它不像这样工作......或者？有没有其他方法可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:08:52.007

您的查询在语法上不正确，因为该子句`month(CONVERT....`不是条件。

假设您想与某个数字进行比较，表达您想要的一种可能的方式是

```
SELECT *
FROM   myTable
WHERE  case 
       when int_date > 19500101 
         then -1 
         else month(CONVERT(smalldatetime, ... int_date))
       end = @YourMonth 
```

您将“保护”对“月份”的评估，而不是条件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-14T09:02:09.937

您可以尝试将查询分成两部分。这是概念：

```
SELECT *
FROM (
    SELECT *
    FROM myTable
    WHERE int_date > 19500101
) t
WHERE month(CONVERT(smalldatetime, ... t.int_date)) 
```

# solr - Solr 安全管理面板

> ID：15997372
> 
> 赞同：1
> 
> 时间：2013-04-14T09:00:41.307
> 
> 标签：solr

我已经为我的一个网站设置了 Solr (v 4.2.1)，但我无法保护我正在使用 Jetty 运行 Solr 的管理面板。我没有使用 tomcat 我已经编辑了 example/etc/jetty.xml 并修改了主机值以读取

```
<Call name="addConnector">
      <Arg>
          <New class="org.eclipse.jetty.server.bio.SocketConnector">
            <Set name="host"><SystemProperty name="jetty.host" default="10.100.202.42"/></Set>
            <Set name="port"><SystemProperty name="jetty.port" default="8983"/></Set>
            <Set name="maxIdleTime">50000</Set>
            <Set name="lowResourceMaxIdleTime">1500</Set>
            <Set name="statsOn">false</Set>
          </New>
      </Arg>
    </Call> 
```

我启动服务器并绑定到

```
::ffff:10.100.202.42:8983 
```

但是，我可以使用站点的外部 IP 访问管理面板。我错过了什么吗？

谢谢

# python - 每个列的 Pandas Pivot 表小计

> ID：15997379
> 
> 赞同：1
> 
> 时间：2013-04-14T09:01:58.980
> 
> 标签：python, pandas

我可以使用 pandas 中的 pivot_table 来实现我想要的输出（如下所示）或与以下数据集类似的东西吗？我正在尝试做类似的事情：

```
pivot_table(df, rows=['region'], cols=['area','distributor','salesrep'], 
            aggfunc=np.sum, margins=True).stack(['area','distributor','salesrep']) 
```

但我只得到每个区域的小计，如果我将区域从 cols 移动到行，那么我只会得到每个区域的小计。

数据集：

```
region 区域经销商 salesrep sales invoice_count
北海中部 HIN 营销 TLS 500 25
北海中部 HIN 营销 TLS 500 25
北海中部 HIN MARKETING OSE 500 25
北海中部 HIN MARKETING OSE 500 25
北海中环广恒 TCS 500 25
北海中环广恒 TCS 500 25
北海中环广兴 LBH 500 25
北海中环广兴 LBH 500 25
怡保中央 SGH EDERAN CHAN 500 25
怡保中央 SGH EDERAN CHAN 500 25
怡保中央 SGH EDERAN KAMACHI 500 25
怡保中央 SGH EDERAN KAMACHI 500 25
怡保中部 CORE SYN LILIAN 500 25
怡保中部 CORE SYN LILIAN 500 25
怡保中部 CORE SYN TEOH 500 25
怡保中部 CORE SYN TEOH 500 25
东 JB 利华 NF05 500 25
东 JB 利华 NF05 500 25
东 JB 丽华 NF06 500 25
东 JB 丽华 NF06 500 25
东 JB WONDER F&B SEREN 500 25
东 JB WONDER F&B SEREN 500 25
东 JB WONDER F&B MONC 500 25
东 JB WONDER F&B MONC 500 25
东 PJ PENGEDAR NORM 500 25
东 PJ PENGEDAR NORM 500 25
东 PJ PENGEDAR SIMON 500 25
东 PJ PENGEDAR SIMON 500 25
东 PJ HEBAT OGI 500 25
东 PJ HEBAT OGI 500 25
东 PJ HEBAT MIGI 500 25
东 PJ HEBAT MIGI 500 25

```

期望的输出：

```
region 地区经销商 salesrep invoice_count sales
总计 800 16000
中环 中环 总计 400 8000
北海中部 北海 总计 200 4000
北海中部 HIN MARKETING HIN MARKETING 总计 100 2000
Central Butterworth HIN MARKETING OSE 50 1000
北海中部 HIN 营销 TLS 50 1000
北海中环 KWANG HENG KWANG HENG Total 100 2000
北海中环广兴 LBH 50 1000
北海中环广亨 TCS 50 1000
怡保中环 怡保 总计 200 4000
怡保中环 CORE SYN CORE SYN 总计 100 2000
Central Ipoh CORE SYN LILIAN 50 1000
怡保中部 CORE SYN TEOH 50 1000
怡保中央 SGH EDERAN SGH EDERAN 总计 100 2000
怡保中央 SGH EDERAN CHAN 50 1000
Central Ipoh SGH EDERAN KAMACHI 50 1000
东东 总计 400 8000
东新山新山总计 200 4000
East JB LEI WAH LEI WAH 合计 100 2000
东 JB 利华 NF05 50 1000
东 JB 利华 NF06 50 1000
East JB WONDER F&B WONDER F&B Total 100 2000
东 JB WONDER F&B MONC 50 1000
东 JB WONDER F&B SEREN 50 1000
东 PJ PJ 总计 200 4000
东 PJ HEBAT HEBAT 总计 100 2000
东 PJ HEBAT MIGI 50 1000
东 PJ HEBAT OGI 50 1000
东 PJ PENGEDAR PENDEGAR 总计 100 2000
东 PJ PENGEDAR NORM 50 1000
东 PJ PENGEDAR SIMON 50 1000

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:41:16.130

我们可以使用`groupby`而不是`pivot_table`：

```
import numpy as np
import pandas as pd

def label(ser):
    return '{s} Total'.format(s=ser)

filename = 'data.txt'
df = pd.read_table(filename, delimiter='\t')

total = pd.DataFrame({'region': ['Grand Total'],
                      'invoice_count': df['invoice_count'].sum(),
                      'sales': df['sales'].sum()})
total['total_rank'] = 1

region_total = df.groupby(['region'], as_index=False).sum()
region_total['area'] = region_total['region'].apply(label)
region_total['region_rank'] = 1

area_total = df.groupby(['region', 'area'], as_index=False).sum()
area_total['distributor'] = area_total['area'].apply(label)
area_total['area_rank'] = 1

dist_total = df.groupby(
    ['region', 'area', 'distributor'], as_index=False).sum()
dist_total['salesrep'] = dist_total['distributor'].apply(label)

rep_total = df.groupby(
    ['region', 'area', 'distributor', 'salesrep'], as_index=False).sum()

# UNION the DataFrames into one DataFrame
result = pd.concat([total, region_total, area_total, dist_total, rep_total])

# Replace NaNs with empty strings
result.fillna({'region': '', 'area': '', 'distributor': '', 'salesrep':
              ''}, inplace=True)

# Reorder the rows
sorter = np.lexsort((
    result['distributor'].rank(),
    result['area_rank'].rank(),
    result['area'].rank(),
    result['region_rank'].rank(),
    result['region'].rank(),
    result['total_rank'].rank()))
result = result.take(sorter)
result = result.reindex(
    columns=['region', 'area', 'distributor', 'salesrep', 'invoice_count', 'sales'])
print(result.to_string(index=False)) 
```

产量

```
 region           area        distributor             salesrep  invoice_count  sales
 Grand Total                                                                   800  16000
     Central  Central Total                                                    400   8000
     Central    Butterworth  Butterworth Total                                 200   4000
     Central    Butterworth      HIN MARKETING  HIN MARKETING Total            100   2000
     Central    Butterworth      HIN MARKETING                  OSE             50   1000
     Central    Butterworth      HIN MARKETING                  TLS             50   1000
     Central    Butterworth         KWANG HENG     KWANG HENG Total            100   2000
     Central    Butterworth         KWANG HENG                  LBH             50   1000
     Central    Butterworth         KWANG HENG                  TCS             50   1000
     Central           Ipoh         Ipoh Total                                 200   4000
     Central           Ipoh           CORE SYN       CORE SYN Total            100   2000
     Central           Ipoh           CORE SYN               LILIAN             50   1000
     Central           Ipoh           CORE SYN                 TEOH             50   1000
     Central           Ipoh         SGH EDERAN     SGH EDERAN Total            100   2000
     Central           Ipoh         SGH EDERAN                 CHAN             50   1000
     Central           Ipoh         SGH EDERAN              KAMACHI             50   1000
        East     East Total                                                    400   8000
        East             JB           JB Total                                 200   4000
        East             JB            LEI WAH        LEI WAH Total            100   2000
        East             JB            LEI WAH                 NF05             50   1000
        East             JB            LEI WAH                 NF06             50   1000
        East             JB         WONDER F&B     WONDER F&B Total            100   2000
        East             JB         WONDER F&B                 MONC             50   1000
        East             JB         WONDER F&B                SEREN             50   1000
        East             PJ           PJ Total                                 200   4000
        East             PJ              HEBAT          HEBAT Total            100   2000
        East             PJ              HEBAT                 MIGI             50   1000
        East             PJ              HEBAT                  OGI             50   1000
        East             PJ           PENGEDAR       PENGEDAR Total            100   2000
        East             PJ           PENGEDAR                 NORM             50   1000
        East             PJ           PENGEDAR                SIMON             50   1000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T11:15:58.287

我不知道如何在表格中获取小计，但如果你运行

```
df.pivot_table(rows=['region','area','distributor','salesrep'],
  aggfunc=np.sum, margins=True) 
```

你会得到

```
 invoice_count  sales
region  area        distributor   salesrep                      
Central Butterworth HIN MARKETING OSE                  50   1000
                                  TLS                  50   1000
                    KWANG HENG    LBH                  50   1000
                    KWANG HENGG   TCS                  50   1000
        Ipoh        CORE SYN      LILIAN               50   1000
                                  TEOH                 50   1000
                    SGH EDERAN    CHAN                 50   1000
                                  KAMACHI              50   1000
East    JB          LEI WAH       NF05                 50   1000
                                  NF06                 50   1000
                    WONDER F&B    MONC                 50   1000
                                  SEREN                50   1000
        PJ          HEBAT         MIGI                 50   1000
                                  OGI                  50   1000
                    PENGEDAR      NORM                 50   1000
                                  SIMON                50   1000
All                                                   800  16000 
```

如果您想要基于 say`region`和的总数`area`，您可以运行

```
df.pivot_table(rows=['region', 'area'], aggfunc=np.sum, margins=True) 
```

这导致

```
 invoice_count  sales
region  area                             
Central Butterworth            200   4000
        Ipoh                   200   4000
East    JB                     200   4000
        PJ                     200   4000
All                            800  16000 
```

# android - 需要为微调器创建一个线程吗？

> ID：15997380
> 
> 赞同：-1
> 
> 时间：2013-04-14T09:01:59.410
> 
> 标签：android, multithreading, progressdialog

我的代码在这里

```
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    progress = new ProgressDialog(this);
    progress.setTitle("Loading");
    progress.setMessage("Wait while loading...");
    progress.show();
    Log.i("Spinner", "Starts");
    String trip_id = trips.get(position);
    FeedParser parser = FeedParserFactory.getParser(ParserType.ANDROID_SAX);
    stopTimes = parser.parseStopTime().get(trip_id);
    Collections.sort(stopTimes,StopTime.StopTimeComparator);
    stops = parser.parseStop();
    List<String> stopList = new ArrayList<String>(stopTimes.size());
    for (StopTime st: stopTimes) {
        stopList.add(stops.get(st.getStop_id()).getStop_name() + st.getDeparture_time().toString());
    }
    Log.i("Spinner", "Dismissed");
//      progress.dismiss();
    Intent viewStops = new Intent(this, StopActivity.class);
    viewStops.putStringArrayListExtra("stops_to_parse", (ArrayList<String>) stopList);
    this.startActivity(viewStops);
} 
```

单击列表时，我想在程序加载其他内容时显示一个指示加载的微调器，然后将其关闭并转向另一个活动。

但是它的作用是当你点击列表时，它只是加载东西，不显示微调器，然后在加载完所有东西后，微调器突然闪烁然后转向另一个视图。

显然，该程序正忙于加载其他无法显示微调器的东西，直到它完成。

如何在程序正确计算其他内容时显示微调器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:24:43.060

正在发生的事情是您正在主线程（UI 线程）中进行耗时的工作（加载数据）。在加载数据时，界面被冻结并且无法绘制或交互。

要解决这个问题，您必须将耗时的任务转移到另一个线程。为此，您可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html "异步任务")，或者如果您愿意，可以使用纯 Java 线程。

在您的主线程中：

1.  显示微调器
2.  启动新线程

在您的新线程中：

1.  做好工作
2.  隐藏微调器

您可以在线找到许多 AsyncTask 教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T09:10:22.863

您可能应该使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)

# iphone - UISwipeGestureRecognizer 无需触摸

> ID：15997381
> 
> 赞同：0
> 
> 时间：2013-04-14T09:02:06.270
> 
> 标签：iphone, ios, objective-c, uigesturerecognizer

我如何识别一个`UISwipeGestureRecognizer`，`UISwipeGestureRecognizerDirectionUp`然后直接在不抬起手指的情况下识别一个`UISwipeGestureRecognizerDirectionDown`识别器？

基本上，`UISwipeGestureRecognizers`当我改变方向时，我希望在不抬起手指的情况下识别多个。

**到目前为止我的代码...**

```
 - (void)viewDidLoad {        
        UISwipeGestureRecognizer *swipeUp = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(screenSwipedUp)];
        swipeUp.numberOfTouchesRequired = 1;
        swipeUp.direction = UISwipeGestureRecognizerDirectionUp;
        swipeUp.cancelsTouchesInView = NO;
        [self.view addGestureRecognizer:swipeUp];

        UISwipeGestureRecognizer *swipeDown = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(screenSwipedDown)];
        swipeDown.numberOfTouchesRequired = 1;
        swipeDown.direction = UISwipeGestureRecognizerDirectionDown;
        swipeDown.cancelsTouchesInView = NO;
        [self.view addGestureRecognizer:swipeDown];

    }

    - (void)screenSwipedUp {
        NSLog(@"SW-Up");
    }

    - (void)screenSwipedDown {
        NSLog(@"SW-Down");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:29:14.420

我不认为你可以用[UISwipeGestureRecognizer](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISwipeGestureRecognizer_Class/Reference/Reference.html)做到这一点。您可以改为使用[UIPanGestureRecognizer](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPanGestureRecognizer_Class/Reference/Reference.html)并实现该操作或创建[UIGestureRecognizer](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/cl/UIGestureRecognizer)的子类并[覆盖方法](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/cl/UIGestureRecognizer)以识别您的特殊手势。

# wpf - 带有绑定到组合框的按钮的弹出控件

> ID：15997383
> 
> 赞同：1
> 
> 时间：2013-04-14T09:02:12.897
> 
> 标签：wpf, combobox, popupwindow, buttonclick

我有一个弹出控件，里面有一个按钮。打开组合框时应显示弹出窗口，关闭时应消失。我的代码如下所示：

```
<Popup Name="myPopup" IsOpen="{Binding Path=IsDropDownOpen, ElementName=combo}" 
       Placement="Right" PlacementTarget="{Binding ElementName=combo}" 
       StaysOpen="False" Focusable="False" 
               AllowsTransparency="True" PopupAnimation="Fade" >
     <Button Click="Popup_Click">
        <Image Source="..\Images\edit.png" Height="30"/>
     </Button>
 </Popup>

 <ComboBox Name="combo"  SelectedValuePath="Key" DisplayMemberPath="Value" 
           Loaded="ComboBox_Loaded" SelectedValue="{Binding FamilyStatus}">
 </ComboBox> 
```

和功能：

```
 private void ComboBox_Loaded(object sender, RoutedEventArgs e)
 {
    combo.ItemsSource = GetComboValues();   
 } 
```

在这段代码中，我遇到了一个问题：当组合框打开时显示弹出窗口，当组合框关闭但点击按钮（从弹出窗口内部）未触发时关闭！我想这是因为当鼠标移动到按钮时，弹出窗口的“IsOpen”设置为假，因此不再触发点击。我尝试了一种不同的方法来设置 IsOpen="False" 并使用组合框事件打开弹出窗口：

DropDownOpened="ComboBox_Loaded_DropDownOpened" 和 StaysOpen="False"

```
private void ComboBox_Loaded_DropDownOpened(object sender, EventArgs e)
{
   myPopup.IsOpen = true;
   myPopup.StaysOpen = false;
} 
```

但是，即使我在窗口上选择了不同的文本框，弹出窗口也会保持打开状态，并且仅在两次单击后才会引发按钮的单击事件。（如果我添加一个`DropDownClosed="ComboBox_Loaded_DropDownClosed"`事件来关闭弹出窗口，弹出窗口会在我按下按钮之前再次消失）。有人可以帮忙解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:27:37.350

您应该重新模板组合框，因此属性 IsDropDownOpen 将不再影响它，然后即使他失去焦点，您也可以强制组合保持打开状态。我使用属性 Tag 替换 IsDropDownOpen 并在两个弹出窗口上设置 StaysOpen = true （也在组合框模板中）

这是代码：

**组合框模板：**

```
<Style x:Key="ComboBoxStyle1" TargetType="{x:Type ComboBox}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ComboBox}">
                    <Grid x:Name="MainGrid" SnapsToDevicePixels="true">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition MinWidth="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}" Width="0"/>
                        </Grid.ColumnDefinitions>
                        <Popup x:Name="PART_Popup" StaysOpen="True" AllowsTransparency="true" Grid.ColumnSpan="2" IsOpen="{Binding Tag, RelativeSource={RelativeSource TemplatedParent}}" Margin="1" PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}" Placement="Bottom">
                            <Microsoft_Windows_Themes:SystemDropShadowChrome x:Name="Shdw" Color="Transparent" MaxHeight="{TemplateBinding MaxDropDownHeight}" MinWidth="{Binding ActualWidth, ElementName=MainGrid}">
                                <Border x:Name="DropDownBorder" BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}" BorderThickness="1" Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}">
                                    <ScrollViewer x:Name="DropDownScrollViewer">
                                        <Grid RenderOptions.ClearTypeHint="Enabled">
                                            <Canvas HorizontalAlignment="Left" Height="0" VerticalAlignment="Top" Width="0">
                                                <Rectangle x:Name="OpaqueRect" Fill="{Binding Background, ElementName=DropDownBorder}" Height="{Binding ActualHeight, ElementName=DropDownBorder}" Width="{Binding ActualWidth, ElementName=DropDownBorder}"/>
                                            </Canvas>
                                            <ItemsPresenter x:Name="ItemsPresenter" KeyboardNavigation.DirectionalNavigation="Contained" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                        </Grid>
                                    </ScrollViewer>
                                </Border>
                            </Microsoft_Windows_Themes:SystemDropShadowChrome>
                        </Popup>
                        <ToggleButton BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}" Grid.ColumnSpan="2" IsChecked="{Binding Tag, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}">
                            <ToggleButton.Style>
                                <Style TargetType="{x:Type ToggleButton}">
                                    <Setter Property="OverridesDefaultStyle" Value="true"/>
                                    <Setter Property="IsTabStop" Value="false"/>
                                    <Setter Property="Focusable" Value="false"/>
                                    <Setter Property="ClickMode" Value="Press"/>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="{x:Type ToggleButton}">
                                                <Microsoft_Windows_Themes:ButtonChrome x:Name="Chrome" BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}" RenderMouseOver="{TemplateBinding IsMouseOver}" RenderPressed="{TemplateBinding IsPressed}" SnapsToDevicePixels="true">
                                                    <Grid HorizontalAlignment="Right" Width="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}">
                                                        <Path x:Name="Arrow" Data="M 0 0 L 3.5 4 L 7 0 Z" Fill="Black" HorizontalAlignment="Center" Margin="3,1,0,0" VerticalAlignment="Center"/>
                                                    </Grid>
                                                </Microsoft_Windows_Themes:ButtonChrome>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsChecked" Value="true">
                                                        <Setter Property="RenderPressed" TargetName="Chrome" Value="true"/>
                                                    </Trigger>
                                                    <Trigger Property="IsEnabled" Value="false">
                                                        <Setter Property="Fill" TargetName="Arrow" Value="#AFAFAF"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </ToggleButton.Style>
                        </ToggleButton>
                        <ContentPresenter ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}" ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}" Content="{TemplateBinding SelectionBoxItem}" ContentStringFormat="{TemplateBinding SelectionBoxItemStringFormat}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" IsHitTestVisible="false" Margin="{TemplateBinding Padding}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="HasDropShadow" SourceName="PART_Popup" Value="true">
                            <Setter Property="Margin" TargetName="Shdw" Value="0,0,5,5"/>
                            <Setter Property="Color" TargetName="Shdw" Value="#71000000"/>
                        </Trigger>
                        <Trigger Property="HasItems" Value="false">
                            <Setter Property="Height" TargetName="DropDownBorder" Value="95"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                            <Setter Property="Background" Value="#FFF4F4F4"/>
                        </Trigger>
                        <Trigger Property="IsGrouping" Value="true">
                            <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                        </Trigger>
                        <Trigger Property="ScrollViewer.CanContentScroll" SourceName="DropDownScrollViewer" Value="false">
                            <Setter Property="Canvas.Top" TargetName="OpaqueRect" Value="{Binding VerticalOffset, ElementName=DropDownScrollViewer}"/>
                            <Setter Property="Canvas.Left" TargetName="OpaqueRect" Value="{Binding HorizontalOffset, ElementName=DropDownScrollViewer}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

**你的代码：**

```
 <Popup x:Name="myPopup" IsOpen="{Binding Tag, ElementName=combo}" 
   Placement="Right" PlacementTarget="{Binding ElementName=combo}" 
   StaysOpen="True" Focusable="False" 
           AllowsTransparency="True" PopupAnimation="Fade" >
            <Button Click="Popup_Click">
                <Image Source="..\Images\edit.png" Height="30"/>
            </Button>
        </Popup>

        <ComboBox Name="combo"  SelectedValuePath="Key" DisplayMemberPath="Value" 
       Loaded="ComboBox_Loaded" SelectedValue="{Binding FamilyStatus}" Style="{StaticResource ComboBoxStyle1}">
        </ComboBox> 
```

# java - 带参数的 Swing Runnable

> ID：15997387
> 
> 赞同：2
> 
> 时间：2013-04-14T09:02:52.650
> 
> 标签：java, swing, runnable, event-dispatch-thread, invokelater

我想运行新的 Swing 线程并将参数传递给它们。像这样的东西：

```
String str;

SwingUtilities.invokeLater(new Runnable() {
public void run() {
    Play game = new Play(this.str);
        game.setVisible(true);
    }
}); 
```

我找到[了答案，如何将参数传递给线程](https://stackoverflow.com/questions/5853167/runnable-with-a-parameter)，但我不确定如何根据需要重建它。感谢您的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T09:17:23.230

或者，您的匿名`Runnable`用户可以访问封闭范围内的*最终字段：*

```
final String str = "one";

SwingUtilities.invokeLater(new Runnable() {
    @Override
    public void run() {
        Play game = new Play(str);
        game.setVisible(true);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T09:07:11.690

你不能。而是制作一个新的[Thead](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)。

编辑：这是一些代码，因为你很困惑。

```
import javax.swing.SwingUtilities;

public class Main {
  public static void main(String[] args) {
    SwingUtilities.invokeLater(new MyThread("StackOverflow"));
  }

  private static class MyThread extends Thread {
    String text;

    public MyThread(String text) {
      this.text = text;
    }

    @Override
    public void run() {
      System.out.println(this.text);
    }
  }
} 
```

# php - 奇怪的 SQL 错误，PHP

> ID：15997389
> 
> 赞同：-4
> 
> 时间：2013-04-14T09:03:21.010
> 
> 标签：php, mysql

我是 PHP 和 SQL 的新手，由于某种原因，我得到了这个非常奇怪和神秘的错误。

> 致命错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 /home/ 的第 1 行的“INSER INTO history(stype, symbol, amount, price, time, userid) VALUES (?, ?, ?, ') 附近使用正确的语法jharvard/vhosts/localhost/includes/functions.php 在第 139 行

这是我使用的代码：

```
<?php 
require("../includes/config.php");
if ($_SERVER["REQUEST_METHOD"] == "POST"){
    // Retrieve the requested user's symbol and calculate the stock's price
    $symbol = $_POST["symbol"];
    $price = lookup($symbol)["price"];
    // If lookup fails, apologize
    if ($price === null) {
    apologize("Sorry!");}
    // Retrieve user's cash balance
    $cash = query("select cash from users where id = ?", $_SESSION["id"]);
    foreach ($cash as $qux){$cash = $qux["cash"];}
    // Calculate the amount of money needed to buy the amount of stock
    $PayPrice = $_POST["SAmount"] * $price;
    // If user doesnt have enough cash, apologize
    if ($cash < $PayPrice){apologize("Your a cheapskate");}
    // If user enters a decimal or negative number, apologize
    if (preg_match("/^\d+$/", $_POST["SAmount"]) != true){apologize("Y u so decimal");}
    // Deduct the amount of cash from user's money   
    $result = query("UPDATE users SET cash = ? where id = ?", ($cash - $PayPrice), $_SESSION["id"]);
    if ($result === false){apologize("Update failed, cash");}
    // Update the user's stock
    $result = query("INSERT INTO stocks (id, symbol, stock) VALUES (?,?,?) ON DUPLICATE KEY UPDATE stock = stock + ?", $_SESSION['id'], $_POST["symbol"], $_POST["SAmount"], $_POST["SAmount"]);
    if ($result === false){apologize("Update failed, stock");}
    // Update history
    $result = query("INSER INTO history(stype, symbol, amount, price, time, userid) VALUES (?, ?, ?, ?, ?, ?)", 'buy', $symbol, $_POST['SAmount'], $PayPrice, time(), $_SESSION['id']);

}
else{render("BuyPage.php");}

?> 
```

这是查询（）代码

```
function query(/* $sql [, ... ] */)
    {
        // SQL statement
        $sql = func_get_arg(0);

        // parameters, if any
        $parameters = array_slice(func_get_args(), 1);

        // try to connect to database
        static $handle;
        if (!isset($handle))
        {
            try
            {
                // connect to database
                $handle = new PDO("mysql:dbname=" . DATABASE . ";host=" . SERVER, USERNAME, PASSWORD);

                // ensure that PDO::prepare returns false when passed invalid SQL
                $handle->setAttribute(PDO::ATTR_EMULATE_PREPARES, false); 
            }
            catch (Exception $e)
            {
                // trigger (big, orange) error
                trigger_error($e->getMessage(), E_USER_ERROR);
                exit;
            }
        }

        // prepare SQL statement
        $statement = $handle->prepare($sql);
        if ($statement === false)
        {
            // trigger (big, orange) error
            trigger_error($handle->errorInfo()[2], E_USER_ERROR);
            exit;
        }

        // execute SQL statement
        $results = $statement->execute($parameters);

        // return result set's rows, if any
        if ($results !== false)
        {
            return $statement->fetchAll(PDO::FETCH_ASSOC);
        }
        else
        {
            return false;
        }
    } 
```

这个问题非常神秘，因为我不知道发生了什么，我包含了我认为需要的所有代码，但如果需要更多，请告诉我。Ps：不用说，问题只是在我输入了最后一行用于插入历史的SQL代码之后才出现的，否则其他一切都很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T09:06:12.600

代替：

```
$result = query("INSER INTO history(stype, symbol, amount, price, time, userid) VALUES (?, ?, ?, ?, ?, ?)", 'buy', $symbol, $_POST['SAmount'], $PayPrice, time(), $_SESSION['id']); 
```

和：

```
$result = query("INSERT INTO history(stype, symbol, amount, price, time, userid) VALUES (?, ?, ?, ?, ?, ?)", 'buy', $symbol, $_POST['SAmount'], $PayPrice, time(), $_SESSION['id']); 
```

# c - 为以下密码/字母谜题寻找蛮力算法

> ID：15997391
> 
> 赞同：1
> 
> 时间：2013-04-14T09:03:34.320
> 
> 标签：c, math, cryptarithmetic-puzzle

我正在尝试用 C 编写一个程序来解决以下[密码](http://en.wikipedia.org/wiki/Verbal_arithmetic)：

> **一**+**一**=**二**
> 
> **七**是素数
> 
> **九**是一个完美的正方形

**也就是说，我需要找到单词one**、**two**、**Seven**和**Nine**的数值，其中每个字母（o、n、e、t、w、s、v、i）都被分配了一个数值，并且完整的数字也满足以上所有条件。

我正在考虑为每个单词创建一个 int 数组，然后 1）检查每个单词是否满足条件（例如“七”的质数），然后 2）检查数组中的每个整数是否一致与其他词的值，其中其他词也被发现满足各自的条件。

虽然我真的看不到这个工作，因为我必须在每次迭代中不断地将 int 数组转换为单个 int，然后我不确定如何同时将数组中的每个元素与其他词匹配。

也许知道每个单词必须为真的 MIN 和 MAX 数值范围会很有用？

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T09:12:45.223

对于蛮力（ish）方法，我将从 prime 开始`seven`，并使用[Eratosthenes 的筛子](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)得到所有素数，直到 99999。您可以丢弃所有第 2 位和第 4 位数字不同的答案. 之后你可以继续前进`nine`，因为其中三个数字是由质数决定的`seven`。这应该很好地缩小可能性，然后你可以使用@pmg 的答案来完成它:-)。

更新：以下 C# 程序似乎可以做到这一点

```
bool[] poss_for_seven = new bool[100000];       // this will hold the possibilities for `seven`
for (int seven = 0; seven < poss_for_seven.Length; seven++)
    poss_for_seven[seven] = (seven > 9999);     // `seven` must have 5 digits
// Sieve of Eratosthenes to make `seven` prime
for (int seven = 2; seven < poss_for_seven.Length; seven++) {
    for (int j = 2 * seven; j < poss_for_seven.Length; j += seven) {
        poss_for_seven[j] = false;
    }
}
// look through the array poss_for_seven[], considering each possibility in turn
for (int seven = 10000; seven < poss_for_seven.Length; seven++) {
    if (poss_for_seven[seven]) {
        int second_digit = ((seven / 10) % 10);
        int fourth_digit = ((seven / 1000) % 10);
        if (second_digit == fourth_digit) {
            int e = second_digit;
            int n = (seven % 10);   // NB: `n` can't be zero because otherwise `seven` wouldn't be prime
            for (int i = 0; i < 10; i++) {
                int nine = n * 1000 + i * 100 + n * 10 + e;
                int poss_sqrt = (int)Math.Floor(Math.Sqrt(nine) + 0.1); // 0.1 in case of of rounding error
                if (poss_sqrt * poss_sqrt == nine) {
                    int o = ((2 * e) % 10); // since 2 * `one` = `two`, we now know `o`
                    int one = o * 100 + n * 10 + e;
                    int two = 2 * one;
                    int t = ((two / 100) % 10);
                    int w = ((two / 10) % 10);
                    // turns out that `one`=236, `two`=472, `nine` = 3136.
                    // look for solutions where `s` != `v` with `s` and `v' different from `o`, `n`, `e`,`t`, `w` and `i`
                    int s = ((seven / 10000) % 10);
                    int v = ((seven / 100) % 10);
                    if (s != v && s != o && s != n && s != e && s != t && s != w && s != i && v != o && v != n && v != e && v != t && v != w && v != i) {
                        System.Diagnostics.Trace.WriteLine(seven + "," + nine + "," + one + "," + two);
                    }
                }
            }
        }
    }
} 
```

似乎`nine`总是等于 3136，所以`one`= 236 和`two`= 472。但是，有 21 种可能性`seven`。如果添加了没有两个数字可以采用相同值的约束（这是上面的 C# 代码所做的），那么它就会减少到只有一种可能性（尽管我的代码中的一个错误意味着这个答案最初有 3 种可能性）：

```
seven,nine,one,two
56963,3136,236,472 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T19:30:49.563

我刚刚找到时间构建 ac 程序来解决您的密码问题。我认为在开始蛮力编程之前从数学上解决问题将大大提高输出速度。

一些数学（数论）：由于 ONE + ONE = TWO，O 不能大于 4，因为 ONE + ONE 会产生 4 位数。O也不能为0。两个以O结尾并且是偶数，因为它是2 * ONE。将这 3 个过滤器应用于 O，可能的值仍然是 O= {2,4} 因此 E 可以是 {1,2,6,7}，因为 (E+E) 模数 10 必须 = O。更具体地说，O=2暗示 E={1,6} 和 O=4 暗示 E={2,7} 现在让我们过滤 N。鉴于 SEVEN 是素数，N 必须是奇数。N 也不能是 5，因为所有以 5 结尾的都可以被 5 整除。因此 N={1,3,7,9}

既然我们已经减少了最常出现的字符（O、E、N）的可能性，我们已经准备好用我们所有的残忍来攻击这个密码，大大减少了迭代。

继承人的C代码：

```
#include <stdio.h>
#include <math.h>

#define O 0
#define N 1
#define E 2
#define T 3
#define W 4
#define S 5
#define V 6
#define I 7

bool isPerfectSquare(int number);
bool isPrime(int number);
void printSolutions(int countSolutions);
int filterNoRepeat(int unfilteredCount);

int solutions[1000][8]; // solution holder
int possibilitiesO[2] = {2,4}; 
int possibilitiesN[4] = {1,3,7,9};
int possibilitiesE[4] = {1,6,2,7};

void main() {
    int countSolutions = 0;
    int numberOne;
    // iterate to fill up the solutions array by: one + one = two
    for(int o=0;o<2;o++) {
        for(int n=0;n<4;n++) {
            for(int e=2*o;e<2*o+2;e++) { // following code is iterated 2*4*2 = 16 times
                numberOne = 100*possibilitiesO[o] + 10*possibilitiesN[n] + possibilitiesE[e];
                int w = ((2*numberOne)/10)%10;
                int t = ((2*numberOne)/100)%10;
                // check if NINE is a perfect square
                for(int i=0;i<=9;i++) { // i can be anything ----- 10 iterations
                    int numberNine = 1000*possibilitiesN[n] + 100*i + 10*possibilitiesN[n] + possibilitiesE[e];
                    if(isPerfectSquare(numberNine)) {
                        // check if SEVEN is prime
                        for(int s=1;s<=9;s++) { // s cant be 0 ------ 9 iterations
                            for(int v=0;v<=9;v++) { // v  can be anything other than s ------- 10 iterations
                                if(v==s) continue;
                                int numberSeven = 10000*s + 1000*possibilitiesE[e] + 100*v + 10*possibilitiesE[e] + possibilitiesN[n];
                                if(isPrime(numberSeven)) { // store solution
                                    solutions[countSolutions][O] = possibilitiesO[o];
                                    solutions[countSolutions][N] = possibilitiesN[n];
                                    solutions[countSolutions][E] = possibilitiesE[e];
                                    solutions[countSolutions][T] = t;
                                    solutions[countSolutions][W] = w;
                                    solutions[countSolutions][S] = s;
                                    solutions[countSolutions][V] = v;
                                    solutions[countSolutions][I] = i;
                                    countSolutions++;
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    // 16 * 9 * 10 * 10 = 14400 iterations in the WORST scenario, conditions introduced reduce MOST of these iterations to 1 if() line
    // iterations consumed by isPrime() function are not taken in count in the aproximation above.
    // filter solutions so that no two letter have the same digit
    countSolutions = filterNoRepeat(countSolutions);
    printSolutions(countSolutions); // voila!
}

bool isPerfectSquare(int number) { // check if given number is a perfect square
    double root = sqrt((double)number);
    if(root==floor(root)) return true;
    else return false;
}

bool isPrime(int number) { // simple algoritm to determine if given number is prime, check interval from sqrt(number) to number/2 with a step of +2
    int startValue = sqrt((double)number);
    if(startValue%2==0) startValue--; // make it odd
    for(int k=startValue;k<number/2;k+=2) {
        if(number%k==0) return false;
    }
    return true;
}

void printSolutions(int countSolutions) {
    for(int k=0;k<countSolutions;k++) {
        int one = 100*solutions[k][O] + 10*solutions[k][N] + solutions[k][E];
        int two = 100*solutions[k][T] + 10*solutions[k][W] + solutions[k][O];
        int seven = 10000*solutions[k][S] + 1000*solutions[k][E] + 100*solutions[k][V] + 10*solutions[k][E] + solutions[k][N];
        int nine = 1000*solutions[k][N] + 100*solutions[k][I] + 10*solutions[k][N] + solutions[k][E];
        printf("ONE: %d, TWO: %d, SEVEN: %d, NINE %d\n",one,two,seven,nine);
    }
}

int filterNoRepeat(int unfilteredCount) {
    int nrSol = 0;
    for(int k=0;k<unfilteredCount;k++) {
        bool isValid = true;
        for(int i=0;i<7;i++) { // if two letters match, solution is not valid
            for(int j=i+1;j<8;j++) {
                if(solutions[k][i]==solutions[k][j]) {
                    isValid = false;
                    break;
                }
            }
            if(!isValid) break;
        }
        if(isValid) { // store solution
            for(int i=0;i<8;i++) {
                solutions[nrSol][i] = solutions[k][i];
            }
            nrSol++;
        }
    }
    return nrSol;
} 
```

如果您仍然对此感兴趣，您可以自己尝试代码：P。结果是一个单一的解决方案：一：236，二：472，七：56963，九：3136 该解决方案与随机的解决方案相同，证实了我认为两种算法的正确性:)。感谢您提供这个漂亮的密码，祝您有美好的一天！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T09:07:25.310

蛮力FTW！

```
#define ONE ((o*100) + (n*10) + e)
#define TWO ((t*100) + (w*10) + o)
#define SEVEN ((s*10000) + (e*1010) + (v*100) + n)
#define NINE ((n*1010) + (i*100) + e)

for (o = 1; o < 10; o++) {                /* 1st digit cannot be zero (one) */
  for (n = 1; n < 10; n++) {              /* 1st digit cannot be zero (nine) */
    if (n == o) continue;
    for (e = 0; n < 10; n++) {
      if (e == n) continue;
      if (e == o) continue;
              /* ... */
                      if (ONE + ONE == TWO) /* whatever */;
              /* ... */
    }
  }
} 
```

# jquery-mobile - Jquery Mobile Panel Styling with fixed-toolbar

> ID：15997403
> 
> 赞同：1
> 
> 时间：2013-04-14T09:05:15.747
> 
> 标签：jquery-mobile, panel, styling, gaps-in-visuals

I set the width of my panel according to the sample in [http://view.jquerymobile.com/1.3.1/dist/demos/examples/panels/panel-styling.html](http://view.jquerymobile.com/1.3.1/dist/demos/examples/panels/panel-styling.html). Everything goes fine, but my fixed toolber in the footer moves further than the header and the contents. This makes a gap from the fixed toolbar to the panel. Anybody knows how to fix this? Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:50:05.857

```
#demo-page #left-panel.ui-panel {
    width: 15em;
}
#demo-page #left-panel.ui-panel-closed {
    width: 0;
}
#demo-page .ui-panel-position-left.ui-panel-display-reveal {
    left: 0;
}
#demo-page .ui-panel-content-fixed-toolbar-position-left.ui-panel-content-fixed-toolbar-open,
.ui-panel-content-wrap-position-left.ui-panel-content-wrap-open,
.ui-panel-dismiss-position-left.ui-panel-dismiss-open {
    left: 15em;
    right: -15em;
}
#demo-page .ui-panel-animate.ui-panel-content-fixed-toolbar-position-left.ui-panel-content-fixed-toolbar-open.ui-panel-content-fixed-toolbar-display-reveal,
.ui-panel-animate.ui-panel-content-wrap-position-left.ui-panel-content-wrap-open.ui-panel-content-wrap-display-reveal {
    left: 0;
    right: 0;
    -webkit-transform: translate3d(15em,0,0);
    -moz-transform: translate3d(15em,0,0);
    transform: translate3d(15em,0,0);
}
/* Reveal menu shadow on top of the list items */
#demo-page .ui-panel-display-reveal {
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
    box-shadow: none;
}
#demo-page .ui-panel-content-fixed-toolbar-position-left, .ui-panel-content-wrap-position-left {
    -webkit-box-shadow: -5px 0px 5px rgba(0,0,0,.15);
    -moz-box-shadow: -5px 0px 5px rgba(0,0,0,.15);
    box-shadow: -5px 0px 5px rgba(0,0,0,.15);
} 
```

# deployment - 具有较小文件大小的私有 JVM

> ID：15997405
> 
> 赞同：1
> 
> 时间：2013-04-14T09:05:52.537
> 
> 标签：deployment, bundle, java

我希望将 JRE 与我的应用程序捆绑在一起，因为这是 Apple 提交到应用程序商店的要求。使用标准 JRE 库将文件大小从 1 mb 增加到 153 mb。

任何人都可以推荐一个文件大小更小的替代 JRE 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:10:18.990

找到了解决方案：

下载了 OpenJDK 并删除了[此页面](https://code.google.com/p/libgdx/wiki/BundlingJRE)上指定的文件。对我来说，将 JVM 的大小减少到 39 mb。

# php - 如何在 SQL 中连接来自两个不同表的多个字段数据？

> ID：15997407
> 
> 赞同：0
> 
> 时间：2013-04-14T09:06:04.397
> 
> 标签：php, mysql, mysqldump

我正在使用此查询来连接来自两个不同表的数据。包含数据的发票表，带有库存代码和供应商代码。请检查我的查询指出我在查询中的错误。inv_code 字段包含库存代码和供应商代码。我的第二张桌子 `cb_chart_temp`有`acc_code`, 和`acc_name`;

```
SELECT 
      `invoice`.`inv_code`, 
      `cb_chart_temp.acc_name`, 
      `invoice.sup_id`,
      `cb_chart_temp`.`acc_name` 
FROM 
      `invoice`, 
      `cb_chart_temp` 
WHERE 
      inv_no LIKE 'PI%' 
      invoice.inv_code=cb_chart_temp.acc_code 
      AND invoice.sup_id=cb_chart_temp.acc_code 
```

我的结果应该是这样的！

```
inv_code    acc_name      sup_id       sup_name
ST-00001    Stock Name    SUP-00001    Supplier Name 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T09:48:34.707

正如@Lion 已经指出的那样，它错过了一个AND，而且键​​的连接是否正确值得怀疑。如您所见，inv_code、acc_code 和 sup_id 都属于同一个域，即它们都是，例如，发票代码。

# javascript - 在 JavaScript 中渲染通过 AJAX 调用返回的 HTML

> ID：15997409
> 
> 赞同：0
> 
> 时间：2013-04-14T09:06:08.750
> 
> 标签：javascript, html, ajax

我是 JavaScript 和 AJAX 方面的新手。我正在尝试使用 AJAX 调用服务器并显示返回的 HTML。但是，浏览器不是呈现 HTML，而是显示 HTML 代码。我没有使用 JQuery，我宁愿不使用它（时间严重短缺和我对 JQuery 完全不熟悉是坚持使用基本 JavaScript 的两个主要原因）。是否有某种方法可以呈现 HTML，因为它应该只使用基本的 JavaScript。这是我的代码

```
function gotoNext(button){
try {
    xmlHttp = new XMLHttpRequest ();
}
catch (e) {
    try {
        xmlHttp = new ActiveXObject ("Microsoft.XMLHTTP");
    }
    catch (el) {
        try {
            xmlHttp = new ActiveXObject ("Msxml2.XMLHTTP");
        }
        catch (el1) {
            alert ("Your browser does not support AJAX! Please use a compatible browser!!");
        }
    }
}

xmlHttp.onreadystatechange = function () {
    if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
        var df = document.getElementById ("dataForm");
        var data = xmlHttp.responseText;
        df.innerText = data;
    }       
};

var id = document.editEnv.id.value;
var sId = document.editEnv.sId.value;
var fileName = document.editEnv.fileName.value;
var group = document.editEnv.group.value;

xmlHttp.open("POST", "newData.jsp", true);
xmlHttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;");
xmlHttp.send ("flag=" + flag + "&id=" + id + "&sId=" + sId + "&fileName=" + fileName + "&group=" + group); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T09:09:16.093

你应该使用`df.innerHTML = data;`

`innerText`只是将值获取/设置为纯文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T09:09:26.467

您可以尝试替换`innerText`为`innerHTML`不同之处在于`innerText`它不包含任何 HTML 标签，而包含`innerHTML`。例如

```
Here is a <a href="what.html">link</a> 
```

将显示：

```
Here is a link 
```

如果你打电话`innerText`给它。但是，如果您调用它，`innerHTML`它将显示：

```
Here is a <a href="what.html">link</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T09:14:40.133

```
df.innerHTML = data; 
```

应该管用！！因为使用 innerHTML 将在浏览器上呈现该 html。

innerText 只会将 HTML 代码显示为普通文本。

# javascript - jquery如何在加载动态内容后立即获得div的高度？

> ID：15997414
> 
> 赞同：0
> 
> 时间：2013-04-14T09:07:24.700
> 
> 标签：javascript, jquery, load, while-loop

```
var contentparanum = 1;
while($(".container").height() < 200){
        paranum++;
        $(".content").append("<p></p>");
        $(".content p:nth-child("+contentparanum+")").load("getcontent.php?paranum="+paranum);
        contentparanum++;
        //use load() to add content into container, when the height of container is over 200px the loop stops
} 
```

问题是循环永远不会停止。我添加了 alert(".container"); 进入循环，我只得到0。似乎只有在while循环完成后才能获得容器的高度。我该如何解决这个问题？

* * *

我添加了具体代码

和这里的html代码

```
 <div class="container">
    <div class="content"></div>
  </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T10:10:10.320

由于 .load() 是异步的，您将不得不等待回调再次调用加载。尝试这个：

```
 var contentparanum = 1;
    var paranum = 1;

    $("#load").click(function () {
        // Checks if the height is below 200 before making the first call
        if($(".content").height() <200) 
        {
            LoadContent();
        }
    });

    function LoadContent() {

        $(".content").append("<p></p>");

        $(".content p:nth-child(" + contentparanum + ")").load("getcontent.php?paranum=" + paranum,
           // This is the callback function 
           function (response, status, xhr) {
            if (status == "error") {
                alert(xhr.status + " " + xhr.statusText);
            }
            else {
                // Checks if the height is below 200 and if yes makes a recursive call 
                if ($(".content").height() < 200) {
                    contentparanum++;
                    paranum++;
                    LoadContent();
                }
                else {
                    return;
                }
            }
        })
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-14T10:07:37.917

```
function loadContent(paranum) {
    $("#container").append("<p></p>")
    $("#container").children().last().load("getcontent.php?paranum="+paranum, function() {
        if($("#container").height() < 200) {
            window.setTimeout(loadContent, 0, paranum+1);
        }
    });
    }

$(function() {loadContent(1);}); 
```

# css - div里面的div在IE中徘徊？

> ID：15997416
> 
> 赞同：0
> 
> 时间：2013-04-14T09:07:25.873
> 
> 标签：css, internet-explorer, html

我创建了一个网页，其中有一个 id="x" 的 div 在另一个 id="y" 的 div 中。内部 div 有 display:none。一旦外部 div 悬停，内部 div 的显示就会设置为“内联”。问题是，一旦内部 div 可见并且我尝试将其悬停，div 就会消失，因为它的显示再次设置为“无”。此问题仅存在于 IE 中，而不存在于 FF 或 Chrome 中。在 Firefox 或 chrome 中，我可以将外部 div 悬停，当内部 div 变得可见时，我也可以将其悬停。

HTML 代码：

```
<divid="y">Blah Blah
<div id="x">Random Text</div>
</div> 
```

代码：

```
div#y:hover div{display:inline;} 
div#x{display:none;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T09:20:36.137

问题是，当您的鼠标悬停在 divx 上时，您正在悬停另一个对象。您也可以通过将鼠标悬停在 divx 上来解决此问题，将显示更改为内联，这也可以解决问题。

```
div#x:hover div{display:inline;} 
```

[http://jsfiddle.net/9zBbP/6/](http://jsfiddle.net/9zBbP/6/)

这也将使您能够减小 HTML 和 CSS 的大小，因为您可以将 y:hover 和 x:hover 组合到 CSS 中的相同属性，并且您在 HTML 中只使用 2 个 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T09:17:09.697

我不确定这是否可行，但尝试添加另一个外部 div：

```
<div id="y">Blah Blah
    <div id"anotherDiv"><div id="x">Random Text</div></div>
</div> 
```

带块显示

```
div#anotherDiv {display: block; } 
```

[http://jsfiddle.net/9zBbP/](http://jsfiddle.net/9zBbP/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T09:25:58.090

您只需要放置正确的文档类型即可使其在 IE 中工作。

```
<!DOCTYPE html> 
```

你应该有这样的标记：假设`<divid="y" >`是一个错字。

```
<div id="y">Blah Blah
   <div id="x">Random Text</div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T11:16:19.650

```
#y:hover #x{
        display:inline;
    } 
#x{
    display:none;
} 
```

也可以通过这种方式实现

# java - 忽略所有转义字符和代码 JAVA

> ID：15997417
> 
> 赞同：1
> 
> 时间：2013-04-14T09:07:29.397
> 
> 标签：java, ansi-escape

情况：

*   我有一个这样创建的字符串

    ```
    \033[32m\033[44mP"+characterID+"\033[0m" 
    ```

*   当字符串打印到控制台时，它会`P + characterID` 像应该的那样以绿色打印出来

问题：

*   我需要创建一个标签`string P + characterID`
*   但是放置的文本是`[32m[44mP"+characterID+"[0m`

现在怎么办：

*   鉴于我有几个不同颜色的字符串，正则表达式和替换似乎并不适用于所有人。
*   无论如何，我在创建文本时可以忽略转义码和颜色吗？

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T09:22:47.977

如果您在谈论 Swing 的 JLabel 或 AWT - 您不能像在控制台中那样使用 ANSI 转义码。相反，您必须为该 JLabel 设置前景色或背景色。像这样的东西：

```
JLabel label = new JLabel("P" + characterID);
label.setColor(Color.GREEN); 
```

**编辑：**如果您已经有“编码”字符串，那么您应该想出一个正则表达式，它只会找到“真实”数据并忽略转义码。假设您只有`P`,`M`和`T`前缀，并且`characterID`是一个十进制数，正则表达式应该是这样的：

```
String realData = "\\033[32m\\033[44mP111\\033[0m".replace("[^PMT]\\d+", ""); 
```

这应该删除除您需要的数据之外的所有内容。

# c++ - 使用固定数量的输入行进行 Qt 文本编辑

> ID：15997418
> 
> 赞同：5
> 
> 时间：2013-04-14T09:07:41.127
> 
> 标签：c++, qt, qt5, qtextedit

我的 Gui 中有一个 Qt“文本编辑”小部件，这个小部件用于记录某些内容。我以这种方式添加每一行：

```
QString str;
str = ...
widget.textEdit_console->append(str); 
```

通过这种方式，文本编辑高度将在每一行之后越来越多。在这种情况下，我希望它像一个终端一样，我的意思是在输入一些（我设置的）行之后，对于每个新行，删除文本编辑的第一行以防止它太大！我应该在输入每个新行时使用计数器并在计数器到达顶部后删除第一个计数器还是有更好的方法在之后自动执行此操作

```
widget.textEdit_console->append(str); 
```

叫？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:32:13.407

感谢[cmannett85](https://stackoverflow.com/users/498437/cmannett85)的建议，但出于某种原因，我更喜欢“文本编辑”，我这样解决了我的问题：

```
void mainWindow::appendLog(const QString &str)
{
    LogLines++;
    if (LogLines > maxLogLines)
    {
        QTextCursor tc = widget.textEdit_console->textCursor();
        tc.movePosition(QTextCursor::Start);
        tc.select(QTextCursor::LineUnderCursor);
        tc.removeSelectedText(); // this remove whole first line but not that '\n'
        tc.deleteChar(); // this way the first line will completely being removed
        LogLines--;
    }
    widget.textEdit_console->append(str);
} 
```

我仍然不知道在使用“文本编辑”时是否有更好的优化方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:32:55.660

此代码将光标移动到第一行，然后选择它直到行尾，接下来它将删除该行：

```
widget.textEdit->moveCursor(QTextCursor::Start, QTextCursor::MoveAnchor);
widget.textEdit->moveCursor(QTextCursor::EndOfLine, QTextCursor::KeepAnchor);
widget.textEdit->textCursor().deleteChar();
widget.textEdit->textCursor().deleteChar(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T10:18:16.160

一种简单的方法是关闭垂直滚动条：

```
 textEdit_console->setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOff); 
```

# html - 为什么 Firefox 渲染的图像比 Chrome 或 Safari 大？

> ID：15997420
> 
> 赞同：0
> 
> 时间：2013-04-14T09:08:08.490
> 
> 标签：html, cross-browser

我在网页上有以下标记（使用 Twitter Bootstrap）

```
<div class="row">
  <div class="span2">
    <a href="xxxx" class="link">
      <img src="path/to/image1.png">
    </a>
  </div>
  <div class="span2">
    <a href="xxxx" class="link">
      <img src="path/to/image2.png">
    </a>
  </div>
  <div class="span2">
    <a href="xxxx" class="link">
      <img src="path/to/image3.png">
    </a>
  </div>
  <div class="span2">
    <a href="xxxx" class="link">
      <img src="path/to/image4.png">
    </a>
  </div>
</div>

#css

.link img {max-width: 100% } 
```

在 Chrome 和 Safari 中，这是按预期呈现的。

在 Firefox 中，图像要大得多！

为什么 Firefox 会以不同的方式呈现这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:08:59.410

检查您的缩放设置。您可以使用 重置 Firefox 缩放`Ctrl-0`。

# php - Zend 中一个 AJAX 请求中的三个 JSON 字符串冲突

> ID：15997423
> 
> 赞同：0
> 
> 时间：2013-04-14T09:08:36.683
> 
> 标签：php, ajax, zend-framework

我对我的 ajax 有三个不同的请求：

```
$result = Map_Model_Map_Factory::getCityByRegionAlias($alias);
$resultCountUsers = User_Model_User_Factory::countUserByRegion($alias);
$resultCountPartners = User_Model_User_Factory::countPartnersByRegion($alias); 
```

第一个请求效果很好。但是第二个和第三个相互冲突。如果`$this->_helper->json($resultCountUsers);`先出现，那么它可以工作：

```
$this->_helper->json($resultCountUsers);
$this->_helper->json($resultCountPartners);
$this->_helper->json($result); 
```

我得到了我需要的东西，`countUsers: "1"`但我没有`countPartners`。反之亦然，如果`$this->_helper->json($resultCountPartners);`先来，那么我就`countPartners`没有`countUsers`.

也许有人知道，发生了什么以及我如何才能收到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T09:47:13.287

我不使用 Zend，但显然存在一个问题：您没有为 JavaScript 对象提供属性名称。我想知道您是否正在用下一个响应覆盖每个响应。

看看这对您的 AJAX 查看器有什么影响：

```
$this->_helper->json(
    array(
        'resultCountUsers' => $resultCountUsers,
        'resultCountPartners' => $resultCountPartners,
        'result' => $result,
    )
); 
```

# php - Yii验证码图片链接失效

> ID：15997424
> 
> 赞同：0
> 
> 时间：2013-04-14T09:08:41.637
> 
> 标签：php, yii, captcha

我只是想知道如何复制从 Yii 网站下载的 Yii 框架 demo-blog-contact 的确切代码到具有相同版本库的其他 yii 应用程序并且它不显示验证码。

当我转到控制器/操作页面时，它显示断开的链接而不是验证码，当我在新页面中打开断开的链接图像时，它显示另一个断开的链接。

我看到了这个CCaptcha 常见问题的链接，我检查了[gd](http://shanideveloper.blogspot.mx/2012/01/yii-ccaptcha-captcha-image-doesnt-show.html)**库**是否已启动并正在运行，我的 **函数 actions()**的内容与链接所说的完全相同，并且我没有在应用程序中定义任何**访问控制过滤器**。

我看到了这个[链接](https://stackoverflow.com/questions/11895376/ccaptcha-displaying-no-image-yii)，我没有权限问题，这个[链接](https://stackoverflow.com/questions/11206715/yii-captcha-url-is-broken)，我没有 ajax。

[我做的和这个链接](http://mrhandscode.blogspot.com/2012/04/make-captcha-in-yii-framework.html)说的完全一样，但没有成功。任何帮助显示这些验证码将不胜感激。

控制器 ：

```
public function actions()
{
    return array(
        'captcha'=>array(
            'class'=>'CCaptchaAction',
            'backColor'=>0xFFFFFF,
        ),
        'page'=>array(
            'class'=>'CViewAction',
        ),
    );
}

public function accessRules()
{
    return array(
        array('allow', 
            'actions'=>array('create', 'captcha'),
            'users'=>array('*'),
        ));
} 
```

模型 ：

```
<?php
class ContactsM extends CFormModel {
    public $name;
    public $email;
    public $subject;
    public $body;
    public $verifyCode;

    /**
     * Declares the validation rules.
     */
    public function rules()
    {
        return array(
            // name, email, subject and body are required
            array('name, email, subject, body', 'required'),
            // email has to be a valid email address
            array('email', 'email'),
            // verifyCode needs to be entered correctly
            array('verifyCode', 'captcha', 'allowEmpty'=>!CCaptcha::checkRequirements()),
        );
    }
    public function attributeLabels()
    {
        return array(
            'verifyCode'=>'Verification Code',
        );
    }
    } 
```

看法 ：

```
<?php $form=$this->beginWidget('CActiveForm'); ?>
    <?php echo $form->errorSummary($model); ?>

    <?php if(extension_loaded('gd')): ?>
    <div class="row">
        <?php echo $form->labelEx($model,'verifyCode'); ?>
        <div>
        <?php $this->widget('CCaptcha'); ?>
        <?php echo $form->textField($model,'verifyCode'); ?>
        </div>
        <div class="hint">Please enter the letters as they are shown in the image above.
        <br/>Letters are not case-sensitive.</div>
    </div>
    <?php endif; ?>

    <div class="row submit">
        <?php echo CHtml::submitButton('Submit'); ?>
    </div>

<?php $this->endWidget(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:40:19.943

正如我从您的评论中了解到的，**您应该从 CController 扩展您的 Controller 类**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T14:17:51.167

我想分享我理解的事实：

我的问题是：

我使用继承和父类有一些问题，子类扩展它但它没有显示任何错误，我认为它工作正常但实际上它没有，我理解它直到我使用了其中的一些父函数案例是CCaptcha。

# powershell - Powershell DataGridView - 遍历复选框列中的行以查看是否选中

> ID：15997427
> 
> 赞同：1
> 
> 时间：2013-04-14T09:08:55.147
> 
> 标签：powershell, datagridview, row, each

我正在尝试创建一个powershell表单，它将所有进程都放入一个datagridview（到目前为止工作正常）。然后，我在数据源前面添加一个附加列，每行作为一个复选框。然后，我想在我的表单上按下一个按钮，该按钮启动名为 Do-Grid 的函数，它旨在查看第一列中的哪些复选框已被选中。

这就是我卡住的地方。我无法弄清楚如何仅在此列中循环遍历每一行/单元格，并查看哪个复选框已被勾选（或值为 true）。

谢谢你。

```
Function GenerateForm {
[Void][Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms")

$ButtonUpdateGrid = New-Object Windows.Forms.Button
$ButtonUpdateGrid.Location = New-Object Drawing.Point 7,15
$ButtonUpdateGrid.size = New-Object Drawing.Point 90,23
$ButtonUpdateGrid.Text = "&Get Packages"
$ButtonUpdateGrid.add_click({Get-info})

$Button1 = New-Object Windows.Forms.Button
$Button1.Location = New-Object Drawing.Point 200,15
$Button1.size = New-Object Drawing.Point 90,23
$Button1.Text = "columns"
$button1.add_Click($button1_OnClick)

$ButtonStartExport = New-Object Windows.Forms.Button
$ButtonStartExport.Location = New-Object Drawing.Point 100,15
$ButtonStartExport.size = New-Object Drawing.Point 90,23
$ButtonStartExport.Text = "rows"
$ButtonStartExport.add_click({Do-Grid})

$dataGridView1 = New-Object System.Windows.Forms.DataGridView
$dataGridView1.Location = New-Object Drawing.Point 7,40
$dataGridView1.size = New-Object Drawing.Point 1000,700
$dataGridView1.MultiSelect = $false
$dataGridView1.ColumnHeadersVisible = $true
$dataGridView1.RowHeadersVisible = $false

$form = New-Object Windows.Forms.Form
$form.text = "Package Exporter v0.1"
$form.Size = New-Object Drawing.Point 1024, 768
$form.topmost = 1
$form.Icon = [system.drawing.icon]::ExtractAssociatedIcon($PSHOME + "\powershell.exe")

$form.Controls.Add($dataGridView1)
$form.controls.add($Button1)
$form.controls.add($ButtonStartExport)
$form.controls.add($ButtonUpdateGrid)
#$form.add_Load($OnLoadForm)
$form.ShowDialog()
}

 Function Get-info{
    If($datagridview1.columncount -gt 0){
        $dataGridview1.DataSource = $null
        $DataGridView1.Columns.RemoveAt(0) 
    }
    $Column1 = New-Object System.Windows.Forms.DataGridViewCheckBoxColumn
    $Column1.width = 30
    $Column1.name = "Exp"
    $DataGridView1.Columns.Add($Column1) 
    $array = New-Object System.Collections.ArrayList
    $Script:procInfo = get-process | Select-Object name, company, description,     product, id, vm, fileversion
    $array.AddRange($procInfo)
    $dataGridview1.DataSource = $array
    $form.refresh()
}          

Function Do-Grid{

#?????????????????????????????????? not really sure what to do here
for($i=0;$i -le $datagridview1.Rows.Count;$i++){ 
write-host $datagridview1.Rows[$i].value
}

}

Generate Form 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T10:44:04.237

```
Function Do-Grid{

    for($i=0;$i -lt $datagridview1.RowCount;$i++){ 

       if($datagridview1.Rows[$i].Cells['exp'].Value -eq $true)
       {
         write-host "cell #$i is checked"
         #uncheck it
         #$datagridview1.Rows[$i].Cells['exp'].Value=$false
       }
       else    
       {
         #check it
         #$datagridview1.Rows[$i].Cells['exp'].Value=$true
         write-host  "cell #$i is not-checked"
       }
    }
} 
```

# linux - mmap2 无法为线程分配堆栈，但在 GDB 下工作

> ID：15997428
> 
> 赞同：0
> 
> 时间：2013-04-14T09:08:57.987
> 
> 标签：linux, linux-kernel, gdb, arm, mmap

我正在使用 Fedora 18、2GB RAM 的 ARMv7-A 机器上运行应用程序。

应用程序终止：

```
130413 15:49:34 19344 Xrd: PhyConnection: Can't run reader thread: out of system resources. Critical error. 
```

如果`strace`是这样，我会看到新线程的堆栈分配失败：

```
mmap2(NULL, 8388608, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS|MAP_STACK, -1, 0) = -1 ENOMEM (Cannot allocate memory)
gettimeofday({1365921367, 588018}, NULL) = 0
gettid()                                = 6309
writev(2, [{"130414 02:36:07 6309 ", 21}, {"Xrd", 3}, {"", 0}, {": ", 2}, {"PhyConnection: Can't run reader "..., 80}, {"\n", 1}], 6130414 02:36:07 6309 Xrd: PhyConnection: Can't ru
n reader thread: out of system resources. Critical error.
) = 107
munmap(0x48172000, 292)                 = 0
munmap(0x48225000, 292)                 = 0 
```

实际代码：

```
253       if (fReaderthreadhandler[i]->Run(this)) {
254          Error("PhyConnection",
255                "Can't run reader thread: out of system resources. Critical error.");
256 // HELP: what do we do here
257          exit(-1);
258       } 
```

该应用程序有 300-350MB 的虚拟内存大小，约 250MB 是常驻内存大小。内存上限为 1.3GB。虚拟地址空间不受限制：

```
-t: cpu time (seconds)              unlimited
-f: file size (blocks)              unlimited
-d: data seg size (kbytes)          unlimited
-s: stack size (kbytes)             8192
-c: core file size (blocks)         0
-m: resident set size (kbytes)      unlimited
-u: processes                       1024
-n: file descriptors                1024
-l: locked-in-memory size (kbytes)  64
-v: address space (kbytes)          unlimited
-x: file locks                      unlimited
-i: pending signals                 15870
-q: bytes in POSIX msg queues       819200
-e: max nice                        0
-r: max rt priority                 0
-N 15:                              unlimited 
```

但它确实适用于 GDB！我还查看了 GDB 报告的限制，它们是相同的。因此 GDB 不会调整软限制，这将被继承。

概括：

*   我有足够的内存来运行应用程序。它甚至在 GDB 中也能正常工作。
*   它似乎没有达到任何资源限制。
*   在 GDB 中工作，但不在外部。

这里有什么可能出错的提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:03:39.203

> 在 GDB 中工作，但不在外部。

“GDB 内部”不同的一件事是地址布局（随机化）。

为了使调试更容易，GDB 默认禁用 ASLR。你可以用它重新打开它

```
(gdb) set disable-randomization off 
```

然后运行应用程序几次，并检查它是否仍然可靠地工作。

> 我有足够的内存来运行应用程序。

失败的分配（映射）请求 8MB 的*连续*内存，如果您的地址空间碎片化，您可能没有。如果您实际上*不需要*`ulimit -s`8MB 的堆栈（大多数应用程序不需要），您可以通过将（或`setrilimit(RLIMIT_STACK, ...)`在应用程序中使用）设置为明显更小的值来获得更多线程。

# python - 根据 Pandas DataFrame 中的其他列值在列之间移动行值

> ID：15997430
> 
> 赞同：2
> 
> 时间：2013-04-14T09:09:07.047
> 
> 标签：python, pandas

我有一个带有生物名称及其抗生素敏感性列表的熊猫数据框。我希望根据以下规则将所有生物体合并到下面的 DataFrame 中的一列中。

1.  如果 ORG1 == A，什么也不做；

2.  如果 ORG1 != A 和 ORG2 == A，将 ORG2 值移动到 ORG1 列

3.  如果 ORG1 != A 和 ORG3 == A，将 ORG3 值移动到 ORG1 列

如果满足条件 2，以及将 ORG2 值移动到 ORG1 列，还将 AS20* 中的列值移动到 AS10*。

同样，如果满足条件 3，并且将 ORG3 值移动到 ORG1 列，还将 AS30* 中的列值移动到 AS10*。

我通过根据上述规则编写一个函数自己尝试了这一点，并且基于以下几点取得了有限的成功：

```
If ORG2 == A:
       return ORG1.map(ORG2) 
```

当我尝试根据条件依次映射 AS201 -> AS101、AS202 -> AS102、AS203 -> AS103 等时，我迷路了。

我遇到的另一个问题是有机体名称不是单个字母，漂亮的也不是。示例中的 A 相当于`re.match('aureus')`我的数据集中的 A。

此外，每个 ORG 列有 20 个 AS 列，超过 150,000 条记录，因此我希望使其适用于任何数量的抗生素敏感性结果。

我有点挣扎，所以在正确的方向上推几下真的会有所帮助。

提前致谢。

```
索引 ORG1 ORG2 ORG3 AB1 AS101 AS201 AS301 AB2 AS102 AS202 AS302
1 A NaN NaN 笔 S NaN NaN dfluc S NaN NaN
2 ABC pen RSS dfluc SRS
3 BAB pen SSR dfluc SSR
4 A NaN NaN pen R NaN NaN dfluc S NaN NaN
5 A NaN NaN pen R NaN NaN dfluc S NaN NaN
6 CAA 笔 SRR dfluc RSR
7 B NaN A pen R NaN S dfluc S NaN S
8 ABA 笔 RRR dfluc RRR
9 A NaN NaN pen R NaN NaN dfluc S NaN NaN

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T09:40:20.293

我们可以选择行 where`ORG1 != A`和`ORG2 == A`with

```
mask = (df['ORG1'] != 'A')&(df[orgi] == 'A') 
```

`mask`然后是一个布尔系列。要将值从 ORG2 复制到 ORG1，我们可以使用

```
df['ORG1'][mask] = df['ORG2'][mask] 
```

或者，因为我们知道右边的值是`A`，我们可以使用

```
df['ORG1'][mask] = 'A' 
```

可以类似地复制 AS 列。

* * *

我们可以找到其列值包含一些字符串的行，例如`'aureus'`with

```
df[orgi].str.contains('aureus') == True 
```

`str.contains`可以将**任何正则表达式**模式作为其参数。请参阅文档：[矢量化字符串方法](http://pandas.pydata.org/pandas-docs/stable/basics.html#vectorized-string-methods)。

注意：通常使用`df[orgi].str.contains('aureus')`(没有`== True`, 但由于`df[orgi]`可能包含`NaN`值，我们还需要将`NaN`s 映射到 False，因此我们使用`df[orgi].str.contains('aureus') == True`.

* * *

```
import pandas as pd

filename = 'data.txt'
df = pd.read_table(filename, delimiter='\s+')
print(df)
#    Index ORG1 ORG2 ORG3  AB1 AS101 AS201 AS301    AB2 AS102 AS202 AS302
# 0      1    A  NaN  NaN  pen     S   NaN   NaN  dfluc     S   NaN   NaN
# 1      2    A    B    C  pen     R     S     S  dfluc     S     R     S
# 2      3    B    A    B  pen     S     S     R  dfluc     S     S     R
# 3      4    A  NaN  NaN  pen     R   NaN   NaN  dfluc     S   NaN   NaN
# 4      5    A  NaN  NaN  pen     R   NaN   NaN  dfluc     S   NaN   NaN
# 5      6    C    A    A  pen     S     R     R  dfluc     R     S     R
# 6      7    B  NaN    A  pen     R   NaN     S  dfluc     S   NaN     S
# 7      8    A    B    A  pen     R     R     R  dfluc     R     R     R
# 8      9    A  NaN  NaN  pen     R   NaN   NaN  dfluc     S   NaN   NaN

for i in range(2,4):
    orgi = 'ORG{i}'.format(i=i)
    # mask = (df['ORG1'] != 'A')&(df[orgi] == 'A')
    mask = (df['ORG1'].str.contains('A') == False)&(df[orgi].str.contains('A') == True)
    # Move ORGi --> ORG1
    df['ORG1'][mask] = df[orgi][mask]
    for j in range(1,4):
        # Move ASij --> AS1j
        source_as = 'AS{i}{j:02d}'.format(i=i, j=j)
        target_as = 'AS1{j:02d}'.format(i=i, j=j)
        try:
            df[target_as][mask] = df[source_as][mask]
        except KeyError:
            pass

print(df) 
```

产量

```
 Index ORG1 ORG2 ORG3  AB1 AS101 AS201 AS301    AB2 AS102 AS202 AS302
0      1    A  NaN  NaN  pen     S   NaN   NaN  dfluc     S   NaN   NaN
1      2    A    B    C  pen     R     S     S  dfluc     S     R     S
2      3    A    A    B  pen     S     S     R  dfluc     S     S     R
3      4    A  NaN  NaN  pen     R   NaN   NaN  dfluc     S   NaN   NaN
4      5    A  NaN  NaN  pen     R   NaN   NaN  dfluc     S   NaN   NaN
5      6    A    A    A  pen     R     R     R  dfluc     S     S     R
6      7    A  NaN    A  pen     S   NaN     S  dfluc     S   NaN     S
7      8    A    B    A  pen     R     R     R  dfluc     R     R     R
8      9    A  NaN  NaN  pen     R   NaN   NaN  dfluc     S   NaN   NaN 
```

请注意， if`ORG2 == A`和`ORG3 == A`, then 中的值`AS20*`和`AS30*`都竞争覆盖 column 中的值`AS10*`。我不确定你想赢得哪个价值。在上面的代码中，*最后一*列获胜，即`AS30*`.

# arrays - 应用 IF.. 然后在 VBA 中的数组上

> ID：15997437
> 
> 赞同：2
> 
> 时间：2013-04-14T09:09:55.127
> 
> 标签：arrays, vba, if-statement

是否可以应用 IF .. 然后在 VBA 中的数组上？我有以下代码，我在数组 plaga 上应用 For Each 和 If - 计算每个 Interval 的出现次数，但是 VBA 返回“下标超出范围。所以，我想也许我必须以不同的方式制定这个.. .

```
Option Explicit
Public plaga As Variant

Sub dort()
  Dim cMin As Double
  Dim cMax As Double
  Dim lDer As Long

  Dim plaga() As Variant
  plaga = Worksheets("Sheet3").Range("A1:A10").Value

  Call tri1(plaga)

  cMin = WorksheetFunction.Min(plaga)
  cMax = WorksheetFunction.Max(plaga)

  Dim longInter As Double
  longInter = (cMax - cMin) / 3

  Dim pla As Variant
  Dim lCom As Long

  lDer = 2

  For Each pla In plaga
    If pla < cMin + longInter Then
      lCom = 1
    Else
      For lCom = lDer To 3
        If pla < cMin + longInter * lCom Then
          lDer = lCom
          Exit For
        End If
      Next
    End If
    plaga(lCom) = plaga(lCom) + 1
  Next

  Dim Destination As Range
  Set Destination = Worksheets("Sheet3").Range("B1")
  Destination.Resize(3, 1).Value = plaga

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:50:53.773

我不确定您的子程序 tri1(plaga) 中发生了什么，但我认为这是您的代码的正确演绎。

```
Sub dort()
'
Dim cMin As Double
Dim cMax As Double
Dim lDer As Long
Dim plaga() As Variant
'
  ReDim Preserve plaga(10)
  plaga = Worksheets("Sheet3").Range("A1:A10").Value
  '
  Call tri1(plaga)
  '
  cMin = WorksheetFunction.Min(plaga)
  cMax = WorksheetFunction.Max(plaga)
  '
Dim longInter As Double
  longInter = (cMax - cMin) / 3
  '
Dim pla As Variant
Dim lCom As Long
  '
  lDer = 2
  '
  For Each pla In plaga
    If pla < cMin + longInter Then
      lCom = 1
    Else
      For lCom = lDer To 3
        If pla < (cMin + longInter) * lCom Then
          lDer = lCom
          Exit For
        End If
      Next
    End If
    plaga(lCom, 1) = plaga(lCom + 1, 1)
  Next
  '
Dim Destination As Range
  Set Destination = Worksheets("Sheet3").Range("B1:B1")
  Destination.Resize(3, 1).Value = plaga
'
End Sub 
```

# 更新

注意：我添加了 plaga2() 来显示 longinter 的整数

```
Sub dort()

    Dim cMin As Double
    Dim cMax As Double
    Dim lDer As Long
    Dim plaga() As Variant
    Dim plaga2() As Variant

    ReDim Preserve plaga(10)
    ReDim Preserve plaga2(10)
    plaga = Worksheets("Sheet3").Range("A1:A10").Value
    plaga2 = Worksheets("Sheet3").Range("A1:A10").Value

    'Call tri1(plaga)

    cMin = WorksheetFunction.Min(plaga)
    cMax = WorksheetFunction.Max(plaga)

    Dim longInter As Double
    'In this case useing the numbers you stated
    'longinter = (7 - 1)/3 = 2
    longInter = (cMax - cMin) / 3

    Dim pla As Variant
    Dim lCom As Integer
    For lCom = 1 To 10
        If plaga(lCom, 1) >= (CMin + longInter) Then
            plaga(lCom, 1) = (plaga(lCom, 1) / longInter)
            plaga2(lCom, 1) = Int(plaga(lCom, 1))
        Else
            plaga(lCom, 1) = 1
            plaga2(lCom, 1) = 1
        End If
    Next

  Dim Destination1 As Range
  Set Destination1 = Worksheets("Sheet3").Range("B1:B1")
  Destination1.Resize(10, 1).Value = plaga

  Dim Destination2 As Range
  Set Destination2 = Worksheets("Sheet3").Range("C1:C1")
  Destination2.Resize(10, 1).Value = plaga2

End Sub 
```

# javascript - 如何监控内容可编辑 div 中的文本样式和格式？

> ID：15997439
> 
> 赞同：0
> 
> 时间：2013-04-14T09:10:11.570
> 
> 标签：javascript, angularjs, text-editor, addeventlistener, execcommand

我有这个文本编辑器[plunker 示例](http://plnkr.co/edit/ifVF9K2dKmw7EJW1IwA8?p=preview)，问题是当我单击粗体按钮或任何其他按钮时，该按钮不显示可编辑 div 的状态，我知道如果我在 ng 中的按钮上添加一个类，则可以修复-mousedown 事件的功能，但如果我单击带有粗体文本的区域，该区域也应将类添加到正确的工具栏按钮，则无法解决问题，也许我应该使用类似观察者的东西，但要看什么？

# 更新

好的，我做了一些挖掘，我正在尝试观察插入符号的位置，以便我可以将正确的样式应用于我考虑过 $watchers 的文本编辑器的工具栏按钮，但我从未使用过它们。
我正在使用的示例来自此[StackOverflow 帖子](https://stackoverflow.com/questions/4811822/get-a-ranges-start-and-end-offsets-relative-to-its-parent-container/4812022#4812022)，帖子中有一个 Jsfiddle，但我使用 AngularJS 制作了一个[plunker](http://plnkr.co/edit/zFmun3AaVXxUtkwYDvyw?p=preview)示例，展示了如何在 contenteditable div 中获取插入符号的位置。
有没有更好的方法，比如获取内部 contenteditable div 的 DOM 树，然后制作元素和位置的映射，然后使用数据绑定来控制工具栏中按钮的状态？
任何帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T07:05:16.753

我在这个[SO 帖子](https://stackoverflow.com/a/7000543/895491)中找到了答案：

> 浏览器不是手动完成所有这些操作，而是有一些方法可以告诉您当前选择或插入符号是粗体、斜体还是其他：( `document.queryCommandState()`MSDN [)](http://msdn.microsoft.com/en-us/library/ms536679%28v=vs.85%29.aspx)用于二进制命令，例如粗体和斜体，`document.queryCommandValue()`( [MSDN](http://msdn.microsoft.com/en-us/library/ms536683%28v=vs.85%29.aspx) ) 用于带有值，例如字体相关的命令。

# c - C中的不稳定递归

> ID：15997448
> 
> 赞同：0
> 
> 时间：2013-04-14T09:11:43.870
> 
> 标签：c, recursion, undefined-behavior

我在 C 和 Java 上运行了这段代码，分别得到了 65 和 55。我无法理解C如何获得65。请帮忙。

```
int recur(int count) 
{
    if(count==10)
        return count;
    else
        return (count+recur(++count));
}

void main()
{
    printf("%d\n",recur(0));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:21:27.357

```
return (count+recur(++count)); 
```

是[未定义的行为](https://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior)。在不同的编译器上，您可能会得到不同的结果，即使具有不同编译选项的相同编译器也可能导致不同的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T09:27:02.777

使用一些调试语句重写代码并在[键盘](http://codepad.org/QNDovkWN)上进行测试显示正在发生的事情。我鼓励您采用这种方法运行代码，看看发生了什么。

```
int recur(int count) 
{
    int ret;
    if(count==10)
       ret = count;
    else {
       printf("Count Before = %d\n", count);
       ret =  (count +recur(++count));
    }
    printf("Count after = %d\n", ret);
    return ret; 
}

 void main()
 {
    printf("%d\n",recur(0));
 } 
```

运行它给出了这个

```
Count Before = 0
Count Before = 1
Count Before = 2
Count Before = 3
Count Before = 4
Count Before = 5
Count Before = 6
Count Before = 7
Count Before = 8
Count Before = 9
Count after = 10
Count after = 20
Count after = 29
Count after = 37
Count after = 44
Count after = 50
Count after = 55
Count after = 59
Count after = 62
Count after = 64
Count after = 65
65 
```

所以你可以看到首先递归到 10，**然后添加 10，**然后是 9，然后是 8，等等......

将其更改为 i = (count + recur(count + 1))

给

```
Count Before = 0
Count Before = 1
Count Before = 2
Count Before = 3
Count Before = 4
Count Before = 5
Count Before = 6
Count Before = 7
Count Before = 8
Count Before = 9
Count after = 10
Count after = 19
Count after = 27
Count after = 34
Count after = 40
Count after = 45
Count after = 49
Count after = 52
Count after = 54
Count after = 55
Count after = 55
55 
```

但是现在只达到了 10 级嵌套，但添加的数量仍然是 9。

IE。预增量意味着您要添加额外的 10。

# php - Facebook PHP SDK 和标签页 - login 和 signed_request

> ID：15997455
> 
> 赞同：0
> 
> 时间：2013-04-14T09:12:45.530
> 
> 标签：php, facebook, login, sdk

我正在制作一个用于标签页的 Facebook 应用程序，该应用程序的重点是人们上传图片并分享它，以便其他人可以看到并投票。所以我知道我必须使用`app_data`将用户重定向到特定图片，但我无法处理它。我正在尝试使用`$facebook->getSigned_request`，`$_REQUEST`但它们都没有返回 app_data 值。我也使用 PHP SDK 示例文件进行登录，但是当我从标签页尝试它时，什么也没发生。你能告诉我如何从标签页登录并接收`app_data`价值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T09:35:15.667

所以，从一开始。首先，当用户访问您的页面时，您必须检查该用户是否已授予您的应用权限。

```
$facebook = new Facebook(array(
    'appId' => YOUR_APP_ID,
    'secret' => YOUR_SECRET
));

if($facebook->getUser()) {
    //Here will be code to get app_data
} else {
    $params = array(); //Here you will enter key=>value pairs of permissions you need
    echo '<script>top.location.href="' . $facebook->getLoginUrl($params) . '"</script>';
    //Code above redirects user to page that will ask for permissions for your app.
} 
```

上面的代码将用户登录和权限。现在为了得到 app_data 你必须这样做：

```
$signed_request = $facebook->getSignedRequest(); //getting signed_request
$app_data = $signed_request['app_data']; // getting app_data 
```

现在，为了获取 app_data，您需要确保将其传递到 URL (GET) 中的选项卡。像这样

```
PATH_TO_YOUR_FB_PAGE/?app_data=SOME_VALUE 
```

或者如果您的页面以 结尾`?sk=app_PAGE_ID`，只需添加`&app_data=SOME_VALUE`

# r - R中的另一个变量引用对象的属性

> ID：15997456
> 
> 赞同：1
> 
> 时间：2013-04-14T09:12:55.617
> 
> 标签：r, variables, attributes

有没有办法通过 R 中的其他变量来引用对象的属性？下面的例子将解释我的意思。

假设我们有一个具有某些属性的对象——对象的种类对于这个问题并不重要。例如我们可以有

```
x <- 1:100
y <- x+rnorm(100)
obj <- lm(y~x+1) 
```

现在我想编写一个函数，其参数将引用对象的一个​​特定属性。例如，我想编写一个函数，它会打印所创建对象的某些属性的值。具体来说，我想要这样的东西：

```
fun <- function(obj, attr) {
          print(obj$attr)
       } 
```

我的问题是，通过其他变量引用对象属性的方法是什么。我知道这个例子很愚蠢，但我想提请注意问题，而不是功能。

提前致谢

库巴

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T09:23:46.597

你可以使用类似的东西：

```
fun <- function(obj, attr) {
          print(obj[[attr]])
       } 
```

例如 ，

```
fun(obj,'call')
lm(formula = y ~ x + 1) 
```

# php - Get date in another timezone of the date which is in indian timezone

> ID：15997458
> 
> 赞同：-2
> 
> 时间：2013-04-14T09:13:24.320
> 
> 标签：php, date, timezone

I want to get date in another timezone of the date in indian timezone in php. i.e. if the date is 01-02-2013 in indian (+5:30) timezone What is the date in antoher timezone. ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:28:52.043

查看[DateTime](http://www.php.net/manual/en/class.datetime.php)和[DateTimeZone](http://www.php.net/manual/en/class.datetimezone.php)对象。

```
<?php
$date = new DateTime('now', new DateTimeZone('Europe/London'));

echo $date->format('r e'); // Sun, 14 Apr 2013 10:24:55 +0100 Europe/London

$date->setTimezone(new DateTimeZone('America/New_York'));

echo $date->format('r e'); // Sun, 14 Apr 2013 05:26:08 -0400 America/New_York 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T09:14:34.067

使用`date_default_timezone_set`： http: [//php.net/manual/en/function.date-default-timezone-set.php](http://php.net/manual/en/function.date-default-timezone-set.php)

# jquery - 对 Paypal 的 Ajax 请求

> ID：15997459
> 
> 赞同：1
> 
> 时间：2013-04-14T09:13:26.597
> 
> 标签：jquery, ajax, paypal

您好，我正在尝试让用户在后台访问 Paypal 网址，但它似乎不起作用。这是代码

```
$.ajax({
    crossDomain: true,
    type: "GET",
    url: "http://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=B47NFTANZL5S6",
    succus: function() {
        alert('succus');
    },
    error: function() {
        alert('error');
    },
    complete: function() {
        alert('Complete');
    }
}); 
```

您可以单击此链接[Paypal 链接](http://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=B47NFTANZL5S6)，它将在结帐中添加一个项目。但不能通过 ajax 请求使其工作。

# oracle - 在单个更新上交换列值 (Oracle)

> ID：15997460
> 
> 赞同：0
> 
> 时间：2013-04-14T09:13:34.557
> 
> 标签：oracle, sql-update

我们需要打乱某些表上的某些字段值，但某些字段之间存在逻辑链接。

例如，如果表是：table t(name varchar2(30), email varchar2(60))，则 email 值必须以名称的完整值开头：

```
Name        Email
----        ----
Smith       Smitha@any.com 
```

所以打乱之后可以

```
Name        Email
----        ----
xubal       xubaly@any.com 
```

我们使用 dbms_random.string 函数，因此每次调用它都会返回一个不同的值。

是否可以在一次独特的运行中进行更新并保持字段之间的逻辑链接？（我不能使用数据库触发器）

在接下来我尝试的两个选项中，Oracle 返回名称字段的旧值而不是新值。

```
update t
set name=dbms_random.string('l',length(name)),
    email=name || dbms_random.string('l',2) || '@any.com';

update t t1
set name=dbms_random.string('l',length(name)),
    email=(select t1.name || dbms_random.string('l',2) || '@any.com'
           from t t2
           where t2.rowid = t1.rowid) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T23:24:02.000

您可以使用`MERGE`查询而不是过程来执行此操作。

获取表`t`行标识符列表（使用 Oracle`ROWID`伪列）和随机名称，然后将它们匹配回表`t`并使用它们来更新名称和电子邮件。查询（我已经测试过）如下：

```
MERGE INTO t
USING (
  SELECT ROWID AS ID, DBMS_Random.String('l', LENGTH(name)) AS RandName
  FROM t) newNames
ON (t.ROWID = newNames.ID)
WHEN MATCHED THEN
  UPDATE SET
    name = newNames.RandName,
    email = newNames.RandName || SUBSTR(email, INSTR(email, '@')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T09:42:58.207

您可以创建一个包并在包中使用一个变量。
像这样的东西：

```
create package pck as

v t.name%TYPE;
function rnd_next(in_name t.name%TYPE) return t.name%TYPE;
function rnd_cur return t.name%TYPE;
end;
/

create package body pck as

function rnd_next(in_name t.name%TYPE) return t.name%TYPE is

begin
v := dbms_random.string('l',length(in_name));
return v;
end;

function rnd_cur return t.name%TYPE is

begin
return v;
end;
end;
/ 
```

然后你可以像这样更新：

```
update t
set name = pck.rnd_next(name),
email = pck.rnd_cur || '@aaa.com'; 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/9e5e5/1)

# javascript - How to get the attribute data of an element

> ID：15997462
> 
> 赞同：2
> 
> 时间：2013-04-14T09:14:19.513
> 
> 标签：javascript, jquery, raphael

I am using a chart from Raphael.js and I really have a very little experience with javascript and JQuery that's why I would like to ask you guys, so I'll go straight to the point.

I have some problems regarding the fill data. I simply wanted to get all the fill data (in this example there are two text tags so I wanted to get two `fill="#ff0000"` and `fill="#00e0ff"`

```
<text style="font: 20px "Arial"; opacity: 1; text-anchor: middle;" x="555.0919781452639" y="222.43750078648324" text-anchor="middle" font="10px "Arial"" stroke="none" fill="#ff0000" opacity="1" font-size="20px">
   <tspan dy="7.000000786483241">Ruby</tspan>
</text>

<text style="font: 20px "Arial"; opacity: 1; text-anchor: middle;" x="604.746975531892" y="434.94193863997384" text-anchor="middle" font="10px "Arial"" stroke="none" fill="#00e0ff" opacity="0" font-size="20px">
   <tspan dy="7.000532389973841">PHP</tspan>
</text> 
```

anyway i created a jsfiddle account for it i really still don't have an idea can you guys help me out? [http://jsfiddle.net/psyreaper3/rXXem/9/](http://jsfiddle.net/psyreaper3/rXXem/9/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T09:30:44.757

尝试将此代码放入您的回调函数中：

```
$('text').each(function(){
    alert($(this).attr('fill'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T09:19:37.590

一个看起来有点难看但功能强大的解决方案是：

`$($('text')[0]).attr('fill');`（这会给你第一个文本的填充属性）和
`$($('text')[1]).attr('fill');`（这会给你第二个）。

理想情况下，您会在这些元素上使用 id，以便您轻松获取特定的文本元素属性。

`<text id="first" fill="blah"></text>`然后你可以做`$('#first').attr('fill');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T09:17:51.723

您可以通过这种方式获得填充属性。

```
$('text').each(function(){
   alert($(this).prop('fill'));
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T05:05:16.830

[更新小提琴](http://jsfiddle.net/rXXem/11/)

您可以通过以下方式获取填充属性：

```
$(this).attr('fill'); 
```

并可以通过使用更新它：

```
$(this).attr('fill','#ffee00'); 
```

# php - 带有路由的codeigniter分页

> ID：15997463
> 
> 赞同：0
> 
> 时间：2013-04-14T09:14:20.613
> 
> 标签：php, codeigniter, routing, pagination

你好我有分页码

```
//$this->output->enable_profiler(TRUE);
 $this->load->library('pagination');
 $this->load->model('dbs');
$config['base_url'] = site_url('cp/my_walls/');
$config['per_page'] = 5; 
$config['num_links'] = 3;
$config['uri_segment'] = 3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ;
$config['total_rows'] = $this->dbs->get_walls_count_by_user();
$this->pagination->initialize($config); 
$curr = ($this->uri->segment(3)) ? $this->uri->segment(3) : 0;
        $data['title'] = 'User control Panel';
        $data['walls'] = $this->dbs->get_walls_by_user($config["per_page"],$curr); // get limited posts 
```

我也有这个网址的路线

```
$route['cp/my_walls'] = "main/my_uploaded_wallpapers";
$route['cp/my_walls/(:any)'] = "main/my_uploaded_wallpapers/$1"; 
```

这是默认工作的，它的限制是 5 个帖子。

但是我在分页链接中单击第 2 页，它不再起作用

```
url: site.com/cp/my_walls     - working
url: site.com/cp/my_walls/10     - not working 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-02-07T16:09:13.187

尝试这个

```
 $route['news/(:num)'] = "news/index"; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-24T14:14:42.007

使用`$this->uri->rsegment(n)`代替`$this->uri->segment(n)`

# c - How do i make my gtk app use the dark theme?

> ID：15997464
> 
> 赞同：13
> 
> 时间：2013-04-14T09:14:25.367
> 
> 标签：c, gtk, themes, gnome

Some apps on the gnome desktop like the image viewer use a dark variation of the theme. What code is required to make my own gtk program use this dark variation of the theme?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-14T20:00:02.697

使用[`gtk-application-prefer-dark-theme`](https://developer.gnome.org/gtk3/3.2/GtkSettings.html#GtkSettings--gtk-application-prefer-dark-theme)设置。这应该这样做：

```
g_object_set(gtk_settings_get_default(),
    "gtk-application-prefer-dark-theme", TRUE,
    NULL); 
```

您可能需要确保在创建任何小部件之前执行此操作。

# python - 当类是对象类的子类时，为什么内置函数 type() 会给出不同的输出？

> ID：15997466
> 
> 赞同：3
> 
> 时间：2013-04-14T09:14:31.637
> 
> 标签：python

为什么`type(Foo)`不同`type(Bar)`和`type(foo)`不同`type(bar)`？

```
>>> class Foo: pass   
...
>>> foo = Foo()
>>> class Bar(object): pass 
...
>>> bar = Bar()
>>>
>>> type(Foo)
<type 'classobj'>
>>> type(foo)
<type 'instance'>
>>> type(Bar)
<type 'type'>
>>> type(bar)
<class '__main__.Bar'> 
```

# regex - 电子邮件列表的正则表达式，验证无效的电子邮件地址

> ID：15997471
> 
> 赞同：2
> 
> 时间：2013-04-14T09:15:24.697
> 
> 标签：regex, validation

我有以下正则表达式用于验证由“;”分隔的电子邮件地址列表

```
\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*([;]\s*\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*)* 
```

它曾经正常工作（对于我的测试），直到我发现它有问题。

它不仅允许这样的东西（预期）Email@domain.com;Email@domain.com;Email@domain.com

它允许这样的东西：（不打算）Email@domain.comEmail@domain.comEmail@domain.com

它的问题在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:06:46.820

这是使用正则表达式检查电子邮件的标准方法：`\b\w+@[\w.]+\.[A-z.]{2,4}\b`
它并不完美，但它应该适用于您的示例。
您也可以用分号分割字符串，然后逐一验证电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T21:06:16.150

一次验证一封电子邮件可能是您最干净的选择，否则正则表达式会变得非常丑陋。特别是如果您稍后向地址添加更复杂的要求。当时使用单个地址的一大好处是您遇到了一个经过充分尝试的问题，即[如何使用 regex 验证电子邮件地址](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T12:24:38.890

试试这个：

```
(?:(?:^|;)\w+(?:[-+.]\w+)*@\w+(?:[-.]\w+)*\.\w+(?:[-.]\w+)*)+$ 
```

# java - Renaming multiple files to folder names on windows

> ID：15997472
> 
> 赞同：0
> 
> 时间：2013-04-14T09:15:35.027
> 
> 标签：java, windows, file, nullpointerexception, renaming

I have been trying to make a program that renames several .mp4 file to the name of the folder it is in.The program works sometimes on a few files but eventually throws a null pointer exception

I have tried multiple different ways but none seem to work properly and I am not very familiar with windows 7-relevant java.

Can anybody see the problem? Cheers.

```
public static void main (String []args) throws InterruptedException
{
String dir = "D:\\New folder";

File directory = new File(dir); 
File[] files = directory.listFiles();

File tempd;
File[] tempf;
String temps;
int filecount = 0;  

for (int index = 0; index < files.length; index++)  
{       
temps = files[index].toString();
tempd = new File(temps);
tempf = tempd.listFiles();

for (int i = 0; i < tempf.length; i++)
{
String[] tempsRel = temps.split("\\\\");

if (tempf[i].toString().endsWith("mp4"))
{
boolean success = tempf[i].renameTo(new File(dir + "\\" +  tempsRel[tempsRel.length-1] + ".mp4"));
if (success)
{
System.out.println("RENAMED FILE ==> " + tempsRel[tempsRel.length-1] + ".mp4"); 
}}}}

System.exit(0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T09:20:56.643

听起来你在新文件夹中有一些文件

```
 tempf = tempd.listFiles(); 
```

如果您在新文件夹中有文件，此行将返回 null 在列出文件之前检查 tempd 是否是目录

```
 tempd   = new File(temps);
  if (tempd.isDirectory()) { 
   your code
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-18T04:48:14.293

这重命名目录中的所有文件

```
import java.io.File;
import java.util.Scanner;

public class RENAME {
public static void main(String[] args) {
   Scanner s = new Scanner(System.in);
   System.out.print("Enter folder name    ");
  File old = new File(s.nextLine());
  for(File f :old.listFiles()){
      if(f.isFile())
      {

          f.renameTo(new File(f+".png"));

      }
   }
  }
 }
} 
```

# android - android map doesn't appear

> ID：15997473
> 
> 赞同：0
> 
> 时间：2013-04-14T09:15:43.290
> 
> 标签：android, google-maps-android-api-2

i'm trying to make a sample map application, but the map doesn't appear on screen. I'm following this tutorial [http://www.tutos-android.com/position-utilisateur-google-map-android](http://www.tutos-android.com/position-utilisateur-google-map-android) and i'm using the Key for browser apps (with referers) .When i followed this tutorial [http://blog.rolandl.fr/1230-android-la-geolocalisation-et-lapi-google-maps-android-v2](http://blog.rolandl.fr/1230-android-la-geolocalisation-et-lapi-google-maps-android-v2) with the same key it worked but it gave me wrong position

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:54:38.177

在第一个教程中没有提到在 Android 中使用 Google Maps 所需的 Google Maps API V2 密钥。第一个教程也适用于已弃用的 Google Maps API V1。

第二个教程绝对是您需要的。如果您的位置错误，可能是因为未使用 GPS。检查 GPS 是否已打开，并且您的 AndroidManifest.xml 中有这些行：

```
<uses-feature android:name="android.hardware.location.network"/>
<permission
        android:name="cz.nuc.wheelgo.permission.MAPS_RECEIVE"
        android:protectionLevel="signature"/>  <!-- replace name of the package by yours -->
<uses-permission android:name="cz.nuc.wheelgo.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-feature
  android:glEsVersion="0x00020000"
  android:required="true"/>
<meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzgkugSgsghsei2256Y7XN6xSGj-o"/>  <!-- your key --> 
```

要在地图上启用您的位置，请使用：

```
GoogleMap mMap;
mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
mMap.setMyLocationEnabled(true); 
```

我建议您在路径中查看 Android-sdk 中的示例：`android-sdk\extras\google\google_play_services\samples\maps\`

# iphone - Output audio settings when append one AAC file to another

> ID：15997474
> 
> 赞同：6
> 
> 时间：2013-04-14T09:15:54.917
> 
> 标签：iphone, objective-c, audio, aac, avassetexportsession

My app records two audio files one by one using AVAudioRecorder with audio parameters:

```
 NSDictionary *outputSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                    [NSNumber numberWithInt: kAudioFormatMPEG4AAC], AVFormatIDKey,
                                    [NSNumber numberWithFloat:44100.0], AVSampleRateKey,
                                    [NSNumber numberWithInt:1], AVNumberOfChannelsKey,
                                    [NSNumber numberWithInt:AVAudioQualityMin], AVEncoderAudioQualityKey,
                                    [NSNumber numberWithInt:16],AVEncoderBitDepthHintKey,
                                    [NSNumber numberWithInt:128000], AVEncoderBitRateKey,
                                    nil]; 
```

I need append file2 at the end of file1\. I'm using solution like [there](https://stackoverflow.com/a/13438421/824285) (appending two audio files by creating a AVMutableCompositionTrack after adding the two files and exporting the composition using `exportAsynchronouslyWithCompletionHandler:` method of AVAssetExportSession).
It works, but I have two input files 128kbs 44.1kHz 16bit mono, and output file format is: 219.4kbs 44.1kHz 16bit stereo.

Is any way to configure output audio file parameters for AVAssetExportSession?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:18:42.690

我找到了解决方案：[**SDAVAssetExportSession**](https://github.com/rs/SDAVAssetExportSession)

# android - json twitter search feed parsing in android

> ID：15997475
> 
> 赞同：0
> 
> 时间：2013-04-14T09:16:05.133
> 
> 标签：android, json, twitter-feed

I have problem in parsing json from twitter search feed . for example the search url is:

```
https://search.twitter.com/search.json?q=android 
```

[Here is a link to the search](https://search.twitter.com/search.json?q=android)

I want to get "result" array in json data. My code for fetch json and parse :

```
StringBuilder tweetFeedBuilder = new StringBuilder();
HttpClient tweetClient = new DefaultHttpClient();

//pass search URL string to fetch
HttpGet tweetGet = new HttpGet(searchURL);

//execute request
HttpResponse tweetResponse = tweetClient.execute(tweetGet);
//check status, only proceed if ok
StatusLine searchStatus = tweetResponse.getStatusLine();
if (searchStatus.getStatusCode() == 200) {
    //get the response
    HttpEntity tweetEntity = tweetResponse.getEntity();
    InputStream tweetContent = tweetEntity.getContent();
    //process the results
    InputStreamReader tweetInput = new InputStreamReader(tweetContent);
    BufferedReader tweetReader = new BufferedReader(tweetInput);

    while ((lineIn = tweetReader.readLine()) != null) 
    {
        tweetFeedBuilder.append(lineIn);
    }

    try{
        // A Simple JSONObject Creation
        JSONObject json=new JSONObject(tweetFeedBuilder);
        Log.i("Tweets","<jsonobject>\n"+json.toString()+"\n</jsonobject>");

        String str1 = "result";
        JSONArray jarray = json.getJSONArray(str1);

        for(int i = 0; i < jarray.length(); i++){

            JSONObject c = jarray.getJSONObject(i);
            String id = c.getString(TWEET_ID);
            String text = c.getString(TWEET_TEXT);
        }
    }
    catch(JSONException jexp){
        jexp.printStackTrace();
    } 
```

After creating JSON object , JSONArray giving error in creating and goes in the catch block . Actually I want to fetch "result" array from JSON data.

But got error while creating. I just want to fetch user_id and text from the JSON data. I working in android platform and eclipse sdk.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:09:45.553

正如评论中已经提到的，您使用了错误的密钥。它应该是

```
String str1 = "results"; // you are using result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:43:33.543

（只是详细说明我的评论......）

如果您仔细查看 JSON 响应，结果数组的键不是`result`，而是`results`。因此，您应该通过以下方式获取 JSONArray：

```
JSONArray jarray = json.getJSONArray("results"); 
```

另外，我注意到您想从每个数组项中获取“user_id”和“text”。确保为用户使用正确的密钥：`from_user_id`。

# c# - Is it possible to simplify this Linq Query Syntax?

> ID：15997476
> 
> 赞同：1
> 
> 时间：2013-04-14T09:16:09.223
> 
> 标签：c#, linq

Given a sequence of words with some repeated, such as this:

```
var words = "one two three two four five six four seven four eight".Split(' '); 
```

~~You can find duplicates like this~~ You can group the words like this:

```
var g1 = words.GroupBy(w => w); 
```

I was trying to rewrite that into Linq Query sytnax, just to see what it looks like (I'm aware that in real code you would just leave it like the line above!).

The Linq I came up with looks far more complicated than it should, I think. How can it be simplified? And is it *really* the same as the line above?

```
var g2 = from w in words group w by w into g select g; 
```

(I think I'm having a Sunday Brain-Fade... ;)

[EDIT] My source for this wonderment was from the answers to [this question from earlier](https://stackoverflow.com/questions/15997212/check-if-string-contains-same-characters-twice#comment22810301_15997212).

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T09:18:57.697

**您的查询不返回重复项**，它返回不同的项目，因此您可以轻松使用 `Distinct()`扩展方法。

```
var dist = words.Distinct(); 
```

`Distinct()`在语法查询中没有等价物。

如果您真的要查找重复项，则必须将查询更改为：

```
var g1 = words.GroupBy(w => w).Where(g => g.Count() > 1).Select(g => g.Key); 
```

并在语法查询中

```
var g1 = from w in words
         group w by w into g
         where g.Count() > 1
         select g.Key; 
```

但是，第二个将由编译器翻译成第一个。

我没有看到任何更简单的方法来使用语法查询来获得它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T09:17:40.253

以上都是LINQ版本。一个是方法表达式，另一个是[查询表达式](http://msdn.microsoft.com/en-us/library/bb397676.aspx)。它们之间没有区别。

您应该看到：[LINQ (C#) 中的查询语法和方法语法](http://msdn.microsoft.com/en-us/library/vstudio/bb397947.aspx)

如果您的意思是简化查询语法，那么我认为您不能对其进行太多修改，因为它等同于您的方法语法。

# statistics - Gretl - test alpha and beta

> ID：15997478
> 
> 赞同：0
> 
> 时间：2013-04-14T09:16:34.920
> 
> 标签：statistics, regression-testing, gretl

I have done an ordinary least squared with an excel data set. Now I want to test α against the value of 0 and β against the value of 1 using an error probability of 0.05%.

How to do this in gretl?

I appreciate your answer!!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:58:12.003

我编辑您的帖子以添加一个 gretl 标志，希望我们在 SO 中也会有更多的 gretl 用户。

现在要回答您的问题，您需要处理模型中的一般线性限制并计算相关的 F 检验。

因此，要使用 gretl，您可以使用 gretl 脚本语言 hansl 执行以下操作：

```
open murder_rates
ols executions const income lfp southern --quiet

restrict
b[income]=0
b[lfp]=1
end restrict 
```

我们有以下结果

```
## Restriction set
##  1: b[income] = 0
##  2: b[lfp] = 1

## Test statistic: F(2, 41) = 29633.7, with p-value = 1.6337e-65

## Restricted estimates:

##              coefficient   std. error   t-ratio    p-value 
##   ---------------------------------------------------------
##   const       -53.0056      0.370949    -142.9     3.29e-59 ***
##   income        0.00000     0.00000       NA      NA       
##   lfp           1.00000     0.00000       NA      NA       

##   Standard error of the regression = 2.4606 
```

如果您想使用 R 轻松完成，请检查`car`包（`linearHypothesis`函数）

# openssl - Get AES Key from EVP_CIPHER_CTX

> ID：15997479
> 
> 赞同：1
> 
> 时间：2013-04-14T09:16:42.030
> 
> 标签：openssl, aes, rsa, libssl

I'm using openssl trying to use an RSA public key, to encrypt an AES key, and use that AES to send large-ish data over HTTP(s) to a 3rd party site. I know that's a lot of encryption, the second layer comes when the network is down, and the data has to be cached on disk until it can be `POST`ed.

I've been using the example code from [this blog](http://saju.net.in/blog/?p=36), a chunk of which is inlined below:

```
int aes_init(unsigned char *key_data, int key_data_len, unsigned char *salt, EVP_CIPHER_CTX *e_ctx)
{
  int i, nrounds = 5;
  unsigned char key[32], iv[32];
  /*
   * Gen key & IV for AES 256 CBC mode. A SHA1 digest is used to hash the supplied key material.
   * nrounds is the number of times the we hash the material. More rounds are more secure but
   * slower.
   */
  i = EVP_BytesToKey(EVP_aes_256_cbc(), EVP_sha1(), salt, key_data, key_data_len, nrounds, key, iv);
  if (i != 32) {
    printf("Key size is %d bits - should be 256 bits\n", i);
    return -1;
  }
  for(int x = 0; x<32; ++x)
    printf("Key: %x iv: %x \n", key[x], iv[x]);
  for(int x = 0; x<8; ++x)
    printf("salt: %x\n", salt[x]);
  EVP_CIPHER_CTX_init(e_ctx);
  EVP_EncryptInit_ex(e_ctx, EVP_aes_256_cbc(), NULL, key, iv);
  return 0;
} 
```

I'd like to stick with his `aes_init()` function, but I can't find a way to get the key out of the `EVP_CIPHER_CTX` once it has been initialised.

`apropos` lists a few functions relating to `EVP_CIPHER_CTX`:

```
$ apropos EVP_CIPHER_CTX
EVP_CIPHER_CTX_block_size (3ssl) - EVP cipher routines
EVP_CIPHER_CTX_cipher (3ssl) - EVP cipher routines
EVP_CIPHER_CTX_cleanup (3ssl) - EVP cipher routines
EVP_CIPHER_CTX_ctrl (3ssl) - EVP cipher routines
EVP_CIPHER_CTX_flags (3ssl) - EVP cipher routines
EVP_CIPHER_CTX_get_app_data (3ssl) - EVP cipher routines
EVP_CIPHER_CTX_init (3ssl) - EVP cipher routines
EVP_CIPHER_CTX_iv_length (3ssl) - EVP cipher routines
EVP_CIPHER_CTX_key_length (3ssl) - EVP cipher routines
EVP_CIPHER_CTX_mode (3ssl) - EVP cipher routines
EVP_CIPHER_CTX_nid (3ssl) - EVP cipher routines
EVP_CIPHER_CTX_set_app_data (3ssl) - EVP cipher routines
EVP_CIPHER_CTX_set_key_length (3ssl) - EVP cipher routines
EVP_CIPHER_CTX_set_padding (3ssl) - EVP cipher routines
EVP_CIPHER_CTX_type (3ssl) - EVP cipher routines 
```

`EVP_CIPHER_CTX_set_key_length` looks promising, but is there then some magical offset from which I have to read the `EVP_CIPHER_CTX`? Otherwise, I'll have to modify his function to return the `key` (and the `iv`), or throw away the function and inline the code.

The end goal here is to encrypt a large portion of data using AES, and encrypt the AES key using our RSA public key, base64 encode both, and broadcast them to the server. (Which I believe is the correct way of doing things)

The only issue then, is extracting the key from the `EVP_CIPHER_CTX`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:40:13.873

为什么要为这种混合密码学构建自己的解决方案？已经有现有的标准和方法可以帮助您。

我建议您查看[PKCS#7](https://www.rfc-editor.org/rfc/rfc2315)标准，它是 S/MIME 的基础。OpenSSL 有一个直接的接口。你告诉它你想使用非对称密钥加密哪些数据，它会为你处理其余的。

查看`pkcs7_encrypt`以及如何将数据提取为可传输格式（以及`pkcs7_decrypt`反向）的功能。请参阅 OpenSSL 的文档：[PKCS7_encrypt](http://www.openssl.org/docs/crypto/PKCS7_encrypt.html)、[PKCS7_decrypt](http://www.openssl.org/docs/crypto/PKCS7_decrypt.html)并且您可能想熟悉 OpenSSL 使用的[i2d/d2i 约定](http://www.openssl.org/docs/crypto/d2i_X509.html#)（这是 X509，但 d2i 部分也适用于此处。`i2d_PKCS7_*``d2i_PKCS7_*`

**编辑**：这是一个加密的例子（解密是类似的）：

```
#include <stdio.h>
#include <openssl/pem.h>
#include <openssl/crypto.h>
#include <openssl/err.h>

int main()
{
    STACK_OF(X509) *certs;
    FILE *fp;
    BIO *bio;
    PKCS7 *p7;

    ERR_load_crypto_strings();
    OpenSSL_add_all_algorithms();

    certs = sk_X509_new_null();
    fp = fopen("cert.pem", "r");
    sk_X509_push(certs, PEM_read_X509(fp, NULL, NULL, NULL));
    fclose(fp);

    bio = BIO_new_file("data.txt", "r");
    p7 = PKCS7_encrypt(certs, bio, EVP_des_ede3_cbc(), 0);
    BIO_free(bio);

    bio = BIO_new_file("data.txt.enc", "w");
    i2d_PKCS7_bio(bio, p7);
    BIO_flush(bio);
    BIO_free(bio);

    ERR_print_errors_fp(stdout);
    return 0;
} 
```

我已将完整示例上传到[我的存储库](https://github.com/Javex/various-sources/tree/master/C/openssl/pkcs7)。

# java - 如何确保 Java 线程以特定顺序运行

> ID：15997483
> 
> 赞同：4
> 
> 时间：2013-04-14T09:17:13.360
> 
> 标签：java

给定三个线程 1-3 打印一个字母 AC，我如何保证输出顺序？

我希望线程的输出是“ABCABCABC”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T09:21:01.063

线程独立运行，因此除非您执行特殊的工作来同步线程，否则您永远不会得到这样的输出。预计独立运行的 3 个线程将打印“随机”输出，因为由操作系统来安排线程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-20T15:00:37.267

这可能不是线程应该做的，但可以通过简单地使用 join 来实现（它要求启动*ING*线程等待启动*ED*线程的完成。

```
class A implements Runnable {

@Override
public void run() {
    try {
        Thread.sleep(12);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    System.out.println("ClassA : A");
}

}

class B implements Runnable {

@Override
public void run() {
    try {
        Thread.sleep(12);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    System.out.println("ClassB : B");
}

}

class C implements Runnable {

@Override
public void run() {
    try {
        Thread.sleep(12);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    System.out.println("ClassC : C");
}

}

public class OrderedThreadApp {
public static void main(String[] args) {

    Thread a = new Thread(new A());
    Thread b = new Thread(new B());
    Thread c = new Thread(new C());

    a.start();
    try {
        a.join();
        b.start();
        b.join();
        c.start();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-10T18:20:40.203

我的解决方案在这里：[https](https://gist.github.com/sinujohn/5fa717dfff680634c6b0c2a7eca108ac) ://gist.github.com/sinujohn/5fa717dfff680634c6b0c2a7eca108ac可以修改来实现这一点。这个想法是创建一个保存状态的对象并在所有线程之间共享该对象。只有一个同步块可以访问共享状态对象。

```
public class Main {

    public static void main(String[] args) throws InterruptedException {
        MyState state = new MyState();

        final Thread t1 = new Thread(new MyRunnable(10, 'A', state));
        final Thread t2 = new Thread(new MyRunnable(10, 'B', state));
        final Thread t3 = new Thread(new MyRunnable(10, 'C', state));
        t1.start();
        t2.start();
        t3.start();
    }
}

class MyState {
    private char state = 'A';

    public char getState() {
        return state;
    }

    public void incrState() {
        switch(state) {
        case 'A':
            state = 'B';
            return;
        case 'B':
            state = 'C';
            return;
        default:
            state = 'A';
        }
    }
}

class MyRunnable implements Runnable {

    private final int max;
    private final char value;
    private final MyState state;

    MyRunnable(int max, char value, MyState state) {
        this.max = max;
        this.value = value;
        this.state = state;
    }

    @Override
    public void run() {
        int count = 0;
        while(count < max) {
            synchronized (this.state) {
                if (this.state.getState() == this.value) {
                    System.out.print(value);
                    count++;
                    this.state.incrState();
                }
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T09:51:34.427

检查[CyclicBarrier](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CyclicBarrier.html)，这可能会对您有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-11T17:13:06.510

您可以使用等待和通知进行线程间通信。我在这里使用 turn int 变量在线程之间发出信号。

```
public class ThreadInterleaving{
    public static void main(String[] args){

    MyThread h = new MyThread();

    Thread t1 = new Thread(h);
    Thread t2 = new Thread(h);
    Thread t3 = new Thread(h);

    t1.start();
    t2.start();
    t3.start();

    }
}

class MyThread implements Runnable{
    public static int turn;

    @Override
    public void run(){
        for(int i =0;i<3;i++){
            synchronized(this){
                if(turn == 0){
                    System.out.println("Thread1");
                    turn =1 ;
                    notify();
                }else{
                    try{
                        wait();
                    }catch(InterruptedException ie){

                    }
                }

                if(turn == 1){
                    System.out.println("Thread2");
                    turn = 2;
                    notify();
                }else{
                    try{
                        wait();
                    }catch(InterruptedException ie){

                    }
                }

                if(turn == 2){
                    System.out.println("Thread3");
                    System.out.println("*********");
                    turn = 0;
                    notify();
                }else{
                    try{
                        wait();
                    }catch(InterruptedException ie){        

                    }
                }
            }
        }
    }
}

/*Output
Thread1
Thread2
Thread3
*********
Thread1
Thread2
Thread3
*********
Thread1
Thread2
Thread3
*********
Thread1
Thread2
Thread3
*********
Thread1
Thread2
Thread3
*********
Thread1
Thread2
Thread3
*********
Thread1
Thread2
Thread3
*********
Thread1
Thread2
Thread3
*********
Thread1
Thread2
Thread3
*********
*/ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-15T14:02:50.677

```
public class RunningThreadSequentially {
    //Runnable task for each thread
    private static class Task implements Runnable {
        public static int counter=0;

        @Override
        public void run() {
            try {
                synchronized(this) {
                    Thread.sleep(500);
                    System.out.println(Thread.currentThread().getName() + " is completed--" + counter ++);             
                }
            } catch (Exception ex) {
            } 
        }
    }

    public static void main(String args[]) throws InterruptedException {
        while(true) {
            Thread t1 = new Thread(new Task(), "Thread 1");
            Thread t2 = new Thread(new Task(), "Thread 2");
            Thread t3 = new Thread(new Task(), "Thread 3");
            Thread t4 = new Thread(new Task(), "Thread 4");
            Thread t5 = new Thread(new Task(), "Thread 5");
            Thread t6 = new Thread(new Task(), "Thread 6");

            t1.start();
            t1.join();
            t2.start();
            t2.join();
            t3.start(); 
            t3.join(); 
            t4.start(); 
            t4.join(); 
            t5.start();
            t5.join(); 
            t6.start(); 
            t6.join();
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-23T07:15:54.443

`CountDownLatch`您可以通过组合和来实现这一点`CyclicBarrier`。这是示例代码：

```
 package org.orange.didxga;

import java.util.concurrent.BrokenBarrierException;
import java.util.concurrent.CountDownLatch;
import java.util.concurrent.CyclicBarrier;

public class ThreadExecutionOrder {

    private CountDownLatch countDownLatch = new CountDownLatch(2);
    private CountDownLatch countDownLatch1 = new CountDownLatch(1);
    private CyclicBarrier barrier;
    private final Object monitor = new Object();

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        new ThreadExecutionOrder().test();
    }

    public void test() {
        Runnable t1 = new Runnable() {

            @Override
            public void run() {
                System.out.print("A");
                countDownLatch1.countDown();
                countDownLatch.countDown();
                try {
                    barrier.await();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                } catch (BrokenBarrierException e) {
                    e.printStackTrace();
                }
            }

        };
        Runnable t2 = new Runnable() {

            @Override
            public void run() {
                try {
                    countDownLatch1.await();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                System.out.print("B");
                countDownLatch.countDown();
                try {
                    barrier.await();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                } catch (BrokenBarrierException e) {
                    e.printStackTrace();
                }
            }

        };
        Runnable t3 = new Runnable() {

            @Override
            public void run() {
                try {
                    countDownLatch.await();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                System.out.print("C");
                try {
                    barrier.await();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                } catch (BrokenBarrierException e) {
                    e.printStackTrace();
                }
            }

        };
        for(int i=0; i<3; i++) {
            barrier = new CyclicBarrier(3, new Runnable()  {
                @Override
                public void run() {
                    synchronized (monitor) {
                        countDownLatch = new CountDownLatch(2);
                        countDownLatch1 = new CountDownLatch(1);
                        monitor.notify();
                    }
                }

            });
            new Thread(t1).start();
            new Thread(t2).start();
            new Thread(t3).start();
            synchronized (monitor) {
                try {
                    monitor.wait();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }
    }

} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-03-18T21:31:41.923

```
public class ThreadOrderTest {

int status = 1;

public static void main(String[] args) {
    ThreadOrderTest threadOrderTest = new ThreadOrderTest();
    A a = new A(threadOrderTest);
    B b = new B(threadOrderTest);
    C c = new C(threadOrderTest);
    a.start();
    b.start();
    c.start();
}
}

class A extends Thread {

ThreadOrderTest threadOrderTest;

A(ThreadOrderTest threadOrderTest) {
    this.threadOrderTest = threadOrderTest;
}

@Override
public void run() {
    try {
        synchronized (threadOrderTest) {
            for (int i = 0; i < 10; i++) {
                while (threadOrderTest.status != 1) {
                    threadOrderTest.wait();
                }
                System.out.print("A ");
                threadOrderTest.status = 2;
                threadOrderTest.notifyAll();
            }
        }
    } catch (Exception e) {
        System.out.println("Exception 1 :" + e.getMessage());
    }
}
}

class B extends Thread {

ThreadOrderTest threadOrderTest;

B(ThreadOrderTest threadOrderTest) {
    this.threadOrderTest = threadOrderTest;
}

@Override
public void run() {
    try {
        synchronized (threadOrderTest) {
            for (int i = 0; i < 10; i++) {
                while (threadOrderTest.status != 2) {
                    threadOrderTest.wait();
                }
                System.out.print("B ");
                threadOrderTest.status = 3;
                threadOrderTest.notifyAll();
            }
        }
    } catch (Exception e) {
        System.out.println("Exception 2 :" + e.getMessage());
    }
}
}

class C extends Thread {

ThreadOrderTest threadOrderTest;

C(ThreadOrderTest threadOrderTest) {
    this.threadOrderTest = threadOrderTest;
}

@Override
public void run() {
    try {
        synchronized (threadOrderTest) {
            for (int i = 0; i < 10; i++) {
                while (threadOrderTest.status != 3) {
                    threadOrderTest.wait();
                }
                System.out.println("C ");
                threadOrderTest.status = 1;
                threadOrderTest.notifyAll();
            }
        }
    } catch (Exception e) {
        System.out.println("Exception 3 :" + e.getMessage());
    }
}
} 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-04-14T09:24:40.517

[执行服务](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#invokeAll%28java.util.Collection%29)

> 一个 Executor，它提供了管理终止的方法和可以生成 Future 以跟踪一个或多个异步任务的进度的方法。
> 
> 可以关闭 ExecutorService，这将导致它拒绝新任务。提供了两种不同的方法来关闭 ExecutorService。shutdown() 方法将允许先前提交的任务在终止之前执行，而 shutdownNow() 方法阻止等待的任务启动并尝试停止当前正在执行的任务。终止后，执行者没有正在执行的任务，没有等待执行的任务，也没有新的任务可以提交。应关闭未使用的 ExecutorService 以允许回收其资源。
> 
> 方法 submit 通过创建和返回可用于取消执行和/或等待完成的 Future 扩展了基本方法 Executor.execute(java.lang.Runnable)。方法 invokeAny 和 invokeAll 执行最常用的批量执行形式，执行一组任务，然后等待至少一个或全部完成。（类 ExecutorCompletionService 可用于编写这些方法的自定义变体。）
> 
> Executors 类为此包中提供的执行器服务提供工厂方法。

# e-commerce - 如何在不使用 CPanel 的情况下设置多商店 opencart？

> ID：15997485
> 
> 赞同：0
> 
> 时间：2013-04-14T09:17:18.277
> 
> 标签：e-commerce, opencart, online-store

我尝试在不使用 CPanel 的情况下设置 opencart（可以通过[这种方式](http://doc.opencart.com/display/opencart/Creating+a+multi-store)在 CPanel 中设置）。我已经在 < mydomain >.com 上运行了 opencart（我们称之为主商店）我所做的如下：

1.  创建了一个单独的子域，例如。shop2.<我的域名>.com,
2.  使 shop2 子域指向与 < mydomain >.com（主商店）相同的 ip
3.  为 shop2 子域创建了一个虚拟主机（apache），其文档根指向与现有主商店相同。
4.  在 opencart 中创建了一个新商店，并将商店 url 设置为 shop2.< mydomain >.com （无论有没有这一步都不会改变我下面描述的问题。

问题是 shop2.< mydomain >.com 现在与 < mydomain >.com 完全相同，例如，如果一个产品从现有的 opencart 中被禁用，那么它也从 shop2 中被禁用。

[在opencart 论坛](http://forum.opencart.com/viewtopic.php?f=20&t=81265)上提出了类似的问题，但没有提供答案。

我的环境是：Ubunbu，Apache。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:35:29.533

所以这个问题的标题不正确，因为您已经设置了一个多商店。而不是这个你应该问`How to disable a product on just one store within a multistore installation?`，不是吗？

问题很清楚，答案也很清楚 - 您不能通过启用/禁用产品/类别等来做到这一点。该`multistore`功能允许您只有**一个**数据库，而您可以设置产品（或类别或其他）在商店 1 上显示存储 X。

如果您禁用该产品，您将对所有商店禁用它。

**如果您希望产品仅在商店 2 而不在商店 1 显示，请在选项卡链接 -> 选项商店的产品详细信息表单中选中/取消选中相应的复选框。**例如，通过取消选中`Default`并选中，`Store 2`您将产品设置为仅在商店 2 中显示 -**但必须启用该产品**。类别、制造商等的方式相同。

# jquery - 如何修复快速单击时挂起的 jQuery 链接

> ID：15997494
> 
> 赞同：1
> 
> 时间：2013-04-14T09:17:59.893
> 
> 标签：jquery, mysql, wordpress, menu

我的问题是一个 jQuery 菜单，它访问一个 MySql DB 并且倾向于挂起，我相信，如果按钮被点击得太快。有没有办法在加载完成之前停用所有链接？还是另一种解决方案？

在 Wordpress 网站上，我有一个使用 jQuery 制作的自定义链接菜单，用于将信息从 MySQL 加载到主页区域。我昨天问了这个问题，经过更多研究后完全改变了代码，所以我在重新处理问题时删除了这个问题。（感谢 Mike Brant 在我的评论中提出的一个想法。）

菜单区域具有如下基本链接。（来自Menu.php）

```
<ul id="mainMenu">
    <li id="buttonStyle"><a href="M1" id="Left-Menu-Text">Link 1</a></li>
    <li id="buttonStyle"><a href="M2" id="Left-Menu-Text">Link 2</a></li>
</ul> 
```

信息的接受 div 包含在 index.php 中（链接略高于加载区域，以适应 Wordpress 栏中的滚动。）

```
<a href="menuLoadAnchor" name="anchor1"></a>
    /*some code*/
<div id="loadWindow"></div> 
```

菜单的 jQuery 如下。

```
function linkScroll(aid){
    var aTag = $("a[name='"+ aid +"']");
    $('html,body').animate({
        scrollTop: aTag.offset().top
    }, 'slow' );
}
$('ul#mainMenu li a').click(function() {
    var page = $(this).attr('href');
    linkScroll('anchor1');
    $('#loadWindow').html("<center><img src='images/loading.gif' /></center>");
    $('#loadWindow').load('./wp-content/themes/themeName/menuFolder/' + page + '.php');
    return false;
}); 
```

我不会有这样的问题，因为有人需要非常不耐烦才能发生这种情况。但是当它这样做时，它会留下一个打开的进程，我必须登录 SSH 才能杀死。有时我需要一次杀死很多人。非常感谢任何建议。先感谢您。

如果有帮助，我正在执行以下操作。Wordpress 3.5.1 jQuery 1.8.3 jQuery UI 1.9 php 5.4 MySql Ver 14.14 Distrib 5.5.30 我会创建一个 jFiddle 但数据库消除了该选项。

*对于那些可能会发现这一点并且可能遇到与我昨天发现的相同问题的*人最初我让每个链接从**一个**文件中提取一个 div。实际上，每次点击都会发送每个数据库查询。所以我一直挂着这个。将它们分成单独的文件，它们仅在单击时将自己的查询发送到数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T03:19:55.480

尝试如下绑定和解除绑定：

$("a").bind('click', false);

并取消绑定/重新启用：

$("a").unbind('click', false);

# apache - 通过apache虚拟主机访问java应用时不维护session变量

> ID：15997496
> 
> 赞同：1
> 
> 时间：2013-04-14T09:18:14.710
> 
> 标签：apache, tomcat

我在同一台机器上安装了一台 apache2 服务器和一台 tomcat 7 服务器。apache 服务器被使用并配置为启用虚拟主机，因为它应该为多个 java 网站提供服务器。但是，我们还需要为一些 tomcat 应用程序提供服务，因此我们需要配置 ajp 连接器。

一切顺利，我已经成功配置了多个服务于 tomcat 应用程序的 apache 虚拟主机，但我只有一个问题：

通过 apache 虚拟主机访问 java 应用程序时不维护会话变量。这在直接连接到 tomcat 服务器的 8080 端口时效果很好。

这是我的 httpd.con 条目：

```

`ServerAdmin webmaster@dummy-host.example.com
DocumentRoot C:\crazyNew
ServerName crazy.com.au
ServerAlias www.crazy.com.au
RewriteEngine on
RewriteRule   ^/(.*)$ /crazyNew/$1 [L,PT]
JkMount /crazyNew/* worker1
ErrorLog logs/crazy.com.au-error_log
CustomLog logs/crazy.com.au-access_log common` 

```

# javascript - How do I cycle through a set of images?

> ID：15997497
> 
> 赞同：4
> 
> 时间：2013-04-14T09:18:16.620
> 
> 标签：javascript

I'm trying to make a banner that cycles through 3 images using JavaScript.
Each image should be displayed for 10 seconds before changing.

I wrote some code but it is not working. It stays stuck on the first image. The Image does not change as I want it to.

Can you see anything in the code and point out my mistakes?

Code as follows:

```
<script type="text/javascript">
    function changeBanner(){
        var img = new array

        img[0] = document.images[0].src
        img[1] = document.images[1].src
        img[2] = document.images[2].src

        var currentimg = img[0]

        if(currentimg == img[0]) {
            currentimg = img[1]
        }

        if(currentimg == img[1]) {
            currentimg = img[2]
        }
    }
</script> 
```

HTML as follows:

```
<body onload="var start=setInterval('changeBanner()', 10000;">
    <div id="wrapper">
        <div>
            <img src="budda.JPG" width="900px" height="300px" />
        </div>
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T10:08:13.683

```
var index = 0;

function changeBanner() {
    [].forEach.call(document.images, function(v, i) {
        document.images[i].hidden = i !== index
    });
    index = (index + 1) % document.images.length;
}
window.onload = function() {
    setInterval(changeBanner, 1000)
}; 
```

[http://jsbin.com/emilef/2/edit](http://jsbin.com/emilef/2/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T11:14:59.080

您的代码有几个功能问题：

*   body标签的onload属性中的代码没有正确关闭
*   changeBanner 中的代码将始终执行所有 if 语句，永远不会随着图像循环前进

无论修复如何，您都可以使代码更简洁，从正文标记中删除内联脚本，并通过使用索引来跟踪集合中的当前图像来修复 if 语句问题。

假设您有像您一样的 HTML，其中 3 张图片均以`hidden`：

```
<body>
    <div id="wrapper">
        <div>
            <img src="http://placehold.it/100x150" width="300px" height="150px" hidden />
            <img src="http://placehold.it/200x250" width="300px" height="150px" hidden />
            <img src="http://placehold.it/300x350" width="300px" height="150px" hidden />
        </div>
    </div>
</body> 
```

您不需要`onload`使用`body`.

相反，您可以分配一个函数，该函数将`window.onload`在事件之后自动调用`load`，即在 DOM 准备好并加载所有图像之后。

最好将所有脚本代码放在一个单独的`.js`文件中，并且只在 HTML 中包含对它的引用。但是，为了简单起见，我确实与您当前的方法保持一致。

在该函数中，您可以设置变量，然后开始间隔，类似于：

```
<script type="text/javascript">
    var currentImageIndex = -1,
        maxImageIndex = 0,
        images = [],
        changeInterval = 1500;

    // prepares relevant variables to cycle throguh images
    var setUp = function() {
        images = document.images;
        maxImageIndex = images.length;
        currentImageIndex = 0;
    };

    // changes the banner currently being displayed
    var changeBanner = function() {
        var i;

        // either re-set the index to 0 if the max length was reached or increase the index by 1
        currentImageIndex = (currentImageIndex >= maxImageIndex - 1) ? 0 : currentImageIndex += 1;

        for (i = 0; i < maxImageIndex; i += 1) {
            images[i].hidden = (i !== currentImageIndex);
        }
    };

    // a function which is triggered following the `load` event
    window.onload = function() {
        setUp();

        images[currentImageIndex].hidden = false; // show the first banner image;

        setInterval(changeBanner, changeInterval); // following a delay, keep changing the banner image by the specified interval
    };
</script> 
```

* * *

[**演示**](http://jsfiddle.net/nqjy4/)- 修复逻辑问题并使用`windows.onload()`

* * *

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T09:29:36.050

```
function changeBanner(){
var img = new array

img[0] = document.images[0].src
img[1] = document.images[1].src
img[2] = document.images[2].src

var currentimg = img[0] 
```

现在`currentimg`是`img[0]`

```
if(currentimg == img[0]) { 
```

这将是真的 currentimg = img[1] }

现在`currentImg`有价值`img[1]`

```
if(currentimg == img[1]) { 
```

这也是真的

```
 currentimg = img[2]
} 
```

`currentImg`具有价值`img[2]`

}

现在让我们忽略`currentImg`

您需要 1) 理清逻辑 2) 将某个 DOM 对象设置为这个新值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T09:39:50.223

在控制台中检查一下；）

```
var imgs=document.images;
function changeBanner(){
    var firstImgSrc = imgs[0].src + "";
    for(var i=0;i<imgs.length-1;i++){
        imgs[i].src=imgs[i+1].src+"";
    }
    imgs[imgs.length-1].src=firstImgSrc; //replace last image src with first one
}
var interval = setInterval(changeBanner, 5000); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T09:40:26.390

您的`setInterval('changeBanner()', 10000;`代码中的 没有正确关闭，它在 10000 之后缺少“）”。它应该是：

```
setInterval('changeBanner()', 10000); 
```

此外，setInterval 函数只会在加载主体时调用。因此，只需在您的 JavaScript 文件中添加该函数并将其链接到 html。像这样：

```
<script type="text/javascript">
function changeBanner(){
    var img = new array

    img[0] = document.images[0].src
    img[1] = document.images[1].src
    img[2] = document.images[2].src

    var currentimg = img[0]

    if(currentimg == img[0]) {
        currentimg = img[1]
    }

    if(currentimg == img[1]) {
        currentimg = img[2]
    }
}

  setInterval('changeBanner()', 10000);
</script> 
```

# android - Android Bluetooth pairing different behavior

> ID：15997499
> 
> 赞同：0
> 
> 时间：2013-04-14T09:18:37.633
> 
> 标签：android, android-bluetooth, pairing

I have developed an app that prints receipts to a Bluetooth printer (Star Micronics).

When I execute my app on an Android tablet with 4.1 OS everything works.

When I execute my app on an Android tablet with 4.0 OS I have to re enter Bluetooth pairing password every time I want to print and the printer failed to connect although it is paired.

Is this a bug of 4.0 or I have to do something in my code?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T19:57:24.367

我也遇到了同样的问题！这是因为Android版本。将 Android 版本更新到 4.1 即可。您可以找到许多在线将 Android 版本从 4.0 更新到 4.1 的方法。

杰克

# css - CSS Round uppr corners of table row

> ID：15997502
> 
> 赞同：0
> 
> 时间：2013-04-14T09:19:05.897
> 
> 标签：css, rounded-corners

I am setting the background color of table rows to give them a visual presence. I've been stymied in doing something I thought would be pretty simple which is rounding the corners of a row. I've created a class that works on a whole table but can't get it to work on the row. (Can't put it on whole table as table has some stuff in it that should not be rounded.) Have tried putting the class in the table row, the table cell inside it and span all to no avail. Would appreciate any suggestions.

css

```
<head>
    <style>
        .rounded { 
            -moz-border-radius: 15px; 
            border-radius: 15px; 
        }
    </style>
</head> 
```

html

```
<table>
    <tr><td colspan=3 >Some stuff at top of table where background is white</td></tr>
    <tr style="background-color:silver" class="rounded">
        <td colspan=3 class="rounded"><span class="rounded">Text where background is shaded where I want background shaded</span></td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T09:36:56.883

这个问题的答案可能会帮助你（看起来不可能在表格行上实现圆角......至少不是在所有浏览器中。）：

[显示上的 CSS3 边框半径：table-row 元素](https://stackoverflow.com/questions/5214686/css3-border-radius-on-displaytable-row-element)

*注意：这个问题是关于将 div 显示为行，但它等同于使用行。*

# netbeans - Specify relative file path

> ID：15997504
> 
> 赞同：0
> 
> 时间：2013-04-14T09:19:23.057
> 
> 标签：netbeans, jvm, java, filepath

I'm attempting to connect to [this](http://lyle.smu.edu/~tspell/jaws/) API. As part of the instructions, I must add a reference, like so:

```
System.setProperty("wordnet.database.dir", "C:\\WordNet-3.0\\dict\\"); 
```

That's all well and good, however I would like the path to be relative. The directory is inside my project in the "Resources" folder, as shown below in NetBeans:

![enter image description here](https://i.stack.imgur.com/0T7ra.jpg)

How can the path be modified?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:29:20.313

尝试这个：

```
System.setProperty("wordnet.database.dir", "Resources\\WordNet\\dict\\"); 
```

# tree - 值表示树

> ID：15997508
> 
> 赞同：0
> 
> 时间：2013-04-14T09:19:55.090
> 
> 标签：tree, wolfram-mathematica

**主要问题**

有没有一种有效的方法来输出类似于输出的值树`TreeForm`？

就像是

```
TreeForm[1[2, 3[4[1, 2], 5[3, 4], 6[1, 2, 3, 4, 5[6]]]]] 
```

**我为什么要这个？**

我的目的是分析我的实验课的输出。为此，我需要“结构化”我的数据来进行计算，使用分区等。我在[这里](https://stackoverflow.com/questions/15952918/table-tree-of-values)有一个例子。我希望能够获得创建的“结构”的图形输出。

然而，想象一下，我需要为这棵树添加一个包含一些功能的关卡。好像不太实用。使用数字作为头部对我来说有点令人不安。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T04:18:31.927

TreeForm 将 Mathematica 表达式表示为树（每个 mathematica 表达式都可以表示为树）。但是，在您的示例中，不同的顶点具有相同的标签，因此会生成树中不允许的循环。因此，任何将这种数据结构转换为另一种表示的“花哨”mathematica 代码都无法生成树的数据结构。至于树遍历，ReplaceAll、Replace 等实际上是带有模式的 DFS，所以也许您可以使用它来处理您的数据，但恕我直言，修改表示在这里至关重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T21:34:42.233

在查看了您引用的示例后，我建议将您的信息排列在 2D（至少在最外层）数组中。通过适当的注意，这可以使您的计算表达式变得简单，并且您可以使用 TreePlot 从中生成一棵树，使用索引信息和先验定义对节点和边进行编号。

# jquery - jQuery自动完成：没有结果时禁用提交

> ID：15997511
> 
> 赞同：0
> 
> 时间：2013-04-14T09:20:06.250
> 
> 标签：jquery, autocomplete, count, submit

当 jQuery 自动完成没有找到结果时，我想禁用我的提交。我现在工作一半，我计算我的结果很好。

唯一的问题是当我有结果并且我提交时，结果会弹回 0，所以我无法提交。我想在提交时记住自动完成计数值。

我计算我的结果：

```
$('#stock_input').autocomplete({

        source:'autocomplete.php',
        autoFocus: true,
        minLength:1,
    open: function(event,ui){
            count = $(this).autocomplete("widget").find( "li" ).length;
            $('#count').text(count);
    },
    close: function(event,ui){
            count = 0;
            $('#count').text(count);
    }
}); 
```

允许提交设置：

```
 var allowSubmit = true;
        $("#updatestock_form").submit(function(e){
            if(count === 0){ allowSubmit = false; alert(count); } 
            else { allowSubmit = true; alert(count); }
            if (!allowSubmit) return false;

        //rest of submit code
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:26:27.850

您的代码的问题：

```
close: function(event,ui){
            count = 0;
            $('#count').text(count);
    } 
```

`this will make count = 0`每次关闭自动完成

当您提交表单时，计数变量将始终为 0，这使得`allowSubmit = false`

```
 $("#updatestock_form").submit(function(e){
            if(count === 0){ allowSubmit = false; alert(count); } 
            else { allowSubmit = true; alert(count); }
            if (!allowSubmit) return false;

        //rest of submit code
        }); 
```

您可以在提交时检查这一点

```
$("#updatestock_form").submit(function(e){
            var count = $('#stock_input').autocomplete("widget").find( "li" ).length;
            if(count === 0){ allowSubmit = false; alert(count); } 
            else { allowSubmit = true; alert(count); }
            if (!allowSubmit) return false;

        //rest of submit code
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T10:04:46.787

我用下面的代码做到了：

```
$('#stock_input').autocomplete({
        source:'autocomplete.php',
        autoFocus: true,
        minLength:1,
        response: function(event, ui) {
            if (ui.content.length === 0) {
                count_result = 0; //no results
            } else {
                count_result = 1;
            }
        }
}); 
```

和：

```
$("#updatestock_form").submit(function(e){
    if(count_result === 0){ allowSubmit = false; }
        else { allowSubmit = true; }
        if (!allowSubmit) return false;
}); 
```

# html - How to increase width of child element beyond parent element

> ID：15997515
> 
> 赞同：1
> 
> 时间：2013-04-14T09:20:21.197
> 
> 标签：html, css, width, parent-child

I am trying to get something like [this blog](https://www.mybloggertricks.com/) which has:

[![](https://i.stack.imgur.com/ThTfw.jpg)](https://i.stack.imgur.com/ThTfw.jpg)

But what I get is

[![](https://i.stack.imgur.com/HELhv.jpg)](https://i.stack.imgur.com/HELhv.jpg)

(I am not trying to copy him, obviously I will change the image, etc.)

The borders are getting cut, because the width of the parent container (sidebar) is less than the width of the image. I google a lot, but all I found is `overflow:visible`, which somehow is still not working. Here is the [output](https://ilovetrollstestbeta.blogspot.com/).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:57:22.817

**根据您的问题要求**：您可以负面应用边距值，例如`margin-left: 15px;`并给出`position: relative;`，您可能还需要定义您的样式`float: left;`。

**但或者，**你可以定义你的父元素大于你的内容，例如，你的内容是 200 像素宽，你的左右图像是 15 像素 + 15 像素 = 30 像素，那么你的父元素应该是 230 像素宽，现在通过为所有三个图像赋予左侧浮动值来排列元素，现在将内容宽度定义为 200 像素并将其居中`margin: 0 auto;`以完成您的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T09:24:46.503

尝试为所需元素的边距分配一个负值（例如，`{margin-left: -20px }`）。

不要忘记从父元素中删除溢出属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T09:25:31.263

只需两个简单的步骤：

1.  `overflow: hidden;`从中删除`.sidebar .widget`。
2.  两边加负边距，`.sidebar h2`弥补宽度差。

# ios - iOS NavigationCotroller pushViewController when init with UITabBarViewController

> ID：15997519
> 
> 赞同：1
> 
> 时间：2013-04-14T09:20:56.463
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller

My main viewController A has a `UITabbarViewController` which has 5 tabs.

*   On viewcontroller A, I set `[self.navigationController setNavigationBarHidden:YES]` for some purpose of my app.

*   On viewController at tab 2, I have a table view, I want when I select a row of table, I will present a viewController B (with also has navigationBar and tabbar)

    *   I tried `[self.navigationController pushViewCOntroller:B animated:YES]` but it's not workking. I think because of setting hidden for navigationBar
    *   I also tried `[self presentModalViewController:B]`, it worked but on viewcontroller B, it showed full screen (navigationBar and tabbar disappeard)

Can anyone help me? Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:55:02.733

怎么样

```
 tabBarController
                                    |
                                    |
                                    |-->Item1ViewController
                                    |
                                    |-->NavController->Item2ViewController->push->VCB
                                    |
                                    |-->Item3ViewController
                                    | 
```

只需确保 tabBarController 尚未包含在 NavigationController 中，这会导致混淆。

您可以选择显示/隐藏 Item2ViewController 和 VCB 上的导航栏，方法是设置它们各自的属性。

如果使用情节提要，您可以在使用菜单项“嵌入...”设置 tabBarController 后将 Item2ViewController 嵌入 NavContoller。

如果在代码中你可以做这样的事情：

```
 UIViewController* vc1 = [[UIViewController alloc] init];
    UIViewController* vc2 = [[UIViewController alloc] init];
    UIViewController* vc3 = [[UIViewController alloc] init];
    UIViewController* vc4 = [[UIViewController alloc] init];
    UIViewController* vc5 = [[UIViewController alloc] init];
    UINavigationController* navC = 
           [[UINavigationController alloc] initWithRootViewController:vc2];
    NSArray* viewControllers  = @[vc1,navC,vc3,vc4,vc5];
    UITabBarController* tabC = [[UITabBarController alloc] init];
    tabC.viewControllers = viewControllers;
    [self presentViewController:tabC animated:YES completion:nil];

        //  don't do this:
    //  [self.view addSubview:tabC.view]; 
```

（“展示”位是有争议的，它实际上取决于您的应用程序结构的其余部分）。

# ios - UIPageViewController - 如何捕获接触点？

> ID：15997521
> 
> 赞同：0
> 
> 时间：2013-04-14T09:20:57.753
> 
> 标签：ios, uipageviewcontroller

这很简单。我有一个类似 iBooks 的应用程序，它有一个 UIPageViewController 作为子视图控制器。当页面卷曲开始时，我如何捕获用户的触摸点？我希望在卷曲可见时不断跟踪手指位置。

# c++ - 提升正则表达式链接：找不到库

> ID：15997522
> 
> 赞同：7
> 
> 时间：2013-04-14T09:20:58.367
> 
> 标签：c++, regex, boost, linker

我在链接 Boost Regex 时遇到问题，但我可以运行（编译/链接）其他 Boost 程序。

我意识到这是“有据可查的”，但我找不到答案，因为各种帖子使用不同版本的 Boost、不同的编译器、使用 bjam（我使用过 b2），似乎暗示了我已经尝试过的内容等。

# 设置

*   Visual Studio 10（我正在使用 C++）

*   增强版：1.53.0

*   初始安装：我遵循[了如何在 Visual Studio 2010 中使用 Boost](https://stackoverflow.com/questions/2629421/how-to-use-boost-in-visual-studio-2010)（我一直到第二点 4）。我还没有下载 ICU 对 Regex 的支持，因为我认为只有在需要 Unicode 支持时才需要这样做？

*   我通过更新“包含目录”并添加 C:.......\Boost\boost_1_53_0 在项目属性中包含了相关库

*   我已经通过添加“C:.....\Boost\boost_1_53_0\stage\lib”在项目属性库目录中包含了相关目录，以便它知道从哪里链接库（至少我是这么认为的这确实）。

# 问题

我可以使用（例如）Boost Random Numbers 编译、链接和运行程序。

如果我试图通过说添加正则表达式功能：

```
boost::algorithm::split_regex( result, str, regex( "[0-9]+|->" ) ) 
```

我收到以下形式的链接错误。

```
1>Bibtex.obj : error LNK2001: unresolved external symbol "private: class boost::basic_regex<char,struct boost::regex_traits<char,class boost::w32_regex_traits<char> > > & __thiscall boost::basic_regex<char,struct boost::regex_traits<char,class boost::w32_regex_traits<char> > >::do_assign(char const *,char const *,unsigned int)" (?do_assign@?$basic_regex@DU?$regex_traits@DV?$w32_regex_traits@D@boost@@@boost@@@boost@@AAEAAV12@PBD0I@Z)
1>Bibtex.obj : error LNK2001: unresolved external symbol "public: bool __thiscall boost::re_detail::perl_matcher<class std::_String_const_iterator<char,struct std::char_traits<char>,class std::allocator<char> >,class std::allocator<struct boost::sub_match<class std::_String_const_iterator<char,struct std::char_traits<char>,class std::allocator<char> > > >,struct boost::regex_traits<char,class boost::w32_regex_traits<char> > >::find(void)" (?find@?$perl_matcher@V?$_String_const_iterator@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@V?$allocator@U?$sub_match@V?$_String_const_iterator@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@boost@@@2@U?$regex_traits@DV?$w32_regex_traits@D@boost@@@boost@@@re_detail@boost@@QAE_NXZ)
1>Bibtex.obj : error LNK2001: unresolved external symbol "private: void __thiscall boost::re_detail::perl_matcher<class std::_String_const_iterator<char,struct std::char_traits<char>,class std::allocator<char> >,class std::allocator<struct boost::sub_match<class std::_String_const_iterator<char,struct std::char_traits<char>,class std::allocator<char> > > >,struct boost::regex_traits<char,class boost::w32_regex_traits<char> > >::construct_init(class boost::basic_regex<char,struct boost::regex_traits<char,class boost::w32_regex_traits<char> > > const &,enum boost::regex_constants::_match_flags)" (?construct_init@?$perl_matcher@V?$_String_const_iterator@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@V?$allocator@U?$sub_match@V?$_String_const_iterator@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@boost@@@2@U?$regex_traits@DV?$w32_regex_traits@D@boost@@@boost@@@re_detail@boost@@AAEXABV?$basic_regex@DU?$regex_traits@DV?$w32_regex_traits@D@boost@@@boost@@@3@W4_match_flags@regex_constants@3@@Z)
1>C:\Users\kzzgrk\Dropbox\Projects\classes\Bibtex\BibtexFramework\Debug\BibtexFramework.exe : fatal error LNK1120: 3 unresolved externals 
```

我不知道如何解决这个问题，因为我似乎已经尝试了一切。我能想到的唯一可能性是我需要使用`b2`命令行程序构建 boost 库，但我不知道该推荐应该是什么（正如我在上面所说的那样，很多引用都是对 bjam 的）。

任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-03T08:30:59.683

我发现了一个可能的原因，这可以帮助一些人。基本上，我已经为**64-bit**构建了 Boost，但默认情况下我创建的应用程序是**32-bit**。这适用于大多数库，但不适用于 Regex 库，因此出现错误。将项目切换到 64 位，现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-22T10:06:38.210

我也遇到过同样的问题，已经修复了。这种错误主要是你在XX.h文件中声明的函数，但没有在XX.cpp文件中定义（或者XX.cpp文件没用）

我的步骤： 1.download boost

2.运行boost目录下的命令（需要先生成bjam.exe，参数根据你的电脑而定） bjam --with-regex --toolset=msvc-8.0 --stagedir="E:\download \boost_vc_80" 链接=静态运行时链接=静态运行时链接=共享线程=多调试版本

3.将libboost_regex-vc80-mt-1_55.lib复制到properties->link->input

再次构建您的项目，修复！

chnhu@telenav.cn

# php - 使用php excel导出到excel到最直接的工作表

> ID：15997526
> 
> 赞同：2
> 
> 时间：2013-04-14T09:21:49.947
> 
> 标签：php, codeigniter, phpexcel

我想将数据导出到 Excel 表。我有一个工作簿 x，工作簿是有几个由 php excel 创建的工作表。我想以这样的格式导出数据，如果第一张有数据，那么 php excel 需要自己创建第二张和后续的表格，而无需我指定表格索引 $objReader = PHPExcel_IOFactory::createReader('Excel2007');

```
$objPHPExcel = $objReader->load("workbooks/" . $labref . "/" . $labref . ".xlsx");
        $objPHPExcel->getActiveSheet();
        $objWorkSheet = $objPHPExcel->createSheet();
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel,'Excel2007');
  $objWriter->save("workbooks/" . $labref . "/" . $labref . ".xlsx"); 
```

在上述情况下，导出时，工作簿被php excel删除，因此phpexcel无法创建和写入创建的工作表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:56:42.783

我很难理解你的问题。

PHPExcel 永远不会删除工作簿文件：PHPExcel 中没有可以删除任何文件的代码。如果脚本正在删除文件，则 PHPExcel 不会删除该文件。

在上面的代码片段中，您正在加载一个工作簿；向该工作簿添加新工作表；然后保存该工作簿，覆盖原来的。您的工作簿/文件夹中仍应有一个名为 .xlsx 的工作簿，但有一个额外的工作表。

你能澄清一下到底发生了什么吗？

# php - 带有确认对话框的自定义产品删除

> ID：15997527
> 
> 赞同：1
> 
> 时间：2013-04-14T09:22:13.167
> 
> 标签：php, jquery, opencart, confirm

我已经更改了一些默认的 opencart 管理产品列表过滤功能，如下所示：如果我需要从列表中删除产品，我将替换复选框，单击每个产品删除图标，截图附在此处...

![在此处输入图像描述](https://i.stack.imgur.com/hXrsP.jpg)

它工作正常，但是如何使用对话框**确认删除设置 jquery 函数？**，就像我们默认的opencart产品删除确认...当点击删除按钮时询问确认删除？带有确认和取消按钮对话框......有什么想法吗？

我的产品删除按钮与 html 中的列表：

```
<?php if ($products) { ?>
<?php foreach ($products as $result) { ?>    
<div class="product">      
    <a href="<?php echo $result['delete']; ?>"><img src="delete.png" title="<?php echo $button_delete; ?>" /></a>
    <img src="<?php echo $result['image']; ?>" alt="<?php echo $result['name']; ?>"/>
    <a href="<?php echo $result['view']; ?>"><?php echo $result['name']; ?></a>         
</div>
<?php } ?>
<div class="pagination"></div>
<?php } else { ?>
<div class="empty"><?php echo $text_empty; ?></div>
<?php } ?> 
```

从上面的代码删除按钮：

```
<a href="<?php echo $result['delete']; ?>"><img src="delete.png" title="<?php echo $button_delete; ?>" /></a> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:41:25.377

**非 jQuery**

的HTML：

```
<a href="#" onclick='confirm_delete("<?php echo $result['delete']; ?>", "<?php echo $result['name']; ?>"); return false;'>
  <img src="delete.png" title="<?php echo $button_delete; ?>" />
</a> 
```

Javascript：

```
<script>
function confirm_delete(link_to_delete, product_name) {
  var msg=confirm("Are you sure you want to delete " + product_name + " ?");
  if (msg==true)
  {
    window.location.href = link_to_delete;
  }
}
</script> 
```

**jQuery**

的HTML：

```
<a class="delete_button" href="<?php echo $result['delete']; ?>">
  <img src="delete.png" title="<?php echo $button_delete; ?>" />
</a> 
```

javascript (jQuery):

```
<script>
jQuery(".delete_button").on("click", function(e) {
  e.preventDefault();
  var clicked = jQuery(this);
  var clicked_url = clicked.attr("href");
  var product_name = clicked.siblings("img").attr("alt");
  var msg=confirm("Are you sure you want to delete " + product_name + " ?");
  if (msg==true)
  {
    window.location.href = clicked_url;
  }
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T09:44:57.857

你可以利用 jQuery 使用一点：-

```
$('div.product a img[src="delete.png"]').on('click', function(event){
    if( ! confirm('Delete?')) {
        event.preventDefault();
        return false;
    }
    return true;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-25T18:23:05.577

下面是我在一行项目上的做法，每个项目都称为“报价”。这是模板代码：

```
<a href="<?php echo $offer['delete']; ?>" data-toggle="tooltip" title="<?php echo $button_delete; ?>" class="btn btn-primary" onclick="confirm('<?php echo $text_confirm; ?>') ? $('#form-discount_chooser').submit() : false;"><i class="fa fa-trash-o"></i></a> 
```

在调用模板之前，您的控制器将设置`$offer['delete']`如下：

```
 $data['offers'][] = array(
           ... 
            'delete' => $this->url->link('extension/module/discount_chooser/delete', 'token=' . $this->session->data['token'] . '&offer=' . $discount['id'] . $url, true)
        ); 
```

然后在控制器的 delete() 方法中，一定要处理好这是一个单项，而不是一个或多个复选框的事实：

```
// Handle onesies
if (!isset($this->request->post['selected'])) {
   if (isset($this->request->get['offer'])) {
     $this->request->post['selected'] = array($this->request->get['offer']);
   }
} 
```

# javascript - Cannot load mobile application in sencha because of 404 error but file exists

> ID：15997528
> 
> 赞同：0
> 
> 时间：2013-04-14T09:22:18.803
> 
> 标签：javascript, sencha-touch

I am beginner in mobile application development. In order to start in sencha, I followed the simple tutorial [http://jbkflex.wordpress.com/2012/06/18/creating-a-simple-list-in-sencha-touch-2-0/](http://jbkflex.wordpress.com/2012/06/18/creating-a-simple-list-in-sencha-touch-2-0/)

I setup an IIS folder and add `IIS AppPool\DefaultAppPool` user with full rights over created web application.

Well, I finished with writing the code (model, store and view) but when I tried to load html page, I have the following error in Chrome:

```
GET http://localhost/test/data/contact.json?_dc=1365970529423&page=1&start=0&limit=25 404 (Not Found) 
```

But I have that json file: [http://i.imgur.com/ANUS79C.png](http://i.imgur.com/ANUS79C.png)

Why the file is not loading ? Why just 404 ?

The full complete javascript code:

```
Ext.application({
    name: 'Sencha',
    launch: function() {
        //creating our model
        Ext.define('Contacts',{
            extend:'Ext.data.Model',
            config: {
                fields:[
                    {name:'firstName' ,type:'string'},
                    {name:'lastName', type:'string'} ,
                    {name:'contactno', type:'string'},
                    {name:'address', type:'string'}
                ]
            }
        });
        //creating our store
        var contactStore = Ext.create('Ext.data.Store', {
            model:'Contacts',
            proxy:{
                type:'ajax',
                url:'data/contact.json',
                reader:'json'
            },
            autoLoad:true
        });
        //console.log("Store: ", moviesStore.data);
        //item template
         var itemTemplate = new Ext.XTemplate(
            '<tpl for=".">',
                '{firstName} {lastName}',
            '</tpl>'
        );

        //creating our List
        var contactList = Ext.create('Ext.dataview.List',{
            title: 'Contact List',
            store: contactStore,
            itemTpl: itemTemplate
        });
        //adding event to List
        contactList.on("itemtap",function(dataView,index,target,record,e){
           var first_name = record.data.firstName;
           var last_name = record.data.lastName;
           var contact = record.data.contactno;
           var address = record.data.address;
           Ext.Msg.alert("Contact: " + contact);
           //console.log(record.data.firstName);
        });

        //adding List to Main UI - Tab Panel
        Ext.create('Ext.tab.Panel',{
            fullscreen:true,
            items:[contactList]
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:41:59.700

由于您的应用程序无法找到数据文件，因此会出现此错误。

您尚未指定端口号。请指定端口号，例如 localhost:8080/test/data/contact.json 然后尝试。

# java - Two dimensional array expandable in all directions

> ID：15997529
> 
> 赞同：3
> 
> 时间：2013-04-14T09:22:22.773
> 
> 标签：java, arrays, multidimensional-array, game-physics

Gday everybody,

I'm just trying to program the so called "life game". Forgot who invented it, but I find it pretty interesting. Please DO NOT post any links related to programming the game, as it would destroy my motivation ;)

The essential part of it is the playground. I need a two dimensional array, which is expandable in all directions.

E.g. I've got an array with 10*10 Fields in the beginning. I need to be able to add new fields in the direction of array[-1][-1] as well as in the direction of array[11][11] at the same time. I even need to be able to add a new item to field array[-1][10] or array[10][-10]. I need to be able to access the array into all possible 2D directions.

By the same time of writing this post, I just got an idea: What about having four arrays pointing towards all directions NORTH, EAST, SOUTH and WEST? Just having all arrays put next to each other, virtually pointing in the specified direction. Just like the example below. All Arrays put together form my playground. Would it be efficient, or are there simpler ways?

```
[][][] | [][][]
[][][] | [][][]
[][][] | [][][]
_______|_______
[][][] | [][][]
[][][] | [][][]
[][][] | [][][] 
```

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T09:41:27.150

Assuming you are using primitive arrays, expanding the matrix with a fixed number of cells could look like this:

```
boolean[][] gameBoard = new boolean[3][3];

public boolean[][] expandMatrixBy(boolean[][] matrix, int number) {
  int oldSize = matrix.length;
  int newSize = oldSize + 2 * number;
  boolean[][] result = new boolean[newSize][newSize];

  // Assume new cells should be dead, i.e. false..
  for (int row = number; row < oldSize + number; row++) {
    for (int col = number; col < oldSize + number; col++) {
      // ..copy only the existing cells into new locations.
      result[row][col] = matrix[row - number][col - number];
    }
  }
  return result;
}

// Calling this on a 3x3 matrix will produce 5x5 matrix, expanded by 1 on each side.
gameBoard = expandMatrixBy(gameBoard, 1); 
```

And it's **John Conway's Game of Life** :-)

**OPTION:** This solution can be customized to enable expansion on selected sides with something like this:

```
enum Side { Left, Right, Top, Bottom };

public boolean[][] expandMatrixBy(boolean[][] matrix, int number, Set<Side> sides) {
  int oldSize = matrix.length;
  int newSize = oldSize + number * sides.size();
  boolean[][] result = new boolean[newSize][newSize];

  for (Side side : sides) {
    switch(side) {
      case Left:
        // Add number of columns on the left.

      case Right:
        // Add "number" of columns on the right.
    }
  }
  return result;
}

Set<Side> expandOnTheseSides = EnumSet.of(Side.Left, Side.Top);
gameBoard = expandMatrixBy(gameBoard, 1, expandOnTheseSides); 
```

Good luck.

# xml - XML error with aws-mturk-clt-1.3.1 - cannot find element declaration

> ID：15997531
> 
> 赞同：1
> 
> 时间：2013-04-14T09:22:26.260
> 
> 标签：xml, amazon-web-services, mechanicalturk

I've been using the aws-mturk-clt toolset for awhile. I recently came back to my project, which had been working, but now when I attempt to submit HITs using the `loadHITs.sh` command I receive this error:

> [-1,-1] cvc-elt.1: Cannot find the declaration of element 'ExternalQuestion'

As far as I can tell, nothing has changed in my project code and directory structure from when it used to work. The XML schema is referenced in external_hit.question:

```
<?xml version="1.0"?>
<!-- Note the inclusion of the $urls variable which is defined as a field 
in the input file.  Apache Velocity is the template engine that is used to 
perform the merging of variables into template files.  You can learn more 
about Velocity's capabilities at http://velocity.apache.org. -->
<ExternalQuestion xmlns="https://mechanicalturk.amazonaws.com/AWSMechanicalTurkDataSchemas/2006-07-14/ExternalQuestion.xsd">
    <ExternalURL>http://XXX.XXX.XXX.XXX/webpage.jsp</ExternalURL>
    <FrameHeight>600</FrameHeight>
</ExternalQuestion> 
```

I checked the schema url, and the schema still exists and appears to be properly defined.

Let me know any further information required. Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:27:54.860

问题是我使用 https 来引用架构，因为之前执行了全局搜索替换。当我恢复到 http 时，问题消失了：

```
<ExternalQuestion xmlns="http://mechanicalturk.amazonaws.com/AWSMechanicalTurkDataSchemas/2006-07-14/ExternalQuestion.xsd"> 
```

# ios - XCode 4.5 命令行构建错误

> ID：15997535
> 
> 赞同：1
> 
> 时间：2013-04-14T09:22:53.253
> 
> 标签：ios, xcode, xcodebuild

我正在使用 Xcode 4.5 并使用终端命令行“xcodebuild”来构建我的应用程序。但我收到以下错误：

```
The following build commands failed:
    CompileC "build/Sample_google.build/Release-iphoneos/Tech Time.build/Objects-normal/armv7/AppDelegate.o" Sample_google/Classes/AppDelegate.m normal armv7 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    CompileC "build/Sample_google.build/Release-iphoneos/Tech Time.build/Objects-normal/armv7/MainViewController.o" Sample_google/Classes/MainViewController.m normal armv7 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    CompileC "build/Sample_google.build/Release-iphoneos/Tech Time.build/Objects-normal/armv7/ChildBrowserCommand.o" Sample_google/Plugins/ChildBrowserCommand.m normal armv7 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    CompileC "build/Sample_google.build/Release-iphoneos/Tech Time.build/Objects-normal/armv7s/MainViewController.o" Sample_google/Classes/MainViewController.m normal armv7s objective-c com.apple.compilers.llvm.clang.1_0.compiler
    CompileC "build/Sample_google.build/Release-iphoneos/Tech Time.build/Objects-normal/armv7s/AppDelegate.o" Sample_google/Classes/AppDelegate.m normal armv7s objective-c com.apple.compilers.llvm.clang.1_0.compiler
(5 failures) 
```

请为此错误提出解决方案。长期以来一直在发生。

谢谢， 安基特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-24T06:31:31.313

我有同样的问题。我通过将方案配置添加到 xcodebuild 命令来解决它。请参考下面的示例代码。

```
xcodebuild -scheme "QuickView" -project "$PATH_PROJECT" -configuration Release 
```

谢谢

Chamath Jeevan 技术主管 Gmail：chamathjeevan@gmail.com Skype：chamathjeevan Linkin：[http](http://lk.linkedin.com/in/chamathjeevan) ://lk.linkedin.com/in/chamathjeevan 手机：+94 777 998 445

# postscript - How do you keep the `roll` operator straight?

> ID：15997536
> 
> 赞同：13
> 
> 时间：2013-04-14T09:23:11.723
> 
> 标签：postscript

In postscript, the `roll` operator is very general and difficult to visualize. How do you make sure you're rolling in the right direction?

I want to get a solid handle on `roll` because I want to be able to transform functions using variables

```
/f { % x y z
    /z exch def
    /y exch def
    /x exch def
    x dup mul
    y dup mul
    z dup mul add add % x^2+y^2+z^2
} def 
```

into functions using stack manipulations, more like

```
/f { % x y z
    3 1 roll dup mul % y z x^2
    3 1 roll dup mul % z x^2 y^2
    3 1 roll dup mul % x^2 y^2 z^2
    add add % x^2+y^2+z^2
} def 
```

or

```
/f { % x y z
    3 { 3 1 roll dup mul } repeat
    2 { add } repeat      % x^2+y^2+z^2
} bind def 
```

These should both execute faster by having fewer name-lookups (hashtable search).

With `roll` I always have to test it out; and I usually get it wrong on the first try! I'm okay with exch, though

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-14T09:23:11.723

很长一段时间我都难以滚动。我现在记得使用这些方法，它们都是等效的：

# 押韵（-ish）

> 新泽西**滚**

*   *正 j，滚开*

    ```
    `7 8 9  3 1 roll
    % 9 7 8`
    ```

`*   *否定的，取回它（或“negateeve，然后取回”）*

    ```
    `% 9 7 8
    3 -1 roll
    % 7 8 9`
    ```` 

 ``* * *

# 堆栈（东西）

也许更好的思考方式是物理堆栈（例如书籍），因此堆栈的顶部实际上是“在顶部”。

然后正面滚动上升：

```
   对于 j 次
     拿起 n 本书
     将顶部的放在底部（将子堆栈“向上”移动）
     把它们放回去
```

并且负滚动下降：

```
   对于 j 次
     拿起 n 本书
     将底部的放在顶部（将子堆栈“向下”移动）
     把它们放回去
```

* * *

# 侧身

但我通常将堆栈从侧面描绘出来，就像对象在文件中看起来是一系列文字一样。所以我认为正滚动是把前 j 个东西藏在第 n 个东西后面；和从第 n 件事开始的第 j 件事的负面滚动。给予和接受。

离开。

```
n j roll

__ j > 0 __     move top j elements to the bottom of n

 n            TOS
  -------------|
 |       j     |
 |        -----|
 |       |     |
 V       V     |

 a b c d e f g h

^       |       |
|       |-------|
^           |
 -<-<-<-<-<-
   move 
```

然后回来。

```
__ j < 0 __   move j elements from the bottom of n to the top

 n            TOS
  -------------|
 |     j       |
 |-----        |
 |     |       |
 V     V       |

 a b c d e f g h

|       |       ^
|-------|       |
   |           ^
    ->->->->->- 
       move 
```

* * *

# 皮棉辊

还有一种方法是把它画在一边，然后在上面放一个粘轮（可能是一个棉绒滚筒）

```
(a) (b) (c) (d) (e) 5 3 卷

           _______
          / \
          | 3 |
          | / | \ |
          \_______/
 (a) (b) (c) (d) (e)
```

然后正向滚动就像弧形一样逆时针旋转并旋转。

```
       _______ (e)
      // \
      | 3 --| (d)
      | \ |
      \_______/ （C）
 (一) (二)

   (e)__(d)__(c)
     /\ | /\
     | 3 |
     | |
     \_______/
   (一) (二)

   （C）_______
     /\ \
 (d) |-- 3 |
     |/ |
     \_______/
  (e) (a) (b)

    _______
   / \
   | 3 |
   | / | \ |
   \_______/
 (c) (d) (e) (a) (b)
```

并且负滚动像 arcn 和负旋转一样顺时针旋转。

```
    _______
   / \
   | 3 |
   | / | \ |
   \_______/
 (a) (b) (c) (d) (e)

   （一个）_______
     /\ \
 (b) |-- 3 |
     |/ |
     \_______/
  (c) (d) (e)

   (c)__(b)__(a)
     /\ | /\
     | 3 |
     | |
     \_______/
   (d) (e)

       _______ （C）
      // \
      | 3 --| (二)
      | \ |
      \_______/ （一个）
 (d) (e)
           _______
          / \
          | 3 |
          | / | \ |
          \_______/
 (d) (e) (a) (b) (c)
```

* * *

# 消除负面

不难看出负滚动是完全没有必要的，因为如果 j<0，它可以被 nj 代替。例如。

```
3 -1 roll  % roll bottom 1 element from 3 to the top
3 2 roll   % roll top 2 elements behind the 3rd 
```

是相同的。

```
16 -4 roll  % roll bottom 4 elements from 16 to the top
16 12 roll  % roll top 12 elements behind the 16th 
```

是相同的。

* * *

这导致了最终的、最终的简化视图（尽管上面的每一个都可以工作）。

# 滚动只是一个大*交换*

您实际上只是将顶部*j*元素与下面的*nj元素**交换*。

 **假设您在堆栈上有这个混乱（其中 $TOS$ 标记堆栈的顶部），并且想要正确排序：

```
g  h  i  j  k  l  m  n  o  p  q  r  s  t  u  v  w  x  y  z  a  b  c  d  e  f $TOS$ 
```

向上（向下）计数*n*和*j*。

```
g  h  i  j  k  l  m  n  o  p  q  r  s  t  u  v  w  x  y  z  a  b  c  d  e  f
26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9  8  7  6  5  4  3  2  1
|                                                         | j = 6 .  .  .  .
| n = 26 .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .

> 26 6 roll   pstack

 a  b  c  d  e  f  g  h  i  j  k  l  m  n  o  p  q  r  s  t  u  v  w  x  y  z 
```

*j*的负值只是相对于*n 个*元素中最深的元素定位分割线（它从下面开始计数）。

```
t  u  v  w  x  y  z  a  b  c  d  e  f  g  h  i  j  k  l  m  n  o  p  q  r  s
26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9  8  7  6  5  4  3  2  1
.  .  .  .   j = -7 |                                                      |
.  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  . n = 26 |

> 26 -7 roll  pstack

 a  b  c  d  e  f  g  h  i  j  k  l  m  n  o  p  q  r  s  t  u  v  w  x  y  z 
```

* * *

这是一个方便的函数，它提供了一个更类似于**大交换**视图的滚动界面。

```
% r0..rN  s0..sM  N  M   swap   s0..sM  r0..rN
% a gentler interface to the power of roll
/swap {
    exch 1 index add exch
    roll
} def
0 1 2 3 /a /b /c 4 3 swap pstack 
```

输出：

```
GPL Ghostscript 8.62 (2008-02-29)
Copyright (C) 2008 Artifex Software, Inc.  All rights reserved.
This software comes with NO WARRANTY: see the file PUBLIC for details.
3
2
1
0
/c
/b
/a
GS<7>GS<7> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-21T15:18:40.483

简单的说：如果你让一些圆形物体滚动，它与你的距离可能会比以前更大，除非你使用手以外的其他东西（例如：一根魔杖，......）来使物体滚动。

`5 1 roll`意味着`1`堆栈顶部的对象随后将与堆栈顶部的距离更大。

```
10 11 12 13 14 15 16 17 18 19 20 5 1 roll 
```

是一样的

```
10 11 12 13 14 15 20 16 17 18 19 
```

你看 20 变深了，最后五个元素改变了位置。

`5`in`5 1 roll`表示只有堆栈中的前五个对象可以全部改变位置。

`-1`和`4`是相同的模数`5`，因此很容易记住在应用此解决方案之前必须将负数修改为正数。**``

# c - explanation for the code snippet in C

> ID：15997538
> 
> 赞同：-4
> 
> 时间：2013-04-14T09:23:29.993
> 
> 标签：c, int, operators, assignment-operator, postfix-operator

I came across this code snippet somewhere but cannot understand how does it works:

```
#include"stdio.h"

int main() {
  int j = 1;
  + j += + j += + j++;
  printf("%d",j);
  return 0;
} 
```

Output:

```
6 
```

Please explain the working of this code snippet.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:34:10.103

您的程序将无法编译，因为您没有提供`lvalue`for 分配。

GCC 显示以下错误消息，

```
lvalue required as left operand of assignment 
```

在您的程序中，您使用了简写赋值运算符，

例如考虑代码，

```
a+=b; 
```

方法，

```
a=a+b; 
```

但是你使用它们的方式是不正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T09:40:57.447

如果我以其他方式编写相同的片段来解释它，我希望您会理解

请注意我的观点 + 变量不过是一个正变量，而 - 变量是负数

现在看看你的片段

```
#include"stdio.h"

int main() {
int j = 1;
+ j += + j++;// i.e "j+=j++;" which is "j=j+j; j= j+1;"
//now j = j+j "1+1" "j=2" and post increment then j=j+1 "2+1" "j=3"
+j+=+j;//which is j+=j or j=j+j
//hence j=3+3 i.e 6
printf("%d",j);//j=6
return 0;
} 
```

# node.js - 如何在 Handlebars 中填充 bootstrap typeahead？

> ID：15997539
> 
> 赞同：0
> 
> 时间：2013-04-14T09:23:45.180
> 
> 标签：node.js, twitter-bootstrap, meteor, handlebars.js

我需要在 Handlebars 模板（环境：Node.js 和 Meteor）中从 Twitter Bootstrap 填充一个预先输入字段。

这是模板位：

```
<input type="text" data-provide="typeahead" data-source={{{names}}}> 
```

这是Javascript位：

```
Template.myTemplate.names = function () {
    var temp = MyCollection.find({}).map(function (x) { return x.name; });
    var ret = "[\"" + temp.join("\", \"") + "\"]";
    return ret;
}; 
```

问题是生成的 Javascript 不正确，例如，

```
<input type="text" data-provide="typeahead" data-source="["John", " "Albert"]> 
```

并且不起作用。我认为我对此进行了过度设计，并且必须有更好的方法来生成/渲染 Handlebars 模板...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T04:03:04.687

我在尝试自己回答类似问题时偶然发现了这一点。

双引号是必需的，因为它需要 JSON。

我在您的示例中`ret`使用了这样的字符串格式，而不是字符串格式：`JSON.stringify`

```
var ret = JSON.stringify(temp); 
```

# java - 用Java递归分解，处理StackOverflow

> ID：15997543
> 
> 赞同：2
> 
> 时间：2013-04-14T09:23:54.310
> 
> 标签：java, recursion, stack-overflow

我需要编写一个方法，将数字递归分解为 1234567890，我当前的应用程序在抛出 StackOverflowError 之前仅适用于小数字。我知道我的问题是递归调用太多，但我不知道如何减少调用次数。

它需要是递归的。

我认为解决方案与我的算法背后的数学有关。我已经查看了不同的迭代解决方案，但我似乎无法用更少的调用来递归地执行它。编码：

```
public static boolean isPrime(int input, int i) {
    if (i <= 2) {
        return true;
    }
    if (input % i != 0) {
        return isPrime(input, i-1);
    } else {
        factors(input, i);
        return false;
    }
}
public static void factors(int input, int i) {
    if (i <= 1) {
        System.out.printf(" %d", 1);
    } else {
        if (input % i == 0) {
            System.out.printf(" %d", i);
        }
        factors(input, i - 1);
    }
} 
```

并由以下人员开始：

```
System.out.println("What integer would you like to factor?");
    num1 = scan.nextInt();
    if(isPrime(num1, num1 - 1)){
        System.out.println("Input is a prime number");
    } else {
        System.out.println(" factors\nInput isn't a prime number.");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T09:33:27.727

将您的因子方法更改为非递归（如果不需要递归）

```
 public static void factors(int input, int i) {
     for(int j = i; j >= 1; j--) {
         if (input % j == 0)
             System.out.println(j);
     } 
} 
```

**编辑：**像下面这样的东西是解决这个问题的递归方法。

```
public void isPrime(int num1)
{
int count=countFactors(num1);
if(count==0)
System.out.println("No is prime");
}

public int countFactors(int num,int i)
{

if(i>num/2)return 0;
if(num%i==0)
{
System.out.println(i);
return 1+countFactors(num,i+1);
}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T10:22:10.703

我认为它需要递归的原因是因为这是一个家庭作业问题。因此，我不会告诉你怎么做，而是告诉你你的数学有什么问题。您的算法看起来部分正确，除了（a）您忘记将“n”除以您找到的每个因子，以及（b）您正在寻找从大数向下而不是从小数向上的因子。最好开始和 2 并计数到 sqrt(n) 虽然这不会解决堆栈溢出问题。

您需要在循环中查找因子并保留递归的使用（如果您真的需要使用它）在除以素因子后分解剩余的数字。因为你不想通过一个 6 位数的质数，然后需要 100 万级堆栈来证明它没有因数。即这需要在一个简单的循环而不是递归中：

返回是素数（输入，i-1）；

...这可以是递归的：

因素（输入，我）；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T09:27:35.017

增加你的java中的堆栈大小。您可以搜索如何增加堆栈大小

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T10:34:22.807

您似乎用于素数检查的算法是[*试验除法算法*](http://en.wikipedia.org/wiki/Trial_division)。

还有许多[其他方法，但是，按照这个策略，有一个命题指出你只需要检查](http://en.wikipedia.org/wiki/Primality_test)*n*的平方根，其中*n*是你的`input`。此外，您的谓词没有适当地处理负整数（返回`true`）。

因此，在第一种方法中，您的算法将是：

```
public static boolean isPrime(int n) {
    if (n < 2) { return false; }
    return helper_isPrime(n, 2, (int) Math.sqrt(n));
} 
```

在哪里：

```
private static boolean helper_isPrime(int n, int i, int max) {
    if (i > max) { return true; }
    if (n % i == 0) { return false; }
    return helper_isPrime(n, i+1, max);
} 
```

以两种方法分离可以隔离`n < 2`. 请注意，`n`将保持不变，因此测试只需要在流程开始时执行一次。

此外，保理被抛在后面。在我看来，应该从外面问，像这样：

```
System.out.println("What integer would you like to factor?");
num1 = scan.nextInt();
if(isPrime(num1)){
    System.out.println("Input is a prime number");
} else {
    System.out.println("Input isn't a prime number.");
    int[] fac = factor(n);
    System.out.println("Factors: " + fac.toString());
} 
```

`factor`您最喜欢的因子算法在哪里。**因式分解算法可能会发现它是使用素数执行的最坏情况，但是，由于已经进行了测试，并且由于仅在数字不是**素数时才调用该算法，因此不会发生这种情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T10:38:25.707

您可以使用尾调用优化（Java 不适合您）

```
public static void factors(int input, int i) {
    while(i > 1) {
        if (input % i == 0) {
            System.out.printf(" %d", i);
        }
        i = i - 1;
    }
    System.out.printf(" %d", 1);
} 
```

当然，除非您不再进行递归。

# iphone - 适用于 iOS 的高质量文本转语音 SDK

> ID：15997544
> 
> 赞同：7
> 
> 时间：2013-04-14T09:24:08.600
> 
> 标签：iphone, ios, ios6, text-to-speech

我一直在寻找适用于 iOS 的高质量 TTS 库。我找到的最好的是 OpenEars，它是免费的，非常推荐，但声音太金属了，无法满足我的需求。

有没有人可以为 iOS 推荐一个非常优质的 TTS 库（甚至不是免费的）？听起来像 Siri 或更像人类的东西……

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T18:08:36.413

这里有一些：

[适用于 iOS 的Flite](https://bitbucket.org/sfoster/iphone-tts/)端口。

[阿卡佩拉](http://www.acapela-for-iphone.com)

[人声套件](https://github.com/KingOfBrian/VocalKit)

[伊沃娜](http://developer.ivona.com)

这些都有其优点和缺点，语音质量和语音模式各不相同。以及它们实施的难易程度。但希望其中之一会是你喜欢的。

# iphone - iOS 构建未见过图像的提要

> ID：15997545
> 
> 赞同：2
> 
> 时间：2013-04-14T09:24:11.853
> 
> 标签：iphone, ios, objective-c, uitableview, nsfetchedresultscontroller

我的应用需要一个看不见的图像的提要。我打算用`UITableViewController`结合来做到这一点`NSFetchedResultsController`。

当用户访问此提要时，他将看到以前从未见过的图像。当他滚动浏览表格时，他滚动浏览的图像将被视为已被看到。

自然地，我想到了将 fetchedResultsController 的请求设置为查找带有 predicate 的图像`"seen = 0"`。我的 UITableViewController`didEndDisplayingCell`将简单地将项目标记为已见。

但是，这并不理想，因为`NSFetchedResultsController`会告诉 tableView 删除行，因为它们不再存在于获取的结果控制器中。

**我希望我的用户能够向后滚动并仍然看到这些图像。这些图像应该只会在用户下次使用该应用程序时消失。**

有人可以推荐一个聪明的方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:56:48.343

我建议你做什么：

1 - 创建一个 NSMutableArray ，您可以在其中添加一些单元格/图片的 id

2 - 在 UITableViewController 的 viewDidLoad 中添加以下内容

```
[[NSNotificationCenter defaultCenter] addObserver: self
                                         selector: @selector(handleEnteredBackground:) 
                                             name: UIApplicationDidEnterBackgroundNotification
                                           object: nil]; 
```

3 - 实现方法`handleEnteredBackground:`，所以当你的应用程序进入后台状态时，你枚举你的数组并将所有与 NSFetchedResultsController 对象匹配的对象标记为 seen = 1。

# javascript - DOM click() 不适用于此按钮

> ID：15997550
> 
> 赞同：3
> 
> 时间：2013-04-14T09:24:23.470
> 
> 标签：javascript, html, click, userscripts

当我使用方法`click()`单击按钮时，提交失败。
但是，当我使用鼠标单击该网页上的按钮时，（提交表单相同）它可以工作。

HTML 文件：

```
<button xmlns="http://www.w3.org/1999/xhtml" class="ui-button button1"       type="submit" id="create">
    <span>
        <span>Create</span>
    </span>
</button> 
```

我的用户脚本文件：

```
document.getElementById("create").click(); 
```

如何使用 HTML DOM click() 单击按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:36:29.187

也许而不是单击按钮。您可以在 javascript 中将表单提交为

```
document.getElementByName('form1').submit(); 
```

因为它满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T09:25:48.867

将调用包装在匿名自执行结构中，如下所示：

```
(function(){
    document.getElementById("create").click();
})(); 
```

这将模拟`click`加载 javascript 的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T09:55:42.290

点击方法并不总是有效。尝试发送与[此答案](https://stackoverflow.com/a/8192413/331508)`click`类似的事件：

```
var targBtn     = document.querySelector ("#create");
var clickEvent  = document.createEvent ('MouseEvents');
clickEvent.initEvent ('click', true, true);
targBtn.dispatchEvent (clickEvent); 
```

* * *

但也要注意，按钮可能根本无法在点击时操作。请参阅[“在 AJAX 驱动的站点上选择和激活正确的控件”](https://stackoverflow.com/q/15048223/331508)。

按钮可以对`mousedown`、`mouseup`或某些事件组合进行操作。使用该问题中的技术来激活控件。 **如果您无法使其工作，请链接到目标页面。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T10:04:42.263

如果您对按钮的价值很灵活，那么请执行以下操作：

```
<button xmlns="http://www.w3.org/1999/xhtml" class="ui-button button1" value="submit" type="submit" id="create">

document.getButtonByValue('submit').click(); 
```

这工作得很好。

[jsfiddle链接](http://jsfiddle.net/zTLGB/14/#run)

# c - 读取较大的 .bmp 文件时出现分段错误

> ID：15997552
> 
> 赞同：0
> 
> 时间：2013-04-14T09:24:37.203
> 
> 标签：c, memory-management, segmentation-fault

编译时出现分段错误。

当我尝试在 main() 中填充表数组时，我认为与第一个 for 循环中的内存分配有关吗？

如果我调用一个较小的文件而不是使用“更大”的 table.bmp 文件，它会起作用。

我不懂为什么？（我对此很陌生）

任何帮助将非常感激。

提前致谢

```
#include <stdio.h>
#include <string.h>
#include <malloc.h>

unsigned char *read_bmp(char *fname,int* _w, int* _h)
{
    unsigned char head[54];
    FILE *f = fopen(fname,"rb");

    // BMP header is 54 bytes
    fread(head, 1, 54, f);

int w = head[18] + ( ((int)head[19]) << 8) + ( ((int)head[20]) << 16) + ( ((int)head[21]) << 24);
int h = head[22] + ( ((int)head[23]) << 8) + ( ((int)head[24]) << 16) + ( ((int)head[25]) << 24);

// lines are aligned on 4-byte boundary
int lineSize = (w / 8 + (w / 8) % 4);
int fileSize = lineSize * h;

unsigned char *img = malloc(w * h), *data = malloc(fileSize);

// skip the header
fseek(f,54,SEEK_SET);

// skip palette - two rgb quads, 8 bytes
fseek(f, 8, SEEK_CUR);

// read data
fread(data,1,fileSize,f);

// decode bits
int i, j, k, rev_j;
for(j = 0, rev_j = h - 1; j < h ; j++, rev_j--) {
    for(i = 0 ; i < w / 8; i++) {
        int fpos = j * lineSize + i, pos = rev_j * w + i * 8;
        for(k = 0 ; k < 8 ; k++)
            img[pos + (7 - k)] = (data[fpos] >> k ) & 1;
    }`enter code here`
}

free(data);
*_w = w; *_h = h;
return img;
}

int main()
{

int w, h, i, j, x, y, b=0, butpos=0;

//Get array data

unsigned char* imgtable = read_bmp("table.bmp", &w, &h);
int table[w][h];

printf("w=%i \n", w);
printf("h=%i \n", h);

//make table array

 for(j = 0 ; j < h ; j++)
{

    for(i = 0 ; i < w ; i++)
        table[j][i] = imgtable[j * w + i] ? 0 : 1;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:23:14.823

您正在尝试在堆栈上分配图像数据。当图像太大时，这会导致堆栈溢出。这段代码是问题所在：

```
int main()
{

    int w, h, i, j, x, y, b=0, butpos=0;

    //Get array data

    unsigned char* imgtable = read_bmp("table.bmp", &w, &h);
    int table[w][h];  // <-- HERE
    ... 
```

这是使用 C99 的一项称为*可变长度数组*`w`(VLA) 的功能，其中在堆栈上分配了一个非常量大小的数组（在这种情况下，一个二维`h`数组，其中`w`和`h`直到运行时才知道）。

在您的堆栈跟踪中提到该函数`_alloca`应该已经提示您这一点 - 该[`alloca(3)`](http://linux.die.net/man/3/alloca)函数在堆栈上分配动态数量的内存。而且由于您`alloc()`自己没有明确调用任何地方，因此它必须来自 VLA 的使用。

正如您所提到的，修复是在堆上分配图像数据，而不是在堆栈上：

```
data = malloc(h * w * sizeof(*data));
table = malloc(h * sizeof(*table));
for (i = 0; i < h; i++)
{
    table[i] = &data[i * w];
}

...

free(table);
free(data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:18:51.380

如果有人遇到类似的问题，那似乎是内存分配的问题。

以下解决方案对我有用；

```
unsigned char* img = read_table("table.bmp", &w, &h); 
int *data;
int **table;   

data = malloc(h * w * sizeof(*data));
table = malloc(h * sizeof(*table));
for (i = 0; i < h; ++i)
{
    table[i] = &data[i * w];
} 
```

# css - CSS 3D 转换在 Chrome 26 (Ubuntu 12.04) 上不起作用

> ID：15997558
> 
> 赞同：2
> 
> 时间：2013-04-14T09:24:59.693
> 
> 标签：css, google-chrome, ubuntu, chromium, css-transforms

在**谷歌浏览器（26.0.1410.63）**上，当我试图打开这个[http://www.paulrhayes.com/experiments/cube-3d/](http://www.paulrhayes.com/experiments/cube-3d/)
它说

```
哦，你的浏览器不支持 3D CSS 转换。

```

我很惊讶，然后在该网站上打开了 google chrome 控制台，`Modernizr.csstransforms3d`它返回了`false`！

以前有人遇到过这个问题吗？不过，当我在 Windows 上切换到 chrome 时它工作正常，**Chromium（25.0.1364.160）**也没有运气。我需要在 chrome 中启用任何设置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T09:52:29.610

它在我的 Chrome 浏览器中运行良好。尝试在这个问题中使用解决方案：

[CSS 3D 变换在 Chrome 16 中随机工作](https://stackoverflow.com/questions/8627707/css-3d-transforms-works-at-random-in-chrome-16)

# java - 嵌入式 Jetty 和 Jax-rs xml 配置

> ID：15997560
> 
> 赞同：1
> 
> 时间：2013-04-14T09:25:28.137
> 
> 标签：java, spring, rest, jax-rs, embedded-jetty

嘿伙计们，我正在尝试使用 Embedded-jetty 和 jax-rs 配置和运行 Restful 服务，我找到了本[教程](http://java.dzone.com/articles/going-restnoxml-embedding)，它运行良好，但是我的要求之一是通过 applicationContext.xml 文件中的 spring xml 尽可能多地进行配置。

我想在 xml 中做的部分是 AppConfig.java 类

```
 @Configuration
public class AppConfig { 
    @Bean( destroyMethod = "shutdown" )
    public SpringBus cxf() {
        return new SpringBus();
    }

    @Bean
    public Server jaxRsServer() {
        JAXRSServerFactoryBean factory = RuntimeDelegate.getInstance().createEndpoint( jaxRsApiApplication(), JAXRSServerFactoryBean.class );
        factory.setServiceBeans( Arrays.< Object >asList( peopleRestService() ) );
        factory.setAddress( '/' + factory.getAddress() );
        factory.setProviders( Arrays.< Object >asList( jsonProvider() ) );
        return factory.create();
    }

    @Bean 
    public JaxRsApiApplication jaxRsApiApplication() {
        return new JaxRsApiApplication();
    }

    @Bean 
    public StatsRestService peopleRestService() {
        return new StatsRestService();
    }

    @Bean 
    public StatsService peopleService() {
        return new StatsService();
    }

    @Bean
    public JacksonJsonProvider jsonProvider() {
        return new JacksonJsonProvider();
    }
} 
```

以及在哪里使用

```
context.setInitParameter( "contextClass", AnnotationConfigWebApplicationContext.class.getName() );
context.setInitParameter( "contextConfigLocation", AppConfig.class.getName() ); 
```

不幸的是，我在网上找不到任何关于如何在 XML 中执行此操作的不错的帖子，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:13:18.583

如果您想通过 XML 配置 Spring，那么您需要将`AppConfig`类中的所有内容移入`${project}/src/applicationContext.xml`并引用它，如下所示：

```
context.setInitParameter("contextConfigLocation", "classpath:applicationContext.xml"); 
```

和一个工作[的例子](https://github.com/gcase/spring-data-rest-datatable-example/blob/master/src/main/resources/META-INF/spring/applicationContext.xml)`applicationContext.xml`。您应该查看 Spring Framework 的网站以获取 API 参考。但是您可以从本[教程](http://www.springbyexample.org/examples/intro-to-ioc-creating-a-spring-application.html)开始。

# java - 你能用Java实例化一个接口吗

> ID：15997567
> 
> 赞同：8
> 
> 时间：2013-04-14T09:26:16.530
> 
> 标签：java, class, interface, instance

你能用Java实例化一个接口吗？我知道快速回答是“不”。但是有些东西我不太理解。

这里发生了什么？

[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)是一个公共接口。然而，我们没有像我在书中读到的那样使用这个接口，我们没有创建一个类并实现 SharedPreferences。相反，我们像这样使用这个 API：

```
SharedPreferences pref = Context.getSharedPreferences("some value", 0); 
```

那么这段代码中到底发生了什么？

我认为它就像[getSharedPreferences()](https://developer.android.com/reference/android/content/Context.html#getSharedPreferences(java.lang.String,%20int))正在创建一个`SharedPreferences`我们可以使用和操作的对象。

但是`SharedPreferences`是一个接口......我被告知你必须实现接口而不是创建它们的对象。这在Java中是什么？

当我查看 Java API 时，我看到一个定义为公共接口的类。我如何知道何时实现该接口或何时从中创建此类对象？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T09:35:38.880

你永远不能在java中实例化一个接口。但是，您可以通过接口的类型来引用实现接口的对象。

所以发生的事情是`getSharedPreferences`返回一个实现该接口的对象。返回对象的类型并不重要。重要的是它实现了该接口的所有方法，因此它可以用作`SharedPreferences`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T09:32:01.897

`SharedPreferences`是一个参考，但你没有创建一个`SharedPreferences`对象。相反，您正在创建一个属于该类型的对象；即，该类型的实现。例如，查看以下参考资料，您可以在其中使用接口作为实例的参考类型，该实例实际上是参考类型接口的实现。[http://docs.oracle.com/javase/tutorial/java/IandI/interfaceAsType.html](http://docs.oracle.com/javase/tutorial/java/IandI/interfaceAsType.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-14T09:29:43.417

```
 SharedPreferences pref = Context.getSharedPreferences("some value", 0); 
```

在这段代码中，对象的类型是 SharedPreferences 但实例是实现 SharedPreferences 接口的类这是 OOP 的基本概念

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-14T09:42:24.960

> 然而，我们没有像我在书中读到的那样使用这个接口，我们没有创建一个类并实现 SharedPreferences。

*您*无需创建实现此接口的类，因为有人已经为您创建了一个。您通过它的接口使用这个类，甚至不知道类名。*这就是接口的用途*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T09:30:36.647

`SharedPreferences`是一个在 中实现的接口`Context`。您在这里看到的是一个向接口抽象的示例：通过将`pref`变量定义为接口，您可以更轻松地更改代码（您当前的类现在与该类松散耦合，`Context`而不是直接链接到它）。

返回的对象`Context.getSharedPreferences`将是类型`SharedPreferences`。

# sass - 如何在 sass/scss 中使用 @if 条件 && 条件

> ID：15997568
> 
> 赞同：1
> 
> 时间：2013-04-14T09:26:24.217
> 
> 标签：sass

我需要使用这个循环/条件：

```
@for $i from 1 to 6 {
    @if $i == 1 {
        /* ..... */           
    }@else if $i > 1 && $i < 6 {
        /* ..... */ 
    }@else if $i == 6{
        /* ..... */
    }
 } 
```

但是“&&”在 Sass/Scss 中不起作用……知道吗？

然后我尝试了这个：

```
 @for $i from 1 to 6 {
    @if $i == 1 {
        /* ..... */           
    }@else if $i > 1 {
        /* ..... */ 
    }@else if $i > 5{
        /* ..... */
    }
 } 
```

但是最后一个“@else if”不起作用！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T11:35:06.113

您想`and`在 Sass 中使用关键字而不是`&&`（而`or`不是`||`）：

```
@for $i from 1 to 6 {
    @if $i == 1 {
        /* ..... */           
    }@else if $i > 1 and $i < 6 {
        /* ..... */ 
    }@else if $i == 6{
        /* ..... */
    }
} 
```

不过，您的代码会像这样更有意义：

```
/* ..... */ // first          
@for $i from 2 through 5 {
    /* ..... */ 
 }
/* ..... */ // sixth 
```

`X to Y`注意循环和循环之间的区别`X through Y`： *通过*包含 Y，*排除*Y。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T09:26:24.217

有用 ：

```
 @for $i from 1 to 6 {
   @if $i == 1 {
       /* ..... */           
   }@else if $i < 5 {
       /* ..... */ 
   }@else {
       /* ..... */
   }
 } 
```

# c# - 当 IDENTITY_INSERT 设置为 OFF 时，无法在表“IncomeTable”中插入标识列的显式值

> ID：15997572
> 
> 赞同：3
> 
> 时间：2013-04-14T09:26:29.430
> 
> 标签：c#, sql-server, linq-to-sql, runtime-error

我将表中主键的状态设置为 IDENTITY 。我在 VS 中插入了另一个表字段，但是当我运行这个程序时，程序有错误。为什么？我的问题是什么？

我表中的 ID 字段设置为 Identity。

运行时错误是：

```
Cannot insert explicit value for identity column in table 'IncomeTable' when IDENTITY_INSERT is set to OFF. 
```

在VS中：

```
private void button1_Click(object sender, EventArgs e)
{
    IncomeTable income = new IncomeTable();
    income.amount_income = amount;
    income.comment_income = comment;
    income.date_income = date;
    context.IncomeTables.InsertOnSubmit(income);
    context.SubmitChanges();
} 
```

我搜索但我无法解决这个问题。干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T09:37:28.117

你可以试试这个：

1.  在视觉设计器中打开您的表格
2.  单击您的列 - 属性
3.  放`Auto Generated Value = True`
4.  放`Auto Sync = True`
5.  检查该列的数据类型，如果它是`Int NOT NULL IDENTITY`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T10:09:41.717

这些列之一：

```
income.amount_income = amount;
income.comment_income = comment;
income.date_income = date; 
```

是数据库中的标识列。检查您的表定义并将其删除。

# android - 资源文件夹在android中自动复制

> ID：15997573
> 
> 赞同：0
> 
> 时间：2013-04-14T09:26:57.877
> 
> 标签：android, resources, r.java-file, generated

我刚刚在我的 android 项目中添加了一个新的 xml 文件并开始收到错误“R 无法解析为变量”。当我用谷歌搜索它以及堆栈溢出时，有很多问题和答案。当我清理项目时，会自动生成一个与我的资源文件夹（'res'）同名的新空文件夹。

我也发现我的 xml 文件中没有错误。我还发现生成的java文件夹是空的。对于 eclipse 中的所有项目，我都遇到了同样的错误。

可能是什么问题呢？

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" />

</LinearLayout> 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:20:16.357

我使用的图像文件的名称包含不允许的字符。我只是重命名了图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T09:31:44.223

`R cannot be resolved to a variable`当您的 xml 资源、布局文件或 Manifest 文件出现问题时出现。尝试将您的 xml 文件一一添加到这个新生成的 res 文件夹中（以找出导致问题的原因）并尝试是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T09:34:42.790

如果您想要一个明确的答案，您需要提供更多详细信息，至少是您的 XML 文件的代码。此错误大部分时间来自格式错误或不正确的 XML 文件。还要检查字符串、可绘制对象或您在 XML 文件中调用的任何内容是否在项目资源中正确声明。

# java - 实现版本化存储库

> ID：15997577
> 
> 赞同：0
> 
> 时间：2013-04-14T09:27:03.010
> 
> 标签：java, repository

我有一个奇怪且可能很复杂的问题，可以通过多种方式回答。我正在开发一个使用 XML 文件存储课程数据的自学程序；这些课程可以由任何人创建，但总体思路是将它们存储在任何人都可以访问的存储库中；但是，我不确定是否推出我自己的存储库，或者是否有一些我可以适应的东西。

我喜欢能够跟踪对文件所做的更改以及由谁更改的想法。话虽这么说，我觉得我可能在这里过头了。任何人都可以推荐有关制作存储库或我可以重用的现有代码的教程吗？

# php - 代码点火器与我的 [az] 路线不匹配

> ID：15997578
> 
> 赞同：0
> 
> 时间：2013-04-14T09:27:10.860
> 
> 标签：php, codeigniter

我有这个显示产品列表的 url，它由一个名为 category_listing 的控制器管理：

```
http://localhost:8888/shop/mens/trainers/ 
```

我已经使用 uri 段 4 向此页面添加了分页，因此 url 最终看起来像这样：

```
http://localhost:8888/shop/mens/trainers/2 
```

我还希望有一条路线，允许用户通过访问此网址来查看产品：

```
http://localhost:8888/shop/mens/trainers/a-trainer-product-here 
```

这由名为 product_listing 的控制器管理。

所以我创建了一条路线：

```
$route['shop/(:any)/(:any)/[a-z]'] = 'product/product_listing/$1/$2/$3'; 
```

我希望这可以让我匹配所有产品网址，同时忽略其中带有分页索引的网址。不幸的是，它似乎不起作用。当我访问 url 中包含产品的链接时，页面（应该使用 product_listing 控制器）仍在尝试调用 category_listing 控制器。

有任何想法吗？我想知道 URL 的产品名称部分（a-trainer-product-here）中的连字符是否会导致匹配的 [az] 部分出现问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T09:45:41.347

您正在使用的正则表达式只能匹配从 a 到 z 的字母，并且它只匹配一次，它不会匹配“-”所以而不是：

```
 $route['shop/(:any)/(:any)/[a-z]'] 
```

你可以试试：

```
 $route['shop/(:any)/(:any)/([a-z-]*)'] 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T09:45:49.987

`[a-z]`only 只匹配一个字符。您可能想要`+`为一个或多个或`*`零或多个添加修饰符。您的模式还表明您也想捕获最后一段（您`$3`在替换中拥有），并且您的示例 slug 中包含`-`s，因此纯`[a-z]`文本只会匹配它前面的“a”。

结合所有这些，我想你会想写：

```
$route['shop/(:any)/(:any)/([-a-z]*)'] = 'product/product_listing/$1/$2/$3'; 
```

这将匹配零个或多个长度的 slug，将它们捕获用于 in`$3`并允许`-`s。我也会考虑在`(:any)`那里只使用三分之一，这取决于你如何创建这些蛞蝓。

# jquery - 使用 CSS 和 jQuery 淡入淡出

> ID：15997581
> 
> 赞同：0
> 
> 时间：2013-04-14T09:27:47.643
> 
> 标签：jquery, html, css, fadein, fadeout

这是我用来制作 2 个引号同时淡入和淡出的完整 HTML 代码。它适用于 jfiddle，但不适用于我的网页。谁能告诉我怎么了？

这是 jfiddle：[这里](http://jsfiddle.net/jfriend00/n4mKw/)

这是HTML代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Untitled Document</title>
    <style>
    .quotes {display: none;}​
    </style>
    </head>

    <body>
    <h2 class="quotes">first quote</h2>
    <h2 class="quotes">second quote</h2>​

    <script>
    (function() {

        var quotes = $(".quotes");
        var quoteIndex = -1;

        function showNextQuote() {
            ++quoteIndex;
            quotes.eq(quoteIndex % quotes.length)
                .fadeIn(2000)
                .delay(2000)
                .fadeOut(2000, showNextQuote);
        }

        showNextQuote();

    })();​
    </script>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T09:29:10.833

添加：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

在您的头部或身体标签中。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<style>
.quotes {display: none;}​
</style>
</head>

<body>
<h2 class="quotes">first quote</h2>
<h2 class="quotes">second quote</h2>​

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
(function() {

    var quotes = $(".quotes");
    var quoteIndex = -1;

    function showNextQuote() {
        ++quoteIndex;
        quotes.eq(quoteIndex % quotes.length)
            .fadeIn(2000)
            .delay(2000)
            .fadeOut(2000, showNextQuote);
    }

    showNextQuote();

})();
</script>
</body>
</html> 
```

# django - 在 Django 中动态包含来自子应用程序的模板元素

> ID：15997593
> 
> 赞同：1
> 
> 时间：2013-04-14T09:29:24.563
> 
> 标签：django, dynamic, include

主应用程序包含分配给它的视图和模板dashboard.html。主应用可以包含不同数量的子应用（有自己的视图和模板），dashboard.html中应该动态填写内容

在添加新的子应用程序时，我想在每次不更改dashboard.html 或主视图的情况下实现这一点。

### 应用结构：

```
MAIN_app/
--templates/
----dashboard.html
--views.py

--SUB_app1/
----templates/
------template_app1.html
----views.py

--SUB_app2/
----templates/
------template_app2.html
----views.py

#dashboard.html
<h1>DASHBOARD</h1>

{% template_app1.html (with context) %}

{% template_app2.html (with context) %}

{% and so on... %} 
```

每个子应用程序都有自己的模板，上下文通过自己的视图传递。

在我看来，主视图功能应该在子应用程序中搜索视图，并将所有这些视图包含在模板中。

有没有办法做到这一点？

# plone - 如何注册仅在功能测试中可用的视图

> ID：15997599
> 
> 赞同：2
> 
> 时间：2013-04-14T09:30:08.007
> 
> 标签：plone

我正在为一个框架式 Plone 插件创建功能测试，该插件通过视图（BrowserViews）与其他插件交互。

如何注册一个仅在功能测试中可用的视图以用于测试目的？我想模拟集成点，看看它是否能提供良好的视图查找和调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:53:07.700

我用以下方法做到了这一点：

```
def setUp(self):
        self.app = self.layer['app']
        self.portal = self.layer['portal']

        # Register view directly by pushing it to zope.component multi-adapter registry

        zope.component.provideAdapter(
            # Our class
            factory=TestingRedirectHandler,
            # (context, request) layers for multiadapter lookup
            # We provide None as layers are not used
            adapts=(None, None),
            # All views are registered as IBrowserView interface
            provides=zope.publisher.interfaces.browser.IBrowserView,
            # View name
            name='redirect_handler')

        browser = Browser(self.portal)
        browser.handleErrors = False
        browser.raiseHttpErrors = False
        self.browser = browser

    def tearDown(self):
        """
        """
        # Dynamically unregister a view
        gsm = zope.component.getGlobalSiteManager()
        gsm.unregisterAdapter(factory=TestingRedirectHandler,
                              required=(None, None),
                              provided=zope.publisher.interfaces.browser.IBrowserView,
                              name="redirect_handler") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T10:41:42.157

如果你有一个测试文件夹，你可以在那里创建一个`configure.zcml`文件并在那里注册一个视图（python 文件应该在那里以保持一致性），应该就是这样。

# javascript - Javascript 代码中未捕获的 SyntaxError: Unexpected token )

> ID：15997600
> 
> 赞同：-4
> 
> 时间：2013-04-14T09:30:16.240
> 
> 标签：javascript, jquery, syntax-error

为什么下面的代码会出现此错误：“ **Uncaught SyntaxError: Unexpected token)** ”？

```
<script>

function dogetfollowers() {

Item = Parse.Object.extend("Profiles");

query = new Parse.Query(Item);

query.limit = 1;
query.ascending('createdAt');
query.equalTo("username", $("#profilename").html());

query.find({
    success: function (results) {

        for (var i = 0; i < results.length; i++) {
            var localfollowers = results[i].get("followers");
            var profilepictures = new Array();

            Item2 = Parse.Object.extend("User");

            query2 = new Parse.Query(Item);

            query2.ascending('createdAt');

            query2.find({
                success: function (results2) {

                    for (var i = 0; i < results2.length; i++) {

                        var name = results2[i].get("username");

                        var index = localfollowers.indexOf(name);

                        if (index != -1) {

                            var ppurl = results2[i].get("profilepicture");
                            profilepictures.push(ppurl);

                        }

                    }

                    for (var i = 0; i < profilepictures.length; i++) {

                        var strVar = "";
                        strVar += "<div id=\"ppparent\" class=\"ppparent\" style = \"left:30px; width: 75px;height:75px;border-radius: 10px;-moz-border-radius: 10px;-khtml-border-radius: 10px;-webkit-border-radius: 10px;position:absolute;overflow:hidden;\">";
                        strVar += "";
                        strVar += "<table width=\"100%\" height=\"100%\" align=\"center\" valign=\"center\">";
                        strVar += "   <tr><td>";
                        strVar += "      <img src=\"";
                        strVar += profilepictures[i];
                        strVar += "\" width=\"75px\" id=\"coverprofilepicture\" class=\"coverprofilepicture\" alt=\"Profile Picture\" style = \"-webkit-transform:scale(1.0);-moz-transform:scale(1.0);-o-transform:scale(1.0);\" \/>";
                        strVar += "   <\/td><\/tr>";
                        strVar += "<\/table>";
                        strVar += "";
                        strVar += "<\/div>";

                        $('#friends').prepend(strVar);

                    }

                },
                error: function (error) {

                }
            });

        }

    },
    error: function (error) {

    }
});

});

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T09:32:20.957

脚本的最后一行应该`};`代替`});`.

# android - android facebook 滑动菜单

> ID：15997606
> 
> 赞同：2
> 
> 时间：2013-04-14T09:31:09.587
> 
> 标签：android, slidingmenu

在我的应用程序中，我想创建两个滑动菜单：从左到右和从右到左；就像脸书一样，一个是菜单，另一个是聊天。如何使用 github 的 jfeinstein10/SlidingMenu API 获取两个滑动菜单？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T12:16:44.727

尝试了我自己的实现[FacebookSlideOutMenu](https://github.com/srikanthgr/FacebookSlideOutmenu)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T12:21:12.810

试试伟大的[6wunderkinder 滑动层库](https://github.com/6wunderkinder/android-sliding-layer-lib)。它*使用起来非常简单*，您可以将两个滑动层添加到同一个活动中，一个从右侧，一个从左侧。

其他值得一看的库：

*   [滑动菜单](https://github.com/jfeinstein10/SlidingMenu)
*   [安卓菜单抽屉](http://simonvt.github.io/android-menudrawer/)
*   [LibSlideMenu](https://github.com/bk138/LibSlideMenu)

# boost - Boost Asio Windows_stream_handler - Async_read_some 不递归调用

> ID：15997607
> 
> 赞同：0
> 
> 时间：2013-04-14T09:31:11.217
> 
> 标签：boost, boost-asio

我正在使用 boost::asio::windows::stream_handle 并使用 async_read_some 方法从命名管道中递归读取数据。我为 async_read_some 方法关联了一个 read_handler。但是 async_read_some 处理程序只被调用一次，当新消息通过管道时它不会被进一步调用。通过反复试验方法，我将 read_handler 再次分配给 async_read_some 方法，现在它被正确调用了。但这是正确的做法，还是请提出一种从管道获得持续响应的优雅方式。

```
boost::asio::io_service my_io_service; 
boost::asio::windows::stream_handle pipe( my_io_service);
boost::array<char, 4096> buffer;

void CPublishSubscribeLib::read_handler(const boost::system::error_code& ec, std::size_t bytes_transferred)
{
if(bytes_transferred > 0 )
pipe.async_read_some(boost::asio::buffer(buffer, 150), boost::bind(&CPublishSubscribeLib::read_handler, this, _1, _2));
} 
```

谢谢是提前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:24:56.983

使用 Boost.Asio，单个异步操作可能只调用一次关联的处理程序，然后立即删除 Boost.Asio 创建的处理程序的所有副本。因此，如果一个`async_read_some`操作只启动一次，那么*ReadHandler*将只被调用一次。通过从同一操作的处理程序中启动操作来形成异步链是一种非常常见的模式。在这种情况下，`async_read_some`从内部启动操作是正常的`CPublishSubscribeLib::read_handler`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T16:15:48.363

为了回答您关于从管道获取连续数据流的正确方法的问题 - 当然，可以从内部调用 read_handler 来处理下一条消息。我在我的代码中这样做并且效果很好。要记住的重要一点是，您的 read_handler 所在的线程需要是响应式的。这意味着处理每条消息不应该花费太多时间。因此，许多人建议将消息​​简单地复制到缓冲区，然后将其存储在某种容器（队列、堆栈或向量）中保存消息，然后通知工作线程唤醒并处理消息。这是我在代码中采用的方法。但是，如果处理量很小和/或服务器没有发送很多消息，您可能不需要在代码中执行此操作。如果您在将小消息从套接字复制到缓冲区时担心性能和内存碎片，那么您可以考虑分配一个大的环绕缓冲区来存储消息 .vs。当每条消息从堆中到达时为其分配空间。

# android - 当我将图像放在 Gridview 中的视图项目上时，如何修复 gridview 项目的大小（宽度和高度）

> ID：15997611
> 
> 赞同：2
> 
> 时间：2013-04-14T09:31:44.120
> 
> 标签：android, android-layout, android-widget, android-gridview

我有一个包含多个项目（按钮）的 gridview 我为适配器中的每个项目绑定背景

```
public View getView(int position, View convertView, ViewGroup parent) {
        Button btn;
        if (convertView == null) 
        { // if it's not recycled, initialize some attributes
            btn = new Button(mContext);
            KeypadButton keypadButton = mButtons[position];
            btn.setTag(keypadButton);
            btn.setBackgroundResource(R.drawable.button_image);
            btn.setTextColor(android.R.color.white);
        } 
        else 
        {
            btn = (Button) convertView;
        }
        btn.setText(mButtons[position].GetContent());
        return btn;
    } 
```

当我 setBackgroundResource 时，imageview 项目会改变它的大小，是否可以避免调整 image view item 的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T07:33:12.723

您可以将 LayoutParams 设置为固定大小以避免调整视图大小

```
LayoutParams params = new LayoutParams(width, height);
btn.setLayoutParams(params); 
```

如果您不设置 LayoutParams，则大小将受背景资源大小的影响。

要获取更多信息，请访问： [https ://stackoverflow.com/a/6170160/1891878](https://stackoverflow.com/a/6170160/1891878)

# c - 如何在文件末尾添加数据

> ID：15997617
> 
> 赞同：0
> 
> 时间：2013-04-14T09:32:42.390
> 
> 标签：c

我想打开一个文件并在用户输入并存储在变量**amt**中的文件末尾添加数据。

但是我的代码不起作用..

```
{
 fp=fopen("TRECIEPT.TXT","a+");
 while((temp=getc(fp))!=EOF);
 fprintf(fp,"\n");
 fprintf(fp,"%llu",&amt);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T09:36:32.427

1）以下循环是不必要的：

```
while((temp=getc(fp))!=EOF); 
```

`"a+"`已经负责寻找文件的末尾。

2）`&`以下内容可能是错误的：

```
fprintf(fp,"%llu",&amt); 
```

3）完成后不要忘记关闭文件。

# android - 从浏览器返回到应用程序时停止重新启动android应用程序

> ID：15997619
> 
> 赞同：0
> 
> 时间：2013-04-14T09:32:47.847
> 
> 标签：android, webview

我正在 android webview 中开发应用程序。

在我的应用程序中，我有一个将用户重定向到浏览器的按钮。所以我想要的是从浏览器返回到我的应用程序，应用程序不应该重新启动。它应该只是出现在前台。

# paypal - Paypal 多币种并行支付

> ID：15997620
> 
> 赞同：2
> 
> 时间：2013-04-14T09:33:05.183
> 
> 标签：paypal, paypal-adaptive-payments

Paypal 并行支付允许向多个商家发送付款。但是是否可以向多个商家发送包含不同货币的多笔付款？

## 发件人

50.00 新元 -> 商家 1

25.00 美元 -> 商家 2

20.00 美元 -> 商家 3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T04:00:52.787

在一笔交易中进行多笔付款时，所有付款必须具有相同的货币代码。

# php - 通过 PHP 和 Flash 解析变量

> ID：15997623
> 
> 赞同：0
> 
> 时间：2013-04-14T09:33:28.030
> 
> 标签：php, mysql, actionscript-3, flash, chat

我正在使用 php 和 mysql 数据库在 flash as3 中聊天。但是我根本不了解 php，并且在更新消息时遇到了问题。现在我的 php 文件看起来像这样：

```
$caster = $_POST['caster'];
$msgText = $_POST['msgText'];
$sendTime = $_POST['sendTime'];

$query = "INSERT INTO chat VALUES ('','$sendTime','$caster','$msgText')"
mysql_query($query);
$query="SELECT * FROM chat";
$result=mysql_query($query);
$cast=mysql_result($result,1,"caster");
mysql_close();

$returnVars = array();
$returnVars['success'] = $success;
$returnVars['caster'] = $cast;
$returnString = http_build_query($returnVars);
echo $returnString; 
```

我的问题是如何循环所有已发送的聊天消息以将它们发送到闪存。我只能用一个来完成，但我需要加载一大堆。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:29:04.033

您正在寻找的是“fetchAll”。请注意，您的代码对 SQL 注入是开放的，很容易通过将恶意值传递给 PHP 脚本来删除您的数据库。因此，我已将代码从已弃用的 Mysql 扩展更改为 PDO。PDO 将为您转义值。在 PHP 手册中阅读有关 PDO 的更多信息（那里有很多示例）。

另请注意，您必须修改以下代码，因为我无法猜测数据库中聊天表的字段名称是如何命名的。所以你必须调整下面的插入语句。

```
// database config parameters
$dbhost = "localhost";
$dbname = "test";
$dbuser = "root";
$dbpass = "";

try {

    // try to set up a db connection
    $db = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass);

    // insert the data using PDO's prepared statements
    // you have to adapt this line to the field names of your chat table!!
    $sql = "INSERT INTO chat (sendtime,caster,msg) VALUES (:sendtime,:caster,:msg)";
    $sth = $db->prepare($sql);
    $sth->execute(array(
         ':caster' => $_POST['caster'],
         ':sendtime' => $_POST['sendTime'],
         ':msg' => $_POST['msgText']
    ));

    // Get everything
    $sth = $db->prepare("SELECT * FROM chat");
    $sth->execute();
    $result = $sth->fetchAll(PDO::FETCH_ASSOC);
    // your code to format and return the data goes here 
    print json_encode($result);
}
catch (PDOException $e) {
    // if anything related to the database goes wrong, catch the exceptions
    print "Error!: " . $e->getMessage() . "<br/>";
    die();
}

$db = null; 
```

Actionscript 将收到一个类似于以下内容的 JSON 对象：

```
[

   {

      "sendtime":"2013-04-14",

      "caster":"person1",

      "msg":"Message 1"

   },

   {

      "sendtime":"2013-04-15",

      "caster":"person2",

      "msg":"Message 2"

   }
] 
```

如您所见，JSON 没有特定的变量名称，例如问题中使用 GET 的版本（问题中使用的方法不适用于大型结果列表）。

那么如何在 Actionscript 中使用 JSON 文档呢？我不是一个动作脚本程序员，但这个 Stackoverflow 帖子看起来是这个问题的一个合理答案：

[在 Actionscript 中获取和解析 JSON](https://stackoverflow.com/questions/10111193/get-and-parse-json-in-actionscript)

# php - 从两种形式读取信息

> ID：15997625
> 
> 赞同：0
> 
> 时间：2013-04-14T09:33:50.130
> 
> 标签：php, forms

我在一个页面中有两个表单（注册和登录），它如何读取分别发送的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T09:49:27.860

对于您的提交按钮，如果您在 HTML 中使用`<input type="submit" name="register" value="Register">`和`<input type="submit" name="login" value="Log In">`，那么在 PHP`$_POST['register']`中将设置为“注册”或`$_POST['login']`设置为“登录”，但不能同时设置为两者。您未单击的按钮不会出现在 PHP 的 $_POST 或 $_GET 数组中。您可以使用它来分叉您的代码，如下所示：

```
//Check if 'login' parameter was passed into POST array
if (isset($_POST['login']))
{
    //Login code
}
else
{
    //Registration code
} 
```

让我知道这是否有帮助并且有意义:)

# java - 如何与另一个应用程序通信？

> ID：15997626
> 
> 赞同：0
> 
> 时间：2013-04-14T09:33:51.780
> 
> 标签：java, android, eclipse, android-intent, sdk

我想问你是否有办法向其他应用程序发送信息或命令。例如：一个人正在给一个人输入一条消息，十秒钟后，我的程序在消息的 EditText 中添加（通过使用命令 append("text").to(EditText); ）一个类似“hello”的字符串。

我发现可以通过 ContentProviders 在不同的应用程序之间共享信息

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:46:16.360

这只有在这个特定应用程序的开发者预测到这种行为时才有可能。它可以简单地通过在应用程序之间广播意图来完成，但是这个“另一个”应用程序必须有一个合适的广播接收器来使用这个意图。[http://developer.android.com/guide/components/intents-filters.html](http://developer.android.com/guide/components/intents-filters.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T09:51:07.490

或者，您可以在另一个应用程序上启动一个意图并将您的数据捆绑到其中并通过`Intent`对象传递它。看看[这个](http://developer.android.com/reference/android/content/Intent.html)链接。我故意没有写代码。我认为每个人都应该自学。请记住，开发者网站是 Android 的圣经。

# jquery - 如何使用 jQuery 在表格中选择第 n 个下拉列表？

> ID：15997628
> 
> 赞同：0
> 
> 时间：2013-04-14T09:34:02.980
> 
> 标签：jquery, asp.net-mvc-3

我正在使用带有 IE10 的 JQuery 版本 1.8.11。

我有一个单行表。表id是`#listTable`，`<tr>`id是`#listTableRow`，`<td>`id是`#days`。

该行有许多单元格，每个单元格中都有一个具有相同 id: 的下拉列表`#searchString`。我希望能够选择第三个单元格中的下拉列表并将其选项设置为`option:first`. 我已经能够`td`使用下面的代码进行选择，但不能选择特定的下拉列表。如何选择表格中的第三个下拉列表？

```
<script type="text/javascript">

  $(document).ready(function () {
    var nos = $('#listTable #searchString').length;

    $.each($checkboxes, function () {
      if ($(this).is(':checked')) {
        $('#listTable #days:nth-child(3)').css('border', '2px dashed blue');             
    });

  });                 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:46:05.833

这将选择第三个单元格中的下拉列表并将其选项设置为 option:first

```
$('#listTable td').eq(2).find("#searchString option:first").prop('selected', true); 
```

# java - 更改云端点根 URL 似乎不起作用

> ID：15997630
> 
> 赞同：3
> 
> 时间：2013-04-14T09:34:12.407
> 
> 标签：java, google-app-engine, google-cloud-endpoints

我正在尝试使用`@Api`注释的根参数来`https://appid.appspot.com/myapi`. 这反映在 api 配置中，但是在开发和生产服务器上，api 都无法正常工作，当我尝试访问 API 时会产生 404 错误。

是否可以将根 url 更改为不以开头的内容，`_ah`或者这是当前对 Cloud Endpoints 的要求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T20:06:34.057

路径必须在`/_ah`当前之下。

# javascript - 提交前检查文本框

> ID：15997632
> 
> 赞同：2
> 
> 时间：2013-04-14T09:34:25.097
> 
> 标签：javascript, html, search

提交前如何检查文本框？

```
<form action='search.php' method='GET'>

         <input type="text" id= "q" name="q" class='textbox' >

         <input type="submit" id='submit' value="Search" class ='button' >

     </form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T09:43:14.073

试试这个简单的 JavaScript 验证：

```
<html>
    <head>
        <script type="text/javascript">
            function check()
            {
                var searchtext = document.getElementById("q").value;
                if(searchtext=='')
                {
                    alert('Enter any character');
                    return false;
                }
            }
        </script>
    </head>
    <body>
        <form  action='search.php' method='GET' onSubmit="return check();">
            <input type="text" id= "q" name="q" class='textbox' >
            <input type="submit" id='submit' value="Search" class ='button' >
        </form>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T09:43:42.743

```
<?php
if(!empty($_GET['q']))
{
//if it is not empty, do something
}
else
{
//otherwise do this
}
?> 
```

如果您要从表单发送内容，我是否还建议您使用 POST 而不是 GET。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T10:00:47.297

您可以使用[jQuery](http://en.wikipedia.org/wiki/JQuery)，如下所示：

```
$(function(){
    $('#submit').click(function(e){
        if($('#q').val() != null && $('#q').val().length > 0){
            $.get('search.php', $('#formId').serialize(), function(result){});
        }
        else{
            //Otherwise do this
        }
        e.preventDefault();
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-16T05:53:14.240

您可以使用一些时尚的 jQuery 库来轻松编码，例如[jQuery 验证插件](http://www.raymondcamden.com/index.cfm/2009/2/10/An-Introduction-to-jQuery-and-Form-Validation-2)。

# c - GCC，C：找出在#pragma ignore中使用的默认警告的名称

> ID：15997634
> 
> 赞同：8
> 
> 时间：2013-04-14T09:34:41.763
> 
> 标签：c, gcc, warnings

我知道我可以把

```
#pragma GCC diagnostic ignored "<warning>" 
```

到源文件的顶部，以抑制与此特定源文件相关的警告。但是，似乎有些名称不够具体。例如，

```
#pragma GCC diagnostic ignored "-Wwrite-strings" 
```

不阻止 gcc (4.7.2) 显示未给出确切名称的警告消息，相反，这些消息后仅显示 [默认启用]。我想我需要知道正确的警告名称，这样我才能`#pragma`在行中使用它们。我试过了

```
-fdiagnostics-show-option, 
```

但是警告仍然显示为[默认启用]。

有没有办法识别这些警告或抑制与特定源文件相关的警告？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:39:22.993

You have to push and pop diagnostic states. Like this:

```
#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wunused-function"
    /* ignoring warning */

    int unused_function( void ) {
         return 1337;
    }
#pragma GCC diagnostic pop 
```

# asp.net-mvc - MVC 怀疑视图和控制器之间没有数据传递

> ID：15997636
> 
> 赞同：0
> 
> 时间：2013-04-14T09:34:52.853
> 
> 标签：asp.net-mvc, data-annotations

我是 MVC 的新手，很困惑。正在使用具有不同显示页面的两个主要视图，Index 和 DisplayPrediction。我尝试使用数据注释来验证提交表单中的数据，但它只显示错误消息并且不会阻止加载第二个视图。然而，最大的问题是，当第一个视图返回时，输入到文本框中的信息似乎只是简单地重置为默认值。非常感谢您的帮助:)这是我当前的代码：

这是模型，我在这里保留需要从用户那里获取的字段，以及程序的功能（对字段的处理将生成应显示在第二个视图上的输出）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.IO;
using System.Diagnostics;
using System.ComponentModel.DataAnnotations;
using System.Web.Mvc;
using System.ComponentModel;

namespace MvcHaberman.Models
{
public class HabermanPrediction
{
    [Required]
    [Range(0,100)]
    public int age { set; get; }
    [Required]
    [Range(58, 69)]
    public int year { set; get; }
    [Required]
    public int axNodes { set; get; }
    [Required]
    [Range(1, 2, ErrorMessage="Survived = 1; Did not survive = 2")]
    public int survival { set; get; }

    public string answer { set; get; }

    public void generatePrediction()
    {
        StreamWriter i = new StreamWriter(@"input.arff");
        i.WriteLine(@"relation haberman\n\n@attribute     Age_of_patient_at_time_of_operation INTEGER\n@attribute Patients_year_of_operation  {58,59,60,61,62,63,64,65,66,67,68,69}\n@attribute Number_of_positive_axillary_nodes_detected INTEGER\n@attribute Survival_status {1,2}\n\n@data");
        i.WriteLine(age + "," + year + "," + axNodes + "," + survival);
        i.Close();
        Process genPrediction = new Process();
        genPrediction.StartInfo = new ProcessStartInfo()
        {
            CreateNoWindow = true,
            FileName = @"habermanCommand.bat",
            WindowStyle = ProcessWindowStyle.Hidden,
            Arguments = "cmd.exe"
        };
        genPrediction.Start();
        genPrediction.WaitForExit();
        genPrediction.Dispose();

        StreamReader readPrediction = new StreamReader(@"output.txt");
        string line = readPrediction.ReadLine();
        while (line != null)
        {
        if (line.Contains(':'))
        {
            string[] part = line.Split(':');
            if (part[2].Contains('+'))
            {
                string[] prediction = part[2].Split('+');
                if (part[2][0] == '1')
                    answer = "\t(Survived)\t\tProbability that your assessment was  incorrect:\t" + (Convert.ToDecimal(prediction[1].Trim()) * 100) + "%";
                else answer = "\t(Did not Survive)\tProbability that your assessment was incorrect:\t" + (Convert.ToDecimal(prediction[1].Trim()) * 100) + "%";
            }
            else
            {
                string line1 = "";
                string lineTrimmed = "";
                for (int j = 1; j < part[2].Length; j++)
                    line1 += part[2][j];
                for (int l = 0; l < line1.Length; l++)
                    if (line1[l] != ' ')
                        lineTrimmed += line1[l];
                if (part[2][0] == '1')
                    answer = "\t(Survived)\t\tProbability that your assessment was correct:\t" + (Convert.ToDecimal(lineTrimmed) * 100) + "%";
                else
                    answer = "\t(Did not Survive)\tProbability that your assessment was correct:\t" + (Convert.ToDecimal(lineTrimmed) * 100) + "%";
            }
            }
            line = readPrediction.ReadLine();
        }
        readPrediction.Close();
    }

}
} 
```

控制器指定数据应在其间流动的两个视图：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using MvcHaberman.Models;
using DataAnnotationsExtensions;

namespace MvcHaberman.Controllers
{
public class HabermanController : Controller
{
    public ActionResult Index()
    {
        HabermanPrediction obj = new HabermanPrediction();

        if (ModelState.IsValid == false)
        {
            return Redirect("/Habberman/Index");
        }
        else return View(obj);
    }

    public ActionResult About()
    {
        return View();
    }

    public ActionResult DisplayPrediction(HabermanPrediction objOut)
    {   
        objOut.generatePrediction();
        return View(objOut);
    }
}
} 
```

提交视图：

```
@model MvcHaberman.Models.HabermanPrediction
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>HabermanPrediction</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.age)

    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.age)
        @Html.ValidationMessageFor(model => model.age) 
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.year)
    </div>
    <div class="editor-field" >
        @Html.EditorFor(model => model.year)
        @Html.ValidationMessageFor(model => model.year) 
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.axNodes)
    </div>
    <div class="editor-field" >
        @Html.EditorFor(model => model.axNodes)
        @Html.ValidationMessageFor(model => model.axNodes)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.survival)
    </div>
    <div class="editor-field" > 
        @Html.EditorFor(model => model.survival)
        @Html.ValidationMessageFor(model => model.survival)
    </div>
    <p>
        @Html.ActionLink("Generate Prediction", "DisplayPrediction")

    </p>
</fieldset>
} 
```

输出视图：

```
`@model MvcHaberman.Models.HabermanPrediction`
`@using MvcHaberman.Models`
<!DOCTYPE html>
<html>
<head>
    <title>DisplayPrediction</title>
</head>
@using (Html.BeginForm())
{
<body>
<div class= "label">
@Html.LabelFor(model => model.answer)
</div>
<div>
    <h1>@Model.age</h1>
    <h2>@Model.answer</h2>
</div>
</body>
}
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T09:49:07.427

当您使用 View(obj) 方法时，它会使用名为 obj 的默认模型生成新视图。所以当页面刷新时，html元素的默认值设置为你的模型参数（在这个场景中是obj参数）。

# java - 为双打创建 HashSet

> ID：15997637
> 
> 赞同：5
> 
> 时间：2013-04-14T09:34:55.570
> 
> 标签：java, double, hashset

我希望使用定义的公差（ ）创建一个`HashSet`实数（目前s） ，（cf 因为 using仅适用于完全相等并且是最终类，我不能使用它。我最初的想法是扩展（例如), 使用方法并创建一个新类，在其中使用此值。但是我想检查是否已经存在现有的解决方案和现有的 F/OSS 库。`Double``epsilon`[`Assert.assertEquals(double, double, double)`](https://stackoverflow.com/questions/5686755/junit-assertequals-for-double-values)
`Double.equals()``Double``HashSet``DoubleHashSet``setEpsilon(double)``ComparableDouble``equals()``DoubleHashSet`

（将来我希望将其扩展到实数元组 - 例如矩形和立方体 - 所以通用方法更可取

注意：@NPE 暗示这是不可能的。不幸的是，我怀疑这在*形式上*是正确的:-) 所以我想知道是否有近似的方法......其他人一定有这个问题并大致解决了它。（我已经经常使用一个工具`Real.isEqual(a, b, epsilon)`，它非常有用。）我准备接受一些不常见的及物性错误。

注意：我将使用 TreeSet 来解决“几乎等于（）”的问题。稍后我将比较 complexNumbers、矩形（和更复杂的对象），能够设置两个事物相等的限制非常有用。complexNumbers 没有简单的自然排序（也许 Cantor 方法会起作用），但我们可以判断它们是否几乎相等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T09:40:58.527

这种方法存在一些基本缺陷。

`HashSet`用于`equals()`检查两个元素是否相等。[合同`equals()`的要求](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)如下：

> 它是可*传递*的：对于任何非空引用值`x`、`y`和`z`，如果`x.equals(y)`返回`true`和`y.equals(z)`返回`true`，则`x.equals(z)`应该返回`true`。

现在考虑以下示例：

```
x = 0.0
y = 0.9 * epsilon
z = 1.8 * epsilon 
```

很明显，您提出的比较方案将打破传递性要求（`x`等于`y`和`y`等于`z`，但`x`不等于`z`）。在这些情况下，`HashSet`无法正常运行。

此外`hashCode()`，由于以下[要求](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)，将产生额外的挑战：

> 如果根据方法两个对象相等`equals(Object)`，则对两个对象中的每一个调用该`hashCode`方法必须产生相同的整数结果。

`hashCode()`可以通过使用 a`TreeSet`而不是来回避该要求`HashSet`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T10:31:31.820

我要做的是在使用双打之前将它们四舍五入（假设这是合适的）

例如

```
public static double roundByFactor(double d, long factor) {
    return (double) Math.round(d * factor) / factor;
}

TDoubleHashSet set = new TDoubleHashSet(); // more efficient than HashSet<Double>
set.add(roundByFactor(1.001, 100));
set.add(roundByFactor(1.005, 100));
set.add(roundByFactor(1.01, 100));
// set has two elements. 
```

您可以将此行为包装在您自己的 DoubleHashSet 中。如果要保留原始值，可以使用 HashMap 或 TDoubleDoubleHashMap ，其中键是舍入值，值是原始值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T12:39:24.360

我已经实施了@NPE 的方法（我已经接受了他/她的回答，所以他/她得到了分数 :-) 并在此处提供代码

```
//Create a comparator:
public class RealComparator implements Comparator<Double> {

    private double epsilon = 0.0d;

    public RealComparator(double eps) {
        this.setEpsilon(eps);
    }

    /**
     * if Math.abs(d0-d1) <= epsilon  
     * return -1 if either arg is null
     */
    public int compare(Double d0, Double d1) {
        if (d0 == null || d1 == null) {
            return -1;
        }
        double delta = Math.abs(d0 - d1);
        if (delta <= epsilon) {
            return 0;
        }
        return (d0 < d1) ? -1 : 1;
    }

    /** set the tolerance
     * negative values are converted to positive
     * @param epsilon
     */
    public void setEpsilon(double epsilon) {
        this.epsilon = Math.abs(epsilon);
    } 
```

并测试它

```
public final static Double ONE = 1.0;
public final static Double THREE = 3.0;

@Test
public void testTreeSet(){
    RealComparator comparator = new RealComparator(0.0);
    Set<Double> set = new TreeSet<Double>(comparator);
    set.add(ONE);
    set.add(ONE);
    set.add(THREE);
    Assert.assertEquals(2, set.size());
}
@Test
public void testTreeSet1(){
    RealComparator comparator = new RealComparator(0.0);
    Set<Double> set = new TreeSet<Double>(comparator);
    set.add(ONE);
    set.add(ONE-0.001);
    set.add(THREE);
    Assert.assertEquals(3, set.size());
}
@Test
public void testTreeSet2(){
    RealComparator comparator = new RealComparator(0.01);
    Set<Double> set = new TreeSet<Double>(comparator);
    set.add(ONE);
    set.add(ONE - 0.001);
    set.add(THREE);
    Assert.assertEquals(2, set.size());
}
@Test
public void testTreeSet3(){
    RealComparator comparator = new RealComparator(0.01);
    Set<Double> set = new TreeSet<Double>(comparator);
    set.add(ONE - 0.001);
    set.add(ONE);
    set.add(THREE);
    Assert.assertEquals(2, set.size());
} 
```

# android - 检查设备上是否安装了 Google 地图应用程序

> ID：15997638
> 
> 赞同：1
> 
> 时间：2013-04-14T09:35:04.153
> 
> 标签：android, cordova, ibm-mobilefirst

我正在尝试通过以下命令行从 IBM Worklight 应用程序访问 Google Maps 应用程序：

```
geo:37.786971,-122.399677 
```

有没有办法查明移动设备上是否存在谷歌地图应用程序（或任何地图客户端应用程序）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:42:34.460

是的，您可以在 Worklight中编写一个[Cordova 插件，用于](http://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v506/06_05_Android_-_Adding_native_functionality_to_hybrid_application_with_Apache_Cordova_plugin.pdf)[检查是否安装了 Google Maps（或任何其他应用程序）](https://stackoverflow.com/questions/6758841/how-to-know-perticular-package-application-exist-in-the-device)。

** Worklight 入门网站已关闭，[但现在您可以在 IBM Worklight 信息中心获得相同的信息。](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m6/index.jsp?topic=/com.ibm.help.doc/wl_home.html)

# django - Django时区错误

> ID：15997641
> 
> 赞同：0
> 
> 时间：2013-04-14T09:35:38.443
> 
> 标签：django, windows

我是 Django 的新手，我正在做官方教程（[https://docs.djangoproject.com/en/1.5/intro/tutorial02/](https://docs.djangoproject.com/en/1.5/intro/tutorial02/)）。我到达了教程的一部分，我必须将“was_published_recently”对象添加到管理站点。尝试添加时出现以下错误：

```
Exception Type:     NameError Exception Value:  

global name 'timezone' is not defined

Exception Location:     in was_published_recently, line 9 Python
Executable:     c:\python27\python.exe Python Version:  2.7.4 Python
Path: 

['E:\\Egyetem\\programoz\xe1s\\webfejleszt\xe9s a gyakorlatban\\Django
projects\\first project\\mysite', 
'C:\\Windows\\system32\\python27.zip',  
'c:\\python27\\DLLs', 
'c:\\python27\\lib',  
'c:\\python27\\lib\\plat-win', 
'c:\\python27\\lib\\lib-tk',  
'c:\\python27', 
'c:\\python27\\lib\\site-packages'] 
```

我试图添加到环境路径 c:\python27\lib 但它没有解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:41:57.227

教程 2 参考了教程 1，其中提到了这一点：

```
from django.utils import timezone 
```

将其添加到您的脚本中。

# python - 创建面板的图像

> ID：15997643
> 
> 赞同：0
> 
> 时间：2013-04-14T09:35:39.080
> 
> 标签：python, wxpython

我想创建一个 wxpython 面板并将其保存为图像。我不知道这是否可能并且无法找到任何信息。如果有人有任何关于我将如何处理的信息，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:53:47.600

显然，我在发布问题后找到了一些信息。下面的代码正是我正在寻找的。

```
def OnSaveToFile(self, event):
    context = wx.ClientDC(self)
    memory = wx.MemoryDC()
    x, y = self.ClientSize
    bitmap = wx.EmptyBitmap(x, y, -1)
    memory.SelectObject(bitmap)
    memory.Blit(0, 0, x, y, context, 0, 0)
    memory.SelectObject(wx.NullBitmap)
    bitmap.SaveFile('test.bmp', wx.BITMAP_TYPE_BMP) 
```

我从这个链接[http://wiki.wxpython.org/WorkingWithImages得到它](http://wiki.wxpython.org/WorkingWithImages)

# perl - 为什么这个 perl 程序不打印任何东西？

> ID：15997644
> 
> 赞同：0
> 
> 时间：2013-04-14T09:36:24.100
> 
> 标签：perl, unix, io, terminal, stdin

```
#!/usr/bin/env perl

use Term::ReadKey;
ReadMode 4;
END {
    ReadMode 0; # Reset tty mode before exiting
}

while (<>) {
    $key = ReadKey(0);
    $key == "\x04" and last; # Ctrl+D breaks the loop 
    print $key;
} 
```

当我没有while循环时，它正在打印我输入的内容。

它甚至不会在最后产生任何输出（如果它正在缓冲它或其他东西）。就像我运行它并键入几个字母并按 Ctrl+D 一样。它什么也不打印。

我正在[尝试制作一个程序来将鼠标滚动转义码转换为 keypresses](https://stackoverflow.com/questions/15996891/lightweight-event-wrapper-for-the-terminal)。我希望我没有叫错树。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T12:24:46.303

这条线

```
while (<>) 
```

从中读取一行`STDIN`（假设您在没有命令行参数的情况下运行程序）。一旦读取了一行，它就会进入 while 循环的主体。您输入的任何内容（包括换行符）现在都在`$_`.

现在，您按下一个键，它存储`$key`在`CTRL-D`. 由于两者都不是数字，它们最终都为零，循环终止。

这就是为什么您应该打开会告诉您的[警告：](http://perldoc.perl.org/warnings.html)

```
参数“^D”在 ./tt.pl 第 15 行第 1 行的数字 eq (==) 中不是数字。
参数“c”在 ./tt.pl 第 15 行第 1 行的数字 eq (==) 中不是数字。
```

当然，将循环终止条件也放在它所属的位置是有意义的：

```
#!/usr/bin/env perl

use strict;
use warnings;

use Term::ReadKey;
ReadMode 4;
END {
    ReadMode 0; # Reset tty mode before exiting
}

my $input;
{
    local $| = 1;
    while ((my $key = ReadKey(0)) ne "\x04") {
        print $key;
        $input .= $key;
    }
}

print "'$input'\n"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T10:03:39.617

只需将 while 条件替换为：

```
while(1) {
   # ...
} 
```

# python - 使用 wxwidgets 创建一个 gui

> ID：15997648
> 
> 赞同：0
> 
> 时间：2013-04-14T09:36:44.113
> 
> 标签：python

我需要创建一个主要针对 Windows 和 Linux 的跨平台 GUI。我最终决定使用 wxWidgets 库来完成它，因为它具有较少限制的许可证并且具有 python 绑定。但是我只是想知道是否必须在每台需要运行我的 GUI 的计算机上安装 wxPython。因为我真的不能要求用户去该站点并安装 wxPython 以使我的软件正常工作。有没有办法解决？除了 Java、Qt 和 wxWidgets 之外，还有其他好的跨平台 GUI 工具包吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:58:46.173

[这](http://www.blog.pythonlibrary.org/2010/08/10/a-pyinstaller-tutorial-build-a-binary-series/)解释了如何将 wxPython 与 pyinstaller 一起使用，允许您为 Windows 构建一个 .exe 文件。

在 linux 上，您可以使用 .deb 文件并将 python-wxgtk2.8 添加到依赖项中；如果用户不使用 .deb 文件，他可能应该知道如何安装 wxPython :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T10:21:47.153

> 但是我只是想知道是否必须在每台需要运行我的 GUI 的计算机上安装 wxPython。

如果您不想在每台计算机上手动安装 wxPython，则必须在您的发行版中包含所有 wxPython 库（即目录的内容可能位于or`wx`中的某处），以及它们依赖的任何其他库默认情况下通常不安装。`site-packages``dist-packages`

在 Linux 上，您可能只能使用`ldd`wxPython 的`.pyd`文件来找出它们所依赖的内容，并且您可以在 Windows上执行[类似的操作。](https://stackoverflow.com/questions/1993673/what-is-the-equivalent-of-linuxs-ldd-on-windows)

如果它通过`dlopen(3)`或 Windows 等效加载东西，它有点复杂。您可能必须尝试一下，等着看它抱怨什么缺少库，然后将它们添加到发行版中。

# javascript - 给定一个有效的href，源、路径名、搜索和哈希的regx 是什么？

> ID：15997649
> 
> 赞同：0
> 
> 时间：2013-04-14T09:36:55.643
> 
> 标签：javascript, regex, href, location-href

在`javascript`, 给定一个有效的`url`, 例如,

`http://seeplai2.trailsandtribulations.nat/admin/items?var=val#here`

提取源、路径名、搜索和哈希的表达式是什么`window.location`？

相对较弱`regx`，以下是我的猜测：

```
origin: href.match(/(.*?)(\/|\?|#))[1]

pathname: href.match(\/\/[^\/]*([^\?#]*)/)[1]

search: (href.indexOf('?')>-1) ? href.match(/\?[^#]*)/)[1] : ''

hash: (href.indexOf('#')>-1) ? href.match(/(#.*)/)[1] : '' 
```

这些看起来对吗？

这是示例代码：

```
<a href='/path?var=val1' onclick='doClick(event)'>Anchor1</a>

function doClick(e) {

  var href = e.target.href;
  var origin = href.match(/regx/)[1];

  // if different origin, go there
  if( origin != window.location.origin ) return;

  // if only hash difference, let default take over
  ...

  // if path different, process here
  ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:43:40.330

为什么使用正则表达式？

```
var link = document.createElement("a")
link.setAttribute("href","http://seeplai2.trailsandtribulations.nat/admin/items?var=val#here");
alert(link.search) 
```

比较原产地，使用更兼容的

```
location.protocol + "//" + location.hostname 
```

例如

```
window.onload=function() {
  var winOrigin = location.protocol+"//"+location.hostname;
  var links = document.links;
  for (var i=0,n=links.length;i<n;i++) {
    links[i].onclick=function() {
      var linkOrigin = this.protocol + "//" + this.hostname;
      alert(winOrigin===linkOrigin);
    }
  }
} 
```

[演示](http://jsfiddle.net/mplungjan/6vGfB/)；

# windows-8 - 向多个客户端推送近乎实时的位置更新

> ID：15997656
> 
> 赞同：0
> 
> 时间：2013-04-14T09:37:44.910
> 
> 标签：windows-8, xamarin.ios, push-notification, xamarin.android, pushsharp

我目前正处于设计跨平台移动应用程序（iOS、Android、WP8）的早期阶段。该应用程序的核心是允许在未知数量的客户端设备之间进行基于接近度的交互。

有人可以推荐一个框架或技术，允许我将服务器生成的基于位置的接近警报推送到甚至可以很好地扩展的客户端吗？推送通知（使用 PushSharp 的跨平台）是否是一个可行的选择，或者推送通知是否总是与设备上的某种 toast 通知齐头并进？

**更新**：应该延迟 30 秒甚至一分钟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T10:46:07.143

推送通知有很多延迟可以给你任何接近的东西[`real-time`](http://en.wikipedia.org/wiki/Real-time_computing)。此外，不保证推送通知可以到达设备。

您确实需要考虑位置更新应该限制多少时间。您还应该对各种设备上的 GPS 更新速度进行一些测试。我在 Nexus 4 上进行了测试，它也不是接近实时的。因此，在您的整个应用程序中，无论是服务器端还是客户端，您都会遇到意想不到的事情`real-time`。

但是，如果您可以忍受几秒到 30 秒或更长时间的延迟，那么推送通知对您来说效果很好，它们也可以很好地扩展。

**编辑：**

> 推送通知总是与设备上的某种 toast 通知齐头并进？

有一个称为 RAW 通知的概念，它允许您使用通知发送任意信息。但就我个人而言，我只会通知客户端有关服务器上准备好的更新，然后它可以获得应用程序所需的所有信息。这是因为正如我所说，推送通知不能保证永远到达设备，还因为您受限于可以在通知中嵌入多少信息。

所以我对流程的建议是：

1.  客户端 A 更新其位置并将其发送到 Web 服务
2.  Web 服务从客户端 A 接收信息并为所有其他客户端准备通知，这些客户端需要有关客户端 A 的信息并推送有关他们需要更新其信息的信息。
3.  客户端 B 收到一个推送通知，告诉它从 Web 服务刷新数据并执行此操作。

如果应用程序处于后台状态，那将很有效。在前台显示时，我会每隔一秒左右轮询一次服务器；仍然收到通知，只是强制客户端更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T02:53:45.170

对于“很好地扩展”部分，您可能还想看看[Windows Azure Service Bus Notification Hubs](http://msdn.microsoft.com/en-us/library/windowsazure/jj927170.aspx)。它目前处于预览阶段，仅支持 Windows 8 Store 应用程序和 iOS，但对 Android 和 Windows Phone 的支持正在开发中。

# algorithm - 硬币找零记忆

> ID：15997661
> 
> 赞同：1
> 
> 时间：2013-04-14T09:38:22.823
> 
> 标签：algorithm, dynamic, memoization

下面的算法找到所有可能的方法来改变一个特定的总和真的使用记忆吗？

```
func count( n, m )
  for i from 0 to n
    for j from 0 to m
      if i equals 0
        table[i,j] = 1          
      else if j equals 0
        table [i,j] = 0
      else if S_j greater than i
        table[ i, j ] = table[ i, j - 1 ]
      else 
        table[ i, j ] = table[ i - S_j, j ] + table[ i, j - 1 ]
return table[ n, m ] 
```

每次调用函数 count 时，它都会从头开始填充表。即使表已经针对某些值进行了初始化，下次调用 count 时，它也不会使用这些值，而是从 i = 0 和 j = 0 重新开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:48:51.627

这不是记忆。这是动态编程代码的示例。

为了分析你的代码，首先我们需要区分记忆和动态编程。

记忆是一种自上而下的方法，而动态编程是一种自下而上的方法。

考虑寻找数字**n**的阶乘问题。

如果你正在寻找 n! 通过使用以下事实，

```
n! = n * (n-1)! and 0!=1 
```

这是自上而下方法的示例。

n 的值一直保存在内存中，直到值为 0！到（n-1）！被退回。缺点是浪费了大量的堆栈内存。优点是如果子问题已经解决，您不必重新计算子问题。子问题的解决方案存储在内存中。

但是在您的问题中，您没有自上而下的方法，因此没有记忆。

表中的每个条目都是直接从先前计算的子问题解决方案中获得的。它使用自下而上的方法。因此，您有一段使用动态编程的代码。

# erlang - Riak MapReduce：按字段分组项目+对另一个字段求 和

> ID：15997664
> 
> 赞同：0
> 
> 时间：2013-04-14T09:38:40.873
> 
> 标签：erlang, riak

在我读到的所有地方，人们都说您不应该在整个存储桶上使用 Riak 的 MapReduce，并且还有其他方法可以实现您的目标。不过，我不确定如何。我也不清楚为什么使用整个存储桶很慢，如果您在整个系统中只有*一个存储桶*，那么无论哪种方式，您都需要检查所有条目。

我有一个代表销售数据的 500K+ 文档的列表。我需要以不同的方式查看这些数据：例如，企业运营每个月的收入是多少？每个产品增加了多少收入？在给定的一个月内，每种产品销售了多少？我一直认为 MapReduce 应该擅长解决这些类型的聚合问题，所以如果您已经拥有所有键（您必须以某种方式搜索它们，对吗？），我很困惑 MapReduce 的用途。

我的文档都在一个名为“sales”的存储桶中，它们是具有以下字段的记录：`{"id":1, "product_key": "cyber-pet-toy", "price": "10.00", "tax": "1.00", "created_at": 1365931758}`.

让我们举个例子，我需要报告过去 4 年中每个月每个产品的总收入（基本上是整个桶），如何使用 Riak 的 MapReduce 有效地做到这一点？即使只是尝试对数据使用身份映射操作，我也会在大约 30 秒后超时，MySQL 会以毫秒为单位处理。

我在 Erlang 中执行此操作（使用协议缓冲区客户端），但任何语言都可以解释。

等效的 SQL (MySQL) 将是：

```
 SELECT SUM(price)                         AS revenue,
         FROM_UNIXTIME(created_at, '%Y-%m') AS month,
         product_key
    FROM sales
GROUP BY month, product_key
ORDER BY month ASC; 
```

（现在订购不重要）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:06:06.167

您是对的，任何 KV 存储中的 MapReduce 都不会使其表现得像 SQL 数据库。有几件事可能对您的用例有所帮助。使用多个桶。您可以按产品、地区或月份对它们进行细分，而不仅仅是一个销售桶，这样数据就已经按照您的常见报告标准之一进行了拆分。考虑为每个字段的每个文档添加二级索引。然后，您的月份查询可以是 created_at 索引的范围查询。如果您的 id 字段顺序增加并且您需要提取每月数据，请将每个月的开始和结束 id 存储在单独的键中（我知道，一旦写入数据就不容易做到）。你也可以考虑打破每个文档的一系列键。不只是存储一个带有 json 文档的 id 键作为值，而是为每个字段存储一个键，例如 id-productid、id-createdat、身份证价格。这将最大限度地减少必须从磁盘读取并存储在 RAM 中以处理 MapReduce 的数据量。

为了正确看待这一点，请考虑以下（非常讽刺的）假设：我在 MySQL 数据库中有 500K 文档，每个文档都包含一个 json 字符串。我的数据库由一个名为 Sales 的表组成，其中有一个名为 Data 的列，它将我的文档存储为二进制 blob。如何编写一个快速、高效的 SQL 语句，只选择包含日期的文档并按月分组？

我要说的是，您必须根据您选择使用的数据存储的优势来设计数据对象的结构。Riak 在处理 JSON 方面并不是特别有效，除非您使用他们的类似 solr 的搜索，但可能有一些方法可以重组您可能能够处理的数据。或者这可能意味着另一个数据存储会更好地满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T00:02:59.530

目前，我为需要经常搜索的文档属性创建二级索引，并使用这个更小的键子集作为 MapReduce 作业的输入。

[http://docs.basho.com/riak/latest/tutorials/Secondary-Indexes---Examples/](http://docs.basho.com/riak/latest/tutorials/Secondary-Indexes---Examples/)

我确实同意，与我使用的其他系统相比，运行这样的大型 MapReduce 作业似乎非常昂贵。

# macos - 列表中的 Qt Mac 复选框被截断

> ID：15997665
> 
> 赞同：2
> 
> 时间：2013-04-14T09:38:57.203
> 
> 标签：macos, qt

我有一个 QListWidget，我想在每个项目旁边都有一个复选框。

当我用项目填充 ListWidget 时：

```
QListWidgetItem *item;
for (int i = 0; i < 10; ++i) {
    item = new QListWidgetItem();
    item->setText("Item");
    item->setFlags(item->flags() | Qt::ItemIsUserCheckable);
    item->setCheckState(Qt::Unchecked);
    ui->listWidget->addItem(item);
} 
```

复选框被切断，它看起来像这样： ![截屏](https://i.imgur.com/KGfKFia.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T15:10:28.547

这是当前 Qt 版本中的一个错误，它只发生在具有 Retina-Display 的 Mac 上。当程序以低分辨率启动时，一切看起来都很好。

# java - Java - 在另一个方法之前调用一个方法

> ID：15997667
> 
> 赞同：1
> 
> 时间：2013-04-14T09:39:35.127
> 
> 标签：java

使用类方法，我想确保`getAverage`方法总是在方法之前`setAverage`调用

如果`setAverage`首先调用，它应该返回一个错误。

我很困惑如何检查集合是否在获取之前被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:45:24.717

如果 getAverable 返回一个非原始对象，您可以检查该值是否为空。

如果返回原始值，如整数，则可以使用布尔值来检查是否调用了 setMethod。

```
class Name {
    int value;
    boolean isCalled;
    public int getValue() {
        if(isCalled == false) {
            throw new Exception();
        }
        else {
           return value;
        }
    }

    public void setValue(int value) {
        isCalled = true;
        this.value = value;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T09:51:14.067

没有直接的 Java 支持这样做。当然，您可以直接在方法中实现一些算法，该算法会记住哪个方法以哪个顺序执行。更好的方法是使用面向方面的编程。

做你想做的最简单的方法是编写一个 Aspect，它在一个布尔值中写入 getter 已执行，并且仅在布尔标志为 true 的情况下才允许执行 setter。

当然，这只是第一步，很容易出错。（并发、重复等）

（我在硕士论文期间写过这样一个框架。当然，它比仅检查单个顺序方法调用要复杂一些。）

# c# - 在控制离开构造函数之前，必须完全分配字段“BaseStats.baseStats.hp”

> ID：15997669
> 
> 赞同：-4
> 
> 时间：2013-04-14T09:40:16.287
> 
> 标签：c#, unity3d

我试图弄清楚这一点，但一直没能做到。无法将类型隐式转换`int`为`BaseStats.Stat`

```
using UnityEngine;
using System.Collections;

public class BaseStats : MonoBehaviour {

    public struct baseStats {
    public string name;
    public int level;
    public Stat hp;
    public int ap;

    public int strength;
    public int toughness;
    public int agility;
    public int intelligence;
    public int willPower;
    public int luck;

    public int attack;
    public int hitPercentage;
    public int defence;
    public int evasionPercentage;
    public int abilityAttack;
    public int abilityDefence;
    public int abilityDefencePercentage;

    public int exp;

        public baseStats(string Name, int Level, int Hp, int Ap, int Strength, int Toughness, int Agility, int Intelligence, int WillPower, int Luck, int Attack, int HitPercentage, int Defence, int EvasionPercentage, int AbilityAttack, int AbilityDefence, int AbilityDefencePercentage, int Exp) {
            name = Name;
            level = Level;
            hp = Hp;
            ap = Ap;

            strength = Strength;
            toughness = Toughness;
            agility = Agility;
            intelligence = Intelligence;
            willPower = WillPower;
            luck = Luck;

            attack = Attack;
            hitPercentage = HitPercentage;
            defence = Defence;
            evasionPercentage = EvasionPercentage;
            abilityAttack = AbilityAttack;
            abilityDefence = AbilityDefence;
            abilityDefencePercentage = AbilityDefencePercentage;

            exp = Exp;

        }
    }

    public class Stat {
        int current;
        int max;
    }

    void Start() {

        baseStats mainChar = new baseStats( 
            "Truth",
            99,
            9999,
            999,
            255,
            255,
            255,
            255,
            255,
            255,
            255,
            255,
            255,
            100,
            255,
            255, 
            100,
            7777777);

        print(mainChar.level);

    }
} 
```

我试图让 HP 达到电流和最大值，这就是教程教我的方式。不幸的是，本教程是在统一脚本中，而我想用 c# 和

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T09:42:42.180

在您的构造函数中，您正在分配：

```
hp = Hp; 
```

您的参数`HP`属于类型`int`并且您已将字段定义`hp`为`Stat`

```
public Stat hp; 
```

这就是您收到错误的原因，我相信您也想定义您的领域`int`。另外，如果您遵循[.Net 命名约定，它会更好](http://msdn.microsoft.com/en-us/library/vstudio/ms229045%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T09:45:34.153

问题是你通过构造函数传递一个`int`( ) 并将它分配给一个( )`Hp`类型的变量：`Stat``hp`

```
hp = Hp; 
```

将构造函数更改为：

```
public baseStats(string Name, int Level, Stat Hp /*...*/){
    //...
} 
```

**编辑：**

> 参数 #3' 不能将 int' 表达式转换为类型 BaseStats.Stat' 和 BaseStats.baseStats.baseStats(string, int, BaseStats.Stat, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int)' 有一些无效参数

您的第二个问题是更改构造函数还必须将正确的对象传递给构造函数：

```
baseStats mainChar = new baseStats( 
            "Truth",
            99,
            9999, //It's an int and you have to pass an object of type Stat
            999,
            255,
            255,
            255,
            255,
            255,
            255,
            255,
            255,
            255,
            100,
            255,
            255, 
            100,
            7777777); 
```

将其更改为：

```
Stat myStat = new Stat(); //create the object needed

baseStats mainChar = new baseStats( 
            "Truth",
            99,
            myStat,  //pass it!
            999,
            255,
            255,
            255,
            255,
            255,
            255,
            255,
            255,
            255,
            100,
            255,
            255, 
            100,
            7777777); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T09:47:38.603

首先`Stat`应该根据`Enum`您提供的用法而不是`class`-

```
public enum Stat
{
   int current;
   int max;
} 
```

这是类型转换的问题。将参数作为枚举（统计）传递 -

```
public baseStats(string Name, int Level, Stat Hp, ....) 
```

或在分配之前将其类型转换为枚举（Stat） -

```
hp = (Stat)Hp; 
```

# vba - 在 MS Word 中清理字典中凌乱的段落中断

> ID：15997673
> 
> 赞同：0
> 
> 时间：2013-04-14T09:40:26.500
> 
> 标签：vba, ms-word

我有一本 MS Word 格式的字典，我想从字典条目中的任何分段符中清除它，并且只保留分隔任何两个字典条目的分段符。这是字典的布局现在的样子：

[第一张图片http://img43.imageshack.us/img43/6476/snapshotpr.jpg](http://img43.imageshack.us/img43/6476/snapshotpr.jpg)

我需要一个宏或一个正则表达式，它首先从文档中删除所有分节符，这将产生这种布局：

[第二张图片http://img824.imageshack.us/img824/5219/snapshot1i.jpg](http://img824.imageshack.us/img824/5219/snapshot1i.jpg)

然后在下一步中仅在字典条目之前添加分段符，这意味着仅在粗体短语之前，然后是方括号中的音标，以获得此布局：

[第三张图片 http://img849.imageshack.us/img849/2003/snapshot2qf.jpg](http://img849.imageshack.us/img849/2003/snapshot2qf.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:52:22.263

我使用[这个网站](http://word.mvps.org/FAQs/General/UsingWildcards.htm)来帮助我处理段落标记。

同样，我用 4 次查找/替换手动记录了一个宏（使用了两个步骤来确保匹配后跟方括号的单词）。这是宏：

```
Sub Separator()
Selection.Find.ClearFormatting
Selection.Find.Replacement.ClearFormatting
With Selection.Find
    .Text = "^13"
    .Replacement.Text = ""
    .Forward = True
    .Wrap = wdFindContinue
    .Format = False
    .MatchCase = False
    .MatchWholeWord = False
    .MatchByte = False
    .MatchAllWordForms = False
    .MatchSoundsLike = False
    .MatchWildcards = True
    .MatchFuzzy = False
End With
Selection.Find.Execute Replace:=wdReplaceAll
Selection.Find.ClearFormatting
Selection.Find.Replacement.ClearFormatting
Selection.Find.Replacement.Font.Bold = True
With Selection.Find
    .Text = "\["
    .Replacement.Text = "^&"
    .Forward = True
    .Wrap = wdFindContinue
    .Format = True
    .MatchCase = False
    .MatchWholeWord = False
    .MatchByte = False
    .MatchAllWordForms = False
    .MatchSoundsLike = False
    .MatchFuzzy = False
    .MatchWildcards = True
End With
Selection.Find.Execute Replace:=wdReplaceAll
Selection.Find.ClearFormatting
Selection.Find.Font.Bold = True
Selection.Find.Replacement.ClearFormatting
With Selection.Find
    .Text = "[a-z\-]@ \["
    .Replacement.Text = "^p^&"
    .Forward = True
    .Wrap = wdFindContinue
    .Format = True
    .MatchCase = False
    .MatchWholeWord = False
    .MatchByte = False
    .MatchAllWordForms = False
    .MatchSoundsLike = False
    .MatchFuzzy = False
    .MatchWildcards = True
End With
Selection.Find.Execute Replace:=wdReplaceAll
Selection.Find.ClearFormatting
Selection.Find.Font.Bold = True
Selection.Find.Replacement.ClearFormatting
With Selection.Find.Replacement.Font
    .Bold = False
    .Italic = False
End With
With Selection.Find
    .Text = "\["
    .Replacement.Text = "["
    .Forward = True
    .Wrap = wdFindContinue
    .Format = True
    .MatchCase = False
    .MatchWholeWord = False
    .MatchByte = False
    .MatchAllWordForms = False
    .MatchSoundsLike = False
    .MatchFuzzy = False
    .MatchWildcards = True
End With
Selection.Find.Execute Replace:=wdReplaceAll 
```

结束子

让我知道是否有任何需要调整的地方，我会尝试更改它:)

编辑：为连字符添加了部分。

# mysql - 数以百万计的 MySQL 插入重复密钥更新 - 非常慢

> ID：15997675
> 
> 赞同：3
> 
> 时间：2013-04-14T09:40:52.967
> 
> 标签：mysql, sql

我有一个名为的表`research_words`，其中有几亿行。

每天我要添加数以千万计的新行，其中大约 5% 是全新的行，而 95% 是必须添加到该行中某些列的更新。我不知道哪个是哪个所以我使用：

```
INSERT INTO research_words
  (word1,word2,origyear,cat,numbooks,numpages,numwords)
VALUES
  (34272,268706,1914,1,1,1,1)
ON DUPLICATE KEY UPDATE
  numbooks=numbooks+1,numpages=numpages+1,numwords=numwords+1 
```

这是一个主键结束的 InnoDB 表`word1,word2,origyear,cat`。

我遇到的问题是我必须每天插入新行，并且每天插入行需要超过 24 小时！显然，插入当天的行不能超过一天。我必须找到一种方法来加快插入速度。

对于其他表，我使用 and 取得了巨大成功`ALTER TABLE ... DISABLE KEYS;`，`LOAD DATA INFILE`这让我可以在不到一个小时的时间内添加数十亿行。那太好了，除了不幸的是我正在增加此表中的列。我怀疑禁用这些键是否会有所帮助，因为肯定需要它们检查该行是否存在才能添加它。

我的脚本是用 PHP 编写的，但是当我添加行时，我会通过`exec`直接调用 MySQL 并将命令的文本文件传递给它，而不是使用 PHP 发送它们，因为这样更快。

有什么想法可以解决这里的速度问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-04T23:01:14.580

老问题，但也许同样值得回答。部分问题源于大量插入基本上一次运行一个，每个插入后都有唯一的索引更新。在这些情况下，更好的技术可能是选择*n*行插入并将它们放入临时表中，将它们连接到目标表，计算它们的新值（在 OP 的情况下 IFNULL(dest.numpages+1,1) 等.) 然后运行另外两个命令 - 插入字段为 1 的插入和更大的更新。更新不需要刷新索引，因此运行速度更快；插入不需要相同的 ON DUPLICATE KEY 逻辑。

# javascript - 搜索脚本不查找单个单词

> ID：15997676
> 
> 赞同：1
> 
> 时间：2013-04-14T09:40:56.870
> 
> 标签：javascript, search

我正在使用下面的脚本来搜索我的 HTML 网站。

我遇到的问题是，当我希望它在整个 XML 中独立搜索单词时，它会将单词作为一个短语一起搜索。即，如果有人输入“数字制作人”，它会搜索“数字制作人”，而不是单独搜索“数字”和“制作人”这两个词。

任何有关使其工作的帮助将不胜感激！

```
$(document).ready(function(){

//GLOBAL VAR
var XMLSource = $('#data').attr('xmlData');
var keyword = '';
var catType = '';
var pub = '';

var i = 0;

$("#searchButton").click(function() {
    keyword = $("input#term").val();
    catType = $("#category option:selected").val();

    //Reset any message
    var errMsg = '';
    pub = '';

    if ( keyword == '' ) { errMsg += 'Please Enter Search Term' + '\n'; }
    else if ( catType == 'none' ) { errMsg += 'Please Select Category' + '\n'; }
    else { searchThis(); }

    if ( errMsg != '' ) {
        pub += '<div class="error">' + '\n';
        pub += errMsg;
        pub += '</div>' + '\n';
    }

    //Show error
    $('#result').html( pub );

});

function searchThis() {             
    $.ajax({
        type: "GET",
        url: XMLSource,
        dataType: "xml",
        success: function(xml) { loadPublication (xml) }    
    });
}

function loadPublication (xmlData) {
    i = 0;
    var row;

    var searchExp = "";

    $(xmlData).find('Job').each(function(){

        var SearchTitle = $(this).find('SearchTitle').text();
        var Description = $(this).find('Description').text();
        var EmailTo = $(this).find('EmailTo').text();

        //Format the keyword expression
        var exp = new RegExp(keyword,"gi");

        //Check if there is a category selected; 
        //if not, use EmailTo column as a default search
        if ( catType == 'SearchTitle' ) { searchExp = SearchTitle.match(exp); }
        else if ( catType == 'Description' ) { searchExp = Description.match(exp); }
        else if ( catType == 'EmailTo' ) { searchExp = EmailTo.match(exp); }

        if ( searchExp != null ) {

            //Start building the result
            if ((i % 2) == 0) { row = 'even'; }
            else { row = 'odd'; }

            i++;                

            pub += '<tr class="row ' + row + '">' + '\n';
            pub += '<td valign="top" class="col1">' + SearchTitle + '</td>' + '\n'; 
            pub += '<td valign="top" class="col2">' + Description + '</td>' + '\n'; 
            pub += '<td valign="top" class="col3">' + EmailTo + '</td>' + '\n'; 
            pub += '</tr>' + '\n';
        }   
    });

    if ( i == 0 ) {
        pub += '<div class="error">' + '\n';
        pub += 'No Result Found' + '\n';    
        pub += '</div>' + '\n';

        //Populate the result
        $('#result').html( pub );
    }
    else {
        //Pass the result set
        showResult ( pub );
    }
}

function showResult (resultSet) {

    //Show the result
    pub = '<table id="grid" border="0">' + '\n';
    pub += '<thead><tr>' + '\n';
    pub += '<th class="col1">Job Title</th>' + '\n';
    pub += '<th class="col2">Job Description</th>' + '\n';
    pub += '<th class="col3">Apply To</th>' + '\n';
    pub += '</tr></thead>' + '\n';
    pub += '<tbody>' + '\n';

    pub += resultSet;

    pub += '</tbody>' + '\n';
    pub += '</table>' + '\n';

    //Populate 
    $('#result').html(pub)

    $('#grid').tablesorter(); 
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:06:38.377

由于您使用的是正则表达式，因此您可以用 OR 运算符替换原始搜索字符串中的所有空格`|`（<- 这是一个管道 [ shift + \ ]，以防难以分辨）。您可以在`keyword = keyword.replace(" ", "|");`之前添加该行`var exp = new RegExp(keyword,"gi");`

让我知道这是否适合您以及是否有意义:)

一些参考：
JavaScript 替换 - [http://www.w3schools.com/jsref/jsref_replace.asp](http://www.w3schools.com/jsref/jsref_replace.asp)
正则表达式运算符 - [http://introcs.cs.princeton.edu/java/72regular/](http://introcs.cs.princeton.edu/java/72regular/)

# android - Android 模拟器上的 Libgdx FreeType.Bitmap.getBuffer 中的 VM 中止

> ID：15997679
> 
> 赞同：0
> 
> 时间：2013-04-14T09:41:03.237
> 
> 标签：android, libgdx, freetype

我创建了一个简单的 Android 游戏，并试图在 Android 模拟器上运行它（我在模拟器上尝试 Android 2.2 和 Android 4），但它崩溃并显示“VM aborting”消息。它在真正的安卓设备上运行良好。这个错误是什么意思？我该如何解决？

我的日志：

```
04-14 09:15:59.891: D/dalvikvm(661): Trying to load lib  /data/data/net.me.justblockygame/lib/libgdx.so 0x405144e0
04-14 09:15:59.901: D/dalvikvm(661): Added shared lib/data/data/net.me.justblockygame/lib/libgdx.so 0x405144e0
04-14 09:15:59.911: D/dalvikvm(661): No JNI_OnLoad found in/data/data/net.me.justblockygame/lib/libgdx.so 0x405144e0, skipping init
04-14 09:16:00.081: I/AndroidInput(661): sensor listener setup
04-14 09:16:00.101: D/libEGL(661): egl.cfg not found, using default config
04-14 09:16:00.101: D/libEGL(661): loaded /system/lib/egl/libGLES_android.so
04-14 09:16:00.241: I/AndroidGraphics(661): OGL renderer: Android PixelFlinger 1.4
04-14 09:16:00.241: I/AndroidGraphics(661): OGL vendor: Android
04-14 09:16:00.251: I/AndroidGraphics(661): OGL version: OpenGL ES-CM 1.0
04-14 09:16:00.251: I/AndroidGraphics(661): OGL extensions: GL_OES_byte_coordinates GL_OES_fixed_point GL_OES_single_precision GL_OES_read_format GL_OES_compressed_paletted_texture GL_OES_draw_texture GL_OES_matrix_get GL_OES_query_matrix GL_OES_EGL_image GL_OES_compressed_ETC1_RGB8_texture GL_ARB_texture_compression GL_ARB_texture_non_power_of_two GL_ANDROID_user_clip_plane GL_ANDROID_vertex_buffer_object GL_ANDROID_generate_mipmap 
04-14 09:16:00.251: I/AndroidGraphics(661): framebuffer: (8, 8, 8, 8)
04-14 09:16:00.251: I/AndroidGraphics(661): depthbuffer: (16)
04-14 09:16:00.251: I/AndroidGraphics(661): stencilbuffer: (0)
04-14 09:16:00.251: I/AndroidGraphics(661): samples: (0)
04-14 09:16:00.251: I/AndroidGraphics(661): coverage sampling: (false)
04-14 09:16:00.321: I/AndroidGraphics(661): Managed meshes/app: { }
04-14 09:16:00.321: I/AndroidGraphics(661): Managed textures/app: { }
04-14 09:16:00.321: I/AndroidGraphics(661): Managed shaders/app: { }
04-14 09:16:00.402: I/AndroidGraphics(661): Managed buffers/app: { }
04-14 09:16:00.431: D/dalvikvm(661): Trying to load lib /data/data/net.me.justblockygame/lib/libgdx-freetype.so 0x405144e0
04-14 09:16:00.431: D/dalvikvm(661): Added shared lib /data/data/net.me.justblockygame/lib/libgdx-freetype.so 0x405144e0
04-14 09:16:00.431: D/dalvikvm(661): No JNI_OnLoad found in /data/data/net.me.justblockygame/lib/libgdx-freetype.so 0x405144e0, skipping init
04-14 09:16:00.431: D/szipinf(661): Initializing inflate state
04-14 09:16:00.431: D/szipinf(661): Initializing inflate state
04-14 09:16:00.441: D/szipinf(661): Initializing inflate state
04-14 09:16:00.441: D/szipinf(661): Initializing zlib to inflate
04-14 09:16:00.511: D/dalvikvm(661): GC_FOR_MALLOC freed 102K, 46% free 3416K/6215K, external 1625K/2137K, paused 25ms
04-14 09:16:00.531: I/dalvikvm-heap(661): Grow heap (frag case) to 9.004MB for 1622120-byte allocation
04-14 09:16:00.641: D/dalvikvm(661): GC_FOR_MALLOC freed 800K, 47% free 4200K/7815K, external 1625K/2137K, paused 42ms
04-14 09:16:00.792: D/dalvikvm(661): GC_CONCURRENT freed 822K, 46% free 4287K/7815K, external 1625K/2137K, paused 7ms+5ms
04-14 09:16:01.341: W/dalvikvm(661): JNI WARNING: invalid values for address (0x0) or capacity (0)
04-14 09:16:01.341: I/dalvikvm(661): "GLThread" prio=5 tid=11 NATIVE
04-14 09:16:01.341: I/dalvikvm(661):   | group="main" sCount=0 dsCount=0 obj=0x4052d4b8 self=0x2b3bd0
04-14 09:16:01.341: I/dalvikvm(661):   | sysTid=672 nice=0 sched=0/0 cgrp=default handle=2833672
04-14 09:16:01.341: I/dalvikvm(661):   | schedstat=( 472903169 451942168 165 )
04-14 09:16:01.341: I/dalvikvm(661):   at com.badlogic.gdx.graphics.g2d.freetype.FreeType$Bitmap.getBuffer(Native Method)
04-14 09:16:01.341: I/dalvikvm(661):   at com.badlogic.gdx.graphics.g2d.freetype.FreeType$Bitmap.getBuffer(FreeType.java:334)
04-14 09:16:01.341: I/dalvikvm(661):   at com.badlogic.gdx.graphics.g2d.freetype.FreeType$Bitmap.getPixmap(FreeType.java:342)
04-14 09:16:01.341: I/dalvikvm(661):   at com.badlogic.gdx.graphics.g2d.freetype.FreeTypeFontGenerator.generateData(FreeTypeFontGenerator.java:168)
04-14 09:16:01.341: I/dalvikvm(661):   at com.badlogic.gdx.graphics.g2d.freetype.FreeTypeFontGenerator.generateFont(FreeTypeFontGenerator.java:71)
04-14 09:16:01.341: I/dalvikvm(661):   at com.badlogic.gdx.graphics.g2d.freetype.FreeTypeFontGenerator.generateFont(FreeTypeFontGenerator.java:85)
04-14 09:16:01.341: I/dalvikvm(661):   at net.me.justblockygame.screens.MenuScreen.resize(MenuScreen.java:190)
04-14 09:16:01.351: I/dalvikvm(661):   at com.badlogic.gdx.Game.setScreen(Game.java:60)
04-14 09:16:01.351: I/dalvikvm(661):   at net.me.justblockygame.JustBlockyGame.setScreen(JustBlockyGame.java:74)
04-14 09:16:01.351: I/dalvikvm(661):   at net.me.justblockygame.JustBlockyGame.create(JustBlockyGame.java:60)
04-14 09:16:01.351: I/dalvikvm(661):   at com.badlogic.gdx.backends.android.AndroidGraphics.onSurfaceChanged(AndroidGraphics.java:292)
04-14 09:16:01.351: I/dalvikvm(661):   at com.badlogic.gdx.backends.android.surfaceview.GLSurfaceViewCupcake$GLThread.guardedRun(GLSurfaceViewCupcake.java:708)
04-14 09:16:01.351: I/dalvikvm(661):   at com.badlogic.gdx.backends.android.surfaceview.GLSurfaceViewCupcake$GLThread.run(GLSurfaceViewCupcake.java:646)
04-14 09:16:01.351: E/dalvikvm(661): VM aborting 
```

我在这个字符串中所做的一切：

```
TTfont = Gdx.files.internal("EASPORTS15.ttf");//"CALIBRI.TTF");
    generator = new FreeTypeFontGenerator(TTfont);

    mGame.font = mGame.generator.generateFont(width/20); // if i delete this string progamm runs, but it crushes then needed font. 
```

我创建字体生成器并尝试生成字体。我正在尝试两个字体文件，但它没有改变任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T13:23:03.320

您尝试旧的删除 gdx-freetype.jar 并下载 (gdx-freetype.jar) 文件[`https://code.google.com/p/libgdx/issues/detail?id=768#c32`](https://code.google.com/p/libgdx/issues/detail?id=768#c32)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T08:50:45.660

我解决它。我使用的是 libgdx 0.9.6，在 libgdx 0.9.8 中运行良好。

# ios - iOS 向 UINavigationBar 添加自定义视图，如 Viber 应用程序

> ID：15997684
> 
> 赞同：0
> 
> 时间：2013-04-14T09:42:15.390
> 
> 标签：ios, uinavigationcontroller, uinavigationbar

我想添加一个子视图（一个段控件），比如 Viber 应用程序主屏幕。我尝试设置 self.navigationItem.titleView = myCustomView，但它似乎不起作用我怎样才能实现我的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:47:48.370

如果您从 UINavigationController 内的 UIViewController 添加此代码，则此代码应该可以工作。所以你需要检查一些要点：

*   这个视图控制器是导航控制器的一部分吗？
*   导航栏是导航控制器的一部分吗？
*   你初始化`myCustomView`正确吗？当你这样做时它是非零的吗？
*   这个视图控制器在栈顶吗？正如文档中所写，您可以看到，根据您从应用程序中看到的一般情况，此 titleView*仅在 item 位于 stack 最顶部时使用*。

尝试 NSLog 以下内容来检查其中一些：

```
NSLog(@"self.navigationItem exists? %d", self.navigationItem != nil);
NSLog(@"customView exists? %d", customView != nil); 
```

# jquery - 在 jQuery 中使用 OO 概念，使用 function() 并创建结构数组

> ID：15997688
> 
> 赞同：2
> 
> 时间：2013-04-14T09:42:38.730
> 
> 标签：jquery, oop, object, multidimensional-array, structure

这是关于在 jQuery 中使用 OO 概念的。

我想在 jQuery 中创建一个结构数组，以便我可以将一个字符和一个整数保存在与数组元素相同的位置。

我想在数组的每个元素中存储'Y'和2，这样我就可以根据char的值是否为'Y'来改变整数的值。

我有以下代码

```
 var arrOfArr = new Array(3);
        for (var x = 0; x < arrOfArr.length; x++) {
            arrOfArr[x] = [new struct('Y', 0),new struct('Y', 0),new struct('Y', 0)];
        }

        function struct($user, $turnCount) {
            var user = $user;
            var turnCount = $turnCount;
        } 
```

现在，当我打电话时`alert(arrOfArr[0][0].turnCount)`，它正在给予`undefined`。但是，如果我定义`arrOfArr[0][0].turnCount = 0`并再次调用相同的警报，它会给我 0。

您能帮我理解如何在初始化时初始化结构数组吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T09:45:12.550

您在构造函数中分配给局部变量而不是实例属性。

试着写：

```
function struct($user, $turnCount) {
    this.user = $user;
    this.turnCount = $turnCount;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T09:45:56.883

```
var user 
```

和

```
var turnCount 
```

是结构范围的私有变量

尝试使用

```
this.user = $user;
this.turnCount = $turncount; 
```

# javascript - 使用自定义用户名 express.js 进行 Oauth 登录和注册

> ID：15997689
> 
> 赞同：0
> 
> 时间：2013-04-14T09:42:39.220
> 
> 标签：javascript, node.js, express, oauth-2.0, registration

我使用**node.js+express.js**堆栈，用户可以使用 twitter 和 facebook 重新注册/登录，也可以使用我的本地注册表单进行注册。我使用everyauth 来处理Twee 和Fb。

**问题是：** 是否有一个简单的解决方案来向第三方 oauth 服务注册用户，同时允许他们更改用户名？

示例：用户第一次使用 twitter 登录网站 -> 他在表单中添加了他的**CUSTOM USERNAME 和 email**。

当他下次登录时，我需要检查他的**CUSTOM USERNAME**而不是他的 Twitter 用户名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:04:15.847

对的，这是可能的。`node-oauth`在第一次登录尝试时，您使用该模块通过 twitter 对用户进行身份验证。这是一个[教程](http://codetheory.in/how-to-use-twitter-oauth-with-node-oauth-in-your-node-js-express-application/)。身份验证过程完成后，twitter 在其结果中发送一个唯一 ID，您将其与 oauth 令牌和机密（如果您愿意）一起存储在您的数据库中。还将这些数据保存在 Session 中，并显示一个表单，让用户选择他希望的用户名。使用它并存储在数据库中。

下次，当他再次尝试进行身份验证时，您只需检查存储在数据库中的唯一 ID（实际上不是用户名）。

# sublimetext2 - 如何为侧边栏上下文菜单中的命令分配 Sublime 键映射？

> ID：15997691
> 
> 赞同：0
> 
> 时间：2013-04-14T09:42:58.197
> 
> 标签：sublimetext2, sublimetext

在 Sublime 侧边栏中浏览文件时，我想通过快捷方式快速访问上下文菜单中可用的命令。例如删除文件、重命名文件/文件夹、新文件/文件夹。

（仅供参考：super+N*不是*创建新文件的理想解决方案 - 它不支持上下文，通常会选择不合适的默认位置）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:06:27.550

您可以通过将以下内容插入控制台来启用命令日志记录`sublime.log_commands(True)`。这将为您提供正在执行的命令和参数。然后，您可以使用适当的命令创建键绑定。我的猜测是命令将使用某种路径，因此您可能需要编写一个小插件来为各种命令注入正确的路径。

对于新文件的创建，您可能需要查看[AdvancedNewFile](https://github.com/skuroda/Sublime-AdvancedNewFile)。免责声明 - 我是该插件的当前维护者。在指定创建文件的位置方面，我试图使它比原来更灵活。虽然如果您决定使用它并且有功能请求，请随意创建一个关于它的问题。

# algorithm - 大输入有什么意义？

> ID：15997699
> 
> 赞同：6
> 
> 时间：2013-04-14T09:43:40.107
> 
> 标签：algorithm, input

在 Google Code Jam 中，如果你能够解决大输入的问题，它会给你解决小输入的 2 倍甚至 3 倍的分数。

但是，我不明白这一点。如果您制作一个可以处理任意正数案例的程序，它可以处理 10 和 10000 个输入案例。

因此，当您解决小输入的问题时，您应该也能够解决大输入的问题，而无需更改任何代码。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T09:51:51.090

> 我错过了什么吗？

是的 - 你错过了时间限制。通常，一种适用于小输入的算法（例如，`O(n^2)`算法甚至`O(2^N)`算法）在较大的输入上花费的时间太长，需要采用截然不同的方法。

例如，`O(N^2)`查找最长升序子序列的方法可以用单个数组的四行代码进行编码，并且它适用于数百个项目的输入。但是，这种方法对于数十万个项目会失败，需要一种使用树或二分搜索的高级方法。由于这种不同的方法需要更长的时间来编写代码，因此很自然地用更多的积分来奖励它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T12:40:53.450

Google Code Jam 小型和大型输入之间的区别主要不在于案例数量。实际上，大输入的案例可能比小输入**少。**但是大输入的情况更难。（这通常意味着更大，这解释了名称）如果您有两倍的输入数量，您可能需要两倍的时间才能找到解决方案，这可能不是问题。但是，如果输入的难度增加一倍，您可能需要两倍以上的时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T09:55:42.313

这两个输入在这些字段中可能不同：

1.  **问题输入限制** 例如，也许您可​​以使用具有复杂性的算法来解决问题的小输入`O(n^2)`，但您应该使用具有复杂性的更好算法来解决大输入`O(log n)`。

2.  **测试用例的数量** 这在选择算法时也很重要。

3.  **测试用例** 的难度通常较大的输入具有更难的测试用例，例如边界条件等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T09:55:46.977

你错了。编程语言使用特定的数据类型来存储数据。很多时候，数据类型将无法保存大数据值。因此，您需要修改代码以合并这些大数据值。

例如，如果您使用 C 打印斐波那契数，那么您有一个简单的代码，如下所示，

```
long int first,second,third;
first=1;
second=1;
ct=0;
while(ct < Limit)
{
   third=first + second;
   first = second;
   second = third;
   printf("\n%d",third);
   ct++;
} 
```

此代码是正确的，但如果斐波那契数 > 2 ^(32)（如果`Limit`非常大，则会发生），您将得到不正确的结果，因为`int`并且`long int`在 C 中是 4 个字节（32 位）。

因此，由于 C 中数据类型的不足，您的正确算法会失败。对于解决方案，您需要实现自己的数据结构。

# arrays - c# dllimport from c/c++ 时的字符串数组

> ID：15997702
> 
> 赞同：0
> 
> 时间：2013-04-14T09:43:49.130
> 
> 标签：arrays, string, pinvoke, marshalling, dllimport

[C/C++代码]

```
extern "C" __declspec(dllexport) int Analyze_input_text(char* input_text, char *ppArray){
   int size;
   // code...
   return size;
} 
```

[C#代码]

```
[DllImport("PP_TextAnalyzer.dll",CallingConvention = CallingConvention.Cdecl, CharSet=CharSet.Unicode)]
extern public static int Analyze_input_text(IntPtr data, [MarshalAs(UnmanagedType.LPArray, SizeConst = 100)]  string[] ppArray);

public int GetResultData(string input_text)
{
    IntPtr pStr = Marshal.StringToCoTaskMemUni(input_text);
    List<string> ppArray = new List<string>();
    int size = **Analyze_input_text(pStr,ppArray.ToArray());** //Array(List) is still null.
    return size;
} 
```

我不知道如何解决这个问题了......

有人帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:40:16.160

> CharSet=CharSet.Unicode

好吧，它不是。此函数采用 char*，一种 8 位字符类型。还不清楚 ppArray 如何成为字符串数组，即 char**。正如声明的那样，正确的 pinvoke 声明是：

```
[DllImport("PP_TextAnalyzer.dll", CallingConvention = CallingConvention.Cdecl, 
              CharSet=CharSet.Ansi)]
extern public static int Analyze_input_text(string data, string ppArray); 
```

如果您真的打算传递一个字符串数组，那么您必须将 C 函数修改为至少：

```
extern "C" __declspec(dllexport) 
int Analyze_input_text(char* input_text, char** ppArray, int arraySize) 
```

并在 C# 代码中将 ppArray 参数声明为 string[]。请注意，您确实应该在 C 代码中使用 Unicode，即 wchar_t*。试图“分析”从 Unicode 到本地 8 位系统代码页的文本从一开始就是一个有损的提议。当然，当您用 C# 编写此代码时，请确保该代码还不够快且损耗较小。.NET 对 Unicode 有很好的支持。

# php - MySQL 仅使用 MySQL 获取结果

> ID：15997703
> 
> 赞同：0
> 
> 时间：2013-04-14T09:43:58.120
> 
> 标签：php, mysql

假设我有一个如下图所示的 MySQL 表，并且我想找到任何`product_id`具有过滤器 2 和 5 的 's（因此在表中这将是 30 的 product_id），这在 MySQL 中是否可能？或者我是否必须在`filter_id`2 或 5 的位置获取产品 ID，然后在 PHP 中对其进行排序？

![sql表](https://i.stack.imgur.com/c5dRL.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T09:55:31.727

`SELECT product_id, COUNT(*) AS i FROM mytable WHERE filter_id IN (2,5) GROUP BY product_id HAVING i = 2;`

这将匹配包含任何所需 filter_id 的任何行，并将具有相同 product_id 的行组合在一起。名称 i 已被赋予一个列，该列给出了组中的行数。假设 product_id 到 filter_id 的每个组合都是唯一的，那么您知道任何具有两行的组都将匹配两个 filter_id，因此 HAVING 子句最终将过滤掉仅匹配其中一个 filter_id 的行。

# ios - 在 Titanium 测试应用程序中添加示例 Titanium iOS 模块失败，并显示“脚本错误 = 找不到模块：”

> ID：15997707
> 
> 赞同：0
> 
> 时间：2013-04-14T09:44:22.587
> 
> 标签：ios, appcelerator, titanium-mobile, appcelerator-mobile, titanium-modules

刚刚学习 Appcelerator。据我发现，我可以在 Appcelerator Application 中添加一个原生框架项目作为模块。

所以我从这个链接开始[http://docs.appcelerator.com/titanium/latest/#!/guide/iOS_Module_Development_Guide](http://docs.appcelerator.com/titanium/latest/#!/guide/iOS_Module_Development_Guide)这很简单，一切都很好，因为我按照教程进行操作，直到我尝试添加我的“测试”模块名为 com.example.titanium 的测试 Titanium 单窗口应用程序。

遵循了确切的步骤，一切似乎都很好，除了 Titanium 足够聪明，可以将 zip 文件模块提取到适当的模块文件夹中的部分，它毕竟不是那么聪明:)

但是确定并完成了任务，我可以在 TiApp Editor 中发现模块并将其添加到 Modules 部分（tiapp.xml）。

经过这么多的快乐，我终于挣扎了半天，直到我来到这里，最后的希望是找出为什么在尝试 require 成功添加到应用程序中的模块时找不到。

正如教程所建议的那样，我需要具有这两行代码的应用程序。

```
// After 
new Window().open(); 
// Added
var test = require('com.example.titanium'); 
Ti.API.info("module is => "+test);
// Tried before or whatever, nothing worked 
```

在同一个问题多次阅读之后，尝试了很多替代方法。为每个项目添加模块，全局，尝试将其添加到 $HOME/Library... 不起作用，甚至没有关于 Titanium 的文件夹。除了我创建它并尝试过之外，使用 build.py 构建的一切都很好，在遵循教程时没有发生错误。

我注意到虽然在构建过程中 Titanium Studio 没有考虑模块部分，但您可以在日志下方看到不需要 Titanium 模块，继续。

```
Please report bugs to http://jira.appcelerator.org/ 
[INFO] : Build type: development 
[INFO] : Building for target: simulator 
[INFO] : Building using iOS SDK: 6.1
[INFO] : Building for iOS iPhone Simulator: 6.1 
[INFO] : Building for device family: iphone 
[INFO] : Building for iOS 6.1; using 4.3 as minimum iOS version 
[INFO] : Minimum iOS version: 4.3 
[INFO] : Debugging disabled 
[INFO] : Initiating prepare phase 
[INFO] : Forcing rebuild: /Users/gtas/Documents/Titanium_Studio_Workspace/TestApplicationWithModule/build/iphone/build-manifest.json does not exist 
[INFO] : Forcing rebuild: debugger.plist does not exist 
[INFO] : No Titanium Modules required, continuing 
[INFO] : Performing full rebuild 
[INFO] : Copying Xcode iOS files 
[INFO] : Creating Xcode project directory: /Users/gtas/Documents/Titanium_Studio_Workspace/TestApplicationWithModule/build/iphone/TestApplicationWithModule.xcodeproj 
[INFO] : Writing Xcode project data file: Titanium.xcodeproj/project.pbxproj 
[INFO] : Writing Xcode project configuration: project.xcconfig 
[INFO] : Writing Xcode module configuration: module.xcconfig 
[INFO] : Creating symlinks for simulator build 
[INFO] : Forcing rebuild: ApplicationDefaults.m has changed since last build 
[INFO] : Writing properties to ApplicationDefaults.m 
[INFO] : Compiling localization files 
[INFO] : No module resources to copy 
[INFO] : No CommonJS modules to copy 
[INFO] : Checking for Splash Screen localization 
[INFO] : Invoking xcodebuild 
[INFO] : Finished building the application in 30s 23ms 
[INFO] : Running application in iOS Simulator 
[INFO] : Launching application in iOS Simulator 
[INFO] : Application started [ERROR] : Script Error = Couldn't find module: com.example.titanium. 
```

我的目标是将现有的 Objective-C iOS 本机框架添加到 Titanium 应用程序。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T04:56:12.303

听起来您的模块没有成功安装或安装不正确。从项目中删除模块后，请尝试以下步骤

1.  将您的**.zip 文件（已编译且无错误）**复制到下载文件夹
2.  打开**终端**
3.  将目录更改为下载，如下所示：`cd Downloads/`
4.  将模块安装到钛库如下

    `unzip -u -o com.example.titanium-iphone-1.2.6.zip -d ~/Library/Application\ Support/Titanium`

5.  转到**TiApp.xml**

6.  如图所示，将模块添加到您的项目中 ![在此处输入图像描述](https://i.stack.imgur.com/dDSmA.png)

7.  **清理你的项目**并运行它..

我在将 ios 模块安装到我的项目时使用了上述步骤，它对我来说非常适合.. 尝试上述步骤，我希望这能解决您的问题..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T11:06:59.017

您是手动添加模块还是通过菜单（帮助 -> 安装 Titanium 模块）添加模块？你应该更喜欢第二种方式。因此，请在您添加它们的任何地方（全局、项目等）删除所有手动添加的模块，因为多次安装（即使它们相同）可能会混淆构建管理。

现在将模块 - 使用菜单 - 添加到您的项目中。检查 tiapp.xml 是否一切正常。如果没有，请重新启动 Titanium Studio 并再次检查。

之后手动删除 build 文件夹并在 Titanium Studio 中执行 Clean & Build。然后再次运行该项目。

如果这无助于提供完整`build.log`的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:56:23.173

问题是项目的类型。我选择了单窗口应用程序 Titanium 项目类型。

我选择了一个选项卡式项目，它运行良好。

出于某种原因，我认为不好的项目类型之间存在显着差异。

任何人都知道为什么要启发我们。

# javascript - Rangy 替换父级

> ID：15997711
> 
> 赞同：1
> 
> 时间：2013-04-14T09:44:58.920
> 
> 标签：javascript, selection, rangy

我已经尝试过无数种使用 rangy 的方法，下面是我最接近的方法。在 chrome 和 IE8 中完美运行（就像我尝试过的许多其他版本一样），但 firefox 坚决拒绝玩球。

test() 函数应用于在选择页面上的一些粗体文本后单击的按钮。我想看到的是：

`<b>blah</b> or <strong>blah</strong>`

被替换为

`<span style='font-weight:bold'>blah</span>`

在 chrome 和 FF 中它可以工作，并且 console.log 行：

```
[WrappedRange("blah":0, "blah":4)] [object Text]
[WrappedRange("blah":0, "blah":4)] [object Text] 
```

但是在FF中：

```
[WrappedRange("blah":0, "blah":4)] [object Text]
[WrappedRange(<SPAN>[1]:0, <SPAN>[1]:1)] [object HTMLSpanElement] 
```

.

```
function test()
    {
    var sr=rangy.getSelection().getRangeAt(0);
    var oldParent=sameTextParent(sr);
    console.log(sr.inspect()+" "+sr.commonAncestorContainer);
    if(oldParent)
      {
      var newParent=document.createElement("span");
      newParent.style.fontWeight="bold";

      newParent.appendChild(sr.cloneContents());
      oldParent.parentNode.replaceChild(newParent,oldParent);

      rangy.getSelection().selectAllChildren(newParent);
      sr=rangy.getSelection().getRangeAt(0);
      console.log(sr.inspect()+" "+sr.commonAncestorContainer);
      }
    }
  function sameTextParent(r)
    {
    var s=r.startContainer,e=r.endContainer;
    if(s.nodeType!=3||e.nodeType!=3){console.log("not TEXT node!");return null}
    return (s.parentNode==e.parentNode)?s.parentNode:null;
    } 
```

如果有人可以向我展示我的方式的错误，以便它可以在 FF 中像在 IE8 和 chrome 中那样工作，我将永远感激不尽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T12:13:01.073

这是浏览器不一致。在我看来，这还不错，因为无论哪种情况，选择都是合理的，但这仍然是不一致的。最简单的解决方法是创建一个明确选择文本节点的范围，该范围在添加到所有主要浏览器的选择后将保持完好无损。而不是

```
rangy.getSelection().selectAllChildren(newParent); 
```

... 我建议

```
var newRange = rangy.createRange();
newRange.setStart(newParent.firstChild, 0);
var lastChild = newParent.lastChild;
newRange.setEnd(lastChild,
    lastChild.nodeType == 3 ? lastChild.length : lastChild.childNodes.length);
rangy.getSelection().setSingleRange(newRange); 
```

问题是 WebKit 在将范围添加到选择时会破坏范围。您创建的范围在所有浏览器中都是相同的，但在添加到选择时在某些浏览器中发生了更改，但不是 Firefox。

# objective-c - 替换 NSString 中的特定单词

> ID：15997712
> 
> 赞同：0
> 
> 时间：2013-04-14T09:45:00.157
> 
> 标签：objective-c, nsstring

获取和替换字符串中特定单词的最佳方法是什么？例如我有

```
NSString * currentString = @"one {two}, thing {thing} good"; 
```

现在我需要找到每个 {currentWord}

并为其应用功能

```
 [self replaceWord:currentWord] 
```

然后用函数的结果替换 currentWord

```
-(NSString*)replaceWord:(NSString*)currentWord; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T09:57:43.653

下面的示例展示了如何使用`NSRegularExpression`和`enumerateMatchesInString`完成任务。我刚刚用作`uppercaseString`替换单词的函数，但您也可以使用您的`replaceWord`方法：

**编辑：**如果替换的单词比原始单词更短或更长，我的答案的第一个版本无法正常工作（感谢 Fabian Kreiser 注意到这一点！）。现在它应该在所有情况下都能正常工作。

```
NSString *currentString = @"one {two}, thing {thing} good";

// Regular expression to find "word characters" enclosed by {...}:
NSRegularExpression *regex;
regex = [NSRegularExpression regularExpressionWithPattern:@"\\{(\\w+)\\}"
                                                  options:0
                                                    error:NULL];

NSMutableString *modifiedString = [currentString mutableCopy];
__block int offset = 0;
[regex enumerateMatchesInString:currentString
                        options:0
                          range:NSMakeRange(0, [currentString length])
                     usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) {
                         // range = location of the regex capture group "(\\w+)" in currentString:
                         NSRange range = [result rangeAtIndex:1];
                         // Adjust location for modifiedString:
                         range.location += offset;

                         // Get old word:
                         NSString *oldWord = [modifiedString substringWithRange:range];

                         // Compute new word:
                         // In your case, that would be
                         // NSString *newWord = [self replaceWord:oldWord];
                         NSString *newWord = [NSString stringWithFormat:@"--- %@ ---", [oldWord uppercaseString] ];

                         // Replace new word in modifiedString:
                         [modifiedString replaceCharactersInRange:range withString:newWord];
                         // Update offset:
                         offset += [newWord length] - [oldWord length];
                     }
 ];

NSLog(@"%@", modifiedString); 
```

*输出：*

```
一个 {--- TWO ---}，东西 {--- THING ---} 好
```

# xml - VLSI：寄存器自动化

> ID：15997714
> 
> 赞同：3
> 
> 时间：2013-04-14T09:45:18.830
> 
> 标签：xml, verilog, specman, ieee, vlsi

我正在寻找用于 VLSI 设计的寄存器自动化解决方案。

即，在一些文本文件或 XML 中描述 RTL 寄存器的一些标准方法，可以处理为 Verilog、VHDL、Specman、System Verilog、C 头文件和 HTML/PDF 文档。

有什么建议吗？

我找到了 IP-XACT，它是一个 IEEE 标准 ( [http://standards.ieee.org/getieee/1685/download/1685-2009.pdf](http://standards.ieee.org/getieee/1685/download/1685-2009.pdf) )

甚至发现 Cadence 支持 Specman 和 SV 脚本。

IP-XACT 常用吗？
对此有何看法？

对流程中其他所需工具有什么建议吗？（轻松编辑 XML 文件、Verilog、C 和文档生成）

当然，我可以自己编写这些脚本，但如果之前已经做过，重新发明轮子是愚蠢的……

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-02T15:15:01.587

如果您不害怕自己编写代码，那么[ipxact2systemverilog](https://github.com/oddball/ipxact2systemverilog)工具可以完成这项工作。

它将 IP-XACT 寄存器定义转换为[VHDL](https://github.com/oddball/ipxact2systemverilog/blob/master/example/output/example_vhd_pkg.vhd)、 Verilog ……以及 HTML 或 PDF 格式的文档（带有[RestructuredText](http://docutils.sourceforge.net/rst.html)）。

它是用 Python 编写的，并且很容易扩展或修改。

关于编写 XML。在[Eclipse](https://www.eclipse.org/)中使用默认的 XML 插件非常简单。您可以在文本视图和一种表格视图之间切换。它理解 XSD 模式，因此它通过向您展示下一个 XML 元素的可能性来帮助您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T08:51:21.080

如今，IP-XACT 格式通常用于传输寄存器信息。大多数需要配置的商业 IP 都带有 IP-XACT 规范，包括寄存器。但是，对于输入寄存器信息，它不是很有用（XML）。

在输入端（商业）工具通常提供一个 GUI 来输入 XML 数据（如[Duolog](http://www.duolog.com)中的按位）。大多数工具包括其他格式的输入过滤器，如基于表的、SystemRDL、YAML 等。

在输出端，不同的工具支持各种寄存器视图。HDL 不太常见，因为这通常受公司保密规则的约束。我认为 Cadence 有一个免费脚本，可以从 IP-XACT 生成 SystemVerilog (UVM) 寄存器。

我不能给出具体的建议。如果您可以花一些时间，请查看开源的[MIX](https://github.com/blutsvente/MIX)（由我管理）。通过尝试让示例运行来接近它。

希望这能让你开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-01T06:43:12.587

IDesignSpec(Agnisys) 是市场上最好的解决方案。您可以将 IP-XACT 转换为（System rdl、system verilog、vhdl、system c，以及 docx、excel 和 html、pdf）。这是最好的，这个工具支持windows/linux/mac。

谢谢， 阿夫德赫什

# android - Android 如何更改 TimePicker 主题？

> ID：15997715
> 
> 赞同：2
> 
> 时间：2013-04-14T09:45:23.610
> 
> 标签：android, themes, customization, android-theme, timepicker

目前为我的应用程序使用 Theme.Sherlock 主题。是否可以更改 TimePicker 小部件的主题。我想将蓝色分隔线更改为绿色，将白色文本更改为黑色。

我还没有找到任何可用的东西（不幸的是，android-holo-colors.com 工具中缺少 TimePicker），希望你有一个好主意。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-08T06:49:14.210

由于 Android SDK 不允许您修改 timepicker 中的元素。你需要一种方法来进行黑客攻击。对于文本颜色，您需要更改主题。这是我的片段中的一个小例子。重点是“R.style.Picker_Black”，我将主题设置为“Theme.Holo.Light”，以便在时间选择器中显示“黑色”文本颜色。

```
 @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    final Context contextThemeWrapper = new ContextThemeWrapper(getActivity(), R.style.Picker_Black);
    LayoutInflater localInflater = inflater.cloneInContext(contextThemeWrapper);
    View v = localInflater.inflate(R.layout.fragment_booking, container, false);
    return v;
  } 
```

在“style.xml”中定义样式

```
 <style name="Picker.Black" parent="android:Theme.Holo.Light">
    <item name="android:editTextStyle">@style/Widget.EditText.White</item>
  </style> 
```

对于分频器：

```
public class CustomTimePicker extends TimePicker {
  public CustomTimePicker(Context context) {
    super(context);
    init();
  }

  public CustomTimePicker(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
  }

  public CustomTimePicker(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init();
  }

  private void init() {
    removeAllDividers(this);
  }

  private void removeAllDividers(ViewGroup picker) {
    for (int i = 0; i < picker.getChildCount(); i++) {
      View view = picker.getChildAt(i);
      if (view instanceof NumberPicker) {
        try {
          Field field = NumberPicker.class.getDeclaredField("mSelectionDivider");
          field.setAccessible(true);
          field.set(view, null);
        } catch (Exception e) {
        }
      } else if (view instanceof ViewGroup) {
        removeAllDividers((ViewGroup) view);
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-24T10:53:35.480

虽然我对这个答案有点晚了，但对于那些将来会想知道的人来说。添加`gradle`：

```
compile 'com.github.rey5137:material:1.2.2' 
```

这是我见过的[最好的图书馆。](https://github.com/rey5137/material/wiki)用它。它包含您需要的所有信息。

# php - 查询背后的实时搜索引擎逻辑

> ID：15997717
> 
> 赞同：0
> 
> 时间：2013-04-14T09:45:27.967
> 
> 标签：php, html, mysql, arrays, logic

我在使用 AJAX 和 PHP 创建多字段实时搜索引擎时遇到问题。

到目前为止，不需要搜索多个字段，所以我有一个简单的查询，它只适用于一个字段。

由于使用`onkeyup`功能进行实时搜索，我发现了一些问题。我需要解释的第一个问题：

表的结构非常简单：`zipcode | city`

例如，有人输入`12345`；当然，这将是邮政编码。但是如果有人输入`12345 hometown`，那么第一个关键字是邮政编码，第二个是城市怎么办？

关键字将通过使用进行拆分，`preg_split('/[\s]+/', $search_term)`因此我收到一个包含将要搜索的单个关键字的数组。在上述情况下，它将是：`key[0] => 12345`和`key[1] => hometown`。

我使用的查询是这样的：

```
$where = "";

$search_term = preg_split('/[\s]+/', $search_term); //splits the whole string into single keywords
$total_search_terms = count($search_term); //counts the array-keys from $search_term

foreach ($search_term as $key=>$single_term) {

        $where .= "`zipcode` LIKE '$single_term%' OR `city` LIKE '$single_term%' ";

        if ($key != ($total_search_terms - 1)){ //adds AND to the query in case in case of a non empty array-key 
            $where .= " AND ";
        }

}

$query = $db->query("SELECT COUNT(*) FROM table WHERE $where");
... 
```

好的，到目前为止一切顺利。现在的问题是关键字可以一次又一次地匹配每个字段。

再举一个例子：

如果从上面输入`12345 hometown`，则表示`key[0] => 12345` 可以匹配字段`zipcode`OR `city`。此条件等于`key[1] => hometown`，甚至可以匹配字段`zipcode`OR `city`。因此，即使以其他方式输入：也`hometown 12345`意味着相同。

这是我遇到的第一个问题。

我正在寻找一种逻辑来构建查询。所以在进入的情况下，`12345 hometown`我想要这样的东西：

当`key[0] => 12345`匹配字段`zipcode`不检查`key[1] => hometown`是否在`zipcode`OR中匹配，`city`因为`key[0]`匹配已经在`zipcode`所以它`key[1]`需要是非常合乎逻辑的`city`。

**更新**

好的，说我的第二个问题，我想让你看看他的回答，`david strachan` 他提到当 city 包含多个字符串时会引起问题。假设搜索字符串类似于：

```
12345 New York 
```

关键是：

```
key[0] => 12345, key[1] => New, key[2] => York 
```

好的，现在的问题是我可以检查其中一个键是否包含整数，如果字符串长度正好为 5，我知道它将是邮政编码。

```
key[0] => 12345 //if ( stringlen(key[0|) === 5) === true  && is_int(key[0]) === true) {zipcode} 
```

到目前为止一切都很好，但真正的问题是城市字符串背后的逻辑。我的第一个想法是我可以说所有不包含整数的键都必须是城市，这样我就可以将它们转换为一个键。

```
key[1] => New, key[2] => York //if ( !is_int(key[1|) === true && !is_int(key[2|) === true)  {$create_one_key = array_fill_keys(key[1], key[1]+key[2]);} 
```

好的，但是如果我以后想添加街道名称怎么办？我不知道如何区分和测试街道名称，甚至城市名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:49:01.710

另一种方法是使用[**JQuery Autocomplete**](http://jqueryui.com/autocomplete/)来搜索 MySQL 数据库。以下代码使用 PDO。

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script type="text/javascript">
jQuery(document).ready(function(){
    $('#zipsearch').autocomplete({source:'suggest.php', minLength:2});
});
</script>
<style type="text/css">
    li.ui-menu-item { font-size:10px}
</style>
</head>
<body>
<h2>jQuery UI Autocomplete - With MySQL  </h2>
<form onsubmit="return false;">
    Search:
    <input id="zipsearch" type="text" size ="60"/>
</form> 
```

**建议.php**

```
require("dbinfo.php");//db connection strings
// if the 'term' variable is not sent with the request, exit
if ( !isset($_REQUEST['term']) )
    exit;
$term = $_REQUEST['term'];
 if (is_numeric($term)){
    $query = "SELECT * from ziptest WHERE zip LIKE ? OR address LIKE ? LIMIT 0,10";
  }else{
    $query = "SELECT * from ziptest WHERE city LIKE ? OR state LIKE ? LIMIT 0,10";  
  }
$term.="%";  

// connect to the database  
try {  
    $dbh = new PDO("mysql:host=$host;dbname=$database", $username, $password);  
    $dbh->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );  
  // Prepare statement
    $stmt = $dbh->prepare($query);
    // Assign parameters
    $stmt->bindParam(1,$term);
    $stmt->bindParam(2,$term);
    // setting the fetch mode  
    $stmt->setFetchMode(PDO::FETCH_ASSOC); 
    $stmt->execute();  
    $data = array();
        while($row = $stmt->fetch()) {  
            $data[] = array(
                'label' => $row['address'] .', '. $row['city'] .', '. $row['state'] .', '.$row['zip'] ,
                'value' => "ID ".$row['id'] .': '.$row['address'] .', '. $row['city'] .', '. $row['state'] .', '.$row['zip']
            );
        }
    echo json_encode($data);
}  
catch(PDOException $e) {  
    echo "I'm sorry I'm afraid you can't do that.". $e->getMessage() ;// Remove or modify after testing 
    file_put_contents('PDOErrors.txt',date('[Y-m-d H:i:s]'). $e->getMessage()."\r\n", FILE_APPEND);  
}  
// close the connection
$dbh = null; 
```

[**演示**](http://gleniffersystems.net46.net/jquery/autosuggest.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T16:05:40.197

通过添加 0检查`$search_term[0]`是 string(city) 还是 int(zipcode) 然后相应地格式化查询。

```
$search_term = '1234 paisley';
$search_term = preg_split('/[\s]+/', $search_term); //splits the whole string into single keywords
$total_search_terms = count($search_term); //counts the array-keys from $search_term
$test = $search_term[0]+0;//If string returns 0
if($total_search_terms == 1){
    if ($test == 0 ){
        $where = "WHERE `city` LIKE `%$search_term[0]%`";
         }else{
        $where = "WHERE `zipcode` LIKE `%$search_term[0]%` ";
        }   
    }else{
    if ($test == 0 ){
        $where = "WHERE `zipcode` LIKE `%$search_term[1]%` AND `city` LIKE `%$search_term[0]%`";
        }else{
        $where = "WHERE `zipcode` LIKE `%$search_term[0]%` AND `city` LIKE `%$search_term[1]%`";
        }   
}   
 $query = "SELECT COUNT(*) FROM table $where";
echo $query; 
```

一个问题是你如何对待纽约。我会告诉你如何解决这个问题。

**编辑**

纽约`$total_search_terms > 2`

# html - 在 Qt 中设置 HTML 表格的宽度

> ID：15997718
> 
> 赞同：2
> 
> 时间：2013-04-14T09:45:29.903
> 
> 标签：html, qt, printing, html-table, qt4

我不知道出了什么问题。我正在使用 Qt 4.8.4（clang，gcc）。我想打印使用 HTML 构建的自定义表格。我发现**我无法在表格中获得文字扭曲，并且无法限制表格宽度**。

为了更快地理解这个问题，你可以重播这样的行为：创建 Qt 项目`MainWindow`，在其构造函数中编写下一个代码：

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    QString tablesHtml("<table border=\"1\" width=\"200\">"
                   "<tr><td>"
                   "NOT LONG TEXT, 200px"
                   "</td></tr>"
                   "</table>"

                   "<table border=\"1\" width=\"300\">"
                   "<tr><td>"
                   "NOT LONG TEXT, 300px"
                   "</td></tr>"
                   "</table>"

                   "<table border=\"1\" width=\"300\">"
                   "<tr><td>"
                   "VEEERY LOOOONG TEEEEXT LONG LONG"
                   "VEEERY LOOOONG TEEEEXT LONG LONG"
                   "WHY NOT 300px, WHY?!"
                   "</td></tr>"
                   "</table>");
    doc.setHtml(tablesHtml);
    QPrinter prn;
    prn.setPageSize(QPrinter::A4);
    prn.setPageMargins(30, 20, 15, 20, QPrinter::Millimeter);
    QPrintPreviewDialog previewDialog(&prn);
    QObject::connect( &previewDialog, SIGNAL( paintRequested (QPrinter*) ),
                      this, SLOT ( onPrintRequested(QPrinter*) ));
    previewDialog.exec();
} 
```

并添加`public slots: void onPrintRequested(QPrinter*p);`：

```
void MainWindow::onPrintRequested(QPrinter *p)
{
    QPainter pnt(p);
    doc.drawContents(&pnt);
} 
```

结果我总是得到： ![打印问题](https://i.stack.imgur.com/GFfiI.png)

**编辑：**

1.  这是有关 Qt 如何处理 html 和 css[支持的 HTML 子集](http://qt-project.org/doc/qt-4.8/richtext-html-subset.html)的信息。
2.  可以省略 WebKit 来解决这个问题吗？

# javascript - 如何用 JS 获取标记的文本

> ID：15997720
> 
> 赞同：3
> 
> 时间：2013-04-14T09:45:40.470
> 
> 标签：javascript, jquery, html, css

我想自己实现`make bold`和`put underline`功能。为此，我需要获取这样标记的文本：

![在此处输入图像描述](https://i.stack.imgur.com/45VNA.png)

我怎样才能用 JavaScript 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T09:48:25.420

```
var start = element.selectionStart;
var end = element.selectionEnd;
var sel = element.value.substring(start, end); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T10:21:50.763

基于[这个](https://stackoverflow.com/questions/5351455/make-selected-text-bold-using-javascript)和[这个](https://stackoverflow.com/questions/4479151/javascript-how-to-un-surroundcontents-range)问题，[这个小提琴](http://jsfiddle.net/8D6as/2/)演示展示了如何在选定的文本上实现加粗和切换粗体功能。

使所选文本变为粗体的 js 函数是：

```
function makeBold() {
    var selection = window.getSelection();
    if (selection.rangeCount) {
        var range = selection.getRangeAt(0).cloneRange();
        var newNode = document.createElement("b");
        range.surroundContents(newNode);
        selection.removeAllRanges();
        selection.addRange(range);
    }
} 
```

# java - 如何从某个点向前设置文本颜色

> ID：15997727
> 
> 赞同：1
> 
> 时间：2013-04-14T09:46:47.643
> 
> 标签：java, swing, netbeans, colors, jtextpane

我正在构建一个小型对话代理，其中的文本如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/9XTT1.jpg)

我想将系统的文本设置为始终为红色。文本全部放置在 JTextPane 中。

我怎样才能做到这一点？我尝试过执行以下操作：

`agentTextPane.setForeground(Color.red);`添加系统的文本后，然后切换回黑色，但这会更改`JTextPane`.

这是添加系统文本的方式：

```
//'output' is a stringBuilder
output.append("\nSystem: ").append(tempOutput).append("\n");
agentTextPane.setText(output.toString()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T10:00:31.850

[如此处](https://stackoverflow.com/a/15669307/230513)所示，您可以定义代表所需样式的属性集。例如，

```
StyledDocument doc = (StyledDocument) jtp.getDocument();
SimpleAttributeSet system = new SimpleAttributeSet();
StyleConstants.setFontFamily(system, "Serif");
StyleConstants.setForeground(system, Color.red);
doc.insertString(doc.getLength(), "...", system); 
```

[样式可以是渐进式的，如此处](https://stackoverflow.com/a/15600689/230513)所示。

![图片](https://i.stack.imgur.com/lLjkJ.png)

有关更多示例，请参阅[*文本组件功能*](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T10:02:13.797

您可能希望使用 HTML 标记来根据颜色格式化您的字符串。以下参考资料可能有用。[将 JTextPane 设置为内容类型 HTML 并使用字符串构建器](https://stackoverflow.com/questions/9071389/setting-jtextpane-to-content-type-html-and-using-string-builders)

```
 output.append("<font color=\"red\">");
 output.append("\nSystem: ").append(tempOutput).append("\n");
 output.append("</font>"); 
```

# php - 使用 echo 在 php 中输出 javascript

> ID：15997729
> 
> 赞同：0
> 
> 时间：2013-04-14T09:46:57.193
> 
> 标签：php, javascript

有人可以告诉我为什么这不起作用：

```
<script>
<?
echo 'oaktree.addItem("test1", branch1, "")';
echo 'oaktree.addItem("test2", branch1, "")';
?>
</script> 
```

当我将它从 PHP 中取出时，它会像预期的那样工作，但是在执行 echo in 时什么也没做……谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T09:49:16.317

您在`;`功能后面缺少：

```
<script>
<?
echo 'oaktree.addItem("test1", branch1, "");';
echo 'oaktree.addItem("test2", branch1, "");';
?>
</script> 
```

`echo`不会自动包含新行。以上将回显为：

```
oaktree.addItem("test1", branch1, "");oaktree.addItem("test1", branch1, ""); 
```

这就是为什么`;`它必须工作的原因。您也可以自己添加一个新行，但`;`默认添加一个更好的方法。

通过查看页面的源代码或打开控制台，您可能已经发现了这个错误。

# twitter-bootstrap - Bootstrap popover 出现了，虽然它应该被隐藏

> ID：15997730
> 
> 赞同：1
> 
> 时间：2013-04-14T09:47:05.537
> 
> 标签：twitter-bootstrap, onclick, click, hide, popover

嘿，我想做的是：

我有不同的按钮用于浏览器游戏的级别选择。每个按钮代表一个级别。用户选择一个级别后，他必须单击开始按钮才能进入所选级别。`var level`获取特定级别按钮的值。例如，用户选择一级，所以`var level = 1`；

当他点击开始按钮而不选择关卡时，会出现一个弹出窗口，内容为“先选择关卡”。要通过单击任意位置或单击级别按钮来隐藏弹出框，我使用以下代码。在开始时`var level = undefined`，只有这样才能调用弹出框。用户选择后，级别`var level`不再未定义，并且无法再次调用弹出框。

到目前为止，一切都很好。

弹出框通过单击开始按钮而不选择级别出现，并通过选择级别消失。但是，当用户现在单击“开始”按钮时，弹出框再次出现。这怎么可能？

```
$('#start').bind("click touchstart", function(e) {
    if (level==undefined) {
        $('#start').popover();
        isVisible = true;
        clickAway = false;
        e.preventDefault();
    }
});

$(document).bind("click touchstart", function() {
    if(isVisible && clickAway) {
        $('#start').popover('hide');
        isVisible = false;
        clickAway = false;
    } else {
        clickAway = true;
    }
}); 
```

```
<button type="submit" class="btn btn-success btn-large" rel="popover" data-placement="left" data-content="Choose level first!" value="" id="start" name="start">START!</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T21:44:14.850

一个快速的解决方法是更改`$('#start').popover('hide');`​​为 `$('#start').popover('destroy');` 也添加`data-trigger="manual"`到按钮

下面是我实现这个场景的方式，

```
 $(document).bind("click touchstart", function(f) {
  if(f.target.id!="start"){
   if(isVisible)
   {
     $('#start').popover('destroy');
     isVisible = false;
   }
  }  
   else if (level==undefined && !isVisible) {       
    $('#start').popover('show');
    isVisible =true;
  }  
  }); 
```

# php - PHP 复杂爆炸

> ID：15997731
> 
> 赞同：0
> 
> 时间：2013-04-14T09:47:09.307
> 
> 标签：php, arrays, explode

这是一个字符串..

```
$string = "foo1 : bar1, foo2: bar2, foo3: bar3"; 
```

`,`使用分隔符爆炸

```
$exploded = (",", $string); 
```

现在`$exploded`数组包含：

`foo1 : bar1`
`foo2 : bar2`
`foo3 : bar3`

现在我需要`foo1`输入一个`array['key']`and `bar1`in`array['value']`

如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T09:50:09.053

您需要创建另一个循环来遍历`"foo:bar"`字符串数组并分解它们：

```
$exploded = explode(",", $input);  
$output = array();       //Array to put the results in
foreach($exploded as $item) {  //Go through "fooX : barX" pairs
  $item = explode(" : ", $item); //create ["fooX", "barX"]
  $output[$item[0]] = $item[1];  //$output["fooX"] = "barX";
}
print_R($output); 
```

请注意，如果相同的键在输入字符串中出现多次 - 它们将相互覆盖，并且结果中仅存在最后一个值。

# java - 如何在 win 7 64 位不使用任何 DSN 的情况下将我的 Java SE 程序连接到 MS Access DB

> ID：15997732
> 
> 赞同：1
> 
> 时间：2013-04-14T09:47:10.930
> 
> 标签：java, ms-access, windows-7, 64-bit

我已经尝试了很多并访问了许多论坛，包括 Stack Overflow，但未能找到我的问题的正确答案。

条件很简单：我不想使用 DSN，以便软件可以在任何机器上运行。但是，这不适用于 Windows 7 64 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:45:06.697

您可能可以在 connectionstrings.com 找到所需的连接[字符串](http://connectionstrings.com/)。这是一个很好的起点：

[Access 2007 的连接字符串](http://connectionstrings.com/access-2007)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-27T11:33:59.753

当前，Microsoft 没有任何可用于 Office 产品的 64 位 ODBC 驱动程序。

但是，只要您要连接的应用程序是 32 位的，您就可以使用 32 位 ODBC 驱动程序来创建 DSN。要获得 32 位 ODBC 驱动程序，必须使用 32 位数据源管理员。如果您使用的是 64 位操作系统，则必须直接启动 32 位数据源管理员。该文件应位于以下路径：

c:\windows\sysWOW64\odbcad32.exe

希望这可以帮助！

# php - 网络资源拒绝任何价值货币

> ID：15997735
> 
> 赞同：0
> 
> 时间：2013-04-14T09:47:40.320
> 
> 标签：php, payment-gateway

我正在尝试将网络资源支付处理器集成到我的网络应用程序中，当然我需要测试交易。

我的结帐表格：

```
 <form  method="post" action="https://orderpagetest.ic3.com/hop/ProcessOrder.do">
       <input type="text" name="billTo_city" value="Mountain View"><br>
       <input type="text" name="billTo_country" value="us"><br>
       <input type="text" name="billTo_firstName" value="John"><br>
       <input type="text" name="billTo_lastName" value="Doe"><br>
       <input type="text" name="billTo_postalCode" value="94043"><br>
       <input type="text" name="billTo_state" value="CA"><br>
       <input type="text" name="billingStreetAddress1" value="1295 Charleston Rd."><br>
       <input type="text" name="creditCardNumber" value="4111111111111111"><br>
       <input type="text" name="creditCardType" value="001"><br>
       <input type="text" name="card_expirationMonth" value="07"><br>
       <input type="text" name="card_expirationYear" value="2013"><br>
       <input type="text" name="currency" value="USD"><br>
       <input type="text" name="merchantID" value="alljobs"><br>
       <input type="text" name="amount" value="1"><br>
       <input type="text" name="cardVerificationNumber" value="1234"><br>
       <input type="text" name="orderPage_environment" value="test"><br>
       <input type="text" name="" value="Authorization"><br>
       <input type="text" name="paymentType" value="card"><br>
       <input type="submit" name="submit" value="Buy Now">
    </form> 
```

我填写了所有必填字段并通过“静默订单发布方法”将表单发送到调试页面网络资源

所有字段验证成功，但**货币**字段验证错误。我不明白为什么以及我做错了什么？在我的虚拟终端测试业务柜中->设置货币设置为美元

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:17:06.237

我会尝试 3 件事：

1.  大多数货币都需要指定两位小数的价格
2.  将表格提交至：（
    `https://orderpagetest.ic3.com/hop/orderform.jsp` 根据：[http](http://apps.cybersource.com/library/documentation/dev_guides/HOP_UG/Hosted_Order_Page_UG.pdf) ://apps.cybersource.com/library/documentation/dev_guides/HOP_UG/Hosted_Order_Page_UG.pdf ）

3.  以下两个字段对于“HOP”是必需的，将它们添加到请求中：

    orderPage_signaturePublic
    orderPage_timestamp

查看上面链接中第 105 页的 POST 示例！

# objective-c - 无法在 Xcode 控制台中打印出非 ascii 文本

> ID：15997745
> 
> 赞同：0
> 
> 时间：2013-04-14T09:49:03.230
> 
> 标签：objective-c, xcode

不知道有没有人帮我。我在 plist 中创建了一些数组。它的内容是中国人写的。它通过 NSLog 在控制台打印出奇怪的文字。

在控制台中：

```
address = "\U65b0\U754c\U9752\U8863\U9577\U767c\U90a8\U9577\U767c\U5546\U5834232\U865f\U8216"; 
```

我在网上搜索过，但无法弄清楚。有人知道修复吗？感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-09T10:09:51.313

我尝试记录一个包含阿拉伯文本的数组，第一次给了我和它给你一样的结果。

```
NSArray *array = @[@"تليفونات محمولة",@"تليفونات محمولة",@"تليفونات محمولة",@"تليفونات محمولة",@"تليفونات محمولة"];

NSLog(@"%@",array); 
```

结果是这样的：

```
 (
"\U062a\U0644\U064a\U0641\U0648\U0646\U0627\U062a \U0645\U062d\U0645\U0648\U0644\U0629",
"\U062a\U0644\U064a\U0641\U0648\U0646\U0627\U062a \U0645\U062d\U0645\U0648\U0644\U0629",
"\U062a\U0644\U064a\U0641\U0648\U0646\U0627\U062a \U0645\U062d\U0645\U0648\U0644\U0629",
"\U062a\U0644\U064a\U0641\U0648\U0646\U0627\U062a \U0645\U062d\U0645\U0648\U0644\U0629",
"\U062a\U0644\U064a\U0641\U0648\U0646\U0627\U062a \U0645\U062d\U0645\U0648\U0644\U0629"
) 
```

但是当尝试这个时，它打印出正确的字符串。

```
 NSLog(NSLocalizedString([array componentsJoinedByString:@" , "],nil)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-14T10:40:41.213

你可以使用这个 python 脚本来解码字符

```
>>> def printUtf8(str):
...     str = str.lower()
...     exec 'print u"'+str+'"'
...
>>> printUtf8("\U65b0\U754c\U9752\U8863\U9577\U767c\U90a8\U9577\U767c\U5546\U5834232\U865f\U8216")
新界青衣長發邨長發商場232號舖 
```

# c - 如何阻止程序读取“Enter”作为输入？

> ID：15997749
> 
> 赞同：3
> 
> 时间：2013-04-14T09:49:48.813
> 
> 标签：c, while-loop, ascii, break, enter

大家好，我刚刚完成了我的程序，该程序读取任何单个字符并打印该字符的 ASCII 值，但是当它循环时，它开始继续读取输入以及其他字符。

我的另一个问题是我希望我的程序在读取“#”时停止并将其打印为我似乎无法执行的无效代码如下所示：

```
#include <stdio.h>
int main() {
  char input;
  while (input != '#') {
    printf("\nEnter character: \n");
    scanf("%c*c", & input);
    printf("The ASCII value is: %d", (int) input);
    if (input == '#') break;
  }
  printf("\n# is invalid");
  return (0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T09:57:23.013

你试图用

```
scanf("%c*c", & input); 
```

但你忘记了`%`在压制中，

```
scanf("%c%*c", & input); 
```

应该做你想做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T11:19:14.603

您可以在第一个格式说明符之后添加一个空格。它会导致程序读取任何空格（包括 Enter）但不存储它。

```
scanf("%c ", & input); 
```

这在下页中有清楚的解释。请参阅“参数”部分并​​转到标题为“空白字符”的段落。

[http://www.cplusplus.com/reference/cstdio/scanf/](http://www.cplusplus.com/reference/cstdio/scanf/)

**更正**我的意思是，如果我们在以下情况下在两个格式说明符之间使用空格，那么它会“吃掉” Enter 或其他空格。我的错，在我的上述陈述中，它会继续要求更多的空格因为我们在所有格式说明符之后使用空格

```
scanf("%c %d", &input1,&input2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-27T07:19:08.287

`fflush(stdin);`scanf 后试试

# visual-studio-2010 - 点云库和 Visual Studio 2010

> ID：15997753
> 
> 赞同：1
> 
> 时间：2013-04-14T09:50:39.957
> 
> 标签：visual-studio-2010, compilation, external, point-cloud-library

我一直在尝试为点云编译一些简单的代码，我相信我已经包含了相关的 h 文件和库，但 Visual Studio 似乎只是给了我这个：

![在此处输入图像描述](https://i.stack.imgur.com/YvZwm.png)

我的包含目录（在 VC++ 目录属性页中）：

> C:\Program Files %28x86%29\OpenNI\Include\Win32;C:\Program Files %28x86%29\OpenNI\Include;C:\Program Files (x86)\PCL 1.6.0\3rdParty\VTK\include\ vtk-5.8;C:\Program Files %28x86%29\PCL 1.6.0\3rdParty\Qhull\include;C:\Program Files %28x86%29\PCL 1.6.0\3rdParty\FLANN\include;C:\Program文件 %28x86%29\PCL 1.6.0\3rdParty\Eigen\include;C:\Program Files %28x86%29\PCL 1.6.0\3rdParty\Boost\include;C:\Program Files %28x86%29\PCL 1.6 .0\include\pcl-1.6;$(IncludePath);$(WindowsSdkDir)\lib;C:\Program Files (x86)\PCL 1.6.0\lib

库目录（VC++ 目录属性页）：

> C:\Program Files %28x86%29\OpenNI\Lib;$(LibraryPath)

附加包含目录（来自 C/C++ 属性页）：

> C:\Program Files %28x86%29\OpenNI\Lib;$(LibraryPath)

其他库依赖项（来自链接器属性页）：

> C:\Program Files (x86)\PCL 1.6.0\3rdParty\FLANN\lib;C:\Program Files %28x86%29\OpenNI\Lib;C:\Program Files (x86)\PCL 1.6.0\3rdParty\ VTK\lib\vtk-5.8;C:\Program Files (x86)\PCL 1.6.0\3rdParty\Qhull\lib;C:\Program Files (x86)\PCL 1.6.0\lib;$(WindowsSdkDir)\lib ;C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\lib;C:\Program Files (x86)\PCL 1.6.0\3rdParty\Boost\lib;C:\Program Files (x86)\OpenNI\库

我一定错过了某个地方的包含。我认为它与 OpenNI 库有关，因为错误提到了 OpenNI。

有任何想法吗？

我不想使用 CMake 作为 VS2010 的替代品。

# iphone - 与新应用版本同步更改应用内购买名称

> ID：15997755
> 
> 赞同：3
> 
> 时间：2013-04-14T09:50:57.253
> 
> 标签：iphone, in-app-purchase, app-store-connect

是否可以与新应用版本同步更改应用内购买名称？我对我的应用内购买进行了更改，我希望它的新显示名称在新应用版本出现在 iTunes 上的同时出现在 iTunes 上。我无法从 iTunes Connect 开发者指南中找到它。当我在 iTunes Connect 上更改应用内购买显示名称时，它会进入等待审核状态，但我现在可以看到将其与我的新应用版本发布联系起来的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-22T15:24:26.657

这是两种不同的审查过程。如果您上传您的应用程序，您应该能够在`In-App-Purchase` `Display Name`没有审查过程的情况下进行更新。

如果您的应用程序已经上传并且您正在将应用程序更新到更高版本，则它`Display Name`与您的更改无关`In-App-Purchase`。我仍在寻找`Display Name`. 如果我能找到一些东西，我会更新我的帖子。

[以下是有关Apple 文档内部的](http://bit.ly/stackInAppPurchase)一些信息`In-App-Purchases`

# sql-server - 如何从数据库中选择记录，其中一个数字与我提供的数字最接近？

> ID：15997758
> 
> 赞同：1
> 
> 时间：2013-04-14T09:51:14.767
> 
> 标签：sql-server, linq, tsql

我不是数据库专家，甚至不知道如何解决这个问题。我敢肯定，对于了解 TSQL 并欢迎一些见解的人来说，这很简单。

我有一个包含邮政编码和 Eastings 和 Northings 的数据库。例子：

```
Postcode  Easting  Northing
---------------------------
HR74DW    365601   254668
B129DB    407863   284797 
```

我想提供东距和北距值并返回最近的单个记录（即匹配的邮政编码）。所以，像：

```
SELECT TOP 1 Postcode 
FROM [PostcodeAddresses].[dbo].[FullPostcodeEastingNorthing] 
WHERE Easting (IS CLOSEST TO) 417940 
  AND Northing (IS CLOSEST TO) 284824. 
```

我正在使用 .NET MVC 4，所以如果有人知道如何使用 LINQ 来做到这一点，它也会非常方便（但我仍然会对 TSQL 感到高兴。

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:05:50.533

尝试这个：

```
WITH CTE
AS
(
    SELECT
       postcode, 
       ABS(Easting  - 417940) AS MinEasting,
       ABS(Northing - 284824) AS MinNorthing
    FROM FullPostcodeEastingNorthing
)
SELECT postcode
FROM FullPostcodeEastingNorthing
WHERE ABS(Easting - 417940 ) = (SELECT MIN(MinEasting)
                                FROM CTE)
  AND ABS(Northing - 284824) = (SELECT MIN(MinNorthing)
                                FROM CTE); 
```

在这里查看它的实际效果：

*   [**SQL 文件演示**](http://www.sqlfiddle.com/#!3/f97aa/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:11:22.587

我正在使用@w0lf 的建议，因为它运行良好，而且数据库不是很大，查询的数量也很少——所以完全扫描的小延迟是可以接受的。

这是我用作示例的邮政编码：

```
SELECT [Postcode], [Easting], [Northing]
  FROM [PostcodeAddresses].[dbo].[FullPostcodeEastingNorthing]
  WHERE Postcode = 'GU147NL' 
```

```
邮政编码 东向 北向
--------------------------
GU147NL 486871 156016
```

这是我使用@w0lf 的建议返回邮政编码的方法。您可以看到东向和北向与上面的不同，但它们很接近并且它确实返回了正确的邮政编码。

```
SELECT TOP 1 Postcode 
FROM [PostcodeAddresses].[dbo].[FullPostcodeEastingNorthing] 
ORDER BY (easting-486860)*(easting-486860) 
+ (northing-156007)*(northing-156007) 
ASC 
```

```
邮政编码
--------
GU147NL
```

谢谢@w0lf！

# c - 在 gcc 内联 x86_64 程序集中约束 r10 寄存器

> ID：15997759
> 
> 赞同：9
> 
> 时间：2013-04-14T09:51:27.293
> 
> 标签：c, gcc, x86-64, system-calls, inline-assembly

我正在尝试编写一个非常轻量级的 libc 替换库，以便更好地理解内核 - 应用程序接口。第一个任务显然是让一些系统调用包装器到位。我已经成功地让 1 到 3 个参数包装器工作，但我正在努力处理 4 个参数变量。这是我的出发点：

```
long _syscall4(long type, long a1, long a2, long a3, long a4)
{
    long ret;
    asm
    (
        "syscall"
        : "=a"(ret)    // return value
        : "a"(type), "D"(a1), "S"(a2), "d"(a3), "r10"(a4)
        : "c", "r11", "memory"  // some syscalls read or write memory
                   // the syscall insn instruction itself destroys RCX and R11
    );
    return ret;
} 
```

（编者注：这是安全且可用的，并且是一个很好的例子，在应用答案的方式来处理之后`r10`。MUSL libc 有一些类似的宏。）

编译器给我以下错误：

```
error: matching constraint references invalid operand number 
```

我的 _syscall3 函数工作正常，但不使用 r10 或有一个clobber 列表。

（编者注：没有clobber列表是不安全的：您需要告诉编译器RCX和R11被覆盖，并且“内存”应该在可能读取或写入内存的系统调用之前同步。如果如果您想为特定的系统调用编写特定的包装器，您可以有选择地省略`"memory"`clobbers，或者根据哪些参数是该系统调用的指针来使用虚拟内存操作数。

如果这个`_syscall4`函数不能内联，寄存器和`"memory"`clobbers实际上不会造成任何问题，但你*应该*让它们能够内联；与调用非内联包装函数相比，内联此系统调用在调用站点需要的代码更少。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T23:37:12.353

寄存器没有限制：`%r8`... `%15`但是，最近的（如 gcc-4.x 中）应该接受：

```
register long r10 asm("r10") = a4; 
```

然后使用输入约束：`"r" (r10)`为您的 asm 语句。
[https://gcc.gnu.org/onlinedocs/gcc/Local-Register-Variables.html](https://gcc.gnu.org/onlinedocs/gcc/Local-Register-Variables.html)

* * *

请注意，强制`"r"`为 Extended asm 选择约束是GCC 为 register-asm locals 保证的*唯一行为。*喜欢`register void *rsp asm("rsp");`和`void *stack_pointer = rsp;`做的事情有时会起作用，但*不能*保证也不推荐。

* * *

您将希望您的系统调用包装器`asm`语句成为`volatile`并拥有一个`"memory"`clobber，除非您使用虚拟内存输入或输出为特定系统调用编写特定包装器以了解哪些参数是指针（根据[我如何指示内存可以使用 *pointed* 由内联 ASM 参数指向的？](https://stackoverflow.com/questions/56432259/how-can-i-indicate-that-the-memory-pointed-to-by-an-inline-asm-argument-may-be)）

它需要`volatile`因为doing`write(1, buf, 16)`应该打印两次缓冲区，而不仅仅是[CSE](https://en.wikipedia.org/wiki/Common_subexpression_elimination)返回值！系统调用通常*不是*其输入的纯函数，因此您需要`volatile`.

（某些特定的系统调用包装器`getpid`可能是非易失性的，因为它们每次都会返回相同的东西，除非您也使用 fork。但是`getpid`如果通过 VDSO 完成则效率更高，因此不必在如果您在 Linux 上，则放在首位，因此，如果您正在为其制作自定义包装器，`getpid`并且`clock_gettime`您可能一开始就不想要`syscall`。请参阅[Linux 系统调用权威指南](https://blog.packagecloud.io/eng/2016/04/05/the-definitive-guide-to-linux-system-calls/)）

之所以`"memory"`需要clobber，是因为寄存器中的指针*并不*意味着指向的内存也是输入或输出。仅由`write`系统调用读取的缓冲区存储不需要*作为*死存储进行优化。或者对于，编译器最好在内存未映射*之前*`munmap`完成任何加载/存储。一些系统调用不接受任何指针输入，也不需要，但通用包装器必须做出最坏情况的假设。*`"memory"`*

 *`register ... asm("r10")`通常不需要或破坏，*但*系统调用包装器需要。`asm volatile``"memory"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:03:56.373

大概是因为没有指令对寄存器有特定要求`r10`，gcc 人员没有为它创建约束（假设约束主要用于机器描述）。如果您坚持使用内联汇编，我认为您不能比使用通用`"r"`（或`"m"`）约束并进入`r10`自己（并将其添加到clobber 列表）做得更好。*

# emacs - 在 Emacs 中如何从当前行删除到文件末尾？

> ID：15997762
> 
> 赞同：33
> 
> 时间：2013-04-14T09:51:45.647
> 
> 标签：emacs, keyboard-shortcuts

我应该在emacs中输入什么来删除从光标到文件末尾的文件？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-14T11:03:35.070

从光标删除到文件末尾并不是我经常做的足以绑定到使其值得绑定到单个键的事情。我会这样做：

*   `C-space`( `set-mark`)
*   `M->`( `end-of-buffer`)
*   `C-w`( `kill-region`)

只是因为它结合了常见的动作，因此很容易记住。

可能有一个使用较少键的序列，但我更喜欢简单的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-28T04:45:50.707

*方法一*

```
Cntrl+space    
end (on keyboard)    
delete (on keyboard) 
```

*方法二*

```
Enter (on keyboard) 
```

这会将行的其余部分从光标推到新行。

```
Cntrl + Shift + Backspace 
```

这是在 Emacs 中删除整行的快捷方式。

# ssh - 编辑远程文件如何工作？

> ID：15997770
> 
> 赞同：0
> 
> 时间：2013-04-14T09:53:30.047
> 
> 标签：ssh, ftp, remote-access

我想知道如何在不将其下载到本地计算机的情况下编辑远程文件实际上是如何工作的。在使用谷歌并阅读一些帖子后，我了解到这可以使用 FTP 或 SSH 协议。

我假设由一个特殊的客户端应用程序来建立一个到服务器的 TCP/IP 套接字连接，但是完成后会发生什么？

谁需要实现该协议，另一个打开远程文件的应用程序如何获得它需要的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T10:19:29.137

通过 SSH 工作的 SFTP 协议（​​不要与 FTP/FTPS 混合使用）允许对远程文件进行按块访问。它几乎可以与任何 SSH 服务器（允许使用 sftp 子系统）一起使用。

例如，以这种方式运行[SFTP Net Drive](http://www.eldos.com/sftp-net-drive/ "SFTP 网盘") 应用程序，它将远程服务器的文件系统安装为 Windows 驱动器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T10:28:24.587

如果您想进一步调查，有关[FTP](http://en.wikipedia.org/wiki/File_Transfer_Protocol)和[SFTP](http://en.wikipedia.org/wiki/SSH_File_Transfer_Protocol)的 Wikipedia 文章似乎相当不错，并提供了 RFC 的链接。

> 谁需要实现该协议，另一个打开远程文件的应用程序如何获得它需要的数据？

你没有说你的程序将用哪种语言编写，但肯定有适合大多数人使用的 ftp 和 sftp 库。

如果你的程序在 Linux / OS X / 其他 BSD 上运行，你甚至可以调用`ftp`/`sftp`程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T19:45:57.997

The application would download the whole file locally, open it, make changes and upload the whole file again. A classic example is WinSCP where you can 'edit' a remote file. The application (WinSCP) knows which protocol to use (FTP/FTPS/SFTP etc) and knows the parameters to be used (e.g. remote directory to upload the file to, username, password, port etc). Even if a file is large the whole file must be downloaded in order to me modified.

There appears to be no way of doing partial file updates in FTP, SFTP. HTTP or SCP. Infact there is no well known open source protocol to do this. If there is an implementation out there it has to proprietary.

# javascript - 我的 Apache 版本似乎导致 THREE.js 在 chrome 中呈现的方式与在 Firefox 中呈现的方式不同

> ID：15997776
> 
> 赞同：1
> 
> 时间：2013-04-14T09:54:21.597
> 
> 标签：javascript, apache, google-chrome, three.js, redhat

在我的智慧结束试图弄清楚为什么会发生这种情况：

![在此处输入图像描述](https://i.stack.imgur.com/KDoXh.png)

运行红色帽子。由 :yum install httpd 安装的 Apache（所以最新的 [??] 版本 2013-04-13）绝对没有更改从 three.js 站点下载的原始 -r57 文件（three.js 站点在两个浏览器上呈现相同的文件没有任何失真 - 所以它必须是我的服务器，但我不知道为什么......）。我已经在 Apache 上 [重新启动/重新安装/更改了 conf] 并重新启动了服务器，但我无法让 chrome 正确呈现。

```
[/home]>/etc/init.d/httpd help
Usage: **/usr/sbin/httpd** [-D name] [-d directory] [-f file]
                       [-C "directive"] [-c "directive"]
                       [-k start|restart|graceful|stop]
                       [-v] [-V] [-h] [-l] [-L] [-t] [-S]
  ...
[/home]>/usr/sbin/httpd -v
Server version: Apache/2.0.52
Server built:   May 24 2006 11:45:10
[/home]>uname -srvmpio
Linux 2.6.9-42.7.ELsmp #1 SMP Tue Sep 5 18:29:39 EDT 2006 i686 i686 i386 GNU/Linux
[/home] 
```

**问题：为什么我的服务器上的 Chrome 会出现失真？**- 它通常不会发生 - 我无法让它正确渲染 - 有人知道为什么会这样吗？或者可以建议我可以尝试的东西？

还是没看到问题？

*   从 mrdoob.github.io/three.js 自己下载 zip 文件
*   将其保存在您的桌面上
*   解压
*   转到示例文件夹
*   直接在chrome浏览器中打开css3d_periodictable.html
*   点击“螺旋”
*   当使用 chrome 浏览器查看时，它将呈现为圆形螺旋
    （就像在[Three.js 网站](http://mrdoob.github.io/three.js/examples/css3d_periodictable.html)上使用 chrome 浏览器查看时呈现为圆形螺旋一样）

*   在我的服务器上，当使用 firefox 浏览器查看时，它通常呈现为圆形螺旋线

*   但是在我的服务器上（出于某种莫名其妙的原因），当使用 chrome 浏览器查看时，它呈现为椭圆形螺旋

*   请参阅上面**图片**的链接（在标题下方的第一行），该链接将您带到左侧以 chrome 显示文件的图片 - 带有扭曲的异常椭圆形 - 和右侧的 firefox 与文件按预期显示。

*   **我试图找出可能导致这种失真的原因，以及为什么当我从服务器访问文件时它似乎只出现在 chrome 中**。

**已解决**：将操作系统升级到 redhat 5.5——有点像“用铲子攻击蛋奶酥”的解决方案——但它奏效了。

# java - 从终端读取而无需等待 Java 的“换行符”

> ID：15997780
> 
> 赞同：3
> 
> 时间：2013-04-14T09:54:43.360
> 
> 标签：java, terminal, user-input

我正在尝试读取用户输入的每个字符，而无需等待“换行符”。

此代码不起作用，因为 AFAIK 扫描仪在将输入发送到应用程序之前等待换行符

```
Scanner s = new Scanner(System.in);
if(s.hasNext()){
    char c = s.next().charAt(0);
} 
```

我也尝试过使用 BufferedReader：

```
System.out.println("Input something: ");
BufferedReader b = new BufferedReader(new InputStreamReader(System.in));
while(!b.ready()){
    try {
        Thread.sleep(100);
    } catch (Exception e) {
    }
}
System.out.println("Now it's ready, i'm reading the first char");
char c = (char)b.read(); 
```

但输出是：

```
Input something:
> abcde
Now it's ready, i'm reading the first char 
```

所以它总是在等待换行符。

有什么方法可以在不等待 Java 换行符的情况下读取用户输入？

谢谢，任何帮助将不胜感激

# javascript - 在播放器之外显示字幕

> ID：15997784
> 
> 赞同：5
> 
> 时间：2013-04-14T09:55:19.520
> 
> 标签：javascript, jquery, jwplayer

我希望在**jwplayer**之外显示字幕。我们可以在玩家皮肤中单独划分并为字幕设置单独的位置吗？我不希望字幕显示在视频中，但我们希望字幕在播放器外部的单独位置。可以用 JWplayer 做吗？（或任何玩家）

我将使用 JWplayer 来执行此操作，因此请告诉答案，记住这很紧急。如果我正在使用 JWplayer，如果有任何代码或逻辑或任何东西，我将非常感激，但任何帮助都会非常明显。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T14:36:19.897

[从此页面](http://www.storiesinflight.com/js_videosub/)上的示例开始。字幕被添加到它们自己的 div 中，其类为`.videosubbar`. 因此，您可以简单地为此添加自己的样式。

因此，对于上面的示例，我只添加了简单的旧样式以将字幕框移出视频帧。但我不得不使用`!important`覆盖从 javascript 文件添加的内联样式。

例如

```
.videosubbar{
   bottom:-100px!important;
   // etc. 
} 
```

或者，您也可以编辑插件的源代码以首先调整字幕的添加位置。

[从这个 JS 文件开始。](http://www.storiesinflight.com/js_videosub/includes/videosub-0.9.9.js)

定位笔从第 92 - 104 行添加，如下所示。

```
$VIDEOSUB(subcontainer).css({
   'position': 'absolute',
   'bottom': '34px',
   'width': (videowidth-50)+'px',
   'padding': '0 25px 0 25px',
   'textAlign': 'center',
   'backgroundColor': 'transparent',
   'color': '#ffffff',
   'fontFamily': 'Helvetica, Arial, sans-serif',
   'fontSize': fontsize+'px',
   'fontWeight': 'bold',
   'textShadow': '#000000 1px 1px 0px'
}); 
```

用你发给我的另一个链接，方法和上面一样，但是在不同的插件之间，字幕容器的id和class会明显不同。在另一个示例中，容器的类是`.mejs-captions-layer`.

我建议使用 fireBug 或其他开发人员工具来检查字幕容器并根据需要自由移动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T06:01:58.740

嗨，感谢 Ethan 和 vletech，他们帮助我解决了我添加代码的问题，以便对社区有所帮助

我只是使用覆盖内联 CSS`!important`

为了更好地理解，我添加了标题部门的部门和类名

/*身份证*/

```
#player_caption div{width:100% !important;text-align:center !important;left:0 !important;} 
```

/*班级*/

```
.jwcaptions{    
position:absolute;bottom:0px;border:solid 2px #333;
-moz-border-radius: 15px;opacity:0.7;width:100% !important;bottom:0%
} 
```

你可以拥有自己的 css 我只是 css 的初学者，所以如果上面的代码中断或者你无法在你希望他们看到的地方看到标题......别担心；）使用 firebug 或检查元素你可以轻松找到 jwcaptions 的正确位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-01T09:05:56.000

最近我找到了更好的方法，我们可以使用 jquery webvtt 来解析 webvtt 文件并将其显示在自己的 div 中。（[jQuery Webvtt](https://github.com/brainbits/jquery-webvtt)）

```
jwplayer('video_id').onTime(function(){
                var play_position = jwplayer("video_id").getPosition();
                var hr = parseInt(( play_position / 3600 ) % 24);
                hr = checkTime(hr);
                var min = parseInt(( play_position / 60 ) % 60);
                min = checkTime(min);
                var sec = parseInt((play_position % 60));
                sec = checkTime(sec);
                var hrTotal = parseInt(( videoLength_s / 3600 ) % 24);
                hrTotal = checkTime(hrTotal);
                var minTotal = parseInt(( videoLength_s / 60 ) % 60);
                minTotal = checkTime(minTotal);
                var secTotal = parseInt((videoLength_s % 60));
                secTotal = checkTime(secTotal);
                $('#ci_current_position_'+id).text(hr+':'+min+':'+sec);
                   $('#ci_video_time_'+id).text(hrTotal+':'+minTotal+':'+secTotal);
var position = hr+":"+min+":"+sec+".000";
$('#ci_caption_'+id).html($("#en_"+id).webVtt(position));
}) 
```

# php - 在php中复制图像问题

> ID：15997789
> 
> 赞同：1
> 
> 时间：2013-04-14T09:56:20.100
> 
> 标签：php, copy

我想将一些图像从一个文件夹复制到另一个文件夹，我不想将它们全部复制。这是我的代码，但它给了我一个问题`failed to open stream`

```
$image = "a.jpg";
$srcfile='uploads/listings/my_from/'.$image;
$dstfile='uploads/listings/my_to/images/';

copy($srcfile, $dstfile); 
```

我错过了什么？我可以做任何其他事情，以便我可以将选定的图像复制到目的地而不删除它吗？

注意：这两个文件夹都在同一个服务器和同一个项目上。我应该卷曲吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:59:32.383

如果您确定该文件`a.jpg`存在，那么这应该可以

```
$srcfile='uploads/listings/my_from/'.$image;
$dstfile='uploads/listings/my_to/images/'.$image;

copy($srcfile, $dstfile); 
```

注意：必须指定目标文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T10:05:01.050

你应该检查它是否真的存在。

尝试：

```
$image = "a.jpg";
$srcfile='uploads/listings/my_from/'. $image;
$dstfile='uploads/listings/my_to/images/' . $image;

if(!file_exists($srcfile) {
    throw new \Exception("File does not exist!");
}

copy($srcfile, $dstfile); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T10:07:26.907

进行一些错误检查也可能会有所帮助，但您只需将完整的图像路径添加到您的`$dstfile`变量中：

```
<?php

$image = "a.jpg";
$srcfile='uploads/listings/my_from/'.$image;
$dstfile='uploads/listings/my_to/images/'.$image;

echo 'Attempting to copy "'.$srcfile.'" to "'.$dstfile.'"<br />';

if(file_exists($srcfile)) {
    if(file_exists($dstfile)) {
        echo 'Cannot copy file, destination file already exists';
    } else {
        if(is_writable(dirname($dstfile))) {
            if(copy($srcfile,$dstfile)) {
                echo 'File successfully copied';
            } else {
                echo 'File could not be copied';
            }
        } else {
            echo 'Destination is not writable';
        }
    }
} else {
    echo 'Cannot copy file, source file doesnt exist';
}
?> 
```

# javascript - onClick 将项目添加到数组

> ID：15997790
> 
> 赞同：0
> 
> 时间：2013-04-14T09:56:34.727
> 
> 标签：javascript

我有一个产品名称列表`PRODUCT_NUMBER`。我需要做的是当用户输入一个代码时，我需要检查它是否是一个数字，并检查它是否与它进行比较以 `PRODUCT_NUMBER`确保它是一个有效的数字，然后如果是的话将它添加到`orderProductCodeArr`数组中。我只是不确定如何开始这个过程。

```
var code = 0; 
var orderProductCodeArr = 0;
var quantityArr = 0

confirm('Do you want to add product to cart');

 orderProductCodeArr =  parseFloat(prompt('Enter input: '));

for(i=0; i<PRODUCT_NUMBER; i++){ }

PRODUCT_NUMBER = new Array('Salad Server Set', 'Party Serviette Holder', 
                'Tea Set', 'Mixing Bowl Set', 'Knife Block Set', 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:05:30.017

要根据用户输入提取数组中的项目，请使用以下代码：

```
var orderProductCode =  parseInt(prompt('Enter input: '), 10);
if (isNaN(orderProductCode)) {
    alert("input is not a valid number");
}
else {
    if (orderProductCode < 0 || orderProductCode >= PRODUCT_NUMBER.length) {
        alert("code does not match any item");
    }
    else {
        var item = PRODUCT_NUMBER[orderProductCode];
        alert("item is: " + item);
    }
} 
```

# perl - 将文件从一个文件夹复制到另一个文件夹，但代码不起作用

> ID：15997791
> 
> 赞同：-7
> 
> 时间：2013-04-14T09:56:37.207
> 
> 标签：perl

请检查以下代码：

```
#!/usr/bin/perl -w
use Cwd;        
use warnings;    
use Net::FTP;    
use File::Copy;    
use File::Path;    
use Time::Local;     
use File::Basename;    
use strict;    
my $directory = "/media/Songs/Perl/test";    
my $path = "/media/Songs/Perl/test_sort";    
opendir(DIR,$directory);    
my @files = readdir(DIR);    
closedir(DIR);    
foreach my $t (@files)
{    
    copy($t,$path); //copying files
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T10:14:22.293

这是我对您的代码的修订。

```
#!/usr/bin/env perl

use strict;
use warnings;
use File::Copy;

my $source_dir = "/media/Songs/Perl/test";
my $target_dir = "/media/Songs/Perl/test_sort";

opendir(my $DIR, $source_dir) || die "can't opendir $source_dir: $!";  
my @files = readdir($DIR);

foreach my $t (@files)
{
   if(-f "$source_dir/$t" ) {
      #Check with -f only for files (no directories)
      copy "$source_dir/$t", "$target_dir/$t";
   }
}

closedir($DIR); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-14T10:20:23.073

该`readdir`功能需要一些后期处理才能有用。它返回该目录中的所有条目，包括`.`（此目录）和`..`父目录。返回的字符串不是来自您的 $PWD 的完整路径。

1.  过滤掉不需要的项目：正则表达式匹配父链接和自身链接

    ```
    my @files = grep !/\A\.\.?\z/, readdir DIR; 
    ```

    或者只选择简单的`-f`文件（没有目录，也没有管道、套接字等有趣的东西……）

    ```
    my @files = grep -f "$directory/$_", readdir DIR; 
    ```

2.  制作绝对路径：

    真的，应该使用`Path::Class`or `File::Spec`。但是，如果您很小心，并且不关心可移植性，那么

    ```
    for my $file (@files) {
      my $source = "$directory/$file";
      ...;
    } 
    ```

    可能已经足够好了。

该`copy`函数采用两个*文件名*，而不是文件和目标目录。你应该执行错误检查：

```
for my $file (@files) {
  my $source = "$directory/$file";
  my $target = "$path/$file";
  copy $source => $target or warn "Copy of $file failed: $!";
} 
```

# session - JSF 2.0 中的用户会话检查过滤器

> ID：15997792
> 
> 赞同：-2
> 
> 时间：2013-04-14T09:56:37.620
> 
> 标签：session, jsf-2, servlet-filters

这就是我解决问题的方法。:) 我要保护的页面位于 cPanel 文件夹中。这是我的 LoginAdmin bean。

```
@ManagedBean(name = "loginAdmin")
@SessionScoped
public class LoginAdmin implements Serializable {
    private static final long serialVersionUID = 1L;
    private String username;
    private String password;
    boolean loggedIn;

    public boolean isLoggedIn() {
        return loggedIn;
    }
    public void setLoggedIn(boolean loggedIn) {
        this.loggedIn = loggedIn;
    }
    public String getUsername() {
        return username;
    }
    public void setUsername(String username) {
        this.username = username;
    }
    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }
    public void login(ActionEvent actionEvent) {
        FacesMessage msg = null;
        if (username.equals("Administrator") && password.equals("store1")) {
            try {
                msg = new FacesMessage(FacesMessage.SEVERITY_INFO, "Welcome",
                        username);
                FacesContext.getCurrentInstance().getExternalContext()
                        .redirect("/eHUB/cPanel/index.xhtml");
                loggedIn = true;
            } catch (IOException e) {
                e.printStackTrace();
            }
        } else {
            msg = new FacesMessage(FacesMessage.SEVERITY_WARN, "Login Error",
                    "Invalid User Name or Password");
            loggedIn = false;
        }
        FacesContext.getCurrentInstance().addMessage(null, msg);
    }
    public void logout(ActionEvent actionEvent) throws IOException {
        ((HttpSession) FacesContext.getCurrentInstance().getExternalContext()
             .getSession(false)).invalidate();
        loggedIn = false;
        FacesContext.getCurrentInstance().getExternalContext().redirect("login.xhtml");
    }
} 
```

这是我的过滤器代码：

```
@WebFilter("/cPanel/*")
public class RestrictFilter implements Filter {
    private FilterConfig fc;

    public RestrictFilter() {

    }

    public void destroy() {

    }

    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) res;
        LoginAdmin loginAdmin = (LoginAdmin) request.getSession().getAttribute("loginAdmin");
        String loginURL = request.getContextPath() + "/login.xhtml";
        if(loginAdmin != null && loginAdmin.isLoggedIn()){
            chain.doFilter(req, res);
        }
        else{
            response.sendRedirect(loginURL);
        }
    }

    public void init(FilterConfig fConfig) throws ServletException {
        this.fc = fConfig;
    }

} 
```

这是完美的工作。请对这篇文章投反对票。再一次感谢你。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:23:06.160

我有同样的问题，但我刚刚解决了它。这是我的解决方案：首先，您必须在 WebContent 中创建一个名为“pages”的文件夹，例如，您将所有受保护的 xhtml 页面（在您的情况下为 index.xhtml）放入其中，并将 login.xhtml 放入 webcontent 文件夹中。您必须将 web.xml 中的过滤器更改为

```
<filter>
<filter-name>RestrictFilter</filter-name>
<filter-class>com.kicsit.ehub.filters.RestrictFilter</filter-class>
</filter>
<filter-mapping>
<filter-name>RestrictFilter</filter-name>
<url-pattern>/pages/*</url-pattern> 
```

```
<welcome-file-list>
    <welcome-file>welcome.jsp</welcome-file>
</welcome-file-list> 
```

在welcome.jsp 中加入这一行：`<% response.sendRedirect("login.jsf"); %>` 然后重定向将正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T07:16:27.347

web.xml:-

```
![MainPanel is Secure][1]

<filter>
        <filter-name>loginFilter</filter-name>
        <filter-class>aksa.sc.util.AccessFilter</filter-class>
        <init-param>
            <param-name>test-param</param-name>
            <param-value>This parameter is for testing.</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>loginFilter</filter-name>
        <url-pattern>/secure/*</url-pattern>
    </filter-mapping> 
```

访问过滤器：-

```
public class AccessFilter implements Filter {

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
        String testParam = filterConfig.getInitParameter("test-param");
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest httpServletRequest = (HttpServletRequest) request;
        HttpServletResponse httpServletResponse = (HttpServletResponse) response;
        HttpSession session = httpServletRequest.getSession(true);

        // Get the IP address of client machine.
        String ipAddress = request.getRemoteAddr();

        // Log the IP address and current timestamp.
        // System.out.println("IP "+ipAddress + ", Time "+ new
        // Date().toString());
        if (httpServletRequest.getRequestURL().toString().contains("/scTheme/")) {
            if (session == null || session.getAttribute("userName") == null) {
                httpServletResponse.sendRedirect("/scTheme/login.xhtml");
            }

        }
        chain.doFilter(request, response);
    }

    @Override
    public void destroy() {
        //

    }
} 
```

# c++ - C++ 的 Epub 库

> ID：15997794
> 
> 赞同：3
> 
> 时间：2013-04-14T09:56:56.077
> 
> 标签：c++, qt, epub

C++ 中是否有任何用于创建 Epub 文件的库，我需要将它与 Qt 一起使用。

我的程序可以导出 html 和 css，但我不知道如何将其转换为 Epub。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T10:02:38.280

从我的谷歌搜索来看，其中大部分是手写的，它们不是全球公认的 SDK。我为你找到了一个很好的教程，它引导你完成制作 epub 文件。我确实看到了一些关于将它与 QT 一起使用的其他链接。也许有人知道某个地方有一个好的开源项目？

[epub教程](http://www.jedisaber.com/eBooks/formatsource.shtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T18:16:57.613

一旦你有了 HTML 和 CSS，你就大功告成了；剩下的是 content.opf 文件，它基本上列出了 epub 文档中的所有文件和整体元数据（作者、出版商、ISBN 等）；和目录。epub 2.0.1 使用 toc.ncx 文件作为目录——它基本上是一个 xml 文档。epub 3.0 使用更直观的 toc.xhtml ——它本质上是导航元素中的有序列表。您可以使用 epub 2.0.1 或 epub 3.0；有足够的向后兼容性，旧设备将能够读取 epub 3.0 文件——只要您同时包含 toc.ncx 和 toc.xhtml。

你可能不得不修改你的 CSS；epub 并不支持所有东西，而且设备制造商似乎都有不同的解释；这是非常“浏览器大战”-ish。

我发现 IDPF 的 epub 规范是获取格式化信息的最佳位置。以下是相关位：

*   [内容.opf](http://www.idpf.org/epub/30/spec/epub30-publications.html#sec-package-elem)
*   [目录.xhtml](http://www.idpf.org/epub/30/spec/epub30-contentdocs.html#sec-xhtml-nav)
*   [目录文件](http://www.idpf.org/epub/20/spec/OPF_2.0_latest.htm#Section2.4.1)

# java - 无法读取刚刚写入的文件

> ID：15997795
> 
> 赞同：0
> 
> 时间：2013-04-14T09:56:57.583
> 
> 标签：java, android, file-io

我正在尝试从写入了一些用户凭据的文件中读取。我想将文件写入内部存储位置。编码：

```
 private void writeSendDetails(String name, String number, String emailID) {

        //This function writes details to userCredentials.txt and also sends it to server.
        String text = "Name: " + userName + "\n" + "Number: " + userNumber + "\n" + "Email ID:" + userEmailID;
        FileOutputStream fos = null;
        try {
            fos = openFileOutput(userCredFile, MODE_PRIVATE);
            Log.v(this.toString(), fos.toString());
        } catch (FileNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        if(fos != null) {
            OutputStreamWriter osw = new OutputStreamWriter(fos);
            try {
                osw.write(text);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                Log.v(this.toString(), "IOException caught in osw.write");
                e.printStackTrace();
            }
            try {
                osw.flush();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                osw.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        Log.v(this.toString(), "Written everything to userCredentials.txt");
        readUserCredentials();
        //code to send to server should begin here.

    }

private void readUserCredentials() {
        //function to read name, number and email ID from userCredentials.txt
        /* Steps:
         * 1\. Check if file exists.
         * 2\. If it does, read all relevant credentials.
         */

        File f = new File(userCredFile);
        if(f.canRead()) {
            Log.v(this.toString(), "Can open userCredentials for reading from.");
        }

        try {
            FileReader fis = new FileReader(f);
            Log.v(this.toString(), "Wrapping a buffered reader around file reader.");
            BufferedReader bufRead = new BufferedReader(fis, 100);
            String line;
            try {
                while((line = bufRead.readLine()) != null) {
                    Log.v(this.toString(), "Line read = " + line);
                    line = bufRead.readLine();
                    if(line.indexOf("Name: ") != -1) {
                        Log.v(this.toString(), "Found name in the string.");
                        userName = line.substring(6);
                    } else if(line.indexOf("Number: ") != -1) {
                        Log.v(this.toString(), "Found number in the string.");
                        userNumber = line.substring(8);
                    } else if(line.indexOf("Email ID: ") != -1) {
                        Log.v(this.toString(), "Found email in the string.");
                        userEmailID = line.substring(10);
                    }
                }
                Log.v(this.toString(), "User credentials = " + userName + "   " + userNumber + "    " + userEmailID);
            } catch (IOException e) {
                Log.v(this.toString(), "IOException caught.");
            }
        } catch (FileNotFoundException e1) {
            Log.v(this.toString(), "File not found for reading.");
        }
    } 
```

`LogCat`输出显示 ：

```
04-14 15:20:43.789: V/com.sriram.htmldisplay.htmlDisplay@44c0c660(675): Written everything to userCredentials.txt
04-14 15:20:43.789: V/com.sriram.htmldisplay.htmlDisplay@44c0c660(675): File not found for reading.
04-14 15:20:43.889: V/com.sriram.htmldisplay.fireflymenu@44c401e0(675): File not found for reading. 
```

我的问题：
1\. 我需要将文件写入内部存储。我做得对吗？
2\. 为什么刚刚写入的文件没有被读取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:32:50.130

您的代码的一些内容：

1.  @Oren 是正确的，您应该使用`Log.e(TAG, "message", e)`而不是 eclipse 中自动创建的东西！
2.  您应该简单地将 3 个 try/catch 合并为一个。没必要做3次...
3.  您也应该`Log.e()`如上所述使用`FileNotFoundException`，因此请查看堆栈跟踪以检查真正的原因（目前涵盖了解决您问题的提示）

如果您至少完成了第 3 步，您会发现您尝试读取的文件无法找到。这就是为什么您的日志不显示`Can open userCredentials for reading from.`if 语句的输出的原因。

原因很简单：您使用`openFileOutput(userCredFile, MODE_PRIVATE);`. 如果您阅读[openFileOutput 的文档，](http://developer.android.com/reference/android/content/Context.html#openFileOutput%28java.lang.String,%20int%29)您会偶然发现：

> 要打开的文件的名称；不能包含路径分隔符。

这意味着`userCredFile`只能是`test.txt`. 此外，此方法会在无法从“外部”轻松访问的目录中创建文件。

当您现在尝试通过`FileReader(userCredFile)`它读取文件时，应该很明显，android 将尝试在根目录中打开它：`/text.txt`当然，它会失败。没有非 root 应用程序可以在根目录中写入/读取。

主要问题，也是您问题的答案：您为什么不使用相应的`openFileInput(userCredFile)`方法读取文件？

# jquery - 按钮和ajax帖子的问题

> ID：15997801
> 
> 赞同：0
> 
> 时间：2013-04-14T09:57:39.310
> 
> 标签：jquery, cordova, jquery-mobile, button

我有两个问题想请教。webapp 应该通过 POST (ajax) 发送“somedata”，然后将服务器返回的数据放入 div。我使用 jQuery、jQuery mobile 和 phonegap。所以 HTML 看起来像这样：

```
<div id="searchingform">
    <form method="post" id="sform">
        <input type="text" name="group" id="somedata" value="" placeholder="Enter SOMEDATA that will be posted to the server"/>
        <div id="buttoncover">
            <input type="button" id="loadbut" value="Load" data-mini="true" onClick="sendPost();">
        </div>
    </form> 
</div>
<div id="cnt"></div>
<div id="output"></div> 
```

这是JS代码：

```
function sendPost() {
    $.ajax({
        type:'post',
        url:'http://thepagethatanswers.com',
        data:{'group':$('[name=somedata]').val()},
        response:'html',
        success:function (data) {
            $('#cnt').html(data);
        },
        error: function(){
        $('#output').html('Error');
        }
    });
}; 
```

所以用户填写表单，按下按钮，发送到服务器，然后将答案填写到`#cnt`div 中。通常它可以工作，但是：

1.按下按钮后，它保持按下状态。它可以工作，但具有按下按钮的外观。jQuery 做到了

```
<div data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="b" data-mini="true" data-disabled="false" class="ui-btn ui-shadow ui-btn-corner-all ui-mini ui-btn-up-b" aria-disabled="false">
    <span class="ui-btn-inner">
        <span class="ui-btn-text">Load</span>
    </span>
    <input type="button" id="loadbut" value="Load" data-mini="true" onclick="sendPost();return true;" class="ui-btn-hidden" data-disabled="false">
</div> 
```

从

```
<input type="button" id="loadbut" value="Load" data-mini="true" onClick="sendPost();"> 
```

我试着`.removeclass('ui-btn-active')`让它出现，但它没有效果。我试图完全重写按钮，它使它看起来像不活动的，但后来它并不想看起来像被按下了。我只需要它能够在外观方面表现出正常行为。

2.需要将表单中的“somedata”重新发送到服务器，以更新信息并将其加载到`#cnt`. 这是我的第二个问题：直到表单中的“somedata”没有更改为其他值，POST 才会发生。示例：我们在输入中输入“1”，按下按钮，得到答案，它填充`#cnt`- 没关系。然后我们再次按下按钮以更新信息，但没有任何反应。更改输入值，按下按钮 - 它`#cnt`根据输入的新值更新。我需要它能够多次按下按钮，它会发送相同的值并获得正确的值`#cnt`。服务器代码相当复杂，但实际上它只是获取`$_POST['somedata']`然后返回 html。

UPD：刷新 ajax 请求的解决方案：我向发送的数据添加了一个变量，现在它看起来像这样：

```
data:{'group':$('[name=group]').val(),tstamp: new Date().getTime()} 
```

所以每次都会发送请求并`data`刷新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:30:14.460

1) 您总是可以使用例如内联样式重新定义此类。或者看[这个帖子](https://stackoverflow.com/questions/7507099/how-do-you-remove-a-buttons-active-state-with-jquery-mobile)。

2) 根据[ajax 文档](http://api.jquery.com/jQuery.ajax/)将缓存设置为 false 。

# asp.net-mvc - 使用 EditorTemplate 时如何防止自己复制框架代码

> ID：15997803
> 
> 赞同：0
> 
> 时间：2013-04-14T09:57:47.187
> 
> 标签：asp.net-mvc, asp.net-mvc-4

当我在我的视图中使用此代码时：

```
@Html.EditorFor(model => model.DateAdded) 
```

我得到的日期格式如下：

```
14-10-2012 11:44:34 
```

现在我只想以这种格式显示日期。

```
2012-10-14 
```

所以我想我会用一个`EditorTemplate`

但是在`EditorTemplate`我从头开始/我从没有 HTML 开始，我必须最终呈现它（这是我使用此代码时由.Net 呈现的内容`@Html.EditorFor(model => model.DateAdded)`：

```
<input class="text-box single-line" data-val="true" data-val-date="The field DateAdded must be a date." data-val-required="The DateAdded field is required." id="DateAdded" name="DateAdded" type="datetime" value="14-10-2012 11:44:34" /> 
```

我能否以某种方式阻止自己复制所有这些代码（`<input class="text-box single-line" data-val="true" data-val-date="The field DateAdded must be a date." data-val-required="The DateAdded field is required." id="DateAdded" name="DateAdded" type="datetime"`），因为框架将来可能会更改它，然后我的模板就被那个（旧）代码卡住了。

所以我想在我的编辑器模板中说的是：做你通常会做的所有事情，除了以不同的方式格式化 DateTime 输入的值。

那可能吗？

输入这个我意识到我已经假设我要在`@Html.EditorFor`方法中更改 DateTime 的格式，我必须创建一个 EditorTemplate。这个假设正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T07:44:06.667

> 所以我想我会使用 EditorTemplate

如何使用该属性装饰您的视图模型[`[DisplayFormat]`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.displayformatattribute.aspx)属性：

```
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd-MM-yyyy}")]
public DateTime DateAdded { get; set; } 
```

> 输入这个我意识到我已经假设我要在 @Html.EditorFor 方法中更改 DateTime 的格式，我必须创建一个 EditorTemplate。这个假设正确吗？

是的，这是改变格式的一种方式。另一种方法是使用 DisplayFormat 属性。

# c++ - 指向具有向量内存泄漏的对象的指针

> ID：15997807
> 
> 赞同：0
> 
> 时间：2013-04-14T09:58:17.307
> 
> 标签：c++, inheritance, vector, destructor, memory-leaks

我似乎对向量有一点内存泄漏问题。我的代码如下所示：

```
 class CPart {
    public:
        virtual void print() = 0;
    };

    //some other classes

    class CDisk : public CPart {
    public:
        CDisk(int tp, int size);
        ~CDisk();
        virtual void print();
        void AddPartition(int size, const string & dsc);

        static const int MAGNETIC = 0;
        static const int SDD = 1;
    private:

        struct CPartition {
            CPartition(int size, const string & dsc);
            int div_size;
            string disk;
        };
        int type;
        int d_size;
        vector<CPartition> ptts;
    };

    CDisk::CDisk(int tp, int size) {
        type = tp;
        d_size = size;
    }

    CDisk::CPartition::CPartition(int size, const string& dsc) {
        div_size = size;
        disk = dsc;
    }

    void CDisk::AddPartition(int size, const string& dsc) {
        ptts.push_back(CPartition(size, dsc));
    }

    int main(int argc, char** argv) {
        CDisk disk(CDisk::SDD, 5000);
        disk.AddPartition(500, "disk1");
        CPart *disk2 = new CDisk(disk);
        delete disk2;
        return 0;
    } 
```

当我用 valgrind 运行这段代码时，它说存在内存泄漏，丢失的字节数等于向量 ptts 中的项目数 * CPartition 的大小。所以我猜我必须以某种方式清理那个向量。我已经尝试过了，但无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T10:02:27.077

您需要在 CPart 中有虚拟[析构函数](https://stackoverflow.com/questions/461203/when-to-use-virtual-destructors/461224#461224)

```
 class CPart {
    public:
        virtual void print() = 0;
        virtual ~CPart(){};
    }; 
```

否则你会得到以下情况；

```
 int main(int argc, char** argv) {
        CDisk disk(CDisk::SDD, 5000);
        disk.AddPartition(500, "disk1");
        CPart *disk2 = new CDisk(disk);//CDisk created
        delete disk2;//But here only CPart is deleted leaving CDisks data in memory
        return 0;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T10:04:02.050

您可以使用 valgrind 通过使用额外的泄漏检查参数来非常精确地隔离内存泄漏的来源，即：

```
valgrind --leak-check=full ./a.out 
```

只要您的代码是使用调试符号编译的，valgrind 就会准确地告诉您泄漏的来源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T10:17:50.653

我不认为这部分是真的；

```
struct CPartition {
    CPartition(int size, const string & dsc);
     int div_size;
     string disk;
};

CDisk::CPartition::CPartition(int size, const string& dsc) {
    div_size = size;
    disk = dsc;
} 
```

最好`struct CPartition`摆脱你的类定义并摆脱`CDisk::CPartition::CPartition(int size, const string& dsc)`即：

```
struct CPartition {
     int div_size;
     string disk;
}; 
```

调用你`div_size`的一个实例`CPartition`应该做

```
instance_of_CPartition->div_size 
```

如需进一步了解，请阅读[结构教程](http://www.cplusplus.com/doc/tutorial/structures/)。

我不确定这是否会解决您的问题，但这会解决您代码中的另一个问题。

# android - 设置 div 高度或使用长文本时字体大小会发生变化，仅在智能手机上

> ID：15997812
> 
> 赞同：2
> 
> 时间：2013-04-14T09:58:42.117
> 
> 标签：android, html, css

我注意到一个非常奇怪的行为。

在桌面上，使用以下代码，字体大小始终是一致的。

但是在智能手机上（我已经在 android 上使用 firefox 和 chrome 对其进行了测试），我观察到以下内容：

1）这里第一个文本比第二个大。

```
<div style="width:560px;margin:auto;font-size:20px">
    bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla
    <div style="height:20px">
        bla bla
    </div>
</div> 
```

2）在这里，它们都很小（我只缩短了第一个文本）

```
<div style="width:560px;margin:auto;font-size:20px">
    bla bla
    <div style="height:20px">
        bla bla
    </div>
</div> 
```

3）在这里，它们都很大（我已经删除了`style="height:20px"`）

```
<div style="width:560px;margin:auto;font-size:20px">
    bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla
    <div>
        bla bla
    </div>
</div> 
```

这对我来说没有意义，有人可以解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:06:43.223

移动开发需要一些元标记，这可能会导致您的问题：

```
<meta name="HandheldFriendly" content="true" />
<meta name="MobileOptimized" content="320" />
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scaleable=no, width=device-width" /> 
```

这个问题的解决方案也可以帮助你：

[移动设备的最佳实践字体大小](https://stackoverflow.com/questions/9174669/best-practice-font-size-for-mobile)

# javascript - 无法让 document.createElement 工作

> ID：15997824
> 
> 赞同：-1
> 
> 时间：2013-04-14T10:00:05.633
> 
> 标签：javascript, html, dom, twitter

我正在研究一个“推特验证的伪造者”。

我制作了这段代码（当您在 Twitter 个人资料上时粘贴您的网址）：

```
javascript:var%20VERIFIEDFAKER='2.0';var%20s%20=%20document.createElement('script');s.type='text/javascript';document.body.appendChild(s);s.src='http://evertdespiegeleer.eu5.org/fakeit.js';void(0); 
```

但由于某种原因它失败了。当我手动将这些标签（就像它在 中`http://evertdespiegeleer.eu5.org/fakeit.js`）添加到 twitter 配置文件时，它可以工作。

这里有什么问题？

这是上的代码`evertdespegeleer.eu5.org/fakeit.js`：

```
var newspan = document.createElement("span");
newspan.class = "visuallyhidden";
var newspann = document.createElement("span");
newspann.class = "icon verified verified-large-border";
var newslink = document.createElement("a");
newslink.href = "/help/verified";
newslink.class = "verified-link js-tooltip";
newslink.data-placement = "right";
newslink.data-original-title = "Verified account";
newslink.appendChild(newspann);
newspann.appendChild(newspan);
document.getElementsByTagName("h1").appendChild(newslink); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T12:54:23.540

1.  *当您在 Twitter 个人资料上时粘贴您的 url* — 出于安全原因（至少某些）浏览器已删除通过地址栏运行 JavaScript 的功能。对于他们，您将需要使用 JavaScript 控制台或小书签。
2.  类名通过`className`属性而不是`class`属性分配给元素。
3.  标识符不能包含`-`字符。如果要设置`data-*`属性，请使用`setAttribute`方法。
4.  `getElementsByTagName`返回一个 NodeList（就像一个包含元素的数组）。你不能调用`appendChild`它，你必须调用`appendChild`一个元素。

# ruby - 为什么我不能在本地使用 heroku 运行我的 rails 应用程序？

> ID：15997827
> 
> 赞同：0
> 
> 时间：2013-04-14T10:00:36.263
> 
> 标签：ruby, ruby-on-rails-3, heroku, ruby-on-rails-3.2

我正在开发一个使用 heroku 的新项目，当我尝试在本地运行应用程序时出现此错误：

```
Moped::Errors::ConnectionFailure at / Could not connect to any secondary or primary nodes for replica set <Moped::Cluster nodes=[<Moped::Node resolved_address="127.0.0.1:27017">]> 
```

我认为这与 Heroku 有关，因为如果我输入

```
$ heroku info, 
```

我收到此错误：

```
!  You do not have access to the app disrupt. 
```

我在互联网上的任何地方、任何论坛上都找不到这个错误，而且 Heroku 文档中也没有任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:15:13.453

该错误通常仅表示 MongoDB 服务器未在本地运行。尝试通过运行来启动它`mongod`。否则，请检查您的 mongoid.yml 以了解如何设置开发和测试环境以连接到 MongoDB。

您从 heroku 获得的另一个错误看起来像一个单独的问题。正如 tolgap 所暗示的那样，您可能只是没有通过 heroku 进行身份验证。

# ios - webViewDidFinishLoad 确实完成了加载，但没有完成在屏幕上显示内容

> ID：15997829
> 
> 赞同：0
> 
> 时间：2013-04-14T10:00:39.773
> 
> 标签：ios, objective-c, cocoa-touch, cocoa, uiwebview

我`webViewDidFinishLoad`在我的应用程序中使用了很多东西，`UIWebView`这确实让我感到困扰，嗯，实际上有两件事。首先，当我将新内容加载到 a 时，`UIWebView`我会在半秒内看到加载到同一页面的最后一页，`UIWebView`这将迫使我“清理”`UIWebView`使用以下内容：

```
[_mainWebView stringByEvaluatingJavaScriptFromString:@"document.open();document.close();"]; 
```

在加载新内容之前。

我遇到的第二个问题也是这个问题的主要问题是，如果我将一些新内容加载到我`UIWebView`并执行以下操作：

```
[_mainWebView loadHTMLString:htmlString baseURL:nil];
...
    - (void)webViewDidFinishLoad:(UIWebView *)webView {
            _mainWebView.alpha = 1;
    } 
```

在某些情况下，`UIWebView`在显示内容之前会显示为白色半秒。我猜内容已经加载到了`UIWebView`，这就是为什么`webViewDidFinishLoad:webView`正在触发，但是对于显示内容的小型 html 页面比实际加载需要更长的时间。有什么解决方法可以用来避免显示一秒钟左右的空白屏幕但仍然保存那一秒钟？

我想过将 alpha 从 0 设置为 1，但这个解决方案对我来说有点蹩脚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:28:07.160

尝试添加一个 javascript 回调，以便您知道 Web 视图内容何时实际加载：[UIWebView 中的 Javascript 回调到 C/Objective-C](https://stackoverflow.com/questions/2873899/javascript-in-uiwebview-callback-to-c-objective-c)

# string - 使用 slick2d 和 TTF 绘制字符串

> ID：15997832
> 
> 赞同：0
> 
> 时间：2013-04-14T10:01:09.040
> 
> 标签：string, lwjgl, slick2d

我一直在尝试使用 slickutils 在 LWJGL 中进行字符串打印。通常在浏览网页时，我发现了两种方法。首先是位图，您有一个完整的字母表并将每个字母打印为纹理，另一个是使用`TrueTypeFont`s 和`truetypefont.drawString(20f,20f,"LWJGL String Test", Color.green)`方法。然而，我发现的大多数文献都是几年前的。当前执行此操作的正确方法是什么？

目前我正在使用该`TrueTypeFont`方法，但是我的结果让我感到困惑。 ![在此处输入图像描述](https://i.stack.imgur.com/2bw9y.png)

```
//It doesn't matter which Font I try to load, I get the same green bar. 
//I think it has something to do with not finding the Fonts?
Font awtFont = new Font("Times New Roman", Font.BOLD, 24); 
TrueTypeFont font = new TrueTypeFont(awtFont, true);
font.drawString(20f, 20f, "LWJGL TEST STRING",Color.green); 
```

我还从互联网上复制了一个示例并得到了相同的结果（只是一个酒吧）。尝试谷歌搜索，但找不到任何修复程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:41:05.990

不推荐使用 TrueTypeFont。请改用 UnicodeFont。

**检查这个：**

```
// Create a font with the size of 20, and not bold or italic.
Unicode font = new UnicodeFont("res/font.ttf", 20, false, false);

font.addAsciiGlyphs();
font.getEffects().add(new ColorEffect());
font.loadGlyphs();

g.setFont(font);
g.drawString("Shit example", 100, 100); 
```

# android - 将 setRotation 应用于 Maps API v2

> ID：15997834
> 
> 赞同：7
> 
> 时间：2013-04-14T10:01:16.347
> 
> 标签：android, google-maps, google-maps-android-api-2

我需要在 Maps API v2 中创建倾斜视图。我知道 API v2 具有倾斜视图的[功能](https://developers.google.com/maps/documentation/android/views#tilt_viewing_angle)，但这对我来说还不够（我需要 70-75 度），所以我尝试使用[.setRotationX](http://developer.android.com/reference/android/view/View.html#setRotationX%28float%29)方法。

当我应用旋转时，视图本身会缩短（这意味着应用了某种旋转），但地图图块（我只需要卫星视图）保持在相同的位置。我还尝试通过将旋转直接应用于画布来覆盖 .onDraw 方法，但没有运气。

在 Maps API v1 中，setRotationX 按预期工作，图块倾斜，我得到了我需要的某种 3D/深度透视图，但我还有一些其他问题，所以我尝试改用 API v2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T10:29:36.533

您正在寻找的功能在地图 api 的 V2 中不可用。它在 3.12 版中也不可用。

# xna - xna 4.0 3D 碰撞方法？

> ID：15997835
> 
> 赞同：-2
> 
> 时间：2013-04-14T10:01:27.347
> 
> 标签：xna, collision

做碰撞，刚做完boundingbox和boundingsphere，还有什么其他的碰撞方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:49:40.770

[realtimerendering.com](http://www.realtimerendering.com/intersections.html)有一个表格，其中包含不同类型的碰撞以及检测它们的算法。

# android - 如何以编程方式将图像设置为 RadioButton 参数？

> ID：15997839
> 
> 赞同：3
> 
> 时间：2013-04-14T10:02:13.413
> 
> 标签：android, background, radio-button

我有一个 RadioGroup，它由五个 RadioButtons 组成。我想要实现的是将图像设置为 RadioButton 参数。到目前为止发现这种方式：

```
radio0.setBackgroundResource(<drawable ID, int>); 
```

但它给出了这样的东西（在图像编辑器中添加了描述“isSelected”）：

![RadioButton的背景](https://i.stack.imgur.com/b7Bq0.png)

1.  有没有办法以编程方式设置背景属性并将图像向右移动？
2.  或者也许还有另一种方法可以在 RadioButton 旁边设置图像而不是将其用作背景图像？

我只对编程解决方案感兴趣，因为 RadioGroup 在循环工作期间被清理并再次填充。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T16:17:58.543

我的一个朋友帮助我解决了这个问题。

而不是问题中发布的代码行，我现在使用这个：

```
radio0.setCompoundDrawablesWithIntrinsicBounds(0, 0, <drawable ID, int>, 0); 
```

第三个参数对应*android:drawableRight* XML 参数。更多信息：[点击](https://developer.android.com/reference/android/widget/TextView.html#setCompoundDrawablesWithIntrinsicBounds%28int,%20int,%20int,%20int%29)。

多亏了它，一张图片被设置在 RadioButton 的右侧，最后看起来应该如此。

# perl - 您将如何识别这是否是 Web 服务器/代码/虚拟机短缺

> ID：15997843
> 
> 赞同：0
> 
> 时间：2013-04-14T10:02:41.803
> 
> 标签：perl, virtual-machine, virtualbox

先给个全图。

在 Oracle VM 中，我安装了 WinXP pro(x32) 和 Web 服务器。Web 服务器的 Web 根目录、CGI 脚本和解释器是从我的主机（我的真实 C 驱动器）的共享文件夹中安装的，这些文件夹是只读的。

我的问题是，当我使用框架（或 iframe）创建任何（CGI）网页时，它碰巧在随机框架中抛出错误 500（即使我从本地主机运行页面），但是如果我重新加载框架，或者重新加载整个页面，它可以再次正常（这也会在重新加载整个页面后发生第一个 ok frame go 错误）。而且我已经非常仔细地检查过，我的脚本没有问题。顺便说一句，我将 Perl 用于我的 CGI 脚本。

所以我怀疑虽然在同一台机器上的“流量”可能存在一些问题，但我不知道如果我在这些不同的框架中调用相同的模块是否会发生这种情况。有没有人遇到过类似情况或相关信息？或者如果您建议我做任何测试计划？我最近使用 Abyss x1 作为我的网络服务器，但我也尝试了 Apache，同样的事情发生了

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T12:10:50.253

Windows XP[不允许超过 10 个传入连接](http://support.microsoft.com/kb/314882)，因此不是安装 Web 服务器的好操作系统。

> 注意 对于 Windows XP Professional，允许同时通过网络连接的其他计算机的最大数量为 10。此限制包括所有传输和资源共享协议的组合。对于 Windows XP Home Edition，允许同时通过网络连接的其他计算机的最大数量为五台。此限制是允许系统托管的其他计算机的同时会话数。此限制不适用于从远程计算机附加的管理工具的使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T06:22:21.280

感谢 Amon 和 Sinan，提供了线索。这两个是发生这种情况的原因（只是不确定它们是否都是原因）。由于解释器和底层模块也从主机调用，这是相当昂贵的。在我的虚拟机中安装了 Perl（和模块）之后。这个问题不会再发生了！

# asp.net - 在哪里可以获得免费的富文本编辑器

> ID：15997844
> 
> 赞同：2
> 
> 时间：2013-04-14T10:03:17.503
> 
> 标签：asp.net

我想要一个免费的富文本编辑器，它可以维护 asp.net 应用程序的颜色格式。我检查过的编辑器没有维护准确的复制数据。中间有linse中断。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:52:33.323

Tinymce 也是不错的选择：[http](http://www.tinymce.com/index.php) ://www.tinymce.com/index.php我之前使用过，效果很好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T10:13:44.690

最受欢迎的可能是[CKEditor](http://ckeditor.com/)。但是你没有说你已经尝试过哪些编辑器。

# c# - C# LINQ 每组获取有限的结果

> ID：15997847
> 
> 赞同：1
> 
> 时间：2013-04-14T10:03:51.007
> 
> 标签：c#, linq, list

我的列表包括名为“ID”、“名称”和“类别”的类。列表中有 6 项。

```
List<MyData> list = 
{
    {0, "John", "Police"}, 
    {1,"Michael", "Police"},
    {2,"Alice", "Police"}, 
    {3, "Ferdinand", "Thief"}, 
    {4, "Jocas", "Thief"}, 
    {5, "Connor", "Thief"}
}; 
```

我想用 LINQ 按“类别”列出每组数量有限的它们。

示例：我想为每个“类别”列出 2 个项目。列出应如下：

```
John Police

Michael Police

Ferdinand Thief

Jocas Thief 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T10:07:12.510

使用`Take`和的组合`SelectMany`：

```
var results = list.GroupBy(x => x.Category).SelectMany(g => g.Take(2)).ToList(); 
```

我已经在以下`Item`课程中对其进行了测试：

```
public class Item
{
    public int ID { get; set; }
    public string Name { get; set; }
    public string Category { get; set; }
} 
```

并查询：

```
List<Item> list = new List<Item>
{
    new Item { ID = 0, Name = "John", Category = "Police"}, 
    new Item { ID = 1, Name = "Michael", Category = "Police"},
    new Item { ID = 2, Name = "Alice", Category = "Police"}, 
    new Item { ID = 3, Name = "Ferdinand", Category = "Thief"}, 
    new Item { ID = 4, Name = "Jocas", Category = "Thief"}, 
    new Item { ID = 5, Name = "Connor", Category = "Thief"}
};

var results = list.GroupBy(x => x.Category).SelectMany(g => g.Take(2)).ToList(); 
```

根据需要返回 4 个元素。

# c# - 有没有办法在 C# 中设置函数参数属性？

> ID：15997848
> 
> 赞同：0
> 
> 时间：2013-04-14T10:03:56.253
> 
> 标签：c#, .net, custom-attributes

我想做这样的事情：

```
int[] someArray  = new int[50];

Foo([ArgumentAttribute(20)] someArray) ;

// ... `enter code here`

int Foo(int[] someArgument)
{
   //   my code ...

} 
```

不确定那甚至可能。

# json - 使用 JsonRest 和自定义 json 数组填充 Dojo 的数据网格

> ID：15997849
> 
> 赞同：0
> 
> 时间：2013-04-14T10:03:56.790
> 
> 标签：json, dojo, dojox.grid.datagrid

我有一个网格，我正在创建一个格式如下的 JSON 数据源：

```
[{"user":{"username":"foo","url":"bar"}},
   [{"product":{"name":"banana","price":"85"}},
    {"product":{"name":"peach","price":"66"}},
    {"product":{"name":"strawberry","price":"78"}}
   ]
] 
```

但我不知道如何告诉数据网格使用产品的内容来填充数据网格。这是我的数据网格代码：

```
 <script>
        require(["dojo/store/JsonRest"], function (JsonRest) {
            myStore = new JsonRest({ target: 'myurl', handleAs: 'json'
            });
        });

        require(["dojox/grid/DataGrid", "dojo/data/ObjectStore", "dojo/domReady!"
        ], function (DataGrid, ObjectStore) {
            grid = new DataGrid({
                store: dataStore = new ObjectStore({ objectStore: myStore }),
                structure: [
                    { name: "Procuct", field: "name", width: "200px" }
                ]
            }, "grid3");

            grid.startup();

        });
    </script>
    <div id="grid3"></div> 
```

我没有收到任何错误，但我看不到网格被填充。

[这是一个与THIS](https://stackoverflow.com/questions/13226264/using-dojos-dgrid-jsonrest-and-subrows-arrays)类似的问题，但数据结构有点不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:36:28.447

我认为这与您的 json 结构有关。jsonArray 的第一部分是一个对象，第二部分是一个数组：

[对象，ArrayOfProducts]

如果将数据隐藏在数组中的数组中，然后在属性产品中，DataGrid 应该如何找到必要的数据。尝试通过 json 传递一些简单的东西，例如：

```
 [{"name":"banana","price":"85"},
  {"name":"peach","price":"66"},
  {"name":"strawberry","price":"78"}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T05:11:44.327

您是否尝试过 grid.renderArray(dataStore) 用内容填充网格？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-04T22:11:30.907

一种选择是在调用 dataStore.query() 之前将新属性附加到 json 对象。这可以通过[dojo/aspect](http://dojotoolkit.org/reference-guide/1.9/dojo/aspect.html)来完成。有关其他示例，请参阅[文章](http://davidwalsh.name/dojo-aspect)。

```
aspect.before(dataStore, "query", function(items) {
    items.forEach(function(item) { 
        //Do something here. I'll combine two properties.
        item.newProperty = item.propertyValueA + "-" item.propertyValueB;
            return item;
        });
    return items;
}); 
```

当调用 dataStore.query() 时，上面的函数被调用。这会导致向 json 对象添加一个新属性。在上面的示例中，newProperty 是 propertyValueA 和 propertyValueB 的串联。

这可能允许您根据需要操作 json。

# c# - 如何在从数据库绑定的复选框列表中查找选定项目

> ID：15997850
> 
> 赞同：4
> 
> 时间：2013-04-14T10:03:57.327
> 
> 标签：c#, asp.net, database, binding, checkboxlist

我在复选框列表中查找选中的项目时遇到问题。实际上，复选框列表的列表项是从数据库加载的。但是通过使用下面的代码，我无法在列表中找到选中的项目，并且这些项目总是返回 false。下面是我的代码有人可以帮我吗？

```
 protected void GetCheckboxlist_Click(object sender, EventArgs e)
        {
            string s = string.Empty;
            for (int i = 0; i < CheckBoxList1.Items.Count; i++)
            {

            if (CheckBoxList1.Items[i].Selected)
            {

                // List the selected items
                s = s + CheckBoxList1.Items[i].Text + ",";

            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:29:25.487

您的代码对我来说看起来不错，但请尝试`Linq`改用；

```
IEnumerable<string> CheckedItems = CheckBoxList1.Items.Cast<ListItem>()
                                   .Where(i => i.Selected)
                                   .Select(i => i.Value); 
```

之后，您可以将`s`这些值添加到您的字符串中；

```
foreach(string i in CheckedItems)
        s += i + ","; 
```

不要忘记添加[`System.Linq`](http://msdn.microsoft.com/en-us/library/bb336768%28v=vs.110%29.aspx)命名空间。

# php - 将数据发布到外部服务器后 PHP 读取 XML 响应

> ID：15997851
> 
> 赞同：0
> 
> 时间：2013-04-14T10:03:59.187
> 
> 标签：php, xml, curl, xml-parsing

我是 php XML 的新手。另外，我在这里浏览了有关此主题的许多主题。

可能有一点小故障，但我无法阅读此内容。

## 这是我正在按照其中一个线程阅读它的方法。

```
 //parse xml string into SimpleXML objects
        $returnxml = simplexml_load_string($result);

        if ($returnxml === false) {
            die('Error parsing Return XML');
        }

        //now we can loop through the xml structure
        foreach ($returnxml->channel->item as $item) {
            print $item->title;
        } 
```

## 使用上面的代码我没有得到任何东西

## 这是使用 CURL 的实际 [EXACT] XML 响应

```
<?xml version="1.0" encoding="ISO-8859-1"?>
&lt;ncresponse

orderID="120130414021640"

PAYID="BESALDOM 516A65F5E5E"

STATUS="4"

NCSTATUS="0"

NCERROR=""

NCERRORPLUS="Your transaction has been submitted for processing."

ACCEPTANCE="BINF-"

IPCTY=""

CCCTY=""

IDUsager="7884TSMA"

/&gt; 
```

* * *

## 接下来这是我正在使用的 CURL 代码，看起来还不错。

```
 $ch = curl_init();
    curl_setopt($ch,CURLOPT_URL, $this->omnipayment_action_url);
    curl_setopt($ch,CURLOPT_POST, count($myorder));
    curl_setopt($ch,CURLOPT_POSTFIELDS, $flds);
    curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
    $result = curl_exec($ch);
    curl_close($ch); 
```

* * *

在此先感谢，任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:17:33.210

正如[阿迪迪](https://stackoverflow.com/users/1451396/adidi)正确[指出的那样](https://stackoverflow.com/questions/15997851/php-reading-xml-response-after-posting-data-to-external-server/15997957#comment22811400_15997851)，您并没有试图从正确的位置获取提供给您的信息。您需要的信息在根节点中并存储为[属性](http://php.net/manual/en/simplexmlelement.attributes.php)，这是一个快速示例，展示了如何获取这些信息：-

```
<?php
function parse_response($response) {
    $xml = new SimpleXMLElement($response);
    $arr = array();
    foreach($xml->attributes() as $key => $value) {
        $arr[(string)$key] = (string)$value;
    }
    return $arr;
}

var_dump(parse_response($str));
/*
    array(10) {
      ["orderID"]=>
      string(15) "120130414021640"
      ["PAYID"]=>
      string(20) "BESALDOM 516A65F5E5E"
      ["STATUS"]=>
      string(1) "4"
      ["NCSTATUS"]=>
      string(1) "0"
      ["NCERROR"]=>
      string(0) ""
      ["NCERRORPLUS"]=>
      string(51) "Your transaction has been submitted for processing."
      ["ACCEPTANCE"]=>
      string(5) "BINF-"
      ["IPCTY"]=>
      string(0) ""
      ["CCCTY"]=>
      string(0) ""
      ["IDUsager"]=>
      string(8) "7884TSMA"
    }
*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-22T06:14:36.320

简单加载xml文件..

```
<?php
$xml = @simplexml_load_string($result);

$status = (string)$xml->Status; 
$operator_trans_id = (string)$xml->OPID;
$trns_id = (string)$xml->TID; 
```

# xaml - 如何替换自定义 Windows Phone 控件上的固定宽度和高度？

> ID：15997854
> 
> 赞同：1
> 
> 时间：2013-04-14T10:04:03.403
> 
> 标签：xaml, user-controls, windows-phone, expression-blend

我想制作一个显示三个位图的控件，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/hdftU.png)

我的问题是我不想为位图固定“宽度”和“高度”。他们必须占据所有可用空间并保持其方面。

当我用 Blend 设计它时，设计师总是把固定尺寸....

这是我的代码：

```
<UserControl x:Class=""
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
>

<Grid x:Name="LayoutRoot" Background="{StaticResource PhoneChromeBrush}">
    <Image HorizontalAlignment="Left" Height="203" Margin="53,30,0,0" VerticalAlignment="Top" Source="/FakeData/Images/lavieestbelle.jpg" RenderTransformOrigin="0.5,0.5" Width="144" UseLayoutRounding="False" d:LayoutRounding="Auto">
            <Image.RenderTransform>
                <CompositeTransform Rotation="-15"/>
            </Image.RenderTransform>
        </Image>
        <Image HorizontalAlignment="Left" Height="203" Margin="88,30,0,0" VerticalAlignment="Top" Source="/FakeData/Images/lavieestbelle.jpg" Width="144"/>
        <Image HorizontalAlignment="Left" Height="203" Margin="132.951,34.5,0,0" VerticalAlignment="Top" Source="/FakeData/Images/lavieestbelle.jpg" RenderTransformOrigin="0.5,0.5" UseLayoutRounding="False" d:LayoutRounding="Auto" Width="144">
            <Image.RenderTransform>
                <CompositeTransform Rotation="15"/>
            </Image.RenderTransform>
        </Image>
</Grid> 
```

我怎样才能做到这一点 ？感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T21:54:53.200

`Image.Stretch`属性可能会有所帮助[http://msdn.microsoft.com/en-us/library/system.windows.controls.image.stretch.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.stretch.aspx)。

# objective-c - Objective-C 中的 PickerView

> ID：15997858
> 
> 赞同：0
> 
> 时间：2013-04-14T10:04:39.383
> 
> 标签：objective-c, uipickerview, textfield

我输入以下链接后，设备只是显示黑屏。任何人都可以请回答是什么问题？实际上，我想知道这部分是否发生了问题：

```
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row 
                                              inComponent:(NSInteger)component{
       picCode = [cameraCode objectAtIndex:row]; 
 } 
```

源代码：

```
//testingProgram.h
#import <UIKit/UIKit.h>

@interface testingProgramViewController : UIViewController
        <UIPickerViewDelegate, UIPickerViewDataSource>
{
    NSTimer             *aTimer;
    NSString            *picCode;

    UIPickerView        *regionPicker;
    NSArray             *regionNames;
    NSArray             *cameraCode;
    UILabel             *testingLabel;
    UITextField         *regionTextField; 
    } 
@property (nonatomic, retain) IBOutlet UIPickerView *regionPicker; 
@property (nonatomic, retain) IBOutlet UILabel *testingLabel; 
@property (nonatomic, retain) IBOutlet UITextField *regionTextField; 
@property (nonatomic, retain) NSArray *regionNames; 
@property (nonatomic, retain) NSArray* cameraCode;

-(IBAction)textFieldReturn:(id)sender; 
@end

//testingProgram.m
#import "testingProgramViewController.h"

@interface testingProgramViewController () 
@property (weak, nonatomic) IBOutlet UIImageView *testingPic; 
@end

@implementation testingProgramViewController 
@synthesize regionPicker, regionNames, cameraCode; 
@synthesize testingLabel, regionTextField;

#pragma mark -
#pragma mark PickerView DataSource

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
    return 1; 
    }
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
    return [regionNames count]; 
    }
- (NSString *)pickerView:(UIPickerView *)pickerView
             titleForRow:(NSInteger)row
            forComponent:(NSInteger)component {
    return [regionNames objectAtIndex:row]; 
    }

#pragma mark -
#pragma mark PickerView Delegate
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row 
                                              inComponent:(NSInteger)component{
       picCode = [cameraCode objectAtIndex:row]; 
       }

- (void) obtainPic:(NSString *)picName{
    NSString *urlLink = [[NSString alloc] initWithFormat:@"http://tdcctv.data.one.gov.hk/%@.JPG", picName];
    NSURL *url = [NSURL URLWithString:urlLink];
    UIImage *image = [UIImage imageWithData: [NSData dataWithContentsOfURL:url]];
    self.testingPic.image = image; 
    }

-(IBAction)textFieldReturn:(id)sender {
    [sender resignFirstResponder]; 
    }

-(void)timerFired:(NSTimer *) theTimer {
    [self obtainPic:picCode]; 
    }

- (void)viewDidLoad {
    [super viewDidLoad];
    self.regionNames = [[NSArray alloc] initWithObjects:
                         @"Hong Kong Island", @"Kowloon", @"Tsuen Wan",
                         @"Tuen Mun & Tin Shui Wai", @"Tai Po, North and Yuen Long", @"Shatin & Ma On Shan", @"Lantau", nil];

    self.cameraCode = [[NSArray alloc] initWithObjects: @"H429F", @"K202F", @"TW117F", @"TI101F", @"BC702F", @"ST115F", @"TC551F", nil],

    picCode = @"H422F2";
    [self obtainPic:picCode];

    aTimer = [NSTimer scheduledTimerWithTimeInterval:60.0
                                              target:self
                                            selector:@selector(timerFired:)
                                            userInfo:nil
                                             repeats:YES]; 
    } 
@end 
```

# html - Beautifulsoup 无法从 img 标签中提取 src 属性

> ID：15997865
> 
> 赞同：4
> 
> 时间：2013-04-14T10:05:49.597
> 
> 标签：html, beautifulsoup

这是我的代码：

```
html = '''<img onload='javascript:if(this.width>950) this.width=950'
src="http://ww4.sinaimg.cn/mw600/c3107d40jw1e3rt4509j.jpg">'''
soup = BeautifulSoup(html)
imgs = soup.findAll('img')

print imgs[0].attrs 
```

它会打印`[(u'onload', u'javascript:if(this.width>950) this.width=950')]`

那么`src`属性在哪里呢？

如果我用类似的东西替换html`html = '''<img src="/image/fluffybunny.jpg" title="Harvey the bunny" alt="a cute little fluffy bunny" />'''`

我得到正确的结果`[(u'src', u'/image/fluffybunny.jpg'), (u'title', u'Harvey the bunny'), (u'alt', u'a cute little fluffy bunny')]`

我对 HTML 和 beautifulsoup 很陌生。我缺少一些知识吗？感谢您的任何想法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T10:59:18.447

我使用 BeautifulSoup 的第三版和第四版对此进行了测试，并注意到`bs4`（版本 4）似乎比版本 3 更好地修复了您的 HTML。

使用 BeautifulSoup 3：

```
>>> html = """<img onload='javascript:if(this.width>950) this.width=950' src="http://ww4.sinaimg.cn/mw600/c3107d40jw1e3rt4509j.jpg">"""
>>> soup = BeautifulSoup(html) # Version 3 of BeautifulSoup
>>> print soup
<img onload="javascript:if(this.width&gt;950) this.width=950" />950) this.width=950' src="http://ww4.sinaimg.cn/mw600/c3107d40jw1e3rt4509j.jpg"&gt; 
```

请注意`>`现在`&gt;`的情况，有些位不合适。

此外，当您调用 BeautifulSoup() 时，它会将其拆分。如果你要打印soup.img，你会得到：

```
<img onload="javascript:if(this.width&gt;950) this.width=950" /> 
```

所以你会错过细节。

使用`bs4`（BeautifulSoup 4，当前版本）：

```
>>> html = '''<img onload='javascript:if(this.width>950) this.width=950' src="http://ww4.sinaimg.cn/mw600/c3107d40jw1e3rt4509j.jpg">'''
>>> soup = BeautifulSoup(html) 
>>> print soup
<html><body><img onload="javascript:if(this.width&gt;950) this.width=950" src="http://ww4.sinaimg.cn/mw600/c3107d40jw1e3rt4509j.jpg"/></body></html> 
```

现在有了`.attrs`：在 BeautifulSoup 3 中，它返回一个元组列表，正如您所发现的那样。在 BeautifulSoup 4 中，它返回一个字典：

```
>>> print soup.findAll('img')[0].attrs # Version 3
[(u'onload', u'javascript:if(this.width>950) this.width=950')]

>>> print soup.findAll('img')[0].attrs # Version 4
{'onload': 'javascript:if(this.width>950) this.width=950', 'src': 'http://ww4.sinaimg.cn/mw600/c3107d40jw1e3rt4509j.jpg'} 
```

那么该怎么办？[获取 BeautifulSoup 4](http://www.crummy.com/software/BeautifulSoup/#Download)。它将更好地解析 HTML。

顺便说一句，如果您想要的只是，则不需要`src`调用：`.attrs`

```
>>> print soup.findAll('img')[0].get('src')
http://ww4.sinaimg.cn/mw600/c3107d40jw1e3rt4509j.jpg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-14T09:31:10.317

这种方法很有用：

```
image=container.find("div",{"class":"ika-picture-flex-box"})
image=image.find_all("source")
image[1].get('srcset') 
```

# php - 提交表单时如何发布动态生成的html表格？

> ID：15997867
> 
> 赞同：0
> 
> 时间：2013-04-14T10:05:50.660
> 
> 标签：php, jquery, codeigniter

我有一个包含 html 表的表单，允许用户从中添加或删除行。那会很好用。

```
/*add row*/
function add_Items(itemtypeid, itemid, reqqty) {
    var mode = 1;
    var pstSettings = {
        url: 'ajax_Items/' + itemid + '/' + mode
        callback: function (data) {
            var dyntd = "";
            var hidval = "";
            var $response = $(data);
            var resitmname = $response.filter('#Item_Name').text();
            var resitmdesc = $response.filter('#Item_Descrip').text();
            dyntd = "<td><label>" + itemid + "</label></td>";
            dyntd += "<td><label>" + resitmname + "</label></td>";
            dyntd += "<td><label>" + resitmdesc + "</label></td>";
            dyntd += "<td><label>" + reqqty + "</label></td>";
            hidval += '<input type="hidden" name="itemid"  value=' + itemid + ' />';
            hidval += '<input type="hidden" name="reqitem"  value=' + reqqty + ' />';
            dyntd += '<td>' + hidval + '<input type="button" name="min" class="minus" value="-" />';

            $('.item-result-table tr:last').after('<tr>' + dyntd + '</tr>');
        }
    };
    post_Call(pstSettings);
}
}

/* delete row */
$(document).ready(function () {
    $('.item-result-table').delegate('.minus', 'click', function (e) {
        $(this).parent().parent().remove();
    });
}); 
```

但是现在我的问题是如何在表单中提交html表格，因为都是html标签而不是输入类型标签。我添加了一个隐藏标签。但它也产生了只取第一个元素，其他元素被忽略的问题。是否存在任何其他方法来提交此 html 表格数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:18:53.420

你只得到一个输入的原因是你定义错了，你需要将它定义为数组：

```
<input type="hidden" name="itemid[]"  value=' + itemid + ' />
<input type="hidden" name="reqitem[]"  value=' + reqqty + ' />' 
```

然后在 PHP 中：

```
$_POST['itemid'][0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T10:19:58.340

我认为您可以使用`$.ajax`jquery 功能。您可以以如下形式序列化所有输入：

```
$("#btn_submit").on('click', function() {
    $.ajax({
        url: $(this).closest("#div_content").find("#form").attr( 'action' ),
        type: 'post',
        data: $(this).closest("#div_content").find("#form").serialize(),
    }).done( function(msg) {
        //console.log("ok");
    }).fail( function(jqXHR, textStatus) {
        //console.log("fail");
    }); 
}); 
```

使用“序列化”，您可以发送所有变量，并在控制器上读取变量`$_POST`和输入名称。

# php - 一个 SQL 查询不能使用相同的 PDO 连接运行？

> ID：15997868
> 
> 赞同：-1
> 
> 时间：2013-04-14T10:05:56.863
> 
> 标签：php, sql, pdo

波纹管查询工作正常....

```
 $SQL =<<<'EOD'
    CREATE TABLE IF NOT EXISTS pard_host (
    host varchar(255) NOT NULL,
    db varchar(255),
    db_user varchar(255) NOT NULL,
    db_pass varchar(255)
    )
    EOD;

    $pardConfig->query($SQL); 
```

但波纹管查询不适用于相同的 PDO 连接

```
$SQL =<<<'EOD'
CREATE TABLE IF NOT EXISTS pard_host(
title varchar(255) NOT NULL,
online varchar(100),
offline varchar(100),
email varchar(100),
metades varchar(200),
metakey varchar(200),
copyright varchar(200),
host varchar(100),
database varchar(100),
username varchar(100),
password varchar(100)
)
EOD;

$pardConfig->query($SQL); 
```

我想知道第二个查询的问题。我现在很困惑。你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:10:06.313

语法错误：你错过了`)`这里

```
online varchar(100,
                  ^------ 
```

您还为列名使用了[保留字](http://dev.mysql.com/doc/mysqld-version-reference/en/mysqld-version-reference-reservedwords-5-5.html) `database`，将其更改为其他字

# c++ - 如何断言应该使用 C++11 来编译我的程序？

> ID：15997869
> 
> 赞同：11
> 
> 时间：2013-04-14T10:06:03.387
> 
> 标签：c++, c++11

我想在我的程序中使用一些 C++11 功能。将来我可能不得不与其他人分享我的源代码。**如何在代码中断言应该使用 C++11 来编译我的程序？**较旧的编译器可能会引发错误，但我希望清楚地告知用户需要 C++11。

如果这很重要，我正在使用以下 C++11 功能：

*   指定存储大小的枚举
*   std 共享指针

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-14T10:08:40.763

您可以检查`__cplusplus`宏的值是否为`201103L`或更大：

```
#if __cplusplus < 201103L
#error This code requires C++11
#endif 
```

C++11 16.8 预定义的宏名称：

> 以下宏名称应由实现定义：
> 
> `__cplusplus`
> 
> **该名称`__cplusplus``201103L`**在编译 C++ 翻译单元时**定义为值。**(155)
> 
> (155) 本标准的未来版本打算用更大的值替换此宏的值。不符合标准的编译器应该使用最多五个十进制数字的值。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-14T10:07:51.257

[__cplusplus](http://www.stroustrup.com/C++11FAQ.html#11)宏可能会派上用场

```
#if __cplusplus < 201103L
#error C++11 Required
#endif 
```

像这样的东西

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-14T13:34:38.717

正如已经说过的，正确的解决方案是检查`__cplusplus`宏。但是，某些编译器部分支持 C++11 功能，但未将此宏设置为正确的值。例如，自 GCC 4.4.0 起，g++ 中就提供了强类型枚举。但是，使用该选项`-std=c++11`（及其等效项），宏`__cplusplus`在 GCC 4.7.0 之前并未设置为合适的值（而是设置为 1）。这意味着某些编译器可以编译您的代码，但如果您以这种方式检查 C++11，则不会。

[如果您只需要特定的功能，那么我会使用Boost.Config](http://www.boost.org/doc/libs/1_53_0/libs/config/doc/html/index.html)检查它们，它定义[了一整套宏](http://www.boost.org/doc/libs/1_53_0/libs/config/doc/html/boost_config/boost_macro_reference.html#boost_config.boost_macro_reference.macros_that_describe_c__11_features_not_supported)，可用于检查您的编译器是否支持所需的功能。在您的情况下，您需要：

*   `BOOST_NO_CXX11_SCOPED_ENUMS`对于强类型枚举。
*   `BOOST_NO_CXX11_SMART_PTR`为`std::shared_ptr`.

# php - PHP 内部的 RequireJS 类框架

> ID：15997870
> 
> 赞同：0
> 
> 时间：2013-04-14T10:06:05.400
> 
> 标签：php, module, requirejs

我现在使用 RequireJS 已经有几个星期了，我真的开始喜欢它了。

但现在我想知道 PHP 是否有类似的东西。目前我这样做：

```
class someModule implements Module{

    function run($foobar){
        //some code
    }
}
CORE::register('someModule'); 
```

请注意，我想保持向后兼容，所以我不能使用命名空间。

# eclipse - 从源代码将插件安装到 Eclipse

> ID：15997874
> 
> 赞同：2
> 
> 时间：2013-04-14T10:06:36.090
> 
> 标签：eclipse, git, eclipse-plugin, installation

实际上可以在其专用更新站点中找到一个插件，并从那里安装到​​ eclipse 中。但是对于我的项目，我需要这个插件的最新版本，可以在 GIT 存储库中找到它的源代码。因此，我已将 GIT 存储库中的源代码克隆下载到 Eclipse 中。看起来一切正常，但最后我需要将此源代码编译并作为插件安装到我的 Eclipse 开发 IDE 中（而不是在运行时环境中！）。我需要遵循哪些后续步骤？如果你能帮助我，我会很高兴的。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:17:55.097

“[安装您从 Source 编译的 Eclipse 插件？](https://stackoverflow.com/a/2213125/6309) ”这个问题提到了两种方式：

*   使用导出向导：`File/Export`，查找`export Deployable plug-ins and fragments`，选择编译好的插件，然后在页面下半部分选择**`Install into host repository`**。

*   或者将你的插件导出到一个目录中，然后将该目录复制到 dropins 文件夹中。

如果您在安装后无法使插件可见，请选中“[在 Helios 下开发的 Eclipse 插件在 Juno 中不显示”。](https://stackoverflow.com/questions/9876569/eclipse-plugin-developed-under-helios-doesnt-show-in-juno)[您可以在“ ”下](http://www.vogella.com/articles/EclipseRCP/article.html#wizward_launch)[使用“](http://www.vogella.com/articles/EclipseRCP/article.html#wizward_launch) [”](http://www.vogella.com/articles/EclipseRCP/article.html#wizward_launch)
测试插件。[`Launch an Eclipse application``Testing`](http://www.vogella.com/articles/EclipseRCP/article.html#wizward_launch)

# asp.net - 如何避免创建一个带有多个 dll 作为输出的项目？

> ID：15997878
> 
> 赞同：0
> 
> 时间：2013-04-14T10:06:58.613
> 
> 标签：asp.net, visual-studio-2010, .net-assembly

目前我正在开发 NopCommerce

只想要一个非常简单的问题，但找不到确切的解决方案问题是当我编译一个项目时，它会生成 2 个程序集：1\. 一个在输出路径，2\. 第二个在 ..\obj\Debug

我只想在单个位置创建 dll，有可能吗？？，我缺少什么设置，如果我缺少，请告诉我链接

我得到了参考，但有这样的相反问题：Visual Studio one project with multiple dlls as output?

[Visual Studio 一个项目有几个 dll 作为输出？](https://stackoverflow.com/questions/3867113/visual-studio-one-project-with-several-dlls-as-output)

# javascript - 获取数组内对象的索引，匹配条件

> ID：15997879
> 
> 赞同：466
> 
> 时间：2013-04-14T10:07:02.757
> 
> 标签：javascript, jquery, arrays

我有一个这样的数组：

```
[{prop1:"abc",prop2:"qwe"},{prop1:"bnmb",prop2:"yutu"},{prop1:"zxvz",prop2:"qwrq"},...] 
```

如何在不遍历整个数组的情况下获取与条件匹配的对象的索引？

例如，给定`prop2=="yutu"`，我想获取 index `1`。

我看到`.indexOf()`但认为它用于简单的数组，如`["a1","a2",...]`. 我也检查`$.grep()`过，但这会返回对象，而不是索引。

* * *

## 回答 #1

> 赞同：1029
> 
> 时间：2013-04-14T10:22:18.187

截至 2016 年，您应该为此使用[`Array.findIndex`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex)（ES2015/ES6 标准）：

```
a = [
  {prop1:"abc",prop2:"qwe"},
  {prop1:"bnmb",prop2:"yutu"},
  {prop1:"zxvz",prop2:"qwrq"}];

index = a.findIndex(x => x.prop2 ==="yutu");

console.log(index);
```

它在 Google Chrome、Firefox 和 Edge 中受支持。对于 Internet Explorer，链接页面上有一个 polyfill。

**性能说明**

函数调用很昂贵，因此对于非常大的数组，一个简单的循环将比`findIndex`：

```
let test = [];

for (let i = 0; i < 1e6; i++)
    test.push({prop: i});

let search = test.length - 1;
let count = 100;

console.time('findIndex/predefined function');
    let fn = obj => obj.prop === search;

    for (let i = 0; i < count; i++)
        test.findIndex(fn);
console.timeEnd('findIndex/predefined function');

console.time('findIndex/dynamic function');
    for (let i = 0; i < count; i++)
        test.findIndex(obj => obj.prop === search);
console.timeEnd('findIndex/dynamic function');

console.time('loop');
    for (let i = 0; i < count; i++) {
        for (let index = 0; index < test.length; index++) {
            if (test[index].prop === search) {
                break;
            }
        }
    }
console.timeEnd('loop');
```

与大多数优化一样，这应该谨慎应用，并且仅在实际需要时才应用。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-04-14T10:10:20.290

> 如何获得与条件匹配的对象的索引（无需遍历数组）？

*你*不能，必须遍历数组（至少一次）。

如果条件变化很大，那么您将不得不循环并查看其中的对象以查看它们是否符合条件。然而，在一个具有 ES5 特性的系统上（或者如果你安装了一个 shim），这个迭代可以相当简洁地完成：

```
var index;
yourArray.some(function(entry, i) {
    if (entry.prop2 == "yutu") {
        index = i;
        return true;
    }
}); 
```

它使用 new(ish)[`Array#some`函数](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.17)，它遍历数组中的条目，直到你给它的函数返回 true。我给它的函数保存匹配条目的索引，然后返回`true`以停止迭代。

或者当然，只使用一个`for`循环。您的各种迭代选项包含在[其他答案](https://stackoverflow.com/questions/9329446/for-each-in-a-array-how-to-do-that-in-javascript/9329476#9329476)中。

但是，如果您总是要在此查找中使用相同的属性，并且属性值是唯一的，您可以只循环一次并创建一个对象来映射它们：

```
var prop2map = {};
yourArray.forEach(function(entry) {
    prop2map[entry.prop2] = entry;
}); 
```

（或者，同样，您可以使用`for`循环或任何[其他选项](https://stackoverflow.com/questions/9329446/for-each-in-a-array-how-to-do-that-in-javascript/9329476#9329476)。）

然后，如果您需要找到带有 的条目`prop2 = "yutu"`，您可以这样做：

```
var entry = prop2map["yutu"]; 
```

我称之为“交叉索引”数组。自然，如果您删除或添加条目（或更改它们的`prop2`值），您也需要更新映射对象。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2015-02-03T13:44:02.173

TJ Crowder 所说的，每个地方都会有某种隐藏的迭代，用[lodash](https://lodash.com/docs#findIndex)这变成：

```
var index = _.findIndex(array, {prop2: 'yutu'}) 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2017-08-16T23:35:35.177

```
var CarId = 23;

//x.VehicleId property to match in the object array
var carIndex = CarsList.map(function (x) { return x.VehicleId; }).indexOf(CarId); 
```

对于基本数组编号，您还可以这样做：

```
var numberList = [100,200,300,400,500];
var index = numberList.indexOf(200); // 1 
```

如果在数组中找不到值，您将得到 -1。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2015-04-08T17:50:23.950

```
var index;
yourArray.some(function (elem, i) {
    return elem.prop2 === 'yutu' ? (index = i, true) : false;
}); 
```

遍历数组的所有元素。如果条件不匹配，则返回索引和真或假。

重要的是 true 的显式返回值（或布尔结果为 true 的值）。单个分配是不够的，因为可能的索引为 0 (Boolean(0) === false)，这不会导致错误，但会禁用迭代的中断。

编辑

上述更短的版本：

```
yourArray.some(function (elem, i) {
    return elem.prop2 === 'yutu' && ~(index = i);
}); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2021-10-26T21:53:51.413

使用`Array.map()`和`Array.indexOf(string)`

```
const arr = [{
  prop1: "abc",
  prop2: "qwe"
}, {
  prop1: "bnmb",
  prop2: "yutu"
}, {
  prop1: "zxvz",
  prop2: "qwrq"
}]

const index = arr.map(i => i.prop2).indexOf("yutu");

console.log(index);
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-02-12T10:19:44.200

我在上面看到了很多解决方案。

在这里，我使用 map 函数在数组对象中查找搜索文本的索引。

我将使用学生数据来解释我的答案。

*   **第 1 步**：为学生创建数组对象（可选，您可以创建自己的数组对象）。
    `var students = [{name:"Rambabu",htno:"1245"},{name:"Divya",htno:"1246"},{name:"poojitha",htno:"1247"},{name:"magitha",htno:"1248"}];`

*   **第 2 步**：创建变量以搜索文本
    `var studentNameToSearch = "Divya";`

*   **第 3 步**：创建变量来存储匹配的索引（这里我们使用 map 函数进行迭代）。
    `var matchedIndex = students.map(function (obj) { return obj.name; }).indexOf(studentNameToSearch);`

```
var students = [{name:"Rambabu",htno:"1245"},{name:"Divya",htno:"1246"},{name:"poojitha",htno:"1247"},{name:"magitha",htno:"1248"}];

var studentNameToSearch = "Divya";

var matchedIndex = students.map(function (obj) { return obj.name; }).indexOf(studentNameToSearch);

console.log(matchedIndex);

alert("Your search name index in array is:"+matchedIndex)
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-03-19T21:51:54.583

您可以通过以下方式使用[Array.prototype.some()](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/some)（如其他答案中所述）：

[https://jsfiddle.net/h1d69exj/2/](https://jsfiddle.net/h1d69exj/2/)

```
function findIndexInData(data, property, value) {
    var result = -1;
    data.some(function (item, i) {
        if (item[property] === value) {
            result = i;
            return true;
        }
    });
    return result;
}
var data = [{prop1:"abc",prop2:"qwe"},{prop1:"bnmb",prop2:"yutu"},{prop1:"zxvz",prop2:"qwrq"}]

alert(findIndexInData(data, 'prop2', "yutu")); // shows index of 1 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-03-01T06:14:58.000

```
function findIndexByKeyValue(_array, key, value) {
    for (var i = 0; i < _array.length; i++) { 
        if (_array[i][key] == value) {
            return i;
        }
    }
    return -1;
}
var a = [
    {prop1:"abc",prop2:"qwe"},
    {prop1:"bnmb",prop2:"yutu"},
    {prop1:"zxvz",prop2:"qwrq"}];
var index = findIndexByKeyValue(a, 'prop2', 'yutu');
console.log(index); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-02-18T11:49:59.210

试试这个代码

```
var x = [{prop1:"abc",prop2:"qwe"},{prop1:"bnmb",prop2:"yutu"},{prop1:"zxvz",prop2:"qwrq"}]
let index = x.findIndex(x => x.prop1 === 'zxvz') 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-07-26T11:03:35.163

Georg 已经提到 ES6 有 Array.findIndex 。其他一些答案是使用 Array.some 方法的 ES5 的解决方法。

一种更优雅的方法是

```
var index;
for(index = yourArray.length; index-- > 0 && yourArray[index].prop2 !== "yutu";); 
```

同时我想强调，Array.some 可以用二进制或其他有效的搜索技术来实现。因此，在某些浏览器中，它可能比 for 循环表现更好。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-12-15T15:08:59.137

另一种简单的方法是：

```
 function getIndex(items) {
        for (const [index, item] of items.entries()) {
            if (item.prop2 === 'yutu') {
                return index;
            }
        }
    }

const myIndex = getIndex(myArray); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-04-14T10:18:10.990

为什么你不想精确地迭代？新的[Array.prototype.forEach](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)非常适合这个目的！

如果需要，您可以使用二叉搜索树通过单个方法调用进行查找。这是 JS 中 BTree 和红黑搜索树的简洁实现 - [https://github.com/vadimg/js_bintrees](https://github.com/vadimg/js_bintrees) - 但我不确定你是否可以同时找到索引。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-01-20T18:04:08.360

```
var list =  [
                {prop1:"abc",prop2:"qwe"},
                {prop1:"bnmb",prop2:"yutu"},
                {prop1:"zxvz",prop2:"qwrq"}
            ];

var findProp = p => {
    var index = -1;
    $.each(list, (i, o) => {
        if(o.prop2 == p) {
            index = i;
            return false; // break
        }
    });
    return index; // -1 == not found, else == index
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-12-05T14:12:24.433

使用 Array.reduce() 的一步 - 没有 jQuery

```
var items = [{id: 331}, {id: 220}, {id: 872}];

var searchIndexForId = 220;
var index = items.reduce(function(searchIndex, item, index){
  if(item.id === searchIndexForId) { 
    console.log('found!');
    searchIndex = index;
  }
  return searchIndex;
}, null); 
```

`null`如果未找到索引，将返回。

# mongodb - Mongodb map减少琐碎查询

> ID：15997880
> 
> 赞同：0
> 
> 时间：2013-04-14T10:07:04.133
> 
> 标签：mongodb, mapreduce

我有一张下面的地图：

```
var mapFunction = function() {

if(this.url.match(/http:\/\/test.com\/category\/.*?\/checkout/)) {
var key=this.em;
var value = {
    url : 'checkout',
    count : 1,
    account_id:this.accId

}emit(key,value); };
if(this.url.match(/http:\/\/test.com\/landing/)) {
var key=this.em;
var value = {
    url : 'landing',
    count : 1,
    account_id:this.accId

}emit(key,value); };

} 
```

然后我定义了 reduce 如下所示：

```
var reduceFunction = function (keys, values) {
var reducedValue = {count_checkout:0, count_landing:0};
for (var idx = 0; idx < values.length; idx++) {
    if(values[idx].url=='checkout'){
        reducedValue.count_checkout++;
    }
    else {
        reducedValue.count_landing++;
    }
}
return reducedValue;
} 
```

现在，假设我只有 1 条记录：

```
{
        "_id" : ObjectId("516a7cff6dad5949ddf3f7b6"),
        "ip" : "1.2.3.4",
        "accId" : 123,
        "em" : "testing@test.com",
        "pgLdTs" : ISODate("2013-04-11T18:30:00Z"),
        "url" : "http://test.com/category/prr/checkout",
        "domain" : "www.test.com",
        "pgUdTs" : ISODate("2013-04-14T09:55:11.682Z"),
        "title" : "Test",
        "ua" : "Mozilla",
        "res" : "1024*768",
        "rfr" : "www.google.com"
} 
```

现在，如果我触发我的地图减少，如下所示：

```
db.test_views.mapReduce(mapFunction,reduceFunction,{out:{inline:1}}) 
```

我得到以下结果返回：

```
{
          "_id" : "testing@test.com",
          "value" : {
                  "url" : "checkout",
                  "count" : 1,
                  "account_id" : 123
          }
  } 
```

所以，它基本上是把地图还给我。现在，如果我为这个电子邮件 ID 添加另一个文档。最后它变成了下面的样子。

```
{
        "_id" : ObjectId("516a7cff6dad5949ddf3f7b6"),
        "ip" : "1.2.3.4",
        "accId" : 123,
        "em" : "testing@test.com",
        "pgLdTs" : ISODate("2013-04-11T18:30:00Z"),
        "url" : "http://test.com/category/prr/checkout",
        "domain" : "www.test.com",
        "pgUdTs" : ISODate("2013-04-14T09:55:11.682Z"),
        "title" : "Test",
        "ua" : "Mozilla",
        "res" : "1024*768",
        "rfr" : "www.google.com"
}
{
        "_id" : ObjectId("516a7e1b6dad5949ddf3f7b7"),
        "ip" : "1.2.3.4",
        "accId" : 123,
        "em" : "testing@test.com",
        "pgLdTs" : ISODate("2013-04-11T18:30:00Z"),
        "url" : "http://test.com/category/prr/checkout",
        "domain" : "www.test.com",
        "pgUdTs" : ISODate("2013-04-14T09:59:55.326Z"),
        "title" : "Test",
        "ua" : "Mozilla",
        "res" : "1024*768",
        "rfr" : "www.google.com"
} 
```

然后，我再次启动地图减少，它给了我正确的结果

```
{
         "_id" : "testing@test.com",
         "value" : {
                 "count_checkout" : 2,
                 "count_landing" : 0
         }
 } 
```

任何人都可以帮助我理解为什么它会返回单个文档的地图并且不会在减少中进行计数。

感谢帮助。

-拉利特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T22:16:50.180

> 任何人都可以帮助我理解为什么它会返回单个文档的地图并且不会在 reduce 中进行计数。

Reduce 步骤将具有相同键的文档组合成一个结果文档。如果您的 Map 函数发出的数据中只有一个键，则数据已经“减少”并且不会调用 reduce()。

这是[MapReduce](http://en.wikipedia.org/wiki/MapReduce)算法的预期行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T23:29:01.113

reduce 函数应该返回与 map 函数发出的相同类型的值对象。
就像您所经历的那样，当有一个与键关联的值时 - 根本不会调用 reduce 函数。

来自[MongoDB MapReduce 文档](http://docs.mongodb.org/manual/reference/method/db.collection.mapReduce/)：

> **reduce函数的要求：**
> ...
> 返回对象的类型必须与map函数发出的值的类型相同，以确保以下操作为真：
> reduce(key, [ C, reduce(key, [ A, B ]) ] ) == reduce(key, [ C, A, B ])

# jquery - 将复杂类型从 jquery 发布到 mvc

> ID：15997881
> 
> 赞同：3
> 
> 时间：2013-04-14T10:07:11.477
> 
> 标签：jquery, asp.net-mvc-4, model-binding

我有一个复杂的类型，看起来像：

```
 public class ReviewProcessLevelModel {
             public int levelType;
             public string user;
             public string field;
             public string[] dtFieldValues;
             public string[] dtUsers;
    } 
```

我发布的字符串看起来像（在 JSON.stringify 函数之后）：

```
 [
       {"levelType":0,"user":"71","field":null,"dtFieldValues":null,"dtUsers":null},
       {"levelType":1,"user":null,"field":"Dummy","dtFieldValues":null,"dtUsers":null}
     ] 
```

我的控制器看起来像：

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult saveCampaign(IList<ReviewProcessLevelModel> ReviewProcess) 
```

最后，这就是我将数据发送到控制器的方式：

```
 $.ajax({
        type: "POST",
        url: "@Url.Action("saveCampaign", "SaasAccessCertification")",
        traditional: true,
        contentType: 'application/json',
        dataType: 'json',
        data: getRPData() // returns the string above
    }).done(function (resp) {
        debugger;
    }).error(function (resp) {
        debugger;
    }); 
```

该列表带有 2 ReviewProcessLevelModel，但对象始终为空值。

请告知并感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T13:39:04.923

对了，三个问题。

1 - 您的控制器参数的名称必须与您发布的对象的名称匹配，因此您的 json 字符串变为：

```
'{"ReviewProcess": [{"levelType": 0,"user": "71","field": null,"dtFieldValues": null,"dtUsers": null},{"levelType": 1,"user": null,"field": "Dummy","dtFieldValues": null,"dtUsers": null}]}' 
```

2 - 您应该`contentType`在您的选项中指定`post`：

```
contentType: 'application/json', 
```

3 - 这可能听起来很疯狂，但你的属性必须有 getter 和 setter。

```
public class ReviewProcessLevelModel
{
    public int levelType { get; set; }
    public string user { get; set; }
    public string field { get; set; }
    public string[] dtFieldValues { get; set; }
    public string[] dtUsers { get; set; }
} 
```

我拿走了您的代码，进行了这些更新，然后一切正常！

# cuda - 使用 CUDA 创建单位矩阵

> ID：15997888
> 
> 赞同：1
> 
> 时间：2013-04-14T10:07:50.090
> 
> 标签：cuda

嗨，我尝试用 CUDA 创建一个单位矩阵，但输出只是：零

```
__global__ void initIdentityGPU(int *devMatrix, int numR, int numC) {

    int x = blockIdx.x;
    int y = blockIdx.y;

    int offset = x * y;

    for (int i = 0; i < x ; i++) {

        for (int j = 0; j < numR; j++) {
            if (i == j)
                devMatrix[offset] = 1;
            else
                devMatrix[offset] = 0;

        }

    }

} 
```

为什么只放0？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T10:33:13.703

最简单的方法是：

```
__global__ void initIdentityGPU(int **devMatrix, int numR, int numC) {
    int x = blockDim.x*blockIdx.x + threadIdx.x;
    int y = blockDim.y*blockIdx.y + threadIdx.y;
    if(y < numR && x < numC) {
          if(x == y)
              devMatrix[y][x] = 1;
          else
              devMatrix[y][x] = 0;
    }
} 
```

然后您将其启动为：

```
dim3 blockDim(BLOCK_DIM_X, BLOCK_DIM_Y);  
dim3 gridDim((numC + BLOCK_DIM_X - 1) / BLOCK_DIM_X, (numR + BLOCK_DIM_Y - 1) / BLOCK_DIM_Y);
initIdentityGPU<<<gridDim, blockDim>>>(matrix, numR, numC); 
```

它只是运行与矩阵单元一样多的线程，每个线程获取其单元的坐标，并且在单元位于它分配的矩阵的对角线的情况下，`1`或者`0`以其他方式。请注意，代码未经测试。

# tcl - 如何从另一个列表中减去一个列表并检查 a 模式是否按顺序排列？

> ID：15997891
> 
> 赞同：2
> 
> 时间：2013-04-14T10:08:03.380
> 
> 标签：tcl

假设我有一个看起来像这样的大列表：

**一个**

```
ab1 ab2 ab3 ab5 ab6 ac1 ac2 ac3 ac4 ac5 ac6 ac7 ac8 ac9 xy1 xy2 xy3 xy4 xy5 xy6 xy7 xy8 xy9 xy10 xy11 
```

和

**乙**

```
ac1 ac4 ac5 ac6 ac7 ac8 xy2 xy3 xy4 xy5 xy6 
```

做**A - B**模式后变成这样：

```
ab1 ab2 ab3 ab5 xy1 ab6 ac2 ac3 xy7 xy9 xy8 xy10 xy11 ac9 
```

现在我必须对所有值进行排序，使其变为

```
ab1 ab2 ab3 ab5 ab6 ac2 ac3 ac9 xy1 xy7 xy8 xy9 xy10 xy11 
```

然后我需要检查所有序列值的存在，以便我得到序列的第一个和第一个值。在上述情况下

```
ab1 ab2 ab3 are in sequnce so for this part 1st value = ab1 and last value = ab3
ab5 ab6 --- first value = ab5 and last value ab6
ac2 ac3 --- first value = ac2 and last value = ac3
ac9   --- first value and last value same = ac9 
xy1 --- first value and last value same = xy1
xy7 xy8 xy9 xy10 xy11 --- first value = xy7 and last value = xy7 and last value = xy11 
```

**注意**：列表或数组中的所有值都是唯一的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T10:53:33.037

如果您使用的是 Tcl 8.6，那么[`lmap`](http://www.tcl.tk/man/tcl8.6/TclCmd/lmap.htm)是第一个任务的正确工具：

```
set filtered [lmap e $A {if {$e in $B} continue}] 
```

排序：

```
set sorted [lsort $filtered] 
```

最后一个任务.. 好，让我们使用前 2 个字符。

```
set filter {}
set last {}
foreach e $sorted {
    if {[string range $e 0 1] ne $filter} {
       lappend res $last $e
       set filter [string range $e 0 1]
    }
    set last $e
}
lappend res $last
set res [lrange $res 1 end] 
```

现在您有了一个包含第一个和最后一个元素的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T14:11:42.880

我的不是很漂亮，但它可以解决问题^^;

```
set group [list "ab1" "ab2" "ab3" "ab5" "ab6" "ac2" "ac3" "ac9" "xy1" "xy7" "xy8" "xy9" "xy10" "xy11"]

set number 0
set pattern 0
set result ""

foreach n $group {
    if {$pattern == 0} {
        set current $n
        lappend result $n
        regexp {([a-z]{2})(\d+)} $n - pattern number
        continue
    }
    regexp {([a-z]{2})(\d+)} $n - match1 match2
    if {$match1 == $pattern && [incr number] == $match2} {
        set current $n
        continue
    } else {
        set pattern $match1
    }
    if {[lsearch $result $current] == -1} {
        lappend result $current
    }
    lappend result $n
    set current $n
    set number $match2
}
lappend result $n

# $result = "ab1 ab3 ab5 ab6 ac2 ac3 ac9 xy1 xy7 xy11" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T10:49:45.177

查看[tcllib](http://tcllib.sf.net)[`struct::set`](http://tcllib.sourceforge.net/doc/struct_set.html)和[`struct::list`](http://tcllib.sourceforge.net/doc/struct_list.html)软件包。

# ms-access - 错误数据库：INSERT INTO 语句中的语法错误

> ID：15997893
> 
> 赞同：-1
> 
> 时间：2013-04-14T10:08:06.297
> 
> 标签：ms-access, vb.net-2010

我的图书馆系统有问题。我收到一条错误消息，指出“错误数据库：INSERT INTO 语句中的语法错误”。我正在使用 Access 作为数据库。这是我的代码：

```
Public Class Form7
    Private Sub Form7_FormClosed(ByVal sender As Object, ByVal e As System.Windows.Forms.FormClosedEventArgs) Handles Me.FormClosed
        Me.Text = "Registration"
        sqlCon.Close()
        sqlCon.Close()
        clear()
    End Sub

    Private Sub Form7_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        If Split(Me.Text, " - ")(1) = "Edit" Then
            sqlSTR = "Select * From BookRegister WHERE id = " & globalID
            ExecuteSQLQuery(sqlSTR)
            If sqlDr.Read Then
                TextBox1.Text = sqlDr(1)
                TextBox2.Text = sqlDr(2)
                TextBox3.Text = sqlDr(3)
                TextBox4.Text = sqlDr(4)
                TextBox5.Text = sqlDr(5)
                TextBox6.Text = sqlDr(6)
                TextBox7.Text = sqlDr(7)
                TextBox7.Text = sqlDr(8)

            End If

        End If
    End Sub

    Private Sub TextBox6_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox6.TextChanged

    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        If TextBox1.Text = "" Then
            MsgBox("Please fill up all the information", MsgBoxStyle.Information)
        ElseIf TextBox2.Text = "" Then
            MsgBox("Please fill up all the information", MsgBoxStyle.Information)
        ElseIf TextBox3.Text = "" Then
            MsgBox("Please fill up your information", MsgBoxStyle.Information)
        ElseIf TextBox4.Text = "" Then
            MsgBox("Please fill up your information", MsgBoxStyle.Information)
        ElseIf TextBox5.Text = "" Then
            MsgBox("Please fill up your information", MsgBoxStyle.Information)
        ElseIf TextBox6.Text = "" Then
            MsgBox("Please fill up your information", MsgBoxStyle.Information)
        ElseIf TextBox7.Text = "" Then
            MsgBox("Please fill up all the information", MsgBoxStyle.Information)
        ElseIf TextBox8.Text = "" Then
            MsgBox("Please fill up all the information", MsgBoxStyle.Information)
        ElseIf Split(Me.Text, " - ")(1) = "Add" Then
            sqlSTR = "INSERT INTO BookRegister(ISBN, Title, Author, Volume, Pages, Publisher, Section, Year_Published) " & _
                              "VALUES('" & TextBox1.Text & "','" & TextBox2.Text & "','" & TextBox3.Text & "','" & TextBox4.Text & "','" & TextBox5.Text & "'" & _
                              ",'" & TextBox6.Text & "','" & TextBox7.Text & "','" & TextBox8.Text & ")"""

            ExecuteSQLQuery(sqlSTR)
            MsgBox("New record has been saved.", MsgBoxStyle.Information)

            clear()
        Else
            sqlSTR = "UPDATE BookRegister SET ISBN ='" & TextBox1.Text & "', " & _
                     "title='" & TextBox2.Text & "', " & _
                     "author='" & TextBox3.Text & "', " & _
                     "volume='" & TextBox4.Text & "', " & _
                     "pages='" & TextBox5.Text & "', " & _
                     "publisher='" & TextBox6.Text & "', " & _
                     "section='" & TextBox7.Text & "', " & _
                     "year_published='" & Format("yyyy", TextBox8.Text) & "', " & _
                     " WHERE id =" & globalID
            ExecuteSQLQuery(sqlSTR)
            MsgBox("Record has been updated !!", MsgBoxStyle.Information)
            clear()
            globalID = 0
            edit = False
            Me.Close()
        End If
        FillListView(Form6.ListView1, ExecuteSQLQuery("select * from bookregister"))
    End Sub

    Private Sub clear()
        Textbox1.Text = ""
        TextBox2.Text = ""
        TextBox3.Text = ""
        TextBox4.Text = ""
        TextBox5.Text = ""
        TextBox6.Text = ""
        TextBox7.Text = ""
        TextBox8.Text = ""

    End Sub
    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        Me.Close()

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:26:34.177

看起来您在 INSERT 语句末尾缺少最后一个单引号，然后在右括号后附加一个无关的双引号，即

```
& "','" & TextBox8.Text & ")""" 
```

应该

```
& "','" & TextBox8.Text & "')" 
```

# html - 网站背景不会在其他移动设备上调整大小

> ID：15997895
> 
> 赞同：0
> 
> 时间：2013-04-14T10:08:17.400
> 
> 标签：html, css, media-queries

这是这个网站： [http ://www.morpheuscommerce.com/](http://www.morpheuscommerce.com/)

现在，当我在 ipad 上查看该网站时会发生这种情况：http: [//i.imgur.com/I4cQ9Yb.jpg](http://i.imgur.com/I4cQ9Yb.jpg)

类似的事情发生在 iPhone 上。在桌面上它起初看起来不错，但是当您调整浏览器大小并将滚动条向右移动时，背景坏了！

我已经尝试了很多东西来尝试解决这个问题，但我不确定首先是什么导致了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:06:41.467

您的网站没有响应式布局。

您可以使用 css @media 更改它

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen 
and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {
/* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
/* Styles */
}

/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
/* Styles */
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
/* Styles */
}

/* Desktops and laptops ----------- */
@media only screen 
and (min-width : 1224px) {
/* Styles */
}

/* Large screens ----------- */
@media only screen 
and (min-width : 1824px) {
/* Styles */
}

/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
} 
```

搜索有关响应式布局的更多信息。

# c# - 基类和派生类的混淆

> ID：15997900
> 
> 赞同：0
> 
> 时间：2013-04-14T10:08:49.817
> 
> 标签：c#

基本场景是这样的：

```
class MyBase {}
class MyClassA : MyBase {}
class MyClassB : MyBase {}
class MyClassC : MyBase {} 
```

我有一个被调用的`IEnumerable`集合，它实际上包含一个或多个项目的集合。总是只有一个或另一个。`MyBase``source``MyClassA``MyClassB``MyClassC`

我现在想创建该集合的过滤副本，因此我执行类似于此的操作：

```
IEnumerable<MyBase> filtered = source.Where(s => s.SomeProperty == someVar) 
```

问题是，如果我在源代码上调用 GetType() 方法，它会说它是 MyClass（A、B 或 C）的集合。但是在过滤后执行 GetType() 表示它是 MyBase 的集合！

我需要它保持不变！

这给我带来了问题，因为我将过滤后的集合绑定到`PivotControl`现在无法`MyClass`在过滤后的集合中看到它需要的属性。

因为我们不知道集合中的 A、B 或 C 类中的哪一个，所以我什至尝试过这个：

```
var entity = source.FirstOrDefault();    
IEnumerable<MyBase> filtered = FilterData(entity);

IEnumerable<MyBase> FilterData<T>(T typeOfObject) where T : MyBase
{
    IEnumerable<T> data = from s in source where s.SomeProperty == someVar select s as T;
    return data; 
```

- 或者 -

```
 return source.Where(s => s.SomeProperty == someVar).Cast<T>()'
} 
```

但它仍然以相同的方式显示。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:19:34.547

我对您的问题感到非常困惑，但认为这完全与`Cast`扩展方法有关：

```
IEnumerable<MyClass> filtered = source.Where(s => s.SomeProperty = someVar).Cast<MyClass>(); 
```

# java - Android：加载图像并使用重绘方法

> ID：15997901
> 
> 赞同：-1
> 
> 时间：2013-04-14T10:08:51.287
> 
> 标签：java, android, eclipse, user-interface

我是android编程的新手。
我正在尝试将图像添加到 Java (Eclipse) 中的 android 应用程序 {NO XML!! 只有java代码}。

在Java中，我曾经像这样加载图像：

```
Image = new ImageIcon(imagePath).getImage(); 
```

我也使用了重绘方法。

我的问题是如何在 android 中做同样的事情？
我想用 Java 代码而不是 XML 加载图像。

我找到了一些教程，但其中大多数都是 XML 格式的，有些根本不起作用。
提前致谢。
罗恩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:21:01.443

android中最常见的两种图像类型：

1-**位图**
，您可以使用从资源中加载位图

```
 Bitmap bitmap= BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher); 
```

当从 Internet 或外部目录加载图像或使用画布绘制图像时，通常会使用这种方式。

2- **Drawable**
，您可以使用以下方法从资源中加载drawable：

```
Drawable drawabl = getResources().getDrawable(R.drawable.ic_launcher); 
```

在为视图设置图像时使用这种方式，例如`ImageView`和`View`背景。

# c# - 从实体框架模型生成数据库

> ID：15997903
> 
> 赞同：0
> 
> 时间：2013-04-14T10:09:03.733
> 
> 标签：c#, sql-server, asp.net-mvc, entity-framework

我计划制作一个包含多个模型的实体框架类，这些模型将创建数据库表结构。

做了一些工作并想出了这个模型结构：

```
public class Search
{
    public int SearchId { get; set; }
    public string SearchName { get; set; }
    public Times t { get; set; }
    public Media m { get; set; }

}

public class Times
{
    public int TimesId { get; set; }
    DateTime FromDate { get; set; }
    DateTime ToDate { get; set; }
    String Days { get; set; }
    List<HourSlice> TSlist;
}

public class HourSlice
{
    string Name { get; set; }
    string Slice { get; set; } // will contain both -from hour- and -to hour- slice

}

public class Media
{
    int MediaId { get; set; }
    List<OperatorType> ot;
    List<Operator> op;
    List<Program> p;
    List<Sector> s;
    List<Categorie> cat;
    List<MisradPirsum> mp;
}

public class OperatorType
{
    int OperatorTypeID { get; set; }
    string OperatorTypeName { get; set; }
}

public class Operator
{
    int OperatorID { get; set; }
    string OperatorName { get; set; }

}

public class Program
{
    int ProgramID { get; set; }
    string ProgramName { get; set; }
}

public class Sector
{
    int SectorID { get; set; }
    string SectorName { get; set; }
}

public class Categorie
{
    public int CategorieId { get; set; }
    List<Branch> br;
    List<SubBranch> sbr;
    List<SubSubBranch> ssbr;

}

public class Branch
{
    int BranchID { get; set; }
    string BranchName { get; set; }
}

public class SubBranch
{
    int SubBranchID { get; set; }
    string SubBranchName { get; set; }

}

public class SubSubBranch
{
    int SubSubBranchID { get; set; }
    string SubSubBranchName { get; set; }
}

public class MisradPirsum
{
    public int MisradPirsumId { get; set; }
    List<Company> c;
}

public class Company
{
    int CompanyID { get; set; }
    string CompanyName { get; set; }
} 
```

Global.asax 的发起人：

```
 public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        Database.DefaultConnectionFactory = new SqlConnectionFactory(ConfigurationManager.ConnectionStrings["DBS"].ConnectionString);
        Database.SetInitializer<DBS>(new Search_Initializer());

        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);

     // Database.SetInitializer<PlayWithMVC4.Models.DBS>(new DropCreateDatabaseAlways<PlayWithMVC4.Models.DBS>());
        Database.SetInitializer<PlayWithMVC4.Models.DBS>(new DropCreateDatabaseIfModelChanges<PlayWithMVC4.Models.DBS>());

    } 
```

如您所见，Search 类是所有其他类的父类。在它下面是与 Hourslice 表相关的 Times 表。Media 表也在 Search 类下面，它下面有 6 个表，有几个表有自己的子表，每个父表都有自己的 ID。

主要目标是创建一个搜索数据库，该数据库将具有所有可能的数据结构来保存搜索并与原始数据库交互以获取每个搜索属性/参数的实际数据。

我在创建数据库时遇到问题，出现以下错误：“错误 3004：从第 30 行开始映射片段时出现问题：没有为 Set Searches 中的属性 Search.m 指定映射。\r\n带有键 (PK) 的实体将不会舍入-trip when:\r\n Entity 类型为 [PlayWithMVC4.Models.Search]\r\n"}"

我确定结构/逻辑有问题，但我不确定从哪里开始挖掘，非常感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:15:27.757

首先，您要确保要映射的所有属性都是公共的，并且它们实际上是属性而不是字段。

例如，您的类型上的成员`Media`都是私有的，因为您没有指定公共访问修饰符。集合成员也是字段，而不是属性，因为它们没有 getter 和 setter。

此外，如果您希望支持用于更改跟踪或延迟加载的代理类型，请[在此处](http://msdn.microsoft.com/en-gb/library/vstudio/dd468057%28v=vs.100%29.aspx)查看完整的要求列表。

# php - 相同的 sql 查询在 sql server 和 php 输出上给出不同的结果

> ID：15997909
> 
> 赞同：0
> 
> 时间：2013-04-14T10:10:00.587
> 
> 标签：php, sql, codeigniter

这是sql查询

```
 SELECT * FROM seedbed
LEFT OUTER JOIN fertilizers AS seedfert ON seedfert.fert_protocol =seedbed.seed_protocol
LEFT OUTER JOIN pesticides AS seedpest ON seedpest.pest_protocol = seedbed.seed_protocol
LEFT OUTER JOIN fertilizers_list AS seedfert_list ON  seedfert.fert_id =seedfert_list.id    
LEFT OUTER JOIN pesticides_list AS seedpest_list ON  seedpest.pest_id = seedpest_list.id
LEFT OUTER JOIN field ON field.field_protocol = seedbed.seed_protocol + "%"         
LEFT OUTER JOIN fertilizers AS fieldfert ON fieldfert.fert_protocol = field.field_protocol
LEFT OUTER JOIN pesticides AS fieldpest ON fieldpest.pest_protocol = field.field_protocol
LEFT OUTER JOIN stock ON stock.field_protocol = field.field_protocol
LEFT OUTER JOIN fertilizers_list AS fieldfert_list ON  fieldfert.fert_id =fieldfert_list.id 
LEFT OUTER JOIN pesticides_list AS fieldpest_list ON  fieldpest.pest_id = fieldpest_list.id
WHERE seedbed.seed_protocol LIKE "1/2013/2%"
ORDER BY field_num; 
```

在 php 中是完全相同的，我使用 codeigniter，但我不用于这个活动记录库，所以几乎相同。

```
$sql = "SELECT * FROM seedbed
LEFT OUTER JOIN fertilizers AS seedfert ON seedfert.fert_protocol = seedbed.seed_protocol
LEFT OUTER JOIN pesticides AS seedpest ON seedpest.pest_protocol = seedbed.seed_protocol
LEFT OUTER JOIN fertilizers_list AS seedfert_list ON  seedfert.fert_id = seedfert_list.id   
LEFT OUTER JOIN pesticides_list AS seedpest_list ON  seedpest.pest_id = seedpest_list.id
LEFT OUTER JOIN field ON field.field_protocol = seedbed.seed_protocol + '%'         
LEFT OUTER JOIN fertilizers AS fieldfert ON fieldfert.fert_protocol = field.field_protocol
LEFT OUTER JOIN pesticides AS fieldpest ON fieldpest.pest_protocol = field.field_protocol
LEFT OUTER JOIN stock ON stock.field_protocol = field.field_protocol
LEFT OUTER JOIN fertilizers_list AS fieldfert_list ON  fieldfert.fert_id =fieldfert_list.id 
LEFT OUTER JOIN pesticides_list AS fieldpest_list ON  fieldpest.pest_id = fieldpest_list.id
WHERE seedbed.seed_protocol LIKE '".$this->db->escape_like_str($ins_protocol)."%'
ORDER BY field_num";
$query = $this->db->query($sql);
$data = $query->result();
print_r($data); 
```

现在的问题是，在 sql server 中我得到了我应该得到的所有结果，尽管在 php 中我没有得到前两个 JOINS 的结果。我不知道为什么？

我希望有人知道发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:57:24.550

在 Codeigniter 中，运行：

```
echo $this->db->last_query(); 
```

并与您的非 CI 查询进行比较

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T12:46:02.330

检查整个数据库中可能导致连接出现问题的 NULL。[由于 NULL 处理，其他人](https://stackoverflow.com/questions/15576170/sql-query-with-like-returns-differently-in-php)也遇到了 PHP 返回奇怪结果的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:44:18.490

正如 OP 所暗示的，这个问题很可能与在多个表中具有相同的字段名称有关，因此在 PHP 中执行和返回时它们将被组合/覆盖。

解决方案是为所有名称冲突的字段/列提供唯一别名。不幸的是，我想不出一种自动执行此操作的方法，因此我认为这必须是手动过程。

表格的分组方式也可能存在问题，所以以防万一我会加上一堆括号！

```
SELECT seedbed.*, 
       seedfert.field1 AS seedfert_field1, seedfert.field2 AS seedfert_field2, 
       seedpest.field1 AS seedpest_field1, seedpest.field2 AS seedpest_field2, 
       seedfert_list.field1 AS seedfert_list_field1, seedfert_list.field2 AS seedfert_list_field2, 
       seedpest_list.field1 AS seedpest_list_field1, seedpest_list.field2 AS seedpest_list_field2, 
       etc...
FROM (((((((((seedbed
    LEFT OUTER JOIN fertilizers AS seedfert ON seedfert.fert_protocol = seedbed.seed_protocol)
    LEFT OUTER JOIN pesticides AS seedpest ON seedpest.pest_protocol = seedbed.seed_protocol)
    LEFT OUTER JOIN fertilizers_list AS seedfert_list ON  seedfert.fert_id = seedfert_list.id)
    LEFT OUTER JOIN pesticides_list AS seedpest_list ON  seedpest.pest_id = seedpest_list.id)
    LEFT OUTER JOIN field ON field.field_protocol = seedbed.seed_protocol + '%')
    LEFT OUTER JOIN fertilizers AS fieldfert ON fieldfert.fert_protocol = field.field_protocol)
    LEFT OUTER JOIN pesticides AS fieldpest ON fieldpest.pest_protocol = field.field_protocol)
    LEFT OUTER JOIN stock ON stock.field_protocol = field.field_protocol)
    LEFT OUTER JOIN fertilizers_list AS fieldfert_list ON  fieldfert.fert_id =fieldfert_list.id)
    LEFT OUTER JOIN pesticides_list AS fieldpest_list ON  fieldpest.pest_id = fieldpest_list.id
WHERE seedbed.seed_protocol LIKE '".$this->db->escape_like_str($ins_protocol)."%'
ORDER BY field_num 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-03T08:36:36.050

这对我有用：

```
SET ANSI_NULLS ON 
SET QUOTED_IDENTIFIER ON 
SET CONCAT_NULL_YIELDS_NULL ON 
SET ANSI_WARNINGS ON 
SET ANSI_PADDING ON 
```

# android - 听很多按钮的正确方法，每个按钮都做其他事情 Android

> ID：15997919
> 
> 赞同：0
> 
> 时间：2013-04-14T10:11:31.873
> 
> 标签：android, onclick, switch-statement, listen

我有一堆按钮要听。每个按钮增加或减少 EditText 中的一个值。由于每个 Button 都会更改不同的 EditText，因此我只需要切换即可。有相当多的按钮。一些按钮做同样的事情，除了它们根据用户偏好被隐藏。对于 XML 中的每个按钮，我当然都做了 android:onClick="plusEditTexts" 或 android:onClick="minEditTexts"。

```
public void plusEditTexts(View v) {
    switch(v.getId()) {
        case R.id.firstButton1Inc:
        case R.id.secondButton1Inc:
        // EditText1++
        break;
        case R.id.firstButton2Dec:
        case R.id.secondButton2Dec:
        // EditText2++
        break;
        ...
    }
}

public void minEditTexts(View v) {
    switch(v.getId()) {
        case R.id.firstButton1Inc:
        case R.id.secondButton1Inc:
        // EditText1--
        break;
        case R.id.firstButton2Dec:
        case R.id.secondButton2Dec:
        // EditText2--
        break;
        ...
    }
} 
```

我想知道这是否是最好的方法？有相当多的按钮。所以 switch 语句变得很大。

干杯，

大安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:16:30.343

您可以使用要修改的设置`tag`按钮的属性。然后，您可以像这样检索资源 id的 int 值。-`id``TextView``TextView`

```
int textResId = getResources().getIdentifier(v.getTag().toString(), "id", getPackageName()); 
```

摆脱整个案例句子，所以你的代码看起来像.-

```
public void plusEditTexts(View v) {
    int textResId = getResources().getIdentifier(v.getTag().toString(), "id", getPackageName());
    EditText editText = (EditText) findViewById(textResId);
    // Do your EditText stuff
}

public void minEditTexts(View v) {
    int textResId = getResources().getIdentifier(v.getTag().toString(), "id", getPackageName());
    EditText editText = (EditText) findViewById(textResId);
    // Do your EditText stuff
} 
```

# x86 - 使用 C++ 列出 Windows 上所有已安装的程序

> ID：15997929
> 
> 赞同：4
> 
> 时间：2013-04-14T10:13:26.803
> 
> 标签：x86, 64-bit, installed-applications

我遇到了这个问题。我必须列出 Windows 操作系统（x86 和 x64）上所有已安装的程序，包括 Internet Explorer 和其他 Windows 组件。

我尝试了一些解决方案：

1.  将 WMI 与 query 一起使用`"SELECT * FROM Win32_Product"`，但结果没有 Internet Explorer，并且在 x64 上，它没有列出所有程序。

2.  读取注册表：我尝试读取：`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall`在 x86 上，但未列出 IE。

总结，我需要列出 x86 和 x64 操作系统上所有已安装的程序和 Windows 组件（如 IE）。

谁能帮我？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:15:58.257

试试这个 WMI 查询脚本，看看它是否也缺少您的 x64 内容。如果没有，则在 x64 命令 shell 下重试。我怀疑您正在以 32 位模式执行程序：

```
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objTextFile = objFSO.CreateTextFile("c:\scripts\software.tsv", True)
strComputer = "."
Set objWMIService = GetObject("winmgmts:" _
 & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")
Set colSoftware = objWMIService.ExecQuery _
 ("SELECT * FROM Win32_Product")
objTextFile.WriteLine "Caption" & vbtab & _
"Description" & vbtab & "Identifying Number" & vbtab & _
"Install Date" & vbtab & "Install Location" & vbtab & _
"Install State" & vbtab & "Name" & vbtab & _
"Package Cache" & vbtab & "SKU Number" & vbtab & "Vendor" & vbtab _
 & "Version"
For Each objSoftware in colSoftware
 objTextFile.WriteLine objSoftware.Caption & vbtab & _
 objSoftware.Description & vbtab & _
 objSoftware.IdentifyingNumber & vbtab & _
 objSoftware.InstallLocation & vbtab & _
 objSoftware.InstallState & vbtab & _
 objSoftware.Name & vbtab & _
 objSoftware.PackageCache & vbtab & _
 objSoftware.SKUNumber & vbtab & _
 objSoftware.Vendor & vbtab & _
 objSoftware.Version
Next
objTextFile.Close 
```

来源： [枚举已安装的软件](http://technet.microsoft.com/en-us/library/ee156540.aspx)

# java - 计算2个数组之间的百分比并输出一个新数组

> ID：15997930
> 
> 赞同：1
> 
> 时间：2013-04-14T10:13:28.407
> 
> 标签：java, arrays, percentage

对于你们大多数人来说，这将非常简单，但我是新手——所以不要太讨厌！好的，所以我有两个数组，一个显示“正确分数”，另一个显示“错误分数”。我想使用这些显示正确百分比的新数组。

我已经写了 ：

```
int[] correct1 = {20, 20, 13, 15, 22, 18, 19, 21, 23, 25};
int[] incorrect1 = {2, 1, 5, 2, 2, 5, 8, 1, 0, 0, 1};

for(int a = 0; a < correct1.length; a++ ){ 
        int[] percentage1 = ((correct1[a] / (correct1[a] + incorrect1[a]))*100);
    } 
```

但这给了我 int 和 int[] 之间的类型不匹配。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T10:16:11.800

```
for(int a = 0; a < correct1.length; a++ ){ 
        int[] percentage1 = ((correct1[a] / (correct1[a] + incorrect1[a]))*100);
    } 
```

上面应该是：

```
double[] percentage1 = new double[correct1.length];
for(int a = 0; a < correct1.length; a++ ){ 
    percentage1[a] = (double)((correct1[a] / (correct1[a] + incorrect1[a]))*100);
} 
```

# php - php html多引号无效代码

> ID：15997933
> 
> 赞同：1
> 
> 时间：2013-04-14T10:13:43.970
> 
> 标签：php, html, quotes

如何确保这些引号在 PHP 中有效？

```
<?
    echo "oaktree.addItem('test1<img src='img.png'>', branch1, '');";
    echo "oaktree.addItem('test2<img src='img.png'>', branch1, '');";
?> 
```

问题出在标签中...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:16:34.907

就 PHP 语法而言，您的原始代码是正确的，但正如您已经知道的那样，它不会输出格式正确的 JavaScript。只要正确转义它们，您就可以在 PHP 中的双引号内使用双引号。你可以做

```
<?
    echo "oaktree.addItem('test1<img src=\"img.png\">', branch1, '');";
    echo "oaktree.addItem('test2<img src=\"img.png\">', branch1, '');";
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T10:18:32.230

试试这个：

```
<?php
echo <<<EOT
    oaktree.addItem('test1<img src="img.png">', branch1, '');
    oaktree.addItem('test2<img src="img.png">', branch1, '');
EOT;
?> 
```

# python - 循环 cx_Oracle 游标停顿几分钟

> ID：15997936
> 
> 赞同：0
> 
> 时间：2013-04-14T10:13:54.663
> 
> 标签：python, oracle, cx-oracle

我编写了一个组件，它对数据库执行一系列动态构造的查询，并最终执行一个最终查询，其结果被获取。所有这些逻辑都包含在一个生成器中。其他组件可以连接到这个生成器并将结果假脱机到一个文件，在这个测试的情况下是一个制表符分隔的文本文件。下面是生成器函数的代码：

```
def cycle(self, schema, matchprofile, fixedcond):

    cursor = self.cursor
    cursor.set_schema(schema)
    cursor.execute('TRUNCATE TABLE schema.table')
    metaatts = self.get_metaattributes(schema)

    for condset in matchprofile:
        condsql = self.dostuffwith(self, matchprofile, fixedcond)
        qry = self.qrybase.replace('<<condset>>', condset).replace('<<condsql>>', condsql)
        cursor.execute(qry)             # queries performing logic aganst database

    cursor.execute(self.finalqry)           # select query extracting results

    for row in cursor:
        yield Row(row, metaatts.copy())

    if self.counts:
        self.counter.addto(cursor.rowcount) 
```

是`cursor`一个子类 'cx_Oracle.Cursor'，带有一个增加的`arraysize`和一个`outputtypehandler`将字符串转换为 Unicode 的。 `cycle`从另一种方法调用，该方法将多个输入模式的输出链接到一个流中。

```
cycles = itertools.imap(self.cycle, schemas, itertools.repeat(matchprofile), itertools.repeat(fixedcond))
rows = itertools.chain.from_iterable(cycles) 
```

我在 Python 2.6 上运行它。

我已经运行了整个脚本数十次，在大多数情况下，完成数据库模式大约需要 11 到 12 分钟。这远远超出预期。出乎我意料的是，在某些尝试中，脚本在大约 55 秒内完成。根据我试图替换的旧脚本的性能，这正是我所期望的。

由于新工具可以将多个数据库模式作为输入参数，因此我还提供了六次相同的模式进行了测试。记录的执行时间表明问题仅发生在第一次迭代中：

```
:: 1597 records in 11:33
:: 1597 records in 0:56
:: 1597 records in 0:55
:: 1597 records in 0:55
:: 1597 records in 0:55
:: 1597 records in 0:55

:: total 9582 records in 16:10 
```

我还设法分析了产生合理...

```
109707 function calls (109627 primitive calls) in 57.938 CPU seconds

Ordered by: internal time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
    12   56.154    4.679   56.154    4.680 {function execute at 0x010074B0}
     1    0.819    0.819    0.819    0.819 ora.py:194(__init__)
     1    0.387    0.387    0.387    0.387 {function parse at 0x010075B0}
  1598    0.331    0.000   56.543    0.035 DuplicateDetector.py:219(cycle)
  1598    0.118    0.000    0.118    0.000 {method 'writerow' of '_csv.writer' objects}
 30295    0.029    0.000    0.029    0.000 {_codecs.utf_8_decode}
  1598    0.025    0.000   56.720    0.035 dsv.py:146(generate)
 30310    0.022    0.000    0.029    0.000 {method 'encode' of 'unicode' objects} 
```

...以及时间过长。

```
109707 function calls (109627 primitive calls) in 701.093 CPU seconds

Ordered by: internal time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
  1598  644.514    0.403  699.827    0.438 DuplicateDetector.py:219(cycle)
    12   55.247    4.604   55.248    4.604 {function execute at 0x010084B0}
     1    0.783    0.783    0.783    0.783 ora.py:194(__init__)
     1    0.283    0.283    0.283    0.283 {function parse at 0x010085B0}
  1598    0.121    0.000    0.121    0.000 {method 'write' of '_csv.writer' objects}
 30295    0.036    0.000    0.036    0.000 {_codecs.utf_8_decode}
  1598    0.025    0.000  700.006    0.438 dsv.py:146(generate)
 30310    0.022    0.000    0.028    0.000 {method 'encode' of 'unicode' objects}
 30295    0.021    0.000    0.057    0.000 utf_8.py:15(decode) 
```

很明显，虽然在第一种情况下，数据库操作占用了大部分执行时间，但在后一种情况下，大部分时间都花在了`cycle`生成器上。我使用 Idle 调试器逐步执行此操作，似乎该行`for row in cursor:`负责大约 10 分钟的执行时间。我还注意到，python.exe 进程的内存使用量在此期间不断增加。

现在，问题是在同一行代码的执行时间如此不同（尽管非常可重复）的那一行会发生什么？将 Cursor 用作迭代器时，cx_Oracle 内部做了哪些操作？我可能在包装代码中犯了哪些错误导致这种情况？诚然，我从未见过不使用类或生成器的旧脚本发生任何类似的事情，而只是 `fetchall`从光标处执行。

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T10:25:05.103

不知道这是否适用于您的问题，但我昨天刚刚在为光标设置大数组大小时遇到​​了一个严重的性能问题。

我有两种使用 cursor.fetchall() 和 cursor.fetchmany() 的方法。

cursor.fetchall() 需要 0.1 秒才能完成， cursor.fetchmany() 需要 1.5 秒。

经过一些调试后，我注意到我在 fetch_many() 之前将 cursor.arraysize 设置为一个很大的值（100.000）。这会导致 cxOracle 驱动程序为 arraysize 行数分配内存空间。结合具有大量 varchar2(4000) 列的查询，这总计在每次调用之前分配了一些 x*100MB，然后被释放。

也可能是你的问题。

# c# - 下载到文件并保存到字节数组

> ID：15997942
> 
> 赞同：1
> 
> 时间：2013-04-14T10:14:56.147
> 
> 标签：c#, .net

我正在尝试将文件下载到我的计算机并同时将其保存到字节数组：

```
try
{
    var req = (HttpWebRequest)HttpWebRequest.Create(url);
    var fileStream = new FileStream(filePath,
        FileMode.Create, FileAccess.Write, FileShare.Write);

    using (var resp = req.GetResponse())
    {
        using (var stream = resp.GetResponseStream())
        {
            byte[] buffer = new byte[0x10000];
            int len;
            while ((len = stream.Read(buffer, 0, buffer.Length)) > 0)
            {
                //Do with the content whatever you want
                // ***YOUR CODE*** 

                MemoryStream memoryStream = new MemoryStream();
                if (len > 0)
                {
                    memoryStream.Write(buffer, 0, len);
                    len = stream.Read(buffer, 0, buffer.Length);
                }

                file = memoryStream.ToArray();
                fileStream.Write(buffer, 0, len);
            }
        }
    }

    fileStream.Close();
}
catch (Exception exc) { } 
```

我注意到它并没有下载所有文件。

我想这样做是因为我想下载一个文件并同时使用它。知道为什么会发生这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-27T11:47:04.630

有一种更简单的方法可以使用以下方法获取文件字节`System.Net.WebClient.WebClient()`：

```
private static byte[] DownloadFile(string absoluteUrl)
{
   using (var client = new System.Net.WebClient())
   {
      return client.DownloadData(absoluteUrl);
   }
} 
```

用法：

```
var bytes = DownloadFile(absoluteUrl); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T10:46:16.807

问题看起来是双重阅读-您将不同的东西放入内存流/文件流中-它应该更像：

```
// declare file/memory stream here
while ((len = stream.Read(buffer, 0, buffer.Length)) > 0)
{
      memoryStream.Write(buffer, 0, len);
      fileStream.Write(buffer, 0, len);
      // if you need to process "len" bytes, do it here
} 
```

如果您立即处理“len”字节，您可能会完全丢失“memoryStream”。如果它适合内存，则使用 WebClient.DownloadData 然后使用 File.WriteAllBytes 可能更容易。

# macros - Error during expansion of macro in Chicken Scheme

> ID：15997947
> 
> 赞同：0
> 
> 时间：2013-04-14T10:15:43.967
> 
> 标签：macros, lisp, scheme, chicken-scheme, define-syntax

I'm learning how the macro system in Scheme works and I'm trying to make my code look more JavaScript-y. So I thought I would start with the `function` macro. This is how I want a function definition to look:

```
(function id (x) x) 
```

It should expand to the following:

```
(define (id x) x) 
```

So I write a macro as follows:

```
(define-syntax function
    (lambda (name args . body)
        `(define (,name ,@args) ,@body))) 
```

However when I use it I get the following error (in Chicken Scheme):

```
Error: during expansion of (define ...) - in `define' - lambda-list expected: (define ((function id (x) x) . #<procedure (rename sym1348)>) #<procedure (compare s11400 s21401)>)

    Call history:

    <syntax>      (function id (x) x)
    <eval>    (##sys#cons (##core#quote define) (##sys#cons (##sys#cons name args) body))
    <eval>    (##sys#cons (##sys#cons name args) body)
    <eval>    (##sys#cons name args)    <-- 
```

Where am I going wrong? In addition how do I read such error messages to be able to debug the program myself?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T13:04:41.143

在 Scheme 中，使用 syntax-rules()：

```
(define-syntax function
  (syntax-rules ()
    ((function name (args ...) body ...)
     (define (name args ...) body ...)))) 
```

您看到的错误显然是 Chicken Scheme 的编译器希望第二种形式`define-syntax`是宏扩展过程 - 它们通常需要用于重命名和比较标识符的参数。您的`lambda`宏中的 不会产生合适的功能 -`syntax-rules`会。

以上保证卫生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T11:27:47.760

根据 Chicken 文档，您定义宏的方式不正确。您的代码似乎更受 Common Lisp 宏的启发。[在此处](http://wiki.call-cc.org/man/4/Macros)查看`define-syntax`带有转换器功能的文档：

宏应定义为：

```
(define-syntax function
    (lambda (expr inject compare)
        `(define (,(cadr expr) ,@(caddr expr)) ,(cadddr expr)))) 
```

expr 是整个宏表达式，即`(function id (x) x)`注入和比较是在执行宏扩展时传递给宏的特殊实用函数。

# twitter - 在 Sharekit 上请求从 Twitter 访问？

> ID：15997951
> 
> 赞同：0
> 
> 时间：2013-04-14T10:16:53.877
> 
> 标签：twitter, sharekit

我正在使用 Sharekit，它曾经在没有任何 pbm 的情况下完美运行，因为两天后，每当我尝试在我的应用程序中与 Sharekit 共享某些内容时，我仍然会收到此错误消息

```
There was a problem requesting access from Twitter 
```

与 Facebook 或电子邮件等其他服务共享仍然运行良好。

你注意到类似的问题了吗？任何修复？

欲了解更多信息：当我尝试分享某些东西时，它始终要求我批准该应用程序，即使我以前也这样做过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:48:08.717

已修复，[获取最新的 ShareKit 版本](https://www.github.com/sharekit/sharekit)。

# php - Dynamic table/matrix using PHP and MySQL

> ID：15997952
> 
> 赞同：1
> 
> 时间：2013-04-14T10:17:02.470
> 
> 标签：php, mysql, html-table

I have a problem whilst trying to display MySQL data in a table format. Basically, I have a table which stores payments with the fields amount, item, currency and location. I want to display these in a table that shows the locations across the top, the currencies on the second row, the items in the first columns row and then the sum of the payments within the rest of the table corresponding to the location/currency. Here is an example of my MySQL table data:

```
item        | amount | currency | location
----------------------------------------------
Item 1      | 250    | USD      | UK    
Item 2      | 450    | GBP      | UK
Item 3      | 780    | EUR      | Germany   
Item 2      | 50     | GBP      | Spain
Item 2      | 150    | GBP      | Spain
Item 4      | 375    | USD      | UK
Item 4      | 650    | GBP      | Germany
Item 1      | 350    | USD      | UK 
```

The end result I'm looking to achieve would be something like:

```
 |  Germany  | Spain |     UK    |
        | EUR | GBP |  GBP  | GBP | USD |
        ---------------------------------
Item 1  |     |     |       |     | 600 |
Item 2  |     |     |  200  | 450 |     |
Item 3  | 780 |     |       |     |     |
Item 4  |     | 650 |       |     | 375 | 
```

At the moment, I am achieving the result using multiple queries which uses lots of nested queries for each of the items as follows:

```
<table width="1046" border="0">
  <tr>
    <td></td>
    <td colspan="2">Germany</td>
    <td>Spain</td>
    <td colspan="2">UK</td>
  </tr>
  <tr>
    <td></td>
    <td>EUR</td>
    <td>GBP</td>
    <td>GBP</td>
    <td>GBP</td>
    <td>USD</td>
  </tr>
  <? $q1 = mysqli_query("SELECT item FROM table1 group by item order by item asc");
  while($row1 = mysqli_fetch_assoc($q1)){
    $item = $row1['item']; ?>
    <tr>
      <td><? echo $item; ?></td>

      <? $q2 = mysqli_query("SELECT sum(amount) as amt from table1 WHERE currency='EUR' and item='$item' and location='Germany'");
      while($row2 = mysqli_fetch_assoc($q2)){ ?>
        <td><? echo number_format($row2['amt'],0); ?></td>
      <? } ?>

      <? $q3 = mysqli_query("SELECT sum(amount) as amt from table1 WHERE currency='GBP' and item='$item' and location='Germany'");
      while($row3 = mysqli_fetch_assoc($q3)){ ?>
        <td><? echo number_format($row3['amt'],0); ?></td>
      <? } ?>

      <? $q4 = mysqli_query("SELECT sum(amount) as amt from table1 WHERE currency='GBP' and item='$item' and location='Spain'");
      while($row4 = mysqli_fetch_assoc($q4)){ ?>
        <td><? echo number_format($row4['amt'],0); ?></td>
      <? } ?>

      <? $q5 = mysqli_query("SELECT sum(amount) as amt from table1 WHERE currency='GBP' and item='$item' and location='UK'");
      while($row5 = mysqli_fetch_assoc($q5)){ ?>
        <td><? echo number_format($row5['amt'],0); ?></td>
      <? } ?>

      <? $q6 = mysqli_query("SELECT sum(amount) as amt from table1 WHERE currency='USD' and item='$item' and location='UK'");
      while($row6 = mysqli_fetch_assoc($q6)){ ?>
        <td><? echo number_format($row6['amt'],0); ?></td>
      <? } ?>
    </tr>
    <? } ?>
</table> 
```

I am wondering if there is a better way of achieving the same result?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:55:39.693

MySQL 没有 PIVOT 函数，但如果您想在一个查询中检索此数据，则可以使用带有`CASE`表达式的聚合函数将数据从行获取到列中：

```
select item,
  sum(case when location = 'Germany' and currency = 'EUR' then amount else 0 end) Ger_EUR,
  sum(case when location = 'Germany' and currency = 'GBP' then amount else 0 end) Ger_GBP,
  sum(case when location = 'Spain' and currency = 'GBP' then amount else 0 end) Spa_GBP,
  sum(case when location = 'UK' and currency = 'GBP' then amount else 0 end) UK_GBP,
  sum(case when location = 'UK' and currency = 'USD' then amount else 0 end) UK_USD
from table1
group by item; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!8/dafbc/1)。这给出了结果：

```
|   ITEM | GER_EUR | GER_GBP | SPA_GBP | UK_GBP | UK_USD |
----------------------------------------------------------
| Item 1 |       0 |       0 |       0 |      0 |    600 |
| Item 2 |       0 |       0 |     200 |    450 |      0 |
| Item 3 |     780 |       0 |       0 |      0 |      0 |
| Item 4 |       0 |     650 |       0 |      0 |    375 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T10:56:29.167

如果位置和货币是固定列表，那么您可以使用以下查询

```
SELECT item,
       SUM(CASE WHEN location = 'Germany' AND currency = 'EUR' THEN amount ELSE NULL END) Germany_EUR,
       SUM(CASE WHEN location = 'Germany' AND currency = 'GBP' THEN amount ELSE NULL END) Germany_GBP,
       SUM(CASE WHEN location = 'Spain' AND currency = 'GBP' THEN amount ELSE NULL END) Spain_GBP,
       SUM(CASE WHEN location = 'UK' AND currency = 'GBP' THEN amount ELSE NULL END) UK_GBP,
       SUM(CASE WHEN location = 'UK' AND currency = 'USD' THEN amount ELSE NULL END) UK_USD
  FROM yourtable
 GROUP BY item 
```

**这是[SQLFiddle](http://sqlfiddle.com/#!9/d99bd/1)**

# javascript - [quote] 的 Javascript 正则表达式

> ID：15997965
> 
> 赞同：-5
> 
> 时间：2013-04-14T10:18:35.700
> 
> 标签：javascript, regex

我如何找到这些？

*   [引用#12]
*   [引用#15]
*   [引用#17]

如何使用正则表达式查找具有 '[quote#]' 的字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:20:25.507

我建议你退后一步，花 30 分钟左右的时间[阅读正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)。这是它们的一个相当简单的应用。

在 JavaScript 中，你可以这样做：

```
var match, value;
match = /\[quote#([^\]]+)\]/.exec(yourString);
value = match && match[1]; 
```

# java - How to deal with accept-parameters when developing a jax-rs application

> ID：15997966
> 
> 赞同：11
> 
> 时间：2013-04-14T10:18:40.057
> 
> 标签：java, rest, jax-rs

In order to deal with different versions of a content-type i am trying to use the accept-parameters of the "Accept*" headers ([RFC 2616](https://www.rfc-editor.org/rfc/rfc2616#section-14.1)).

```
Accept: application/vnd.mycompany.mytype;version=2 , application/vnd.mycompany.mytype;version=1;q=0.1 
```

The problem is that Jax-RS annotations do not support Accept-parameters...

```
@GET
@Produces("application/vnd.test;version=1")
public Response test1() {
    return Response.ok("Version 1", "application/vnd.test").build();
}

@GET
@Produces("application/vnd.test;version=2")
public Response test2() {
    return Response.ok("Version 2", "application/vnd.test").build();
} 
```

Results in a media type conflict exception:

```
Producing media type conflict. The resource methods public javax.ws.rs.core.Response test.resources.TestResource.test2() and public javax.ws.rs.core.Response test.resources.TestResource.test1() can produce the same media type 
```

Maybe, this exception only related to my JAX-RS framework (Jersey), but i'm afraid this is due to the [JSR311](http://jsr311.java.net/nonav/releases/1.1/spec/spec.html) which is not explicit about accept-parameters.

By now, i'm using content-types which holds the version within their names, but i found this solution pretty uggly.

```
@GET
@Produces("application/vnd.test-v1")
public Response test() {
    return Response.ok("Version 1", "application/vnd.test-v1").build();
} 
```

Do you have any ideas about how to deal with accept-parameters ?

**EDIT**

I think i wasn't clear enough. I want to automatically route the request to specific methods. These methods are versioned and correspond to a specific version of the returned content-type. JAX-RS current implementation prevents me to use accept-parameters to route the request (to the corresponding method).

greenkode suggest that i manage the `version` accept-parameter within a dispatching method (using `@HeaderParam("Accept")`). This solution would end-up in re-writing the content negociation logic which is embeded in the framework (and described in JSR 311).

What can i do to use both accept-parameter and content-negociation logic from JAX-RS ?

Maybe a solution is to use another framework (I only worked with Jersey by Now). But i don't know which one.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-17T02:57:06.983

JAX-RS 规范没有*明确*声明任何关于忽略 Accept 标头参数的内容。但唯一*明确*定义处理的参数是*质量*(q)。这是一个可能需要改进的领域，因为它似乎导致了 Jersey 实现中的模棱两可（或彻底的错误）。当前版本的 Jersey (1.17) 在将传入请求与资源方法匹配时未考虑 Accept 标头参数，这就是您收到错误的原因：

> 严重：产生媒体类型冲突。资源方法...

对于资源：

```
@GET
@Produces("application/vnd.test;version=1")
public Response test1() {
    return Response.ok("Version 1", "application/vnd.test").build();
}

@GET
@Produces("application/vnd.test;version=2")
public Response test2() {
    return Response.ok("Version 2", "application/vnd.test").build();
} 
```

Jersey 似乎根据 Accept 标头“类型/子类型”执行“唯一性”检查，完全省略了任何参数。这可以通过在“匹配”资源方法上使用各种标题对进行测试来确认：

```
资源 1 资源 2
--------------------------------------
文本/html;q=0.4 文本/html;q=0.8
文本/html 文本/html;q=0.2
文本/html 文本/html;qs=1.4
文本/html;qs=1.4 文本/html;qs=1.8
文本/html；级别=1 文本/html；级别=2
文本/html;foo=bleh 文本/html;bar=23

```

所有都失败并出现相同的错误。如果假设只发送了质量参数，那么只匹配“类型/子类型”是有意义的，因为这种请求是无意义的：

> 接受：text/html;q=0.8, text/html;q=0.4, text/html

Aka，*质量*参数只有在您处理可能的内容类型*时才*有意义。但是，当发送非质量参数或附加参数时，这种有限匹配会失败：

> 接受：text/html;version=4.0;q=0.8, text/html;version=3.2;q=0.4

那么有哪些可能的解决方案呢？

*   拦截基于“类型/子类型”的高级请求，然后路由到更合适的方法（您已表明您不想这样做）
*   修改您预期的标题。例如“application/vnd.mycompany.mytype+v2”和“application/vnd.mycompany.mytype+v1”。无需其他更改，您可以继续使用 Jersey
*   切换框架。[RESTEasy](http://www.jboss.org/resteasy/)恰好可以轻松处理您的场景。

使用 RESTEasy 和资源：

```
@Path("/content/version")
public class ContentVersionResource {

    @GET
    @Produces("application/vnd.test;version=1")
    public Response test1() {
        return Response.ok("Version 1", "application/vnd.test").build();
    }

    @GET
    @Produces("application/vnd.test;version=2")
    public Response test2() {
        return Response.ok("Version 2", "application/vnd.test").build();
    }
} 
```

使用以下 Accept 标头进行成功匹配：

> 接受：application/vnd.test;version=1;q=0.3, application/vnd.test;version=2;q=0.5
> 响应：版本 2

和这个：

> 接受：application/vnd.test;version=1;q=0.5, application/vnd.test;version=2;q=0.3
> 响应：版本 1

*您可以下载并使用此[示例项目](https://github.com/sevenhillsoftware/easyrest)进行测试。需要 Git、Maven 和 JBoss 7.x*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T11:26:42.440

除非我错过了什么。JAX-RS 确实支持 Accept 参数。看`@Consumes("*/*")`注释。此外，发生媒体类型冲突的异常是因为您`GET`在同一个 url 有两个方法。用 注释 test2() 方法`@Path("test2")`，然后将您的`GET`请求发送到 url/test2 。那应该摆脱那个错误。

**编辑**

您可以使用注入`Accept`标头的值`@HeaderParams`。这是我所做的一个示例。

```
@Path("/conneg")
public class ConnNeg {

    @GET
    @Produces("application/vnd.test;version=1")
    public Response test1(@HeaderParam("Accept") String header) {
        System.out.println(header);
        return Response.ok("Version 1", "application/vnd.test").build();
    }
} 
```

传递请求

> 接受： application/vnd.test;version=2 , application/vnd.test;version=1;q=0.1

这将打印

> application/vnd.test;version=2 , application/vnd.test;version=1;q=0.1

然后，您可以手动处理它。这是你要找的吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T11:55:14.650

使用 Jersey 框架，HTTP 请求的 Accept 标头声明什么是最可接受的。如果资源类能够生成一种以上的 MIME 媒体类型，则选择的资源方法将对应于客户端声明的最可接受的媒体类型。在您的情况下，如果接受标头是

```
Accept: application/vnd.mycompany.mytype;version=2 
```

然后方法 test1() 将被调用。

如果是

```
Accept: application/vnd.mycompany.mytype;q=0.9 version=2, application/vnd.mycompany.mytype;version=1 
```

后一个将被调用。

可以在同一个 @Produces 声明中声明多个媒体类型，例如：

```
@GET
@Produces({"application/vnd.mycompany.mytype; version=2", "application/vnd.mycompany.mytype; version=1"})
public Response test() {
    return Response.ok("").build();
} 
```

如果两种媒体类型中的任何一种都可接受，则将调用 test(9 方法。如果两者都可接受，则将调用第一种。

希望能帮助到你！

# regex - How to extend block with one character and return to initial block after search?

> ID：15997973
> 
> 赞同：0
> 
> 时间：2013-04-14T10:19:11.950
> 
> 标签：regex, search, vim

I'm trying to do a search within a visual block, (from a vimscript).

This is my code:

```
aaaaaaaaaaaa
a26 text tea
atext text a
atext 27 12a
a11 text 25a
aaaaaaaaaaaa 
```

Let say my block selection is within the '`a`' border and I want to search all numbers with 2 characters:
This is my search:
`/\%V\d\{2}\%V`

The problem with the 2nd `\%V` is that it shortened a visual block selection with 1 characters, it doesn't find the number 12 and 25 in my above example.

How can I extend the visual block selection (in a vimscript) with 1 character to the right, do the search and return to previous visual block selection?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:50:42.010

好的，那我就把它写成答案，好吧，这是一个答案和问题……:)

`\%V`从你的模式中删除第二个就可以了。

我首先发表评论，因为......

我个人在我的工作中只使用了一个`\%V`，它工作得很好。我看到了这个问题，并检查了`:h \%V`，帮助建议同时使用...并且它是零宽度。我真的不明白为什么 2 `\%V`s 不适用于 OP 的问题。

所以，也就是说，我知道如何解决这个问题，但不是100％清楚，是什么原因造成的，我希望其他人能解释一下。

# macos - Setting a launch variable with AppleScript in Automator

> ID：15997974
> 
> 赞同：0
> 
> 时间：2013-04-14T10:19:25.347
> 
> 标签：macos, bash, applescript, automator

I'm trying to set a variable using AppleScript from automator:

```
 do shell script "launchctl setenv LASTMAX \"" & today & "\"" 
```

I have a variable *today* that i want to assign to the variable LASTMAX

but when i check the property with echo $LASTMAX i keep getting the initial value, even after i reboot.

How can i set variables with AppleScript?

Is there a different way to store persistant variables with automator?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:43:22.233

您可以使用脚本对象将数据存储在不碍事的地方。 [Automator 中的持久变量存储](https://stackoverflow.com/questions/13325386/persistant-variable-storage-in-automator/13328816#13328816)

> 存储脚本似乎只在第一次工作。

当我将上面引用的脚本粘贴到 Automator 工作流程中并多次运行该工作流程时，每次运行脚本时返回的值都会增加一。请发布您的代码。

# ssh - 在远程服务器上工作

> ID：15997979
> 
> 赞同：2
> 
> 时间：2013-04-14T10:19:41.810
> 
> 标签：ssh, ide, editor, sublimetext2, remote-server

我的操作系统：Windows 8

Virtualbox 来宾：Ubuntu 12.10 服务器

我在 vbox guest 上配置了 apache 服务器，并将 http、https、ssh 端口成功映射到 ubuntu 服务器。它工作得很好，没有任何问题。

我尝试了几个 IDE，如 PHPStorm、Netbeans、Sublime 等编辑器，他们所做的只是从服务器复制整个项目，在本地机器上编辑然后同步回来。

但这不是我需要的。我想使用 ssh/sftp 连接直接在访客服务器上工作。我知道notepad++ 有这个功能，但我喜欢崇高的外观和感觉。

有没有办法免费使用 sublime 或任何其他 ide 在访客服务器上工作？（有 sftp 解决方案，但它像其他 ide 一样付费和工作，而不是直接在客户机上）有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:48:33.063

您可以选择两种方法，您可能会选择第二种：

1.  使用 KDE 桌面环境（是的，它也适用于 MS Windows）。它具有所谓的“kio-slaves”，它允许使用*任何*协议，就好像您正在执行本地文件系统操作一样。这意味着当使用像'kate'这样的KDE编辑器甚至像'kdevelop4'这样的整个IDE时，你可以简单地说“打开文件/项目”，不仅选择一个本地文件，还可以选择像sftp://server/path/file这样的东西并开始工作。网络的东西由环境透明地处理，它是完全网络透明的。系统应该是这样的。我认为 GNOME 环境有类似的东西，但它可能已被 GNOME 版本 3 删除。

2.  您可以将来宾文件系统“挂载”到您的 MS-Windows 文件系统中。不确定这在 MS-Windows 中是如何工作的细节，但我确信至少更新版本的 MS-Windows 已经获得了这样的功能。很可能您仍然仅限于创建诸如“网络硬盘”之类的东西，在其他系统（linux、unix、macOS）中，您可以安装在您喜欢的文件系统中的任何位置。您可以为此使用任何协议，只要它受到本地系统的安装工具的支持。再有两个选择：

    2.a 你挂载整个虚拟磁盘。简单，但如果来宾系统当前正在使用该磁盘，则可能会出现问题。

    2.b 通过在虚拟系统中启动一些服务器来导出虚拟磁盘：samba 很可能是您的选择。然后，您可以在您的 MS-Windows 系统中挂载该 smb 文件导出并开始破解。

玩得开心！

# java - JSP - 404 处理图像

> ID：15997982
> 
> 赞同：1
> 
> 时间：2013-04-14T10:20:13.977
> 
> 标签：java, jsp

我正在使用以下代码从我的服务器获取图像：

```
<a href="#">
    <img src="<%
        if(user.getImageURL()!=null){
           out.print(user.getImageURL);
        }else{
           out.print("images/no-profile-pic-small.jpg");
        }%>" />
</a> 
```

上面的代码处理了 imageURL 为 null 的情况，但是当 imageURL 返回正确的 URL 但在服务器上找不到该图像，即 404 Not Found 时，我该如何处理？

**编辑**：图像位于不同的服务器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T10:42:38.230

目前，您没有对 JSP 中的路径进行任何检查，只是将路径放入 HTML 中（如果存在）。这意味着在图像的 HTTP 请求通过之前，您不知道该路径是否存在。您有两个主要选择：

在包含它之前检查您的 JSP 代码中的该路径是否有文件，否则回退到您的占位符：

```
<% 
    String userImagePath = user.getImageURL();
    File userImage= new File(userImagePath);
    if(!userImage.exists()){
        userImagePath = "fallBackImagePath.png";
    }
%>

<img src="<%= userImagePath %>"/> 
```

或者让您的 HTML 处理非显示图像，例如：

```
<img src="non-existent.png" class="fallBackBackground"/>

<style>
    .fallBackBackground {
        background: url(./placeholderImage.png);
    }
</style> 
```

这可能会导致您提供不需要的后备图像，而且它依赖于相同大小的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:00:21.113

**`onerror`**我使用 jquery 和属性解决了这个问题：

我的服务器端代码现在是：

```
<a href="#">
    <img src="<%
        if(user.getImageURL()!=null){
           out.print(user.getImageURL);
        }else{
           out.print("images/no-profile-pic-small.jpg");
        }%>" onerror="profilePicNotFound(this);" 
    />
</a> 
```

还有一个小的 jquery 函数：

```
function profilePicNotFound(image){
    image.src='images/no-profile-pic-small.jpg';
} 
```

如果图像位于不同的服务器上，这会很好地工作。更多[在这里](https://stackoverflow.com/questions/12994419/jquery-to-check-image-exists-if-head-404-than-hide-it)。

# c++ - 程序关闭时（不从主程序返回），Windows 是否会自动释放内存？

> ID：15997987
> 
> 赞同：6
> 
> 时间：2013-04-14T10:20:42.633
> 
> 标签：c++, memory

程序关闭时分配的新内存是否总是被释放？（即使由于错误/错误等或自定义关闭功能意外关闭）？

还是仅在从 main 返回时才释放内存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T10:21:42.510

是的，操作系统通常会跟踪每个进程分配的内存，并在这些进程终止时释放它——无论如何。

然而，这**并不是在你的程序****中**出现内存泄漏的正当理由：一个程序应该总是主动释放它所获得的资源（包括内存），**除非**有一个非常好的 - 并且记录在案的 - 不这样做的理由。

很好的理由可能是程序的正确性依赖于全局/单例对象的破坏顺序，或者在终止之前主动释放分配的内存的成本很高。

然而，尽管承认程序员故意避免释放内存可能是有原因的，但请注意不要形成一种过于肤浅的思维方式，认为什么才是不清理自己的“*好理由*”。

我鼓励你习惯于编写确实释放它所获得的内存的代码，并以非常清晰的形式明确记录你*不*打算遵循这种做法的每一种情况。同样，虽然可能存在需要这样做的极端情况，但释放或不释放获取的内存始终必须是程序员**主动的、有意**的决定。

* * *

**注意：**引用评论中的[史蒂夫·杰索普](https://stackoverflow.com/users/13005/steve-jessop)的话，另一个你不想主动释放内存的好理由是当你的程序需要终止时，因为它以某种方式达到了意想不到的状态——可能是违反不变量的状态，或者是一定的功能。通常，违反先决条件意味着*Undefined Behavior*。

因为 - 根据定义 - 没有从 UB 恢复的理智方法，您可能希望立即终止您的程序，而不是执行可能产生*任何*结果的进一步操作 - 包括非常不受欢迎的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T10:22:37.317

并非所有操作系统（在现代操作系统中这不是问题）都执行此操作，您最好不要依赖此属性。你可以看看这里： [当你在 malloc 之后不释放时，真正发生了什么？](https://stackoverflow.com/questions/654754/what-really-happens-when-you-dont-free-after-malloc)

# c# - C# 设置自定义嵌入光标

> ID：15997990
> 
> 赞同：0
> 
> 时间：2013-04-14T10:21:12.447
> 
> 标签：c#, cursor, embedded-resource

我想使用自定义嵌入式光标，我尝试了这段代码，但我只看到普通光标：

```
private void Form1_Load(object sender, EventArgs e)
{
  Cursor mycur = new Cursor(GetType(), "mycursor.cur");
  this.Cursor = mycur;
} 
```

（该方法是从 initalizecomponent 调用的）为什么这不起作用，还有其他想法吗？感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:29:49.720

试试这个代码： [how-to-read-embedded-resource-text-file](https://stackoverflow.com/questions/3314140/how-to-read-embedded-resource-text-file)

然后放流而不是文件名字符串`"mycursor.cur"`

# html - 使用 html 元素创建自定义形状

> ID：15997991
> 
> 赞同：1
> 
> 时间：2013-04-14T10:21:22.183
> 
> 标签：html, css

我需要创建这个形状：

![在此处输入图像描述](https://i.stack.imgur.com/YYV0g.png)

这张图片中的界限不清楚，但实际上这是规则曲线。内圈是我的内在元素。我在实现这个元素时遇到了一些挑战：

*   我用过`<div>`，但我不能用border-radius和任何其他方法来设置顶部边框。
*   使用`<div>`并设置`background-image`它，但我在边界上有问题，我想在元素边界中准确地更改鼠标光标。
*   我使用`<img>`并设置它`<map>`来`<area>`设置我的界限，但我的内部元素有问题。
*   最后我使用了 HTML5 和 canvas 元素，但是对于内部元素，圆圈，我找不到任何常规的解决方案。元素的边界非常重要

我怎样才能实现这个对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:26:57.410

您几乎可以使用 HTML5 Canvas。从你的问题我读到你无法确定圆圈的边界来改变光标。检测光标是否在一个圆圈内实际上很容易。您肯定会拥有圆心的 x,y 位置以及半径，对吗？因此，您需要做的就是检查光标的 x/y 坐标与圆心之间的距离是否小于（或等于）半径。如果是，那么它在圈内，否则它在圈外:)

# java - 如何以编程方式放置或放置视图？

> ID：15997992
> 
> 赞同：0
> 
> 时间：2013-04-14T10:21:37.337
> 
> 标签：java, android, android-framelayout

我有一个基本“骨架”的xml

```
<RelativeLayout>
    <FrameLayout>
        <RelativeLayout>
            <TextView>
            </TextView>
            <TextView>
            </TextView>
        </RelativeLayout>
        <DrawView>
            //The view that changes 1
        </DrawVIew>
        <EditText>
            //The view that changes 2
        </EditText>
    </FrameLayout>
    <RelativeLayout>
    </RelativeLayout>
</RelativeLayout> 
```

我想要的是使用代码使 DrawView 上升或下降，因此有时您可以使用 DrawView，而在其他时候您可以使用 EditText，但是会显示两个视图。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:52:36.343

由于您将两个小部件都放在 FrameLayout 中，因此您可以更改其重力，如下所示：

```
FrameLayout.LayoutParams drawViewLayoutParams = drawView.getLayoutParams();
drawViewLayoutParams.gravity = Gravity.BOTTOM;

FrameLayout.LayoutParams editTextLayoutParams = editText.getLayoutParams();
editTextLayoutParams.gravity = Gravity.TOP; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T11:03:38.100

做到这一点的唯一方法是删除所有的`FrameLayout`孩子并将它们按您需要的顺序放回去。

或者您可以使用另一个 RelativeLayout 并更改两个视图的 LayoutParams

# java - 尝试通过 python 脚本启动 minecraft 服务器时出现内存问题

> ID：15997994
> 
> 赞同：1
> 
> 时间：2013-04-14T10:21:43.603
> 
> 标签：java, python, multithreading, memory-management, batch-file

好吧，我一直在研究一种工具，以帮助维护托管在单台计算机上的大量游戏服务器。我正在做的是从 python 脚本中获取一个 .bat 文件。该 bat 文件设置服务器婴儿车，如最大内存和类似的东西。我使用以下函数打开并运行 .bat 文件。

```
def StartServer(path,file):
    if file not in MK.keys():

        l = Popen(file, cwd=path)
        MK[file]=l
        stdout, stderr = l.communicate()
    else:
        MK[file].terminate() 
```

此函数以两种方式之一调用，第一种方式是启动程序。

```
thread.start_new_thread( StartServer, (path,File, ) ) 
```

2、关闭程序

```
StartServer(path,File) 
```

StartServer 看到重新进入并终止指定的程序......这对于需要很少 ram 的程序非常有用，比如 bat 文件，例如

```
@echo Hello world.
@pause 
```

但是，当尝试为 java 程序分配更多内存时，例如，

```
@ECHO OFF
SET BINDIR=%~dp0
CD /D "%BINDIR%"
"%ProgramFiles%\Java\jre7\bin\java.exe" -Xmx4096M -Xms4096M -jar Minecraft_RKit.jar user:password
PAUSE 
```

我收到来自 BAT 文件的内存错误，如下所示。这是来自 bat 文件而不是来自 python 端

```
Invalid mat heap size: -Xmx4096M
The specified size exceeds the maximum representable size.
Error: Could not create java virtual machine.
Error: A fatal exception has occurred. Program will exit.
Press any key to continue . . . 
```

注意：我更喜欢同时使用python和bat文件提前谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:55:04.277

您正在尝试启动一个 32 位 JVM，给它一个对于 32 位体系结构来说太大的堆大小。对于 32 位 JVM，最大堆大小小于 3Gb。实际限制取决于操作系统（它决定了有多少地址空间可供应用程序使用）以及 JVM 使用了多少非堆内存。

要么减小最大堆大小，要么切换到 64 位 JVM（和 64 位操作系统）。

# java - 是否有 Clojure 或 Scala 的持久不可变向量的 Java 版本？

> ID：15997996
> 
> 赞同：6
> 
> 时间：2013-04-14T10:21:50.573
> 
> 标签：java, scala, collections, clojure, immutability

也就是说，不可变但通过有效的 O(1) 索引共享数据。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T10:35:43.453

Karl Krukow 将 clojure 数据结构提取到[独立库](https://github.com/krukow/clj-ds)中，因此您可以使用它而无需将整个 clojure 带到您的项目中。还有[pcollections](https://code.google.com/p/pcollections/)具有[TreePVector](https://pcollections.googlecode.com/svn/trunk/docs/org/pcollections/TreePVector.html)实现（具有对数时间查找）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T13:09:13.443

几年前，我为 Java 制作了一个持久数据结构库，可能符合要求：

[https://github.com/mikera/mikera/tree/master/src/main/java/mikera/persistent](https://github.com/mikera/mikera/tree/master/src/main/java/mikera/persistent)

它们有点像 Clojure 数据结构，但更多的是 Java 风格：

*   充分利用泛型
*   支持您期望的所有 Java 集合接口
*   包括一些方便的特殊类型（例如`RepeatList`重复出现相同的值）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T10:30:41.930

请记住，Clojure 最终只是 Java。因此，您可以将 Clojure 的 jar 放在您的类路径中并使用它的类。

例如，Clojure 向量是 的实例`clojure.lang.PersistentVector`，映射是`clojure.lang.PersistentArrayMap`和列表的实例，是 的实例`clojure.lang.PersistentList`。

我自己并没有在愤怒中尝试过这个，但如果我想在 Java 中使用持久性数据结构，这可能是我会采取的路线。

这样的事情可以让你开始：

```
import clojure.lang.PersistentVector;
...
ArrayList list = ...
PersistentVector myVector = PersistentVector.create(list);
// from here on, using myVector takes advantages of its persistent nature. 
```

显然，这些类是在考虑 Clojure 的 API 的情况下构建的，而不是 Java 的易用性——但这当然是可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-14T09:45:38.513

这是一个 Scala -> Java 端口：[https ://github.com/andrewoma/dexx](https://github.com/andrewoma/dexx)