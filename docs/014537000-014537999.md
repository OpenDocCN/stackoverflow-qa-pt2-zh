# StackOverflow 问答 14537000-14537999

# c# - 使用剪贴板抓取 HTML 以收集单词

> ID：14537003
> 
> 赞同：0
> 
> 时间：2013-01-26T08:40:47.907
> 
> 标签：c#, winforms, html-agility-pack

我在 C# WinForm 上有一个按钮。每当用户单击此按钮时，就意味着他已准备好复制一个他想知道其含义的单词。然后他只是复制这个词。最后他说明了这个词的意思。

为了做到这一点，我使用了一个计时器来查找剪贴板并通过使用网站上的 htmlAgility 包从剪贴板中获取单词。到目前为止，这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.IO;
using HtmlAgilityPack;

namespace HtmlAgilityPack
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            timer1.Enabled = true;
            timer1.Tick += new EventHandler(timer1_Tick);
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            if (Clipboard.GetDataObject().GetDataPresent(DataFormats.Text))
            {
                string x = Clipboard.GetText();
                Clipboard.Clear();

                try
                {
                    HtmlWeb web = new HtmlWeb();
                    HtmlDocument doc = web.Load("http://www.bengalinux.org/cgi-bin/abhidhan/index.pl?en_word=" + x);
                    HtmlNodeCollection node = doc.DocumentNode.SelectNodes("//div[@class='dict_entry']//strong[2]");
                    foreach (HtmlNode n in node)
                    {
                        MessageBox.Show(n.InnerText);
                    }
                }
                catch (Exception ex)
                {
                    MessageBox.Show("no");
                }
            }
        }
    }
} 
```

但它不起作用。有一个例外：

> 在进行 OLE 调用之前，必须将当前线程设置为单线程单元 (STA) 模式。确保您的 Main 函数上标记了 STAThreadAttribute。

在线上

```
if (Clipboard.GetDataObject().GetDataPresent(DataFormats.Text)). 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T12:47:40.327

在你的方法`Program.cs`中你有`[STAThread]`应用`Main`吗？

它应该看起来像这样：

```
[STAThread]
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.Run(new MainForm());
} 
```

# asp.net - 使用 wsDualHttpBinding 调用 WCF

> ID：14537005
> 
> 赞同：1
> 
> 时间：2013-01-26T12:39:04.177
> 
> 标签：asp.net, wcf, signalr

我有一个独立的应用程序，它使用带有 wsDualHttpBinding 的 WCF。这个独立的应用程序将通过使用 wsDualHttpBinding 的回调行为向任何订阅了该服务的客户端随机发送消息。

如果我们使用窗口应用程序作为客户端，应用程序订阅和回调行为就会成功运行。

然后我想创建一个 ASP.Net 应用程序，它使用 SignalR 作为服务器推送并订阅上述独立应用程序提供的服务。当应用程序返回任何消息时，我们将使用 SignalR 推送消息并将其显示在浏览器中。

然而，当试图创建这样的 ASP.Net 应用程序时，每当来自独立应用程序的消息回调时，ASP.Net 应用程序就会被关闭。

以下是 SignalR 的集线器的代码

```
 public class MessageSubcriberHub : Hub
{
    private static readonly Dictionary<string, MessageSubcriber> Subcribers = new Dictionary<string, MessageSubcriber>();

    public bool Subcribe()
    {
        if (Subcribers.Keys.Contains(Context.ConnectionId))
        {
            return true;
        }
        try
        {
            MessageSubcriber sub = new MessageSubcriber();
            sub.ConnectionId = Context.ConnectionId;
            if (sub.Subcribe())
            {
                sub.listener += (string message, DateTime time) =>
                {
                    try
                    {
                        var context = GlobalHost.ConnectionManager.GetHubContext<MessageSubcriberHub>();
                        context.Clients.Client(sub.ConntectionId).MessageReceived(message, time);
                    }
                    catch
                    {
                        if (Subcribers.Keys.Contains(sub.ConntectionId))
                        {
                            Subcribers.Remove(sub.ConntectionId);
                        }
                    }
                };
                Subcribers.Add(Context.ConnectionId, sub);
                return true;
            }
            else
            {
                return false;
            }
        }
        catch (Exception ex)
        {
            return false;
        }
    }

    public bool Unsubcribe()
    {
        if (Subcribers.Keys.Contains(Context.ConnectionId))
        {
            try
            {
                Subcribers[Context.ConnectionId].Dispose();
                Subcribers.Remove(Context.ConnectionId);
                return true;
            }
            catch (Exception ex)
            {
                return false;
            }
        }
        return true;
    }

    public override Task OnDisconnected()
    {
        //return Clients.All.leave(Context.ConnectionId, DateTime.Now.ToString());
        return new Task(new Action(()=>{
            if (Subcribers.Keys.Contains(Context.ConnectionId))
            {
                try
                {
                    Subcribers[Context.ConnectionId].Dispose();
                    Subcribers.Remove(Context.ConnectionId);
                }
                catch (Exception ex)
                {
                }
            }
        }));            
    } 
```

以下是回调客户端的代码

```
[CallbackBehavior(ConcurrencyMode = ConcurrencyMode.Reentrant)]
public class MessageSubcriber : IMessagingServiceCallback, IDisposable
{
    public string ConnectionId;

    MessagingServiceClient client;
    public delegate void MessageReceivedListener(string message, DateTime time);

    public event MessageReceivedListener listener;

    public MessageSubcriber()
    {
        InstanceContext context = new InstanceContext(this);
        client = new MessagingServiceClient(context, "WSDualHttpBinding_IMessagingService");
    }

    public bool Subcribe()
    {
        return client.Subscribe();
    }

    public bool Unsubcribe()
    {
        return client.Unsubscribe();
    }

    public virtual void MessageReceived(string message, DateTime time)
    {
        if (listener != null)
        {
            listener.Invoke(message, time);
        }
    }

    public void Dispose()
    {
        client.Close();
    }
} 
```

我在 ASP.net 应用程序关闭后检查了事件查看器。以下是事件查看器中显示的消息

> 发生未处理的异常，进程终止。
> 
> 应用编号：6ccca6be
> 
> 进程 ID：6184
> 
> 异常：System.Runtime.FatalException
> 
> 消息：对象引用未设置为对象的实例。
> 
> StackTrace：在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher .ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)在 System.ServiceModel.Dispatcher.ChannelHandler.DispatchAndReleasePump（RequestContext 请求，布尔型 cleanThread，OperationContext currentOperationContext) 在 System.ServiceModel.Dispatcher.ChannelHandler.OnAsyncReceiveComplete(IAsyncResult result) 在 System.ServiceModel.Dispatcher.ChannelHandler.AsyncMessagePump(IAsyncResult result) 在 System.ServiceModel.Dispatcher.ChannelHandler.HandleRequest(RequestContext request, OperationContext currentOperationContext) 在 System .Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult 结果) 在 System.Runtime.AsyncResult.Complete(Boolean completedSynchronously) 在 System.Runtime.InputQueueDispatcher.ChannelHandler.OnAsyncReceiveComplete(IAsyncResult result) at System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult result) at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously) 在 System.Runtime.InputQueueDispatcher.ChannelHandler.OnAsyncReceiveComplete(IAsyncResult result) at System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult result) at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously) 在 System.Runtime.InputQueue`1.AsyncQueueReader.Set(Item item) at System.Runtime.InputQueue`1.Dispatch() 在 System.ServiceModel.Channels.ReliableDuplexSessionChannel.ProcessDuplexMessage(WsrmMessageInfo info) 在 System.ServiceModel.Channels.ClientReliableDuplexSessionChannel.ProcessMessage(WsrmMessageInfo info) 在 System.ServiceModel.Channels.ReliableDuplexSessionChannel.HandleReceiveComplete(IAsyncResult 结果) 在系统。 ServiceModel.Channels.ReliableDuplexSessionChannel.OnReceiveCompletedStatic(IAsyncResult 结果) 在 System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult 结果) 在 System.Runtime.AsyncResult.Complete(Boolean completedSynchronously) 在 System.Runtime.AsyncResult.Complete(Boolean completedSynchronously, 异常异常）在 System.ServiceModel.Channels.ReliableChannelBinder`1.InputAsyncResult`1.在 System.ServiceModel.Channels.ReliableChannelBinder 的`1.InputAsyncResult`OnInputComplete(IAsyncResult 结果) 1.在 System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult 结果) 在 System.Runtime.AsyncResult.Complete(Boolean completedSynchronously) 在 System 的 OnInputCompleteStatic(IAsyncResult 结果) .Runtime.InputQueue `1.AsyncQueueReader.Set(Item item) at System.Runtime.InputQueue`1.EnqueueAndDispatch(Ite​​m item, Boolean canDispatchOnThisThread) at System.Runtime.InputQueue `1.EnqueueAndDispatch(T item, Action dequeuedCallback, Boolean canDispatchOnThisThread) at System.ServiceModel.Security.SecuritySessionClientSettings`1.ClientSecurityDuplexSessionChannel.CompleteReceive(IAsyncResult result) at System.ServiceModel.Security.SecuritySessionClientSettings`1.ClientSecurityDuplexSessionChannel.OnReceive(IAsyncResult result) at System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult result) at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously) at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously, Exception exception) at System.ServiceModel.Security.SecuritySessionClientSettings`1.ClientSecuritySessionChannel.ReceiveAsyncResult.OnReceive(IAsyncResult result) at System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult result) at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously) at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously, 异常异常）在 System.ServiceModel.Channels.ReliableChannelBinder `1.InputAsyncResult`1.OnInputComplete(IAsyncResult 结果) 在 System.ServiceModel.Channels.ReliableChannelBinder `1.InputAsyncResult`1.OnInputCompleteStatic(IAsyncResult 结果) 在 System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult 结果) 在 System.Runtime .AsyncResult.Complete(Boolean completedSynchronously) 在 System.Runtime.InputQueue`1.AsyncQueueReader.Set(Item item) at System.Runtime.InputQueue`1.Dispatch() 在 System.Runtime.InputQueue`1.OnDispatchCallback(Object state) 在 System.Runtime.IOThreadScheduler.ScheduledOverlapped.IOCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped) 在 System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame （UInt32 错误，UInt32 bytesRead，NativeOverlapped* nativeOverlapped）在 System.Threading._IOCompletionCallback.PerformIOCompletionCallback（UInt32 errorCode，UInt32 numBytes，NativeOverlapped* pOVERLAP）
> 
> 内部异常：System.NullReferenceException
> 
> 消息：对象引用未设置为对象的实例。
> 
> StackTrace：在 System.Web.HttpApplication.OnThreadEnterPrivate(Boolean setImpersonationContext) 在 System.Web.HttpApplication.ThreadContext.Enter(Boolean setImpersonationContext) 在 System.Web.AspNetSynchronizationContext.CallCallbackPossiblyUnderLock(SendOrPostCallback 回调，对象状态) 在 System.Web.AspNetSynchronizationContext。 CallCallback(SendOrPostCallback callback, Object state) at System.Web.AspNetSynchronizationContext.Post(SendOrPostCallback callback, Object state) at System.ServiceModel.Dispatcher.ThreadBehavior.BindCore(MessageRpc& rpc, Boolean startOperation) at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4 (MessageRpc&rpc)

有谁有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:41:59.050

您的 Windows 客户端可以正常工作，`wsDualHttpBinding`因为 WCF 能够在客户端和 WCF 服务之间创建持久*会话，该会话在给定的超时期限内持续存在。*

ASP.NET 是一个服务器端框架，它从指定的应用程序池中获取一个线程来处理传入的 HTTP 请求，创建一个 HTTP 响应并将该线程返回到应用程序池。您遇到的问题是，当从 ASP.NET 代码调用时，ASP.NET 将关闭WCF 服务`wsDualHttpBinding`创建的任何会话（这***不***等同于 ASP.NET 会话）。基本上，ASP.NET 应用程序实例化一个 WCF 客户端，该客户端仅在 HTTP 请求/响应对的持续时间内持续存在，并且您的回调目标由于拆除过程而被删除

要完成您所描述的，您需要`wsDualHttpBinding`在 ASP.NET 上下文中实现一个独立的连接管理器。`wsDualHttpBinding`我认为完全避免使用绑定并创建一个简单的基于令牌的轮询消息模式来模拟回调机制会简单得多。

# assembly - 数据段中变量声明的顺序导致不同的输出

> ID：14537006
> 
> 赞同：0
> 
> 时间：2013-01-26T12:39:22.137
> 
> 标签：assembly, x86-16, tasm

我使用 TASM。

我将[这个](ftp://cse.shirazu.ac.ir:5001/Tempbuffer/mk/IO.H)IO.h 文件用于控制台的输入和输出。也为`itoa`和`atoi`。

我的程序是：（目的是简单地复制到`20h`2 个内存位置并输出两者。）

```
include io.h

data segment
    msg2 db 13, 10, "here it is", 13, 10, 0
    tmp dw ?, 0
    num dw ?, 0
    tmp2 dw ?, 0
data ends
code segment
    assume cs:code, ds:data
    start:
        ;load segments
    mov ax, data
    mov ds, ax

    ;store 20h
    mov ax, 20h
    ;copy to both num and tmp2
    mov num, ax
    mov tmp2, ax

    ;output
    output msg2
            ; (itoa puts the output-able into destination, "tmp" here)
    itoa tmp, tmp2
    output tmp

    ;output
    output msg2
    itoa tmp, num
    output tmp
    ;return control
    mov ax, 4c00h
    int 21h
code ends
    end start 
```

我得到的输出是：

```
here it is
32
here it is
12851 
```

但是，当我对变量定义的顺序进行小幅更改时（我交换 tmp2 和 num ）：

```
data segment
    msg2 db 13, 10, "here it is", 13, 10, 0
    tmp dw ?, 0
    tmp2 dw ?, 0
    num dw ?, 0
data ends 
```

输出是：

```
here it is
32
here it is
32 
```

有人可以解释为什么会这样吗？在这两种情况下，第二个输出都是我所期望的。

ps：另外，为什么我们必须使用`start`标签？我发现它延伸到代码段之外非常**奇怪**。没有那个标签就不能正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T13:25:35.917

您链接的`io.h`仅包含一个调用`itoa_proc`库中的宏，因此我们不知道该过程是如何工作的。它可能会使用一些额外的空间，因此即使结果 ( `32`) 适合 2 个字节，它也可能会覆盖以下内存位置，从而破坏您的价值。请注意，`12851`它`0x3233`在内存中的样子`0x33`，`0x32`只是 的 ascii 表示`32`。只是在这里猜测，但`itoa`可能首先产生右对齐输出，然后将其移动到左侧。

阅读文档或源代码（如果有），或者为输出字符串保留更多空间。我假设对于 16 位数字，7 个字节就足够了：1 表示可能的符号，5 表示数字，1 表示终止零。

# jquery - 使用 Jquery 从 XML 中查找数据期间的问题

> ID：14537013
> 
> 赞同：0
> 
> 时间：2013-01-26T12:41:05.363
> 
> 标签：jquery, xml, ajax

我有这样的 XML 文件

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<childrens>
  <child id="1" value="Root Catalog" parent_id="0">
    <child id="2" value="Apparel" parent_id="1">
      <child id="4" value="Shirts" parent_id="2"/>
      <child id="5" value="Pants" parent_id="2"/>
    </child>
    <child id="3" value="Accessories" parent_id="1">
      <child id="6" value="Handbags" parent_id="3"/>
      <child id="7" value="Jewelry" parent_id="3"/>
    </child>
     .
     .
     .
    <child id='bla bla'>
       <child id='bla bla'>
           <child id="1005" value="test1" parent_is="1111"/>
           <child id="1006" value="test12" parent_is="1111"/>
           <child id="1007" value="test123" parent_is="1111"/>
        <child>
    </child>
  <child >
</childrens> 
```

我已经编写了这个 jQuery 代码来获取叶子元素（没有子元素），例如这里的叶子节点是 id 4,5,6,7,1005,1006 和 1007

```
$.ajax({
    type: "GET",
    url: "test.xml",
    dataType: "xml",
    success: function(xml) {
        $(xml).find('child').children().each(function(){
            var id = $(this).attr('entity_id');
            alert(id)
        });
    }
}); 
```

它不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:13:29.300

如果您只想选择`child`“叶节点”且没有任何子节点的元素，您可以使用[`:empty`](http://api.jquery.com/empty-selector/)选择器并将您的选择更改为：

```
find('child:empty') 
```

然后通过删除迭代选定的元素，而不是它的子元素`.children()`

您的示例 XML 没有任何名为`entity_id`. 对于示例 XML，您将选择`attr('id')`.

```
$.ajax({
    type: "GET",
    url: "test.xml",
    dataType: "xml",
    success: function(xml) {
        $(xml).find('child:empty').each(function(){
            var id = $(this).attr('id');
            alert(id)
        });
    }
}); 
```

# javascript - 使用 jquery 在滚动末尾附加 30

> ID：14537019
> 
> 赞同：0
> 
> 时间：2013-01-26T12:41:49.487
> 
> 标签：javascript, jquery

我`30`在一个变量中具有价值。我想将它附加到滚动的 div 上。起始值应该是 0，当我们滚动它时应该附加适当的值，当我们滚动文档末尾时，值应该是 30。 [小提琴附加](http://jsfiddle.net/qWX59/)。

```
$(window).scroll(function(){
    var val = 30;
    var dd = $(document).scrollTop();
    var mm = dd/val
    $('div').text(Math.round(mm))
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T13:04:46.167

Use this code:

```
$(window).scroll(function () {
    var val = 30;
    var dd = $(document).scrollTop() / ($(document).height() - $(window).height());
    var mm = dd * val
    $('div').text(Math.round(mm))
}) 
```

[http://jsfiddle.net/qWX59/1/](http://jsfiddle.net/qWX59/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T13:14:14.643

`val`根据主体和窗口高度设置。这为您提供了滚动的行程量

```
var val = ($(window).height() - $('body').height()) / 30;
$(window).scroll(function () {
    var dd = -$(document).scrollTop();
    var mm = dd / val
    $('div').text(Math.round(mm))

}) 
```

演示：http: [//jsfiddle.net/qWX59/2/](http://jsfiddle.net/qWX59/2/)

# spring-social - Linkedin“范围”变量未设置

> ID：14537022
> 
> 赞同：2
> 
> 时间：2013-01-26T12:42:17.373
> 
> 标签：spring-social

我无法使用 Spring Social 建立与 Linkedin Api 的连接。

我将“范围”变量“r_emailaddress”作为隐藏字段传递给表单以检索电子邮件地址，但它不起作用 - 我没有像您在这里看到的 email_address 权限。[https://developer.linkedin.com/sites/default/files/gp-dialog.png](https://developer.linkedin.com/sites/default/files/gp-dialog.png)

我正在关注 Spring Social Showcase Application Example。我应该补充一点，社交应用程序没有隐藏范围字段。

它适用于 Facebook。

形式

```
<form name="linkedinin_signin" id="linkedin_signin" action="${linkedin_uri}" method="POST">
    <input type="hidden" name="scope" value="r_basicprofile, r_emailaddress" />
    <input type="image" src="${linkedin_img_uri}" />
</form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T00:29:52.060

LinkedIn 是 OAuth 1.0a 提供者并且“范围”参数对于 OAuth 1.0(a) 而言是非标准的，这是正确的。因此，Spring Social 无法识别 OAuth 1.0(a) 提供者的范围参数。

但是，您可能有兴趣知道昨天我向 Spring Social 推送了一个更改，该更改将允许将任意参数传递给请求令牌 URL 和授权 URL……包括“范围”参数。此更改相对较新，仅在最新的 1.1.0.BUILD-SNAPSHOT 版本中可用，但很快会在 1.1.0.M2 中出现。这应该可以满足您的需求。

您可能还想查看 Spring Social Showcase 示例，因为它现在使用“范围”参数在用户连接到 LinkedIn 时请求“r_emailaddress”范围。

感谢您对此更改的任何反馈，最好是对[https://jira.springsource.org/browse/SOCIAL-349或](https://jira.springsource.org/browse/SOCIAL-349)[http://forum.springsource.org/forumdisplay](http://forum.springsource.org/forumdisplay.php?82-Social)的 Spring Social 论坛的评论。 [php?82-社交](http://forum.springsource.org/forumdisplay.php?82-Social). （我没有像在 Spring Social 论坛上那样经常监控 StackOverflow 上的问题。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T15:29:48.430

我在 LinkedIn 上遇到了同样的问题。这是我为解决它所做的：

代替

```
 final OAuth1Parameters params = new OAuth1Parameters();
    params.set("scope", "r_emailaddress r_basicprofile"); 
```

我不得不发送带有 fetchRequestToken 的地图

```
 final MultiValueMap<String, String> mvm = new LinkedMultiValueMap<String, String>();
    mvm.add("scope", "r_emailaddress");
    mvm.add("scope", "r_basicprofile");
    inRequestToken = oauth1Operations.fetchRequestToken(redirectUri, mvm); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T11:15:06.580

LinkedIn 被 SpringSecurity 认可为 OAuth1 提供商。OAuth1 不支持“访问令牌范围”功能。因此，您的范围参数会被静默忽略。实际上，LinkedIn 使用支持范围的非官方 OAuth 1.0a 协议版本。作为一种解决方法，您可以尝试覆盖一些 SpringSocial 类并将范围参数发送到 LinkedIn。看到[这个](http://forum.springsource.org/showthread.php?129684-Linked-In-member-permissions)线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-28T08:32:57.907

Linked in 的 oAuth1 API 根本不支持范围参数，您必须使用 oAuth2 - [http://developer.linkedin.com/documents/authentication](http://developer.linkedin.com/documents/authentication) - 才能获取电子邮件地址

# ruby-on-rails - 使用 to_json 会触发额外的查询

> ID：14537024
> 
> 赞同：0
> 
> 时间：2013-01-26T12:42:33.340
> 
> 标签：ruby-on-rails, json, serialization, rails-activerecord

我有一个连接我`appointment`和`client`表的 ActiveRecord 范围。当我使用它时，只有一个查询：

```
1.9.2p290 :071 > reload!;Appointment.for_day(Time.zone.today).full.first
Reloading...
  Appointment Load (6.9ms)  SELECT "appointment".* FROM "appointment" JOIN client ON client.id = appointment.client_id
 LEFT JOIN payment ON payment.appointment_id = appointment.id WHERE (start_time between '2013-01-26 05:00:00.000000' and '2013-01-27 04:59:59.000000' and is_cancelled = false) ORDER BY start_time asc LIMIT 1
 => #<Appointment id: 10137, start_time: "2013-01-26 13:00:00", created_at: "2012-07-16 18:01:21", updated_at: "2012-07-16 18:01:21", stylist_id: 88, client_id: 398, recurring: false, appointment_id: nil, is_cancelled: false, tip: #<BigDecimal:107ea1d68,'0.0',9(18)>, repeats_every_how_many_weeks: 1, recurrence_rule_hash: "qkebvqfsprmkbcsccsifbbumazooampyxzkyehqommbjmdsmmc", can_repeat: true, notes: "", time_block_type_id: 2, length: 60> 
```

当我拿同样的东西并运行它时`to_json`，我得到两个额外的查询：

```
1.9.2p290 :072 > reload!;Appointment.for_day(Time.zone.today).full.first.to_json
Reloading...
  Appointment Load (6.7ms)  SELECT "appointment".* FROM "appointment" JOIN client ON client.id = appointment.client_id
 LEFT JOIN payment ON payment.appointment_id = appointment.id WHERE (start_time between '2013-01-26 05:00:00.000000' and '2013-01-27 04:59:59.000000' and is_cancelled = false) ORDER BY start_time asc LIMIT 1
  Client Load (0.3ms)  SELECT "client".* FROM "client" WHERE "client"."id" = 398 LIMIT 1
  Address Load (0.3ms)  SELECT "address".* FROM "address" WHERE "address"."id" = 10 LIMIT 1
 => "{\"appointment_id\":null,\"can_repeat\":true,\"client_id\":398,\"created_at\":\"2012-07-16T14:01:21-04:00\",\"id\":10137,\"is_cancelled\":false,\"length\":60,\"notes\":\"\",\"recurrence_rule_hash\":\"qkebvqfsprmkbcsccsifbbumazooampyxzkyehqommbjmdsmmc\",\"recurring\":false,\"repeats_every_how_many_weeks\":1,\"start_time\":\"2013-01-26T08:00:00-05:00\",\"stylist_id\":88,\"time_block_type_id\":2,\"tip\":\"0.0\",\"updated_at\":\"2012-07-16T14:01:21-04:00\",\"client\":{\"active\":true,\"address_id\":10,\"created_at\":\"2012-05-22T11:48:44-04:00\",\"email\":\"\",\"id\":398,\"name\":\"No client\",\"notes\":\"\",\"phone\":\"\",\"salon_id\":29,\"updated_at\":\"2012-05-22T11:48:44-04:00\",\"wants_email_reminders\":false}}" 
```

令人沮丧的是 ActiveRecord 想要对`client`表进行另一个查询，因为我已经为它做了`appointment`-`client`连接。我有更多的关联`Appointment`需要包括在内，并且为每个关联单独查询是不可接受的。

如何在不触发一堆额外查询的情况下将结果集转换为 JSON？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-22T18:53:15.973

我的问题来自一个糟糕的设计，我使用[RABL](https://github.com/ccocchi/rabl-rails)修复了我的糟糕设计。

# wcf - ASP.NET、WCF 和每个操作的静态变量——如何安全地使用它们？

> ID：14537025
> 
> 赞同：1
> 
> 时间：2013-01-26T12:42:37.417
> 
> 标签：wcf, operation, threadstatic

我有一个 WCF 服务，并且我有以下（简化的）类：

```
public class PerOperationSingleton : IDisposable
{
    private static bool _hasInstance = false;

    public PerOperationSingleton()
    {
        if(_hasInstance)
            throw new InvalidOperationException("Cannot have multiple instances during a single WCF operation");

        _hasInstance = true;
    }

    public void Dispose()
    {
        _hasInstance = false;
    }
} 
```

我想，这是一段非常不言自明的代码。我不需要整个 WCF 服务的单例，而只需要在单个操作调用期间。如果释放了 PerOperationSingleton 的一个实例，则在同一 WCF 操作期间创建一个新实例应该是安全的。

问题是我不知道如何使 _hasInstance 变量仅对一个 WCF 操作有效。我知道 [ThreadStatic]，但我听说 ASP.NET 和 WCF 不保证操作将在单个线程上执行 - 它可能会转移到另一个线程。

我绝对不希望我的 _hasInstance = true 移动到线程池并在其他操作从池中选择该线程时被错误地检测到。

如果 WCF 操作移动到另一个线程，我希望 _hasInstance 变量在设置时保持“true”值。

而且我不想更改我的 WCF 服务的一些全局设置以避免影响性能或遇到一些以后难以调试和解决的问题（我对高级 ASP.NET 和 WCF 主题感觉不够精通）。

我也无法将 _hasInstance 存储在会话中，因为我的客户出于各种原因请求禁用 .NET 会话。

我希望 PerOperationSingleton 类实际上与环境无关。它不应该真正了解 WCF 或 ASP.NET。

**如何在整个 WCF 操作调用期间使 _hasInstance 变量为静态且不影响其他 WCF 操作？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T12:51:18.930

我会考虑在操作调用期间使用 OperationContext 使您的数据“静态”。

这是一个类似的讨论[，在哪里存储当前 WCF 调用的数据？ThreadStatic 安全吗？](https://stackoverflow.com/questions/1895732/where-to-store-data-for-current-wcf-call-is-threadstatic-safe)

# vb.net - 如何从 Windows 窗体调用 MDIParent？

> ID：14537028
> 
> 赞同：0
> 
> 时间：2013-01-26T12:43:00.220
> 
> 标签：vb.net, mdi, mdichild, mdiparent

我有一个名为“MDIParent1”的 MDI 表单，MDI 子表单“MDIChild1”，还有一个名为“FrmTest”的 Windows 表单。

现在在“MDIChild1”表单中有一个名为“btnTest”的按钮，这里是点击事件。

```
Dim V As New FrmTest
    V.MdiParent = MDIParent1
    V.Show() 
```

但它无法加载“frmTest”表单。还有其他方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:47:56.980

尝试这个 ：

```
 Dim V As New FrmTest
    V.MdiParent = Me.MdiParent
    V.Show() 
```

以上假设`MDIChild1.MdiParent`已经设置为`MDIParent1`

你也可以这样做：

```
 Dim V As New FrmTest
    V.MdiParent = Application.OpenForms("MDIParent1")
    V.Show() 
```

要关闭其他表单，请遍历`MdiChildren`collection ：

```
 Dim MyMdiForm as Form = Application.OpenForms("MDIParent1")

    For Each Frm As Form In MyMdiForm.MdiChildren  

          If Frm IsNot V Then

                Frm.Close()

          End If

     Next 
```

# wordpress - 如何使php tu自动打开的随机生成的链接自动打开？

> ID：14537030
> 
> 赞同：0
> 
> 时间：2013-01-26T12:43:06.890
> 
> 标签：wordpress, random, hyperlink, article

在我的菜单上，我想成为一个名为“随机”的链接，点击它会打开一篇随机文章，就像在 stumbleupon 上一样。我制作了模板thinkink，我可以从那里开始并实现这一目标。但我做不到。我在问你如何打开页面上存在的唯一链接，它是由模板随机生成的，它本身（在那个 php 代码的帮助下）。我想要的一种重定向（但速度很快）。我认为这可能在 2 步操作中起作用：第一，用户从我的菜单中单击 Random，然后 /randompage 打开，带有随机链接（我的文章链接之一）在上面。第二，我希望该链接直接打开（自动），不需要页面的其他加载。可以这样做吗？还是有别的东西？页面完全是空的。（由于 dns 更改，我的网站现在处于离线状态。它将在几个小时内启动并运行）。希望我能理解自己，我不知道该怎么解释。如果我不能更好地解释这一点，我真的很抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T09:09:30.947

好吧，闪闪发光。我还有另一个解决方案，可能更容易实施。

将此代码插入您的 functions.php 并将 $page_id 值修改为使用自定义模板的页面的 ID：

```
function binda_redirect_to_rand( $query ) {
    $page_id = 234; //ID of your page with custom template  
    if ( $query->is_page() && $query->query_vars['page_id'] == $page_id && $query->is_main_query() ) {          
        $args = array( 'numberposts' => 1, 'orderby' => 'rand' ); 
        $rand_posts = get_posts( $args ); 
        foreach( $rand_posts as $p ){
            $query->set( 'p', $p->ID );
            $query->set( 'page_id', '' );   
        }     
    }
    return $query;
}
add_action( 'pre_get_posts', 'binda_redirect_to_rand' ); 
```

在从 DB 获取任何帖子数据之前，这段代码会将指向具有指定 ID 的页面的查询重定向到随机帖子——因此它与我的第一个解决方案一样快。我更喜欢上一个，因为你不必创建多余的页面，但是这个很容易实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:35:52.963

也许，这种方法会更好：

我已经为 Nav 菜单准备了一个自定义 Walker，它会生成随机链接到一个帖子的菜单项，该菜单项具有从管理菜单分配的“随机”类。

因此，要完成这项工作，您必须将此代码复制并粘贴到您的 functions.php

```
class Random_Walker_Nav_Menu extends Walker_Nav_Menu {

    function start_el(&$output, $item, $depth, $args) {
        global $wp_query;
        $indent = ( $depth ) ? str_repeat( "\t", $depth ) : '';

        $class_names = $value = '';

        $classes = empty( $item->classes ) ? array() : (array) $item->classes;
        if ( !empty( $classes ) && in_array( 'random', $classes ) ){
            $args = array( 'numberposts' => 1, 'orderby' => 'rand' ); 
            $rand_posts = get_posts( $args ); 
            foreach( $rand_posts as $p ){
                $item->url = get_permalink( $p->ID );       
            }           
        }
        $classes[] = 'menu-item-' . $item->ID;

        $class_names = join( ' ', apply_filters( 'nav_menu_css_class', array_filter( $classes ), $item, $args ) );
        $class_names = ' class="' . esc_attr( $class_names ) . '"';

        $id = apply_filters( 'nav_menu_item_id', 'menu-item-'. $item->ID, $item, $args );
        $id = strlen( $id ) ? ' id="' . esc_attr( $id ) . '"' : '';

        $output .= $indent . '<li' . $id . $value . $class_names .'>';

        $attributes  = ! empty( $item->attr_title ) ? ' title="'  . esc_attr( $item->attr_title ) .'"' : '';
        $attributes .= ! empty( $item->target )     ? ' target="' . esc_attr( $item->target     ) .'"' : '';
        $attributes .= ! empty( $item->xfn )        ? ' rel="'    . esc_attr( $item->xfn        ) .'"' : '';
        $attributes .= ! empty( $item->url )        ? ' href="'   . esc_attr( $item->url        ) .'"' : '';

        $item_output = $args->before;
        $item_output .= '<a'. $attributes .'>';
        $item_output .= $args->link_before . apply_filters( 'the_title', $item->title, $item->ID ) . $args->link_after;
        $item_output .= '</a>';
        $item_output .= $args->after;

        $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );
    }
} 
```

然后，您必须在模板中找到 wp_nav_menu 的代码，并使用“new Random_Walker_Nav_Menu()”分配参数“walker”。像这个：

```
wp_nav_menu( array( 'theme_location' => 'primary', 'walker' => new Random_Walker_Nav_Menu() ) ); 
```

然后您将进入您的管理外观 -> 菜单，并将新的自定义链接添加到所需的菜单。URL 真的无所谓。所以，选择你的博客 ULR。称它为“随机帖子”或“随机”，这取决于你。比给它分配一个“随机”类（没有 qoutes）。如果类字段没有显示给您，请从右上角的“**屏幕选项”中启用它。**节省。

瞧！

# jquery - Woocommerce 产品变体未显示我的主题的价格

> ID：14537031
> 
> 赞同：0
> 
> 时间：2013-01-26T12:43:23.253
> 
> 标签：jquery, wordpress, woocommerce

我添加了一个价格变化的项目，但是价格和添加到购物车按钮没有显示在我的主题上。我已经在默认主题上对此进行了测试，并且效果很好，但是对于我最初使用的它们，我发现了这条线

```
<div class="single_variation_wrap" style="display:none;"> 
```

我更改了显示，显示添加到购物车和数量框。但是价格没有出现。使用默认主题，代码中有价格和库存的跨度，但是对于这个主题，代码中没有任何内容。该主题适用于简单的产品。

我还没有找到任何有这个问题的人，感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:51:37.697

在这篇文章中获得了我的风滚草徽章后，我在一个月后找到了答案。我使用的主题是带有过时版本的 jQuery 的旧主题。Woocoremece、Jigo shop 等插件使用最新版本，经常自带。所以网站上基本上有 2 个版本的 JQuery，因此发生了冲突。只需删除旧版本，您应该会很好。

希望这可以帮助任何有类似问题的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-09T15:57:50.850

我有一个类似的问题。我在新主页中有一些 jQuery，我在 Google API 中使用了这个链接

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script> 
```

为了连接jQuery。这行脚本在我的主题（Woo Commerce My Style）的页脚中，它影响了产品页面中显示的价格，即当我从变化中选择产品页面中的价格时，价格并没有随数量显示按钮并添加到购物车按钮。

然后，我删除了上面的脚本行并将其移至结束 head 标签之前的页眉（您可以在此处查看[Kitchens4u.ie ）页面。](http://www.kitchens4u.ie)这似乎解决了这个问题。

我还在其他地方看到 jQuery 是 Wordpress 的一部分。这是真的？如果是这样，那么我们不需要使用上面的代码行通过 Google API 连接到 jQuery。

# git - 远程文件不会更改

> ID：14537035
> 
> 赞同：0
> 
> 时间：2013-01-26T12:44:16.857
> 
> 标签：git, git-remote

我有 2 台远程服务器，一台用于生产，一台用于测试所以，推送到生产很好，因为我推送 master

```
 git push production 
```

但是在我创建了一个分支后，检查它，进行了更改，创建了一个新的提交并推送到测试文件没有改变它显示了 83 个文件更改的进度和“现在一切都是最新的”但是实际的文件在测试中保持完全相同我尝试使用这两个命令进行推送，但它们都不适合我

```
 git push testing newbranch
    git push testing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T06:47:39.257

从您似乎在谈论的意义上讲，推送到遥控器不会更新任何文件。它只会向 repo 添加提交。签出的文件永远不会被推送更新，这就是为什么通常不鼓励推送到非裸存储库，除非您*确切*知道自己在做什么，甚至推送到当前签出的分支，它也听起来你在做。

如果我对您的理解是正确的，那么您*应该*做的可能是将某个“中央”存储库推到某个地方，然后从该存储库拉到您的生产和/或测试环境。推送永远不是更新文件的正确方法。这就是 pull 的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T06:26:30.060

您可以使用 git remote -v 命令检查哪个是您的远程...它将显示您可以推送和获取的远程服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T13:17:27.827

好的，经过更多搜索后，此解决方案对我有用

```
 git push -u origin newbranch 
```

然后我从远程服务器中拉出新分支我不确定未来的推送是否会起作用，但这让我现在通过

更优雅/更明显的解决方案事实证明我正在推送并且推送成功完成，因为消息“现在一切都是最新的”指示但在远程服务器上我没有签出新分支我检查了它现在一切都是应该是这样的

# jquery - jQuery datePicker setDate 函数在输入字段位于 元素

> ID：14537039
> 
> 赞同：1
> 
> 时间：2013-01-26T12:44:51.630
> 
> 标签：jquery, jquery-ui-datepicker

范罗德在这里。这是我的第一次，所以对我温柔一点。

请参阅下面的代码。它应该可以工作，是吗？当您单击按钮时，输入字段应显示今天的日期，但今天的日期只闪烁一秒钟，然后该框变为空白。

如果您删除 FORM 标签，那么它会按预期工作。

因此，如果输入字段位于 FORM 元素内，则 setDate() 不起作用。

已经在 Firefox 和 Chrome 下尝试过这个并得到相同的结果。

我在滥用 datePicker 吗？

已经搜索了stackoverflow、专家交流等以寻求解决方案，但没有任何乐趣。

我不敢相信这是一个错误，因为 datePicker 被广泛使用，但我看不到任何其他结论。

我能看到的唯一解决方法是永远不要在 FORM 中包含输入字段（在我的情况下可行但担心未来）或使用 $("#ttdateofbirth').val(...) 有明显的缺点.

有谁知道如何解决这一问题？

谢谢您的意见。

非工作网页：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>DatePicker test</title>
<link rel="stylesheet" href="js/css/ui-lightness/jquery-ui-1.10.0.custom.css"/>
<script type="text/javascript" src="js/js/jquery-1.9.0.js"></script>
<script type="text/javascript" src="js/js/jquery-ui-1.10.0.custom.js"></script>

<style type="text/css">
.datepicker {
    font: 11pt "Trebuchet MS", sans-serif;
    margin: 10px;
}
.inputlabel {
    font: 11pt "Trebuchet MS", sans-serif;
    margin: 3px;
    float:left; clear:left;
    display: block;
}

.ui-datepicker { font-size: 8pt !important; background: #cccccc; }

input {
    float: left;
    margin-bottom: .25em;
    font: 11pt "Trebuchet MS", sans-serif;
    margin: 3px;
    }
button {
    float: left;
    margin-bottom: .25em;
    font: 11pt "Trebuchet MS", sans-serif;
    margin: 3px;
    }

</style>
<script type="text/javascript">
//<![CDATA[
// set up inputs for dates before today's date
$(function(){
    var pickerOpts = {
        showOtherMonths: true,
        selectOtherMonths: true,
        dateFormat: "dd/mm/y",
        showButtonPanel: true,
        changeYear: true,
        changeMonth : true
        };
        $("#ttdateofbirth").datepicker(pickerOpts);
        });

    function setthedate() {
        var adate = new Date();
        $("#ttdateofbirth").datepicker('setDate',adate);
        };
//]]>
</script>

</head>
<body>
<form>
<span class="inputlabel">Date of birth:</span>
<span><input id="ttdateofbirth" type="text"  value=""/>
<button style="float:left;display:inline;" onclick="setthedate()">Set date</button>
</span>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:00:35.967

在表单中使用`<button>`元素时，它会提交表单、重新加载页面并清空输入。将其更改为：

```
<input type="button" style="float:left;display:inline;" onclick="setthedate()" value="Set date"> 
```

或使用 return false / preventDefault。

# c# - 制作延迟的 mousedown 事件

> ID：14537041
> 
> 赞同：6
> 
> 时间：2013-01-26T12:45:23.397
> 
> 标签：c#, winforms, mousedown

我有一个 datagridview 单元格有一个点击事件。这些单元格还具有以下 mouseDown 事件：

```
if (e.Button == MouseButtons.Left && e.Clicks == 1)
{
    string[] filesToDrag = 
    {
        "c:/install.log"
    };

    gridOperations.DoDragDrop(new DataObject(DataFormats.FileDrop, filesToDrag), DragDropEffects.Copy);
} 
```

每当我尝试单击一个单元格时，mousedown 事件会立即触发并尝试拖动该单元格。例如，仅当用户按住鼠标 1 秒时，如何才能触发 mousedown 事件？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T13:54:47.217

执行此操作的正确方法不是按时间，而是在用户移动鼠标足够多时触发它。Windows 中“移动足够”的通用度量是双击大小。实现 CellMouseDown/Move 事件处理程序，类似于：

```
 private Point mouseDownPos;

    private void dataGridView1_CellMouseDown(object sender, DataGridViewCellMouseEventArgs e) {
        mouseDownPos = e.Location;
    }

    private void dataGridView1_CellMouseMove(object sender, DataGridViewCellMouseEventArgs e) {
        if ((e.Button & MouseButtons.Left) == MouseButtons.Left) {
            if (Math.Abs(e.X - mouseDownPos.X) >= SystemInformation.DoubleClickSize.Width ||
                Math.Abs(e.Y - mouseDownPos.Y) >= SystemInformation.DoubleClickSize.Height) {
                // Start dragging
                //...
            }
        }
    } 
```

# php - 如何通过htaccess缩短网址？

> ID：14537042
> 
> 赞同：0
> 
> 时间：2013-01-26T12:45:28.760
> 
> 标签：php, .htaccess, str-replace

我有这个 .htaccess 行：

```
RewriteRule ^forum_(.*).html forum.php?frm=$1 [L] 
```

我有这个 php 行：

```
$url = str_ireplace('forum.php?frm=', 'forum_.html', $url); 
```

但是网址变成了这样：

```
forum_.html1 
```

我希望网址变成这样：

```
forum_1.html 
```

怎么做？？

完整的 .htaccess 文件：

```
 RewriteEngine On
# begin index Page Rewriting
RewriteRule ^index index.php [L]
RewriteRule ^index.html index.php [L]
RewriteRule ^index.htm index.php [L]
RewriteRule ^forum_(.*)\.html forum.php?frm=$1 [L]
RewriteRule ^topics_(.*) thread.php?tpc=$1 [L]
RewriteRule ^tpcs_auth_(.*) tpcs.php?auth=$1 [L]
RewriteRule ^tpcs_rauth_(.*) tpcs.php?rauth=$1 [L]
RewriteRule ^users_(.*) user.php?id=$1 [L]
RewriteRule ^chat.html chat.php [L]
RewriteRule ^signup.html signup.php [L]
RewriteRule ^users.html users.php [L]
RewriteRule ^cp.html Upanel.php [L]
RewriteRule ^messages.html pm.php [L]
RewriteRule ^style=(.*) changetemplate.php?action=changestl&styleid=$1 [L]
RewriteRule ^lostpw.html lostpw.php [L]

# end 
```

完整的 seo.php 文件：

```
 $seotp = $config->Cquery("site_seo");
if($seotp == 0)ob_start();

function change_links(){
global $seotp;
if($seotp == 0){
$contents = ob_get_contents();
$contents = rewrite($contents);
ob_end_clean();
echo $contents;
}
}

function rewrite($url){
global $seotp;
if($seotp == 0){
$url = str_ireplace('href="index.php', 'href="index.html', $url);
$url = str_ireplace('href="./index.php', 'href="./index.html', $url);
$url = str_ireplace('href="./forum.php?frm=', 'href="./forum_.html', $url);
$url = str_ireplace('forum.php?frm=', 'forum_.html', $url);
$url = str_ireplace('href="./thread.php?tpc=', 'href="./topics_', $url);
$url = str_ireplace('thread.php?tpc=', 'topics_', $url);
$url = str_ireplace('href="./user.php?id=', 'href="./users_', $url);
$url = str_ireplace('user.php?id=', 'users_', $url);
$url = str_ireplace('tpcs.php?auth=', 'tpcs_auth_', $url);
$url = str_ireplace('tpcs.php?rauth=', 'tpcs_rauth_', $url);
$url = str_ireplace('href="./tpcs.php?auth=', 'href="./tpcs_auth_', $url);
$url = str_ireplace('href="./tpcs.php?rauth=', 'href="./tpcs_rauth_', $url);
$url = str_ireplace('href="chat.php', 'href="chat.html', $url);
$url = str_ireplace('href="users.php', 'href="users.html', $url);
$url = str_ireplace('href="./users.php', 'href="./users.html', $url);
$url = str_ireplace('href="singup.php', 'href=".singup.html', $url);
$url = str_ireplace('href="./singup.php', 'href="./singup.html', $url);
$url = str_ireplace('href="./Upanel.php', 'href="./cp.html', $url);
$url = str_ireplace('href="Upanel.php', 'href="cp.html', $url);
$url = str_ireplace('href="./pm.php', 'href="./messages.html', $url);
$url = str_ireplace('href="pm.php', 'href="messages.html', $url);
$url = str_ireplace('href="./lostpw.php', 'href="./lostpw.html', $url);
$url = str_ireplace('href="lostpw.php', 'href="lostpw.html', $url);
$url = str_ireplace('href="./changetemplate.php?action=changestl&styleid=', 'href="./style=', $url);
$url = str_ireplace('href="changetemplate.php?action=changestl&styleid=', 'href="style=', $url);
return $url;
}
} 
```

调用函数时：`change_links();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:53:02.877

您应该使用 preg_replace：

```
$url = preg_replace('/forum.php\?frm=([0-9]+)/', 'forum_$1.html', $url); 
```

使用正则表达式将解决您的问题。

# android - 带有图像的按钮尺寸

> ID：14537043
> 
> 赞同：0
> 
> 时间：2013-01-26T12:45:34.123
> 
> 标签：android, button, drawable

你能帮我解决我的小问题吗？？？我有一张由按钮制成的桌子。在我的 xml 文件中，按钮有这个代码

```
<Button
            android:id="@+id/b_0xa"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:clickable="false"
            android:text="@string/b_0xa" /> 
```

在我的 main.class 我有这一行：

```
b_0xb.setBackgroundResource(R.drawable.green); 
```

因为我想在单击后更改按钮的背景。它工作正常，但是当我运行我的应用程序时，这就是结果。

![在此处输入图像描述](../Images/375610573b5d38cff6f351b4a4905f09.png)

我该如何解决？我需要一个宽度==高度的按钮。

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T13:13:02.313

有一些方法，我不确定，但想让你试试下面的东西。

1) 删除 `android:layout_weight="1"`。

2) 在 xml 中设置静态高度和重量，例如 layout_width ="50dip" layout_Height ="50dip"

3）通过检查width参数在Activity/onCreate中设置Height。像 view.getHeight(); ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:58:32.163

我将所有按钮分组在表格布局中这是代码

```
<TableLayout
    android:id="@+id/tableLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/b_0xa"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:clickable="false"
            android:text="@string/b_0xa" />

        <Button
            android:id="@+id/b_0xb"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:clickable="false"
            android:text="@string/b_0xb" />

        <Button
            android:id="@+id/b_0xc"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:clickable="false"
            android:text="@string/b_0xc" />

        <Button
            android:id="@+id/b_0xd"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:clickable="false"
            android:text="@string/b_0xd" />

        <Button
            android:id="@+id/b_0xe"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:clickable="false"
            android:text="@string/b_0xe" />

        <Button
            android:id="@+id/b_0xf"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:clickable="false"
            android:text="@string/b_4xb" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/b_1xa"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:clickable="false"
            android:text="@string/b_1xa" />

        <Button
            android:id="@+id/b_1xb"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:clickable="false"
            android:text="@string/b_1xb" />

        <Button
            android:id="@+id/b_1xc"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:clickable="false"
            android:text="@string/b_1xc" />

        <Button
            android:id="@+id/b_1xd"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:clickable="false"
            android:text="@string/b_1xd" />

        <Button
            android:id="@+id/b_1xe"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:clickable="false"
            android:text="@string/b_1xe" />

        <Button
            android:id="@+id/b_1xf"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:clickable="false"
            android:text="@string/b_4xb" />
    </TableRow> 
```

# button - 用其他图标替换引导导航栏中的图标栏

> ID：14537044
> 
> 赞同：2
> 
> 时间：2013-01-26T12:45:36.170
> 
> 标签：button, twitter-bootstrap, navbar

我正在尝试替换导航栏按钮中的三个栏，当导航栏折叠时出现。

原始代码是：

`<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </a>`

我尝试了以下操作，但没有成功：

```
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-envelope"></span>

        </a> 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T14:17:32.610

您可以将导航栏切换按钮内的内容替换为您喜欢的任何内容，包括不同的图标或文本。这是一个带有信封图标的工作示例：http:
[//jsfiddle.net/panchroma/RWPdu/](http://jsfiddle.net/panchroma/RWPdu/)

您会看到 HTML 中没有任何异常，因此如果它仍然对您不起作用，您可以首先通过测试页面正文中的图标来检查字形图标是否已正确安装。您还可以检查这不是颜色问题-- 例如，白色背景上的白色文本。

祝你好运！

```
<div class="navbar">
<div class="navbar-inner">
<div class="container">

  <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
  <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">

      <span class="icon-envelope"></span>
  </a>

  <!-- Be sure to leave the brand out there if you want it shown -->
  <a class="brand" href="#">Project name</a>

  <!-- Everything you want hidden at 940px or less, place within here -->
  <div class="nav-collapse collapse">
    <!-- .nav, .navbar-search, .navbar-form, etc -->
  </div>

 </div>
 </div>
 </div> 
```

# linux - 我应该如何在后台运行我的 Golang 进程？

> ID：14537045
> 
> 赞同：16
> 
> 时间：2013-01-26T12:45:39.443
> 
> 标签：linux, design-patterns, process, go

这个问题与编程无关，但对程序员来说肯定很重要。

我写了一个简单的 smtp 服务器，当我从控制台运行它时一切都很好，除了它阻塞了命令行。

我知道我可以通过

```
nohup ... & 
```

或通过 screen / tmux 等

但问题是，我应该如何实现它在后台运行的程序，并且系统管理员会很高兴设置它并管理该过程？

一些比我更有经验的人在[golang-nuts](https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/othxUDO-EoE)写道，他们不使用 fork 等，而是使用来自 monit 等形式的一些“包装器”。

目标平台是基于 Debian 的，盒子上的所有其他东西都是基于 init.d 的。

该主题的任何好的资源或编写良好的示例项目的来源？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-29T00:13:07.810

正如尼克提到的， [Supervisord](http://supervisord.org/)是一个很好的选择，在我的经验中也很有效。

Nick 提到了分叉本身的问题，AFAICT 工作得很好。问题不是分叉，而是放弃特权。由于 Go 运行时启动多路复用 goroutine 的线程池的方式（当 GOMAXPROX > 1 时），setuid 系统调用[不是删除权限的可靠方法](https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/BZWXqv3YSg4)。

相反，您应该以非特权用户身份运行程序并使用[setcap](http://linux.die.net/man/8/setcap)实用程序授予它所需的权限。

例如，要允许绑定到低端口号（如 80）运行，需要在可执行文件上运行一次 setcap：`sudo setcap 'cap_net_bind_service=+ep' /opt/yourGoBinary`

您可能需要安装 setcap：`sudo aptitude install libcap2-bin`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-02T03:39:34.190

已经有很好的答案，但我会添加一些额外的信息。

您无需安装其他软件（例如`supervisord`在 Debian 上）来处理后台进程。

Debian 带有一个名为的工具，它是在脚本`start-stop-daemon`中启动守护进程的标准方法。`init.d`如果程序不自己执行此操作，它还可以为您将进程置于后台。看看`--background`选项。

用作`/etc/init.d/skeleton`您的 init 脚本的基础，但更改`do_start()`函数如下：

```
start-stop-daemon --start --quiet --pidfile $PIDFILE --make-pidfile \
    --background --exec $DAEMON --test > /dev/null \
            || return 1
start-stop-daemon --start --quiet --pidfile $PIDFILE --make-pidfile \
    --background --exec $DAEMON -- $DAEMON_ARGS \
            || return 2 
```

我还添加了`--make-pidfile`为您创建 PID 文件的选项。

如果您需要以安全的方式切换到不同的用户，还有一个`--chuid`选项。

在 Ubuntu 和 RHEL/CentOS/SL 6.X 上，最简单的方法是编写`upstart`作业配置文件。只需放入`exec /usr/sbin/yourprogram`配置`/etc/init/yourprogram.conf`文件即可。对于暴发户，无需强制程序在后台运行。不要使用传统守护程序添加`expect fork`或您需要的。`expect daemon`对于暴发户，如果进程不分叉会更好。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-27T05:45:44.427

不久前我写[了一篇](http://dustin.github.com/2010/02/28/running-processes.html)关于这个的博客文章。守护进程的想法对我来说似乎是错误的，因为它让您有很多其他事情要担心（例如，当它失败时会发生什么？您如何管理进程重启？您如何处理日志记录、工作目录、内核、系统重启， ETC...）

事实证明，如果你*不*尝试做所有这些，事情会变得容易得多。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-26T13:17:53.840

[根据我的经验， Supervisord](http://supervisord.org/)对此非常有效。

您编写应用程序以在命令行上运行，打印内容等，supervisord 负责所有守护进程，如果出错则重新启动，速率限制等

我相信以传统的 unix 方式将 go 程序分叉到后台是很困难的，因为运行时在运行您的`main()`例程之前会启动一些线程

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-01-05T15:55:11.443

> 但问题是，我应该如何实现它在后台运行的程序，并且系统管理员会很高兴设置它并管理该过程？

这里有一些想法。

# 提供包和存储库

安装软件是一回事，维护和运行它是完全不同的故事。当然，我可以下载一个 zip，解压缩，将文件放入适当的目录（请记住，包通常分散在整个文件系统中），创建一个系统用户来运行守护程序，设置相应的权限。但这很乏味，容易出错（这将导致大量的票如“呸！不运行！修复它！”）并且如果要在许多系统上安装该软件几乎不实用。

所以我们需要一个包来降低采用率。为这些软件包提供存储库通常不是火箭科学，并且使安装和/或更新更加容易。“下载->分发->安装/更新”和单个命令/服务器之间存在差异

```
$ awesomePm update coolApplication 
```

至少为基于 RedHat 和 Debian 的系统提供软件包。就个人而言，我会选择 CentOS（这将使您的软件包与几乎任何 RHEL 衍生产品兼容）和基本的 Debian。后者*也应该*使为 Ubuntu 提供一个包变得微不足道。由于我不再使用 Debian 或衍生产品，我不太确定它们是否真的兼容，我上次构建`.deb`.

**提供适当的文件**。记录安装的内容、位置和原因。提供指向相应文档的链接。对依赖项的手册页引用就足够了。这样，即使是最没有经验的管理员也可以配置您的包。

**使用最具防御性、理智的默认设置**。

**关于 golang 的特别说明**：默认情况下，大多数包构建工具会剥离包中包含的二进制文件。Go 不支持这一点，所以请注意这里。

# 完整

没有什么比不完整的包裹更烦人的了。

**尽可能使用 syslog**并遵守其约定。这样，您的日志将被放置到系统管理员期望它们的位置，并且如果它们自动过期，它们会得到处理，防止您的应用程序导致磁盘满载。如果系统管理员想要对您的应用程序的日志进行特殊处理，他会以这种方式进行配置。

**不要通过您的应用程序轮换日志。**用户可以选择如何处理它们（这可能与他们的 SLA 相关）。即使您使日志轮换的方式可配置，管理员也必须学习如何配置它——这会引入不必要的冗余。

如果您必须写入日志文件，请遵守目标系统的日志记录策略并*提供日志轮换配置文件*。您不希望您的应用程序因为机器磁盘空间不足而导致停机，对吗？

**使用系统工具而不是重新发明轮子。**如果您的应用程序需要进行一些维护，请不要费心在应用程序中使用调度程序。为维护编写一个专门的工具（单体应用程序是如此的 00 年代）并利用`cron`. 专门将相应的文件添加到`/etc/cron*`目录之一。

**提供*适当的*初始化脚本！**这样，管理员可以使用众所周知的工具`systemctl`来管理应用程序的启动和关闭。`su`当您必须对用户或使用`sudo -u`启动时调用 shell 脚本时，这非常烦人。即使调用此脚本`@onboot`，与标准的偏差也很烦人。仅仅因为启动方法有效，并不意味着应该使用它。

添加 SE-Linux 配置文件的奖励积分！

不言而喻，但我经常看到配置错误的包，所以：**测试你的包！**从目标操作系统的最小安装开始，安装你的包并确保它按预期运行。检查您提供的每个配置。

如果您打算将一个软件包放入 Debian 官方存储库，您应该计划一些时间：Debian 之所以如此稳定，是因为对软件包的要求非常严格，即使您满足所有要求，您也必须全力以赴从不稳定到稳定的测试方式。

# 精确

**不要仅仅因为方便就使用现有用户。**如果您创建 Web 应用程序，请不要重用“apache”或“www”用户。创建一个专用于您的包的用户*并将此用户添加到相应的组*中。

**坚持最少必要权限的原则。**几乎没有理由拥有二进制世界可执行文件，更不用说世界可写（这将是一个***极端***的安全漏洞）。如果应用程序未运行，您在 SO 上经常看到的建议是将权限设置为 [0]777，这允许每个用户对文件进行任何修改。实际上，几乎没有理由让任何用户都可以写入二进制文件：root，无论如何都会进行更新，总是可以写任何东西。所以权限应该是`0550`对于二进制文件。该原则也适用于数据目录等。在这里投入一些时间和精力。您不希望您的应用程序成为成功攻击的载体，对吗？即使是潜在的安全风险也会对您和您的声誉造成反击。我倾向于将所有数据文件设置`0600`为需要由应用程序的系统用户写入的文件、`0400`只读文件和`0500`二进制文件。然后，我做了一个细粒度的分析组权限应该是什么。例如：一个组可能会更改 Web 应用程序的各个模板——但很可能不会更改资源目录子树的目录结构。

如果你把精力放在安全上，你就会增加信任。请注意，在决定是否采用包之前，通常会检查包的安全影响。

**遵守[FHS](https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard)（！！）！**即便如此：仅仅因为你可以在 下做任何事情`/opt/yourapplication`，这样做并不总是一个好主意。而是分别安装到`/usr`和`/var`（假设您的应用程序在启动时不是必需的）。

**如果您有依赖项，请定义它们。**不要仅仅假设存在一个包。

如果您对本地 SMTP 服务器有依赖关系，请不要声明对`postfix`. 也许管理员更喜欢 sendmail（无论出于何种原因）。因此，请改为定义对`mail-transport-agent`(Debian) 或`mta`(RH, iirc) 的依赖项。

# 结论

这就是我对优秀软件的期望——与现有软件很好地集成，并使其易于安装、维护、配置和运行，而无需学习*冗余*配置。如果我看到一个包的 SELinux 配置文件，这确实给了供应商一个好处——除非配置文件非常草率，否则这表明供应商非常重视安全性。

# hibernate - 通用 DAO 模式实现设计

> ID：14537049
> 
> 赞同：7
> 
> 时间：2013-01-26T12:45:49.723
> 
> 标签：hibernate, design-patterns, gwt, genericdao

我正在做一个 GWT+Hibernate 项目。它由各种模块组成，我将在其中命名两个 - 公司和登录。对于每个模块，我都创建了一个 RPC 服务，这样项目就不会以一个可以完成所有工作的神一样的服务而告终。

为了与数据库交互，我使用 Hibernate API——具体来说，是 POJO 中的 EntityManager 和 Annotations。

另外，我创建了一个通用 DAO 类来处理基本的 CRUD 操作。GenericDAO 类也将处理 EntityManager。每个模块服务类都将扩展这个 GenericDAO，以便它可以添加自己的查询方法。

以下是 GenericDAO 类的存根 -

```
public class GenericDataAccessService<EntityType, PrimaryKeyType extends Serializable> {

    // Constructor

    @Override
    public void save(EntityType newEntity) {
        // TODO Auto-generated method stub
    }

    @Override
    public void update(EntityType entity) {
        // TODO Auto-generated method stub

    }

    @Override
    public EntityType find(PrimaryKeyType primaryKey) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public List<EntityType> findByProperty(String property) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public List<EntityType> findAll() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void delete(PrimaryKeyType primaryKey) {
        // TODO Auto-generated method stub

    }

    @Override
    public void delete(EntityType entity) {
        // TODO Auto-generated method stub

    }
} 
```

现在，假设我想要公司模块的另一种查找方法。所以，我写了我的 CompanyService 类 -

```
public class CompanyService extends GenericDataAccessService<Company, int> {

    public void addCompany(Company company) {
        super.save(company);
    }

    public Company updateCompany(Company company) {
        return super.update(company);
    }

    public List<Company> findMatchingCompanies(String companyName) {
        return super.findByProperty(companyName);
    }

    public void deleteCompany (int companyId) {
        super.delete(companyId);
    }

    public List<Company> findThroughSomeCustomSearch() {
        // custom query code.
    }
} 
```

其他模块也遵循类似的脚步。这样，我也可以为每个模块的服务添加非数据访问相关的方法。

现在，我需要在客户端公开这些模块。我选择不以任何方式公开 GenericDAO 类；所以没有接口。相反，我为每个模块创建一个接口。

因此，对于 CompanyService，它是 -

```
public interface CompanyService {

    public void addCompany(Company company);

    public Company updateCompany(Company company);

    public List<Company> findMatchingCompanies(String companyName);

    public void deleteCompany (int companyId);

    public List<Company> findThroughSomeCustomSearch();
} 
```

其他模块的接口也是如此。

这是一个好的设计吗？GenericDAO 确实保存了一些会话管理和基本 CRUD 操作的样板代码。但是，由于 Hibernate API，每个方法的代码已经减少到 3-4 行。在这种情况下，我没有发现 GenericDAO 的任何其他用途。还是我以错误的方式实施它？

请提出比这更好的方法，以防这种设计不够好。

编辑：我想知道在这种情况下你会给服务模块起什么名字。我现在正在使用“Impl”后缀，但感觉就像卡在我的喉咙里。例如，对于公司模块，接口 - CompanyService 类 - CompanyServiceImpl

更好的建议？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T21:46:03.907

我认为你可以做几件事来改善这一点：

**耦合**：

大多数时候，组合比继承更可取。由于这种关系，您的服务是强耦合的。我打算改变它，改用组合如下：

```
public class CompanyService  {
    private GenericDataAccessService<Company, int> dao; // interface 

    public void addCompany(Company company) {
        dao.save(company);
    }
    ....
} 
```

为了打破依赖关系，dao 字段应该是一个抽象类或接口（我既不知道您的代码，也不知道您的需求，也不知道 java）以允许您注入它。

**可测试性**：

注入这些类的依赖项还可以帮助您轻松地测试代码并注入模拟实例。

**不需要的操作**：

使用继承会强制您执行您可能不想允许的操作。例如，假设您有一个 AuditingDataService，如下所示：

```
public class AuditingService extends GenericDataAccessService<Audit, int> 
```

如果你这样做，你的 AuditingService 将继承一个**Delete**方法！！！你能像我一样感受到那种强烈的气味吗？它将把你带到以下点。

**反模式**

在前面的示例中（用于审核日志条目的删除方法），您将被迫使用*无操作*或*抛出异常*方法来覆盖它，以防止有人使用它......嗯嗯......嗯......好的设计？

**结论**：

我认为不是，仅仅是因为继承在这里不太适合。

暂时忘记 LoC，专注于改变设计。

**更新**：

Java 有自己的命名约定，如果 Impl 是一个糟糕的后缀，它是每个 Java 程序员都理解和共享的约定之一。所以，我觉得没问题。

# python - 带有支付网关的 django csrf 机制

> ID：14537052
> 
> 赞同：1
> 
> 时间：2013-01-26T12:46:21.930
> 
> 标签：python, django, payment-gateway, django-csrf

我有一个我很困惑的csrf情况。

我将支付网关返回 url 设置为一个值，就像`http://127.0.0.1:8000/purchased/` 我正确设置了我的 url 一样，这个特定的值与我拥有的视图相关联

```
@csrf_protect
def purchased(request): 
```

我面临的问题是，当我将返回网址更改为`http://127.0.0.1:8000/mypayments/purchased/`

我开始收到 CSRF 403 禁止错误。（当然我已经在我的 urls.py 文件中进行了更改，以调整我的 url 以绑定到同一个视图）

我不明白更改返回 url 会如何影响 csrf 机制。

# c++ - 禁止在类中使用方法

> ID：14537059
> 
> 赞同：2
> 
> 时间：2013-01-26T12:47:26.340
> 
> 标签：c++, oop, class

我有一个类，它具有访问器方法，这些访问器方法旨在在类之外用于查看它的一些私有数据。

但是，类的内部方法不应使用这些公共访问器，因为类的内部状态会被其其他方法更改，并且这些更改不会写入公共访问器查看的位置，直到计算完成。

是否有一种编译时方法可以防止类调用它自己的一个或多个成员？或者，使用运行时检查`assert`很好，因为它可以很容易地在发布编译中消除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T13:05:42.213

虽然我在实践中从未见过这种模式，但您可以将实现和接口分开（尽管通常情况相反）

```
namespace detail {
    class Impl {
    protected:
        Impl() : x_(0) {}

        int x_;
        void internal() { x_ = 1; }
        void something_else() { x_ = 2; }
    };
}

class Interface : public detail::Impl {
public:
    int x() const { return x_; }
    void x(int x) { x_ = x; }
}; 
```

或者更进一步没有推导：

```
class Interface;

namespace detail {
    class Impl {
    private:
        friend class ::Interface;
        Impl() : x_(0) {}

        int x_;
        void internal() { x_ = 1; }
        void something_else() { x_ = 2; }
    };
}

class Interface {
public:
    int x() const { return impl_.x_; }
    void x(int x) { impl_.x_ = x; }
private:
    Impl impl_;
}; 
```

还要查找 PIMPL 惯用语，它通常用于减少头文件/库/客户端耦合并增加编译时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:59:41.983

对于使用断言的调试构建，这是我的建议：

*   制作一个简单的函数或一个名为`IncrementInternalCallCount`. 这将增加类内的调用计数。为此，只需在类中有一个计数器变量。仅将这些东西用于调试/诊断目的。
*   在类的每个方法中调用这个宏/函数。除了那些 getter 函数。
*   在 getter 函数中，检查 internal-call-count 是否大于零，如果是。提出断言。

为此，您可以使用一些 RAII 类，它会增加计数器，并会在函数退出时减少计数器。因此，您需要在每个函数的开头放置一个 RAII 对象。析构函数将被自动调用。这也将允许从其他类函数调用所有非 getter 函数。

非常少的代码（不是严格的 C++ 正确的）：

```
class CYourClass
{
    int Counter = 0; // Not C++ syntax

   IncrementCallCounter() { Counter++;}
   DecrementCallCounter() { Counter++;}
   CheckCounterStatus() { if(Counter>0) ASSERT;}

private:
   void InternalFun() 
  {
     IncrementCallCounter();
    // Do work, call anything
    DecrementCallCounter();
  }

public:
int Getter1()
{
   CheckCounterStatus();
}
}; 
```

# php - 在 twitter 引导模式代码 Igniter 中编辑字段

> ID：14537060
> 
> 赞同：0
> 
> 时间：2013-01-26T12:47:26.693
> 
> 标签：php, json, codeigniter, jquery, twitter-bootstrap

我正在使用代码点火器...我的记录显示在我的视图页面的表格中..每一行都有一个编辑按钮..我想要的是如果我点击编辑按钮，模式弹出旧值..然后更新字段..我不知道如何首先将参数传递给控制器​​，然后从控制器获取值并在模式中显示而无需重新加载页面..这就是我正在做的事情。 .

我的视图页面..这是我在 MODAL 中的表格

```
 <div class="modal hide fade in" id="myModal">
<div class="modal-header">
  <button type="button" class="close" data-dismiss="modal">×</button>
<h3>Check information</h3>
    </div>
    <div class="modal-body">

Employee name:<?php echo form_input($emp_name); ?>
</div> 
```

显示记录的表

```
 <td><?php echo $row->emp_name ?></td>
  <td><a  href="employesController/<?php echo $row->emp_id ?>"class = "edit">Edit       </a> </td> 
```

我的 javascript

```
 <script type='text/javascript'>
$(document).ready(function(){
    $(".edit").click(function(){
        $('.modal').modal('show');

       });
});
</script> 
```

我的控制器

```
 function editEmploye(){

 $id = $this->uri->segment(3);
$this->load->model('employesModel');
$data['result'] = $this->employesModel->getEditEmploye($id);

} 
```

如何将参数发送到控制器并使用旧值启动模态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:23:40.287

Bootstrap Modal 在页面加载时加载模态中存在的表单。当模态出现时，页面不会刷新，但模态 javascript 只是显示之前加载（但隐藏）的表单。

为了回答您有关如何预填表格的问题，我假设您处于以下情况。

你有一张桌子。例如。

```
Food        |    Price
Fries       |    $1.00
Burger      |    $3.00 
```

假设您单击 Fries，您希望您的模态表单预先填写

```
<input name="food" value="fries" />
<input name="price" value="$1.00" /> 
```

我希望到目前为止我对你有帮助。

你有一个表格

```
<input id="food_name" name="food" value="" />
<input id="food_price" name="price" value="" /> 
```

首先。

首先，您向表中的每一行添加一个类。（或 div，如果您使用 div 作为包装器。）

```
<table>
  <tr class="food_list">
    <td>Fries</td><td>$1.00</td>
  </tr>
<table> 
```

然后，您使用 javascript/jquery 来检测标记子项的**VALUE**，这将是与其对应的标记的值。请参考[这个](https://stackoverflow.com/questions/7134492/jquery-get-nested-a-element-attribute-inside-div-element)。为此设置一个 jquery onclick。

然后，您可以设置做一个 $('#food_name').val('valueGottenFromAbove') 来预填表格。

我无法为您提供一个工作示例，但我相信，这是一种预填充该引导模式表单的工作算法。

祝你好运。

请使用您认为合适的类和 ID。我只是提供一种算法，希望能帮助你理解如何处理这个问题。

# python - 打印列表中的所有偶数，直到给定数字

> ID：14537063
> 
> 赞同：0
> 
> 时间：2013-01-26T12:47:40.927
> 
> 标签：python

我刚刚开始涉足 Python，并且已经开始阅读 learnpython.org 上的章节。在“循环”一章中，我用下面的代码解决了这个挑战。但是我不确定它是最有效的。这似乎不是因为我必须两次定义“不超过的数字”。在这个（我猜的）简单的问题中，DRY 应该可以坚持，对吧？

[练习](http://www.learnpython.org/page/Loops)是_

> 循环并以接收到的相同顺序打印出数字列表中的所有偶数。不要打印序列中 237 之后的任何数字。

我的代码：

```
numbers = [ 951, 402, 984, 651, 360, 69, 408, 319, 601, 485, 980, 507, 725, 547, 544, 615, 83, 165, 141, 501, 263, 617, 865, 575, 219, 390, 984, 592, 236, 105, 942, 941, 386, 462, 47, 418, 907, 344, 236, 375, 823, 566, 597, 978, 328, 615, 953, 345, 399, 162, 758, 219, 918, 237, 412, 566, 826, 248, 866, 950, 626, 949, 687, 217, 815, 67, 104, 58, 512, 24, 892, 894, 767, 553, 81, 379, 843, 831, 445, 742, 717, 958, 609, 842, 451, 688, 753, 854, 685, 93, 857, 440, 380, 126, 721, 328, 753, 470, 743, 527 ]

# My Solution
for x in numbers:
  if x != 237:
    if x % 2 == 0:
      print x
  if x == 237:
    break 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T12:48:30.163

这`else`就是`elif`：

```
for x in numbers:
  if x == 237:
    break
  elif x % 2 == 0:
    print x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T12:55:27.987

另一种方法是使用`itertools`它总是以某种方式有用：

```
>>> from itertools import takewhile, ifilter
>>> not_237 = takewhile(lambda L: L != 237, numbers)
>>> is_even = ifilter(lambda L: L % 2 == 0, not_237)
>>> list(is_even)
[402, 984, 360, 408, 980, 544, 390, 984, 592, 236, 942, 386, 462, 418, 344, 236, 566, 978, 328, 162, 758, 918] 
```

所以我们创建了一个在 237 处停止的惰性迭代器，然后从那个偶数中取出

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T13:07:34.403

这也是可能的：

```
try:
    i = numbers.index(237)
except:
    i = len(numbers)
for n in numbers[:i]:
    if not n%2:
       print n 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-27T16:01:24.633

我只是在我的“学习基础知识”中完成这个练习，我得出了一个类似但更糟糕的解决方案，patrik :(

`x = 0 for loop in numbers: if (numbers[x]) % 2 ==0: print (numbers[x]) x = x+1
if (numbers[x]) ==237: break
else: x =x+1 continue`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-29T05:58:44.840

你可以使用列表理解来做到这一点

解决方案是这样的：

```
numbers = [x for ind,x in enumerate(numbers) if x % 2== 0 and numbers[ind+1]!=237 ] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-20T21:20:22.813

> 3 if's and done :)

```
 if x % 2 == 0:
        print x
    if x == 237:
        break
    if x % 2 != 0: 
        continue 
```

输出

```
402
984
360
408
980
544
390
984
592
236
942
386
462
418
344
236
566
978
328
162
758
918 
```

# javascript - 如何将 onload 事件添加到窗口

> ID：14537064
> 
> 赞同：1
> 
> 时间：2013-01-26T12:47:40.803
> 
> 标签：javascript, jquery, html, css

我的代码是，

```
<html>
    <head>
       <title>onclick test</title>
       <script type="text/javascript">
           var googleWindow = window.open('http://www.google.com');
           window.onload = change;
           function change(){
            alert('Hello');
           }
        </script>
</html> 
```

上面的代码工作正常。它在窗口加载时调用 change 函数。我正在尝试将 onload 事件添加到 googleWindow 但它不起作用。

```
<html>
    <head>
       <title>onclick test</title>
       <script type="text/javascript">
           var googleWindow = window.open('http://www.google.com');
           googleWindow.onload = change;
           function change(){
            alert("Hello');
           }
        </script>
</html> 
```

如何将事件添加到 googleWindow？

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T12:51:35.947

您不能将事件添加到另一个域中的窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T13:16:38.553

*onload 事件仅触发在该窗口*中加载的函数，因此您不能真正做到这一点。但是，如果您可以控制正在打开的新窗口的内容（即，如果您要打开一个显示您自己的某些内容的窗口），那么您可以在该窗口中打开的页面中放置一个 onload 处理程序，并且然后被调用的函数可以通过“window.opener”与开启器窗口交互，例如，如果你有两个文件“1.html”和“2.html”，那么你可以拥有：

## 1.html

```
<a href="#" onClick="window.open('2.html')">Open '2.html'</a> 
```

## 2.html

```
<head><script>
window.opener.alert("this alert is displayed by the '1.html' window");
</script></head> 
```

在上面，单击第一个窗口中的链接后，第二个窗口将打开（可能在浏览器的新选项卡中），打开后您将立即看到第一个窗口中显示的警报（即第一个标签）

PS
哦，正如罗里在他的回答中指出的那样，您绝对必须将文件放在同一个域中

# java - 防止身体在 Box2D 中旋转

> ID：14537066
> 
> 赞同：9
> 
> 时间：2013-01-26T12:47:45.500
> 
> 标签：java, box2d, game-physics, jbox2d

我目前正在使用 Box2d，更准确地说是 Java 端口 jBox2d。

我有一个圆圈在下降时与其他圆圈碰撞（所有这些圆圈形成一种曲柄，见下图）。

![插图](../Images/6c583686b2a2743acccc93a2277878b5.png)

自然，圆在下落时开始旋转。但我想**防止它旋转**，这样摩擦力就会高得多。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-26T13:38:01.800

为了防止 body 旋转 set fixedRotation = true 在 BodyDef 或调用 Body 的 setFixedRotation （如果您需要运行时更改行为）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-21T12:14:41.180

在运行时你想设置 set rotationfixed 然后

```
b2Body body;  
body->SetFixedRotation(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-04T16:51:58.813

固定旋转在物理上是指在固定轴上旋转，所以 isFixedRotation=true; 可能无法解决这个问题，但是将角度阻尼设置为如此高的值可以防止旋转

# .htaccess - 为 nginx 重写

> ID：14537067
> 
> 赞同：1
> 
> 时间：2013-01-26T12:47:48.610
> 
> 标签：.htaccess, url-rewriting, nginx

您好，我正在尝试将这些重写为 nginx 格式，但无法取得任何进展。你能帮我为 nginx 重写这些吗？

```
# Rewrite any calls to *.html, *.json, *.xml, *.atom, *.rss, *.rdf or *.txt if a folder matching * exists
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !public/
RewriteCond %{DOCUMENT_ROOT}/public/$1.$2 !-f
RewriteRule (.+)\.(html|json|xml|atom|rss|rdf|txt)$ $1/ [L]

# Add a trailing slash to directories
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(\.|\?)
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ([^/]+)$ $1/ [L]

# Rewrite any calls to /render to the image parser
RewriteCond %{REQUEST_URI} render/
RewriteRule ^render/. app/parsers/slir/ [L]

# Rewrite any calls to /* or /app to the index.php file
RewriteCond %{REQUEST_URI} /app/$
RewriteRule ^app/ index.php [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ index.php?/$1/ [L,QSA]

# Rewrite any file calls to the public directory
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !public/
RewriteRule ^(.+)$ public/$1 [L] 
```

我已经尝试过了，但它没有用。

```
location  public/ {
}

location ~ (\.|\?) {
}

location ~ (.*)/$ {
}

location  public/ {
}

location / {
  if (!-e $request_filename){
    rewrite (.+)\.(html|json|xml|atom|rss|rdf|txt)$ /$1/ break;
  }
  if (!-e $request_filename){
    rewrite ([^/]+)$ /$1/ break;
  }
   if ($request_uri ~ "render/"){
    rewrite ^/render/. /app/parsers/slir/ break;
  }
  if ($request_uri ~ "/app/$"){
    rewrite ^/app/ /index.php break;
  }
   if (!-e $request_filename){
    rewrite ^/(.*)/$ /index.php?/$1/ break;
  }
  if (!-e $request_filename){
     rewrite ^(.+)$ /public/$1 break;
  }
} 
```

当我尝试这个并输入我的网址时。它下载一个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:59:57.363

我不确定它是否完全符合您的问题，但这应该会给您一些帮助和下一步的起点。还有一个建议 - nginx 的工作方式与 Apache 有点不同，所以不要尝试使用 nginx 之类的东西`if (!-e $request_filename)`- 这是一个非常糟糕的主意（关于这里的东西：[不要那样做](http://wiki.nginx.org/HttpCoreModule#try_files)）

```
# It's your first rule:
# If request location match this regex then
# try file as request, if not exist
# try a folder matching * or
# return with 404
location ~ (.+)\.(html|json|xml|atom|rss|rdf|txt)$ {
   try_files $uri $1/ =404;
}

# It's firts part of your second rule:
# If request match this regex 
# try file as request if not exist
# try file with added slash or
# return with 404
location ~ !(\.|\?) {
   try_files $uri $uri/ =404
}

# It's second part of your second rule:
# If request match this regex
# try file as request if not exist
# try file with added slash or
# return with 404
location ~ !(.*)/$ {
   try_files $uri $uri/ =404
}

# It your third rule:
# Rewrite /render to /app/parsers/slir
location = /render {
   rewrite .* /app/parsers/slir break;
}

# It's first part of your forth rule:
# If request location match this request then use /index.php
# or return with 404
location ~ ^/app/$ {
   try_files /index.php =404;
}

# It's second part of your forth rule:
# If request location match regex try to use it,
# if not try /index.php?/$1/ location
# or return with 404
location ~ ^(.*)/$ {
   try_files $uri /index.php?/$1/ =404;
}

# It's your fifth rule:
# Try file with match this reqex, if not try location /public/$1
# or return with 404
location ~ ^/(.+)$ {
   try_files $uri /public/$1 =404;
}

# It's a global rule
# For all request try file as it is
# or return with 404
location / {
   try_files $uri =404;
} 
```

# c# - Windows Phone 8 更改口音和主题颜色

> ID：14537071
> 
> 赞同：11
> 
> 时间：2013-01-26T12:48:04.953
> 
> 标签：c#, xaml, colors, windows-phone-8, windows-phone

我正在为 Windows Phone 8 创建一个应用程序，并且我想更改主题颜色，而与用户在手机操作系统中设置的主题无关，就像其他应用程序执行此操作一样（例如 Skype）。

到目前为止，我只能通过访问 XAML 中的 LayoutRoot 元素来更改背景颜色：

```
this.LayoutRoot.Background = new SolidColorBrush(Colors.White); 
```

和前景色：

```
(App.Current.Resources["PhoneForegroundBrush"] as SolidColorBrush).Color = Colors.Green; 
```

但是，以下内容在 Windows Phone 8 上不起作用：

```
(App.Current.Resources["PhoneBackgroundBrush"] as SolidColorBrush).Color = Colors.White;
(App.Current.Resources["PhoneAccentBrush"] as SolidColorBrush).Color = Colors.Yellow; 
```

我不知道为什么我不能更改`PhoneBackgroundBrush`or`PhoneAccentBrush`并且我已经尝试过使用谷歌搜索解决方案，但是它们仅适用于 windows phone 7 SDK 。[此处](http://www.identitymine.com/forward/2010/11/theming-tips-for-windows-phone-7-wp7/)的教程适用于 WP 7，但不适用于 WP 8。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-26T23:58:45.240

法布里斯绝对是在正确的轨道上。获取默认的 PhoneAccentBrush 并更改它的颜色是可行的方法。

将此代码添加到应用程序构造函数的末尾，它将覆盖 WP8 应用程序的强调色：

```
 Resources.Remove("PhoneAccentColor");
    Resources.Add("PhoneAccentColor", Colors.Magenta);
    ((SolidColorBrush)Resources["PhoneAccentBrush"]).Color = Colors.Magenta; 
```

当我们运行此代码并单击 a`<Button />`时，您可以看到新的 Accent 颜色：

![带有洋红色背景的单击按钮](../Images/8db283f423c38b13a0e178b3de1f237b.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-27T01:56:04.730

如果您想要不同的画笔，请创建新画笔。无需费心更换现有的。有一天你可能想要使用那些内置的画笔。

我建议只向您的应用程序添加新资源并参考这些资源。

```
<Application.Resources>
    <SolidColorBrush x:Key="AppAccentBrush" Color="#012345"/>
</Application.Resources> 
```

在您的页面中，像这样引用它

```
<TextBlock Text="Custom Accent" Style="{StaticResource PhoneTextNormalStyle}"
           Foreground="{StaticResource AppAccentBrush}"/> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-26T15:40:03.580

前几天看到一篇博文：

[http://www.rudyhuyn.com/blog/2013/01/18/forcer-un-theme-sous-windows-phone-8/](http://www.rudyhuyn.com/blog/2013/01/18/forcer-un-theme-sous-windows-phone-8/)

这是法语，但不要害怕。

在 Windows Phone 8 中有一个更改颜色的示例（检查方法 DarkTheme()）

# html - 关键帧动画 - 即时更改

> ID：14537073
> 
> 赞同：11
> 
> 时间：2013-01-26T12:48:23.660
> 
> 标签：html, css, css-transitions

我已经开始学习 CSS3 中的关键帧动画。我认为我注意到的是，无论我如何使用关键帧动画“计时”事物，过渡总是平滑的。

例如; 背景颜色从 50% 变为 100%，是动画从 50% 播放到 100% 时的平滑过渡。

我想要实现的是一种通过“即时”类型的值更改来制作动画的方法。

再举一个例子：如果 BG 的 50% 值为红色，BG 的 100% 值为蓝色；动画应保持红色直到达到 100%，并在 100% 完成后立即变为蓝色。

我不确定我的术语是对还是错，但无论如何，某些方向是完美的。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-26T13:29:48.627

您可以使用[步骤](https://developer.mozilla.org/en-US/docs/CSS/timing-function#step-end)作为计时功能来暂停动画，直到下一个关键帧

CSS：

```
 -webkit-animation-timing-function: steps(1, end);
    -moz-animation-timing-function: steps(1, end);
    -ms-animation-timing-function: steps(1, end);
    -o-animation-timing-function: steps(1, end);
    animation-timing-function: steps(1, end); 
```

示例代码：

```
@keyframes quick {
    0% {
        background-color:green;
    }
    50% {
        -webkit-animation-timing-function: steps(1, end);
        -moz-animation-timing-function: steps(1, end);
        -ms-animation-timing-function: steps(1, end);
        -o-animation-timing-function: steps(1, end);
        animation-timing-function: steps(1, end);
        background-color:blue;
    }
    100% {
        background-color:red;
    }
}
@-o-keyframes quick {
    0% {
        background-color:green;
    }
    50% {
        -o-animation-timing-function: steps(1, end);
        background-color:blue;
    }
    100% {
        background-color:red;
    }
}
@-moz-keyframes quick {
    0% {
        background-color:green;
    }
    50% {
        -moz-animation-timing-function: steps(1, end);
        background-color:blue;
    }
    100% {
        background-color:red;
    }
}
@-webkit-keyframes quick {
    0% {
        background-color:green;
    }
    50% {
        -webkit-animation-timing-function: steps(1, end);
        background-color:red;
    }
    100% {
        background-color:blue;
    }
}
body {
    height:100%;
    width:100%;
    animation:quick 3s;
    -moz-animation:quick 3s;
    -webkit-animation:quick 3s;
    -o-animation:quick 3s;

    -webkit-animation-fill-mode: forwards;
    -moz-animation-fill-mode: forwards;
    -o-animation-fill-mode: forwards;
    animation-fill-mode: forwards;
} 
```

[http://jsfiddle.net/sC5fy/1/](http://jsfiddle.net/sC5fy/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-13T16:39:21.883

我刚刚遇到了这个问题，并通过在开始时标记初始值然后在我希望立即发生更改之前再次标记来解决它 - 见下文

```
@-webkit-keyframes image2 {
  0%   {opacity: 1;}
  24.99%   {opacity: 1;}
  25%  {opacity: 0;}
  100% {opacity: 0;}
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-26T13:38:51.380

一个非常简单的解决方案可能是添加`background-color: red`到您的元素中，然后在该`@keyframes`部分中：

```
%0 {
  background-color: blue;
} 
```

试试看：[jsFiddle](http://jsfiddle.net/sbcgh/1/)

# java - Java web socket握手触发连接完全静默

> ID：14537077
> 
> 赞同：0
> 
> 时间：2013-01-26T12:48:44.877
> 
> 标签：java, google-chrome, websocket, handshake

我的头轻轻地撞在桌子上已经够久了，所以我想我可能会寻求帮助...

我一直在尝试在 chrome 扩展程序和 java 服务器之间建立 websoket 连接，但我已经做到了这一点：

客户端连接到服务器并按照以下方式发送握手：

```
GET / HTTP/1.1
Upgrade: websocket
Connection: Upgrade
Host: localhost:4444
Origin: chrome-extension://gfndmmgdfjmdfknkdlmjmadlpjdogbmh
Pragma: no-cache
Cache-Control: no-cache
Sec-WebSocket-Key: m2KMLKq3zbteS1pS0YPu5g==
Sec-WebSocket-Version: 13
Sec-WebSocket-Extensions: x-webkit-deflate-frame 
```

然后服务器回复：

```
HTTP/1.1 101 Switching Protocols\r\nUpgrade: websocket\r\nConnection: Upgrade\r\nSec-WebSocket-Accept: qI/0aM9x3AC2E+fLwpdPJpkiMTs=\r\n\r\n 
```

然后，什么都没有，我看不到消息到达客户端，我无法再向客户端发送任何内容。

知道我做错了什么吗？提前致谢。斯莫列特。

# android - 使用 Chrome 作为 Android webview 的渲染引擎

> ID：14537083
> 
> 赞同：38
> 
> 时间：2013-01-26T12:49:43.443
> 
> 标签：android, google-chrome, android-webview

我发现[这个问题](https://stackoverflow.com/questions/6352654/use-firefox-as-render-engine-for-android-webview)与我需要的非常相似，但我需要 chrome。由于许多原因，android webView（正如我在[这里](https://stackoverflow.com/questions/14535346/are-there-any-ways-to-embed-a-browser-in-android-app)讨论的那样）与我的应用程序的要求不兼容。

那么有什么方法可以*使用**Chrome**作为**Android webview**的**渲染引擎***

 *** * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-11-01T05:38:45.943

这是 Android 4.4 KitKat 中的默认设置。请参阅[https://developers.google.com/chrome/mobile/docs/webview/overview](https://developers.google.com/chrome/mobile/docs/webview/overview)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-08T02:50:58.180

这是使用 Chromium 代码并具有类似 WebView API 的视图的概念证明。 [https://github.com/pwnall/chromeview](https://github.com/pwnall/chromeview)

请务必阅读自述文件中的*问题*部分。这只是一个起点，还没有准备好用于生产。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-29T10:18:49.867

除了@Hyangelo 的回答，如果有人需要支持 Chrome for Android 4.0-4.3 版本，您可以使用[crosswalk](https://crosswalk-project.org/ "人行横道")。**

# sql - 在 SQL Server 中查看动态列

> ID：14537084
> 
> 赞同：4
> 
> 时间：2013-01-26T12:49:51.037
> 
> 标签：sql, sql-server, sql-server-2008

如何在 SQL Server 中创建视图，其中列是根据存储在另一个表中的值定义和显示的。这些列几乎是由函数计算的，但它们的编号是从另一个表的记录中设置的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T12:57:10.113

这对于视图是不可能的，因为 SQL Server 查询*始终*是静态类型的，因为列数、名称和类型在执行时都是静态已知的。

动态列需要动态 SQL。

视图不支持动态 SQL。您必须找到其他方法来返回数据，可能每个逻辑列只有一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T13:01:45.400

您可以创建内联表值函数并定义字段并返回表，然后在视图中调用该函数。

# c# - 如何防止注销的用户使用asp .net中的后退按钮重新访问上一页？

> ID：14537085
> 
> 赞同：1
> 
> 时间：2013-01-26T12:49:53.023
> 
> 标签：c#, asp.net, back-button, browser-history

我的 asp .net 应用程序面临注销用户使用浏览器的后退按钮重新访问以前访问的页面的问题。用户无法执行任何服务器端事件，但如果根本不允许用户查看此页面会更好。我搜索了一种解决方案来阻止这种情况，但大多数解决方案都包括在页面内编写代码，不能像这样重新访问。

```
 protected override void OnPreRender(EventArgs e)
        {
            base.OnPreRender(e);
            string sb;
            sb = "<script language=javascript>\n";
            sb += "window.history.forward(1);\n";
            sb += "\n</script>";
            ClientScript.RegisterClientScriptBlock(Page.GetType(), "clientScript", sb);
        } 
```

这意味着我必须在登录用户可以访问的每个页面中编写代码。有没有更好的方法来处理这个问题？我期待一个优化的解决方案，我将不必在每一页中编写代码。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T12:59:54.183

根据您的问题，我了解您只想阻止使用“后退”按钮（查看以前的数据），但*您的服务器端工作正常并且不允许注销的用户执行任何任务......*

如果**不是**这种情况，您还应该在服务器端添加验证，以确保注销的用户（应该像从未登录的用户一样对待）不能做任何需要权限的事情......！

回到您的问题 - 您应该禁用浏览器中的缓存。

在代码隐藏中：

```
Response.Cache.SetNoStore();
Response.Cache.SetExpires(DateTime.UtcNow.AddHours(-1));
Response.Cache.SetCacheability(HttpCacheability.NoCache); 
```

您还可以在 ASPX 页面中使用 META 标签：

```
 <META Http-Equiv="Pragma" Content="no-cache">
 <META Http-Equiv="Expires" Content="0">
 <META Http-Equiv="Cache-Control" Content="no-cache"> 
```

这将告诉浏览器该页面不应被缓存并且不会通过`Back`按钮重新显示

如果这还不够，您还可以使用 JavaScript 清除历史记录，**[这里是一个示例](http://www.codeproject.com/Tips/135121/Browser-back-button-issue-after-logout)**

**编辑：** 如果您希望此代码只出现一次，您可以创建一个具有此逻辑的`BasePage`（派生自）。`Page`然后，您想要此逻辑的任何页面都应该来自`BasePage`而不是常规`System.Web.UI.Page`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T13:02:49.783

假设每个受限制的页面都检查用户是否有权访问该页面，那么您遇到的问题归结为缓存。如果您不检查用户是否已登录，则无法绕过它 - 您必须检查每个页面以确保安全。否则，这是一个安全漏洞。

这样想吧。用户访问的页面已保存到他们的计算机中，以便可以将其呈现给用户。用户随后登出。作为浏览器缓存的一部分，上一页仍然存在于他们的计算机上。

在这种情况下，用户能够再次查看该页面并没有什么特别的问题。如果你想保护这个页面，你已经请求浏览器不要缓存这个页面。

您可以使用元标记来实现这一点。.NET 可能有其他方法来完成这项工作。

请记住，这意味着每个设置为不缓存的页面每次都会返回到服务器，并且会被注意到速度较慢。它还会给 Web 服务器带来额外的负载。根据您的网站的繁忙程度，这可能不是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T13:04:35.570

使用@Blachshma 提到的解决方案，您还可以拥有一个 GET 变量，其中包含获取页面时的时间戳。然后，`Page_Load()`如果您可以检查时间戳是否与当前时间戳相同。如果不是，则刷新或重定向页面（在您的情况下为登录页面）这就是 GMAIL 的方式 IIRC。

记得把时间检查放在`if(!IsPostBack)`里面`Page_Load()`。

# sql - 错误 - 对象“sysobjects”、数据库“mssqlsystemresource”、架构“sys”的 SELECT 权限被拒绝

> ID：14537086
> 
> 赞同：1
> 
> 时间：2013-01-26T12:50:10.587
> 
> 标签：sql, sql-server

我收到错误消息

```
Error - The SELECT permission was denied on the object 'sysobjects', database 'mssqlsystemresource', schema 'sys'. 
```

当我尝试升级 EPiServer 站点时。升级使用存储在站点连接字符串中的用户名和密码。

为了获得对象“sysobjects”的选择权限（可能还有执行升级所需的其他权限），我应该在 Sql Server Management Studio 中对此用户进行哪些更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:53:36.760

你执行这个非查询：`GRANT SELECT ON sys.sysobjects TO you;`where`you`是用户名。您只能以管理员身份（通常是用户`sa`）执行此操作

# javascript - 如何从 Javascript 以编程方式调用 EditTextCell 的 onBrowserEvent()？

> ID：14537088
> 
> 赞同：4
> 
> 时间：2013-01-26T12:50:15.890
> 
> 标签：javascript, java, gwt, dom-events

**如何从 Javascript 以编程方式调用 EditTextCell 的 onBrowserEvent ？**

我在用户单击单元格时调用的 customEditTextCell 中覆盖 onBrowserEvent。我也想从其他事件中调用。

```
public void onBrowserEvent(Context context, Element parent, String value,
        NativeEvent event, ValueUpdater<String> valueUpdater) { 
     // my custom code is here
   } 
```

当我单击单元格时，将调用上述方法并打开 1 个 jQuery（选择器）弹出窗口。在 jQuery 弹出窗口**完成**按钮存在。

**点击完成按钮我想调用上面的 gwt-java 方法，怎么做？**

我知道我们可以从 Javascript 调用 java-gwt 方法，但是在传递上下文、父级、值、事件、valueUpdater 等参数时遇到了一些问题

如何将Javascript 中的**上下文、父级、值、事件、valueUpdater**参数传递给 gwt-java 方法？

在我的onmodule中我调用`registerOnBrowserEventForDateTimePicker()`并编写了以下方法：哪个错误，gwtc编译失败，请纠正我。

**MyClass.java**

```
public static native void registerOnBrowserEventForDateTimePicker()  /*-{       
                $wnd.callOnBrowserEventForDateTimePicker =$entry@ui.gwtmassupdateui.client.widgets.TimestampPickerCell::
                callOnBrowserEventForDateTimePicker(com/google/gwt/cell/client/Cell/Context,com/google/gwt/dom/client/Element,Ljava/lang/String,com/google/gwt/dom/client/NativeEvent,com/google/gwt/dom/client/NativeEvent);
    }-*/; 
```

任何相同的示例代码或正确执行此操作的指针

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:27:23.753

我会用另一个保存该方法上下文的匿名对象来做。像这样的东西：

```
private Runnable contextCall;

public void onBrowserEvent(final Context context, final Element parent, final String value,
        final NativeEvent event, final ValueUpdater<String> valueUpdater) { 
    contextCall = new Runnable() {
        public void run() {
            // my custom code is here
        }
    };

    contextCall.run();
}

public void callOnBrowserEventForDateTimePicker() {
    contextCall.run();
} 
```

# c++ - c++ 使用嵌套模板类来携带类型信息

> ID：14537090
> 
> 赞同：4
> 
> 时间：2013-01-26T12:50:22.960
> 
> 标签：c++, templates

> **可能重复：**
> [我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

当我尝试在 VS 2012 中编译以下代码时，我在 Consumer 类的 typedef 行开始出现错误：

```
error C2143: syntax error : missing ';' before '<' 
```

这是编译器的问题还是代码不再有效的c++？（它提取的项目肯定用于在旧版本的 VS 和 gcc iirc 上毫无问题地构建 - 但那是大约 10 年前的事了！）

```
struct TypeProvider
{
  template<class T> struct Container
  { 
    typedef vector<T> type; 
  };
};

template<class Provider>
class Consumer 
{
  typedef typename Provider::Container<int>::type intContainer;
  typedef typename Provider::Container<double>::type doubleContainer;
}; 
```

有一个解决方法，但我只是想知道是否需要它：

```
struct TypeProvider    
{
   template<typename T> struct Container { typedef vector<T> type; };
};

template<template<class T> class Container, class Obj>
struct Type
{
  typedef typename Container<Obj>::type type;
};

template<typename Provider>
class TypeConsumer
{
  typedef typename Type<Provider::Container, int>::type intContainer;
  typedef typename Type<Provider::Container, double>::type doubleContainer;
}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T12:58:10.173

您需要帮助编译器知道这`Container`是一个模板：

```
template<class Provider>
class Consumer 
{
  typedef typename Provider:: template Container<int>::type intContainer;
  typedef typename Provider:: template Container<double>::type doubleContainer;
}; 
```

[这在此 SO post](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)的已接受答案中得到了很好的解释。

# ruby-on-rails - Rails：父对象集合的*最后*关联对象的条件

> ID：14537091
> 
> 赞同：2
> 
> 时间：2013-01-26T12:50:33.497
> 
> 标签：ruby-on-rails, rails-activerecord

我有以下设置：

```
class User 
    has_many :posts
end

class Post
    attr_accessible :post_type
end 
```

我想做的是找到所有用户，他们的*最后*一篇文章属于某种类型。

换句话说，我想做相当于：

```
User.all.select do |u|
    u.posts.last.post_type == x
end 
```

其中“x”是我要查找的 post_type。当然，这个代码片段非常慢，所以我正在寻找一个性能更高的 ActiveRecord 查询。

希望有人可以帮助我。提前致谢！

# java - 用于存储 SIM 卡序列号的 Android 服务

> ID：14537092
> 
> 赞同：0
> 
> 时间：2013-01-26T12:50:43.673
> 
> 标签：java, android, service

我有一项服务可以获取 Current Sim Serial 并检测是否插入了第二张 sim 卡。所以我想在服务运行时存储第一张 sim 卡，有谁可以告诉我我可以使用哪种方式来存储整数值（sim 序列号）。

当插入第二张 sim 卡时（设备重启后），我想比较存储的 sim 和当前的 sim，如果检测到，然后做一些事情。

所以基本上我只想将一个 sim 卡值写入存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:58:44.487

如果您真的喜欢安全 ID，建议您使用像 heroku 这样的 PaaS 并使用您自己的 Web 应用程序来存储它。任何人都可以从您的应用程序中删除数据并让它认为这是它第一次运行，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:55:51.720

对于存储整数值（sim 序列），您应该使用 Android **Preferences**。

有关更多信息，请参阅这些链接

1.  [http://developer.android.com/reference/android/preference/package-summary.html](http://developer.android.com/reference/android/preference/package-summary.html)
2.  [http://viralpatel.net/blogs/android-preferences-activity-example/](http://viralpatel.net/blogs/android-preferences-activity-example/)
3.  [http://www.javacodegeeks.com/2011/01/android-quick-preferences-tutorial.html](http://www.javacodegeeks.com/2011/01/android-quick-preferences-tutorial.html)

# android - Android - 是否可以使用 sdcard 中的图像而不是 URL 在 Facebook 墙上发帖？

> ID：14537094
> 
> 赞同：0
> 
> 时间：2013-01-26T12:50:52.920
> 
> 标签：android, facebook, url, post, sd-card

有人可以帮我吗？我想在 Facebook 上发帖并从 sdcard 中放一张图片。如果我使用 URL - 一切正常。但是我应该怎么做才能从 sdcard 上传图片呢？也许我需要先像照片一样在 Facebook 上下载它，然后再获取它的网址？但是我怎样才能获得最近上传的照片的网址呢？

```
 Bundle postParams = new Bundle();
        postParams.putString("name", title);
        postParams
                .putString("caption", caption);
        postParams.putString("description", description);
        postParams
                .putString("link",
                        "https://");
        postParams
                .putString(
                        "picture",
                        "https://");

        Request.Callback callback = new Request.Callback() {
            public void onCompleted(Response response) {
                if (response.getError() == null) {
                    JSONObject graphResponse = response.getGraphObject()
                            .getInnerJSONObject();
                    String postId = null;
                    try {
                        postId = graphResponse.getString("id");
                    } catch (JSONException e) {
                        Log.i("Facebook Error",
                                "JSON error " + e.getMessage());
                    }
                    FacebookRequestError error = response.getError();
                    if (error != null) {
                    } else {
                    }
                }
            }
        };

        Request request = new Request(session, "me/feed", postParams,
                HttpMethod.POST, callback);

        RequestAsyncTask task = new RequestAsyncTask(request);
        task.execute(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T13:13:18.340

试试这段代码：

```
byte[] data = null;

ByteArrayOutputStream baos = new ByteArrayOutputStream();
bmpImageGallery.compress(CompressFormat.JPEG, 100, baos);
data = baos.toByteArray();

Bundle postImgGallery = new Bundle();

// ADD THE PHOTO DATA TO THE BUNDLE
postImgGallery.putByteArray("photo", data); 
```

注意：`bmpImageGallery`上面代码中的 是一个位图的实例。该实例保存从图库应用程序或相机应用程序中选择的图像。看到问题只是关于上传图像，您自然必须调整一些事情。但是，如果您在选择图像方面确实需要帮助，这可能会有所帮助：[如何从图库（SD 卡）中为我的应用选择图像？](https://stackoverflow.com/q/2507898/450534)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T13:00:21.047

尝试使用此代码将图像放入要发布的参数中：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.JPEG, 100, baos);
byte[] data = baos.toByteArray();

Bundle params = new Bundle();
params.putString("message", message);
params.putByteArray("picture", data);
params.putString("method", "photos.upload");

AsyncFacebookRunner runner = new AsyncFacebookRunner(facebookHandler.facebook);
runner.request(null, params, "POST", new RequestListener() {
public void onMalformedURLException(MalformedURLException e, Object state) {}
public void onIOException(IOException e, Object state) {    }
public void onFileNotFoundException(FileNotFoundException e, Object state) {}
public void onFacebookError(FacebookError e, Object state) {    }
public void onComplete(String response, Object state) {
returnHandler().sendEmptyMessage(0);
}
}, null); 
```

在哪里 bmp 是 a `Bitmap`，从你喜欢的任何地方获取它。

# python - Django：如何在语法错误时向用户获取模板调试信息

> ID：14537097
> 
> 赞同：3
> 
> 时间：2013-01-26T12:51:32.267
> 
> 标签：python, django, templates, exception, traceback

我有一个页面，用户可以在其中将自己的模板提交到 textarea 中，现在它需要这么简单。然而，由于它是用户生成的输入，我需要验证他们没有做破坏我的应用程序其余部分的事情，同时如果他们做错了什么，就他们做错了什么提供有用的反馈。

为了提供有用的反馈，我想要一些类似的东西来看看 django 为我提供了什么（使用 django 1.4）：

![在此处输入图像描述](../Images/91e2854ece91fccad213f09af0de7a74.png)

尤其是上面那个位。我将用户模板放在 django 模板中，所以我不必自己验证语法错误和东西。看起来像这样：

```
try:
    template = get_template_from_string(user_input)
    template.render(context=Context())
except:
    do something to ouptut the error 
```

需要渲染调用，否则根本不会抛出异常。

我已经尝试打印异常及其参数，但这只能提供非常有限的信息。我也尝试使用回溯，但它从不返回行号或模板中的任何内容，只返回 python 代码中引发异常的位置。我也无法使用谷歌找到任何东西，我通过 Django 源代码进行的搜索让我想知道实际的错误页面是在哪里生成的......

* * *

所以基本上我的问题是；我如何获得图像中显示的信息？

**编辑** 澄清：我希望用户能够制作模板，以便在发送电子邮件时可以使用这些模板。由于 Django 模板引擎已经存在，我想我会使用那个而不是其他东西。

[使用此](http://djangosnippets.org/snippets/2750/)代码段和我自己对变量的一些解析使模板本身变得安全。到目前为止一切正常，除了对用户有用的调试消息。到目前为止，我所做的只是：“解析模板时出现问题，意外的块标签扩展”（例如），我希望它更像上面显示的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T17:36:09.253

我刚遇到同样的问题。在我的情况下，不需要有这样一个详细的回溯。所以我这样做了，使用模型清洁方法

```
from django.core.exceptions import ValidationError
from django.core.urlresolvers import NoReverseMatch
from django.db import models
from django.template.base import Template, TemplateSyntaxError
from django.template.context import Context

class MyTemplate(models.Model):
    template = models.TextField()

    def clean(self):
        try:
            Template(self.tempalte).render(Context({}))
        except TemplateSyntaxError as tse:
            raise ValidationError('TemplateSyntaxError: %s' % tse)
        except NoReverseMatch as nrm:
            raise ValidationError('NoReverseMatch: %s' % nrm) 
```

# lua - 不同的答案 SHA-256 代码（在线生成器 - Lua 脚本）

> ID：14537101
> 
> 赞同：3
> 
> 时间：2013-01-26T12:51:46.340
> 
> 标签：lua, sha256

是什么原因，我从在线 SHA-256 计算器 HASH 代码和我粘贴的 Lua 脚本生成的代码得到不同的结果？

在线解答：ba7816bf8f01cfea414140de5dae2223b00361a396177a9cb410ff61f20015ad

答案脚本（使用 SciTE）：a006267b0042805304ec162a0070030510452429204488c160351215ac00c19

```
--
--  Adaptation of the Secure Hashing Algorithm (SHA-244/256)
--  Found Here: http://lua-users.org/wiki/SecureHashAlgorithm
--
--  Using an adapted version of the bit library
--  Found Here: https://bitbucket.org/Boolsheet/bslf/src/1ee664885805/bit.lua
--
--  Adapted into a single function by GravityScore
--

local function sha256(msg)
        local function band(int1, int2, int3, ...)
                local ret =
                ((int1%0x00000002>=0x00000001 and int2%0x00000002>=0x00000001 and 0x00000001) or 0)+
                ((int1%0x00000004>=0x00000002 and int2%0x00000004>=0x00000002 and 0x00000002) or 0)+
                ((int1%0x00000008>=0x00000004 and int2%0x00000008>=0x00000004 and 0x00000004) or 0)+
                ((int1%0x00000010>=0x00000008 and int2%0x00000010>=0x00000008 and 0x00000008) or 0)+
                ((int1%0x00000020>=0x00000010 and int2%0x00000020>=0x00000010 and 0x00000010) or 0)+
                ((int1%0x00000040>=0x00000020 and int2%0x00000040>=0x00000020 and 0x00000020) or 0)+
                ((int1%0x00000080>=0x00000040 and int2%0x00000080>=0x00000040 and 0x00000040) or 0)+
                ((int1%0x00000100>=0x00000080 and int2%0x00000100>=0x00000080 and 0x00000080) or 0)+
                ((int1%0x00000200>=0x00000100 and int2%0x00000200>=0x00000100 and 0x00000100) or 0)+
                ((int1%0x00000400>=0x00000200 and int2%0x00000400>=0x00000200 and 0x00000200) or 0)+
                ((int1%0x00000800>=0x00000400 and int2%0x00000800>=0x00000400 and 0x00000400) or 0)+
                ((int1%0x00001000>=0x00000800 and int2%0x00001000>=0x00000800 and 0x00000800) or 0)+
                ((int1%0x00002000>=0x00001000 and int2%0x00002000>=0x00001000 and 0x00001000) or 0)+
                ((int1%0x00004000>=0x00002000 and int2%0x00004000>=0x00002000 and 0x00002000) or 0)+
                ((int1%0x00008000>=0x00004000 and int2%0x00008000>=0x00004000 and 0x00004000) or 0)+
                ((int1%0x00010000>=0x00008000 and int2%0x00010000>=0x00008000 and 0x00008000) or 0)+
                ((int1%0x00020000>=0x00010000 and int2%0x00020000>=0x00010000 and 0x00010000) or 0)+
                ((int1%0x00040000>=0x00020000 and int2%0x00040000>=0x00020000 and 0x00020000) or 0)+
                ((int1%0x00080000>=0x00040000 and int2%0x00080000>=0x00040000 and 0x00040000) or 0)+
                ((int1%0x00100000>=0x00080000 and int2%0x00100000>=0x00080000 and 0x00080000) or 0)+
                ((int1%0x00200000>=0x00100000 and int2%0x00200000>=0x00100000 and 0x00100000) or 0)+
                ((int1%0x00400000>=0x00200000 and int2%0x00400000>=0x00200000 and 0x00200000) or 0)+
                ((int1%0x00800000>=0x00400000 and int2%0x00800000>=0x00400000 and 0x00400000) or 0)+
                ((int1%0x01000000>=0x00800000 and int2%0x01000000>=0x00800000 and 0x00800000) or 0)+
                ((int1%0x02000000>=0x01000000 and int2%0x02000000>=0x01000000 and 0x01000000) or 0)+
                ((int1%0x04000000>=0x02000000 and int2%0x04000000>=0x02000000 and 0x02000000) or 0)+
                ((int1%0x08000000>=0x04000000 and int2%0x08000000>=0x04000000 and 0x04000000) or 0)+
                ((int1%0x10000000>=0x08000000 and int2%0x10000000>=0x08000000 and 0x08000000) or 0)+
                ((int1%0x20000000>=0x10000000 and int2%0x20000000>=0x10000000 and 0x10000000) or 0)+
                ((int1%0x40000000>=0x20000000 and int2%0x40000000>=0x20000000 and 0x20000000) or 0)+
                ((int1%0x80000000>=0x40000000 and int2%0x80000000>=0x40000000 and 0x40000000) or 0)+
                ((int1>=0x80000000 and int2>=0x80000000 and 0x80000000) or 0)

                return (int3 and band(ret, int3, ...)) or ret
        end

        local function bxor(int1, int2, int3, ...)
                local ret =
                ((int1%0x00000002>=0x00000001 ~= (int2%0x00000002>=0x00000001) and 0x00000001) or 0)+
                ((int1%0x00000004>=0x00000002 ~= (int2%0x00000004>=0x00000002) and 0x00000002) or 0)+
                ((int1%0x00000008>=0x00000004 ~= (int2%0x00000008>=0x00000004) and 0x00000004) or 0)+
                ((int1%0x00000010>=0x00000008 ~= (int2%0x00000010>=0x00000008) and 0x00000008) or 0)+
                ((int1%0x00000020>=0x00000010 ~= (int2%0x00000020>=0x00000010) and 0x00000010) or 0)+
                ((int1%0x00000040>=0x00000020 ~= (int2%0x00000040>=0x00000020) and 0x00000020) or 0)+
                ((int1%0x00000080>=0x00000040 ~= (int2%0x00000080>=0x00000040) and 0x00000040) or 0)+
                ((int1%0x00000100>=0x00000080 ~= (int2%0x00000100>=0x00000080) and 0x00000080) or 0)+
                ((int1%0x00000200>=0x00000100 ~= (int2%0x00000200>=0x00000100) and 0x00000100) or 0)+
                ((int1%0x00000400>=0x00000200 ~= (int2%0x00000400>=0x00000200) and 0x00000200) or 0)+
                ((int1%0x00000800>=0x00000400 ~= (int2%0x00000800>=0x00000400) and 0x00000400) or 0)+
                ((int1%0x00001000>=0x00000800 ~= (int2%0x00001000>=0x00000800) and 0x00000800) or 0)+
                ((int1%0x00002000>=0x00001000 ~= (int2%0x00002000>=0x00001000) and 0x00001000) or 0)+
                ((int1%0x00004000>=0x00002000 ~= (int2%0x00004000>=0x00002000) and 0x00002000) or 0)+
                ((int1%0x00008000>=0x00004000 ~= (int2%0x00008000>=0x00004000) and 0x00004000) or 0)+
                ((int1%0x00010000>=0x00008000 ~= (int2%0x00010000>=0x00008000) and 0x00008000) or 0)+
                ((int1%0x00020000>=0x00010000 ~= (int2%0x00020000>=0x00010000) and 0x00010000) or 0)+
                ((int1%0x00040000>=0x00020000 ~= (int2%0x00040000>=0x00020000) and 0x00020000) or 0)+
                ((int1%0x00080000>=0x00040000 ~= (int2%0x00080000>=0x00040000) and 0x00040000) or 0)+
                ((int1%0x00100000>=0x00080000 ~= (int2%0x00100000>=0x00080000) and 0x00080000) or 0)+
                ((int1%0x00200000>=0x00100000 ~= (int2%0x00200000>=0x00100000) and 0x00100000) or 0)+
                ((int1%0x00400000>=0x00200000 ~= (int2%0x00400000>=0x00200000) and 0x00200000) or 0)+
                ((int1%0x00800000>=0x00400000 ~= (int2%0x00800000>=0x00400000) and 0x00400000) or 0)+
                ((int1%0x01000000>=0x00800000 ~= (int2%0x01000000>=0x00800000) and 0x00800000) or 0)+
                ((int1%0x02000000>=0x01000000 ~= (int2%0x02000000>=0x01000000) and 0x01000000) or 0)+
                ((int1%0x04000000>=0x02000000 ~= (int2%0x04000000>=0x02000000) and 0x02000000) or 0)+
                ((int1%0x08000000>=0x04000000 ~= (int2%0x08000000>=0x04000000) and 0x04000000) or 0)+
                ((int1%0x10000000>=0x08000000 ~= (int2%0x10000000>=0x08000000) and 0x08000000) or 0)+
                ((int1%0x20000000>=0x10000000 ~= (int2%0x20000000>=0x10000000) and 0x10000000) or 0)+
                ((int1%0x40000000>=0x20000000 ~= (int2%0x40000000>=0x20000000) and 0x20000000) or 0)+
                ((int1%0x80000000>=0x40000000 ~= (int2%0x80000000>=0x40000000) and 0x40000000) or 0)+
                ((int1>=0x80000000 ~= (int2>=0x80000000) and 0x80000000) or 0)

                return (int3 and bxor(ret, int3, ...)) or ret
        end

        local function bnot(int)
                return 4294967295 - int
        end

        local function rshift(int, by)
                local shifted = int / (2 ^ by)
                return shifted - shifted % 1
        end

        local function rrotate(int, by)
                local shifted = int / (2 ^ by)
                local fraction = shifted % 1
                return (shifted - fraction) + fraction * (2 ^ 32)
        end

        local k = {
                0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5,
                0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,
                0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3,
                0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,
                0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc,
                0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,
                0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7,
                0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,
                0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13,
                0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,
                0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3,
                0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,
                0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5,
                0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,
                0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208,
                0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2,
        }

        local function str2hexa(s)
                local h = string.gsub(s, ".", function(c)
                        return string.format("%02x", string.byte(c))
                end)
                return h
        end

        local function num2s(l, n)
                local s = ""
                for i = 1, n do
                        local rem = l % 256
                        s = string.char(rem) .. s
                        l = (l - rem) / 256
                end
                return s
        end

        local function s232num(s, i)
                local n = 0
                for i = i, i + 3 do n = n*256 + string.byte(s, i) end
                return n
        end

        local function preproc(msg, len)
                local extra = 64 - ((len + 1 + 8) % 64)
                len = num2s(8 * len, 8)
                msg = msg .. "\128" .. string.rep("\0", extra) .. len
                return msg
        end

        local function initH256(H)
                H[1] = 0x6a09e667
                H[2] = 0xbb67ae85
                H[3] = 0x3c6ef372
                H[4] = 0xa54ff53a
                H[5] = 0x510e527f
                H[6] = 0x9b05688c
                H[7] = 0x1f83d9ab
                H[8] = 0x5be0cd19
                return H
        end

        local function digestblock(msg, i, H)
                local w = {}
                for j = 1, 16 do w[j] = s232num(msg, i + (j - 1) * 4) end
                for j = 17, 64 do
                        local v = w[j - 15]
                        local s0 = bxor(rrotate(v, 7), rrotate(v, 18), rshift(v, 3))
                        v = w[j - 2]
                        local s1 = bxor(rrotate(v, 17), rrotate(v, 19), rshift(v, 10))
                        w[j] = w[j - 16] + s0 + w[j - 7] + s1
                end

                local a, b, c, d, e, f, g, h = H[1], H[2], H[3], H[4], H[5], H[6], H[7], H[8]
                for i = 1, 64 do
                        local s0 = bxor(rrotate(a, 2), rrotate(a, 13), rrotate(a, 22))
                        local maj = bxor(band(a, b), band(a, c), band(b, c))
                        local t2 = s0 + maj
                        local s1 = bxor(rrotate(e, 6), rrotate(e, 11), rrotate(e, 25))
                        local ch = bxor (band(e, f), band(bnot(e), g))
                        local t1 = h + s1 + ch + k[i] + w[i]
                        h, g, f, e, d, c, b, a = g, f, e, d + t1, c, b, a, t1 + t2
                end

                H[1] = band(H[1], a)
                H[2] = band(H[2], b)
                H[3] = band(H[3], c)
                H[4] = band(H[4], d)
                H[5] = band(H[5], e)
                H[6] = band(H[6], f)
                H[7] = band(H[7], g)
                H[8] = band(H[8], h)
        end

        msg = preproc(msg, #msg)
        local H = initH256({})
        for i = 1, #msg, 64 do digestblock(msg, i, H) end
        return str2hexa(num2s(H[1], 4) .. num2s(H[2], 4) .. num2s(H[3], 4) .. num2s(H[4], 4) ..
                num2s(H[5], 4) .. num2s(H[6], 4) .. num2s(H[7], 4) .. num2s(H[8], 4))
end

test = sha256("abc");
print(test); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T15:48:41.703

您的代码中有两个主要错误。

[http://lua-users.org/wiki/SecureHashAlgorithm](http://lua-users.org/wiki/SecureHashAlgorithm)上的参考 Lua 5.2 算法（从中改编了此代码）给出了正确的答案。

首先，函数`band`和`rrotate`不能`rshift`正常工作，因为它们需要**无符号整数**，并且有时会收到负值。要解决这个问题，`int = int % 2^32`请在所有这些函数的开头添加一行，以确保数字介于**0**和**4294967295**之间。

还有第二个问题。与参考实现相比，形式的结尾行`H[1] = band(H[1] + a)`已转换为`H[1] = band(H[1], a)`. 这**不是**一回事！用类似的东西替换它们，`H[1] = (H[1] + a) % 2^32`现在该函数给出了正确的答案。

# javascript - Magento Go，引用附加到CMS静态块中主题的JS文件？

> ID：14537103
> 
> 赞同：0
> 
> 时间：2013-01-26T12:51:56.747
> 
> 标签：javascript, magento

如果我想在一个CMS块中引用一个JS文件，并且这个js文件已经附加到了主题中，它是怎么做的呢？CMS 块具有以下脚本：

```
<script>
Galleria.loadTheme('galleria/themes/classic/galleria.classic.min.js');
Galleria.run('#galleria');</script> 
```

将 JS 加载到 Magento Go 的 JS 编辑器和库部分后，我没有查看 JS 存储位置的功能。

我会省略该部分，但它需要在那里，所以应该如下所示：

```
<script>
Galleria.loadTheme('JS file attached to the theme');
Galleria.run('#galleria');</script> 
```

有人可以告诉我JS文件的位置以及如何添加它吗？

# php - MySQL PHP，如何在选择数据时在 mysql 中使用 regEX

> ID：14537107
> 
> 赞同：0
> 
> 时间：2013-01-26T12:52:42.280
> 
> 标签：php, mysql, regex, serialization

请高手，我有以下输入：

```
<label >Please choose :</label>
<input type="checkbox" name="outil[]" value="TV" />
<input type="checkbox" name="outil[]" value="Lecteur CD" /> 
```

我有一个表“ `MyValues`”，如下所示：

```
+----+-----------------------------------------------------------------------+
| id |                       value                                           |
+----+--------+------------------------------------------------------------- +
|  1 | a:3:{i:0;s:10:"Lecteur CD";i:1;s:16:"Console de salon";i:2;s:2:"TV";} |
+----+--------+--------------------------------------------------------------+ 
```

字段**值**包含一个从闲置数组序列化的字符串：

```
array(3) {
  [0]=>
  string(10) "Lecteur CD"
  [1]=>
  string(16) "Console de salon"
  [2]=>
  string(2) "TV"
} 
```

现在，当用户检查他希望将数据发送到服务器端的输入时，我需要选择**`id`**已检查的输入在`value`字段中存在的位置（即来自数组的序列化值 - 如果我可以使用函数 in_array)。

我的查询看起来像：

```
"SELECT id FROM MyValues WHERE value =  '".serialize($_POST['outil'])."' "; 
```

但这不起作用，这很正常，因为用户只能检查一个输入，他必须找到数据。

如果可以检查是否至少有发送的数据，我正在考虑在 mysql 中使用正则表达式，但我的知识有限。请问高手能帮忙解决这个问题吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T13:08:15.193

使用您的字段作为行创建另一个表，连接到您的第一个表而不是序列化数据。像这样：

```
CREATE TABLE `table1` (`id` INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY);

CREATE TABLE IF NOT EXISTS `table2` (
    `table1_id` int(10) unsigned NOT NULL,
    `data` varchar(255) NOT NULL,
    UNIQUE KEY `x` (`table1_id`,`data`)
); 
```

然后你可以像这样插入你的数据：

```
INSERT INTO table1 VALUES(NULL); --This will get you the latest incremented ID

INSERT INTO table2 VALUES(1,'Lecteur CD'),(1,'Console de salon'),(1,'TV'); 
```

您现在可以仅在一个字段上选择 ID：

```
SELECT id FROM table2 WHERE data = 'Console de salon'; 
```

table1 是可选的，但使用数据库内部增量系统通常比为 table2 编写自己的系统更容易，因为 table2 需要一个计数器来增加 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T13:31:56.993

这应该有帮助

```
$var1 = !empty($_POST['outil'][1]) ? $_POST['outil'][1] : '';
$var2 = !empty($_POST['outil'][2]) ? $_POST['outil'][2] : '';

$sql = 'SELECT id FROM MyValues WHERE value REGEXP "' . $var1 . '" OR value REGEXP "' . $var2 . '" '; 
```

# jsf - JSFpanelGrid 动态填充

> ID：14537108
> 
> 赞同：0
> 
> 时间：2013-01-26T12:52:41.910
> 
> 标签：jsf, layout, grid

我想渲染一个具有固定列数的 panelGrid，但元素是从列表中加载的。代码应如下所示：

```
<h:panelGrid columns="3">
    <h:outputText value="Header 1"/>
    <h:outputText value="Header 2"/>
    <h:outputText value="Header 3"/>

    <ui:repeat value="#{bean.collection}" var="obj">
        <p:panel>
            <h:outputText value="#{obj.value}"/>
        </p:panel>
    </ui:repeat>
</p:panelGrid> 
```

问题是这段代码没有像我预期的那样呈现，因为所有面板都包含在 panelGrid 生成的第一个 TD 中，我希望每 3 个元素换行一次。似乎所有重复块都是在渲染之前执行的。我确信我可以获得这种行为。我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:05:03.747

`ui:repeat`是一个组件，它是组件树的一部分。要创建您计划的内容，请尝试使用标签处理程序`c:forEach`。

```
<c:forEach items="#{bean.collection}" var="obj">
  <p:panel>
    <h:outputText value="#{obj.value}"/>
  </p:panel>
</c:forEach> 
```

# java - 使用 php/mysql 登录 Android 无法正常工作

> ID：14537112
> 
> 赞同：0
> 
> 时间：2013-01-26T12:53:05.817
> 
> 标签：java, php, android, mysql, login

我是 android 开发的新手，我在这里有一些我为在我的移动应用程序中具有登录功能而构建的代码。我正在尝试将输入文本中输入数据的值比较到 mysql 数据库中，但似乎我没有明白这一点，我真的不知道我的代码是否在引导我进入某事，或者这只是胡说八道，可以你们在这里帮我吗？顺便说一句，我没有收到任何错误，只是单击按钮后没有结果。

这是我的代码：

**

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Edit Text
        inputEmail = (EditText) findViewById(R.id.inputEmail);
        inputPassword = (EditText) findViewById(R.id.inputPassword);

        // Create button
        Button btnSubmit = (Button) findViewById(R.id.btnLogin);

        // button click event
        btnSubmit.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View view) {
                // creating new product in background thread
                new CheckLogin().execute();
            }
        });     
    }

    class CheckLogin extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(Main.this);
            pDialog.setMessage("Logging in..");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * Creating product
         * */
        protected String doInBackground(String... args) {
            String eadd = inputEmail.getText().toString();
            String password = inputPassword.getText().toString();

            httpclient = new DefaultHttpClient();
            httppost = new HttpPost("http://10.0.2.2/TheCalling/log_in.php");

            try {
                nameValuePairs = new ArrayList<NameValuePair>();

                nameValuePairs.add(new BasicNameValuePair("eadd", eadd));
                nameValuePairs.add(new BasicNameValuePair("password", password));

                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                response = httpclient.execute(httppost);

                if(response.getStatusLine().getStatusCode()==200){
                    entity = response.getEntity();

                    if(entity != null){

                        InputStream instream = entity.getContent();
                        JSONObject jsonResponse = new JSONObject(convertStreamToString(instream));

                        String inputEmail = jsonResponse.getString("eadd");
                        String inputPassword = jsonResponse.getString("password");

                        if(eadd.equals(inputEmail) && password.equals(inputPassword)){

                            SharedPreferences sp = getSharedPreferences("logindetails", 0);
                            SharedPreferences.Editor spedit = sp.edit();

                            spedit.putString("eadd", eadd);
                            spedit.putString("password", password);

                            spedit.commit();
                            Toast.makeText(getBaseContext(), "SUCCESS!", Toast.LENGTH_SHORT).show();

                        }else{
                            Toast.makeText(getBaseContext(), "Invalid login details", Toast.LENGTH_SHORT).show();                   
                        }

                    }

                }
            } catch (Exception e) {
                e.printStackTrace();
            }

            return null;
        } 
```

**

这是我的 php 文件：

**

```
<?php

$db_host = "localhost";
$db_user = "root";
$db_password = "";
$db_name = "sample_login";
$response = array();

    $db_connect = mysql_connect($db_host, $db_user, $db_password) or die(mysql_error());
    $db = mysql_select_db($db_name);
    $eadd = $_POST['eadd'];
    $password = $_POST['password'];

    // mysql inserting a new row
    $result = mysql_query("SELECT * FROM users WHERE eadd = '$eadd' and password = '$password'");

    // check if row inserted or not
    if ($result) {
        // successfully inserted into database
        $response["success"] = 1;
        $response["message"] = "Login succes";

        // echoing JSON response
        echo json_encode($response);
    } else {
        // failed to insert row
        $response["success"] = 0;
        $response["message"] = "Oops! An error occurred.";

        // echoing JSON response
        echo json_encode($response);   
}
?> 
```

**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T04:34:14.243

1）你可以发布方法'convertStreamToString'吗？

2) 你检查过

```
 echo json_encode($response); 
```

返回正确的值并且不返回null？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T13:50:12.277

我不是 Android 开发人员，但我要说的是。

1.  php文件一切正常。唯一的问题是，您没有返回您似乎在 android 文件中访问的电子邮件和密码。这里：

    InputStream instream = entity.getContent(); JSONObject jsonResponse = new JSONObject(convertStreamToString(instream)); 字符串 inputEmail = jsonResponse.getString("eadd"); 字符串输入密码 = jsonResponse.getString("密码");

2.  如果查询正确，则 mysql_query() 成功返回资源，错误则返回 FALSE。您需要检查 mysql_num_rows($result) > 0 以获得有效匹配。参考[http://php.net/manual/en/function.mysql-num-rows.php](http://php.net/manual/en/function.mysql-num-rows.php)

记住

```
if ($result) {
} 
```

除非您的查询错误，否则将始终为真。

# sql - 与用户组具有 OneToOne 关系的 Django 过滤项目

> ID：14537113
> 
> 赞同：5
> 
> 时间：2013-01-26T12:53:18.087
> 
> 标签：sql, django

在 Django 中，如果我有一个模型，例如与包含用户的（Django Auth）组相关的 OneToOne 的建筑物，我如何找到用户所属的所有建筑物（也许这些是用户工作的所有建筑物）？Building 与 Group 是一对一的，因此 building 有一个名为“group”的组外键字段。

我试过了

```
Building.objects.filter(group__contains=user)
Building.objects.filter(group_user_set__contains=user) 
```

当应该有比赛时，我没有得到比赛。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T13:08:03.107

使用`contains`不是正确的选择，因为它在字段（字符串）内而不是在集合内搜索表达式。尝试使用：

```
Buildings.objects.filter(group__user=user) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:58:39.307

如果是一对一的关系，为什么不直接返回组呢？

```
result = []
u = User.objects.get(your user here)
for group in u.groups.all():
    result.append(group.whateverYourForeignKeyFieldIsCalled)
return result 
```

# arduino - 与 LCD 显示器兼容的 Arduino 以太网板？

> ID：14537114
> 
> 赞同：2
> 
> 时间：2013-01-26T12:53:30.750
> 
> 标签：arduino, compatibility, lcd

我正在用一个**arduino 以太网**板做一个小项目。我是 arduino 的新手，想知道以下**液晶显示器**是否与我的 arduino 兼容。如果兼容，是否需要更多硬件，例如电缆等...

我在 fritzing.org 上购买的 Arduino 以太网板：

[http://shop.fritzing.org/products/fritzing-starter-kit-with-arduino-ethernet](http://shop.fritzing.org/products/fritzing-starter-kit-with-arduino-ethernet)

我在 dx.com 上找到的 LCD 显示器：

[http://dx.com/p/lcd-keypad-shield-for-arduino-duemilanove-lcd-1602-118059](http://dx.com/p/lcd-keypad-shield-for-arduino-duemilanove-lcd-1602-118059)

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T08:29:27.387

在以太网板上，保留了引脚 10-13。lcd-shield 使用针脚 4-10（虽然 #10 是背光控制，所以可能没有它，只是有一个恒定的背光） - 我有 lcd - 键盘屏蔽，但在家里，所以我现在无法检查。- 查看 lcd 库，看看你是否可以以某种方式定义它。

也就是说，不能同时使用背光和以太网。对于您的其他问题，您只需将 LCD 键盘屏蔽层堆叠在您的 arduino 板顶部，不需要其他连接或电缆。

虽然看起来有点吓人，但没有屏蔽的显示器，例如[http://dx.com/p/16-x-2-character-lcd-display-module-with-blue-backlight-121356](http://dx.com/p/16-x-2-character-lcd-display-module-with-blue-backlight-121356)并不多更难设置，它给你更多的灵活性。（虽然，对于我链接到的显示器，您必须能够焊接一组引脚来连接它）另一种选择是[http://dx.com/p/16-x-2-character-lcd-display- module-with-blue-backlight-121356](http://dx.com/p/16-x-2-character-lcd-display-module-with-blue-backlight-121356) - 后者为您提供更大的灵活性，但可读性较差，并且设置库需要更多的工作。

# c# - 如何绑定 OrderedDictionary？

> ID：14537126
> 
> 赞同：0
> 
> 时间：2013-01-26T12:55:41.437
> 
> 标签：c#, .net, asp.net-mvc, model-binding

我尝试将 an 绑定`OrderedDictionary`到视图，但是当调用 post 方法时，Dictionary 始终为空。

这是我的代码：

```
 [HttpGet]
    public ViewResult Edit(string username, string password)
    {
        Xml test = new Xml(@"c:\Users\pc\Desktop\xml - Copy.xml");
        XmlNode userNode = test.GetUserNodeByUsernameAndPassword(username, password);
        User user = new User();
        user.BindData(userNode);
        return View(user.user);
    }

    [HttpPost]
    public ViewResult Edit(OrderedDictionary attributes)
    {
        return View(attributes);
    } 
```

这是视图：

```
@using (Html.BeginForm("Edit", "Users")) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>User</legend>

    <p>
        <input type="submit" value="Save" />
    </p>

    @{int counter = 0;}
    @{string name = "";}
    @foreach (DictionaryEntry attribute in Model)
    {
        { name = "[" + counter + "].key"; }
        <input type="hidden" name=@name value=@attribute.Key />
        @attribute.Key @Html.TextBoxFor(m => attribute.Value)
        counter++;
        <br />
    }
</fieldset>
} 
```

结果 Html 看起来像这样：

```
<input type="hidden" value="Username" name="[0].key">
  Username
  <input id="attribute_Value" type="text" value="Anamana" name="attribute.Value"> 
```

因此，`OrderedDictionary`视图中的内容看起来很好，但是当我发回帖子时，绑定不起作用并且目录保持为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:43:46.780

## 概念

要绑定字典，您必须更改 html 输入标签中的 name 属性。像这样的东西：

在您的控制器中：

```
[HttpPost]
public ActionResult Edit(IDictionary<string, string> attributes) 
{  
} 
```

在您的 HTML 中：

```
<input type="text" name="attributes[0].Key" value="A Key" />
<input type="text" name="attributes[0].Value" value="A Value" />

<input type="text" name="attributes[1].Key" value="B Key" />
<input type="text" name="attributes[1].Value" value="B Value" /> 
```

该`attributes`名称应该在`[0]`名称属性的索引之前，因为您的操作期望它。

## 尖端

我会使用 Asp.Net MVC 的`HiddenFor`HTML `TextBoxFor`Helper。

```
@Html.HiddenFor(model => model[i].Key)
@Html.TextBoxFor(model => model[i].Value) 
```

它将以 asp.net mvc 可以理解并使其工作的格式呈现。

有关数据绑定的更多示例，请查看[此链接](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:49:18.927

与此同时，我找到了解决方案。

我可以将一个传递`OrderedDictionary`给视图页面。它通过以下`Razor`代码处理它：

```
 @model System.Collections.Specialized.OrderedDictionary
    (...)
    @{int counter = 0;}
    @{string name = "";}
    @foreach (DictionaryEntry attribute in Model)
    {
        { name = "[" + counter + "].key"; }
        @Html.Hidden(name, attribute.Key)
        {name = "[" + counter + "].value";}
        @attribute.Key @Html.TextBox(name, attribute.Value)
        counter++;
        <br />
    } 
```

结果`HTML`的结构适合书中的样本，字典中的值在页面上显示得很好。

调用 POST 后，POST 处理程序函数在`Dictionary`.

```
 [HttpPost]
    public ViewResult Edit(Dictionary<string, string> attributes)
    {} 
```

我不知道为什么，但我不能`OrderedDictionary`在这里使用。

# java - 使函数递归中的逻辑

> ID：14537132
> 
> 赞同：4
> 
> 时间：2013-01-26T12:56:46.837
> 
> 标签：java, recursion, computer-science, traversal

**背景：**想象一下我有一个小机器人。我将此机器人放置在地图（图表）中的某个节点处。机器人可以调用 giveMeMapCopy() 方法来获取他所在的整个地图的副本。我想给我的小机器人一个函数，通过它他可以使用广度优先遍历来找到到 Exit 节点的最短路径. 以下是此类地图的示例：

![在此处输入图像描述](../Images/eb1d66b37ced40f3e2db2e11a7ca2e96.png)

我在 YouTube 上观看了有关如何对图进行广度优先遍历的视频，因此我很清楚需要做什么。问题是，我发现很难让我的逻辑递归。这是我的代码：

```
public class Robot
{
    // fields required for traversal
    private Queue<ArrayList<String>> queue;
    private ArrayList<ArrayList<String>> result;
    private String workingNode;
    private ArrayList<String> routeSoFar;

    private Queue<String> knownShortestPath;

    public Robot() {
        queue = new LinkedList<ArrayList<String>>();
        result = new ArrayList<ArrayList<String>>();
        routeSoFar = new ArrayList<String>();
        knownShortestPath = new LinkedList<String>();
    }

    // Runs when Robot has reached a node.
    public void enterNodeActions() {
        knownShortestPath = determineIdealPath();
    }

    // Runs to determine where to go next
    public String chooseNextNode() {
        if(!knownShortestPath.isEmpty())
        {
            // TODO: Need to go through the 
        }
    }

    public LinkedList<String> determineIdealPath()
    {
        try {
            // Get the map
            Map m = giveMeMapCopy();

            // Get all entry nodes of map
            Set<String> entryNodes = m.getEntryNodes();

            /*
             * Loop through all Entry nodes, and find out where we are.
             * Set that as current working node.
             */
            for (String n : entryNodes) {
                if(n == getMyLocation())
                {
                    workingNode = n;
                }
            }

            // All enighbours of working node.
            Set<String> neighboursNames = getNeighboursNames(workingNode);

            /*
             * For each neighbour, construct a path from working node to the neighbour node
             * And add path to Queue and Result (if not already present).
             */
            for(String node : neighboursNames)
            {
                if(!node.equals(getMyLocation()))
                {
                    ArrayList<String> route = new ArrayList<String>();
                    route.add(getMyLocation());
                    route.add(node);
                    if(!containsRoute(result, route))
                    {
                        if(!containsRoute(queue, route))
                        {
                            queue.add(route);                           
                        }
                        result.add(route);
                    }
                }
            }       
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

我希望递归发生的地方是在我遍历了入口节点 [A] 的所有邻居之后，我想移动到下一个 [B] 并为此做同样的事情，即遍历它的每个邻居（忽略 A ，因为它已经存在于结果列表中）并将它们添加到队列和结果列表中。

我希望问题很清楚，如果没有，请告诉我，我会尽力澄清任何不清楚的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T14:17:26.813

广度优先搜索通常**无需**递归即可完成，因为它基于队列（在您的情况下为部分路径）。另一方面，深度优先搜索基于堆栈，可以使用递归函数的调用堆栈非常自然地实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T14:39:33.960

本质上，您想要的是实现[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)或类似的算法，以在图中找到源和目标之间的最短路径。

[您可以在此处](http://www.vogella.com/articles/JavaAlgorithmsDijkstra/article.html)找到 Java 中的此类实现。只需将所有权重设置为`1`。

# c# - 发布远程服务器 [Win32Exception (0x80004005)]

> ID：14537140
> 
> 赞同：0
> 
> 时间：2013-01-26T12:57:37.857
> 
> 标签：c#, database, entity-framework, connection-string

我想知道我的连接字符串是否错误，因为当我在服务器上发布它时它不起作用，否则当我在调试模式下测试它时它起作用。

```
<add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-app-20130122205025;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-app-20130122205025.mdf"
      providerName="System.Data.SqlClient" />
    <add name="SiteSourceContext" connectionString="Data Source=(localdb)\v11.0; Initial Catalog=SiteSourceContext-20130125171153; Integrated Security=True; MultipleActiveResultSets=True; AttachDbFilename=|DataDirectory|SiteSourceContext-20130125171153.mdf"
      providerName="System.Data.SqlClient" /> 
```

有人可以帮忙吗？我相对较新并且正在努力学习，所以我不知道我在做什么，但这是我得到的错误：

```
[Win32Exception (0x80004005): The specified file is not found]

[SqlException (0x80131904): A network-related error or instance-specific occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (Provider: SQL Network Interfaces, error: 52 - Could not locate installation of a runtime database locally. Verify that SQL Server Express is installed and the runtime functionality of local database is enabled.) ]
   System.Data.SqlClient.SqlInternalConnection.OnError (SqlException exception, Boolean breakConnection, Action `1 wrapCloseInAction) 6675286
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning (TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) 688 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T17:20:21.827

请记住，使用`Data Source=(LocalDB)\v11.0`将凭据限制为创建/拥有数据库的用户。如果您将其发布为 ASP.NET 服务，您的代码将在不同的用户下运行；可能的网络服务。

此外，看起来连接字符串指定的文件可能只存在于您的开发环境中，而不是您要发布到的服务器上。**您需要在该服务器上安装 SQLExpress**并设置连接字符串以访问它。我不会使用`Data Source=(LocalDB)\v11.0;`; 相反，我会使用`Data Source=localhost\SQLEXPRESS;`或`Data Source=.\SQLEXPRESS`保持您的开发环境和部署之间的一致性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:59:52.373

验证是否安装了 SQL Server Express 并启用了本地数据库的运行时功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T13:04:31.453

Try Changing This :

```
Data Source=(LocalDb)\v11.0 
```

To This :

```
Data Source=.\v11.0 
```

Or This :

```
Data Source=.\SQLExpress 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-10T21:03:33.550

很可能，您的开发计算机和服务器中安装的 SQL Server 实例名称不同。因此，您需要更改连接字符串。如果你已经安装了 SQL Server，如果没有，你需要安装它。

另一种可能性是，SQL Server 的实例可能没有运行。您可以从控制面板转到 Windows 服务并检查您存储数据库的 SQL Server 服务是否已启动。如果您有多个 SQL Server 实例，则可能有多个服务。确保您为正确的实例使用连接字符串。

此外，在您的数据库中，如果您决定使用 Windows 身份验证，您应该为相关的 IIS 用户（例如 IIS APPPOOL\DefaultAppPool）提供访问优先级。或者，您可以使用 SQL Server 身份验证。

简而言之，我相信您在引用 SQL Server Instance 时遇到了问题。当您解决它时，如果您不尝试使用有效凭据访问数据库，您将遇到身份验证问题。

# java - 在 Vaadin 中加载 tif 图像

> ID：14537141
> 
> 赞同：2
> 
> 时间：2013-01-26T12:57:40.977
> 
> 标签：java, image, vaadin, frontend

我无法加载 tif 图像`Vaadin 7 rc1`

以下是我尝试过的一些替代品：

```
String basepath = VaadinService.getCurrent().getBaseDirectory().getAbsolutePath();
Image image = new Image("Image", new FileResource(new File(basePath + "myPath/image.tif")));

Embedded image = new Embedded("Image", new ThemeResource("/pathToResource/imgae.jtif")); 
```

在这两种情况下，图像都是路径指向的位置。此外，如果我在同一目录中有一个`jpg`或图像，则显示它没有问题。`png`

Vaadin 7 rc1 不支持`tif`图像吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T14:05:23.667

这里真正的问题是您的浏览器是否支持 TIFF 图像。看看[这篇维基百科文章](https://en.wikipedia.org/wiki/Comparison_of_web_browsers#Image_format_support)。

为了跨浏览器的兼容性，我建议您将图像转换为**PNG**或**JPG**。

# vb.net - 在 PostgreSQL 表中保存数据结构

> ID：14537149
> 
> 赞同：0
> 
> 时间：2013-01-26T12:58:29.443
> 
> 标签：vb.net, postgresql

我想知道是否有某种方法可以“一次”将数据结构读取/更新到 PostgreSQL 表中，就像文件一样。

```
Public Structure myStuct
    Dim p_id As Integer
    Dim p_myInt As Integer
    Dim p_myString As String
    Dim p_myDecNumber As Double
End Structure
Dim st as myStruct

FileGet (ff, recordnum, st)

OR

st.p_id = 1234
st.myInt = 14
st.myString = "tarzan"
st.myDecNumber = 3.14

FilePut (ff, recordnum, st) 
```

问题是，如果我们的表具有与结构“st”的成员相同类型的已形成数据的表，则无法在表中的某个索引处插入/更新整个结构，而不是像逐个写入每个成员一样我现在做的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:14:23.030

您是否尝试过 postgresql 复合类型？例如

```
CREATE TYPE myStruct AS (
 p_Id        integer,
 myInt       integer,
 myString    text,
 myDecNumber double precision
);
CREATE TABLE myStructs (
 value myStruct
);
INSERT INTO myStructs VALUES ( ROW(1234, 14, 'tarzan', 3.14) ); 
```

[http://www.postgresql.org/docs/9.2/static/rowtypes.html#AEN7268](http://www.postgresql.org/docs/9.2/static/rowtypes.html#AEN7268)

# php - 用 + 号替换空格

> ID：14537150
> 
> 赞同：0
> 
> 时间：2013-01-26T12:58:29.880
> 
> 标签：php, html

我有一个问题，通过链接发送信息（字符串）后，我想用 + 号替换字符串中的空格，这就是我所做的

html:

```
<a href="script.php?name=Eri+Son">send</a> 
```

脚本：

```
 $name = $_GET['name'];
    str_replace(" ", "+", $name);
    echo $name;

result: Eri Son 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T13:00:51.190

您没有将返回的值分配给`str_replace`变量`$name`。尝试：

`$name = str_replace(" ", "+", $name);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T14:03:41.110

如果要将文字`+`作为查询字符串参数发送，则必须对其进行 urlencode：

```
<a href="script.php?name=<?php echo urlencode('Eri+Son'); ?>">send</a> 
```

结果：

```
<a href="script.php?name=Eri%2BSon">send</a> 
```

在服务器端，`$_GET[name]`将包含`Eri+Son`. 其他答案以及您对查询字符串参数执行 str_replace 的想法是错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T13:01:31.827

尝试这个

```
echo preg_replace(' ', '+', $name); 
```

# extjs - 关闭选项卡时冻结应用程序 - ExtJS 4

> ID：14537159
> 
> 赞同：0
> 
> 时间：2013-01-26T12:59:28.957
> 
> 标签：extjs, extjs4

当我关闭打开的选项卡时，我的整个应用程序都会冻结。我有很多代码，但我真的不知道为什么会这样？...

有任何想法吗？

我会发布一些代码，但没有什么具体可以帮助... -.-

它发生在更多的计算机上，并在所有市长浏览器上进行了测试。

这是一个简单的布局形式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:27:44.530

你要关闭什么标签？？？它是一个选项卡面板组件。保持调试器指向在关闭事件上调用的侦听器并调试一点点。你说的冻结是什么意思？？？你需要分享一些东西。很难猜测这些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T09:24:53.033

验证您是否在 2 组件中使用了重复的 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T07:27:00.700

你使用的是什么浏览器？它发生在其他浏览器中吗？是否附加了调试器？

以我的经验，当页面中构建了大量布局时，IE 会“冻结”。它比 ExtJS 2 更明智。

# mysql - 关系数据库查询不起作用mysql

> ID：14537160
> 
> 赞同：2
> 
> 时间：2013-01-26T12:59:31.593
> 
> 标签：mysql

我正在尝试在 MySql 中创建一个关系数据库，但我遇到了一个错误，我真的无法弄清楚我的查询出了什么问题。

下面是错误是 get ：

```
Error Code : 1072
Key column 'user_id' doesn't exist in table
(0 ms taken) 
```

这是我的查询：

```
CREATE TABLE tish_user(
user_id int(11) NOT NULL Auto_increment,
username varchar(30) NOT NULL,
Password varchar(41) NOT NULL,
Previllage VARCHAR(20) NOT NULL,
date_created datetime,
primary key (user_id )
)ENGINE=InnoDB;

CREATE TABLE tish_images(
image_id int(11) not null auto_increment,
image_name varchar(100) not null,
image_profile numeric(1) default 0,
FOREIGN KEY(user_id)REFERENCES tish_user(user_id)on update cascade,
primary key (image_id)
)ENGINE=InnoDB;

CREATE TABLE tish_clientinfor(
client_id int(11) not null auto_increment,
title  varchar(11) not null,
firstname varchar(30) not null,
lastname  varchar(30) not null,
client_code  varchar(30) not null,
date_registered  timestamp Default CURRENT_TIMESTAMP,
FOREIGN KEY(user_id)REFERENCES tish_user(user_id)on update cascade,
primary key (client_id)
)ENGINE=InnoDB; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T13:01:51.670

您在 中没有引用的`user_id`列。你是不是想加一个？`tish_clientinfor``FOREIGN KEY(user_id)...`

```
CREATE TABLE tish_clientinfor(
client_id int(11) not null auto_increment,
title  varchar(11) not null,
firstname varchar(30) not null,
lastname  varchar(30) not null,
client_code  varchar(30) not null,
date_registered  timestamp Default CURRENT_TIMESTAMP,
user_id int(11) not null, --this was the missing column
FOREIGN KEY(user_id)REFERENCES tish_user(user_id)on update cascade,
primary key (client_id)
)ENGINE=InnoDB; 
```

表也​​是如此`tish_images`。

# mysql - 对两个表执行批量插入

> ID：14537163
> 
> 赞同：0
> 
> 时间：2013-01-26T12:59:48.350
> 
> 标签：mysql, bulkinsert

所以我有一些统计研究，我想导入 MySQL 数据库。这些研究有很多变量，每个变量都用于在我的数据库中创建一个列。我有一个包含我研究中所有数据的 CSV 文件，我也想将其导入我的数据库。

一些研究中有超过 1000 个变量。这意味着我的表中将有超过 1000 列，我知道这是 MySql 中的限制。因此，我必须为我的研究创建多个表，并使用视图将它们组合起来以一次查看所有变量。

这是否意味着我还必须拥有多个 CSV 文件（每个 1000 列表一个），或者是否有某种方法可以将 CSV 文件中的批量插入到两个表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T13:55:53.703

您肯定需要多个表。我会编写一个脚本来读取 csv 文件。然后他们将数据写入数据库。

但是，在转储数据之前，我会寻找机会来规范化/合理化数据集。您可能会发现归一化实际上可能有助于您的分析。

# php - cURL 代理被视为钓鱼网站

> ID：14537167
> 
> 赞同：0
> 
> 时间：2013-01-26T13:00:02.233
> 
> 标签：php, facebook, curl

我已经看到许多代理能够在没有任何防病毒警告的情况下访问 Facebook。为什么下面的这段代码（有效）被视为卡巴斯基等防病毒软件的网络钓鱼网站？

```
<?php
$header = NULL;
$url = "http://www.facebook.com";
$cookie = NULL;
$ch = curl_init();
    curl_setopt($ch, CURLOPT_HEADER, $header);
    curl_setopt($ch, CURLOPT_NOBODY, $header);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($ch, CURLOPT_COOKIE, $cookie);
    curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
    //curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);;
curl_exec($ch);
?> 
```

提前致谢。

PD：尽管防病毒软件没有对 Twitter 显示任何警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:37:14.063

这不是因为代码。这是因为加载代码的 URL。

这个给了我“网络钓鱼警告”：

```
http://127.0.0.1/proxy/?url=http://facebook.com 
```

**但是，使用https**的更受信任的站点不会发出来自 AntiVirus 的任何警告。

```
https://127.0.0.1/proxy/?url=http://facebook.com 
```

# symfony - Little innerJoin-Query

> ID：14537175
> 
> 赞同：0
> 
> 时间：2013-01-26T13:00:37.523
> 
> 标签：symfony, doctrine-orm

symfony 1.4 和教义 1.2 中的旧查询

```
$user = Doctrine_Query::create()
                ->from('User.u')
                ->innerJoin('u.State s')
                ->where('u.id = ?', $id)
                ->andWhere('u.state_id = ?', $state_id)
                ->fetchOne(); 
```

现在我在 symfony2 中的查询：

```
$repository = $this->getDoctrine()
->getRepository('FrontendAccountBundle:User');

$user = $repository->findBy(array(
    'activationId' => $activation_id), 
    array('state' => 3)); 
```

我的错误即将出现：

无法识别的字段：状态

问题是什么？

编辑：重新格式化的代码

**更新**

用户实体：

```
namespace Frontend\AccountBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Security\Core\User\UserInterface;

/**
 * User
 *
 * @ORM\Table(name="user")
 * @ORM\Entity
 */
class User implements UserInterface, \Serializable
{

    /**
     * @var string
     *
     * @ORM\Column(name="activation_id", type="string", length=255, nullable=true)
     */
    private $activationId;

    /**
     * @var \State
     *
     * @ORM\ManyToOne(targetEntity="State")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="state_id", referencedColumnName="id")
     * })
     */
    private $state;

    /**
     * Set activationId
     *
     * @param string $activationId
     * @return User
     */
    public function setActivationId($activationId)
    {
        $this->activationId = $activationId;

        return $this;
    }

    /**
     * Get activationId
     *
     * @return string 
     */
    public function getActivationId()
    {
        return $this->activationId;
    }

    /**
     * Set state
     *
     * @param \Frontend\AccountBundle\Entity\State $state
     * @return User
     */
    public function setState(\Frontend\AccountBundle\Entity\State $state = null)
    {
        $this->state = $state;

        return $this;
    }

    /**
     * Get state
     *
     * @return \Frontend\AccountBundle\Entity\State 
     */
    public function getState()
    {
        return $this->state;
    }

    public function __construct()
    {
        $this->isActive = true;
        $this->salt = md5(uniqid(null, true));
    }

    /**
     * @inheritDoc
     */
    public function getUsername()
    {
        return $this->email;
    }
    /**
     * @see \Serializable::serialize()
     */
    public function serialize()
    {
        return serialize(array(
            $this->id,
        ));
    }

    /**
     * @see \Serializable::unserialize()
     */
    public function unserialize($serialized)
    {
        list (
            $this->id,
        ) = unserialize($serialized);
    }
} 
```

用户实体：

```
namespace Frontend\AccountBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * State
 *
 * @ORM\Table(name="state")
 * @ORM\Entity
 */
class State
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @var string
     *
     * @ORM\Column(name="state", type="string", length=255, nullable=false)
     */
    private $state;

    /**
     * @var string
     *
     * @ORM\Column(name="description", type="string", length=255, nullable=false)
     */
    private $description;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set state
     *
     * @param string $state
     * @return State
     */
    public function setState($state)
    {
        $this->state = $state;

        return $this;
    }

    /**
     * Get state
     *
     * @return string 
     */
    public function getState()
    {
        return $this->state;
    }

    /**
     * Set description
     *
     * @param string $description
     * @return State
     */
    public function setDescription($description)
    {
        $this->description = $description;

        return $this;
    }

    /**
     * Get description
     *
     * @return string 
     */
    public function getDescription()
    {
        return $this->description;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:16:51.397

问题是用户实体中的变量是“state”而不是“stateId”。您必须始终使用实体中的名称，而不是数据库中的名称。由于 stateId 在 State 实体中，因此也需要完成从 User 到 State 的连接。

当需要连接时，最好使用 queryBuilder 或 DQL。

这是一篇关于 Doctrine 2 queryBuilder 中的连接的帖子：[doctrine 2 query builder and join tables](https://stackoverflow.com/questions/8031321/doctrine-2-query-builder-and-join-tables)

这是 Symfony 教义书中的文档：http: [//symfony.com/doc/current/book/doctrine.html#entity-relationships-associations](http://symfony.com/doc/current/book/doctrine.html#entity-relationships-associations)

这是我项目中的一个示例，与您的问题非常相似：

```
 $uid = 2;
    $rep = $this->getDoctrine()->getRepository('DevondevTrackRTimeBundle:Activity');
    $q = $rep->createQueryBuilder('a')
        ->select ('a.activityId, a.startTime, a.endTime, u.username')
        ->join('a.login','u')
        ->where('u.id = :uid')
        ->setParameter('uid', $uid)
        ->getQuery();

    $acts = $q->getResult(); 
```

如果我不需要用户表中的任何内容，则可以将查询写为

```
 $uid = 2;
    $rep = $this->getDoctrine()->getRepository('DevondevTrackRTimeBundle:Activity');
    $q = $rep->createQueryBuilder('a')
        ->where('a.login = :uid')
        ->setParameter('uid', $uid)
        ->getQuery();

    $acts = $q->getResult(); 
```

这是您的查询以相同的方式重新编写：

```
 $rep = $this->getDoctrine()->getRepository('FrontendAccountBundle:User');
    $q = $rep->createQueryBuilder('u')
        ->join('u.state','s')
        ->where ('u.id = :uid')
        ->andWhere ('s.stateId = :sid')
        ->setParameters(array('uid' => $id, 'sid' => $state_id))             
        ->getQuery(); 

    $user = $q->getSingleResult(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T18:24:25.443

感谢彼得照亮了我一点！！！

如果您不想再从 symfony2(-docs) 和教义 2 中获得愚蠢的解决方案，因为您需要比 symfony1.4 中更多的代码，就像那样[http://symfony.com/doc/current/book/doctrine .html#joining-to-related-records](http://symfony.com/doc/current/book/doctrine.html#joining-to-related-records)。试试我的解决方案。

这是结果。

```
 $em = $this->getDoctrine()->getEntityManager();
        $user = $em->createQuery('SELECT u FROM FrontendAccountBundle:User u
              INNER JOIN FrontendAccountBundle:State s
                WHERE
                u.activation_id=:activation_id
                and
                u.state=:state_id
                ')
            ->setParameter('activation_id', $activation_id)
            ->setParameter('state_id', 3)
            ->getSingleResult(); 
```

# ruby - Ruby 子类实例变量可以_overwrite_ 超类的（同名）吗？

> ID：14537180
> 
> 赞同：5
> 
> 时间：2013-01-26T13:00:55.243
> 
> 标签：ruby, inheritance, subclass, instance-variables, superclass

在“红宝石编程语言”一书的第 7.3.5 章“继承和实例变量”中说：

> 因为实例变量与继承无关，所以子类使用的实例变量不能“遮蔽”超类中的实例变量。如果子类使用与其祖先之一使用的变量同名的实例变量，它将**覆盖**其祖先变量的值。这可以是有意完成的，以改变祖先的行为，也可以是无意中完成的。在后一种情况下，几乎肯定会导致错误。与前面描述的私有方法的继承一样，这也是为什么只有在您熟悉（并控制）超类的实现时才能安全地扩展 Ruby 类的另一个原因。

我做了自己的测试，但似乎子类中的实例变量不会影响超类

我的 Ruby 版本

```
bob@bob-ruby:~$ ruby --version
ruby 1.9.3p194 (2012-04-20 revision 35410) [i686-linux]
bob@bob-ruby:~$ 
```

下面是代码

```
class Point
   attr_accessor :x,:y
   def initialize(x,y)
     @x,@y=x,y
   end
end

class Point3D < Point
   attr_accessor :x,:y,:z
   def initialize(x,y,z)
     @x=x
     @y=y
     @z=z
   end
end

irb(main):052:0> p=Point.new(1,2)
=> #<Point:0x87e8968 @x=1, @y=2>
irb(main):053:0> q=Point3D.new(4,5,6)
=> #<Point3D:0x87e423c @x=4, @y=5, @z=6>
irb(main):054:0> q.x
=> 4
irb(main):055:0> p.x
=> 1
irb(main):056:0> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T14:16:51.010

这本书（重点和补充我的）：

> 如果**子类**使用与其祖先之一使用的 [n instance] 变量同名的实例变量，它将覆盖其祖先变量的值**。**

我知道您没有同一类的两个实例；我们专门讨论继承。

当子类使用与超类使用的实例变量同名的实例变量时，只有一个实例变量。如果子类更改了该实例变量的值，并且超类访问它，它会获取子类设置的值。

当一个子类被实例化时，它“好像”它*也是*超类的一个实例。Ruby 的实现方式意味着如果超类有一个实例变量`@foo`，子类可以访问它。`@foo`这使得子类和超类之间的区别`@foo`毫无意义。

这就是子类可以改变超类行为的方式：通过设置超类可能使用的值。如果子类设置`@foo = 42`，并且超类方法访问`@foo`，它会看到`42`。这可能是有意的，也可能不是有意的，因此发出警告。它可能会导致令人沮丧的调试会话。

```
class MyStack
  def initialize
    @my_array = []
  end

  def push(item)
    @my_array << item
  end
end

# Stack class that keeps a list 
# of every item ever pushed.
class TrackingStack < MyStack
  def initialize
    super
    @my_array = []
  end

  def push(item)
    super
    @my_array << item
  end

  def all_items_ever_pushed
    @my_array
  end
end 
```

`TrackingStack`引入了一个错误，因为它无意中使用了与用于保存堆栈内容的超类数组相同的名称。如果您不熟悉超类的实现，这将导致混乱和错误，直到您深入挖掘以了解意外行为的来源。

超类的实例就是：超类的*实例*，谈论*子类的**实例*将如何影响它是没有意义的，因为它们完全不相关。

 *这是一个改写：

> 当您不控制或不熟悉超类实现时，子类化可能会有风险。一个原因是因为在子类中引入实例变量可能会覆盖超类实例变量的值，从而导致意外行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T13:45:44.410

实例变量属于实例，而不属于类。“继承”的整个想法在那里甚至没有意义，继承只适用于类。*

# php - 使用 url 向变量发送值

> ID：14537181
> 
> 赞同：1
> 
> 时间：2013-01-26T13:01:02.483
> 
> 标签：php, html

```
<html>
<head>
<title>Find my Favorite Movie!</title>
</head>
<body>
<?php
echo “&lt;a href='localhost/moviesite.php?favmovie=Inception'>Inception</a>";
?>
</body>
</html> 
```

获取上述代码的以下错误。解析错误：语法错误，意外的 'href' (T_STRING)，期待 ',' 或 ';' 在第 7 行的 C:\xampp\test\movie1.php

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T13:03:34.233

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T13:04:02.420

```
echo '<a href="localhost/moviesite.php?favmovie=Inception">Inception</a>'; 
```

Should do the trick for you

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T13:02:49.190

# node.js - Nodejs：设置套接字对象的highWaterMark

> ID：14537183
> 
> 赞同：4
> 
> 时间：2013-01-26T13:01:18.060
> 
> 标签：node.js, sockets, stream, websocket

是否可以在创建套接字对象后设置它的 highWaterMark：

```
var http = require('http');

var server = http.createServer();

server.on('upgrade', function(req, socket, head) {
    socket.on('data', function(chunk) {
        var frame = new WebSocketFrame(chunk);

        // skip invalid frames
        if (!frame.isValid()) return;

        // if the length in the head is unequal to the chunk 
        // node has maybe split it
        if (chunk.length != WebSocketFrame.getLength()) {
            socket.once('data', listenOnMissingChunks);
        });
    });
});

function listenOnMissingChunks(chunk, frame) {
    frame.addChunkToPayload(chunk);

    if (WebSocketFrame.getLength()) {
        // if still corrupted listen once more
    } else {
        // else proceed
    }
} 
```

上面的代码示例不起作用。但是我该怎么做呢？

进一步说明：当我收到大的 WebSocket 帧时，它们会分成多个数据事件。这使得解析帧变得困难，因为我不知道这是一个分裂的还是损坏的帧。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T19:14:16.430

我认为您误解了 TCP 套接字的性质。尽管 TCP 通过 IP 数据包发送数据，但 TCP**不是**数据包协议。TCP 套接字只是一个数据*流*。因此，将`data`事件视为逻辑*消息*是不正确的。换句话说，`socket.write`一端的一个事件并不等同于另一端的单个`data`事件。

对套接字的单次写入未将 1:1 映射到单个`data`事件的原因有很多：

*   发送方的网络堆栈可以将多个小写入组合成一个 IP 数据包。（[纳格尔算法](http://en.wikipedia.org/wiki/Nagle's_algorithm)）
*   如果 IP 数据包的大小超过任何一跳的[MTU](http://en.wikipedia.org/wiki/Maximum_transmission_unit) ，则IP 数据包可能会在其传输过程中被*分段*（拆分为多个数据包） 。
*   接收方的网络堆栈可以将多个数据包组合成一个`data`事件（如您的应用程序所见）。

因此，单个`data`事件可能包含*多个*消息、单个消息或仅消息的一部分。

为了正确处理通过流发送的消息，您必须[缓冲传入数据](https://stackoverflow.com/a/12789321/201952)，直到获得完整的消息。

```
var net = require('net');

var max = 1024 * 1024 // 1 MB, the maximum amount of data that we will buffer (prevent a bad server from crashing us by filling up RAM)
    , allocate = 4096; // how much memory to allocate at once, 4 kB (there's no point in wasting 1 MB of RAM to buffer a few bytes)
    , buffer=new Buffer(allocate) // create a new buffer that allocates 4 kB to start
    , nread=0 // how many bytes we've buffered so far
    , nproc=0 // how many bytes in the buffer we've processed (to avoid looping over the entire buffer every time data is received)
    , client = net.connect({host:'example.com', port: 8124}); // connect to the server

client.on('data', function(chunk) {
    if (nread + chunk.length > buffer.length) { // if the buffer is too small to hold the data
        var need = Math.min(chunk.length, allocate); // allocate at least 4kB
        if (nread + need > max) throw new Error('Buffer overflow'); // uh-oh, we're all full - TODO you'll want to handle this more gracefully

        var newbuf = new Buffer(buffer.length + need); // because Buffers can't be resized, we must allocate a new one
        buffer.copy(newbuf); // and copy the old one's data to the new one
        buffer = newbuf; // the old, small buffer will be garbage collected
    }

    chunk.copy(buffer, nread); // copy the received chunk of data into the buffer
    nread += chunk.length; // add this chunk's length to the total number of bytes buffered

    pump(); // look at the buffer to see if we've received enough data to act
});

client.on('end', function() {
    // handle disconnect
});

client.on('error', function(err) {
    // handle errors
});

function find(byte) { // look for a specific byte in the buffer
    for (var i = nproc; i < nread; i++) { // look through the buffer, starting from where we left off last time
        if (buffer.readUInt8(i, true) == byte) { // we've found one
            return i;
        }
    }
}
function slice(bytes) { // discard bytes from the beginning of a buffer
    buffer = buffer.slice(bytes); // slice off the bytes
    nread -= bytes; // note that we've removed bytes
    nproc = 0; // and reset the processed bytes counter
}

function pump() {
    var pos; // position of a NULL character

    while ((pos = find(0x00)) >= 0) { // keep going while there's a NULL (0x00) somewhere in the buffer
        if (pos == 0) { // if there's more than one NULL in a row, the buffer will now start with a NULL
            slice(1); // discard it
            continue; // so that the next iteration will start with data
        }
        process(buffer.slice(0,pos)); // hand off the message
        slice(pos+1); // and slice the processed data off the buffer
    }
}

function process(msg) { // here's where we do something with a message
    if (msg.length > 0) { // ignore empty messages
        // here's where you have to decide what to do with the data you've received
        // experiment with the protocol
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T00:20:40.300

你不需要。传入的数据几乎肯定会被拆分为两次或多次读取：这是 TCP 的本质，您对此无能为力。摆弄晦涩的套接字参数当然不会改变它。并且数据将被点亮，但肯定不会损坏。只需将套接字视为它的本来面目：字节流。

# scala - 'ensime generate' 不是有效的 sbt 命令

> ID：14537187
> 
> 赞同：3
> 
> 时间：2013-01-26T13:01:46.023
> 
> 标签：scala, emacs, sbt, ensime

我正在尝试使用 sbt 生成本教程中描述的 ensime 配置文件：

[http://jawher.net/2011/01/17/scala-development-environment-emacs-sbt-ensime/](http://jawher.net/2011/01/17/scala-development-environment-emacs-sbt-ensime/)

我遇到的问题是我无法让 sbt 生成配置文件，因为“ensime generate”命令似乎不是 sbt 命令集的一部分。

[输出]

```
[info] Building project ScalaTest 1.0 against Scala 2.9.2
[info]    using sbt.DefaultProject with sbt 0.7.7 and Scala 2.7.7
[error] No method named 'ensime' exists.
[info] Execute 'help' for a list of commands or 'actions' for a list of available project actions and methods.
[info] 
[info] Total time: 0 s, completed 26-Jan-2013 12:53:48
[info] 
[info] Total session time: 0 s, completed 26-Jan-2013 12:53:48
[error] Error during build. 
```

[后续步骤]

```
cd <project directory> (sbt project root)
sbt 'ensime generate' 
```

[版本信息]

```
sbt 0.7.7
ensime 2.9.2-0.9.8.1
scala 2.9.2 
```

[emacs配置]

```
(add-to-list 'load-path "~/.emacs.d/scala-emacs")
(require 'scala-mode-auto)
(add-hook 'scala-mode-hook
            '(lambda ()
        (scala-mode-feature-electric-mode)
           ))
(require 'scala-mode)
(add-to-list 'auto-mode-alist '("\\.scala$" . scala-mode))
(add-to-list 'load-path "~/.emacs.d/ensime/elisp/")
(require 'ensime)
(add-hook 'scala-mode-hook 'ensime-scala-mode-hook)

(push "/media/xxx/Development/Runtimes/scala-2.9.2/bin/" exec-path)
(push "/media/xxx/Development/Tools/sbt/" exec-path) 
```

任何帮助表示赞赏（我已经检查了所有路径，所以请不要对此发表评论）

干杯，

爱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:36:13.550

看来您需要在 shell 上引用命令，即：

```
$ sbt "ensime generate" 
```

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T15:43:09.417

您是否已将 ensime-sbt-cmd 插件添加到您的 sbt 构建中？[http://aemoncannon.github.com/ensime/index.html#tth_sEc3.1](http://aemoncannon.github.com/ensime/index.html#tth_sEc3.1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T07:32:13.547

我有同样的问题。在尝试了你所做的之后，我通过这些额外的步骤解决了它：

1.  安装最新版本（在撰写本文时，从[http://www.scala-sbt.org/release/docs/Getting-Started/Setup.html](http://www.scala-sbt.org/release/docs/Getting-Started/Setup.html)获得 0.12.3 ）
2.  编辑文件`project\build.properties`并`sbt.version`相应地更改（在我的情况下，`sbt.version=0.12.3`）
3.  从项目根目录运行 sbt。

由于您已经修改了插件文件，因此应该安装 ensime 命令。如果您想从命令行运行它，请记住引用命令 ( `sbt "ensime generate"`)。

# c++ - 可以在某个随机命名空间中专门化和定义模板静态成员吗 ？

> ID：14537188
> 
> 赞同：3
> 
> 时间：2013-01-26T13:01:50.657
> 
> 标签：c++, templates, binding, scripting, macros

我有一些这样的代码：

```
template<> const string &Wrapper<Foo>::s_Name = "Foo";
template<> const Binding Wrapper<Foo>::s_Bindings[] = {
    Binding("m1", &caller<&Foo::f1>),
    Binding("m2", &caller<&Foo::f2>),
    Binding("m3", &caller<&Foo::f1>),
    Binding("outer", &caller<&outer>),
};
template<> const int Wrapper<Foo>::s_BindingsLength =
    (sizeof(ArraySizeHelper(s_Bindings))); 
```

ArraySizeHelper 在这里计算编译时的数组大小。非成员函数和成员函数可以绑定。在编写这些绑定时，我编写了一些宏来节省时间：

```
#define BIND_START(Class) \
    namespace _Bind##Class##Namespace { \
        typedef Class _BindClass; \
        template<> const string &Wrapper<_BindClass>::s_Name = #Class; \
        template<> const Binding Wrapper<_BindClass>::s_Bindings[] = {

#define BIND(FunctionName, Function) \
            Binding(FunctionName, &caller<Function>),

#define BIND_END \
        };\
        template<> const int Wrapper<_BindClass>::s_BindingsLength = \
            (sizeof(ArraySizeHelper(s_Bindings))); \
    } 
```

现在上面的代码可以这样写：

```
BIND_START(Foo)
    BIND("m1", &Foo::f1)
    BIND("m2", &Foo::f2)
    BIND("m3", &Foo::f1)
    BIND("outer", &outer)
BIND_END 
```

打字和阅读要容易得多。为什么我需要把它放在命名空间中？因为我找不到另一种方法来编写这些宏，即类名必须只写一次（成员函数指针除外）并将其与多个类一起使用。现在我想知道，这样做可以吗？如果没有，还有其他方法可以实现我想要的功能吗？

[此示例在 Pastebin 上的完整代码](http://pastebin.com/wW5Shns7 "此示例在 Pastebin 上的完整代码")

* * *

## 这似乎是 GCC 4.7.2 中的一个错误（不确定其他版本）

此代码违反 9.4.2/2：“静态数据成员的定义应出现在包含该成员的类定义的命名空间范围内。”
这是错误报告：[GCC Bugzilla – Bug 56119](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=56119)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:25:41.420

C++11 标准似乎**禁止您的解决方案。**这就是 9.4.2/2 所说的：

*“静态数据成员在其类定义中的声明不是定义，并且可能是除 cv 限定的 void 之外的不完整类型。**静态数据成员的定义应出现在包含该成员的类定义的命名空间范围内**”*

现在，您定义静态成员数据的名称空间（其名称是评估`_Bind##Class##Namespace`预处理器表达式的结果）不**包含**定义类的名称空间（在您的情况下是全局名称空间）。因此，静态数据成员定义是非法的。

我不确定您使用的是什么编译器，但如果它编译它，那么它就是一个**错误**（实际上这似乎是 GCC 4.7.2 的情况，例如）。Clang 3.2**正确地拒绝**编译它并产生正确的输出消息：

`source.cpp:106:1: error: cannot define or redeclare 's_Name' here because namespace '_BindFooNamespace' does not enclose namespace 'Wrapper<Foo>' BIND_START(Foo)`

至于替代的解决方案，我认为没有，只要你需要在类名中扩展`BIND_END`（这是你在编译时初始化时需要的`s_BindingsLength`）。如果宏没有将类名作为参数，实际上，该名称必须作为 a 可用`typedef`（如果允许宏扩展为`#define`指令，这是正确的，但它们不是）。由于`BIND_END`没有提示如何形成类的名称，它必须寻找一个*始终相同*的名称。如果名称必须始终相同，则必须将其放入单独的命名空间以避免名称冲突。但这是上述标准规则所禁止的。

换句话说，恐怕您必须在宏**中添加一个参数。**`BIND_END`毕竟，这还不错。

# jquery - 在 jQuery 中：如何获取创建的 IMG 的（自然）宽度

> ID：14537191
> 
> 赞同：1
> 
> 时间：2013-01-26T13:02:26.693
> 
> 标签：jquery, image

我有这个代码：

```
var img = $('<img>')
.attr('src','a.jpg')
.load(function(){
    alert(img.width()) ;
}) ; 
```

宽度始终等于 0，

如何获得自然宽度尺寸？

谢谢！

**编辑：**我只是*console.log(img)*然后我看到了*naturalWidth*，
但获得它的唯一方法是：*img[0].naturalWidth*

[http://jsfiddle.net/akkara/L9dMD/1/](http://jsfiddle.net/akkara/L9dMD/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:06:04.283

您编写的代码是正确的。

```
var img = $('<img>')
.attr('src','a.jpg')

// Correct till here
// Wrong after this!

.load(function(){
    alert(img.width()) ;
}); 
```

但是，它仍然不是在 DOM 中作为布局。所以，这行不通。您需要做的是，您需要将它放在 DOM 中。

所以，最好的办法是，将它放在 DOM 中并获取属性。

```
var img = $('<img>')
.attr('src','a.jpg')
.appendTo('body');
alert(img.height());
img.remove(); 
```

* * *

### 更新的工作小提琴：

```
$(document).ready(function(){
    var img = $('<img>')
        .attr('src','http://blog.tmcnet.com/blog/rich-tehrani/uploads/new-microsoft-logo.png')
        .css('visibility', 'hidden')
        .appendTo('body');
    var imgHt = img.height();
    alert(imgHt);
    img.remove();
}); 
```

### 小提琴：http: [//jsfiddle.net/praveenscience/KpCRe/](http://jsfiddle.net/praveenscience/KpCRe/)

# c++ - QML 中的附加属性

> ID：14537193
> 
> 赞同：4
> 
> 时间：2013-01-26T13:02:46.287
> 
> 标签：c++, qt, qml

我可以为像组件这样的所有属性创建自己的附件吗？

```
Item{
    Component.onCompleted : {} // Component is attached to everyone Items
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T03:20:53.380

您可能无法将属性附加到您未创建的项目或组件。但是你为什么要这样做呢？

相反，您可以考虑使用信号和全局属性。

对于可以从任何地方访问的全局属性，您可以设置**声明性视图**的**根上下文**的**上下文属性**。

 ****IE，

```
QmlApplicationViewer viewer;
MyPropertyClass myProp;
viewer->rootContext()->setContextProperty("MyPropClass", &myProp); 
```

现在，在您的 QML 文件中，您可以访问此类的属性

```
Rectangle {
    Text {
        text: MyPropClass.getMyPropText()
    }
    MouseArea {
        onClicked: { MyPropClass.text = "Clicked" }
    }
} 
```

这将从 MyPropertyClass 调用 Q_INVOKABLE 方法 getMyPropText()。并且 Q_PROPERTY 'text' 可以在发出某些信号时设置。

你需要这件衣服吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-06T13:01:55.380

是的，例如：

```
#include <QQmlEngine>
#include <QTimer>

class TestAttached : public QObject
{
    Q_OBJECT
    // Declare property with setter and getter
    Q_PROPERTY(int val READ getVal WRITE setVal)
public:
    TestAttached() Q_DECL_EQ_DEFAULT;
    explicit TestAttached(QObject *parent):
        QObject{parent},
        m_val{100500}
    {
        Q_ASSERT(parent);
        qDebug() << "* We just have created the object of attached properties for" << parent->metaObject()->className();
    }
    ~TestAttached() Q_DECL_EQ_DEFAULT;

    // define static function qmlAttachedProperties(QObject *object)
    // which returns pointer to instance of TestAttached class
    static TestAttached *qmlAttachedProperties(QObject *object)
    {
        TestAttached* testAttached { new TestAttached{object} };
        QTimer* timer { new QTimer{testAttached} };
        connect(timer, &QTimer::timeout,
        [testAttached] {
            testAttached->setVal(testAttached->getVal()+1);
            emit testAttached->testDone(testAttached->getVal());
        });
        timer->start(3000);
        return testAttached;
    }

    inline int getVal() const
    {
        return m_val;
    }
    inline void setVal(int val)
    {
        m_val = val;
    }

signals:
    void testDone(int val);

private:
    int m_val;
};
// Makes the type TestAttached known to QMetaType (for using with QVariant)
QML_DECLARE_TYPE(TestAttached)
// declares that the TestAttached supports attached properties.
QML_DECLARE_TYPEINFO(TestAttached, QML_HAS_ATTACHED_PROPERTIES) 
```

在 QML 系统中注册附加类型（例如 at `main.cpp`）：

```
qmlRegisterUncreatableType<TestAttached>("my.test", 1, 0, "Test", QObject::tr("Test is an abstract type that is only available as an attached property.")); 
```

并尝试`main.qml`：

```
import QtQuick 2.15
import QtQuick.Window 2.15
//import our module
import my.test 1.0

Window {
    width: 640
    height: 480
    visible: true
    title: qsTr("Hello World of Attached properties")

    Rectangle {
        color: focus ? Qt.lighter("red") : "red"
        width: parent.width/2; height: parent.height
        anchors.left: parent.left
        Component.onCompleted: {
            console.log("Rectangle is completed", Test.val)
        }
        Keys.onReturnPressed: {
            console.log("Rect 1: Attachet value is", Test.val)
        }

        Test.val: 20000

        Test.onTestDone: function(num) {
            console.log("We received", num, "from attached object")
        }

        MouseArea {
            anchors.fill: parent
            onClicked: parent.focus = true
        }
    }

    Rectangle {
        color: focus ? Qt.lighter("blue") : "blue"
        width: parent.width/2; height: parent.height
        anchors.right: parent.right
        focus: true

        Keys.onReturnPressed: {
            // The attached object will created after return pressed
            console.log("Rect 2: Attachet value is", Test.val)
        }

        MouseArea {
            anchors.fill: parent
            onClicked: parent.focus = true
        }
    }
} 
```****

# java - Google Map Android API v2 getMap() error

> ID：14537196
> 
> 赞同：-1
> 
> 时间：2013-01-26T13:02:53.557
> 
> 标签：java, android, android-maps-v2, mapfragment

Hi I'm trying to implement Google Maps display in my app using Google Map Android API v2, and I am trying to follow the solution in [here](https://stackoverflow.com/questions/13721929/using-actionbarsherlock-with-the-new-supportmapfragment).

Codes seem to be okay except when I tried this part:

```
public class MapFragment extends SherlockMapFragment {
    private GoogleMap mMap;
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle    savedInstanceState) {
    View root = super.onCreateView(inflater, container, savedInstanceState);
    mMap = getMap();
    return root;
    }
} 
```

The getMap() gives an error, as it says method getMap() is undefined for the type MapFragment. What does this mean?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-16T01:44:15.563

该`getMap()`方法是`com.google.android.gms.maps.SupportMapFragment`类的一部分。您`SherlockMapFragment`应该首先扩展它，因此只需使用`getMap()`shoudl 即可正常工作，但除非您使用 MapFragment 中的 ActionBar 而不是您的 FragmentActivity 进行一些实际的额外自定义，否则您可以`SupportMapFragment`首先扩展。

# knockout.js - Knockout.js doesn't pick up autocompleted or prefilled values

> ID：14537199
> 
> 赞同：2
> 
> 时间：2013-01-26T13:03:13.793
> 
> 标签：knockout.js, remember-me

I've noticed that Knockout doesn't seem to update my view model when I use autocomplete (remembering password, for example).

I read that there was an issue with this, but should have been fixed by now. It doesn't seem to be working for me though.

I've hosted a mini-example of the problem, if you fill in random string + password, press save and "remember password" and use the autocomplete feature the observables email and password doesn't get updated until you focus the relevant textbox and then leave focus.

This is tested using IE 9 or Firefox 18.

The reason I don't use fiddle is because I didn't seem to be able to trigger the autocomplete feature.

Any ideas?

[http://cyberrascal.no-ip.org/tempsite](http://cyberrascal.no-ip.org/tempsite)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T13:39:48.493

The value is overwritten by the value binding, please have a look at this fiddle [http://jsfiddle.net/rniemeyer/TeFAX/](http://jsfiddle.net/rniemeyer/TeFAX/)

```
ko.bindingHandlers.valueWithInit = {
    init: function(element, valueAccessor, allBindingsAccessor, context) {
        var observable = valueAccessor();
        var value = element.value;

        observable(value);   

        ko.bindingHandlers.value.init(element, valueAccessor, allBindingsAccessor, context);
    },
    update: ko.bindingHandlers.value.update
}; 
```

Also you must wait until the value is set by the browser

```
setTimeout(function() { ko.applyBindings(viewModel); }, 15); 
```

# objective-c - 为什么 Xcode 使用 NSStringFromClass([AppDelegate class]) 而不仅仅是 @"AppDelegate" 或 nil

> ID：14537202
> 
> 赞同：8
> 
> 时间：2013-01-26T13:03:22.247
> 
> 标签：objective-c, xcode

我注意到在默认使用 ARC 的最新版本的 Xcode 中，当您开始一个新项目时 Xcode 为您生成的 main.m 文件`NSStringFromClass([AppDelegate class])`用作 UIApplicationMain 中应用程序委托的参数，而不仅仅是`@"AppDelegate"`甚至只是`nil`

新的方法：

```
@autoreleasepool {
      return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
} 
```

老办法：

```
 @autoreleasepool {
      int retVal = UIApplicationMain(argc, argv, nil, nil);
      return retVal;
  } 
```

我只是想知道这是否有原因？这对我来说似乎有点做作，但我希望能直截了当。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T13:05:36.250

这是一个编译检查。如果可以在编译时检查参数会更好。如果它只是一个字符串，则无法检查。

关于`nil`论点，文档说：

> 如果从应用程序的主 nib 文件加载委托对象，请指定 nil。

假设您正在使用 xib 文件来声明应用程序委托的类。嗯，很多项目都没有。一般来说，没有 xib 文件的项目模板（例如“空应用程序”）不能使用`nil`.

# c# - ASP.NET: Client-side validation, server-side action

> ID：14537206
> 
> 赞同：1
> 
> 时间：2013-01-26T13:03:39.327
> 
> 标签：c#, javascript, jquery, .net, web-applications

For some reason I'm using HTML controls with `runat="server"`. One of these controls is a button. I have **client-side** validation function. I wan't to fire **server-side** action after successful **client-side** validation.

**HTML:**

```
<button type="button" id="webSubmit" 
runat="server" 
onclick="return $('#form1').valid();">Submit</button> 
```

**Server side:**

```
protected void webSubmit_ServerClick(object sender, EventArgs e)
{
   //foo
} 
```

When I click the button it validates the form but does not **postback** even if validation returns true.

It's generated by ASP.net:

```
<button onclick="return $('#form1').valid(); __doPostBack('webSubmit','')" 
id="webSubmit" type="button">Submit</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T13:30:48.540

我将**onclick**代码更改为：

```
onclick="$('#form1').valid() && " 
```

ASP.net 生成的代码是：

```
<button onclick="$('#form1').valid() &&  __doPostBack('webSubmit','')" 
id="webSubmit" type="button">Submit</button> 
```

它等于：

```
if ($('#form1').valid()){
__doPostBack('webSubmit','')
} 
```

我的想法来自：[我可以在 inline javascript if 语句中省略 else 吗？](https://stackoverflow.com/questions/9232907/can-i-omit-the-else-in-an-inline-javascript-if-statement)

# c# - sql insert into asp.net

> ID：14537214
> 
> 赞同：2
> 
> 时间：2013-01-26T13:04:43.387
> 
> 标签：c#, asp.net, sql, sql-server

```
con.Open();
SqlCommand cmd=new SqlCommand("INSERT INTO user(Firstname,Lastname,Email,Pass,Type)
    values(@first,@last,@email,@pass,@type)",con);
cmd.Parameters.Add("@first",SqlDbType.NVarChar).Value = txtfirst.Text;
cmd.Parameters.Add("@last",SqlDbType.NVarChar).Value = txtlast.Text;
cmd.Parameters.Add("@email",SqlDbType.NVarChar).Value = txtemail.Text;
cmd.Parameters.Add("@pass",SqlDbType.NVarChar).Value = txtpass.Text;
cmd.Parameters.Add("@type",SqlDbType.NVarChar).Value = "customer";
cmd.ExecuteNonQuery();
con.Close(); 
```

what is the problem with my syntax it says "Incorrect syntax near the keyword 'user'."

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-26T13:13:22.330

您应该使用分隔标识符转义表名`user`，

```
SqlCommand cmd=new SqlCommand("INSERT INTO [user] (Firstname,Lastname,Email,Pass,Type) values(@first,@last,@email,@pass,@type)",con); 
```

*   [SQL Server 保留关键字](http://msdn.microsoft.com/en-us/library/ms189822.aspx)
*   [SQL Server 分隔标识符](http://msdn.microsoft.com/en-us/library/ms176027%28v=sql.105%29.aspx)

**更新 1**

重构你的代码

*   using`using`语句正确处理对象
*   使用`Try-Catch`块来正确处理异常

代码片段：

```
string _connStr = "connectionString here";
string _query = "INSERT INTO [user] (Firstname,Lastname,Email,Pass,Type) values (@first,@last,@email,@pass,@type)";
using (SqlConnection conn = new SqlConnection(_connStr))
{
    using (SqlCommand comm = new SqlCommand())
    {
        comm.Connection = conn;
        comm.CommandType = CommandType.Text;
        comm.CommandText = _query;
        comm.Parameters.AddWithValue("@first", txtfirst.Text);
        comm.Parameters.AddWithValue("@last", txtlast.Text);
        comm.Parameters.AddWithValue("@email", txtemail.Text);
        comm.Parameters.AddWithValue("@pass", txtpass.Text);
        comm.Parameters.AddWithValue("@type", "customer");
        try
        {
            conn.Open();
            comm.ExecuteNonQuery();
        }
        catch(SqlException ex)
        {
            // other codes here
            // do something with the exception
            // don't swallow it.
        }
    }
} 
```

*   [加值](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)
*   [添加（*推荐一个*）](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.add.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T13:19:49.203

`USER`是 SQL Server 上的[*保留关键字*](http://msdn.microsoft.com/en-us/library/ms189822.aspx)。

您应该使用带括号的表名，`[]`例如；

```
INSERT INTO [user] 
```

你可以试试；

```
con.Open();
SqlCommand cmd=new SqlCommand("INSERT INTO [user] (Firstname,Lastname,Email,Pass,Type) values(@first,@last,@email,@pass,@type)",con);
cmd.Parameters.AddWithValue("@first", txtfirst.Text);
cmd.Parameters.AddWithValue("@last", txtlast.Text);
cmd.Parameters.AddWithValue("@email", txtemail.Text);
cmd.Parameters.AddWithValue("@pass", txtpass.Text);
cmd.Parameters.AddWithValue("@type", "customer");
cmd.ExecuteNonQuery();
con.Close(); 
```

而且就像[@JW](https://stackoverflow.com/a/14537278/447156)所说，在 try-catch 语句中使用它们始终是一种好方法。

*   [异常管理的最佳实践](http://www.codeproject.com/Articles/9795/Best-Practices-of-Exception-Management)

# c++ - Continual reads much slower than more distant?

> ID：14537216
> 
> 赞同：1
> 
> 时间：2013-01-26T13:04:46.443
> 
> 标签：c++, opencl

I have a kernel and want to store some global data into local buffer to speed it up. I already got fine results and lower execution time. To decrease it further I decided to modify kernel to read these values in one stream.

Old kernel:

```
__local short3 (*lixArr) = (__local short3(*)) (lixInLocal + get_local_id(1) * 3);
__global short (*lab)[TS][TS][3] = (__global short(*)[TS][TS][3]) (buffer + TS*TS*12 + TS*TS*26*get_global_id(2));
__global short3 (*lix) = (__global short3(*)) (lab[0][get_global_id(0)+2][1+get_global_id(1)]);

lixArr[1] = lix[0].xyz;
lixArr[2] = lix[-TS].xyz;
lixArr[3] = lix[TS].xyz;

if(get_local_id(1) == 0)
    lixArr[0] = lix[-1].xyz;
else if(get_local_size(1) == get_local_id(1)+1)
    lixArr[3+1] = lix[1].xyz;

lix = (__global short(*)) (lab[1][get_global_id(0)+2][1+get_global_id(1)]);
lixArr += (get_local_size(1))*3 + 2;

lixArr[1] = lix[0].xyz;
lixArr[2] = lix[-TS].xyz;
lixArr[3] = lix[TS].xyz;

if(get_local_id(1) == 0)
    lixArr[0] = lix[-1].xyz;
else if(get_local_size(1) == get_local_id(1)+1)
    lixArr[3+1] = lix[1].xyz;

barrier(CLK_LOCAL_MEM_FENCE); 
```

Modified stream reads:

```
__global short (*lab)[TS][TS][3] = (__global short(*)[TS][TS][3]) (buffer + TS*TS*12 + TS*TS*26*get_global_id(2));
__global short3 (*lix) = (__global short3(*)) (lab[(get_local_id(1) % 6 > 2)][get_global_id(0)+2][1+(get_local_id(1)/3)*6]);

__global short16 (*lix16);
__local short16 (*lixLocal16);

lix16 = (__global short16(*)) (&lix[(get_local_id(1) % 3 == 0) ? 0 : (get_local_id(1) % 3 == 1) ? -TS : TS]);
lixLocal16 = (__local short16(*)) (lixInLocal + ((get_local_id(1) % 6) * (get_local_size(1)+2) + 1 + (get_local_id(1) /6)*6));

lixLocal16[0] = lix16[0].s0123456789ABCDEF;
lixLocal16[1].s01 = lix16[1].s01;

if((get_local_id(1) % 3 + get_local_id(1) / 6) == 0)
    lixInLocal[(get_local_id(1) % 6) * (get_local_size(1)+2)] = lix[-1].xyz;
else if(get_local_id(1) % 3 == 0 && get_local_id(1)+6 >= get_local_size(1))
    lixInLocal[(get_local_id(1) % 6) * (get_local_size(1)+2)-1] = lix[1].xyz;   

mem_fence(CLK_LOCAL_MEM_FENCE); 
```

In first kernel, as you see, I read distant values. In second case I modified the kernel to read 18 consequent values instead of 6*3 separated.

One thing that may be important - In the 1st case read values are later all used. In 2nd only 1 is used, others are for another WorkItems.

*   In 1st case the kernel execution took average 28.5ms.
*   In 2nd case execution takes 96ms!

I also tried to use vstoren and vloadn, but result was even worse.

Final question: Why these consequent reads increase execution time so rapidly, when they should speed things up?

# c# - winforms - 简单的表单，如何迭代其中的所有按钮（Visual Sudito 2010 + C#）

> ID：14537218
> 
> 赞同：0
> 
> 时间：2013-01-26T13:04:59.000
> 
> 标签：c#, winforms, visual-studio-2010

现在我已经创建了一个`Windows Forms Project`带有一个表单并`buttons`添加了六个的表单。我现在要做的是找出如何遍历所有按钮，目标是将每个带有偶数的按钮的背景颜色设置为不同的颜色。比如 - `button1 - white`, `button2-red`, `button3-white`,`button4-red`等等。是的，我不知道如何迭代按钮或更改`background color`属性，但问题是关于迭代的，所以如果有人知道如何更改按钮的，我将不胜感激有关此主题的帮助，`background color`这将节省我的时间，也许是新的问题在这里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T13:07:58.907

您可以使用以下代码：

```
foreach(Control c in this.Controls) // this is the form object on which Controls is the ControlCollection
{
   if(c is Button)
   {
       KnownColor[] names = (KnownColor[]) Enum.GetValues(typeof(KnownColor));
       KnownColor color= names[randomGen.Next(names.Length)];
       Color color = Color.FromKnownColor(randomColorName);
       c.BackColor = color;
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T13:08:56.720

它是按钮数组还是按钮列表？然后你可以这样做：

```
buttons.Select((btn,index)=>{
            if(index%2==0)btn.BackgroundColor=Color.Red
            else
                 btn.BackgroundColor=Color.White;
       }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T13:10:02.950

```
 foreach (Control control in Controls)
        {
            Button button = control as Button;
            if (button == null) continue;
            switch (button.Name)
            {
                case "button1":
                    button.BackColor = Color.Red;
                    break;
                case "button2":
                    button.BackColor = Color.Yellow;
                    break;
                case "button3":
                    button.BackColor = Color.Green;
                    break;
                default:
                    button.BackColor = Color.Black;
                    break;

            }
        } 
```

# python - 为什么有人会检查“列表中的 x”？

> ID：14537220
> 
> 赞同：4
> 
> 时间：2013-01-26T13:05:03.463
> 
> 标签：python, list, set

在 Python 中，使用 -operator 可以很容易地检查一个值是否包含在容器中`in`。我想知道为什么有人会`in`在列表上使用 -operator，但是，首先将列表转换为这样的集合会更有效：

```
if x in [1,2,3]: 
```

与

```
if x in set([1,2,3]): 
```

在查看[时间复杂度](http://wiki.python.org/moin/TimeComplexity)时，第一个具有 O(n)，而第二个在 O(1) 上更胜一筹。使用第一个的唯一原因是它更易读且写起来更短吗？或者有没有更实用的特殊情况？为什么 Python 开发人员没有通过首先将第一个转换为第二个来实现第一个？这难道不是 O(1) 复杂度吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-26T13:10:11.697

```
if x in set([1,2,3]): 
```

不比*_* _

```
if x in [1,2,3]: 
```

将列表转换为集合需要遍历列表，因此至少需要`O(n)`时间。* 实际上，它比搜索项目花费的时间要长得多，因为它涉及散列然后插入每个项目。

当集合转换一次然后*多次检查时，使用集合是有效的。*`500`实际上，通过在列表中搜索来尝试此`range(1000)`操作表明，一旦您检查至少 3 次，就会发生权衡：

```
import timeit

def time_list(x, lst, num):
    for n in xrange(num):
        x in lst

def time_turn_set(x, lst, num):
    s = set(lst)
    for n in xrange(num):
        x in s

for num in range(1, 10):
    size = 1000
    setup_str = "lst = range(%d); from __main__ import %s"
    print num,
    print timeit.timeit("time_list(%d, lst, %d)" % (size / 2, num),
                        setup=setup_str % (size, "time_list"), number=10000),
    print timeit.timeit("time_turn_set(%d, lst, %d)" % (size / 2, num),
                        setup=setup_str % (size, "time_turn_set"), number=10000) 
```

给我：

```
1 0.124024152756 0.334127902985
2 0.250166893005 0.343378067017
3 0.359009981155 0.356444835663
4 0.464100837708 0.38081407547
5 0.600295066833 0.34722495079
6 0.692923069 0.358560085297
7 0.787877082825 0.338326931
8 0.877299070358 0.344762086868
9 1.00078821182 0.339591026306 
```

列表大小从 500 到 50000 的测试给出大致相同的结果。

* 实际上，在真正的渐近意义上，插入哈希表（并且，就此而言，检查一个值）不是`O(1)`时间，而是线性`O(n)`时间的恒定加速（因为如果列表变得太大，就会产生冲突）。这将使`set([1,2,3])`操作`O(n^2)`及时而不是`O(n)`。然而，在实践中，通过具有良好实现的合理大小的列表，您基本上总是可以假设哈希表的插入和查找是`O(1)`操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T13:15:25.373

让我们测试你的假设：

```
In [19]: %timeit 1 in [1, 2, 3]
10000000 loops, best of 3: 52.3 ns per loop

In [20]: %timeit 4 in [1, 2, 3]
10000000 loops, best of 3: 118 ns per loop

In [21]: %timeit 1 in set([1, 2, 3])
1000000 loops, best of 3: 552 ns per loop

In [22]: %timeit 4 in set([1, 2, 3])
1000000 loops, best of 3: 558 ns per loop 
```

因此，在您的确切示例中，使用`set()`比使用列表慢 5 到 10 倍。

仅创建集合需要 517 ns：

```
In [23]: %timeit set([1, 2, 3])
1000000 loops, best of 3: 517 ns per loop 
```

让我们将创建集合的因素排除在检查之外：

```
In [26]: s = set([1, 2, 3])

In [27]: %timeit 1 in s
10000000 loops, best of 3: 72.5 ns per loop

In [28]: %timeit 4 in s
10000000 loops, best of 3: 71.4 ns per loop 
```

这使得性能差异不那么明确。`list`现在和的相对性能`set`取决于呈现给 的确切值`in`。如果它们出现在列表中并且靠近列表的开头，那么`list`可能会获胜。否则，`set`可能会赢。

当然，如果 的右边`in`更大，结论就会大不相同。

底线：

1.  不要过早优化。
2.  在优化之前始终分析实际输入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T13:14:02.193

如果你想做微优化，你必须测量：

```
l.py:
for x in range(1000000):
    3 in [1, 2, 3]

s.py:
for x in range(1000000):
    3 in set([1, 2, 3])

~/py $ time python l.py

real    0m0.314s
user    0m0.275s
sys 0m0.030s

~/py $ time python s.py

real    0m1.055s
user    0m1.006s
sys 0m0.029s 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T13:10:04.590

为了将列表转换为集合，您需要遍历列表的元素，这`O(n)`最多需要时间。我相信 Python 集由哈希映射支持，这意味着它们实际上也具有`O(n)`查找操作的最坏情况时间复杂度。

他们的[维基](http://wiki.python.org/moin/TimeComplexity)似乎同意这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T13:10:36.020

因为将列表转换为集合需要遍历整个列表，这与测试列表是否包含值的复杂性相当。

所以测试一个值是否在一个集合中会更快，只有这个集合已经被构造了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-26T13:22:23.653

让我们试试吧……</p>

```
import cProfile 
```

我们选择了一个足够大的测试范围，这样我们就可以实际测量一些东西。`2**13`只是一些随机值。

```
test = range(2**13)
runs = len(test)
wcn  = runs - 1 # worst case n 
```

测试运行的数量等于列表中的数字数量，因此我们最终可以获得一个不错的平均值。 `wcn`是最坏的情况，因为它是列表中的最后一个条目，所以它是算法将检查的最后一个条目。

```
def simple():
    for n in range(runs):
        if n in test:
            pass

def simpleWorstCase():
    for n in range(runs):
        if wcn in test:
            pass

def slow():
    for n in range(runs):
        if n in set(test):
            pass 
```

我们简单测试的结果：

```
cProfile.run('simple()')
"""
         4 function calls in 0.794 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    0.794    0.794 <string>:1(<module>)
        1    0.794    0.794    0.794    0.794 profile.py:6(simple)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
        1    0.000    0.000    0.000    0.000 {range}
""" 
```

我们简单的最坏情况测试的结果：

```
cProfile.run('simpleWorstCase()')
"""
         4 function calls in 1.462 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    1.462    1.462 <string>:1(<module>)
        1    1.462    1.462    1.462    1.462 profile.py:12(simpleWorstCase)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
        1    0.000    0.000    0.000    0.000 {range}
""" 
```

我们首先转换为集合的测试结果：

```
cProfile.run('slow()')
"""
         4 function calls in 2.227 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    2.227    2.227 <string>:1(<module>)
        1    2.227    2.227    2.227    2.227 profile.py:11(slow)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
        1    0.000    0.000    0.000    0.000 {range}
""" 
```

# php - 将中间的文本抓取到变量中

> ID：14537221
> 
> 赞同：2
> 
> 时间：2013-01-26T13:05:23.150
> 
> 标签：php

> **可能重复：**
> [PHP DOMDocument - 获取 BODY 的 html 源](https://stackoverflow.com/questions/2345670/php-domdocument-get-html-source-of-body)

我将以下代码作为变量，并尝试获取正文标签之间的所有内容（同时保留 p 标签等）。这样做的最佳方法是什么？

*   预赛
*   strpos / substr

    ```
    <head>
    <title></title>
    </head>
    <body>
        <p>Services Calls2</p>
    </body> 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T13:10:59.983

两者都不。您可以使用 XML 解析器，例如[`DomDocument`](http://php.net/manual/en/class.domdocument.php)：

```
$dom = new DOMDocument();
$dom->loadHTML($var);

$body = $dom->getElementsByTagName('body')->item(0);

$content = '';

foreach($body->childNodes as $child)
  $content .= $dom->saveXML($child); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T13:31:27.033

试试这个， $html 有文本：

```
$s = strpos($html, '<body>') + strlen('<body>');
$f = '</body>';

echo trim(substr($html, $s, strpos($html, $f) - $s)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T13:17:41.033

我建议您使用 preg_match 因为两者之间的内容`<p>Services Calls2</p>`可以一直更改，然后 subtr 或 strpos 将需要相当有争议的代码。

例子：

```
$a = '<h2><p>Services Calls2</p></h2>';
preg_match("/<p>(?:\w|\s|\d)+<\/p>/", $a, $ar);
var_dump($ar); 
```

正则表达式将只允许字母、空格和数字。

# python - 使用布尔数组从列表中删除项目

> ID：14537223
> 
> 赞同：3
> 
> 时间：2013-01-26T13:05:33.513
> 
> 标签：python, list

我正在使用布尔数组从 numpy 数组中删除一些列。是否可以用列表做类似的事情？

```
#Set a numpy array of booleans to True if column datatype is "Categorical"
cols_to_remove = np.array([datatype == "Categorical" for datatype in datatypes])

#Make a new array without the "Categorical" columns
cat_data = data[:, -cols_to_remove] # data here is a 2D numpy array

#Trying to do the same for a list - this way doesn't work
cat_datatypes = datatypes[-cols_to_remove] # datatypes here is a 1D list 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T13:07:48.320

这可以通过列表理解来完成：

```
In [17]: cols_to_remove = [False, False, True, False, True, False]

In [18]: [d for (d, remove) in zip(datatypes, cols_to_remove) if not remove]
Out[18]: ['a', 'b', 'd', 'f'] 
```

它`cols_to_remove`是一个索引数组，可以使用以下解决方案：

```
In [12]: datatypes = ['a', 'b', 'c', 'd', 'e', 'f']

In [13]: cols_to_remove = [2, 4]

In [14]: [d for (i, d) in enumerate(datatypes) if i not in cols_to_remove]
Out[14]: ['a', 'b', 'd', 'f'] 
```

在这里，出于效率原因，将其`cols_to_remove`转换为`set`.

# mysql - 是否可以使用 CodeIgniter 使用多个数据库连接运行 JOIN 查询？

> ID：14537231
> 
> 赞同：3
> 
> 时间：2013-01-26T13:06:23.093
> 
> 标签：mysql, database, codeigniter, join

是否可以使用 CodeIgniter 的活动记录实用程序连接来自不同数据库的多个表？

我知道我必须在`database.php`模型中创建两个单独的数据库组并手动加载它们：

```
$this->DB1= $this->load->database('somename1', TRUE);
$this->DB2= $this->load->database('somename2', TRUE); 
```

但是，我不知道如何使用它们连接来自两个独立数据库的多个表。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:37:35.480

据我所知，没有办法使用多个数据库实例（即你的`$DB1`和`$DB2`变量）来做到这一点。

但是，如果您有一个可以访问这两个数据库的用户，您可以在表名前加上它们的数据库名称，这样就可以工作（至少在 MySQL 上——我还没有测试过其他任何东西）。例如，这段代码：

```
$this->load->database('first');
$this->db->select('*')->from('users');
$this->db->join('test.hometowns', 'users.id = second.hometowns.user');
$query = $this->db->get(); 
```

将成功运行此查询，返回预期结果：

```
SELECT * 
FROM (`users`) 
JOIN `second`.`hometowns` ON `users`.`id` = `second`.`hometowns`.`user`; 
```

同样，我只用 MySQL 对此进行了测试，其他数据库可能对跨越数据库边界有限制。它还要求用户帐户实际上具有读取两个数据库/表的权限。

# ios - 如何调整容器视图的子视图以适应 iphone 4 和 iphone 5 屏幕

> ID：14537232
> 
> 赞同：0
> 
> 时间：2013-01-26T13:06:33.493
> 
> 标签：ios, resize, storyboard, containers, appdelegate

我正在尝试为 iphone 4 和 5 开发我的应用程序。但是我遇到了容器视图的问题。我的观点是这样的：![IB图像](../Images/28dc7cf7d66e0b28ae05600bc1cba536.png)

现在，我尝试google了一下，发现我可以通过上传不同大小的图片在项目设置中设置视图的大小（这样我的所有视图都会自动调整大小）。这对于我的所有视图都是如此，除了我的容器视图。

所以我的第二次尝试是在 appdelegate 中调整我的视图，如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    _window.frame = CGRectMake(0, 0, 320, [[UIScreen mainScreen]bounds].size.height);
} 
```

不幸的是，这对我的容器视图没有任何影响。到目前为止，我发现的唯一解决方案是设置我的嵌入式表格视图的高度，方法是在界面生成器的大小检查器中将其设置为 458。这将它设置为适合 iphone 5 屏幕，但是在 iphone4（和模拟器中）它太多了，我的一些行在屏幕下方（如我所料）。

如果有人可以帮助我，我会很高兴，因为我真的不知道如何处理这个问题；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T17:38:56.127

好吧，我会调查您的约束和原始设置，以防您在不知情的情况下进行了任何更改。这是一个例子： ![在此处输入图像描述](../Images/9c0144b6621ec2d5bef2ae39f4b1c31b.png)

确保将原点设置设置为图像中左上角的“点”，并检查您的约束父项（在本例中为 Superview）。提示：在界面生成器中编辑约束的关键是一旦将任何内容添加到视图中，就永远不要拖放任何内容。通过编辑约束来移动和排列事物。

您也可以关闭自动布局并手动进行

![在此处输入图像描述](../Images/4cdbf4aaa6bc8ce24c4079a8ebafc567.png)

这里还有一篇关于[界面构建器中自动布局](http://commandshift.co.uk/blog/2013/01/18/autolayout-in-interface-builder/)的精彩文章，以及[苹果自己的](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/AdoptingaFull-ScreenLayout/AdoptingaFull-ScreenLayout.html)关于调整视图控制器的视图和子视图（容器是）大小的文档。

在您必须尝试我的最后一个解决方案（在下面）或从其他人那里得到答案之前，我的最后一个提示是检查您的架构设置。

![在此处输入图像描述](../Images/c65180e66663d6f896251211d0134592.png)

如果这没有帮助，则可能是由一些难以找到的未知随机错误引起的，我建议您先尝试通过单击/按住“Shift”“command”和“K”来清理项目，如果这不起作用，只需启动一个全新的项目并将所有代码和文件复制到新项目中即可。这应该会有所帮助，因为您所遇到的问题不应该出现，因为它应该自动处理，但有时会出现看似随机的错误。

我希望其中一个提示对您有所帮助，如果没有，我很抱歉。

# java - 在一个 jar 内运行 Junit 测试类，在 jar 外运行 junit

> ID：14537233
> 
> 赞同：9
> 
> 时间：2013-01-26T13:06:54.103
> 
> 标签：java, command-line, jar, junit, executable-jar

[因此，我使用one-jar](http://one-jar.sourceforge.net/)将我的类及其依赖项（apache commons cli）打包在一个 jar 文件中（这很容易做到，请参阅[命令行方法](http://one-jar.sourceforge.net/index.php?page=getting-started&file=quickstart)一节）。现在我很好奇是否可以使用类外的 Junit jar 在 jar 内运行 java 测试类。所以里面的测试类的路径`sw.jar`是：

```
sw.jar\main\sw.jar\uoa\di\ys11\hw2\TestSmithWaterman.class 
```

（这`main\`是一个罐子的东西）。我尝试了以下变化：

```
java -jar -cp lib/junit.jar org.junit.runner.JUnitCore  uoa.di.ys11.hw2.TestSmithWaterman 
```

没有运气 - 那么命令行是什么？还是我需要以某种方式修改单罐清单？

编辑`/boot-manifest.mf`：

```
Manifest-Version: 1.0
Main-Class: com.simontuffs.onejar.Boot
One-Jar-Main-Class: uoa.di.ys11.hw2.Hw2 
```

而`/META-INF/MANIFEST.MF`：

```
Manifest-Version: 1.0
Created-By: 1.7.0_09 (Oracle Corporation)
Main-Class: com.simontuffs.onejar.Boot
One-Jar-Main-Class: uoa.di.ys11.hw2.Hw2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T13:45:55.163

使用以下命令行进行测试

```
java -cp lib/junit.jar;sw.jar org.junit.runner.JUnitCore  uoa.di.ys11.hw2.TestSmithWaterman 
```

**编辑：**

这应该适用于普通罐子，但罐子是由一个罐子创建的

> One-JAR 允许您将 Java 应用程序及其依赖项 Jar 打包到单个可执行 Jar 文件中。

在那之后，junit 就不可能了，因为我在我的案例中提到了 junit-4.4 来加载这些类进行测试。

# scala - 使用 case 语法定义的 Scala PartialFunction 总是在 isDefinedAt 上返回 true

> ID：14537234
> 
> 赞同：2
> 
> 时间：2013-01-26T13:07:29.400
> 
> 标签：scala

我只是在研究 scala，因为大多数人似乎都喜欢它。所以我想我会写 FizzBu​​zz（因为它比 HelloWorld 有趣得多），但我有点卡住了，因为无论我在其中添加什么，如果我`PartialFunction`用匹配/大小写语法定义我的 s，他们的`isDefinedAt`方法似乎总是返回 true . 谁能向我解释我缺少什么（或者这是一个错误？）。我正在使用 Scala 2.10.0 版本。

代码：

```
object Main extends App {
  def applyAndJoin[A, B](f: PartialFunction[A, B],
    g: PartialFunction[A, B])(h: (B, B) => B): PartialFunction[A, B] = {
    PartialFunction[A, B] {
      case a if (f isDefinedAt a) && (g isDefinedAt a) => h(f(a), g(a))
    } orElse f orElse g
  }

  val fizz = PartialFunction[Int, String] { case a if a % 3 == 0 => "Fizz" }
  val buzz = PartialFunction[Int, String] { case a if a % 5 == 0 => "Buzz" }
  val makeString = PartialFunction[Int, String] { case a => a.toString }
  val fizzBuzz = applyAndJoin(fizz, buzz)((a, b) => a + b) orElse makeString
  1 to 100 collect fizzBuzz foreach println //this fails because scala thinks
                                            //that fizz is defined at 1
} 
```

堆栈跟踪：

```
Exception in thread "main" scala.MatchError: 1 (of class java.lang.Integer)
    at Main$$anonfun$1.apply(Main.scala:9)
    at Main$$anonfun$1.apply(Main.scala:9)
    at scala.PartialFunction$$anonfun$apply$1.applyOrElse(PartialFunction.scala:242)
    at scala.runtime.AbstractPartialFunction.apply(AbstractPartialFunction.scala:33)
    at Main$$anonfun$applyAndJoin$1.apply(Main.scala:5)
    at scala.PartialFunction$$anonfun$apply$1.applyOrElse(PartialFunction.scala:242)
    at scala.PartialFunction$OrElse.apply(PartialFunction.scala:162)
    at scala.collection.TraversableLike$$anonfun$collect$1.apply(TraversableLike.scala:278)
    at scala.collection.immutable.Range.foreach(Range.scala:142)
    at scala.collection.TraversableLike$class.collect(TraversableLike.scala:278)
    at scala.collection.AbstractTraversable.collect(Traversable.scala:105)
    at Main$delayedInit$body.apply(Main.scala:13)
    at scala.Function0$class.apply$mcV$sp(Function0.scala:40)
    at scala.runtime.AbstractFunction0.apply$mcV$sp(AbstractFunction0.scala:12)
    at scala.App$$anonfun$main$1.apply(App.scala:71)
    at scala.App$$anonfun$main$1.apply(App.scala:71)
    at scala.collection.immutable.List.foreach(List.scala:309)
    at scala.collection.generic.TraversableForwarder$class.foreach(TraversableForwarder.scala:32)
    at scala.App$class.main(App.scala:71)
    at Main$.main(Main.scala:1)
    at Main.main(Main.scala) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T13:43:16.537

您的 PartialFunction 定义没有按照您的想法进行，您应该编写

```
val fizz: PartialFunction[Int, String] = { case a if a % 3 == 0 => "Fizz" }
val buzz: PartialFunction[Int, String] = { case a if a % 5 == 0 => "Buzz" }
val makeString: PartialFunction[Int, String] = { case a => a.toString } 
```

通过这种方式，您定义了一个类型的变量，`PartialFunction[Int, String]`其值为匿名定义`{ case a if ...}`

* * *

相反，您正在定义一个变量

```
val fizz = ... 
```

使用对`PartialFunction`对象`apply()`方法的调用，在 scala 2.10 中定义为

```
def apply[A, B](f: A => B): PartialFunction[A, B] = { case x => f(x) } 
```

在这种情况下，结果函数`fizz`是为 every 定义的`x`，但是当`f(x)`调用“wrapped”时，会发生错误。

# facebook - 如何强制在 iOS Safari 中打开链接？

> ID：14537235
> 
> 赞同：5
> 
> 时间：2013-01-26T13:07:29.830
> 
> 标签：facebook, ios6, mobile-safari, mime-types, passbook

我的网页有下载 Passbook .pkpass 文件的链接。这在 Safari for iOS 中运行良好，因为 Apple 的浏览器支持 mime 类型：application.com/vnd.apple.pkpass

Facebook 的 iOS 浏览器（以及其他浏览器）（还）不支持这种 mime 类型。因此，如果用户在 Facebook 中点击我网站的链接，他们将无法下载我的 Passbook 文件。但是，如果他们单击“在 Safari 中打开”，则他们可以下载该文件。

如何对我的网页进行编码，以便单击链接将强制在 iOS 上打开 Safari？

安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T14:41:29.257

这些标题应该对您正在做的事情有所帮助。

```
Content-Type "application/force-download"
Content-Description "File Transfer"
Content-Disposition attachment
ForceType "application/octet-stream" 
```

我建议您尝试使用以下代码在 .htaccess 或 httpd.conf 文件中设置它们：

```
<FilesMatch "\.(pkpass)$">
Header set Content-Type "application/force-download"
Header set Content-Description "File Transfer"
Header set Content-Disposition attachment
Header set ForceType "application/octet-stream"
</FilesMatch> 
```

这有点矫枉过正，但可以确保在所有浏览器中强制下载。将 pkpass 更改为其他任何内容以强制下载任何其他文件类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T06:04:50.080

我还没有设法找到一种方法来做到这一点。不知何故，强制 pkpass 下载在 Facebook 移动浏览器中不起作用。

最好的方法是引导用户在 Safari 中打开页面。

# macos - mercurial kdiff3 mac 没有打开

> ID：14537237
> 
> 赞同：1
> 
> 时间：2013-01-26T13:07:34.870
> 
> 标签：macos, mercurial, merge, kdiff3

我在我的新 Mac 上使用 Eclipse 和 mercurial，当我尝试合并时，它给了我一条消息
“1 文件未解析”并且 kdiff3 它没有打开，kdiff3 是默认的合并工具，对吗？如果没有，我该如何配置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:03:40.147

我不确定 Eclipse 是否会介入，但对于 Mercurial 本身而言，默认的合并工具是其内部合并。对于 kdiff3 这似乎对我有用：

*.hgrc*

```
[ui]
merge = macfilemerge

[extensions]
extdiff =

[extdiff]
cmd.difftool = diff-w

[merge-tools]
macfilemerge.executable = diff-w
macfilemerge.args = $base $local $other -o $output 
```

*diff-w*

```
# Piping the output makes the script to wait for diff tool's output
/Applications/kdiff3.app/Contents/MacOS/kdiff3 "$@" | cat 
```

请记住 chmod +x 您的*diff-w*并将其放在您的常用路径中的某个位置。

## 其他合并工具

**文件合并**

*.hgrc*

```
[merge-tools]
macfilemerge.args = $local $other -ancestor $base -merge $output 
```

*diff-w*

```
opendiff "$@" | cat 
```

**P4合并**

*.hgrc*

```
[merge-tools]
macfilemerge.args = $base $local $other $output 
```

*diff-w*

```
/Applications/p4merge.app/Contents/MacOS/p4merge "$@" | cat 
```

# java - Java Swing 日历或组织者

> ID：14537245
> 
> 赞同：0
> 
> 时间：2013-01-26T13:09:11.017
> 
> 标签：java, swing, jar, calendar

我想在`calender`我的`JPanel`. 这样我就可以将任务添加到日期。有你执行的一些 Jar 文件吗？我知道`JCalender`，但它没有`taskadd`.

有人对年表有经验吗？ [下载链接](http://www.filebuzz.com/fileinfo/155703/chronology.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:54:23.220

您可以使用 swingx 库（或 JSpinner）中的 JXDatePicker 和 TextArea/TextBox 和提交 JButton 在单击数据库表或文件中的提交按钮时添加任务。

选择日期后，您可以从 TextArea/JTextField 中的数据库表中加载任务。

# html - 当页面缩小时，绝对 div 的左侧消失

> ID：14537246
> 
> 赞同：0
> 
> 时间：2013-01-26T13:09:12.250
> 
> 标签：html, css

在[http://www.posterlion.com/](http://www.posterlion.com/)上，当您通过浏览器缩小窗口时，左侧会消失。虽然出现了水平滚动条，但我无法通过向左滚动来找到它。内容以绝对 div 为中心。我如何防止这种情况发生？

```
position:relative;left:50%;margin-left:-517px; 
width:1015px; overflow:visible; background-color: #FFFFFF; padding: 10px; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:18:57.887

居中游览布局的最佳做法是使用`margin: 0px auto`绝对定位而不是绝对定位。

在您的情况下，您应该删除绝对定位，创建一些包含所有布局的 div （`<div id='wrapper'></div>`在这种情况下可以是标准的）并将其设置`margin`为`auto`.

经过：

```
#wrapper {
    margin: 0px auto;
    width: yourWidth;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T13:12:07.700

在你给定的**CSS**添加

```
min-width: 1050px; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T13:27:46.433

这是要更新的CSS：-

```
#lwe {
       width: 1015px;
      overflow: visible;
      background-color: #FFFFFF;
     padding: 10px;
     margin: 0 auto; 
```

}

# html - Magento 重复元素 id

> ID：14537247
> 
> 赞同：0
> 
> 时间：2013-01-26T13:09:13.810
> 
> 标签：html, magento, w3c-validation

我正在[http://validator.w3.org/](http://validator.w3.org/)中验证我的商店，但我遇到了一些错误。

看起来功能滑块中的产品和主页上列出的新产品具有相同的 ID。

以下是错误示例：

第 601 行，第 93 列：ID“product-price-16”已定义

```
<span class="regular-price" id="product-price-16"> 
```

“id”是唯一标识符。每次在文档中使用此属性时，它必须具有不同的值。如果您将此属性用作样式表的挂钩，则使用类（对元素进行分组）可能比使用 id（用于标识一个元素）更合适。

第 288 行，第 93 列：ID“product-price-16”首先在此处定义

```
<span class="regular-price" id="product-price-16">` 
```

是否可以从带有前缀的功能滑块定义产品 ID？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:37:45.393

产品价格显示由 JavaScript 使用这些 ID 更新，导致 JavaScript 错误可能导致 JavaScript 表单处理中断，即添加到购物车。呈现这些的模板在许多地方使用。您将希望在功能滑块中为价格设置不同的模板，而不是编辑目录/产品/价格.phtml 模板。

# wordpress - 将 wordpress 从自托管移动到 wp 托管

> ID：14537250
> 
> 赞同：0
> 
> 时间：2013-01-26T13:09:27.503
> 
> 标签：wordpress

我使用自托管 wordpress 有一段时间了，现在我想将所有帖子、设置移动到我的 wordpress.com 帐户。我的意思是我想创建免费的 wordpress 托管帐户并将所有数据从自托管帐户移入其中。那可能吗？如果是，如何？请解释

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T21:54:00.453

威震天，我看过你的一些关于这个黑客的帖子。它是最新的 Wordpress 安装，插件很少。从事情的声音来看（我在这里很可能是错的），我怀疑你自己做了大量的定制，这可能会引入一个漏洞。

这很可能是你的主题，但坦率地说，我的钱花在你的主人身上。Wordpress 是如此多产，以至于当运行许多共享服务器的托管公司被黑客入侵时，不可避免地会有大量的 Wordpress 网站因此而受到损害，而 Wordpress 会受到指责。托管公司当然不拥有它。

在您访问 .com 之前，请切换主机。全新安装，有大量关于恢复 Wordpress 网站的指南——你在其他线程上说过，该网站只有一周的历史，所以很容易做到。我的2p

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T13:12:58.483

虽然这不是通常的移动方向，但 WordPress 已经在此处记录了它：http: [//en.support.wordpress.com/moving-a-blog/](http://en.support.wordpress.com/moving-a-blog/)

# javascript - 防止对隐藏字段进行 spry 验证

> ID：14537251
> 
> 赞同：0
> 
> 时间：2013-01-26T13:09:34.587
> 
> 标签：javascript, jquery, validation, hidden-field, spry

我有一个对某些元素应用了 spry 验证的表单。

在此表单上还有一个下拉菜单，根据所选内容隐藏某些元素。

最初，spry 验证代码位于页面底部，但由于验证的表单字段不再存在，因此无法提交表单。我从以下内容开始：

```
function checkPageType(myType){
    switch (myType) {
            case 'Standard Page':
            $('.slugDiv').show();
            break;
            case 'Borough Menu':
            $('.slugDiv').hide();
            break;
        case 'Area Menu':
            $('.slugDiv').hide();
        case 'Forms Menu':
            $('.slugDiv').hide();
        break;  
        }
    }   
    $('#idptp_sec').change(function() {
        var myVal = $(this).val();
        checkPageType(myVal);
    }); 
```

在我的页面底部

```
<script type = "text/Javascript">
var slug_sec_Spry = new Spry.Widget.ValidationTextField("slug_sec_Spry", "none",{validateOn:["blur"], characterMasking: /^[a-z0-9-]+$/, useCharacterMasking:true});
</script> 
```

我已经尝试将它移到我的函数中，但它仍然不起作用，我猜是因为它可能只有函数范围内吗？

```
function checkPageType(myType){
    switch (myType) {
        case 'Standard Page':
            $('.slugDiv').show();
            var slug_sec_Spry = new Spry.Widget.ValidationTextField("slug_sec_Spry", "none",{validateOn:["blur"], characterMasking: /^[a-z0-9-]+$/, useCharacterMasking:true});
        break;
        case 'Borough Menu':
            $('.slugDiv').hide();
            slug_sec_Spry.destroy();
            slug_sec_Spry= null;
        break;
        case 'Area Menu':
            $('.slugDiv').hide();
            slug_sec_Spry.destroy();
            slug_sec_Spry= null;
        case 'Forms Menu':
            $('.slugDiv').hide();
            slug_sec_Spry.destroy();
            slug_sec_Spry= null;
        break;  
    }
}   
$('#idptp_sec').change(function() {
    var myVal = $(this).val();
    checkPageType(myVal);
}); 
```

那么，如果该字段在页面加载后被隐藏，我该如何防止该字段被验证？

更新：

我一直在尝试在此处找到的其他解决方案： [Spry 验证防止在不可用字段上提交表单](https://stackoverflow.com/questions/7453556/spry-validation-prevents-the-form-submission-on-unavailable-fields?rq=1)

我已将代码更改为：

```
var slug_sec_Spry =  Spry.Widget.ValidationTextField("slug_sec_Spry", "none",{validateOn:["blur"],characterMasking: /^[a-z0-9-]+$/, useCharacterMasking:true});

    function clearValidation(){
    if(slug_sec_Spry){
        slug_sec_Spry.reset();
        slug_sec_Spry.destroy()
    }
}

function reapplyValidation(){
    slug_sec_Spry = new Spry.Widget.ValidationTextField("slug_sec_Spry", "none",{validateOn:["blur"],characterMasking: /^[a-z0-9-]+$/, useCharacterMasking:true});
}
    function checkPageType(myType){
        switch (myType) {
            case 'Standard Page':
                $('.slugDiv').show();
                reapplyValidation()
            break;
            case 'Borough Menu':
                $('.slugDiv').hide();
                clearValidation()
            break;
            case 'Area Menu':
                $('.slugDiv').hide();
                clearValidation()
            case 'Forms Menu':
                $('.slugDiv').hide();
                clearValidation()
            break;  
        }
    }   
    $('#idptp_sec').change(function() {
        var myVal = $(this).val();
        checkPageType(myVal);
    }); 
```

但它们会产生 TypeError：`this.isBrowserSupported is not a function`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:09:47.270

现在工作，只需要一些错误检查代码在那里......

```
<script type="text/javascript">
$(document).ready(function() {
    var  isHidden = false;

    function clearValidation(){
        slug_sec_Spry.reset();
        slug_sec_Spry.destroy();
        $('.slugDiv').hide();
        isHidden = true;

    }
    function reapplyValidation(){
        $('.slugDiv').show();
        slug_sec_Spry = new Spry.Widget.ValidationTextField("slug_sec_Spry", "none",{validateOn:["blur"], characterMasking: /^[a-z0-9-]+$/, useCharacterMasking:true});
        isHidden = false;
    }
    function checkPageType(myType){
        switch (myType) {
            case 'Standard Page':
                if(isHidden == true){
                    reapplyValidation();
                }

            break;
            case 'Borough Menu':
                if(isHidden == false){
                    clearValidation()
                }
            break;
            case 'Area Menu':     
                if(isHidden == false){
                    clearValidation()
                }
            case 'Forms Menu':
                if(isHidden == false){
                    clearValidation()
                }
            break;  
        }
    }   
    $('#idptp_sec').change(function() {
        var myVal = $(this).val();
        checkPageType(myVal);
    });
    //perform initial check
    var initVal = $('#idptp_sec').val();
    checkPageType(initVal);
});
</script> 
```

# spotify - 嵌入式 Spotify 播放列表不适用于移动设备

> ID：14537252
> 
> 赞同：0
> 
> 时间：2013-01-26T13:09:51.647
> 
> 标签：spotify, playlist

我的网站中嵌入了播放列表。

当我从台式机/笔记本电脑上的浏览器单击播放列表时，它会生成 Spotify 应用程序并开始播放播放列表。当我从移动浏览器执行此操作时，它会生成 Spotify，但不会加载播放列表，只会加载您单击的歌曲。队列成为包含您单击的歌曲的专辑。播放列表似乎没有加载。我以为我之前已经对此进行了测试，并且确实有效。

这是嵌入代码：

```
<iframe 
  src="https://embed.spotify.com/?uri=spotify:user:brucemciccone:playlist:6gabGbGL7ckAE3wXkt62AB" 
  width="300" height="380" frameborder="0" allowtransparency="true"></iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:58:58.460

您没有指定您使用的是哪种移动设备，但我相当肯定这正如您从一开始就在 iOS 上描述的那样有效。不太确定Android，但它可能是一样的。

# c# - 哪个事件处理程序的实现可以提供更高的性能？

> ID：14537255
> 
> 赞同：0
> 
> 时间：2013-01-26T13:10:03.963
> 
> 标签：c#, performance, event-handling

我对 2 个文本框使用了相同的`TextChanged`事件处理程序，所以它们是否有任何性能改进，或者只是可读性问题？

**方法一**

```
private void txtcode_TextChanged(object sender, EventArgs e)
        {
        //Some code
        }
private void txtname_TextChanged(object sender, EventArgs e)
        {
        //Some code
        } 
```

**方法二**

```
private void txt_TextChanged(object sender, EventArgs e)
    {
        TextBox txtbx = (TextBox)sender;
        switch (txtbx.Name)
        {
            case "txtname":
                //Some code
                break;

            case "txtcode":
                //Some code
                break;

            default:
                break;
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T13:12:26.847

### 方法一

会更好，因为他们是直接的并且知道他们也在响应控制

关于

### 方法二

每次将 sender(object) 强制转换为 TextBox，然后 switch 语句决定控件上的操作。

所以很明显，`Method1`会更有效

* * *

也看看这些链接：[铸造有多昂贵](https://stackoverflow.com/questions/1923882/how-expensive-is-casting-an-object)，类型转换的[性能](https://stackoverflow.com/questions/1165602/performance-of-typecasting)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T13:15:31.060

理论上，第一种方法更快。实际上，您不会注意到任何差异。如果您的处理程序共享大量代码，则使用 a`switch`是减少代码重复的完全可接受的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T20:17:27.073

性能没有区别！！！！！！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T13:17:12.553

没有性能差异。如果两个文本框有一些共同的功能或应该以相同的方式检查，那么为两个文本框设置一个处理程序也没有错。您可以改进的是 - 不要通过字符串名称检查文本框，最好使用它们的变量名称，例如：

```
if(txtbx.Equals(txtcode))
     //... 
```

如果您稍后重构代码，它将为您节省很多时间:)

# web-services - 有WSDL，需要生成服务（分步说明）

> ID：14537266
> 
> 赞同：0
> 
> 时间：2013-01-26T13:11:41.957
> 
> 标签：web-services, jax-ws, spring-ws

有关从 WSDL 创建服务和部署到 JBoss 的任何文档？我在网上找到了几个，努力选择正确/最佳的方法。使用弹簧也可以。

我根据我的要求从 Eclipse 创建了 WSDL。现在，我如何从 WSDL 生成请求/响应？然后存根。如果它可以简化事情，我也可以使用 Intellij。

我确实生成了一个服务，但我必须在部署之前从我的 ear 文件中删除这么多 jar 文件（与 jboss 相关）以使其工作。生成 ear 文件的任何帮助也会有所帮助。

JDK 1.6；JBoss 5.1；Eclipse Indigo 或 Intellij Idea (11.1.4)

我知道这个问题已经被问过好几次了，但是当我提到网络上的大量信息时，我对几种方法感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:25:26.267

如果您使用的是 Maven，则可以使用[jaxws-maven-plugin](http://jax-ws-commons.java.net/jaxws-maven-plugin/)生成工件。您可以在此处找到一个简单的 Maven 项目，用于从 WSDL 生成工件[（wsimport）](https://github.com/nazartm/quickstarts)

一步步：

1.  从您的 WSDL 生成 Java 工件。（使用[wsimport](http://docs.oracle.com/javase/6/docs/technotes/tools/share/wsimport.html)工具或 Maven 插件）
2.  实现生成的服务端点接口。
3.  部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:09:49.313

如果您想从 Spring-WS 开始，显而易见的起点是[文档](http://static.springsource.org/spring-ws/site/reference/html/tutorial.html)。您可能想要使用像 JAXB 这样的编组框架来生成基于您的 WSDL 的类。基于这些类，您可以创建`@Endpoint`带注释的类。在这样的端点中，您可以创建带有注释的方法`@PayloadRoot`-`@RequestPayLoad`基于该组合，它将映射到 WSDL 中的特定操作。查看文档中的[此页面](http://static.springsource.org/spring-ws/site/reference/html/server.html#server-atEndpoint-methods)以获取有关注释方法的更多信息。

# android - 在android中解析没有标题对象的json

> ID：14537272
> 
> 赞同：0
> 
> 时间：2013-01-26T13:12:41.057
> 
> 标签：android, xml, json, api, rest

我有这个json：`{"id":1,"name":"john smith"}`

我如何解析它？我知道我必须用这个功能做到这一点：

```
public static String parseJSONResponse(String jsonResponse) {
    String name = "";
    JSONObject json;
    try {
        json = new JSONObject(jsonResponse);
        JSONObject result = json.getJSONObject("**********");
        name = result.getString("**********");

    } catch (JSONException e) {

        e.printStackTrace();
    }

    return name;
} 
```

但我不知道我可以在带有“ ***** ***** ”的区域放置什么。请帮我

我只想获取`id`和`name`值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:14:31.477

将当前 json 字符串解析为：

```
json = new JSONObject(jsonResponse);
// get name here
name = json.getString("name");

// get id here
id = json.getString("id"); 
```

因为当前的 json 字符串只包含一个 jsonObject

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T13:19:02.660

使用此方法解析您的 JSON 字符串

```
public static String parseJSONResponse(String jsonResponse) {

    try {

         JSONObject  json = new JSONObject(jsonResponse);

           // get name & id here
         String  name = json.getString("name");
         int id =  json.getInt("id"); 

    } catch (JSONException e) {

        e.printStackTrace();
    }

    return name;
} 
```

更多请参考此[链接](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

# wordpress - WordPress：小部件复选框选项不存储状态

> ID：14537276
> 
> 赞同：0
> 
> 时间：2013-01-26T13:13:17.843
> 
> 标签：wordpress, checkbox

我无法保持 Wordpress Widget 选项复选框的状态。这是我的代码

```
<label for="<?php echo $this->get_field_id('display_name'); ?>"><input
type="checkbox"
id="<?php echo $this->get_field_id('display_name'); ?>"
name="<?php echo $this->get_field_name('display_name'); ?>"
<?php checked(isset($display_name) ? $display_name : 0); ?> /> Display name</label> 
```

另外我想知道如何使用多个复选框组来存储和检索数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T13:25:24.543

Okay found the easy solution

Instead of `$display_name` in checked I simply changed to `1` and it works :)

Before:

```
<?php checked(isset($display_name) ? $display_name : 0); ?> 
```

After:

```
<?php checked(isset($display_name) ? 1 : 0); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T20:52:44.800

我不知道为什么，但这个答案对我不起作用，在查看了[check() 文档](http://codex.wordpress.org/Function_Reference/checked)后，我试图遵循其中一些示例，但没有运气。所以最终我得到了这个简单的片段（只是普通的 php），它按预期工作。

```
<?php echo $checked = ($display_name=== "on") ? "checked" : ""; ?> 
```

# sql - SQL 代替触发器

> ID：14537280
> 
> 赞同：2
> 
> 时间：2013-01-26T13:13:46.407
> 
> 标签：sql, sqlite, triggers, views

我有这些表：

*   电影（mID、片名、年份、导演）
*   审稿人（rID，姓名）
*   评级（rID、mID、星数、ratingDate）

和一些观点：

*   视图`LateRating`包含 2011 年 1 月 20 日之后的电影评分。视图包含电影 ID、电影名称、星数和评分日期。

    ```
    create view LateRating as 
      select distinct R.mID, title, stars, ratingDate 
      from Rating R, Movie M 
      where R.mID = M.mID 
      and ratingDate > '2011-01-20' 
    ```

*   视图`HighlyRated`包含至少有 1 个评分高于 3 星的电影。该视图包含电影 ID 和电影标题。

    ```
    create view HighlyRated as 
      select mID, title 
      from Movie 
      where mID in (select mID from Rating where stars > 3) 
    ```

*   View`NoRating`包含数据库中没有评分的电影。该视图包含电影 ID 和电影标题。

    ```
    create view NoRating as 
      select mID, title 
      from Movie 
      where mID not in (select mID from Rating) 
    ```

这是我的数据集：[http ://dfiles.eu/files/vlylwacdd](http://dfiles.eu/files/vlylwacdd)

我被要求编写一个代替触发器来更新视图 LateRating 的标题属性。我该怎么做？我不习惯触发和查看太多:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:34:07.937

像这样的东西：

```
CREATE trigger update_LateRating_title INSTEAD OF UPDATE OF title ON LateRating
BEGIN
  UPDATE Movie SET title = new.title WHERE movie.mID = old.mID;
END; 
```

根据评论中的要求，这是一个触发器，用于仅更新 LateRating 中评论大于 2 的电影：

```
CREATE trigger update_LateRating_title INSTEAD OF 
UPDATE OF title ON LateRating
BEGIN
  UPDATE Movie SET title = new.title 
  WHERE movie.mID = old.mID 
  AND movie.mID IN (SELECT mID FROM LateRating WHERE stars > 2);
END; 
```

（有不同的方式来解释这个后来的请求。应该允许在某处有超过 2 星的*电影更新标题，还是只允许实际有超过 2 星的**记录*更新？我的代码是前一种选择）。

# asp.net - 下拉列表在数据列表中的 onedit 命令中始终为空

> ID：14537283
> 
> 赞同：0
> 
> 时间：2013-01-26T13:14:02.337
> 
> 标签：asp.net, drop-down-menu, datalist

我是 asp.net 的新手，试图使用 datalist 控件。

在edititemtemplate 部分，我设置了一个下拉列表控件。它有它的价值。我想要的是在编辑模式下选择一个值，但是当我进入事件（在 oneditcommand 中设置）时，我的代码无法找到下拉列表，尽管它在 edititemtemplate 中。请在下面检查我的代码

```
DropDownList ddl = e.Item.FindControl("ddlType") as DropDownList; 
ddl.Items.FindByValue((e.Item.FindControl("lblType") as Label).Text).Selected = true; 
```

我做错了什么？

谢谢

-导航

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T13:23:03.760

take a look at [this link](https://stackoverflow.com/questions/3626564/asp-net-accessing-web-control-inside-datalist-control). Typically, you access controls like this at runtime by handling either the DataList's ItemCreated or ItemDataBound event.

# java - WEB-INF内部的Spring多级url映射

> ID：14537285
> 
> 赞同：0
> 
> 时间：2013-01-26T13:14:14.987
> 
> 标签：java, spring, spring-mvc

我有以下用户控制器：

```
@RequestMapping("/user")
public class UserController {

    private static final String ID = "id";

    private final Log logger = LogFactory.getLog(getClass());

    private UserManager um;

    @Autowired
    public void setUserManager(UserManager userManager) {
        this.um = userManager;
    }

    @RequestMapping(method = RequestMethod.GET)
    public ModelAndView showUser(HttpServletRequest request) {
        User user = null;

        String id = (String) request.getParameter(ID);
        if (id == null) {
            String message = "Cannot find user id";
            logger.error(message);
            return new ModelAndView("WEB-INF/jsp/error.jsp", "message", message);
        }
        try {
            user = (User) um.getUserByUserId(Integer.parseInt(id));
        } catch (Exception e) {
            String message = "Cannot find user with id: " + id;
            logger.error(message);
            return new ModelAndView("WEB-INF/jsp/error.jsp", "message", message);
        }

        logger.info("Returning user view for user id: " + id);
        return new ModelAndView("WEB-INF/jsp/user.jsp", "user", user);
    }

    @RequestMapping(value = "/new", method = RequestMethod.GET)
    public ModelAndView getNewUserForm(Model model) {
        logger.info("Get new user form");
        return new ModelAndView("WEB-INF/jsp/userForm.jsp", "user", new User());
    } 
```

我所有的视图文件都在 WEB-INF/jsp/

当我尝试转到页面时：localhost:8080/myapp/user.htm 一切正常，但是当我尝试转到：localhost:8080/myapp/user/new.htm 时出现错误 404 找不到页面。

更重要的是，因为我看到了日志，所以执行了这段代码：

```
@RequestMapping(value = "/new", method = RequestMethod.GET)
        public ModelAndView getNewUserForm(Model model) {
            logger.info("Get new user form");
            return new ModelAndView("WEB-INF/jsp/userForm.jsp", "user", new User());
        } 
```

在 404 错误页面上是信息：/myapp/user/WEB-INF/userForm.jsp not foud

这是我的问题。如何将其更改为： /myapp/WEB-INF/userForm.jsp ？我应该如何处理我的请求映射？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T13:35:27.880

查看有关控制器和返回类型的 Spring[文档。](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-ann-requestmapping-arguments)那里有很好的示例，您可以看到可以使用控制器方法的多种方式。

在您的情况下，您不需要指定视图的完整路径。只是视图名称就可以了。

```
@RequestMapping(value = "/new", method = RequestMethod.GET)
public ModelAndView getNewUserForm(Model model) {
    logger.info("Get new user form");

    return new ModelAndView("userForm", "user", new User());
} 
```

你甚至可以这样做。Spring 允许许多可能性。文档概述了所有这些：

```
@RequestMapping(value = "/new", method = RequestMethod.GET)
public String getNewUserForm(Model model) {
    logger.info("Get new user form");
    model.addAttribute("user", new User());
    return "userForm";
} 
```

此外，请确保您已配置[View Resolver](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-viewresolver)。您可以从文档中看到您将需要这样的东西。

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
    <property name="prefix" value="/WEB-INF/jsp/"/>
    <property name="suffix" value=".jsp"/>
</bean> 
```

# c - c语言中的事件驱动设计

> ID：14537286
> 
> 赞同：11
> 
> 时间：2013-01-26T13:14:17.530
> 
> 标签：c, events, event-driven-design

这是一个小小的理论问题。想象一个装满传感器的设备。现在，如果传感器 x 检测到某些东西，应该会发生一些事情。同时，如果检测到其他东西，比如两个传感器检测到两个不同的东西，那么这个设备的行为必须不同。

从 webdesign (so javascript) 我了解了事件，例如 (使用 jquery)`$(".x").on("click", function(){})`或从 angularjs `$scope.watch("name_of_var", function())`。

是否有可能在不使用复杂库的情况下在 C 中复制这种行为？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T14:30:46.953

我能想到的一个系统是订阅者通知模型。您可能有一些东西可以处理您的传感器（例如，一个线程对其进行轮询以查看是否发生了某些事情）。当它检测到某些东西时，任务应该提出一种机制以让外部世界知道：这就是**通知**过程。
另一方面，只有对您的传感器感兴趣的人才会收到通知，因此，这里应该有一个**订阅**方法来处理这个问题。

现在，困难的部分来了。当传感器处理程序通知世界时，它*不能*花太多时间这样做，否则它可能会错过其他事件。因此，必须有一个专门用于通知过程的任务（或线程）。另一方面，订阅者希望在收到此类通知事件时更新他们的一些数据。这显然是一个异步过程，因此订阅者必须向通知线程提供**回调**。
最后，您应该使用时间戳标记您的事件，这样接收者将知道他们收到的事件是否已过时以及是否应该丢弃它。
最后的事情可能看起来像下面的代码：

* * *

## 数据结构

```
/*
 * Some data structures to begin with
 */
struct event;
struct notifier;
struct subscription;
struct notify_sched;

typedef int (*notify_cbck)(struct event *evt, void *private);
/*
 *@type : a value to show the type of event
 *@t : the timestamp of the event
 *@value : a pointer towards the event data
 */
struct event {
    int type;
    struct timeval t; // the timestamp
    void *value;
};

/*
 * @type : the type in which the subscriber is interested
 * @cb : the callback that should be run when an event occur
 * @cb_data : the data to provide to the callback
 * @next,prev : doubly-linked list
 */
struct subscription {
    int type;
    notify_cbck cb;
    void *cb_data;
    struct subscription *next, *prev;
};

/*
 * This structure gathers the subscriptions of a given type.
 * @type : the event type
 * @subs : the subscription list
 * @mutex : a mutex to protect the list while inserting/removing subscriptions
 * @next,prev : link to other typed subscriptions
 */

struct typed_subscription {
    int type;
    struct subscription *subs;
    mutex_t mutex;
    struct typed_subscription *next, *prev;
};

/*
 * @magic : the ID of the event producer
 * @t_subs : the typed_subscription list
 * @mutex : a mutex to protect data when (un)registering new types to the producer
 * @next, prev : doubly-linked list ...
 */
struct notifier {
    int magic;
    struct typed_subscription *t_subs;
    mutex_t mutex;
    struct notifier *next, *prev;
};

/*
 * @ntf : the notifiers list
 * @mutex : a mutex to protect the ntf list
 * @th : something to identify the task that hosts the scheduler
 */
struct notify_sched {
    struct notifier *ntf;
    mutex_t mutex;
    pthread_t th; // I assume it's a classic pthread in this example.
}; 
```

* * *

我现在没有时间完成我的答案，稍后我将对其进行编辑，为您提供完整的示例。但是从数据结构开始，你应该得到一些想法。无论如何，希望这有点帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T13:43:53.100

我假设您拥有一个嵌入式系统，可以在单独的线程中访问中断或主要事件循环，否则这是不可能的..

事件处理的基本模型在这里：

```
#define NOEVENT 0

typedef void *(*EventHandler)(void *);

void *doNothing(void *p){/*do nothing absolutely*/ return NULL; }
typedef struct _event{
  EventHandler handler;
}Event, *PEvent;

Event AllEvents[1000];
unsigned short counter = 0;
void InitEvents()
{
    LOCK(AllEvents);
    for(int i = 0; i < 1000; i++){ 
        AllEvents[i].handler = doNothing;
    }
    UNLOCK(AllEvents);
}
void AddEvent(int EventType, EventHandler ev_handler)
{
    LOCK(AllEvents);
    AllEvents[EventType].handler = ev_handler;
    UNLOCK(AllEvents);
}

void RemoveEvent(int EventType, EventHandler ev_handler)
{
   LOCK(AllEvents);
   AllEvents[EventType] = doNothing;
   UNLOCK(AllEvents); /*to safeguard the event loop*/
}

/*to be run in separate thread*/
void EventLoop()
{
   int event = NOEVENT;
   EventHandler handler;
   while(1){
       while(event == NOEVENT)event=GetEvents();
       handler = AllEvents[event].handler;
       handler();/*perform on an event*/
  }
} 
```

对不起，如果这有点天真..但这是我目前能想到的最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T14:05:19.410

对于事件，您需要事件循环，它检测实际事件（例如，来自网络的数据）发生，然后生成软件事件结构并调用适当的事件处理程序，或者在更复杂的系统中，事件处理程序链，直到处理程序标记事件被接受。如果没有处理程序，或者没有注册的处理程序接受事件，则忽略事件。

事件循环通常在一个库中，除了库本身可能产生的任何事件之外，它还具有应用程序的 API 以具有事件处理程序，并发送应用程序特定的事件。基于事件的应用程序的一个问题是，使用两个都希望拥有自己的事件循环的库通常很复杂，除非库开发人员特别注意允许使用除库自己之外的其他事件循环。

除非它是一个非常低级别的实时系统，否则事件循环不做忙等待是至关重要的。在 Linux/Unix/Posix 代码中，事件循环通常围绕 select() 或 poll() 系统函数工作。当没有事件时，事件循环调用此函数，超时匹配下一个定时器事件的时间（如果有定时器事件）。除了超时，如果任何指定的文件句柄（通常是网络或 IPC 套接字）准备好进行读/写/错误，以及是否存在未以其他方式处理的中断，select()/poll() 也会返回. 然后事件循环代码检查函数返回的原因，生成和分发必要的事件，当一切都完成后，再次调用 select()/poll() 函数。

在基于事件的系统中同样重要的是，事件处理程序不能阻塞，因为它是由事件循环调用的函数，所以事件循环不会在后台某处继续，处理程序函数调用是事件循环的一部分。因此处理函数必须只处理可用数据，最好是快速处理，然后存储必要的状态以便稍后继续，并返回以等待下一个事件。对于必须阻塞的操作，必须启动另一个线程。同样对于长计算，必须将计算切成小块以允许事件循环也运行，或者必须在另一个线程中进行计算。GUI 应用程序标题栏中烦人的“无响应”通常意味着：应用程序程序员懒惰/无能并阻塞了事件循环，因此它无法对操作系统事件做出反应。

所以，是的，使用 C 构建基于事件的系统非常容易。只需有一个带有 select()/poll() 的循环，定义事件类型，为事件创建数据结构，并有一个函数指针列表对于每个事件类型，使用新的事件结构作为参数调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-28T16:01:43.830

因为我找到了这条消息，但我并没有完全找到我的解决方案，所以我根据[https://prdeving.wordpress.com/2017/04/03/event-driven-programming-with-c-89/](https://prdeving.wordpress.com/2017/04/03/event-driven-programming-with-c-89/)在此处发布我的代码为他人。

事件.h

```
typedef struct s_Arguments {
    char *name;
    int value;
} Arguments; // Treat this as you please

typedef struct s_Event {
    char *name;
    Arguments args;
} Event;

typedef struct {
    char *name;
    void (*handler)(void*);
} Handler;

struct s_EventContainer {
    int *exitFlag;
    Event *poll;
    Handler *listeners;
    void (*registerEvent)(char *name, void*);
    void (*emit)(char *name, Arguments args);
    int listenersc;
    int pollc;
};

struct s_EventContainer eventContainer;

void _registerEvent(char *name, void*);
void _emitEvent(char *name, Arguments args);

void popPoll();

void find_and_exec_handler_in_listeners(char *name, Arguments *args);

void * fn_eventsDigest(void * p_Data);

void *testFired(Arguments *args); 
```

事件.c

```
#include "event.h"

int BLOCK_POP, BLOCK_EMIT;

void _registerEvent(char *name, void *cb) {
    LOG("_registerEvent '%s'", name);
    if (!eventContainer.listeners) eventContainer.listeners = malloc(sizeof(Handler));    
    Handler listener = {name, cb};  
    eventContainer.listeners[eventContainer.listenersc] = listener;  
    eventContainer.listenersc++;  
    eventContainer.listeners = realloc(eventContainer.listeners, sizeof(Handler) * (eventContainer.listenersc+1));  
}

void _emitEvent(char *name, Arguments args) {
    LOG("Emit event '%s' with args value %d", name, args.value);
    while(BLOCK_EMIT) asm("nop");
    BLOCK_POP = 1;
    if (!eventContainer.poll) eventContainer.poll = malloc(sizeof(Event));    
    Event poll = {name, args};  
    eventContainer.poll[eventContainer.pollc] = poll;  
    eventContainer.pollc++;  
    eventContainer.poll = realloc(eventContainer.poll, sizeof(Event) * (eventContainer.pollc+1));  
    BLOCK_POP = 0;
}

void popPoll(){
    int* temp = malloc((eventContainer.pollc - 1) * sizeof(Event));
    memcpy(temp, eventContainer.poll+1, (eventContainer.pollc - 1) * sizeof(Event));
    eventContainer.pollc -= 1;
    eventContainer.poll = realloc(eventContainer.poll, eventContainer.pollc * sizeof(Event) + sizeof(Event));
    memcpy(eventContainer.poll, temp, eventContainer.pollc * sizeof(Event));
    temp = NULL;
}

void find_and_exec_handler_in_listeners(char *name, Arguments *args){
    int i;
    for (i=0; i < eventContainer.listenersc; i++) {
        if (strcmp(eventContainer.listeners[i].name, name ) == 0 ) {
            (*eventContainer.listeners[i].handler)(args);
        }
    }
}

void * fn_eventsDigest(void * p_Data) {
    struct s_EventContainer *eventContainer = (struct s_EventContainer *)p_Data;

    BLOCK_POP = 0;
    BLOCK_EMIT = 0;

    while(*(eventContainer->exitFlag) == 0) {
        if ( eventContainer->pollc > 0 && BLOCK_POP == 0) {
            BLOCK_EMIT = 1;
            Event ev = eventContainer->poll[0];
            find_and_exec_handler_in_listeners(ev.name, &ev.args);
            popPoll(); 
            BLOCK_EMIT = 0;
        }
    usleep(1*1000);
    }
    printf("Event Loop::exiting...\r\n"); fflush(stdout);
}

void *testFired(Arguments *args) {
    LOG("test event fired with value %d \r\n", args->value);
} 
```

主程序

```
#include "event.h"
#include <pthread.h>

struct s_EventContainer eventContainer = {
    &Data.exitFlag, //exit loop
    NULL, //poll
    NULL, //listeners
    _registerEvent,
    _emitEvent,
    0,
    0
};

pthread_t events_thread;

int main(int argc, char** argv) {

    eventContainer.registerEvent("test", &testFired);

    int ret = pthread_create (&events_thread, NULL, fn_eventsDigest, &eventContainer);
    if (ret) {
        fprintf (stderr, "%s", strerror (ret));
    }
    pthread_setname_np(events_thread,"events_thread");

    //....
    sleep(2);
    Arguments args;
    args.name = "test";
    args.value = 10;
    eventContainer.emit("test", args);

    pthread_join (events_thread, NULL);
    return (EXIT_SUCCESS);
} 
```

我愿意接受建议。

# iis - IIs 7 管理服务

> ID：14537288
> 
> 赞同：0
> 
> 时间：2013-01-26T13:14:27.740
> 
> 标签：iis, windows-7, iis-7

我的办公室有一个站点，我想在家远程管理。在互联网上搜索说我必须在管理服务中启用某些东西。

在我的 IIS 中不存在**管理服务**

怎么可能安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T08:20:57.127

在对同一问题进行了几个小时的研究后，我可以告诉您指定的功能在 Windows 的“客户端”版本（即 Windows 7）中不可用。

# singleton - 在我的游戏引擎设计中使用单例有什么不好的副作用

> ID：14537290
> 
> 赞同：0
> 
> 时间：2013-01-26T13:14:46.733
> 
> 标签：singleton, game-engine

是的，我承认这是同一个老问题，但我曾经在我的游戏引擎（如果它算一个）设计中大量应用这种模式。

我注意到在这个问题 http://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons 中，Jim Burger 给出了他的答案，是的，我的代码确实是紧密耦合的，但是我在哪里申请单例是我的引擎中使用的管理器，例如，管理各种图像、音频和数据的资源管理器。我可以在我的代码“ResourceManager.getInstance().getImageAndCacheIt("someimage"); ”中的任何地方请求资源，所以在我的引擎之上，游戏逻辑代码与之紧密耦合。

你的代码很常见吗？有更好的解决方案吗？

而且我曾经认为Android Activity使用的一些类是单例的，但是在深入研究源代码后，我发现它们竟然不是，它们是通过一些配置懒惰地实例化的，我应该改用这种方法吗？

能否请您告诉我您的一些引擎设计经验，我需要哪些子系统，您是使用可视化树还是直接逐行绘制元素？

顺便问一下，你用什么语言来制作 3d 视频游戏，java 或 c++ 之类的，现在我正在研究 java/opengl es

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T13:24:26.107

A common alternative to singletons is to use Dependency Injection.

# objective-c - 可可：创建油画颜料/水刷

> ID：14537292
> 
> 赞同：0
> 
> 时间：2013-01-26T13:15:00.117
> 
> 标签：objective-c, cocoa, brushes

根据我的项目要求，我想创建一个画笔，它会给我像油画/水画一样的效果。请找到它的附加快照。我从 Microsoft Paint Application 中截取了这张快照。Microsoft Paint 提供了不同的画笔，其中之一是油刷。

经过敏锐的观察，我注意到 microsoft paint 中使用的完整图案是硬编码的。对于每一次冲程（任何颜色），它都会重复。

我的要求是灵活的，我可以实现固定的画笔样式，也可以是随机图案。

我想知道，使用哪个 API 以使我的实心填充线看起来像油画或水彩画。

我创建了一个示例应用程序，它使用 NSBezierPath 来绘制路径，但 NSBezierPath 没有任何功能可以使用它来提供这样的效果。

问候奥姆卡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:31:27.067

我使用 NSColor 类 API 解决了它

```
NSImage* anImage; // Create an image with any brush pattern
[[NSColor colorWithPatternImage:anImage] 
```

我用在 MS Paint 应用程序中创建的油画笔图案创建了一个 25x25 的小图像，并提供了 anImage 对象的路径。

在绘制 NSBezierPath 之前的 drawRect 中，我使用上面的图像对象设置了颜色。

# wordpress - Wordpress 多站点 URL 重定向

> ID：14537293
> 
> 赞同：0
> 
> 时间：2013-01-26T13:15:05.003
> 
> 标签：wordpress, url, redirect

我在多站点设置中有几个不同的站点，并且希望每个站点都有不同的 URL。

该网站目前托管在

```
http://54.241.13.224/ 
```

（运行 Apache2 的 Ubuntu 12.04）我想要域名

```
http://www.formidableapps.co.uk 
```

指向多站点

```
http://54.241.13.224/formidableapps/ 
```

我曾尝试寻求一些帮助，并对 .htaccess 和 virtualhosts 文件进行了一些尝试，但到目前为止还没有任何运气。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T13:55:26.933

你试过使用这个插件吗？

[http://wordpress.org/extend/plugins/wordpress-mu-domain-mapping/](http://wordpress.org/extend/plugins/wordpress-mu-domain-mapping/)

它描述了你需要的东西......

# java - JasperViewer - 如何设置文件名和设置扩展名（格式）？

> ID：14537299
> 
> 赞同：1
> 
> 时间：2013-01-26T13:15:57.170
> 
> 标签：java, jasper-reports

我正在使用*Swing*框架和*JasperReports开发基于**Java*桌面的应用程序进行报告。***当JasperViewer***出现并且我想保存报告时，我遇到了一些问题。

 ***如何在保存对话框中设置文件名（默认为空白）以及如何仅限制*Pdf*格式？

这是我的代码：

```
JRBeanCollectionDataSource beanCollection=new JRBeanCollectionDataSource(matakuliahs);

Map<String,Object> map=new HashMap<String, Object>();
map.put("namaMahasiswa", mahasiswa.getNama());

InputStream input=getClass().getResourceAsStream("/reportsederhana/reportsederhana.jrxml");
JasperDesign design=JRXmlLoader.load(input);
JasperReport report=JasperCompileManager.compileReport(design);
JasperPrint jasperPrint=JasperFillManager.fillReport(report, map, beanCollection);
jasperPrint.setName("Laporan "+mahasiswa.getNama()); // it doesn't give the name
JasperViewer.viewReport(jasperPrint,false); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:36:13.827

为了设置要保存到的默认扩展，一个想法是您需要以某种方式`JRViewer`从`JasperViewer`（实例）获取实例，然后在 void`JRViewer`实例上，您可以设置一些保存贡献。看看[`JRViewer.setSaveContributors(JRSaveContributor[] saveContribs)`](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/view/JRViewer.html#setSaveContributors%28net.sf.jasperreports.view.JRSaveContributor%5B%5D%29)。

对于设置文件名，我不完全确定，但看看[`JRViewer.JRViewer(String, boolean)`](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/view/JRViewer.html#JRViewer%28java.lang.String,%20boolean%29).

还要检查[JRViewer](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/view/JRViewer.html)和[JasperViewer](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/view/JasperViewer.html)源代码，它可能会派上用场。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-05T05:15:30.460

这是一个旧帖子，但我遇到了同样的问题......

我从 net.sf.jasperreports.view.JRViewer 扩展了我的查看器组件。经过一些代码审查后，我发现只能控制“lastFolder”，而不能从外部控制文件名。因此，如果尚未设置上次使用的文件夹，则可以通过以下方式设置：

```
 if (lastFolder == null) {
        this.lastFolder = new File(System.getProperty("user.home"));
    } 
```

但是，这就是提示：工具栏的所有按钮都是公共字段！

因此，对于我的解决方案，我删除了保存按钮 (btnSave) 的所有 ActionListener：

```
 for (ActionListener actionListener : this.btnSave.getActionListeners()) {
        this.btnSave.removeActionListener(actionListener);
    } 
```

然后添加了我自己的实现。它和原来的很像，只是我根据报告名称和当前时间戳来控制文件名。

```
... 
File file = new File(lastFolder.getPath() + System.getProperty("file.separator") + DateTime.now().toString() + "_" + jasperPrint.getName());
... 
```

此外，我将预选的文件扩展名从 .jasperprint 设置为 .pdf，这样更方便。

```
...
fileChooser.setFileFilter((FileFilter) saveContributors.get(1));
... 
```

完整的 ActionListener 代码如下：

```
 this.btnSave.addActionListener(new AbstractAction() {
        @Override
        public void actionPerformed(ActionEvent e) {
            JFileChooser fileChooser = new JFileChooser();
            fileChooser.setLocale(getLocale());
            fileChooser.updateUI();
            File file = new File(lastFolder.getPath() + System.getProperty("file.separator") + DateTime.now().toString() + "_" + jasperPrint.getName());
            fileChooser.setSelectedFile(file);
            for (int i = 0; i < saveContributors.size(); i++)
                fileChooser.addChoosableFileFilter((FileFilter) saveContributors.get(i));

            if (saveContributors.contains(lastSaveContributor))
                fileChooser.setFileFilter(lastSaveContributor);
            else if (saveContributors.size() > 1)
                fileChooser.setFileFilter((FileFilter) saveContributors.get(1));
            if (lastFolder != null)
                fileChooser.setCurrentDirectory(lastFolder);
            int retValue = fileChooser.showSaveDialog(JasperViewer.this);
            if (retValue == 0) {
                FileFilter fileFilter = fileChooser.getFileFilter();
                file = fileChooser.getSelectedFile();
                lastFolder = file.getParentFile();
                JRSaveContributor contributor = null;
                if (fileFilter instanceof JRSaveContributor) {
                    contributor = (JRSaveContributor) fileFilter;
                } else {
                    int i = 0;
                    do {
                        if (contributor != null || i >= saveContributors.size())
                            break;
                        contributor = (JRSaveContributor) saveContributors.get(i++);
                        if (!contributor.accept(file))
                            contributor = null;
                    } while (true);
                    if (contributor == null)
                        contributor = new JRPrintSaveContributor(jasperReportsContext, getLocale(), null);
                }
                lastSaveContributor = contributor;
                try {
                    contributor.save(jasperPrint, file);
                } catch (JRException ex) {
                    logger.error("Could not save report.", ex);
                    JOptionPane.showMessageDialog(JasperViewer.this, trc("JasperViewer.error.save", "Could not save report."));
                }
            }
        }
    }); 
```***

# openerp - 想要在 openerp 7 中按年、月、周显示数据组

> ID：14537302
> 
> 赞同：3
> 
> 时间：2013-01-26T13:16:38.193
> 
> 标签：openerp

我的对象中有一个日期字段，并且从数据字段中希望按分组显示数据。我已经尝试过使用likee这个数据组。但它没有效果。

例子：

```
<filter icon="terp-go-year" string="Year"
                            domain="[('date_from','&lt;=', time.strftime('%%Y-%%m-%%d')),('date_from','&gt;=',time.strftime('%%Y-01-01'))]"
                            help="Current Year"/>
                    <filter icon="terp-go-month" string="Month"
                            name="month"
                            domain="[('date_from','&lt;=',(datetime.date.today()+relativedelta(day=31)).strftime('%%Y-%%m-%%d')),('date_from','&gt;=',(datetime.date.today()-relativedelta(day=1)).strftime('%%Y-%%m-%%d'))]"
                            help="Current Month"/>
                    <filter icon="terp-go-week"
                            string="Week"
                            separator="1"
                            name="week"
                            domain="[('date_from','&lt;=', (datetime.date.today() + relativedelta(weeks=0,day=7, weekday=-1)).strftime('%%Y-%%m-%%d')),('date_from','&gt;=',(datetime.date.today() - relativedelta(weeks=1, weekday=0)).strftime('%%Y-%%m-%%d'))]"
                            help="Current Week"/> 
```

它不适合我:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T13:30:20.907

我做了一些小改动。

```
<filter icon="terp-go-year" 
        string="Year"
        domain="[('date_from','&lt;=', time.strftime('%%Y-%%m-%%d')),'date_from','&gt;=',time.strftime('%%Y-01-01'))]"
        help="Current Year" 
        context="{'group_by':'date_from'}"/>

<filter icon="terp-go-month" 
        string="Month"
        name="month"
        domain="[('date_from','&lt;=',(context_today()+relativedelta(day=31)).strftime('%%Y-%%m-%%d')),('date_from','&gt;=',(context_today()-relativedelta(day=1)).strftime('%%Y-%%m-%%d'))]"
        help="Current Month" 
        context="{'group_by':'date_from'}"/>

<filter icon="terp-go-week"
        string="Week"
        separator="1"
        name="week"
        domain="[('date_from','&lt;=', (context_today() + relativedelta(weeks=0,day=7, weekday=-1)).strftime('%%Y-%%m-%%d')),('date_from','&gt;=',(context_today() - relativedelta(weeks=1, weekday=0)).strftime('%%Y-%%m-%%d'))]"
        help="Current Week" 
        context="{'group_by':'date_from'}"/> 
```

在这里，我添加`context="{'group_by':'date_from'}"`了每个过滤器，而是`datetime.date.today()`将其替换为`context_today()`.

现在它将正常工作。

# mysql - 用于标记机制的 MySQL vs XML

> ID：14537305
> 
> 赞同：1
> 
> 时间：2013-01-26T13:16:47.623
> 
> 标签：mysql, xml, tags, metadata

我想存储用户上传的每个媒体（图像/声音/视频/PDF）的标签。将来我想用这个标签来搜索媒体。我是一名初学者开发人员，我使用了一种方法来做到这一点。

我做了两张桌子

1.  标记（标记，标记名）
2.  媒体标签（Mediaid，Tagid）

    *   媒体是用户上传的数据数据
    *   标签是用于再次搜索媒体的简单词

例如，如果我上传一张图片，它将有一个 mediaid=M1，我会给它两个标签，分别是 Tag1、Tag2。现在

```
Table 1} will contain data => Row1 = T1-Tag1 ; Row2 = T2-Tag2 as schema[Tagid,Tag name]
Table 2} will contain data => Row1 = M1-T1 ; Row2 = M1-T2 as schema[Mediaid,Tagid] 
```

用户每次上传都会重复此操作。例如，当我必须搜索特定标签时：搜索“Tag1”。它会找到 Tag1 的 Tag id 是“T1” 它会在 Mediatags 表中查找标签 id 是“T1”的每个 meadiid

然后我会得到那些标签为 T1=Tag1 的媒体

我为此使用 MySQL。现在我想到了另一种机制，

如果我为每个标签制作一个 XML 文件，其中包含具有该标签的所有媒体 ID。在此示例中，将有 2 个 XML 文件 TAG1.XML 、 Tag2.XML 并且两者都将包含数据 M1 它在搜索时创建了两个步骤。找到该标签的 XML 文件。我们得到所有使用该标签的媒体。所以在这里，我会找到 XML 文件 TAG1.XML 并阅读它。它会给我所有使用标签 M1 的媒体 ID。我认为它可以在搜索时提供帮助。但是会生成太多的 XML 文件！我将按字母字典对它们进行排序。

我只是想知道， 1\. 这里使用这种 XML 方法然后使用 MySQL 的效率如何？2.在MySql 2表中查找数据然后查找存储在固定目录中的XML文件，哪个更好？

如果我使用第一种方法，MySql 表中会有很多行，而在第二种方法中会有很多 XML 文件（一个 XML 文件不会很重，但会有很多 XML 文件！）

这就是为什么我很困惑什么是更首选的方法！请建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:07:36.227

这两种方法都行得通。您的问题是效率之一，而不是能力（如果我理解您的话）。要回答效率问题，您需要非常了解您的应用程序的要求。

这里有一些问题要问自己：

1.  数据项（艺术家简历）会是相当静态的，还是您的系统会有很多数据项不断出现、变化和运行？
2.  您是否计划对这些项目进行大量动态查找？
3.  您的查找是按标签，还是按内容，或两者兼而有之？

如果您的系统具有少量更改和查找，则使用 XML 具有优势。它在您存储的数据的定义方式上更加灵活。XPath 查询语言很难学习，但是一旦你熟练掌握它就可以很好地工作。但是，除非您投资安装和学习使用像 MarkLogic 这样的 XML 感知服务器，否则它不会很快。它会很慢。

否则，坚持使用 MySQL。对于此类工作，它具有一些关键优势，包括其`FULLTEXT`查询能力。

你正在做的是所谓的“语义网”工作的一个子集。您可能会对此进行一些阅读，以及用于表示元数据的名为“都柏林核心”的方案。很多脑力已经投入到试图解决这个问题上。试图解释他们的结果的脑力略少，这使得学习语义网成为一项艰巨的任务，但仍然值得。

请考虑使用 WordPress、Drupal 或 Joomla 等内容管理系统！构建这个系统的第一个版本。您也可以考虑使用像 MediaWiki 或 Twiki 这样的 wiki 平台。

您会发现这些系统很好地支持各种标记（分类）方案。至于搜索：它只是工作。“坚持构建”的 Web 应用程序一开始`echo "Hello, world of music!";`需要大量重复和无聊的工作，然后才能获得任何结果。

如果你正在建造一个游行花车，你会从一辆卡车开始，而不是一桶螺栓、一把锯子和一些木材。网站的相同交易。

# matlab - 每 15 秒计算一次平均值

> ID：14537308
> 
> 赞同：1
> 
> 时间：2013-01-26T13:17:22.367
> 
> 标签：matlab

我有一个时间行，矩阵为*1 **x** 14401*，首先我输入命令：

```
data.time2(1,2) - data.time2(1,1) 
```

这产生`2.8935e-06`了每个点之间的时间步长（有人告诉我这是以天为单位）。首先，我需要将其转换为秒，但我不确定命令，然后平均每 15 秒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T13:38:52.480

```
% convert to seconds
seconds = data.time2 * 24 * 60 * 60; 
```

由于点之间的步长是`0.25`秒，因此您应该连续平均 60 点。

```
% mask for averaging every 60 points
W = 60;
mask = ones(1,W) / W;

% calculating averages, length will be: 14401 - 60 + 1 = 14342
averages = conv( seconds, mask, 'valid' ); 
```

# java - 对比 elements when writing Java docs

> ID：14537311
> 
> 赞同：29
> 
> 时间：2013-01-26T13:17:36.423
> 
> 标签：java, html, javadoc

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-26T14:02:33.233

For inline code in Javadocs,you should use `{@code your-code-here}`

See [javadoc - `{@code text}`](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/javadoc.html#%7B@code%7D) for more details.

> Equivalent to `<code>{@literal text}</code>`.
> 
> Displays *text* in `code` font without interpreting the text as HTML markup or nested javadoc tags. ..

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-26T13:27:47.727

From [the W3C on TT](http://www.w3.org/wiki/HTML/Elements/tt).

> **HTML Reference**
> 
> The element is a non-standard element.
> 
> HTML5 classifies it as a non-conforming feature.
> 
> **Examples**
> 
> No, really, don't use it.

And I think that answers the question. Choice of 2 elements, W3C says do not use one of them.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-26T13:30:04.157

The code tag is preferred as tt is a font style element and as of HTML 4, styling by style sheets is preferred to font style elements.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-26T17:23:07.820

There is little practical difference between `code` and `tt`, i.e. software that processes HTML documents treats them the same way: they are by default treated as inline elements, rendered in a browser-dependent monospace font and possibly (depending on browser) in reduced font size. A distinction between them is mostly just theoretic talk. However, some automatic translation software makes a difference, treating `code` as having non-translatable content.

So there is some advantage in using `code`, but it is more important that you consider the real implications of either markup. If you don’t want reduced font size, set `font-size: 100%`. If you don’t want browser’s default monospace, which tends to be Courier New, set `font-family`.

# calendar - 带有更新面板的模态弹出窗口中的 ASP.NET AJAX 日历

> ID：14537316
> 
> 赞同：1
> 
> 时间：2013-01-26T13:17:48.723
> 
> 标签：calendar, asp.net-ajax, modalpopupextender, updatepanel

我正在使用 Modal Popup 实现网格视图编辑和删除功能。我在更新面板内的 Ajax 模态弹出窗口中使用 ASP.NET Ajax 日历，但是当我单击其 TargetControlID（文本框）时，日历没有显示在正确的位置，有些甚至根本没有显示。

我也尝试使用，按照我在谷歌上搜索的脚本，但没有解决问题 -

有什么解决办法？？

![在此处输入图像描述](../Images/aa654b90a5d2ca8ed5e626f037316fbb.png)

# javascript - 窗口.close(); 在 Firefox 中的 window.opener 之后无法正常工作

> ID：14537318
> 
> 赞同：0
> 
> 时间：2013-01-26T13:18:22.340
> 
> 标签：javascript

我的父窗口中有以下代码：

```
function OpenPopup()   {     
     var authWindow = window.open('t.php', 'authWindow', 'options...');
}

function HandlePopupResult(result) {
    alert("result of popup is: " + result);
} 
```

以及弹出窗口中的以下代码：

```
 <script type="text/javascript">
function CloseMySelf(sender) {
    try {
        window.opener.HandlePopupResult(sender.getAttribute("result"));
    }
    catch (err) {}
    window.close();
    return false;
}    
 </script>

<a href="#" result="allow" onclick="CloseMySelf(this);">Allow</a>
<a href="#" result="disallow" onclick="CloseMySelf(this);">Don't Allow</a> 
```

该函数的第一部分工作正常，但弹出窗口没有关闭。我读过，window.close 仅​​在弹出窗口已由 javascript 打开时才有效，但我认为这里是这种情况？

window.close 工作正常，如果我删除 opener-function。是因为脚本不知道“窗口”指的是第二个实例中的孩子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:20:15.320

我决定只关闭父窗口的弹出窗口

```
function HandlePopupResult(result) {
    authWindow.close();
    alert("result of popup is: " + result);
} 
```

# java - Joda-Time 解析时格式无效

> ID：14537319
> 
> 赞同：0
> 
> 时间：2013-01-26T13:18:34.503
> 
> 标签：java, date, datetime, datepicker, jodatime

Joda-Time 抱怨我的输入格式错误，但我使用的是相同的格式选项：

```
'd-M-y' 
```

在输入和 Joda-Time 格式化程序中。

```
DateTimeFormatter formatter = DateTimeFormat.forPattern("d-M-y");
DateTime dtFrom = formatter.parseDateTime(dateFrom); 
```

日期是从 jquery datepicker 字段设置中获取的，如下所示：

```
$( "#from" ).datepicker({
                dateFormat: 'd-M-y',
                defaultDate: null,
                changeMonth: true,
                minDate: 0,
                numberOfMonths: 1,
                onClose: function( selectedDate ) {
                    $( "#to" ).datepicker( "option", "minDate", selectedDate );
                }
            }); 
```

控制台正在输出这个，你也可以在那里看到输入，我相信这是正确的

```
WARNING: StandardWrapperValve[SearchServlet]: PWC1406: Servlet.service() for servlet SearchServlet threw exception
java.lang.IllegalArgumentException: Invalid format: "26-Jan-13" is malformed at "Jan-13" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T13:28:56.853

Similar to the `SimpleDateFormat` class, a single `M` is used to parse a numeric month value. You can use `MMM` to parse text-based months:

```
DateTimeFormat.forPattern("d-MMM-y"); 
```

From [DateTimeFormat](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html):

> Month: 3 or over, use text, otherwise use number.

# r - 如何从 boxplot() 生成的图中删除默认轴？

> ID：14537324
> 
> 赞同：17
> 
> 时间：2013-01-26T13:19:15.610
> 
> 标签：r, boxplot

大概这是一个简单的问题，

有谁知道如何`boxplot()`在 R 中隐藏默认轴 x 标签？

它应该很简单，但我在几个网站和 boxplot 帮助上搜索但找不到答案。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-26T13:21:57.247

你的意思是这样吗？

```
 d <- data.frame(x = 2, y=1:5) 
 boxplot(d)
 boxplot(d, axes=FALSE) # add axes=FALSE to remove axes 
```

然后，您可以随意添加轴：

例如

```
 d <- data.frame(x = 2, y=1:5) 
 boxplot(d, axes=FALSE)
 axis(2, at=1:5, labels=c(rep("whatever I want",5))) 
```

* * *

根据您的评论进行编辑：

删除默认标签：

```
 boxplot(d, xaxt="n") 
```

# c++ - 在 C++ 中创建可变数量的向量

> ID：14537325
> 
> 赞同：4
> 
> 时间：2013-01-26T13:19:16.950
> 
> 标签：c++, vector

我可以通过执行以下操作创建一个 2D 数组`n*m`： `vector< vector< int > > foo(n, vector< int > (m))`

假设在运行时我得到了可变数量的值，例如`v_1, v_2, v_3, ..., v_k`并想要创建以下内容：

`vector< vector< ... vector< int > ... > > foo(v_1, vector< ... > (v_2, vector< ... > ..));`

换句话说，创建一个 size 的多维数组`v_1* v_2 * v_3 ... *v_k`。我怎样才能做到这一点？这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T13:33:12.357

你需要[`boost::variant`](http://www.boost.org/doc/libs/1_52_0/doc/html/variant.html)，它可以处理这个。您可以创建一个 recursive_wrapper 允许您任意嵌套内容。还有其他方法，例如一个大尺寸的单个平面数组，或者您可以使用继承和动态分配，但它们涉及更多麻烦。

```
typedef boost::variant<
    int,
    std::vector<boost::recursive_variant_>
> variant;

int main() {
    std::vector<variant> var; // Assume at least 1 dimension
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T13:28:39.740

你不能这样做——数据类型必须在编译时设置。也就是说，使用具有正确元素总数的单个数组并创建一个映射以便`[i1][i2][...]`在 say 中找到您的逻辑是非常实用的`[i1*v2*v3...vk + i2*v3..vk + ...]`。

# android - 使用 AdMob 计算我自己的广告的点击次数？

> ID：14537327
> 
> 赞同：0
> 
> 时间：2013-01-26T13:19:40.543
> 
> 标签：android, admob

我已将 AdMob 集成到我的应用程序中。我想展示假设公司 XYZ 的（自定义）广告，但如何计算这些广告的点击次数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:14:18.060

You could [create a custom event](https://developers.google.com/mobile-ads-sdk/training/mediation/custom-events/banners) that returns an ad from company XYZ, and add this custom event to a mediation placement. Then use that mediation placement ID in your app when making ad requests, and they will get sent to your custom event.

When implementing your custom event, make sure to invoke `CustomEventBannerListener.onClick()` when the ad is clicked. This is how AdMob knows to record a click for your custom event, and you can track these clicks via AdMob mediation reporting.

# assembly - 68k 汇编 - 地址寄存器上的加号

> ID：14537331
> 
> 赞同：5
> 
> 时间：2013-01-26T13:20:40.377
> 
> 标签：assembly, reverse-engineering, 68000, addressing-mode

在对有趣的东西进行逆向工程时，我遇到了以下组件：

```
move.b  (a1)+,(a0)+ 
```

我知道括号的意思是“价值”，但加号代表什么？我如何准确地将其翻译为 C？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T14:52:21.530

括号表示间接寻址，`+`表示后增量。在这种情况下，指令执行后，两者`a1`都会`a0`增加操作的大小。另一种常见的寻址模式是带有预减量的间接寻址，`-(An)`.

对源寄存器和目标寄存器都使用后递增间接寻址的指令的典型用途是`move`在循环中将数据从一个内存位置复制到另一个内存位置。

[程序员参考手册](https://www.nxp.com/docs/en/reference-manual/M68000PM.pdf)对于任何 M68000 程序员来说都是无价之宝。

在 C 中，`*a0++ = *a1++;`用于`char *a0, *a1`变量。一个经典的简单 memcpy 的循环体一次只有 1 个字节。（对于较大的副本，您更喜欢`move.w`or `move.l`，或者更优化的 memcpy 实现。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-26T13:29:15.033

`(a1)+`访问内存，`a1`并按操作的大小递增`a1`。在这种情况下 1\. 你所拥有的看起来像是复制内存的典型循环的一部分。

# windows-phone-7 - 有关 windows phone 8 应用程序开发/启动 windows phone 8 应用程序开发的详细信息？?

> ID：14537332
> 
> 赞同：-4
> 
> 时间：2013-01-26T13:20:50.097
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone, windows-phone-7.1.1

我是 windows phone 8 开发的新手，我想从你们那里知道以下几点：-

1）windows phone 8开发的系统要求？

2）除了 vs2012，我还需要任何其他工具来进行 windows phone 8 开发吗？

3）windows phone 8 SDK的官方下载链接？

3）我正在开发一个应用程序，我想针对所有设备（windows phone 7 和 windows phone 8），使用 windows phone 8 sdk 可以这样做吗？

4）我在哪里可以获得一些学习windows phone 8开发的好资源？

感谢 Adavnce。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T17:58:52.187

1)

系统要求

**支持的操作系统**

*   视窗 8 (x64)

**支持的架构**

*   64 位 (x64)

**硬件要求**

*   1.6 GHz 或更快的处理器
*   4 GB 内存
*   4 GB 可用硬盘空间
*   项目清单

**Windows Phone 8 模拟器**

*   Windows 8 专业版或更高版本
*   需要支持二级地址转换 (SLAT) 的处理器

如果您的计算机满足硬件和操作系统要求，但确实满足 Windows Phone 8 模拟器的要求，Windows Phone SDK 8.0 将安装并运行。但是，Windows Phone 8 模拟器将无法运行，您将无法在 Windows Phone 8 模拟器上部署或测试应用程序。注意 要启动 Visual Studio Express for Windows Phone，请单击“应用程序”列表中的应用程序。如果您在计算机上安装了 Visual Studio Professional、Premium 或 Ultimate，则不会出现 Visual Studio Express for Windows Phone 快捷方式。相反，像往常一样启动 Visual Studio 实例，然后使用已安装的 Windows Phone 模板创建 Windows Phone SDK 8.0 项目。如果您尝试在 Windows Phone Emulator 中运行项目并且 Hyper-V 未启用，系统将提示您打开 Hyper-V。

2) Windows Phone 8 开发不需要其他工具。适用于 Windows Phone 的 Blend 包含在适用于 Windows Phone 的 Visual Studio Express 2012 中

3) [SDK 下载](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-phone#product-express-phone-requirements)

4) 不，使用 Windows Phone 8 SDK 创建的应用程序将仅针对 Windows Phone 8。您需要针对 Windows Phone 7.5 才能捕获 7.5 和 8。

5）MSDN周围有很多资源

# android - 播放支持 3D 的视频时，Android Youtube API 崩溃

> ID：14537334
> 
> 赞同：0
> 
> 时间：2013-01-26T13:20:59.123
> 
> 标签：android, youtube-api, android-youtube-api

我正在使用新的 YouTube Android API，并且我观察到，一旦您加载能够播放 3D 的视频，API 就会在内部崩溃。

现在我的问题是：是否可以禁用 3D 播放或向 API 提供任何参数来指示我要播放的分辨率？或禁用高清播放，或类似的东西？

戈登

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:14:29.423

目前不支持禁用 3D 或更改分辨率的方法。

有一个关于这个问题的错误报告，它最近得到了修复。

请再试一次，并通过示例和崩溃报告将问题报告给公共问题跟踪器。

' [https://code.google.com/p/gdata-issues/issues/entry?template=YouTube%20(Defect%20Report)](https://code.google.com/p/gdata-issues/issues/entry?template=YouTube%20(Defect%20Report)) '

# php - mysql_num_rows($result)==0) 的 PDO 版本

> ID：14537335
> 
> 赞同：0
> 
> 时间：2013-01-26T13:21:02.490
> 
> 标签：php, mysql, pdo

> **可能重复：**
> [使用 PDO 替代 mysql_num_rows](https://stackoverflow.com/questions/11305230/alternative-for-mysql-num-rows-using-pdo)

^ 我相信这不是同一个问题 - 其他作者的代码与我的不同，需要不同的答案。我成功地从这篇文章中得到了答案，并将其标记为已回答。现在一切正常（其他“重复”线程没有帮助。

* * *

如果未找到结果，我想显示“未找到客户端”消息，以下代码是否有 PDO 方法？：

```
$result = mysql_query($sql) or die(mysql_error()."<br />".$sql);
if(mysql_num_rows($result)==0) {
    echo "No Client Found"; 
```

我尝试了以下...

```
<?php                               
$db = new PDO('mysql:host=localhost;dbname=XXXXXXXXXXXX;charset=utf8','XXXXXXXXXXXX', 'XXXXXXXXXXXX');

    $query = $db->query('SELECT * FROM client');

    if ($query == FALSE) {
      echo "No Clients Found";
    }
    else
    {
    foreach($query as $row)
    {
     <some code here>
    }   
    }           
    ?> 
```

我错过了什么吗？

我已阅读： http: [//php.net/manual/en/pdostatement.rowcount.php](http://php.net/manual/en/pdostatement.rowcount.php)但没有帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T13:36:14.043

```
<?php                               
$db = new PDO('mysql:host=localhost;dbname=XXXXXXXXXXXX;charset=utf8','XXXXXXXXXXXX', 'XXXXXXXXXXXX');

    $query = $db->query('SELECT * FROM client WHERE ID = 10');

    if ($query->rowCount() != 1) {
      echo "No Clients Found";
    }
    else
    {
    foreach($query as $row)
    {
     <some code here>
    }   
    }           
    ?> 
```

在 PDO 中，rowCount 方法用于对返回的结果进行计数。如果您想检查是否存在唯一性，您的查询必须选择一些唯一的东西，例如电子邮件地址或用户名，否则，如果您想至少找到一行，请将条件更改为：

```
if ($db->rowCount() == 0) 
```

有一个教程：[面向 MySQL 开发人员的 PDO](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T14:04:43.457

`PDOStatement::rowCount()`在某些数据库 中不返回受**SELECT语句影响的行数。**[文档](http://php.net/manual/en/pdostatement.rowcount.php)下面的代码使用`SELECT COUNT(*)`和`fetchColumn()`。还准备了语句和`try`&`catch`块来捕获异常。

```
<?php
// Get parameters from URL
$id = $_GET["client"];
try {
    $db = new PDO('mysql:host=localhost;dbname=XXXX;charset=utf8', 'XXXX', 'XXXX');
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    // Prepare COUNT statement
    $stmt1 = $db->prepare("SELECT COUNT(*) FROM client WHERE client = ?");
     // Assign parameters
    $stmt1->bindParam(1,$id);
    $stmt1->execute();
    // Check the number of rows that match the SELECT statement 
    if($stmt1->fetchColumn() == 0) {
        echo "No Clients Found";
    }else{
        //echo "Clients Found";
        // Prepare Real statement
        $stmt2 = $db->prepare("SELECT * FROM client WHERE client = ?");
     // Assign parameters
        $stmt2->bindParam(1,$id);
        $stmt2->setFetchMode(PDO::FETCH_ASSOC);
        $stmt2->execute();
        while($row = $stmt2->fetch()) {
            //YOUR CODE HERE  FROM
             // Title
             echo '<div id="portfolio_detail">';
             //etc.etc TO
             echo '<div><img src="'."/client/".$row[client].'_3.png"/></div>';
             echo '</div>'; 
        }//End while
    }//End if else
 }//End try 
 catch(PDOException $e) {
    echo "I'm sorry I'm afraid you have an Error.  ". $e->getMessage() ;// Remove or modify after testing 
    file_put_contents('PDOErrors.txt',date('[Y-m-d H:i:s]').", myfile.php, ". $e->getMessage()."\r\n", FILE_APPEND);  
 }
//Close the connection
$db = null; 
?> 
```

# selenium-webdriver - 使用 Selenium WebDriver 检查 HttpResponse OK (200)

> ID：14537336
> 
> 赞同：22
> 
> 时间：2013-01-26T13:21:06.933
> 
> 标签：selenium-webdriver, httpresponse, selenium-grid

我正在使用 Selenium 远程 WebDriver。我从 csv 文件中读取所有链接并对这些链接运行测试。但有时我会收到 404 响应。

Selenium WebDriver 中是否有任何方法可以检查我们是否收到 HTTP 响应 200？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-27T12:08:38.210

无法直接在 WebDriver API 中获取 HTTP 状态代码。这是一个[长期存在的功能要求](http://code.google.com/p/selenium/issues/detail?id=141)，很可能[永远不会](http://jimevansmusic.blogspot.com/2012/07/webdriver-y-u-no-have-http-status-codes.html)在项目中实现。解决您的问题的正确方法是将您的浏览器配置为使用可以拦截和记录网络流量的代理，并让您的代码查询该代理以获得您所追求的结果。

当然，如果您感兴趣的只是检查链接以确保它返回 200 状态代码，那么您可以轻松地使用 HTTP 客户端库以您希望导航到链接的任何语言。除非您需要以某种方式操作生成的页面，否则无需使用 WebDriver。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T13:23:32.047

before using selenium, you could use something like:

```
public static boolean linkExists(String URLName){
    try {
      HttpURLConnection.setFollowRedirects(false);
      HttpURLConnection con =
         (HttpURLConnection) new URL(URLName).openConnection();
      con.setRequestMethod("HEAD");
      return (con.getResponseCode() == HttpURLConnection.HTTP_OK);
    }
    catch (Exception e) {
       e.printStackTrace();
       return false;
    }
  } 
```

Using it in this way:

```
WebDriver driver = new FirefoxDriver();
for(String url : csvArray){
   if(linkExists(url)){
      driver.get(url);
            .
            .
            .
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-05T17:06:04.250

我们的网站有一个用于 404 响应的自定义错误页面。该页面上的页面标题显示“404 - 页面未找到”。我使用 driver.Title 并检查文本“未找到”。

使用 C#，我编写了以下代码：

```
// Check for 404 page:
var pageNotFoundTitleText = "not found";
if (driver.Title.ToLower().Contains(pageNotFoundTitleText)) throw new Exception("### 404 - Page Not found: " + link); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-01-13T02:28:43.223

您可以使用 RestAssured import static com.jayway.restassured.RestAssured.given;

```
 int returnCode = given().when().baseUri(url).get().getStatusCode();
    if (returnCode == 200) {
        webDriver.get(url);
        helper.asserts.assertTrue(helper.finder.isElementPresent(By.className("ticketType")));
    } else {
        helper.asserts.fail("This url "+url+" is returning the following code: " + returnCode);
    }; 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-01-29T14:13:03.840

这是一种方式（我认为：P）。
您可以使用 JavaScript 检查页面上的 http 状态。JS可以通过以下方式在Java中调用：
((JavascriptExecutor) webDriver).executeScript(js);

最好的选择是使用 JS 函数在节点硬盘上创建虚拟网页，并在该页面上的 executeScript() 中调用该函数。
您也可以尝试在 executeScript() 中发送所有 JS 代码，但我不确定这是否可行。

# javascript - 函数返回相同的值

> ID：14537337
> 
> 赞同：0
> 
> 时间：2013-01-26T13:21:14.807
> 
> 标签：javascript

```
N_ALPHA = 6;
N_CHOICES = 4;
ALPHABET = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
var alphabet = ALPHABET.substring(0, N_ALPHA);
var indexForm=new Array();
function guessStrToArr(inStr)
{ 
  {
    for (i=0;i<N_CHOICES;i++)
    {
       indexForm[i]=alphabet.indexOf(inStr.charAt(i).toUpperCase());
    }
  }
 return indexForm;
}

function numBulls(guess, goal)
{
  guess=new Array (guessStrToArr(prompt('enter your guess1')));
  alert(guess);
  goal=new Array(guessStrToArr(prompt('enter your guess2')));
  var checkArray = new Array (guess.concat(goal); 
  alert(checkArray);

  var count=0;

  for (i=0;i<N_CHOICES;i++)
  {
    if (guess[i]===goal[i])
    {
      count++
    }
  }
  return count;
}

numBulls(); 
```

当我运行上面的代码时，它返回相同的数组，每次我在提示框输入不同的代码。我不知道为什么，你能帮帮我吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:36:07.500

`indexForm`是一个全局变量。当您`guessStrToArr`第一次调用该函数时，数组会被填充。第二次重新填充。当您进行比较时，您将数组与自身进行比较。尝试这个：

```
function guessStrToArr(inStr) { 
    var indexForm = new Array();

    for (i = 0; i < N_CHOICES; i++) {
       indexForm[i] = alphabet.indexOf(inStr.charAt(i).toUpperCase());
    }

    return indexForm;
} 
```

另请注意，您没有尝试确保它`inStr.length`与`N_CHOICES`.

# php - 无法打开php文件

> ID：14537338
> 
> 赞同：0
> 
> 时间：2013-01-26T13:21:45.190
> 
> 标签：php, file-format

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:24:11.643

This file appears to be encoded by Zend guard. You probably cannot decode it. Here is something you can read on [http://www.zend.com/en/products/guard/](http://www.zend.com/en/products/guard/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T13:34:42.703

编码的 PHP 文件。保护他们的源代码

# c# - How to Replace char in text with another one in C#?

> ID：14537341
> 
> 赞同：0
> 
> 时间：2013-01-26T13:22:21.483
> 
> 标签：c#, dictionary, char, iteration

i'd appreciate if someone could help! I need to replace each character in my text(encrypted,which i read from file) with another character, which i have in my Dictionary.

```
 StreamReader st = new StreamReader(@"C:\path of text");
 string text = st.ReadToEnd();
 st.Close();
 char[] textChar = text.ToCharArray();  //splitting text into characters 
```

So, in my Dictionary `Dictionary<char, char> keys = new Dictionary<char,char>();` for key i have some letter, say 'n' and for value - another letter, say 'a'. So i need to replace each 'n' with 'a' in my text. Dictionary has 26 letters for keys and 26 letters for values respectively.

Now i try to replace letters and write 'decrypted' text into some file

```
StreamWriter sw = new StreamWriter(@"path for decrypted file");

 foreach(KeyValuePair<char, char> c in keys)
 {
    for(int i =0; i< textChar.Length; i++)
    {
         if (textChar.Contains(c.Key))
         {  //if text has char as a Key in Dictionary
             textChar[i] = keys[c.Key]; //replace with its value
         }
         else 
         {
             sw.Write(textChar[i]);  //if not, just write (in case of punctuatuons in text which i dont want to replace)
         }
     }
  }
  st.Close();
  file.Close(); 
```

This code does not work correctly, because the replacement is wrong. I'd be so grateful for any help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:28:02.283

尝试与此类似的代码，我在没有 Visual Studio 的情况下编写了它，所以它可能需要一些更正:)

```
string text = File.ReadAllText(@"path for decrypted file");

foreach(var key in keys)
{
  text = text.Replace(key.Key, key.Value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T13:26:51.067

try this:

```
StreamReader st = new StreamReader(@"C:\path of text");
string text = st.ReadToEnd();
st.Close();

foreach(KeyValuePair<char, char> c in keys)
{
    text = text.Replace(c.Key, c.Value);
} 
```

[String.Replace](http://msdn.microsoft.com/en-us/library/czx8s9ts.aspx) returns a new string in which all occurrences of a specified Unicode character in this instance are replaced with another specified Unicode character.

Why do you use `char[] textChar` ? In most cases using `string` is preferable.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T13:32:59.533

你的代码有问题...

如果（例如）你有一个键（a，z）和一个键（z，b）会发生什么。如果你只是应用直接交换，你所有的 a 将变成 z，然后你所有的 z 变成 b。（这意味着你所有的 a 和 z 都变成了 b）。

您需要将项目转换为一些中间值，然后您可以根据需要进行解码。

```
(a,z)
(z,b) 
```

编码

```
(a,[26])
(z,[02]) 
```

解码

```
([26],z)
([02],b) 
```

# android - ProfilePictureView 到位图（适用于 Android v3 的 Facebook SDK）

> ID：14537343
> 
> 赞同：4
> 
> 时间：2013-01-26T13:22:23.707
> 
> 标签：android, facebook-android-sdk

如何从 ProfilePictureView 转换为位图？这是可能的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T14:42:11.750

我懂了！！

```
ImageView fbImage = ( ( ImageView)profilePictureFB.getChildAt( 0));
Bitmap    bitmap  = ( ( BitmapDrawable) fbImage.getDrawable()).getBitmap(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T09:27:25.167

您也可以只启用 ProfilePictureView 的 DrawingCache，然后调用 getDrawingCache... 像这样

```
 ProfilePictureView mImage = (ProfilePictureView) findViewById(R.id.profilepic);
 mImage.setDrawingCacheEnabled(true);
 mImage.setProfileId(user.getId()); 
```

然后在加载个人资料图片时...

```
 Bitmap bitmap = mImage.getDrawingCache(); 
```

# mysql - Represent dynamically added form fields in MySQL database

> ID：14537345
> 
> 赞同：0
> 
> 时间：2013-01-26T13:22:46.087
> 
> 标签：mysql, database, database-design

I'm having a hard time representing the following situation in the database:

**A user can declare multiple addresses (such as Home, Office, Mailing etc. as requested by client).**

I have an auto-incremented primary key called `UserID` that represents one user account. I've been thinking of making a `BelongsToUserID` column to represent each user's form field to look like:

![Desired database structure](../Images/f94784186a141677ab71002a6158ea42.png)

I can't do this because each row can only be occupied by `UserID` row. Any thoughts on how to achieve this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:27:47.953

您需要一个单独的表格来保存地址。也许是这样的：

| id(主键) | 类型（枚举家庭/工作/等）| 用户名 | 地址 |

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T13:36:09.783

你可以用两种方法做这个

第一个很简单，但不建议您不要创建任何主键并使用复合键对作为候选键并从中选择主键。由于该表缺少主键，因此不建议使用

第二种方法很好，我也使用它来制作一个主表并将其用作那里的关系表并使用另一个表来实际存储数据。

在主表中你可以有 id、userid、address_bit，在第二个表中你可以有 id、address_bit、地址。

如果您找到了，请告诉我任何其他解决方案。它可能会帮助我学习新知识:)

# vb.net - Why won't my variable set to an instance of an object?

> ID：14537359
> 
> 赞同：1
> 
> 时间：2013-01-26T13:24:40.707
> 
> 标签：vb.net, object, instance

The program is a booking system (amongst other things) for a holiday letting company. I am working on the screen where you can see properties and ammend them or add more (etc)

Okay so It works fine in my other cases, but this one it just doesn't want to accept...I expect it's something stupid. Basically In the initial loading of the entire program I filled the Data Tables with the relevant info and then accessed them when needs be, in this case I am in the Form Properties and want to access Bookings (Which were made in FrmBookings) to see when the property is next booked to have guests in.

```
Dim Intcounter As Integer = 0
Dim NumberBookingRecords As Integer = BookingsNumRecs

Dim PropertyName As String
Dim PropertyFromBookings As String

Do

    PropertyName = DTProperties(Intcounter)("Property Name").ToString
    PropertyFromBookings = (DTBookings(NumberBookingRecords)("Property").ToString)

    If PropertyName = PropertyFromBookings Then

        lblDateOfArrival.Text = (DTBookings(NumberBookingRecords)("Arrival").ToString)
        Intcounter = Intcounter + 1

    Else

        If Not NumberBookingRecords = 0 Then

            NumberBookingRecords = NumberBookingRecords - 1

        Else

        End If

    End If

Loop Until Intcounter >= intNumPropertyRecs 
```

However when I get to `PropertyFromBookings = (DTBookings(NumberBookingRecords)("Property").ToString)` it tells me that it could not be set to an instance of an object...no matter what I try an access from DTBookings I get the same response.

This is in the initial load form at the opening of the program

```
Dim FSBookings As New FileStream(strFileNameBookings, FileMode.OpenOrCreate, FileAccess.Read)

Application.DoEvents()

If FileLen(strFileNameBookings) > 0 Then
    DTBookings.ReadXmlSchema(strFileNameBookings)
    DTBookings.ReadXml(strFileNameBookings)
    BookingsNumRecs = DTBookings.Rows.Count
    intCurrRec = 1
Else
End If

FSBookings.Close()
blnStopAuto = True
blnStopAuto = False 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T13:51:36.403

根据您的代码示例，`DTBookings()`是一个函数调用。这里有两种可能。任何一个：

1.  该函数的结果是`Nothing`，并且当您尝试使用 Nothing 时，就好像那里有一个实际的对象一样，（在这种情况下，当您尝试查找`("Property")`索引器时）您会得到那个异常，或者......
2.  ("Property") 索引的结果返回 Nothing，在这种情况下，当您尝试调用 .ToString() 方法时会出现该异常。

# winapi - change menu bar background color

> ID：14537367
> 
> 赞同：1
> 
> 时间：2013-01-26T13:25:49.860
> 
> 标签：winapi, menu, menubar

I tried SetMenuInfo with MIM_BACKGROUND, but it doesn't work. I found it is because the Visual Style is enabled. But I don't want to disable the Visual Style by SetWindowTheme(hwndMain, L"", L"") becauuse it will change the appearance of the title bar and border...etc.

Is there any way to change, and only change the background color of the menu bar, without disalbe Visual Style of the main window. By "only change", I also mean that I don't have to draw the menu items myself, like I can use custom draw for change only the background color of toolbar, tab...etc. (But I can find custom draw for menu bar!).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-23T14:57:59.730

您只需将 MainMenu 的`OwnerDraw`Property 设置为 true，Menu 会自动关闭 Menu 的主题，但不要关闭 Window 的主题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-04T21:43:38.010

With themes there is no official way to change the color. However you can take advantage of some undocumented window messages to implement the custom drawing yourself. [https://github.com/adzm/win32-custom-menubar-aero-theme](https://github.com/adzm/win32-custom-menubar-aero-theme)

# php - 数组值不变

> ID：14537368
> 
> 赞同：1
> 
> 时间：2013-01-26T13:26:12.997
> 
> 标签：php, arrays

我想这与[ArrayAccess 有关](http://php.net/manual/en/class.arrayaccess.php)，因为`$this`其中的对象`$this->products[$key]`确实实现了 ArrayAccess。然而，没有魔法`__get`或`__set`任何地方。

```
var_dump($this->products[$key]['selected_options'][$option_key]);
// Output: string(7) "Größe:S"

$this->products[$key]['selected_options'][$option_key] = "test";

var_dump($this->products[$key]['selected_options'][$option_key]);
// Output: string(7) "Größe:S" 
```

有人知道这里有什么问题吗？

另请注意，这确实有效：

```
$this->products[$key]['selected_options'] = array($option_key => "test");
// Output: string(4) "test" 
```

产品的 ArrayAccess 与`$this`(Cart) 相同，但使用`$products`而不是`$data`：

```
class Product implements ArrayAccess
{
    protected $data;

    /* **** ArrayAccess **** */
    public function offsetExists($offset) {
        return isset($this->data[$offset]);
    }

    public function offsetGet($offset) {
        return $this->data[$offset];
    }

    public function offsetSet($offset , $value) {
        $this->data[$offset] = $value;
    }

    public function offsetUnset($offset) {
        unset($this->data[$offset]);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T13:56:20.743

您需要在内部通过引用返回`offsetGet`。

[**从手册**](http://www.php.net/manual/en/arrayaccess.offsetget.php)：

> 直接修改触发调用*`ArrayAccess::offsetSet()`*，间接修改触发调用*`ArrayAccess::offsetGet()`*。在这种情况下，实现*`ArrayAccess::offsetGet()`*必须能够通过引用返回，否则*`E_NOTICE`*会引发消息。

但是请注意，这只适用于 PHP >= 5.3.4

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T13:37:37.893

您可能正在尝试更改[不可变属性](https://stackoverflow.com/a/7317164/427992)。

如何`$this->products`定义？它的能见度如何？您需要查看当前类的范围，并查看实例化后是否可以覆盖属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T13:36:20.663

好吧，我跑了这个：

```
// INPUT: string(7) "Größe:S"
$products = array();

$key = 1;
$option_key = 1;

$products[$key]['selected_options'][$option_key] = "badgers";

$products[$key]['selected_options'][$option_key] = "xxx";

var_dump($products[$key]['selected_options'][$option_key]); 
```

输出是：

> 字符串（3）“xxx”

所以我认为需要更多代码？

# python - 复制列表并在一行中追加一个元素

> ID：14537369
> 
> 赞同：19
> 
> 时间：2013-01-26T13:26:18.883
> 
> 标签：python

这可以减少到单行（分配后`a`）吗？

```
a = [1,2,3]
b = a[:]
b.append(4) 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-26T13:27:58.157

以下可能是最简单的：

```
b = a + [4] 
```

在这里，您不需要，`a[:]`因为我们不再复制引用（`+`无论如何都会创建并返回一个新列表）。

# list - 从lisp中的列表评估函数

> ID：14537372
> 
> 赞同：0
> 
> 时间：2013-01-26T13:26:51.643
> 
> 标签：list, function, functional-programming, lisp

我需要用 lisp 编写一个带有两个参数的函数 - 无参数函数列表和整数列表。我需要按照第二个给出的顺序评估第一个列表中的函数，即 (fun '(#'a #'b #'c) '(2 0 1)) 应该评估 c、a、b。我试过这样的功能：

```
(defun z4(funs kols)
    (funcall (nth (first kols) funs))
    (z4 funs (rest kols))
) 
```

但在 funcall 我收到错误

> NIL 不是 CONS 类型。

这是什么意思？我通过简单地调用得到同样的错误

```
(funcall (first funs)) 
```

所以我认为它与从函数列表中获取函数有关。如何评估从函数列表中获取的函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T13:35:20.327

每次递归调用都会减少`kols`参数，直到它变为`nil`. 何时`kols`变为`nil`您应该终止递归，因此您应该为终止条件添加测试（即，对于空列表）：

```
(defun foo (funcs order)
  (unless (endp order)
    (funcall (nth (first order) funcs))
    (foo funcs (rest order)))) 
```

我建议一个更易读的解决方案（它也更可取，因为 ANSI Common Lisp 标准不强制实现执行尾调用优化）：

```
(defun foo (funcs order)
  (loop for n in order do (funcall (nth n funcs)))) 
```

在前面的示例中，我假设您运行函数是为了它们的副作用，而不是返回值。

* * *

**编辑 1**

正如 Vatine 所指出的，使用`nth`和 列表来提供随机访问的集合对性能不利，因此将函数存储在 a `vector`（即一维`array`）而不是列表中可能更值得。所以，假设`funcs`是一个`vector`函数，函数可以定义如下：

```
(defun foo (funcs order)
  (loop for n in order do (funcall (aref funcs n)))) 
```

此外，如果函数数组是（[词汇表条目](http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_s.htm#simple_vector)） ，我们可以`aref`替换为。前者更通用，但后者在某些实现中可能更快。`svref``simple vector`

可以使用以下任一方法创建一个`simple vector`函数

```
(vector #'func-a #'func-b ...) 
```

或者

```
#(func-a func-b ...) 
```

A `simple vector`of 函数也可以使用该`make-array`函数创建，但前提是`:adjustable`和`:fill-pointer`关键字参数未指定 or `nil`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T14:15:39.743

```
'(#'a #'b #'c) 
```

不是函数 A、B、C 的列表。它是这样的：

```
((FUNCTION A) (FUNCTION B) (FUNCTION C)) 
```

上面不是函数，而是带有第一个符号`FUNCTION`然后是另一个符号的列表。

使用任一

```
(list #'a #'b #'c) 
```

或者

```
'(a b c) 
```

# mysql - 覆盖 MySql 表中给定限制的数据

> ID：14537374
> 
> 赞同：-3
> 
> 时间：2013-01-26T13:27:23.087
> 
> 标签：mysql

我创建了这个表：

```
create table t(amount int(5)); 
```

我试图插入这些值：

```
insert into t values
  (1),
  (11),
  (111),
  (1111),
  (11111),
  (111111),
  (11111111); 
```

为什么表接受所有上述值而不是给出 ERROR ？
这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:35:59.437

Int 总是四个字节宽。

在 int(5) 的情况下`display-width`是 5

要查看其工作使用以下查询来创建表

```
CREATE TABLE `t` (
    `amount` INT(5) ZEROFILL NULL DEFAULT NULL
) 
```

并插入数字 20 。

然后，如果您尝试运行`select * from t`，您将获得以下信息

![在此处输入图像描述](../Images/a37c0e7277520c415b812625bf3596c3.png)

# kendo-ui - 自定义弹出编辑器中的 kendoui 验证工具提示未正确定位

> ID：14537379
> 
> 赞同：11
> 
> 时间：2013-01-26T13:27:38.353
> 
> 标签：kendo-ui

例如，请参阅[jsfiddle ，将 First Name 字段空白以显示验证工具提示。](http://jsfiddle.net/delebash/t3Pz5/1/)在正常形式中，验证工具提示正确定位在每个元素的右侧。但是在网格的弹出编辑器中，它仍然试图将工具提示定位在元素下方，就好像它在哪里编辑内联一样。我已经尝试过`<span class="k-invalid-msg" data-for="FirstName"></span>`，但它并没有改变任何东西。我是否缺少一个设置来让它在popupeditor中工作？我想我可以手动修改.k-tooltip，但我希望有更多内置的东西可以正确处理定位，因为我不太擅长css。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T13:31:04.617

正如您所发现的，当应用于标准输入时，网格的错误模板与 kendo 验证器提供的错误模板不同。

不幸的是，网格内部创建的验证器不会传递您可能在选项对象中定义的任何错误模板，并且在“编辑”事件触发时，验证器已经创建并且错误模板已经编译，因此为什么以您描述的方式设置 errorTemplate 不起作用。真的，我认为 Kendo 网格应该尊重任何用户定义的 errorTemplate 选项，但在此之前我们必须稍微修改一下。

关键是定义一个自定义模板并将其应用到编辑事件中，但不是使用选项对象，而是直接设置私有实例。不理想，但它有效：

```
edit: function (e) {
    e.sender.editable.validatable._errorTemplate = 
         kendo.template($('#tooltip-template').html());
} 
```

请参阅此更新的小提琴以获取我认为您可能希望实现的示例。

[http://jsfiddle.net/nukefusion/eQ2j7/10/](http://jsfiddle.net/nukefusion/eQ2j7/10/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-21T18:46:25.053

（我会将此作为评论发布，但还没有足够的声誉......）

我成功地使用了 nukefusion 的解决方案。我也与 jQuery 的语法错误斗争了很长时间，通过调试发现*如何*定义模板很重要。特别是，模板似乎必须写在没有任何格式的单行上，如：

```
<script id="tooltip-template" type="text/x-kendo-template"><span class="k-widget k-tooltip k-tooltip-validation"><span class="k-icon k-warning"></span>#=message#</span></script> 
```

如果您尝试使其“漂亮”并在模板中格式化 html，则会出现语法错误。我不知道真正的错误在哪里，因为这种事情不应该导致错误。但它确实如此，一旦我让它正常工作，我就不再担心它了。

# c++ - 从列表中删除元素时遇到问题

> ID：14537386
> 
> 赞同：-1
> 
> 时间：2013-01-26T13:28:20.433
> 
> 标签：c++, list

我有一个配对字符串列表，然后我删除每个列表的顶部元素并比较它们。但是，当我删除列表大小的顶部元素时，会大大增加。我已经尝试过 pop_front()，制作迭代器等。我知道如何以及同样的问题发生。

```
std::ifstream myReadFile;
std::list<std::pair<std::string,std::string>> startTape;
std::pair<std::string,std::string> pair;

while (std::getline(myReadFile, pair.first , ','))
{
    std::getline(myReadFile, pair.second);
    startTape.push_back(pair);
}
myReadFile.close(); 
```

开始磁带 { 大小 = 8 }

```
std::pair<std::string,std::string> firstCompare = startTape.front();
startTape.remove(*startTape.begin());
std::pair<std::string,std::string> secondCompare = startTape.front();
startTape.remove(*startTape.begin()); 
```

开始磁带 { 大小 = 1753706592 }

当我查看 startTape 列表时，它似乎已经循环了。

(readFile内容如下) N,C /n I,G /n A,U /n H,A /n G,M /n C,I /n S,H /n U,N /n

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:41:11.600

我编写了一个完整的程序，其中包含您上面提到的所有内容读取单个元素的字符缓冲区，然后将它们复制到对。我还确保我不会在文件末尾做一些疯狂的事情，以防没有读取两个元素（无论文件末尾是否有 \n，它都有效）。

```
#include <fstream>
#include <iostream>
#include <list>

#define BUF 100
using namespace std;

int main() {
  std::ifstream myReadFile;
  std::list<std::pair<std::string,std::string> > startTape;
  std::pair<std::string,std::string> pair;
  char sbuf[BUF]; // temp storage for file read

  myReadFile.open("listOwords.txt");
  if(!myReadFile) {
    cerr << "Error: file could not be opened" << endl;
    exit(1);
  }
  cout << "file opened successfully" << endl;

  while(myReadFile.getline(sbuf, BUF, ',')) {
    pair.first = sbuf;
    myReadFile.getline(sbuf, BUF);
    pair.second = sbuf;
    if(myReadFile.good()) {
      // only process if both elements were read successfully
      // this deals with the problem of a "half pair" being read if the file is terminated with \n
      startTape.push_back(pair);
      cout << "read a pair: " << pair.first << ", " << pair.second << endl;
      }
  }  
  myReadFile.close();

  cout << "Size of startTape is now " << startTape.size() << endl;

  std::pair<std::string,std::string> firstCompare = startTape.front();
  startTape.remove(*startTape.begin());
  cout << "Size of startTape is now " << startTape.size() << endl;

  std::pair<std::string,std::string> secondCompare = startTape.front();
  startTape.remove(*startTape.begin());
  cout << "Size of startTape is now " << startTape.size() << endl;

  exit(0);
} 
```

listOwords 的内容：

```
>cat listOwords.txt 
N, C
I, G
A, U
H, A
G, M
C, I
S, H
U, N 
```

我从中得到的输出是：

```
file opened successfully
read a pair: N,  C
read a pair: I,  G
read a pair: A,  U
read a pair: H,  A
read a pair: G,  M
read a pair: C,  I
read a pair: S,  H
read a pair: U,  N
Size of startTape is now 8
Size of startTape is now 7
Size of startTape is now 6 
```

如果您使用此确切代码没有得到相同的结果，请告诉我？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T13:39:54.123

我认为您正在考虑错误的列表方向。列表的“顶部”是“返回”（push_back，pop_back）或“结束”（rbegin）。

尝试使用 back() 代替 front()，并使用 pop_front() 删除第一个元素。

尽管如此，列表大小的变化听起来更像是某个地方的错误。

# backbone.js - 浏览器返回时提交的内容消失

> ID：14537387
> 
> 赞同：1
> 
> 时间：2013-01-26T13:28:25.533
> 
> 标签：backbone.js

我制作了一个显示帖子墙的脚本，让我们可以评论和删除帖子。它工作正常。但是当我去另一个页面并试图返回时，我没有看到任何更改，只有页面加载时呈现的内容（未显示添加的评论和其他操作）。

当我刷新它时，我得到了我的更改，因为它们保存在数据库中。

我没有使用主干导航，因为帖子墙只放置在使用主干的网站中。

所以问题是，backbone 没有保存对 DOM 的更改或在导航返回时看到它们的任何内容。

也许有人知道如何解决这个问题？因为用户会认为动作没有被保存并再次重复它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T13:52:01.173

您是否使用 Backbone 来增强在服务器端呈现的页面，即 Backbone 没有通过 AJAX 请求获取数据并将 DOM 构建到空页面？

如果是这种情况，问题不在于 Backbone，而在于浏览器缓存。浏览器正在呈现它上次请求该 URL 时收到的 HTML 的缓存副本。当您在页面上时，浏览器不知道也不关心 Backbone 修改了 DOM。

尝试将您的服务器配置为提供以下 HTTP 响应标头，以指示浏览器不要缓存页面的副本：

```
Cache-Control: no-cache, no-store, must-revalidate
Pragma: no-cache
Expires: 0 
```

标题在此[Stack Overflow 线程](https://stackoverflow.com/questions/49547/making-sure-a-web-page-is-not-cached-across-all-browsers)中进行了解释。

# hp-nonstop - TACL 错误 - HP NONSTOP Tandem

> ID：14537388
> 
> 赞同：0
> 
> 时间：2013-01-26T13:28:27.140
> 
> 标签：hp-nonstop

当我在 HP NS（从 80'）上运行 TACL 脚本时，我收到以下错误

```
$volume.subvolume.fooX  File error 11 
```

TACL宏对应部分为：

```
PURGE $volume.subvolume.fooX 
```

我查看了 TACL 手册，但找不到错误代码列表。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T00:31:55.250

以下内容来自 HP 的 Guardian 用户指南。第17章第6页。请不要再删了。在 HP Non-stop 上很难找到帮助。

```
ERROR [ / run-option / ] error-number 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T22:06:48.293

请参阅文件命名手册。

您列出的“子卷”值是描述值位置的术语。但是您可以作为子卷名称的“值”只能是 8 个字符长。因此，找不到您的 9 字符名称“子卷”（错误 11）找不到文件。

等级制度；驱动器名称（7 个字符）（它是 8，但第一个数字通过值“$”将其区分为驱动器，例如 $Data01

Subvol (8 字符) 文件名 (8 字符)

道格

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T23:43:12.107

**Guardian 程序错误和消息手册**，第2 章（文件系统错误）将错误 11 描述为：

*文件不在目录中或记录不在文件中，或指定的磁带文件不在带标签的磁带上。*

如果您输入错误 11，错误程序将给出相同的文本

该手册提供了原因、影响和恢复信息——在这种情况下可能不需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-21T14:25:43.377

如果您有名为 Volume 和 SubVolume 的变量并且想要使用存储在这些变量中的信息，那么您需要通过在变量名称周围放置方括号来扩展它们：

```
Purge $[Volume].[SubVolume].foox 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-25T15:08:35.050

错误 11 表示找不到文件。您可以在 TACL 提示符上简单地写 ERROR（错误编号），如 ERROR 11，它会为您提供错误描述。

# java - Automatically update all the databases in a jar file when one database is changed

> ID：14537395
> 
> 赞同：0
> 
> 时间：2013-01-26T13:29:14.700
> 
> 标签：java, mysql, database, swing, deployment

I have created a GUI-DB Swing application¹ in Netbeans using MySQL as the database. Now I want to deploy the application and distribute it as jar files over a LAN. The problem is that when a user modifies his table in one jar file, the corresponding tables in ALL the jar files distributed over the LAN should also be modified.

How can I do this? How to automatically update all the databases in a jar file when one database is changed?

## Update

1.  It is a Swing application that uses multicasting to chat with other clients over a LAN. Now I want each client to be listen on a specific port, that is if a user wants to send message to a particular client only that client will get the chat message using multicasting. To do this I have a login form that asks the client username.

    Upon entry, the name and a random multicast IP is assigned to that client which is stored in a MySQL database. Other clients can chat with the client using the port.
2.  As an alternative to repackaging Jar files, how do I phone home to the DB?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:24:43.113

为什么单个 DB 分布在整个 LAN，如果您将 DB 安装在单个节点上并使分布在 LAN 上的所有应用程序（您的 Swing 应用程序）连接到您的 DB 所在的节点，这不是一个坏主意。

# android - Android error inflating class fragment in layout-large

> ID：14537396
> 
> 赞同：2
> 
> 时间：2013-01-26T13:29:24.090
> 
> 标签：android, android-layout

Hi i'm creating an android app that uses a TabActivity and has 5 tabs each tab has a FragmentActivity class when a tab is clicked the FragmentActivity loads a fragment and i can be able to replace the fragment with another I've used this approach since i'm creating an app that should be similar to an iphone app. I have two layout folders layout for the normal phone and layout-large for tablets. This app works okay except when it comes to the tablet layout where i get an error inflating class fragment on the onCreateView when inflating the layout. the layout-large xml files have a two pane layout

here's the code for the FragmentActivity

```
 public class ManageTab3 extends FragmentActivity {
     @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.fragmentstackctivity);

            // add initial fragment, do not add to back stack, no transition animation
            addFragment(new MoreFragment(), false, FragmentTransaction.TRANSIT_NONE);

        }
      void addFragment(Fragment fragment, boolean addToBackStack, int transition) {
            FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
            ft.replace(R.id.simple_fragment, fragment);
            ft.setTransition(transition);
            if (addToBackStack)
                ft.addToBackStack(null);
            ft.commit();
        }

} 
```

and here is the fragment being added

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle 
                      savedInstanceState) {
 View fragmentView = inflater.inflate(R.layout.more, container, false); 
 Button button1 = (Button) fragmentView.findViewById(R.id.button_abbreviations); 
  button1.setOnClickListener(new OnClickListener(){ public void onClick(View v){ 
      addAbbrevs();
  }}
  );
  Button button2 = (Button) fragmentView.findViewById(R.id.button_info); 
  button2.setOnClickListener(new OnClickListener(){ public void onClick(View v){ 
      addInfo();
  }}
  );
  Button button3 = (Button) fragmentView.findViewById(R.id.button_help); 
  button3.setOnClickListener(new OnClickListener(){ public void onClick(View v){ 
      addHelp();
  }}
  );
  Button button4 = (Button) fragmentView.findViewById(R.id.button_about); 
  button4.setOnClickListener(new OnClickListener(){ public void onClick(View v){ 
      addAbout();
  }}
  );
    return fragmentView; 
```

}

here is the xml file for layout more.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:gravity="center_vertical|center_horizontal"
    android:background="#F2F2F2">
    <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/title"
    android:layout_width="match_parent"
    android:layout_height="35dip"
    android:layout_weight="1"
   android:orientation="horizontal" 
  >
     <TextView android:id="@+id/textt" 
    android:layout_width="match_parent"
    android:layout_height="40dip"
    android:text="@string/more"
    android:textSize="15dip"
    android:gravity="center|center_vertical"
    android:textColor="#191997"/>
  </LinearLayout>
   <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="25"
   android:layout_marginTop="50dp"
   android:orientation="vertical" 
  >
     <Button
               android:id="@+id/button_abbreviations"
               android:layout_width="match_parent"
               android:layout_height="wrap_content"
               android:text="@string/abbreviations"
               android:textColor="#191997"
               android:background="@drawable/btn_background"/>   
     <Button
               android:id="@+id/button_info"
               android:layout_width="match_parent"
               android:layout_height="wrap_content"
               android:text="@string/info"
               android:textColor="#191997"
               android:background="@drawable/btn_background"/>
      <Button
               android:id="@+id/button_help"
               android:layout_width="match_parent"
               android:layout_height="wrap_content"
               android:text="@string/help"
               android:textColor="#191997"
               android:background="@drawable/btn_background"/>
     <Button
               android:id="@+id/button_about"
               android:layout_width="match_parent"
               android:layout_height="wrap_content"
               android:text="@string/about"
               android:textColor="#191997"
               android:background="@drawable/btn_background"/>
     </LinearLayout>
   </LinearLayout> 
```

and here is the xml file for the layout-large more.xml

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <fragment android:name="babla.dict.MoreFragment"
              android:id="@+id/more_fragment"
              android:layout_weight="1"
              android:layout_width="0dp"
              android:layout_height="match_parent" />

    <fragment android:name="babla.dict.DetailsFragment"
              android:id="@+id/details_fragment"
              android:layout_weight="2"
              android:layout_width="0dp"
              android:layout_height="match_parent" />

</LinearLayout> 
```

here is the logcat error messages

```
 01-26 20:42:49.713: E/AndroidRuntime(572): FATAL EXCEPTION: main
01-26 20:42:49.713: E/AndroidRuntime(572): java.lang.RuntimeException: Unable to start activity ComponentInfo{babla.dict/babla.dict.MultiLingualDictionaryActivity}: java.lang.RuntimeException: Unable to start activity ComponentInfo{babla.dict/babla.dict.ManageTab3}: android.view.InflateException: Binary XML file line #8: Error inflating class fragment
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.os.Looper.loop(Looper.java:137)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.app.ActivityThread.main(ActivityThread.java:4424)
01-26 20:42:49.713: E/AndroidRuntime(572):  at java.lang.reflect.Method.invokeNative(Native Method)
01-26 20:42:49.713: E/AndroidRuntime(572):  at java.lang.reflect.Method.invoke(Method.java:511)
01-26 20:42:49.713: E/AndroidRuntime(572):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-26 20:42:49.713: E/AndroidRuntime(572):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-26 20:42:49.713: E/AndroidRuntime(572):  at dalvik.system.NativeStart.main(Native Method)
01-26 20:42:49.713: E/AndroidRuntime(572): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{babla.dict/babla.dict.ManageTab3}: android.view.InflateException: Binary XML file line #8: Error inflating class fragment
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.app.ActivityThread.startActivityNow(ActivityThread.java:1797)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:682)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.widget.TabHost.setCurrentTab(TabHost.java:346)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.widget.TabHost.addTab(TabHost.java:236)
01-26 20:42:49.713: E/AndroidRuntime(572):  at babla.dict.MultiLingualDictionaryActivity.onCreate(MultiLingualDictionaryActivity.java:30)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.app.Activity.performCreate(Activity.java:4465)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
01-26 20:42:49.713: E/AndroidRuntime(572):  ... 11 more
01-26 20:42:49.713: E/AndroidRuntime(572): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class fragment
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-26 20:42:49.713: E/AndroidRuntime(572):  at babla.dict.MoreFragment.onCreateView(MoreFragment.java:21)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:884)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1066)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1168)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:280)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-26 20:42:49.713: E/AndroidRuntime(572):  at babla.dict.MoreFragment.onCreateView(MoreFragment.java:21)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:551)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1133)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.app.Activity.performStart(Activity.java:4475)
01-26 20:42:49.713: E/AndroidRuntime(572):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1929)
01-26 20:42:49.713: E/AndroidRuntime(572):  ... 21 more
01-26 20:42:49.713: E/AndroidRuntime(572): Caused by: java.lang.Ill 
```

please help

# javascript - how to get the current order of all columns (visible or invisible) in dataTables after using colReorder?

> ID：14537397
> 
> 赞同：0
> 
> 时间：2013-01-26T13:29:24.217
> 
> 标签：javascript, jquery, arrays, datatables

I have a table populated with dataTabels jquery plugin.
after i use colReorder plugin on it and reorder my columns,
how can i get all my collumns order.
let me explain little more.
if i have all my columns visible it is fairly easy. but when i make some columns disapear with colViz plugin of dataTables it destroy the whole column and its not there for me to get any thing of it.
the problem is that i know that the order is present somewhere in the oTable object, because when you change the order of columns in your table with colReorder in colViz list the order changes and it containes all my columns names.
i searched all three of js files thoroughly. but could not found any thing helpfull.
though i can not use the colVix button names, because they are not present in page and after i click on show/hide columns list they are generated. in addition i can not trigger a click on it because it has a fairly long animation that make it almost impossible to use this cheap tricks on it. can any one help?

**EDIT:**
i think it is clear:
i just want a list with titles of my columns visible or hidden especially after using reorder

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:32:06.220

您可以使用`colVis`按钮单击来根据选中的复选框创建数组：

```
$(document).on('click', '.ColVis_Button:not(.ColVis_MasterButton)',function(){
     var colsArray= $('.ColVis_Button :checkbox').map(function(){
      return [[$(this).parent().next('.ColVis_title').text(), this.checked ? 'visibile':'hidden']];
    }).get();
    console.log(colsArray)

}); 
```

# javascript - 为什么 Math instanceof Math 会抛出错误？

> ID：14537398
> 
> 赞同：0
> 
> 时间：2013-01-26T13:29:27.060
> 
> 标签：javascript

为什么下面的 JavaScript

```
Math instanceof Math 
```

抛出错误

```
TypeError: Expecting a function in instanceof check, but got #<Object> 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T13:31:37.470

因为`Math`不是构造函数，不像`Object`.

见[`instanceof`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/instanceof)：

> ### 句法
> 
> ```
> object instanceof constructor 
> ```
> 
> ### 参数
> 
> `object`：要测试的对象。
> 
> `constructor`: 要测试的函数

# android - 收听电话状态状态的变化 - Android

> ID：14537403
> 
> 赞同：4
> 
> 时间：2013-01-26T13:29:45.453
> 
> 标签：android

我目前正在尝试创建一个简单的应用程序，该应用程序记录您拨打电话的时间，然后在您接近空闲时间时向您发出警告。

此时，我创建了一个名为 CallService.java 的服务，每当用户呼叫人员时都会调用该服务。该服务只记录通话的开始时间和通话的结束时间。该服务使用名为 OutgoingCallReciever.Java 的类启动。此类只是等待用户呼叫某人，然后启动 CallService。

当用户电话没有呼叫某人时，我现在试图停止 CallService。即（电话状态为空闲、摘机或其他人正在呼叫用户）但我不知道该怎么做（我是 Java/Android 新手）。我是否使用 PhoneStateListener 的 onCallStateChanged 方法？（我不确定如何使用它..）

希望你能帮忙！

课程如下：

MainActivity.java

```
package com.fouadalnoor.callcounter;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.Toast;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.telephony.TelephonyManager;
import android.telephony.PhoneStateListener;

public class MainActivity extends Activity {

     @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TelephonyManager tm = (TelephonyManager) getSystemService(TELEPHONY_SERVICE);
        PhoneStateListener ps =(PhoneStateListener) getSystemService(TELEPHONY_SERVICE);

         Toast.makeText(this, "Phone State = " + tm.getCallState() , Toast.LENGTH_LONG).show();

        CheckBox checkBox = (CheckBox) findViewById(R.id.checkBox1);
        checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

                    if(isChecked){
                        stopService (new Intent(buttonView.getContext(),CallService.class));
                    }
                }
            });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

OutgoingCallReciever.java

```
package com.fouadalnoor.callcounter;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class OutgoingCallReciever extends BroadcastReceiver {

     @Override
        public void onReceive(Context context, Intent intent) {
          context.startService(new Intent(context, CallService.class));
     }

} 
```

呼叫服务.java

```
package com.fouadalnoor.callcounter;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.os.IBinder;
import android.widget.Toast;
import java.lang.String;

public class CallService extends Service {

    public long startTime,endTime, totalTime;

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

        @Override
        public void onDestroy() {

            Toast.makeText(this, "Call Service stopped", Toast.LENGTH_LONG).show(); 

            endTime = System.currentTimeMillis()/1000;
            Toast.makeText(this, "endTime = " + endTime, Toast.LENGTH_LONG).show();
            totalTime =  endTime-startTime; 
            Toast.makeText(this, "totalTime = " + totalTime , Toast.LENGTH_LONG).show();

        }

        @Override
        public void onStart(Intent intent, int startid) {
            Toast.makeText(this, "Call Service started by user.", Toast.LENGTH_LONG).show();

            startTime = System.currentTimeMillis()/1000;
            Toast.makeText(this, "startTime = "+ startTime, Toast.LENGTH_LONG).show();
        }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T14:35:29.580

是的，你需要使用 `onCallStateChanged`方法。

将此行放入您的`onCreate()`方法中，它将初始化对象`TelephonyManager`并为您设置侦听器。

```
TelephonyManager tManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
ListenToPhoneState listener = new ListenToPhoneState()
tManager.listen(listener, PhoneStateListener.LISTEN_CALL_STATE); 
```

内部类的类定义`ListenToPhoneState`将如下所示，

```
 private class ListenToPhoneState extends PhoneStateListener {

        boolean callEnded=false;
        public void onCallStateChanged(int state, String incomingNumber) {

            switch (state) {
            case TelephonyManager.CALL_STATE_IDLE:
                UTILS.Log_e("State changed: " , state+"Idle");

                if(callEnded)
                {
                    //you will be here at **STEP 4**
                    //you should stop service again over here
                }
                  else
                  {
                    //you will be here at **STEP 1**
                 //stop your service over here,
                    //i.e. stopService (new Intent(`your_context`,`CallService.class`));
                    //NOTE: `your_context` with appropriate context and `CallService.class` with appropriate class name of your service which you want to stop.

                  }

                break;
            case TelephonyManager.CALL_STATE_OFFHOOK:
                UTILS.Log_e("State changed: " , state+"Offhook");
                    //you will be here at **STEP 3**
                 // you will be here when you cut call
                callEnded=true;
                break;
            case TelephonyManager.CALL_STATE_RINGING:
                UTILS.Log_e("State changed: " , state+"Ringing");
                    //you will be here at **STEP 2**

                break;

            default:
                break;
            }
        }

    } 
```

**说明：** 在通话过程中，您的听众将经历以下状态，

**第 1 步**：`TelephonyManager.CALL_STATE_IDLE`

最初您的呼叫状态将是空闲的，这就是变量`callEnded`将具有值的原因`false`。

**第 2 步**：`TelephonyManager.CALL_STATE_RINGING`

现在您正在等待接听者接听您的电话

**第 3 步**：`TelephonyManager.CALL_STATE_OFFHOOK`

你挂断电话

**第 4 步**：`TelephonyManager.CALL_STATE_IDLE`

再次闲置

**注意：**如果您不想知道通话何时结束以及结束通话后应该做什么，那么只需删除`callEnded`变量并在您进入块时停止服务`TelephonyManager.CALL_STATE_IDLE`

我希望它会有所帮助！

# backbone.js - 使用带有骨干样板和 require.js 的主干.localstorage

> ID：14537405
> 
> 赞同：0
> 
> 时间：2013-01-26T13:29:54.870
> 
> 标签：backbone.js, requirejs, underscore.js, backbone-boilerplate, lodash

我正在为一个项目使用主干样板 (grunt-bbb) 和 requireJS，我有一个关于主干.localstorage 和 lodash 的问题。似乎 localstorage 插件需要下划线。我在我的应用程序 config.js 文件中为backbone.localstorage 创建了一个别名：

```
paths: {
    "backbone-localstorage" : "./plugins/backbone.localStorage"
}, 
```

在我将backbone.localstorage 加载到我的一个模块中后，我在underscore.js 上收到404 错误。我假设这是因为 bbb 使用 lodash。所以，我用 require.config.js 文件中的 lodash.underscore.js 文件替换了 lodash，一切正常：

```
var jam = {
    "packages": [

        // more packages here...

        {
            "name": "underscore",
            "location": "../vendor/jam/lodash",
            "main": "./lodash.underscore.min.js"
        }
    ],
    "version": "0.2.11",
    "shim": {
        "backbone": {
            "deps": [
                "jquery",
                "underscore"
            ],
            "exports": "Backbone"
        },
        "backbone.layoutmanager": {
            "deps": [
                "jquery",
                "backbone",
                "underscore"
            ],
            "exports": "Backbone.LayoutManager"
        }
    }
}; 
```

我的问题是，这是正确的方法吗？我应该在我的 config.js 文件中完成此操作，然后将下划线作为模块加载吗？

# zend-framework2 - 与多控制器zend框架2交互

> ID：14537406
> 
> 赞同：1
> 
> 时间：2013-01-26T13:29:59.540
> 
> 标签：zend-framework2

我已经用ZF1开发了，现在我在玩ZF2。当您按照教程进行操作时，我已经在使用相册应用程序，并且一切正常。现在我想知道如何将新控制器添加到专辑模块。

我创建了一个名为 TestController 的新空控制器及其视图。为了测试它，我用新的 TestController 作为默认值更改了 module.config.php，它可以工作。在我再次更改为教程中的默认专辑控制器之​​后。好吧..问题出现在添加视图中，我从专辑中更改了这一行

```
<a href="<?php echo $this->url('test', array('action'=>'index'));?>">Test</a> 
```

我在浏览器中点击了 www.testing.loc/add 但只渲染了一半的脚本而没有任何错误。

我的相册模块中的一些 module.config 如下所示：

```
<?php
return array(
    'controllers' => array(
        'invokables' => array(
            'Album\Controller\Album' => 'Album\Controller\AlbumController',
            'Album\Controller\Test' => 'Album\Controller\TestController',

        ),
    ),
    'router' => array(
        'routes' => array(
            'album' => array(
                'type'    => 'segment',
                'options' => array(
                    'route'    => '/',

                    'constraints' => array(
                        'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        'id'     => '[0-9]+',
                    ),
                    'defaults' => array(
                        'controller' => 'Album\Controller\Album',
                        'action'     => 'index',
                    ),
                ),
            ),
        ),
    ),    
    'view_manager' => array(
        'template_path_stack' => array(
            'album' => __DIR__ . '/../view',
        ),
    ),
); 
```

可能是视图中为 url 函数提供的参数的简单错误，但我用其他人证明了它是相同的。我从 ZF2 开始，但我不知道如何在同一个模块中使用多个控制器。非常欢迎任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T15:05:01.090

`test`您的配置中没有命名路由。语法是：

```
$this->url('ROUTENAME', $routeParams); 
```

基本上你需要做的是改变路线：

```
'router' => array(
    'routes' => array(
        'test' => array(
            //copy the other parts
        )
    )
) 
```

更多信息参见[Zend\Mvc\Router](http://framework.zend.com/manual/2.0/en/modules/zend.mvc.routing.html) -Documentation

# python - 如何在模板中表示外键？

> ID：14537409
> 
> 赞同：0
> 
> 时间：2013-01-26T13:30:11.117
> 
> 标签：python, django

如何在模板中表示外键？

***模型.py***

```
class Trabajo(models.Model):
    titulo = models.CharField(blank=True, max_length=150)
    imagen = models.ImageField(upload_to='perfiles', verbose_name = 'Small image')
    descripcion = models.TextField()
    fecha = models.CharField(blank=True, max_length=150)
    link = models.CharField(blank=True, max_length=150)
    cliente = models.CharField(blank=True, max_length=150)

    def __unicode__(self):
        return self.titulo

class Imagen(models.Model):
    titulo_proyecto = models.ForeignKey(Trabajo, related_name='+')
    imagenes = models.ImageField(upload_to='perfiles', verbose_name = 'Imagen')

    def __unicode__(self):
        return unicode(self.titulo_proyecto) 
```

***视图.py***

```
def index(request):
    trabajos = Trabajo.objects.all()
    imagenes = Imagen.objects.all()
    return render_to_response('index.html', {'works': trabajos, 'images': imagenes}) 
```

***索引.html***

```
{% for item in works %}

    {% for obj in item.images.all %}
        {{obj.imagenes}}
    {% endfor %}

{% endfor %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:35:07.040

***视图.py***

```
 def index(request):
        trabajos = Trabajo.objects.all()
        imagenes = Imagen.objects.all()
        return render_to_response('index.html', {'works': trabajos, 'images': imagenes}) 
```

***索引.html***

```
 {% for item in works %}
         {{item.id}} 
         {% for obj in images %}
              {% ifequal item.id obj.titulo_proyecto_id %}
                   {{item.id}} <img src="{{ MEDIA_URL }}{{obj.imagenes}}" />
              {% endifequal %}
         {% endfor %}

 {% endfor %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T13:45:26.780

好吧，我想我知道你的意思了。首先，你应该清理你的视图，这样它就不会比它需要的更频繁地访问数据库。改变：

```
trabajos = Trabajo.objects.all()
imagenes = Imagen.objects.all() 
```

至：

```
trabajos = Trabajo.objects.all().select_related() 
```

现在尝试：

```
{% for item in works.imagen_set.all %}
    <img src="{{ MEDIA_URL }}{{ item }}" />
{% endfor %} 
```

# c++ - 用 GDI 在我的窗口周围画一个边框，不起作用？

> ID：14537412
> 
> 赞同：1
> 
> 时间：2013-01-26T13:30:58.037
> 
> 标签：c++, windows, winapi, border, gdi

我试图在我的窗口周围画一个边框，但我的代码似乎不起作用。它不画任何东西。谁能告诉我它有什么问题？

```
LRESULT CALLBACK WndProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    HDC hDC = 0;
    PAINTSTRUCT ps;
    ZeroMemory(&ps, sizeof(PAINTSTRUCT));
    HPEN hp353535 = 0;
    RECT rWnd;
    GetWindowRect(hWnd, &rWnd);

    switch(msg)
    {
        case WM_PAINT:
            // I could/should put GetWindowRect() here..
            hDC = BeginPaint(hWnd, &ps);
            hp353535 = CreatePen(PS_SOLID, 7, RGB(247, 247, 247));
            SelectObject(hDC, hp353535);
            MoveToEx(hDC, rWnd.left, rWnd.top, 0);
            LineTo(hDC, rWnd.right, rWnd.top);
            LineTo(hDC, rWnd.right, rWnd.bottom);
            LineTo(hDC, rWnd.left, rWnd.bottom);
            LineTo(hDC, rWnd.left, rWnd.top);
            DeleteObject(hp353535);
            EndPaint(hWnd, &ps);
            break;

        // More cases
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T13:33:07.367

GetWindowRect() 返回屏幕坐标，而绘图使用客户端坐标（即相对于窗口的左上角）。我认为使用 GetClientRect() 会有所帮助。

# ios - iOS：如何构建基于平移手势的滑动按钮？

> ID：14537417
> 
> 赞同：-4
> 
> 时间：2013-01-26T13:31:47.483
> 
> 标签：ios, button, option, slide, gesture

我正在尝试构建一个按钮，让用户在 4 个选项之间进行选择。用户可以在指定区域从左到右滑动来选择想要的选项。下面的链接显示了我的意思。

![例子](../Images/444db12465354b15c2e49315b4001916.png)

有人可以告诉我如何编码吗？

提前致谢！

干杯，

坦率

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:06:18.063

我建议您使用启用了分页的 UIScrollView。只需将 UILabels 或 UIImages 并排添加为 UIScrollView 的子视图，每个选项一个。

然后，您可以使用 contentOffset 来检查用户选择了哪个选项：

```
int selectedIndex=lroundf((-[scrollView contentOffset].x)/optionLabelsWidth) + 1
//I did not test this code, but it should at least give you an idea of how to do it 
```

希望这可以帮助 ！

# ios - 更新 iOS 应用程序

> ID：14537425
> 
> 赞同：0
> 
> 时间：2013-01-26T13:33:22.983
> 
> 标签：ios, updates

我正在更新应用商店中的一个应用，但我正在对其进行大修。我想从一个新的项目文件开始工作，然后只拉入我在另一个项目中拥有的一些现有类。

如何设置新项目以便顺利提交到应用商店？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T13:38:41.973

关键是确保捆绑标识符完全相同。区分大小写在这里很重要。只要捆绑包 id 相同，就可以了。

# c# - 恢复备份时如何更新？

> ID：14537428
> 
> 赞同：2
> 
> 时间：2013-01-26T13:33:58.740
> 
> 标签：c#, .net, sql-server

我正在使用 c# 在 .net 中构建一个 webApp。我上传备份文件（csv 文件）的代码有问题。

这是代码：

```
 protected void UploadBackup(object sender, EventArgs e)
    {
        SqlConnection con = new SqlConnection(dataset1.ConnStr);
        string filepath = ""+Server.MapPath("/backups/Species.csv");
        StreamReader sr = new StreamReader(filepath);
        string line = sr.ReadLine();
        string[] value = line.Split(',');
        DataTable dt = new DataTable();
        DataRow row;
        foreach (string dc in value)
        {
            dt.Columns.Add(new DataColumn(dc));
        }

        while (!sr.EndOfStream)
        {
            value = sr.ReadLine().Split(',');
            if (value.Length == dt.Columns.Count)
            {
                row = dt.NewRow();
                row.ItemArray = value;
                dt.Rows.Add(row);
            }
        }
        SqlBulkCopy bc = new SqlBulkCopy(con.ConnectionString, SqlBulkCopyOptions.TableLock);
        bc.DestinationTableName = "Species";
        bc.BatchSize = dt.Rows.Count;
        con.Open();
        bc.WriteToServer(dt);
        bc.Close();
        con.Close();
    } 
```

当我单击某个按钮并将其连接到我的数据库并恢复 Species 表中的所有行时，此代码正在工作，它工作正常。

这是我的问题：当我在这个表中有值时，它会返回一个错误，因为主键已经被占用。我想要做的是当一些主键已经被使用时，它会使用 csv 文件中的新值更新这一行，如果没有使用主键，那么它会像原始代码一样（只需添加行），我应该在哪里编写代码来检查该行是否已经存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T13:54:34.717

将记录插入临时表，然后发出合并 sql 命令将数据合并到现有表中。

有关示例，请参见[http://www.jarloo.com/c-bulk-upsert-to-sql-server-tutorial/](http://www.jarloo.com/c-bulk-upsert-to-sql-server-tutorial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T13:49:56.540

我建议您创建一个`Stored Procedure`to `Update`if 存在和`Insert`if 不存在。虽然我认为这种方法不适用于`SqlBulkCopy`，但您必须一一插入行。

# javascript - jQuery 在一个 tr 中附加两个 tds'

> ID：14537437
> 
> 赞同：4
> 
> 时间：2013-01-26T13:35:28.970
> 
> 标签：javascript, jquery, html, html-table

如何使用 jQuery 在单个 tr 中仅附加两个 tds ..

我有一张桌子..我想最大化每行有多少 tds.. 像这样

```
if($("td").length) == 0){ // get the count of existing tds
 $("table").append("<tr>");
}
   $("table").append("<td>Something</td>");

if($("td").length) == 2){ // if it hit two tds' in this tr then close the tag
 $("table").append("</tr>");
} // this is not a valid example, just trying to deliver my point 
```

这不是一个循环，它会在点击时附加，所以假设我点击了**5**次，我应该得到这个

```
<tr>
 <td>Someting</td>
 <td>Someting</td>
</tr>
<tr>
 <td>Someting</td>
 <td>Someting</td>
</tr>
<tr>
 <td>Someting</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T13:39:49.233

让我们试试这个：

```
var max = 2
var tr = $("table tr:last");
if(!tr.length || tr.find("td").length >= max)
    $("table").append("<tr>");
$("table tr:last").append("<td>hi</td>"); 
```

[http://jsfiddle.net/5yLrE/](http://jsfiddle.net/5yLrE/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T13:42:07.173

如果`$("td").length`是偶数，则创建一个新行，如果不是，则追加到最后一行：

```
var $tds = $('table td');
var $target = $tds.last().parent();
if($tds.length % 2 === 0){
    $target = $('<tr />').appendTo('table > tbody');
}
$target.append("<td>Something</td>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T13:43:08.950

```
$('bla').click(function() {
  if ($('td').length % 2) === 0)
    $('table').append('<tr />');
  $('table:last').append($('<td>Something</td>'));
}); 
```

# java - GridLayout 中的 JLabel

> ID：14537443
> 
> 赞同：3
> 
> 时间：2013-01-26T13:36:13.250
> 
> 标签：java, swing, layout-manager, grid-layout

怎么加`JLabel`出来的`GridLayout`？我有一个 8x8 网格布局。

```
Container content = getContentPane();
content.setLayout(new GridLayout(8, 8,2,2));
for (int f = 0; f < btnArr.length; f++){
    for (int s = 0; s < btnArr.length; s++){
        btnArr[f][s] = new JButton();
        btnArr[f][s].addActionListener(this);
        content.add(btnArr[f][s]);
        btnArr[f][s].setBackground(randomColor());
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T16:30:11.763

![简单嵌套布局](../Images/691b39d0e7f5d71cec96dfb89c6c9e4d.png)

```
import java.awt.*;
import javax.swing.*;

class SimpleNestedLayout {

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                JPanel gui = new JPanel(new BorderLayout(5,5));

                int sz = 4;
                Container content = new JPanel(new GridLayout(sz, 0, 2, 2));
                for (int f=0; f<sz*sz; f++) {
                    content.add(new JButton());
                }
                gui.add(content, BorderLayout.CENTER);

                Container info = new JPanel(
                        new FlowLayout(FlowLayout.CENTER, 50, 5));
                info.add(new JLabel("Flow"));
                info.add(new JLabel("Layout"));
                gui.add(info, BorderLayout.PAGE_START);

                gui.add(new JLabel("Label"), BorderLayout.LINE_END);

                JOptionPane.showMessageDialog(null, gui);
            }
        };
        SwingUtilities.invokeLater(r);
    }
} 
```

### 笔记

*   对于 8x8 网格，更改`sz`为 8。
*   如果提到的“标签”就像在 GUI 中看到的标签，它可能会出现在最外面的面板`BorderLayout`中`Flow` `Layout`（本身就是一个面板），或者`Label`出现在最外面的`gui`面板中的其他两个空缺位置中。
*   ( ) 和`info`( )面板还可以根据需要接受更多组件。`FlowLayout``content``GridLayout`
*   其他嵌套布局的简单示例。
    1.  [`PlayerGui`](https://stackoverflow.com/a/8373943/418556)(31 行)
        ![](../Images/c3e8046c81259de17ba7cc5626386f47.png)
    2.  [`WestPanel`](https://stackoverflow.com/a/12267186/418556)（30 LOC）不是一个*很好的*例子，因为它`extends JPanel`不是简单地保留一个实例，而是简短。
        ![](../Images/0eedb463cb14d1d0a870ef9e05e2c144.png)
    3.  [`AmortizationLayout`](https://stackoverflow.com/a/10063163/418556)（53 LOC）作为一个例子特别好，因为它使用标题边框概述了父子布局。
        ![](../Images/c864de5bed5ffdcdc800d0d6f8e36859.png)

# java - 查找未排序集合的不同元素的最大/最小值

> ID：14537445
> 
> 赞同：3
> 
> 时间：2013-01-26T13:36:40.333
> 
> 标签：java, list, comparator

我有一个国家代码值列表（可以重复）和相应的价格，如主类中所示，我想以这种方式找到最大值/最小值：

如果 Country Code = 0.1 ，我应该从 0.90、0.91、0.92 中得到最高价格 = 0.92。对于所有其他国家/地区代码，依此类推，即我想为每个不同的国家/地区代码查找最高价格

我已经在下面显示的代码中成功完成了它。但这是非常缓慢且不是好方法。

我的方法：由于“Class Main”中的数据是相关的（国家代码，价格），我首先使用带 Comparator 的“Telephone”类按国家代码对数据进行排序，然后扫描“Telephone-ArrayList”的所有元素“然后我通过比较 ArrayList 元素找到每个“不同”国家代码的最大值。

```
class Telephone implements Comparator<Telephone>{
    private int countryCode; 
    private double price;

    Telephone(){
    }

    Telephone( int c, double p){
        countryCode= c;
        price= p;

    }

    public int getCountryCode(){
        return countryCode;
    }

    public double getPrice(){
        return price;
    }

    // Overriding the compare method to sort
    public int compare(Telephone d, Telephone d1){

        return d.getCountryCode() - d1.getCountryCode();    
    }

}

public class Main {                          
    /**                                     
    * @param args
    */
    public static void main(String[] args) {
        // Takes a list o Telephone objects
        ArrayList <Telephone> list = new ArrayList<Telephone>(); 
        ArrayList <Double> arr = new ArrayList<Double>(); 
        list.add(new Telephone(1, 0.9));
        list.add(new Telephone(268, 5.1 ));
        list.add(new Telephone(46, 0.17 ));
        list.add(new Telephone(46, 0.01));
        list.add(new Telephone(4631, 0.15 ));
        list.add(new Telephone(4620, 0.0 ));
        list.add(new Telephone(468, 0.15 ));
        list.add(new Telephone(46, 0.02));
        list.add(new Telephone(4673, 0.9));
        list.add(new Telephone(46732,1.1));

        list.add(new Telephone(1, 0.91 ));
        list.add(new Telephone(44, 0.4 ));
        list.add(new Telephone(92, 0.4 ));
        list.add(new Telephone(467, 0.2 ));
        list.add(new Telephone(4, 0.0001 ));

        list.add(new Telephone(1, 0.92 ));
        list.add(new Telephone(44, 0.5 ));

        list.add(new Telephone(467, 1.0 ));
        list.add(new Telephone(48, 1.2 ));
        list.add(new Telephone(4, 0.1));

        Collections.sort(list, new Telephone());

        for ( int i=0; i < list.size()-1; i++)
        {

            arr.clear();

            while ( list.get(i).getCountryCode()== list.get(i+1).getCountryCode())
            {

              arr.add(list.get(i).getPrice()) ;
              i=i+1;

            }
            arr.add(list.get(i).getPrice());

            arr.trimToSize();

            System.out.println( " Max value is " + Collections.max(arr).toString() + " for " +list.get(i).getCountryCode());
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T13:48:18.210

您可以在不预先进行任何排序的情况下执行此操作，因此您唯一的成本将是对集合的一次迭代和哈希映射的插入时间。

```
Collection<Telephone> list = ...;

Map<Integer, Double> maximumPrices = new HashMap<Integer, Double>();

for(Telephone telephone : list) {
    Double checkPrice = maximumPrices.get(telephone.getCountryCode());
    if(checkPrice == null || checkPrice < telephone.getPrice()) {
        maximumPrices.put(telephone.getCountryCode(), telephone.getPrice());
    }
} 
```

我将把添加对记录最低价格的支持作为练习留给你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T13:55:01.353

你可以让`Telephone`实施[`Comparable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)，如果国家代码相等，你可以计算你的价格进行比较。如果您对列表进行排序，您将首先按 contrycode 排序，然后按价格排序。

然后，您可以遍历您的电话集合并为每次交互保留 contrycode。您迭代的国家代码的最后一个元素将是价格最高的元素。这样您就可以一步完成国家代码比较和价格比较。

```
 public int compareTo(Telephone d){
    int cc1 = this.getCountryCode();
    int cc2 = d.getCountryCode();

    if(cc1 == cc2){
      double price1 = this.getPrice();
      double price2 = d.getPrice();          
      if(price1 < price2)
         return -1;
      if(price1 > price2)
         return 1;
      return 0;
    }

    return cc1 - cc2;    
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T14:07:43.527

我认为最好的实施取决于你所追求的。

a）如果您有一组或多或少是经常被调用的静态电话，您应该在添加新电话时尝试设置最小值，最大值。

b）如果您经常添加电话，则仅在需要时才应获得最小最大值。

a）您可以使用 HashMap ，其中键是国家/地区代码。

```
 HashMap<Integer,ArrayList<float>> telefonMap = new HashMap<Integer,ArrayList<float>();
 addtelephone(int coutrycode, float price ){
  if (telefonMap.contains(countrycode){
     telefonMap.get(contrycode).add(price);
     // if you have frequent min max requests add, else skip the next line
     Collections.sort(telefonMap.get(countrycode));
  }
  else {
     ArrayList<Float> tempList = new ArrayList<Float>();
     priceList.add(price);
     telefonMap.put(contrycode,tempList);
 }
} 
```

现在您可以通过调用获取最小最大元素

```
telephoneMap.get(countrycode).get(0 or telephoneMap.get(countrycode).size()-1) 
```

如果您在添加电话时没有对数组进行排序，那么您只需在此处调用数组并对其进行排序

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T13:56:25.640

如果我是你，我会使用如下地图。

```
// Mapping of counties and lis of prices
Map<String, List<Double>> telephones = new HashMap<String, List<Double>>();

//Searching for country code 0.1
List<Double> prices = telephones.get("0.1");

//Finding Max and Min
Double maximum = Collections.max(prices);
Double minimum = Collections.min(prices); 
```

# file - uploadify 没有上传文件

> ID：14537447
> 
> 赞同：1
> 
> 时间：2013-01-26T13:36:49.447
> 
> 标签：file, codeigniter, file-upload, upload, uploadify

我在使用 uploadify 时遇到问题。它显示完整的消息，但文件没有移动到指定的文件夹。这是我的代码

```
<script src="../../../../jquery-1.8.3.js" type="text/javascript"></script>

<script src="<?php echo base_url();?>assets/uplodify/jquery.uploadify.min.js"    type="text/javascript"></script>

 <script src="<?php echo base_url();?>assets/uplodify/jquery.uploadify.js" type="text/javascript"></script>

<link rel="stylesheet" type="text/css" href="<?php echo base_url();?>assets/uplodify/uploadify.css">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/swfobject/2.1/swfobject.js"></script> 
```

这是我的 html 和 js

```
<form enctype="multipart/form-data">
    <div id="queue"></div>
    <input id="file_upload" name="file_upload" type="file" multiple="true">
</form>

<script type="text/javascript">
    // <![CDATA[

  $(document).ready(function() {

$('#file_upload').uploadify({

'swf' : '<?php echo base_url();?>assets/uplodify/uploadify.swf',

'uploader' : '<?php echo base_url();?>assets/uplodify/uploadify.php',

'auto' : true,

'multi' : true,

'onUploadStart' : function(file) {

alert('Starting to upload ' + file.name);

},

 'onError' : function(error_array_us) {

for (myKey in error_array_us){

alert ("error_array_us["+myKey +"] = "+error_array_us[myKey]);

}

alert('The error was: ' + error_array_us);

},

'onAllComplete' : function() {

 alert('The file was saved to: ' );

}

  }); 
```

我的uploadify.php 是这样的

```
 <?php
        $targetFolder = 'http://localhost/CodeIgniter_2.1.3/assets/upload'; // 

    $verifyToken = md5('unique_salt' . $_POST['timestamp']);

    if (!empty($_FILES) && $_POST['token'] == $verifyToken) {
$tempFile = $_FILES['Filedata']['tmp_name'];
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
$targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];

// Validate the file type
$fileTypes = array('jpg','jpeg','gif','png'); // File extensions
$fileParts = pathinfo($_FILES['Filedata']['name']);

if (in_array($fileParts['extension'],$fileTypes)) {
    move_uploaded_file($tempFile,$targetFile);
    echo '1';
} else {
    echo 'Invalid file type.';
}
   } 
```

我已经上传了与网站上给出的相同的uploadify.php。我正在使用codeigniter。请有人帮助我

# javascript - Javascript = 从字符串构建变量名

> ID：14537448
> 
> 赞同：-3
> 
> 时间：2013-01-26T13:36:53.653
> 
> 标签：javascript, arrays, string

假设我有：

```
var acDeMa = [10, 20, 30, 40, 50];  
var test1 = 5;

var test2 = 7;

var test3 = 3;

var piece1;

var piece2;

var piece3;

if ( test1 == 5 )
{piece1 = "ac";}

if ( test1 == 7 )
{piece2 = "De";}

if ( test1 == 3 )
{piece3 = "Ma";} 
```

然后我如何组合这些部分，将其识别为之前的数组，并将我的数组中的值复制到一个新的数组中？

```
var finishedArray = (piece1 + piece2 + piece3); 
```

基本上，我想要下面的这种效果，但不必专门输入它的名称（acDeMa）：

```
var finishedArray = acDeMa; 
```

我该怎么做呢？这样做的原因是因为我有大约 60 个数组，我一次比较两个。一些数组有共同点，所以与其有 60 个单独的“if”语句，我宁愿使用一些选择“if”语句将正确的数组名称拼凑在一起（巧妙地找到各种数组的共同点），然后将其用作我的数组。

不，我不想在新数组中包含数字 5、7 和 3。我想要finishedArray中的数字：10、20、30、40、50，但是因为这些数字每次都可能不同，所以我不想写：

```
var finishedArray = acDeMa; 
```

或者

```
var finishedArray = [10, 20, 30, 40, 50]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T13:40:04.340

不是很推荐，但如果你在全局上下文中工作，你可以像这样使用 window 对象

```
var finishedArray = window[piece1+piece2+piece3]; 
```

这将创建对原始数组的引用。要获得单独的副本，请使用该`slice`方法

```
var finishedArray = window[piece1+piece2+piece3].slice(0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T13:41:40.343

从一个对象开始，而不是一个数组：

```
var myArrays = { acDeMa : [10, 20, 30, 40, 50] } 
```

接着

```
var finishedArray = myArrays[piece1 + piece2 + piece3]; 
```

# spring-mvc - Spring MVC 中的懒惰 @ModelAttribute

> ID：14537449
> 
> 赞同：1
> 
> 时间：2013-01-26T13:36:54.823
> 
> 标签：spring-mvc, model, annotations

春天有没有像惰性模型属性注释这样的东西？

下面的代码来解释我在寻找什么

```
@Controller
class MyController {
    private boolean hasValue=false;

@RequestMapping(value "test.html")
public String testMEthod(ModelMap model, @RequestParam(value = "person", defaultValue = "null") Person person)
    person==null ? false : true;
    return "testResults";
}

@ModelAttribute("hasValue")
public boolean hasValue(){
     return hasValue;
} 
```

上面的代码将始终将 false 设置为模型，因为所有 @ModelAttribute 都在调用任何 @RequestMapping 之前执行。为了工作，它需要强制在从请求映射调用的方法之后将 hasValue 放到模型中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T13:57:11.787

使用默认`@ModelAttribute`注释，就像您提到的那样，@ModelAttribute 方法将在带`@RequestMapping`注释的方法之前进行评估。可能有两种懒惰的方法如下：

一个。明确的，有一个方法来设置你的模型属性发布方法调用，从你的 @RequestMapping 方法调用它：

```
public void setLazyModelAttribs(Model model){
     model.addAttribute("hasValue", hasValue);
}

@RequestMapping
public void testMethod(..Model model, ...){
    //normal request mapping
    setLazyModelAttribs(model);
} 
```

湾。使用`after`aspectj 建议进行操作。

# leaflet - 反转缩放级别？

> ID：14537451
> 
> 赞同：0
> 
> 时间：2013-01-26T13:37:10.763
> 
> 标签：leaflet

我正在使用传单创建扩展地图，并想知道是否可以通过简单的方法反转缩放级别/请求的 URL 顺序。我已经检查过了：

> zoomReverse Boolean false 如果设置为 true，则磁贴 URL 中使用的缩放数字将反转（maxZoom - 缩放而不是缩放）

看起来这会做我想要的，但它真正做的只是反转请求的 url 顺序..（添加新级别时，它仍然需要重命名每个级别以添加新级别）。

换句话说，我正在寻找一种方法来解决最接近的缩放级别为 0 和最远的缩放级别为最大的数字。

我正在寻找一种无需重命名即可工作的方法。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T13:43:57.030

您需要同时设置`maxZoom`（最远缩放级别的数字）和`zoomReverse`（设置为 true）才能使其正常工作。

在内部，传单这样做：

```
_getZoomForUrl: function () {

    var options = this.options,
    zoom = this._map.getZoom();

    if (options.zoomReverse) {
        zoom = options.maxZoom - zoom;
    }

    return zoom + options.zoomOffset;
} 
```

所以它自己的管理保持不变，只是它构建 URL 的方式发生了变化。

# css - JS实现CSS网格模板布局的媒体查询支持

> ID：14537456
> 
> 赞同：1
> 
> 时间：2013-01-26T13:37:39.957
> 
> 标签：css, polyfills, grid-layout

W3C 有一个[工作草案](http://dev.w3.org/csswg/css3-layout/)来介绍 HTML 页面的高级布局机制。我发现了两个 JavaScript 实现，它们在现代浏览器中为本草案的基础提供了支持：

*   [https://github.com/acebal/ALMcss3/](https://github.com/acebal/ALMcss3/)
*   [http://code.google.com/p/css-template-layout/](http://code.google.com/p/css-template-layout/)

有谁知道这些或其他实现是否包括通过媒体查询调整布局的支持？

# c# - 当应用程序创建大量 WCF 连接器类时，与服务器的所有连接都会超时

> ID：14537457
> 
> 赞同：2
> 
> 时间：2013-01-26T13:37:42.073
> 
> 标签：c#, wcf, net.tcp

我有一个 WCF net.tcp 服务器，它使用 2 种方法公开服务：

```
string Get(location);
void Put(location); 
```

`maxConnections`设置为`int.MaxValue`。在客户端，`maxConnections`设置为 800。服务器上不会引发异常

我有一个客户端应用程序，它有时会创建 100 多个线程，每个线程都可以随时连接到服务器。

当线程共享连接器类时，应用程序工作正常。当我让每个线程创建它自己的连接器时，当我使用 20-30 个线程时，每个线程都可以正常工作。但是当应用程序创建 50 多个线程时，所有连接突然开始超时。

```
System.TimeoutException: The open operation did not complete within the allotted timeout of 00:01:00\. The time allotted to this operation may have been a portion of a longer timeout. ---> System.TimeoutException: The socket transfer timed out after 00:01:00\. You have exceeded the timeou
t set on your binding. The time allotted to this operation may have been a portion of a longer timeout. ---> System.Net.Sockets.SocketException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected
 host has failed to respond
   at System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags)
   at System.ServiceModel.Channels.SocketConnection.ReadCore(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout, Boolean closing)
   --- End of inner exception stack trace ---
   at System.ServiceModel.Channels.SocketConnection.ReadCore(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout, Boolean closing)
   at System.ServiceModel.Channels.SocketConnection.Read(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout)
   at System.ServiceModel.Channels.DelegatingConnection.Read(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout)
   at System.ServiceModel.Channels.ClientFramingDuplexSessionChannel.SendPreamble(IConnection connection, ArraySegment`1 preamble, TimeoutHelper& timeoutHelper)
   at System.ServiceModel.Channels.ClientFramingDuplexSessionChannel.DuplexConnectionPoolHelper.AcceptPooledConnection(IConnection connection, TimeoutHelper& timeoutHelper)
   at System.ServiceModel.Channels.ConnectionPoolHelper.EstablishConnection(TimeSpan timeout)
   at System.ServiceModel.Channels.ClientFramingDuplexSessionChannel.OnOpen(TimeSpan timeout)
   --- End of inner exception stack trace ---

Server stack trace:
   at System.ServiceModel.Channels.ClientFramingDuplexSessionChannel.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.CallOpenOnce.System.ServiceModel.Channels.ServiceChannel.ICallOnce.Call(ServiceChannel channel, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.CallOnceManager.CallOnce(TimeSpan timeout, CallOnceManager cascade)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]:
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at MySource.Get(String account)
   at MyService.Get(String account) in d:\Users\menkaur\Documents\Expression\Blend 4\Projects\Service References\MySourceService\Reference.cs:line 99
   at auto_liker_bot.Program.<>c__DisplayClass58.<>c__DisplayClass60.<Main>b__4c(IMySource _mySource) in d:\Users\menkaur\Documents\Expression\Blend 4\Projects\my-project\Program.cs:line 473
   at auto_liker_bot.Program.PerformAction(UInt64 threadId, IMySource& mySource, Action`1 action) in d:\Users\menkaur\Documents\Expression\Blend 4\Projects\my-project\Program.cs:line 919 
```

这不是我第一次注意到 WCF 类发生了类似的事情。

这是 WCF 的硬性限制，还是我可以更改设置以摆脱这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:04:53.480

您遇到的是从客户端到主机的连接数限制。它不是由 WCF 设置的，但 WCF 不能免疫它。你需要增加它。查看：

*   如果要在代码中设置[ServicePointManager.DefaultConnectionLimit](http://msdn.microsoft.com/en-us/library)
*   [配置文件中的ConnectionManagement](http://msdn.microsoft.com/en-us/library/fb6y0fyc.aspx)元素

基本上，默认情况下，您只有 2 个与同一主机的连接。随着线程数量的增加，连接请求增加并排队，但由于只有 2 个可用，在某些时候您开始出现超时。

# iphone - 堆栈布局 - Cocoa Touch

> ID：14537463
> 
> 赞同：0
> 
> 时间：2013-01-26T13:38:43.717
> 
> 标签：iphone, ios, ipad, cocoa-touch

我有几个高度灵活的标签，它们需要垂直放置。所以我的问题是，是否有一些提供堆栈布局功能的框架或库，所以我不需要重新计算标签的实际大小和位置？我知道也许 WebView 和构建 html 可以完成这项工作，但这不是解决方案，因为我必须在标签之间添加按钮和其他控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:41:51.793

不，没有这样的框架。使用`relative position`.it 非常简单。只需更改第一个控制位置，您就可以通过相对位置更改其他控制位置。

只需提及第一个控制框架点并根据第一个控制示例伪代码调整其他控制框架：

```
controlFirst.Frame= CGRectMake(10,10,50,20); 
```

然后

```
 controlSecond.Frame= controlFirst.Frame+10;

 controlThird.Frame= controlSecond.Frame+10; 
```

# sql - SQL Server 2008 SELECT 相似词

> ID：14537468
> 
> 赞同：2
> 
> 时间：2013-01-26T13:39:30.880
> 
> 标签：sql, sql-server-2008, select

是否可以在 SQL Server 2008 中搜索相似词？

如果用户键入：`Ayrton Sena`

使用单个`'n'`它还应该返回`Ayrton Senna`带有两个的行`'nn'`

我认为同样的方法适用于拼写检查单词

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:13:03.947

由于“Senna”不是“Sena”的反映，因此很难使用全文索引来解决此任务。

我建议使用全文和字符串相似度的组合来决定两个字符串是否被认为是“相等的”。

因此，如果您搜索多个单词并且允许其中一个单词拼写错误，请使用类似这样的内容

```
select * 
  from myTable t 
       join FullTextTable(myTable,TextField,'Ayrton Senna') f 
         on f.ID=t.PK
where dbo.MyExternalStringSimilarity('Ayrton Senna', t.TextField)>0.9 
```

现在你只需要一个字符串相似度函数。您可以使用 microsoft 数据质量服务中的“相似性”功能或自己编写。

寻找 Jaro-Winkler、Levenshtein、Dice-Coefficient 等。这些是进行字符串相似性比较的好算法。

当然，您也可以使用扫描整个数据库

```
select *
 from myTable t
 where dbo.MyExternalStringSimilarity('Ayrton Senna', t.TextField)>0.9 
```

但这可能需要很长时间才能执行。

编辑：但是，我们目前正在使用第一种方法来查找名称的所有相似拼写。它工作得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-06-26T09:00:30.017

我一直在研究一个类似的问题，并偶然发现了一个 1990 年创建的“变音”算法。它实际上是 Soundex 的更准确版本，可用于识别语音上相似的单词。它在某些编程语言中显示为内置函数。 [这是“Phil Factor”的一个 SQL Server 等效函数](https://www.red-gate.com/simple-talk/blogs/string-comparisons-sql-metaphone-algorithm/)，我们一直在使用它并取得了一些成功。[它是从php 的内置变音功能](https://www.php.net/manual/en/function.metaphone.php)逆向工程的。

我在下面粘贴了一个重新格式化的版本，这样我可以更容易地阅读代码。

```
IF  OBJECT_ID('Utils.Metaphone','FN') IS NOT NULL --drop any existing metaphone function
   DROP FUNCTION Utils.Metaphone
GO
CREATE FUNCTION Utils.Metaphone
(
    @String VARCHAR(30)
)
RETURNS VARCHAR(10)
AS
BEGIN
DECLARE @New BIT
        ,@ii INT
        ,@Metaphone VARCHAR(28)
        ,@Len INT
        ,@Where INT;
DECLARE @This CHAR
        ,@Next CHAR
        ,@Following CHAR
        ,@Previous CHAR
        ,@Silent BIT;

SELECT  @String = UPPER(LTRIM(COALESCE(@String, ''))); --trim and upper case
SELECT  @Where = PATINDEX ('%[^A-Z]%', @String COLLATE Latin1_General_CI_AI ) 
WHILE   @Where > 0 --strip out all non-alphabetic characters!
BEGIN
    SELECT @String = STUFF(@string, @Where, 1, '')
    SELECT @Where = PATINDEX ('%[^A-Z]%',@String COLLATE Latin1_General_CI_AI ) 
END
IF  (LEN(@String) < 2) RETURN  @String

--do the start of string stuff first.
--If the word begins with 'KN', 'GN', 'PN', 'AE', 'WR', drop the first letter.
-- "Aebersold", "Gnagy", "Knuth", "Pniewski", "Wright"
IF  SUBSTRING(@String, 1, 2) IN ( 'KN', 'GN', 'PN', 'AE', 'WR' )
    SELECT @String = STUFF(@String, 1, 1, '');
-- Beginning of word: "x" change to "s" as in "Deng Xiaopeng"
IF  SUBSTRING(@String, 1, 1) = 'X'
    SELECT @String = STUFF(@String, 1, 1, 'S');
-- Beginning of word: "wh-" change to "w" as in "Whatsoever"
IF  @String LIKE 'WH%'
    SELECT @String = STUFF(@String, 1, 1, 'W');
-- Set up for While loop 
SELECT  @Len = LEN(@String), @Metaphone = '' -- Initialize the main variable 
        ,@New = 1 -- this variable only used next 10 lines!!!
        ,@ii = 1; --Position counter
--
WHILE((LEN(@Metaphone) <= 8) AND (@ii <= @Len))
BEGIN --SET up the 'pointers' for this loop-around }
    SELECT  @Previous = CASE WHEN @ii > 1 THEN SUBSTRING(@String, @ii - 1, 1) ELSE '' END
            -- originally a nul terminated string }
            ,@This = SUBSTRING(@String, @ii, 1)
            ,@Next = CASE WHEN @ii < @Len THEN SUBSTRING(@String, @ii + 1, 1) ELSE '' END
            ,@Following = CASE WHEN((@ii + 1) < @Len) THEN SUBSTRING(@String, @ii + 2, 1) ELSE '' END

    -- 'CC' inside word
    /* Drop duplicate adjacent letters, except for C.*/
    IF  @This=@Previous AND @This<> 'C' 
    BEGIN
        --we do nothing 
        SELECT  @New=0
    END
    /*Drop all vowels unless it is the beginning.*/
    ELSE IF @This IN ( 'A', 'E', 'I', 'O', 'U' )
    BEGIN
        IF  @ii = 1 --vowel at the beginning
            SELECT @Metaphone = @This;
            /* B -> B unless at the end of word after "m", as in "dumb", "Comb" */
    END;
    ELSE IF @This = 'B' AND NOT ((@ii = @Len) AND (@Previous = 'M'))
    BEGIN
        SELECT @Metaphone = @Metaphone + 'B';
    END;
    -- -mb is silent
    /*'C' transforms to 'X' if followed by 'IA' or 'H' (unless in latter case, it is part of '-SCH-',
    in which case it transforms to 'K'). 'C' transforms to 'S' if followed by 'I', 'E', or 'Y'. 
    Otherwise, 'C' transforms to 'K'.*/
    ELSE IF @This = 'C'
    BEGIN -- -sce, i, y = silent 
        IF NOT (@Previous= 'S') AND (@Next IN ( 'H', 'E', 'I', 'Y' )) --front vowel set 
        BEGIN
            IF  (@Next = 'I') AND (@Following = 'A')
                SELECT @Metaphone = @Metaphone + 'X'; -- -cia- 
            ELSE IF(@Next IN ( 'E', 'I', 'Y' ))
                SELECT @Metaphone = @Metaphone + 'S'; -- -ce, i, y = 'S' }
            ELSE IF(@Next = 'H') AND (@Previous = 'S')
                SELECT @Metaphone = @Metaphone + 'K'; -- -sch- = 'K' }
            ELSE IF(@Next = 'H')
            BEGIN
                IF(@ii = 1) AND ((@ii + 2) <= @Len) AND NOT(@Following IN ( 'A', 'E', 'I', 'O', 'U' ))
                    SELECT @Metaphone = @Metaphone + 'K';
                ELSE
                    SELECT @Metaphone = @Metaphone + 'X';
            END
        END
        ELSE 
            SELECT @Metaphone = @Metaphone +CASE WHEN @Previous= 'S' THEN '' ELSE 'K' END;
        -- Else silent 
    END; -- Case C }
    /*'D' transforms to 'J' if followed by 'GE', 'GY', or 'GI'. Otherwise, 'D' 
    transforms to 'T'.*/
    ELSE IF @This = 'D'
    BEGIN
        SELECT @Metaphone = @Metaphone
                + CASE WHEN(@Next = 'G') AND (@Following IN ( 'E', 'I', 'Y' )) --front vowel set 
                        THEN 'J'
                        ELSE 'T'
                  END;
    END;
    ELSE IF @This = 'G'
    /*Drop 'G' if followed by 'H' and 'H' is not at the end or before a vowel. Drop 'G' 
    if followed by 'N' or 'NED' and is at the end.
    'G' transforms to 'J' if before 'I', 'E', or 'Y', and it is not in 'GG'. 
    Otherwise, 'G' transforms to 'K'.*/
    BEGIN
        SELECT @Silent = CASE WHEN (@Next = 'H')
                                    AND (@Following IN ('A','E','I','O','U'))
                                    AND (@ii > 1)
                                    AND (
                                                ((@ii+1) = @Len)
                                            OR 
                                                (
                                                    (@Next = 'n')
                                                    AND (@Following = 'E')
                                                    AND SUBSTRING(@String,@ii+3,1) = 'D'
                                                )
                                            AND ((@ii+3) = @Len)
                                        )
                                    -- Terminal -gned 
                                    AND (@Previous = 'i')
                                    AND (@Next = 'n')
                                THEN 1 
                                -- if not start and near -end or -gned.) 
                              WHEN (@ii > 1)
                                    AND (@Previous = 'D')-- gnuw
                                    AND (@Next IN ('E','I','Y')) --front vowel set 
                                THEN 1 -- -dge, i, y 
                              ELSE 0
                          END
        IF  NOT(@Silent=1)
            SELECT @Metaphone = @Metaphone
                    + CASE WHEN (@Next IN ('E','I','Y')) --front vowel set 
                            THEN 'J'
                            ELSE 'K'
                      END
    END
    /*Drop 'H' if after vowel and not before a vowel.
    or the second char of  "-ch-", "-sh-", "-ph-", "-th-", "-gh-"*/

    ELSE IF @This = 'H'
    BEGIN
        IF  NOT( (@ii= @Len) OR (@Previous IN  ( 'C', 'S', 'T', 'G' ))) 
            AND (@Next IN ( 'A', 'E', 'I', 'O', 'U' ) )
            SELECT @Metaphone = @Metaphone + 'H';
            -- else silent (vowel follows) }
    END;
    ELSE IF @This IN --some get no substitution
                ( 'F', 'J', 'L', 'M', 'N', 'R' )
    BEGIN
        SELECT  @Metaphone = @Metaphone + @This;
    END;
    /*'CK' transforms to 'K'.*/
    ELSE IF @This = 'K'
    BEGIN
        IF  (@Previous <> 'C')
            SELECT @Metaphone = @Metaphone + 'K';
    END;
    /*'PH' transforms to 'F'.*/
    ELSE IF @This = 'P'
    BEGIN
        IF(@Next = 'H')
            SELECT @Metaphone = @Metaphone + 'F', @ii = @ii + 1;
        -- Skip the 'H' 
        ELSE
            SELECT @Metaphone = @Metaphone + 'P';
    END;
    /*'Q' transforms to 'K'.*/
    ELSE IF @This = 'Q'
    BEGIN
        SELECT @Metaphone = @Metaphone + 'K';
    END;
    /*'S' transforms to 'X' if followed by 'H', 'IO', or 'IA'.*/
    ELSE IF @This = 'S'
    BEGIN
        SELECT @Metaphone = @Metaphone
                + CASE WHEN (@Next = 'H')
                            OR
                                (
                                    (@ii> 1)
                                    AND (@Next = 'i') 
                                    AND (@Following IN ( 'O', 'A' ) )
                                )
                        THEN 'X'
                        ELSE 'S'
                  END;
    END;
    /*'T' transforms to 'X' if followed by 'IA' or 'IO'. 'TH' transforms 
    to '0'. Drop 'T' if followed by 'CH'.*/
    ELSE IF @This = 'T'
    BEGIN
        SELECT @Metaphone = @Metaphone
                + CASE WHEN (@ii = 1)
                            AND (@Next = 'H')
                            AND (@Following = 'O') 
                        THEN 'T' -- Initial Tho- }
                       WHEN (@ii > 1)
                            AND (@Next = 'i') 
                            AND (@Following IN ( 'O', 'A' )) 
                        THEN 'X'
                       WHEN (@Next = 'H')
                        THEN '0'
                       WHEN NOT((@Next = 'C')
                                AND (@Following = 'H')) 
                        THEN 'T'
                       ELSE ''
                  END;
                -- -tch = silent }
    END;
    /*'V' transforms to 'F'.*/
    ELSE IF @This = 'V'
    BEGIN
        SELECT @Metaphone = @Metaphone + 'F';
    END;
    /*'WH' transforms to 'W' if at the beginning. Drop 'W' if not followed by a vowel.*/
    /*Drop 'Y' if not followed by a vowel.*/
    ELSE IF @This IN ( 'W', 'Y' )
    BEGIN
    IF @Next IN ( 'A', 'E', 'I', 'O', 'U' )
        SELECT @Metaphone = @Metaphone + @This;
    --else silent 
    /*'X' transforms to 'S' if at the beginning. Otherwise, 'X' transforms to 'KS'.*/
    END;
    ELSE IF @This = 'X'
    BEGIN
        SELECT @Metaphone = @Metaphone + 'KS';
    END;
    /*'Z' transforms to 'S'.*/
    ELSE IF @This = 'Z'
    BEGIN
        SELECT @Metaphone = @Metaphone + 'S';
    END;
    ELSE
        RETURN 'error with '''+ @This+ '''';
    -- end
    SELECT @ii = @ii + 1;
END; -- While 
RETURN @Metaphone 
END 
```

以下测试都生成相同的结果。

```
SELECT  Utils.Metaphone('Aryton Sena')
        ,Utils.Metaphone('Aryton Senna')
        ,Utils.Metaphone('Ayrton Senna')
        ,Utils.Metaphone('Ayrton Sena')
        ,Utils.Metaphone('Aryten Sena')
        ,Utils.Metaphone('Aryten Senna')
        ,Utils.Metaphone('Ayrten Senna')
        ,Utils.Metaphone('Ayrten Sena'); 
```

结果：

```
ARTNSN 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T12:54:16.810

拼写检查器通常通过在字典中查找单词来工作。如果您的单词与字典中的单词完全匹配，则拼写正确。如果不是，则找到最接近的匹配项，并建议将其作为替代项。一些拼写检查器持有替代拼写或常见的拼写错误，但这并没有从根本上改变它们的工作方式。

Jaro-Winkler 是一种距离度量，因为它测量两个单词之间的“距离”，即从第一个单词到第二个单词需要进行多少换位。Jaro 通常用于匹配人名，因为这是它擅长的。它也可以用于更一般的匹配，但您需要注意缩写等，因为它们会混淆它。

性能应该不是问题。我通常在 .NET 应用程序中实现 Jaro Winkler 算法，因为编写为 SQL UDF 很棘手。我想你也可以使用外部 CLR 存储过程？这在匹配数万条记录时表现良好。如果您可能要匹配数百万个名称，那么性能可能更受关注？

这是您如何处理此问题的示例：http: [//isolvable.blogspot.co.uk/2011/05/jaro-winkler-fast-fuzzy-linkage.html](http://isolvable.blogspot.co.uk/2011/05/jaro-winkler-fast-fuzzy-linkage.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T13:41:43.387

查看[全文搜索](http://msdn.microsoft.com/en-us/library/ms142571(v=sql.105).aspx)。这允许各种搜索，包括不同的单词形式。您可以配置单词形式或使用开箱即用的字典。

**引用**（强调我的）**：**

> 全文查询通过根据特定语言（如英语或日语）的规则对单词和短语进行操作，对全文索引中的文本数据执行语言搜索。全文查询可以包括简单的单词和短语或单词或短语**的多种形式。**

请参阅有关词库的[此答案。](https://stackoverflow.com/questions/5743573/full-text-search-sql-server-with-mistyped-words)

[全文](https://stackoverflow.com/questions/37059/lucene-net-and-sql-server)搜索的替代方法是[Lucene](http://www.ifdefined.com/blog/post/2009/02/Full-Text-Search-in-ASPNET-using-LuceneNET.aspx)。

# ruby-on-rails - Rails 应用程序中的 Markdown

> ID：14537469
> 
> 赞同：1
> 
> 时间：2013-01-26T13:39:32.510
> 
> 标签：ruby-on-rails, rendering, haml, markdown

我已经在诸如 content_home.md 和 content_other_page.md 之类的 markdown 文件中编写了我的纯页面内容

我正在为我的模板使用 haml，当我使用 :markdown 过滤器并粘贴我的 markdown 时，它可以完美运行。然后我认为将实际降价保持在视图之外以分离内容会很好，因此我删除了降价过滤器和内容，并且需要一种方法来让它在特定点呈现真实的 .md 文件。

那么我的问题如下：

*   将 .md 文件放在我的 Rails 应用程序结构中的最佳位置在哪里？

*   我如何调用它们从视图中呈现并让它们由降价处理？如果它们可以由 Haml 降价过滤器处理，我会更喜欢它，但我愿意接受建议。

尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T14:48:28.797

通过使用解决它：

```
 :markdown
    #{render 'home.md'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-12T02:56:31.193

来自[Embedded Markdown](https://github.com/ytbryan/emd) github 页面，支持 Rails 产品上的 Markdown 渲染

将这些行添加到应用程序的 Gemfile 中：

```
gem 'coderay' #optional for Syntax Highlighting
gem 'redcarpet'
gem 'emd' 
```

然后执行：

```
bundle 
```

要在代码块上创建 markdown 部分、查看或启用语法高亮，请访问[emd 的用法](https://github.com/ytbryan/emd#usage)

# jquery - 表单从不使用 jQuery 验证插件提交 - 即使有效

> ID：14537476
> 
> 赞同：3
> 
> 时间：2013-01-26T13:40:27.157
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery Validation 插件来验证我的表单，但即使在成功验证后表单也不会提交。这是重现该问题的代码：

```
<?php
if(isset($_REQUEST['submit'])){
    echo "form submitted";  //have to insert into database here
}
?>

<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
<script type="text/javascript">
jQuery.validator.setDefaults({
    debug: true,
    success: "valid"
});;
</script>
<script>
  $(document).ready(function(){
    $("#myform").validate({
  rules: {
    field1: {
      required: true,
      number: true
    },
    field2: {
      required: true,
      number: true,
      minlength: 3
    },
    field3: {
      required: true,
      email: true
    }
  }
});
  });
  </script>

    <form id="myform" method="post" action="">
      <div>
        <label for="field">Required, decimal number: </label>
        <input class="left" id="field1" name="field1" type="text" />
      </div>
      <br>
      <div>
        <label for="field">Required, Minimum length 3: </label>
        <input class="left" id="field2" name="field2" type="text" />
      </div>
      <br>
      <div>
        <label for="field">Required, email: </label>
        <input class="left" id="field3" name="field3" type="text" />
      </div>
      <br/>
      <input type="submit" name="submit" value="Validate!" />
    </form> 
```

请注意，无论表单标签中是否存在有效操作，都会发生这种情况。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T13:50:50.923

设置`debug`为假：

```
<script type="text/javascript">
jQuery.validator.setDefaults({
    debug: false,
    success: "valid"
});;
</script> 
```

如果`debug`为真，则不提交表单：[http](http://docs.jquery.com/Plugins/Validation/validate#options) ://docs.jquery.com/Plugins/Validation/validate#options 例如[http://codepad.viper-7.com/H4OFP5](http://codepad.viper-7.com/H4OFP5)

# python - 使用类解决光的难题，但有翻转的麻烦。(Python 3)

> ID：14537477
> 
> 赞同：1
> 
> 时间：2013-01-26T13:40:39.830
> 
> 标签：python, python-3.x

有任务：

> 我有一块灯板，编号为 0,1,2,...,1023。
> 每个灯都可以打开或关闭。所有灯最初都是关闭的。
> 
> 第1步：
> 
> 我从 0 开始翻转所有的灯。
> 此时，所有的灯都打开了。
> 
> 第 2 步：我从 0 开始每隔一秒翻转一次 Light。
> 此时，Lights 0,2,4,6,8,... 已关闭。
> 灯 1,3,5,7,9,... 仍然亮着。
> 
> 第 3 步：我从 0 开始每隔三个灯翻转一次。
> 所以我翻转灯 0、3、6、9、12，...
> 也就是说，如果灯打开，我将其翻转为关闭。
> 如果灯熄灭，我将其打开。
> 
> ...
> 
> 步骤 1023：
> 我从 0 开始每隔 1023'rd Light 翻转一次。
> 所以我翻转 0 和 1023。
> 
> 问题：此时，哪些灯亮，哪些灯熄灭？

这是我的代码：

```
class Light:

    def __init__(self):
        self.state = 'OFF'

    def turn_on(self):
        self.state = 'ON'

    def turn_off(self):
        self.state = 'OFF'

    def flip(self):
        if self.state == 'OFF':
            self.state = 'ON'
        else:
            self.state = 'OFF'

    def __str__(self):
        return str(self.state)

class LightBoard:

    def __init__(self, num_lights):
        self.light = [Light()] * num_lights

    def step(self,i):
        for element in self.light:
            if self.light.index(element) % i == 0:
                self.light[self.light.index(element)] = self.light[self.light.index(element)].flip()

    def all_steps(self):
        i = 0
        while i != len(self.light):
            self.light = self.light.step(self.light, i)
            i += 1

    def __str__(self):
        return str(self.light) 
```

我使用了 python 可视化工具，发现 LightBoard 中的 all_steps 不起作用。

> AttributeError：“列表”对象没有属性“步骤”

我迷失在纠正它。
请帮助更正/对我的代码发表评论。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:45:10.600

一个问题在于

```
 self.light = [Light()] * num_lights 
```

这需要更改为

```
 self.light = [Light() for _ in range(num_lights)] 
```

否则，`self.light`包含对同一`Light`对象的引用。

还有其他问题，包括：

1.  您需要两级循环，而不仅仅是一层。
2.  以下有几个错误：`self.light = self.light.step(self.light, i)`。一个问题是您正在调用`step`，`self.light`这是一个列表。

PS你必须为此编写程序吗？这是使用笔和纸可以很容易解决的问题之一。

# jquery - 在 wordpress 中调用 wp_current_user() 会使非 jquery

> ID：14537480
> 
> 赞同：3
> 
> 时间：2013-01-26T13:40:51.497
> 
> 标签：jquery, session, wordpress, membership

我正在使用 s2member 插件在 WP 中创建网站。我在使用 s2member 成员代码的地方使用了这几行

```
 $current_user = get_current_user_id(); / get current looged in user ID
    $_SESSION['id']=$current_user;  // put that in session 
```

我有疑问这是在 WP 中设置会话的正确方法吗？（我在顶部使用了 set_session） 结果：

*   如果取消注释上面的代码，jquery 不会运行。
*   WP顶部显示当前登录用户的灰色条完全空白，不显示任何登录用户。

    ![注释代码时的栏](../Images/02e28f6071b40f40dda6fd926dda366e.png)

我认为在 WP 中设置会话有不同的方法，或者它不允许你这样做。在这方面有任何帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:20:21.720

Not sure of the context where this is being used, but two things:

*   `'id'` is too much of a common argument, used everywhere, try `'u_id'`
    It comes to mind because of this WordPress Answer: [List of reserved names in $_POST and $_REQUEST used by WordPress 3.5](https://wordpress.stackexchange.com/a/77339/12615)

*   `$current_user` is a global WordPress core variable, use another name. And as suggested in the linked Answer, ***prefix everything***.

# java - GWT runAsync - 生成的片段代码依赖

> ID：14537483
> 
> 赞同：0
> 
> 时间：2013-01-26T13:41:32.700
> 
> 标签：java, gwt, split, gwt-compiler

我正在尝试通过在初始化不同的子系统时使用 runAsync 来修改我的应用程序的加载性能，我有几个问题：

1.  当回调的 onSuccess 方法中调用的代码被拆分到另一个下载片段中时，被调用的类、子类、方法（主类的那些以及它们使用的类的那些）等的所有代码也会被拆分，并且不包含在初始下载中？

2.  在回调的 onSuccess 之外实例化一个类时，该类的整个代码是否会包含在初始下载中（方法、成员、其他子类）？因此，如果我在回调的 onSuccess 中调用该类中的方法，则代码将包含在单独的下载中（即，来自类的构造函数的代码将在初始下载中，而来自其调用方法的代码将在单独的下载中？）

如果答案在另一篇文章中，请分享:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T06:20:50.420

如果您有任何疑问，请阅读此内容，然后发表评论。

[https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting)

[http://www.javabeat.net/2011/11/code-splitting-in-gwt/](http://www.javabeat.net/2011/11/code-splitting-in-gwt/)

# jquery - 无法使 jsFiddle 示例工作

> ID：14537486
> 
> 赞同：0
> 
> 时间：2013-01-26T13:41:50.127
> 
> 标签：jquery, html, jquery-mobile, jsfiddle

我希望在这里找到相同的功能：http: [//jsfiddle.net/jhruh/2/](http://jsfiddle.net/jhruh/2/)在我的网站上。

我不明白为什么如果我复制所有东西，我就得不到相同的功能。我所做的步骤是：

1.  复制了 HTML
2.  添加了 jquery 库（`<script src="http://code.jquery.com/jquery-1.8.3.js"></script>`在我在步骤 1 中复制的 html 的头部
3.  添加了一个 script 标签作为包含 jsFiddler 代码的 body 标签的最后一个子标签。
4.  在 JavaScript 代码之上添加了 jquery $(function(){})。

换句话说，我现在有：

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width" />

    <!-- Step 2 -->
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head>
<body>
    <div data-role="page" id="index">
        <div data-role="header">
            <h1>
                XML Parsing demo</h1>
        </div>
        <div data-role="content">
            <ul data-role="listview" data-inset="true" id="cars-data">
            </ul>
        </div>
    </div>
    <div data-role="page" id="cars">
        <div data-role="header">
            <a data-role="button" data-transition="none" data-theme="a" href="#index">Back</a>
            <h1>
            </h1>
        </div>
        <div data-role="content">
            <ul data-role="listview" data-inset="true" id="car-data">
            </ul>
            <img src="" width="100%" style="height: auto;" id="car-img" />
        </div>
    </div>

    <!-- Step 3 -->
    <script>

        // <!-- Step 4 // do stuff after DOM has loaded -->
        $(function () {

            $('#index').live('pagebeforeshow', function (e, data) {
                $('#cars-data').empty();
                $.ajax({
                    type: "POST",
                    url: "InvalidUrlCreatedOnPurpose",
                    dataType: "xml",
                    data: {
                        xml: "<cars><car><name>TOYOTA</name><country>JAPAN</country><pic>http://1call.ms/Websites/schwartz2012/images/toyota-rav4.jpg</pic><description>Toyota has announced that it will recall a total of 778,000 units that may have been manufactured with improperly-tightened nuts on the rear suspension.</description></car></cars>"
                    },
                    success: function (xml) {

                        var xmlstr = (new XMLSerializer()).serializeToString(xml);
                        alert(xmlstr);

                        alert(xml);
                        ajax.parseXML(xml);

                    },
                    error: function (request, error) {
                        alert('Remember to remove this message once it works!');
                        var x = "<cars><car><name>TOYOTA</name><country>JAPAN</country><pic>http://1call.ms/Websites/schwartz2012/images/toyota-rav4.jpg</pic><description>Toyota has announced that it will recall a total of 778,000 units that may have been manufactured with improperly-tightened nuts on the rear suspension.</description></car></cars>";
                        ajax.parseXML(x);
                    }
                });
            });

            $("#cars").live('pagebeforeshow', function () {
                $("#cars div[data-role='header'] h1").html(carObject.carName);
                $('#car-data').empty();
                $('#car-data').append('<li>Car Type:<span> ' + carObject.carName + '</span></li>');
                $('#car-data').append('<li>Car Country:<span> ' + carObject.carCountry + '</span></li>');
                $('#car-data').append('<li>Car Description:<span> ' + carObject.description + '</span></li>');
                $('#car-data').listview('refresh');
                $('#car-img').attr('src', carObject.img);

            });

            var ajax = {
                parseXML: function (result) {
                    $(result).find("car").each(function () {
                        carObject.carName = $(this).find('name').text();
                        carObject.carCountry = $(this).find('country').text();
                        carObject.img = $(this).find('pic').text();
                        carObject.description = $(this).find('description').text();

                        $('#cars-data').append('<li><a href="#cars"><img src="' + carObject.img + '" title="sample" height="100%" width="100%"/><h3>Car type:<span> ' + carObject.carName + '</span></h3><p>' + carObject.description + '</p></a></li>');
                    });
                    $('#cars-data').listview('refresh');
                    $('#index').append('<div data-role="footer" data-position="fixed"><h1>Dynamicaly added footer</h1></div> ');
                    $('#index [data-role="content"]').append('<fieldset data-role="controlgroup"><legend>Choose:</legend><input type="radio" name="radio" id="radio1" value="1" checked="checked" /><label for="radio1">option 1</label></fieldset>');
                    $('#index').trigger('pagecreate');
                }
            }

            var carObject = {
                carName: '',
                carCountry: '',
                img: '',
                description: ''
            }

        });

    </script>
</body>
</html> 
```

页面行为不同，为什么？我知道 jsFiddler 可以使用 url 'echo' 模拟 ajax 调用，但我故意模拟了一个错误，希望能在我的网站上得到相同的结果。

## 编辑

我将图像源更改为：[http ://cdn1.iconfinder.com/data/icons/sleekxp/Google%20Chrome.png](http://cdn1.iconfinder.com/data/icons/sleekxp/Google%20Chrome.png)

我更新了 jsFiddler，新链接是：http: [//jsfiddle.net/jhruh/3/](http://jsfiddle.net/jhruh/3/) ，但我无法让它继续工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:54:24.953

第 33 行，第 74 列：元素 img 上属性 src 的错误值：必须为非空。IRI 引用的语法：任何 URL。例如：/hello、#canvas 或[http://example.org/](http://example.org/)。字符应在 NFC 中表示，空格应转义为 %20。

# javascript - 如何以编程方式触发 D3 拖动事件？

> ID：14537492
> 
> 赞同：8
> 
> 时间：2013-01-26T13:42:34.750
> 
> 标签：javascript, d3.js

所以我有一些与拖动事件监听器绑定的数据：

```
myNodes.enter()
    .append("svg:g")
    .call(d3.behavior.drag()
        .on("drag", function() { 
            console.log(d3.event.dx, d3.event.dy);
        })
    ); 
```

现在我想以编程方式在某个节点上调用这个 onDrag 函数。我确实知道标准事件也可以这样做

```
aNode.on("click")() // works
aNode.on("drag")()  // doesn't work 
```

有什么办法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-24T14:29:42.520

将回调（您传递给拖动处理程序的回调）保存在一个变量中，然后在您的其他上下文中调用此变量。

```
var dragCallback = function(){
  console.log(d3.event.dx, d3.event.dy);
};
var dragBehavior = d3.behavior.drag()
                     .on("drag", dragCallback);
myNodes.enter()
  .append("g")
  .call(dragBehavior);
  //Call drag method programmatically
  dragCallback() 
```

# sql - SAS\SQL 分组和计数...查找第一个和最后一个并进行比较

> ID：14537501
> 
> 赞同：0
> 
> 时间：2013-01-26T13:44:01.477
> 
> 标签：sql, sas

我有一个问题，我一直在试图解决......我基本上有一张看起来有点像这样的桌子......

```
ID    user    operation     date
1     Jon     In         01/01/2013
1     Paul    Out        02/01/2013
1     Paul    In         03/01/2013
2     Jon     Deleted    04/01/2013
2     Paul    In         05/01/2013
2     Jon     Out        06/01/2013
1     Jon     out        07/01/2013
1     Jon     Deleted    08/01/2013
2     Jon     out        09/01/2013 
1     Jon     in         11/01/2013 
```

所以基本上我需要找到相同 ID 的 Jon 和 Paul 在哪里“在”。因此，在关于 Jon 和 Paul 的示例中，ID 为 1，而 ID 为 2，我只会找到 Paul。因此，该行的最后一个已知日期必须包含在早期输入、输出或删除中，因为它后来被更改而被忽略。所以简而言之，我需要找到存在 IN 并且后来没有设置为“out”的 ID 值或提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:28:20.313

如果您对数据进行正确排序，则首先使用。在数据步骤中应该可以工作（除非您的 id 和用户在同一天有超过 1 个条目，否则您需要确定在这种情况下使用哪一个）。

```
data have;
input ID user $ operation $ date :mmddyy10.;
format date mmddyy10.;
cards;
1     Jon     In         01/01/2013
1     Paul    Out        02/01/2013
1     Paul    In         03/01/2013
2     Jon     Deleted    04/01/2013
2     Paul    In         05/01/2013
2     Jon     Out        06/01/2013
1     Jon     out        07/01/2013
1     Jon     Deleted    08/01/2013
2     Jon     out        09/01/2013 
1     Jon     in         11/01/2013
;
run;

proc sort data=have;
by id user descending date;
run;

data want;
set have;
by id user;
if first.user and lowcase(operation)='in' then output;
run; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:45:17.703

以下代码是针对您的特定问题和数据的临时代码。使用宏逻辑来概括代码以适用于任意数量的用户会稍微复杂一些，尽管并非不可能。

```
proc sort data=original_dataset;
   by date id user operation;
run;

data results_dataset;
   set original_dataset;
   retain _jon _paul 0;
   drop _jon _paul;
   if trim(left(lowcase(operation))) eq 'deleted' then delete;
   else if trim(left(lowcase(operation))) eq 'in' then do;
      if trim(left(lowcase(user))) eq 'jon' then _jon = 1;
      else if trim(left(lowcase(user))) eq 'paul' then _paul = 1;
   end;
   else if trim(left(lowcase(operation))) eq 'out' then do;
      if trim(left(lowcase(user))) eq 'jon' then _jon = 0;
      else if trim(left(lowcase(user))) eq 'paul' then _paul = 0;
   end;
   if (_jon eq 1) and (_paul eq 1) then output;
run; 
```

# css - 纹理背景顶部的透明PNG

> ID：14537502
> 
> 赞同：0
> 
> 时间：2013-01-26T13:44:02.537
> 
> 标签：css, png, transparency

我在使用透明 PNG（渐变）时遇到问题，当将图像放在带纹理的背景上时，PNG 会被白色半透明颜色填充，我不知道为什么。

我需要它只是透明的。

请参阅这张照片的顶部。 [http://i48.tinypic.com/33o71vt.jpg](http://i48.tinypic.com/33o71vt.jpg)

下面是css/less：

```
@import "bootstrap/bootstrap.less";

#bgWrapper {
    min-height: 100%;
    height:     100%;
background-image:url('/media/images/site/FrontpageTopBg.png');
    background-repeat:repeat-x;
}

#homepage {
    margin: 0 auto;
    width: 970px;
}

#teaser{
    float: left;
    height: 343px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:32:20.820

你的 png 在它下面有一个半透明的白色背景层（用图像编辑器打开它并在 png 下添加一个红色背景层 - 红色背景会变得更亮）。

你需要从头开始制作一个新的 png 并确保没有半透明的背景。

![你不那么透明png](../Images/58e9807f8d9a5fba745409c14373c9d5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:53:45.403

在一些图像编辑器/查看器中打开您的 PNG 图像，例如 XnView，并读取靠近底部的像素值，在中心。我得到一个值`R=255 G=255 B=255 A=128`，这意味着“白色，50% 透明”。因此，它不是完全透明的，您看到的行为是预期的。

# excel - 带有 Haskell 的 Excel 自动化给出了一个段错误

> ID：14537516
> 
> 赞同：52
> 
> 时间：2013-01-26T13:46:56.183
> 
> 标签：excel, haskell, com, ole

我可以使用以下脚本启动 Excel。但是在 ghci (7.4.1) 中，当我运行它时出现分段错误。

我不知道从哪里开始搜索。如果我删除该行，我没有此错误

```
workSheets <- workBook #  propertyGet_0 "Worksheets" 
```

这是代码。可能是我忘记了什么。[我在这里](http://hackage.haskell.org/package/com-1.2.3.1)阅读了 com.hs 的源代码，但它没有给我任何线索。

```
import System.Win32.Com 
import System.Win32.Com.Automation
--
-- createObjectExcel 
-- coming from Automation.hs and com.hs
--

iidIDispatch_unsafe  = mkIID "{00020400-0000-0000-C000-000000000046}"

createObjExl :: IO (IDispatch ()) 
createObjExl = do
    clsidExcel <- clsidFromProgID "Excel.Application"
    pExl <- coCreateInstance clsidExcel  Nothing LocalProcess iidIDispatch_unsafe
    return pExl

fichierTest2 = "E:/Programmation/haskell/Com/qos1.xls"

main = coRun $ do 
    pExl <- createObjExl
    workBooks <- pExl #  propertyGet_0 "Workbooks"
    workBook <- workBooks #  propertyGet_1 "Open" fichierTest2
    workSheets <- workBook #  propertyGet_0 "Worksheets"

    workBooks # method_1_0 "Close" (0::Int)
    pExl # method_0_0 "Quit"

    mapM release [workSheets,workBook, workBooks, pExl] 
```

* * *

**使用 Gonzalez 的建议进行编辑**我尝试调试，但没有出现任何信息。我在ghci中亲手试了下代码，看来罪魁祸首是release函数。

当我在 ghci 中输入这些时，我得到了分段错误：

```
*Main> coInitialize
*Main> pExl <- createObjExl
*Main> release pExl
0 
```

现在，如果我点击“pExl”，我就有了参考。那不应该设置为Null吗？

```
*Main> pExl
<interface pointer = 0x020844cc>

*Main> coUnInitialize
*Main> :q
leaving Ghci
Segmentation Fault/access violation ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-01T04:45:32.487

您可能正在`workSheets`从静态函数中调用该方法。试着把它移出来。

或者，您是否尝试过明确声明“工作表”的数据类型

`WorkSheets :: Int -> Int`或（应该是什么类型）。

# java - 我应该安装哪个 Eclipse Juno Maven 插件

> ID：14537517
> 
> 赞同：0
> 
> 时间：2013-01-26T13:46:57.743
> 
> 标签：java, eclipse, maven

我正在尝试使用 Hibernate 和 MySQL 构建一个非常简单的 Java SE 项目，并且我想使用 Maven（在 Eclipse Juno 中）设置我的项目。当我在市场中搜索“Maven”时，有两个选项：

*   Eclipse WTP 的 Maven 集成（孵化）
*   Eclipse 的 Maven 集成

这两者有什么区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T13:53:48.120

第一个是让 m2e 生命周期与 wtp 进程一起工作的组件，第二个是与 maven 的实际集成……如果您能够在没有第二个的情况下安装第一个，我会感到非常惊讶。

imo，一起跳过wtp

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T13:50:26.737

不管eclipse版本如何，我相信m2e是最流行的：[http ://eclipse.org/m2e/download/](http://eclipse.org/m2e/download/)

# jquery - jQuery 验证插件 - 在 $.blur 上验证似乎在升级到 1.9 时发生了变化

> ID：14537518
> 
> 赞同：2
> 
> 时间：2013-01-26T13:47:08.663
> 
> 标签：jquery, jquery-validate, blur

在验证 1.8 中，我在所有表单的输入元素上使用了 $.blur 函数，以在用户退出时触发对该字段的验证：

```
$('#myform :input').blur(function() {
    $("#myform").validate().element( this );
}); 
```

效果很好。但是我刚刚更新到 1.9，现在我的字段正在验证 keyup 而不是模糊。

我没有对我的设置进行任何更改，只是切换到 1.9。

我看到有很多变化，但我没有看到其他文档。

任何帮助，将不胜感激。

***澄清***

以前，我的元素最初会在模糊上验证，但如果元素处于错误状态，则如果用户返回进行更改，该元素将在 keyup 等上主动​​验证。这是我想要的行为。在初始输入时，在模糊之前没有主动验证，但是一旦字段处于错误状态，该字段应该主动验证更改、keyup 等。

现在，该元素正在验证初始输入时的 keyup

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T14:58:06.933

***默认情况下***，对于文本输入，jQuery Validate 在 "blur" (`onfocusout:`)、"keyup" (`onkeyup:`) 和 "submit" (`onsubmit:`) 事件上触发。

要让它只验证“模糊”和“提交”上的字段，只需将`onkeyup:`选项设置为 false ...

```
$(document).ready(function() {

    $('#myform').validate({
        onkeyup: false, // to use onkeyup, remove this line
        // other rules and options
    });

}); 
```

所有版本的工作方式都一样...

**工作演示（v1.10）：http: [//jsfiddle.net/M2MLL/](http://jsfiddle.net/M2MLL/)**

工作演示（v1.9）：http: [//jsfiddle.net/KSgLb/](http://jsfiddle.net/KSgLb/)

工作演示（v1.8）：http: [//jsfiddle.net/k87Lp/](http://jsfiddle.net/k87Lp/)

的默认行为是，只有在字段中留下某些内容后（或*在初始提交事件**之后*`onfocusout`）才会开始对字段进行验证，否则只需将字段留空并单击新字段不会执行任何操作。

 *** * *

如果您希望每次都在“模糊”上进行验证，无论如何，只需`onfocusout:`像这样修改回调函数......

```
$(document).ready(function() {

    $('#myform').validate({
        onfocusout: function(element, event) {
            this.element(element);
        },
        onkeyup: false,
        // other rules and options
    });

}); 
```

**工作演示（v1.9）：http: [//jsfiddle.net/eRNTu/](http://jsfiddle.net/eRNTu/)**

1.10 版也可以工作：http: [//jsfiddle.net/Mev8v/](http://jsfiddle.net/Mev8v/)

* * *

**顺便说一句：**虽然我不会这样做`.blur()`，但您的原始代码[在 v1.9 和 v1.10 上运行良好](http://jsfiddle.net/ySBdN/)。 **但是，我相信利用插件`onfocusout:`选项的内部功能是实现目标的更强大的方法。**

* * *

**编辑2：**

回应 OP 的最后澄清：

> *“在初始输入时，在模糊之前没有主动验证，但是一旦字段处于错误状态，该字段应该主动验证更改、键入等。”*

这是一个新的工作演示，它修改了默认回调函数`onkeyup:`

```
 onkeyup: function (element, event) {
        if (event.which === 9 && this.elementValue(element) === '') {
            return;
        } else if (element.name in this.submitted ) {
            this.element(element);
        }
    }, 
```

该字段最初将**忽略**任何`onkeyup`验证或当没有显示错误时。只有当存在活动错误并且用户返回该字段时，`onkeyup`验证才会开始操作。

**工作演示：http: [//jsfiddle.net/6s4rj/](http://jsfiddle.net/6s4rj/)****

# php - 试图找到 php 库或类以将 .php 或 .html 文件转换为 pdf

> ID：14537520
> 
> 赞同：0
> 
> 时间：2013-01-26T13:47:30.183
> 
> 标签：php, pdf-generation

我已经用过 Fpdf 和 dompdf。dompdf 似乎更好，但它不能生成三个以上的 Image 。除了 dompdf 之外，有没有可以将 html 文件转换为 pdf 的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T13:53:35.897

是的。对于商业产品，我认为最好的是[Prince XML](http://www.princexml.com)

对于免费的解决方案，我使用 mPDF 比使用 dompdf 幸运得多，可能是因为它存在的时间更长。看看[MPDF](http://www.mpdf1.com/mpdf/index.php)

还有一些其他的，但我认为如果你已经进入这个领域，那么最好从那里探索和前进。

# jquery - 如何在 jQuery 中重复函数调用

> ID：14537522
> 
> 赞同：1
> 
> 时间：2013-01-26T13:47:50.340
> 
> 标签：jquery, jquery-animate

我有这个代码：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.4.3.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() { 
        function loop(){
            $('#picOne').fadeIn(0).fadeOut(8000);
            $('#picTwo').delay(2000).fadeIn(6000).fadeOut(5000);
            $('#picTree').delay(10000).fadeIn(2000).fadeOut(16000);
            $('#picFour').delay(12000).fadeIn(16000).fadeOut(5000);
        }
        loop();
    });
</script> 
```

但是当最后一张图片淡出时，代码不会重复。问题是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T13:58:39.833

假设您希望每个元素的动画持续时间相同：

```
var $elements = $('#picOne, #picTwo, #picTree, #picFour');

function anim_loop(index) {
    // Get the element with that index and do the animation
    $elements.eq(index).fadeIn(1000).delay(3000).fadeOut(1000, function() { 
        // Kind of recursive call, increasing the index and keeping in the
        // the range of valid indexes
        anim_loop((index + 1) % $elements.length);
    });
}

anim_loop(0); // start with the first element 
```

我不确切知道动画应该如何，但我希望它能让概念清晰。

**更新：**要在一段时间后同时淡出和淡入图像，请在回调中使用`setTimeout`并调用`fadeOut`和：`anim_loop`

```
$elements.eq(index).fadeIn(1000, function() {
    var $self = $(this);
    setTimeout(function() {
        $self.fadeOut(1000);
        anim_loop((index + 1) % $elements.length);
    }, 3000);
}); 
```

[**演示**](http://jsfiddle.net/fkling/yHxe7/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T13:54:49.793

没有问题因为你的函数只被调用一次。

如果你想循环它们，你可以使用`setInterval()`或`setTimeout()`

```
setInterval(function(){loop()}, 16000);

function loop(){
     $('#picOne').fadeIn(0).fadeOut(8000);
     $('#picTwo').delay(2000).fadeIn(6000).fadeOut(5000);
     $('#picTree').delay(10000).fadeIn(2000).fadeOut(16000);
     $('#picFour').delay(12000).fadeIn(16000).fadeOut(5000);

} 
```

或者

```
function loop(){
     $('#picOne').fadeIn(0).fadeOut(8000);
     $('#picTwo').delay(2000).fadeIn(6000).fadeOut(5000);
     $('#picTree').delay(10000).fadeIn(2000).fadeOut(16000);
     $('#picFour').delay(12000).fadeIn(16000).fadeOut(5000);
 setTimeout(function(){loop()}, 16000);
} 
```

在这两种情况下，函数都会被调用 every `16 seconds = 16000 miliseconds`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-06T18:54:39.113

我想说这个功能确实很好用，无论是谁做的，都做得很好。我编辑了演示，它适用于图片。

```
<div id="picOne">
 <img id="picOne" src="http://www.phphq.net/demos/phAlbum/album/Windows%20Wallpapers/Missing/Waterfall.jpg"/></div>
<div id="picTwo">
<img id="picTwo" src="http://newevolutiondesigns.com/images/freebies/colorful-background-21.jpg"/></div>
<div id="picTree">
 <img id="picTree" src="http://www.phphq.net/demos/phAlbum/album/Windows%20Wallpapers/Missing/Waterfall.jpg"/></div>
  <div id="picFour">
<img id="picFour" src="http://www.photoinpixel.com/mypicture/amazing-background-wallpapers.jpg"/></div> 
```

功能

```
var $elements = $('#picOne, #picTwo, #picTree, #picFour');

function anim_loop(index) {
    $elements.eq(index).fadeIn(1000, function() {
        var $self = $(this);
        setTimeout(function() {
            $self.fadeOut(1000);
            anim_loop((index + 1) % $elements.length);
        }, 3000);
    }); }

anim_loop(0); // start with the first element 
```

# android - ANDROID 从列表视图中获取选定的值项

> ID：14537527
> 
> 赞同：0
> 
> 时间：2013-01-26T13:48:33.007
> 
> 标签：android, listview

你好我的listivew有问题。请在下面检查我的代码：

```
public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
    // TODO Auto-generated method stub
    String selected;

    //selected = parent.getItemAtPosition(position).toString();

    selected = parent.getItemAtPosition(lv.getFirstVisiblePosition() + position).toString();

    if( selected.equals("Apple") ){
        Intent apple = new Intent(Fruits.this, Apples.class);
        startActivity(apple);
    }
    else if( selected.equals("Apricot") ){
        Intent apricot = new Intent(Fruits.this, Apricots.class);
        startActivity(apricot);
    }
    else if( selected.equals("Avocado") ){
        Intent avocado = new Intent(Fruits.this, Avocado.class);
        startActivity(avocado);
    }
    else if( selected.equals("Banana") ){
        Intent banana = new Intent(Fruits.this, Banana.class);
        startActivity(banana);
    }
    else if( selected.equals("Blackberry") ){
        Intent blackberry = new Intent(Fruits.this, Blackberries.class);
        startActivity( blackberry );
    }
    else if( selected.equals("Blueberry") ){
        Intent blueberry = new Intent(Fruits.this, Blueberry.class);
        startActivity(blueberry);
    }
    else if( selected.equals("Cranberry") ){
        Intent cranberry = new Intent(Fruits.this, Cranberry.class);
        startActivity(cranberry);
    }
    else if( selected.equals("Figs") ){
        Intent fig = new Intent(Fruits.this, Figs.class);
        startActivity(fig);
    }
    else if( selected.equals("Grapefruit") ){
        Intent grapefruit = new Intent(Fruits.this, Grapefruit.class);
        startActivity(grapefruit);
    }
    else if( selected.equals("Kiwi") ){
        Intent kiwi = new Intent(Fruits.this, Kiwi.class);
        startActivity(kiwi);
    }
    else if( selected.equals("Lemon") ){
        Intent lemon = new Intent(Fruits.this, Lemons.class);
        startActivity(lemon);
    }
    else if( selected.equals("Melon") ){
        Intent melon = new Intent(Fruits.this, Melon.class);
        startActivity(melon);
    }
    else if( selected.equals("Orange") ){
        Intent orange = new Intent(Fruits.this, Orange.class);
        startActivity(orange);
    }
    else if( selected.equals("Papaya") ){
        Intent papaya = new Intent(Fruits.this, Papaya.class);
        startActivity(papaya);
    }
    else if( selected.equals("Peach") ){
        Intent peach = new Intent(Fruits.this, Peaches.class);
        startActivity(peach);
    }
    else if( selected.equals("Pear") ){
        Intent pear = new Intent(Fruits.this, Pears.class);
        startActivity(pear);
    }
    else if( selected.equals("Pineapple") ){
        Intent pineapple = new Intent(Fruits.this, Pineapple.class);
        startActivity(pineapple);
    }
    else if( selected.equals("Plum") ){
        Intent plum = new Intent(Fruits.this, Plum.class);
        startActivity(plum);
    }
    else if( selected.equals("Prune") ){
        Intent prune = new Intent(Fruits.this, Prunes.class);
        startActivity(prune);
    }
    else if( selected.equals("Raspberry") ){
        Intent raspberry = new Intent(Fruits.this, Raspberry.class);
        startActivity(raspberry);
    }   
    else if( selected.equals("Rhubarb") ){
        Intent rhubard = new Intent(Fruits.this, Rhubard.class);
        startActivity(rhubard);
    }
    else if( selected.equals("Strawberry") ){
        Intent strawberry = new Intent(Fruits.this, Strawberries.class);
        startActivity(strawberry);
    }

} // end of OnItemClick method

final String[] classes = new String[] { 
        "Apple", // #0
        "Apricot", // #1
        "Avocado", // #2
        "Banana", // #3
        "Blackberry", // #4
        "Blueberry", // #5
        "Cranberry", // #6
        "Figs", // #7
        "Grapefruit", // #8
        "Kiwi", // #9
        "Lemon", // #10
        "Melon", // #11
        "Orange", // #12
        "Papaya", // #13
        "Peach", // #14
        "Pear", // #15
        "Pineapple", // #16
        "Plum", // #17
        "Prune", // #18
        "Raspberry", // #19
        "Rhubarb", // #20
        "Strawberry"  // #21
        }; 
```

每当我运行应用程序时，它都会在这一行中抛出 nullpointerexception：

```
selected = parent.getItemAtPosition(lv.getFirstVisiblePosition() + position).toString(); 
```

我的代码有什么问题？任何帮助都非常感谢。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:07:38.577

你是对的，错误代码在这一行：

```
selected = parent.getItemAtPosition(lv.getFirstVisiblePosition()+position).toString(); 
```

由于函数: `getFirstVisiblePosition() + position`, 有时会比 size 大`parent`，你的代码会变成: `null.toString()`，当然还有`NullPointerException`. 您可以查看有关该功能的文档：`getFirstVisiblePosition`在[Link to AdapterView here](http://developer.android.com/reference/android/widget/AdapterView.html#getItemAtPosition%28int%29)

**编辑：**我认为你不应该再使用这条线，只需使用：`selected = classes[position]`。这将解决你的问题！

# winforms - Visual Studio 2010 设计器打开一个空的弹出窗口

> ID：14537529
> 
> 赞同：0
> 
> 时间：2013-01-26T13:48:38.623
> 
> 标签：winforms, visual-studio-2010

最近我在 Visual Studio 2010 上处理 Windows 窗体项目，当它开始显示这种奇怪的行为时。每当我在设计器中打开一个窗口窗体时，都会创建一个空控件并挂在屏幕中间。

我正在使用的唯一“非标准”功能，我使用父用户控件扩展每个控件，如下所示

```
 public partial class MainUserControl : UserControl
    {
    ...
    }
    public partial class UserControl : MainUserControl
    {
    ...
    } 
```

![奇怪的弹出窗口](../Images/11fb8cf55420619d117bcf4a9d13fb6e.png)

关于如何修复的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:11:03.250

很难全面解释我是如何解决它的，但它似乎是从另一个用户控件扩展用户控件时最终可能出现的众多设计器错误之一。

通过创建一个更简单的构造函数来“欺骗”设计师，弹出窗口消失了。

总是尝试拥有类似的东西

```
public class BaseUserControl : UserControl
{
    protected BaseUserControl(... [many params passed])
    {
        ...
    }

    protected BaseUserControl()
    {
        ...
    }
} 
```

并避免

```
protected BaseUserControl() : BaseUserControl(... [many params passed])
{
    ...
} 
```

# heroku - Heroku 上的字体使用 wicked_pdf/wkhtmltopdf

> ID：14537530
> 
> 赞同：4
> 
> 时间：2013-01-26T13:48:47.930
> 
> 标签：heroku, wkhtmltopdf, wicked-pdf

我正在使用 wicked_pdf 从 HTML 生成 PDF 并部署到 Heroku。

这在部署时一切正常，我已经使用@font-face 尝试了不同的字体，但到目前为止，当我只使用“serif”作为字体时产生了最好的结果。

我的假设是 wkhtmltopdf 使用 Heroku 服务器上的内置字体来呈现“衬线”。尽管这在 PDF 上看起来不错，但各种操作系统上的浏览器会为“serif”呈现不同的字体 - 所以我想尝试为 HTML 找到匹配的字体。

是否可以找出 Heroku 服务器上安装了哪些字体以及哪些字体映射到“serif”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-14T19:08:57.943

您可以通过 CSS 显式设置您想要的字体，以便在不同系统和浏览器之间获得一致的字体呈现。我可以想到两种方法：

一种是指定 CSS 字体样式，默认后备字体为`serif`. 例如，要从 Google Fonts 添加 Droid Serif 字体，并将其用作主要`body`字体样式：

```
<link href='http://fonts.googleapis.com/css?family=Droid+Serif' rel='stylesheet' type='text/css'>
<style>
    body {
        font-family: 'Droid Serif', serif;
    }
</style> 
```

`Droid Serif`将显示在所有现代浏览器中，默认显示`serif`在 Heroku 和具有较旧/较简单网络浏览器的设备上。缺点是字体在浏览器中看起来是一种方式，但在您的 PDF 中会有所不同，因为 Heroku 将使用其默认的衬线字体。

第二种方法是对字体进行 Base64 编码（[您可以使用此工具](http://base64fonts.com/)），并将其包含在您的 CSS 中：

```
@font-face {
    font-family: 'OpenSans';
    src: url(data:font/truetype;charset=utf-8;base64,AAEAAAATAQA...
} 
```

这也适用于所有现代浏览器，额外的好处是还可以在 Heroku 上工作，为您提供一致的字体渲染。这种方法特别方便，因为您不仅可以在浏览器中获得一致性，而且可以在您的开发环境和 Heroku 中获得一致性，因为您不必在 CSS 中使用 git-push 字体和弄乱本地/绝对路径。

# matomo - 生成关键字排名报告

> ID：14537531
> 
> 赞同：2
> 
> 时间：2013-01-26T13:48:50.853
> 
> 标签：matomo

在详细的访问者日志中，piwik 能够找到关键字在搜索引擎上列出的位置。

例如：

![](../Images/f985949d6b96d802d5ef7f7ffd51cb04.png)

这是存储在数据库中的什么位置？我一直在寻找它，但在日志表和访问者表中都找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:37:29.607

这是谷歌特有的。搜索结果中的排名实际上是谷歌在referer中作为`cd=`参数提交的。有[所有可用参数的细分](http://www.t75.org/2012/06/deconstructing-googles-url-search-parameters/)。

Piwik 中的访问者日志报告只是从为访问存储的引荐来源网址中提取此信息。查看[Live 插件的来源](http://dev.piwik.org/trac/browser/trunk/plugins/Live/Visitor.php#L352)：

```
function getKeywordPosition()
{
    if($this->getRefererType() == 'search'
        && strpos($this->getRefererName(), 'Google') !== false)
    {
        $url = @parse_url($this->details['referer_url']);
        if(empty($url['query']))
        {
            return null;
        }
        $position = Piwik_Common::getParameterFromQueryString($url['query'], 'cd');
        if(!empty($position))
        {
            return $position;
        }
    }
    return null;
} 
```

# php - 在数据库中存储会话

> ID：14537533
> 
> 赞同：0
> 
> 时间：2013-01-26T13:49:02.880
> 
> 标签：php, mysql, codeigniter

刚刚修改了 config.php，如下所示：

```
$config['sess_cookie_name'] = 'cisession';  //[changed]
$config['sess_expiration']  = 7200;
$config['sess_expire_on_close'] = FALSE;
$config['sess_encrypt_cookie']  = TRUE;  //[changed]
$config['sess_use_database']    = TRUE;  //[changed]
$config['sess_table_name']  = 'cisessions';  //[changed]
$config['sess_match_ip']    = TRUE;  //[changed]
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 300; 
```

每次刷新页面时，当我打印会话时，我都会有一个新的 session_id：

```
echo'<pre>SESSION:';
print_r($this->session);
echo'</pre>'; 
```

每次刷新都有以下变化：

```
[session_id] => 8ebbdc82de64fe302fe7e02347d29ecc 
```

我现在也无法登录该站点（在 localhost 上开发）。

问题：

1) 为什么 config.php 中的这些更改现在杀死了网站？

2）我该如何解决这个问题？

注意：我在数据库中添加了一个名为“cisessions”的 mysql 表，并遵循以下所有说明：

[http://ellislab.com/codeigniter/user-guide/libraries/sessions.html](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)

在标题为：什么是会话数据？

任何其他帮助/建议赞赏的人...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T20:08:55.740

如果你使用 Encryption 类或 Session 类，你必须设置一个加密密钥。

```
$config['encryption_key'] = 'your_encryption_key_here'; 
```

或尝试将 cookie_domain 留空

```
$config['cookie_prefix'] = "";
$config['cookie_domain'] = ""; 
```

# web - 如何将 url 与 IP 链接？

> ID：14537534
> 
> 赞同：0
> 
> 时间：2013-01-26T13:49:26.950
> 
> 标签：web, dns

我确定这是一个非常愚蠢的问题，但我有一个注册的 url（来自 register.com）和一个具有弹性 IP 的服务器（来自 Amazon 的 EC2 实例），我想将两者链接起来。我知道 DNS 服务器以某种方式参与其中，但我不太清楚如何完全链接这两者。

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:53:49.900

您应该按照register.com[的](http://help.register.com/app/answers/detail/a_id/1282/~/hosting---change-an-existing-domain%27s-ip-address-to-register.com%E2%80%99s-hosting-ip)说明进行操作，它基本上解释了如何为您的域设置一个`A record`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T13:51:47.527

您需要在 zoneedit.com 之类的人那里设置一个帐户以将两者链接起来……或者使用 DNS 注册表查找某些内容，以便您可以将“名称”与“IP”绑定

但是，您这样做会将该记录放入他们的名称服务器中，然后它会渗出。

# xamarin.ios - MonoTouch 专业/企业

> ID：14537535
> 
> 赞同：0
> 
> 时间：2013-01-26T13:49:51.070
> 
> 标签：xamarin.ios

我需要一些帮助来决定 Monotouch 的专业版还是企业版。到目前为止，我已经使用了评估版，但现在我想在设备上部署一些东西。我不完全理解一个用户和一个席位策略之间的区别，这是两个许可证之间的主要区别。我假设专业（一个用户）许可证只能由登录帐户的开发人员使用，而企业（一个座位）版本可以由多个用户使用，但在这两种情况下都在同一台机器上。这个假设正确吗？在 2 台不同机器上工作的 2 位开发人员可以共享同一个 Enterprise 许可证吗？评估版的有效性是什么？什么时候到期？找不到任何有关数据的数据。我很好奇，如果有任何其他区别，你可以'

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:57:45.257

从[常见问题解答](http://support.xamarin.com/customer/portal/articles/177051-what-is-the-difference-between-a-professional-license-and-an-enterprise-license-)；

> MonoTouch Professional 和 Mono for Android Professional 均已获得许可，供工具的原始用户使用。这意味着*第一个激活工具的用户是唯一获得许可使用这些工具的开发人员*。
> 
> MonoTouch Enterprise 和 Mono for Android Enterprise 均获得席位许可。 *席位许可允许许可证所有者在项目更改时更改工具的指定用户。*

据我所知，评估版永远不会过期，但您将无法在真机上进行部署或调试，只能进行模拟器测试。

# database - 使用 Spring JDBCTemplate 在数据库中插入新数据记录后如何获取生成的 ID？

> ID：14537546
> 
> 赞同：9
> 
> 时间：2013-01-26T13:51:03.483
> 
> 标签：database, spring, unique, jdbctemplate, persistent

我在使用 Spring JDBCTemplate 时遇到一个很常见的问题，我想在将新的数据记录插入数据库后获取 ID 值，该 ID 值将引用到另一个相关表。我尝试了以下方式来插入它，但我总是返回 1 而不是它真正的唯一 ID。（我使用 MySQL 作为数据库）

```
public int insert(BasicModel entity) {
    String insertIntoSql = QueryUtil.getInsertIntoSqlStatement(entity);

    log.info("SQL Statement for inserting into: " + insertIntoSql);

    return this.jdbcTemplate.update(insertIntoSql);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T14:01:59.380

[`JdbcTemplate.update()`](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/jdbc/core/JdbcTemplate.html#update%28java.lang.String%29)返回：

> 受影响的行数

这总是`1`用于`INSERT`声明。不同的数据库以不同的方式支持生成的密钥提取，但大多数 JDBC 驱动程序对此进行了抽象并`JdbcTemplate`支持这一点。引用[*12.2.8 检索自动生成的密钥*](http://static.springsource.org/spring/docs/3.0.x/reference/jdbc.html#jdbc-auto-genereted-keys)

> 一种`update()`方便的方法支持检索数据库生成的主键。这种支持是 JDBC 3.0 标准的一部分；有关详细信息，请参阅规范的第 13.6 章。

基本上你需要这个更详细的声明：

```
final String insertIntoSql = QueryUtil.getInsertIntoSqlStatement(entity);
KeyHolder keyHolder = new GeneratedKeyHolder();

jdbcTemplate.update(
  new PreparedStatementCreator() {
    public PreparedStatement createPreparedStatement(Connection connection) throws SQLException {
      return connection.prepareStatement(insertIntoSql, new String[] {"id"});
    }
  }, keyHolder);

return keyHolder.getKey().intValue(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-26T14:52:41.580

@panadol-chong，@tomasz-nurkiewicz 的代码需要做一些小修改才能在这里工作。

```
final String SQL = "INSERT INTO ... RETUNING id";

KeyHolder keyHolder = new GeneratedKeyHolder();

jdbcTemplate.update(connection -> {
    PreparedStatement ps = connection.prepareStatement(SQL, 
                           Statement.RETURN_GENERATED_KEYS);

    return ps;
}, keyHolder);

return keyHolder.getKey().intValue(); 
```

主要区别在于`Statement.RETURN_GENERATED_KEYS`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-06T11:34:06.097

您可以使用@Tomasz Nurkiewicz 答案，它肯定可以工作，但您不需要：Spring 提供了 SimpleJdbcInsert，它“提供元数据处理以简化构建基本插入语句所需的代码”。

```
@Repository
public class UserDao {

    private JdbcTemplate jdbcTemplate;
    private SimpleJdbcInsert insertIntoUser;

    @Autowired
    public UserDao(DataSource datasource) {
        jdbcTemplate = new JdbcTemplate(datasource);
        insertIntoUser = new SimpleJdbcInsert(jdbcTemplate).withTableName("user").usingGeneratedKeyColumns("id_user");
    }

    public Number insertUser(User u) {
        final Map<String, Object> parameters = new HashMap<>();
        parameters.put("name", u.getName());

        return insertIntoUser.executeAndReturnKey(parameters);
    }
} 
```

insertUser 返回的“Number”是为用户插入生成的 id_user。

# validation - Backbone - 未调用模型验证且未捕获“无效”事件

> ID：14537548
> 
> 赞同：4
> 
> 时间：2013-01-26T13:51:14.190
> 
> 标签：validation, backbone.js, event-handling, marionette

我正在使用 Backbone 和 Marionette，我正在从后端检索我的模型。
这些模型属于一个集合。问题是：

1) 除非在初始化中显式调用，否则永远不会调用 validate 方法。为什么？
2) 当我显式调用 validate 方法时，它会正确返回我为测试创建的无效模型。但我无法捕捉到“无效”事件。我究竟做错了什么？

这是模型：

```
 var Job = Backbone.Model.extend({
    validate: function(attrs){
        if (! attrs.title ) {
            return "A job should have a title";
        }
    },

    initialize: function(){

        this.validate(this.attributes); //manual call to validate
        this.on("invalid",  function(model, error){ //never executed even when the validate model returns the error string
            console.log(error);
        });

    }

}); 
```

这里是集合：

```
var JobList = Backbone.Collection.extend({
        model: Job,
        url: '/api/1.0/jobs/',
        parse: function(response) {
          return response.results;
        }

    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T13:59:18.663

Backbone 中的验证逻辑已更改`0.9.10`。引用[更改日志](http://backbonejs.org/#changelog)，验证现在的工作方式如下：

> 模型验证现在仅在 Model#save 中默认强制执行，并且在构造或 Model#set 中不再默认强制执行，除非通过了 {validate:true} 选项。

因此，如果您希望在初始化时验证模型，或者`set`，您需要将选项传递`validate:true`给构造函数/方法。

`invalid`手动调用方法时未收到事件的原因`model.validate`是 Backbone**未在您执行任何验证**时执行任何验证。您调用在模型上定义的方法，而 Backbone 对此一无所知。

Model validation in Backbone is convention based in the sense that Backbone doesn't define a method called `validate` on the model - you do yourself. However, if you have defined such a method, Backbone will call it for you when validation occurs (on `save`, or in constructor/setter with `validate:true`, and the `invalid` event will be triggered.

# google-maps-api-3 - 谷歌地图多边形调整大小事件

> ID：14537549
> 
> 赞同：2
> 
> 时间：2013-01-26T13:51:27.263
> 
> 标签：google-maps-api-3

我有一个可编辑的多边形，就像[这里](http://www.geocodezip.com/v3_GoogleEx_DrawingTools_deleteAll.html)一样。

当用户在地图上移动点（以调整多边形大小）时，我想“捕捉”该事件。我需要这个功能来实现对齐点。

可能吗？

**编辑**

```
this.polygon = new google.maps.Polygon({
    map: map,
    strokeWeight: 2,
    editable: true,
    path: this._path
});

var dragging = false;
google.maps.event.addListener(this.polygon, 'mousedown', function (event) {
    if (event.vertex) {
        dragging = true;
    }
});
google.maps.event.addListener(this.polygon, 'mousemove', function (event) {
    if (dragging) {
        // dragging
    }
});
google.maps.event.addListener(this.polygon, 'mouseup', function (event) {
    dragging = false;
}); 
```

代码正在运行，事件被捕获。但是，我无法访问当前拖动的点来更改它的位置。

我还尝试在`mousemove`事件内部更改 latLng 对象，但没有效果

**临时解决方案**

调整大小时无法访问多边形幻影，因此实现捕捉的唯一解决方案是在调整多边形大小后执行此操作。

```
this.polygon = new google.maps.Polygon({
    map: map,
    strokeWeight: 2,
    editable: true,
    path: this._path
});

var path = this.polygon.getPath();
google.maps.event.addListener(path, 'set_at', function (event) {
    // Here do the snapping, after the polygon has been resized
});

google.maps.event.addListener(path, 'insert_at', function (event) {
    // Here do the snapping, after the polygon has been resized
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T19:14:12.700

是的，这是可能的，但不是直截了当的。

您需要在多边形对象上使用事件组合。

[PolygonMouseEvent](https://developers.google.com/maps/documentation/javascript/reference#PolyMouseEvent)对象具有三个属性`edge`，`path`和`vertex`。如果事件发生在 a 上`vertex`，您将获得它的索引，否则它是未定义的。

因此，如果您尝试以下操作，您可能能够构建您想要的功能：

*   监听`mousedown`事件。如果`vertex`已定义，则`dragging = true`。
*   监听`mouseup`事件。放`dragging = false`
*   监听`mousemove`事件。如果`dragging = true`然后获取鼠标位置。`e.latLng`并按照你的逻辑来捕捉它。

我还没有尝试过，但是通过一些修补，你应该使用这种方法让它工作。

如果`mousemove`不起作用，请尝试使用`mouseover`.

如果您试一试但无法正常工作，请发布您的代码，以便我们提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T22:15:27.513

实际上，传递给`set_at`事件处理程序的参数是`(index, object)`. 索引将对应于修改的顶点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-23T07:28:05.010

用代码扩展@SeainMalkin 的答案：

```
var draggingPolygonVertex = false;

google.maps.event.addListener(polygon, 'mousedown', function(mdEvent) {
    if(mdEvent.vertex || (mdEvent.vertex == 0)){
        draggingPolygonVertex = true;
    }
});

google.maps.event.addListener(polygon, 'mouseup', function(muEvent) {
        draggingPolygonVertex = false;
});

google.maps.event.addListener(polygon, 'mousemove', function(mmEvent) {
    if(draggingPolygonVertex){
        // you're now dragging a vertex of the polygon
        // insert snap to grid code
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:45:18.050

我已经解决了一个类似的问题，将 Seain Malkin 建议的解决方案和[此处](https://stackoverflow.com/questions/10281039/rectangle-drawn-by-google-maps-drawingmanager-does-not-trigger-the-mousemove-eve)建议的解决方案放在一起（感谢两者）。

我没有为`mousemove` to 注册一个“谷歌事件监听器”，而是为地图注册了一个 DOM 事件监听器（参数设置为，尤其是与 Firefox 一起使用）：`polygon``div``useCapture``true`

```
map.getDiv().addEventListener('mousemove', function (e) {
    if (drawing) {
        var latLng = getLatLngByOffset( map, e.clientX, e.clientY );
        // dragging
    }
}, true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-15T19:07:11.010

我认为正确的答案是这样的：

```
path.addListener('bounds_changed', function (event) {
    // Here do the snapping, after the polygon has been resized
}); 
```

一个完整的例子在这里：[谷歌文档示例](https://developers.google.com/maps/documentation/javascript/examples/rectangle-event?hl=it)

# android - Android 音频在音轨变化时从耳机切换到扬声器。（不受欢迎的行为）

> ID：14537553
> 
> 赞同：0
> 
> 时间：2013-01-26T13:51:56.437
> 
> 标签：android

我有一个松散地基于 AOSP 音乐播放器的音乐播放器。

我的应用程序的一些 Galaxy S3 用户报告说，当一首歌曲结束并且下一首歌曲开始时，音频开始通过扬声器播放，尽管耳机已连接。

我无法与这些用户取得联系（反馈是通过应用程序评论），我不知道如何调试这个特定问题，因为它不是“崩溃”。有什么我可以检查的，或者有什么方法可以防止它发生吗？它似乎只在 Galaxy S3 上。

我对如何调试此行为没有任何想法，但这让我付出了代价！

# objective-c - 选择地图注记后显示视图

> ID：14537555
> 
> 赞同：0
> 
> 时间：2013-01-26T13:52:27.077
> 
> 标签：objective-c, mkmapview, mkannotation

我正在尝试使用数组中的数据在地图视图上创建自定义地图注释，并在选择每个地图注释时显示 UIView（类似于标注）。但是，uiview有时不会显示何时选择映射注释，并且视图上显示的数据来自数组的最后一个元素。视图（infoView）有问题吗？顺便说一句，视图是在视图控制器中的地图视图下方创建的。

# c - C 将列表作为参数传递

> ID：14537556
> 
> 赞同：5
> 
> 时间：2013-01-26T13:52:30.727
> 
> 标签：c, list, reference

所以我将列表定义为全局变量：

```
typedef struct center {

  char center_name[100];

  char hostname[100];

  int port;

  struct center *next_center;

} center; 
```

我需要将元素添加到列表中。但是我需要添加的这些元素在一个文件中，所以：

```
 int main(int argc, char** argv) {
     center *head = NULL; 
     parse(argv, head);
  } 
```

parse 是一个函数，它读取文件并将这些读取的元素添加到一个新的中心（所有这些都有效，它仔细检查了）

```
void parser (char** argv, center *head) {
   //read the elements i need to add
   //creates a newCenter and adds the elements read to the new center
   //this far it works
  addToCenter(newCenter, head); 
} 
```

在哪里：

```
addToCenter(center *newCenter, center *head){
   //adds newCenter to the list
   if (head == null)
      head = newCenter;
   else {
      //find last element
      lastelement.next_center = newCenter; 
   }

} 
```

一切正常，除了 Main 上的列表始终返回为空。换句话说，引用没有被修改。我不明白为什么，因为我正在传递一个指向列表的指针。

我的另一个解决方案是将列表的头变量创建为全局变量，但最好避免这些情况。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T13:58:41.020

您的列表头正在按值传递。您需要按*地址*传递头指针，以防它被修改（它将被修改）。

例子：

```
addToCenter(center *newCenter, center *head) // <=== note: passed by value
{
   //adds newCenter to the list
   if (head == null)
      head = newCenter; // <=== note: modified local stack parameter only.
   else {
      //find last element
      lastelement.next_center = newCenter; 
   }
} 
```

应该：

```
addToCenter(center *newCenter, center **head) // <=== note: now passed by address
{
   //adds newCenter to the list
   if (*head == null)
      *head = newCenter;  // <=== note: now modifies the source pointer.
   else {
      //find last element
      lastelement.next_center = newCenter; 
   }
} 
```

同样与解析：

```
void parser (char** argv, center **head) // <=== again, the head-pointer's *address*
{
   //read the elements i need to add
   //creates a newCenter and adds the elements read to the new center
   //this far it works
  addToCenter(newCenter, head);  // <=== just forward it on.
} 
```

最后回到主要的：

```
int main(int argc, char** argv) 
{
     center *head = NULL; 
     parse(argv, &head);  // <=== note: passing address of the head-pointer. (thus a dbl-pointer).
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T13:59:27.727

你需要像这样传递它：

```
void parser (char** argv, center **head) {
   //read the elements i need to add
   //creates a newCenter and adds the elements read to the new center
   //this far it works
  addToCenter(newCenter, &head); 
}

addToCenter(center *newCenter, center **head){
   //adds newCenter to the list
   if (*head == null)
      *head = newCenter;
   else {
      //find last element
      lastelement.next_center = newCenter; 
   }

} 
```

主要是：

```
int main(int argc, char** argv) {
     center *head = NULL; 
     parse(argv, &head);
} 
```

您必须这样做，因为 C 中的值默认情况下是按值传递的。由于您通过值而不是通过引用传递列表的地址。当您`head`按照上述程序通过引用传递变量时，您将能够修改列表并将数据返回到列表中。否则，它将按值传递，并且`head`永远不会修改的值（因此你得到了`NULL`）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T13:58:43.640

将指针传递给函数允许您查看在函数外部分配*指向值的结果。*但是，指针本身仍然是按值传递的。

为了`head`在`parser`and中进行修改`addToCenter`，您必须将*指针传递给`head`*这两个函数。

```
void parser(char** argv, centerPtr **headPtr) {
     /* rewrite using *headPtr instead of head */
}
void addToCenter(center *newCenter, center **headPtr) {
     /* rewrite using *headPtr instead of head */
}
int main(int argc, char** argv) {
    ....
    parser(argv, &head);
    ....
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T13:58:36.480

在您的函数中，您修改指针的本地副本，而不是指针本身。您应该更改函数定义以获取指向指针的指针。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-26T13:59:11.910

您似乎缺少有关指针逻辑的部分知识。我将尝试描述这里出了什么问题。

首先，让我们重写任何`void*`as `int`，这是（某种）内部发生的事情。

```
addToCenter(int newCenter, int head){
   //adds newCenter to the list
   if (head == 0)
       head = newCenter; 
```

你去了，问题就说明了。

解决方案？

```
addToCenter(center *newCenter, center **head){
   //adds newCenter to the list
   if (*head == null)
       *head = newCenter; 
```

# jquery - 如何检查是否选中了所有唯一命名的复选框中的至少一个选项？

> ID：14537558
> 
> 赞同：1
> 
> 时间：2013-01-26T13:52:39.143
> 
> 标签：jquery, html, validation, input, checkbox

我如何使用 Jquery 检查从每个唯一命名的复选框组中至少检查一个选项？这些复选框是动态生成的，并且唯一命名的复选框的总数会有所不同......

```
<input type="checkbox" class="mcqcb" name="ans_4[]" value="A">
<input type="checkbox" class="mcqcb" name="ans_4[]" value="B">
<input type="checkbox" class="mcqcb" name="ans_4[]" value="C">
<input type="checkbox" class="mcqcb" name="ans_4[]" value="D">

<input type="checkbox" class="mcqcb" name="ans_5[]" value="A">
<input type="checkbox" class="mcqcb" name="ans_5[]" value="B">
<input type="checkbox" class="mcqcb" name="ans_5[]" value="C">
<input type="checkbox" class="mcqcb" name="ans_5[]" value="D">

<input type="checkbox" class="mcqcb" name="ans_17[]" value="A">
<input type="checkbox" class="mcqcb" name="ans_17[]" value="B">
<input type="checkbox" class="mcqcb" name="ans_17[]" value="C">
<input type="checkbox" class="mcqcb" name="ans_17[]" value="D"> 
```

到目前为止，我已经尝试过这个：

```
$('input:checkbox[class=mcqcb][name*="ans_*"]').not(':checked').length 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:00:19.863

`<input type="checkbox" class="mcqcb" name="ans_4[]" value="A" checked>`

jst把“checked”放在标签的末尾！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T14:16:10.483

似乎使用 jQuery 执行此操作的唯一方法是使用数组来存储复选框的分组数据：

JS：

```
var detectionArry={};
$('.mcqcb').each(function(){
    if (!detectionArry[$(this).attr("name")]){
    detectionArry[$(this).attr("name")]=$(this).prop("checked");
    }
});
for (var i in detectionArry){
    if (!detectionArry[i]){
     alert(i+" is not completed!");   
    }
} 
```

[演示](http://jsfiddle.net/65p9E/show)| [来源](http://jsfiddle.net/65p9E/)

**编辑：**
要将其保留在复选框中，只需将选择器 ( `$('.mcqcb')`) 替换为您提供的选择器：`$('input:checkbox[class=mcqcb]')`

[演示](http://jsfiddle.net/65p9E/3/show)| [来源](http://jsfiddle.net/65p9E/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T14:19:18.447

我不确定我是否理解正确。但是，如果您想测试名称属性以 ans 开头的选中复选框的大小，则必须像这样修改选择器：

```
$('input:checkbox[name*="ans_"]:checked'); 
```

如果您想测试是否至少检查了所有这些组中的一个，那很好。但是，如果要测试是否至少检查了每个组中的一个，则必须循环/过滤：

```
function checkGroup() {
    var finalResult = true; 
        nameArr=[], 
        checkboxGroups = $('input:checkbox[name*="ans_"]');
    checkboxGroups.each(function(){
        var name = $(this).attr("name");
        if($.inArray(name, nameArr) == -1)
            nameArr.push(name);
    });
    // Go through each name attribue and make sure at least one is checked.
    $.each(nameArr, function(index, value){
        if($('[name="' + value + '"]:checked').length === 0){
           finalResult = false; 
        }
    });
    return  finalResult;   
} 
```

# jquery - 如何创建附加到 HTML 标签的视差背景？

> ID：14537559
> 
> 赞同：1
> 
> 时间：2013-01-26T13:52:42.897
> 
> 标签：jquery, css, background, parallax

我看到了下面的帖子，这正是我所需要的，除了我的背景图片不在 body 标签上，而是在 html 标签上。我已经尝试了各种方法让它工作，但不知道如何在 jQuery 中获取 html 标签。

[Javascript 或 CSS 中的慢速滚动背景？](https://stackoverflow.com/questions/8646912/slow-scrolling-background-in-javascript-or-css)

这是我想念的简单东西吗？

# css - 无法使 translate3d Z 属性工作

> ID：14537562
> 
> 赞同：6
> 
> 时间：2013-01-26T13:53:34.437
> 
> 标签：css, translate3d

我正在使用：

```
 -webkit-transform: translate3d(0,500px,300px); 
```

X 和 Y 属性工作得很好，但 Z (300px) 就不行了。这是[jfiddle](http://jsfiddle.net/54Pa7/12/)。我究竟做错了什么？我尝试了 Chrome 24 和 Canary 25 感谢您的支持...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T14:04:22.847

我在父元素上缺少 -webkit-perspective 参数。当我添加它时，它开始正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T15:14:27.797

根据[WebKit 博客](http://www.webkit.org/blog/386/3d-transforms/)，

> translate3d(x, y, z), translateZ(z) 在 x, y, z 中移动元素，只在 z 中移动元素。正 z 朝向观察者。与 x 和 y 不同，z 值不能是百分比。

你需要花药元素来获得效果。我在您的代码中添加了一些。

HTML

```
<div class="coin1">
    <div class="coin2"></div>
</div> 
```

CSS

```
.coin1{
    position:absolute;
    top:50px;
    left:50px;
    width:80px;
    height:40px;
    background:#fc0;
    -webkit-transform: rotate3d(1,0,0,-55deg) rotate3d(0,0,1,30deg);
    -webkit-transform-style: preserve-3d;
}

.coin1 .coin2
{
    background:#444;
    width:inherit;
    height:inherit;
    -webkit-transform: translate3d(0,0,150px);
} 
```

看来工作和 JSFiddle 在[这里](http://jsfiddle.net/S5dYf/)。

坦率地说，我对 translate3d 了解不多，但最近在学习 CSS3 时发现了一些关于 CSS3 Transformation 的链接。

*   [CSS3 转换](http://css3.bradshawenterprises.com/transforms/)
*   [硬件加速 CSS](http://mobile.smashingmagazine.com/2012/06/21/play-with-hardware-accelerated-css/)
*   [CSS3 3D 变换](http://www.pageresource.com/css3/3d-transforms-tutorial/)
*   [CSS3 Translate3d -Z 值](http://jsfiddle.net/davechiu/zrVVr/)

# asp.net-mvc-3 - 使用 DataAnnotations 进行验证

> ID：14537564
> 
> 赞同：1
> 
> 时间：2013-01-26T13:53:39.897
> 
> 标签：asp.net-mvc-3, razor

我在表单中有两个按钮。我应该在一个按钮单击中仅验证单个模型属性，并且我应该使用 mvc3 razor 中的数据注释在其他按钮单击中验证所有模型验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:23:43.023

您可以根据单击的按钮传递参数。两个按钮都可以使用不同的参数值提交。根据收到的值，控制器可以决定验证哪些字段。您可以通过 ModelState.Remove("FieldName") 从验证中删除字段。

如果您想通过 ajax 执行此操作，您可以通过 Json 实现验证。

# jsf - Primefaces 依赖 selectOneMenu 和 required="true"

> ID：14537567
> 
> 赞同：7
> 
> 时间：2013-01-26T13:54:06.737
> 
> 标签：jsf, jsf-2, primefaces, selectonemenu

在我的应用程序中，我有三个下拉菜单`p:selectOneMenu`（当从这三个下拉菜单触发 on-change 事件时，文本框的值由 ajax 生成。

这是xhtml：

```
<p:selectOneMenu id="customerMenu" value="#{adminController.activityDTO.customerId}" required="true" label="Customer Name" style="width: 200px">
    <f:selectItem itemLabel="Select One" itemValue="" />
    <f:selectItems value="#{adminController.customers}" var="customer" itemLabel="#{customer.customerName}" itemValue="#{customer.customerId}" />
    <p:ajax listener="#{adminController.generateActivityName}" update="activityId" />                       
</p:selectOneMenu>

<p:selectOneMenu id="activityTypeMenu" value="#{adminController.activityDTO.activityParentType}" required="true" label="Activity Type"
    style="width: 200px">
    <f:selectItem itemLabel="Select One" itemValue="" />
    <f:selectItems value="#{adminController.activityTypes}" var="activityType" itemLabel="#{activityType.parent}" itemValue="#{activityType.parent}" />
    <p:ajax listener="#{adminController.updateDependentActivity}" update="activitySubType" />
</p:selectOneMenu>

<p:selectOneMenu id="activitySubTypeMenu" value="#{adminController.activityDTO.activitySubType}" required="true" label="Activity Sub Type"
    style="width: 200px">
    <f:selectItem itemLabel="Select One" itemValue="" />
    <f:selectItems value="#{adminController.activitySubTypes}" var="activityType" itemLabel="#{activityType.name}" itemValue="#{activityType.id}" />
    <p:ajax listener="#{adminController.generateActivityId}" update="activityId" />
</p:selectOneMenu>

<p:inputText id="activityId" autocomplete="off" readonly="true" value="#{adminController.activityDTO.activityId}"
    label="#{adbBundle['admin.addActivityPanel.addActivityTable.activityId']}" required="true" /> 
```

和依赖于我正在填充的`activityTypeMenu`选定`activitySubTypeMenu`值。`activityTypeMenu``activitySubTypeMenu`

现在我面临的问题是：

*   假设我选择了“外部”和“内部” `activityTypeMenu`，默认“选择一个”。`activityTypeMenu`如果我从“`activitySubTypeMenu`项目”和“服务”中选择“外部”。但是，如果我选择默认的“选择一个”，`activitySubTypeMenu`则仍然保留以前动态填充的值。这是因为该`required="true"`属性拒绝触发我从中加载动态值的后端方法。
*   我尝试将 of 设置`itemValue`为`<f:selectItem itemLabel="Select One" itemValue="" />`，`#{null}`然后在选择“选择一个”选项时触发后端方法，我可以设置一个空列表`activitySubTypes`，这样就可以了`activitySubTypeMenu`。但在那种情况下，`required="true"`它变得毫无意义。我的意思是，我也有保存按钮，点击该按钮而不选择任何选项（即选择“选择一个”），`activityTypeMenu`而`activitySubTypeMenu`不是抛出`ValidatorException`，并且组件没有被 Primefaces 的错误 css 类设置样式。
*   此外，如果我没有将`itemValue`of设置`<f:selectItem itemLabel="Select One" itemValue="" />`为`#{null}`然后将所选值更改为默认选项（“选择一个”）不会清除`activityId` `p:inputText`. 如果我使用`#{null}`，那么我可以获得后端方法触发，我可以将文本框的值设置为空。

我如何解决这个问题并获得预期的结果。我想要的是：

*   如果选项设置为“选择一个”，则相关菜单将为空，文本框的菜单为空。
*   我想使用该`required="true"`属性。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T17:44:49.407

您可以在`required`属性中使用 EL。您可以让所需的表达式`true`仅在按下特定提交按钮时或在提交特定组件值时进行评估（因此通过请求参数映射中存在的客户端 ID `#{param}`）。

以下启动示例应该可以满足您的需要。

```
<p:selectOneMenu binding="#{menu1}" ... required="#{not empty param[submit.clientId]}">
    ...                       
</p:selectOneMenu>
<p:selectOneMenu ... required="#{not empty param[menu1.clientId]}">
    ...                       
</p:selectOneMenu>
<p:commandButton binding="#{submit}" ... /> 
```

这样，只有在按下表单的主提交按钮时才需要第一个菜单（因此在触发事件侦听器时不需要），只有当第一个菜单有值时才需要第二个菜单。

# javascript - 仅使用 javascript 将信息提交到 Google Drive 电子表格

> ID：14537569
> 
> 赞同：2
> 
> 时间：2013-01-26T13:54:18.180
> 
> 标签：javascript, spreadsheet, google-drive-api, google-drive-realtime-api

我基本上是在寻找一种仅使用 javascript 将信息提交到 Google Drive 电子表格的方法。更改特定单元格的值是我所追求的。有谁知道这是否可能？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:21:46.203

如果您有适当的客户端 ID 和浏览器的 API 密钥，这是它在 localhost 和网站中工作的正确代码，我采用相同的 javascript 并将其放入 sencha-touch 和 phoneGap 应用程序，但它不起作用如果你对此有任何想法？：

```
<!DOCTYPE html>
<!--
  Copyright 2011 Google Inc. All Rights Reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<html>
  <head>
    <title>JavaScript API Example</title>

    <style type="text/css">
      body { font-family: Arial; }
    </style>
    <script type="text/javascript">
      // The clientId and apiKey are available at
      // https://code.google.com/apis/console. For more information, see
      // http://code.google.com/p/google-api-javascript-client/wiki/Authentication.
      var clientId = '958693490238-nti7k45ajor0287286o8a5p4m26um32n.apps.googleusercontent.com';
      var clientSecret = 'p--MYTDoaqliiiSmP4TPFZX5';
      var apiKey = 'AIzaSyCa_oJyC4vX1KAbNoi0n0Zyqf_ZWTp8J7U';
      var scopes = 'https://www.googleapis.com/auth/fusiontables';
      var tableId;

      // Initialize the client, set onclick listeners.
      function initialize() {
        gapi.client.setApiKey(apiKey);
        document.getElementById('create-table').onclick = createTable;
        document.getElementById('insert-data').onclick = insertData;
        document.getElementById('select-data').onclick = selectData;
        window.setTimeout(function() { auth(true); }, 1);
      }

      // Run OAuth 2.0 authorization.
      function auth(immediate) {
        gapi.auth.authorize({
          client_id: clientId,
          client_secret: clientSecret,
          scope: scopes,
          immediate: immediate
        }, handleAuthResult);
      }

      // Handle the results of the OAuth 2.0 flow.
      function handleAuthResult(authResult) {
        var authorizeButton = document.getElementById('authorize-button');
        var createTableButton = document.getElementById('create-table');
        if (authResult) {
          authorizeButton.disabled = true;
          createTableButton.disabled = false;
        } else {
          authorizeButton.disabled = false;
          authorizeButton.onclick = function() { auth(false); return false; };
        }
      }

      // Run a request to create a new Fusion Table.
      function createTable() {
        var tableResource = [];
        tableResource.push('{');
        tableResource.push('"name": "People",');
        tableResource.push('"columns": [');
        tableResource.push('{ "name": "Name", "type": "STRING" },');
        tableResource.push('{ "name": "Age", "type": "NUMBER" }');
        tableResource.push('],')
        tableResource.push('"isExportable": true');
        tableResource.push('}');
        runClientRequest({
          path: '/fusiontables/v1/tables',
          body: tableResource.join(''),
          method: 'POST'
        }, function(resp) {
          var output = JSON.stringify(resp);
          document.getElementById('create-table-output').innerHTML = output;
          tableId = resp['tableId'];
          document.getElementById('table-id-1').innerHTML = tableId;
          document.getElementById('table-id-2').innerHTML = tableId;
          document.getElementById('insert-data').disabled = false;
          document.getElementById('select-data').disabled = false;
          document.getElementById('create-table').disabled = true;
        });
      }

      // Run a request to INSERT data.
      function insertData() {
        var name = document.getElementById('name').value;
        var age = document.getElementById('age').value;
        var insert = [];
        insert.push('INSERT INTO ');
        insert.push(tableId);
        insert.push(' (Name, Age) VALUES (');
        insert.push("'" + name + "', ");
        insert.push(age);
        insert.push(')');
        query(insert.join(''));
      }

      // Run a request to SELECT data.
      function selectData() {
        query('SELECT * FROM ' + tableId);
      }

      // Send an SQL query to Fusion Tables.
      function query(query) {
        var lowerCaseQuery = query.toLowerCase();
        var path = '/fusiontables/v1/query';
        var callback = function(element) {
          return function(resp) {
            var output = JSON.stringify(resp);
            document.getElementById(element).innerHTML = output;
          };
        }
        if (lowerCaseQuery.indexOf('select') != 0 &&
            lowerCaseQuery.indexOf('show') != 0 &&
            lowerCaseQuery.indexOf('describe') != 0) {

          var body = 'sql=' + encodeURIComponent(query);
          runClientRequest({
            path: path,
            body: body,
            headers: {
              'Content-Type': 'application/x-www-form-urlencoded',
              'Content-Length': body.length
            },
            method: 'POST'
          }, callback('insert-data-output'));

        } else {
          runClientRequest({
            path: path,
            params: { 'sql': query }
          }, callback('select-data-output'));
        }
      }

      // Execute the client request.
      function runClientRequest(request, callback) {
        var restRequest = gapi.client.request(request);
        restRequest.execute(callback);
      }
    </script>
    <script src="https://apis.google.com/js/client.js?onload=initialize"></script>
  </head>
  <body>
    <h1>
      Fusion Tables JavaScript Example
    </h1>
    <h2>
      (1) Authorize using OAuth 2.0
    </h2>
    <p>
      Click Authorize to start the OAuth 2.0 authorization flow. If you have
      already authorized, the button will be disabled.
    </p>
    <input type="button" id="authorize-button" value="Authorize"><br>

    <h2>
      (2) Create Table
    </h2>
    <p>
      Click "Create Table" to create an exportable Fusion Table called "People"
      with columns "Name" with type "STRING" and "Age" with type "NUMBER".
      <pre>
{
  "name": "People",
  "columns": [
    {
      "name": "Name",
      "type": "STRING"
    }, {
      "name": "Age",
      "type": "NUMBER"
    }
  ],
  "isExportable": true
}</pre>
    </p>
    <input type="button" id="create-table" value="Create Table"
        disabled="disabled">
    <p id="create-table-output"><i>table response goes here...</i></p><br>

    <h2>
      (3) Insert data
    </h2>
    <p>
      Insert data into the newly created table.
    </p>
    <pre>INSERT INTO <span id="table-id-1">[table_id]</span> (Name, Age) VALUES ([name], [age])</pre>
    <label>Name:</label>
    <input type="text" id="name"><br>
    <label>Age:</label>
    <input type="age" id="age"><br>
    <input type="button" id="insert-data" value="Insert data"
        disabled="disabled">
    <p id="insert-data-output"><i>insert response goes here...</i></p><br>

    <h2>
      (4) Select all the rows from the table
    </h2>
    <p>
      Select the data that has been inserted into the newly created table.
    </p>
    <pre>SELECT * FROM <span id="table-id-2">[table_id]</span></pre>
    <input type="button" id="select-data" value="Select data"
        disabled="disabled">
    <p id="select-data-output"><i>select response goes here...</i></p>
  </body>
</html> 
```

# java - 在 Java 中使用 GLUT 库

> ID：14537572
> 
> 赞同：0
> 
> 时间：2013-01-26T13:54:31.350
> 
> 标签：java, eclipse, opengl, glut

我正在尝试在 Java 中使用 glut，我使用 eclipse 作为我的 IDE。

那么，您对使用它有什么建议（我应该怎么做）？有没有这方面的教程？在 Java 中使用是否有比 glut 更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T14:09:56.193

你想用OpenGL做什么？如果您正在制作游戏，请参阅[`LWJGL`](http://lwjgl.org)。如果您只想制作一个图形应用程序，请参阅[`JOGL`](https://jogamp.org/jogl/www/)。

关于设置它的一些教程。

*   [`LWJGL Tutorial Series`](http://goharsha.com/lwjgl-tutorial-series/)-- 我的 OpenGL 3.3 核心教程
*   [`JOGL Tutorial`](http://jogamp.org/wiki/index.php/Jogl_Tutorial)
*   [`LWJGL Tutorials`-- 见教程部分](http://www.lwjgl.org/wiki/index.php?title=Main_Page)

希望这些资源有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T14:06:04.570

我会改用[**JOGL**](https://jogamp.org/jogl/www/)。JOGL 将提供 GLUT 所做的一切以及更多功能！网上有很多关于它的文档。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T14:08:24.213

您可以尝试[JOGL](https://jogamp.org/jogl/www/)，它是 Java 的最佳 OpenGL 绑定之一（也包括 GLUT）。他们以及其他网站上有很多教程。

# c++ - 适用于 x86/64 的安腾交叉编译器

> ID：14537577
> 
> 赞同：4
> 
> 时间：2013-01-26T13:54:55.543
> 
> 标签：c++, compiler-construction, cross-compiling, itanium

我需要为 Itanium 编译我的代码，但似乎所有编译器（ecc、gcc、orc）都需要 Itanium 机器来执行此操作。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T13:58:10.077

您需要将 gcc 设置为交叉编译器。这涉及到自己构建 binutils 和 gcc。

[位于http://www.gelato.unsw.edu.au/IA64wiki/CrossCompilation](http://www.gelato.unsw.edu.au/IA64wiki/CrossCompilation)的 IA64wiki有一个关于如何设置的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:29:07.613

我只能说我是怎么做到的，也许不是最好的方法或最好的工具。

很久以前，我开发了一个非常小的基于优先级的 Itanium 内核和测试任务。我又开始开发了（需求分页、fork 系统调用……）。我最后一次编译它是在一周前。

我发现现在编译交叉编译器对于 IA64 来说是一项非常艰巨的任务。让 gcc 和 binutils 一起工作是另一个问题。我尝试了很多次编译交叉编译器和 binutils - 没有成功）。似乎已经忘记了对安腾的支持，至少比几年还要糟糕得多。

但是，我找到了交叉编译器、binutils 和滑雪模拟器二进制文件的包。一切都立即开始工作（好吧，滑雪不显示 TLB 信息）。

我有 Ubuntu 12，Linux 内核 3.2 AMD64

如何找到工具：

*   滑雪：
    *   Ubuntu Sotfware Center：Ski/IA-64 指令集模拟器（二进制）
*   交叉工具（一起工作！）：
    *   gcc-ia64-linux-gnu-4.7.1-0.1.20120606.fc18.1.x86_64.rpm
    *   binutils-ia64-linux-gnu-2.22.52.0.3-3.fc18.x86_64.rpm

我的网页：[http ://www.isosika.net/](http://www.isosika.net/)

（嗯......我编译了内核，我认为应用程序库支持可能不好或不存在？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-17T13:54:19.110

有 Windows 的 Itanium 版本，所以 Visual Studio 当然可以为 Itanium 生成代码

# jquery-ui - 为什么 jQuery UI 可排序连接列表不适用于 Angular UI？

> ID：14537581
> 
> 赞同：2
> 
> 时间：2013-01-26T13:55:33.453
> 
> 标签：jquery-ui, angularjs, jquery-ui-sortable, angular-ui

我正在尝试使用[Angular UI](http://angular-ui.github.com/)和[jQuery UI Sortable](http://jqueryui.com/sortable/)来模仿[连接列表](http://jqueryui.com/sortable/#connect-lists)的行为。

但是，这种行为非常不稳定：http: [//jsfiddle.net/hKYWr/227/](http://jsfiddle.net/hKYWr/227/)有 什么想法吗？

* * *

HTML：

```
<div ng:controller="controller">
    <ul class='mysortable' ui:sortable ui:options="{connectWith:'.mysortable'}" ng:model="list1">
        <li ng:repeat="item in list1" class="item">{{item}}</li>
    </ul>
    <ul class='mysortable' ui:sortable ui:options="{connectWith:'.mysortable'}" ng:model="list2">
        <li ng:repeat="item in list2" class="item">{{item}}</li>
    </ul>
    <hr>
    <pre ng-bind="list1 | json"></pre>
    <hr>
    <pre ng-bind="list2 | json"></pre>
</div>

<script src="http://code.angularjs.org/1.0.2/angular.min.js"></script>
<script src="https://raw.github.com/angular-ui/angular-ui/master/build/angular-ui.min.js"></script> 
```

* * *

JS：

```
var myapp = angular.module('myapp', ['ui']);

myapp.controller('controller', function ($scope) {
    $scope.list1 = ["1", "2", "3"];
    $scope.list2 = ["A", "B", "C"];
});

angular.bootstrap(document, ['myapp']); 
```

* * *

CSS：

```
ul {
    display: inline-block;
}
.item {
    padding: 2px;
    width: 50px;
    height: 20px;
    border: 1px solid #333;
    background: #EEE;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:17:14.747

这将在 AngularUI 的下一个版本 (v0.4.0) 中修复

[https://github.com/angular-ui/angular-ui/pull/291](https://github.com/angular-ui/angular-ui/pull/291)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:23:28.537

这是一个使用默认 ui-sortable 的示例：http: [//jsfiddle.net/a9fFC/3](http://jsfiddle.net/a9fFC/3)但我没有让模型反映更新。

但是使用[angular-ui-multi-sortable](https://github.com/mostr/angular-ui-multi-sortable)我让它工作了：http: [//jsfiddle.net/a9fFC/6/](http://jsfiddle.net/a9fFC/6/)

```
<div ng-controller="controller">
    <ul ui-multi-sortable ng-model="list">
        <li ng-repeat="item in list" class="item">{{item}}</li>
    </ul>
    <hr />
    <div ng-repeat="item in list">{{item}}</div>
</div> 
```

js：

```
var myapp = angular.module('myapp', ['ui']);

myapp.controller('controller', function ($scope) {
    $scope.list = ["one", "two", "three", "four", "five", "six"];
});

angular.bootstrap(document, ['myapp']); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-26T14:27:37.980

5 个比特币说它是 angular ui，它间接影响了 jquery ui 库

# php - 从外部来源对我的网站的预定请求

> ID：14537584
> 
> 赞同：1
> 
> 时间：2013-01-26T13:56:12.967
> 
> 标签：php, web

我的虚拟主机不提供调度请求，服务器也是 Windows，所以我想知道是否有网站允许我创建对其他网站的调度请求示例：我可以从另一个网站 24 小时拨打我的 abc.php 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T14:00:09.100

是的，有这样的服务。

如果您的托管服务提供商不允许设置 cronjobs，有一些服务将允许 cronjob 最多每小时免费，例如[cronless.com](http://cronless.com)、[easycron.com](http://easycron.com)或[setcronjob.com](http://setcronjob.com)。

# php - 更改正则表达式模式与函数返回值匹配

> ID：14537585
> 
> 赞同：0
> 
> 时间：2013-01-26T13:56:17.223
> 
> 标签：php, preg-match, return-value

我有以下变量：

```
$text = 'This is a sentence [url=http://site.com] that contains urls [url=javascript:alert();]'; 
```

以及验证 URL 的以下代码行：

```
$text = preg_replace('/\[url=([^\\]]+)]/', filter_var('$1', FILTER_VALIDATE_URL), $text); 
```

输出：

“这是一个包含 url 的句子”

如何获得以下输出？

“这是一个包含 url的句子[http://site.com ”](http://site.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:13:26.613

```
$text = 'This is a sentence [url=http://site.com] that contains urls [url=javascript:alert();]';
$text = preg_replace_callback(
    '/\[url=([^\\]]+)]/',
    function ($url) {
        $clean = filter_var($url[1], FILTER_VALIDATE_URL);
        if ($clean) {
            return '<a href="' . $clean . '">' . $clean . '</a>';
        } else {
            return "";
        }
    },
    $text
); 
```

见[http://codepad.viper-7.com/Hwgq90](http://codepad.viper-7.com/Hwgq90)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T14:16:25.600

```
<?php

$text = 'This is a sentence [url=http://site.com] that contains urls [url=javascript:alert();]';

function url($url){
    if(filter_var($url, FILTER_VALIDATE_URL))
        return $url;
    return '';
}

$text = preg_replace('/\[url=([^\\]]+)]/e', 'url("$1")', $text);

echo $text; 
```

# php - codeigniter 在没有 foreach 的情况下获取数据

> ID：14537588
> 
> 赞同：0
> 
> 时间：2013-01-26T13:56:27.310
> 
> 标签：php, codeigniter

我正在尝试从两个表中选择数据
，然后将其作为数组发送回函数
并使用 codeigniter 将该数据数组传递给我的视图。

当我`print_r`在视图中时，来自数据库的值数组如下所示

```
Array 
( 
     [0] => stdClass Object 
     ( 
         [task] => Receiving Building Permit 
         [task_status] => 0 
         [date_duration] => 25.08.08 (1 day) 
         [gallery] => 1 
         [download] => 1 
         [project_name] => Investment and Development 
     ) 
     [1] => stdClass Object 
     ( 
         [task] => Back Filling 
         [task_status] => 1 
         [date_duration] => 16.11.08 - 21.11.08 (7 days) 
         [gallery] => 1 
         [download] => 1 
         [project_name] => 
         Investment and Development 
      ) 
 ) 
```

实际上它返回两行。如果您注意到两行中 project_name 的值相同

现在我想`project_name`在行的顶部打印值，然后我将使用 foreach 重复这些行。

如何`project_name`在foreach之前获得价值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T14:16:15.317

要打印项目名称，您可以这样做`$array[0]->project_name`。

# java - 如何设置表格只能单击一次的mouseListener？

> ID：14537591
> 
> 赞同：0
> 
> 时间：2013-01-26T13:57:21.567
> 
> 标签：java, swing, jtable, mouseevent, double-click

我已经编写了这个监听器：

```
 playlistTable.addMouseListener(new MouseAdapter() {

        private boolean ignoreDoubleClicks = false;

        public void mouseClicked(MouseEvent e) {
            if (e.getClickCount() == 2 && !ignoreDoubleClicks) {
                this.ignoreDoubleClicks  = true;
                System.out.println(ignoreDoubleClicks);
                JTable target = (JTable)e.getSource();
                int row = target.getSelectedRow();

                videoTableModel = new VideoTableModel(playlistService.getMoviesOfPlaylist(row));
                target.setModel(videoTableModel);
                //TODO enables the table
                //movieTable.setEnabled(false);

                createPlaylist.setEnabled(false);
                setButtonIcon("icons\\playlist_grau.png", createPlaylist, "createPlaylist");

                removePlaylist.setEnabled(false);
                setButtonIcon("icons\\bin_grau.png", removePlaylist, "removePlaylist");

                algoButton.setEnabled(false);
                setButtonIcon("icons\\glyphicons_137_cogwheels_grau.png", algoButton, "algoButton");

                //                  playlistTable.setEnabled(false);

                revalidate();
            }
        }
    }); 
```

但是，当我第一次双击播放列表时，我会看到电影。当我用另一个按钮返回并再次双击播放列表表时，它不再是可点击的。为什么？

**更新**

问题是 `this.ignoreDoubleClicks = true;` 但是，为什么它没有设置为false？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T14:09:28.627

在第一次双击鼠标事件时，您设置`this.ignoreDoubleClicks = true`并且我没有看到任何将其重置为`false`. 由于所有代码似乎都包含在`if`检查 if 的语句中`!this.ignoreDoubleClicks`，因此将其设置为 true 会永久锁定侦听器。条件`e.getClickCount() == 2`的左侧*（*`false` *`(&&).`*

# php - mysqli->fetch_row 问题

> ID：14537592
> 
> 赞同：0
> 
> 时间：2013-01-26T13:57:22.907
> 
> 标签：php, mysql, mysqli

我从未在 php 中使用过新的 mysqli 类，因为旧的 mysql 接口总是足够好，但是我正在尝试更新一些旧代码以使用 mysqli，但事情进展并不顺利，我收到以下错误：

```
[error] [client 127.0.0.1] PHP Fatal error:  Call to a member function fetch_row() on a non-object in  [location of file] 
```

但是我知道查询很好，因为我可以回显它并直接在数据库上使用它来给我很好的结果。我有一种感觉，我错误地使用了“fetch_row()。

有人可以建议我做错了什么吗？

```
/// class setup stuff
public function query($query,$sanitize=TRUE)
    {       
        if($sanitize!==FALSE)
        {
            $query=$this->mysqli->escape_string($query);
        }
        echo $query;
        $this->mysqli->query($query);
        echo $this->mysqli->error;
        //$this->mysqli->free();
    }    
public function select($table,$what,$where,$orderby=FALSE,$order=FALSE,$limits=FALSE,$sanitize=TRUE) //this is really simple and very limited
        {
            //process the select query and send to query method
            $query = "SELECT $what FROM $table WHERE ";
            $i = 0;
            foreach($where as $key => $value)
            {
                $key    = $sanitize?$this->mysqli->escape_string($key):$key;
                $value  = $sanitize?$this->mysqli->escape_string($value):$value;
                $query  .= "$key='$value' ";
                $i++;
                if($i<count($where))
                {
                    $query .= "AND ";
                }
            }
            // check the max rowcount 
            $this->query($query,FALSE);
            $result = $this->mysqli->use_result(); //<--this is the issue 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T13:59:11.907

$this->mysqli 未初始化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T14:13:57.317

感谢@scones 的建议，我在初始化连接后对其进行了测试，发现问题是“use_result”以及我没有在查询函数中返回结果的事实。这是工作版本通知`$result = $this->query($query,FALSE);`

```
public function query($query,$sanitize=TRUE)
{       
    if($sanitize!==FALSE)
    {
        $query=$this->mysqli->escape_string($query);
    }
    echo $query;
    if($this->mysqli->error)
    {
        echo $this->mysqli->error;
        exit;
    }
    else
    {
        return $this->mysqli->query($query); //<-- needed this
    }
    //$this->mysqli->free();
}

public function select($table,$what,$where,$orderby=FALSE,$order=FALSE,$limits=FALSE,$sanitize=TRUE) //this is really simple and very limited
{
    //process the select query and send to query method
    $query = "SELECT $what FROM $table WHERE ";
    $i = 0;
    foreach($where as $key => $value)
    {
        $key    = $sanitize?$this->mysqli->escape_string($key):$key;
        $value  = $sanitize?$this->mysqli->escape_string($value):$value;
        $query  .= "$key='$value' ";
        $i++;
        if($i<count($where))
        {
            $query .= "AND ";
        }
    }
    $result = $this->query($query,FALSE);  //<-- works now 
```

# c# - Entity Framework table-per-type: 1:0...* 与派生类的 FK 关系 - 是基类还是派生类的 FK？

> ID：14537596
> 
> 赞同：1
> 
> 时间：2013-01-26T13:57:45.530
> 
> 标签：c#, database, entity-framework, ef-code-first, table-per-type

我有一个`Tenant`抽象类型的类`UserProfile`。我正在使用 table-per-type 继承方法。一个租户可以代表一组租户。A`TenantGroupMember`是这样一个组之一。因此，1`Tenant`可以有零个或多个`TenantGroupMember`s。

使用 table-per-type 方法如何表示此关联？我接近它的方式如下：

```
[Table("TenantGroupMember")]
public class TenantGroupMember
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int TenantGroupMemberId { get; set; }

    // 1:many with Tenant - base UserProfile
    public int UserProfileId { get; set; }
}

[Table("Tenant")]
public class Tenant : UserProfile
{
    public string TenantAge { get; set; }
    public string PersonalDescription { get; set; }

    // 1:many with TenantGroupMember
    public virtual ICollection<TenantGroupMember> TenantGroupMembers { get; set; }
} 
```

我将 FK 放入`TenantGroupMember`from是否正确`UserProfile`？因为`ICollection TenantGroupMembers`是 in `Tenant`，EF 会知道 a`TenantGroupMember`只能与 a 相关联`Tenant`，而不能与 的任何其他派生类相关联`UserProfile`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:04:47.460

是的你是对的。但是，您必须将`TenantGroupMember.UserProfileId`属性显式声明为关系的外键。EF 不会按照惯例检测到这一点，并将其视为普通标量属性并在数据库中创建另一个 FK 列。您可以使用数据注释来做到这一点...

```
[ForeignKey("UserProfileId")]
public virtual ICollection<TenantGroupMember> TenantGroupMembers { get; set; } 
```

...或使用 Fluent API：

```
modelBuilder.Entity<Tenant>()
    .HasMany(t => t.TenantGroupMembers)
    .WithRequired()
    .HasForeignKey(tgm => tgm.UserProfileId); 
```

该关系将`Tenant`数据库中的表作为主体/主键表，而不是`UserProfile`表。

# c# - 扩展方法中的异常处理

> ID：14537597
> 
> 赞同：0
> 
> 时间：2013-01-26T13:57:57.270
> 
> 标签：c#, c#-4.0, exception

在扩展方法中处理异常的最佳方法是什么？这包括从方法生成的异常以及在空对象上调用扩展方法引起的空异常。

在适当的业务功能中调用扩展方法之前处理好还是方法应该注意异常。

只是在这里给出想法是代码示例

```
class ABC
    {
        private readonly string name;
        public ABC(string name)
        {
            this.name = name;
        }

        public string Name { get { return this.name; } }
    }

    internal static class ABCExtension
    {
        internal static void GetName(this ABC abc)
        {
            Console.WriteLine(abc.Name);
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            ABC abc = new ABC("baam");
            abc = null;
            abc.GetName();

            Console.Read();
        }
    } 
```

这将产生空异常，因为 abc 对象为空。

在此处添加详细信息以进行更多说明。我对班级的责任感到困惑

我想知道谁负责处理异常。提供方法的扩展类或使用它的类？

如果需要任何进一步的细节，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T14:06:33.260

传递给扩展方法的参数类似于常规方法的参数。这包括扩展方法的第一个参数（`this`在类型名称之前）。如果您的方法对输入参数强制执行任何规则，它应该检查它们。如果有一个条件需要调用方法处理，就让调用方法引发异常。

顺便说一句，总是检查空值，不要让它`NullReferenceException`发生。`NullReferenceException`意味着您的代码中存在错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T14:22:41.883

通常，在像 GetName() 这样的方法中，您会检查参数，如果为 null，则抛出`NullArgumentException`. 但是，如果 GetName() 是成员函数，`abc.GetName()`则将导致`NullReferenceException`. 因此，在扩展方法的情况下，它应该模拟一个成员函数，并抛出一个`NullReferenceException`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T14:02:14.757

与任何其他方法一样，您应该如何处理和处理扩展方法中的异常没有区别。确保捕获外部异常（使用 try/catch）并验证方法中的参数（使用 ArgumentException）。

# algorithm - 如何对特定类型的输入进行排序

> ID：14537605
> 
> 赞同：1
> 
> 时间：2013-01-26T13:59:00.573
> 
> 标签：algorithm, sorting

我有一系列元素，比如 a1,a2,...,an。(n ~ 4*10^7)

输入将主要进行排序。更具体地说，任何小于 a_i 的元素都将位于左侧或非常靠近右侧（约 300 个元素）。

我怎样才能有效地排序这个序列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:10:31.120

您可以使用一堆 N 元素来执行此操作，其中 N 是最大重叠（在您的情况下为 N=300）。

从空[堆](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)开始。

对于序列中的每个元素：

1.  向堆中添加元素

2.  如果堆有超过 N 个元素，则输出（并从堆中删除）最小的元素

最后输出堆中剩余的元素。

这将具有复杂性 O(nlogN)

# css - Bootstrap 响应式文本大小

> ID：14537611
> 
> 赞同：176
> 
> 时间：2013-01-26T13:59:24.543
> 
> 标签：css, twitter-bootstrap, responsive-design

我正在尝试使用引导程序构建响应式布局，目前正在使用 font-size:3em 定义一些标题；

但是当布局缩小时，这太大了。如何响应地减小文本的大小？

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2014-02-24T08:13:55.543

最简单的方法是使用 % 或 em 中的尺寸。只需更改基本字体大小，一切都会改变。

**较少的**

```
@media (max-width: @screen-xs) {
    body{font-size: 10px;}
}

@media (max-width: @screen-sm) {
    body{font-size: 14px;}
}

h5{
    font-size: 1.4rem;
} 
```

查看所有方法 [https://stackoverflow.com/a/21981859/406659](https://stackoverflow.com/a/21981859/406659)

您可以使用视口单位 (vh,vw...) 但它们**不适用于 Android < 4.4**

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2013-09-25T08:36:56.017

好吧，我的解决方案有点骇人听闻，但它有效，我正在使用它。

```
1vw = 1% of viewport width

1vh = 1% of viewport height

1vmin = 1vw or 1vh, whichever is smaller

1vmax = 1vw or 1vh, whichever is larger

h1 {
  font-size: 5.9vw;
}
h2 {
  font-size: 3.0vh;
}
p {
  font-size: 2vmin;
} 
```

# php - 在 PHP 中使用 foreach 循环

> ID：14537612
> 
> 赞同：1
> 
> 时间：2013-01-26T13:59:24.730
> 
> 标签：php

我正在尝试从 HTML5 多文件上传器循环浏览多个上传的文件。我正在使用 foreach 循环，但由于某种原因，它没有正确地遍历我的文件。这个 foreach 循环应该做 4 件事中的 1 件事。

1）如果文件大小大于500kb，并且是jpeg，它会重新调整照片大小并将其上传到ima​​ges目录并将记录添加到数据库中。

2）如果文件大于500kb，并且是png，它将照片转换为jpeg，重新调整大小并将其上传到ima​​ges目录并将记录添加到数据库中。（注意：我的图像大小调整脚本只处理 jpeg）。

3) 如果文件大于 5MB，则跳过照片并继续下一个循环。

3) 如果文件小于 500kb，则将照片上传到 images 目录，并将记录添加到数据库中。

现在，我可以毫无问题地重新调整图像大小以正常工作，但是对于 png 的照片或大于 5MB 的照片我有问题。出于某种原因，如果大于 5MB 的照片是数组中的第一个元素，则循环只会跳过它们，但如果它们位于中间或末尾则不会。我是否使用错误的方法来调用和测试我的 Array 元素？

我的PHP代码：

```
foreach ($_FILES['uploads']['name'] as $key => $file) {
    $time= time();

    // checking the photo's size
    if ($_FILES['uploads']['size'][$key] > 500000 && $_FILES['uploads']['size'][$key] < 5242880) { 
        // check to make sure the file is a jpeg
        if ($_FILES['uploads']['type'][$key] == "image/jpeg") {
            // resizing the photo                                     
            include('resize_albums.php');
         }
         else if ($_FILES['uploads']['type'][$key] == "image/png") {
            // making the image a jpeg if it isn't already
            $image = imagecreatefrompng($_FILES['uploads']['tmp_name'][$key]);
            imagejpeg($image, $_FILES['uploads']['tmp_name'][$key], 100);
            // resizing the file
            include('resize_albums.php');
         }
    }
    else if ($_FILES['uploads']['size'][$key] > 5242880) {
        continue;
    }
    else {
        // upload the photo and add the record to the database
    }
} 
```

# c# - ASP Listbox 1 Column 如果选中，则从数据源获取列值和另一列

> ID：14537614
> 
> 赞同：0
> 
> 时间：2013-01-26T13:59:35.653
> 
> 标签：c#, asp.net

我正在尝试将 Listbox 与 Ajax 扩展器一起用于自动填充搜索。列表框连接到具有 2 列的 SQL 数据源，我知道列表框不支持多列。我对显示这两列不感兴趣，我想做的是如下：

到目前为止，我在检索第一列值方面没有问题

```
string SupplierListtxt = SupplierListBox.SelectedItem.Text;
   MessageBox.Show(SupplierListtxt.ToString()); 
```

概念如下：

供应商数据库具有公司名称和唯一 ID (SupplierID) 设置为主键。产品数据库有一个 SupplierID 设置为外键。

因此，我希望当用户选择列表框时，我应该同时收到公司名称和供应商 ID 信息，以便将其插入到产品数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:01:39.063

你必须在你DataBind ListBox 之前设置`DataTextField` **and 。** [`DataValueField`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.datavaluefield.aspx)

```
SupplierListBox.DataSource = CreateDataSource();
SupplierListBox.DataTextField="YourTextField";
SupplierListBox.DataValueField="YourIdField";
SupplierListBox.DataBind(); 
```

`SelectedValue`您可以通过或获得值`SelectedItem.Value`。

如果您想以编程方式添加项目，您可以添加`ListItems`：

```
for(int i = 1; i <= 10; i++)
{
    string id = i.ToString();
    string text = "Foo#" + i;
    SupplierListBox.Items.Add(new ListItem(text, id));
} 
```

# java - 如何从 javascript/jquery 调用 GWT'-CellTable-CustomEditTextCells api，如 Commit() & Cancel()？

> ID：14537618
> 
> 赞同：5
> 
> 时间：2013-01-26T14:00:30.817
> 
> 标签：java, javascript, jquery, gwt

我正在使用 GWT2.3 单元格表

如何使用 javascript/jquery 从 Commit() 和 Cancel() 中调用 GWT'-CellTable-CustomEditTextCells api？

以下是 EdittextCell-GWT 的 cancel()

在 javascript 中执行此操作的任何替代方法？

```
 /**
   * Commit the current value.
   * 
   * @param context the context of the cell
   * @param parent the parent Element
   * @param viewData the {@link ViewData} object
   * @param valueUpdater the {@link ValueUpdater}
   */
  private void commit(Context context, Element parent, ViewData viewData,
      ValueUpdater<String> valueUpdater) {
    String value = updateViewData(parent, viewData, false);
    clearInput(getInputElement(parent));
    setValue(context, parent, viewData.getOriginal());  
    if (valueUpdater != null) {
      valueUpdater.update(value);
    }
  } 
```

* * *

以下是 EdittextCell-GWT 的 cancel()

在javascript中执行此操作的任何替代方法

```
/**
   * Convert the cell to non-edit mode.
   * 
   * @param context the context of the cell
   * @param parent the parent Element
   * @param value the value associated with the cell
   */
  private void cancel(Context context, Element parent, String value) {
    clearInput(getInputElement(parent));
    setValue(context, parent, value);
  } 
```

使用 javascript 我想将新值更新到选定的单元格并将其转换为非编辑模式如何使用 javascript/jquery？

额外信息：

当 EditTextCell 处于非编辑模式时，其内部 html 代码在单击 editTextCell 后，单元格从非编辑模式转换为编辑模式。我在该单元格中创建了 Input element + Img。

单击图像时，我打开了 jquerys datepicker。

单击 jquery datepicker 上的“完成”按钮时，我需要将该单元格转换为非 edt 模式，并将新值更新为 GWT celltable 提供的 valueUpdater。valueUpdater 将新值更新到 celltable。

请为我提供解决方案或解决此问题的任何指针。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:40:23.740

你试过了`$('#renderedId').val("updatedValue").blur();`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T22:06:51.920

在单元格渲染方法中，将“id”附加到它并

使用`$('#renderedId').val("updatedValue");`

PS我没试过。

# c# - sqlite中的计数值变化

> ID：14537619
> 
> 赞同：-1
> 
> 时间：2013-01-26T14:00:32.530
> 
> 标签：c#, sqlite, count

我有下表：

```
 CREATE TABLE ta91 (
    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, 
    date INTEGER, 
    _520  INTEGER, 
    _530 INTEGER,
    _540 INTEGER,
    _550 INTEGER,
    _560 INTEGER,
    _570 INTEGER,
    _580 INTEGER,
    _590 INTEGER,
    _600 INTEGER,
    _610 INTEGER,
    _620 INTEGER,
    _630 INTEGER,
    _640 INTEGER,
    _650 INTEGER,
    _660 INTEGER,
    _670 INTEGER,
    _680 INTEGER,
    _690 INTEGER,
    _700 INTEGER,
    _710 INTEGER,
    _720 INTEGER,
    _730 INTEGER,
    _740 INTEGER,
    _750 INTEGER,
    _760 INTEGER,
    _770 INTEGER,
    _780 INTEGER,
    _790 INTEGER,
    _800 INTEGER,
    _810 INTEGER,
    _820 INTEGER,
    _830 INTEGER,
    _840 INTEGER,
    _850 INTEGER
) 
```

具有以下值：

```
INSERT INTO "someTable" VALUES ("10","1355480306018","1","0","0","0","0","1","0","0","0","0","1","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0");
INSERT INTO "someTable" VALUES ("11","1355480307044","1","0","0","0","0","0","0","0","1","0","0","0","1","0","0","0","0","0","1","1","1","1","0","0","0","0","0","0","0","0","0","0","0","0");
INSERT INTO "someTable" VALUES ("12","1355480308027","1","0","0","0","0","0","0","0","1","0","0","0","1","0","0","0","0","0","1","1","1","1","0","0","0","0","0","0","0","0","0","0","0","0");
INSERT INTO "someTable" VALUES ("13","1355480309033","1","0","0","0","0","1","0","0","0","0","1","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0");
INSERT INTO "someTable" VALUES ("14","1355480310038","1","0","0","0","0","1","0","0","0","0","1","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0");
INSERT INTO "someTable" VALUES ("15","1355480311043","1","0","0","0","0","0","0","0","1","0","0","0","1","0","0","0","0","0","1","1","1","1","0","0","0","0","0","0","0","0","0","0","0","0");
INSERT INTO "someTable" VALUES ("16","1355480312043","1","0","0","0","0","0","0","0","1","0","0","0","1","0","0","0","0","0","1","1","1","1","0","0","0","0","0","0","0","0","0","0","0","0");
INSERT INTO "someTable" VALUES ("17","1355480313048","1","0","0","0","0","1","0","0","0","0","1","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"); 
```

我如何计算值从 0/1 切换的次数。1/0 直接在 sql 中的每一列？

我正在使用带有 System.Data.SQLite.dll 1.0.82.0 的 c# 来访问数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T14:17:17.387

假设

1.  在 sqlite 之外没有可移植性要求；
2.  连续`id`值；
3.  需要计算（每列） 0 到 1 和 1*到*0 开关的*总*次数；
**   表名是`someTable`，就像在你的`INSERT`陈述中一样；*

 *你可以使用这个：

```
SELECT SUM(a._520<>b._520) AS s_520,
       SUM(a._530<>b._530) AS s_530,
       SUM(a._540<>b._540) AS s_540,
       SUM(a._550<>b._550) AS s_550,
       SUM(a._560<>b._560) AS s_560,
       SUM(a._570<>b._570) AS s_570,
       SUM(a._580<>b._580) AS s_580,
       SUM(a._590<>b._590) AS s_590,
       SUM(a._600<>b._600) AS s_600,
       SUM(a._610<>b._610) AS s_610,
       SUM(a._620<>b._620) AS s_620,
       SUM(a._630<>b._630) AS s_630,
       SUM(a._640<>b._640) AS s_640,
       SUM(a._650<>b._650) AS s_650,
       SUM(a._660<>b._660) AS s_660,
       SUM(a._670<>b._670) AS s_670,
       SUM(a._680<>b._680) AS s_680,
       SUM(a._690<>b._690) AS s_690,
       SUM(a._700<>b._700) AS s_700,
       SUM(a._710<>b._710) AS s_710,
       SUM(a._720<>b._720) AS s_720,
       SUM(a._730<>b._730) AS s_730,
       SUM(a._740<>b._740) AS s_740,
       SUM(a._750<>b._750) AS s_750,
       SUM(a._760<>b._760) AS s_760,
       SUM(a._770<>b._770) AS s_770,
       SUM(a._780<>b._780) AS s_780,
       SUM(a._790<>b._790) AS s_790,
       SUM(a._800<>b._800) AS s_800,
       SUM(a._810<>b._810) AS s_810,
       SUM(a._820<>b._820) AS s_820,
       SUM(a._830<>b._830) AS s_830,
       SUM(a._840<>b._840) AS s_840,
       SUM(a._850<>b._850) AS s_850
FROM "someTable" a INNER JOIN "someTable" b
ON a.id = b.id-1; 
```

当然，我已经生成了这个东西。你也可以。*

# git - 使用 GIT 对 Java 网站进行版本控制的最佳方法是什么

> ID：14537627
> 
> 赞同：1
> 
> 时间：2013-01-26T14:01:49.640
> 
> 标签：git, jakarta-ee, tomcat, github

我在我的 unix 中安装了一个 git repo，用于跟踪我们的 Java EE 网站的版本。

我目前遇到的问题不是 git 的使用，而是我想使用它的方式，这将在下面解释。

我在一个由 3 名开发人员组成的团队中工作，他们为网站开发做出了贡献。

最初，当我在我们的服务器中安装 Git 时，我直接创建了一个包含实际工作文件的 webapps 目录的 repo，并遇到了以下问题。

1）在将更改提交到 repo 时，我们中的一个人通常会做 a`git add .`并将其提交到存储库，该存储库不仅会提交提交者更改的文件，还会提交其他开发人员的更改。

当我们遇到这个问题时，我们决定需要在同一服务器中的不同目录中为我们每个人创建单独的非裸存储库，以容纳整个代码。我们遵循的基本工作结构如下所示：

![在此处输入图像描述](../Images/88cc21202d6d03443d1ee24ad8f7dbb8.png)

如上图所示，我们创建了一个裸仓库，其中包含由 webapps 推送的网站内容，图中是工作目录。

这里的基本工作流程是：

1）为每个开发人员创建 n 个非裸仓库。

2）从该裸仓库中获取整个网站的工作文件

3）对我们自己的仓库进行更改后，推送到裸仓库

4) 使用 post-receive 钩子配置的裸仓库实际上会更新工作目录。

此设置工作正常，但我们面临很多问题，如下所示：

1）每个开发人员在单独的目录中都有自己的内容，在将代码推送到裸仓库之前无法测试代码，这将更新工作目录-即使对于一个 jsp 文件更改，这些步骤的 Coz 我最终也做了 20 次提交直到它开始正常工作而没有错误，因为我们的 tomcat 只指向原始工作目录。

这成了这里最头疼的问题。

这种策略解决了以前存在的冲突问题，但在测试代码方面产生了更大的问题。

我们如何改善这种在项目中使用 GIT 似乎有益的情况。

任何人都可以提出任何改进方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T14:13:02.450

也许这样的策略可能会奏效？我之前在一个小团队中使用过类似的策略，它对我们很有效：

*   每个开发人员在进行任何更改之前都会创建一个分支。
*   开发人员做了一些工作并提交到他们的分支
*   如果可能，开发人员针对他们自己的目录运行 tomcat（或 jetty 或其他）进行测试。Maven 使这非常容易。
*   在推送之前，开发人员将他们的分支重新定位到 master
*   开发人员将他们的分支推送到裸仓库
*   然后你（或负责最终批准的人）将分支合并到 master。如果开发人员正确地变基，这应该是一个简单的快进合并。

更新了一些关于每个开发人员如何运行 webapp 的想法：

我可以想到几种方法来完成上面的第三个要点：

*   使用单个安装的tomcat。创建多个上下文，每个开发人员一个。

    例如，对于 developer1，在 tomcat_home/conf/catalina/localhost 下创建一个名为 dev1.xml 的上下文文件，其内容类似于：

    ?xml version="1.0" encoding="UTF-8"?> 上下文路径="/dev1" docBase="/home/developer1/wars/your-webapp-1.0.war" unpackWAR="false"/>

    （注意我删除了第一个'<'所以xml会出现在帖子中）

*   使用 jetty 使用命令行运行战争，例如：

    java -jar jetty-runner.jar your-webapp-1.0.war

*   使用 ant 或 maven 等构建工具提供的机制来运行和测试 webapp。例如，在 maven 中，您可以使用 jetty-plugin 运行 webapp `mvn jetty:run`，甚至可以将其配置为在每次构建项目时启动 web 服务器并运行测试。

# c# - 中断任务并在之后继续

> ID：14537632
> 
> 赞同：0
> 
> 时间：2013-01-26T14:02:56.867
> 
> 标签：c#, asp.net, wpf, multithreading

我正在使用带有长时间运行的异步任务的 WPF 构建 ASP.NET 应用程序，在某些情况下，需要向用户询问更多信息。有没有办法可以中断但不能取消任务，等待用户响应并根据结果继续？

我所发现的只是在任务之前和之后使用回调的方法。我尝试`Send()`通过从主线程传递的 SynchronizationContext 调用 UI 线程方法，但它（有时）**抛出 Null Reference Exception**。

更具体地说，我无法理解为什么这段代码在调用 Send() 时会抛出 NullReferenceException：

```
protected void Page_Load(object sender, EventArgs e)
{
    Task task = new Task(DoSomeWork, new Tuple<SynchronizationContext, object>(SynchronizationContext.Current, new object()));
    task.Start();
}

public void DoSomeWork(object state)
{
    Tuple<SynchronizationContext, object> cst = (Tuple<SynchronizationContext, object>)state;
    cst.Item1.Send(Writer, "Message");
}

public void Writer(object s)
{
    Label1.Text = (s as string);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:05:55.773

看看现在在运行时中可用的 Async 和 Await 的东西。

在这里创建一个明智的演示对我来说有点太多了，但我可以指出：

[http://msdn.microsoft.com/en-gb/library/vstudio/hh191443.aspx](http://msdn.microsoft.com/en-gb/library/vstudio/hh191443.aspx)

这应该让你开始。

## 更新

这里还有一些可能会有所帮助的链接。

[http://code.jonwagner.com/2012/09/06/best-practices-for-c-asyncawait/](http://code.jonwagner.com/2012/09/06/best-practices-for-c-asyncawait/)

[http://www.itwriting.com/blog/4913-a-simple-example-of-async-and-await-in-c-5.html](http://www.itwriting.com/blog/4913-a-simple-example-of-async-and-await-in-c-5.html)

[http://weblogs.asp.net/dixin/archive/2012/11/02/understanding-c-async-await-1-compilation.aspx](http://weblogs.asp.net/dixin/archive/2012/11/02/understanding-c-async-await-1-compilation.aspx)

注意：有很多关于新的 C#5 异步的东西，但是如果你仔细看的话，仍然有很多 C#4 异步的东西，只是 C#5 在聚光灯下那一刻，所以你可能不得不进一步筛选一些东西。

# python - 如何在多进程设置中调试 threading.lock 的滥用？

> ID：14537633
> 
> 赞同：0
> 
> 时间：2013-01-26T14:03:38.770
> 
> 标签：python, performance, debugging, locking, multiprocessing

我正在优化一个内容管道，在尝试多处理时，我有一个很糟糕的惊喜：运行时间增加了一倍，并且使用 runnake，我意识到 90% 的时间都花在了 threading.lock 上。

我认为一些资源是跨进程共享的（我怀疑是 sqlalchemy 对象）并且想检查这个假设。但我不明白怎么做。你知道有什么方法可以检查吗？

# sql - 可扩展的 CRUD 应用程序。储存技术

> ID：14537638
> 
> 赞同：2
> 
> 时间：2013-01-26T14:04:54.790
> 
> 标签：sql, database, azure

我们正在讨论一个带有少量后台处理的 CRUD 应用程序（每个用户每天大约 20 个决策。不大）。我们计划每天进行大约 2000 万笔交易。大多数这些交易将是小的文本。大约 15% 的图像大小约为 1MB。主要是阅读。客户数量可能在 500,000 到 100 万之间。

我们正在考虑将其托管在 Windows Azure 上。对于这种应用程序，我可以使用哪些存储技术？我在考虑用于图像的 Azure 表，用于其他事务数据的 SQL Azure。制作多个数据库会使其更具可扩展性吗？我的意思是，如果我有两个实体，我可以让两个数据库托管在两个不同的独立服务器上，从而打破规范化。那会有好处吗？我在这里很困惑，对处理大数据知之甚少。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T14:42:40.347

首先阅读[Windows Azure 存储抽象及其可扩展性目标](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/05/10/windows-azure-storage-abstractions-and-their-scalability-targets.aspx)。您不能真正将图像存储在 Azure 表中。它们限制为每个实体 1MB。您可以将图像存储在启用了有效交付的 Azure BLOB（使用 CDN）中，而不是 SQL，将属性数据和指向图像的链接存储在 Azure 表中。引用的文章描述了可扩展性和性能目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T14:42:28.107

如果您以二进制格式存储图像，那么 azure table 将不够用，因为表行的最大大小为 1MB（包括分区键和行键）。因此，对于存储图像，Blob 存储是最好的......

如果事务数据是非关系型的，那么您可以使用 Azure 表...它可以比 sql azure 更好地扩展。[http://msdn.microsoft.com/en-us/library/windowsazure/jj553018.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj553018.aspx)

# java - Google App Engine Ant 宏 - 本地还是生产？

> ID：14537639
> 
> 赞同：0
> 
> 时间：2013-01-26T14:05:01.470
> 
> 标签：java, google-app-engine, ant

[此页面的](https://developers.google.com/appengine/docs/java/tools/ant#The_Complete_Build_File)*完整构建文件*部分中列出的 Ant 宏是否与您的本地 AppEngine 服务器或您在 GAE 上的实际生产帐户有关？也就是说，如果我运行目标，我的 GAE 项目会上传到我的本地 GAE 实例还是我的生产服务器？`update`

当涉及到本地开发时，以及在使用外部 Ant 构建（而不是从 Eclipse 内部）时，我是先将我的项目打包到 WAR 中，然后将其复制到本地 GAE 实例的部署目录中，还是做其他事情？如何在本地部署？

无论哪种方式，您如何/在哪里指定您的帐户凭据（或其他相关信息），以便 Ant 构建知道从正确的 GAE 帐户上传/下载信息？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:19:22.093

构建过程在您的本地机器上运行。

没有“上传到我的本地 GAE 实例”之类的东西。使用 ant 构建时，使用`copyjars`目标将 jar 文件复制到 WAR 文件夹中。此时您的本地 GAE 开发服务器将看到这些文件。

目标将`update`构建结果上传到生产服务器。

您的应用 ID 在 appengine-web.xml 中指定

这是在 GAE Java 文档中

[https://developers.google.com/appengine/docs/java/config/appconfig](https://developers.google.com/appengine/docs/java/config/appconfig)

# objective-c - CLLocationManagerDelegate 最准确的位置

> ID：14537640
> 
> 赞同：0
> 
> 时间：2013-01-26T14:05:17.863
> 
> 标签：objective-c, ios6, mkmapview, cllocationmanager

我在这里有一个简单的应用程序，可以获取用户最准确的位置并将其显示在 MKMapView 上。我正在使用下面的代码。

```
- (void) locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
{
    CLLocation *location = [locations lastObject];
    NSDate *eventDate = location.timestamp;
    NSTimeInterval howRecent = [eventDate timeIntervalSinceNow];
    if (abs(howRecent) < 15.0){
        [manager stopUpdatingLocation];
        previusViewController.coordinate = location.coordinate;
        [self exhibitMap:location.coordinate];
    }
} 
```

问题是默认情况下会多次调用此委托方法，这使我的 MKMapView 有时会固定多个注释。请让我知道是否有人以前遇到过这个问题，以及是否有一个简单的解决方案。

谢谢，马科斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T21:57:44.383

在添加 MKPointAnnotation 之前，我使用下面的命令解决了我的问题：

```
[self.map removeAnnotations:self.map.annotations]; 
```

# qt - qtcreator - exe 在 qtcreator 内部工作正常，但不在外部

> ID：14537651
> 
> 赞同：3
> 
> 时间：2013-01-26T14:06:12.483
> 
> 标签：qt, windows-7, release, qt-creator, qt5

我想给我的一个朋友一个小项目的发布版本。从 qtcreator 内部启动时它工作得非常好，但在双击 .exe 文件时无法打开。它甚至没有给我一条错误消息。

现在，当我尝试在我的 exe 文件旁边复制一些 Qt .dll 文件（如 Qt5Core.dll、Qt5Gui.dll、Qt5Widgets.dll）时，它并没有改变任何东西。我如何知道我的项目有哪些依赖项？.pro 文件并没有告诉我太多

```
QT       += core gui

greaterThan(QT_MAJOR_VERSION, 4): QT += widgets

TARGET = project1
TEMPLATE = app

SOURCES += main.cpp\
    mainwindow.cpp

HEADERS  += mainwindow.h

FORMS    += mainwindow.ui 
```

我正在使用基于 Qt 5.0.0（32 位）的 Windows 7（64 位）、Qt Creator 2.6.1

感谢您的帮助萨迪克

编辑：解决方案可以在我的回答中看到

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T01:51:09.980

解决了！我所要做的就是下载“ **libEGL.dll** ”并将其放在我的exe文件所在的目录中。当然也需要来自 qt 的所有其他 .dll 文件。但是这些在错误消息中明确提到。但是对于“ **libEGL.dll** ”，甚至没有错误消息。可以忽略“dependency walker”中列出的 .dll 文件。对于我的问题，这个工具并没有真正帮助。它没有列出 libEGL.dll，但列出了其他实际上未使用的 .dll 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T14:33:45.700

```
How can I know what dependencies my project has? 
```

您可以使用[官方网站上的程序](http://www.dependencywalker.com/)**Dependency Walker**来查看您的程序需要什么 dll。

**注意**使用相同版本的 Qt dll（如果您使用 Qt5，请从 Qt5 的`bin`目录中找到您的 dll，依此类推）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T19:41:17.453

由于您在谈论 Qt5，请确保您有一个`platforms`目录，该目录至少`qminimal.dll`位于您的 program.exe 文件的目录中。它们是对 Qt 所做的新更改的一部分。（也可能`qwindows.dll`）。

`msvcr*.dll`此外，如果您不使用静态链接进行编译，请确保包含适当的dll。检查依赖walker。

```
/myProgram.exe 
/Qt5Gui.dll
/Qt5Core.dll
/ .... (other DLLs you require)
/platforms/qminimal.dll
/platforms/qwindows.dll (Not always required) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T14:34:34.420

你用的是什么编译器？如果您使用 MSVC++，则需要为编译器捆绑运行时 DLL 文件或让用户安装 Microsoft Visual C++ Redistributable Package。

# javascript - 如何在 chrome 控制台中递归探索数组

> ID：14537655
> 
> 赞同：1
> 
> 时间：2013-01-26T14:06:31.877
> 
> 标签：javascript, arrays, console, google-chrome-devtools

我想找到一种方法在*chrome 控制台*（甚至其他控制台，如*firebug*）中探索 Array 对象，因为我们可以轻松地为其他对象做。

以下是我在 chrome 控制台中输入的代码段：

```
var str = new String("foo"); str;
var bool = new Boolean(true); bool;
["foo", "bar", str, bool, {}]; 
```

chrome控制台中的结果：
![Chrome 控制台探索数组片段](../Images/65e7d0cafb2a307b56efca5375ed72db.png)

目前我能找到的唯一方法是一种 hack：

```
[["foo", "bar", str, bool, {}]]; 
```

![Chrome 控制台探索数组破解](../Images/95142ba75104550b565b1491ddd58abd.png)

是否有任何选项、命令或方法可以仅显示数组对象的内部结构，因为它默认为其他对象完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:18:36.110

这就是该`console.dir()`函数的目的：

![在此处输入图像描述](../Images/e94835bb6ad2a981eb187a07a487a696.png)

有关更多信息，请参阅：

[https://developer.mozilla.org/en-US/docs/DOM/console.dir](https://developer.mozilla.org/en-US/docs/DOM/console.dir)

[http://getfirebug.com/logging](http://getfirebug.com/logging)

[https://developers.google.com/chrome-developer-tools/docs/console](https://developers.google.com/chrome-developer-tools/docs/console)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T14:19:21.477

您可以同时使用[console.dir](https://developer.mozilla.org/en-US/docs/DOM/console.dir)和[console.log](https://developer.mozilla.org/en-US/docs/DOM/console.log)（取决于当前版本）：

```
var str = new String("foo"); str;
var bool = new Boolean(true); bool;

console.dir(["foo", "bar", str, bool, {}]);
console.log(["foo", "bar", str, bool, {}]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T14:14:40.430

使用 console.log(["foo", "bar", str, bool, {}]);

在控制台和脚本中都可以使用： ![在此处输入图像描述](../Images/e95e5d53d50f7277fee6ebb3c468d26c.png)

# ios - 如何防止需要在每个类中导入框架？

> ID：14537658
> 
> 赞同：1
> 
> 时间：2013-01-26T14:06:41.907
> 
> 标签：ios, xcode, frameworks, pch

我有一个名为 Parse 的框架，它几乎用于我拥有的每个 Viewcontroller。如何防止需要在每个类中添加导入语句，例如 #import Parse/Parse.h ？

我听说你应该将它包含在 PCH 文件中，但不知何故这不起作用。我是否需要在“编译源”或类似的东西中设置 PCH？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:24:46.327

前缀头被编译并存储在缓存中，然后在编译期间自动包含在每个文件中。这可以加快编译速度，并允许您包含一个文件，而无需向使用它的每个文件添加导入语句。

例子：

```
#ifdef __OBJC__
  #import <UIKit/UIKit.h>
  #import <Foundation/Foundation.h>
  #import "Constants.h"
#endif 
```

将其添加到您的 NameOfMyProject-prefix.pch 文件中。

# xml - 如何获取xml中引用idref的标签内容

> ID：14537659
> 
> 赞同：0
> 
> 时间：2013-01-26T14:06:52.390
> 
> 标签：xml, xslt, xsd

我正在尝试获取正在播放的 selecao 的名称，例如`<jogo numero="1">`我想从 IDREF s1 中获取 PAIS 的名称，它是 Franca。

xpath 中的查询：//id(@pais) 并返回 Franca 和 Senegal，OK，这两个是唯一有 IDREF pais 的。但是我把这个表达式放在 xsl 中并不起作用。

有人知道错误在哪里吗？

这是我的代码：

XML

```
 <?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="file:///C:/Users/Cesar%20Frantz/Desktop/XML/trabalhoxml.xsl"?>
<Bolaocopa xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="file:///C:/Users/Cesar%20Frantz/Desktop/exemplo.xsd">
    <grupos>
        <grupo tipo="A">
            <pais id="s1">Franca</pais>
            <pais id="s2">Senegal</pais>
            <pais id="s3">Uruguai</pais>
            <pais id="s4">Dinamarca</pais>
        </grupo>
    </grupos>
    <jogos>
        <faseGrupos>
            <jogoGrupo id="a">
                <jogo numero="1">
                    <selecao pais="s1">0</selecao>
                    <selecao pais="s2">1</selecao>
                </jogo>
            </jogoGrupo>
        </faseGrupos>
    </jogos>
</Bolaocopa> 
```

XSL：

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="2.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
  <html>
  <body>

<xsl:value-of select="//id(@pais)"/>

  </body>
  </html>
</xsl:template>

</xsl:stylesheet> 
```

架构：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- edited with XMLSpy v2013 sp1 (x64) (http://www.altova.com) by Cesar (UNIFRA - Franciscan University Center) -->
<!--W3C Schema generated by XMLSpy v2013 sp1 (x64) (http://www.altova.com)-->
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:simpleType name="ST_selecao">
        <xs:restriction base="xs:int">
            <xs:enumeration value="0"/>
            <xs:enumeration value="1"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="ST_pais">
        <xs:restriction base="xs:string">
            <xs:enumeration value="Dinamarca"/>
            <xs:enumeration value="Franca"/>
            <xs:enumeration value="Senegal"/>
            <xs:enumeration value="Uruguai"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="AT_6">
        <xs:restriction base="xs:string">
            <xs:enumeration value="s1"/>
            <xs:enumeration value="s2"/>
            <xs:enumeration value="s3"/>
            <xs:enumeration value="s4"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="AT_5">
        <xs:restriction base="xs:string">
            <xs:enumeration value="A"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="AT_3">
        <xs:restriction base="xs:string">
            <xs:enumeration value="s1"/>
            <xs:enumeration value="s2"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="AT_2">
        <xs:restriction base="xs:int">
            <xs:enumeration value="1"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="AT_1">
        <xs:restriction base="xs:string">
            <xs:enumeration value="a"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:complexType name="T_selecao">
        <xs:simpleContent>
            <xs:extension base="ST_selecao">
                <xs:attribute ref="pais"/>
            </xs:extension>
        </xs:simpleContent>
    </xs:complexType>
    <xs:complexType name="T_pais">
        <xs:simpleContent>
            <xs:extension base="ST_pais">
                <xs:attribute name="id" type="xs:ID" use="required"/>
            </xs:extension>
        </xs:simpleContent>
    </xs:complexType>
    <xs:complexType name="T_jogos">
        <xs:sequence>
            <xs:element ref="faseGrupos"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="T_jogoGrupo">
        <xs:sequence>
            <xs:element ref="jogo"/>
        </xs:sequence>
        <xs:attribute name="id" type="AT_1" use="required"/>
    </xs:complexType>
    <xs:complexType name="T_jogo">
        <xs:sequence>
            <xs:element ref="selecao" maxOccurs="unbounded"/>
        </xs:sequence>
        <xs:attribute ref="numero" use="required"/>
    </xs:complexType>
    <xs:complexType name="T_grupos">
        <xs:sequence>
            <xs:element ref="grupo"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="T_grupo">
        <xs:sequence>
            <xs:element ref="pais" maxOccurs="unbounded"/>
        </xs:sequence>
        <xs:attribute ref="tipo" use="required"/>
    </xs:complexType>
    <xs:complexType name="T_faseGrupos">
        <xs:sequence>
            <xs:element ref="jogoGrupo"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="T_Bolaocopa">
        <xs:sequence>
            <xs:element ref="grupos"/>
            <xs:element ref="jogos"/>
        </xs:sequence>
    </xs:complexType>
    <xs:attribute name="tipo" type="AT_5"/>
    <xs:attribute name="pais" type="xs:IDREF"/>
    <xs:attribute name="numero" type="AT_2"/>
    <xs:element name="selecao" type="T_selecao"/>
    <xs:element name="pais" type="T_pais"/>
    <xs:element name="jogos" type="T_jogos"/>
    <xs:element name="jogoGrupo" type="T_jogoGrupo"/>
    <xs:element name="jogo" type="T_jogo"/>
    <xs:element name="grupos" type="T_grupos"/>
    <xs:element name="grupo" type="T_grupo"/>
    <xs:element name="faseGrupos" type="T_faseGrupos"/>
    <xs:element name="Bolaocopa" type="T_Bolaocopa"/>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:11:51.413

**编辑**：再次阅读您的问题后，我想您想检索`pais`节点引用的`selecao`节点的文本值。
为此，我将进行如下操作：

```
<xsl:template match="selecao">
    <xsl:variable name="pais" select="@pais" />
    <p>
        <xsl:value-of select="/Bolaocopa/grupos/grupo/pais[@id = $pais]" />
    </p>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T14:23:08.403

听起来这就是你想要的：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:key name="pais" match="pais" use="@id"/>

  <xsl:template match="/">
    <html>
      <body>
        <xsl:apply-templates select="//selecao"/>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="selecao">
    <p>
      <xsl:value-of select="key('pais', @pais)"/>
    </p>
  </xsl:template>

</xsl:stylesheet> 
```

这将产生输出：

```
<html>
  <body>
    <p>Franca</p>
    <p>Senegal</p>
  </body>
</html> 
```

正如[XPath 规范](http://www.w3.org/TR/xpath/#unique-id)所述，

> > 如果文档没有 DTD，则文档中的任何元素都不会具有唯一 ID。

因此，您必须有一个 DTD 才能使用该`id()`功能。我认为在这里制作 DTD 会有点过头了，所以上面的 XPath 表达式应该足够了。

# taskbar - 如何更改 Awesome WM 将项目添加到任务列表的方式？

> ID：14537666
> 
> 赞同：2
> 
> 时间：2013-01-26T14:08:04.177
> 
> 标签：taskbar, window-managers, tasklist, awesome-wm

我想让我很棒的 WM 像其他窗口管理器一样将项目添加到任务列表中。基本上，当您在 awesome 中打开应用程序时，它会将其放在前一个应用程序之前的任务列表中。

例如，如果您按顺序打开 xterm、gvim 和 firefox，则在任务列表上将首先出现 firefox，然后是 gvim，最后是 xterm。

像 Gnome 和 KDE 这样的大部分窗口管理器将按照打开时的顺序添加项目。

是否有可能在 AWESOME 中实现这种行为？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:13:08.327

我需要添加规则：

{ 规则 = { }，属性 = { }，回调 = 糟糕的.client.setslave }

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-06T04:39:41.387

您需要更改`tasklist_update`此文件中的处理函数：

```
~/.config/awesome/awful/widget/tasklist.lua 
```

查找`table.insert(clients, c)`并替换为`table.insert(clients, 1, c)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-15T07:39:47.300

Faiver的解决方案解决了这个问题。但是默认情况下`tasklist.lua`不会显示在目录中。`~/.config/awesome`

至少在最近很棒的包中，这个文件会出现在`/usr/share/awesome/lib/awful/widget/tasklist.lua`. 您可以将其复制到您的`~/.config/awesome/awful/widget/`目录。

你可以查一下： [https](https://apps.fedoraproject.org/packages/awesome/) ://apps.fedoraproject.org/packages/awesome/ & [http://packages.ubuntu.com/trusty/amd64/awesome/filelist](http://packages.ubuntu.com/trusty/amd64/awesome/filelist)

# jquery - jquery 将焦点设置为动态生成的元素

> ID：14537667
> 
> 赞同：4
> 
> 时间：2013-01-26T14:08:04.820
> 
> 标签：jquery, setfocus, dynamic-content

我已经多次遇到这种情况，我希望在未通过某些或其他验证（通常是更改或模糊）后将焦点重新设置为（和或选择其内容）动态生成的元素，但我从来没有出现过有一个满意的解决方案。为什么这行不通？[我的小提琴](http://jsfiddle.net/9UULW/)

```
jQuery(function(){
    jQuery("body").append("<input type='text' id='test' size='5'/>&nbsp;&nbsp;<button>Go</button>");
    jQuery('body').on('blur', '#test', function()
    {   var test = jQuery(this).val();
        if(test && !isNumber(test))
        {   alert('Not a Number!');
            jQuery(this).focus().select();
            //jQuery('#test').focus().select();
        }
    });
});
function isNumber(n) {
        return !isNaN(parseFloat(n)) && isFinite(n);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T14:17:55.843

您可以尝试使用`setTimeout`功能：

```
$('#test').on('blur', function () {
    var $this = $(this), test = this.value;
    if (test && !isNumber(test)) { 
         setTimeout(function() {
            $this.focus().select();
         }, 4);
    }
}); 
```

[http://jsfiddle.net/tFAaf/](http://jsfiddle.net/tFAaf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T14:13:00.187

如果你尝试这个会发生什么：

```
$(function(){
    $("body").append("<input type='text' id='test' size='5'/>&nbsp;&nbsp;<button>Go</button>");

    $('#test').on('blur', function() {   
        if (isNaN(this.value)) {   
            alert('Not a Number!');
            $(this).focus();
        }
    });
}); 
```

如果当用户切换到元素时该元素没有值，它会聚焦它并引发警报。这就是你想要的，不是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T14:15:45.363

这：

```
jQuery('body').on('blur', '#test', function() 
```

应该：

```
jQuery(document).on('blur', '#test', function() 
```

# c# - 选择图像区域

> ID：14537669
> 
> 赞同：1
> 
> 时间：2013-01-26T14:08:27.827
> 
> 标签：c#, .net, image, gdi+

我正在尝试选择使用 openfiledialog 选择的图像区域我尝试选择的区域是 x,y 坐标 5,5 的 16x16 选择后，我想将 16x16 图像绘制到坐标 0 的另一个图片框中,0

这是我得到的代码，但我无法让它选择原始图像的正确部分，有人对它为什么不起作用有任何建议吗？

```
DialogResult result = openFileDialog1.ShowDialog();
if (result == DialogResult.OK) // Test result.
{
    Image origImage = Image.FromFile(openFileDialog1.FileName);
    pictureBoxSkin.Image = origImage;
    lblOriginalFilename.Text = openFileDialog1.SafeFileName;

    System.Drawing.Bitmap bmp = new Bitmap(16, 16);
    Graphics g3 = Graphics.FromImage(bmp);
    g3.DrawImageUnscaled(origImage, 0, 0, 16, 16);

    Graphics g2 = pictureBoxNew.CreateGraphics();
    g2.DrawImageUnscaled(bmp, 0, 0, 16, 16);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:27:43.497

为了选择正确的部分，只需替换：

```
g3.DrawImageUnscaled(origImage, 0, 0, 16, 16); 
```

和

```
g3.DrawImageUnscaled(origImage, -5, -5, 16, 16); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T14:17:46.630

替换这个：

```
Graphics g2 = pictureBoxNew.CreateGraphics();
g2.DrawImageUnscaled(bmp, 0, 0, 16, 16); 
```

有了这个：

```
pictureBoxNew.Image = bmp; 
```

你很好。

完整代码：

```
DialogResult result = openFileDialog1.ShowDialog();
if (result == DialogResult.OK) // Test result.
{
    Image origImage = Image.FromFile(openFileDialog1.FileName);
    pictureBoxSkin.Image = origImage;
    lblOriginalFilename.Text = openFileDialog1.SafeFileName;

    System.Drawing.Bitmap bmp = new Bitmap(16, 16);
    Graphics g3 = Graphics.FromImage(bmp);
    g3.DrawImageUnscaled(origImage, 0, 0, 16, 16);

    pictureBoxNew.Image = bmp;
    //Graphics g2 = pictureBoxNew.CreateGraphics();
    //g2.DrawImageUnscaled(bmp, 0, 0, 16, 16);
} 
```

当您在*event**之外的`Paint`*任何地方绘制某些东西时，它会在需要再次绘制控件时立即删除（即，当从最小化状态恢复时，另一个窗口会越过您的窗口，或者您调用该`Refresh`方法）。因此，将控件的绘图代码放在它们的`Paint`事件中，或者让控件管理图像的绘制（在这种情况下，将 an 分配`Image`给`PictureBox`控件）。

# c# - 在我的上下文类中传递连接字符串名称的目的是什么？

> ID：14537674
> 
> 赞同：-1
> 
> 时间：2013-01-26T14:09:09.493
> 
> 标签：c#, entity-framework, dbcontext

我正在阅读[为 ASP.NET MVC 应用程序创建实体框架数据模型](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application)教程。我遇到了其他人同样的错误：

“无法检索 ProjectBuild 的元数据”。“不支持使用相同的 DbCompiledModel 针对不同类型的数据库服务器创建上下文。相反，为正在使用的每种类型的服务器创建单独的 DbCompiledModel。”

我遇到了这个解决方案

“DbContext 类缺少定义目标 CE 数据库的默认构造函数。”

所以我用这行代码添加了默认构造函数：

```
 public SchoolContext()
        : base("SchoolContext"){} 
```

我的问题是，我们到底在做什么？在带有冒号的构造函数之后做什么？我猜我们是在告诉 SchoolContext 当我们实例化 DBContext 时使用带字符串的构造函数？那是对的吗 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T03:03:26.120

DbContext ctor 需要连接字符串或连接字符串名称。通过在派生自 DbContext 的类中硬编码连接字符串的名称，您可以确保无论您在何处或如何运行应用程序，它都会转到配置文件并读取您在构造函数中硬编码其名称的连接字符串。这意味着您仍然可以配置您的应用程序（因为您没有提供连接字符串本身，而是提供了它的名称），同时配置您的应用程序的方式定义明确，如果您进行一些更改，也不会“神奇地”改变到您的应用程序。

# kendo-ui - Kendoui：构建简单远程表单的最佳方法是什么

> ID：14537676
> 
> 赞同：0
> 
> 时间：2013-01-26T14:09:25.757
> 
> 标签：kendo-ui

我刚刚开始学习 Kendoui，并且已经掌握了网格等。

但是我想为网格中的项目创建一个详细信息表单页面，以便可以更新它们。我在 Kendoui 网格中使用了弹出功能，这很好，但由于表单的大小，我真的需要在单独的页面上使用它。

问题是他们的网站上没有绑定远程数据源的简单表单的示例。

我想知道是否有人可以告诉我最好的使用方法，也许给我一个简单的例子。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:31:55.787

You are right!, there is no standard way of creating a custom popup editor but we should recognize that there is not because being custom, there is no easy (possible?) way of doing it since each of us will request a different thing.

**BUT** that doesn't mean that you cannot (pretty easily) do it.

These are, basically (as far as I can see), the steps to follow:

1.  Define your own way of "poping-up" that window containing your complex form. You can do it by selecting a row and then click a custom [toolbar](http://docs.kendoui.com/api/web/grid#toolbar-array) button.
2.  Get the data of the [selected row](http://docs.kendoui.com/api/web/grid#select),
3.  Bind the data to you popup window using [kendo.bind](http://docs.kendoui.com/api/framework/kendo#bind)
4.  When [closing this window](http://docs.kendoui.com/api/web/window#close) since the data is bound to the datagrid, the [DataSource.transport.update](http://docs.kendoui.com/api/framework/datasource#transportupdate-objectstringfunction) is invoked and your data in the server is updated.

You might also be interested on taking a look into [this answer](https://stackoverflow.com/a/14505323/1802671) that shows how to bind data to a window including reference to an example in JSFiddle.

This might seem harder than what it actually is but if you are familiar with the different KendoUI widgets, it is actually pretty easy.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T19:40:30.883

这是我制作的一个应用程序示例，它演示了详细信息页面的网格视图，它使用 Angular 进行导航。后端数据库是 Wakanda 自定义 nosql 数据库，但您可以使用任何数据源或本地数据。让我知道这是否有帮助，或者您需要对该项目的任何进一步解释。MVVM 更新了一些函数的代码注释。

第一个例子是[MVVM](http://www.kendoui.com/code-library/web/grid/mvvm-crud-validation-multiple-kendoui-widgets-spa-angular-using-wakanda-as-db.aspx)

下一个示例相同的项目但[不使用 MVVM](http://www.kendoui.com/code-library/web/grid/crud-datasource-validation-multiple-kendoui-widgets-spa-angular-using-wakanda-as-db.aspx)只是使用 jquery 从数据源手动设置输入值

这是它的样子的[视频](http://www.youtube.com/watch?v=24tNSnr4aUk&feature=youtu.be)

# android - startActivityForResult，附加问题

> ID：14537677
> 
> 赞同：0
> 
> 时间：2013-01-26T14:09:27.533
> 
> 标签：android, android-intent, imageview, logcat, extra

我的相机应用程序拍照并将媒体文件路径保存在一个字符串中，我用一个 stringextra （保存的路径）开始一个意图，我想用它来设置我的 imageviews 图像。

```
private void intentfbstart() {
        // TODO Auto-generated method stub
        Intent intent = new Intent(this, FacebarActivity.class);
        intent.putExtra("com.lg.photoeveryday.CameraActivity.lastpicture",
                lastpicture);
        startActivityForResult(intent, 1);
        Log.i("APPLICATION", "STARTED INTENT");
    } 
```

额外的包含字符串（= lastpicture），它是

```
mediaFile = new File(mediaStorageDir.getPath() + File.separator
                    + "IMG_" + timeStamp + ".jpg");
            lastpicture = mediaFile.getPath(); 
```

mediaFile 由 PictureCallback.onPictureTaken 使用

Intent 启动了一个新的 Activity，它应该使用 Intent-extra 来设置一个 imageviews 图像。

```
public class FacebarActivity extends Activity {

private ImageView imageview;
private ImageButton OKButton;
private Intent intent = getIntent();
private Bitmap picture;
private Toast toast;
private FacebarView fbview;
private ImageButton XButton;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.pictureview);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

    getWindow().setFormat(PixelFormat.UNKNOWN);

    ImageView imageview = (ImageView) findViewById(R.id.pictureviewLayout_pictureView);

    picture = BitmapFactory
            .decodeFile(intent
                    .getStringExtra("com.lg.photoeveryday.CameraActivity.lastpicture"));
    // picture = BitmapFactory.decodeResource(getResources(),
    // R.drawable.buttonplay); THIS WORKS, but with the intentextra it doesnt
    imageview.setImageBitmap(picture); 
```

这就是 Logcat 抛出的：

```
01-26 14:53:39.425: I/APPLICATION(1543): STARTED INTENT
01-26 14:53:39.680: D/AndroidRuntime(1543): Shutting down VM
01-26 14:53:39.680: W/dalvikvm(1543): threadid=1: thread exiting with uncaught exception (group=0x410e62a0)
01-26 14:53:39.685: E/AndroidRuntime(1543): FATAL EXCEPTION: main
01-26 14:53:39.685: E/AndroidRuntime(1543): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.lg.photoeveryday/com.lg.photoeveryday.FacebarActivity}: java.lang.NullPointerException
01-26 14:53:39.685: E/AndroidRuntime(1543):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
01-26 14:53:39.685: E/AndroidRuntime(1543):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
01-26 14:53:39.685: E/AndroidRuntime(1543):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
01-26 14:53:39.685: E/AndroidRuntime(1543):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
01-26 14:53:39.685: E/AndroidRuntime(1543):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-26 14:53:39.685: E/AndroidRuntime(1543):     at android.os.Looper.loop(Looper.java:137)
01-26 14:53:39.685: E/AndroidRuntime(1543):     at android.app.ActivityThread.main(ActivityThread.java:4898)
01-26 14:53:39.685: E/AndroidRuntime(1543):     at java.lang.reflect.Method.invokeNative(Native Method)
01-26 14:53:39.685: E/AndroidRuntime(1543):     at java.lang.reflect.Method.invoke(Method.java:511)
01-26 14:53:39.685: E/AndroidRuntime(1543):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
01-26 14:53:39.685: E/AndroidRuntime(1543):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
01-26 14:53:39.685: E/AndroidRuntime(1543):     at dalvik.system.NativeStart.main(Native Method)
01-26 14:53:39.685: E/AndroidRuntime(1543): Caused by: java.lang.NullPointerException
01-26 14:53:39.685: E/AndroidRuntime(1543):     at com.lg.photoeveryday.FacebarActivity.onCreate(FacebarActivity.java:50)
01-26 14:53:39.685: E/AndroidRuntime(1543):     at android.app.Activity.performCreate(Activity.java:5206)
01-26 14:53:39.685: E/AndroidRuntime(1543):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
01-26 14:53:39.685: E/AndroidRuntime(1543):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
01-26 14:53:39.685: E/AndroidRuntime(1543):     ... 11 more 
```

logcat 抛出的行 (FacebarAcitvity.java:50) 是

```
picture = BitmapFactory
                .decodeFile(intent
                        .getStringExtra("com.lg.photoeveryday.CameraActivity.lastpicture")); 
```

当我尝试使用资源中的位图时，它工作正常......

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:14:58.917

在`FacebarActivity`改变这一行

```
private Intent intent = getIntent(); 
```

至

```
private Intent intent = null; 
```

然后在`onCreate`

```
intent = getIntent(); 
```

在方法返回`onCreate`之前`getIntent()``null`

# css - CSS改变最后一个元素的样式

> ID：14537679
> 
> 赞同：0
> 
> 时间：2013-01-26T14:09:34.343
> 
> 标签：css, wordpress, css-selectors

在 wordpress 模板中，我有导航菜单

```
<nav id="main-menu">
  <?php
  $home_url = home_url();
  $menu = wp_nav_menu(array('theme_location' => 'main', 'menu_id' => 'menu', 'echo' => false,                                           
  'menu' => 'LT')); 
  $menu = str_replace('#HOME_URL', $home_url, $menu);
  echo $menu;
  ?>
</nav> 
```

我希望最后一个菜单链接是红色的 我试试这个

```
ul#main-menu li a:last-child{color: red;} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T14:16:03.893

假设你的结构是这样的：

```
<ul id="main-menu">
    <li><a></a></li>
    <li><a></a></li>
</ul> 
```

你必须使用：

```
#main-menu li:last-child > a { color: red; } 
```

正如您所指的最后一个`<li>`元素。

# ruby-on-rails-3 - Ruby on Rails：浏览 YAML 文件的更快方法？

> ID：14537680
> 
> 赞同：0
> 
> 时间：2013-01-26T14:09:34.557
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我只是第一次本地化 Rails 应用程序，我想知道是否有更短的方式来表达：

```
flash[:success] = t('.views.person.flash_messages.person_was_successfully_updated') 
```

这是我的`de.yml`文件的摘录：

```
de: 
  views:
    person:
      flash_messages:
        person_was_successfully_updated: "Person aktualisiert." 
```

我很想*说*这样的话：

```
flash[:success] = t('person_was_successfully_updated') 
```

但是当我尝试这样做时，Rails 给了我一个错误。

我不明白为什么，因为`person_was_successfully_updated`在我的文件中绝对是唯一的，`.yml`而且我认为不需要每次都输入整个路径。这也不是很*干燥*。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:12:45.420

*我很想说这样的话*

如果你想`person_was_successfully_updated`直接打电话，那么你应该把它放在第一级。即，在**德：** ..

*但是当我尝试这样做时，Rails 给了我一个错误。*

是的，它肯定会出错，因为`person_was_successfully_updated`根级别没有。

了解更多信息。[http://guides.rubyonrails.org/i18n.html](http://guides.rubyonrails.org/i18n.html)

# mysql - Group BY 子查询返回多于 1 行

> ID：14537681
> 
> 赞同：0
> 
> 时间：2013-01-26T14:09:41.217
> 
> 标签：mysql, sql, sql-update

首先我是 mysql noob :D 我试过搜索，但没有任何帮助。我试图用这个查询更新我的数据库。

```
UPDATE client SET cntr_limit=(SELECT fulltraffic from 
(SELECT
    client.id,
    (SUM(ipacct.byteso)+SUM(ipacct.bytesi)) as fulltraffic
        FROM client 
            LEFT JOIN ips ON client.id = ips.cid
            LEFT JOIN ipacct ON ips.ip = ipacct.target
            WHERE ipacct.tag = 1
        GROUP BY client.id
     ) as x
) +322122547200 ; 
```

我得到子查询返回超过 1 行。我知道子查询不能超过一行，但我需要使用 GROUP BY。如果我删除 GROUP BY 查询有效，但每个客户端都获得从所有 ips 计算的流量，而不是为每个 id 计算不同的流量。

如果我使用。

```
 SELECT
    client.id,
    (SUM(ipacct.byteso)+SUM(ipacct.bytesi)) as fulltraffic
        FROM client 
            LEFT JOIN ips ON client.id = ips.cid
            LEFT JOIN ipacct ON ips.ip = ipacct.target
            WHERE ipacct.tag = 1
        GROUP BY client.id; 
```

我越来越

```
id  fulltraffic
1   5100993724986
3   410550845834
4   790726628007
5   204212941099
6   440290245087
8   587044969960 
```

如果我删除 GROUP BY 我得到

```
id  fulltraffic
1   487196626849368 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T14:14:27.153

使用`IN`而不是`=`.

```
UPDATE client SET cntr_limit IN (SELECT.... 
```

并删除最后一个别名`+322122547200 ;`

`UPDATE`但更好的方法是在声明中加入表格，

```
UPDATE  client a
        INNER JOIN
        (
            SELECT  client.id,
                    (SUM(ipacct.byteso)+SUM(ipacct.bytesi)) as fulltraffic
            FROM    client 
                    LEFT JOIN ips 
                        ON client.id = ips.cid
                    LEFT JOIN ipacct ON ips.ip = ipacct.target
            WHERE   ipacct.tag = 1
            GROUP   BY client.id
        ) b ON a.id = b.id
SET     a.cntr_limit = b.fulltraffic 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T14:45:50.683

How about a join update with a correlated subquery:

[SQLFIDDLE DEMO](http://sqlfiddle.com/#!2/a1a9a/2)

```
UPDATE client c
INNER JOIN
(SELECT a.id as id,
 (SUM(ipact.byteso) + SUM(ipact.bytesi)) as ft
 FROM client a
 LEFT JOIN ips ON a.id = ips.cid
 LEFT JOIN ipact ON ips.id = ipact.ipp
            WHERE ipact.tag = 1
        GROUP BY a.id
     ) x
on c.id = x.id
SET c.climit = x.ft
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T14:23:59.710

> 如果我删除 GROUP BY 查询有效，但每个客户端都获得从所有 ips 计算的流量，而不是为每个 id 计算不同的流量。

是的，这正是您想要的。如果您只想要一行，那么您缺少的是指定 client.id 的 where 子句

如果您要做的只是更新`cntr_limit`为所有客户端的 fulltraffic + 322122547200，那么您的查询很好，并且会立即更新所有客户端及其各自的总数。

如果您一次处理一个客户端，则需要按 client.id 过滤

# php - 如何在没有隐藏元素的情况下发送 POST 数据？

> ID：14537682
> 
> 赞同：2
> 
> 时间：2013-01-26T14:09:42.067
> 
> 标签：php

我想知道如何发送 POST 参数而不在 html 源中显示我的秘密数据。

```
<input type="hidden" name="url" value="$secretdata"> 
```

`$secrerdata`必须发送，`$_POST["url"]`但我想在服务器端发送。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T14:11:44.317

除非您从不让数据到达客户端，否则这是不可能的。否则，“秘密”数据将始终对用户可见 - 通过拦截传输的数据或查看 HTML 源或查看 JS 源（如果您尝试使用 JS 隐藏它）。

您可以做的是将数据存储在`$_SESSION`数组中，并通过第二页上的同一数组访问它，而不是使用 POST。当然，`$_POST`如果某些（错误的）代码依赖于它的存在，您可以手动为其分配一个字段。

另一种选择——只有在由于某种原因不能使用会话**时才**应该使用——将使用用户不知道的密钥加密数据（即仅在服务器端代码中使用）。

显然，您也可以在您的 PHP 代码中发送一个 POST 请求（使用[curl](http://php.net/curl)） - 但是该请求并非来自用户的 IP，并且取决于您想要执行的操作，这可能是一个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T14:12:18.893

我认为你真正需要的是一个会话。在那里，您可以存储仅由服务器处理并与特定用户关联的数据。

为了使用它，您需要`session_start()`在需要提供此数据的每个页面的开头放置。然后你可以使用

```
$_SESSION['yourkey'] = 'Something'; 
```

在此会话中存储数据。之后`$_SESSION['yourkey']`甚至可以在其他页面上使用它。

[您可以在官方文档](http://php.net/manual/en/book.session.php)中找到有关会话的所有信息。

# unit-testing - 在编写源代码之前如何编写单元测试？

> ID：14537683
> 
> 赞同：16
> 
> 时间：2013-01-26T14:09:44.197
> 
> 标签：unit-testing, tdd

由于单元测试是一个白盒测试，它假定您必须事先知道您的代码必须处理的所有情况、您的代码必须处理的所有客户端对象（也就是测试中的 Mock 对象）以及正确的执行顺序客户端对象必须出现在代码中（因为单元测试考虑到模拟对象的调用）。换句话说，您必须确切地知道代码的详细算法。在您准确了解代码的算法之前，您必须先编写它！

从我的角度来看，我看不出在编写源代码之前如何编写正确的单元测试。尽管如此，由于功能测试是一种用户需求，因此可以先编写功能测试。你的建议？最良好的问候

**为此问题提供了一个示例：**
[当它们是对象依赖项时，如何在编写源代码之前编写测试代码？](https://stackoverflow.com/questions/14538910/how-to-write-test-code-before-write-source-code-when-they-are-objects-dependenci)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-26T14:27:46.320

> 换句话说，您必须准确了解代码的详细算法。

不完全的。您必须准确了解代码的详细*行为*，如从代码本身外部观察到的那样。实现此行为的算法，或算法的组合，或任何级别的抽象/嵌套/计算/等。对测试无关紧要。测试只关心达到预期的结果。

因此，测试的价值在于它们是代码应该如何表现的规范。因此，只要仍然可以针对测试对其进行验证，代码就可以随意更改。您可以提高性能、重构可读性和可支持性等。测试确保行为保持不变。

例如，假设我想编写一个将两个数字相加的函数。您可能在脑海中知道您将如何实施它，但暂时将这些知识放在一边。你还没有实现它。首先，您正在实施测试...

```
public void CanAddIntegers()
{
    var addend = 1;
    var augend = 1;
    var result = MyMathObject.Add(addend, augend);
    Assert.AreEqual(2, result);
} 
```

现在您有了测试，您可以实现该方法...

```
public int Add(int addend, int augend)
{
    return ((addend * 2) + (augend * 2)) / 2;
} 
```

哇。等一下……我到底为什么要这样实现它？那么，从测试的角度来看，谁在乎呢？它通过了。实现符合要求。现在我有一个测试，我可以安全地重构代码......

```
public int Add(int addend, int augend)
{
    return addend + augend;
} 
```

这更理智一点。并且测试仍然通过。其实我可以进一步减少代码...

```
public int Add(int addend, int augend)
{
    return 2;
} 
```

你猜怎么着？测试仍然通过。这是我们唯一的测试，也是唯一给出的规范，所以代码“有效”。很明显，我们需要改进测试以涵盖更多案例。编写更多测试将为我们提供编写更多代码所需的规范。

事实上，根据[TDD 的第三条规则，最后一个实现](http://butunclebob.com/ArticleS.UncleBob.TheThreeRulesOfTdd)*应该*是第一个实现：

> 不允许您编写任何超过足以通过一个失败的单元测试的生产代码。

因此，在纯粹由鲍勃叔叔驱动的 TDD 世界中，我们会先编写最后一个实现，然后编写更多测试并逐渐改进代码。

这被称为**红、绿、重构**循环。[在一个简单的、不那么做作的示例保龄球比赛](http://butunclebob.com/ArticleS.UncleBob.TheBowlingGameKata)中很好地说明了这一点。该练习的目的是练习该循环：

1.  首先，编写一个期望某些行为的测试。这是循环的**红色**部分，因为如果没有适当的行为，测试将失败。
2.  接下来，编写代码来展示该行为。这是循环的**绿色**部分，因为它的目的是让测试通过。*只有*让测试通过。
3.  最后，重构代码并改进它。这自然是循环的**重构**部分。

你被卡住的地方是你永远处于循环的**重构**部分。您已经在考虑如何使代码变得更好。什么算法是正确的，如何优化它，最终*应该*如何编写。为此，TDD 是一种*耐心*的练习。不要写最好的代码......*但是*。

1.  首先，确定代码*应*该做什么，仅此*而已*。
2.  接下来，编写执行此操作的代码，*仅*此*而已*。
3.  最后，改进该代码并使其变得更好。

* * *

**更新**

我遇到了一些让我想起了这个问题的东西，但我突然想到了一个随机的东西。也许我误解了你所问的情况。你如何管理你的依赖关系？也就是说，您使用的是哪种依赖注入方法？听起来这可能是这里讨论的问题的根源。

大约只要我记得，我就使用过诸如[Common Service Locator](http://commonservicelocator.codeplex.com)之类的东西（或者，更常见的是，相同概念的本土实现）。在这样做的过程中，我倾向于一种非常具体的依赖注入风格。听起来你正在使用不同的风格。也许是构造函数注入？为了这个答案，我将假设构造函数注入。

那么让我们说，正如你所指出的，它`MyMathObject`依赖于`MyOtherClass1`and `MyOtherClass2`。使用构造函数注入，这使得足迹`MyMathObject`看起来像这样：

```
public class MyMathObject
{
    public MyMathObject(MyOtherClass1 firstDependency, MyOtherClass2 secondDependency)
    {
        // implementation details
    }

    public int Add(int addend, int augend)
    {
        // implementation details
    }
} 
```

因此，正如您所指出的，测试需要提供其依赖关系或模拟。在类的足迹中，没有*实际使用*`MyOtherClass1`or的`MyOtherClass2`迹象，但有迹象表明*需要*它们。作为依赖项，它们被构造函数大声宣传。

所以这引出了你问的问题......当一个人还没有实现对象时，如何先编写测试？同样，没有迹象表明仅在对象的面向外部的设计中*实际使用。*所以依赖是一个需要知道的实现细节。

否则，你首先要这样写：

```
public class MyMathObject
{
    public int Add(int addend, int augend)
    {
        // implementation details
    }
} 
```

然后你会为它编写你的测试，然后你会实现它并发现依赖关系，然后你会为它*重新编写*你的测试。问题就在于此。

但是，您发现的问题不是测试或测试驱动开发的问题。问题实际上在于对象的设计。尽管`// implementation details`已经被掩盖了，但仍有一个实现细节正在逃逸。有一个*泄漏的抽象*：

```
public class MyMathObject
{
    public MyMathObject(MyOtherClass1 firstDependency, MyOtherClass2 secondDependency)
    {                   ^---Right here                 ^---And here

        // implementation details
    }

    public int Add(int addend, int augend)
    {
        // implementation details
    }
} 
```

该对象没有充分封装和抽象其实现细节。它正在尝试，而依赖注入的使用是朝着这一目标迈出的重要一步。但它还没有完全实现。这是因为作为实现细节的依赖关系是*外部可见*的，并且其他对象可以从*外部知道*。（在这种情况下，测试对象。）因此，为了满足依赖关系并使其`MyMathObject`工作，外部对象需要了解其实现细节。他们都这样做。测试对象、使用它的任何生产代码对象、以任何方式依赖它的任何事物。

为此，您可能需要考虑切换依赖项的管理方式。代替构造函数注入或setter注入之类的东西，*进一步*反转依赖关系的管理并让对象在内部通过另一个对象解决它们。

使用前面提到的服务定位器作为起始模式，很容易制作一个其唯一目的（其单一职责）是解决依赖关系的对象。如果您使用的是依赖注入框架，那么这个对象通常只是框架功能的传递（但抽象框架本身......所以少了一个依赖，这是一件好事）。如果使用本地开发的功能，则此对象将抽象该功能。

但是你最终得到的是这样的`MyMathObject`：

```
private SomeInternalFunction()
{
    var firstDependency = ServiceLocatorObject.Resolve<MyOtherClass1>();
    // implementation details
} 
```

因此，即使使用依赖注入，现在的足迹`MyMathObject`也是：

```
public class MyMathObject
{
    public int Add(int addend, int augend)
    {
        // implementation details
    }
} 
```

没有泄漏的抽象，没有外部已知的依赖关系。随着实现细节的改变，测试不需要改变。这是将测试与他们正在测试的对象分离的另一个步骤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T14:22:13.580

显然，如果您不了解“软件”意图是什么，则无法编写测试，但*如果***要求**或**规范**详细，则绝对有可能。

你可以写一些符合要求**但会失败**的东西；*然后*根据规范产生最小的工作量以使测试通过。

除非你是某种天才——第一次剪辑需要重构和引入抽象、模式、可维护性、性能和各种其他因素。

因此，如果了解了需求，您可以先进行测试——但在实现组合在一起之前，测试不会通过，并且只需要使测试通过的实现。

以这种方式工作在现实中并不总是符合要求 - 特别是在难以获得规范的情况下。如果您没有得到作为开发人员所需的东西，您需要小心不要盲目地沿着这条道路前进。在继承代码或添加到“棕地”项目时，通常也无法实现。作为开发人员，尽早确定实用性很重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T17:10:02.110

首先：大量单元测试不需要 Mocks，不需要与其他对象交互；你的问题不适用于那些。

如果新方法的目的或部分目的是对某个协作对象产生影响，那么这就是必须测试的一部分。如果这不是它的目的，但您的实现偶然对合作者产生了影响，那么您不应该测试这种偶然影响。

无论哪种方式，很容易看出您可以在编写代码之前编写测试。如果您的方法应该影响另一个对象，那么测试应该这样说。如果您的方法不应该这样做，则测试不需要说明该方法与其他对象的交互。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T14:22:55.567

这是人们在开始 TDD 时很难克服的问题。我敢肯定在 SO 上有很多很好的答案，尤其是在programmers.stackexchange.com 上（这个问题可能更适合那个论坛）。

我可以说很多东西来帮助你理解，但没有一个比你实际做一些 TDD 更有效。作为一个快速开始的地方，我将向您[推荐这篇关于代码 katas](http://www.peterprovost.org/blog/2012/05/02/kata-the-only-way-to-learn-tdd)的文章，它链接到一些有用的 TDD 练习。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T14:23:23.800

不是真的。使用 TDD，您将从您期望产品代码处理的测试用例开始。这并不意味着不应该有*产品*代码。您的类功能等可以存在。您从失败的测试用例开始，然后不断更改您的产品代码以使其通过。

请参阅[http://msdn.microsoft.com/en-us/library/aa730844(v=vs.80).aspx#guidelinesfortdd_topic2](http://msdn.microsoft.com/en-us/library/aa730844(v=vs.80).aspx#guidelinesfortdd_topic2)

# sql-server - 将 LinkedServer 配置为数据库中的 FileStream

> ID：14537685
> 
> 赞同：0
> 
> 时间：2013-01-26T14:09:53.073
> 
> 标签：sql-server, sql-server-2008, filestream, linked-server

假设 SQL Server 2008 中的这个表使用了 FILESTREAM 类型：

```
CREATE TABLE MyFsTable
(
  fId INT IDENTITY PRIMARY KEY,
  fData VARBINARY(MAX) FILESTREAM  NULL,
  fName NVARCHAR(300),
  RowGuid UNIQUEIDENTIFIER  NOT NULL  ROWGUIDCOL UNIQUE DEFAULT NEWID()
); 
```

然后我将一个 Access 文件 (.accdb) 插入到该表中。

所以，我需要一个链接服务器到数据库中的这个文件，但我不知道如何配置链接服务器的数据源，我看到的所有示例如下：

```
EXEC master.dbo.sp_addlinkedserver @server = N'ACCESS', @srvproduct=N'access',
@provider=N'Microsoft.ACE.OLEDB.12.0', @datasrc=N'f:\test.accdb' 
GO 
```

但我不想使用磁盘位置，如何将此 LinkedServer 的数据源配置为数据库中的 FileSTREAM 文件？有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:23:59.773

您不需要链接服务器即可使用 FileStream。如果一列的数据类型为 FILESTREAM，那么当您选择该列时，SQL Server 将读取该列中的占位符并自动将查询定向到磁盘位置。

您是经常插入 Access 数据库还是一次？您可以使用链接服务器从 MS Access 数据库中导入数据......但该 MS Access 数据库必须位于网络上的某个磁盘上。

# python - Python脚本未执行

> ID：14537688
> 
> 赞同：0
> 
> 时间：2013-01-26T14:10:39.810
> 
> 标签：python, command-line, python-2.7

我刚开始为10gen Education提供的在线课程学习python，[**MongoDB for developers (python)**](https://education.10gen.com/courses)，我已经成功安装了python 2.7并设置了环境vars（路径：C:\python27），我可以打开python shell并执行命令和东西，但是当我创建一个名为**（test.py）**的python脚本文件并打开命令提示符时，导航到当前目录`C:\10gen`，当我尝试使用`python test.py`它运行它时显示错误

```
python: can't open file 'test.py': [Errno 2] No such file or directory 
```

但是，如果我执行相同的带有`.txt`扩展名的命令，`python test.py.txt` 它就可以正常工作。我的问题是我将如何`filename.py`从命令行执行。

PS：，我的脚本文件包含一个简单的函数，它遍历一个列表并打印它。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T14:13:18.127

发生这种情况是因为您使用记事本并尝试在保存菜单中将文件另存为 (.txt) 文本文件选项。

在“file.py”周围使用双引号或`All Files`从“另存为”对话框中的下拉列表（另存为类型）中选择。

![在此处输入图像描述](../Images/ef4464f23d9b59ab9bb0663e4a92aed9.png)

**我推荐使用 EMac 进行 Python 开发。您也可以从 IDLE 开始 :-)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T14:12:36.880

您是否使用记事本编写 Python 脚本？如果是这样，默认情况下它会将 .txt 添加到已保存文件的末尾。在记事本中保存代码时，请务必在保存对话框中单击“保存类型为所有文件”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T14:12:37.397

Windows 添加了一个 .txt 文件扩展名，现在它对您隐藏。更改您的文件夹首选项，让您看到文件扩展名，它会在那里。尝试使用更适合程序员的文本编辑器，例如[Notepad++](http://notepad-plus-plus.org/)，以避免问题再次发生。

# wordpress - 如何使自定义元框字段可复制？

> ID：14537690
> 
> 赞同：4
> 
> 时间：2013-01-26T14:10:57.923
> 
> 标签：wordpress, plugins, repeat, meta-boxes

我现在正在为 WordPress 管理员编写一个插件。这是关于自定义元框。我想创建一个幻灯片插件，只是为了学习很多编码。

我创建了一个元框，其中包含一个图像上传和一个文本输入字段。*（见下图）*

![这是带有字段的元框](../Images/a226cdd1effd416c06e39d13a4a8ddb4.png)

依此类推，我可以保存字段，以便上传图像并在文本字段中为其设置标题。当我在 WordPress 中保存帖子/页面时，它会将值保存在我的数据库中。没关系！

现在我想扩展代码，通过用户添加和删除字段的可能性，例如可重复字段。
正如您在上图中看到的，我创建了添加新幻灯片按钮，我还编写了一些 javascript 代码以使其工作，但这不能正常工作。

所以我的问题是，动态创建字段的最佳方式是什么？
我现在在 javascript 中使用 clone 函数来克隆字段，但只有默认行可以工作。

我已经使用它几个星期了，到目前为止找不到解决方案。

一些代码：
这是[我](http://snippi.com/s/ri36qw3)用 PHP 创建的元框的代码
这是我现在使用的[jQuery / Javascript](http://snippi.com/s/adtzeoi)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-26T17:53:09.967

我已经在 WordPress StackExchange 中[回答了很多关于这个主题的问题。](https://wordpress.stackexchange.com/search?q=user%3A12615+repeatable)
它被称为可*重复字段*。

但基本上这些是所需的资源：

*   [根据需要创建更多元框](https://wordpress.stackexchange.com/a/19852/12615)- WPSE Q&A

*   [Metabox 中可重复的自定义字段](https://gist.github.com/1593065)- 要点

    > ```
    > /**
    >  * Repeatable Custom Fields in a Metabox
    >  * Author: Helen Hou-Sandi
    >  *
    >  * From a bespoke system, so currently not modular - will fix soon
    >  * Note that this particular metadata is saved as one multidimensional array (serialized)
    >  */ 
    > ```

*   [Metabox 中的可重复自定义字段](https://gist.github.com/2057532)- 另一个 Gist 示例，未给出描述

# android - Sqlite - 如何按带有空格的列排序？

> ID：14537691
> 
> 赞同：0
> 
> 时间：2013-01-26T14:10:59.607
> 
> 标签：android, sqlite, spaces, sql-order-by

我的 android 应用程序中有一个包含名字和姓氏（用空格分隔）的列表。我需要按此列排序以在列表视图中显示它。我正在使用 rawquery 来执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:35:26.603

您可以使用这种类型的查询：

```
SELECT * FROM Person ORDER BY LOWER(yourFieldName); 
```

你也可以这样做`ORDER BY yourFieldName COLLATE NOCASE`。

编辑：如果您需要指定`ASC`or `DESC`，请在之后添加`NOCASE`

# algorithm - 巧克力配送

> ID：14537692
> 
> 赞同：-3
> 
> 时间：2013-01-26T14:11:09.060
> 
> 标签：algorithm, dynamic-programming

## 描述：

有一天，蜻蜓收到了 n 块巧克力。在决定将巧克力分发给他的 m 个朋友后，他提出了以下规则：

*   首先，他将根据友谊的亲密程度从 1 到 m 对他的朋友进行排名

*   其次，如果等级 i 的朋友得到 x 个巧克力（so `F[i]=x`），那么第 i 位的朋友`x+1`应该得到不少于 x 个巧克力并且不超过`x+k`巧克力（so `x <= F[i+1] <= x +k`），其中`k`是一个正数。

*   位置一的朋友不应该得到超过k个巧克力（所以`F[1] <= k`）

*   有些朋友可能会得到零巧克力。

*   如果可能的话，蜻蜓应该没有巧克力。他牙痛，不应该吃糖果。

虽然不精通数学，但蜻蜓渴望知道所有巧克力的分发方式有多少。所以他在寻求你的帮助

## 输入：

输入文件由一系列输入行组成，每行定义一个案例。每种情况的输入是一行三个正整数：

```
N (1 <= n <= 500), m (1 <= m <= 100), k (1 <= k <= 100). 
```

输入文件将由`0 0 0`.

## 输出：

对于每种情况，输出所有巧克力可以在一行上分布的方式数。

样本输入：

```
1 1 1
4 2 2
5 3 2
0 0 0 
```

输出：

```
1 
2
3 
```

原文页面：[http ://acm.whu.edu.cn/learn/problem/detail?problem_id=1031](http://acm.whu.edu.cn/learn/problem/detail?problem_id=1031)

我尝试了递归方法，但超出了时间限制。然后我尝试用队列代替递归，但超出了内存限制。这是关于动态规划的问题吗？谁能给我一个提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T02:09:05.507

您是否尝试在递归方法中添加一些修剪？IE。如果由于限制无法将剩余的糖果分发给其他朋友，您可以停止。

你也可以使用DP方法。令 f[i][j][k] 表示为前 i 个朋友分发的可能方式数，第 i 个朋友有 j 个糖果，还有 k 个剩余糖果。

```
boundary: f[0][0][n]=1;
u can use forward recurrence:
f[i+1][j+l][k-(j+l)]+=f[i][j][k]; 0<=l<=K (K here is what in your input)
the final answer is sum(0<=i<=n)(f[m][i][0]) 
```

# c++-cli - C++/CLI Serial COM DataReceived 作为触发开关处理给出错误

> ID：14537697
> 
> 赞同：0
> 
> 时间：2013-01-26T14:11:58.420
> 
> 标签：c++-cli

> **可能重复：**
> [跨线程操作无效：从线程访问的控件不是在它创建时创建的](https://stackoverflow.com/questions/142003/cross-thread-operation-not-valid-control-accessed-from-a-thread-other-than-the)
> [线程 跨线程操作无效](https://stackoverflow.com/questions/5037470/cross-thread-operation-not-valid)

**fmain.h**代码（部分）

```
 #define LEFT 37
    #define UP 38
    #define RIGHT 39
    #define DOWN 40
     ...
            // 
            // tabControl1
            // 
            this->tabControl1->Controls->Add(this->tabPage1);
            this->tabControl1->Controls->Add(this->tabPage2);
            this->tabControl1->Controls->Add(this->tabPage3);
            this->tabControl1->Location = System::Drawing::Point(2, -1);
            this->tabControl1->Name = L"tabControl1";
            this->tabControl1->SelectedIndex = 0;
            this->tabControl1->Size = System::Drawing::Size(298, 255);
            this->tabControl1->SizeMode = System::Windows::Forms::TabSizeMode::Fixed;
            this->tabControl1->TabIndex = 2;
            this->tabControl1->KeyDown += gcnew System::Windows::Forms::KeyEventHandler(this, &fMain::tabControl1_KeyDown);

        ...
    //keyboard handle in TabControl (not worked in Form)
    private: System::Void tabControl1_KeyDown(System::Object^  sender, System::Windows::Forms::KeyEventArgs^  e) {
                    if ((btnShuffle->Enabled) | (PictureLoaded == false))
                        return;

                    switch(e->KeyCode)
                    {
                    case LEFT:
                        if (blankTile.Col > 0)
                            MoveTile(blankTile.Col - 1, blankTile.Row);
                        break;
                    case UP:
                        if (blankTile.Row > 0)
                            MoveTile(blankTile.Col, blankTile.Row - 1);
                        break;
                    case RIGHT:
                        if (blankTile.Col < nCols - 1)
                            MoveTile(blankTile.Col + 1, blankTile.Row);
                        break;
                    case DOWN:
                        if (blankTile.Row < nRows - 1)
                            MoveTile(blankTile.Col, blankTile.Row + 1);
                        break;
                    }

                    e->Handled = true;

                    CheckFinish();
                 }

        ...

    //Serial communication data received
    private: System::Void serialPort1_DataReceived(System::Object^  sender, System::IO::Ports::SerialDataReceivedEventArgs^  e) {
                     RxData = serialPort1->ReadExisting();

                     switch(System::Convert::ToInt32(RxData))
                     {
                     case LEFT:
                         if (blankTile.Col > 0)
                             MoveTile(blankTile.Col - 1, blankTile.Row);
                         break;
                     case UP:
                         if (blankTile.Row > 0)
                             MoveTile(blankTile.Col, blankTile.Row - 1);
                         break;
                     case RIGHT:
                         if (blankTile.Col < nCols - 1)
                             MoveTile(blankTile.Col + 1, blankTile.Row);
                         break;
                     case DOWN:
                         if (blankTile.Row < nRows - 1)
                             MoveTile(blankTile.Col, blankTile.Row + 1);
                         break;
                     }
                 }

    ... 
```

给我错误：跨线程操作无效：控制'fTile'从创建它的线程以外的线程访问。

我希望有人可以帮助我.. ps：我还是 c++/cli 编程的新手

# html - 使用css设置背景封面的透明度

> ID：14537698
> 
> 赞同：3
> 
> 时间：2013-01-26T14:12:02.883
> 
> 标签：html, css

下面是设置背景封面的代码，我想设置背景封面的透明度，这样我就可以在上面显示一些文字。我得到了如下解决方案，但它对我不起作用。我没有得到我想念它的地方。

```
 style="background: url(images/football_ground.jpg) no-repeat center center fixed;-webkit-         
     background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover;-moz-opacity:.30; 
filter:alpha(opacity=30); 
-khtml-opacity: 0.3;  "> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T14:44:59.187

目前，CSS 不允许更改背景图像的 alpha 值。如果您希望解决此问题，有几个不同的选项：

1.  只需将背景图像保存为适当不透明度的透明 png。
2.  使背景图像成为相对定位的父容器中自己的绝对定位元素。

.

```
<div class="parent">
    <div class="background"></div>
    <div class="foreground">some text</div>
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T14:40:21.147

CSS opacity 属性设置*整个*元素的不透明度，而不仅仅是背景。因此，您的代码实际上将背景和文本内容的不透明度**设置**为*0.30*。

您可能需要使用 2 个元素来实现您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T15:25:32.710

不透明度影响元素及其后代。

您不需要将其拆分为两个元素，只需使用 RGB 来实现透明度。第四个参数 alpha 设置元素的透明度：

`background-color: rgba(0, 0, 0, 0.75);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-02T13:46:09.753

现在达到这一点，我们的要求是图像需要更暗的封面，以便放置在图像顶部的白色文本可以更明显 - 在背景图像更白的情况下。

我总是使用元素来实现这一点，但另一种解决方案可能是将其添加到父元素的 css（或任何你需要的地方）：

```
background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url("./your_image_url"); 
```

甚至可能有更短的方法，但我在某些地方一直在使用上述方法。

# python - Python：如何获取 lambda 列表中的参数名称？

> ID：14537700
> 
> 赞同：-5
> 
> 时间：2013-01-26T14:12:21.477
> 
> 标签：python, lambda

```
lambda xxxx: a/b 
```

我在有 x 的地方放什么，如何在 lambda 中使用`*args`和？`**kwargs`是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T14:15:19.300

这是不可能的。最好的解决方案是使用具有`*args`和可能的功能`**kwargs`：

```
argsneeded = ['foo', 'bar']
def whatever(**kwargs):
    if not all(x in kwargs for x in argsneeded):
        raise ValueError('required kwarg is missing') 
```

# codeigniter - 来自数组的codeigniter动态set_rules？

> ID：14537716
> 
> 赞同：0
> 
> 时间：2013-01-26T14:14:06.550
> 
> 标签：codeigniter

```
$bLangs = array('EN' => 'English', 'RU' => 'Russian');

foreach ($bLangs as $k => $v)
{
    $this->form_validation->set_rules($k."['page_name']", lang('field_name'), 'trim|required');
} 
```

为什么这总是为空 EN[page_name] 返回错误？当我打印 $_POST 一切正常。

我来自视图源的 html 是这样的：

```
Name: <input type="text" name="EN[page_name]" value="ToDo" class="w750" /><br />
Name: <input type="text" name="RU[page_name]" value="ТоДо" class="w750" /><br /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:51:27.547

I've changed $k."['page_name']" to $k."[page_name]" and works.

# mysql - 连接表和循环

> ID：14537718
> 
> 赞同：0
> 
> 时间：2013-01-26T14:14:19.530
> 
> 标签：mysql, codeigniter

我已经加入了这样的帖子和标签表：

```
$this->db->select('*');
$this->db->from('posts');
$this->db->join('posts_tags', 'posts.post_id = posts_tags.post_id', 'left');
$this->db->join('tags', 'posts_tags.tag_id = tags.tag_id', 'left'); 
```

我如何循环浏览每个帖子，并显示它们各自标签的列表。例如：

```
post1: tag1, tag2
post2, tag1, tag3 
```

目前，我可以显示标签，但它为帖子 1 和 2 返回两行。现在的输出是：

```
post1: tag1
post1: tag2
post2: tag1
post2: tag3 
```

我如何为帖子返回一行，其中包含所有相关标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:39:09.053

使用组连接和分组结果

```
$this->db->select('posts.*');
$this->db->select('GROUP_CONCAT(posts_tags.tag_title) as TagTitles');
$this->db->from('posts');
$this->db->join('posts_tags', 'posts.post_id = posts_tags.post_id', 'left');
$this->db->join('tags', 'posts_tags.tag_id = tags.tag_id', 'left');
$this->db->group_by('posts.id');
$this->db->get(); 
```

# algorithm - 如何确定K旋转后排序数组的某个位置的值？

> ID：14537722
> 
> 赞同：1
> 
> 时间：2013-01-26T14:14:44.607
> 
> 标签：algorithm

假设我有一个大小为 4 的数组，并且有 5 个元素

```
1)  0,1,2,3
2)  4,0,1,2 after 1st rotation
3)  3,4,0,1 after 2nd rotation
4)  2,3,4,0 after 3rd rotation 
5)  1,2,3,4 after 4th rotation
6)  0,1,2,3 after 5th rotation 
```

正如我们所看到的，这个数字在 5 次迭代后会重复。有没有一种有效的方法来搜索数组的第 k 个元素？说N转之后？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:24:48.510

假设数组索引是从零开始的。

要计算 N 次旋转后 M 元素数组的第 K 个值的索引，您应该使用以下表达式

```
(K + N) mod M 
```

所以给定一个数组`arr`，你应该得到这样的值（使用类似 C 的语法）：

```
arr[(K + N) % M]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T14:21:54.270

最简单的做法是将组合放入某种数组中，然后直接索引数字。事先确保这些数字也有效可能是值得的。我相信这会做（假设第一行是0，第一列是0，如果你想通过加法改变起点，请调整）

```
elements=[0,1,2,3,4]
out=elements((K-N)%5 
```

快速测试：

```
N=1, K=3, out=2 correct
N=5, K=1, out=1 correct 
```

# python - 元组列表分为两个列表

> ID：14537724
> 
> 赞同：7
> 
> 时间：2013-01-26T14:14:55.457
> 
> 标签：python

我有一个元组列表如下：`[(12,1),(123,4),(33,4)]`我希望它变成`[12,123,33]`，`[1,4,4]`我只是想知道我会怎么做？

提前喝彩

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-26T14:17:44.553

您可以使用[zip()](http://docs.python.org/2/library/functions.html#zip)：

```
zipped = [(12, 1), (123, 4), (33, 4)]
>>> b, c = zip(*zipped)
>>> b 
(12, 123, 33)
>>> c
(1, 4, 4) 
```

或者您可以使用[列表推导](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)实现类似的目标：

```
>>> b, c = [e[0] for e in zipped], [e[1] for e in zipped]
>>> b
[12, 123, 33]
>>> c
[1, 4, 4] 
```

不同之处在于，一个给你一个元组列表 ( `zip`)，另一个给你一个列表元组（两个列表推导）。

在这种情况下`zip`，可能是更 Pythonic 的方式，也更快。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-26T14:18:11.737

这是一个完美的用例[`zip()`](http://docs.python.org/2/library/functions.html#zip)：

```
In [41]: l = [(12,1), (123,4), (33,4)]

In [42]: a, b = map(list, zip(*l))

In [43]: a
Out[43]: [12, 123, 33]

In [44]: b
Out[44]: [1, 4, 4] 
```

如果您不介意成为元组`a`而`b`不是列表，则可以删除`map(list, ...)`并保留`a, b = zip(*l)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T14:17:33.290

这将是我的尝试。

```
first_list = []
second_list = []

for tup in list_of_tuples:
    first_list.append(ls[0])
    second_list.append(ls[1]) 
```

# sql - 如何在 VB.Net 中删除空格

> ID：14537729
> 
> 赞同：0
> 
> 时间：2013-01-26T14:15:07.480
> 
> 标签：sql, vb.net

在以下代码中，SqlDataReader 'dr' 不会读取名称包含空格的主题的“SubjectCode”；例如来自主题表的英语语言、社会研究、成本会计原理等。

因此，如果有人能立即帮助我，我将不胜感激。

```
cmd = New SqlCommand( _
    "select subjectCode from ProgramDetails.subjects where subjectname='" & _
    Trim(subname) & " ' ", cn)
dr = cmd.ExecuteReader
If dr.Read Then
    subcode = dr(0)
End If
dr.Close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T14:24:21.233

1.  您对[SQL-Injection](http://en.wikipedia.org/wiki/SQL_injection)开放，使用`SQL-Parameters`
2.  你最后有一个空格，我认为这是不希望的
3.  您可能想改用`LIKE`通配符`%`：

例如：

```
Dim sql = "Select subjectCode From ProgramDetails.subjects where subjectname Like @subname"
Using con = New SqlConnection(connectionString)
    Using cmd = New SqlCommand(sql, con)
        cmd.Parameters.AddWithValue("@subname", String.Format("%{0}%", "english"))
        Con.Open()
        Using rd = cmd.ExecuteReader()
            While rd.Read()  
                Dim subjectCode = rd.GetString(0)
                ' ... '
            End While
        End Using
    End Using
End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T14:17:31.290

只需使用[RTRIM](http://msdn.microsoft.com/en-us/library/ms178660.aspx)

```
cmd = New SqlCommand("select RTRIM(subjectCode) from ProgramDetails.subjects " + _
                     "where subjectname Like '" & Trim(subname) & "%'", cn)
dr = cmd.ExecuteReader
If dr.Read Then
    subcode = dr(0)
End If
dr.Close() 
```

# iphone - 使用 quickdialog 时，dismissViewControllerAnimated 不起作用

> ID：14537730
> 
> 赞同：0
> 
> 时间：2013-01-26T14:15:16.893
> 
> 标签：iphone, ios, quickdialog

我正在使用 QuickDialog 推送登录表单。一切都在工作，除了视图控制器不能被解雇。像这样的代码：

```
- (void)onLogin:(QButtonElement *)buttonElement
{
    [self loading:YES];
    Info *info = [[Info alloc] init];
    [self.root fetchValueUsingBindingsIntoObject:info];
    [self.client loginWithUsername:info.login password:info.password onSuccess:^(NSDictionary *result) {
        NSLog(@"user signed in");
        [self loading:NO];
        [self dismissViewControllerAnimated:YES completion:nil];
    } onFailure:^(NSError *error) {
        NSLog(@"login error");
    }];
} 
```

我正在使用这些代码来推送这个视图控制器

```
QRootElement *root = [[QRootElement alloc] initWithJSONFile:@"loginform"];
LoginController *loginController = (LoginController *)[QuickDialogController controllerForRoot:root];
[self.navigationController pushViewController:loginController animated:YES]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:37:40.280

我很想告诉你这样做：

```
[self.presentingViewController dismissViewControllerAnimated:YES completion:nil]; 
```

这是苹果的文档：

> 呈现视图控制器负责关闭它呈现的视图控制器。但是，如果您在呈现的视图控制器本身上调用此方法，它会自动将消息转发到呈现的视图控制器。

我不确定为什么您的电话不是“转发”并关闭。也许您使用`presentModalViewController`? 如果是这种情况，请平衡一下`dismissModalViewControllerAnimated`，这可能会解决。

当然，我们都假设您的其余代码是正确的，并且您实际上`NSLog(@"user signed in");`在登录时看到了打印。

祝你好运！

**>> 更新 <<**

哇，对不起。我刚刚注意到您写了“QuickDialog to push a login form”，并看到您添加了一个如何呈现此屏幕的示例。由于您将其推送到导航控制器堆栈上，因此您需要将其弹出。这将解决问题：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

享受。

# php - TCPDF 绘图打印机注册标记

> ID：14537736
> 
> 赞同：3
> 
> 时间：2013-01-26T14:16:08.357
> 
> 标签：php, tcpdf

我有一个 PHP 脚本，可以从动态数据生成 pdf。我需要在我试图以这种方式实现的页面上放置打印机标记：

```
function drawPrinterMarks($obj, $pageWidth, $pageHeight){
    $registrationMarks=array(
        array($pageWidth/2, 5),
        array($pageWidth/2, $pageHeight-5),
        array(5, $pageHeight/2),
        array($pageWidth-5, $pageHeight/2)
    );

    $regLineStyle=array('width'=>0.07, 'color'=>array(100,100,100,100));
    $whiteLineStyle=array('width'=>0.07, 'color'=>array(0,0,0,0));

    foreach($registrationMarks as $rM){
        $obj->Ellipse($rM[0], $rM[1], 2, 0, 0, 0, 360, '', '', array(0,0,0,0));
        $obj->Ellipse($rM[0], $rM[1], 1, 0, 0, 0, 360, 'F', '', array(100,100,100,100));
        $obj->Line($rM[0]-2.5, $rM[1], $rM[0]+2.5, $rM[1], $regLineStyle);
        $obj->Line($rM[0], $rM[1]-2.5, $rM[0], $rM[1]+2.5, $regLineStyle);
        $obj->Line($rM[0]-1, $rM[1], $rM[0]+1,$rM[1], $whiteLineStyle);
        $obj->Line($rM[0], $rM[1]-1, $rM[0], $rM[1]+1, $whiteLineStyle);
    }
} 
```

它以我想要的方式绘制第一个标记（在顶部的中间）。（看起来像 Acrobat 使用的标准注册标记）但它不会在其他地方绘制外圈。 [看例子](http://kisdaro.pulinet.hu/ex/example.pdf)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:49:28.290

在这里，您告诉 TCPDF 用当前线型绘制一个椭圆：

```
$obj->Ellipse($rM[0], $rM[1], 2, 0, 0, 0, 360, '', '', array(0,0,0,0)); 
```

但是为每个注册标记绘制的最后一条线是白色的。因此，对于后续标记，椭圆是用白线和白色填充绘制的。

如果您在第一个椭圆上明确设置 linestyle 参数，它将为您的所有标记绘制外圆。

```
$obj->Ellipse($rM[0], $rM[1], 2, 0, 0, 0, 360, '', $regLineStyle, array(0,0,0,0)); 
```

# c# - SQLite 将字符存储为字符串？

> ID：14537740
> 
> 赞同：3
> 
> 时间：2013-01-26T14:16:32.243
> 
> 标签：c#, sqlite

我正在使用 System.Data.SQLite ADO.Net Provider 与 SQLite DB 进行交互。我使用以下语法创建了一个新表：

```
CREATE TABLE [tb_Replace] ([Character] CHAR(1), [Substitute] CHAR(1)) 
```

然后我尝试使用简单的选择来读取数据：

```
public static List<char> GetReplaceableCharacters(string connectionString)
{
    List<char> replaceableCharacters = new List<char>();
    SQLiteConnection sqlConnection = new SQLiteConnection(connectionString);
    sqlConnection.Open();
    using (SQLiteTransaction transaction = sqlConnection.BeginTransaction())
    {
        SQLiteCommand command = new SQLiteCommand(@"SELECT Character FROM tb_Replace", sqlConnection);
        SQLiteDataReader reader = command.ExecuteReader();
        while (reader.Read())
            replaceableCharacters.Add((char)reader["Character"]);
    }
    sqlConnection.Close();
    return replaceableCharacters;
} 
```

但是，当我这样做时，它抛出了一个 InvalidCastException。但是，如果我将返回类型更改为 a`List<string>`并`reader["Character"]`转换为字符串，它就可以工作。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T14:28:07.990

只需阅读[http://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html)。

Sqlite 有五种类型关联（表的列*首选的类型）和五种存储类（可能的实际值类型）。*两者都没有`CHARACTER`类型。

Sqlite 允许您指定几乎*任何内容*作为列创建的类型。但它并不强制除`INTEGER PRIMARY KEY`列之外的所有内容的类型。它识别一些声明类型名称的*子字符串*来确定列类型亲和性，因此，`CHARACTER`所有这些都只是一种有趣的写作方式。`CHARCOAL``CONTEXTUALIZABLE``TEXT`

# ios - 由于文档文件夹中的 sqllite db 而被苹果拒绝

> ID：14537744
> 
> 赞同：3
> 
> 时间：2013-01-26T14:17:10.350
> 
> 标签：ios, sqlite, file-io, fmdb, nsdocumentdirectory

我有使用 FMDB 包装器的 sqlite db，它在启动时将 db 放入文档文件夹中。用户还可以通过 iTunes 上传文件文件夹中的文件。

但应用商店拒绝了该应用，如下所示：

启用文件共享后，整个 Documents 文件夹将用于文件共享。不打算通过文件共享功能供用户访问的文件应存储在应用程序包的另一部分中。如果您的应用程序不需要文件共享功能，则不应将 Info.plist 中的 UIFileSharingEnabled 键设置为 true。

是否有任何解决方法可以将 db 放在某个地方或限制在文档文件夹中，以便它得到苹果的批准。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T14:22:16.657

您必须将文件的路径从文档目录更改为缓存目录：

在您的代码“NSDocumentDirectory”中搜索并替换为“NSCachesDirectory”并让一切都相同，然后您的数据库将在启动时自动移动到缓存目录，Apple 也不会拒绝它。:)

希望能帮助到你。

**编辑：** 要设置您自己的数据库路径，请在代码中传递“cacheDirectoryPath”字符串而不是路径，下面的代码将为您创建此 cacheDirectoryPath：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *cacheDirectoryPath = [paths objectAtIndex:0]; 
```

# c++ - 我使用哪种增强图算法？

> ID：14537758
> 
> 赞同：6
> 
> 时间：2013-01-26T14:18:26.220
> 
> 标签：c++, algorithm, graph, boost-graph

我有一组节点 AG、Z，定义了加权边缘，其中 AG 是漏斗中的各个节点，Z 在最底部。

可视化一个具有各种边缘的漏斗（V 形），但最终指向 Z，即最终节点，就像水流向单个点 Z。我们想要找到到达 Z 的最便宜的路径，它覆盖了漏斗中的所有节点。

以下是约束：

*   没有孤立节点（所有节点都已连接/包含）
*   我们希望最小化加权边的总和
*   “共享边”，就像水向下流动时合并，只计算共享边的重量**一次**（换句话说，它可以自由地沿着潮湿的路径流动）

**我应该使用哪种提升图算法来找到这个问题的最佳边集？**

*   ABDEZ 是覆盖很多节点的廉价路径
*   CGZ 有点强迫，因为 G 只有一条通往 Z 的路径
*   FZ 看起来很便宜，但后来我们注意到由于 CGZ 是强制的，所以 FGZ 实际上比 FZ 便宜（因为我们不需要重复计算 GZ 段，所以 FG 的增量成本只有 1）

**所以，边的集合应该是 (AB, BD, DE, EZ, CG, FG, GZ)**

我确信这不是一个新问题：我只是不知道足够的图论来识别/命名算法。

![有向无环图](../Images/1751033151f5686821b9ffd7b1132954.png)

**更新**

在进一步研究该问题时，我发现如果该图**不是有向**的，则该问题会简化为**最小生成树**。换句话说，如果我们没有先验地指定 Z 是图中的最低点（通过使用箭头），并且允许水在两个方向上流动（通常是正确的，除非我们有阀门），那么第二个模型可以正常工作。

![无向无环图](../Images/2f04742ad2ce021cf288061a53d56ab0.png)

当然，我们现在可以选择**新的 FZ 无向边来获得更小的权重，而不是被迫使用****旧的 GZ**有向边。

 **鉴于这些结果，如果我们确实需要对边缘进行**定向**，[liori 的答案](https://stackoverflow.com/a/14539294/975129)是对原始问题的最佳响应（即需要对算法进行编码）。

**输出**

```
D <--> E with weight of 1
F <--> G with weight of 1
A <--> B with weight of 2
E <--> Z with weight of 2
C <--> G with weight of 2
F <--> Z with weight of 2
B <--> D with weight of 3
Total Weight = 13 
```

**使用最小生成树的无向无环图代码**

```
#include <boost/graph/adjacency_list.hpp>
#include <boost/graph/kruskal_min_spanning_tree.hpp>
#include <iostream>

int
main()
{
  using namespace boost;

  typedef adjacency_list < vecS, vecS, undirectedS,
    no_property, property < edge_weight_t, int > > Graph;
  typedef graph_traits < Graph >::edge_descriptor Edge;
  typedef graph_traits < Graph >::vertex_descriptor Vertex;
  typedef std::pair<int, int> E;

  char letter[] = "ABCDEFGZ";
  const int num_nodes = 8;
  E edge_array[] = { 
        E(0,1), E(1,2), E(1,3), E(3,6), E(3,5), E(3,4), E(2,5), E(2,6), 
        E(5,7), E(5,6), E(6,7), E(4,7) 
  };
  int weights[] = { 2, 6, 3, 5, 3, 1, 4, 2, 2, 1, 3, 2 };
  std::size_t num_edges = sizeof(edge_array) / sizeof(E);
  Graph g(edge_array, edge_array + num_edges, weights, num_nodes);
  property_map < Graph, edge_weight_t >::type weight = get(edge_weight, g);
  std::vector < Edge > spanning_tree;

  kruskal_minimum_spanning_tree(g, std::back_inserter(spanning_tree));

  int total_weight = 0;
  for (std::vector < Edge >::iterator ei = spanning_tree.begin();
       ei != spanning_tree.end(); ++ei) 
  {
    std::cout << letter[source(*ei, g)] << " <--> " << letter[target(*ei, g)]
      << " with weight of " << weight[*ei]
      << std::endl;
    total_weight += weight[*ei];
  }
  std::cout << "Total Weight = " << total_weight << std::endl;

  return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T17:03:57.197

因此，您需要最便宜的方式从`Z`反向进入每个节点。您的问题相当于在 DAG 上查找生成树，只是您需要转换 DAG 以使边缘指向相反的方向。正如[这个答案](https://cs.stackexchange.com/a/906)中所解释的，您应该检查诸如[Chu–Liu/Edmonds' algorithm 之](http://en.wikipedia.org/wiki/Edmonds%27_algorithm)类的算法。

不过，Boost Graph 中似乎没有现成的算法。您可能需要构建自己的算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T16:11:21.230

这是一个可以通过[统一成本搜索](http://en.wikipedia.org/wiki/Uniform_cost_search)解决的问题。该算法可以应用于任何包含至少一个解的有[向图。](http://en.wikipedia.org/wiki/Directed_graph)

这将找到总边缘成本最低的路径。

如果您正在寻找覆盖最少节点的路径，则需要[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)**

# eclipse - 如何使用 Subclipse 在 Eclipse 中从分支合并到主干？

> ID：14537769
> 
> 赞同：4
> 
> 时间：2013-01-26T14:19:21.890
> 
> 标签：eclipse, svn, merge, subclipse

我在 Eclipse IDE 中使用 Subclipse 插件来提交和更新我的代码。我需要将代码从分支合并到主干。作为其中的一部分，我面临着这个问题。这是我将分支合并到主干的解决方法步骤。

*   右键单击项目 -> 团队 -> 合并。
*   选择合并两个不同的树。
*   我已将 From URL 设置为我的分支。例如：[http ://abc.com:40/branches/appi1.1/src/demo.properties](http://abc.com:40/branches/appi1.1/src/demo.properties)
*   我还设置了我的主干的 URL 例如：[http ://abc.com:40/trunk/appi/src](http://abc.com:40/trunk/appi/src)
*   在 from 和 to URL 部分中，我选择了 head revision 单选按钮。
*   在控制台中，我收到消息：合并异常完成

很明显，这是我来自 eclipse IDE 的错误警报。 ![在此处输入图像描述](../Images/e03e1f3cf978f9266942fff091c492a2.png)

PS：在我的主干代码中，没有demo.properties，但在分支代码中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T15:53:10.653

如果您尚未从 Subclipse 更新站点安装 CollabNet Merge Client，您应该这样做。自 Subversion 1.5 以来，Subclipse 合并选项并没有真正更新为合并跟踪支持。

您的合并参数绝对不正确。“To URL”不是合并的目标，您的工作副本是。From 和 To URL 是两个 URL/修订范围，用于区分以生成要应用于工作副本的合并。在大多数情况下，两个 URL 应该相同，并且修订号应该更改以反映您要合并的修订范围。

CollabNet Merge Client 引入的新 UI 解决了这些问题，并使执行正确的合并变得更加容易。

使用 Subversion 时，应避免合并特定文件。理想情况下，您应该合并整个树，在您的示例中是 /branches/appi1.1。

# python - 使用泰勒级数的平方根

> ID：14537771
> 
> 赞同：3
> 
> 时间：2013-01-26T14:19:46.150
> 
> 标签：python, math, square-root

我想使用泰勒级数计算平方根。我只是在学习这个系列，我写了一些代码，但我不知道为什么它不起作用，也许我不应该喂它`i`？请谁能向我解释我做错了什么？

我有来自[http://en.wikipedia.org/wiki/Taylor_series#List_of_Maclaurin_series_of_some_common_functions的公式](http://en.wikipedia.org/wiki/Taylor_series#List_of_Maclaurin_series_of_some_common_functions)

```
from math import sqrt

def factorial(n):
    result = 1
    for i in range(2, n+1):
        result *= i
    return result

def binomical(alpha, n):
    result = 1
    for i in range(0, n):
        result *= (alpha - i)
    return result / factorial(n)

for i in range(1, 10):
    x = sum(binomical(0.5, k) * i ** k for k in range(10))
    print x, sqrt(i) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T14:48:30.930

有两个问题，一个小问题，一个大问题。次要的是，扩展是写的`(1+x)^alpha`，不是`x^alpha`，所以你`i**k`真的应该是`(i-1)**k`。这样做会使您的输出为

```
1.41920471191 1.0
5.234375 1.41421356237 
```

在那里你可以看到你的答案`sqrt(1)`是多么可疑`sqrt(2)`地接近

```
1.0 1.0
1.41920471191 1.41421356237 
```

这要好得多。不幸的是，剩下的条款仍然不是很好：

```
5.234375 1.73205080757
155.677841187 2.0
2205.0 2.2360679775
17202.2201691 2.44948974278
91687.28125 2.64575131106
376029.066696 2.82842712475
1273853.0 3.0 
```

并且将总和的项数从 10 增加到 100 会使事情变得更糟：

```
1.0 1.0
1.4143562059 1.41421356237
1.2085299569e+26 1.73205080757
3.68973817323e+43 2.0
9.21065601505e+55 2.2360679775
3.76991761647e+65 2.44948974278
2.67712017747e+73 2.64575131106
1.16004174256e+80 2.82842712475
6.49543428975e+85 3.0 
```

但这是意料之中的，因为正如您链接的页面所解释的那样，只有当 x 的绝对值小于 1 时才能保证收敛。所以我们可以很好地获得小数的根：

```
>>> i = 0.7
>>> sum(binomical(0.5, k) * (i-1) ** k for k in range(10))
0.8366601005565644
>>> i**0.5
0.8366600265340756 
```

我们可以尝试缩小规模以处理其他数字：

```
>>> i0 = 123.0
>>> i = i0/(20**2)
>>> sum(binomical(0.5, k) * (i-1) ** k for k in range(50))
0.5545268253462641
>>> _*20
11.090536506925282
>>> i0**0.5
11.090536506409418 
```

或者在不同的点上取泰勒级数，等等。

一般的结论是泰勒级数有一个[收敛半径](http://en.wikipedia.org/wiki/Radius_of_convergence)——可能为零！- 他们在其中给出正确的结果。维基百科泰勒系列页面有一个关于“近似和收敛”的部分，其中涵盖了这一点。

（PS“二项式”中没有“c”。:^）

# vb.net - 如何在 DevExpress 中制作 TreeView？

> ID：14537776
> 
> 赞同：0
> 
> 时间：2013-01-26T14:20:03.337
> 
> 标签：vb.net

我在树视图中显示我的数据时遇到问题。我想使用数据集为树视图创建一个自动子节点。我想要两列第一列是付款的名称，然后另一列是付款。

我怎样才能做到这一点？请帮我。先感谢您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:28:07.260

树视图更适用于具有子节点和父节点的层次结构。听起来您需要更多的表格，使用 DataGridView 可以更轻松地完成。

# vb.net - 使用 DataTable.Select() 时忽略所有空格

> ID：14537777
> 
> 赞同：0
> 
> 时间：2013-01-26T14:20:07.560
> 
> 标签：vb.net, visual-studio-2010, select, datatable, whitespace

我需要根据电话号码从数据表中进行选择。问题是电话号码中可能有空格，但这些不一定一致。

例如，数据表中的电话号码可以是以下任何一种 -

01234 123 123
01234 123123
01234123123
0123 412 3123
0123 4123 123

这实际上是相同的数字。

我可以标准化搜索字符串并从中删除空格，但是如何使搜索“01234123123”匹配实际包含“0123 412 3123”或任何其他变体的列？

`DataTable.Select("phoneNumber LIKE '" + searchString + "%'")`

仅当数字完全匹配时才会返回该行。

我曾想过循环并生成 searchString 的许多变体，在所有可能的地方都有空格，然后搜索所有这些变体，但这似乎非常耗费资源......

有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T14:40:05.210

您可以使用 Linq 并删除所有空格，例如：

```
Dim phoneNumber = "01234 123   123"
Dim trimmedNumber = phoneNumber.Replace(" ", "")
Dim filtered = From row In DataTable
               Let trimmed = row.Field(Of String)("phoneNumber").Replace(" ", "")
               Where trimmed = trimmedNumber 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T14:50:15.817

显然，正如 Tim 所展示的，有一种方法可以获取您想要的信息，但是您应该考虑修复数据，这样您就不需要解决方法。您应该通过删除所有空格或确保它们在同一个地方有空格来修复数据，使其符合相同的模式。修复数据库上的数据很容易，只需使用更新语句替换所有空格，然后如果您愿意，可以使用字符串操作使所有数字匹配。困难的部分是，如果可以的话，您需要返回任何代码，并确保插入或更新电话号码的代码不会使其进入错误状态。我和这里的任何人一样对使用创可贴解决方案感到内疚，但通常情况下，你正在为自己制造未来的头痛。

高温高压

韦德

# java - 带有 ASyncTask 的计时器中的 IllegalStateException

> ID：14537781
> 
> 赞同：0
> 
> 时间：2013-01-26T14:20:44.427
> 
> 标签：java, android

我想每隔几分钟运行一次后台 AsycTask。我创建了一个计时器并执行后台任务的 .execute 命令。我还创建了一个`isChecking`在 BackgroundNotify 运行时为 true 的 bool。问题是我仍然收到以下错误：

```
01-26 15:09:32.871: E/AndroidRuntime(22332): FATAL EXCEPTION: Timer-0
01-26 15:09:32.871: E/AndroidRuntime(22332): java.lang.IllegalStateException: Cannot execute task: the task has already been executed (a task can be executed only once)
01-26 15:09:32.871: E/AndroidRuntime(22332):    at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:578)
01-26 15:09:32.871: E/AndroidRuntime(22332):    at android.os.AsyncTask.execute(AsyncTask.java:534)
01-26 15:09:32.871: E/AndroidRuntime(22332):    at de.tecfriends.vbtsplash2013.MainActivity$2.run(MainActivity.java:61)
01-26 15:09:32.871: E/AndroidRuntime(22332):    at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T14:23:20.030

AsyncTask 只能执行一次。如果您需要再次执行任务，请创建一个新实例，然后调用`execute()`它：

```
if (task.getStatus() == AsyncTask.Status.FINISHED) {
    task = new AsyncTask();
}

if (task.getStatus() != AsyncTask.Status.RUNNING) {
    task.execute();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T14:25:40.887

如日志：

> llegalStateException: 无法执行任务：任务已经执行（一个任务只能执行一次）

表示您正在尝试启动已在运行的 AsycTask。[在使用AsyncTask.Status](http://developer.android.com/reference/android/os/AsyncTask.Status.html)启动它之前，您需要检查 AsycTask 是否正在运行：

```
if(your_AsyncTask.getStatus() == AsyncTask.Status.RUNNING){
    // My AsyncTask is running  
}
if(your_AsyncTask.getStatus() == AsyncTask.Status.FINISHED){
    // My AsyncTask is FINISHED . start here again 
} 
```

# php - php动态页面

> ID：14537786
> 
> 赞同：1
> 
> 时间：2013-01-26T14:21:43.130
> 
> 标签：php, url, dynamic

我不确定这里的标题是否合适，我的解释可能同样糟糕，但它就在这里......我正在使用以下代码生成网页：
来源：[PHP 中的动态包含](http://inobscuro.com/tutorials/read/16/)

```
<?php

$id = $_GET['id']; 

$display = $_GET['display'];
    $displays = array('page1', 'page2', 'page3', 'page4', 'page5&amp;id=$id');

if (!empty($display)) {
        if(in_array($display,$displays)) {
            $display .= '.php';
            include($display);
        }
        else {
        echo 'Page not found. Return to
        <a href="index.php">Index</a>';
        }
    }
    else { //show html

?> 
```

一个典型的页面：

**www.website.com/dir/index.php?display=page4**

我的问题是：我想将一个页面添加到具有动态值的允许页面数组中。你可以在上面我添加的代码中看到我的尝试：'page5&id=$id'

但是，当我转到此页面时：

**www.website.com/dir/index.php?display=page5&id=2**

我收到错误消息“找不到页面。返回索引”。（数据库中确实存在值为 2 的表行 id。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:31:32.997

您应该更好地分别处理 display 和 ID 值。例如像这样：

```
<?php

$display = $_GET['display'];
$displays = array('page1', 'page2', 'page3', 'page4', 'page5');

if (!empty($display)) {
        if(in_array($display,$displays)) {
            $display .= '.php';
            include($display);
        }
        else {
        echo 'Page not found. Return to
        <a href="index.php">Index</a>';
        }
    }
    else { //show html

?> 
```

在 display5.php 中：

```
 <?php

 // some other initializations

 $id = $_GET['id'];
 if($id == 2) { // make some special actions for id = 2

 // show more html
 ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T14:24:26.303

就像您将收到一个价值 in 一样`$_GET['display']`，您将收到*另一个*`$_GET['id']`价值为 的in `2`！

PHP 将它们与查询字符串分开。当你使用 时`in_array()`，你会检查是否`page5`是 in `$displays`，从你的代码中可以看出，它不是。

我建议您使用`var_dump($_GET);`然后查看生成的 HTML 的源代码，以了解如何处理 GET 参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T14:24:46.760

这就是为什么 in`$_GET["display"]`只代表“page5”和`$_GET["id"]`2。您可以在 page5.php 中检查 ID。

例如在第 5 页中：

```
<? if (empty($_GET["id"]) || !is_numeric($_GET["id"])) { die("ID isn't a number!"); } ?> 
```

# soap - 使用 SoapUI 测试 Dynamics CRM 在线服务

> ID：14537787
> 
> 赞同：3
> 
> 时间：2013-01-26T14:21:44.553
> 
> 标签：soap, dynamics-crm-2011, soapui

嗨，感谢您阅读我的问题并可能为我提供一些帮助！

我正在做一个学校项目，我应该基于对公司动态 CRM 服务器的 PHP/SOAP 调用编写一个 Web 应用程序。我遇到的问题数量之多令人震惊，似乎几乎不可能在互联网上找到一个像样的教程式页面。（相信我，我试过了）

您应该了解的更多背景知识：我不知道如何使用 SOAP、Web 应用程序的端点，甚至 PHP 也不是我太熟悉的东西。请记住...

最近的问题之一是 SoapUI 程序（4.5.1，免费版和专业版）导致渲染问题 - 可能是硬件加速图形的问题，因为我在 Visual Studio 2012 中遇到了非常相似的问题，禁用此选项完美修复了它. 在 SoapUI 中似乎没有执行此操作的选项（在我的催化剂控制中心也没有在屏幕分辨率 > 高级 > 故障排除“设置”中 - 这是灰色的）

无论如何，这不是重点。在我找到其他计算机可以工作之前，我可以再处理几天让我发疯的情况。

我通过为 CRM 在线程序创建一个试用帐户来“模拟”这个 CRM 服务器。现在我正在尝试使用 SoapUI（SoapUI 4.5.1 和 SoapUI Pro 4.5.1，14 天试用版）向 Web 服务发送一些通用请求。在步骤中，这是我到目前为止在程序中所做的：

**1-创建一个新项目**
**a)**将其命名为“MSCRMOnlineTest”
**b)**作为“初始 WSDL”，我添加了一个保存在本地机器上的 WSDL 文件。此文件是从我的 CRM 在线试用帐户下的自定义 > 开发人员资源 > 组织服务下下载的。为了澄清，它是通过访问此链接获得的文件：https://{OrganizationName}.api.crm4.dynamics.com/XRMServices/2011/Organization.svc?wsdl=wsdl0
**c)**单击的唯一选项是第一个一（'为所有操作创建示例请求？'）

我现在有一个包含 8 个操作的列表，每个操作自动生成一个称为“请求 1”的请求

**2-添加端点**
**a）**我从 Retrieve 打开了请求 1（似乎是一个很好的起点 - 检索一些数据）
**b）**在顶部看到“无端点设置”消息，所以我决定添加一个。我添加了这个：
https://{OrganizationName}.api.crm4.dynamics.com/XRMServices/2011/Organization.svc?wsdl=wsdl0
我知道它与我从中获取 WSDL 文件的链接奇怪地相同，但似乎唯一明智的选择？

**3-输入登录凭据并开始测试**
**a)**在左下角的“请求属性”框中输入登录凭据。这是我用来在浏览器中登录 CRMOnline 环境的确切信息。
**b)**按下播放按钮（是的，熟悉的东西！）并看到请求得到响应（响应时间 249 毫秒，576 字节）。
**c)**检查 XML 输出，归结为：
[http](http://www.w3.org/2005/08/addressing/soap/fault) ://www.w3.org/2005/08/addressing/soap/fault s:Sender a:InvalidSecurity 验证消息的安全性时发生错误。

**4-尝试将我的计算机设置在每个不同的时区上的第 3 步 24 倍**
这是因为显然，这是此错误代码的常见原因。并不是说它有任何帮助，它保持不变

我的问题：

1.  我是否使用了所有正确的链接/文件/凭据/设置？
2.  我该如何解决这个错误，或者至少找到一些可以帮助我解决这个问题的不错的资源？
3.  我是否有点走在正确的轨道上来发现我所有的肥皂信息应该是什么样子？
4.  我如何从这里继续？
5.  我还需要在 .php“网站”中使用它吗？（即用户输入他的登录名并可以选择“检索数据”以显示它等等）

如果您需要更多信息，请随时询问

感谢快速回答 - 这个项目已经让我发疯了大约 20 个小时，几乎没有答案，还有许多需要解决的谜团。

干杯
病房

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T10:59:15.890

你的第二步（终点网址）是错误的。如果没有可供选择的端点 url。然后打开你的wsdl搜索soap：你想使用的服务的地址位置标签。从那里复制该网址并将其粘贴到soap ui中使用编辑端点网址。首先尝试使用http。

问候， 安布吉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T17:49:19.447

请找到获取 CRM 完整端点 url 的步骤 [https://social.technet.microsoft.com/wiki/contents/articles/2739.how-to-get-full-wsdl-schema-for-organization-service-在-microsoft-dynamics-crm-2011.aspx](https://social.technet.microsoft.com/wiki/contents/articles/2739.how-to-get-full-wsdl-schema-for-organization-service-in-microsoft-dynamics-crm-2011.aspx)

关注库马尔

# java - 使用 DAO、DTO 模式作为 MVC

> ID：14537788
> 
> 赞同：3
> 
> 时间：2013-01-26T14:21:45.643
> 
> 标签：java, sql, model-view-controller, design-patterns, data-transfer-objects

```
 public abstract class BaseDAO<T extends BaseDTO> {

        public Integer create(T dto) {

        }
        public Integer update(T dto) {

        }
        public Integer delete(T dto) {

       }

     }

    public class JobDAO extends BaseDAO<JobDTO> {

        public JobDAO(Connection conn) {
            super(conn);
        }

        @Override
        public String getDBTableName() {
            return "JobTABLE";
        }
    }

    public class BaseDTO {

        protected Integer ID;

        public Integer getID() {
            return ID;
        }

        public void setID(Integer ID) {
            this.ID = ID;
        }
    }

    public class JobDTO extends BaseDTO {

        Integer employerID;
        //getter
        //setter

     }

   public class Job_GUI extends javax.swing.JFrame {
    //GUI properties
    } 
```

我正在尝试理解`Model, View, Controller`约定，并且我想将其应用于`MVC`由数据传输和访问对象组成的上述类结构。我不明白的是，我的结构是否高于 MVC？如果有，型号是什么？我猜 DTO 是他们自己`Model`。Job_GUI 是`View`我已经知道的，但是什么是`Controller`??

我想直接`actionPerformed`在 Job_GUI 本身中编写代码，类似于在 db 中创建作业的代码片段：

```
JobDAO jdao = new JobDAO(conn);
           //create object jobDTO to hold all form values to be passed to JobDAO
           final JobDTO jobDTO = new JobDTO();
           //populating JobDTO with values from form
           jobDTO.setEmployerID(id);
           jobDTO.setDescription(description.getText());
           jobDTO.setTitle(txtTitle.getText());
           jdao.create(jobDTO); 
```

但以上内容应该在`Job_GUI`班级本身还是其他地方。如果我要插入上面的代码片段，`Job_GUI`我是否会远离 MVC 约定？你会把上面的片段放在哪里？`controller`如果我要使用`DTO`,`DAO` `Design Pattern`进行数据库交互，那么困惑在于确定我所拥有的所有类中的哪个类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T15:51:53.113

```
 JobDAO jdao = new JobDAO(conn);
       //create object jobDTO to hold all form values to be passed to JobDAO
       final JobDTO jobDTO = new JobDTO();
       //populating JobDTO with values from form
       jobDTO.setEmployerID(id);
       jobDTO.setDescription(description.getText());
       jobDTO.setTitle(txtTitle.getText());
       jdao.create(jobDTO); 
```

在上面的代码中，你基本上是在做**控制器**的工作，因为你给你的 DTO 赋值，然后调用你的 DAO 的创建方法。**这是Controller应该做的。**所以你在这部分是对的，除了一个小的更正：

```
 JobDAO jdao = new JobDAO(conn);  //not preferable
    JobDAO jdao = new JobDAO();  //preferred inside Controller class 
```

将建议您在 DAO 中保留特定于连接的代码。您的 Controller 类不应该知道您的数据库连接。您可以在 DAO 的创建/更新/删除方法中执行此操作。

`DAO where you actually interact with DB is part of MODEL in MVC.`

请记住几件事：

*   MVC（架构设计模式）强调关注点分离。因此，请确保您为 View、Controller 和 Model 定义了明确的类
*   您的类名应该传达它属于哪个组件（BaseDAO 等）
*   控制器控制视图和模型。所以你的视图和模型不应该互相了解。

正如你提到的，你已经很清楚 View 了。所以我没有对此做任何解释。

# c# - 使用 R.NET 连接 R 和 C#

> ID：14537790
> 
> 赞同：0
> 
> 时间：2013-01-26T14:22:02.150
> 
> 标签：c#, r

我想使用 Visual Studio C# 2012 中的 R 软件。我注意到有人用 R.NET 做到了这一点。我安装 R.2.15.2（我找到的版本）。我注意到 R.NET 只适用于 R（32 位）。我已经安装了 32 和 64，但我链接到 32 位。程序找不到 DLL 并抛出 DLL not find 异常。我注意到 envPath 是空的，找不到变量。我想知道是否有人可以帮助我。

谢谢你。

```
static void Main(string[] args)
{
    string PATH = @"c:\Users\Documents\Visual Studio 2012\Projects\ConsoleApplication1\packages\R.NET.1.5.0\lib\net40";
    // Set the folder in which R.dll locates.
    var envPath = Environment.GetEnvironmentVariable(PATH);
    var rBinPath = @"C:\Program Files\R\R-2.15.2\bin\i386";
    Environment.SetEnvironmentVariable(PATH, envPath + Path.PathSeparator + rBinPath);
    using (REngine engine = REngine.CreateInstance("RDotNet"))
    {
        // Initializes settings.
        engine.Initialize();

        // .NET Framework array to R vector.
        NumericVector group1 = engine.CreateNumericVector(new double[] { 30.02, 29.99, 30.11, 29.97, 30.01, 29.99 });
        engine.SetSymbol("group1", group1);
        // Direct parsing from R script.
        NumericVector group2 = engine.Evaluate("group2 <- c(29.89, 29.93, 29.72, 29.98, 30.02, 29.98)").AsNumeric();

        // Test difference of mean and get the P-value.
        GenericVector testResult = engine.Evaluate("t.test(group1, group2)").AsList();
        double p = testResult["p.value"].AsNumeric().First();

        Console.WriteLine("Group1: [{0}]", string.Join(", ", group1));
        Console.WriteLine("Group2: [{0}]", string.Join(", ", group2));
        Console.WriteLine("P-value = {0:0.000}", p);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T14:45:56.110

```
var currentPath = Environment.GetEnvironmentVariable("path");
var pathWithR = string.Join(";", currentPath, rPath1, rPath2, ...);
Environment.SetEnvironmentVariable("path", pathWithR); 
```

[MSDN Environment.GetEnvironmentVariable](http://msdn.microsoft.com/en-us/library/77zkk0b6.aspx)
[MSDN Environment.SetEnvironmentVariable](http://msdn.microsoft.com/en-us/library/z46c489x.aspx)

# c# - Telerik MVC Ajax Grid 不会扩展保存

> ID：14537792
> 
> 赞同：3
> 
> 时间：2013-01-26T14:22:15.403
> 
> 标签：c#, jquery, asp.net-mvc, telerik-grid, telerik-mvc

我在使用 Telerik MVC Grid 控件时遇到问题。我希望控件在保存新行时展开新保存的行（由于行按时间排序，因此始终位于顶部）。

我在我的网格中使用了以下代码：

```
@(Html.Telerik()
  .Grid<Models.ViewModels.BestellingModel>()
  .Name("...")
  .DetailView(
       ...
  )
  .DataBinding(
      db =>
          {
              db.Ajax().Select(...);
              db.Ajax().Update(...);
              db.Ajax().Insert(...);
              db.Ajax().Delete(...);
          }
  )
  .DataKeys(
      ...
  )
  .ToolBar(
      ...
  )
  .ClientEvents(e =>
                    {
                        e.OnError("onErrorGrid");
                        e.OnSave("onSaveBestelling");
                        e.OnDataBound("bestellingenVanKlant_onRowDataBound");
                    }
  )
) 
```

这是javascript：

```
var isSaved = false;

function onSaveBestelling(e) {
    isSaved = true;
}

function bestellingenVanKlant_onRowDataBound(e) {
    if (isSaved) {
        var grid = $(this).data('tGrid');
        grid.expandRow(0);

        isSaved = false;
    }     
} 
```

当我使用 firebug 跟踪代码路径时，它显示代码正在执行。但是，在我看来，插入新行后该行不会扩展。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T20:46:17.200

我认为您必须更改 bestellingenVanKlant_onRowDataBound 函数：

```
var grid = $(this).data('tGrid');
expandFirstRow(grid, e.row); 
```

并使用 expandFirstRow 函数：

```
function expandFirstRow(grid, row) {
    if (grid.$rows().index(row) == 0) {
        grid.expandRow(row);
    }
} 
```

# jquery - FullCalendar 突出显示行

> ID：14537796
> 
> 赞同：2
> 
> 时间：2013-01-26T14:22:51.110
> 
> 标签：jquery, css, fullcalendar

我想使用 AgendaWeek 视图突出显示[FullCalendar中的任意一组行。](http://arshaw.com/fullcalendar)由于每一行都有它自己的 css 类（例如，fc-slot32），我认为这不是什么大问题。但是，当我将此行应用背景颜色时，它会与日历网格混淆。更具体地说，它删除了该行上日期之间的分隔边界。

我不确定 FullCalendar 是如何首先实现日历网格的 - 有谁知道我如何在不删除网格的情况下突出显示该行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:32:33.040

如果您知道要突出显示哪一行，这将起作用：

```
$('.fc-slot5').css({'background-color':'yellow', 'opacity':0.5 }); 
```

# ruby - MongoDB/Mongoid 排序行为很奇怪

> ID：14537804
> 
> 赞同：1
> 
> 时间：2013-01-26T14:23:21.773
> 
> 标签：ruby, mongodb, mongoid, sorting

我有以下对象：

```
class Node
  include Mongoid::Document
  include Mongoid::Tree

   field :path, type: Array
end 
```

该`path`数组用于存储树中的全局位置，因此根节点将存储其位置：`{ path: [0] }`而子节点将存储其位置和根位置，如下所示：`{ path: [0, 0] }`

当我查询它们`Node.asc(:path)`然后询问路径时，我得到如下信息：

```
[[3, 0, 0],
 [7, 0],         # WTF?
 [3, 0],
 [2, 0, 1],
 [2, 0],
 [2, 0, 0, 0],
 [0],
 …
] 
```

但是，当我在 Ruby 中进行排序时，我得到了正确的结果：

```
[[0],
 [2],
 [2, 0],
 [2, 0, 0],
 [2, 0, 0, 0],
 [2, 0, 1],
 [2, 0, 1, 0],
 [3],
 …
] 
```

MongoDB 发生了什么，这与索引有关吗？

# php - 如果字符串为空，则使用 preg_match 切换返回 true

> ID：14537805
> 
> 赞同：0
> 
> 时间：2013-01-26T14:23:23.237
> 
> 标签：php, preg-match, switch-statement

我的开关和 preg_match 案例有问题我的代码是这样的

```
switch( $WORD ){

    case ( preg_match("/^(?:.+-)?(\d+?)$/i",  $WORD , $ID )  ? true : false ):
        echo "valid ". $ID ." test -> " .preg_match("/^(?:.+-)?(\d+?)$/i",  $WORD );
    break;

    default:
        echo $WORD;
    break;
} 
```

这些代码适用于

```
$WORD = "TEST";        print => TEST
$WORD = "TEST-1";      print => valid 1 test -> 1
$WORD = "TEST-2552";   print => valid 2552 test -> 1
$WORD = "343";         print => valid 343 test -> 1 
```

但如果`$WORD`为空或`$WORD = ""`情况也为真，则打印

```
$WORD = "";      print => valid  test -> 0 
```

我该如何解决？我试过了

```
case ( ( preg_match("/^(?:.+-)?(\d+?)$/i",  $WORD , $ID ) == 1 )  ? true : false ): 
```

但不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:08:05.147

我已经用一个简单的技巧解决了它，所以如果有人有同样的问题，那就是解决它的方法......（目前我不知道是否存在更好的方法）

就在案例之前`preg_match`添加一个案例`case "":`

```
switch( $WORD ){

    default:
    case "":
        // call a function
    break;

    case preg_match("/^(?:.+-)?(\d+?)$/i", $WORD, $ID ) ? true : false:
        echo "valid and id is: ". $ID ;
    break;

    // all other common cases
    case "home":
    case "dog":
    case "cat":
    case "fish":
        // call a function
    break;

    case "bull":
    case "shark":
    case "somethingelse":
        // call a function
    break;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T14:30:43.973

这不是应该如何`switch`使用的，我什至不确定它是否可以这样工作。的整个想法`switch`是对链式语句有一个简短的符号`if`。

```
if ($foo == 1) { ... }
else if ($foo == 2) { ... }
else if ($foo == 3) { ... }
else { ... } 
```

变成

```
switch ($foo) {
   case 1: ... break;
   case 2: ... break;
   case 3: ... break;
   default: ...
} 
```

尤其是当您遇到非常复杂的情况时，`$foo`您可以节省大量重复的代码。在您的情况下，使用`switch`并没有多大意义。随你去吧`if`，你很高兴：

```
if (preg_match("/^(?:.+-)?(\d+?)$/i",  $WORD , $ID )) {
    echo "valid ". $ID ." test -> " .preg_match("/^(?:.+-)?(\d+?)$/i",  $WORD );
} else {
    echo $WORD;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T14:38:07.093

我不明白你为什么使用 switch 来选择布尔值

当 $WORD 为 "" 时，switch($WORD) 等于 switch(false)

那么你的问题就发生了

为什么不

```
if(preg_match("/^(?:.+-)?(\d+?)$/i",  $WORD , $ID )){
echo "valid ";
}else{
echo $WORD;
} 
```

# android - Android Facebook SDK - 导入 SDK 时出错

> ID：14537807
> 
> 赞同：6
> 
> 时间：2013-01-26T14:23:23.627
> 
> 标签：android, facebook-android-sdk

我正在尝试按照[此处](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)所述导入 android Facebook SDK 。导入项目后出现，但显示如下错误：

> import android.annotation 无法解析

和

> 导入 com.facebook.android.BuildConfig 无法解析

我使用的是 Eclipse Helios，SDK Manager 中显示的虚拟设备是 2.1、2.2、2.3.3 和 3.1（指南状态`You'll need to have the Android 2.2 (API 8) components installed in order to use the Facebook SDK`）。Preferences -> Java Compiler 中显示的编译器级别为 1.6。

可能是什么问题，我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T12:42:21.263

尝试

导入-> Android-> 现有的 Android 代码到工作区

而不是

General->Existing project into workspace

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T02:43:40.093

不仅工作空间中的示例项目，您可能还需要在工作空间中再导入一个项目 ..$HOME\facebook-android-sdk-3.6.0\facebook。希望这会有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-21T13:48:03.693

您需要导入 Facebook 文件夹而不是根目录。

# android - 如果滚动，如何使 Listview 自动跳转到某个位置？

> ID：14537808
> 
> 赞同：1
> 
> 时间：2013-01-26T14:23:39.447
> 
> 标签：android, listview, scroll

我有这个 ListView，元素之间有 100dp 的填充，因此在滚动时一次只显示一个元素。

问题是，每当我滚动时，相应位置上的相应元素都没有聚焦（它不在我的布局中间，就像在画廊中一样），滚动可能会更远并且只显示一半。

我希望 OnScroll 用户一次只能看到下一个元素，如果他们想传递到下一个元素，则再次滚动，但也希望这些元素在我的列表视图中居中。

这与 Gallery 的 OnFling 非常相似，如果滚动元素之间的一半距离，它会聚焦最近的那个。

# jquery - 自定义 Jquery 幻灯片不会移动到正确的幻灯片

> ID：14537810
> 
> 赞同：1
> 
> 时间：2013-01-26T14:23:42.820
> 
> 标签：jquery, slideshow

我正在创建一个 auto_play 循环函数来让幻灯片无限滑动。
但是当变量 slidePosition 等于 1 时，我遇到了问题，即验证不会触发的 if 函数。

html

```
<div class="slide_wrap">
    <div class="slides">
      <ul>
        <li><img src="images/img_01.jpg"/></li>
        <li><img src="images/img_02.jpg"/></li>
        <li><img src="images/img_03.jpg"/></li>
      </ul>
</div></div> 
```

js

```
$(".slides").bind("auto_play.loop", function(){
if(slidePosition == 1){<br/>
$(this).delay(1000).animate({right:'+='+slideWidth, easing: 'swing'}, 1000);<br/>
slidePosition = 2;<br/>
        }<br/>
        if(slidePosition == 2){<br/>
            $(this).delay(1000).animate({right:'+='+slideWidth, easing: 'swing'}, 1000);<br/>
            slidePosition = 3;<br/>
        }<br/>
        if(slidePosition == 3){<br/>
            $(this).delay(1000).animate({right:'-='+2*slideWidth, easing: 'swing'}, 1000);<br/>
            slidePosition = 1;<br/>
        }<br/>
        trigger("auto_play.loop");<br/>
    }).trigger("auto_play.loop"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:53:35.900

好吧，我认为您的问题是您的 if 语句。在每个内部，您都需要调用 else if，否则将设置幻灯片编号并运行下一个 if 语句。

在查看代码后，我了解您尝试完成的工作采用了您的方法并对其进行了一些清理。我没有调用 jquery 触发器，而是将它们移到方法调用中。现在在每个动画完成后，它会调用 Update 函数来获取序列中的下一个动画，更加简洁和易于维护。

还有一些事情需要清理。比如让它需要无限数量的幻灯片。现在它的硬编码只做三个。虽然这样可行，但最好将计数抽象出来，让它读取 dom 并以这种方式进行计数。

[您可以在此处](http://jsfiddle.net/4Qrs6/)查看 jsFiddle 上的解决方案

**更新：** 修改了 javascript 以获取无限数量的幻灯片。我建议您使用这种类型的方法，这样您就可以继续添加幻灯片，而永远不会接触一盎司的 javascript。

[更新小提琴](http://jsfiddle.net/AFDQu/)

Javascript：

```
$(document).ready(function()
                  {
                      //On page load initialize the slideshow
                      MyApp.SlideShow.init();
                  });
//create a namespace for our code
var MyApp = MyApp || {};

//create a function inside a closure to handle all slideshow functions
MyApp.SlideShow = (function ()
{
    var slidePosition = 1;
    var slideWidth = 100;
    var slider = $('.slides');     

    //called when page is loaded
    function init()
    {
        var v = $('.viewer');      
        var vtop = v.position().top;
        vleft = v.position().left;    
        //Set the slider to where the view is 
        slider.css('left', vleft).css('top', vtop);
        update();
    };

    //function to update the slide block
    function update()
    {
        if (slidePosition == 1) {
            slider.delay(1000).animate({
                left: '-=' + slideWidth,
                easing: 'swing'
            }, 1000, update);
            slidePosition = 2;
        }
        else if (slidePosition == 2) {
            slider.delay(1000).animate({
                left: '-='+ slideWidth,
                easing: 'swing'
            }, 1000, update);
            slidePosition = 3;
        }
        else if (slidePosition == 3) {
            slider.delay(1000).animate({
                left: '+=' + 2 * slideWidth,
                easing: 'swing'
            }, 1000, update);
            slidePosition = 1;
        }
    };    
    return {
        init: init
    };
}()); 
```

HTML：

```
<div class="slide_wrap">
    <div class="slides">
      <ul>
        <li class="s1">1</li>
        <li class="s2">2</li>
        <li class="s3">3</li>
      </ul>
    </div>
</div>

<div class="viewer"></div> 
```

CSS：

```
.viewer
{
    border:5px solid yellow;
    height:100px;
    width:100px;
    position:absolute;
    top:100px;
    left:300px;
}
.slides li
{    
 height:100px;
 width:100px;
float:left;
}
.slides ul
{    
  height:100px;
}
.slides
{
    position:absolute;
}
.s1
{
  background-color:red;  
}
.s2
{
  background-color:blue;  
}
.s3
{
  background-color:green;  
} 
```

# java - Java字符串比较

> ID：14537811
> 
> 赞同：0
> 
> 时间：2013-01-26T14:23:47.887
> 
> 标签：java, android, string, time

我有这个代码

```
package com.lestijden;

import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends Activity {

TextView Datum;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Datum = (TextView) findViewById(R.id.Tijd);

    Date today = Calendar.getInstance().getTime();
    SimpleDateFormat Formatter = new SimpleDateFormat("km");
    String folderName = Formatter.format(today);

    int result = folderName.compareTo("0");

    if (result > 815 ){
        double data = new Double("905") - new Double(folderName); 
        Datum.setText(Double.toString(data));
    }
    else if (result > 905){
        double data = new Double("955") - new Double(folderName); 
        Datum.setText(Double.toString(data));
    }

    else if (result > 955){
        double data = new Double("1045") - new Double(folderName); 
        Datum.setText(Double.toString(data));
    }

    else if (result > 1045){
        double data = new Double("1100") - new Double(folderName); 
        Datum.setText(Double.toString(data));
    }

    else if (result > 1100){
        double data = new Double("1150") - new Double(folderName); 
        Datum.setText(Double.toString(data));
    }
    else if (result > 1150){
        double data = new Double("1240") - new Double(folderName); 
        Datum.setText(Double.toString(data));
    }
    else if (result > 1240){
        double data = new Double("1310") - new Double(folderName); 
        Datum.setText(Double.toString(data));
    }
    else if (result > 1310){
        double data = new Double("1400") - new Double(folderName); 
        Datum.setText(Double.toString(data));
    }
    else if (result > 1400){
        double data = new Double("1450") - new Double(folderName); 
        Datum.setText(Double.toString(data));
    }
    else if (result > 1450){
        double data = new Double("1505") - new Double(folderName); 
        Datum.setText(Double.toString(data));
    }
    else if (result > 1505){
        double data = new Double("1555") - new Double(folderName); 
        Datum.setText(Double.toString(data));
    }
    else if (result > 1555){
        double data = new Double("1645") - new Double(folderName); 
        Datum.setText(Double.toString(data));

    }
}
} 
```

我希望它像这样工作：如果时间是例如 14:01。(1401) 然后它需要计算 1450 减去当前时间 (1401)。并在文本视图中显示输出 (49)。

我的 textview 不显示任何输出。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T14:29:12.703

您应该将字符串转换为时间对象。减去这两次并将结果转换为字符串。

```
java.text.DateFormat df = new java.text.SimpleDateFormat("hh:mm");
java.util.Date date1 = df.parse("14:01");
java.util.Date date2 = df.parse("14:50");
long diff = date2.getTime() - date1.getTime(); 
```

Diff 将以毫秒为单位的时间差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T15:11:14.300

根据 javadocs，String.compareTo(String otherString) 方法按字典顺序比较两个字符串，它主要用于对列表进行排序。您需要的是 @RvdK 所做的，但我会使用 date1 - date2 的绝对值，因为 date2 可能在 date1 之后：

```
Math.abs(date2.getTime() - date1.getTime()); 
```

由于积分系统，无法将此作为评论发布：/

# python - 博客应用引擎系统中的评论

> ID：14537815
> 
> 赞同：0
> 
> 时间：2013-01-26T14:24:12.863
> 
> 标签：python, google-app-engine

最近我阅读了关于 App Engine 的“Core Python”一书，并通过解释实现了可用的博客示例。我正在尝试扩展此示例以允许在博客文章中发表评论，但我遇到了一些困难。

我有两个模型：

BlogPost (tag, text, timestamp) - 它是存储标签、文本和帖子创建时间的表格

Comment (blog_post, text) - blog_post 是 BlogPost 模型的 ReferenceProperty，用于将评论与其相关的博客文章一起分配。

我的困难在于检索 BlogPost 键以将其与用户输入的评论正确分配。我在想我应该对帖子进行查询，获取它的键并将其放在用户创建的新评论（当然，如果它是创建的）上。但是此刻我不明白（以清楚的方式）我应该如何编写这些步骤。

换句话说，我需要做一些与此处可用的“一对多”解释相关的事情 - [https://developers.google.com/appengine/articles/modeling](https://developers.google.com/appengine/articles/modeling)。但是我需要按照我的实现来做，用我的 html 表单中的用户输入生成实例模型。

下面，我让我现在正在工作的代码，并感谢您的帮助。

```
//app.yaml

application: src
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: .*
  script: main.app 
```

和

//main.py

```
import webapp2
from google.appengine.ext import db 

class MainHandler(webapp2.RequestHandler):
    def get(self):
        self.response.out.write('''
            <h1>The Blog Posts</h1>
            <form action="/post" method=post>
            Title:
            <br><input type=text name=title>
            <br>Body:
            <br><textarea name=body rows=3 cols=60></textarea>
            <br><input type=submit value="Post">
            </form>
            <hr>
        ''')

        #posts = db.GqlQuery("SELECT * FROM BlogEntry")
        posts = BlogPost.all().order('-timestamp').fetch(10)
        for post in posts:
            self.response.out.write('''<hr>
                <strong>%s</strong><br>%s
                <blockquote>%s</blockquote>''' % (
                post.title, post.timestamp, post.body)
            )

class BlogEntry(webapp2.RequestHandler):
    def post(self):
        post = BlogPost()
        post.title = self.request.get('title')
        post.body = self.request.get('body')
        post.put()
        self.redirect('/')

#model
class BlogPost(db.Model):
    title = db.StringProperty()
    body = db.TextProperty()
    timestamp = db.DateTimeProperty(auto_now_add=True)

app = webapp2.WSGIApplication([
    ('/', MainHandler),
    ('/post', BlogEntry)
], debug=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T14:57:47.090

一种设计是为每篇博文设置一个评论表。然后，例如，您可以将 的键`BlogPost`作为隐藏字段包含在表单中。为了减少登录页面上的混乱，您可能希望为每个页面设置一个单独的页面`BlogPost`，您可以在其中允许用户提交他们的评论。

这里有一个这种设计的例子：[https](https://bitbucket.org/abernier/yab/src) ://bitbucket.org/abernier/yab/src相关的代码[`PostHandler`在`/views.py`](https://bitbucket.org/abernier/yab/src/7f7df34dd8a5ec9e6ec31fc796b8715821129b43/views.py?at=default#cl-159)里面，附带的标记在[`/templates/view.html`](https://bitbucket.org/abernier/yab/src/7f7df34dd8a5ec9e6ec31fc796b8715821129b43/templates/view.html?at=default).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T21:13:44.640

在 NDB 中，如果您的评论中有附加字段，您可以使用重复属性或重复结构化属性。重复属性的行为类似于 Python 列表，您可以在其中放置博客文章的所有评论。你只需要一次阅读。

# jquery - jquery幻灯片效果不适用于以百分比高度定义的图像

> ID：14537818
> 
> 赞同：1
> 
> 时间：2013-01-26T14:24:25.043
> 
> 标签：jquery, slidetoggle

当我对其应用 jquery slideToggle 效果时，我发现图像的异常行为。经过一番努力，我发现滑动效果仅在图像大小以像素（px）定义时才有效，但在大小以百分比为单位时无效。

**HTML**

```
<a>Click Me</a>

<div class='target'>
    Hello Everyone...<br>
    <img src='http://i.imgur.com/MHfCk2B.jpg' height='200px' />
    <img src='http://i.imgur.com/MHfCk2B.jpg' height='10%' width='30%' />
</div> 
```

**jQuery**

```
$(document).ready(function() {
    $('body').on('click', 'a', function() {
        $('.target').slideToggle();
    });
}) 
```

这是jsFiddle[链接](http://jsfiddle.net/SrWdW/1/)

*它的临时解决方案是改用fadeToggle 函数。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:06:46.820

这可以通过简单地确保所有图像都用像素高度定义来解决。这实际上是您可以动态且非常简单地执行的操作：

```
$("img").height(function (_, h) { return h; }); 
```

[http://jsfiddle.net/SrWdW/2/](http://jsfiddle.net/SrWdW/2/)

我还应该指出，[`px`and `%`in image `height`/ `width`attributes 是无效](http://www.w3.org/community/webed/wiki/HTML/Elements/img#HTML_Attributes)的。

# php - php获取变量$_get

> ID：14537821
> 
> 赞同：0
> 
> 时间：2013-01-26T14:24:42.900
> 
> 标签：php, get

**用户文件.php：**

```
<form action="userrename.php" method="get">
      <input type="hidden" name="rename" value="<?= $filecode?>">
      <input type="submit" name="rename" id="bdelete" value="Rename"><br><br>
</form> 
```

当我单击重命名按钮时，它得到：`userrename.php?rename=pev8nERsJolwrCHyfQZujI1QHMDQHQX6V0ZMtQhsDi1aRgPeJsR&rename=rename`

**用户名.php：**

```
<?php 
if(empty($_GET['rename'])) 
    echo "No GET variables"; 
else 
    echo $_GET['rename']; //here result is : rename
?> 
```

我必须只在 if 语句中得到`pev8nERsJolwrCHyfQZujI1QHMDQHQX6V0ZMtQhsDi1aRgPeJsR`这个`rename`。我怎么能做到这一点，任何人都有 idei 或知道我对此感到困惑

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T14:26:13.070

删除名称

```
<input type="submit" name="rename" id="bdelete" value="Rename"> 
```

或将其名称更改为 name="xxxx"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T14:34:55.980

您的两个元素输入都使用相同的名称（name="rename"），最简单的解决方案是更改提交输入的名称。如果您的表单上只有 1 个提交按钮，您可以完全删除 name 属性。只有具有 name 属性的元素在提交表单时才会传递它们的值，所以如果你删除它，它仍然是一个有效的 HTML，它的值不会被提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T14:29:38.397

您可以使用以下命令在 GET 中获取文件代码并在 POST 中获取重命名值：

```
<form action="userrename.php?rename=<?= $filecode?>" method="POST">
     <input type="submit" name="rename" id="bdelete" value="Rename"><br><br>
</form> 
```

# java - Apache 独立伽马分布

> ID：14537824
> 
> 赞同：3
> 
> 时间：2013-01-26T14:24:47.190
> 
> 标签：java, apache, math, distribution, random-sample

嗨，我注意到 Apache Maths 库（2.2 版）中有一些奇怪的行为，特别是在`org.apache.commons.math.distribution.GammaDistributionImpl`课堂上，尽管我认为这可能也适用于其他发行版。

我想从不同的伽马分布中抽取样本，如下所示：

```
public static final double[] gammaSamples(final double[] shapeParameters)
{
    double[] samples = new double[shapeParameters.length];
    for (int i = 0; i < shapeParameters.length; i++)
    {
        GammaDistributionImpl gd = new GammaDistributionImpl(shapeParameters[i], 1.0d);
        try
        {
            samples[i] = gd.sample();
        }
        catch (MathException e)
        {
            e.printStackTrace();
        }
    }
    return samples;
} 
```

但是，在运行代码时，我发现样本都可疑地相似，即给出

```
public static void main(String[] args)
{
    System.out.println(Arrays.toString(gammaSamples(new double[] { 2.0d, 2.0d, 2.0d})));
} 
```

一些示例输出是：

```
[0.8732612631078758, 0.860967116242789, 0.8676088095186796]
[0.6099133517568643, 0.5960661621756747, 0.5960661621756747]
[2.1266766239021364, 2.209383544840242, 2.209383544840242]
[0.4292184700011395, 0.42083613304362544, 0.42083613304362544] 
```

我认为问题是由于默认随机数生成器对每个分布使用相同/相似的种子，我对此进行了如下测试：

```
public static final double[] gammaSamples(final double[] shapeParameters, final Random random)
{
    double[] samples = new double[shapeParameters.length];
    for (int i = 0; i < shapeParameters.length; i++)
    {
        GammaDistributionImpl gd = new GammaDistributionImpl(shapeParameters[i], 1.0d);
        gd.reseedRandomGenerator(random.nextLong());
        try
        {
            samples[i] = gd.sample();
        }
        catch (MathException e)
        {
            e.printStackTrace();
        }
    }
    return samples;
} 
```

这似乎解决了问题，即给出

```
public static void main(String[] args)
{
    System.out.println(Arrays.toString(gammaSamples(new double[] { 2.0d, 2.0d, 2.0d }, new Random())));
} 
```

一些示例输出是：

```
[2.7506981228470084, 0.49600951917542335, 6.841476090550152]
[1.7571444623500108, 1.941865982739116, 0.2611420777612158]
[6.043421570871683, 0.8852269293415297, 0.6921033738466775]
[1.3859078943455487, 0.8515111736461752, 3.690127105402944] 
```

我的问题是：

这是怎么回事？这是一个错误还是它旨在让 Apache Maths 发行版以这种方式运行？

对我来说很奇怪，如果我创建单独的分发对象，我必须担心给他们的是什么种子，并确保它们足够不同。

另一个轻微的烦恼是我似乎无法将这些分布传递给我自己的 Random 对象，而是它们只允许通过 reseedRandomGenerator(long seed) 方法更改种子。在尝试重现结果时，能够将我自己的 Random 对象传递给它们将非常有用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T21:33:45.127

通过查看 javadoc ：

*   [Apache Commons 数学 GammaDistributionImpl](http://commons.apache.org/math/api-2.2/org/apache/commons/math/distribution/GammaDistributionImpl.html)
*   [Apache Commons Math AbstractContinuousDistribution](http://commons.apache.org/math/api-2.2/org/apache/commons/math/distribution/AbstractContinuousDistribution.html)

我看到有方法 `public double[] sample(int sampleSize) throws MathException`

> 从分布中生成随机样本。默认实现通过在循环中调用 sample() 来生成示例。

你试过了吗？

```
double[] samples = sample(shapeParameters.length); 
```

**编辑**：我很抱歉，我看到你`GammaDistributionImpl`每次都用一个新参数计算一个新`alpha`参数。我猜这是因为种子值源自具有有限分辨率的系统时钟，并且对构造函数的关闭调用将产生相同的结果。看看这个[SO question](https://stackoverflow.com/questions/1045013/java-can-new-random-nextint5-always-return-the-same-number)。

以下是一些输入，可让您进行更深入的调查：

*   您可以浏览[Apache Commons Math 的 JIRA](https://issues.apache.org/jira/browse/MATH)。
    如果可能，您应该更新到 lib 的 v3.1。根据 JIRA，[一些问题已得到纠正](https://issues.apache.org/jira/issues/?jql=text%20~%20%22GammaDistributionImpl%22)。
*   [您可以在邮件列表](http://commons.apache.org/math/mail-lists.html)中浏览/订阅/发布

# c# - 在 entlib 5 中的错误处理期间处置对象

> ID：14537826
> 
> 赞同：0
> 
> 时间：2013-01-26T14:24:59.833
> 
> 标签：c#, exception, exception-handling

我在 MSDN 中看到了以下示例。

```
exManager.Process(() =>GetDataSet("GetAllCustomers"), "Data Access Policy"); 
```

处理数据库连接或文件句柄的任何想法/技术（如果有的话）`GetDataSet`？例如，是否应该添加 finally 块以及如何添加？请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:32:49.227

C# 有一个非常方便的`using`运算符：

```
using (var db = GetDbContext())
{
     GetDataSet(db, "GetAllCustomers");// data access code
} 
```

上面的块实际上等效于：

```
{
    DbContext db;
    try
    {
        var db = GetDataSet(db, "GetAllCustomers");
         // data access code
    }
    finally
    {
        db.Dispose();
    }
} 
```

无论是否抛出异常，上下文都将在块的末尾进行处理。

# django - 装饰所有 django 管理视图 (1.4+)

> ID：14537829
> 
> 赞同：4
> 
> 时间：2013-01-26T14:25:14.190
> 
> 标签：django, django-admin, django-views, decorator, django-urls

1.4 之前的 Django 版本曾经有一个巧妙的技巧来装饰管理中的所有视图：

```
urlpatterns = patterns('',
    (r'^admin/(.*)', my_decorator(lambda *args: admin.site.root(*args))),
) 
```

这不再有效，因为不推荐使用 root。我找到了一些[替代方案](http://djangosnippets.org/snippets/2532/)，但与我所拥有的相比，它们似乎相当冗长。还有一个钩子可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:49:23.067

装饰 url 树中的每个视图

[http://djangosnippets.org/snippets/2607/](http://djangosnippets.org/snippets/2607/)

# c++ - 从 64 位数字中“隔离”特定的行/列/对角线

> ID：14537831
> 
> 赞同：32
> 
> 时间：2013-01-26T14:25:33.050
> 
> 标签：c++, performance, 64-bit, bit-manipulation, bitboard

好的，让我们考虑一个 64 位数字，它的位组成一个 8x8 表。

例如

> 0 1 1 0 1 0 1 0 0 1 1 0 1 0 1 1 0 1 1 1 1 0 1 0 0 1 1 0 1 0 1 0 1 1 1 0 1 0 1 0 0 1 1 0 1 0 1 0 0 1 1 0 1 1 1 0 0 1 1 0 1 0 1 0

写成

```
a b c d e f g h
----------------
0 1 1 0 1 0 1 0
0 1 1 0 1 0 1 1 
0 1 1 1 1 0 1 0 
0 1 1 0 1 0 1 0 
1 1 1 0 1 0 1 0 
0 1 1 0 1 0 1 0 
0 1 1 0 1 1 1 0 
0 1 1 0 1 0 1 0 
```

现在，如果我们只想隔离例如**列 d** ( `00100000`) （或任何行/对角线）怎么办？

~~这可以做到吗？~~如果是这样，怎么办？

* * *

**提示：**

*   (a) 我在这里的主要目标——虽然最初没有提到——是原始速度。我正在寻找最快的算法，因为“检索”功能*每秒*执行数百万次。

*   (b) 这更接近我的意思：[https ://www.chessprogramming.org/Kindergarten_Bitboards](https://www.chessprogramming.org/Kindergarten_Bitboards)

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-01-26T16:46:11.460

这是一个只有 4 个主要步骤的解决方案：

```
const uint64_t column_mask = 0x8080808080808080ull;
const uint64_t magic = 0x2040810204081ull;

int get_col(uint64_t board, int col) {
    uint64_t column = (board << col) & column_mask;
    column *= magic;
    return (column >> 56) & 0xff;
} 
```

它是这样工作的：

*   板被移动以使列与左侧对齐
*   它被掩盖为仅包含所需的列（0..8）
*   它乘以一个幻数，导致所有原始位推到左侧
*   最左边的字节向右移动

选择幻数以仅复制所需的位，并让其余位落入未使用的位置/溢出该数字。该过程看起来像这样（数字是位“ID”，而不是数字本身）：

```
original column: ...1.......2.......3.......4.......5.......6.......7.......8....
aligned column:  1.......2.......3.......4.......5.......6.......7.......8.......
multiplied:      123456782345678.345678..45678...5678....678.....78......8.......
shifted to right:........................................................12345678 
```

如果添加`const`关键字，程序集实际上会变得非常好：

```
get_col:
.LFB7:
        .cfi_startproc
        movl    %esi, %ecx
        movabsq $-9187201950435737472, %rax
        salq    %cl, %rdi
        andq    %rax, %rdi
        movabsq $567382630219905, %rax
        imulq   %rax, %rdi
        shrq    $56, %rdi
        movl    %edi, %eax
        ret 
```

没有分支，没有外部数据，每次计算大约 0.4ns。

编辑：使用 NPE 的解决方案作为基线大约需要六分之一的时间（下一个最快的）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-26T18:13:17.780

是的，所以为了“解决”关于哪个更快/更慢/等等的争论，我已经将所有代码放入一个程序中[我*希望*我已经将正确的代码片段归功于正确的人]。

代码可以在下面找到，以检查我在将代码转换为函数时是否正确地解释了代码。我确实在没有正确输出的情况下运行它并检查每个函数是否给出相同的结果[记住在某些情况下顺序略有不同 - 所以我做了一个变体以运行我的代码的另一种方式，只是为了看看它给出“正确”的结果]。所以事不宜迟，结果如下：

```
mats1 time in clocks per iteration 10.3457
mats2 time in clocks per iteration 10.4785
mats3 time in clocks per iteration 10.5538
viraptor time in clocks per iteration 6.24603
lemees time in clocks per iteration 14.4818
npe time in clocks per iteration 13.1455
alex time in clocks per iteration 24.8272 
```

（viraptor 的核心 i5、g++ 4.7 的结果）

```
mats1 time in clocks per iteration 7.62338
mats2 time in clocks per iteration 7.36226
mats3 time in clocks per iteration 7.45361
viraptor time in clocks per iteration 2.09582
lemees time in clocks per iteration 9.43744
npe time in clocks per iteration 7.51016
alex time in clocks per iteration 19.3554 
```

（viraptor 来自 core i5、clang++ 3.2 的结果）

```
mats1 time in clocks per iteration 12.956
mats2 time in clocks per iteration 13.4395
mats3 time in clocks per iteration 13.3178
viraptor time in clocks per iteration 2.12914
lemees time in clocks per iteration 13.9267
npe time in clocks per iteration 16.2102
alex time in clocks per iteration 13.8705 
```

这是 3.4GHz AMD Athlon2 上的时钟周期——我没有现代英特尔机器——如果有人希望在上面运行代码，我很想看看它是什么样子。我相当确定所有这些都在缓存中运行良好——也许除了获取一些值来检查之外。

因此，获胜者显然是病毒盗，大约占 40% - “我的”代码排在第二位。Alex 的代码没有任何跳转/分支，但它的运行速度似乎仍然比其他替代方案慢。不知道为什么 npe 的结果比我的慢得多 - 它几乎做同样的事情（当查看 g++ 的汇编器输出时，代码看起来非常相似）。

```
#include <iostream>
#include <fstream>
#include <cstdint>

using namespace std;

const int SIZE = 1000000;

uint64_t g_val[SIZE];

ofstream nulloutput;

static __inline__ unsigned long long rdtsc(void)
{
    unsigned hi, lo;
    __asm__ __volatile__ ("rdtsc" : "=a"(lo), "=d"(hi));
    return ( (unsigned long long)lo)|( ((unsigned long long)hi)<<32 );
}

#define BITA_TO_B(x, a, b) (((x) >> (a-b)) & (1 << b))

unsigned char get_col_mats1(uint64_t val, int col)
{
    return BITA_TO_B(val, 56+col, 7) |
    BITA_TO_B(val, 48+col, 6) |
    BITA_TO_B(val, 40+col, 5) |
    BITA_TO_B(val, 32+col, 4) |
    BITA_TO_B(val, 24+col, 3) |
    BITA_TO_B(val, 16+col, 2) |
    BITA_TO_B(val, 8+col, 1) |
    BITA_TO_B(val, 0+col, 0);
}

unsigned char get_col_mats2(uint64_t val, int col)
{
    return BITA_TO_B(val, 63-col, 7) |
    BITA_TO_B(val, 55-col, 6) |
    BITA_TO_B(val, 47-col, 5) |
    BITA_TO_B(val, 39-col, 4) |
    BITA_TO_B(val, 31-col, 3) |
    BITA_TO_B(val, 23-col, 2) |
    BITA_TO_B(val, 15-col, 1) |
    BITA_TO_B(val, 7-col, 0);
}

unsigned char get_col_viraptor(uint64_t board, int col) {
    const uint64_t column_mask = 0x8080808080808080ull;
    const uint64_t magic = 0x2040810204081ull ;
    uint64_t column = board & (column_mask >> col);
    column <<= col;
    column *= magic;
    return (column >> 56) & 0xff;
}

unsigned char get_col_alex(uint64_t bitboard, int col)
{
    unsigned char result;
    result |= (bitboard & (1ULL << 63-col)) ? 0x80 : 0;
    result |= (bitboard & (1ULL << 55-col)) ? 0x40 : 0;
    result |= (bitboard & (1ULL << 47-col)) ? 0x20 : 0;
    result |= (bitboard & (1ULL << 39-col)) ? 0x10 : 0;
    result |= (bitboard & (1ULL << 31-col)) ? 0x08 : 0;
    result |= (bitboard & (1ULL << 23-col)) ? 0x04 : 0;
    result |= (bitboard & (1ULL << 15-col)) ? 0x02 : 0;
    result |= (bitboard & (1ULL << 7-col))  ? 0x01 : 0;

    return result;
}

unsigned char get_col_lemees(uint64_t val, int column)
{
    int result = 0;
    int source_bitpos = 7 - column; // "point" to last entry in this column
    for (int target_bitpos = 0; target_bitpos < 8; ++target_bitpos)
    {
    bool bit = (val >> source_bitpos) & 1;  // "extract" bit
    result |= bit << target_bitpos;            // add bit if it was set
    source_bitpos += 8;                        // move one up in table
    }
    return result;
}

int get(uint64_t board, int row, int col) {
  return (board >> (row * 8 + col)) & 1;
}

uint8_t get_col_npe(uint64_t board, int col) {
  uint8_t ret = 0;
  for (int i = 0; i < 8; ++i) {
    ret = (ret << 1) + get(board, i, col);
  }
  return ret;
}

#define BITA_TO_B2(x, a, b) (((x) >> (a-b)) & (1 << b))

unsigned char get_col_mats3(uint64_t val, int col)
{
    return BITA_TO_B2(val, 63-col, 7) |
    BITA_TO_B2(val, 55-col, 6) |
    BITA_TO_B2(val, 47-col, 5) |
    BITA_TO_B2(val, 39-col, 4) |
    BITA_TO_B2(val, 31-col, 3) |
    BITA_TO_B2(val, 23-col, 2) |
    BITA_TO_B2(val, 15-col, 1) |
    BITA_TO_B2(val, 7-col, 0);
}

template<unsigned char (*f)(uint64_t val, int col)>
void runbench(const char *name)
{
    unsigned char col[8]  = {0};
    uint64_t long t = rdtsc();
    for(int j = 0; j < SIZE; j++)
    {
    uint64_t val = g_val[j];
    for(int i = 0; i < 8; i++)
    {
        col[i] += f(val, i);
    }
//  __asm__ __volatile__("":::"memory");
    }
    t = rdtsc() - t;
    for(int i = 0; i < 8; i++)
    {
    nulloutput<< "col " << i << " has bits " << hex << (int)col[i] << endl;
    }
    cout << name << " time in clocks per iteration " << dec << t / (8.0 * SIZE) << endl;
}

#define BM(name) void bench_##name() { runbench<get_col_##name>(#name); }

BM(mats1);
BM(mats2);
BM(mats3);
BM(viraptor);
BM(lemees);
BM(npe);
BM(alex);

struct function
{
    void (*func)(void);
    const char *name;
};

#define FUNC(f) { bench_##f, #f }

function funcs[] = 
{
    FUNC(mats1),
    FUNC(mats2),
    FUNC(mats3),
    FUNC(viraptor),
    FUNC(lemees),
    FUNC(npe),
    FUNC(alex),
}; 

int main()
{
    unsigned long long a, b;
    int i;
    int sum = 0;

    nulloutput.open("/dev/nul");
    for(i = 0; i < SIZE; i++)
    {
    g_val[i] = rand() + ((long)rand() << 32L);
    }
    unsigned char col[8];

    for(i = 0; i < sizeof(funcs)/sizeof(funcs[0]); i++)
    {
    funcs[i].func();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T14:46:01.790

使用简单的循环对其进行编码，并让优化器为您执行内联和循环展开。

使用 4.7.2 编译`-O3`，在我的机器上，**每秒****可以执行大约 3 亿次调用。`get_col()`**

**`bitboard.cpp:`**

```
#include <cinttypes>
#include <iostream>

int get(uint64_t board, int row, int col) {
  return (board >> (row * 8 + col)) & 1;
}

uint8_t get_col(uint64_t board, int col) {
  uint8_t ret = 0;
  for (int i = 0; i < 8; ++i) {
    ret = (ret << 1) + get(board, i, col);
  }
  return ret;
}

extern uint64_t board;
extern int sum;

extern void f();

int main() {
  for (int i = 0; i < 40000000; ++i) {
    for (int j = 0; j < 8; ++j) {
      sum += get_col(board, j);
    }
    f();
  }
  std::cout << sum << std::endl;
} 
```

**`bitboard_b.cpp:`**

```
#include <cinttypes>

uint64_t board = 0x1234567890ABCDEFull;
int sum = 0;

void f() {} 
```

如果您查看 的汇编代码`get_col()`，您会发现它包含零个循环，并且可能与您可能手工制作的任何东西一样高效：

```
__Z7get_colyi:
LFB1248:
        movl    %esi, %ecx
        movq    %rdi, %rax
        movq    %rdi, %rdx
        shrq    %cl, %rax
        leal    8(%rsi), %ecx
        andl    $1, %eax
        shrq    %cl, %rdx
        leal    16(%rsi), %ecx
        andl    $1, %edx
        leal    (%rdx,%rax,2), %eax
        movq    %rdi, %rdx
        shrq    %cl, %rdx
        leal    24(%rsi), %ecx
        andl    $1, %edx
        leal    (%rdx,%rax,2), %eax
        movq    %rdi, %rdx
        shrq    %cl, %rdx
        leal    32(%rsi), %ecx
        andl    $1, %edx
        leal    (%rdx,%rax,2), %eax
        movq    %rdi, %rdx
        shrq    %cl, %rdx
        leal    40(%rsi), %ecx
        andl    $1, %edx
        leal    (%rdx,%rax,2), %edx
        movq    %rdi, %rax
        shrq    %cl, %rax
        leal    48(%rsi), %ecx
        andl    $1, %eax
        leal    (%rax,%rdx,2), %edx
        movq    %rdi, %rax
        shrq    %cl, %rax
        leal    56(%rsi), %ecx
        andl    $1, %eax
        leal    (%rax,%rdx,2), %eax
        shrq    %cl, %rdi
        andl    $1, %edi
        leal    (%rdi,%rax,2), %eax
        ret 
```

这并不意味着一个完整的实现，只是这个想法的粗略说明。特别是，位的顺序可能与您期望的相反，等等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T14:32:49.590

在您的情况下（专门用于 8x8 = 64 位表），您需要执行位移以提取特定位并将它们重新排列在一个新的整数变量中，也使用位移：

```
uint64_t matrix = ... // input
int column = 3; // "d"-column

int result = 0;
int source_bitpos = 7 - column; // "point" to last entry in this column
for (int target_bitpos = 0; target_bitpos < 8; ++target_bitpos)
{
    bool bit = (matrix >> source_bitpos) & 1;  // "extract" bit
    result |= bit << target_bitpos;            // add bit if it was set
    source_bitpos += 8;                        // move one up in table
} 
```

见这里：http: [//ideone.com/UlWAAO](http://ideone.com/UlWAAO)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-26T14:36:28.770

```
#define BITA_TO_B(x, a, b) (((x) >> (a)) & 1) << b;

unsigned long long x = 0x6A6B7A6AEA6E6A;

unsigned char col_d = BITA_TO_B(x, 60, 7) |
                      BITA_TO_B(x, 52, 6) |
                      BITA_TO_B(x, 44, 5) |
                      BITA_TO_B(x, 36, 4) |
                      BITA_TO_B(x, 28, 3) |
                      BITA_TO_B(x, 20, 2) |
                      BITA_TO_B(x, 12, 1) |
                      BITA_TO_B(x,  4, 0); 
```

也许是一个更优化的想法：

```
#define BITA_TO_B(x, a, b) (((x) >> (a-b)) & (1 << b)); 
```

如果 b 是一个常数，这将表现得稍微好一些。

另一种方式可能是：

```
unsigned long xx = x & 0x10101010101010; 
col_d = (xx >> 53) | (xx >> 46) | (xx >> 39) ... (xx >> 4); 
```

做一个“和”而不是多个有助于加快速度。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-26T15:05:00.980

您可以[转置](http://chessprogramming.wikispaces.com/Flipping+Mirroring+and+Rotating#FlipabouttheDiagonal)数字，然后只需选择相关的列，该列现在是一行，因此是您想要的连续位。

在我的测试中，它并不比将 8 个单独选择的位 ORing 在一起好多少，但如果您打算选择多个列（因为转置是限制因素），它会好得多。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-10-26T04:33:43.997

这是一个可以一个周期执行一次的解决方案（如果值和掩码在寄存器中），如果您愿意`PEXT`在 Intel 上使用内部指令（并且如果您正在做位板的事情，您可能会这样做）：

```
int get_col(uint64_t board) {
    return _pext_u64(board, 0x8080808080808080ull);
} 
```

这是第 0 列 - 如果您想要另一列，只需适当地移动掩码。当然，这是通过使用硬件特定指令来作弊，但位板都是关于作弊的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-26T14:38:13.873

这个怎么样...

```
uint64_t bitboard = ...;
uint8_t result = 0;

result |= (bitboard & (1ULL << 60)) ? 0x80 : 0;
result |= (bitboard & (1ULL << 52)) ? 0x40 : 0;
result |= (bitboard & (1ULL << 44)) ? 0x20 : 0;
result |= (bitboard & (1ULL << 36)) ? 0x10 : 0;
result |= (bitboard & (1ULL << 28)) ? 0x08 : 0;
result |= (bitboard & (1ULL << 20)) ? 0x04 : 0;
result |= (bitboard & (1ULL << 12)) ? 0x02 : 0;
result |= (bitboard & (1ULL <<  4)) ? 0x01 : 0; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-04-08T11:57:10.103

这个来自[国际象棋编程维基](https://chessprogramming.wikispaces.com/Flipping+Mirroring+and+Rotating)。它转置了电路板，之后隔离单行是微不足道的。它还可以让您以另一种方式返回。

```
/**
 * Flip a bitboard about the antidiagonal a8-h1.
 * Square a1 is mapped to h8 and vice versa.
 * @param x any bitboard
 * @return bitboard x flipped about antidiagonal a8-h1
 */
U64 flipDiagA8H1(U64 x) {
   U64 t;
   const U64 k1 = C64(0xaa00aa00aa00aa00);
   const U64 k2 = C64(0xcccc0000cccc0000);
   const U64 k4 = C64(0xf0f0f0f00f0f0f0f);
   t  =       x ^ (x << 36) ;
   x ^= k4 & (t ^ (x >> 36));
   t  = k2 & (x ^ (x << 18));
   x ^=       t ^ (t >> 18) ;
   t  = k1 & (x ^ (x <<  9));
   x ^=       t ^ (t >>  9) ;
   return x;
} 
```

# delphi - 如何以编程方式破坏delphi中的视觉控件？

> ID：14537832
> 
> 赞同：-1
> 
> 时间：2013-01-26T14:25:40.187
> 
> 标签：delphi, controls

我有麻烦。我创建了一个标签对象。

```
var lbl:Tlabel;
begin
lbl:=TLabel.Create(nil);
.... 
```

好的，但是在销毁它之后，它仍然保持形式。有我的代码：

```
lbl.free;
lbl := nil; 
```

执行后，控件保持在窗体上。有解决办法吗？我需要销毁这个组件，这应该从表单中消失。谢谢。

编辑：删除控制（AControl：TControl）；程序不工作。编辑2：

```
for I := 0 to 4 do begin
 lbl:=TLabel.Create(nil);
lbl.Top :=  100+z*i;
 lbl.Left := 88;
 Lbl.Width := 80;
  Lbl.Height := 14;
  lbl.Font.Size := 9;
 lbl.Caption := nm[i];
 Form1.InsertControl(lbl); 
```

此控件保持在窗体上。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T14:43:09.150

销毁控件与销毁任何其他对象没有什么不同。只需在对象上调用 Free 即可完成。

唯一遇到问题的时候是对正在运行事件处理程序的对象调用 Free 时。例如，在该按钮的 OnClick 处理程序中释放一个按钮。在这种情况下，您需要向表单发布消息，然后在处理排队的消息时释放按钮。

您的问题是您在错误的对象上调用 Free 。您创建了 5 个标签，但只保留了对其中一个的引用。您需要释放所有 5 个标签。您需要一个数组或列表来保存标签引用。然后你就可以把它们全部释放了。

在您的表单中声明一个数组：

```
FLabels: array of TLabel; 
```

当您创建它们时：

```
SetLength(FLabels, 5);
for i := 0 to high(FLabels) do
begin
  FLabels[i] := TLabel.Create(Self);
  .......
end; 
```

像这样销毁：

```
for i := 0 to high(FLabels) do
  FLabels[i].Free;
FLabels := nil; 
```

* * *

给你一些一般性的建议。当您遇到问题时，请简化它。为什么要尝试使用多个控件来调试对象破坏？创建一个空白应用程序，并添加一个控件。然后尝试删除该单个控件。然后移动到多个控件。不要对复杂的版本进行故障排除，始终尝试简化。

# javascript - 使用 javascript 从其他站点获取数据

> ID：14537838
> 
> 赞同：1
> 
> 时间：2013-01-26T14:26:38.443
> 
> 标签：javascript, jquery

我想从其他网站获取 div 中的数据。我怎样才能使用 JavaScript 做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T15:49:37.000

由于跨域限制，您无法使用 AJAX 直接访问 html。

但是，您可以使用`Yahoo YQL`来选择您想要的页面部分，并在`jsonp`数据中返回该 html。

示例返回 stackoverflow 主页上的问题列表

```
var url='http://query.yahooapis.com/v1/public/yql?q=select * from html where url=\'http://stackoverflow.com/\' and xpath=\'//div[@id="question-mini-list"]//h3//a\'&format=json&callback=?';

$.getJSON( url, function(data){
    $.each(data.query.results.a, function(){       
        $('body').append('<div><a href="http://stackoverflow.com'+this.href +'">'+this.content+'</a></div>')          
     })
}) 
```

演示：http: [//jsfiddle.net/NTUx5/](http://jsfiddle.net/NTUx5/)

YQL 文档：http: [//developer.yahoo.com/yql/guide/index.html](http://developer.yahoo.com/yql/guide/index.html)

编辑：这不再起作用了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-26T14:32:40.660

您将不得不[使用 JSONP 技术](https://stackoverflow.com/questions/1197802/cross-site-ajax-using-jquery)，正如上面的 jungalist 建议的那样；或让您的 AJAX 方法与使用 cURL 的本地 PHP 脚本对话：

**jQuery：**

```
$('#result').load('path/to/script.php'); 
```

**PHP：**

```
$ch = curl_init("http://example.com");
curl_exec($ch);
curl_close($ch); 
```

# css - 用左 div 填充剩余空间

> ID：14537839
> 
> 赞同：7
> 
> 时间：2013-01-26T14:27:14.643
> 
> 标签：css, css-float

谁能告诉我如何在不固定右 div 大小的情况下让左 div 填充剩余空间。

我想要与以下示例完全相反的内容：

```
.left {float: left; border: 1px solid blue;}
.right {overflow: hidden; border: 1px solid blue;} 
```

右 div 应该只占用它需要的大小，左 div 应该占用所有剩余空间。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-26T14:43:24.860

具有固定宽度的右 div 必须`float:right;`然后左 div 必须保持原样，以便它可以占据其全部可用宽度，但由于您希望右 div 固定，您必须首先放置它。

HTML：

```
<div id="parentDiv">
    <div id="rightFixedDiv"></div>
     <div id="leftDynamicDiv></div>
</div> 
```

CSS：

```
#rightFixedDiv
{
   float:right; 
   border-style:solid; 
   width:100px; 
   height:200px;
}
#leftDynamicDiv
{
   border-style:solid; 
   background-color:blue; 
   overflow:hidden; 
   height:200px;
} 
```

检查一下，100px 的固定宽度：http: [//jsfiddle.net/dkGbd/](http://jsfiddle.net/dkGbd/) 200px 的固定宽度：http: [//jsfiddle.net/eESTZ/](http://jsfiddle.net/eESTZ/)

现在如果你想要相反的，首先放置左 div，给它一个`float:left;`

工作示例：http: [//jsfiddle.net/UShek/](http://jsfiddle.net/UShek/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T14:34:46.447

您要做的大部分事情就是将您在此处所做的 css 和 html 顺序颠倒过来。浮动元素必须始终是第一个。

```
<div class="right">this is the right div</div>
<div class="left">left div</div> 
```

那么CSS将是

```
.right {
  float: right;
  background: #fef;
}
.left {
  display: block;
  background: #ffe;
} 
```

**更新：** 这是[小提琴](http://jsfiddle.net/t23Wd/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-03T08:30:52.703

我认为最有效的方法是使用“display : flex”，一种新的 CSS 3 方法。你可以搜索这个以了解更多关于这个惊人的显示，我从中受益匪浅。;)

# visual-studio-2010 - 如何不调试 xstring 和其他标准库？

> ID：14537840
> 
> 赞同：0
> 
> 时间：2013-01-26T14:27:21.257
> 
> 标签：visual-studio-2010, visual-c++

我正在使用 Visual Studio 2010。通常当我在调试某些东西 (C++) 并且我在 Visual Studio 中点击暂停按钮 (Break All) 时，中断发生在标准库中，例如 xstring、xmemory 等。我不'不在乎调试这些库......我只想调试我自己的代码。有没有办法告诉 Visual Studio 不要调试这些库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T22:21:19.770

当您点击暂停按钮（全部中断）时，调试器会中断每个线程，无论线程当时恰好在哪里。如果您考虑一下，您会意识到调试器不能等到它出现在您的代码中（或者调试器可能认为是您关心的任何代码）。例如，线程可能会被阻塞等待永远不会完成的 I/O，因此永远不会回到您的代码中。

您可以做的是使用调用堆栈找出线程在您的代码中的位置，并在那里设置断点并运行。或者通常只是执行“Step Out”操作甚至“Step Over”操作会很快让你回到你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-28T05:30:34.493

对于 Visual Studio 2012 请按照以下步骤操作。打开文件“C:\Program Files **(x86)** \Microsoft Visual Studio 11.0\Common7\Packages\Debugger\Visualizers\default.natstepfilter”

并添加要忽略的函数名称模式的规则。例如，我添加了以下规则以避免进入字符串方法。

**std::basic_string.*NoStepInto**

更多信息请参考 [链接](https://blogs.msdn.microsoft.com/andypennell/2004/02/06/how-to-not-step-into-functions-using-the-visual-c-debugger/)

# javascript - 为什么我的音频自动播放两次？

> ID：14537841
> 
> 赞同：0
> 
> 时间：2013-01-26T14:27:28.510
> 
> 标签：javascript, jquery, html5-audio

这是一个jsfiddle：http: [//jsfiddle.net/webmagnets/snGY4/](http://jsfiddle.net/webmagnets/snGY4/)

当您单击圆形播放按钮时，音频播放两次。

这是html：`<i class="icon-play-circle" />`

这是jquery代码：

```
 $("i.icon-play-circle").click(function(){
    var word = "你好"
    var url = 'http://apifree.forvo.com/key/b1b0641fac44c20e42373e0af5d05325/format/json/callback/pronounce/action/standard-pronunciation/word/'+encodeURI(word)+'/language/zh';
    $.ajax({
        url: url,
        jsonpCallback: "pronounce",
        dataType: "jsonp",
        type: "jsonp",
        success: function (json) {
       var mp3 = json.items[0].pathmp3;
       var ogg = json.items[0].pathogg;
       var sound = '<audio autoplay="true"><source src='+mp3+'</source><source src='+ogg+'</source></audio>';
       $('body').append(sound);
   },
    error: function(){
        console.log("error");
}});
}); 
```

//上面的api键是免费的。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T22:45:31.333

这最终为我工作：http: [//jsfiddle.net/webmagnets/snGY4/3/](http://jsfiddle.net/webmagnets/snGY4/3/)

html:

```
<i class="icon-play-circle" />
<audio>
    <source id='mp3' src='' />
    <source id='ogg' src='' />
</audio> 
```

javascript:

```
 $("i.icon-play-circle").click(function(){
        var word = "你好";
        var url = 'http://apifree.forvo.com/key/b1b0641fac44c20e42373e0af5d05325/format/json/callback/pronounce/action/standard-pronunciation/word/'+encodeURI(word)+'/language/zh';
        $.ajax({
            url: url,
            jsonpCallback: "pronounce",
            dataType: "jsonp",
            type: "jsonp",
            success: function (json) {
           var mp3 = json.items[0].pathmp3;
           var ogg = json.items[0].pathogg;
           var sound = '<audio autoplay="false"><source src='+mp3+' type="audio/mpeg"</source><source src='+ogg+' type="audio/ogg"</source></audio>';
                $('audio:first-child').attr('src',mp3);
                $('audio:last-child').attr('src',ogg);
                $('audio')[0].play();
       },
        error: function(){
            console.log("error");
    }});
    });

//above api key is a free throw away. 
```

# javascript - 在不更改 URL 或调用任何 JavaScript 函数的情况下加载内容

> ID：14537844
> 
> 赞同：-1
> 
> 时间：2013-01-26T14:27:43.477
> 
> 标签：javascript, jquery, html, ajax

我遇到了一个有多个页面的网站。当一个页面被点击时，内容是动态加载的。我知道使用了 AJAX，但如果不调用任何 JavaScript 函数，我无法理解它是如何工作的。这是一段代码：

```
<a href="#" class="acted" onclick="return false;">1</a>

<a href="#" onclick="return false;">2</a>

<a href="#" onclick="return false;">3</a> 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:32:44.983

是的，你错过了一些东西。如果不查看完整代码，我们无法确定，但此页面可能使用 jquery 选择器来处理事件。例如，代码可能会声明所有“a”标签都获得了与其关联的某个 JavaScript 函数。或者所有带有 class="acted" 等的东西。看看：[http ://www.w3schools.com/jquery/jquery_ref_selectors.asp](http://www.w3schools.com/jquery/jquery_ref_selectors.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T14:30:24.373

您是否从“显示源代码”中获得该代码？如果是这样，很可能在页面上运行了一个脚本，以便在页面加载后动态连接事件处理程序，因此原始 HTML 中的那些 onclick 事件可能只是占位符。

例子：

```
<html>
<head></head>
<body>
    <div id="main">This text is not clickable and has no action when clicked, but try to click me anyway just in case.</div>
</body>
<script>
    window.onload = function()
            { 
               document.getElementById("main").onclick = function() {
                                    return alert('Actually, I am clickable afterall!');
                                };
            };
</script>
</html> 
```

在上面的页面上，有一个名为“main”的 div，它没有默认的 onclick 操作。但是，当页面加载时，会触发一个事件（在本例中为 window.onload），该事件会调用一些代码以将函数附加到 id 为“main”的 div 的 onclick 属性。结果是即使原始 HTML 不包含默认处理程序， main 也可以单击，并且如果您执行“查看源代码”，您将看不到该处理程序（尽管如果您的浏览器具有开发人员工具，您可能能够看到它已连接）。

我还在 JS 小提琴中提供了这个：http: [//jsfiddle.net/qfazj/2/](http://jsfiddle.net/qfazj/2/)

（如果您不熟悉 JSFiddle，右下角是呈现网页的位置，因此单击那里的文本，您应该会看到警报发生。）

# development-environment - SimCity和GTA5等主要游戏是如何制作的？

> ID：14537846
> 
> 赞同：1
> 
> 时间：2013-01-26T14:27:45.937
> 
> 标签：development-environment, game-engine, game-physics, video-game-consoles

我引用这篇文章，提到[了 Xbox 360 游戏是如何制作的](https://stackoverflow.com/questions/722908/what-programming-language-is-used-for-video-games)。

我想知道，从头到尾，主要游戏是如何制作的。如果我们拿最新的 GTA5 或最新的 SimCity。这两款游戏都有虚拟世界。游戏从用户交互中学习；这会影响比赛结果。现在我只是好奇发生了什么。如果我们以 GTA 和 SimCity 为例，它们具有多人游戏城市功能，这些功能会影响多人游戏环境 - 所以这些数据是同步的……然后你就拥有了所有的图形……动画……声音和所有数据以及保存和管理。我的意思是哪些团队以及这些游戏是如何制作和计划的？希望这是正确的地方。我对游戏行业很感兴趣。尤其是编程和最终版本（提供或获取更新和错误）令人印象深刻..

据我了解 Autodesk 3ds Studio Max、Cinema 4d、XNA.. C++、Java.. SoundBooth？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-27T03:31:46.300

它们被称为 AAA 游戏。他们需要大量的资金、大量的时间和大量的开发人员来制作。基本上，你看到的一切——树木、汽车、人等都是使用 3dsmax、maya 或 blender 等 3d 软件创建的。然后他们使用称为游戏引擎的东西来定义属性（例如，当用户按下“w”时让汽车向前行驶）。许多游戏使用专门为其创建的游戏引擎。所以它的艺术+代码=游戏。如果你对制作 3d 游戏感兴趣，也许你应该试试 panda3d。它是一个免费的 Python 游戏引擎，而且非常简单。 [http://www.panda3d.org/](http://www.panda3d.org/) : 用于游戏引擎 我敢肯定有很多 python 教程飞来飞去。Python 是你能学到的最简单的东西（当然除了 html！）还有[www.mygamefast.com](http://www.mygamefast.com)拥有有史以来最好的教程之一。制作《侠盗猎车手》、《魔兽争霸》和《模拟城市》等游戏需要付出很多努力和很多人。但是周围有很多令人印象深刻的单人独立游戏。

了解某事的最好方法是尝试一下。祝一切顺利。

编辑：[Unity 游戏](https://unity3d.com/)引擎可能是这些天开始的最佳方式。它允许您编写一次游戏，然后编译它以在许多不同的平台上运行。

# php - 脸书是如何做到的？目录或 404 自定义错误？

> ID：14537856
> 
> 赞同：0
> 
> 时间：2013-01-26T14:29:32.207
> 
> 标签：php, facebook, apache, url, httpwebrequest

我以前也问过[类似的问题](https://stackoverflow.com/questions/14522724/how-to-fetch-the-actual-request-url-in-apache-php-if-it-does-not-exist-and-user)，但没有得到答案。

每当我们请求类似的地址`http://facebook.com/Username`时，都会显示 的时间线`username`。我认为他们已经配置了他们的 404 自定义错误页面，将请求路径（在本例`/Username`中）存储在变量中，然后显示相关数据。或者他们是否在根目录中创建了一个包含每个用户名的目录？这意味着它们的根目录中有十亿个子目录？

我想在我的网站中实现类似的功能，目前我在 URL 中传递参数并使用`$_GET`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T14:33:21.877

这是网络上非常常见的模式。该术语称为 URL 重写。我从来没有在 PHP 中做过，但我怀疑这是通过 Apache 中的 mod_rewrite 模块完成的。

[http://www.cyberdesignz.com/blog/website-design/url-rewriting-top-5-ways-of-php-url-rewriting/](http://www.cyberdesignz.com/blog/website-design/url-rewriting-top-5-ways-of-php-url-rewriting/)

[http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T14:35:08.163

他们可能在 .htaccess 文件中使用 URL 重写。

用户名取自 url 并传递给 PHP（或类似）文件，以从数据库中获取数据，然后重定向到时间线页面。

# path - 如何在包含路径等的情况下将 cl 添加到 cygwin

> ID：14537858
> 
> 赞同：2
> 
> 时间：2013-01-26T14:29:54.583
> 
> 标签：path, cygwin, include-path

对于我的学校项目，我们被要求使用 makefile.microsoft`cygwin`来编译我们的文件等。

但是当我这样做时，`cygwin`抱怨说`cl`找不到该命令。我尝试了很多方法，但是当我使用 cl 命令解决时，它说没有`include`设置路径。

我不知道它在抱怨什么，希望有人能告诉我一种一劳永逸的方法。

（ps。我都安装了`microsoft visual studio v10`，`11`所以我应该有所有需要的东西，`compile`但显然它没有帮助=（）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T08:57:22.897

Makefile 告诉 Cygwin 在源代码上使用 MSVC 命令行编译器，但 -- `cl.exe`-- 默认情况下不包含在 PATH 中。还必须设置正确操作所需的其他几个环境变量。

你有两个选择：

1) 在开始菜单的“Microsoft Visual Studio\Visual Studio 工具”下，您会发现几个与“Visual Studio 命令行”类似的条目。选择你想要的，它会打开一个设置适当环境的 DOS 框。

2) Visual Studio 提供了一个批处理文件，`<Path_to_MSVS>\VC\vcvarsall.bat`. 您使用所需的目标平台作为参数调用它，例如`VC\vcvarsall.bat amd64`，它会适当地设置环境。使用环境变量`VS100COMNTOOLS`（对于 Visual Studio 10，如果使用其他版本，请相应地调整数字）来查找该批处理文件。但是请注意，在**Unix** shell 中，被调用的脚本不能设置调用环境的变量。就个人而言，我让我的 bash 脚本设置了一个`.bat`文件，其中包含调用`vcvarsall.bat`和要执行的命令（在你的情况下是`make`），然后`.bat`通过`cmd /c <batchfile>`.

# android - 更改另一个应用程序的方向

> ID：14537859
> 
> 赞同：1
> 
> 时间：2013-01-26T14:29:54.903
> 
> 标签：android, orientation, landscape-portrait

我正在创建一个应用程序，它将改变一些其他已安装应用程序的方向，通过 ApplicationInfo 对象读取其他已安装应用程序的方向很简单，但无法更改它。

经过一些研发后，我注意到类似类型的应用程序（改变方向）也运行服务，这意味着它们会即时改变方向，但我不知道他们是如何做到的。

例如像 Smart Rotator 应用程序一样[https://play.google.com/store/apps/details?id=net.xdevelop.rotator_t&hl=en](https://play.google.com/store/apps/details?id=net.xdevelop.rotator_t&hl=en)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T21:53:51.400

您引用的其他应用程序执行的操作与您的预期不同。它们根据设备的加速度计启用屏幕旋转；也就是说，用户旋转设备并且方向改变。它们没有为任何应用程序设置特定的方向。请注意，如果您在横向模式下禁用自动旋转，则方向通常会恢复为纵向。

我以前做过与这些其他应用程序相同的操作。不幸的是，这是我无法分享的专有商业代码。

该方法有两个组成部分：

1.  检测前台应用程序何时是目标应用程序
2.  更改显示方向的系统范围首选项

显然你也必须做相反的事情，即事后改回来。

SO的其他地方有一些第1部分的例子。就我而言，我编写了一个服务，该服务不断轮询以查看前台应用程序是什么（因为没有相关的系统事件来通知应用程序更改）。这不是一项微不足道的工作，但可以做到。

第 2 件的相关设置是`Settings.System.ACCELEROMETER_ROTATION`。我认为您可以使用所有版本的普通应用程序权限来编写它。代码片段如下：

```
 Settings.System.putInt(
             app.getContentResolver(),
             Settings.System.ACCELEROMETER_ROTATION,
             orientationEnabled ? 1 : 0
        ); 
```

另请注意，可以编写一个忽略系统屏幕旋转的应用程序；即将保持锁定在它设计的任何方向。不过这并不常见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:05:54.417

您可以通过**进程间通信**来做到这一点。你有几个选择：

1-您可以使用*SharedPreferences*。从您的应用程序中设置一个 WORLD_READABLE 首选项，以便在您的目标应用程序每次启动时读取。看看[这个](https://stackoverflow.com/questions/6030321/android-retrieving-shared-preferences-of-other-application)。

2-您可以将此首选项写入 sdcard 上的文件并以相同方式读取。

3-如果您的目标应用程序正在运行（也就是说，它有一个*服务*或其他东西，因此它的进程是活动的）您可以广播一个意图并从您的目标应用程序接收它。[在这里](https://stackoverflow.com/questions/2749893/how-to-use-broadcast-receiver-in-different-applications-in-android)您可以找到有关此主题的帖子。

4- ...简而言之，您需要将参数传递给您的目标应用程序并将您的方向设置为`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);`

# c++ - 创建节点并计算汽车的初始位置

> ID：14537866
> 
> 赞同：2
> 
> 时间：2013-01-26T14:30:51.320
> 
> 标签：c++, c++11

在这种情况下，如何在 C++ 中创建代码和算法？

1.  可以从文件中读取有限的（最多 6 个）城市（节点）。
2.  城市之间的连接和距离可以手动分配或从文件中读取。
3.  有些汽车可以手动分配路线，起点是城市（节点）。

问题，

1.  如何创建节点并分配节点之间的距离？
2.  如何在节点之间建立连接？
3.  汽车开始行驶一段时间后，如何计算汽车的初始点？

我尝试了城市之间的连接，例如：

```
 A   B   C   D   
A   0  20   0  20  
B  20   0  20  20  
C  20  20   0  15
D  0    8   9  0 
```

如果 2 个城市之间存在连接，则它具有值。如果不是，则值为“0”。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:49:00.633

一种方法是构建连接图。您在这里看到的是相当基本的图形构建。最明显的方法通常是让节点类型具有与其他节点的连接向量：

```
struct node;

// "name" may be optional here -- just the name of the road like "A5" or "US 101"
struct connection { 
    std::string name;
    unsigned distance;
    node *destination;
};

struct node { 
    std::string name;
    std::vector<connection> connections;
}; 
```

有了这个，建立从一个城镇到另一个城镇的连接就是创建一个`connection`包含距离、目的地城市和（可能）道路名称的对象，然后将该连接推到`connections`起始城市的向量上。目前，这假设每一个`connection`都是“简单的”——你走上一条直接通往目的地的道路（这听起来足以满足你的需求）。在大多数情况下，您还希望它们是对称的，因此当/如果您添加从 X 到 Y 的连接时，您还需要添加从 Y 到 X 的类似连接。

在现实生活中，连接可能需要沿途切换道路，因此您可能有一些无名节点，它们仅代表（例如）高速公路 X 与高速公路 Y 的交汇点，（尽管它也可能不是无名的——“ X 和 Y" 可能是一个非常好的名称），因此您必须经过多个节点才能从某个点 A 到达某个点 B。

除非您将此作为练习，否则您可能需要查看[Boost Graph Library](http://www.boost.org/doc/libs/release/libs/graph/doc/table_of_contents.html)。它不仅有助于构建这样的基本图表，而且还有助于找到从一个城镇到另一个城镇的路线，即使两者没有直接连接。

就汽车的位置而言，很大程度上取决于您是否只考虑计算特定距离，或者（例如）您是否想要一个完整的模拟，您可以在其中执行诸如查找从 A 点到B点，发现特定道路上的交通量高于某个阈值，如果交通量太大，可能会找到替代路线等。首先，根据时间和速度计算距离很简单，然后遍历节点他们的路线，直到你走过那个距离。对于后者，您可能会添加一个`car`类，其中每辆车都知道自己的当前位置和目的地。然后，您将每隔一段时间浏览汽车列表，并让每辆汽车更新其当前位置（例如，每模拟分钟一次）。

如果你做一些研究，你会很快发现有很多算法可以解决诸如在图中查找路线（例如，给定图 X，找到从 A 到 B 的最短路线），查找是否所有节点都连接等

# r - 有条件地聚合数据框

> ID：14537868
> 
> 赞同：2
> 
> 时间：2013-01-26T14:31:11.243
> 
> 标签：r, dataframe

我有包含变量纵向测量的数据框，`x`并且`y`在不同的时间点`time`，在几个主题`id`中。但是`x`并且`y`有一些缺失值。

我想要的是聚合数据框，以便对于每个 id，我得到第一个定义的时间`x`和`y`值。`x`然后`y`会在不同的时间点，但没关系。

```
testdf<-data.frame(id=c(rep("A",4),rep("B",4),rep("C",4) ), x=c(NA, NA, 1,2, 3, NA, NA, 1, 2, NA,NA, 5), y=rev(c(NA, NA, 1,2, 3, NA, NA, 1, 2, NA,NA, 5)), time=c(1,2,3,4,0.1,0.5,10,20,3,2,1,0.5)) 
```

所以这`testdf`将减少到

```
 id x y
1  A 1 5
2  B 3 1
3  C 5 1 
```

**更新：**是否有可能允许数据框具有大量变量的解决方案（如果数据框有大量变量，您不必显式定义`x`和`y`变量的解决方案或函数?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T15:50:06.273

这是一个基本的 R 方法——与@kohske 的答案几乎相同的概念，但使用`by`and `lapply`。

不过，首先，您需要`data.frame`按“id”和“time”排序（这也适用于@kohske 的回答）。

```
testdf2 <- testdf[order(testdf$id, testdf$time), ]

do.call(rbind, by(testdf2[2:3], 
                  testdf2$id, 
                  FUN = function(aa) 
                    lapply(aa, function(bb) na.omit(bb)[1])))
#   x y
# A 1 5
# B 3 1
# C 5 1 
```

在第一部分中`by`，指定要“聚合”的列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T14:36:13.773

这是你想要的吗？

```
> library(plyr)
> ddply(testdf, .(id), summarize, x = na.omit(x)[1], y = na.omit(y)[1])
  id x y
1  A 1 5
2  B 3 1
3  C 2 2 
```

**更新**

这是隐式版本。

```
> ddply(subset(testdf, select = id:y), .(id), colwise(function(z) na.omit(z)[1]))
  id x y
1  A 1 5
2  B 3 1
3  C 2 2 
```

# mysql - 如果条件在情况下

> ID：14537871
> 
> 赞同：6
> 
> 时间：2013-01-26T14:31:27.167
> 
> 标签：mysql, sql, oracle, oracle11g

我正在将一些 MySQL 5.0 函数转换为 Oracle 11g。

我需要`IF`在一个案例中放置一个但得到一个错误（缺少右括号）这是我的代码

```
SELECT SUM(
    CASE PTIPO
      WHEN 0 THEN (SELECT IF(A.NT = 0) THEN A.VALOR ELSE 0 END IF FROM DUAL)
      WHEN 1 THEN (SELECT IF(A.NT = 1) THEN A.VALOR ELSE 0 END IF FROM DUAL)
      WHEN 2 THEN (SELECT IF(A.NT = 1) THEN A.VALOR ELSE -A.VALOR END IF FROM DUAL)
    END)
INTO nresp
FROM mov_caja a
JOIN enc_movp b ON a.docid = b.docid
JOIN c_caja c ON a.cajaid = c.cajaid
WHERE c.cajaid 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T14:36:11.423

`IF / ELSE`用于函数内部的流控制和准备好的语句，而不是在单个语句中组装条件。

真的，你只需要`CASE`使用它的其他语法格式在里面嵌套另一个`CASE WHEN <condition> THEN <value>`：

```
SELECT SUM(
    CASE PTIPO
      WHEN 0 THEN (CASE WHEN (A.NT = 0) THEN A.VALOR ELSE 0 END)
      WHEN 1 THEN (CASE WHEN (A.NT = 1) THEN A.VALOR ELSE 0 END)
      WHEN 2 THEN (CASE WHEN (A.NT = 1) THEN A.VALOR ELSE -A.VALOR END)
    END)
INTO nresp
FROM mov_caja a
JOIN enc_movp b ON a.docid = b.docid
JOIN c_caja c ON a.cajaid = c.cajaid
WHERE c.cajaid 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T14:38:53.817

您可以将其重写为：

```
SELECT SUM(
    CASE 
      WHEN PTIPO = 0 and A.NT  = 0 THEN A.VALOR 
      WHEN PTIPO = 0 and A.NT <> 0 THEN 0
      WHEN PTIPO = 1 and A.NT  = 1 THEN A.VALOR 
      WHEN PTIPO = 1 and A.NT <> 1 THEN 0
      WHEN PTIPO = 2 and A.NT  = 1 THEN A.VALOR 
      WHEN PTIPO = 2 and A.NT <> 1 THEN -A.VALOR 
    END)
INTO nresp
FROM mov_caja a
JOIN enc_movp b ON a.docid = b.docid
JOIN c_caja c ON a.cajaid = c.cajaid
WHERE c.cajaid 
```

# batch-file - 批处理文件将文件夹中的文件夹列出到一级

> ID：14537876
> 
> 赞同：21
> 
> 时间：2013-01-26T14:32:05.450
> 
> 标签：batch-file

我已经搜索和搜索无济于事，如果答案确实存在，我深表歉意。

我对批处理文件不是很好，所以请记住这一点。

我所追求的只是一个批处理文件，它将列出/保存以归档当前文件夹中的文件夹列表。

所以基本上如果我在某个文件夹中运行这个批处理文件，它将输出运行批处理文件的文件夹中的所有文件夹（不是文件或子文件夹，只是到一个级别）。

我认为这可能是一个简单的请求，但是我在 Google 等上没有任何运气。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-26T14:49:33.163

## 目录

使用`dir`命令。输入[`dir /?`](http://ss64.com/nt/dir.html)帮助和选项。

```
dir /a:d /b 
```

* * *

## 重定向

然后使用重定向将列表保存到文件中。

```
> list.txt 
```

* * *

## 一起

```
dir /a:d /b > list.txt 
```

这将只输出目录的名称。如果您想要目录的完整路径，请在下面使用。

* * *

## 完整路径

```
for /f "delims=" %%D in ('dir /a:d /b') do echo %%~fD 
```

* * *

## 选择

其他方法只使用`for`命令。请参阅`for /?`帮助和选项。这可以只输出名称`%%~nxD`或完整路径`%%~fD`

```
for /d %%D in (*) do echo %%~fD 
```

* * *

## 笔记

要直接在命令行上使用这些命令，请将双百分号更改为单百分号。`%%`至`%`

要重定向`for`方法，只需在 echo 语句之后添加重定向。在此处使用双箭头`>>`重定向附加到文件，否则由于覆盖所有其他语句，只会将最后一条语句写入文件。

```
... echo %%~fD>> list.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-21T08:19:23.233

打印保存批处理脚本文件的所有文件夹名称

```
for /d %%d in (*.*) do (
    set test=%%d
    echo !test!
)
pause 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-13T06:02:28.470

我试过这个命令来显示目录中的文件列表。

`dir /s /b > List.txt`

在文件中，它显示下面的列表。

> C:\Program Files (x86)\Cisco Systems\Cisco Jabber\XmppMgr.dll
> 
> C:\Program Files (x86)\Cisco Systems\Cisco Jabber\XmppSDK.dll
> 
> C:\Program Files (x86)\Cisco Systems\Cisco Jabber\accessories\Plantronics
> 
> C:\Program Files (x86)\Cisco Systems\Cisco Jabber\accessories\SennheiserJabberPlugin.dll
> 
> C:\Program Files (x86)\Cisco Systems\Cisco Jabber\accessories\Logitech\LogiUCPluginForCisco
> 
> C:\Program Files (x86)\Cisco Systems\Cisco Jabber\accessories\Logitech\LogiUCPluginForCisco\lucpcisco.dll

想要做的只是显示子目录而不是完整的目录路径。

像这样：

> Cisco Jabber\XmppMgr.dll Cisco Jabber\XmppSDK.dll
> 
> Cisco Jabber\附件\JabraJabberPlugin.dll
> 
> Cisco Jabber\附件\罗技
> 
> Cisco Jabber\附件\Plantronics
> 
> Cisco Jabber\附件\SennheiserJabberPlugin.dll

# java - Java Web 启动声音

> ID：14537877
> 
> 赞同：-1
> 
> 时间：2013-01-26T08:46:50.947
> 
> 标签：java, audio, applet, java-web-start

我正在修改一个小程序以使用 Java Web Start，使用该`applet-desc`选项来启动基本上未修改的代码。除了声音，一切都很好。这个小程序只使用最简单的小程序声音界面，基于`getAudioClip`.

其他基于 jar 的资源（即图像）在这两种情况下都可以正常工作，不在 jar 中但通过真实 URL 访问的音频剪辑在这两种情况下也可以正常工作。

`getResource`正在返回一个 in-Jar URL，当作为普通小程序运行时，一切都很完美，但是在同一个 jars 中，作为 JWS 小程序运行，剪辑是无声的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T02:57:26.273

事实证明，问题在于资源 URL 的混淆。

真正的小程序可以使用以 getCodeBase() 作为前缀的通用 URL 从 JAR 中获取声音，但 JWS 小程序要求您使用 getClass().GetResource(..) 来构造显式资源内 url。

# jquery - JQuery 选项卡 destroy() 在 jquery-ui-1.10.0 中不起作用

> ID：14537878
> 
> 赞同：1
> 
> 时间：2013-01-26T14:32:14.570
> 
> 标签：jquery, tabs

我正在尝试从 jquery-ui-1.8.23 升级到 jquery-ui-1.10.0。

突然**$("#tabs").destroy();** 不再起作用。

我已阅读此处的 ui 升级指南：

[http://jqueryui.com/upgrade-guide/1.9/#tabs](http://jqueryui.com/upgrade-guide/1.9/#tabs)

“选项卡现在使用 ui-tabs-destroy 而不是 destroy.tabs。” 我不知道这段代码会是什么样子，也没有可用的示例。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T14:49:49.027

jQuery UI 方法的语法不正确。方法应作为 API 中记录的字符串传递给插件

```
$("#tabs").tabs( "destroy" ); 
```

演示：http: [//jsfiddle.net/ngDP3/](http://jsfiddle.net/ngDP3/)

API 参考（附示例代码）：[http ://api.jqueryui.com/tabs/#method-destroy](http://api.jqueryui.com/tabs/#method-destroy)

> 选项卡现在使用 ui-tabs-destroy 而不是 destroy.tabs

这是用于插件内部数据使用，实际上与使用方法无关

# java - 一种释放数组空间的方法

> ID：14537879
> 
> 赞同：1
> 
> 时间：2013-01-26T14:32:14.867
> 
> 标签：java, android, arrays

我有一个数组`int dom[][] = new int[28][3];`，我将它移动到另一个数组。如何释放该阵列的空间？在 android 模拟器上运行它时，我收到了高 cpu 警告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T14:37:26.890

在 Java 中，您不必手动释放数组，垃圾收集器会为您清除内存。您可以将您的对象设置为 null: `dom = null`。

CPU 警告与此无关，android 模拟器在启动时有一些 CPU 密集型操作，所以你的处理器将在 100% 的某个时间直到模拟器启动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T14:33:57.133

将dom设置为null。以便在下一个垃圾收集器运行时将其释放。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T14:39:37.497

您无需执行任何操作：**如果**由于您没有对它的引用而无法再访问该数组，则它将被垃圾收集（将引用设置为 null 不会产生影响）。

通常，如果这是一个局部变量并且您没有从声明它的方法中返回它，那么只要方法退出（即一旦数组超出范围），它就会有资格进行 GC。

如果您“收到高 CPU 警告”，那么问题出在 CPU 上，而不是内存上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T14:53:58.793

> 我在运行 android 模拟器时收到高 cpu 警告？

它可以是任何东西。但是，我猜您已经添加了一些显式`System.gc()`调用以尝试更早地释放空间。

不要那样做！

虚拟机通常知道什么时候有很多潜在的垃圾需要收集……那是运行 GC 的最佳时间。并且您可以放心，GC 将立即运行，JVM 决定使用 OOME 进行救助。

如果你打电话给`System.gc()`自己，你可能只会导致虚拟机浪费 CPU 周期而没有什么有用的效果。

* * *

在大多数情况下，最好的策略是让 VM 根据需要安排 GC。空引用会有所帮助，但通常是不必要的。（坦率地说，一个 28x3 的整数数组占用的空间很小，可能不值得归零。）

# excel - 如何在水平条形图中添加垂直线？

> ID：14537881
> 
> 赞同：1
> 
> 时间：2013-01-26T14:32:24.843
> 
> 标签：excel, charts

我必须以日期为 x 轴来跟踪图表：

![水平条形图](../Images/5412aad2488f5c619836370605eee81a.png)

如何在今天的日期显示条形图顶部的白色垂直线？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T15:21:45.460

这是详细的分步指南： http: [//peltiertech.com/Excel/Charts/DummySeries.html#AddLine](http://peltiertech.com/Excel/Charts/DummySeries.html#AddLine)

我自己的示例文件作为示例共享：[https ://www.dropbox.com/s/8uyxqpiq2blv6t9/Charts_H-V_Lines.xlsx](https://www.dropbox.com/s/8uyxqpiq2blv6t9/Charts_H-V_Lines.xlsx)

希望这会有所帮助。

# java - 为什么在 addRow Object[] 之后我的 DefaultTableModel 为空？

> ID：14537884
> 
> 赞同：-1
> 
> 时间：2013-01-26T14:32:36.127
> 
> 标签：java, swing, jtable, defaulttablemodel

我试图通过首先获取填充的列表集合然后将它们转换为对象数组来填充我的 DefaultTableModel。

当我`addRow(Object[])`进入 DefaultTableModel 时，问题就开始了。它总是空的。更准确地说，DefaultTableModel 填充了行，但行是空的，没有列或任何东西。

我的主要目标是最终将 List 的内容放入 DefaultTableModel 中，以便能够使用`setModel()`.

源代码：

```
List<Inventory> list = app.dao.getInventoryList(false, 0);
Object[] o = null;

for (Inventory i : list) {
    o = new Object[6];
    o[0] = i.getID();
    o[1] = i.getGoodName();
    o[2] = i.getCreateTime();
    o[3] = i.getCreateUser();
    o[4] = i.getUpdateTime();
    o[5] = i.getUpdateUser();
    app.dtInventory.addRow(o);
}

app.inventoryTableView.setModel(app.dtInventory); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T14:45:21.387

As you already have a `List<Something>`, make it the internal data model of your implementation of `AbstractTableModel`. There's an example [here](https://stackoverflow.com/a/9134371/230513) using a `Map<String, String>`.

# visual-c++-6 - VC6：列出编译器错误

> ID：14537887
> 
> 赞同：0
> 
> 时间：2013-01-26T14:32:45.157
> 
> 标签：visual-c++-6

我需要更新一个以前同事用 VC6 编写的旧 dll 文件。我从未使用过 VC6。

我不想将项目更新到 VC2010，因为我担心我可能会在依赖项方面遇到真正的麻烦。

我现在尝试在 VC6 中编译旧项目，但编译器指出有 20 个错误。

到目前为止一切顺利，但我只是看不到错误在哪里，并且有 20 个错误的信息不会让我更进一步。

有没有办法让 VC6 告诉我编译错误到底在哪里？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:40:40.240

我现在明白了。我玩了清理，全部编译，然后再次清理并再次编译全部，最后（几轮之后）编译器不仅指出存在错误，而且指出错误/错误在哪里。

# syntax - 关系代数的语法

> ID：14537892
> 
> 赞同：1
> 
> 时间：2013-01-26T14:33:11.273
> 
> 标签：syntax, relational-algebra

我正在学习一些 SQL 并想了解一些 RA。理论上我了解操作，但写作要困难得多。

这里我有架构和数据：[http ://s3.amazonaws.com/spark-public/db/docs/pizza.sql](http://s3.amazonaws.com/spark-public/db/docs/pizza.sql)

我需要使用 RA 找到至少一名 20 岁以上女性吃过的所有比萨饼。我该怎么写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-19T10:23:59.410

\project_{pizza}((\select_{gender='female' and age>20}person) \join Eats)

# jpgraph - JPGraph linebar可以做到吗？

> ID：14537893
> 
> 赞同：1
> 
> 时间：2013-01-26T14:33:10.690
> 
> 标签：jpgraph

我试图让它与一个高级图表一起工作，但由于我找不到我需要的东西，我只打算包含一个基本版本，所以 ppl 可以对此发表评论。如果有人可以帮助我让它在这里工作，我可以从那里拿走它。

它是一个非常基本的折线图，我在 40 y 轴上放置了一条水平线

我所追求的是一条从 (0,0) 开始并始终指向 40 的线。让我试着说一下更好的说法，我不知道数组会有多长时间，它将来自数据库。所以我希望这条线随着另一个数组的增长而扩大并保持指向 40。

我附上了一张图片来说明我的意思。很抱歉我犯的错误英语不是我的第一语言。

感谢您提供的任何帮助。

干杯

编码：

```
<?php // content="text/plain; charset=utf-8"
require_once ('jpgraph/jpgraph.php');
require_once ('jpgraph/jpgraph_line.php');
require_once ("jpgraph/jpgraph_plotline.php");

$datay1 = array(10,15,8,25,34,55);

// Setup the graph
$graph = new Graph(640,480);
$graph->SetScale("textlin");

$theme_class=new UniversalTheme;

$graph->SetTheme($theme_class);
$graph->img->SetAntiAliasing(false);
$graph->title->Set('Filled Y-grid');
$graph->SetBox(false);

$graph->img->SetAntiAliasing();

$graph->yaxis->HideZeroLabel();
$graph->yaxis->HideLine(false);
$graph->yaxis->HideTicks(false,false);

$graph->xgrid->Show();
$graph->xgrid->SetLineStyle("solid");
$graph->xaxis->SetTickLabels(array('A','B','C','D'));
$graph->xgrid->SetColor('#E3E3E3');

$graph->AddLine(new PlotLine(HORIZONTAL,40,"black",1)); 

// Create the first line
$p1 = new LinePlot($datay1);
$graph->Add($p1);
$p1->SetColor("#6495ED");
$p1->SetLegend('Line 1');

$graph->legend->SetFrameWeight(1);

// Output line
$graph->Stroke();

?> 
```

[http://www.gratisimage.dk/image-1929_5103E42C.jpg](http://www.gratisimage.dk/image-1929_5103E42C.jpg)

# php - 使用 mysql 和 PHP 从服务器下载文件

> ID：14537894
> 
> 赞同：0
> 
> 时间：2013-01-26T14:33:12.823
> 
> 标签：php, mysql, file, download

我创建了一个 PHP 页面，允许用户在单击此链接时下载文件：

```
<a href="download_pdf.php?pubid=<?php echo $row_rsPublications['pubID']; ?>&amp;file=<?php echo $row_rsPublications['file']; ?>">Download File</a> 
```

我还创建了链接指向的下载页面：

```
<?php 

 if(isset($_GET['file'])) {

    $fileID = $_GET['pubid'];
    $filename= ($_GET['file']);
    $path = "admin/pubfiles/";
    $fullPath = $path . $filename;
    mysql_select_db($database_connDioceseofife, $connDioceseofife);
    $sql  = "SELECT file FROM publications WHERE pubID = $fileID";
    $result = mysql_query($sql) or die(mysql_error());
    $row = mysql_fetch_assoc($result);

    if($filename == NULL) {
        die('No file exists or the name is invalid!');
        }

    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header("Content-Disposition: attachment; filename=\"$filename\"");
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Pragma: public');
    readfile($fullPath);

}
?> 
```

现在我的问题是，当下载弹出窗口出现时，它读取文件是 0 字节。而且下载的时候打不开。我收到消息，它不是受支持的文件类型，或者它已损坏或损坏。

请任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:58:27.687

谢谢大家帮助我。进一步阅读后，我已经能够解决问题。我已经更新了我写的初始脚本。以上是现在的工作脚本。我所做的是包含`$fullpath = $path . $filename`然后`header("Content-Disposition: attachment; filename=\"$filename\"");`将 readfile 函数从`readfile($path)`更改为`readfile($fullpath)`. 再次感谢@nlsbshtr 和其他所有人的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T14:39:18.270

您没有对 $row 中的查询结果做任何事情。

使用 $row['file'] 获取实际文件本身。

# iphone - iOS6 中的 UISlider 自定义问题

> ID：14537896
> 
> 赞同：1
> 
> 时间：2013-01-26T14:33:32.860
> 
> 标签：iphone, ios, user-interface, ios6, uislider

我有一个自定义 UISlider，但在 iOS 6 中，setMinimumTrackImage 存在问题，可以看出它被调整大小而不是像 iOS 5 和 4 那样被剪裁。

我尝试`stretchableImageWithLeftCapWidth: 20 topCapHeight: 0];`在创建图像时添加可拉伸图像，但结果更糟，或多或少当拇指按钮达到 LeftCapWidth 大小时，图像从 MinimumTrackImage 切换到
MaximumTrackImage。我找到的解决方案是对 MinimumTrackImage 使用透明 png，将实际 MinimumTrackImage 用作 bgcolor。

我想知道其他人是否遇到过这个问题，以及他是否有适当的方法来解决它。提前致谢。

代码：

```
maxImage=[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:maxImageName ofType:@"png"]];
minImage=[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:minImageName ofType:@"png"]];

[_scaleSlider setMinimumTrackImage:minImage forState:UIControlStateNormal];
[_scaleSlider setMaximumTrackImage:maxImage forState:UIControlStateNormal]; 
```

![滑块的屏幕截图](../Images/6ba486bbd6ec8cef88a1fbd76f4b4221.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:02:21.927

使用 `resizableImageWithCapInsets:<#(UIEdgeInsets)#>` 代替 `stretchableImageWithLeftCapWidth:<#(NSInteger)#> topCapHeight:<#(NSInteger)#>`
它将解决您的问题

# ios - 获取 AvCaptureVideoDataOutput 的实际 NSString 可用VideoCVPixelFormatTypes

> ID：14537897
> 
> 赞同：10
> 
> 时间：2013-01-26T14:33:38.960
> 
> 标签：ios, nsstring, avcapturesession, avcapture, avcapturemoviefileoutput

我正在尝试在 AVFoundation 输出中找到可接受的格式：

```
self.theOutput=[[AVCaptureVideoDataOutput alloc]init];
    if ([self.theSession canAddOutput:self.theOutput])
        [self.theSession addOutput:self.theOutput]; 
```

然后我在之后插入一个断点：

```
po [self.theOutput availableVideoCVPixelFormatTypes] 
```

我明白了：

```
(NSArray *) $5 = 0x2087ad00 <__NSArrayM 0x2087ad00>(
875704438,
875704422,
1111970369
) 
```

如何获取这些格式类型的字符串值？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-27T12:24:53.483

在运行 iOS6 的 iPhone5 上，这里是可用的 AVCaptureVideoDataOuputVideoCVPixelFormatTypes：

kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange

kCVPixelFormatType_420YpCbCr8BiPlanarFullRange

kCVPixelFormatType_32BGRA

信用到期的信用，我找到了一种方法来获得这里支持的价值。 [https://gist.github.com/2327666](https://gist.github.com/2327666)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-08T11:49:15.400

## 用于调试的类别版本

### 作为 NSNumber 上的一个类别

```
#import <CoreVideo/CoreVideo.h> 

@implementation NSNumber (CVPixelFormatType)

- (NSString *)descriptivePixelFormat
{
    return @{
             @(kCVPixelFormatType_1Monochrome): @"kCVPixelFormatType_1Monochrome",
             @(kCVPixelFormatType_2Indexed): @"kCVPixelFormatType_2Indexed",
             @(kCVPixelFormatType_4Indexed): @"kCVPixelFormatType_4Indexed",
             @(kCVPixelFormatType_8Indexed): @"kCVPixelFormatType_8Indexed",
             @(kCVPixelFormatType_1IndexedGray_WhiteIsZero): @"kCVPixelFormatType_1IndexedGray_WhiteIsZero",
             @(kCVPixelFormatType_2IndexedGray_WhiteIsZero): @"kCVPixelFormatType_2IndexedGray_WhiteIsZero",
             @(kCVPixelFormatType_4IndexedGray_WhiteIsZero): @"kCVPixelFormatType_4IndexedGray_WhiteIsZero",
             @(kCVPixelFormatType_8IndexedGray_WhiteIsZero): @"kCVPixelFormatType_8IndexedGray_WhiteIsZero",
             @(kCVPixelFormatType_16BE555): @"kCVPixelFormatType_16BE555",
             @(kCVPixelFormatType_16LE555): @"kCVPixelFormatType_16LE555",
             @(kCVPixelFormatType_16LE5551): @"kCVPixelFormatType_16LE5551",
             @(kCVPixelFormatType_16BE565): @"kCVPixelFormatType_16BE565",
             @(kCVPixelFormatType_16LE565): @"kCVPixelFormatType_16LE565",
             @(kCVPixelFormatType_24RGB): @"kCVPixelFormatType_24RGB",
             @(kCVPixelFormatType_24BGR): @"kCVPixelFormatType_24BGR",
             @(kCVPixelFormatType_32ARGB): @"kCVPixelFormatType_32ARGB",
             @(kCVPixelFormatType_32BGRA): @"kCVPixelFormatType_32BGRA",
             @(kCVPixelFormatType_32ABGR): @"kCVPixelFormatType_32ABGR",
             @(kCVPixelFormatType_32RGBA): @"kCVPixelFormatType_32RGBA",
             @(kCVPixelFormatType_64ARGB): @"kCVPixelFormatType_64ARGB",
             @(kCVPixelFormatType_48RGB): @"kCVPixelFormatType_48RGB",
             @(kCVPixelFormatType_32AlphaGray): @"kCVPixelFormatType_32AlphaGray",
             @(kCVPixelFormatType_16Gray): @"kCVPixelFormatType_16Gray",
             @(kCVPixelFormatType_422YpCbCr8): @"kCVPixelFormatType_422YpCbCr8",
             @(kCVPixelFormatType_4444YpCbCrA8): @"kCVPixelFormatType_4444YpCbCrA8",
             @(kCVPixelFormatType_4444YpCbCrA8R): @"kCVPixelFormatType_4444YpCbCrA8R",
             @(kCVPixelFormatType_444YpCbCr8): @"kCVPixelFormatType_444YpCbCr8",
             @(kCVPixelFormatType_422YpCbCr16): @"kCVPixelFormatType_422YpCbCr16",
             @(kCVPixelFormatType_422YpCbCr10): @"kCVPixelFormatType_422YpCbCr10",
             @(kCVPixelFormatType_444YpCbCr10): @"kCVPixelFormatType_444YpCbCr10",
             @(kCVPixelFormatType_420YpCbCr8Planar): @"kCVPixelFormatType_420YpCbCr8Planar",
             @(kCVPixelFormatType_420YpCbCr8PlanarFullRange): @"kCVPixelFormatType_420YpCbCr8PlanarFullRange",
             @(kCVPixelFormatType_422YpCbCr_4A_8BiPlanar): @"kCVPixelFormatType_422YpCbCr_4A_8BiPlanar",
             @(kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange): @"kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange",
             @(kCVPixelFormatType_420YpCbCr8BiPlanarFullRange): @"kCVPixelFormatType_420YpCbCr8BiPlanarFullRange",
             @(kCVPixelFormatType_422YpCbCr8_yuvs): @"kCVPixelFormatType_422YpCbCr8_yuvs",
             @(kCVPixelFormatType_422YpCbCr8FullRange): @"kCVPixelFormatType_422YpCbCr8FullRange"
             }[self];
}

@end 
```

### 诊断输出示例

```
NSMutableArray *mutablePixelFormatTypes = [NSMutableArray array];
[captureOutput.availableVideoCVPixelFormatTypes enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    [mutablePixelFormatTypes addObject:[obj descriptivePixelFormat]];
}];
NSString *pixelFormats = [mutablePixelFormatTypes componentsJoinedByString:@",\n"];
NSLog(@"Available pixel formats:\n%@\n", pixelFormats); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-06-29T02:54:58.780

当您调用 availableVideoCVPixelFormatTypes 时，您将获得所有像素格式类型标签的十进制表示。如果将它们转换为十六进制，则可以将其中一些与[Apple 文档中列出的](http://developer.apple.com/library/ios/documentation/QuartzCore/Reference/CVPixelFormatDescriptionRef/index.html#//apple_ref/c/func/CVPixelFormatDescriptionRegisterDescriptionWithPixelFormatType)标签匹配。其余的你必须将你得到的十六进制值转换为 ASCII 字符以最终匹配标签。

**例如：**

(十进制) ------> (十六进制) ---> (ASCII)

875704438 -> 34323076 -> 420v

875704422 -> 34323066 -> 420f

1111970369 -> 42475241 -> BGRA

我发现这个网站“ [ASCII to Hex](http://www.asciitohex.com/) ”很有用。

# ruby - 运行rails服务器时出现linecache错误

> ID：14537903
> 
> 赞同：2
> 
> 时间：2013-01-26T14:34:14.763
> 
> 标签：ruby, ruby-on-rails-3, gem

运行“rails server”命令时出现以下错误。这是错误：

```
maruf@phoenix:/media/resource/RoR/project$ rails server
/usr/local/rvm/gems/ruby-1.9.2-p320@project/bundler/gems/linecache19-0.5.13-c0804efc995a/lib/tracelines19.rb:12:in `require': no such file to load -- /usr/local/rvm/gems/ruby-1.9.2-p320@project/bundler/gems/linecache19-0.5.13-c0804efc995a/lib/../lib/trace_nums19 (LoadError)
from /usr/local/rvm/gems/ruby-1.9.2-p320@project/bundler/gems/linecache19-0.5.13-c0804efc995a/lib/tracelines19.rb:12:in `rescue in <module:TraceLineNumbers>'
from /usr/local/rvm/gems/ruby-1.9.2-p320@project/bundler/gems/linecache19-0.5.13-c0804efc995a/lib/tracelines19.rb:8:in `<module:TraceLineNumbers>'
from /usr/local/rvm/gems/ruby-1.9.2-p320@project/bundler/gems/linecache19-0.5.13-c0804efc995a/lib/tracelines19.rb:6:in `<top (required)>'
from /usr/local/rvm/gems/ruby-1.9.2-p320@project/bundler/gems/linecache19-0.5.13-c0804efc995a/lib/linecache19.rb:69:in `require'
from /usr/local/rvm/gems/ruby-1.9.2-p320@project/bundler/gems/linecache19-0.5.13-c0804efc995a/lib/linecache19.rb:69:in `<top (required)>'
from /usr/local/rvm/gems/ruby-1.9.2-p320@project/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require'
from /usr/local/rvm/gems/ruby-1.9.2-p320@project/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
from /usr/local/rvm/gems/ruby-1.9.2-p320@project/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `each'
from /usr/local/rvm/gems/ruby-1.9.2-p320@project/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `block in require'
from /usr/local/rvm/gems/ruby-1.9.2-p320@project/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `each'
from /usr/local/rvm/gems/ruby-1.9.2-p320@project/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `require'
from /usr/local/rvm/gems/ruby-1.9.2-p320@project/gems/bundler-1.2.3/lib/bundler.rb:128:in `require'
from /media/resource/RoR/project/config/application.rb:7:in `<top (required)>'
from /usr/local/rvm/gems/ruby-1.9.2-p320@project/gems/railties-3.2.11/lib/rails/commands.rb:53:in `require'
from /usr/local/rvm/gems/ruby-1.9.2-p320@project/gems/railties-3.2.11/lib/rails/commands.rb:53:in `block in <top (required)>'
from /usr/local/rvm/gems/ruby-1.9.2-p320@project/gems/railties-3.2.11/lib/rails/commands.rb:50:in `tap'
from /usr/local/rvm/gems/ruby-1.9.2-p320@project/gems/railties-3.2.11/lib/rails/commands.rb:50:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

这是宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql2'
gem 'zclip-rails'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
  gem "therubyracer"
  gem "less-rails" #Sprockets (what Rails 3.1 uses for its asset pipeline) supports   LESS
  gem "twitter-bootstrap-rails"
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger'

gem 'linecache19', '>= 0.5.13', :git => 'https://github.com/robmathews /linecache19-0.5.13.git'
gem 'ruby-debug-base19x', '>= 0.11.30.pre10'
gem 'ruby-debug-ide', '>= 0.4.17.beta14' 
```

这是“gem list”命令的输出：

```
actionmailer (3.2.11)
actionpack (3.2.11)
activemodel (3.2.11)
activerecord (3.2.11)
activeresource (3.2.11)
activesupport (3.2.11)
archive-tar-minitar (0.5.2)
arel (3.0.2)
builder (3.0.4)
bundler (1.2.3)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.4.0)
columnize (0.3.6)
commonjs (0.2.6)
debugger-linecache (1.1.2)
debugger-ruby_core_source (1.1.7)
erubis (2.7.0)
execjs (1.4.0)
hike (1.2.1)
i18n (0.6.1)
journey (1.0.4)
jquery-rails (2.2.0)
json (1.7.6)
less (2.2.2)
less-rails (2.2.6)
libv8 (3.11.8.13 x86-linux)
linecache19 (0.5.12)
mail (2.4.4)
mime-types (1.19)
multi_json (1.5.0)
mysql2 (0.3.11)
polyglot (0.3.3)
rack (1.4.4)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.2)
rails (3.2.11)
railties (3.2.11)
rake (10.0.3)
rbx-require-relative (0.0.9)
rdoc (3.12)
ref (1.0.2)
ruby-debug-base19 (0.11.25)
ruby-debug-base19x (0.11.30.pre10)
ruby-debug-ide (0.4.17.beta16, 0.4.17.beta14)
ruby-debug19 (0.11.6)
ruby_core_source (0.1.5)
sass (3.2.5)
sass-rails (3.2.6)
sprockets (2.2.2)
therubyracer (0.11.3)
thor (0.17.0)
tilt (1.3.3)
treetop (1.4.12)
twitter-bootstrap-rails (2.2.0)
tzinfo (0.3.35)
uglifier (1.3.0)
zclip-rails (0.0.1) 
```

我在用

> > Rails 3.2.11 和 ruby​​ 1.9.2p320（2012-04-20 修订版 35421）[i686-linux]

我该如何解决这个问题来运行服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:06:13.957

Gemfile 中列出的 linecache19 版本似乎比“gem list”显示的版本更新。您是否尝试过运行“捆绑更新”？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T02:48:54.250

我通过将 trace_nums19.bundle 复制到它丢失的文件夹中解决了同样的问题。您可以在 linecache gem 的 lib 文件夹中的某个位置找到此文件

# bison - 野牛错误处理

> ID：14537906
> 
> 赞同：2
> 
> 时间：2013-01-26T14:34:37.600
> 
> 标签：bison, yacc, parser-generator

我对 Bison 的错误处理有疑问。我有以下语法（我只删掉了相关部分）。如果字符串“ConfigParam”被解析，Flex 将其令牌发送到 Bison 并返回终端符号“KW_CONFIGPARAM”。IDENT 是指向 C++ 字符串对象的指针。

```
statementlist   : statement ';'               { $$ = new string("statementlist"); }
                | statementlist statement ';' { $$ = new string("statementlist"); }
;
statement       : KW_CONFIGPARAM IDENT        { $$ = new string("statement"); /* use $2, IDENT is used in main program */ }
; 
```

我为 IDENT 之类的字符串指定了以下析构函数。

%destructor { printf ("free at line %d: %s\n",@$.first_line, $$->c_str()); 删除（$$）；}

现在我有以下输入。第一行有效，第二行无效（缺少标识符）：

```
ConfigParam p;
ConfigParam; 
```

输出：

```
In input 2:12 - 2:12 : syntax error
free at line 2: p
free at line 1: statementlist 
```

由于第二行中的错误，Bison 抱怨，返回语法错误并调用解析堆栈上所有对象的析构函数。现在我不明白为什么要调用第一行中标识符“p”的析构函数？属于第一行，解析成功。问题是 p 在主程序中使用，不应该被 Bison 删除。

如果我选择作为（无效）语句，任意字符串（“foo”） p 不会被 Bison 删除。

```
ConfigParam p;
foo;

In input 2:1 - 2:3 : syntax error
free at line 1: statementlist
free at line 2: foo 
```

为什么这行得通？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:47:43.533

在不查看更多文件的情况下很难说出确切的问题，但事实并非如此

> 第一行已成功解析，应该从堆栈中弹出

错误点的堆栈如下所示：

```
statementlist KW_CONFIGPARAM 
```

正如野牛所报告的那样，其中`statementlist`是通过减少第一行而产生的。

您似乎没有为 statement_list 指定值；如果您的摘录是字面的，那么它将被编译为就好像它已经编写过一样：

```
statementlist   : statement ';'                 {$0 = $1;} 
```

我不知道对应的值`statement`是什么，但当然可以想象它包含字符串`"p"`。这取决于您`$0`在`{ /* do some stuff, create a new ConfigParam object */ }`.

（一旦很明显它有点接近正确答案，就从评论中移开。）我的另一个想法是：也许你已经让你所有的终端和非终端都具有触发该析构函数的类型。`yylval`也许您的词法分析器在返回时不会修改`KW_CONFIGPARM`。在这种情况下，野牛解析器无法知道这`yylval`是无关紧要的，因此它将使用剩下的`yylval`（这是指向 的指针`"p"`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T00:46:13.780

@rici：非常感谢，您为我指明了正确的方向。我已经写了

```
%token <str>    STRING    IDENT       NUMBER
                KW_CONFIGPARAM 
```

但正确的当然是......

```
%token <str>    STRING    IDENT       NUMBER
%token          KW_CONFIGPARAM 
```

啊！

@rici：你成就了我的一天！！！

# javascript - 以所见即所得的方式渲染 Youtube 视频

> ID：14537910
> 
> 赞同：1
> 
> 时间：2013-01-26T14:34:58.717
> 
> 标签：javascript, parsing, youtube, wysiwyg

我正在使用 JavaScript 从头开始​​创建自定义的所见即所得。所有这些都工作正常（比如插入图片），但是当我点击提交并将内容添加到我的数据库时，YouTube 视频会像这样插入：

`<div><br></div><div><br><div><br></div></div>`

我创建了一个所见即所得解析为的 JavaScript 文件：

```
function iImage(){
    var imgSrc = prompt('Enter image location', '');
    if (imgSrc != null){
        richTextField.document.execCommand('insertimage', false, imgSrc);
    }
}
function iVideo(){
    var urlPrompt = prompt("Enter Youtube Url:", "http://");
    var urlReplace = urlPrompt.replace("watch?v=", "embed/");
    var embed = '<iframe src="'+urlReplace+'" allowfullscreen="true" width="480" frameborder="0" height="390">';
    if($.browser.msie){
        richTextField.document.createRange().pasteHTML(embed);
    }else{
        richTextField.document.execCommand("Inserthtml", false, embed);
    }
}
function submit_form(){
    var theForm = document.getElementById("blogForm");
    theForm.elements["blogbody"].value = window.frames['richTextField'].document.body.innerHTML;
    theForm.submit();
} 
```

您可以看到我的`iImage`功能有效，但我的`iVideo`.

任何人都可以帮忙吗？

只是为了让你知道我已经将我的脚本编辑到这个......

```
function iVideo(){
    var urlPrompt = prompt("Enter Youtube Url:", "http://");
    var urlReplace = urlPrompt.replace("http://www.youtube.com/watch?v=", "http://www.youtube.com/embed/");
    var embed = '<iframe src="'+urlReplace+'" allowfullscreen="true" width="480" frameborder="0" height="390"></iframe>';
    if($.browser.msie){
        richTextField.document.createRange().pasteHTML(embed);
    }else{
        richTextField.document.execCommand("Inserthtml", false, embed);
    }
} 
```

但仍然没有喜悦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:36:56.467

我明白了。这是下面的代码

```
function iVideo(){
    var urlPrompt = prompt("Enter Youtube Url:", "http://");
    var urlReplace = urlPrompt.replace("watch?v=", "embed/");
    var embed = '<iframe title="YouTube video player" src="'+urlReplace+'" allowfullscreen="true" width="480" frameborder="0" height="390">';
    if(embed != null){
        richTextField.document.execCommand("Inserthtml", false, embed);`
    }
} 
```

它现在在我的网站上工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T00:19:48.427

Ultimate 您看不到 Youtube.com 的原因是因为它会在您上传时添加。在您编写要上传到您网站的内容的表单中，您将单击添加视频链接，该链接将欺骗代码中的第一行以弹出一个窗口，要求您提交您的 Youtube 视频链接，看起来有些东西像[http://youtube.com/theVideoLink](http://youtube.com/theVideoLink)。然后，您添加的链接将放置在您拥有`src="'+urlReplace+'"`的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T14:43:35.477

好吧，我是 javascript 的初学者，但我看不到任何地方将 youtube.com 添加到其中，我看到的只是手表？v=。正如我所说，初学者的意见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T15:01:06.587

您是否可以先尝试如下所示的硬编码/静态版本？- 可能只是语法或未设置的变量之一。

```
<script type="text/javascript">
   function iVideo(){
      var youtubeiframe='<iframe type="text/html" width="640" height="385" src="http://www.youtube.com/embed/AsbagZvkrbo" frameborder="0"></iframe>';
      richTextField.document.execCommand ("insertHTML", false, youtubeiframe);
   }
</script> 
```

# actionscript-3 - TouchEvent.Touch 和 MouseEvent.Click 之间是否有任何技术或处理差异？

> ID：14537911
> 
> 赞同：2
> 
> 时间：2013-01-26T14:35:03.823
> 
> 标签：actionscript-3, air, flash-cs6

我实际上没有得到`MouseEvent.Click`事件和`TouchEvent.Touch"`事件之间的区别`action script`。

两者都在基于触摸的系统中提供相同的输出。

我想知道它们在处理用户事件方面有何不同。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T16:22:57.020

技术：在触摸屏上，TouchEvent 用于处理需要同时在显示屏上按下一个以上手指的操作。MouseEvent 用于处理只需要一根手指的动作。

处理器：TouchEvent 比 MouseEvent 更占用处理器资源。

因此，您应该将 MouseEvent 用于单点触控操作，并将 TouchEvent（或 GestureEvent）用于多点触控操作。

# forms - 嵌入表单的持久性

> ID：14537923
> 
> 赞同：5
> 
> 时间：2013-01-26T14:36:22.637
> 
> 标签：forms, symfony, doctrine-orm, object-persistence

我正在尝试使用[本](http://symfony.com/doc/2.0/cookbook/form/form_collections.html)指南设置一些嵌入式表单。我在我的应用程序中设置了两个模型，课程和评估。

每个课程可以有多个评估。

我设置了一个表单，用户可以在其中创建课程以及该课程中所需的任意数量的评估。提交表单后，它会成功创建课程记录和所有评估记录，但是创建的评估记录未链接到父课程（课程 ID 字段留空）。

任何人都可以帮忙吗？

任何建议表示赞赏。

谢谢。

我的模型类是这样设置的：

评估：

```
class Evaluation
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\ManyToOne(targetEntity="Lesson", inversedBy="evaluations")
     * @ORM\JoinColumn(name="lesson_id", referencedColumnName="id")
     */
    protected $lesson;

/**
     * Set lesson
     *
     * @param \LessonBundle\Entity\Lesson $lesson
     * @return Evaluation
     */
    public function setLesson(\LessonBundle\Entity\Lesson $lesson = null)
    {
        $this->lesson = $lesson;

        return $this;
    }

    /**
     * Get lesson
     *
     * @return \LessonBundle\Entity\Lesson 
     */
    public function getLesson()
    {
        return $this->lesson;
    }
} 
```

和教训：

```
class Lesson
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\OneToMany(targetEntity="Evaluation", mappedBy="lesson", cascade={"persist"})
     */
    protected $evaluations;

    public function __construct()
    {
        $this->evaluations = new ArrayCollection();
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Add evaluations
     *
     * @param \DS\LessonBundle\Entity\Evaluation $evaluations
     * @return Lesson
     */
    public function addEvaluation(\LessonBundle\Entity\Evaluation $evaluations)
    {
        $this->evaluations[] = $evaluations;

        return $this;
    }

    /**
     * Remove evaluations
     *
     * @param \DS\LessonBundle\Entity\Evaluation $evaluations
     */
    public function removeEvaluation(\LessonBundle\Entity\Evaluation $evaluations)
    {
        $this->evaluations->removeElement($evaluations);
    }

    /**
     * Get evaluations
     *
     * @return \Doctrine\Common\Collections\Collection 
     */
    public function getEvaluations()
    {
        return $this->evaluations;
    }

    public function setEvaluations(ArrayCollection $evaluations)
    {
        foreach ($evaluations as $evaluation) {
            $evaluation->setLesson($this);
        }

        $this->evaluations = $evaluations;
    }
} 
```

我的控制器方法：

```
public function newAction()
{
$lesson = new Lesson;

$evaluation1 = new Evaluation();
$lesson->getEvaluations()->add($evaluation1);
$form    = $this->createForm(new LessonType(), $lesson);
$request = $this->getRequest();

if ($request->getMethod() == 'POST') {
    $form->bindRequest($request);

    if ($form->isValid()) {

        $em = $this->getDoctrine()->getEntityManager();
        $em->persist($lesson);
        $em->flush();

        return $this->redirect($this->generateUrl('lesson_list'));
    }
}

return $this->render('LessonBundle:Lesson:new.html.twig', array('form' => $form->createView())); 
```

}

我的表格：

```
class LessonType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('evaluations', 'collection', array(
                                            'type' => new EvaluationType(),
                                            'allow_add' => true,
                                            'by_reference' => false,
                                            ));
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'LessonBundle\Entity\Lesson',
        );
    }

    public function getName()
    {
        return 'Lesson';
    }
} 
```

和：

```
class EvaluationType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('report');
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'LessonBundle\Entity\Evaluation',
        );
    }

    public function getName()
    {
        return 'Evaluation';
    }
} 
```

最后，我的表单树枝模板：

```
{% extends '::base.html.twig' %}

{% block content %}
<form class="vertical" action="" method="post" {{ form_enctype(form) }}>
    {{ form_errors(form) }}

    <ul class="collectionholder" data-prototype="{{ form_widget(form.evaluations.vars.prototype)|e }}">
    {% for evaluation in form.evaluations %}

        <li>{{ form_row(evaluation) }}</li>

    {% endfor %}
    </ul>
    {{ form_rest(form) }}
    <input type="submit" />
</form>
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T16:07:02.853

在您的课程实体中添加：

```
/**
 * Add evaluations
 *
 * @param \DS\LessonBundle\Entity\Evaluation $evaluations
 * @return Lesson
 */
public function addEvaluation(\LessonBundle\Entity\Evaluation $evaluations)
{
    $this->evaluations[] = $evaluations;

    $evaluations->setLesson($this);

    return $this;
} 
```

# java - ListView setBackgroundResource 无法正常工作

> ID：14537932
> 
> 赞同：0
> 
> 时间：2013-01-26T14:38:28.350
> 
> 标签：java, android, background, android-viewbinder

我在项目中更改背景颜色时遇到问题。我只是想用 ViewBinder 中的条件更改列表背景颜色。但是背景的颜色没有改变。

我的视图绑定器

```
public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
LinearLayout ll = (LinearLayout) findViewById(R.id.listViewTopLinearLayout);
String voted = cursor.getString(VOTED_COLLUMN_INDEX);

    if (columnIndex == cursor.getColumnIndex(AssetsTableHelper.COLUMN_VOTED)) {
        boolean is_checked = voted.equals("true");
        if (is_checked) {
            ((View) ll.getParent()).setBackgroundResource(R.color.votedColor);
                ((View) view.getParent()).setBackgroundResource(R.color.votedColor);
        } else {
            ((View) view.getParent()).setBackgroundResource(R.color.notVotedColor);
        }
        return true;
    }
    return false;
}; 
```

创建

```
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
integrator = new IntentIntegrator(this);
datasource = new AssetsDataSource(this);
Cursor cursor = datasource.getCursorForAllAssets();
adapter = new SimpleCursorAdapter(this, R.layout.listview_item_row,cursor, UI_BINDING_FROM,UI_BINDING_TO, 0);
adapter.setViewBinder(new CustomViewBinder());
setListAdapter(adapter); 
```

List_item_row.xml

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/tvSurname"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:textColor="#000000"
        android:textSize="20sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/tvName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:textColor="#000000"
        android:layout_marginLeft="5dp"
        android:textSize="20sp"
        android:textStyle="bold" />
</LinearLayout>

<TextView
    android:id="@+id/tvHomeNumber"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:textColor="#000000"
    android:textSize="15sp"
    android:textStyle="bold" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T09:41:13.160

我认为，问题在于 setBackgroundResource(R.color.votedColor) 的参数。参数应该是资源 id，例如一些 R.drawable.votedColor。看看[setBackgroundResource](http://developer.android.com/reference/android/view/View.html#setBackgroundResource%28int%29)并制作一个可绘制的 xml 文件，看看[Drawable Resource](http://developer.android.com/guide/topics/resources/drawable-resource.html)。

# c - 谁将数字转换为 2 的补码形式并存储在内存位置？

> ID：14537934
> 
> 赞同：0
> 
> 时间：2013-01-26T14:38:42.303
> 
> 标签：c, assembly, compiler-construction

当编译如下所示的一行代码（X86）时，会生成相应的汇编指令。895 是一个 -ve 数字，以 2 的补码形式存储在 %esp 指向的内存位置。

```
 int a = -895  --> compiler ---> movl    $-895, 24(%esp) 
```

我的疑问是，汇编程序是直接将-895 转换为2 的补码形式并生成机器指令，还是CPU 的ALU 在执行以-895 作为参数的相应机器指令时是否并存储在内存位置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T14:40:48.920

当然它发生在编译（汇编）时，否则`movl`必须生成不只是`movl`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T14:41:44.517

汇编器做到了。它很可能首先将 895 转换为二进制，然后将其取反，结果进入编译代码。取反显然发生在 CPU 中（整个汇编程序的执行也是如此），最有可能作为单个指令（例如`NEG register`）。

# python - Python引发错误正确使用

> ID：14537936
> 
> 赞同：2
> 
> 时间：2013-01-26T14:39:03.107
> 
> 标签：python, exception, typechecking, raise

**说明**：

我读过很多关于在 python 中检查值类型的意见，大多数人说你不应该检查类型，而是使用 try 和 except。我想澄清几件事。

**问题**：

当我有这样的方法时：

```
def set_age(self, age):
    self._age = age 
```

我不能让用户传递除 int 以外的任何类型，因为稍后在代码中它可能会导致一些更难调试的错误。根据 Python 方法，我无法检查类型。那么我应该如何以正确的方式尝试呢？

```
def set_age(self, age):
    try:
        age = int(age)
    except TypeError:
        raise TypeError('First parameter must be of int type.')
    self._age = age 
```

要不就

```
def set_age(self, age):
    self._age = int(age) 
```

并让 Python 自行引发错误。

我知道这可能是愚蠢的问题，我只是想确定一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:41:49.267

如果它不是整数，Python 将引发适当的错误，因此无需将您自己的错误置于其顶部。

不过，让我们退后一步，因为这里还有其他问题。getter 和 setter 真的是 unpythonic - 要么只使用属性，要么使用[属性](http://docs.python.org/3/library/functions.html#property)。

在这种情况下，我认为您仍然在以错误的方式思考。我们不在 Python 中进行类型检查的原因是因为我们不应该关心某个东西是什么类型，只要它在给定的情况下可以工作。让所有东西都成为你认为应该的类型，本质上是类型检查。

你说它会使调试变得更加困难，但这并不是大多数人真正拥有的经验。鸭子打字旨在让任何可以完成这项工作的东西都能完成这项工作。将一切都转换为`int`限制您的程序。问题不在这里，问题在于您的代码传递了一些对您的类没有意义的东西。以我的经验，这实际上是一件非常罕见的事情——你不会倾向于在课堂上随意扔东西，看看有什么效果。

所以，我在这里的建议是你使用一个属性——只是做`x.age = ...`而不是使用`set_age()`或类似的东西。如果你*真的*需要一个`int`（比如，只有整数才有意义），那么使用一个属性并`int()`在 setter 中调用，如果发生错误，则将错误传播给调用者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T14:43:57.893

python 的一个信条是“请求宽恕胜于许可”。很多时候，你的函数调用所产生的异常足以告诉你的函数的调用者出了什么问题。

话虽如此，在某些情况下，我会抛出一个更具体的异常，其中调用者的语义并不完全一致。我能想到的一个例子是我正在检查一个 json 响应并且我在字典的一个元素上得到一个“关键错误”。这通常意味着我发出的任何请求都失败了，因此我找不到我需要的数据。反过来，我会根据我的功能（例如“查询失败”）在语义上抛出一些东西。

大多数时候，虽然被调用函数“类型错误”或“io 错误”抛出的异常对我的函数调用者来说应该是完全有意义的，所以我不必费心去捕捉和重新抛出。

# android - 从 txt 填充数据库的替代方法

> ID：14537937
> 
> 赞同：1
> 
> 时间：2013-01-26T14:39:06.413
> 
> 标签：android, sqlite, android-sqlite

我有一个 SQLite 数据库，我通过从 res/raw/ 中的 txt 文件中读取行来填充它。它工作正常，但是当应用程序第一次运行时，加载数据库中的所有内容需要几分钟。有没有更快的方法在数据库中加载数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:42:06.900

最好的办法是加载一次，然后将文件复制到资产文件夹中。从那里，您只需在第一次尝试创建数据库时将其复制到正确的位置。[这个问题](https://stackoverflow.com/questions/9109438/how-to-use-an-existing-database-with-an-android-application/9109728#9109728)显示了如何做到这一点。

```
//Copy the database from assets
private void copyDataBase() throws IOException
{
    InputStream mInput = mContext.getAssets().open(DB_NAME);
    String outFileName = DB_PATH + DB_NAME;
    OutputStream mOutput = new FileOutputStream(outFileName);
    byte[] mBuffer = new byte[1024];
    int mLength;
    while ((mLength = mInput.read(mBuffer))>0)
    {
        mOutput.write(mBuffer, 0, mLength);
    }
    mOutput.flush();
    mOutput.close();
    mInput.close();
} 
```

# c# - 编码为 HTML 字符实体的方法

> ID：14537939
> 
> 赞同：0
> 
> 时间：2013-01-26T14:39:31.500
> 
> 标签：c#, .net

任何 C# 方法可以转换为 HTML 字符实体字符串？

基本上，我需要对 URL 进行编码。使用 HttpUtility.UrlEncode() 我得到

```
http://server/sites/blank/_vti_bin/UploadService/UploadService.svc/Upload/http%3a%2f%2fserver%2fsites%2fblank%2fdoclib1%2ffile.pdf 
```

问题是，这会导致我的服务出现“400 Bad Request”。

修复是替换`%3A`为`&#x3A;`等等，有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T09:50:06.907

我相信编码 URL 以通过另一个 URL 传输的最佳方法是使用 **Uri.EscapeDataString()**。问题可能是编码字符串中的小写字母（%3a 而不是 %3A）。

```
var escdata = Uri.EscapeDataString(@"http://server/sites/blank/doclib1/file.pdf?test=a+b c");
//  http%3A%2F%2Fserver%2Fsites%2Fblank%2Fdoclib1%2Ffile.pdf%3Ftest%3Da%2Bb%20c

var escuris = Uri.EscapeUriString(@"http://server/sites/blank/doclib1/file.pdf?test=a+b c");
//  http://server/sites/blank/doclib1/file.pdf?test=a+b%20c

var urlencd = HttpUtility.UrlEncode(@"http://server/sites/blank/doclib1/file.pdf?test=a+b c");
//  http%3a%2f%2fserver%2fsites%2fblank%2fdoclib1%2ffile.pdf%3ftest%3da%2bb+c

var urlpenc = HttpUtility.UrlPathEncode(@"http://server/sites/blank/doclib1/file.pdf?test=a+b c");
//  http://server/sites/blank/doclib1/file.pdf?test=a+b c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T14:57:53.520

我不知道会执行此操作的内置函数，但这是一个快速而简单的解决方案：

```
 string s = "http://myurl.com/whatever";

 StringBuilder sb = new StringBuilder();
 foreach (char c in s)
 {
     sb.Append(String.Format("&#x{0:X2};", (uint)c));
 }

 var result = sb.ToString(); 
```

作为使用 LINQ 的单线器：

```
string s = "http://myurl.com/whatever";
string result = String.Join("", s.SelectMany(c=> String.Format("&#x{0:X2};", (uint)c)).ToArray()); 
```

# android - 如何从播放列表中获取曲目数量？

> ID：14537942
> 
> 赞同：3
> 
> 时间：2013-01-26T14:39:53.310
> 
> 标签：android, audio, cursor, playlist, mediastore

谁能告诉我如何获取播放列表的成员数？我试过这个但它不起作用：

```
int PlayListCount = cursor.getInt(cursor.getColumnIndex(MediaStore.Audio.Playlists._COUNT)); 
```

它抛出这个异常：

```
llegalStateException: Couldn't read row 0, col -1 from CursorWindow.
Make sure the Cursor is initialized correctly before accessing data from it. 
```

# ruby-on-rails - ruby on rails：为什么缺少 javascript/coffeescript 资产？

> ID：14537943
> 
> 赞同：0
> 
> 时间：2013-01-26T14:39:57.590
> 
> 标签：ruby-on-rails, asset-pipeline

我在`places.js.coffee`查看位置控制器的表单页面时在文件内部工作。出于某种原因，我对 CofeeScript 文件所做的任何更改都不会反映在浏览器中。我尝试重新启动服务器，运行`rake assets:clean`并手动删除内容`/tmp/cache/assets/`，但没有任何效果。

我查看了终端中 rails 服务器的输出，发现了一些奇怪的东西：

```
Started GET "/assets/offers.js?body=1" for 127.0.0.1 at 2013-01-26 09:35:56 -0500
Served asset /offers.js - 304 Not Modified (0ms)

Started GET "/assets/partners.js?body=1" for 127.0.0.1 at 2013-01-26 09:35:56 -0500
Served asset /partners.js - 304 Not Modified (0ms)

Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-01-26 09:35:56 -0500
Served asset /application.js - 304 Not Modified (6ms) 
```

`places.js`无处可寻！为什么是这样？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:25:35.143

确保您的`app/assets/javascripts/application.js`文件包含以下行：

```
//= require places 
```

# c# - 创建数据绑定不显示来自 AppResources 的更新字段

> ID：14537946
> 
> 赞同：0
> 
> 时间：2013-01-26T14:40:06.980
> 
> 标签：c#, xaml, visual-studio-2012, windows-phone-8

我有两个 resx

```
AppResources.resx
AppResources.zh-Hant.resx 
```

就这样发生了。我无法访问使用“搜索属性”面板更新的字符串。

```
Text="{Binding LocalizedResources.introText, Mode=OneWay, Source={StaticResource LocalizedStrings}}" 
```

但我可以通过代码访问它。

```
AppResources.introText; 
```

我怀疑我决定用 AppResources.zh-Hans.resx 迁移 AppResources.resx
然后我继续删除这个文件

```
-AppResources.zh-Hans.resx 
```

然后我转到项目属性并禁用英语支持。
但我发现它一直作为默认值返回（这很烦人）。
过了一会儿，我发现我可以通过 xaml 的方式访问新添加的字符串。
我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T14:53:18.750

问题解决了。
我需要建立项目......
我很傻。

# html - CSS3 动画和过渡一起

> ID：14537947
> 
> 赞同：1
> 
> 时间：2013-01-26T14:40:10.000
> 
> 标签：html, css, css-transitions

这是我为显示我的情况而创建的测试

[http://jsfiddle.net/2vN2S/](http://jsfiddle.net/2vN2S/)

```
/* Setting up the "myAnim1" for all browser types
-------------------------------------------------*/
 @keyframes myAnim1 {
    0% {
        background-color: #212121;
    }
    50% {
        background-color: #31f4dc;
    }
    100% {
        background-color: #212121;
    }
}
/* Firefox */
 @-moz-keyframes myAnim1 {
    0% {
        background-color: #212121;
    }
    50% {
        background-color: #31f4dc;
    }
    100% {
        background-color: #212121;
    }
}
/* Safari and Chrome */
 @-webkit-keyframes myAnim1 {
    0% {
        background-color: #212121;
    }
    50% {
        background-color: #31f4dc;
    }
    100% {
        background-color: #212121;
    }
}
/* Opera */
 @-o-keyframes myAnim1 {
    0% {
        background-color: #212121;
    }
    50% {
        background-color: #31f4dc;
    }
    100% {
        background-color: #212121;
    }
}
/* Attaching the animations to the elements
Notice the difference between timing!!
-------------------------------------------------*/

body {
    display:inline-block;

    -webkit-transition: 0.3s ease;
    -moz-transition: 0.3s ease;
    -ms-transition: 0.3s ease;
    -o-transition: 0.3s ease;
    transition: 0.3s ease;

    animation:myAnim1  5s steps(2, end);
    -moz-animation:myAnim1 5s steps(2, end) infinite;
    -webkit-animation:myAnim1 5s steps(2, end) infinite;
} 
```

正如你所看到的，我已经设置了一个步进动画和一个身体背景的过渡。我期望的是在动画的每个步骤之间创建 0.3 秒的“平滑度”（缓动）的过渡，但是，看起来动画完全控制了背景颜色。

有没有办法以简单的方式创建类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:47:06.407

增加步数有效`steps(36,end)`

工作小提琴[http://jsfiddle.net/DeepakKamat/y2vWp/4/](http://jsfiddle.net/DeepakKamat/y2vWp/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-04T12:58:20.873

~~如果元素的状态发生变化，则 CSS 转换触发，例如它被`:hover`编辑或从 JS 获得一个新类。CSS 动画的步骤不是状态变化，因此它们不会触发转换。~~也许这个解释是错误的，问题是一个属性不能同时被不同的机制激活。

如果需要步骤之间的平滑过渡，可以使用普通的线性动画代替步骤动画，如下所示：

```
@keyframes myAnim1 {
    0% {
        background-color: #212121;
    }
    45% {
        background-color: #212121;
    }
    50% {
        background-color: #31f4dc;
    }
    95% {
        background-color: #31f4dc;
    }
    100% {
        background-color: #212121;
    }
} 
```

（[编辑 JSFiddle 示例](http://jsfiddle.net/2vN2S/15/)）

# php - Php SMTP 错误 10060：无法连接到服务器

> ID：14537948
> 
> 赞同：0
> 
> 时间：2013-01-26T14:40:16.263
> 
> 标签：php, html, smtp

我有使用 SMTP 连接发送电子邮件的 php 代码；两周前它工作得很好。但突然停止工作。不知道是什么问题。

> **SMTP -> 错误**：无法连接到服务器：连接尝试失败，因为连接方在一段时间后没有正确响应，或者已建立的连接失败，因为连接的主机没有响应。(10060) SMTP 错误：无法连接到 SMTP 主机。

```
//start  mailing function
require_once('PHPMailer_v5.1\class.phpmailer.php');
$mail  = new PHPMailer();   
$mail->IsSMTP();
//MAIL config
$mail->SMTPAuth   = true;
$mail->SMTPDebug  = 1;
$mail->Host       = "localhost";      // set as the SMTP server
$mail->Port       = 25;
$mail->Username   = "myemail@web.com";  // localhost email username
$mail->Password   = "XXXX";            
//End mail config
$mail->From       = $sender_email;
$mail->FromName   = $sender_user_name;
$mail->Subject    = $subject;
$mail->MsgHTML($body);
$mail->AddAddress($to,$to_name);
$mail->IsHTML(true); // send as HTML
if(!$mail->Send()) {//to see if we return a message or a value bolean
    echo "<p>Confirmation Mail delivery failed due to invalid email specified !</p>";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T06:08:30.650

这是由于

```
$mail->Host       = "localhost";      // set as the SMTP server 
```

我把它改成

```
$mail->Host       = "mail.web.com";      // set as the SMTP server 
```

现在可以了！

# linux - GAWK：strftime() 的倒数 - 使用格式模式将日期字符串转换为自 epoc 时间戳以来的秒数

> ID：14537954
> 
> 赞同：4
> 
> 时间：2013-01-26T14:41:27.550
> 
> 标签：linux, shell, gawk

Gnu AWK 提供了内置函数

```
strftime() 
```

它可以将时间戳转换`1359210984`为`Sat 26\. Jan 15:36:24 CET 2013`. 我找不到可以执行此操作的函数：

```
seconds = timefromdate("Sat 26\. Jan 15:36:24 CET 2013", "%a %d. %b %H:%M:%S CET %Y") 
```

或者

```
seconds = timefromdate("2013-01-26 15:36:24", "%Y-%m-%d %H:%M:%S") 
```

而`seconds`那时是`1359210984`。

因此，日期字符串应该可以通过格式模式进行转换。

我只想在 gawk 中执行此操作。

# 编辑1：

我想仅在 gawk 中转换日期以进一步处理流。

# 编辑2：

我已经澄清了我的问题。在“会这样做”的代码示例中有点草率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T08:44:33.220

您要查找的函数称为`mktime()`. 您应该使用该`gensub()`函数将 datespec 操作为可以读取的格式`mktime()`。

* * *

要格式化您给出的第二个示例，请考虑：

```
BEGIN {
    t = "2013-01-26 15:36:24"
    f = "\\1 \\2 \\3 \\4 \\5 \\6"

    s = mktime(gensub(/(....)-(..)-(..) (..):(..):(..)/, f, "", t))

    print s
} 
```

我的机器上的结果：

```
1359178584 
```

* * *

要格式化您给出的第一个示例，请考虑：

```
BEGIN {
    t = "Sat 26\. Jan 15:36:24 CET 2013"

    gsub(/\.|:/, FS, t)
    split(t,a)

    Y = a[8]
    M = convert(a[3])
    D = a[2]

    h = a[4]
    m = a[5]
    s = a[6]

    x = mktime(sprintf("%d %d %d %d %d %d", Y, M, D, h, m, s))

    print x
}

function convert(month) {

    return(((index("JanFebMarAprMayJunJulAugSepOctNovDec", month) - 1) / 3) + 1)
} 
```

我的机器上的结果：

```
1359178584 
```

* * *

有关更多信息，请查阅[手册](http://www.gnu.org/software/gawk/manual/gawk.html)，特别是[时间函数](http://www.gnu.org/software/gawk/manual/html_node/Time-Functions.html)和[字符串函数](http://www.gnu.org/software/gawk/manual/html_node/String-Functions.html)。HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-01T20:10:38.697

您可以使用 datetime 中的 python 方法 strptime：

```
 from datetime import datetime

date_string = "21 June, 2018"

print("date_string =", date_string)
print("type of date_string =", type(date_string))

date_object = datetime.strptime(date_string, "%d %B, %Y")

print("date_object =", date_object)
print("type of date_object =", type(date_object)) 
```

有关更多信息，请参见此处： [https ://www.programiz.com/python-programming/datetime/strptime](https://www.programiz.com/python-programming/datetime/strptime)

# sql - 为什么 postgresql 考虑到这个子查询列名不是完全限定和模棱两可的

> ID：14537955
> 
> 赞同：2
> 
> 时间：2013-01-26T14:41:43.230
> 
> 标签：sql, postgresql, plpgsql, ambiguity, columnname

```
 Select distinct A.col1, B.col2, col3
   from A inner join B on A.id = B.id
   and B.id in 

       (select distinct col2 from B where ..... ) 
```

PostgreSQL 的 plpgsql 解析器不喜欢括号子查询中不合格的“col2”。由于子查询中只提到了一个表，解析器不是制造了一个没有的歧义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:13:39.063

不可以。子查询中也可以使用外部查询列，否则您无法将内部查询和外部查询绑定在一起。这是一件很容易忘记的事情，如果你不期待它，它会抓住你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T17:53:13.240

像您显示的 SQL 查询就可以工作。

由于您提到**plpgsql**，我在黑暗中的镜头是您只显示实际上是 plpgsql 函数的片段，并且您遇到与函数参数的命名冲突，这些参数在函数体的*任何地方*都可见（动态 SQL 除外）。

# java - Android 中的数据库访问——什么是保存数据的最佳时机

> ID：14537959
> 
> 赞同：1
> 
> 时间：2013-01-26T14:41:54.450
> 
> 标签：java, android, database

我写了一个测验应用程序，我想在其中添加正确和错误答案的分数。

我的问题是我不知道保存数据的最佳时机是什么。在每个问题之后写下当前分数太耗费资源了，不是吗？

当用户关闭应用程序时，有什么方法可以保存它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:49:52.510

您应该在 Pause() 上保存数据并在 Resume() 上恢复它。

另请参阅[http://developer.android.com/training/basics/activity-lifecycle/pausing.html](http://developer.android.com/training/basics/activity-lifecycle/pausing.html)

# c++ - 未定义的错误引用

> ID：14537960
> 
> 赞同：-1
> 
> 时间：2013-01-26T14:42:01.027
> 
> 标签：c++

我的程序必须计算我的计算机可以表示的最小浮点数。但是，当我尝试编译时，我不断收到此错误：

> [链接器错误] 对 `WinMain@16'
> ld 的未定义引用返回 1 个退出状态

到目前为止，这是我的代码..

```
#include <iostream>
#include <cstdlib>

#include <math.h>
#include <iomanip>
#include <string>

using namespace std;

float smallest()
{
  float x=1.0;
  while(1) {
    if((x / 2) == 0.0) {
      return x;
    }
    x = x / 2;
    cout << "Approx smallest" << x << "float:" <<  endl;
  }
system("PAUSE");
return(x);
} 
```

由于我是 C++ 新手，我可以假设这是与我的主文件有关的错误 - 还是我缺少一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T14:43:20.483

`main()`函数是在托管环境中运行的任何 C++ 程序的入口点。您的程序缺少主要功能。

似乎您正在尝试创建一个 Windows UI 应用程序，因此您需要定义一个：
**[WinMain entry point (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633559%28v=vs.85%29.aspx)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T14:44:40.903

It looks like you are trying to compile it as an executable, and you don't have a [`main` function](http://en.wikipedia.org/wiki/Main_function):

```
// your code 

int main()
{
  smalltest(); // call your function
} 
```

# android - 您的应用程序内部存储文件夹的路径是什么

> ID：14537963
> 
> 赞同：0
> 
> 时间：2013-01-26T14:42:12.110
> 
> 标签：android

我在内部存储中创建了许多文件夹；例如，

```
 folder1 = getBaseContext().getDir("Bussiness Folder", Context.MODE_PRIVATE); //Creating an internal dir;

    folder2 = getBaseContext().getDir("Home Folder", Context.MODE_PRIVATE); //Creating an internal dir;

    folder3 = getBaseContext().getDir("Date Folder", Context.MODE_PRIVATE); //Creating an internal dir; 
```

现在我想知道这些文件夹（文件夹 1、2、3）位于哪个文件夹。这些文件夹所在的文件夹的路径是什么？基本上-您的应用程序内部存储文件夹的路径是什么？

下面的代码没有给出这个文件夹的路径。. .

```
 String path = getFilesDir().getPath(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:40:17.420

下面的代码给出了这个文件夹的路径略有不同：

```
String path = getFilesDir().getPath(); 
```

该文件的路径以文件结尾，但这是不同的。但是我的问题解决了。我烤了路径并硬编码了路径。

# php - 获取 URL 中的搜索关键字

> ID：14537964
> 
> 赞同：0
> 
> 时间：2013-01-26T14:42:20.740
> 
> 标签：php

```
<form action="">
    <input placeholder="SEARCH" name="search_input" type="text"/>
    <input type="submit" name="search_submit"/>
</form> 
```

如果人们通过“关键字项目”搜索我想要的 URL 将是[http://mydomain.com/search?keywords=Keyword%20Item](http://mydomain.com/search?keywords=Keyword%20Item)

我该怎么做？我知道需要在表单操作中配置，获取等。

提前致谢。

# 更新

当我尝试使用此代码时

```
<form action="http://search.golfoutletsusa.com/search?" method="get">
    <input placeholder="SEARCH" name="Keywords" type="text"/>
    <input type="submit" name="search_submit"/>
</form> 
```

网址是：[http ://search.golfoutletsusa.com/search?Keywords=85&search_submit=Submit+Query](http://search.golfoutletsusa.com/search?Keywords=85&search_submit=Submit+Query)

我只想从 URL 中删除“&search_submit=Submit+Query”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:45:29.313

```
<?php echo $_GET["keywords"]; ?> 
```

You will need to change the name of the text field from search_input to keywords though.

You should also consider using an `id` attribute along with the `name`. And as the other answer says, form `action` and `method` should be set correctly.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T14:47:45.533

只需将所有内容放在表单属性中，只需选择一个将接收所有这些的文件，/search 就不够了：

```
<form action="search.php" method="get">
    <input type="text" name="keywords" placeholder="SEARCH" />
    <input type="submit" name="submit" />
</form> 
```

编辑：在 search.php 文件中，您将使用 get 全局变量获取变量内容，如下所示：

```
$search_query = $_GET['keywords']; 
```

之后，您只需编写其余代码来进行搜索...请注意，这将导致 URL 像[http://www.example.com/search.php?keywords=query](http://www.example.com/search.php?keywords=query)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T14:45:22.993

Set `action` of the form to `search.php` and `method` to `get`.

Then change the `name` of your `input` element to `keywords`.

But still the url won't be - `http://mydomain.com/search?keywords=Keyword%20Item`

It will be - `http://mydomain.com/search.php?keywords=Keyword%20Item`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T18:16:59.027

**解决方案：1**

您可以在您的 search.php （或任何处理器文件）的顶部添加以下代码：

```
<?php
    if(isset($_GET["search_submit"]))
    {
        $keywords = $_GET["Keywords"];
        header("Location: search.php?Keywords=$keywords");
    }
?> 
```

**或者**

**解决方案：2**

如果确实没有必要给它命名，您可以省略提交按钮的名称。所以而不是

```
<input type="submit" name="search_submit"/> 
```

只需使用

```
<input type="submit" /> 
```

# php - 自定义类型元素键数组

> ID：14537965
> 
> 赞同：1
> 
> 时间：2013-01-26T14:42:24.050
> 
> 标签：php, soap, wsdl

我正在尝试从 PHP 中获取这样的多维对象数组的响应

```
[CartItems] => Array
(
    [15] => stdClass Object
    (
        [key] => 15
        [value] => stdClass Object
        (
            [Item] => stdClass Object
            (
                [id] => 1
                [quantity] => 7
            )
        )
    )
    [25] => stdClass Object
    (
        [key] => 25
        [value] => stdClass Object
        (
            [Item] => stdClass Object
            (
                [id] => 1
                [quantity] => 5
            )
        )
    )
    [26] => stdClass Object
    (
        [key] => 26
        [value] => stdClass Object
        (
            [Item] => stdClass Object
            (
                [id] => 1
                [quantity] => 5
            )
        )
    )
) 
```

我在 WSDL 文件中尝试了 Array 类型

```
<xsd:complexType name="ArrayOfProducts">
                    <xsd:complexContent>
                        <xsd:restriction base="soapenc:Array">
                            <xsd:attribute ref="soapenc:arrayType" wsdl:arrayType="Product[]"/>
                        </xsd:restriction>
                    </xsd:complexContent>
                </xsd:complexType> 
```

这里的要点是我想直接使用键返回带有可访问元素的数组“CartItems”

我并不特别依赖这个解决方案，我只想直接访问每个对象，而不需要遍历所有数组来找到所需的对象。

# sql - Oracle SQL：计算频率并转换为列

> ID：14537968
> 
> 赞同：0
> 
> 时间：2013-01-26T14:42:37.950
> 
> 标签：sql, performance, oracle

我想计算某些列中出现的频率值并创建一个新表，其中值作为列，频率作为数据。例子：

```
create table users
(id number primary key, 
name varchar2(255));

insert into users  values (1, 'John');
insert into users  values (2, 'Joe');
insert into users  values (3, 'Max');

create table meals
(id number primary key,
user_id number,
food varchar2(255));

insert into meals values (1, 1, 'Apple');
insert into meals values (2, 1, 'Apple');
insert into meals values (3, 1, 'Orange');
insert into meals values (4, 1, 'Bread');
insert into meals values (5, 1, 'Apple');
insert into meals values (6, 2, 'Apple');
insert into meals values (7, 2, 'Bread');
insert into meals values (8, 2, 'Bread');
insert into meals values (9, 2, 'Apple');
insert into meals values (10, 3, 'Orange');
insert into meals values (11, 3, 'Bread');
insert into meals values (12, 3, 'Bread'); 
```

所以我得到了不同的用户和他们的饭菜（这里是面包、苹果和橙子）。对于每个用户，我想知道他多久吃一次不同的食物。以下查询正是我想要的：

```
select 
(select count(id) from meals where meals.user_id = users.id and meals.food = 'Apple') as count_apple,
(select count(id) from meals where meals.user_id = users.id and meals.food = 'Orange') as count_orange,
(select count(id) from meals where meals.user_id = users.id and meals.food = 'Bread') as count_bread
from users; 
```

问题是，这真的很慢，尤其是当我有超过 100.000 个用户和几十种不同的食物时。我确信有一种更快的方法，但是我在 SQL 方面没有足够的经验来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:08:06.433

如果您使用的是 11g，那么您可以使用`pivot`运算符，如下所示：

```
select * from (
  select user_id, food from meals
)
pivot (count(*) as count for (food) in ('Apple', 'Orange', 'Bread')); 
```

否则，您将不得不进行手动旋转：

```
select user_id, 
       sum(case when food = 'Apple' then 1 else 0 end) count_apple, 
       sum(case when food = 'Orange' then 1 else 0 end) count_orange, 
       sum(case when food = 'Bread' then 1 else 0 end) count_bread
from   meals
group  by user_id 
```

在任何一种情况下，这些都应该比您原来的方法更快，因为您只访问`meals`表一次。

# linux - rsync 在 git repo 中传输一些文件时挂起

> ID：14537976
> 
> 赞同：2
> 
> 时间：2013-01-26T14:43:21.110
> 
> 标签：linux, rsync

我正在使用 rsync 行传输文件 - $ rsync -avz SRC/joe@phx2:/home/joe/SRC/ --delete

```
build/test/.git/objects/pack/pack-5985ff25d18a2555ed520a8f3684b55697c7ee6d.idx
build/test/.git/objects/pack/pack-5985ff25d18a2555ed520a8f3684b55697c7ee6d.pack 
```

rsync 只是挂在这条消息上，我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T00:11:47.593

rsync 不会挂起。您的 .pack 和 .idx 文件完全改变了 - 使 rsync 的增量散列算法无用。所以 rsync 在检查了每个卡盘后上传了整个文件。最终，它比简单的转移增加了更多的时间。

# c++ - 移动值/对象包装器的构造函数？

> ID：14537977
> 
> 赞同：0
> 
> 时间：2013-01-26T14:43:21.697
> 
> 标签：c++, c++11, constructor, assignment-operator, move-semantics

考虑以下类：

```
template <typename Type>
class Wrapper
{
    public:
        Wrapper(const Type& x) : _data(x) {;}
        Wrapper<Type>& operator=(const Type& x) {_data = x; return *this;}
    protected:
        Type _data;
}; 
```

此类的移动构造函数`Wrapper(Type&& x)`和移动赋值运算符的定义是什么`operator=(Type&& x)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:48:47.907

```
Wrapper(Type&& x) : _data(std::move(x)) {}
Wrapper& operator=(Type&& x) {_data = std::move(x); return *this;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T15:06:30.203

用 C++11 编写此代码的一种有趣方式是：

```
template<typename A, typename B, typename T=void*>
using IfSameBaseType = std::enable_if<
  typename std::is_same<
    typename std::remove_cv<A>::type,
    typename std::remove_cv<B>::type
  >::type,
  T
>::type;

template <typename T>
class Wrapper
{
  public:
    template<typename U, typename unused>
    Wrapper(U&& u, unused* do_not_use=(IfSameBaseType<T,U>*)nullptr) :
      data_( std::forward(u) )
    {}
    template<typename U>
    IfSameBaseType<T,U,Wrapper<Type>>& operator=(U&& x) {
      data_ = std::forward(x);
      return *this;
    }
  protected:
    T data_;
}; 
```

在这里，我`&&`在类型推导上下文中使用为 l 和 r 值引用提供单个覆盖，然后我通过`std::forward`. 这些`IsSameBaseType`东西只是确保我只为该类型编写构造函数`T`——我可以扩展它并说“可隐式转换为 T”，而不是`IsSameBaseType`没有那么多麻烦。

这样做的好处是我们有更少的重复方法。缺点是模板愚蠢可能会分散某人的注意力。

# c# - Delay Queue in C# using System.Threading.Timer

> ID：14537987
> 
> 赞同：2
> 
> 时间：2013-01-26T14:44:05.833
> 
> 标签：c#, timer

I have to implement a Delay Queue in C# as there is no standard implementation of delay queue present in the C#. I am looking to use `System.Threading.Timer` for implementing delayed enqueue of a node.

```
public class DelayQueue<T>
{
    private Queue queue<T> = new Queue<T>();

    public void Enqueue(Object object)
    {
        this.queue.Enqueue(object as T);
    }

    public void Enqueue(T node, TimeSpan dueTime)
    {
         new System.Threading.Timer(this.Enqueue, node, dueTime, -1);
    }

    .
    .
    .
} 
```

This approach looks fine to me but since I am new to C#(from C background), I want someones opinion that whether it is the right way or are there any better and more effective methods of doing the same?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T14:54:26.357

我不认为为每个项目创建计时器是一个好主意。无论如何，当您从队列中取出项目时，您只需要获取第一个准备好的项目，然后您就可以存储项目准备好的时间：

```
public class DelayQueue<T>
{
    private List<DelayQueueItem<T>> items = new List<DelayQueueItem<T>>();

    public void Enqueue(T item)
    {
        Enqueue(item, TimeSpan.Zero);
    }

    public void Enqueue(T item, TimeSpan delay)
    {
        items.Add(new DelayQueueItem<T>()
        {
            Value = item,
            ReadyTime = DateTime.Now.Add(delay)
        });
    }

    public T Dequeue()
    {
        DateTime now = DateTime.Now;
        var item = items.FirstOrDefault(i => i.ReadyTime <= now);
        if (item != null)
        {
            items.Remove(item);
            return item.Value;
        }

        return default(T);
    }

    private class DelayQueueItem<T>
    {
        public T Value { get; set; }
        public DateTime ReadyTime { get; set; }
    }
} 
```

更新（等待超时的阻塞队列）

```
public T Dequeue()
{
    return Dequeue(TimeSpan.Zero);
}

public T Dequeue(TimeSpan timeout)
{
    DateTime startTime = DateTime.Now;

    do
    {
        DateTime now = DateTime.Now;

        var item = items.FirstOrDefault(i => i.ReadyTime <= now);
        if (item == null)
            continue;

        items.Remove(item);
        return item.Value;
    }
    while (DateTime.Now - startTime < timeout);

    return default(T);
} 
```

用法：

```
DelayQueue<string> queue = new DelayQueue<string>();
queue.Enqueue("world", new TimeSpan(0, 0, 1));
queue.Enqueue("hello");                        
queue.Enqueue(",");

TimeSpan timeout = new TimeSpan(0, 0, 2);
Console.WriteLine(queue.Dequeue());
Console.WriteLine(queue.Dequeue(timeout));
Console.WriteLine(queue.Dequeue(timeout)); 
```

# sql - sql join with not in column include in result

> ID：14537989
> 
> 赞同：2
> 
> 时间：2013-01-26T14:44:21.523
> 
> 标签：sql, sql-server-2008, join

I have two table like

```
id   Name    allocation
2    Ash      15
3    Alam     18
4    Rifat    20 
```

and

```
Date   Id    Present
24     2     10
24     3     15
25     2     10
25     3     12
25     4     12 
```

Now i want to get the following result

```
 Date  Id Alloc   Present
      24   2   15     10        
      24   3   18     15
      24   4   20     NULL
      25   2   15     10
      25   3   18     12
      25   4   20     12 
```

I've tried `JOIN` query but it does not give desired result How to get the above result?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T14:52:32.067

```
SELECT 
    t1.id
  , dd.date
  , t1.allocation
  , t2.present 
FROM 
    table1 AS t1                         --- all items
  CROSS JOIN
    ( SELECT DISTINCT date
      FROM table2
    ) AS dd                              --- all dates
  LEFT JOIN
    table2 AS t2                         --- present allocations
      ON  t2.id = t1.id
      AND t2.date = dd.date ; 
```

在 SQL-Fiddle 测试：**[测试](http://www.sqlfiddle.com/#!3/d2ded/18)**（谢谢@JW。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:49:54.883

还有一种有趣的方式：

```
SELECT 
    t2.date,
    t1.id,
    t1.allocation,
    MAX(CASE WHEN t1.id = t2.id THEN t2.Present ELSE NULL END)
FROM 
    table1 t1, table2 t2
GROUP BY 
    t1.id, t2.date, t1.allocation
ORDER BY 
    t2.date, t1.id 
```

窃取自：[具有 0 个值的 SQL 查询内部联接](https://stackoverflow.com/questions/14317371/sql-querie-inner-join-with-0-values/14317831)

[http://www.sqlfiddle.com/#!3/d2ded/44](http://www.sqlfiddle.com/#!3/d2ded/44)

# c++ - Making two windows stick to eachother without a delay

> ID：14537990
> 
> 赞同：1
> 
> 时间：2013-01-26T14:44:30.950
> 
> 标签：c++, windows, winapi, window, position

I've created two windows with CreateWindowEx(), and now I'd like to stick them side-by-side, so that whenever one is moved, the other one moves relative to the other.

What's the right way of implementing this?

At the moment, I'm using this piece of code:

```
case WM_MOVING: // When the main window is being moved
    GetWindowRect(hWnd, &rWnd); // Get the current position of the main window
    MoveWindow(hwStats, rWnd.right - 1, rWnd.top, 140, 450, 1); // Move the other window relative to the main window
    return 1; // WM_MOVING is handled by the application
    break; // Done. 
```

The problem with this, is that whenever I move the window, the other window is dragged a few pixels behind.
Now, it doesn't look *too* bad, but I'd really prefer if it looked a bit more solid.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:53:18.230

要解决此问题，我需要将`case`from更改`WM_MOVING`为`WM_MOVE`和 function `MoveWindow() to` `SetWindowPos()`。

感谢 Martin James，他向我介绍了“Windows API 对接”。这很有帮助。

# android-ui - Converting Linear Layout UI to Relative Layout

> ID：14537992
> 
> 赞同：0
> 
> 时间：2013-01-26T14:44:44.343
> 
> 标签：android-ui

Can i Convert this Linear Layout view into Relative Layout view with proper weight.

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1.2"
    android:weightSum="3" >

    <Button
        android:id="@+id/favButton2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1.2" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight=".6"
        android:weightSum="2" >

        <EditText
            android:id="@+id/searchText"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight=".6" />

        <Button
            android:id="@+id/gotoButton"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1.4" />
    </LinearLayout>

    <Button
        android:id="@+id/favButton4"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1.2" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1.2"
    android:background="@drawable/appback" >

    <TextView
        android:id="@+id/category"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:textColor="#000" />
</LinearLayout>

<ScrollView
    android:id="@+id/scrollBackground"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight=".4"
    android:background="@drawable/appback" >

    <TextView
        android:id="@+id/favSms"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp" />
</ScrollView>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1.2"
    android:weightSum="2" >

    <Button
        android:id="@+id/nextFavSms"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:text="Next" />

    <Button
        android:id="@+id/PreFavSms"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:text="Pre" />

</LinearLayout> 
```

![enter image description here](../Images/61dee13b3c5f56d4a9eca011dba82c5c.png)

this is the o/p which i am getting from the above linear layout i want the same using relative layout that support all the devices.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:48:23.693

我认为在相对布局中你不能使用重量，但你可以实现这个设计，你可以让你的问题清楚。您在设计此布局时发现什么困难？如果您选择不同的屏幕尺寸，相对布局会更好

# jquery - jquery parent document

> ID：14537993
> 
> 赞同：1
> 
> 时间：2013-01-26T14:44:48.423
> 
> 标签：jquery, fancybox, fullcalendar

I have a problem with jquery parent. I try to access an element by its ID but it still fails. The item is a jquery full calendar plugin and I'm trying to recharge events. Here I leave the code in case someone can help me.

```
$('.seleccionparacita').live('click', function () {
  alert("hi1");
  alert($('#pruebaa',window.parent.document).text());//work
  $('#pruebaa',window.parent.document).html('adios');//work
      var nTds = $('td', this.parentNode.parentNode);
      var id = $(nTds[0]).text();
       $.ajax({
                data: { fecha: $('#fechacita').text(), medico: $('#seleccionmedico').val(), cliente : id },
                url: Routing.generate('comprobarcita'),
                success: function(data) {
                  if (data == 1){
                    $.ajax({
                        data: { fecha: $('#fechacita').text(), medico: $('#seleccionmedico').val(), cliente : id },
                        url: Routing.generate('guardarcita')
                          });
                    alert("llega");
                    $('#pruebaa',window.parent.document).html('adios');//work !!!
//down no work no acces id to calendar
                    //$('#calendar',window.parent.document).fullCalendar( 'destroy');
                    //$('#calendar',window.parent.document).fullCalendar( 'removeEventSource', citas );
                    //$('#calendar',window.parent.document).fullCalendar( 'addEventSource',  Routing.generate('citasajax',{id: 0}));
                    //$('#calendar',window.parent.document).fullCalendar( 'refetchEvents' );
                    alert("hi2");//work
                    parent.$.fancybox.close();
                  }
                    else
                      alert("Error el médico esta ocupado");
                    }
                });
     }) 
```

If I try to access from a click of a DOM element works correctly but if I try from a button I can not access the iframe. Here is the code:

```
$('#pruebaa').live('click', function () {
                alert("holita");//work
                $('#calendar').fullCalendar( 'refetchEvents' );//work

            })

                $('.seleccionparacita').live('click', function () {
                alert($('#pruebaa',window.parent.document).text());//work
                  var nTds = $('td', this.parentNode.parentNode);
                  var id = $(nTds[0]).text();
                   $.ajax({
                data: { fecha: $('#fechacita').text(), medico: $('#seleccionmedico').val(), cliente : id },
                url: Routing.generate('comprobarcita'),
                success: function(data) {
                  if (data == 1){
                    $.ajax({
                        data: { fecha: $('#fechacita').text(), medico: $('#seleccionmedico').val(), cliente : id },
                        url: Routing.generate('guardarcita')
                          });
                    alert("hi2");//work
                    $('#calendar').fullCalendar( 'refetchEvents' );//not work
                    alert("hi2");//not work
                    parent.$.fancybox.close();
                  }
                    else
                      alert("Error el médico esta ocupado");
                    }
                });
     }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:07:35.977

```
//$('#calendar',window.parent.document).fullCalendar( 'destroy'); 
```

这将从 DOM 中删除日历。父元素“#calendar”仍然存在，但一切都消失了。因此，除非您重新初始化日历，否则接下来的 3 次 .fullCalendar(...) 调用将不起作用。

[http://arshaw.com/fullcalendar/docs/display/destroy/](http://arshaw.com/fullcalendar/docs/display/destroy/)

如果你定义了，你可以节省一些打字

```
var $theCalendar = $( '#calendar' );
// ...
$theCalendar.fullCalendar( ... ); 
```

在函数的顶部。

# java - 在 Java 中实现递归

> ID：14537995
> 
> 赞同：7
> 
> 时间：2013-01-26T14:44:55.397
> 
> 标签：java, recursion

需要说明的是，这**不是家庭作业**，我在自己的时间学习CS！

我最近购买了查尔斯·菲利普斯 (Charles Phillips) 写的一本名为“逻辑思维的 50 个谜题”的书。我启动了其中一个，我突然想到我可以使用递归来解决问题。这是（转述的）问题：

> 在每个空格中插入一个数学运算符（+、-、÷、x）来求解方程：
> 
> 6 _ 3 _ 5 _ 7 _ 4 _ 8 = 13

我的理解是，为了使用递归解决这个问题，我首先需要确定一个基本情况。但是，我在这样做时遇到了麻烦。

**所以我的问题是，什么是可能的基本案例，我应该如何开始实施它？递归函数会是什么样子（参数、返回类型等）？**（代码很有帮助）！

~~这就是我到目前为止所拥有的：**我认为几乎可以工作**~~

**请参阅我的答案以获取实施**

注意我正在使用*Java*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:46:41.290

基本情况是所有空白都用运算符填充。您可以使用深度优先回溯搜索来解决此问题：

```
algorithm dfs(i):
    if i == num_blanks:  # base case: filled in all the blanks
        if equation_solved():
            return the operators you filled in
    else:
        for op in (+, -, ÷, ×):
            blank[i] = op
            if dfs(i + 1) returns a solution:
                return that solution
            blank[i] = _     # restore to previous state 
```

这是一种搜索整个组合空间的递归方式。（我希望这不会破坏你的练习；我用伪代码编写了它，以便将实现留给你。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T14:48:58.623

我认为停止条件应该意味着满足等式：填写所有运算符，以及导致适当相等的操作。

我会将等式表示为解析树，叶子作为数字，父母作为运算符。树自然适合递归，因为它是一种分层数据结构。

做一个运算符假设，其中根操作是减号，右孩子是期望值 (13)，左孩子是左边。添加一个运算符，评估树，然后回溯，直到满足您的停止条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T15:44:53.790

您可以将其视为决策树。

```
 6
        /    /    \    \
        +   -     *    /
        3                    Assuming you choose + for the first operator
/    /       \    \
+   -        *    /
5   5        5    5
    ^             ^
    6 + 3 - 5     6 + 3 / 5 
```

然后，您可以使用图遍历算法（例如 DFS 或 BFS）来检查结果。两者都是自然递归的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T16:22:03.577

这是我最终得到的实现，但首先是对问题解决方案的解释：

*   基本情况（如 larsmans 和 Jan Dvorak 所说）是所有“_”都用运算符（例如“+”）填充。
*   该函数调用自身，每次都添加另一个参数，直到达到不正确的基本情况（例如“6+3+5+7+4-8=13”）或得到正确答案。
*   如果基本情况不正确，那么我们会不断弹出级别，我们可以使用可以更改的运算符来达到某个级别。

这是代码：

```
class GapFill {

    private static String numbers; //E.g. 6_5_4=15
    private static String[] blank; //Array of operators to go in the blanks

    //Where:
    //p = plus
    //m = minus
    //d = divide
    //t = times
    private static String[] operators = {"p", "m", "d,", "t"};

    public static void main(String[] args) {
        numbers = args[0];
        blank = new String[numbers.split("_").length - 1];
        if(dfs(0)) { //If a solution was found
            int count = 0;
            while(numbers.indexOf("_")!=-1) {
                int index = numbers.indexOf("_");
                numbers = numbers.substring(0,index)+blank[count]+numbers.substring(index+1);
                count++;
            }
            System.out.println(numbers);
        }
    }

    private static boolean dfs(int i) {
        if(i == blank.length) {  //base case: filled in all the blanks
            return solveEquation();
        }
        for(String op : operators) {
            blank[i] = op;
            if(dfs(i + 1)) {
                return true;
            }
        }
        blank[i] = "_"; //restore to previous state
        return false;
    }

    private static boolean solveEquation() {
        String[] eachNumber = numbers.substring(0, numbers.indexOf("=")).split("_");
        String finalResult = numbers.substring(numbers.indexOf("=")+1, numbers.length());
        double currentResult = Double.parseDouble(eachNumber[0]);
        for(int i=1;i<eachNumber.length;i++) {
            String op = blank[i-1];
            if(op==operators[0]) {
                currentResult = currentResult + Integer.parseInt(eachNumber[i]);
            } else if(op==operators[1]) {
                currentResult = currentResult - Integer.parseInt(eachNumber[i]);
            } else if(op==operators[2]) {
                currentResult = currentResult / Integer.parseInt(eachNumber[i]);
            } else if(op==operators[3]) {
                currentResult = currentResult * Integer.parseInt(eachNumber[i]);
            }
        }
        return (currentResult==Integer.parseInt(finalResult));
    }

} 
```

的输出`java GapFill 6_3_5_7_4_8=13`是`6m3p5m7p4p8=13`。

*使用“p,m,d,t”符号代替“+,-,÷,×”，因为终端不喜欢 × 或 ÷*