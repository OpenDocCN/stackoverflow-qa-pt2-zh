# StackOverflow 问答 14137000-14137999

# assembly - MIPS“未对齐地址，异常 5”错误

> ID：14137003
> 
> 赞同：1
> 
> 时间：2013-01-03T10:27:42.390
> 
> 标签：assembly, mips, spim

我是一个使用 SPIM MIPS 模拟器的菜鸟。
当我尝试将 26 个单词的数组初始化为 0 时，我在 title X 中出现错误 26 次。我已将问题隔离为存储单词操作`sw $t0, 0($s3)`，但不知道我做错了什么。

编码：

```
.data  
theArray: .space 104  
theArraySz: .word 26  
.text  
.globl main  
main:  
move    $t0, $zero  
la      $s3, theArray  
lw      $s4, theArraySz      
add     $t2, $zero  
initLoop:  
beq     $t2, $s4, initEnd       
sw      $t0, 0($s3)    
addi    $s3, $s3, 4        
addi    $t2, $t2, 1        
j       initLoop   
initEnd:        
jr $ra 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:32:13.383

确保 的地址`theArray`与 32 位字边界对齐。如果您有能力单步执行程序，则可以检查地址，并检查`$s3`第一`la`条指令之后的值。

有关对齐的文档以及可用于强制对齐的指令，请参阅[此 wiki 。](http://en.wikibooks.org/wiki/MIPS_Assembly/MIPS_Instructions#Directives)`.align`

# android - Android Coverflow 在下载的 /disk 图像上跳跃

> ID：14137004
> 
> 赞同：3
> 
> 时间：2013-01-03T10:27:45.787
> 
> 标签：android, image, asynchronous, coverflow

我正在使用这个封面流小部件：[http ://code.google.com/p/android-coverflow/](http://code.google.com/p/android-coverflow/)

与从互联网下载的图像。几乎可以正常工作。

问题是当从网络下载图像或从磁盘获取图像时，coverflow 会跳跃/绊倒。我在一个单独的线程中执行此操作，并使用处理程序等在 imageView 中进行设置。这个系统可以完美、流畅地工作，在其他任何地方、listview、gridview 等。

我什至切换到这个库来处理图像：[https](https://github.com/nostra13/Android-Universal-Image-Loader) ://github.com/nostra13/Android-Universal-Image-Loader ，它似乎可以很好地处理所有线程和缓存。

但还是一样。

一种解决方案是预取所有图像并将它们放入内存中。只要coverflow从内存缓存中获取图像，它就很流畅。但是由于内存的限制，图像的数量显然是有限的。我尝试使用 LruCache。但是，正如预期的那样，一旦内存图像必须从内存中清除并再次从磁盘/网络中获取，就会出现跳跃。

其他人有这个吗？有解决办法吗？

# android - Android：取消选中按钮单击的复选框

> ID：14137012
> 
> 赞同：1
> 
> 时间：2013-01-03T10:28:18.173
> 
> 标签：android, android-checkbox

我有一个带有复选框的列表，我有两个按钮，保存和清除。单击清除按钮时如何取消选中复选框，

```
public class myProfileActivity extends Activity {
    private List<Profile> contacts = null;
    private String TAG = "ContactListActivity";
    private String inputName;
    ListView lvContact;
    private Activity _activity;

    private ListView mainListView;
    private Profile[] itemss;
    private ArrayAdapter<Profile> listAdapter;
    ArrayList<String> checked = new ArrayList<String>();
    public static List<AttractionData> selectedData = new ArrayList<AttractionData>();
    private String profileType = null;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        ContentResolver cr = this.getContentResolver();
        setContentView(R.layout.profilelist);
        _activity = this;

        profileType = getIntent().getExtras().getString("ProfileType");

        try {
            if (Constants.loadEntries != null) {
                Constants.loadEntries.cancel(true);
            }
        } catch (Exception e) {
            Log.e(TAG, "Loading Data------", e);
        }
        Constants.loadEntries = new LoadEntries();
        Constants.loadEntries.execute();
        EditText editTxt = (EditText) findViewById(R.id.txtContName);

        editTxt.addTextChangedListener(new TextWatcher() {

            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
            }

            public void afterTextChanged(Editable s) {
                inputName = s.toString();
                Log.d(TAG, "LoadMoreEntries --> Constants.loadEntries : "
                        + Constants.loadEntries);
                try {
                    if (Constants.loadEntries != null) {
                        Constants.loadEntries.cancel(true);
                    }
                } catch (Exception e) {
                    Log.e(TAG, "Loading Data--------", e);
                }
                Constants.loadEntries = new LoadEntries();
                Constants.loadEntries.execute();
            }

            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {

            }
        });

        Button clearbtn = (Button) findViewById(R.id.clearbtn);
        clearbtn.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

        }
        });

        Button savebtn = (Button) findViewById(R.id.savebtn);
        savebtn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                if (Constants.selectedContacts.size() > 0) {
                    ((CityPreferences) ProfileActivity.this.getApplication())
                            .storeAllContacts(Constants.selectedContacts);
                    Constants.selectedContacts= new ArrayList<Profile>();
                    finish();
                    v.getContext().startActivity(
                            new Intent(v.getContext(), PalABActivity.class)
                                    .addFlags(Intent.FLAG_ACTIVITY_NEW_TASK));

                } 
            });

    } 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:33:54.533

在按钮的 onclick 监听器中

添加

```
 chkBOX.setChecked(false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:31:44.407

```
final CheckBox checkBox = (CheckBox) findViewById(R.id.checkbox_id);
checkBox.setChecked(false); 
```

**编辑：**

```
View v;
final CheckBox checkBox = (CheckBox) v.findViewById(R.id.checkbox_id); 
```

*`view v`你的膨胀视图在哪里*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T07:19:29.003

这对我有用

```
 Button clearbtn1 = (Button) findViewById(R.id.clearbtn);
        clearbtn1.setOnClickListener(new OnClickListener() {
            @Override

            public void onClick(View v) {
              for(int i=0;i < Constants.checkBoxState.length; i++)      
                 Constants.checkBoxState[i] = false;

              listAdapter.notifyDataSetChanged();

        }
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T10:31:51.467

膨胀（findViewById）您要编辑的复选框，然后调用

```
myCheckbox.setChecked(false); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T11:02:16.527

像这样创建一个类。

```
 public class MyApplication extends Application{

       private int check_state = 1;

        public void setState(int state)
           {
         check_state = state;
           }
        public int getState()
           {
          return check_state;
           }

      } 
```

在您的活动中

要设置复选框状态的位置

```
 ((MyApplication)getApplication()).setState(0); 
```

要获取复选框状态的位置

```
 ((MyApplication)getApplication()).getState(); 
```

在清单文件中

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" 
    android:name=".MyApplication"> 
```

# sql-server - SQL XML 查询导致相同的数据字段？

> ID：14137014
> 
> 赞同：1
> 
> 时间：2013-01-03T10:28:23.823
> 
> 标签：sql-server, xml

我正在编写一个简单的 SQL 查询，它钻入 XML 并提取具有我指定的相同位置的每个值。这是查询：

```
> SELECT o.Created
>, o.PurchaseXML.query('/Basket/Skus/Sku/Code[1]')
>
>FROM [Order] o
>
>JOIN OrderStatus os
>ON os.OrderStatusID = o.[Status]
>
>WHERE os.IsSuccessful = 1 AND o.Created >= '12/24/12' 
```

但是，当我得到结果的输出时，来自 XML 查询的数据被放置在同一个数据单元格中。如下：

![在此处输入图像描述](../Images/1e1463cf7a0cdf14c3852c3d21c6f2f9.png)

有没有办法对此进行编码，以便我在从每个订单中提取的单独列中获取值？

谢谢您的帮助

格雷格

# iphone - 将数据从 plist 加载到另一个类

> ID：14137016
> 
> 赞同：0
> 
> 时间：2013-01-03T10:28:25.907
> 
> 标签：iphone, objective-c, uitableview, plist, loaddata

在我的应用程序中，**plist**文件被保存到文档目录中，每个文件名都是当前日期+时间。

我正在将文件目录中的文件列表加载到表中：`filesTableVC.m.`

每次我想将所选文件加载到一个新类时：`oldFormVC.m` 但是这个类是空的。

我不确定问题出在哪里。

**文件表VC.m：**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    oldFormVC *oldForm = [[oldFormVC alloc] initWithNibName:nil bundle:nil];

    //load previous data:
    // get paths from root direcory
    NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
    // get documents path
    NSString *documentsPath = [paths objectAtIndex:0];
    // get the path to our Data/plist file
    NSString *plistPath = [documentsPath stringByAppendingPathComponent:[fileList objectAtIndex:indexPath.row]];

    // check to see if Data.plist exists in documents
    if (![[NSFileManager defaultManager] fileExistsAtPath:plistPath])
    {
        // if not in documents, get property list from main bundle
        plistPath = [[NSBundle mainBundle] pathForResource:@"Data" ofType:@"plist"];
    }

    // read property list into memory as an NSData object
    NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:plistPath];
    NSString *errorDesc = nil;
    NSPropertyListFormat format;
    // convert static property liost into dictionary object
    NSDictionary *temp = (NSDictionary *)[NSPropertyListSerialization propertyListFromData:plistXML mutabilityOption:NSPropertyListMutableContainersAndLeaves format:&format errorDescription:&errorDesc];
    if (!temp)
    {
        NSLog(@"Error reading plist: %@, format: %d", errorDesc, format);
    }

    // assign values
    self.theDate = [temp objectForKey:@"theDate"];
    self.theTime = [temp objectForKey:@"theTime"];
    self.carNumber = [temp objectForKey:@"carNumber"];
    self.driverName = [temp objectForKey:@"driverName"];

    [self presentViewController:oldForm animated:YES completion:nil];
} 
```

* * *

**oldFormVC.m:**

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    dateField.text = theDate;
    timeField.text = theTime;
    carNumberField.text = carNumber;
    driverNameField.text = driverName;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:32:41.003

将您的代码写入`viewDidAppear`

```
- (void)viewDidAppear:(BOOL)animated
{
    dateField.text = theDate;
    timeField.text = theTime;
    carNumberField.text = carNumber;
    driverNameField.text = driverName;
} 
```

此外，在 filesTableVC.m 中更改此代码：

```
oldForm.dateField = [temp objectForKey:@"theDate"];
oldForm.theTime = [temp objectForKey:@"theTime"];
oldForm.carNumber = [temp objectForKey:@"carNumber"];
oldForm.driverName = [temp objectForKey:@"driverName"]; 
```

希望对你有帮助

# javascript - ExtJS4 根据商店中的值呈现组头模板

> ID：14137018
> 
> 赞同：0
> 
> 时间：2013-01-03T10:28:28.573
> 
> 标签：javascript, dom, extjs, extjs4

我正在尝试在 ExtJs 网格上呈现自定义分组标题。

我想显示分组名称；在这种情况下，网格按今天、昨天和上周分组。使用以下代码可以正常显示：

```
groupHeaderTpl: '{name}' 
```

分组是在模型中的转换字段上完成的，如下所示：

```
{
    name: 'dateGroup',
    type: 'string',
    convert: function(value, record) {   

        var stamp = record.get('sentDate'),
            stamp = Ext.util.Format.round((stamp / 1000), 0),
            formattedSentDate = Info.utils.formatTimeStamp(stamp, 'd-m-y'),
            str = '';   

        if (formattedSentDate === Info.utils.getToday()) {
            str = 'Today';
        } else if (formattedSentDate === Info.utils.getYesterday()) {
            str = 'Yesterday';
        } else {
            str = 'Last week';
        }

        return str;

    }
} 
```

在模型中有一个名为*read*的布尔字段。

如果一条消息未读，那么我想在组标题模板中显示未读消息的计数。

我尝试了以下操作，但没有任何内容记录到控制台：

```
 features: [{
                        ftype: 'grouping',
                        groupHeaderTpl: Ext.create(
                            'Ext.XTemplate', 
                            '{name}: ',
                            '{name: this.unreadCount}',
                            {
                                unreadCount: function(val){

                                    this.store.each(function(item, i, count) {
                                        if(item.get('read') === false){
                                            // populate inbox store
                                            // increment the unread inbox count
                                            console.log('unread');
                                        } else {
                                            console.log('read');    
                                        }

                                    });

                                }
                            }
                            )
                    }], 
```

这可能吗？我确信它是，但我对 ExtJs 来说真的很陌生，所以还在学习。

# android-layout - 如何在多部安卓手机上运行一个移动应用程序？

> ID：14137025
> 
> 赞同：0
> 
> 时间：2013-01-03T10:28:45.310
> 
> 标签：android-layout

我在 android 中创建了简单的 currecnyConverter 应用程序，但我遇到的问题是，当我运行此应用程序时，Protrait 中的 Nexus S(4.0",480 * 800:hdpi) 模拟器工作正常，但相同的应用程序在横向模式下运行，我的按钮和组件没有适合屏幕，所以我想在任何模式和任何安卓版本上运行我的应用程序。请任何人给我答案。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:20:45.823

您需要为横向和纵向创建不同的布局。

按照这个

```
res/layout/my_layout.xml             // layout for normal screen size ("default")
res/layout-small/my_layout.xml       // layout for small screen size
res/layout-large/my_layout.xml       // layout for large screen size
res/layout-xlarge/my_layout.xml      // layout for extra large screen size
res/layout-xlarge-land/my_layout.xml // layout for extra large in landscape orientation

res/drawable-mdpi/my_icon.png        // bitmap for medium density
res/drawable-hdpi/my_icon.png        // bitmap for high density
res/drawable-xhdpi/my_icon.png       // bitmap for extra high density 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:34:05.220

您必须通过以下页面：

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

您必须在 layout-land 文件夹中设计横向模式的布局，其名称与纵向模式中的名称相同。

有关更多信息，请参阅上面的页面。

谢谢。

# html - 如何创建 Box Shadow 翻转和悬停 CSS 导航？

> ID：14137026
> 
> 赞同：0
> 
> 时间：2013-01-03T10:28:49.610
> 
> 标签：html, css

我想使用 css 在我的导航菜单上创建 box-shadow/ribbon 的效果我有一个图像和示例想要学习创建我是一个初学者 web 开发人员与这里的演示相同[http://www .templatemonster.com/demo/33211.html](http://www.templatemonster.com/demo/33211.html) 如果有人可以帮助我学习，那就太好了。

我刚刚学习了如何创建类似于此链接的导航栏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:31:48.400

有什么理由不只制作具有所需阴影的PNG？或者，创建一个阴影图像 png 并使用它作为包含功能区的 div 的背景。

我会为此避免使用 CSS3，因为现在跨浏览器兼容性将是一个问题。

* * *

从一个具有透明背景的所需填充大小的新图像开始。使用渐变制作阴影，然后保存为网络。选择PNG 24，就是这样。

# api - 通过 SOAP v1 的 Magento 和税收

> ID：14137027
> 
> 赞同：0
> 
> 时间：2013-01-03T10:28:53.370
> 
> 标签：api, magento, soap

有没有办法通过soap v1在magento中检索税收规则？现在我在物流部门的订单管理软件中保留了一份重复的“硬拷贝”，但如果可能的话，我希望能够通过soap api获取和设置它......

这可能吗？

目前我使用

```
function getTaxIds()
        {
        $taxids['1'] = 'NL BTW 19%';
        $taxids['2'] = 'US BTW 8.375%';
        return $taxids;
        } 
```

我从中从magento后端复制了匹配的ID......但这感觉很老套，并强制手动更新。

有没有办法在不经历扩展 magento api 的痛苦的情况下检索它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:10:48.167

不，Magento 不提供税收 API。

您可以查看： [创建自定义 API 或扩展核心 API](http://www.magentocommerce.com/api/soap/create_your_own_api.html)

或者只是制作一个驻留在 Magento 服务器上的简单脚本，它将您需要的数据显示为 json/xml 并调用该文件。

# java - 在 OutputStreamWriter 中选择文件编码

> ID：14137037
> 
> 赞同：1
> 
> 时间：2013-01-03T10:29:41.063
> 
> 标签：java, file-io

我在 Linux 服务器上使用 JDK 1.7。我已经安装了 apache 6.0.35 并使用了代码

```
Writer w = new OutputStreamWriter(os,"Unicode"); 
```

以 unicode 格式写入文件。

但是该文件是以 unicode 大端格式生成的。如何选择不同的输出格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:51:35.623

'Unicode' 不是单一格式，而是指定编码，如 UTF-16（大端和小端）和 UTF-8。

您可能想要特定的东西，例如`UTF-16LE`而不是`Unicode`. [查看http://docs.oracle.com/javase/7/docs/api/java/nio/charset/StandardCharsets.html](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/StandardCharsets.html)中的列表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:52:36.577

如果您使用 Unicode 或 UTF-16，则默认为大端。如果您不指定字节序，Java 假定大字节序为规则。如果你想要小端，你需要用`"UTF-16LE"`or指定它`StandardCharsets.UTF_16LE`

来自 java.nio.charset.StandardCharsets

```
public static final Charset UTF_16LE = Charset.forName("UTF-16LE"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-15T18:51:25.200

Java 字符集名称“UTF-16”表示具有大端序的 UTF-16。试试这种小端格式：

```
BufferedWriter out = new BufferedWriter
    (new OutputStreamWriter(new FileOutputStream(path),"UTF-16LE")); 
```

# c# - 程序只能在某些电脑上运行，缺少 DLL？

> ID：14137040
> 
> 赞同：3
> 
> 时间：2013-01-03T10:29:49.830
> 
> 标签：c#, c++, visual-studio-2010, dll, boost-thread

我用 VS10 编写了以下项目：

*   一个 C# (.net 4.0) 程序，它调用
*   一个使用 boost::thread 的 C++ 非托管 dll
*   一个安装项目，其中包括 C# 可执行文件、C++ dll、boost::thread dll 和一些其他文件。此外，在安装过程中会检查是否安装了 framework .net 4.0，如果没有，则会下载。

编译（三个项目中的每一个都为 x64）没问题，该程序可以在我的电脑（Windows 7 64 位）上运行。我在其他一些计算机（所有 Windows 7 64 位）上测试了该程序，我注意到：

*   在带有 VS10 和 Boost 的程序中
*   在没有 VS10 和 Boost 的程序中，程序在 C++ Dll 中出现错误

我认为问题在于缺少一些 boost Dll。我对吗？或者问题可能与VS有关？

**编辑**：

不得不提的是，程序的结构如下：

*   主窗体（C#），其中设置了一些参数，然后后台工作人员调用
*   C++ DLL 执行其工作并使用 boost::thread
    *   它做了一些计算
    *   当它得到一些结果时，将它们写入文件
    *   继续计算等等
*   主窗体有一个文件系统观察器，它查找结果文件并对结果进行一些处理。

此外，当我收到错误时，主表单正确加载并且可以设置参数。当后台工作人员开始他的工作（调用 C++ DLL）时，就会发生错误。

所以我很确定框架安装没有问题。

**更新**：

原来我忘记在安装项目中包含一些 DLL。现在，包括他们在内，错误发生了变化。

现在，在与以前相同的时间点（以及在同一台计算机上）我收到另一个错误：

> BadImageFormatException：试图加载格式不正确的程序

我阅读[了这篇文章](http://www.codeproject.com/Articles/383138/BadImageFormatException-x86-i-x64)，但我在 C# 项目和 C++ DLL 中都设置了 x64，并且安装项目具有 TargetPlatform x64。任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:33:30.210

目标计算机上缺少 VCRedist 包。它应该在 VS SDK 目录中可用。此外，您可能需要在目标机器上安装 .Net Framework（.Net Framework 包含 VCRedist 包）。如果您没有这些的安装文件，可以在 microsoft 网站上找到它们，即 VC10Redist for x64 在[这里](http://www.microsoft.com/en-us/download/details.aspx?id=14632)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T10:40:38.357

在这种情况下，我使用工具[Dependency Walker](http://www.dependencywalker.com/)

启动它并选择您的可执行文件以发现丢失的库。

它提供了指示随后需要安装什么的线索。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T10:36:21.053

如果您的 C++ DLL*动态*链接到 CRT，那么您还必须在目标机器上部署 VC++ CRT DLL，即`MSVCR100.DLL`和 C++ `MSVCP100.DLL`（它们已经在您安装了 VS2010的*开发机器*上可用，所以在该机器上您C++ DLL 加载正常；但您不能假设在您的*客户端机器*上 CRT/C++ DLL 可用）。

有几个**部署选项**：您可能想阅读MSDN 上的[此文档](http://msdn.microsoft.com/en-us/library/vstudio/dd293574%28v=vs.100%29.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T10:02:22.983

我终于找到了解决方案！

C++ DLL 需要[mpfr](http://www.mpfr.org/)库以进行正确舍入的多精度浮点计算。

我包括（我感到羞耻！）库的不正确版本（x86），这是错误的动机：

> BadImageFormatException：试图加载格式不正确的程序

然后在程序正常的所有计算机（三台不同的计算机！）中都有（不幸和误导性的巧合）：

*   Boost 和 VS10 安装和
*   Path 环境变量中包含的文件夹中的 x64 版本的库。因此，程序以某种方式找到了正确版本的 DLL。

在安装项目中包含正确版本的库解决了这个问题。感谢 Kamil Klimek、Stephane Rolland 和 Mr.C64 的宝贵建议。

# gwt - HashBiMap SerializationException 或如何序列化 IsSerializable 不适用的类？

> ID：14137042
> 
> 赞同：0
> 
> 时间：2013-01-03T10:29:58.350
> 
> 标签：gwt, serialization, guava

问题似乎是并非所有的 Guava 类都是开箱即用的可序列化的。

我找到了一个很好的解决方案并喜欢分享它。（在这种情况下为 HashBiMap）。（也许某些 Guava 开发人员可能有一天会将此应用于理想的所有类）

如果您复制以下类（并可能将其调整为您的可序列化类），您将在 Javadoc 注释中获得进一步的调查详细信息。

```
package com.google.common.collect;

import java.util.LinkedHashMap;
import java.util.Map;

import com.google.gwt.user.client.rpc.SerializationException;
import com.google.gwt.user.client.rpc.SerializationStreamReader;
import com.google.gwt.user.client.rpc.SerializationStreamWriter;
import com.google.gwt.user.client.rpc.core.java.util.Map_CustomFieldSerializerBase;

/**
 * idea taken from some <a href=
 * "http://code.google.com/r/baggiogamp-guava/source/browse/gwt-src/com/google/common/collect/RegularImmutableBiMap_CustomFieldSerializer.java?r=a7aa10ddb815ce7996f3fae103bfd3823b1336ed&spec=svn6923b5fac0feb7005429d0b24be93b91685f9637"
 * >com/google/common/collect/RegularImmutableBiMap_CustomFieldSerializer.java</
 * a> <br/>
 * Problem was, that {@link HashBiMap} seems not to be serializable for GWT:
 * <ul>
 * <li>it nor its super classes do not implement com.google.gwt.user.client.rpc.IsSerializable (why?)</li>
 * <li>the following solution does not work if only applied to some super class, e.g. AbstractBiMap</li>
 * </ul>
 * <pre>
 * com.google.gwt.user.client.rpc.IncompatibleRemoteServiceException: The response could not be deserialized
    at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:221)
    at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
    at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
    at sun.reflect.GeneratedMethodAccessor119.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:338)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:219)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:571)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:279)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:242)
    at sun.reflect.GeneratedMethodAccessor116.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:547)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364)
    at java.lang.Thread.run(Unknown Source)
Caused by: com.google.gwt.user.client.rpc.SerializationException: com.google.common.collect.HashBiMap/1352983899
    at com.google.gwt.user.client.rpc.impl.SerializerBase.getTypeHandler(SerializerBase.java:153)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.instantiate(SerializerBase.java:114)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:396)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
    at mycomp.shared.conf.Config_FieldSerializer.deserialize(Config_FieldSerializer.java:12)
    at mycomp.shared.conf.Config_FieldSerializer.deserial(Config_FieldSerializer.java:35)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.deserialize(SerializerBase.java:95)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:398)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
    at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter$ResponseReader$8.read(RequestCallbackAdapter.java:106)
    at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:214)
    at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
    at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
    at sun.reflect.GeneratedMethodAccessor119.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:338)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:219)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:571)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:279)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:242)
    at sun.reflect.GeneratedMethodAccessor116.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:547)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364)
    at java.lang.Thread.run(Unknown Source)
 * </pre>
 * 
 * @author ADietrich
 * 
 */
public class HashBiMap_CustomFieldSerializer {

    public static void deserialize(SerializationStreamReader reader,
        HashBiMap<?, ?> instance) {
    }

    public static HashBiMap<Object, Object> instantiate(
            SerializationStreamReader reader) throws SerializationException {
        Map<Object, Object> entries = new LinkedHashMap<Object, Object>();
        Map_CustomFieldSerializerBase.deserialize(reader, entries);
        return HashBiMap.create(entries);
    }

    public static void serialize(SerializationStreamWriter writer,
        HashBiMap<?, ?> instance) throws SerializationException {
        Map_CustomFieldSerializerBase.serialize(writer, instance);
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:03:45.637

实施`Serializable`仅对[专门设计的类](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideSerializableTypes)就足够了。Guava 的类不是这样设计的（出于各种原因）。因此，我们需要为每个单独的类添加特殊支持。我们已经为某些课程做到了这一点，我们也可以为其他课程做到这一点，尽管有一些权衡。我们有[一个 GWT 序列化的功能请求](http://code.google.com/p/guava-libraries/issues/detail?id=828)，您可以在其中阅读更多详细信息并提出请求。但是，我首先会考虑在您的 RPC 接口中使用`ImmutableBiMap`，而不是。与大多数不可变类型一样，已经是 GWT 可序列化的。`HashBiMap``ImmutableBiMap`

# java - HandlerExceptionResolver 不在集群环境中调用

> ID：14137043
> 
> 赞同：1
> 
> 时间：2013-01-03T10:30:00.830
> 
> 标签：java, spring, servlets

我编写了一个实现`HandlerExceptionResolver`spring 的类来处理`MaxUploadSizeExceededException`异常，因为我们允许上传最大 25MB 大小。我已经在 servletcontext 中注册了这个类，如下所示：

```
<bean id="uploadingFileSizeExceeds" 
  class="com.puresafety.health.ui.web.demographics.controllers.FileSizeExceedsMaxLimitHandler" >
</bean> 
```

类**FileSizeExceedsMaxLimitHandler**

```
public class FileSizeExceedsMaxLimitHandler implements HandlerExceptionResolver {
    private final static Log logger = LogFactory
            .getLog(FileSizeExceedsMaxLimitHandler.class);

    public ModelAndView resolveException(HttpServletRequest request,
            HttpServletResponse response, Object handler, Exception ex) {
        logger.debug("FileSizeExceedsMaxLimitHandler.resolveException: Control is coming here because uploading file size is exceeding max allowed limit.");
        if (ex instanceof MaxUploadSizeExceededException
                && request.getPathInfo().equals(
                        "/demographicsPhoto/uploadimagefile")) {
            logger.debug("FileSizeExceedsMaxLimitHandler.resolveException: MaxUploadSizeExceededException occurred");
            request.setAttribute("ALERTMESSAGE",
                    "The image size is exceeding the allowed limit.");
            ImageUploadForm imageUploadForm = new ImageUploadForm();
            Map<String, Object> model = new HashMap<String, Object>();
            model.put("imageUploadForm", imageUploadForm);
            return new ModelAndView("demographics/uploadEmployeeImage", model);
        }
        return new ModelAndView("base/error/error404");
    }
} 
```

它在我的本地成功地捕获了异常，但在我们的集群 QA 环境中不起作用，即控制不会转到此类中的方法 resolveException。

我在这里缺少什么。提前致谢！

# sql - 如何在 MS-Access 中组合不同行的字段？

> ID：14137046
> 
> 赞同：0
> 
> 时间：2013-01-03T10:30:05.357
> 
> 标签：sql, ms-access, field

> **可能重复：**
> [ms-access 中是否有 group_concat 函数？](https://stackoverflow.com/questions/2852892/is-there-a-group-concat-function-in-ms-access)
> [Ms Access Query：通过查询连接行](https://stackoverflow.com/questions/5517233/ms-access-query-concatenating-rows-through-a-query)

我有下表：

```
ID    TAG
----------
1     AAA
1     BBB
2     CCC
2     DDD
2     EEE 
```

我想得到以下输出：

```
1    AAA, BBB
2    CCC, DDD, EEE 
```

如何在 MS-Access 中的组合字段中获取结果。

# php - 我想使用 Json 回调根据选定的主类别列表填充基于 div 的自定义子类别列表

> ID：14137049
> 
> 赞同：0
> 
> 时间：2013-01-03T10:30:14.843
> 
> 标签：php, jquery, html, json

我创建了一个自定义项目列表。它不是一个常规的 html 列表元素，它是基于 div 的自定义项目列表，带有 Jquery onclick 事件。这是我的 Jquery 代码：

```
 $(document).ready(function(){

  $(document).find("div[id^='cat']").live('click', function()
  { 
var currentId = $(this).attr('id');
$.getJSON('get_categories.php', {catName:$("#"+currentId).text()}, function(data) 
{
    $.each(data.CatList, function(i,itemList)
    {
        var tblRow =
        "<div class='shop_options' id='cat" + itemList.id + "' onclick=''"  +">"
        +itemList.sub_cat+"</div>";
        $(tblRow).appendTo("#subCatList");

    });

});

  });

 }); 
```

我可以通过 onclick 根据主类别项目附加子类别。但问题是，每当我单击任何其他类别以填充子类别数据时，单击一个类别后，它只会修改其他类别数据以及先前选择的主类别项目列表。

例如，如果我选择**Fruits**，则它会显示数据**Mango、Banana、Orange**并且每当我选择任何其他类别（如**Flowers** ）时，它都会在 Fruits 子类别列表下方显示 Flowers 的子类别列表**Rose、Lotus、Marigold 。**

我想清除之前选择的类别项目。如何做到这一点，请给您的专家建议。提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:34:31.127

采用

```
$("#subCatList").empty(); 
```

在追加之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:34:39.463

用于`html()`使 div 为空

```
$.getJSON('get_categories.php', {catName:$("#"+currentId).text()}, function(data) 
{

  $("#subCatList").html()  //here add this

  $.each(data.CatList, function(i,itemList)
  {
    var tblRow =
    "<div class='shop_options' id='cat" + itemList.id + "' onclick=''"  +">"
    +itemList.sub_cat+"</div>";
    $(tblRow).appendTo("#subCatList");

  });

}); 
```

# ruby-on-rails - url 操作在我的 Rails 中不起作用

> ID：14137050
> 
> 赞同：0
> 
> 时间：2013-01-03T10:30:28.383
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, url, ruby-on-rails-3.2

我在文件夹员工中做了一个工资控制器。

在我的路线中：

```
namespace :employee do
  resources :salaries
end 
```

现在在我的工资控制器中，我添加了一个新方法`action_list`：

```
class Employee::SalariesController < ApplicationController
  def action_list
  end
end 
```

从索引内部的视图中，我想调用`action_list`如下：

```
<%= form_for :form, :url => {:action => 'action_list'}, :method => :post,
    :html => {:id => 'form1', :onsubmit => "return checkCheckBoxes();"} do |f| %> 
```

当我提交表单时，我收到以下错误：

```
No route matches [POST] "/employee/salaries/action_list" 
```

可能是什么问题呢？它在不使用命名空间的情况下适用于其他控制器。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:40:43.110

您是否已将 action_list 添加到您的路线中

```
namespace :employee do
  resources :salaries do
      post :action_list, :on => :collection
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:40:44.130

为动作添加路由`action_list`：

```
namespace :employee do 
  resources :salaries do 
    post 'action_list'
  end
end 
```

[在此处](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)阅读有关添加宁静路线的更多信息。

# java - 字符串 args[] 参数

> ID：14137051
> 
> 赞同：3
> 
> 时间：2013-01-03T10:30:29.977
> 
> 标签：java, string, command-line-arguments

```
class MainClass
{
     public static void main(String []args)
     {
         System.out.println("B");
     }
} 
```

通常，上面的代码会生成输出*B*。如何在`ABC`不修改`main()`方法的情况下将其更改为？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-03T10:51:55.637

```
public class Test
{
    static 
    {
    System.out.println("ABC");
    System.exit(0);
    }

    public static void main(String []args)
    {
        System.out.println("B");
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-03T10:41:36.357

一种解决方案是隐藏`System.out`- 下面的代码打印 ABC 而不更改 main：

```
class MainClass {

    public static void main(String[] args) {
        System.out.println("B");
    }

    static class System {
        static Printer out = new Printer();
    }
    static class Printer {
        public void println(String whatever) {
            java.lang.System.out.println("ABC");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-03T10:41:11.427

你可以做到这一点，但它是一个可怕的黑客。

```
import java.lang.reflect.Field;

class MainClass {
    // requires Java 7 update 5+ as the internal structure of String changed.
    static {
        try {
            Field value = String.class.getDeclaredField("value");
            value.setAccessible(true);
            value.set("B", value.get("ABC"));
        } catch (Throwable e) {
            throw new AssertionError(e);
        }
    }
    public static void main(String[] args) {
        System.out.println("B");
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-03T10:44:40.247

Ugly Hack too：通过使用静态初始化块并将输出流设置为基本上没有。

```
package pack;

import java.io.IOException;
import java.io.OutputStream;
import java.io.PrintStream;

class MainClass
{
    static {
        System.out.print("ABC");
        try {
            System.setOut(new PrintStream( new OutputStream() {

                @Override
                public void write(int b) throws IOException {

                }
            }) );
        } catch (Exception e) {
        }

    }
            public static void main(String []args)
            {
                     System.out.println("B");
            }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-03T10:40:51.860

技巧是在静态初始化程序中覆盖`System.out`使用。[`System::setOut`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#setOut%28java.io.PrintStream%29)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-10T05:34:41.057

因为您还没有将 MainClass 设为公开。所以这里还有一个：

```
class MainClass {
    public static void main(String[] args) {
        System.out.println("B");
    }
}

public class SubClass extends MainClass{
   public static void main(String[] args){
       System.out.println(" ABC");
   }
} 
```

将上述代码另存为 SubClass.java。将调用子类的 main 方法，该方法将打印**ABC**。

# git - 如何正确使用 git rebase？

> ID：14137054
> 
> 赞同：4
> 
> 时间：2013-01-03T10:30:37.910
> 
> 标签：git, version-control, rebase, git-merge, git-rebase

我目前使用 git 的方式如下：

1.  克隆，获取 repo
2.  为特定问题创建主题分支
3.  做一些提交
4.  结帐主分支
5.  将主题分支合并到主分支
6.  推送新的主分支

不幸的是，这有时会变得混乱。我想做的是将一些较小的提交合并到一个较大的提交中。

此外，有时将新分支中的所有提交合并到一个提交并将其合并到 master 也是一个好主意。

例子：

```
git branch update-docs
git checkout update-docs
git add -A .
git commit -m 'updated networking doc'
git add -A .
git commit -m 'updated manager doc'
git checkout master
git merge update-docs 
```

如您所知，我将在主分支“更新的网络文档”和“更新的管理器文档”中有两个提交。

如果我现在只想在 master 分支中有一个名为“更新的文档”的提交，例如其中包含这两个提交的更改，我该怎么办？

我认为你必须使用 git rebase 来完成这类任务。我只是不知道如何使用它。

我已经尝试过：

```
git checkout master
git rebase update-docs 
```

但这将更改合并到 master 而不留下任何提交，现在 repo 搞砸了。

那么有人会分享你必须使用的命令吗？

**解决方案：**

```
git checkout -b update-readme
git commit -am 'rewritten readme'
git commit -am 'added author name'
git rebase -i master 
```

打开文本编辑器：

```
pick 6dbcbf1 rewritten readme
pick b815bbf added author name 
```

现在您将其更改为：

```
pick 6dbcbf1 rewritten readme
squash b815bbf added author name 
```

如果使用 vim，则使用 ":w" 和 ":q" 保存，它将打开另一个编辑器，您可以在其中定义新的提交名称

```
rewritten readme 
```

然后你合并回购：

```
git checkout master
git merge update-readme 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:14:56.300

之后`git merge update-docs`，执行`git rebase -i origin/master`。这将弹出一个[交互式变基编辑器](http://git-scm.com/book/en/Git-Tools-Rewriting-History)，它允许您[压缩提交](http://git-scm.com/book/en/Git-Tools-Rewriting-History#_squashing)或[重新排列它们](http://git-scm.com/book/en/Git-Tools-Rewriting-History#_reordering_commits)。

# javascript - 如何在 RaphaelJS 中使用矩阵

> ID：14137062
> 
> 赞同：0
> 
> 时间：2013-01-03T10:31:03.253
> 
> 标签：javascript, graphics, web, svg, raphael

我想移动一个 RaphaelElement 并创建一个简单的测试用例：

```
var paper = Raphael(0, 0, 500, 500);
var rect = paper.rect(50, 50, 100, 100);
rect.attr("fill", "blue");
rect.matrix.translate(300, 300); 
```

但是矩形没有移动。起初我认为矩阵可能没有正确更新并尝试了这个：

```
//...
alert("" + rect.matrix.x(0,0)); // prints 0
rect.matrix.translate(300, 300);
alert("" + rect.matrix.x(0,0)); //prints 300 
```

显然矩阵发生了变化，但矩形并不关心这一点。因此，我将代码更改为：

```
 rect.matrix=rect.matrix.translate(300,300); 
```

但这要么使程序崩溃，要么根本没有效果。似乎我缺少某种更新方法，将矩阵应用于 RaphaelElement。看起来像这样的东西：

```
rect.updateMatrix(); 
```

我在文档中搜索过，但没有找到这样的方法。RaphaelJs 中矩阵的规范用法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:51:21.907

`rect.translate(300, 300)`将应用翻译或替代[`rect.transform("t300,300")`](http://raphaeljs.com/reference.html#Element.translate)

还

```
rect.transform(['m',mat.a, mat.b, mat.c, mat.d, mat.e, mat.f]); 
```

可用于将现有矩阵（垫子）应用于矩形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T16:42:32.863

我在 Stackoverflow 上找到了另一个参考资料，它在解释矩阵方面做得非常出色。它解决了我的问题。

[StackOverflow 矩阵说明](https://stackoverflow.com/questions/10939195/what-is-a-matrix-for-in-raphael)

# jsp - 在 JSP 中将纪元时间转换为日期格式

> ID：14137065
> 
> 赞同：1
> 
> 时间：2013-01-03T10:31:11.493
> 
> 标签：jsp, date-format, epoch

请让我知道如何在 JSP 中将纪元时间（例如 - 1355893200000）转换为 mm/dd hh:mm AM/PM 格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-12-07T15:01:28.070

解决方案1（三个`startDate`保持不变）：

```
<jsp:useBean id="startDate" class="java.util.Date" />

<jsp:setProperty name="startDate" property="time" value="${record.startDate}"/>

<fmt:formatDate value="${startDate}" type="date" dateStyle="long"/> 
```

解决方案2：

```
// item is long, don't pass testing, is EL support Date Type init Object??

<fmt:formatDate value="${Date(item)}" pattern="yyyy-MM-dd hh:mm:ss"/> 
```

`fmt:parseDate`用于`SimpleDateFormat`从字符串中解析日期。一个`Date`可以从`Date date = new Date (Long.parase(epochString))`

JSP 版本通常与 servlet 版本齐头并进，如下所示：

```
Servlet 2.5 uses JSP 2.1 
Servlet 2.4 uses JSP 2.0 
Servlet 2.3 uses JSP 1.2 
Servlet 2.2 uses JSP 1.1 
Servlet 2.1 uses JSP 1.0 
```

也许有帮助：

*   [java - 在JSP中将纪元时间字符串转换为日期字符串 - 代码日志](https://stackoverflow.com/questions/20515429/converting-epoch-time-string-to-date-string-in-jsp)

*   [jsp - 是否可以在表达式语言中创建日期值？- 堆栈溢出](https://stackoverflow.com/questions/4512682/is-it-possible-to-create-a-date-value-in-expression-language)

*   [java - 格式化日期并使用 JSTL 和 EL 显示它 - 代码日志](https://stackoverflow.com/questions/16823033/format-a-date-and-display-it-using-jstl-and-el?rq=1)

*   [如何知道哪个 servlet 和 jsp 版本（Coderanch 的 OCPJWCD 论坛）](https://coderanch.com/t/425693/certification/servlet-jsp-version)

*   [jsp - 如何在 scriptlet 中将 java.util.date 转换为所需格式 - 代码日志](https://stackoverflow.com/questions/8193617/how-to-convert-java-util-date-to-required-format-in-scriptlet?rq=1)

*   [JSTL 核心标签](http://www.tutorialspoint.com/jsp/jstl_format_formatdate_tag.htm)

参考：

[jstl 代码仓库](https://github.com/javaee/jstl-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:39:57.357

您可以使用 JSTL 核心`fmt:formatDate`标签。更多信息[http://www.tutorialspoint.com/jsp/jstl_format_formatdate_tag.htm](http://www.tutorialspoint.com/jsp/jstl_format_formatdate_tag.htm)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-03T10:36:51.067

您可以查看[此](https://stackoverflow.com/questions/3371326/java-date-from-unix-timestamp)以将 unix 时间戳转换为 Java`Date`对象。

要格式化日期，您可以使用[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

例如

```
SimpleDateFormat format = new SimpleDateFormat("MM/dd hh:mm aaa");
String formatted = format.parse(myDate); 
```

# .htaccess - Magento：使用 Web 服务器重写已损坏

> ID：14137072
> 
> 赞同：0
> 
> 时间：2013-01-03T10:31:55.227
> 
> 标签：.htaccess, magento, url-rewriting

有时在我的本地机器上导入项目时，该`Use Web Server Rewrites`功能无法正常工作。

这可能是由于一些`.htaccess`自定义设置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:32:59.800

我的问题是`.htaccess`文件中的这一行：

`RewriteBase ...`

评论它`#`解决了这个问题

# c# - 无法让 TinyMCE.MVC.Jquery.Sample 工作

> ID：14137073
> 
> 赞同：2
> 
> 时间：2013-01-03T10:32:06.560
> 
> 标签：c#, asp.net-mvc-4, visual-studio-2012, tinymce, nuget-package

我已将`TinyMCE.MVC.Jquery`and下载`TinyMCE.MVC.Jquery.Sample`到一个新的 MVC.NET 4 项目中，但是我似乎无法让它显示在示例`TinyMCESampleJQuery`cshtml 页面中。

我只改变了

```
content_css: "@Url.Content("~/Content/Site.css")", 
```

指向我的样式表并添加了 jquery 和 tinymce 引用

```
<script src="@Url.Content("~/Scripts/tinymce/jquery.tinymce.js")" type="text/javascript"></script>

<script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script> 
```

我需要做任何其他事情才能让它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:03:02.417

好的，所以我尝试了一些方法，并且成功了！

我从我的 tinymce cshtml 中删除了 jquery 链接，并将布局页面中的 jquery 脚本包移动到并且有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:51:28.930

您是否引用了那里的样式表并将所需的图像添加到您的项目中？

# java - 在java中复制多个文件

> ID：14137078
> 
> 赞同：1
> 
> 时间：2013-01-03T10:32:25.257
> 
> 标签：java

我试过了

```
 private boolean CopyFiles(List<File> selected)
{
    try {
        File mNewFile = new File("/home/ubuntu/Desktop");
        mNewFile.createNewFile();
        FileUtils.copyFile(selected,mNewFile);
        return true;
    } catch (IOException ex) {
        Logger.getLogger(CommonMethod.class.getName()).log(Level.SEVERE, null, ex);

    }   

    return false;
} 
```

在复制文件 FileUtild.copyFile(File src, File dest) 方法的上述代码中，不支持多个文件复制有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:54:42.010

我假设您正在使用 org.apache.commons.io.FileUtils 并且“/home/ubuntu/Desktop”是一个目录。在这种情况下，您可以这样做：

```
nNewFile.mkdirs();
for(File f : selected) {
    FileUtils.copyFileToDirectory(f, nNewFile);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:57:47.953

您可以使用`org.apache.commons.io.FileUtils`将文件从一个位置复制到另一个位置

```
private void copyFiles(List<File> selected, File destinationDirectory)
{
    for(File file : selected){
       try {
          if (!destinationDirectory.exists())
            destinationDirectory.mkdir();
          FileUtils.copyFileToDirectory(file,destinationDirectory);

        } catch (IOException ex) {
          Logger.getLogger(CommonMethod.class.getName()).log(Level.SEVERE, null, ex);

        }   
    }
} 
```

# javascript - 呈现div后加载Google webfont？

> ID：14137079
> 
> 赞同：-1
> 
> 时间：2013-01-03T10:32:25.830
> 
> 标签：javascript, html, css, fonts, font-face

> **可能重复：**
> [在呈现网页之前等待字体加载](https://stackoverflow.com/questions/4712242/wait-for-fonts-to-load-before-rendering-web-page)

我在 html 的头部添加 kite one google webfont

```
<link href='http://fonts.googleapis.com/css?family=Kite+One' rel='stylesheet' type='text/css'> 
```

**我在做什么：**

*   我正在构建带有 div 的结构（如 pinterest）的盒子，其中包含带有风筝一种字体的内容。

*   并像在 pinterest 中一样排列这些盒子。

**字体加载缓慢：**

*   在带有风筝的css类之后，一种字体称为带有备用字体的框加载。然后当风筝一种字体替换备用字体时，框会调整 UI 的大小。（这只在第一次加载字体时发生）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:51:07.373

如果字体从谷歌加载缓慢，请尝试从谷歌下载并将其**托管在您自己的网站上。**

还要使用**Chrome 中的开发人员工具进行调查，然后单击网络。**并查看它实际花费了多少时间，这可能是导致加载缓慢的其他原因，如果在缓慢的项目之后加载字体，则会出现字体太怪。

另外，如果是字体加载缓慢，每次速度都一样吗？您是否在以速度慢或有限制着称的网络上？

# facebook - 如何强制 Facebook 使用 https 进入标签 URL

> ID：14137080
> 
> 赞同：0
> 
> 时间：2013-01-03T10:32:32.507
> 
> 标签：facebook, tabs

我的服务器仅在根级别使用带有 htaccess 重定向的 https，当用户使用 http 连接从 FB 页面调用我的选项卡应用程序时，我丢失了已签名的请求。大家知道解决方法吗？调用标签时如何强制 Facebook 使用 https？谢谢卢克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:45:41.390

> 调用标签时如何强制 Facebook 使用 https？

理论上，应该为此使用 HTTP 状态代码 307（临时重定向）和 308（永久重定向），因为它们要求方法保持不变，因此客户端必须使用 POST 获取重定向到的资源再次相同的数据。

但是，我没有经验与现有的浏览器配合得有多好。

使用 JavaScript 可能更好地“重定向”客户端。当然，这需要一个仅使用 HTTP 可用的资源，并且*不会*在服务器端重定向到它的 HTTPS 对应物。

* * *

未来，这个“问题”会自行消失，我认为——自从 Facebook 去年底宣布他们将把所有用户转移到 HTTPS 以来；所以我认为从现在开始，我们将不再需要为画布/页面选项卡应用程序提供 HTTP URL，而只使用一个 HTTPS 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:39:17.303

我是这样解决的：

在 FBapp 管理器中，我将在接受 http 的不同服务器上创建的页面用作 http url。在此页面中，我使用了以下代码。

```
 $signed_request = $facebook->getSignedRequest();
 $page_id   = $signed_request["page"]["id"];
 $fql_query_url = "https://graph.facebook.com"
    ."/$page_id?fields=link"
."";
try {
    $fql_query_result = @file_get_contents($fql_query_url);
    $fql_query_obj = json_decode($fql_query_result, true);
} catch(Exception $o){   }
 $pageinfo = $fql_query_obj[link];
 $pageinfo = str_replace("http://","https://",$pageinfo);
 $tabpage = "$pageinfo"."?sk=app_$appId";
 echo "
 <!-- force tab iframe -->
 <script type=\"text/javascript\">
  top.location.replace('$tabpage');
 </script>
";
 ?> 
```

就这样

# oracle - 企业管理器 12c jmx 操作

> ID：14137082
> 
> 赞同：0
> 
> 时间：2013-01-03T10:32:36.113
> 
> 标签：oracle, jmx, oracle-enterprise-manager

想知道 OEM Cloud Control 12c 是否支持 JConsole 中的自定义 JMX 操作。我已经对我的 java 应用程序进行了检测，以添加一些 JMX 操作，这些操作将字符串作为参数，进行一些处理并返回结果。

示例：类似于[add() 操作](http://docs.oracle.com/javase/tutorial/jmx/mbeans/standard.html)

我尝试使用 jmxcli 实用程序来创建元数据插件，但看起来 JMX 操作的参数（或参数）应该在创建插件时进行硬编码。是否有任何其他方法可以在 OEM 中对用户定义的参数运行 JMX 操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:18:30.617

这可以使用自定义 UI 来完成，此 QueryDescriptor 的范围应为“USER”。自定义 UI 将用于输入此值，并且此值将在 JMX fetchlet 中使用。

# mongodb - 亚马逊AWS提示

> ID：14137090
> 
> 赞同：2
> 
> 时间：2013-01-03T10:32:51.300
> 
> 标签：mongodb, amazon-web-services, tomcat7, amazon-elastic-beanstalk, amazon-elasticache

我必须为 Web 应用程序设置服务器环境。我必须使用 aws，到目前为止，它看起来很适合这个目的。

我需要：

*   一个可扩展的 Tomcat 7 webapp 服务器
*   会话复制！
*   一个 mongodb 数据库集群（？）

据我认为它可以与：

*   可扩展的 Tomcat 7 我可以使用弹性 beantalk 轻松完成。
*   会话复制可以与 elasticache 一起使用
*   似乎我必须“手动”执行 mongodb 集群，所以我创建了一些 ec2 实例来执行此操作。

我有一些问题。

1.  成本会相当高。最低设置是 2 个 ec2 实例和一个用于弹性疼痛的实例
2.  唯一能自动缩放的是弹性豆茎，这意味着我也必须处理好它。（好吧，对于 mongodb 实例，我也可以使用平衡器）
3.  如果是 mongodb ec2 实例，我需要自己设置每个实例

你知道如何：

*   降低成本（特别是一开始，会有点多，不是吗？）？
*   让管理更轻松？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:42:50.413

如果您安装 mongo，请查看：[AWS_NoSQL_MongoDB.pdf](http://media.amazonwebservices.com/AWS_NoSQL_MongoDB.pdf)。副本集的一个成员在您使用的可用区之外，甚至在同一区域之外是非常习惯的做法，这样您就可以在发生故障时进行热备份。

关于价格 - 实验（负载测试）并找到适合您的较小实例类型。另外，请记住关闭未使用的实例

关于管理 - 有 AWS 控制台和许多第 3 方产品。此外，Netflix[还发布了一些不错的管理工具](https://github.com/Netflix/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:13:41.373

使用 Elastic Beanstalk 可以轻松完成 Web 服务器的自动缩放，但您可以独立使用它。在此处查看有关自动缩放的文档：http: [//aws.amazon.com/autoscaling/](http://aws.amazon.com/autoscaling/)

它有几个功能可以帮助您节省大部分计算成本；

*   一个是通过根据负载自动更改您正在使用的 Web 服务器的**数量**来扩展（最重要的是）的能力。您可以定义最小数量（例如 1）和最大数量。系统可以观察一组指标（请求数、CPU 负载......）并决定何时添加或减少实例。
*   第二个是能够根据您的使用情况更改扩展策略并增加或减少机器的**大小。**如果您发现它更具成本效益，您可以使用中型实例并切换到大型或超大型实例。我们鼓励您尝试不同的尺码，看看哪种尺码最适合您。

使用 Elastic Cache，既可以帮助您进行会话复制，又可以降低您的 DB 机器上的负载。您可以在那里缓存您的频繁查询输出（首页、主类别页面...），并获得更好的性能，并使用更少的数据库实例。它支持 Memecached 客户端，这使得使用几乎任何编程语言进行开发都非常容易。

您应该检查 Couchbase 而不是 MongoDB（参见[比较](http://vschart.com/compare/mongodb/vs/couchbase)）。它在规模上更健壮、更可靠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:47:45.780

Elastic BeanStalk 是减少 Web/App 服务器管理开销的最佳选择。但是，如果还没有进行过多的开发，我建议将 DynamoDB 用于管理地役权方面。

但是也要检查成本。性能和管理在 DynamoDB 中非常棒

# iphone - 如何从json中检索数据

> ID：14137094
> 
> 赞同：-1
> 
> 时间：2013-01-03T10:32:58.267
> 
> 标签：iphone, objective-c

我是 iPhone 开发的新手。我得到了`json`回应。

如何将`Drug`值与下面的 json 字符串分开：

```
{"arrCDrugEntity":
    [
       {
       "DrugID":1,
       "Drug":"Benadril",
       "Quantity":"",
       "Comment":"",
       "FunctionStatus":false,
       "ResultString":"",
       "ErrorString":""
       },
       {
       "DrugID":2,
       "Drug":"Dcold",
       "Quantity":"",
       "Comment":"",
       "FunctionStatus":false,
       "ResultString":"",
       "ErrorString":""
       },  
       { 
       "DrugID":3,
       "Drug":"Dolo",
       "Quantity":"",
       "Comment":"",
       "FunctionStatus":false,
       "ResultString":"",
       "ErrorString":""
       },  
       {
       "DrugID":4,
       "Drug":"Paracitamol",
       "Quantity":"",
       "Comment":"",
       "FunctionStatus":false,
       "ResultString":"",
       "ErrorString":""
        },
        { 
        "DrugID":5,
        "Drug":"Panadol",
        "Quantity":"",
        "Comment":"",
        "FunctionStatus":false,
        "ResultString":"",
        "ErrorString":""
        },
        {
        "DrugID":6,
        "Drug":"Pudin Hara",
        "Quantity":"",
        "Comment":"",
        "FunctionStatus":false,
        "ResultString":"",
        "ErrorString":""
         }
    ],
    "FunctionStatus":true,
    "UserID":-1,
    "DeliveryAddress":"",
    "ResultString":"",
    "ErrorString":""
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:40:20.693

```
NSString *str=@"http://your_web_server/your_file....";
NSURL *url=[NSURL URLWithString:str];
        NSData *data=[NSData dataWithContentsOfURL:url];
        NSError *error=nil;
        id *response=[NSJSONSerialization JSONObjectWithData:data options:
                                NSJSONReadingMutableContainers error:&error]; 

NSLog("Your JSON Object: %@ Or Error is: %@, response, error); 
```

以下代码用于检索 json 数据

```
Dictionary *json = [myString JSONValue];

// Get the objects you want, e.g. output the second item's client id
NSArray *items = [json valueForKeyPath:@"arrCDrugEntity"];
NSLog(@" client Id : %@", [[items objectAtIndex:1] objectForKey:@"clientId"]); 
```

愿这对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:40:34.333

您可以使用[NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)来执行此操作。

```
NSData *response = [yourJSONString dataUsingEncoding:NSUTF8StringEncoding];
NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData: response options: NSJSONReadingMutableContainers error: &err]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T10:40:45.713

在粘贴之前先将你的 JSON 通过一个 JSON 格式化程序，更容易阅读，使用这个网站

[http://jsonformatter.curiousconcept.com/](http://jsonformatter.curiousconcept.com/)

其次，找到好的JSON解析器，我个人使用SBJSON，找到here

[http://stig.github.com/json-framework/](http://stig.github.com/json-framework/)

下载后，很容易解析，如下所示

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"drugData" ofType:@"json"];
NSData *myData = [NSData dataWithContentsOfFile:filePath];
NSString *responseString = [[NSString alloc] initWithData:myData encoding:NSUTF8StringEncoding];
 NSDictionary *MainJSON = [responseString JSONValue];

NSArray *array = [MainJSON valueForKey:@"arrCDrugEntity"];

for(int i = 0; i < [array count]; i++)
    {
        NSDictionary *temp = [array objectAtIndex:i];
        NSLog(@"%@", [temp valueForKey:@"Drug"]);
    } 
```

编辑：更新循环，更好的解析方式，这意味着您可以循环遍历每个单独的药物对象，如果您想将数据解析为药物对象类，则更容易（如果需要）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T10:42:59.260

使用此代码

```
#import "JSONKit.h"

 NSDictionary *dictionary = [stringData objectFromJSONString];
 NSArray *arrayOfDrugs=[NSArray alloc] initWithArray:[dictionary valueForKey:@"arrCDrugEntity"];

 for (NSDictionary *drugDic in arrayOfDrugs)
 {
  NSLog(@"drug id is :%@",[drugDic valueForKey:@"DrugID"]);
  NSLog(@"drug is :%@",[drugDic valueForKey:@"Drug"]);
  NSLog(@"Quantity is :%@",[drugDic valueForKey:@"Quantity"]);
  NSLog(@"Comment is :%@",[drugDic valueForKey:@"Comment"]);
  NSLog(@"FunctionStatus is :%i",[[drugDic valueForKey:@"FunctionStatus"] intValue]);
  NSLog(@"ResultString is :%@",[drugDic valueForKey:@"ResultString"]);
  NSLog(@"ErrorString is %@",[drugDic valueForKey:@"ErrorString"]);
 } 
```

使用简单的[JSON 文件](https://github.com/johnezang/JSONKit) ，但您必须在 JSON 文件的构建设置中禁用 ARC。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-03T11:09:44.140

`SBJson.h`在您的类中导入并使用`JSONValue`将 json 字符串转换为字典的方法。

```
NSDictionary *dict = [yourJsonString JSONValue];
    NSArray *arr =  [dict valueForKey:@"arrCDrugEntity"];
    NSMutableArray *drugArray = [[NSMutableArray alloc] init];
    for (NSDictionary *drug in arr) {
        [drugArray addObject:[drug valueForKey:@"Drug"]];
    }
    NSLog(@"drugArray:%@",drugArray); 
```

我想这会对你有所帮助。

# android - 如何在线性布局中居中相对布局

> ID：14137096
> 
> 赞同：4
> 
> 时间：2013-01-03T10:32:59.337
> 
> 标签：android, android-layout, layout-gravity

我想在此图像上水平和垂直居中块 L3，你能帮我使用布局结构吗？右侧是菜单的当前结构。谢谢。

![在此处输入图像描述](../Images/f363a0518fcc4e9e70fb0bfd96ad6d27.png)

这是 layout.xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/BaseLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@color/mainmenu_background" >

<ImageView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="fitXY"
    android:src="@drawable/main_menu_background" />

<LinearLayout
    android:id="@+id/l1"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <!-- Top menu -->

    <LinearLayout
        android:id="@+id/l2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <RelativeLayout
            android:id="@+id/TopMenuHolder"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/main_menu_background_header"
            android:gravity="left"
            android:orientation="horizontal"
            android:visibility="visible" >

            <ImageView
                android:id="@+id/logo"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:src="@drawable/logo" />

            <LinearLayout
                android:id="@+id/TopRightButtonsHolder"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_centerVertical="true"
                android:orientation="horizontal"
                android:visibility="visible" >

                <RelativeLayout
                    android:id="@+id/sinscrire"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <ImageButton
                        android:id="@+id/login_registerbutton"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_centerVertical="true"
                        android:background="@color/transparent"
                        android:scaleType="fitXY"
                        android:src="@drawable/main_menu_sinscrire_button" />

                    <TextView
                        android:id="@+id/sinscrire_text"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_centerHorizontal="true"
                        android:layout_centerVertical="true"
                        android:text="@string/cpr_sinscrite_title_text"
                        android:textColor="@color/cpr_menubutton_black"
                        android:textSize="@dimen/cpr_small_menubutton_title_text_size"
                        android:textStyle="bold|italic" />
                </RelativeLayout>

                <RelativeLayout
                    android:id="@+id/connexion"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <ImageButton
                        android:id="@+id/login_loginbutton"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_centerVertical="true"
                        android:background="@color/transparent"
                        android:scaleType="fitXY"
                        android:src="@drawable/main_menu_logout_button" />

                    <TextView
                        android:id="@+id/connexion_text"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_centerHorizontal="true"
                        android:layout_centerVertical="true"
                        android:text="@string/cpr_connexion_title_text"
                        android:textColor="@color/cpr_menubutton_white"
                        android:textSize="@dimen/cpr_small_menubutton_title_text_size"
                        android:textStyle="bold|italic" />
                </RelativeLayout>
            </LinearLayout>
        </RelativeLayout>
    </LinearLayout>
    <!-- End of Top menu -->

    <!-- Middle menu -->

    <LinearLayout
        android:id="@+id/l3"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_gravity="center_vertical|center_horizontal"
        android:orientation="vertical" >

        <RelativeLayout
            android:id="@+id/MiddleMenu"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal" >

            <LinearLayout
                android:id="@+id/MiddleLeftButtonsHolder"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="left"
                android:orientation="horizontal"
                android:visibility="visible" >

                <RelativeLayout
                    android:id="@+id/Parametres"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <ImageButton
                        android:id="@+id/optionsmenu_settings"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_centerVertical="true"
                        android:background="@color/transparent"
                        android:scaleType="fitXY"
                        android:src="@drawable/main_menu_options_button" />

                    <LinearLayout
                        android:id="@+id/options_container"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_centerInParent="true"
                        android:layout_gravity="left"
                        android:orientation="horizontal" >

                        <ImageView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:background="@drawable/options_icon" />

                        <TextView
                            android:id="@+id/parametres_text"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="@string/cpr_parametres_title_text"
                            android:textColor="@color/cpr_menubutton_black"
android:textSize="@dimen/cpr_small_menubutton_title_text_size"
                            android:textStyle="bold|italic" />
                    </LinearLayout>
                </RelativeLayout>

                <RelativeLayout
                    android:id="@+id/Aide"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <ImageButton
                        android:id="@+id/optionsmenu_info"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_centerVertical="true"
                        android:background="@color/transparent"
                        android:scaleType="fitXY"
                        android:src="@drawable/main_menu_help_button" />

                    <LinearLayout
                        android:id="@+id/help_container"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_centerInParent="true"
                        android:layout_gravity="left"
                        android:orientation="horizontal" >

                        <ImageView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:background="@drawable/help_icon" />

                        <TextView
                            android:id="@+id/aide_text"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="@string/cpr_aide_title_text"
android:textColor="@color/cpr_menubutton_black"
android:textSize="@dimen/cpr_small_menubutton_title_text_size"
                            android:textStyle="bold|italic" />
                    </LinearLayout>
                </RelativeLayout>
            </LinearLayout>

            <LinearLayout
                android:id="@+id/MiddleRightButtonsHolder"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:layout_toRightOf="@id/MiddleLeftButtonsHolder"
                android:orientation="horizontal"
                android:visibility="visible" >

                <RelativeLayout
                    android:id="@+id/Caisse"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <ImageButton
                        android:id="@+id/cashiericon"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_centerVertical="true"
                        android:background="@color/transparent"
                        android:scaleType="fitXY"
                        android:src="@drawable/main_menu_cashier_button" />

                    <LinearLayout
                        android:id="@+id/caisse_container"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_centerInParent="true"
                        android:layout_gravity="left"
                        android:orientation="horizontal" >

                        <ImageView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:background="@drawable/cashier_icon" />

                        <TextView
                            android:id="@+id/caisse_text"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="@string/cpr_caisse_title_text"
                            android:textColor="@color/cpr_menubutton_white"
android:textSize="@dimen/cpr_small_menubutton_title_text_size"
                            android:textStyle="bold|italic" />
                    </LinearLayout>
                </RelativeLayout>
            </LinearLayout>
        </RelativeLayout>
        <!-- End of Middle menu -->

        <!-- Main menu -->

        <RelativeLayout
            android:id="@+id/MainMenu"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/MiddleMenu"
            android:layout_marginBottom="5dp"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:layout_marginTop="10dp" >

            <ImageView
                android:id="@+id/main_menu_black_rect"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_centerVertical="true"
                android:scaleType="fitXY"
                android:src="@drawable/main_menu_black_rect" />

            <RelativeLayout
                android:id="@+id/play_for_real"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="15dp"
                android:layout_marginTop="20dp" >

                <ImageButton
                    android:id="@+id/realmoneybutton"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:background="@color/transparent"
                    android:scaleType="fitStart"
                    android:src="@drawable/main_menu_play_for_real_button" />

                <ImageView
                    android:id="@+id/play_for_real_img_icon"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBottom="@id/realmoneybutton"
                    android:layout_alignRight="@id/realmoneybutton"
                    android:background="@color/transparent"
                    android:src="@drawable/main_menu_play_for_real_button_icon" />

                <LinearLayout
                    android:id="@+id/play_for_money_text_container"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_margin="5dp"
                    android:orientation="vertical" >

                    <TextView
                        android:id="@+id/play_for_real_title"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/cpr_play_for_real_title_text"
                        android:textColor="@color/cpr_menubutton_white"
                        android:textSize="@dimen/cpr_menubutton_title_text_size"
                        android:textStyle="bold" />

                    <TextView
                        android:id="@+id/play_for_real_desc"
                        android:layout_width="221dp"
                        android:layout_height="wrap_content"
                        android:text="@string/cpr_play_for_real_title_desc"
                        android:textColor="@color/cpr_menubutton_white"
                        android:textSize="@dimen/cpr_menubutton_desc_text_size" />
                </LinearLayout>
            </RelativeLayout>

            <RelativeLayout
                android:id="@+id/play_for_fun"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/play_for_real"
                android:layout_marginLeft="15dp"
                android:layout_marginTop="5dp" >

                <ImageButton
                    android:id="@+id/playmoneybutton"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:background="@color/transparent"
                    android:scaleType="fitXY"
                    android:src="@drawable/main_menu_play_for_fun_button" />

                <ImageView
                    android:id="@+id/play_for_fun_img_icon"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBottom="@id/playmoneybutton"
                    android:layout_alignRight="@id/playmoneybutton"
                    android:background="@color/transparent"
                    android:src="@drawable/main_menu_play_for_fun_button_icon" />

                <LinearLayout
                    android:id="@+id/play_for_fun_text_container"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_margin="5dp"
                    android:orientation="vertical" >

                    <TextView
                        android:id="@+id/play_for_fun_title"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/cpr_play_for_fun_title_text"
                        android:textColor="@color/cpr_menubutton_white"
                        android:textSize="@dimen/cpr_menubutton_title_text_size"
                        android:textStyle="bold" />

                    <TextView
                        android:id="@+id/play_for_fun_desc"
                        android:layout_width="221dp"
                        android:layout_height="wrap_content"
                        android:text="@string/cpr_play_for_fun_title_desc"
                        android:textColor="@color/cpr_menubutton_white"
                        android:textSize="@dimen/cpr_menubutton_desc_text_size" />
                </LinearLayout>
            </RelativeLayout>

            <RelativeLayout
                android:id="@+id/tutoriel"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/play_for_fun"
                android:layout_marginLeft="15dp"
                android:layout_marginTop="5dp" >

                <ImageButton
                    android:id="@id/previewbutton"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:background="@color/transparent"
                    android:scaleType="fitXY"
                    android:src="@drawable/main_menu_tutorial_button" />

                <TextView
                    android:id="@+id/tutoriel_title"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:text="@string/cpr_tutoriel_title_text"
                    android:textColor="@color/cpr_menubutton_white"
                    android:textSize="@dimen/cpr_menubutton_title_text_size"
                    android:textStyle="bold" />
            </RelativeLayout>
        </RelativeLayout>
    </LinearLayout>
    <!-- End of Main menu -->

</LinearLayout>
<!-- End of Main Container -->

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T11:13:36.330

这是一个以内部为中心的相对布局的线性布局。

将您的代码从“l3”布局移动到“l4”布局：

![在此处输入图像描述](../Images/c63a717addf1ccc737c1194aad39d989.png)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/l1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/l2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#56a"
        android:orientation="vertical" >

        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="l2" />
    </LinearLayout>

    <RelativeLayout
        android:id="@+id/l3"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#a56" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="l3" />

        <RelativeLayout
            android:id="@+id/l4"
            android:layout_width="100dp"
            android:layout_height="100dp"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:background="#5a6" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="l4" />

        </RelativeLayout>
    </RelativeLayout>

</LinearLayout> 
```

# php - 如何在php中检查stdClass对象是否为空？

> ID：14137104
> 
> 赞同：39
> 
> 时间：2013-01-03T10:33:26.687
> 
> 标签：php

> **可能重复：**
> [如何在 PHP 中检查对象是否为空](https://stackoverflow.com/questions/9412126/how-to-check-if-an-object-is-empty-in-php)

我有这个空对象

```
Array (
    [cart_items] => stdClass Object
        (
        )
) 
```

当我使用`empty()/is_null()`时，它不起作用。当我使用`sizeof($object)`时，它返回一个。

我怎样才能检查它？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-01-03T10:38:43.083

先转换成数组

```
$tmp = (array) $object;
var_dump(empty($tmp)); 
```

原因是，一个对象就是一个对象，没有有用的“空对象”定义，因为那里有足够多的类，只包含方法，但没有属性。他们应该被认为是“空的”吗？

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-03T10:39:17.687

检查是否`count( (array)$yourObject) ) == 0`。

但我最好定义我自己的类，并为它提供一个有意义的`isEmpty()`方法。

# c++ - 只要用户愿意就接受数据

> ID：14137106
> 
> 赞同：-3
> 
> 时间：2013-01-03T10:33:37.820
> 
> 标签：c++

我正在从事与超市计费相关的项目。我想知道如何从用户那里接受数据，只要他。我当前的代码如下：

```
#include < stdio.h > 
#include < iostream.h > 
#include < conio.h >

class product //start of class
{

    int itemno;
    char name[100];
    char itemtype[50];
    float price;
    float quantity;
    float total;

    public:

    void addprod();
    void calculate();
    void accept();
    void display();

}; //end of class

void product::addprod() //starting of addproduct()
{
    cout << "enter the name of the poduct:";
    gets(name);

    cout << "enter its type:";
    gets(itemtype);

    cout << "enter its price:";
    cin >> price;

} //end of addproduct()

void product::accept() //starting of accept()
{
    cout << "enter the item name:";
    gets(name);

    cout << "enter the quantity:";
    cin >> quantity;

}

void product::calculate() {
    total = price * quantity;
}

void product::display() {
    cout << "\nName";
    cout << name;

    cout << "\nPrice";
    cout << price;
    cout << "\nquantity";
    cout << quantity;
    cout << "\ntotal\n\n\n\n\n";
    cout << total;

}

void main() {
    product s1[3];

    for (int i = 0; i < 3; i++) {
        s1[i].addprod();
    }

    for (i = 0; i < 3; i++) {
        s1[i].accept();

    }

    for (i = 0; i < 3; i++) {
        s1[i].calculate();

    }

    for (i = 0; i < 3; i++) {
        s1[i].display();

    }
} 
```

我`main()`接受所有内容 3 次，但我希望它选择所有内容，只要用户愿意。我怎样才能做到这一点？

请检查这个......

```
 #include<stdio.h>
 #include<iostream.h>
 #include<conio.h>
  int i;

 class product           //start of class
    {

            int itemno;
            char name[100];
            char itemtype[50];
            float price;
            float quantity;
            float total;

            public:

            void addprod() ;
            void calculate();
            void accept();
            void display()   ;

     }    ;                 //end of class

     void product::addprod()   //starting of addproduct()
        {
            cout<<"enter the name of the poduct:";
            gets(name)   ;

            cout<<"enter its type:";
            gets(itemtype);

            cout<<"enter its price:";
            cin>>price;

        }                                       //end of addproduct()

     void product::accept()           //starting of accept()
     {
            cout<<"enter the item name:";
            gets(name)  ;

            cout<<"enter the quantity:";
            cin>>quantity;

     }

     void    product::calculate()
        {
                    total=price*quantity;
         }

     void product::display()
        {
                cout<<"\nName";
                cout<<name;

                cout<<"\nPrice";
                cout<<price ;
                cout<<"\nquantity";
                 cout<<quantity;
                 cout<<"\ntotal\n\n\n\n\n";
                cout<<total;

        }

        void main()
        {
         int ch;
         product s1[3];

         cout<<"\n      1\.      Add product";
         cout<<"\n     2\.      Make Bill";
         cout<<"\n     3\.      Display Bill";
         cout<<"\n     0\.      Exit";
         cout<<"\n     Enter your choise(1,2,3,9)"     ;
         cin>>ch;

         switch(ch)
         {

         case 1:          cout<<"\n press 0 to exit";
                                 for(i=1;i!=0;i++)
                                s1[i].addprod();
                                break;
            } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:51:41.477

一些关于好成绩的建议，就像我 3 年前做的项目一样 :)

*   你需要做一个菜单

*   您需要添加一些输入验证

*   您还需要添加更多选项。我的项目已经运行了约 300 行

对于依赖于用户输入的程序运行，您需要输入一个变量，然后使用它来控制您的循环。

但是，我强烈建议，如果你想要一个好的成绩，你可以把它转换成一个菜单驱动的程序。这将自动解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:03:13.973

我已经看过你的代码，据我了解，你需要在你的 main 中有一个 do-while 循环。这是一个演示。

```
Do {  
  here goes your main code....... 
  Cout<<"do you want to add more data? "; 
  char ans;
  cin>>ans; 
}while(ans!=n); 
```

现在它将运行直到用户输入'n'。希望它会有用。

# c# - 声明接受匿名对象作为其参数的方法是否有任何指导方针？

> ID：14137107
> 
> 赞同：1
> 
> 时间：2013-01-03T10:33:38.220
> 
> 标签：c#, c#-4.0

我想编写一个接受匿名对象作为参数的方法。在声明这样的方法时，参数应该声明为`object`or`dynamic`吗？

1.  `public static void DoSomethingWith(dynamic details) { }`或者
2.  `public static void DoSomethingWith(object details) { }`

我的应用程序是一个面向 .NET 4.0 的独立应用程序。

我似乎更喜欢 1 的一个原因是，当您看到显示方法签名的 IntelliSense 提示时，`dynamic`参数比`object`.

除非有更好的理由选择 2，否则我会坚持使用 1。

您对此有何经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:37:07.273

如果您的目标是框架 4.0 或更高版本，那么最好使用动态。

```
public static void DoSomethingWith(dynamic details)
{
    Console.Write(details.X);
    Console.Write(details.Y);
} 
```

并称它为：

```
DoSomethingWith(new { X = "ABC", Y = 10 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:57:06.870

这在很大程度上取决于上下文。显示了两个现有答案，讨论了`dynamic`允许访问成员的功能，但是那里存在一个**巨大**的问题，即调用者并不明显它们*旨在提供*这些成员。在这些情况下，*具有*这些成员的类型几乎在所有情况下都是首选。

总的来说，of 的使用`dynamic`应该仅限于您实际需要它的那些场景（与动态类型交谈）。如果您实际上是在与常规 POCO 对象（可能是匿名类型等）交谈，那么`object`可能会避免一些复杂情况 - 但从根本上说`object`，`dynamic`两者都是在`object`您开始访问成员之前实现的。

通常，如果您将裸信息传递`object`给一个方法，您会期望该方法检查它，也许是通过反射。出于这些目的，`object`绝对没问题，并提供对`.GetType().GetProperties()`等的直接访问而没有任何间接。

基本上：如果没有更多关于你在方法内部所做的事情的上下文，就不可能得出结论是“更好”或“更合适”，并且*在*方法内部`dynamic`并且`object`可以简单地互换（在任何一个方向上，演员总是会成功） .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:48:34.037

在这种情况下， using`dynamic`有一些我可以看到的优点`object`并且没有缺点，所以你的选项 1 显然是要走的路。

选项 1 允许您使用您的参数，就像您使用真实类型声明它一样（您不能这样做，因为它是匿名的）：

```
public static void DoSomethingWith(dynamic details)
{
  var temp = details.Property; // Correct, as long as the object has a property called Property
} 
```

使用选项 2，此代码将是非法的，您将不得不求助于`InvokeMethod()`类似的方法，使用和阅读更麻烦，但没有提供任何真正的优势。

# jquery - 在 html5 中为 android 显示 xml 数据

> ID：14137111
> 
> 赞同：0
> 
> 时间：2013-01-03T10:33:54.633
> 
> 标签：jquery, xml, ajax, html

我正在为 html5 中的 android 开发应用程序，我需要读取这样的 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<noticias>
    <dict>
        <titulo>Example of title</titulo>
        <body>Here goes the body</body>
        <subtitulo>whololoooooooo</subtitulo>
        <key>dep</key>
        <dep>general</dep>
        <imgurl></imgurl>
        <url>http://www.upcomillas.es/</url>
    </dict>
    <dict>
        <titulo>Another title</titulo>
        <body>The body</body>
        <subtitulo>whololoooooooo</subtitulo>
        <key>dep</key>
        <dep>general</dep>
        <imgurl></imgurl>
        <url>http://www.upcomillas.es/</url>
    </dict></noticias> 
```

我正在用 jQuery 做这件事。但是当我尝试我的 html 时（我的 html 是[这个](http://dl.dropbox.com/u/12291198/noticias.html)）

我正在尝试使用我在网上找到的这段代码，但我在 chrome、safari、firefox 中打开它，它什么也没做！！！:(

我试图找到一种方法来阅读这个 xml，但我真的在互联网上找不到任何东西。有人可以帮忙吗？

非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:25:30.553

只是一个例子，首先，但您可能会寻找一个[与 xml 一起使用的 jQuery 模板引擎](https://www.google.de/search?q=jquery+template+xml)：

```
<html>
<body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
    $(document).ready(function() {
        $.get("noticias.xml", function(data) {
            var dicts = $(data).find("dict");
            for (var i = 0; i < dicts.length; i++) {
                var dict = dicts[i];
                $("body").append("<p><a href=\"" + xmlText(dict, "url") + "\">" + xmlText(dict, "titulo") + "</a></p>");
                $("body").append("<p>" + xmlText(dict, "body") + "</p>");
                $("body").append("<p>" + xmlText(dict, "subtitulo") + "</p>");
                $("body").append("<p>" + xmlText(dict, "key") + "</p>");
                $("body").append("<p>" + xmlText(dict, "dep") + "</p>");
            }
        }, "xml");
    });

    function xmlText(elem, name) {
        return $(elem).find(name).text();
    }
</script>
</body>
</html> 
```

# sql - 更新表中的列

> ID：14137116
> 
> 赞同：1
> 
> 时间：2013-01-03T10:34:27.727
> 
> 标签：sql, sql-server-2008

我有一个表 my.File_List

```
|id | name | position_name | format   |
|1  |ONE   |  X            | A_B_C_D_1|
|2  |TWO   |  Y            | A_N_M_E_2|
|3  |TWO   |  A            | X_Y_9_O_3| 
```

我需要一个查询来替换每一行的格式数据，例如 A_(position_name)_B_C_D

例如。对于 id=1

我希望格式化列数据类似于 A_X_B_C_D，其中 X 是 position_name。请提出更新查询..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:52:14.927

更通用的解决方案`without hard coding position of '_'`

```
select substring(format, 1, charindex('_',format)) + position_name + 
       substring(format, charindex('_',format),LEN(format))
--Results for first row
'A_X_B_C_D_1'

select substring(format, 1, charindex('_',format)) + position_name + '_B_C_D'
--Results for first row
'A_X_B_C_D' 
```

更新查询；

```
Update File_List
Set format = substring(format, 1, charindex('_',format)) + position_name + 
             substring(format, charindex('_',format),LEN(format)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:54:24.653

尝试：

```
SELECT 
  STUFF(Format, 3, 0, position_name+'_')
FROM 
  TableName 
```

使用更新

```
UPDATE 
  TableName 
SET Format=STUFF(Format, 3, 0, position_name+'_') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T10:45:02.597

对于：`A_B_C_D`_`A_X_B_C_D`

```
UPDATE File_List
SET format = SUBSTRING(format, 1, 2) + position_name +
             '_' + SUBSTRING(format, 3, LEN(format)) 
```

对于：`A_B_C_D`_`A_X_C_D`

```
UPDATE File_List
SET format = SUBSTRING(format, 1, 2) + position_name +
             SUBSTRING(format, 4, LEN(format)) 
```

**编辑：**说`LEN(format)-4`而不是`LEN(format)`在第一种情况下将丢弃最后 2 个字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T10:45:12.550

这将为您提供所需的输出

```
UPDATE  my.File_List 
SET format = SUBSTRING(format  ,1,2) + position_name + '_' + SUBSTRING(format ,3,5) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-03T10:46:32.753

我可以假设它总是处于相同的位置吗？

如果是这样，这样的工作：

```
UPDATE File_List SET format = LEFT(format,2) + position_name + '_' + SUBSTRING(format, 3, LEN(format)-4) 
```

这样，丢弃最后 2 个字符，它总是在索引 2 中插入 position_name，并且不关心格式的大小。

# javascript - 谷歌地图 - 聚类标记

> ID：14137117
> 
> 赞同：2
> 
> 时间：2013-01-03T10:34:30.537
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3, markerclusterer

我有一个谷歌地图（使用 API V3），我需要在其中设置标记聚类。基本上，标记位置是通过 JSON 加载的，它返回问题（1 或 2）、纬度和经度。

我试图设置聚类，但是即使 JSON 调用实际上返回点，地图上也没有显示任何内容。这是我想出的东西：

```
var map;

function myMap(){   
  var latlng = new google.maps.LatLng(35.94, 14.37);

var mapOptions = {
zoom: 10,
center: latlng,
panControl: false,
mapTypeControl: false,
mapTypeId: google.maps.MapTypeId.ROADMAP,
scaleControl: false,
streetViewControl: false,
overviewMapControl: false,
zoomControl: true};

map = new google.maps.Map(document.getElementById("map"), mapOptions);  
loadMarkers();
}

function loadMarkers() {    

var mcOptions = {gridSize: 50, maxZoom: 15};
var issueSevereMarkers = [];
var issueSlightMarkers = [];

 markerIssueHigh = new google.maps.MarkerImage("img/icn_issue_high.png",
new google.maps.Size(10.0, 10.0),
new google.maps.Point(0, 0),
new google.maps.Point(5.0, 5.0)
);

markerIssueMedium = new google.maps.MarkerImage("img/icn_issue_medium.png",
new google.maps.Size(10.0, 10.0),
new google.maps.Point(0, 0),
new google.maps.Point(5.0, 5.0)
);

var issuePoints = $.ajax({
  type: 'GET',
  url: 'http://www.mydomain.com/php/markers.php?&jsoncallback=?',
  dataType: 'JSONp',
  timeout: 5000,
  success: function(data) {         
        $.each(data, function(i,item){

        if (item.Issue == 1) {  
            // If severely congested                
              var latLng = new google.maps.LatLng(item.Latitude, item.Longitude);
              var issueSevereMarker = new google.maps.Marker({'position': latLng});
              issueSevereMarkers.push(issueSevereMarker);

        } else if (item.Issue == 2) {
            // If slightly congested
              var latLng = new google.maps.LatLng(item.Latitude, item.Longitude);
              var issueSlightMarker = new google.maps.Marker({'position': latLng});
              issueSlightMarkers.push(issueSlightMarker);
        }   

    });

    var markerClusterSevere = new MarkerClusterer(map, issueSevereMarkers);
    var issueSlightMarkerCluster = new MarkerClusterer(map, issueSlightMarkers);
  },
  error: function(data) {

  }
});     
} 
```

基本上我正在做的是从 JSON 中获取结果，如果问题是类型 1，我将一个 pin 添加到 issueSevereMarkers 数组，否则我将它添加到 issueSlightMarkers 数组。这应该加载带有标记点的数组。我不确定我在那里做错了什么。

我遇到的另一个问题是，当标记被分组时，集群器基本上会返回一个自定义图标。当我放大并查看单个标记时，如何设置标记以使用 markerIssueHigh 和 markerIssueMedium 图像？

我正在为 V3 使用 Clustere (http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/reference.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:39:41.110

要实际使用您的自定义图标，您需要在[google.maps.Marker](https://developers.google.com/maps/documentation/javascript/reference#Marker)构造函数中引用它们

```
 if (item.Issue == 1) {  
        // If severely congested                
          var latLng = new google.maps.LatLng(item.Latitude, item.Longitude);
          var issueSevereMarker = new google.maps.Marker({position: latLng, 
                                                          icon:markerIssueHigh});
          issueSevereMarkers.push(issueSevereMarker);

    } else if (item.Issue == 2) {
        // If slightly congested
          var latLng = new google.maps.LatLng(item.Latitude, item.Longitude);
          var issueSlightMarker = new google.maps.Marker({position: latLng,
                                                          icon:markerIssueMedium});

          issueSlightMarkers.push(issueSlightMarker);
    } 
```

对于为什么什么都不会出现，看不到任何明显的东西，这里是一个使用集群器的工作地图的[链接](http://www.geocodezip.com/v3_MW_example_map3_clustered.html)（从 XML 而不是 JSON 获取其数据）。

这个[类似的问题](https://stackoverflow.com/questions/5258553/adding-simple-marker-clusterer-to-google-map)向集群添加了一个自定义标记。

# internet-explorer-8 - 在 IE8 setInterval 方法不起作用

> ID：14137121
> 
> 赞同：0
> 
> 时间：2013-01-03T10:34:38.600
> 
> 标签：internet-explorer-8, setinterval, intervals

当我在 IE8 中尝试 setInterval 方法时，它不起作用

```
<body>
   <script type="text/javascript">
     function msg()
     {
       alert("hello world ");
       document.writeln("hello world <br>");       
     }
     //setInterval("msg();", 3000);
     //setInterval(msg(), 3000);
     //setInterval(msg, 3000);
     setInterval(function(){msg()}, 3000);
   </script>
</body> 
```

当谷歌我得到了几个答案

[window.setInterval jQuery 函数在 IE8 上不起作用](https://stackoverflow.com/questions/4745224/window-setinterval-jquery-function-does-not-work-on-ie8) [setinterval 方法不起作用](https://stackoverflow.com/questions/10678432/setinterval-method-not-working)

[http://social.msdn.microsoft.com/Forums/nl-NL/netfxjscript/thread/ff7447f0-3c18-484b-a037-eaf9f60574a8](http://social.msdn.microsoft.com/Forums/nl-NL/netfxjscript/thread/ff7447f0-3c18-484b-a037-eaf9f60574a8) 但是当我在ie8上尝试这些东西时它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:33:43.053

`setInterval`在您的代码中运行良好。问题在于你正在用它做什么。执行`document.writeln`正在清除您的文档，其中包括您的 JavaScript。要查看它的实际效果，只需`<p>foo</p>`在主体中添加某个位置，您就会看到它在`document.writeln`执行后消失。删除该`document.writeln`行，您会看到`alert`如预期的那样一遍又一遍地发生。

我相信 JavaScript 将继续在 WebKit 浏览器中运行，即使它已被淘汰，但不会在 Internet Explorer、Firefox 和 Opera 等非 WebKit 浏览器中运行。看看[这个问题](https://stackoverflow.com/questions/5253603/setinterval-not-able-to-run-document-writeln)，了解如何做的一些想法。

# active-directory - Active Directory 是否适合这些要求？

> ID：14137123
> 
> 赞同：0
> 
> 时间：2013-01-03T10:34:40.007
> 
> 标签：active-directory, passwords, user-accounts, account-management

我即将为我的公司建立一个新的帐户管理系统。用户是访问我们的一些 Web 应用程序的外部客户。一些用户是访问相同 Web 应用程序的内部操作员，但具有一定的权限。内部操作员还使用 java 应用程序访问 SQL 数据库以进行信息检索。

**要求**

*   如果用户忘记了他/她的密码，用户可以收到一封带有重置链接的电子邮件，其中包含一个唯一的 id，允许用户通过点击链接输入新密码。唯一 id 应是 AD 系统的一部分，并且还具有“有效”时间戳。
*   如果我们收到一个包含 100000 个用户的列表，这些用户将成为系统的一部分，那么以自动方式添加它们应该是可管理的。

我是 Active Directory 的新手，想知道它是否适合这些要求，还是使用任何其他系统更容易管理？

我还将使用 CAS 进行 Web 应用程序的身份验证和单点登录。

# excel - Perforce 从工作区中删除文件并在 Perforce 中反映该文件

> ID：14137124
> 
> 赞同：0
> 
> 时间：2013-01-03T10:34:40.463
> 
> 标签：excel, vba, perforce

是否可以从您的工作区中删除一个文件，然后在 perforce 中点击提交，然后该文件将从 perforce 服务器中删除？

```
open for read: F

\LocalSource\Perforce\MainBranch\blah\New Text Document.txt: The system cannot find the file specified. 

Submit aborted -- fix problems then use 'p4 submit -c 4799463'.
Some file(s) could not be transferred from client. 
```

当我尝试提交时收到此消息。在 Subversion 中，我可以做到这一点。我在互联网上看了一下，看起来这是不可能的，但我想我会在这里检查一下。

（我想要这个的原因是因为我有一个电子表格，我想从电子表格中提取模块并将它们放入源代码管理。但有时该电子表格中的模块可能会被删除，我希望能够只签入那些已更改并在服务器上进行删除，而无需进入 perforce 客户端并删除其中标记为删除的文件。）一种方法是删除 perforce 中的所有文件，然后对空目录进行虚拟提交。然后再次添加从电子表格中提取的所有文件并进行添加。但是在我的版本历史中，我总是会有一个完全删除的版本。

有什么简单的想法，我可以使用的特殊命令吗？

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:40:35.883

如果您直接在磁盘上删除文件，而不使用 Perforce 客户端删除它们（例如，您使用电子表格命令直接删除这些文件），这称为“离线工作”，并且为了告诉 Perforce 您已经制作了这些文件更改，您只需要返回您的 P4V 窗口并使用“协调离线工作”。

有关完整说明，请参阅[从 Perforce 服务器断开连接工作。](http://kb.perforce.com/article/2)

另请参阅此相关问题：[将工作区的脱机更改同步到 Perforce](https://stackoverflow.com/questions/6458927/sync-offline-changes-to-a-workspace-into-perforce?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:50:31.427

Perforce 有一个**命令行客户端**(http://www.perforce.com/product/components/perforce_commandline_client)，您应该能够通过**Shell**函数从 Excel 执行任何 exe 文件。

# php - MySQL查询：选择最新结果

> ID：14137125
> 
> 赞同：2
> 
> 时间：2013-01-03T10:34:51.923
> 
> 标签：php, mysql, sql, greatest-n-per-group

我有一个包含数据的 MySQL 表，并且想为进行的特定测试选择最新条目。

```
table: research
columns: id (int), projectid (int), test (varchar),
         when (datetime), result (longtext) 
```

行示例：

```
1, 6, "Test1", 01-01-2013 12:15, "AAAAA"
2, 6, "Test1", 01-01-2013 13:15, "BBBBB"
3, 6, "Test2", 01-01-2013 16:00, "CCCCC"
4, 6, "Test2", 01-01-2013 16:15, "DDDDD"
5, 6, "Test2", 01-01-2013 16:30, "EEEEE" 
```

如果我想要“测试 1”的最新结果，我使用..

```
SELECT *
FROM research
WHERE projectid=6 AND test='Test1'
ORDER BY when DESC limit 1 
```

但是如何在一个查询中获得单个项目中每个测试的最新结果？我试过：

```
SELECT research.*
FROM research INNER JOIN (SELECT MAX(id) AS id
                          FROM research
                          WHERE projectid=".$ProjectId."
                          GROUP BY test) ids
     ON research.id = ids.id
WHERE research.projectid=".$ProjectId 
```

但它没有给我最新的测试结果，它给了我最古老的..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:37:04.640

子查询背后的想法是它分别获取`WHEN`每个 projectid 和测试的最新日期。然后将其结果连接回原始表。

```
SELECT  a.*
FROM    research a
        INNER JOIN
        (
            SELECT projectid, test, MAX(`when`) maxDate
            FROM research
            GROUP BY projectid, test
        ) b ON  a.projectid = b.projectid AND
                a.test = b.test AND
                a.`when` = b.maxDate 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/cfc65/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:40:29.150

您可以在日期上使用`WHERE`带有`IN`该过滤器的a：`max(when)`

```
select *
from research r
where r.projectid = 6
   and r.`when` in (select max(`when`)
                   from research
                   group by projectid, test); 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/cfc65/15)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T11:13:22.080

试试这个：

```
SELECT test,when,result
FROM research r1
WHERE when = (SELECT max(when)
            FROM research r2
            WHERE r2.test=r1.test) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T10:40:16.763

因此，要为每个项目的每个测试获取最大`when`列的行，您可以使用以下命令：

```
SELECT r.*
FROM research AS r 
  JOIN
    ( SELECT projectid, test, MAX(`when`) AS maxw
      FROM research
      GROUP BY projectid, test
    ) AS m
    ON  m.projectid = r.projectid
    AND m.test = r.test
    AND m.maxw = r.`when` ; 
```

* * *

对于单个项目的每个测试（比如 project `6`）：

```
SELECT r.*
FROM research AS r 
  JOIN
    ( SELECT test, MAX(`when`) AS maxw
      FROM research
      WHERE projectid = 6
      GROUP BY test
    ) AS m
    ON  m.test = r.test
    AND m.maxw = r.`when` 
WHERE r.projectid = 6 ; 
```

上的索引`(projectid, test, when)`将有助于提高上述两个查询的效率。

* * *

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T10:40:41.213

请尝试以下查询。

```
SELECT `e`.* FROM (
SELECT `r`.*
FROM research `r`
ORDER By `r`.`when`
DESC
)`e`
WHERE `e`.`projectid`= $ProjectId GROUP BY `e`.`test` 
```

我希望这有帮助。

谢谢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T13:52:07.357

分区内按测试分区和按日期排序。使用分析函数。不需要上面/下面的复杂查询......

# ios - 使用 Dropbox iOS SDK 下载照片

> ID：14137127
> 
> 赞同：1
> 
> 时间：2013-01-03T10:35:02.393
> 
> 标签：ios, listview, download, dropbox, photos

我需要向用户显示 Dropbox 中所有照片的列表，并提供使用它们的可能性（在项目中下载）。像用户从他的相册中挑选照片一样简化。我正在使用 Dropbox SDK v1.3.3。

**更新：**

这是我到目前为止所做的：

```
- (void)restClient:(DBRestClient *)client loadedMetadata:(DBMetadata *)metadata {
    if (metadata.isDirectory) {
        // Available files extensions
        NSArray *validExtensions = [NSArray arrayWithObjects:@"jpg", @"jpeg", @"png", nil];
        // Local path
        NSArray *libraryPaths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES);
        NSString *LibraryDirectory = [libraryPaths objectAtIndex:0];
        LibraryDirectory = [LibraryDirectory stringByAppendingString:@"/Dropbox/"];
        NSString *localPath = @"";

        if (![[NSFileManager defaultManager] fileExistsAtPath:LibraryDirectory]){
            NSError* error;
            if(  [[NSFileManager defaultManager] createDirectoryAtPath:LibraryDirectory withIntermediateDirectories:NO attributes:nil error:&error])
                ;// success
            else {
                NSLog(@"[%@] ERROR: attempting to write create Dropbox directory", [self class]);
                NSAssert( FALSE, @"Failed to create directory maybe out of disk space?");
            }
        }
        // Work with dropbox files array
        for (DBMetadata *file in metadata.contents) {
            NSString* extension = [[file.path pathExtension] lowercaseString];
            if(![file isDirectory] && [validExtensions indexOfObject:extension]!=NSNotFound) {
                localPath = [LibraryDirectory stringByAppendingPathComponent:[file filename]];
                // Add file to Dropbox Directory
                BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:localPath];
                if(!fileExists) [[self restClient] loadFile:file.path intoPath:localPath];
            }
        }
    }
} 
```

刚刚离开显示来自 Dropbox 本地文件夹的照片列表。也许有人知道该怎么做？我希望它像相册中的那样：

```
- (void)getDropboxPhotoList:(NSString *)path {
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    /* source must be not from gallery, but from local folder */
    //imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    imagePicker.delegate = self;

    UIPopoverController *pop = [[UIPopoverController alloc] initWithContentViewController:imagePicker];
    [pop presentPopoverFromBarButtonItem:(UIBarButtonItem *)dropboxButton permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    popover = pop;
    [imagePicker release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:04:18.623

[Dropbox API](https://www.dropbox.com/developers/start)显示了一些示例代码，用于列出给定文件夹中的文件：

[列出文件夹中的文件](https://www.dropbox.com/developers/start/files#ios)

列出文件夹中的文件您可以使用以下调用列出刚刚上传到的文件夹中的文件：

```
[[self restClient] loadMetadata:@"/"]; 
```

其余客户端将使用以下回调之一调用您的委托：

```
- (void)restClient:(DBRestClient *)client loadedMetadata:(DBMetadata *)metadata {
    if (metadata.isDirectory) {
        NSLog(@"Folder '%@' contains:", metadata.path);
    for (DBMetadata *file in metadata.contents) {
        NSLog(@"\t%@", file.filename);
    }
    }
}

- (void)restClient:(DBRestClient *)client
    loadMetadataFailedWithError:(NSError *)error {

    NSLog(@"Error loading metadata: %@", error);
} 
```

元数据对象是您获取用户 Dropbox 中文件和文件夹信息的方式。调用 loadMetadata: on / 将加载根文件夹的元数据，并且由于它是一个文件夹，因此 contents 属性将包含该文件夹中包含的文件和文件夹的列表。建议保留此数据，以便下次您想对文件执行某些操作时，可以将其当前元数据与您存储的元数据进行比较，以辨别文件是否已更改。查看 DBMetadata.h 以查看元数据对象拥有的所有信息。

# hibernate - org.hibernate.MappingException: + 不兼容的类更改错误

> ID：14137128
> 
> 赞同：1
> 
> 时间：2013-01-03T10:35:06.483
> 
> 标签：hibernate, gwt, maven

我的项目正在使用 gwt+maven+hibernate 。并在我的项目中使用库来创建会话工厂

**配置配置 = new AnnotationConfiguration(); sessionFactory = configuration.configure(configFile).buildSessionFactory();**

并将其返回给我的应用程序。但我得到了例外：

```
 java.lang.IncompatibleClassChangeError: Implementing class  
at java.lang.ClassLoader.defineClass1(Native Method)    
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)  
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)  
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)  
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)     
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)   
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)   
at java.security.AccessController.doPrivileged(Native Method)   
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)   
at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload$WebAppClassLoaderExtension.findClass(JettyLauncher.java:372)    
at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:366)     
at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:337)     
at com.appops.server.data.hibernate.SessionProvider.createSessionFactory(SessionProvider.java:47)   
at com.appops.server.data.hibernate.HibernateDataSourceConnector.init(HibernateDataSourceConnector.java:39)     
at com.engile.server.services.ConfigurationServlet.init(ConfigurationServlet.java:49)   
at com.google.inject.servlet.ServletDefinition.init(ServletDefinition.java:117)     
at com.google.inject.servlet.ManagedServletPipeline.init(ManagedServletPipeline.java:82)    
at com.google.inject.servlet.ManagedFilterPipeline.initPipeline(ManagedFilterPipeline.java:102)     
at com.google.inject.servlet.GuiceFilter.init(GuiceFilter.java:172)     
at org.mortbay.jetty.servlet.FilterHolder.doStart(FilterHolder.java:97)     
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)     
at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:593)     
at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)     
at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)     
at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)    
at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)   
at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:468)     
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)     
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)    
at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)  
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)     
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)    
at org.mortbay.jetty.Server.doStart(Server.java:222)    
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)     
at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)   
at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)     
at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)    
at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)     
at com.google.gwt.dev.DevMode.main(DevMode.java:311) 
```

但是当我使用

**配置配置 = 新配置（）；sessionFactory = configuration.configure(configFile).buildSessionFactory();**

```
Its throwing :

Caused by: org.hibernate.MappingException: An AnnotationConfiguration instance is required to use <mapping class="com.common.Stock"/>
    at org.hibernate.cfg.Configuration.parseMappingElement(Configuration.java:1600)
    at org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:1555)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1534)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1508)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1428)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1414) 
```

**我的 pom.xml 看起来像：**

```
<dependencies>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-servlet</artifactId>
            <version>${gwtVersion}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-user</artifactId>
            <version>${gwtVersion}</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
            <classifier>sources</classifier>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-simple</artifactId>
            <version>1.6.1</version>
        </dependency>
        <dependency>
            <groupId>appops_shared</groupId>
            <artifactId>appops_shared</artifactId>
            <version>1.0</version>
        </dependency>
        <dependency>
            <groupId>appops_client</groupId>
            <artifactId>appops_client</artifactId>
            <version>1.0</version>
        </dependency>
        <!-- <dependency> <groupId>appops_server</groupId> <artifactId>appops_server</artifactId> 
            <version>1.0</version> </dependency> -->
        <dependency>
            <groupId>commons-codec</groupId>
            <artifactId>commons-codec</artifactId>
            <version>1.7</version>
        </dependency>
        <dependency>
            <groupId>commons-collections</groupId>
            <artifactId>commons-collections</artifactId>
            <version>3.2.1</version>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.21</version>
        </dependency>
        <dependency>
            <groupId>org.apache.lucene</groupId>
            <artifactId>lucene-core</artifactId>
            <version>3.4.0</version>
        </dependency>
        <dependency>
            <groupId>local.mvp4g</groupId>
            <artifactId>mvp4g</artifactId>
            <version>1.4.0</version>
        </dependency>

        <dependency>
            <groupId>aopalliance</groupId>
            <artifactId>aopalliance</artifactId>
            <version>1.0</version>
        </dependency>
        <dependency>
            <groupId>commons-fileupload</groupId>
            <artifactId>commons-fileupload</artifactId>
            <version>1.2</version>
        </dependency>
        <dependency>
            <groupId>com.google.gwt.inject</groupId>
            <artifactId>gin</artifactId>
            <version>2.0.0</version>
        </dependency>
        <dependency>
            <groupId>org.reflections</groupId>
            <artifactId>reflections</artifactId>
            <version>0.9.8</version>
        </dependency>
        <dependency>
            <groupId>com.googlecode.gwtupload</groupId>
            <artifactId>gwtupload</artifactId>
            <version>0.6.4</version>
        </dependency>

        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>mailapi</artifactId>
            <version>1.4.3</version>
        </dependency>
        <!-- <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.1.7.Final</version>
        </dependency> -->
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.1.0.Final</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.6.1</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>

        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.6.1</version>
        </dependency>
        <dependency>
            <groupId>com.googlecode.gwtphonegap</groupId>
            <artifactId>gwtphonegap</artifactId>
            <version>1.8.1.0</version>
        </dependency>
        <dependency>
            <groupId>org.atmosphere</groupId>
            <artifactId>atmosphere-gwt-server</artifactId>
            <version>1.0.1</version>
        </dependency>
        <dependency>
            <groupId>org.atmosphere</groupId>
            <artifactId>atmosphere-gwt-poll</artifactId>
            <version>1.0.1</version>
        </dependency>
        <dependency>
            <groupId>org.atmosphere</groupId>
            <artifactId>atmosphere-gwt-common</artifactId>
            <version>1.0.1</version>
        </dependency>
        <dependency>
            <groupId>org.atmosphere</groupId>
            <artifactId>atmosphere-compat-tomcat</artifactId>
            <version>1.0.1</version>
        </dependency>
        <dependency>
            <groupId>org.atmosphere</groupId>
            <artifactId>atmosphere-compat-tomcat7</artifactId>
            <version>1.0.1</version>
        </dependency>
        <dependency>
            <groupId>org.atmosphere</groupId>
            <artifactId>atmosphere-compat-jbossweb</artifactId>
            <version>1.0.1</version>
        </dependency>
        <dependency>
            <groupId>com.google.inject</groupId>
            <artifactId>guice</artifactId>
            <version>3.0</version>
        </dependency>
        <dependency>
            <groupId>com.google.inject.extensions</groupId>
            <artifactId>guice-assisted-inject</artifactId>
            <version>2.0</version>
        </dependency>
        <dependency>
            <groupId>com.google.inject.extensions</groupId>
            <artifactId>guice-servlet</artifactId>
            <version>3.0</version>
        </dependency>
        <dependency>
            <groupId>com.google.oauth-client</groupId>
            <artifactId>google-oauth-client</artifactId>
            <version>1.11.0-beta</version>
        </dependency>
        <dependency>
            <groupId>com.google.oauth-client</groupId>
            <artifactId>google-oauth-client-servlet</artifactId>
            <version>1.11.0-beta</version>
        </dependency>
        <dependency>
            <groupId>org.atmosphere</groupId>
            <artifactId>atmosphere-runtime</artifactId>
            <version>1.0.1</version>
        </dependency>
        <dependency>
            <groupId>org.atmosphere</groupId>
            <artifactId>atmosphere-gwt-client</artifactId>
            <version>1.0.1</version>
        </dependency>

        <dependency>
            <groupId>net.sf.ehcache</groupId>
            <artifactId>ehcache</artifactId>
            <version>1.5.0</version>
        </dependency>
        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1.2</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-c3p0</artifactId>
            <version>4.1.7.Final</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate</artifactId>
            <version>3.0.5</version>
        </dependency>

        <dependency>
            <groupId>gwt-oauth2</groupId>
            <artifactId>gwt-oauth2</artifactId>
            <version>0.2</version>
            <classifier>alpha</classifier>
        </dependency>
        <dependency>
            <groupId>com.google.code.gson</groupId>
            <artifactId>gson</artifactId>
            <version>2.1</version>
        </dependency>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-dev</artifactId>
            <version>${gwtVersion}</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>

        <dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-commons-annotations</artifactId>
    <version>3.2.0.Final</version>
</dependency>
<dependency>
    <groupId>org.hibernate.javax.persistence</groupId>
    <artifactId>hibernate-jpa-2.0-api</artifactId>
    <version>1.0.0.Final</version>
</dependency>
<dependency>
    <groupId>javassist</groupId>
    <artifactId>javassist</artifactId>
    <version>3.12.0.GA</version>
</dependency>
            <dependency>
    <groupId>javax.transaction</groupId>
    <artifactId>jta</artifactId>
    <version>1.1</version>
</dependency>
            <dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-annotations</artifactId>
    <version>3.5.6-Final</version>
</dependency>

    </dependencies> 
```

我不明白缺少哪个 jar，或者我使用的 jar 版本不正确。有人可以帮我摆脱这个例外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:46:53.807

根据[http://docs.oracle.com/javase/7/docs/api/java/lang/IncompatibleClassChangeError.html](http://docs.oracle.com/javase/7/docs/api/java/lang/IncompatibleClassChangeError.html)：

> 当某些类定义发生不兼容的类更改时抛出。当前执行的方法所依赖的某个类的定义已经改变。

我注意到你的类路径中有两个可能冲突的休眠类，一个来自**com.appops.server.data.Hibernate**另一个来自**org.hibernate**，这可能是什么导致了你的问题？

# javascript - 使用 display: block 查找最近的元素

> ID：14137129
> 
> 赞同：0
> 
> 时间：2013-01-03T10:35:18.743
> 
> 标签：javascript, jquery

我有一个特定的 jQuery 选择，我正在寻找最接近的元素（如自身或父元素），即块元素 ( `display: block`)。
样式不一定是内联的，所以选择器`[style*=display:block]`对我来说并非在所有情况下都有效。我认为我需要使用计算样式，但需要一种有效的方法来做到这一点（如果可能的话没有`$(this).parents().andSelf().each`循环）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:44:11.337

正如@EricG 在评论中发布的那样，[检测 DOM 元素的内联/块类型](https://stackoverflow.com/questions/2880957/detect-inline-block-type-of-a-dom-element#answer-2881008)是问题的答案：

```
var elementStyle  =  element.currentStyle || window.getComputedStyle(element, ""); 
var displayType   =  elementStyle .display; 
```

# social-networking - 用于社交 RESTful 层的 Neo4j Spring 数据 POC

> ID：14137130
> 
> 赞同：1
> 
> 时间：2013-01-03T10:35:18.977
> 
> 标签：social-networking, neo4j, aspectj, spring-data-neo4j, spring-data-mongodb

开始着手一个新项目...为社交网络平台提供服务的**RESTful层。**
**Neo4j**是我主要数据存储的明显选择，我之前有机会使用**Neo**，但没有利用**Spring Data将****POJO**映射到节点的能力，这似乎很方便。

## 目标：

1.  该层应该提供类似于*Facebook Graph API*的支持，它为每个*实体/对象*定义相关的属性和连接，可以从 URL 引用。
    [FB 图形 API](http://developers.facebook.com/docs/reference/api/)

2.  如果可能的话，我想避免传输将被序列化到域实体/从域实体传输的对象，并将我的域 pojo 用作传输到/从客户端传输的 JSON。

例子：

*   ***HTTP GET /profile/{id}/?fields=...&connections=...***响应将是**Profile**对象，其中包含请求的 URL。

*   ***HTTP GET /profile/{id}/stories/?fields=..&connections=...&page=..&sort=...***响应将是根据请求**的Story对象列表。**

### 相关版本：

*   Spring 框架*3.1.2*
*   Spring Data Neo4j *2.1.0.RC3*
*   Spring Data MongoDB *1.1.0.RC1*
*   *方面J* 1.6.12
**   杰克逊*1.8.5**

 *为了简单起见，我们有***Profile***、***Story***节点和它们之间的***Role***关系。

```
public abstract class GraphEntity {
@GraphId
protected Long id;
} 
```

***配置文件节点***

```
@NodeEntity
@Configurable
public class Profile extends GraphEntity {

// Profile fields
private String firstName;
private String lastName;

// Profile connections  
@RelatedTo(type = "FOLLOW", direction = Direction.OUTGOING)
private Set<Profile> followThem;

@RelatedTo(type = "BOOKMARK", direction = Direction.OUTGOING)
private Set<Story> bookmarks;

@Query("START profile=node({self}) match profile-[r:ROLE]->story where r.role = FOUNDER and story.status = PUBLIC")
private Iterable<Story> published;
} 
```

***故事节点***

```
@NodeEntity
@Configurable
public class Story extends GraphEntity {

// Story fields
private String title;
private StoryStatusEnum status = StoryStatusEnum.PRIVATE;

// Story connections
@RelatedToVia(type = "ROLE", elementClass = Role.class, direction = Direction.INCOMING)
private Set<Role> roles;
} 
```

***角色关系***

```
@RelationshipEntity(type = "ROLE")
public class Role extends GraphEntity {

@StartNode
private Profile profile;
@EndNode
private Story story;

private StoryRoleEnum role;
} 
```

起初我没有使用**AspectJ**支持，但我发现它对我的用例非常有用，因为它在 POJO 和实际节点之间生成分隔线，因此我可以根据请求和[域驱动轻松请求属性/连接设计方法](http://www.javacodegeeks.com/2011/02/domain-driven-design-spring-aspectj.html)看起来很不错。

***问题 1 - AspectJ：***

假设我想为一个对象定义默认字段，无论是否在 URL 中请求，这些字段都将返回给客户端......所以我在这些字段上尝试**了 @FETCH**注释，但它似乎在使用时不起作用方面**J。**目前我是这样做的。。

```
public Profile(Node n) {
    setPersistentState(n);
    this.id = getId();
    this.firstName = getFirstName();
    this.lastName = getLastName();  
} 
```

这是实现这一目标的正确方法吗？**即使使用AspectJ**也应该支持**@FETCH**注释吗？我将很高兴获得有关 AspectJ + Neo4j 的示例/博客几乎没有找到任何东西....

 *****问题 2 - 分页：***

例如，我想在请求特定连接时支持分页

***/profile/{id}/stories/***，如果故事相关如下

```
// inside profile node
@RelatedTo(type = "BOOKMARK", direction = Direction.OUTGOING)
private Set<Story> bookmarks; 
```

***/profile/{id}/stories/***，如果故事相关如下

```
 // inside profile node
@Query("START profile=node({self}) match profile-[r:ROLE]->story where r.role = FOUNDER and story.status = PUBLIC")
private Iterable<Story> published; 
```

分页是否支持开箱即用**@Query** || **@RelatedTo** || **@RelatedToVia**使用**Pageable**接口来检索**Page**而不是 Set/List/Iterable？限制和排序应该是动态的，具体取决于客户端的请求……我可以使用[Cypher Query DSL](https://github.com/neo4j/cypher-dsl)来实现，但更喜欢使用基本的……其他方法将被愉快地接受。

***问题 3 - 带有 {self} 的 @Query：***

有点愚蠢的问题，但我无能为力:)，似乎在节点实体中使用 @Query 时（使用 {self} 参数}，返回类型必须是 Iterable 这很有意义..让我们举个例子...... .

```
// inside profile node
@Query("START profile=node({self}) match profile-[r:ROLE]->story where r.role = FOUNDER and story.status = PUBLIC")
private Iterable<Story> published; 
```

当请求发布连接时：

```
 // retrieving the context profile
    Profile profile = profileRepo.findOne(id);
    // getting the publishe stories using AspectJ - will redirect to the backed node
    Iterable<Story> published = profile.getPublished();
    // set the result into the domain object - will throw exception of read only because the type is Iterable
    profile.setPublished(published); 
```

有解决方法吗？这不会创建另一个属性，它将是 Profile 中的 @Transiant ..

***问题 4 - 递归关系：***

我在传递/递归关系方面遇到了一些问题，在 Story 中分配新的 Profile 角色时，关系实体角色包含**@EndNode** story ，其中包含**角色连接**......其中之一是上面的上下文**角色**，它永远不会结束:) ...有没有办法配置弹簧数据引擎不创建这些永无止境的关系？

***问题 5 - 交易：***

也许我之前应该提到过，但我正在为 Neo4j DB 使用 REST 服务器，从之前的阅读中我了解到事务中不支持开箱即用？就像使用嵌入式服务器时一样，我有以下代码......

```
 Profile newProfile = new Profile();
    newProfile.getFollowThem().add(otherProfile);
    newProfile.getBookmarks().add(otherStory);
    newProfile.persist(); // or profileRepo.save(newProfile) 
```

使用 REST 服务器时，这会在事务中运行吗？这里的操作很少，如果一个失败全部失败？

***问题 6 - Mongo + Neo4j：***

我需要存储不具有关系性质的数据.. 例如提要、评论、按摩。
我考虑过与**MongoDB**集成来存储这些.. 我可以将域 pojo 字段/连接拆分到具有跨存储支持的 mongo/neo4j 吗？它会支持 AspectJ 吗？

现在就是这样......欢迎对我上面提出的任何方法发表任何评论......谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T12:15:27.670

开始回答，绝不完整：

也许升级到 .RELEASE 版本？

***问题 1***

如果要将 AspectJ 实体序列化为 JSON，则必须排除高级映射生成的内部字段（请参阅此[论坛讨论](http://forum.springsource.org/showthread.php?118137-Unable-to-convert-NodeEntity-object-to-JSON-with-Jackson&p=388992#post388992)）。

当您使用高级映射时，@Fetch 不是必需的，因为无论如何数据都是从数据库中读取的。

***问题2***

对于字段的分页，您可以尝试使用带有`@Query`和`LIMIT 100 SKIP 10`作为固定参数的密码查询。否则，您可以使用存储库/模板来实际使用分页信息填充实体字段中的集合。

***问题 3***

我不认为 an 的返回类型`@Query`必须是 an`Iterable`它也应该与其他类型（集合或具体类型）一起使用。你遇到什么问题？

为了创建递归关系 - 尝试先存储关系对象本身，然后再存储节点实体。或`template.createRelationshipBetween(start, end, type, allowDuplicates)`用于创建关系。

***问题 5***

当您在 REST 上使用 SDN 时，它可能表现不佳，因为现在底层实现使用 RestGraphDatabase 进行细粒度操作，而高级映射使用非常细粒度的调用。你有什么理由不想使用嵌入式模式吗？对于 REST 服务器，我肯定会使用简单映射并尝试主要使用密码处理读取操作。

使用 REST APi，每个 http-call 只有一个 tx，拥有更大事务的唯一选择是使用[rest-batch-api](http://docs.neo4j.org/chunked/milestone/rest-api-batch-ops.html)。

[在底层的rest-graph-database](https://github.com/neo4j/java-rest-binding#configuration-system-properties)中有一个伪事务支持，它将在一个“事务”中发出的批处理调用在一个批处理休息请求中执行。但是这些调用不能依赖于 tx 期间的读取结果，那些只会在 tx 完成后填充。在 SDN 中使用这种方法也存在一些问题，所以我为此禁用了它（它是 rest-graphdb 的配置选项/系统属性）。

***问题 6***

现在，对 MongoDB 和 Neo4j 的跨存储支持仅用于 JPA / 关系存储。我们曾经讨论过在 spring-data 项目之间进行跨存储引用，但没有跟进。***

# php - 发送tcp数据到ip

> ID：14137132
> 
> 赞同：1
> 
> 时间：2013-01-03T10:35:53.157
> 
> 标签：php, tcp

我的计划是建立一个本地网站（wamp？）。

在该网站上，您可以输入一个链接以获取时间（例如：time.windows.com）。当您点击发送时，它会将数据（网站的字符串）发送到 ip。

然后我收到可以用作变量的网站字符串。

这在php中可能吗？如果有怎么办？

我做了一张图来更好地解释它：

![在此处输入图像描述](../Images/9d9ef6b55f37b6eb7d1a057f123ecef6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:38:53.720

是的，这是可能的。您可以使用[`fsockopen`](http://php.net/manual/en/function.fsockopen.php)打开套接字连接。

# c# - 将 JSON 用于日常活动日志

> ID：14137139
> 
> 赞同：1
> 
> 时间：2013-01-03T10:36:25.187
> 
> 标签：c#, json, data-serialization

为了跟踪我的新年决心，我创建了`daily.log`以下格式的文件。

```
8:40 AM 1/2/2013

begin:755am
activity:enquired about 3x3 black board;bought book [beginning html 5]
waste:facebook;
meeting:old friend;mechanic
programming:none
blogpost:[asp.net deployment]
do:buy black board
done:
end:1045pm 
```

我正在创建一个简单的 C# 控制台应用程序，它会问我几个问题并相应地填写此文件。该工具的未来功能之一将是显示一个简单的仪表板样式网页，用于测量解决方案的进度等。

我想使用数据序列化或配置文件格式以这种方式存储日常活动信息，因为成熟的工具可用于这些格式而不是纯文本。

我以前从未使用过 JSON，我想知道 JSON 格式是否可以与 C# 独立使用（不涉及 javascript），即使可以，在这种情况下使用 JSON 是否合适。

如果不是 JSON，它的超集 YAML？或者是否有其他适合此目的的替代方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T10:40:21.587

您可以在 C# 中使用[JSON.NET](http://james.newtonking.com/pages/json-net.aspx)，而无需使用 javascript。而且我相信这些数据可以用 JSON 格式建模。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T10:41:08.650

如果您的目标是使用外部工具让它们识别并能够处理您的文件，那么比 JSON 更好的选择是使用 XML。这种格式更严格（您可以使用 XML Schema 来验证格式），并且可以使用 XML 的工具比用于 JSON 的工具要多得多。

.NET 框架还在`System.Xml`命名空间中包含对 XML 的广泛支持（请参阅[http://msdn.microsoft.com/en-us/library/system.xml(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.xml(v=vs.100).aspx)）。

话虽如此，JSON 没有理由不能与 C# 一起使用。我个人将 JSON.NET 库用于大多数 JSON 工作，它运行良好（参见[http://james.newtonking.com/projects/json-net.aspx](http://james.newtonking.com/projects/json-net.aspx)）。请注意，您在示例中显示的数据不是有效的 JSON。

祝你好运！

# android - Android ActionBar 自定义搜索视图

> ID：14137141
> 
> 赞同：45
> 
> 时间：2013-01-03T10:36:28.837
> 
> 标签：android, customization, actionbarsherlock, searchview

**--- 解决了问题 - 在编辑文本中添加了答案 ---**

我`ActionBar`在我的 Android 应用程序中使用 Sherlock。那里我想展示一个`SearchView`. 到目前为止它工作正常，但我意识到，我在尝试自定义它时做错了。

我这样创建它：

```
searchView.setQueryHint("Search: ");
searchView.setOnQueryTextListener(this);
searchView.setOnCloseListener(...);

searchMenuItem = menu.add("Search place");
searchMenuItem.setIcon(R.drawable.ic_action_search)
              .setActionView(searchView)
              .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM |  MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW); 
```

我想做两件事：

1.  更改显示在出现的文本字段中的文本“搜索”的颜色。看起来我用主题中的整体文本样式更改了它，但我希望我能以某种方式设置单独的颜色。

2.  打开此搜索视图时，它会出现在操作栏的左侧。但我需要它在右侧。图标（放大镜）实际上位于栏的右侧，但按下它会打开左侧的 EditTextfield。我尝试使用 LayoutParams，但在尝试使用 LayoutParams 将其添加到操作栏时，我遗漏了一些重要的东西。

![在此处输入图像描述](../Images/b99b3b8fad7eb39fb06602860151bf75.png)

所以希望有人可以帮助我。

非常感谢，托拜厄斯

**- - 编辑 - -**

好的，所以一件事已经解决了。通过 XML 添加 ActionBar 会使 TextEdit 向右。

```
getSupportMenuInflater().inflate(R.menu.activity_main, menu);
MenuItem searchItem = menu.findItem(R.id.action_search);
SearchView searchView = (SearchView) searchItem.getActionView();
Log.e(TAG, "searchView: " + searchView); 
```

在我的 menu.xml

```
<item android:id="@+id/action_search"
 android:title="Search"
 android:icon="@drawable/ic_action_search"          
 android:showAsAction="always"
 android:actionViewClass="com.actionbarsherlock.widget.SearchView" /> 
```

所以至少解决了一个谜（为什么这会有所作为）。但是新创建的 XML 在调用时不再关闭

```
searchMenuItem.collapseActionView(); 
```

所以还是有问题的。

**--- 编辑 2 ---**

只是让你知道。我找到了文本颜色的解决方案。可以通过使用 SearchView 的 AutoCompleteTextView 来实现：

```
AutoCompleteTextView searchText = (AutoCompleteTextView) searchView.findViewById(R.id.abs__search_src_text);
searchText.setHintTextColor(getResources().getColor(R.color.white));
searchText.setTextColor(getResources().getColor(R.color.white)); 
```

所以我遇到的最后一个问题是 SearchView 在提交文本时不再关闭。所以 collapseActionView() 等不起作用。有任何想法吗？

**--- 编辑 3 ---**

好的，我找到了解决方案。我不知道这是否是正确的方法，但是在使用时

```
((SearchView) searchMenuItem.getActionView()).setIconified(true); 
```

它关闭`EditText`

我必须这样做两次，因为第一次只是“删除”我的输入文本并显示“提示”，而第二次使用是“关闭”提示 EditText 并将 searchView 折叠到放大镜。笨拙的风格，但它的作品。:-)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-06-04T19:16:35.570

我做了一个类[SearchViewFormatter](https://gist.github.com/ademar111190/7d31dab71502e6a85b8a)来轻松格式化原生 SearchView android 小部件。一个例子：

```
new SearchViewFormatter()
            .setSearchBackGroundResource(R.drawable.my_bg)
            .setSearchIconResource(R.drawable.my_ic, true, false) //true to icon inside edittext, false to outside
            .setSearchVoiceIconResource(R.drawable.my_ic)
            .setSearchTextColorResource(R.color.my_color)
            .setSearchHintColorResource(R.color.my_color)
            .setSearchCloseIconResource(R.drawable.my_ic)
            .setInputType(InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS)
            .format(mSearchView); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-08-02T08:49:45.867

仅供参考，现在 ActionBar 支持 v7 appcompat 更改查询提示颜色、文本颜色、文本大小的方式：

```
import android.support.v4.view.MenuItemCompat;
import android.support.v7.widget.SearchView;
import android.support.v7.widget.SearchView.SearchAutoComplete;

...

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menu_home, menu);
    MenuItem searchItem = menu.findItem(R.id.item_search);
    mSearchView = (SearchView) MenuItemCompat.getActionView(searchItem);
    mSearchView.setOnQueryTextListener(this);
    mSearchView.setQueryHint(getString(R.string.text));
    SearchAutoComplete searchAutoComplete = (SearchAutoComplete) mSearchView.findViewById(android.support.v7.appcompat.R.id.search_src_text);
    searchAutoComplete.setHintTextColor(mRes.getColor(android.R.color.white));
    searchAutoComplete.setTextSize(14);

    return super.onCreateOptionsMenu(menu);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-06-09T11:45:23.640

我为这样的编辑文本做了圆角。

```
int searchPlateId = searchView.getContext().getResources().getIdentifier("android:id/search_plate", null, null);
        View searchPlate = searchView.findViewById(searchPlateId);
        searchPlate.setBackgroundResource(R.drawable.bg_white_rounded);

        int searchSrcTextId = getResources().getIdentifier("android:id/search_src_text", null, null);
        EditText searchEditText = (EditText) searchView.findViewById(searchSrcTextId);
        searchEditText.setTextColor(Color.BLACK);
        searchEditText.setHintTextColor(Color.LTGRAY);

        int closeButtonId = searchView.getContext().getResources().getIdentifier("android:id/search_close_btn", null, null);
        ImageView closeButtonImage = (ImageView) searchView.findViewById(closeButtonId);
        closeButtonImage.setColorFilter(ContextCompat.getColor(MainActivity.this, R.color.colorPrimary), PorterDuff.Mode.SRC_IN); 
```

**bg_white_background.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="#ffffff"/>
    <corners android:radius="8dp"/>
</shape> 
```

[![在点击搜索按钮之前](../Images/c38da5e7d86fcaea87bfb50a0fa49a1c.png)](https://i.stack.imgur.com/BqYR1.png)

[![点击搜索按钮后](../Images/af229805a387637525013fbdf354119b.png)](https://i.stack.imgur.com/Nicky.png)

```
<SearchView
                android:id="@+id/searchView"
                android:layout_width="match_parent"
                android:queryHint="Serach"
                android:layout_height="match_parent"></SearchView> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-03T11:04:54.893

解决您的第二个问题

更改此行：

```
.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM |  MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW); 
```

至：

```
.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM); 
```

仅在方法上使用`SHOW_AS_ACTION_IF_ROOM`参数`setShowAsAction()`

# android - 从 sqlite 在 vi ewflipper 中显示数据的问题

> ID：14137152
> 
> 赞同：1
> 
> 时间：2013-01-03T10:37:25.977
> 
> 标签：android, sqlite

> **可能重复：**
> [如何在 android 中使用 ViewFlipper 显示来自 sqlite 的内容](https://stackoverflow.com/questions/14133943/how-to-display-content-from-sqlite-using-viewflipper-in-android)

我有来自 sqlite 的数据，我想在 viewflipper 的帮助下根据 sqlite 中的记录一一显示数据，因为我正在使用哈希映射。更清楚地说，我现在在 sqlite 中有 2 条记录我想显示第一条记录和后来的 2 通过翻转我正在使用的记录

```
 cache = new ArrayList<String>();
    while (cursor.moveToNext())
    {
         String temp_bookid = cursor.getString(0);
         Log.i("temp_bookid",temp_bookid);
         String temp_desc=cursor.getString(1);
         byte[] temp_image1 = cursor.getBlob(2);
         byte[] temp_image2 = cursor.getBlob(3);
         String temp_id=cursor.getString(4);
         String temp_name = cursor.getString(5);
         String temp_bname=cursor.getString(6);
         cache.add(temp_id);
         cache.add(temp_bname);
         cache.add(temp_bookid);
         cache.add(temp_name);
         cache.add(temp_desc);
         cache.add(temp_image1.toString());
         cache.add(temp_image2.toString());
            Log.i("temp_id of the page in sqlite", temp_id);

            TextView txtDesc = (TextView) findViewById(R.id.tDescription);
            text = (TextView) findViewById(R.id.tTitle);
            text.setText(temp_name);

            txtDesc.setText(temp_desc);

            ImageView img = (ImageView)findViewById(R.id.smallImage);

            img.setImageBitmap(BitmapFactory.decodeByteArray(temp_image1, 0,temp_image1.length));
            txtName1 = (TextView) findViewById(R.id.tvName);
            txtName1.setText(temp_bname);

            break;
    }   

        mContext = this;
        vf = (ViewFlipper) this.findViewById(R.id.vfShow);
        vf.setOnTouchListener(new OnTouchListener() {
        @Override
            public boolean onTouch(final View view, final MotionEvent event) {
                detector.onTouchEvent(event);
                Log.i("ew","ae");

                return true;
            }
        }); 
```

使用上面的代码我只能设置第一个记录数据，因为我正在使用中断；如果我删除 break 的声明；它正在显示最后一条记录..

# windows - 使用 WDK 构建工具从 makefile 生成自定义错误消息

> ID：14137156
> 
> 赞同：0
> 
> 时间：2013-01-03T10:37:41.547
> 
> 标签：windows, wdk

我正在使用`build.exe`Windows Driver Kit 编译驱动程序。

构建驱动程序的系统需要设置特定的环境变量。如果没有，我希望构建失败并显示自定义错误消息。

有谁知道如何做到这一点？

我已经尝试通过将此测试添加到以下内容来向 stderr 输出消息`makefile.inc`：

```
all:
    echo My Custom Error 1>&2 
```

但是输出没有出现，构建过程也没有失败。我确实知道`all`目标已执行，因为我已经通过将输出重定向到文件来对此进行了测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:25:56.713

像这样的东西：

```
! IF "$(YOUR_ENV_VAR)"=="Your condition"
!     message BUILDMSG: Your message
! ELSE
!     INCLUDE $(NTMAKEENV)\makefile.def
! ENDIF 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:15:54.167

最后，我找到了解决方案。

Fe：如果你把它加到 中`makefile.inc`，你会强制它失败：

```
all:
    echo fatal error : Whatever error message you like 
```

请使用字符串“fatal error x”的确切格式（和小写），其中 x 可以替换为您想要的消息。

# c# - 从 C# 中的列表中选择指定的子类型

> ID：14137158
> 
> 赞同：1
> 
> 时间：2013-01-03T10:37:52.020
> 
> 标签：c#, types, type-conversion, type-inference

我有一个函数，当给定 a 时，`List<T>`会从中选择 a `List<V>`：`V : T`

目前的实现是：

```
public List<V> Subset<T, V>(IEnumerable<T> exo)
    where V : class
    where V : T
{
    return exo.Where(elem => elem is V).Select(elem => elem as V).ToList();
} 
```

虽然我觉得更简洁的东西应该起作用，因为它被声明`V`是一个子类`T`：

```
// Does not comile: can not implicitly convert List<T> to List<V>
public List<V> Subset<T, V>(IEnumerable<T> exo) where V : T
{
    return exo.Where(elem => elem is V).ToList();
} 
```

您能否解释一下为什么它无法推断出正确的类型，也许我目前的实现是最好的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T10:40:30.523

您可以使用[Enumerable.OfType](http://msdn.microsoft.com/en-us/library/bb360913.aspx)根据参数类型过滤序列：

```
return exo.OfType<V>().ToList(); 
```

为什么您的第二个代码不起作用 - 它从序列中选择 V 项，但结果类型仍然是`T`. 序列只是由某个谓词过滤（无论您在那里检查什么 - 是 V 类型的项目，或者项目不为空，或其他一些条件）。你知道你检查了什么，但编译器仍然将结果视为一系列过滤的基类对象。

而且你不能从方法返回基类对象的列表，它应该返回派生对象的列表。如果可能，那么您可以返回未过滤的基类列表。

# php - Azure 服务总线 PeekLock 在五秒后超时

> ID：14137160
> 
> 赞同：11
> 
> 时间：2013-01-03T10:38:02.703
> 
> 标签：php, azure, servicebus

我正在使用服务总线在 Azure 上构建一个消息队列，通过 PHP SDK 工作，并且在 PeekLock 消息超时太快时遇到了一些问题。

我可以使用 PeekLock 连接到队列并检索消息，但是，如果我删除消息的时间超过 5 秒，Azure 会引发 404 错误，指示锁已过期，并且消息会被放回队列中，就好像它从未被处理过。

这是我使用的一些测试代码的示例。假设在此示例中已加载 Azure SDK 并且已引用适当的命名空间。

```
<?php

  // .. load the sdk and namespaces etc ...

  $service_bus = ServicesBuilder::getInstance()->createServiceBusService([connection string goes here]);

  $options = new ReceiveMessageOptions();
  $options->setPeekLock();

  $message = $service_bus->receiveQueueMessage("[queue name here]", $options);
  print "message body is: " . $message->getBody();
  $service_bus->deleteMessage($message);

?> 
```

这段代码完美执行 - 检索消息，显示正文，然后删除消息。但是，如果我`sleep(5);`在 deleteMessage() 调用之前插入一个，服务总线 API 会返回以下错误：

> 错误：提供的锁无效。锁已过期，或者消息已从队列中删除。

通过 Azure 门户创建队列时，我将锁定超时时间明确设置为 5 分钟，并且我尝试在其他队列上设置不同的超时时间，并且所有队列仍然恢复为 5 秒到期。

我在这里做错了什么？

## 问题解决了：

我收到了 Azure 支持团队的回复，他们很快发现 Azure 门户没有保留在创建队列时选择的锁定持续时间。默认到期时间显然是 5 秒（尽管我在任何文档中都找不到对此默认值的任何引用，这很烦人），这就是它超时的原因。

所以无论如何，开发团队显然正在努力修复，一切应该很快就会工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:09:30.473

实际上，默认的 MessageLock 持续时间默认为 60 秒（使用 C# sdk 创建时，我不确定 php sdk）...您可以将其增加到 5 分钟...您可以在创建 sb 队列时自定义它使用队列描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-15T02:22:03.447

[此处](https://docs.microsoft.com/en-us/azure/service-bus-messaging/message-transfers-locks-settlement#renew-locks)指定的默认锁定持续时间。

# ajax - selectoneitem 上的 AJax 回调失败 (NPE)

> ID：14137162
> 
> 赞同：0
> 
> 时间：2013-01-03T10:38:09.050
> 
> 标签：ajax, jsf-2, nullpointerexception, jboss7.x

使用[此 StackOverflow 答案](https://stackoverflow.com/questions/7687980)尝试实现无提交表单。该页面由一个`selectomenu`控件和一个表格组成。在更改选择时，我希望刷新表体。页面加载没有问题，但是在进行选择时出现以下错误：

```
10:22:48,241 ERROR [[FacesServlet]] Servlet.service() for servlet FacesServlet threw exception: java.lang.NullPointerException
    at com.sun.faces.context.PartialViewContextImpl.createPartialResponseWriter(PartialViewContextImpl.java:441) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.context.PartialViewContextImpl.access$300(PartialViewContextImpl.java:71) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.context.PartialViewContextImpl$DelayedInitPartialResponseWriter.getWrapped(PartialViewContextImpl.java:582) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.context.PartialResponseWriter.startDocument(PartialResponseWriter.java:115) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at com.sun.faces.context.AjaxExceptionHandlerImpl.handlePartialResponseError(AjaxExceptionHandlerImpl.java:199) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.context.AjaxExceptionHandlerImpl.handle(AjaxExceptionHandlerImpl.java:123) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:119) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:505) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.ajp.AjpProtocol$AjpConnectionHandler.process(AjpProtocol.java:445) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:636) [rt.jar:1.6.0_18] 
```

我正在使用 JBoss-AS-7.1.1，`selectonmenu`看起来像这样：

```
<h:selectOneMenu id="ship"
             value="#{shipManager.current}">
    <f:selectItems value="#{shipManager.list}"
               var="ship"
               itemValue="#{ship}"
               itemLabel="#{ship.name}" />
    <f:ajax listener="#{shipManager.changeShip}" />
</h:selectOneMenu> 
```

如果我删除了 ajax 组件，那么尽管（当然）`shipManager`没有更新，但没有问题。

做出选择后，我想添加该`renderer`部分以刷新我的表格主体。

非常感谢您提供的任何帮助。

史蒂夫

这里要求的是我的 XHTML 代码：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets">

  <h:head>
    <title>Voyage Cruises</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link type="text/css" rel="stylesheet" media="all" href="/css/screen.css"/>
    <link type="text/css" rel="stylesheet" media="all" href="/css/cruise.css"/>
    <script src="http://open.mapquestapi.com/sdk/js/v7.0.s/mqa.toolkit.js"></script> 
    <script src="js/map.js" ></script>
    <script src="js/cruise.js" ></script>
  </h:head>

  <h:body>
    <div id="page">
      <div id="float-map">
    <div id="map"></div>
      </div>

      <h:form id="ship-form">

    <div id="ship-controls">
      <div class="float-ctrls">
        <a href="/ports.html" title="Find Ports"><img src="/images/action_search.png" alt="Find Ports"/></a>
      </div>
      <div>
        <span id="ship-selector" >
          <h:selectOneMenu id="ship"
                   value="#{shipManager.current}">
        <f:selectItems value="#{shipManager.list}"
                   var="ship"
                   itemValue="#{ship}"
                   itemLabel="#{ship.name}" />
        <f:ajax execute="ship" render="@form" listener="#{shipManager.changeShip}" />
          </h:selectOneMenu> 
        </span>
        <select id="month" />
        <select id="year" />
        <br />
        <span class="input-container"><b>Tonnage:</b><input id="tonnage" type="text" size="6" value="30,277" /></span>
        <span class="input-container"><b>Audit Time:</b><input id="audit" type="text" size="2" value="6" /></span>
        <span class="input-container"><b>Fleet:</b><input id="fleet" type="text" size="20" value="P&amp;O" /></span>
      </div>
    </div>

    <table class="cruise">
      <thead>
        <tr>
          <th class="date">Date</th>
          <th class="port">Port</th>
          <th class="arrive">Arrive</th>
          <th class="depart">Depart</th>
        </tr>
      </thead>
      <tbody>
        <ui:repeat var="cruise"
               value="#{cruiseManager.list}" 
               varStatus="table">
          <tr class="#{table.even ? 'even' : 'odd'}">
        <td class="date">
          <h:outputFormat value="{0, date,d MMM}">
            <f:param value="#{cruise.date}" />
          </h:outputFormat>
        </td>
        <h:panelGroup rendered="#{null != cruise.port}">
          <td class="port">#{cruise.port.name}</td>
          <td class="arrive">
            <h:outputFormat rendered="#{null != cruise.arrival}"
                    styleClass="#{cruise.arrivalEstimated ? 'est-time' : 'act-time'}"
                    value="{0, date,HH:mm}">
              <f:param value="#{cruise.arrival}" />
            </h:outputFormat>
          </td>
          <td class="depart">
            <h:outputFormat rendered="#{null != cruise.departure}"
                    styleClass="#{cruise.departureEstimated ? 'est-time' : 'act-time'}"
                    value="{0, date,HH:mm}">
              <f:param value="#{cruise.departure}" />
            </h:outputFormat>
          </td>
        </h:panelGroup>
        <h:panelGroup rendered="#{null == cruise.port}">
          <td class="at-sea" colspan="3">At Sea</td>
        </h:panelGroup>
          </tr>
        </ui:repeat>
      </tbody>
    </table>

      </h:form>
    </div>
  </h:body>
</html> 
```

和 ShipManager：

```
package com.nutrastat.voyager.web;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import javax.ejb.EJB;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.event.AjaxBehaviorEvent;

import com.nutrastat.voyager.db.HarbourMasterLocal;
import com.nutrastat.voyager.db.ShipEntity;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

@ManagedBean
@ViewScoped
public class ShipManager 
    implements Serializable {

    static final long serialVersionUID = -3017226836104715117L;

    private transient final Logger log;

    private ShipEntity currentShip;

    @EJB
    private HarbourMasterLocal harbourMaster;

    public ShipManager() {
    log = LoggerFactory.getLogger(getClass());
    }

    public ShipEntity getCurrent() {
    if (log.isInfoEnabled())
        log.info("getCurrent(): " + currentShip);
    return currentShip;
    }

    public void setCurrent(ShipEntity ship) {
    if (log.isInfoEnabled())
        log.info("setCurrent(" + currentShip + "): " + ship);
    currentShip = ship;
    }

    public void changeShip(AjaxBehaviorEvent evt) {
    if (log.isInfoEnabled())
        log.info("Ship now: " + currentShip);
    }

    public List<ShipEntity> getList() {
    try {
        return harbourMaster.listShips();

    } catch (Exception cause) {
        log.error("Getting the list of ships", cause);
        return new ArrayList<ShipEntity>(0);
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:57:11.330

您的堆栈跟踪看起来不完整，因为它实际上并未引用您的代码（这是我希望抛出 npe 的地方）。尽管如此，您的选择菜单没有转换器，所以除了任何其他问题，您的表单可能仍然无法保存或注册选择

1.  实现一个 JSF 转换器并在该 selectonemenu 上声明它。当一个选择类型组件需要选择和保存复杂的POJO类型时这是必须的你可以看[这个例子](http://www.mkyong.com/jsf2/custom-converter-in-jsf-2-0/)

2.  尝试摆脱`<h:form/>`标记中的那个巨大的东西。该表单中有太多其他组件可能会给您带来问题。以不同的形式将组件分解成更小的块

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:03:04.933

如果您的 bean 的范围是 @RequestScoped 则将其更改为 @ViewScoped ，通常 ajax 最好使用 @ViewScoped 完成...导致每次提交时创建 bean 的新实例...

```
@ManagedBean(name="shipManager")
@ViewScoped 
```

还要确保 changeShip 方法以 AjaxBehaviorEvent 作为参数

（IE）

```
 public void changeShip (AjaxBehaviorEvent event){
//** do your stuf 
 } 
```

并在 f:Ajax 中指定执行和渲染属性

```
<f:ajax  execute="ship" render="@form"  listener="#{shipManager.changeShip}" /> 
```

# deployment - JavaFX 本机捆绑 exe 正在抛出“JavaFx 启动器异常”，因为 Executable Jar 文件正在完美运行

> ID：14137169
> 
> 赞同：3
> 
> 时间：2013-01-03T10:38:17.927
> 
> 标签：deployment, ant, javafx-2, obfuscation, executable-jar

很长一段时间我在运行应用程序 jar 时遇到了一个问题 -

我正在使用混淆 JAR `Proguard`，该 JAR 文件还包含一些资源文件，如图像、.version 文件等以及**publicCerts.store**文件。

因此，要将资源文件包含到最终的 JAR 中，我已将所有资源文件指定为

```
-adaptresourcefilecontents **.fxml,**.properties,META-INF/MANIFEST.MF,images/*.jar,*.version,publicCerts.store 
```

但是在运行我的应用程序 JAR 时，我得到了执行 -

```
 Exception in Application start method
    java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.javafx.main.Main.a(Main.java:642)
    at com.javafx.main.Main.main(Main.java:805)
    Caused by: java.lang.RuntimeException: Exception in Application start method
    at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherIm
    pl.java:403)
    at com.sun.javafx.application.LauncherImpl.access$000(LauncherImpl.java:
    47)
    at com.sun.javafx.application.LauncherImpl$1.run(LauncherImpl.java:115)
    at java.lang.Thread.run(Unknown Source)
    Caused by: java.lang.AssertionError: java.security.KeyStoreException: Uninitiali
    zed keystore
    at de.schlichtherle.license.LicenseNotary.getPublicKey(Unknown Source)
    at de.schlichtherle.license.LicenseNotary.verify(Unknown Source)
    at de.schlichtherle.license.LicenseManager.verify(Unknown Source)
    at de.schlichtherle.license.LicenseManager.verify(Unknown Source)

    at com.sun.javafx.application.LauncherImpl$5.run(LauncherImpl.java:319)
    at com.sun.javafx.application.PlatformImpl$5.run(PlatformImpl.java:206)
    at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:173)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29
    )
    at com.sun.glass.ui.win.WinApplication$3$1.run(WinApplication.java:73)
    ... 1 more
    Caused by: java.security.KeyStoreException: Uninitialized keystore
    at java.security.KeyStore.isKeyEntry(Unknown Source)
    ... 17 more 
```

我认为混淆会破坏 publicCerts.store 所以对 publicCerts.store 使用另一个混淆选项

```
-adaptresourcefilenames publicCerts.store
-adaptresourcefilecontents **.fxml,**.properties,META-INF/MANIFEST.MF,images/*.jar,.version 
```

它有效。当我以前通过应用程序 jar 双击时，它显示了我的应用程序窗口，但现在本机捆绑可执行文件 (exe) 在相同情况下在相同条件下向我显示此对话框。

![在此处输入图像描述](../Images/79f9c140bdc56475d8baff2eb7f26c20.png)

**已编辑 -**

```
I have debugged the issue and found that it's throwing exception - 
    java.lang.AssertionError: java.security.NoSuchAlgorithmException: PBEWithMD5AndDES SecretKeyFactory not available java.security.NoSuchAlgorithmException: PBEWithMD5AndDES SecretKeyFactory not available 
```

我想知道本机捆绑可执行文件 (exe) 是由同一个可执行文件组成的，但 exe 无法正常工作。这是部署应用程序和创建本机捆绑 exe 的 ANT 步骤。

```
<target name="CreatingExe" depends="SignedJar">
            <fx:deploy width="800" height="600" nativeBundles="all" outdir="${dist}" outfile="${app.name}">
                <fx:info title="${app.title}"/>
                    <fx:application name="${app.title}" mainClass="${main.class}"/>
                    <fx:resources>
                        <fx:fileset dir="${distBI}" includes="*.jar"/>
                <fx:fileset dir="${WorkingFolder}/temp"/>
            </fx:resources>
         </fx:deploy>
    </target> 
```

仅供参考：我在 Windows 8 操作系统、64 位机器上运行我的构建。我正在按照以下步骤部署我的 JavaFX 应用程序-

```
Compiling JavaFX Code.
Creating JAR.
Obfuscating code.
Signing Jar
Creating Executable. 
Signing Executable. 

Build was successful. 
```

**如何从混淆中排除 publicCerts.store？为什么即使应用程序 jar 工作，最终的 exe 也不能工作？**我是否需要在 fx:deploy 任务中指定任何其他内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T01:59:17.507

在构建 JavaFx 本机捆绑包时，不包含该`ext`文件夹。`<JDK.HOME>`该文件夹包含的主要是安全内容。

```
<!--Copy the ext library to the runtime lib-->
<copydir src="${java.home}/lib/ext"
    dest="${dist.jar.dir}/bundles/{YOUR.PACKAGE.NAME}/runtime/jre/lib/ext"
    includes="**/*"
/> 
```

# list - 仅替换列表中的元素一次 - Haskell

> ID：14137172
> 
> 赞同：6
> 
> 时间：2013-01-03T10:38:23.770
> 
> 标签：list, haskell

我只想在第一次出现时用新值替换列表中的元素。我写了下面的代码，但是使用它，所有匹配的元素都会改变。

```
replaceX :: [Int] -> Int -> Int -> [Int]
replaceX items old new = map check items where
check item  | item == old = new 
            | otherwise = item 
```

如何修改代码以使更改仅发生在第一个匹配项上？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T11:14:57.477

关键是`map`并且`f`（`check`在您的示例中）仅就如何转换单个元素进行交流。他们不会就转换元素的列表向下进行交流：`map`总是一直进行到最后。

```
map :: (a -> b) -> [a] -> [b]
map _ []     = []
map f (x:xs) = f x : map f xs 
```

让我们写一个新版本的`map`--- 我会调用它，`mapOnce`因为我想不出更好的名字。

```
mapOnce :: (a -> Maybe a) -> [a] -> [a] 
```

关于这种类型签名有两点需要注意：

1.  因为我们可能会`f`在列表的中途停止应用，所以输入列表和输出列表必须具有相同的类型。（使用`map`，因为将始终映射整个列表，所以类型可以更改。）

2.  的类型`f`没有更改为`a -> a`，而是更改为`a -> Maybe a`。

    *   `Nothing`将意味着“保持此元素不变，继续向下列表”
    *   `Just y`将意味着“更改此元素，并保持其余元素不变”

所以：

```
mapOnce _ []     = []
mapOnce f (x:xs) = case f x of
        Nothing -> x : mapOnce f xs
        Just y  -> y : xs 
```

您的示例现在是：

```
replaceX :: [Int] -> Int -> Int -> [Int]
replaceX items old new = mapOnce check items where
    check item  | item == old = Just new 
                | otherwise   = Nothing 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T10:53:12.457

您可以轻松地将其编写为递归迭代，如下所示：

```
rep :: Eq a => [a] -> a -> a -> [a]
rep items old new = rep' items
    where rep' (x:xs) | x == old  = new : xs
                      | otherwise = x : rep' xs
          rep' [] = [] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-03T13:47:46.807

直接实施将是

```
rep :: Eq a => a -> a -> [a] -> [a]
rep _ _ [] = []
rep a b (x:xs) = if x == a then b:xs else x:rep a b xs 
```

我喜欢 list 作为最后一个参数来做类似的事情

```
myRep = rep 3 5 . rep 7 8 . rep 9 1 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-04T02:29:00.377

坦率地说，到目前为止，我不喜欢大多数答案。dave4420 对`map`我第二次提出了一些很好的见解，但我也不喜欢他的解决方案。

为什么我不喜欢这些答案？因为你应该学习通过将它们分解成更小的问题来解决这些问题，这些问题可以通过更简单的函数来解决，最好是库函数。在这种情况下，库是[`Data.List`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html)，函数是[`break`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html#v%3abreak)：

> `break`，应用于谓词`p`和列表，返回一个元组，其中第一个元素是不满足的元素`xs`的最长前缀（可能为空），第二个元素是列表的其余部分。`xs``p`

有了这个，我们可以这样解决问题：

1.  将列表分成两部分：第一次出现 之前的所有元素`old`，以及其余元素。
2.  “rest”列表要么是空的，要么它的第一个元素是`old`. 这两种情况都很容易处理。

所以我们有这个解决方案：

```
import Data.List (break)

replaceX :: Eq a => a -> a -> [a] -> [a] 
replaceX old new xs = beforeOld ++ replaceFirst oldAndRest 
    where (beforeOld, oldAndRest) = break (==old) xs
          replaceFirst [] = []
          replaceFirst (_:rest) = new:rest 
```

例子：

```
*Main> replaceX 5 7 ([1..7] ++ [1..7])
[1,2,3,4,7,6,7,1,2,3,4,5,6,7] 
```

所以我给你的建议：

1.  了解如何导入库。
2.  学习图书馆文档并学习标准功能。 [`Data.List`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html)是一个很好的起点。
3.  尽可能多地使用这些库函数。
4.  作为自学练习，您可以从中挑选一些标准函数`Data.List`并编写您自己的版本。
5.  当您遇到无法通过组合库函数解决的问题时，请尝试发明自己有用的通用函数。

**编辑：**我刚刚意识到这`break`实际上是一个[`Prelude`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html)函数，不需要导入。尽管如此，它仍然`Data.List`是最好的学习图书馆之一。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-04T03:22:53.807

使用[镜头库](http://hackage.haskell.org/package/lens)的替代方法。

```
>import Control.Lens
>import Control.Applicative

>_find :: (a -> Bool) -> Simple Traversal [a] a                                   
>_find _ _ [] = pure []                                                           
>_find pred f (a:as) = if pred a                                                  
>                       then (: as) <$> f a                                       
>                       else (a:) <$> (_find pred f as) 
```

这个函数需要一个 (a -> Bool)，它是一个函数，它应该在你想要修改的类型 'a' 上返回 True。

如果第一个大于 5 的数字需要加倍，那么我们可以这样写：

```
>over (_find (>5)) (*2) [4, 5, 3, 2, 20, 0, 8]
[4,5,3,2,40,0,8] 
```

镜头的伟大之处在于您可以通过组合它们（。）将它们组合在一起。因此，如果我们想将第二个子列表中的第一个数字 <100 归零，我们可以：

```
>over ((element 1).(_find (<100))) (const 0) [[1,2,99],[101,456,50,80,4],[1,2,3,4]]
[[1,2,99],[101,456,0,80,4],[1,2,3,4]] 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-03T14:16:13.330

也许不是最快的解决方案，但很容易理解：

```
rep xs x y = 
  let (left, (_ : right)) = break (== x) xs 
  in left ++ [y] ++ right 
```

**[编辑]**

正如戴夫评论的那样，如果 x 不在列表中，这将失败。一个安全的版本是：

```
rep xs x y = 
  let (left, right) = break (== x) xs 
  in left ++ [y] ++ drop 1 right 
```

**[编辑]**

啊！！！

```
rep xs x y = left ++ r right where
  (left, right) = break (== x) xs 
  r (_:rs) = y:rs
  r [] = [] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-07T10:35:50.470

```
replaceValue :: Int -> Int -> [Int] -> [Int]
replaceValue a b (x:xs) 
        |(a == x) = [b] ++ xs
        |otherwise = [x] ++ replaceValue a b xs 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-04T09:56:55.680

这是使用`State`Monad 的必要方法：

```
import Control.Monad.State                                                  

replaceOnce :: Eq a => a -> a -> [a] -> [a]
replaceOnce old new items = flip evalState False $ do
  forM items $ \item -> do
    replacedBefore <- get
    if item == old && not replacedBefore
      then do
        put True
        return new
      else
        return old 
```

# android - 网站如何识别安卓设备

> ID：14137173
> 
> 赞同：0
> 
> 时间：2013-01-03T10:38:26.497
> 
> 标签：android, flash, browser

我想知道网站可以通过什么方式识别 Android/移动设备。即使我更改了 android 默认浏览器的用户代理字符串（通过`about:debug`在地址栏中键入并随后更改设置菜单中的相应选项），我也遇到一些网站识别我的 Android 4.1 设备。有问题的网站包含闪存。他们是否可能识别 Flash 播放器的版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:50:03.910

有不同的方法可以做到这一点。最常用的方法是检查userAgent。我不确定 flashplayer 版本，但它可以从屏幕分辨率（屏幕尺寸）识别移动设备

# python - search_results 在 ipython 中不起作用

> ID：14137183
> 
> 赞同：0
> 
> 时间：2013-01-03T10:39:35.583
> 
> 标签：python, twitter, social-networking, twython

好吧，我是 ipython 和 twython 概念的新手，目前正在使用 twython 2.5.4，当我给出以下代码片段时

```
In [101]: search_results = twitter.searchTwitter(q="moon", rpp="50") 
```

它给了我以下错误

```
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
/home/vishal/<ipython-input-101-8f8e03087947> in <module>()
----> 1 search_results = twitter.searchTwitter(q="moon", rpp="50")

AttributeError: 'Twython' object has no attribute 'searchTwitter'. 
```

那么可能是什么问题

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:32:04.333

问题是命令“searchTwitter”不存在。

编写这段代码的正确方法是：

`twitter = Twython()`

`search_results = twitter.search(q="moon", page="50")`

# android - 如何在android中使用TransformationMethod

> ID：14137184
> 
> 赞同：9
> 
> 时间：2013-01-03T10:39:35.203
> 
> 标签：android, passwords, android-edittext

我想创建一个`EditText`接受密码的。我想在输入字符后立即隐藏它。所以，我用了一个`TransformationMethod`. 我是新手，所以我尝试了以下代码。

```
EditText editText = (EditText) findViewById(R.id.editText);
editText.setTransformationMethod(new PasswordTransformationMethod());

private class PasswordTransformationMethod extends Transformation implements TransformationMethod {

    @Override
    public CharSequence getTransformation(CharSequence source, View view) {
        return "/";
    }

    @Override
    public void onFocusChanged(View view, CharSequence source, boolean focused, int direction, Rect previouslyFocusedRect) {
        source = getTransformation(source, view);
    }
} 
```

然而，它抛出，

```
01-03 10:22:35.750: E/AndroidRuntime(2102): java.lang.IndexOutOfBoundsException 
```

我错过了一些东西。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-04-16T12:59:08.003

上述方法有很多错误。

因此，我分享了用于将密码转换为点的代码。

像这样在同一个 Java 文件中创建一个单独的类，

```
public class MyPasswordTransformationMethod extends PasswordTransformationMethod {

    @Override
    public CharSequence getTransformation(CharSequence source, View view) {
        return new PasswordCharSequence(source);
    }

    private class PasswordCharSequence implements CharSequence {

        private CharSequence mSource;

        public PasswordCharSequence(CharSequence source) {
            mSource = source; 
        }

        public char charAt(int index) {
            return '.'; 
        }

        public int length() {
            return mSource.length(); 
        }

        public CharSequence subSequence(int start, int end) {
            return mSource.subSequence(start, end); // Return default
        }
    }
}; 
```

实现是这样的，

```
passwordEditText = (EditText) findViewById(R.id.passwordEditText);
passwordEditText.setTransformationMethod(new MyPasswordTransformationMethod()); 
```

# jsf - JSF：在 ValueExpression 中无法访问变量：错误的 FaceletContext 并且无法访问 UIComponent 的 VariableMapper

> ID：14137185
> 
> 赞同：1
> 
> 时间：2013-01-03T10:39:38.253
> 
> 标签：jsf, jsf-2

我有一个具有复杂验证的应用程序，我只能基于模型层次结构执行，所以我不能使用 JSF 的验证阶段。

我的问题是我需要将验证错误链接回 gui（直观地显示需要注意的文本字段）。所以我需要在某处将 UI 组件与域模型项链接起来。

我希望使用 PreRenderComponentEventListener 来实现这一点：

*   我的验证器组件存储约束验证，我可以在其中访问需要注意的对象和属性。
*   我使用 UIComponent 的 ValueExpression 来检索 Component 绑定到的正确对象。

起初这似乎有效：我在 xhtml 页面中有以下内容：

```
<ui:composition template="/templates/mainTemplate.xhtml">
<ui:define name="content">  
   <ui:repeat value="#{contactController.contactManager.contactList}" var="contact">
          <h:inputText value="#{contact.name}"/>
          <h:inputText value="#{contact.firstName}"/>
          <br/>
      </ui:repeat>
</ui:define>
</ui:composition> 
```

现在假设我有一个名字失败的联系人列表。

ValueExpression 的表达式字符串给了我“#{contact.firstName}”：我从这个构建一个新的 ValueExpression 来检索父级“#{contact}”，并且可以检查失败的名字是否是列表中正确的联系人之一。

所以我在 Listener 中做了这样的事情：

```
private Object extractParent(UIInput input) {
   FaceletContext faceletElContext = (FaceletContext) FacesContext.getCurrentInstance().getAttributes().get(FaceletContext.FACELET_CONTEXT_KEY);
   ValueExpression orig = input.getValueExpression("value");
   String parent = getParent(orig.getExpressionString());
   ValueExpression valueExpression = FacesContext.getCurrentInstance().getApplication().getExpressionFactory().createValueExpression(faceletElContext,"#{"+parent+"}", Object.class);
   return valueExpression.getValue(faceletElContext);
} 
```

现在，这仅在重复位于顶部 facelet 中时才有效。
一旦我的复杂应用程序使用包含文件，或者由于 2 个原因而开始失败：

*   facelet 上下文是错误的上下文，而不是嵌套的 xhtml 上下文，因此它的 variableMapper 中没有变量
*   该变量是在 UIComponent 的 valueexpression 本身中定义的，但该变量不可访问，仅具有私有访问权限，因此我也无法使用该变量。

所以我完全被卡住了！有人可以给我一个替代方案吗？

**在评估@BalusC 的响应后更新**：我尝试了`ELContext`但没有成功。我进行了进一步调查，核心问题是既`ELContext`不允许也`FaceletContext`不允许我访问包含文件中定义的变量：

*   没有`ELContext`他们
*   `FaceletContext`似乎一直是最后一个包含文件之一，因此不是正确的。

我有一个小测试用例证明了这一点：当呈现“contactinner”输入文本时，ELContext 没有这个变量，并且 faceletcontext 有错误的 xhtml 层次结构。

非常感谢所有帮助。

测试.xhtml：

```
<ui:composition>
<h:form id="myform">
    <c:set var="itemContact" value="#{contactController.contact}"/>
    <c:set var="itemPerson" value="#{contactController.person}"/>
    <ui:include src="contact.xhtml"/>
    <ui:include src="person.xhtml"/>
    <h:commandButton action="#{contactController.process}"/>
</h:form>
</ui:composition> 
```

联系人.xhtml：

```
<ui:composition>
     <c:set var="contactinner" value="#{itemContact}"/>
     <h:inputText value="#{contactinner}"/>
</ui:composition> 
```

人.xhtml：

```
<ui:composition>
    <c:set var="personinner" value="#{itemPerson}"/>
    <h:inputText value="#{personinner}"/>
</ui:composition> 
```

faces-config.xml（摘录）：

```
<system-event-listener>
<system-event-listener-class>TestSystemEventListener</system-event-listener-class>
<system-event-class>javax.faces.event.PreRenderComponentEvent</system-event-class>
</system-event-listener> 
```

TestSystemEventListener（摘录）：

```
public class TestSystemEventListener implements SystemEventListener {
    @Override
    public void processEvent(SystemEvent event) throws AbortProcessingException {
       UIInput input = (UIInput) event.getSource();
       FaceletContext faceletElContext = (FaceletContext) FacesContext.getCurrentInstance().getAttributes().get(FaceletContext.FACELET_CONTEXT_KEY);
       FacesContext context = FacesContext.getCurrentInstance();
       ValueExpression orig = input.getValueExpression("value");
} 
```

运行这个，当在第一个 xhtml 中为 inputext 启动 evenlistener 时，`#{contactInner}`我在 listener 中得到以下数据：

```
orig = {com.sun.faces.facelets.el.TagValueExpression@24201}"/xhtml/contact.xhtml @6,43 value=\"#{contactinner}\""
    orig = {com.sun.el.ValueExpressionImpl@24220}"ValueExpression[#{contactinner}]"
    expr = {java.lang.String@24270}"#{contactinner}"
    varMapper = {com.sun.el.lang.VariableMapperImpl@24271}
    vars = {java.util.HashMap@24275} size = 1
       [0] = {java.util.HashMap$Entry@24278}"contactinner" -> "/xhtml/contact.xhtml @5,54 value=\"#{itemContact}\""

context = {com.sun.faces.context.FacesContextImpl@24200}
    elContext = {com.sun.faces.el.ELContextImpl@24205}
    functionMapper = {com.sun.faces.facelets.compiler.NamespaceHandler@24284}
    variableMapper = {com.sun.faces.el.ELContextImpl$VariableMapperImpl@24221}
        variables = {java.util.HashMap@24289} size = 2
        [0] = {java.util.HashMap$Entry@24292}"itemContact" -> "/xhtml/test.xhtml @9,68 value=\"#{contactController.contact}\""
        [1] = {java.util.HashMap$Entry@24295}"itemPerson" -> "/xhtml/test.xhtml @10,66 value=\"#{contactController.person}\""           

faceletElContext = {com.sun.faces.facelets.impl.DefaultFaceletContext@24199}
    faces = {com.sun.faces.context.FacesContextImpl@24200}
    ctx = {com.sun.faces.el.ELContextImpl@24205}
    facelet = {com.sun.faces.facelets.impl.DefaultFacelet@24151}"/xhtml/person.xhtml"
    faceletHierarchy = {java.util.ArrayList@24206} size = 2
    [0] = {com.sun.faces.facelets.impl.DefaultFacelet@23792}"/xhtml/test.xhtml"
    [1] = {com.sun.faces.facelets.impl.DefaultFacelet@24151}"/xhtml/person.xhtml"
    varMapper = {com.sun.faces.facelets.el.VariableMapperWrapper@24207}
    target = {com.sun.faces.el.ELContextImpl$VariableMapperImpl@24221}
    vars = {java.util.HashMap@24222} size = 1
        [0] = {java.util.HashMap$Entry@24225}"personinner" -> "/xhtml/person.xhtml @5,52 value=\"#{itemPerson}\"" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:55:37.500

You should use the `ELContext` instance as obtained by [`FacesContext#getELContext()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#getELContext%28%29), not the `FaceletContext`.

```
private Object extractParent(UIInput input) {
    ELContext elContext = FacesContext.getCurrentInstance().getELContext();
    ValueExpression orig = input.getValueExpression("value");
    String parent = getParent(orig.getExpressionString());
    ValueExpression valueExpression = FacesContext.getCurrentInstance().getApplication().getExpressionFactory().createValueExpression(elContext, "#{" + parent + "}", Object.class);
    return valueExpression.getValue(elContext);
} 
```

A shorthand is by the way [`Application#evaluateExpressionGet()`](http://docs.oracle.com/javaee/6/api/javax/faces/application/Application.html#evaluateExpressionGet%28javax.faces.context.FacesContext,%20java.lang.String,%20java.lang.Class%29).

```
private Object extractParent(UIInput input) {
    FacesContext context = FacesContext.getCurrentInstance();
    ValueExpression orig = input.getValueExpression("value");
    String parent = getParent(orig.getExpressionString());
    return context.getApplication().evaluateExpressionGet(context, "#{" + parent + "}", Object.class);
} 
```

# razor - 链接到另一个 .cshtml

> ID：14137187
> 
> 赞同：0
> 
> 时间：2013-01-03T10:39:48.540
> 
> 标签：razor, hyperlink, asp.net-mvc-4

我需要从 Home.cshtml 链接到 Login.cshtml 页面，但它似乎找不到链接。

主页.cshtml

```
@{
    Layout = "~/Shared/Master.cshtml";
    ViewBag.Title = "Home";
}

    @section menu 
    {
        <a href="/Login">Login</a>
    } 
```

家庭控制器.cs

```
public class HomeController : Controller
    {

        //
        // GET: /Home/Home

        public ActionResult Home()
        {
            return View();
        }

        //
        // GET: /Home/Login

        public ActionResult Login()
        {
            return View();
        }

    } 
```

路由配置

```
routes.MapRoute(
            name: "Default",
            url: "",
            defaults: new { controller = "Home", action = "Home" }
        ); 
```

项目结构：

![在此处输入图像描述](../Images/3ec5626a190b5f1f0e0571c9dee3bb72.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:41:52.037

您的登录页面将位于 /Home/Login

如果你想要一个 /Login 页面，你需要创建一个名为 LoginController 的新控制器，其操作结果方法为 Index。

您需要使用它来为 RouteConfig 中的页面提供服务：

```
 routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/",
            defaults: new { controller = "Home", action = "Home" }
        ); 
```

这也应该整理出您的默认主页

# ruby-on-rails - 将 git 补丁从一个 repo 应用到另一个类似的结构化 repo

> ID：14137193
> 
> 赞同：0
> 
> 时间：2013-01-03T10:39:59.653
> 
> 标签：ruby-on-rails, git, format-patch

我们有 2 个项目，一个在 rails 2.3.14，一个在 rails 3.2.9，我们在创建 3.2.9 存储库时移动了文件并手动更改了结构，现在，几周后我想添加所有原始仓库缺少对新仓库的提交。

尝试使用*git format-patch*来执行此操作，但由于我们在新项目中稍微更改了结构，因此没有任何补丁实际应用并返回错误。

有没有办法做到这一点而不是手动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:02:18.633

在更改结构之前，尝试在新的 repo 中应用它。然后将新分支合并到master

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:28:48.300

最终我们得出了一个不可避免的结论，即我们别无选择，只能手动合并这些更改——我们从提交差异中导出了一个补丁列表，并手动将其一一合并，将更改应用到正确的位置。

给其他人的提示：如果你做过这样的事情，请经常合并。应用 533 补丁并不是一件有趣的事情。

# android - 重叠视图时输出奇怪..？

> ID：14137199
> 
> 赞同：1
> 
> 时间：2013-01-03T10:40:17.167
> 
> 标签：android, android-layout, android-linearlayout

大家好，我是android新手，在我的项目要求中，我需要在相同位置创建两个LinearLayouts，稍后在Java代码中对其进行动画处理，出于测试目的，最初我在这些布局上插入了图像视图，之后我成功删除了图像视图和在相同的布局上插入了 EditTexts，但奇怪的前一个图像在执行后显示在一个线性布局上，而预览中没有显示

我测试了所有选项，例如清理项目，从设备卸载和重新安装 iam 得到同样的问题

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                 android:layout_width="fill_parent"
                 android:layout_height="fill_parent"
  >
 <Button 
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Animate Now"/>
 <LinearLayout
    android:id="@+id/image_list_fragment"
    android:layout_width="250dip"
    android:layout_below="@+id/button1"
    android:layout_height="200dip"
    android:background="#FF00FF"
    android:layout_centerInParent="true"
    >
    <EditText 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="Please Enter some text here"
        android:singleLine="false"
        />

</LinearLayout>

 <LinearLayout
    android:layout_width="200dip"
    android:layout_height="300dip"
    android:orientation="vertical"
    android:layout_below="@+id/button1"
    android:visibility="visible"
    android:background="#32FFFF"
    android:layout_centerInParent="true"
    android:id="@+id/image_details_fragment"
    >
    <EditText 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="Please Enter some text here"
        android:singleLine="true"
        />

    </LinearLayout>

 </RelativeLayout> 
```

这是Eclipse中的预览输出和Emulator中的输出运行后

![在此处输入图像描述](../Images/d9ce08794c91031c778e224c59cb7d5a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:27:57.267

请检查您的后端 java 文件（活动类）一次或将其粘贴到此处。您可能会在运行时某处设置具有该背景的图像视图。

# javascript - 使用 javascript/jquery 从特定字符串中获取数值

> ID：14137200
> 
> 赞同：0
> 
> 时间：2013-01-03T10:40:18.837
> 
> 标签：javascript, jquery

我有一个网格，我使用 JavaScript 通过其 id 获取选定行的 html。

```
var parentRow1 = document.getElementById('__' + parentrowid).innerHTML; 
```

这将返回我以下 html：

```
<td class="rgExpandCol">
<img title="Expand" onclick="$find(&quot;&quot;)._toggleExpand(this, event); return false;" 
src=" style="border-width:0px;"></td><td>TEST</td><td>my details</td><td>1</td><td>01/06/2011</td>
<td>198307</td>
<td>&nbsp;</td>
<td>
<span id="lblDCount">2</span>
</td>
<td>
<span id="lblUCount">1</span>
</td>
<td>
<input name="$btn" id="btn">
</td> 
```

有没有办法获得这部分（数字计数不会是静态的），并获得数值然后将其减一：

```
<span id="lblUCount">1</span> 
```

所以最终结果将是`<span id="lblUCount">0</span>`它是 2 然后是 1 等等

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T10:42:07.483

由于跨度本身具有`id`，因此您无需先从行中获取任何内容：

```
var lblUCount = $("#lblUCount");
lblUCount.text(parseInt(lblUCount.text(), 10) - 1); 
```

不过，我怀疑您有多行，因此有多个`span`. 如果我是对的，那么您的 HTML 无效，因为页面上的`id`值**必须**是唯一的。所以我会改变它，所以你给那些跨度类：

```
<span class="lblUCount">1</span> 
```

...这意味着您*确实*需要从该行开始，然后使用`find`它来查找它：

```
var lblUCount = $('#__' + parentrowid).find('.lblUCount');
lblUCount.text(parseInt(lblUCount.text(), 10) - 1); 
```

在那里，我使用[`$`](http://api.jquery.com/jQuery/#jQuery1)ID 选择器来获取行，然后[`find`](http://api.jquery.com/find)使用类选择器来查找`lblUCount`行内的跨度。然后[`text`](http://api.jquery.com/text)获取单元格的文本，[`parseInt`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.2.2)将其转换为数字，然后`text`再次*设置*单元格的新文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T10:42:27.993

这是 AFAIK 最简单的解决方案。它依赖于“函数”参数版本，[`.text()`](http://api.jquery.com/text/)该版本将原始文本传递给提供的函数，然后将返回值重新插入到元素中。

```
$('#lblUCount').text(function(idx, text) {
    return parseInt(text, 10) - 1;
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T10:44:12.877

试试这个

```
var count=$('#__' + parentrowid).find('#lblUCount').text();

var finalCount=parseInt(count) -1 ; 
```

**更新**

分配回来..

```
$('#__' + parentrowid).find('#lblUCount').text(finalCount); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T10:44:14.423

你可以像这样使用 jQuery 来做到这一点：

```
var $el = $('#lblUCount'), 
          val = parseInt($el.text());
val--;
$el.text(val); 
```

# iphone - 付费应用：需要唯一标识用户

> ID：14137208
> 
> 赞同：1
> 
> 时间：2013-01-03T10:40:41.080
> 
> 标签：iphone, uniqueidentifier

我正在设计一个需要用户创建自己的个人资料的*付费应用程序。*

这个应用程序当然可以在用户拥有的每台设备上下载。

这是我要绕过的精确场景：

1.  用户在 iPhone 上下载应用程序
2.  他创建了一个帐户并开始使用进行服务器调用的应用程序
3.  他在他的 iPad 上下载了应用程序，并用他的登录名和密码检索了服务器上的数据，到目前为止一切顺利
4.  现在，他把他的 iPad 借给了一个朋友（他没有为这个应用付费）。
5.  朋友想使用该应用程序，并想创建自己的帐户。然而，我想禁止这样做，因为他没有为应用程序付费。

所以我的问题是：我想将应用程序的使用仅限于为应用程序付费的用户，而不是他的朋友。

当然，我不能使用 AppleID，因为无法从代码中获取它。

我想我可以像这里提到的那样使用 iCloud，但是由于（[iOS 唯一用户标识符](https://stackoverflow.com/questions/7273014/ios-unique-user-identifier)）用户可以选择不使用 iCloud，我的问题没有解决......

有没有我错过的简单解决方案来解决该问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:49:37.407

您的朋友将使用不同的苹果 ID。你可以使用苹果的Restoring Transactions api来了解用户是否购买了该应用程序。这对于应用内购买的非消耗品是可能的。请检查以下链接： [https ://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/MakingaPurchase/MakingaPurchase.html#//apple_ref/doc/uid/TP40008267-CH3-SW1](https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/MakingaPurchase/MakingaPurchase.html#//apple_ref/doc/uid/TP40008267-CH3-SW1)

# python - 创建迭代函数的困难

> ID：14137209
> 
> 赞同：-2
> 
> 时间：2013-01-03T10:40:41.477
> 
> 标签：python, recursion, for-loop

我需要一些聪明的方法来把它变成一个递归函数。D 是一个带有键的字典，需要匹配 a,b,c 的..

D 的键只是随机顺序的数字 - 它们需要按特定顺序排序并放入一个列表，函数“findKeyForLargestValue”使它们成为。

这是我的原始功能（不适用于所有类型的字典）

```
def findOrder(name,D):
    Order=[name]
    a=findKeyForLargestValue(D[name])
    b=findKeyForLargestValue(D[a])
    c=findKeyForLargestValue(D[b])
    d=findKeyForLargestValue(D[c])
    e=findKeyForLargestValue(D[d])
    f=findKeyForLargestValue(D[e])
    Order.append(a)
    Order.append(b)
    Order.append(c)
    Order.append(d)
    Order.append(e)
    Order.append(f)
    return Order 
```

输出需要是这样的列表：

```
['4', '2', '5', '1', '6', '3'] 
```

它需要能够遍历任何类型的 D。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:03:13.607

添加一个参数来`findOrder`告诉它迭代多少次，然后执行以下操作：

```
def findOrder(name, D, count):
    Order = [name]
    for i in range(count):
        name = findKeyForLargestValue(D[name])
        Order.append(name)
    return Order 
```

这应该做你想做的（如果我没有误解这个问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:59:42.003

我认为这个递归函数可以帮助你......

```
Order = []

def findOrder(name, D):
    Order.append(name)
    try:
        other = findKeyForLargestValue(D[name])
    except:
        return
    findOrder(other, D)

findOrder(name, D) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T11:03:41.777

```
def findOrder(name,D):
    myList = [name]
    for i in xrange(6): 
        new = findKeyForLargestValue(D[myList[-1]])
        myList.append(new)
    return myList 
```

# java - Java 增强的 For 循环 - 编辑原始数组值

> ID：14137219
> 
> 赞同：5
> 
> 时间：2013-01-03T10:41:19.007
> 
> 标签：java, memory-management, for-loop

我想详细了解增强型 For 循环在 Java 中是如何工作的（假设我确实了解了这个循环的基本用法以及它一般是如何工作的）。

给定以下代码：

```
String[] a = {"dog", "cat", "turtle"};

for (String s : a) {
  out.println("String: " + s);
  s = in.readLine("New String? ");
} 
```

它实际上并没有修改原始列表“a”。为什么不？内存管理如何工作？'s' 不是对'a[i]' 的同一个内存单元的引用吗？

我在 oracle 文档中阅读了增强的 for 循环不能用于从原始数组中删除元素，这是有道理的。修改值是否相同？

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T10:43:09.350

> 's' 不是对'a[i]' 的同一个内存单元的引用吗？

本来，是的。但随后`in.readLine`会产生对新 String 对象的引用，然后您可以使用它来覆盖`s`. 但只有`s`被覆盖，而不是底层字符串，也不是数组中的引用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T10:43:49.150

`s`是指向`String`实例的局部变量。它与 无关`a[i]`，它们只是碰巧最初具有相同的值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T10:50:45.487

你只能写

```
for (int i = 0; i < a.length; i++) {
  out.println("String: " + a[i]);
  a[i] = in.readLine("New String? ");
} 
```

您不能使用 for-each 循环来修改原始集合或数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T10:53:39.880

`s`像一个对象的*地址*一样思考。这里的事情是`s`在使用 for 循环时指出数组的某个值。当您`s`在循环内重新评估时，它会`s`指向另一个值，但数组的原始值不会被修改，因为您只是更改了指向的*地址。* `s`

```
String[] a = {"dog", "cat", "turtle"};

for (String s : a) {
  //s --> "dog"
  out.println("String: " + s);
  s = in.readLine("New String? ");
  //s --> the new string the user inputs
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-03T11:27:10.190

对于每一次迭代，String s 最初都会引用 String a[] 中对应的 String 对象。但它随后被 in.readLine() 返回的另一个 String 对象引用。

# winforms - WinForms 应用程序中的 Ninject ActivationException

> ID：14137225
> 
> 赞同：0
> 
> 时间：2013-01-03T10:41:29.667
> 
> 标签：winforms, dependency-injection

我正在开发一个将 DI（使用 Ninject）实现到现有 WinForms 应用程序的项目，但是我遇到了一些问题，并且我在 WinForms 中使用 DI 的知识充其量是有限的，但是我已经在 MVC 中成功使用过几次项目。

尝试创建具有需要存储库接口的构造函数的表单时收到此消息：

```
Error activating IProductionRepository
No matching bindings are available, and the type is not self-bindable.
Activation path:
  2) Injection of dependency IProductionRepository into parameter 
     productionRepository of constructor of type Main
  1) Request for Main 
```

我在网上搜索过，但我读过的大多数关于这个错误的文章要么是处理更复杂的设置，要么是关于参数注入，我不确定这是这里的问题。

我有一个表单，用于启动要使用 DI 的表单（`kernel.Get`调用时发生错误：

```
Private Sub txt_Click(sender As System.Object, e As System.EventArgs) Handles txt.Click

    Try
        Dim kernel As Ninject.IKernel = 
            New Ninject.StandardKernel(New NinjectFactory())
        Dim form As Main = kernel.Get(Of Main)() 
        form.ConnectionString = App.pstrConnectString
        form.ShowDialog(Me)
    Catch ex As Exception
        Support.ErrorHandler.ReportError(ex.Message, ex, True)
    End Try

End Sub 
```

我的 NinjectFactory 具有正确的绑定（以及其他几个被注释掉的尝试）：

```
public class NinjectFactory : NinjectModule
{
    private IKernel _ninjectKernel;

    public NinjectFactory()
    {
        _ninjectKernel = new StandardKernel();
    }

    public override void Load()
    {
        //_ninjectKernel.Bind(typeof(IRepository<>))
        //    .To(typeof(GenericRepository<>));
        //_ninjectKernel.Bind(typeof(IProductionRepository))
        //    .To(typeof(ProductionRepository));
        _ninjectKernel.Bind<IProductionRepository>().To<ProductionRepository>();
    }
} 
```

最后我有了我想要启动的表格：

```
private IProductionRepository _productionRepository;

public string ConnectionString 
{
    get
    {
        return _connectionString;
    }
    set
    {
        _connectionString = value;
    } 

    [Inject]
    public Main(IProductionRepository productionRepository) : this()
    {   
        this._productionRepository = productionRepository;        
    }

    public Main()
    {
        InitializeComponent();
    } 
```

这就是我之前在 MVC 项目中使用 Ninject 的方式，我没有遇到过问题，但显然 WinForms 有一些不同之处。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:12:15.277

我建议使用`Composition Root`Mark Seemann (@mark-seemann) 在他的好书中所建议的单点依赖解析，称为`Dependency Injection in .NET`。您的 CompositionRoot 可能如下所示：

```
public class CompositionRoot
{
    private static IKernel _ninjectKernel;

    public static void Wire(INinjectModule module)
    {
        _ninjectKernel = new StandardKernel(module);
    }

    public static T Resolve<T>()
    {
        return _ninjectKernel.Get<T>();
    }
}

public class ApplicationModule : NinjectModule
{
    public override void Load()
    {
        Bind(typeof(IRepository<>)).To(typeof(GenericRepository<>));
    }
} 
```

你可以把它们接线`Program`

```
CompositionRoot.Wire(new ApplicationModule());

Application.EnableVisualStyles();
Application.SetCompatibleTextRenderingDefault(false);

Application.Run(CompositionRoot.Resolve<Form1>()); 
```

现在您的按钮处理程序可能如下所示：

```
private void button1_Click(object sender, EventArgs e)
{
    MessageBox.Show(_productionRepository.ToString());
} 
```

**注意：**如果您想使用不同的依赖项来测试您的应用程序（可能就是这种情况），那么您需要创建另一个具有不同接线配置的模块。在测试中，您将有另一个带有存根和模拟的接线逻辑。我也不喜欢我的模型上的 NInject 属性，如果你使用构造函数注入 - 你可以摆脱它们。我的实体是简单的 POCO。

```
public interface IProductionRepository
{
}

public class ProductionRepository : IProductionRepository
{
    public override string ToString()
    {
        return "Foo";
    }
} 
```

Mark 还为带有 DI 模式的 WinForms 以及如何实现它提供了一个很好的案例，我真的推荐他的书。

# jaxb - 使用 MOXy 解析混合标记，可能使用 Transformers

> ID：14137229
> 
> 赞同：2
> 
> 时间：2013-01-03T10:41:38.603
> 
> 标签：jaxb, eclipselink, moxy, transformer

使用 MOXy 2.3.1，但如果有帮助可以升级。

我有以下 XML：

```
<myelement>
text content <b>mixed</b> with tags
</myelement> 
```

我希望将其存储在包含以下内容的**字符串**字段中：

```
text content <b>mixed</b> with tags 
```

我一直在想我需要在 MOXy 中使用 XML 转换功能，我的代码如下所示：

```
// Not a root element, it's own mapping annotation
// is defined in another class.
@XmlAccessorType(XmlAccessType.NONE)
class MyElement {

    @XmlTransformation
    @XmlReadTransformer(transformerClass=TempTrans.class)
    @XmlValue
    String markup
}

public class TempTrans implements AttributeTransformer {

    private AbstractTransformationMapping mapping;

    public void initialize(AbstractTransformationMapping mapping) {
        this.mapping = mapping;
    }

    public Object buildAttributeValue(Record record, Object instance, Session session) {
        return null;
    }
} 
```

我一直在调试**返回 null；****行以查看映射**对象中对我可用的内容。我还没有发现它很有用，我在正确的轨道上吗？

我希望有一种类似于 XStream 的**HierarchicalStreamReader**的机制，让我可以像 DOM 一样访问源 XML。任何解决方法将不胜感激。

我不介意结束：

```
text content &lt;b&gt;mixed&lt;/b&gt; with tags 
```

但是源 XML 需要在其中包含未转义的标记。

谢谢，迈克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T10:57:49.630

您可以使用`@XmlAnyElement`注释并指定 DOMHandler 将 DOM 片段转换为字符串值/从字符串值转换。

对于一个完整的例子

*   [http://blog.bdoughan.com/2011/04/xmlanyelement-and-non-dom-properties.html](http://blog.bdoughan.com/2011/04/xmlanyelement-and-non-dom-properties.html)

# android - ActionBar 菜单项在 NestedFragments 中消失

> ID：14137230
> 
> 赞同：11
> 
> 时间：2013-01-03T10:41:48.963
> 
> 标签：android, nested, android-actionbar, fragment

由于 android 4.2 现在支持[NestedFragment](http://developer.android.com/about/versions/android-4.2.html#NestedFragments)，并添加它以支持 v13。

我在经典情况下使用了这个 NestedFragment：创建可以左右滑动并占用大部分屏幕空间的 fragmentA，并将 fragmentB 和 fragmentC 插入每个片段页面。

我的问题是我在 fragmentB 和 fragmentC 中创建的 MenuItem 无法在 Activity 的操作栏上显示。在我使用 NestedFragment 之前，它运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:11:44.793

在某些时候遇到了同样的问题。如果您使用的是 ActionBarSherlock 库，这是一个小错误。您基本上要做的是从 onCreateOptionsMenu() 方法中的父片段调用子级的 onCreateOptionsMenu() 方法，例如：

```
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    super.onCreateOptionsMenu(menu, inflater);
    getChildFragment().onCreateOptionsMenu(menu, inflater);
} 
```

希望这有效，让我知道。

干杯。

# android - Android webview 捕获链接点击

> ID：14137238
> 
> 赞同：21
> 
> 时间：2013-01-03T10:42:11.790
> 
> 标签：android

我正在开发的应用程序有一个 webview，我需要捕获 webview 请求点击事件（例如：点击一个链接，点击一个按钮，点击一个 youtube 视频播放按钮，例如......）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-03T10:56:15.367

这可以做到

你必须为`WebViewClient`你的 WebView 设置一个。这是如何做到的。

```
WebView webView;//make sure to initialize  
webView.setWebViewClient(webViewClient);

WebViewClient webViewClient= new WebViewClient(){
    @Override
    public boolean shouldOverrideUrlLoading(WebView  view, String  url){
        return true;
    }
    @Override
    public void onLoadResource(WebView  view, String  url){
        if( url.equals("http://yoururl.com") ){
            // do something
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-03T10:55:29.987

使用此代码对我有用

```
webview.setWebViewClient(new WebViewClient()
        {
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url)
            {
                return true;
            }
        }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T11:00:38.103

你可以这样做：

```
WebView myWebView  = (WebView) findViewById(R.id.yourWebView);
myWebView.setWebViewClient(new MyWebViewClient());
myWebView.loadUrl("yourLink"); 
```

但不要忘记创建一个 WebViewClient：

```
public class MyWebViewClient extends WebViewClient {

     @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {

            return true;
        }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-11-23T19:13:38.637

当您在应用程序中处理链接时，诸如 shouldOverrideUrlLoading 和 doUpdateVisitedHistory 之类的 WebViewClient 回调可能不会提供一致或正确的值。在这种情况下，@android.webkit.JavascriptInterface 是您的朋友。这个想法是编写 javascript 点击处理程序（在内容中），通过 JavascriptInterface 方法将信息传递给您的应用程序。

这是一个 javascript 示例，用于在内部跳转到 #-anchor 的源处捕获 scrollY。一旦进入 doUpdateVisitedHistory，获得此信息通常为时已晚。

```
if (typeof AndroidCode != "undefined") { 
  var coll = document.getElementsByTagName("a"); 
  for (let i = 0; i < coll.length; i++) { 
    var href = coll[i].getAttribute("href"); 
    if (href.indexOf("#") >= 0) { 
      coll[i].addEventListener("click", function() { 
        AndroidCode.reportInternalJump(); 
      }); 
    } 
  } 
} 
```

AndroidCode 是通过 WebView.addJavascriptInterface 声明的对象的名称。

这是此技术的另一个有用示例，尽管它与链接没有直接关系。它将向 OnPageFinished 报告页面已完全加载（例如，在进行复杂格式化并且您不想在行完成移动之前设置滚动Y 时很有用）。

```
if (typeof AndroidCode != "undefined") {
    AndroidCode.setLoadedStatus(false);

    window.onload = function () {
       AndroidCode.setLoadedStatus(true);
    }
} 
```

# android - 如何将变量的名称从一个类传递到另一个类（不是值）

> ID：14137239
> 
> 赞同：0
> 
> 时间：2013-01-03T10:42:11.690
> 
> 标签：android

我需要将在 中创建的变量的名称传递`Class A`给`Class B`，因此我可以在该变量中放入一个值（在`Class B`）。但是，在 BI 类中不知道该变量的名称。代码是这样的：

A级

```
public class A {
      int valore; // this is the variable, in Class b, I don't know this name!
      public  void callClassB(){
            ClassB.Method(what shoudld i put here?)
      }
} 
```

这是B类

```
public class B {              
       public void Method(the_Name_Of_TheVariable_I_get){
             the_Name_Of_TheVariable_I_get = 5; // i need to do this
       }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:55:47.967

您可以传递变量的名称`"valore"`，然后您需要反射在您的方法中分配它：

```
a = new A();
Field f = a.getClass().getDeclaredField(varName);
f.set(a, 5); 
```

a 也可以是一个参数。（必须给出拥有该成员的实例）。

但是，这不是处理您的问题的推荐方法，因为从某种意义上说编译器将无法检查您正在访问实际存在的项目是不可靠的。

最好使用接口，例如：

```
public interface Settable {
    public void set(int value);
} 
```

接着：

```
public class A implements Settable {
    private int valore;
    public void set(int value) {
        valore = value;
    }
    public  void callClassB(){
        ClassB.Method(this);
    }
} 
```

在 B 中：

```
public class B{      
    public void Method(Settable settable){
        settable.set(5);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:45:38.617

为什么需要变量名？只需传递变量本身。在 B 类中创建一个方法

```
public int getValore(){
         return valore;
} 
```

然后在 A 类中使用修改代码为

```
public  void callClassB(){
            ClassB.Method(getValore())
       } 
```

我真的不明白你想在这里实现什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:49:53.817

您还可以使用以下方法：

```
interface ValueSetter {
      void setValue(int value);
} 
```

A级

```
public class A implements ValueSetter{
int valore;

      public  void callClassB(){
            ClassB.Method(this)
       }

         void setValue(int value){
            valore = value;
         }
} 
```

这是B级

```
public class B{      

          public  void Method(ValueSetter valueSetter){
               ValueSetter.setValue(5); 
           }
    } 
```

这更符合 OOPS ..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T10:44:48.430

您将需要为此使用反射。

这是来自 Oracle 的教程：http: [//docs.oracle.com/javase/tutorial/reflect/index.html](http://docs.oracle.com/javase/tutorial/reflect/index.html)

但是，您无法在运行时获取变量的名称。但是假设你有字段的名称，代码看起来像这样：

```
this.getClass().getDeclaredField(the_Name_Of_TheVariable_I_get).set(this, 5); 
```

# android - 在 Android 模拟器上使用 UDP 的客户端-服务器

> ID：14137243
> 
> 赞同：0
> 
> 时间：2013-01-03T10:42:22.747
> 
> 标签：android, udp

是否可以在 Android 模拟器上发送/接收 UDP 数据包？我在某处读到必须定向端口。有人可以解释它是如何工作的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:07:29.353

yes it is possible to send and receive UDP packets from android.

Sending part is done [here](https://stackoverflow.com/questions/12652261/how-to-use-udp-sockets-in-android "just go through the example")!

# php - 制作ajax上传文件的最佳方法？

> ID：14137249
> 
> 赞同：-1
> 
> 时间：2013-01-03T10:42:38.983
> 
> 标签：php, javascript, jquery, html

我想用ajax制作一个上传系统[无页面重新加载]

我在谷歌上搜索，找到了一些东西，上传`iframes`等等`File API`......

旧浏览器没有文件API，我在`iFrame`上传时遇到了一些问题`IE`，

有没有办法让它在所有浏览器中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:00:55.073

由于您的标签包括[jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")，我建议您最好的解决方案是[jQuery Form Plugin](http://malsup.com/jquery/form/)。

这个插件使得通过 ajax 处理表单变得非常容易，包括带有文件上传字段的表单。您无需担心浏览器 API 或是否支持它；该插件处理幕后的所有事情。

该插件的网站上有很好的示例，我可以确认它运行良好，因为我自己刚刚在一个项目中实现了它。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:08:35.090

使用上传。它真的很简单，看起来很棒。

[http://www.uploadify.com/](http://www.uploadify.com/)

# soapui - SOAP UI - “错误获取响应”

> ID：14137258
> 
> 赞同：5
> 
> 时间：2013-01-03T10:43:01.487
> 
> 标签：soapui

我正在尝试通过在家中连接到我组织的 VPN 来使用 SOAP UI。但是我收到了这个错误-

*“获取响应时出错：org.apache.http.conn.HttpHostConnectException：连接到 https://xxx.xxxxxxx.xxxxxx.xxx:xxxx 被拒绝”*

我怎样才能摆脱这个错误？它是否与 SOAP UI 设置有关？

编辑 - 下面是 error.log 文件

```
Wed May 01 13:57:00 *** 2013:ERROR:org.apache.http.conn.HttpHostConnectException: Connection to http://stage2cpplvs52.qa.paypal.com:7021 refused
   org.apache.http.conn.HttpHostConnectException: Connection to http://stage2cpplvs52.qa.paypal.com:7021 refused
    at com.eviware.soapui.impl.wsdl.support.http.SoapUIMultiThreadedHttpConnectionManager$SoapUIClientConnectionOperator.openConnection(SoapUIMultiThreadedHttpConnectionManager.java:321)
    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)
    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)
    at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:561)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:415)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)
    at com.eviware.soapui.impl.wsdl.support.http.HttpClientSupport$Helper.execute(HttpClientSupport.java:236)
    at com.eviware.soapui.impl.wsdl.support.http.HttpClientSupport.execute(HttpClientSupport.java:345)
    at com.eviware.soapui.impl.wsdl.submit.transports.http.HttpClientRequestTransport.sendRequest(HttpClientRequestTransport.java:241)
    at com.eviware.soapui.impl.wsdl.WsdlSubmit.run(WsdlSubmit.java:123)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
   Caused by: java.net.ConnectException: Connection timed out: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:123)
    at com.eviware.soapui.impl.wsdl.support.http.SoapUIMultiThreadedHttpConnectionManager$SoapUIClientConnectionOperator.openConnection(SoapUIMultiThreadedHttpConnectionManager.java:299)
    ... 16 more 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-04-07T03:06:47.267

```
Go to file > Preferences >Proxy settings and set Proxy to :None 
```

试试这样

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-14T06:31:30.787

企业部门的此问题是由于“未向您的用户 ID 提供环境和端口访问”。

因此，请联系企业网络服务团队并请求访问该文件夹。

如何注意这个问题？

转到命令提示符，

输入以下命令，

ping“端点网址”

按回车。

如果您没有得到任何响应，这意味着您无权访问该 URL（请致电您的系统管理员并请求访问该 URL）。

如果你得到回应，

然后在命令提示符下输入以下命令，

telnet “端点 URL” “端口号”

按回车。

如果您没有得到响应，则表示您无权访问该特定“端点 url”的端口。因此，请您的系统管理员提供对该 url 和特定端口的访问权限

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-23T18:28:35.023

您必须在首选项中配置或关闭代理服务器或检查您的防火墙设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-09T02:46:17.493

当您尝试连接的服务器关闭或您尝试访问的服务未启动时，就会发生这种情况。

在您的情况下，看起来服务器“stage2cpplvs52.qa.paypal.com”已关闭或在启动时出现问题。

在从 SOAP UI 连接之前，请先尝试重新启动/启动服务器并从浏览器访问服务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-03T13:44:24.353

此处的解决方案：[https ://yiingw.wordpress.com/2014/07/11/soapui-5-0-0-org-apache-http-nohttpresponseexception-the-target-server-failed-to-respond/](https://yiingw.wordpress.com/2014/07/11/soapui-5-0-0-org-apache-http-nohttpresponseexception-the-target-server-failed-to-respond/)

启用“Expect-Continue”，现在一切正常。

文件→HTTP 设置→Expect-Continue：将 Expect-Continue 标头添加到传出请求

参考： http: [//www.soapui.org/Working-with-soapUI/preferences.html](http://www.soapui.org/Working-with-soapUI/preferences.html) rfc 2616

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-17T15:56:07.897

对我来说，帮助我将应用程序的托管模型更改为 Out Of Process。转到应用程序属性->调试->托管模型->进程外

# java - Java - “找不到符号”错误

> ID：14137263
> 
> 赞同：0
> 
> 时间：2013-01-03T10:43:15.907
> 
> 标签：java, class

这是我第一次写课程，我遇到了所有这些错误：

```
C:\Users\Eamon\programming\java>javac -Xlint:unchecked Shop1.java
Shop1.java:20: error: cannot find symbol
                if (cart.itemsInCart.products.get(itemIndex).quantity != 0)
                                                            ^
  symbol:   variable quantity
  location: class Object
Shop1.java:21: error: cannot find symbol
                    System.out.println(cart.itemsInCart.products.get(itemIndex).quantity
                                                                               ^
  symbol:   variable quantity
  location: class Object
Shop1.java:22: error: cannot find symbol
                        + " " + cart.itemsInCart.products.get(itemIndex).name
                                                                        ^
  symbol:   variable name
  location: class Object
Shop1.java:23: error: cannot find symbol
                        + " $"+ df.format(cart.itemsInCart.products.get(itemIndex).price)
                                                                                  ^
  symbol:   variable price
  location: class Object
Shop1.java:25: error: cannot find symbol
                        ((cart.itemsInCart.products.get(itemIndex).quantity
                                                                  ^
  symbol:   variable quantity
  location: class Object
Shop1.java:26: error: cannot find symbol
                        * cart.itemsInCart.products.get(itemIndex).price)));
                                                                  ^
  symbol:   variable price
  location: class Object
Shop1.java:35: error: cannot find symbol
                subtotal += cart.itemsInCart.products.get(itemIndex).quantity
                                                                    ^
  symbol:   variable quantity
  location: class Object
Shop1.java:36: error: cannot find symbol
                * cart.itemsInCart.products.get(itemIndex).price;
                                                          ^
  symbol:   variable price
  location: class Object
Shop1.java:126: error: cannot find symbol
                    if (codeInput.equals(this.itemsInCart.products.get(itemIndex).code))
                                                                                 ^
  symbol:   variable code
  location: class Object
Shop1.java:138: error: cannot find symbol
            this.itemsInCart.products.get(itemIndex).quantity = scanner.nextInt();
                                                    ^
  symbol:   variable quantity
  location: class Object
Shop1.java:140: error: cannot find symbol
            if (this.itemsInCart.products.get(itemIndex).quantity > 100)
                                                        ^
  symbol:   variable quantity
  location: class Object
Shop1.java:143: error: cannot find symbol
                    + this.itemsInCart.products.get(itemIndex).quantity
                                                              ^
  symbol:   variable quantity
  location: class Object
Shop1.java:145: error: cannot find symbol
                    + this.itemsInCart.products.get(itemIndex).quantity
                                                              ^
  symbol:   variable quantity
  location: class Object
Shop1.java:147: error: cannot find symbol
                if (scanner.nextInt() != this.itemsInCart.products.get(itemIndex).quantity)
                                                                                 ^
  symbol:   variable quantity
  location: class Object
Shop1.java:148: error: cannot find symbol
                    this.item[itemIndex].quantity = 0;
                        ^
  symbol: variable item
Shop1.java:150: error: cannot find symbol
            if (this.itemsInCart.products.get(itemIndex).quantity < 0)
                                                        ^
  symbol:   variable quantity
  location: class Object
Shop1.java:151: error: cannot find symbol
                this.itemsInCart.products.get(itemIndex).quantity = 0;
                                                        ^
  symbol:   variable quantity
  location: class Object
Shop1.java:50: error: cannot find symbol
        ArrayList products = new Arraylist<Product>(3);
                                 ^
  symbol:   class Arraylist
  location: class Catalogue
Shop1.java:54: warning: [unchecked] unchecked call to add(E) as a member of the raw type ArrayList
            products.add(new Product("Condensed Powdered water", "P3487", 2.50
                        ^
  where E is a type-variable:
    E extends Object declared in class ArrayList
Shop1.java:56: warning: [unchecked] unchecked call to add(E) as a member of the raw type ArrayList
            products.add(new Product("Distilled Moonbeams", "K3876", 3.00
                        ^
  where E is a type-variable:
    E extends Object declared in class ArrayList
Shop1.java:58: warning: [unchecked] unchecked call to add(E) as a member of the raw type ArrayList
            products.add(new Product("Anti-Gravity Pills", "Z9983", 12.75
                        ^
  where E is a type-variable:
    E extends Object declared in class ArrayList
Shop1.java:80: error: Illegal static declaration in inner class Catalogue.Product
            static final Pattern productCodeRegex =
                                 ^
  modifier 'static' is only allowed in constant variable declarations
Shop1.java:83: error: Illegal static declaration in inner class Catalogue.Product
            public static boolean isValidCode(String codeInput)
                                  ^
  modifier 'static' is only allowed in constant variable declarations
Shop1.java:92: error: cannot find symbol
                    + this.products.get(itemIndex).name
                                                  ^
  symbol:   variable name
  location: class Object
Shop1.java:93: error: cannot find symbol
                    + " [" + this.products.get(itemIndex).code + "], $"
                                                         ^
  symbol:   variable code
  location: class Object
Shop1.java:94: error: cannot find symbol
                    + df.format(this.products.get(itemIndex).price) + " "
                                                            ^
  symbol:   variable price
  location: class Object
Shop1.java:95: error: cannot find symbol
                    + this.products.get(itemIndex).rate + ".");
                                                  ^
  symbol:   variable rate
  location: class Object
24 errors
3 warnings 
```

我正在回去工作，我可以很好地找到这些变量；是什么赋予了？

```
import java.util.Scanner;
import java.util.ArrayList;
import java.util.regex.Pattern;
import java.text.DecimalFormat;

public class Shop1
{  
    public static void main(String args[])
    {  
        Cart cart = new Cart(new Catalogue());
        printOrder(cart);
    }

    public static void printOrder(Cart cart)
    {
        DecimalFormat df = new DecimalFormat("0.00");
        System.out.println("Your order:");
        for(int itemIndex = 0; itemIndex < cart.itemsInCart.products.size(); 
            itemIndex++)
            if (cart.itemsInCart.products.get(itemIndex).quantity != 0)
                System.out.println(cart.itemsInCart.products.get(itemIndex).quantity 
                    + " " + cart.itemsInCart.products.get(itemIndex).name 
                    + " $"+ df.format(cart.itemsInCart.products.get(itemIndex).price) 
                    + " = $" + df.format
                    ((cart.itemsInCart.products.get(itemIndex).quantity 
                    * cart.itemsInCart.products.get(itemIndex).price)));

        double subtotal = 0;
        int taxPercent = 20;
        double tax;
        double total;

        for(int itemIndex = 0; itemIndex < cart.itemsInCart.products.size(); 
            itemIndex++)
            subtotal += cart.itemsInCart.products.get(itemIndex).quantity 
            * cart.itemsInCart.products.get(itemIndex).price;
        tax = subtotal * taxPercent / 100;
        total = subtotal + tax;

        System.out.print("Subtotal: $" + df.format(subtotal) 
            + " Tax @ " + taxPercent + "%: $" + df.format(tax) 
            + " Grand Total: $" + df.format(total));
    }  
}

class Catalogue
{
    DecimalFormat df = new DecimalFormat("0.00");
    ArrayList products = new Arraylist<Product>(3);

    public Catalogue()
    {
        products.add(new Product("Condensed Powdered water", "P3487", 2.50
            , "per packet"));
        products.add(new Product("Distilled Moonbeams", "K3876", 3.00
            , "a dozen")); 
        products.add(new Product("Anti-Gravity Pills", "Z9983", 12.75
            , "for 60"));
    }

    class Product
    {
        String name;
        double price;
        String code;
        String rate;
        int quantity;

        public Product(String startName, String startCode, double startPrice
            , String startRate) 
        {
            name = startName;
            code = startCode;
            price = startPrice;
            rate = startRate;
            quantity = 0;
        }

        static final Pattern productCodeRegex = 
            Pattern.compile("^[a-zA-Z][0-9]{4}$"); 

        public static boolean isValidCode(String codeInput)
            {return productCodeRegex.matcher(codeInput).matches();}
    }

    public void printCatalogue()
    {
        System.out.println("Our catalogue (product codes in brackets):");
        for(int itemIndex = 0; itemIndex < this.products.size(); itemIndex++)
            System.out.println("(" + (itemIndex + 1) + ") " 
                + this.products.get(itemIndex).name 
                + " [" + this.products.get(itemIndex).code + "], $"
                + df.format(this.products.get(itemIndex).price) + " " 
                + this.products.get(itemIndex).rate + ".");
        System.out.println("Buy something!");
    }
}

class Cart
{
    Scanner scanner = new Scanner(System.in); //

    int size = 3; //
    String codeInput = "";
    Catalogue itemsInCart;

    public Cart(Catalogue catalogue) 
    {
        itemsInCart = catalogue;
        catalogue.printCatalogue();
        this.selectProducts();
    }

    public void selectProducts()
    {
        while (true)
        {
            System.out.print("Enter product code (0 to check out): ");
            codeInput = scanner.next();
            scanner.nextLine();
            if (codeInput.equals("0")) return;

            for (int itemIndex = 0; itemIndex < this.itemsInCart.products.size(); 
                itemIndex++)
                if (codeInput.equals(this.itemsInCart.products.get(itemIndex).code))
                    this.addToCart(itemIndex);       
            if (Product.isValidCode(codeInput))
                System.out.println("This product code is not on record.");      
            else System.out.println
                ("Sorry, I don't understand! Use product codes only.");
        }         
    }

    public void addToCart(int itemIndex)
    {
        System.out.print("Enter quantity: ");
        this.itemsInCart.products.get(itemIndex).quantity = scanner.nextInt();
        scanner.nextLine();
        if (this.itemsInCart.products.get(itemIndex).quantity > 100)
        {
            System.out.print("That is a large order, " 
                + this.itemsInCart.products.get(itemIndex).quantity 
                + " counts. Is this correct? Enter \"" 
                + this.itemsInCart.products.get(itemIndex).quantity 
                + "\" to confirm, or, enter any other integer to cancel: ");
            if (scanner.nextInt() != this.itemsInCart.products.get(itemIndex).quantity)
                this.item[itemIndex].quantity = 0;
        }
        if (this.itemsInCart.products.get(itemIndex).quantity < 0)
            this.itemsInCart.products.get(itemIndex).quantity = 0;
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T10:50:38.297

中`Catalogue`，你需要

```
ArrayList<Product> products = new ArrayList<Product>(3); 
```

代替

```
ArrayList products = new Arraylist<Product>(3); 
```

否则编译器不知道将返回哪种类型

```
cart.itemsInCart.products.get(itemIndex) 
```

只有编译器知道这里返回的类型是`Product`，他才知道您可以访问该`quantity`字段。如果可以返回任何类型，则可能是类型`.quantity`不存在或不可访问。

为了将来参考，请提供您实际使用的代码，因为您的代码甚至无法编译。你有`Arraylist`它应该在的地方`ArrayList`（Java 区分大小写）。对接口编程也是一个好习惯，所以最好写`List<Product> products = new ArrayList<Product>(3);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:49:13.910

据我所知，您尝试使用的某些符号可能无法访问。尝试在自己的文件中定义每个类，然后制作要使用的符号`public`，看看是否能解决问题。之后，您可以以更好的方式构建代码（即使用 getter 和 setter，而不是直接访问）。

**编辑：**我的错误。jlordo的答案是正确的。

# javascript - 如何将 document.getElementById 与 jquery 下一个兄弟选择器一起使用

> ID：14137265
> 
> 赞同：0
> 
> 时间：2013-01-03T10:43:29.493
> 
> 标签：javascript, jquery, jquery-selectors

我想删除一些 silblings。我尝试如下。但不工作。为什么？以及如何解决？

```
<div>
  <div id="idx1">child1 </div>
  <div id="idx2">child2</div>
  <div id="idx3">child3</div>
  ...
  <div id="/a/b/c">This should be last child</div>
  <div id="idx4">Remove it.</div>
  <div id="idx5">Remove it.</div>
  <div id="idx6">Remove it.</div>
  ...
</div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

<script>

 // Since the id contains special chars,
 // javascript method has been used to get the element.
 lastChildObj = jQuery(document.getElementById('a/b/c')); 

 // I don't know how to remove the childs after lastChildObj.
 // I tried as given below.
 lastChildObj.filter('~').remove(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:46:53.983

这应该适合你：

```
var base = document.getElementById('/a/b/c');
while(base.nextSibling){ // While the element has siblings
    base.parentElement.removeChild(base.nextSibling); // remove the siblings from the parent element.
} 
```

**[工作示例](http://jsfiddle.net/nny6G/)**

您还可以使其效率更高一些：

```
var base = document.getElementById('/a/b/c');
while(base.parentElement.removeChild(base.nextSibling))​ // Remove the nextSiblings while they exist. 
```

**[例子](http://jsfiddle.net/QDjWG/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:48:04.097

有两个关键步骤。

1.  选择要删除的元素
2.  删除它们

步骤 1 可以分为两部分，获取对要保留的最后一个元素的引用，然后获取其后所有兄弟元素的列表。第 2 步仅使用该`.remove()`功能。

```
$(document.getElementById('/a/b/c')).nextAll().remove(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T10:54:24.503

您仍然可以将 jquery 用于您的选择器，但您需要像这样转义 id：

```
$("#\\/a\\/b\\/c") 
```

然后你只需要像这样选择以下任何 div：

```
$("#\\/a\\/b\\/c").nextAll().remove(); 
```

[http://jsfiddle.net/8mMJq/](http://jsfiddle.net/8mMJq/)

有关选择器中特殊字符的更多信息：http: [//api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T10:55:56.323

试试这个 ：

```
$("#\\/a\\/b\\/c").nextAll().remove(); 
```

JsFiddle：http: [//jsfiddle.net/QcvWQ/](http://jsfiddle.net/QcvWQ/)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-03T10:53:05.657

首先将 id 从“/a/b/c”更改为“abc”，然后运行以下

```
$("#abc").nextAll().each(function () { $(this).remove());}); 
```

# c# - 使用带有谓词的 linq 无法识别的表达式节点 ArrayIndex

> ID：14137266
> 
> 赞同：2
> 
> 时间：2013-01-03T10:43:34.920
> 
> 标签：c#, asp.net, linq

你好，我有这个问题...

```
List<VisitorsVo> lstVisitors = new List<VisitorsVo>();
            var predicate = ReturnPredicateForVisitors(p_htVisitor);
            if (predicate != null)
            {
                lstVisitors = (from n in context.TBL_VISITORs.Where(predicate)
                               select new VisitorsVo
                               {
                                   VisitId = n.VISIT_ID,
                                   VisitorName = n.VISITOR_NAME,
                                   ResidentDuration = n.ENQUIRY_PATIENT_DURATION.Split(';')[0] + " " + n.ENQUIRY_PATIENT_DURATION.Split(';')[1],
                               }).ToList();
            } 
```

但我收到无法识别的表达式节点 ArrayIndex 错误我该如何克服...这里我正在检查使用谓词的条件...。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T10:55:07.387

看起来这是 LINQ to Entities，而不是普通的 LINQ。您`context`是实体框架还是 LINQ to SQL 上下文？

如果是这样，则 LINQ to Entities/SQL 将尝试将此表达式转换为 SQL，如果它包含它不知道的函数调用或没有 SQL 等效函数，则它无法执行此操作。

我的钱用于使用`Split()`；我敢打赌 LINQ to Entities 会对此感到厌烦。

您可以做的是修改您的查询以摆脱`Split()`，然后您可以查询 lstVisitors （它现在只是一个内存数据结构，它与实体框架没有链接）并`Split()`在那里使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:17:27.747

如果您需要拆分一列，这意味着您可以将该数据保存在两个单独的列中。

如果我是你，我会去数据库设计并将 ENQUIRY_PATIENT_DURATION 转换为 2 列并正确执行。您的代码似乎很容易出错。

# algorithm - 看不懂背包解决办法

> ID：14137267
> 
> 赞同：1
> 
> 时间：2013-01-03T10:43:40.930
> 
> 标签：algorithm, data-structures, recursion, dynamic-programming, knapsack-problem

在维基百科中，背包的算法如下：

```
for i from 1 to n do  
  for j from 0 to W do  
    if j >= w[i] then  
      T[i, j] := max(T[i-1, j], T[i-1, j-w[i]] + v[i]) [18]  
    else  
      T[i, j] := T[i-1, j]  
    end if  
  end for  
end for 
```

我在网上找到的所有示例的结构都相同。
我无法理解的是这段代码如何考虑到最大值可能来自**较小**的背包这一事实？例如，如果背包容量为 8，那么最大值可能来自容量 7 (8 - 1)。
我找不到任何逻辑来考虑可能最大值来自较小的背包。这是错误的想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T10:47:49.837

背包的动态规划解基本上是递归的：

```
T(i,j) = max{ T(i-1,j) ,         T(i-1,j-w[i]) + v[i] }
       //      ^                         ^
       //  ignore the element       add the element, your value is increase
       //                           by v[i] and the additional weight you can
       //                           carry is decreased by w[i] 
```

（如果`T(i,j) = -infinity`为 each设置 else 条件在递归形式中是多余的`j < 0`）。

这个想法是详尽的搜索，你从一个元素开始，你有两种可能性：添加或不添加。
您检查了这两个选项，并选择了其中最好的一个。

由于它是递归完成的 - 您有效地检查了将元素分配给背包的所有可能性。

请注意，维基百科中的解决方案基本上是相同递归公式的自下而上的解决方案

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T16:05:59.323

如我所见，您误解了背包的概念。在我们到达代码部分之前，我将在这里详细描述。

首先，有两个版本的问题：

1.  **0-1背包问题**：这里的物品是不可分割的，你要么拿一个，要么不拿。并且可以用*动态规划*来解决。`//and this one is the one yo are facing problems with`
2.  **分数背包问题**：现在不关心这个了。

对于第一个*问题*，您可以将其理解为：

给定一个最大容量为**W的背包，以及由****n 个**物品组成的集合**S**每个物品**i**都有一些权重**wi**和收益值**bi** （所有**wi** 和**W**都是整数值）。

 ******> 那么，如何包装背包以实现包装物品的最大总价值？

在数学口中：

![在此处输入图像描述](../Images/46e221a83fe1ced408dd48a1a271496e.png)

并使用*动态规划*解决这个问题我们建立了一个表格`V[0..k, 0..W]`，其中每个可用项目一行，每个权重一列，从**0**到**W**。我们需要仔细识别*子问题*，

然后，*子问题*将是计算`V[k,w]`，即 在大小为**w**`Sk= {items labeled 1, 2, .. k}`的背包中找到最佳解决方案（给定容量**w**和项目**1，...，k**可实现的最大值）

 ******所以，我们找到了这个公式来解决我们的问题： ![在此处输入图像描述](../Images/e47bf7e8b42481817940fff25ce1939e.png)

该算法只找到背包中可以携带的**最大可能**值，即V[n,W]中的值。要知道使该最大值的物品，这将是另一个话题。

我真的希望这个答案对您有所帮助。我有一个 pp 演示文稿，它会与您一​​起填写表格并逐步向您展示算法。但我不知道如何将它上传到stackoverflow。让我知道是否需要任何帮助。************

# php - 如何从循环中创建树状数组？

> ID：14137270
> 
> 赞同：0
> 
> 时间：2013-01-03T10:43:52.657
> 
> 标签：php, loops

假设我有一个这样的一维数组`$arr`：

```
Array
(
    ['key1'] => 1
    ['key2'] => 1
    ['key3'] => 1
    ['key4'] => 1
) 
```

我想这样循环`$arr`：

```
foreach($arr as $key => $a) {
   //$tree[????] = ????? Here is my concern
} 
```

这样，做`print_r($tree)`产生

```
Array
(
    ['key1'] => Array
    (
        ['key2'] => Array
        (
            ['key3'] => Array
            (
                ['key4'] => 1
            )
        )
    )
) 
```

我关心的是如何`$tree`从一个单维数组增加循环内数组的维数（而不是值），`$numbers`例如`$tree['key1']['key2']['key3']`一个数组并且`$tree['key1']['key2']['key3']['key4']`等于`1`.

此外，如果我有一个`$foo`包含 10 个元素的一维数组。我应该生成另一个`$bar`扩展为 10 维数组的数组，类似于上面的输出。

我应该在`foreach`循环内做什么？或者不是使用循环，有没有办法从一维数组产生像上面那样的输出？

* * *

编辑：

> 好吧，您显然需要某种递归函数，但是您能否根据您显示的数据解释如何知道 key2 应该是 key1 的孩子，key3 应该是 key2 的孩子等？

一维数组的下一个元素是前一个元素的子元素。所以如果一维数组是这样的：

```
Array
(
    ['bar'] => 1 // I don't care of the values as of the moment
    ['foo'] => 1
    ['baz'] => 1
) 
```

Element`foo`应该是 的子级`bar`，并且 element`baz`应该是`foo`树数组的子级。

> 好的，所以除了最后一个元素之外的所有东西的实际值都无关紧要吗？

实际上，到目前为止，一维数组的所有值都无关紧要。我只关心构建树数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T11:09:17.527

这样做的方法是使用引用。

```
function create_tree($arr) {
  $result = array();
  $ref = &$result;
  foreach ($arr as $key => $el) {
    $ref = array($key => $el);
    $ref =& $ref[$key];
  }
  return $result;
} 
```

这个怎么运作：

```
$result = array(); // an array to hold the result

$ref = &$result; // start with a reference to the top level

foreach ($arr as $key => $el) { // iterate over the input array

  $ref = array($key => $el); // create this level in the array

  $ref =& $ref[$key]; // change the reference to be the new deepest level

}

return $result; // return the result 
```

[看到它工作](http://codepad.org/7HGCPv8B)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T11:05:18.127

[引用分配](http://php.net/manual/en/language.references.whatdo.php)似乎对此很有用。

```
$tree = array();
$node =& $tree;
foreach ($arr as $key => $a) {
    $node =& $node[$key];
    $node = array();
}
$node = end($arr); 
```

# mysql - MySQL REGEXP 查询 - 不区分重音的搜索

> ID：14137273
> 
> 赞同：13
> 
> 时间：2013-01-03T10:43:58.103
> 
> 标签：mysql, regex, diacritics, accent-insensitive

我正在查询一个葡萄酒名称数据库，其中许多都包含重音（但不是以统一的方式，因此可以输入带有或不带有重音的类似葡萄酒）

基本查询如下所示：

```
SELECT * FROM `table` WHERE `wine_name` REGEXP '[[:<:]]Faugères[[:>:]]' 
```

这将返回标题中带有“Faugeres”的条目，但不返回“Faugeres”

```
SELECT * FROM `table` WHERE `wine_name` REGEXP '[[:<:]]Faugeres[[:>:]]' 
```

相反。

我曾想过这样的事情：

```
SELECT * 
FROM `table` 
WHERE `wine_name` REGEXP '[[:<:]]Faug[eèêéë]r[eèêéë]s[[:>:]]' 
```

可能会成功，但这只会返回没有重音的结果。

该字段被整理为 utf8_unicode_ci，从我读过的内容来看，它应该是这样的。

有什么建议么？！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T10:47:37.560

[你不走运](http://dev.mysql.com/doc/refman/5.7/en/regexp.html)：

> **警告**
> 
> REGEXP 和 RLIKE 运算符以字节方式工作，因此它们不是多字节安全的，并且可能会在使用多字节字符集时产生意外结果。此外，这些运算符通过字节值比较字符，即使给定的排序规则将它们视为相等，重音字符也可能不会比较相等。

`[[:<:]]`和regexp 运算符是单词边界的`[[:>:]]`标记。您可以使用操作员实现的最接近的`LIKE`是这一行：

```
SELECT *
FROM `table`
WHERE wine_name = 'Faugères'
   OR wine_name LIKE 'Faugères %'
   OR wine_name LIKE '% Faugères' 
```

如您所见，它并不完全等效，因为我将单词边界的概念限制为空格。为其他边界添加更多子句将是一团糟。

您也可以使用全文搜索（尽管不一样），但您不能在 InnoDB 表中定义全文索引（目前）。

你肯定不走运:)

* * *

**附录：**自 MySQL 8.0起，这[已更改：](https://dev.mysql.com/doc/refman/8.0/en/regexp.html)

> MySQL 使用 Unicode 国际组件 (ICU) 实现正则表达式支持，它提供完整的 Unicode 支持并且是多字节安全的。（在 MySQL 8.0.4 之前，MySQL 使用 Henry Spencer 的正则表达式实现，它以字节方式运行并且不是多字节安全的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-14T18:26:30.840

因为 REGEXP 和 RLIKE 是面向字节的，你有没有试过：

```
SELECT 'Faugères' REGEXP 'Faug(e|è|ê|é|ë)r(e|è|ê|é|ë)s'; 
```

这表示其中之一必须在表达式中。请注意，我没有使用加号（+），因为这意味着一个或多个。由于您只想要一个，因此不应使用加号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T10:49:34.817

utf8_general_ci 在排序时看不到重音/无重音之间的区别。也许这对于搜索也是如此。此外，将 REGEXP 更改为 LIKE。REGEXP 进行二进制比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-21T17:11:38.473

为了解决这个问题，我尝试了不同的方法，包括使用 binary 关键字或 latin1 字符集但无济于事。
最后，考虑到这是一个 MySql 错误，我最终替换了 é 和 è 字符，

如下所示：

```
SELECT * 
FROM `table` 
WHERE replace(replace(wine_name, 'é', 'e'), 'è', 'e') REGEXP '[[:<:]]Faugeres[[:>:]]' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-30T04:47:38.740

我有这个问题，并在上​​面寻求 Álvaro 的建议。但就我而言，它错过了搜索词是字符串中的**中间**词的那些实例。我去了相当于：

```
SELECT *
FROM `table`
WHERE wine_name = 'Faugères'
   OR wine_name LIKE 'Faugères %'
   OR wine_name LIKE '% Faugères'
   OR wine_name LIKE '% Faugères %' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-29T16:41:52.133

我在尝试查找与以下模式之一匹配的每条记录时遇到了同样的问题：“copropriété”、“copropriete”、“COPROPRIÉTÉ”、“Copropriété?t?”

`REGEXP 'copropri.{1,2}t.{1,2}`为我工作。基本上，`.{1,2}`无论字符是 1 字节还是 2 字节编码，will 都应该适用。

说明：[https ://dev.mysql.com/doc/refman/5.7/en/regexp.html](https://dev.mysql.com/doc/refman/5.7/en/regexp.html)

警告
REGEXP 和 RLIKE 运算符以字节方式工作，因此它们不是多字节安全的，并且可能会在使用多字节字符集时产生意外结果。此外，这些运算符通过字节值比较字符，即使给定的排序规则将它们视为相等，重音字符也可能不会比较相等。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-08-16T03:48:03.330

好的，我在寻找其他东西时偶然发现了这个问题。

这返回真。

```
SELECT 'Faugères' REGEXP 'Faug[eèêéë]+r[eèêéë]+s'; 
```

希望能帮助到你。

添加“+”告诉正则表达式查找一个或多个出现的字符。

# iphone - __block 变量的值没有改变

> ID：14137274
> 
> 赞同：0
> 
> 时间：2013-01-03T10:44:01.740
> 
> 标签：iphone, multithreading, thread-safety, objective-c-blocks, avurlasset

下面的代码将异步加载资产的值。我使用while循环等待它。

```
 AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:aAudioLink options: nil];
    [asset loadValuesAsynchronouslyForKeys:keys 
                 completionHandler:^{                                           
                canExit = TRUE;
                         }];

    while (canExit == FALSE) {
        // NSLog (@"canExist = FALSE");     
    }

    NSLog(@"canExist = TRUE"); 
```

如果 NSLog 语句像上面的代码一样被注释，最后的 NSLog 将不会被调用。如果没有注释 NSLog 语句，则调用最后一个 NSLog。

块和块外的代码在不同的线程上运行，并且两者都不是主线程。

这是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:03:13.830

我认为您不应该为此使用while循环。最近我正在处理一个应用程序，在该应用程序中我必须使用 AVAsset 为资产生成缩略图。我最终使用调度信号量来阻塞线程，直到图像异步生成。

为什么你不能尝试以下。

```
 dispatch_semaphore_t sema = dispatch_semaphore_create(0);
 dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0);

 AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:aAudioLink options: nil];

dispatch_async(queue, ^{

[asset loadValuesAsynchronouslyForKeys:keys 
             completionHandler:^{                                           
            canExit = TRUE;
            dispatch_semaphore_signal(sema);
             }];
    });

dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
dispatch_release(sema); 
```

如果我是对的，它应该可以工作。

# javascript - 在表中添加和删除行

> ID：14137276
> 
> 赞同：-1
> 
> 时间：2013-01-03T10:44:03.627
> 
> 标签：javascript, jquery, html

我想最后在这个表中添加和删除行我怎么能做到这一点

```
<table align="left" id="postq" style="display: none;" border="2" style="width: 519px">
    <tr>
    <th align="left"><label id="Label1"> Kind of Work </label></th>
    <th align="left"><label id="Label1"> Name Of The Client </label></th>
    <th align="left"><label id="Label1">Name of Firm / Organisation </label></th>
    </tr>
    <tr>
    <td> 
    <input title="Enter Kind Of work 1" readonly="readonly" onclick="if(this.value!=''){this.value='';opendrop1();}else{opendrop1();}" id="other_work1" name="other_work1" type="text" size="30" <?php if (isset($errors)) { echo 'value="'.htmlentities($_POST['other_work1']).'"'; } ?>  >                
    </td>                       
     <td><input name="client_name1" type="text" id="client_name1" size="40" /></td>
     <td><input name="firm_name1" type="text" id="firm_name1" size="40"/></td>
    </tr>
    </table> 
```

我已经添加了这个脚本

```
 <!--add kind of work rows-->
    <script type="text/javascript">
      $(document).ready(function () {
     var counter = 2;
    $("#addButton").click(function () {

                if (counter > 10) {
                    alert("Only 10 textboxes allow");
                    return false;
                }            
                var $row = $('<tr>');//$('<tr id="row'+counter+'"></tr>')
            $row.html('<td><input title="Enter Kind Of work " readonly="readonly" onclick="if(this.value!=''){this.value='';opendrop();}else{opendrop();}" id="other_work' + counter + '" name="other_work' + counter + '" type="text" size="30" onclick="opendrop()"  <?php if (isset($errors)) { echo 'value="'.htmlentities(@$_POST['other_work' + counter + '']).'"'; } ?>> </td>
     <td><input name="client_name' + counter + '" type="text" id="client_name' + counter + '" size="40"/></td>
     <td><input name="firm_name' + counter + '" type="text" id="firm_name' + counter + '" size="40"/></td>');
     $('#postq').append($row);
                counter++;
            });
    </script> 
```

还有这个按钮，但它仍然不起作用

```
<input type='button' value='Add Button' id='addButton' /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:47:09.993

要添加一行：

```
$('#postq>tbody')
    .append($('<tr>')
        .append($('<td>')
            .text('cell 1 text'))
        .append($('<td>')
            .text('cell 2 text'))); 
```

要删除一行：

```
$('#postq>tbody>tr').remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:48:01.043

`$('#postq tr:last').remove()`将删除最后一行。

`$('<tr class="yournewrow" />').insertAfter('#postq tr:last');`将允许您插入一个新行作为表中的最后一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T11:33:55.143

最后添加行：

```
$('#postq > tbody:last').append('<tr><td>Added here</td></tr>'); 
```

最后删除行：

```
$('#postq > tbody:last tr:last').remove(); 
```

# java - 一个jsp中的多种形式

> ID：14137281
> 
> 赞同：3
> 
> 时间：2013-01-03T10:44:35.727
> 
> 标签：java, forms, spring, jsp, multiple-forms

我在一个 jsp 页面上有两个表单。第一种形式不使用modelAttribute，而第二种形式使用modelAttribute。问题是，如果我发布第一个不使用 modelAttribute 的表单，则会声明我没有绑定 modelAttribute 的错误。

我已经在互联网上搜索以寻找解决方案，但我找不到有用的解决方案。

更改地址.jsp

```
<form method="post">
     <input type="hidden" name="id" value="0" />
     <input type="submit" name="exist" value="send to this address" />
</form>
<form:form method="post" modelAttribute="addressForm">
     <form:input path="street" />     
     <input type="submit" name="add" value="send to this address" />  
</form:form> 
```

订单控制器.java

```
@RequestMapping(value="changeAddress",method = RequestMethod.GET)
public ModelAndView showChangAddress(Model model)
{
     model.addAttribute("addressForm", new AddressForm());
     return new ModelAndView("body.changeaddress");
}

@RequestMapping(value="changeAddress", params="add", method = RequestMethod.POST)
public ModelAndView addChangAddress(@ModelAttribute("addressForm") @Valid AddressForm af, BindingResult result, Model model)
{
     System.out.println("a");
     return new ModelAndView("body.changeaddress");
}

@RequestMapping(value="changeAddress", params="exist", method = RequestMethod.POST)
public ModelAndView processChangAddress(@RequestParam(value="id") String id, Model model)
{
     System.out.println("b");
     return new ModelAndView("body.changeaddress");
} 
```

非常感谢帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T11:01:35.317

关于标签的spring form taglib[文档：](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/view.html#view-jsp-formtaglib-formtag)`<form>`

> 此标记呈现 HTML 'form' 标记并公开绑定路径到内部标记以进行绑定。它将命令对象放在 PageContext 中，以便内部标签可以访问命令对象。

我认为您不需要`<form>`第一种形式的弹簧标签中的任何东西。因此，您可以改用简单的 html 表单：

```
<form method="post" action="...">
     <input type="hidden" name="id" value="0" />
     <input type="submit" name="exist" value="send to this address" />
<form> 
```

# c - 宏如何根据传递给它的类型定义有效的全局名称？

> ID：14137291
> 
> 赞同：3
> 
> 时间：2013-01-03T10:45:05.453
> 
> 标签：c, generics, macros, c11

我相信标题是不言自明的，但这里有一个例子来说明我想要完成的事情：

```
#define PASTE2(_0, _1)  _0 ## _1

#define DEFINE_OPS_FOR_TYPE(TYPE)                   \
    int PASTE2(do_something_with_, TYPE)(void) {    \
        /* do_something_with_<TYPE> */              \
    } 
```

一切都适用于`char`、`int`和单字类型，但是当涉及到`unsigned`类型或其他具有多个关键字的类型时，`a ## b`由于空格（例如：），使用标记粘贴 ( ) 不会生成有效名称`do_something_with_foo bar`。

我能想到的最简单的解决方案是更改`DEFINE_OPS_FOR_TYPE`宏以将有效名称作为第二个参数。例如：

```
#define DEFINE_OPS_FOR_TYPE(TYPE, NAME_FOR_TYPE)            \
    int PASTE2(do_something_with_, NAME_FOR_TYPE)(void) {   \
        /* do_something_with_<NAME_FOR_TYPE> */             \
    } 
```

这按预期工作，但我对其他可能的解决方案很好奇，即使它们过于复杂。我想过使用`_Generic`，但我看不出它对定义名称有何帮助。

你能想出另一种解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:30:24.437

在您想要做的符号的声明或定义级别上，没有太多方法可以`typedef`为所讨论的类型设置唯一标识符。`_Generic`或等效的替代品出现得太晚，对预处理器没有用处。

但是只有有限数量的标准类型会造成这样的问题。所以你可以很容易地想出一个对这些进行类型定义的约定。

在此类定义符号的*使用*`_Generic`方面可以提供帮助。然后你可以在这里做类似的事情

 *```
_Generic((X),
  unsigned long: do_something_with_ulong,
  unsigned char: do_something with_uchar,
  ...
)(X) 
```

在[P99](http://p99.gforge.inria.fr)中，我遵循了这个方案，你会发现很多支持宏已经到位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:32:37.647

我最终使用了一个带有空参数的宏。例子：

```
#define STR2(x)             # x
#define STR(x)              STR2(x)
#define PASTE3(_1,_2,_3)    _1 ## _2 ## _3
#define FOO(_1,_2,_3)       PASTE3(_1, _2, _3)

printf("%s\n", STR(FOO(int,,)));
printf("%s\n", STR(FOO(unsigned, int,)));
printf("%s\n", STR(FOO(unsigned, long, long))); 
```

正如你[在这里看到](http://codepad.org/ufEOdIeT)的，输出是：

```
int
unsignedint
unsignedlonglong 
```

我不记得使用空宏参数是否根据标准得到了很好的定义，但我可以告诉你，Clang 3.1 不会对`-std=c11`with发出任何警告`-pedantic`。

如果您想尝试，这里有一些代码：

```
#include <stdio.h>
#include <limits.h>

#define PASTE4(_1,_2,_3,_4) _1 ## _2 ## _3 ## _4

#define DEFINE_OPS_FOR_TYPE1(T1)        DEFINE_OPS_FOR_TYPE2(T1,)
#define DEFINE_OPS_FOR_TYPE2(T1, T2)    DEFINE_OPS_FOR_TYPE3(T1,T2,)
#define DEFINE_OPS_FOR_TYPE3(T1, T2, T3)                                    \
    int PASTE4(write_,T1,T2,T3)(FILE *file, void *data) {                   \
        T1 T2 T3 foo;                                                       \
        int written = fprintf(file, fmt_specifier(foo), *((T1 T2 T3 *)data));\
        return written > 0 ? 0 : -1;                                        \
    }

#define fmt_specifier(x)                \
    _Generic((x),                       \
        int: "%i",                      \
        unsigned int: "%u",             \
        unsigned long long: "%llu",     \
        default: NULL                   \
    )

DEFINE_OPS_FOR_TYPE1(int)
DEFINE_OPS_FOR_TYPE2(unsigned, int)
DEFINE_OPS_FOR_TYPE3(unsigned, long, long)

int main() {
    int var_int = INT_MAX;
    write_int(stdout, &var_int);
    printf("\n");
    unsigned int var_uint = UINT_MAX;
    write_unsignedint(stdout, &var_uint);
    printf("\n");
    unsigned long long var_ullong = ULLONG_MAX;
    write_unsignedlonglong(stdout, &var_ullong);
    printf("\n");
    return 0
} 
```*

# c# - if 语句的初学者问题

> ID：14137292
> 
> 赞同：0
> 
> 时间：2013-01-03T10:45:07.667
> 
> 标签：c#

我试图`if`在 C# 中获取语句以检查我的名字是否写在名称字符串中

```
string navn = " ";
Console.WriteLine("skriv dit navn her: ");
navn = Console.ReadLine();
if (navn = "jannik"); 
```

但它不会做我告诉它的事情。如果有人能告诉我我在这里做错了什么，我会很高兴:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T10:46:55.577

用于`==`比较值。`=`仅用于设置值。

`;`此外，在语句后紧跟分号 ( )`if`会使`if`语句不执行任何操作。你确定你不是故意在里面放别的东西吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T10:46:29.347

```
if (navn = "jannik"); 
```

**在 if 语句的末尾有一个分号**。这`(;)`是一个有效的语句，if 语句将对其进行操作。你需要做：

```
if (navn == "jannik")
{
 Console.Write("MyName");
} 
```

同样为了比较平等，你不需要`==`一个`=`

您还可以查看[String.Equals Method (String, String, StringComparison)](http://msdn.microsoft.com/en-us/library/t4411bks.aspx)以与忽略大小写进行比较。

```
if (navn.Equals("jannik", StringComparison.InvariantCultureIgnoreCase))
{
    //My Name
}
else
{
    //Some other name
} 
```

# c# - 如何在 C# 中对单词进行子字符串化

> ID：14137300
> 
> 赞同：-5
> 
> 时间：2013-01-03T10:45:40.537
> 
> 标签：c#

如何在 C# 中对单词进行子字符串化？例如，这是我的句子“这是我们用作示例的示例摘要。”

我想要子字符串 2 字 =“这是”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:47:05.873

一种简单的方法是使用`string.Split()`空格分割单词，取两个单词`Enumerable.Take`，然后再次[将](http://msdn.microsoft.com/en-us/library/dd992421.aspx)它们与空格连接：

```
string firstTwoWords = string.Join(" ", text.Split().Take(2)); 
```

记得添加`using System.Linq;`

[**演示**](http://ideone.com/QQEioP)

# html - 在 HTML 上使用 XML 的缺点是什么？

> ID：14137301
> 
> 赞同：0
> 
> 时间：2013-01-03T10:45:44.093
> 
> 标签：html, xml, webpage, data-presentation

我想知道在 HTML 或 XHTML 上使用 XML 的缺点是什么。我的意思是，两者都可以使用 CSS 设置样式并通过 JavaScript 编写脚本。此外，在 HTML 上使用 XML 的想法对开发人员来说听起来非常强大，因为开发人员对他的网页有更多的控制权。此外，如果没有 HTML 的预样式元素，XML 网页将更加跨浏览器兼容。

此外，除了 XML 比 HTML 更有优势之外，还有什么理由不那么普遍的做法？

**PS：我是一名网页设计师，到目前为止，我在所有项目中都使用 HTML 来呈现数据。除非我找到不这样做的充分理由，否则我正在考虑在我的下一个项目中使用 XML，因为我希望更好地控制数据及其呈现方式。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:38:58.583

HTML 有一套商定的语义，不同的用户代理可以以适当的方式处理（搜索引擎可以赋予标题权重，屏幕阅读器可以改变语音`<em>`，任何 ua 可以呈现表单和链接等），您发明的 XML 应用程序不会的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:49:59.123

XML 和 HTML 之间有一个标准区别。HTML 用于*表示*，而 XML 用于数据*表示*。

编辑：我在原始答案中错误地将 HTML 编写为 XML 的子集。感谢@BoltClock 纠正我。

**HTML**（连同 CSS 和 JS）是用于*表示*的标记。所有网页都必须具有有效的 HTML 标记才能在页面上正确呈现。HTML 有它自己的有效标签，开发人员必须仅使用这些标记标签来基于有效的 HTML DTD 进行演示。HTML 标准由 W3C 制定，大多数浏览器供应商和开发人员在处理 HTML 时都应该遵守这些标准。

**XML**主要用于*数据表示*，因此 XML 文件用于存储数据。这只是数据的详细存储。XML 使用 XSLT 有它自己的样式和表示方式，但这并不能使它成为网页标记的候选者。

大多数浏览器允许在 HTML 中使用自定义标记标签，这些标签优雅地接受它们并允许它们被设置样式（但它仍然不是 XML）。

那么为什么要赋予 XML 自己的样式呢？对于大数据块，野外的 XML 数据很快就会变得冗长。主要是为了使其更具人类可读性，使用 XSLT（如您提供的示例链接中所示）。

# visual-studio-2012 - Visual Studio 2012下的Nuget在搜索包时失败

> ID：14137302
> 
> 赞同：2
> 
> 时间：2013-01-03T10:45:44.527
> 
> 标签：visual-studio-2012, nuget

我在公司防火墙后面。但是，如果我直接使用 PowerShell

```
Install-Package ReactiveUI 
```

没有问题。如果我打开包管理器并单击“在线”，我可以从 codeplex 浏览所有在线包。

但是，只要我在包管理器中输入搜索词。我收到以下错误

```
Could not connect to the feed specified at 'https://nuget.org/api/v2'. 
Please verify that the package source ( located in the Package Manager Settings) 
is valid and ensure your network connectivity. 
```

在我第一次收到此错误后，即使在控制台上，Nuget 也无法工作。

# ruby-on-rails - 如何调用控制器的方法

> ID：14137304
> 
> 赞同：1
> 
> 时间：2013-01-03T10:45:50.843
> 
> 标签：ruby-on-rails, controller

我有一个与传入请求无关的功能（如获取、发布等）。

但我想遵循 MVC 约定，让它像模型控制器：

*   在控制器部分，我将处理来自其他部分的收入请求，决定它应该从哪个模型中检索信息、授权、过滤等；

*   在模型部分，我将存储信息、验证信息、过期信息等。

在 Rails 中，控制器的动作可以通过路由文件指示的收入请求来调用。

如果我创建了这样的控制器，对我来说的问题是：

```
class SomeController < ApplicationController

  def some_action; end

end 
```

如何从应用程序的任何位置调用`some_action`方法`SomeController`？

PS Calling`SomeController.new.some_action`对我来说似乎不对，因为我认为所有控制器都是 app 对象的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:00:27.457

您可以通过实例化控制器来做到这一点。

```
SomeController.new.some_action 
```

然而，这并不是真正的 MVC 方式。我真的不知道你想用它做什么，但可能有更好的方法。例如，它可以像在模型中那样完成，因为数据的修改不应该属于控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:43:34.490

我认为您可能应该创建一个 PORO，它将以某种方法封装此功能。因此，任何与逻辑相关的功能都应该在其中而不是在控制器中。然后你可以在任一控制器中调用它们。

# android - 将 pdf 的内容限制为使用 droidtext 创建的单个页面

> ID：14137313
> 
> 赞同：1
> 
> 时间：2013-01-03T10:46:32.257
> 
> 标签：android, pdf, pdf-generation, android-droidtext

嗨，我正在创建一个带有文本和图像的 pdf。如果文本太大，正在创建的 pdf 将进入第二页。有没有办法可以将内容限制在单个页面上。我可以修剪文本的结尾，但是 droidtext api 中是否有一个事件方法可以在我到达页面末尾时通知。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T01:23:49.353

您可以使用 Document.addDocListener() 来监听页​​面事件，它会在添加新页面时通知您。要强制将段落保留在一页上，您可以使用 Paragraph.setKeepTogether()

# javafx-2 - JavaFx 2.x：XYChart 属性

> ID：14137314
> 
> 赞同：2
> 
> 时间：2013-01-03T10:46:33.393
> 
> 标签：javafx-2, linechart

有一个简单的 XY LineChart，我想在不使用 css 的情况下设置网格和线条描边（宽度）、样式（点、虚线等）和颜色为 rgb 以及背景颜色。

这可能吗？如果是这样，怎么做？我找不到任何合适的方法。

```
import javafx.application.Application;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.chart.CategoryAxis;
import javafx.scene.chart.LineChart;
import javafx.scene.chart.NumberAxis;
import javafx.scene.chart.XYChart;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.BorderPane;
import javafx.stage.Stage;

public class XyChart extends Application {

@Override
public void start(Stage stage) {
   stage.setTitle("Line plot");

   final CategoryAxis xAxis = new CategoryAxis();
   final NumberAxis yAxis = new NumberAxis(1, 21,0.1);

   yAxis.setTickUnit(1);
   yAxis.setPrefWidth(35);
   yAxis.setMinorTickCount(10);

   yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis){
        @Override
    public String toString(Number object){
            String label;
            label = String.format("%7.2f", object.floatValue());
            return label;
    }
});
final LineChart<String, Number>lineChart = new LineChart<String, Number>(xAxis, yAxis);

   lineChart.setCreateSymbols(false);
   lineChart.setAlternativeRowFillVisible(false);
   lineChart.setLegendVisible(false);

   XYChart.Series series1 = new XYChart.Series();

    series1.getData().add(new XYChart.Data("Jan", 1));
    series1.getData().add(new XYChart.Data("Feb", 4));
    series1.getData().add(new XYChart.Data("Mar", 2.5));
    series1.getData().add(new XYChart.Data("Apr", 5));
    series1.getData().add(new XYChart.Data("May", 6));
    series1.getData().add(new XYChart.Data("Jun", 8));
    series1.getData().add(new XYChart.Data("Jul", 12));
    series1.getData().add(new XYChart.Data("Aug", 8));
    series1.getData().add(new XYChart.Data("Sep", 11));
    series1.getData().add(new XYChart.Data("Oct", 13));
    series1.getData().add(new XYChart.Data("Nov", 10));
    series1.getData().add(new XYChart.Data("Dec", 20));

    BorderPane pane = new BorderPane();
    pane.setCenter(lineChart);          
    Scene scene = new Scene(pane, 800, 600);
    lineChart.setAnimated(false);
    lineChart.getData().addAll(series1);       

    stage.setScene(scene);
    stage.show();
}

public static void main(String[] args) {
    launch(args);
}   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:09:22.317

是的，您的案例在逻辑[上比如何在 JavaFX 2.0 折线图中动态更改线型更简单？](https://stackoverflow.com/questions/9757848/how-to-dynamically-change-line-style-in-javafx-2-0-line-chart)而且您还要求提供更多功能。标记为重复只是指向类似问题和答案的一种简单方法。

我认为答案是相同的（使用 css 查找）——JavaFX 2.2 中没有`lineChart.setStroke`.

Eventually some of the stuff which is only accessible via css lookups might be made available via Java API. For instance some of the region background stuff is API in JavaFX 8 so, once you get a reference to it, you could modify it via api - though, even then, I still don't think there is a way to get a reference to something like a chart background without a css lookup or some unthinkably ugly sequence of getChildren().get(idx) calls or hacking into the chart source code. Of those options, I think the css lookup approach is the most preferable most of the time.

请注意，您并没有真正避免使用 css 文件，因为 JavaFX 2.2 附带了一个用于设置图表样式的[默认 css文件。](http://hg.openjdk.java.net/openjfx/2.2/master/rt/raw-file/tip/javafx-ui-controls/src/com/sun/javafx/scene/control/skin/caspian/caspian.css)另请注意，动态线条样式问题的链接[示例解决方案](https://gist.github.com/2129306)不提供用户样式表 - 所有用户样式都在代码中完成。

# iphone - 具有横向滚动的嵌套 uiScrollViews

> ID：14137315
> 
> 赞同：1
> 
> 时间：2013-01-03T10:46:34.830
> 
> 标签：iphone, xcode, user-interface, uiview, uiscrollview

我想嵌套两个 uiScrollView，我想将一个 uiImageView 放入一个并让它水平滚动（Scroller A）。这是分页的并包含图像——我已经可以正常工作了。我需要另一个 uiScrollView (Scroller B)，其中包含上述滚动条 A 以及其他内容，如徽标、文本和按钮。我希望滚动条 B 能够垂直滚动（滚动所有内容，包括滚动条 A ）。请参阅图片以进行说明，红色箭头显示滚动条 A，蓝色箭头显示滚动条 B

[显示更多细节的图片](https://www.dropbox.com/s/7xklxh3qc8rgz7y/uiscrollview.png)

我不知道如何添加这些以及需要添加滚动条的顺序，我已经尝试了几次，结果很奇怪，我希望有人能指出我正确的方向。

一个类似的应用程序是苹果应用商店应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:24:06.120

保持垂直滚动视图在其上添加一个固定大小的视图（包含您的水平滚动视图）并相应地增加其内容大小。每个视图都将具有预加载的水平滚动视图。

```
for(int i=0;i<10;i++)
    {
        y=i*110;
    secondScroll=[[UIScrollView alloc]initWithFrame:CGRectMake(x, y, 320, 100)];
    [secondScroll setContentSize:CGSizeMake(600, 45)];//to enable scrolling content size is kept more the 320
        secondScroll.backgroundColor=[UIColor greenColor];
        [self.firstScroll addSubview:secondScroll];
        [secondScroll release];
        [self.firstScroll setContentSize:CGSizeMake(320, self.firstScroll.contentSize.height+110)];
    } 
```

第一个滚动添加到 xib 第二个滚动由代码创建

# yii - Gii 未在模型创建器中检测到 mysql 表

> ID：14137318
> 
> 赞同：2
> 
> 时间：2013-01-03T10:46:35.963
> 
> 标签：yii, gii

从 config/main.php ：

```
 'db'=>array(
        'connectionString' => 'mysql:host=localhost;dbname=testdb',
        'emulatePrepare' => true,
        'username' => 'root',
        'password' => '',
        'charset' => 'utf8',
    ), 
```

当我使用 gii 模型生成器（http://localhost/yii/testdelete/index.php?r=gii/model）并尝试在表名中输入“post”或“user”并单击“Preview”时，它说：

表“帖子”不存在。

我希望能够使用这些表创建模型。

从 phpMyAdmin 导出：

```
-- Host: 127.0.0.1
-- Database: `testdb` 
```

如果不存在则创建表`post`( `id`int(10) unsigned NOT NULL AUTO_INCREMENT, `created_on`int(11) unsigned NOT NULL, `title`varchar(255) COLLATE utf8_unicode_ci NOT NULL, `content`text COLLATE utf8_unicode_ci NOT NULL, PRIMARY KEY ( `id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8整理=utf8_unicode_ci AUTO_INCREMENT=1；

如果不存在则创建表`user`( `id`int(10) unsigned NOT NULL AUTO_INCREMENT, `username`varchar(200) COLLATE utf8_unicode_ci NOT NULL, `password`char(40) COLLATE utf8_unicode_ci NOT NULL, PRIMARY KEY ( `id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT= 1;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:05:12.620

如果您在表名字段中键入“s”，则自动完成应该会弹出两个表。

检查

1.  您已保存配置文件（关闭并再次打开以验证其内容）
2.  你的配置文件中有一个 db 部分（也许你有 sqlite 一个覆盖它）
3.  检查您是否在同一个mysql实例上。phpMyAdmin 主机 127.0.0.1 并不意味着它是同一个实例，它是 phpMyAdmin 运行的实例（检查 url）。从命令行登录（或使用出色的桌面客户端[http://www.heidisql.com/](http://www.heidisql.com/)）在 localhost 数据库中浏览

# iphone - 我如何在导航栏上实现这一点

> ID：14137321
> 
> 赞同：2
> 
> 时间：2013-01-03T10:46:52.250
> 
> 标签：iphone, uinavigationcontroller, uibutton, uinavigationitem

我想设计我的导航栏，如下图所示，我该如何实现这一点。是否可以在导航栏上或者我不需要导航栏。主题和设置必须是按钮，因为我想导航到另一个 viewController
![在此处输入图像描述](../Images/3a0affd21272bdb6424d8161f5230ed9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:53:17.400

我不知道在导航栏上是否可以。

*   我看到一个类似的使用[**标签栏：iOS 标签栏中的中心按钮**](http://www.cocoacontrols.com/platforms/ios/controls/center-button-in-tab-bar)

![标签栏](../Images/f1a0abc15f8d8924d8615ad5c5f015f8.png)

*   您可以使用以下方法实现相同的目的：[**ALToolbar**](http://www.cocoacontrols.com/platforms/ios/controls/altoolbar)

![工具栏](../Images/27c22646c10a3424247a72acdf73fbcf.png)

*   还要检查[**KLHorizo​​ntalselect**](http://www.cocoacontrols.com/platforms/ios/controls/klhorizontalselect)

![水平选择](../Images/532a5281cc9c46a96509e9b59a8fcf0f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:11:26.397

使用自定义代表创建自定义导航栏..我用这个见下面的例子..

创建`CustomNavBar.h`如下文件...

```
//  Created by Paras on 03/12/11.
//  Copyright 2010 __MyCompanyName__. All rights reserved.
//

#import <UIKit/UIKit.h>
#import "CustomNavBarDelegate.h"

@interface CustomNavBar : UIView {

    NSObject<CustomNavBarDelegate> *delegate;

    NSString *strCatOrLoc;

    UIButton *btnBack;
    UIButton *btnLeft;

    UIImageView *imgRightImage;

    UILabel *lbl;

    UIImageView *imgTitle;
}
@property (nonatomic, retain) UIButton *btnBack;
@property (nonatomic, assign) NSObject<CustomNavBarDelegate> *delegate;
-(void)onclickBack:(id)sender;
- (id) initWithFrame: (CGRect)rect;
-(void)setImage:(UIImage*)img NavTitle:(NSString *)title;
-(void)setTitleImage:(UIImage*)img rightImage:(UIImage *)imgRight;
-(void)setwithoutlogo:(UIImage*)img NavTitle:(NSString *)title;

@end 
```

现在看`CustomNavBar.m`下面文件的代码......

```
//  Created by Paras on 03/12/11.
//  Copyright 2010 __MyCompanyName__. All rights reserved.
//

#import "CustomNavBar.h"
#import <QuartzCore/QuartzCore.h>
#import "AppDelegate.h"

@implementation CustomNavBar

@synthesize delegate;
@synthesize btnBack;
#pragma mark -
#pragma mark init methods
- (id) initWithFrame: (CGRect)rect {

    if (self == [super initWithFrame:rect]) {

        //[self setBackgroundColor:[UIColor colorWithRed:241.0f/255.0f green:241.0f/255.0f blue:237.0f/255.0f alpha:1.0f]];
//        [self setBackgroundColor:[UIColor whiteColor]];

        btnBack = [UIButton buttonWithType:UIButtonTypeCustom];
        btnBack.frame = CGRectMake(10.0, 8.0, 50.0, 28.0);
        [btnBack addTarget:self 
                    action:@selector(onclickBack:)
          forControlEvents:UIControlEventTouchDown];

        btnBack.layer.masksToBounds = YES;
        btnBack.layer.cornerRadius = 8.0;
        btnBack.layer.borderWidth = 0.5;
        btnBack.layer.borderColor = [[UIColor blackColor] CGColor];
        //btnBack.titleLabel.textColor = [UIColor blackColor];
//        btnBack.titleLabel.text = @"Back";
        [btnBack.titleLabel setFont:Arial13];
        [btnBack setTitle:@"" forState:UIControlStateNormal];
        [btnBack setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
//        [btnBack setBackgroundColor:[UIColor colorWithRed:241.0f/255.0f green:241.0f/255.0f blue:237.0f/255.0f alpha:1.0f]];
        [btnBack setBackgroundColor:[UIColor clearColor]];
        [self addSubview:btnBack];

        btnLeft = [UIButton buttonWithType:UIButtonTypeCustom];
        btnLeft.frame = CGRectMake(280.0, 8.0, 310.0, 28.0);
        [btnLeft addTarget:self 
                    action:@selector(onclickLeft:)
          forControlEvents:UIControlEventTouchDown];
        [btnLeft setBackgroundColor:[UIColor clearColor]];
        [self addSubview:btnLeft];

    }
    return self;
}

-(void)setImage:(UIImage*)img NavTitle:(NSString *)title {

    imgRightImage = [[UIImageView alloc] initWithFrame:CGRectMake(0.0,0.0,320.0,44.0)];
    imgRightImage.contentMode = UIViewContentModeScaleAspectFill;
    imgRightImage.clipsToBounds = YES;
    imgRightImage.layer.masksToBounds = YES;
//    imgRightImage.layer.cornerRadius = 11.0;
//    imgRightImage.layer.borderWidth = 0.5;
    [imgRightImage setImage:img];
    [imgRightImage setBackgroundColor:[UIColor clearColor]];
    [self addSubview:imgRightImage];
    [imgRightImage release];
}

-(void)setwithoutlogo:(UIImage*)img NavTitle:(NSString *)title {

    imgRightImage = [[UIImageView alloc] initWithFrame:CGRectMake(275.0,2.0,40.0,40.0)];
    imgRightImage.contentMode = UIViewContentModeScaleAspectFill;
    imgRightImage.clipsToBounds = YES;
    imgRightImage.layer.masksToBounds = YES;
    //    imgRightImage.layer.cornerRadius = 11.0;
    //    imgRightImage.layer.borderWidth = 0.5;
    //[imgRightImage setImage:img];
    [imgRightImage setBackgroundColor:[UIColor clearColor]];
    [self addSubview:imgRightImage];
    [imgRightImage release];

    lbl = [[UILabel alloc] initWithFrame:CGRectMake(70.0, 7.0, 180, 30.0)];
    //    lbl.font = [UIFont fontWithName:@"Arial" size:20.0];
    lbl.font = Arial16;
    lbl.numberOfLines = 1;
    lbl.tag = 11;
    lbl.backgroundColor = [UIColor clearColor];
    lbl.textColor = [UIColor blackColor];
    lbl.textAlignment = UITextAlignmentCenter;
    lbl.text = title;
    [self addSubview:lbl];
}

-(void)setTitleImage:(UIImage*)img rightImage:(UIImage *)imgRight {

    imgRightImage = [[UIImageView alloc] initWithFrame:CGRectMake(275.0,2.0,40.0,40.0)];
    imgRightImage.contentMode = UIViewContentModeScaleAspectFill;
    imgRightImage.clipsToBounds = YES;
    imgRightImage.layer.masksToBounds = YES;
    [imgRightImage setImage:imgRight];
    [imgRightImage setBackgroundColor:[UIColor clearColor]];
    [self addSubview:imgRightImage];
    [imgRightImage release];

    imgTitle = [[UIImageView alloc] initWithFrame:CGRectMake(68.0,3.0,200.0,38.0)];
    imgTitle.contentMode = UIViewContentModeScaleToFill;

    [imgTitle setBackgroundColor:[UIColor clearColor]];
    [imgTitle setImage:img];
    [self addSubview:imgTitle];
    [imgTitle release];
}
-(void)onclickLeft:(id)sender{
    NSLog(@">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>Nav LeftClick");
    [delegate btnleft_clicked:self];
}
-(void)onclickBack:(id)sender {

    NSLog(@">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>Nav BackClick");
    [delegate popViewController:self];
}

#pragma mark -
#pragma mark
- (void)dealloc {
    //[array release];
    [super dealloc];
}

@end 
```

然后创建像下面这样的委托类文件..

```
@class CustomNavBar;

@protocol CustomNavBarDelegate

@required

- (void)popViewController:(CustomNavBar *)navBar;
-(void)btnleft_clicked:(CustomNavBar *)navBar1;

@end 
```

在您的课程中使用此代码之后..例如..

在 .h 文件中导入它，然后像下面这样使用..

```
#import "CustomNavBarDelegate.h"
@class CustomNavBar;
@interface ViewController : UIViewController<CustomNavBarDelegate>
{
    CustomNavBar *navBar;
}
- (void)popViewController:(CustomNavBar *)navBar1;
@end 
```

并在`.m`文件中定义该委托方法并创建和添加如下导航...

```
- (void)viewDidLoad
{
    navBar = [[CustomNavBar alloc] initWithFrame:CGRectMake(0, 0, 322, 44)];
    [navBar setDelegate:self];
    [self.view addSubview:navBar];
    [navBar setImage:[UIImage imageNamed:@"yourImageName"] NavTitle:@"yourTitle"];
}
- (void)popViewController:(CustomNavBar *)navBar1 {

    //  NSLog(@">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> delegate called");
    [self.navigationController popViewControllerAnimated:YES];
}
-(void)btnleft_clicked:(CustomNavBar *)navBar1{
    NSLog(@"\n\n btn Left Clicked InviteFriendsView");
} 
```

**注意：**这只是一个示例，这里根据您的要求实现您的逻辑。

在这里，您还可以在中间添加第三个按钮，还可以定义在 Delegate 和另一个 .m 文件中调用它的方法。

我希望这对你有帮助......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T07:06:34.557

我这样做了，请参见下面的代码

```
//IvisionApps Button
    UIButton *ivisionButton= [UIButton buttonWithType:UIButtonTypeCustom];
    UIImage *ivisionButtonImage = [UIImage imageNamed:@"ivisionapps"];
    UIImage *ivisionButtonImagePressed = [UIImage imageNamed:@"ivisionappsSelected"];
    [ivisionButton setBackgroundImage:ivisionButtonImage forState:UIControlStateNormal];
    [ivisionButton setBackgroundImage:ivisionButtonImagePressed forState:UIControlStateHighlighted];
     [ivisionButton addTarget:self action:@selector(goIVisionApp) forControlEvents:UIControlEventTouchUpInside];
    ivisionButton.frame = CGRectMake(-8, -20, 106, 38);
    UIView *backButtonView = [[UIView alloc] initWithFrame:CGRectMake(-8, -20, 106, 38)];
    backButtonView.bounds = CGRectOffset(backButtonView.bounds, -14, -7);
    [backButtonView addSubview:ivisionButton];
    UIBarButtonItem *backBarButton = [[UIBarButtonItem alloc] initWithCustomView:backButtonView];
    self.navigationItem.rightBarButtonItem = backBarButton;

    //Auxilaries Button

    UIButton *auxiliariesButton= [UIButton buttonWithType:UIButtonTypeCustom];
    UIImage *auxiliariesButtonImage = [UIImage imageNamed:@"Auxiliaries"];
    UIImage *auxiliariesButtonImagePressed = [UIImage imageNamed:@"AuxiliariesSelected"];
    [auxiliariesButton setBackgroundImage:auxiliariesButtonImage forState:UIControlStateNormal];
    [auxiliariesButton setBackgroundImage:auxiliariesButtonImagePressed forState:UIControlStateHighlighted];
    [auxiliariesButton addTarget:self action:@selector(goBack) forControlEvents:UIControlEventTouchUpInside];
    auxiliariesButton.frame = CGRectMake(-19, -20, 106, 38);
    UIView *auxiliariesButtonView = [[UIView alloc] initWithFrame:CGRectMake(-19, -20, 106, 38)];
    auxiliariesButtonView.bounds = CGRectOffset(auxiliariesButtonView.bounds, -14, -7);
    [auxiliariesButtonView addSubview:auxiliariesButton];
    UIBarButtonItem *auxiliariesBarButton = [[UIBarButtonItem alloc] initWithCustomView:auxiliariesButtonView];
    self.navigationItem.leftBarButtonItem = auxiliariesBarButton;

    //hide backBarButton of NavigationItem
    [self.navigationItem setHidesBackButton:YES]; 
```

# iphone - 如何修改图像（例如删除直线）

> ID：14137324
> 
> 赞同：1
> 
> 时间：2013-01-03T10:46:57.963
> 
> 标签：iphone, image, uiimage, ocr, tesseract

大家下午好。我想用 tesseract 处理图像。我设法阅读了一个简单的文本。现在，我想阅读放在表格单元格内的文本。我认为最好的方法是删除表格的直线，但我不知道要做到这一点。你能帮助我吗？先感谢您。

# erlang - 如何确定监督树中的工作人员是首次启动还是已重新启动

> ID：14137330
> 
> 赞同：1
> 
> 时间：2013-01-03T10:47:10.040
> 
> 标签：erlang, erlang-otp, erlang-supervisor

我有一个简单的主管配置：

```
-module(my_supervisor).
-behaviour(supervisor).
-export([start_link/0, init/1]).

init(_Args) ->
    {ok, { {one_for_one, 5, 10},
       [
        {my_worker, {my_worker, start_link, []}, permanent, 5000, worker, [my_worker]}
        ]
     }
}. 
```

甚至是简单的工人：

```
-module(my_worker).
-export([start_link/0]).
start_link() ->
    %??? is this the first time the supervisor is starting me or have I crashed and been restarted??? 
```

那么是否有可能确定这是主管第一次调用 start_link 函数，还是工作进程在过去某个时间崩溃并且现在正在重新启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:02:58.983

1.  For determining whether this is the first time the `start_link` function is called by the supervisor. You can use `childId` parameter and pass the `childId` from outside as follows, for details, please doc about [erlang supervisor](http://www.erlang.org/doc/reference_manual/processes.html).

    start_child(ChildId, Mod, Args) -> {ok, _} = supervisor:start_child(?SERVER, {ChildId, {Mod, start_link, Args}, transient, ?MAX_WAIT, worker, [Mod]}), ok.

2.  For determining `worker` has been restarted. Please read document of [monitor and link](http://www.erlang.org/doc/reference_manual/processes.html). When crash happens，your process will receive messages. If you read the `supervisor`'s source code, you will find the supervisor actually use `link and monitor` to solve the `crash` monitor task.

3.

```
init([]) -> 
     process_flag(trap_exit, true), 
     ...

terminate(_Reason, _State) ->
    % may be crash here by check reason above. 
    ok.

handle_info({'EXIT',Self,Reason},State#state{self=Self)->
    error_logger:info_report([crash_now]),
    {stop,Reason,State};

  [1]: http://www.erlang.org/doc/man/supervisor.html 
```

# c++ - 我不明白这段代码是如何在 MS Visual C++ 编译器中执行的

> ID：14137331
> 
> 赞同：1
> 
> 时间：2013-01-03T10:47:24.970
> 
> 标签：c++, arrays, pointers

> **可能重复：**
> [如何在 C++ 中使用数组？](https://stackoverflow.com/questions/4810664/how-do-i-use-arrays-in-c)

```
void fn(int a[3])
{
    a[5]=5;
}

int main()
{
    int A[10] = {0};
    cout<<A[5]<<endl;
    fn(A);
    cout<<A[5]<<endl;
} 
```

对于第一个打印语句，我得到 A[5]=0，第二次得到 A[5]=5。这段代码实际上是如何工作的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:52:51.527

在 C++ 中，从程序员的角度来看，数组*几乎*等于指向其第一个元素的指针。在通过参数传递的数组的情况下，它们是*equal*。如果你这样想，你将指向一个数组的指针传递给函数，然后修改它的第六个元素（仍然是原来的！），然后显示它。

您的代码等于：

```
void fn2(int * a)
{
    *(a + 5) = 5;
}

(...)

fn(&(A[0])); 
```

* * *

**旁注**在使用局部变量时可以看出静态分配数组和动态分配数组的区别：

```
int a[5];
int * p;

printf("%d %d\n", sizeof(a), sizeof(p)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T11:03:59.530

你编码：

```
void fn(int a[3])
{
    a[5]=5;
} 
```

相当于代码：

```
void fn(int* a)
{
    a[5]=5;
} 
```

幸运的是，您可以通过使用`-S`gcc（或 g++）选项编译代码来检查它。
**您将获得相同的程序集输出两者：（**输出文件将带有`.s`扩展名）

```
fn:
    pushl   %ebp
    movl    %esp, %ebp
    movl    8(%ebp), %eax    // base address assign to eax register.
    addl    $20, %eax        // a[5] , because 5*4 = 20, so eax = eax + 20
    movl    $5, (%eax)       // this is =5 , (%eax) = 5
    popl    %ebp
    ret
    .size   fn, .-fn
    .section    .rodata 
```

两个代码都只使用基地址传递给`fu()`函数。

[没有关于大小 3 的论点]

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-03T10:57:29.087

如果要传递 A 的地址来更改数组本身：

```
fn(int **A) 
```

# php - 如何检查 PHP App 中使用了哪些列和表

> ID：14137340
> 
> 赞同：0
> 
> 时间：2013-01-03T10:47:45.740
> 
> 标签：php, mysql

好的，我知道这是一个模糊的问题。但是我有一个要求，我需要列出应用程序中未使用的所有表和列。我可以进行手动代码搜索，但这会花费很多时间。要检查的表数为 140，表中的最大字段数为 90。

现在我已经开始在代码中搜索表名，并创建了一个包含所有表名的 Excel 表，当我在代码中找到一个表时，我将其突出显示为绿色。所以桌子更容易一些。

我的问题真的是，有没有办法加快这个过程？或者可以应用一些方法/技术？

谢谢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:55:58.003

一切都取决于您的应用程序大小和编码技术。

如果我有一个大型应用程序，我会启用完整的 mysql 日志（或侵入我可能拥有的任何数据库包装器，以记录查询），运行应用程序，然后从日志中提取信息。但是，这样做只是在转移问题。无需担心捕获所有查询，您现在需要确保运行应用程序代码的每一行（这样您就可以确定没有任何东西逃脱并且您已经分析了所有可能性）。

这实际上称为“代码覆盖率分析”，并且有一些工具可以帮助您。

这就是说，我相信手动分析对于小型应用程序可能会更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:56:12.283

我建议您构建一个执行该工作的脚本。例如，您可以使用如下查询选择数据库中的表列表：

```
show tables from YOUR_DATABASE; 
```

更多信息：[http ://dev.mysql.com/doc/refman/5.0/en/show-tables.html](http://dev.mysql.com/doc/refman/5.0/en/show-tables.html)

然后你可以循环你的表并使用以下方法检查字段：

```
show columns from YOUR_TABLE; 
```

更多信息：[http ://dev.mysql.com/doc/refman/5.0/en/show-columns.html](http://dev.mysql.com/doc/refman/5.0/en/show-columns.html)

最后，您可以在代码中搜索（例如 grep）表和字段并编写日志或类似内容。

# file - 从 Access 2010 上传文件

> ID：14137343
> 
> 赞同：2
> 
> 时间：2013-01-03T10:47:51.290
> 
> 标签：file, vba, upload

我有一个 Access 2010 前端数据库 + MySQL 作为后端。到目前为止，它工作正常。我想上传文件并决定保存在服务器上而不是数据库上。我的第一个问题是，如何将文件从访问前端上传到远程服务器/位置？

我在想，也许将数据存储在数据库中并使用某种触发器或脚本从数据库中读取 blob 文件并保存在服务器上，并将文件路径填充到另一列中。

有没有更简单的方法将文件从访问前端上传到远程服务器？我使用 MySQL 服务器作为后端。

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:58:38.397

**带有腻子的 SFTP**

这可能会对您有所帮助 - 这是在 Windows 机器上使用 Putty 通过 SFTP 与使用 VBA 的 Linux 服务器进行通信的一个很好的示例：[SFTP upload with VBA](https://stackoverflow.com/questions/3754928/sftp-upload-with-vba)

您需要在每台使用 Access 的 Windows 计算机上安装 putty，并确保 Linux 服务器上具有适当的权限。

**自定义加载项**

您可以使用 .NET 创建一个加载项，以便通过套接字将文件传输到服务器，但这需要您编写一个服务器端应用程序来侦听请求。作为开发人员，您可以完全自由地选择如何实现它，但会增加您自己的复杂性。

您需要：

*   使用 Visual Studio（或其他 .NET IDE）创建加载项
*   将此添加到您的 Access 应用程序中并使用您构建的 API。
*   创建一个服务器端应用程序来监听它（这可能是一个简单的 Python 应用程序）

**SMTP 方法**

如果您想发挥创意，您​​可以使用 Access 的 CDO 功能将文件通过电子邮件发送到您自己的模拟 SMTP 服务器：使用 Access[发送电子邮件](http://www.rondebruin.nl/cdo.htm)

同样，您必须创建一个处理程序应用程序来处理 SMTP 协议，但我确信那里有一些很好的示例。

**HTTP 方法**

您甚至可以对文件进行编码，并通过 HTTP 在简单的 POST 请求中将其发送到简单的 PHP 服务器：[使用 Access 的示例 Web 请求](https://stackoverflow.com/questions/3577309/ms-access-perform-post-webrequest)您需要将文件编码为 base64 或其他文件或文件以处理文件上传。

**结论**

如您所见，迄今为止最简单的方法是使用 Putty，但您可以采用一些有趣的自定义方法。

我会说使用 SMTP 或 HTTP 都合适，但这取决于您设置服务器端处理程序的难易程度。可能有现有的 SMTP 模拟器，您可以使用它们来处理接收和管理文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:48:21.870

这可能会帮助某人。

我使用了 Chilkat FTP activeX 组件并且它工作正常。Chilkat 提供了刚刚从他的网站复制的预先编写的代码，一切都很好。虽然我找不到如何显示传输进度。

问候克里什

# javascript - 如果元素是 iframe，如何捕获 Click 事件？

> ID：14137348
> 
> 赞同：0
> 
> 时间：2013-01-03T10:48:06.280
> 
> 标签：javascript, jquery

我在 id 为 div1 的 div 中附加了一个带有 youtube 嵌入 url 的 iframe。当 iframe 上发生点击时，我想做一些事情。

我正在使用这个 jquery 代码，但它不工作。

```
$('#div1 iframe').bind('click', function(){
         alert('clicked on iframe');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T14:01:27.163

```
function iframeclick() {
    document.getElementById("theiframe").contentWindow.document.body.onclick = function() {
        document.getElementById("theiframe").contentWindow.location.reload();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:51:06.703

我不确定你是否有 iframe 的 id。但是您甚至可以尝试捕捉 iframe 中文档的点击：

```
document.getElementById("iframe_id").contentWindow.document.body.onclick = 
function() {
  alert("iframe clicked");
} 
```

虽然这并不能解决您的跨站点问题，但 FYI [jQuery 已更新为与 iFrames 配合使用](http://brandonaaron.net/blog/2009/05/14/jquery-edge-better-support-for-other-windows-and-documents)：

```
$('#iframe_id').bind('click', function(event) { }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-07T05:56:03.170

我们可以将 achive 与 jquery 一起使用，它也可以与 javascript 一起使用

```
$('.inner iframe').bind('click', function(){
             alert('clicked on iframe');
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-03T19:23:07.153

这是一个香草 JS 的解决方案 - 并为我解决了一个类似的问题，如果单击 iFrame，我需要关闭父级上的一些下拉菜单

```
 public static iFrameClickHandler = {
        iFrame: undefined,
        mouseOverIframe: false,
        mouseOver: function() {
            this.mouseOverIframe = true;
        },
        mouseLeave: function() {
            this.mouseOverIframe = false;
            window.focus();
        },
        windowBlur: function() {
            if (this.mouseOverIframe) this.fireClickEvent();
        },
        fireClickEvent: function() {
            // do what you wanna do here
        },
        init: function() {
            this.mouseOver = this.mouseOver.bind(this);
            this.mouseLeave = this.mouseLeave.bind(this);
            this.windowBlur = this.windowBlur.bind(this);
            this.iFrame = document.querySelector('class/id of your iframe wrapper');
            this.iFrame.addEventListener('mouseover', this.mouseOver);
            this.iFrame.addEventListener('mouseleave', this.mouseLeave);
            window.addEventListener('blur', this.windowBlur);
            window.focus();
        },
        destroy: function() {
            this.iFrame.removeEventListener('mouseover', this.mouseOver);
            this.iFrame.removeEventListener('mouseleave', this.mouseLeave);
            window.removeEventListener('blur', this.windowBlur);
        }
    } 
```

# oop - 对象的属性和描述对象的元数据之间的区别？

> ID：14137350
> 
> 赞同：1
> 
> 时间：2013-01-03T10:48:13.100
> 
> 标签：oop, metadata

这是一个设计问题，我也在努力寻找答案。我正在设计一个基于对象的系统，我需要识别和详细说明运行使用这些对象的业务所需的所有数据。我正在努力解决的问题是这个对象的一个​​属性与一个元数据是什么，有什么区别以及我为什么要关心。

我认为财产是该对象存在必须存在的东西。而一段元数据是一段数据，用于描述该对象以用于业务流程。

作为一个例子，我会说这个对象是一辆汽车，我从事汽车销售业务。汽车的属性将是品牌、颜色、发动机尺寸。而元数据是 IsSold 或 ForSale，其中元数据与销售汽车的业务流程相关。

价格似乎是 Car 的属性，但为什么它会是属性而不是元数据？

我希望我在这里有意义。想法/建议表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:34:03.717

我认为您将数据与元数据混淆了。您列出的所有这些属性都将被视为数据/属性，包括 IsSold 和 ForSale。考虑属性和元数据之间差异的方法是：

> 如果数据描述了对象（颜色描述了汽车），那么它就是一个属性。
> 
> 如果数据描述了数据/属性本身（颜色属性的字符长度；橙色为 6），那么它就是元数据。

ForSale 描述对象，因此它是一个属性。

# regex - 找到匹配项时使用 sed 替换行首

> ID：14137353
> 
> 赞同：30
> 
> 时间：2013-01-03T10:48:25.893
> 
> 标签：regex, sed

我有一个 Java 文件。我想评论任何包含匹配的代码行：

```
 myvar 
```

我认为 sed 应该在这里帮助我

```
 sed 's/myVar/not_sure_what_to_put_here/g' MyFile.java 
```

我不知道该放什么：

```
not_sure_what_to_put_here 
```

在这种情况下，我不想替换 myVar 但我想插入

```
// 
```

到发生 myVar 的任何行的开头。

有小费吗

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-03T10:53:46.133

捕获包含以下内容的整行`myvar`：

```
$ sed 's/\(^.*myvar.*$\)/\/\/\1/' file

$ cat hw.java
class hw {
    public static void main(String[] args) {
        System.out.println("Hello World!"); 
        myvar=1
    }
}

$ sed 's/\(^.*myvar.*$\)/\/\/\1/' hw.java
class hw {
    public static void main(String[] args) {
        System.out.println("Hello World!"); 
//        myvar=1
    }
} 
```

使用该`-i`选项保存文件中的更改`sed -i 's/\(^.*myvar.*$\)/\/\/\1/' file`。

解释：

```
(      # Start a capture group
^      # Matches the start of the line 
.*     # Matches anything 
myvar  # Matches the literal word 
.*     # Matches anything
$      # Matches the end of the line
)      # End capture group 
```

所以这会查看整行，如果`myvar`找到存储在第一个捕获组中的结果，称为`\1`. 因此，我们将整行替换为`\1`前面有 2 个正斜杠的整行`//\1`，当然正斜杠需要转义以免混淆`sed`，因此`\/\/\1`还要注意括号需要转义，除非您使用扩展的正则表达式选项`sed`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T10:52:13.170

尝试：

```
sed -n '/myVar/{s|^|//|};p' MyFile.java 
```

这意味着：当一行包含 时`myVar`，将行的开头替换为`//`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-29T15:27:49.157

我正在研究相同的主题，发现这个解决方案在正则表达式方面更简单

`sed -e '/myvar/ s/^/\/\//' file`

这将添加`//`到具有匹配模式的行的第 0 列。

但是，我正在寻找一种解决方案，它允许我在该行的第一个字符之前添加一个字符（而不是在第 0 列）。

# sql - 如何手动实例化 ActiveRecord 截断对象？

> ID：14137356
> 
> 赞同：2
> 
> 时间：2013-01-03T10:48:40.383
> 
> 标签：sql, ruby, ruby-on-rails-3, activerecord

使用 ActiveRecord 和 JRuby，我尝试在数据库上调用存储过程。使用底层 Java 库，我达到了一个点，其中我有一个散列，其中包含选择中指定的列。

现在我想使用这个哈希来拥有 ActiveRecord 模型，但我希望它们看起来像我做了一个经典的 Model.select(columns).all （只有列值，尝试到达另一个时出错和只读的）。

AR 内部一定有一些东西可以做到这一点，但我找不到任何东西，我的所有搜索都指向所有基本的“获取”教程......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:05:46.970

好的，所以我一直在挖掘 Rails 代码并发现我的答案是实例化方法。

这个想法是，如果您在一个名为*MyModel*的模型中并执行此操作

```
object = instantiate(value1: 1, value2: 'ok') 
```

您将拥有一个定义了这些属性的 MyModel 类的实例。如果模型应该有更多列，则它们没有定义。该对象是只读的。

# c# - 为什么我们在 IDisposable 接口中没有 IsDisposed 属性

> ID：14137363
> 
> 赞同：3
> 
> 时间：2013-01-03T10:49:07.930
> 
> 标签：c#, .net

> **可能重复：**
> [如何检查对象是否已在 C# 中处理](https://stackoverflow.com/questions/3457521/how-to-check-if-object-has-been-disposed-in-c-sharp)

我的所有痛苦都是如何检查.net 中的对象（例如位图对象）是否已被处置。我是否需要检查该属性是否引发了 ObjectDisposedException 以了解该对象是否已被释放。

我认为这是一种非常愚蠢的方法，有人有更好的方法吗？

# jsf-2 - 涉及使用 i18n 在 JSF 应用程序中重新加载数据库的策略

> ID：14137365
> 
> 赞同：0
> 
> 时间：2013-01-03T10:49:10.650
> 
> 标签：jsf-2, internationalization, primefaces

我正在使用**PrimeFaces/JSF**开发一个 Web 应用程序。

它具有**语言选择**的典型组合。

当有人点击组合时，会触发**valueChangeListener**。

该侦听器 (changeLocaleListener) 更改视口区域设置，因此可以加载正确的消息包 .properties 文件。

这可以按预期工作，**但是**，我对采用的策略感到困惑，以便从数据库再次加载依赖于 i18n 的页面的实际内容。

我的意思是，你如何刷新调用正确的 actionListeners 方法的页面。

想象以下场景：

1.  您到达主页（西班牙语被选为默认语言）。

2.  显示最新消息和最新事件列表（西班牙语）。

3.  您单击其中一条新闻并到达详细的新页面（西班牙语）。

4.  哟在组合中选择英语，然后，应从数据库中重新加载所选新的详细信息并以英语显示。

有没有办法根据用户所在的实际页面自动化并控制应该调用哪些 dao 方法？

```
<p:selectOneMenu 
    value="#{i18nCtrl.mdl.local}" 
    var="loc"
    onchange="$('#form').submit()" 
    converter="localConverter" 
    valueChangeListener="#{i18nCtrl.changeLocaleListener}" >
    ... 
```

谢谢

# database-design - 找不到我的表的正确名称

> ID：14137367
> 
> 赞同：0
> 
> 时间：2013-01-03T10:49:13.943
> 
> 标签：database-design, naming-conventions

1) 我需要为存储订阅 ID 和信用卡 ID（用于续订订阅）的表命名。该表存储即将到期的信用卡的记录，这些信用卡的用户已经收到通知。我发现很难正确命名该表。这是我的建议列表，但我不喜欢这些:)

creditCardNotify, notifyCreditCards, subscriptionCreditCardNotify

2）还有一个问题。我想我应该在表名中使用“通知”这个词而不是“通知”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:52:49.837

最好将名称命名为renewal_creditcards。信用卡必须更新更有意义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:36:03.937

尽管并非总是如此，但大多数表都包含代表有形或无形*事物的*记录。因此，您应该尝试**使用名词**。

本着这种精神，我建议使用类似**creditCardExpiryNotification**的东西。

你没有具体问，但我觉得还是要说，你最好用**单数名词**。您应该考虑以记录所代表的事物命名表。这使您更容易考虑您的关系，尤其是基数和外键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T17:27:44.043

**订阅CCN**

我喜欢做的另一个选择是：

**订阅__CCNotfd**

`__`表示人行横道或连接表。

这样，当您的应用程序变大时，您可以轻松地看到任何人行横道表驻留在列表中。

# c++ - C++中字符串的堆栈溢出？

> ID：14137370
> 
> 赞同：1
> 
> 时间：2013-01-03T10:49:25.000
> 
> 标签：c++

我做了一个看起来像这样的小程序：

```
void foo () {
  char *str = "+++"; // length of str = 3 bytes
  char buffer[1];

  strcpy (buffer, str);

  cout << buffer;
}

int main () {
  foo ();
} 
```

我期待会出现堆栈溢出异常，因为缓冲区的大小比 str 小，但它成功打印出 +++ ...有人可以解释为什么会发生这种情况吗？
非常感谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-03T10:50:19.480

**未定义的行为（UB）**发生了，你很不幸它没有崩溃。
超出分配内存范围的写入是未定义的行为，UB 不保证崩溃。任何事情都可能发生。
未定义的行为意味着无法定义行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T10:51:48.743

你不会得到堆栈溢出，因为它是*未定义的行为*，这意味着**任何事情都**可能发生。

今天的许多编译器都有特殊的标志，告诉他们插入代码来检查一些堆栈问题，但你经常需要明确告诉编译器启用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T11:22:29.977

未定义的行为...

如果您真的关心为什么在这种情况下很有可能获得“正确”的结果：有几个促成因素。具有`auto`存储类的变量（即普通的局部变量）通常会在堆栈上分配。在典型情况下，堆栈上的所有项目将是某个特定大小的倍数，最常见的是`int`——例如，在典型的 32 位系统上，您可以在堆栈上分配的最小项目将是 32 位。换句话说，在典型的 32 位系统上，有四个字节的空间（`char`如果您更喜欢这个术语，则为四个 s）。

现在，碰巧的是，您的源字符串仅包含 3 个字符，加上 NUL 终止符，总共 4 个字符。纯粹是坏机会，它恰好足够短以适合编译器（某种）被迫分配的空间`buffer`，即使你告诉它分配更少。

但是，如果您将*更长*的字符串复制到目标（甚至可能只是一个字节/字符长），则出现重大问题的机会将*大大增加*（尽管在 64 位软件中，您可能还需要更长的时间）。

还有一点需要考虑：根据系统和堆栈增长的方向，您可能能够*很好*地写入分配的空间的末尾，并且仍然可以正常工作。您已分配`buffer`. `main`中定义的唯一另一件事`main`是`str`，但它只是一个字符串文字 - 因此实际上没有分配空间来存储字符串文字的地址。您最终会得到静态分配的字符串文字本身（而不是在堆栈上），并将其地址替换为您使用过的`str`. 因此，如果你写到末尾`buffer`，您可能只是在写入堆栈顶部剩余的任何空间。在典型情况下，堆栈将一次分配一页。在大多数系统上，页面大小为 4K 或 8K，因此对于堆栈上使用的随机空间量，您可以预期平均分别有 2K 或 4K 空闲空间。

实际上，由于这是 in`main`并且没有调用任何其他内容，因此您可以预期堆栈几乎是空的，因此堆栈顶部有可能接近一整页未使用的空间，因此将字符串复制到目的地可能会工作，直到/除非源字符串*很*长（例如，几千字节）。

至于为什么它通常会比这更快地失败：在典型情况下，堆栈向下增长，但使用的地址`buffer[n]`会向上增长。在典型情况下，堆栈“上方”的下一项将是调用的启动代码`buffer`的返回地址- 因此，一旦您写入堆栈上的空间量（如上所述，可能比您指定的要大）您最终会覆盖来自. 在这种情况下，里面的代码通常看起来可以正常工作，但是一旦执行（尝试）从 main 返回，它最终会使用你刚刚写的数据作为返回地址，此时你是一个更有可能看到明显的问题。`main``main``buffer``main``main`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T11:20:07.813

概述会发生什么：

要么你很幸运，它会立即崩溃。**或者**因为它在技术上未定义，您最终可能会写入其他东西使用的内存地址。假设您有两个缓冲区，一个`buffer[1]`和一个`longbuffer[100]`，并假设内存地址`buffer[2]`可能与现在终止的相同`longbuffer[0]`（`long buffer`因为`longbuffer[1]`空终止）。

```
char *s = "+++";
char longbuffer[100] = "lorem ipsum dolor sith ameth";
char buffer[1];

strcpy (buffer, str);

/*
buffer[0] = +
buffer[1] = +
buffer[2] = longbuffer[0] = +
buffer[3] = longbuffer[0] = \0 <- since assigning s will null terminate (i.e. add a \0)
*/

std::cout << longbuffer; // will output: + 
```

希望有助于澄清**请注意**`buffer[2]`，这些内存地址在随机情况下不太可能相同，但它可能会发生，甚至不需要是相同的类型，任何东西都可以`buffer[3]`是被作业覆盖。然后下次你尝试使用你的（现在被破坏的）变量时，它很可能会崩溃，那是调试变得有点乏味的时候，因为崩溃似乎与真正的问题没有太大关系。（即，当您尝试访问堆栈上的变量时它会崩溃，而真正的问题是您代码中的其他地方破坏了它）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T10:54:29.613

没有明确的边界检查或异常抛出`strcpy`——它是一个 C 函数。如果你想在 C++ 中使用 C 函数，你将不得不承担检查边界等的责任，或者切换到使用`std::string`.

在这种情况下，它确实有效，但在关键系统中，采用这种方法可能意味着您的单元测试通过，但在生产中，您的代码会出错 - 这不是您想要的情况。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T11:25:22.087

堆栈损坏正在发生，它是一种未定义的行为，幸运的是没有发生崩溃。在您的程序中进行以下修改并运行它肯定会因为堆栈损坏而崩溃。

```
void foo () {
  char *str = "+++"; // length of str = 3 bytes
  int a = 10;
  int *p = NULL;
  char buffer[1];
  int *q = NULL;
  int b = 20;

  p = &a;
  q = &b;

  cout << *p;
  cout << *q;

  //strcpy (buffer, str);

  //Now uncomment the strcpy it will surely crash in any one of the below cout statment.
  cout << *p;
  cout << *q;

  cout << buffer;
} 
```

# android - 什么Android框架可以用来连接PC到Android和Android到其他PC？

> ID：14137372
> 
> 赞同：5
> 
> 时间：2013-01-03T10:49:30.120
> 
> 标签：android, python, linux, bash, android-intent

我有这种情况。我正在使用 bash/python 在 Android 中编写一个应用程序。这样我就可以通过 PC 连接到 Android 并使用 USB 从 Android 连接到目标 PC/服务器。

但是什么 API 可用于将我所有的 Android 请求发送到 USB，以便我可以通过 Android 远程获得服务器 PC 的帮助？有没有其他可用的开源框架可以做到这一点？

![在此处输入图像描述](../Images/740fefb2f3ee8c2c7134b2c0898f2e1a.png)

或者

![在此处输入图像描述](../Images/ce13468ddce36b540bd3381514d207a6.png)

**跟进：**

我的手机中已经有“网络共享和便携式热点”选项。无需安装任何第三方应用程序。

![在此处输入图像描述](../Images/9a5b039c11056f673cebc946851b8be4.png)

因此，一旦我启用它，我就有一个名为 usb0 的新接口，其 IP 地址位于 Android + 笔记本电脑的同一子网中。

然后我在 Android 中简单地安装了 SSHDroid 服务器，现在我可以从 3G 连接到 Android。现在PC和Android都有usb0接口和同一个子网来共享数据，解决了所有的远程访问问题。

在我的笔记本电脑上：

```
$ ip addr

    2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP qlen 1000
        link/ether d4:be:d9:55:91:4a brd ff:ff:ff:ff:ff:ff
        inet 192.168.0.219/24 brd 192.168.0.255 scope global eth0
        inet6 fe80::d6be:d9ff:fe55:914a/64 scope link 
           valid_lft forever preferred_lft forever

    7: usb0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UNKNOWN qlen 1000
        link/ether c6:8a:95:bf:fa:2b brd ff:ff:ff:ff:ff:ff
        inet 192.168.42.202/24 brd 192.168.42.255 scope global usb0
        inet6 fe80::c48a:95ff:febf:fa2b/64 scope link 
           valid_lft forever preferred_lft forever 
```

在我的安卓手机上：

```
/data/data/berserker.android.apps.sshdroid/home # ip addr

11: usb0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP qlen 1000
    link/ether 6e:54:53:29:68:8c brd ff:ff:ff:ff:ff:ff
    inet 192.168.42.129/24 brd 192.168.42.255 scope global usb0
    inet6 fe80::6c54:53ff:fe29:688c/64 scope link 
       valid_lft forever preferred_lft forever

15: wlan0: <BROADCAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP qlen 1000
    link/ether 50:01:bb:e3:fb:d7 brd ff:ff:ff:ff:ff:ff
    inet 192.168.0.163/24 brd 192.168.0.255 scope global wlan0
    inet6 fe80::5201:bbff:fee3:fbd7/64 scope link 
       valid_lft forever preferred_lft forever 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:25:20.887

你想做的应该是可能的，但需要付出努力。有一些[应用程序可以启用 USB 网络共享](https://play.google.com/store/apps/details?id=com.USB&hl=en)，但我认为它们并不适用于所有设备。这可以创建一个可用于与连接的服务器通信的网络。如果您在 android 上安装 ssh 服务器，则可用于通过隧道连接到内部服务器。端口转发是[另一种选择](https://play.google.com/store/apps/details?id=at.bherbst.net&hl=en)。我认为您很可能需要一部有根电话。如果您的 3g 运营商可以与您的手机建立入站连接。

如果无法进行入站连接，那么您可以在手机或其中一台服务器上设置脚本，以每 5 分钟尝试 ssh 特定机器（您的 PC 或家庭路由器），创建通往内部网络的隧道。

要拥有稳定的主机名，您可以使用一些动态 dns 服务，例如 dnsdynamic.org，因为您的公共 IP 地址很可能至少在 3G 端会发生变化。

我认为，尽管为 3G 加密狗购买带 USB 的廉价路由器盒会容易得多。或者，您可以将 3G 加密狗放入其中一台服务器并将其用作路由器。实际上，您可以尝试将您的 android 手机用作 USB 调制解调器加密狗，我正在寻找[本指南](http://www.howtogeek.com/102298/how-to-use-your-android-phone-as-a-modem-no-rooting-required-redux/)。

这一切都取决于特定的设备功能和运气，但总而言之，如果是我，我会首先尝试将 android 手机用作 USB 调制解调器加密狗并使用动态 dns 服务，因此我始终知道 3G 连接的当前 IP。然后使用 ssh 连接到运行 3G 连接的服务器。从该服务器可以 ssh 到任何其他服务器。然后我会尝试使用带有一些 USB 3G 加密狗的专用路由器。我永远不会去麻烦配置一个作为路由器工作的安卓手机，听起来太费时了。

希望有帮助。

# jquery - div 在另一个 div 上方，但应该在后一个 div 下方滚动

> ID：14137378
> 
> 赞同：0
> 
> 时间：2013-01-03T10:49:44.083
> 
> 标签：jquery, html, css

有一个`div`（即`div_fixed`）是固定位置的。另一个`div`就是`other_content`在`div_fixed`. `other_content`div 有一个属性，`padding-top`因此当页面滚动时，只有`other_content`在固定 div 下方滚动。

小提琴在[这里](http://jsfiddle.net/BCRPa/)

HTML：

```
<div class="div_fixed">FIXED</div>
<div class="other_content">
    content goes here<br/>
    content goes here<br/>
    content goes here<br/>
</div> 
```

CSS：

```
 div { color: #fff }
        .div_fixed { position: fixed;  
    width: 100%; 
    height: 100px; 

    }

.other_content { 
background: #f00; 
height: 5000px; 
color: #fff; 
padding-top: 100px; 

margin:0 auto;

} 
```

但我希望非固定 div 保持在固定 div 上，并希望非固定 div 在其上边缘下方消失，即非固定 div 上边缘的位置将保持固定，但它的内容将在页面滚动时开始消失就像它停留在固定 ​​div 下方时发生的那样。

因此，在非固定 div 之前，我在 html 中进行了一些编辑（只有 2 个中断）：

```
 <div class="div_fixed">FIXED</div>
<br><br/>
        <div class="other_content">
            content goes here<br/>
            content goes here<br/>
            content goes here<br/>
        </div> 
```

css中的补充是：

```
 .fixed_div{

    z-index:-1;
    }

    .other_content{

    width:60%;
    z-index:99099900;

    } 
```

但是非固定div的上边缘并没有停留在我想要的位置。

如何做到这一点？

**编辑**：

假设我为非固定的`div`. 是否有可能固定的背景图像的一部分， `div`其他 div 将滚动的部分将`z-index`高于非固定的`div`？问题会这样解决吗？

**编辑2**

让我们假设它`fixed_div`是标题，`other_content`是网页的**内容主体**。让我们添加一个`div`带有 id的页脚`footer`。中不应出现滚动`other_content`。`other_content`滚动页面时应该滚动。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T11:25:20.730

我想这就是你要找的。您需要以某种`fixed`方式定位固定 div，但第二个 div 不需要特殊定位。只需给它一个固定 div 的高度在`margin-top:100px`哪里。`100px`

诀窍是使用`z-index`并添加`position:relative;`到内容 div

工作演示：http: [//jsfiddle.net/KyP8L/3/](http://jsfiddle.net/KyP8L/3/)

```
.div_fixed{
    height:100px;
    width:100%;    
    position:fixed;
    top:0;
    left:0;
    background:#ff0;
    z-index:500;
}
.other_content {
    width:60%;    
    background:#0ff;
    margin-top:100px;
    z-index:600;
    position:relative;
}
​
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:36:49.773

一种选择是将内容 div 包装在另一个具有固定位置的容器中。

例如：

HTML：

```
<div class="div_fixed">FIXED</div>
<div class="fixed_container">
    <div class="other_content">
        content goes here<br/>
        content goes here<br/>
        content goes here<br/>
    </div>
</div> 
```

CSS：

```
.fixed_container {
    position: fixed;
    overflow: auto;
    top:30px;
    width: 100%;
    height: 5000px;
    z-index:10; }

.other_content { position: absolute; } 
```

演示：http: [//jsfiddle.net/xmKMs/](http://jsfiddle.net/xmKMs/)

# php - codeigniter 从不同的文件夹加载视图

> ID：14137379
> 
> 赞同：0
> 
> 时间：2013-01-03T10:49:44.520
> 
> 标签：php, codeigniter, view

我有一个表单，提交后会加载另一个表单（来自其他控制器的另一个视图）。但是，在第二个表单中，我不知道为什么表单验证规则（如在前一个表单中实现）不起作用以及为什么在提交中我总是找不到页面。关于这一点，我尝试在 url 中正常加载两个不同模型的页面。发生的情况是，如果在第一个视图的模型中，如果我在 url 中写入：

```
http://localhost/code/index.php/fichas/index 
```

如果我尝试像这样的第二个模型（产品）只是为了测试，他会毫无问题地在 fichas 文件夹中加载此页面或其他页面：

```
http://localhost/code/index.php/produtos/index 
```

在此页面或其他产品文件夹中，我总是找不到页面。我错过了什么重要的东西吗？为什么他应该能够加载我在“视图”内的某些文件夹中拥有的一些视图而不是其他视图？

谢谢！

用一些代码编辑：

在 index.php 之后，我从这个表单（create.php）开始：

```
 <h2>Nova Ficha de Segurança</h2>

<?php echo validation_errors(); ?>

<?php echo form_open('fichas/create') ?>

<label for="cod_produto">Código do Produto:</label>
    <input type="input" name="cod_produto" /><br />

    <label for="nome_produto">Nome do Produto:</label> 
    <input type="input" name="nome_produto" /><br />

    <label for="versao">Versão:</label>
    <input type="input" name="versao" /><br />

    <label for="data_ficha">Data da Ficha:</label>
    <input type="input" name="data_ficha" /><br />

    <input type="submit" name="submit" value="Criar Ficha" /> 

</form> 
```

fichas.php（控制器）的函数创建：

```
public function create()
{
$this->load->helper('form');
$this->load->library('form_validation');

$this->form_validation->set_rules('versao', 'versao', 'required');

if ($this->form_validation->run() === FALSE)
{
    //$this->load->view('templates/header', $data); 
    //$this->load->view('templates/header');    
    $this->load->view('fichas/create');
    //$this->load->view('templates/footer');

}
else
{
    $data['teste1']=$this->fichas_model->set_fichas();
    $data['teste'] = $this->fichas_model->get_distribuidor();
    $this->load->view('produtos/ponto',$data);
}
} 
```

从上一个函数我被重定向到 produtos/ponto 文件：

```
<h2>Identificação do Produto/Identificação da Empresa</h2>

<?php echo validation_errors(); ?>

<?php echo form_open('produtos/ponto') ?>

    <label for="nome_produto">Nome do Produto:</label> 
    <input type="input" name="nome_produto" /><br />

    <label for="descricao_produto">Descrição do Produto:</label>
    <input type="input" name="descricao_produto" /><br />

    <label for="id_ficha">Cod do Produto:</label>
    <input type="input" name="id_ficha" value="<?php echo $teste1['id_ficha'];?>" /><br />

    <h4>Distribuidor</h4>

    <label for="nome_empresa">Nome da Empresa:</label>
    <input type="input" name="nome_empresa" value="<?php echo $teste['nome_empresa'];?>" /><br />

    <label for="morada">Morada:</label>
    <input type="input" name="morada" value="<?php echo $teste['morada'];?>" /><br />

    <label for="cod_postal">Código Postal:</label>
    <input type="input" name="cod_postal" value="<?php echo $teste['cod_postal'];?>" /><br />

    <label for="localidade">Localidade:</label>
    <input type="input" name="localidade" value="<?php echo $teste['localidade'];?>" /><br />

    <label for="telefone">Telefone:</label>
    <input type="input" name="telefone" value="<?php echo $teste['telefone'];?>" /><br />

    <label for="fax">Fax:</label>
    <input type="input" name="fax" value="<?php echo $teste['fax'];?>" /><br />

    <label for="email">E-mail:</label>
    <input type="input" name="email" value="<?php echo $teste['email'];?>" /><br />

    <input type="submit" name="submit" value="Seguinte" /> 

</form> 
```

最后，produtos 控制器中的函数 ponto()：表单验证从不工作，提交后的加载视图总是找不到页面。这就是为什么我试图单独加载 produtos 模型的视图。

```
 public function ponto()
{

$this->load->helper('form');
$this->load->library('form_validation');

//$data['title'] = 'Create a news item';

$this->form_validation->set_rules('nome_produto', 'Nome do Produto', 'required');
$this->form_validation->set_rules('morada', 'Morada', 'required');

if ($this->form_validation->run() === FALSE)
{
    //$this->load->view('templates/header', $data); 
    //$this->load->view('templates/header');    
    $this->load->view('produtos/ponto');
    //$this->load->view('templates/footer');

}
else
{
    $this->produtos_model->set_produtos();
    $this->load->view('produtos/success');
}
} 
```

解决了：

当我创建类 Produtos 时，我从 Class Fichas 中复制了基础知识，因此我在 Class Produto 中有以下内容：

```
class Fichas extends CI_Controller { ... 
```

无论如何，非常感谢您的帮助，这让我失去了很多时间，但至少现在它已经解决了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:25:53.403

您的第二个模板似乎根本没有像第一个模板那样的表单开始/结束标记。

# android - 如何在 Android 模拟器中更改鼠标光标

> ID：14137381
> 
> 赞同：0
> 
> 时间：2013-01-03T10:49:46.643
> 
> 标签：android, windows, android-emulator

我想在我的电脑（Windows 7）上从 Android 模拟器录制视频（某种宣传视频）。有什么方法可以将带有白色边框的默认黑色鼠标光标更改为一些自定义外观？Windows 中有一个选项，但它只处理一些应用程序，但不处理带有自定义光标的 3rd 方应用程序。
感谢您的任何建议！

# iphone - 在动态 NSString 中间添加一个字符串

> ID：14137384
> 
> 赞同：1
> 
> 时间：2013-01-03T10:49:52.647
> 
> 标签：iphone, ios, ipad

我有 NSString，如果 NSString 的内容来自 url。我想在这个 NSString 之间添加一个单词，然后是一个特定的单词。这个 NSString 是否会不断变化

例如：

我得到一个数据`" hi mac this is ios"`，这个字符串可能会像这样不断变化 `" hi ios this mac" or hi this is mac ios"`，等等。

我想添加一个像“hello”这样的词，后跟“mac”

```
" hi mac hello this is ios"
" hi ios this mac hello"
"hi this is mac hello ios" 
```

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:54:06.197

试试这个...

```
Yourstring = [Yourstring stringByReplacingOccurrencesOfString:@"mac" withString:@"mac hello "]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:54:27.693

您可以使用 ：

```
string = [string stringByReplacingOccurrencesOfString:@"Mac" withString:@"Mac Hello"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T11:15:51.237

NSString *str = @"Hi Mac 这是";

```
if ([str rangeOfString:@"mac" options:NSCaseInsensitiveSearch].location != NSNotFound)
{
    int location = [str rangeOfString:@"mac" options:NSCaseInsensitiveSearch].location;

    NSMutableString *mstr = [[[NSMutableString alloc] initWithString:str] autorelease];
    NSString *strtemp = @"mac";

    [mstr replaceCharactersInRange:NSMakeRange(location, [strtemp length]) withString:[NSString stringWithFormat:@"%@ %@", strtemp, @"hello"]];

    NSLog(@"test  %@", mstr);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T11:16:28.483

如果你不想用mac hello替换mac，那么你可以这样做

```
NSMutableString *string=[NSMutableString stringWithString:@"hi mac this is ios"];
NSRange range = [string rangeOfString:@"mac"];    
[string insertString:@" hello" atIndex:range.location+3];
NSLog(@"str=%@",string); 
```

输出 ：

```
str=hi mac hello this is ios 
```

# objective-c - 如何获得相反的颜色

> ID：14137386
> 
> 赞同：0
> 
> 时间：2013-01-03T10:49:55.503
> 
> 标签：objective-c, cocoa-touch, background-color

我有一个用户可以选择的自定义彩色背景，但这意味着当他们更改颜色时，标签是不可见的，因为它与背景相同，我不想要这个。我的代码是：`opacityLabel.textColor = bgView.backgroundColor;`在这段代码中，颜色在开始时是相同的，但在我调整背景颜色时不会改变，我还需要颜色随着背景颜色不断变化，我想知道我能做什么替换为“=”以使标签显示相反的颜色。我不能做“！=”因为这意味着不等于而不是**相反**！如果你不能这样做，你能给我提供一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:57:44.923

您需要做的第一件事是计算 的相反颜色`backgroundColor`，然后将其分配给`textColor`属性。

为此，您需要`getRed:green:blue:alpha:`使用`backgroundColor`. 这将为您的颜色的每个组件提供介于 0.0 和 1.0 之间的值。然后使用`UIColor`类方法`colorWithRed:green:blue:alpha:`创建一个新的`UIColor`，但对每个组件使用 (1.0 - component value)。

然后最后将您的新颜色分配给`opacityLabel.textColor`

# database - 从磁盘恢复 PHPMyAdmin

> ID：14137389
> 
> 赞同：0
> 
> 时间：2013-01-03T10:50:04.227
> 
> 标签：database, phpmyadmin, backup

我有一台作为 WAMP 的一部分运行 phpmyadmin 的 Windows 机器。

windows安装坏了，但我有一个完整的磁盘备份。

有没有一种方法可以将数据库从磁盘恢复到新的灌输，而无需执行手动导出过程（显然我不能这样做！）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:55:41.060

PhpMyAdmin 是错误的关注点。您将需要恢复原始的 MYSQL 表和配置。

[这篇 Stack Overflow 帖子](https://stackoverflow.com/questions/2727920/where-does-the-mysql-database-files-actually-reside)详细介绍了在 WAMP 安装中在哪里可以找到这些文件。

# android - Android：无法使用 Activity 调用 BroadcastReceiver 类

> ID：14137390
> 
> 赞同：1
> 
> 时间：2013-01-03T10:50:06.003
> 
> 标签：android, broadcastreceiver

这是我的代码。我无法从主要活动类调用我的接收器类。请帮忙。

```
public class RecorderActivity extends Activity {           

@Override       
public void onCreate(Bundle savedInstanceState) {           
    super.onCreate(savedInstanceState);           
    setContentView(R.layout.main);                      

    Intent i = new Intent(this, CallRecorder.class);
    startActivity(i);
    } 
}

   /////////////////////////////////////

 class CallRecorder extends BroadcastReceiver {

private static final String AUDIO_RECORDER_FOLDER = "AudioRecorder";       
private MediaRecorder recorder = null;
boolean recordstarted = false;
String phonenbr = null;
TelephonyManager telManager;

@Override
public void onReceive(Context context, Intent intent) {

    // TODO Auto-generated method stub
    if (intent.getAction().equalsIgnoreCase(Intent.ACTION_ANSWER)) 
    {
        try
        {
            phonenbr = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);
            Log.v("GDHGDHGHDGDHGDHGHDGHDGH", phonenbr);
            recorder = new MediaRecorder();
            recorder.setAudioSource(MediaRecorder.AudioSource.MIC);                   
            recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);                   
            recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);                   
            recorder.setOutputFile(getFilename());
            recorder.prepare();
            recorder.start();
            recordstarted = true;
            telManager = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }

        final PhoneStateListener phoneListener = new PhoneStateListener()
        {
            @Override
            public void onCallStateChanged(int state, String incomingNumber) {
                try {
                    switch (state) {
                        case TelephonyManager.CALL_STATE_RINGING: {
                            // 
                            break;
                        }
                        case TelephonyManager.CALL_STATE_OFFHOOK: {
                            // 
                            break;
                        }
                        case TelephonyManager.CALL_STATE_IDLE: {
                            if (recordstarted) {
                                recorder.stop();
                                recordstarted = false;
                            }
                            break;
                        }
                        default: { }
                    }
                } catch (Exception ex) {
                }
            } 
        };

        telManager.listen(phoneListener, PhoneStateListener.LISTEN_CALL_STATE);
    }
}
private String getFilename(){                  
    String filepath = Environment.getExternalStorageDirectory().getPath();  
    File file = new File(filepath,AUDIO_RECORDER_FOLDER);                    
    if(!file.exists()){                          
        file.mkdirs();                  
    }

    return (file.getAbsolutePath() + "/" + phonenbr + System.currentTimeMillis() + ".mp4");   
}
} 
```

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <receiver android:name=".CallRecorder" android:enabled="true">
<intent-filter android:priority="1000">
    <action android:name="android.intent.action.PHONE_STATE" />
</intent-filter>
</receiver>

    <activity
        android:name=".RecorderActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T11:01:40.187

```
BroadcastReceiver receiver = new CallRecorder(); 
```

在 Youractivity.onStart() 中：

```
IntentFilter intentFilter = new ItentFilter("some_string-to_call_receiver");
registerReceiver(receiver, intentFilter); 
```

在 Youractivity.onStop() 中：

```
uregisterReceiver(receiver); 
```

并在任何地方呼叫您的接收器：

```
sendBroadcast(new Intent("some_string-to_call_receiver")); 
```

# sql - 是否可以限制连接返回的结果？

> ID：14137391
> 
> 赞同：1
> 
> 时间：2013-01-03T10:50:11.600
> 
> 标签：sql, join, sql-server-2008-r2, inner-join

我想在记录中组合的两个表之间存在*一对多*的关系。假设我有一张名为**Foo**的桌子和另一张名为**Bar**的桌子。**Foo**包含一些内容，**Bar**包含对此内容的评论。现在我想列出所有内容以及第一条评论。

这是我到目前为止所尝试的：

```
SELECT T0.[Content], T1.[Comment]
FROM [Foo] I0 
    INNER JOIN [Bar] T1 ON T1.[ContentCode] = T0.[Code] 
```

这给了我多次评论的所有内容。换句话说，我说的是“将所有评论与其代表内容结合起来”。我想要实现的是说“只将**一条**评论与内容结合起来”。所以我尝试了这个：

```
SELECT DISTINCT T1.[CommentCode], T0.[Content], T1.[Comment]
FROM [Foo] I0 
    INNER JOIN [Bar] T1 ON T1.[ContentCode] = T0.[Code] 
```

这工作正常。使用`ORDER BY`我可以告诉查询使用在**Bar**中找到的第一条或最后一条记录。

但由于某种原因`DISTINCT`，我们被迫使用的数据库适配器不支持。

您是否面临另一种限制连接关系右侧结果的可能性？

提前致谢！:)

**编辑：**

我在 MSSQL Server 2008 (R2) 上，但使用 SAP Business One DI API 访问它。这限制了 T-SQL 的使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:55:37.837

一种相当可移植的方法是在子查询中查询单个评论的 ID：

```
SELECT  T0.Content
,       T1.Comment
FROM    Foo I0 
JOIN    Bar T1 
ON      T1.ID = 
        (
        SELECT  max(ID)
        FROM    Bar T2
        WHERE   T2.ContentCode = T0.Code
        ) 
```

如果 SQL Server 对每一行执行子查询，请考虑使用此版本：

```
SELECT  T0.Content
,       T1.Comment
FROM    Foo T0
JOIN    (
        SELECT  ContentCode
        ,       max(ID) as MaxID
        FROM    Bar
        GROUP BY
                ContentCode
        ) filter
ON      filter.ContentCode = T0.ContentCode
JOIN    Bar T1
ON      T1.ID = filter.MaxID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:58:22.793

如果您只关心 1 条评论，为什么不使用这样的子查询：

```
SELECT Foo.Content, (SELECT TOP 1 Comment FROM Bar WHERE Bar.ContentCode=Foo.Code) AS [Comment] FROM Foo 
```

# mysql - 使用休眠创建外键

> ID：14137403
> 
> 赞同：0
> 
> 时间：2013-01-03T10:51:02.190
> 
> 标签：mysql, hibernate, innodb, myisam, dialect

我在使用 Hibernate 和外键时遇到以下问题：

当我第一次部署我的 Web 应用程序时，Hibernate 配置了以下参数（以及许多其他参数）：

*   `databasePlatform`设置为“通用”（不是引擎特定的）方言`org.hibernate.dialect.MySQLDialect`。
*   `hibernate.hbm2ddl.auto`调成`update`

作为默认引擎`MyISAM`，Hibernate 在逻辑上创建了`MyISAM`带有索引的表，忽略了创建外键（因为`MyISAM`不支持此类约束）。

现在我想将每个表迁移到`InnoDB`，我希望 Hibernate 自动创建缺少的外键。不幸的是，Hibernate 似乎只是在寻找索引：

*   如果索引存在，Hibernate 不会创建对应的外键；
*   如果我删除索引，Hibernate 将创建索引和外键。

由于我不想删除架构中的每个索引，您是否知道即使创建了索引也可以告诉 Hibernate 创建外键的方法？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:48:24.277

我的建议是允许休眠重新创建整个模式，因为这是您的开发数据库。

但是，如果您有很多不想丢失的测试数据，那么我将使用可用的 MySQL 命令创建一个脚本来自动删除所有索引，以便 Hibernate 重新创建它们。您将需要的命令是：

```
show tables;

show index from `table_name`;

drop index `index_name` on `table_name`; 
```

将这些组织成某种形式的程序脚本（shell、python 或您构建的应用程序等），您就可以开始了。

# django - Google App Engine 和 Django 支持

> ID：14137404
> 
> 赞同：6
> 
> 时间：2013-01-03T10:51:02.703
> 
> 标签：django, google-app-engine, pycharm

我正在尝试根据[此文档](https://developers.google.com/appengine/docs/python/cloud-sql/django)`Django`将我的应用程序部署到`Google App Engine`(GAE) 。如该文档中所述，我创建并配置了一个实例。我用作开发环境并创建了一个支持 Django 的 GAE 项目。`Google Cloud SQL``PyCharm`

我将本地服务器配置为指向 GAE 服务器。当我尝试在 PyCharm 中启动 GAE 本地服务器时，它会在配置不正确的数据库上引发异常`SETTINGS.PY`：

```
google.appengine.ext.django.backends.rdbms' isn't an available database backend 
```

我可以从堆栈跟踪中看到本地服务器正在使用 Django 版本，`/Library/Python/2.7/site-packages`而我认为它应该使用`/usr/local/google_appengine/lib`.

考虑到我还有其他应该使用 Django 版本的 Django 项目，解决这个问题的最佳方法是`/Library/Python/2.7/site-packages`什么？如果我修改我`PYTHONPATH`以包含 Django 的 GAE 版本，我的所有项目不会引用该版本的 Django 吗？

**编辑：**更准确地说，GAE 本地服务器启动得很好，但是当我执行`syncdb`更新数据库的任务时会抛出提到的堆栈跟踪。

**编辑 2：**在 Python 解释器下的 PyCharm 设置中，我发现可以修改路径并添加与 GAE SDK 一起分发的 Django 1.4 版本。当我启动 GAE 开发服务器时，我实际上可以看到它使用 GAE SDK 中的 Django 版本，但它仍然在数据库定义上崩溃：

```
Error was: No module named google.appengine.ext.django.backends.rdbms.base 
```

**编辑 3：**我在尝试使用本教程部署现有的 Django 应用程序时遇到了问题。请参阅[这个单独的问题](https://stackoverflow.com/questions/14187640/google-app-engine-aborts-on-missing-environment-variable-django-settings-module)。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-05T10:34:00.250

看起来 PyCharms 调用`syncdb`使用了错误的 Django 安装。 `google.appengine.ext.django.backends.rdbms`不是官方 Django 发行版的一部分，但它是 GAEs django 的一部分。我的 GAE django 在`/usr/local/google_appengine/lib/`

如果您在 linux/OS X 上，您可以将其添加到您的`.bashrc`/`.bash_profile`并让 syncdb 使用它：

```
export GAE="/usr/local/google_appengine"
export PYTHONPATH="$PYTHONPATH:$GAE:$GAE/lib/django_1_4"
export PATH=${PATH}:$GAE/lib/django_1_4/django/bin/
export PATH=${PATH}:/usr/local/mysql/bin 
```

我写了一篇[关于将 Django 与 GAE 和 Google Cloud SQL 结合使用的教程](http://howto.pui.ch/post/39245389801/tutorial-django-1-4-on-appengine-using-google-cloud)。那里可能还有一些相关信息。

# gwt - 如何将 pdf.js 与 gwt 一起使用

> ID：14137407
> 
> 赞同：3
> 
> 时间：2013-01-03T10:51:16.290
> 
> 标签：gwt, pdf.js

如何在不使用 adobe 和其他类型的插件的情况下使用 pdf.js 和 gwt 在 iframe ar 画布中显示 pdf？任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T11:33:35.480

一种方法在[PDF.js 中解决，GWT 应用程序不起作用](https://stackoverflow.com/questions/13642772/pdf-js-with-gwt-application-does-not-work)。

你只需要正确理解 JSNI 和 ScriptInjector.FromUrl 的用法。

# android - 谷歌地图 API V2 google-play-services_lib.jar 丢失

> ID：14137413
> 
> 赞同：4
> 
> 时间：2013-01-03T10:51:43.373
> 
> 标签：android, api, google-maps, google-maps-api-2

我刚刚导入了一个用于测试的 google map api V2 示例。它缺少`google-play-services_lib.jar`. 我找不到这个图书馆。我在哪里得到它？ ![在此处输入图像描述](../Images/4c829f54e6eadb2a6da69d9c7633f160.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T10:57:25.290

首先检查您的 sdk 是否包含已安装的 Google Play 服务。

为此，您执行以下步骤

> 在 Eclipse--->Window--->Android SDK MANager--->Check Google Play Services installed in extras。

然后你通过在下面的位置找到那个来添加 google play services jar

> 你的android-sdk\extras\google\google_play_services\libproject\google-play-services_lib\libs

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-03T17:46:46.340

如果您执行上述操作但仍然无法正常工作，因为它无法访问临时文件夹，您可以转到android sdk 目录中的**SDK 管理器并****以管理员身份运行它**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-17T17:48:32.520

右键单击您的 google-play-services_lib 项目->`Build Project`

使用 google-play-services_lib 右键单击​​您的项目 ->`Build Project`

# jquery - 在 Jquery 中缓存 AJAX POST 响应

> ID：14137417
> 
> 赞同：1
> 
> 时间：2013-01-03T10:51:52.290
> 
> 标签：jquery, caching

我在下面有一个完整的 JS 代码，但它会为每个点击事件向服务器发送 POST 请求。如何缓存下面的 AJAX 发布响应？理想情况下，缓存应该保存为 JS 变量。如果它已经加载并存在于缓存中，它将被显示（不执行 POST）。如果它还没有加载，它会做一个 POST 请求并保存在缓存中然后显示。

```
jQuery( document ).ready( function( $ ) {
var _doing_ajaxx = false;
$('.toolbar').remove();
$('#mydiv #frontend').click(function() {    
    if (_doing_ajaxx) {
        return false;
    }

    var title_shortcode = $(this).text();

    var insert_namex=  $(this).attr('class');

    var titlejsselector=title_shortcode.replace(/ /g,'');

    var buttonval=$('#'+titlejsselector+' input').val();

    if (buttonval=='Minimize')  {
    //stop ajax request if button is set

        $('#'+titlejsselector+' div').remove();
        $('#'+titlejsselector+' input').remove();

    } else {
    //initialize ajax variables

    var data = {
            action: 'test_ajax_response',
            test_ajax_response_nonce: the_ajax_script.test_ajax_response_nonce, 
            postID_from_ajax : the_ajax_script.postid_to_ajax,
            insert_name_ajax: insert_namex,
            title_ajax: title_shortcode
        };      
    //do an ajax request
    _doing_ajaxx = true;
    $.post(the_ajax_script.ajaxurl, data, function(response) {

        $(this).next().slideToggle();   
        $('#mydiv #'+titlejsselector).append(response+"<input type='hidden' id='minimizebutton' value='Minimize'>");
        SyntaxHighlighter.highlight();

        $('.toolbar').remove();
        _doing_ajaxx = false;
    });

    }
    //return false;
}); 

}); 
```

我尝试使用 PHP 添加此代码，但它不起作用：

```
 <?php
 header("Cache-Control: private, max-age=$seconds");
 header("Expires: ".gmdate('r', time()+$seconds));
 ?> 
```

如果有人可以提供一些示例代码来入门，我将很高兴。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:00:01.287

如果你想从 JS 中缓存（所以如果他们重新加载页面，缓存将不再存在），我会创建一个对象并存储结果：

```
var cacheObj = {}; 
```

然后，当您要发送请求时：

```
if (cacheObj.postID_from_ajax){

    display(cacheObj.postID);

}else{

    // Do your ajax call
    $.post(the_ajax_script.ajaxurl, data, function(response) {

        _doing_ajaxx = false;
        cacheObj.postID_from_ajax = response;
        display(response);

    });
}

function display(response){

    $('#mydiv #frontend').next().slideToggle();   
    $('#mydiv #'+titlejsselector).append(response+"<input type='hidden' id='minimizebutton' value='Minimize'>");
    SyntaxHighlighter.highlight();

    $('.toolbar').remove();

} 
```

未经测试，但你应该明白了:)

# objective-c - UICollectionView 列网格间隙

> ID：14137423
> 
> 赞同：7
> 
> 时间：2013-01-03T10:52:19.043
> 
> 标签：objective-c, ios, uicollectionview

我在我的**iPad**`UICollectionView`应用程序中使用流布局。我有不同宽度和高度的单元格。当我使用子类作为集合视图的布局时，它显示了单元格之间的间隙。**`UICollectionViewFlowLayout`**

 **如果列中有大单元格，它会使该列的网格和小单元格呈现在列中该大单元格的中心。**有没有更好的方法来紧紧包裹细胞？**

我正在使用水平滚动。我尝试使用`layoutAttributesForElementsInRect:`方法，但没有成功。

`layoutAttributesForElementsInRect:`请让我知道是否有人通过使用方法或其他方式做过同样的事情......

请找到附图。我需要同样的解决方案![在此处输入图像描述](../Images/b292db8fe46961710124c5c115c5c68e.png)

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-21T13:09:18.783

**像这样使用**

```
UICollectionViewFlowLayout *layout=[[UICollectionViewFlowLayout alloc] init];

layout.minimumInteritemSpacing = 0;
layout.minimumLineSpacing = 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:57:12.253

我对 UICollectionViewFlowLayout 进行了子类化，并且在我的 layoutAttributesForItemAtIndexPath: 和 layoutAttributesForElementsInRect: 方法中我有一个方法称为

```
setLineAttributes:(UICollectionViewLayoutAttributes *)attributes visibleRect:(CGRect)visibleRect: 
```

其中包含：

```
if (attributes.indexPath.item == 0 || attributes.indexPath.item == 1 || attributes.indexPath.item == 2) {
    CGRect f = attributes.frame;
    f.origin.x = 0;
    attributes.frame = f;
} else {
    NSIndexPath *ipPrev = [NSIndexPath indexPathForItem:attributes.indexPath.item - 3 inSection:attributes.indexPath.section];
    CGRect fPrev = [self layoutAttributesForItemAtIndexPath:ipPrev].frame;
    CGFloat rightPrev = fPrev.origin.x + fPrev.size.width + 10;
    if (attributes.frame.origin.x <= rightPrev) 
        return;

    CGRect f = attributes.frame;
    f.origin.x = rightPrev;
    attributes.frame = f;
} 
```**

# c# - 在 RadGrid 中显示具有特定项目的页面

> ID：14137424
> 
> 赞同：1
> 
> 时间：2013-01-03T10:52:28.263
> 
> 标签：c#, asp.net, data-binding, radgrid

我有一个`RadGrid`使用`DataSourceID`. RadGrid 有分页，我想显示包含某些特定项目的页面。为此，我在数据中找到项目的偏移量并设置页码：

```
var index = dataSource.Count(t => t.Id > _selectedTickId);
var page = index / rgTicks.PageSize;
rgTicks.CurrentPageIndex = page; 
```

我的问题是把这段代码放在哪里。在`OnDataBound`我似乎无权访问数据源。如果我把它放在`OnSelecting`检索数据有一个副作用是设置页码。我应该扩展 GridTableView 来实现这个功能吗？我应该覆盖哪种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:59:10.383

我会建议计算`index`值`OnSelecting`（取决于数据），而页面索引可以设置在事件中`OnDataBound`。`PreRender`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-08T16:26:24.413

我的用例是跳转到刚刚使用弹出编辑器插入的项目。这是我解决它的方法。我在标签中省略了不相关的属性。所有数据接线都由您决定，但这里是相关位。重要提示：使用 DataKeyNames 来避免在 GridDataItem 中对值进行混乱挖掘。

在页面中我有：

```
 <telerik:RadGrid ID="rgItems" runat="server" AllowPaging="true"
       OnNeedDataSource="rgItems_NeedDataSource"
       OnPreRender="rgItems_PreRender"
       OnInsertCommand="rgItems_InsertCommand">
       <MasterTableView
           CommandItemDisplay="Top"
           CommandItemSettings-AddNewRecordText="Add New Item"
           CommandItemSettings-ShowAddNewRecordButton="True"
           DataKeyNames="IntItemId"
           EditMode="popup"
           EditFormSettings-PopUpSettings-Modal="true"> 
```

在后面的代码中：

```
private bool itemInserted = false;

protected void rgItems_InsertCommand(object sender, GridCommandEventArgs e)
{
    itemInserted = true;
}

protected void rgItems_PreRender(object sender, EventArgs e)
{
    if (itemInserted)
    {
        // Select the record and set the page
        int LastItem = 0; // Put code to get last inserted item here
        int Pagecount = rgItems.MasterTableView.PageCount;
        int i = 0;
        GridDataItem GDI = null;
        while (i < Pagecount)
        {
            rgItems.CurrentPageIndex = i;
            rgItems.Rebind();
            GDI = rgItems.MasterTableView.FindItemByKeyValue("IntItemId", LastItem);
            if (GDI != null) break; // IMPORTANT: Breaking here if the item is found stops you on the page the item is on
            i++;
        }
        if (GDI != null) GDI.Selected = true; // Optional: Select the item
        itemInserted = false;
    }
} 
```

# magento - 在 Windows 下本地开发和测试 Magento 扩展的良好工作流程是什么？

> ID：14137428
> 
> 赞同：3
> 
> 时间：2013-01-03T10:52:40.253
> 
> 标签：magento

我们正在开发一个 Magento 扩展，它存储在一个 git 存储库中。这是我们目前正在使用的工作流程......它很糟糕：

1.  将远程存储库克隆/拉到我的本地存储库
2.  将扩展文件从本地存储库复制到我的本地 Magento 安装
3.  在我的本地 Magento 安装上工作/编辑
4.  将扩展文件从本地 Magento 安装复制到本地存储库 - 我们复制了四个特定路径：

    *   应用程序/etc/modules/OurModule_Base.xml
    *   应用程序/代码/本地/OurModule
    *   app/design/adminhtml/default/default/layout/OurModule.xml
    *   皮肤/adminhtml/default/default/OurModule
5.  提交并推送

对于更好的工作流程有什么建议吗？我可以在本地测试并提交，而不必担心在文件夹之间来回复制文件？

**编辑**- [Modman](https://github.com/colinmollenhour/modman)似乎是一个可行的选择，唯一的问题是它[似乎不支持 Windows](https://github.com/colinmollenhour/modman/issues/30)，据我所知。

我想我可能只是手动设置了一些符号链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:02:05.337

是的，我会说 modman 帖子有点相关。本质上，modman 是一种用于帮助您创建符号链接的工具。modman 的基本工作流程是：

1.  将 .modman 配置文件添加到您的扩展存储库。
2.  将您的扩展存储库克隆到测试 Magento 存储路由目录中的 .modman 文件夹中。
3.  运行 modman 命令来安装你的模块（我认为是 deploy，我目前对 modman 只是模糊熟悉。

此时，您将所有扩展代码都放在它自己的存储库中，您可以在其中轻松编辑文件并提交它们，而不会干扰 Magento 核心文件等。您还可以轻松地将模块克隆并部署到多个 Magento 版本的目录中。

您可以通过手动创建符号链接在不使用 modman 的情况下执行相同的方法，但我建议尽可能使用 modman。这是我很想在我们的工作流程中引入的东西（只是还没有时间来适应它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:58:31.220

你应该看看 modman - [https://github.com/colinmollenhour/modman](https://github.com/colinmollenhour/modman)

出色的脚本，可让您轻松符号链接模块 - 听起来非常适合您的工作流程

# python - 其他编程语言中的 Python 循环传输

> ID：14137431
> 
> 赞同：0
> 
> 时间：2013-01-03T10:52:47.840
> 
> 标签：python, loops, cython, pypy

我再次有一个关于大循环的问题。

假设我有一个功能

`limits`

```
def limits(a,b):
  *evaluate integral with upper and lower limits a and b*
  return float result 
```

A 和 B 是存储我的值 a 和 b 的简单 np.arrays。现在我想计算积分 300'000^2/2 次，因为 A 和 B 的长度分别为 300'000 并且积分是对称的。

在 Python 中，我尝试了几种方法，例如`itertools.combinations_with_replacement`创建 A 和 B 的组合，然后将它们放入积分中，但这需要大量时间并且内存完全过载。有什么方法可以加快速度，例如用另一种语言传输循环？

我想运行循环

```
for i in range(len(A)):
  for j in range(len(B)):
    np.histogram(limits(A[i],B[j])) 
```

我认为对返回进行直方图`limits`是可取的，以免存储成正比增长的额外数组。

从我读到的内容来看，python 并不是这种迭代分析的最佳选择。

那么在 Python 中用另一种语言评估这个循环是否合理，如果是，如何做。我知道有一些方法可以传输代码，但到目前为止我还没有这样做过。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:19:35.070

如果您担心内存占用，您需要做的就是在 for 循环中对结果进行分类。

```
num_bins = 100
bin_upper_limits = np.linspace(-456, 456, num=num_bins-1)
# (last bin has no upper limit, it goes from 456 to infinity)
bin_count = np.zeros(num_bins)
for a in A:
    for b in B:
        if b<a:
             # you said the integral is symmetric, so we can skip these, right?
             continue
        new_result = limits(a,b)
        which_bin = np.digitize([new_result], bin_upper_limits)
        bin_count[which_bin] += 1 
```

所以没有什么大的东西保存在内存中。

至于速度，我想绝大多数时间都花在了评估`limits(a,b)`上。在这种情况下，循环和分箱非常快，即使在 python 中也是如此。要说服自己相信这一点，请尝试将行替换`new_result = limits(a,b)`为`new_result = 234`. 你会发现循环运行得非常快。（在我的电脑上几分钟，比你引用的 4 小时数字要少得多。）与 C 相比，Python 的循环速度并不快，但在这种情况下并不重要。

无论你做什么来加速`limits()`调用（包括用另一种语言实现它）都会加速程序。

如果你改变算法，还有很大的改进空间。让我们举一个例子来说明你在做什么。假设 A 和 B 是 0,1,2,3。您正在集成 0-->0、0-->1、1-->1、1-->2、0-->2 等范围内的函数。您正在重新执行一遍又一遍地做同样的工作。如果你已经积分了 0-->1 和 1-->2，那么你可以将这两个结果相加得到积分 0-->2。您不必使用花哨的积分算法，只需添加两个您已经知道的数字。

因此，在我看来，您可以计算所有最小范围（0-->1、1-->2、2-->3）中的积分，将结果存储在数组中，并添加结果的子集以获得在你想要的任何范围内的积分。如果您希望该程序在几分钟内而不是 4 小时内运行，我建议您按照这些思路考虑一种替代算法。

（抱歉，如果我误解了您要解决的问题。）

# spring - struts2 中的 java.lang.VerifyError

> ID：14137435
> 
> 赞同：1
> 
> 时间：2013-01-03T10:53:00.107
> 
> 标签：spring, hibernate, struts2

我已经开发了一个 strut2-spring-hibernate web application.Build 成功但是在 tomcat 中部署时出现以下错误：

```
Caused by: java.lang.VerifyError: class org.hibernate.type.WrappedMaterializedBl
obType overrides final method getReturnedClass.()Ljava/lang/Class;
at java.lang.ClassLoader.defineClass1(Native Method) ~[na:1.7.0_09]
at java.lang.ClassLoader.defineClass(ClassLoader.java:791) ~[na:1.7.0_09] 
```

请帮忙....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T02:20:35.093

当您在 Maven 依赖项中添加了多个版本的 jars（jar 版本不匹配）时，就会发生这种情况，

**原因：java.lang.VerifyError: class **所以请检查您的 Maven 依赖项。

对于 spring，您可以在[此处找到所有依赖项](http://mvnrepository.com/artifact/org.springframework)

对于休眠，您可以在[此处找到所有依赖项](http://mvnrepository.com/artifact/org.hibernate)

对于 struts，您可以在[此处找到所有依赖项](http://mvnrepository.com/artifact/org.apache.struts)

# iphone - 标签栏未显示在 iphone 中

> ID：14137441
> 
> 赞同：0
> 
> 时间：2013-01-03T10:53:18.887
> 
> 标签：iphone, ios, ipad, uitabbar

我正在使用标签栏，当我导航到该控制器时，我的标签栏没有显示，

这是标签栏类的代码

```
UIViewController * myTruckDept= [[NYTTruckDeparture alloc]initWithSiteName:self.siteNam andSiteDate:self.date];
UIViewController * myEditionStates = [[NYTEditionStats alloc] initWithSiteName:self.siteName andSiteDate:self.date];
UIViewController * myPagingData = [[NYTPagingData alloc] initWithSiteName:self.siteName andSiteDate:self.date];
UIViewController * myDownTimeLog = [[NYTDowntimeLog alloc] initWithSiteName:self.siteName andSiteDate:self.date];
UIViewController * myComments = [[NYTComments alloc] initWithSiteName:self.siteName andSiteDate:self.date];

NSArray *array = [[NSArray alloc] initWithObjects:myTruckDept, myEditionStates, myPagingData, myDownTimeLog, myComments, nil];

self.viewControllersArray = array;
[self.view addSubview:myTruckDept.view];
self.selectedViewController = myTruckDept;
self.myTabBar.selectedItem=self.myTruckDeptTabBarItem; 
```

当我将此视图控制器推送到导航控制器时，导航栏未隐藏时会显示标签栏，当我隐藏导航栏并使用工具栏时，底部的标签栏不会显示。

需要快速回复提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:07:06.557

//定义UIViewControllers

```
UIViewController * myTruckDept= [[NYTTruckDeparture alloc]initWithSiteName:self.siteNam andSiteDate:self.date];
UIViewController * myEditionStates = [[NYTEditionStats alloc] initWithSiteName:self.siteName andSiteDate:self.date];
UIViewController * myPagingData = [[NYTPagingData alloc] initWithSiteName:self.siteName andSiteDate:self.date];
UIViewController * myDownTimeLog = [[NYTDowntimeLog alloc] initWithSiteName:self.siteName andSiteDate:self.date];
UIViewController * myComments = [[NYTComments alloc] initWithSiteName:self.siteName andSiteDate:self.date]; 
```

//在 UINavigation 控制器中添加视图

```
UINavigationController * myTruckDeptNavC = [[UINavigationController alloc] initWithRootViewController: myTruckDept];
UINavigationController *topyummsNavC = [[UINavigationController alloc] initWithRootViewController: myEditionStates];
UINavigationController *myEditionStatesNavC = [[UINavigationController alloc] initWithRootViewController: myPagingData];
UINavigationController * myDownTimeLogNavC = [[UINavigationController alloc] initWithRootViewController: myDownTimeLog];
UINavigationController * myCommentsNavC = [[UINavigationController alloc] initWithRootViewController:myComments]; 
```

//隐藏导航栏

```
myTruckDeptNavC.navigationBar.hidden = YES;
topyummsNavC .navigationBar.hidden = YES;
myEditionStatesNavC.navigationBar.hidden = YES;
myDownTimeLogNavC .navigationBar.hidden = YES;
myComments NavC.navigationBar.hidden = YES; 
```

//初始化标签栏并设置控制器

```
self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = [NSArray arrayWithObjects: myTruckDeptNavC, topyummsNavC, myEditionStatesNavC ,myDownTimeLogNavC , myCommentsNavC, nil];
self.tabBarController.delegate = self; 
```

//呈现UITable Bar

```
[self.window.rootViewController presentModalViewController:self.tabBarController animated:animated]; 
```

希望这对您有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:08:11.863

试试这个创建代码`Custom tabbarController`。在这里我为两个创建了你可以轻松地将它变成 4 个。

更多了解查看我的答案： [iOS 代码优化](https://stackoverflow.com/questions/13989630/ios-code-optimization/13989743#13989743)

```
tabBar_Controller = [[UITabBarController alloc] init];
NSMutableArray *localControllersArray =[[NSMutableArray alloc]initWithCapacity:2];

firstViewController = [[FirstViewController alloc] initWithSiteName:self.siteNam andSiteDate:self.date];
nav = [[UINavigationController alloc] initWithRootViewController:firstViewController];
nav.tabBarItem.title = @"item1";
nav.navigationBar.barStyle = UIBarStyleBlack;
nav.navigationBar.hidden = YES;
[localControllersArray addObject:nav];
[self setNav:nil];

secondViewController = [[SecondViewController alloc] initWithSiteName:self.siteNam andSiteDate:self.date];
nav = [[UINavigationController alloc]initWithRootViewController:secondViewController];
nav.navigationBar.hidden = YES;
nav.tabBarItem.title = @"item2";
[localControllersArray addObject:nav];
[self setNav:nil];

tabBar_Controller.viewControllers = localControllersArray;
tabBar_Controller.delegate = self;
tabBar_Controller.selectedIndex = 0;
[self.window addSubview:tabBar_Controller.view]; 
```

# c# - 将文本框中的值插入 DB2 数据库

> ID：14137443
> 
> 赞同：0
> 
> 时间：2013-01-03T10:53:27.847
> 
> 标签：c#, asp.net, insert, db2, database-connection

我想在我的表中插入值。（数据库：-DB2）基于文本框获取的值。我正在创建一个演示页面，其中我的文本框将获得一个整数值，并且在单击按钮时它必须插入到数据库中。`AddWithValue()`问题是当我们处理 DB2 Connection 时没有调用这样的方法。**现在我如何从文本框中获取值，以便我可以插入表格？**

```
protected void Button3_Click(object sender, EventArgs e)
        {
            String pass = TextBox4.Text;
            DB2Connection connect = new DB2Connection("Database=SAMPLE;UserID=xxxxxxx;Password=xxxxxx;Server=xx.xx.xx.xx:50000");
            DB2Command cmd = new DB2Command();
            cmd.Connection = connect;
            cmd.CommandText = "INSERT INTO Demo VALUES (@pass)";
            cmd.Parameters.AddWithValue("@pass", pass);
            connect.Open();
            cmd.ExecuteNonQuery();
            connect.Close();
        } 
```

错误 1：

> IBM.Data.DB2.DB2ParameterCollection 不包含“AddWithValue”的定义，并且找不到接受“IBM.Data.DB2.DB2ParameterCollection”类型的第一个参数的扩展方法“AddWithValue”

此外，在`cmd.ExecuteNonQuery()`它向我显示错误 ERROR 2 时：

> {函数评估已禁用，因为之前的函数评估超时。您必须继续执行才能重新启用函数评估。}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:14:48.033

您始终可以使用较长的语法设置参数，例如

```
 DB2Parameter p1 = new DB2Parameter();
 p1.ParameterName = "@pass";
 p1.DB2Type = DB2Type.Double;
 p1.Value = 2;

 cmd.Parameters.Add(p1); 
```

# iphone - 当我在 .plist 文件中添加 600 个 ttf 字体文件时，Iphone App 在设备上崩溃原因？

> ID：14137444
> 
> 赞同：2
> 
> 时间：2013-01-03T10:53:38.120
> 
> 标签：iphone

当我在 .plist 文件中添加 600 个 ttf 字体文件时，iPhone 应用程序在设备上崩溃原因？

我必须在 .plist 文件中添加 604 个字体文件，但应用程序在设备上而不是在模拟器上崩溃.. 并在应用程序加载时出错。[应用程序在 devie 上运行良好，字体文件数量有限，如 100 个文件，但不适用于 604]

1 月 3 日 10:32:13 iPad QuranRem[6314]：CGContextSaveGState：无效上下文 0x0 Jan 3 10:32:13 iPad QuranRem[6314]：CGContextTranslateCTM：无效上下文 0x0 Jan 3 10:32:13 iPad QuranRem[6314]：CGContextSetFillColorWithColor : 无效上下文 0x0 Jan 3 10:32:13 iPad QuranRem[6314] : CGContextSetStrokeColorWithColor: 无效上下文 0x0 Jan 3 10:32:13 iPad QuranRem[6314] : CGContextSetFillColorWithColor: 无效上下文 0x0 Jan 3 10:32:13 iPad QuranRem [ 6314]：CGContextSetStrokeColorWithColor：无效上下文 0x0 Jan 3 10:32:13 iPad QuranRem[6314]：CGContextRestoreGState：无效上下文 0x0 2013-01-03 10:32:13.829 QuranRem[6314:707] *** 由于未捕获的异常而终止应用程序' NSInternalInconsistencyException'，原因：'无法在包中加载 NIB：'NSBundle（已加载）'，名称为'RemQuran''***First throw call stack: (0x35e7c88f 0x36999259 0x35e7c789 0x35e7c7ab 0x3660434b 0x365723c7 0x3644fc59 0x3643951b 0x363c5c17 0x363c4461 0x363b6e87 0x364277d5 0xd5bc1 0x363c4cab 0x363be7dd 0x3638cac3 0x3638c567 0x3638bf3b 0x3235722b 0x35e50523 0x35e504c5 0x35e4f313 0x35dd24a5 0x35dd236d 0x363bd86b 0x363bacd5 0xd59bf 0xd5964)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:49:41.340

确保在“复制捆绑资源”下的构建阶段的应用程序目标中，您已在其中添加了字体。我知道我以前有过这样的问题。

还要确保您的“RemQuran”xib 文件也在“复制捆绑资源”中。希望有帮助

# jsf - 如果 ah:commandButton 的父级是动态呈现的，为什么无法提交表单？

> ID：14137447
> 
> 赞同：0
> 
> 时间：2013-01-03T10:53:44.423
> 
> 标签：jsf, richfaces, seam, jsf-1.2

这个 JSF1 代码让我困惑了好几个小时。基本设置是使用 Seam2 显示的此页面：

```
<h:form encType="multipart/form-data">
  <rich:dataTable value="#{results}">
    ...
  </rich:dataTable>

  <h:selectOneMenu value="#{contact.type}">
    <s:selectItems value="#{contactTypes}" var="t" label="#{t.label}" />
    <s:convertEntity />
    <a4j:support event="onchange" reRender="submitControls" />
  </h:selectOneMenu>

  <h:selectOneMenu value="#{template}">
    <s:selectItems value="#{allTemplates}" var="t" label="#{t.label}" />
    <s:convertEntity />
    <a4j:support event="onchange" reRender="submitControls" />
  </h:selectOneMenu>

  <a4j:outputPanel id="submitControls" layout="block">
    <a4j:outputPanel rendered="#{null != results and results.size gt 0 and ('ONE' == contact.type.label or template != null)}">
      <h:commandButton value="submit" action="#{manager.generate}" />
    </a4j:outputPanel>

    <h:outputText value="Search first" rendered="#{results == null or results.size == 0}" />
    <h:outputText value="Select template first" rendered="#{'ONE' == contact.type.label and template == null}" />
  </a4j:outputPanel>
</h:form> 
```

显然，原始页面有点大。让我摸不着头脑的是，如果我不更改`contact.type`（将其保留为支持 bean 选择的默认值），则表单提交正常。如果我将类型切换`ONE`为此正确呈现“首先选择模板”文本而不是提交控件。通过选择另一种类型来恢复提交按钮会重新生成`<input>`BUT，而没有`onclick`第一次呈现表单时存在的处理程序。

现在单击`<h:commandButton>`向服务器发送请求但不会触发相关操作。但是，它现在恢复了 onclick 处理程序，并且第二次单击会触发正确的提交。

我不知道为什么会这样。有什么建议么？

编辑：将`rendered`属性移动到按钮会导致相同的行为（即使它确实有效，原始面板也包含更多共享相同条件的控件，因此它们确实起到了作用）

EDIT2：我刚刚测试过，只需重新添加在`onclick`提交按钮上呈现的“丢失”处理程序（通过萤火虫）即可使操作按预期工作。我开始怀疑 Richfaces 和该项目中也包含的 trinidad 库之间的不良交互（但未在此页面上使用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:10:10.300

这是防止篡改/黑客请求的保护措施。否则，黑客将能够调用他/她不允许调用的动作，只需相应地编辑发送的 HTTP 请求参数，从而调用未呈现的（例如，由于缺少“ADMIN”角色）命令按钮。

您需要确保`rendered`在处理表单提交的 HTTP 请求期间准备与显示表单的 HTTP 请求期间相同的模型（托管 bean 实例，其中所有属性负责保存属性后面的条件）。在 JSF2 中，这很容易通过将 bean 放置在视图范围而不是请求范围中来实现。只要您与同一个视图交互，视图范围就存在。在 JSF1 中，您需要获取像 Tomahawk's`<t:saveState>`或 RichFaces'这样的第 3 方框架标签`<a4j:keepAlive>`，以模拟 JSF2 视图范围。

```
<a4j:keepAlive beanName="results" /> 
```

顺便说一句，同样的故事也适用于`disabled`属性。

### 也可以看看：

*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)
*   [JSF 1.2：如何在同一视图的回发中保持请求范围的托管 bean 活动？](https://stackoverflow.com/questions/5897262/jsf-1-2-how-to-keep-managed-bean-with-request-scope/5897322#5897322)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:28:03.233

我认为对于渲染属性和内部的任何内容，您必须注意它的评估在初始请求和提交时是相同的。它可能会在渲染阶段之前更改，但如果在应用程序调用期间它不一样，如果在此阶段按钮不会被渲染，它很可能会忽略该操作。

据我记得，这主要发生在我渲染的表达式使用实体属性之类的东西时，该属性将在应用请求值阶段已经更改。

# opengl - Fbo 纹理被翻转/旋转

> ID：14137450
> 
> 赞同：0
> 
> 时间：2013-01-03T10:53:56.900
> 
> 标签：opengl, fbo

我正在通过 fbo 捕捉几张图像。然后我重用这些图像，向它们添加一些东西（使用 fbo 和着色器）。现在，由于某种原因，图像被旋转了，我不知道它发生在哪里。

在一些可能与该错误有关的代码下方。我可以根据要求提供更多代码。

我像这样保存图像：

```
glReadBuffer(GL_COLOR_ATTACHMENT0_EXT);
            int bpp = 4; // Assuming a 32-bit display with a byte each for red, green, blue, and alpha.
            ByteBuffer buffer = BufferUtils.createByteBuffer(SAVE_WIDTH * SAVE_HEIGHT * bpp);
            glReadPixels(0, 0, SAVE_WIDTH, SAVE_HEIGHT, GL_RGBA, GL_UNSIGNED_BYTE, buffer );

            File file = new File("picture" + k + ".png"); // The file to save to.
            String format = "png"; // Example: "PNG" or "JPG"
            BufferedImage image = new BufferedImage(SAVE_WIDTH, SAVE_HEIGHT, BufferedImage.TYPE_INT_ARGB);

            for(int x = 0; x < SAVE_WIDTH; x++)
                for(int y = 0; y < SAVE_HEIGHT; y++)
                {
                        int i = (x + (SAVE_WIDTH * y)) * bpp;
                        int r = buffer.get(i) & 0xFF;
                        int g = buffer.get(i + 1) & 0xFF;
                        int b = buffer.get(i + 2) & 0xFF;
                        int a = buffer.get(i + 3) & 0xFF;
                        image.setRGB(x, SAVE_HEIGHT - (y + 1), (a << 24) | (r << 16) | (g << 8) | b);
                }

            try {
                ImageIO.write(image, format, file);
            } catch (IOException e) { 
                e.printStackTrace(); 
            } 
```

我像这样加载它们：

```
 ByteBuffer buf = null;
        File file = new File(filename);

        if (file.exists()) {

            try {
                BufferedImage image = ImageIO.read(file);

                buf = Util.getImageDataFromImage(image);
            } catch (IOException ex) {
                Logger.getLogger(SkyBox.class.getName()).log(Level.SEVERE, null, ex);
            }
        } else {
            int length = SAVE_WIDTH * SAVE_HEIGHT * 4;
            buf = ByteBuffer.allocateDirect(length);
            for (int i = 0; i < length; i++)
                buf.put((byte)0xFF);
            buf.rewind();
        }

        // Create a new texture object in memory and bind it
        glBindTexture(GL_TEXTURE_2D, pictureTextureId);

        // All RGB bytes are aligned to each other and each component is 1 byte
        glPixelStorei(GL_UNPACK_ALIGNMENT, 1);

        // Upload the texture data and generate mip maps (for scaling)
        glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, SAVE_WIDTH, SAVE_HEIGHT, 0, 
                        GL_RGBA, GL_UNSIGNED_BYTE, buf);    

        // Setup what to do when the texture has to be scaled
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, 
                        GL_NEAREST);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, 
                        GL_NEAREST); 
```

getImageDataFromImage()

```
 WritableRaster wr = bufferedImage.getRaster();
    DataBuffer db = wr.getDataBuffer();
    DataBufferByte dbb = (DataBufferByte) db;
    ByteBuffer byteBuffer = ByteBuffer.allocateDirect(dbb.getData().length);

    byte[] bytes = dbb.getData();

    for(int i=0; i<bytes.length; i+=4) {
        byteBuffer.put(bytes[i+3]);
        byteBuffer.put(bytes[i+2]);
        byteBuffer.put(bytes[i+1]);
        byteBuffer.put(bytes[i]);
    }

    byteBuffer.flip();
    return byteBuffer; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:06:54.270

旋转，还是垂直翻转？如果它们被翻转，那是因为 OpenGL 和图像文件格式不一定就坐标系的原点达成一致。使用 OpenGL 和通常的投影设置，原点位于左下方。大多数图像文件格式和 IO 库都假定原点位于左上角。

# javascript - hide() ， show() 在 jquery 中无法正常工作

> ID：14137453
> 
> 赞同：0
> 
> 时间：2013-01-03T10:54:11.813
> 
> 标签：javascript, jquery, html

我在单独的标签中定义了 4 个主要主题。其中每一个都有一些子主题，其中一些在页面加载时已经显示（这些被定义为单独的表格）......当点击更多时可以看到其余的......（这些再次在单独的表格中定义）。现在我想要的是，当我点击一个主题下的“更多...”部分时，所有其他主题的所有子主题（以及“更多”）都应该被隐藏，只显示其他 3 个主题. 这是我写的代码：

```
 <script> 
    $(document).ready(function() {
    $(document).on('click',function(e) {
         var $panel = $("#planning_panel");
         if ($(e.target).closest("#planning_more")[0]) {
                     $panel.slideToggle('slow');
                     $("#design").hide();
                     $("#market").hide();
                     $("#techno").hide();
                     $("#designing_more").hide();
                     $("#marketing_more").hide();
             $("#technology_more").hide();
                     e.preventDefault();
         } else {
             $panel.slideUp('slow');
             $("#market").show();
             $("#design").show();
             $("#techno").show();
             $("#marketing_more").show();
             $("#designing_more").show();
             $("#technology_more").show();
         }
         var $panel1 = $("#designing_panel");
         if ($(e.target).closest("#designing_more")[0]) {
             $panel1.slideToggle('slow');
             $("#market").hide();
             $("#plan").hide();
             $("#techno").hide();
             $("#marketing_more").hide();
             $("#planning_more").hide();
             $("#technology_more").hide();
                     e.preventDefault();
         } else {
             $panel1.slideUp('slow');
             $("#market").show();
             $("#plan").show();
             $("#techno").show();
             $("#marketing_more").show();
             $("#planning_more").show();
             $("#technology_more").show();
         }
         var $panel2 = $("#marketing_panel");
         if ($(e.target).closest("#marketing_more")[0]) {
             $panel2.slideToggle('slow');
             $("#design").hide();
             $("#plan").hide();
             $("#techno").hide();
             $("#designing_more").hide();
             $("#planning_more").hide();
             $("#technology_more").hide();
             e.preventDefault();
         } else {
             $panel2.slideUp('slow');
             $("#design").show();
             $("#plan").show();
             $("#techno").show();
             $("#designing_more").show();
             $("#planning_more").show();
             $("#technology_more").show();
         }
         var $panel3 = $("#technology_panel");
         if ($(e.target).closest("#technology_more")[0]) {
             $panel3.slideToggle('slow');
             $("#design").hide();
             $("#plan").hide();
             $("#market").hide();
             $("#designing_more").hide();
             $("#planning_more").hide();
             $("#marketing_more").hide();
             e.preventDefault();
         } else {
             $panel3.slideUp('slow');
             $("#design").show();
             $("#plan").show();
             $("#market").show();
             $("#designing_more").show();
             $("#planning_more").show();
             $("#marketing_more").show();
         }
     });
    });
    </script> 
```

`"#plan", "#design", "#market", "#techno"`是我的 4 个主要主题的 ID。`"#marketing_more", "#designing_more", "#planning_more", "#technology_more"`是 4 个各自的“更多”链接的 id，当单击这些链接时，会显示更多下的其余主题，其 id 以“面板”结尾

现在这段代码的问题在于，在代码的第四部分，即带有 id 的代码`"#technology_more"`，`hide()`并且`show()`函数工作正常，但它不适用于任何其他情况。请帮忙。我也在放我的html代码：

```
 <td width="213" valign="top" height="602" align="left">
    <table class="style46"> 
          <tr><td><font color="#0000FF" face="Georgia, Times New Roman, Times, serif"       size="4" >Planning</font></td></tr>
          <tr id="plan"><td><table>
          <tr><td class="style47"><a href="Planning/web-ecommerce--where-to-begin.html">Web Ecommerce</a></td></tr>
          <tr><td class="style47"><a href="Planning/introduction-to-ecommerce.html">Introduction To Ecommerce</a></td></tr>
          <tr><td class="style47"><a href="Planning/web-site-analysis----a-study-in-damag.html">Web Site Analysis</a></td></tr>
          <tr><td class="style47"><a href="Planning/set-up-your-own-blog-free.html">Setting Up Blog</a></td></tr>
          </table></td></tr>
          <tr id="planning_more"><td align="right"><font size="2px" color="#FF3300">More...</font></td></tr>
          <tr id="planning_panel"><td>
          <table>
          <tr><td class="style47"><a href="Planning/what-is-electronic-data-interchange.html">Electronic-Data-Interchange</a></td></tr>
          <tr><td class="style47"><a href="Planning/streamline-your-website-pages.html">Streamline Web Pages</a></td></tr>
          <tr><td class="style47"><a href="Planning/online-backup--the-simple-value.html">Online Backup</a></td></tr>
          <tr><td class="style47"><a href="Planning/building-ecommerce-web-sites--where-d.html">Build eCommerce Sites</a></td></tr>
          <tr><td class="style47"><a href="Planning/banned-by-google-and-back-again..html">Banned by Google</a></td></tr>
          <tr><td class="style47"><a href="Planning/are-drop-ship-directories-really-wort.html">Know Drop Ship Directories</a></td></tr>
          </table>
          </td></tr>
          <tr><td><font color="#0000FF" face="Georgia, Times New Roman, Times, serif" size="4" >Designing & Hosting</font></td></tr>
          <tr id="design"><td><table>
          <tr><td class="style47"><a href="Designing-Hosting/ecommerce-hosting-for-your-online-bus.html">Hosting for Business</a></td>      </tr>
          <tr><td class="style47"><a href="Designing-Hosting/web-hosting-basics.html">Web Hosting Basics</a></td></tr>
          <tr><td class="style47"><a href="Designing-Hosting/web-hosting-strategy-for-managing-mul.html">Multiple Websites Hosting</a>      </td></tr>
          <tr><td class="style47"><a href="Designing-Hosting/domain-name-scams--have-you-fallen-fo.html">Domain Name Scams</a></td></tr>
          </table></td></tr>
          <tr id="designing_more"><td align="right"><font size="2px" color="#FF3300">More...</font></td></tr>

          <tr id="designing_panel"><td>
          <table>
          <tr><td class="style47"><a href="Designing-Hosting/5-minute-guide-to-video-editing-for-b.html">Video Editing Guide
          </a></td></tr>
          <tr><td class="style47"><a href="Designing-Hosting/dedicated-domain-hosting-with-windows.html">Dedicated domain hosting
          </a></td></tr>
          <tr><td class="style47"><a href="Designing-Hosting/ecommerce-hosting-considerations.html">Ecommerce Hosting Basics
          </a></td></tr>
          <tr><td class="style47"><a href="Designing-Hosting/ecommerce-hosting---how-to-choose-a-m.html">Choose A Merchant Account
          </a></td></tr>
          <tr><td class="style47"><a href="Designing-Hosting/ecommerce-web-site-building--where-do.html">Web Site Building
          </a></td></tr>
          <tr><td class="style47"><a href="Designing-Hosting/fast-web-design-for-the-skint-webmaster.html">Web Design For Webmaster
          </a></td></tr>
          <tr><td class="style47"><a href="Designing-Hosting/finding-the-right-web-host.html">Right Web Host
          </a></td></tr>
          <tr><td class="style47"><a href="Designing-Hosting/how-not-to-get-web-design-work.html">Right Web Designers
          </a></td></tr>
          <tr><td class="style47"><a href="Designing-Hosting/online-powerpoint-presentation-c-con.html">Online PPT Presentation
          </a></td></tr>
          <tr><td class="style47"><a href="Designing-Hosting/powerpoint-to-flash--a-new-trend-in.html">PowerPoint to Flash
          </a></td></tr>
          </table>
          </td></tr>

          <tr><td><font color="#0000FF" face="Georgia, Times New Roman, Times, serif" size="4" >Marketing</font></td></tr>
          <tr id="market"><td><table>
          <tr><td class="style47"><a href="Marketing/the-real-secret-to-understanding-web.html">Web Statistics</a></td></tr>
          <tr><td class="style47"><a href="Marketing/how-to-generate-web-site-traffic-for.html">Web Site Traffic For Free</a></td></tr>
          <tr><td class="style47"><a href="Marketing/create-worry-free-sales-with-secure-s.html">Secure Shopping Cart</a></td></tr>
          <tr><td class="style47"><a href="Marketing/7--steps-of--mega-adsense-earners.html">Adsense Earning</a></td></tr>
          </table></td></tr>
          <tr id="marketing_more"><td align="right"><font size="2px" color="#FF3300">More...</font></td></tr>

          <tr id="marketing_panel"><td>
          <table>
          <tr><td class="style47"><a href="Marketing/affiliates-need-to-read-their-newspap.html">Suggestion for Affiliates
          </a></td></tr>
          <tr><td class="style47"><a href="Marketing/manufacturing-outsourcing--microsoft.html">Manufacturing Outsourcing
          </a></td></tr>
          <tr><td class="style47"><a href="Marketing/no-customer-left-behind.html">Customer Focused Site
          </a></td></tr>
          <tr><td class="style47"><a href="Marketing/the-e-in-ebusiness-does-not-mean-ex.html">Business vs e-Business
          </a></td></tr>
          <tr><td class="style47"><a href="Marketing/top-10-search-engine-positioning-mist.html">SE Positioning Mistakes
          </a></td></tr>
          <tr><td class="style47"><a href="Marketing/use-your-hobby-to-launch-a-successful.html">Website on hobby
          </a></td></tr>
          <tr><td class="style47"><a href="Marketing/when-it-comes-to-ebay--don-t-follow-t.html">Suggestions for eBay
          </a></td></tr>
          </table>
          </td></tr>

          <tr><td><font color="#0000FF" face="Georgia, Times New Roman, Times, serif" size="4" >Technology</font></td></tr>
          <tr id="techno"><td><table>
          <tr><td class="style47"><a href="Technology/the-best-simple-software-for-the-busy.html">Software For Webmaster</a></td></tr>
          <tr><td class="style47"><a href="Technology/virtual-hosting-vs-dedicated-hosting.html">Virtual vs Dedicated Hosting
          </a></td></tr>
          <tr><td class="style47"><a href="Technology/network-monitoring-for-serious-ecommerce.html">Network Monitoring</a></td></tr>
          <tr><td class="style47"><a href="Technology/anti-spam-at-the-enterprise-level.html">Anti-spam at Enterprises</a></td></tr>
          </table></td></tr>
          <tr id="technology_more"><td align="right"><font size="2px" color="#FF3300">More...</font></td></tr>

          <tr id="technology_panel"><td>
          <table>
          <tr><td class="style47"><a href="Technology/causes-of-erp-failures.html">ERP Failures
          </a></td></tr>
          <tr><td class="style47"><a href="Technology/crm-and-customer-life-cycle.html">CRM basics
          </a></td></tr>
          <tr><td class="style47"><a href="Technology/finding-the-right-log-analyzer.html">Right Log Analyzer
          </a></td></tr>
          <tr><td class="style47"><a href="Technology/how-i-use-email-automatic-responders.html">Email Automatic Responders
          </a></td></tr>
          <tr><td class="style47"><a href="Technology/implementing-sap-business-one---custo.html">SAP Business One
          </a></td></tr>
          <tr><td class="style47"><a href="Technology/is-your-website-credit-card-friendly.html">Credit Card Friendly Site
          </a></td></tr>
          <tr><td class="style47"><a href="Technology/microsoft-dynamics-gp-customization-t.html">GP customization tools
          </a></td></tr>
          <tr><td class="style47"><a href="Technology/microsoft-dynamics-gp--renovated-mic.html">Microsoft Dynamics GP
          </a></td></tr>
          <tr><td class="style47"><a href="Technology/microsoft-great-plains-customization.html">GP tools Basics
          </a></td></tr>
          <tr><td class="style47"><a href="Technology/website-buying-guide-checklist.html">Website Buying
          </a></td></tr>
          <tr><td class="style47"><a href="Technology/xhtml---kicking-and-screaming-into-th.html">Future: XHTML
          </a></td></tr>
          </table>
          </td></tr>

          </table></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:34:32.710

试图改进代码。

```
$(document).ready(function() {
  $(document).on('click',function(e) {
     var $panel0 = $("#planning_panel"),
         $panel1 = $("#designing_panel"),
         $panel2 = $("#marketing_panel"),
         $panel3 = $("#technology_panel");

     var hidePanels = false;

     if ($(e.target).closest("#planning_more")[0]) {
         $panel0.slideToggle('slow');
         hidePanels = true;
     } else {
         $panel0.slideUp('slow');
     }

     if ($(e.target).closest("#designing_more")[0]) {
         $panel1.slideToggle('slow');
         hidePanels = true;
     } else {
         $panel1.slideUp('slow');
     }

     if ($(e.target).closest("#marketing_more")[0]) {
         $panel2.slideToggle('slow');
         hidePanels = true;
     } else {
         $panel2.slideUp('slow');
     }

     if ($(e.target).closest("#technology_more")[0]) {
         $panel3.slideToggle('slow');
         hidePanels = true;
     } else {
         $panel3.slideUp('slow');
     }

     if( hidePanels ) {
        $(".byClass").hide(); // Give them a class as suggested in the comments
        event.preventDefault();
     } else
        $(".byClass").show();
     }
  });
}); 
```

请注意，您应该向面板添加一个类，以便您可以使用上面的`show()`/ `hide()`。

# python - 从 Windows 窗体调用 Python 脚本

> ID：14137455
> 
> 赞同：1
> 
> 时间：2013-01-03T10:54:15.263
> 
> 标签：python, vb.net, visual-studio-2010, ironpython, vb.net-2010

我是 IronPython 新手，需要一些帮助。我有一个在 Visual Basic 2010 Express 中创建的 Windows 窗体，其中包含两个文本框（' **txtNumber** ' 和' **txtResult** '）和一个按钮（' **btnSquare** '）。我想要做的是能够在单击表单上的按钮时调用下面的 Python 脚本（' **Square.py '）；**

```
class SquarePython:

    def __init__(self, number):

        self.sq = number*number 
```

此脚本应将输入到“ **txtNumber** ”的数字平方，然后将结果输出到“ **txtResult** ”。我知道这几乎太简单了，但我只需要知道基础知识。到目前为止，这是我的 VB 代码中的内容；

```
Imports Microsoft.Scripting.Hosting
Imports IronPython.Hosting
Imports IronPython.Runtime.Types

Public Class Square

    Private Sub btnSquare_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSquare.Click

        Dim runtime As ScriptRuntime = Python.CreateRuntime

        Dim scope As ScriptScope = runtime.ExecuteFile("Square.py")

    End Sub

End Class 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:05:44.340

如果您不介意，我将在 C# 中给出答案。`VB`但无论如何它与版本非常相似。对于您的代码访问`SquarePython`非常简单

```
ScriptEngine py = Python.CreateEngine();

ScriptScope scope = py.ExecuteFile("Square.py");

dynamic square = scope.GetVariable("SquarePython");

int result = (int)square(5);

Console.WriteLine(result.sq); //prints 25 as you might expected 
```

但是为了简单起见，我会稍微修改一下python代码，像这样

```
class SquarePython:
    def Square(self, number):
        return number * number 
```

这样您就不必在每次计算时都创建一个对象。下面给出了检索变量和调用 square 方法的代码：

```
ScriptEngine py = Python.CreateEngine();

ScriptScope scope = py.ExecuteFile("Square.py");
//get variable and then create and object. Could be stored somewhere between computations
dynamic squareInstance = scope.GetVariable("SquarePython")(); 

int result = (int) squareInstance.Square(5);

Console.WriteLine(result); 
```

**注意：**如果您需要将关键字转换为 VB.NET ， 请参阅[C#“动态”的 VB.Net 等效项](https://stackoverflow.com/questions/2889974/vb-net-equivalent-for-c-sharp-dynamic-with-option-strict-on)`dynamic`

# batch-file - Regedit 右键菜单以批量跳转到特定的 goto 功能

> ID：14137459
> 
> 赞同：1
> 
> 时间：2013-01-03T10:54:27.427
> 
> 标签：batch-file, switch-statement, goto, regedit

我已经使用注册表修改了我的右键菜单来启动一个批处理文件，这很有效，但是我的批处理文件包含使用该`GOTO`功能的子例程。是否可以使用下面给出的注册表示例启动批处理文件并跳到特定`goto`命令？

以下是我启动批处理的代码（有效）：

```
 Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\*\shell\MakeSomethingUp2\]
@="START SUB-COMMAND 1"

[HKEY_CLASSES_ROOT\*\shell\MakeSomethingUp2\command]
@="\"C:\\MY_BATCH_PROGRAM.bat\" \"%1\"" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:14:08.297

如果您的批处理文件只接受一个参数，则可以使用第二个参数来表示您是要运行主要部分还是子例程（以及哪一个）。

更具体地说，您可以这样做：

```
@ECHO OFF
IF "%2" == "sub1" GOTO sub1
IF "%2" == "sub2" GOTO sub2

:: otherwise just get on with the main part
...

:sub1
...

:sub2
... 
```

现在您可以在注册表文件中指定如下内容：

```
@="\"C:\\MY_BATCH_PROGRAM.bat\" \"%1\" sub1" 
```

# html - 如何在链接图像上实现标题属性

> ID：14137464
> 
> 赞同：2
> 
> 时间：2013-01-03T10:54:28.680
> 
> 标签：html, xhtml

我想知道在链接图像上实现标题和 alt 的最佳方法是什么。

img-tag 可以同时具有 title 和 alt 属性，a-tag 只能具有 title 属性。链接图像时，实现标题属性的最佳方法是什么？我应该把它放在 img 和 a-tag 上还是只放在两者之一上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:59:50.230

他们有不同的方法。title-attribute 向元素添加描述，alt-attribute 表现为图像的替代文本表示。

```
<a href="..." title="Click here for more information about VanGogh">
    <img src="vangogh.png" alt="Famous painting of VanGogh" />
</a> 
```

# node.js - 除了来自客户端的心跳之外，Socket.io 检查不活动

> ID：14137465
> 
> 赞同：6
> 
> 时间：2013-01-03T10:54:36.533
> 
> 标签：node.js, socket.io

`nodejs`我有一个 PHP 应用程序，它使用和具有聊天功能`socket.io`。我现在需要做的是，如果用户处于休眠状态超过 15 分钟，则将用户注销。

`Nodejs`会话在 PHP 应用程序和服务器之间共享。因此`nodejs`服务器知道用户上次登录的时间或他/她上次活动的时间。

我正在考虑向`logoff`socket.io 客户端发送命令，如果我能区分心跳和来自客户端的消息，那将非常容易。

由于 PHP 应用程序只知道用户在页面重新加载或导航时的活动，因此用户在休眠时仍可能在聊天，而 PHP 应用程序将不知道用户是否在聊天。所以从会话中检查用户的最后一个活动是行不通的。

所以这里的主要问题是，我能否识别一个仅发送心跳超过 15 分钟（无发射）的客户端？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T11:55:57.307

根据聊天活动注销的最简单方法是设置一个简单的计时器，每次用户聊天时都会重置该计时器。像这样的东西：

```
io.sockets.on('connection', function(socket) {
    // ...
    var logoffTimer;
    socket.on('chat', function() {
        // clear the timer on activity
        // should also update activity timestamp in session
        clearTimeout(logoffTimer);
        // set a timer that will log off the user after 15 minutes
        logoffTimer = setTimeout(function(){
            // add log off logic here
            // you can also check session activity here
            // and perhaps emit a logoff event to the client as mentioned
            socket.emit("logoff", { reason: "Logged off due to inactivity" });
        }, 60 * 15);
    });
}); 
```

# visual-studio-2010 - 当没有设置断点时，Visual Studio 在反汇编中停止

> ID：14137467
> 
> 赞同：0
> 
> 时间：2013-01-03T10:54:44.910
> 
> 标签：visual-studio-2010, interop, visual-studio-debugging

我有一个使用互操作代码（托管 c++ 调用非托管 c++）的项目，我正在尝试对其进行调试。目前我没有设置断点，但 Visual Studio 正在停止第三方 dll 的反汇编，就像我手动进入它一样。然后调试器似乎卡在一条线上。

该程序调试并运行良好，直到我在项目中为可执行文件“启用非托管代码调试”。

有没有人经历过这样的事情，并且知道它为什么会发生或如何解决它？

我的构建类型是调试 | x86，环境 Visual Studio 2010/Windows 7 64bit。

非常感谢！

一些附加信息：

调用堆栈：

```
apidsp_windows.dll!157946a9()
[Frames below may be incorrect and/or missing, no symbols loaded for apidsp_windows.dll]
apidsp_windows.dll!1577b7bb() 
ntdll.dll!779c9950() 
```

输出窗口：

```
The thread 'Win32 Thread' (0x27a0) has exited with code 0 (0x0).
'MyProgram.exe': Loaded 'C:\...\apidsp_windows.dll', Binary was not built with debug information. 
```

# java - 何时调用 Applet.stop()？

> ID：14137470
> 
> 赞同：0
> 
> 时间：2013-01-03T10:54:52.447
> 
> 标签：java, eclipse, swing, applet, japplet

我使用 Eclipse 及其 Applet Viewer 来试验我的小程序。Applet Viewer 出现在 Eclipse 的顶部，在 Applet 执行期间，我单击 Eclipse 图标以从任务栏中将其最大化。然后 Applet Viewer 失去焦点，`Applet.stop()`并被调用。

当我最小化 Eclipse 时，Applet Viewer 再次回到前面，获得焦点并`Applet.start()`并被调用。这最终会变得一团糟。

**一旦用户更改到另一个选项卡或最小化浏览器，浏览器调用是否是正常行为`Applet.stop`我可以禁用它吗，我想要`stop`被调用。**

也许我在线程中遗漏了一些东西。

我的代码是这样的：

```
public class AppletApp extends JApplet {

    public void init() {
        super.init();
        System.out.println("AppletApp.init()");
    }

    public void start() {
        System.out.println("AppletApp.start()");

        try {
            SwingUtilities.invokeAndWait(new Runnable() {
                @Override
                public void run() {
                    getContentPane().add(new JLabel("Test Label"));
                }
            });
        } catch (InterruptedException e) {
        } catch (InvocationTargetException e) {}

        Runnable runnable = new Runnable() {
            @Override
            public void run() {
                //For DJ Browser Component
                NativeSwing.initialize();
                NativeInterface.open();

                //connect to server and start message exchange
                Client.init(userInterface);
                userInterface.authenticate();

                NativeInterface.runEventPump();
            }
        };
        Thread t = new Thread(runnable);
        t.start();
    }

    public void stop() {
        System.out.println("AppletApp.stop()");
    }

    public void destroy() {
        System.out.println("AppletApp.destroy()");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:10:36.767

> 一旦用户更改为另一个选项卡或最小化浏览器，浏览器调用 Applet.stop 是正常行为吗？

是的，这很正常。从javadoc：

> 由浏览器或小程序查看器调用以通知此小程序应停止执行。当包含此小程序的网页已被另一个页面替换时，并且在小程序要被销毁之前调用它。

当您切换选项卡时，我认为包含的网页已被替换，因此`stop()`调用它是合乎逻辑的。

> 我可以禁用它吗，我希望停止永远不会被调用。

不，你不能，你无法控制它。但是，您可以依赖`init()`and`destroy()`方法而不是`start()`and `stop()`。`start()`并且`stop()`用于恢复/暂停任何消耗资源的东西，如果不可见则不需要（例如，如果不可见，动画将毫无意义）。

# visual-studio-2010 - SQLite 日期时间 在 Visual Studio 2010 中

> ID：14137473
> 
> 赞同：4
> 
> 时间：2013-01-03T10:54:58.383
> 
> 标签：visual-studio-2010, sqlite, datetime

我的一些 DateTime 值已以 YYYY-M-DD HH:MM:SS.SSS 格式输入（请注意单月，即 '2013-1-03 09:10:00.000' 而不是正确的 ISO-8601 '2013 -01-03 09:10:00.000'

我正在使用 SYSTEM.DATA.SQLite 从 Visual Studio 2010 中的数据库中读取数据，对于那些将日期时间输入为一位数月份的记录，我在设计器中得到了*空白*('')。

有什么办法可以在 VS2010 中读取这些数据并更正格式？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:08:54.270

使用这样的查询：

```
UPDATE MyTable
SET MyDate = substr(MyDate, 1, 5) || '0' || substr(MyDate, 6)
WHERE MyDate LIKE '____-_-%' 
```

# powershell - 使用负载平衡器探测设置更新 Windows Azure 端点

> ID：14137474
> 
> 赞同：4
> 
> 时间：2013-01-03T10:55:00.823
> 
> 标签：powershell, azure, load-balancing, endpoint, probe

我正在尝试更新 Windows azure 中负载平衡端点的探测设置，但面临

> “更新 AzureVM：失败：服务器遇到内部错误。请重试请求。”

由于无法通过 Web GUI 访问端点的探测设置，因此我使用 PowerShell cmdlet 来实现此目的。我已经按照这里的指南 [http://www.windowsazure.com/en-us/manage/windows/common-tasks/how-to-load-balance-virtual-machines/#lbprobes](http://www.windowsazure.com/en-us/manage/windows/common-tasks/how-to-load-balance-virtual-machines/#lbprobes)

我还尝试使用 cmdlet 添加新端点`Add-AzureEndpoint`并使用`Set-AzureEndpoint`. 执行的命令是：

> Get-AzureVM -Name "web-server-01" -ServiceName "web-servers" | 添加-AzureEndpoint -LBSetName "Web_80" -Name "Web" -Protocol "tcp" -LocalPort 80 -PublicPort 80 -ProbePort 80 -ProbePath "/ping" -ProbeProtocol http | 更新-AzureVM

是否有人熟悉该问题并已成功更新探针设置或知道如何从生成的错误消息中获得更多信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T14:14:39.440

当我尝试使用以下方法获取 VM 的端点时，我遇到了类似的问题：

```
Get-AzureVM –ServiceName “XXX” –Name “XXX” | Get-AzureEndpoint 
```

在检索 VM 之前设置默认订阅解决了它：

```
Set-AzureSubscription -DefaultSubscription XXX 
```

也许这对你也有帮助

# python - python球物理模拟

> ID：14137475
> 
> 赞同：7
> 
> 时间：2013-01-03T10:55:02.253
> 
> 标签：python, pygame, physics

[我在http://www.petercollingridge.co.uk/pygame-physics-simulation/](http://www.petercollingridge.co.uk/pygame-physics-simulation/)上看到了 Peter Colling Ridge 的精彩教程
，我正在扩展 PyParticles 脚本
代码可在网站上获得（免费），我是使用 PyParticles4.py

## 教程中使用的类

**粒子类**
具有半径、质量、速度、位置
**的圆形 2d 对象 弹簧类**
绑定 2 个对象（粒子）并使用[**胡克定律**](https://www.google.co.in/search?q=Hooke%27s%20law) (F = -kx) 确定它们之间的相互作用的弹簧
**环境类**
环境所在的环境粒子相互作用

我想知道我是否可以使用 2 个粒子并制作一个具有特定长度的“棒”类（如教程中的 Spring 类），并且不允许粒子更靠近（指定的）长度。
**此外，**
对每个粒子施加一个力（在需要时），这样如果一个被拉向左侧，另一个也会如此，但实际上......
就像使用钢连接（从中心）两种不同类型的球杆，但在二维中..
而且我**不想使用第 3 方模块**

提前致谢..

**编辑/更新：**
试图应用约束定理（失败）
这是代码：

```
class Rod:
    def __init__(self, p1, p2, length=50):
        self.p1 = p1
        self.p2 = p2
        self.length = length

    def update(self):
        'Updates The Rod and Particles'
        # Temp store of co-ords of Particles involved
        x1 = self.p1.x
        x2 = self.p2.x
        ###### Same for Y #######
        y1 = self.p1.y
        y2 = self.p2.y

        # Calculation of d1,d2,d3 and final values (x2,y2) 
        # from currently known values(x1,y1)...
        # From Constraint algorithm(see @HristoIliev's comment)
        dx1 = x2 - x1
        dy1 = y2 - y1
        # the d1, d2, d3
        d1 = math.hypot(dx1,dy1)
        d2 = abs(d1)
        d3 = (d2-self.length)/d2
        x1 = x1 + 0.5*d1*d3
        x2 = x2 - 0.5*d1*d3
        y1 = y1 + 0.5*d1*d3
        y2 = y1 - 0.5*d1*d3

        # Reassign next positions
        self.p1.x = x1
        self.p2.x = x2
        ###### Same for Y #######
        self.p1.y = y1
        self.p2.y = y2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T01:05:27.850

2D 中的杆具有 3 个自由度（2 个速度/位置 + 1 个旋转/角频率）。
我将表示以通常方式受力修改的中心位置，并使用旋转（为简单起见，围绕系统中心）变量计算粒子的位置。
旋转由以下力修改

```
ang_accel = F * r * sin (angle(F,r)) / (2*M * r^2) 
```

在哪里

`ang_accel`是角加速度

`F`是作用在特定球上的力，因此有 2 个[扭矩](http://en.wikipedia.org/wiki/Torque)* 相加，因为有两个力相加（矢量）以更新中心的位置。

`r`长度的一半
`angle(F,r)`是力矢量和半径矢量之间的角度（从中心到受力的粒子），

所以这
`F * r * sin (angle(F,r))`是关于中心的[扭矩](http://en.wikipedia.org/wiki/Torque)，并且
`2*M * r^2`是围绕中心的两点系统的[惯性矩。](http://en.wikipedia.org/wiki/Moment_of_inertia)

# css - 为什么在一系列内联 div 之间呈现的空白没有显示在 firebug 的“样式”检查框架中？

> ID：14137477
> 
> 赞同：0
> 
> 时间：2013-01-03T10:55:09.597
> 
> 标签：css, firefox, firebug

[此示例](http://jsbin.com/urodit/39/edit)中的前三个 div（绿色、黄色和红色）在`inline`它们之间有一个空格。但是，查看`firebug`'`Style`检查和切换`Show User Agent Css`并没有显示任何呈现这些空白的 css。为什么？

萤火虫版本：1.10.6

火狐版本：16.0.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:57:10.460

因为空格来自 HTML，而不是 CSS，在结束标签和开始标签之间以换行符的形式出现。

您的前三个元素内联显示的事实是允许它们之间的空白在您的 HTML 中与它们一起内联流动，就好像块本身是文本的一部分一样。浏览器所做的是在渲染 HTML 时将换行符转换为常规空格字符，因此您可以在一行中看到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:05:20.030

因为没有父元素。内联元素需要一个父块元素才能留在其中。

有类似的 CSS 属性，`text-space-collapse: discard;`但它们不适用于您的问题。要查看您的空白，我建议使用 Internet Explorer 开发工具。它们很棒，因为它们向您展示了这些布局破坏者。

# sql-server-2008-r2 - SQL Server 从临时表中选择到另一个临时表

> ID：14137478
> 
> 赞同：0
> 
> 时间：2013-01-03T10:55:15.123
> 
> 标签：sql-server-2008-r2

我在存储过程中有这个：

```
select * into #temp_UNION from 
(
  SELECT 6 AS InteractionType, * FROM history.GetHistoryRewardPointsForIncentiveOption (588,1,6)
   UNION all
   SELECT 8 AS InteractionType, * FROM history.GetHistoryRewardPointsForIncentiveOption (558,1,8)
 ) a 
```

这使：

```
interaction type  historyid         incentiveprogramid       points  
 6              1                  1               50
 6                  1                  4                   50
 6              1                      5                   50
 8                  1                  3                  100
 8              1                  4              100 
```

然后我有：

```
select tu.InteractionType,ipc.Name,tu.Points from #temp_UNION tu
 inner join Incentive.IncentiveProgramCultures ipc
on tu.IncentiveProgramId = ipc.IncentivePrograms_IncentiveProgramId
 inner join Zinc.Users zu
on zu.Cultures_DefaultCultureId = ipc.IncentiveProgramCultureId
 where zu.UserId = 588

6   India - Q2 Incentive    50
8   India - Q2 Incentive    100 
```

现在我需要使用我从上面得到的名称和点来组成 HintText，它是我的#CategoriesTable（以前定义）中的一个字段

```
UPDATE #CategoriesTable
SET HintText = CASE WHEN HasAssessment = 1 
                    THEN 'Program ' + tu.name + ' will earn you ' + tu.points
                    ELSE 'With No Assessment' 
                END 
```

但我收到关于 tu.Name 的错误：无法绑定多部分标识符？我怎样才能实现？我应该使用另一个有 2 行的临时表吗？

这里是新代码：

```
 select * into #temp_UNION from 
(
 SELECT 6 AS InteractionType, * FROM history.GetHistoryRewardPointsForIncentiveOption (588,1,6)
 UNION all
 SELECT 8 AS InteractionType, * FROM history.GetHistoryRewardPointsForIncentiveOption (558,1,8)
 ) a

 select tu.InteractionType,ipc.Name,tu.Points,zu.UserId  into #temp1 from #temp_UNION tu
 inner join Incentive.IncentiveProgramCultures ipc
 on tu.IncentiveProgramId = ipc.IncentivePrograms_IncentiveProgramId
 inner join Zinc.Users zu
 on zu.Cultures_DefaultCultureId = ipc.IncentiveProgramCultureId
 where zu.UserId = 588

Select * from #temp1 t
UPDATE #CategoriesTable
  SET HintText = CASE WHEN HasAssessment = 1 
                    THEN 'Program ' + t.Name + ' and points = ' + t.Points
                    ELSE 'With No Assessment' 
                END 
FROM #temp1 t
WHERE t.userId = #CategoriesTable.UserId

DROP TABLE #temp_UNION 
DROP TABLE #temp1

SELECT *
FROM #CategoriesTable 
```

我没有得到#CategoriesTable？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:01:55.493

您必须在更新子句中指定“tu”别名

```
UPDATE #CategoriesTable
SET HintText = CASE WHEN HasAssessment = 1 
                THEN 'Program ' + tu.name + ' will earn you ' + tu.points
                ELSE 'With No Assessment' 
            END 
FROM #temp_UNION tu
WHERE tu.? = #CategoriesTable.? --JOIN condition 
```

# java - 如何将本机数据库运算符（postgres ~ ）与 JPA 标准构建器一起使用？

> ID：14137479
> 
> 赞同：2
> 
> 时间：2013-01-03T10:55:17.770
> 
> 标签：java, postgresql, jpa, jpa-2.0

我正在使用 JPA 2.0 标准来构建以下查询（简化）：

```
select n from notif n where n.message ~ 'b.*la' 
```

我正在使用 postgresql db，我真的需要 ~ 运算符，不喜欢。是否有与我可以使用的 CriteriaBuilder.function 等效的东西？或者，postgres 中是否有 ~ 运算符的函数形式，所以我可以使用提到的 cb.function 方法。我只找到了 postgresql regexp_matches 函数，但它返回匹配数组而不是布尔值。

解决方案：由于从标准 API 迁移到 JPQL 是不可能的，我最终编写了一个 postgres 函数：

```
'CREATE OR REPLACE FUNCTION "regexp_search"(character varying,character varying) RETURNS boolean AS \'select $1 ~ $2;\' LANGUAGE sql;' 
```

并用 cb.function 调用它：

```
Expression<Boolean> regexp_search = cb.function("regexp_search", Boolean.class, message,cb.literal(re)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:51:15.800

REGEXP 或 ~ 不是 JPQL 标准的一部分。您可以使用本机 SQL 查询。

如果使用 EclipseLink，则支持 REGEXP，并且可以在 Postgres 上运行，

[http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/j_regexp.htm#regexp](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/j_regexp.htm#regexp)

您还可以使用 SQL 函数调用 JPQL 中的任何 SQL 特定语法，

[http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/j_sql.htm#sql](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/j_sql.htm#sql)

# java - 将 finalize() 与装饰器模式一起使用

> ID：14137481
> 
> 赞同：3
> 
> 时间：2013-01-03T10:55:21.037
> 
> 标签：java, decorator, backwards-compatibility

我有一个正在尝试解决的设计问题。简而言之，是否可以使用`finalize()`释放`private static`仅与该对象相关的资源，并且仅在该对象存在时才使用？详情如下...

首先是约束：

1.  我正在使用装饰器模式来封装`X`我没有编写的类型（）

2.  `X`如此**`final`**子类化它是不可能的。

3.  我在包装器中有一个方法，比如说`x()`，它随时都会返回底层`X instance`

4.  原因`x()`是包装器类型需要与期望`X` 参数的现有 API 互换兼容

5.  包装器有一个将`X`实例作为参数的构造函数。然后它将其封装的`X`对象设置为此实例。

问题：

我想在包装器中添加一些功能/数据，**但**保留它。我的意思是，当包装器“解包”到 时`X`，它可以在代码中的其他位置被“重新包装”到包装器，嘿，即使它没有在底层中携带，额外的数据也会被恢复`X`.

到目前为止我的想法：

如果我在包装类中创建一个静态映射，其中键是唯一的`X`id，值是某种结构中的额外数据，那么我可以在`rewrap(X x)`方法中检索它，比如说。

我不会使用包装器或`X`对象作为映射中的键，因为这将阻止它被 GC 处理（除非从映射中明确删除），因此我们将使用唯一的哈希码。

虽然这在原则上似乎没问题，但问题是何时从静态地图中删除这些额外数据。在这种情况下，我们可以允许 finalize() 的实现：

```
finalize(){
   map.remove(wrapperKey);
} 
```

这是我的理由......我们都知道依赖 finalize() 来释放资源通常是一个坏主意，但这里所讨论的资源直接与对象相关。没有对外部资源的引用，因此我们需要这些内部资源，直到包装对象本身被 GC'd，此时我们只需删除资源映射。

最坏的情况是不用担心删除这些冗余的静态映射，因为这会导致内存泄漏。

我想不出任何其他方法来实现此功能并保持与现有 API 的向后兼容性：

```
public void foo(Wrapper wrapper){
  bar(wrapper.x());
}
public void bar(X instance){...} 
```

所以这就是问题所在，还有其他方法或意见吗？

非常感谢

**编辑：** 经过进一步研究，我想我会更新这个问题，因为类似的情况可能是[弱参考的主要候选者](http://weblogs.java.net/blog/2006/05/04/understanding-weak-references)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:04:19.167

如果您每次需要访问 X 实例时都显式调用 Wrapper.x，难道您不能在 Wrapper 中添加一个清理方法并在删除 Wrapper 对象之前显式调用它吗？

也可以从*finalize*调用 cleanup 方法，以确保在未显式调用时将其清理。这将为您提供两全其美的效果，因为如果 Wrapper 使用不当，您将有更大的机会减少内存泄漏。

```
void someRandomMethod() {
    Wrapper someWrapperINeed = new Wrapper(new X(blah, blah blah));
    foo(someWrapperINeed);
    someWrapperINeed.clean();

    // Instead of foo(new Wrapper(new X(blah, blah, blah));
}

// Or foo can call clean if the wrapper will never be needed after its invocation
void foo(Wrapper w) {
    bar(w.x());
    w.clean();
} 
```

编辑：添加了代码示例！

# jquery - 检查 jQueryUI 中可拖动元素的启用/禁用状态

> ID：14137483
> 
> 赞同：1
> 
> 时间：2013-01-03T10:55:25.873
> 
> 标签：jquery, jquery-ui, draggable, jquery-ui-draggable

我有一些可拖动的元素，我正在像这样更改它们的状态：

```
$(obj).draggable("enable");
// and:
$(obj).draggable("disable"); 
```

如何检查可拖动对象的当前状态，即。如果它在 jQueryUI 中启用或禁用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:00:35.587

您可以像这样检查可拖动元素是否被禁用：

```
var isDisabled = $(obj).draggable('option', 'disabled'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:58:39.543

```
var status=$(obj).draggable(); 
```

status 将是当前的可拖动状态`obj`。

# php - Blob 图像未转换为 base64

> ID：14137489
> 
> 赞同：-1
> 
> 时间：2013-01-03T10:55:35.957
> 
> 标签：php, mysql, base64, blob

嗨，我正在尝试将博客字符串转换为 base64，但我无法做到这一点，请大家帮我摆脱它..

这是我的 Blob 字符串

```
 $blob="blob:4cfaa6d2-3712-4986-98d7-bd8747d26f8b";
    $image = imagecreatefromstring($blob);
    ob_start();
    imagejpeg($image, null, 80);
    $imagedata = ob_get_contents();
    ob_end_clean();
    $img=base64_encode($imagedata); 
```

和mysql插入查询在这里插入这个base_64编码的图像

我得到这个“错误数据不是可识别的格式”

请帮帮我。。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:27:47.150

短字符串“blob:4cfaa6d2-3712-4986-98d7-bd8747d26f8b”只是您的浏览器生成的 UUID，用于识别动态生成的图像。将这个可笑的短字符串传输到服务器肯定不会传输图像。

相反，在您的 JavaScript 中，您需要创建一个[FormData](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData)对象，将 Blob 附加到它，然后使用 XMLHttpRequest 将 FormData 对象发布到服务器。[图像应该作为正常的文件上传](http://php.net/manual/en/features.file-upload.post-method.php)到达服务器。有关示例代码，请参阅在 MDN 上[使用 FormData 对象。](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects)

# actionscript-3 - 注册中介时会触发什么事件？

> ID：14137494
> 
> 赞同：0
> 
> 时间：2013-01-03T10:55:57.567
> 
> 标签：actionscript-3, apache-flex, puremvc, flexunit4

我为我的 PureMVC 项目编写了以下测试

```
[Test]
public function facadeCanRegisterMediator():void {

    if(!Facade.getInstance().hasMediator(NewReelMediator.NAME)) {

        Facade.getInstance().registerMediator(new NewReelMediator());
    }
    assertTrue(Facade.getInstance().hasMediator(NewReelMediator.NAME));
} 
```

然而它总是失败。在我检查外观是否有中介之前，我需要监听什么事件？还是有其他原因它失败了？

我收到“预期为真但为假”的消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:58:48.347

答案`Event.ADDED_TO_STAGE`在调解员注册之前被解雇。

当您查看添加到阶段时，只有您的调解员类注册。

```
view.addEventListener( Event.ADDED_TO_STAGE , addedToStageHandler ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T16:41:03.967

好吧，我觉得我很愚蠢！

我的问题的答案是我在注册时遗漏了调解员的名字！

正确的代码应该是：

```
[Test]
public function facadeCanRegisterMediator():void {

    if(!Facade.getInstance().hasMediator(NewReelMediator.NAME)) {

        Facade.getInstance().registerMediator(new NewReelMediator(NewReelMediator.NAME));
    }
    assertTrue(Facade.getInstance().hasMediator(NewReelMediator.NAME));
} 
```

当然……通过了。事件与它无关。注册中介时不会触发任何事件。

# android - Android：使用相同的布局进行编辑和添加新 - 添加错误？

> ID：14137503
> 
> 赞同：-4
> 
> 时间：2013-01-03T10:56:59.593
> 
> 标签：android

我对 EDIT 和 ADD 功能使用相同的布局和活动。我有活动 A - 这有一个带有值的表。如果我单击 ROW，它会获取值并转到活动 B 并将其显示在那里的字段中。在同一个活动 A 中，我还有一个添加新按钮，单击此按钮，我转到活动 B，在那里我使用空白值显示相同的布局供用户输入。

EDIT 部分工作正常，但 ADD new 不是。它给了我NULL指针错误。

活动 B 代码

```
BankName = (EditText)findViewById(R.id.bankNameLabel);
BalanceAmount = (EditText)findViewById(R.id.balanceLabel);
currencySpin = (Spinner)findViewById(R.id.currencySpinner);

BankName.setText(getIntent().getExtras().getString("bank"));
BalanceAmount.setText(getIntent().getIntExtra("amount", 0)+""); 
```

setText 是当我从 EDIT 功能中获得值时。为什么添加部分期间的空白屏幕不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:01:32.110

代替

```
BankName.setText(getIntent().getExtras().getString("bank"));
BalanceAmount.setText(getIntent().getIntExtra("amount", 0)+""); 
```

给支票

```
if(getIntent().hasExtra("bank"))
      BankName.setText(getIntent().getStringExtra("bank");
if(getIntent().hasExtra("amount"))
      BalanceAmount.setText(getIntent().getIntExtra("amount",0)+""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:13:39.413

在您的活动文件的方法中编写以下代码以`onCreate()`从意图中获取数据。

```
Bundle bdl = getIntent().getExtras();
String mBankName = bdl.getString("bank");
int mAmount = bdl.getInt("amount");

BankName.setText(mBankName);
BalanceAmount.setText(String.valueOf(mAmount)); 
```

# coldfusion - 无法将教师和成绩添加到学生记录获取非空属性引用空

> ID：14137504
> 
> 赞同：3
> 
> 时间：2013-01-03T10:56:59.763
> 
> 标签：coldfusion, coldfusion-9

我正在尝试使用coldfusion9 orm和fw1来定义学生、年级和老师之间的关系。这就是我处理师生关系的方式。模型中的 Student.cfc

```
// Use a mysql autonumber for an ID
              property name="id" column="school_studentid" type="numeric" fieldtype="id" generator="identity";
              property name="Fullname" column="school_studentFullname" type="string" length="128" required="true" notnull="true";
              property name="email" column="school_studentEmail" type="string" length="128" required="true" notnull="true";
              property name="birthdate" column="school_studentbirthdate" type="date" required="false" notnull="true";
              property name="gender" column="school_studentgender" type="boolean" required="false" notnull="true";
              property name="phone" column="school_studentphone" type="string" required="false" notnull="true";
              property name="city" column="school_studentcity" type="string" required="false" notnull="true";
              property name="state" column="school_studentstate" type="string" required="false" notnull="true";
              property name="country" column="school_studentcountry" type="string" required="false" notnull="true";
              property name="subject" column="school_studentsubject" type="string" required="false" notnull="true";
              property name="Address" column="school_StudentAddress" ormtype="text";

              //relate student with teacher
              property name="Teacher" fieldtype="many-to-one" cfc="Teacher" fkcolumn="teacher_school_studentId" singularname="Teacher"; 
```

教师.cfc

```
 // Use a mysql autonumber for an ID
              property name="id" column="school_teacherid" fieldtype="id" generator="identity" generated="insert";
              property name="Fullname" column="school_teacherFullname" type="string" length="128" required="true" notnull="true";
              property name="email" column="school_teacherEmail" type="string" length="128" required="true" notnull="true";
              property name="birthdate" column="school_teacherbirthdate" type="date" required="false" notnull="true";
              property name="gender" column="school_teachergender" type="boolean" required="false" notnull="true";
              property name="phone" column="school_teacherphone" type="string" required="false" notnull="true";
              property name="city" column="school_teachercity" type="string" required="false" notnull="true";
              property name="state" column="school_teacherstate" type="string" required="false" notnull="true";
              property name="country" column="school_teachercountry" type="string" required="false" notnull="true";
              property name="Degree" column="school_teacherDegree" ormtype="text";
              property name="experience" column="school_teacherExperience" ormtype="text";
              property name="subject" column="school_teachersubject" ormtype="text";
              property name="Active" column="school_teacherActive" ormtype="text";
              property name="Address" column="school_teacherAddress" ormtype="text";

             property name="Student" fieldtype="one-to-many" cfc="Student" fkcolumn="teacher_school_studentId" singularname="Student" cascade="all" inverse="true"; 
```

等级.cfc

```
component output="false" persistent="true" accessors="true" entityname="Grade" table="school_grade" {

         //Use mysql autonumber for an Id
         property name="id" column="school_gradeId" fieldtype="id" generator="identity";
         property name="Name" column="school_gradeName" type="string" length="128" required="false" notnull="true";

         //Relate the Grade with student
         property name="Student" fieldtype="one-to-many" cfc="Student" fkcolumn="grade_school_StudentId" notnull="true" singularname="Student" lazy="extra"; 
```

这就是我保存学生记录并将教师和成绩设置为学生对象的方式。

```
<cfset var teacher = getTeacherService().teacher(arguments.rc.id)>
<cfset var grade = getGradeService().grade(arguments.rc.id)>
<cfset Student.setTeacher(teacher)>
<cfset Student.setGrade(grade)>
<cfset getStudentService().save(student)> 
```

我是学生控制器中的这种方法。这是我在服务中的teacher.cfc

```
<cffunction name="teacher" returntype="component" access="public">
              <cfargument name="id" required="true">

              <cfif Len(trim(arguments.id)) EQ 0 or arguments.id EQ 0>
                    <cfset result = entityNew("Teacher")>
              <cfelse>
                    <cfset result = entityLoad("Teacher",arguments.id,true)>
              </cfif>
              <cfreturn result>
        </cffunction> 
```

以同样的方式，我调用等级方法。

```
<cffunction name="grade" returntype="component" access="public">
                   <cfargument name="id" required="true">
                   <cfif Len(trim(arguments.id)) EQ 0 or arguments.id EQ 0>
                        <cfset result = entityNew("Grade")>
                  <cfelse>
                        <cfset result = entityLoad("Grade",arguments.id,true)>
                  </cfif>
                  <cfreturn result>

          </cffunction> 
```

这就是我在添加学生表格中选择教师姓名和年级姓名的方式。

```
<select name="TeacherId" id="TeacherId">
                                <option value="0"<cfif rc.student.hasTeacher(teacher)>Selected</cfif>>Select Teacher</option>
                                <cfloop array="#rc.teacher#" index="teacher">
                                <option value="#teacher.getId()#"<cfif rc.student.hasTeacher(teacher)>Selected</cfif>>#teacher.getFullname()#</option>
                                </cfloop>
                        </select> 
```

我在将老师和成绩保存到学生记录时遇到问题。这是我的错误操作：student.save 错误：not-null 属性引用了 null 或瞬态值：Student.Teacher 类型：应用程序详细信息：根本原因：org.hibernate .PropertyValueException：非空属性引用空值或瞬态值：Student.Teacher。

谁能帮帮我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:40:34.087

先保存teacher实体，再添加到student

# python - 返回 _cv.cvHaarDetectObjects(*args)

> ID：14137507
> 
> 赞同：4
> 
> 时间：2013-01-03T10:57:07.337
> 
> 标签：python, opencv

我正在尝试在 ubuntu 上使用 opencv python 从网络摄像头中检测人脸。我得到了这个在线代码并尝试运行这个程序，我得到了 as NULL 数组指针被传递，我猜它无法从网络摄像头捕获视频，但使用相同的代码（仅捕获摄像头）我打开了摄像头并且它捕获了视频。这是我的代码：

```
import cv
from opencv import highgui
HAAR_CASCADE_PATH = "/home/OpenCV-2.3.1/data/haarcascades/haarcascade_frontalface_default.xml"

CAMERA_INDEX = 0 
def detect_faces(image):
 faces = []
 detected = cv.HaarDetectObjects(image, cascade, storage, 1.2, 2, cv.CV_HAAR_DO_CANNY_PRUNING, (100,100))
if detected:
    for (x,y,w,h),n in detected:
        faces.append((x,y,w,h))
return faces

if __name__ == "__main__":
cv.NamedWindow("Video", cv.CV_WINDOW_AUTOSIZE)

capture = cv.CaptureFromCAM(0)
storage = cv.CreateMemStorage()
cascade = cv.Load(HAAR_CASCADE_PATH)
print cascade
faces = []

i = 0
c = -1
while (c == -1):
    image = cv.QueryFrame(capture)

    # Only run the Detection algorithm every 5 frames to improve performance
    #if i%5==0:
    faces = detect_faces(image)
    #print image

    for (x,y,w,h) in faces:
        cv.Rectangle(image, (x,y), (x+w,y+h), 255)

    cv.ShowImage("w1", image)
    i += 1 
```

我得到的错误是：

```
Traceback (most recent call last):
File "/home/OpenCV-2.3.1/webcam_try.py", line 38, in <module>
faces = detect_faces(frame)
File "/home/OpenCV-2.3.1/webcam_try.py", line 13, in detect_faces
detected = cv.cvHaarDetectObjects(frame, cascade, storage, 1.2, 2,    cv.CV_HAAR_DO_CANNY_PRUNING,(100,100))
 File "/usr/lib/pymodules/python2.7/opencv/cv.py", line 1626, in cvHaarDetectObjects
 return _cv.cvHaarDetectObjects(*args)
 NotImplementedError: Wrong number of arguments for overloaded function     'cvHaarDetectObjects'.
 Possible C/C++ prototypes are:
  cvHaarDetectObjects_Shadow(CvArr const *,CvHaarClassifierCascade *,CvMemStorage *,double,int,int,CvSize)
  cvHaarDetectObjects_Shadow(CvArr const *,CvHaarClassifierCascade *,CvMemStorage *,double,int,int)
  cvHaarDetectObjects_Shadow(CvArr const *,CvHaarClassifierCascade *,CvMemStorage *,double,int)
  cvHaarDetectObjects_Shadow(CvArr const *,CvHaarClassifierCascade *,CvMemStorage *,double)
  cvHaarDetectObjects_Shadow(CvArr const *,CvHaarClassifierCascade *,CvMemStorage *) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T23:20:18.223

您的代码对我来说运行良好（尽管我运行的是 OpenCV v2.4.3 而不是您的版本 2.3.1）。上周我开始使用相同的在线代码（在[此处](http://www.calebmadrigal.com/facial-detection-opencv-python/)发布），最终我放弃使用`cv`并切换到新`cv2`库。

所以。我已经更新了您的代码，以便它使用新`cv2`界面。

用于运行 Haar Cascade Classifiers的`cv2`Python 界面更易于使用。查看`cv2.CascadeClassifier.detectMultiScale()` [此处](http://docs.opencv.org/modules/objdetect/doc/cascade_classification.html#cascadeclassifier-detectmultiscale)的文档。新`cv2`界面显着简化了您的代码。以下是重点：

1.  您不再需要担心创建内存缓冲区。
2.  从返回的结果`detectMultiScale`以超级有用的形式返回，无需旧代码的`detect_faces()`功能！
3.  您只需要提供一个参数：图像本身。所有其他参数都是可选的。我已经在下面的修改后的代码中包含了您使用的参数，但可以随意删除它们。

一条建议：如果您的代码运行缓慢，您可以做的最好的事情之一就是增加 minSize。对于我的网络摄像头，使用 (100,100) 会导致大约 0.2fps 的超慢帧速率。将其更改为 (300,300) 可将其提升到可观的 20fps。

由于您运行的是 2.3.1，因此该代码应该可以在您现有的安装上运行，但如果不能，请尝试升级到最新版本。

```
import cv2
import cv2.cv as cv

HAAR_CASCADE_PATH = "/home/OpenCV-2.3.1/data/haarcascades/haarcascade_frontalface_default.xml";

CAMERA_INDEX = 0;

if __name__ == "__main__":

    # Open window, load webcam and load Haar cascade classifier
    cv2.namedWindow("Video", cv.CV_WINDOW_AUTOSIZE)
    capture = cv2.VideoCapture(CAMERA_INDEX);
    cascade = cv2.CascadeClassifier(HAAR_CASCADE_PATH);

    i = 0;

    while True:
        # Grab frame from webcam
        retVal, image = capture.read(); # note: ignore retVal

        # Only run the Detection algorithm every 5 frames to improve performance
        #if i%5==0:
        faces = cascade.detectMultiScale(image, scaleFactor=1.2, 
                                        minNeighbors=2, minSize=(100,100), 
                                        flags=cv.CV_HAAR_DO_CANNY_PRUNING);

        # Draw rectangles on image, and then show it
        for (x,y,w,h) in faces:
            cv2.rectangle(image, (x,y), (x+w,y+h), 255)
        cv2.imshow("Video", image)

        i += 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-02T09:46:46.883

[在参考http://goo.gl/UziMVU](http://goo.gl/UziMVU)之后，我稍微更改了 Brandon 的代码。这对我来说是一个工作代码。

```
import cv2
import cv2.cv as cv

HAAR_CASCADE_PATH = "/usr/local/Cellar/opencv/2.4.6.1/share/OpenCV/haarcascades/haarcascade_frontalface_default.xml"

cv2.namedWindow("preview")
vc = cv2.VideoCapture(0);
cascade = cv2.CascadeClassifier(HAAR_CASCADE_PATH);

retVal, frame = vc.read(); # note: ignore retVal

while True:
    if frame is not None:   
        faces = cascade.detectMultiScale(frame, scaleFactor=1.2, minNeighbors=2, flags=cv.CV_HAAR_DO_CANNY_PRUNING, minSize=(100,100));

        for (x,y,w,h) in faces:
            cv2.rectangle(frame, (x,y), (x+w,y+h), 255)

        cv2.imshow("preview", frame)
    rval, frame = vc.read()

    if cv2.waitKey(1) & 0xFF == ord('q'):
        break 
```

# javascript - 如何将值从 java 脚本传递到 HTML？

> ID：14137513
> 
> 赞同：0
> 
> 时间：2013-01-03T10:57:37.640
> 
> 标签：javascript, html, ajax

我有两个文件

数据处理器.js

```
var FROM;
 var TO;
var CONTECT;

function getValues(fromAdd,toAdd,ContectText){
 alert("method called");
  FROM=fromAdd;
  TO=toAdd;
  CONTECT=ContectText;
 alert("values are " + FROM +" "+ TO +" "+ CONTECT);
 window.open('email.html','newwindow');
} 
```

电子邮件.html

在车身装载期间

```
function loadData(){
    document.getElementById('lblFrom').innerHTML =window.FROM;
    document.getElementById('lbTo').innerHTML = window.TO;
    document.getElementById('lblfrom1').innerHTML = window.FROM;
    document.getElementById('lblto1').innerHTML = window.TO;
    document.getElementById('txtAreaBody').value =window.CONTECT;

} 
```

我如何将 From、to、contect 传递给 EMail.html？我在 Body Onload 中编写了 loadData 函数。结果获取未定义的值。从另一个 HTML 调用 getvalues 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:40:49.127

所以变量 FROM、TO、CONTECT 有时会在 getValues() 中设置。然后调用 loadData()，以便加载的 HTML 使用您获得的值。所以我假设 getValues() 和 loadData() 在同一个 JS 上下文中，并且变量可以直接访问。

更改此代码：

```
 document.getElementById('lblFrom').innerHTML =window.FROM; 
```

至

```
 document.getElementById('lblFrom').innerHTML = FROM; 
```

对其他变量进行类似操作。

PS：发布代码时，请同时注明流程。发布随机代码片段不会帮助我们理解问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:09:10.700

每个 HTML 文档都有自己的 Javascript 上下文。因此，您不能从另一个 HTML 页面访问变量。

但是您可以做的是将这些变量作为 URL 的一部分进行传输。您可以使用 ? 运算符将 URL 与传递给它的数据分开。例子：

```
email.html?from=somewhere&to=somewhereElse&connect=somevalue 
```

网络服务器只会将所有内容解释`?`为文件名的一部分，其余的是传递给它的 GET 参数。所以网络服务器将返回文件 email.html。在该页面上，您可以访问完整的 URL 并使用变量解析参数`document.location`。

另一种选择是[使用 cookie](http://www.quirksmode.org/js/cookies.html)。但请记住，某些用户禁用了 cookie（比禁用 javascript 的用户更多），因此您不应依赖它们来实现网站的任何主要功能。

然而，最好的方法是将所有数据存储在服务器上并使用会话处理机制，该机制在可用时使用 cookie 和 GET 参数作为后备来为每个单独的用户分配会话 ID。这样做最重要的好处是用户不能轻易篡改数据。然而，这不能单独使用客户端 javascript 来完成，因为它需要服务器端脚本。

# javascript - 通过变量将函数传递给另一个函数以绑定为 jQuery 点击事件

> ID：14137514
> 
> 赞同：0
> 
> 时间：2013-01-03T10:57:40.953
> 
> 标签：javascript, function

我试图通过一个变量传递一个函数，作为点击事件的一部分，例如：

```
function bindClick(func) {
    $('#button').click(function() {
        func();
        return false;
    });
}

function configureClick() {
    bindClick(function () { executeClick(message); });
}

function executeClick(message) {
    alert(message);
} 
```

所以`configureClick()`会在某个时候运行，然后`#button.click()`需要调用`func`.

无论发生什么，都是默默地这样做，没有错误也没有期望的行为。

*更新*：我是个白痴！上面的代码正在运行。我`executeClick`有一个 switch-case 块，当我传递不正确的键时，它被忽略了。抱歉给您添麻烦了 D：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:05:12.517

你做了太多的回调函数传递。这会创建很多闭包，在这种简单的情况下不需要。

```
function bindClick(func) {
    $('#button').click(function() {
        func();
        return false;
    });
}

function executeClick(message) {
    alert(message);
}

function configureClick(message){
    bindClick(function(){ executeClick(message) });
}

configureClick('Hello'); 
```

# c# - 从自定义控件继承

> ID：14137517
> 
> 赞同：3
> 
> 时间：2013-01-03T10:57:48.197
> 
> 标签：c#, wpf

我已经从基类 UserControl 创建了一个自定义控件（我的第一个），现在我在制作未来的控件时无法从它继承。

这是自定义控件模板

```
<Style TargetType="{x:Type local:LoadOverlayUserControl}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:LoadOverlayUserControl}">
                <Grid>
                    <ContentPresenter Content="{TemplateBinding ContentControl.Content}" ContentTemplate="{TemplateBinding ContentControl.ContentTemplate}"/>
                    <Border Visibility="{TemplateBinding OverlayVisibility}"
                            Background="{TemplateBinding OverlayColor}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                        <dxe:ProgressBarEdit />
                    </Border>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

这是源代码：

```
 public class LoadOverlayUserControl : UserControl
{
    static LoadOverlayUserControl()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(LoadOverlayUserControl), new FrameworkPropertyMetadata(typeof(LoadOverlayUserControl)));
    }

    #region Overlay Visibility
    public static readonly DependencyProperty OverlayVisibilityProperty = DependencyProperty.Register("OverlayVisibility",
        typeof(Visibility),
        typeof(LoadOverlayUserControl), 
        new PropertyMetadata(Visibility.Hidden));

    private Visibility OverlayVisibility
    {
        get
        {
            return (Visibility)this.GetValue(OverlayVisibilityProperty);
        }
        set
        {
            this.SetValue(OverlayVisibilityProperty, value);
        }
    }
    #endregion

    #region Overlay Color
    public static readonly DependencyProperty OverlayColorProperty = DependencyProperty.Register("OverlayColor",
        typeof(Color),
        typeof(LoadOverlayUserControl),
        new PropertyMetadata(Color.FromRgb(0,0,0)));

    public Color OverlayColor
    {
        get
        {
            return (Color)this.GetValue(OverlayColorProperty);
        }
        set
        {
            this.SetValue(OverlayColorProperty, value);
        }
    }
    #endregion

    public void SetLoading(bool IsLoading)
    {
        if (IsLoading)
        {
            OverlayVisibility = System.Windows.Visibility.Visible;
        }
        else
        {
            OverlayVisibility = System.Windows.Visibility.Hidden;
        }
    }
} 
```

我遇到的问题是，当我从这个自定义控件继承时，它似乎忽略了我的模板，我最终得到了一个空控件。

下面是从该自定义控件继承的新控件的示例。

```
<custom:LoadOverlayUserControl x:Class "ChildControl"
...
...
...>

<UserControl.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="../ResourceDictionaries/Generic.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</UserControl.Resources>

<Grid>
...
</Grid>
</custom:LoadOverlayUserControl> 
```

这就是我使用新控件的方式。为了便于阅读，我省略了命名空间，但我向你保证它们是正确的，除非我需要做一些棘手的事情。

```
<UserControl x:Class "SomeOtherControl">
    <Grid>
    <StackPanel>
        <my:ChildControl />
    </StackPanel>  
    </Grid>
</UserControl> 
```

自定义控件背后的想法是针对我希望能够在半透明不透明度之上应用“当前加载”覆盖的控件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T17:27:16.577

当您想在 WPF 中创建自定义控件时，您需要做一些不同的事情。

首先，继承自`ContentControl`，而不是`UserControl`。

其次，您的资源字典 Generic.xaml 应位于 Themes 文件夹下。

第三，您的派生控件类也需要是 WPF 控件。也就是说，他们需要覆盖默认样式键，并在 Generic.xaml 中定义他们的样式。

# php - 使用存储过程和 PHP 插入？

> ID：14137523
> 
> 赞同：0
> 
> 时间：2013-01-03T10:58:24.400
> 
> 标签：php, mysql, stored-procedures

我第一次尝试创建一个简单的存储过程。我已经在网上搜索并找到了几个教程，但是当我尝试创建 INSERT 过程时总是遇到一些错误？

我正在尝试这个：

```
DELIMITER // 
CREATE PROCEDURE my_insert(IN fname VARCHAR(50),IN lname VARCHAR(50))

BEGIN

SET @fname=fname; 
SET @lname=lname;

PREPARE STMT FROM 
"INSERT INTO users(fname,lname) VALUES (?,?)";

EXECUTE STMT USING @fname,@lname; 

END 
```

我收到此错误： **#1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'my_insert(IN fname VARCHAR(50),IN lname VARCHAR(50)) BEGIN SET @fname=fn' 附近使用正确的语法**

希望提前帮助和感谢:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:05:00.110

您使用 " 而不是 ' 。那是您的查询中的错误。下面给出了正确的查询

```
DELIMITER // 
CREATE PROCEDURE my_insert(IN fname VARCHAR(50),IN lname VARCHAR(50))

BEGIN

SET @fname=fname; 
SET @lname=lname;

PREPARE STMT FROM 
'INSERT INTO users(fname,lname) VALUES (?,?)';

EXECUTE STMT USING @fname,@lname; 

END // 
```

或者你可以简单地使用

```
DELIMITER //
CREATE PROCEDURE my_insert(IN fname VARCHAR(50),IN lname VARCHAR(50))

BEGIN
INSERT INTO users(`fname`,`lname`) VALUES (fname,lname);

END // 
```

# c - 从 NTP 服务器（Cortex M3、Stellaris LM3S6965）获取时间

> ID：14137528
> 
> 赞同：1
> 
> 时间：2013-01-03T10:58:34.660
> 
> 标签：c, ntp, cortex-m3

我正在使用 Cortex M3、Stellaris® LM3S6965 评估板。我想在我的 oled 屏幕上显示 NTP 服务器的时间。

我搜索并发现服务器 NTP 服务器向您发送时间戳。这些时间戳存储为自 1900 年 1 月 1 日以来的秒数。32 位表示秒数，32 位表示秒的小数部分。

但是如何从 NTP 服务器获取时间戳？（例如：[http](http://time.windows.com/) ://time.windows.com/ ）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:05:09.600

您正在寻找的是 NTP（网络时间协议）。您应该能够在 C 中找到该协议的库。

如果没有可用的库，您将不得不自己实现它。更多信息：[http ://en.wikipedia.org/wiki/Network_Time_Protocol](http://en.wikipedia.org/wiki/Network_Time_Protocol)

请注意对 RFC 的引用。

我还在 C 中找到了一个小实现：[http](http://www.abnormal.com/~thogard/ntp/ntpdate.c) ://www.abnormal.com/~thogard/ntp/ntpdate.c 在[http://www.abnormal.com/~thogard/ntp/上找到](http://www.abnormal.com/~thogard/ntp/)

# javascript - 从弹出窗口打开新的浏览器窗口

> ID：14137529
> 
> 赞同：2
> 
> 时间：2013-01-03T10:58:35.517
> 
> 标签：javascript, html, browser, popup

我有一个网页 (A) 打开一个弹出窗口 (P)。

在 P 中，我有一个链接，它必须在原始浏览器实例（具有页面 A 的那个）中打开一个新的 _blank 目标页面。

我怎样才能做到这一点？我已经尝试了一些基于`window.open()`但我不确定如何应用它们的解决方案。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:01:41.003

您可以尝试`window.opener.location.href`将父窗口位置设置为要在父窗口中打开的新 url。

# ruby - Ruby 文件操作

> ID：14137536
> 
> 赞同：-4
> 
> 时间：2013-01-03T10:59:13.507
> 
> 标签：ruby

我有一个要求，比如我有一个文件，其中的行如下

```
424: Josh
1273: Sara Keith
141: Shefali
990: Lang
849: Broc Benedict
566: Victoria 
283: Karla Mateos 
```

（身份证和姓名）。当我在参数中获得名称时，我应该打开并删除匹配行。是否可以打开文件和 grep 匹配行并以简单的方式将其删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:24:06.893

`File`rub 中有一个类可以帮助您进行文件操作。类似的问题在这里得到解答。

[如何在文件文本中搜索模式并将其替换为给定值](https://stackoverflow.com/questions/1274605/ruby-search-file-text-for-a-pattern-and-replace-it-with-a-given-value)

# jquery-ui - onclick 使用 jquery 更改图像源

> ID：14137537
> 
> 赞同：0
> 
> 时间：2013-01-03T10:59:17.990
> 
> 标签：jquery-ui, jquery

当我单击图像时，它会更改为备用版本 ( `data-other-src`)。

当我单击图像时，我还想将所有其他图像重置为它们的`src`. 我怎样才能做到这一点？

到目前为止，这是我的代码：

```
<script>
$(".imageOnOff").live('click', function () {
$(this).attr({src: $(this).attr('data-other-src'),'data-other-src': $(this).attr('src') 
})
   });
 </script>

 <img class="imageOnOff" data-other-src="images/color/1.png" src="images/color/1-1.png"      width="16" height="16">
 <img class="imageOnOff" data-other-src="images/color/2-2.png" src="images/color/2.png"   width="16" height="16">
 <img class="imageOnOff" data-other-src="images/color/3-3.png" src="images/color/3.png" width="16" height="16">
 <img class="imageOnOff" data-other-src="images/color/4-4.png" src="images/color/4.png" width="16" height="16"></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:02:17.243

与其将 data-other-src 更改为 src，不如存储原始 src ：

```
$(".imageOnOff").live('click', function () {
  $(".imageOnOff[original-src]").each(function(){
       this.src = $(this).attr('original-src');
       $(this).removeAttr('original-src');
  });
  $(this).attr('original-src', this.src);
  this.src = $(this).data('other-src');
})​ 
```

[示范](http://jsfiddle.net/69bYw/)

# typescript - 来自 .NET 类的 TypeScript 定义文件

> ID：14137538
> 
> 赞同：0
> 
> 时间：2013-01-03T10:59:19.447
> 
> 标签：typescript

任何人都知道将 C# / .NET 类转换为 TypeScript 定义文件的工具，也许是通过使用反射？

我正在使用 json.net 对 C# 类进行编码，因此拥有强类型的 def 会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T10:09:14.260

有一个通过 nuget 可用的插件：http: [//type.litesolutions.net/](http://type.litesolutions.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:16:33.227

我没有关于任何官方的事情，但这里有一个似乎做类似事情的项目：[https ://typescript.codeplex.com/discussions/406685](https://typescript.codeplex.com/discussions/406685)

# c# - 可见性面板 - 无法设置

> ID：14137539
> 
> 赞同：1
> 
> 时间：2013-01-03T10:59:21.283
> 
> 标签：c#, asp.net, .net, panel

我有一个非常奇怪的情况：我的 aspx 代码中有 asp:panel，在后面的代码中我尝试设置它的可见性。这是代码

```
divDiscountCodeCongratulation.Visible = true; 
```

aspx 中的代码

```
<asp:Panel ID="pan1" runat="server">
    <asp:Panel class="sbox-gratulacje" ID="divDiscountCodeCongratulation" runat="server" >
        <asp:Literal ID="LitDiscountCodeCongratulation" runat="server" Text="Gratulacje "></asp:Literal>
        <asp:Literal ID="litDiscountInfoFromCode" runat="server"></asp:Literal>       
        <asp:LinkButton ID="btnDiscountCodeCancel" runat="server" Text="Cofnij" OnClick="btnDiscountCodeCancel_Click" />
    </asp:Panel>
</asp:Panel> 
```

我在这一行上放了断点，就在它之后我仍然有错误值（默认值）。同样的情况是当我尝试在即时窗口中设置它时。

有谁知道为什么会这样？？

* * *

“divDiscountCodeCongratulation”的所有父母都必须将 Visibility 设置为 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:07:15.847

你确定**pan1**是可见的吗？如果它是不可见的，那是预期的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:01:41.317

我使用了您的 aspx 代码，并且在 page_load 后面的代码中我只是输入了： divDiscountCodeCongratulation.Visible = false;

并且面板可见性设置为 false 即 divDiscountCodeCongratulation 不可见。

> 面板可见性的默认值为 True 而不是 False，正如您提到的默认值为 False。您可以检查是否在 cssclass *sbox-gratulacje*中设置了面板的可见性。

***另外，请检查下面的示例，该示例将隐藏链接按钮 1 上的面板单击并显示链接按钮 2 上的面板单击***

**ASPX 代码：**

```
<asp:LinkButton ID="LinkButton1" runat="server" onclick="LinkButton1_Click">LinkButton1</asp:LinkButton>
<asp:LinkButton
    ID="LinkButton2" runat="server" onclick="LinkButton2_Click">LinkButton2</asp:LinkButton> 
```

主面板子面板

**代码背后：** 受保护的无效LinkBut​​ton1_Click（对象发送者，EventArgs e）{divDiscountCodeCongratulation.Visible = false; } protected void LinkBut​​ton2_Click(object sender, EventArgs e) { divDiscountCodeCongratulation.Visible = true; }

# php - Firefox 中父窗口 URL 的元刷新问题

> ID：14137541
> 
> 赞同：0
> 
> 时间：2013-01-03T10:59:32.003
> 
> 标签：php, javascript, session, logout

在我的网站中，标题包含 twitter 的注销部分。这些注销功能中使用了三个文件。当用户单击注销时，它会打开 twitter 注销 URL，父窗口会刷新并转到 chrome 中的索引页面。

但是在Firefox中父窗口不会刷新。即使在会话销毁后，它也会显示注销，如果我们刷新页面手册，它会显示登录。任何人都可以帮我解决这个问题

**头文件.php**

```
<li><a href="javascript:;"  onclick="opennewwindow(); clearsession();">Logout</a></li>

function opennewwindow()
{
    var mywin=window.open('twitlogout.php','chindhu','width=550,height=350');
}

function clearsession()
{
var req = GetXmlHttpObject();
req.onreadystatechange = function() {
if(req.readyState == 1) {
document.getElementById('status').innerHTML='<img src="images/ajax-loader.gif"/>';
}   
 if (req.readyState == 4 ) {
     if( req.status == 200) {
document.getElementById('status').innerHTML=req.responseText;
} 
else
{
alert("There was a problem while using XMLHTTP:\n" + req.statusText);
}
 } 
}  
req.open("GET", "clearsession.php", true);
req.send(null);
}

function GetXmlHttpObject()
{
    if (window.XMLHttpRequest)
      {
      // code for IE7+, Firefox, Chrome, Opera, Safari
      return new XMLHttpRequest();
      }
    if (window.ActiveXObject)
      {
      // code for IE6, IE5
      return new ActiveXObject("Microsoft.XMLHTTP");
      }
    return null;
} 
```

**twitlogout.php**

```
<?php
include("header.php");
header("Location:https://twitter.com/#!/logout"); 
?> 
```

**清除会话.php**

```
<?php include("config/dbconfig.php");?> 
<meta http-equiv="refresh" content="2;url=<?php echo URLPATH;?>">

<?php
    session_start();
    unset($_SESSION['id']);
    unset($_SESSION['username']);
    unset($_SESSION['oauth_provider']);
    session_destroy();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:24:14.250

您正在将 的结果添加`clearsession.php`到状态元素。元属性刷新需要在标题中，所以这可能是它从未调用过的原因。

强制 javascript 重新加载页面的最佳方法是使用`window.location.reload();`. 您可以将其放在以下位置：

```
if( req.status == 200) {
  document.getElementById('status').innerHTML=req.responseText;
  setTimeout(window.location.reload, 2000); //reload after two seconds
} 
```

我在重新加载前使用了两秒的超时时间，但您可以将其设置为您想要的任何值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:31:01.983

我们也可以在函数中添加“window.location='our file'”。但缺点是在函数中调用 clearsession.php 时会显示 URL

```
function clearsession()
    {

            window.location="clearsession.php";

    } 
```

# django - 用户单击 Django 中的按钮时获取 start_date？

> ID：14137543
> 
> 赞同：1
> 
> 时间：2013-01-03T10:59:36.010
> 
> 标签：django

我正在尝试在 Django 中获取 start_date 和 end_date（处理完成后）。我有一个简单的表格。当用户单击时`Submit`，我想获取 start_date 并将该值插入数据库。处理完成后，我想获取 end_date 并将该值插入数据库。我已经在 Django 中设置了数据库。处理如下：

```
command = subprocess.Popen(['sshpass', '-p', password, 'rsync', '--recursive', source],
                           stdout=subprocess.PIPE) 
```

我如何知道命令执行何时完成并记录 end_date？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:04:46.423

You are looking for [`Popen.poll()`](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.poll). It will return None while the Popen is still executing. By example:

```
import subprocess
from datetime import datetime

d1 = datetime.now()
c = subprocess.Popen (["find", "/home/whatever", "-name","eclipse.ini"])

while c.poll() is None:
    pass

deltatime = datetime.now() - d1
print deltatime.total_seconds() 
```

Be careful with the `while` loop. Your program will be stuck in it until the Popen process ends. Maybe you want to launch a thread to avoid that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:04:56.540

如果您想以优雅的方式进行操作，您应该尝试使用异步任务系统（如[celery](http://docs.celeryproject.org/en/latest/django/index.html)），并在 César García 提供的任务中执行 bash 进程。

另一种选择是执行如下操作：

```
subprocess.Popen(['sshpass ... && curl -X GET IP:PORT/some/internal/view/%d/' % task_id], shell=True) 
```

完成时间可以插入到 django 视图内的数据库中。

# c++ - 将 C++ 中的两个向量与模板类进行比较

> ID：14137544
> 
> 赞同：-1
> 
> 时间：2013-01-03T10:59:36.600
> 
> 标签：c++, class, templates, vector, memcpy

我想使用模板类比较两个向量。

```
vector<Msg> gExpMsg;
vector<Msg> gRevcMsg; 
```

我必须使用`template class;`和比较 2`vector`使用`memcmp`. 您能否指导我编写 C++ 代码。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:05:39.443

您可以使用 STL 相等或不匹配算法来比较两个容器。在这些算法中，您可以根据需要提供自己的谓词函子。以下是您可以找到示例代码 [不匹配算法示例的链接](http://www.codecogs.com/reference/computing/stl/algorithms/nonmodifying/mismatch.php)

mismatch 返回保存两个容器之间差异的对值（在您的情况下为向量）这是示例中的一些片段以供快速查看

```
//find first mismatch
pair<vector<int>::iterator,list<int>::iterator> values;
values = mismatch (coll1.begin(), coll1.end(), //first range
                      coll2.begin());    //second range
if (values.first == coll1.end()) 
  cout <<"no mismatch"<<endl;     
else
  cout <<"first mismatch: "<<*values.first<<" and "<<*values.second<<endl; 
```

带谓词

```
values = mismatch (coll1.begin(), coll1.end(), //first range
                       col12\. begin(),   //second range
                       less_equal<int>() )  //criterion
if (values.first == coll1.end()) 
  cout <<"always less-or-equal"<<endl;
else 
  cout <<"not less-or-equal: "<<*values.first<<" and "          
                            <<*values.second<<endl; 
```

# ios - 选择 iPhone 时如何更改绘图符号的颜色

> ID：14137546
> 
> 赞同：1
> 
> 时间：2013-01-03T10:59:46.963
> 
> 标签：ios, select, plot, highlight, symbols

我在这个网站上发现了类似的问题，我尝试了一些方法，但我没有成功。

我希望绘图符号在选择时更改其颜色，以便准确查看选择了哪个符号。我查看了 CPTTestApp（在 Core Plot 示例文件夹中），查看示例，从我在此站点上看到的内容来看，我必须使用绘图参数，以确定是否返回自定义符号。但我不知道这个绘图参数是什么。

如何检测选择了哪个符号，以便更改它的颜色？通过使用索引？

很抱歉对如何使用这个方法有点困惑。我做了研究，我会继续，但也许有人有一个想法。

我找到了一个方法 symbolForScatterPlot 应该给我预期的结果，但我不知道 selectedIndex 是什么变量，我应该如何声明它以及在哪里使用它。我从这里采用了这个方法[为不同的点更改 CPScatterPlot 的线条样式，](https://stackoverflow.com/questions/6479350/change-line-style-of-cpscatterplot-for-different-points) 它看起来像这样：

```
 - (CPPlotSymbol *)symbolForScatterPlot:(CPScatterPlot *)plot recordIndex:(NSUInteger)index
{   
CPMutableLineStyle *symbolLineStyle = [CPMutableLineStyle lineStyle];
symbolLineStyle.lineColor = [CPColor blackColor];
CPPlotSymbol *plotSymbol = [CPPlotSymbol ellipsePlotSymbol];
plotSymbol.lineStyle = symbolLineStyle;

if (_selectedIndex != NSNotFound && index == _selectedIndex) 
{
    plotSymbol.symbolType = CPPlotSymbolTypeDiamond;
    plotSymbol.size = CGSizeMake(12, 12);
    plotSymbol.fill = [CPFill fillWithColor:[CPColor redColor]];
}
else
{
    plotSymbol.symbolType = CPPlotSymbolTypeEllipse 
    plotSymbol.size = CGSizeMake(8, 8);
    plotSymbol.fill = [CPFill fillWithColor:[CPColor greenColor]];  
}
return plotSymbol;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T14:33:24.300

看起来您的问题分为两部分：首先找到所选点，然后更改它的颜色。

为了定位一个选定的点，您必须为您的 CPTScatterPlot 实例设置一个委托以检测触摸事件。（这里 currentPlot 是我的 CPTScatterPlot 实例）

```
currentPlot.delegate                        = self;
currentPlot.plotSymbolMarginForHitDetection = 10.0f; 
```

第二行为触摸事件的检测启用了一定的余量。这个值是任意选择的，在我的例子中 10 看起来不错。

然后，您可以添加方法 plotSymbolWasSelectedAtRecordIndex，一旦选择了一个点，就会调用该方法：index 参数是所选点的索引。

```
-(void)scatterPlot:(CPTScatterPlot *)plot plotSymbolWasSelectedAtRecordIndex:(NSUInteger)index
{
    selectedIndex = index;

    // do some other stuff, adding a label for example

    [plot reloadData]; 
} 
```

由于选择的点现在已定位，您可以使用您链接的功能（不要忘记设置您的 CPTScatterPlot 实例的数据源），重新绘制绘图。当您的 CPTScatterPlot 实例重新加载时，将为您的绘图的每个索引调用此函数。诀窍是，如我的代码示例所示，当您选择一个点时调用 reloadData。

# mysql - 如何解释 MySQL EXPLAIN 的输出？

> ID：14137549
> 
> 赞同：20
> 
> 时间：2013-01-03T10:59:51.190
> 
> 标签：mysql, query-optimization, explain

我想从中选择列的`text`内容`entrytable`。

```
EXPLAIN SELECT text
FROM entrytable
WHERE user = 'username' &&
`status` = '1' && (
    `status_spam_user` = 'no_spam'
    || (
        `status_spam_user` = 'neutral' &&
        `status_spam_system` = 'neutral'
    )
)
ORDER BY datum DESC
LIMIT 6430 , 10 
```

该表具有三个索引：

*   index_user（用户）
*   index_datum（基准）
*   index_status_mit_spam (status, status_spam_user, status_spam_system)

解释结果是：

```
id  select_type     table       type    possible_keys                       key         key_len     ref     rows    Extra
1   SIMPLE          entrytable  ref     index_user,index_status_mit_spam    index_user  32          const   7800    Using where; Using filesort 
```

*   `possible_keys`MySQL 可能想要使用`keys`的索引和 MySQL 实际使用的索引吗？
*   为什么`index_status_mit_spam`不使用索引？在查询中，列的顺序与索引中的相同，...
*   为什么索引`index_datum`不用于`ORDER BY`?
*   如何优化我的表索引或查询？（上面的查询最多需要 3 秒，表中有大约一百万个条目）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T11:22:34.933

回答您的问题：

*   `possible_keys`MySQL 可能想要使用的索引是`keys`MySQL 实际使用的索引吗？是的，这是正确的。

*   为什么`index_status_mit_spam`不使用索引？在查询中，列的顺序与索引中的顺序相同。SQL*使用表索引的统计信息*来确定要使用的索引。select 语句中的*字段顺序对*使用哪个索引没有影响。围绕索引的统计信息包括索引的唯一性等信息。可能会使用更多的唯一索引。在此处阅读有关此内容的更多信息： http: [//dev.mysql.com/doc/innodb/1.1/en/innodb-other-changes-statistics-estimation.html](http://dev.mysql.com/doc/innodb/1.1/en/innodb-other-changes-statistics-estimation.html)或此处：[http ://dev.mysql.com/doc/ refman/5.0/en//myisam-index-statistics.html](http://dev.mysql.com/doc/refman/5.0/en//myisam-index-statistics.html)。这些因素决定了 MySQL 如何*选择要使用的一个索引*。它只会使用*一个索引*。

*   为什么索引`index_datum`不用于`ORDER BY`? MySQL 在查询期间只会使用一个索引而不是两个，因为使用第二个索引会进一步减慢查询速度。读取索引不是读取表格。这关系到查询的运行效率。以下是可以解释一些概念的答案：[https://dba.stackexchange.com/questions/18528/performance-difference-between-clustered-and-non-clustered-index/18531#18531](https://dba.stackexchange.com/questions/18528/performance-difference-between-clustered-and-non-clustered-index/18531#18531)或 [向 MySQL 查询添加限制子句会减慢它显着下降](https://stackoverflow.com/questions/13846691/adding-limit-clause-to-mysql-query-slows-it-down-dramatically/13874086#13874086) 或 [MySQL 索引以及何时对它们进行分组](https://stackoverflow.com/questions/10328343/mysql-indexes-and-when-to-group-them/10329106#10329106)。这些答案有很多细节，可以帮助您了解 MySQL 索引。

*   如何优化我的表索引或查询？（上面的查询最多需要 3 秒，表中有大约一百万个条目）。好吧，这里有一个文件排序可能会减慢您的速度。可能是表有太多索引，而 MySQL 选择了错误的索引。

您需要了解索引会加快读取速度并减慢对表的写入速度。所以仅仅添加索引并不总是一个好主意。上述答案和提示应该可以帮助您获得扎实的理解。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T11:25:46.310

*   `possible_keys`表示表的所有索引（键或索引列）
*   MySQL 优化器决定执行查询的最佳方式，它可以使用任何索引（不是必需的主键），或者不使用
*   要强制 MySQL 使用或忽略 possible_keys 列中列出的索引，请在查询中 使用`FORCE INDEX`、`USE INDEX`或`IGNORE INDEX`
*   检查此链接 - [http://dev.mysql.com/doc/refman/5.1/en/index-hints.html](http://dev.mysql.com/doc/refman/5.1/en/index-hints.html)。

    > 您可以通过向提示添加 FOR 子句来指定索引提示的范围。这为优化器为查询处理的各个阶段选择执行计划提供了更细粒度的控制。要仅影响 MySQL 决定如何在表中查找行以及如何处理连接时使用的索引，请使用 FOR JOIN。要影响对行进行排序或分组的索引使用，请使用 FOR ORDER BY 或 FOR GROUP BY。（但是，如果表有覆盖索引并且它用于访问表，优化器将忽略禁用该索引的 IGNORE INDEX FOR {ORDER BY|GROUP BY} 提示。）

*   尝试强制使用不同的索引 - 确定检查此链接 - [MySQL `FORCE INDEX` 用例？](https://stackoverflow.com/questions/7764366/mysql-force-index-use-cases)

*   了解 EXPLAIN 输出格式 - [http://dev.mysql.com/doc/refman/5.1/en/explain-output.html](http://dev.mysql.com/doc/refman/5.1/en/explain-output.html)

# ant - 如何运行使用 ant 的 jmockit 的 swtbot 测试？

> ID：14137550
> 
> 赞同：1
> 
> 时间：2013-01-03T10:59:54.783
> 
> 标签：ant, osgi, jmockit

我们有一个使用 Eclipse RCP 创建的项目，我们正在使用 SWTBot ( [http://wiki.eclipse.org/SWTBot](http://wiki.eclipse.org/SWTBot) ) 对其进行 GUI 测试。

现在我们想自动化这个测试运行。现在我们有运行所有构建的 ant 任务，所以我们希望 ant 也运行我们的 GUI 测试（根据[http://wiki.eclipse.org/SWTBot/Ant#Ant](http://wiki.eclipse.org/SWTBot/Ant#Ant)）。

一切都很好，我们创建了一个 ant 任务，它使用我们导出的产品启动 OSGi 框架，启动 JUnit 无头执行，定位测试插件和测试类并运行测试套件 - 但它失败了。

它失败的原因是我们在测试中使用了 jmockit。根据指南（[http://jmockit.googlecode.com/svn/trunk/www/gettingStarted.html](http://jmockit.googlecode.com/svn/trunk/www/gettingStarted.html)），我们能够运行此测试以运行 Eclipse（通过将 jmockit 添加到全局类路径并将 -javaagent:jmockit.jar 添加到测试运行配置中的 VM 参数）但在 ant 任务中这样做（将 jvmarg 和 jmockit 添加到类路径）失败。

在测试运行期间使用此配置，我们得到以下异常

```
mockit/MockUp
java.lang.NoClassDefFoundError: mockit/MockUp
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
...
Caused by: java.lang.ClassNotFoundException: mockit.MockUp
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:494)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:410)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:398)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:105)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

之后我们 osgi-fied jmockit 并将其添加到我们的产品中，导致以下警告：

```
WARNING: JMockit was initialized on demand, which may cause certain tests to fail;
please check the documentation for better ways to get it initialized. 
```

做了一点挖掘，我发现以下邮件交换：[http](http://code.google.com/p/jmockit/issues/detail?id=203) ://code.google.com/p/jmockit/issues/detail ?id=203 和 rliesenf...@gmail.com 的最后评论说：

> 考虑到在这方面取得真正进展的异常困难（至少对我而言），以及我必须为此努力的一点动力（“Eclipse JUnit 插件测试”毕竟是一个小的“利基”环境），我要结束了现在这个。此外，在工具包的其他领域还有*很多*工作要做（即使不考虑 JMockit 2），所以很难证明花在这类东西上的时间是合理的。

我希望从那时起这个问题得到解决，或者至少找到了一些解决方法。

有人遇到过类似的问题并想分享他们的解决方案/建议吗？

# asp.net-mvc-3 - Visual Studio 2010 - 使用本地 IIS Web 服务器

> ID：14137551
> 
> 赞同：0
> 
> 时间：2013-01-03T10:59:59.213
> 
> 标签：asp.net-mvc-3, iis-7

我正在尝试在 iis 7 上设置我的网站，到目前为止，我已经完成了以下操作：

*   安装 iis7 和所有主要组件。
*   在 iis 中，我创建了一个新网站。
*   通过 Visual Studio，我创建了一个新的虚拟目录。

![包含文件的虚拟目录](../Images/1953acf2183d8621a479c90d39f468ae.png)

![Visual Studio 中的虚拟目录](../Images/71e78806383652b55fe7e627e224c8bd.png)

我启用了目录浏览，因为我的问题是我不确定路由如何与 iis 一起工作。在 Visual Studio 开发服务器中，它无需指定特定路径即可转到默认页面。

我唯一的理论是更改我的 global.asax 文件，但我仍然不确定该怎么做，

![目录](../Images/0aa4a74b6f35b85d3ccef75cca8e1ad9.png)

![404](../Images/c2f0beac984eb6cbb62f773737c231e9.png)

![Visual Studio 开发服务器有效！](../Images/f69846980c94a46ab3adce6b997df40b.png)

**全球阿萨克斯**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Web.Routing;

namespace UserManager
{
    // Note: For instructions on enabling IIS6 or IIS7 classic mode, 
    // visit http://go.microsoft.com/?LinkId=9394801

    public class MvcApplication : System.Web.HttpApplication
    {
        public static void RegisterGlobalFilters(GlobalFilterCollection filters)
        {
            filters.Add(new HandleErrorAttribute());
        }

        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
            //routes.IgnoreRoute("/}");

            //routes.MapRoute(
            //    "Default", // Route name
            //    "{controller}/{action}/{id}", // URL with parameters
            //    new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            //);

            routes.MapRoute(
              "Default", // Route name
              "{controller}/{action}/{id}", // URL with parameters
              new { controller = "UserManager", action = "Index", id = UrlParameter.Optional } // Parameter defaults
          );

            ///* User Manager routing */
            //routes.MapRoute(
            //    "UserManager", // Route name
            //    "{controller}/{action}/{id}", // URL with parameters
            //    new { Controller = "UserManager", action = "Index", id = UrlParameter.Optional }
            //    );

            routes.MapRoute(
                "UserManagerCreateUser", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { Controller = "UserManager", action = "CreateUser", id = UrlParameter.Optional }
                );

            routes.MapRoute(
               "UserManagerLookUpGroupName", // Route name
               "{controller}/{action}/{id}", // URL with parameters
               new { Controller = "UserManager", action = "LookUpGroupName", id = UrlParameter.Optional }
               );

            routes.MapRoute(
               "UserManagershowError", // Route name
               "UserManager/showError/sErrorMessage", // URL with parameters
               new { Controller = "UserManager", action = "showError", UrlParameter.Optional}
               );

            /* User Status routing */
            routes.MapRoute(
                "UserStatus", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { Controller = "UserStatus", action = "Index", id = UrlParameter.Optional }
                );

            /* Email Distribution list routing */
            routes.MapRoute(
                "EmailDistributionList", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { Controller = "EmailDistributionList", action = "Index", id = UrlParameter.Optional }
                );

            /* Email User Details routing */
            routes.MapRoute(
                "EmailUserDetails", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { Controller = "EmailUserDetails", action = "Index", id = UrlParameter.Optional }
                );
        }

        protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();
            RegisterGlobalFilters(GlobalFilters.Filters);
            RegisterRoutes(RouteTable.Routes);
        }
    }
} 
```

**概括**

尝试在 IIS7 上设置 MVC 3 Intranet 站点。不知道路由请求是否错误，因为它找不到页面。屏幕截图在 Visual Studio 开发服务器中显示它是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:56:31.083

您不想启用目录浏览。

尝试在 IIS 中添加新站点，而不是虚拟目录。当您创建它时，将端口分配给喜欢 9000 然后您可以访问您的站点`http://localhost:9000/`

接下来，单击应用程序池。右键单击新站点并转到基本设置。确保 .NET 框架的版本是 V4 而不是 v2，并且托管管道模式是集成而不是经典。

此外，在过渡到 IIS 之前，请确保该站点与 Visual Studio 开发服务器一起正常运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:48:59.293

您的路由应该没有任何问题，检查您的站点是否实际使用框架 4.0 检查托管管道是否设置为集成，如果您的部署服务器与开发服务器不同，请确保在您的部署中安装了 mvc 3.0服务器

# javascript - 打开新标签而不将焦点留在上一个标签上

> ID：14137553
> 
> 赞同：1
> 
> 时间：2013-01-03T11:00:01.430
> 
> 标签：javascript, jquery, html

我想在单击时打开一个新选项卡，但我希望上一个选项卡始终处于活动状态，子选项卡默认不活动

我的代码是-

```
 <a onclick="window.open(URL); self.focus();>Click</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:01:01.610

此行为取决于浏览器，无法由 Javascript 控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:03:25.860

您可以编写新窗口的代码 onload 将焦点返回给开启者：

```
window.opener.focus(); 
```

注意 window.open 打开一个新窗口而不是一个新选项卡，`target=_blank`打开一个新选项卡（根据浏览器设置可选）

# python - 在 try 块内获取

> ID：14137554
> 
> 赞同：2
> 
> 时间：2013-01-03T11:00:03.970
> 
> 标签：python, locks

我正在编写一本开源的中级 Python 书籍，并阅读了许多 PEP。在[PEP310](http://www.python.org/dev/peps/pep-0310/)中，有一个关于“with”语句的旧提案。这个提议最终被拒绝了，但下面的语句让我印象深刻：“另一个常见的错误是在 try 块中编写“获取”调用，如果获取失败，它会错误地释放锁。

有人可以详细说明将获取内容放在尝试中如何改变事情吗？据我了解，Python 中的获取调用只是返回一个布尔值，指示是否成功获取了锁，那么将它放在 try 块中会如何改变事情呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T11:04:50.170

我相信这就是它所指的：

```
try:
    lock.acquire()
finally:
    lock.release() 
```

如果`acquire()`引发异常，`release()`将被调用，即使`acquire()`没有成功。调用`release()`当前未锁定的锁可能会引发另一个异常，即仅与问题根源间接相关的异常。

编写块的正确方法是使用`with`, 或：

```
lock.acquire()
try:
    ...
finally:
    lock.release() 
```

无论文档是否建议调用引发异常，您都应该始终编写代码以应对异常。没有什么可以阻止未来行为的改变。

# android - Android：如何显示特殊字符或字母字符键盘？

> ID：14137559
> 
> 赞同：0
> 
> 时间：2013-01-03T11:00:30.347
> 
> 标签：android, special-characters, android-edittext, android-keypad

我想在 Edittext 获得焦点后立即显示特殊字符键盘...请帮助

并且还告诉我如何在 Edittext 获得焦点后立即显示 Alpha 字符键盘。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:46:26.343

您无法使用任何 i/p 文本组合获得这种键盘。您可以为此创建一个自定义键盘。您可以参考：[如何制作 Android 自定义键盘？](https://stackoverflow.com/questions/9577304/how-to-make-a-android-custom-keyboard)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:51:10.120

我认为不可能只显示特殊字符的键盘。您可以更改 EditText 的 inputType 属性以更改键盘类型并使用它。[这些](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ainputType)是可用的选项。但是这些选项都没有给你一个特殊字符的键盘。

```
<EditText 
 ......
 .......
 android:inputType="" //Play with it
 .......
 /> 
```

# c# - 是否可以将silverlight和visual c sharp windows forms作为单个应用程序运行

> ID：14137561
> 
> 赞同：-3
> 
> 时间：2013-01-03T11:00:32.627
> 
> 标签：c#, silverlight-4.0

我想开发一个支持Web操作以及串口和Tcp操作的应用程序。使用哪个平台？

或者是否可以将应用程序添加为对其他应用程序的引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:03:03.017

我在这里的默认答案是“否”。您可能可以将其中的大部分开发为面向 .NET Framework 和 Silverlight 的“可移植类库”，但我怀疑您会发现您想做的所有事情都没有包含在 .NET Framework 和银光。

“可移植类库”的全部目的是它确实可以作为来自多个框架的引用添加，但限制是您仅限于*严格的交集- 即您选择的***所有**框架中存在的功能PCL 目标框架。您添加的目标框架越多，交叉点通常会变得越小。您将无法使用 PCL 神奇地将特定于 winforms 的功能添加到 Silverlight 应用程序，或将特定于 Silverlight 的功能添加到 winform。

# linux - 如何更新 premake 以便我可以编译项目？

> ID：14137563
> 
> 赞同：2
> 
> 时间：2013-01-03T11:00:36.340
> 
> 标签：linux, fedora, premake

我正在尝试在运行 Fedora 17 的新计算机上构建库 Box2D。当我尝试构建 Box2D 时，出现错误

```
premake4.lua:26: attempt to call global 'vpaths' (a nil value) 
```

一些谷歌搜索表明我需要使用更新版本的 premake。我去了[premake 网站](http://industriousone.com/premake/download)尝试下载一个可执行文件（Linux 的 4.4 beta 版本），但是运行他们网站上的版本却给了我这个错误：

```
/home/alex/Downloads/premake4: /lib/ld-linux.so.2: bad ELF interpreter: No such file or directory 
```

获取正确版本并运行它的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T18:45:41.343

获取下载页面上可用的源代码包并为您的系统构建它？

```
$ cd premake-4.4-beta4/build/gmake.unix
$ make
$ cd ../../bin/release
$ ./premake4 --version
premake4 (Premake Build Script Generator) 4.4-beta4 
```

# iphone - 在iphone的录像机中显示剩余时间

> ID：14137565
> 
> 赞同：3
> 
> 时间：2013-01-03T11:00:40.083
> 
> 标签：iphone, objective-c, uiimagepickercontroller, video-recording

我想在录像机上显示剩余时间。目前它正在显示录制时间。我怎样才能？

我的代码是：

```
UIImagePickerController*  Videopicker1 = [[UIImagePickerController alloc] init];
Videopicker1.delegate = self;
Videopicker1.sourceType = UIImagePickerControllerSourceTypeCamera;
Videopicker1.showsCameraControls = YES;
Videopicker1.videoQuality=UIImagePickerControllerQualityTypeLow;
Videopicker1.mediaTypes = [NSArray arrayWithObject:(NSString *)kUTTypeMovie]; // kUTTypeMovie is actually an NSString.
Videopicker1.videoMaximumDuration = 30.0f; // limits video length to 30 seconds.
[self presentModalViewController:Videopicker1 animated:YES]; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:45:50.507

在您的 VC.h 文件中

```
@interface VideoCaptureVC_iPhone : UIViewController
<UIActionSheetDelegate, UIImagePickerControllerDelegate, UINavigationControllerDelegate>
{
    UIImagePickerController *picker;
    NSTimer *videoTimer;

}

@property (nonatomic, retain) NSTimer *videoTimer; 
```

在你的 vc.m 文件上

```
- (void)pickerCameraSnap:(id)sender{
    NSLog(@"start camera capture and timer");
    [picker startVideoCapture];
    self.videoTimer =  [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(changeValue) userInfo:nil repeats:YES];
} 
```

根据您的需要进行计算并在适当的位置更改文本@“TimeRemaining”我已经为横向视图旋转了文本！

```
-(void)changeValue{
    UILabel *textNameLabel = [[UILabel alloc] initWithFrame:CGRectMake(30, 30, 100, 100)];
    textNameLabel.center = CGPointMake(30,285);
    textNameLabel.backgroundColor = [UIColor redColor];
    textNameLabel.text = @"TimeRemaining";
    textNameLabel.textColor = [UIColor whiteColor];
    CGAffineTransform transformRotate = CGAffineTransformMakeRotation((M_PI  / 2));
    textNameLabel.transform = transformRotate;

    UIView *myOverlay = [[UIView alloc] initWithFrame:self.view.bounds];
    UIImage *overlayImg = [UIImage imageNamed:@"CameraOverlay"];
    UIImageView *overlayBg;
    overlayBg = [[UIImageView alloc] initWithImage:overlayImg];
    [myOverlay addSubview:overlayBg];
    [myOverlay addSubview:textNameLabel];
    [picker setCameraOverlayView:myOverlay];
} 
```

最后停止计时器

```
- (void)stopCamera:(id)sender{
    NSLog(@"stop camera");
    [self.videoTimer invalidate]; 

    [picker stopVideoCapture];
    [picker setCameraDevice:UIImagePickerControllerCameraDeviceRear];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:26:17.777

由于您设置了视频最长时间，并且您声明您当前正在显示当前持续时间。

```
TimeRemaining = videoMaximumDuration - currentDuration; 
```

# javascript - 敲除 if 语法

> ID：14137571
> 
> 赞同：0
> 
> 时间：2013-01-03T11:01:10.560
> 
> 标签：javascript, if-statement, knockout.js

我有以下带有一些淘汰语法的代码：

```
<h2 data-bind="text: $root[$root.primaryKey]() ? 'Edit' : 'Create New'"></h2> 
```

基于相同的语法`$root[$root.primaryKey]()`，我想对另一个 div 做一个简单的 if 语法检查，这样我就知道要显示什么、可更新的内容或添加新文章的表单。

那么，我怎么能做类似的事情

```
if $root[$root.primaryKey]()
  <div> update content </div>
else 
  <div> new content </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:08:45.183

您可以使用虚拟元素：

```
<!-- ko if: $root[$root.primaryKey]() -->
   <div> update content </div>
<!-- /ko -->

<!-- ko ifnot: $root[$root.primaryKey]() -->
   <div> new content </div>
<!-- /ko --> 
```

# javascript - Javascript：如何四舍五入十进制值？

> ID：14137572
> 
> 赞同：1
> 
> 时间：2013-01-03T11:01:11.377
> 
> 标签：javascript

我有一个值，我怎样才能在 javascript 中`1724.1000000000001`四舍五入这样的值？`1724.11`我需要一个通用函数。请帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:20:10.223

一个简单的方法是：

```
var num = 1724.1000000000001;
num = Math.ceil(num * 100) / 100;
alert(num); //  1724.11 
```

**这个怎么运作：**

Ceil 会将值向上舍入。但是你想有 2 个十进制数字。最好的方法是：

1.  将值乘以 100，
2.  围起来，
3.  除以 100。

现在您有了一个带有 2 位小数的向上舍入值。这就是发生的事情：

```
1724.1000000000001 * 100 = 172410.00000000001
round-up on 172410.00000000001 = 172411
172411 / 100 = 1724.11 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T11:05:15.337

由于问题中的示例要求结果，`1724.11`而不是`1724.1`我会假设您并不严格希望`round`，而是`ceil`：

```
var n = 1724.10000000001;
Math.ceil(n * 100) / 100; // >> 1724.11 
```

如果需要简单的四舍五入到小数点后二位，我们`Math.round`而不是`Math.ceil`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T11:04:53.203

来自[http://www.javascriptkit.com/javatutors/round.shtml](http://www.javascriptkit.com/javatutors/round.shtml)：

```
var original=28.453

1) //round "original" to two decimals
var result=Math.round(original*100)/100  //returns 28.45

2) // round "original" to 1 decimal
var result=Math.round(original*10)/10  //returns 28.5

3) //round 8.111111 to 3 decimals
var result=Math.round(8.111111*1000)/1000  //returns 8.111 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T11:07:12.560

您可以尝试`toFixed`修复为 2 位小数，下面是代码。

```
var num=1724.1999;
alert(num.toFixed(2));​ 
```

结果`1724.20`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T11:05:26.380

要将数字四舍五入到小数点后两位：

```
var num = 1724.1000000000001;
num = Math.ceil(num*100)/100;

// num == 1724.11 
```

或者，试试这个：

```
var num = 1724.1000000000001;
function round(num, decimals){
    var d = Math.pow(10,decimals)
    return Math.ceil(num*d)/d;
}

console.log(round(num,0))
console.log(round(num,1))
console.log(round(num,2))
console.log(round(num,3))
console.log(round(num,4))
// 1725
// 1724.2
// 1724.11
// 1724.101
// 1724.1001 
```

# function - 在方案中使用布尔函数

> ID：14137576
> 
> 赞同：1
> 
> 时间：2013-01-03T11:01:22.013
> 
> 标签：function, scheme, boolean

我想使用“eq”、“null”等“member”函数。但是，我不知道该如何解决？

```
(define (member atm lst)
    (cond
        ((null? lst) #F)
        ((eq? atm (car lst)) #T)
        (else (member atm (cdr lst)))
    )
) 
```

以及我用过的地方；

```
(define (duplicate-entries lst)
    (cond
        ((null? lst) #F)
        ((member? (car lst) (cdr lst))) #T)
        (else duplicate-entries (cdr lst))
    )
) 
```

`member?`不起作用，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:32:31.487

您在使用时定义了`member`函数`member?`。定义`member`为`member?`即`(define (member? atm lst) ... )`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:52:23.593

让我们依次看一下每个过程，首先`member`。请注意，[`member`](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Fprivate%2Flist..rkt%29._member%29%29)Scheme 中已经有一个标准函数，因此定义一个具有相同名称的新过程是个坏主意。以下是现有`member`程序的作用：

> `member`定位 lst 的第一个元素`equal?`to `v`。如果存在这样的元素，则返回以该元素开头的 lst 的尾部。否则，结果为`#f`。

上述过程`equal?`用于测试并返回与您期望的值不同的值。更接近预期的过程，我们有标准[`memq`](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Fprivate%2Flist..rkt%29._memq%29%29)功能：

> `memq`喜欢成员，但使用 eq? 查找元素。

但同样，返回的值不是您所期望的。我建议您像这样定义您的过程，注意我们正在使用`memq`，并且根据约定，名称以 a 结尾`?`表示这是一个布尔过程：

```
(define (member? atm lst)
  (if (memq atm lst) #t #f)) 
```

现在让我们来看看`duplicate-entries`。有几个括号问题（正确缩进代码会显示这一点），并且成员资格过程的名称存在问题（您的过程被调用`member`但您将其调用为`member?`）。您可以使用`member?`我们上面刚刚定义的方法，或者使用`memq`，这两种方法在这种情况下都可以正常工作，因为`memq`如果找到元素将返回一个非假值，这将使条件为真：

```
(define (duplicate-entries lst)
  (cond ((null? lst) #f)
        ((member? (car lst) (cdr lst)) #t)
        (else (duplicate-entries (cdr lst))))) 
```

或者这是推荐的方法 - 如果现有程序可以满足您的需要，则无需重新发明轮子：

```
(define (duplicate-entries lst)
  (cond ((null? lst) #f)
        ((memq (car lst) (cdr lst)) #t)
        (else (duplicate-entries (cdr lst))))) 
```

# algorithm - 算法：查找恰好出现两次的元素

> ID：14137586
> 
> 赞同：0
> 
> 时间：2013-01-03T11:02:03.407
> 
> 标签：algorithm

**输入：**一个未排序的整数数组`A[1..n]`，只有`O(d) :(d < < n)`不同的元素。

**输出：**所有恰好出现两次的元素。

要求两种算法，一种是 with `O(Nd)`，另一种是`O(Nlogd)`。最大数量可能非常大，因此`n`计算频率的大小数组可能不是一个好主意。任何想法？

澄清一下，“只有`O(d) :(d < < n)`不同的元素”是指所有其他元素（不是那些元素`O(d)`）出现两次或更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:06:43.577

`O(nd)`基本上是迭代所有可能的元素（`O(d)`其中的）并计算它重复的次数。每次迭代都是 O(n)

`O(nlogd)`是**建立一个[直方图](http://en.wikipedia.org/wiki/Histogram)**( `map:int->int`)，计算每个元素在单次迭代中出现在列表中的次数。该映射是基于[平衡二叉搜索树](http://en.wikipedia.org/wiki/Self-balancing_binary_search_tree)的，以确保`O(nlogd)`。请注意，如果您使用[哈希映射](http://en.wikipedia.org/wiki/Hash_table)而不是树，则可以将其增加到`O(n)`平均情况（但`O(nd)`最坏情况）

**伪代码**- O(nlogd)：

```
map <- new tree map
for each element x in list:
 if x is in map:
     map.put(x,map.get(x)+1)
 else:
     map.put(x,1)
for each (key,value) in map:
  if value == 2:
     print key 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:15:19.113

## 解决方案一 O(N * d)

1.  找出数组中所有值等于 A[0] 的元素，计算个数。如果数字 == 2，请将其添加到答案中。最后，从数组中擦除所有选定的元素。
2.  擦除所有相同的值元素会导致O(N)复杂度，这一步应该做d次，所以复杂度是O(N * d)。

## 解决方案二 O(N * logd)

使用平衡树计算所有值的频率。因为只有 d 个 dinstinct 值，所以树的大小只有 d，所有对它的操作都会被记录。我们将所有元素插入到树中，并计算树中节点的频率，总复杂度为 O(N * logd)。

```
C++ code:

vector<long long> solve()
{
    vector<long long> ans;
    map<long long, int> cnt;
    for(int i = 0; i < n; ++i)
        cnt[a[i]] += 1; // O(logd)
    for(map<long long, int>::iterator it = cnt.begin(); it != cnt.end(); ++it)
        if(it -> second == 2) ans.push_back(it -> first);
    return ans;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T11:05:24.037

对数组进行排序。O(nlogn) 扫描数组以找到只出现两次的元素。O(n)

重复元素将并排排列。

O(n)+O(nlogn)。

# android - 在Android中按日期对arraylist项目进行分组

> ID：14137588
> 
> 赞同：3
> 
> 时间：2013-01-03T11:02:15.440
> 
> 标签：android, list, date, group-by

在我的程序中，我有一个 Program 类型的数组列表，如下所示：

```
 List<Program> programList= new ArrayList<Program>(); 

public class Program {

public String name;
public String date;

public Program(String name, String date) {
    this.name = name;
    this.date= date;
}
    public String date getDate()
    {
     return date;
     }

    public String date setDate(String date)
    {
     this.date=date;
     }

      public String date getName()
    {
     return name;
     }

    public String date setName(String name)
    {
     this.name=name;
     } 
```

在我的活动中，我将项目添加到列表中

```
 for(int i=0; i < 100; i++)
      {
       Program p= new Program("name","some date");
       programList.add(p):
      } 
```

我想按日期对项目进行分组，比如列表中有一百个项目，其中许多项目具有相同的日期，我想将日期和具有相同日期的项目的新列表配对。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:07:15.520

您可以使用 an`HashMap`并将 用作键`String date`，您可以使用 . 作为值`ArrayList<Program>`。`HashMap.get(key)`如果具有该键的对象不存在，将返回 null。如果它返回 null，您应该创建一个新的 ArraList 并使用该键将其放入 HashMap 中。如果不是，您应该使用返回的对象来添加`Programm` 实例，例如

```
 HashMap<String, ArrayList<Programm>> myProgram = new  HashMap<String, ArrayList<Programm>>() ;
  for(int i=0; i < 100; i++)
  {
    String date = "your date";
     ArrayList<Programm> programList = myProgram.get(date);
     if (programList == null) {
         programList = new ArrayList<Programm>();
         myProgram.put(date, programList);
    }
     Program p= new Program("name","some date");
     programList.add(p):
  } 
```

检查错字

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T11:17:02.713

首先，您的 Program 类应如下所示：

```
private String name;
private String date;

public Program(String name, String date) {
    this.name = name;
    this.date = date;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public String getDate() {
    return date;
}

public void setDate(String date) {
    this.date = date;
} 
```

如果你有像你一样的公共领域，那么制作 getter 和 setter 是没有意义的。

无论如何，您可以使用 HashMap 按日期对程序进行排序：

```
private static class Bucket {

    private List<Program> programs = new ArrayList<Program>();

    private static HashMap<String, Bucket> map = new HashMap<String, Bucket>();

    public static void addProgram(Program p) {
        String tempDate = p.getDate();
        Bucket correspondingBucket = map.get(tempDate);
        if (correspondingBucket == null) {
            correspondingBucket = new Bucket();
            map.put(tempDate, correspondingBucket);
        }
        correspondingBucket.programs.add(p);

    }
} 
```

# vim - vimballPlugin.vim 已加载但无法从 vimball 安装

> ID：14137594
> 
> 赞同：1
> 
> 时间：2013-01-03T11:02:29.850
> 
> 标签：vim, plugins

我尝试`netrw.vba`在 vim 7.3 上使用 vimball安装插件`:source %`，但收到此错误

```
line    2:
E492: Not an editor command: UseVimball 
```

我遇到了这篇文章[Trying to install a vimball has vimballPlugin installed](https://stackoverflow.com/questions/10399186/trying-to-install-a-vimball-having-vimballplugin-installed)，并按照那里提到的步骤尝试修复它，但没有奏效。`:scriptnames`显示`{...}/gvim73/share/vim/vim73/plugin/vimballPlugin.vim`，因此它似乎已正确加载。

我还能探索什么来解决这个问题？我在这里错过了一些设置吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:27:04.697

如果`plugin/vimballPlugin.vim`脚本已加载，阻止定义命令的唯一条件是：

1.  你有`:set compatible`，回到旧的 vi 行为（通常不是你想要的）
2.  您已经在`g:loaded_vimballPlugin`某处定义，明确禁止插件
3.  `:delcommand UseVimball`插件来源后的某些事情

找出哪些适用于您，然后修复它。

# .net - Int.ToString("C") 删除负号

> ID：14137597
> 
> 赞同：12
> 
> 时间：2013-01-03T11:02:35.433
> 
> 标签：.net, tostring

根据[http://msdn.microsoft.com/en-us/library/6t7dwaa5.aspx](http://msdn.microsoft.com/en-us/library/6t7dwaa5.aspx)，如果我想将数字显示为货币，我可以调用 .ToString() 并传递一个参数，在本例中为“C "

但是，根据下面来自 MSDN 站点的详细信息，它会自动删除减号 (-) 字符，这意味着我的值现在是正数。

```
int value = -16325;   
// Display value using default ToString method.
Console.WriteLine(value.ToString());            // Displays -16325 
// Display value using some standard format specifiers.
Console.WriteLine(value.ToString("G"));         // Displays -16325
Console.WriteLine(value.ToString("C"));         // Displays ($16,325.00)
Console.WriteLine(value.ToString("D"));         // Displays -16325
Console.WriteLine(value.ToString("F"));         // Displays -16325.00
Console.WriteLine(value.ToString("N"));         // Displays -16,325.00
Console.WriteLine(value.ToString("X"));         // Displays FFFFC03B 
```

那么，如何使用减号保留它，我是否必须使用 Contains("-") 方法，如果它是真的添加 - 回来。

类似这段代码的东西（如果编码不正确，请道歉，但你明白了）。

```
string x = (value.ToString().Contains("-") : "-" + value.ToString("C") ?  + value.ToString("C")); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-03T11:13:07.203

这取决于您的`CurrentCulture.NumberFormat.CurrencyNegativePattern`. 可能的值是 0 - 15：

```
0 : ($12,345.00)
1 : -$12,345.00
2 : $-12,345.00
3 : $12,345.00-
4 : (12,345.00$)
5 : -12,345.00$
6 : 12,345.00-$
7 : 12,345.00$-
8 : -12,345.00 $
9 : -$ 12,345.00
10 : 12,345.00 $-
11 : $ 12,345.00-
12 : $ -12,345.00
13 : 12,345.00- $
14 : ($ 12,345.00)
15 : (12,345.00 $) 
```

所以看起来你想设置它来`1`获得你想要的输出，比如：

```
int value = -12345;

var numberFormat = (NumberFormatInfo)CultureInfo.CurrentCulture.NumberFormat.Clone();
numberFormat.CurrencyNegativePattern = 1;

string numberAsCurrency = value.ToString("C", numberFormat) 
```

但是，根据您关于它是远程服务器的评论并且您总是希望以特定方式进行格式化，最好将整个线程的文化设置为受控值，这将影响`ToString()`该线程上的所有后续调用：

```
int value = -12345;
Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("en-US");
Thread.CurrentThread.CurrentCulture.NumberFormat.CurrencyNegativePattern = 1;
string numberAsCurrency = value.ToString("C"); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-03T11:08:55.467

`NumberFormatInfo`您可以从当前语言环境创建自定义。然后你可以指定它的[`CurrencyNegativePattern`](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.currencynegativepattern.aspx)，例如：

```
int value = -16325;
var culture = CultureInfo.CurrentCulture;
var mutableNfi = (NumberFormatInfo)culture.NumberFormat.Clone();
mutableNfi.CurrencyNegativePattern = 1;
Console.WriteLine(value.ToString("C", mutableNfi)); // Displays (-$16,325.00) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-03T11:08:31.583

你可能想试试这个

```
 Console.WriteLine((-1234).ToString("c"));
        CultureInfo currentCulture = Thread.CurrentThread.CurrentCulture;
        CultureInfo newCulture = new CultureInfo(currentCulture.IetfLanguageTag);
        newCulture.NumberFormat.CurrencyNegativePattern = 1;
        Thread.CurrentThread.CurrentCulture = newCulture;
        Console.WriteLine((-1234).ToString("c")); 
```

MSDN：[NumberFormatInfo.CurrencyNegativePattern 属性](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.currencynegativepattern.aspx) 以获取详细信息...

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-03T11:06:11.810

这取决于机器的本地化设置。许多语言环境中的负货币表示为`( amount )`所以 .net 在这里使用它。我不确定如何覆盖它。但这就是这里发生的事情。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-03T11:07:36.220

这取决于文化。它使用[`NumberFormatInfo.CurrencyNegativePattern`](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.currencynegativepattern.aspx)- 在美国似乎使用括号来表示负数。（正数没有括号。）

所以你*可以*克隆你的 current `CultureInfo`，并更改`CurrencyNegativePattern`关联的`NumberFormatInfo`- 但我会小心翼翼地这样做。通常，您应该相信 .NET 使用的文化信息适合该文化。当然，您需要决定是否确实*需要*特定于文化的表示形式 - 如果不是，您可能想要使用不变的文化。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-03T11:07:57.990

你可以使用这个：

```
string text = value < 0 ? "-" + (-value).ToString("C") : value.ToString("C"); 
```

但请确保本地化设置不会更改以防止出现不可预测的结果（例如 --$ 1.00）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-03T11:09:25.607

可以使用该方法获取货币字符串，并且只有在括号中的情况下，去掉括号并添加一个“-”。

```
private string ToCurrencyString(decimal amount)
{
    string c = amount.ToString("C");
    if (c.StartsWith("(") && c.EndsWith(")"))
    {
        c = "-" + c.SubString(1, c.Length - 2);
    }
    return c;
} 
```

# svn - 使用 SVN 提交后更新 .txt 文件

> ID：14137604
> 
> 赞同：0
> 
> 时间：2013-01-03T11:03:01.090
> 
> 标签：svn, post-commit, svnlook

首先，我在 Windows 7 上，如果这有所不同，请使用 Cygwin。我正在使用 Dropbox 作为我的 svn 存储库，我可以在其中管理多个项目。每次提交每个项目后，我想更新文件夹`changelog.txt`中的`public_root`文件，如果可能，提交在提交后脚本之后所做的更改。

`post-commit`位于`/hooks`svn repo 文件夹下的文件：

```
#!/bin/sh

REPOS=$1
REV=$2

/usr/bin/svnlook info $REPOS >> $REPOS/changelog.txt 
```

实际上它将一个`changelog.txt`放入 svn repo 文件夹中，我想要将它放在我签出项目的文件夹中（对不起，因为不知道正确的术语来描述）

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:14:26.660

`$REPOS`指的是整个存储库的位置，而不是签出的副本。Subversion 服务器不可能知道客户端将写入数据的位置。

提交时也无法修改存储库本身（如修改文件）。

如果您是存储库的唯一用户并且您总是在同一个沙箱中检查内容，您可以在提交后挂钩中硬编码该位置

```
/usr/bin/svnlook info $REPOS >> /the/location/of/my/sandbox/changelog.txt 
```

# knockout.js - 使用 Moment.Js 在 koGrid 中格式化日期

> ID：14137606
> 
> 赞同：1
> 
> 时间：2013-01-03T11:03:03.710
> 
> 标签：knockout.js, momentjs, kogrid

我有一个包含 JSON 日期字段的网格。我想使用 Moment.JS 格式化字段，但无法使`cellFormatter`nor`cellFilter`字段正常工作。

请参阅以下小提琴： http: [//jsfiddle.net/cooper/8NNAk/5/](http://jsfiddle.net/cooper/8NNAk/5/)，它显示了问题。

我想将格式应用于 HTML / 数据网格，*而不是*数据，例如我*不想*这样做：

```
function viewModel(){
    myArray = ko.observableArray([
        { MyDate: moment("/Date(1355875200000+0000)/").format('DD/MM/YYYY') },
        { MyDate: moment("/Date(1355875300000+0000)/"}.format('DD/MM/YYYY')} ]);
} 
```

**更新：**
这个小提琴似乎在 IE 中不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:16:51.623

它应该与以下`cellFilter`功能一起使用：

```
cellFilter: function(data) { return moment(data).format('DD/MM/YYYY') } 
```

下面是完整的 columndef 的样子：

```
columnDefs: 
    [
        { field: 'MyDate', displayName: 'DateTime', 
        cellFilter: function(data) { return moment(data).format('DD/MM/YYYY') } }
    ] 
```

演示[JSFiddle](http://jsfiddle.net/fyf3f0q1/)。

# vb.net - 如何在VB中自动单击Msgbox ok按钮

> ID：14137608
> 
> 赞同：0
> 
> 时间：2013-01-03T11:03:10.977
> 
> 标签：vb.net, vbscript

我的 Vb 程序中有这样的消息框

MsgBox("记录插入成功")

如何从代码中自动单击“确定”按钮在 Visual Basic 中有什么方法可以做到这一点...我对 Visual Basic 很陌生，请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:13:11.077

您可以通过获取 MessageBox 的 hWnd 然后向它​​发送一条消息来模拟 Ok 点击来做到这一点。然而，这相对于预期的结果来说是非常复杂的，如果有可能的话。

我建议创建自己的表单来模仿消息框并公开一个允许您控制它的公共方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:13:42.383

要做到这一点还有很长的路要走。您必须调用很多 API 等...我建议您创建一个对话框表单，其中包含一个带有文本“成功插入记录”的标签和一个带有文本“确定”的按钮。通过这样做，您将更容易控制它。

您可以像这样显示对话框：

```
 Dim newdialog As New Dialog1
    Me.ShowDialog(newdialog) 
```

并模拟按钮按下，即关闭对话框：

```
 newdialog.Close() 
```

# function - 在 Fortran 中删除二维数组中的重复元素

> ID：14137610
> 
> 赞同：0
> 
> 时间：2013-01-03T11:03:14.553
> 
> 标签：function, fortran, fortran90

我想知道是否有可能拥有一个从数组中删除所有 2D 重复节点的函数，即：

> A(xy,1:2)
> 
> A(xy,1) = /1,2,4, **5** ,5,9,6,8,2, **5** ,4/
> 
> A(xy,2) = /5,2,5, **6** ,7,6,6,3,7, **6** ,6/

后

> A(xy,1) = /1,2,4, **5** ,5,9,6,8,2,4/
> 
> A(xy,2) = /5,2,5, **6** ,7,6,6,3,7,6/

* * *

当我尝试在空白程序中执行@HighPerformanceMark 的代码时，有几个我没有得到的编译错误：

```
 repeating.f90:24.20:

       mask(ix) = NOT(ANY(arraya(1,:ix-1)==arraya(1,ix).AND.&
                      1
  Error: 'i' argument of 'not' intrinsic at (1) must be INTEGER
  repeating.f90:29.11:

    ALLOCATE(index_vector, source=PACK([(ix, ix=1,numcols) ],mask))
             1
  Error: Array specification required in ALLOCATE statement at (1)
  repeating.f90:32.11:
... 
```

对此你能说什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:16:44.180

是的，这是做你想做的事情的一种方式。请注意，这会将数组 A 的唯一元素复制到一个名为 B 的新数组中，而不是动态调整 A 的大小。我已经调用了数组`arraya`，`arrayb`因为 1 个字符的名称违反了我的编码标准。

```
PROGRAM test

  USE iso_fortran_env

  IMPLICIT NONE

  INTEGER, PARAMETER :: numrows = 2
  INTEGER, PARAMETER :: numcols = 11

  INTEGER, DIMENSION(numrows,numcols) :: arraya
  LOGICAL, DIMENSION(:), ALLOCATABLE :: mask
  INTEGER, DIMENSION(:,:), ALLOCATABLE :: arrayb
  INTEGER :: ix
  INTEGER, DIMENSION(:), ALLOCATABLE :: index_vector

  arraya(1,:) = [1,2,4,5,5,9,6,8,2,5,4]
  arraya(2,:) = [5,2,5,6,7,6,6,3,7,6,6]

  ! First, find the duplicate elements
  ALLOCATE(mask(numcols))
  mask = .TRUE.

  DO ix = numcols,2,-1
     mask(ix) = .NOT.(ANY(arraya(1,:ix-1)==arraya(1,ix).AND.&
                    arraya(2,:ix-1)==arraya(2,ix)))
  END DO

  ! Make an index vector
  ALLOCATE(index_vector, source=PACK([(ix, ix=1,numcols) ],mask))

  ! Now copy the unique elements of a into b
  ALLOCATE(arrayb, source=arraya(:,index_vector))

END PROGRAM test 
```

另请注意：

*   我把它写成一个程序，你可能想把它重写成一个函数，它返回我调用的内容`arrayb`。
*   没有错误检查或任何类似的东西，这不是生产就绪代码。
*   您可能可以`index_vector`像这样省略并重写最后一个语句，`ALLOCATE(arrayb, source=arraya(:,PACK([(ix, ix=1,numcols) ],mask)))`但是（a）这有点神秘，并且（b）我还没有测试过。
*   我只在您的输入数据和一些小的变化上对此进行了测试。
*   这会保留重复元素的第一个（最左侧）实例。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-04-13T20:10:49.030

我扩展了此功能并用于我的目的多年，我认为将其分发给需要它的其他人是有益的。！ErrorMsg 只是一个简单的子程序，例如 echo/print 语句。

```
 subroutine Unique2DArray_D(Arr_a,dim,dup,diff)
  IMPLICIT NONE
  real*8,DIMENSION(:,:),allocatable::Arr_a,Arr_b
  integer,intent(in),optional::dim
  integer,allocatable,optional::dup(:)
  real*8,optional::diff
  LOGICAL,DIMENSION(:), allocatable::TF(:,:),mask
  INTEGER,DIMENSION(:),allocatable::index_vector
  INTEGER::i,j,numrows,numcols,ns,dim_
  real*8::diff_
  logical::pres_dim,pres_dup
  numrows=size(Arr_a,1); numcols=size(Arr_a,2); 
  pres_dim=present(dim); pres_dup=present(dup)
 ! Arr_a(1,:)=[1,2,4,5,5,9,6,8,2,5,4]
 ! Arr_a(2,:)=[5,2,5,6,7,6,6,3,7,6,6]
 dim_=1; if(pres_dim)dim_=dim; diff_=1d-20; if(present(diff))diff_=diff
 if(dim_==2)then
    ALLOCATE(mask(numcols),TF(numrows,numcols)); mask=.TRUE.;
    DO j=numcols,2,-1
        TF(:,j-1)=.false.
      do i=1,numrows
        TF(i,:j-1)=(abs(Arr_a(i,:j-1)-Arr_a(i,j))<=diff_)
      end do; 
      mask(j)=.not.any(all(TF(:,:j-1),dim=1))
    END DO
    ! Make an index vector
    ns=size(PACK([(i,i=1,numcols)],mask));   
    ALLOCATE(index_vector(ns)); index_vector=PACK([(i,i=1,numcols)],mask)
    ! Now copy the unique elements of a into b
    if(pres_dup)then; 
        allocate(dup(numcols-ns)); dup=PACK([(i,i=1,numcols)],.not.mask)  
    end if
    ALLOCATE(Arr_b(numrows,ns));   Arr_b=Arr_a(:,index_vector)
 elseif(dim_==1)then
  ! Arr_a(:,1)=[1,   ! Arr_a(:,2)=[5,]
!               2,                 2,  
!               4,                 5,
!               5,                 6,
!               5,                 7,
!               9,                 6,
!               6,                 6,
!               8,                 3,
!               2,                 7,
!               5,                 6,    
!               4]                 6]

    ALLOCATE(mask(numrows),TF(numrows,numcols)); mask=.TRUE.;
    DO i=numrows,2,-1
        TF(i-1,:)=.false.
      do j=1,numcols
        TF(:i-1,j)=(abs(Arr_a(:i-1,j)-Arr_a(i,j))<=diff_)
      end do; 
      mask(i)=.not.any(all(TF(:i-1,:),dim=2))
    END DO
    ! Make an index vector
    ns=size(PACK([(i,i=1,numrows)],mask));
    ALLOCATE(index_vector(ns)); index_vector=PACK([(i,i=1,numrows)],mask)
    ! Now copy the unique elements of a into b
    if(pres_dup)then; 
        allocate(dup(numrows-ns)); dup=PACK([(i,i=1,numrows)],.not.mask)  
    end if
    ALLOCATE(Arr_b(ns,numcols)); Arr_b=Arr_a(index_vector,:)
    !ALLOCATE(Arr_b,source=Arr_a(index_vector,:))
 else
    call ErrorMsg('Dim is incorrect in Unique2DArrayD!',-1)
 end if
  call move_alloc(Arr_b,Arr_a)
end subroutine Unique2DArray_D 
```

# c++ - 为什么 wxLocale 甚至不尝试加载语言？

> ID：14137613
> 
> 赞同：0
> 
> 时间：2013-01-03T11:03:28.580
> 
> 标签：c++, wxwidgets

我尝试使用 wxLocale 创建一个简单的多语言程序，但我什至无法让它失败 --- 看起来任何加载语言的尝试总是返回 OK，但什么也没做。

```
#include <wx/intl.h>
#include <wx/stdpaths.h>
#include <wx/app.h>
#include <wx/txtstrm.h>
#include <wx/wfstream.h>

wxFFileOutputStream wxstdout (stdout); wxTextOutputStream cout(wxstdout);
wxFFileOutputStream wxstderr (stderr); wxTextOutputStream cerr(wxstderr);

class app: public wxApp
{
    public:
        virtual bool OnInit();
};

bool app::OnInit()
{
    long language =  wxLANGUAGE_GERMAN;    
    wxLocale* locale = new wxLocale();

    if (locale->Init(language, wxLOCALE_CONV_ENCODING))
       cerr << L"Language loaded OK\n";
    else
       cerr << L"Language loading failed\n";

    cout << _("Hi!") << endl;

    exit(0);

    return true;

}

IMPLEMENT_APP_CONSOLE(app); 
```

无论如何，我尝试指定什么语言，它总是打印

```
Language loaded OK
Hi! 
```

我想，由于没有翻译（.po 和 .mo 文件），它应该无法`Init`语言？但是，当我尝试实际添加一些翻译时，它什么也没改变，程序总是 print `Hi!`。为什么这一切都会发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:30:36.363

您需要在 Init 之后调用 AddCatalog()。

[http://docs.wxwidgets.org/trunk/classwx_translations.html#a3074f9d91c92bd0ade9e6aea4affc652](http://docs.wxwidgets.org/trunk/classwx_translations.html#a3074f9d91c92bd0ade9e6aea4affc652)

域字符串只是应用程序名称。

看一下internat示例代码的第247行

[http://svn.wxwidgets.org/viewvc/wx/wxWidgets/trunk/samples/internat/internat.cpp?view=markup](http://svn.wxwidgets.org/viewvc/wx/wxWidgets/trunk/samples/internat/internat.cpp?view=markup)

对 init() 的调用只是设置语言环境。如果系统知道语言环境，它将返回成功。它不会加载您的目录。AddCatalog 的返回应该告诉您是否找到了目录。

如果未找到目录，您需要将 .mo 文件与您的应用程序一起安装在目标系统的适当位置，即 wxStandardPaths::GetLocalizedResourcesDir(wxStandardPaths::ResourceCat_Messages) 返回的位置。

请阅读[http://docs.wxwidgets.org/trunk/overview_i18n.html上的 i18b 概述](http://docs.wxwidgets.org/trunk/overview_i18n.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T12:36:46.817

因为这就是本地化通常的工作方式。您已标记可翻译字符串，如果未找到翻译，则会显示原文。因此，在您的情况下，没有可用的德语翻译文件，但这并不意味着程序无法继续工作。

# python - 访问列表是否会更改其引用计数？

> ID：14137614
> 
> 赞同：1
> 
> 时间：2013-01-03T11:03:33.850
> 
> 标签：python, refcounting

我正在处理的原始问题在[此处](https://stackoverflow.com/q/14124588/898747)概述。我想问一个与原始问题相关的附加问题（关于 Python 引用计数）。

可以说我有以下脚本：

```
from bitarray import bitarray
from array import array

list1=[bitarray('00011'), bitarray('00010'), bitarray('11011')]
list2=[array('i',[0,0,0,0]),array('i',[1,1,1,1]),array('i',[2,2,2,2])]

def calculate(l1,l2):
    result1=l1[0]&l1[1]&l1[2]
    result2=l2[0][0]+l2[1][1]+l2[2][2]
return result1, result2

print calculate(list1,list2) 
```

当我调用时**，**`list1`任一列表中的引用计数`list2`或任何对象是否会发生变化？**`calculate(list1,list2)`**

 **澄清一下：我并不是说在调用之前和之后引用计数是否相同`calculate(list1,list2)`。我的意思是如果引用计数在执行期间的任何时候发生变化`calculate(list1,list2)`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T11:05:57.163

`list1`和的引用计数`list2`不会改变，它们只是变量，因此是`locals()`命名空间中的字符串键。

但是，这两个变量指向的 Python 列表对象是的，它们的引用计数在传递给函数时会发生变化。在调用函数期间，两个*新*变量引用那些列表 (`l1`和`l2`) 增加计数，当函数返回时，这些变量被清除并且引用计数再次下降。

在`calculate()`函数内部，您正在访问这两个列表（`l1[0]`等）的项目。项目访问可以使用`__getitem__`对象的方法；方法是在访问时动态创建的，并保存对实例和底层函数的引用。对于一个列表，它是对列表对象的另一个引用，并且另一个临时引用计数增加。一旦函数被调用并返回它的值，该方法将再次被丢弃（没有任何东西引用它）并且列表的引用计数再次下降。

正如 delnan 在评论中正确指出的那样，对于列表订阅，`BINARY_SUBSCR`操作码优化了访问（假设索引是整数），并且*在特定情况下*没有创建任何方法。

python 解释器在处理堆栈上的字节码和值时，一直在增加和减少引用*计数*。查看[Python 字节码评估循环](http://hg.python.org/cpython/file/f26c91bf61bf/Python/ceval.c)并计算出现次数`Py_INCREF`和`Py_DECREF`出现次数，以了解这种情况的常见程度。**

# java - 在 webdriver 中使用 contains() 测试特殊字符失败

> ID：14137615
> 
> 赞同：-3
> 
> 时间：2013-01-03T11:03:37.977
> 
> 标签：java, automation, webdriver, selenium-webdriver, assertion

我想验证页面上是否存在特定文本。

我使用了以下代码：

```
driver.getPageSource().contains("String to check"); 
```

上面的代码仅适用于没有任何特殊字符的字符串。如果字符串有任何`"",|,!,&`提到的特殊字符（等），它就会失败。

有没有办法检查页面上的特定文本？

我正在使用“Selenium 独立服务器 - 2.20.0”

以下是我的 WebDriver Java 代码：

```
public class test{
    public static void main(String a[])
    textCheck(driver, "welcome, Mani | LogOut");
    static void textCheck(WebDriver driver, String strToCheck){
    boolean blCond = driver.getPageSource().contains(strToCheck);
    if(blCond ){
        System.Out.Println("True");
    }else{
        System.Out.Println("False");
    }
} 
```

现在我想检查`"welcome, Mani | LogOut"`加载的页面中是否存在字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:40:49.703

```
protected boolean isTextPresent(String text){
    try{
        boolean b = driver.getPageSource().contains(text);
        return b;
    }
    catch(Exception e){
        return false;
    }
  } 
```

通过调用上述方法进行断言，如下所示：

```
assertTrue(isTextPresent("welcome, Mani | LogOut")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:55:08.437

以下是最好的，我认为：

```
private StringBuffer verificationErrors = new StringBuffer();
try {
      assertTrue(driver.findElement(By.cssSelector("BODY")).getText().matches("^[\\s\\S]*welcome, Mani | LogOut[\\s\\S]*$"));
    } catch (Error e) {
      verificationErrors.append(e.toString());
    }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T11:50:59.873

我将根据您的问题和评论撰写答案。你用

```
boolean blCond = driver.getPageSource().contains(strToCheck); 
```

当试图决定是否`strToCheck`在您的页面上时。在你的情况下`strToCheck`是`"welcome, Mani | LogOut"`. 您使用`contains()`页面源上的方法。在稍后的评论中，您说页面源（的相关部分）是

```
"<div class=\"login-message\">welcome, <a href=\"/my-account\" class=\"user-name\">suganya</a> | <a href=\"/logout\" class=\"logout\">Logout</a> </div>" 
```

看那根弦。它不包含字符序列`"welcome, Mani | LogOut"`。

与您要查找的内容匹配的最长子字符串是

```
"welcome, <a href=\"/my-account\" class=\"user-name\">suganya</a> | <a href=\"logout" 
```

希望这可以帮助您理解为什么您的代码没有按您希望的那样工作。

# android - 如何在 android 中通过通知播放声音？

> ID：14137616
> 
> 赞同：2
> 
> 时间：2013-01-03T11:03:39.093
> 
> 标签：android

我是 Android 新手，我尝试通过通知播放声音，但它不适用于模拟器。请帮我。

```
public class OneShotAlarm extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Toast.makeText(context, R.string.one_shot_received, Toast.LENGTH_SHORT).show();

        buildNotification(context);

    }

    @SuppressLint("NewApi")
    private void buildNotification(Context context){
          NotificationManager notificationManager 
          = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
          Notification.Builder builder = new Notification.Builder(context);

          Intent intent = new Intent(context, MainActivity.class);
          PendingIntent pendingIntent 
          = PendingIntent.getActivity(context, 0, intent, 0);

          builder
          .setSmallIcon(R.drawable.ic_launcher)
          .setContentTitle("ContentTitle")
          .setContentText("ContentText")
          .setContentInfo("ContentInfo")
          .setTicker("Ticker")
          .setLights(0xFFFF0000, 500, 500) //setLights (int argb, int onMs, int offMs)
          .setContentIntent(pendingIntent)
          .setSound(Uri.parse("android.resource://com.vatshal.VSAlarm/" + R.raw.satinder))
          .setAutoCancel(true);

          Notification notification = builder.build();
          //notification.sound = Uri.parse("android.resource://com.vatshal.VSAlarm/" + R.raw.satinder); 
          //notification.defaults |= Notification.DEFAULT_SOUND;

          notificationManager.notify(R.drawable.notification_warning, notification);
         }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:06:49.550

确保你的资源有声音

```
try {
        MediaPlayer mediaPlayer = MediaPlayer.create(context,                 R.raw.sound);
        mediaPlayer.start();
    } catch (Exception ex) {

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:19:10.817

我用了

**.setSound(Uri.parse("android.resource://com.vatshal.VSAlarm/" + R.raw.satinder))**

设置音频路径的语法是否正确，放置在名称为“satinder”的“raw”文件夹中？

# php - 在mysql中获取具有条件的行位置

> ID：14137619
> 
> 赞同：2
> 
> 时间：2013-01-03T11:03:42.760
> 
> 标签：php, mysql, sql, select

我在使用 mysql 查询时遇到了一些问题。我只是想知道，如何在 mysql 中获得有条件的行位置。让我解释一下我想要实现的目标。

我有一个表格画廊，它看起来像这样：

```
id_gallery    source   status    post
   1          img1      last     2012/12/11
   5          img2      new      2013/01/01
   7          img3      new      2013/01/01
   10         img4      last     2012/12/11
   22         img5      last     2012/12/14
   30         img6      last     2012/12/15 
```

我使用此查询调用页面中的图像（例如：test1.php）并给出如下结果： 这是我的查询：

```
select * from gallery where status ='last' order by post DESC 
```

这是我的结果：

```
id_gallery   source    status    post
   30         img6      last     2012/12/15 
   22         img5      last     2012/12/14
   10         img4      last     2012/12/11
    1         img1      last     2012/12/11 
```

在页面库中，我进行了这样的查询：

```
select * from gallery order by post desc 
```

并给出这样的结果：

```
id_gallery    source   status    post
       5          img2      new      2013/01/01
       7          img3      new      2013/01/01
       30         img6      last     2012/12/15
       22         img5      last     2012/12/14
       1          img1      last     2012/12/11
       10         img4      last     2012/12/11 
```

我想要实现的是这样的：

```
 id_gallery    source   status    post      position
       5          img2      new      2013/01/01      1
       7          img3      new      2013/01/01      2
       30         img6      last     2012/12/15      3
       22         img5      last     2012/12/14      4
       1          img1      last     2012/12/11      5
       10         img4      last     2012/12/11      6 
```

最后的结果会变成这样

```
 id_gallery    source   status    post      position
           30         img6      last     2012/12/15      3
           22         img5      last     2012/12/14      4
           1          img1      last     2012/12/11      5
           10         img4      last     2012/12/11      6 
```

我想知道图像的正确位置，因为在第二页（例如：gallery.php）中，我有很多图像。在第一页（test1.php）中，我只选择最后一个状态的 5 个 img 并按 DESC 后排序。我想链接到页面gallery.php，我需要一个正确的位置。当我得到一个正确的位置时，我可以为每个图像建立一个链接，它会是这样的：

```
<a href='http://localhost/testing/gallery/<?=$result[position]?>.htm'><img src='http://localhost/testing/<?=$result[source]?>.jpg' /></a> 
```

//或者在html中会是这样的

```
<a href='http://localhost/testing/gallery/1.htm'><img src='http://localhost/testing/img6.jpg' /></a> 
```

所以，如果我能得到正确的行位置，我可以建立一个正确指向页面的链接。

谁能告诉我我怎样才能做到这一点？我会很感激你的回答，谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T11:08:59.133

```
SELECT a.*, @row:=@row+1 AS `Position`
FROM   gallery a, (SELECT @row:=0) s
WHERE  status = 'last' 
ORDER  BY post DESC 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/f2154/1)

**更新 1**

```
SELECT *
FROM
  (
    SELECT a.*, @row:=@row+1 AS `Position`
    FROM   gallery a, (SELECT @row:=0) s
    ORDER  BY case when status = 'new' then 0 else 1 END ASC,
               post DESC, id_gallery ASC
  ) a
WHERE status = 'last' 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/f2154/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:09:57.673

在您的 php 代码中执行此操作（而不是在 SQL 的临时生成表中添加新行）：

```
$query = mysql_query("YOUR QUERY");
$counter = 0;
while($rows = mysql_fetch_assoc($query)){
     $counter++;
     echo "<a...............".$counter.">.html'><img..../></a>";

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:46:57.137

最简单的方法可能是按您想要的列（例如位置、帖子、状态...）对查询进行分区，然后在分区内排序。分析函数会有所帮助 - 文档和网络上有很多示例。为位置添加 Row_Number() 或 Rank()...：

```
SELECT * FROM
( 
 SELECT deptno, ename, sal
    , ROW_NUMBER() OVER (PARTITION BY deptno ORDER BY sal desc) Position_Within_Dept
    , RANK () OVER (PARTITION BY deptno ORDER BY sal desc) ranks
    , DENSE_RANK () OVER (PARTITION BY deptno ORDER BY sal desc) d_ranks
   FROM emp_test
)
--WHERE rno = 3
 ORDER BY deptno, sal DESC
/ 
```

发布创建表和插入脚本总是一个好主意。没有人有时间为你做这件事。

# android - 对 SQLiteOpenHelper 和创建多个表感到困惑

> ID：14137622
> 
> 赞同：9
> 
> 时间：2013-01-03T11:03:48.733
> 
> 标签：android, database, sqlite, sqliteopenhelper

我觉得关于在 SQLite 中保存数据的 Android 开发人员指南确实很缺乏。当涉及到多个表时，我对一般准则是什么感到困惑。

我目前有两个管理器，它们向 UI 公开（CRUD）两组不同的实体。

我是否：

在每个 Manager 中创建一个私有类 SQLiteOpenHelper。每个 Helper 都有自己的 onCreate 用于自己的 TABLE？

或者

创建一个创建两个表的公共类 SQLiteOpenHelper？

我没有看到使用一个高于另一个的任何明显优势，但我看到它们都被使用了。Android 对此有何评论？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T11:14:07.913

以下示例代码创建两个表。我还添加了用于创建和插入数据的代码。

```
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class MyDB {
    public static final String KEY_ROWID = "_id";
    public static final String KEY_FIRSTNAME = "ID";
    public static final String KEY_LASTNAME = "CS";
    public static final String KEY_DESIGNATION = "CN";
    public static final String KEY_DN = "DN";  

    private static final String TAG = "MyDB";       
    private static final String DATABASE_NAME = "test.db";    
    private static final int DATABASE_VERSION = 1;

    private static final String DATABASE_CREATE_ValidateUser_DriverInfo =
        "create table tabletest1 (_id integer primary key autoincrement, "
        + "ID text not null, CS text not null, CN text not null, DN text not null);";

    private static final String DATABASE_CREATE_ValidateUser_TripInfo =
        "create table tabletest2 (_id integer primary key autoincrement, "
        + "TI text not null, PU text not null, LN text not null, FN text not null, Origin varchar not null, De text not null);";

    private Context context;
    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public MyDB(Context ctx) {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper {
        DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
                db.execSQL(DATABASE_CREATE_ValidateUser_DriverInfo);
                db.execSQL(DATABASE_CREATE_ValidateUser_TripInfo);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, 
                              int newVersion) {
            Log.w(TAG, "Upgrading database from version " + oldVersion 
                 + " to " + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS tabletest1");
            db.execSQL("DROP TABLE IF EXISTS tabletest2");
            onCreate(db);
        }
    }

    public MyDB open() throws SQLException {
        db = DBHelper.getWritableDatabase();
        return this;
    }

    //---closes the database---    
    public void close() {
        DBHelper.close();
    }

    public long insertTitle(ContentValues initialValues, String TableName) {
        return db.insert(TableName, null, initialValues);
    }
} 
```

使用以下代码插入所需活动中的数据。

```
MyDB mmdb=new MyDB(getBaseContext());
mmdb.open();

initialValues = new ContentValues();
initialValues.put("ID", ID);
initialValues.put("CS", CS);
initialValues.put("CN", CN);
initialValues.put("DN", DN);

mmdb.insertTitle(initialValues, "tabletest1");  

mmdb.close(); 
```

# javascript - 我错过了什么？HTML > 正文 - 调整大小事件

> ID：14137629
> 
> 赞同：10
> 
> 时间：2013-01-03T11:04:02.157
> 
> 标签：javascript, html

添加调整大小事件（监听窗口大小改变）的常用方法是：

```
//works just fine
window.addEventListener("resize", function(){console.log('w')}, true) 
```

但我想将此事件处理程序添加到`document.body`甚至更好`document`（**不要问我为什么，但我不能使用窗口**）

```
//this dosn't work
document.body.addEventListener("resize", function(){console.log('b')}, true)

//this also dosn't work
document.addEventListener("resize", function(){console.log('d')}, true) 
```

问题是这不起作用。我真的不明白为什么？MB 我错过了什么？

这有效（但我想再次使用`addEventListener`）

```
document.body.onresize = function(){console.log('a')} 
```

**那么为什么`document.addEventListener("resize", function(){console.log('d')}, true)`不起作用呢？**

* * *

**UPD #1**

有没有办法在其他窗口上捕获 window.onresize ？

**UPD #2**

如果`window`是唯一可以调整大小的对象，那么为什么会这样？o_O

```
document.body.onresize = function(){console.log('a')} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T13:02:33.867

[Mozilla Docs 说：](https://developer.mozilla.org/en-US/docs/DOM/element.onresize)

“任何元素都可以被赋予一个**onresize 属性**，但是只有窗口对象有一个**resize 事件**。调整其他元素的大小（比如通过使用脚本修改 img 元素的宽度或高度）不会引发 resize 事件。”

请检查[一个工作示例](http://jsfiddle.net/MZfQ2/2/)

```
function winResize(e){
 console.log('window reiszed',e);

  //body resize when width increases
 document.getElementById('content').innerHTML+='<div style="width:900px;background:green;border:1px solid red">'+Date()+'</div><br/>';
}

function docResize(e){
 cosole.log('document resized');   
}

function bodyResize(e){
 console.log('body resized');
}

window.addEventListener("resize", winResize);
document.body.onresize=bodyResize; 
```

**编辑：** 如果您停止事件，则不会调用气泡 document.body.onresize 事件：例如

```
 function winResize(e){
     console.log('window reiszed',e);
     e.stopImmediatePropagation()
   } 
```

**更新：**

a) 首先要了解的是，resize 事件将被传播 [`window > document > body`](http://www.w3.org/TR/DOM-Level-3-Events/#event-flow) ，如果您在上述所有节点和[其他](http://help.dottoro.com/ljorlllt.php)节点上定义了 resize 事件，则该事件将被向下传播，并且每个节点都将被调用

b）当您询问 b/w 差异时`window.resize`，`[body/document].onresize`该 `window.resize`事件是 html4 规范中定义的标准事件，并且 [body/document].onresize 可作为非标准事件使用（某些浏览器已实现但不是全部）但后一个 onresize 事件是在[HTML5 规范](http://www.w3.org/TR/html-markup/body.html)中添加的 到身体。

只是为了满足自己去[w3c 验证站点](http://validator.w3.org/)并使用 Doctype 验证以下 html `html 4.01 strict`，您会看到它会在 onresize 属性处抱怨：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
   <html><head><title>test</title></head> 
   <body onresize="somefunc()">
    <div> On resize validation </div>
    </body>
   </html> 
```

c)**结论。** window.addEventListener() 带有 Dom 2 级事件规范，只为该规范中指定的[事件添加事件侦听器](http://www.zytrax.com/tech/dom/addeventlistener.html)（Dom 3 级事件也支持这一点），[读取 DOM 级别。](https://developer.mozilla.org/en/docs/DOM_Levels)&[这个](http://help.dottoro.com/ljeuqqoq.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T11:10:34.193

您实际上应该查看浏览器的结构并查看哪个对象有哪些事件，窗口有一个调整大小事件，当窗口大小发生变化时触发，一个文档位于一个窗口对象内部`window->document->elements`，每个对象都在层次结构中有他们自己的事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-23T20:04:34.183

这个对我有用，使用 jQuery：

```
var windowWidth  = $(window).width();
var windowHeight = $(window).height()
window.addEventListener("orientationchange", function() {
        windowWidth  = $(window).width();
        windowHeight = $(window).height();
}, false); 
```

# java - 比较来自arraylist的不同对象值

> ID：14137630
> 
> 赞同：0
> 
> 时间：2013-01-03T11:04:17.220
> 
> 标签：java, object, loops, compare

根据用户偏好，我想比较数组列表的对象值并获取最大值。我的第一种方法是为对象属性定义一个函数并遍历数组列表。

```
 private MyModel getMaxValueA(ArrayList<MyModel> myModelList) {
    MyModel res = null;
    for (MyModel myModel : myModelList) {
        if (myModel != null) {
            if (myModel.valueA() > res.valueA()) {
                res = myModel;
            }
        } else {
            res = myModel;
        }
    }
    return res;
} 
```

问题是，我有 4 个不同的值要比较，并且定义 4 个类似的功能似乎不正确，所以我尝试将它组合所有功能并添加一个开关/案例

```
 private MyModel getMaxValueA(ArrayList<MyModel> myModelList, Setting mySetting) {
    MyModel res = null;
    for (MyModel myModel : myModelList) {
        if (myModel != null) {
            switch (mySetting) {
            case settingA:
                if (myModel.valueA() > res.valueA()) {
                     res = myModel;
                    }
                break;
            case settingB:
                if (myModel.valueB() > res.valueB()) {
                     res = myModel;
                    }

                break;
            ........
        } else {
            res = myModel;
        }
    }
    return res;
} 
```

这有点短，只有 1 个而不是 4 个函数，但它也不让我高兴。你有什么改进它的想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:14:17.917

像这样实现所有不同的需求：

```
class SettingsAComparator extends Comparator<MyModel> {
    @Override
    public int compare(MyModel m1, MyModel m2) {
         return m1.valueA() - m2.valueA();
    }
}

class SettingsBComparator extends Comparator<MyModel> {
    // Please use better names.
    // you can implement as many Comparators as necessary.
} 
```

并将您的方法更改为

```
private MyModel getMaxValue(ArrayList<MyModel> myModelList, Comparator<MyModel> comparator) {
    return Collections.max(myModelList, comparator);
} 
```

这样，如果您的类获得新属性，您始终可以添加不同的比较器，但您永远不必担心`getMaxValue()`再次更改。您还可以实现复杂的比较器，将多个属性值考虑在内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:09:33.697

实现一个比较器

```
 class MyComparator extends Comparator<MyModel> {
     Setting s;
     MyComparator(Setting s ){
        this.setting=s;
     } 
     public int compare(MyModel model, MyModel model2) {
        //do the comparison utilizing setting

     } 
```

编辑查看另一个答案：然后用于`Collections.max(listToBeSorted, new MyComparator(setting))`获取最大值

# html - web应用模板和spring mvc集成

> ID：14137633
> 
> 赞同：0
> 
> 时间：2013-01-03T11:04:22.307
> 
> 标签：html, jquery, gwt, servlets, spring-mvc

我会尽量变得很假。

### 我的背景

*   没有使用 Spring MVC 框架的经验

*   丰富的服务器端开发经验。(gwt, vaadin)

### 事实

我下载了一个不错的预构建 Web 应用程序模板，该模板由一定数量的 html 页面（包含带有文本的图表和小部件）、添加到其中的 javascript（主要是 jquery 和他的插件）和 css 组成。

这个模板的布局和组件 90% 可重复用于我的初始目的，所以我更喜欢在我的项目中使用那些“许多”html 页面，而不是使用现代的“单页 web 应用程序”；将来我可能会改变这种范式，重写视图代码，以便将所有内容放在一个页面中。

### 问题一：

假设我想在这些 html 页面中“更改”的唯一内容是图表显示的数据（从 servlet，ofc 检索）以及更多类似于文本标题等的内容，是 Spring mvc 框架（仅提一下一个 MVC 框架）为此目的而过大？

### 问题2：

在我的特定情况下，哪种范例更适合构建“开发良好”的企业 Web 应用程序？到目前为止，我只有自己链接的 html 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:57:39.733

看看百里香。我们目前正在尝试使用此模板引擎进行新的 spring mvc 开发。

我们正在或多或少地采用您的方法，只是我们自己构建页面。

我有点喜欢这个想法，因为您设计一个页面或让设计一个页面，然后为循环、文本 eval 等添加特殊属性。您不会在设计时弄乱标准的 html 属性，因此页面仍然可以由 webdev 设计。（直到你开始使用包含 css 等。

# android - Android 不幸的应用程序已停止

> ID：14137637
> 
> 赞同：0
> 
> 时间：2013-01-03T11:04:43.203
> 
> 标签：android, android-emulator, android-manifest

我正在使用 2 个菜单项，第一个菜单项发送*全局问候语*和第二项*设置*，每当我单击**设置**菜单项时，我总是收到以下消息：

**不幸的是应用程序已停止**

Logcat 说：

```
01-03 16:20:38.102: E/AndroidRuntime(953): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.january.floogoo/android.media.audiofx.BassBoost$Settings}; have you declared this activity in your AndroidManifest.xml?
01-03 16:20:38.102: E/AndroidRuntime(953):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1618)
01-03 16:20:38.102: E/AndroidRuntime(953):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1417)
01-03 16:20:38.102: E/AndroidRuntime(953):  at android.app.Activity.startActivityFromChild(Activity.java:3843)
01-03 16:20:38.102: E/AndroidRuntime(953):  at android.app.Activity.startActivityFromChild(Activity.java:3819)
01-03 16:20:38.102: E/AndroidRuntime(953):  at android.app.Activity.startActivityForResult(Activity.java:3395)
01-03 16:20:38.102: E/AndroidRuntime(953):  at android.app.Activity.startActivityForResult(Activity.java:3331)
01-03 16:20:38.102: E/AndroidRuntime(953):  at android.app.Activity.startActivity(Activity.java:3566)
01-03 16:20:38.102: E/AndroidRuntime(953):  at android.app.Activity.startActivity(Activity.java:3534)
01-03 16:20:38.102: E/AndroidRuntime(953):  at com.january.floogoo.ContactTab.onOptionsItemSelected(ContactTab.java:90)
01-03 16:20:38.102: E/AndroidRuntime(953):  at android.app.Activity.onMenuItemSelected(Activity.java:2548)
01-03 16:20:38.102: E/AndroidRuntime(953):  at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:980)
01-03 16:20:38.102: E/AndroidRuntime(953):  at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
01-03 16:20:38.102: E/AndroidRuntime(953):  at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
01-03 16:20:38.102: E/AndroidRuntime(953):  at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
01-03 16:20:38.102: E/AndroidRuntime(953):  at com.android.internal.view.menu.ListMenuPresenter.onItemClick(ListMenuPresenter.java:166)
01-03 16:20:38.102: E/AndroidRuntime(953):  at android.widget.AdapterView.performItemClick(AdapterView.java:298)
01-03 16:20:38.102: E/AndroidRuntime(953):  at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
01-03 16:20:38.102: E/AndroidRuntime(953):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
01-03 16:20:38.102: E/AndroidRuntime(953):  at android.widget.AbsListView$1.run(AbsListView.java:3423)
01-03 16:20:38.102: E/AndroidRuntime(953):  at android.os.Handler.handleCallback(Handler.java:725)
01-03 16:20:38.102: E/AndroidRuntime(953):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-03 16:20:38.102: E/AndroidRuntime(953):  at android.os.Looper.loop(Looper.java:137)
01-03 16:20:38.102: E/AndroidRuntime(953):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-03 16:20:38.102: E/AndroidRuntime(953):  at java.lang.reflect.Method.invokeNative(Native Method)
01-03 16:20:38.102: E/AndroidRuntime(953):  at java.lang.reflect.Method.invoke(Method.java:511)
01-03 16:20:38.102: E/AndroidRuntime(953):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-03 16:20:38.102: E/AndroidRuntime(953):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-03 16:20:38.102: E/AndroidRuntime(953):  at dalvik.system.NativeStart.main(Native Method) 
```

**清单.xml**

```
 <activity
        android:name="com.january.floogoo.Main"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".ContactTab"></activity>
    <activity android:name=".MonthTab"></activity>
    <activity android:name=".WeekTab"></activity>
    <activity android:name=".PersonalGreeting"></activity>
    <activity android:name=".GlobalGreeting"></activity>
    <activity android:name=".AlertPage"></activity>
    <activity android:name=".Settings"></activity>
    <activity android:name=".Alert2"></activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:09:05.980

您的清单中已经有`Setting`活动，但我认为包名称错误。尝试使用完整的包名来设置它，比如`com.january.floogoo.Settings`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:09:22.397

在 Manifest 中声明设置活动：

```
 <activity android:name="com.january.floogoo.Settings" /> 
```

并使用完整的包名称启动设置活动，因为您已经导入了另一个具有相同活动名称的包

```
 Intent intentd=new Intent(Current_Activity.this,
                              com.january.floogoo.Settings.class);
 startActivity(intentd); 
```

# ffmpeg - 将选项传递给 ffprobe

> ID：14137641
> 
> 赞同：2
> 
> 时间：2013-01-03T11:05:07.697
> 
> 标签：ffmpeg, ffprobe

我的 ffprobe 语法有问题，让打印格式输出默认值，没有键。有一个 nokey 选项，所以我传入这样的内容

ffprobe -print_format 默认nokey

但我什么也没得到，甚至没有错误。我的语法有问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T08:55:04.793

答案是

-printformat 默认=nokey=1

可以传入多个选项

-print_format 默认=nokey=1:noprint_wrappers=1

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T11:58:06.017

正确的句法应该是

ffprobe -print_format 默认 -skip_frame nokey -i

skip_frame = 告诉可以跳过什么样的帧以使 ffprobe 更快。“nokey”表示跳过非关键帧（P，B）。

但 nokey 是默认选项，您可以“跳过”（没有双关语 :D ）此选项。

# ruby-on-rails - 在 MailHelper 中使用自定义模块

> ID：14137649
> 
> 赞同：0
> 
> 时间：2013-01-03T11:05:26.137
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer, helpers

我有一个我想在我的邮件助手中访问的自定义模块，但我不知道如何包含它。

我的自定义模块`lib/workday.rb`：

```
module Workday
  def next_workday(date = Date.today)
    ...
  end
  ...
end 
```

我尝试在我的 MailHelper 中使用：

```
module MailHelper
  include Workday

  def next_workday(date = Date.today)
    Workday.next_workday(date)
  end
  ...
end 
```

当尝试使用助手时，我得到了这个：

```
undefined method `next_workday' for Workday:Module
/www/xxx/app/helpers/mail_helper.rb:4:in `next_workday' 
```

当手动将模块包含在控制台中时，它可以直接通过帮助程序正常工作：

```
> include Workday
=> Object
> Workday.next_workday
=> Fri, 04 Jan 2013 
> helpers.next_workday
=> Fri, 04 Jan 2013 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:46:59.990

如果您包含 a `Module`，则这些方法将可作为实例方法访问。如果您尝试`next_workday`直接通过模块访问该方法，则该方法必须定义为“类方法”（带有`self.`）。

如果你使用，你`MailHelper`应该工作：

```
module MailHelper
  include Workday
end 
```

无需定义`next_workday`方法，`MailHelper`因为它只是委托给`Workday#next_workday`反正。如果您将您`MailHelper`的课程包含在课程中，则可以使用以下方法访问该方法`next_workday`

# java - 运行包含太多测试用例的套件时内存不足（java 堆）

> ID：14137650
> 
> 赞同：4
> 
> 时间：2013-01-03T11:05:31.410
> 
> 标签：java, eclipse, unit-testing, junit, out-of-memory

我有一个引用多个测试类的套件。总共有 15,354 个测试用例。当我运行该套件时，我在第 11000 个标记处出现内存不足错误（或多或少）。

我在带有 4G RAM 的 Win 7 64 位上运行它。我还在 eclipse 的运行配置中将我的 java 堆最大化到 1536M。

如果我单独运行测试类，它运行良好。有没有我可以遵循的技术/或指南来减少我的记忆足迹？

我之前重构了代码以在我的测试用例中使用超类并使用类变量来减少内存消耗，但现在它不再削减它了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:23:25.837

您有几种技术来调整内存堆。最简单的选项是使用 -Xms。您可以看到[减少 java 内存](http://blog.griddynamics.com/2010/01/java-tricks-reducing-memory-consumption.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:17:43.873

As ar as I know there is a difference between junit and testng:

*   junit is initializing all test cases before running the first one
*   testng is initializing the test it will actually start

But I can't find the diagram, which was showing the running time of the same test written in testng compared to junit.

# java - 春季参数类型不匹配

> ID：14137652
> 
> 赞同：1
> 
> 时间：2013-01-03T11:05:43.407
> 
> 标签：java, spring

我正进入（状态

```
java.lang.IllegalArgumentException: argument type mismatch 
```

当我将我的jsp提交给控制器时。请建议我为什么会收到此错误？

这是堆栈跟踪

```
java.lang.IllegalArgumentException: argument type mismatch
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at com.as.brc.filters.LoggingFilter.doFilter(LoggingFilter.java:66)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Thread.java:619) 
```

我在jsp中使用了commandName

这是我在控制器中使用的

```
@RequestMapping("/save.do")
    public ModelAndView save(ModelAndView model,@ModelAttribute("classCommand")PurchaseMrn mrn,HttpServletRequest request,HttpServletResponse response,HttpSession session) throws JRException{
        User user=(User)session.getAttribute("loginuser");
        Business business=(Business)session.getAttribute("business");
        System.out.println("Business Is:"+business.getBusinessId());
        mrn.setCreatedBy(user.getId());
        mrn.setCreatedDate(new java.util.Date());
        mrn.setBusinessId(business);
        List<Stock> stockList=new ArrayList<Stock>();
        Stock stock=null;
        int i=0;
        String sid=new String();
        List<Integer> idList=new ArrayList<Integer>();
        List<PurchaseMrnItem> mrnItemsList=new ArrayList<PurchaseMrnItem>();

        List<PurchaseOrder> purchaseList=new ArrayList<PurchaseOrder>();
        int id=0;
        int sno=1;
        long total=0;
        Item item=null;
        for(PurchaseMrnItem mrnItem:mrn.getPurchaseMrnItems()){
            if(request.getParameter("itemId"+i)!=null){
                int itemId=Integer.parseInt(request.getParameter("itemId"+i));
                item=itemsService.findById(itemId, business.getBusinessId());
                mrnItem.setBusinessId(business);
                mrnItemsList.add(mrnItem);
                stock=new Stock(business,mrnItem.getItem(),mrnItem.getRecievedQty(),mrnItem.getAmount());
                stockList.add(stock);
                sid=request.getParameter("id"+i);
                id=Integer.parseInt(sid);
                idList.add(id);
                PurchaseOrder po=new PurchaseOrder(sno,item.getItemName(),item.getUnitType(),mrnItem.getRecievedQty(),mrnItem.getUnitPrice(),mrnItem.getSubtotal());
                purchaseList.add(po);
                total+=mrnItem.getSubtotal();
                sno++;
            }
            i++;
        }
        mrn.setPurchaseMrnItems(mrnItemsList);
        poService.addPOMRN(mrn);
        poService.saveStock(stockList);
        poService.updatePR(idList);
        String prNumber=request.getParameter("prNumber");
        String prDate=request.getParameter("prDate");
        String poDate=request.getParameter("poDate");
        String dcDate=request.getParameter("dcInvoiceDate");

        Map<String, Object> parameters = new HashMap<String, Object>();
        parameters.put("total",total+"");
          parameters.put("poNumber",mrn.getPoNumber()+"");
          parameters.put("dcNumber",mrn.getDcInvoiceNo()+"");
          parameters.put("vehicleNo",mrn.getVehicleNo()+"");
          parameters.put("prNumber",prNumber);
          parameters.put("prDate",prDate);
          parameters.put("poDate",poDate);
          parameters.put("dcDate",dcDate);

          JasperReport report = (JasperReport) JRLoader.loadObject(session
                    .getServletContext().getResourceAsStream(
                            "/WEB-INF/reports/mrn.jasper"));
            JasperPrint prt = JasperFillManager.fillReport(report, parameters,
                    new JRBeanArrayDataSource(purchaseList.toArray()));
            byte[] pdfReport = JasperExportManager.exportReportToPdf(prt);
            //System.out.println("PDF Length Is: "+pdfReport.length);

            Long count=poService.getMRNCount(business.getBusinessId(),Constants.ST_CPMRN);
            String invoiceNumber=business.getShortname()+"/"+Constants.ST_CPMRN+"/"+count;

            Attachment attachment=new Attachment(business,"application/pdf",invoiceNumber,pdfReport,Constants.ST_CPMRN);
          attachemntService.insert(attachment);

        //stockList=null;
        //stock=null;
        model=new ModelAndView("/jsp/stock/ShowPdf.jsp","msg", "Purchases  Added Successfully with MRN Number "+invoiceNumber);
        model.addObject("number",invoiceNumber);
        model.addObject("attachType",Constants.ST_CPMRN);
        return model;
    } 
```

# c++ - 如果我自己的构造函数在不诉诸“新”的情况下不能抛出，我如何减轻聚合对象的构造函数的异常？

> ID：14137653
> 
> 赞同：3
> 
> 时间：2013-01-03T11:05:49.177
> 
> 标签：c++, exception

我的 C++ 类聚合了一个辅助对象，它可能会在构造函数中抛出异常，但我自己的类不能抛出（我自己的类被一个框架使用，该框架没有为构造函数抛出的异常做好准备）。现在我通过创建对象来延迟辅助对象的构建来减轻这种风险，`new`以便我能够捕获任何异常：

```
struct HelperObject {
  HelperObject() {
    throw 0;
  }
}

struct MyObject {
  HelperObject *o;
  MyObject() : o( 0 ) {
    try {
      o = new HelperObject;
    } catch ( ... ) {
      // ...
    }
  }
}; 
```

但是，为此滥用有点烦人`new`；我突然不得不处理整个代码的指针，除了它让我可以更好地控制对象的构造时间之外，没有任何理由。

是否有可能在没有 ussign 的情况下达到这种效果`new`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:19:39.680

可以使用智能指针和额外的 MakeHelperObject 函数，以便在 HelperObject 域内完成异常。这只会使 MyObject 代码干净，但在 HelperObject 构建期间仍需要处理异常：

```
struct HelperObject {
  HelperObject() {
    throw 0;
  }

   static HelperObject* MakeHelperObject()
   {
     try
     {
       HelperObject* p = new HelperObject();
       return p; 
     }
     catch(const SomeException& e)
     {
      // deal with e
    }
    return NULL;
  }
};

struct MyObject {
  std::unique_ptr<HelperObject> o;
  MyObject() : o(HelperObject::MakeHelperObject())
  {
  }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T11:18:26.963

Well, no, as you need to suppress the exception and you can only do that with a try block, and function try blocks won't allow you to suppress the exception. It sort of begs the question of how the framework is going to behave if it thinks it successfully constructed the object which now has a big hole in it.

You should consider using an scoped pointer to automatically deallocate the `HelperObject`. It makes for more resilient code.

# java - 包括来自链接目录的实际父目录的 Ant 构建脚本

> ID：14137658
> 
> 赞同：0
> 
> 时间：2013-01-03T11:06:22.493
> 
> 标签：java, macos, ant, build

我有一个问题，包括来自父目录的 Ant 构建脚本。因为我需要为第三方软件开发一个自定义组件，所以我有一个项目目录结构设置如下：

```
/repos/HG REPO/Component  // repo for my component
/repos/GIT REPO/contrib/contrib-build.xml  // 3rd party software repo & build script
/repos/GIT REPO/contrib/[symlink to Component]/build.xml // My components build script 
```

现在我需要从 build.xml 导入 contrib-build.xml，所以在 build.xml 中我会使用：

```
<import file="../contrib-build.xml"/> 
```

但是，这会导致错误，因为它试图从

```
/repos/HG REPO/contrib-build.xml 
```

如何在不为导入文件参数提供绝对路径的情况下访问文件？如果我走那条路，那么必须手动记住在另一个开发设置上进行设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:09:30.320

你有没有尝试过？

```
<import file="../../GIT REPO/contrib/contrib-build.xml"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:12:19.573

错误是文件夹命名。Ant 不允许目录名称中有空格。尝试改变

```
/repos/HG_REPO/contrib.build.xml 
```

代替

```
/repos/HG REPO/contrib.build.xml 
```

# android - 除非 AsyncTask 完成，否则如何制作不可阻挡且未隐藏的进度对话框

> ID：14137661
> 
> 赞同：0
> 
> 时间：2013-01-03T11:06:29.653
> 
> 标签：android, android-asynctask, progressdialog

我正在使用 AsynTask 作为后台服务。

如果用户单击活动上的任何位置，进度对话框消失，我希望它出现在屏幕上，因为如果用户单击登录按钮并启动登录服务，我不希望用户能够在活动中进一步交互。

这是图像

![在此处输入图像描述](../Images/6d1476c30542c1677c462ad3c898cb7c.png)

在后台任务或线程或服务完成之前，用户必须看到进度对话框。因此，除非服务完成，否则用户必须等待与应用程序的任何进一步交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:15:58.300

尝试添加

```
progress-dialog.setCanceledOnTouchOutside(false);
progress-dialog.setOnKeyListener(new DialogInterface.OnKeyListener() {
                @Override
                public boolean onKey(DialogInterface dialogInterface, int i, KeyEvent keyEvent) {
                        return keyEvent.getKeyCode() == KeyEvent.KEYCODE_BACK;
                }
            }); 
```

# java - Java后端中的Google Drive API身份验证

> ID：14137664
> 
> 赞同：0
> 
> 时间：2013-01-03T11:06:39.963
> 
> 标签：java, google-drive-api

我正在使用用于桌面应用程序的谷歌驱动器 api 来插入文件。为了验证谷歌驱动器，我正在使用它生成的 url 并获取身份验证代码并将其粘贴回前端。

请建议一些其他方式，例如它在后端进行身份验证并自动上传文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:00:46.500

您可以通过在 Java 中实现一个监听 localhost 上的端口的 Web 服务器来减少用户的复制粘贴工作，例如`http://localhost:8181`. 然后，在请求刷新令牌时，您将使用该 URL 作为 redirect_uri 参数。如果您的应用程序还自动为用户打开刷新令牌请求页面，那么授权工作流程对用户来说应该相对简单直接。

如果您真的想要零用户交互，则需要[使用服务帐户](https://developers.google.com/drive/service-accounts)并将[服务帐户委派给用户的 Google Drives 域范围的权限](https://developers.google.com/drive/delegation)：

# javascript - jquery匿名方法

> ID：14137669
> 
> 赞同：0
> 
> 时间：2013-01-03T11:06:56.767
> 
> 标签：javascript, jquery

```
var createRemoveButton = function(instance, removeMethod, removeIcon) {
                return $("<a>")
                    .attr("id", "remove_" + instance.offerKey + "_" + instance.offerConfigurationId)
                    .attr("style", "cursor: pointer;")
                    .click(function(event) {
                        removeMethod(instance.offerConfigurationId);
                    })
                    .append($("<img>").attr("src", removeIcon));
            }; 
```

现在怎么用`removeMethod`？这`removeMethod`可以是 JavaScript 方法吗？我正在学习 ajax anyonmous 方法，但我遇到了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:31:24.963

`createRemoveButton`必须像这样调用函数

```
createRemoveButton(instance, function(id){
        console.log(id);
    }, icon);
// I assume that instance and icon are defined already 
```

第二个参数 - 匿名函数，回调。`$("<a>")`这是单击后将调用的实际函数。

您还可以避免使用匿名函数 - 只需定义要在元素单击时调用的函数。例如

```
var clickCallback=function(id){
    console.log(id);
};
    createRemoveButton(instance, clickCallback, icon); 
```

我希望这是有帮助的

# jquery - jQuery event.preventDefault() 在 h:commandLink 上不起作用

> ID：14137670
> 
> 赞同：3
> 
> 时间：2013-01-03T11:06:56.953
> 
> 标签：jquery, jsf, richfaces, spring-webflow

当用户单击取消链接时，我想将 jQuery 对话框显示为conformation-popup。（“你真的要取消吗？”）

```
jQuery(#{rich:element('cancel')}).click(function(event) {
    var dialog = jQuery(#{rich:element('cancelDialog')});
    if (dialog.is(':visible')) {
        jQuery(#{rich:element('cancelDialog')}).dialog('close');
    }
    else {
        jQuery(#{rich:element('cancelDialog')}).dialog('open');
        event.preventDefault();
    }
}); 
```

```
<h:commandLink action="cancel" immediate="true" id="cancel" value="cancel" /> 
```

对话框正在打开，但事件不会被取消（--> 取消事件继续进行）。当我改用 ah:commandButton 时，它可以工作，但客户希望将此作为链接。

我使用 JSF 2.0 (MyFaces)、jQuery 1.6.1、Spring Webflow 2.3.0.RELEASE 和 JSF Framework Richfaces 4.0.0.FINAL。有谁知道这些框架的解决方案？我不能使用其他框架。

谢谢你，帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:12:46.570

`return false`在函数中使用而不是`event.preventDefault()`

了解更多区别：['return false;'之间的区别 和'e.preventDefault();'</a>](http://css-tricks.com/return-false-and-prevent-default/)

 [已编辑](http://css-tricks.com/return-false-and-prevent-default/) 

[由于它仍然不起作用，我建议使用 onmousedown 事件而不是单击，具有相同的功能。](http://css-tricks.com/return-false-and-prevent-default/)[JSF h:commandLink 和 onclick 事件](https://blogs.oracle.com/jtb/entry/jsf_h_commandlink_and_onclick)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:39:48.123

我会这样做：

```
jQuery(#{rich:element('cancel')}).bind('click', function(event) {
    event.preventDefault();
    var dialog = jQuery(#{rich:element('cancelDialog')});
    var action = (dialog.is(':visible')) ? 'close' : 'open';
    dialog.dialog(action);
}); 
```

*好吧，实际上我不会，因为（a）我会使用 jQuery 1.7+ 和（b）我不会使用 JSF/Spring。*

# python - python脚本执行时间是否取决于互联网速度？

> ID：14137675
> 
> 赞同：0
> 
> 时间：2013-01-03T11:07:16.830
> 
> 标签：python, execution-time, pydub

我正在使用 pydub 将两个 wav 文件混合在一个文件中。每个 wav 文件大约有 25Mb，对我来说页面加载大约需要 4 秒（所以执行时间是 4 秒）

此执行时间是否取决于用户的互联网连接速度？

如果有任何意义：test.py 文件位于 GoDaddy 豪华 Linux 主机上）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:10:50.673

它没有：一旦你的脚本开始配音 wav 文件，这是另一项任务。

将其视为 3 步（我猜，提供的信息很少）

*   第 1 步：您发送请求 --> 由“网速”确定的时间
*   第 2 步：文件被配音 --> 服务器端工作，互联网速度不再计算在内
*   第 3 步：你得到结果 -> 再次与互联网速度相关

您必须分别对它们进行计时：仅在混合部分运行基准测试并亲自查看

有趣的实用方法：

考虑**晚餐过程**：您吃晚餐的时间并不取决于您点餐或服务员送餐给您的时间。

快速编辑：我刚刚意识到它*可能*取决于互联网速度，如果配音/混音部分在处理时是实时流式传输的。但这似乎不是你的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:09:11.207

不会。执行发生在服务器上，执行时间取决于服务器规格和您的脚本优化。互联网速度只影响客户端在服务器准备好并发送响应后何时收到响应！

简而言之：

1.  服务器从浏览器获取请求（请求到达服务器的时间取决于客户端和主机的互联网速度）
2.  服务器根据您的代码处理请求（执行时间取决于您的代码）
3.  服务器响应客户端，客户端接收响应（请求到达客户端的时间取决于客户端和主机的互联网速度）

# jquery - liftweb 通知/消息/警告第二次不起作用

> ID：14137676
> 
> 赞同：1
> 
> 时间：2013-01-03T11:07:16.887
> 
> 标签：jquery, scala, lift

我正在尝试在使用`liftweb 2.4`Scala Web 框架构建的应用程序中显示验证消息。
该应用程序只有一个文本框和提交按钮来将文本添加到数据库。提交代码段时检查文本框是否为空并显示一条消息。

```
 package snippet {

object Notes {

  def noteForm(in: NodeSeq): NodeSeq = {
    def add() = {
      if (note.description.isEmpty()) {
        S.error("descError", "Please enter a note")
      } else {
        note.save
        NotesServer ! "refresh"
        S.notice("descMessage", "Note added.")
      }

    }
    bind("f", in,
      "desc" -%> SHtml.text(note.description.is, note.description(_)),
      "submit" -%> SHtml.submit("Note It !", add)) ++ SHtml.hidden(add _)
  }

  def delete(note: Note): JsCmd = {
    note.delete_!
    NotesServer ! "refresh"
    S.notice("descMessage", "Note deleted.")
  }

}

object note extends RequestVar[Note]({ Note.create })

} 
```

html是

```
 <lift:surround with="default" at="content">
<div class="row">
    <div class="span11">
        <form class="lift:form.ajax">
            <lift:Notes.noteForm>
                <f:desc id="desc" placeholder="what do you want to note?"
                    class="xxlarge" />
                <f:submit class="btn primary" />
            </lift:Notes.noteForm>
        </form>
    </div>
</div>

<div class="row">
    <div class="span11">
        <lift:msg id="descError" errorClass="alert-message error" />
        <lift:msg id="descMessage" noticeClass="alert-message success" />
    </div>
</div>

    <div class="lift:comet?type=NotesComet" id="notes">
        <div class="row show-grid">
            <div class="note span10 lpad20">
                <div style="display: inline" class="desclist"></div>
                <a class="close rpad10 tpad10" href="javascript://">&times;</a>
            </div>
        </div>
    </div> 
```

彗星的代码

```
object NotesServer extends LiftActor with ListenerManager {

def createUpdate =  Note.allNotes

override def lowPriority = _ match{
  case "refresh" => updateListeners()
}

}  
class NotesComet extends CometActor with CometListener {
 private var notes: List[Note] = List()

 def registerWith = NotesServer

 override def lowPriority = {
  case n: List[Note] => notes = n; reRender()
 }

def render = "#notes" #> {
  (notes.reverse.map(note => ".desclist *" #> note.description &
  ".close [onclick]" #> ajaxInvoke(() => Notes.delete(note))))
}

} 
```

**消息显示仅在第一次完美地淡入和淡出时工作，但随后失败。**

这是我`Boot.scala`的淡入淡出

```
LiftRules.noticesEffects.default.set((notice: Box[NoticeType.Value], id: String) => {
  Full(JqJsCmds.FadeOut(id, 2 seconds, 2 seconds))
}) 
```

以下电梯标签

```
<lift:msg id="descError" errorClass="alert-message error" /> 
```

生产

```
<span id="descError" ></span> 
```

并且提交后，上面的html变成了下面的样子。淡入淡出效果完美

```
<span id="descError" style="display: none;">
<span id="descError">
    <span class="alert-message error">Please enter a note</span>
</span>
</span> 
```

对于后续的提交事件，消息不会显示，因为有两个具有相同 id 的 span 标签`descError`

现在问题很清楚了，但不知道如何解决这个问题。

**更新**

我用liftweb 2.5-M3尝试了相同的代码，我注意到的不同之处在于提交后生成的html如下。

```
<span id="descError" style="display: none;">
    <span class="alert-message error">Please enter a note</span>
</span> 
```

但仍然不会为后续提交显示该消息。

# c#-4.0 - 嵌套在 Mono 上的泛型类中的枚举的默认参数错误

> ID：14137687
> 
> 赞同：1
> 
> 时间：2013-01-03T11:07:40.417
> 
> 标签：c#-4.0, generics, mono

在泛型类中定义默认值枚举时，我有一些奇怪的行为。MS .NET 4.0 使用默认值，但 mono 似乎回退到第一个枚举定义（即零值）。

我写了一个小测试，它只能在 MS .NET 上正确运行，但不能在单声道上正确运行。

```
using System;
using NUnit.Framework;

namespace enumErrorTest
{

    class EnumWrapperCtor<T> {
        public enum Test {
            Wrong,
            MyDefault
        }

        private readonly T otherVal;
        private readonly Test myVal;

        public EnumWrapperCtor (Test value = Test.MyDefault)
        {
            myVal = value;
        }

        public Test getValue ()
        {
            return myVal;
        }

        public Test echo (Test value = Test.MyDefault)
        {
            return value;
        }
    }

    class EnumWrapperField<T> {
        public enum Test {
            Wrong,
            MyDefault
        }

        private readonly T otherVal;
        private readonly Test myVal = Test.MyDefault;

        public Test getValue ()
        {
            return myVal;
        }
    }

    class EnumWrapper {
        public enum Test {
            Wrong,
            MyDefault
        }

        private readonly Test myVal;//= Test.MyDefault;

        public EnumWrapper (Test value = Test.MyDefault)
        {
            myVal = value;
        }

        public Test getValue ()
        {
            return myVal;
        }
    }

    [TestFixture]
    class Proof
    {
        [Test]
        public void NoGenerics ()
        {
            var ew = new EnumWrapper();
            Assert.AreEqual(EnumWrapper.Test.MyDefault, ew.getValue());
        }

        [Test]
        public void Ctor ()
        {
            var ew = new EnumWrapperCtor<int>();
            Assert.AreEqual(EnumWrapperCtor<int>.Test.MyDefault, ew.getValue());
        }

        [Test]
        public void Field ()
        {
            var ew = new EnumWrapperField<int>();
            Assert.AreEqual(EnumWrapperField<int>.Test.MyDefault, ew.getValue());
        }

        [Test]
        public void Echo ()
        {
            var ew = new EnumWrapperCtor<int>();
            Assert.AreEqual(EnumWrapperCtor<int>.Test.MyDefault, ew.echo());
        }
    }
} 
```

失败的测试是`Ctor`和`Echo`。

```
# nunit-console bin/Debug/enumErrorTest.exe
NUnit-Console version 2.6.0.0
Copyright (C) 2002-2012 Charlie Poole.
Copyright (C) 2002-2004 James W. Newkirk, Michael C. Two, Alexei A. Vorontsov.
Copyright (C) 2000-2002 Philip Craig.
All Rights Reserved.

Runtime Environment - 
   OS Version: Unix 3.2.0.35
  CLR Version: 4.0.30319.1 ( Mono 4.0 ( 2.10.8.1 (Debian 2.10.8.1-5~dhx1~precise1) ) )

ProcessModel: Default    DomainUsage: Single
Execution Runtime: mono-4.0
.F.F..
Tests run: 4, Errors: 0, Failures: 2, Inconclusive: 0, Time: 0.070971 seconds
  Not run: 0, Invalid: 0, Ignored: 0, Skipped: 0

Errors and Failures:
1) Test Failure : enumErrorTest.Proof.Ctor
     Expected: MyDefault
  But was:  Wrong

at enumErrorTest.Proof.Ctor () [0x00000] in <filename unknown>:0

2) Test Failure : enumErrorTest.Proof.Echo
     Expected: MyDefault
  But was:  Wrong

at enumErrorTest.Proof.Echo () [0x00000] in <filename unknown>:0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:03:05.917

这实际上是 Mono C# 编译器中的一个错误。您可以通过指定默认参数参数轻松解决它。

Mono 版本 3.0.3 或更高版本应该已修复此问题。

# java - Hive / ElasticMapreduce：如何让 JsonSerDe 忽略格式错误的 JSON？

> ID：14137688
> 
> 赞同：4
> 
> 时间：2013-01-03T11:07:43.027
> 
> 标签：java, json, hadoop, hive, elastic-map-reduce

我对 Hive 和 ElasticMapreduce 相当陌生，目前我遇到了一个特定问题。在具有数十亿行 JSON 对象的表上运行 Hive 语句时，只要其中一行是无效/格式错误的 JSON，MapReduce 作业就会崩溃。

**例外：**

```
java.lang.RuntimeException: org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while processing writable {"ip":"39488130","cdate":"2012-08-09","cdate_ts":"2012-08-09 17:06:41","country":"SA","city":"Riyadh","mid":"6666276582211270592","osversion":"5.1.
1
at org.apache.hadoop.hive.ql.exec.ExecMapper.map(ExecMapper.java:161)
at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:50)
at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:441)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:377)
at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:396)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1132)
at org.apache.hadoop.mapred.Child.main(Child.java:249)
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while processing writable {"ip":"39488130","cdate":"2012-08-09","cdate_ts":"2012-08-09 17:06:41","country":"SA","city":"Riyadh","mid":"6666276582211270592","osversion":"5.1.1
at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:524)
at org.apache.hadoop.hive.ql.exec.ExecMapper.map(ExecMapper.java:143)
... 8 more
Caused by: com.google.gson.JsonSyntaxException: com.google.gson.stream.MalformedJsonException: Unterminated string near
at com.google.gson.Streams.parse(Streams.java:51)
at com.google.gson.JsonParser.parse(JsonParser.java:83)
at com.google.gson.JsonParser.parse(JsonParser.java:58)
at com.google.gson.JsonParser.parse(JsonParser.java:44)
at com.amazon.elasticmapreduce.JsonSerde.deserialize(Unknown Source)
at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:510)
... 9 more
Caused by: com.google.gson.stream.MalformedJsonException: Unterminated string near
at com.google.gson.stream.JsonReader.syntaxError(JsonReader.java:1110)
at com.google.gson.stream.JsonReader.nextString(JsonReader.java:967)
at com.google.gson.stream.JsonReader.nextValue(JsonReader.java:802)
at com.google.gson.stream.JsonReader.objectValue(JsonReader.java:782)
at com.google.gson.stream.JsonReader.quickPeek(JsonReader.java:377)
at com.google.gson.stream.JsonReader.peek(JsonReader.java:340)
at com.google.gson.Streams.parseRecursive(Streams.java:60)
at com.google.gson.Streams.parseRecursive(Streams.java:83)
at com.google.gson.Streams.parse(Streams.java:40)
... 14 more 
```

**我像这样创建我的表：**

```
CREATE EXTERNAL TABLE IF NOT EXISTS table1 (
column1 string,
column2 string
)
PARTITIONED BY (year string, month string)
ROW FORMAT SERDE 'com.amazon.elasticmapreduce.JsonSerde'
WITH SERDEPROPERTIES ('paths'='c1, c2')
LOCATION 's3://mybucket/table1'; 
```

我能做些什么来防止崩溃？忽略格式错误的 JSON 对象/字符串会很好，因为它的十亿分之一是格式错误的。

提前感谢您的帮助。最好的，萨沙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-26T19:24:50.233

通过更改行格式中使用的类并添加“格式错误”属性，您可以使您的表创建工作在格式错误的 JSON 上：

```
ROW FORMAT SERDE 'org.openx.data.jsonserde.JsonSerDe'
WITH SERDEPROPERTIES ("ignore.malformed.json" = "true")
LOCATION ... 
```

使用“hive-site.xml”中的“hive.aux.jars.path”属性或“ADD JAR”Hive 指令包含 JAR。[您可以在此处](http://www.congiu.net/hive-json-serde/1.3/cdh5/json-serde-1.3-jar-with-dependencies.jar)找到 JAR ，或从此[源代码](https://github.com/rcongiu/Hive-JSON-Serde)编译它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:28:09.227

来自 Apache 的 JsonSerDe 似乎忽略了格式错误的 JSON 字符串... [http://code.google.com/p/hive-json-serde/](http://code.google.com/p/hive-json-serde/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-03T13:02:17.770

基本上，发生上述错误是因为 JSON 无效字符串。尝试解决此问题。

否则，为避免您的应用程序崩溃，请在 try catch 块中捕获该异常并进一步处理。这样您的应用程序就不会崩溃。

# git - git svn fetch 不工作

> ID：14137692
> 
> 赞同：3
> 
> 时间：2013-01-03T11:08:02.897
> 
> 标签：git, svn, version-control, git-svn

`git svn fetch`不会从远程 SVN 服务器获取任何新版本，即使我知道我的本地版本已过时。

这样做`git log`时，最后一次修订发生在 12 月 5 日，而当我输入`git svn log`最新修订时是昨天（不是我的）。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T12:00:40.387

好像`git svn rebase`修好了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-10T13:53:22.607

我对 v.2.20.1 有这个问题。Git 的升级解决了我的问题。请参阅此线程[https://stackoverflow.com/a/54910767/2432802](https://stackoverflow.com/a/54910767/2432802)

# erlang - 如何在 Erlang 的不同线程中从同一个 UDP 端口接收数据？

> ID：14137700
> 
> 赞同：1
> 
> 时间：2013-01-03T11:08:29.320
> 
> 标签：erlang, udp

当我尝试做以下事情时

```
init() ->
    case gen_udp:open(10000, [binary, {active, false}]) of
        {ok, Socket} ->
            startListen(5, Socket);
    end.

startListen(0, Socket) ->
    Socket;
startListen(N, Socket) ->
    Pid = spawn_link(fun() -> listen(Socket) end),
    startListen(N-1, Socket).

listen(Socket)->
    receive
        {udp, Socket, Host, Port, Data} ->
            ...
    end. 
```

它表明它无法从任何线程接收。我做错了什么，或者实际上在erlang中是不可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:51:52.897

你做错了什么。当套接字不是活动套接字时，您的 5 个进程必须`gen_udp:recv/2,3`在这种情况下显式调用自己，但我不完全确定这会起作用。我想你会得到`{error, not_owner}`回报。

另一种可行的方法是让原始进程获取数据包，然后将它们作为正常消息一次转发给您的工作人员。这将起作用，但您需要稍微更改代码。

有关背景信息，请查看所有者或控制过程的概念。每个端口/套接字都有一个，如果所有者崩溃，套接字也会关闭。

# android - 将打开应用程序的文件复制到应用程序中的某个临时文件夹中

> ID：14137706
> 
> 赞同：0
> 
> 时间：2013-01-03T11:08:50.270
> 
> 标签：android, android-intent

我正在使用我自己的扩展名“.swp”将文件与我的应用程序相关联。当用户尝试使用该扩展名打开文件时，我可以选择我的应用程序。例如，如果在 sd 卡的任何地方都有文件“file1.swp”，并且如果用户单击该文件，我的应用程序也将在打开该应用程序的选项列表中可用。但是我想在它选择我的应用程序打开时将“file1.swp”保存在某个临时文件夹中。

有什么建议请......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T04:11:38.130

我在下面发布我的整个代码，以便其他有相同问题的人可以参考：

```
String strFilename = "Not set";
        Intent intent = getIntent();
        if(intent != null)
        {
            Uri uri = intent.getData();
            if(uri != null)
            {
                strFilename = intent.getData().getPath();
                String NameOfFile = intent.getDataString();

                Toast.makeText(SplashActivity.this, "strFilename" + strFilename + "" + "Name of file is::" + NameOfFile, Toast.LENGTH_LONG).show();
                System.out.println("strFileName::"+ strFilename );

                System.out.println("NameOfFile::"+ NameOfFile );
                try {
                    copyFile(strFilename,"/mnt/sdcard/Profile.swp");
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
        }else{

        }

        }

//copy file into other location
    private void copyFile(String assetFilename, String outFileName ) throws IOException{

        System.out.println("outFileName ::" + outFileName);
        //Open your local db as the input stream
        InputStream myInput = new FileInputStream(assetFilename);

        //Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[2048];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    } 
```

# android - 设置可见性不起作用

> ID：14137710
> 
> 赞同：3
> 
> 时间：2013-01-03T11:09:01.887
> 
> 标签：android, android-layout, visibility

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/day_frame"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="4dip"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:orientation="vertical"
        android:padding="2dip" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="1dip" >

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dip"
                android:src="@drawable/marca_bike_event" />

            <ImageView
                android:id="@+id/imageView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dip"
                android:src="@drawable/marca_bike_event" />

            <ImageView
                android:id="@+id/imageView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dip"
                android:src="@drawable/marca_bike_event" />

            <ImageView
                android:id="@+id/imageView4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dip"
                android:src="@drawable/marca_bike_event" />

            <ImageView
                android:id="@+id/imageView5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dip"
                android:src="@drawable/marca_bike_event" />

            <ImageView
                android:id="@+id/imageView6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/marca_bike_event" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="1dip" >

            <ImageView
                android:id="@+id/imageView7"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dip"
                android:src="@drawable/marca_bike_event" />

            <ImageView
                android:id="@+id/imageView8"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dip"
                android:src="@drawable/marca_bike_event" />

            <ImageView
                android:id="@+id/imageView9"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dip"
                android:src="@drawable/marca_bike_event" />

            <ImageView
                android:id="@+id/imageView10"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dip"
                android:src="@drawable/marca_bike_event" />

            <ImageView
                android:id="@+id/imageView11"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dip"
                android:src="@drawable/marca_bike_event" />

            <ImageView
                android:id="@+id/imageView12"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/marca_bike_event" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <ImageView
                android:id="@+id/imageView13"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dip"
                android:src="@drawable/marca_bike_event" />

            <ImageView
                android:id="@+id/imageView14"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dip"
                android:src="@drawable/marca_bike_event" />

            <ImageView
                android:id="@+id/imageView15"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dip"
                android:src="@drawable/marca_bike_event" />

            <ImageView
                android:id="@+id/imageView16"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dip"
                android:src="@drawable/marca_bike_event" />

            <ImageView
                android:id="@+id/imageView17"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dip"
                android:src="@drawable/marca_bike_event" />

            <ImageView
                android:id="@+id/imageView18"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/marca_bike_event" />
        </LinearLayout>

        <TextView
            android:id="@+id/day_number"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="2dip"
            android:gravity="right|bottom"
            android:textSize="18sp"
            android:textStyle="bold" />
    </LinearLayout>

</RelativeLayout> 
```

这是我的自定义视图

```
import java.util.Calendar;

public class DayView extends LinearLayout {

    private final boolean belongsToMonth;
    private final TextView numberView;
    private int racesNum = 0;
    private final ImageView iv1, iv2, iv3, iv4, iv5, iv6, iv7, iv8, iv9, iv10,
    iv11, iv12, iv13, iv14, iv15, iv16, iv17, iv18;

    public DayView(final Context context, final Calendar moving,
            final SingleCalendar calendar) {
        super(context);
        View.inflate(context, R.layout.calendar_week_day, this);
        iv1 = (ImageView) findViewById(R.id.imageView1);
        iv2 = (ImageView) findViewById(R.id.imageView2);
        iv3 = (ImageView) findViewById(R.id.imageView3);
        iv4 = (ImageView) findViewById(R.id.imageView4);
        iv5 = (ImageView) findViewById(R.id.imageView5);
        iv6 = (ImageView) findViewById(R.id.imageView6);
        iv7 = (ImageView) findViewById(R.id.imageView7);
        iv8 = (ImageView) findViewById(R.id.imageView8);
        iv9 = (ImageView) findViewById(R.id.imageView9);
        iv10 = (ImageView) findViewById(R.id.imageView10);
        iv11 = (ImageView) findViewById(R.id.imageView11);
        iv12 = (ImageView) findViewById(R.id.imageView12);
        iv13 = (ImageView) findViewById(R.id.imageView13);
        iv14 = (ImageView) findViewById(R.id.imageView14);
        iv15 = (ImageView) findViewById(R.id.imageView15);
        iv16 = (ImageView) findViewById(R.id.imageView16);
        iv17 = (ImageView) findViewById(R.id.imageView17);
        iv18 = (ImageView) findViewById(R.id.imageView18);
        final ImageView[] views = new ImageView[] { iv1, iv2, iv3, iv4, iv5,
                iv6, iv7, iv8, iv9, iv10, iv11, iv12, iv13, iv14, iv15, iv16,
                iv17, iv18 };
        for (final ImageView v : views) {
            v.setVisibility(View.INVISIBLE);
        }

        numberView = (TextView) findViewById(R.id.day_number);
        numberView.setText(Integer.toString(moving.get(Calendar.DAY_OF_MONTH)));
        setTag(moving.clone());
        belongsToMonth = (moving.get(Calendar.MONTH) == calendar.current
                .get(Calendar.MONTH));
        final Resources res = getResources();
        if (!belongsToMonth) {
            numberView.setTextColor(res
                    .getColor(R.color.calendar_unbelonging_dayview_text));
            setBackgroundResource(R.drawable.unbelonging_dayview);
        } else {
            numberView.setTextColor(res
                    .getColor(R.color.calendar_belonging_dayview_text));
            setBackgroundResource((DateParseUtils.areEqualDays(moving,
                    calendar.today)) ? R.drawable.selected_dayview
                            : R.drawable.unselected_dayview);
        }
    }

    protected void onMeasure(final int widthMeasureSpec,

    public boolean belongsToMonth() {

    public Calendar getCalendar() {

    public void addRace(final ParseObject carrera) {
        final ImageView[] views = new ImageView[] { iv1, iv2, iv3, iv4, iv5,
                iv6, iv7, iv8, iv9, iv10, iv11, iv12, iv13, iv14, iv15, iv16,
                iv17, iv18 };

        if (racesNum < views.length) {
            final ImageView iv = views[racesNum];
            final int id = getRaceId(carrera);
            iv.setImageDrawable(getContext().getResources().getDrawable(id));
            for (int i = 0; i < views.length; i++) {
                final ImageView iv2 = views[i];
                if (i <= racesNum) {
                    iv2.setVisibility(View.VISIBLE);
                } else {
                    iv2.setVisibility(View.INVISIBLE);
                }
            }
            racesNum++;
        }

    }

    private int getRaceId(final ParseObject carrera) {

        final String disciplina = carrera.getString("disciplinaId");
        if (disciplina.equals(SettingsActivity.ID_BIKE_EVENT)) {
            return R.drawable.marca_bike_event;
        } else if (disciplina.equals(SettingsActivity.ID_BMX)) {
            return R.drawable.marca_bmx;
        } else if (disciplina.equals(SettingsActivity.ID_ENDURO)) {
            return R.drawable.marca_enduro;
        } else if (disciplina.equals(SettingsActivity.ID_FREESTYLE)) {
            return R.drawable.marca_freestyle;
        } else if (disciplina.equals(SettingsActivity.ID_MOTO_GP)) {
            return R.drawable.marca_moto_gp;
        } else if (disciplina.equals(SettingsActivity.ID_MOTOCROSS)) {
            return R.drawable.marca_motocross;
        } else if (disciplina.equals(SettingsActivity.ID_MOTORBIKE_RALLY)) {
            return R.drawable.marca_mc_rally;
        } else if (disciplina.equals(SettingsActivity.ID_MTB_4X)) {
            return R.drawable.marca_mtb_4x;
        } else if (disciplina.equals(SettingsActivity.ID_MTB_DH)) {
            return R.drawable.marca_mtb_dh;
        } else if (disciplina.equals(SettingsActivity.ID_MTB_ENDURO)) {
            return R.drawable.marca_mtb_enduro;
        } else if (disciplina.equals(SettingsActivity.ID_QUADCROSS)) {
            return R.drawable.marca_quad_cross;
        } else if (disciplina.equals(SettingsActivity.ID_SUPERBIKE)) {
            return R.drawable.marca_superbike;
        } else if (disciplina.equals(SettingsActivity.ID_SUPERMOTO)) {
            return R.drawable.marca_supermoto;
        } else if (disciplina.equals(SettingsActivity.ID_TRIAL)) {
            return R.drawable.marca_trial;
        } else if (disciplina.equals(SettingsActivity.ID_URBAN_DH)) {
            return R.drawable.marca_urban_dh;
        } else if (disciplina.equals(SettingsActivity.ID_XC_RALLIES)) {
            return R.drawable.marca_xc_rallies;
        }
        return R.drawable.marca_other_event;
    }

} 
```

`addRace`正在从 的`OnPostExecute`方法中调用`AsyncTask`。但是，它不会使任何 ImageViews 可见。我已经对其进行了调试，并在该行上放置了一个断点`setVisibility`，它实际上在主线程上调用了 setVisibility，但它不起作用。尝试更改 ImageView 可绘制对象也不起作用。

我已经尝试设置它的可见性并更改构造函数上的可绘制对象，并且它可以工作。似乎该`setVisibility`方法什么也没做。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:34:43.953

好的，解决了。

我`DayView`的 s 是在`ArrayAdapter<Calendar>`. 我所要做的就是在然后调用的`getView`方法中进行所有视图操作，而不是尝试直接修改它们。`ArrayAdapter``adapter.notifyDataSetChanged()`

此外，我必须使用 ViewHolder 模式才能正确完成修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:56:06.760

您试图`ImageView`从背景设置可见性`Async thread`。您**不能直接从****后台线程**访问视图！

您可以`Handler`在下一个方法中使用和更新视图的可见性

```
public void handleMessage(Message msg) {
    super.handleMessage(msg);
    // update views here
} 
```

或者您可以直接在代码中使用下一个示例代码：

```
 imageView.post(new Runnable() {
        @Override
        public void run() {
            imageView.setVisibility(View.VISIBLE));
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-27T02:34:23.237

在以下情况下总是对我有用的最后手段

```
.setVisibility(VISIBLE/INVISIBLE/GONE) ; 
```

失败是将我的布局添加到/从附加到的 ViewGroup 中删除。将此发布到 View 线程，它将完成这项工作：

```
m_viewIsVisible=/false/true; //set before hand

public void run()
{    
    try
    {
       if (!m_viewIsVisible)
           RootView.rootGroop().removeView(currentLayout);
       else
           RootView.rootGroop().addView(currentLayout);

    } catch (Exception ex)
    {
        Log.e(TAG, "-Add/Remove layout throws exception:: " + ex.toString());
    }
} 
```

这里 currentLayout 是您想要显示/隐藏的顽固布局。RootView.rootGroop() 为我提供了 currentLayout 所属的 ViewGroup。您应该应用自己的逻辑来持有和获取对父 ViewGroup 的引用。

# python - 如何通过 Python 登录 Microsoft Live

> ID：14137712
> 
> 赞同：2
> 
> 时间：2013-01-03T11:09:08.087
> 
> 标签：python, login, web

我对 Python 并不完全陌生，但我正在寻找一种通过 Python 登录 Windows Live 的方法。

现在我知道这里已经有关于这个的帖子了，但我一直遇到麻烦。该网站是[http://login.live.com/](http://login.live.com/)，我找到了输入表单的名称，电子邮件是“login”，密码是“passwd”。但我不明白。我在这里使用了几个类似于我正在尝试做的脚本，我试图将它与它集成，但它没有工作。

这是我的代码的一部分

```
import requests
import sys

   EMAIL = 'replace with actual email'
   PASSWORD = 'replace with actual password'

   URL = 'https://login.live.com/'

   def main():
# Start a session so we can have persistant cookies
session = requests.session(config={'verbose': sys.stderr})

# This is the form data that the page sends when logging in
login_data = {
    'login': EMAIL,
    'passwd': PASSWORD,
    'submit': 'login',
} 
```

这个问题是我被卡住了，我现在不知道该怎么做，我一直在 Python 2.7 (http://gyazo.com/a433611b70c4f6707987cdd9fc4e467e) 上收到一个我无法修复的详细错误，并且我不知道如何验证所有这些，然后如果您登录或密码是假的，它会回复...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T11:19:19.990

该错误正是错误消息所说的。`requests.session`不接受任何参数，并且您正在向它传递一个参数。[用法](http://docs.python-requests.org/en/latest/user/advanced/#session-objects)：

```
session = requests.Session()
login_data = {
    'login': EMAIL,
    'passwd': PASSWORD,
    'submit': 'login',
}

session.post( URL, data = login_data ) 
```

# iphone - cocos2d中如何将uikit添加到cclayer子类？

> ID：14137720
> 
> 赞同：0
> 
> 时间：2013-01-03T11:09:28.617
> 
> 标签：iphone, cocos2d-iphone

如果我想继承一个 cclayer 来添加 uikit 元素，我需要添加视图的属性是什么？

我想我不能使用 [ccdirector shareddirector] openGLView

既然是主要观点，对吗？

有没有类似的东西： self.view 作为 cclayer 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:26:44.550

我认为你需要的是[CCUIViewWrapper](http://www.cocos2d-iphone.org/forum/topic/6889)

您基本上正常初始化 UIKit 的东西，然后将其添加为 CCNode。该 CCNode 可以作为子节点添加到 CCNode 的任何子类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:55:47.797

看到这个

这是将`UIKit`元素嵌入`Cocos2D`代码的链接。

看你可能会从这里得到一些想法[链接](http://www.raywenderlich.com/4817/how-to-integrate-cocos2d-and-uikit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T11:59:33.733

您必须将 UIKit 视图添加到 CCDirector 视图或主窗口。您不能将 UIKit 视图添加到 cocos2d 节点（CCLayer 等）。

这也意味着默认情况下任何 UIKit 视图都将位于 cocos2d 视图的前面（在所有 cocos2d 节点的前面）。

如果这就是您所要求的，您不能在 cocos2d 节点的前面和后面有 cocos2d 节点。UIKit 视图要么完全位于所有 cocos2d 显示的前面，要么如果设置正确，您可以在所有 cocos2d 显示的后面添加 UIKit 视图。但是你不能在 cocos2d 节点/层/精灵/等之间分层 UIKit 视图。

# android - 在listview行android中选择imageview

> ID：14137728
> 
> 赞同：1
> 
> 时间：2013-01-03T11:09:47.760
> 
> 标签：android, listview, imageview, contacts

我目前正在开发一个需要显示联系人列表的应用程序。您可以单击他们的姓名，它会将您带到一个新屏幕，显示有关此联系人的信息，并允许您通过选择他们的电话号码来呼叫他们。然而，

我想在列表中的名称旁边添加一个呼叫图标（当前为 ImageView），当用户按下呼叫图标而不是名称时，电话会立即呼叫该用户而不是转到信息页面。

我已经将图像添加到该行并使其可点击，但我完全不知道如何为其实现 onClickListener。我做了很多搜索，但大多数教程似乎只解释了如何将图像添加到一行，而不是如何向它添加 OnClickListener 并让它做一些事情。

下面分别是 List 和 Row 的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

  <ListView android:id="@+id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>
    <TextView android:id="@+id/android:empty"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/no_notes"/>
</LinearLayout> 
```

这是 Row 的一个：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <TextView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/text1"
        android:layout_width="260dp"
        android:layout_height="60dp"
        android:focusable="false"
        android:textColor="#FFF"
        android:textSize="26sp" />

    <ImageView
        android:id="@+id/phoneButton"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignBottom="@+id/text1"
        android:layout_toRightOf="@id/text1"
        android:clickable="true"
        android:contentDescription="TODO"
        android:focusable="false"
        android:src="@android:drawable/sym_action_call" />

</RelativeLayout> 
```

这是 onListItemClick 方法：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    Intent i = new Intent(this, PersonalPhonebookView.class);
    i.putExtra(NotesDbAdapter.KEY_ROWID, id);
    startActivityForResult(i, ACTIVITY_VIEW);
} 
```

你们中的一些人可能会认出 Android 记事本教程中的代码片段。那是因为我使用记事本代码创建了一个自定义联系人列表。我不是一个好的程序员，所以我需要一些东西来开始。

这是屏幕的图像

![在此处输入图像描述](../Images/881a75609c48c04fc8ed19741d134ee5.png)

我所拥有的是当用户选择其中一个名称时，他会转到该用户的信息页面。我想要的是当用户选择联系人右侧的电话时，电话会自动呼叫该用户的电话号码。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:48:40.083

尝试使用此`getView`方法创建`custom BaseAdapter`：

```
 @Override
    public View getView(final int position, View convertView, ViewGroup parent) {

        ViewHolder holder;

        if (convertView == null) {
            LayoutInflater viewInflater;
            viewInflater = getLayoutInflater();
            convertView = viewInflater.inflate(R.layout.listview, null);

            holder = new ViewHolder();
            holder.textview = (TextView) convertView.findViewById(R.id.TextView01);
            holder.imageview = (ImageView) convertView.findViewById(R.id.ImageView01);

            convertView.setTag(holder);

        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        if (holder.textview != null && position < data_text.length)
            holder.textview.setText(data_text[position]);
        if (holder.imageview != null && position < data_image.length){
            holder.imageview.setImageResource(data_image[position]);
            holder.imageview.setOnClickListener(new OnClickListener() {                 
                @Override
                public void onClick(View v) {
                    Toast.makeText(getApplicationContext(), "Image Clicked : "+position, Toast.LENGTH_LONG).show();                     
                }
            });
        }
        return convertView;
    }

    static class ViewHolder {
      TextView textview;
      ImageView imageview;
    } 
```

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:16:54.850

在填充列表中的每一行时，在适配器的 getView() 方法中写入 imageView.setOnClickListener。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:08:55.770

**您可以在getView**方法本身中添加该组件的单击，这是它的一个小例子。

```
.......

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    .................
    .................
    .................
    txt_assassinate.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Log.d("Adapter k ", " position " + position);
            openpopup();
        }
    });
    return convertView;
}

............. 
```

# javascript - 如何在不重复 jQuery addClass 的情况下做得更好？

> ID：14137730
> 
> 赞同：1
> 
> 时间：2013-01-03T11:10:04.847
> 
> 标签：javascript, jquery, forms

在页面加载时的表单上，我将输入中的默认文本设为浅灰色，如下所示：

```
var formInputs = $('#notifyForm input');
formInputs.addClass('defaultText'); 
```

然后我使用 removeClass 让它们在焦点上变回黑色。这一切都很好。我遇到的问题是，如果出现错误并且页面重新加载以显示 PHP 错误消息，则仍在输入中的用户文本变为灰色。我的解决方案是：

```
formInputs.addClass(function()
{
    if($(this).attr('value') === $(this).attr('title'))
    {
        $(this).addClass('defaultText');
    }
}); 
```

但我知道在 addClass 处理程序中调用 addClass 肯定有问题。谁能建议一个更好的方法来做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T11:12:38.697

从您传递给您的函数中，`addClass`您可以返回一个字符串，该字符串将是您要添加的类名。试试这个：

```
formInputs.addClass(function() {
    if (this.value === this.title)
        return 'defaultText';
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:27:01.110

根据 Rory 提供的答案，可以通过以下标准进行选择`addClass()`：

```
 formInputs.filter(function() {
    return this.value === this.title;
 }).addClass('defaultText'); 
```

顺便说一句，有点令我惊讶的是，该`addClass()`方法的速度大约是该方法的一半（在 Chrome 23/Win XP 中慢了 43%）`filter()`（尽管仍然是一个相当小的优化）。

参考：

*   [`filter()`](http://api.jquery.com/filter/).

# sql - 如何显示两个月之间的天数

> ID：14137732
> 
> 赞同：0
> 
> 时间：2013-01-03T11:10:07.733
> 
> 标签：sql, sql-server, sql-server-2008

我有一个有列的表`empname,fdate,tdate,totleave`

如果员工从1月28日到2月2日请假，一共请假5天，准备工资的时候，我只想找回1月份的休假天数，那3天我只想找回，2月份剩下的天数会找回在二月份，你能告诉我如何为此编写查询吗？

这是我的查询，但它是错误的

```
select ((month(tdate )) - (day(fdate ))) as no_of_days,month(fdate )as month 
from leavedepot 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:23:35.513

您可以尝试以下方法吗？它使用[`DateDiff()`](http://www.w3schools.com/sql/func_datediff.asp).

```
select datediff(day, startdate, enddate) as no_of_days,
month(fdate )as month 
from leavedepot; 
```

编辑：[SQLFIDDLE 演示](http://sqlfiddle.com/#!6/e54da/6)

样本数据：

```
ID  STARTDATE   ENDDATE
1   2012-01-28  2012-02-02
2   2012-02-03  2012-02-10 
```

询问：

```
 SELECT month(startdate) as Month_Number,
    datename(month, startdate) as Month, -- month is a reserved word
    case when month(startdate) <> month(enddate)
    then datediff(day, startdate, DATEADD(month, 
               ((YEAR(startdate) - 1900) * 12)
               + MONTH(startdate), -1)) 
    else datediff(day, startdate, enddate)
    end
    as Leaves
    from myleaves
    ; 
```

结果：

```
MONTH_NUMBER    MONTH       LEAVES
1               January     3
2               February    7 
```

如果您想排除周末......：这里我们使用一个变量来定义开始结束日期，但您也可以使用您自己的表格列。:) 参考帖子：[使用 sql server 获取不包括周末的 DATEDIFF](https://stackoverflow.com/questions/7388420/get-datediff-excluding-weekends-using-sql-server)。您需要将此查询合并到上述内容中。

```
declare @d1 datetime, @d2 datetime
select @d1 = '9/9/2011',  @d2 = '9/18/2011'

select datediff(dd, @d1, @d2) - (datediff(wk, @d1, @d2) * 2) -
       case when datepart(dw, @d1) = 1 then 1 else 0 end +
      case when datepart(dw, @d2) = 1 then 1 else 0 end; 
```

您仍然可以删除您的`2`日期以排除 start 和 enddate...我们使用[datepart](http://www.w3schools.com/sql/func_datepart.asp)的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:30:19.420

***不考虑周六和周日***（请用列名替换变量）；

```
declare @fdate datetime = '20130128'
declare @tdate datetime = '20130202'

Select case  
         when datepart(mm,@fdate) = datepart(mm,@tdate) --check if same month
         then datediff(day,@fdate, @tdate) 
         else datediff(day,@fdate, 
            convert(varchar(4),datepart(yy,@fdate)) + 
            right('0' + convert(varchar(2), datepart(mm,@fdate)+1),2) + '01') - 1 
         end
AS leavesOfMonth 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T11:18:42.543

这为您提供了当月的最后一天，因此您可以轻松实现

```
SELECT DATEADD(s,-1,DATEADD(mm, DATEDIFF(m,0,GETDATE())+1,0)) 
```

同样，当您计算 2 月时，您可以在下个月获得当月的第一天。

上个月的最后一天

```
SELECT DATEADD(s,-1,DATEADD(mm, DATEDIFF(m,0,GETDATE()),0)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T11:27:06.973

此代码为您提供从 fdate 到月底的天数：

```
select 
datediff(dd,fdate,
dateadd(dd, -1, dateadd(mm,1,cast
(cast(datepart(yy,fdate) as varchar) + '-' + 
cast(datepart(mm,fdate) as varchar) + '-01'
as datetime
))))
from dbo.TST 
```

TST 是带有日期的构造表

# php - 当我尝试访问管理 url 时出现内部服务器错误（主页正在工作）

> ID：14137733
> 
> 赞同：-2
> 
> 时间：2013-01-03T11:10:09.070
> 
> 标签：php, .htaccess

我正在处理 .htaccess 文件，前端工作正常。但是当我尝试访问管理员时，它给了我内部服务器错误。它是一个定制的 mvc 框架。

这是我的 .htacess 文件

```
DirectoryIndex index.php

Options -Indexes

Options +FollowSymlinks
Options -MultiViews
ErrorDocument 404 /sitemap.php
RewriteEngine on
RewriteBase /
RewriteCond %{HTTP_HOST} ^vividtron.demolocation.com [NC]

RewriteRule ^index.htm$ /index.php [NC]
RewriteRule ^all-category.htm$ /all-category.php [NC]
RewriteRule ^brands.htm$ /brands.php [NC]
RewriteRule ^search.htm$ /search.php [NC]

RewriteRule ^([_-a-zA-Z0-9]+)$ /sub-category.php?furl=$1 [NC]
RewriteRule ^customer-service.htm$ /customer-service.php [NC]
RewriteRule ^([_-a-zA-Z0-9]+).htm$    /static-page.php?furl=$1 [NC] 
RewriteRule ^offer/([_-a-zA-Z0-9]+).htm$    /special-offer.php?furl=$1 [NC]
RewriteRule ^pages/([_-a-zA-Z0-9]+).htm$    /popup-pages.php?furl=$1 [NC]

#RewriteRule ^category/([_-a-zA-Z0-9]+)$ /product-listing.php?surl=$1 [NC]
RewriteRule ^category/([_-a-zA-Z0-9]+)$ /featured-product.php?surl=$1 [NC]
RewriteRule ^brand/([_-a-zA-Z0-9]+)$ /product-series.php?burl=$1 [NC]
RewriteRule ^series/([_-a-zA-Z0-9]+)/([_-a-zA-Z0-9]+)$ /model-listing.php?burl=$1&surl=$2 [NC]
RewriteRule ^product/([a-zA-Z0-9_-]+)$ /product-detail.php?furl=$1 [NC]
RewriteRule ^([._-a-zA-Z0-9]+)/([_-a-zA-Z0-9]+)/([_-a-zA-Z0-9]+)$ /pro-detail.php?url=$1&proId=$2&bid=$3 [NC]
RewriteRule ^([._-a-zA-Z0-9]+)/([_-a-zA-Z0-9]+)$ /pro-detail.php?url=$1&proId=$2 [NC] 
```

谢谢是提前。请查看文件为什么 url [http://vividtron.demolocation.com/admin/login.php](http://vividtron.demolocation.com/admin/login.php)不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:44:37.563

你试过不同的主机吗？我的一个脚本总是向我显示内部服务器错误，但是当我切换主机时，它可以完美运行。

# javascript - 显示加载图像

> ID：14137738
> 
> 赞同：2
> 
> 时间：2013-01-03T11:10:32.737
> 
> 标签：javascript, html, dom-events

我正在构建一个 Web 应用程序，`struts2.`我有一个用户单击提交按钮的表单，我正在处理表单并重定向回同一`jsp`页面。我想添加加载图像，以便用户可以了解正在处理的请求。我尝试了通过在表单标签结束后编写脚本并将图像添加到表单中但无法在提交表单时正确获取它的方式。我没有使用 jQuery ，所以`$.load()`对我没有用。请任何人都可以帮助我。

提前致谢

```
<script type="text/javascript">
    (function(d) {
        alert("in");
        d.getElementById('loginform').onsubmit = function () {
            alert("on submit");
            d.getElementById('submit').style.display = 'block';
            d.getElementById('loading2').style.display = 'block';
        };
    }(document));
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:14:04.763

如果它是重定向 - 这意味着您正在将内容发送到服务器并返回，这意味着在提交时页面的当前生命周期在发布信息后结束，并且在返回时开始新的周期。

一种方法是在从服务器对代码执行任何类型的业务之前刷新加载图像。

在 .net 中，我们使用两个语句来做到这一点：

```
 Response.Write("your loading image in html format");
 Response.Flush(); 
```

因此，即使在整个内容被加载回浏览器之前，它的一部分也会被发送到客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T06:06:49.557

我找到了一个解决方法来查看加载图像。在这里张贴，以便其他人可以受益。
我拍摄了一张 gif 图像并将其添加到 div 标记中，其中 css 属性显示为块。

```
<div id="loading" style="position:absolute; width:100%; text-align:center; top:200px">
<img src = "images/loading.gif" width="70px" height="70px"/> </div> 
```

然后我编写了一个在事件 onload 上调用的 javascript 函数。在这个函数中，我将显示属性设置为无。

```
function stopLoading()
   { 
     document.getElementById('loading').style.display='none';
   } 
```

就我而言，当我发送任何服务器请求并将设置重新加载以不显示时，我正在设置显示块。
希望这对其他人有帮助。

# java - 哪个是java中用于更新列表中对象（如果存在）的最快和最有效的实现，否则添加它

> ID：14137746
> 
> 赞同：0
> 
> 时间：2013-01-03T11:11:00.863
> 
> 标签：java, performance, processing-efficiency, code-complexity

我有一个有效的问题陈述，但我仍然想知道更有效、更快、更重要的是正确设计来处理下面提到的场景。

我有一个 POJO 类

```
class A {
  String s;
  Double d;
} 
```

我正在尝试填充一个列表，基本上是一个对象 A 的列表到列表中。现在有问题的实施。在将对象 A 添加到列表中时，我需要检查是否已经存在带有 String 的对象。如果是，我想用旧的 d1 + 新的 d1 更新旧的对象，并且不将新对象添加到列表中，如果没有，则将新对象添加到列表中。我目前的实现如下所示。

```
double dd = 0.0;
    List<A> aList = new List<A>();
    List<A> aListToRemove = new List<A>();
    A newA = null;
    for(int i=0;i<=100;i++ ){
        newA = method call which returns newA;
        for(A oldA: aList ){
            if(oldA.getS().equals(newA.getS())){
                dd = oldA.getD() + newA.getD();
                newA.setD(dd);
                aListToRemove.add(oldA);
            }
            aList.add(newA);
            aList.removeAll(aListToRemove);
        }
    }

//at the end, i would like to see aList with no duplicates, but with updated d value. 
```

有没有更有效的方法在第二个 for 循环中进行处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:16:28.640

看来您可以为您的用例使用地图：

```
Map<String, A> map = new HashMap<> (); 
```

并像这样在地图中放置项目：

```
map.put(someA.s, someA); 
```

那应该将您的 O(n^2) 算法变成 O(n) 算法。

当您收到 时`newA`，您可以使用以下内容：

```
A a = map.get(newA.getS());
if (a == null) {
    map.put(newA.getS(), newA); //new string => new item in the map
} else {
    a.setD(a.getD() + newA.getD()); //found string => updating the existing item
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:16:04.677

你真的应该考虑使用[`Map`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T11:16:30.800

它必须是一个`List`吗？听起来`Map`可以为您完成这项工作。具体来说，该[`put()`操作](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#put%28K,%20V%29)添加或替换了一个完全符合您的语义的键值对。

干杯，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T11:16:46.240

如果你想要效率，我会使用[MultiMap](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)或者`Map<String, List<String>>`这将更有效地执行查找和数据的累积。如果您需要将字符串附加在一起，最好的选择可能是使用`Map<String, double[]>`

```
class A {
  String s;
  double d; // don't use Double unless you need null values.
}

Map<String, double[]> map = new LinkedHashMap<>();

for(A newA: getAs()) {
    double[] total = map.get(newA.getS());
    if (total== null)
        map.put(newA.getS(), total = new double[0]);
    total[0] += newA.getD();
} 
```

这将为您提供 O(1) 查找并以最少的对象创建累积值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-03T11:19:40.653

考虑使用[Map](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)。您可以使用 get 方法检查项目是否在地图中（似乎 s 将是关键）：

```
A a = myMap.get(newA.getS());
if (a != null){
 a.setD(a.getD() + newA.getD());
} else {
 myMap.put(newA);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T11:18:24.463

您应该将 a`java.util.Set`用于您的操作。

您可以在 O(1) 时间内检查您的对象是否存在并相应地执行您的操作。

它还将负责删除重复项。

```
 double dd = 0.0;
    Set<A> aList = new HashSet<A>();
    A newA = null;
    for(int i=0;i<=100;i++ ){
        newA = //method call which returns newA;
        A oldA = aList.get(newA);
        if(oldA != null){
           aList.remove(oldA);
        }
        dd = oldA.getD() + newA.getD();
        newA.setD(dd);
        aList.add(newA);
    } 
```

请确保您覆盖类 A 中的`equals`和`hashcode()`方法，`Set`否则将使用默认实现

# perl - 在 linux 上：cp：源文件后缺少目标文件操作数

> ID：14137749
> 
> 赞同：-2
> 
> 时间：2013-01-03T11:11:13.500
> 
> 标签：perl

下面的代码是脚本的一部分，我在其中合并不同目录的文件。合并后，我将剩余的文件复制到最终目录中。合并工作正常，但在复制文件时我得到

```
cp: missing destination file operand after `/users/abc/perl_scripts/temp_dir/b.cc'
Try `cp --help' for more information.
sh: line 1: /users/abc/perl_scripts/temp: is a directory 
```

 *```
for $k(dir1) {
     $flag=0;
     for $j(@dir2) {
          if("$k" eq "$j") {
               &merge_gcov("$UERRC1/$k","$UERRC2/$k","$DATA_DIR/$k");
               $flag=1;
               last;                            
          }
     }
     if($flag == 0) {
           #print ">>>>>>>>>>>>> cp $UERRC1/$k $DATA_DIR/$k \n";
           'cp $UERRC1/$k,$DATA_DIR`;
     }
 } 
```

谁能帮我解决这个问题...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T12:35:48.763

每当您使用系统调用时，您很可能会做一些多余的事情，在这种情况下肯定是多余的。Perl 非常有能力复制文件。我推荐这个[`File::Copy`](http://search.cpan.org/perldoc?File%3a%3aCopy)模块，它是 perl 5 中的一个核心模块。使用它很简单：

```
use File::Copy qw(copy);
copy $from, $to or die $!;   # it is a good idea to check if the copy failed 
```

此外，与其遍历所有文件名`@dir2`并查看名称是否与 中的文件名匹配`$k`，不如只检查文件是否存在于另一个目录中？例如

```
if (-e "$UERRC1/$k") {    # check if file exists
    merge_gcov("$UERRC1/$k", "$UERRC2/$k", "$DATA_DIR/$k"); 
} else { 
    copy "$UERRC1/$k", $DATA_DIR or die $!; 
} 
```

文件测试的文档`-e`位于[`perldoc -f "-X"`](http://perldoc.perl.org/functions/-X.html)

你真的应该使用更合适的变量名。它将使您的代码更具可读性，并且更易于维护和调试。

还...

在您执行任何其他操作之前，您应该在脚本中添加以下两行并修复无疑会出现的错误：

```
use strict;
use warnings; 
```

`strict`将强制您声明所有变量（通常使用`my $foo`），这将消除由于变量名称中的拼写错误而难以检测到的错误。错误消息将显示“全局符号 $foo 需要显式包名称...”。

`warnings`会给你关于你做错的事情的信息。这是一件好事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:23:18.323

cp 的参数是形式的`cp from to`，但你有`cp from,to`。

这可能就是它抱怨参数数量的原因 -`$UERRC1/$k,$DATA_DIR`是一个*单一*的参数。它应该是`cp $UERRC1/$k $DATA_DIR`，就像在您的打印声明中一样。*

# html - html表格的浮动水平条

> ID：14137750
> 
> 赞同：0
> 
> 时间：2013-01-03T11:11:19.707
> 
> 标签：html, css

我的 html 表中的列数量非常多，我必须一直滚动才能查看这些元素。

我尝试将 html 表包含在下面的 div 中；

```
div.scroll
{
overflow:scroll;
} 
```

但问题是，滚动条出现在表格的底部，我必须一直滚动到表格的底部，然后再次导航回所需的行并查看它。

我希望滚动条[水平和垂直]都是浮动的，这样我就可以从第一行和第一列开始滚动。[类似于这个演示： http: [//www.matts411.com/static/demos/grid /index.html](http://www.matts411.com/static/demos/grid/index.html) ] 。

我不想使用任何第三方库。这可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:38:19.320

始终设置封闭的高度和宽度`div`以获得滚动效果并将`display`属性设置为，`block`以便滚动条位于 div 下方（而不是表格下方）

```
div.scroll{  
display:block;  
height:400px;  
overflow:auto;  
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T11:21:10.917

请参阅此[演示](http://jsfiddle.net/Dineshkani/CLv7F/)它可以提供帮助。将表格放在 div 内，然后滚动条不会出现在表格的底部。

像这样为您的 div 使用最大高度和最大宽度

```
.simple{
overflow: auto;
max-width: 200px;
max-height: 180px;
} 
```

# objective-c - RestKit 0.2 返回一个对象数组而不是一个对象

> ID：14137759
> 
> 赞同：1
> 
> 时间：2013-01-03T11:11:41.693
> 
> 标签：objective-c, restkit

我正在使用 Restkit 0.2 版将 JSON 结果映射到 Objective-C 对象。收到的 JSON 如下所示：

```
{
"result": {
    "errorCode": 0,
    "errorMsg": "ok",
    "data": {
        "orderitems": [
            {
                "id": "46",
                "o_order_id": "15",
                "p_product_id": "7",
                "t_event_id": "1",
                "quantity": "1",
                "price": "4.5",
                "name": "Name1",
                "unit": "something1",
                "image": "images/7.png"
            },
            {
                "id": "47",
                "o_order_id": "15",
                "p_product_id": "10",
                "t_event_id": "1",
                "quantity": "1",
                "price": "3.99",
                "name": "Name2",
                "unit": "something2",
                "image": "images/10.png"
            }
        ]
    }
}
} 
```

我定义了以下映射：

```
RKObjectMapping *oiMapping = [RKObjectMapping mappingForClass:[OrderItem class]];
[oiMapping mapKeyPathsToAttributes:@"p_product_id", @"productID", @"name", @"name",  @"t_event_id", @"eventID",  @"quantity", @"quantity",  nil];
[objectManager.mappingProvider setMapping:oiMapping forKeyPath:@"result.data.orderitems"];

RKObjectMapping *takeOrderResultMapping = [RKObjectMapping mappingForClass:[TakeOrderResult class]];
[takeOrderResultMapping mapKeyPathsToAttributes:@"errorCode", @"errorCode", @"errorMsg", @"errorMessage", nil];
[takeOrderResultMapping mapRelationship:@"orderitems" withMapping:oiMapping];

[objectManager.mappingProvider setMapping:takeOrderResultMapping forKeyPath:@"result"];
takeOrderResultMapping.rootKeyPath = @"result";
[[RKObjectManager sharedManager].mappingProvider setErrorMapping:takeOrderResultMapping]; 
```

最后，TakeOrderResult 类定义如下：

```
@interface TakeOrderResult : NSObject
@property (strong, nonatomic) NSNumber *errorCode;
@property (strong, nonatomic) NSString *errorMessage;
@property (strong, nonatomic) NSSet *orderitems;
@end 
```

这或多或少有效 - 但是，Restkit 返回的是 3 个对象的数组。第一个对象是一个带有空集“orderitems”的 TakeOrderResult 实例。接下来的两个对象是 OrderItems 的实例。

如果有人可以帮助我并指出为什么我没有得到 1 个对象，那就太好了，即 TakeOrderResult 的一个实例，其中“orderitems”是一组两个对象/两个 OrderItem。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:46:52.100

您的映射略有偏差。您获得 3 个对象的原因是您将两个映射都添加到映射提供程序。“orderitems”是一个空集的原因是因为它不知道如何找到orderitems。

我不知道它是否有效，但我会尝试以下方法。不要将您的 oiMapping 添加到映射提供程序。而不是：

[takeOrderResultMapping mapRelationship:@"orderitems" withMapping:oiMapping];

尝试：

[takeOrderResultMapping addRelationshipMappingWithSourceKeyPath:@"data.orderitems" mapping:oiMapping];

# android - notifyDataSetChanged 无法更新 ListView

> ID：14137760
> 
> 赞同：6
> 
> 时间：2013-01-03T11:11:43.833
> 
> 标签：android, android-listview, android-dialogfragment, checkedtextview, notifydatasetchanged

我有一个 DialogFragment，它有一个带有 CheckedTextView 的列表视图和一个顶部的复选框，用于检查和取消选中列表视图中的所有项目。我正在尝试根据 CheckAll 复选框的状态将 CheckedTextView 的状态设置为 Checked/Unchecked。但我无法使用 notifyDataSetChanged 相应地更新视图。 ![在此处输入图像描述](../Images/ecd5103f8ffcd61c9ae3157ede56e394.png)

CategoriesDialogFragment.java

```
public class CategoriesDialogFragment extends SherlockDialogFragment {
    CheckBox checkAll;
    ListView categoriesListView;
    CategoriesListAdapter adapter;
    static Category category;

    String[] categories = new String[] { "Hill Station", "Beach", "Historic",
            "Wild Life", "Waterfall", "River", "Archeology", "Hill Station",
            "Beach", "Historic", "Wild Life", "Waterfall", "River",
            "Archeology" };
    Boolean[] categories_state = new Boolean[] { true, false, true, true, true,
            true, false, true, false, true, true, true, true, false };

    public static CategoriesDialogFragment newInstance() {
        CategoriesDialogFragment frag = new CategoriesDialogFragment();
        Bundle args = new Bundle();
        frag.setArguments(args);
        return frag;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        final Dialog dialog = new Dialog(MainActivity.context);
        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);

        dialog.setContentView(R.layout.dialog_categories);

        categoriesListView = (ListView) dialog
                .findViewById(R.id.listViewDialog);

        List<Category> theCategories = new ArrayList<Category>();
        for (int i = 0; i < categories.length; i++) {
            Boolean flag;
            Category pl = new Category(categories[i], categories_state[i]);
            theCategories.add(pl);
        }

        // categoriesListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        adapter = new CategoriesListAdapter(MainActivity.context,
                R.layout.dialog_list_item_category, theCategories);

        categoriesListView.setAdapter(adapter);

        // List View Item Click Listener
        categoriesListView
                .setOnItemClickListener(new AdapterView.OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> parent, View view,
                            int position, long id) {
                        // TODO Auto-generated method stub
                        CategoriesListAdapter adapter = (CategoriesListAdapter) parent
                                .getAdapter();
                        Category c = (Category) adapter.getItem(position);
                        c.setChecked(!c.getChecked());
                        adapter.notifyDataSetChanged();
                    }

                });

        // CheckAll CheckBox
        checkAll = (CheckBox) dialog.findViewById(R.id.checkBoxAll);
        checkAll.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {

                Toast.makeText(MainActivity.context, "Check",
                        Toast.LENGTH_SHORT).show();
                for (int i = 0; i < adapter.getCount(); i++) {
                    categoriesListView.setItemChecked(i, isChecked);
                    Log.i("Nomad", isChecked + " isChecked " + i);
                }
                adapter.notifyDataSetChanged();

                /*
                 * if (isChecked) { Log.i("Nomad", "isChecked"); for (int i = 0;
                 * i < adapter.getCount(); i++) { category = adapter.getItem(i);
                 * category.setChecked(true); Log.i("Nomad", "isChecked "+i); }
                 * adapter.notifyDataSetChanged(); } else { Log.i("Nomad",
                 * "isUnChecked"); for (int i = 0; i < adapter.getCount(); i++)
                 * { category = adapter.getItem(i); category.setChecked(false);
                 * Log.i("Nomad", "isUnChecked "+i); }
                 * adapter.notifyDataSetChanged(); }
                 */

            }
        });
        return dialog;

    }

    private static class CategoriesListAdapter extends ArrayAdapter<Category> {
        public Context mContext;

        List<Category> mCategories;

        public CategoriesListAdapter(Context context, int resource,
                List<Category> categories) {
            super(context, resource, categories);
            // TODO Auto-generated constructor stub
            this.mCategories = categories;
            this.mContext = context;

        }

        public int getCount() {
            return mCategories.size();
        }

        @Override
        public Category getItem(int position) {
            // TODO Auto-generated method stub
            return mCategories.get(position);
        }

        @Override
        public long getItemId(int position) {
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            ViewHolder holder;

            if (convertView == null) {
                LayoutInflater viewInflater;
                viewInflater = LayoutInflater.from(getContext());
                convertView = viewInflater.inflate(
                        R.layout.dialog_list_item_category, null);

                holder = new ViewHolder();
                holder.categoryName = (CheckedTextView) convertView
                        .findViewById(R.id.categories_checkbox);

                convertView.setTag(holder);

            } else {
                holder = (ViewHolder) convertView.getTag();
            }

            holder.categoryName.setText(mCategories.get(position)
                    .getCategoryName());
            holder.categoryName.setChecked(mCategories.get(position)
                    .getChecked());

            return convertView;
        }

        static class ViewHolder {
            CheckedTextView categoryName;
        }
    }
} 
```

**类别.java**

```
public class Category {
    String categoryName = "";
    private boolean checked = false;

    public Category(String categoryName, boolean checked) {

        this.categoryName = categoryName;
        this.checked = checked;

    }

    public String getCategoryName() {
        return categoryName;
    }

    public void setCategoryName(String categoryName) {
        this.categoryName = categoryName;
    }

    public boolean getChecked() {
        return checked;
    }

    public void setChecked(boolean checked) {
        this.checked = checked;
    }

} 
```

**dialog_categories.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/parentPanel"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginEnd="8dip"
    android:layout_marginStart="8dip"
    android:background="@color/primary_white"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/title_template"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginEnd="16dip"
        android:layout_marginStart="16dip"
        android:gravity="center_vertical|start"
        android:orientation="horizontal"
        android:paddingTop="5dp" >

        <TextView
            android:id="@+id/textView1"
            style="?android:attr/textAppearanceLarge"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:paddingLeft="10dp"
            android:text="@string/dialog_category_title"
            android:textColor="@color/primary_color"
            android:textSize="22sp" />

        <TextView
            android:id="@+id/all"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/dialog_category_checkbox"
            android:textColor="@color/primary_color" />

        <CheckBox
            android:id="@+id/checkBoxAll"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingRight="6dp" />
    </LinearLayout>

    <View
        android:id="@+id/titleDivider"
        android:layout_width="match_parent"
        android:layout_height="2dip"
        android:background="@color/black" />

    <LinearLayout
        android:id="@+id/contentPanel"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:minHeight="64dp"
        android:orientation="vertical" >

        <ListView
            android:id="@+id/listViewDialog"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
        </ListView>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/buttonPanel"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button_category_ok"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/dialog_category_btn_ok"
            android:textSize="14sp" />
    </LinearLayout>

</LinearLayout> 
```

**dialog_list_item_category.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/categories_checkbox"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:checkMark="?android:attr/listChoiceIndicatorMultiple"
    android:gravity="center_vertical"
    android:onClick="toggle"
    android:paddingBottom="10dp"
    android:paddingLeft="10dp"
    android:paddingRight="12dp"
    android:paddingTop="10dp"
    android:text="sss" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:49:49.653

> 我正在尝试根据 CheckAll 复选框的状态将 CheckedTextView 的状态设置为 Checked/Unchecked。但我无法使用 notifyDataSetChanged 相应地更新视图。

添加了带有问题代码的示例作为我的答案示例。它有效，[可以在这里找到](https://gist.github.com/4461228)（看看它）。

此外，Android-Developer 的答案有效，因为每次用户检查/取消选中 all 时，您基本上都会使用具有正确状态的新项目重置适配器`CheckBoxs`。这可能是浪费的（但如果列表相对较小，则可以接受）。另请记住，如果对话框`categoryName`中的`Category`类发生更改，您需要确保`Categories`使用正确的名称构造新的（如果您不修改类别名称，那么这不是问题）当所有`CheckBox`被执行。

尝试这样的事情：

1.  删除`categoriesListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);`如果它在您的代码中
2.  像这样修改`OnCheckedChangeListener`检查`CheckBox`：

    ```
     @Override
            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {

                Toast.makeText(getActivity(), "Check", Toast.LENGTH_SHORT)
                        .show();

                Log.i("Nomad", "isChecked");
                for (int i = 0; i < adapter.getCount(); i++) {
                    adapter.getItem(i).setChecked(isChecked);
                    Log.i("Nomad", "isChecked " + i);
                }
                adapter.notifyDataSetChanged();
            } 
    ```

3.  像这样添加`OnItemClickListener`到您的*categoriesListView* `ListView`中：

    ```
     @Override
                    public void onItemClick(AdapterView<?> arg0, View arg1,
                            int arg2, long arg3) {
                        CategoriesListAdapter adapter = (CategoriesListAdapter) arg0
                                .getAdapter();
                        Category c = (Category) adapter.getItem(arg2);
                        c.setChecked(!c.getCheckStatus());
                        adapter.notifyDataSetChanged();
                    } 
    ```

4.  和`setChecked(boolean)`（`getCheckStatus()`我看到你有一个`isChecked`方法`Category`可以用来获取布尔状态）是你的`Category`类中用于设置和获取该项目状态的方法

5.  在`getView()`适配器的方法中，设置状态如下：

    ```
    holder.categoryName.setChecked(mCategories.get(position)
                    .getCheckStatus()); 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T11:35:37.233

因此，您正在尝试将所有项目设置为选中

`setOnCheckedChangeListener`

我认为。首先，如果你想让你的

`adapter.notifyDataSetChanged();`

要工作，您必须对您的内容进行编辑。您正在使用

`List<Category> theCategories = new ArrayList<Category>();`

要填充您的对话框并对其进行更新，您必须使用更改数据的相同对话框或创建一个新适配器。要在您的中使用相同的，`setOnCheckedChangeListener`您必须执行以下操作：

```
checkAll.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

            if(isChecked){
              theCategories.clear();
              Toast.makeText(MainActivity.context, "Check", Toast.LENGTH_SHORT).show();
              for (int i = 0; i < categories.length; i++) {
                  Category pl = new Category(categories[i], true);
                  theCategories.add(pl);
              }
              adapter.notifyDataSetChanged();
           }

        }
    }); 
```

试试这个，如果它适合你，现在让我看看。:)

# php - 不要在没有图像的 Magento 中显示类别

> ID：14137761
> 
> 赞同：0
> 
> 时间：2013-01-03T11:11:46.693
> 
> 标签：php, image, magento

如果没有图像，我试图让这个脚本不显示任何内容。这是脚本：

```
<?php $i=0; foreach ($_categories as $_category): 
    if (!$_category->getIsActive()): continue; endif;
    $cur_category = Mage::getModel('catalog/category')->load($_category->getId());
    $imageUrl = $cur_category->getImageUrl();
    if (empty($imageUrl)): $imageUrl = Mage::getBaseUrl('media').'catalog/category/np_thumb2.gif'; endif;
?> 
```

现在除非有图像，否则它将显示无图像图像。我一直在尝试很多事情，但到目前为止我尝试的所有事情最终都给出了一个断开的链接。我敢肯定这很容易，有点像脑部手术，如果你知道怎么做就很容易。你只需要一把油灰刀。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:32:13.263

我想应该是这样的：

```
<?php $i=0; foreach ($_categories as $_category): 
if (!$_category->getIsActive()): continue; endif;
$cur_category = Mage::getModel('catalog/category')->load($_category->getId());
$imageUrl = $cur_category->getImageUrl();
if (empty($imageUrl)): 
//do nothing 
endif;
?> 
```

# html - 不同的浏览器显示不同的页面高度

> ID：14137762
> 
> 赞同：1
> 
> 时间：2013-01-03T11:11:47.730
> 
> 标签：html, css, google-chrome, firefox, safari

我正在尝试设计一个单页网站（没有垂直和水平滚动）。现在我的结构是：

```
container-->height: 100%
   header-->height: 10%
   main-content-->height: 80%
   footer-->height: 10% 
```

该页面完全符合我在**Mozilla Firefox**中的要求。但是，在**Chrome**`1-2px`中，页脚底部和浏览器底部之间会出现一个黑色空间（约）。在**Safari**中，右侧会出现一个垂直滚动条。

我在 Windows 上工作，并且没有对任何元素应用任何边距/填充{顶部或底部}。

**编辑#1**

我还使用了一个滑块`main-content`，我必须为某些 div 指定固定高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:39:15.063

您提到“主要内容”的高度应为 80%（这与两个 10% 的值相加很好），但在您的代码（HTML 或 CSS）中没有任何地方实际上指定了 80%。

我在“主要内容”*中*看到的是一堆嵌套的 DIV，所有这些 DIV 都指定了固定像素高度，所以我不确定这是如何工作的。

从添加`height: 80%;`to开始`#main-content`，去掉所有嵌套在里面的 DIV 的所有固定高度`#main-content`，然后计算出下一步需要做什么。

**编辑：**你提到你的代码在 FireFox 中工作，但我唯一能想到的是它工作在*你的 FireFox 窗口的确切像素大小*，而不是其他大小。如果调整 FireFox 窗口的大小，它看起来还可以吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:15:48.513

欢迎来到 Web 开发的世界。我建议从 CSS 重置开始，以确保布局一致。如果您不喜欢使用 Yahoo 的工具，那么 Google of`CSS reset`是一个不错的起点。

雅虎提供了很好的工具来促进：http: [//developer.yahoo.com/yui/reset/](http://developer.yahoo.com/yui/reset/)。

> 基础的 YUI 重置 CSS 文件删除并消除了 HTML 元素的不一致默认样式，在 A 级浏览器之间创建了一个公平的竞争环境，并提供了一个坚实的基础，您可以在此基础上明确声明您的意图。

```
<!-- Source File -->
<link rel="stylesheet" type="text/css" 
      href="http://yui.yahooapis.com/2.9.0/build/reset/reset-min.css"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T13:13:26.563

底部或滚动条出现黑色空间的可能原因是浏览器使用百分比计算的方式。[你可以在这里](http://palantir.net/blog/responsive-design-s-dirty-little-secret)找到解释。

诀窍是在容器外定义 #footer 并设置

`#footer{ position: absolute; bottom: 0; width: 100%; height: 9%; }`

并且还将#header 的高度设置为9%，以便在计算中考虑到意外情况。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-03T11:18:47.203

```
 html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, big, strike, strong, sub, sup, tt, var,
b, u, i, center,table, tr, td, th, tbody, thead, tfooter,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend, caption,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {margin: 0; padding: 0; border: 0; font-size: 100%; font: inherit; vertical-align: baseline; border-spacing: 0; } 
```

将此用作重置，它应该可以工作

# model-view-controller - 每个客户端 MVC 的唯一 CNAME

> ID：14137764
> 
> 赞同：0
> 
> 时间：2013-01-03T11:11:52.777
> 
> 标签：model-view-controller, url, dns, saas, cname

我正处于设计需要满足多个客户的新 MVC SaaS 应用程序的早期阶段。每个客户端将有多个用户帐户。

我最初的想法是允许每个客户端使用不同的 CNAMES 拥有自己的唯一 URL：

即clientA.mynewmvcsite.com 或clientB.mynewmvcsite.com

我经常在网络上看到实现这种模型的网站（例如 BeanStalkSVN、InvoiceMachine 等）

我的问题真的是关于如何实现（在高层次上）？我从 IIS 配置的角度了解 CNAMES 和 DNS 指针的使用，但我想这不是实现的方式。

Web 应用程序是否可以从请求中提取 CNAME 并验证客户端是否有效？（很可能通过查询数据库中的客户列表 - 但我不是在寻找细节，所以我不关心那部分）

由于可能存在大量客户端，我假设 DNS 解析设置为 *.mynewwebsite.com 解析到主机服务器的全局规则？

我们很乐意收到任何更详细的信息或指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:13:57.510

您确实可以通过 DNS 将所有子域指向同一个地方来做到这一点。然后，您可以通过读取 HTTP`Host`标头来检测客户端正在使用哪一个，该标头包含用于请求的整个主机名。该标头是 HTTP 1.1 规定的，它使虚拟主机等成为可能。

# android - APK 里面有两个共享对象

> ID：14137768
> 
> 赞同：0
> 
> 时间：2013-01-03T11:11:56.620
> 
> 标签：android, c, android-ndk, dlopen, shared-libraries

根据 docs/PREBUILTS.html，允许在 NDK 应用程序中使用预构建的共享对象。所以我试图让我的 NDK 应用程序从第二个共享对象导入一个函数，但是一旦我在我的 APK 中使用第二个共享对象，整个 shebang 甚至在输入 android_main() 之前就崩溃了。LogCat 说：

```
E/AndroidRuntime( 1931):
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.TEST/android.app.NativeActivity}:
java.lang.IllegalArgumentException: Unable to load native library: /data/data/com.example.TEST/lib/libTEST.so 
```

为了追踪这一点，我设置了以下简约测试用例：

```
int addvals(int a, int b) { return a + b; } 
```

仅包含此函数的源现在使用以下构建文件编译为共享对象：

```
# Application.mk
APP_MODULES := sharedobjecttest
APP_ABI := armeabi-v7a armeabi
APP_PLATFORM := android-9

# Android.mk
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE     := sharedobjecttest
LOCAL_SRC_FILES  := addvals.c
include $(BUILD_SHARED_LIBRARY) 
```

现在我想从我的主要共享对象中调用 addvals() 函数。代码再次简约：

```
#include <stdlib.h>
#include <android/log.h>
#include <android_native_app_glue.h>

// prototype for function imported from libsharedobjecttest.so
int addvals(int a, int b);

void android_main(struct android_app* state) {
    app_dummy();   // Make sure glue isn't stripped
    __android_log_print(ANDROID_LOG_INFO, "LogTag", "Hello World!\n"); 
    __android_log_print(ANDROID_LOG_INFO, "LogTag", "5+6=%d\n", addvals(5, 6)); 
    exit(0);
} 
```

主共享对象的构建文件如下所示：

```
# Application.mk
APP_ABI := armeabi-v7a armeabi
APP_PLATFORM := android-9

# Android.mk
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE    := libsharedobjecttest
LOCAL_SRC_FILES := ../../SharedObjectTest/libs/$(TARGET_ARCH_ABI)/libsharedobjecttest.so
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE     := TEST
LOCAL_SRC_FILES  := main.c
LOCAL_LDLIBS     := -llog -landroid
LOCAL_SHARED_LIBRARIES := sharedobjecttest android_native_app_glue
include $(BUILD_SHARED_LIBRARY)

$(call import-module,android/native_app_glue) 
```

最终的共享对象 (libTEST.so) 链接就好了。addvals() 的外部依赖已解决，两个共享对象（libsharedobjecttest.so 和 libTEST.so）都放入了我的最终 APK。ARM架构也是正确的。

但是，当尝试加载 libTEST.so 时，APK 会立即崩溃。android_main() 甚至没有输入。当我删除对 libsharedobjecttest 的引用时，崩溃消失了，APK 运行良好。那么有人知道为什么会崩溃吗？

我是否必须使用 dlopen() 和 dlsym() 手动解决任何外部依赖项？但是当外部共享对象有很多主要共享对象需要的符号时，这将是很多工作......：/

当然，我可以使用静态库而不是第二个共享对象，但我更喜欢使用共享对象。由于 docs/PREBUILTS.html 明确谈到在项目中使用预建共享对象的可能性，我认为我在这里没有做任何禁止的事情。但问题是：为什么它会崩溃以及如何解决这个问题？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:18:04.420

要回答我自己的问题：必须继承 NativeActivity 类并在所有必需的共享对象上手动调用 System.loadLibrary()。另一种解决方案是使用 dlopen() 但在这种情况下，必须首先找出应用程序的绝对路径，因为 dlopen() 仅在传递相对共享对象时才查看系统文件夹。

# android - 在没有用户配对确认的情况下将蓝牙与 Zebra 打印机配对

> ID：14137769
> 
> 赞同：0
> 
> 时间：2013-01-03T11:12:00.987
> 
> 标签：android, bluetooth, zebra-printers

我正在做一个小项目，我需要将 Nexus 7 (android v4.2.1) 与 Zebra 打印机配对。我正在使用 android 的蓝牙 API，我调用 createInsecureRfcommSocketToServiceRecord(uuid) 来获取蓝牙套接字，但是当我在这个套接字上调用 connect() 时，我仍然得到用户配对确认。我在这个论坛上挖掘了很多以获得解决方案，但我无法获得有效的解决方案......如果有人可以帮助我，我将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:41:36.273

Zebra 提供了一个 Android API 来处理所有连接通信（包括蓝牙）。去[下载 API](http://www.zebra.com/us/en/products-services/software/adapt-software/zebralink-sdk-android.html)并查看`BluetoothPrinterConnection`

# android - 如何在 Android 上标记 CSV 行并将空列包含为空字符串？

> ID：14137770
> 
> 赞同：0
> 
> 时间：2013-01-03T11:12:05.150
> 
> 标签：android, string, csv, tokenize

我想在 Android 中读取一个 CSV 文件，但是对于有一些空白列的行，CSV 会这样写：

```
,,,,ABC,,,d,mfcmf,fgt, 
```

当我将上面的行标记`ABC`为第一个字符串时，当我需要时`""`（即一个空字符串）。

如何标记 CSV 行，但结果中的空白列显示为空字符串？

```
First_column  = "";
Second_column = "";
Third_column  = "";
Forth_column  = "";
Fifth_column  = "ABC"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:34:37.523

您可以编写自己的小解析器或使用 CSV 库。如果像这里这样的字段中有嵌入的逗号，则简单地将字符串拆分为逗号字符是行不通的

```
a,1,"some , in string",12 
```

一个可以在[Apache Commons CSV中使用的库](http://commons.apache.org/csv/)

# php - 动态 HTML 标题元素

> ID：14137771
> 
> 赞同：1
> 
> 时间：2013-01-03T11:12:10.093
> 
> 标签：php, html

我正在尝试从 PHP 动态设置页面的 HTML 标题。我有一个页面，它根据数据库中的条目设置标题元素。我正在尝试根据当前页面的 H2 内容动态更改标题。该内容再次从数据库中检索。

我曾尝试使用会话变量来执行此操作，但显然由于加载顺序，这在加载标题时不起作用，然后是内容。在页面刷新时，标题设置正确，但这并不好。

我目前正在使用 JavaScript 来更新标题，但这对于没有启用 JS 的搜索引擎机器人同样没有好处。

**PHP**

```
session_start(); <--both header and dynamic page -->

<title><?php echo $_SESSION['dynamictitle'];?></title> <-- Header -->

$jobTitle = $rs2row['fldRoleTitle']; <-- dynamic page -->

$_SESSION['dynamictitle'] = $jobTitle; 
```

**JavaScript**

```
var currentTitle = "<?php Print($jobTitle) ?>" + " | " + document.title;
document.title = currentTitle; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:14:20.427

将模板数据的加载和处理与模板的实际输出/渲染分开，例如在将变量放入模板之前确定变量，例如

```
<?php // handlerForThisPage.php

    session_start();
    $dynamicTitle = $_SESSION['dynamictitle'];
    …
    $jobTitle = $rs2row['fldRoleTitle'];
    …

    include '/path/to/header.html';
    include '/path/to/templateForThisPage.html'; 
```

然后在各自的模板中回显变量，例如

```
// header.html
<html>
    <head>
        <title><?php echo $dynamicTitle ?></title>
         … 
```

然后应该进入 templateForThisPage.html 的任何内容。这比在一个大而杂乱的文件中混合数据获取、处理和输出的线性脚本更方便和更理智。如果您想扩展这种方法，请考虑阅读 MVC 模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:15:01.870

为什么你不应该在上面声明之前的某个地方声明`<title><?php echo $jobTitle . '|' . 'Standard Title' ?></title>` 。`$jobTitle = $rs2row['fldRoleTitle'];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T11:20:11.507

您可以执行以下操作

添加

```
<?php 
ob_start();  
?> 
```

在您的标题之前的文档的第一行；

然后把标题如下：{title_holder}

然后在您的代码中准备好标题后，请执行以下操作：

```
<?php
// Catch all the output that has been buffered 
$output = ob_get_contents();
// clean the buffer to avoid duplicates
ob_clean();
// replace the title with the generated title
$output = str_replace('{title_holder}', 'Your title here',$output);
// put the html back in buffer
echo $output

?>
// Then continue your code 
```

# java - JDialog 中失去鼠标点击功能

> ID：14137772
> 
> 赞同：0
> 
> 时间：2013-01-03T11:12:12.177
> 
> 标签：java, linux, swing, centos, netbeans-7

我正在使用 Matisse、NetBeans GUI Builder 开发一个简单的 Swing 应用程序。我的所有窗户都面临同样的问题。当我在我的主 JFrame 或其他 JDialog 上打开一个新的 JDialog 时，当我单击后台窗口中的某个位置时，我失去了在前台 JDialog 中用鼠标选择字段的能力。

![在此处输入图像描述](../Images/c994b42b04d1b48911397b251b0782dc.png)

在所附图像中，背景窗口是一个 JFrame，我使用以下命令构建前景 JDialog： new JDialog(this, true);

你能帮我解决这个问题吗？作为提示，如果在失去鼠标功能后我使用 tab 键前进到“组合框滚动”或日历字段，然后点击空格键，我再次获得鼠标点击，一切都像开始一样完美。

这是代码：

```
public class PrincipalUI extends javax.swing.JFrame {

private void jMenuItemUserManagementActionPerformed(java.awt.event.ActionEvent evt) {                                                        
        userManagementUI = new UserManagementUI(this, true);
        userManagementUI.setVisible(true);
    } 
}

public class UserManagementUI extends javax.swing.JDialog {
/**
     * Creates new form UserManagement
     */
    public UserManagementUI(Frame owner, boolean modal) {
        super(owner, modal);
        initOperations();
        initComponents();
        initPostOperations();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:20:51.380

看起来对话框的父级不正确。检查`this`创建`JDialog`. 这可能是不正确的。例如错误的父对话框或框架实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T19:18:17.730

我在 Windows 上测试它并且工作得很好，所以忘记它。这是 CentOS 的问题，或者至少是虚拟机的问题。

谢谢你们的帮助。

# asp.net - 是否可以通过 ASPX 页面调用方法背后的 Silverlight 代码？

> ID：14137774
> 
> 赞同：2
> 
> 时间：2013-01-03T11:12:23.723
> 
> 标签：asp.net, silverlight, methods, silverlight-5.0

我在我的 ASP.NET 页面中嵌入了一个 Silverlight 应用程序，这个 Silverlight 应用程序有两种方法。

我想通过 ASPX 页面调用这些方法，即我的 ASPX 页面有一个`Button`控件，当我单击此按钮时，我想调用 Silverlight 方法之一。

可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T21:03:44.787

You can use Javascript to make a silverlight method calls.

To permit user to access method of Silverlight from JavaScript, you have to set [ScriptableMember] attribute to that method.

If you want to invoke those methods by ASPX methods/events, you should generate Javascript that invokes the silverlight methods.

Example:

**Silverlight:**

**ScriptableClass.cs**

```
public class ScriptableClass
    {
        [ScriptableMember]
        public void ShowAlertPopup(string message)
        {
            MessageBox.Show(message, "JS Message", MessageBoxButton.OK);
        }
    } 
```

**App.xaml.cs**

```
 private void Application_Startup(object sender, StartupEventArgs e)
        {
            this.RootVisual = new MainPage();
            ScriptableClass myScript = new ScriptableClass();
            HtmlPage.RegisterScriptableObject("scriptableClass", myScript);
        } 
```

**index.html**

```
 <script type="text/javascript">     
        var ctlSLHost = null;
        function onPluginLoaded(sender, args) {
            ctlSLHost = sender.getHost();
        }

        function InvokeSLMethod_ShowAlertPopup() {
            ctlSLHost.Content.scriptableClass.ShowAlertPopup
        ("Showing alert from JS in SL!");
        } 
    </script>

<div>
        <div style="width: 250px; background: lightblue; font-weight: bold;height:30px">
            HTML Part
        </div>
        <div>
            <input type="button" value="Invoke SL Method - ShowAlertPopup" 
        onclick="InvokeSLMethod_ShowAlertPopup();" /></div>
    </div>

 <object data="data:application/x-silverlight-2," type="application/x-silverlight-2"
            width="100%" height="80%">
            <param name="source" value="ClientBin/Silverlight2JSViseVersa.xap" />
            <param name="onError" value="onSilverlightError" />
            <param name="background" value="white" />
            <param name="minRuntimeVersion" value="4.0.50826.0" />
            <param name="autoUpgrade" value="true" />         
            <param name="onLoad" value="onPluginLoaded" />

            <a href=http://go.microsoft.com/fwlink/?LinkID=149156&v=4.0.50826.0 
        style="text-decoration: none">
                <img src=http://go.microsoft.com/fwlink/?LinkId=161376 
        alt="Get Microsoft Silverlight"
                    style="border-style: none" />
            </a>
        </object> 
```

# c# - 阻止 WCF 向 SOAP 标头添加签名

> ID：14137776
> 
> 赞同：1
> 
> 时间：2013-01-03T11:12:28.153
> 
> 标签：c#, wcf, soap

我已经为我的 WCF 客户端（调用 SOAP 服务）放置`ProtectionLevel = ProtectionLevel.None`了`ServiceContract`，但 WCF 仍在向标头添加签名。

```
[ServiceContract(ConfigurationName = "IMyOutboundService", ProtectionLevel = ProtectionLevel.None)] 
```

如何关闭此客户端的标头签名？

我正在使用`customBinding`with`authenticationMode="MutualCertificate"`并且我已经设置了`<textMessageEncoding messageVersion="Soap11WSAddressing10"/>`. 只要允许，我可以使用不同的绑定。

这是当前的完整绑定：

```
 <binding name="MyBinding" openTimeout="00:00:10" sendTimeout="00:00:10" >
      <textMessageEncoding messageVersion="Soap11WSAddressing10" />
      <security authenticationMode="MutualCertificate"
                includeTimestamp="true"
                enableUnsecuredResponse="true">
        <localClientSettings timestampValidityDuration="00:15:00"/>
      </security>
      <httpsTransport
        manualAddressing="false" maxBufferPoolSize="524288"
        maxReceivedMessageSize="5242880" allowCookies="false"
        bypassProxyOnLocal="true" decompressionEnabled="true" hostNameComparisonMode="StrongWildcard"
        keepAliveEnabled="true" maxBufferSize="5242880"
        realm="" transferMode="Buffered"  unsafeConnectionNtlmAuthentication="false"
        useDefaultWebProxy="true" requireClientCertificate="true"  />
    </binding> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:34:19.340

我有这个工作，艰难的方式！

```
 <binding name="MyBinding" openTimeout="00:00:10" sendTimeout="00:00:10" >
      <textMessageEncoding messageVersion="Soap11WSAddressing10" />
      <httpsTransport
        manualAddressing="false" maxBufferPoolSize="524288"
        maxReceivedMessageSize="5242880" allowCookies="false"
        bypassProxyOnLocal="true" decompressionEnabled="true" hostNameComparisonMode="StrongWildcard"
        keepAliveEnabled="true" maxBufferSize="5242880"
        realm="" transferMode="Buffered"  unsafeConnectionNtlmAuthentication="false"
        useDefaultWebProxy="true" requireClientCertificate="true"  />
    </binding> 
```

因此，通过保留自定义绑定，而不是切换到基本绑定（我确实尝试过），您可以保留 Soap11WSAddressing10（即，您可以获得所有 SOAP 标头）。

通过删除`<security`元素，您基本上将事物设置为仅传输安全性。在仅传输模式下，不添加任何签名。

可悲的是，缺少的一件事是时间戳。我找不到会添加时间戳的配置 - 所以我必须手动添加它。与让所有其他东西正常工作相比，这是微不足道的，所以说实话，我很高兴这样做。

# python - 如何在Django中将html页面转换为pdf

> ID：14137778
> 
> 赞同：1
> 
> 时间：2013-01-03T11:12:51.320
> 
> 标签：python, html, django, pdf, phantomjs

我正在使用 Django 创建报告站点。报告是动态生成的，它们还包括一些 SVG 图表。我想创建一个基于用户正在查看的当前报告的 PDF 文件，但带有额外的页眉和页脚。我遇到了 Phantomjs，但有两个问题，首先是页面需要用户登录，所以如果我将 url 发送到服务器，phantomjs 会为日志页面创建 pdf；其次，报告是使用 ajax 生成的，因此即使是相同的 url 也会有不同的报告。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:16:51.743

[**Wkhtmtopdf**](http://code.google.com/p/wkhtmltopdf/)是将 html 转换为 pdf 及其 python [Lib的好工具](http://pypi.python.org/pypi?%3aaction=display&name=wkhtmltopdf&version=0.1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T21:52:13.623

通常的问题是如何使用您的网络服务器进行身份验证。对于 WKHTMLTOPDF 和 PHANTOMJS，我通过将身份验证令牌传递给它们并让它们在 cookie 中将其传递回服务器来做到这一点。

所以对于 WKHTMLTOPDF 这变成：

```
wkhtmltopdf --cookie=LtpaToken2=<sometoken> 
```

这适用于传递身份验证令牌的 Java Web 服务器。我不太了解 django，但它必须使用类似的基于 cookie 的机制进行身份验证。您将需要：

1.  获取token服务端（一般可以参考cookies或者request-header获取）
2.  将其传递给工具 wkhtmltopdf 或 phantomjs
3.  当该工具请求任何受保护的页面时，它需要将 cookie 传回。两者都有相同的命令行参数。

对于 AJAX，最好的方法是延迟。同样，两者都有配置延迟的机制。对于 WKHTMLTOPDF，您可以在命令行参数中指定它，phantomjs 您可以在 windows.setTimeOut 中指定。在呈现页面之前给 Ajax 足够的延迟以完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:19:58.760

[Prince](http://www.princexml.com/)是一个不错的选择（它应该可以处理 SVG），而且它可以免费用于非商业用途。我在我的一个项目中使用了[比萨](http://xhtml2pdf.appspot.com/static/pisa-en.html)，但它不处理 SVG。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T17:15:46.983

好的，经过大量谷歌搜索，我找不到任何东西。所以我想出了两个骇人听闻的解决方案。

1.  在用户正在查看的页面上，创建一个带有隐藏文本区域的表单，提交按钮名为“生成 PDF”，渲染页面后，我使用 JavaScript 获取我想要的 div 中的所有 html 并将它们放入文本区域。当点击按钮时，会将html传递给服务器端，然后我使用python在本地创建一个html文件，并使用Phantomjs根据html文件创建一个PDF。

2.  创建一个 url 呈现用户正在查看的完全相同的页面，但不需要用户登录。因此必须配置 Apache 或 Nginx，以便 url 只能由本地主机访问。所以 Phantomjs 可以毫无问题地访问 url 并生成 PDF。

# git - git - 删除远程分支中的文件并与另一个分支同步

> ID：14137779
> 
> 赞同：0
> 
> 时间：2013-01-03T11:12:51.970
> 
> 标签：git, git-branch, git-merge

有几个分支分支（master、test1、test2、）

我刚刚克隆了整个存储库，并想“同步” test1 和 test2 分支。远程，test1 具有所需的内容，test2 已过时。我想：

1.  删除 test2 分支中的文件（本地和远程）
2.  将 test2 与 test1 同步/合并，以便 test2 与 test1 具有相同的内容，删除 test2 的当前内容。

所以换句话说，我将如何提取 test1 的内容并将其放入 test2（销毁 test2 的所有当前内容）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:45:30.580

我可能会这样做：

```
git branch -d test2   # Delete test2 locally
git checkout test1
git checkout -b test2 # Recreate test2 locally from test1
git push -f           # Forcibly bring remote test2 into step 
```

但请记住通常的警告；如果其他人有上游`test2`，那么覆盖它的历史就不是很友好。

# azure - Windows Azure 云服务未加载

> ID：14137781
> 
> 赞同：2
> 
> 时间：2013-01-03T11:12:56.077
> 
> 标签：azure

我是 Windows Azure 的新手。我有一个正在运行的现有 ASP.NET 4 MVC。事实上，它可以作为 Windows Azure 中的网站正常工作。我需要能够 RD 进入站点，所以我决定创建一个 Windows Azure 云服务。

我的 Windows Azure 云服务显示为在 Windows Azure 门户中运行。我的应用程序已通过 Visual Studio 成功发布。当我访问 Windows Azure 活动日志中列出的网站 URL 时，我得到一个根据 Fiddler 的 http 状态代码 502。

有人可以告诉你出了什么问题吗？我无法弄清楚如何从这里了解问题所在。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:26:48.343

在您的 web.config 中，将 customErrors 设置为

```
<customErrors defaultRedirect="GenericError.htm" mode="RemoteOnly">
      <error statusCode="500" redirect="InternalError.htm" />
    </customErrors> 
```

并使用 RD 浏览网站。

或者您可以将其设置为

```
<customErrors defaultRedirect="GenericError.htm" mode="Off">
      <error statusCode="500" redirect="InternalError.htm" />
    </customErrors> 
```

每个访问该站点的人都会获得堆栈跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:27:19.783

HTTP 错误 502 错误提示网关错误。

所以你可以试试下面。

**修复 502 错误 - 常规**

> 此问题是由于后端计算机之间的 IP 通信不佳造成的，可能包括您尝试访问的站点上的 Web 服务器。在分析这个问题之前，你应该彻底清除你的浏览器缓存。
> 
> 如果您在网上冲浪并且在您尝试访问的所有网站上都看到了这个问题，那么要么 1) 您的 ISP 出现重大设备故障/过载或 2) 您的内部 Internet 连接出现问题，例如您的防火墙无法正常工作正确。在第一种情况下，只有您的 ISP 可以帮助您。在第二种情况下，您需要修复阻止您访问 Internet 的任何问题。
> 
> 如果您仅在您尝试访问的某些网站上遇到此问题，那么很可能是这些站点出现了问题，即其中一台设备出现故障/过载。联系那些站点的人。

有关详细信息，请检查[**HTTP 错误 502 网关错误**](http://www.checkupdown.com/status/E502.html)

我希望这对你有帮助。

# android - 如何在 android 中提供更多语言选项以进行本地化

> ID：14137795
> 
> 赞同：0
> 
> 时间：2013-01-03T11:13:41.520
> 
> 标签：android

我是安卓新手。我正在做本地化。我的语言未列出（因为不支持）。现在我在应用程序中添加了字体及其显示，但没有在语言之间切换的选项。为此，我如何在 Android 中添加“mr Marathi”？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:23:16.950

参考[这个](http://www.slideshare.net/martyhall/android-tutorial-localization-l10n-internationalization-i18n-and-resources)。这两个字母代码来自 ISO 639-1 语言代码。

据此，它的先生来自“马拉先生”。检查[这个](http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes)。只需添加一个 res/values-mr 并签入支持马拉地语的手机。

希望它有效。

# dynatree - dynatree 在不同的地方展示孙子 地点

> ID：14137799
> 
> 赞同：1
> 
> 时间：2013-01-03T11:14:00.287
> 
> 标签：dynatree

我的 dynatree 工作正常。但是我需要这样的东西：

当单击“**子项 2.1.1”**时，子项（*子项 2.1.1.1 和 2.1.2.2*）将显示在右侧面板中（在另一个 div 元素中）

我不希望它们在树中显示为“子项 2.1.1”的子项。

我怎样才能做到这一点？

# c# - 如何等待线程完成运行？Thread.join 使我的主线程无响应？

> ID：14137803
> 
> 赞同：0
> 
> 时间：2013-01-03T11:14:08.070
> 
> 标签：c#, .net

我正在开发使用 Windows 应用程序向多个用户发送邮件的项目，但是发生的事情是，当我使用 Thread.Join() 方法时，它使我的主 UI 无响应......我想要的是....我想在单独的线程上运行 SMTPClientTSeting() 方法，并希望我的主 UI 对其他工作保持响应。我想在后台运行此邮件发送活动...请建议我只使用线程概念。 ……

```
public void SendMail(dataset ds)
        {
                           for(inti=0<ds.Tables[0].Rows.Count<i++)
                            {

                                Thread tMail = new Thread(() => {
                                     resValue = SMTPClienTSetting(ds, mail);

                                });
                                tMail.IsBackground = true;
                                tMail.Start();
                                tMail.Join();
                                if (resValue == "True")
                                {
                                   Thread tPopUp = new Thread(new ThreadStart(this.ShowMessagePopUp));
                                   tPopUp.IsBackground = true;
                                  this.BeginInvoke((MethodInvoker)delegate{
                            });
                                   tPopUp.Start();
                                   lblPOpUpInfo = "Message sent successfully to \nAsset Owner : " + AssetOwner + "\n" + "Email : " + RecipientID;

                                }
                                else
                                {
                                     Thread tPopUp = new Thread(new ThreadStart(this.ShowMessagePopUp));
                                     tPopUp.IsBackground = true;
                                                                 this.BeginInvoke((MethodInvoker)delegate{
                            });
                                     tPopUp.Start();
                                     lblPOpUpInfo = "Message sending failed to \nAsset Owner :" + AssetOwner + "\n" + "Email : " + RecipientID + "!!!\nPlease check your SMTP details and\nInternet Connection..!!!";
                                }
                         }
        }
        #region Function for setting SMTP Client
                public string SMTPClienTSetting(DataSet ds, MailMessage MailstoSend)
                {
                    try
                    {
                        SmtpClient objsmtp = new SmtpClient();
                        NetworkCredential NetAccess = new NetworkCredential();

                        NetAccess.UserName = ds.Tables[0].Rows[0][0].ToString();
                        //NetAccess.Password = base64Decode(ds.Tables[0].Rows[0][1].ToString());

                        NetAccess.Password = genFunc.base64Decode(ds.Tables[0].Rows[0][1].ToString());
                        objsmtp.Credentials = NetAccess;

                        objsmtp.Host = ds.Tables[0].Rows[0][2].ToString();
                        objsmtp.Port = Convert.ToInt16(ds.Tables[0].Rows[0][3].ToString());

                        objsmtp.Send(MailstoSend);

                        //System.Threading.Thread.Sleep(500);

                        return "True";
                    }
                    catch (NullReferenceException nr)
                    {
                        return nr.Message;
                    }
                    catch (Exception ex)
                    {
                        return ex.Message;
                    }
                }
                #endregion
        }

    #region Function to show Pop Up window using separate thread
    public void ShowMessagePopUp()
    {
           try
            {
                frmHomePopUp homePopUp = new frmHomePopUp();
                mailTimer.Elapsed += delegate { mailTimer.Stop(); homePopUp.Close(); };
                //mailTimer.Elapsed += this.TimeEvent;
                mailTimer.Interval=5000;
                mailTimer.Enabled = true;
                homePopUp.lblInfo.Text = lblPOpUpInfo;
                homePopUp.Refresh();
                mailTimer.Start();
                homePopUp.ShowDialog();

            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }

    }
    #endregion

    public  void mailTimer_Elapsed(object source, EventArgs e)
    {
        //frmHome home;
        mailTimer.Stop();
      } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T11:21:59.520

基本上：不要使用`Thread.Join`; 那就是阻塞*。*

一种适当的方法是*在工作方法结束时*执行任何 UI 工作：

```
Thread tMail = new Thread(() => {
     resValue = SMTPClienTSetting(ds, mail);

     if (resValue == "True") {
        // blah blah blah
     }
     // now: if you need to update any UI state:
     this.BeginInvoke((MethodInvoker)delegate {
        someControl.Text = lblPOpUpInfo; // for example
     });
});
tMail.IsBackground = true;
tMail.Start(); 
```

`Invoke`对/的调用`BeginInvoke`切换回 UI 线程，本质上是一个回调。

请注意，您可能还想使用`ThreadPool`而不是 a `Thread`here。

# xmpp - Tigase：有时我会收到两次离线消息

> ID：14137805
> 
> 赞同：0
> 
> 时间：2013-01-03T11:14:14.850
> 
> 标签：xmpp, tigase

我使用 Tigase 作为 XMPP 服务器。一切正常，但有时我会收到两次离线消息，第二次是在第一次后 25 分钟后（有时是一天后），例如：

```
2013-01-03 11:53:00.923 xmppStreamDidReceiveMessage: 
<message xmlns="jabber:client" id="20" type="chat" 
   to="300-92@chat.quickblox.com" from="298-92@chat.quickblox.com">
   <body>r1</body><delay xmlns="urn:xmpp:delay" stamp="2013-01-03T09:52:55.392+0000" 
   from="chat.quickblox.com">Offline Storage - ip-10-40-233-192.ec2.internal</delay>
   </message>

2013-01-03 11:53:25.091 QBChat/xmppStreamDidReceiveMessage: 
<message xmlns="jabber:client" id="20" type="chat" 
    to="300-92@chat.quickblox.com" from="298-92@chat.quickblox.com">
    <body>r1</body><delay xmlns="urn:xmpp:delay" stamp="2013-01-03T09:52:55.418+0000" 
    from="chat.quickblox.com">Offline Storage - ip-10-40-233-192.ec2.internal</delay>
    </message> 
```

它们具有相同的 ID 和文本。

我不知道问题是什么，没有任何复制，随机复制。第一个用户只是向第二个发送消息，第二个登录/注销，登录/注销..

谢谢你的建议

**更新：** 有时我会收到 2 条相同的消息：第 1 条是正常消息，第 2 条带有“延迟”参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T05:44:22.010

戳记不同，这表明该消息在数据库中记录了两次。您是否有机会使用网络客户端？Web客户端可能会认为服务器没有收到消息并再次发送它。但是，那么标记差异可能是几秒钟而不是几毫秒。

对我来说，看起来原始发件人发送了两次消息，并在离线存储中记录了 2 次，然后传递给接收者。但是，如果发件人有时会发送两次消息，那么有时也会发生正常的非离线消息被加倍的情况......

用这么少的信息真的很难说清楚。

# linux - qtcreator 在“停止”时发送的信号

> ID：14137808
> 
> 赞同：6
> 
> 时间：2013-01-03T11:14:22.413
> 
> 标签：linux, qt, signals, qt-creator

我在 linux 上工作，当我使用 Qt creator IDE 上的“停止”按钮关闭它时，我意识到我的应用程序正在留下守护进程。我想处理这些情况，以便应用程序以与关闭主窗口时相同的方式关闭。要编写处理程序，我需要知道它对应于哪些信号。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T18:04:31.617

深入研究 QtCreator 的代码，我可以看到 QtCreator 在内部使用 QProcess 来启动您的应用程序。红色的“停止”按钮连接到`ApplicationLauncher::stop()`，它以两种方式之一终止您的进程，具体取决于它是 GUI 应用程序还是控制台应用程序，但在这两种情况下，结果在 Linux 上最终是相同的。

对于 GUI 应用程序，`ApplicationLauncher`调用`QProcess::terminate()`，它又向您的守护程序发送 SIGTERM（在 Linux 上）信号。然后它等待 (with `waitForFinished()`) 1 秒钟，如果到那时守护程序还没有退出，它会调用`QProcess::kill()`, 发送`SIGKILL`。

对于控制台应用程序，`ApplicationLauncher`将终止委托给`ConsoleProcess`实用程序类。在 Linux 上，`ConsoleProcess::stop()`将类似于`ApplicationLauncher`GUI 应用程序，它首先发送`SIGTERM`，然后等待 1 秒，`SIGKILL`如果尚未终止则发送。

您将在此处找到来自 QtCreator 的相关代码：

*   [GUI 应用程序终止](http://qt.gitorious.org/qt-creator/qt-creator/blobs/2.6/src/plugins/projectexplorer/applicationlauncher.cpp#line173)
*   [控制台应用程序终止（在 Linux 上）](http://qt.gitorious.org/qt-creator/qt-creator/blobs/2.6/src/libs/utils/consoleprocess_unix.cpp#line163)
*   [控制台应用程序终止（在 Windows 上）](http://qt.gitorious.org/qt-creator/qt-creator/blobs/2.6/src/libs/utils/consoleprocess_win.cpp#line158)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:01:50.657

简短版：你不能

长版：

您可以尝试使用：

[http://doc.qt.digia.com/qt/qcoreapplication.html#aboutToQuit](http://doc.qt.digia.com/qt/qcoreapplication.html#aboutToQuit)

但这不会按预期工作。如果一个进程被强制终止（这是 IDE 中的停止正在做的事情，我猜想在 windows [http://msdn.microsoft.com/en-gb/library/windows/desktop/ms686714上使用 TerminateProcess() (v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms686714(v=vs.85).aspx) ) 然后该进程会在它正在执行的任何过程中立即被杀死。单独从 Qt 处理这些情况是不可能的。

# c# - 使用 c# 从数据表生成嵌套菜单作为 ul 列表而不是 Asp.net 菜单控件

> ID：14137811
> 
> 赞同：5
> 
> 时间：2013-01-03T11:14:27.243
> 
> 标签：c#, asp.net, html-lists

我需要生成一个自定义菜单，其中包含使用列表 ul 的子菜单`DataTable`

下面是数据库示例和带有虚拟数据的示例 HTML ul 列表。

```
PID         MENU                 Handler                  PageLangID  ParentID    IssueID     CatID       MenuPosition
----------- -------------------- ------------------------ ----------- ----------- ----------- ----------- ------------

6           Business             Category.aspx    1           6           1           16          1
6           Culture              Category.aspx    1           6           1           3           1
6           Economy              Category.aspx    1           6           1           2           1
6           Finance              Category.aspx    1           6           1           19          1
6           Infrastructure       Category.aspx    1           6           1           17          1
6           Lifestyle            Category.aspx    1           6           1           20          1
6           Others               Category.aspx    1           6           1           21          1
6           People               Category.aspx    1           6           1           7           1
6           Politics             Category.aspx    1           6           1           1           1
6           Sports               Category.aspx    1           6           1           4           1
12          1002                  Default.aspx             1           12          3           1           1
12          1003                  Default.aspx             1           12          4           1           1
12          1006                  Default.aspx             1           12          1           1           1
12          1009                  Default.aspx             1           12          5           1           1
1           Home                 Default.aspx             1           0           1           1           10
11          Video                Videos.aspx              1           10          1           1           10
2           About Us             Page.aspx                1           0           1           1           20
5           Articles             Articles.aspx            1           0           1           1           20
6           Categories           Category.aspx    1           0 
```

所需的 HTML 输出

```
<div id="nav-wrapper">
<ul id="nav" class="dropdown dropdown-linear"  >
    <li><span class="dir"><a href="./">Home</a></span></li>
    <li ><span class="dir"><a href="ultimate.linear.html">About Us</a></span>
        <ul >
            <li><a href="./">History</a></li>
            <li><a href="./">Our Vision</a></li>
            <li><a href="./">The Team</a></li>
            <li><a href="./">Clients</a></li>
            <li><a href="./">Testimonials</a></li>
            <li><a href="./">Press</a></li>
            <li><a href="./">FAQs</a></li>
        </ul>
    </li>

    <li class="active" ><span class="dir"><a href="ultimate.linear-active.html">Categories</a></span>
        <ul>
            <li><a href="./">Politics</a></li>
            <li><a href="./">Economy</a></li>
            <li><a href="./">Finance</a></li>
            <li><a href="./">Business</a></li>
            <li><a href="./">Group News</a></li>
            <li><a href="./">Culture</a></li>
            <li><a href="./">Lifestyle</a></li>
            <li><a href="./">Sports</a></li>
            <li><a href="./">Infrastructure</a></li>
            <li><a href="./">Book Review</a></li>   
            <li><a href="./">Others</a></li>                
        </ul>
    </li>
</ul>
</div> 
```

我不想使用嵌套的中继器控件。我会很感激我可以使用的示例代码。

**更新**：此代码不起作用，肯定我做错了什么

```
protected void Page_Load(object sender, EventArgs e)
{

    DataSet ds = new DataSet();
    ds = DataProvider.Connect_Select(strSql);
     DataTable dt = ds.Tables[0];

    //dt.Select("ParentID == 0") ;
    var s = GenerateUL(dt.Select("ParentID == 0"));
    Response.Write(s);

}

private string GenerateUL(var menus)
{
    var sb = new StringBuilder();

    sb.AppendLine("<ul>");
    foreach (var menu in menus)
    {
        if (menu.Menus.Any())
        {
            sb.AppendLine("<li>" + menu.Text);
            sb.Append(GenerateUL(menu.Menus.AsQueryable()));
            sb.AppendLine("</li>");
        }
        else
            sb.AppendLine("<li>" + menu.Text + "</li>");
    }
    sb.AppendLine("</ul>");

    return sb.ToString();
} 
```

**基于 DANI 解决方案的最新更新**

他的数据样本似乎可以正常工作，但是当我将它与我的实际数据一起使用时，它生成的 StackOverflowException 未被处理。

下面是错误的屏幕截图。 ![在此处输入图像描述](../Images/c24a6ca21aa9616c99de2759113f86a9.png)

当它进入某种无限循环时会生成错误，其中`PID=6`我上面显示的实际数据有 23 条记录，并且是来自不同表格的 UNION 的结果，这就是我在表格中有多行的原因，`PID=6`我担心它也会在哪里做同样的事情`pid=12`.

即使我发现异常，我的网站仍然会因此而崩溃......

**最新代码**

```
protected void Page_Load(object sender, EventArgs e)
{
    string strSql = "SELECT DISTINCT PID, MENU, Handler,PageLangID, ParentID,IssueID, CatID,MenuPosition FROM MENUTABLE ";

    DataSet ds = new DataSet();
    ds = DataProvider.Connect_Select(strSql);
    DataTable table = ds.Tables[0];
    DataRow[] parentMenus = table.Select("ParentId = 0");
         var sb = new StringBuilder();
         string unorderedList = GenerateUL(parentMenus, table, sb);
    }

    private string GenerateUL(DataRow[] menu, DataTable table, StringBuilder sb)
    {
    sb.AppendLine("<ul>");

    try
    {

        if (menu.Length > 0)
        {
            foreach (DataRow dr in menu)
            {
                ctr = ctr + 1;
                string handler = dr["Handler"].ToString();
                string menuText = dr["MENU"].ToString();
                string line = String.Format(@"<li><a href=""{0}"">{1}</a>", handler, menuText);
                sb.Append(line);

                string pid = dr["PID"].ToString();

                DataRow[] subMenu = table.Select(String.Format("ParentId = {0}", pid));
                if (subMenu.Length > 0)
                {
                    var subMenuBuilder = new StringBuilder();
                    sb.Append(GenerateUL(subMenu, table, subMenuBuilder));
                }
                sb.Append("</li>");
            }
        }
    }
    catch (Exception ex)
    {
    }

    sb.Append("</ul>");
    return sb.ToString();
} 
```

更新：当我更改我的查询得到下面的结果时，它工作正常，但最好让它在问题中首先显示的实际数据上工作。

```
PID         MENU                 Handler                  PageLangID  ParentID    IssueID     CatID       MenuPosition
----------- -------------------- ------------------------ ----------- ----------- ----------- ----------- ------------
1           Home                 Default.aspx             1           0           1           1           10
2           About Us             Page.aspx                1           0           1           1           20
3           News                 News.aspx                1           0           1           1           30
5           Articles             Articles.aspx            1           0           1           1           20
6           Categories           Category.aspx    1           0           1           1           25 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T22:45:40.730

我在我这边创建了一个稍微简单的表结构，因为我们只需要以下列为例：

1.  PID
2.  菜单
3.  处理程序
4.  父母ID

**样本数据：**

正如您从这个示例中看到的那样，我们对 Product 有一个 3 向深的层次结构，其余的项没有子项。

![在此处输入图像描述](../Images/97966abb1e588d0fc09513dec36f9e6c.png)

**后面的代码：**

下面的代码执行以下操作：

1.  首先获取所有没有父母的项目并开始循环它们
2.  检查项目是否是任何节点的父节点并递归获取其子节点。

    ```
    protected void Page_Load(object sender, EventArgs e)
    {
        DataSet ds = new DataSet();
        ds = DataProvider.Connect_Select("SELECT * FROM Menu");
        DataTable table = ds.Tables[0];
        DataRow[] parentMenus = table.Select("ParentId = 0");

        var sb = new StringBuilder();
        string unorderedList = GenerateUL(parentMenus, table,sb);
        Response.Write(unorderedList);
    }

    private string GenerateUL(DataRow[] menu,DataTable table,StringBuilder sb)
    {
        sb.AppendLine("<ul>");

        if (menu.Length > 0)
        {
            foreach (DataRow dr in menu)
            {
                string handler = dr["Handler"].ToString();
                string menuText = dr["MENU"].ToString();
                string line = String.Format(@"<li><a href=""{0}"">{1}</a>",handler,menuText);
                sb.Append(line);

                string pid = dr["PID"].ToString();

                DataRow[]subMenu = table.Select(String.Format("ParentId = {0}", pid));
                if (subMenu.Length > 0)
                {
                    var subMenuBuilder = new StringBuilder();
                    sb.Append(GenerateUL(subMenu, table, subMenuBuilder));
                }
                sb.Append("</li>");
            }
        }

        sb.Append("</ul>");
        return sb.ToString();
    } 
    ```

**最终结果：**

![在此处输入图像描述](../Images/b1e7d5a9a71ae105b554cd7a37a7b538.png)

**编辑：**

问题是代码基于 ParentID 构建菜单，对于 ID=6，ParentID 也恰好是 6。所以 6 调用 6，我们有一个无限循环，太棒了。

现在我们知道问题出在哪里，我们可以进行一个简单的检查以递归地构造子菜单，仅当 时`ParentId != PID`，以下是更新后的代码：

```
private string GenerateUL(DataRow[] menu, DataTable table, StringBuilder sb)
{
    sb.AppendLine("<ul>");

    if (menu.Length > 0)
    {
        foreach (DataRow dr in menu)
        {
            string handler = dr["Handler"].ToString();
            string menuText = dr["MENU"].ToString();
            string line = String.Format(@"<li><a href=""{0}"">{1}</a>", handler, menuText);
            sb.Append(line);

            string pid = dr["PID"].ToString();
            string parentId = dr["ParentId"].ToString();

            DataRow[] subMenu = table.Select(String.Format("ParentId = {0}", pid));
            if (subMenu.Length > 0 && !pid.Equals(parentId))
            {
                var subMenuBuilder = new StringBuilder();
                sb.Append(GenerateUL(subMenu, table, subMenuBuilder));
            }
            sb.Append("</li>");
        }
    }
    sb.Append("</ul>");
    return sb.ToString();
} 
```

我认为这里重要的是通过在调试器中单步执行代码来真正了解这段代码的工作原理，这样如果出现任何其他问题，您就可以进行更改。

# jquery - 更改/反转 jQuery parents() 选择器的顺序

> ID：14137814
> 
> 赞同：3
> 
> 时间：2013-01-03T11:14:50.493
> 
> 标签：jquery

我在 jQuery 中为每个循环使用以下选择器：

```
$("#myid").parents().andSelf().each(function({}) 
```

选择器返回一个像这样的对象：

```
object[html, body, div#global_container, div#content, div#myarea, span.myclass, div#myid] 
```

这意味着`each`循环将从最远的父级开始，然后最终以`self`

**如何反转该顺序，以便`each`循环从`self`dom 树开始并向上而不是向下工作？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:26:03.770

为了`reverse()`工作，您需要将 jQuery 对象更改为`array`：

```
var elements = $("#myid").parents().andSelf();
elements.toArray().reverse().each(function() {} ); 
```

[http://jsfiddle.net/6VVAD/](http://jsfiddle.net/6VVAD/)

编辑：该`.each()`函数不会以这种方式工作，因为我们不能将它与@scoota269 提到的非 jQuery 对象链接起来

我通过将集合传递给每个函数来修复它，如下所示：

```
var elements = $("#myid").parents().andSelf();
var reversed_elements = elements.toArray().reverse();

jQuery.each( reversed_elements, function(i, elem) {
     console.log(elem , i)
});
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:18:23.063

您可以使用`reverse`数组方法。

```
Array.reverse($("#myid").parents().andSelf()); 
```

请注意，该`reverse`功能并非在所有浏览器上都可用。但是你可以使用[es5-shim.js](https://github.com/kriskowal/es5-shim/blob/master/es5-shim.js)来解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-14T22:18:08.253

向 jQuery 添加反向函数的好方法：

`jQuery.fn.reverse = [].reverse`

`Array.reverse`几乎所有浏览器都可以使用：https [://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reverse](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reverse)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T11:18:53.750

`$($("#myid").parents().andSelf().toArray().reverse()).each(function({})`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-21T15:02:28.583

我想`.reverse()`对于大型节点集来说可能非常昂贵，所以我建议使用

`$.merge($el, $el.parents()).each(function(){ ... })`

# java - 为 Installanywhere2010 安装程序设置 UAC“发布者”字段

> ID：14137819
> 
> 赞同：2
> 
> 时间：2013-01-03T11:15:00.433
> 
> 标签：java, windows, installanywhere

当我打开我的安装程序（我使用 InstallAnywhere 2010 创建的）时，会出现 UAC 对话框，其中包含有关我的安装程序的信息。发布者字段为“未知”。

如何将字段发布者从未知更改为所需名称...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:55:07.787

您需要对完成的安装程序进行数字签名。

在 InstallAnywhere 文档中，我们发现以下内容：

> 如果您拥有有效的数字证书，则可以在 Windows 上对安装程序进行数字签名。数字签名为最终用户提供了额外的安全性，因为他们知道安装程序来自受信任的来源。它还可以防止您的客户在 Windows XP Service Pack 2 和更高版本的系统上启动安装程序时看到“未知发布者”警告。要对安装程序进行数字签名，您基本上需要 thre [sic] 文件：.pvk 文件（私钥）、.spc 文件（代码签名证书）和 signcode.exe（Microsoft 的代码签名工具）。您可以 `signcode.exe`从微软的下载中心下载。它包含在一个名为`codesigningx86.exe`. Signcode 具有 GUI 模式，但也可以从命令行运行。命令行可以很简单：
> 
> `signcode /spc myCert.spc /v mypkey.pvk "install.exe"`
> 
> Signcode 有许多命令行参数。有关 Signcode 的更多信息，请`signcode.exe`在 MSDN 库中搜索。

请参阅 MSDN 上有关 SignTool 实用程序的链接：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa387764 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa387764(v=vs.85).aspx)

# javascript - jQuery UI：对象不支持此属性或方法

> ID：14137821
> 
> 赞同：0
> 
> 时间：2013-01-03T11:15:08.387
> 
> 标签：javascript, jquery, jquery-ui, internet-explorer

我花了太多时间在 Google 上寻求帮助并试图自己修复它。

导致所有问题的代码如下所示：

```
$("#nameBox").dialog({
    "modal":        false,
    "autoOpen":     false,
    "resizable":    false,
    "height":       "auto",
    "width":        350,
    "open":         function(){$("input[name='name']",this).val('');},
    "buttons":      {"Save":function(){
        var current_user = $("input[name='name']",this).val();
    }}
}); 
```

在 IE8 上，我收到一条消息“**对象不支持此属性或方法**”，这显然是由这一行引起的：

```
 var current_user = $("input[name='name']",this).val(); 
```

让我感到困惑的是对话框打开了，这意味着即使它们都使用相同的方法，这段代码也会成功执行：

```
 "open":         function(){$("input[name='name']",this).val('');}, 
```

任何形式的帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:27:34.770

请注意，`this`在这两种情况下都没有设置为相同的对象。

在您最喜欢的 javascript 控制台中尝试以下代码：

```
var test = { "prop1": function(){console.log(this);}, "prop2":{"Save":function(){console.log(this);}}, "prop3": 10} 
```

然后运行`test.prop1()`和`test.prop2.Save()`。您将看到在第一次尝试中记录了 Object `test`，而在第二个示例中，您将记录了内部 Object `prop2`。

[你可以在这里](http://doctrina.org/Javascript-Function-Invocation-Patterns.html#ci)阅读一篇很棒的文章

# c++ - OpenSSL 加密/解密

> ID：14137822
> 
> 赞同：1
> 
> 时间：2013-01-03T11:15:17.650
> 
> 标签：c++, encryption, openssl

我目前正在尝试制作一个加密二进制文件（.zip）的简单程序，将其保存为另一种格式（.cry），然后将 .cry 文件解密回其原始状态。

我没有收到任何错误，但是当我尝试打开解密的 .zip 文件时，存档程序出现错误。

注意：原始 .zip 文件仅包含一个小 .txt 文件，其中写有 3 个单词。

```
#include "stdafx.h"
#include <stdio.h>
#include <stdlib.h>
#include <openssl/evp.h>
#include <openssl/rand.h>

int main(){
const EVP_CIPHER* pCipher = EVP_aes_128_ecb();
EVP_CIPHER_CTX* pCtx = new EVP_CIPHER_CTX;
//int nBl = EVP_CIPHER_CTX_block_size( pCtx );
FILE *fin;
FILE *fout;
FILE *fdecr;
long fin_size,fout_size,fdecr_size;
unsigned char *fin_buf;
unsigned char *fout_buf;
unsigned char *fdecr_buf;

size_t rezultat;

fin = fopen("arhiva.zip", "rb");
fout = fopen("arhiva.zip.cry","wb");
fdecr= fopen("decript.zip","wb");
if (fin==NULL)
    {fputs ("File error",stderr); exit (1);}
if (fout==NULL)
    {fputs ("File error",stderr); exit (1);}
if (fdecr==NULL)
    {fputs ("File error",stderr); exit (1);}

fseek (fin , 0 , SEEK_END);
fin_size = ftell (fin);
fout_size=fin_size;
fdecr_size=fin_size;
rewind (fin);
fin_buf = (unsigned char*) malloc (sizeof(unsigned char)*fin_size);

fdecr_buf= (unsigned char*) malloc (sizeof(unsigned char)*fin_size);
if (fin_buf == NULL) {fputs ("Memory error",stderr); exit (2);}
//if (fout_buf == NULL) {fputs ("Memory error",stderr); exit (2);}
if (fdecr_buf == NULL) {fputs ("Memory error",stderr); exit (2);}

//copiere fisier in buffer
rezultat = fread (fin_buf,1,fin_size,fin);
if (rezultat != fin_size) {fputs ("Reading error",stderr); exit (3);}

      //pregatire criptare
OpenSSL_add_all_ciphers();

EVP_CIPHER_CTX_init( pCtx );

unsigned char pKey[192];
unsigned char pIV[192];
RAND_bytes(pKey,24);
RAND_bytes(pIV,24);

EVP_EncryptInit_ex( pCtx, pCipher, NULL, pKey, pIV);
EVP_DecryptInit_ex( pCtx, pCipher, NULL, pKey, pIV);

      //cript

int nOutLen = 0;
int nTmpOutLen = 0;

fout_buf = (unsigned char*) malloc (sizeof(unsigned char)*fout_size);
memset( fout_buf, 0, fout_size);

EVP_EncryptUpdate( pCtx,fout_buf,&nTmpOutLen,fin_buf,fin_size );
nOutLen += nTmpOutLen;
EVP_EncryptFinal( pCtx,fout_buf + nTmpOutLen,&nTmpOutLen );
fwrite(fout_buf, 1, fout_size, fout);

//decript
nOutLen = 0;
nTmpOutLen = 0;
memset( fdecr_buf, 0, fdecr_size);

EVP_DecryptUpdate(pCtx,fdecr_buf,&nTmpOutLen,fout_buf,fout_size );
nOutLen += nTmpOutLen;
EVP_DecryptFinal( pCtx,fdecr_buf + nTmpOutLen,&nTmpOutLen );
fwrite(fdecr_buf, 1, fdecr_size, fdecr);

fclose(fin);
fclose(fout);
fclose(fdecr);
EVP_CIPHER_CTX_cleanup(pCtx);

return 0; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T12:44:21.797

看起来您没有将整个加密/解密输出写入文件。写在那里 nOutLen，而不是 fdecr_size。您正在使用 ECB 模式，因此您的加密数据将被填充到 16 字节边界。我也建议使用 CBC 模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T15:29:59.437

有很多问题：

*   该代码假定加密文件将与原始文件大小相同。通常情况并非如此，尤其是对于您正在使用的 ECB 模式下的 AES-128 等分组密码。事实上，你`fout_buf`在调用`EVP_EncryptFinal()`.
*   您需要正确计算`nOutLen`EVP 操作（包括`*Final`）并处理那么多字节的加密或解密输出。例如，您只将`fout_size`加密数据的字节写入`.cry`文件，这比 OpenSSL 写入缓冲区的要少，这反过来会导致解密后的最后一个块损坏，从而导致存档器错误。
*   您使用交错的相同上下文`pCtx`进行加密和解密。您应该使用单独的上下文结构进行加密和解密。
*   `pKey`您为和保留 192 个字节`pIV`，继续用随机数据填充每个 24 个字节，但最终 OpenSSL 仅使用 16 个字节的密钥（AES-128），并且没有任何 IV（ECB 模式不使用 IV） .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T14:26:19.823

`nOutLen`更新部分增加了`nTmpOutLen`，但终结部分增加了。

# android - 如果我的电话号码未设置为电话设置，如何获取电话号码

> ID：14137827
> 
> 赞同：0
> 
> 时间：2013-01-03T11:15:49.957
> 
> 标签：android, android-intent, android-emulator

> **可能重复：**
> [在 Android SDK 中获取电话号码](https://stackoverflow.com/questions/2480288/get-phone-number-in-android-sdk)

我想阅读我尝试过的电话号码：

```
TelephonyManager manager =(TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
   phoneNumber = manager.getLine1Number(); 
```

但它返回null。在我的设置->关于电话->电话号码中也显示未知。

那么如何在android中读取自己的电话号码。

任何建议将不胜感激，在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:56:49.000

您可以查看本教程以了解[如何以编程方式获取自己的手机号码](http://rdcworld-android.blogspot.in/2012/03/how-to-get-own-mobile-number.html)

请阅读我在教程下面写的所有信息

> 正如我所读到的，到目前为止，有些人对输出的不同行为存在冲突。有报道称，某些 SIM 卡会导致此方法返回 null。
> 
> 因为这个问题没有保证的解决方案，因为电话号码没有物理存储在所有 SIM 卡上，也没有从网络广播到电话。在一些需要物理地址验证的国家尤其如此，之后才进行号码分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:21:11.953

将权限 READ_PHONE_STATE 添加到清单文件后尝试。

# geolocation - 如何在 WINDOWS 8 商店应用程序 C# bing 地图中使用地址查找地理坐标

> ID：14137829
> 
> 赞同：0
> 
> 时间：2013-01-03T11:15:50.970
> 
> 标签：geolocation, bing-maps

我想在 bing 地图上显示图钉，我有地址列表，我想要该地址的地理坐标，我怎样才能得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:24:53.417

您可以使用 MSDN 中描述的专用 REST 服务：http: [//msdn.microsoft.com/en-us/library/ff701714.aspx](http://msdn.microsoft.com/en-us/library/ff701714.aspx)

为了提高性能，我建议您确保在将它们显示在地图上之前已经对其进行了地理编码，因此您只需将它们添加到地图控件上。

此外，由于您使用的是 Windows 8 和 C# 应用程序，因此您应该在这里查看 Ricky 的博客，在那里您将能够找到示例应用程序以及一些有用的代理类，以便通过 .Net 轻松使用服务应用程序： [http ://rbrundritt.wordpress.com/2012/12/12/geocoding-and-routing-in-bing-maps-windows-store-apps-native/](http://rbrundritt.wordpress.com/2012/12/12/geocoding-and-routing-in-bing-maps-windows-store-apps-native/)

# zend-framework - Zend View Helper 错误：在注册表中找不到名为“幻灯片”的插件

> ID：14137831
> 
> 赞同：0
> 
> 时间：2013-01-03T11:16:00.017
> 
> 标签：zend-framework

我有一个用 Zend Framework 封装编写的应用程序，我想通过添加以下代码在我的默认模块中添加一个视图助手：

应用程序/模块/默认/视图/helpers/slideshow.php：

```
class Default_View_Helper_Slideshow extends Zend_View_Helper_Abstract

{

    public function slideshow()
    {

    }

} 
```

应用程序/Bootstrap.php：

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
    public function _initViewHelperPath() {

        $this->bootstrap('view');
        $view = $this->getResource('view');

          $view->addHelperPath(
                APPLICATION_PATH . '/modules/default/views/helpers/',
                'Default_View_Helper');
 } 
```

应用程序/模块/默认/视图/脚本/index/index.phtml：

```
<?php $this->slideshow(); ?> 
```

并收到此错误：

> 信息：
> 
> 在注册表中找不到名为“幻灯片”的插件；使用的路径： Default_View_Helper_: /var/www/go/application/modules/default/views/helpers/ Zend_View_Helper_: Zend/View/Helper/:/var/www/go/application/modules/default/views/helpers/

我应该怎么做才能解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:22:02.927

您的助手的文件名应该是`application/modules/default/views/helpers/Slideshow.php`（注意大写“S”）。

# wcf - 如何将 SOAP 标头添加到 WCFSTORM 工具中的所有方法

> ID：14137835
> 
> 赞同：1
> 
> 时间：2013-01-03T11:16:08.140
> 
> 标签：wcf, testing

我正在尝试将消息头添加到 WCFStorm 中的所有方法中，有一个概念是手动将肥皂头添加到每个方法中。但是我找不到将 SOAP 标头自动添加到所有方法的方法。有人可以指导我。

在此先感谢 Sudhakar Byna。

# android - android中sendMultipartText的问题

> ID：14137836
> 
> 赞同：0
> 
> 时间：2013-01-03T11:16:16.267
> 
> 标签：android, sms

我最近在发送短信时遇到了一点麻烦，因为 sendTextMessage 只能发送 160 个字符或更少字符的短信。然而，我希望发送一个希望提示另一个用户输入信息的长文本。

这是我的代码：

```
//sends a SMS message to another device
private void sendSMS(String phoneNo, String text)
{     

    String SENT = "SMS_SENT";
    String DELIVERED = "SMS_DELIVERED";

    PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
        new Intent(SENT), 0);

    PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
        new Intent(DELIVERED), 0);

    //when the SMS has been sent
    registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS sent", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(getBaseContext(), "Generic failure", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(getBaseContext(), "No service", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    Toast.makeText(getBaseContext(), "Null PDU", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    Toast.makeText(getBaseContext(), "Radio off", 
                            Toast.LENGTH_SHORT).show();
                    break;
            }
        }
    }, new IntentFilter(SENT));

    //when the SMS has been delivered 
    registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS delivered", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                    Toast.makeText(getBaseContext(), "SMS not delivered", 
                            Toast.LENGTH_SHORT).show();
                    break;                      
            }
        }
    }, new IntentFilter(DELIVERED));

    displaySent(text, phoneNo);     

    SmsManager sms = SmsManager.getDefault();
    ArrayList<String> parts = sms.divideMessage(text);
    sms.sendMultipartTextMessage(phoneNo, null, parts, sentPI, deliveredPI);***********

    //SmsManager sms = SmsManager.getDefault();
    //sms.sendTextMessage(phoneNo, null, text, sentPI, deliveredPI);

} 
```

在标有 Asterixs 的行，出现错误“SmsManager 类型中的方法 sendMultipartTextMessage(String, String, ArrayList, ArrayList, ArrayList) 不适用于参数（String, null, ArrayList, PendingIntent, PendingIntent）”。我希望这将有所帮助。

对此的任何帮助将不胜感激。

在旁注中，我想知道为什么不能所有发送短信的方法都只是一种可以自行分解所有消息的方法？当我假设sendMultipartMessage可以完成sendTextMessage的工作时，为什么需要sendTextMessage和sendMultipartTextMessage。任何关于为什么会这样的建议也将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:21:22.713

将代码更改为使用 sendMultipartTextMessage 发送消息：

```
SmsManager sms = SmsManager.getDefault();
ArrayList<String> parts = sms.divideMessage(text);

ArrayList<PendingIntent> sentPIarr = new ArrayList<PendingIntent>();
ArrayList<PendingIntent> deliveredPIarr = new ArrayList<PendingIntent>();

for (int i = 0; i < parts.size(); i++) {
sentPIarr.add(PendingIntent.getBroadcast(this, 0,new Intent(SENT), 0));
deliveredPIarr.add(PendingIntent.getBroadcast(this, 0,new Intent(DELIVERED), 0));
}

sms.sendMultipartTextMessage(phoneNo, null, parts, sentPIarr, deliveredPIarr); 
```

因为[sendMultipartTextMessage](http://developer.android.com/reference/android/telephony/gsm/SmsManager.html#sendMultipartTextMessage%28java.lang.String,%20java.lang.String,%20java.util.ArrayList%3Cjava.lang.String%3E,%20java.util.ArrayList%3Candroid.app.PendingIntent%3E,%20java.util.ArrayList%3Candroid.app.PendingIntent%3E%29)方法将 ArrayList 作为 pendingIntents 的第四个和第五个参数

# php - PHP GD, imagepolygon(), 如何让线条更平滑？

> ID：14137842
> 
> 赞同：0
> 
> 时间：2013-01-03T11:16:33.040
> 
> 标签：php, gd

我用 PHP GD imagepolygon() 绘制了一些多边形。问题是我有很多可见的pizel，有没有办法让它们更平滑？

```
The included image shows the problem, on all the edges i have quite heavy pixelating. 
```

![在此处输入图像描述](../Images/d0ed2a773b4516d97d2dc13d468afa1c.png)

[编辑]

```
I have tried to use imageantialias() but i dont get it as good as im aiming for. 
I think that i will have to take a look at vector graphics, anyway, here is the image with anti-aliasing if anyone is interested 
```

![在此处输入图像描述](../Images/7c1ea6b9131929f8162b25a8cdadda2e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T11:34:49.137

如果您的 GD 图像资源是真彩色并且您没有使用 alpha 组件（透明度），您可以调用[imageantialias()](http://php.net/manual/en/function.imageantialias.php)来启用抗锯齿。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:40:28.307

避免线条图像素化的最佳方法是使用矢量图而不是基于像素的图形。

我接受这对你来说意味着完全重写，但它会彻底解决问题（并从长远来看给你更多的灵活性）。

如果你决定走这条路，我的建议是研究像[Raphael](http://raphaeljs.com/)这样的 Javascript 库。从您的 PHP 代码中，您将输出坐标数据而不是实际的图形，然后使用 Ajax 将这些坐标加载到您的 Javascript 代码中，并使用 Raphael 来绘制图像。

我知道这不是您问题的直接答案，但我希望它能让您深思。（我已经给抗锯齿答案+1，因为它对你来说是一个直接而好的答案）。

# excel - 在 PrimeFaces 中动态创建 DataTable

> ID：14137849
> 
> 赞同：0
> 
> 时间：2013-01-03T11:16:55.913
> 
> 标签：excel, jsf, primefaces

我正在创建一个应用程序，用户将在其中上传 excel 文件，应用程序将以 DataTable 的形式显示它。到目前为止，我已经使用[此处给出的代码编写了以下代码](http://www.mastertheboss.com/primefaces/datatables-with-primefaces)

```
 <h3>Dynamic Data table example</h3>
    <p:dataTable var="data" value="#{tableBean.people}">
        <p:columns value="#{tableBean.columns}" var="column"
            columnIndexVar="colIndex">
            <f:facet name="header">
            #{column.header}
            </f:facet>

        #{data[column.property]}
        </p:columns>
    </p:dataTable>

</h:form> 
```

托管 bean 代码

```
private void addPeople() {
    people = new ArrayList<People>();

    People w1 = new People("Homer Simpson","The father",48);
    People w2 = new People("Marge Simpson","The mother",46);
    People w3 = new People("Bart Simpson","Oldest child",11);
    People w4 = new People("Lisa Simpson","Sister of Bart",8);

    people.add(w1);
    people.add(w2);
    people.add(w3);
    people.add(w4);
}

private void createDynamicColumns() {

    columns = new ArrayList<ColumnModel>();
    columns.add(new ColumnModel("Name", "name"));
    columns.add(new ColumnModel("Role", "role"));
    columns.add(new ColumnModel("Age", "age"));
} 
```

Getter 方法也包括在内。

此代码工作正常，但在此示例中，我为行设置了模式，即（名称、角色、年龄）。但我不知道 excel 文件中有多少列，因此无法定义行数据的模式之前。

有没有办法解决这个问题？

# c++ - 删除所有构造函数（或其他函数）的最佳方式？

> ID：14137853
> 
> 赞同：11
> 
> 时间：2013-01-03T11:17:01.360
> 
> 标签：c++, c++11, memory-management, delete-operator

假设我想做一个无法构造的类型（不要问为什么）。

```
struct Impossible
{ 
```

我可以这样做：

```
 Impossible() = delete;
    // disable automatically generated constructors, don't declare any others
    Impossible(const Impossible&) = delete;
    // I suppose this is redundant with nothing to copy 
```

或像这样：

```
 Impossible(...) = delete;
    // explicitly disable all constructors 
```

或像这样：

```
 template<typename... Ts>
    Impossible(Ts...) = delete;
    // explicitly disable all constructors, template version
}; 
```

我想我可以对任何函数提出同样的问题，而不仅仅是构造函数。

我选择哪一个有什么区别吗？在语法方面，我想我喜欢第二种选择。但是是否有任何情况可以检测到差异（除了错误消息的文本）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T11:18:42.547

第一个绰绰有余 - 编译器不会生成任何构造函数，**最重要的是，它是惯用的**。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-03T15:33:05.133

有区别，例如：

```
#include <type_traits>

struct Unconstructible
{
    Unconstructible() = delete;
};

static_assert( !std::is_default_constructible<Unconstructible>::value, "not default constructible" );
static_assert( std::is_copy_constructible<Unconstructible>::value, "copyable" ); 
```

虽然你永远不能构造这个对象，所以在实践中你也永远不能创建一个副本，根据库中的语言和类型特征，它在技术上是 CopyConstructible，因为有一个隐式声明的复制构造函数。

同样，使用`Impossible(...)`or`Impossible(Ts&&...)`形式仍然有一个隐式声明的复制构造函数。

另一方面，如果你这样做：

```
#include <type_traits>

struct Unconstructible
{
    Unconstructible(const Unconstructible&) = delete;
};

static_assert( !std::is_default_constructible<Unconstructible>::value, "not default constructible" );
static_assert( !std::is_copy_constructible<Unconstructible>::value, "not copyable" ); 
```

用户声明的构造函数的存在抑制了默认构造函数的隐式声明，因此该类既不是 DefaultConstructible 也不是 CopyConstructible。

* * *

注意您的最后一个示例可能应该`Impossible(Ts&&...)`匹配*任何*类型，包括不可复制和不可移动的类型。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-03T11:21:36.487

您不能创建此类的实例：

```
struct Impossible
{
    Impossible() = delete;
}; 
```

请注意，复制构造函数（或移动构造函数）的问题甚至不会出现，因此没有必要删除它们。一个对象不能存在，因为它不能被*构造*，所以复制或移动是没有问题的。

# xcode - 尝试验证时出现 Xcode 错误

> ID：14137861
> 
> 赞同：1
> 
> 时间：2013-01-03T11:17:24.207
> 
> 标签：xcode, message, code-signing, archive, submission

我刚刚有一个应用被拒绝，由于一些小原因，我已经做出了请求的修改，但是当我在提交前尝试验证时，我收到了这条消息

无效的参数被传递给 codesign。Arguments were: --sign 305e91f2c1f458699df5833256815b2505f87461 --force --preserve-metadata=identifier,entitlements,resource-rules /var/folders/xc/6pjdg38j3_d1fc4s0_scgnsr0000gq/T/4884FF04-2DE6-47F9-8D22-0C1BEAAFE2CA-60252-00000149C7362BE9/iSuperSearch.应用程序/iSuperSearch

我试过调查它但找不到答案唯一不同的是我短暂测试了 xcode 4.6 但又回到了通常的版本

提前感谢您提供的任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:15:29.350

也许用过 InstaSign 或 iResign？如果是这样，修复：http: [//imi.im/post/2012-12-26/40046118177](http://imi.im/post/2012-12-26/40046118177)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:45:55.077

通过在命令行上键入以下内容来检查正在使用的 Xcode：

> xcode-select --打印路径

我的猜测是“简要测试 xcode 4.6”可能已将默认 Xcode 更改为 4.6 版，目前无法用于将应用程序提交到 App Store。切换回上一个官方 Xcode 版本。

# c# - 同步两个控件的画笔背景

> ID：14137862
> 
> 赞同：0
> 
> 时间：2013-01-03T11:17:31.157
> 
> 标签：c#, wpf, xaml

示例：有两个控件：一个是 600“像素”宽，另一个是 200“像素”宽并显示在第一个控件的正下方，与它右对齐。第一个控件的背景是`LinearGradientBrush`在某些资源字典中定义的。

目标：我希望第二个控件的背景与第一个控件同步，使第二个控件看起来像第一个控件的扩展。

问题：不能选择简单的背景绑定，因为第二个控件的背景会拉伸`LinearGradientBrush`超过 200 个“像素”，而第一个控件会将其拉伸超过 600 个“像素”。是的，我可以手动定义一个新画笔，以便第二个控件与第一个控件匹配，但如果我更改任何内容（控件大小、画笔），我将不得不再次手动更新第二个画笔。我希望背景自动同步。

有没有好的解决方案`LinearGradientBrush`？是否有适用于所有类型刷子的通用解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:03:21.290

If the ratio between the controls is constant, you can make the background "stretch across" the controls by adjusting the offset, like this:

```
<Grid Width="700" Height="300">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="auto" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="*" />
        <RowDefinition Height="*" />
        <RowDefinition Height="*" />
        <RowDefinition Height="*" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>

    <!-- Horizontal gradient -->
    <Grid Width="600" Grid.Row="1" Grid.Column="1">
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                <GradientStop Color="Red" />
                <GradientStop Color="Green" Offset="1" />
            </LinearGradientBrush>
        </Grid.Background>
    </Grid>
    <Grid Width="200" Grid.Row="2" Grid.Column="1" HorizontalAlignment="Right">
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                <GradientStop Color="Red" Offset="-2" />
                <GradientStop Color="Green" Offset="1" />
            </LinearGradientBrush>
        </Grid.Background>
    </Grid>

    <!-- Vertical gradient -->
    <Grid Width="600" Grid.Row="3" Grid.Column="1">
        <Grid.Background>
            <LinearGradientBrush StartPoint="1,0" EndPoint="1,1">
                <GradientStop Color="Blue" />
                <GradientStop Color="Yellow" Offset="2" />
            </LinearGradientBrush>
        </Grid.Background>
    </Grid>
    <Grid Width="200" Grid.Row="4" Grid.Column="1" HorizontalAlignment="Right">
        <Grid.Background>
            <LinearGradientBrush StartPoint="1,0" EndPoint="1,1">
                <GradientStop Color="Blue" Offset="-1" />
                <GradientStop Color="Yellow" Offset="1" />
            </LinearGradientBrush>
        </Grid.Background>
    </Grid>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:26:13.693

以下内容是否适合您。1 个包含上述两个的大型控件。另一个控件填充了你们两个没有覆盖的空白空间。在您的两个控件上使用带有透明背景的设计背景的大型包含控件。最后一个填充控件将使用绑定所有这些的父控件。希望这是有道理的。;)

# asp.net - 使用 UpdatePanel 在 contentplaceholder 中的页面之间导航

> ID：14137863
> 
> 赞同：1
> 
> 时间：2013-01-03T11:17:35.230
> 
> 标签：asp.net, ajax, updatepanel, master-pages

我有一个母版页：

```
<asp:UpdatePanel ID="upPanel" runat="server">
    <ContentTemplate>
         <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
         </asp:ContentPlaceHolder>
    </ContentTemplate>
</asp:UpdatePanel> 
```

我还有 3 个页面，带有导航按钮 Next 和 Back，如下所示：

```
<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
    <div>
        <asp:Label ID="lbl1" runat="server">Second PAGE</asp:Label>
        <asp:Button ID="btnBack" runat="server" />
        <asp:Button ID="btnNext" runat="server" />
    </div>   
</asp:Content> 
```

请您告诉我，如何在不加载所有页面且仅重载内容的情况下在此页面之间导航？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:52:10.217

`ContentPlaceHolderContent`您可以在on`btnNext`和`btnBack` `OnClick`events中添加和删除控件

**标记：**

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
    <asp:UpdatePanel ID="upPanelContent" runat="server">
        <asp:contentplaceholder id="ContentPlaceHolderContent" runat="server" />
    </asp:UpdatePanel>  
    <asp:Button ID="btnBack" runat="server" OnClick="btnBack_Click"/>
    <asp:Button ID="btnNext" runat="server" OnClick="btnNext_Click"/>
</asp:Content> 
```

**代码隐藏：**

```
 protected btnNext_Click(Object sender, EventArgs e) 
  {
     ContentPlaceHolderContent.Controls.Clear();
     Literal l = new Literal();
     l.Text = "new content";
     ContentPlaceHolderContent.Controls.Add(l);
  }

  protected void btnBack_Click(Object sender, EventArgs e) 
  {
     ContentPlaceHolderContent.Controls.Clear();
     Literal l = new Literal();
     l.Text = "old content";
     ContentPlaceHolderContent.Controls.Add(l);
  } 
```

# ios - Accessing notification bar

> ID：14137866
> 
> 赞同：1
> 
> 时间：2013-01-03T11:17:45.917
> 
> 标签：ios, ios-ui-automation

Is there any API that will allow me to access the notification bar while running my UI-Automation code?

e.g test case

Testing my app: 1\. User-A does some update for User-B. 2\. User-B's device shows a notification 3\. UI Automation wants to access the notification bar of User-B's device to see what the notification is and test the content.

Queries: 1\. Is it possible using UI Automation. 2\. If not how can this be tested?

# php - Zend Framework 2 - Global check for authentication with ZFCUser

> ID：14137868
> 
> 赞同：13
> 
> 时间：2013-01-03T11:17:50.783
> 
> 标签：php, authentication, zend-framework2, zfcuser

I installed `ZFCUser` successfully. Now I wonder if there is a way to **globally** check for authentication.

As outlined [in the wiki](https://github.com/ZF-Commons/ZfcUser/wiki/How-to-check-if-the-user-is-logged-in) there are several ways to check for auth. They all work but do I have to put the check-if-clause really in **every single** action? All my sites should be only accessable when beeing logged in and if not, you should be rerouted to the login page.

Does anybody know if there's a central place where I can put this logic?

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-03T11:35:48.720

老实说，我认为阻止未经身份验证的用户访问**每个**页面并不是一个好主意。您将如何访问登录页面？

也就是说，您必须知道正在访问的页面，才能将匿名访问者可以访问的页面列入白名单。首先，我建议包含登录页面。您可以使用他们的路线最简单地检查页面。因此，根据白名单检查当前匹配的路由。如果被阻止，请采取行动。否则，什么也不做。

一个示例将在模块的 Module.php 中，例如您的应用程序：

```
namespace Application;

use Zend\Mvc\MvcEvent;
use Zend\Mvc\Router\RouteMatch;

class Module
{
    protected $whitelist = array('zfcuser/login');

    public function onBootstrap($e)
    {
        $app = $e->getApplication();
        $em  = $app->getEventManager();
        $sm  = $app->getServiceManager();

        $list = $this->whitelist;
        $auth = $sm->get('zfcuser_auth_service');

        $em->attach(MvcEvent::EVENT_ROUTE, function($e) use ($list, $auth) {
            $match = $e->getRouteMatch();

            // No route match, this is a 404
            if (!$match instanceof RouteMatch) {
                return;
            }

            // Route is whitelisted
            $name = $match->getMatchedRouteName();
            if (in_array($name, $list)) {
                return;
            }

            // User is authenticated
            if ($auth->hasIdentity()) {
                return;
            }

            // Redirect to the user login page, as an example
            $router   = $e->getRouter();
            $url      = $router->assemble(array(), array(
                'name' => 'zfcuser/login'
            ));

            $response = $e->getResponse();
            $response->getHeaders()->addHeaderLine('Location', $url);
            $response->setStatusCode(302);

            return $response;
        }, -100);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-25T19:33:30.173

在 ZF 2.4.2 上，我在 Module.php 中执行此操作

```
class module {

protected $whitelist = array(
    'Application\Controller\Login'
);

public function onBootstrap(MvcEvent $e)
{

    $eventManager        = $e->getApplication()->getEventManager();
    $moduleRouteListener = new ModuleRouteListener();
    $moduleRouteListener->attach($eventManager);

    // add event
    $eventManager->attach('dispatch', array($this, 'checkLogin')); 

}

public function checkLogin($e)
{

    $auth   = $e->getApplication()->getServiceManager()->get("Zend\Authentication\AuthenticationService");
    $target = $e->getTarget();
    $match  = $e->getRouteMatch();

    $controller = $match->getParam('controller');

    if( !in_array($controller, $this->whitelist)){
        if( !$auth->hasIdentity() ){
            return $target->redirect()->toUrl('/login');
        }
    }

}

//other methods....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-23T12:21:51.477

您可以使用 ZF2 模块BjyAuthorize[来](https://github.com/bjyoungblood/BjyAuthorize) 阻止/允许基于用户角色访问页面，`guest`例如`user`使用`controller guard`等`route guard`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-19T11:15:01.587

人们，

提示，不要忘记添加“使用”来更正 RouteMatch 语句：

```
use Zend\Mvc\Router\Http\RouteMatch; 
```

这里需要这个：

```
if (!$match instanceof RouteMatch)... 
```

如果你忘记了，上面的 if 有变数

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-01-07T15:21:45.367

另一种选择可能是创建自己的抽象控制器超类并实现 onDispatch() 方法，如下所示：

```
public function onDispatch(MvcEvent $e) 
{
    // check authentication here

    return parent::onDispatch($e);
} 
```

您也可以在那里实施白名单:)。

# ios - iOS Safari 用户代理中的设备标识符？

> ID：14137884
> 
> 赞同：0
> 
> 时间：2013-01-03T11:18:52.237
> 
> 标签：ios, iis, safari, device, user-agent

这个列表 - [http://enterpriseios.com/wiki/Complete_List_of_iOS_User_Agent_Strings](http://enterpriseios.com/wiki/Complete_List_of_iOS_User_Agent_Strings) - 我非常喜欢它表明 safari 用户代理字符串告诉我们可以识别特定设备的信息，这很棒。

我的问题是当我在我的 iPhone 4 上检查我的用户代理字符串时（例如在 myhttp.info 上），我只能看到“iPhone；iPhone OS 6_0 like Mac OS X”以及用户代理字符串和其他一些版本号中的内容软件（！），但没有任何关于设备的信息。

我真的很想看到像“Apple-iPhone3C1/1001.523”这样的东西，但我不能。

有人可以解释一下为什么会这样吗？与iOS版本有关吗？还是服务商？还是实际设备？

在设备上浏览时您的用户代理是什么？您能看到我们在提到的列表中看到的设备标识符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:50:50.623

没有办法通过用户代理字符串识别较新的 iOS 设备的型号——**至少在 Mobile Safari 中没有**。不幸的是，这是设计使然。

我的第三代 iPad 有用户代理`Mozilla/5.0 (iPad; CPU OS 6_0_1 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A523 Safari/8536.25`。

其他具有 Web 视图的应用程序可能会提供您需要的信息。例如，Facebook 添加`iPad 3`到我的用户代理字符串。但是，您不能依赖这一点，因为绝大多数用户在 Mobile Safari 上浏览。

## 附带说明...

自从一家分析公司违反他们的 ToS 并发布了他们当时想要保密的 iPad 和 iPhone 原型的版本信息以来，Apple 在模型识别方面一直非常保密。请参阅：[史蒂夫乔布斯对跟踪 Apple 设备的分析公司感到愤怒](http://news.softpedia.com/news/Steve-Jobs-Angry-at-Analytics-Firms-Tracking-its-Devices-143714.shtml)。

# php - PHP 脚本并非无处不在

> ID：14137886
> 
> 赞同：0
> 
> 时间：2013-01-03T11:18:58.450
> 
> 标签：php

我一直在写一个新闻脚本，它在一个页面上显示所有的新闻站点（一种存档）。在该页面上，我可以将一个项目拖到另一个项目的下方/上方，并将订单保存在我的数据库中。这在我的测试服务器上运行良好，但现在我的网站已准备就绪，我将所有文件转移到另一台服务器，脚本将不再工作。我的测试服务器的PHP版本是：5.3.18，另一个是：5.2.11。也许这就是问题所在，或者不是？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:59:39.423

提供有关[PHP 5.2 到 5.3 更改](http://php.net/manual/en/migration53.changes.php)的信息。您应该注意到有少量[不兼容](http://php.net/manual/en/migration53.incompatible.php)（即有效的 5.2 项目在 5.3 上失败）和各种[新功能](http://php.net/manual/en/migration53.new-features.php)（即要求 5.3 超过 5.2）。您很可能拥有需要 5.3 才能运行的代码，并且可能需要重写您的代码才能使其在 5.2 上运行。

# jsf-2 - iframe 的目标更新

> ID：14137887
> 
> 赞同：0
> 
> 时间：2013-01-03T11:19:00.163
> 
> 标签：jsf-2, primefaces

我在`<c:forEach>`迭代器中更新 iframe 时遇到一些问题：

```
<h:form>
    <p:outputPanel rendered="#{dd.render()}">
        <p:tabView dynamic="true">
        <c:forEach var="aba" items="#{dd.abas}">
        <p:tab title="#{aba.orelha}" >
        <h2>
            <h:outputText value="#{aba.titulo}" />
            <p:selectOneMenu style="width:250px;  float:right;" value="#{aba.ln}" rendered="#{aba.selecaoAtiva}">
            <f:selectItems value="#{aba.itens}" />
             <p:ajax update="WHAT SHOULD GO HERE???" event="change" />
        </p:selectOneMenu>
        </h2>
            <f:view>
                <iframe src="very-Boring-And-Long-E.L.-Built-URL" width="#{dd.largura}" frameborder="0" height="#{dd.altura}" />
            </f:view>
            </p:tab>
        </c:forEach>
        </p:tabView>
    </p:outputPanel>
</h:form> 
```

当用户在`<p:selectOneMenu>`. 原始代码`@form`在 ajax 标记上，并且正在更新整个表单并将用户放回第一个选项卡。

如何让 ajax 更新 iframe 而不会弄乱活动选项卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:36:39.283

采用

```
<p:ajax process="@this" event="change" update="myIframe" /> 
```

也设置`myIframe`为你的框架的ID。我还建议您使用`<ui:repeat />`而不是`c:forEach`，它有时会破坏您的视图。看到这个[问题](https://stackoverflow.com/questions/4213681/when-uirepeat-works-for-x-but-cforeach-works-for-y)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:11:23.427

您可以尝试将 iframe 放在`h:panelGroup`or`p:panel`中，然后按整个表单的顺序更新 panelGroup。

作为替代方案，您可以更新在支持 bean 中维护选定选项卡索引的表单，因此重新呈现不会导致再次转到第一个选项卡。

但是，正如@Petr Mensik 所说，我建议您避免使用任何类型的 jsp 标签，`c:if`或者`c:forEach`除非您确定自己在做什么，否则会导致此类标签比其他标签更早呈现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:13:47.707

这个答案可能与我的情况特别相关，但我想出的解决方案是让它按预期工作。

如果有人可以提出更优雅的答案，那将被接受。
同时...

* * *

将表单标签移动到 中`<p:tab>`，因为标签不需要相互混淆。

让 ajax 更新`@form`，它可以工作。

```
<p:outputPanel rendered="#{dd.render()}">
<p:tabView dynamic="true">
    <c:forEach var="aba" items="#{dd.abas}">
        <p:tab title="#{aba.orelha}" >
            <h:form>
                <h2>
                    <h:outputText value="#{aba.titulo}" />
                    <p:selectOneMenu style="width:250px;  float:right;" value="#{aba.ln}" rendered="#{aba.selecaoAtiva}">
                        <f:selectItems value="#{aba.itens}" />
                         <p:ajax update="@form" event="change" />
                </p:selectOneMenu>
                </h2>
                <f:view>
                    <iframe src="very-Boring-And-Long-E.L.-Built-URL" width="#{dd.largura}" frameborder="0" height="#{dd.altura}" />
                </f:view>
            </h:form>
        </p:tab>
    </c:forEach>
</p:tabView>
</p:outputPanel> 
```

# c# - 标签在一定长度后无意中消失

> ID：14137888
> 
> 赞同：6
> 
> 时间：2013-01-03T11:19:01.363
> 
> 标签：c#, .net, winforms, timer, label

我有一个相当大的（宽度方面）C# WinForms 应用程序，它使用`System.Windows.Forms.Label`内部 a`System.Windows.Forms.Panel`作为选取框。

A在滴答事件后`System.Timers.Timer`更新位置。`Label`

```
int new_X_location = (label.Location.X + distance_invariant) % modulo;
label.Location = new Point(new_X_location, label.Location.Y); 
```

选框的功能不是问题，当我更改`Label.Text`字段时，标签消失了！

```
string some_string = working_function_that_returns_string();
label.Text = some_string; //disappears! 
```

![在此处输入图像描述](../Images/4201dddad89c29d927b8a99b161cec4d.png)

`24pt`当字体较大时（ ），它似乎被限制在大约 2100 个字符左右。当它更小时（`10pt`）时，字符串可以更长（`label.Text.Length >= 4200`）。

```
string some_string = working_function_that_returns_string();
label.Text = some_string.SubString(0,2000); //it's still visibile here.
...
label.Text = some_string.SubString(0,2200) //it's not visible! 
```

我不确定它是否与宽度限制或字体大小限制~~或表单宽度定位有关。~~. 在较小的字体大小和较短的字符串中定位是正确的。因此，这不是定位错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-30T14:34:28.420

我创建了一个测试应用程序来检查，我认为问题与`GDI+`该库使用的硬件加速和硬件加速有关。在我的 PC 上，大于 8192 像素的宽度无法正确呈现（标签消失，就像我更改文本时的情况一样）。

设置`UseCompatibleTextRendering`标签的属性（以及使用`GDI`和不使用`GDI+`）文本呈现几乎正确，但*一些字形片段在标签的底部可见*。

您必须将标签分成几个标签：

*   尝试将标签分解为不大于 8192 像素的块。
*   如果您的文本由不同的句点组成，您可以为每个句点创建一个标签（它更快更容易）。

这是测试代码：

```
using System;
using System.Drawing;
using System.Windows.Forms;

namespace LabelMaxChars
{
    public partial class Form1 : Form
    {
        private Panel pnlStrip;
        private Label lblText;
        private Timer timer;

        public Form1()
        {
            InitializeComponent();

            pnlStrip = new Panel();
            pnlStrip.Dock = DockStyle.Top;
            pnlStrip.Height = 64;
            pnlStrip.BackColor = SystemColors.ActiveCaption;
            pnlStrip.ForeColor = Color.White;

            lblText = new Label();
            lblText.Font = new Font("Microsoft Sans Serif", 12.0f, FontStyle.Regular, 
                                    GraphicsUnit.Point, ((byte)(0)));
            lblText.Location = new Point(582, 6);
            lblText.AutoSize = true;
            lblText.UseCompatibleTextRendering = true;
            lblText.Text = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. "+
                            "Sed vestibulum elit ac nunc feugiat, non varius enim commodo. "+
                            "Etiam congue, massa sollicitudin congue dapibus, odio erat blandit "+
                            "lectus, non vehicula nisi lacus sed orci. Vestibulum ante ipsum primis "+
                            "in faucibus orci luctus et ultrices posuere cubilia Curae; Donec ullamcorper "+
                            "feugiat dui, at imperdiet elit pulvinar in. Sed ac fermentum massa. "+
                            "Mauris hendrerit magna sit amet mi eleifend fringilla. "+
                            "Donec pretium augue gravida enim fermentum placerat. "+
                            "Vestibulum malesuada nisl a odio imperdiet condimentum. Sed vitae neque nulla. "+
                            "Curabitur sed facilisis odio. Integer adipiscing, ante ac cursus dignissim, "+
                            "ante sapien auctor ligula, id faucibus elit mauris nec nulla. "+
                            "Sed elementum nisl id quam convallis dictum. Nullam nulla turpis, "+
                            "elementum ac nisi in, faucibus eleifend est. ";

            lblText.Text += lblText.Text;
            lblText.Text += lblText.Text;
            lblText.Text += lblText.Text;
            lblText.Text += lblText.Text;

            Console.WriteLine("Text length {0}", lblText.Text.Length);

            pnlStrip.Controls.Add(lblText);
            this.Controls.Add(pnlStrip);

            timer = new Timer();
            timer.Interval = 10;
            timer.Enabled = true;
            timer.Tick += new EventHandler(timer_Tick);
        }

        private void timer_Tick(object sender, EventArgs e)
        {
            --lblText.Left;
            if (lblText.Left == this.ClientSize.Width >> 1)
            {
                lblText.Text = "Nullam id nisl tortor. Donec in commodo magna. Integer dignissim vestibulum ipsum, " +
                "ac lobortis nisl faucibus ac. Pellentesque convallis placerat est, " +
                "non tempus mi scelerisque in. Sed vel aliquam tellus. " +
                "Donec tincidunt elit et imperdiet egestas. Cras vel dictum lacus. " +
                "Nullam mollis neque ac lectus congue, eget imperdiet risus feugiat. " +
                "In commodo odio quis purus scelerisque, ut vestibulum justo vulputate. " +
                "Proin sit amet facilisis libero. Donec mollis, enim at ultrices rhoncus, " +
                "quam lectus condimentum ante, a varius urna nisl rutrum mi. " +
                "Pellentesque sodales tincidunt suscipit. Cras semper sem vulputate, " +
                "ornare eros sed, fringilla libero. Sed risus turpis, mollis vitae dictum eu, " +
                "malesuada et magna. Etiam quis orci nunc. Morbi mattis ante a nibh hendrerit vehicula. ";

                lblText.Text += lblText.Text;
                lblText.Text += lblText.Text;
                lblText.Text += lblText.Text;
                lblText.Text += lblText.Text;

                Console.WriteLine("Text length {0}", lblText.Text.Length);
            }

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T11:38:46.257

我尝试解决错误：

```
// Try disabling the "AutoSize"-property, and use the panels' sizes
label.AutoSize = false;
label.Width = yourRedPanel.Width;
label.Height = yourRedPanel.Height;
label.TextAlign = ContentAlignment.MiddleLeft;
label.AutoEllipsis = true;

// Check that "new_X_location"-variable is not negative or 
// too big to move the label out of the viewable area
label.Location = new System.Drawing.Point(new_X_location, label.Location.Y);

// Check that some_string.Length is as great or greater than given Substring length argument
label.Text = some_string.Substring(0, 2200);

// The max font size is the biggest possible value of float
Font testFont = new Font("Arial", float.MaxValue);

// If this doesn't help, wrap your code to try-catch block
// Run the code line by line (F10), and see where it jumps to "catch",
// if there occurs errors
try
{
   // Code here
}
catch (Exception ex) { MessageBox.Show(ex.Message); } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:50:33.397

我也在使用这样的东西！尝试这个：

```
label1.Size = CreateGraphics().MeasureString(label_txt, label1.Font).ToSize(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T11:32:31.603

您是否尝试过使用[AutoEllipsis](http://msdn.microsoft.com/en-us/library/system.windows.forms.label.autoellipsis.aspx)属性为 true的固定大小的标签 ( `AutoSize`false) ？如果它是由于宽度限制或包装问题，那么它应该消失。

如果这不能解决问题，那么您可能需要查看定位代码。如果它在位置计算中使用标签宽度，那么由于文本更改而导致的宽度变化可能会在某些极端情况下引发一些意外。同样，具有固定尺寸标签（或具有一些最大尺寸）可能会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-26T21:16:33.563

您可以对该函数使用断点。

```
(brkpnt)|    string some_string = working_function_that_returns_string(); 
```

然后在调试“介入”该功能时。一步一步调试它。从汽车窗口检查变量。它可能有返回“”空字符串的逻辑错误。

你必须发布那个 working_function_that_returns_string();

**其他想法**。您可以将 textbox.bacgorundcolor 修改为 none 以使其看起来像标签

# com - 如何使用 Heat 生成可重用的 COM 注册组件？

> ID：14137890
> 
> 赞同：0
> 
> 时间：2013-01-03T11:19:04.233
> 
> 标签：com, wix, reusability, heat

我使用WIX 工具集中的[heat](http://wix.sourceforge.net/manual-wix3/heat.htm) util 来生成 dll 的 COM 注册。一切正常，直到只有一个产品使用该 dll。

但是当这个 dll 已经被另一个产品注册或被后来安装的产品使用时，卸载我的产品会删除 DLL 注册并破坏其他应用程序。

有没有办法克服这个问题？我有一个想法使生成的组件永久化，但看起来没有简单的方法来完成它。这不是理想的情况，因为如果我们的应用程序是使用该 dll 的人，最好删除 DLL 注册。

另一个问题是注册 dll 会更改以前的注册，即使它有较新的版本。它会再次破坏其他应用程序。如果已经安装，我们想使用 never 版本。

任何人都可以推荐一个简单的解决方案来克服所描述的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:54:01.023

添加共享 DLL 时，您应该将 DLL 封装在两个产品中具有相同 ID 的组件中。该组件将在尚未安装时安装。当最后一个使用它的产品被卸载时，它将被删除。使用 WiX 库来处理共享组件。

您必须找到该共享 DLL 的安装位置。当您卸载产品 A 时，您会期望产品的安装文件夹会被删除，并且产品 B 也会出现相同的情况。因此共享的 DLL 应该在公共文件树中。

由于 COM 注册始终具有指向 COM 服务器 DLL 的绝对路径，因此它始终绑定到相应产品中的 DLL。如果产品安装程序不共享有关共享 DLL 的知识，您的产品应避免共享 DLL。您可以使用[免费注册 COM](http://msdn.microsoft.com/en-us/library/ms973913.aspx)来实现此目的。

# c++ - 如何在 C++ 中处理 Eclipse 中未解决的包含问题

> ID：14137891
> 
> 赞同：4
> 
> 时间：2013-01-03T11:19:04.613
> 
> 标签：c++, eclipse, include

我导入了两个自定义项目：projectA 和 projectB，projectA 中的类在项目 B 中包含标头，但 eclipse 总是显示一些黄色和红色线表示未解决的包含。（我确信所有关于 include 的语法和设置都是正确的，因为它们是已经开发和使用了很长时间的项目）如何处理？

我是否需要右键单击项目并执行 index->​​rebuild 或其他操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:33:45.623

您可以在 projectA 中设置 projectB 的头文件的路径：

> 项目 -> 属性 -> C/C++ 构建 -> 设置 -> 编译器 -> 包含

![在此处输入图像描述](../Images/f79cb0b58c626d4f63f4b4e40ac78ef6.png)

# parsing - Magento，修改产品自定义选项的管理 HTML，解析器在哪里？

> ID：14137893
> 
> 赞同：1
> 
> 时间：2013-01-03T11:19:12.713
> 
> 标签：parsing, magento, options, product

对于我的 Magento 开发之一，我需要编辑产品自定义选项选项卡的 HTML。对于每个自定义选项，您都会获得一个带有类**option-box**的 div 。

我需要在这个类中添加选项的 sku 以便识别它。

我发现`app/design/adminhtml/default/default/template/catalog/product/edit/options/option.phtml`。该文件似乎使用 javascript 通过模板系统加载我存储的选项。

我需要找到解析器在哪里以及它是如何工作的。我的主要问题是：我`{{sku}}`在模板中添加了一个，但是对于下拉类型的自定义选项，我无法在我的 html 中获取 sku，不知道为什么。

我尝试了一些事情： - 加载选项时，我在 getOptionValues 函数中的每种情况下都添加了 SKU，但选项卡没有打开，我没有收到错误... - 加载选项时，我添加了一个**类**属性SKU 在它的`getOptionValues`功能中，我替换`{{sku}}`为`{{class}}`，但选项卡没有打开，我也没有错误。

我需要找到解析器在哪里，以确定是否可以编辑它以接受**类**属性。

感谢您的帮助。

PS：`getOptionValues`功能在`Mage_Adminhtml_Block_Catalog_Product_Edit_Tab_Options_Option`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:59:41.093

您不需要更改解析器。它完全按照您的预期工作。

您遇到的问题是产品选项没有自己的 sku。Sku 在选项值上设置，如果自定义选项具有单个值，它会保存在 catalog_product_option 的 sku 列中，您可以在 getOptionValues 函数中使用

```
$value['class'] = $this->htmlEscape($_value->getSku()); 
```

但如果是下拉列表或多选 sku，则未在该表中设置（设置为 NULL），而是在 catalog_product_option_type_value 中设置（每个选项值一个 sku）。

如果您想在带有类选项框的 div 中拥有所有 sku-s，则必须执行以下操作：

在 getOptionValues 函数中：

```
//...
$value = array();
$value[ 'skus' ] = $this->htmlEscape($option->getSku());
//...
//code for select and multi-select
if ($option->getGroupByType() == Mage_Catalog_Model_Product_Option::OPTION_GROUP_SELECT) {
    foreach ($option->getValues() as $_value) {
       $value[ 'skus' ] .= ' ' . $this->htmlEscape($_value->getSku());
    //... 
```

在 option.phtml 中：

```
var firstStepTemplate = '<div class="option-box {{skus}}" id="option_{{id}}">'+ 
```

**编辑：** 话虽如此，我不建议您以这种方式使用 sku。首先，可以更改（甚至不存在）选项值的 sku。第二个原因是选项和选项值由它们的 ID 唯一标识。第三个原因是将 skus 放入类属性（如示例中）不会是要走的路（也许添加你自己的 data-my_attribute="{{skus}}" 会更好一点，但会有对于单个选项有太多选项值仍然是一个问题）。

我建议您不要更改 option.php/.phtml 中的任何内容（如果可能，甚至不要使用您自己的派生类），或者至少只在 phtml 模板中添加您的类值，然后您将在外部 javascript 中使用文件，您可以在其中动态更改 html 结构。

关于空白页，我想说您在更改 php 或 javascript 代码时犯了一个错误，而不是为模板提供了错误命名的值。无论我如何命名变量，只要它们具有正确的 javascript 变量 sintax，我都没有注意到任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:23:12.880

我走错了路。这种开发我的模块的方式是不正确的。我重新考虑并在 phtml 文件中完成了我所有的业务，并且我做到了。

感谢您的帮助。

# http - 如何在 CardDAV (WebDAV) REPORT 请求中进行高级过滤

> ID：14137894
> 
> 赞同：2
> 
> 时间：2013-01-03T11:19:14.627
> 
> 标签：http, filter, report, webdav, carddav

我的电子名片有一个 CATEGORIES 属性，它有一个逗号分隔的值列表。我想要的是在这个逗号分隔的列表中的某处获取所有具有传递值的电子名片。

我正在尝试使用过滤器执行 CardDAV REPORT 请求来完成此操作：

```
<C:filter test="allof"> 
<C:prop-filter name="CATEGORIES"  test="allof"> 
<C:text-match collation="i;unicode-casemap" 
match-type="contains" 
>searched_value</C:text-match> 
</C:prop-filter> 
</C:filter> 
```

这个过滤器的问题是它会匹配属性中任何位置传递的值，这意味着它也会匹配另一个值中的值，例如：

如果我搜索“朋友”，它将匹配“工作、朋友、同事”以及“工作、足球朋友、同事”。

我找不到使用 WebDAV 过滤器在逗号分隔列表中仅获取“完整”值的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:50:08.683

我终于使用不同的匹配类型解决了这个问题：

```
<C:filter> 
<C:prop-filter name="CATEGORIES"  test="anyof"> 
<C:text-match collation="i;unicode-casemap" 
match-type="equals">value</C:text-match> 
<C:text-match collation="i;unicode-casemap" 
match-type="contains">,value,</C:text-match> 
<C:text-match collation="i;unicode-casemap" 
match-type="ends-with">,value</C:text-match> 
<C:text-match collation="i;unicode-casemap" 
match-type="starts-with">value,</C:text-match> 
</C:prop-filter> 
</C:filter> 
```

细节：

如果任何包含的文本匹配匹配（逻辑或），则匹配：

```
<C:prop-filter name="CATEGORIES"  test="anyof"> 
```

此文本匹配将匹配与该值完全相等的值（这是逗号分隔列表中唯一的值）：

```
<C:text-match collation="i;unicode-casemap" 
match-type="equals">value</C:text-match> 
```

这将匹配包含两个逗号之间的值的值（这是逗号分隔列表中间部分的值）：

```
<C:text-match collation="i;unicode-casemap" 
match-type="contains">,value,</C:text-match> 
```

这将匹配以逗号结尾的值，后跟值（这是逗号分隔列表最后位置的值）：

```
<C:text-match collation="i;unicode-casemap" 
match-type="ends-with">,value</C:text-match> 
```

这将匹配以逗号开头的值开头的值（这是逗号分隔列表的第一个位置的值）：

```
<C:text-match collation="i;unicode-casemap" 
match-type="starts-with">value,</C:text-match> 
```

这样，这只会匹配逗号分隔列表中的完整值。

# oracle - ORA-01843: 在 oracle 中插入日期时月份无效

> ID：14137896
> 
> 赞同：4
> 
> 时间：2013-01-03T11:19:22.263
> 
> 标签：oracle, date, insert

我正在尝试在 oracle 数据库中插入一行，当我尝试使用日期时，我的标题中有错误。我的日期是`DD/MM/YYYY HH:MM:SS`（示例`25/01/2013 12:07:19`）

编辑以获得更好的解释：我有一个 android 应用程序，想通过 php 在 oracle 数据库中插入一行。
在 PHP 中我有：

```
$sqlString = sprintf("INSERT INTO GUASTI (%s, %s, %s, %s, %s, %s) 
                      VALUES ('%s', '%s', '%s', '%s', '%s', '%s')"
                      ,'guasto','tipo','data', 'localita', 'indirizzo_id', 'utente_id',
                       $array['guasto'], $array['tipo'], $array['data'], $array['localita'], $idUtenti, $idIndirizzo); 
```

`$array['data']`在哪里`25/01/2013 12:07:19`

ps 我知道那里存在安全问题，但目前还不是问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T11:22:32.353

`MM`是一个月。使用`MI`几分钟。

你有

```
HH:MM:SS 
```

每次分钟大于 12 时都会触发错误，因为您告诉 Oracle 将它们解释为月份。

您还使用没有 am/pm 的 HH（在您刚刚使用的示例中`12`）。如果您使用 24 格式，请使用`HH24`

```
DD/MM/YYYY HH24:MI:SS 
```

或者如果你想要 12 小时格式

```
DD/MM/YYYY HH:MI:SSAM 
```

进而

```
02/01/2013 07:42:00am 
```

**编辑**

您正在使用默认格式插入日期，即 MM/DD/YYYY（美国标准）：25 不是有效月份。您可以使用该`TO_DATE`功能

```
'TO_DATE(' . $array['data'] . ', DD/MM/YYYY HH24:MI:SS)' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T11:23:48.210

在插入日期时使用 TO_DATE('20/08/2012 09:00:00','DD/MM/YYYY HH24:MI:SS') 以获取更多详细信息，请参阅链接[Oracle 错误](http://www.techonthenet.com/oracle/errors/ora01843.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-24T09:57:20.480

只是为了了解更多信息：

定义了以下模式字母（从“A”到“Z”以及从“a”到“z”的所有其他字符都被保留）：

字母日期或时间组件演示示例

```
G   Era designator  Text    AD
y   Year    Year    1996; 96
Y   Week year   Year    2009; 09
M   Month in year (context sensitive)   Month   July; Jul; 07
L   Month in year (standalone form) Month   July; Jul; 07
w   Week in year    Number  27
W   Week in month   Number  2
D   Day in year Number  189
d   Day in month    Number  10
F   Day of week in month    Number  2
E   Day name in week    Text    Tuesday; Tue
u   Day number of week (1 = Monday, ..., 7 = Sunday)    Number  1
a   Am/pm marker    Text    PM
H   Hour in day (0-23)  Number  0
k   Hour in day (1-24)  Number  24
K   Hour in am/pm (0-11)    Number  0
h   Hour in am/pm (1-12)    Number  12
m   Minute in hour  Number  30
s   Second in minute    Number  55
S   Millisecond Number  978
z   Time zone   General time zone   Pacific Standard Time; PST; GMT-08:00
Z   Time zone   RFC 822 time zone   -0800
X   Time zone   ISO 8601 time zone  -08; -0800; -08:00 
```

# c# - 使用线程将多个表数据导出到 c#.net 中的 csv

> ID：14137898
> 
> 赞同：1
> 
> 时间：2013-01-03T11:19:25.110
> 
> 标签：c#, export-to-csv

我想将多个表记录导出到 c#.net 中的单个 CSV 文件。

说

一个包含 10 个表的列表框。如果我单击表 1，则该表开始导出到 csv。同时，我将单击列表框中的另一个表，例如表 2，然后应该为该表 2 开始导出到 csv。有点多线程。下面是我用来导出到 csv 的代码，但它仅适用于一张表

```
public void exportToCSVfile(string fileOut)
        {
            // Connects to the database, and makes the select command.

            OracleConnection conn = new OracleConnection("Data Source=" + DataSource + ";User Id=" + UserId + ";Password=" + Password);
            string sqlQuery = "SELECT * FROM " + this.lbxTables.SelectedItem.ToString().ToUpper().Trim();
            OracleCommand command = new OracleCommand(sqlQuery, conn);
            conn.Open();

            // Creates a SqlDataReader instance to read data from the table.
            using (OracleDataReader dr = command.ExecuteReader())
            {
                // Retrives the schema of the table.
                DataTable dtSchema = dr.GetSchemaTable();

                // Creates the CSV file as a stream, using the given encoding.
                using (StreamWriter sw = new StreamWriter(fileOut, false, this.encodingCSV))
                {

                string strRow; // represents a full row

                // Writes the column headers if the user previously asked that.
                if (this.chkFirstRowColumnNames.Checked)
                {
                    sw.WriteLine(columnNames(dtSchema, this.separator));
                }

                // Reads the rows one by one from the SqlDataReader
                // transfers them to a string with the given separator character and
                // writes it to the file.
                MessageBox.Show("Export to CSV has started for the Table: " + this.lbxTables.SelectedItem.ToString().ToUpper().Trim());
                while (dr.Read())
                    {
                        strRow = "";
                        for (int i = 0; i < dr.FieldCount; i++)
                        {
                            strRow += Convert.ToString(dr.GetValue(i)) + separator;
                        }
                        if (separator.Length > 0)
                            strRow = strRow.Substring(0, strRow.LastIndexOf(separator));

                        sw.WriteLine(strRow);
                    }
                }
                dr.Close();
                dr.Dispose();
            }

            // Closes the text stream and the database connenction.

            conn.Close();

            //// Notifies the user.
            MessageBox.Show("Export to CSV has completed for the Table: " + this.lbxTables.SelectedItem.ToString());
        } 
```

请帮助我如何使用线程处理多个表数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:05:57.273

[在这里](http://msdn.microsoft.com/en-us/library/aa645740%28v=vs.71%29.aspx#vcwlkthreadingtutorialexample1creating)，您将找到 c# 中的线程教程。基本上你需要使用你的导出方法作为线程方法。为您将创建的所有线程保留处理程序是很好的。

更具体地说......步骤1）为出口商创建类

```
public class CSVExport
{
    // This method that will be called when the thread is started
    public void exportToCSVfile(object fileOut)
    {
        ...
    }
}; 
```

响应用户选择要导出的表，您运行以下

```
CSVExport obj = new CSVExport();
Thread t = new Thread (CSVExport.exportToCSVfile);
t.Start(oFileName); 
```

您必须确保文件名是唯一的，正如我之前所说，最好将所有线程处理程序保存在一个列表中。

# visual-studio-2008 - 将列添加到数据库并反映在 DBML 文件中 Invalid Column name 错误

> ID：14137900
> 
> 赞同：0
> 
> 时间：2013-01-03T11:19:28.197
> 
> 标签：visual-studio-2008, linq-to-sql, linq-to-objects

我有一个巨大的 .dbml 文件。

我需要在 Contact 表中添加一列以存储日期时间，然后将其用于确定是否应显示联系人。

我使用 sql 脚本将该列添加到表中。在代码中，我有一个方法可以通过以下方式获取所有联系。

```
<pre>
    var results = from b in _db.Contacts
                  select b;
</pre> 
```

我在 VS2008 中与正在使用的服务器和数据库建立了新的服务器连接。我从 .dbml 文件中删除了“联系人”表，我将联系人表从服务器连接拖到设计器表面，该表面重新创建了现在包含新列的实体。

一切都建立了，但在调试新代码时我收到错误“无效的列名”

```
<pre>
     var results = from b in _db.Contacts
                   where b.NoticeExpiryDate <= DateTime.Now
                   select b;
</pre> 
```

请任何人都可以帮我解决这个问题。我也尝试了以下链接中的工具，但没有结果。 [http://www.huagati.com/dbmltools/](http://www.huagati.com/dbmltools/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:41:27.017

当你有一个大的解决方案时，一定要检查所有可能的配置文件。请务必在您正在处理的数据库上运行 SQL 分析器，以确认您正在从正确的数据库进行调试。

更新连接字符串以指向正确的服务器和数据库。

# objective-c - 如何从 iOS 的块中显示 UIAlertView？

> ID：14137902
> 
> 赞同：2
> 
> 时间：2013-01-03T11:19:38.283
> 
> 标签：objective-c, ios, ios6, twitter, objective-c-blocks

从块中显示 UIAlertView 的最佳方式是什么？

我的代码中有以下操作：

```
- (IBAction)connectWithTwitterClicked:(id)sender {
    ACAccountStore * account = [[ACAccountStore alloc]init];
    ACAccountType * accountType = [account accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

    [account requestAccessToAccountsWithType:accountType options:nil completion:^(BOOL granted, NSError *error) {
        if (granted == YES){
            NSLog(@"Twitter account has been granted");
            NSArray * arrayOfAccounts = [account accountsWithAccountType:accountType];
            if([arrayOfAccounts count] > 0){
                ACAccount * twitterAccount = [arrayOfAccounts lastObject];
                NSLog(@"Found twitter Id of [%@]", twitterAccount.username);
                // continue on to use the twitter Id
            } else {
                // no twitter accounts found, display alert to notify user
            }
        } else{
            NSLog(@"No twitter accounts have been granted");
            // no twitter accounts found, display alert to notify user
        }
    }];
} 
```

到目前为止，我已经尝试过这些解决方案：

1.  在 2 条注释行中的任何一条上，直接创建并显示 UIAlertView，这会使应用程序崩溃，我相信这是由于块是异步进程并且无法访问 UI 线程来显示警报
2.  在块外创建一个 NSMutableString ，用 标记它 `__block`，将其设置在注释行上，然后在之后显示。这里的类似问题是块异步运行，因此在显示警报时不能保证 NSMutableString 已设置。

任何人都可以提出解决方案吗？我希望能够以某种方式通知用户，以便他们不能使用 twitter，或者在设备设置中设置一个帐户。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T19:37:59.007

这是执行此操作的 GCD 方法：

```
[SomeClass dispatchNastyAsyncBlock:^{
    // ... do stuff, then
    dispatch_async(dispatch_get_main_queue(), ^ {
        [[[[UIAlertView alloc] initWithTitle:t
                                     message:nil
                                    delegate:nil
                           cancelButtonTitle:@"OK"
                           otherButtonTitles:nil
        ] autorelease] show];
    });
}]; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-03T11:23:59.637

创建一个显示警报视图的方法，然后在主线程上执行其选择器：

```
- (void)showAlertWithTitle:(NSString *)t
{
    [[[[UIAlertView alloc] initWithTitle:t
                                 message:nil
                                delegate:nil
                       cancelButtonTitle:@"OK"
                       otherButtonTitles:nil
    ] autorelease] show];
} 
```

如下调用它：

```
[SomeClass dispatchNastyAsyncBlock:^{
    // ... do stuff, then
    [self performSelectorOnMainThread:@selector(showAlertWithTitle:)
                           withObject:@"Here comes the title"
                        waitUntilDone:YES];
}]; 
```

# ios - 使用 Cordova 2.2.0 将 AdMob 实施到 IOS

> ID：14137908
> 
> 赞同：0
> 
> 时间：2013-01-03T11:20:07.403
> 
> 标签：ios, cordova, admob

我是使用 Cordova 的 IOS 应用程序的新手，我正在尝试使用 Cordova 2.2.0 和 Xcode 4.5.2 将 AdMob 实施到 IOS 应用程序

我已经按照 AdMob 的文档进行操作，但出现 14 错误，然后我发现这个[链接](http://therockncoder.blogspot.com/2012/05/cordova-phonegap-and-admob-together-ios.html) 我遵循了所有提到的步骤，现在我遇到了一个问题：

```
duplicate symbol _OBJC_METACLASS_$_GAIDispatcher in:
    /Path to Project/Test/Add-ons/GoogleAnalyticsiOS_2.0beta3/Library/libGoogleAnalytics.a(GAIDispatcher.o)
    /Path to Project/Test/Add-ons/GoogleAnalyticsiOS_2.0beta3/Library/libGoogleAnalytics_debug.a(GAIDispatcher.o)
ld: 214 duplicate symbols for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

`

这个错误是什么意思？有什么建议可以解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:48:51.780

使用最新版本的 AdMob，您只需要`-ObjC`链接器标志，您应该删除`-all_load`链接器标志。

还要确保从“ `Add-ons`”目录中删除您不使用的任何内容。具体来说，您似乎还包括可以删除的 Analytics 库（除非您使用的是在这种情况下，您可能不需要同时包含非调试版本和调试版本）

# javascript - 从PhoneGap调用JS函数

> ID：14137915
> 
> 赞同：1
> 
> 时间：2013-01-03T11:20:21.307
> 
> 标签：javascript, android, html, cordova

我看到您可以在以下链接上从 JS 调用 PhoneGap 的功能：

[Android Java和Phonegap Javascript之间的通信？](https://stackoverflow.com/questions/2727763/communication-between-android-java-and-phonegap-javascript)

我的问题是，如果你能以**相反**的方式？

从PhoneGap调用JS函数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:30:44.820

如果我是你，我会阅读这篇关于如何在 Android 上实现 JavaScript 接口的[教程](http://ganeshtiwaridotcomdotnp.blogspot.se/2011/09/android-javascriptinterface-tutorial.html)，之后你应该能够以任何一种方式调用 JavaScript 函数。

例如从您的代码中：`webViewName.loadUrl("javascript:somemethod()");`

我相信你可以在 PhoneGap 中实现这种行为。告诉我我是否错了！

这就是我的想法。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:01:38.027

在 android 中，DroidGap 类（它是 phonegap 应用程序活动的基类）提供方法“sendJavascript()”来执行 javascript。此方法可用于扩展 DroidGap 类的活动，如下所示 -

```
 public class MainActivity extends DroidGap {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        MainActivity.this.sendJavascript("var myInt=10;");
        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

# ios - 没有全屏的MKMapView

> ID：14137917
> 
> 赞同：0
> 
> 时间：2013-01-03T11:20:30.020
> 
> 标签：ios, uiviewcontroller, mkmapview

我想创建一个 275x380 大小的弹出式风格地图。我在界面生成器中创建了视图，视图和地图视图具有相同的大小，275x380。虽然，当我在 viewWillAppear 中记录视图的框架时，我得到了 320x460。有什么建议我应该如何解决这个问题？

# java - 在 swing 中创建运行时 jtable

> ID：14137920
> 
> 赞同：-2
> 
> 时间：2013-01-03T11:20:42.213
> 
> 标签：java, swing, jdbc, jtable, awt

我想创建 JTable 运行时。它应该绑定数据库表中的数据。例如，我想显示 empmaster 表中所有员工的列表，并且应该根据表 empmaster 中的行和列动态生成行和列。使用以下代码创建静态表。

```
 try
{

 Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
  Connection con=DriverManager.getConnection("jdbc:odbc:dsn");
  Statement st=con.createStatement();
  ResultSet rs=st.executeQuery("select * from empmaster");
  ResultSet rs1=st.executeQuery("select * from empmaster");
  String title[]={"empcode","empname"};
   int c=0;
   while(rs.next())
   { 
   c++;

   }
   Object obj[][]= new Object[c][2];
   JTable table= new JTable(obj,title);
   JScrollPane jsp= new JScrollPane(table);
   add(jsp);
   int i=0;
   while(rs1.next())
    {
     table.setValueAt(rs.getString("empcode"),i,0); 
     table.setValueAt(rs.getString("empname"),i,1); 

     }
    }
     catch(Exception ex 
    {

     ex.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:29:06.200

使用[它](http://technojeeves.com/joomla/index.php/free/59-resultset-to-tablemodel)来创建`TableModel`模型并将其设置为现有的`JTable`.

# jquery - 如何让 jquery 为循环中的所有项目工作

> ID：14137923
> 
> 赞同：0
> 
> 时间：2013-01-03T11:20:51.063
> 
> 标签：jquery, jquery-ui, jquery-plugins, wordpress

我在 wordpress 中使用以下代码，并且还使用了灯箱表单插件。

```
<?php query_posts('showposts=9&post_type=packages') ?>
  <?php while (have_posts()) :the_post(); ?>
    <?php echo the_post_thumbnail(); ?>
     ...
      ...
    <span class="package-book">
    <div id="text"><?php the_title(); ?></div>
     <script type="text/javascript">

     var $ = jQuery.noConflict();

     $(document).ready(function() {
        $(".package-book a").click(function() {
            var $temp = $('#text').html();
            $('#book-title').val($temp);
        });
     });

     </script> 

       <?php echo do_shortcode("[formlightbox text='Book Now' title= 'welcome'][contact-form-7 id='383' title='Booking Form'][/formlightbox]"); ?>
         or consider this <a title="welcome" class="fl_box-1" href="#">Book Now</a>
      </span>  
       <?php endwhile; ?>
       <input type="text" size="40" class="wpcf7-form-control wpcf7-text" id="book-title" value="" name="PackageTitle"> 
```

`I am using contact us 7 plugin`并创建了一个嵌入到灯箱表单中的表单预订表单。

其实`when book now anchor tag is clicked`现在的书`form gets popped up on the screen.`

`I want that input type text with id book-title`应该`filled with current package title<?php the_title(); ?>.`

`The above jquery works for first package only.`请帮助我，以便它适用于所有软件包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:59:58.253

您可以尝试做一些事情来使其正常工作。

1.  确保您的脚本被拉入页面，一种检查方法是使用 Chrome 调试器中的“源”选项卡并在 html 头部分中搜索其他文件

2.  确保在包含 jQuery 之后包含了 datatale 脚本，因为它肯定依赖于它。

3.  检查是否正确包含 jQuery，并且只包含一次。

4.  注意 jQuery 冲突。还有一些其他库覆盖了 $，因此您的代码无法正常工作，因为 $ 不再是 jQuery 的别名。您可以使用它`jQuery.noConflict()`来避免与页面上使用相同变量 $ 的其他库发生冲突。

5.  检查是否附加了所有必需的类和 ids 区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:24:45.647

You are missing the `$` here:

```
jq(".package-book a").click(function(){ 
```

instead write this:

```
$(".package-book a").click(function(){ 
```

# c++ - 从基类到派生类的静态转换

> ID：14137924
> 
> 赞同：1
> 
> 时间：2013-01-03T11:20:56.290
> 
> 标签：c++, templates, inheritance, crtp, static-cast

我有一些不清楚的地方希望引起您的注意，请检查这些代码片段：

```
template< typename DerivedClass >
class construction_management
{
    city* this_city;
public:
    construction_management()
    {
        this_city = static_cast< city* >(this);
    }
    ~construction_management();
}; 
```

我故意删除了所有不必要的代码，请查看将“this”指针静态转换为“city”类型的构造函数，其定义如下：

```
class city : public construction_management< city >
{

public:

public:
    city( const string& name, const string& owner );
}; 
```

该课程是故意为空的，因为我认为它可以包含的内容与此处无关。希望我无法 100% 理解这里发生的事情，g++ 4.7.2 在编译阶段不会打印警告或错误，每当我使用“this_city”指针时，我都可以访问城市的所有公共成员，对象本身看起来是一致的，因为所有变量都已正确初始化并始终包含有效数据。

我想知道的是，如果我将 construction_management 定义为普通的非模板类，为什么这段代码不起作用？由于临时从 const 到指向 city 的非 const 指针的转换，强制转换失败，为什么？

这是错误打印：

```
game.hpp: In constructor 'city_manager::construction_management::construction_management()':
game.hpp:164:41: error: invalid static_cast from type 'city_manager::construction_management* const' to type 'city_manager::city*' 
```

如果 construction_management 是一个模板，为什么还要工作？这是一种 CRTP 吗？

谢谢你们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:42:37.620

它是 CRTP 并且由于惰性模板实例化而起作用。

该行：

```
this_city = static_cast< city* >(this); 
```

需要`this`可转换为`city*`. 如果`city`派生自 ，那确实有效`construction_management`。但是，基类必须在派生类之前有完整的声明，所以只有一种写法：

```
//template code may or may not be present
class construction_management {...};
//maybe more code here
class city: public construction_management {...}; 
```

如果基类不是模板，它会在编译器第一次看到代码时被实例化。然后编译器运行到构造函数中，此时它不知道`city`派生自`construction_management`（或者甚至 a`city`是什么，如果它没有被声明为不完整的类型），并放弃。

但是，如果基类是模板，它会在声明继承时被实例化（无论如何，我不是这方面的专家）。那时，编译器知道它`city`是从 派生的`construction_management<city>`，并且一切正常。

出于同样的原因，如果您将构造函数定义移动到稍后编译的文件（很可能从 .h 到 .cpp），它也可以在没有模板的情况下工作。

# sql - 存储过程参数默认值 - 这是常量还是变量

> ID：14137925
> 
> 赞同：33
> 
> 时间：2013-01-03T11:21:04.093
> 
> 标签：sql, stored-procedures, sql-server-2008-r2

这是我的代码：

```
USE [xxx]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[problemParam] 
    @StartDate INT = CONVERT(INT,(CONVERT(CHAR(8),GETDATE()-130,112))),
    @EndDate INT = NULL
AS  
BEGIN 
```

`SSMS`对我使用的*默认*值不太满意- 在[**MSDN DEFINITION HERE**](http://msdn.microsoft.com/en-us/library/ms187926.aspx)中，它说默认值需要是常量而不是变量。

是`CONVERT(INT,(CONVERT(CHAR(8),GETDATE()-130,112)))`变量还是常数？它不是我认为的变量的传统方式的变量，但它又不是一个常数`'03 jan 2013'`。

我该如何解决这个问题？移动`CONVERT(INT,(CONVERT(CHAR(8),GETDATE()-130,112)))`到调用存储过程的客户端？

* * *

**编辑**

可能重复，因为我刚刚发现了这个[SO POST](https://stackoverflow.com/questions/11885960/stored-procedure-parameter-default-value)

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-03T13:29:50.513

它必须是一个*常数*——该值必须在创建过程时是可计算的，并且一个计算必须提供将始终使用的值。

看看 的定义[`sys.all_parameters`](http://msdn.microsoft.com/en-us/library/ms190340.aspx)：

> `default_value` `sql_variant` 如果**`has_default_value`**为 1，则该列的值为参数的默认值；否则，`NULL`。

也就是说，无论参数的默认值是什么，它都必须适合该列。

* * *

正如 Alex K 在评论中指出的那样，您可以这样做：

```
CREATE PROCEDURE [dbo].[problemParam] 
    @StartDate INT = NULL,
    @EndDate INT = NULL
AS  
BEGIN
   SET @StartDate = COALESCE(@StartDate,CONVERT(INT,(CONVERT(CHAR(8),GETDATE()-130,112)))) 
```

前提是`NULL`它不是 . 的有效值`@StartDate`。

* * *

至于您在评论中链接到的博客文章 - 这是在谈论一个非常具体的上下文 -在*单个*查询的上下文中评估的*结果*通常被认为是恒定的。我不知道有多少人（与博客作者不同）会认为 UDF 中的单独表达式与*调用*UDF 的查询属于同一查询的一部分。`GETDATE()`

# windows-phone-7 - 在 Windows Phone 应用程序中将图像从 xml 绑定到列表框

> ID：14137926
> 
> 赞同：0
> 
> 时间：2013-01-03T11:21:04.527
> 
> 标签：windows-phone-7, linq-to-xml

我的 xml 文件看起来像这样

```
<people><person> <firstname>venakt</firstname> <lastname>es</lastname> <age>27</age> <Image>http://www.livetut.com/wp-content/uploads/2012/06/Logo1.png</Image> </person></people> 
```

我的 XAML 文件看起来像

```
<ListBox.ItemTemplate>
 <DataTemplate>
  <StackPanel>
    <Image Source="{Binding ImageSource}" Height="120" Width="120" HorizontalAlignment="Center" VerticalAlignment="Center" Tap="textBlock1_tap" />
    <TextBlock Text="{Binding UserName}" Style="{StaticResource PhoneTextSubtleStyle}" Width="100" TextAlignment="Center"/>
  </StackPanel>
 </DataTemplate>
</ListBox.ItemTemplate> 
```

在我的 xaml.cs 文件中，我添加了

```
public string Image { get { return Image; } set { Image = value; } }

XDocument loadedData = XDocument.Load("People.xml");
    var data = from query in loadedData.Descendants("person")
                  select new Person
                  {
                      FirstName = (string)query.Element("firstname"),
                      LastName = (string)query.Element("lastname"),
                      Image= query.Element("Image").Attribute("url").Value

                  };
    listBox.ItemsSource = data; 
```

你能帮我如何绑定图像吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:15:26.320

只需将名称 ImageSource 更改为 Image （Image 是您的 Person 类的属性名称.. 所以）

```
<ListBox.ItemTemplate>
 <DataTemplate>
  <StackPanel>
    <Image Source="{Binding Image}" Height="120" Width="120" HorizontalAlignment="Center" VerticalAlignment="Center" Tap="textBlock1_tap" />
    <TextBlock Text="{Binding UserName}" Style="{StaticResource PhoneTextSubtleStyle}" Width="100" TextAlignment="Center"/>
  </StackPanel>
 </DataTemplate>
</ListBox.ItemTemplate> 
```

# html - 为什么我的 CSS 在 Internet Explorer 中不起作用

> ID：14137928
> 
> 赞同：1
> 
> 时间：2013-01-03T11:21:10.377
> 
> 标签：html, css, internet-explorer-7

所以我正在使用codeigniter框架构建一个网页，我有一个简单的页面，我在其中使用了一些css。除了 IE 7（可能还有其他版本的 IE，我还没有检查），我在所有浏览器中都不能正常工作。

问题是我正在尝试显示选项卡并使其看起来像是在单击时被选中的。

我的CSS是：

```
 .nav {
  margin-bottom: 20px;
  list-style: none;
}

.nav > li > a {
  display: block;
}

.nav > li > a:hover {
  text-decoration: none;
  background-color: #eeeeee;
}

.nav-tabs:before,
.nav-tabs:after{
  display: table;
  line-height: 0;
  content: "";
}

.nav-tabs:after {
  clear: both;
}

.nav-tabs > li{
  float: left;
  display: inline;
}

.nav-tabs > li > a{
  padding-right: 12px;
  padding-left: 12px;
  margin-right: 0px;
  line-height: 14px;
}

.nav-tabs {
  border-bottom: 1px solid #ddd;
}

.nav-tabs > li {
  margin-bottom: -1px;
}

.nav-tabs > li > a {
  padding-top: 8px;
  padding-bottom: 8px;
  line-height: 20px;
  border: 1px solid transparent;
  -webkit-border-radius: 4px 4px 0 0;
     -moz-border-radius: 4px 4px 0 0;
          border-radius: 4px 4px 0 0;
}

.nav-tabs > li > a:hover {
  border-color: #eeeeee #eeeeee #dddddd;
}

.nav-tabs > .active > a,
.nav-tabs > .active > a:hover {
  color: #555555;
  cursor: default;
  background-color: #ffffff;
  border: 1px solid #ddd;
  border-bottom-color: transparent;
}

li.selected{
  color: #555555;
  cursor: default;
  background-color: #ffffff;
  border: 1px solid #ddd;
  border-bottom-color: transparent;
  display:inline;
} 
```

我的 ie 中存在相当多的问题，当我选择一个项目时，列表没有内联显示，但是根本不起作用。这是我的文件：

```
 <script type="text/javascript">
$(function() {
    $("#content_of_tab").load('<?php echo site_url('console/show_tab2'); ?>');
    document.getElementById("tab2").setAttribute("class", "selected");
});

function change_tab(a){
    //document.getElementById("tab1").setAttribute("class", "unselected");
    document.getElementById("tab2").setAttribute("class", "unselected");
    document.getElementById("tab3").setAttribute("class", "unselected");
    document.getElementById("tab4").setAttribute("class", "unselected");
    document.getElementById("tab5").setAttribute("class", "unselected");
    document.getElementById("tab6").setAttribute("class", "unselected");
    if(a==1){
        $("#content_of_tab").load('<?php echo site_url('console/show_tab1'); ?>');
        document.getElementById("tab1").setAttribute("class", "selected");
    }
    else if(a==2){
        $("#content_of_tab").load('<?php echo site_url('console/show_tab2'); ?>');
        document.getElementById("tab2").setAttribute("class", "selected");
    }
    else if(a==3){
        $("#content_of_tab").load('<?php echo site_url('console/show_tab3'); ?>');
        document.getElementById("tab3").setAttribute("class", "selected");
    }
    else if(a==4){
        $("#content_of_tab").load('<?php echo site_url('console/show_tab4'); ?>');
        document.getElementById("tab4").setAttribute("class", "selected");
    }
    else if(a==5){
        $("#content_of_tab").load('<?php echo site_url('console/show_tab5'); ?>');
        document.getElementById("tab5").setAttribute("class", "selected");
    }
    else if(a==6){
        $("#content_of_tab").load('<?php echo site_url('console/show_tab6'); ?>');
        document.getElementById("tab6").setAttribute("class", "selected");
    }
}
</script>

<div id="tabs" style="width: 976px;">
    <ul class="nav nav-tabs" >
    <!--    <li id="tab1" onclick="change_tab(1);"><a href="#">Pregled polic</a></li>  -->
        <li id="tab2" onclick="change_tab(2);"><a href="#">Prenos na drug EZŠO</a></li>
        <li id="tab3" onclick="change_tab(3);"><a href="#">Sprožitev osvežitve</a></li>
        <li id="tab4" onclick="change_tab(4);"><a href="#">Nadomeščenke</a></li>    
        <li id="tab5" onclick="change_tab(5);"><a href="#">Spremembe statusov</a></li>
        <li id="tab6" onclick="change_tab(6);"><a href="#">Sprememba zastopnika</a></li>

    </ul>
    </br>
    <div id="content_of_tab" style="margin-left:auto; margin-right:auto;">
    </div>

</div> 
```

这只是一个文件，其中存在页眉和页脚视图之前的问题。在标题中，我将 doctype 设置为：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> 
```

我在其他文件上有很多 css 并且正在工作，所以肯定有问题。

我喜欢所有的想法！

编辑：差异打印屏幕

[http://shrani.si/f/1T/zp/1oru9l8h/diffrence.png](http://shrani.si/f/1T/zp/1oru9l8h/diffrence.png)

左边是 Firefox 中的列表，右边是 ie 中的列表。

我刚刚安装了 IE9，它的钢不工作，外观与 IE7 中的相同......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:02:46.643

`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">` triggers Quirks Modes in browsers. This makes them inconsistent with the standards and each other as they emulate bugs in older browsers.

The correct Doctype to use for HTML 4.01 Transitional is:

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd"> 
```

Once you have this in place, make sure that your HTML and CSS are both [valid](http://validator.w3.org).

> `document.getElementById("tab4").setAttribute("class", "selected");`

`setAttribute` is broken in older versions of Internet Explorer. Avoid it. Since you are already using jQuery I recommend using its `addClass` method instead. Alternatively set the `className` property directly.

# postgresql - 更新后使用触发器更新表

> ID：14137932
> 
> 赞同：3
> 
> 时间：2013-01-03T11:21:25.787
> 
> 标签：postgresql, triggers, sql-update, plpgsql, postgresql-9.1

我有两张桌子

```
 batch (batch_id,start_date,end_date,batch_strength,is_locked)
 sem (user_id,is_active,no_of_days) 
```

我已经执行了下面给出的触发过程，然后使用查询更新表

```
CREATE OR REPLACE FUNCTION em_batch_update()
  RETURNS trigger AS $em_sem_batch$
BEGIN

UPDATE batch set is_locked='TRUE'
where (start_date
       + (select no_of_days from sem
          WHERE is_active='TRUE' and user_id='OSEM')
      ) <= current_date;

return NEW;

END;
$em_sem_batch$  LANGUAGE plpgsql;

CREATE TRIGGER em_sem_batch
BEFORE UPDATE ON batch FOR EACH ROW EXECUTE PROCEDURE em_batch_update();

update em_batch set batch_strength=20 where batch_id='OD001C001B3'; 
```

发生了错误：

> 错误：超出堆栈深度限制
> 提示：在确保平台的堆栈深度限制足够之后，增加配置参数“max_stack_depth”（当前为 2048kB）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T08:55:27.707

有几种方法可以**防止**您在触发器中构建的无限递归，最优雅和最高效的可能是在触发器函数`WHERE`的语句中添加子句：`UPDATE`

```
CREATE OR REPLACE FUNCTION em_batch_update()
  RETURNS trigger AS
$func$
BEGIN

UPDATE batch b
SET    is_locked = TRUE
FROM   sem s
WHERE  s.is_active
AND    s.user_id = 'OSEM'
AND    b.start_date <= (current_date - s.no_of_days)
AND    b.is_locked IS DISTINCT FROM TRUE; -- prevent infinite recursion!

RETURN NULL;

END
$func$  LANGUAGE plpgsql;

CREATE TRIGGER em_sem_batch
BEFORE UPDATE ON batch
FOR EACH STATEMENT
EXECUTE PROCEDURE em_batch_update(); 
```

我改变了一些其他的事情来走向理智：

*   由于触发器函数对每一行都执行相同的操作，因此我将其更改为可能*更*便宜[的语句级触发器](http://www.postgresql.org/docs/current/interactive/sql-createtrigger.html)。

*   因此，我制作了触发功能`RETURN NULL`，因为[我在这里引用了手册](http://www.postgresql.org/docs/current/interactive/trigger-definition.html)：

> 每个语句触发器调用的触发器函数应始终返回 NULL。

*   `batch.is_locked``sem.is_active`看起来像布尔列。为它们使用适当的[`boolean`数据类型](http://www.postgresql.org/docs/current/interactive/datatype-boolean.html)。我的代码是建立在它之上的。

*   我还完全重写了您的`UPDATE`查询。特别是条件 on`batch.start_date`以便可以使用索引（如果可用）。

*   如果`batch.is_locked`定义`NOT NULL`，则`WHERE`条件可以简化为：

    ```
     AND    b.is_locked = FALSE; 
    ```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-03T13:30:03.930

您的触发器在同一张表上`UPDATE`运行另一个触发器，这将再次触发触发器，因此您将获得无限递归。`UPDATE`您可能需要稍微重新设计它，但是如果不解释您正在尝试做什么，很难说如何。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-12T10:33:56.787

在这种情况下无限递归，因为更新触发器将对表进行更新操作，`batch`并且在触发器本身内部执行更新语句后也会触发相同的操作`em_sem_batch`。为了防止这种情况在表中添加一列，并且在触发器的更新语句中将该列更新为某个值和添加一个 if 条件来检查该列是否具有该常量值，如果是，则避免执行更新语句，否则执行更新语句。请参见下面的示例：

```
CREATE FUNCTION public.trigger_fuction()
    RETURNS trigger
    LANGUAGE 'plpgsql'
    NOT LEAKPROOF
AS $BODY$
BEGIN
  IF NEW.data_replicated=true THEN
    UPDATE sample SET data_replicated=false WHERE id=NEW.id;
    raise notice 'changed data replicated of sample with id as %',NEW.ID;
  END IF;
  RETURN NEW;
END;
$BODY$;

CREATE TRIGGER data_replication_trigger
  AFTER UPDATE
  ON sample
  FOR EACH ROW
  EXECUTE PROCEDURE trigger_fuction(); 
```

在此示例中，示例表具有 data_replicated 布尔字段，该字段将在执行触发器时更新。

# r - 使用选项卡将数据写入文件

> ID：14137936
> 
> 赞同：3
> 
> 时间：2013-01-03T11:21:41.153
> 
> 标签：r, paste

我的文件中的信息由制表符分隔。我想将计算值附加到每个特定文件，并尝试使用“粘贴”命令获得相同的格式，但它分隔了一行而不是一个制表符。该文件看起来像（[tab] 代表一个选项卡）：

```
text[tab]=[tab]value
text[tab]=[tab]value 
```

使用粘贴无法创建带有制表符的单行，因为它会打印 \t：

```
conv <- paste("conversion", "=", (y[,2]/90.6),sep="\t") 
```

但是，如果我稍后尝试使用以下方法添加标签：

```
conv <- paste("conversion", "=", (y[,2]/90.6),sep=",")
write(conv, file = "data.dat", append = TRUE, sep = "\t") 
```

“conv”出现在不同的行中：

```
text[tab]=[tab]value
text[tab]=[tab]value
conversion
=
11.7991169977925 
```

而不是在标签中（我想要的）：

```
text[tab]=[tab]value
text[tab]=[tab]value
conversion[tab]=[tab]11.80 
```

我确信必须有一个非常简单的解决方案，但我根本找不到。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T12:27:34.887

我认为这使用 Arun 的建议实现了您想要的。虽然，我同意 Carl Witthoft 的评论。

```
y1 <- c(10, 20)
y2 = c(100,200)
y <- data.frame(y1,y2)
colnames(y) <- c('y1','y2')

y3 <- (y[,2]/90.6)

df <- data.frame('conversion', '=', y3)
colnames(df) <- c('t1', 't1', 'y3')
df

write.table(df, file = "c:/users/Mark W Miller/simple R Programs/my.data.txt", 
            append = TRUE, sep = "\t", row.names=FALSE, col.names=FALSE, quote=FALSE) 
```

输出文件是：

```
conversion  =   1.1037527593819
conversion  =   2.2075055187638 
```

# php - 域指针问题

> ID：14137940
> 
> 赞同：0
> 
> 时间：2013-01-03T11:22:02.750
> 
> 标签：php, pointers, dns

我有一个指向第二个域（例如[www.example.es ）的域指针（例如 www.example.com](http://www.example.es) [）](http://www.example.com)，我想知道我来自哪个域。有可能用PHP做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:24:27.700

Try this `$_SERVER["HTTP_REFERER"];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:28:27.987

假设“域指针”是指从一个域名指向另一个域名的 DNS CNAME 记录，那么要知道这两个域名中的哪一个实际用于访问该站点，请查看：

```
$server = $_SERVER["SERVER_NAME"]; 
```

# c# - 如何创建将字典写入 csv 文件的通用方法？

> ID：14137944
> 
> 赞同：1
> 
> 时间：2013-01-03T11:22:25.917
> 
> 标签：c#, function

我想编写一个函数来接收具有任意键和值类型的字典，并将它们写入 csv 文件。例如，如果我有以下课程：

```
public class VerificationResult
{
    public enum resInfo
    {
        sessionID,
        testFilePath,
        testFileName,
        ID1,
        ID2,
        score1,
        score2,
        isGood,
        isTrue
    };

    public string[] resData = 
        new string[Enum.GetNames(typeof (resInfo)).Length];

    public VerificationResult(int sessionID,
                              string testFilePath,
                              string Id1,
                              string Id2,
                              string score1,
                              string score2,
                              string isGood)
    {
        resData[(int) resInfo.sessionID] = sessionID.ToString();
        resData[(int) resInfo.testFilePath] = testFilePath;
        resData[(int) resInfo.testFileName] =
            Path.GetFileNameWithoutExtension(testFilePath);
        resData[(int) resInfo.ID1] = Id1;
        resData[(int) resInfo.ID2] = Id2;
        resData[(int) resInfo.score1] = Score1;
        resData[(int) resInfo.score2] = Score2;
        resData[(int) resInfo.isGood] = isGood;
        resData[(int) resInfo.isTrue] = (Id1 == IsGood).ToString();
    }
}; 
```

和定义为的字典：

```
private Dictionary<int,VerificationResult> verificationResults 
```

我想创建一个通用函数，该函数能够将此字典打印到 csv 文件，其中包含值成员的标题（在本例中为 VerificationResult 类的成员。

我决定将数组或值类型成员的枚举作为参数发送。问题是我不需要知道保存我需要的数据数组的值类成员的名称是什么，或者（如果我决定以不同的方式实现它）如何遍历未知的值类成员并将它们打印到文件中。有没有办法在不使用类似 eval 的函数的情况下做到这一点？我努力了吗？我是否应该在每次需要时只编写一个特定的函数并保持这样的状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:23:39.140

您可以使用委托来指定键和值的字符串表示应该是什么样子。在我的示例中，我将该方法创建为 IDictionary的[扩展方法。](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)

```
public static class DictionaryExtension {
    public static void WriteToCsv<K, V>(
        this IDictionary<K, V> dictionary,
        string path,
        Func<K, string> keyToString,
        Func<V, string> valueToString,
        string separator) {

        StringBuilder content = new StringBuilder();
        foreach (KeyValuePair<K, V> keyValuePair in dictionary)
            content.AppendLine(string.Join(separator, new List<string> {
                keyToString(keyValuePair.Key),
                valueToString(keyValuePair.Value)
            }));

        File.WriteAllText(path, content.ToString());
    }
} 
```

现在假设您有一个具有任意内部结构的复杂类型，例如`VerificationResult`：

```
public class ComplexType {
    public int Number { get; set; }
    public string Name { get; set; }
} 
```

和以下字典：

```
Dictionary<long, ComplexType> test = new Dictionary<long, ComplexType>();
test.Add(1, new ComplexType { Number = 1, Name = "one"});
test.Add(2, new ComplexType { Number = 1, Name = "two" });
test.Add(3, new ComplexType { Number = 1, Name = "three" });
test.Add(4, new ComplexType { Number = 1, Name = "four" }); 
```

一个简单的

```
test.WriteToCsv(@"C:\temp\dictionarytest.txt",
    key => key.ToString(),
    value => value.Name,
    ";"); 
```

写字典就够了：

```
1;one
2;two
3;three
4;four 
```

# architecture - 当订单很重要时丢失消息

> ID：14137946
> 
> 赞同：3
> 
> 时间：2013-01-03T11:22:29.723
> 
> 标签：architecture, messaging, nservicebus

我正在处理从现场设备接收消息的情况。这些消息已标记有序列号，我需要按原始顺序处理这些消息。消息很少会丢失但并非不可能，因此我需要一个 to 机制来处理它。

我的实现是基于 NServiceBus 构建的，并且我正在使用“HandleCurrentMessageLater”功能将消息弹出到队列的后面，以防消息被乱序接收。

如果我最终收到序列中的下一条消息，这样我就可以处理积压的工作，这很好用。

在这种情况下，我必须有哪些选项来处理丢失的消息？我的第一反应是实现某种老化算法，该算法会在一定次数的失败尝试或类似情况后增加序列号，但是必须这样做的复杂性有点令人难以置信。

有没有人遇到过类似的问题并愿意分享他们是如何解决的？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:28:26.560

在我看来，这是您需要业务投入的东西。是否有时间限制，在此之后可以假定该消息不可撤销地丢失？如果是这样，在这种情况下应该采取哪些商业行动？如果最终收到该消息但在超时之后会发生什么？

你可以用 Saga 来实现这些情况。如果消息到达并且不按顺序，那么您仍然会调用 HandleCurrentMessageLater，但您也会请求超时，以便如果在业务批准的超时后这些条件仍然成立，那么补偿操作可以运行，其余的可以处理备份的消息。

或者，替代解决方案可能是可能的。您说您需要按原始顺序处理消息。您不会详细介绍这对现实生活的影响，但这听起来像是高级业务需求，而不是技术需求。换句话说，这就是企业希望看到的方式，但不一定是它真正发生的方式。也许您可以正常处理有序消息，并增加一个值，该值指示收集的数据对哪个序列号有效。如果消息无序到达，它们仍然可以被软处理，但序列号不会增加。

所以基本上你会收到消息 1-5 并正常处理它们。然后您收到 7-10（已跳过 6 个）并处理它们，但 ValidSequenceNumber 仍为 5。然后当 #6 到达时，您对其进行处理，采取任何补偿措施以赶上，此时 ValidSequenceNumber 为 10。 Saga 也是实现这种逻辑的理想人选。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T08:40:41.757

在使用 NSB sagas 时，David Boike 有正确的答案。我想添加另一个选项。如果消息是在短时间内生成的，则设备可以使用 NSB 功能将多个逻辑消息批处理到一个传输消息中。只需使用需要多个消息参数的`Send`or`Publish`重载。`IBus`这些批次保证按顺序处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:48:13.360

如果您确实需要可靠地传递所有消息并且您的传输通道不可靠，那么您将需要一个确认和重传机制。这可能如下所示。

正常流量：

1.  发送消息后，客户端会临时存储消息，以便在需要时能够重新传输。
2.  成功按顺序传输后，服务器向客户端发送确认消息，包括序列号。
3.  收到 ACK 后，客户端从其临时消息存储中删除相应的消息。

丢失的消息：

1.  检测到失序条件后，服务器向客户端发送重传消息，其中包括最后成功接收到的消息的序列号。
2.  客户端重新发送最后收到的消息之后的所有消息。

这显然需要双向通信，具有从服务器到客户端的传输通道。

对于保证按序传输的 TCP 协议，这个问题已经得到了深入的解决。您可能想查看 TCP 重传内部结构。

# javascript - 覆盖console.log 仅用于调试，但它指向覆盖块，这很烦人

> ID：14137952
> 
> 赞同：0
> 
> 时间：2013-01-03T11:22:58.963
> 
> 标签：javascript, coffeescript

我正在覆盖我的 console.log 以仅在这样的调试模式下工作

```
preservedConsoleLog = console.log
console.log = () ->
  preservedConsoleLog.apply(console, arguments) if MyProject.debug 
```

这工作正常，但我仍然有一个问题。虽然 Chrome 开发工具输出控制台结果，但它只指向我上面列出的覆盖定义。

![在此处输入图像描述](../Images/c3cb60bd76ab98aa223bb6dc6440a9b3.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:29:08.733

更改它，使其仅在未启用调试时更改 console.log，如下所示：

```
if(!MyProject.debug){
  console.log=(function(){});
} 
```

这个问题应该会消失。

# php - 在 HBase Amazon EMR 上生成 PHP Thrift 文件

> ID：14137953
> 
> 赞同：1
> 
> 时间：2013-01-03T11:22:59.167
> 
> 标签：php, hbase, thrift, amazon-emr

我在一个正在运行的 HBase（亚马逊默认提供的 v 0.92）集群上安装了 Apache Thrift（我遵循了官方教程），但是当我到达需要生成所需 php 文件（）的地步时`thrift --gen php hbase.thrift`，我可以'在任何地方都找不到 hbase.thrift 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:28:16.620

[您可以从这里](http://svn.apache.org/viewvc/hbase/trunk/hbase-server/src/main/resources/org/apache/hadoop/hbase/thrift/Hbase.thrift?view=markup)下载 Hbase.thrift 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:00:05.443

hbase thrift idl (Hbase.thrift) 与 hbase 源打包在一起，位于：

> src/main/resources/org/apache/hadoop/hbase/thrift/Hbase.thrift

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-20T08:00:36.623

在 AWS EMR 上，您可以通过以下方式找到 hbase1.thrift 和 hbase2.thrift：

```
[hadoop@ip-10-232-13-248 ~]$ sudo find / -name thrift
/usr/lib/hbase/include/thrift
/usr/lib/hbase/hbase-webapps/thrift
[hadoop@ip-10-232-13-248 ~]$ cd /usr/lib/hbase/include/thrift
[hadoop@ip-10-232-13-248 thrift]$ ls
hbase1.thrift  hbase2.thrift 
```

# git - 如何在代码审查后优雅地切换回 master 而不会提前提交

> ID：14137954
> 
> 赞同：0
> 
> 时间：2013-01-03T11:23:00.803
> 
> 标签：git

我从一个用于代码审查的 refs/for/master 分支中提取出来。

我现在领先 master 2 次提交。

我如何摆脱这两个提交，恢复正常？

我试过了

```
git reset --hard
git pull origin master
git checkout master 
```

但我仍然领先于 master 两次提交。我在网上找了这个，但是这里什么都没有。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:25:00.607

```
git checkout master # just to be sure
git reset --hard origin/master 
```

是你想要的命令。它重置您的本地主 HEAD 和您的工作树以匹配主的远程副本。

# android - 向我的清单添加权限后未显示 AdMob 广告

> ID：14137961
> 
> 赞同：0
> 
> 时间：2013-01-03T11:23:32.517
> 
> 标签：android, admob

我测试应用程序是否添加应该有一个框，说将活动添加到我的清单中，并且一旦我添加，现在那里什么都没有，那个框是。这是我在我的应用程序中放入的所有代码我意识到现在有些是无用的，因为我尝试过的所有不同的东西我的应用程序都在不需要的代码中，如果你看到一些我可以删除的代码，请告诉我。

主要问题 为什么广告没有出现

JAVA

```
AdView myAdView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.game_play);  

        myAdView=(AdView)findViewById(R.id.adView);
        AdRequest adRequest = new AdRequest();
        adRequest.addTestDevice(AdRequest.TEST_EMULATOR);
        myAdView.loadAd(adRequest); 
```

主要布局

```
 xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/android_drinking"     
    tools:context=".PlayerInput" >

    <com.google.ads.AdView
            android:id="@+id/adView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            ads:adUnitId="a14ff402be4457c"
            ads:adSize="BANNER"
            ads:testDevices="TEST_EMULATOR"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            ads:loadAdOnCreate="true"/> 
```

属性 xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<declare-styleable name="com.admob.android.ads.AdView">
<attr name="backgroundColor" format="color" />
<attr name="primaryTextColor" format="color" />
<attr name="secondaryTextColor" format="color" />
<attr name="keywords" format="string" />
<attr name="refreshInterval" format="integer" />
</declare-styleable>
</resources> 
```

安卓清单

```
 <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<meta-data android:value="YOUR_ID_HERE" android:name="ADMOB_PUBLISHER_ID" />
<!-- AdMobActivity definition -->
<activity android:name="com.admob.android.ads.AdMobActivity"
android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
android:configChanges="orientation|keyboard|keyboardHidden" />
<!-- Track Market installs -->
<receiver android:name="com.admob.android.ads.analytics.InstallReceiver"
android:exported="true">
<intent-filter>
<action android:name="com.android.vending.INSTALL_REFERRER" />
</intent-filter>
</receiver>

 <activity
            android:name="com.google.ads.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" />

    </application>

    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

  </manifest> 
```

链接到我今晚正在尝试的[教程。](http://jimmod.com/blog/2012/07/jimmys-blog-adding-admobs-ads-to-android-application/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:44:04.070

我通过电子邮件将应用程序发送给自己的添加功能将其安装在我妻子的平板电脑上，他们必须将其设置为测试错误我也从应用程序中删除了 java 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:46:38.357

如果您正确地向 admob 发出请求，能否请您检查一下 LogCat？

有时唯一的问题是请求因不良 admob 库存而失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:19:30.880

这是包含所有需要信息的简单教程

[**如何在 Android 应用中添加 Google 广告（Google Admob 广告**](http://rdcworld-android.blogspot.in/2012/06/how-to-add-google-ads-in-android-apps.html)）

开发此应用程序时请牢记

1.  您需要 Google 广告发布商 ID。
2.  您需要在类路径中添加 Google AdMob Ads SDK.jar 文件
3.  您的应用目标必须是 API 13 或更高版本
4.  另外PL不要忘记添加互联网权限
5.  您需要在应用程序标签的清单文件中添加谷歌广告活动，这种方式

    ```
    <activity  
                android:name="com.google.ads.AdActivity"  
                android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" />  
        </application> 
    ```

希望对你有帮助！！

# javascript - 如何使用 jquery 隐藏加载的日期选择器

> ID：14137965
> 
> 赞同：1
> 
> 时间：2013-01-03T11:23:53.410
> 
> 标签：javascript, jquery-ui, datepicker

这是我的日期选择器：

```
<input type="text" name="offerdate" class="datecls" style="width:62px;" id="date_1" onclick="return check_group_name('date_1');"/> 
```

这是脚本：

```
function check_group_name(dateid) {
        var groupmodelGrpname = $("#groupmodelGrpname").val();
        if(groupmodelGrpname == ""){
            alert("Select Group Before Selecting Offer Date");
            $("#groupmodelGrpname").focus();
            $("#dateid").val("");
            return false;
        }
    } 
```

在我的表单中有一个下拉框。所以我需要在从日期选择器中选择值之前检查这个下拉列表。

这意味着如果我首先单击 datepicker 将检查，下拉列表有任何选定的值。如果没有，则提醒`"Select Group Before Selecting Offer Date"`.

这工作得很好，但有一些问题。

当我点击日期选择器时，警报会出现，但加载的日历不会消失。

我需要在没有警报时显示日历，这意味着如果下拉列表有价值，则只有警报才会出现。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:58:47.500

```
function check_group_name(dateid) {
    var groupmodelGrpname = $("#groupmodelGrpname").val();
    if(groupmodelGrpname == ""){
        alert("Select Group Before Selecting Offer Date");
        $("#groupmodelGrpname").focus();
        $("#dateid").val("");
        $('#dateid').datepicker("hide"); 
        return false;
    }
} 
```

# node.js - mongodb update multiple fields of the same row using json

> ID：14137966
> 
> 赞同：2
> 
> 时间：2013-01-03T11:23:54.997
> 
> 标签：node.js, mongodb, node-mongodb-native

i am using node.js mongodb native driver.

Let's say I have a mongodb collection called tasks , each task looks like

```
{date:'29th jan', desc:'xxx', status:'incomplete'} 
```

from user input I get a JSON object 'newData' of the form

```
{desc:'yyy',status:'complete'} 
```

the way I am updating my mongodb row with this newData is something like

```
db.tasks.update({_id:newData.id},{$set:{desc:newData.desc,status:newData.status}}) 
```

there are only two fields here, so using $set on each pair in newData is OK, but my question is can I update the row, without having to write $set on each pair in newData, just mentioning newData once. (obviously I will keep the pair keys in newData the same as the ones is mongodb row)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:54:52.363

因为字段名称匹配，你可以直接`newData`在你的`$set`喜欢这样使用：

```
db.tasks.update({_id:newData.id}, {$set: newData}) 
```

但是，如果您不验证`newData`包含哪些字段，这可能会将不需要的数据添加到您的任务文档中。

# google-app-engine - App Engine、Jetty、GWT(GXT) 项目，减少我磁盘上的可用空间

> ID：14137967
> 
> 赞同：0
> 
> 时间：2013-01-03T11:23:56.900
> 
> 标签：google-app-engine, jetty

我安装了：

在磁盘“D”上：WinXP SP3

在磁盘“E”上：JDK 1.7.0_10、Eclipse Indigo Service Release 2、GWT 2.4、GXT 2.2.5、App Engine 1.7.0、Glassfish-3.1.2.2-windows-ml、

另外，我有路径：

```
D:\Windows
E:\Eclipse\
E:\MyGwtProjects\ 
```

当我尝试以开发模式（AppEngine，Jetty）运行我的网络应用程序时：

```
http://127.0.0.1:8888/Files.html?gwt.codesvr=127.0.0.1:9997 
```

我有副作用——我的磁盘“D”上的可用空间变得越来越小。**我在哪里可以找到磁盘“D”上的临时项目文件以删除它们？**

当我使用 Glassfish 时，我可以删除以下所有文件：

```
E:\glassfish3\glassfish\domains\domain1\applications\ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:14:36.407

gwt 临时文件通常位于临时文件夹 support.microsoft.com/kb/92635。您可以偶尔使用 Windows 的磁盘清理功能或通过批处理文件自动清理磁盘。

# java - layout setting in form designing using netbeans

> ID：14137969
> 
> 赞同：0
> 
> 时间：2013-01-03T11:24:04.037
> 
> 标签：java, netbeans, netbeans-platform

I want to design a JFrame form using NetBeans . Is there any layout so that the controls should arrange according to the screen pixels according to the screen size. I am using absolute layout.

But in this, the positions of the controls is being disturbed in the form, so which layout should I use ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:59:34.120

我会检查一下以获取更多详细信息：

[http://docs.oracle.com/javase/tutorial/uiswing/layout/layoutlist.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/layoutlist.html)

阅读这些布局并应用最适合您的布局。

# android - Changing default db path in Phonegap

> ID：14137971
> 
> 赞同：1
> 
> 时间：2013-01-03T11:24:06.060
> 
> 标签：android, iphone, ios, cordova

I am using phonegap/cordova 2.1.0 framework for IOS app development. By default, phonegap looks for db in Library/Caches folder for IOS and in package_name/app_database/ for android.

My question is: can we change this and force the Phonegap to look for db in user defined location. For example, in iOS, I want the db to be created in /Documents folder, so can we let Phonegap search for db in that location and not /Library/Cache folder. If yes, how?

# elasticsearch - elasticsearch中具有独立过滤器的多类型搜索

> ID：14137975
> 
> 赞同：2
> 
> 时间：2013-01-03T11:24:16.010
> 
> 标签：elasticsearch, ruby-on-rails-2, tire

我为每个帐户都有一个单独的索引，其中指定了每个模型的映射（用户和评论 - 只是一个示例，实际应用程序有很多模型）。

```
include Tire::Model::Search

Tire.index('account_1') do
  create(
    :mappings => {
      :user => {
        :properties => {
          :name => { :type => :string, :boost => 10 },
          :company_name => { :type => :string, :boost => 5 },
          :blocked => { :type => :boolean, :include_in_all => false }
        }
      },
      :comments => {
        :properties => {
          :description => { :type => :string, :boost => 5 }
        }
      }
    }
  )
end 
```

如何在我的搜索查询中添加过滤器，以便在搜索结果中只返回被阻止 => true 的用户。**这应该不会影响评论类型的搜索结果。** 这可能吗？elasticsearch中是否有任何过滤器可以做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:52:19.357

得到了答案...

您可以使用不存在和术语过滤器的一个或组合...

```
 search_key = 'test'
    Tire.search [account_1] do
      query do
        filtered do
            query { string search_key }
            filter :or, { :not => { :exists => { :field => :blocked } } },
                        { :term => { :blocked => true } }
        end
      end
    end 
```

# javascript - automatically show image dimensions (Height and Width) in a HTML 'p' tag - JavaScript

> ID：14137977
> 
> 赞同：-2
> 
> 时间：2013-01-03T11:24:29.867
> 
> 标签：javascript, jquery, html, css, image

I'm new with javaScript and I'm having trouble with this mixed code segment that I got off a couple of sites.

```
<script type='text/javascript'>

var img = new Image();
img.onload = function() {
$("ph&W").text(this.width + 'x' + this.height);
}
img.src = ("#hi");

</script> 
```

Could you please correct this code segment, i'm sure it will help others to come :) Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:30:33.997

Javascript：

```
var img = new Image();
img.onload = function() {
  $("#phW").html(this.width + 'x' + this.height);
}
img.src = ("http://www.google.com/images/logo.png"); 
```

HTML：

```
<p id="phW"></p>​ 
```

演示：http: [//jsfiddle.net/LBkXA/](http://jsfiddle.net/LBkXA/)

# android - Zxing issue - ActivityNotFoundException

> ID：14137981
> 
> 赞同：3
> 
> 时间：2013-01-03T11:24:36.387
> 
> 标签：android, zxing

I am getting an `Exception` while working with `zxing` scanner. In my application, I want to scan `Bar` and `QR` codes by single-camera `Activity` ( `CaptureActivity` of zxing). For that, I used the following code in my app

```
 Intent intent = new Intent("com.google.zxing.client.android.SCAN");
              intent.setPackage("com.google.zxing.client.android"); 
              intent.putExtra("SCAN_MODE", "PRODUCT_MODE");
              intent.putExtra("SCAN_FORMATS", "CODE_39,CODE_93,CODE_128,DATA_MATRIX,ITF,CODABAR,EAN_13,EAN_8,UPC_A,QR_CODE");
              startActivityForResult(intent, 0); 
```

But I am getting the exception:-

```
01-03 10:28:15.445: E/AndroidRuntime(3405): android.content.ActivityNotFoundException: No Activity found to handle Intent 
{ act=com.google.zxing.client.android.SCAN pkg=com.google.zxing.client.android (has extras) } 
```

I can't use

```
 IntentIntegrator 
```

in my App. So please someone help me, to solve this issue. This is my full log cat output

```
 01-04 04:58:39.551: D/AndroidRuntime(905): Shutting down VM
                     01-04 04:58:39.551: W/dalvikvm(905): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
                      01-04 04:58:39.581: E/AndroidRuntime(905): FATAL EXCEPTION: main
                      01-04 04:58:39.581: E/AndroidRuntime(905): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.google.zxing.client.android.SCAN pkg=com.google.zxing.client.android (has extras) }
                       01-04 04:58:39.581: E/AndroidRuntime(905):   at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1545)
                       01-04 04:58:39.581: E/AndroidRuntime(905):   at android.app.Instrumentation.execStartActivity(Instrumentation.java:1416)
                     01-04 04:58:39.581: E/AndroidRuntime(905):     at android.app.Activity.startActivityForResult(Activity.java:3351)
                     01-04 04:58:39.581: E/AndroidRuntime(905):     at android.app.Activity.startActivityForResult(Activity.java:3312)
                      01-04 04:58:39.581: E/AndroidRuntime(905):    at com.google.zxing.shopping.shopping$1.onClick(shopping.java:98)
                          01-04 04:58:39.581: E/AndroidRuntime(905):    at android.view.View.performClick(View.java:4084)
                      01-04 04:58:39.581: E/AndroidRuntime(905):    at android.view.View$PerformClick.run(View.java:16966)
                         01-04 04:58:39.581: E/AndroidRuntime(905):     at android.os.Handler.handleCallback(Handler.java:615)
                         01-04 04:58:39.581: E/AndroidRuntime(905):     at android.os.Handler.dispatchMessage(Handler.java:92)
                              01-04 04:58:39.581: E/AndroidRuntime(905):    at android.os.Looper.loop(Looper.java:137)
                           01-04 04:58:39.581: E/AndroidRuntime(905):   at android.app.ActivityThread.main(ActivityThread.java:4745)
                          01-04 04:58:39.581: E/AndroidRuntime(905):    at java.lang.reflect.Method.invokeNative(Native Method)
                          01-04 04:58:39.581: E/AndroidRuntime(905):    at java.lang.reflect.Method.invoke(Method.java:511)
                        01-04 04:58:39.581: E/AndroidRuntime(905):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
                       01-04 04:58:39.581: E/AndroidRuntime(905):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
                              01-04 04:58:39.581: E/AndroidRuntime(905):    at dalvik.system.NativeStart.main(Native Method) 
```

Thanks in advance to all

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:54:47.027

由于 Zxing 应用程序未安装在您的设备中，您将收到 ActivityNotFoundException。所以请检查它是否已安装。如果不是，则将用户重定向到 Zxing 的 playstore-page：

我已经为这些实现了一些代码。根据您的需要修改它：

```
boolean isZxingInstalled;
/*
 *Checking whether Zxing is installed or not
 */ 
try
{
ApplicationInfo info = getPackageManager().getApplicationInfo("com.google.zxing.client.android", 0 );
boolean isZxingInstalled = true;
    }
catch(PackageManager.NameNotFoundException e){
                isZxingInstalled=false;
          }

/*
 * Store the boolean value on the basis of Zxing is installed or not
 */

if(isZxingInstalled) //If it is then intent Zxing application
 {
         //start the facebook app
         Intent intent = new Intent("com.google.zxing.client.android.SCAN");
          intent.setPackage("com.google.zxing.client.android"); 
          intent.putExtra("SCAN_MODE", "PRODUCT_MODE");
          intent.putExtra("SCAN_FORMATS",    "CODE_39,CODE_93,CODE_128,DATA_MATRIX,ITF,CODABAR,EAN_13,EAN_8,UPC_A,QR_CODE");
          startActivityForResult(intent, 0); 
  }
 else //It's not then redirect user to PlayStore-ZxingPlage
  {
    /*
     *Checking whether PlayStore is installed in device or not?
     */
     boolean isPlayStoreInstalled
     try
     {
      ApplicationInfo i=getPackageManager().getApplicationInfo("com.google.vending", 0 );
      boolean isPlayStoreInstalled = true;
      }
     catch(PackageManager.NameNotFoundException e){
                isPlayStoreInstalled=false;
          }

      /*
       * If it is the download Zxing
       */ 
      if(isPlayStoreInstalled)
       {
        Intent DownloadZxing = new Intent(Intent.ACTION_VIEW,Uri.parse("market://detailsid=com.google.zxing.client.android"));
        startActivity(DownloadZxing);
        }
      else //Toast message indicating No PlayStore Found
       {
         Toast.makeText(this,"Install PlayStore First",Toast.LENGHT_SHORT).show();
        }
  } 
```

希望这些可以帮助！:)

# ios - need help in Integrating the SponsorPay Offerwall

> ID：14137984
> 
> 赞同：1
> 
> 时间：2013-01-03T11:24:47.943
> 
> 标签：ios, fyber

I'm trying to implement Integration the SponsorPay Offerwall to my iOS application, but I can't understand how determine when user finished watching video and how many virtual coins he gained. In documentation I did not found solution :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:34:51.513

当用户完成观看视频时，您在初始化实例时注册的委托将调用`SPBrandEngageClient`其方法。`brandEngageClient:didChangeStatus:`

当用户观看完视频时，您将要查找的是此方法接收到的状态是否为`CLOSE_FINISHED`.

如果`CLOSE_ABORTED`相反，这意味着您的用户在完全观看视频之前已经关闭了参与度。

`SPBrandEngageClientStatus`您可以在`SPBrandEngageClient.h`文件中找到的枚举中定义和描述所有状态。它也在**Integrating_mBE_SDK.md**文档文件中进行了描述，该文件位于“请求和显示约定”部分末尾的表格中。

您的委托必须符合`SPBrandEngageClientDelegate`在同一个头文件中定义的协议。

这是实例初始化的`SPBrandEngageClient`示例：

```
_brandEngageClient =
    [[SPBrandEngageClient alloc] initWithAppId:@"YOUR_APP_ID"
                                        userId:@"CURRENT_USER_ID"
                                      delegate:self]; // <-- this is your delegate 
```

`brandEngageClient:didChangeStatus:`这是您的委托方法的示例：

```
- (void)brandEngageClient:(SPBrandEngageClient *)brandEngageClient
          didChangeStatus:(SPBrandEngageClientStatus)newStatus
{
    switch (newStatus) {
        case STARTED:
            // Your user just started watching the engagement
        break;
        case CLOSE_FINISHED:
            // This is it! Your user finished watching the video
        break;
        case CLOSE_ABORTED:
            // Engagement was cancelled
        break;
        case ERROR:
            // Something prevented the engagement from working correctly
        break;
    }
} 
```

### 确定用户获得了多少虚拟币

如果您的`brandEngageClient:didChangeStatus:`委托方法收到`CLOSE_FINISHED`状态通知，您可以放心地假设您的用户将收到付款。无法立即确定此支出的大小，因为服务器需要一些时间来处理它。当前的 SDK 实现要求您定期轮询服务器，直到您获得的金额大于 0。为此，您可以使用提供的`SPVirtualCurrencyServerConnector`类。[下面是一些示例代码的使用指南](http://developer.sponsorpay.com/docs/mobile/ios/publishing/virtual-currency-system/)（在本指南中，该类被描述为 SPVirtualCurrencyServerConnect **ion**，但过程是相同的）。

当硬币确实到达时，您的用户将在屏幕上看到一个简短的通知，其中包含他们所赚取的金额，除非您禁用它，将您的`SPBrandEngageClient`实例的`shouldShowPayoffNotificationOnVirtualCoinsReceived`属性设置为`NO`.

# html - Is possible to submit button be at aright side of input, not below?

> ID：14137985
> 
> 赞同：0
> 
> 时间：2013-01-03T11:24:51.940
> 
> 标签：html, css

Is possible to submit button be at aright side of input, not below ? In code I copied form

```
<form action="/city" method="post">
    <fieldset data-role="fieldcontain">
        <input type="text" name="city_name" id="city_name" placeholder="City Name">
    </fieldset>
    <input type="submit" value="Create New City">
</form> 
```

but button `Create New City` is always below.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:28:53.210

如果您无法修改 HTML，请尝试将此 CSS 添加到您的页面：

```
fieldset {
    display: inline-block;
} 
```

[**示例小提琴**](http://jsfiddle.net/Rnk5Z/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:28:03.670

```
<form action="/city" method="post">
    <fieldset data-role="fieldcontain">
        <input type="text" name="city_name" id="city_name" placeholder="City Name">
        <input type="submit" value="Create New City">
    </fieldset>
</form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T11:28:51.790

像这样使用

```
<form action="/city" method="post">
<fieldset data-role="fieldcontain" style='display: inline'>
    <input type="text" name="city_name" id="city_name" placeholder="City Name">
</fieldset>
<input style='display: inline' type="submit" value="Create New City">
</form> 
```

[看演示](http://jsfiddle.net/Dineshkani/cMec8/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T11:31:02.410

添加以下CSS

```
fieldset
    {
        display: inline;
    } 
```

[http://jsfiddle.net/tYsTd/](http://jsfiddle.net/tYsTd/)

# css - How to set the 'left' property of my div using css3 calc?

> ID：14137986
> 
> 赞同：19
> 
> 时间：2013-01-03T11:24:56.360
> 
> 标签：css

I am trying to set the left property of a div in an exact location depending on the width of its parent.

Specifically I want the 'left' property to be its parent width - 350px.

I am trying to use css3's calc like this (left: calc(100% - 350px)) to no avail. This probably is because 100% is looking at the left property instead of the parent's width...

Is this possible at all or what am I doing wrong?

Thanks

```
<div id="login5" class="login">
    <h3>Login</h3>

    // code 

</div> 
```

Then in my css:

```
#login5 {
    position: absolute;
    width: 260px;
    left: calc(100% - 350px);
    background-color: rgba(50, 50, 50, 0.6);
    padding: 20px;
    } 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-03T12:06:36.193

它应该可以工作（在 Chrome/Safari/Firefox/IE9+ 上）：http: [//jsfiddle.net/GXbJT/](http://jsfiddle.net/GXbJT/)

根据[Can I Use](http://caniuse.com/#feat=calc)，Opera 不支持它。基于 WebKit 的浏览器仍然需要特定于供应商的前缀：

```
left:-webkit-calc(100% - 350px);
left:-moz-calc(100% - 350px);
left:calc(100% - 350px); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-04T08:31:01.103

测试：

```
transform: translateX(25px); 
```

然后将标签向右移动，或者

```
transform: translateX(-25px); 
```

然后你向左移动。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-03T11:54:58.303

我将左侧属性更改为宽度，只需检查它。

```
 #login5 {
    position: absolute;
    width: 260px;
    width: calc(100% - 350px);
    background-color: rgba(50, 50, 50, 0.6);
    padding: 20px;
    } 
```

# jquery - Parallax Scroll Site - 动态触发鼠标滚动

> ID：14137988
> 
> 赞同：1
> 
> 时间：2013-01-03T11:25:02.943
> 
> 标签：jquery, html, css, parallax

是否可以在特定时间段/特定像素数内动态触发鼠标滚动？

基本上我需要建立一个视差网站 - 但简报要求自动滚动介绍动画，该动画会自动滚动到页面中的某个点 - 为了简单起见，我正在考虑在整个网站上使用 Scrolldeck (http://johnpolacek.github.com /scrolldeck.js/decks/parallax/），我的想法是我可以通过使用scrolldeck设置动画然后使用脚本自动滚动到所需位置来实现所需的结果！？不确定这是否可能？

有什么建议么？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:28:25.217

使用此代码。

```
$('html, body').animate({scrollTop: 500}, 1000); // 500 is the amount of pixels 
```

# java - Java division by zero doesnt throw an ArithmeticException - why?

> ID：14137989
> 
> 赞同：56
> 
> 时间：2013-01-03T11:25:08.090
> 
> 标签：java, arithmeticexception

Why doesn't this code throw an `ArithmeticException`? Take a look:

```
public class NewClass {

    public static void main(String[] args) {
        // TODO code application logic here
        double tab[] = {1.2, 3.4, 0.0, 5.6};

        try {
            for (int i = 0; i < tab.length; i++) {
                tab[i] = 1.0 / tab[i];
            }
        } catch (ArithmeticException ae) {
            System.out.println("ArithmeticException occured!");
        }
    }
} 
```

I have no idea!

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-01-03T11:27:35.677

[IEEE 754](https://en.wikipedia.org/wiki/IEEE_754)定义`1.0 / 0.0`为 Infinity 和`-1.0 / 0.0`-Infinity 以及`0.0 / 0.0`NaN。

顺便说一句，浮点值也有`-0.0`，所以`1.0/ -0.0`也是`-Infinity`。

整数算术没有这些值，而是抛出异常。

要检查可能产生非有限数的所有可能值（例如 NaN、0.0、-0.0），您可以执行以下操作。

```
if (Math.abs(tab[i] = 1 / tab[i]) < Double.POSITIVE_INFINITY)
   throw new ArithmeticException("Not finite"); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-01-03T11:36:09.743

如果这是您想要的，为什么您不能自己检查并抛出异常。

```
 try {
        for (int i = 0; i < tab.length; i++) {
            tab[i] = 1.0 / tab[i];

            if (tab[i] == Double.POSITIVE_INFINITY ||
                    tab[i] == Double.NEGATIVE_INFINITY)
                throw new ArithmeticException();
        }
    } catch (ArithmeticException ae) {
        System.out.println("ArithmeticException occured!");
    } 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-01-03T11:25:57.840

那是因为您正在处理浮点数。除以零返回`Infinity`，类似于`NaN`（不是数字）。

如果你想防止这种情况发生，你必须`tab[i]`在使用它之前进行测试。然后你可以抛出你自己的异常，如果你真的需要它。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-01-03T11:25:57.460

0.0 是一个双字面值，这不被视为绝对零！也不例外，因为它被认为是双变量大到足以容纳表示接近无穷大的值！

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-11-19T08:34:39.803

如果除以浮点零，Java 不会抛出异常。只有当您除以**整数**零而不是双零时，它才会检测到运行时错误。

如果除以 0.0，结果将是 INFINITY。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-10-01T10:55:49.760

**除以零时**

1.  如果将 double 除以 0，JVM 将显示**Infinity**。

    ```
    public static void main(String [] args){ double a=10.00; System.out.println(a/0); } 
    ```

    安慰： `Infinity`

2.  如果将 int 除以 0，则 JVM 将抛出**Arithmetic Exception**。

    ```
    public static void main(String [] args){
        int a=10;
        System.out.println(a/0);
    } 
    ```

    安慰：`Exception in thread "main" java.lang.ArithmeticException: / by zero`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-11-15T18:19:59.890

有一个技巧，算术异常仅在您使用整数时发生，并且仅在 / 或 % 操作期间发生。

如果算术运算中有任何浮点数，则内部所有整数都将转换为浮点数。这可以帮助您轻松记住事情。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-25T06:34:46.393

这是浮点运算的行为是规范的。规范摘录，[第 15.17.2 节。除法运算符 /](https://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.2)：

> 非零有限值除以零导致有符号无穷大。符号由上述规则确定。

# c# - Checks for the true condition in for loop to store in datatable

> ID：14137991
> 
> 赞同：-3
> 
> 时间：2013-01-03T11:25:11.267
> 
> 标签：c#, sql

A `for` loop for the true condition sends a parameter to stored procedure and then required result is stored in a `DataTable`. Now my problem is at every loop the value in the `DataTable` gets refreshed with new value and previous value gets lost. How to retain all the value of true condition in the `DataTable`?

```
for (int i = 0; i < gridview1.Rows.Count; i++)
{
    string yojnaNo = "";
    CheckBox chl = (CheckBox)gridview1.Rows[i].Cells[0].FindControl("CheckBox1");

    if (chl != null)
    {
        if (chl.Checked == true)
        {
            int rowsNo = (Convert.ToInt16(chl.ToolTip) - 1); //Convert.ToInt16(SrNo);
            yojnaNo = ((Label)gridview1.Rows[rowsNo].FindControl("lblYojnaNo")).Text;
            sc.Add(yojnaNo);
        }
    }

    objyojnadetail4.YojnaNo = sc;
    DataTable city = objyojnadetail4.Selectcity();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:48:46.847

您可以将 city 的实例化放在外面，并在每个循环中将每一行添加到其中。你不会失去价值，相反，`city`每个循环都会变大。

```
DataTable city = new DataTable(); // instantiate here
for (int i = 0; i < gridview1.Rows.Count; i++)
{
    string yojnaNo = "";
    CheckBox chl = (CheckBox)gridview1.Rows[i].Cells[0].FindControl("CheckBox1");

    if (chl != null)
    {
        if (chl.Checked == true)
        {
            int rowsNo = (Convert.ToInt16(chl.ToolTip) - 1); //Convert.ToInt16(SrNo);
            yojnaNo = ((Label)gridview1.Rows[rowsNo].FindControl("lblYojnaNo")).Text;
            sc.Add(yojnaNo);
        }
    }

    objyojnadetail4.YojnaNo = sc;

    // this foreach loop may loop on anything the objyojnadetail4.Selectcity() provides
    // what was important is that, in this loop you insert each data into rows in city.
    foreach(var singleItem in objyojnadetail4.Selectcity().Rows)
    {
        city.Rows.Add(singleItem);
    }
} 
```

# android - mono droid 和 mvvm cross 的奇怪异常无法解析 IoC 类型

> ID：14137992
> 
> 赞同：2
> 
> 时间：2013-01-03T11:25:19.087
> 
> 标签：android, exception-handling, mono, xamarin.android, mvvmcross

我们正在使用 mono droid 和 mvvmcross，有时当应用程序初始化时，我们会遇到异常 - Cirrious.MvvmCross.Exceptions.MvxException: Unable to Resolve IoC type。当我们调用 GetService() 时会发生这种情况 -

```
public IImageService ImageService
        {
            get
            {
                if (_imageService == null)
                {
                    _imageService = this.GetService<IImageService>();

                }
                return _imageService;
            }
        } 
```

似乎它无法解决 IImageService - 你们有什么想法会导致这种情况并避免它吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:43:16.543

异常“Cirrious.MvvmCross.Exceptions.MvxException：无法解析 IoC 类型。” 表明`IImageService`在 IoC 容器中找不到实现。

这通常表明在调用`GetService<>`.

一些可能有助于弄清楚为什么会发生这种情况的问题：

*   您如何将 IImageService 注册为 IoC？`GetService<>`在拨打电话之前肯定总是注册吗？
*   如果这种情况“有时”发生，那么这些时间何时发生有什么规律吗？我通常希望这种代码要么总是工作要么总​​是失败——因为它“有时”失败表明可能存在某种异步计时问题？

# regex - 需要匹配 Sed 表达式中的两个组

> ID：14137996
> 
> 赞同：0
> 
> 时间：2013-01-03T11:25:26.220
> 
> 标签：regex, sed

这类似于[在找到匹配项时使用 sed 替换行首，](https://stackoverflow.com/questions/14137353/using-sed-to-replace-beginning-of-line-when-match-found)但问题不同，因此有此线程。

我希望取消注释掉注释掉的代码。更具体地说，所有变量 myVar 被注释掉的情况。

例子：

```
public class MyClass {
   ...
   ...
   //myVar.setAge(200);
   //myVar.setPlanet("mars");
} 
```

至

```
public class MyClass {
   ...
   ...
   myVar.setAge(200);
   myVar.setPlanet("mars");
} 
```

正则表达式：

```
^\\.*myVar.*$ 
```

得到我需要的一切。

棘手的部分是获得正确的 Sed。我尝试：

```
sed 's/(^\\)(.*myVar.*$)/\2/g' Build_DM_Digests_Batch.cls 
```

在以下基础上。创建两个匹配组。第一个是注释掉的行。第二个是线路的其余部分。仅用第二个匹配组替换整行。

这给出了错误：

```
sed: -e expression #1, char 29: Unmatched ) or \) 
```

有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:27:43.173

利用`sed 's/^\( *\)\/\/\(.*myVar.*$\)/\1\2/' file`

```
$ cat hw.java 
class hw {
    public static void main(String[] args) {
        System.out.println("Hello World!"); 
//        myVar=1
        //myVar.setAge(200);
        //myVar.setPlanet("mars");
    }
}

$ sed 's/^\( *\)\/\/\(.*myVar.*$\)/\1\2/' hw.java
class hw {
    public static void main(String[] args) {
        System.out.println("Hello World!"); 
        myVar=1
        myVar.setAge(200);
        myVar.setPlanet("mars");
    }
} 
```

使用`-i`选项保存文件中的更改`sed -i 's/^\( *\)\/\/\(.*myVar.*$\)/\1/' file`：

解释：

```
^      # Matches the start of the line
\(     # Start first capture group  
 *     # Matches zero or more spaces
\)     # End first capture group
\/\/   # Matches two forward slashes (escaped)
\(     # Start second capture group 
.*     # Matches anything 
myVar  # Matches the literal word 
.*     # Matches anything
$      # Matches the end of the line
\)     # End second capture group 
```

在这里，我们将空格捕获到`//`，然后在 if 之后`myVar`的所有内容并替换为`\1\2`。

您的逻辑几乎就在那里，但是有几件事，首先是转义了所有括号，其次您`^( *)\/\/`不希望`^\\`在行首捕获两个转义的正斜杠，其中的空格不是两个反斜杠：

如果您不想转义括号，则需要使用扩展的正则表达式标志，`sed`它的`-r`for `GNU sed`on`OSX`它是`-E`这样检查的`sed --help`。

```
sed -r 's/^( *)\/\/(.*myVar.*$)/\1\2/' file 
```

注意：当您匹配整行（从`^`到`$`）时，该`g`标志是多余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:39:19.503

另一种方式：

```
sed 's!^\([ \t]*\)//\(.*\<myVar\>\)!\1\2!' input 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-17T14:05:20.967

[克里斯的回答](https://stackoverflow.com/a/14138033/4341534)和解释是有效的。但是，我想添加一个更清晰的等效表达式。这个表达式依赖于两个变化

*   将分隔符更改为不包含在正则表达式中的任何字符，例如`|`，去掉转义字符`/`
*   指定扩展正则表达式 ( `-r`) 可以消除括号的转义`()`

这会产生一个可读的命令，其意图更清晰，更接近您预期使用的内容。

```
sed -r 's|^( *)//(.*myVar.*$)|\1\2|' filename 
```