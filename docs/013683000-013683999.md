# StackOverflow 问答 13683000-13683999

# html - IE7 和 IE8 - 为什么他们不记得选择框的值？

> ID：13683000
> 
> 赞同：0
> 
> 时间：2012-12-03T12:12:18.797
> 
> 标签：html, internet-explorer

我有一个超级简单的表格，带有一个选择下拉框。除了 IE8 和 IE7（IE9 有效）之外，所有浏览器都会记住该选择。我正在做一个帖子。文档类型是 HTML。我还需要添加什么？

print_R($_POST) 在包括 IE9 在内的所有浏览器中正确显示值 - 除了 IE 7 和 IE8

```
<form method='POST' action='/someaction'>
    Timezone : 
    <select name='user_time_zone' id='user_time_zone'>
        <option value='UTC'>UTC/GMT</option>
        more options here
    </select>
    <input type='submit' value='Set' style='padding-left: 5px; height: 30px; margin-bottom: 10px;'>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:12:46.967

我怀疑您的问题不在于您的浏览器，而在于您的代码。使用[http://browserstack.com](http://browserstack.com)，我能够启动 Windows XP 的快速 vm 并测试 IE7 和 IE8。此外，我在本地机器上测试了 IE10 - 所有浏览器都按预期[显示了发布的数据。](http://i.stack.imgur.com/cbnx7.png)

```
<?php

    if (count($_POST)) var_dump($_POST);

?> 
```

```
<form method='post'>
    <label for="user_time_zome">Timezone:</label> 
    <select name='user_time_zone' id='user_time_zone'>
        <option value='foo'>Foo</option>
        <option value="bar">Bar</option>
    </select>
    <input type='submit' value='Set'>
</form> 
```

样本输出：

```
array
  'user_time_zone' => string 'foo' (length=3) 
```

# kendo-ui - 如何选择 Kendo UI 下拉列表值？

> ID：13683001
> 
> 赞同：1
> 
> 时间：2012-12-03T12:12:20.650
> 
> 标签：kendo-ui

如何在更改功能上选择 Kendo 下拉列表值。剑道下拉列表在网格中。在更改功能上，我想选择列表中的第一项。

我已经写了代码：

```
 function categoryDropDownEditor(container, options) {

        var dropdownlist = $('<input data-text-field="category" id ="ctdd" data-value-field="CatId" data-bind="value:' + options.field + '"/>').appendTo(container).kendoDropDownList({
            optionLabel: "Select...",
            dataValueField: "categoryid",
            dataTextField: "category",
            autoBind: false,
            change: onChange,
            dataSource: catogory               

        }).data("kendoDropDownList");
    }

    function onChange()
             {

                   dropdownlist.select(0);
              } 
```

但是下拉菜单没有选择更改功能。我该怎么做，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:05:01.680

我认为在你的 onchange 事件中添加 e 作为事件，`e.sender.select(0)` 会成功的。

这是代码。

```
function Change(e) {
    console.log("Event Fired"); e.sender.select(0);
    } 
```

# php - PHP：读取大量excel文件导致致命错误

> ID：13683002
> 
> 赞同：2
> 
> 时间：2012-12-03T12:12:25.587
> 
> 标签：php, excel

我面临一个问题。

我需要阅读大约 10MB 的 .xls 文件。我编写了一个 php 代码，当我读取小的 .xls 文件时它可以正常工作。但是当我尝试读取大文件时，浏览器**在第 1126 行显示“致命错误：C:\wamp\www\student\ExcelRes\PHPExcel\Cell.php 中允许的内存大小为 134217728 字节已用尽（试图分配 1032 字节） "**

这是我的代码。

```
<?php 

    ini_set('memory_limit', '128M');

    set_include_path(get_include_path() . PATH_SEPARATOR . 'ExcelRes/');

    include 'PHPExcel/IOFactory.php';
    $inputFileName = 'ru_unit_H_all.xls'; 
    $objPHPExcel = PHPExcel_IOFactory::load($inputFileName);
    $sheetData = $objPHPExcel->getActiveSheet()->toArray(null,true,true,true);

    echo $sheetData['20007'][ 'K'];          //row colomn

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:15:01.077

错误信息应该是自我解释的：

*“致命错误：第 1126 行 C:\wamp\www\student\ExcelRes\PHPExcel\Cell.php 中**允许的内存**大小为 134217728 字节已**用尽**（试图分配 1032 字节）”*

您只是用完了为执行一个脚本而保留的内存。

你可以增加你的[`memory_limit`](http://php.net/manual/en/ini.core.php#ini.memory-limit)使用[`ini_set()`](http://php.net/manual/en/function.ini-set.php)来解决这个问题。

*注意：*使用`128MB`还不够，因为[`134217728B = ~128MB`](https://www.google.com/search?hl=en&q=134217728%20bytes%20to%20megabytes)仍然会导致该错误。尝试使用`512MB`.

据我所知，没有针对 PHP 的 Excel 读取器/写入器的有效内存实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:46:38.487

最后我通过使用 example12 代码解决了我的问题。

```
<?php

set_include_path(get_include_path() . PATH_SEPARATOR . 'ExcelRes/');
include 'PHPExcel/IOFactory.php';

$inputFileType = 'Excel5'; 
$inputFileName = 'ru_unit_H_all.xls'; 

class chunkReadFilter implements PHPExcel_Reader_IReadFilter
{
    private $_startRow = 0;
    private $_endRow = 0;

    public function setRows($startRow) 
    {
        $this->_startRow    = $startRow; 
    }

    public function readCell($column, $row, $worksheetName = '')
    { 
        if (($row == 1) || ($row >= $this->_startRow )) 
        {
            return true;
        }
        return false;
    }
}

$objReader = PHPExcel_IOFactory::createReader($inputFileType);

$chunkFilter = new chunkReadFilter();

$objReader->setReadFilter($chunkFilter);

$chunkFilter->setRows(22000); 
$objPHPExcel = $objReader->load($inputFileName);

echo $objPHPExcel->getActiveSheet()->getCell('K22000')->getValue();

}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:17:32.167

脚本可用的内存已用完。默认情况下，我相信每个脚本分配给它的内存限制为 8MB。您正在尝试读取 10MB 的文件，因此没有足够的内存来处理请求并且它失败了。

`memory_limit`您可以尝试使用设置来增加可用内存量。

这可以针对`php.ini`设置文件中的所有脚本全局完成，也可以使用每个脚本进行

```
ini_set('memory_limit','16M'); 
```

`16M`16 兆字节的内存在哪里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T12:28:14.830

除了可能增加内存之外，您还应该查看 PHPExcel 为此目的提供的单元缓存选项，如标题为“单元缓存”的开发人员文档部分（第 4.2.1 节）中所述

**编辑**

并且您对 toArray() 的使用还将在 PHP 内存中构建您请求的数组，这会增加额外的开销 - 考虑一次遍历工作表一行而不是将其两次加载到内存中（一次作为 PHPExcel 对象一次作为你的数组）

# xslt - ready.mobi 移动准备是否适当地嵌套 xsl 标签？

> ID：13683011
> 
> 赞同：1
> 
> 时间：2012-12-03T12:12:54.167
> 
> 标签：xslt, coldfusion, xhtml, markup, nested

我一直在尝试更改我的代码一段时间，但没有这样做。

我能够使准备分数达到 3.72 的峰值，并在此处显示代码并正常运行： *链接已删除*

但是当与 ready.mobi 一起使用时：ready.mobi/launch.jsp?locale=en_EN#fragment-1

我收到以下错误：

```
 FAIL near line -1 column -1
    Your page does not validate against XHTML Basic 1.1 or XHTML Mobile Profile 1.2

    FAIL near line 41 column 17
    The content of element type "a" must match "(br|span|em|strong|dfn|code|samp|kbd|var|cite|abbr|acronym|q|tt|i|b|big|small|sub|sup|img|object|input|select|textarea|label|button|script|noscript)".

    FAIL near line 46 column 17
    *same element type "a" error line

    FAIL near line 51 column 17
    *same element type "a" error line

    FAIL near line 56 column 17
    .....

    FAIL near line 61 column 17
    ... 
```

由于标记错误，xhtml 移动配置文件也失败了。

但话虽如此，如果代码如下所示，我的分数可以是 5，xhtml 移动配置文件和标记都有效： *链接已删除*

更改嵌套顺序以供验证器接受。但是，这会导致链接断开。

前：

```
 <xsl:element name="a">
    <xsl:attribute name="href">
        <xsl:value-of select="link"/>
    </xsl:attribute>
</xsl:element>
    <xsl:element name="p"><xsl:attribute name="class"><xsl:text>more</xsl:text></xsl:attribute><xsl:text>more...</xsl:text></xsl:element> 
```

后：

```
 <xsl:element name="a">
    <xsl:attribute name="href">
        <xsl:value-of select="link"/>
    </xsl:attribute>
    <xsl:element name="p"><xsl:attribute name="class"><xsl:text>more</xsl:text></xsl:attribute><xsl:text>more...</xsl:text></xsl:element>
</xsl:element> 
```

任何帮助将不胜感激。：） 非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:26:39.527

如果你把它放在`<a>`里面`<p>`呢？

```
<xsl:element name="p"><xsl:attribute name="class"><xsl:text>more</xsl:text></xsl:attribute>
 <xsl:element name="a">
    <xsl:attribute name="href">
        <xsl:value-of select="link"/>
    </xsl:attribute>
    <xsl:text>more...</xsl:text></xsl:element>
</xsl:element> 
```

或者更简单地说，使用文字结果元素和属性值*模板*`href`：

```
<p class="more"><a href="{link}">more...</a></p> 
```

# jira - 如何在 JIRA 中创建具有标签类字段行为的自定义字段？

> ID：13683013
> 
> 赞同：1
> 
> 时间：2012-12-03T12:12:55.027
> 
> 标签：jira, custom-fields

我想创建一个具有一组值的自定义字段。集应由用户填写。它应该像标准的“标签”字段一样工作，但使用其他值集。在 JIRA 5.1 中有什么方法可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:44:44.053

您可以创建标签类型的自定义字段，并且该字段的标签仅出现在该自定义字段中。

# python - 将新元素插入现有xml时lxml不添加换行符

> ID：13683014
> 
> 赞同：18
> 
> 时间：2012-12-03T12:12:56.403
> 
> 标签：python, lxml

我有大量现有的 xml 文件，我正在尝试向所有这些文件中添加一个元素（它们是许多 maven 项目的 pom.xml，我正在尝试向所有这些文件中添加一个父元素）。以下是我的确切代码。

问题是 pom2.xml 中的最终 xml 输出在一行中包含完整的`parent`元素。虽然，当我自己打印元素时，它像往常一样用 4 行写出来。如何打印出具有正确格式的`parent`元素的完整 xml？

```
from lxml import etree

parentPom = etree.Element('parent')
groupId = etree.Element('groupId')
groupId.text = 'org.myorg'
parentPom.append(groupId)

artifactId = etree.Element('artifactId')
artifactId.text = 'myorg-master-pom'
parentPom.append(artifactId)

version = etree.Element('version')
version.text = '1.0.0'
parentPom.append(version)

print etree.tostring(parentPom, pretty_print=True)

pom = etree.parse("pom.xml")
projectElement = pom.getroot()
projectElement.insert(0, parentPom)

file = open("pom2.xml", 'wb')
file.write(etree.tostring(projectElement, pretty_print=True))
file.close() 
```

打印输出：

```
<parent>
  <groupId>org.myorg</groupId>
  <artifactId>myorg-master-pom</artifactId>
  <version>1.0.0</version>
</parent> 
```

pom2.xml 中相同元素的输出：

```
<parent><groupId>com.inmobi</groupId><artifactId>inmobi-master-pom</artifactId><version>1.0.1</version></parent><modelVersion>4.0.0</modelVersion> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-03T12:18:53.490

这可能会让你感兴趣。

[http://lxml.de/FAQ.html#why-doesn-t-the-pretty-print-option-reformat-my-xml-output](http://lxml.de/FAQ.html#why-doesn-t-the-pretty-print-option-reformat-my-xml-output)

简而言之，以供将来参考：

```
parser = etree.XMLParser(remove_blank_text=True)
pom = etree.parse("pom.xml",parser) 
```

# java - 具有复合键和辅助表的 JPA

> ID：13683016
> 
> 赞同：0
> 
> 时间：2012-12-03T12:13:02.340
> 
> 标签：java, jpa

我是 JPA 的新手，在尝试使用辅助表和复合键时遇到问题。

当我尝试添加、删除或更新时，我收到以下错误消息：

> 提供了错误类型的 id 预期：类 EmployeePK，得到类 java.lang.Integer

```
@Entity
@IdClass(EmployeePK.class)
@Table(name="specialemployee")
@SecondaryTable(name = "employeeTypeAndSalary", pkJoinColumns = {
    @PrimaryKeyJoinColumn(name = "employee_Id"),
    @PrimaryKeyJoinColumn(name = "employee_Email") })
public class Employee implements Serializable {
    private static final long serialVersionUID = 1L;

    public enum EmployeeType {
        WORKER, FOREMAN, MANAGEMENT
    }

    @Id
    private int id;

    @Column(name = "EMP")
    @Embedded
    private Name name;

    @Id
    private String email;

    private Date birthDate;

    @Lob
    private String comments;

    @Column(name = "EMP_SALARY", table = "employeeTypeAndSalary")
    private double salary;

    @Column(name = "EMP_TYPE", table = "employeeTypeAndSalary")
    @Enumerated(EnumType.STRING)
    private EmployeeType employeeType;

    public Employee() {
        super();
    }

    public Employee(int id, Name name, String email, double salary, String birthDate,
            String comments, EmployeeType employeeType) {
        super();
        this.id = id;
        this.name = name;
        this.email = email;
        this.salary = salary;
        try {
            this.birthDate = java.sql.Date.valueOf(birthDate);
    } catch (Exception e) {
            logging.error("error on creating date" + " :" + e);
            this.birthDate = java.sql.Date.valueOf("1900-00-00");
        }

        this.comments = comments;
        this.employeeType = employeeType;
    }

    //getters and setters
}

public class EmployeePK implements Serializable {

    private static final long serialVersionUID = 1L;

    private int id;
    private String email;

    // non-arg default constructor

    public EmployeePK() {
        super();
    }

    public EmployeePK(int id, String email){
        this.id = id;
        this.email = email;
    }

    public int getId() {
        return id;
    }

    protected void setId(int id) {
        this.id = id;
    }

    public String getEmail() {
        return email;
    }

    protected void setEmail(String email) {
        this.email = email;
    }

    public boolean equals(Object o) { 
        return ((o instanceof EmployeePK) && 
            email.equals(((EmployeePK)o).getEmail()) &&
            id == ((EmployeePK) o).getId());
    }

    public int hashCode() { 
        return (int) (email.hashCode() + id); 
    }
}

@Embeddable
public class Name implements Serializable {

    private static final long serialVersionUID = 1L;

    private String firstName;
    private String lastName;

    public Name() {
        super();
    }

    @Override
    public String toString() {
        return "Name [firstName=" + firstName + ", lastName=" + lastName + "]";
    }

    public Name(String firstName, String lastName) {
        super();
        this.firstName = firstName;
        this.lastName = lastName;
    }

    // getters and setters
} 
```

我已经看了一段时间了，我看不出我做错了什么。任何的建议都受欢迎。

谢谢。

编辑：

```
Name name1 = new Name("Johnn", "Doe");

Employee employee1 = new Employee(1, name1, "employee1@hotmail.com",
            1857.87, "1976-05-12", "ready for promotion",
            EmployeeType.MANAGEMENT);

addEmployee(employee1);

private static void addEmployee(Employee employee) {
    EntityManagerFactory emf = Persistence
            .createEntityManagerFactory("JPA_excercise");
    EntityManager em = emf.createEntityManager();
    try {
        em.getTransaction().begin();
        em.persist(employee);
        em.getTransaction().commit();
    } catch (Exception e) {
        logging.error("This error has occured when adding a employee"
                + " :" + e);
    } finally {
        em.close();
        emf.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:01:02.757

发现问题。添加方法没有任何问题。更新方法中的问题，我忘记更改日志记录文本，因此问题似乎出在 add 方法中。问题已解决

# php - moneybookers 从 cancel_url 获取参数

> ID：13683017
> 
> 赞同：0
> 
> 时间：2012-12-03T12:13:14.017
> 
> 标签：php, payment-gateway

我正在将我的系统与 Moneybookers 集成，我有一个问题。是否有可能`transaction_id`从 a 中获得 a `cancel_url`？有谁知道是否`cancel_url`带有任何参数，例如`return_url`（moneybookers 文档对此只字未提）？我需要这个，因为我想向用户显示发生问题的付款。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:20:46.673

我不会想到，因为如果用户取消，那么就没有交易。

这属于您自己，当用户单击结帐时，您需要在数据库中创建一个订单，然后让您的 Moneybookers 回调根据订单 ID 更新订单。

使用*PayPal*，您可以发送带有付款请求的自定义字段，这通常用于在您的网站上发送订单 ID；我认为 Moneybookers 也有类似的东西。

# android - sqlite 预定义数据库 null

> ID：13683018
> 
> 赞同：0
> 
> 时间：2012-12-03T12:13:18.703
> 
> 标签：android, sqlite

我是 Sqlite 的初学者，如果我犯了一些愚蠢的错误，我很抱歉：D

我的预定义数据库中出现 NULL 错误：

![空错误](../Images/d7bd2d6d06bf48b82a4b74276a1fb1ae.png)

**当我在新的计算机/模拟器中启动我的应用程序**时，总是会出现这个**错误**，所以我认为它与我的方法有关。但是，不应该需要，因为我使用预定义的数据库。**`onCreate``onCreate`**

 **这是我的数据库类：

```
private static String DATABASE_NAME = "ALGOLICIOUS_DB";
    private static int DATABASE_VERSION = 1;
    private static String TABLE_NAME = "msQuiz";
    private static String TABLE_HIGHSCORE = "msHighScore";

    private Context context;
    private SQLiteDatabase db;
    String queryCreate, queryUpdate, queryDelete, querySelect, queryInsert;
    Cursor cursor;

    public AlgoliciousDB(Context context) {
        this.context = context; 
        OpenHelper openHelper = new OpenHelper(this.context); 
        this.db = openHelper.getWritableDatabase(); 
    }

    public List<String> getQuestion(int chapter) {
        List<String> questionList = new ArrayList<String>();
        String result = "";
        querySelect = "SELECT * FROM " + TABLE_NAME + " WHERE question_chapter = " + chapter;

        try {
            cursor = this.db.rawQuery(querySelect, null);

            for(cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()){
                result += cursor.getString(1) + "%" + cursor.getString(2) + "%" + cursor.getString(3) + "%" + cursor.getString(4) + "%" + cursor.getString(5);
                questionList.add(result);
                result = "";
            }
            return questionList;

        } catch (Exception e) {
            return null;
        }
    }

    public int getHighScore(int chapter) {
        querySelect = "SELECT highscore FROM " + TABLE_HIGHSCORE + " WHERE highscore_id = " + chapter;
        int temp = 0;

        try {
            cursor = this.db.rawQuery(querySelect, null);

            for(cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()){
                temp = Integer.parseInt(cursor.getString(0));
            }
            return temp;

        } catch (Exception e) {
            return -1;
        }
    }

    public void Close() {
        db.close();
    }

    class OpenHelper extends SQLiteOpenHelper {
        public OpenHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
            onCreate(db);
        }
    } 
```

任何帮助将不胜感激，谢谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:48:00.290

您的答案就在这里： [如何将现有数据库与 Android 应用程序一起使用](https://stackoverflow.com/questions/9109438/how-to-use-an-existing-database-with-an-android-application/9109728#9109728)

将您的数据库复制到资产文件夹并使用上面链接中提供的代码。样品样品也可用，您可以尝试一下。**

# android - 显示文章的 RSS 应用程序

> ID：13683019
> 
> 赞同：0
> 
> 时间：2012-12-03T12:13:19.603
> 
> 标签：android, wordpress, rss

我看到很多教程如何在 Android 中构建一个 RSS 阅读器，但我需要一个不打开浏览器的 RSS 阅读器，我需要一个在应用程序中显示文章的 RSS 阅读器。只有文章，没有别的。任何帮助/想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:27:08.583

基于 XML 解析器创建您自己的 RSS 解析器。尝试使用库 org.simpleframework.xml 作为 XML 解析器：[http ://simple.sourceforge.net/](http://simple.sourceforge.net/)

# ruby-on-rails - 是否有可以与 RSpec（或 Cucumber）一起使用的工具来截取网页元素的屏幕截图？

> ID：13683020
> 
> 赞同：3
> 
> 时间：2012-12-03T12:13:23.833
> 
> 标签：ruby-on-rails, ruby, rspec, cucumber

我正在寻找一种在运行验收测试时保存网页元素屏幕截图的方法。Capybara 或其他带有 RSpec/Cucumber 测试的工具可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:17:39.240

看看 phantomjs。

这个问题是关于如何只抓取屏幕的一部分。

[如何使用 PhantomJS 渲染页面的一部分？](https://stackoverflow.com/questions/11917042/how-to-render-part-of-a-page-with-phantomjs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:16:15.387

使用 Capybara 拍摄屏幕截图非常容易。

[http://www.opinionatedprogrammer.com/2012/01/screenshots-with-capybara-selenium/](http://www.opinionatedprogrammer.com/2012/01/screenshots-with-capybara-selenium/)

但是，我不相信当前的屏幕截图实现可以在页面上挑选特定元素。

# .net - 互斥量在可移植类库中不可用？

> ID：13683021
> 
> 赞同：2
> 
> 时间：2012-12-03T12:13:28.243
> 
> 标签：.net, windows-phone-8, portable-class-library

我一直在尝试使用互斥锁来保护对 Windows phone 8 上的独立存储中文件的访问。我正在处理的项目需要跨平台支持，因此我在可移植类库中共享了核心功能。

我最近添加了一个 PeriodicTask 和 ResourceIntensive 任​​务，这两个任务都需要访问同一个文件，这就是我想首先使用 Mutex 的原因。

MSDN 文档说这里支持它：http: [//msdn.microsoft.com/en-us/library/system.threading.mutex.aspx](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)但是当我尝试使用它时，我只是得到一个“无法解析符号”错误. 我已经包含了 System.Threading 命名空间，但它仍然不起作用。

这是文档错误还是我做错了什么？如果不支持，是否有其他方法可以实现这一目标？锁定不好，因为它不适用于跨应用程序域。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T20:29:13.720

Mutex is supported from Portable Class Libraries on the .NET Framework (any version), Windows Store Apps, and Windows Phone 8\. If you're targeting Silverlight or Windows Phone 7.5 or below from your Portable Class Library, Mutex won't be available.

A full list of portable APIs and what platforms they are available on is here: [http://sdrv.ms/OVdfNc](http://sdrv.ms/OVdfNc)

# jenkins - SONAR - 以增量方式分析源代码

> ID：13683027
> 
> 赞同：1
> 
> 时间：2012-12-03T12:13:48.230
> 
> 标签：jenkins, sonarqube, sonar-runner

我在过去几个月使用声纳，想知道声纳是否以增量方式工作，即如果我第一次对我的项目代码进行 soanr 分析，它肯定会分析所有代码，但如果我做一些增强在我的核心源代码上并更新一些文件，然后在更新后再次对相同的代码进行声纳分析，然后声纳会分析所有文件还是只分析我更新的文件？我使用“Sonar way with Findbugs”作为我的默认质量配置文件。

有没有办法以增量方式使用声纳，只分析更新的文件？这在声纳中是否可能？

请回复您的帮助将不胜感激..

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T06:25:39.397

如果您的任务是以一般方式衡量代码质量，那么您可以直接在 Jenkins 上使用这些工具。请参阅[FindBugs 插件](https://wiki.jenkins-ci.org/display/JENKINS/FindBugs+Plugin)、[PMD 插件](https://wiki.jenkins-ci.org/display/JENKINS/PMD+Plugin)或[Checkstyle 插件](https://wiki.jenkins-ci.org/display/JENKINS/Checkstyle+Plugin)。**他们以“增量代码**”报告的形式独立提供您需要的内容。但是，如果您只能使用 SONAR，那么 Fabrice 的答案是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T12:31:10.053

Sonar 目前不处理增量分析。

如果您愿意，可以观看并投票给以下票：http: [//jira.codehaus.org/browse/SONAR-2815](http://jira.codehaus.org/browse/SONAR-2815)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:35:18.683

这是@fabrice-sonar-team 评论的票诞生的帖子：

[Sonar 是否支持增量代码质量分析](http://sonar.15.n6.nabble.com/does-Sonar-support-Incremental-code-quality-analysis-tp3160423p3160433.html)

您可以阅读 Freddy Mallet 的解释，了解为什么要实现此功能并非易事。这需要付出很多努力，所以正如Fabrice所说，投票给票！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-22T13:21:30.243

只是添加，因为这是堆栈中“声纳增量预览分析”的第一个谷歌结果，答案太旧了。

Sonar 具有可用于 Eclipse 和 NetBeans 等 IDE 的插件，它们可以单独对更改的文件运行增量分析。不过，这仍然需要连接 SonarQube 服务器。

`sonar.analysis.mode=incremental`您还可以通过在声纳扫描构建步骤中传递额外的声纳分析属性来直接从 Jenkins 运行分析 。这将在完整报告中报告代码质量 - 所有代码问题以及仅包含新问题的轻型报告（自上次完整扫描以来记录在服务器中）。

进一步使用`sonar.issuesReport.html.enable=true`生成的 html 报告并将其发布到您的 Jenkins 构建页面 - Neat and Trim

声纳文档[在这里](http://www.sonarqube.org/analysis-vs-preview-vs-incremental-preview-in-sonarqube/#more-8878)

# wordpress - wordpress 引导滑块轮播

> ID：13683029
> 
> 赞同：0
> 
> 时间：2012-12-03T12:13:53.937
> 
> 标签：wordpress, twitter-bootstrap

我希望有人可以帮助我，一直在网上寻找答案。我在本地主机中使用[http://320press.com/wpbs/](http://320press.com/wpbs/)作为我的 wordpress，但轮播似乎无法正常工作。

实际上我有问题，但重要的部分是第一个。

1.  如何使轮播调用特定类别，而不是在我的 wordpress 中显示所有帖子

2.  您需要单击箭头才能使图像幻灯片起作用，有没有办法将其设置为自动滑动？

    ```
    <?php

                $use_carousel = of_get_option('showhidden_slideroptions');
                if ($use_carousel) {

                ?>

                <div id="myCarousel" class="carousel slide">

                    <!-- Carousel items -->
                    <div class="carousel-inner">

                        <?php
                        global $post;
                        $tmp_post = $post;
                        $show_posts = of_get_option('slider_options');
                        $args = array( 'numberposts' => $show_posts ); // set this to how many posts you want in the carousel
                        $myposts = get_posts( $args );
                        $post_num = 0;
                        foreach( $myposts as $post ) :  setup_postdata($post);
                            $post_num++;
                            $post_thumbnail_id = get_post_thumbnail_id();
                            $featured_src = wp_get_attachment_image_src( $post_thumbnail_id, 'wpbs-featured-carousel' );
                        ?>

                        <div class="<?php if($post_num == 1){ echo 'active'; } ?> item">
                            <a href="<?php the_permalink() ?>" rel="bookmark" title="<?php the_title_attribute(); ?>"><?php the_post_thumbnail( 'wpbs-featured-carousel' ); ?></a>

                            <div class="carousel-caption">

                                <h4><a href="<?php the_permalink() ?>" rel="bookmark" title="<?php the_title_attribute(); ?>"><?php the_title(); ?></a></h4>
                                <p>
                                    <?php
                                        $excerpt_length = 100; // length of excerpt to show (in characters)
                                        $the_excerpt = get_the_excerpt(); 
                                        if($the_excerpt != ""){
                                            $the_excerpt = substr( $the_excerpt, 0, $excerpt_length );
                                            echo $the_excerpt . '... ';
                                    ?>
                                    <a href="<?php the_permalink() ?>" rel="bookmark" title="<?php the_title_attribute(); ?>" class="btn btn-primary">Read more &rsaquo;</a>
                                    <?php } ?>
                                </p>

                            </div>
                        </div>

                        <?php endforeach; ?>
                        <?php $post = $tmp_post; ?>

                    </div>

                    <!-- Carousel nav -->
                    <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
                    <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
                </div>

                <?php } // ends the if use carousel statement ?> 
    ```

非常感谢您的帮助！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:37:54.210

尝试这个。

1.  如何使轮播调用特定类别，而不是在我的 wordpress 中显示所有帖子。

在这里，您使用不在 id 中的类调用轮播初始化，如下所示：

```
$(".class").carousel( { autoSlide: true } ); 
```

2.你需要点击箭头才能使图片滑动，有没有办法将它设置为自动滑动？我认为轮播为自动滑动提供了一个参数，如下所示：

```
$("div").carousel( { autoSlide: true } ); 
```

参考网站：[http ://www.thomaslanciaux.pro/jquery/jquery_carousel.htm#autoslide](http://www.thomaslanciaux.pro/jquery/jquery_carousel.htm#autoslide)

# portlet - 如何从 portlet 中设置门户页面标题？

> ID：13683030
> 
> 赞同：0
> 
> 时间：2012-12-03T12:13:56.247
> 
> 标签：portlet, websphere-portal, page-title

如何以编程方式从 portlet 中设置门户页面标题？我正在使用 Websphere Portal 6.1。我尝试了以下链接中的选项。但我没有工作。有人知道吗？

[http://wpcertification.blogspot.in/2010/09/changeing-title-of-portal-page.html](http://wpcertification.blogspot.in/2010/09/changing-title-of-portal-page.html) http://wpcertification.blogspot.in/2010/09/enable-two-phase-rendering-in-portlet .html

# jetty - 阿帕奇骆驼| 码头 | 如果作为 OUT 标头提供，则应在响应中设置 Content-Type

> ID：13683031
> 
> 赞同：0
> 
> 时间：2012-12-03T12:13:58.307
> 
> 标签：jetty, apache-camel

如果最终用户提供了一个作为 OUT 标头，则不会在 HttpBinding 中设置 Content-Type。

因此，如果用户公开 Jetty 服务并让请求飞入，即 text/plain 并希望返回 application/json 或 application/xml 或类似内容的响应，则内容类型不能设置为：exchange.getOut() .setHeader("内容类型", "应用程序/json");

Camel 版本：2.9.2 Camel Jetty Jar 版本 2.9.0

问题陈述：虽然我包含语句 setHeader("Content-Type", "application/json"); 或 setHeader("Content-Type", "application/xml");，在调试时我可以看到以下行为。

1.) 类“DefaultHeaderFilterStrategy”，方法“doFiltering”包含“Content-Type”作为要跳过的过滤器之一。因此，如果也明确提及，它会从标题中删除“Content-Type”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:37:11.433

您可以尝试使用 Camel 2.9.4，因为自该版本以来我们已经修复了许多错误。

# javascript - javascript语法错误

> ID：13683040
> 
> 赞同：0
> 
> 时间：2012-12-03T12:14:28.877
> 
> 标签：javascript, jquery

我在尝试在我的网站上实现一个插件时遇到了一些麻烦，我对 js 很陌生，而且我在理解语法时遇到了一些麻烦。我在下面遇到问题的部分是线条`#mm-prev`和`#mm-next`..我添加了这些位正确吗？

```
<script type="text/javascript">  
            jQuery(document).ready(function(){  
              jQuery(".jbgallery").jbgallery({
                 fullscreen: false,
                 style : "zoom",
                 randomize : 1,
                 menu : true,
                 slideshow:false,
                 caption : false
              });  

              jQuery("#mm-prev").click(function(){
                   obj.left(); 
              }); 

              jQuery("#mm-next").click(function(){
                  obj.right(); 
              }); 
        });  
</script> 
```

最后一部分的 html 是

```
 <a id="mm-next" href="#">NEXT</a>
        <a id="mm-prev" href="#">PREV</a> 
```

对于一些背景，有问题的脚本是[JBgallery](http://www.ymic3dworld.com/lightwindow2/jbgallery-3.0/index.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:21:34.520

而不是`obj`看起来你应该选择`.jbgallery`：

```
 jQuery("#mm-prev").click(function(){
               jQuery('.jbgallery').left(); 
          }); 

          jQuery("#mm-next").click(function(){
               jQuery('.jbgallery').right(); 
          }); 
```

# functional-programming - 理解嵌套函数逻辑的更好方法（Currying）

> ID：13683043
> 
> 赞同：1
> 
> 时间：2012-12-03T12:14:35.340
> 
> 标签：functional-programming, ocaml

我正在学习[Jason Hickey 的 Objective Caml 简介](http://www.cs.caltech.edu/courses/cs134/cs134b/book.pdf)。**只是对嵌套函数（currying）**有疑问。

有一个现有的问题[如何理解 Haskell 中的“Currying”？](https://stackoverflow.com/questions/10357668/how-to-understand-the-currying-in-haskell)，但我想我正在寻找略有不同的问题的答案。

* * *

它说我们可以`let sum = fun i j -> i + j;;`写成`let sum = fun i -> fun j -> i + j;;`

我的问题很简单：

**我可以这样理解上面的定义`let sum = fun i -> i + fun j -> j;;`吗？**

我知道它不会通过编译器，但我只是尝试将这种映射`OCaml function definition`到`mathematics functions`.

在我上面的想象中，我们可以很容易地在数学中编写函数，`f(i) = i + g(j); and g(j) = j`.

**我应该总是做这种逻辑映射以便于理解吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:39:50.443

你的想象并不正确：`f(i) = i + g(j)`并不像`j`这里未定义的那样有意义。

一个正确的理解方法`fun i j -> foo`是把它看作是更明确的符号的一些方便的语法糖`fun i -> fun j -> foo`。

以下所有定义完全相同：

```
let sum i j = i + j
let sum i = fun j -> i + j
let sum = fun i -> (fun j -> i + j)
let sum = fun i -> fun j -> i + j
let sum = fun i j -> i + j

let sum i =
  let add_i = fun j -> i + j in
  add_i 
```

这在数学上可以写成 (i ↦ (j ↦ i+j))，作为函数空间的一个元素 (ℕ → (ℕ → ℕ))。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:00:05.657

OCaml 函数可以直接映射到数学符号或从数学符号映射。但是，您需要意识到数学符号是模棱两可的。`f(i)`函数的值 ,特定值`i`和函数`f`本身之间没有明显的区别。`f(i)`当一个人表示函数`f`本身时，通常会写。（“让我们考虑一个函数 f(i)=i+1... 这个函数是...”）要在 OCaml 中编写正确的代码，您必须清楚地看到您是在使用函数本身还是使用值的一个功能。

当你用数学符号说，“考虑函数`f(i,j)=i+g(j) where g(j)=j`，你正在写函数的值。在 OCaml 中，这被翻译成

```
 let f i j = 
       let g j = j in 
       i + g j;; 
```

或者

```
 let f = 
     let g = fun j -> j 
     in
     fun i j -> i + g j;; 
```

如果您正在尝试编写`let sum = fun i -> i + fun j -> j;;`，那么在数学符号中您是在说“考虑`sum`这样的函数`sum(i) = i + g`，其中 g 是由 定义的函数`g(j)=j`。” 这在数学上是不正确的：您不能将*整数值* `i`和*函数* `g`相加。您只能在某个其他整数上添加一个整数`i`和函数的*值*。严格来说，表达式“ ”是未定义的。要么你想写，要么，但不是。在数学中如此，在 OCaml 中也是如此。`g``j``i+g``i + g(i)``i+g(j)``i+g`

# java - 返回具有尊重值的对象列表

> ID：13683045
> 
> 赞同：1
> 
> 时间：2012-12-03T12:14:42.980
> 
> 标签：java

我需要创建应该返回从这个属性构建的对象的类

```
Object object;
String Name;
String ChildName;
String TagName; 
```

这里的问题是我需要返回列表，即在每个对象的列表中都有 name,child ... 字符串。

我怎么能在java中做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T12:20:52.367

我想你在问一个返回给定参数的对象列表的方法。然后你可以创建你的类，如下所示：

```
public class MyClass {
    Object object;
    String Name;
    String ChildName;
    String TagName;

    // methods
} 
```

然后在您想要返回列表的另一种方法中，您可以使用它，如下所示：

```
List<MyClass> myMethod() {
  List<MyClass> list = new ArrayList<MyClass>();      

  // Do whatever you want.

  return list;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T12:26:16.547

我不太确定你在问什么，但这里是你的对象列表

```
public class MyObject{
    Object object;
    String name;
    String childName;
    String tagName;

    public MyObject(Object object, String name, String childName, String tagName){
        this.object = object;
        this.name = name;
        this.childName = childName;
        this.tagName = tagName;
    }

    @Override
    public String toString(){
        return "object:\t" + object.toString() + "\tname:\t" + name + "\tchildName:\t" + childName + "\ttagName:\t" + tagName;
    }
}

static void main(String[] args){
    List<MyObject> myList = new ArrayList<MyObject>();
    for(int i = 0; i < 10; i++){
        myList.add(new MyObject(i, i, i, i));
    }

    for(int i = 0; i < 10; i++){
        System.out.println(myList.get(i).toString());
    }
} 
```

我也相信在java中，你把你的变量和方法放在camelCase中，即你从小写开始，而对于任何新词，你把它放在大写中。我认为这就是为什么您的代码以蓝色显示变量的原因，这只是一个标准

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T12:22:16.320

```
class MyCustomClass{
   Object obj;
   String Name;
   String ChildName;
   String TagName;
}

Class X{

   public List<MyCustomClass> GetList(){
      List<MyCustomClass> list = new ArrayList<MyCustomClass>();
      MyCustomClass objClass = new MyCustomClass();
      objClass.obj = new Object();
      objClass.Name = "xyz";
      objClass.ChildName = "abc";
      objClass.TagName = "tagg";
      list.add(_objClass);

      //Make new objects of MyCustomClass here and add to the list
      return list;
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T12:37:11.190

如果我理解正确，您只需要

用这个类的所有属性的List返回方法声明这个类

```
public class SimpleClass {
    private Object object;
    private String name;
    private String childName;
    private String tagName;

    public SimpleClass(Object object, String name, String childName, String tagName) {
        this.object = object;
        this.name = name;
        this.childName = childName;
        this.tagName = tagName;
    }

    public List getAttributeList(){
        List attributes = new ArrayList();
        attributes.add(object);
        attributes.add(name);
        attributes.add(childName);
        attributes.add(tagName);

        return attributes;
    }
} 
```

或者您是否需要 SimpleClass 对象列表？

# ios - Projects 中的多个子项目

> ID：13683046
> 
> 赞同：1
> 
> 时间：2012-12-03T12:14:43.323
> 
> 标签：ios, xcode, xcode4.5

我的项目中有一些 API/类，我想添加两个子项目（iPad/iPhone），这样这些子项目只实现 UI 和应用程序委托的东西，并且只*引用*我现有的 API/类。最好的方法是什么？

谢谢。

# c# - 多个生产者/单个消费者，无锁处理异步？

> ID：13683057
> 
> 赞同：4
> 
> 时间：2012-12-03T12:15:22.270
> 
> 标签：c#, multithreading

我得到了以下代码（在多线程环境中效果不佳）

```
public class SomeClass
{
    private readonly ConcurrentQueue<ISocketWriterJob> _writeQueue = new ConcurrentQueue<ISocketWriterJob>();
    private ISocketWriterJob _currentJob;

    public void Send(ISocketWriterJob job)
    {
        if (_currentJob != null)
        {
            _writeQueue.Enqueue(job);
            return;
        }

        _currentJob = job;
        _currentJob.Write(_writeArgs);

        // The job is invoked asynchronously here
    }

    private void HandleWriteCompleted(SocketError error, int bytesTransferred)
    {
        // error checks etc removed for this sample.

        if (_currentJob.WriteCompleted(bytesTransferred))
        {
            _currentJob.Dispose();
            if (!_writeQueue.TryDequeue(out _currentJob))
            {
                _currentJob = null;
                return;
            }
        }

        _currentJob.Write(_writeArgs);

        // the job is invoked asycnhronously here.
    }
} 
```

如果当前没有正在执行的作业，则 Send 方法应该异步调用作业。如果有的话，它应该排队工作。

锁定`_currentJob`分配/检查将使一切正常。但是有没有一种无锁的方法来解决它？

**更新**

我正在使用套接字，它是`SendAsync`发送信息的方法。这意味着我不知道`Send()`调用该方法时是否有写/作业挂起。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T12:49:03.140

考虑使用[`CompareExchange`](http://msdn.microsoft.com/en-us/library/bb297966.aspx)关于预期状态转换的假设。无需使用 ConcurrentQueue，因为现在我们可以控制同步。

**更新**以使用状态机
**再次更新**以删除不需要`Interlocked.Exchange`的（用于状态分配）。

```
public class SomeClass
{
    private readonly Queue<ISocketWriterJob> _writeQueue = new Queue<ISocketWriterJob>();
    private ISocketWriterJob _currentJob;
    private enum State { Idle, Active, Enqueue, Dequeue };
    private State _state;

    public void Send(ISocketWriterJob job)
    {
        bool spin = true;
        while(spin)
        {
            switch(_state)
            {
            case State.Idle:
                if (Interlocked.CompareExchange(ref _state, State.Active, State.Idle) == State.Idle)
                {
                    spin = false;
                }
                // else consider new state
                break;
            case State.Active:
                if (Interlocked.CompareExchange(ref _state, State.Enqueue, State.Active) == State.Active)
                {
                    _writeQueue.Enqueue(job);
                    _state = State.Active;
                    return;
                }
                // else consider new state
                break;
            case State.Enqueue:
            case State.Dequeue:
                // spin to wait for new state
                Thread.Yield();
                break;
            }
        }

        _currentJob = job;
        _currentJob.Write(_writeArgs);

        // The job is invoked asynchronously here
    }

    private void HandleWriteCompleted(SocketError error, int bytesTransferred)
    {
        // error checks etc removed for this sample.

        if (_currentJob.WriteCompleted(bytesTransferred))
        {
            _currentJob.Dispose();

            bool spin = true;
            while(spin)
            {
                switch(_state)
                {
                case State.Active:
                    if (Interlocked.CompareExchange(ref _state, State.Dequeue, State.Active) == State.Active)
                    {
                        if (!_writeQueue.TryDequeue(out _currentJob))
                        {
                            // handle in state _currentJob = null;
                            _state = State.Idle;
                            return;
                        }
                        else
                        {
                            _state = State.Active;
                        }
                    }
                    // else consider new state
                    break;

                case State.Enqueue:
                    // spin to wait for new state
                    Thread.Yield();
                    break;

                // impossible states
                case State.Idle:
                case State.Dequeue:
                    break;
                }
            }
        }

        _logger.Debug(_writeArgs.GetHashCode() + ": writing more ");
        _currentJob.Write(_writeArgs);

        // the job is invoked asycnhronously here.
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:15:57.477

目前，您的生产者和消费者之间的分歧有点模糊；您有“将作业放入队列或立即使用”和“从队列中使用作业，如果没有则退出”；更清楚的是“将作业放入队列”和“从队列中使用作业（最初）”和“从队列中使用作业（一旦作业完成”）。

这里的诀窍是使用 a[`BlockingCollection`](http://msdn.microsoft.com/en-us/library/dd267312.aspx)这样您就可以*等待*工作出现：

```
BlockingCollection<ISocketWriterJob> _writeQueue =
         new BlockingCollection<ISocketWriterJob>(); 
```

让线程`Send`从字面上调用只是排队一个作业：

```
public void Send(ISocketWriterJob job)
{
    _writeQueue.Add(job);
} 
```

然后有*另一个*只消耗作业的线程。

```
public void StartConsumingJobs()
{
    // Get the first job or wait for one to be queued.
    _currentJob = _writeQueue.Take();

    // Start job
}

private void HandleWriteCompleted(SocketError error, int bytesTransferred)
{
    if (_currentJob.WriteCompleted(bytesTransferred))
    {
        _currentJob.Dispose();

        // Get next job, or wait for one to be queued.
        _currentJob = _writeQueue.Take();
    }

    _currentJob.Write(_writeArgs);

   // Start/continue job as before
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T18:26:18.680

我不认为你会从使用无锁技术中获得什么。即使使用简单的锁，您也可以保持在用户模式，因为`Monitor.Enter`/`Monitor.Exit`使用了首先旋转，并且只有当您在等待状态等待更长时间时，它们才会转换到内核模式。

这意味着基于锁的技术将与任何无锁技术一样好，因为您可以锁定仅用于将作业存储到队列中并从中取回，但是您将拥有每个开发人员都可以使用的清晰和健壮的代码理解：

```
public class SomeClass
{
    // We don't have to use Concurrent collections
    private readonly Queue<ISocketWriterJob> _writeQueue = new Queue<ISocketWriterJob>();
    private readonly object _syncRoot = new object();
    private ISocketWriterJob _currentJob;

    public void Send(ISocketWriterJob job)
    {
        lock(_syncRoot)
        {
            if (_currentJob != null)
            {
                _writeQueue.Enqueue(job);
                return;
            }
            _currentJob = job;
        }

        // Use job instead of shared state
        StartJob(job);
    }

    private void StartJob(ISocketWriterJob job)
    {
       job.Write(_writeArgs);
       // The job is invoked asynchronously here
    }

    private void HandleWriteCompleted(SocketError error, int bytesTransferred)
    {
        ISocketWriterJob currentJob = null;

        // error checks etc removed for this sample.
        lock(_syncRoot)
        {
           // I suppose this operation pretty fast as well as Dispose
           if (_currentJob.WriteCompleted(bytesTransferred))
            {
               _currentJob.Dispose();
              // There is no TryDequeue method in Queue<T>
              // But we can easily add it using extension method
              if (!_writeQueue.TryDequeue(out _currentJob))
              {
                  // We don't have set _currentJob to null
                  // because we'll achieve it via out parameter
                  // _currentJob = null;
                  return;
              }
           }

           // Storing current job for further work
           currentJob = _currentJob;
        }

        StartJob(currentJob);
    }
} 
```

无锁是一种优化，与任何其他优化一样，您应该首先测量性能，以确保您对简单的基于锁的实现有问题，并且只有当它是真的时 - 使用一些较低级别的技术，如无锁。性能和可维护性是一个经典的权衡，您应该非常谨慎地选择。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-03T12:18:44.727

您可以将当前作业标记为`volatile`应确保当前线程获得最新状态的作业。不过一般来说，锁定是有利的。

```
private volatile ISocketWriterJob _currentJob; 
```

# java - 通过单击 TextView 我想查看项目列表

> ID：13683058
> 
> 赞同：-2
> 
> 时间：2012-12-03T12:15:25.373
> 
> 标签：java, android, android-layout

在我的 android 应用程序中，我想在单击 Textview 时显示项目列表，它会显示项目列表，我可以从该列表中添加和删除项目。我如何通过java代码做到这一点请指导。我会非常感谢你

我的代码是：

```
 <LinearLayout 
         android:orientation="vertical"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:gravity="center">

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/cus_name"
        android:gravity="center"
        android:clickable="true"
        android:focusable="true"
        android:onClick="onClick"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/cus_name_txta"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:textAppearance="?android:attr/textAppearanceLarge"/>

    </LinearLayout>

   <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:gravity="center">

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="@string/contact_no"
        android:clickable="true"
        android:focusable="true"
        android:onClick="onClick"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView 
        android:id="@+id/contact_no_txta"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center" />

   </LinearLayout>

    <LinearLayout 
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:orientation="vertical"
       android:gravity="center">

    <TextView
             android:id="@+id/textView4"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="@string/ticket_no"
             android:clickable="true"
             android:focusable="true"
             android:gravity="center"
             android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView 
        android:id="@+id/ticket_no_txta"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:textAppearance="?android:attr/textAppearanceLarge" />

   <requestFocus />

    </LinearLayout>

   <LinearLayout
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:orientation="vertical"
      android:gravity="center">

    <TextView
        android:id="@+id/textView5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:clickable="true"
        android:focusable="true"
        android:gravity="center"
        android:text="@string/task_detail"
        android:textAppearance="?android:attr/textAppearanceLarge" />

         <TextView
             android:id="@+id/task_detail_txt"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:gravity="center"/>

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:23:02.500

如果我理解正确，我会建议扩展一个`Dialog`自定义对话框，只要用户点击就会弹出`TextView`（如 Imran Khan 的回答中所包含的）。此对话框将包含`ListView`处理列表所需的任何其他内容。我前一段时间使用的这种方法的示例：

```
public class LogOverlay extends Dialog{
private Server mItem;
private boolean end=false;  
private int mLimitHigh = 15;
private int mLimitLow = 0;
private ListView mListView;
private LogListAdapter mAdapter;        
private ArrayList<LogUnit> mLog = new ArrayList<LogUnit>();
private boolean mScroll;    
private Context context;
ProgressDialog pd;

public LogOverlay(Context context,Session session,Server server) {
    super(context);     
    this.setContentView(R.layout.overlay_logs);

    mListView=(ListView) this.findViewById(R.id.log_list);
    mAdapter = new LogListAdapter(context, new ArrayList<LogUnit>(), new String[] {});

    mListView.setDivider(new GradientDrawable(Orientation.RIGHT_LEFT, colors));
    mListView.setDividerHeight(1);
    mListView.setAdapter(mAdapter);
    mListView.setOnScrollListener(new OnScrollListener() {
        @Override
        public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
        ....

                }
            }

        }

        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {
            // TODO Auto-generated method stub

        }
    });

} 
```

# ios - 如何更新游戏中心排行榜中的分数，即使它是较低的游戏中心

> ID：13683059
> 
> 赞同：0
> 
> 时间：2012-12-03T12:15:26.100
> 
> 标签：ios, game-center, leaderboard

> **可能重复：**
> [是否有可能拥有游戏中心“LowestScore”排行榜？](https://stackoverflow.com/questions/7780649/is-it-possible-to-have-a-game-center-lowestscore-leaderboard)

我的排行榜包含您当前拥有的金币数量。

即使分数低于以前，是否可以强制服务器更新分数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:17:40.823

不会。为每个排行榜存储的分数是有史以来报告的最高分数。当报告的分数低于已存储的值时，它将被忽略。

GKScore 对象中有一个上下文字段，您可以在其中存储金币的数量，但只有当分数高于前一个高点时，Game Center 才会保存它，因此可能不是您要查找的内容。

另一种方法是找出一种将黄金数量存储在设备文件中的方法。最简单的方法（编程方式）是使用 [NSUserDefaults standardUserDefaults]。但是默认文件可以由用户编辑（更改），因此知道如何操作的玩家会给自己更多的金币。为了避免作弊，您必须以一种让您检测到它已更改的方式对值进行编码，然后当玩家更改该值时，您会发出警告，指出游戏状态已损坏并将游戏重置为开始。做这一切的麻烦抵消了 NSUserDefaults 的简单性。还有其他方法可以将值存储在设备上，这些方法很难改变，但也更难学习。

# email - 设置脚本以在电子邮件通知中包含谷歌文档表单数据

> ID：13683060
> 
> 赞同：8
> 
> 时间：2012-12-03T12:15:26.087
> 
> 标签：email, google-apps-script, google-docs, google-forms

我已经使用 googledocs 设置了一个表单。我只想将输入到表单中的实际数据通过电子邮件发送给我，而不是建议表单已完成的通用回复。

我没有代码等方面的技能或经验，但我确信我可以得到这个排序。我已经花了几个小时+几个小时，但没有任何运气。

我的表单非常基本。它有 5 个字段。其中4个只是文本回复，还有一个多项选择。

我在网上找到了这个tute（http://www.labnol.org/internet/google-docs-email-form/20884/），我认为它总结了我正在尝试做的事情，但一直没能得到它去工作。

从这个网站我输入了以下代码：

```
function sendFormByEmail(e) 
{    
  var email = "reports.mckeir@gmail.com"; 

  var subject = "Google Docs Form Submitted";  

  var s = SpreadsheetApp.getActiveSheet();
  var headers = s.getRange(1,1,1,s.getLastColumn()).getValues()[0];    
  var message = "";    

 for(var i in headers)
message += headers[i] + ' = '+ e.namedValues[headers[i]].toString() + "\n\n"; 

  MailApp.sendEmail(email, subject, message); 
} 
```

对此，我得到以下回复：->

> 您的脚本 Contact Us Form Mailer 最近未能成功完成。故障摘要如下所示。要为此脚本配置触发器，或更改您的设置以接收未来的失败通知，请单击此处。

该脚本由文档 100% Club 使用。

细节：

```
Start               Function        Error Message                                                       Trigger     End
12/3/12 11:06 PM    sendFormByEmail TypeError: Cannot call method "toString" of undefined. (line 12)    formSubmit  12/3/12 11:06 PM 
```

有没有人能帮我解释一下这件事？我猜我不包括一些需要的数据，但老实说我不知道​​。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T06:33:47.247

解决方法[http://www.labnol.org/internet/google-docs-email-form/20884/](http://www.labnol.org/internet/google-docs-email-form/20884/) 您必须设置应用程序脚本才能将数据作为电子邮件转发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-01T02:44:03.340

我会指出上面的评论为我解决了这个问题：[https ://stackoverflow.com/a/14576983/134335](https://stackoverflow.com/a/14576983/134335)

我把那个帖子更进一步：

*   我删除了正常的通知。应用程序脚本现在使通用文本变得多余且无用
*   我修改了脚本以实际解析结果并相应地构建响应。

```
函数 sendFormByEmail(e)
{
  var toEmail = "changeme";
  变量名称 = "";
  变种电子邮件=“”；

  // 可选但更改以下变量
  // 为 Google Docs 电子邮件设置自定义主题
  var subject = "已提交 Google 文档表单";
  var 消息 = "";

  // 变量 e 将所有表单值保存在一个数组中。
  // 遍历数组并将值附加到正文。

  var s = SpreadsheetApp.getActiveSheet();
  var headers = s.getRange(1,1,1,s.getLastColumn()).getValues()[0];

  // 感谢 Henrique Abreu 修复了排序顺序
  for（标题中的var i）{
    如果（标题[i] =“名称”）{
      name = e.namedValues[headers[i]].toString();
    }
    if (headers[i] = "Email") {
      email = e.namedValues[headers[i]].toString();
    }
    if (headers[i] = "主题") {
      主题 = e.namedValues[headers[i]].toString();
    }
    if (headers[i] = "消息") {
      message = e.namedValues[headers[i]].toString();
    }
  }

  // 参见 https://developers.google.com/apps-script/reference/mail/mail-app#sendEmail(String,String,String,Object)
  var mailOptions = {
    姓名：姓名，
    回复：电子邮件，
  };

  // 这是 Google Apps Script 的 MailApp 服务
  // 发送电子邮件。您也可以在此处使用 GmailApp。
  MailApp.sendEmail(toEmail, 主题, 消息, mailOptions);

  // 观看以下视频了解详情
  // http://youtu.be/z6klwUxRwQI

  // 阿米特·阿加瓦尔 - www.labnol.org
}

```

示例中使用的脚本非常通用，但对更改非常有弹性，因为消息是作为提交的表单字段的键/值对构建的。

如果您使用我的脚本，则必须调整 for 循环 if 语句以逐字匹配您的字段。您还需要编辑 toEmail 变量。

再次感谢您的提问和回答。我正要放弃谷歌表单，因为一般的响应对于我想做的事情来说是远远不够的。

最后，针对上述实际问题，“toString of undefined”具体表示其中一个表单字段被提交为空白。如果我不得不猜测，我会说作者只将它用于需要所有字段的表单，或者会进行快速未定义检查。

像下面这样的东西会起作用：

```
for（标题中的var i）{
  var formValue = e.namedValues[headers[i]];
  var formValueText = "";
  如果（typeof（formValue）！=“未定义”）{
    formValueText = formValue.toString();
  }
  message += headers[i] + ' = '+ formvalueText + "\n\n";
}

```

我没有对此进行精确测试，但这是一种非常标准的方法，可以确保在尝试像 toString() 这样显然不起作用的方法之前定义对象。

这也可以解释 Jon Fila 的回答。该脚本盲目地假设响应中的所有标题行都是由表单发送的。如果不需要任何字段或电子表格中的字段不再存在于表单中，您将获得大量未定义的对象。

该脚本本可以编写得更好，但我不会责怪作者，因为它显然只是一个概念证明。他们提到了replyTo更正但没有给出任何实施示例的事实非常清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:13:45.293

如果这是 Google 表单，您的电子表格中是否有任何不在表单上的额外列？如果您删除那些额外的列，那么它开始为我工作。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-03T23:43:06.290

您不需要使用脚本。只需转到 Google 电子表格上的工具 >> 通知规则。每次更改文档时，您都可以在此处更改设置以接收包含所需信息的电子邮件。

# android - Android 应用程序在应用程序从最小化恢复后保留状态

> ID：13683061
> 
> 赞同：0
> 
> 时间：2012-12-03T12:15:27.993
> 
> 标签：android

我有一个应用程序，它从启动屏幕开始，然后导航到其他活动。如果我在特定活动中按下主页按钮，应用程序将被最小化。同样，如果我单击应用程序图标，应用程序将从启动屏幕启动。我想从按下主页按钮的活动中恢复我的应用程序。如何做到这一点？

```
 package com.xyz.user.login;

  import android.app.Activity;
  import android.app.AlertDialog;
  import android.content.DialogInterface;
  import android.content.Intent;
  import android.os.Bundle;
  import android.view.Menu;
  import android.view.MenuInflater;
  import android.view.MenuItem;
  import android.view.View;
  import android.widget.ImageButton;

  public class ResetPasswordActivity extends Activity {
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // TODO Auto-generated method stub
    MenuInflater menuInflater = getMenuInflater();
    menuInflater.inflate(R.layout.menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.logout:
        // Single menu item is selected do something
        // Ex: launching new activity/screen or show alert message
        PopIt("Are you sure you want to exit?");
        return true;

    default:
        return super.onOptionsItemSelected(item);
    }
}

private void PopIt(String string) {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage(string)
            .setCancelable(false)
            .setPositiveButton("Yes",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            Intent intent = new Intent(
                                    getApplicationContext(),
                                    SignInActivity.class);
                            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            intent.putExtra("EXIT", true);
                            startActivity(intent);
                        }
                    })
            .setNegativeButton("No", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                }
            });
    AlertDialog alert = builder.create();
    alert.show();

}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.reset_password);
     ImageButton imgRPass=(ImageButton)findViewById(R.id.imgChangePass);
     imgRPass.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
        Intent intent=new Intent(ResetPasswordActivity.this,ResetPasswordMessageActivity.class);
        startActivity(intent);
        }
    });
     ImageButton imgBack=(ImageButton)findViewById(R.id.imgbtnBackFromResetPass);
     imgBack.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
            finish();
            }
        });
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:27:41.290

也许您的活动中的代码调用了`finish()`in`onStop()`或`onPause()`。这会在 Activity 最小化时破坏它并导致应用程序重新启动。还有其他步骤可以确保恢复状态，但这是一个开始寻找的好地方。

您可以尝试将这段代码放在那里以跟踪正在发生的事情。

```
private static final String TAG = "ResetPasswordActivity";
@Override public void onStart() {
    Log.d(TAG, "onStart:");
    super.onStart();
}  
@Override public void onResume() {
    Log.d(TAG, "onResume:");
    super.onResume();
}
@Override public void onPause() {
    Log.d(TAG, "onPause:");
    super.onPause();
}
@Override public void onStop() {
    Log.d(TAG, "onStop:");
    super.onStop();
}
@Override public void onDestroy() {
    Log.d(TAG, "onDestroy:");
    super.onDestroy();
} 
```

虽然我不明白为什么应该执行它们，但那里有调用`finish`和调用。`startActivity`我`Log`每个人都会发表声明。然后再试一次，看看当你最小化并重新启动应用程序时 Logcat 输出的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:38:12.687

将 AndroidManifest.xml 写入每个活动选项`android:launchMode="singleTop"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:34:46.713

你在谈论android的默认行为。当您按下主页按钮应用程序被最小化并且当您单击应用程序图标时，默认情况下应用程序从同一屏幕启动，因为它处于暂停模式并在后台运行。但是，您在下次启动时会出现启动画面，这意味着您的活动被 android（由于内存限制）或崩溃以某种方式杀死。有关详细信息，请参阅您的 logcat。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-16T09:44:35.413

确保`android:noHistory="true"`清单文件的活动标签中没有。有了它，当您最小化您的应用程序时，Android 不会保持活动状态

# windows-8 - 为 windows 8 手机开发 Mediaplayer

> ID：13683066
> 
> 赞同：-4
> 
> 时间：2012-12-03T12:15:53.873
> 
> 标签：windows-8, windows-mobile, windows-phone, windows-phone-8

我是 windows-8 手机开发的新手。我的第一个任务是为 windows 8 手机开发媒体播放器。谁能指导我应该如何进行？媒体播放器的要求如下。

1.  Mediaplayer 应该能够从服务器流式传输音乐。
2.  我们需要通过媒体播放器缓存最后播放的音乐曲目。
3.  播放下一个、播放上一个、播放列表等功能。

等待你的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:48:12.213

你所拥有的是编码的基本练习。

仔细阅读 Windows Phone 的媒体概述。 [http://msdn.microsoft.com/en-us/library/ff402550(VS.92).aspx](http://msdn.microsoft.com/en-us/library/ff402550(VS.92).aspx)。您必须实现缓存，可能在隔离存储中。playnext，playprevious 你也必须这样做。

通过电话部分的 genapp 上的一些基本教程进行一些免费培训。 [http://bit.ly/30tolaunch](http://bit.ly/30tolaunch)。

# navigation - 在 opencart 中创建基于类别的 Subnav

> ID：13683067
> 
> 赞同：2
> 
> 时间：2012-12-03T12:15:54.917
> 
> 标签：navigation, opencart, categories

这是我在 Opencart 中尝试做的事情，我需要创建一个仅基于几个特定类别的子导航。

所以我认为我需要做的是复制 opencart 处理顶部中殿的方式，然后为所需的特定类别放入过滤器。

目前我已经对我需要的链接进行了硬编码，但宁愿拥有这个动态的，这样在管理员中添加的任何子猫都会将 wuthout gong 填充到代码中。

[这是我想让它工作的网站](http://ravenspringcouk.ichost3.co.uk/)

欢迎任何关于如何最好地实现这一目标的想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:16:51.377

这可以通过简单地从一个类别中选择所需的值来获得其子类别来完成。假设您的子类别父级的类别 ID 是 5，您会这样做

```
<?php

$this->load->model('catalog/category');
$result = $this->model_catalog_category->getCategories(5);

?> 
```

然后遍历类别 ( `$results`) 并根据需要输出它们

# javascript - 在javascript函数上添加多个变量？

> ID：13683069
> 
> 赞同：0
> 
> 时间：2012-12-03T12:16:02.577
> 
> 标签：javascript, jquery, html, parsing, variables

如何在 jquery 函数上传递多个变量？像这样：

```
$(".link1",".link2").click(function(event){

} 
```

也试过：

```
$(".link1"),$(".link2").click(function(event){

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T12:17:56.397

采用

```
$(".link1, .link2").click(function(event){ 
```

或者

```
$(".link1").add(".link2").click(function(event){ 
```

逗号分隔符在这里定义：[多重选择器](http://api.jquery.com/multiple-selector/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T12:18:28.313

多个选择器只需要在选择器字符串中用逗号分隔。

```
$(".link1, .link2").click(function(event){

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T12:19:56.943

使用`.on`，并将额外的事件作为参数传递给该方法：

```
$('.link1, link2').on('click',{some:'argument'},function(e)
{
    console.log(e.data);//<-- object literal {some:'arguments'}
}); 
```

[在这里阅读所有相关信息](http://api.jquery.com/on/)

# android - Android Sim 跟踪器代码

> ID：13683071
> 
> 赞同：0
> 
> 时间：2012-12-03T12:16:12.023
> 
> 标签：android, tracking

喂..

我正在制作一个应用程序，我在其中检测 SIM 是否已更改..？在安装我的应用程序时，我将当前 SIM 序列号存储在共享首选项中。在启动时，我已经注册了一个广播接收器。在`onReceive()`方法中，我正在访问当前的 SIM 序列号并将其与安装时存储的序列号进行比较，以下是我的接收器代码：

```
 package com.secuirity.sms;

    import org.apache.harmony.xnet.provider.jsse.GMailSender;

    import android.content.BroadcastReceiver;
    import android.content.Context;
    import android.content.Intent;
    import android.content.SharedPreferences;
    import android.os.AsyncTask;
    import android.telephony.SmsManager;
    import android.telephony.TelephonyManager;
    import android.util.Log;

    public class BootUpReciever extends BroadcastReceiver{

    Context context;
    String email;
    String currentSimSerial;
    SharedPreferences settings;
    SmsManager smsMgr = SmsManager.getDefault();
    public static final String PREFS_NAME = "MyPrefsFile";

    @Override
    public void onReceive(Context context, Intent intent) {

        settings = context.getSharedPreferences(PREFS_NAME, 0);
        String storedSimSerial = settings.getString("storedSimSerial", null);
        Log.d("Stored Sim Serial::",storedSimSerial);

        TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
        currentSimSerial = tm.getSimSerialNumber();
        Log.d("Current Sim Serial","::"+currentSimSerial);
        String trustedNum = settings.getString("cellno", null);
        email = settings.getString("email", null);

        if(currentSimSerial == storedSimSerial){

        }else{
            Log.d("Sim changed","!!!");
            new GmailAsync().execute("");
            String sms = "Sim card has changed, " +
                    "Sim Serial Number of this card is\n"+currentSimSerial+
                    "Network Operator"+tm.getNetworkOperatorName();
            smsMgr.sendTextMessage(trustedNum, null,sms, null, null);
        }

        Intent sms = new Intent(context, SMSReceiver.class);
        sms.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(sms);

        Intent netAvailability = new Intent(context, CheckingNetworkAvailability.class);
        netAvailability.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(netAvailability); 
    }
    public class GmailAsync extends AsyncTask<String, Void, String>{

        @Override
        protected String doInBackground(String... params) {
            // TODO Auto-generated method stub
            String mail_body = "Sim serial number is "+currentSimSerial;
            String subject = "Your Sim has changed!!!";         
            GMailSender sender = new GMailSender("securemob.viasms@gmail.com", "smsfun890");
            try {
                sender.sendMail(subject,
                        mail_body+"\nThanks for using Mobile Security App",
                        "securemob.viasms@gmail.com",
                        email,null);
            } catch (Exception e) {
                Log.e("SendMail", e.getMessage(), e);
            }
            return null;
        }
        @Override
        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            Log.d("Mail","Sent");
        }
    }
} 
```

但它不工作.... :(:(:( 我有以下权限 READ_PHONE_STATE" 和 "RECEIVE_BOOT_COMPLETED"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:07:23.243

嗨，伙计们，我得到了 BOOT UP Receiver 的解决方案.... 当 android 手机启动时，这个事件会广播到每个应用程序，但是与存储在 SD 卡上的应用程序相比，安装在内部存储器中的应用程序响应速度很快。因此解决方案是

```
android:installLocation="internalOnly" 
```

在清单文件中作为清单属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:25:46.053

我看不出您的代码有任何问题，但我首先要检查的是您是否有权读取清单中设置的 SIM 卡。

# google-chrome - CSS3 -webkit 不同于 vista - windows 7

> ID：13683082
> 
> 赞同：1
> 
> 时间：2012-12-03T12:16:51.580
> 
> 标签：google-chrome, css

-webkit 转换不适用于 vista 上的 chrome。在 chrome 的 windows 7 上似乎很好？更具体的是：（不适用于 vista chrome）：

```
-webkit-backface-visibility:hidden; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:09:11.447

[我在这里](https://stackoverflow.com/questions/13684522/backface-visibilityhidden-bug-in-chrome/15248243#15248243)回答了这个问题

所以尝试：

```
-webkit-backface-visibility: visible;
-webkit-backface-visibility: hidden; 
```

我希望这会对你有所帮助。

# asp.net-mvc-3 - Knockout JS 和逗号作为小数分隔符

> ID：13683086
> 
> 赞同：1
> 
> 时间：2012-12-03T12:17:01.933
> 
> 标签：asp.net-mvc-3, knockout.js, knockout-mvc

我在我的项目中使用[Knockout MVC](http://knockoutmvc.com/)（ASP.NET MVC3，Razor）。我现在找不到更改十进制格式。我想使用逗号作为小数分隔符。当我使用非敲除 Razor 助手绑定数据时，它会正确呈现它（使用逗号），但是当我使用敲除绑定绑定时，它会使用点作为逗号分隔符来渲染数字。

如何更改将使用逗号的十进制格式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T16:42:02.643

您正在查看服务器和客户端语言环境之间的差异。

您的 .NET 代码根据服务器区域设置格式化数字，而您的 JS 代码根据浏览器区域设置格式化数字。

尝试在浏览器中更改语言环境/区域。

**编辑：**

*（我将离开上述内容，以防它帮助其他人，即使它没有帮助你）*

问题是您对服务器端和客户端之间差异的理解。

**Razor 代码**在服务器上执行并“翻译”成 HTML。

然而，服务器将 Javascript 视为文本，只是它发送的 HTML 文档的一部分。

**Javascript**在客户端机器（即浏览器）上执行。

Razor Helper 如何格式化数字取决于服务器上设置的区域设置。然而，javascript 将根据浏览器中设置的区域设置数字格式。

要**强制**Knockout/Javascript 以您想要的方式格式化数字而不管区域设置（在客户端），您可以使用以下方法在其核心编写[自定义绑定：](http://knockoutjs.com/documentation/custom-bindings.html)

```
function formatWithComma(x, precision, seperator) {
    var options = {
        precision: precision || 2,
        seperator: seperator || ','
    }
    var formatted = x.toFixed( options.precision );
    var regex = new RegExp('^(\\d+)[^\\d](\\d{' + options.precision + '})$');
    formatted = formatted.replace(regex, '$1' + options.seperator + '$2');
    return formatted;
} 
```

所以你的绑定看起来像这样：

```
ko.bindingHandlers.commaDecimalFormatter = {
    init: function(element, valueAccessor) {

        var observable = valueAccessor();

        var interceptor = ko.computed(function() {
            return formatWithComma( observable() );
        }

        ko.applyBindingsToNode( element , { value: interceptor } );

    }
} 
```

然后在你的 Razor 视图中：

```
@ko.Bind.Custom("commaDecimalFormatter ", m => m.MyCustom) 
```

*（请注意，我从未使用过 KnockoutMVC，因此最后一行直接来自文档，但绑定名称已更改 - 它未经测试。*

另外，我使用了 a `ko.computed`，所以这个绑定是只读的——在`<input>`元素上使用它是没有意义的。最好用在`<span>`. 您可以使其成为实现反向的双向绑定：

```
ko.computed( {
    read: function() {
        /* method as above */
    },
    write: function(newValue) {
        /* implement reverse */
        observable( newValue );
    }
} 
```

**编辑 2**

希望这个[小提琴](http://jsfiddle.net/rRaHm/2/)能让它更清楚

# excel - 如何用英文单词转换这个excel公式？

> ID：13683087
> 
> 赞同：0
> 
> 时间：2012-12-03T12:17:05.013
> 
> 标签：excel

有人可以用英文翻译这个excel电子表格单元格公式吗？

```
=ROUND(IF(F28 < 1568,2.5,IF(F28 < 2491,0.004873 * F28-5.142,0.02269*F28^0.7329)),2) 
```

我正在根据该公式创建一个程序，但我不明白哪个会先走。至少我理解这部分 IF(F28 小于 1568) ...然后呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:23:19.560

从外部 if 语句开始向内移动。函数中的逗号`IF`分隔如下语句：

布尔表达式、真部分和假部分

以下是上述的伪代码。所有的回合都是小数点后两位。

```
IF (F28 < 1568) THEN
  ROUND (2.5)
ELSE IF (F28 < 2491) THEN
  ROUND (0.004873 * F28 - 5.142)
ELSE
  ROUND (0.02269 * F28^0.7329) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T12:27:47.117

如果单元格 F28 中的值小于 1568，则此单元格中的值将 2.5 舍入到小数点后 2 位 - 即 2.5

如果单元格 F28 中的值为 1568 或更大，但小于 2491，则此单元格中的值将为：0.004873 乘以 [单元格 F28 中的值减去 5.142]，四舍五入到小数点后 2 位

否则（即单元格 F28 中的值为 2491 或更大）该单元格中的值将是：0.02269 乘以 [单元格 F28 中的值的 0.7329 次方]，四舍五入到小数点后 2 位

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T12:24:05.293

您将按此顺序四舍五入：

*   小于 1568 =`2.5`
*   大于/等于 1568 但小于 2491 =`0.004873 * F28-5.142`
*   大于/等于 2491 =`0.02269*F28^0.7329`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T12:27:09.917

基本上这意味着：

```
IF F28 is smaller than 1568 then use 2.5
IF F28 is larger or equal to 1568 but smaller than 2491 then use 0.0004873 * F28 - 5.142
IF F28 is larger or equal to 2491 then use 0.02269 * F28^0.7329

Round the outcome to 2 digits. 
```

# visual-studio-2012 - 错误 GenerateAppxPackageRecipe 任务没有为所需参数“ProjectDir”提供值

> ID：13683100
> 
> 赞同：2
> 
> 时间：2012-12-03T12:17:57.347
> 
> 标签：visual-studio-2012

我想在 Visual Studio 2012 中构建我的第一个应用程序，但出现此错误

```
Error 1  The "GenerateAppxPackageRecipe" task was not given a value for the required  
parameter "ProjectDir".
TestHelloWorld 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:27:21.550

这是 VS2012 Update 1 的问题。正在研究解决方案，但与此同时，您可以简化步骤：只需删除 Update 1 并修复 VS 安装，如下所示：

1.  转到控制面板-> 程序和功能。
2.  单击“查看已安装的更新”
3.  选择 VS2012 Update 1 并卸载它。
4.  现在单击“卸载程序”。
5.  选择 Visual Studio 2012 并单击更改。
6.  单击修复。
7.  重启。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:29:18.717

我最近遇到了同样的错误。我一直在试验 VS2012 Update 1，安装和卸载以测试构建。我怀疑安装、卸载和其他操作导致了这个问题——我不确定发生这个错误时我所处的状态。所以，我做了以下事情：

*   卸载 VS2012 Update 1 更新。
*   卸载 VS2012 Express。
*   卸载VS2012 Ultimate。
*   重新启动。
*   安装了 VS2012 Express。
*   安装VS2012 Ultimate。
*   清理了我的项目工作副本。

遵循此顺序后，我再次打开了 Windows Store 应用程序解决方案，并且能够再次成功构建该解决方案。

# javascript - 单击按钮时不会弹出视频

> ID：13683107
> 
> 赞同：1
> 
> 时间：2012-12-03T12:18:32.900
> 
> 标签：javascript, html, video, html5-video

我有 5 个视频和带有 5 个不同按钮的视频播放器。
当我单击任何一个按钮时，它会加载视频，但如果我想观看不同的按钮，我必须重新加载页面并单击一个。

我该如何解决它，以便您可以随时单击任何视频按钮并仍然使视频正常工作。我想我需要做一个鼠标按下声明，如果是这样，我将如何写一个。这是我的 html 和 JavaScript：

## html

```
<video id="myVideo" controls autoplay></video>
    <div>
        <a href="#" onClick="addVideo1()" onMouseUp="mouseUp1">Demo Reel</a>
        <a href="#" onClick="addVideo2()" onMouseUp="mouseUp2">Video1</a>
        <a href="#" onClick="addVideo3()" onMouseUp="mouseUp3">Video2</a>
        <a href="#" onClick="addVideo4()" onMouseUp="mouseUp4">Video3</a>
        <a href="#" onClick="addVideo5()" onMouseUp="mouseUp5">Video4</a> 
    </div> 
```

## JavaScript

```
var myVid = document.getElementById('myVideo');

var myVidContents1 = "<source src='video/demoreel.mp4' type='video/mp4'/> <source src='video/demoreel.webm' type='video/webm'/> <source src='video/demoreel.ogv' type='video/ogg'/>";

function addVideo1() {
    myVid.innerHTML = myVidContents1;
}

var myVidContents2 = "<source src='video/video1.mp4' type='video/mp4'/> <source src='video/video1.webm' type='video/webm'/> <source src='video/video1.ogv' type='video/ogg'/>";

function addVideo2() {
    myVid.innerHTML = myVidContents2;
}

var myVidContents3 = "<source src='video/video2.mp4' type='video/mp4'/> <source src='video/video2.webm' type='video/webm'/> <source src='video/video2.ogv' type='video/ogg'/>";

function addVideo3() {
    myVid.innerHTML = myVidContents3;
}

var myVidContents4 = "<source src='video/video3.mp4' type='video/mp4'/> <source src='video/video3.webm' type='video/webm'/> <source src='video/video3.ogv' type='video/ogg'/>";

function addVideo4() {
    myVid.innerHTML = myVidContents4;
}

var myVidContents5 = "<source src='video/video4.mp4' type='video/mp4'/> <source src='video/video4.webm' type='video/webm'/> <source src='video/video4.ogv' type='video/ogg'/>";

function addVideo5() {
    myVid.innerHTML = myVidContents5;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:53:44.043

尝试这个：

```
function addVideo1() {
    myVid.innerHTML = myVidContents1;
    return false;
  //This over-rides the default link behaviour,
  // so the browser doesn't scroll to the top of the page instead of firing your code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T20:49:51.347

创建新的源标签后，您需要强制视频元素加载新的源，如下所示：

```
myVid.load(); 
```

请参阅： [尝试添加包含多个视频的多源视频播放器？](https://stackoverflow.com/questions/13682586/trying-to-add-a-multi-source-video-player-with-more-then-one-video/13732056#13732056)

您的点击处理程序应该可以正常工作，但可能会有一些奇怪的 UX 副作用。您可能最好使用“a”以外的标签，例如“span”或“button”，然后您可以在javascript中设置点击处理程序：

```
document.getElementById('link1').addEventListener('click', addVideo1, false);
// etc... 
```

不要忽略第三个“假”参数，否则您的代码将在旧版本的 Firefox 中中断。

# php - Joomla 查询用 $var 选择左连接

> ID：13683109
> 
> 赞同：1
> 
> 时间：2012-12-03T12:18:38.840
> 
> 标签：php, mysql, joomla, left-join

我需要用一个左连接`$var`！没有变量，代码可以工作：

```
$query->select('d.value AS department');
$query->join('LEFT', '#__jea_departments AS d ON d.id = p.department_id'); 
```

我尝试了输入变量的所有语法，但它不起作用！

```
$var="d.test";

$query->select('**$test** AS department');
$query->join('LEFT', '#__jea_departments AS d ON d.id = p.department_id'); 
```

我试过`"$test" {$test}`了，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:26:10.223

您正在使用单引号。然后它不会将 $test 转换为 propper 值。使用双引号或使用 $test 。作为部门'

```
$test = 'd.test';
print '$test as department';  //will print: $test as department
print "$test as department";  //will print: d.test as department
print $test. ' as department';  //will print: d.test as department 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:26:18.163

您正在使用单引号传递字符串文字，这就是问题所在。PHP 不会在用单引号定义的字符串中插入变量。将它们更改为双引号以解决：

```
$query->select("$test AS department"); 
```

或者连接变量：

```
$query->select($test . ' AS department'); 
```

从[手册](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.single)：

> 与双引号和heredoc 语法不同，特殊字符的变量和转义序列在出现在单引号字符串中时不会被扩展。

# javascript - Fancybox：使用 jQuery 的 each() 制作一组照片

> ID：13683111
> 
> 赞同：2
> 
> 时间：2012-12-03T12:18:44.337
> 
> 标签：javascript, jquery, fancybox

在标准情况下，我们可以通过执行以下操作来创建照片库（照片组）：

```
$( '.fancybox' ).fancybox(); 
```

在 HTML 中，我们必须将标签 'a'的属性**rel设置为相同的值：**

```
<a rel="group" title="" href="/profile/photos/files/74.jpeg" class="fancybox no-tooltip" id="photo-link-74"><img class="image-curving" style="display: block;" alt="" src="/profile/photos/files/74_thumb.jpeg"></a>
<a rel="group" title="" href="/profile/photos/files/74.jpeg" class="fancybox no-tooltip" id="photo-link-74"><img class="image-curving" style="display: block;" alt="" src="/profile/photos/files/74_thumb.jpeg"></a> 
```

当我们想使用 jQuery 的 each() 时，情况会怎样呢？

```
 $(".fancybox").each(    
            function()
            {
                var parentId = $( this ).parent().parent().attr( 'id' );
                var id = parentId.substring( parentId.indexOf( '-' ) + 1, parentId.length );

                $( this ).fancybox(
                    {
                        minWidth: 600,
                        afterShow: function() { afterShow( id ); },
                        title: "<img href='/pics/indikator.gif'>",
                        helpers: 
                        {
                            title: 
                            {
                                type : 'inside'
                            }
                        }
                    }
                );
            }
        ); 
```

在最后一种情况下，照片不会被分组。如何处理该功能`each()`并使所有 rel 属性相同的照片分组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:57:43.920

下一个不是通用的，但当我们在页面上有一个画廊时有效：

```
 var ids = [];
        var index = 0;

        $( '.fancybox' ).each(
            function()
            {
                var parentId = $( this ).parent().parent().attr( 'id' );
                var id = parentId.substring( parentId.indexOf( '-' ) + 1, parentId.length );
                ids[ index ] = id;
                index++;
            }
        );

        $( ".fancybox" ).fancybox(
            {
                minWidth: 600,
                afterShow: function() { afterShow( ids[ $.fancybox.current.index ] ); },
                title: "<img href='/pics/indikator.gif'>",
                helpers: 
                {
                    title: 
                    {
                        type : 'inside'
                    }
                }
            }               
        ); 
```

感谢 Asad 给了我迭代的想法。

如果有人有更明确的决定（没有外部变量，但仅使用闭包变量），请在此处发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T18:55:30.657

您不需要，只需在常规的 fancybox 自定义脚本中动态`each()`获取父级，使用像这样的 fancybox 回调`id`

```
$(".fancybox").fancybox({
   afterShow: function(){
       var parentId = $(this.element).parent().parent().attr('id');
       // do something with that variable
   }
}); 
```

...**注意**我使用`$(this.element)`了，因为这是`$(this)`在fancybox回调中引用的方式。您还可以在脚本顶部声明所有变量，以便随时访问它们。

# objective-c - 如何在从超级视图中删除 UIView 时删除所有子视图和视图的嵌套？

> ID：13683112
> 
> 赞同：0
> 
> 时间：2012-12-03T12:18:45.107
> 
> 标签：objective-c, ios, uiview

我正在开发一个简单的 UI 控件。数据源可以是任何一个。我开发的 UI 控件将使用数据源方法接收从 UIVIew 派生的任何内容，并将添加到其视图中。

现在，我将能够使用集合跟踪从数据源接收到的所有 UIView。当我使用以下语句时，所有视图都将从超级视图中删除。

```
 [gridCells makeObjectsPerformSelector:@selector(removeFromSuperview)]; 
```

在通过数据源方法返回的视图上创建和添加的视图上添加的所有视图会发生什么情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:26:27.577

您可以像这样遍历 superview 的所有子视图。

```
 for (UIView *subview in self.view)
  {
     [subview removeFromSuperview];
  } 
```

# c# - 将C#数据表复制到mysql数据库表中

> ID：13683117
> 
> 赞同：0
> 
> 时间：2012-12-03T12:18:55.173
> 
> 标签：c#, mysql-connector, multiple-insert

我在 C# 中动态创建了一个 DataTable。我想将整个 DataTable 插入 MySql 数据库表中。

我正在使用 MySql，因此 SqlBulkCopy 不适合我。我试过 MySqlBulkLoader 但它似乎只从文件中插入数据。

我可以通过遍历数据表的每个数据行并将其插入数据库来做到这一点。

有没有其他方法可以实现对数据库的多次插入？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:38:50.750

如果行数不多你可以简单地创建一个插入语句 INSERT INTO table VALUES (1,2,3), (4,5,6), (7,8,9);

[http://www.codeproject.com/Articles/19727/ADO-NET-Generic-Copy-Table-Data-Function](http://www.codeproject.com/Articles/19727/ADO-NET-Generic-Copy-Table-Data-Function)上的另一篇文章可能会有所帮助。

但是，如果行数很高，您可能可以创建一个临时文本文件，然后使用 BulkLoader ！

# mysql - 将单个表中的记录与同一列上的过滤器匹配

> ID：13683122
> 
> 赞同：0
> 
> 时间：2012-12-03T12:19:25.273
> 
> 标签：mysql

更新：似乎解决方案没有解决问题，所以我试图以更好的方式解释。

我正在尝试在产品显示上实现一个过滤器，它有许多自定义字段和值。

例如

颜色：红色、蓝色、绿色材质：银色、金色、铂金制造商：MF1、MF2、MF3

现在，如果有人想选择颜色为红色和蓝色、材料为金色、制造商为 MF1 的所有产品，那么正确的 SQL 是什么。请参阅 Fiddle 的数据库架构[http://www.sqlfiddle.com/#!2/6373d/2/0](http://www.sqlfiddle.com/#!2/6373d/2/0)

我按照建议使用此查询，但未显示正确的结果：

```
SELECT d1.productid, d1.fieldid, d1.value FROM `xcart_extra_field_values` d1 LEFT JOIN xcart_products_categories AS cat ON d1.productid = cat.productid WHERE (d1.fieldid= '36' AND d1.value LIKE '%14 karat guld%') AND cat.categoryid = '797' UNION ALL SELECT d2.productid, d2.fieldid, d2.value FROM `xcart_extra_field_values` d2 LEFT JOIN xcart_products_categories AS cat ON d2.productid = cat.productid WHERE (d2.fieldid= '37' AND d2.value LIKE '%Brillanter%') AND cat.categoryid = '797' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:27:12.357

这个简单的查询有什么问题：

> 从 tbl_fld_val 中选择 productid，其中（fieldid=36 和类似 '%Søl%' 的值）或（fieldid= 37 AND value LIKE '%Farvede%'）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:25:17.853

您没有显示查询的所需结果是什么，但是，据我所知，您的查询正在运行，但您只显示来自您的表`tbl_fld_val`中的值 alias `d1`。如果您稍微更改查询，您将看到记录存在：

```
SELECT d1.productid, d1.fieldid, d1.value
  ,d2.productid d2pid, d2.fieldid d2did, d2.value d2val
FROM tbl_fld_val d1
INNER JOIN tbl_fld_val d2 
  ON d1.productid=d2.productid
WHERE (d1.fieldid= 36 AND d1.value LIKE '%Søl%') 
  AND (d2.fieldid= 37 AND d2.value LIKE '%Farvede%'); 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/70091/5)

如果您希望数据出现在相同的列中，那么您可以使用`UNION ALL`与此类似的：

```
SELECT d1.productid, d1.fieldid, d1.value
FROM tbl_fld_val d1
WHERE (d1.fieldid= 36 AND d1.value LIKE '%Søl%') 
union all
SELECT d2.productid, d2.fieldid, d2.value
FROM tbl_fld_val d2
WHERE (d2.fieldid= 37 AND d2.value LIKE '%Farvede%') 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/70091/8)

或者你可以`OR`在你的`WHERE`子句之间尝试：

```
SELECT d1.productid, d1.fieldid, d1.value
FROM tbl_fld_val d1
INNER JOIN tbl_fld_val d2 
  ON d1.productid=d2.productid
WHERE (d1.fieldid= 36 AND d1.value LIKE '%Søl%') 
  OR (d2.fieldid= 37 AND d2.value LIKE '%Farvede%'); 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/70091/10)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:25:26.733

试试这个 SQL 查询，我曾经`OR`同时获取`36`和`37`fieldid

```
SELECT d1.productid, d1.fieldid, d1.value
FROM tbl_fld_val d1
WHERE ( (d1.fieldid= 36 AND d1.value LIKE '%Søl%') OR (d1.fieldid= 37 AND d1.value LIKE '%Farvede%') ) 
```

试试：[http ://www.sqlfiddle.com/#!2/d42ad/3](http://www.sqlfiddle.com/#!2/d42ad/3)

# java - srcgen4javasssit 可以用来生成我现有类的源代码吗？

> ID：13683126
> 
> 赞同：2
> 
> 时间：2012-12-03T12:19:37.457
> 
> 标签：java, javassist

我正在使用**javassist**并愿意重新生成**源代码**/更改类。但问题是我无法找到一个库来从 .class 文件生成我现有类的源代码，然后使用 javassist 编辑它们。我希望在我的项目中使用一个库来从现有类生成源代码，然后对其进行修改。在搜索网络时，我知道[http://www.fuin.org/srcgen4javassist](http://www.fuin.org/srcgen4javassist) srcgen4javassist 但我无法将它用于我现有的课程。你能指导一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:49:27.467

Javassist 是一个修改**JVM 字节码**的框架，这意味着您无需修改**​​源代码**（.java 文件），而是修改**字节码**（.class 文件）。

另一方面，如果你真正想要的是**反编译类**，换句话说，从字节码生成 java 源文件，我的建议是使用[JD 反编译器](http://java.decompiler.free.fr/)，它也有一个 eclipse 插件，可以帮助你很多。

我不知道 srcgen4javassist，所以我不会评论那个项目，但我可以向你保证，京东不会让你失望。

# .net - 如何找到 Action 的参数类型（使用反射）？

> ID：13683129
> 
> 赞同：0
> 
> 时间：2012-12-03T12:19:51.217
> 
> 标签：.net, vb.net, reflection, parameters, action

我有一个将一系列动作作为参数的方法。此数组中的操作应始终需要 1 个参数，*但参数类型可以不同*。

该方法应该在调用它之前检查一个动作需要什么类型的参数。如果它需要 a `String`，参数将是`"text"`。如果它需要一个`Integer`，参数将是`123`。

这是我尝试过的：

```
Sub MethodA(ParamArray actions() As Action(Of Object))
  For Each action() As Action(Of Object) In actions
    If action.Method.GetParameters()(0).ParameterType = GetType(String) Then
      action("text")
    ElseIf action.Method.GetParameters()(0).ParameterType = GetType(Integer) Then
      action(123)
    ElseIf ...
      ' You get the point.
    End If
  Next
End Sub 
```

但是，`action.Method.GetParameters()(0).ParameterType`总是`Object`，可能是因为参数数组`MethodA`只需要`Action(Of Object)`。

由于我的代码不起作用，我还能尝试什么？如何找到该操作**真正**需要的类型？

**注意**：我可以使用`Try ... Catch`，但我想在*不*调用该方法的情况下确定需要什么参数类型。

**编辑**：我发现了我不理解的行为，这可能与我的问题有关`Action(Of T)`。`AddressOf`请参阅以下代码：

```
Sub MyStringMethod(s As String)
  ' Do something
End Sub

MethodA(AddressOf MyStringMethod) ' Compiles
Dim stringAction As Action(Of String) = AddressOf MyStringMethod
MethodA(stringAction) 'Does not compile 
```

这里有什么不同？是否`AddressOf`生成`Action(Of Object)`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:45:29.160

问题是无法将`Action(Of Object)`变量设置为`Action(Of String)`或`Action(Of Integer)`对象，例如：

```
Dim actions(2) As Action(Of Object)
'The following lines will not compile
actions(0) = New Action(Of String)(AddressOf MyStringMethod)
actions(0) = New Action(Of Integer)(AddressOf MyIntegerMethod) 
```

所以问题不在于你在哪里检查类型。问题是你一开始就不能将任何其他类型传递给方法，那么方法怎么可能知道呢？

要么你需要通过创建一个包装类来传递每个动作的类型，例如：

```
Public Class MyAction
    Public Sub New(ByVal action As Action(Of Object), ByVal parameterType As Type)
        _action = action
        _type = Type
    End Sub

    Public ReadOnly Property Action() As Action(Of Object)
        Get
            Return _action
        End Get
    End Property
    Private _action As Action(Of Object)

    Public ReadOnly Property Type() As Type
        Get
            Return _type
        End Get
    End Property
    Private _type As Type
End Class 
```

或者，如果数组中的所有项目都采用相同的参数，那么您可以要求将类型作为方法的参数，例如：

```
Sub MethodA(ParamArray actions() As Action(Of Object), parameterType As Type)
    '...
End Sub 
```

**更新**

根据随后的对话，您需要做的只是使用基本`Delegate`类型而不是`Action(Of Object)`类型。例如：

```
Sub MethodA(ParamArray actions() As [Delegate])
    '...
End Sub 
```

但是，通过这样做，您允许传入具有其他类型签名的委托，例如，它将允许 a`Function`而不是 a `Sub`，或者具有零参数的方法，或者参数太多而不是恰好一个。因此，您可能需要在内部进行一些额外检查，以确保委托的签名是您所期望的。

# joomla - Kunena 附件失败，可能是目录所有者问题？

> ID：13683134
> 
> 赞同：0
> 
> 时间：2012-12-03T12:20:01.983
> 
> 标签：joomla, attachment, 777

只是在我的 Joomla 和 Kunena 论坛被黑后修复它:(

现在论坛成员无法成功上传附件，我尝试了以下更改权限：

```
public_html/media/kunena/attachments/666 
```

666 是用户 ID 和存储文件的位置。

777 权限有效但不安全，775 应该有效但无效，这可能是所有权问题吗？如果是这样，我将如何将其中的几千个更改为正确的所有者，所有者应该是什么？目前它是 cpanel 用户名。

任何建议将不胜感激。

干杯

* * *

更新

其他问题的清单，这些问题可能会在你的天才头脑中激发出一个想法。

1.  会员不能上传/附加图片到帖子（我什至不能用超级用户这样做）
2.  管理员中的持续错误：警告：file_put_contents（/home/xxxxx/public_html/administrator/components/com_community/jomsocialupdate.ini）[function.file-put-contents]：无法打开流：/home/xxxxx/public_html 中的权限被拒绝/libraries/joomla/filesystem/file.php 在第 418 行
3.  尝试在全新 Joomla 安装上安装扩展程序会导致无法移动错误
4.  无法更新 Joomla。更新包下载失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:38:41.897

对于 Joomla/Kunena，推荐的设置是目录 755 和文件 644

资料来源：[http ://docs.joomla.org/What_are_the_recommended_file_and_directory_permissions%3F](http://docs.joomla.org/What_are_the_recommended_file_and_directory_permissions%3F)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-26T15:39:21.647

只需更新到最新版本的 kunena (3.0.2) 即可解决问题（当然，如果您能够登录后端）

# wpf - XAML 中的 WPF GridLength

> ID：13683136
> 
> 赞同：2
> 
> 时间：2012-12-03T12:20:09.967
> 
> 标签：wpf, xaml, resourcedictionary, gridlength

我正在尝试在 Common.xaml 中定义一个公共 Width 资源，该资源将由不同的控件共享，如下所示：

```
<GridLength x:Key="CommonWidth">20</GridLength> 
```

然后我在 ButtonStyle.xaml 中定义的 Button 样式中使用它

```
<Style x:Key="ButtonStyle" TargetType="{x:Type Button}">
    <Setter Property="Width" Value="{DynamicResource CommonWidth}"/>
    ....
</Style> 
```

Common.xaml 包含在 App.xaml 的 ResourceDictionary 定义中的 ButtonStyle.xaml 之前。当我运行应用程序（在 .Net3.5 SP1 上）时，出现以下异常：

```
'20' is not a valid value for property 'Width'. 
```

有人对我做错了什么有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:28:08.613

注意`Button.Width`不是类型`GridLength`。您可以将值指定为`Grid.GridLength`固定、自动或星号。它仅用于. 中的行、列的大小`Grid`。

`Button.Width`是类型`double`。也就是说，如果你想使用你需要的资源来设置它

```
<sys:Double x:Key="Height">200</sys:Double> 
```

# java - 使用 Java 查询 Active Directory 以查找可用的 CIFS 共享

> ID：13683138
> 
> 赞同：0
> 
> 时间：2012-12-03T12:20:20.133
> 
> 标签：java, active-directory, ldap, cifs, jcifs

这是场景：

我有几个`CIFS`分区，基于 AD 的用户可以安装和使用这些分区来访问他们的文件等。

现在我们需要通过基于 Java 的 Web 应用程序将其公开给用户。所以理想情况下，当用户登录时；他/她应该能够看到`CIFS`他可以访问的所有分区。这意味着 Java 应用程序应该能够通过`LDAP`等方式查询 Active Directory 服务器，以识别哪些所有`CIFS`分区都可用以及各自的`ACLs`.

所以问题是：

1.  我们可以使用`LDAP(Java-based library)`查询AD来找出哪些用户可以访问哪些`CIFS`共享？
2.  有没有其他方法可以从 Java 应用程序中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:49:04.083

没有将 CIFS 分区或其各自的 ACL 发布到 AD 的内置方法。所以你需要自己发布。基本上有两种选择：

1.  在 AD 中发布它。这需要[扩展模式](http://technet.microsoft.com/en-us/library/cc759633%28v=ws.10%29.aspx)，即创建一个具有两个属性路径和用户的 cIFSPartition 类。然后，您必须找到一个可以执行 LDAP 查询的 Java 库（我在这里看到了很多关于[Spring LDAP](http://www.springsource.org/ldap)的问题）。您可能需要制作一个网页来帮助创建和管理这些 cIFSPartition 对象。

2.  将其存储在网络服务器上。这里有很多选项，例如文本文件或数据库。这样，您就不必担心 LDAP。

# java - 如何停止未来的超时

> ID：13683139
> 
> 赞同：6
> 
> 时间：2012-12-03T12:20:21.853
> 
> 标签：java, java.util.concurrent

我正在计算等待串行事件发生超时的未来：

```
Future<Response> future = executor.submit(new CommunicationTask(this, request));
response = new Response("timeout");
try {
  response = future.get(timeoutMilliseconds, TimeUnit.MILLISECONDS);
} catch (InterruptedException | TimeoutException e) {
  future.cancel(true);
  log.info("Execution time out." + e);
} catch (ExecutionException e) {
  future.cancel(true);
  log.error("Encountered problem communicating with device: " + e);
} 
```

该类`CommunicationTask`已实现`Observer`接口以侦听来自串行端口的更改。

问题是从串行端口读取相对较慢，即使发生串行事件，时间也会耗尽并`TimeoutException`抛出 a。当串行事件发生时，我能做些什么来停止我未来的超时时钟？

我试过了，`AtomicReference`但这并没有改变任何东西：

```
public class CommunicationTask implements Callable<Response>, Observer {
  private AtomicReference atomicResponse = new AtomicReference(new Response("timeout"));
  private CountDownLatch latch = new CountDownLatch(1);
  private SerialPort port;

  CommunicationTask(SerialCommunicator communicator, Request request) {
    this.communicator = communicator;
    this.message = request.serialize();
    this.port = communicator.getPort();
  }

  @Override
  public Response call() throws Exception {
    return query(message);
  }

  public Response query(String message) {
    communicator.getListener().addObserver(this);
    message = message + "\r\n";
    try {
      port.writeString(message);
    } catch (Exception e) {
      log.warn("Could not write to port: " + e);
      communicator.disconnect();
    }
    try {
      latch.await();
    } catch (InterruptedException e) {
      log.info("Execution time out.");
    }
    communicator.getListener().deleteObserver(this);
    return (Response)atomicResponse.get();
  }

  @Override
  public void update(Observable o, Object arg) {
    atomicResponse.set((Response)arg);
    latch.countDown();
  }
} 
```

我能做些什么来解决这个问题？

编辑：

好的，我有一个错误。`atomicResponse`在设置函数之前，我正在倒数我的闩锁`update`。现在它似乎奏效了，但仍然存在这样的问题，如果这种方法是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-21T19:16:43.417

您是否探索过 google 的 Guava 'future listener'，它基于 Async future，希望以下代码片段对您有所帮助....

```
import java.util.concurrent.Callable;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;

import com.google.common.util.concurrent.FutureCallback;
import com.google.common.util.concurrent.Futures;
import com.google.common.util.concurrent.ListenableFuture;
import com.google.common.util.concurrent.ListeningExecutorService;
import com.google.common.util.concurrent.MoreExecutors;

public class SyncFutureExample {
    public static void main(String[] args) {
        ListeningExecutorService service = MoreExecutors.listeningDecorator(Executors.newFixedThreadPool(1));
        ListenableFuture<String> lf  = service.submit(new CommuncationTask());

        //no need for future.get() or future.get(10,time minutes)

        //add callbacks(= async future listeners) ....
        Futures.addCallback(lf, new FutureCallback<String>() {
              public void onSuccess(String input) {
                System.out.println(input + " >>> success");//gets a callback once task is success
              }
              public void onFailure(Throwable thrown) {
                  System.out.println(thrown + " >>> failure");//gets a callback if task is failed
              }
            });
        service.shutdown();
    }

}

class CommuncationTask implements Callable<String>{

    public String call() throws Exception {
        TimeUnit.SECONDS.sleep(15);// some dummy serious task .............
        return "TaskDone";
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:08:25.047

希望这会有所帮助。我不会对此发表评论，希望代码中的一切都清楚。

```
class CommunicationTask implements Callable<String>, Observer {
    volatile boolean ignoreTimeoutException;

    public CommunicationTask(SerialCommunicator communicator, Request request) {
    }

    public String call() throws Exception {
        Thread.sleep(1000);
        return "done";
    }

    public void update(Observable o, Object arg) {
        ignoreTimeoutException = true;
    }
}

class FutureCommunicationTask extends FutureTask<String> {
    private CommunicationTask ct;

    public FutureCommunicationTask(CommunicationTask ct) {
        super(ct);
        this.ct = ct;
    }

    public String get(long timeout, TimeUnit unit) throws InterruptedException, ExecutionException, TimeoutException {
        try {
            return super.get(timeout, unit);
        } catch (TimeoutException e) {
            if (ct.ignoreTimeoutException) {
                return get();  //  no timeout wait 
            }
            throw e;
        }
    }
}

public class Test {

    public static void main(String[] args) throws Exception {
        CommunicationTask ct = new CommunicationTask(null, null);
        FutureTask<String> fct = new FutureCommunicationTask(ct);
        ExecutorService ex = Executors.newSingleThreadExecutor();
        ex.execute(fct);
//      uncomment this line and timeout will be cancelled 
        ct.update(null, null);  
        String res = fct.get(1, TimeUnit.MILLISECONDS);
        System.out.println(res);
    }
} 
```

# java - 为 JTable 中第一列的单元格加载 JList

> ID：13683140
> 
> 赞同：0
> 
> 时间：2012-12-03T12:20:25.223
> 
> 标签：java, swing, jtable, jlist

有什么方法可以在点击`JList`的第一列`JTable`上加载吗？

该表在第一列中有区域（每个区域中有多个位置）。我想在区域单击时在列表中向用户显示区域位置。

我从 1 天半开始寻找它。我不想把我的代码放在这里，因为我的表类中有很多功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:13:35.713

一种方法是将 a 添加`ListSelectionListener`到表中，如此处所示[，](https://stackoverflow.com/a/12306104/230513)`ListModel`并根据所选行更新您的。A`JList`听它自己的`ListModel`，所以更新应该是自动的。

![图片](../Images/693689e3aa7295979a2e33d6a3c7b0ae.png)

# javascript - 使用 JavaScript 或 jQuery 创建区分大小写或“camelCase”的 XML 节点

> ID：13683143
> 
> 赞同：3
> 
> 时间：2012-12-03T12:20:48.427
> 
> 标签：javascript, jquery, xml, excel

我需要在 JavaScript 中创建一些区分大小写的 XML 节点，它们的属性名称之间有一个冒号。

例子：`<Data ss:Type="String">Contact Name</Data>`

当我尝试通过 JavaScript 使用该`createElement()`函数创建一个元素时，它会以小写形式创建它。此外，添加带有冒号的属性也有很多问题。例如：`ss:Type="String"`

这是**Excel**数据，我将源**.xml**文件保存回**.xls**文件。XML 元素和属性的大小写对于 Excel 能够读取文件非常重要。

任何示例或指针都会有很大帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T12:33:23.500

您正在寻找的 JavaScript 方法是[`document.createElementNS`](https://developer.mozilla.org/en-US/docs/Web/API/Document/createElementNS)和[`elm.setAttributeNS`](https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttributeNS)

```
var e = document.createElementNS('http://www.microsoft.com/office/excel/', 'Data');
e.setAttributeNS('http://www.microsoft.com/office/excel/', 'ss:Type', 'String');
e.textContent = 'Contact Name'; 
```

然后，如果您想取回字符串，`.innerHTML`将不再起作用，因此您必须使用[XMLSerializer](https://developer.mozilla.org/en-US/docs/Web/API/XMLSerializer)

```
var s = new XMLSerializer();
s.serializeToString(e); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T08:30:52.743

Paul S.的[回答让我找到了解决方案。](https://stackoverflow.com/a/13683355/1497596)

我创建了所需的 XML DOM 元素，`createElement()`并添加了所需的属性`setAttribute()`。这导致：

```
<data ss:type="String">Contact Name</data> 
```

请注意，此示例中的元素和属性名称都是**小写的**。但是，我*真正*想要的是[Pascal 案例](http://en.wikipedia.org/wiki/CamelCase)：

```
<Data ss:Type="String">Contact Name</Data> 
```

`XMLSerializer()`在按照 Paul S. 的建议首先将 XML DOM 转换为字符串之后，我然后简单`replace()`地将所有出现的`<data`to`<Data`和`ss:type`to转换为`ss:Type`.

**我的问题的解决方案是 XMLSerializer() 和 String replace() 函数**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-18T16:43:55.020

这是一个过时的问题，但我会给出我的答案：
当使用`window.document`创建元素时，您使用的是[`HTMLDocument`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLDocument)（使用 ns="http://www.w3.org/1999/xhtml"），并且使用它创建的节点响应 html 标准与您所经历的限制。
您应该使用 a[`Document`](https://developer.mozilla.org/en-US/docs/Web/API/Document)来处理通用 XML。

```
// instantiate a new Document  
var xml_doc = document.implementation.createDocument('optional_namespace','rootElement');  

//  then your code to create element  
var e = xml_doc.createElementNS('http://www.microsoft.com/office/excel/', 'Data');  
e.setAttributeNS('http://www.microsoft.com/office/excel/', 'ss:Type', 'String');  
e.textContent = 'Contact Name';  

// probably append it  
xml_doc.documentElement.appendChild(e);  

// serialized xml_doc:  
var s = new XMLSerializer();  
s.serializeToString(xml_doc);  

/*
<rootElement xmlns="optional_namespace">
  <Data xmlns="http://www.microsoft.com/office/excel/" xmlns:ss="http://www.microsoft.com/office/excel/" ss:Type="String">Contact Name</Data>
</rootElement>"
*/ 
```

*编辑*：在 Chrome 和 FF 中测试

# jquery - jQuery下拉动画slideUp

> ID：13683149
> 
> 赞同：0
> 
> 时间：2012-12-03T12:21:20.620
> 
> 标签：jquery, animation, drop-down-menu, menu, navigation

我有带有 jQ​​uery 动画的导航菜单。slideOut 动画没问题，但是 slideIn 动画不起作用，我也想为 slideIn 添加延迟。这是jQuery代码：

```
function mainmenu() {
$(" #menu ul ").css(display: "none"}); // Opera Fix
$("#menu li").hover(function() {
$(this).find('ul:first').css({ visibility: "visible", display: "none"}).slideDown(300);}, 
function() {
$(this).find('ul:first').slideUp(400);
});
}
$(document).ready(function() {mainmenu();}); 
```

...和小提琴[http://jsfiddle.net/dzadze/ak5mu/](http://jsfiddle.net/dzadze/ak5mu/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:28:53.383

这是一个工作的jsfiddle，它与你的`display:none`css有关

[http://jsfiddle.net/ak5mu/2/](http://jsfiddle.net/ak5mu/2/)

# mysql - Magento 导入订单

> ID：13683151
> 
> 赞同：3
> 
> 时间：2012-12-03T12:21:26.170
> 
> 标签：mysql, magento, csv, magento-1.7

我最近将我的 Magento 商店从 1.4.2 升级到了 1.7。

由于在线商店仍在运行，因此我在本地计算机上进行了此升级。结果，当我将本地数据库升级到 1.7 时，我有客户在在线数据库上下订单。

现在我需要合并来自两个数据库的订单，这样我就不会在后台丢失任何订单。

我研究了一些扩展，但它们都是付费的。

我怎样才能实现这一点而不必为我只会使用一次的扩展付费？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:35:57.687

我认为这可以用 sql 来实现。

订单数据可以在前缀为“sales_flat”的表中找到。您需要的是将旧数据库中的订单合并到新数据库中不存在的新数据库中。

问题可能是新数据库中的新订单可能与旧数据库中的订单具有相同的 ID。

我会说做类似的事情（作为草图）：

**-> 从 sales_flat_order 表中获取您想要的订单。**您需要将他们的数据与其他 sales_flat 表中的数据连接起来，例如用于付款数据的 sales_flat_payment 和用于商品数据的 sales_flat_item。但这可以在稍后完成，因为如果没有以正确的顺序导入，它们可能会导致键约束错误。
**-> 确定订单的有效 entity_ids 和 increment_ids，使它们不与新数据库中的订单重叠**
**-> 将订单导入新数据库（sql 导入）**对 sales_flat_order 完成此操作后，您可以对另一个执行此操作sales_flat 表。

现在它们应该被导入。请注意，尽管存储在其他模块中的任何订单信息都不可用（例如 mage_report 模块存储一些统计信息），但我认为重要信息是通过这种方式合并的。

# wordpress - WooCommerce 显示自定义列

> ID：13683162
> 
> 赞同：13
> 
> 时间：2012-12-03T12:22:01.557
> 
> 标签：wordpress, woocommerce

我想在 WooCommerce 的后端显示一个附加列（在订单概览中）。该列应包含我已定义的自定义字段（交货日期）。

这个怎么做？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-05-16T18:42:39.937

如果有人仍然需要它 - 有关如何在 Woocommerce 订单列表中添加新列的说明。无需取消设置默认列，只需将其添加到您的 functions.php 中，您的代码将对更新有效。

# 1.定义列位置和名称

```
add_filter( 'manage_edit-shop_order_columns', 'MY_COLUMNS_FUNCTION' );
function MY_COLUMNS_FUNCTION($columns){
    $new_columns = (is_array($columns)) ? $columns : array();
    unset( $new_columns['order_actions'] );

    //edit this for you column(s)
    //all of your columns will be added before the actions column
    $new_columns['MY_COLUMN_ID_1'] = 'MY_COLUMN_1_TITLE';
    $new_columns['MY_COLUMN_ID_2'] = 'MY_COLUMN_2_TITLE';
    //stop editing

    $new_columns['order_actions'] = $columns['order_actions'];
    return $new_columns;
} 
```

# 2\. 对于每个自定义列，显示值

```
add_action( 'manage_shop_order_posts_custom_column', 'MY_COLUMNS_VALUES_FUNCTION', 2 );
function MY_COLUMNS_VALUES_FUNCTION($column){
    global $post;
    $data = get_post_meta( $post->ID );

    //start editing, I was saving my fields for the orders as custom post meta
    //if you did the same, follow this code
    if ( $column == 'MY_COLUMN_ID_1' ) {    
        echo (isset($data['MY_COLUMN_1_POST_META_ID']) ? $data['MY_COLUMN_1_POST_META_ID'] : '');
    }
    if ( $column == 'MY_COLUMN_ID_2' ) {    
        echo (isset($data['MY_COLUMN_2_POST_META_ID']) ? $data['MY_COLUMN_2_POST_META_ID'] : '');
    }
    //stop editing
} 
```

# 3.（可选）使列可排序的功能

```
add_filter( "manage_edit-shop_order_sortable_columns", 'MY_COLUMNS_SORT_FUNCTION' );
function MY_COLUMNS_SORT_FUNCTION( $columns ) {
    $custom = array(
        //start editing

        'MY_COLUMN_ID_1'    => 'MY_COLUMN_1_POST_META_ID',
        'MY_COLUMN_ID_2'    => 'MY_COLUMN_2_POST_META_ID'

        //stop editing
    );
    return wp_parse_args( $custom, $columns );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-22T06:29:52.083

在woo-commerce订单表中添加新列优惠券并根据订单获取所有优惠券代码。你需要复制并粘贴到你的function.php中。

```
add_filter('manage_edit-shop_order_columns', 'custom_shop_order_column', 11);

function custom_shop_order_column($columns) {
    //add columns
    $columns['my-column1'] = __('Coupons Code', 'theme_slug');
    return $columns;
}

// adding the data for each orders by column (example)
add_action('manage_shop_order_posts_custom_column', 'cbsp_credit_details', 10, 2);

function cbsp_credit_details($column) {
    global $post, $woocommerce, $the_order;
    $order_id = $the_order->id;

    switch ($column) {
        case 'my-column1' :
            // $myVarOne = wc_get_order_item_meta( $order_id, 15, true );
            if ($the_order->get_used_coupons()) {

                $coupons_count = count($the_order->get_used_coupons());
                foreach ($the_order->get_used_coupons() as $coupon) {
                    echo $coupon;

                    $i++;
                }

                echo '</p>';
            }
           // echo $myVarOne;
            break;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-16T04:23:35.990

试试这个，你会得到你的解决方案，只需在你的**function.php**文件上写下面的代码。

```
add_filter( 'manage_edit-shop_order_columns','your_function_name',10 );
function your_function_name($columns){
        $columns['delivery_date'] = __('Delivery date','textdomain');
        return $columns;
    }
add_action( 'manage_shop_order_posts_custom_column','your_other_function_name',20 );
function  your_other_function_name($column)
{
    swith($column)
    {
        case 'delivery_date':  // your custom code here and do what you want.
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T22:39:22.527

我现在遇到了 Woocommerce。添加了一个自定义字段个人注册号 - 现在希望它显示在订单概览页面中。

我设法添加了该列 - 但仍然无法获取每个订单的自定义字段的值。

这是我所做的：

```
// Removed Existing Order Page collumns
remove_filter('manage_edit-shop_order_columns', 'woocommerce_edit_order_columns');

// Added My own filter to Show the PRN - Personal Registration field
add_filter('manage_edit-shop_order_columns', 'omak_edit_order_columns');

// The omak_edit_order_columns definition
/*** Taken from admin/post_types/shop_order.php ***/
function omak_edit_order_columns($columns){
    global $woocommerce;

    $columns = array();

    $columns["cb"]              = "<input type=\"checkbox\" />";
    $columns["order_status"]        = __( 'Status', 'woocommerce' );    
    $columns["order_title"]         = __( 'Order', 'woocommerce' );
    $columns["order_prn"]           = __( 'PRN', 'woocommerce' );    // This is the line which added the column after the Title Column
    $columns["billing_address"]     = __( 'Billing', 'woocommerce' );
    $columns["shipping_address"]    = __( 'Shipping', 'woocommerce' );
    $columns["total_cost"]      = __( 'Order Total', 'woocommerce' );
    $columns["order_comments"]  = '<img alt="' . esc_attr__( 'Order Notes', 'woocommerce' ) . '" src="' . $woocommerce->plugin_url() . '/assets/images/order-notes_head.png" class="tips" data-tip="' . __( 'Order Notes', 'woocommerce' ) . '" width="12" height="12" />';

    $columns["note"]                = '<img src="' . $woocommerce->plugin_url() . '/assets/images/note_head.png" alt="' . __( 'Customer Notes', 'woocommerce' ) . '" class="tips" data-tip="' . __( 'Customer Notes', 'woocommerce' ) . '" width="12" height="12" />';

    $columns["order_date"]          = __( 'Date', 'woocommerce' );
    $columns["order_actions"]       = __( 'Actions', 'woocommerce' );

    return $columns;
} 
```

让我知道它是否对您有帮助...

我要处理如何获取每个订单的值。

正如评论：函数定义存在于 WooCommerce 插件的 shop_order.php 中。让我知道是否有人解决它..或知道如何去做。

谢谢，（抱歉，正忙于某事，所以无法回读以检查错误）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-22T19:26:50.083

以下适用于 WooCommerce 2.6.2。你应该研究两个新的钩子：

*   [woocommerce_admin_order_item_headers](http://hookr.io/actions/woocommerce_admin_order_item_headers)，在生成订单表头时调用一次
*   [woocommerce_admin_order_item_values](http://hookr.io/actions/woocommerce_admin_order_item_values/)，每个订单中的每个项目调用一次

# 1.定义列标题

```
add_filter('woocommerce_admin_order_item_headers', 'so13683162_headers');
function so13683162_headers($order) {
    echo "<th>FIELD1</th>";
} 
```

# 2\. 按行填充值

```
add_filter('woocommerce_admin_order_item_values', 'so13683162_values');
function so13683162_values($product) {
    if (isset($product -> id)) {
        $attrs = get_post_meta($product -> id, "_product_attributes", true);
        echo "<td>" . $attrs["FIELD1"]["value"] . "</td>";
    }
} 
```

# c# - 如何在 C# 中对数组进行排序？

> ID：13683165
> 
> 赞同：0
> 
> 时间：2012-12-03T12:22:23.040
> 
> 标签：c#, asp.net, list, indexing, sorting

我有这段代码用于显示数组中的列表：

```
<table cellpadding="0" cellspacing="5" border="0" class="listTable">
@foreach(var row in list){
    <tr>
        <td>@row[0]</td>
        <td>@row[1]</td>
        <td>@row[2]</td>
        <td>@row[3]</td>
    </tr>
}
</table> 
```

**我想要的是在显示列表之前按索引 3 以升序对数组“列表”进行排序。**

我现在已经搜索了几个小时，因为我确定之前已经解决了这个问题，但我什么也没找到。可能是我在搜索时使用了错误的术语，如果是这样，请指出我正确的方向。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T12:24:30.693

只需使用`Enumerable.OrderBy<T>()`

```
<table cellpadding="0" cellspacing="5" border="0" class="listTable">
@foreach(var row in list.OrderBy(i=>i[3])){
    <tr>
        <td>@row[0]</td>
        <td>@row[1]</td>
        <td>@row[2]</td>
        <td>@row[3]</td>
    </tr>
}
</table> 
```

# sql - 将不同的列值连接到字符串

> ID：13683166
> 
> 赞同：1
> 
> 时间：2012-12-03T12:22:24.080
> 
> 标签：sql, concatenation, distinct

我想为字符串选择不同的列组合。我不知道如何在查询中做到这一点。场景如下

```
c1   c2   c3
a     1    x
b     2    x
b     2    y 
```

我想要一个像

```
a:1:x
a:1:y
a:2:x
a:2:y
b:1:x
b:1:y
b:2:x
b:2:y 
```

关于如何做的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:32:09.537

示例 CREATE TABLE 语句

```
create table #Test( c1 char(1), c2 char(1), c3 char(1) )
insert INTO #Test
SELECT
    'a', '1', 'x'
UNION ALL SELECT
    'b', '2', 'x'
UNION ALL SELECT
    'b', '2', 'y' 
```

所有不同列值的组合

```
select 
    c1List.c1, c2List.c2, c3List.c3
from ( 
    select DISTINCT c1 from #Test ) c1List
CROSS JOIN (
    select DISTINCT c2 from #Test ) c2List
CROSS JOIN (
    select DISTINCT c3 from #Test ) c3List 
```

字符串连接

```
select 
    c1List.c1 + ':' + c2List.c2 + ':' + c3List.c3
from ( 
    select DISTINCT c1 from #Test ) c1List
CROSS JOIN (
    select DISTINCT c2 from #Test ) c2List
CROSS JOIN (
    select DISTINCT c3 from #Test ) c3List 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:34:35.513

```
select concat(c1,':',c2,':',c3) from 
(select distinct c3 from t) as t3, 
(select distinct c2 from t) as t2, 
(select distinct c1 from t) as t1 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-03T12:28:50.317

`select concat(c1,':',c2,':',c3) from ...`

# ruby-on-rails - 将 postgres_ext 与 postgis 适配器一起使用不适用于数组列

> ID：13683169
> 
> 赞同：0
> 
> 时间：2012-12-03T12:22:38.000
> 
> 标签：ruby-on-rails, postgresql, activerecord, postgis, postgres-ext

我已经成功安装了 PostGIS 并使用`postgres_ext`gem 添加了支持 Rails `postgis`ActiveRecord 适配器，但是当我尝试在迁移中使用 Postgres 数组列类型时，它失败了：

```
t.string :pets, :array => true, :limit => 12 
```

和错误：

```
rake aborted!
An error has occurred, this and all later migrations canceled:

    undefined method `array' for #<ActiveRecord::ConnectionAdapters::ColumnDefinition:0x007fa8357b3308>
    /Users/avishai/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.9/lib/active_support/core_ext/object/try.rb:36:in `try'
    /Users/avishai/.rvm/gems/ruby-1.9.3-p194/gems/postgres_ext-0.0.9/lib/postgres_ext/active_record/connection_adapters/postgres_adapter.rb:197:in `add_column_options!'
    /Users/avishai/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/schema_definitions.rb:38:in `add_column_options!'
    /Users/avishai/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/schema_definitions.rb:31:in `to_sql'
    /Users/avishai/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-postgis-adapter-0.4.3/lib/active_record/connection_adapters/postgis_adapter/spatial_table_definition.rb:76:in `block in to_sql'
    /Users/avishai/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-postgis-adapter-0.4.3/lib/active_record/connection_adapters/postgis_adapter/spatial_table_definition.rb:76:in `map'
    /Users/avishai/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-postgis-adapter-0.4.3/lib/active_record/connection_adapters/postgis_adapter/spatial_table_definition.rb:76:in `to_sql'
    /Users/avishai/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-postgis-adapter-0.4.3/lib/active_record/connection_adapters/postgis_adapter/main_adapter.rb:192:in `create_table'
    /Users/avishai/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.9/lib/active_record/migration.rb:466:in `block in method_missing'
    /Users/avishai/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.9/lib/active_record/migration.rb:438:in `block in say_with_time'
    /Users/avishai/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.9/lib/active_record/migration.rb:438:in `say_with_time'
    /Users/avishai/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.9/lib/active_record/migration.rb:458:in `method_missing' 
```

宝石文件：

```
gem "rails", "~> 3.2.9"
gem "airbrake"
gem "pg"
gem "postgres_ext"
gem "activerecord-postgis-adapter"
gem "activerecord-postgres-array", "~> 0.0.8" 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:58:30.067

[这是一个已知问题](https://github.com/dockyard/postgres_ext/issues/39)。问题是 activerecord-postgis-adapter 和 postgres_ext 对 ActiveRecord 中的 PostgreSQL 适配器有竞争补丁，解决方案是让 postgres_ext 或 activerecord-postgis-adapter 依赖于其他 gem。让 postgres_ext 依赖于 activerecord-postgis-adapter 是没有意义的，因为您不必使用 PostGIS 来使用 PostgreSQL 的本机数据类型

（我是 postgres_ext gem 的维护者，我刚刚注意到您是打开链接问题的人）

# c# - 在应用程序初始化时注册工厂函数

> ID：13683182
> 
> 赞同：0
> 
> 时间：2012-12-03T12:23:19.183
> 
> 标签：c#, initialization

对于我正在编写的服务器，我有一个文件文件夹，每个文件中有一个类。
每个类代表来自客户端的请求操作。
如果我添加一个新动作，我只想能够添加一个新文件，让文件自己注册。

在诸如[Go](http://golang.org)之类的语言中，您可以`init`在每个文件中拥有一个在初始化时运行的函数，让您可以注册诸如工厂委托（或第一类函数）之类的东西。

您能否在 C# 中实现类似的功能，让文件注册自己的类，而无需编辑包含所有已注册操作列表的第二个文件？

```
// This won't work, but how to do it?
func init() {
    // Registering a factory function to a Dictionary<string, Func<IAction>>
    Reg.ClassDictionary.Add("connect", () => { return new Connect(); });
}

namespace Action
{
    class Connect : IAction
    {
         [JsonProperty("user")]
        public string Username;

        [JsonProperty("pass")]
        public string Password;

        public bool Exec()
        {
            return ConnectToServer(Username, Password);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:01:07.410

取决于您的程序集的组织方式，但这是一种方法。定义一个名为 MyTask 的自定义属性，这样您就可以识别感兴趣的程序集中的所有类，并且您想要公开的名称例如在您的示例中为“connect”。

然后使用反射来筛选组件，找到你想要的小伙子并注册它们。

不知道你对属性和反射了解多少

但这是我的一个

```
[System.AttributeUsage(System.AttributeTargets.Class, AllowMultiple = false, Inherited = true)]
public sealed class ConversionAttribute : System.Attribute
{
    public string DatabaseName { get; set; }
    public bool ReadOnly { get; set; }
    public int ConversionOrder { get; set; }
    public String VersionStart { get; set; }
    public String VersionEnd { get; set; }
} 
```

一个类是这样标记的

```
[Conversion(ConversionOrder = 14)]
public class ConversionExample : DataConversion 
```

这个章节贯穿整个程序集，抓住任何用 ConversionAttribute 标记的东西，实例化它，然后调用一个方法。

```
public static void DoConversions()
{
    Type[] contents = CommandLine.Instance.TaskAssembly.GetExportedTypes();
    SortedDictionary<int, List<Type>> conversions = new SortedDictionary<int, List<Type>>();
    foreach (Type t in contents)
    {
        ConversionAttribute attr = FindAttribute(t);
        if (attr != null)
        {
            if (!conversions.ContainsKey(attr.ConversionOrder))
            {
                 conversions.Add(attr.ConversionOrder, new List<Type>());
            }
            conversions[attr.ConversionOrder].Add(t);
        }
    }

    foreach (int order in conversions.Keys)
    {
        foreach (Type t in conversions[order])
        {
            ConstructorInfo c = t.GetConstructor(new Type[] { typeof(CommandLine) });
            DataConversion d = (DataConversion)c.Invoke(new object[] { CommandLine.Instance });
            ConversionVersionStatus status = d.VersionStatus(CommandLine.Instance.TaskParameterValue("TAX_FULL_VERSION"));
            if ((status == ConversionVersionStatus.NoVersionSet) || (status == ConversionVersionStatus.Relevant))
            {
                d.Log(String.Format(CultureInfo.InvariantCulture, "Started Conversion {0}", d.FriendlyName));
                d.ExecuteTask();
                d.Log(String.Format(CultureInfo.InvariantCulture, "Finished Conversion {0}", d.FriendlyName));
           }
           else
           {
               if (status == ConversionVersionStatus.Discontinued)
               {
                   d.Log(String.Format(CultureInfo.InvariantCulture, "Conversion {0} skipped as discontinued", d.FriendlyName));
               }
               else
               {
                   d.Log(String.Format(CultureInfo.InvariantCulture, "Conversion {0} skipped as not yet relevant", d.FriendlyName));
               }
           }
       }
   }
} 
```

所以基本上要添加一个新任务，我们在 dll 中定义它，用那个属性标记它，工作完成。

在此之后，您正在谈论某种配置文件，无论是显式配置文件，还是沿着 DI 和服务发现路线进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:30:07.750

如果它是控制台应用程序，只需在`Main`方法开始时执行。

如果它是一个 Windows 服务，当你扩展时`ServiceBase`，你会得到一个`OnStart`方法（你可以覆盖），它在服务启动时执行。[http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.onstart.aspx](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.onstart.aspx)

这是一个关于 Windows 服务的快速教程，可帮助您入门：[http ://www.switchonthecode.com/tutorials/creating-a-simple-windows-service-in-csharp](http://www.switchonthecode.com/tutorials/creating-a-simple-windows-service-in-csharp)

编辑：根据您的说明，AFAIK，没有内置的方法可以让文件/类型按照您的要求执行。但是，您可以做的是一些反思。您可以仔细阅读您的程序集以了解实现您的`IAction`（或者更确切地说，一些其他描述性类型）的特定类型/接口。您可以搜索所有这些，实例化它们，然后`init`在我上面描述的启动阶段调用它们的各种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T12:41:35.217

您可以在类上使用静态初始化程序。

```
namespace Action
{
    class Connect : IAction
    {
        static Connect ()
        {
            Reg.ClassDictionary.Add("connect", () => { return new Connect(); });
        }

        [JsonProperty("user")]
        public string Username;

        [JsonProperty("pass")]
        public string Password;

        public bool Exec()
        {
            return ConnectToServer(Username, Password);
        }
    }
} 
```

# javascript - 使用 javascript 将 HTML5 WebSQL 数据库的内容附加到电子邮件

> ID：13683183
> 
> 赞同：3
> 
> 时间：2012-12-03T12:23:19.583
> 
> 标签：javascript, html, local-storage, web-sql

我在 HTML5 中创建了本地数据库（WebSQL）。本地存储的内容必须作为电子邮件附件发送。电子邮件客户端将使用 javascript mailto 功能打开。

要求是当电子邮件客户端打开时，它应该将本地存储的内容作为文件（以任何文件格式，如 xml、csv 或文本）附加在电子邮件客户端窗口中。

据我了解，内容必须先导出到文件，然后附加到电子邮件中。这可以使用 HTML5 的文件 API 来完成吗？

我的问题是 - 是否可以使用 javascript 来做到这一点？

编辑：我的问题是它必须完全在客户端完成。是否至少有一种方法可以使用 javascript 将本地数据库内容导出到文件中？然后可以手动将此文件附加到电子邮件中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T05:48:48.373

我会假设你正在谈论做这样的事情（在从 WebSQL 中提取信息之后）：

```
document.location = "mailto:"+recipient+"?attach="+"attach.zip"; 
```

根据[RFC 2368](http://www.faqs.org/rfcs/rfc2368.html) ，由于安全原因**，您不能使用 mailto: URL 方案将附件添加到邮件中：**

> 如果任何标头被认为是危险的，解释 mailto URL 的用户代理应该选择不创建消息；它还可以选择仅使用 URL 中给出的标头的子集创建消息。只有主题、关键字和正文标题被认为是安全和有用的。

### 结论：

mailto：仅支持标题值或文本/纯内容。

### 备择方案：

*   如果您**使用的是 PHP**，您可以使用[PHPMailer](http://sourceforge.net/projects/phpmailer/)

*   如果您使用的是 C#，则可以使用[此类](http://www.vbusers.com/codecsharp/codeget.asp?ThreadID=71&PostID=1)

*   对于任何其他服务器端语言，我 99% 确信有办法做到这一点。

# installation - 透明箱安装

> ID：13683185
> 
> 赞同：1
> 
> 时间：2012-12-03T12:23:29.417
> 
> 标签：installation, clearcase

有人可以告诉我在 AIX 服务器上安装 clear case 应用程序的最佳方法吗？

Clearcase 版本 7.1.2

如果我们有卸载方法，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:53:26.517

这应该遵循在 Unix 上安装 ClearCase 的一般规则。
我在“[如何在没有 GUI 和 Internet 的基于 Unix 的服务器上安装 ClearCase 7.1？](https://serverfault.com/questions/49786/how-do-you-install-clearcase-7-1-on-a-unix-based-server-with-no-gui-and-no-inter) ”中进行了详细说明。

AIX只有几个[特性问题](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.books.cc_ms_platforms_guide.doc/clearcase_on_unix.htm#sii-unix-91020)。

“ [ClearCase 7.1 Silent Uninstall by example on UNIX or Linux](http://www-01.ibm.com/support/docview.wss?uid=swg21392235) ”中介绍了 ClearCase 的静默卸载过程。

> CD 到`/var/ibm/InstallationManager/uninstall`已安装系统上的目录。
> 从以下技术说明下载适当的操作系统响应文件： **[IBM Rational ClearCase 的示例卸载响应文件](http://www-01.ibm.com/support/docview.wss?uid=swg21376355)**
> 在上述目录中运行以下命令：
> 
> 例子：

```
uninstall --launcher.ini silent-uninstall.ini -input /root/clearcase_uninstall_response_sol_x86.xml 
```

> 在前面的示例中，响应文件是

```
/root/clearcase_uninstall_response_sol_x86.xml 
```

> 这将从系统中卸载 ClearCase。
> 以下将从上述目录中卸载安装管理器：

```
uninstall --launcher.ini silent-uninstall.ini 
```

# regex - 正则表达式正式文档

> ID：13683198
> 
> 赞同：1
> 
> 时间：2012-12-03T12:24:08.103
> 
> 标签：regex

是否有任何关于如何实现自己的正则表达式库的正式文档？现有正则表达式库的创建者基于哪些正式文档（如果有）来编写代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:29:35.617

我已经编写（并放弃了）一个 javascript 解析器，包括正则表达式支持。我基于 ECMAscript 定义，根据它本身使用 Perl5 正则表达式。这是 ECMA 262，我使用的是 1999 年 12 月的第 3 版。（现在有一个较新的版本，我不知道它在正则表达式的定义中是否完整。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:30:03.120

任何关于自动机理论和/或编译器构造的优秀教科书，例如[Hopcroft 和 Ullman](https://en.wikipedia.org/wiki/Introduction_to_Automata_Theory,_Languages,_and_Computation)，都涵盖了正则表达式及其与可以编译的有限状态自动机的关系。几本关于自然语言处理的教科书也是如此，其中通常使用有限状态方法，例如[Jurafsky 和 ​​Martin](http://www.cs.colorado.edu/~martin/slp.html)。

（Ullman 本人甚至[在 Coursera 上开设了一门课程](https://www.coursera.org/course/automata)，但新课程尚未公布。）

至于当前 RE 库基于哪些文档的问题：基于我引用的教科书和现有实现。我知道的第一个 RE 实现是[Ken Thompson 的 QED 版本](http://cm.bell-labs.com/who/dmr/qed.html)，ca。1967\. 不幸的是，QED 网站上的技术报告引用了很少的参考文献，并且没有与 RE/FA 理论相关。我确信这些想法最终可以追溯到 Kleene 的正则语言理论，该理论是在 1950 年代发展起来的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:32:38.960

正则表达式被称为正则，因为这是它们所代表的状态机的属性。简而言之，一种可能的实现可能使用只是表的状态机。正则表达式解析器将为正则表达式创建许多状态和转换，执行它会根据转换遍历状态。

例如 /ab+/ 生成类似：

```
state \ next char:  a       b       $       *
[initial state]     goto 1  fail    fail    fail
1                   fail    goto 2  fail    fail
2                   fail    goto 2  match   fail 
```

（其中 $ 是字符串的结尾，* 是任何其他字符）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-06T09:47:16.060

我一直在寻找正则表达式，并且发现了一个有趣的问题，据我所知关于它们的[问题 问题：为什么正则表达式可以具有指数运行时间？](https://stackoverflow.com/questions/8887724/why-can-regular-expressions-have-an-exponential-running-time/8887822#8887822)

接受的答案表明，基于链接的文章，**RegExp**实现（也在 Perl 中使用）“有点”慢，并且有一个更快/更简单的算法，被许多好的旧 Unix 工具（如 grep）使用。

这个链接直接引出了前面提到的文章：[Regular Expression Matching Can Be Simple and Fast](http://swtch.com/~rsc/regexp/regexp1.html) , ( [part2](http://swtch.com/~rsc/regexp/regexp2.html) , [part3](http://swtch.com/~rsc/regexp/regexp3.html) )

如果它是实际的，你应该使用这个算法而不是 Perl 的算法来考虑它。

# silverlight - 加载常见silverlight dll资源的问题

> ID：13683199
> 
> 赞同：1
> 
> 时间：2012-12-03T12:24:08.343
> 
> 标签：silverlight, silverlight-4.0, localization

我有几个使用一个常见的 silverlight dll 的 silverlight 模块。当我本地化应用程序时，所有模块资源都会根据所选的文化正确加载，但不是通用 dll 的资源。对于常见的 dll，尽管我已将本地化的 dll 复制到正确的路径中，但它始终显示默认字符串（英文）。我需要在这里做任何额外的步骤吗？

# c++ - OpenGL 3.x - glBindBuffer(GL_ELEMENT_ARRAY_BUFFER) 和 VAO

> ID：13683205
> 
> 赞同：3
> 
> 时间：2012-12-03T12:24:30.680
> 
> 标签：c++, opengl, opengl-3

我有一种初始化我的 VBO/VAO 的方法：

```
 glBindBuffer(GL_ARRAY_BUFFER, mVBO_VertexShader);
        glBufferData(GL_ARRAY_BUFFER, sizeof(vertexPositions), vertexPositions, GL_STATIC_DRAW);
        glBindBuffer(GL_ARRAY_BUFFER, 0);

        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, mIndexBuffer);
        glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indexData), indexData, GL_STATIC_DRAW);
        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);

        // setup VAO
        glBindVertexArray(mVAO);

        glBindBuffer(GL_ARRAY_BUFFER, mVBO_VertexShader);
        glEnableVertexAttribArray(0);
        glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);
        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, mIndexBuffer);

        glBindBuffer(GL_ARRAY_BUFFER, 0);
        glBindVertexArray(0); 
```

然后是一个单独的绘图方法；

```
 glBindVertexArray(mVAO);
    glDrawElements(GL_TRIANGLES, 12, GL_UNSIGNED_SHORT, &mIndexBuffer);
    glBindVertexArray(0); 
```

我是否需要`GL_ELEMENT_ARRAY_BUFFER`在调用后解除绑定，`glDrawElements`或者它的状态是否“绑定”到 VAO？（所以如果我解除绑定 VAO，`GL_ELEMENT_ARRAY_BUFFER`也会解除绑定）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T14:08:13.797

`GL_ELEMENT_ARRAY_BUFFER`与 VAO 状态相关联。我引用了 OpenGL 3.3 规范：“生成的顶点数组对象是一个新的状态向量，包括表 6.4 和 6.5 中列出的所有状态值。” 表 6.4 包含`ELEMENT ARRAY BUFFER BINDING`. 所以不，你不需要解绑它。

此外，您可能希望在示例中`NULL`作为最后一个参数传递`glDrawElements`，因为地址是相对于绑定元素数组缓冲区的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:29:55.520

设置顶点属性指针时绑定顶点数组。所以基本上不要解开你的顶点数组，因为你只有一个。

# java - 如何在android中的某些前缀之后获取值？

> ID：13683207
> 
> 赞同：0
> 
> 时间：2012-12-03T12:24:34.260
> 
> 标签：java, android, string

我有一个像 abc-5,xyz-9,pqr-15 这样的字符串现在，我只想在“-”之后获取值那么，我怎样才能得到那个值..我想要这个值在字符串数组中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:27:00.877

你可以试试

```
String string = "abc-5,xyz-9,pqr-15";
String[] parts = string.split(",");
String val1 = parts[0].split("-");
..... 
```

等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:26:47.817

```
int pos = string.indexOf('-');
String sub = string.substring(pos); 
```

如果每个字符串中有多个值，则必须先拆分它（使用`split`方法）。例如：

```
String[] array = string.split(',');
String[] values = new String[array.length];
for(int i = 0; i < array.length; i++)
    values[i] = array[i].substring(arrays[i].indexOf('-')); 
```

现在你有了一个数组中的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T12:28:02.827

我会`split`在你的字符串上使用。

```
String str = "abc-5,xyz-9,pqr-15";
String[] arr = str.split(",");

for (String elem: arr) {
    System.out.print(elem.split("-")[1] + " : ");  // Will print - `5 : 9 : 15`
} 
```

或`Regular Expression`像这样： -

```
Matcher matcher = Pattern.compile("-(\\d+)").matcher(str);
while(matcher.find()) {
    System.out.println(matcher.group(1));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T12:27:52.507

采用：

```
String newString= oldString.substring(oldString.indexOf('-')); 
```

# javascript - 使用头像设计单个 Twitter 提要

> ID：13683209
> 
> 赞同：0
> 
> 时间：2012-12-03T12:24:38.637
> 
> 标签：javascript, html, css, twitter

我在设置 Twitter 提要的样式时遇到了一个小问题，我正在将它拉到我的页面。

我似乎无法让图像以 15px 的右边距位于左侧，然后文本将漂浮在图像的右侧。目前它在图像上重叠，但我实际上可以将文本作为目标来分隔它，因为代码是由 JS 生成的。有任何想法吗？

**HTML**

```
<div id="twitter">
  <h2 class="twitter-header">Twitter</h2>
  <div id="tweet" ></div>
  <img class="followme" src="images/follow-me.jpg" />
</div> 
```

**CSS**

```
#gezzamondo .sidebar #twitter #tweet{
  color:#099!important;
}

#gezzamondo .sidebar #twitter .twitter-header{
  background-image:url(../images/twitter.png);
  background-repeat:no-repeat;
  padding-left:20px;
}

#gezzamondo .sidebar #twitter #tweet ul li img{
  float:left;
  margin-top:-25px;
}

#gezzamondo .sidebar #twitter #tweet ul li {
}

.followme{
  margin-top:15px;
  float:right;
} 
```

**JS**

```
<!-- Twitter feed -->
<script src="http://twitterjs.googlecode.com/svn/trunk/src/twitter.min.js"></script>
<script type="text/javascript">
  getTwitters('tweet', {
    id: 'gezzamondo',
    count: 1,
    enableLinks: true,
    ignoreReplies: true,
    clearContents: true,
    <!--template: '"%text%" <a href="http://twitter.com/%user_screen_name%/statuses/%id%/">%time%</a>' -->
    template: '"%text%" <img src="%user_profile_image_url%" height="" width="" /><a href="http://twitter.com/%user_screen_name%/statuses/%id%/">%time%</a>'
  });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T20:23:36.970

我认为问题出在您的 CSS 中；你应该在左边“左边”浮动你想要的图像。

```
.followme{
  margin-top:15px;
  float:left;
} 
```

[这是小提琴](http://jsfiddle.net/TNCodeMonkey/eMuVT/1/)

# jquery - 水平滚动布局左/右：jQuery/CSS 测验

> ID：13683211
> 
> 赞同：3
> 
> 时间：2012-12-03T12:24:46.203
> 
> 标签：jquery, layout, scroll, usability, horizontal-scrolling

看来，我想要达到的目标几乎是不可能的。

我正在尝试创建一个依赖于 jQuery 的**水平布局**，但即使关闭了 Javascript 也可以使用。我还希望保留其语义值的最干净的代码。所以我想我正在寻找最终的解决方案。:)

网络上最常见的水平布局是这样的：[http](http://www.queness.com/resources/html/scroll/horizontal.html) ://www.queness.com/resources/html/scroll/horizo​​ntal.html - 这将是完美的（即使关闭 JS 也可以使用）。我的问题是我需要让它“双向”工作（左右中间有“开始”项目）。

效果应该是这样的：[http](http://steveandjacqs.com/) ://steveandjacqs.com/网站（和编码后端）很棒，但是没有 JS 就无法使用，而且代码充满了 hack。

我的 CSS：

```
html,body { overflow: hidden; }
.wrapper { position: relative; width: 100%; height: 100%; } 
.wrapper-cont { position: relative; width: 500%; height: 100%; margin-left: -200%; }
#item-left { position: absolute: top: 0px; left: 0%; }
#item-home { position: absolute; top: 0px; left: 200%; }
#item-right{ position: absolute; top: 0px; left: 400%; }
#item-down { position: absolute; top: 200%; left: 0%; } 
```

我的 HTML：

```
<body>
<nav><ul>
     <li><a href="#item-left">Left</a></li>
     <li><a href="#item-home">Home</a></li>
     <li><a href="#item-right">Right</a></li>
     <li><a href="#item-down">Down</a></li>
</ul></nav>
<div class="wrapper">
     <div class="wrapper-cont">
           <div id="item-left">Element outside viewport on the left side</div>
           <div id="item-home">Element on the center of viewport</div>
           <div id="item-right">Element outside viewport on the right side</div>
           <div id="item-down">Element on the center of viewport but down</div>
     </div>
</div>
</body> 
```

我的 JAVASCRIPT 将在部分之间使用某种平滑动画插件（scrollTo 也许？）。浏览器滚动（至少垂直）应该被禁用，DIV 本身应该是可滚动的。

///

我应该发布我的网站的屏幕截图还是这样可以理解？

先感谢您！

PS：我或多或少是 jQuery copypasta，所以请放轻松。:)

# 更新

修改.htaccess，在进入首页时增加内链：将“http://example.com”改写为“http://example.com#home”？比我可以用“常用方式”编写布局（例如 Queness 的前一个例子）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:37:43.193

您需要遵循示例站点使用的方式。

您当前设置中的问题是

*   菜单不在 home 元素内，所以它不会随它滚动。
*   每个“*页面*”的尺寸/位置错误

要自动滚动到`#item-home`开始，您可以使用

```
<meta http-equiv="refresh" content="0;URL='#item-home'"> 
```

在`<head>`您页面的部分

* * *

演示包括这些更正/添加在[http://jsfiddle.net/gaby/QsQDK/1/](http://jsfiddle.net/gaby/QsQDK/1/)

# php - 使用 extjs 3.4 panel + dataview + jsonstore 检索数据

> ID：13683212
> 
> 赞同：3
> 
> 时间：2012-12-03T12:24:55.737
> 
> 标签：php, extjs

我正在尝试通过 dataview 显示一些数据，但由于某种原因，我收到了一条空文本消息（无数据）。这是我的数据视图：

```
xtype        : 'dataview',
emptyText    : 'No data',
id           : 'cartdata',
multiSelect  : true,
plugins      : new Ext.DataView.DragSelector( { dragSafe : true } ),
store        : new Ext.data.JsonStore({
    url           : '/aecms/user-photos-view/',
    autoLoad      : true,
    root          : 'data',
    fields        : [
    'images'
    ],
    listeners : {
        scope : this,
        load  : function(store) {
            var data = store.reader.jsonData;
            if (data.systemMessage) {
                infoReport(data.systemMessage.title, data.systemMessage.message, data.systemMessage.icon);
            }
        } 
    } 
}),
tpl          : new Ext.XTemplate(
    '<tpl for=".">',
    '<tpl for="images">',
    '<a title="{id}">test</a>',
    '</tpl>',
    '</tpl>'
    ) 
```

这是来自 php 的数据：

```
{"data":{"images":{"id":"2"}},"status":"success"} 
```

我是 extjs 的新手，感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:48:13.003

从外观上看，您没有正确返回 successProperty 值。将您的 php 代码的响应更改为，如下所示。

您商店中 JsonReader 的默认成功属性为“成功”。ExtJs 会在你的服务器响应中寻找这个属性。

[http://docs.sencha.com/ext-js/3-4/#!/api/Ext.data.JsonReader-cfg-successProperty](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.data.JsonReader-cfg-successProperty)

此外，您可能希望将数据作为 json 数组而不是对象返回。您不需要数据数组中的图像对象。

服务器响应：

```
{ "data":[{"id":"2"}], "success":true } 
```

Javascript：

```
 ...
store        : new Ext.data.JsonStore({
    url           : '/aecms/user-photos-view/',
    autoLoad      : true,
    root          : 'data',
    fields        : [
    'id'
    ],
    listeners : {
        scope : this,
        load  : function(store) {
            var data = store.reader.jsonData;
            if (data.systemMessage) {
                infoReport(data.systemMessage.title, data.systemMessage.message, data.systemMessage.icon);
            }
        } 
    } 
})
tpl: new Ext.XTemplate(
    '<tpl for=".">',
    '<a title="{id}">test</a>',
    '</tpl>'
) 
```

# scheduler - MVC3 中的 DHTMLX 重复事件

> ID：13683213
> 
> 赞同：0
> 
> 时间：2012-12-03T12:24:57.030
> 
> 标签：scheduler, dhtmlx

我在我的 MVC3 项目中使用了 DHTMLX 调度程序。我需要使用定期事件调度程序。除了 DB，所有配置似乎都很好。我需要知道我需要在服务器上包含哪些必要字段以进行重复事件。

以及重复事件的 xml 配置和数据检索如何。在该示例教程中，由 php 中的服务器端代码组成。所以我不知道如何为 MVC 环境编写代码。请指导我如何做到这一点。

**指数**

```
function init() {
    scheduler.templates.event_text = function (start, end, ev) {
        return 'Event: ' + ev.Description + '';
    };
    scheduler.templates.calendar_month = scheduler.date.date_to_str("%F %Y");
    scheduler.config.full_day = true;
    scheduler.locale.labels.full_day = "Full day";
    //week label of calendar
    scheduler.templates.calendar_scale_date = scheduler.date.date_to_str("%D");
    //date value on the event's details form
    scheduler.templates.calendar_time = scheduler.date.date_to_str("%d-%m-%Y");
    scheduler.config.repeat_date = "%m-%d-%Y";

    scheduler.config.update_render = "true";
    scheduler.locale.labels.section_category = 'Category';
    scheduler.locale.labels.section_location = 'Title';

    scheduler.config.lightbox.sections = [
    { name: "location", height: 15, map_to: "title", type: "textarea" },
{ name: "description", height: 50, map_to: "text", type: "textarea", focus: true },

    { name: "recurring", height: 115, type: "recurring", map_to: "rec_type", button:  "recurring" },

{ name: "time", height: 72, type: "time", map_to: "auto" },
    { name: "category", height: 22, type: "select", map_to: "category", options: [
    {key:"", label:"Select Category"},
    {key:"A", label:"Public"},
    {key:"P", label:"Private"},
    {key:"C", label:"Closed"}
           ]}

            ]

           scheduler.config.xml_date = "%m/%d/%Y %H:%i";
           scheduler.init("scheduler_here", new Date(), "month");
           scheduler.load("/Admin/EventCalendar/Dat");
           var dp = new dataProcessor("/Admin/EventCalendar/Save");
           dp.init(scheduler);
           dp.setTransactionMode("POST", false);
           } 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:23:11.397

您需要为 DB 中的相关记录定义 4 个字段

*   rec_type，将是 week_1___6 （每周，周日）
*   start_date - 发生的第一个日期
*   end_date - 最后发生日期（如果事件没有结束日期，则将其设置为 9999 年）
*   event_length - 以秒为单位的事件长度，在你的情况下为 36600

# iphone - iOS：确保用户在应用内购买前必须输入密码

> ID：13683214
> 
> 赞同：3
> 
> 时间：2012-12-03T12:25:05.367
> 
> 标签：iphone, ios, in-app-purchase, settings

> iOS 6 最酷的无名新功能之一是它不会在您每次购买应用程序时都要求您输入密码。（[http://www.cultofmac.com/201559/re-enable-password-check-in-ios-6-to-avoid-nasty-in-app-purchase-surprises-ios-tips/#LasCHqVOtcTZxIjc.99](http://www.cultofmac.com/201559/re-enable-password-check-in-ios-6-to-avoid-nasty-in-app-purchase-surprises-ios-tips/#LasCHqVOtcTZxIjc.99)）

我正在为客户编写一个儿童应用程序，有没有办法确保用户必须为应用程序内部的每次应用内购买添加密码？

我的意思是，我也可以向父母显示更改设置的信息，但也许这不是他们想要的。在父母从我的应用程序购买东西后，他们的孩子仍然不能在随后的 15 分钟内购买东西。

谢谢你的帮助！

PS：也许如果我能以某种方式读取自上次应用内购买以来的时间并检查它是否小于 15 分钟，我可以显示额外的警报。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:41:21.693

用于应用内购买的 iOS API 没有强制要求输入密码的选项。我完全理解你为什么想要它，但它只是当前 SDK 的一种可能。我也没有看到苹果很快改变这一点。

如果您查看自 iOS 5 以来 Apple 如何设置应用内购买，这甚至不是您的责任。家长可以锁定其自身设备在应用内购买的功能。

你当然可以让父母意识到这种能力，但你不能强迫它。

# vb.net - vb.net 中的打印预览为空

> ID：13683218
> 
> 赞同：1
> 
> 时间：2012-12-03T12:25:18.383
> 
> 标签：vb.net, winforms, printing, print-preview

这是我的代码：

```
Imports System.Drawing
Imports System.Drawing.Printing
Imports System.Data
Imports System.Data.OleDb
Public Class Form3
Dim dgv As New DataGridView()
Dim print As New PrintDocument()
Dim preview As New PrintPreviewDialog()
Private Sub Form3_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Dim con As New OleDbConnection("Provider=Microsoft.Jet.Oledb.4.0;Data Source=C:\Users\user\Documents\Inventory\InventoryLogin\InventoryLogin\Supplies.mdb")
    Try
        con.Open()
        Dim sql As String
        sql = "SELECT * From [product info]"
        Dim adapter As New OleDbDataAdapter(sql, con)
        Dim dt As New DataTable("product info")
        adapter.Fill(dt)

        preview.PrintPreviewControl.Zoom = 1
        preview.Document = print
        preview.Show()

        AddHandler print.PrintPage, AddressOf print_PrintPage

    Catch Ex As Exception
        MessageBox.Show(Ex.Message)
    End Try

End Sub

Protected Sub print_PrintPage(ByVal sender As Object, ByVal e As PrintPageEventArgs)
    Dim ColumnCount As Integer = dgv.ColumnCount
    Dim RowCount As Integer = dgv.RowCount

    Dim CellTopPos As Integer = print.PrinterSettings.DefaultPageSettings.Margins.Top

    For Row = 0 To RowCount - 2

        Dim CellLeftPos As Integer = print.PrinterSettings.DefaultPageSettings.Margins.Left

        For Cell = 0 To ColumnCount - 1

            Dim CellValue As String = dgv.Rows(Row).Cells(Cell).Value.ToString()
            Dim CellWidth = dgv.Rows(Row).Cells(Cell).Size.Width + 10
            Dim CellHeight = dgv.Rows(Row).Cells(Cell).Size.Height

            Dim Brush As New SolidBrush(Color.Black)
            e.Graphics.DrawString(CellValue, New Font("tahoma", 10), Brush, CellLeftPos, CellTopPos)
            e.Graphics.DrawRectangle(Pens.Black, CellLeftPos, CellTopPos, CellWidth, CellHeight)

            CellLeftPos += CellWidth
        Next

        CellTopPos += dgv.Rows(Row).Cells(0).Size.Height
    Next

End Sub
End Class 
```

我正在尝试在 vb.net 中预览和打印我的 datagridview 中的项目 用户需要在打印之前单击“打印预览”按钮来查看文档，但是当我单击该按钮时，它只显示一个空白页面。如何使 datagridview 中的记录出现在我的预览页面中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:15:50.840

我删除了 Dim dgv As New DataGridView 并替换为当前 DataGridView 的名称。

# iphone - 推送或本地通知提醒用户在已保存数据和远程数据之间进行更改

> ID：13683219
> 
> 赞同：0
> 
> 时间：2012-12-03T12:25:17.130
> 
> 标签：iphone, objective-c, ios

在我的足球俱乐部的投注应用程序中，我正在考虑为用户实施某种方式`notification`。目前，该应用程序将检查服务器并比较两个下注者的赌注，然后告诉用户他的对手是否加注。对了，这都是假钱，谁在赛季结束时积累最多的钱，谁就会中小奖，我可不想被赌局给干了！无论如何，我希望当用户下注时，即使他们不在应用程序中，也会收到通知。`notification`我需要使用哪种方法来做到这一点？

用户保存的赌注保存在 Core Data 中，其对手的赌注将在服务器上。

`background`如果该应用程序可以`calculations`在`notification`.

那很容易！但遗憾的是，从我所读到的内容来看，情况远比这复杂。但是，我不确定我会使用哪种类型的通知。

我希望我不必通过推送来做到这一点，因为这看起来很困难。如果您能提出建议并简要说明步骤，我将不胜感激。

问候，
迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:39:11.813

我知道这不是您要寻找的答案，但这正是推送通知的设计目的。请参阅[本地和推送通知编程指南](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html%23//apple_ref/doc/uid/TP40008194-CH1-SW1)。

虽然让您的应用程序在后台定期检查更新似乎很有吸引力，但后台操作仅限于[极少数类型的应用程序](http://developer.apple.com/library/ios/documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW24)，您的应用程序似乎不符合条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:43:07.637

据我了解您的问题，除了使用推送通知之外没有其他解决方案，因为您需要在应用程序处于后台时收到通知。

*   您可以简单地从服务器中提取新赌注并触发[本地通知](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW13)，但应用程序需要在前台（有一种[解决方案](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW28)可以在后台下载数据，但远非完美）。
*   正确方法：查看[Apple 的 Docs](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)并在您的服务器中构建通知系统，以将通知推送到您的应用程序。我知道一开始似乎很难，比看起来容易得多，我强烈建议你看看[Ray Wenderlich](http://www.raywenderlich.com/)的这个[教程](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)。

祝你好运。

# git - Git：相当于来自 SVN 的修复移动

> ID：13683220
> 
> 赞同：5
> 
> 时间：2012-12-03T12:25:17.560
> 
> 标签：git

我有时会修改 Java 中的类名。这导致我也需要修改文件名。

为了维护 SVN 中文件的历史记录，我使用 TortoiseSVN 中的一个名为 Repair Move 的工具。

在 Check for Modifications 视图中，您选择两个文件，一个丢失，一个未版本化。当您右键单击其中一个时，可以选择修复移动。

这将删除 SVN 中的旧文件并添加新文件，同时附加旧文件的历史记录。这样，当您 svn log 时，您可以看到自文件名更改之前以来的整个历史记录。

git 有等效的命令吗？从我读过的工作流程看来，我应该执行以下操作：

```
git mv <old filename> <new filename>
# Make the class name changes to reflect the filename change. 
git commit -a -m "Changed filename from Foo.java to Bar.java" 
```

这似乎是一个很长的路要走。

`git mv`我认为一旦我手动移动了文件并对文件本身进行了更改，我就可以使用了。似乎这`git mv`只是`mv`命令的包装器以及将更改添加到 git。

有没有办法在移动发生后通知 git 移动的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T06:25:33.563

事实证明，Git 在重命名文件时非常聪明。

当您提交已删除的文件和新文件时，会比较两个文件的内容是否相似。

如果文件达到某个阈值，则提交将自动将添加和删除文件更改为重命名。有时这会在你`git add`和`git rm`文件之后出现，有时在实际提交之后。

例如，当文件名或包名发生变化时，Java 文件会发生轻微变化。Git 比较删除文件和添加文件的内容，发现它们*大部分*相同并将其标记为重命名文件。

# mysql - 查询 MySQL 数据库

> ID：13683222
> 
> 赞同：0
> 
> 时间：2012-12-03T12:25:32.427
> 
> 标签：mysql, sql

我正在尝试查询 MySQL 数据库以返回一些结果。例如，我有一个`HTML`表单，用户可以在其中输入一些搜索值并执行它。此表单包含两个字段：`Body`和`Query String`（这些是我的数据库表的适当字段）。

我正在执行这样的查询：

```
select count(*) from Message; 
```

结果是：`7280`

如果我执行这样的查询：

```
select count(*) from Message where body like '%%'; 
```

结果是：`7280`

身体没有任何`null`价值。

`like`但是，如果我在查询中添加另一个空：

```
select count(*) from Message where body like '%%' and queryString like '%%'; 
```

结果是：`3353`。

我的`queryString`专栏包含一些`null`值，我猜这是造成这种情况的原因。我希望该查询返回的是相同的结果计数`(7280)`并忽略这些`null`值。如何使用 MySQL 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:35:09.677

```
WHERE ((body LIKE '%%') OR (body IS NULL))
and   ((queryString LIKE '%%') OR (queryString IS NULL)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:31:02.893

您可以使用`IFNULL`功能：

```
select count(*) from Message where body like '%%' and IFNULL(queryString, " ") like '%%'; 
```

# arrays - 将字节数组传递给 ActiveX

> ID：13683229
> 
> 赞同：1
> 
> 时间：2012-12-03T12:26:15.340
> 
> 标签：arrays, com, activex, byte

我想将一个字节数组传递给 ActiveX。我正在使用 delphi 7，并且正在使用 InProcess Server (DLL)。

我正在使用指向字节数组和数组大小的指针，将其传递给 InProcess Server。它运作良好。我这样做是因为我需要表现。有人看到这种方法有什么问题吗？

我看到一篇很相似的帖子：[什么数据类型适合在ActiveX方法中处理二进制数据？](https://stackoverflow.com/questions/9265884/what-data-type-is-suitable-to-handle-binary-data-in-activex-method)但没有人给出这个答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:16:45.023

将字节数组作为指针与大小信息一起传递就可以了。

然而，一些编程语言只支持所有可能类型的一小部分。例如，Visual Basic for Application（不是 VB.NET）只能处理自动化兼容的数据类型（参见[http://msdn.microsoft.com/en-us/library/cc237562(v=prot.20).aspx](http://msdn.microsoft.com/en-us/library/cc237562(v=prot.20).aspx)），甚至不是全部（例如，不支持 16 位无符号整数）。为了安全起见，只要没有好的论据，我总是使用 SAFEARRAYs。

另请注意，使用非自动化兼容接口会强制您提供自己的编组代码，以防您想使用组件 OutProc。既然你提到你打算只使用你的组件 InProc，这不应该让你担心。

问候，斯图尔特

# iphone - 管理、创建、编辑文件，如文本文件、电子表格、文件夹

> ID：13683232
> 
> 赞同：0
> 
> 时间：2012-12-03T12:26:18.383
> 
> 标签：iphone, xcode4.3

![ ](../Images/78e0afb69047686a03277b45ef68862a.png)

我是新手，我想尝试类似于上面显示的图像的应用程序（免费文档）。我如何创建、编辑、管理各种文件，如文本文件、电子表格和其他文件夹，我必须使用什么和我怎样才能做到这一点..请指导我..这将是一个很大的帮助...提前谢谢...

请给我解释 1）如何创建包含 5 个图标的小窗口？2）如何创建该文件图标 3）当我单击特定图标时，它应该打开相应的编辑器。所以请帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:34:44.560

从您的问题来看，您似乎需要学习构建应用程序的基础知识，请制作几个教程以了解您如何构建应用程序。
我会推荐来自[raywenderlich的本教程](http://www.raywenderlich.com/tutorials)

它基本上可以帮助您回答问题 1 和 3。
关于问题 2 - 它只是您可以从新的/您的平面设计师那里获得的图像。

祝你好运！

# node.js - remy 内联命令行工具返回 path.existsSync 现在称为 `fs.existsSync`

> ID：13683233
> 
> 赞同：1
> 
> 时间：2012-12-03T12:26:22.140
> 
> 标签：node.js, command-line

我正在尝试在本地使用[内联命令行工具](https://github.com/remy/inliner)来组合一些文件。但是我在控制台中收到以下错误消息。

```
path.existsSync is now called `fs.existsSync` 
```

所以我进入 /usr/local/lib/node_modules/inliner/bin/inliner 并将第 65 行从：

```
if (path.existsSync(url)) 
```

至

```
if (fs.existsSync(url)) 
```

但我仍然收到相同的错误消息。任何人都可以给我一个提示什么是错的，我该如何解决这个问题？
这里已经有一个[问题，](https://stackoverflow.com/questions/13327740/anyone-have-idea-how-to-use-inliner-remy-inliner)但这并没有解决我的问题。还是我编辑了错误的文件？
干杯
：fab

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:33:18.650

我使用`-i`命令 使内联工作

```
#-i, --images    don't encode images - keeps files size small, but more requests  
inliner -i http://fabiantheblind.info/coding.html > test2.html 
```

# html - 如何在 CSS 中将图像与纯色混合？

> ID：13683234
> 
> 赞同：0
> 
> 时间：2012-12-03T12:26:23.003
> 
> 标签：html, css

我想使用 CSS 将图像与纯色混合。如何才能做到这一点？

这是我到目前为止所得到的：

```
header {
  width: 900px;
  height: 60px; 
  background-image: url(../images/banner.jpg);
  background-color: rgba(51,102,153,0.5);
} 
```

但它不工作！

我只是无法理解这一点。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T13:31:14.057

当前接受的答案，它确实可以替代工作。但两者都将背景图像用于实际内容。此方法使用 img 标签。

HTML

```
<div class="blend">
<img src="http://sp9.fotolog.com/photo/41/8/54/butterlyinthebox/1243705008574_f.jpg" alt=" " />
</div>​ 
```

CSS

```
.blend {
    background: red;
    display: inline-block;
}

.blend img {
    opacity: 0.5;
} 
```

见这个[小提琴](http://jsfiddle.net/wzexG/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T12:40:00.093

使用两个 div，看[这个小提琴](http://jsfiddle.net/Tqmb5/1/)：

HTML：

```
<div id="wrapper">
    <div id="content"></div>  
</div> 
```

CSS：

```
#wrapper
{
    background: url("http://sp9.fotolog.com/photo/41/8/54/butterlyinthebox/1243705008574_f.jpg") no-repeat;
}

#content
{
    background-color: yellow;
    opacity: 0.5;
    width: 477px;
    height: 318px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T13:15:29.410

当前接受的答案有效，但它在语义上不正确，并且会从一些优化中受益。

您可以为此使用伪 after 元素，因此您无需为此引入额外的标记。所以标记仍然是这样的：

```
<div id="content"></div> 
```

CSS 很冗长，但更具表现力。我不喜欢“包装器”包含实际内容（图像），而“内容”只是一种简单的颜色。也没有必要淡化整个 div，但您可以使用 alpha 通道的颜色。

```
#content {
    position: relative;
    background: url("http://sp9.fotolog.com/photo/41/8/54/butterlyinthebox/1243705008574_f.jpg") no-repeat;
    width: 477px;
    height: 318px;
}
#content:after {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    background-color: rgba(255,0,0,0.5);
    pointer-events: none;
} 
```

[jsfiddle](http://jsfiddle.net/wzexG/)

# python - Aapp 在应用引擎本地浏览器上工作，但在部署后不工作

> ID：13683235
> 
> 赞同：-1
> 
> 时间：2012-12-03T12:26:25.867
> 
> 标签：python, google-app-engine

这是错误。我在应用程序的日志中找到了这个。它可能与我的应用程序运行时有关。

```
2012-12-03 04:06:01.803 /favicon.ico 200 22ms 1kb Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.14 Safari/537.17
    117.220.209.197 - - [03/Dec/2012:04:06:01 -0800] "GET /favicon.ico HTTP/1.1" 200 1406 - "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.14 Safari/537.17" "rprpfind.appspot.com" ms=23 cpu_ms=0 
    2012-12-03 04:06:01.265 / 500 350ms 0kb Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.14 Safari/537.17
    117.220.209.197 - - [03/Dec/2012:04:06:01 -0800] "GET / HTTP/1.1" 500 0 - "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.14 Safari/537.17" "rprpfind.appspot.com" ms=350 cpu_ms=80 loading_request=1 instance=00c61b117ca3c72030422ae0cb1dbc6ca386f09a
    E 2012-12-03 04:06:01.262
    /base/data/home/apps/s~rprpfind/1.363605572194595527/framework/bottle.py:96: DeprecationWarning: Python 2.5 support may be dropped in future versions of Bottle.
    E 2012-12-03 04:06:01.262
      warnings.warn(msg, DeprecationWarning)
    E 2012-12-03 04:06:01.262
    <type 'exceptions.SyntaxError'>: invalid syntax (dammit.py, line 281)
    Traceback (most recent call last):
      File "/base/data/home/apps/s~rprpfind/1.363605572194595527/main.py", line 6, in <module>
        from bs4 import BeautifulSoup
      File "/base/data/home/apps/s~rprpfind/1.363605572194595527/bs4/__init__.py", line 29, in <module>
        from .builder import builder_registry
      File "/base/data/home/apps/s~rprpfind/1.363605572194595527/bs4/builder/__init__.py", line 4, in <module>
        from bs4.element import (
      File "/base/data/home/apps/s~rprpfind/1.363605572194595527/bs4/element.py", line 5, in <module>
        from bs4.dammit import EntitySubstitution
    I 2012-12-03 04:06:01.265
    This request caused a new process to be started for your application, and thus caused your application code to be loaded for the first time. This request may thus take longer and use more CPU than a typical request for your application. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:42:52.707

看起来您正在尝试部署到 Python 2.5 应用程序引擎实例。

BeautifulSoup 4 需要 Python 2.7。将您的代码转换为使用 BeautifulSoup 版本 3，或将您的应用引擎实例升级到 Python 2.7。

# typescript - 带有 Typescript 的 Jaydata WebSql 提供程序

> ID：13683236
> 
> 赞同：1
> 
> 时间：2012-12-03T12:26:27.227
> 
> 标签：typescript, jaydata

我一直在对 OData 存储使用 jaydata 和 TypeScript，如下所述：http: [//jaystack.com/blog/typescript-meets-odata-with-the-help-of-jaydata-and-jaysvcutil](http://jaystack.com/blog/typescript-meets-odata-with-the-help-of-jaydata-and-jaysvcutil)。

现在，我正在尝试扩展应用程序以使用本地存储（例如 webSql），但似乎打字稿声明文件只允许实例化 OData 上下文。如何在针对不同的存储提供程序时使用声明文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T09:09:52.693

我为 JayData 工作。这么晚才回复很抱歉。在 JayData 中，我们有一个名为“本地”的“虚拟”提供程序。它隐藏了不同浏览器支持的不同本地存储技术，因此您不必担心它并为 IndexedDB、WebSQL 和 HTML5.localStorage 编写代码。只需编写一次，它就会工作。

您所要做的就是更改服务的参数，如下所示：

```
var mydatabaseService = new mydatabase.mydatabaseService({
    name: 'local',
    databaseName: 'myitems'
}); 
```

有几点需要注意： - 不支持字符串主键（JayData 不支持，但商店不支持） - 如果您想要导航属性，那么目前它仅受 sqLite 支持，因此您必须显式使用它（名称：' sqLite' 而不是 name: 'local') 和 sqlite 不能在每个设备中找到。我们将很快在其他商店实施导航。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T12:57:01.143

冒着说明显而易见的风险：您可以创建自己的`d.ts`声明文件，或编辑您一直在使用的声明文件，或者查看这里是否有一个：[https ://github.com/borisyankov/DefinitelyTyped](https://github.com/borisyankov/DefinitelyTyped)

# html - 通过浏览器流式传输实时音频 (HTML5??)

> ID：13683238
> 
> 赞同：1
> 
> 时间：2012-12-03T12:26:27.957
> 
> 标签：html, audio-streaming, html5-audio, shoutcast, icecast

我已经环顾了几天，似乎找不到任何东西。

我要做的是从单个麦克风获取音频源 - 理想情况下，这将在浏览器中完成，我想减少对任何插件的需求并尽可能限制闪光灯的使用。然后我会考虑将这个音频流广播到多个客户端（很像我猜的互联网广播），同样都是在浏览器中完成的。我看过诸如icecast和shoutcast之类的东西，他们似乎为此做了我需要的事情。

我需要知道的是是否可以完全通过浏览器捕获音频流？

（注意：这将位于 ASP.Net 应用程序中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:41:11.207

您可以尝试正在开发的 WebRTC api。Api 就像你正在做的一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:21:45.233

对于 HTML5，您可以简单地使用该标签，但是，从今天开始，Firefox 将不支持 MP3 广播，为什么？由于一些版权问题，但他们正在研究它，我听说几天后它将在 Firefox 本地可用。

检查这个流，它使用标签，在 iexplorer 或 chrome 上运行它，即使是 safari 也可以

geekius.net/电台

# ms-access - 如何在 Microsoft Access 中创建多值关系字段？

> ID：13683241
> 
> 赞同：0
> 
> 时间：2012-12-03T12:26:45.237
> 
> 标签：ms-access, ms-access-2007, ms-access-2010

我有一个名为“游戏”的表，其中包含 games.id、games.name 和 games.modus 字段。我知道 ID 应该是自动增量和整数，games.name 是一个文本值，问题是我不知道该怎么做 games.modus，因为它将有“多个选项”，另一个名为“modes”的表将是使用modes.id 和modes.name 创建，modes.name 将包含以下行：“Singleplayer”，“Multiplayer”，“LAN”，“Online”，“LAN Co-op”，“Online Co-op”， “离线合作”，我需要能够在“games.modus”字段中选择多个这些行。我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:11:04.983

您所描述的是一种 N 对 N 关系。您需要为第三个表建模，以便您可以拥有 1 对 N 和 N 对 1 的关系。据我所知，N 对 N 不能以其他方式建模。

在您的情况下，这意味着您将需要一个类似modes_per_game 的表，其中包含游戏ID 和模式ID 的外键。如果您想让结果更友好一点，那么一个简单的查询和表单就可以完成这项工作，但它必须使用中间表来构建链接。

# python - Tastypie Mongoengine ReferenceField 取消引用？

> ID：13683243
> 
> 赞同：1
> 
> 时间：2012-12-03T12:26:51.453
> 
> 标签：python, tastypie, mongoengine

尝试用tastepie和mongodb构建REST接口。我有架构

```
class ObjectsA(Document):
     attr1 = StringField(max_length=12, required=True)
class ObjectsB(Docuemnt):
     attr2 = ReferenceField(ObjectsA,
                        reverse_delete_rule=CASCADE, dbref=False) 
```

向 ObjectsB 发送 GET 请求后，我得到 json 对象，其中 attr2 为“attr2”：ObjectsA 对象”

如何获得 attr1 以响应对 ObjectsB 的请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:02:06.847

我找到了解决方案。也许它对某人有用。对我来说，这并不明显。在资源类的描述中，您必须描述所有具有 ReferenceField 类型的字段，例如：

```
from tastypie_mongoengine import fields

class CustomerResource(resources.MongoEngineResource):
    person = fields.ReferenceField(to=
        'test_project.test_app.api.resources.PersonResource',
         attribute='person', full=True)

    class Meta:
        queryset = documents.Customer.objects.all()
        allowed_methods = ('get', 'post', 'put', 'patch', 'delete')
        authorization = tastypie_authorization.Authorization() 
```

# javascript - 使用 javascript/jquery 应用上标/下标标记

> ID：13683245
> 
> 赞同：2
> 
> 时间：2012-12-03T12:26:57.310
> 
> 标签：javascript, jquery, html

我正在显示来自 MySQL 数据库的文本，其中包含类似“测量痕量气体 CH4、N2O 和 CO2 以及控制其生产和排放的过程”的文本。文本通过文本区域保存。当文本显示在 HTML Doc 中时，我想使用 javascript/jquery 将上标/下标应用于 CH4、N20 和 CO2？请让我知道这是否可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T14:21:53.863

最简单的方法是处理数据，以便将数字放置在`sub`标记内，例如 CH4 变为`CH<sub>4</sub>`。然而，这会产生印刷不良的结果（包括不均匀的行距），所以我建议生成 `CH<span class=sub>4</span>`和使用 CSS 规则

```
.sub {
  vertical-align: 0;
  position: relative;
  top: 0.8ex; 
  font-size: 80%;
} 
```

当然，可以调整使用的值，这可能取决于字体。

其他选项包括使用下标字符（如@TachyonVortex 的回答中所建议的那样）和使用 OpenType 功能进行下标`font-feature-settings`（有限的浏览器支持，有限的字体支持）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T12:33:02.640

您可以使用 Unicode 中的下标数字字符：CH₄、N₂O、CO₂。

*   [Unicode 字符 'SUBSCRIPT FOUR' (U+2084)](http://www.fileformat.info/info/unicode/char/2084/index.htm)
*   [Unicode 字符“订阅二” (U+2082)](http://www.fileformat.info/info/unicode/char/2082/index.htm)

您可以编写一个正则表达式来匹配化学式（例如：CH4）并使用下标数字字符（CH₄）重新格式化它们。

你有两个选择：

1.  将文本存储`<textarea>`在数据库中，无需重新格式化。然后，当您呈现 HTML 页面时，添加下标数字，无论是服务器端（例如：PHP）还是客户端（例如：JavaScript）。
2.  在将文本写入数据库之前重新格式化文本。

添加下标数字后，您需要确保从那时起使用 UTF-8 字符集，以避免损坏字符。

# javascript - 将 css 属性从一个 html 页面转移到另一个页面

> ID：13683248
> 
> 赞同：2
> 
> 时间：2012-12-03T12:27:03.473
> 
> 标签：javascript, html, css

我只是想知道有没有办法将 CSS 属性从一个页面带到另一个页面。

让我简要描述一下 - 我有两个网页，分别称为`one.html`和`two.html`。里面有`one.html`个按钮叫`darkview`。如果用户点击按钮，那么 `one.html`背景颜色将会改变。

在同一页面中，我有一个链接。当用户单击它时，它将转到第二页 ( `two.html`)。但现在的问题是：我已经更改了 one.html 中的背景颜色，我希望它也适用于第二页。那么如何获取该属性并应用于第二页呢？

[这是我编写的几行代码](http://jsfiddle.net/mnaresh/GL9wt/1/)。

（问题可以通过使用 JavaScript 或 jQuery 来解决。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:34:08.247

您可以使用[`localStorage`](http://diveintohtml5.info/storage.html)或[`sessionStorage`](http://code.google.com/p/sessionstorage/)保留浏览器级别的设置，或者您可以在可以保持当前状态的 Web 服务器上进行会话。

Http 是[无状态](http://en.wikipedia.org/wiki/Stateless_protocol)的，这意味着它无法记住以前的状态或请求，这就是创建会话的原因，或者在客户端、本地存储、会话存储甚至 cookie 上。只需将状态保存到变量 in`localStorage`并在`pageLoad`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:38:48.583

您可以使用 cookie 来存储状态并简单检查 cookie 是否存在以及值是什么。有没有cookie，开关做默认。

```
function setCookie(c_name,value,exdays)
{
var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
document.cookie=c_name + "=" + c_value;
}

function getCookie(c_name)
{
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++)
{
  x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
  y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
  x=x.replace(/^\s+|\s+$/g,"");
  if (x==c_name)
    {
    return unescape(y);
    }
  }
}
function checkCookie()
{
var theme=getCookie("theme");
  if (theme!=null && theme!="")
  {
  setTheme(theme);
  }
else 
  {
  theme="light";
  if (theme!=null && theme!="")
    {
    setCookie("theme",theme,365);
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:36:51.510

猜猜这有帮助。您可以将 sessionStorage 用于临时客户端存储。如果要保留值，可以使用 localStorage

一.html

```
<form>
     <input type="button" value="darkview" id="newColor"  />
</form>
<script>
window.onload = function() {
    var color = document.getElementById('newColor');
    color.onclick = function() {
        document.body.style.backgroundColor = '#ddd';
        window.sessionStorage['currentColor'] = '#ddd';
    }
}
</script>

Two.html

<script>
window.onload = function() {
    var color = window.sessionStorage['currentColor'];
    document.body.style.backgroundColor = color;
    }
}
</script> 
```

# html - CSS半星颜色

> ID：13683254
> 
> 赞同：2
> 
> 时间：2012-12-03T12:27:25.347
> 
> 标签：html, css

我有一个关于评级显示的星号的问题。我有代码

```
<style>
    .goldstardiv { color: gold; }
    .goldgraystardiv { color: khaki; }
    .graystardiv { color: gray; }
</style>
<div class="goldstardiv">&#x2605;</div>
<div class="goldgraystardiv">&#x2605;</div>
<div class="graystardiv">&#x2605;</div> 
```

如何用 css 显示具有灰色左侧站点和黄色右侧站点的明星？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T12:42:05.857

在彩色的上方放置一个带有半灰色星形（宽度 50% 溢出隐藏）的 div。

html:

```
<div class="goldstardiv">
    &#x2605;
    <div class="halfstar">&#x2605;</div>
</div> 
```

CSS：

```
.goldstardiv { color: gold; position: relative; }
.halfstar {
    position: absolute;
    top: 0;
    left: 0;
    width: 8px;    
    color: #666;
    overflow: hidden;
} 
```

半星以像素为单位，但如果你愿意，可以用它来获得百分比。

示例：http: [//jsfiddle.net/LV7SS/2/](http://jsfiddle.net/LV7SS/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T12:34:40.100

使用纯 CSS 做到这一点的唯一方法是使用[像这样](http://jsfiddle.net/wdU3e/2/)的讨厌的 hack ，这并不理想。这使用负边距（`margin-left: -104px;`）将灰色 div 置于金色 div 之上。

你最好使用图像和精灵

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T12:42:13.673

您可以通过使用 CSS 中的 content:after 属性来在灰色星上显示第二个金色星，如下所示：

```
<style type="text/css">
.star {
    display: inline-block;
    width: 20px;
    text-align: center;
}
.star.gold { color: gold; }
.star.gold-gray { color: gray; }
.star.gold-gray:after {
    display: inline-block;
    color: gold;
    content: '\2605';
    position: absolute;
    margin-left: -16px;
    width: 8px;
    overflow: hidden;
}
.star.gray { color: gray; }​
</style>

<div class="star gold">&#x2605;</div>
<div class="star gold-gray">&#x2605;</div>
<div class="star gray">&#x2605;</div>​ 
```

您确实需要具体说明尺寸才能正常工作，以便您可以正确设置半星上的负边距，并使用溢出将其裁剪为半角：隐藏，但它会满足您的需求。

（我没有在示例中指定字体大小，您可能也想这样做）

这种技术的好处是您不需要在 html 中为半星添加额外的标记，只需要正确的类即可。

**编辑**

不知何故，我将错误的链接粘贴到我的 jsFiddle 中，从以前的版本中，我仍在破解解决方案，而不是工作的解决方案......可能值得为此投反对票，但它**确实**有效！

[看到它在这里工作](http://jsfiddle.net/Ah8uZ/)。

**编辑 2**

cimmanon 提到星星“不是真正的内容”，这是非常正确的，但由于问题要求使用 CSS 解决方案来解决问题，所以我制作了一个不需要包含所有可能组合的 sprite-map 的问题。

不是因为我有任何反对精灵贴图的东西——我没有——只是因为我想试一试:)

仍然包括`<span>`每个明星的元素（很难避免），但除此之外，这都是很好的标记，我认为对于屏幕阅读器来说效果很好。

[在这里查看](http://jsfiddle.net/m4e8e/)。

```
<style type="text/css">
.stars .label {
    width: 1px;
    color: transparent;
    overflow: hidden;
    position: absolute;
}
.star {
    display: inline-block;
    width: 20px;
    text-align: center;
}
.star:before {
    display: inline-block;
    content: '\2605';
}
.star.on { color: gold; }
.star.half { color: gray; }
.star.half:after {
    display: inline-block;
    color: gold;
    content: '\2605';
    position: absolute;
    margin-left: -16px;
    width: 8px;
    overflow: hidden;
}
.star.off { color: gray; }​
</style>

<div class="stars">
    <span class="label">One and a half start (out of three)</span>
    <span class="star on"></span>
    <span class="star half"></span>
    <span class="star off"></span>
</div>​ 
```

# jquery - jQuery Ajax 回调数组结果

> ID：13683263
> 
> 赞同：1
> 
> 时间：2012-12-03T12:27:51.727
> 
> 标签：jquery

我有以下`jQuery Ajax`场景，其中 web 方法返回字符串集合。

1.  集合可以为空
2.  集合可以是非空但零记录。
3.  集合有一个或多个记录

以下代码工作正常。它使用[jQuery.isEmptyObject](http://api.jquery.com/jQuery.isEmptyObject/)。不建议使用`isEmptyObject()`时不要使用`Plain Object`。

我们如何在不使用 isEmptyObject() 的情况下处理结果？

注意：ajax“结果”是“不简单的”。

参考：

1.  [对象是空的吗？](https://stackoverflow.com/questions/4994201/is-object-empty)
2.  [Javascript 的 hasOwnProperty() 方法比 IN 操作符更一致](http://www.bennadel.com/blog/1919-Javascript-s-hasOwnProperty-Method-Is-More-Consistent-Than-The-IN-Operator.htm)

**代码**

```
//Callback Function
function displayResultForLog(result) 
{

if (result.hasOwnProperty("d")) 
{
    result = result.d
}

if ($.isPlainObject(result)) {
    alert('plain object');
}
else 
{
    alert('not plain');
}

if($.isEmptyObject(result))
{
    //Method returned null        
    $(requiredTable).append('No data found for the search criteria.');
}
else
{

    if (result.hasOwnProperty('length')) 
    {

        //Set the values in HTML
        for (i = 0; i < result.length; i++) 
        {
            var sentDate = result[i];
        }
    }

    else 
    {
      //Method returned non-null object; but there is no rows in that        
      $(requiredTable).append('No data found for the search criteria.');
    }

  }

 }

function setReportTable(receivedContext) {

var searchInput = '111';
$.ajax(
        {
            type: "POST",
            url: "ReportList.aspx/GetReportsSentWithinDates",
            data: '{"searchInput": "' + searchInput + '"}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            context: receivedContext, //CONTEXT
            success: displayResultForLog

        }
        );
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:44:18.870

代替

```
if($.isEmptyObject(result)) 
```

将

```
if(typeof result !== 'undefined' && result.length < 1) 
```

工作？

未定义的参考在这里[JavaScript undefined 属性](http://www.w3schools.com/jsref/jsref_undefined.asp)

> undefined 属性表示尚未为变量赋值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:32:15.760

目前我正在使用以下内容。有什么改进建议吗？

```
 function displayResultForLog(result) 
 {
   if (result.hasOwnProperty("d")) {
       result = result.d
   }

if (result !== undefined && result != null )
{
    if (result.hasOwnProperty('length')) 
    {
        if (result.length >= 1) 
        {
            for (i = 0; i < result.length; i++) {

                var sentDate = result[i];

            }
        }
        else 
        {
            $(requiredTable).append('Length is 0');
        }
    }

    else 
    {
        $(requiredTable).append('Length is not available.');
    }

}
else 
{
    $(requiredTable).append('Result is null.');
}
} 
```

未定义的参考在这里[JavaScript undefined 属性](http://www.w3schools.com/jsref/jsref_undefined.asp)

> undefined 属性表示尚未为变量赋值。

# c# - IE 8 和更早版本不显示具有长 SRC 值的 IMG 标签

> ID：13683264
> 
> 赞同：0
> 
> 时间：2012-12-03T12:28:00.743
> 
> 标签：c#, html, asp.net-mvc-3

我正在尝试通过 ajax 加载图像，然后通过使用值 format 设置标签的`src`属性来显示它。`img``data:image/png;base64,some_real_byte_data_here...`

在 Firefox 和 Chrome 上一切正常，但 IE 8。这种方式只能显示小图像。

服务器需要大量数据来计算和绘制图像，因此通过 SRC 中的 LINK（GET 方法）发送数据是不可能的。

对这个问题有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:32:36.077

这是因为对于 IE8 及以下版本：

> [数据 URI 不能超过 32,768 个字符。](http://msdn.microsoft.com/en-us/library/cc848897%28v=vs.85%29.aspx)

# web-services - 使用 webservice Workflow Foundation 4.5

> ID：13683272
> 
> 赞同：0
> 
> 时间：2012-12-03T12:28:41.087
> 
> 标签：web-services, workflow-foundation-4

我的解决方案有 2 个项目。一个是工作流服务，另一个是 Web 服务。我想知道是否可以让工作流使用 Web 服务，而无需创建自定义代码活动......

基本上，网络服务是一种即叫即忘的东西......我尝试了“发送”活动，但我无法让它工作......

我还从 MSDN 下载了代码示例，但找不到适合我的案例...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:26:07.383

只要您的 Web 服务是与 WCF 兼容的服务，您就可以添加服务引用并生成所需的自定义活动。如果可行，您还可以配置标准的 Send 和 ReceiveReply 来做同样的事情。如果您使用的是 ASMX/WSE 样式的 Web 服务，这通常可以工作，但需要做更多的工作才能使消息契约正确。

# android - 以编程方式更改变量标识符

> ID：13683273
> 
> 赞同：0
> 
> 时间：2012-12-03T12:28:42.727
> 
> 标签：android

我有一个关于 Android 的问题，我一直在努力解决。在我的 android 项目中，有一个名为 Tracks.java 的类，在这个类中有静态 int[]，如下所示：

```
public class Tracks(){

static int[] Track1 = {1, 2, 3, 4, 5}
static int[] Track2 = {6, 7, 8, 9, 10}
.....
static int[] Track10 = {45, 46, 47, 48, 49}

} 
```

在另一个名为 Race.java 的类中，我需要使用这些 int[]，具体取决于当前正在使用的轨道数。

```
public class License extends Activity implements OnClickListener{

        int TrackNO = 1;
        int checkpoint;

        @Override
        protected void onCreate(Bundle savedInstanceState) {

        checkpoint = Tracks.Track1[0]; //Now checkpoint == 1;

        } 
```

如果我现在将 TrackNO 更改为 2，那么 int 检查点应该 == 6。这如何实现？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:33:28.350

将您的曲目放入 ArrayList 中。

```
ArrayList<int[]> trackList = new ArrayList<int[]>();

trackList.add(track1);
trackList.add(track2); 
```

之后

```
int[] track = trackList.get(1); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T12:36:10.537

不要将`checkpoint`变量设置在`onCreate`. 曲目在运行时正在改变，对吗？您应该有一个名为的方法，例如`changeTrack(int track)`：

```
public void changeTrack(int track) {
    switch(track) {
    case 1:
        checkpoint = Tracks.Track1[0];
        break;
    case 2:
        checkpoint = Tracks.Track2[0];
        break;
    ....
    }
} 
```

或者，您可以将所有`Track`数组添加到另一个数组/列表中，然后从该列表中访问它们。

# mysql - 如何在数据库查询中查询 +/- 10 天 TheDate

> ID：13683274
> 
> 赞同：1
> 
> 时间：2012-12-03T12:28:48.437
> 
> 标签：mysql, cakephp-2.1

Okei，所以我试图从我的数据库中检索一些信息，设置为 +/- 10 天。

价值观：

```
Event.start_date = y-m-d
Event.end_date = y-m-d
My.date = y-m-d

$conditions["My.date >="] = date( 'Y-m-d');
$conditions["My.date -10 >="] = Event.start_date;
$conditions["My.date +10 >="] = Event.end_date; 
```

有什么建议我可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:33:55.827

在您的查询中试试这个

如果您要检查今天的日期：

```
WHERE startDate BETWEEN NOW() AND DATE_ADD(NOW(), INTERVAL 10 DAY) 
```

如果您要检查自己的结束日期：

```
WHERE startDate BETWEEN endDate() AND DATE_ADD(endDate(), INTERVAL 10 DAY) 
```

回去 - 10 天

```
WHERE startDate BETWEEN DATE_ADD(startDate(), INTERVAL -10 DAY) AND endDate() 
```

请根据您的需要调整逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:07:50.080

就是这样:)

```
$conditions = array(
 "OR" => array(
array('My.date BETWEEN DATE_ADD(?, INTERVAL -10 DAY) AND ?' => array($data['Event']['start_date'],$data['Event']['end_date'])),
array('My.date BETWEEN ? AND DATE_ADD(?, INTERVAL 10 DAY)' => array($data['Event']['start_date'],$data['Event']['end_date']))
            )
); 
```

# jquery - Jquery UI Accordion 不适用于嵌套表

> ID：13683282
> 
> 赞同：1
> 
> 时间：2012-12-03T12:29:27.920
> 
> 标签：jquery, css, jquery-ui, jquery-ui-accordion

我正在尝试在我的 jQuery UI 手风琴中包含一个表格。

由于某种原因，包含表格的部分（“下载作业”）不能顺利向下/向上滑动。

手风琴的其他部分似乎工作得很好。

了解问题的最佳方法是查看 - 请参阅[http://testing.xenongroupadmin.com/docman/admin/Assignments/assignments.html](http://testing.xenongroupadmin.com/docman/admin/Assignments/assignments.html)

在这个主题上，手风琴似乎也有轻微的 CSS 故障。如果您查看“下载作业”选项卡的底部，则会在下一个选项卡上方的边框中出现一个小中断。这似乎与桌子有关。如果有人有任何想法，我很想听听他们的意见！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T12:33:32.977

表格并没有真正“做”明确的高度，一旦你能看到它们，你就会看到一切。他们的知名度是全有或全无。

现在，包含表格的 div 是另一回事。只需将您的表格包装在一个 div 中，让该 div 成为触发链接的兄弟，您应该可以轻松度过。

```
<li>
  <a href="#download">Download Assignments</a>
  <div>
    <table>
  </div>
</li> 
```

# javascript - 谷歌地图标准信息窗口

> ID：13683284
> 
> 赞同：0
> 
> 时间：2012-12-03T12:29:46.977
> 
> 标签：javascript, google-maps

我使用带有自定义信息窗口的谷歌地图
[http://jsfiddle.net/hashie5/KYtnb/](http://jsfiddle.net/hashie5/KYtnb/)
当你点击标记时它会弹出
我如何使用标准信息窗口，如谷歌地图本身的
例子：[http://maps。 google.be/maps?q=Jaarbeurslaan,+Genk&hl=nl&ll=50.965036,5.485032&spn=0.01046,0.033023&sll=51.09623,4.227975&sspn=1.335072,4.22699&oq=jaar&hnear0+6,+Limburg,+3格韦斯特&t=m&z=16&iwloc=A](http://maps.google.be/maps?q=Jaarbeurslaan,+Genk&hl=nl&ll=50.965036,5.485032&spn=0.01046,0.033023&sll=51.09623,4.227975&sspn=1.335072,4.22699&oq=jaar&hnear=Jaarbeurslaan,+3600+Genk,+Limburg,+Vlaams+Gewest&t=m&z=16&iwloc=A)

所以我可以使用“Routebeschrijving”（路线）链接等。

```
function initialize() {
var myLatlng = new google.maps.LatLng(50.965049,5.484231);
var myOptions = {
  zoom: 14,
  center: myLatlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}

var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

var contentString =
    '<div id="infowindow">' +
    'Galaconcert<br />' +
    'Jaarbeurslaan 2-6<br />' +
    '3690 Genk' +
    '</div>'
;

var infowindow = new google.maps.InfoWindow();

var marker = new google.maps.Marker({
    position: myLatlng,
    map: map,
    title: 'Galaconcert'
});
google.maps.event.addListener(marker, 'click', function() {
    infowindow.setContent(contentString);
    infowindow.open(map, marker);
});
}
$(function(){
    initialize();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:44:29.780

您不能使用“来自 Google 地图的信息窗口”（除非您使用嵌入式 Google 地图）。但是您可以使用 API [Directions 服务](https://developers.google.com/maps/documentation/javascript/directions)或通过创建指向 Google 地图的链接自己实现相同的功能。

# python - 我对 manage.py 和 django-admin.py 的使用将如何随 virtualenv 改变？

> ID：13683289
> 
> 赞同：0
> 
> 时间：2012-12-03T12:29:55.063
> 
> 标签：python, django

我已将所有包完全转移到 virtualenv，但我的项目文件是由全局 Django 安装生成的。

我想知道我需要对 manage.py 文件进行哪些更改，我现在需要使用 virtualenv django-admin.py 文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:41:53.533

只要你在虚拟环境中安装了所有你需要的包，包括 Django，并且你已经通过获取它的`activate`脚本来激活虚拟环境，你就没有问题。需要注意的一件事是您应该`manage.py`像这样运行：

```
$ python manage.py 
```

而不是这样：

```
$ ./manage.py 
```

前者将确保您使用的是虚拟环境的 Python 解释器，而不是全局安装的解释器。

激活虚拟环境后，您将使用其`django-admin.py`文件而不是全局安装的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:42:23.733

不，virtualenv 所做的唯一事情是，它创建了一个具有自己的安装目录的环境，该环境不与其他 virtualenv 环境共享库（并且可选地也不访问全局安装的库）。因此，它只是意味着您的项目将使用来自 virtualenv 的库和包。所以你不必改变你的manage.py。

# python - Python 冒泡排序代码说明

> ID：13683292
> 
> 赞同：-3
> 
> 时间：2012-12-03T12:29:58.543
> 
> 标签：python, sorting, bubble-sort

我是 Python 新手。我们如何一步一步地解释这段代码。我无法理解某些部分。

```
myList=[43,21,12,80,3,2,35]
end=len(myList)-1
while (end!=-1):
    swapped=-1
    for i in range(0,end):
        if myList[i]>myList[i+1]:
            temp=myList[i]
            myList[i]=myList[i+1]
            myList[i+1]=temp
            swapped=i
    end=swapped
print(myList) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:06:26.043

**如果**您忘记添加会中断循环的代码，使用`while True`会创建一个无限循环。在这种情况下，只有在 for 循环结束时仍为 -1时才会发生中断。因此下面的代码：**`swapped`**

 **```
myList=[43,21,12,80,3,2,35]
end=len(myList)-1
while True:
    swapped=-1
    for i in range(0,end):
        if myList[i]>myList[i+1]:
            temp=myList[i]
            myList[i]=myList[i+1]
            myList[i+1]=temp
            swapped=i
    if swapped == -1:
        break
print(myList) 
```

如果您计算此示例的行数并将它们与原件进行比较，您会发现原件短了 1 行。在我看来，检查一个值是比使用`while True:`（或`while False:`就此而言）更好的工作方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:16:59.353

我认为您的所有问题都已得到解答（它们 while(True) = 无限循环），并且 swapped 充当“已排序”标志。

在 python 中非常酷的一件事是您不需要像在 c 中那样使用临时变量，因此您可以将 if 语句更改为：

```
if myList[i]>myList[i+1]:
    myList[i+1], myList[i] = myList[i], myList[i+1]
    swapped=i 
```

或者

```
if myList[i]>myList[i+1]:
    j = i + 1
    myList[j], myList[i] = myList[i], myList[j]
    swapped=i 
```

如果您不想计算 i+1 两次

还要注意 range(0,-1) 返回一个空列表而不是抛出异常**

# actionscript-3 - 垂直射击游戏 AS3 中的随机敌人

> ID：13683296
> 
> 赞同：1
> 
> 时间：2012-12-03T12:30:06.430
> 
> 标签：actionscript-3, flash, actionscript

我正在开发一款垂直射击游戏。我需要找到一种方法让随机物体（敌人）从顶部下降。目前，我有 1 个从顶部随机掉落的敌人正在工作。这是我正在使用的代码。

主要代码

```
// Full Screen Command
fscommand("fullscreen","true");
stop();

//center player on screen
mcMain.x = 880,45;
mcMain.y = 940,40;

//these booleans will check which keys are down
var leftDown:Boolean = false;
var upDown:Boolean = false;
var rightDown:Boolean = false;
var downDown:Boolean = false;
//how fast the character will be able to go
var mainSpeed:int = 25;

//how much time before allowed to shoot again
var cTime:int = 0;
//the time it has to reach in order to be allowed to shoot (in frames)
var cLimit:int = 12;
//whether or not the user is allowed to shoot
var shootAllow:Boolean = true;

//how much time before another enemy is made
var enemyTime:int = 0;
//how much time needed to make an enemy
//it should be more than the shooting rate
//or else killing all of the enemies would
//be impossible :O
var enemyLimit:int = 16;

//the player's score
var score:int = 0; 

//this movieclip will hold all of the bullets
var bulletContainer:MovieClip = new MovieClip();
addChild(bulletContainer);

//whether or not the game is over
var gameOver:Boolean = false;

//adding a listener to mcMain that will move the character
mcMain.addEventListener(Event.ENTER_FRAME, moveChar);
function moveChar(event:Event):void{
//checking if the key booleans are true then moving
//the character based on the keys
if(leftDown){
    mcMain.x -= mainSpeed;
}
if(upDown){
    mcMain.y -= mainSpeed;
}
if(rightDown){
    mcMain.x += mainSpeed;
}
if(downDown){
    mcMain.y += mainSpeed;
}
//keeping the main character within bounds
if(mcMain.x <= 0){
    mcMain.x += mainSpeed;
}
if(mcMain.y <= 0){
    mcMain.y += mainSpeed;
}
if(mcMain.x >= stage.stageWidth - mcMain.width){
    mcMain.x -= mainSpeed;
}
if(mcMain.y >= stage.stageHeight - mcMain.height){
    mcMain.y -= mainSpeed;
}

    //Incrementing the cTime

//checking if cTime has reached the limit yet
if(cTime < cLimit){
    cTime ++;
} else {
    //if it has, then allow the user to shoot
    shootAllow = true;
    //and reset cTime
    cTime = 0;
}
//adding enemies to stage
if(enemyTime < enemyLimit){
    //if time hasn't reached the limit, then just increment
    enemyTime ++;
} else {
//defining a variable which will hold the new enemy
var newEnemy = new Enemy();
//making the enemy offstage when it is created
newEnemy.y = -1 * newEnemy.height;
//making the enemy's x coordinates random
//the "int" function will act the same as Math.floor but a bit faster
newEnemy.x = int(Math.random()*(stage.stageWidth - newEnemy.width));
//then add the enemy to stage
addChild(newEnemy);
//and reset the enemyTime
enemyTime = 0;
}
//updating the score text
txtScore.text = 'SCORE: '+score;
}
//this listener will listen for down keystrokes
stage.addEventListener(KeyboardEvent.KEY_DOWN, checkKeysDown);
function checkKeysDown(event:KeyboardEvent):void{
//making the booleans true based on the keycode
//WASD Keys or arrow keys
if(event.keyCode == 37 || event.keyCode == 65){
    leftDown = true;
}
if(event.keyCode == 39 || event.keyCode == 68){
    rightDown = true;
}

//checking if the space bar is pressed and shooting is allowed
if(event.keyCode == 32 && shootAllow){
//making it so the user can't shoot for a bit
shootAllow = false;
//declaring a variable to be a new Bullet
var newBullet:Bullet = new Bullet();
//changing the bullet's coordinates
newBullet.x = mcMain.x + mcMain.width/2 - newBullet.width/2;
newBullet.y = mcMain.y;
//then we add the bullet to stage
bulletContainer.addChild(newBullet);
mcMain.gotoAndPlay(1);
}
}
//this listener will listen for keys being released
stage.addEventListener(KeyboardEvent.KEY_UP, checkKeysUp);
function checkKeysUp(event:KeyboardEvent):void{
//making the booleans false based on the keycode
if(event.keyCode == 37 || event.keyCode == 65){
    leftDown = false;
}
if(event.keyCode == 39 || event.keyCode == 68){
    rightDown = false;
}

} 
```

敌对阶级

```
package{
//we have to import certain display objects and events
import flash.display.MovieClip;
import flash.events.*;
//this just means that Enemy will act like a MovieClip
public class Enemy extends MovieClip{
    //VARIABLES
    //this will act as the root of the document
    //so we can easily reference it within the class
    private var _root:Object;
    //how quickly the enemy will move
    private var speed:int = 5;
    //this function will run every time the Bullet is added
    //to the stage
    public function Enemy(){
        //adding events to this class
        //functions that will run only when the MC is added
        addEventListener(Event.ADDED, beginClass);
        //functions that will run on enter frame
        addEventListener(Event.ENTER_FRAME, eFrame);
    }
    private function beginClass(event:Event):void{
        _root = MovieClip(root);
    }
    private function eFrame(event:Event):void{
        //moving the bullet up screen
        y += speed;
        //making the bullet be removed if it goes off stage
        if(this.y > stage.stageHeight){
            removeEventListener(Event.ENTER_FRAME, eFrame);
            _root.removeChild(this);
        }
        //checking if it is touching any bullets
        //we will have to run a for loop because there will be multiple bullets
        for(var i:int = 0;i<_root.bulletContainer.numChildren;i++){
            //numChildren is just the amount of movieclips within 
            //the bulletContainer.

            //we define a variable that will be the bullet that we are currently
            //hit testing.
            var bulletTarget:MovieClip = _root.bulletContainer.getChildAt(i);

            //now we hit test
            if(hitTestObject(bulletTarget)){
                //remove this from the stage if it touches a bullet
                removeEventListener(Event.ENTER_FRAME, eFrame);
                _root.removeChild(this);
                //also remove the bullet and its listeners
                _root.bulletContainer.removeChild(bulletTarget);
                bulletTarget.removeListeners();
                //up the score
                _root.score += 5;
            }
        }

        //hit testing with the user
        if(hitTestObject(_root.deadLine)){
            //losing the game
            _root.gameOver = true;
            _root.gotoAndStop('lose');
        }

        //checking if game is over
        if(_root.gameOver){
            removeEventListener(Event.ENTER_FRAME, eFrame);
            this.parent.removeChild(this);
        }

    }
}
} 
```

我正在使用这里的教程：http: [//www.flashgametuts.com/tutorials/as3/how-to-make-a-vertical-shooter-in-as3-part-1/](http://www.flashgametuts.com/tutorials/as3/how-to-make-a-vertical-shooter-in-as3-part-1/)

任何帮助都非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:17:47.290

我曾经在 Flash 中制作游戏，并利用这种情况在我的游戏中不断添加敌人。

```
if (Math.floor(Math.random() * 90) == 5){ 
```

在这种情况下，您可以使用您的代码随机添加 1 个敌人

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:30:00.670

我认为你应该得到一个连接到你的主代码的计时器类。

获取全局计数器。

```
 int count=0;
   int timeElapsedToNewEnemy = int((Math.random()*10+1)*10);
   //get u a number from 10 to 100 
```

得到你的计时器

```
 var time:Timer=new Timer(100,0);// each 1/10 seconds 
   time.start();
   time.addEventListener(TimerEvent.TIMER, countTime); 
```

获取计时器的功能

```
 function countTime(e:TimerEvent):void
   {//increment ur timer
    count++;
if  (cont == timeElapsedToNewEnemy)
     {
    cont=0;//restar ur counter..
            //createUrNewEnemyHere  
            //get a new timeElapsedToEnemy
            timeElapsedToNewEnemy = int((Math.random()*10+1)*10);
     }
    } 
```

现在你可以很容易地调整它以在每个随机 x 时间创建随机敌人。

让我知道它是否适合你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T08:22:22.933

谢谢大家，但我找到了解决方案。

```
var newEnemy = new (getDefinitionByName("Enemy"+Math.floor(Math.random()*4))); 
```

然后创建敌人的不同电影剪辑作为敌人

# macos - Flash CS6 不显示 AS3 项目 (OS X)

> ID：13683298
> 
> 赞同：0
> 
> 时间：2012-12-03T12:30:20.867
> 
> 标签：macos, actionscript-3, flash, apache-flex, flash-cs6

Flash CS6 在调试时不再显示任何 AS3 项目。在为调试而编译时，它会在 Flash 内部的默认“调试窗口”中显示为白色。如果我在调试器窗口中单击鼠标右键，它会显示“未加载电影”。没有显示编译器错误。生成的 swf 文件只有在使用 Finder 中的 Flash Player 打开时才会运行。

这适用于我知道到目前为止一切正常的所有项目。我还测试了创建一个新的空白 FLA，我只在其上绘制一个具有相同结果的矩形。

但是，如果我选择 10 之前的 Flash Player 版本（回退到 AS2）作为仅包含一个矩形的测试文件的目标，它***确实可以***编译并显示得很好。

我已经卸载了 Flash 和 Flash Builder（并删除了库文件夹中应用程序的任何痕迹），然后多次重新安装，但没有任何结果。我还尝试卸载 Flash Player 和 Flash Player Debugger，但无济于事。为此，我遵循 Adob​​e 网站上的建议并使用他们的 Flash Player 卸载应用程序，但它似乎并没有卸载播放器的所有实例......

我相信问题出在*Flash Player Debugger*的版本上，Flash在调试时在内部使用它来显示 swf，并且它似乎在重新安装之间以某种方式持续存在。有没有确定的方法可以完全重置它？

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:25:50.783

我终于自己发现了问题。似乎名为 FlashFirebug 的 Chrome 扩展程序会随机导致这些问题。当我停用扩展程序时，Flash 再次开始正常工作。

# c# - 在网格中添加新行后值被清除

> ID：13683299
> 
> 赞同：0
> 
> 时间：2012-12-03T12:30:21.407
> 
> 标签：c#, asp.net, .net, gridview

当我尝试向现有网格添加新行时，我的值正在被清除。使用 Viewstate 我维护数据表彻底页面并将其绑定到网格。认为这些值在回发期间被清除。

// 添加新行

```
int rowIndex = 0;

        if (ViewState["CurrentTable"] != null)
        {
            DataTable dtCurrentTable = (DataTable)ViewState["CurrentTable"];
            DataRow drCurrentRow = null;
            int i;

            if (dtCurrentTable.Rows.Count > 0)
            {
                for (i = 1; i <= dtCurrentTable.Rows.Count; i++)
                {
                    TextBox txtguide = (TextBox)grdreports.Rows[rowIndex].FindControl("txtAccNo");
  drCurrentRow = dtCurrentTable.NewRow();

                    dtCurrentTable.Rows[i - 1]["txtAccNo"] = txtguide.Text;
 rowIndex += 1;

                }
                drCurrentRow = dtCurrentTable.NewRow();
                dtCurrentTable.Rows.Add(drCurrentRow);
                ViewState["CurrentTable"] = dtCurrentTable;
                ViewState["rowcount"] = dtCurrentTable.Rows.Count;
                grdreports.DataSource = dtCurrentTable;
                grdreports.DataBind();

            }
} 
```

// aspx 页面：

```
<asp:GridView ID="grdreports" runat="server" AutoGenerateColumns="false">
        <Columns>
            <asp:TemplateField>
                <HeaderTemplate>
                    S.No</HeaderTemplate>
                <ItemTemplate>
                    <%#Container.DataItemIndex+1 %>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Acc.No/Tel.No">
                <ItemTemplate>
                    <asp:TextBox ID="txtAccNo" runat="server" Text='<%#DataBinder.Eval(Container.DataItem, "nvrGuide")%>'></asp:TextBox>
                </ItemTemplate>
            </asp:TemplateField>
 <asp:TemplateField HeaderText="AddNew" ShowHeader="false">
                <ItemTemplate>
                    <asp:LinkButton ID="lbtnAddGuide" runat="server" CommandName="Add" Text="Add New"
                        OnClick="lbtnAddGuide_OnClick"></asp:LinkButton>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Delete" ShowHeader="false">
                <ItemTemplate>
                    <asp:LinkButton ID="lbtnDeleteGuide" runat="server" CommandName="Delete" Text="Delete"
                        OnClick="lbtnDeleteGuide_OnClick"></asp:LinkButton>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:11:56.187

**我的猜测是，名称不同。**

这意味着，名字

```
`Text='<%#DataBinder.Eval(Container.DataItem, "nvrGuide")%>'` 
```

.aspx 页面中指定的是**“nvrguide”**，但 .cs 页面中的名称

```
TextBox txtguide = (TextBox)grdreports.Rows[rowIndex].FindControl("txtAccNo"); 
```

是**"txtAccNo"**。所以我认为您在 .cs 页面中绑定为空网格的值与 .aspx 页面不同。

请在两个页面中将其更改为相同。

可能它应该为此引发错误。由于代码没有完全显示，我无法打电话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:08:43.690

对于页面回发，在页面加载事件中使用以下代码

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack)
        {

                 foreach (GridViewRow row in GridView1.Rows)
                    {
                        ((TextBox)row.FindControl("txtAccNo")).Text = Request.Form[((TextBox)row.FindControl("txtAccNo")).UniqueID];
                    }
          }
    } 
```

# asp.net-mvc - .NET MVC 应用程序与 SQL Server 的神秘超时

> ID：13683303
> 
> 赞同：0
> 
> 时间：2012-12-03T12:30:49.640
> 
> 标签：asp.net-mvc, sql-server-2008-r2, timeout, sql-server-profiler

我有一个非常特殊的问题，我正在寻找可以帮助我深入了解它的建议。

我在 SQL Server 2008 R2 数据库上有一个 .NET 3.5 (MVC3) 应用程序。

在本地和其他两台服务器上，它运行良好。但是在实时服务器上，有一个存储过程总是在 30 秒后超时。

如果我在数据库上运行存储过程，则需要几秒钟。但是如果应用程序接收到存储过程，那么分析器会说它花费了 30 多秒。如果我们直接在 DB 上运行，探查器收到的相同查询会立即运行。

此外，其他 3 个本地服务器中的任何一个都不会出现相同的问题。

如您所知，这让我发疯，我什至不知道如何诊断。偶数日志只是将超时显示为警告。

有没有人以前有过这样的事情，我可以从哪里开始寻找修复？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:44:12.177

您的应用程序中可能发生了一些在服务器上运行查询时不会发生的锁定。

`READ UNCOMMITTED`要对此进行测试，请使用或`NOLOCK`提示在您的应用程序中运行您的查询。如果它有效，您需要检查您的调用顺序或检查您的隔离级别是否过于激进。

这些可能很难确定。

# typescript - 打字稿中的 this 关键字。它是一个错误吗？

> ID：13683305
> 
> 赞同：7
> 
> 时间：2012-12-03T12:30:54.237
> 
> 标签：typescript

我有一个成员函数render()。此函数调用类 add(any) 的另一个成员。这是片段。

```
render(){
    collection.each(this.add);
} 
```

如果我在add中使用关键字“this”，则类型为window。我希望它是成员类的实例。

> 在构造函数、成员函数或成员访问器中，this 属于包含类的类实例类型。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-03T15:54:54.297

正如 JcFx 指出的那样，您的`this`范围在`each`回调中是不同的。

但是，如果您使用“胖箭头”匿名函数，它将使用词法范围规则，`this`以便您获得所需的内容：

```
render(){
    collection.each((x) => this.add(x));
} 
```

编译为以下 JavaScript：

```
X.prototype.render = function () {
    var _this = this;
    collection.each(function (x) {
        return _this.add(x);
    });
} 
```

另一种选择是显式`bind`调用`add`所需的`this`：

```
render(){
    collection.each(this.add.bind(this));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T12:47:34.857

我不认为这是一个错误。

您不再在`render()`函数的范围内，而是在`each()`.

尝试这个：

```
render(){
    var that = this;
    collection.each(that.add);
} 
```

# java - 扩展 AbstractTableModel 并动态填充 jTable

> ID：13683306
> 
> 赞同：0
> 
> 时间：2012-12-03T12:30:55.660
> 
> 标签：java, swing, jtable, abstracttablemodel

基本上，我正在研究客户端服务器架构，因此某些客户端可以在外部修改对象。

我有一家银行：

```
public class Bank{
    private List<BankingOperation> operationList = new ArrayList<BankingOperation>();

    public void addOperation(BankingOperation op) {
        this.operationList.add(op);
//...
} 
```

我的服务器：

```
public class ServerBank extends JFrame {
    private Bank bank;
    private JTable table;
    private OperationTableModel model;

    public ServerBank() {
        this.bank = new Bank();
        this.model= new OperationTableModel(this.bank.getOperationList());
        table = new JTable(model);
        getContentPane().add(new JScrollPane(table), BorderLayout.CENTER);
        pack();
    }

    public static void main (String args[]) throws Exception {

        ServerBank frame=new ServerBank();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(800,700);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

    }
    class OperationTableModel extends AbstractTableModel {

    private static final long serialVersionUID = 1L;
    private List<BankingOperation> operationList;
    public String[] colNames = { "Date", "Login", "Customer","Account", "Operation", "Amount", "Final Balance" };
    public Class<?>[] colTypes = { String.class, String.class, String.class, String.class, String.class, Integer.class,
            Integer.class };

    public OperationTableModel(List<BankingOperation> operationList) {
        super();
        this.operationList = operationList;
    }//...
} 
```

客户可以通过调用 addOperation() 在 Bank operationList 中添加一个 Operation。

问题是：JTable 如何检测并刷新显示？

因为客户端没有使用 TableModel 方法来添加操作。他们无权访问此类。最重要的是，我不知道在 TableModel 构造函数中给出银行的整个 operationList 是否是一个好主意......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:41:55.420

通过让客户访问银行使用的内部列表，您允许他们在银行的银行后面做事。有点像一家真正的银行允许访问其内部数据库，而不是强迫所有客户通过在线银行应用程序。

您应该为客户端提供对允许他们执行操作的接口的引用。这个接口的实现将控制他们所做的每一个操作都是被允许的，并且做所有必要的事情。

例如，`addOperation()`接口实现的方法不仅会将操作添加到操作列表中，还会触发表模型事件以使表显示此添加的操作。

如果银行封装了表格模型，这可以直接完成，或者通过让银行触发自定义的“添加操作”事件间接完成。表模型将监听这些事件，并触发它自己的表模型事件以更新表。

# soap - Salesforce how to return custom error object

> ID：13683313
> 
> 赞同：2
> 
> 时间：2012-12-03T12:31:08.920
> 
> 标签：soap, salesforce

I've written the following Apex class as a part of a suite of custom webservices. All have the same problem but this one is the easiest example; if I can solve it for this, I can solve it for the other webservices.

```
global class WebServiceA4S {
     global class returngetEnquiries {
        public String status {get;set;}
        public String error {get;set;}
        public List<Enquiry__c> results {get;set;}
    }

    Webservice static returngetEnquiries  getEnquiries() { 
        returngetEnquiries rtnError = new returngetEnquiries();
        rtnError.status='success';
        rtnError.error = '';
        rtnError.results = new List<Enquiry__c>();
        // id en name
        try {
            list<Enquiry__c> tmp = [Select id,name From Enquiry__c];
            rtnError.results = tmp;
        } 
         catch(Exception e) {
             rtnError.status='error';
             rtnError.error = String.valueof(e);

         }

     return rtnError;
        }
} 
```

Now if I debug the rtnError returned, just before the 'return rtnError', it does show a list of Enquiries so the code works. The problem is that if I call the Webservice (via PHP or SOAPUI) the result is empty. I use the wsdl from the class, created by salesforce of course.

I also looked at the wsdl and it looks like this:

```
...
<xsd:complexType name="returngetEnquiries">
    <xsd:sequence/>
</xsd:complexType>
<xsd:element name="getEnquiries">
    <xsd:complexType>
      <xsd:sequence/>
    </xsd:complexType>
</xsd:element>
<xsd:element name="getEnquiriesResponse">
 <xsd:complexType>
  <xsd:sequence>
   <xsd:element name="result" type="tns:returngetEnquiries" nillable="true"/>
  </xsd:sequence>
 </xsd:complexType>
</xsd:element>
... 
```

It looks like the returngetEnquiries is not defined. I tried to edit it and add the fields as defined in the class, but that doesn't help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:37:17.670

After some investigating I found the solution. It is in the returnclass. The parameters should be webservice instead of public:

```
global class returngetEnquiries {
    webservice String status {get;set;}
    webservice String error {get;set;}
    webservice List<Enquiry__c> results {get;set;}
} 
```

# scroll - UICollectionView 使用简单的 UICollectionViewCell 滚动性能不佳

> ID：13683315
> 
> 赞同：1
> 
> 时间：2012-12-03T12:31:11.917
> 
> 标签：scroll, uicollectionview, performance

我正在使用 UICollectionView 在 iPad 中显示基于网格的视图。我在屏幕上一次只有 200 个（20 行 x 10 列）单元格，每个单元格只包含一个 UILabel。它在滚动时开始变慢，并且不像在 TableView 中那样平滑。

我不知道滚动性能变慢的原因。我该如何改进？

提前致谢！

* * *

我有 3 个集合视图，但主要内容 uicollectionview 是已标记为 2 的那个。这是我的代码

```
if (collectionView.tag==0) { //This tagged collection view is for Left side selection box

    LeftSelectionBoxItem *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"SelectionCell" forIndexPath:indexPath];

    return cell;
}
else if (collectionView.tag==1){ //This tagged collection view is for to show column names

    TopColumnItem *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"ColumnCell" forIndexPath:indexPath];
    cell.columnName.text = [NSString stringWithFormat:@"%@",[self.columnNames objectAtIndex:indexPath.item]];

    return cell;
}
else if (collectionView.tag==2) { //This tagged collection view is for to show main content

    GridItem *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"GridCell" forIndexPath:indexPath];
    cell.dataLabel.text = [NSString stringWithFormat:@"%@",[[self.dataModel objectAtIndex:indexPath.section] objectForKey:[self.columnNames objectAtIndex:indexPath.item]]];

    return cell;
}
else {
    return nil;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:36:11.230

拥有很多 UILabel 有时会很昂贵。尝试将它们更改为 CATextLayers，因为它们的开销要少得多。请注意，如果您这样做并使用光栅化，您将需要告诉图层也为视网膜显示设备进行光栅化。

# c# - C# 仅在第一个字母上对字符串进行排序

> ID：13683316
> 
> 赞同：3
> 
> 时间：2012-12-03T12:31:14.993
> 
> 标签：c#, string, sorting, alphabetical

我正在尝试在 C# 中按字母顺序对字符串列表进行排序。我的代码如下所示：

```
public static List<Result> sort(List<Result> listToSort)
{
    int listSize = listToSort.Count;
    for (int i = 0; i < listSize; i++)
    {
       for (int j = 0; j < listSize; j++)
       {
           if (listToSort[i].SN[0] < listToSort[j].SN[0])
           { 
               Result tempValue = listToSort[j];
               listToSort[j] = listToSort[i];
               listToSort[i] = tempValue;
            }
        }
    }

    return listToSort;
} 
```

但它只是根据字符串的第一个字母对其进行排序。换句话说，如果我有这样的列表：

> 唐纳德、艾比、戴夫、鲍勃、山姆、皮特

它会这样排序：

> 艾比、鲍勃、唐纳德、戴夫、皮特、山姆

人们会期望“dave”出现在“donald”之前。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:34:11.617

目前，您仅按第一个字母排序，这就是您看到此结果的原因。您可以使用[Enumerable.OrderBy - LINQ](http://msdn.microsoft.com/en-us/library/bb534966.aspx)

```
List<Result> sortedList = listToSort.OrderBy(r=> r.SN).ToList(); 
```

或者对于您当前的代码，您可以将检查修改为：

```
if (string.Compare(listToSort[i].SN,listToSort[j].SN) < 0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T12:35:34.413

如何为此使用 LINQ：

```
return listToSort.OrderBy(report => report.SN) 
```

我假设您的`Report`班级有一个`string`您希望对列表进行排序的属性？

**编辑**

没有注意到您已经指定了`SN`属性，已经修改了我的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T13:25:35.377

这是因为比较第一个字符串的字符（listToSort[i].SN[0] => 产生输入的第一个字符）。如果要比较字符串值，则应使用 string.Compare() 方法。

--SJ

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T12:37:24.167

你只评估第一个字母。尝试使用传统的排序方法：

```
 public static void Sort(List<Result> listToSort)
    {
        listToSort.Sort(new ResultComparator());
    }

    public class ResultComparator : IComparer<Result>
    {
        public int Compare(Result x, Result y)
        {
            if (x == null && y == null) return 0;
            if (x == null) return 1;
            if (y == null) return 0;

            // compare based in SN
            return string.Compare(x.SN, y.SN);
        }
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-03T12:34:34.190

```
public static List<Result> sort(List<Result> listToSort)
{        
    return listToSort.OrderBy(x=>x.SN[0]).ToList();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-03T12:34:59.070

看看这部分：

```
for (int i = 0; i < listSize; i++)
{
   for (int j = 0; j < listSize; j++)
   {
       if (listToSort[i].SN[0] < listToSort[j].SN[0])
       { 
```

你是

*   仅在 SN[0] 上进行比较。如果 SN 是一个字符串，那么这就解释了你的主要结果。
*   总是使用相同的比较，无论是 i < j 还是 i > j

最好的办法是使用内置排序。Linq`OrderBy(lambda)`是最简单的，但它会创建一个新列表。对于就地排序，请使用`List<T>.Sort(Comparer)`.

如果您必须自己做，请查找一个好的排序算法（维基百科）。

# c# - 无法访问基类中的受保护成员

> ID：13683324
> 
> 赞同：8
> 
> 时间：2012-12-03T12:31:41.777
> 
> 标签：c#, inheritance, protected

考虑您有以下代码：

```
public abstract class MenuItem
    {
        protected string m_Title;
        protected int m_Level;
        protected MenuItem m_ParentItem;
        public event ChooseEventHandler m_Click;

        protected MenuItem(string i_Title, int i_Level, MenuItem i_ParentItem)
        {
            m_Title = i_Title;
            m_Level = i_Level;
            m_ParentItem = i_ParentItem;
        }
} 
```

和

```
public class ContainerItem : MenuItem
    {
    private List<MenuItem> m_SubMenuItems;

    public ContainerItem(string i_Title, int i_Level, MenuItem i_ParentItem)
                            :base(i_Title, i_Level, i_ParentItem)
    {
        m_SubMenuItems = new List<MenuItem>();
    }

    public string GetListOfSubItems()
    {
        string subItemsListStr = string.Empty;

        foreach (MenuItem item in m_SubMenuItems)
        {
           item.m_Title = "test";  // Cannot access protected member the qualifier   
                                  must be of type 'Ex04.Menus.Delegates.ContainerItem' 

        }

        return subItemsListStr;
    }
} 
```

1.  我真的不明白这个错误背后的逻辑，是的，我已经读过：http: [//blogs.msdn.com/b/ericlippert/archive/2005/11/09/491031.aspx](http://blogs.msdn.com/b/ericlippert/archive/2005/11/09/491031.aspx)
    但我仍然认为它完全不合逻辑根据受保护的访问修饰符的定义。我认为它应该可以从定义它的同一个类访问，该类是它`MenuItem`的所有派生类！（`ContainerItem`等）

2.  `m_Title`在持有对`MenuItem`（由于多态性设计原因）的引用时，您将如何访问受保护的成员？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-03T12:56:14.593

### 为什么会这样？

一个无法争论的答案是“因为规范[是这样说](http://msdn.microsoft.com/en-us/library/bcd5672a.aspx)的”：

> *仅当通过派生类类型进行访问时，才能*`protected`在派生类中访问基类 的成员。

 *但让我们在幕后探讨这个限制。

### 解释

这里发生的事情与 Eric Lippert 在您链接到的博客文章中描述的相同。您的代码与此[等效](http://ideone.com/iImqHo)：

```
public abstract class MenuItem
{
    protected string m_Title;
}

public class ContainerItem : MenuItem
{
    void Foo()
    {
        var derivedItem = new ContainerItem();
        derivedItem.m_Title = "test"; // works fine

        var baseItem = (MenuItem)derived;
        baseItem.m_Title = "test"; // compiler error!
    }
} 
```

这里的问题源于这可能发生的事实。目前，请忽略此示例使用方法而不是字段这一事实——我们将回到它。

```
public abstract class MenuItem
{
    protected void Foo() {}
}

public class SomeTypeOfItem : MenuItem
{
    protected override void Foo() {}
}

public class ContainerItem : MenuItem
{
    void Bar()
    {
        var baseItem = (MenuItem)something;
        baseItem.Foo(); // #1
    }
} 
```

查看第 1 行：编译器如何知道它`baseItem`实际上不是 a `SomeTypeOfItem`？如果是，您肯定无法访问`Foo`！因此，正如 Eric 所描述的，编译器无法**静态证明**访问始终是合法的，因此它必须禁止此代码。

请注意，在某些情况下，例如，如果

```
baseItem = (MenuItem)new ContainerItem(); 
```

甚至

```
baseItem = (MenuItem)this; 
```

编译器确实有足够的信息来证明访问是合法的，但它仍然不允许代码编译。我想那是因为编译器团队不相信实现这样的特殊情况处理程序值得麻烦（我对此表示同情）。

### 但是……但是……

这对于方法（和属性，它们是真正的方法）来说都很好——那么字段呢？那这个呢：

```
public abstract class MenuItem
{
    protected string m_Title;
}

public class SomeTypeOfItem : MenuItem
{
    protected new string m_Title;
}

public class ContainerItem : MenuItem
{
    void Foo()
    {
        var baseItem = (MenuItem)something;
        baseItem.m_Title = "Should I be allowed to change this?"; // #1
    }
} 
```

由于字段不能被覆盖，所以这里不应该有歧义，并且`MenuItem.m_Title`无论类型`something`是什么，代码都应该编译和设置。

事实上，我想不出编译器不能这样做的*技术*原因，但无论如何都有一个很好的理由：一致性。埃里克本人可能能够提供更丰富的解释。

### 那么我能做什么呢？

> 在持有对 MenuItem 的引用的同时，您将如何访问像 m_Title 这样的受保护成员（由于多态性设计原因）？

您根本无法做到这一点；你必须使成员`internal`（或`public`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T12:36:22.960

`protected`确实意味着派生类可以访问它，但是，派生类可以访问它自己实例的属性。在您的示例中，您可以访问`this.m_Title`，因为它属于实例本身，但您正在尝试访问另一个实例的受保护成员（即 list 中的实例`m_SubMenuItems`）。

您需要 getter 和 setter 方法以您尝试的方式访问它。

希望这能让它更清楚：

```
class Foo {
    protected int x;

    public void setX(int x) {
        this.x = x;
    }
}

class Bar : Foo {
    Foo myFoo = new Foo();

    public void someMethod() {
        this.x = 5;    // valid. You are accessing your own variable
        myFoo.x = 5;   // invalid. You are attempting to access the protected
                       // property externally
        myFoo.setX(5); // valid. Using a public setter
    }
} 
```*

# c++ - 使用重载运算符[]

> ID：13683326
> 
> 赞同：1
> 
> 时间：2012-12-03T12:31:59.317
> 
> 标签：c++, overloading, operator-keyword

我正在尝试使用重载运算符，但不确定如何在我的主 cpp 中使用/调用它。代码在另一个文件中，如下所示：

```
string postH::operator[](int add){
   if(add > 100)
   {return "\nsome text\n";}
    else {return "\nsome other text\n";}
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T12:33:32.473

您可以像使用普通数组索引一样使用它。

```
postH foo;
std::cout << foo[150]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:34:42.567

运算符`[]`获取大括号之间的整数值。这就是为什么你应该在你的重载函数中给出一个参数。之后，您可以照常使用运算符：`postHObj[10]`
换句话说，10 是`add`
我认为[这](http://www.learncpp.com/cpp-tutorial/98-overloading-the-subscript-operator/)会有所帮助

# linux - 监视 Linux 上文件更改的目录

> ID：13683327
> 
> 赞同：1
> 
> 时间：2012-12-03T12:32:01.953
> 
> 标签：linux, filesystems, inotify

我有一个包含文件的目录。应用程序将扫描这些文件，然后以某种方式将每个文件标记为已扫描。然后我想收到一个文件被扫描并删除它的通知。

应用程序如何将文件标记为已扫描？

常规属性不适合我，因为例如文件可以被某人读取，但这并不意味着它已被扫描。如何获得有关已扫描文件的通知？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:34:58.493

您可以使用`inotify`( [manpage](http://linux.die.net/man/7/inotify) ) 来获取有关更改的通知。您只会收到一次通知。因此无需将事物标记为“已通知”。

[这里](http://www.thegeekstuff.com/2010/04/inotify-c-program-example/)给出一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:39:21.627

我建议您不要使用“文件系统”解决方案，它可能非常复杂且有问题。

扫描的服务会在扫描每个文件后向删除服务发送一条消息，怎么样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:35:18.727

扫描文件的应用程序应该记录它已经扫描了哪些文件。小型数据库的文本文件...

# android - 暂停视频后，将搜索栏拖动到新位置时，视频不会在 videoView 中更新

> ID：13683334
> 
> 赞同：2
> 
> 时间：2012-12-03T12:32:16.417
> 
> 标签：android, android-videoview, seekbar

这是我正在开发的应用程序的示例代码。

这是我的类文件。. . .

```
public void onCreate(Bundle icicle) 
   {
     super.onCreate(icicle);
     setContentView(R.layout.main);

     sb = (SeekBar)findViewById(R.id.control_seekbar);

     mVideoView1 = (VideoView) findViewById(R.id.surface_view1);
     mVideoView1.setVideoPath("android.resource://" + getPackageName() +"/"+R.raw.play);              
     mVideoView1.pause();

     mVideoView2 = (VideoView) findViewById(R.id.surface_view2);
     mVideoView2.setVideoPath("android.resource://" + getPackageName() +"/"+R.raw.play);              
     mVideoView2.pause();

     v1 = mVideoView1.getDuration();
     v2 = mVideoView2.getDuration();

     mVideoView1.setOnPreparedListener(new OnPreparedListener() 
     {
        @Override
        public void onPrepared(MediaPlayer arg0) 
        {
            sb.setMax(mVideoView1.getDuration());
            sb.postDelayed(onEverySecond, 60);
        }
     });

     sb.setOnSeekBarChangeListener(new OnSeekBarChangeListener() 
     {  
        @Override
        public void onStopTrackingTouch(SeekBar seekBar) 
        {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) 
        {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser) 
        {
            mVideoView1.seekTo(progress);
            mVideoView2.seekTo(progress);
        }
    });

   }

   private Runnable onEverySecond=new Runnable() 
   {
        @Override
        public void run() {

            if(sb != null) {
                sb.setProgress(mVideoView1.getCurrentPosition());
            }

            if(mVideoView1.isPlaying()) 
            {
                sb.postDelayed(onEverySecond, 1000);
            }

        }
    }; 
```

这是我的 xml 文件。. . .

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent">

   <LinearLayout 
       android:id="@+id/video_ll"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:layout_above="@+id/control_btn_ll"
       android:orientation="horizontal">

        <VideoView
            android:id="@+id/surface_view1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0.5"
            android:overScrollMode="always"/>

        <VideoView
            android:id="@+id/surface_view2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0.5"
            android:overScrollMode="always"/>

   </LinearLayout>

   <LinearLayout 
       android:id="@+id/control_btn_ll"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_centerHorizontal="true"
       android:layout_alignParentBottom="true">

       <SeekBar
           android:id="@+id/control_seekbar"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:max="100"
           android:minHeight="1dp"
           android:minWidth="250dp" />

   </LinearLayout>

</RelativeLayout> 
```

我有两个视频，必须同时更新，同时拖动搜索栏。视频应该暂停，我希望 vedioView 更新到帧，我在搜索栏中拖动。

它在视频播放时工作正常，但在暂停时不更新。

先感谢您 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:58:06.900

如果暂停，Android 视频不会在搜索后更新帧。您必须让视频播放几毫秒，然后再次暂停。那是它工作的唯一方式。

# installation - 在独立的 JavaFX 应用程序 (.exe) 中包含一个图标

> ID：13683335
> 
> 赞同：12
> 
> 时间：2012-12-03T12:32:23.580
> 
> 标签：installation, icons, native, javafx-2

[按照此处](https://blogs.oracle.com/talkingjavadeployment/entry/native_packaging_cookbook_using_drop)和[此处](http://docs.oracle.com/javafx/2/deployment/self-contained-packaging.htm)的说明进行操作。我正在使用**JDK 7u9**和**NetBeans 7.2.1**。我所做的是创建相对于我的项目根文件夹（*C:\Users\Administrator\Desktop\icotest\package\windows\icotest.ico*）的整个路径。我尝试了 48x48 和 256x256 尺寸。这是我名为**icotest的***项目*的树概述：

 **```
│   build.xml
│   manifest.mf
│
├───build
│   │   built-jar.properties
│   │
│   ├───classes
│   │   └───icotest
│   │           Main$1.class
│   │           Main.class
│   │
│   ├───empty
│   └───generated-sources
│       └───ap-source-output
├───dist
│   │   icotest.html
│   │   icotest.jar
│   │   icotest.jnlp
│   │
│   └───web-files
│           dtjava.js
│           error.png
│           get_java.png
│           get_javafx.png
│           javafx-chrome.png
│           javafx-loading-100x100.gif
│           javafx-loading-25x25.gif
│           upgrade_java.png
│           upgrade_javafx.png
│
├───nbproject
│   │   build-impl.xml
│   │   genfiles.properties
│   │   jfx-impl.xml
│   │   project.properties
│   │   project.xml
│   │
│   ├───configs
│   │       Run_as_WebStart.properties
│   │       Run_in_Browser.properties
│   │
│   └───private
│       │   private.properties
│       │   private.xml
│       │
│       └───configs
│               Run_as_WebStart.properties
│               Run_in_Browser.properties
│
├───package
│   └───windows
│           icotest.ico
│
└───src
    └───icotest
            Main.java 
```

这就是**build.xml**的样子：

> ```
> <target name="-post-jfx-deploy">
>     <fx:deploy verbose="true" nativeBundles="exe" outdir="${basedir}/${dist.dir}" outfile="${application.title}">
>         <fx:application name="${application.title}" mainClass="${javafx.main.class}"/>
>         <fx:resources>
>             <fx:fileset dir="${basedir}/${dist.dir}" includes="*.jar"/>
>             <fx:fileset dir="${basedir}/${dist.dir}" includes="lib/*.jar"/>
>         </fx:resources>
>         <fx:info title="${application.title}" vendor="${application.vendor}"/>
>         <fx:preferences shortcut="true"/>
>     </fx:deploy>
> </target> 
> ```

无论我做什么 - 我仍然在**dist 构建**过程（激活**ISS**）中收到此消息，并且在相应的**build.xml文件中将****调试**标志设置为**true**：“使用默认包资源 [应用程序图标]（添加包/窗口/icotest.ico 到要自定义的类路径）”

 **知道我可能做错了什么吗？谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-22T19:44:20.393

经过反复试验并使用 XXL 答案，我发布了一种更清晰的方法，将您的自定义图标添加到 JavaFX 自包含中。顺便说一下，我正在使用 Netbeans 7.3 JDK 1.7u17 1\. 首先在项目 src 目录中的文件夹（与项目同名）中创建一个名为 package 的文件夹。

![赢](../Images/027e3cab67d970118e72af92e1c50274.png) 2\. 在文件夹包下，创建文件夹 windows，这是您放置自定义图标的位置。请确保 .ico 文件的名称与应用程序名称相同 ![在此处输入图像描述](../Images/1748d27cbfc107a456281c1de59c9ab8.png) 注意：这可以通过创建 netbeans 轻松完成一个新包，但由于某种原因，netbeans 不允许您将新包命名为“包” ![在此处输入图像描述](../Images/f6eba1f2b1206acaef2c64f91990e4fb.png)

3.  接下来，将包含 /package/windows/.ico 的目录添加到 Ant clathpath 属性 ![在此处输入图像描述](../Images/26d0cdbbb2f01c6e8d9e9748c87bf9ad.png)
4.  清理并构建您的项目，最终输出将与您的自定义图标类似 ![在此处输入图像描述](../Images/154ea9dc26d5753fb96291ac0f60f527.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-04T10:39:02.087

[在这里](https://forums.oracle.com/forums/thread.jspa?threadID=2471480)找到了**答案** 。看来，Oracle 网站上发布的指南目前与可用的实际部署方案不匹配。也就是说，在处理*NetBeans*时，**ant**不知道假定为您的根项目的当前目录。正如相应论坛主题中所建议的那样 - 只需将包含*“package/windows/${projectname}.ico”*的目录添加到**ant**的类路径中，它就会获取相关资源，即使教程声称这应该由于现有的 ( **?** ) 添加了**'.'而自动发生** 到构建脚本。

 ********![去做](../Images/3e025b6ef2e262d4a138551392502606.png)************

# c# - DateTime 和 DbNull.Value

> ID：13683338
> 
> 赞同：1
> 
> 时间：2012-12-03T12:32:34.357
> 
> 标签：c#

有谁知道为什么会这样：

```
if (_item.Created == DateTime.MinValue)
{
  ListSqlParam.Add(new SqlParameter("@TransactionCreated", DBNull.Value));
}
else
{
  ListSqlParam.Add(new SqlParameter("@TransactionCreated", _item.Created));
} 
```

但不是这个：

```
ListSqlParam.Add(new SqlParameter("@TransactionCreated",((_item.Created == DateTime.MinValue) ? DBNull.Value : _item.Created))); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:35:18.320

原因是条件运算符是特定类型的表达式。该特定类型由编译器根据运算符的两个分支中的表达式类型推断出来。
在您的代码中，编译器无法推断此特定类型，因为`DBNull.Value`并且`_item.Created`是不同且不相关的类型。您不能将其中任何一种转换为另一种的类型。

要使其工作，请将至少一个分支转换为`object`：

```
(_item.Created == DateTime.MinValue) ? (object)DBNull.Value : _item.Created 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:40:06.810

改用[SqlDateTime](http://msdn.microsoft.com/en-us/library/system.data.sqltypes.sqldatetime.aspx)：

```
_item.Created == DateTime.MinValue ? SqlDateTime.Null : new SqlDateTime(_item.Created) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:34:40.383

使用[条件运算符](http://msdn.microsoft.com/en-us/library/ty67wk28.aspx)时，条件不同侧（真和假分支）返回的两种类型应该相同或可以隐式相互转换。

`DBNull.Value`并且`DateTime`不是这样的值。

# php - How do i remove login button from a specific page in magento?

> ID：13683342
> 
> 赞同：0
> 
> 时间：2012-12-03T12:32:38.170
> 
> 标签：php, magento

How do i remove login button from a specific page in magento? I cant disable entire block but need to remove login button only from a specific page.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T20:18:58.330

I'm answering this question assuming you mean the link inside the "account.links" area.

Let's save you want to remove it from the catalog product view. The following should do it:

```
<catalog_product_view>
    <reference name="account.links>
        <action method="removeLinkByUrl"><url helper="customer/getLoginUrl"/></action>
    </reference>
</catalog_product_view> 
```

# c# - c# 4 中的 DLR 和 Javascript 解释？

> ID：13683343
> 
> 赞同：4
> 
> 时间：2012-12-03T12:32:43.080
> 
> 标签：c#, .net, dynamic, .net-4.0, dynamic-language-runtime

我想使用 DLR 从 c# 执行 javascript 代码。

所以我用`c#`和**[Jint](http://jint.codeplex.com/)**写了一个简单的代码：

```
 var script = @"
                               function show( )
                               {
                                      return  parseInt('123asd'); //in js it's 123
                               };
                               return show();";

                var result = new JintEngine().Run(script);
                Console.WriteLine(result); 
```

`parseInt('123asd')`在 javascript 中是：`123`

但我得到的结果是：

![在此处输入图像描述](../Images/f1a445bbd2b078f8cf82e78c48da9cfc.png)

*   也许我没有看到全貌，但是如果世界另一端的程序员向我发送他的脚本文件，我（和他）希望结果是一致的！

*   如果我弄错了，在什么情况下我会使用在 .Net 上运行其他代码？（我必须对*每一行代码都***非常非常怀疑**......）

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T20:16:44.417

这似乎是 Jint`partseInt`函数的当前行为。

相关代码：

```
// most common case
double result;
if(double.TryParse(number,NumberStyles.Any, CultureInfo.InvariantCulture, out result)) {
    // parseInt(12.42) == 42
    return NumberClass.New(sign * Math.Floor(result));
}
else {
    return this["NaN"];
} 
```

.NET`double.TryParse`不会解析`'123asd'`为`123`，但返回它无法解析整个字符串。

您应该在 Jint 中填写错误报告。

E：这是“标准”的问题。您永远无法在所有实现中获得 100% 兼容的标准。总会有分歧。看看 IE vs Chrome vs Firefox vs Opera。所有这些都使用不同的 javascript 引擎，因此您可以期待差异。如果你真的想要交叉兼容，你应该按照标准来实现，把所有非标准的行为都当作实现中的bug。如果您尝试解决此错误或报告它并期望它得到修复，这取决于您。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T10:09:07.170

如果您正在寻找 javascript 在 .NET 中的执行方式与在 Internet Explorer 等 Windows 程序中的执行方式之间的 1:1 匹配，那么有一种方法可以重用 Windows 脚本引擎（不仅是 Jscript，而且也 VBScript 或任何其他[ActiveX 脚本](http://en.wikipedia.org/wiki/Active_Scripting)语言）在这里描述的 SO：[parse and execute JS by C#](https://stackoverflow.com/questions/4744105/parse-and-execute-js-by-c-sharp)

这就是使用这种技术实现代码的方式：

```
 var script = @"
                           function show( )
                           {
                                  return  parseInt('123asd'); //in js it's 123
                           }"; // Note I have removed the return as it's not needed here

        using (ScriptEngine engine = new ScriptEngine("jscript"))
        {
            ParsedScript parsed = engine.Parse(script);
            Console.WriteLine(parsed.CallMethod("show"));
        }
    } 
```

这将按`123`预期输出。注意我认为可以使用新的 C# 关键字改进原始代码`dynamic`，因此我们可能可以`Console.WriteLine(parsed.show())`直接编写。*

# drupal - 如何创建动态 drupal 7 分类视图

> ID：13683346
> 
> 赞同：0
> 
> 时间：2012-12-03T12:33:00.320
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-views, drupal-taxonomy

我必须使用分类法创建 1 个视图。

让我们举个例子，我有 8 个类别：板球、足球、网球、游泳。

我必须用他们的 5 篇最新文章来展示每个类别。

Thew 视图应该显示类似的数据库

蟋蟀

1.  文章
2.  第二条

足球

1.  文章
2.  第二条

像这样，所有 8 个类别都有网格布局和 4 个类别。

现在我正在做的是创建 8 个不同的视图并在 1 页上显示。

但是当我添加新类别时，这会产生问题。

所以它的动态视图可以提供帮助，或者我必须为此编写代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:45:48.280

您应该创建一个视图来显示文章，然后要求它们与您的分类词汇有关系。

您可以按分类术语对文章进行分组，以按照您希望的方式列出它们。

# java - 片段不起作用

> ID：13683350
> 
> 赞同：0
> 
> 时间：2012-12-03T12:33:08.173
> 
> 标签：java, android, xml, fragment

嗨，我是 android 开发的新手。

我正在使用片段 - 但我不完全理解它是如何工作的。

当我启动应用程序时它崩溃了。

我用谷歌搜索了很多，但大炮解决了这个问题:(

我有一个必须使用片段的 Activity(MainActivity)。MainActivity 看起来像：

```
public class MainActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

main.xml 包含一个 ListView 和一个 Fragment：

```
<ListView 
    android:id="@+id/myListView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

<fragment class="com.todolist.NewItemFragment"
    android:id="@+id/titles_fragment"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" /> 
```

我的片段扩展了 ListFragment，看起来像：

```
public class NewItemFragment extends ListFragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    return inflater.inflate(R.layout.new_item_fragment, container, false);
    }
} 
```

new_item_fragment.xml 看起来像：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<ListView 
    android:id="@+id/myListView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

我不知道它为什么会崩溃。我一定是误会了什么。我希望那里有人可以提供帮助-不知道该怎么做:)

谢谢

* * *

我已经导入了库：

```
android.support.v4.app.FragmentActivity 
```

并使 MainActivity 类扩展 FragmentActivity

它给了我以下错误：

![在此处输入图像描述](../Images/502492890ce621929304fcc2de4c13c7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:36:13.750

像这样修改`new_item_fragment.xml`布局文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<ListView 
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

解决最明显的错误。如果应用程序仍然崩溃，则发布`Logcat`异常。

此外，当您扩展`Activity`类时，请确保您只使用`Fragment`SDK 中的相关类（如果您在应用程序中注册了兼容性包，则不要使用它）。这些课程从`Honeycomb`.

如果您要使用`FragmentActivity`，请确保使用`Fragment`兼容性包中的类（来自哪里`FragmentActivity`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:43:24.147

尝试用以下代码替换您的片段：

```
public class NewItemFragment extends ListFragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.new_item_fragment, null, false);
    }
} 
```

# c# - 在人员编辑器中显示共享点人员/组字段列表的值

> ID：13683356
> 
> 赞同：3
> 
> 时间：2012-12-03T12:33:26.660
> 
> 标签：c#, visual-studio-2010, sharepoint-2010, web-parts

我想在页面加载时在人员编辑器（Web 部件）中显示共享点人员/组值的值。这是我用来获取 Web 部件中显示的值的代码

```
 if(SPContext .Current .ListItem .ID >= 1)
        using (SPSite site = new SPSite("sitename"))
        {
            using (SPWeb web = site.OpenWeb())
            {
                var id = SPContext.Current.ListItem.ID;
                SPList lists = web.Lists["DDClist"];
                SPListItem item = lists.GetItemById(id);

                {

                    string test = Convert.ToString(item["Project No"]);
                    tb_pno.Text = test;
                    string test2 = Convert.ToString(item["Project Title"]);
                    tb_pname.Text = test2;
                    string test3 = Convert.ToString(item["DDC No"]);
                    tb_idcno.Text = test3;
                    string test4 = Convert.ToString(item["Date In"]);
                    TextBox3.Text = test4;

                }
            }
        } 
```

有没有办法用人物编辑器做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:16:05.077

这有点棘手。当我以前必须这样做时，我使用以下方法将`SPUser`对象从字段中取出：

```
SPUser singleUser = new SPFieldUserValue(
    item.Web, item["Single User"] as string).User;

SPUser[] multipleUsers = ((SPFieldUserValueCollection)item["MultipleUsers"])
    .Cast<SPFieldUserValue>().Select(f => f.User); 
```

我不确定为什么将一个用户存储为字符串，而将多个用户存储为特定对象；它也可能不一致，因此您可能需要稍微调试一下，看看您的字段中的类型是什么。

一旦你有了这些`SPUser`，你就可以填充你的`PeopleEditor`控件

使用以下帐户名称（相当冗长）：

```
ArrayList entityArrayList = new ArrayList();
foreach(SPUser user in multipleUsers) // or just once for a single user
{
    PickerEntity entity = new PickerEntity;
    entity.Key = user.LoginName;
    entity = peMyPeople.ValidateEntity(entity);
    entityArrayList.Add(entity);
}
peMyPeople.UpdateEntities(entityArrayList); 
```

这也执行某种用户的验证。

如果此控件出现的页面可能是回发的，则您需要在回发期间完成以下操作，以使值正确往返；我把它放进去，`PreRender`但它可能发生在生命周期的其他地方：

```
protected override void OnPreRender(EventArgs e)
{
    if (IsPostBack)
    {
        var csa = peMyPeople.CommaSeparatedAccounts;
        csa = peMyPeople.CommaSeparatedAccounts;
    }
} 
```

如果您想检查控件为您生成的任何错误消息（如果用户输入不正确），您需要已经完成此切换：

```
var csa = usrBankSponsor.CommaSeparatedAccounts;
csa = usrOtherBankParties.CommaSeparatedAccounts;
//ErrorMessage is incorrect if you haven't done the above
if (!String.IsNullOrEmpty(usrBankSponsor.ErrorMessage))
{
    ...
} 
```

这真的不是很好，可能有更好的方法来处理它，但这是我迄今为止的经验的结果，所以希望它能为你节省一些时间。

# java - 比较 Java 中的两个比较器对象

> ID：13683363
> 
> 赞同：1
> 
> 时间：2012-12-03T12:33:53.830
> 
> 标签：java

如果我执行以下操作

```
myObject.myMethod(myClass.getComparator()); 
```

和

```
public void myMethod(Comparator<? super myOtherObject> comparator) {
if (comparator.equals(myClass.getComparator()) {
 //do sth
}
} 
```

在我的班级

```
 static Comparator<ListItem> getComparator() {
        return new Comparator<myOtherObject>() {
            public int compare(myOtherObjectitem1, myOtherObjectitem2) {
                return (Integer.valueOf(myOtherObject.getRating()).compareTo(Integer.valueOf(myOtherObject.getRating())));
            }
        };
    } 
```

那么“//do sth”就不会被执行。所以我两次从 getComparator 得到的对象是不同的。这个怎么可能？有没有机会看到，哪个比较器“myMethod”得到了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:36:54.280

您正在`equals`此行调用该方法：

```
if (comparator.equals(myClass.getComparator()) 
```

由于您没有在 Comparator 类（它是一个匿名内部类）上明确定义此方法，因此默认为继承自的版本`Object`- 只有当它们是完全相同的对象时才会考虑两个引用相等。

并且您的`getComparator()`方法声明`return new Comparator() { ... }`，因此它每次调用构造函数并创建一个新对象。因此，一次调用的结果`getComparator`将是一个不同的对象，因此不会被视为等于另一次调用的结果。

我可以想到两种可能的方法来更改您的代码，以便相等测试返回 true：

1.  只创建一次比较器，并从 `getComparator`. 这将涉及类似于以下内容的更改`myClass`：

    ```
     private static Comparator<ListItem> cmp = new Comparator<myOtherObject>() {
           public int compare(myOtherObjectitem1, myOtherObjectitem2) {
                return (Integer.valueOf(myOtherObject.getRating()).compareTo(Integer.valueOf(myOtherObject.getRating())));
            }
        };

        static Comparator<ListItem> getComparator() {
            return cmp;
        } 
    ```

2.  提供一个明确的`equals()`实现（`hashCode()`理想情况下也是一个）。然后，您可以准确控制哪些对象被认为等于您的比较器之一。如果您为比较器定义一个具体类而不是匿名内部类，这可能会容易得多。

* * *

不过，归根结底，我担心您的方法可能不正确。两个比较器彼此相等是什么意思？我觉得这对于数据类以外的任何东西都是一个模棱两可的概念，我会犹豫是否要使用这种`Object.equals`方法。

（例如，如果相等的意思是“他们将按相同的顺序对列表进行排序”，那么我会在您的比较器类中添加一个名为`isEquivalentSortOrder`或类似的方法。这样您就可以准确地指定您的意思而不必依赖“相同”的模糊定义。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:39:25.013

为什么不在内部创建类似`myClass`的静态变量`Comparator`：

```
class myClass{
    public static Comparator<ListItem> = new Comparator<myOtherObject>() {
        public int compare(myOtherObjectitem1, myOtherObjectitem2) {
            ...
        }
    };
} 
```

# hibernate - Hibernate“无法从资源中解析映射文档”

> ID：13683366
> 
> 赞同：1
> 
> 时间：2012-12-03T12:34:04.303
> 
> 标签：hibernate, grails

我的第一个 grails 应用程序有问题。我试图修改我的休眠文件一百次，但我仍然得到这个异常：

```
 | Error 2012-12-03 13:24:23,190 [localhost-startStop-1] ERROR context.GrailsContextLoader  - Error executing bootstraps:
 Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exception is org
.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve
 reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframewor
k.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Invocation of init method failed;
 nested exception is org.hibernate.InvalidMappingException: Could not parse mapping document from resource user.hbm.xml
Message: Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exceptio
n is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot
 resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.spring
framework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Invocation of init method
 failed; nested exception is org.hibernate.InvalidMappingException: Could not parse mapping document from resource user.
hbm.xml
    Line | Method
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread
Caused by BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 's
essionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanC
reationException: Error creating bean with name 'sessionFactory': Invocation of init method failed; nested exception is 
org.hibernate.InvalidMappingException: Could not parse mapping document from resource user.hbm.xml
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread
Caused by BeanCreationException: Error creating bean with name 'sessionFactory': Invocation of init method failed; neste
d exception is org.hibernate.InvalidMappingException: Could not parse mapping document from resource user.hbm.xml
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread
Caused by InvalidMappingException: Could not parse mapping document from resource user.hbm.xml
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread
Caused by DuplicateMappingException: Duplicate class/entity mapping santrain.User
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread 
```

用户.groovy：

```
package test

class User {

    Integer id
    String f1
    String f2

    static constraints = {
    }
} 
```

休眠.cfg.xml

```
<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
    '-//Hibernate/Hibernate Configuration DTD 3.0//EN'
    'http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd'>

<hibernate-configuration>

    <session-factory>
        <mapping resource='user.hbm.xml'/>
    </session-factory>

</hibernate-configuration> 
```

编辑：当我写 - >一切正常，所以错误必须在user.hbm.xml中的任何地方......

用户.hbm.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="test">
    <class name="test.User" table="test_user">
        <id name="id" column="id" type="java.lang.Integer" />
        <property column="f1" name="f1" type="java.lang.String" />
        <property column="f2" name="f2" type="java.lang.String" />
    </class>
</hibernate-mapping> 
```

数据源.groovy

```
dataSource {
    pooled = true
    driverClassName = "com.mysql.jdbc.Driver"
    username = "testuser"
    password = "testpass"
}
hibernate {
    cache.use_second_level_cache = true
    cache.use_query_cache = false
    cache.region.factory_class = 'net.sf.ehcache.hibernate.EhCacheRegionFactory'
}
// environment specific settings
environments {
    development {
        dataSource {
            dbCreate = "update" 
            url = "jdbc:mysql://localhost:3306/testdb?autoreconnect=true"
        }
    }
... 
```

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:50:18.283

我删除了所有休眠映射并使用了静态映射 = { table 'groovy_user' } 感谢 Ian Roberts！

# ruby-on-rails - 使用mongohq时如何摆脱postgresql但仍然在heroku上使用ActiveRecord::RecordNotFound？

> ID：13683374
> 
> 赞同：1
> 
> 时间：2012-12-03T12:34:27.300
> 
> 标签：ruby-on-rails, postgresql, heroku, mongoid

编辑：

如何使用 ActiveRecord::RecordNotFound 异常让 Rails 以标准 404 响应？在许多地方建议的基本方法是将其修改`config/application.rb`为 not `require "rails/all"`，而是检查文件：[`railties/lib/rails/all.rb`](https://github.com/rails/rails/blob/master/railties/lib/rails/all.rb)并选择您想要/需要的内容。但是，如果你只是省略了关于 active_record 的部分，那么你就不能使用 ActiveRecord::RecordNotFound （显然使用固定装置也可能有问题，我不知道，因为我不使用它们）。如何解决这个问题呢？

该问题的旧解释不是很相关，但是，我将其留在这里以供参考和以下评论的上下文..

旧的解释：所以这是交易。我们有一个使用 MongoHQ 作为数据库的 Rails 应用程序。在本地，事情运行顺利，没有任何问题，但在生产和登台环境中，Heroku 似乎坚持我们必须设置/安装 postgresql 数据库和 gems。我试图删除插件和相关的配置变量，但它不会这样做。这很烦人，因为现在免费的 postgresql 会导致问题，因为如果我们启动 dynos，它将很快耗尽连接（20 个连接限制）。然而，当数据库有 0 个表时，升级到更高级别的 postgresql 似乎是一件非常愚蠢的事情。使用 MongoHQ 的其他人是如何管理这个的？我可以'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:41:18.957

关键的想法是我们仍然可以`require "activer_record"`，但是让我们省略相应的 railtie。这就是我最终放入我的`config/application.rb`

```
require "rails"
frameworks = %w(action_controller action_mailer active_resource rails/test_unit)
frameworks.each { |framework| require "#{framework}/railtie" }

# For errors like ActiveRecord::RecordNotFound
require "active_record" 
```

这个想法的功劳归于先生。本杰明奥克斯： [http ://www.benjaminoakes.com/2011/09/15/activerecordconnectionnotestablished-in-rails-3-1-on-heroku/](http://www.benjaminoakes.com/2011/09/15/activerecordconnectionnotestablished-in-rails-3-1-on-heroku/)

# magento - magento - 通过商店视图获取属性选项标签

> ID：13683378
> 
> 赞同：1
> 
> 时间：2012-12-03T12:34:39.037
> 
> 标签：magento, magento-1.7

像标题一样，如何获取特定商店视图而不是当前商店视图的属性选项值？

我想要实现的是这样的：

`public function getAttributeOptionValue($attributeCode, $attributeOptionLabel, $storeView)`

attributeOptionLabel 是当前属性选项标签。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-03T14:05:42.413

简单的！参考[`Mage_Eav_Model_Entity_Attribute::getStoreLabel()`[链接]](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Eav/Model/Entity/Attribute.php#L330)：

```
<?php

include 'app/Mage.php';
Mage::app('default');

//Generic access
$eavConfig = Mage::getSingleton('eav/config');
/* @var $eavConfig Mage_Eav_Model_Config */

$eavAttribute = $eavConfig->getAttribute(
    Mage_Catalog_Model_Product::ENTITY,  // 'catalog_product'; see db.eav_entity_type
    'description'                        // attribute code
);
/* @var $eavAttribute Mage_Eav_Model_Entity_Attribute */

Zend_Debug::dump(
    $eavAttribute->getStoreLabel('admin')
);

//For a given EAV entity-based model, the resource requires only the attribute
$product = Mage::getModel('catalog/product')->load(2);
/* @var $product Mage_Catalog_Model_Product */

$productAttribute = $product->getResource()->getAttribute('description');
/* @var $productAttribute Mage_Eav_Model_Entity_Attribute */

Zend_Debug::dump(
    $productAttribute->getStoreLabel('admin')
);

//It's also possible to get all labels:
Zend_Debug::dump(
    $productAttribute->getStoreLabels()
); 
```

# ios6 - iOS 6 Xcode 4.5 自动布局问题

> ID：13683388
> 
> 赞同：1
> 
> 时间：2012-12-03T12:35:06.660
> 
> 标签：ios6, xcode4.5, autolayout

嗨，我一直试图一遍又一遍地安排这个，没有任何进展。我一直在关注核心数据手册，它有点旧，并且没有解释新的自动布局功能。我有两个视图，一个在屏幕的顶部覆盖一半。底部的另一个覆盖屏幕的另一半。当我更改方向时，它会扭曲框，并且在横向模式下两个视图之间存在白色间隙。我希望这些框像在纵向模式下一样覆盖屏幕。

我正在使用的这段代码在[这里](https://dl.dropbox.com/u/81707637/Shapes.zip)。

请解释一下 Auto Layout 的工作原理以及它将如何适用于我的情况。提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:48:35.950

我尝试了您的代码并解决了 .Set Width ，Height in autolayout 并使用 Autolayout 方法（ios6）为 nib 文件中约束中的两个视图设置水平空间的前导和尾随。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:30:07.437

简单的。

1.  `UIViews`然后选择两者`Pin > Vertical Spacing`
2.  `UIViews`然后选择两者`Pin > Height Equally`
3.  运行，将显示与以前相同的错误`console`
4.  删除两者`Vertical Space (502)...`
5.  运行，你就完成了。

自己试试。

![在此处输入图像描述](../Images/5f6244e3dcee6876a3efab42ff16b84d.png)

# api - Google Tasks API 授权

> ID：13683389
> 
> 赞同：0
> 
> 时间：2012-12-03T12:35:06.920
> 
> 标签：api, calendar, task, google-tasks-api

我可以在 SO 上看到许多相关问题，但没有一个能准确回答我的困惑。

我在 .NET 桌面应用程序中使用 Google Calendar API，它允许用户提供他/她的用户名/密码，代表他登录并将一些事件添加到日历中。现在我想为任务功能做同样的事情。我正在尝试为此使用 Google Tasks API，但被告知我需要进行某种 OAuth 类型的身份验证，甚至在此之前，我需要转到我的 gmail 帐户并设置权限并获取我的项目“密钥”启用它。

现在我的应用程序的每个用户都需要在他们的 Gmail 帐户中执行这些步骤吗？还是我需要在我的 gmail 帐户中执行此操作一次，然后我的应用程序代码将能够使用生成的项目“密钥”来使我的用户能够将任务添加到他们的 gmail 任务列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:46:18.050

弄清楚了。对于任何很难理解这一点的人，这里是：

“密钥”生成步骤只需为每个应用程序执行一次，而不是为每个将使用您的应用程序的用户。要生成密钥，请登录您的 Google 帐户并转到[Google API 控制台](https://code.google.com/apis/console)页面。单击**API Access**按钮，您可以在此处为不同类型的应用程序（如浏览器应用程序、桌面应用程序、Android 应用程序等）生成密钥。注册后，您需要从此页面获取**客户端 ID**、**客户端密码**和**API 密钥**并将它们放入进入代码。[此处](http://code.google.com/p/google-api-dotnet-client/source/browse/?repo=samples)提供了用于创建任务和其他几个 Google 功能的示例代码 (.NET) 。

一旦您的用户运行您的应用程序，他将被带到他的默认浏览器中的 Google 帐户，并在此询问他是否要允许此应用程序写入他的日历/任务列表。此页面还将显示您可以在注册时提供的徽标和描述文本。一旦允许，在接下来的一小时内将不再需要此步骤（这可能是可调整的，我还不知道）。

# xamarin.ios - 压缩.ipa monotuch

> ID：13683394
> 
> 赞同：1
> 
> 时间：2012-12-03T12:35:24.177
> 
> 标签：xamarin.ios, compression, jpeg, ipa

从我已删除所有不必要的文件的假设开始，我的应用程序包含一个包含 jpg 图像的文件夹（最小允许 1024*700 分辨率），大小为 400 MB。当生成我的 ipa 大小是 120 MB。我尝试将这些图像转换为 PNG，然后生成 ipa，但大小超过 120 MB（140 MB），但质量有点差。

建议使用哪些最佳实践来减小应用程序的大小？

Ps 这些文件显示为画廊。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T19:01:10.577

我们在游戏中使用的工具 Draw a Stickman: EPIC 是[smusher](https://github.com/grosser/smusher)。

要安装（你必须有 ruby​​ 或 XCode 命令行工具）：

`sudo gem install smusher`

它可能会打印一些您可以忽略的安装错误。

要使用它：

```
smusher mypng.png
smusher myjpg.jpg 
```

该工具会将图片发送到雅虎的网络服务`smush.it`，并以无损方式压缩图像。

通常，您可以节省大约 20% 的文件大小而不会降低质量。

我们肯定还有其他技术，例如使用索引 PNG，但您已经在使用较小的 JPG。

# python - tkinter 画布不更新颜色

> ID：13683395
> 
> 赞同：2
> 
> 时间：2012-12-03T12:35:25.380
> 
> 标签：python, tkinter

我在画布上画了一个椭圆形，效果很好，它也显示为红色，循环也很好，因为我可以看到打印。它应该每 1000 毫秒改变一次颜色。但它不改变颜色？

```
def draw_light(self):
        w = tk.Canvas(self.frame_Light)
        w.pack()
        w.create_oval(10, 10, 30, 30, fill="yellow", tags="light")

        if self.light_on:
            w.itemconfig("light", fill="blue")
            self.light_on = False
            print "on"
        else:
            w.itemconfig("light", fill="red")
            self.light_on = True
            print "of"

        self.app.after(1000, self.draw_light) 
```

***UPDATE*** 将代码更改为您的建议仍然只生成红色画布

```
def draw_light(self):
    self.ligth_canvas = tk.Canvas(self.frame_Light)
    self.ligth_canvas.pack()
    self.ligth_canvas.create_oval(10, 10, 30, 30, fill="yellow", tags="light")

    self.app.after(0, self.change_light)

def change_light(self):
    i = self.ligth_canvas.find_withtag("light")

    if self.light_on:
        self.ligth_canvas.itemconfig(i, fill="blue")
        self.light_on = False
        print "on"
    else:
        self.ligth_canvas.itemconfig(i, fill="red")
        self.light_on = True
        print "of"

    self.app.after(5000, self.change_light) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T17:03:47.167

您遇到的问题是您在每次迭代时都创建画布，并将其打包在所有其他画布下方。当您说对象颜色没有改变时，那是因为您正在观察您创建的第一个画布；最近创建的画布的颜色正在改变，但它不在屏幕上。

更改您的代码以创建单个画布，否则您的代码将正常工作。例如：

```
import Tkinter as tk

class App(tk.Tk):
    def __init__(self):
        tk.Tk.__init__(self)
        self.frame_Light = tk.Frame(self, background="bisque")
        self.frame_Light.pack(side="top", fill="both", expand=True)
        self.light_on = True
        self.canvas = tk.Canvas(self.frame_Light)
        self.canvas.create_oval(10, 10, 30, 30, fill="yellow", tags="light")
        self.canvas.pack(side="top", fill="both", expand=True)
        self.draw_light()

    def draw_light(self):

        if self.light_on:
            self.canvas.itemconfig("light", fill="blue")
            self.light_on = False
            print "on"
        else:
            self.canvas.itemconfig("light", fill="red")
            self.light_on = True
            print "of"

        self.after(1000, self.draw_light)

app = App()
app.mainloop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:04:27.390

您使用[**itemconfig**](http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.itemconfig-method)不正确；它需要一个项目，而不是一个标签。

尝试[**find_withtag**](http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.find_withtag-method)获取所有标记为“light”的项目，然后使用`itemconfig`它。

您还应该注意 Bryan Oakley 所说的话。现在你每次都在创建一个新的画布和椭圆。最好将此方法的前三行放在不重复的其他地方。

# mongodb - 流星麻烦创造新纪录

> ID：13683398
> 
> 赞同：0
> 
> 时间：2012-12-03T12:35:32.347
> 
> 标签：mongodb, coffeescript, meteor

我正在运行 Meteor 0.5.2 和不安全的包 + coffeescript 包。

```
Cards = new Meteor.Collection "Cards"

if Meteor.isClient

    Template.makeCard.events

        # HANDLES SUBMISSION OF NEW CARD
        'submit form.makeCardForm': ->
            makeNewCard $("input.cardName").val(), $("input.percentage").val()

  # GETS ALL THE CARDS
  Template.viewCards.cards = ->
    Cards.find {}

# METHODS

makeNewCard = (cardName, percentage) ->

    # IF NO %GE GIVEN, DEFAULT TO 0
    unless percentage
        percentage = 0

    # IF CARD NAME PRESENT

    if cardName.length
        Cards.insert
            name: cardName,
            progress: percentage 
```

我检查了正确的值被传递到 makeNewCard 函数中。但是，每次我提交表单时，它都会在卡片模板中显示片刻，然后消失。

直接通过控制台插入记录时不会出现此问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T18:44:34.680

我对 Meteor 不太熟悉，但我想我看到了你的问题。您的表单上有一个提交处理程序：

```
'submit form.makeCardForm': ->
    makeNewCard $("input.cardName").val(), $("input.percentage").val() 
```

该处理程序没有返回 false ，因此表单提交将像正常`<form>`提交一样继续；所以你会在一瞬间看到你期望的结果，然后`<form>`像往常一样提交到服务器，一切都消失了。

比较一下（[http://jsfiddle.net/ambiguous/Q6cQr/](http://jsfiddle.net/ambiguous/Q6cQr/)）：

```
<form>
    <input type="submit" value="submit">
</form>​

$('form').on('submit', ->
    console.log('Doing things!')
)​​ 
```

还有这个（[http://jsfiddle.net/ambiguous/XWkXG/](http://jsfiddle.net/ambiguous/XWkXG/)）：

```
<form>
    <input type="submit" value="submit">
</form>​

$('form').on('submit', ->
    console.log('Doing things!')
    false
)​​ 
```

你应该看到区别。

您可能只需要添加一个`return false`到您的提交处理程序：

```
'submit form.makeCardForm': ->
    makeNewCard $("input.cardName").val(), $("input.percentage").val()
    false 
```

# delphi - 如何在 DataSnap 传输期间显示传输进度？

> ID：13683407
> 
> 赞同：2
> 
> 时间：2012-12-03T12:36:11.940
> 
> 标签：delphi, delphi-xe2, datasnap

我有一个 ISAPI DataSnap 服务器和一个客户端应用程序，它们通过 Web 进行通信。我一直在寻找一种在客户端应用程序检索数据或应用更新时显示数据传输进度的方法，但到目前为止，除了设置`ClientDataSet.PacketRecord`为一个小数字并运行循环来检索数据包之外，我还没有找到任何东西。由于我的数据包含 BLOB 数据，因此这种方法不太实用，因为每条记录可能会增长到 1024KB 以上。有没有办法监控我的客户端应用程序和服务器之间的实际 TCP/IP 通信？

* * *

是否可以在我的客户端应用程序上抛出一个`TIdHTTPProxyServer`并使用它监视数据传输？

更新：即使这是可能的，我还是担心在主线程中执行发送/接收例程，从而阻止任何 GUI 活动。我在某处读到可以在单独的线程中执行这些调用（`Refresh`和`ApplyUpdates`），但我不知道如何执行此操作。

# django - Django 中的 403 页

> ID：13683410
> 
> 赞同：5
> 
> 时间：2012-12-03T12:36:18.913
> 
> 标签：django

我使用 Django 1.4。我在与 404.html 相同的目录中创建了 403.html 文件（404 错误页面工作正常）。是的，我读过[这个](https://docs.djangoproject.com/en/1.4/topics/http/views/#the-403-http-forbidden-view)。然后我在浏览器中关闭 cookie，尝试登录并看到默认的 403 错误页面，而不是我的 403.html 页面：

```
Forbidden (403)
CSRF verification failed. Request aborted.
More information is available with DEBUG=True. 
```

我重新启动了 Apache，但它没有帮助。

如何解决？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T13:42:36.993

这不是默认的 403 错误页面。您看到此消息是因为[CSRF 中间件](https://docs.djangoproject.com/en/1.4/ref/contrib/csrf/)在禁用 cookie 时不起作用。

你自定义的 403 模板没有效果，因为 CSRF 中间件使用的不是一般的 403 视图，而是设置定义的视图，[`CSRF_FAILURE_VIEW`](https://docs.djangoproject.com/en/1.4/ref/contrib/csrf/#csrf-failure-view)在[django.conf.global_settings 中定义](https://github.com/django/django/blob/1.4.2/django/conf/global_settings.py#L531)为`django.views.csrf.csrf_failure`. 正如您[在源代码](https://github.com/django/django/blob/1.4.2/django/views/csrf.py)中看到的，您看到的消息在视图中是硬编码的。

您可以创建自己的[`CSRF_FAILURE_VIEW`](https://docs.djangoproject.com/en/1.4/ref/contrib/csrf/#csrf-failure-view)，但这可能不是您想要的。我建议您保留所有内容并删除 cookie 或使用其他浏览器以未经身份验证的用户身份进行测试。

# android - Cocos2d-x 应用程序无法为 Android 编译

> ID：13683412
> 
> 赞同：1
> 
> 时间：2012-12-03T12:36:25.480
> 
> 标签：android, c++, visual-studio, cygwin, cocos2d-x

*使用的软件：
Visual Studio 2012 Express
cocos2d-x 2.0-x-2.0.4
cygwin 1.7.5。
Eclipse 3.8
Android SDK last
Android NDK r8c* 我是 Android 开发新手，所以不明白有什么问题。尝试构建 cocs2d-x 标准 testcpp 项目。第一个问题是当我运行时`create-android-project.bat`- 它没有显示 Android 的目标版本（目标 - v.2.3.3。），但所有路径都是正确的。

最后它建立项目文件夹。但是下一步 - 在 cygwin 中构建包 - 如果标题出现数百个“文件或文件夹不存在”错误，则失败，没有使用很多 STL 标题并要求`<string.h>`但不只是`<string>`.

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:48:44.777

在android项目文件夹的build_native.sh文件中设置NDK路径，然后`build_native.sh`使用cygwin执行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T04:49:36.160

您必须将 build_native.sh 中的 APPNAME 变量重命名为您的 Eclipse 项目名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-03T18:19:25.477

尝试更新 android-NDK，我使用 NDK-r8d 有同样的错误，并尝试执行 build-native 脚本。

# sql-server-2005 - 在 SQL Server 2005 的 DEFAULT 定义中引用另一列

> ID：13683413
> 
> 赞同：3
> 
> 时间：2012-12-03T12:36:31.243
> 
> 标签：sql-server-2005

我想在我的表中定义一个具有以下要求的列：

1.  该列应该是可插入的。如果在 INSERT 语句中提供了该值，则应将其插入。
2.  如果在 INSERT 语句中未引用该列，则应将其设置为其他两列的总和。

由于第一个要求，我不能使用计算列，因为它们不可插入。由于第二个原因，我不能使用 DEFAULT，因为它不允许引用定义中的其他列。我还有什么其他选择？

顺便说一句，该列不应为空。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T15:10:18.357

给你，我用一个示例模式来演示这一点，因为你没有提供你的真实表/列名。

桌子：

```
CREATE TABLE test
  (
     id   INT NOT NULL PRIMARY KEY IDENTITY, --made up key
     col1 INT, --first column to add, wasn't sure if this was nullable or not
     col2 INT, --second column to add, wasn't sure if this was nullable or not
     col3 INT NOT NULL --this is the column to optionally insert into
  ) 
```

这是触发器定义：

```
CREATE TRIGGER demo
ON test
INSTEAD OF INSERT
AS
    INSERT INTO test (col1,col2,col3)
    SELECT inserted.col1,
           inserted.col2,
           CASE
             WHEN inserted.col3 IS NULL THEN COALESCE(inserted.col1, 0) + COALESCE(inserted.col2, 0)
             ELSE inserted.col3
           END
    FROM   inserted 
```

基本上它用触发器中的那个替换了在表上完成的任何插入语句，所以我使用`inserted`临时表来检查试图插入到我们的不可为空的可选列中的`col3`值是否为 NULL。如果是，我用添加`col1`和替换它`col2`（我用零合并，因为你没有提到两个源列是否可以为空）。

然后，您可以运行包含或不包含它的插入语句，尽管事实`col3`不可为空：

```
INSERT INTO test(col1,col2)
SELECT 12, 31
GO

INSERT INTO test(col1, col2, col3)
SELECT 1, 2, 89
GO 
```

结果是：

```
ID  COL1 COL2 COL3
------------------  
1   12   31    43
2   1    2     89 
```

如果触发器不存在，您可能会在尝试运行第一个插入语句时遇到错误，告诉您它无法将 NULL 插入`col3`.

另请注意，指定值的第二个插入语句并未按要求被添加替换。

这是一个有效的[**SQL Fiddle**](http://sqlfiddle.com/#!3/58f69/1/0)。

# php - 如何获取 div 内容并将结果放在 php 中

> ID：13683414
> 
> 赞同：-2
> 
> 时间：2012-12-03T12:36:30.833
> 
> 标签：php

我是 php 新手，我想知道是否有人可以帮助我，基本上我已被分配创建一个数据库，其中有四个问题和四个答案，数据库应该显示四个问题，当你点击按钮时，它会说“不正确” 或“正确” 在数据库上如果这有意义这里是我的 html 代码但我不知道如何让 php 将其放入数据库中，我尝试使用 Div/ID 标签来帮助但我没有知道我在做什么

```
<img src="Images/Question1.png" usemap="#mainMap" id="main" style="position:absolute;display:none;left:0px;top:0px;" border="0" />
<map name="mainMap" id="mainMap">
  <div id="Incorrectanswer1"><area shape="rect" coords="82,192,196,242" onclick="incorrectAnswer()" /></div>
  <div id="Incorrectanswer2"><area shape="rect" coords="83,254,197,300" onclick="incorrectAnswer()" /></div>
  <div id="Incorrectanswer3"><area shape="rect" coords="83,310,201,368" onclick="incorrectAnswer()" /></div>
  <div id="Correctanswer1"><area shape="rect" coords="84,373,205,430" onclick="correctAnswer()" /></div>
</map> 
```

如果有人可以帮助或指出我正确的方向，这将很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:26:12.580

As some people has suggested you should change the way this is designed.

HTML/Javascript is client side and a simple right-click -> show source can tell any user which is the correct answer. So what is the correct way to do it? well there are some, let me explain one of them:

Your HTML part is fine, but the `onclick` part should be changed to a new function called `check_answer(id)` for example, you pass the answer `id` to that function, then it will be submited to a PHP that will check it display a text telling the user if the answer was correct or not.

One way to do this would be AJAX, but let's try one more simple:

```
<form id="answer_send" name="answer_send" action="check_answer.php" method="POST">
     <input type="hidden" id="answer_id" />
</form> 
```

This HTML can be inserted in any part of the body, it won't be displayed anyway. Then we need the new javascript function 'check_answer(id)':

```
function check_answer(id){
    document.getElementById('answer_id').value=id;
    document.forms["answer_send"].submit();
} 
```

Then in the `check_answer.php`:

```
$id=$_POST['answer_id'];

if($id > 0){
     //do something to compare the answer
     if(answer_ok(id)){
         echo "Correct Answer!";
     }else{
         echo "Incorrect Answer!";
     }
} 
```

What's the problem here? the user would get redirected to another page, so if you want to display multiple questions/answers and check them without sending the user to another URL you should use AJAX. The only difference when doing this process with AJAX would be that there's no need for a form, and the `check_answer(id)` function would have to do the AJAX call and display a message to the user depending on the return value of the AJAX call.

# grails - ConsumerTemplate：表示接收端点不应该被缓存，因为它是动态的

> ID：13683415
> 
> 赞同：0
> 
> 时间：2012-12-03T12:36:34.333
> 
> 标签：grails, groovy, activemq, apache-camel

我正在尝试设置一个使用动态端点（与[此](https://stackoverflow.com/questions/13676088/having-trouble-getting-jms-activemq-selector-syntax-with-consumertemplate-rece)问题相关）执行 ConsumerTemplate.receive 的石英作业。

从我的谷歌搜索和源代码峰值中，我看到 ConsumerTemplate 将尝试缓存我的端点，但由于它是动态的，可能导致 OutOfMemoryException 并且在任何情况下都没有理由缓存动态端点。（见[http://mail-archives.apache.org/mod_mbox/camel-users/201003.mbox/%3C75bda7a01003222327i456bf92egd37e1d4868d06041@mail.gmail.com%3E](http://mail-archives.apache.org/mod_mbox/camel-users/201003.mbox/%3C75bda7a01003222327i456bf92egd37e1d4868d06041@mail.gmail.com%3E)）

是否有任何指示端点不应被 ConsumerTemplate 缓存，也许是端点 URI 上的一个选项？我看到有一种方法可以全局设置缓存大小（[https://cwiki.apache.org/confluence/display/CAMEL/How+do+I+configure+the+default+maximum+cache+size+for+ProducerCache +or+ProducerTemplate](https://cwiki.apache.org/confluence/display/CAMEL/How+do+I+configure+the+default+maximum+cache+size+for+ProducerCache+or+ProducerTemplate)），但我认为我不想这样做，因为我有几个可能从缓存中受益的静态消费者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:36:09.027

您可以从 CamelContext 上的 API 创建消费者模板，您可以在其中指定缓存限制。[http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/CamelContext.html#createConsumerTemplate(int](http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/CamelContext.html#createConsumerTemplate(int) )。

# escaping - 当 String、replaceAll 失败时，用转义符前面的特殊字符替换特殊字符

> ID：13683417
> 
> 赞同：2
> 
> 时间：2012-12-03T12:36:41.857
> 
> 标签：escaping, character, replacewith

在我的 java 代码中，我想要一些类似的东西，如果一个字符串输入有任何提到的特殊字符，那应该在前面加上`\`.

特殊字符集是`{+, -, &&, ||, !, (, ), {, },[, ], ^, "", ~, *, ?, :, \}`. 我尝试使用`inputString.replaceAll(old,new)`但令我惊讶的是它不起作用，即使我为“旧”和“新”提供了正确的值。

我将特殊字符放在一个字符串数组中，在 for 循环中对其进行迭代，检查它是否存在于字符串中，如果是，`input.replaceAll(":","\\:")`. 但它没有给我预期的输出。请帮忙。

```
 String[] arr = { "+", "-", "&&", "||", "!", "(", ")", "{", "}",
                    "[", "]", "^", "\"", "~", "*", "?", ":", "\\", "AND", "OR" };

        for (int i = 0; i < arr.length; i++) {
            System.out.println("arr[" + i + "]>>>>>>>>>>>>>>>" + arr[i]);
            System.out.println(search.contains((String) arr[i])
                    + "---------->" + arr[i]);

            if (search.contains((String) arr[i])) {
                System.out.println("..index..."+search.indexOf((String) arr[i]));
                String oldString = (String) arr[i];
                System.out.println("check if it has old string"
                        + search.contains(oldString));
                String newString = new String("\\" + arr[i]);
                System.out
                        .println("About to replace special chars....with..."
                                + newString);

                search = search.replaceAll(oldString, newString);
                String newSearch = new String(search.replaceAll(arr[i],
                        newString));
                System.out
                        .println("Search String after replaceAll is ------------->: "
                                + newSearch);
                System.out.println("--------------"
                        + search.replaceAll(arr[i], newString)
                        + "---------------" + search);

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T11:18:20.627

不确定你是否有答案。今天我也在尝试。我修改了您的代码以使用我的解决方案。希望它对你有帮助。

```
String search = "$&+";

String[] arr = { "+", "-", "&&", "||", "!", "(", ")", "{", "}", "[", "]", "^", "\"", "~", "*", "?", ":", "\\", "AND", "OR" };

for (int i = 0; i < arr.length; i++) {
 System.out.println("arr[" + i + "]>>>>>>>>>>>>>>>" + arr[i]);
 System.out.println(search.contains((String) arr[i])
         + "---------->" + arr[i]);

 if (search.contains((String) arr[i])) {
     System.out.println("..index..."+search.indexOf((String) arr[i]));
     String oldString = (String) arr[i];
     System.out.println("check if it has old string"
             + search.contains(oldString));
     String newString = new String("\\\\" + arr[i]);
     System.out
             .println("About to replace special chars....with..."
                     + newString);

     search = search.replace("\\" + oldString, newString);
     String newSearch = new String(search);
     System.out
             .println("Search String after replaceAll is ------------->: "
                     + newSearch);

 } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:53:21.520

您需要先转义单个反斜杠（在转义其他任何内容之前），或者您双重转义一些反斜杠。

例子：`1+1`

替换`+`为`\+`=>`1\+1`

替换`\`为`\\`=> `1\\+1`（哎呀！）

# ios - 使用 Tabris 在 iOS 中隐藏键盘

> ID：13683422
> 
> 赞同：0
> 
> 时间：2012-12-03T12:36:55.107
> 
> 标签：ios, eclipse

是否有从 iOS 屏幕上移除键盘的选项？在这种情况下，我使用 Tabris (http://developer.eclipsesource.com/tabris/) 和 Java。

我的问题是我使用两个文本字段来输入用户/密码组合。在我填写了这些文本字段并按下按钮继续之后，iOS 的键盘总是显示出来，但我希望键盘不再出现。只有在我点击某个地方之后，键盘才会消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:38:50.453

您是否设置了 UITextField 委托并在那里添加了以下方法？

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [textField resignFirstResponder];
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:47:10.163

在 Tabris 上，您可以通过将焦点设置在使用键盘的控件上（如 org.eclipse.swt.widgets.Text ）以编程方式“打开”键盘。要隐藏键盘，只需将焦点设置为不需要键盘的控件，例如 Textfield 的父组合。

在您的情况下，我会在您的 Button 的 SelectionListener 中添加一行以将焦点设置在您的 Textfields 的父级上，然后启动登录过程。

下面是一些代码来玩和理解Focus机制：

```
public class FocusTest implements EntryPoint {

public int createUI() {
    Display display = new Display();
    Shell shell = new Shell(display, SWT.NO_TRIM);
    shell.setMaximized(true);
    GridLayoutFactory.fillDefaults().applyTo(shell);
    createContent(shell);
    shell.open();
    //while (!shell.isDisposed()) {
    //  if (!display.readAndDispatch()) {
    //      display.sleep();
    //  }
    //}
    return 0;
}

private void createContent(final Composite parent) {
    Button buttonSingleText = new Button(parent, SWT.PUSH);
    buttonSingleText.setText("Focus on SingleText");
    GridDataFactory.fillDefaults().grab(true, false).align(SWT.FILL, SWT.CENTER).applyTo(buttonSingleText);

    Button buttonMultiText = new Button(parent, SWT.PUSH);
    buttonMultiText.setText("Focus on MultiText");
    GridDataFactory.fillDefaults().grab(true, false).align(SWT.FILL, SWT.CENTER).applyTo(buttonMultiText);

    Button buttonNoFocus = new Button(parent, SWT.PUSH);
    buttonNoFocus.setText("Loose Focus");
    GridDataFactory.fillDefaults().grab(true, false).align(SWT.FILL, SWT.CENTER).applyTo(buttonNoFocus);

    final Text singleText = new Text(parent, SWT.SINGLE);
    GridDataFactory.fillDefaults().grab(true, false).align(SWT.FILL, SWT.CENTER).applyTo(singleText);

    final Text multiText = new Text(parent, SWT.MULTI);
    GridDataFactory.fillDefaults().grab(true, false).align(SWT.FILL, SWT.CENTER).applyTo(multiText);

    buttonSingleText.addSelectionListener(new SelectionAdapter() {
        @Override
        public void widgetSelected(SelectionEvent e) {
            singleText.setFocus();
        }
    });
    buttonMultiText.addSelectionListener(new SelectionAdapter() {
        @Override
        public void widgetSelected(SelectionEvent e) {
            multiText.setFocus();
        }
    });
    buttonNoFocus.addSelectionListener(new SelectionAdapter() {
        @Override
        public void widgetSelected(SelectionEvent e) {
            parent.setFocus();
        }
    });
}
} 
```

# symfony - 来自 web url 的 LiipImagineBundle + Symfony 媒体不起作用？

> ID：13683423
> 
> 赞同：1
> 
> 时间：2012-12-03T12:36:55.263
> 
> 标签：symfony, liipimaginebundle

我将 Symfony 2.0.19 与 LiipImagineBundle 一起使用

我想对来自网络的图像使用过滤器（例如：http: [//images.apple.com/retail/fifthavenue/images/fifthavenue_hero.jpg](http://images.apple.com/retail/fifthavenue/images/fifthavenue_hero.jpg)）但`imagine_filter`似乎不适用于来自网络的图像。

有人有解释吗？

配置.yml：

```
liip_imagine:
    filter_sets:
        thumbnail:
            filters:
                thumbnail: { size: [300, 300], mode: outbound } 
```

HTML

```
<img src="{{ asset('http://images.apple.com/retail/fifthavenue/images/fifthavenue_hero.jpg') |imagine_filter('thumbnail') }}" /> 
```

输出：

没有处理图像:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:35:18.873

我已经和 LiipImagineBundle 的作者讨论过，目前还做不到。

你必须使用黑客，**我建议你另一种方法**：

1.  将要使用的图像下载到您的服务器
2.  使用你的过滤器
3.  删除tmp文件

拜拜

# javascript - 第二次打开jquery对话框时如何只刷新它的内容

> ID：13683424
> 
> 赞同：5
> 
> 时间：2012-12-03T12:36:55.637
> 
> 标签：javascript, jquery, asp.net, html, jquery-dialog

我在点击功能中打开一个 jquery 对话框。但是如果我关闭对话框并第二次打开它，对话框内的内容保持不变..我需要对话框内的文本框为空，而我连续打开它..

这是我的 aspx 代码：

```
<div>
<span id="id_PrivateSpace" style="color: #88b807; margin-left: 839px;
                            margin-top: -12px; cursor: pointer; display: block">Create</span>
</div>

<div id="thedialog" style="display: none; overflow: hidden">
                    <table id="table" style="border-spacing: 7px 7px; margin-left: 5px">
                        <tr>
                            <td>
                                <span class="SubHeading" style="font-size: 10pt;">Private Space Name </span>
                            </td>
                            <td>
                                <asp:TextBox ID="txt_spacename" runat="server" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span class="SubHeading" style="font-size: 10pt;">Private Space Description </span>
                            </td>
                            <td>
                                <asp:TextBox ID="txt_spacedesc" TextMode="MultiLine" runat="server" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span class="SubHeading" style="font-size: 10pt;">Users </span>
                            </td>
                            <td>

                                <input type="text" id="txt_users" />
                            </td>
                            <td>
                                <asp:Button ID="btn_addusers" Text="Add" Style="margin-left: 10px;" runat="server" />
                            </td>
                            <td rowspan="5">
                                <table id="users_grid" align="left">
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span class="SubHeading" style="font-size: 10pt;">DL </span>
                            </td>
                            <td>
                                <asp:TextBox ID="txt_Add_dl" TextMode="MultiLine" runat="server" />
                            </td>
                        </tr>
                    </table>
                    <input type="button" id="Btn_Submit" value="Create" style="margin-left: 335px; margin-top: 35px;"
                        runat="server" />
                </div> 
```

这是我的 js 代码：

```
 $("#thedialog").dialog({
                autoOpen: false,
                title: 'Create Private space',
                modal: true,
                position: 'center',
                width: 900

            });

            $('#id_PrivateSpace').click(function() {
                $('#thedialog').dialog('open');
                return false;
            }); 
```

我应该添加什么来仅刷新对话框的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:42:09.410

我想你可以试试：

```
$('#id_PrivateSpace').click(function() {
    $("#thedialog").find('input:text, textarea').val('').attr('placeholder','Enter some value');
    $("#thedialog").find('select').val('');//you need to have and option like <option value="">Please Select</option> in your select options list
    $('#thedialog').dialog('open');
    return false;
}); 
```

对于您的 aspx Dropdownlist，请确保将 AppendDataBoundItems 设置为 true；并设置 OnDataBinding 事件

```
<asp:DropDownList id="myDdl" runat="server" OnDataBinding="Ddl_Databinding" >
</asp:DropDownList>

And in your code behind, Add:

protected void Ddl_Databinding(object sender, EventArgs e)
{
    DropDownList ddl = (DropDownList)sender;
    ddl.Items.Add(new ListItem("Please Select", ""));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-06T01:52:40.683

在关闭时添加以下函数以销毁 jquery 对话框的特定实例：

```
close: function()
    {
        $(this).dialog('close');
        $(this).dialog('destroy');
        $(this).html("");
    }, 
```

这是我在动态创建对话框时遇到类似问题时不得不使用的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:46:15.883

尝试，

```
<form id="myform>
<div id =thedialog> ....... </div>
</form> 
```

关闭对话框时，调用以下函数

```
 document.getElementById("form1").reset(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T12:44:54.927

```
$('#id_PrivateSpace').click(function() {
  $("#thedialog input[type='text']").val('');
  $("#thedialog textarea").html('');
  $('#thedialog').dialog('open');
  return false;
}); 
```

# java - servlet 过滤器如何在请求页面上发送错误消息？

> ID：13683431
> 
> 赞同：3
> 
> 时间：2012-12-03T12:37:15.417
> 
> 标签：java, servlets, servlet-filters

我编写了一个 servlet 过滤器，它被配置为为每个 url (/*) 调用。基于某些条件，如果条件通过，我想通过 ) 继续正常执行`chain.doFilter(request,response`，我还想打开相同的请求 URL 并显示错误消息..

“说在特定文本框中输入的值不正确”。这可能吗？

我必须使用`response.sendRedirect(request.getURL())`吗？我希望我不会陷入无限循环，因为我已经在每个 URL 上配置了过滤器。我正在对请求参数进行验证检查。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T12:54:04.443

就像在 servlet 中做的一样：执行转发。

```
request.getRequestDispatcher("/WEB-INF/some.jsp").forward(request, response); 
```

默认情况下，过滤器不会（重新）在转发上调用。另一个优点是 JSP 重用相同的请求，因此您可以将验证错误消息设置为请求属性，而无需基于会话或 cookie 的变通办法/黑客。

* * *

**与具体问题无关**，这并不完全是正确的方法。特定于表单的验证作业应该在[servlet](https://stackoverflow.com/tags/servlets/info)中执行，而不是在[filter](https://stackoverflow.com/tags/servlet-filters/info)中。如果你想让你的 servlet(s) DRY，那么看看前端控制器模式或者只是采用一个已经提供前端控制器 servlet 和开箱即用验证的 MVC 框架，例如[JSF](https://stackoverflow.com/tags/jsf/info)或[Spring MVC](https://stackoverflow.com/tags/spring-mvc/info)。

# gwt-2.5 - 如何从 CssResources 类将自定义样式应用于 DatePicker？

> ID：13683432
> 
> 赞同：0
> 
> 时间：2012-12-03T12:37:16.900
> 
> 标签：gwt-2.5

我有一个 DatePicker 小部件，我需要为其应用自定义样式。为了实现它，我所做的是，在应用程序主 css 文件中，我添加了如下 css 样式

```
.dRPLable {
     font-size: 10px;
     font-weight: bold;
     color: gray;
    }

    .dRPBtn {
     background-color: #38B0DE;
     background: #38B0DE;
     color: white;
    }

    .dRPLB {
     background: #EEEEEE;
    }

    .dRPPopup {
        width: 8em;
        height: 2em;
    }
    .mycal .datePickerPreviousButton { visibility: visible; color: gray; }
    .mycal .datePickerNextButton { visibility: visible; color: gray; }

    .mycal .datePickerWeekdayLabel{background: white;}
    .mycal .datePickerMonthSelector {  background: white; }
    .mycal .datePickerMonth { background: white;color: orange;}

    .mycal .datePickerWeekendLabel{background: white;}
    .mycal .datePickerDayIsValue {  background: orange;}
    .mycal .datePickerDayIsWeekend { background: #D9D9D9;} 
```

**然后一切都完美适用**

我将它作为一个独立的自定义小部件，为此我创建了一个单独的 css 文件。为了访问它，我创建了一个资源接口，如下所示，

```
import com.google.gwt.core.client.GWT;
import com.google.gwt.resources.client.ClientBundle;
import com.google.gwt.resources.client.CssResource;
import com.google.gwt.resources.client.ImageResource;

public interface DateRangeTypePickerResources extends ClientBundle {

    DateRangeTypePickerResources INSTANCE = GWT
            .create(DateRangeTypePickerResources.class);

    /*
     * @Source("DocumentImg.jpg") ImageResource getDocumentImg();
     */

    @Source("down.png")
    ImageResource getDownImg();

    @Source("up.png")
    ImageResource getUpImg();

    public interface DateRangeTypePickerCssStyle extends CssResource {
        String dRPLable();

        String dRPBtn();

        String dRPLB();

        String mycal();

        String dRPPopup();

        String datePickerPreviousButton();

        String datePickerNextButton();

        String datePickerWeekdayLabel();

        String datePickerWeekendLabel();

        String datePickerMonthSelector();

        String datePickerMonth();

        String datePickerDayIsValue();

        String datePickerDayIsWeekend();

    }

    @Source("../widget/DateRangeTypePicker.css")
    DateRangeTypePickerCssStyle DateRangeTypePickerCss();

} 
```

**我如何访问这些方法如下**

```
public class DateRangePicker extends Composite {
static DateRangeTypePickerResources resources = GWT
            .create(DateRangeTypePickerResources.class);
    DateRangeTypePickerCssStyle css = DateRangeTypePickerResources.INSTANCE
            .DateRangeTypePickerCss();
    static {
        DateRangeTypePickerResources.INSTANCE.DateRangeTypePickerCss()
                .ensureInjected();
    }

public DateRangePicker(DateRangePickerModel dateRangePickerModel) {
    Label startDateLabel = new Label("Start Date");
    startDtToday.setStylePrimaryName(css.dRPLabel());
    flexTable.setWidget(0, 0, startDateLabel);

    DatePicker startDatePicker = new DatePicker();
    startDatePicker.setStyleName(css.mycal());
}
} 
```

这里的样式正在申请标签。但是 Style 并没有申请 DatePicker。如何从 CssResources 类将自定义样式应用于 DatePicker？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:17:00.617

在发布如此庞大且重复的问题搜索之前，如果问题已经被问过......有很多类似的问题。

您的问题的答案在以下链接中

[点击这里](https://stackoverflow.com/questions/11700458/how-to-style-gwt-celllist/13577567#13577567)

# javascript - 从 CIDR 范围检索最大/最小 IP

> ID：13683436
> 
> 赞同：6
> 
> 时间：2012-12-03T12:37:33.727
> 
> 标签：javascript, node.js

我想从 CIDR 块中获取最大和最小 IP - 我当前的代码工作正常，除了一些在最小数字上返回负数的 IP。以下是我现有的代码和输出。

```
function long2ip (proper_address) {
// Converts an (IPv4) Internet network address into a string in Internet standard dotted format
//
// version: 1109.2015
// discuss at: http://phpjs.org/functions/long2ip
// +   original by: Waldo Malqui Silva
// *     example 1: long2ip( 3221234342 );
// *     returns 1: '192.0.34.166'
var output = false;
if (!isNaN(proper_address) && (proper_address >= 0 || proper_address <= 4294967295)) {
    output = Math.floor(proper_address / Math.pow(256, 3)) + '.' +
    Math.floor((proper_address % Math.pow(256, 3)) / Math.pow(256, 2)) + '.' +
    Math.floor(((proper_address % Math.pow(256, 3)) % Math.pow(256, 2)) / Math.pow(256, 1)) + '.' +
    Math.floor((((proper_address % Math.pow(256, 3)) % Math.pow(256, 2)) % Math.pow(256, 1)) / Math.pow(256, 0));
}
return output;
}

function cidrToRange(cidr) {
var range = [2];
cidr = cidr.split('/');
var longIp = ip2long(cidr[0]);
var mask = ((-1 << (32 - cidr[1])));
var longIp = ip2long(cidr[0]);
range[0] = long2ip(longIp & ((-1 << (32 - cidr[1]))));
range[1] = long2ip(longIp + Math.pow(2, (32 - cidr[1])) - 1);
return range;
}

console.log(cidrToRange('157.60.0.0/16')); // returns [ '-99.-196.0.0', '157.60.255.255' ]
console.log(cidrToRange('157.56.0.0/14')); // returns [ '-99.-200.0.0', '157.59.255.255' ]
console.log(cidrToRange('127.0.0.1/8')); // returns [ '127.0.0.0', '128.0.0.0' ] 
```

我正在 node.js 中进行测试，但似乎无法让上述范围按我的意愿工作。任何帮助表示赞赏。

标记

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-15T15:35:21.283

仅供参考，这是 javascript 中正确的 cidrToRange 代码：

```
function cidrToRange(cidr) {
   var range = [2];
   cidr = cidr.split('/');
   var cidr_1 = parseInt(cidr[1])
   range[0] = long2ip((ip2long(cidr[0])) & ((-1 << (32 - cidr_1))));
   start = ip2long(range[0])
   range[1] = long2ip( start + Math.pow(2, (32 - cidr_1)) - 1);
   return range;
} 
```

例如

cidrToRange('192.168.62.156/27') 给出 ["192.168.62.128", "192.168.62.159"] 这正是我们所需要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-10T08:36:00.653

响应“Carter Cole”，我通过将 cidrToRange 函数更改为具有不同的起点来解决问题。

```
function cidrToRange(cidr) {
    var range = [2];
    cidr = cidr.split('/');
    var start = ip2long(cidr[0]);
    range[0] = long2ip(start);
    range[1] = long2ip(Math.pow(2, 32 - cidr[1]) + start - 1);
    return range;
} 
```

现在返回：

```
[ '157.60.0.0', '157.60.255.255' ]
[ '157.56.0.0', '157.59.255.255' ]
[ '127.0.0.1', '128.0.0.0' ] 
```

# c# - 如何判断SQL查询是否过于复杂？

> ID：13683440
> 
> 赞同：4
> 
> 时间：2012-12-03T12:37:52.777
> 
> 标签：c#, sql-server-2008, query-optimization

在我的 c# 应用程序中，用户可以从 SQL 数据库构建动态报告。如果他们的数据库查询太复杂并且运行时间太长，我需要警告用户。

我正在使用 microsoft-sql-server 2008。

我怎样才能做到这一点？是否有任何统计算法来计算查询执行的运行时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:42:01.877

这实际上是不可能的。数据库根据表和索引统计信息计算执行计划，甚至数据库本身也无法预测运行时间。

可能有一些迹象，例如排序（和分组，这意味着排序）或多个连接，但在我看来，任何算法预测几乎都是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:12:18.993

正如其他人已经表明的那样，您无法事先预测复杂性。您所能做的就是让查询运行并在时间过长时中止。

要在一段时间后中止查询，您可以查看[SqlCommand.CommandTimeout 属性](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx)并将其设置为某个合适的值。这种方法的缺点是用户可能会等待全部时间只是为了得到一条查询需要很长时间的错误消息。

另一种方法是让用户决定什么时候需要很多时间。这可以通过使用无限制 (Timeout = 0) 来完成，但[异步调用 execute 方法](http://msdn.microsoft.com/en-us/library/1a674khd.aspx)并简单地向他可以点击的用户提供一个取消按钮。

最后一种方法与 SQL Server Management Studio 中的方法相同。如果您开始查询，您将在页脚中看到一个运行计时器，显示查询当前运行了多长时间，并且在工具栏中，您有一个取消按钮来停止当前运行的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:55:24.167

正如其他人所指出的那样，绝对的答案是您无法预先知道查询需要多长时间才能运行。

我可以建议的最接近的事情是，在运行查询之前尝试**粗略**地了解查询中涉及的内容，即首先检索它的估计执行计划，然后对其进行一些粗略的分析。

```
SET SHOWPLAN_XML ON
GO
SELECT TOP 100 *
FROM MyTable
GO 
```

在执行计划 XML 中，有诸如估计的行数、优化器在选择执行计划之前是否超时、执行了哪些操作（索引查找/扫描等）以及一大堆其他内容（你真的需要更深入地研究执行计划）。

因此，理论上，您可以尝试查看计划中的信息以做出粗略/最佳猜测判断。请注意，这只是估计的执行计划，我不知道您可以做出何种程度的准确性/判断。

它没有给你时间，只是（也许）某种方式来权衡查询的相对预期成本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T12:48:31.633

您可以根据连接的数量和类型、排序依据和位置条件等因素以及所有受影响表的行数来创建公式。

根据该公式的构建方式，当查询变得“繁重”时，这将给出粗略的指示。

# angularjs - AngularJS - 请解释一下

> ID：13683445
> 
> 赞同：0
> 
> 时间：2012-12-03T12:38:23.230
> 
> 标签：angularjs

“注入”行到底是做什么的？：

```
function PhotoGalleryCtrl($route, $xhr) {
}

PhotoGalleryCtrl.$inject = ['$route', '$xhr']; 
```

$route 和 $xhr 是否在某处预定义？在哪里阅读它们？

谁说 PhotoGalleryCtrl 函数有 .$inject 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:54:15.863

两者都是原`$route`生AngularJS 服务，后者在最新版本的 AngularJS 中`$xhr`已被取代。`$http`它们是`ng`模块的一部分。

你可以在这里阅读它们

*   [ng.$ro​​ute](http://docs.angularjs.org/api/ng.%24route)
*   [ng.$http](http://docs.angularjs.org/api/ng.%24http)

`$inject`告诉 Angular 将这些服务提供给控制器`PhotoGalleryCtrl`

依赖注入和模块是 Angular 的核心特性。它们都最小化全局状态并允许更好的单元测试，你可以在这里阅读更多关于它们的信息

*   [模块](http://docs.angularjs.org/guide/module)
*   [依赖注入](http://docs.angularjs.org/guide/di)

# php - 在 PHP 中创建分页类

> ID：13683447
> 
> 赞同：1
> 
> 时间：2012-12-03T12:38:33.683
> 
> 标签：php, oop, pagination

我想建立一个`paginator`类，但我不确定最好的方法是什么。我在互联网上看到许多不同的代码让我感到困惑。

我的数据存储在 MySQL 数据库中。我是否必须对我的分页器类进行查询，以便它可以为我从 MySQL 中检索数据（当然，之后它会自动进行一些分页计算）？还是我`model`首先获取所有数据，然后`array`将从该模型返回的数据提供给`paginator`班级？

无论哪种方式，我都可能需要进行另一个查询来获取“总”记录数量并将该结果`pagninator`作为单独的参数传递给类。

一旦我知道如何开始，那么我就知道如何开始剩下的了。我只是不确定如何将数据传递给`paginator`类以及什么样的数据。

知道如何建立一个好的`paginator`班级吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T12:45:28.713

一个设计良好的 OO`Paginator`类应该独立于您的数据和数据库。

它应该采用 、 和 等参数，`count`并且应该将可用于依赖注入的对象返回到模型中以生成具有适当的查询，或者返回到用于呈现适当的 HTML 的类中。`page``per_page``LIMIT``PaginationHelper`

可能是一个好的 Paginator 界面的示例（在此考虑 10 分钟）：

```
/**
 * Your pagination master class
 */
interface iPaginator {
    public function __construct($total_count, $count_per_page, $current_page=1);
    public function getPaginationLimiter();
    public function getPaginationHelper();

    // These return iPaginatorPage objects
    public function getCurrentPage();
    public function getNextPage();
    public function getPreviousPage();

    public function getTotalCount();
    public function getCountPerPage();
    public function getPageCount(); // Calculated
}

/**
 * Page representation
 */
interface iPaginatorPage {
    public function __construct($page_number, $start, $end);

    public function getNumber();
    public function getStart();
    public function getEnd();
    public function getCount(); // Calculated
}

/**
 * Helper for rendering the UI
 */
interface iPaginationHelper {
    public function __construct(iPaginator $paginator);
    public function render();
} 
```

通过扩展基本模型，然后让应用程序模型扩展 PaginatorModel 而不是 Model，如何集成到模型中的示例：

```
class PaginationModel extends Model {
    public function query($sql, iPaginatorPage $page = null) {
        if (!empty($page)) {
            $start = $page->getStart();
            $length = $page->getCount();
            $sql .= " LIMIT ({$start}, {$length})";
            return parent::query($sql);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:52:10.720

检查 Pear 的[寻呼机](http://pear.php.net/package/Pager/redirected)实现。这是一个非常好的类，使用简单并且有很多很酷的特性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T13:08:56.790

创建类，并具有如下功能：

1.  function resultset($required_filters, $table, $pagenum, $records){ $getCount='SELECT count(*) from table'; $sql="SELECT ".$required fields." FROM ".$table." LIMIT ".(($pagenum-1) * $records).",".$records; $sqlres=... 返回数组($getCount, $sqlres); }

    将此函数称为 list($rescount, $arrData)=resultset(all parameters);

对于分页，使用一些 for 循环来显示页码...对于总 $rescount 页，使用 get 你可以显示当前 pagenum 突出显示

# jdbc - Oracle JDBC 中的 ArrayIndexOutOfBoundsException

> ID：13683449
> 
> 赞同：1
> 
> 时间：2012-12-03T12:38:44.993
> 
> 标签：jdbc, oracle11g

我在我们的 oracle jdbc 驱动程序中遇到了一个奇怪的异常。本机方法如何抛出 OutOfBounds 异常？我认为它与其中一列中的 blob 有关。

我们使用 solaris x86、sun java 6、websphere 作为我们的服务器。数据库是 oracle 11 和 ojdbc 5。

使用我在 Windows XP 上的本地配置，一切正常。

有任何想法吗？

```
java.lang.ArrayIndexOutOfBoundsException
at oracle.jdbc.driver.T2CStatement.t2cDefineFetch(Native Method)
at oracle.jdbc.driver.T2CPreparedStatement.doDefineFetch(T2CPreparedStatement.java:1020)
at oracle.jdbc.driver.T2CPreparedStatement.fetch(T2CPreparedStatement.java:1252)
at oracle.jdbc.driver.OracleResultSetImpl.close_or_fetch_from_next(OracleResultSetImpl.java:373)
at oracle.jdbc.driver.OracleResultSetImpl.next(OracleResultSetImpl.java:277) 
```

在代码中我没有做任何特别的事情。创建准备好的语句，填写参数并执行查询。

```
 preparedStatement = connection.prepareStatement(queryAsString);
                preparedStatement.setObject( [some paramters...] );

                ResultSet result = preparedStatement.executeQuery();

                result.setFetchSize(100);
                while (result.next()) {
                    int count = Fields.getFieldsCount();
                    Object[] objects = new Object[count];
                    for (int j = 0; j < count; ++j) {
                        Object object = result.getObject(j + 1);
                        objects[j] = object;
                    }
                    list.add(objects);
                }
                result.close(); 
```

但我不认为问题出在 java 代码中，因为相同的代码在带有 ojdbc14 和 sparc solaris 的 java 5 上确实有效。我想它更多的是配置。

# html - 如何将跨度的高度增加到不同的行？

> ID：13683456
> 
> 赞同：0
> 
> 时间：2012-12-03T12:39:01.780
> 
> 标签：html, css, twitter-bootstrap, height

我知道标题没有意义，但我不知道该怎么说。

看看这个：http: [//jsfiddle.net/nr33k/embedded/result/](http://jsfiddle.net/nr33k/embedded/result/)

我想增加右侧井的高度以匹配左侧两个井的高度，所以看起来我在一个大矩形中有三个小井。如果我尝试通过添加明显的方式来增加高度，`height:150px`则会导致左侧的底部井落下。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:10:21.423

请尝试`float:left;`您的`row`班级，然后在右侧设置跨度的高度。

`.row {float:left;}`

这是一个工作示例[http://jsfiddle.net/BUgQc/](http://jsfiddle.net/BUgQc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:43:31.117

在一个 DIV 中制作左侧两个 DIV 并将其向左浮动，并使右侧更大 Well div 在一个 DIV 中，如果离开则浮动....希望这对您有所帮助....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:51:13.237

问题是前两个“井”在一行中，而第三个在另一行中。

试试这个：

```
<div class="row">
  <div class="span4">
    <div class="well well-small" style="height:50px">
      <p>hello</p>
    </div>
    <div class="well well-small" style="height:100px">
      <p>hello again</p>
    </div>
  </div>
  <div class="span8">
    <div class="well well-small" style="height:190px;">
      <p>hello one more time</p>
    </div>
  </div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T12:57:36.540

检查这个例子。希望能帮助到你

**HTML**

```
<div id="container2">        
    <div id="container1">
        <div id="col1" style="height:250px">
            <!-- Column one start -->
            <h2>Equal height columns</h2>           
            <!-- Column one end -->
        </div>

        <div id="col2">
            <!-- Column two start -->            
            <h3>Mac</h3>           
            <!-- Column two end -->
        </div>            
    </div>
</div>​ 
```

**CSS**

```
#container2 {
    float:left;
    width:100%;
    background:yellow;
    position:relative;
    right:30%;
}
#container1 {
    float:left;
    width:100%;
    background:red;
    position:relative;
    right:40%;
}
#col1 {
    float:left;
    width:26%;
    position:relative;
    left:72%;
    overflow:hidden;
}
#col2 {
    float:left;
    width:36%;
    position:relative;
    left:76%;
    overflow:hidden;
}​ 
```

**[演示](http://jsfiddle.net/eVt2C/)**

[来源链接](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)

# c# - 限制自定义面板的拖放

> ID：13683457
> 
> 赞同：0
> 
> 时间：2012-12-03T12:39:02.767
> 
> 标签：c#, winforms

我在 Windows C# 中使用面板作为基类创建了自定义控件。

现在，我想限制自定义控件设计器来限制拖放其他控件。

我怎样才能实现这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:10:03.217

```
[System.ComponentModel.Designer(typeof(System.Windows.Forms.Design.ControlDesigner))]
public class MyPanel
{
} 
```

每个控件都有一个分配给它的设计器类，它告诉 Windows 窗体设计器在设计时如何处理它。Panel 是一个容器控件，它的设计器允许将其他控件放入其中。上面的代码将控件的设计器更改为不支持包含其他控件的简单设计器（例如标签）（在设计时将它们放入）。

# java - java如何找到我不知名的兄弟？（2个实现相同接口的类）

> ID：13683458
> 
> 赞同：1
> 
> 时间：2012-12-03T12:39:05.683
> 
> 标签：java, reflection, interface

我有以下情况：

我是一个 numberOneUser 类，框架在运行时将我作为 .class 文件从文件系统加载。

我知道在我的 .class 文件所在的目录中有更多的 .class 文件。（例如 theOtherUser.class）

其中一些实现了与我相同的接口。（称为用户）

现在我想在运行时找到实现该接口的第二个（或更多）类并用反射修改它们（例如覆盖方法）。

我对框架的唯一引用是我知道我被调用并给出了对我可以响应的对象的引用，该对象是框架的一部分。此外，我知道该框架位于我上面的目录中的 framework.jar 文件中。

没有其他信息可用。

如何找到这个其他类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T12:44:24.830

看看[Reflections](http://code.google.com/p/reflections/)可能对你有帮助。

```
Set<Class<? extends YourClassOrInterface>> subTypes = 
 reflections.getSubTypesOf(YourClassOrInterface.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:14:42.600

查看[此答案](https://stackoverflow.com/a/13322600/181336)，该答案解决了如何在目录中查找 .class 文件并创建 Class 元素的集合。一旦有了类，您就可以使用反射或 instanceof 运算符来确定哪些实现了您的接口。

# command-line - 尝试在 Mac OS X 上通过 Zsh 终端执行 Sass 脚本时出错

> ID：13683463
> 
> 赞同：0
> 
> 时间：2012-12-03T12:39:24.980
> 
> 标签：command-line, sass, zsh

我最近从使用 Bash 命令提示符切换到 Mac OSX 上的 Zsh。

我使用 Zsh 时遇到的问题是我用来查看 Sass 文件的命令不再有效。

我拥有的脚本文件是`sass.sh`，内容是......

```
#!/bin/sh
sass --style expanded --watch Assets/Styles/Sass:Assets/Styles --debug-info
exit 0 
```

...但是每次我运行时`sh sass.sh`我都会收到错误...

```
/Users/<home-directory>/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find sass (>= 0) amongst [bigdecimal-1.1.0, io-console-0.3, json-1.5.4, minitest-2.5.1, rake-0.9.2.2, rdoc-3.9.4] (Gem::LoadError)
from /Users/<home-directory>/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
from /Users/<home-directory>/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems.rb:1230:in `gem'
from /Users/<home-directory>/.rvm/gems/ruby-1.9.3-p125/bin/sass:18:in `<main>'
from /Users/<home-directory>/.rvm/gems/ruby-1.9.3-p125/bin/ruby_noexec_wrapper:14:in `eval'
from /Users/<home-directory>/.rvm/gems/ruby-1.9.3-p125/bin/ruby_noexec_wrapper:14:in `<main>' 
```

...我不知道如何解决这个问题。

看起来它只是找不到 Sass gem，但如果我运行，`gem list --local`我可以`sass (3.2.3, 3.2.1, 3.1.20, 3.1.17, 3.1.15)`在 gem 列表中看到。但是我也确实首先再次显示错误...

```
Error loading RubyGems plugin "/Users/<home-directory>/.rvm/gems/ruby-1.9.3-p125/gems/rubygems-bundler-0.2.8/lib/rubygems_plugin.rb": cannot load such file -- rubygems_bundler/rubygems_bundler_installer (LoadError) 
```

我在 Google 和 SO 上环顾四周，发现了对类似问题的各种参考，但没有一个对我和我的具体问题有帮助。

谁能告诉我我需要做些什么来解决这个问题，以便我可以继续使用 Zsh 并运行我的 Sass 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T16:34:49.893

好吧，似乎答案很简单。使用 Zsh 时，您不再使用`sh`命令，而是使用`zsh`命令。

所以`sh sass.sh`我只需要做`zsh sass.sh`

# android - 在有根设备 Android 上以编程方式设置动态壁纸

> ID：13683464
> 
> 赞同：5
> 
> 时间：2012-12-03T12:39:26.647
> 
> 标签：android, live-wallpaper

是否有可能以某种方式使用我的应用程序以编程方式设置动态壁纸？

我正在开发一个应用程序，她的目的是在设备上选择一些已安装的动态壁纸并将其设置为动态壁纸。此操作需要通过我的应用程序完成。

在我研究的过程中，我找到了一些答案，这可以通过植根 Android 设备来完成？

有人可以帮我弄清楚如何做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T12:08:00.983

Jelly Bean 之前的 Android 操作系统不允许您以编程方式设置动态壁纸。目前，Jelly Bean 支持以编程方式更改动态壁纸，无需用户交互

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-17T18:08:35.497

很抱歉向反对者打破它，但可以在没有用户交互的情况下以编程方式设置动态**壁纸**。这个需要：

1.  您的应用程序具有系统特权
2.  `<uses-permission android:name="android.permission.SET_WALLPAPER_COMPONENT" />`
3.  Java反射*（超级黑客代码）*
4.  对所需[WallpaperService](http://developer.android.com/reference/android/service/wallpaper/WallpaperService.html)（动态壁纸）的类引用

**注意：**对于第 3 项，我使用了自己的动态壁纸，MyWallpaperService 类

仅当您的应用程序具有系统特权并且在清单中具有此权限时，才能执行此操作：

```
<uses-permission android:name="android.permission.SET_WALLPAPER_COMPONENT" /> 
```

现在，使用反射，您可以调用 WallpaperManager 的隐藏方法来手动设置动态壁纸：

```
WallpaperManager manager = WallpaperManager.getInstance(context);
Method method = WallpaperManager.class.getMethod("getIWallpaperManager", null);
Object objIWallpaperManager = method.invoke(manager, null);
Class[] param = new Class[1];
param[0] = ComponentName.class;
method = objIWallpaperManager.getClass().getMethod("setWallpaperComponent", param);

//get the intent of the desired wallpaper service. Note: I created my own
//custom wallpaper service. You'll need a class reference and package
//of the desired live wallpaper 
Intent intent = new Intent(WallpaperService.SERVICE_INTERFACE);
intent.setClassName(context.getPackageName(), MyWallpaperService.class.getName());

//set the live wallpaper (throws security exception if you're not system-privileged app)
method.invoke(objIWallpaperManager, intent.getComponent()); 
```

参考源代码：

*   [LiveWallpaperActivity](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.0.1_r1/com/android/wallpaper/livepicker/LiveWallpaperActivity.java)
*   [动态壁纸预览](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.0.1_r1/com/android/wallpaper/livepicker/LiveWallpaperPreview.java#LiveWallpaperPreview.showPreview%28android.app.Activity%2Cint%2Candroid.content.Intent%2Candroid.app.WallpaperInfo%29)

# php - PHP 中的 FreeTDS 错误：传入的表格数据流 (TDS) 远程过程调用 (RPC) 协议流不正确

> ID：13683465
> 
> 赞同：4
> 
> 时间：2012-12-03T12:39:28.397
> 
> 标签：php, odbc, archlinux, freetds

我必须使用 ODBC 从 Arch Linux 连接到 MSSQL 服务器。我使用 FreeTDS，并使用 isql，它正在工作：

isql sqlexpress dev 开发

但不是在 PHP 中。我在交互模式下使用 PHP：

* * *

```
PHP > $conn = odbc_connect("sqlexpress", 'dev', 'Dev');
PHP > $a=odbc_exec($conn, 'SELECT * FROM measures;');
PHP Warning:  odbc_exec(): SQL error: [FreeTDS][SQL Server]The incoming tabular data stream (TDS) remote procedure call (RPC) protocol stream is incorrect. Parameter 1 (""): Data type 0x00 is unknown., SQL state 37000 in SQLExecDirect in php shell code on line 1

Warning: odbc_exec(): SQL error: [FreeTDS][SQL Server]The incoming tabular data stream (TDS) remote procedure call (RPC) protocol stream is incorrect. Parameter 1 (""): Data type 0x00 is unknown., SQL state 37000 in SQLExecDirect in php shell code on line 1 
```

* * *

我进行了很多搜索，但找不到任何解决方案（甚至找不到有同样问题的人）。我的配置文件：

/etc/odbc.ini：

```
[sqlexpress] 
Server = 192.168.10.39
Port = 1433
Driver = FreeTDS
Database = capture
UserName = dev
Password = Dev 
```

/etc/odbcinst.ini：

```
[FreeTDS]
Description = FreeTDS driver
Driver = /usr/lib/libtdsodbc.so
Setup = /usr/lib/libtdsS.so
Trace = Yes
TraceFile = /tmp/freetds.log
FileUsage = 1
UsageCount = 1 
```

祝你今天过得愉快！伴侣

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:28:34.257

这是我从 Ubuntu 连接到 MSSQL 数据库的工作配置文件：

/etc/odbc.ini

```
# Define a connection to the MSSQL server.
# The Description can be whatever we want it to be.
# The Driver value must match what we have defined in /etc/odbcinst.ini
# The Database name must be the name of the database this connection will connect to.
# The ServerName is the name we defined in /etc/freetds/freetds.conf
# The TDS_Version should match what we defined in /etc/freetds/freetds.conf
[ebe]
Description             = MSSQL Server
Driver                  = freetds
Database                = my_database
ServerName              = my_server_name
TDS_Version             = 8.0 
```

/etc/odbcinst.ini

```
# Define where to find the driver for the Free TDS connections.
[freetds]
Description     = MS SQL database access with Free TDS
Driver          = /usr/lib/i386-linux-gnu/odbc/libtdsodbc.so
Setup           = /usr/lib/i386-linux-gnu/odbc/libtdsS.so
UsageCount      = 1

# Change the "no" to "yes" to enable ODBC logging.
[ODBC]
Trace           = no
TraceFile       = /tmp/odbc.log 
```

/etc/freetds/freetds.conf

```
[global]
        # If you get out-of-memory errors, it may mean that your client
        # is trying to allocate a huge buffer for a TEXT field.  
        # Try setting 'text size' to a more reasonable limit 
        text size = 64512

# Define a connection to the MSSQL server.
[my_server_name]
    host = my_server_domain_or_ip
    port = 1433
    tds version = 8.0 
```

最后，这是我的 PHP 连接字符串：

```
$this->db_connection = new PDO("dblib:dbname=my_database;host=my_server_domain_or_ip", 'username', 'password'); 
```

我相信将 tds 版本设置为 8.0 可能对您有很大帮助。

# mysql - Solr DIH 与 SQL

> ID：13683466
> 
> 赞同：0
> 
> 时间：2012-12-03T12:39:33.697
> 
> 标签：mysql, sql, xml, solr, lucene

我正在尝试设置我的 SOLR 以从我的 SQL 文件中导入文档。我发现这个应该放在数据配置中：

```
<dataConfig>
  <dataSource driver="org.postgresql.Driver" url="jdbc:postgresql://localhost:5432/wikipedia" user="wikipedia" password="secret" />
  <document>
    <entity name="page" query="SELECT page_id, page_title from page">
      <field column="page_id" name="id" />
      <field column="page_title" name="name" />
      <entity name="revision" query="select rev_id from revision where rev_page=${page.page_id}">
        <entity name="pagecontent" query="select old_text from pagecontent where old_id=${revision.rev_id}">
          <field column="old_text" name="text" />
        </entity>
      </entity>
   </entity>
  </document>
</dataConfig> 
```

就我而言，我的架构如下所示：

```
CREATE TABLE country (
    id integer NOT NULL PRIMARY KEY AUTO_INCREMENT,
    name varchar(255) NOT NULL
)
;

CREATE TABLE location (
    id integer NOT NULL PRIMARY KEY AUTO_INCREMENT,
    name varchar(255) NOT NULL,
    coordinate varchar(255) NOT NULL,
    country_id integer NOT NULL REFERENCES country (id)
)
;

CREATE TABLE item (
    id integer NOT NULL PRIMARY KEY AUTO_INCREMENT,
    title varchar(60) NOT NULL,
    description varchar(900) NOT NULL,
    date datetime NOT NULL,
    source varchar(255) NOT NULL,
    link varchar(255) NOT NULL,
    location_id integer NOT NULL REFERENCES location (id)
)
; 
```

如果我想将以下字段导入 Solr：

```
id
title
description
date
source
link
location(name)
location(co-ordinates) 
```

有人可以帮助我更改示例数据配置以使用我的数据。我感到困惑的是何时使用“实体”以及何时使用“字段列”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:52:35.533

您可以通过两种方式进行操作，例如：-

在 Item 和 Location 之间创建一个简单的 SQL 查询

```
<document name="items">
    <entity name="item" query="SELECT A.ID, A.TITLE, A.DESCRIPTION, A.DATE, A.SOURCE, B.COORDINATE , C.NAME FROM ITEM A, LOCATION B, COUNTRY C WHERE A.LOCATION_ID = B.ID AND B.COUNTRY_ID = C.ID">
        <field column="ID" name="id" />
        <field column="TITLE" name="title" />
        <field column="DESCRIPTION" name="description" />
        <field column="DATE" name="date" />
        <field column="SOURCE" name="source" />
        <field column="COORDINATE" name="coordinate" />     

    </entity>
</document> 
```

使用[子实体](http://wiki.apache.org/solr/DataImportHandler#Full_Import_Example)：-

```
<document name="items">
    <entity name="item" query="SELECT A.ID, A.TITLE, A.DESCRIPTION, A.DATE, A.SOURCE, B.COORDINATE , C.NAME FROM ITEM A, LOCATION B, COUNTRY C WHERE A.LOCATION_ID = B.ID AND B.COUNTRY_ID = C.ID">
        <field column="ID" name="id" />
        <field column="TITLE" name="title" />
        <field column="description" name="description" />
        <field column="DATE" name="date" />
        <field column="SOURCE" name="source" />

        <entity name="location" query="select coordinate from location where id='${item.ID}'">
            <field name="coordinate" column="coordinate" />
        </entity>

    </entity>
</document> 
```

# html - 组合框中的语言未正确显示

> ID：13683467
> 
> 赞同：0
> 
> 时间：2012-12-03T12:39:34.323
> 
> 标签：html, character-encoding

我使用的代码如下

```
 <select style="font-family: Arial Unicode MS;">
    <option>Select Language</option>
    <option value="ar">Arabic — العربية</option>
    <option value="bn">Bengali — বাংলা&lt;/option>
    <option value="bg">Bulgarian — български</option>
    <option value="ca">Catalan — Català</option>
    <option value="zh_CN">Chinese (Simplified) — 中文（简体）</option>
    <option value="zh_TW">Chinese (Traditional) — 中文 (繁體)</option>
    <option value="hr">Croatian — Hrvatski</option>
    <option value="cs">Czech — čeština</option>
    <option value="da">Danish — Dansk</option>
    <option value="nl">Dutch — Nederlands</option>
    <option value="en" selected="">English</option>
    <option value="en_GB">English (UK) — English (UK)</option>
    <option value="fil">Filipino — Filipino</option>
    <option value="fi">Finnish — suomi</option>
    </select> 
```

但是当我在浏览器中打开它时它没有正确显示它显示如下

![像这样](../Images/821b74bf41a02e2bf52d21b10dff0499.png)

我该如何解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:42:47.907

这只是字符编码不匹配。浏览器正试图以某种其他编码解释文本，而不是它真正的编码。确保输出的 HTML 以某种合适的编码（如 UTF-8）编码，并正确地告诉浏览器这种编码。使用 HTTP`Content-Type`标头和/或 HTML 元标记来执行此操作。

您需要如何执行此操作取决于您提供/生成页面的具体方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:11:08.440

尝试添加这个。它在我的浏览器上运行良好。火狐 10.

```
<!doctype html>

<html lang="en">
<head>
<meta charset="utf-8" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T05:23:08.897

检查浏览器中的编码将其更改为 utf-8 ....这样它就可以工作了

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-06T04:09:31.973

当我想在我的网站中插入一些日语单词时，我只是使用这个网站：

[http://mylanguages.org/converter.php](http://mylanguages.org/converter.php)

只需转换为 unicode 并将其粘贴到您的编码行中即可。就那么简单。

# mysql - SQL：通过 Select 查询以特定（静态）顺序检索数据

> ID：13683468
> 
> 赞同：0
> 
> 时间：2012-12-03T12:39:47.443
> 
> 标签：mysql, select

我目前正在尝试创建一个 MySQL 查询，它使用静态顺序从特定表（图像）输出数据。我目前正在使用 UNION ALL 来执行此操作，但我现在有点卡住了。

这是我想要它做的事情：

我有一个名为*images*的表，其中包含以下字段：user_id、image、image_dimension（此字段值：小、宽、高、大）。

从图像表中，我想以静态顺序检索具有特定尺寸的图像，以将它们放入我的静态图像网格中。现在它变得复杂了：我只想要每个 user_id 一 (1) 个图像。

到目前为止，这是我的尝试：

```
SELECT
    *
FROM
(

    (SELECT * FROM `artworks` WHERE img = 'Large' LIMIT 1)
    UNION ALL
    (SELECT * FROM `artworks` WHERE img = 'Small' LIMIT 2)
    UNION ALL
    (SELECT * FROM `artworks` WHERE img = 'Large' LIMIT 1)
    UNION ALL
    (SELECT * FROM `artworks` WHERE img = 'Wide' LIMIT 1)
    UNION ALL
    (SELECT * FROM `artworks` WHERE img = 'Small' LIMIT 2)
    UNION ALL
    (SELECT * FROM `artworks` WHERE img = 'Tall' LIMIT 2)
    UNION ALL
    (SELECT * FROM `artworks` WHERE img = 'Large' LIMIT 1)
) AS order 
```

此查询从“图像”表中提取具有特定维度的图像，并使用 LIMIT - 我得到订单所需的数量。到目前为止，这有效，但它不允许我在保持订单的同时只为每个 user_id 获取一张图像。

如何确保我收到订单（请参阅查询）但每个 user_id 只能获得一张图片？

再次订购是：1x 大、2x 小、1x 大、1x 宽、2x 小、2x 高和 1x 大）

对不起，我的英语不好，如果您需要任何进一步的描述，请告诉我。

**编辑：**

```
Table format artworks:
id | user_id | img_name | img

Sample data from artworks:
1  | 1       | Test 1   | Large
2  | 1       | Test 2   | Large
3  | 2       | Test 3   | Small
4  | 2       | Test 4   | Small
5  | 2       | Test 5   | Small
6  | 3       | Test 6   | Small
7  | 3       | Test 7   | Small
8  | 3       | Test 8   | Small
9  | 4       | Test 9   | Large
10 | 4       | Test 10  | Large
11 | 5       | Test 11  | Small
12 | 5       | Test 12  | Wide
13 | 6       | Test 13  | Small
14 | 7       | Test 14  | Small

My expected result (ORDER BY id DESC) to get latest img of each user:

2  | 1       | Test 2   | Large
5  | 2       | Test 5   | Small
8  | 3       | Test 8   | Small
10 | 4       | Test 10  | Large
12 | 5       | Test 12  | Wide
13 | 6       | Test 13  | Small
14 | 7       | Test 14  | Small 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:07:17.197

在这种情况下我尚未测试但想法正确的一种方法是在数据库中构建一个包含您的图像排列的帮助表，如下所示：

```
----- --------
size  ordering
----- --------
Large 1
Small 2
Small 3
Large 4
Wide  5
Small 6
Small 7
Tall  8
Tall  9
Large 10 
```

然后，您需要构建一个查询，该查询将提取与订购号配对的用户列表，如下所示：

```
SET    @ordering = 0;

SELECT artwork.*
FROM   arrangement
JOIN  (SELECT @ordering := @ordering + 1 AS ordering, user_id
       FROM   users) AS ordered_users
       ON arrangement.ordering = ordered_users.ordering
JOIN   artwork ON ordered_users.user_id = artwork.user_id AND
                  arrangement.size = artwork.img
GROUP BY ordering ASC; 
```

这里的技巧是，`@ordering`变量会为查询的表的每一行递增和设置，`users`然后可以`arrangement`通过它们的排序号与表中的条目配对，以配对用户、图像大小和它们在排列中的顺序。完成后，您可以将它们与图像匹配。（Ab）使用`GROUP BY`（而不是`ORDER BY`）某些 MySQL 特定的行为会消除用户可能拥有的任何相同大小的图像，并通过某种任意方法有效地选择其中一个。

这种方法远非理想，特别是因为它滥用了一些 MySQL 特定的行为，尽管这种滥用可能会通过相关的子查询来消除。但是，它至少可以为您提供一些关于如何解决问题的想法。

也就是说，这种事情并不完全是您使用 SQL 所做的事情。

# entity-framework - 存储过程返回集合复杂类型对象生成器工具

> ID：13683471
> 
> 赞同：0
> 
> 时间：2012-12-03T12:39:53.157
> 
> 标签：entity-framework, stored-procedures, orm

我想知道是否有任何免费/开源工具可以从存储过程生成返回集合复杂类型对象，例如 vs2010 实体框架存储过程添加函数导入工具。

问候， 安德里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:48:04.143

您可以找到很多帮助者可以为您执行此操作，例如[http://radstudio.codeplex.com/releases](http://radstudio.codeplex.com/releases)但我不知道您为什么要自动生成所有内容，我建议您尝试使用 petapoco ORM 如果您找到一种简单的工作方式数据并获得最佳性能。

[http://www.toptensoftware.com/petapoco/](http://www.toptensoftware.com/petapoco/) :)

# python - 在 python 中使用正则表达式进行 Dhcpd 租约匹配？

> ID：13683472
> 
> 赞同：0
> 
> 时间：2012-12-03T12:39:53.683
> 
> 标签：python, regex, dhcp

我想匹配所有给定 mac 地址的 dhcp 租约。

我写了这段代码

```
fh = open(leaseFile)
lines = fh.read()
fh.close()
regex = r"lease\s*[0-9\.]+\s*\{[^\{\}]*%s[^\{\}]*?\}" % mac #mac comes as parameter
m = re.findall(regex,lines,re.DOTALL) 
```

如果租约不包含“}”字符，这很有效。但如果是这样，我的正则表达式就失败了。例如：

```
lease 10.14.53.253 {
  starts 3 2012/10/17 09:27:20;
  ends 4 2012/10/18 09:27:20;
  tstp 4 2012/10/18 09:27:20;
  binding state free;
  hardware ethernet 00:23:18:62:31:5b;
  uid "\001\000\013OW}k";
} 
```

我不知道如何处理这个异常。感谢您的任何建议...

**编辑**

经过研究，我决定将此正则表达式与 MULTILINE 模式一起使用。它适用于我尝试过的所有租约。

```
fh = open(leaseFile)
lines = fh.read()
fh.close()
regex = r"lease\s*[0-9\.]+\s*\{[^\{\}]*%s[\s\S]*?^\}" % mac #mac comes as parameter
m = re.findall(regex,lines,re.MULTILINE) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:56:34.707

```
regex = r'(lease\s*[0-9\.]+\s*\{[^\{\}]*%s[^\{\}]*(.*"[^\{\}]*\}|\}))' % mac #mac comes as parameter
m = re.findall(regex,lines) 
```

这应该可以解决问题。

# android - cocos2d-android 文档

> ID：13683473
> 
> 赞同：2
> 
> 时间：2012-12-03T12:39:58.627
> 
> 标签：android, cocos2d-android

我正在使用[此处](http://code.google.com/p/cocos2d-android-1/)提供的开源 cocos2d-android-1 库开发 android 游戏。[我还使用本教程](http://dan.clarke.name/2011/04/how-to-make-a-simple-android-game-with-cocos2d/)开发了演示应用程序。

现在我想做进一步的开发，但我没有得到这个库的任何文档以及如何使用库。如果有人知道这个库项目的任何博客、论坛、文档，请向我推荐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:06:54.983

我建议你改用[cocos2d-x](http://www.cocos2d-x.org/)。它也是 cocos2d-iphone 的一个端口，但比 cocos2d-android 拥有更多的平台、更好的文档和更广泛的社区（但仍然不如 cocos2d-iphone）。

开始可能会有点痛苦，因为您需要了解如何在 android 上运行本机代码，但当您决定将游戏移植到另一个平台时，您可能不会后悔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:10:01.743

github 上有许多 cocos2d-android 的示例，文档规模不大，但您可以处理 cocos2d-andriod 中提供的测试示例中的大部分内容。如果您遇到任何问题..在此处发布以获得答案或帮助..

# jquery - 将多个 jQuery 插件组合到一个文件中会导致错误

> ID：13683475
> 
> 赞同：0
> 
> 时间：2012-12-03T12:40:05.633
> 
> 标签：jquery

我想将我的 jQuery 插件压缩到一个文件中，以方便和节省带宽。为此，我使用了带有“文件”选项的[Online YIU Compressor](http://refresh-sf.com/yui)。我上传了以下 jQuery 插件：

1.  元数据
2.  形式
3.  星级评定
4.  证实
5.  验证的其他方法
6.  波兰语消息
7.  选择
8.  j截断
9.  角落
10.  jQuery 用户界面

我的问题是，这样做之后，其中一些不起作用，例如。jTruncate`Uncaught TypeError: Object [object Object] has no method 'jTruncate'`在元素上使用时返回错误，并且 Validate Causes`Uncaught TypeError: undefined is not a function`都打印在控制台中。Corners 插件根本不起作用（PHPStorm 看到了方法`corner`，但它对输出不起作用）。

我可以做些什么来合并这些文件并 - 如果可能的话 - 压缩？

# javascript - 通过 JavaScript 添加后从文本区域读取时保留选项卡

> ID：13683479
> 
> 赞同：0
> 
> 时间：2012-12-03T12:40:18.710
> 
> 标签：javascript, jquery, html

在读取文本区域的值时，我遇到了保留制表符的问题。我正在添加选项卡，如下所示：

```
$("#code-editor").keydown(function (e) {
    if (e.keyCode === 9) { // tab was pressed
        // get caret position/selection
        var start = this.selectionStart;
        var end = this.selectionEnd;

        var $this = $(this);
        var value = $this.val();

        // set textarea value to: text before caret + tab + text after caret
        $this.val(value.substring(0, start)
                    + "\t"
                    + value.substring(end));

        // put caret at right position again (add one for the tab)
        this.selectionStart = this.selectionEnd = start + 1;

        // prevent the focus lose
        e.preventDefault();
    }
}); 
```

选项卡已正确插入并按预期显示在文本区域中。当我读取 textrea 的值并尝试用 html 格式替换制表符时，就会出现问题。

```
$("#code-editor").keyup(function (e) {
        var value = $(this).val();
        //Do formatting
        var lines = value.split("\n");

        var newvalue = "";

        for (var i = 0; i < lines.length; i++) {
            lines[i].replace(/\t/g, "<span style='padding-left:3em'></span>");
            lines[i] += "<br />";
            newvalue += lines[i];
        }

        $('#editor-displayarea').html(newvalue);
    }); 
```

我发现从 textarea 读取时似乎没有保留选项卡。

有没有办法解决这个问题或者我采取了错误的方法？

谢谢。

更新：我尝试使用下面评论中所述的正则表达式的一些变体，但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:13:31.567

替换选项卡时不会存储值。尝试这样的事情（我也会把它留`&nbsp;`在跨度中）：

```
for (var i = 0; i < lines.length; i++) {
    var replaced = lines[i].replace(/\t/g, "<span style='padding-left:3em'>&nbsp;</span>");
    replaced += "<br />";
    newvalue += replaced;
} 
```

# iframe - iframe - 将网页缩小 0.30，但将移动网页缩小 0.90？

> ID：13683480
> 
> 赞同：0
> 
> 时间：2012-12-03T12:40:21.157
> 
> 标签：iframe

我使用以下内容来缩小 iframe 中的网页，它适用于普通网页，但如果网页是移动网页（因此只有 320px 宽），那么我想使用 -webkit-transform 来缩小它： scale( 0.90); 而不是 0.30。

```
<div id="iframewrap">
    <iframe id="iframeid" src="http://www.mypage.com" name="iframeName" marginwidth="0" marginheight="0" scrolling="yes" frameborder="0" height="100%"></iframe>
</div>   

<style type="text/css"> 
#iframewrap { width: 320px; padding: 0px; top:45px; position:relative; overflow:hidden;}
#iframeid { width:320px;  height:100%; margin:10px 10px 10px 10px; overflow:hidden;}
#iframeid {
    -ms-zoom: 0.30;
    -moz-transform: scale(0.30);
    -moz-transform-origin: 0 0;
    -o-transform: scale(0.30);
    -o-transform-origin: 0 0;
    -webkit-transform: scale(0.30);
    -webkit-transform-origin: 0 0;
}
</style> 
```

我已经尝试了很多东西，从谷歌搜索获取加载到 iframe 中的页面宽度，尝试计算 iframe 的宽度并将其设置为（内容宽度 * 0.90）

或者如果您有其他建议？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:53:12.010

如果我正确理解您的目的，我认为您想避免在小屏幕（iPhone ??）上缩小太多。

您可以使用`@media`查询来查找设备像素比率并为它们编写覆盖 CSS 类。

一个快速的谷歌搜索让我找到了@opticswerve 的[文章](http://menacingcloud.com/?c=highPixelDensityDisplays)。

**编辑：**如果您想使用设备设备最大宽度`@media`查询仍然会有所帮助，如此处的 stackoverflow 问题[所述](https://stackoverflow.com/questions/3893342/do-iphone-android-browsers-support-css-media-handheld)。

# php - 用 php 解析 rdf/xml 文件？

> ID：13683481
> 
> 赞同：0
> 
> 时间：2012-12-03T12:40:21.427
> 
> 标签：php, mysql, parsing

这是我的问题...

我有一个装满图书馆记录的 mysql 表。拥有一本书的所有常用信息（标题、出版日期、作者等）......加上一个字段，即图书馆链接到该书的 URL。如果附加到 URL 的末尾，您可以获得不同格式的信息（mrc、ris、endnote、rdf、xml）。看起来 xml 是最容易使用的：

```
http://mirlyn.lib.umich.edu/Record/004032026.rdf 
```

桌子的问题在于它主要是手工完成的，并且有许多不一致之处。我想使用 rdf 文件更新表格。如何在 PHP 中解析这个东西？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:44:05.830

不要重新发明轮子——例如，您可以使用 PHP 的[Magpie RSS 库](http://magpierss.sourceforge.net/)。

您可以使用从 rdf 提要加载的数据来更新数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:37:02.690

使用了simplexml。让喜鹊工作有困难。Simplexml 是...简单！:)

# button - ExtJS 开/关按钮

> ID：13683482
> 
> 赞同：6
> 
> 时间：2012-12-03T12:40:35.760
> 
> 标签：button, extjs, extjs3, togglebutton

我想在我的 Web 应用程序中使用 extjs 创建类似移动设备的开/关按钮。我找不到任何样品或解决方案。我实际上想要这样：**[演示](http://jsfiddle.net/johniehjelm/zAVqU/4/)**

**CSS**

```
/* 
    Created by @JohnieHjelm. I took the liberty of doing this ON/OFF switch
    just to express my love for CSS3\. You're free to use this and of course
    I hoped you learned something. Sharing is Caring♥
*/

body{
    background:#eee;
}

ul{
    list-style:none;
    width:85px;
    height:26px;
    position:absolute;
    top:50%;
    left:50%;
    margin:-13px 0 0 -42px;
}

ul li{
    float:left;
    line-height:23px;
    font-size:11px;
    padding:2px 10px 0; 

    background: #E5E5E5;
    background-image:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#F3F3F3), to(#E5E5E5));
    text-shadow:0 1px 0 #FFF;
    border-left:1px solid #D5D5D5;
    border-top:1px solid #D5D5D5;
    border-bottom:1px solid #D5D5D5;
    -webkit-box-shadow:0 1px 0 #FFF inset, 0 0 5px rgba(0, 0, 0, .1) inset, 0 1px 1px rgba(0, 0, 0, .3);
}

ul li:first-child{
    -webkit-border-radius:5px 0 0 5px;
}
ul li:last-child{
    -webkit-border-radius:0 5px 5px 0;
}

ul li a{
    text-decoration: none;
    font-family:Helvetica, Arial;
    text-transform:uppercase;
    color:#a1a1a1;
}

.on{
    background: #505050;
    background-image:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#777), to(#505050));
    text-shadow:0 -1px 0 #444, 0 0 7px #9AE658;
    border-right:1px solid #444;
    border-top:1px solid #444;
    border-bottom:1px solid #444;
    -webkit-box-shadow:0 1px 2px rgba(0, 0, 0, .7) inset, 0 1px 0 #FFF;  
}

ul li:not(.on):active{
    background-image:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#ddd), to(#f1f1f1));
}

ul li.on a{
    color:#7BBA47;
    cursor: default;
}​ 
```

**jQuery**

```
$(function(){
    $("ul li").click(function(){
        $("ul li").removeClass("on");
        $(this).addClass("on"); 
    });
});​ 
```

我怎样才能用 ExtJS 做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T13:19:21.097

只是一个可以轻松扩展到完整组件的快速组件：

```
Ext.get(Ext.query("ul li")).on('click', function(e, t, eOpts) { 
    var el = Ext.get(this),p;
    el.addCls("on");
    if((p = el.next())) {
        p.removeCls("on");
        alert('can fire turn OFF');
    } else if ((p = el.prev())){
        p.removeCls("on");
        alert('can fire turn ON');
    }
})​;​ 
```

这是一个**[JSFiddle](http://jsfiddle.net/zAVqU/697/)**

# javascript - 我应该如何进行 URL 重定向，以便用户无法使用“返回”按钮

> ID：13683483
> 
> 赞同：1
> 
> 时间：2012-12-03T12:40:35.700
> 
> 标签：javascript, html, redirect

我想将用户重定向到某个页面，这样他们就无法使用“返回”按钮返回该页面。此外，我想让他们留在那个页面上，除非：

1.  他们在地址栏中输入其他内容并导航离开，或者
2.  他们关闭标签/浏览器。

这可能意味着在重定向后单击“返回”按钮什么也不做，或者“返回”按钮被禁用。

在现代浏览器（例如 IE9+、Chrome、FireFox 等）中执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:43:03.313

我认为最好的方法是使用 AJAX，您还可以使用 no-cache 属性告诉浏览器在缓存中不存储任何页面，这意味着不会有任何后退按钮功能，因为没有历史记录。

无论如何，当然有办法，

1.  在新标签、窗口中打开所有链接。
2.  使用阿贾克斯。
3.  使用无缓存属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:46:33.300

这种行为会很烦人，但是如果你想这样做，那么使用像这样的哈希值

```
<script>
window.onhashchange=function(){
window.location.hash='a';
}
window.onload=function(){
window.location.hash='a';
}

</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T12:47:01.037

我最好的想法是使用 ajax 在窗口中加载新内容：

$('body').load('/newpage.html')

我认为没有办法让浏览器禁用后退按钮......而且，他们也可以使用书签进行导航。

您可以做的另一件事是打开一个没有地址栏的新窗口。如果您可以打开一个新窗口，这可能是最好的选择

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T12:47:17.930

您可以模仿禁用页面上的后退按钮。您可以通过以下三种方式实现这一目标。看看[这里](http://www.htmlgoodies.com/tutorials/buttons/article.php/3478911/Disabling-the-Back-Button.htm)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T16:04:44.730

```
<SCRIPT LANGUAGE="JavaScript">
function goNewWin() {
window.open("backbuttonnewpage.html",'TheNewpop','toolbar=1,
location=1,directories=1,status=1,menubar=1,
scrollbars=1,resizable=1');
self.close()
}
</SCRIPT>
<A HREF="javascript:goNewWin()">Click to go to a new page</A> 
```

# android - Android Webview 看起来质量比系统浏览器差

> ID：13683484
> 
> 赞同：1
> 
> 时间：2012-12-03T12:40:38.147
> 
> 标签：android, webview

我在 android 应用程序中开发了一个 webview 来呈现现有的 web 应用程序。我认为目标 sdk 为 8。在开发应用程序在三星设备 (ICS) 中完美运行之后，但是当我在我的华硕 (ICS) 平板电脑上测试相同的东西时，质量很差，一切看起来都很模糊，而当我在它的测试中看起来同样完美系统浏览器。

跟硬件有关系吗？请给我一些建议..

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:14:20.997

尝试在应用程序中更改`minSDK level to 11.`并启用硬件加速。`manifest``application level`

# jquery - jQuery Link 在第一次点击后停止响应

> ID：13683491
> 
> 赞同：0
> 
> 时间：2012-12-03T12:41:15.270
> 
> 标签：jquery, html5-audio

我正在尝试从图形控制 HTNL5 音频。第一次单击将开始播放歌曲，但随后链接停止响应单击，因此歌曲继续播放且无法停止。e.preventDefault() 是否会删除链接的可点击性？

HTML是

```
<div>
    <audio id="plyr">
        <!-- <audio controls="controls"> -->
        <source src="<?php echo get_bloginfo('wpurl') . '/assets/media/' . $faSong; ?>.ogg" type="audio/ogg">
        <source src="<?php echo get_bloginfo('wpurl') . '/assets/media/' . $faSong; ?>.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
</div> <!-- END plyr DIV -->
<div id="featured-song">
    <a class="playback" href="#">
        <img class="btnPlay" src="/assets/images/play_button.png" />
    </a>
</div> <!-- END featured-song DIV --> 
```

和 jQuery 是：

```
jQuery(function($) {
    var song = $("#plyr").get(0);

    $(".playback").click(function(e){
        e.preventDefault();
        if( song.paused ){
            song.play();
        } else {
            song.pause;
        } // end if
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:54:20.977

更改`song.pause`为`song.pause()`

# desire2learn - 通过 Desire2Learn 中的网络服务器传递课程名称时允许的字符

> ID：13683505
> 
> 赞同：0
> 
> 时间：2012-12-03T12:42:06.253
> 
> 标签：desire2learn

在创建课程时，我将角色发送到课程名称，当我在 Desire2Learn 中查找时，课程名称被转移到“？”。发送的字符是破折号（不是您可以直接从键盘 (-) 输入的字符，但要长一点（例如在“课程 - 名称”中）——我是从单词中复制名称时得到的）。然而，这导致了 D2L 课程名称支持哪个字符的问题，以便我们可以发送类似的字符集。另外，如果字符是中文或波兰语课程名称，会发生什么？

[更新 - 15/12] - 当我发送日文字符代替用户名时 - 它也将它们显示为一系列“？”

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T03:16:18.897

已解决 - 实际上我在提交到 POST 之前使用 Ascii 编码将数据转换为字节。更改为 UTF8 编码现在解决了该问题。

# installshield - 无法使用 InstallShield 使用 RegDBDeletekey 删除密钥

> ID：13683511
> 
> 赞同：0
> 
> 时间：2012-12-03T12:42:18.847
> 
> 标签：installshield

我是这个 InstallShield 代码的新手。我正在尝试删除一个密钥

> `RegDBDeleteKey("Nrs_Log");`

但无法删除，安装程序运行良好。任何人都可以建议任何其他方式来删除注册表项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:29:59.117

RegDBDeleteKey() 可能失败的原因有很多。您的帖子中没有足够的信息来确定问题，所以如果没有更多信息，我什至无法推测。所以这里是如何获取更多信息 - 您需要获取 RegDBDeleteKey() 调用的返回值，以便了解发生了什么。
下面的代码获取返回值，将其转换为文本错误，并显示结果。

```
result = RegDBDeleteKey("Nrs_Log");
if(result < 0) then
   SprintfBox(WARNING, "RegDBDelete...", "Failed to delete registry key.\n Error number: %d \n %s", result, FormatMessage(result) );
endif; 
```

一旦您知道实际错误，您应该能够解决问题或谷歌它以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-27T12:31:00.527

请参阅下面的 InstallShield InstallScript，了解如何删除给定的注册表配置单元。如果在尝试删除之前检查注册表项是否存在：

```
function DeleteRegistryKeys(hMSI)
    STRING keyToDelete;
begin
    keyToDelete = "\\SOFTWARE\\MyRegistryHive\\";
    //comment below line if your target root hive is HKEY_CLASSES_ROOT
    RegDBSetDefaultRoot(HKEY_LOCAL_MACHINE); //Set this if you want to change the registry root to HKEY_LOCAL_MACHINE.
    REGDB_OPTIONS = REGDB_OPTION_WOW64_64KEY; //Set this only if you want to search WOW64 hive of HKEY_LOCAL_MACHINE if you've a 32-bit installer running on a 64 bit operating system.

    if (RegDBKeyExist (keyToDelete) > 0) then
        SprintfMsiLog ("registry keys found. Going to delete registry keys");
        if (RegDBDeleteKey (keyToDelete) < 0) then
            SprintfMsiLog ("Failed to delete registry keys.");
        else
            SprintfMsiLog ("Registry keys deleted successfully.");
        endif;
    else
        SprintfMsiLog ("Registry keys not found.");
    endif;
end; 
```

# apache-flex - Flex / ActionScript - 点击一个元素到 Air App 后面的应用程序

> ID：13683514
> 
> 赞同：2
> 
> 时间：2012-12-03T12:42:23.293
> 
> 标签：apache-flex, actionscript, air, flash-builder

我正在尝试使用 Flash Builder 中的 flex/Action Script 构建桌面 AIR 应用程序。

我想要的功能是： - 透明背景 - 半透明（alpha 0.5）项目/元素，忽略所有鼠标事件并“通过点击”到应用程序后面的应用程序

所以基本上我想要的是元素以与透明背景完全相同的方式处理鼠标事件 - 即。就像你在点击后面的应用程序

这是我尝试过的代码示例。在下面的示例中，单击按钮会触发“单击窗口”警报，以证明单击被按钮忽略并到达具有透明背景的窗口。但是，当我删除单击处理程序时，单击按钮不会导致单击传递到后面的应用程序，就像在透明背景上的其他任何地方单击一样。

有任何想法吗？

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx"
                       alwaysInFront="true"
                       creationComplete="maximize();">
    <fx:Style> 
        @namespace s "library://ns.adobe.com/flex/spark"; 
        s|WindowedApplication 
        { 

            skinClass:ClassReference("spark.skins.spark.SparkChromeWindowedApplicationSkin"); 
            background-color:#999999; 
            background-alpha:"0"; 
        }          
    </fx:Style>
    <fx:Script>
        import mx.controls.Alert;

        public function windowClicked():void{
            Alert.show("window clicked");
        }

        </fx:Script>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <s:Window id="mainWindow" height="100%" width="100%" mouseChildren="false" backgroundAlpha="0">

        <s:Button label="Click Through Me Please" alpha="0.5"/>

    </s:Window>

</s:WindowedApplication> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:14:25.297

我对你的问题做了一个快速评论，但我想我会在答案中详细说明。

由于我确信您要做的不仅仅是上面的示例，因此这些属性是如何工作的：

mouseEnabled="false" - 这表示您不能点击我，但您可以点击我的孩子。当您禁用单个项目或希望单击事件将项目传递给它的子项时，这很有效。

mouseChildren="false" - 这表示你不能点击我的孩子。如果您要在您的应用程序中构建可能包含 10 个显示对象并希望鼠标忽略所有显示对象的复杂叠加层，这将非常有用。

希望这可以帮助！

# sharepoint - 如何使用 caml 从 caml 结果中获取数据

> ID：13683515
> 
> 赞同：0
> 
> 时间：2012-12-03T12:42:24.360
> 
> 标签：sharepoint, caml

场景是：我在列表视图（例如预览列表）上有使用 caml 的项目，我必须再次从这些项目中查询，是否可以使用 caml 从 SPListItemsCollection 中查询？作为 MSSQL 我们可以做到`select * from(select * from tablename)`，但我们如何在 caml 中完成呢？

如果那不可能，我必须先从这些项目中搜索，然后将结果添加到 splist 或 spview，有人知道该怎么做吗？（是的，两个不同的想法）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:41:23.803

也许您可以尝试使用[SourceQuery](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.splistitemcollection.sourcequery%28v=office.14%29.aspx)属性，检索原始查询并使用运算符构建新的查询来组合两个查询？

# vbscript - 如何唯一标识同一页面中具有相同 url 的两个对象

> ID：13683518
> 
> 赞同：0
> 
> 时间：2012-12-03T12:42:45.643
> 
> 标签：vbscript, qtp

我在同一页面中有两个对象，但位置不同（标签），我想验证这些对象的每个部分......

我不能唯一地使用任何对象，因为它们具有相同的属性。

![在此处输入图像描述](../Images/8092d0f3a3298368316a13d892fe908e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:36:10.213

这些对象显然是唯一的，因为它们具有完全不同的文本，这意味着您将能够创建一个对象以仅匹配其中一个。我的建议是通过使用它的 text 属性来查找对象，其中一个将始终具有“Top Ranking”，另一个您需要将其转换为文本的正则表达式，并且将是“Participants (\d+)” .

我假设下一个答案不太可能，因此将其保存在您可能使用的答案之后，但最好的解决方案当然是让有权访问的人提供这些元素 ID 供您搜索。从长远来看，这将使您更容易维护，并且不使用文本将允许此测试以任何语言运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:10:29.217

Manaysah，这些对象有不同的索引吗？使用 object spy 并确定它们具有哪个索引，序号标识符索引可能是您问题的解决方案。如果可能，您还可以尝试添加一个内部文本对象属性，在 () 中使用通配符作为数字，因为它看起来是动态的。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-12-27T06:45:41.973

尝试对对象使用 xpath...xpath 肯定会有所不同

# c - 修剪字符的结尾 *

> ID：13683532
> 
> 赞同：1
> 
> 时间：2012-12-03T12:43:43.347
> 
> 标签：c, char, trim

有了，我必须在此`char double[] = "1.2345678";` 之后修剪第 4 位及以上的所有数字，即使 其达到。`.``char *``"1.234"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:44:59.947

找到`'.'`，前进四步，将字符串终止符放在那里。

注意不要自己传递字符串终止符，如果点后面的数字少于三位。

为了帮助您找到点，请查找[`strchr`](http://en.cppreference.com/w/c/string/byte/strchr)函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T12:45:20.110

一个明显的解决方案是将字符替换为`NUL`，如下所示：

```
char *foo = strdup("1.2345678");   // FIXME: check return value
foo[5] = '\0'; 
```

请注意，确切的位置可能会有所不同，具体取决于“。”之前出现的数字数量。特点。

遍历 string `foo`，`passed_dot`如果遇到 '.' 则更改状态，并在另外`NUL`4 个字符后插入 a：

```
char *p = foo;
int i = 0;
int passed_dot = 0;
while (p && *p) {
        if (*p == '.') passed_dot = 1;
        if (passed_dot) i++;
        if (i == 4) {
                *p = '\0';
                break;
        }

        p++;
} 
```

如果你买不起更多的 RAM，你可以`strdup()`得到字符串和`free()`旧的字符串以节省内存：

```
new_str = strdup(foo);   // and don't forget to check for NULL
free(foo); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T12:47:17.047

注意

```
char * double= "1.2345678"; 
```

声明一个字符串文字。这是 const 所以不能直接修改。要获取可修改的字符串，您可以将其声明为

```
char double[] = "1.2345678"; 
```

或者

```
char* double = strdup("1.2345678"); 
```

然后按照其他答案中的建议插入一个 nul 字符。

# postgresql - 使用 sha-256 在 postgres 中散列一列

> ID：13683533
> 
> 赞同：32
> 
> 时间：2012-12-03T12:43:47.280
> 
> 标签：postgresql

我有一个 postrges 数据库，其中一个表包含我使用 python 函数生成的关键代码。我希望能够对该列进行散列，以便每次将键代码添加到其中时，对键进行散列。我怎样才能让 postgres 做到这一点？或者存储这些代码的最佳方式是什么。这是我想在我的表中散列的列的示例。

```
 key_codes | 
-----------+
 L7G4J83K  |        
 J70KG169  |         
 L69E540K  |        
 GL8E9C3J  |         
 6C0LE215  |         
 9G01C8JA  |         
 1G9KC58A  | 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-12-03T13:19:03.157

使用触发器在插入和更新时设置哈希列。对于 SHA-256，[请使用`pgcrypto`扩展模块的`digest`功能](http://www.postgresql.org/docs/current/static/pgcrypto.html)。

由于您没有指定您的 PostgreSQL 版本，我将假设您在以下示例中使用当前的 9.2。

以下是调用 sha256 摘要函数的方法：

```
regress=# CREATE EXTENSION pgcrypto;
CREATE EXTENSION

regress=> SELECT digest('blah', 'sha256');
                               digest                               
--------------------------------------------------------------------
 \x8b7df143d91c716ecfa5fc1730022f6b421b05cedee8fd52b1fc65a96030ad52
(1 row) 
```

请注意，该`CREATE EXTENSION`函数必须以超级用户身份运行。

触发器非常简单。假设您的表格如下所示，这样的事情会做：

```
CREATE TABLE some_table ( key_codes text, hash bytea );

CREATE OR REPLACE FUNCTION hash_update_tg() RETURNS trigger AS $$
BEGIN
    IF tg_op = 'INSERT' OR tg_op = 'UPDATE' THEN
        NEW.hash = digest(NEW.key_codes, 'sha256');
        RETURN NEW;
    END IF;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER some_table_hash_update 
BEFORE INSERT OR UPDATE ON some_table 
FOR EACH ROW EXECUTE PROCEDURE hash_update_tg(); 
```

用法：

```
regress=> INSERT INTO some_table(key_codes) VALUES ('fred');
INSERT 0 1
regress=> SELECT * FROM some_table;
 key_codes |                                hash                                
-----------+--------------------------------------------------------------------
 fred      | \xd0cfc2e5319b82cdc71a33873e826c93d7ee11363f8ac91c4fa3a2cfcd2286e5
(1 row) 
```

您可以通过使更新触发器有条件来减少触发器执行的开销。而不是上面的`CREATE TRIGGER`，使用这两个：

```
CREATE TRIGGER some_table_hash_insert
BEFORE INSERT ON some_table 
FOR EACH ROW 
EXECUTE PROCEDURE hash_update_tg(); 

CREATE TRIGGER some_table_hash_update 
BEFORE UPDATE ON some_table 
FOR EACH ROW 
WHEN ( NEW.key_codes IS DISTINCT FROM OLD.key_codes ) 
EXECUTE PROCEDURE hash_update_tg(); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2018-10-15T14:55:13.010

从 PostgreSQL 11 开始，您可以使用内置函数来计算哈希值：

```
SELECT sha256('hello world!');
-- x7509e5bda0c762d2bac7f90d758b5b2263fa01ccbc542ab5e3df163be08e6ca9 
```

**[db<>小提琴演示](https://dbfiddle.uk/?rdbms=postgres_11&fiddle=9bb87f4b5a46a7402f9609547158383d)**

> [其他二进制字符串函数](https://www.postgresql.org/docs/11/static/functions-binarystring.html)
> 
> ```
> +----------------+--------------+---------------+
> |   Function     | Return Type  |  Description  |
> +----------------+--------------+---------------+
> | sha224(bytea)  | bytea        | SHA-224 hash  |
> | sha256(bytea)  | bytea        | SHA-256 hash  |
> | sha384(bytea)  | bytea        | SHA-384 hash  |
> | sha512(bytea)  | bytea        | SHA-512 hash  |
> +----------------+--------------+---------------+ 
> ```
> 
> 请注意，由于历史原因，函数 md5 返回文本类型的十六进制编码值，而 SHA-2 函数返回类型 bytea。使用函数 encode 和 decode 在两者之间进行转换，例如 encode(sha256('abc'), 'hex') 以获得十六进制编码的文本表示。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-07-16T02:42:37.260

从 PostgreSQL 12 开始，您可以使用生成的列；它可能很简单：

```
CREATE TABLE codes (
    ...,
    key_code text,
    sha_code text GENERATED ALWAYS AS (encode(sha256(key_code::bytea), 'hex')) STORED
); 
```

与其他方法一样，`CREATE EXTENSION IF NOT EXISTS pgcrypto;`如果还不是架构的一部分，您可能需要这样做。

可以像任何其他列一样选择和索引生成的列：

```
CREATE INDEX idx_sha_codes ON codes USING btree (sha_code);
SELECT id, sha_code FROM codes WHERE sha_code = '...'; 
```

有一些明显的限制，例如它们不能引用其他生成的列或其他表。但是，这种派生值几乎是一个完美的用例。更多信息请访问[https://www.postgresql.org/docs/12/ddl-generated-columns.html](https://www.postgresql.org/docs/12/ddl-generated-columns.html)。

# eclipse - 在 IBM RSA (Eclipse) 中重建后出现 OutOfMemory 错误

> ID：13683535
> 
> 赞同：0
> 
> 时间：2012-12-03T12:44:00.947
> 
> 标签：eclipse, ibm-rad

当我启动我的**IBM RSA**工作区时，动态内存会增长，并且在很短的时间后它会因**OutOfMemory**错误、核心转储等而崩溃。

我发现罪犯是一个**大的 struts-config.xml 文件**（1.7mb）。如果我从项目中删除它，动态内存不会增长太多。

我在 eclipse.ini 中使用这个初始化参数运行：

*-vmargs -Xms40m -Xmx1512m -Xmnx64m*

有人有任何线索来解决这个问题吗？

谢谢

# c# - WPF、数据绑定、查找层次结构

> ID：13683536
> 
> 赞同：1
> 
> 时间：2012-12-03T12:44:03.543
> 
> 标签：c#, .net, wpf, binding

我是 WPF 的新手，并尝试按照 MVVM 范例使用 DataBinding 开发一个小型应用程序。

我正在尝试为文档的 ObservableCollection（我的类型）提供绑定功能。第一个标签将显示文档路径（可通过 Attribute 属性获得），而下一个子标签 - 文档页面 - 将显示适当的信息：页面索引和页面内容（图像）。

这是一个问题 - 如何创建与父标签的查找绑定？在按钮单击命令上，我想传递文档路径，该路径在第一个 DataTemplate 中可用。

有没有办法解决这个问题？你会如何建议绕过它？

此外，是否有更好的方法来处理“嵌套”结构（集合中的集合）？

这是代码[https://gist.github.com/b5760982ba81e8ee4036](https://gist.github.com/b5760982ba81e8ee4036)第 14 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:29:45.693

你应该使用RelativeSource：

```
<ItemsControl ItemsSource="{Binding Documents}">
<ItemsControl.ItemTemplate>
    <DataTemplate>
        <StackPanel>
            <Label Content="{Binding Path=Attribute.Path}"/>
                <ItemsControl ItemsSource="{Binding Pages}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <StackPanel>

<Label Content="{Binding Index}"/>
                                <Button Content="{Binding Content}"
                                        Command="{x:Static viewModel:DocViewModel.Tests }" 
                                        CommandParameter="{Binding Path=DataContext.Attribute.Path,RelativeSource={RelativeSource AncestorType=ContentPresenter, Mode=FindAncestor,AncestorLevel=2"/> 
                            </StackPanel>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </DataTemplate>
    </ItemsControl.ItemTemplate> 
```

# visual-studio - 默认情况下，如何按构建顺序对 Visual Studio 的构建输出进行排序？

> ID：13683543
> 
> 赞同：7
> 
> 时间：2012-12-03T12:44:27.817
> 
> 标签：visual-studio, build, visual-studio-2005, trace, output

我知道我可以使用“**输出**”窗口中的“**构建顺序”**项在Visual Studio 中对多核构建的构建输出进行排序（如此[处](https://stackoverflow.com/questions/192561/is-there-a-visual-studio-plugin-for-sorting-build-output-scrambled-from-multi-t)所述）。

 **但是一旦我这样做并`F7`再次点击，选项就会切换回**Build**，我必须再次切换回**Build Order**。

有没有办法在**输出**窗口中将**构建顺序**设置为默认设置？

 **搜索一下，我发现这个问题被问了好几次，但从未回答：

*   [http://ntcoder.com/bab/2009/06/02/ordering-output-of-out-of-order-builds-in-visual-studio/#comment-484](http://ntcoder.com/bab/2009/06/02/ordering-output-of-out-of-order-builds-in-visual-studio/#comment-484)
*   [http://blogs.msdn.com/b/zainnab/archive/2010/07/03/show-the-output-window-during-build-vstiptool0045.aspx#comments](http://blogs.msdn.com/b/zainnab/archive/2010/07/03/show-the-output-window-during-build-vstiptool0045.aspx#comments)
*   [http://weblogs.asp.net/scottgu/archive/2005/10/21/428094.aspx#1451451](http://weblogs.asp.net/scottgu/archive/2005/10/21/428094.aspx#1451451)

* * *

**编辑：**[西蒙](https://stackoverflow.com/users/403671/simon-mourier)给出
的[答案](https://stackoverflow.com/a/14377496/520162)对我有用（或者至少它为我指明了正确的方向），但我不能简单地复制他的代码并将其插入我的项目中。**相反，我必须完全**按照[此处](http://msdn.microsoft.com/en-us/library/0b27f9kz%28v=vs.80%29.aspx)所述为构建事件创建处理程序：`MyMacros`

 **> 1.  在**Class View** explorer 窗格的 Macros IDE 中，双击**EnvironmentEvents**节点以将其显示为**EnvironmentEvents**选项卡和宏编辑器窗格上的下拉菜单。
>     
>     
> 2.  从**EnvironmentEvents**下拉菜单中，选择一个事件类型，例如**TaskListEvents**。**声明**组合框现在填充了可用的**任务列表**事件。
>     
>     
> 3.  在**声明**下拉菜单中，选择一个事件，例如**TaskAdded**，以将其事件过程添加到模块中。
>     
>     
> 
> 该事件被插入到您的宏中，您现在可以将代码添加到事件过程中。

否则，根本不会调用事件处理程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:55:18.297

您可以编写一个 Visual Studio 宏，如下所示：

```
Dim WithEvents MyBuildEvents as BuildEvents

Private Sub BuildEvents_OnBuildBegin(ByVal Scope As EnvDTE.vsBuildScope, ByVal Action As EnvDTE.vsBuildAction) Handles MyBuildEvents.OnBuildBegin
    OpenBuildOrderOutputPane()
End Sub

Private Sub OpenBuildOrderOutputPane()
    Dim window As Window = DTE.Windows.Item(EnvDTE.Constants.vsWindowKindOutput) ' Get Output Window
    Dim output As OutputWindow = CType(window.Object, OutputWindow)
    For Each pane As OutputWindowPane In output.OutputWindowPanes ' Browse panes
        If (pane.Guid = "{2032B126-7C8D-48AD-8026-0E0348004FC0}") Then ' Build Order guid
            pane.Activate()
        End If
    Next
    window.Activate()
End Sub 
```

您需要将此代码粘贴到 MyMacros、EnvironmentEvents 模块中。******

# javascript - 客户端断开连接时如何向房间客户端发送消息

> ID：13683554
> 
> 赞同：6
> 
> 时间：2012-12-03T12:45:24.367
> 
> 标签：javascript, node.js, socket.io

我希望服务器在其中一个断开连接时向所有房间客户端发送消息。

像这样的东西：

```
socket.on('disconnect', function() {
    server.sockets.in(room).emit('bye');
}); 
```

但...

*   我怎么知道要广播哪个房间？
*   如果客户加入了多个房间怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:30:14.410

检查套接字对象后，我想出了这个解决方案：

```
socket.on('disconnect', function() {
    var rooms = io.sockets.manager.roomClients[socket.id];
    for (var room in rooms) {
        if (room.length > 0) { // if not the global room ''
            room = room.substr(1); // remove leading '/'
            console.log('user exits: '+room);
            server.sockets.in(room).emit('bye');
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T20:57:37.813

不是 100% - 但试一试：

当连接到房间或添加新用户时，请记住他们的用户名或 ID 或套接字中的其他内容：

```
socket.on('adduser', function(username){
    socket.username = username;
    socket.join('room');
} 
```

然后听离开房间的事件：

```
socket.room.on('leave', function(){
    socket.broadcast.to(this).emit(socket.username + ' says seeya!');
} 
```

无论如何都值得一试——我敢肯定，如果没有，类似的东西会起作用。

# windows-7 - iis 中的 windows 功能中的 windows 身份验证

> ID：13683560
> 
> 赞同：2
> 
> 时间：2012-12-03T12:45:40.060
> 
> 标签：windows-7, iis-7, windows-authentication

我在我的 Windows 7 机器上的 IIS 7 中设置 Windows 身份验证时遇到问题。我知道默认情况下 IIS 不应用此选项，因此您必须在 Windows 功能-> Internet 信息服务-> 万维网服务-> 安全中勾选 Windows 身份验证复选框。但是，在安全性下只有 4 个选项，它们是，i) 基本身份验证 ii) IP 安全性 iii) 请求过滤 iv) URL 授权 有没有办法在这里获得 Windows 身份验证选项？这不是我注意到这一点的唯一实例，我在另一台装有 Windows 7 的机器上也遇到了同样的问题。

谢谢，

普拉迪普·帕特尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:48:46.353

~~我认为您需要先安装它。~~

 ~~> 1.  在任务栏上，单击开始，然后单击控制面板。
> 2.  在控制面板中，单击程序和功能，然后单击打开或关闭 Windows 功能。
> 3.  展开 Internet 信息服务，然后是万维网服务，然后是安全性。
> 4.  选择 Windows 身份验证，然后单击确定。~~ 

![在此处输入图像描述](../Images/2efb656613a5ceb6a9bd8b81c7cdd07d.png)

来源：[http ://www.iis.net/](http://www.iis.net/configreference/system.webserver/security/authentication/windowsauthentication)

 ~~这可能是由不提供域身份验证的 Windows 版本引起的。这只能通过**专业版或更高**版本的windows来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-11T09:09:11.363

因为我有7的家庭版，windows身份验证不可用。所以在我的项目中启用或禁用它并没有真正做任何事情。 [https://technet.microsoft.com/en-au/library/cc754628(v=ws.10).aspx](https://technet.microsoft.com/en-au/library/cc754628(v=ws.10).aspx)

我可以运行我的应用程序的唯一方法是单击 Visual Studio 中的解决方案文件，以确定哪个是我的解决方案的启动项目。然后我进入启动项目并启用匿名身份验证。为我工作。~~

# node.js - Running coffescript which uses nodejs

> ID：13683562
> 
> 赞同：0
> 
> 时间：2012-12-03T12:45:42.050
> 
> 标签：node.js, coffeescript

i have a rather simple problem with running coffescript file which uses node js. After compiling this peace of code I can run it with node command, but when I use coffee command with original source require function returns undefined object

```
 require('util').print 'abc' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:34:22.233

I'm not sure I totally understand your question. You need to know two things:

1.  CoffeeScript wraps all of your code in an immediately invoked function expression
2.  CoffeeScript always returns

Look at your JavaScript output and see if something returns where you didn't expect it to.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T13:40:08.633

I cannot reproduce this problem:

```
$ cat test.coffee 
require('util').print 'abc'

$ coffee test.coffee 
abc 
```

I know it doesn't directly answer your question, but perhaps knowing that it works will steer you in the right direction. :)

# c - “mod”和“remainder”有什么区别？

> ID：13683563
> 
> 赞同：187
> 
> 时间：2012-12-03T12:45:42.927
> 
> 标签：c, math, operators

我的朋友说“mod”和“remainder”之间存在差异。

如果是这样，C 和 C++ 有什么区别？'%' 在 C 中是指“mod”还是“rem”？

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2012-12-03T12:54:58.110

模数和余数之间存在差异。例如：

`-21`mod`4`是`3`因为`-21 + 4 x 6`是`3`。

但`-21`除以余数`4`为.`-5``-1`

对于正值，没有区别。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2013-12-17T15:51:38.923

> '%' 在 C 中是指“mod”还是“rem”？

在 C 中，`%`是**余数**¹。

> ...，`/`运算符的结果是任何小数部分被丢弃的代数商...（这通常称为“向零截断”。） C11dr §6.5.5 6
> 
> 运算符的操作数`%`应为整数类型。C11dr §6.5.5 2
> 
> 运算符的结果`/`是第一个操作数除以第二个的商；`%`运算符的结果是**余数**... C11dr §6.5.5 5

* * *

> “mod”和“remainder”有什么区别？

C 没有定义“mod”或“模”运算符/函数，例如[欧几里得除法](http://en.wikipedia.org/wiki/Euclidean_division)或[其他模](https://en.wikipedia.org/wiki/Modulo_operation)中使用的整数模函数。

C 定义了*余数*。

让我们将每个`%`运算符的“余数”与欧几里德的“mod”进行比较。

当为负时，“欧几里得模”与 C 的`a%b`运算不同。`a`

```
 // a % b, the remainder after an integer division that truncates toward 0.
 7 %  3 -->  1  
 7 % -3 -->  1  
-7 %  3 --> -1  
-7 % -3 --> -1 
```

欧几里得除法中的“模”或模。结果始终为 0 或正数。

```
 7 modulo  3 -->  1
 7 modulo -3 -->  1
-7 modulo  3 -->  2
-7 modulo -3 -->  2 
```

* * *

候选模代码：

```
int modulo_Euclidean(int a, int b) {
  int m = a % b;
  if (m < 0) {
    // m += (b < 0) ? -b : b; // avoid this form: it is UB when b == INT_MIN
    m = (b < 0) ? m - b : m + b;
  }
  return m;
} 
```

* * *

关于浮点数的注意事项：`double fmod(double x, double y)`，虽然叫做“fmod”，但它与欧几里德除法“mod”不同，但类似于C整数余数：

> 这些`fmod` 函数计算 的浮点余数`x/y`。C11dr §7.12.10.1 2

```
fmod( 7,  3) -->  1.0
fmod( 7, -3) -->  1.0
fmod(-7,  3) --> -1.0
fmod(-7, -3) --> -1.0 
```

* * *

[消歧](https://en.wikipedia.org/wiki/Disambiguation_(disambiguation))：C 也有一个类似的命名函数`double modf(double value, double *iptr)`，它将参数值分成整数和小数部分，每个部分都具有与参数相同的类型和符号。除了名称相似性之外，这与这里的“mod”讨论几乎没有关系。

* * *

[编辑 2020 年 12 月]

对于那些在所有情况下都需要适当功能的人，改进`modulo_Euclidean()`了 1）检测`mod(x,0)`和 2）使用`modulo_Euclidean2(INT_MIN, -1)`. 受到[具有完全定义行为的 4 种不同模数实现的](https://codereview.stackexchange.com/q/253799/29485)启发。

```
int modulo_Euclidean2(int a, int b) {
  if (b == 0) TBD_Code(); // perhaps return -1 to indicate failure?
  if (b == -1) return 0; // This test needed to prevent UB of `INT_MIN % -1`.
  int m = a % b;
  if (m < 0) {
    // m += (b < 0) ? -b : b; // avoid this form: it is UB when b == INT_MIN
    m = (b < 0) ? m - b : m + b;
  }
  return m;
} 
```

* * *

¹在 C99 之前，C 的定义`%`仍然是除法的*余数*，但`/`允许负商向下舍入而不是“向零截断”。请参阅[为什么在 C89 中得到不同的整数除法值？](https://stackoverflow.com/q/29991832). 因此，对于一些 C99 之前的编译，`%`代码可以像欧几里得除法“mod”一样工作。以上`modulo_Euclidean()`内容也适用于这种替代的老式剩余部分。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2021-01-06T23:44:54.050

余数的符号与除数相同，模数的符号与除数相同。

余数只是两个整数之间的算术除法后的剩余部分，而模数是余数和除数的和，当它们的符号相反时，以及当余数和除数都具有相同符号时，算术除法后的剩余部分。

**余数示例：**

10 % 3 = 1 [这里可除数是 10，它是正符号的，所以结果也将是正符号的]

-10 % 3 = -1 [这里可除数是-10，它是负号的，所以结果也将是负号的]

10 % -3 = 1 [这里可除数是 10，它是正符号的，所以结果也将是正符号的]

-10 % -3 = -1 [这里可除数是-10，它是负号的，所以结果也将是负号的]

**模数示例：**

5 % 3 = 2 [这里可除数是5，它是正符号的，所以余数也将是正符号的，除数也是正符号的。由于余数和除数的符号相同，结果将与余数相同]

-5 % 3 = 1 [这里可除数是-5，它是负号的，所以余数也将是负号的，除数是正号的。由于余数和除数的符号相反，结果将是余数和除数之和 -2 + 3 = 1]

5 % -3 = -1 [这里可除数是5，它是正符号的，所以余数也将是正符号，除数是负符号。由于余数和除数的符号相反，结果将是余数和除数之和 2 + -3 = -1]

-5 % -3 = -2 [这里可除数是-5，它是负号的，所以余数也将是负号的，除数也是负号的。由于余数和除数的符号相同，结果将与余数相同]

我希望这将清楚地区分余数和模数。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-09-04T00:42:33.060

在 C 和 C++ 以及许多语言`%`中，余数不是模运算符。

例如在运算`-21 / 4`中整数部分是`-5`，小数部分是`-.25`。余数是除数的小数部分，所以我们的余数是`-1`。JavaScript 使用余数运算符并确认这一点

```
console.log(-21 % 4 == -1);
```

模数运算符就像您有一个“时钟”。想象一个圆，分别在 12 点钟、3 点钟、6 点钟和 9 点钟位置有值 0、1、2 和 3。以顺时针方向步进商时间使我们得到模运算的结果，或者，在我们的示例中，逆时针方向为负商，得到 3。

**注意：**模数始终与除数同号，余数与商同号。当至少一个为负时，将除数和余数相加得到模数。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-03-24T08:11:13.753

```
% is a remainder(leftover after dividend / divisor) NOT modulus. 
```

You could write your own modulus function using the remainder(%) by the relation

```
 ((n%m)+m)%m

  where `n` is the given number and `m` is the modulus 
```

Find below the difference between the remainder and modulus values for the range n = (-7,7) and m = 3

```
n       -7 -6 -5 -4 -3 -2 -1  0  1  2  3  4  5  6  7  
------------------------------------------------------------------------- 
%(-m)   -1  0 -2 -1  0 -2 -1  0  1  2  0  1  2  0  1  =>  remainder
% m     -1  0 -2 -1  0 -2 -1  0  1  2  0  1  2  0  1  =>  remainder
mod m    2  0  1  2  0  1  2  0  1  2  0  1  2  0  1  =>  ((n%m)+m)%m
mod(-m) -1  0 -2 -1  0 -2 -1  0 -2 -1  0 -2 -1  0 -2  =>  ((n%m)+m)%m 
```

*Tips to remember:*

```
n%(-m)   = +(remainder)
(-n)%(m) = -(remainder)
sign of 'm' doesn't matter

n mod (-m) = -(result)
(-n) mod m = +(result)
sign of 'n' doesn't matter

For +ve 'n' and '%(-m)' or '%m' or 'mod m' gives the same remainder 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-01-12T13:03:18.993

模数，在您所指的模算术中，是算术除法后剩余的值或剩余值。这通常称为余数。% 正式地是 C / C++ 中的余数运算符。例子：

```
7 % 3 = 1  // dividend % divisor = remainder 
```

剩下要讨论的是如何处理这个 % 操作的负输入。现代 C 和 C++ 会为此运算生成一个有符号余数，其中**结果的符号始终与被除数输入匹配，**而不考虑除数输入的符号。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2016-06-14T18:25:38.240

在数学中，模运算的结果是欧几里得除法的余数。然而，其他约定也是可能的。计算机和计算器有多种存储和表示数字的方式；因此，他们对模运算的定义取决于编程语言和/或底层硬件。

```
 7 modulo  3 -->  1  
 7 modulo -3 --> -2 
-7 modulo  3 -->  2  
-7 modulo -3 --> -1 
```

# c# - Windows Phone 7 Socket Class 给 Host Not Found 错误

> ID：13683564
> 
> 赞同：0
> 
> 时间：2012-12-03T12:45:46.953
> 
> 标签：c#, windows-phone-7, asyncsocket, socketexception

我在 Windows Phone SDK 中使用 Socket 类，

问题是我的应用程序在模拟器上运行良好，但在接收中给出异常，说

```
 // Make an asynchronous Send request over the socket
        _socket.SendToAsync(socketEventArg); 
```

提供的参数无效，

当我调试时，在发送功能上，它说“找不到主机”但同一段代码在模拟器中工作正常，

我检查了我的设备同时具有 Wi-FI 和 3G，

我缺少任何应用程序配置吗？

# android - 布尔值在我的异步任务中不起作用

> ID：13683566
> 
> 赞同：0
> 
> 时间：2012-12-03T12:45:51.863
> 
> 标签：android, asynchronous, background, task

我有问题。我的异步任务做得很好。但是在我的 OnPostExecute 我得到了这个：

```
if (error = true) {
   loginErrorMsg.setText("Incorrect username/password");
} else {
   loginErrorMsg.setText("");
} 
```

即使`error == false`他仍然显示：不正确的用户名/密码......

```
class LoginUser extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(LoginActivity.this);
        pDialog.setMessage("Loading");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
        email = inputEmail.getText().toString();
        password = inputPassword.getText().toString();

    }

    /**
     * Creating product
     * */
    protected String doInBackground(String... args) {

        UserFunctions userFunction = new UserFunctions();
        Log.d("Button", "Login");
        JSONObject json = userFunction.loginUser(email, password);
     // check for login response
        try {
            if (json.getString(KEY_SUCCESS) != null) {
                String res = json.getString(KEY_SUCCESS); 
                if(Integer.parseInt(res) == 1){
                    // user successfully logged in
                    // Store user details in SQLite Database
                    DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                    JSONObject json_user = json.getJSONObject("user");

                    // Clear all previous data in database
                    userFunction.logoutUser(getApplicationContext());
                    db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));                        

                    // Launch Dashboard Screen
                    Intent dashboard = new Intent(getApplicationContext(), Main.class);

                    // Close all views before launching Dashboard
                    dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(dashboard);

                    // Close Login Screen
                    finish();
                }else{
                    // Error in login
                    error = true;
                }
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once done
        pDialog.dismiss();

        if( error = true){
            loginErrorMsg.setText("Incorrect username/password");
        } else {
            loginErrorMsg.setText("");
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:48:01.633

您应该使用双等号。

```
if (error == true) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T12:49:07.600

Java 中用于相等性测试的运算符 is `==`,`=`是赋值运算符。现在你`error`将永远是因为你每次`true`都分配给它。`true`希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T12:48:24.990

要进行比较，您应该使用`error == true`not`error = true`哪个是分配并且始终为真。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T12:48:26.687

更改`if(error = true)`为`if(error == true)`。

# android - 不同的 android:minSdkVersion 和 targetSdkVersion 导致性能问题

> ID：13683571
> 
> 赞同：0
> 
> 时间：2012-12-03T12:46:14.650
> 
> 标签：android

我目前正在开发一个 android 应用程序，在我的 Nexus S 上对其进行测试。如果我正在运行它，使用 minSdkVersion="7", targetSdkVersion="7" 它表现良好，但如果我将 targetSdkVersion（或两个变量）设置为更高的值超过 13，应用程序开始执行非常糟糕。

在我的自定义视图完成绘制后，应用程序的 GUI 挂起（不显示 ANR）大约 5 秒钟，然后它可以正常工作。

有任何想法吗？

**编辑：**

我想在 API 16 上开发我的应用程序，但向下兼容 API 级别 7，所以我想在 API 16 和 API 7 上对其进行测试。但是在级别 16 上它的性能很差。

IMO 这没有意义，因为如果我的手机使用 Android 4.1，则针对 16 级的应用程序应该比针对 7 级的应用程序性能更好。

绘制视图时 API 13 和 14 之间的主要区别是什么？

我正在使用一些自定义视图，即支持包中的 SherlockActionbar 和 ViewPager。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:16:31.993

我遇到过同样的问题。

当您切换到 时`targetSdkVersion=14`，`android:hardwareAccelerated`将默认为“true”而不是“false”

这将允许您定位 14 并且不会遇到性能问题：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="14" />
<application android:hardwareAccelerated="false" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:54:33.477

如果您将目标版本设置为高于最低版本，则允许您使用最低版本不知道的命令。它适用于您知道更高版本具有更好代码变体的情况，因此您将检查设备运行的版本，然后使用代码 nr1 或代码 nr2。

如果您确定如何处理它，您应该只使用不同的 api 版本。

# android - Android:- 片段和标签

> ID：13683574
> 
> 赞同：1
> 
> 时间：2012-12-03T12:46:21.663
> 
> 标签：android, android-fragments

我想创建一个有 4 个选项卡的屏幕。但最初只需要查看第一个选项卡。

基于内容中的操作（这是一个片段），我需要创建一个具有不同布局的新选项卡。将此应用程序视为适用于某物的表单形式。所以选项卡代表步骤 1、2、3、4。因此，一旦我完成第 1 步，我将单击一个按钮，该按钮会创建一个新选项卡第 2 步。

我不想通过启动活动来实现它，因为我需要维护以前的选项卡。那么如何在片段中捕获按钮单击并在运行时添加选项卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:02:08.433

```
create a new tab with different layout 
```

请参阅此示例 [如何将 Android ViewPager 设置为仅包含一个视图或布局？](https://stackoverflow.com/questions/13661499/how-do-you-set-android-viewpager-to-encompass-only-one-view-or-layout/13661761#13661761)

该问题与您无关，但示例有效且与您问题的一部分相关

已编辑

这就是您可以将片段与选项卡链接的方式。

```
class TestFragmentAdapter extends FragmentPagerAdapter {        
        private int mCount = TABS.length;

        public TestFragmentAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {

            MainSummary f1 = new MainSummary();
            MainActivity f2 = new MainActivity();

            if(TABS[position].equals("Summary")){
                return f1;
            }else if(TABS[position].equals("Activity")){
                return f2;
            }else{
                return null;
            }
        }

        @Override
        public int getCount() {
            return mCount;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            return TABS[position];
        }
} 
```

对于每个片段，您可以`R.layout.main_summary`像这样拥有单独的类和布局（）

```
public final class MainSummary extends ListFragment{
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    super.onCreateView(inflater, container, savedInstanceState);
    View view = inflater.inflate(R.layout.main_summary, container, false); 
    return view; 
}
} 
```

这里有一些有用的示例项目[https://github.com/github/android](https://github.com/github/android) 如果您研究这些示例，您可以找到您问题的所有答案

# compilation - CUDA 5.0 使用 cmake 单独编译库

> ID：13683575
> 
> 赞同：11
> 
> 时间：2012-12-03T12:46:29.413
> 
> 标签：compilation, cuda, cmake

我的 cuda 库的构建时间正在增加，因此我认为 CUDA 5.0 中引入的单独编译可能会对我有所帮助。我不知道如何使用 cmake 实现单独编译。我查看了 NVCC 文档并找到了如何编译设备对象（使用 -dc 选项）以及如何链接它们（使用 -dlink）。我尝试使用 cmake 运行它失败了。我正在使用 cmake 2.8.10.2 和 FindCUDA.cmake 的主干头。但是，我不知道如何指定应该编译哪些文件以及如何将它们链接到库中。特别是我不清楚 the 的语法，`function(CUDA_LINK_SEPARABLE_COMPILATION_OBJECTS output_file_var cuda_target options object_files source_files)` 因为我不知道 the`output_file_var`和 the`cuda_target`是什么。这是我尝试的无效结果：

```
cuda_compile(DEVICEMANAGER_O devicemanager.cu OPTIONS -dc)
cuda_compile(BLUB_O blub.cu OPTIONS -dc)
CUDA_LINK_SEPARABLE_COMPILATION_OBJECTS(TEST_O gpuacceleration
                                          ""  DEVICEMANGER_O BLUB_O)
set(LIB_TYPE SHARED)
#cuda_add_library(gpuacceleration ${LIB_TYPE} 
  #${gpuacc_SRCS} 
  #devicemanager.cu
  # blub.cu
  #DEVICEMANAGER_O
#  TEST_O
#) 
```

有谁知道如何使用 cmake 编译和链接 cuda 库？提前致谢。

**编辑：** 在朋友咨询 FindCUDA.cmake 的开发人员后，FindCUDA.cmake 提供的示例中修复了一个错误（[https://gforge.sci.utah.edu/gf/project/findcuda/scmsvn/?action=浏览&路径=%2F](https://gforge.sci.utah.edu/gf/project/findcuda/scmsvn/?action=browse&path=%2F)*结帐*%2Ftrunk%2FFindCuda.html)。我现在可以构建示例。在我的项目中，我可以根据需要使用以下内容构建库（需要 cmake 2.8.10）：

```
set(LIB_TYPE SHARED)
set(CUDA_SEPARABLE_COMPILATION ON)
cuda_add_library(gpuacceleration ${LIB_TYPE} 
 blub.cu
 blab.cu
) 
```

**但是：** 我无法链接到这个库。当我在没有单独编译的情况下构建 lib 时，我能够链接它。现在收到以下错误：

```
 undefined reference to `__cudaRegisterLinkedBinary_53_tmpxft_00005ab4_00000000_6_blub_cpp1_ii_d07d5695' 
```

对于每个具有接口中使用的函数的文件。看起来很奇怪，因为它在没有任何警告的情况下构建等。有什么想法可以让它工作吗？

**编辑：** 我终于想出了如何做到这一点。有关详细信息，请参阅@PHD 和我的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T09:52:54.793

我终于让它运行了；）

除了@PHD的答案和我对它的评论，我修改了：`set(BUILD_SHARED_LIBS OFF)`在我的`CMakeLists.txt`共享库中，根据nvcc手动v5.0第40页不支持单独编译。

除此之外，使用存储库中的最新版本（1223）而不是版本 1221。我联系了开发人员，他修复了一些阻止此问题的问题。这个版本没有`nvcc` `-arch=sm_xx`正确设置标志，所以我为我的项目手动添加了这个，并通知了 FindCUDA.cmake 的开发人员。所以这可能会在未来得到解决。

不要忘记让 cmake > 2.8.10 才能正常工作。

希望这对我以外的任何人都有帮助；）

这是我的 CMakeLists.txt：

```
#Required for CUDA-Check
cmake_minimum_required(VERSION 2.8.10)

project(gpulib)

set(CMAKE_MODULE_PATH "${CMAKE_SOURCE_DIR}/CMake/cuda" ${CMAKE_MODULE_PATH})
# ============================================
# === Target
# ============================================
file(GLOB_RECURSE gpuacc_SRCS "*.cu")
include_directories(.)

# ---------------------------------------
# Find Cuda
find_package(CUDA REQUIRED)

set(CUDA_ATTACH_VS_BUILD_RULE_TO_CUDA_FILE ON)

set(BUILD_SHARED_LIBS OFF)

set(CUDA_SEPARABLE_COMPILATION ON)
#list(APPEND CUDA_NVCC_FLAGS -arch=sm_20)

set(LIB_NAME "gpuacceleration")
cuda_add_library(${LIB_NAME}
  ${gpuacc_SRCS} 
  OPTIONS -DSTUFF="blah blah"
  RELEASE -DNDEBUG
  DEBUG -g -DDEBUG
)

set(PUBLIC_HEADERS "myheader1.h;myheader2.h")

INSTALL(FILES ${PUBLIC_HEADERS} DESTINATION include)
INSTALL(FILES "${CMAKE_BINARY_DIR}/src/lib${LIB_NAME}.a" DESTINATION lib) 
```

编辑：这不起作用！问题是在主项目中构建可执行文件时链接生成的库时，对所有 cuda 函数（例如 cudaMalloc）都有未定义的引用。

仍在努力

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-20T09:36:19.863

编辑（2016-03-15）：是的，它被确认为 FindCUDA 中的一个错误：[https ://cmake.org/Bug/view.php?id=15157](https://cmake.org/Bug/view.php?id=15157)

* * *

TL;DR：这似乎是 FindCUDA 中的一个错误，它使对象在最终链接之前丢失外部定义的信息。

问题是，即使启用了可分离编译，在最终链接之前，仍然会为所有目标单独执行链接步骤。

例如，我有`module.cu`：

```
#include "module.h"
#include <cstdio>

double arr[10] = {1,2,3,4,5,6,7,8,9,10};
__constant__ double carr[10];

void init_carr() {
  cudaMemcpyToSymbol(carr,arr,10*sizeof(double));
}

__global__ void pkernel() {
  printf("(pkernel) carr[%d]=%g\n",threadIdx.x,carr[threadIdx.x]);
}

void print_carr() {
  printf("in print_carr\n");
  pkernel<<<1,10>>>();
} 
```

并`module.h`与：

```
extern __constant__ double carr[10];
extern double arr[10];

void print_carr();
void init_carr(); 
```

最后`main.cu`是：

```
#include "module.h"

#include <cstdio>

__global__ void kernel() {
  printf("(kernel) carr[%d]=%g\n",threadIdx.x,carr[threadIdx.x]);
}

int main(int argc, char *argv[]) {
  printf("arr: %g %g %g ..\n",arr[0],arr[1],arr[2]);

  kernel<<<1,10>>>();
  cudaDeviceSynchronize();
  print_carr();
  cudaDeviceSynchronize();
  init_carr();
  cudaDeviceSynchronize();
  kernel<<<1,10>>>();
  cudaDeviceSynchronize();
  print_carr();
  cudaDeviceSynchronize();

  return 0;
} 
```

然后，这适用于以下内容`Makefile`：

```
NVCC=nvcc
NVCCFLAGS=-arch=sm_20
LIB=libmodule.a
OBJS=module.o main.o
PROG=extern

$(PROG): main.o libmodule.a
    $(NVCC) $(NVCCFLAGS) -o $@ $^

%.o: %.cu
    $(NVCC) $(NVCCFLAGS) -dc -c -o $@ $^

$(LIB): module.o
    ar cr $@ $^

clean:
    $(RM) $(PROG) $(OBJS) $(LIB) 
```

但后来我尝试使用以下内容`CMakeLists.txt`：

```
CMAKE_MINIMUM_REQUIRED(VERSION 2.8.8)

PROJECT(extern)

FIND_PACKAGE(CUDA REQUIRED)
SET(CUDA_SEPARABLE_COMPILATION ON)

SITE_NAME(HOSTNAME)

SET(CUDA_NVCC_FLAGS ${CUDA_NVCC_FLAGS} -arch=sm_20)

cuda_add_library(module module.cu)

CUDA_ADD_EXECUTABLE(extern main.cu)
TARGET_LINK_LIBRARIES(extern module) 
```

然后编译时，会发生以下情况：

```
$ cmake ..
-- The C compiler identification is GNU 4.9.2
...
$ make VERBOSE=1
...
[ 25%] Building NVCC (Device) object CMakeFiles/module.dir//./module_generated_module.cu.o
...
-- Generating <...>/build/CMakeFiles/module.dir//./module_generated_module.cu.o
/usr/local/cuda/bin/nvcc <...>/module.cu -dc -o <...>/build/CMakeFiles/module.dir//./module_generated_module.cu.o -ccbin /usr/bin/cc -m64 -Xcompiler ,\"-g\" -arch=sm_20 -DNVCC -I/usr/local/cuda/include
[ 50%] Building NVCC intermediate link file CMakeFiles/module.dir/./module_intermediate_link.o
/usr/local/cuda/bin/nvcc -arch=sm_20 -m64 -ccbin "/usr/bin/cc" -dlink <...>/build/CMakeFiles/module.dir//./module_generated_module.cu.o -o <...>/build/CMakeFiles/module.dir/./module_intermediate_link.o
...
/usr/bin/ar cr libmodule.a  CMakeFiles/module.dir/./module_generated_module.cu.o CMakeFiles/module.dir/./module_intermediate_link.o
/usr/bin/ranlib libmodule.a
...
[ 50%] Built target module
[ 75%] Building NVCC (Device) object CMakeFiles/extern.dir//./extern_generated_main.cu.o
...
-- Generating <...>/build/CMakeFiles/extern.dir//./extern_generated_main.cu.o
/usr/local/cuda/bin/nvcc <...>/main.cu -dc -o <...>/build/CMakeFiles/extern.dir//./extern_generated_main.cu.o -ccbin /usr/bin/cc -m64 -Xcompiler ,\"-g\" -arch=sm_20 -DNVCC -I/usr/local/cuda/include -I/usr/local/cuda/include
...
[100%] Building NVCC intermediate link file CMakeFiles/extern.dir/./extern_intermediate_link.o
/usr/local/cuda/bin/nvcc -arch=sm_20 -m64 -ccbin "/usr/bin/cc" -dlink <...>/build/CMakeFiles/extern.dir//./extern_generated_main.cu.o -o <...>/build/CMakeFiles/extern.dir/./extern_intermediate_link.o
nvlink error   : Undefined reference to 'carr' in '<...>/build/CMakeFiles/extern.dir//./extern_generated_main.cu.o' 
```

显然，问题出在`nvcc -dlink obj.o -o obj_intermediate_link.o`线条上。然后，我想，关于外部定义的信息就会丢失。所以，问题是，有可能让 CMake/FindCUDA 不做这个额外的链接步骤吗？

否则，我会争辩说这是一个错误。你同意吗？我可以使用 CMake 提交错误报告。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T11:12:23.567

使用 nvcc 版本对其进行了测试：

```
nvcc: NVIDIA (R) Cuda compiler driver Copyright (c) 2005-2012 NVIDIA
Corporation Built on Fri_Sep_21_17:28:58_PDT_2012 Cuda compilation
tools, release 5.0, V0.2.1221 
```

和 svn 修订：

```
URL: https://gforge.sci.utah.edu/svn/findcuda/trunk
Repository Root: https://gforge.sci.utah.edu/svn/findcuda
Repository UUID: 81322f20-870f-0410-845c-a4cd4664c908
Revision: 1221
Node Kind: directory
Schedule: normal
Last Changed Rev: 1221
Last Changed Date: 2013-01-28 22:31:07 +0100 (Mon, 28 Jan 2013) 
```

在此示例中包括以下类：

*   lib.h / lib.cu
*   kernel.h / kernel.cu

`kernel.cu`包含一个简单的 CUDA 内核和一个具有调用 CUDA 内核的公共方法的类。类库包含一个类内核的实例和一个调用类内核公共方法的方法。

以下`CMakeLists.txt`适用于此配置：

```
cmake_minimum_required(VERSION 2.6.2)

project(Cuda-project)

set(CMAKE_MODULE_PATH "${CMAKE_SOURCE_DIR}/CMake/cuda" ${CMAKE_MODULE_PATH})

find_package(CUDA QUIET REQUIRED)

set(CUDA_ATTACH_VS_BUILD_RULE_TO_CUDA_FILE OFF)

set(BUILD_SHARED_LIBS ON)

list(APPEND CUDA_NVCC_FLAGS -DBLAH="he he" -DTEST1="this is a test")

CUDA_ADD_LIBRARY(test_lib
  kernel.cu
  lib.cu
  # SHARED
  # STATIC
  OPTIONS -DSTUFF="blah blah"
  RELEASE --use_fast_math -DNDEBUG
  DEBUG -g -DDEBUG
  )

INSTALL(FILES lib.h kernel.h
  DESTINATION include)
INSTALL(FILES "${CMAKE_BINARY_DIR}/libtest_lib.so" 
  DESTINATION lib) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-09T19:19:59.900

我无法使用 CUDA_ADD_EXECUTABLE 让它工作，所以我创建了一个函数来制作自定义目标。

```
function(add_cuda_exe_lib name files libraries is_lib)
    set (obj_list)
    foreach(file ${files})
        add_custom_command(
            OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/${file}.o
            DEPENDS ${file} 
            COMMAND ${CMAKE_COMMAND} -E cmake_echo_color --blue "Building NVCC Device object ${CMAKE_CURRENT_SOURCE_DIR}/${file}"
            COMMAND ${CUDA_NVCC_EXECUTABLE} ${CUDA_NVCC_FLAGS} -dc "${CMAKE_CURRENT_SOURCE_DIR}/${file}" -o "${CMAKE_CURRENT_BINARY_DIR}/${file}.o"
            COMMENT "Building ${CMAKE_CURRENT_SOURCE_DIR}/${file}"
            VERBATIM
        )

        LIST(APPEND obj_list ${CMAKE_CURRENT_BINARY_DIR}/${file}.o)
    endforeach()

    set (lib_list)
    LIST(APPEND lib_list "-lcudadevrt")
    foreach(library_name ${libraries})
        LIST(APPEND lib_list "-l${library_name}")
    endforeach()

    set (flags ${CUDA_NVCC_FLAGS})
    if (is_lib)
        LIST(APPEND flags "-dlink")
        set (obj_name "${CMAKE_CURRENT_BINARY_DIR}/${name}.so")
    else()
        set (obj_name "${CMAKE_CURRENT_BINARY_DIR}/${name}")
    endif()

    add_custom_target(${name} ALL 
        COMMAND ${CMAKE_COMMAND} -E cmake_echo_color --red "Linking CXX executable ${name}"
        COMMAND ${CUDA_NVCC_EXECUTABLE} ${flags} ${obj_list} ${lib_list} -o ${obj_name}
        DEPENDS ${obj_list}
        COMMENT "Linking ${name}"
    )
endfunction()

function(add_cuda_exe name files libraries)
    add_cuda_exe_lib(${name} "${files}" "${libraries}" OFF)
endfunction()

function(add_cuda_lib name files libraries)
    add_cuda_exe_lib(${name} "${files}" "${libraries}" ON)
endfunction() 
```

现在，要生成一个库，只需使用：

```
add_cuda_lib(testar "devicemanager.cu;blub.cu" "") 
```

或者生成可执行文件：

```
add_cuda_exe(testar "devicemanager.cu;blub.cu" "") 
```

最后一个参数是要附加的库列表。

我希望它有所帮助。

# javascript - 防止 Node.js repl 打印输出

> ID：13683577
> 
> 赞同：18
> 
> 时间：2012-12-03T12:46:38.150
> 
> 标签：javascript, node.js, read-eval-print-loop

如果某些 javascript 计算的结果是一个包含 10,000 个元素的数组，Node.js repl 会打印出来。我如何防止它这样做？

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-09T13:16:13.203

你为什么不只是附加`; null;`到你的表达？

如在

```
new Array(10000); null; 
```

哪个打印

```
null 
```

甚至更短，使用`;0;`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-09T15:08:50.927

将结果分配给用 声明的变量`var`。 `var`语句总是返回`undefined`。

```
> new Array(10)
[ , , , , , , , , ,  ]

> var a = new Array(10)
undefined 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-06-22T04:34:12.060

Node 使用检查来格式化返回值。将 inspect 替换为仅返回空字符串且不会显示任何内容的函数。

`require('util').inspect = function () { return '' };`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-05-01T21:43:31.367

Javascript 有`void`专门针对这种特殊情况的运算符。您可以将它与任何表达式一起使用以丢弃结果。

```
> void (bigArray = [].concat(...lotsOfSmallArrays))
undefined 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-07T06:36:32.953

你可以自己启动 REPL 并改变任何让你烦恼的东西。例如，`undefined`当表达式没有结果时，您可以告诉它不要打印。或者您可以包装表达式的评估并阻止它们返回结果。如果你同时做这两件事，你就可以有效地将 REPL 减少为 REL：

```
node -e '
    const vm = require("vm");
    require("repl").start({
        ignoreUndefined: true,
        eval: function(cmd, ctx, fn, cb) {
            let err = null;
            try {
                vm.runInContext(cmd, ctx, fn);
            } catch (e) {
                err = e;
            }
            cb(err);
        }
    });
' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-03T13:20:18.190

我已经在对此问题的评论中说过，您可能希望将命令的执行包装在匿名函数中。假设您有一些重复的过程会返回某种结果。像这样：

```
var some_array = [1, 2, 3];

some_array.map(function(){

    // It doesn't matter what you return here, even if it's undefined
    // it will still get into the map and will get printed in the resulting map
    return arguments;
}); 
```

这给了我们这个输出：

```
[ { '0': 1,
    '1': 0,
    '2': [ 1, 2, 3 ] },
  { '0': 2,
    '1': 1,
    '2': [ 1, 2, 3 ] },
  { '0': 3,
    '1': 2,
    '2': [ 1, 2, 3 ] } ] 
```

但是，如果将`map`方法调用包装到自调用匿名函数中，所有输出都会丢失：

```
(function(){
    some_array.map(function() {
        return arguments;
    });
})(); 
```

此代码将为我们提供以下输出：

```
undefined 
```

因为匿名函数不返回任何东西。

# iphone - presentViewController 没有父视图消失

> ID：13683578
> 
> 赞同：1
> 
> 时间：2012-12-03T12:46:39.303
> 
> 标签：iphone, user-interface

我有一个 UIViewController，在它上面 - 我使用 presentViewController 来呈现一个新窗口：

```
controller.view.frame = source;
[self presentViewController:controller animated:NO completion:nil];

[UIView animateWithDuration:ANIMATION_NORMAL_DURATION animations:^{

    controller.view.frame = target;

}completion:^(BOOL finished) {

}]; 
```

当我这样做时 - 父控制器（自身）在新控制器（控制器）出现之前消失。它使它变得丑陋。

有没有更好的方法来实现它？（我不在那些 ViewContollers 中使用 NavigationControler）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-20T15:11:16.260

从 iOS7 开始，有**modalPresentationStyle**属性。将其设置为以下选项之一：*UIModalPresentationOverFullScreen、UIModalPresentationOverCurrentContext、UIModalPresentationCustom*

`modalViewController.modalPresentationStyle = UIModalPresentationCustom;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:00:38.840

不存在，只需添加一个子视图

```
controller.view.frame = source;
//[self presentViewController:controller animated:NO completion:nil];
[self.view addSubview:controller.view];

[UIView animateWithDuration:ANIMATION_NORMAL_DURATION animations:^{

     controller.view.frame = target;

}completion:^(BOOL finished) {

}]; 
```

# jquery - 如何使用 Jquery 为 fileuplaod 中选择的多个图像提供预览？

> ID：13683579
> 
> 赞同：2
> 
> 时间：2012-12-03T12:46:40.417
> 
> 标签：jquery

大家好，我有一个fileuplaod，用户可以在其中选择多个图像，我想在上传之前显示这些选定图像的预览...目前我为单个图像预览管理它如何为所选的多个图像提供预览

```
 function readURL(input) {
    var img = $(input).closest('div').find('img').first();
    var imgid=$(img).attr('id');
    if (input.files && input.files[0]) {
        alert(input.files);
        alert(input.files[0]);
        var reader = new FileReader();

        reader.onload = function (e) {
            $("#"+imgid)
                .attr('src', e.target.result);
        };

        reader.readAsDataURL(input.files[0]);
    }
}

 <input type="file"  accept="gif|jpg|jpeg|png" name="files[]" multiple onchange="readURL(this);" />

                    <img src="http://placehold.it/140x140" class="img-rounded" id="thumbnailimage"> 
```

任何人都可以在这里帮助...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-03T13:12:44.907

好的，这是一个[非常粗略的实现](http://jsfiddle.net/DXGTN/1/)

基本思想是，获取 files 数组，循环遍历它，使用 File API 添加图像，其中 src 值是 js 给你玩的那个 blob，而不是用户机器上的路径。

```
var inputLocalFont = document.getElementById("image-input");
inputLocalFont.addEventListener("change",previewImages,false); //bind the function to the input

function previewImages(){
    var fileList = this.files;

    var anyWindow = window.URL || window.webkitURL;

        for(var i = 0; i < fileList.length; i++){
          //get a blob to play with
          var objectUrl = anyWindow.createObjectURL(fileList[i]);
          // for the next line to work, you need something class="preview-area" in your html
          $('.preview-area').append('<img src="' + objectUrl + '" />');
          // get rid of the blob
          window.URL.revokeObjectURL(fileList[i]);
        }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-22T06:41:51.560

我有一个解决方案，链接如下：http: [//maraustria.wordpress.com/2014/04/25/multiple-select-and-preview-of-image-of-file-upload/](http://maraustria.wordpress.com/2014/04/25/multiple-select-and-preview-of-image-of-file-upload/)

```
<!DOCTYPE html>
<html>
<head>
<title>File API – FileReader as Data URL</title>
</head>
<body>
<header>
<h1>File API – FileReader</h1>
</header>
<article>
<label for=”files”&gt;Select multiple files: </label>
<input id=”files” type=”file” multiple/>
<button type=”button” id=”clear”&gt;Clear</button>
<output id=”result” />
</article>
</body>
</html> 
```

Javascript

```
window.onload = function(){
//Check File API support
if(window.File && window.FileList && window.FileReader)
{
$(‘#files’).live(“change”, function(event) {
var files = event.target.files; //FileList object
var output = document.getElementById(“result”);
for(var i = 0; i< files.length; i++)
{
var file = files[i];
//Only pics
// if(!file.type.match(‘image’))
if(file.type.match(‘image.*’)){
if(this.files[0].size < 2097152){
// continue;
var picReader = new FileReader();
picReader.addEventListener(“load”,function(event){
var picFile = event.target;
var div = document.createElement(“div”);
div.innerHTML = “&lt;img class=’thumbnail’ src='” + picFile.result + “‘” +
“title=’preview image’/>”;
output.insertBefore(div,null);
});
//Read the image
$(‘#clear, #result’).show();
picReader.readAsDataURL(file);
}else{
alert(“Image Size is too big. Minimum size is 2MB.”);
$(this).val(“”);
}
}else{
alert(“You can only upload image file.”);
$(this).val(“”);
}
}

});
}
else
{
console.log(“Your browser does not support File API”);
}
}

$(‘#files’).live(“click”, function() {
$(‘.thumbnail’).parent().remove();
$(‘result’).hide();
$(this).val(“”);
});

$(‘#clear’).live(“click”, function() {
$(‘.thumbnail’).parent().remove();
$(‘#result’).hide();
$(‘#files’).val(“”);
$(this).hide();
}); 
```

CSS

```
body{
font-family: ‘Segoe UI';
font-size: 12pt;
}

header h1{
font-size:12pt;
color: #fff;
background-color: #1BA1E2;
padding: 20px;

}
article
{
width: 80%;
margin:auto;
margin-top:10px;
}

.thumbnail{

height: 100px;
margin: 10px;
float: left;
}
#clear{
display:none;
}
#result {
border: 4px dotted #cccccc;
display: none;
float: right;
margin:0 auto;
width: 511px;
} 
```

[http://jsfiddle.net/2xES5/28/](http://jsfiddle.net/2xES5/28/)

![在此处输入图像描述](../Images/3dcf875a12ff8d2a55d7fc336c01dfd2.png)

# macos - 尝试编译 RtAudio 时出现未定义的符号

> ID：13683581
> 
> 赞同：2
> 
> 时间：2012-12-03T12:46:48.503
> 
> 标签：macos, compilation, makefile, undefined-symbol

我正在尝试同时使用 RtAudio 和 RtMidi。我在同一个文件夹中包含 RtAudio.cpp、RtAudio.h、RtHelper.h、RtMidi.cpp 和 RtMidi.h 以及 2 个测试程序 midiprobe.cpp 和 audioprobe.cpp。

[使用默认命令](http://www.music.mcgill.ca/~gary/rtmidi/index.html#compiling)编译 midiprobe 是可行的，但是当我尝试对[audioprobe](http://www.music.mcgill.ca/~gary/rtaudio/compiling.html)执行相同操作以测试 RtAudio 时，我得到了错误。

这是我用来编译的：

```
g++ -Wall -D__MACOSX_CORE__ -o audioprobe audioprobe.cpp RtAudio.cpp -framework CoreAudio -lpthread 
```

这些是错误：

```
Undefined symbols for architecture x86_64:
 "_CFRelease", referenced from:
  RtApiCore::getDeviceInfo(unsigned int)in cc89M9Ki.o
"_CFStringGetCString", referenced from:
  RtApiCore::getDeviceInfo(unsigned int)in cc89M9Ki.o
"_CFStringGetLength", referenced from:
  RtApiCore::getDeviceInfo(unsigned int)in cc89M9Ki.o
"_CFStringGetSystemEncoding", referenced from:
  RtApiCore::getDeviceInfo(unsigned int)in cc89M9Ki.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

我对这类东西很陌生（到目前为止，大部分框架都是现成的）并且还没有弄清楚这一点。由于它是默认示例，我真的不知道下一步该做什么......在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:22:31.363

缺少的符号在 CoreFoundation 框架中 - 您需要添加：

```
-framework CoreFoundation 
```

到你的命令行。

# android - Android - 创建一个锚定到视图的 Toast

> ID：13683582
> 
> 赞同：6
> 
> 时间：2012-12-03T12:46:49.090
> 
> 标签：android, toast

我想创建一个锚定到视图的吐司（即，出现在给定视图旁边）。

我试过了

```
toast.setGravity(0, (int)v.getX(), (int)v.getY()); 
```

但这完全在整个位置创建它。

如果重要的话，我的视图是 TableRow 中的一个元素。

谢谢

编辑：我不能使用 PopupWindow 来完成这项任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:54:28.723

我认为本[教程](http://boltingupandroid.wordpress.com/2012/08/08/repositioning-toast-messages/)将帮助您实现您想要的：

```
public void onClick(View v) {
   int xOffset = 0;
   int yOffset = 0;
   Rect gvr = new Rect();

  View parent = (View) v.getParent();// v is the image,
    //parent is the rectangle holding it.

  if (parent.getGlobalVisibleRect(gvr)) {
        Log.v("image left", Integer.toString(gvr.left));
    Log.v("image right", Integer.toString(gvr.right));
    Log.v("image top", Integer.toString(gvr.top));
    Log.v("image bottom", Integer.toString(gvr.bottom));
    View root = v.getRootView();

        int halfwayWidth = root.getRight() / 2;
        int halfwayHeight = root.getBottom() / 2;
          //get the horizontal center
    int parentCenterX = ((gvr.right - gvr.left) / 2) + gvr.left;
     //get the vertical center
    int parentCenterY = (gvr.bottom - gvr.top) / 2 + gvr.top;

    if (parentCenterY <= halfwayHeight) {
       yOffset = -(halfwayHeight - parentCenterY);//this image is    above the center of gravity, i.e. the halfwayHeight
        } else {
        yOffset = parentCenterY - halfwayHeight;
        }
    if (parentCenterX < halfwayWidth) { //this view is left of center             xOffset = -(halfwayWidth - parentCenterX);    }   if (parentCenterX >= halfwayWidth) {
       //this view is right of center
       xOffset = parentCenterX - halfwayWidth;
    }
     }
       Toast toast = Toast.makeText(activity, altText, Toast.LENGTH_SHORT);
       toast.setGravity(Gravity.CENTER, xOffset, yOffset);
       toast.show();
       }
}); 
```

# xmpp - 当我尝试通过 Bosh 在 XMPP 中绑定资源时出现 xml-not-well-formed 错误

> ID：13683584
> 
> 赞同：1
> 
> 时间：2012-12-03T12:46:58.257
> 
> 标签：xmpp

# 1 问题：当我尝试通过 Bosh 在 XMPP 中绑定资源时，出现 xml 格式不正确的错误。

我尝试了什么：我去 xmpp.org 为绑定资源寻找合适的 xml 节（http://xmpp.org/extensions/xep-0206.html#preconditions-sasl），但看起来很相似。

可能的答案：身份验证后我没有重新启动流，这可能是导致此错误的原因吗？

# 2 问题：我尝试通过使用数据包（http://xmpp.org/extensions/xep-0206.html#preconditions-sasl）重新启动流，但响应代码为 400？任何人都知道我为什么会这样吗？

可能的答案：我没有得到 xmpp:restartLogic 属性来响应初始数据包？这可能是出现 400 错误的原因吗（可能是 Ejabbered 服务器不支持重启）？

怀疑：有人知道如何在 Ejabberd 中启用重启逻辑，还是默认启用？

我的日志如下：

```
要阅读的节是 = body xmlns='http://jabber.org/protocol/httpbind' sid='8d96d01bb87f526e78b0f0b620dd1c94edd172ee' wait='30' requests='2' inactivity='30' maxpause='120' polling='2 'ver='1.8' from='someserver.com'secure='true' authid='2817580747' xmlns:xmpp='urn:xmpp:xbosh' xmlns:stream='http://etherx.jabber.org/streams 'xmpp:版本='1.0'
要阅读的节是 = stream:features xmlns:stream='http://etherx.jabber.org/streams'
要阅读的节是 = 机制 xmlns='urn:ietf:params:xml:ns:xmpp-sasl'
要阅读的节是=机制
要阅读的节是 = c xmlns='http://jabber.org/protocol/caps' hash='sha-1' node='http://www.process-one.net/en/ejabberd/' ver= 'U5DC02T7iwEqfov5b3KpIVgA5+I='/
要阅读的节是 = register xmlns='http://jabber.org/features/iq-register'/
收到会话创建响应：body secure=true requests=2 inactivity=30 authid=2817580747 sid=8d96d01bb87f526e78b0f0b620dd1c94edd172ee polling=2 xmlns=http://jabber.org/protocol/httpbind wait=30 xmpp=urn:xmpp:xbosh ver=1.8版本=1.0 来自=someserver.com 流=http://etherx.jabber.org/streams maxpause=120 ==
        功能流=http://etherx.jabber.org/streams ==
                机制 xmlns=urn:ietf:params:xml:ns:xmpp-sasl ==
                        机制 == 平原
                        机制 == DIGEST-MD5
                        机制 == SCRAM-SHA-1
                c ver=U5DC02T7iwEqfov5b3KpIVgA5+I= node=http://www.process-one.net/en/ejabberd/hash=sha-1 xmlns=http://jabber.org/protocol/caps ==
                注册 xmlns=http://jabber.org/features/iq-register ==
身份验证：body secure=true requests=2 inactivity=30 authid=2817580747 sid=8d96d01bb87f526e78b0f0b620dd1c94edd172ee polling=2 xmlns=http://jabber.org/protocol/httpbind wait=30 xmpp=urn:xmpp:xbosh ver=1.8 version=1.0来自=someserver.com 流=http://etherx.jabber.org/streams maxpause=120 ==
        功能流=http://etherx.jabber.org/streams ==
                机制 xmlns=urn:ietf:params:xml:ns:xmpp-sasl ==
                        机制 == 平原
                        机制 == DIGEST-MD5
                        机制 == SCRAM-SHA-1
                c ver=U5DC02T7iwEqfov5b3KpIVgA5+I= node=http://www.process-one.net/en/ejabberd/hash=sha-1 xmlns=http://jabber.org/protocol/caps ==
                注册 xmlns=http://jabber.org/features/iq-register ==
使用普通授权
写入空气 [0]：AE1haGlAdGVzdC5yYXBpZHNvZnR0ZWNobm9sb2d5LmNvbQBtYWhp
开始 PLAIN 授权
要阅读的节是 = body xmlns='http://jabber.org/protocol/httpbind'
要阅读的节是 = 成功 xmlns='urn:ietf:params:xml:ns:xmpp-sasl'/
writeToAir [0]：资源
绑定资源
要阅读的节是 = body type='terminate' condition='remote-stream-error' xmlns='http://jabber.org/protocol/httpbind' xmlns:stream='http://etherx.jabber.org/流'
要阅读的节是 = 流：错误
要阅读的节是 = xml-not-well-formed xmlns='urn:ietf:params:xml:ns:xmpp-streams'/

```

# yii - 使用 create 更新使用下拉列表创建的下拉列表字段值

> ID：13683587
> 
> 赞同：-1
> 
> 时间：2012-12-03T12:47:11.143
> 
> 标签：yii, updatemodel

我在更新 yii 中的模型记录时遇到问题。我有 2 个模型。我现在正在研究一种模型。我正在使用创建控制器为一个模型创建记录。在表单中，我有 1 个字段，即名称字段（我从其他模型（表）中获取此名称。我从第二个表中获取名称并将它们显示在下拉列表中。并存储它们。

当涉及到更新时，它会再次出现我使用 _form.php 创建记录时显示的相同下拉列表。谁能告诉我如何再次显示名称而不是下拉列表？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:01:02.303

在您的视图中添加一个简单的检查以查看该值是否已添加。像这样的东西：

```
<?php if ($model->attribute && $model->attribute != ''): ?>
    // Code to display a normal textfield here
<?php else: ?>
    // Code to display dropdown
<?php endif; ?> 
```

# iphone - 在 Unity3d 中从 iphone 的文档目录加载图像

> ID：13683602
> 
> 赞同：1
> 
> 时间：2012-12-03T12:48:09.123
> 
> 标签：iphone, ios, web, monodevelop, unity3d

嗨，我正在开发统一 3d 应用程序，我有一个图像 url，我成功地从该 url 下载图像并存储到文档目录路径和路径是：/var/mobile/Applications/4EA2C956-FCA1-4552-AEE5-611A55B26CF5/ Documents/sample.jpg，现在我陷入了如何检索图像并显示为我按照代码执行的纹理的问题。

```
WWW imageToLoadPath = new WWW(/var/mobile/Applications/4EA2C956-FCA1-4552-AEE5-611A55B26CF5/Documents/sample.jpg) 
//rendering texture 
imageToLoadPath.LoadImageIntoTexture(mIconPlane.renderer.material.mainTexture as Texture2D); 
```

我对如何完成这项任务感到困惑，而且我想做同样的视频，比如我的路径将是**/var/mobile/Applications/4EA2C956-FCA1-4552-AEE5-611A55B26CF5/Documents/sampleVideo.mp4**。我只想在统一的 3d 和 c 中完成这项任务。这对我来说会很棒。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:58:26.557

我使用此代码从文档目录加载图片，我想您可以使用相同的代码

```
- (UIImage*)loadImage:(NSString*)imageName {

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.png", imageName]];

UIImage *graphImage = [[UIImage alloc] initWithContentsOfFile: fullPath];
img1.image = graphImage;

return [UIImage imageWithContentsOfFile:fullPath];
} 
```

像这样调用这个方法

```
[ self loadImage: "your image name"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-25T13:17:51.267

您可以使用此代码在 C# 脚本中获取文档目录路径，这可能会有所帮助

```
 public static string GetiPhoneDocumentsPath ()
{
// Application.dataPath returns
// /var/mobile/Applications/XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX/myappname.app/Data
// Strip "/Data" from path
string path = Application.dataPath.Substring (0, Application.dataPath.Length - 5);
// Strip application name
path = path.Substring(0, path.LastIndexOf('/'));
return path + "/Documents";
} 
```

# javascript - 用变量替换字符串中的所有实例作为搜索 - JavaScript

> ID：13683606
> 
> 赞同：4
> 
> 时间：2012-12-03T12:48:19.997
> 
> 标签：javascript, jquery, html

我遇到了一个在任何地方都找不到的问题，我看到了一个正则表达式方法，但是它使用的是直接字符串而不是变量中的字符串。这是我的代码：

```
var src = getQueryVariable("srcStr");

            if(src != false){
               $(".entry-content").html($(".entry-content")
              .html().replace(/src/g, "<span style='background-color:#f2e128;'>" 
              + src + "</span>"));

} 
```

这将获取一个 url 变量 (srcStr) 并在 .entry-content 中的文本正文中搜索存储在 var 中的字符串`src`。

问题代码在这里：`replace(/src/g`

有解决办法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T12:51:00.497

您正在搜索字面上是“src”的模式。`RegExp`如果要在模式中使用变量，则需要使用该类：

```
pattern = new RegExp(src, 'g');
$(".entry-content")...html().replace(pattern, replacement); 
```

# c# - WPF 绑定：另一个列表中的列表中的值

> ID：13683609
> 
> 赞同：0
> 
> 时间：2012-12-03T12:48:27.533
> 
> 标签：c#, wpf, xaml, listview

我正在创建一个按**ServiceName**分组的 ListView ，但我无法显示**FileName**和**FilePath**，这里是类和 Xaml：

```
public class SOService
{
    string _ServiceName;
    List<SOFileInfo> _SOFiles;

    public string ServiceName
    {
        get { return _ServiceName; }
        set { _ServiceName = value; }
    }
    public List<SOFileInfo> SOFiles
    {
        get { return _SOFiles; }
        set { _SOFiles = value; }
    }
}

public class SOFileInfo
{
    string _FileName;
    string _FilePath;

    public string FileName
    {
        get
        { return _FileName; }
        set { _FileName = value; }
    }
    public string FilePath
    {
        get { return _FilePath; }
        set { _FilePath = value; }
    }
} 
```

视图模型：

```
public class SOServiceViewModel
{
    public SOServiceViewModel()
    {
        _Services = new List<SOService>();

        _Services.Add(new SOService()
        {
            ServiceName = "service1",
            SOFiles = new List<SOFileInfo>() { new SOFileInfo() { FileName = "File1", FilePath = "c:" } }
        });
    }
    List<SOService> _Services;

    public List<SOService> Services
    {
        get { return _Services; }
        set { _Services = value; }
    }
} 
```

和 Xaml： ![在此处输入图像描述](../Images/898e6ad4c4921ed0765b84b4fa874584.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:38:00.030

这是我找到的解决方案：

添加属性以检索 和 的`FileNames`列表`FilePaths`：

```
 public List<string> FileNames
    {
        get { return _SOFiles.Select(p => p.FileName).ToList(); }
        private set { }
    }
    public List<string> Filepaths
    {
        get { return _SOFiles.Select(p => p.FilePath).ToList(); }
        private set { }
    } 
```

然后在 Xaml 文件中：

```
<GridViewColumn Header="File Name" Width="100">
                <GridViewColumn.CellTemplate>
                    <DataTemplate DataType="{x:Type local:SOFileInfo}">
                        <ItemsControl ItemsSource="{Binding FileNames}" ></ItemsControl>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
            <GridViewColumn Header="File Path" Width="100">
                <GridViewColumn.CellTemplate>
                    <DataTemplate DataType="{x:Type local:SOFileInfo}">
                        <ItemsControl ItemsSource="{Binding Filepaths}" ></ItemsControl>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn> 
```

# java - Tapestry，从循环中获取所选项目

> ID：13683610
> 
> 赞同：1
> 
> 时间：2012-12-03T12:48:29.287
> 
> 标签：java, apache, loops, tapestry

我目前正在使用 Apache Tapestry 5.3.6 进行一些项目。我在使用 t:loop 组件时遇到问题。有什么方法可以在循环完成并呈现页面后获取所选项目？我需要实现的是：假设我有这样的循环：

```
<t:loop t:source="itemList" t:value="item">
    <t:actionlink id="something" context="item.ID"></t:actionlink>
</t:loop> 
```

这将正常工作。但是，如果我将此操作链接移动到我自己的组件中，并通过我的参数传递此 ID，如果我单击，我总是会从列表中获取最后一项，而不是单击的那一项。

```
<t:loop t:source="itemList" t:value="item">
    <t:mycomponent myparameter="item.ID"></t:mycomponent>
</t:loop> 
```

我尝试输入 formState="iteration"，然后输入 ValueEncoder，但没有任何帮助。拜托，谁能帮助我，告诉我如何解决这个问题，并从列表中获取所选项目。提前致谢

编辑：这是我的组件的代码

```
public class Ocenjivanje 
{   
    @Parameter(required=true) 
    @Property 
    private int materijalID; 

    private Materijal materijal; 

    @Inject 
    private Session session; 

    @SessionState 
    private User user; 

    @CommitAfter 
    public Object unesiOcenu(int ocena) 
    { 
            Materijal m = (Materijal)session.createCriteria(Materijal.class).add(Restrictions.eq("materijalID", this.materijalID)).list().get(0); 
            Date d = new Date(); 
            Ocena o = new Ocena(); 
            o.setMaterijal(m); 
            o.setKorisnikID(this.user.getID()); 
            o.setDatumOcene(d); 
            o.setOcena(ocena); 
            session.save(o); 
            return this; 
    } 

    public void onActionFromJedan() 
    { 
            unesiOcenu(1); 
    } 

    public void onActionFromDva() 
    { 
            unesiOcenu(2); 
    } 

    public void onActionFromTri() 
    { 
            unesiOcenu(3); 
    } 

    public void onActionFromCetiri() 
    { 
            unesiOcenu(4); 
    } 

    public void onActionFromPet() 
    { 
            unesiOcenu(5); 
    }   
} 

<t:container 
      xmlns="http://www.w3.org/1999/xhtml"
  xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
  xmlns:p="tapestry:parameter">

  Oceni sadržaj:                 
            <t:actionlink t:id="jedan">1</t:actionlink>
            <t:actionlink t:id="dva">2</t:actionlink>
            <t:actionlink t:id="tri">3</t:actionlink>
            <t:actionlink t:id="cetiri">4</t:actionlink>
            <t:actionlink t:id="pet">5</t:actionlink> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:36:53.953

我不太确定您要实现什么目标，但无论如何您都不会使用您在操作链接中传递的上下文，而是使用硬编码的 int。将您的操作链接更改为`<t:actionlink t:id="tri" context="materijalID">3</t:actionlink>`并将您的事件处理程序更改为

```
public void onActionFromJedan(int context) 
    { 
            unesiOcenu(context); 
    } 
```

# java - Gradle：如何使 JavaExec 任务使用配置类路径？

> ID：13683613
> 
> 赞同：8
> 
> 时间：2012-12-03T12:48:35.027
> 
> 标签：java, gradle, build-process

这就是问题所在：我想从运行时配置中执行一些具有一些依赖关系的 java 类。如何才能做到这一点？

```
task runJava(type: JavaExec, dependsOn:[classes]) {
        main = 'mypackage.MyClass'
        classpath = //what should I write here to provide classes from runtime configuration?
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-03T13:38:23.023

您可能希望使用[源集](http://www.gradle.org/docs/current/userguide/userguide_single.html#N11B52)的运行时类路径，其中包括[项目的已编译类以及所有运行时依赖项](http://gradle.org/docs/current/dsl/org.gradle.api.tasks.SourceSet.html#org.gradle.api.tasks.SourceSet:runtimeClasspath)。

```
task runJava(type: JavaExec, dependsOn:[classes]) {
    main = 'mypackage.MyClass'
    classpath = sourceSets.main.runtimeClasspath
} 
```

如果您想获取特定配置的路径，您可以执行以下操作：`configurations.getByName('runtime').asPath`或更短`configurations.runtime.asPath`。

# mysql - SQL - 异地托管或每次都导入？

> ID：13683623
> 
> 赞同：0
> 
> 时间：2012-12-03T12:49:39.330
> 
> 标签：mysql, sql, postgresql, solr, amazon-s3

我有我的主网络服务器，我需要一个单独的主力服务器，不幸的是我无法解决这个问题。主力服务器生成一个较大的 (+100mb) SQL 文件，我需要每天将其导入 Web 服务器。

在我看来，我有两个选择：

**1\. 选项一 -**允许 web 服务器连接到主力服务器上的 postgreSQL，并直接从主力服务器上运行的 postgre 导入数据

**2\. 选项二 -**从主力服务器导出 SQL 数据库并将其上传到 AmazonS3。然后从 Web 服务器上的 S3 下载文件并将其导入到运行在 Web 服务器上的 postgreSQL 服务器。

我主要关心的是使系统尽可能简单、安全和可靠。我想限制数据库损坏的机会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:00:05.850

从我得到的答案看来，选项 1 是最好的。将服务器用作 SQL 主机并直接查询它，而不是移动 SQL 文件。

# mysql - 触发器中的更新语法错误

> ID：13683630
> 
> 赞同：1
> 
> 时间：2012-12-03T12:49:50.250
> 
> 标签：mysql, sql, syntax, triggers

我需要使用触发器自动更新我的列。

这是代码：

```
create trigger sum update on `cash`
for each row
begin
UPDATE `cash`
SET `sum_cash` = `cash` + `sum_cash`;
end;
$$ 
```

我收到以下错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'update on `cash` for each row begin UPDATE cash` SE' at line 1 
```

我在 MySQL 上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:58:28.700

试试这个：

```
delimiter $$
create trigger my_sum after update on `cash`
for each row
begin
UPDATE `cash`
SET `sum_cash` = `cash` + `sum_cash`;
end;
$$ 
```

您错过了`after`or`before`关键字。我也更改了触发器名称，因为`sum`它是一个关键字。

# php - 在 .pdf 中显示文本区域的问题

> ID：13683632
> 
> 赞同：0
> 
> 时间：2012-12-03T12:49:51.647
> 
> 标签：php, html, pdf, textarea, fpdf

我有一个表单，其中包含一个宽度为 30 列的文本区域。此文本区域和其他一些文本应通过 FPDF 以 .pdf 格式显示。文本区域显示如下：

```
$text=$row->fehlerbeschreibung;
$text=str_replace(array("\r\n", "\n", "\r"),"",$text);
$pdf->MultiCell(0,6,$text); 
```

您会看到我想忽略由于 30 cols 的宽度而发生的换行符。但是，每当您按 Enter 创建换行符时，都应该显示换行符。为了避免这个问题，换行符的编码有什么不同吗？或者你知道另一种方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:17:16.157

换行符仅在按 Enter 时创建，因此您应该通过

```
$array = explode("\n",$string); 
```

然后像这样循环遍历数组；

```
foreach($array  as $key => $item) {
$pdf->MultiCell(0,6,$item);
$pdf->Ln();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-15T18:51:48.840

只需使用 MultiCell

例子：

```
$this->MultiCell(60,5,$Variable); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-28T18:03:54.600

我建议使用该功能[`nl2br()`](https://www.php.net/manual/es/function.nl2br.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-21T17:00:02.597

考虑您的 textarea 字段是历史。所以你可以做的是：

```
$lengthofhistory = strlen($_SESSION['history']); 
$pdf- >SetFont('Helvetica','',10); $start = 0; $space = 0;
for($i=0;$i<=$lengthofhistory;$i++)
{
$char = substr( $_SESSION['history'], $i, 1 );
if($char == ' ') { $space = $space + 1; 
if($space == 18) { $substring =   substr($_SESSION['history'],$start,$i- $start); 
$pdf->Cell(0,5,$substring,0,1,'L'); $start = $i+1; $space = 0; } }
}
$substring = substr($_SESSION['history'],$start,$lengthofcomplaints-$start);
$pdf->Cell(0,5,$substring,0,1,'L'); 
```

# eclipse - Eclipse 不使用 JUnit 4.10 Docs

> ID：13683634
> 
> 赞同：5
> 
> 时间：2012-12-03T12:50:06.093
> 
> 标签：eclipse, javadoc, junit4

谁能给我建议，为什么我的 Eclipse 不使用 junit-docs？我正在使用面向 Web 开发人员 Juno Service Release 1 的 Eclipse Java EE IDE 和 ArchLinux 中最新的 Oracle Java7 版本。

谢谢，安德烈亚斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-03T19:18:19.083

我使用的是相同版本的 Eclipse，我发现 JUnit javadocs 链接指向一个损坏的 URL：[http://www.junit.org/junit/javadoc/4.5](http://www.junit.org/junit/javadoc/4.5)。要更改此设置，请执行以下操作

1.  在 Package Explorer 中，右键单击您的项目并选择 Build Path --> Configure Build Path。
2.  在库选项卡下，展开 JUnit 4 和 junit.jar。
3.  选择 Javadoc 位置并单击“编辑”。
4.  在 Javadoc URL 部分中，将 Javadoc 位置路径更改为[http://junit.sourceforge.net/javadoc/](http://junit.sourceforge.net/javadoc/)或其他特定于版本的链接。

# c# - 编辑 msi 数据库表

> ID：13683636
> 
> 赞同：3
> 
> 时间：2012-12-03T12:50:15.003
> 
> 标签：c#, msbuild, installation, wix, windows-installer

如何使用 msidb.exe 而不是使用 orca 添加或删除 msi 数据库表的条目。是否有类似下面的命令行

```
msidb.exe [msipath][importingFilepath] 
```

添加文件后，应更新 msi 表中的相应条目

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T14:49:44.397

我假设您想在 C# 中执行此操作，因为您包含了 C# 标记。WiX 有一个名为 Deployment Tools Foundation 的组件（DTF - 您可以在开始菜单中找到 SDK chm），它提供了出色的 MSI 互操作性。

考虑一下：

```
using Microsoft.Deployment.WindowsInstaller;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            using( var database = new Database(@"C:\test.msi", DatabaseOpenMode.Direct))
            {
            }
        }
    }
} 
```

这为您提供了通过 SQL 查询对数据库执行任何操作的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T18:36:56.733

尽管诸如[msidb.exe](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/2eee535f-e7f6-4e1a-9667-df4b8067b132)之类的工具能够导出和导入[文本存档文件](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/49210242-bd32-4e5c-b782-a132d670fdfe)，但文本存档文件只能用于以下特定目的。

*   文本存档文件可以与版本控制系统一起使用。
*   消除浪费的存储空间并减小 .msi 文件的最终大小。
*   将本地化信息添加到安装数据库。
*   确定数据库的代码页。
*   设置数据库的代码页。
*   增加数据库列的限制。作者不能更改标准表中任何列的列数据类型、可空性或本地化属性。

Windows Installer 数据库的文本存档文件带有 .idt 文件扩展名，并且采用[存档文件格式](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/91d81fb2-3a41-477a-85c2-e68bfe482b9c)。

您应该使用 Windows Installer 表编辑工具（例如 Orca 或第三方工具）来创建和修改安装包。

# ios - 你如何从 NSLocale preferredLanguages 中找到国家代码？

> ID：13683637
> 
> 赞同：2
> 
> 时间：2012-12-03T12:50:15.030
> 
> 标签：ios, localization

我正在开发一个 iOS 应用程序，该应用程序需要告诉服务器它与 iPhone/iPad 上使用的当前语言进行通信。我目前正在使用：

```
[[NSLocale preferredLanguages] objectAtIndex:0] 
```

但是，因为在使用英语 (en) 的情况下，该应用程序是基于单词的游戏，所以这还不够，我需要能够区分 en_GB 和 en_US（以及未来可能的其他语言）。

目前我有两种方法可以做到这一点：

1) 使用 currentLocale 设置来获取设备的当前国家代码并将其与首选语言结合起来，但是这相当 hacky。

2）滚动我自己的页面以允许用户更改应用程序中的语言。

我倾向于选项 2，但这将涉及大量工作。

我的问题是，有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:29:09.057

iOS 确实包含英式英语 ( `en_GB`)，而不是美式英语 ( `en`)，因此在此特定示例中，您可以仅依赖用户的 iOS 语言设置。如果用户选择了英式英语并且您的应用程序将其包含在其本地化列表中，那么您应该看到`en_GB`使用您的代码行。

但是，当然，如果您希望支持 iOS 本身不公开的语言，您将不得不提供自己的选择器。

# jpa - 没有 JPA 的 EJB3

> ID：13683638
> 
> 赞同：1
> 
> 时间：2012-12-03T12:50:20.437
> 
> 标签：jpa, ejb-3.0, dao, jdbctemplate

我只想将 EJB3 和 DAO 对象用于 DAO 层。我想尽可能避免使用 JPA。

用例如下：

1.  我的 EJB3 调用`DAOObject.putOrder()`
2.  使用`DAOObject`Spring`jdbcTemplate`来查询数据库。

这可能吗？交易范围如何受到影响。

请举个例子会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:53:53.477

您可以在没有 JPA 的情况下自由使用 EJB。只是不要使用它:-)。

事务由连接级别管理，`DataSource`因此即使在一个项目中，您也可以自由使用 JDBC 和 JPA。当然，原始 JDBC 也应该可以工作。请记住，默认情况下，每个 EJB 会话 bean 方法都是事务性的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:55:44.637

当然有可能。在你的 DAO 中注入一个 DataSource（使用`@Resource`）注解，从这个注入的 DataSource 构造一个 JdbcTemplate，并在 DAO 方法中使用 JdbcTemplate。DataSource 将返回一个与当前 JTA 事务相关联的 Connection。

# php - 在 PHP 中从 yahoo 中检索联系人

> ID：13683641
> 
> 赞同：0
> 
> 时间：2012-12-03T12:50:32.527
> 
> 标签：php, oauth, yahoo-api

我正在尝试构建一个应用程序，它可以登录到您的雅虎帐户并检索您的联系人。

我已[在此处](http://developer.apps.yahoo.com)注册我的应用程序以使用 api。

我正在使用[这个](http://www.phpclasses.org/package/7700-PHP-Authorize-and-access-APIs-using-OAuth.html)oauth php 库。这里我必须设置Consumer Key和Consumer Secret，它们是应用程序的标识符，但是如何访问yahoo上的特定帐户。

```
$client->CallAPI(
                    'http://query.yahooapis.com/v1/yql', 
                    'GET', array(
                        'q'=>'select * from social.contacts where guid=me',
                        'format'=>'json'
                    ), array('FailOnAccessError'=>true), $user); 
```

发送请求的代码。我需要一些指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T05:39:40.780

要检索联系人，我们需要生成访问令牌和签名密钥。快速查看 [http://developer.yahoo.com/oauth/guide/oauth-auth-flow.html](http://developer.yahoo.com/oauth/guide/oauth-auth-flow.html)和 [http://developer.yahoo.com/ oauth/guide/oauth-make-request.html](http://developer.yahoo.com/oauth/guide/oauth-make-request.html)

# ember.js - 使用带有加载条的 AJAX 加载巨大的数据数组

> ID：13683643
> 
> 赞同：2
> 
> 时间：2012-12-03T12:50:51.857
> 
> 标签：ember.js

我有一个 ajax 请求，它返回大约 1300 个 json 对象。在这些对象中，我填充了一些 ArrayProxies 和视图。每个 ArrayProxy 和因此视图包含大约 15 个对象和有关这些对象的详细信息。

由于这里和那里的一些逻辑，我需要大约 5 秒才能加载所有数据。

现在我需要知道如何制作像加载栏这样的东西，或者至少单独渲染每个视图。

我的 ajax 加载代码很简单：

```
$.getJSON('http://json.url, function(data) {
    $.each(data, function(i, obj) {
        var obj = App.ObjModel.create(obj);
        if (obj.get('isCalculable')) {
            App.ObjController.addObj(obj);
        }
    });
}); 
```

但是，在某些条件返回 true 后，我如何告诉应用程序呈现视图？

感谢您的帮助，迪玛

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T16:44:23.953

让 Ember 来确定何时加载数据。如果数据已加载，请在视图中检查，如果没有，则显示动画 gif 或其他内容。这将告诉用户数据尚未准备好。

您可以通过以下方式在您的视图中执行此操作：

```
{{#if controller.isLoaded}}
  Display controller.content in loop or something
{{else}}
  <img src="/spinner.gif"> Loading data...
{{/if}} 
```

此代码示例改编自 Ember 官方网站。[你](http://emberjs.com/guides/outlets/)可以在最后找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:53:01.307

您可以在 div 或其他内容中使用加载图像，并在请求的开始和结束期间切换其显示。

Ajax 请求开始：

```
document.getElementById("LoadingImage").style.display="block"; 
```

完成后：

```
document.getElementById("LoadingImage").style.display="none"; 
```

# php - 如何检查用户是否连接到 Facebook？

> ID：13683647
> 
> 赞同：3
> 
> 时间：2012-12-03T12:51:17.513
> 
> 标签：php, facebook

我想重定向他们连接到 facebook 的用户，而不是让他们没有连接到 facebook 的用户。怎么做？我正在使用此代码从 facebook 获取数据。此代码基于 Wordpress 在我的页面的第一行执行。

this_code_php:

```
<?PHP

session_start();
    require 'facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'my_number_here',
  'secret' => 'my_number_here',
  'cookie' => true
));

// Get User ID
$user = $facebook->getUser();

if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();

  //echo '$logout '.$logoutUrl;
} else 
{ $loginUrl = $facebook->getLoginUrl();
  //echo '$login '.$loginUrl;
 echo "<script type='text/javascript'>top.location.href = '$logoutUrl';</script>";

 }
?> 
```

连接到 facebook 和记录到我的应用程序之间是有区别的。请注意，如果我知道该用户已连接到 facebook（例如已打开 facebook 选项卡），我想自动将他重定向到包含所有 facebook 数据的页面。但我不会通过 facebook 登录页面打扰其他用户（未注册 facebook）。如果它们已连接 - 好的 - 只需使用 facebook 数据重定向到我的页面。如果他们不是 - 忘记 facebook 登录并忘记 facebook 数据 - 避免使用 facebook。问题是行： echo "top.location.href = '$logoutUrl';";

什么程序做的？如果用户连接到 facebook - 程序接下来会重定向，用户不知道是否采取了任何行动。但是，如果用户没有连接到显示用户登录页面的 facebook 程序，即使对于用户，他们也没有在 facebook 上注册。

我想用这一行替换上面的行： if (/ *user is connected* /) echo "top.location.href = '$logoutUrl';";

但我不知道如何检查用户当前是否连接到 Facebook？如果可以在 PHP 中使用，或者我必须链接 PHP 和 Javascript，这并不难。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:43:52.917

CBroe 是对的。您必须在客户端检查用户状态。要为 CBroe 所说的添加一些细节，该文档为您提供了有用的示例。

```
FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
    // the user is logged in and has authenticated your app
    var uid = response.authResponse.userID;
    var accessToken = response.authResponse.accessToken;
  } else if (response.status === 'not_authorized') {
    // the user is logged in to Facebook, 
    // but has not authenticated your app
  } else {
    // the user isn't logged in to Facebook.
  }
 }); 
```

我想将此作为对先前答案的评论发布以支持它，但评论表单忽略换行符......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T00:17:21.647

另一个选项是用户使用 $facebook->getUser()。如果没有登录 Facebook，这将返回 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T13:11:55.933

对于尚未连接到您的应用程序的用户，您绝对不会获得任何信息——即使他们当前是否登录到 Facebook。

用户连接到您的应用后，您可以使用`FB.getLoginStatus`JavaScript SDK 来确定他们当前是否登录到 Facebook。

这必须在客户端完成，因为只有 JS SDK 能够发出跨域请求来检查在 facebook.com 域下设置的 cookie——这在服务器端是不可能的。

一旦您确定了它们的客户端状态，PHP SDK 就能够在下一个请求中获取此信息。

# jakarta-ee - 在 Java EE 应用程序中查找 GPS 位置

> ID：13683650
> 
> 赞同：3
> 
> 时间：2012-12-03T12:51:28.717
> 
> 标签：jakarta-ee, gps, tracking

我有一个 Java EE 应用程序，我将在其中添加查找`geo location`移动用户的功能。

我想跟踪司机，定期了解他们当前的位置。我的应用程序是一个基本的 Java EE 应用程序。因此，如果我应该找到用户位置，那么最好的方法是什么？

我希望它自动发生，十分钟左右更新一次。那么我可以通过添加一些可用的罐子来做到这一点吗？还是我必须为此目的创建一个 Android 应用程序？

我找到了一些相关的帖子，但他们讨论了查找特定于 Android 的位置。那么在我的基于 Oracle ADF 技术的应用程序中使用什么最适合我？

提前致谢

-拉克什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:14:02.123

您可以在智能手机的本机 Web 浏览器（Safari / Chrome）中使用[W3C Geolocation API](http://en.wikipedia.org/wiki/W3C_Geolocation_API)来检索 long/lat 值。

# wix - 如果目标文件夹中存在以前的每个用户，则停止每台机器的 WiX 安装

> ID：13683651
> 
> 赞同：1
> 
> 时间：2012-12-03T12:51:28.673
> 
> 标签：wix

我的产品之前的安装是在 Visual Studio 2008 中作为部署项目 (vdproj) 完成的。用户可以选择按用户（只有我）或按机器（每个人）安装。我正在 WiX 中进行新安装，如果每台机器都安装了产品，那么新安装将卸载以前的版本。但是，如果每个用户在 %ProgramFiles% 中安装了产品，那么新安装将不会卸载以前的安装，从而在同一个文件夹中造成两个安装的混乱。

我想在这种情况下检测并停止安装。没有自动卸载，只需检测并停止。如果一个用户在之前的每个用户安装，而另一个用户在每台机器上做新的，则解决方案应该处理这种情况。我认为可以使用元素，但它们在 UI 中确定目标文件夹之前运行`DirectorySearch`。`FileSearch`

如果涉及 WiX 代码，请提供小示例。我会从中吸取教训。

**编辑：**如果我使用 AppSearch 功能添加属性`DirectorySearch`，`FileSearch`然后使用`Condition`元素检查条件，这将在安装启动时检查条件。这不是我想要的。用户可能会更改目标文件夹，因此我需要在目标文件夹无法再更改后的某个步骤中检查目标文件夹中是否存在文件。

在我的天真中，我还尝试通过`SetProperty`一些自定义操作来读取上一段中提到的属性值，但这也不起作用。该值读取正常，但它是在设置开始时确定的值。

正确的解决方案可能应该包括对[另一个问题](https://stackoverflow.com/questions/7354619/wix-how-to-do-a-directorysearch-in-a-custom-installation-location)的回答。[根据WiX 技巧社区 wiki](https://stackoverflow.com/a/1801532/395718)中给出的提示，我目前正在玩弄 JScript 。Rob Mensching 的[博](http://blogs.msdn.com/b/robmen/archive/2004/05/20/136530.aspx)文中提到，可能会将其设为 .dll 以避免防病毒干预。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:53:40.843

无论如何，自动卸载是不可能的。主要升级不能从 Per-User 过渡到 Per-Install，并且由于 mutex 考虑和范围考虑（每用户安装可能是不同的用户），无论如何您都不能在安装期间简单地调用卸载。

因为安装可能在另一个用户上下文中完成，用于检查元状态的 MSI API 调用（如 ComponentSearch ）将不起作用。

这意味着您只剩下 AppSearch 来查找您的文件。如果找到，这样的代码片段将使用 MyFile.dll 的完整路径填充属性 FOUNDMYFILE：

```
<Property Id="FOUNDMYFILE">
  <DirectorySearch Id="FindMyFile" Path="[ProgramFilesFolder]MyCompany\MyProduct">
    <FileSearch Name="MyFile.dll"/>
  </DirectorySearch>
</Property> 
```

如果找到 MyFile.dll 并且您的产品尚未安装，接下来要做的就是阻止安装。

```
<Condition Message="[ProductName] cannot install due to prexisting
per-user installation.">FOUNDMYFILE and Not Installed</Condition> 
```

现在，如果您没有安装但找到了 DLL，这种情况将阻止安装。它不会阻止后续的修复和卸载。

但是，这仅适用于次要升级。对于重大升级，ProductCode 已更改，从安装程序的角度来看，即使以前的版本已安装，它也未安装。在这种情况下，您需要说类似的话。

```
<Condition Message="[ProductName] cannot install due to prexisting
 per-user installation.">FOUNDMYFILE and Not MAJORUPGRADEPROPERTY and
 Not Installed</Condition> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:09:18.687

这就是我最终如何做到的。我正在调用排队的自定义操作`RemoveExistingProducts`：

```
<Property Id='ERRORIFFILESFOUND_MESSAGE'>!(loc.OlderVersionNotRemoved)</Property>

<CustomAction Id="CA.ErrorIfFilesFound"
  BinaryKey="SetupSupport.dll" DllEntry="ErrorIfFilesFound"
  Execute="immediate" Return="check" />

<CustomAction Id='CA.ErrorIfFilesFound.SetDirectory' 
  Property='ERRORIFFILESFOUND_DIRECTORY' Value='[INSTALLDIR]' />

<InstallExecuteSequence>
  <Custom Action='CA.ErrorIfFilesFound.SetDirectory' After='RemoveExistingProducts' />
  <Custom Action='CA.ErrorIfFilesFound' After='CA.ErrorIfFilesFound.SetDirectory'>
    Not MAJORUPGRADEPROPERTY and Not Installed
  </Custom>
</InstallExecuteSequence> 
```

在此之后，如果可能的话，旧的安装会被删除，所以如果目标文件夹中还有文件，那么就有问题了。这一刻发生得相当晚，但我不知道有一种方法可以检测是否要卸载现有文件。自定义操作中的代码仅检查目标文件夹是否存在且不为空，如果存在则调用它退出（`ExitOnFailure`为简洁起见，删除了错误处理）：

```
UINT WINAPI ErrorIfFilesFound(MSIHANDLE hInstall)
{
    HRESULT hr = S_OK;
    LPWSTR pwszDirectory = NULL;
    LPWSTR pwszMessage = NULL;

    hr = ::WcaInitialize(hInstall, "ErrorIfFindFile");

    hr = ::WcaGetProperty(L"ERRORIFFILESFOUND_DIRECTORY", &pwszDirectory);

    if (PathIsDirectory(pwszDirectory) && !PathIsDirectoryEmpty(pwszDirectory))
    {
        hr = ::WcaGetProperty(L"ERRORIFFILESFOUND_MESSAGE", &pwszMessage);

        ProcessInstallMessage(hInstall,
            INSTALLMESSAGE_ERROR, pwszMessage, pwszDirectory);

        hr = -1;
    }

LExit:
    ReleaseStr(pwszMessage);
    ReleaseStr(pwszDirectory);

    UINT err = SUCCEEDED(hr) ? ERROR_SUCCESS : ERROR_INSTALL_FAILURE;
    return ::WcaFinalize(err);
}

void ProcessInstallMessage(MSIHANDLE hInstall,
    INSTALLMESSAGE type, TCHAR* lpszMessage, TCHAR* lpszParam)
{
    UINT rc;
    MSIHANDLE hMsg;
    UINT uiFieldNumber = lpszParam == NULL ? 0 : 1;

    hMsg = MsiCreateRecord(uiFieldNumber);

    if (hMsg != 0)
    {
        if ((rc = MsiRecordSetString(hMsg, 0, lpszMessage)) != ERROR_SUCCESS)
        {}
        else if (lpszParam != NULL &&
            (rc = MsiRecordSetString(hMsg, 1, lpszParam)) != ERROR_SUCCESS)
        {}
        else
        {
            rc = MsiProcessMessage(hInstall, type, hMsg);
        }

        rc = MsiCloseHandle(hMsg);
    }
} 
```

# jsf - 使用 selectBooleanCheckbox 进行设置操作的非法语法

> ID：13683654
> 
> 赞同：0
> 
> 时间：2012-12-03T12:51:45.177
> 
> 标签：jsf, jsf-2, icefaces, icefaces-3

我有两个输入文本来隐藏/显示密码，如下所示：

```
<ice:panelGroup rendered="#{conf.password}">
  <ice:inputText id="valPassDisabled" value="#########" style="width:70%" rendered="#{!conf.showPassword}"  />
  <ice:inputText id="valPassEnabled" value="#{conf.confvalue}" style="width:70%" rendered="#{conf.showPassword}"  />
  <h:outputText value="Show Password"/>
  <ice:selectBooleanCheckbox value="#{conf.showPassword}" partialSubmit="true"/>
</ice:panelGroup> 
```

当我单击 selectBooleanCheckbox 时，出现异常：

**集合操作的非法语法**

请告知我为什么会收到此异常以及如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:12:00.967

错误是因为我使用了**非法值#########**当我更改它时，异常消失了。

# node.js - nodejs node-proxy，使用路由表并修改响应

> ID：13683655
> 
> 赞同：1
> 
> 时间：2012-12-03T12:51:54.070
> 
> 标签：node.js, reverse-proxy

我们的实验室有一个简单的 nodejs 流程用于测试/开发工作。我们正在使用[node-proxy](https://github.com/nodejitsu/node-http-proxy)来设置一个反向代理，它允许我们使用 http（即 http -> https）与 https 服务器进行通信。作为其中的一部分，我们有一些用于修改响应的代码。这是我们正在做的事情：

```
var http = require('http'),
    httpProxy = require('http-proxy'), 
    endserver = 'server.local',
    endport = 8443;

var proxy = new httpProxy.HttpProxy({ 
  target: {
    https: true,
    host: endserver,
    port: endport
  } 
});

http.createServer(function (req, res) {
  //our code for modifying response is here...
  proxy.proxyRequest(req, res);
}).listen(8001); 
```

我想设置一个节点代理路由表，就像[这里](https://github.com/nodejitsu/node-http-proxy/blob/master/examples/middleware/gzip-middleware-proxytable.js)的这个例子，所以我可以根据请求中的主机名将请求转发到不同的 https 服务器（我将在我们的 dns 上设置多个主机名，指向同一个运行的服务器nodejs 代理）。

如何拥有节点代理路由表并修改响应？

（我对 node.js 很陌生，但对 javascript 不熟悉）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-26T22:57:31.417

如果我正确阅读了您的问题，您只需要知道如何使用节点代理路由表根据请求对象路由不同主机的请求。这实际上是由 node-http-proxy 文档解决的：[Proxy requests using a ProxyTable](https://github.com/nodejitsu/node-http-proxy#proxy-requests-using-a-proxytable)

粘贴它，你只需要像这样在 JS 对象中配置路径：

```
var options = {
  router: {
    'foo.com/baz': '127.0.0.1:8001',
    'foo.com/buz': '127.0.0.1:8002',
    'bar.com/buz': '127.0.0.1:8003'
  }
}; 
```

然后在您制作代理服务器时传递此对象：

```
var proxyServer = httpProxy.createServer(options);
proxyServer.listen(80); 
```

* * *

为您的代码指定此项会导致如下所示：

```
var http = require('http'),
    httpProxy = require('http-proxy'), 
    endserver = 'server.local',
    endport = 8443;

var options = {
  router: {
    endserver + '/foo': '127.0.0.1:8081',
    endserver + '/bar': '127.0.0.1:8082',
    endserver + '/baz': '127.0.0.1:8083'
  }
};

var proxyServer = httpProxy.createServer(options);
proxyServer.listen(endport);

http.createServer(function (req, res) {
  // your code for modifying response is here...
  proxy.proxyRequest(req, res);
}).listen(8001); 
```

* * *

使用路由器选项时无需自己设置目标。似乎也处理了https的区别，但我不确定。我从[proxy-table.js 源](https://github.com/nodejitsu/node-http-proxy/blob/master/lib/node-http-proxy/proxy-table.js)获得了这些信息。尤其：

```
ProxyTable.prototype.setRoutes = function (router) {
  if (!router) {
    throw new Error('Cannot update ProxyTable routes without router.');
  }

  var self = this;
  this.router = router;

  if (this.hostnameOnly === false) {
    this.routes = [];

    Object.keys(router).forEach(function (path) {
      if (!/http[s]?/.test(router[path])) {
        router[path] = (self.target.https ? 'https://' : 'http://')
          + router[path];
      }

      var target = url.parse(router[path]),
          defaultPort = self.target.https ? 443 : 80;

      //
      // Setup a robust lookup table for the route:
      //
      // {
      // source: {
      // regexp: /^foo.com/i,
      // sref: 'foo.com',
      // url: {
      // protocol: 'http:',
      // slashes: true,
      // host: 'foo.com',
      // hostname: 'foo.com',
      // href: 'http://foo.com/',
      // pathname: '/',
      // path: '/'
      // }
      // },
      // {
      // target: {
      // sref: '127.0.0.1:8000/',
      // url: {
      // protocol: 'http:',
      // slashes: true,
      // host: '127.0.0.1:8000',
      // hostname: '127.0.0.1',
      // href: 'http://127.0.0.1:8000/',
      // pathname: '/',
      // path: '/'
      // }
      // },
      //
      self.routes.push({
        source: {
          regexp: new RegExp('^' + path, 'i'),
          sref: path,
          url: url.parse('http://' + path)
        },
        target: {
          sref: target.hostname + ':' + (target.port || defaultPort) + target.path,
          url: target
        }
      });
    });
  }
}; 
```

# excel - 如何将此excel单元格公式转换为英文单词？

> ID：13683660
> 
> 赞同：0
> 
> 时间：2012-12-03T12:52:03.867
> 
> 标签：excel

我在我正在查看的电子表格的一个单元格中看到了这个公式

```
=IF(F28<1189,2.2,IF(F28 <1568,0.000792049*F28+1.258,IF(F28<2491,0.004873 * F28-5.142,0.02269*F28^0.7329))) 
```

我正在创建一个程序，我需要有人用英语单词翻译它，以便我知道先编码哪个，这看起来很混乱，因为如果一个人在 excel 中查看一个单元格，公式会出现在一行中，我不知道哪个会去首先..伪代码也可以提供帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:57:56.207

如果您根据括号缩进，它会有所帮助：

```
=IF(F28<1189,
    2.2,
    IF(F28 <1568,
        0.000792049*F28+1.258,
        IF(F28<2491,
            0.004873 * F28-5.142,
            0.02269*F28^0.7329
        )
    )
) 
```

所以这意味着：

```
if (F28 < 1189) {
    return 2.2
} else if (F28 < 1568) {
    return 0.000792049 * F28 + 1.258
} else if (F28 < 2491) {
    return 0.004873 * F28 - 5.142
} else {
    return 0.02269 * F28 ^ 0.7329
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:57:59.660

应该被`IF(a, b, c)`视为`take value b if a is true or take c otherwise`.

所以把它翻译成通常的伪代码（不是简单的英语）：

```
 if F28 < 1189:
    return 2.2
  if F28 < 1568:
    return 0.000792049*F28+1.258
  if F28 < 2491:
    return 0.004873 * F28-5.142
  return 0.02269*F28^0.7329 
```

所以它是一个函数 f(x) 的定义，或者更确切地说`F28`是这里的变量名称，它由一些规模范围内的几个表达式组成`x`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T12:59:01.630

在伪代码中，此公式说明

```
int val;
if(F28<1189)
    val = 2.2
else if(F28<1568)
    val = 0.000792049*F28+1.258
else if(F28<2491)
    val = 0.004873 * F28-5.142
else
    val =0.02269*F28^0.7329 
```

# javascript - 如何防止html中可拖动元素的重叠

> ID：13683661
> 
> 赞同：1
> 
> 时间：2012-12-03T12:52:09.423
> 
> 标签：javascript, html, drag-and-drop

我创建了一个文本框，在其中拖动动态创建的 div。但是如果我将 div 放在其他丢弃的 div 上，它们就会重叠。我必须垂直排列它们。在 jQuery 中，我找到了许多解决方案，但我需要纯 javaScript。请帮助我并提出建议。

我用过的html：

```
<div id="area1" align="center" ondrop="drop(event)" ondragover="allowDrop(event)" ></div> 
```

我使用的 CSS：

```
#area1 {
    float:left;
    width:25%;
    height:240px;
    padding:10px;
    border:1px solid #A485D8;
    margin-left: 10px;
    margin-right: 10px;
    padding-top:10px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-18T17:25:43.090

问题是具有属性的元素`draggable="true"`被拖放到类似的（可拖动的）元素中。

似乎以某种方式同样的`ondrop`事件函数也应用于可拖动元素。

为避免这种情况，您应该**在为`ondrop`event**调用的函数中添加一些条件。下面是一个例子。

```
<div id="area1" align="center" ondrop="drop(event)" ondragover="allowDrop(event)" ></div>

function drop(ev) 
{
if(ev.target.className=='into' || ev.target.className=='options_list')
    {
    var incoming_id = ev.dataTransfer.getData("incoming_choice")
    ev.preventDefault();
    ev.target.appendChild(document.getElementById(incoming_id));
    }
} 
```

在我的情况下，我希望可拖动元素仅被拖放到其`className`为`'options_list'`or的元素中`'into'`。它不应该被放入另一个可拖动的对象中。我的`className`代码中的可拖动对象是`'match_choice'`. 同样，您可以使用`id`而不是`className`进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:55:26.223

这只是原始代码。我没有测试过。但这可能会有所帮助：

```
#area1 *
{
    position:relative;
    display:block;
} 
```

# sql - SQL GROUP BY - 使用 COUNT() 函数

> ID：13683663
> 
> 赞同：10
> 
> 时间：2012-12-03T12:52:15.240
> 
> 标签：sql, oracle, group-by, ora-00979

我一直在做一项涉及为医院创建数据库的任务，我遇到了一个非常令人沮丧的错误，无论我做了多少研究，我似乎都无法修复。

我收到的错误是：

> 第 1 行出现错误：ORA-00979：不是 GROUP BY 表达式

我用于插入值的代码结构是：

```
SELECT  CONSULTANT.S_NO, DOCTOR.D_NAME, CONSULTANT.SPEC, 
PATIENT.P_ID, PATIENT.P_NAME, COUNT(CONSULTANT.P_ID)
FROM    PATIENT, CONSULTANT, DOCTOR                            
WHERE   PATIENT.P_ID = CONSULTANT.P_ID
AND     CONSULTANT.S_NO = DOCTOR.S_NO
GROUP BY CONSULTANT.S_NO; 
```

我的表的结构是：

```
 CREATE TABLE PATIENT (
    P_ID        NUMBER NOT NULL,
    P_NAME      CHAR(20),
    ADDRESS     VARCHAR(20),
    DOB     DATE,
    WARD_NO     NUMBER NOT NULL, 
    C_S_NO      NUMBER NOT NULL,
    CONSTRAINT PK_PATIENT PRIMARY KEY(P_ID)
);

CREATE TABLE DOCTOR (
    S_NO        NUMBER NOT NULL,
    D_NAME      CHAR(20),
    APP_DATE    DATE,
    CONSTRAINT PK_DOC PRIMARY KEY(S_NO)
);

CREATE TABLE CONSULTANT (
    S_NO        NUMBER NOT NULL,
    P_ID        NUMBER NOT NULL,
    SPEC        CHAR(20),
    T_CODE      VARCHAR(20) NOT NULL,
    CONSTRAINT PK_CDOC PRIMARY KEY(S_NO)
); 
```

非常感谢任何人可以帮助我解决这个困境。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-03T12:53:38.220

由于您使用的是聚合函数，因此`SELECT`列表中未聚合的字段需要位于`GROUP BY`：

```
SELECT  CONSULTANT.S_NO, DOCTOR.D_NAME, CONSULTANT.SPEC, 
PATIENT.P_ID, PATIENT.P_NAME, COUNT(CONSULTANT.P_ID)
FROM    PATIENT, CONSULTANT, DOCTOR                            
WHERE   PATIENT.P_ID = CONSULTANT.P_ID
   AND     CONSULTANT.S_NO = DOCTOR.S_NO
GROUP BY CONSULTANT.S_NO, DOCTOR.D_NAME, CONSULTANT.SPEC, PATIENT.P_ID, PATIENT.P_NAME 
```

作为旁注，我还将使用 ANSI JOIN 语法而不是逗号分隔的表列表：

```
SELECT  c.S_NO, d.D_NAME, c.SPEC, p.P_ID, p.P_NAME, COUNT(c.P_ID)
FROM    PATIENT p
INNER JOIN CONSULTANT c
  ON p.P_ID = c.P_ID
INNER JOIN DOCTOR d
  ON c.S_NO = d.S_NO
GROUP BY c.S_NO, d.D_NAME, c.SPEC, p.P_ID, p.P_NAME 
```

现在，由于您需要向其中添加其他字段，`GROUP BY`因此可以将`COUNT()`总数调整为您不期望的数字。因此，您可能需要合并一个子查询来获取总数，类似于：

```
SELECT  c1.S_NO, d.D_NAME, c1.SPEC, p.P_ID, p.P_NAME, c2.Count_P_ID
FROM    PATIENT p
INNER JOIN CONSULTANT c1
  ON p.P_ID = c1.P_ID
INNER JOIN
(
  select COUNT(c.P_ID) Count_P_ID, S_NO
  from CONSULTANT c
  group by S_NO
) c2
  ON c1.S_NO = c2.S_NO
INNER JOIN DOCTOR d
  ON c1.S_NO = d.S_NO 
```

这使您可以`GROUP BY`使用您最初想要的一个字段。

# android - 从共享首选项中恢复字符串

> ID：13683667
> 
> 赞同：1
> 
> 时间：2012-12-03T12:52:20.937
> 
> 标签：android, string, sharedpreferences

我目前正在尝试从共享首选项中存储和恢复字符串，但似乎出了点问题。

我想持久存储一个 cookie，所以我尝试将它的值存储在共享首选项中。不幸的是，当我尝试检索它时找不到它。

这是我的代码：

```
public void storeString(Activity ctx, String key, String value){
    SharedPreferences prefs = ctx.getSharedPreferences("com.test", Context.MODE_PRIVATE);
    prefs.edit().putString("CAKEPHP", value);
    prefs.edit().commit();

    SharedPreferences newprefs = ctx.getSharedPreferences("com.test", Context.MODE_PRIVATE);
    Log.i("test", "cookie retrieved: "+ newprefs.getString("CAKEPHP", "nodata"));
} 
```

日志输出是“cookie 检索：nodata”。有人可以告诉我如何做到这一点吗？

此方法是普通 java 类的一部分可能很重要。调用时，调用活动作为参数传递。

任何帮助或提示表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:57:28.037

为 sharedpref 创建一个静态变量并将其初始化为

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(ctx); 
```

您不需要重复初始化 sharedpreferences。理想情况下，您应该在 onCreate 中初始化它并在整个活动中使用它。

此外，您需要致电

```
prefs.edit().putString("CAKEPHP", value).commit(); 
```

# php - 使用 PHP mail() 未到达的电子邮件

> ID：13683668
> 
> 赞同：0
> 
> 时间：2012-12-03T12:52:26.733
> 
> 标签：php, email

我一直遇到一些问题，因为电子邮件没有到达某些地址，或者更具体地说，一些域（例如 gmx.com）。不过，电子邮件会按应有的方式到达某些域（例如 spray.se 或 gmail.com）。

我已经检查过了，我们的服务器 IP 似乎都很好。在任何地方都找不到块。

我的代码有任何严重问题吗？

```
$mail_body = "Välkommen till ***!\n\nOm du ej registrerat dig på *** ber vi dig bortse från\ndetta mail.\n\nDin aktiveringskod är:\n" . $activation . "\n\nMvh\nVi på ***"; // Mail body
$subject = "Din aktiveringskod";
$header = "From: *** <no-reply@***.se>\r\n";

ini_set('sendmail_from', 'no-reply@***.se'); // Snabbfix på problem med IIS (5+?)

if(!mail($recipient, $subject, $mail_body, $header)) die ("mail error"); 
```

如果电子邮件已发送，则其中没有错误！

我也试过 utf8-encode 整个事情，但这并没有改变任何东西。

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:19:41.747

这个问题根本与主题无关。这是导致此问题的 DNS 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:03:02.963

你的标题应该是这样的

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers.='From: *** <no-reply@***.se>\r\n'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T13:03:21.257

听起来您的电子邮件被某些服务器识别为垃圾邮件，这可能意味着它们最终进入垃圾邮件箱或被阻止一起发送（在更无情的接收者上）。还是您绝对肯定他们首先被发送？如果可以，请检查您的日志。

无论如何，您可以做一些事情来减少您的电子邮件被识别为垃圾邮件的机会：

*   完全充实标题，例如：

    ```
    $headers .= "Reply-To: The Sender <sender@sender.com>\r\n";
    $headers .= "Return-Path: The Sender <sender@sender.com>\r\n";
    $headers .= "From: The Sender <senter@sender.com>\r\n";
    $headers .= "Organization: Sender Organization\r\n";
    $headers .= "MIME-Version: 1.0\r\n";
    $headers .= "Content-type: text/plain; charset=utf-8\r\n";
    etc... 
    ```

*   确保电子邮件和服务器域中的邮件发件人域匹配

*   正确使用内容类型属性

您还可以仔细检查您的服务器是否未列入黑名单，但听起来您已经这样做了。

我还建议不要使用 PHP 邮件功能，尝试使用 swift mailer 或 PHPMailer，或者四处寻找适合您需要的。

# android - android：果冻豆内存不足（4.1）

> ID：13683672
> 
> 赞同：1
> 
> 时间：2012-12-03T12:52:49.217
> 
> 标签：android

我面临一个问题，应用程序在版本低于 4.1 的 android 设备下运行良好，但 4.1 或更高版本的设备抛出内存异常。

我使用 ListView 放置一些从 APK 资源加载的 ImageView，ImageView.setImageResrouce(id);

当在 ListView 中单击一个项目时，它会弹出一个包含一些 ImageViews 的 GridView，就像我使用的 ListView 一样。

在较低版本的设备上，它可以工作，但不能在包括 4.1 版的较高版本设备上工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:16:30.543

我修好了。这个问题是由于分辨率为400x600的大图像太多造成的。哈哈

# mysql - 验证具有多个父母和多个孩子的列表（图表）

> ID：13683673
> 
> 赞同：0
> 
> 时间：2012-12-03T12:52:51.183
> 
> 标签：mysql, ruby-on-rails, database, validation, graph-databases

我有以下列表：

![在此处输入图像描述](../Images/2b3800835921ee77444d6aa473016509.png)

是一个多对多递归关联，其中一个类别（计算机、Mac、PC 等）可以有许多其他类别。一个类别（如光驱）也可以属于 PC 和 Mac。但是“光驱”不应允许将类别作为“PC”类别，因为它将有一个无限循环。

我想知道如何在 Rails 中创建上述验证并进行优化？我应该检查所有父类别吗？但是如果有很多嵌套类别（例如 200 个深度的子类别），这将导致许多 sql 查询。

另一个想法是在数据库中创建一个深度列，并在父类别不允许作为子类别的情况下进行验证，该类别的深度小于其自身的深度。但这不会让没有共同父母的类别进入另一个深度。例如，在上面的列表示例中，光驱可以作为 Mac 的一个类别，即使它处于上述深度级别。但由于无限循环，它无法拥有 PC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:50:57.237

由于一个节点可以有多个父节点，因此这是一个图，而不是树。虽然在关系数据库中有处理图形的[模式](https://rads.stackoverflow.com/amzn/click/com/1558609202)，但我发现它们很麻烦。这就是图数据库大放异彩的地方。

为了便于说明，我将在 Gremlin 中向您展示您的问题的潜在解决方案，Gremlin 是一种通过插件在 Neo4j 中运行的图形遍历语言，可通过[Neo4j REST API](http://docs.neo4j.org/chunked/stable/gremlin-plugin.html)获得。

Neo4j 中包含的最新版本的 Gremlin 是 Gremlin 1.5。[您可以从Github](https://github.com/tinkerpop/gremlin/downloads)下载此版本以试用此代码：

```
g = new Neo4jGraph('/tmp/so')

// add all vertices
categories = ['Computers', 'Mac', 'PCs', 'Hard Disks', 'Memory', 'Graphic Cards',
'Optical Drives', 'DVD-Reader', 'DVD-RW', 'Blue Ray', 'Blue Ray / DVD Combo']

categories.each { x -> g.addVertex(['name':x]) }

// show all of the vertices we just created with their properties
g.V.map
==>{name=Computers}
==>{name=Mac}
==>{name=PCs}
==>{name=Hard Disks}
==>{name=Memory}
==>{name=Graphic Cards}
==>{name=Optical Drives}
==>{name=DVD-Reader}
==>{name=DVD-RW}
==>{name=Blue Ray}
==>{name=Blue Ray / DVD Combo}

// for ease of this example, create a lookup table of these vertices
// in a production system, you would look up vertices in a Lucene index
i = [:]
g.V.transform {i[it.name] = it}

// create edges representing one category 'in' another
g.addEdge(i['Mac'], i['Computers'], 'in')
g.addEdge(i['PCs'], i['Computers'], 'in')

// PCs subgraph
g.addEdge(i['Hard Disks'], i['PCs'], 'in')
g.addEdge(i['Memory'], i['PCs'], 'in')
g.addEdge(i['Graphic Cards'], i['PCs'], 'in')

// optical drives subgraph
g.addEdge(i['Optical Drives'], i['PCs'], 'in')
g.addEdge(i['DVD-Reader'], i['Optical Drives'], 'in')
g.addEdge(i['DVD-RW'], i['Optical Drives'], 'in')
g.addEdge(i['Blue Ray'], i['Optical Drives'], 'in')
g.addEdge(i['Blue Ray / DVD Combo'], i['Optical Drives'], 'in')

// adding the optical drive subgraph to Mac is a one-liner
g.addEdge(i['Optical Drives'], i['Mac'], 'in')

// show the names of all vertices in the paths from Computers to child nodes three-levels down
i['Computers'].in.in.in.paths {it.name}
==>[Computers, PCs, Optical Drives, Blue Ray / DVD Combo]
==>[Computers, PCs, Optical Drives, Blue Ray]
==>[Computers, PCs, Optical Drives, DVD-RW]
==>[Computers, PCs, Optical Drives, DVD-Reader]
==>[Computers, Mac, Optical Drives, Blue Ray / DVD Combo]
==>[Computers, Mac, Optical Drives, Blue Ray]
==>[Computers, Mac, Optical Drives, DVD-RW]
==>[Computers, Mac, Optical Drives, DVD-Reader]

g.shutdown() 
```

Gremlin 可能需要一些时间来适应，因为它是一种函数式编程方法，但是一旦你掌握了它，它就会非常强大。

> > 但是“光驱”不应允许将类别作为“PC”类别，因为它将有一个无限循环。

这种验证可以通过寻路来处理。如果存在从当前顶点到子顶点的路径，则不允许创建边。Neo4j 包含一个[Pathfinder API](http://api.neo4j.org/current/org/neo4j/graphalgo/PathFinder.html)来促进这些类型的搜索。

由于您在 Rails 中，您可能会发现 Neo4j 与 RESTful 包装器（如[neography）](http://rubygems.org/gems/neography)配对，提供了您需要的 Rails 和 Neo4j 之间的集成。如果您想创建自定义 RESTful 端点，Neo4j 还提供创建[非托管扩展的能力。](http://docs.neo4j.org/chunked/stable/server-unmanaged-extensions.html)

# java - 使用 asynctask 进行网络连接

> ID：13683676
> 
> 赞同：3
> 
> 时间：2012-12-03T12:53:09.390
> 
> 标签：java, android, sockets, tcp, android-asynctask

我正在尝试将 asynctask 合并到我的代码中，因为由于`NetworkOnMainThreadException`.

我已经完成了一些教程，但我仍然无法理解它。每次我尝试它时，我都会到处出错。

我看过的教程：

1.  [http://developer.android.com/reference/android/os/AsyncTask.html][1]
2.  [https://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/][2]

基本上代码正在做的是：

1.  从意图中获取 IP 地址。
2.  使用 32 端口连接到 IP
3.  然后发送一个命令，等待响应并发送另一个命令。
4.  在我们发送 2 个命令后，我应该得到“SNX_COM>”的响应
5.  建立连接后，我希望连接保持打开状态，以便在单击按钮时发送特定命令。

^^这基本上是我的代码应该实现的^^

```
package com.smarte.smartipcontrol;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.Socket;
import java.net.UnknownHostException;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;

public class IPControl extends Activity {

private Socket socket;
private String serverIpAddress = "com.smarte.smartipcontrol.ACTU_IP";
private static final int REDIRECTED_SERVERPORT = 32;
public PrintWriter out;
public BufferedReader in;
public String data;
public Object pd;

public void getModel(View view) {
    try {
        out.println("[m\r\n");
        //System.out.print("root\r\n");
        while(!in.ready());
        String textStatus = readBuffer();

    } catch(IOException e) {}
}

@Override
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);

   setContentView(R.layout.act_ipcontrol);

   try{   

    new AsyncAction().execute();

   }catch (Exception e) {
       e.printStackTrace();
   }

   }

private class AsyncAction extends AsyncTask<String, Void, String> {
   protected String doInBackground(String... args) { 
   try {
 InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
 socket = new Socket(serverAddr, REDIRECTED_SERVERPORT);
} catch (UnknownHostException e1) {
 e1.printStackTrace();
} catch (IOException e1) {
 e1.printStackTrace();
}
try {
 out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true); in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
 while (! in .ready());
 readBuffer();
 out.println("root\r\n");
 //System.out.print("root\r\n");
 while (! in .ready());
 readBuffer();
 out.println("root\r\n");
 //System.out.print("root\r\n");
 while (! in .ready());
 String msg = "";

while ( in .ready()) {
 msg = msg + (char) in .read();
}
} catch (IOException e) {}

       return null;//returns what you want to pass to the onPostExecute()
   }

   protected void onPostExecute(String result) {

   //results the data returned from doInbackground

       IPControl.this.data = result;

       }
   }

private String readBuffer() throws IOException {
    String msg = "";

    while(in.ready()) {
        msg = msg + (char)in.read();
    }
    //System.out.print(msg);
    if(msg.indexOf("SNX_COM> ") != -1) return msg.substring(0, msg.indexOf("SNX_COM> "));
    else return msg;
}

} 
```

日志猫

```
12-03 15:39:56.346: E/AndroidRuntime(2697): FATAL EXCEPTION: AsyncTask #5
12-03 15:39:56.346: E/AndroidRuntime(2697): java.lang.RuntimeException: An error occured while executing doInBackground()
12-03 15:39:56.346: E/AndroidRuntime(2697):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
12-03 15:39:56.346: E/AndroidRuntime(2697):     at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
12-03 15:39:56.346: E/AndroidRuntime(2697):     at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
12-03 15:39:56.346: E/AndroidRuntime(2697):     at java.util.concurrent.FutureTask.run(FutureTask.java:239)
12-03 15:39:56.346: E/AndroidRuntime(2697):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
12-03 15:39:56.346: E/AndroidRuntime(2697):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
12-03 15:39:56.346: E/AndroidRuntime(2697):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
12-03 15:39:56.346: E/AndroidRuntime(2697):     at java.lang.Thread.run(Thread.java:856)
12-03 15:39:56.346: E/AndroidRuntime(2697): Caused by: java.lang.NullPointerException
12-03 15:39:56.346: E/AndroidRuntime(2697):     at com.smarte.smartipcontrol.IPControl$AsyncAction.doInBackground(IPControl.java:71)
12-03 15:39:56.346: E/AndroidRuntime(2697):     at com.smarte.smartipcontrol.IPControl$AsyncAction.doInBackground(IPControl.java:1)
12-03 15:39:56.346: E/AndroidRuntime(2697):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
12-03 15:39:56.346: E/AndroidRuntime(2697):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
12-03 15:39:56.346: E/AndroidRuntime(2697):     ... 4 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:12:42.187

> 建立连接后，我希望连接保持打开状态，以便在单击按钮时发送特定命令。

当您想向服务器发送命令时，您可能必须创建一个新线程：

```
button.setOnClickListener(new OnClickListener()
{
    public void onClick(View arg0)
    {
      new Thread()
      {
        @Override
        public void run()
        {
          methods.sendCommandToServer();
        } 
      }.start(); 
     } 
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:05:05.483

您必须将您的 asynctask`createConnection();`移至`doInBackground()`您必须添加为项目的内部类或单独类例如：

```
 private class DownloadFilesTask extends AsyncTask<Void, Void, Void> {
 protected Void doInBackground(Param[]...) {
     createConnection();
 }

 protected void onProgressUpdate() {
     setProgressPercent(progress[0]);
 }

 protected void onPostExecute() {

 } 
```

}

这是您提供的第一个链接，我只是对其进行了一些更改。确保从方法 createConnection() 返回某些内容，以便您知道 asynctask 是否成功完成并相应更改 DownloadFilesTask 以便`doInBackground()`返回`onPostExecute()`相同的类型

# sql-server - 如何在事务中获取标识列值（尚未提交）

> ID：13683678
> 
> 赞同：6
> 
> 时间：2012-12-03T12:53:21.493
> 
> 标签：sql-server, tsql, transactions, identity

在 TSQL 事务中，我有一个将记录插入到 a中的操作，以及使用记录列的值`MyTable1`更新 a 的操作，这仅在事务提交后插入。**那么，如何在实际插入表之前获取这个自动生成的值呢？**`MyTable2``Identity``MyTable1`

 **代码只是为了说明问题：

```
CREATE TABLE MyTable1(
MyTable1Id int identity(1,1) primary key,
Field1 varchar(50)
) 

CREATE TABLE MyTable2(
MyTable2Id int identity(1,1) primary key,
MyTable1Id int
)

CREATE PROCEDURE MyProc(
   @MyVal1  [varchar](50)
)
AS
BEGIN TRAN
-- try to insert
INSERT INTO MyTable1(
   Field1
)
SELECT @MyVal1

IF @@ERROR <> 0
BEGIN
  ROLLBACK TRAN
END

-- update MyTable2
DECLARE @TheUnknownIdValue int
UPDATE MyTable2
SET    MyTable1Id = @TheUnknownIdValue -- how to get the value needed here?
WHERE ...

IF @@ERROR <> 0
BEGIN
  ROLLBACK TRAN
END

COMMIT TRAN 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T12:57:21.580

`SCOPE_IDENTITY()` **之后**使用_`INSERT`

```
--
DECLARE @newId INT 
INSERT INTO MyTable1(
   Field1
)
SELECT @MyVal1
--End of Insert here
SELECT @newId = SCOPE_IDENTITY()
--Rest of the procedure 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T12:58:33.903

如果您一次插入一条记录，则可以使用 scope_identity() 函数：

```
set @TheUnknownIdValue = scope_identity() 
```

在插入 MyTable1 之后执行此操作。

如果要插入多行，最好的方法是使用 OUTPUT 子句将所有新标识放入工作表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T12:57:21.143

在 SQL Server 中使用 SCOPE_IDENTITY() 给出最后生成的标识值

```
UPDATE MyTable2
SET    MyTable1Id = SCOPE_IDENTITY() -- how to get the value needed here
WHERE ... 
```

如果第一次插入失败，您是否应该中止整个过程？查看 SQL Server 中的 Try/Catch，您会在那里找到一些好的模式。**

# php - Yii CGridView - 期望什么 AJAX 响应？

> ID：13683684
> 
> 赞同：0
> 
> 时间：2012-12-03T12:53:48.313
> 
> 标签：php, gridview, yii

该`CGridView`组件具有一个`ajaxUrl`属性。我不完全理解 URL 期望什么样的响应。它是一个渲染的 HTML 来替换现有的组件吗？是 JSON 数据还是数据提供者？

编辑：或者我们是否希望手动实现数据处理程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:00:26.950

这是对应于 CGridView 的一些 HTML。例如在控制器中你可以放：

```
if(Yii::app()->request->isAjaxRequest) {
    $this->renderPartial('_yourGridView',array(
            'model' => $model,
    ));
    Yii::app()->end();
} 
```

`_yourGridView`包含我的 CGridView 小部件的视图在哪里

另请注意，仅当 url 与当前 URL 不同时，才需要 ajaxUrl。如果您想使用相同的 url（所以相同的控制器和相同的操作），您不必指定它

# c# - 如何为运行时生成的多个文本框设置边距？

> ID：13683685
> 
> 赞同：0
> 
> 时间：2012-12-03T12:53:51.123
> 
> 标签：c#, windows-phone-7

如何为运行时生成的多个文本框设置边距？当我在运行时生成文本框时，所有文本框的边距都相同，并且难以使用循环提供边距。为文本框提供边距的任何简单方法。提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:11:07.570

你想做什么？客户端应用程序、Web 应用程序、silverlight/wpf？

无论您做什么，都应该将边距保持在变量中。然后，如果您在循环中添加复选框，则可以增加变量以设置新的边距。（从 for/foreach/each/etc 循环中声明变量）。

```
var currentMarginX = 0;
var currentMarginY = 0;

for( var i=0; i<checkboxesNeededCount; i++)
{
    // Set the textbox location with the variable location, and increase either X or Y...
    // e.g: 
         myTextbox.location = new Point(currentMargin, currentMarginY);
         currentMarginX += 50;
         currentMarginY += 50;
} 
```

上面的示例将放置一个边距为`x=50`and的文本框`y=50`，然后添加另一个带有`x=100`,的文本框`y=100`，依此类推...您需要确定（如果需要，取决于您的操作方式）设置for 语句中控件的新实例。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:55:42.870

你能不给文本框一个类并使用CSS来做吗？

那将是最简单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:55:54.587

创建一个可以具有边距属性的 css 类，并在创建时设置文本框的 cssclass 属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T13:14:50.207

您可以简单地编写内联 CSS，例如 style="margin: 5px;"

# android - 与 Windows Phone 8 的串行通信

> ID：13683690
> 
> 赞同：5
> 
> 时间：2012-12-03T12:54:01.640
> 
> 标签：android, serial-port, windows-phone

windows phone 8 支持串口通信吗？
我现在正在做我的毕业设计。我计划使用手机通过串口与 RFID 设备进行通信。

我得到三个解决方案。

1.  使用 Windows 移动 6
2.  使用 Windows Phone 7 或 8
3.  使用安卓

个人更喜欢2。但我不确定Windows Phone是否支持串口通信。如果没有，有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:39:47.927

使用 Android，您可以通过 USB 电缆使用串行通信。这取决于您的要求，但设置 USB 连接有时比管理蓝牙连接更容易。

它是由你决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:36:06.060

您无法使用 windows phone 7 执行此操作，但使用 windows phone 8 您可以访问蓝牙 API，因此您可以尝试通过蓝牙进行串行连接。

# birt - Birt Report：如果行内容太大，则重复页面

> ID：13683691
> 
> 赞同：1
> 
> 时间：2012-12-03T12:54:02.223
> 
> 标签：birt

我使用 Birt Report Engine 生成复杂的 PDF（报告）文档。我的页面布局包含网格和表格。表格行内容的来源是用户定义的 xml 文档。如果这个内容太长，Birt会产生很多重复的页面。假设该行的内容构成 3 个 PDF 页面，那么 Birt 生成 3 次 3 页面的内容：

```
page 1: content part 1, page number 1
page 2: content part 2, page number 1
page 3: content part 3, page number 1
page 4: content part 1, page number 2
page 5: content part 2, page number 2    
page 6: content part 3, page number 2
page 7: content part 1, page number 3
and so on 
```

（*page*是 PDF 文档中的实际页码，*页码*是在页面上显示为页码的数字）

我已经尝试过设置

```
options.setOption(IPDFRenderOption.PAGE_OVERFLOW, IPDFRenderOption.OUTPUT_TO_MULTIPLE_PAGES); 
```

有所有可用的选项，但没有改变输出。

我的文档的 HTML 版本看起来不错。

有谁知道如何处理这些重复的页面？

提前非常感谢！

# html - CSS浮动最小宽度和边距

> ID：13683695
> 
> 赞同：5
> 
> 时间：2012-12-03T12:54:09.263
> 
> 标签：html, css-float, css

我希望你能帮助解决一个让我发疯几个小时的问题。我正在尝试为搜索引擎设计一个页面，该页面可以添加 X 个条件，然后执行搜索。我试图让标准框根据标准的数量和屏幕分辨率重新调整大小。我希望它以初始大小加载，然后根据添加的内容调整自身大小，以便下方的搜索按钮和搜索结果向下移动。现在，我可以使用 a 来执行此操作 `min-width:100%`，但这会产生滚动条，并且文本会溢出到页面右侧，因为我正在使用 a`margin-left:340px;`将此框向右移动，因为它的左侧还有另一个框，`searchList`.

删除 min-width 会导致滚动条消失，但在添加元素之前不会绘制框。添加一个元素会导致绘制一个小盒子，只有在添加几个元素后，整个盒子才会变成正确的大小。有什么方法可以让我将盒子横向移动并使其与页面的其余部分保持一致，实现这一目标的最佳方法是什么？

在chrome和firefox上都是一样的。

我说的盒子是`<div id="searchCriteria"></div>`。完整代码如下。我真的很感激任何帮助:)

```
<html>
<head>
<style type="text/css"> 

body {
padding:0px;
margin:0px;
}

#content {
min-width:950px;
}

#header {
height:130px;
background-color:blue;
}

#searchList {
width: 300px;
height: 400px;
background-color:green;
position:absolute;
}

#searchCriteria {
background-color:red;
float:left;
min-height:400px;
min-width: 100%;
margin-left: 340px;
}

#searchResults {
background-color:purple;
height: 800px;
width: 100%;
float:left;
}

.criteria {
border: 1px solid black;
padding: 10px;
margin: 10px;
float: left;
width: 400px;

}

#buttonAndStatus {
float:left;
background-color:pink;
width:100%;
text-align:center;
}

</style>

<script type="text/javascript">

function add(){
    $("#searchCriteria").append("<p class=\"criteria\">This is a bit of search criteria.</p>");
}

</script>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
</head>
<body>
    <div id="header">fasdfasdfasdf asdf asdf asdf asdf asdf asdf </div>
    <div id="content">
            <div id="searchList">
                <input type="button" name="button" Value="Click me" onClick="add()">
            </div>
            <div id="searchCriteria"></div>
            <div id="buttonAndStatus"><input type="button" name="button" Value="Search "></div>
            <div id="searchResults">asdf asdf asdf asdf </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:33:28.243

您正在获得水平滚动，因为您告诉浏览器的宽度至少为 100%。刚刚对其进行了测试，它适用于 max-width 而不是 min-width 并添加您将拥有的最小宽度的 min-width，即：

```
#searchCriteria {
    background-colour:red;
    float:left;
    min-height:400px;
    min-width:350px; /*min width of criteria box*/
    max-width:100%; /*you don't want the width to be more 100%*/
    margin-left:340px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:55:38.463

```
<html>
<head>
<style type="text/css">

body {
padding:0px;
margin:0px;
}

<!--
#content {
min-width:950px;
}
-->

#header {
height:130px;
background-color:blue;
}

#searchList {
width: 300px;
height: 400px;
background-color:green;
position:absolute;
display:block;
}

#searchCriteria {
background-color:red;
float:left;
min-height:400px;
width: 100%;
<!--
margin-left: 340px;
-->
}

#searchResults {
background-color:purple;
height: 800px;
width: 100%;
float:left;
}

.criteria {
border: 1px solid black;
padding: 10px;
margin: 10px;
float: left;
width: 400px;

}

#buttonAndStatus {
float:left;
background-color:pink;
width:100%;
text-align:center;
}

ul.columns {
    display:block;
    float:left;
    width:100%;
    margin:0px;
    padding:0px;
    list-type-style:none;
}

ul.columns > li {
    display:block;
    float:left;
    width:100%;
    margin:0px;
    padding:0px;
}

ul.columns li.auto {
    min-width:400px;
}

ul.columns li.auto.searchCriteria {
    padding-left:300px;
}

</style>

<script type="text/javascript">

function add(){
    $("#searchCriteria").append("<p class=\"criteria\">This is a bit of search criteria.</p>");
}

</script>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
</head>
<body>
    <div id="header">fasdfasdfasdf asdf asdf asdf asdf asdf asdf </div>
<!--
    <div id="content">
-->
        <ul class="columns">
            <li class="auto">
                <div id="searchList">
                    <input type="button" name="button" Value="Click me" onClick="add()">
                </div>
            </li>

            <li class="auto searchCriteria">
                <div id="searchCriteria"></div>
            </li>

            <li>
                <div id="buttonAndStatus"><input type="button" name="button" Value="Search "></div>
            </li>

            <li>
                <div id="searchResults">asdf asdf asdf asdf
                    <ul>
                        <li>blah</li>
                        <li>blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah </li>
                    </ul>
                </div>
            </li>
        </ul>
<!--
    </div>
-->
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T13:58:39.090

嗨，使内容适合页面使用`width:100%`和`min-width`。`#content`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T13:59:14.830

如果你漂浮`#searchList`，不漂浮`#searchCriteria`呢？（因此不再需要`min-width: 100%`on `#searchCriteria`。）这是否提供了您正在寻找的布局？

*   [http://jsfiddle.net/uDtJ3/1/](http://jsfiddle.net/uDtJ3/1/)

# cocos2d-iphone - Cocos2D 中的 UITextField

> ID：13683698
> 
> 赞同：0
> 
> 时间：2012-12-03T12:54:15.987
> 
> 标签：cocos2d-iphone, uitextfield

我在 CCLayer 的“init”方法中编写了这段代码：

```
//textField
    UITextField *tf = [[[UITextField alloc] init] autorelease];
    tf.borderStyle = UITextBorderStyleRoundedRect;
    CCUIWrapper *tfwrapper = [CCUIWrapper wrapperForUIView:tf];
    tfwrapper.anchorPoint = ccp(0, 0);
    tfwrapper.contentSize = CGSizeMake(100, 20);
    tfwrapper.position = ccp(100, 100);
    [self addChild:tfwrapper]; 
```

为什么 UITextField 不可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-01T19:52:31.907

1.  不知道 CCUIWrapper 是怎么回事，但您现在可能想尝试 CCTextField 而不是这种方法。
2.  尝试设置 UITextField 的 .preferredsize。

# javascript - 灰显基于 xml 文件的选择选项

> ID：13683700
> 
> 赞同：0
> 
> 时间：2012-12-03T12:54:27.543
> 
> 标签：javascript, jquery, html

我有一个这样的 XML 文件

```
<?xml version="1.0" standalone="no" ?>
<Reading>
<Item Time="17:35">
    <SlaveAddress />
    <Slave_4 Value="0" />
    <Slave_3 Value="0" />
    <Slave_2 Value="0" />
    <Slave_1 Value="1" />
</Item>
</Reading> 
```

我的下拉列表看起来像这样

```
<select id="comboBox" style="width:100px;" tabindex="1">
 <option value=""></option>
 <option value="1">1</option>
 <option value="2">2</option>
 <option value="3">3</option>
 <option value="4">4</option>
</select> 
```

`<select>` `<option>`是否可以根据该 XML 文件将任何内容变灰？这意味着如果`Slave_1`的值为 1`<option>`则启用 1，如果`Slave_2`为 0`<option>`则禁用 2 或显示为灰色。

然后用户可以根据任何启用的选项做出选择。

我很想从你那里得到任何意见。Javascript 或 JQuery 无关紧要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:10:52.123

像这样的东西应该可以解决问题。解析 xml，mjQueryfy 它，遍历它，取出正确的东西并根据需要禁用或启用

```
var xml = $.parseXML('your_xml_as_a_string_or_whatever');
var $xml = $(xml);

$xml.find('Item').children().each(function(index, value) {
  var $this = $(this);
  var tagName = $this.prop('tagName').toLowerCase();
  if (tagName.indexOf("slave_") === 0) {
    var value = $this.attr('Value');
    var number = tagName.slice(-1);
    if (value === '0') {
      $('option[value="'+number+'"]').attr('disabled', 'disabled');
    } else {
      $('option[value="'+number+'"]').removeAttr('disabled');
    }
  }
}); 
```

# c# - c# 中 volatile 关键字的用途是什么？

> ID：13683702
> 
> 赞同：6
> 
> 时间：2012-12-03T12:54:27.813
> 
> 标签：c#, multithreading

`Volatile`我想看看c#中关键字的实时使用。但我无法举出最好的例子。下面的示例代码在没有`Volatile`关键字的情况下工作怎么可能？

```
class Program
{
    private static int a = 0, b = 0;

    static void Main(string[] args)
    {
        Thread t1 = new Thread(Method1);
        Thread t2 = new Thread(Method2);

        t1.Start();
        t2.Start();

        Console.ReadLine();
    }

    static void Method1()
    {
        a = 5;
        b = 1;
    }

    static void Method2()
    {
        if (b == 1)
            Console.WriteLine(a);
    }
} 
```

在上面的代码中，我得到的值为 5。它如何在不使用 volatile 关键字的情况下工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T13:00:20.720

关键字告诉编译器`volatile`变量可以随时更改，因此它不应该优化变量的读取和写入。

考虑这样的代码：

```
int sum;
for (var i = 0; i < 1000; i++) {
  sum += x * i;
} 
```

由于变量`x`在循环内不会改变，编译器可能会在循环外读取一次变量，并在整个循环中使用相同的值。

如果将变量`x`设为 volatile，编译器将在每次使用变量时读取该变量的值，因此如果您在不同的线程中更改该值，则新值将立即使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T13:00:08.013

如果你使用`volatile`得当，你的代码保证可以工作。如果您遗漏了`volatile`代码需要它的地方，它可能大部分时间都可以正常工作，但不能保证，并且可能会在伤害最大的时候失败。

了解带有线程竞争的代码如何失败或不失败需要对实现和平台有深入的了解。这并不简单，通常不值得担心。只要遵守规则，你的代码就会一直有效。

# php - Jquery / PHP - ajax 发布和编码

> ID：13683707
> 
> 赞同：2
> 
> 时间：2012-12-03T12:54:54.773
> 
> 标签：php, javascript, jquery, ajax, codeigniter

我正在尝试使用 ajax post 发送一个 url 字符串，但不知道为什么该字符串是自动编码 (%25) 或省略

网址 = [http://www.domain.com.br/berco-elegance-wave-verde-ayoba%2521-6343.html](http://www.domain.com.br/berco-elegance-wave-verde-ayoba%2521-6343.html)

php 接收： http: [//www.domain.com.br/berco-elegance-wave-verde-ayoba%21-6343.html](http://www.domain.com.br/berco-elegance-wave-verde-ayoba%21-6343.html)

我用 Firebug 检查发布数据并且 url 字符串已经更改： POST DATA url: [http://www.domain.com.br/berco-elegance-wave-verde-ayoba%21-6343.html](http://www.domain.com.br/berco-elegance-wave-verde-ayoba%21-6343.html)

我的jQuery代码：

```
function save_competitor() {
$.ajax({
    type: "post",
    url: "<?php echo base_url();?>admin/storeproduct/insert_competitor",
    data: "url="+$("#url"),
    dataType:"json",
    contentType : "application/x-www-form-urlencoded; charset=UTF-8",
    success: function (data) {
        if(data.success){
            alert('ok');
        }else{
            alert('error');
        }
    },
    error: function (request, status, error) {
        if(status=='parsererror')
            window.location.href = 'auth/login/';
    }
});
} 
```

HTML：

```
<input type="text" id="url" name="url" value="http://www.domain.com.br/berco-elegance-wave-verde-ayoba%2521-6343.html"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:03:49.860

你`data`从已经编码的 html 文本中得到你的。您能告诉我们您的 $("#url") html 代码的部分是什么样的吗？

编辑 ：

功能 ：

```
function urldecode(str) {
    return decodeURIComponent((str+'').replace(/\+/g, '%20'));
} 
```

用法 ：

`data: "url="+urldecode($("#url").text());`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:04:13.147

URL 结束引用：

```
space   %20
    !   %21
    "   %22
    #   %23
    $    %24
    %   %25
    &   %26
    '   %27
    (   %28
    )   %29
    *   %2A
    +   %2B
    ,   %2C
    -   %2D
    .   %2E
    /   %2F
   ..... 
```

**[encodeURIComponent](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)**和**[decodeURIComponent](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/decodeURIComponent)**将解决此问题

```
encodeURIComponent(url);
decodeURIComponent(url) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T13:01:36.760

$("#url") 不是返回一个元素吗？

```
$("#url").val()
or
$("#url").attr('href') 
```

# android - 我如何在android中替换我的数据库文件？

> ID：13683710
> 
> 赞同：0
> 
> 时间：2012-12-03T12:55:01.443
> 
> 标签：android, sqlite

我正在尝试使用新的数据库文件更新我在商店中的应用程序....但是当我尝试运行它时出现错误...

我认为我的代码有问题...

```
 class DatabaseUtilities  {
 public static void createDatabaseIfNotExists(Context context)
            throws IOException {
        boolean createDb = false;
        File dbDir = new File(AppConstants.DB_PATH);
        File dbFile = new File(AppConstants.DB_PATH + AppConstants.DB_NAME);
        if (!dbDir.exists()) {
            dbDir.mkdir();
            createDb = true;
        } else if (!dbFile.exists()) {
            createDb = true;
        } else {
            boolean doUpgrade = true;

            if (doUpgrade) {
                dbFile.delete();
                createDb = true;

            }
        }

        if (createDb) {
            InputStream myInput = context.getAssets().open("altibbi.db");
            OutputStream myOutput = new FileOutputStream(dbFile);
            byte[] buffer = new byte[1024];
            int length;
            while ((length = myInput.read(buffer)) > 0) {
                myOutput.write(buffer, 0, length);
            }
            myOutput.flush();
            myOutput.close();
            myInput.close();
        }
    }

    public static SQLiteDatabase getDatabase() {
        return SQLiteDatabase.openDatabase(AppConstants.DB_PATH
                + AppConstants.DB_NAME, null,
                SQLiteDatabase.NO_LOCALIZED_COLLATORS);
    }

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:01:15.050

你为什么不通过使用[`SQLiteOpenHelper`](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)和它的[`onUpgrade()`](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onUpgrade%28android.database.sqlite.SQLiteDatabase,%20int,%20int%29)回调来简化你的代码呢？

# groovy - 使用 Neo4J Graph-DB 在 Gremlin 中持久化自定义步骤

> ID：13683715
> 
> 赞同：0
> 
> 时间：2012-12-03T12:55:28.363
> 
> 标签：groovy, neo4j, gremlin

我正在通过 gremlin 控制台使用“gremlin-groovy 2.1.0”连接到 Neo4J-DB：

```
gremlin> g = new Neo4jGraph('/home/user/neo4j-enterprise-1.7.2/data/graph.db') 
```

到目前为止没有问题。现在我想通过创建一些客户步骤

```
gremlin> Gremlin.defineStep('example', ...) 
```

自定义步骤工作正常，但在与 neo4j-DB 断开连接并退出后：

```
gremlin> g.shutdown()
gremlin> exit 
```

并重新连接到数据库，自定义“示例”不可用。

所以我的问题是，如何存储通过 Gremlin.defineStep 定义的自定义步骤持久化？并且是否有可能将defineStep（）代码保存在一个文件中，也许在gremlin-lib目录中，以便每次我需要时都使用这个自定义步骤？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:00:35.957

使用 defineStep() 不会将您的步骤保留在图表本身中。它只是使用 groovy 的动态编程工具来扩展语言。因此，您的自定义步骤仅在您运行 defineStep 的 Gremlin 实例中可用。从这个意义上说，没有办法在全局范围内“保留”一个步骤。

但是，您可以简单地将包含步骤和其他有用功能的脚本保存在 .groovy 文件中，然后使用控制台加载功能在 gremlin 提示符处加载它，例如：

`\. path/to/my-custom-steps-and-functions.groovy`

Gremlin 中存在为 Gremlin 和 Rexster 自动执行此过程的未解决问题，因此您可以预期，在未来的 TinkerPop 版本中，可以在启动时触发这样的脚本加载，以便它可以直接运行会议开始。

# vbscript - 对 shell 对象项进行排序

> ID：13683725
> 
> 赞同：0
> 
> 时间：2012-12-03T12:56:11.523
> 
> 标签：vbscript

我有一个包含文件的文件夹，并且在脚本中：

```
Set shObj=CreateObject("shell.Application")
Set shFold=shObj.NameSpace(FolderName)
Set shFiles=shFold.Items 
```

之后`shFiles`打印：

```
For each printfile in shFiles
  printfile.InvokeVerbEx "Print"

....so on...

Next 
```

我需要对抓取的这些文件的列表进行排序，`shFold.Items`以便我知道它们 `For each printfile in shfiles`会按字母顺序打印出来。

有什么建议吗？

谢谢你。

# javascript - three.js - 行旁边的文本

> ID：13683727
> 
> 赞同：4
> 
> 时间：2012-12-03T12:56:20.563
> 
> 标签：javascript, three.js

我在一个场景中有一个管道几何图形，它是根据作为 JSON 加载的数据构建的。我必须在每个段上放置一条线作为标记。为此，我将面的质心作为起点，并在质心的每个坐标上添加 10 作为线的终点。

[请用线](http://jsfiddle.net/RnFqz/13/)找到管的jsfiddle

请在下面找到从面部中心添加线条的代码。

```
var lineGeo, lineMat, line;
var fx=tube.faces[3].centroid.x;
var fy=tube.faces[3].centroid.y;
var fz=tube.faces[3].centroid.z;
lineGeo = new THREE.Geometry();
lineGeo.vertices.push(new THREE.Vector3(fx, fy, fz), new THREE.Vector3(fx+50, fy+50, fz+50));

lineMat = new THREE.LineBasicMaterial({color: 0x000000, lineWidth: 2});                 
line = new THREE.Line(lineGeo, lineMat);
line.type = THREE.Lines;
tubeMesh.add(line); 
```

现在如何将文本放在行尾？在生产环境中，管是用 2000 个坐标构建的，并且将有 200 条线作为标记。我必须将文本放在每个标记（行）的末尾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:14:03.530

你为什么不拿你的线的坐标，应用一些偏移量，然后在它上面建一个平面。这样您就可以在该平面上显示带有文本的纹理。稍后，只需将“不透明度”参数默认设置为“0”，然后在您选择脸部时将其返回为“1”。并且有几种方法可以制作这些纹理：

1）您可以将所有文本作为图像导入（这不是您的情况，因为您将有超过 200 个）。

2）您可以创建画布元素，使用 CSS 在其上绘制一些文本，然后使用此画布作为某个平面的纹理。个人认为这是您情况的最佳解决方案，因为生成实时 3D 动态文本只会让您的 fps 陷入困境。

所以首先你创建新的画布元素：

```
texture_placeholder = document.createElement( 'canvas' );
texture_placeholder.width = 100;
texture_placeholder.height = 20; 
```

然后在画布内设置一些文本：

```
var context = texture_placeholder.getContext( '2d' );
context.fillStyle = '#f00'; 
context.textAlign = "center";
context.textBaseline = "middle";           
context.font = ' bold 150px';             
context.fillText('This is the 3rd face!', texture_placeholder.width / 2, texture_placeholder.height / 2); 
```

然后基于画布创建纹理：

```
var texture = new THREE.Texture( texture_placeholder );
texture.needsUpdate = true;
var material = new THREE.MeshBasicMaterial( { map: texture, overdraw: true, side:THREE.DoubleSide } ); 
```

最后，设置你的新平面网格：

```
var plane = new THREE.PlaneGeometry( 100, 20 );
var text = new THREE.Mesh( plane, material ) 
```

希望有帮助！这是您的示例：http: [//jsfiddle.net/WT6jL/1/](http://jsfiddle.net/WT6jL/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T22:06:19.970

这是另一个完整的详细示例，它从文本在画布元素上创建图像，然后将该图像作为纹理应用到 three.js：

[http://stemkoski.github.com/Three.js/Texture-From-Canvas.html](http://stemkoski.github.com/Three.js/Texture-From-Canvas.html)

希望能帮助到你！

# android - 在相机意图中获取 onActivitystart 中数据的空值

> ID：13683729
> 
> 赞同：0
> 
> 时间：2012-12-03T12:56:27.447
> 
> 标签：android, android-intent

我总是在 OnActivityResult 方法中获取数据的空值。我尝试使用没有附加功能的意图，但这对我也不起作用。

```
package com.mypack;

import java.io.ByteArrayOutputStream;

import android.app.Activity;
import android.content.ContentValues;
import android.content.Intent;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.View;
import android.widget.Button;

public class PhotoUploadRecommenderActivity extends Activity {

    private Button accettoButton;
    private static final int CAM_REQUEST = 1337;
    private Uri mCapturedImageURI;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.photo_upload_recommendation);

        setUpView();

    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        super.onActivityResult(requestCode, resultCode, data);

          if (requestCode == CAM_REQUEST && resultCode == RESULT_OK) {
             // Bitmap thumbnail = (Bitmap) data.getExtras().get("data");
              //imgTakenPhoto.setImageBitmap(thumbnail);

              String[] projection = { MediaStore.Images.Media.DATA}; 
              Cursor cursor = managedQuery(mCapturedImageURI, projection, null, null, null); 
              int column_index_data = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA); 
              cursor.moveToFirst(); 
              String capturedImageFilePath = cursor.getString(column_index_data);

               // your bitmap
              ByteArrayOutputStream bs = new ByteArrayOutputStream();
              //thumbnail.compress(Bitmap.CompressFormat.PNG, 0, bs);

              Intent intent = new Intent(getApplicationContext(),PhotoPreviewActivity.class);
              intent.putExtra("byteArray", capturedImageFilePath);

              startActivity(intent);
          }
    }

    private void setUpView() {

        accettoButton = (Button)findViewById(R.id.accetto_button);
        accettoButton.setOnClickListener(new btnTakePhotoClicker());

    }

    class btnTakePhotoClicker implements Button.OnClickListener
    {

        public void onClick(View v) {

            String fileName = "temp.jpg";  
            ContentValues values = new ContentValues();  
            values.put(MediaStore.Images.Media.TITLE, fileName);  
            mCapturedImageURI = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);  

            Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, mCapturedImageURI);  
            startActivityForResult(cameraIntent,CAM_REQUEST);
        }
    }

} 
```

我想使用相机意图捕捉图像。我收到此错误，其中还包括我的光标上的空指针异常。

```
java.lang.RuntimeException: Unable to resume activity {com.mypack/com.mypack.PhotoUploadRecommenderActivity}: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1337, result=-1, data=null} to activity {com.mypack/com.mypack.PhotoUploadRecommenderActivity}: java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:15:48.077

```
intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
mImageCaptureUri = Uri.fromFile(new File(Environment.getExternalStorageDirectory(),
                   "tmp_avatar.jpg"));
intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, mImageCaptureUri);
startActivityForResult(intent, 1); 
```

活动结果：

```
Bundle extras = data.getExtras();
if (extras != null) {               
usrPic = extras.getParcelable("data");
    if(usrPic != null){
        imageView.setImageBitmap(usrPic);
} 
```

# asp-classic - 带有函数或子的 vbScript eval()

> ID：13683731
> 
> 赞同：0
> 
> 时间：2012-12-03T12:56:43.193
> 
> 标签：asp-classic, vbscript

我正在尝试完成以下任务：

假设我有一个`myFunc(sStr)`返回值的函数。

我想动态调用该函数，我相信我可以通过使用 vbScript Functions`eval()`或`execute()`.

```
Function myFunc(fString)
    myFunc = "some text in a string. " & fString
End Function 
```

我想通过这样的方式来称呼它：

```
sDoThis = "response.write myFunc(""blah blah. "")"
execute(sDoThis) 
```

这似乎不起作用（例如，我传入要执行的字符串的部分）。

我需要要执行的字符串是动态的。

有谁知道这是否/如何可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T13:35:34.657

您应该使用`GetRef()`来获取“函数指针”的 VBScript 变体：

```
Option Explicit

Function appendString(sAppend)
  appendString = "constant head " & sAppend
End Function

Dim oFncPtr     : Set oFncPtr = GetRef("appendString")
Dim sFullString : sFullString = oFncPtr("and variable tail")

WScript.Echo sFullString 
```

输出：

```
constant head and variable tail 
```

这避免了 Eval()/Execute 的低效率和安全风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T14:51:47.983

暗影法师是对的。我还有其他一些语法问题。它确实有效。谢谢大家的帮助。

# objective-c - 支持所有方向xcode

> ID：13683733
> 
> 赞同：0
> 
> 时间：2012-12-03T12:56:47.610
> 
> 标签：objective-c, ios, xcode, orientation

我以编程方式创建了所有视图，IB 没有。我的视图包含导航控制器、表格视图、按钮、标签栏。现在我应该如何让我的应用程序支持 iOS 5 和 iOS 6 的所有方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:48:18.720

这在 iOS 6 中已更改：

```
- (NSInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:59:38.007

把这个写在你所有的`UIViewController`-s 中：

```
- (NSInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
}
- (BOOL)shouldAutorotate {
    return YES;
}
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T13:01:58.733

您是否尝试设置项目目标的摘要窗格中支持的设备方向，如附图所示？

![在此处输入图像描述](../Images/9a330d7d770e9f00f6e61b5b57591cda.png)

# sql - 识别行中的重复记录

> ID：13683734
> 
> 赞同：-1
> 
> 时间：2012-12-03T12:56:58.553
> 
> 标签：sql, duplicates, record

信息表如下：

```
ID   Period   Deposit_amount   Flag
10   201001   2000             1
10   201002   2000             1
10   201003   1000             1
10   201204   7000             0
10   201205   7000             0 
```

在这个表中包含了每个月客户存款金额的信息，我决定在金额`<4000 (1)`和金额上加上标志`>=4000 (0)`，你可以看到那个时期`201001 - 201003`连续 3 个月有 1 个标志。

请帮我识别这3条记录中的重复记录组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:25:47.297

如果我理解得很好，你想找到 Flag = 1 的重复行吗？类似的东西：

```
SELECT DISTINCT *
FROM your_table_name A
WHERE  EXISTS (
    SELECT *
    FROM your_table_name B
    WHERE A.ID <> B.ID AND Flag = 1 AND A.Deposit_amount = B.Deposit_amount
) 
```

您可以更改 sql 以满足您的需要......我希望您的 ID 不完全相同，因为那是行不通的。

# eclipselink - 在测试环境中使用 Eclipselink 和 h2 生成序列时出现异常

> ID：13683737
> 
> 赞同：3
> 
> 时间：2012-12-03T12:57:02.513
> 
> 标签：eclipselink, integration-testing, h2, jboss-arquillian, weblogic12c

我正在使用 h2 为使用 Eclipselink、Arquillian 和 Weblogic 12.1.1 的应用程序设置集成测试

这是我的实体：

```
@Entity
@Table(name = "AFIS_REQUEST")
public class Request implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "requestSEQ")
    @SequenceGenerator(name = "requestSEQ", sequenceName = "REQUEST_ID_SEQ", allocationSize = 1)
    @Column(name = "ID")
    private Long id;
...
} 
```

这是我的persistence.xml

```
<persistence-unit name="myPU" transaction-type="JTA">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <jta-data-source>jdbc/arquillian</jta-data-source>
        <class>com.my.Request</class>
        <exclude-unlisted-classes>true</exclude-unlisted-classes>
        <validation-mode>NONE</validation-mode>
        <properties>
            <property name="eclipselink.ddl-generation" value="drop-and-create-tables"/>            
            <property name="eclipselink.logging.level.sql" value="FINEST"/>
            <property name="eclipselink.logging.parameters" value="true"/>
            <property name="eclipselink.target-database" value="org.eclipse.persistence.platform.database.H2Platform"/>
        </properties>
    </persistence-unit> 
```

这是我在 Weblogic 数据源中指定的 JDBC URL 和 Driver 类：

*   jdbc:h2:文件:目标/数据库/h2/db
*   org.h2.jdbcx.JdbcDataSource

但是当我开始测试时，我得到以下异常：

```
<Dec 3, 2012 3:58:23 PM IRST> <Warning> <EclipseLink> <BEA-2005000> <2012-12-03 15:58:23.217--ServerSession(16406343)--Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: org.h2.jdbc.JdbcSQLException: Sequence "REQUEST_ID_SEQ" not found; SQL statement:
CALL NEXT VALUE FOR REQUEST_ID_SEQ [90036-166]
Error Code: 90036
Call: CALL NEXT VALUE FOR REQUEST_ID_SEQ
Query: ValueReadQuery(sql="CALL NEXT VALUE FOR REQUEST_ID_SEQ")> 
```

因为我希望在开始测试时创建表，并在完成分配`drop-and-create-tables`给`eclipselink.ddl-generation`属性的测试时删除表。但似乎 Table 已生成，但它的序列不是由 Eclipselink 创建的。

h2 是否支持生成序列？还是我缺少任何配置？

**编辑：** 我检查了生成的 DDL，它显示创建序列语句已生成。

```
CREATE TABLE REQUEST (ID BIGINT NOT NULL, ... , PRIMARY KEY (ID))
CREATE SEQUENCE REQUEST_ID_SEQ START WITH 1 
```

然后我使用 H2 Web 控制台连接到生成的数据库，看到生成了序列，我可以在`CALL NEXT VALUE FOR REQUEST_ID_SEQ`那里成功执行！

那么为什么 Eclipselink 抱怨它！？`Sequence "REQUEST_ID_SEQ" not found;`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-16T15:35:14.580

我遇到了同样的问题，我设法让它工作，只需将此行添加到您的持久性文件中：

```
<property name="eclipselink.target-database" value="org.eclipse.persistence.platform.database.H2Platform"/> 
```

它必须是 的第一个属性`<properties>`。

请注意，您仍然会收到警告。

我在[这里找到了解决方案](http://h2database.com/html/tutorial.html#using_eclipselink)

# flash-cs5 - Flash 项目无法正确显示文本

> ID：13683745
> 
> 赞同：0
> 
> 时间：2012-12-03T12:57:23.630
> 
> 标签：flash-cs5

目前我正在修复一个已有 3 年历史的 Flash 项目。我正在使用 Flash 专业 CS5。问题是文本显示不正确；文本字段中似乎省略了字符。

*   “Hoi welkom bij deze groep”显示为“oi elkom bij deze groep”。
*   “MEIJUH”显示为“gi”
*   “De connectie met de server is verbroken”显示为“e connectie met de serer is erbroken”

请注意，这些字符串是荷兰语，但我认为这不是编码问题。上面的字符串在项目中是“硬编码的”（或任何你称之为的）。

我认为 3 年前该项目最初是在早期版本的 Adob​​e CS 中创建的。

修复文本字段中正确显示文本的解决方案可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:02:35.710

所以我设法解决了这个问题。我需要嵌入所有样式（不仅仅是常规）。

我在 Text | 下做了这个 字体嵌入...

# asp.net - 在 asp.net 中绘制一个多边形

> ID：13683748
> 
> 赞同：3
> 
> 时间：2012-12-03T12:57:30.050
> 
> 标签：asp.net, html, polygon

我需要在我的网站中使用箭头图片，所以我决定用 asp.net 用线条画它，但我不知道该怎么做。如何用 asp.net 绘制多边形？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:00:54.830

创建一个 javascript 方法，绘制多边形并使用[注册方法从 Asp.Net 端注册它](http://www.codeproject.com/Articles/19484/Register-Client-script-in-ASP-NET)

```
function DrawPolygon()
{
   var context = canvas.getContext('2d');
   context.fillStyle = '#f00';
   context.beginPath();
   context.moveTo(0, 0);
   context.lineTo(100,100);
   context.lineTo(50, 100);
   context.lineTo(10, 10);
   context.closePath();
   context.fill();
} 
```

# java - 尝试将 Quercus 上传到托管服务器时遇到错误

> ID：13683749
> 
> 赞同：1
> 
> 时间：2012-12-03T12:57:35.573
> 
> 标签：java, php, jsp, tomcat, quercus

我是 Quercus 的新手，我正在尝试在我的 TOMCAT 主机上运行 PHP。

在我的本地 tomcat 服务器上一切正常，但是，在我将它上传到我的托管服务器（EATJ）后，我有以下错误：

```
java.lang.NoClassDefFoundError: Could not initialize class com.caucho.vfs.FilePath
at com.caucho.quercus.servlet.QuercusServletImpl.init(QuercusServletImpl.java:87)
at com.caucho.quercus.servlet.QuercusServlet.initImpl(QuercusServlet.java:531)
at com.caucho.quercus.servlet.QuercusServlet.init(QuercusServlet.java:441)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:274)
at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:271)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAsPrivileged(Subject.java:536)
at org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:306)
at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:166)
at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:120)
at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1260)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:857)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:135)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

并且：

```
java.security.AccessControlException: access denied (java.util.PropertyPermission user.dir read)
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:323)
    at java.security.AccessController.checkPermission(AccessController.java:546)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
    at java.lang.SecurityManager.checkPropertyAccess(SecurityManager.java:1285)
    at java.lang.System.getProperty(System.java:652)
    at com.caucho.vfs.Path.getUserDir(Path.java:1593)
    at com.caucho.vfs.FilePath.getPwd(FilePath.java:115)
    at com.caucho.vfs.FilePath.initialPath(FilePath.java:94)
    at com.caucho.vfs.FilePath.<init>(FilePath.java:75)
    at com.caucho.vfs.Path.<clinit>(Path.java:1665)
    at com.caucho.quercus.servlet.QuercusServletImpl.init(QuercusServletImpl.java:87)
    at com.caucho.quercus.servlet.QuercusServlet.initImpl(QuercusServlet.java:531)
    at com.caucho.quercus.servlet.QuercusServlet.init(QuercusServlet.java:441)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:274)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:271)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
    at org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:306)
    at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:166)
    at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:120)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1260)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:857)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:135)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619) 
```

想知道是否有人以前做过这个并且可以帮助我。

# javascript - 回调未定义

> ID：13683753
> 
> 赞同：0
> 
> 时间：2012-12-03T12:57:50.130
> 
> 标签：javascript, jquery, callback

在这段代码中，我有一个`callback undefined`错误：

```
function getPacakage(callback){
var sendurl={address:'http://ip/bms/data.php?result=10&order=28'}
var temp_selpkg_group=[];
var temp=[];

    $.ajax({
        type:"GET",
        url:"dummycall.php",
        data:sendurl,

        success:function(xml){              

            pkg_sel[0] = $(xml).find('test1').text();
            pkg_sel[1] = $(xml).find('test2').text();
            pkg_sel[2] = $(xml).find('test3').text();
            $(xml).find('packageitem').each(function(){
                temp_selpkg_group=[];
                temp_selpkg_group[0]=$(this).find('group').text();
                temp_selpkg_group[1]=$(this).find('Qty').text();
                temp[cnt_pkgitem]=temp_selpkg_group;
                cnt_pkgitem++;                  
            });

            callback.call(null,temp);
        },//sucess ends

        error: function(){
            alert("An error occurred while processing XML file.");
        }   //error ends..  

    }); //ajax ends...  

} 
```

这是我调用该函数的方式：

```
$(document).ready(function (){
    $(function() {
        $( "#accordion" ).accordion();
    });     

    getPacakage(function(temp){
        sel_pkg_group=temp;
        fillOptionList();
    });

});//document ready ends.. 
```

如果我刷新页面 ( `Ctrl`+ `F5`) 2 到 3 次，则显示数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:47:13.197

删除以下行 -

```
callback.call(null,temp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:15:39.533

由于 Ajax 是一个 asyc 任务，我们需要先完成一个 ajax 任务并调用函数以使用在 ajax 中初始化的数组，所以只需在 ajax 中添加**async:false**即可。

```
 $.ajax({
        type:"GET",
        url:"dummycall.php",
        data:sendurl,
        async: false,
        success:function(xml){  .............. 
```

这将停止异步，并且仅当一个完成时才会调用其他方法，这对我有用，可能对我的其他朋友有帮助，快乐编码

# c# - Newtonsoft JSON - 动态对象

> ID：13683757
> 
> 赞同：43
> 
> 时间：2012-12-03T12:58:02.537
> 
> 标签：c#, json, dynamic, deserialization, json.net

我正在使用 Newtonsoft JSON 库对传入的原始 JSON 执行动态反序列化，并发现了一些我无法解释的东西。

起点是以下 JSON 字符串：

```
{
  "task": {
    "dueDate": "2012-12-03T00:00:00"
  }
} 
```

那里没什么太复杂的...

然后在代码中我这样做：

```
var dyn = JsonConvert.DeserializeObject<dynamic>(rawJson);
DateTime dueDate = dyn.task.dueDate.Value; 
```

这段代码已经存在了几个月并且运行良好，但是在最近的测试版本中，我们看到了以下错误：

> “Newtonsoft.Json.Linq.JObject”不包含“任务”的定义
> 
> 堆栈跟踪：在 CallSite.Target(Closure , CallSite , Object ) at System.Dynamic.UpdateDelegates.UpdateAndExecute1[T0,Tret](CallSite site, T0 arg0)

现在这是变得奇怪的地方，如果我将上面的代码从以下位置更改，一切都会重新开始工作：

```
DateTime dueDate = dyn.task.dueDate.Value; 
```

至

```
DateTime dueDate = dyn["task"]["dueDate"].Value; 
```

所以，虽然这是“修复的”，但我不明白为什么会修复它以及可能的原因是什么。有没有人有任何想法

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-07T16:38:32.853

你可以试试这个：

```
dynamic task = JObject.Parse(rawJson); 
```

文档：[**使用动态查询 JSON**](http://www.newtonsoft.com/json/help/html/QueryJsonDynamic.htm)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-23T09:04:00.333

在我的情况下，结果证明我正在捕获第一次机会异常，因此尽管抛出了这个异常，但实际上并没有阻止我的代码执行。

很高兴知道为什么 Json.NET 反序列化的某些内容会发生这种情况，但不是所有内容。例如，我有一个动态对象，我在单元测试中使用 json.net 序列化，然后反序列化序列化的内容。序列化的内容看起来与在运行时导致抛出运行时绑定器异常的内容相同。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-10T18:39:59.180

我有同样的问题。

Json.NET 6.0.4 会导致此问题。您应该将其更改为 Json.Net 6.0.5。任何项目都不应引用 Json.NET 6.0.4 。

转到工具 -> NuGet 包管理器 -> 管理 NuGet 包以获取解决方案...并检查是否有任何项目使用 Json.NET 6.0.4，修复它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-19T18:26:20.543

这绝对是一些参考问题，我只是遇到了同样的问题，原来问题是我已经将包文件夹添加到项目中，以便我可以在 VSS 中签入它（对不起，强制性），只要我删除了来自visual studio的packages文件夹，它开始正常工作

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-09T04:53:28.820

我在使用 Json.NET 的应用程序中遇到了同样的问题。该问题仅在一台特定机器上再次出现，结果表明该机器在 GAC 中安装了另一个版本的 Json.NET。从 GAC 中删除后，该应用程序开始正常工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-21T19:21:34.513

我有这个问题持续了一段时间，事实证明，使用的 DLL 是为不支持动态的 .NET 3.5 编译的......确保你的 DLL 是为 .NET 4.5 及更高版本编译的

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-15T21:59:54.923

我有一个类似的问题，因为我有一个项目正在做很多动态的事情。

我将其范围缩小到...... JsonElement 和序列化。使用 Dynamic，底层类型存在，序列化为 JSON 应该将该对象序列化为什么？动态可以是：字符串、数字、日期时间、真、假等，所以他们也需要放一些元数据，这样当你引用动态时，它知道在序列化时

所以......当你序列化时，我相信动态会转换为 JsonElement - 指定一个 ValueKind 和一个 Value 作为属性。

当您反序列化时，事情变得复杂...... JSON 到 C# 将匹配类中的属性，如果它作为目标是动态的 - 需要根据 JSON 元素信息恢复动态。

这是事情变得模糊的地方，但我确定如果您查看序列化，并且您看到 ValueKind，那么您可能会在另一边遇到问题。

还要观看 Text.Json (MS) 反序列化和序列化，因为我相信它们是 newtonsoft 和 MS 如何处理动态序列化和反序列化的区别。

# android - Android SOAP IOException“BufferedInputStream 已关闭”

> ID：13683759
> 
> 赞同：4
> 
> 时间：2012-12-03T12:58:24.413
> 
> 标签：android, soap, ksoap2, ioexception, android-ksoap2

我正在使用 SOAP Web 服务开发一个 Android 应用程序。当请求的响应太长时，它会在线给我一个 IOException：`androidHttpTransport.call(SOAP_ACTION, envelope);`

我的代码：

```
try {
    SoapObject request = new SoapObject(Constants.NAMESPACE, METHOD_NAME);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.encodingStyle = "rpc";
    envelope.setOutputSoapObject(request);

    HttpTransportSE androidHttpTransport = new HttpTransportSE(Constants.WSDL);
    androidHttpTransport.debug = true;

    androidHttpTransport.call(SOAP_ACTION, envelope);

    Object result = (Object)envelope.getResponse();

    String results = result.toString();
    Log.e(TAG, "Result = "+results);
    return parseJson(results);

} catch (Exception e) {
    Log.e(TAG, "Error with SOAP", e);
    Log.e(TAG, e.getMessage());
    return new ArrayList<Route>();
} 
```

例外：

```
12-03 13:52:56.807: E/RoutesLoader(20272): Error with SOAP
12-03 13:52:56.807: E/RoutesLoader(20272): java.io.IOException: BufferedInputStream is closed
12-03 13:52:56.807: E/RoutesLoader(20272):  at java.io.BufferedInputStream.streamClosed(BufferedInputStream.java:118)
12-03 13:52:56.807: E/RoutesLoader(20272):  at java.io.BufferedInputStream.read(BufferedInputStream.java:279)
12-03 13:52:56.807: E/RoutesLoader(20272):  at java.util.zip.GZIPInputStream.readFully(GZIPInputStream.java:204)
12-03 13:52:56.807: E/RoutesLoader(20272):  at java.util.zip.GZIPInputStream.<init>(GZIPInputStream.java:98)
12-03 13:52:56.807: E/RoutesLoader(20272):  at java.util.zip.GZIPInputStream.<init>(GZIPInputStream.java:81)
12-03 13:52:56.807: E/RoutesLoader(20272):  at org.ksoap2.transport.HttpTransportSE.getUnZippedInputStream(HttpTransportSE.java:274)
12-03 13:52:56.807: E/RoutesLoader(20272):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:223)
12-03 13:52:56.807: E/RoutesLoader(20272):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:114)
12-03 13:52:56.807: E/RoutesLoader(20272):  at eu.akting.bidekide.content.RoutesLoader.downloadRoutes(RoutesLoader.java:51)
12-03 13:52:56.807: E/RoutesLoader(20272):  at eu.akting.bidekide.content.RoutesLoader.loadInBackground(RoutesLoader.java:36)
12-03 13:52:56.807: E/RoutesLoader(20272):  at eu.akting.bidekide.content.RoutesLoader.loadInBackground(RoutesLoader.java:1)
12-03 13:52:56.807: E/RoutesLoader(20272):  at android.support.v4.content.AsyncTaskLoader.onLoadInBackground(AsyncTaskLoader.java:240)
12-03 13:52:56.807: E/RoutesLoader(20272):  at android.support.v4.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:51)
12-03 13:52:56.807: E/RoutesLoader(20272):  at android.support.v4.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:40)
12-03 13:52:56.807: E/RoutesLoader(20272):  at android.support.v4.content.ModernAsyncTask$2.call(ModernAsyncTask.java:123)
12-03 13:52:56.807: E/RoutesLoader(20272):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
12-03 13:52:56.807: E/RoutesLoader(20272):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
12-03 13:52:56.807: E/RoutesLoader(20272):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
12-03 13:52:56.807: E/RoutesLoader(20272):  at java.lang.Thread.run(Thread.java:856)
12-03 13:52:56.807: E/RoutesLoader(20272): BufferedInputStream is closed 
```

有任何想法吗？解压缩响应时出现问题，但我不知道如何解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T10:24:29.420

也许尝试设置非标准超时值。例如：

```
HttpTransportSE androidHttpTransport = new HttpTransportSE(this.url,this.connectionTimeout) 
```

# tomcat - Tomcat 中部署的两个相同 JAXWS 的不同行为

> ID：13683763
> 
> 赞同：2
> 
> 时间：2012-12-03T12:58:29.770
> 
> 标签：tomcat, jax-ws

我已经实现了两个完全相同的 JAXWS。

Concat-WS 接受一个字符串 a 连接一个单词。Upshift-WS 接受一个字符串并将其升档。

我将它们部署在 Tomcat 中，并使用 wsimport 工具创建了两个 JAXWS 客户端。

当我运行 Concat 客户端时，它可以工作，但使用 Upshift 客户端时，它会抛出：

javax.xml.ws.WebServiceException：标头中没有内容类型！

我已经阅读了一些关于此的帖子。所有这些似乎都与[JBOSS](https://stackoverflow.com/questions/13193580/jax-ws-exception-javax-xml-ws-webserviceexception-no-content-type-in-the-hea)有关，这不是我的情况，此外，两个确切的 JAXWS 怎么会有不同的行为？

**编辑**

这是 Upshift 网络服务

```
package upshift;

import javax.jws.WebService;

@WebService(endpointInterface = "upshift.Upshift")
public class UpshiftImpl implements Upshift {

    @Override
    public String upshift(String x) {

        return x.toUpperCase();

    }
} 
```

这是 Concat 网络服务

```
package concat;

import javax.jws.WebService;

@WebService(endpointInterface = "concat.Concat")
public class ConcatImpl implements Concat {

    @Override
    public String concat(String x) {

        return x.concat("+concat");

    }
} 
```

**编辑二：**

我发现第二个 JAXWS 在导出为 WAR 时出现问题。每次我尝试将其导出为 WAR 时，我都会得到以下信息：

```
org.eclipse.core.commands.ExecutionException: Error exportingC:/Users/rmescalera/Desktop/WS-upshift.war
    at org.eclipse.jst.j2ee.internal.archive.operations.ComponentExportOperation.execute(ComponentExportOperation.java:150)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl$1.run(DataModelPausibleOperationImpl.java:385)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation(DataModelPausibleOperationImpl.java:410)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation(DataModelPausibleOperationImpl.java:360)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.doExecute(DataModelPausibleOperationImpl.java:247)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.executeImpl(DataModelPausibleOperationImpl.java:219)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.cacheThreadAndContinue(DataModelPausibleOperationImpl.java:89)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.execute(DataModelPausibleOperationImpl.java:207)
    at org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelWizard$1CatchThrowableRunnableWithProgress.run(DataModelWizard.java:220)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: java.lang.NullPointerException
    at org.eclipse.jst.j2ee.internal.archive.operations.JavaEEComponentExportOperation.getModuleParticipants(JavaEEComponentExportOperation.java:75)
    at org.eclipse.jst.j2ee.internal.archive.operations.JavaEEComponentExportOperation.getParticipants(JavaEEComponentExportOperation.java:43)
    at org.eclipse.jst.j2ee.internal.archive.operations.JavaEEComponentExportOperation.createFlatComponentArchiver(JavaEEComponentExportOperation.java:91)
    at org.eclipse.jst.j2ee.internal.archive.operations.ComponentExportOperation.export(ComponentExportOperation.java:191)
    at org.eclipse.jst.j2ee.internal.archive.operations.ComponentExportOperation.execute(ComponentExportOperation.java:136)
    ... 10 more 
```

它仍然会生成 WAR，但我猜它有错误，这就是我`No-Content type in header`在消费时得到的原因。那么现在的问题是，为什么导出时会抛出这个错误？同样，与其他 Web 服务完全相同。

**编辑三：**

我已经打开了一个相关的[问题](https://stackoverflow.com/questions/13687740/error-when-exporting-from-jaxws-to-war-in-eclipse#comment18806901_13687740)，该问题遵循我的进步。仍然不知道问题是什么，但正如我在评论中解释的那样，我怀疑这与认可的标准机制有关

# objective-c - 在 UITableViewCell 的 AccessoryView 中放置一个 UITextField

> ID：13683773
> 
> 赞同：1
> 
> 时间：2012-12-03T12:58:55.633
> 
> 标签：objective-c, uitableview, uitextfield, subview, accessoryview

我正在尝试将 a`UITextField`放入 a`UITableViewCell`中。

现在我有两种工作方法。

使用`addSubview`方法：

```
UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"textFieldCell"];

UITextField *textFieldView = [[UITextField alloc] initWithFrame:CGRectMake(150, 7, 150, 30)];
[textFieldView setPlaceholder:@"Placeholder"];

[cell addSubview:textFieldView]; 
```

使用`setAccessoryView`方法：

```
UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"textFieldCell"];

UITextField *textFieldView = [[UITextField alloc] initWithFrame:CGRectMake(0, 0, 150, 30)];
[textFieldView setPlaceholder:@"Placeholder"];

[cell setAccessoryView:textFieldView]; 
```

在我看来，`setAccessoryView`结果更好看，因为对齐是自动完成的。

但我的问题是：可以把 a 放在 a`UITextField`里面`AccessoryView`吗？还是有充分的理由为什么我不应该那样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:37:07.083

我觉得没有限制。但是accessoryView在设计中有一个作用：显示单元格有交互选项。
如果您想以正确的方式进行操作，则应在 cell.contentView 中附加 UIView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:19:18.087

苹果对它没有任何限制，但主要意图是`accessoryView`在类中添加属性`UITableViewCell`，通常用作单元格右侧的控件（正常状态）。

以下句子取自苹果[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html)：

如果此属性的值不为 nil，则 UITableViewCell 类将给定视图用于表格视图正常（默认）`enter code here`状态下的辅助视图；它忽略了`accessoryType`属性的值。**提供的附件视图可以是框架提供的控件或标签或自定义视图。**附件视图出现在单元格的右侧。

根据此声明，您可以将`UITextField`（框架提供的控制）作为`accessoryView`.

# c++ - QWebInspector 无法正常工作

> ID：13683780
> 
> 赞同：3
> 
> 时间：2012-12-03T12:59:23.290
> 
> 标签：c++, qt, qtwebkit

我已将 QWebInspector 包含在我的 QT 项目中并尝试在我的代码中使用它（不完全确定如何，因为我对 QT 还是很陌生）我得到一个空白的 Web Inspector 屏幕，所以我认为 page() 返回 null？我哪里出错了，或者这仅适用于 HTML5 应用程序？

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <QtGui>
#include <QSsl>
#include <QSslError>
#include <QNetworkReply>
#include <QtDebug>
#include <QWebInspector>
#include <QGraphicsWebView>
#include <QMessageBox>
#include "Windows.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    //this->setGeometry(50,50, 1280, 768);
    setWindowState(Qt::WindowMaximized);
    //MainWindow::showMaximized();
    this->centralWidget()->setLayout(new QGridLayout);
    m_pWebView = new QWebView(this);

    //Detect any SSL errors from the network reply
    connect(m_pWebView->page()->networkAccessManager(), SIGNAL(sslErrors(QNetworkReply*, const QList<QSslError> & )),
                    this, SLOT(onSslErrors(QNetworkReply*, const QList<QSslError> & )));

    this->centralWidget()->layout()->addWidget(m_pWebView);
    //set position and size
    m_pWebView->load(QUrl("https://csm.nathan"));

    //m_pWebView->show();

    QMenu *trayIconMenu;
       minimizeAction = new QAction("Minimize", this);
       restoreAction = new QAction("Restore", this);
       quitAction = new QAction("Exit", this);

       connect (minimizeAction, SIGNAL(triggered()), this, SLOT(hide()));
       connect (restoreAction, SIGNAL(triggered()),this,SLOT(showMaximized()));
       connect (quitAction, SIGNAL(triggered()), qApp, SLOT(quit()));
       trayIconMenu = new QMenu(this);
       trayIconMenu->addAction (minimizeAction);
       trayIconMenu->addAction (restoreAction);
       trayIconMenu->addAction (quitAction);
       QSystemTrayIcon* systray = new QSystemTrayIcon(this);
       //connect(systray, SIGNAL(messageClicked()), this, SLOT(messageClicked()));
       QIcon icon("csm-logo.png");
       systray->setIcon(icon);
       systray->setContextMenu (trayIconMenu);
       systray->show();
       if(systray->isVisible()){
           systray->showMessage("CytoViewer v1.0", "The CytoViewer has been started!", QSystemTrayIcon::NoIcon, 10000);

           //QMessageBox msgBox;
           //msgBox.setWindowTitle("HELP");
           //msgBox.setInformativeText(m_pWebView->page());
           //msgBox.exec();

           //Enable developer extras in the webviewer settings
           m_pWebView->page()->settings()->setAttribute(QWebSettings::DeveloperExtrasEnabled, true);
           //Instantiate QWebInspector
           QWebInspector inspector;

           inspector.setPage(m_pWebView->page());

           inspector.setVisible(false);
       }

}

void MainWindow::onSslErrors(QNetworkReply* reply, const QList<QSslError> &errors)
{
    qDebug() << "handleSslErrors: ";
    foreach (QSslError e, errors)
    {
        qDebug() << "ssl error: " << e;
    }
    //Suppress any SSL errors
    reply->ignoreSslErrors();
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::closeEvent(QCloseEvent *event)
{
        QMessageBox::information(this, tr("Systray"),
                                 tr("The program will keep running in the "
                                    "system tray. To terminate the program, "
                                    "choose <b>Exit</b> in the context menu "
                                    "of the system tray entry."));
        hide();
        event->ignore();
}

void MainWindow::messageClicked()
 {
    QMessageBox::information(0, "CytoViewer Message", "You're application is up and running!");
 } 
```

![Web 检查器显示空白屏幕](../Images/4977ba67c7fc62b5de660e3304d5b4f8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:52:53.723

改成

```
QWebInspector *inspector = new QWebInspector();
inspector->show(); 
```

并且不要忘记调用删除

# asp.net - 使用 gsdll32.dll 和安全问题将 pdf 转换为图像

> ID：13683785
> 
> 赞同：0
> 
> 时间：2012-12-03T12:59:41.257
> 
> 标签：asp.net, pdf, converter, ghostscript

我使用 gsdll32.dll 这个库将 pdf 转换为图像。一切都在我的机器上工作，但是当我将托管网络服务器中的所有内容上传到 ORCSWEB 时，问题就开始了。当我从 gsdll32.dll 调用例程时，为安全和权限关系生成异常。

所以我只需要知道是否有任何出路，因此不会发生异常，并且 pdf 将被转换为图像。我怎么能在没有 ORCSWEB 技术支持的帮助的情况下解决这个权限和安全问题，因为 ORCSWEB 技术支持表示他们无法更改共享位置托管的任何安全设置。我们的网站托管在 ORCSWEB 共享位置。我可以从我的编码网站做任何事情来解决这个问题。

是否有任何等效的.net 程序集（纯管理代码）库可用于将 pdf 转换为图像。请提供一些见解。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:22:03.543

我只能想象信任级别的问题。您的应用程序是否处于中等信任度？您可以使用此 SO 帖子答案中的代码进行检查：[如何确定当前应用程序是否为中等信任](https://stackoverflow.com/questions/6325354/how-to-determine-if-the-current-application-is-medium-trust)

根据这个问题的答案：[GhostScript 可以在 Medium Trust 中运行吗？](https://stackoverflow.com/questions/2699207/can-ghostscript-run-in-medium-trust)GhostScript 不能在中等信任下工作。

# javascript - Jquery上的垂直按钮滑出

> ID：13683789
> 
> 赞同：1
> 
> 时间：2012-12-03T12:59:59.027
> 
> 标签：javascript, jquery, jquery-plugins, accessibility

我正在为垂直选项卡/按钮寻找一些可能的最佳实践，当单击该选项卡/按钮时会滑出表单面板。选项卡/按钮/图像随着滑出而移动并保持连接到面板的右上角，然后再次单击时它会被隐藏（但是，当然，选项卡正在显示）

我正在尝试找出构建按钮的最佳方法。

是否有垂直按钮（可能是 jquery ui 按钮）之类的东西？它应该是图像吗？它应该用CSS编码吗？

可访问性更好（或更差）吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:52:40.293

如果有最佳实践，我还没有仔细研究这些内容，无法发表评论，但是如果您担心可访问性，我建议不要使用这些幻灯片。您必须记住的第一件事是内容顺序的位置。如果是第一个，那说明它非常重要，那你为什么不为表单制作一个普通页面。如果是最后一个，那么使用辅助技术的人可能永远不会“看到”表格，这可能会导致投资回报率。他们可能看不到它，因为不是每个人都阅读页面上的每一行/单词。

下一个问题，稍微回答一下您的问题，滑出是如何制作的？它就像一个灯箱，所以只有当他们打开幻灯片表单时才会提供信息，还是人们每次都必须通过这个隐藏的表单来查看内容？

> 是否有垂直按钮（可能是 jquery ui 按钮）之类的东西？它应该是图像吗？它应该用CSS编码吗？

我会将其制作为图像，然后将其包装在普通链接中。alt 应该是描述性的。我认为您不能使用 CSS 垂直对齐文本，因此您必须执行类似的操作

```
<a>
W<br />
o<br />
r<br />
d<br />
</a> 
```

读起来会很烦人。

# ios - iOS - 使用 ActiveSync 帐户发送电子邮件

> ID：13683801
> 
> 赞同：0
> 
> 时间：2012-12-03T13:00:27.903
> 
> 标签：ios, exchange-server, mfmailcomposeviewcontroller

我在我的应用程序中添加了一个发送电子邮件的功能，使用`MFMailComposeViewController`. 当我的 iPad 上注册了 GMail、Hotmail 或 Yahoo 帐户时，此功能运行良好，但当我注册了 Microsoft Exchange 帐户时，它就不起作用了！

实际上，该方法的调用`[MFMailComposeViewController canSendMail]`返回`FALSE`的是 Microsoft Exchange 帐户。我在具有不同帐户的几台设备上尝试了我的应用程序，这似乎是`MFMailComposeViewController`Microsoft Exchange 之间的错误。

有没有其他方法可以发送电子邮件`MFMailComposeViewController`？你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:04:53.967

最后，我解决了我的 Exchange 帐户问题。

我使用 MobileIron 来配置我的设备，并且证书属性不允许我从 Mail! 的另一个应用程序发送电子邮件！

所以现在，它可以工作了，我还没有搜索过除 MFMailComposeViewController 之外的另一种发送电子邮件的方式。

# antlr - 没有空格的 Antlr3 匹配标记

> ID：13683803
> 
> 赞同：3
> 
> 时间：2012-12-03T13:00:31.700
> 
> 标签：antlr, whitespace, tokenize, antlr3

给定输入`"term >1"`，数字（1）和比较运算符（>）应该在 AST 中生成单独的节点。如何做到这一点？

在我的测试中，只有当“c”和“1”用空格分隔时才会发生匹配“ `term < 1`”。

当前语法：

```
startExpression  : orEx;

expressionLevel4    
: LPARENTHESIS! orEx RPARENTHESIS! | atomicExpression;
expressionLevel3    
: (fieldExpression) | expressionLevel4 ;
expressionLevel2    
: (nearExpression) | expressionLevel3 ;
expressionLevel1    
: (countExpression) | expressionLevel2 ;
notEx   : (NOT^)? expressionLevel1;
andEx   : (notEx        -> notEx)
(AND? a=notEx -> ^(ANDNODE $andEx $a))*;
orEx    : andEx (OR^  andEx)*;

 countExpression  : COUNT LPARENTHESIS WORD RPARENTHESIS RELATION NUMBERS -> ^(COUNT WORD RELATION NUMBERS);

nearExpression  : NEAR LPARENTHESIS (WORD|PHRASE) MULTIPLESEPERATOR (WORD|PHRASE) MULTIPLESEPERATOR NUMBERS RPARENTHESIS -> ^(NEAR WORD* PHRASE* ^(NEARDISTANCE NUMBERS));

fieldExpression : WORD PROPERTYSEPERATOR WORD -> ^(FIELDSEARCH ^(TARGETFIELD WORD) WORD );

atomicExpression 
: WORD
| PHRASE
;

fragment NUMBER : ('0'..'9');
fragment CHARACTER : ('a'..'z'|'A'..'Z'|'0'..'9'|'*'|'?');
fragment QUOTE     : ('"');
fragment LESSTHEN : '<';
fragment MORETHEN: '>';
fragment EQUAL: '=';
fragment SPACE     : ('\u0009'|'\u0020'|'\u000C'|'\u00A0');
fragment UNICODENOSPACES:  ('\u0021'..'\u0027'|'\u0030'..'\u0039'|'\u003B'..'\u007E'|'\u00A1'..'\uFFFF');
//fragment UNICODENOSPACES  :  ('\u0021'..'\u0039'|'\u003B'..'\u007E'|'\u00A1'..'\uFFFF');

LPARENTHESIS : '(';
RPARENTHESIS : ')';

AND    : ('A'|'a')('N'|'n')('D'|'d');
OR     : ('O'|'o')('R'|'r');
ANDNOT : ('A'|'a')('N'|'n')('D'|'d')('N'|'n')('O'|'o')('T'|'t');
NOT    : ('N'|'n')('O'|'o')('T'|'t');
COUNT:('C'|'c')('O'|'o')('U'|'u')('N'|'n')('T'|'t');
NEAR:('N'|'n')('E'|'e')('A'|'a')('R'|'r');
PROPERTYSEPERATOR : ':';
MULTIPLESEPERATOR : ',';

WS     : (SPACE) { $channel=HIDDEN; };
RELATION : LESSTHEN? MORETHEN? EQUAL?;
NUMBERS : (NUMBER)+;
PHRASE : (QUOTE)(CHARACTER)+((SPACE)+(CHARACTER)+)+(QUOTE);
WORD   : (UNICODENOSPACES)+; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T13:36:20.167

那是因为你的`WORD`规则匹配太多：它也匹配`">"`，所以当`">1"`它们一起写时，这两个字符被标记为单个`WORD`-token。

每当我不确定我的词法分析器在做什么时，我都会简单地让解析器匹配零个或多个任何类型的标记，并打印所有标记的类型和文本：

```
parse
 : (t=. {System.out.printf("\%-15s '\%s'\n", tokenNames[$t.type], $t.text);})* EOF
 ; 
```

当您让上面的规则匹配您的输入`"term > 1"`时，将打印以下内容：

```
单词“术语”
关系'>'
字'1'
```

和输入`"term" >1`

```
单词“术语”
字'> 1'
```

没有办法解决这个问题：当词法分析器可以匹配 2 个（或更多）字符（`WORD`规则）时，它将选择该路径而不是它之前定义的规则，该规则仅匹配单个字符（`RELATION`规则）。

另请注意，您的`RELATION`规则：

```
RELATION : LESSTHEN? MORETHEN? EQUAL?; 
```

可能匹配空字符串。确保每个词法分析器规则至少匹配 1 个字符，否则您的词法分析器可能会陷入无限循环。

最好做这样的事情：

```
RELATION
 : (LESSTHEN | MORETHEN)? EQUAL // '<=', '>=', or '='
 | (LESSTHEN | MORETHEN)        // '<' or '>'
 ; 
```

# python - numpy：创建具有条目 c_i * C_{ij} 的矩阵的快速方法

> ID：13683804
> 
> 赞同：2
> 
> 时间：2012-12-03T13:00:33.680
> 
> 标签：python, matrix, numpy, scipy

我正在寻找一种`A_{ij}`从给定向量`b_i`和另一个矩阵创建新矩阵的快速方法`C_{ij}`。新矩阵的组件应具有以下形式

```
A_{ij} = b_i * C_{ij}. 
```

到目前为止我正在使用`dot(diag(b), C)`，但是点积自然有很多与零的乘法，这是非常低效的。有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:19:20.620

使用`*`，具有适当广播的元素乘积：

```
>>> b = array([1,2,3])
>>> C = arange(9).reshape(3,3)
>>> dot(diag(b), C)
array([[ 0,  1,  2],
       [ 6,  8, 10],
       [18, 21, 24]])
>>> atleast_2d(b).T * C
array([[ 0,  1,  2],
       [ 6,  8, 10],
       [18, 21, 24]]) 
```

`atleast_2d(b).T`（或`b.reshape(-1,1)`）将向量重塑`b`为列向量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T03:30:45.030

您还可以使用[einsum](http://docs.scipy.org/doc/numpy/reference/generated/numpy.einsum.html)：

```
>>> b = np.array([1,2,3])
>>> C = np.arange(9).reshape(3,3)
>>> np.einsum('i,ij->ij', b, C)
array([[ 0,  1,  2],
       [ 6,  8, 10],
       [18, 21, 24]]) 
```

在我的机器上，这种方法比这两种方法都快

```
np.dot(np.diag(b), C) 
```

和

```
np.atleast_2d(b).T * C 
```

对于 100,000 个循环，einsum 需要 1.16 秒，dot 需要 1.61 秒，atleast_2d 需要 2.03 秒。

如果您熟悉[Einstein summation notation](http://en.wikipedia.org/wiki/Einstein_notation)，那么 einsum 是一个非常有用的函数。使用索引表示法更容易制定许多简单的线性代数运算，并且增加的执行速度只是锦上添花。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T13:15:06.393

将矩阵转换为数组，执行（广播）数组乘法，然后转换回：

```
np.matrix(b * np.asarray(C)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T22:35:12.893

做

```
b[:,np.newaxis] * C 
```

或者

```
b[:,None] * C 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-20T06:27:24.303

结合已经给出的答案，并尝试一种新的（但效率低下的方法），我给出了以下时间安排。

*   einsum: 0.54 s (Thycydides)
*   广播: 0.44 s (larsmans)
*   点对角线：15.6 s (henrikr, TS)
*   稀疏直径矩阵：16.8 s（自己尝试，惨败:-p）

如果我每十次重复 einsum 和广播（更准确的时间），我发现：

*   einsum：5.2 秒
*   广播：4.5秒

这是它的测试代码：

```
import timeit
from scipy.sparse.dia import dia_matrix
import numpy as np

def get_bc():
    N = 10000
    M = 10000
    b = np.random.random(size=N)
    c = np.random.random(size=[N, M])
    return b, c

def multiply_dot_diag():
    global b, c
    return np.dot(np.diag(b), c)

def multiply_broadcast():
    global b, c
    return np.atleast_2d(b).T * c

def mulitply_sparse():
    global b, c
    N = b.size
    return dia_matrix((b, 0), shape=[N, N]).todense().dot(c)

def multiply_einsum():
    global b, c
    return np.einsum('i,ij->ij', b, c)

if __name__ == '__main__':
    global b, c
    b, c = get_bc()
    print (b, c)

    print (timeit.timeit(multiply_einsum, number=1))
    print (timeit.timeit(multiply_broadcast, number=1))
    print (timeit.timeit(multiply_dot_diag, number=1))
    print (timeit.timeit(mulitply_sparse, number=1))

    np.testing.assert_array_equal(multiply_dot_diag(), multiply_broadcast())
    np.testing.assert_array_equal(multiply_dot_diag(), mulitply_sparse())
    np.testing.assert_array_equal(multiply_dot_diag(), multiply_einsum()) 
```

# android - 通过应用程序调用 Android Oficial Home 设置为 home

> ID：13683806
> 
> 赞同：0
> 
> 时间：2012-12-03T13:00:42.600
> 
> 标签：android

在我的 android 项目中，清单中有一个标签，允许用户将其标记为默认值。每当按下主页按钮时，都会调用我的应用程序，总是......我想在我的应用程序中放置一个按钮来调用官方Android的主页。默认情况下不是我的应用程序。这个怎么做？

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:03:19.510

尝试从包 com.android.launcher2 启动默认活动 :)

试试这个代码

```
Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage("com.android.launcher2");
startActivity(LaunchIntent); 
```

# matlab - 如何将数组与if语句的数字进行比较？

> ID：13683807
> 
> 赞同：9
> 
> 时间：2012-12-03T13:00:46.787
> 
> 标签：matlab, if-statement

`H0`是一个数组 ( `[1:10]`)，并且`H`是一个数字 ( `5`)。

如何将每个元素`H0`与单个数字进行比较`H`？

例如在

```
if H0>H 
   do something
else
   do another thing
end 
```

MATLAB 总是做其他事情。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T13:07:10.720

`if`需要以下语句来评估标量真/假。如果语句是一个数组，则行为相当于将其包装在`all(..)`.

如果您的比较结果是一个逻辑数组，例如

```
H0  = 1:10;
H   = 5;
test = H0>H; 
```

您有两个选项可以`test`通过`if`-statement：

(1) 您可以聚合 的输出`test`，例如，您希望在`any`或`all`中的元素`test`为真时执行 if 子句，例如

```
if any(test)
  do something
end 
```

(2) 你遍历 的元素`test`，并做出相应的反应

```
for ii = 1:length(test)
   if test(ii)
      do something
   end
end 
```

请注意，可以通过使用逻辑向量`test`作为索引来向量化此操作。

**编辑**

如果，如评论中所示，您想要`P(i)=H0(i)^3 if H0(i)<H`，否则`P(i)=H0(i)^2`，您只需写

```
 P = H0 .^ (H0<H + 2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T20:18:06.627

@Jonas 在他最后一行的好回答促使我想出一个使用逻辑索引的版本。

代替

```
for i=1:N
  if H0(i)>H
     H0(i)=H0(i)^2;
  else
     H0(i)=H0(i)^3;
  end
end 
```

你可以这样做

```
P = zeros(size(H0)); % preallocate output
test = H0>H;

P(test) = H0(test).^2; % element-wise operations 
                       % on the elements for which the test is true

P(~test) = H0(~test).^3; % element-wise operations 
                         % on the elements for which the test is false 
```

请注意，这是一个通用解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T13:11:38.987

无论如何看看这个：使用`ismemeber()`函数。坦率地说，不确定您希望如何比较。大于、小于、等于或在成员范围内。所以我的回答可能还不能让你满意。但无论如何只是给你一个想法。

```
H0 = [0 2 4 6 8 10 12 14 16 18 20];
H  = [10];
ismember(H,H0)
IF (ans = 1) then
// true
else
//false
end 
```

**更新答案**

这是**超级蛮力方法**- 只需使用它来解释。在这里给出的任何其他答案都比我提供的更好。理想情况下，您需要通过处理将更大/更低的值撕成两个不同的向量`^3`- 我假设...... :)

```
H0 = [0 2 4 6 8 10 12 14 16 18 20];
H  = [10];

H0(:)
ans = 
     0
     2
     4
     6
     8
     10
     12
     14
     16
     18
     20 
```

函数`find`返回`H0`线性索引中大于 10 个值的所有值的索引。

```
X = find(H0>H)
X = 
     7
     8
     9
     10
     11 
```

函数`find`返回`H0`线性索引中小于 10 的所有值的索引。

```
Y = find(H0<H)
Y =
     1
     2
     3
     4
     5
     6 
```

如果您愿意，您可以访问每个元素`H0`以检查更大/更低的值，或者您可以使用上述带有索引的矩阵通过`H0`算术运算将值撕成两个不同的数组。

```
G = zeros(size(X)); // matrix with the size = number of values greater than H
J = zeros(size(Y)); // matrix with the size = number of values lower than H

for i = 1:numel(X)
     G(i) = H0(X(i)).^3
end

G(:)
ans =

      1728
      2744
      4096
      5832
      8000

for i = 1:numel(Y)
     J(i) = H0(Y(i)).^2
end

J(:)
ans =

      0
      4
     16
     36
     64
    100 
```

# google-api - Google 电子表格 API - 返回远程 500 错误

> ID：13683810
> 
> 赞同：0
> 
> 时间：2012-12-03T13:00:53.933
> 
> 标签：google-api, google-sheets

有没有人用谷歌域的谷歌电子表格 API 解决了 500 个错误？

我已经复制了这篇文章中的代码（2-legged OAuth）：[http](http://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/samples/OAuth/Program.cs) ://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/samples/OAuth/Program.cs ，替换在我的域中；s API id 和 secret 以及我自己的凭据，它可以工作。

所以看来我的域设置很好（至少对于联系人/日历 API）。

但是，将代码换成新的电子表格服务/查询，它会恢复为类型：远程服务器返回内部服务器错误（500）。

```
 var ssq = new SpreadsheetQuery();
                ssq.Uri = new OAuthUri("https://spreadsheets.google.com/feeds/spreadsheets/private/full", "me", "mydomain.com");
                ssq.OAuthRequestorId = "me@mydomain.com"; // can do this instead of using OAuthUri for queries
                var feed = ssservice.Query(ssq); //boom 500
                Console.WriteLine("ss:" + feed.Entries.Count); 
```

我一头雾水

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:17:00.237

我必须确保使用“正确”的类：

不是

```
//using SpreadsheetQuery = Google.GData.Spreadsheets.SpreadsheetQuery; 
```

但

```
using SpreadsheetQuery = Google.GData.Documents.SpreadsheetQuery; 
```

臭臭的

似乎您需要 gdocs api 来查询电子表格，但是电子表格 api 可以在电子表格内部进行查询，但直到现在您才能在互联网上找到这个不可否认的重要信息。谷歌在那个方面很糟糕。

# ajax - 提交ajax后的主要面孔不更新

> ID：13683819
> 
> 赞同：0
> 
> 时间：2012-12-03T13:01:15.563
> 
> 标签：ajax, jsf, primefaces, jsf-2

使用 PF 3.2，如果我提交表单并且它们是必填字段，验证完成并出现必填消息，我会遇到这个问题。之后的问题是，如果我更改了通过 ajax 更改 inputtext 的组合值，则该值不会更改，但是侦听器调用了！ **xhtml**

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui"
  xmlns:f="http://java.sun.com/jsf/core">
<h:head>
    <title>Prime Test</title>
</h:head>

<h:body style="background: #F6F6F6;">
    <h:form id="idAjaxFormTest">
        <f:view>
           <h1> <h:outputText value="after submit ajax problem" /></h1>
            <p:messages showSummary="true" autoUpdate="true" />
            <p:panelGrid columns="2">
                <h:outputText value="Names" />
                <p:selectOneMenu value="#{ajaxTest.name}">
                    <f:selectItems value="#{ajaxTest.names}" var="varName"
                                   itemLabel="#{varName}" itemValue="#{varName}">
                    </f:selectItems>
                    <p:ajax listener="#{ajaxTest.listen}" update="idXname" />
                </p:selectOneMenu>

                <h:outputText value="Xname" />
                <p:inputText value="#{ajaxTest.xname}" id="idXname"/>

                <h:outputText value="Xuser" />
                <p:inputText required="true" transient="true" value="#{ajaxTest.xuser}" label="xUser" />
            </p:panelGrid>
            <p:commandButton value="Submit" action="#{ajaxTest.doAction}" />
        </f:view>
    </h:form>
</h:body> 
```

**豆**

```
package com.actions;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

@ManagedBean(name = "ajaxTest")
@ViewScoped

public class AjaxTestBean implements Serializable{
    private List<String> names;
    private String name;
    private String xname;
    private String xuser;

public AjaxTestBean() {
    names = new ArrayList<String>();
    names.add("ahmed");
    names.add("mohamed");
    names.add("mahmoud");
    names.add("ayman");
    names.add("walid");
    names.add("khalid");
}

public void listen(){
    xname = "QQ "+ name;
    System.out.println("Listener "+ xname);
}
public void doAction(){
    System.out.println("Action Done: "+ name);
}

public List<String> getNames() {
    return names;
}

public void setNames(List<String> names) {
    this.names = names;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public String getXname() {
    return xname;
}

public void setXname(String xname) {
    this.xname = xname;
}

public String getXuser() {
    return xuser;
}

public void setXuser(String xuser) {
    this.xuser = xuser;
}

} 
```

![行动01](../Images/7352204ab678678eab2e3d471160f34c.png)

![行动02](../Images/6a6a0a0c0aa4672257fa429f8b15e24b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T09:38:49.697

看起来你遇到了这个问题：

[发生验证错误后，如何使用 PrimeFaces AJAX 填充文本字段？](https://stackoverflow.com/questions/6642242/how-can-i-populate-a-text-field-using-primefaces-ajax-after-validation-errors-oc/6845800#6845800)

将以下内容与 OmniFaces 库一起添加到 faces-config.xml 使您的 select-one-menu 正确更新 inputField

```
<lifecycle>
    <phase-listener>org.omnifaces.eventlistener.ResetInputAjaxActionListener</phase-listener>
</lifecycle> 
```

如果您不想为所有组件执行此操作，OmniFaces 会展示如何为每个组件执行此操作：http: [//showcase.omnifaces.org/eventlisteners/ResetInputAjaxActionListener](http://showcase.omnifaces.org/eventlisteners/ResetInputAjaxActionListener)

# c# - 如何通过 OAuth 将 Twitter 消息发布到经过身份验证的用户的时间线

> ID：13683820
> 
> 赞同：0
> 
> 时间：2012-12-03T13:01:21.420
> 
> 标签：c#, oauth, asp.net-mvc-4, twitter-oauth

几天来，我一直在与 Twitter API 搏斗，但我无法将消息发布到经过身份验证的用户的时间线。我有一个 ASP.NET MVC 4 应用程序，它通过 Twitter 登录用户并保存从登录过程返回的访问令牌。那部分工作正常。我可以在经过身份验证的用户的 Twitter 帐户中看到我的应用程序具有读写权限。

然后，我使用该访问令牌以及与我的 Twitter 应用程序关联的消费者密钥、消费者密码和 oauth 令牌密码，将其发布到用户的时间线。我每次都会收到 401 未经授权的错误。我尝试使用 1.1 API 和 1 API 得到相同的结果。

大部分代码来自 Gary Short 的文章：http: [//garyshortblog.wordpress.com/2011/02/11/a-twitter-oauth-example-in-c/](http://garyshortblog.wordpress.com/2011/02/11/a-twitter-oauth-example-in-c/)

这是我到目前为止所得到的。如果有人能发现任何关于我错过了什么的线索，我将不胜感激。

```
 public async Task<bool> Push(TwitterMessage twitterMessage)
    {
        const string updateApi = "http://api.twitter.com/1/statuses/update.json";
        const string oauthConsumerKey = "<consumerKey>";
        const string consumerSecret = "<consumerSecret>";
        const string oauthSignatureMethod = "HMAC-SHA1";
        const string oauthTokenSecret = "<tokenSecret>";
        var signingKey = string.Format("{0}&{1}", consumerSecret.Escaped(), oauthTokenSecret.Escaped());

        var postBody = "status=" + Uri.EscapeDataString(twitterMessage.MessageContent);
        var oauthNonce = Convert.ToBase64String(new ASCIIEncoding().GetBytes(DateTime.Now.Ticks.ToString()));
        var oauthToken = "<authenticatedUserToken>";
        var timeSpan = DateTime.UtcNow - new DateTime(1970, 1, 1, 0, 0, 0, 0);
        var oauthTimestamp = Convert.ToInt64(timeSpan.TotalSeconds).ToString();

        var message = string.Format("POST {0}?{1} HTTP/1.1", updateApi, postBody.Escaped());
        var hasher = new HMACSHA1(new ASCIIEncoding().GetBytes(signingKey));
        var signatureString = Convert.ToBase64String(hasher.ComputeHash(new ASCIIEncoding().GetBytes(message)));

        ServicePointManager.Expect100Continue = false;

        var request = (HttpWebRequest)WebRequest.Create(updateApi);
        request.KeepAlive = false;

        var authorisationBuilder = new StringBuilder();
        authorisationBuilder.Append("OAuth ");
        authorisationBuilder.AppendFormat("oauth_consumer_key=\"{0}\",", oauthConsumerKey.Escaped());
        authorisationBuilder.AppendFormat("oauth_signature_method=\"{0}\",", oauthSignatureMethod.Escaped());
        authorisationBuilder.AppendFormat("oauth_timestamp=\"{0}\",", oauthTimestamp.Escaped());
        authorisationBuilder.AppendFormat("oauth_nonce=\"{0}\",", oauthNonce.Escaped());
        authorisationBuilder.AppendFormat("oauth_token=\"{0}\",", oauthToken.Escaped());
        authorisationBuilder.AppendFormat("oauth_signature=\"{0}\"", signatureString.Escaped());
        var authorisation = authorisationBuilder.ToString();
        request.Headers.Add("Authorization", authorisation);

        request.Method = "POST";
        request.ContentType = "application/x-www-form-urlencoded";
        using (var stream = await request.GetRequestStreamAsync())
        {
            var bodyBytes = new ASCIIEncoding().GetBytes(postBody);
            stream.Write(bodyBytes, 0, bodyBytes.Length);
        }

        //Allow us a reasonable timeout in case Twitter's busy
        request.Timeout = 3 * 60 * 1000;

        try
        {
            var response = await request.GetResponseAsync() as HttpWebResponse;
            return true;
        }
        catch (WebException)
        {
            return false;
        } 
    }

    public static string Escaped(this string input)
    {
        return Uri.EscapeDataString(input);
    } 
```

**更新**查看这篇[SO 帖子](https://stackoverflow.com/questions/12198734/getting-twitter-access-secret-using-dotnetopenauth-in-mvc4)，我似乎无法使用 DotNetOpenAuth twitter 客户端进行授权，而我一直在这样做。那里的建议是扩展 twitter 消费者类而不是执行授权，这将允许我检索用户的令牌秘密（我认为我的难题中缺少的部分）。当我得到这个工作时会发布另一个更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:03:59.440

所以问题是目前的 DotNetOpenAuth 问题。对于 Twitter 身份验证，DotNetOpenAuth 客户端不允许完整的授权流程（需要发布到用户的时间线）。仅从初始握手中检索访问令牌，而不是访问令牌秘密。我使用的是与我的 Twitter 应用程序关联的访问令牌密码，而不是登录的 Twitter 用户，因此每次授权都失败。

更新：我终于开始使用[Daniel Crenna 的`Tweetsharp`](https://github.com/danielcrenna/vault/tree/master/tweetsharp)库，这使得代码比编写我自己的 API 包装器要简单一些：

```
public async Task<bool> Push(TwitterAccount account)
{
    var twitterService = new TwitterService(consumerKey, consumerSecret);
    twitterService.AuthenticateWith(account.AccessToken, account.AccessTokenSecret);
    var options = new SendTweetOptions {Status = string.Format("{0} {1}", account.Message.MessageContent, account.Message.ShortLink)};
    var status = twitterService.SendTweet(options);
    return status != null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T18:29:49.417

检查此代码和链接/文章简单易行：

```
protected void btnTweet_Click(object sender, EventArgs e)
{
 string oauthAccessToken = Session["twtoken"].ToString();
 string oauthAccessTokenSecret = Session["twsecret"].ToString();

 OAuthHelper oauthhelper = new OAuthHelper();
 oauthhelper.TweetOnBehalfOf(oauthAccessToken, oauthAccessTokenSecret, txtTweet.Text);

 if (string.IsNullOrEmpty(oauthhelper.oauth_error))
      Response.Write("Twit Posted Successfully");
 else
      Response.Write(oauthhelper.oauth_error);
} 
```

阅读更多如何获取访问令牌和密钥并下载 OAuthHelper 和 OAuthUtility 类下面是链接 -

*[如何使用 oauth 身份验证代表用户从 asp.net 发布推文](http://www.dotnetbull.com/2013/06/tweet-on-behalf-of-user-from-aspnet.html)*

*[在 asp.net 中使用 oauth 身份验证使用 twitter 登录并获取访问令牌、屏幕名称和用户 ID](http://www.dotnetbull.com/2013/05/login-with-twitter-using-oauth.html)*

# sql - 从 TSQL XML 中提取属性

> ID：13683823
> 
> 赞同：1
> 
> 时间：2012-12-03T13:01:30.483
> 
> 标签：sql, xml, tsql, dom

我有以下 XML：

```
<help>
  <item field="field1" help="helptext" />
  <item field="field2" help="helptext" />
  <item field="field3" help="helptext" />
</help> 
```

我将其存储在 SQL Server 中的 XML DataType 中，并希望单独提取字段并帮助文本。即结果集类似于：

```
 | field1 | helptext |  
 | field2 | helptext |  
 | field3 | helptext | 
```

有谁知道如何实现这一目标？

最亲切的问候，

亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:15:58.540

看看以下是否有帮助：

```
DECLARE @processedXmlDoc int
DECLARE @inputDoc varchar(1000)

EXEC sp_xml_preparedocument @processedXmlDoc OUTPUT, @inputDoc 

SELECT    *
FROM       OPENXML (@processedXmlDoc , '/help/item',1)
            WITH (field varchar(20) 'field',
                  help varchar(20) 'helpText')

EXECUTE sp_xml_removedocument @idoc 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:16:21.290

尝试这样的事情：

```
DECLARE @input XML = '<help>
  <item field="field1" help="helptext" />
  <item field="field2" help="helptext" />
  <item field="field3" help="helptext" />
</help>'

SELECT
    Field = Item.value('@field', 'varchar(25)'),
    HELP = Item.value('@help', 'varchar(50)')
FROM
    @input.nodes('/help/item') AS XTbl(Item) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T13:19:19.460

```
DECLARE @xml AS XML = '<help>
  <item field="field1" help="helptext" />
  <item field="field2" help="helptext" />
  <item field="field3" help="helptext" />
</help>'

select c.value('@field', 'varchar(max)') field, c.value('@help', 'varchar(max)') help
from @xml.nodes('/help/item') T(c); 
```

当 xml 数据在表字段中时，要实现相同的效果，请使用：

```
SELECT c.value('@field', 'varchar(max)') field, c.value('@help', 'varchar(max)') help
FROM MyTable A CROSS APPLY A.MyXmlField.nodes('/help/item') T(c) 
```

其中 MyTable 是字段 MyXmlField 包含 xml 数据的表。

# jquery - jQuery window.location.replace 不断循环

> ID：13683826
> 
> 赞同：0
> 
> 时间：2012-12-03T13:01:38.003
> 
> 标签：jquery, browser, kill, window.location

如果由于我的 html5 布局而在 Internet Explorer 或 Firefox 中使用旧版浏览器，我正在使用带有 jQ​​uery 的 window.location.replace() 重定向到 wordpres 中的新页面。

```
 var browser = jQuery.browser;
              var version = browser.version.slice(0.3);

              if ( browser.msie && version != "10.0" && version != '9.0' ) {
                    window.location.replace("http://crosscom.dk/update-browser");
              }

               if ( browser.mozilla && version != "17.0" && version != '16.0' && version != '15.0' ) {
                    window.location.replace("http://crosscom.dk/update-browser/");
              } 
```

重定向有效，但由于它加载在 wordpres 的标题中，它每次都在循环，你坐在上面：例如 IE 8。

所以我的问题是...

如何在浏览器重定向一次后终止脚本或在我的代码周围设置不同的参数以阻止脚本循环？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T13:10:15.930

循环是因为无论您在哪个页面上都会发生重定向，包括重定向目标。为避免循环，请测试您是否已经在重定向位置。

有很多方法可以实现这一点——最有效的可能是服务器端检查和重定向。但是，假设您的知识水平或部署要求意味着 JavaScript 替代方案更好，您可以使用以下代码：

```
var redirectLocation = "http://example.com/example.html"; // Redirect destination

// Page location and redirectLocation should not be the same
if (window.location.href !== redirectLocation) {
  // Redirect logic
} 
```

将其直接应用于您自己的代码示例会产生：

```
var browser = jQuery.browser;
var version = browser.version.slice(0.3);
var redirectLocation = "http://crosscom.dk/update-browser/"; // Redirect destination

// Page location and redirectLocation should not be the same 
if (window.location.href !== redirectLocation) { 
  // Redirect logic

  if ( browser.msie && version != "10.0" && version != '9.0' ) {
    window.location.replace(redirectLocation);
  }

  if ( browser.mozilla && version != "17.0" && version != '16.0' && version != '15.0' ) {
    window.location.replace(redirectLocation);
  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:09:50.127

仅在需要重定向的页面上包含脚本

# haskell - 为什么使用 Parsec 的 buildExpressionParser 时只解析第一个定义的中缀运算符？

> ID：13683829
> 
> 赞同：6
> 
> 时间：2012-12-03T13:01:54.910
> 
> 标签：haskell, parsec

我正在尝试使用 Parsec 为命题演算编写解析器。解析器使用[Text.Parsec.Expr](http://hackage.haskell.org/packages/archive/parsec/3.1.3/doc/html/Text-Parsec-Expr.html)`buildExpressionParser`中的函数。这是我定义逻辑运算符的代码。

```
operators = [ [Prefix (string "~" >> return Negation)]
            , [binary "&" Conjunction]
            , [binary "|" Disjunction]
            , [binary "->" Conditional]
            , [binary "<->" Biconditional]
            ]

binary n c = Infix (spaces >> string n >> spaces >> return c) AssocRight

expr = buildExpressionParser operators term
    <?> "compound expression" 
```

我省略了变量、术语和括号表达式的解析器，但如果您认为它们可能与问题相关，您可以阅读[parser 的完整源代码](https://gist.github.com/4191806)。

对于仅使用否定和连词的表达式，即唯一的前缀运算符和第一个中缀运算符，解析器会成功。

```
*Data.Logic.Propositional.Parser2> runPT expr () "" "p & ~q"
Right (p ∧ ¬q) 
```

使用任何其他运算符的表达式在运算符的第一个字符上失败，并出现如下错误：

```
*Data.Logic.Propositional.Parser2> runPT expr () "" "p | q"
Left (line 1, column 3):
unexpected "|"
expecting space or "&" 
```

如果我注释掉定义连词解析器的行，则析取解析器将起作用（但其余部分仍将失败）。将它们全部放入一个列表（即具有相同的优先级）也不起作用：同样的问题仍然存在。

谁能指出我做错了什么？非常感谢。

* * *

感谢 Daniel Fischer 提供了如此迅速而有帮助的答案。

为了使这个解析器正常工作，我还需要处理否定符号的重复应用，以便 eg`~~p`能够正确解析。[这个 SO answer](https://stackoverflow.com/a/10475767/573562)向我展示了如何做到这一点，我对解析器所做的更改可以在[这里](https://github.com/beastaugh/hatt/commit/580a1dc)找到。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T13:53:10.300

你的问题是

```
binary n c = Infix (spaces >> string n >> spaces >> return c) AssocRight 
```

第一个尝试的中缀运算符在失败之前会消耗一个空间，因此不会尝试后面的可能性。（Parsec 倾向于使用解析器，并且`<|>`仅在第一个解析器失败时才尝试运行第二个解析器*而不*使用任何输入。）

如果第一个中缀运算符失败，要尝试其他中缀运算符，您可以将`binary`解析器包装在`try`

```
binary n c = Infix (try $ ...) AssocRight 
```

这样当这样的解析器失败时，它不会消耗任何输入，或者，更好的是，该问题的常规解决方案是`spaces`从中删除初始值，

```
binary n c = Infix (string n >> spaces >> return c) AssocRight 
```

并让您的所有解析器在他们解析的令牌*之后使用空格*

```
variable = do c <- letter
              spaces
              return $ Variable (Var c)
        <?> "variable"

parens p = do char '('
              spaces
              x <- p
              char ')'
              spaces
              return x
        <?> "parens" 
```

当然，如果您有可以解析具有公共前缀的运算符的解析器，您仍然需要将它们包装在 a 中`try`，这样如果例如解析`>=`失败，`>>=`仍然可以尝试。

模拟命题的数据类型并改变如上所述的空间消耗行为，

```
*PropositionalParser Text.Parsec> head $ runPT expr () "" "p | q -> r & s"
Right (Conditional (Disjunction (Variable (Var 'p')) (Variable (Var 'q'))) (Conjunction (Variable (Var 'r')) (Variable (Var 's')))) 
```

甚至更复杂的表达式也会被解析。

# java - 如何从 bash 脚本中指定工作目录

> ID：13683834
> 
> 赞同：0
> 
> 时间：2012-12-03T13:02:12.497
> 
> 标签：java, bash

我想从 bash 脚本运行我的 java 算法。当我从应用程序运行我的程序时，`Netbeans`我可以指定我`Working directory`的应用程序。那么，我如何指定`Working directory`from bash 脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T13:05:54.027

在 Bash 中，您只需 cd 到您想要使用的目录即可。因此，例如，如果您的应用程序位于 ~/bin/app.jar 中，您将拥有如下内容：

```
#!/bin/bash

WORKING_DIR=$HOME/lib # whichever directory you want to work from
cd $WORKING_DIR
java -jar ~/bin/app.jar 
```

诀窍是使用可执行文件的绝对路径，或者在这种情况下，使用 Jar 文件的绝对路径。

# c - C中结构的动态分配

> ID：13683838
> 
> 赞同：0
> 
> 时间：2012-12-03T13:02:34.960
> 
> 标签：c, memory, dynamic, struct, allocation

我有动态内存分配的问题。这是代码，所以请帮忙。

```
#include <stdio.h>
int i;

typedef struct{
  int A;  
}node;

typedef struct Model
        {                            
            node *m;    
        } Model;
        Model M;

void initialize(Model *a, int size)
{
    a->m = (node*) malloc(size);
}

void model_init(Model *a, int len)
{
    int i;
    for (i=0;i<len;i++) a->m[i].A = 20;
}

int main()
{
initialize(&M ,10);
model_init(&M, 10);
for (i=0;i<10;i++) printf("%d\n",M.m[i].A);
} 
```

我正在尝试创建一个具有 10 个节点的模型，并且我想为变量 A 中的节点分配值。 printf 显示 (-1819044973, -1819044973, 14128019, 3969, 0, 0, 0 ...)

我只想说例如*Mm[2].A=20*

我究竟做错了什么？请帮忙。

泰

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T13:04:49.290

```
void initialize(Model *a, int size)
{
    a->m = (node*) malloc(sizeof(node) *size); // NOTICE HERE!!!!
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T13:05:47.327

您的`initialize`函数分配了一些字节，然后`model_init`假设有许多节点实例可用。 `node`大于 1 字节（至少 sizeof(int) 字节），因此您写入超出分配内存的末尾。

最简单的解决方法是更改`initialize`​​：

```
void initialize(Model *a, int elements)
{
    a->m = malloc(elements * sizeof(node));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T14:28:33.603

有关您不必强制转换 malloc 的更多信息： [我是否强制转换 malloc 的结果？](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)

# windows - Windows 上的虚拟/以编程方式生成的文件？

> ID：13683840
> 
> 赞同：0
> 
> 时间：2012-12-03T13:02:52.837
> 
> 标签：windows, file, named-pipes

我正在寻找类似于Windows 上的[CreateNamedPipe](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365150%28v=vs.85%29.aspx)的功能，它允许以编程方式按需生成文件内容。但是，它也需要支持搜索操作，所以我认为普通的命名管道将不起作用。或者是吗？

一些细节：该文件将被其他现有程序读取，并且在这种情况下无法更改。两种具体用途是： 1\. 实际数据在压缩的二进制 blob 中。2\. 实际数据在网络连接之后，使用自定义协议访问。在这两种情况下，“虚拟”文件都会像本地常规文件一样提供对日期的访问。

我确信这至少可以通过创建自定义文件系统设备驱动程序或使用现有网络文件系统并创建自定义服务器程序来实现。但这听起来很复杂（是吗？），不值得努力。

那么，除了将数据存储到常规临时文件之外，还有什么实用有效的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:14:42.017

您需要编写内核设备驱动程序，或利用现有的用户模式设备驱动程序框架之一，例如[UMDF](http://en.wikipedia.org/wiki/Windows_User_Mode_Driver_Framework)。您可以开始在 Wikipedia 上阅读相关内容。

# cocoa - Cocoa 绑定仅在窗口焦点更改时更新

> ID：13683842
> 
> 赞同：1
> 
> 时间：2012-12-03T13:03:04.757
> 
> 标签：cocoa, mono, cocoa-bindings, monomac

我正在使用 MonoMac 在 C# 中为 Mac 构建桌面下载管理器。

我的 XIB 有一个表视图，其列绑定到`NSArrayController`. 阵列控制器通过`IBOutlet`. 该数组包含一堆`HttpDownload`对象，这些对象派生自`NSObject`. 这些`HttpDownload`对象包含诸如`TotalSize`、`TotalDownloaded`、`Bandwidth`等属性。我用属性修饰了这些`[Export]`属性。

在控制器中，我将一些 HttpDownload 对象添加到`NSArrayController`using`AddObject`方法中。后台进程以`Task.Factory.StartNew()`异步方式开始下载，并在接收到数据时更新绑定的属性，例如 TotalDownloaded 和 Bandwidth。

我可以看到这些新值反映在表视图中，但只有在我“强制”更新 UI 时，例如通过使窗口失去焦点、获得焦点或通过单击窗口中的按钮。

我曾尝试在 IB 中设置持续更新值，但这没有任何区别（阅读文档，我认为不应该这样做）。

有谁知道让 UI “实时”更新绑定值，而不是仅在窗口事件发生时更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:07:56.327

我在发布这个问题后不久就发现了这一点。

似乎我们需要手动调用至少一个正在更新的键，例如，当我更新总下载量时`WillChangeValue()`：`DidChangeValue()`

```
WillChangeValue("DownloadedBytes");
DownloadedBytes += bytesRead;
DidChangeValue("DownloadedBytes"); 
```

就我而言，仅对其中一个更新的键调用这些方法似乎足以强制更新所有绑定值。

作为参考，在 Objective-C 中，这些选择器被称为`[self willChangeValueForKey:@"keyname"]`and `[self didChangeValueForKey:@"keyname"]`。

# visual-studio-2010 - Visual Studio 2010 可移植类库不允许我更改目标

> ID：13683848
> 
> 赞同：2
> 
> 时间：2012-12-03T13:03:36.770
> 
> 标签：visual-studio-2010, xamarin.ios, xamarin.android, portable-class-library

我正在尝试在 VS2010 中制作一个可移植的类库。默认情况下，它似乎是针对`.NET Framework 4 and higher`. 我需要以 4.03 或更高版本为目标，因为我需要添加一些功能 ( `System.Xml.Linq`)。但是当我尝试更改目标框架时，更改不起作用。我得到这个对话框：

![更改目标框架对话框](../Images/4976172b40bd59c9ec5df8e071ce5bed.png)

我可以选择其他框架之一并说`OK`，但是当我再次查看时，它设置回相同的 Framework 4.0 设置，并且我使用 4.03 功能的代码仍然无法编译。这里发生了什么？

**更新**：只要我不选择`Mono for Android`或，它确实让我选择 4.5 `VS Mono Touch`。看起来那些库中的某些东西需要 4.0，但我不明白为什么，因为 4.5 是向后兼容的。这是在 Mono 中使用的，所以我需要这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:54:31.290

我通过对可移植框架的配置文件进行一些黑客攻击来解决这个问题。首先，[阅读这篇文章](http://jpobst.blogspot.com/2012_04_01_archive.html)，了解如何为 MonoDroid 添加对 PCL 的库支持，以及[这篇](http://slodge.blogspot.com/2012/09/mvvmcross-vnext-portable-class.html)文章为 MonoTouch 做类似的事情。

在 PCL 项目的 .csproj 文件中，我找到了这一行：

```
<TargetFrameworkProfile>Profile95</TargetFrameworkProfile> 
```

指向此文件夹：

```
C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETPortable\v4.0\Profile\Profile95 
```

在该文件夹中，有一个名为的子文件夹，其中`SupportedFrameworks`缺少魔术文件`MonoAndroid,Version=v1.6+.xml`和`VSMonoTouch,Version=v1.0+.xml`. 我添加了这些，如链接帖子中所述，现在它可以工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:46:16.310

我已经在 git master 中实现了在 MonoDevelop 中挑选和选择 PCL 配置文件约束的功能，但尚未发布。

我相信这些功能会包含在 MonoDevelop 3.1.0 中

# iphone - 当用户禁用推送时，iOS 应用程序应该做什么？

> ID：13683849
> 
> 赞同：4
> 
> 时间：2012-12-03T13:03:38.703
> 
> 标签：iphone, ios, apple-push-notifications

我知道有可能检查用户是否禁用了推送设置，如[目标 c - 检测用户更改应用程序的通知设置中所述](https://stackoverflow.com/questions/10191006/objective-c-detect-when-user-change-the-apps-notifications-settings)。

根据上面的文章，即使用户禁用了应用程序的推送通知，也会发送推送通知。据我了解，我应该始终在`applicationDidFinishLaunching:`.

大多数示例看起来像这样，即忽略用户设置。

```
- (void)applicationDidFinishLaunching:(UIApplication *)app {
    // other setup tasks here....

    [[UIApplication sharedApplication] registerForRemoteNotificationTypes: (UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound)];

} 
```

如果应用程序应该考虑这些设置，那么正确的实现应该是什么样的？

我问这个问题的原因是因为我们有很多客户抱怨他们收到了推送通知，尽管他们禁用了推送通知。这似乎适用于 iOS 6。

作为开发人员，我应该处理用户禁用推送通知的情况吗？我一遍又一遍地阅读文档。特别是`application:didReceiveRemoteNotification:`. 它没有说明当用户禁用推送通知时是否调用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T18:21:15.677

确保您实施这些方法以了解设备是否已注册

```
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)_deviceToken {
        if ([application enabledRemoteNotificationTypes] < 4) {
         NSLog(@"Notifications are disabled for this application");
    return;
        }
      // The device is registered for notifications
}
- (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error{
    NSLog(@"FAILED TO REGISTER FOR PUSH NOTIFICATIONS");
    NSLog(@"%@", error.userInfo);
} 
```

每次启动您的应用程序时都可以注册推送通知。但是您必须确保实现上述方法以了解用户是否启用或禁用了应用程序的通知。

# java - Java 排序映射或数组

> ID：13683851
> 
> 赞同：1
> 
> 时间：2012-12-03T13:03:43.367
> 
> 标签：java

我有代码：

```
 List<ModelMap> nameCustomer = new ArrayList<ModelMap>();

    for (int i=1;i<150;i++) {
                    ModelMap map = new ModelMap();
                    map.put("name", "nazwa " + i);
                    map.put("surname", "nazwisko " + i);
                    map.put("number", "123 ");
                    nameCustomer.add(map);
                }

            ModelMap[] result = new ModelMap[nameCustomer.size()];
            ModelMap[] rowsArray = nameCustomer.toArray(result); 
```

如何按姓氏或数字对 nameCustomer（或 rowsArray）进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:08:01.613

您需要实现一个定义排序标准的[比较](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)
器， 然后您可以[`Arrays.sort`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28T%5B%5D,%20java.util.Comparator%29)用于数组或`Collections.sort`列表，或将所有内容转储到`SortedSet`（例如，`TreeSet`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:25:29.577

您可以使用该`Collections.sort(nameCustomer, comparator)`方法对列表进行排序。为此，您必须为 Comparator 编写代码。Comparator 的代码将是 -

```
public Comparator<ModelMap> getComparator(final String sortBy){
   if ("surname".equals(sortBy)) {
   return new Comparator<ModelMap>() {
   @Override int compare(ModelMap m1, ModelMap m2) 
    return m1.getSurname().compareTo(m2.getSurname());
   }};} 
     else if (condition) {// ...  }
      else {
        throw new IllegalArgumentException("invalid sort field '" + sortBy + "'"); }
       } 
```

我假设您`getSurname`在 ModelMap 类中编写了一个方法来获取姓氏。如果没有，则编写它以使上述代码正常工作。

您可以访问[此处](https://stackoverflow.com/questions/10527990/sorting-a-list-of-objects-based-on-different-data-members-in-java)获取更多帮助。干杯！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T13:05:06.467

您可能想要使用 Collections.Sort 包。列表保持“自然排序”以保持一致性。例如

```
 List<Name> names = Arrays.asList(nameArray);
    Collections.sort(names);
    System.out.println(names); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T13:07:14.703

使用 Colections.sort() 并给它一个自定义的 Comparator 类实现，它将按姓氏进行字符串比较。

或者使用 LinkedHashMap，它在 put() 和 get() 和键排序之后具有一致性。

我希望它有帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T13:12:24.833

您可以在 List 上实现自己的迭代器，可以对其进行参数化以仅返回您指定的内部键。

然后，在它周围使用标准分类器“迭代”就可以了。

# javascript - 淘汰赛事件处理

> ID：13683854
> 
> 赞同：0
> 
> 时间：2012-12-03T13:03:51.863
> 
> 标签：javascript, knockout.js

我有一个代码（你可以在[http://learn.knockoutjs.com/#/?tutorial=intro](http://learn.knockoutjs.com/#/?tutorial=intro)播放它，在播放之前单击在输出窗口中运行）：

HTML：

```
<div class="btn" style="margin-left: 15px;" data-bind="click: includeMyNumber">
   <input data-bind="checked: isIncludeMyNumber" data-val="true" id="IncludeMe" name="IncludeMe" style="margin: 0" type="checkbox" value="true" />&nbsp;
   Include my number (+<span>11111111111</span>) 
</div> 
```

Javascript：

```
 // This is a simple *viewmodel* - JavaScript that defines the data and behavior of your UI
function AppViewModel() {

    this.isIncludeMyNumber = ko.observable(false);

    this.includeMyNumber = function(){
       this.isIncludeMyNumber(!this.isIncludeMyNumber());
    }
}

// Activates knockout.js
ko.applyBindings(new AppViewModel()); 
```

问题是复选框单击事件处理无法正常工作。当我单击 [div class="btn"...] ...[/div] 区域内的空间时，复选框行为正常，但是当我单击复选框本身时，它不会被选中。在任何情况下，我怎样才能使其可检查？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:11:15.913

您的用例是在单击文本时选中复选框？

我在我的自定义绑定集合中为此进行了绑定

[https://github.com/AndersMalmgren/Knockout.Bindings](https://github.com/AndersMalmgren/Knockout.Bindings)

[http://jsfiddle.net/5nqw4/](http://jsfiddle.net/5nqw4/)

```
<input data-bind="checked: checked, label: { caption: 'Label with reference to input' }" type="checkbox" /> 
```

编辑：您还可以通过使用将复选框包装在标签元素中的标准技巧来解决此问题，例如[http://jsfiddle.net/7dTfM/](http://jsfiddle.net/7dTfM/)

# php - 使用 CURL 的支付过程中出现 SSL 错误

> ID：13683859
> 
> 赞同：0
> 
> 时间：2012-12-03T13:04:15.670
> 
> 标签：php, ssl, curl

我正在尝试在 php 中进行支付网关集成。当我从本地支付流程进行测试模式支付时工作正常。我已成功重定向到我的支付页面。我使用 CURL 将数据发布到支付网关服务器。

但是上传到服务器后我无法付款。我收到以下错误。SSL 连接错误(35)

我的代码如下。

```
$request_url= "https://mypaymentserver.com"
$url = $request_url;
$successurl = url::site('payment/textpartnerssuccess', 'http');               
$processurl = url::site('payment/textpartnersprocess', 'http');
$failurl = url::site('payment/textpartnersfail', 'http'); 

//Data bind
$invoiceno = commonfunction::randomkey_generator();
$postData = array(
    "url_succesfull" => $successurl,
    "url_process" => $processurl,
    "url_cancel" => $failurl,
    "item_id" => $jobid,
    "name" => $jobdetails[0]['job_title'],
    "currency" => $this->textpartners_currencycode,
    "price" => $amount,
    "token" => $invoiceno,
    "seller_op_id" => time(),
    "shipping_cost" => 0
);

$data = http_build_query($postData, NULL, '&');

// Create a new curl instance
$curl = curl_init();

// Set curl options
curl_setopt_array($curl, array(
    CURLOPT_URL            => $url,
    CURLOPT_POST           => TRUE,
    CURLOPT_POSTFIELDS     => $data,
    CURLOPT_SSL_VERIFYPEER => FALSE,
    CURLOPT_SSL_VERIFYHOST => FALSE,
    CURLOPT_RETURNTRANSFER => TRUE,
));

if (($response = curl_exec($curl)) === FALSE)
{
    // Get the error code and message
    $code  = curl_errno($curl);
    $error = curl_error($curl);

    curl_close($curl);// Close curl

    echo $error_msg = 'Payment API request for  failed: '.$error.'(' .$code.')';    exit;   
    Message::error($error_msg);

    // Parse the response
parse_str($response, $data);
}

curl_close($curl); // Close curl

// Parse the response
parse_str($response, $data); 
```

谁能帮我？提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:14:59.100

> 但是上传到服务器后我无法付款

当客户端无法连接到 SSL 服务器时（由于超时或协议错误），将报告错误 35。检查服务器是否可以解析名称，与指定主机建立传出连接，并通过端口 443 建立传出连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:51:17.417

多谢你们 。最后我通过在 curl 中添加以下行得到了解决方案。

curl_setopt($ch, CURLOPT_SSL_CIPHER_LIST, 'rsa_rc4_128_sha');

# python - 检查 repo 是否脏时出现 gitpython 错误

> ID：13683862
> 
> 赞同：2
> 
> 时间：2012-12-03T13:04:38.050
> 
> 标签：python, windows, git, msysgit, gitpython

[我在尝试使用gitpython](http://packages.python.org/GitPython/0.3.1/tutorial.html)检查存储库是否脏时收到错误，即未提交更改为跟踪文件：

```
import git
repo = git.Repo('')
print repo.is_dirty() 
```

错误：

```
Traceback (most recent call last):
  File "C:\dev\my_prog\test.py", line 8, in <module>
    print repo.is_dirty()
  File "C:\Python27\lib\site-packages\gitpython-0.3.2.rc1-py2.7.egg\git\repo\base.py", line 502, in is_dirty
    len(self.git.diff('HEAD', '--cached', *default_args)):
  File "C:\Python27\lib\site-packages\gitpython-0.3.2.rc1-py2.7.egg\git\cmd.py", line 227, in <lambda>
    return lambda *args, **kwargs: self._call_process(name, *args, **kwargs)
  File "C:\Python27\lib\site-packages\gitpython-0.3.2.rc1-py2.7.egg\git\cmd.py", line 456, in _call_process
    return self.execute(call, **_kwargs)
  File "C:\Python27\lib\site-packages\gitpython-0.3.2.rc1-py2.7.egg\git\cmd.py", line 377, in execute
    raise GitCommandError(command, status, stderr_value)
git.exc.GitCommandError: 'git diff HEAD --cached --abbrev=40 --full-index --raw' returned exit status 1: 
```

怎么来的？可能是什么问题呢？
注意我正在使用[msysgit在 Windows 7 上工作](https://github.com/msysgit/msysgit/wiki)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T07:39:18.153

考虑到[diff.py 的历史](https://github.com/gitpython-developers/GitPython/commits/master/git/diff.py)（变化不大），“ `git diff HEAD --cached ...`”命令可能由于某种原因在您的存储库中失败。
换句话说，它可能与您的特定本地存储库相关联，而不是该`repo.is_dirty()`方法中的实现问题。

调试它最可靠的方法是直接执行它并查看错误消息是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-29T11:33:06.423

尝试更新 gitpython 和 msysgit。使用 GitPython0.3.2 和 msysgit 1.7.9 时 -->`repo.is_dirty()`返回错误。当使用 GitPython 0.3.2 和 msysgit 1.9.1 -->`repo.is_dirty()`返回一个有效值。希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-15T15:46:14.970

就我而言，我尝试在命令行中运行 git，得到一个更具体的错误：

```
>git diff HEAD --cached --abbrev=40 --full-index --raw
cannot spawn less: No such file or directory 
```

我解决了将msysgit的bin文件夹放在路径中：

```
>set PATH=C:\Program Files\Git\mingw64\bin;%PATH% 
```

请注意，我还设置了变量 GIT_PYTHON_GIT_EXECUTABLE [https://github.com/gitpython-developers/GitPython/issues/26](https://github.com/gitpython-developers/GitPython/issues/26)，但我认为这与此错误无关

# java - 年轻代的垃圾回收问题

> ID：13683866
> 
> 赞同：0
> 
> 时间：2012-12-03T13:04:54.723
> 
> 标签：java, garbage-collection, jvm

当 Eden 空间年轻代满时，会触发 Minor GC。并且在minor GC过程中，Eden中的非自由对象和一个源Survivor空间将被复制到另一个目标Survivor空间。

我的问题是，如果目标 Survivor 空间已满，minor GC 怎么处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:52:34.993

年轻代有 3 个段 Eden Space，Survivor1 和 Survivor2。这些只是年轻一代的逻辑划分。所以对象会从 Eden Space 复制到 Survivor1，然后再复制到 Survivor2。

所以一般的minorcollection意味着collection发生在年轻代。如果年轻代已满，则对象将被复制到老年代。

同样，收集是次要还是主要取决于多个因素，其中之一是年轻一代的空间可用性。因此，如果年轻代中有足够的空间用于对象分配，那么它将是次要收集。但是如果 YG 中没有足够的可用空间，那么同一个集合可以变成主要的。

**JVM规范也没有谈论垃圾收集。所以它留给JVM实现者有自己的策略。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:21:17.510

如果无法进行/完成次要收集，则执行主要/完整收集。这通常是使用标记-扫描-压缩算法而不是复制算法来完成的……这也是完整收集成本高昂的原因之一。

但最终（如果你继续填满堆）一个完整的集合将无法回收足够的空间来继续，并且会抛出一个 OOME。（或者如果你使用`-XX:+UseGCOverheadLimit`，当花费在 GC 中的时间百分比超过指定阈值时，将抛出 OOME。）

# python - AttributeError - 模块在 threading.Thread 中不可用

> ID：13683869
> 
> 赞同：1
> 
> 时间：2012-12-03T13:05:03.130
> 
> 标签：python, django

在 Django 中，我编写了一个自定义命令，称为 update。该命令由 shell 脚本持续调用并更新数据库中的一些值。更新在线程中完成。我把这个类与自定义命令放在同一个模块中做所有线程相关的事情。

在我的生产服务器上，当我尝试运行该 shell 脚本时，当我尝试访问我的模型时出现错误：

```
antennas = Antenna.objects.all() 
```

错误是：

```
AttributeError: 'NoneType' object has no attribute 'objects' 
```

但是，如您所见，我确实在该文件中导入了 app.models.Antenna。所以对我来说，似乎对整个站点的引用在线程类中以某种方式“丢失”了。

### 站点/应用程序/管理/命令/update.py

（我试图在这里删除所有非必要的代码，因为它会使所有内容变得混乱，但我保持导入完好无损）

```
 from django.core.management.base import NoArgsCommand, CommandError

from django.utils import timezone
from datetime import datetime, timedelta
from decimal import *
from django.conf import settings
from _geo import *

import random, time, sys, traceback, threading, Queue
from django.db import IntegrityError, connection

from app.models import Bike, Antenna

class Command(NoArgsCommand):
  def handle_noargs(self, **options):
    queue = Queue.Queue()
    threadnum = 2
    for bike in Bike.objects.filter(state__idle = False):
      queue.put(bike)
    for i in range(threadnum):
      u = UpdateThread(queue)
      u.setDaemon(True)
      u.start()
    queue.join()
    return

class UpdateThread(threading.Thread):
  def **init**(self, queue):
    threading.Thread.**init**(self)
    self.queue = queue

def run(self):
    antennas = Antenna.objects.all()
    while not self.queue.empty():
      try:
        [...]
      except Exception:
        traceback.print_exc(file=sys.stdout)
      finally:
        self.queue.task_done() 
```

当我尝试

```
from app.models import Antenna
```

在 UpdateThread 类中我得到一个错误：

```
ImportError: No module named app.models 
```

该网站在网络服务器上运行良好。那里没有与模型相关的问题，只有当我在线程内执行任何操作时 - 所有 app.models-imports 都失败了。此外，在我看来，完全相同的**配置**（我正在使用 git）**确实**在另一台运行相同操作系统（debian wheezy、python 2.7.3rc2 和 django 1.4.2）的机器上运行。

很可能我在这里遗漏了一些关于线程的明显内容，但我现在被困得太久了。非常感谢您的帮助！

PS：我确实检查了循环导入-无论如何这些都不应该发生，因为我可以在另一个（管理）类中使用我的模型，对吗？

# unix - 如何检测EC2实例已经空闲

> ID：13683873
> 
> 赞同：1
> 
> 时间：2012-12-03T13:05:06.957
> 
> 标签：unix, ubuntu, amazon-web-services, amazon-ec2

我正在寻找如何解决这个问题的想法，基本上是测量 EC2 实例活动。

有没有办法通过 AWS 知道这一点？如果没有，我如何测量例如 Ubuntu 实例上的活动。考虑到我将运行一些进程并查看它们的活动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:21:29.263

我不确定您如何定义“实例活动”，但您可以使用[Amazon CloudWatch监控您的](http://aws.amazon.com/cloudwatch/)[Amazon EC2](http://aws.amazon.com/ec2/)实例，然后查询*CPUUtilization*指标以获取有关您的实例使用多少 CPU 的信息（请参阅[Amazon Elastic Compute Cloud Dimensions 和详细的](http://docs.amazonwebservices.com/AmazonCloudWatch/latest/DeveloperGuide/CW_Support_For_AWS.html#ec2-metricscollected)[指标](http://docs.amazonwebservices.com/AmazonCloudWatch/latest/DeveloperGuide/CW_Support_For_AWS.html#ec2-metricscollected)）。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-26T06:49:24.517

最好通过 2 个指标来衡量和比较，网络流量和 CPU 利用率

参考：[https ://www.trendmicro.com/cloudoneconformity/knowledge-base/aws/EC2/idle-instance.html#:~:text=Using%20AWS%20Console-,01%20Sign%20in%20to%20the% 20AWS%20Management%20Console.,to%20identify%20the%20right%20resource](https://www.trendmicro.com/cloudoneconformity/knowledge-base/aws/EC2/idle-instance.html#:%7E:text=Using%20AWS%20Console-,01%20Sign%20in%20to%20the%20AWS%20Management%20Console.,to%20identify%20the%20right%20resource) )。*

# c# - WPF 应用程序在 Windows Server 2003/2008 中不起作用

> ID：13683876
> 
> 赞同：0
> 
> 时间：2012-12-03T13:05:11.133
> 
> 标签：c#, .net, wpf, windows-server-2008

我的 wpf 应用程序无法在 Windows Server 2003/2008 中运行。当我单击图标时，出现以下错误

```
Problem signature:
Problem Event Name: CLR20r3
Problem Signature 01:   networksolution.exe
Problem Signature 02:   1.0.0.0
Problem Signature 03:   50bc6790
 Problem Signature 04:  System.Data.SqlServerCe
Problem Signature 05:   3.5.1.0
Problem Signature 06:   4b743b2d
Problem Signature 07:   49e
Problem Signature 08:   1d
Problem Signature 09:   System.Windows.Markup.XamlParse
OS Version: 6.1.7600.2.0.0.272.7
Locale ID:  1033
Additional Information 1:   0a9e
Additional Information 2:   0a9e372d3b4ad19135b953a78882e789
Additional Information 3:   0a9e
Additional Information 4:   0a9e372d3b4ad19135b953a78882e789

Read our privacy statement online:
http://go.microsoft.com/fwlink/?linkid=104288&clcid=0x0409

If the online privacy statement is not available, please read our privacy statement     offline:
C:\Windows\system32\en-US\erofflps.txt 
```

它没有显示任何窗口

现在做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:08:09.537

您的应用程序是否使用 Microsoft SQL CE？如果是这样，我建议您检查服务器是否安装了 SQL CE 引擎。

从您显示的错误消息来看，它似乎可能丢失了。

# android - 如何将 SerialExecutor 与 AsyncTask 一起使用（API < 11）

> ID：13683877
> 
> 赞同：2
> 
> 时间：2012-12-03T13:05:15.547
> 
> 标签：android, android-asynctask

我有一个应用程序，供护理人员使用他们的 Android 手机登录系统。他们扫描二维码或刷 NFC 标签以获取客户的信息、扫描时间和位置。后者信息构成交易。交易被放置在手机的数据库中，并通过 HTTP 提交给服务器。

一切正常，因为所有事务都放在数据库中并发布到 Web 服务，直到我必须同时进行两个事务。事务是通过调用 AsyncTask 进行的，因为它是网络调用，因此不会阻塞 UI 线程。两个事务都对 Web 服务进行，但并非所有数据都发送到 DB。我已经注释掉了一些代码并一次发布了一篇异步帖子，然后数据就可以正常发送了。

**问题**

当一个 AsyncTask 运行时，另一个启动。发生这种情况时，第一个 AsyncTask 无法正常工作。我发现以下线程存在类似问题，并且使用 SerialExecutor 似乎是答案。

[串行执行器](https://stackoverflow.com/questions/6645203/android-asynctask-avoid-multiple-instances-running)

```
https://stackoverflow.com/questions/6645203/android-asynctask-avoid-multiple-instances-running 
```

谁能帮我在 SerialExecutor 中实现以下 2 个 AsyncTasks，我对 Android 还很陌生，我正在努力开始这一点。我希望 apd 执行并完成，然后 apd3 执行。全部以串行方式。

在此先感谢马特

```
 String temp_tagType = cursor.getString(cursor
                                                .getColumnIndex(LoginValidate.C_TYPE));
    String temp_tagCompId = cursor.getString(cursor
                                                .getColumnIndex(LoginValidate.C_COMPANY_ID));
   String temp_PersonId = cursor.getString(cursor
                                                .getColumnIndex(LoginValidate.C_PERSON_ID));
    String temp_tagName = cursor.getString(cursor
                                                .getColumnIndex(LoginValidate.C_NAME));
        String temp_tagId = cursor.getString(cursor
                                                .getColumnIndex(LoginValidate.C_TAG_ID));
        String temp_tagScanTime = cursor.getString(cursor
                                                .getColumnIndex(LoginValidate.C_TAG_SCAN_TIME));
    String temp_tagLatitude = cursor.getString(cursor
                                                .getColumnIndex(LoginValidate.C_TRANSACTIONS_LATITUDE));
    String temp_tagLongitude = cursor.getString(cursor
                                                .getColumnIndex(LoginValidate.C_TRANSACTIONS_LONGITUDE));
                                        if(temp_tagId == null){
                                            temp_tagId = "notag";
                                        }
                                        String manualM = "M";
                                         Log.e(TAG, " temp name and status = " + temp_tagName + " " + manualM);
                                    ////////insert the temp variables with the status set to M  
                                        ContentValues values = new ContentValues();
                                        values.putNull(LoginValidate.C_ID);
                                        values.put(LoginValidate.C_TYPE, temp_tagType);
                                        values.put(LoginValidate.C_COMPANY_ID, nfcscannerapplication.getCompId());
                                        values.put(LoginValidate.C_PERSON_ID, temp_PersonId);
                                        values.put(LoginValidate.C_NAME, temp_tagName);
                                        values.put(LoginValidate.C_TAG_ID, temp_tagId);
                                        values.put(LoginValidate.C_STATUS, manualM);
                                        values.put(LoginValidate.C_TAG_SCAN_TIME, manualLogoutTime);
                                        values.put(LoginValidate.C_TRANSACTIONS_LATITUDE, temp_tagLatitude);
                                        values.put(LoginValidate.C_TRANSACTIONS_LONGITUDE, temp_tagLongitude);

                                        DateTime now = new DateTime();
                                        DateTimeFormatter df = DateTimeFormat.forPattern("yyyy-MM-dd H:mm:ss.SSS");
                                        String formattedNowTime = df.print(now);
                                        Log.e(TAG, "formattedNowTime = " + formattedNowTime);
                                        DateTimeFormatter df2 = DateTimeFormat.forPattern("yyyy-MM-dd H:mm:ss.SSS");
                                        String manualTime = df2.print(timeSetOnSpinner);
                                            Log.e(TAG, "about to put " + temp_tagName + " into DB");
                                        nfcscannerapplication.loginValidate.insertIntoTransactions(values);

                                        String[] params = new String[]{nfcscannerapplication.getCompId(), temp_tagId, temp_PersonId, nfcscannerapplication.getCarerID(),
                                                manualTime, formattedNowTime, manualM, getDeviceName(), temp_tagLatitude, temp_tagLongitude}; 
                                        AsyncPostData apd = new AsyncPostData();
                                        apd.execute(params);

                                         ///////////////now carry on as usual with the last actual tag that has been scanned
                                        Log.e(TAG, "about to insert the current record after inserting the manual logout");

                                        if(tagId == null){
                                            tagId = _tagId;
                                        } 

                                        ContentValues values3 = new ContentValues();
                                        values3.putNull(LoginValidate.C_ID);
                                        values3.put(LoginValidate.C_TYPE, tagType);
                                        values3.put(LoginValidate.C_COMPANY_ID, nfcscannerapplication.getCompId());
                                        values3.put(LoginValidate.C_PERSON_ID, tagPerson);
                                        values3.put(LoginValidate.C_NAME, tagUserName);
                                        values3.put(LoginValidate.C_TAG_ID, tagId);
                                        values3.put(LoginValidate.C_STATUS, IN);
                                        values3.put(LoginValidate.C_TAG_SCAN_TIME, tagScanTime.getMillis());
                                        values3.put(LoginValidate.C_TRANSACTIONS_LATITUDE, tagLatitude);
                                        values3.put(LoginValidate.C_TRANSACTIONS_LONGITUDE, tagLongitude);
                                        // make the current transaction out
                                        DateTime now3 = new DateTime();
                                        DateTimeFormatter df3 = DateTimeFormat.forPattern("yyyy-MM-dd H:mm:ss.SSS");
                                        String formattedNowTime3 = df3.print(now3);
                                        Log.e(TAG, "formattedNowTime = " + formattedNowTime3);

                                        String formattedTagScanTime3 = df3.print(tagScanTime);
                                        Log.e(TAG, "about to put " + tagUserName + " into DB"); 
                                        nfcscannerapplication.loginValidate.insertIntoTransactions(values3);

                                        String[] params3 = new String[]{nfcscannerapplication.getCompId(),  tagId, tagPerson, nfcscannerapplication.getCarerID(),
                                                formattedTagScanTime3, formattedNowTime, IN, getDeviceName(), tagLatitude, tagLongitude}; 
                                        AsyncPostData apd3 = new AsyncPostData();
                                        apd3.execute(params3); 
```

.

# javascript - javascript代码使url链接未定义

> ID：13683878
> 
> 赞同：1
> 
> 时间：2012-12-03T13:05:18.973
> 
> 标签：javascript

我正在处理这个 javascript 代码，什么时候进入头脑，我刷新它进入 404 页面。

请有人帮忙。

```
<script type="text/javascript">
function recordOutboundLink(link, category, action) {
    try {
        var myTracker = _gat._getTrackerByName();
        _gaq.push(['myTracker._trackEvent', category, action]);
        setTimeout('document.location = "' + link.href + '"', 100)
    } catch (err) { }
}
$(document).ready(function () { $('#myid').click(recordOutboundLink(this, 'regular   xxxxx', 'xxxx.example.com')); });
 </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:07:52.170

您正在尝试将结果注册`recordOutboundLink()`为单击处理程序，导致该函数首先运行，评估`window.href`为要重定向到的页面。的值`window.href`通常是`undefined`，因此浏览器将尝试重定向到`http://undefined`或类似的东西。

相反，您应该只在单击某些内容时执行该函数，如下所示：

```
$(document).ready(function () { 
    $('#myid').click(function() {
        recordOutboundLink(this, 'regular   xxxxx', 'http://xxxx.example.com');
        return false;
    }); 
```

我相信谷歌文档提到了这样的事情：

```
<a href="bla bla" onclick="recordOutboundLink(this, 'regular crap', 'http://www.example.com'); return false;">tada click me</a> 
```

**编辑**

您的位置应始终是绝对的，即以 开头`http://`，`https://`或简单地`//`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:08:03.910

您需要将完整的 url 传递给方法，即与`http://`部分

所以要么使用：

```
.click(recordOutboundLink(this, 'regular   xxxxx', 'http://xxxx.example.com')) 
```

或者

```
.click(recordOutboundLink(this, 'regular   xxxxx', '//xxxx.example.com')) 
```

# seo - 如何在 RESTful URL 中使用 slug？

> ID：13683888
> 
> 赞同：0
> 
> 时间：2012-12-03T13:05:57.100
> 
> 标签：seo, slug, restful-url

根据[当前的最佳实践](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)，留言板上给定线程的 RESTful URL 应如下所示：

```
http://domain/forum/threads/3 
```

URL 应该包含关键字（slug）也是一种常见的 SEO 做法，因此上述 URL 可能会变成：

```
http://domain/forum/threads/3/title-of-this-particular-thread 
```

现在，再次根据我在第一段中链接到的指南编辑此线程，URL 将是：

```
http://domain/forum/threads/3/edit 
```

当有人开始一个标题为“编辑”的线程时会发生什么？应该如何决定是否显示或编辑线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:09:26.787

代替`http://domain/forum/threads/3/title-of-this-particular-thread`

你应该做`http://domain/forum/threads/3-title-of-this-particular-thread`

这将防止冲突，并且与 SEO 一样友好。有几种方法可以做到这一点，但最简单的方法是在模型中添加一个 to_param 方法来自动进行转换：

```
class Thread < ActiveRecord::Base
  to_param
    "#{id}-#{title}"
  end
end 
```

如果您需要比这更多的灵活性，或者不想在所有模型中重复它，您可以使用[friendly_id](https://github.com/norman/friendly_id) Gem。

# zend-framework2 - 如何在 ZF2 中获取当前视图

> ID：13683896
> 
> 赞同：4
> 
> 时间：2012-12-03T13:06:26.920
> 
> 标签：zend-framework2, viewrendering

有没有办法让当前视图在 zend 框架 2 中呈现？

我相信事件系统应该可以做到这一点，但我似乎无法让它发挥作用。

我想获取此信息的原因是我可以自动包含一个同名的 .js 文件，这样可以节省我每次在操作中都必须指定此规则的时间。

非常感谢，汤姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T07:37:16.277

我不太清楚在 ZF2 中渲染当前视图是什么意思，但这里是如何自动添加以操作命名的 js 文件的方法。只需将其放入您的控制器中：

```
public function onDispatch(MvcEvent $mvcEvent)
{
    $renderer = $this->serviceLocator->get('Zend\View\Renderer\PhpRenderer');
    $actionName = $mvcEvent->getRouteMatch()->getParam('action');
    $jsFile = $actionName . '.js';
    $baseUrl = $mvcEvent->getRouter()->getBaseUrl();
    $renderer->headScript()->appendFile($baseUrl . '/js/' . $jsFile);

    return parent::onDispatch($mvcEvent);
} 
```

当然，您可能需要为您的 js 文件位置和名称调整代码。onDispatch 方法在操作之前自动调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:09:06.790

谢谢你，

您的示例运行良好，我在下面对其进行了修改以附加到一个事件，以便它适用于每个控制器/模块。为此，我将它包含在我的应用程序模块的 onBootstrap 函数中。

```
$events = StaticEventManager::getInstance();

    $events->attach('Zend\\Mvc\\Application', 'dispatch', function(\Zend\EventManager\Event $event)
    {
        $baseUrl = $event->getRouter()->getBaseUrl();
        $renderer = $event->getApplication()->getServiceManager()->get('Zend\View\Renderer\PhpRenderer');

        $action = $event->getRouteMatch()->getParam('action');
        $controller = $event->getRouteMatch()->getParam('controller');

        if (strlen($controller) > 0)
        {
            list($module, $_null, $controller) = explode('\\', $controller);

            $renderer->headScript()->appendFile($baseUrl . '/module/' . $module . '/view/' . strtolower($module) . '/' . strtolower($controller) . '/' . strtolower($action) . '.js');
            $renderer->headScript()->appendFile($baseUrl . '/module/' . $module . '/view/' . strtolower($module) . '/' . strtolower($module) . '.js');
        }
    }); 
```

再次感谢您为我指明了正确的方向。

# visual-studio - WindowsCE项目，编译部署

> ID：13683897
> 
> 赞同：0
> 
> 时间：2012-12-03T13:06:30.233
> 
> 标签：visual-studio, windows-ce

我有一个为 WindowsCE 编写的几年前的项目，我需要重建它并将其部署到设备上。

当我尝试打开项目时，它会启动 Visual Studio 2008 并报告无法在其中打开项目的错误，因为不支持 .vddproj 和 .csproj。

我需要安装什么才能打开这些项目？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:10:39.770

您是否已随 Visual Studio 安装了 C# 和智能设备可编程性？您可能必须返回安装媒体并更新安装以确保包含这些部分。

# xml - XPath 属性值解析

> ID：13683898
> 
> 赞同：1
> 
> 时间：2012-12-03T13:06:32.420
> 
> 标签：xml, xpath

我有这样的简单 XML 结构：

```
<project>
  <frame>
    <object type="Circle" radius="5"/>
    <object type="Square" side ="4"/>
  </frame>
</project> 
```

我应该使用什么路径字符串（XPath 1.0）来接收对象的半径属性值，该类型属性等于“Circle”。

```
/project/frame/object[@type="Circle"]/@radius 
```

这是对的吗？

**已编辑**：是的，它确实是正确的，我已经使用工具进行了检查，这是在评论中建议我的。但是返回的字符串是：

```
 radius="5" 
```

有没有办法只接收属性值 - “5”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:39:54.710

尝试这个：

```
doc("c:\temp\temp.xml")
/data(/project/frame/object[@type="Circle"]/@radius) 
```

# java - 跨不同包中的多个 UiBinder 的单个 CSS 样式表

> ID：13683905
> 
> 赞同：2
> 
> 时间：2012-12-03T13:06:54.773
> 
> 标签：java, gwt, uibinder

我有一个 GWT 2.4 应用程序，它在不同的客户端包中有许多 UiBinders，设置如下：

*   com.xxx

    *   项目.gwt.xml
*   com.xxx.client

    *   入口点.java
    *   样式表.css
*   com.xxx.client.package1

    *   Page1.java
    *   Page1.ui.xml
    *   样式表.css
*   com.xxx.client.package2

    *   Page2.java
    *   Page2.ui.xml
    *   样式表.css
*   com.xxx.client.package3

    *   Page3.java
    *   Page3.ui.xml
*   战争

    *   索引.html
    *   global_stylesheet.css

在我的 ui.xml 文件中，我必须引用与 UiBinder 位于同一包中的 stylesheet.css 文件。我一直在尝试引用 global_stylesheet.css 文件，但没有运气。理想情况下，我希望能够仍然使用 {style.xxx} 应用样式的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:05:05.270

您可以将中央 ClientBundle 与 CssResource 一起使用`@Source("global_stylesheet.css")`，并从您的 UiBinder 模板中引用它：

```
<ui:with type="mypackage.client.MyClientBundle" field="myClientBundle"/> 
```

所以你可以像这样使用它：

```
<g:Label addStyleNames="{myClientBundle.myCssResource.example}"/> 
```

但是你必须将 global_stylesheet.css 放在你的类路径中的某个地方——否则它不可能被编译。

另外，不要忘记在 CssResource 上调用 ensureInjected()。

# soapui - SOAPUI 调用更新方法，然后调用 get 来检查更新是否有效

> ID：13683906
> 
> 赞同：0
> 
> 时间：2012-12-03T13:06:58.710
> 
> 标签：soapui

我正在使用 SOAP UI 来测试我编写的一些 Java SAOP Web 服务。我正在尝试调用更新方法，然后调用 get 方法来验证断言中的结果。现在，Update 方法不返回任何结果（我必须调用 get 方法来验证结果的原因）所以我是否被迫总是有两个步骤来执行此操作？或者可以将整个事情整合到一个步骤中以简化我的单元测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:06:38.043

无论如何，当更新调用成功时，您是否可以重写您的网络服务以返回更多信息？SoapUI 只会显示您编写的服务所公开的任何内容。

但是要尝试并实际回答您的问题，假设在您进行更新时除了某种状态代码之外什么都没有返回，是的，您将始终需要为此执行两个步骤。您可以设置属性来存储您需要的标准，并通过在实际测试中限定它们来使用这些属性。

# ios - NSInvalidUnarchiveOperationException 在没有自动布局的情况下发生

> ID：13683907
> 
> 赞同：1
> 
> 时间：2012-12-03T13:07:01.737
> 
> 标签：ios, exception, ios6, interface-builder, xcode4.5

在运行 iOS 5.1 的设备上进行测试时，有一个`NSInvalidUnarchiveOperationException`. 我已经搜索了这个问题，并确保没有检查任何 nib 文件的 autoLayout，但错误仍然存​​在。有任何想法吗？使用 xCode 4.5。不过，这不会发生在运行 iOS 6 的设备上。

日志：

```
*** Terminating app due to uncaught exception 'NSInvalidUnarchiveOperationException', reason: 'Could not instantiate class named NSLayoutConstraint'
*** First throw call stack:
(0x325dc88f 0x34632259 0x325dc789 0x325dc7ab 0x322ea54d 0x322ea6bb 0x322ea423 0x3227b001 0x3227c861 0xce38b 0xa4009 0xa2f3b 0x32045b95 0x3209f8af 0x32048913 0x32048503 0x3203caff 0x2e2a2a7 0x3203c7d5 0x139929 0x1513d3 0x325363fd 0x3201ee07 0x3201edc3 0x3201eda1 0x3201eb11 0x3201e73d 0x32011b87 0x325b0b1b 0x325aed57 0x325af0b1 0x325324a5 0x3253236d 0x31689439 0x32031cd5 0x92e89 0x92e60) 
```

`Document Versioning`Deployment 设置为 iOS 6.0是否会导致此问题？

# django - 评估查询集，然后在其上调用过滤器

> ID：13683910
> 
> 赞同：1
> 
> 时间：2012-12-03T13:07:14.727
> 
> 标签：django

有没有办法评估一个查询集，然后在它上面调用过滤器？在这个例子中我只想访问数据库一次

例子：

```
qs = Model.objects.all()

for element in array:
  current = qs.filter(name=element) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:18:15.900

这里的调用`qs.filter()`会生成一个新的查询集，它与 / 无关`qs`。
此外，根据[doc](https://docs.djangoproject.com/en/dev/ref/models/querysets/#when-querysets-are-evaluated)，`qs`并`current`在某些操作之前保持未评估。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:52:05.843

您可以在 Python 中进行过滤：

```
qs = Model.objects.all()

for element in array:
    current = filter(lambda x: x.name==element, qs) 
```

但是，如果您的查询集和数组很大，这是低效的。或者，您可以按元素对查询集进行分组：

```
from collections import defaultdict # 
qs = Model.objects.all()
grouped = defaultdict(list)
for obj in qs:
    grouped[obj.name].append(obj)

for element in array:
    current = grouped[element] 
```

如果`array`仅包含一小部分`name`值，则限制查询集可能是有意义的：

```
qs = Model.objects.filter(name__in=array) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T19:35:38.977

如果您想通过一击数据库来构建查询，您将需要使用 Q 对象：

```
from django.db.models import Q
q = Q()
for element in array:
    q &= Q(name=element)
qs = Model.objects.filter(q) 
```

# java - SQLGrammarException：没有为参数 1 hibernate 指定值

> ID：13683912
> 
> 赞同：2
> 
> 时间：2012-12-03T13:07:23.343
> 
> 标签：java, mysql, hibernate, hql

我有 1-1 映射：

```
@OneToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL, mappedBy = "messageDetails")
public MessageEntry getMessageEntry() {
    return messageEntry;
}

@OneToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
public MessageDetails getMessageDetails() {
    return messageDetails;
} 
```

我想删除一些messageDetails：

```
 if (entries.size()>0)
        sess.createQuery(
                "DELETE MessageDetails d " +
                "WHERE d.messageEntry IN (:entries)")
                .setParameterList("entries",entries).executeUpdate(); 
```

其中条目是列表。

我在日志中得到这个 SQL：

```
19:48:13,594 DEBUG SQL:104 - delete from MessageDetails where id in (? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ,
 ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ,
 ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ,
 ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ,
 ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ,
 ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ,
 ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ,
 ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ,
 ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ,
 ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ?) 
```

这个堆栈跟踪：

```
Exception in thread "main" org.hibernate.exception.SQLGrammarException: No value specified for parameter 1
    at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:122)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at $Proxy18.executeUpdate(Unknown Source)
    at org.hibernate.hql.internal.ast.exec.BasicExecutor.execute(BasicExecutor.java:95)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.executeUpdate(QueryTranslatorImpl.java:413)
    at org.hibernate.engine.query.spi.HQLQueryPlan.performExecuteUpdate(HQLQueryPlan.java:282)
    at org.hibernate.internal.StatelessSessionImpl.executeUpdate(StatelessSessionImpl.java:420)
    at org.hibernate.internal.QueryImpl.executeUpdate(QueryImpl.java:116)
    at org.kriyak.hbm.Archive.updateFilesStateless(Archive.java:228)
    at org.kriyak.parser.IndexArchiveFast.main(IndexArchiveFast.java:28)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: java.sql.SQLException: No value specified for parameter 1 
```

我使用无状态会话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-11T09:27:48.273

我通过将集合加入查询来解决这个问题，然后对加入的列进行操作：

```
SELECT a FROM Anything a JOIN a.thisIsACollection coll WHERE coll IN :param 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:24:58.443

我不认为休眠会自动将集合转换为逗号分隔的参数值。

```
 sess.createQuery(
                "DELETE MessageDetails d " +
                "WHERE d.messageEntry IN (:entries)")
                .setParameterList("entries",entries).executeUpdate(); 
```

对于条目，我建议将其转换为逗号分隔值或在批处理模式下对每个条目使用单独的删除语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:28:27.867

尝试使用您将集合对象类型作为参数传递的其他方法签名

```
setParameterList(String name, Collection vals, Type type) 
```

# inno-setup - Innosetup - 识别标准用户的管理员用户和 dll 注册

> ID：13683914
> 
> 赞同：3
> 
> 时间：2012-12-03T13:07:32.440
> 
> 标签：inno-setup, pascalscript

在我的 innosetup 应用程序安装期间，我正在注册一个 dll（用于 Windows 右键单击​​上下文菜单和图标覆盖，类似于 dropbox/tortoise cvs）并执行一些其他操作。到目前为止，我只为管理员用户安装应用程序。该dll会在HKCR、HKLM中写入信息。现在，我也计划支持其他非管理员用户（标准用户）的安装。

我尝试了以下几件事，

*   将所需的权限从管理员更改为无。
*   将所有注册表更新从 HKLM 更改为 HKCU。

但是，如果我尝试安装应用程序，由于无法在 HKCR 上写入，dll 注册失败。所以，我打算只为管理员用户注册 dll。对于其他普通用户，计划跳过 dll 注册并做其他事情。但我不知道，如何识别当前用户是管理员用户。任何人都可以让我知道以下事情，

*   我们能否确定当前登录用户是否是管理员/高级用户？
*   我们可以在没有管理员权限的情况下注册 dll（编写 HKCR）吗？

感谢您的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:11:13.543

您可以检查当前用户是管理员还是高级用户：

```
[Code]
function IsRegularUser(): Boolean;
begin
    Result := not (IsAdminLoggedOn or IsPowerUserLoggedOn);
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-08T23:33:06.623

如果您正在为 HKLM 安装东西，那么您已经在为所有用户进行安装，而不仅仅是管理员用户。所以你不应该改变它。

在安装程序中正确的做法是永远不要写信给 HKCU。（为了获得最佳结果，*也*永远不要写信给 HKCR——而是写信给 HKLM\Software\Classes。）

# javascript - 带有灰色框的 GridLayout 预渲染 - WinJS

> ID：13683915
> 
> 赞同：0
> 
> 时间：2012-12-03T13:07:38.217
> 
> 标签：javascript, css, windows-8, winjs, grid-layout

迫不及待地想在商店中获得我的第一个应用程序！:) 不幸的是，我在完成的过程中遇到了一些小问题......

* * *

**我所有的 GridLayouts 区域都预渲染，灰色框向右移动。[见下图]**

![在此处输入图像描述](../Images/64fade66bc0c4d9a9c8c48c02cb756d9.png)

![在此处输入图像描述](../Images/3104e159dba1b160c532a6cebf580bfd.png)

* * *

内容通过 XHR 加载，图像托管在 Web 服务器上。

当灰色框渲染时，图像也已加载。我期待图像在呈现框后加载，就像它发生在常规网页上一样。

* * *

HTML

```
 <div class="fragment groupeditemspage">
    <header aria-label="Header content" role="banner">
        ...
    </header>
    <section role="separator">

    </section>
    <section aria-label="Main content" role="main" id="home-list-views">

        <div class="groupeditemslist win-selectionstylefilled" id="homeItems" aria-label="List of groups" data-win-control="WinJS.UI.ListView" data-win-options="{ selectionMode: 'none', maxRows: 4 }"></div>

    </section>
</div> 
```

CSS

```
.groupeditemspage section[role=main] {
    -ms-grid-row: 3;
    -ms-grid-row-span: 3;
    display: -ms-flexbox;
    -ms-flex-direction: row;

    height: 100%;
    overflow-x: auto;
    position: relative;
    width: 100%;
    z-index: 0;

}

#collection-list-view-container{
    column-fill: auto;
    column-gap: 15px;
    column-width: auto;

    margin-left: 120px;
    margin-top: 20px;

    width: auto;
    height: 80%;

    .win-listview{
        margin-top: 15px;
        height: 100%;
    }

    .win-surface{
        margin: 0px;
    }
} 
```

更多 CSS

```
 .groupeditemspage .groupeditemslist .win-horizontal.win-viewport .win-surface {
            margin-bottom: 60px;
            margin-left: 45px;
            margin-right: 115px;
            //margin-top: 128px;
            margin-top: 20px;
        }

        .groupeditemspage .groupeditemslist .win-groupheader {
            padding: 0;
        }

        /* Use grid and top level layout for truncation */
        .groupeditemspage .groupeditemslist .group-header {
            -ms-grid-columns: minmax(0, max-content) 7px max-content;
            -ms-grid-rows: max-content;
            display: -ms-inline-grid;
            line-height: 1.5;
        }

        /* Override default button styles */
        .groupeditemspage .groupeditemslist .group-header, .group-header:hover, .group-header:hover:active {
            background: transparent;
            border: 0;
            margin-bottom: 1px;
            margin-left: 5px;
            margin-right: 5px;
            margin-top: 1px;
            min-height: 0;
            padding: 0;
        }

            .groupeditemspage .groupeditemslist .group-header .group-title {
                display: inline-block;
            }

            .groupeditemspage .groupeditemslist .group-header .group-chevron {
                -ms-grid-column: 3;
                display: inline-block;
            }

                .groupeditemspage .groupeditemslist .group-header .group-chevron::before {
                    content: "\E26B";
                    font-family: 'Segoe UI Symbol';
                }

        .groupeditemspage .groupeditemslist{

            .win-item{
                box-shadow: 0px 0px 10px 3px #ddd;
            }

            .win-container {
               margin-bottom: 1px;
               margin-left: 1px;
               margin-right: 1px;
               margin-top: 1px;
            }
        }

        .groupeditemspage .groupeditemslist .item {
            -ms-grid-columns: 1fr;
            -ms-grid-rows: 1fr 90px;
            display: -ms-grid;
            height: 128px*2-2px;
            width: 128px*2-2px;

            border: 1px solid #ddd;

            .item-image{

            }

            &.product{
                //height: 128px-2px;
                //width: 128px-2px;
                height: 128px-2px-5px;
                width: 128px-2px-5px;

                -ms-grid-rows: 1fr 25px;

                .item-overlay{
                    -ms-grid-row: 2;
                    background: white;
                    text-align: center;
                    opaciy: 0.9;
                    span.icon-star{
                        color: orange;
                    }
                }
                .item-image{
                    -ms-grid-row: 1;
                    text-align: center;
                    //height: 100%;
                    //-ms-grid-row-span: 1;
                    img{
                        height: 140px;
                        width: 140px;
                    }
                }
            }
            &.category{
                //height: 128px-2px;
                //width: 128px*2-2px;
                height: 128px-2px;
                width: 256px-2px;

                -ms-grid-rows: 1fr 40px;
                .item-overlay{
                    //display: none;
                    background: #111;
                    color: white;
                    //font-weight: bold;
                    //font-size: 24px;
                    width: 100%;

                    opacity: 0.95;

                    padding: 8px 15px;
                    h4{
                        width: 100%;
                        font-size: 18px;
                    }
                }
                .item-image{
                    -ms-grid-row-span: 2;
                }
            }
            &.collection{
                //-ms-grid-columns: 1fr;
                -ms-grid-rows: 1fr 40px;
                //display: -ms-grid;
                //height: 128px-2px;
                //width: 128px*2-2px;

                height: 165px-2px;
                width: 220px-2px;

                &.big{
                    //height: 128px*2-2px;
                    //width: 128px*4-4px+20px;
                    height: 165px*2-2px+2px;
                    width: 220px*2-2px+2px;
                    -ms-grid-rows: 1fr 50px;

                    .item-overlay{
                        h4{
                            font-size: 26px;
                        }
                        h6{
                            font-size: 18px;
                        }
                    }
                }

                .item-overlay{
                    -display: none;
                    background: #111;
                    color: white;
                    //font-weight: bold;
                    //font-size: 24px;
                    width: 100%;

                    opacity: 0.95;

                    padding: 5px 15px;
                    h4{
                        width: 100%;
                        font-size: 18px;
                    }
                }
                .item-image{
                    -ms-grid-row-span: 2;
                }
            }
        }

            .groupeditemspage .groupeditemslist .item .item-overlay {
                //-ms-grid-row: 2;
                //-ms-grid-rows: 1fr 21px;
                //display: -ms-grid;
                //padding: 6px 15px 2px 15px;
            }

                .groupeditemspage .groupeditemslist .item .item-overlay .item-title {
                    //-ms-grid-row: 1;
                    overflow: hidden;
                    width: 220px;
                }

                .groupeditemspage .groupeditemslist .item .item-overlay .item-subtitle {
                    //-ms-grid-row: 2;
                    width: 220px;
                }

        .groupeditemspage .groupeditemslist .largeitemtemplate .item{
            width: 500px + 10px;
            height: 500px + 10px;
        }

        /* Generic styling */
    .groupeditemspage .groupeditemslist .item-overlay {
        -ms-grid-row: 2;
    }
    .groupeditemspage .groupeditemslist .item-overlay .item-description {
        visibility:collapse;
    } 
```

JS

```
listView.layout = new ui.GridLayout({ groupInfo: groupInfo, groupHeaderPosition: "top" });
listView.itemDataSource = Data.items.dataSource;
listView.groupDataSource = Data.groups.dataSource; 
```

* * *

Ebay 应用程序在这方面做得很好：

1.  框几乎立即渲染，没有灰框。
2.  图像加载。

![在此处输入图像描述](../Images/6e065c3ee6350db34bcb6a2b3b5620d7.png)

* * *

知道会发生什么吗？

非常感谢！:) 希望我很快就能启动并运行我的第一个应用程序！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:52:37.160

这是 ListViews 默认的“背景”渲染，它通过渲染占位符甚至在它知道它正在渲染多少数据之前渲染它来增强感知性能。

您可以使用 backgroundColor 自定义它[并使用 disableBackdrop](http://msdn.microsoft.com/en-us/library/windows/apps/jj569305.aspx)[禁用](http://msdn.microsoft.com/en-us/library/windows/apps/jj569304.aspx)它

# vb.net - 使用 System.Reflection.Emit 在 Windows.Forms 中显示 MessageBox

> ID：13683920
> 
> 赞同：4
> 
> 时间：2012-12-03T13:07:56.000
> 
> 标签：vb.net, reflection, reflection.emit, il

我正在尝试使用 ilgenerator.emit 做一个 msgbox，但是当我运行代码时出现异常：

> 从呼叫目的地生成的异常

这是我的代码：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim assemblyName As AssemblyName = New AssemblyName("SamAsm")
    Dim assemblyBuilder As AssemblyBuilder = Thread.GetDomain().DefineDynamicAssembly(assemblyName, AssemblyBuilderAccess.RunAndSave)

    'Creating module
    Dim moduleBuilder As ModuleBuilder = assemblyBuilder.DefineDynamicModule("SamAsm.exe")

    Creating class file
    Dim typeBuilder As TypeBuilder = moduleBuilder.DefineType("SamAsmType", TypeAttributes.Public Or TypeAttributes.Class)

    Creating Main Method
    Dim methodBuilder1 As MethodBuilder = typeBuilder.DefineMethod("Main", MethodAttributes.Static Or MethodAttributes.Public, GetType(Void), New System.Type() {GetType(String)})

    'Generating Code for method builder in IL
    Dim ilGenerator As ILGenerator = methodBuilder1.GetILGenerator
    ilGenerator.Emit(OpCodes.Ldstr, "test")
    ilGenerator.EmitCall(OpCodes.Call, GetType(System.Windows.Forms.MessageBox).GetMethod("Show", {GetType(String)}), {GetType(String)})
    ilGenerator.Emit(OpCodes.Ret)

    'Creating Class object (type) and accessing main method
    Dim SamAsmType As Type = typeBuilder.CreateType
    SamAsmType.GetMethod("Main").Invoke(Nothing, New String() {Nothing})

    'Creating Entry Point and saving assembly
    assemblyBuilder.SetEntryPoint(methodBuilder1, PEFileKinds.WindowApplication)
    assemblyBuilder.Save("SamAsm.exe")
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T15:15:32.363

`Sub`从/`void`函数返回时，您必须确保堆栈为空。

-Method[`Show`](http://msdn.microsoft.com/en-us/library/519bytz3.aspx)返回 a `DialogResult`，因此您必须调用[`Pop`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.pop.aspx)才能`DialogResult`从堆栈中删除 。

```
...
ilGenerator.EmitCall(OpCodes.Call, GetType(System.Windows.Forms.MessageBox).GetMethod("Show", {GetType(String)}), {GetType(String)})
ilGenerator.Emit(OpCodes.Pop) ' remove the return value of Show from the stack
ilGenerator.Emit(OpCodes.Ret)
... 
```

* * *

尽管如此，您始终可以使用[peverify](http://msdn.microsoft.com/en-us/library/62bwd2yd%28v=vs.80%29.aspx)来跟踪动态创建的程序集中的错误。

因此，在您的情况下，运行 peverify`SamAsm.exe`会给您以下错误：

> [IL]：错误：[c:\yourpath\SamAsm.exe : SamAsmType::Main][offset 0x0000000A] 从 void 函数返回时堆栈必须为空。1 验证 SamAsm.exe 的错误

# ios - ios文本字段与键盘重叠

> ID：13683928
> 
> 赞同：0
> 
> 时间：2012-12-03T13:08:45.467
> 
> 标签：ios

我有一个 ios 应用程序，其中应用程序的 rootviewcontroller 是一个自定义流控制器，并且有一个像这样的视图层次结构：scrollview => mainview => widgetview => textfields

当我单击文本字段时，键盘与文本字段的底部重叠，这没关系，但奇怪的是出现故障，并且文本字段显示在键盘顶部。有任何想法吗？

![它看起来如何](../Images/af73a00c4c50f9a6b7b57dca06922a4b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T09:47:01.583

我已经很久没有问这个问题了，我忘记了，反正我发现当视图有阴影时可能会出现这种渲染问题，只是禁用了阴影..

# wordpress - Wordpress：使用自定义帖子类型作为产品的图像列表

> ID：13683936
> 
> 赞同：0
> 
> 时间：2012-12-03T13:09:47.880
> 
> 标签：wordpress, custom-post-type

我有一个带有礼物创意的 Wordpress 博客，我在其中撰写基于文本的文章。我最近发现了自定义帖子类型，我认为这是我想要创建的功能的解决方案。

我想要的是：

*   能够使用普通的“类别”和“标签”标记每个自定义帖子。
*   创建一个 3x3 矩阵，其中产品图像（自定义帖子）显示在每个类别视图或标签视图的顶部（随后是类别或标签中的典型文章列表）。

例子：

*   假设我有一个类别“给妈妈的礼物”和标签“粉红色”、“便宜”
*   在“给妈妈的礼物”类别中，我有 10 篇文字文章（普通帖子）讨论了给妈妈买礼物的困难
*   我创建了九个自定义帖子，每个帖子都是一个**特定**的礼物（例如粉红色的发刷）。我想将它们放在“给妈妈的礼物”类别中，并用“粉红色”标记它们。
*   当我查看 myrandomgiftblogname.com/category/gifts-for-mom 时，我希望能够看到：

给妈妈的礼物
产品 产品 产品
产品 产品 产品
产品 产品 产品

文章：
- 这篇很棒的文章
- 很棒的文章
- 等等

我认为这是可能的，但真的不知道从哪里开始。你能指出我正确的方向吗？我需要哪些插件？我是否需要自己进行任何编程（或只是插件配置）？这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:53:31.580

描述有点宽泛，因此答案有点宽泛。

需要两件事：

### 1）创建自定义帖子类型的插件。

让 CPT 进入插件领域被认为是最佳实践。因此，您可以交换设计并保留您的 CPT 功能。实际上，您是在要求由主题处理未来的问题。

创建[您自己的插件](http://www.doitwithwp.com/create-functions-plugin/)，其中将包含 a[`register_post_type`](http://codex.wordpress.org/Function_Reference/register_post_type)和任何额外的配置。

使用现有的插件，例如[Custom Content Type Manager](http://wordpress.org/extend/plugins/custom-content-type-manager/)。
*它的自定义字段功能也非常方便。*

> 允许用户为每个内容创建自定义内容类型（也称为帖子类型）和标准化自定义字段，包括下拉菜单、复选框和图像。

### 2) 学习如何使用和自定义 WordPress 模板

> [http://codex.wordpress.org/Templates](http://codex.wordpress.org/Templates)
> 模板是控制您的 WordPress 网站如何在 Web 上显示的文件。这些文件从您的 WordPress MySQL 数据库中提取信息并生成发送到 Web 浏览器的 HTML 代码。通过其强大的主题系统，WordPress 允许您在一个主题下定义任意数量的模板。这些模板文件中的每一个都可以配置为在特定情况下使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:18:41.563

您可以尝试以下方法：

1.  为每个类别添加一个`Page`与类别完全相同的名称。
2.  在`Images`菜单中，将您想要的图像附加到每个页面。
3.  在脚本中查询名称与当前类别相同的页面，并提取其所有附件

# oracle - PLSQL 过程在运行时获取用户输入

> ID：13683939
> 
> 赞同：2
> 
> 时间：2012-12-03T13:09:53.710
> 
> 标签：oracle, plsql

我正在做一个大学作业，要求我创建一个 PLSQL 程序，用户可以在其中添加一个新的客户订单，其中包含许多项目和每个项目的数量。我想出了以下方法，它会要求用户输入要添加到订单中的一些项目，然后使用循环来询问特定的详细信息，例如产品编号和数量。我在运行时遇到用户输入问题......当编译代码时，它会询问产品代码和数量，并且不会在运行时再次询问，而是保存之前在编译时给出的值......

```
CREATE OR REPLACE 
PROCEDURE Add_Order (Item_amount IN NUMBER, CustNo IN NUMBER) AS

    ItemNo NUMBER; 
    var_Quantity NUMBER;
    var_PONo  NUMBER;  

    BEGIN  

      IF Item_amount BETWEEN 2 AND 9 THEN

        SELECT seq_PONo.NEXTVAL INTO var_PONo from dual;

    INSERT INTO PurchaseOrder_tab
         SELECT  var_PONo, REF(C),
                 SYSDATE,
                 ItemList_tab()
          FROM   Customer_tab C
          WHERE  C.CustNo = CustNo;

    FOR i IN 1..Item_amount LOOP
        DBMS_OUTPUT.PUT_LINE('INSIDE LOOP');
        ItemNo := &Enter_ProdCode;
        var_Quantity := &Quantity_Amount;

        INSERT INTO TABLE (
        SELECT  P.ItemList
          FROM  PurchaseOrder_tab P
         WHERE  P.PONo = var_PONo
        )

        SELECT   seq_ItemNo.nextval, REF(Pr), var_Quantity
          FROM   Products_tab Pr
         WHERE   Pr.ProductCode = ItemNo ;

        DBMS_OUTPUT.PUT_LINE('Added '||var_Quantity ||' items of '||ItemNo||' to order No: '||var_PONo);

              END LOOP;    

      ELSE

    DBMS_OUTPUT.PUT_LINE('Amount of items entered onto an order must be between 2 - 9\. Please try again with correct amount.');

      END IF;

    EXCEPTION

    WHEN OTHERS THEN DBMS_OUTPUT.PUT_LINE('Operation failed '||'SQLCODE: '||SQLCODE);
    DBMS_OUTPUT.PUT_LINE('SQL Error Message '||SQLERRM);
    ROLLBACK;   
    END;
    / 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T15:09:16.200

简短的回答：你不能。PL/SQL 在数据库引擎内部执行，并且数据库引擎无法访问您用来启动该过程的终端窗口（或数据库工具）。

您问题中的代码似乎部分工作，因为它要求输入一次，但真正发生的是：工具（SQL*Plus、SQL Developer 或其他）解析 PL/SQL 块并看到 &-Signs，所以它询问用什么替换它们。一旦给出输入，PL/SQL 块（包括输入的值）就被交给数据库执行。

由于您不能在 PL/SQL 中执行此操作，因此最好先创建一个前端程序来收集值，然后将它们发送到数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:13:22.000

尝试玩弄：

```
BEGIN 
   DBMS_OUTPUT.GET_LINE(:buffer, :status); 
END; 
```

而不是使用`&`引用

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-05-10T17:52:15.077

要从用户那里获取数据输入，

设置服务器输出；

ACCEPT Enter_ProdCode VARCHAR2 PROMPT "请输入产品代码："; ItemNo := &Enter_ProdCode;

# azure - Windows Azure 媒体服务 Apple HLS 流媒体 - 不播放视频，只播放音频

> ID：13683940
> 
> 赞同：0
> 
> 时间：2012-12-03T13:09:59.363
> 
> 标签：azure, http-live-streaming, smooth-streaming

我正在使用 Windows Azure 媒体服务来上传视频文件、编码，然后发布它们。我使用 Windows Azure 媒体服务示例代码对文件进行编码，我发现当我使用该代码将“.mp4”文件转换为 Apple HLS 时，它在 iOS 设备中无法正常运行。只播放音频，看不到视频。然而，如果我使用 Windows Azure 媒体服务门户在 HLS 中编码和发布文件，它们在 iOS 设备上工作得非常好（音频和视频播放）！

几天来我一直在努力解决这个问题，真的很感激有人可以指导我进行编码过程（通过代码）吗？

这是我到现在为止的！

```
static IAsset CreateEncodingJob(IAsset asset)
    {

        // Declare a new job.
        IJob job = _context.Jobs.Create("My encoding job");
        // Get a media processor reference, and pass to it the name of the 
        // processor to use for the specific task.
        IMediaProcessor processor = GetLatestMediaProcessorByName("Windows Azure Media Encoder");
        // Create a task with the encoding details, using a string preset.
        ITask task = job.Tasks.AddNew("My encoding task",
            processor,
            "H264 Broadband SD 4x3", 
            TaskOptions.ProtectedConfiguration);
        // Specify the input asset to be encoded.
        task.InputAssets.Add(asset);
        // Add an output asset to contain the results of the job. 
        // This output is specified as AssetCreationOptions.None, which 
        // means the output asset is in the clear (unencrypted). 
        task.OutputAssets.AddNew("Output MP4 asset",
            true,
            AssetCreationOptions.None);

        // Launch the job. 
        job.Submit();

        // Checks job progress and prints to the console. 
        CheckJobProgress(job.Id);

        // Get an updated job reference, after waiting for the job 
        // on the thread in the CheckJobProgress method.
        job = GetJob(job.Id);

        // Get a reference to the output asset from the job.
        IAsset outputAsset = job.OutputMediaAssets[0];

        return outputAsset;

    }

 static IAsset CreateMp4ToSmoothJob(IAsset asset)
    {

        // Read the encryption configuration data into a string. 
        string configuration = File.ReadAllText(Path.GetFullPath(_configFilePath + @"\MediaPackager_MP4ToSmooth.xml"));

        //Publish the asset.
        //GetStreamingOriginLocatorformp4(asset.Id);

        // Declare a new job.
        IJob job = _context.Jobs.Create("My MP4 to Smooth job");
        // Get a media processor reference, and pass to it the name of the 
        // processor to use for the specific task.
        IMediaProcessor processor = GetLatestMediaProcessorByName("Windows Azure Media Packager");

        // Create a task with the encoding details, using a configuration file. Specify 
        // the use of protected configuration, which encrypts sensitive config data.
        ITask task = job.Tasks.AddNew("My Mp4 to Smooth Task",
            processor,
            configuration,
            TaskOptions.ProtectedConfiguration);
        // Specify the input asset to be encoded.
        task.InputAssets.Add(asset);
        // Add an output asset to contain the results of the job.
        task.OutputAssets.AddNew("Output Smooth asset",
            true,
            AssetCreationOptions.None);

        // Launch the job. 
        job.Submit();

        // Checks job progress and prints to the console. 
        CheckJobProgress(job.Id);

        job = GetJob(job.Id);
        IAsset outputAsset = job.OutputMediaAssets[0];

        // Optionally download the output to the local machine.
        //DownloadAssetToLocal(job.Id, _outputIsmFolder);

        return outputAsset;
    }

    // Shows how to encode from smooth streaming to Apple HLS format.
    static IAsset CreateSmoothToHlsJob(IAsset outputSmoothAsset)
    {
        // Read the encryption configuration data into a string. 
        string configuration = File.ReadAllText(Path.GetFullPath(_configFilePath + @"\MediaPackager_SmoothToHLS.xml"));

        //var getismfile = from p in outputSmoothAsset.Files
        //                 where p.Name.EndsWith(".ism")
        //                 select p;

        //IAssetFile manifestFile = getismfile.First();

        //manifestFile.IsPrimary = true;

        var ismAssetFiles = outputSmoothAsset.AssetFiles.ToList().Where(f => f.Name.EndsWith(".ism", StringComparison.OrdinalIgnoreCase)).ToArray();

        if (ismAssetFiles.Count() != 1)
            throw new ArgumentException("The asset should have only one, .ism file");

        ismAssetFiles.First().IsPrimary = true;
        ismAssetFiles.First().Update();

        //Use the smooth asset as input asset

        IAsset asset = outputSmoothAsset;

        // Declare a new job.
        IJob job = _context.Jobs.Create("My Smooth Streams to Apple HLS job");
        // Get a media processor reference, and pass to it the name of the 
        // processor to use for the specific task.
        IMediaProcessor processor = GetMediaProcessor("Smooth Streams to HLS Task");

        // Create a task with the encoding details, using a configuration file.
        ITask task = job.Tasks.AddNew("My Smooth to HLS Task", processor, configuration, TaskOptions.ProtectedConfiguration);

        // Specify the input asset to be encoded.
        task.InputAssets.Add(asset);

        // Add an output asset to contain the results of the job.
        task.OutputAssets.AddNew("Output HLS asset", true, AssetCreationOptions.None);

        // Launch the job. 
        job.Submit();

        // Checks job progress and prints to the console. 
        CheckJobProgress(job.Id);

        // Optionally download the output to the local machine.
        //DownloadAssetToLocal(job.Id, outputFolder);

        job = GetJob(job.Id);
        IAsset outputAsset = job.OutputMediaAssets[0];

        return outputAsset;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:31:12.250

为了转换为与 iOS 兼容的 HLS，您必须使用 Smooth Streaming Source，这将是 HLS 的基础。所以你的步骤是：

1.  将您的源转换为高质量的 H.264 (MP4)
2.  将步骤 (1) 的结果转换为 Microsoft Smooth Streaming
3.  将步骤 (2)（平滑流）的结果转换为 HLS

HLS 与 Microsoft Smooth Streaming 非常相似。因此，它需要具有不同比特率的源块。通过 MP4 进行 HLS 转换将无济于事。

令人遗憾的是，微软在门户网站中提供了此类`explorative`功能。`management`这会导致用户感到困惑。它在场景下的作用正是我向您建议的 - 首先获得高质量的 MP4，然后将其转换为 Microsoft Smooth Streaming，然后在 Smooth Streaming 上进行 HLS。但是用户认为 HLS 是通过 MP4 执行的，这是完全错误的。

如果我们看一下[这里的在线文档](http://msdn.microsoft.com/en-us/library/windowsazure/hh973635.aspx)，我们会看到任务预设被命名`Convert Smooth Streams to Apple HTTP Live Streams`。从这里我们必须弄清楚 HLS 的正确来源是 Microsoft Smooth Stream。根据我的经验，一个好的平滑流只能从一个好的 H.264 源 (MP4) 产生。如果您尝试将非 H.264 源转换为平滑流，则结果很可能是错误。

您可以使用小工具[WaMediaWeb](https://github.com/astaykov/WaMediaWeb)（github 上的源代码，持续交付到 Azure 网站）进行试验，现场直播：[http](http://wamediaweb.azurewebsites.net/) ://wamediaweb.azurewebsites.net/ - 只需提供您的媒体帐户和密钥。[查看GitHub 上](https://github.com/astaykov/WaMediaWeb/blob/master/Readme.markdown)的自述文件以了解一些细节，例如什么来源产生什么结果。

顺便说一句，您可以将任务堆叠在单个作业中，以避免不断寻找作业结果。该方法`task.OutputAssets.AddNew(...)`实际上返回一个 IAsset，您可以将其用作另一个任务的 InputAsset，并将该任务添加到同一个作业中。如果您查看示例，它会在某些时候执行此操作。它在创建 HLS 流方面也做得很好，在 iOS 上使用 iPad2 和 iPhone 4 进行了测试。

# java - 用JAVA删除excel文件中的所有空行

> ID：13683941
> 
> 赞同：0
> 
> 时间：2012-12-03T13:10:01.857
> 
> 标签：java, apache, apache-poi, poi-hssf

有人可以告诉我如何使用 apache poi 迭代和删除 excel 文件中的所有空行吗？我用我希望删除的行索引调用这两个函数，但第二个函数（移位）总是给我最小行索引是 0 exceltion。

```
 public static void removeRow(HSSFSheet sheet, int rowIndex) {

   HSSFRow removingRow = sheet.getRow(rowIndex);
   if (removingRow != null) {
       sheet.removeRow(removingRow);
   }
 }

 public static void shiftRow(HSSFSheet sheet, int rowIndex) {
   int lastRowNum = sheet.getLastRowNum();
   if (rowIndex >= 0 && rowIndex < lastRowNum) {
       sheet.shiftRows(rowIndex+1, rowIndex+1, -1);
   }
 } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:13:11.267

问题出在合并到 excel 文件中的列中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-08T09:27:17.917

```
sheet.removeRow(row) 
```

将删除该行，但它会在您的数据中创建一个空白（孔）或一个空行，因此会使其不一致。你可以做的是在删除之后你可以移动你的行，这意味着使用这个移动所有剩余的行：

```
int rowToDeleteIndex = // The row number you want to delete
int lastRowIndex = worksheet.getLastRowNum();
worksheet.shiftRows(rowToDeleteIndex + 1, lastIndex, -1); 
```

# iphone - AVAudioRecorder 中的音量

> ID：13683943
> 
> 赞同：4
> 
> 时间：2012-12-03T13:10:13.620
> 
> 标签：iphone, objective-c, ios, avaudiorecorder

我想更改 AVAudioRecorder 的输入音量。我搜索了这个问题，只找到了增加 AVAudioPlayer 音量的解决方案，但我对在 Iphone 上播放音频不感兴趣，它们被上传到 FTP 服务器。

我的客户想在采访人时改变音量，可以这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:45:53.740

我们无法在录制时更改音量。但是在录制之后，您可以处理声音，然后您可以将其上传到服务器。许多库已经用于此目的。`DiracLE`就是其中之一。并在 Mac 中播放文件以检查音量。

# ruby-on-rails - rails accept_nested_attributes 和 :reject_if

> ID：13683948
> 
> 赞同：8
> 
> 时间：2012-12-03T13:10:25.513
> 
> 标签：ruby-on-rails

我有一个带有嵌套属性的表单。现在在我的`:reject_if =>`声明中，我想检查嵌套模型上的一个属性，比如`first_record?`有没有办法访问这种方法？在我看来，您只能访问提交的属性哈希，例如检查字段是否为空白。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T13:40:25.217

根据文档[http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

或者， :reject_if 也接受使用方法的符号：

```
class Member < ActiveRecord::Base
  has_many :posts
  accepts_nested_attributes_for :posts, :reject_if => :new_record?
end

class Member < ActiveRecord::Base
  has_many :posts
  accepts_nested_attributes_for :posts, :reject_if => :reject_posts

  def reject_posts(attributed)
    attributed['title'].blank?
  end
end 
```

这应该适合你。基本上这意味着在自定义函数中你可以做任何你想做的事情。

# python - 如何使用 pyasn1 解码 ASN1 编码数据（嵌套结构化数据）？

> ID：13683953
> 
> 赞同：3
> 
> 时间：2012-12-03T13:10:43.370
> 
> 标签：python, python-2.7, asn.1

我的数据应该能够像下面这样获取..

**示例结构：-**

```
 listOfVolumes: -> SequenceOf
         ChangeOfCharCondition -> Sequence
                dataUplink: 9612742 -> Integer   
                dataDownlink: 216449 -> Integer
                changeCondition: qoSChange (0) -> Enumerated
                Time: 1206202320082b0530 -> OctetString

         ChangeOfCharCondition -> Sequence
                qosNegotiated: 0223921f9396979774f9ffff -> OctetString
                dataUplink: 57664480 -> Integer
                dataDownlink: 1460443 -> Integer
                changeCondition: recordClosure (2) -> Enumerated
                Time: 1206210017072b0530 -> OctetString 
```

我如何解码这种特定格式的数据编码（字节数组）？

我可以解码它，如果它只是 SEQUENCEOF 结构中的一个 SEQUENCE，但是我很难多次循环数据，有人可以建议我一个更好的方法来解决这个问题吗？任何建议对我来说都很有价值..提前谢谢..
**示例代码：**

```
class ChangeCondition(univ.Enumerated):

     namedValues = namedval.NamedValues(
        ('qoS', 0),
        ('Time', 1),
        ('Closure', 2),
        ('ContinueOngoing', 3),
        ('RetryandTerminateOngoing', 4),
        ('TerminateOngoing', 5),
        ('cGI', 6),
        ('rAI', 7),
        ('dT', 8),
        ('dT-Removal', 9))
        subtypeSpec = univ.Enumerated.subtypeSpec + \
                constraint.SingleValueConstraint(0, 1, 2, 3, 4, 5, 6, 7, 8, 9)

class ChangeOfCharCondition(univ.Sequence):

    componentType = namedtype.NamedTypes(
    namedtype.OptionalNamedType('Negotiated', univ.OctetString().subtype(
        implicitTag=tag.Tag(tag.tagClassContext, tag.tagFormatSimple, 2))),
    namedtype.OptionalNamedType('dataUplink', univ.Integer().subtype(
        implicitTag=tag.Tag(tag.tagClassContext, tag.tagFormatSimple, 3))),
    namedtype.OptionalNamedType('dataDownlink', univ.Integer().subtype(
        implicitTag=tag.Tag(tag.tagClassContext, tag.tagFormatSimple, 4))),
    namedtype.NamedType('changeCondition', ChangeCondition().subtype(
        implicitTag=tag.Tag(tag.tagClassContext, tag.tagFormatSimple, 5))),
    namedtype.OptionalNamedType('Time', univ.OctetString().subtype(
        implicitTag=tag.Tag(tag.tagClassContext, tag.tagFormatSimple, 6)))
       )

class ListOfVolumes(univ.SequenceOf):

    tagSet = baseTagSet = tag.initTagSet(tag.Tag(tag.tagClassContext,tag.tagFormatSimple, 12),)
    componentType = ChangeOfCharCondition()

class MyCdr(univ.Set):

     tagSet = baseTagSet = tag.initTagSet(tag.Tag(tag.tagClassContext,tag.tagFormatSimple, 21))
    componentType = namedtype.NamedTypes(
    namedtype.OptionalNamedType('listOfVolumes', ListOfVolumes())) 
```

我的数据如下所示，

```
bytearray(b'\xb5\x81\x2a\xac(0&\xa2\x0e\x81\x0c\x01#Q\x1f\x93\x96HHt\xf9\xff\xff\x83\x02\x06x\x84\x02\x13m\x85\x01\x02\x86\t6\x05"#\x12E+\x050') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:45:01.830

如果您拥有所有这些数据结构的正式 ASN.1 语法，那么在此处发布它会很有帮助。

您的一般方法看起来是正确的，但是您执行 ASN.1 标记的方式是可疑的。

从您对语法的初始描述来看，您应该能够通过调用 pyasn1 来解码您的字节数组：

```
decoder.decode(mybytearray, asn1Spec=ListOfVolumes()) 
```

例如，将 ListOfVolumes() 类实例作为顶级原型对象传递给解码器。如果失败，可能是由于标记不正确。

为了深入挖掘，它可能有助于启用 pyasn1 调试：

```
from pyasn1 import debug
debug.setLogger(debug.Debug('all') 
```

并查看从 bytearray 读取哪些标签以及您的规范中的哪些对象与它们匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:57:10.990

如果您的编码包含有效的 SEQUENCE OF 项目，并且您相应地定义了 pyasn1 数据结构，那么 pyasn1 解码器应该能够自行循环所有 SEQUENCE OF 实例。

你能发布你的数据结构的 pyasn1 规范吗？

# python - 从 CSV 文件中的行计算数字

> ID：13683954
> 
> 赞同：1
> 
> 时间：2012-12-03T13:10:48.540
> 
> 标签：python, csv, matplotlib

所以我有这个 csv 文件，一个列看起来像这样：

```
1022
1040
1042
1035
11728
1036
1022
1040
1042
1035
11728
1036
1022
1040
1042
1035
11728 
```

现在我需要计算一个数字出现的频率。我需要这个来用 matplotlib 制作图形图片。所以图形将显示一个数字发生了多少（在这种情况下它是一个事件 id）

到目前为止，我只有打印该行的代码...

```
my_reader = csv.reader(open(csvpath))
for col in my_reader:
      print col[3] 
```

我如何计算该特定列中的数字出现的频率？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:13:50.977

只需创建从数字到计数的映射。该`collections.Counter()`课程使这变得最简单：

```
import collections

counts = collections.Counter()
for row in my_reader:
    counts[row[3]] += 1 
```

使用 a`collections.defaultdict`也是一种选择：

```
counts = collections.defaultdict(int)
for row in my_reader:
    counts[row[3]] += 1 
```

或者您可以使用普通的`dict`：

```
counts = {}
for row in my_reader:
    counts[row[3]] = counts.get(row[3], 0) + 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:25:20.560

您可以使用简单的字典。

```
my_reader = csv.reader(open(csvpath))
my_dict = {}
for row in my_reader:
    try:
        my_dict[row[3]] += 1
    except KeyError:
        my_dict[row[3]] = 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T14:02:41.527

此代码将计算总行数，如果您想要特定行，则在打印语句之前使用 if 条件并检查 if count==row_number exa: if count==3: 并获取总数。

```
 reader=csv.reader(open("first.csv"))
         count=0;
         for row in reader:
             count+=1
             print "total no in row "+str(count)+" is "+str(len(row))
             for i in row:
                 print i 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T20:03:30.563

您可以使用它[`pandas`](http://pandas.pydata.org/)来读取数据、计算值并绘制它。Pandas 在幕后使用`numpy`并`matplotlib`实现了这一点。 `read_csv`并且绘图命令也适用于多列。

```
In [29]: df = pd.read_csv('data.csv', names=['my_data']) 

In [30]: counts = df['my_data'].value_counts()

In [31]: counts
Out[31]: 
1022     3
1042     3
1040     3
1035     3
11728    3
1036     2

In [32]: counts.plot(kind='barh')
Out[32]: <matplotlib.axes.AxesSubplot at 0x4f7f510> 
```

![价值计数](../Images/6b426a34b8738e1909863f55845f78d3.png)

# android - Android 启动图标不起作用

> ID：13683956
> 
> 赞同：0
> 
> 时间：2012-12-03T13:10:54.463
> 
> 标签：android, eclipse, icons, launch

我在从我的 android 应用程序中设置启动器图标时遇到问题。

如您所见，我已将`logodoor.png`文件夹中的徽标命名为可绘制（在可绘制的 hdpi、ldpi 等中也是如此），并在`AndroidManifest.xml` `drawable/logodoor`

*启动应用程序时，它不会显示正确的启动图标，而是标准的 no-icon-android-icon。* -> 在目标设备上，图标显示不好；就像推特也有标志一样

感谢您的回答 ：）

门诺

清单代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="me.menno.ghlyceum" android:versionCode="1" android:versionName="1.0.4">
    <uses-permission android:name="android.permission.INTERNET"/>
    <application android:icon="@drawable/logodoor" android:label="Ghlyceum OB" android:theme="@android:style/Theme.Black.NoTitleBar" android:debuggable="false">
        <activity android:name=".MainActivity" android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name=".Notes" />
        <activity android:name=".Help"></activity>
        <activity android:name=".Rooster"></activity>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:24:52.430

```
<application
    android:icon="@drawable/logodoor"
    android:label="@string/app_name" >
    <activity
        android:name="YourActivityname"
        android:label="@string/title_activity_flash_file" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

这样您就可以将我的启动器图标放在清单中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:18:48.367

你确定你有这样的东西：

```
<application
    android:icon="@drawable/logodoor"
    ............>
</application> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T13:15:30.230

```
<application android:icon="@drawable/icon" 
             android:label="@string/app_name" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T13:26:51.287

有时我不得不卸载应用程序才能更改图标

# .net - 自定义属性具有奇怪的 IDE PropertyGrid 行为

> ID：13683957
> 
> 赞同：1
> 
> 时间：2012-12-03T13:11:00.877
> 
> 标签：.net, vb.net, winforms

我正在使用 VS .NET 2010 终极版。我在我的（自定义）组件上遇到了一些属性的奇怪行为，我想知道这是我的问题还是 IDE 问题。我发布了两张图片，第一张是在编辑属性之前，将 Dot->Size->Height 从 5 更改为 20，第二张是在按 Enter 更改新值之后。

![这是在编辑我的财产之前](../Images/9cf01b72e6aab9a2cc5e882a8ad783f2.png)

![这是在编辑属性并按回车之后](../Images/5d3b14fa77d585f2ebd3ee2b03af731d.png)

现在您可以看到“Spacing”属性（未触摸）被翻了一番 :) 该组件在设计时和运行时都表现正常，所以除了这个奇怪的方面外，一切都是 oukey。当我单击 [+] 符号时，一切恢复正常，属性显示为 oukey 并更新。

有什么问题 ？

PS。我怀疑问题出在我的 TypeConverter 类的 CreateInstance 函数中，因为当我评论这些函数时，属性没问题，但是当然，组件在设计时不再更新（直到我单击表单上的其他位置）

以下是功能：

```
Public Overrides Function GetCreateInstanceSupported(ByVal context As System.ComponentModel.ITypeDescriptorContext) As Boolean
  Return True
End Function

Public Overrides Function CreateInstance(ByVal context As System.ComponentModel.ITypeDescriptorContext, ByVal propertyValues As System.Collections.IDictionary) As Object
  Dim da As New DotAttributes With
                  {
                    .Color = CType(propertyValues("Color"), Color),
                    .Shape = CType(propertyValues("Shape"), DotShapes),
                    .Size = CType(propertyValues("Size"), Size),
                    .Spacing = CType(propertyValues("Spacing"), Size)
                  }
  Return da
End Function 
```

# php - wordpress 排除页面的条件语法

> ID：13683962
> 
> 赞同：0
> 
> 时间：2012-12-03T13:11:10.390
> 
> 标签：php, wordpress, conditional

试图排除一段代码在某些页面上运行。我想做类似以下的事情，但这种语法不正确。

```
<?php 
if (!is_page('Blog') || $post->post_parent=="19")) { 
    <?php breadcrumbs(); ?>
} else {}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:12:59.280

第一个错误是 - PHP 标记未关闭。第二个是 - 在 else 条件之前应该打开 PHP 标记。

尝试这个

```
<?php if (!is_page('Blog') || $post->post_parent=="19")) { ?>
    <?php breadcrumbs(); ?>
<?php  } else {
          //   
    }
 ?> 
```

# c# - Lambda 表达式作为 API 的查询？

> ID：13683972
> 
> 赞同：0
> 
> 时间：2012-12-03T13:11:31.940
> 
> 标签：c#, asp.net, api, lambda

刚开始研究对 WebAPI 的 OData 支持，现在似乎还有很多工作要做，直到“查询支持”变得真正有趣.. 这就是这个想法诞生的地方.. 有可能吗？如何将 lambda 表达式作为查询字符串发送，然后对其进行解析并针对 IEnumerable 运行它，然后返回值？

整个问题是表达式解析以及如何针对对象实际执行解析的表达式。我很不确定如何做这样的事情。有什么想法吗？或者有什么地方可以阅读更多关于这个的信息吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:42:11.967

我从您的兴趣中了解到的是编写自己的 LINQ 解析器。看看这个：[发明你自己的动态 LINQ 解析器](http://www.codeproject.com/Tips/355513/Invent-your-own-Dynamic-LINQ-parser)

[还可以在此处查看](https://stackoverflow.com/questions/6907103/how-to-create-a-dynamic-contains-or-like-expression-to-be-used-with-linq-again)有关对 OData 的 Like 运算符支持的实现的讨论。

# three.js - 相机旋转时如何使反光材料发生变化

> ID：13683974
> 
> 赞同：0
> 
> 时间：2012-12-03T13:11:31.877
> 
> 标签：three.js

通过使用 Skybox Cube / 环境映射，我能够制作出一些漂亮的金属和玻璃材质。

我已经制作了自己的控件，可以像在 FirstPersonControls 中一样进行轨道和移动/环顾四周。

问题是，当我四处走动时，反射看起来很有说服力——我可以看到反射移动并随着我的相机移动而变化。然而，当我环顾四周（旋转相机/改变它的目标）时，反射没有变化，它们只是静态的。

我可以在例如 three.js/examples/webgl_materials_cubemap_escher.html 中看到相同的行为 - 如果我将其修改为使用 FirstPersonControls，则当我环顾四周时，材料看起来根本不会反射/折射。

这是我设置立方体贴图的方法，老实说，它是从一些示例中复制而来的，我并不完全理解。但它有效，除了这个问题......

```
createSkyBox = function(urlPrefix) {
var sceneCube = new THREE.Scene();
var path = urlPrefix;
var format = '.jpg';
var urls = [
    path + 'px' + format, path + 'nx' + format,
    path + 'py' + format, path + 'ny' + format,
    path + 'pz' + format, path + 'nz' + format
  ];

var reflectionCube = THREE.ImageUtils.loadTextureCube( urls );
reflectionCube.format = THREE.RGBFormat;

var refractionCube = new THREE.Texture( reflectionCube.image, new THREE.CubeRefractionMapping() );
refractionCube.format = THREE.RGBFormat;

// Skybox

var shader = THREE.ShaderUtils.lib[ "cube" ];
shader.uniforms[ "tCube" ].value = reflectionCube;

var material = new THREE.ShaderMaterial( {

  fragmentShader: shader.fragmentShader,
  vertexShader: shader.vertexShader,
  uniforms: shader.uniforms,
  depthWrite: false,
  side: THREE.BackSide

} );
var size = 8000;
mesh = new THREE.Mesh( new THREE.CubeGeometry( size, size, size ), material );
mesh.geometry.computeBoundingBox();
sceneCube.add( mesh );

this._threejs_cube_scene = sceneCube;
this._threejs_cube_mesh = mesh;
this._threejs_envmap = reflectionCube;
this._threejs_envmap_refraction = refractionCube;

this._threejs_scene.add( sceneCube );  
} 
```

这是我创建材料的方式：

```
var material = new THREE.MeshLambertMaterial( { color: 0xff00, ambient: 0xaaaaaa, envMap: this._threejs_envmap}); 
```

然后我在 renderer.overrideMaterial 中使用材质（我使用的是 EffectComposer，如果它有什么不同的话）

编辑：现在我想起来了，我不确定..我的大脑融化了..这可能是现实生活的运作方式:) 至少直观地当我看到代码在运行时，旋转相机时的静态不会感觉对。但也许是因为在现实生活中很难环顾四周 (eye.lookAt()) 而不会稍微移动 (eye.position = xyz)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:55:09.383

您应该计算世界空间中的反射向量（在您未在此处显示的“fragmentShader”的代码中）。如果它在对象空间或视图（相机）空间中，它不会自然移动。

是的，这可能意味着对表面法线进行一些调整。要将对象空间法线转换为世界空间法线，请使用世界矩阵的逆转置。您还需要获取世界空间坐标中的视图矢量，以计算最终的世界空间反射矢量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-22T12:47:29.753

要考虑的另一件事比更改着色器更简单，如果您希望它像人头一样旋转，可能会给您的相机一个偏移量。将其添加到 Object3d 并将其设置为从 Object3d 的位置偏移少量（相当于从人体中心到眼睛的距离），然后旋转 Object3d 而不是相机。

从你的描述中很难说出你想要什么效果，因为当你只是转动你的眼球时，反射不会改变。改变它的是你头部的轻微倾斜。

# c# - 如何更改表值函数的 TableAdapter 超时？

> ID：13683975
> 
> 赞同：1
> 
> 时间：2012-12-03T13:11:31.957
> 
> 标签：c#, .net, vb.net

我有一个由 Visual Studio 数据集设计器生成的 TableAdapter。

由于我杰出的前任的一些*精彩*的编码，这个存储的函数返回了大量的数据，我正在尝试解决这个问题，但与此同时，由于所有数据都不是由time 连接设置为超时。

`myProcedureTableAdapter.Adapter.SelectCommand`是`null`在运行时，`DeleteCommand`和`InsertCommand`一样`UpdateCommand`。我想要的变量包含在 中`myProcedureTableAdapter.CommandCollection[0]`，但它是受保护的。

如何延长此 TableAdapter 的超时时间？

**编辑：**我实际上可以在 TableAdapter 上运行 Fill 和 GetData 命令，因此选择命令显然存在于某些上下文中（即作为 的成员`CommandCollection`），我只是无法通过`SelectCommand`属性访问该命令。

**EDIT2：**嗯，这很烦人。我进入了生成的代码并发现了以下内容：

```
Public Overloads Overridable Function GetData() As DataSet_myDataSet.myProcedureDataTable
    Me.Adapter.SelectCommand = Me.CommandCollection(0) 
```

这表明`SelectCommand`直到我真正在选择东西*的过程中才被设置。*疯了吧。

我将尝试`readonly`在部分类中创建一个属性，并直接引用`Me.CommandCollection(0)`. 这是一种糟糕的编码实践，但目前我看不到任何其他选择。

我会把这个问题留在这里，以防有人提出一个理智的想法。

# c++ - C ++程序中的虚拟内存大小增加

> ID：13683984
> 
> 赞同：3
> 
> 时间：2012-12-03T13:12:03.377
> 
> 标签：c++, linux

我有一个运行良好的程序。但在它被杀死后它可以正常工作 5-6 天`SIGKILL`。当我观察到内存是问题时，我在分配完成的任何地方都进行了严格的释放。

我正在使用 linux`top`命令来监视内存使用情况。

截至目前，该程序运行良好。但是，命令中的`VIRT`虚拟内存属性`top`缓慢增加。为什么呢？我在需要的地方释放东西。

提前致谢。:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T13:14:25.653

如果你在 Linux 上开发，用 编译你的应用程序`g++ -Wall -g`，改进它直到没有警告，然后使用`gdb`valgrind[来](http://valgrind.org/)调试内存泄漏。

您可能对使用[Boehm 的保守垃圾收集器](http://www.hpl.hp.com/personal/Hans_Boehm/gc/)感兴趣。

另请阅读有关[内存碎片](https://stackoverflow.com/q/3770457/841108)的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:17:41.690

[您可以使用valgrind](http://cs.ecs.baylor.edu/~donahoo/tools/valgrind/)检查任何内存管理不善

尝试运行应用程序一段时间并检查任何可能的内存问题。

# mysql - 从 MySQL 中的非规范化表中查询

> ID：13683990
> 
> 赞同：-1
> 
> 时间：2012-12-03T13:12:31.250
> 
> 标签：mysql, arrays

我有以下，一组数组和一个mysql表，table1

$arr1 = ("A0","A1","A2","A3","A4")
$arr2 = ("B0","B1","B2","B3","B4")

```
+----+-----------------+------+------+
| id | Col1            | Col2 | Col3 |
+----+-----------------+------+------+
|  0 | A0;B1;B2;       | x    | 9    |
|  1 | A0;B1;B2;A1;A2; | x    | 15   |
|  2 | A0;             | x    | 7    |
|  3 | B0;             | x    | 5    |
|  4 | C0;             | j    | 5    |
+----+-----------------+------+------+ 
```

是否有可能我可以查询表中的值，以便最终输出是这样的

```
 +----+-------+------+
    | id |  C31T | C32T |
    +----+-------+------+
    |  0 |  19   |  17  |
    +----+-------+------+ 
```

C31T 和 C32T 来自此表

```
 +----+------+------ +-------+------+------+
    | id | Arr1 | Arr2  |  C31  | C32  | tot  |
    +----+------+-------+-------+------+------+
    |  0 | 1    | 2     |  3    |  6   | 3    |
    |  1 | 3    | 2     |  9    |  6   | 5    |
    |  2 | 1    | 0     |  7    |  0   | 1    |
    |  3 | 0    | 1     |  0    |  5   | 1    |
    +----+------+-------+-------+------+------+ 
```

遵循eggyal解决方案，我坚持到了这一点

```
 SELECT   table1.id,
         COUNT(DISTINCT arr1.element) AS Arr1,
         COUNT(DISTINCT arr2.element) AS Arr2,
         COUNT(DISTINCT arr1.element) +
         COUNT(DISTINCT arr2.element) AS tot,
(COUNT(DISTINCT arr1.element)/(COUNT(DISTINCT arr1.element)+COUNT(DISTINCT arr2.element)))*col3 AS c31,
(COUNT(DISTINCT arr2.element)/(COUNT(DISTINCT arr1.element)+COUNT(DISTINCT arr2.element)))*col3 AS c32
FROM     table1
  LEFT JOIN (
    SELECT 'A0' AS element
    UNION ALL SELECT 'A1'
    UNION ALL SELECT 'A2'
    UNION ALL SELECT 'A3'
    UNION ALL SELECT 'A4'
  ) arr1 ON FIND_IN_SET(
    arr1.element,
    REPLACE(table1.Col1, ';', ',')
  )
  LEFT JOIN (
    SELECT 'B0' AS element
    UNION ALL SELECT 'B1'
    UNION ALL SELECT 'B2'
    UNION ALL SELECT 'B3'
    UNION ALL SELECT 'B4'
  ) arr2 ON FIND_IN_SET(
    arr2.element,
    REPLACE(table1.Col1, ';', ',')
  )
WHERE    table1.Col2 = 'x'
GROUP BY table1.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:11:53.960

我完全同意[@Kickstart 的评论](https://stackoverflow.com/questions/13683990/in-array-equivalent-in-mysql#comment18786820_13683990)——你真的应该[规范](http://en.wikipedia.org/wiki/Database_normalization)你的模式：

```
CREATE TABLE associations (
  id      INT,
  element VARCHAR(2),
  FOREIGN KEY (id) REFERENCES table1 (id)
);

INSERT INTO associations
  (id, element)
VALUES
  (0, 'A0'), (0, 'B1'), (0, 'B2'),
  (1, 'A0'), (1, 'B1'), (1, 'B2'), (1, 'A1'), (1, 'A2'),
  (2, 'A0'),
  (3, 'B0'),
  (4, 'C0')
;

ALTER TABLE table1 DROP Col1; 
```

那么您的查询将是：

```
SELECT   table1.id,
         COUNT(DISTINCT arr1.element) AS Arr1,
         COUNT(DISTINCT arr2.element) AS Arr2,
         COUNT(DISTINCT arr1.element) +
         COUNT(DISTINCT arr2.element) AS tot
FROM     table1 JOIN associations USING (id)
  LEFT JOIN (
    SELECT 'A0' AS element
    UNION ALL SELECT 'A1'
    UNION ALL SELECT 'A2'
    UNION ALL SELECT 'A3'
    UNION ALL SELECT 'A4'
  ) arr1 USING (element)
  LEFT JOIN (
    SELECT 'B0' AS element
    UNION ALL SELECT 'B1'
    UNION ALL SELECT 'B2'
    UNION ALL SELECT 'B3'
    UNION ALL SELECT 'B4'
  ) arr2 USING (element)
WHERE    table1.Col2 = 'x'
GROUP BY table1.id 
```

**[结果](http://sqlfiddle.com/#!2/af0f4/1/0)**：

```
| 身份证 | ARR1 | ARR2 | 托特 |
--------------------------
| 0 | 1 | 2 | 3 |
| 1 | 3 | 2 | 5 |
| 2 | 1 | 0 | 1 |
| 3 | 0 | 1 | 1 |

```

如果没有这样一个规范化的模式，他提到的“非常可怕的编码”将是：

```
SELECT   table1.id,
         COUNT(DISTINCT arr1.element) AS Arr1,
         COUNT(DISTINCT arr2.element) AS Arr2,
         COUNT(DISTINCT arr1.element) +
         COUNT(DISTINCT arr2.element) AS tot
FROM     table1
  LEFT JOIN (
    SELECT 'A0' AS element
    UNION ALL SELECT 'A1'
    UNION ALL SELECT 'A2'
    UNION ALL SELECT 'A3'
    UNION ALL SELECT 'A4'
  ) arr1 ON FIND_IN_SET(
    arr1.element,
    REPLACE(table1.Col1, ';', ',')
  )
  LEFT JOIN (
    SELECT 'B0' AS element
    UNION ALL SELECT 'B1'
    UNION ALL SELECT 'B2'
    UNION ALL SELECT 'B3'
    UNION ALL SELECT 'B4'
  ) arr2 ON FIND_IN_SET(
    arr2.element,
    REPLACE(table1.Col1, ';', ',')
  )
WHERE    table1.Col2 = 'x'
GROUP BY table1.id 
```

**[结果](http://sqlfiddle.com/#!2/fbda8/1/0)**：

```
| 身份证 | ARR1 | ARR2 | 托特 |
--------------------------
| 0 | 1 | 2 | 3 |
| 1 | 3 | 2 | 5 |
| 2 | 1 | 0 | 1 |
| 3 | 0 | 1 | 1 |

```

### 更新

编辑后，您只需要对现有的执行外部查询：

```
SELECT SUM(Arr1/tot) AS C31T, SUM(Arr2/tot) AS C32T
FROM (

  SELECT   COUNT(DISTINCT arr1.element) * table1.Col3 AS Arr1,
           COUNT(DISTINCT arr2.element) * table1.Col3 AS Arr2,
           COUNT(DISTINCT arr1.element) +
           COUNT(DISTINCT arr2.element) AS tot
  FROM     table1
    LEFT JOIN (
      SELECT 'A0' AS element
      UNION ALL SELECT 'A1'
      UNION ALL SELECT 'A2'
      UNION ALL SELECT 'A3'
      UNION ALL SELECT 'A4'
    ) arr1 ON FIND_IN_SET(
      arr1.element,
      REPLACE(table1.Col1, ';', ',')
    )
    LEFT JOIN (
      SELECT 'B0' AS element
      UNION ALL SELECT 'B1'
      UNION ALL SELECT 'B2'
      UNION ALL SELECT 'B3'
      UNION ALL SELECT 'B4'
    ) arr2 ON FIND_IN_SET(
      arr2.element,
      REPLACE(table1.Col1, ';', ',')
    )
  WHERE    table1.Col2 = 'x'
  GROUP BY table1.id

) t 
```

**[结果](http://sqlfiddle.com/#!2/c290f/1/0)**：

```
| C31T | C32T |
---------------
|   19 |   17 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:15:53.987

有点儿戏。

把你的桌子改成这样

```
Table1
+----+------+------+
| id | Col2 | Col3 |
+----+------+------+
|  0 | x    | x    |
|  1 | x    | f    |
|  2 | x    | g    |
|  3 | x    | k    |
|  4 | j    | k    |
+----+------+------+

Table2
+----+----------+------+
| id | Table1id | Col1 |
+----+----------+------+
|  0 | 0        | A0   |
|  1 | 0        | B1   |
|  2 | 0        | B2   |
|  3 | 1        | A0   |
|  4 | 1        | B1   |
|  5 | 1        | B2   |
|  6 | 1        | A1   |
|  7 | 1        | A2   |
|  8 | 2        | A0   |
|  9 | 3        | B0   |
| 10 | 4        | C0   |
+----+-----------------+ 
```

然后为您的查询创建一个临时表，其中包含以下内容：-

```
TempTable
+-------+----------+
| arrno | arrvalue | 
+-------+----------+
| arr1  | A0       |
| arr1  | A1       |
| arr1  | A2       |
| arr1  | A3       |
| arr1  | A4       |
| arr2  | B0       |
| arr2  | B1       |
| arr2  | B2       |
| arr2  | B3       |
| arr2  | B4       |
+-------+----------+ 
```

然后，您可以像这样使用 SQL：-

```
SELECT table1.id, COUNT(TempTable1.arrvalue), COUNT(TempTable2.arrvalue), COUNT(*)
FROM table1
INNER JOIN table2
ON table1.id = table2.table1id
LEFT OUTER JOIN temptable TempTable1 ON table2.Col1 = TempTable1.arrvalue AND TempTable1.arrno = 'arr1'
LEFT OUTER JOIN temptable TempTable2 ON table2.Col1 = TempTable2.arrvalue AND TempTable2.arrno = 'arr2'
GROUP BY table1.id 
```

有点晚了，但正在做其他事情，并认为它也可能对您有所帮助。

设置一个名为 integers 的表，其中包含一个名为 i 的列。10 行，值为 0 到 9。然后，您可以使用以下 SQL 使用它来拆分单个字段

```
SELECT DISTINCT id, SUBSTRING_INDEX(SUBSTRING_INDEX(Col1, ';', anInteger), ';', -1) AS Col1_split, Col2, Col3
FROM table1, 
(SELECT a.i*100+b.i*10+c.i AS anInteger FROM integers a, integers b, integers c) Sub1
HAVING Col1_split <> '' 
```

这可能有助于将分隔字段复制到另一个表中（或者如果您不顾一切，可以将其用作您自己的 SQL 中的子选择，而不是直接使用该表）。

# javascript - href 不起作用，如何重定向到 PhoneGap 中的特定页面？

> ID：13683992
> 
> 赞同：4
> 
> 时间：2012-12-03T13:12:35.197
> 
> 标签：javascript, android, html, cordova, jquery-mobile

在 Html5 中，我通过以下方式转到特定页面：

```
window.location.href = "http://localhost:XXXX/MyPageName.html"; 
```

通过单击按钮的 href**不起作用**！我不知道为什么，这是我解决这个问题的唯一方法。

当我使用 PhoneGap 运行 html5 应用程序时，链接不起作用（显然，因为应用程序没有本地主机）

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:22:33.457

首先，您的链接可能不起作用，因为默认情况下 cordova/phonegap 会阻止所有*外部*URL。要解决此问题，请[在此处阅读我的答案](https://stackoverflow.com/questions/13682228/phonegap-app-error-whitelist-rejection-url-http-xyz-com/13682715#13682715)。

其次，Phonegap 没有打开网络服务器，所以`http://localhost`是不正确的。当你想要一个内部链接时，使用类似`<a href="/mydir/mypage.html">linkText</a>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:48:22.397

Phonegap 建议不要有多个页面。您应该在一页中有“内容”部分，然后通过动态链接（使用 #page1 其中 page1 是内容区域 ID）

例子。

都在同一个html页面（index.html）

```
<div data-role="page" id="page0">
<a data-role="button" data-transition="slide" href="#page1">Page 1</a>
<div>

<div data-role="page" id="page1">

<div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T19:05:34.237

您将使用以下方法解决您的问题：

```
<script>
    //action go to pageOther
    $.mobile.changePage('#pageOther','slide');
</script>
<body>
    <div data-role="page" id="pageHome">
        //Your html
    </div>
    <div data-role="page" id="pageOther">
        //Your html
    </div>
</body> 
```

查看更多信息：http: [//jquerymobile.com/demos/1.2.0/docs/pages/page-anatomy.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-anatomy.html)

# c# - 读取txt文件内容

> ID：13683993
> 
> 赞同：-4
> 
> 时间：2012-12-03T13:12:36.053
> 
> 标签：c#

假设我想搜索 file.txt 的字符串内容`ThisIsOkString`，如果它不存在，我应该搜索`ThisIsBadString`

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:16:54.550

```
var text = File.ReadAllText(filename); 
bool b = text.Contains("ThisIsOkString"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:21:13.420

```
var myFile = "C:\\PathToDirectory";//your folder
bool doesExist = Directory.Exists(myFile);
if (doesExist)
{
    string content = File.ReadAllText(myFile + "\\myFile.txt");//your txt file
    string[] searchedText = new string[] { "ThisIsOkString", "ThisIsBadString" };
    foreach (string item in searchedText)
    {
        if (searchedText.Contains(item))
        {
            Console.WriteLine("Found {0}",item);
            break;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T13:21:24.537

```
using(StreamReader sr = new StreamReader)
{
a = false;
string line;
while((line = sr.ReadLine()) != null)
{
   if(line.Contains("Astring")
   a = true;
   break;
}
}
file.close();
if a = true.... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-14T00:24:21.377

这里有两种方法可以做到。希望这对你有用！

方法一。仅查找第一个匹配项：

```
 using (StreamReader sr = new StreamReader("Example.txt"))
                {
                    bool done = false;
                    while (done == false)
                    {
                        string readLine = sr.ReadLine();
                        if (readLine.Contains("text"))
                        {
                            //do stuff with your string
                            Console.WriteLine("readLine");
                            sr.Close();
                            done = true;
                        }
                    }
                } 
```

方法二。查找文件中的所有匹配项：

```
 using (StreamReader sr = new StreamReader("Example.txt"))
                {
                    string readLine = "text"; //this text has to have at least one character for the program to work
                    int line = 0; //this is to keep track of the line number, it is not necessary
                    while (readLine != "") //make sure the program doesn't keep checking for the text after it has read the entire file.
                    {
                        readLine = sr.ReadLine();
                        line ++; //add one two the line number each time it searches, this searching program searches line by line so I add one just after it searches each time
                        if (readLine.Contains("text"))
                        {
                            //do stuff with your string
                            Console.WriteLine(line + ": readLine"); //you don't have to write it to the screen. You can do absolutely anything with this string now, I wrote the line number to the screen just for fun.
                        }
                    }
                        sr.Close(); //once the search is complete, this closes the streamreader so it can be used again without issues
                } 
```

希望这对你有帮助！

# c# - EF 查询性能问题

> ID：13683997
> 
> 赞同：1
> 
> 时间：2012-12-03T13:12:56.867
> 
> 标签：c#, asp.net, entity-framework

如果我只传递`createdFromDate`给下面的 lambda，我的查询在大约 300 毫秒内完成。但如果我传递`id`参数，我会在大约 20-30 秒内结束。`id`传递变量时有什么方法可以改进查询吗？

```
List<MYENTITY> list= ctx.MYENTITY.Where(s => 
      (string.IsNullOrEmpty(createdFrom) || s.CREATE_DATE >= createdFrom) && 
      (string.IsNullOrEmpty(id) || s.ANOTHER_ENTITY.FirstOrDefault().ID == id)
      .ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:15:17.673

我怀疑这不是EF的错。我要做的是捕获 EF 生成的查询，将其粘贴到 SSMS 中并查看查询计划。我的猜测是正在进行表或索引扫描，因为缺少索引。或者，索引存在但未被使用，可能是因为索引中应包含一个或多个列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:25:07.640

您是否无法获得以下评估的 ID：

```
s.ANOTHER_ENTITY.FirstOrDefault().ID 
```

即int？anotherEntityId = s.ANOTHER_ENTITY.FirstOrDefault().ID;

并使用它代替上面的代码行。

正如我认为将它包含在 where 子句中很可能（取决于用于获取该实体的 ef 查询）导致最终的 sql 查询变得一团糟。

至少我认为它值得测试。

也就是说，您可以将 anotherEntityId 替换为某个已知值并进行测试，如果它很慢，那么它就是对

```
s.ANOTHER_ENTITY.FirstOrDefault().ID 
```

这才是真正的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T13:18:38.310

尝试一件简单的事情：

```
List<MYENTITY> list = ctx.MYENTITY.Where(s => 
  string.IsNullOrEmpty(createdFrom) || s.CREATE_DATE >= createdFrom)
  .ToList()
  .Where(s2 => string.IsNullOrEmpty(id) || s2.ANOTHER_ENTITY.FirstOrDefault().ID == id)
  .ToList(); 
```

这不是一个解决方案，但如果它加快了速度，那么我建议查看您的代码，如果速度保持不变，我建议查看您的数据库结构。