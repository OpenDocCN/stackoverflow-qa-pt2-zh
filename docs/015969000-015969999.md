# StackOverflow 问答 15969000-15969999

# c# - 需要帮助来完成以下代码以使用简单的下拉菜单 在 MVC 中

> ID：15969000
> 
> 赞同：1
> 
> 时间：2013-04-12T10:28:15.560
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

我想创建一个显示国家列表的简单下拉框。它的数据来自数据库，并使用实体框架数据上下文进行访问。用户应在发回数据之前选择一个国家/地区。（简单的验证检查）。

我已经创建了视图模型并且还编写了一些代码，但是我不确定我的设计并且我还需要帮助来完成代码。我已经做了一些搜索，但我找不到这样做的简单方法。我仍然从上下文中获取数据，因为我仍然不确定如何使用存储库。目前，我只希望基本的下拉菜单能够正常工作而不会太高级。请帮忙。感谢 **更新** **的视图模型 - Country.cs**

```
public class Country
{   [Required]
    public int Id { get; set; }
    public IEnumerable<SelectListItem> Countries { get; set; }
} 
```

**控制器**

```
Public ActionResult CountriesDropDown()
{
      Models.Country countryModel = new Models.Country();
            using (ctx)
            {
                var model = (from q in ctx.Countries
                             select new SelectListItem
                             {
                                 Text = q.CountryId,
                                  Value = q.CountryName
                             }).ToList();
                countryModel.Countries = model;    
            }

            return View("Test",countryModel);
} 
```

**国家视图**

```
@using (Html.BeginForm("DoSomething", "Test", FormMethod.Post))
{ 

@Html.DropDownListFor(model => model.Id, Model.Countries, "Please Select")
@Html.ValidationMessageFor(model => model.Id) //The validation part still Not Working. I want the user to select a country before submitting the form. Please help
<input type = submit value="submit" />
}

      [HttpPost]
        public ActionResult DoSomething(Models.Country Selectedcountry) 
             //country.Id holds the value of selected drop-down and it works fine
        {
            if (ModelState.IsValid) 
//I need to do server-side validation and return back to client if Selectedcountry.Id is null (just in case, the client-side validation doesn't work)
            {
                return View();
            }
            else
            {

                return View("Test");
            }
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:43:13.073

在您的控制器中执行此操作：

```
var model = new Country {
    // assuming that the country with "id" exists
    CountryId = ctx.Countries.Get(id).Id
};
model.Countries = 
    from q in ctx.Countries
    select new SelectListItem { 
        Text = q.Id, 
        Value = q.Name
    };
return view("countries", model); 
```

在您的模型中执行此操作

```
@model Models.Country

@Html.DropDownListFor(model => model.CountryId, model.Countries) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:47:08.107

try this:

```
[Required(ErrorMessage = "Please select a Country")]
public string CountryCode{ get; set; }

public IEnumerable<SelectListItem> CountryList
{
    get
    {
        return Country
            .GetAllCountry()
            .Select(Country=> new SelectListItem 
            { 
                Text = Country.Value, 
                Value = Country.Value 
            })
            .ToList();
    }
} 
```

and then you could add a corresponding validation error message:

```
@Html.DropDownListFor(model => model.CountryCode, Model.CountryList, "select")
@Html.ValidationMessageFor(model => model.CountryCode) 
```

# liferay - Create own customized Web Content List

> ID：15969001
> 
> 赞同：0
> 
> 时间：2013-04-12T10:28:16.430
> 
> 标签：liferay, liferay-6, liferay-ide

I'm looking to create my own Web Content List portlet. I exactly want to display the web content of my portal applying some filters.

I'm a little bit lost...

1.  I tried to create a hook but I dont know how to find the possible actions of this portlet.

2.  I don't want to get all the content. I want to use a rules mechanism for filtering the contents(drools portlet), depending on the user information.

Thank you in advance, Oriol

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-02T06:17:44.930

您可以使用以下方法获取网页内容列表：

```
List<JournalArticle> result = JournalArticleLocalServiceUtil.getArticles(groupId, -1, -1); 
```

您可以使用 liferay 搜索容器将列表显示为：

```
<liferay-ui:search-container delta="30" emptyResultsMessage="no-users-were-found">`
<liferay-ui:search-container-results>`
results="<%= result%>"
total="<%=result.size() %>" />

<liferay-ui:search-container-row
className="com.liferay.portlet.journal.model.JournalArticle"
keyProperty="articleId"
modelVar="content" >

<liferay-ui:search-container-column-text
name="ID" value="<%= content.getArticleId()%>" /> // You can add multiple columns

</liferay-ui:search-container-row>
<liferay-ui:search-iterator /> 
</liferay-ui:search-container> 
```

希望这会帮助你。

# highcharts - Column stacked stock chart point placement issue

> ID：15969002
> 
> 赞同：0
> 
> 时间：2013-04-12T10:28:17.143
> 
> 标签：highcharts, highstock, navigator

On refining my problem statement, I came up with a column stacked stock chart.

I have set the plotOptions.series.pointPlacement to on for my application. Now the issue is that only half columns are plotted for first and last data.

```
 plotOptions: {
            column: {
                stacking: 'normal',
                dataLabels: {
                    enabled: true,
                    color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white'
                }
            },
            series: {            
                pointPlacement: "on"
            }
        }, 
```

Please refer to the fiddle: [http://jsfiddle.net/vbjdF/](http://jsfiddle.net/vbjdF/)

I need to somehow make sure the entire columns are plotted without truncating the columns. Any help is appreciated.

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T08:43:04.427

确实它看起来像一个问题，所以我向我们的开发人员报告了[https://github.com/highslide-software/highcharts.com/issues/1933](https://github.com/highslide-software/highcharts.com/issues/1933)，请继续关注这个线程。

您可以添加 0 值作为第一个点和最后一个点，并添加 empty `categories`。

[http://jsfiddle.net/vbjdF/2/](http://jsfiddle.net/vbjdF/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-18T10:18:56.510

您可以为 xAxis 添加 type: 'category' 而不是添加空类别数组

# android - How to start a Fragment/Activity within Fragment?

> ID：15969007
> 
> 赞同：2
> 
> 时间：2013-04-12T10:28:43.783
> 
> 标签：android, android-fragments, android-fragmentactivity

![enter image description here](https://i.stack.imgur.com/TA7nB.png)

I have a button in `Fragment`. When `Button` is clicked it has to Open new `Fragment/Activity` within `Fragment`. I have written code using `Intent`, `Intent i = new Intent(); i.setClass(getActivity(), UpdateProfile.class); startActivity(i);` but its opening in new activity like in below image. ![enter image description here](https://i.stack.imgur.com/W8DVH.png)

My requirement is in Picture 1\. Can someone suggest me how to do it?

**EDIT**: As suggested by rai and ADK, its working fine but new fragment overlays on old fragment. See the below image. "Change Password"(`TextView`) is New Fragment which overlays on existing fragment.

![enter image description here](https://i.stack.imgur.com/517ce.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:00:24.303

尝试：

```
getFragmentManager()
    .beginTransaction()
    .replace(containerViewId, newFragment)
    .addToBackStack(null) // enables back key
    .setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE) // if you need transition
    .commit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:42:55.280

您应该使用 FragmentTransaction[在此处输入链接描述](http://developer.android.com/guide/components/fragments.html#Transactions)。

像这样

```
 FragmentTransaction fragmentTransaction = getSupportFragmentManager().beginTransaction();
        fragmentTransaction.replace(R.id.yourFragment, YourFragmentWithImageClass.getInstance());
        fragmentTransaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
        fragmentTransaction.commit(); 
```

在您的活动中

# jquery - 使用 jQuery 实时更新文本

> ID：15969013
> 
> 赞同：3
> 
> 时间：2013-04-12T10:29:16.190
> 
> 标签：jquery, html, css, twitter-bootstrap

我最近一直在用 jQuery 做一个项目，但遇到了一个问题。基本思想是创建一些 JS 代码，以便当您在选项卡上的文本框中输入内容时，div 内的文本会随着您键入而改变，当您移动到新选项卡时，它会更改为文本框内的文本那里。这很难解释，所以在[http://jsfiddle.net/BenedictLewis/bNnpT/有一个小提琴](http://jsfiddle.net/BenedictLewis/bNnpT/)

**编辑：** 抱歉，我的问题很不清楚。我的模式工作正常，我的问题如下：当用户创建一个选项卡时，他们会看到三个文本框。当他们在一个选项卡上的文本框中输入文本时，里面的文本会随着他们在标题、副标题和内容中输入的内容而实时更新，类似于在“页面标题”文本框中输入的文本如何实时重命名选项卡。当用户更改选项卡时，文本应更新为当前活动选项卡中文本框中的内容。

我试过的：

```
$(".modal-body #pageTitle").html('<h1>' + pageTitle + '</h1>');
$(".modal-body #pageSubtitle").html('<h2>' + pageSubtitle + '</h2>');
$(".modal-body #pageContent").html('<p>' + pageContent + '</p>'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:09:57.757

在这里你去：一个更新的小提琴提供你的增强。:) 这假设您没有更改元素 id 的命名约定。

```
// Newly added code.
// Automatically update the iphone display when 
// the user types.
$('#tabContent').on('keyup', 'input[id^="page"], textarea[id^="page"]', function () {
    var _thisId = $(this).attr('id');

    // Parse out the section from the id: (e.g. Title from pageTitle_tab1)
    // and lowercase it to match the naming conventions in this document.
    _thisId = _thisId.substring(4, _thisId.indexOf('_')).toLowerCase();

    // Only 1 preview element so just modify it's html.
    // _thisId will be title|subtitle|content
    $('#' + _thisId + 'Preview').html('<h1>' + $(this).val() + '</h1>');
});

// Generic handler for all tabs, except the first "add tab"
$('#tabHeaders').on('click', 'li:not(:first-child)', function () {
    var index = $(this).find('a').attr('href').split('#tab')[1];

    // index is the tab number, grab our iphone divs and
    // iterate through each one.
    $('div#iphone-frame div[id$="Preview"]').each(function (idx, el) {
        // The next two lines determine which #page[text field]_tab[index]
        // input to grab our text value from.
        var whichId = $(this).attr('id').split('Preview')[0];
        whichId = whichId.charAt(0).toUpperCase() + whichId.slice(1);

        // Get the text value and set it to the corresponding iphone display.
        var textVal = $('#page' + whichId + '_tab' + index).val();
        $(this).html('<h1>' + textVal + '</h1>');
    });
});
// End newly added code 
```

[http://jsfiddle.net/u7S5P/31/](http://jsfiddle.net/u7S5P/31/)

这样，您在打开预览时不需要更改“iphone”值的逻辑，因为它们会在用户键入时即时更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:31:41.687

试试这个：

```
$(".modal-body").find("#pageTitle").html('<h1>' + pageTitle + '</h1>');
$(".modal-body").find("#pageSubtitle").html('<h2>' + pageSubtitle + '</h2>');
$(".modal-body").find("#pageContent").html('<p>' + pageContent + '</p>'); 
```

**[演示](http://jsfiddle.net/bNnpT/3/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:32:58.417

如果 pageTitle (etcetera) 是您要写入的元素的 ID：

```
$("#pageTitle").html('<h1>' + pageTitle + '</h1>');
$("#pageSubtitle").html('<h2>' + pageSubtitle + '</h2>');
$("#pageContent").html('<p>' + pageContent + '</p>'); 
```

顺便说一句：这假设在此之前，您捕获了想要的值并将其放入变量 pageTitle （等等）中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T13:26:16.140

你可以使用[`.change()`](http://api.jquery.com/change/)jQuery的功能

```
$('.target').change(function() {
    alert('Handler for .change() called.');
}); 
```

对于您的问题，它将是这样的：

```
$('.modal-body #pageTitle').change(function() {
    $(select the element where the content needs to be updated).html(<h1>+$('.modal-body #pageTitle').text()+</h1>);
}); 
```

# android - 我可以从 apk 获取信息吗

> ID：15969014
> 
> 赞同：0
> 
> 时间：2013-04-12T10:29:19.860
> 
> 标签：android, android-keystore

我有一个问题，我可以从 apk 文件中获取信息吗？我必须编译我的应用程序一次，但多次更改名称，我想从 apk 文件中获取信息，但我不能获取 apk 名称（只有这些帖子后面的包名称[如何获取文件 *. Android 设备](https://stackoverflow.com/questions/4635448/how-to-get-the-file-apk-location-in-android-device/9424662#9424662)和[Android 中的 apk 位置：如何以编程方式获取 apk 文件的名称？](https://stackoverflow.com/questions/7608173/android-how-to-get-the-name-of-apk-file-programmatically)）

可能吗？？谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:00:34.233

> 我必须在apk名称中添加一个代码，我必须接受它

1) 用户可以给下载的文件起任何他们想要的名字。2) Android 在安装过程中重命名 apk，
例如您放入`yourapp-yourcode.apk`SD 卡并安装它。
在`/data/app`（android 创建已安装文件的副本）中，文件将被命名`this.is.your.package.name-?.apk`为`?`数字（在我的 /daga/app 文件夹中，它是 1 或 2）

=> 你应该找到另一个位置来放置你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:29:23.477

如果你已经获得了包名，那么你就差不多完成了。试试这个。

```
Package myPackage = Manifest.class.getPackage();
    String specTitle = myPackage.getSpecificationTitle();
    String vendor = myPackage.getSpecificationVendor();
    String virsion = myPackage.getSpecificationVersion(); 
```

如果可用，specTitle 将返回您的名称，否则它将返回“未知”

# activemq - ActiveMQ - Threads per producer for Queues

> ID：15969021
> 
> 赞同：1
> 
> 时间：2013-04-12T10:29:47.853
> 
> 标签：activemq, jmeter

I am trying to do some stress testing on AMQ 5.5.1\.

I have created a queue and using Jmeter Point-to-point to send JMS requests to the queue. Kindly note I haven't configured any consumer so mesages just get stacked up and actually stored in KahaDB store.
I notice if I have used 200 users in the Thread group - it creates exactly 400 threads on ActiveMQ that I can see via jconsole.
Jmeter slowly(actually quite fast) keeps on pushing messages to the queue as I can see the queue size gradually increasing and doesn't do it at one go.

I am using ProducerFlowControl as false and using the default hybrid store cursor on (though I haven't got a ready consumer at the moment).

I am also using Persistent Delivery.

My questions are:

1.  What is restricting Jmeter from pushing all the 200 messages at one go? Is it ActiveMQ or I need to configure something in jmeter to be able to send 200 at one go. I did notice as soon as I start the test on Jmeter straight away 400 threads are created on ActiveMQ which makes me think it establishes connections at one go for 200 users with activemq but messages are pushed in batches but not together.

2.  Why are there 2 threads per consumer on activemq and why do all the threads remain active until all messages have been pushed. Ideally if the users were pushing messages one by one as soon as they have done so and got an acknowledgement back it should have died out. But all 200 X 2 threads die at the same time when all messages have finally been pushed.

Any help is appreciated.

# iphone - How to reload another view controller's tableview data

> ID：15969025
> 
> 赞同：0
> 
> 时间：2013-04-12T10:30:13.923
> 
> 标签：iphone, delegates, notifications, viewcontroller

Right now, in FirstviewController, I got a button, when i clicked it, I get the value back using delegate. Right now, I want to send this value to SecondViewcontroller and reload it's tableview data. How to do that? How about use nsnotificationcenter, but i have tried, it's not working. I post the notification in the delegate that implemented in Firstviewcontroller. the code like this:

```
FirstviewController.m

// delegate that get selected cat
- (void)didSelectSubCat:(SubCat *)cat;
{
[[NSNotificationCenter defaultCenter] postNotificationName:@"DidSelectCat" object:self userInfo:@{@"catId": cat.catId}];
}

SecondViewcontroller.m

- (void)awakeFromNib
{
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(selectedCat:) name:@"DidSelectCat" object:nil];
}

- (void)selectedCat:(NSNotification *)notif
{
    NSLog(@"userinfo: %@", [notif userInfo]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:00:03.933

在 SecondViewCOntroller 中使用方法创建协议

```
 @protocol TeamListViewControllerDelegate <NSObject>

       -(void)SecondViewController:(SecondViewController*)teamListViewController data:(NSString*)data

        @end 
```

声明代表

```
 @property(nonatomic,assign) id<TeamListViewControllerDelegate> delegate; 
```

在 firstViewcontroller 中遵循该协议并实现该方法并在该方法刷新表中。我希望这将有所帮助。

# jquery - jQuery 验证接受正则表达式

> ID：15969026
> 
> 赞同：0
> 
> 时间：2013-04-12T10:30:36.640
> 
> 标签：jquery, regex, validation

我正在使用 jQuery 的[Validation](http://docs.jquery.com/Plugins/Validation)插件来验证表单，效果很好。我知道有[内置方法](http://docs.jquery.com/Plugins/Validation/Methods#List_of_built-in_Validation_methods)可以检查电子邮件地址、URL 等。但是，现在我想检查一个特定的正则表达式（`^[a-zA-Z\ ]+$`在这种情况下，但我正在寻找一个通用的答案）。

如何让插件检查正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:40:16.480

根据您链接到的文档，您希望使用[`addMethod`](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage).

大概（我没有使用过这个插件）类似于：

```
$.validator.addMethod("myMethod", function(text) { 
    var regex = /^[a-zA-Z\ ]+$/;
    return regex.test(text); 
}, "Custom error message"); 
```

您可以通过制作自己的正则表达式方法更进一步：

```
$.validator.addMethod("regex", function(text, pattern) {
    return pattern.test(text); 
}, "Pattern does not match."); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:42:48.337

你需要做这样的事情：

```
$.validator.addMethod(
    "regex",
    function(value, element, regexp) {
        var re = new RegExp(regexp);
        return this.optional(element) || re.test(value);
    },
    "Please check your input." 
```

);

现在您需要做的就是验证任何正则表达式：

```
$("#Textbox").rules("add", { regex: "^[a-zA-Z'.\\s]{1,40}$" }) 
```

我带着这个样本，所以想把它贴上去。您正在定义一种方法来再次检查您的正则表达式模式，并在下面的代码中将规则应用于特定控件。根据您的要求更改验证条件和正则表达式模式。

# android - 按多边形区域裁剪图像

> ID：15969028
> 
> 赞同：8
> 
> 时间：2013-04-12T10:30:37.597
> 
> 标签：android, image, image-processing, crop

我想按多边形区域裁剪图像，但找不到任何可以制作的库。OpenCV 对于这个小东西来说太大了。JJIL [[在此处输入链接描述](https://code.google.com/p/jjil/)] 仅裁剪矩形区域。也许你有什么想法我怎么能实现它？感谢帮助！

![在此处输入图像描述](https://i.stack.imgur.com/Ty1zh.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/RPuMU.jpg)

对于 Nidhi：尝试这样的事情，如果不起作用 - 为路径创建另一个画布，然后从中获取位图（用于遮罩），然后将此遮罩位图应用于您的初始画布而不是 drawPath。

```
Bitmap obmp = BitmapFactory.decodeResource(getResources(), R.drawable.image1);
Bitmap resultImg = Bitmap.createBitmap(obmp.getWidth(), obmp.getHeight(), Bitmap.Config.ARGB_8888);
Bitmap maskImg = Bitmap.createBitmap(obmp.getWidth(), obmp.getHeight(), Bitmap.Config.ARGB_8888);

Canvas mCanvas = new Canvas(resultImg);
Canvas maskCanvas = new Canvas(maskImg);

Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
paint.setAntiAlias(true);
paint.setStyle(Paint.Style.FILL);;
paint.setXfermode(new PorterDuffXfermode(Mode.DST_IN));

Path path = new Path();
path.moveTo(view.mx,view.my);
path.lineTo(view.x1,view.y1);
path.lineTo(view.x2,view.y2 );
path.lineTo(view.x3,view.y3);
path.lineTo(view.x4,view.y4);
path.close();

maskCanvas.drawPath(path, paint);   
mCanvas.drawBitmap(obmp, 0, 0, null);
mCanvas.drawBitmap(maskImg, 0, 0, paint); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:06:32.440

感谢 Eddy_Em，我通过使用 PorterDuffXfermode 实现了这一点。 [好的例子](https://stackoverflow.com/questions/12614542/maskingcrop-image-in-frame)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-13T13:18:44.587

这是一个有效的 Kotlin 示例，根据路径将剪辑和图像共享到多边形

```
 private fun createBitmap() {
    var bitmap = BitmapFactory.decodeResource(resources, R.drawable.gr)
    val mutableBitmap: Bitmap = bitmap.copy(Bitmap.Config.ARGB_8888, true)

    val bitmap2 = Bitmap.createBitmap(400, 400, Bitmap.Config.ARGB_8888)
    val polyCanvas = Canvas(bitmap2)
    val canvas = Canvas(mutableBitmap)

    var paint = Paint()
    paint.strokeWidth = 9f

    val path = Path()
    path.moveTo(150f, 0f)
    path.lineTo(230f, 120f)
    path.lineTo(290f, 160f)
    path.lineTo(150f, 170f)
    path.lineTo(70f, 200f)
    path.lineTo(150f, 0f)
    polyCanvas.drawPath(path, paint)
    paint.xfermode = PorterDuffXfermode(PorterDuff.Mode.SRC_IN);
    polyCanvas.drawBitmap(mutableBitmap, 0f, 0f, paint)

    imageView.setImageBitmap(bitmap2)

  } 
```

# mongodb - MongoDB中的数组交集

> ID：15969033
> 
> 赞同：4
> 
> 时间：2013-04-12T10:30:58.003
> 
> 标签：mongodb, mongodb-.net-driver, mongodb-query

好的，这里发生了一些事情..我有两个集合：test 和 test1。两个集合中的文档都有一个包含一些标签的数组字段（分别为*tags*和*tags1 ）。*我需要找到这些标签的交集，**并且**即使单个标签匹配，也需要从集合 test1 中获取整个文档。

```
> db.test.find();
{
    "_id" : ObjectId("5166c19b32d001b79b32c72a"),
    "tags" : [
            "a",
            "b",
            "c"
    ]
}          
> db.test1.find();
{
    "_id" : ObjectId("5166c1c532d001b79b32c72b"),
    "tags1" : [
            "a",
            "b",
            "x",
            "y"
    ]
}
> db.test.find().forEach(function(doc){db.test1.find({tags1:{$in:doc.tags}})}); 
```

令人惊讶的是，这不会返回任何东西。但是，当我尝试使用单个文档时，它可以工作：

```
> var doc = db.test.findOne();
> db.test1.find({tags1:{$in:doc.tags}});
{ "_id" : ObjectId("5166c1c532d001b79b32c72b"), "tags1" : [ "a", "b", "x", "y" ] } 
```

但这是我需要的一部分。我也需要交叉口。所以我尝试了这个：

```
> db.test1.find({tags1:{$in:doc.tags}},{"tags1.$":1});
{ "_id" : ObjectId("5166c1c532d001b79b32c72b"), "tags1" : [ "a" ] } 
```

但它只返回“a”，而“a”和“b”都*在*tag1 中。位置运算符是否只返回第一个匹配项？此外，使用`$in`不会完全给我一个交集..我怎样才能得到一个交集（应该返回“a”和“b”），而不管哪个数组与另一个数组进行比较。

现在说有一个操作员可以做到这一点..

```
> db.test1.find({tags1:{$intersection:doc.tags}},{"tags1.$":1});
{ "_id" : ObjectId("5166c1c532d001b79b32c72b"), "tags1" : [ "a", "b" ] } 
```

我的要求是，我需要整个 tags1 数组加上这个交集，在同一个查询中，如下所示：

```
> db.test1.find({tags1:{$intersection:doc.tags}},{"tags1":1, "tags1.$":1});
{ "_id" : ObjectId("5166c1c532d001b79b32c72b"), "tags1": [ "a", "b", "x", "y" ],
"tags1" : [ "a", "b" ] } 
```

但这是一个无效的 json。重命名键是可能的，还是只能通过聚合框架（以及跨不同的集合？）？我尝试了上面的查询`$in`。但它表现得好像完全忽略了`"tags:1"`投影。

PS：我将在 test1 中至少有 10k 文档，而在测试中将有很少 (<10) 个文档。而且这个查询是实时的，所以我想避免使用 mapreduce :)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-06-24T19:25:09.580

在较新的版本中，您可以使用[聚合](https://docs.mongodb.com/manual/aggregation/)来完成此操作。

```
db.test.aggregate(
    {
        $match: {
            tags1: {
                $in: doc.tags
            }
        }
    },
    {
        $project: {
            tags1: 1,
            intersection: {
                $setIntersection: [doc.tags, "$tags1"]
            }
        }
    }
); 
```

如您所见，该部分与您的初始查询`match`完全相同。`find()`该`project`部分生成结果字段。在这种情况下，它`tags1`从匹配的文档中进行选择，并`intersection`从输入和匹配的文档中创建。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T14:06:33.580

~~如果您想实时获得此功能，您应该考虑摆脱仅使用一个线程运行并且应该非常慢（单线程）的服务器端 Javascript（对于 v2.4，[http://docs 不再适用。 mongodb.org/manual/core/server-side-javascript/](http://docs.mongodb.org/manual/core/server-side-javascript/)）。~~

位置运算符仅返回第一个匹配/当前值。在不了解内部实现的情况下，从性能的角度来看，如果文档已经被评估为匹配，那么寻找进一步的匹配标准甚至没有意义。所以我怀疑你能做到这一点。

我不知道您是否需要笛卡尔积进行搜索，但我会考虑将您的几个 test one 文档标签合并为一个，然后在 test1 上进行一些 $in 搜索，返回所有匹配的文档。在您的本地机器上，您可以有多个线程来为您的文档生成交集。

根据您的 test1 和测试集合更改的频率，您正在执行此查询，您可能会预先计算此信息。这将允许轻松地对包含交叉点信息的字段进行查询。

该文档无效，因为您有两个字段名称**tags1**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-15T14:47:52.300

Mongo 没有任何固有的检索数组交集的能力。如果您确实需要使用临时查询，请在客户端获取交集。

另一方面，考虑使用 Map-Reduce 并将其输出存储为一个集合。您可以在该部分中扩充返回的对象`finalize`以添加相交标签。Cron MR 每隔几​​秒运行一次。您可以从可以在客户端查询的永久集合中受益。

# wpf - WPF Window SizeToContent 超出桌面大小

> ID：15969034
> 
> 赞同：5
> 
> 时间：2013-04-12T10:31:00.983
> 
> 标签：wpf, multiple-monitors, sizetocontent

WPF`Window` `SizeToContent`的增长超出了桌面大小。我想这可能是由于我的多显示器设置造成的。我应该如何限制`Window`只增长到活动的大小`Window`（不超过最大化）？

# mysql - 在mysql中使用子查询获取逗号分隔的列表

> ID：15969036
> 
> 赞同：4
> 
> 时间：2013-04-12T10:31:08.343
> 
> 标签：mysql

我已经显示了截至特定日期的可用组件数量和库存历史成本的数据。使用以下查询可以正常工作。

```
SELECT s.part_id,
       sum(s.updated_quantity),
       p.item_code,
       sum(
             (SELECT (s.updated_quantity * cost)
              FROM inventory
              WHERE inventory.id=s.inv_id)) AS tcost
FROM status_history AS s,
     inventory AS i,
     part_master AS p
WHERE s.action='add'
  AND DATE(s.date_created)<='2013-04-09'
  AND i.currency_id=1
  AND s.inv_id=i.id
  AND s.part_id=p.id
GROUP BY s.part_id 
```

我还想在单个字段中显示用逗号分隔的组件的位置名称。为了得到我想要的结果，我尝试了下面的查询，但它只返回一个位置名称，而不是多个位置名称的逗号分隔字符串。

```
SELECT s.part_id,
       sum(s.updated_quantity),
       p.item_code,
       sum(
             (SELECT (s.updated_quantity * cost)
              FROM inventory
              WHERE inventory.id=s.inv_id)) AS tcost,
       CONCAT_WS(',',
                   (SELECT name
                    FROM location_master
                    WHERE id=i.location_id)) AS LOCATION
FROM status_history AS s,
     inventory AS i,
     part_master AS p
WHERE s.action='add'
  AND DATE(s.date_created)<='2013-04-09'
  AND i.currency_id=1
  AND s.inv_id=i.id
  AND s.part_id=p.id
GROUP BY s.part_id 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T10:58:39.187

看下面的例子：

```
mysql> select Country,Abbreviation from Country;
+--------------------------+--------------+
| Country                  | Abbreviation |
+--------------------------+--------------+
| INDIA                    | ID           |
| Canada                   | CAN          |
| Australiya               | AUS          |
| United Kingdom           | UK           |
| United States Of America | USA          |
| PAKISTAN                 | PAK          |
| MILAN                    | Panchal      |
| MILAN                    | Panchal      |
| JAPAN                    | JP           |
+--------------------------+--------------+
9 rows in set (0.00 sec) 
```

Panchal 有 2 条记录

按缩写分组将仅显示 1 条记录。

mysql> select Country,Abbreviation from Country group by Abbreviation;

```
+--------------------------+--------------+
| Country                  | Abbreviation |
+--------------------------+--------------+
| Australiya               | AUS          |
| Canada                   | CAN          |
| INDIA                    | ID           |
| JAPAN                    | JP           |
| PAKISTAN                 | PAK          |
| MILAN                    | Panchal      |
| United Kingdom           | UK           |
| United States Of America | USA          |
+--------------------------+--------------+ 
```

Country 上的 GROUP_CONCAT 将显示逗号分隔值。

mysql> select GROUP_CONCAT(Country),Abbreviation from Country group by Abbreviation;

```
+--------------------------+--------------+
| GROUP_CONCAT(Country)    | Abbreviation |
+--------------------------+--------------+
| Australiya               | AUS          |
| Canada                   | CAN          |
| INDIA                    | ID           |
| JAPAN                    | JP           |
| PAKISTAN                 | PAK          |
| MILAN,MILAN              | Panchal      |
| United Kingdom           | UK           |
| United States Of America | USA          |
+--------------------------+--------------+ 
```

从顶部看第 6 条记录。因为它包含逗号分隔的值。

要了解有关 GROUP_CONCAT() 函数的更多信息，[请单击此处](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T11:28:17.913

**下面的查询显示重复数据：**

```
select 
s.part_id,
sum(s.updated_quantity),
p.item_code,
sum(
     (select (s.updated_quantity * cost) from inventory where inventory.id=s.inv_id)) 
      as tcost,
GROUP_CONCAT(name) as location 
from status_history as s,
inventory as i,
part_master as p,
location_master as l 
where s.action='add' and 
DATE(s.date_created)<='2013-04-09' and 
i.currency_id=1 and 
s.inv_id=i.id and 
s.part_id=p.id and 
l.id=i.location_id 
group by s.part_id 
```

**下面的查询显示不同的数据：**

```
select 
s.part_id, 
sum(s.updated_quantity),
p.item_code,
sum(
     (select(s.updated_quantity * cost) from inventory where inventory.id=s.inv_id))
       as tcost,
GROUP_CONCAT(distinct(name)) as location 
from status_history as s,
inventory as i,
part_master as p,
location_master as l 
where s.action='add' and 
DATE(s.date_created)<='2013-04-09' and 
i.currency_id=1 and 
s.inv_id=i.id and 
s.part_id=p.id and 
l.id=i.location_id 
group by s.part_id 
```

# java - 为什么作者使用EntityUtils.consume(httpEntity);？

> ID：15969037
> 
> 赞同：45
> 
> 时间：2013-04-12T10:31:09.193
> 
> 标签：java, apache-httpclient-4.x

我遇到过`EntityUtils.consume(httpEntity);`，我不确定它的真正作用。

例如：

```
try {

    //... some code

    HttpEntity httpEntity = httpResponse.getEntity();
    BufferedReader br = new BufferedReader(new InputStreamReader(http.Entity.getContent()));
    String line;
    while ((line = br.readLine())!= null) {
        System.out.println(line);
    }
    EntityUtils.consume(httpEntity);
} catch (Exception e) {
    //code
} finally { 
    httpClient.getConnectionManager().shutdown();
} 
```

为什么作者在`EntityUtils.consume(httpEntity);`block`finally`会关闭连接和garbage collector会处理的时候放入`httpEntity`？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-04-12T12:05:33.313

它真的归结为成为一个“好公民”（并且真正了解`HTTPClient`接口的合同）。要做`EntityUtils.consume`的是释放所有由`httpEntity`.下一个请求。

如果您不使用`entity`，会发生什么实际上取决于 finally 子句中“关闭连接管理器”的含义。它会关闭尚未发送回池的待处理流/连接吗？我不确定它会以合同方式做到这一点（尽管我认为在实施方面确实如此）。如果没有，那么您可能正在泄漏系统资源（套接字等）。发生的事情还可能取决于 Entity 对象的可能最终确定方法，该方法可能（如果它被执行）释放其资源，同样，不确定它是否在实体的合同中这样做。

让我们假设一下，`ConnectionManager`当它关闭时，它实际上会优雅地关闭所有挂起的资源。你还需要消耗实体吗？我说是的，因为一个月后，有人会修改你的代码并在同一个 try/finally 块中进行第二次 HTTP 调用，并且可能无法这样做，因为你没有以应有的方式释放资源（例如，如果您的客户端位于单个连接池上，不释放第一个连接将导致第二次调用失败）。

所以我的观点是：实体是资源，在不需要时应该释放资源。指望其他人在以后为您释放它们可能会在将来伤害您。原作者可能已经按照这些思路进行了思考。

作为旁注，请注意，您编写的实现实际上会消耗阅读器直到底层流的末尾，所以消耗调用实际上什么都不做，但在我看来，这是一个实现细节（在在我的脑海中，一旦响应流被完全读取，连接对象会自动释放/发送回http客户端中的池）。另请注意，如果您使用 API 提供的 ResponseHandler 机制，所有这些消费逻辑也会从您那里抽象出来。最后，API 不保证`response.getEntity`永远不会返回 null，因此您应该检查它以避免`NullPointerException`.

# r - 用于使用多线程 BLAS 的监督学习的 R 包

> ID：15969038
> 
> 赞同：0
> 
> 时间：2013-04-11T22:31:53.397
> 
> 标签：r, parallel-processing

有哪些用于监督学习的 R 包利用多线程 BLAS 进行并行计算（例如矩阵乘法）？如果使用多线程 BLAS 实现（例如 ATLAS、GotoBlas2）编译 R，编译后的 R 包是否会自动链接到同一个 BLAS 库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:23:05.860

是的——BLAS 是一个插件标准，您可以通过从“参考 blas”（refblas 包）到“自动调整的线性代数 blas”（package atlas）和多线程版本 MKL（商业）、GotoBlas（现在已失效）或 OpenBLAS。

我有一个`gcbd`提供比较框架的包，以及一个[说明它的小插图草稿](http://cran.r-project.org/web/packages/gcbd/vignettes/gcbd.pdf)。

（并且 Eigen / RcppEigen 是不同的，因为 Eigen*自己选择*绕过 BLAS 接口进行许多/大多数操作。）

# javascript - 如果我只知道它的大小和东北点，如何绘制谷歌地图矩形

> ID：15969043
> 
> 赞同：2
> 
> 时间：2013-04-12T10:31:22.840
> 
> 标签：javascript, google-maps-api-3

要在谷歌地图中绘制一个矩形，我需要知道西北和东南点首先构建一个 LatLngbounds。

在我的情况下，我想绘制一个具有特定西北点和大小（比如 100 米宽和 100 米高）的矩形。我不知道最南端。

我害怕几何学和地质学。我知道东南可以派生一些公式。只是想知道是否有 api 或简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T11:04:38.240

你可以写一个这样的函数：

```
// Given the LatLng of a northwest corner, and the number of meters to
// measure east and south, return the LatLngBounds for that rectangle
function makeBounds( nw, metersEast, metersSouth ) {
    var ne = google.maps.geometry.spherical.computeOffset(
        nw, metersEast, 90
    );
    var sw = google.maps.geometry.spherical.computeOffset(
        nw, metersSouth, 180
    );
    return new google.maps.LatLngBounds( sw, ne );
} 
```

这是一个[工作示例](http://jsfiddle.net/geary/6cCvG/2/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:51:51.530

请参阅几何库中的[computeOffset](https://developers.google.com/maps/documentation/javascript/reference#spherical)。

计算偏移（从：LatLng，距离：数字，航向：数字，半径？：数字）

类似的东西（未测试）：

```
var NorthEast = google.maps.geometry.spherical.computeOffset(NorthWest, width, 90);
var SouthWest = google.maps.geometry.spherical.computeOffset(NorthWest, height, 180);
var SouthEast = google.maps.LatLng(SouthWest.lat(),NorthEast.lng()); 
```

一定要包括[几何库](https://developers.google.com/maps/documentation/javascript/libraries)

# javascript - 在 knockout.js 中禁用锚标记

> ID：15969045
> 
> 赞同：22
> 
> 时间：2013-04-12T10:31:27.303
> 
> 标签：javascript, html, knockout.js

我需要在 HTML 中的 knockout.js 的 foreach 循环中禁用锚标记。

这是我的代码：

```
<a id="aQStreamSkype" data-bind="attr:{href: ''}, click: $parent.StoreUserClick,disable: ($data.SkypeId == 'null')">Skype </a> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-12T14:24:14.230

**锚标签不能被禁用**。
最简单的方法是使用`ko if binding`然后渲染 a`span`而不是`anchor`如果 skype id 为 null

```
<!-- ko if: skypeId === null -->
    <span >No Skype Id</span>
<!-- /ko -->
<!-- ko if: skypeId !== null -->
    <a id="aQStreamSkype" data-bind="attr:{href: ''}, click: $parent.StoreUserClick,text: skypeId"></a>
<!-- /ko --> 
```

[这是一个小提琴](http://jsfiddle.net/sujesharukil/w9SHz/1/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-11-28T15:52:13.997

如果元素上没有`href`属性，`a`而只有 a 中的动作`click binding`，那么一种简单的方法是将表达式传递`condition && handler`给单击绑定。

如果条件是可观察的，您需要添加括号。

```
<a data-bind="click: flag1() && handler">Enabled link</a>
<a data-bind="click: flag2() && handler">Disabled link</a> 
```

它将被评估为`false`if condition is `false`（所以什么都不会发生），
并且如果 condition is 将被评估为一个处理程序`true`。

[在这里提琴](http://jsfiddle.net/83kkjnbg/1/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-09-05T09:16:02.080

首先，有一种思想流派，我对此表示同情，说不[要这样做](https://css-tricks.com/how-to-disable-links/#article-header-id-0)。什么都不做的超链接只是文本。

但是，我可以看到硬币的另一面 - 我遇到了同样的问题，因为我使用的是包含锚标签作为菜单选项的 Bootstrap 下拉菜单，并且在我看来，它可以提供更好的用户体验来显示菜单选项禁用而不是根本不显示它们，而且我觉得“禁用”超链接比包含超链接和`span`具有相同文本的标记然后有条件地显示一个或另一个更干净。所以，我的解决方案是：

```
<a data-bind="click: checkCondition() ? myFunction : null, css: { disabled: !checkCondition() }"></a> 
```

请注意，这`checkCondition()`是一个返回 true 或 false 的函数，指示是否应启用超链接。绑定只是将超链接设置为禁用 -如果您不使用 Bootstrap，您可能必须添加自己的 CSS类`css`。`.disabled`

这个工作的关键是锚没有`href`属性，所以它作为一个没有 Knockout`click`绑定的超链接是没有用的，这意味着你可以很容易地使用这个方法来处理任何元素类型（例如，这可能是一个可点击`span`的，就像锚）。但是，我想使用一个锚点，这样我的样式就可以继续应用而无需任何额外的工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T10:35:15.390

禁用仅适用于表单元素，不适用于锚标记。您可以改用[可见](http://knockoutjs.com/documentation/visible-binding.html)绑定，如果没有用户 ID，只需隐藏链接。如果您确实想在没有用户 ID 的情况下显示某些内容，则添加一个具有相反可见测试的跨度，如果有用户 ID，则显示一个，如果没有，则显示另一个：

```
<a id="aQStreamSkype" data-bind="attr:{href: ''}, click: $parent.StoreUserClick, visible: ($data.SkypeId !== 'null')">Skype </a>
<span class="notLink" data-bind="visible: ($data.SkypeId === 'null')">Skype </span> 
```

附带说明一下，如果 SkypeId 是可观察的，则需要在比较检查中将其称为一个：

```
($data.SkypeId() !== 'null') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T12:55:18.067

通过一些覆盖魔法，您可以在不需要更改视图或 ViewModel 代码的情况下获得此行为

```
 (function () {
      var orgClickInit = ko.bindingHandlers.click.init;
      ko.bindingHandlers.click.init = function (element, valueAccessor, allBindingsAccessor, viewModel) {
          if (element.tagName === "A" && allBindingsAccessor().enable != null) {
              var disabled = ko.computed(function () {
                  return ko.utils.unwrapObservable(allBindingsAccessor().enable) === false;
              });
              ko.applyBindingsToNode(element, { css: { disabled: disabled} });
              var handler = valueAccessor();
              valueAccessor = function () {
                  return function () {
                      if (ko.utils.unwrapObservable(allBindingsAccessor().enable)) {
                          handler.apply(this, arguments);
                      }
                  }
              };

          }
          orgClickInit(element, valueAccessor, allBindingsAccessor, viewModel);
      };
  })(); 
```

当您包含该代码时，启用绑定将适用于 anhors

小提琴，它使用我的约定库，所以忽略那部分 [http://jsfiddle.net/xCfQC/4/](http://jsfiddle.net/xCfQC/4/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T10:38:23.030

Knockout 启用/禁用绑定**不支持锚标签**。

所以你有两个解决方案。

**解决方案 1**

```
<a href='#' title="Skype" data-bind='click: function() { 
 if(($data.SkypeId !== 'null'))
 {
    //call the desired method from here
 }' > 
```

**解决方案 2**

此按钮仅在您的条件成功且具有点击绑定时显示

```
<a data-bind="click: $parent.StoreUserClick, visible: ($data.SkypeId != 'null')" href="#" title="Skype"> 
```

此按钮仅在您的否定条件成功且没有点击绑定时显示

```
<a data-bind="visible: ($data.SkypeId == 'null')" href="#" title="Skype "> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-30T23:03:36.473

我发现[ko.plus](https://github.com/stevegreatrex/ko.plus)是一个实现命令模式的优秀库。在“canExecute”条件为真之前，不能执行“动作”。

```
var vm = {
    enabled: ko.observable(false),
    StoreUserClick: ko.command({
        action: function () {
            window.alert('Command is active')
        },
        canExecute: function () {
            return vm.enabled();
        }
    })
}
ko.applyBindings(vm);
```

```
a.disabled {
    color: gray;
    text-decoration: none;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.2.0/knockout-min.js"></script>
<script src="https://raw.githubusercontent.com/stevegreatrex/ko.plus/master/dist/ko.plus.js"></script>

<a href="" id="aQStreamSkype" data-bind="click: StoreUserClick, css: { disabled: !StoreUserClick.canExecute() }">Skype</a>
<br />
<br />
<input type="checkbox" data-bind="checked: enabled">enabled
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-12-30T00:39:25.203

我喜欢使用的另一个选项是使用**“css”**指令禁用锚点：

```
<a id="aQStreamSkype" data-bind="css: { disabled: $data.SkypeId == 'null' }">Skype</a> 
```

# xml - 基于另一个节点对 XML 节点进行排序

> ID：15969047
> 
> 赞同：2
> 
> 时间：2013-04-12T10:31:35.013
> 
> 标签：xml, sorting, xslt

在 XSLT 中，我想调用一个模板，并将一些内容传递给一个模板。但是，内容应该按照视频的排序方式 (13-41-61) 进行排序，而不是按照内容的排序顺序 (61-41-13)。

我有以下 XML：

```
<videos>
    <video key="13" />
    <video key="41" />
    <video key="61" />
</videos>

<contents>
    <content key="61" />
    <content key="41" />
    <content key="13" />
    <content key="10" />
</contents> 
```

XSLT：

```
<xsl:call-template name="video">
    <xsl:with-param name="content" select="contents/content[@key = videos/video/@key]" />
</xsl:call-template> 
```

有没有办法轻松完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:49:12.377

**这种转换似乎是当前发布的解决方案中最有效的——否`count(preceding-sibling::*)`和否`//content[@key=$key]`——两者都导致 O(N^2)——二次时间复杂度**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>
 <xsl:key name="kContByAtttr" match="content" use="@key"/>
 <xsl:key name="kVidByAtttr" match="video" use="@key"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="contents">
  <contents>
   <xsl:for-each select="/*/videos/video">
     <xsl:apply-templates select="key('kContByAtttr', @key)"/>
   </xsl:for-each>
   <xsl:apply-templates select="*[not(key('kVidByAtttr', @key))]"/>
  </contents>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于提供的 XML（包装到单个顶部元素中以成为一个）文档时：**

```
<t>
    <videos>
        <video key="13" />
        <video key="41" />
        <video key="61" />
    </videos>
    <contents>
        <content key="61" />
        <content key="41" />
        <content key="13" />
        <content key="10" />
    </contents>
</t> 
```

**产生想要的正确结果**：

```
<t>
   <videos>
      <video key="13"/>
      <video key="41"/>
      <video key="61"/>
   </videos>
   <contents>
      <content key="13"/>
      <content key="41"/>
      <content key="61"/>
      <content key="10"/>
   </contents>
</t> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:37:22.660

是否有特定原因需要使用`<xsl:call-template>`吗？如果您只想按`<content>`元素所在的顺序对`<video>`元素进行排序，您可以执行以下操作：

### 样式表

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" version="1.0" encoding="utf-8" indent="yes"
    omit-xml-declaration="yes"/>
  <xsl:strip-space elements="*"/>

  <!--
  Index <video> elements according to their position in the tree.
  See http://stackoverflow.com/a/5876074/825783
  -->
  <xsl:key name="kVideo" match="video"
    use="count(preceding-sibling::video) + 1"/>

  <!-- Identity transform -->
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="content">
    <xsl:copy>
      <!--
      Apply attributes (fallback to account for the extra <content> element)
      -->
      <xsl:apply-templates select="@*"/>
      <!--
      Apply the @key attribute of the <video> element that's in a
      position corresponding to the position of this <content> element
      -->
      <xsl:apply-templates select="key('kVideo', position())/@key"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

### 输入

```
<root>
  <videos>
    <video key="13"/>
    <video key="41"/>
    <video key="61"/>
  </videos>
  <contents>
    <content key="61"/>
    <content key="41"/>
    <content key="13"/>
    <content key="10"/>
  </contents>
</root> 
```

### 输出

```
<root>
  <videos>
    <video key="13"/>
    <video key="41"/>
    <video key="61"/>
  </videos>
  <contents>
    <content key="13"/>
    <content key="41"/>
    <content key="61"/>
    <content key="10"/>
  </contents>
</root> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:38:50.610

复制并粘贴我通常使用的代码片段，它应该可以工作

```
<xsl:template match="/">
  <contents>
    <xsl:for-each select="//video">
      <xsl:call-template name="sortedId">
        <xsl:with-param name="key" select="@key"></xsl:with-param>
      </xsl:call-template>
    </xsl:for-each>
  </contents>    
</xsl:template>

<xsl:template name="sortedId" >
    <xsl:param name="key"></xsl:param>
    <xsl:apply-templates select="//content[@key=$key]" />
</xsl:template>

<xsl:template match="content">
    <xsl:copy-of select="." />
</xsl:template> 
```

结果是：

```
<contents>
  <content key="13" />
  <content key="41" />
  <content key="61" />
</contents> 
```

# php - 通过 lan 或 wan 以 root 网站运行 wamp

> ID：15969049
> 
> 赞同：0
> 
> 时间：2013-04-12T10:31:37.383
> 
> 标签：php, apache, wamp

我想从其他系统运行 localhost php 网站。我能够通过子文件夹链接将网站运行为`http://192.168.1.102/website`. 但我希望它作为主站点运行`http://website`。

我们有什么办法可以做到这一点。

我尝试在主机文件中添加以下内容，但没有奏效。

**主机**：

```
http://192.168.1.102/website website 
```

我还尝试执行以下操作：
**主机**：

```
192.168.1.102 website 
```

**httpd-vhosts.conf**

```
<VirtualHost *:80>
    DocumentRoot e:/wamp/www/website/
    ServerName website
</VirtualHost> 
```

这里的 DocumentRoot 路径是其他电脑上的路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:44:45.573

在您托管网站的系统中（我的意思是您通过 LAN 访问的那个），您需要有以下主机条目

```
127.0.0.1   localhost
127.0.0.1   website 
```

并且在您访问此远程系统的系统中，需要具有以下主机条目

```
192.168.1.102 website 
```

192.168.1.102是你正在访问的机器的ip地址，请相应更改

此外，如果您在 WAMP 中设置 VHOST 时遇到问题，您可以使用以下链接验证您的方式，它对我有用，我经常使用此链接

[在 Windows 中设置 WAMP 服务器以及虚拟主机](http://www.kristengrote.com/blog/articles/how-to-set-up-virtual-hosts-using-wamp#wamp-step-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:35:59.020

在`/etc/hosts`添加这样的条目：

```
127.0.0.1     www.localhost
192.168.1.102 website 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:33:30.223

您需要编辑 wamp 的 apache 配置以将其默认根指向您的文件夹（不是 vhosts，而是主文件），您还需要将 wamp 置于在线模式，以便它不仅在 localhost 上侦听外部接口，而且我相信这只是配置中的一个 * 无论如何都要听所有而不只是 127.0.0.1

# c++ - C ++对重载函数的奇怪模棱两可的调用

> ID：15969052
> 
> 赞同：4
> 
> 时间：2013-04-12T10:31:42.467
> 
> 标签：c++, namespaces, compiler-theory, ambiguous

首先，这个问题纯属理论性质。我不是在寻找解决方案（我已经知道了），我只是在寻找解释。

以下代码无法编译：

```
struct foo {};
void a(foo) {}
namespace foobar {
    void a(foo) {}
    void b(foo f) {a(f);}
}
int main() {return 1;} 
```

MSVC++：

```
1>c:\projects\codetests\main.cpp(7) : error C2668: 'foobar::a' : ambiguous call to overloaded function
1>        c:\projects\codetests\main.cpp(4): could be 'void foobar::a(foo)'
1>        c:\projects\codetests\main.cpp(2): or       'void a(foo)' [found using argument-dependent lookup]
1>        while trying to match the argument list '(foo)' 
```

G++：

```
main.cpp: In function 'void foobar::b(foo)':
main.cpp:5:20: error: call of overloaded 'a(foo&)' is ambiguous
main.cpp:5:20: note: candidates are:
main.cpp:4:7: note: void foobar::a(foo)
main.cpp:2:6: note: void a(foo) 
```

虽然此代码编译（MSVC++ 和 G++）：

```
namespace bar {struct foo {};}
void a(bar::foo) {}
namespace foobar {
    void a(bar::foo) {}
    void b(bar::foo f) {a(f);}
}
int main() {return 1;} 
```

这是为什么？foo 周围的命名空间对这里的编译器有什么变化？这种行为是否在 C++ 标准中定义？还有其他解释吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T10:47:08.967

> 'void a(foo)' [使用参数相关查找找到]

好吧，令人惊讶的是，MSVC 有一个非常好的错误解释：

**按照标准**，在函数内部，编译器会在当前命名空间和定义参数类型的命名空间中查找符号。

在第一种情况下`a`，`foobar`在参数类型的命名空间中`foo`：全局命名空间，使其不明确。

在第二种情况下`a`is in`foobar`但不在参数类型的命名空间中`bar::foo`： with is `bar`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:42:59.263

有两个符号 a(foo) 并且编译器无法决定使用哪一个。因此，您必须明确指示编译器。

如果你想调用 foobar 的 a(foo) 然后试试这个，

```
 void b(foo f) { foobar::a(f); } 
```

如果你想要全局 a(foo) 然后试试这个，

```
 void b(foo f) { ::a(f); } 
```

# iphone - ios - UIWebView DidFinishLoad 未被调用

> ID：15969055
> 
> 赞同：5
> 
> 时间：2013-04-12T10:31:54.133
> 
> 标签：iphone, ios, objective-c, uiwebview, uiwebviewdelegate

我有一个`UIWebView`工作正常。代表正在工作。当我打开一个 URL 时，事件`shouldStartLoadWithRequest`并被`webViewDidFinishLoad`触发。

但是，例如，当我单击 Google 搜索结果时，只会`shouldStartLoadWithRequest`被触发，并且`webViewDidFinishLoad`永远不会被调用。

这会导致问题，因为如果我在 上放置“正在加载...”指示器`shouldStartLoadWithRequest`，在这些情况下，即使页面正确加载，指示器仍然存在。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:38:47.713

在 .h 文件中添加`<UIWebViewDelegate>`

并以 .m 为单位：

```
yourWebview=[[UIWebView alloc]init];
yourWebview.delegate=self; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:46:01.460

当你点击搜索时，navigationType 是 UIWebViewNavigationTypeFormSubmitted。所以在这种情况下，返回类型应该是 YES。如果不是，则不会触发 webViewDidFinishLoad 方法。

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSLog(@"shouldStartLoadWithRequest");

    if ( navigationType == UIWebViewNavigationTypeLinkClicked ){
        NSLog(@"UIWebViewNavigationTypeLinkClicked");

        return YES;
    } 
    if (navigationType ==UIWebViewNavigationTypeFormSubmitted ) {
        NSLog(@"UIWebViewNavigationTypeFormSubmitted");
        return YES;
    }
    if (navigationType ==UIWebViewNavigationTypeBackForward) {
        NSLog(@"UIWebViewNavigationTypeBackForward");
        return YES;
    }
    if (navigationType ==UIWebViewNavigationTypeFormResubmitted) {
        NSLog(@"UIWebViewNavigationTypeFormResubmitted");
        return YES;
    }
    if (navigationType ==UIWebViewNavigationTypeReload) {
        NSLog(@"UIWebViewNavigationTypeReload");
        return YES;
    }

    return YES;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T11:27:13.840

此问题通常在 ipad 应用程序中发现....但您可以使用 [self performselector:afterdelay] 解决您的问题，您必须使用 [m_pWebview loaded] 检查选择器方法是否已加载 webview；并根据该执行指标停止....这不是正确的解决方案，但它可以工作....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T10:53:11.813

不是 Google API 专家，但我怀疑这可能是您的[原因](https://stackoverflow.com/questions/10568661/why-are-google-search-results-in-uiwebview-not-triggering-webviewdidfinishload)。

# ios - 使用 Kiwi、Core Data 和 Magical Record 进行单元测试

> ID：15969058
> 
> 赞同：3
> 
> 时间：2013-04-12T10:31:58.410
> 
> 标签：ios, objective-c, xcode, core-data, magicalrecord

我在使用“假”商店进行单元测试时遇到问题。我通过将其框架文件夹添加到我的项目并用 Kiwi 测试替换 Xcode 的默认测试用例来安装 Kiwi。这些都运行良好。

由于我使用的是 Core Data，我需要创建一个“假”存储，所以我正在使用真实的数据库。我使用[http://www.cimgf.com/2012/05/15/unit-testing-with-core-data/](http://www.cimgf.com/2012/05/15/unit-testing-with-core-data/)作为我的基本指南来执行此操作。

但是，由于 Xcode 的默认测试实现在启动应用程序后运行测试，因此在任何测试运行之前，我的 '[MagicalRecord setupCoreDataStackWithStoreNamed:@"Store.sqlite"]' 仍会在 App Delegate 内触发。

当测试尝试使用“[MagicalRecord setupCoreDataStackWithInMemoryStore]”时，该 sqlite 存储已设置，因此内存存储未设置（AFAIK），因为上述设置堆栈方法首先检查是否一个堆栈已经存在，并且如果它确实返回而不执行任何操作，所以我最终仍然使用 sqlite 数据库。

据我所知，这给我留下了以下选择：

1.  为测试用例放入一些环境变量或标志，并在应用程序委托中检查这些，根据该变量创建适当的存储（即为了测试而调整我的实际代码 - 不漂亮，也不推荐任何实践 TDD /BDDers）。
2.  在我的所有控制器上添加托管上下文属性，以便我可以手动指定要使用的存储（消除 MagicalRecord 单例访问模式的大量细节）。
3.  玩（小心地）我的实际数据库（我什至不愿意考虑这个）。

这些似乎都不是一个特别好的解决方案，所以我希望有人能看到一个我愚蠢地忽略的更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:09:13.487

您的测试不应启动应用程序委托。按照您参考的文章中的建议，尝试设置您的测试，以便只有测试设置内存中的核心数据存储。

# jsp - 在 gwt 应用程序中将错误消息从 servlet 打印到 jsp

> ID：15969059
> 
> 赞同：0
> 
> 时间：2013-04-12T10:32:01.123
> 
> 标签：jsp, jakarta-ee, servlets

在 gwt 应用程序中将错误消息从 servlet 打印到 jsp

我正在使用 jsp 在我的 gwt 应用程序中打印错误消息，如下所示。

//Servlet代码

```
if (validateBranchId == false) {
      UserMessagesAndErrors ume = ThreadLocalObjects.
                         getThreadLocalUserMessagesAndErrors().get();
      ume.addError("Branch Id value is not correct");
      RequestDispatcher dispatcher =
                         getServletContext().getRequestDispatcher("/errors.jsp");
      dispatcher.forward(req, res);         
    } 
```

//jsp代码(errors.jsp)

```
<%@ page contentType="text/html;charset=UTF-8" language="java" isELIgnored="false" %>    
<%@ page import="com.veersoft.util.ThreadLocalObjects" %> 
```

根据上面的代码，如果我的分支 id 不存在于 objectify 数据存储中，则 validateBranchId 为 false，因此我的 ume (usermessagesAndErrors) 必须在 jsp 中打印消息，但它不会在 jsp 中打印消息。任何人有想法请告诉我。

```
<%@ page import="com.veersoft.gwt.shared.error.UserMessagesAndErrors" %>     
<%@ page import="java.util.List" %>     

errors!    
<%    
    UserMessagesAndErrors ume = ThreadLocalObjects.getUserMessagesAndErrorsObj();
    List<String> errors = ume.getErrors();    
    for (String error : errors) {    
        out.println(error + "<BR/>");    
    }     

    List<String> messages = ume.getMessages();    
    for (String message : messages) {    
        out.println(message + "<BR/>");    
    }    
%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:26:58.270

在小服务程序中：

```
ume.addError("Branch Id value is not correct");
req.setAttribute("ume",ume); // add it to the request
RequestDispatcher dispatcher = ... 
```

在 jsp 中：

```
UserMessagesAndErrors ume = (UserMessagesAndErrors) request.getAttribute("ume");
List<String> errors = ume.getErrors();
//etc 
```

但是您应该在 jsp 中完全避免使用 scriptlet - 使用 EL。

# mysql - 数据库服务器占用超过 100% 的 CPU

> ID：15969060
> 
> 赞同：0
> 
> 时间：2013-04-12T10:32:02.470
> 
> 标签：mysql, database-tuning

我的数据库服务器占用超过 100% 的 CPU

当我运行 mysqltuner 时，它给出了以下内容`recommendation`

```
]# sudo ./mysqltuner.pl

 >>  MySQLTuner 1.2.0 - Major Hayden <major@mhtx.net>
 >>  Bug reports, feature requests, and downloads at http://mysqltuner.com/
 >>  Run with '--help' for additional options and output filtering

-------- General Statistics --------------------------------------------------
[--] Skipped version check for MySQLTuner script
[OK] Currently running supported MySQL version 5.0.92-community
[!!] Switch to 64-bit OS - MySQL cannot currently use all of your RAM

-------- Storage Engine Statistics -------------------------------------------
[--] Status: +Archive -BDB +Federated +InnoDB -ISAM -NDBCluster
[--] Data in MyISAM tables: 1G (Tables: 9347)
[--] Data in InnoDB tables: 477M (Tables: 1803)
[--] Data in MEMORY tables: 0B (Tables: 4)
[!!] Total fragmented tables: 98

-------- Security Recommendations  -------------------------------------------
[OK] All database users have passwords assigned

-------- Performance Metrics -------------------------------------------------
[--] Up for: 2d 8h 25m 8s (87M q [430.053 qps], 534K conn, TX: 2B, RX: 2B)
[--] Reads / Writes: 89% / 11%
[--] Total buffers: 670.0M global + 2.7M per thread (100 max threads)
[OK] Maximum possible memory usage: 938.7M (30% of installed RAM)
[OK] Slow queries: 0% (1K/87M)
[!!] Highest connection usage: 100%  (101/100)
[OK] Key buffer size / total MyISAM indexes: 8.0M/610.0M
[OK] Key buffer hit rate: 96.9% (10B cached / 331M reads)
[OK] Query cache efficiency: 89.9% (73M cached / 81M selects)
[!!] Query cache prunes per day: 148657
[OK] Sorts requiring temporary tables: 0% (467 temp sorts / 560K sorts)
[!!] Joins performed without indexes: 11968
[OK] Temporary tables created on disk: 23% (334K on disk / 1M total)
[OK] Thread cache hit rate: 86% (71K created / 534K connections)
[!!] Table cache hit rate: 0% (80 open / 918K opened)
[OK] Open file limit used: 11% (117/1K)
[OK] Table locks acquired immediately: 96% (11M immediate / 11M locks)
[OK] InnoDB data size / buffer pool: 477.2M/500.0M

-------- Recommendations -----------------------------------------------------
General recommendations:
    Run OPTIMIZE TABLE to defragment tables for better performance
    Enable the slow query log to troubleshoot bad queries
    Reduce or eliminate persistent connections to reduce connection usage
    Adjust your join queries to always utilize indexes
    Increase table_cache gradually to avoid file descriptor limits
Variables to adjust:
    max_connections (> 100)
    wait_timeout (< 28800)
    interactive_timeout (< 28800)
    query_cache_size (> 96M)
    join_buffer_size (> 128.0K, or always use indexes with joins)
    table_cache (> 80)

    Already my.cnf value is

[mysqld]
innodb_buffer_pool_size = 500M
max_heap_table_size = 64M
query_cache_limit = 1M
query_cache_size = 96M
query_cache_type = 1
table_cache = 128
thread_cache_size = 4
tmp_table_size = 96M 
```

现在我可以在 my.cnf 中做什么，请帮助我 tks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:25:59.840

MySQL 吃更多 100% 因为它可以这样做。想想，你有超线程\多核\多处理器服务器（或某种组合）。

在双核 + 类型线程系统上，您有 4 个虚拟 CPU。每一个满载的 CPU 都会使监控程序中的“100% 负载”如此之**高**。因此，在该示例中，一些可以利用多个处理器（mysql 服务器这样做）的单个程序最多可以吃掉 400%。

更多的 100% 负载本身并不是一个错误。这只是某事（好或坏）的症状。什么是真正的问题，迫使您查看 CPU 负载？

">100% load" 可能是由高查询率或查询复杂性引起的。

有几种方法可以帮助服务器更快地执行查询

首先，让我们试试您的脚本建议的内容：

```
Variables to adjust:
    max_connections (> 100)
    wait_timeout (< 28800)
    interactive_timeout (< 28800)
    query_cache_size (> 96M)
    join_buffer_size (> 128.0K, or always use indexes with joins)
    table_cache (> 80) 
```

这可以解决查询和索引缓存子系统的一些问题。而且它还允许服务器消耗更多的内存并并行处理更多的查询并提高 CPU 负载。

还考虑做：

*   检查查询以优化表结构，重新排列查询。但我认为，你的指数相当不错。

*   降低查询率（开玩笑;-)）

# java - null 在这段代码中是如何工作的？

> ID：15969061
> 
> 赞同：3
> 
> 时间：2013-04-12T10:32:10.087
> 
> 标签：java

null 在这段代码中是如何工作的，为什么它不打印对象？

```
class Test1{
    public void doStuff(Object o){
    System.out.println("In Object");
}

    public void doStuff(String o){
        System.out.println("In String");
    }
}

public class TTest {
    public static void  main(String args[]){    
        Test1 t = new Test1();
        t.doStuff(null);
    }
} 
```

输出：

> 在字符串中

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T10:36:06.167

Java 总是会尝试使用最具体的方法版本。

自从打电话

```
t.doStuff(null); 
```

适用于这两种方法

```
t.doStuff(Object o)
t.doStuff(String o) 
```

Java会选择最具体的方法描述，即

```
t.doStuff(String o) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:37:18.563

作为`String`的子类`Object`，Java 将尝试使用适用的层次结构中最靠下的类。`null`在这里可以解释为两者之一，因此使用该`String`方法。

# c# - 无法将类型“System.Data.IDataReader”隐式转换为“System.Data.IDataAdapter”。存在显式转换（您是否缺少演员表？）

> ID：15969064
> 
> 赞同：-1
> 
> 时间：2013-04-12T10:32:13.743
> 
> 标签：c#

我的代码是..

```
 public IDataReader ExecuteDataReader(string commandText, IDbConnection con)
    {
        return ExecuteDataReader(commandText, con, CommandType.Text);
    }
    public IDataAdapter ExecuteDataReader(string commandText)
    {
        IDbConnection connection = _connectionManager.GetConnection();
        return ExecuteDataReader(commandText, connection);   **//error shows**
    } 
```

如何解决这个问题？帮我。

错误：

> *无法将类型“System.Data.IDataReader”隐式转换为“System.Data.IDataAdapter”。存在显式转换（您是否缺少演员表？）*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T10:33:37.277

那么最简单的方法就是改变方法的返回类型：

```
public IDataReader ExecuteDataReader(string commandText) 
```

如果你*真的*想返回一个`IDataAdapter`，你需要弄清楚如何`IDataAdapter`从一个`IDataReader`. 但它们确实是截然不同的界面——您似乎不太可能这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T10:35:36.960

您的方法返回 a `DataAdapter`，但是您的 return 语句返回 a `IDataReader`：

如果您希望返回 a ，请更改返回类型`IDataReader`：

```
public IDataReader ExecuteDataReader(string commandText)
{
    IDbConnection connection = _connectionManager.GetConnection();
    return ExecuteDataReader(commandText, connection);   **//error shows**
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:34:27.230

将第二种方法的返回类型更改为`IDataReader`

```
 public IDataReader ExecuteDataReader(string commandText)
{
    IDbConnection connection = _connectionManager.GetConnection();
    return ExecuteDataReader(commandText, connection);   **//error shows**
} 
```

# php - 多 CURL 请求中的随机 500 错误

> ID：15969068
> 
> 赞同：0
> 
> 时间：2013-04-12T10:32:27.393
> 
> 标签：php, jsonp, curl-multi

我正在尝试通过 curl_multi 从 Web 服务获取一些 hal+json 数据以填写 Bootstrap Typeahead。每次运行这段代码，我curl_multi里面的请求有的会是500，有的会返回我需要的数据。500 是完全随机的；下次我加载页面时，不同的查询将改为 500（而且我没有收到错误）。为什么这种情况不断发生？

```
<?php
$curlurl = 'https://service.domain.com/'.$_POST['customer-name'].'/contact?callback=?';
$cuurl = singleRequest($curlurl);
global $contacts_typeahead_data;
$contacts_typeahead_data = array();
$clinks = $cuurl['_links']['https://service.domain.com/rel/contacts'];
for ($i=0; $i < count($clinks); $i++) { 
         $data[] = 'https://service.domain.com'.$clinks[$i]['href'].'?callback=?';
};
print_r($data);
$datar = multiRequest($data);
print_r($datar);    
foreach($datar as $c){ 
        $cs = json_decode($c, true);?>

        <option value="<?php echo $cs['id']; ?>"><?php echo $cs['id'].' ('.$cs['info'][0]['name'].')'; ?></option>
        <?php $contacts_typeahead_data[] = $cs['id'].' ('.$cs['info'][0]['name'].')'; 
}?> 
```

这是基于[http://www.phpied.com/simultaneuos-http-requests-in-php-with-curl/](http://www.phpied.com/simultaneuos-http-requests-in-php-with-curl/)的 singleRequest 和 multiRequest 的代码：

```
function multiRequest($data, $options = array()) {

// array of curl handles
$curly = array();
// data to be returned
$result = array();

// multi handle
$mh = curl_multi_init();

// loop through $data and create curl handles
// then add them to the multi-handle
foreach ($data as $id => $d) {

      $curly[$id] = curl_init();

      $url = (is_array($d) && !empty($d['url'])) ? $d['url'] : $d;
      $username = base64_encode('username');
      $password2 = 'password';
      $auth_token = $username . $password2 . 'QQ==';
      curl_setopt($curly[$id], CURLOPT_URL,            $url);
      curl_setopt($curly[$id], CURLOPT_HEADER,         0);
      curl_setopt($curly[$id], CURLOPT_RETURNTRANSFER, 1);
      curl_setopt($curly[$id], CURLOPT_USERPWD, "$username:$password2");
      curl_setopt($curly[$id], CURLOPT_SSLVERSION,3);
      curl_setopt($curly[$id], CURLOPT_HTTPHEADER, array(   
                    'Accept: application/hal+json',
                    'Access-Control-Allow-Origin: *',                                                                       
                    'Content-Type: application/hal+json',
                    'Authorization: Basic ' . $auth_token
      ));
      curl_setopt($curly[$id], CURLOPT_HTTPAUTH, CURLAUTH_ANY);
      curl_setopt($curly[$id], CURLOPT_CONNECTTIMEOUT, 0);
      curl_setopt($curly[$id], CURLOPT_TIMEOUT, 30);
      curl_setopt($curly[$id], CURLOPT_PORT, 443);
      curl_setopt($curly[$id], CURLOPT_REFERER, $_SERVER['HTTP_REFERER']);
      curl_setopt($curly[$id], CURLOPT_USERAGENT, 'Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)');
      curl_setopt($curly[$id], CURLOPT_SSL_VERIFYPEER, false);
      curl_setopt($curly[$id], CURLOPT_SSL_VERIFYHOST, false);
      curl_setopt($curly[$id], CURLOPT_COOKIE, 'cert_url=https://service.domain.com/cert/yagowyefayygwflagliwygelifyaigwepifgpai');

      // post?
      if (is_array($d)) {
            if (!empty($d['post'])) {
                   curl_setopt($curly[$id], CURLOPT_POST,       1);
                   curl_setopt($curly[$id], CURLOPT_POSTFIELDS, $d['post']);
            }
      }

      // extra options?
      if (!empty($options)) {
           curl_setopt_array($curly[$id], $options);
      }

   curl_multi_add_handle($mh, $curly[$id]);
 }

 // execute the handles
 $running = null;
 do {
      curl_multi_exec($mh, $running);
 } while($running > 0);

 // get content and remove handles
 foreach($curly as $id => $c) {
        // cURL error number
        $curl_errno = curl_errno($c);

        // cURL error message
        $curl_error = curl_error($c);

        // output if there was an error
        if ($curl_error) {
            echo "    *** cURL error: (".$curl_errno.") ".$curl_error;
        } else {
              $result[$id] = curl_multi_getcontent($c);  
        }

        curl_multi_remove_handle($mh, $c);
}

 // all done
 curl_multi_close($mh);

 return $result;
}

function singleRequest($curlurl){
    $username = base64_encode('username');
    $password2 = 'password';
    $auth_token = $username . $password2 . 'QQ==';
    curl_setopt($ch, CURLOPT_URL,            $url);
    curl_setopt($ch, CURLOPT_HEADER,         0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_USERPWD, "$username:$password2");
    curl_setopt($ch, CURLOPT_SSLVERSION,3);
    curl_setopt($ch, CURLOPT_HEADER, false);     
    curl_setopt($ch, CURLOPT_HTTPHEADER, array(   
            'Accept: application/hal+json',
            'Access-Control-Allow-Origin: *',                                                                       
            'Content-Type: application/hal+json',  
            'Authorization: Basic ' . $auth_token                                                  
    ));  
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);  
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY); 
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);     
    curl_setopt($ch, CURLOPT_COOKIE, 'cert_url=https://service.domain.com/cert/yagowyefayygwflagliwygelifyaigwepifgpai');
            $result = curl_exec($ch);  
            if($result === false){
                  echo 'Curl error: ' . curl_error($ch). '<br><br>';
                  print_r(error_get_last());
            }
    $response = json_decode($result, true); 
    curl_close($ch);

    return $response;
} 
```

**编辑**添加错误检查

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:33:35.827

> 为什么这种情况不断发生？

您向其发送请求的服务器会执行此操作。只是请求*可能*会失败。

处理它并设计失败。

# python - 部署到生产服务器时的金字塔默认页面

> ID：15969069
> 
> 赞同：0
> 
> 时间：2013-04-12T10:32:27.657
> 
> 标签：python, python-3.x, pyramid

我已成功部署到生产站点，在 Apache + mod_wsgi、python3.3 + pyramid 1.4 上运行。现在，它正在显示金字塔默认页面。

我在搞乱 myapp 文件夹，即使我删除了`__init__.py`，重新启动 apache，它仍然显示默认的金字塔页面。为什么会这样？

* * *

由于某种我不明白的原因，当使用 install over develop 时，会创建另一个文件夹（ build ），我尝试在 build 中编辑 template.pt 文件以及模板文件夹中的文件，重新启动 apache，它仍然显示设置新项目时附带的默认金字塔页面。

我不知道这是否是正确的做法，但它对我有用。[而不是使用http://docs.pylonsproject.org/projects/pyramid/en/latest/tutorials/modwsgi/index.html](http://docs.pylonsproject.org/projects/pyramid/en/latest/tutorials/modwsgi/index.html)中详述的安装，步骤 6：

```
 $ ../bin/python setup.py install 
```

我使用了develop，在模板文件夹中编辑了template.pt，重新启动apache，站点正在反映更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:14:39.447

`install`捆绑您的应用程序，除非您有适当的清单，否则不会包含静态文件。`develop`通常是一种更好的部署方式，除非您试图将您的应用程序作为一个开放项目进行再分发。

# android - Android 壁纸管理器不创建对象 (NPE)

> ID：15969072
> 
> 赞同：0
> 
> 时间：2013-04-12T10:32:34.300
> 
> 标签：android, nullpointerexception, wallpaper, bitmapfactory

我正在尝试使用壁纸选项创建一个简单的画廊应用程序，但每次我在 a: myWallpaperManager.setBitmap(mBitmap) 行中得到一个空指针异常。这是我的代码：

```
package com.pbsoft.galeria;
import java.io.IOException;
import android.app.Activity;
import android.os.Bundle;
import android.widget.Button;
import android.widget.ImageView;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.app.WallpaperManager;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;

public class MainActivity extends Activity {

Button button;
Button button2;
ImageView image;
MenuItem item;
int checkImg;
Bitmap mBitmap;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    checkImg=0;
    addListenerOnButton();
}

public void addListenerOnButton() {
    image = (ImageView) findViewById(R.id.imageView1);
    button = (Button) findViewById(R.id.btnChangeImage);
    button2= (Button) findViewById(R.id.btnPrevious);

    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            if(checkImg<3)
                ++checkImg;
            else
                checkImg=0;

            setImg();   
        }
    });

    button2.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            if(checkImg>0)
                --checkImg;
            else
                checkImg=3;

            setImg();
        }
    });
}

protected void setImg() {
    switch(checkImg){
    case 0: image.setImageResource(R.drawable.wilku); break;
    case 1: image.setImageResource(R.drawable.kotek); break;
    case 2: image.setImageResource(R.drawable.piesek); break;
    case 3: image.setImageResource(R.drawable.chomik); break;
    }       
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    item = (MenuItem) findViewById(R.id.action_settings);       
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item){
    mBitmap = BitmapFactory.decodeResource(getResources(),image.getId());

    switch (item.getItemId()) {
    case R.id.action_settings:
        WallpaperManager myWallpaperManager = WallpaperManager.getInstance(getApplicationContext());//<-this I think could be not created
        try{
            myWallpaperManager.setBitmap(mBitmap); // <- 91 line, here I get an exception
            finish();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }   
} 
```

}

对我来说，它看起来像是 myWallpaperManager 对象的问题——它没有被初始化，但为什么呢？我还在清单中添加了一个权限：“uses-permission android:name="android.permission.SET_WALLPAPER" /”但它仍然不起作用。我对android很陌生，这可能是菜鸟问题，但请帮忙-感谢您的每一个回答！

这也是我的日志：

```
04-12 12:20:31.180: E/AndroidRuntime(3012): FATAL EXCEPTION: main
04-12 12:20:31.180: E/AndroidRuntime(3012): java.lang.NullPointerException
04-12 12:20:31.180: E/AndroidRuntime(3012):     at android.app.WallpaperManager.setBitmap(WallpaperManager.java:494)
04-12 12:20:31.180: E/AndroidRuntime(3012):     at com.pbsoft.galeria.MainActivity.onOptionsItemSelected(MainActivity.java:91)
04-12 12:20:31.180: E/AndroidRuntime(3012):     at android.app.Activity.onMenuItemSelected(Activity.java:2205)
04-12 12:20:31.180: E/AndroidRuntime(3012):     at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:777)
04-12 12:20:31.180: E/AndroidRuntime(3012):     at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:143)
04-12 12:20:31.180: E/AndroidRuntime(3012):     at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:855)
04-12 12:20:31.180: E/AndroidRuntime(3012):     at com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:532)
04-12 12:20:31.180: E/AndroidRuntime(3012):     at com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:122)
04-12 12:20:31.180: E/AndroidRuntime(3012):     at android.view.View$PerformClick.run(View.java:9112)
04-12 12:20:31.180: E/AndroidRuntime(3012):     at android.os.Handler.handleCallback(Handler.java:587)
04-12 12:20:31.180: E/AndroidRuntime(3012):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-12 12:20:31.180: E/AndroidRuntime(3012):     at android.os.Looper.loop(Looper.java:130)
04-12 12:20:31.180: E/AndroidRuntime(3012):     at android.app.ActivityThread.main(ActivityThread.java:3835)
04-12 12:20:31.180: E/AndroidRuntime(3012):     at java.lang.reflect.Method.invokeNative(Native Method)
04-12 12:20:31.180: E/AndroidRuntime(3012):     at java.lang.reflect.Method.invoke(Method.java:507)
04-12 12:20:31.180: E/AndroidRuntime(3012):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
04-12 12:20:31.180: E/AndroidRuntime(3012):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
04-12 12:20:31.180: E/AndroidRuntime(3012):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:45:26.410

```
mBitmap = BitmapFactory.decodeResource(getResources(),image.getId()); 
```

这里位图为空，这就是它抛出`null`指针异常的原因。尝试给出一个有效的`reasource_id`. `image.getId()`而不是这个给`R.drawable.your_resource_id`。

# linux - 如何使用linux命令检索命令处理输出的第一行第一列单元格值

> ID：15969075
> 
> 赞同：2
> 
> 时间：2013-04-12T10:32:39.620
> 
> 标签：linux, command

我想得到下面代码的过程输出中的值**385**，我想通过命令本身来做到这一点，有没有办法做到这一点。

我对Linux命令没有足够的知识，请帮助我实现这一点。

```
#ps -u root|grep java|awk '{print $1}' 
```

385

2018

2048

4242

21290

25110

25589

26166

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:34:46.043

您可以将输出放在 shell 变量中，例如

```
var=$(ps -u root|grep java|awk '{print $1}'|head -1) 
```

您可能会很高兴了解有关[pgrep](http://linux.about.com/library/cmd/blcmdl1_pgrep.htm)的更多信息。

正如[GoT 回答](https://stackoverflow.com/a/15969194/841108)的那样，该`head -1`命令为您提供了第一行，然后您将其放入`$var`

我建议阅读[高级 bash 脚本指南](http://tldp.org/LDP/abs/html/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:37:54.560

你可以加`head -1`

```
#ps -u root | grep java | head -1 
```

# android - 在android中使用推送通知

> ID：15969076
> 
> 赞同：-9
> 
> 时间：2013-04-12T10:32:44.383
> 
> 标签：android, push-notification, android-notifications

我们可以在android中使用推送通知吗？

我听说过[Comet Framework](http://cometd.org/) for Ajax Push 技术

如果是，那么如何。？

如果否，那么当服务器的某些数据发生变化时如何发出通知。

任何教程..？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:41:16.817

我猜 Stack Overflow 已经有了这个答案。
看看这里： [Android 是否支持近乎实时的推送通知？](https://stackoverflow.com/questions/1243066/does-android-support-near-real-time-push-notification?rq=1)
在这里：[在android中发送推送通知](https://stackoverflow.com/questions/10751327/send-push-notification-in-android?rq=1)

# kendo-ui - 剑道图基本装订

> ID：15969077
> 
> 赞同：0
> 
> 时间：2013-04-12T10:32:52.477
> 
> 标签：kendo-ui, kendo-asp.net-mvc

我是 Kendo Chart 的新手，我想在我的 MVC 项目中实现它。我正在使用剑道版本`2012.3.1315.340`。

**控制器：**

```
public ActionResult KendoChart()
{
   return View();
}

public ActionResult GetTaskAllz()
{
  dbipathEntities1 objContext = new dbipathEntities1();
  List<mdlChart> objLst = new List<mdlChart>();
  List<tblPurchaseOrder> objLst1 = new List<tblPurchaseOrder>();
  var objMdl1 = (from c in objContext.tblPurchaseOrders select c).Take(100).OrderBy(x => x.POID).ToList();
  objLst1 = objMdl1.ToList<tblPurchaseOrder>();
  for (int i = 0; i < objLst1.Count; i++)
  {
    objLst.Add(new mdlChart { JobNo = objLst1[i].JobID, SupplierID = objLst1[i].SupplierID });
   }
   return Json(objLst1, JsonRequestBehavior.AllowGet);
} 
```

**模型：**

```
public class mdlChart
{
    public Nullable<int> JobNo { get; set; }
    public Nullable<int> SupplierID { get; set; }
} 
```

**CSHTML：**

```
<link rel="stylesheet" href="@Url.Content("~/Kendo/kendo.common.min.css")" />

<link rel="stylesheet" href="@Url.Content("~/Kendo/kendo.rtl.min.css")" />
<link rel="stylesheet" href="@Url.Content("~/Kendo/kendo.default.min.css")" />
<link rel="stylesheet" href="@Url.Content("~/Kendo/examples-offline.css")" />
 <script src="../../Kendo/Jquery-1.8.3.min.js" type="text/javascript"></script>
<script src="@Url.Content("~/Kendo/kendo.web.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Kendo/kendo.aspnetmvc.min.js")" type="text/javascript">   </script>
<script src="@Url.Content("~/Kendo/console.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Kendo/prettify.min.js")" type="text/javascript"></script>
<script src="../../Kendo/kendo.culture.en-GB.min.js" type="text/javascript"></script>
<script type="text/javascript">
//set current to the "en-GB" culture script
kendo.culture("en-GB");
</script>
@using Kendo.Mvc.UI
@(Html.Kendo().Chart<MVCProject.Models.mdlChart>()
.Name("chart")
.Title("Pop In Accounts")
.Legend(legend => legend
.Position(ChartLegendPosition.Top)
)
.DataSource(ds => ds.Read(read => read.Action("GetTaskAllz", "Kendo")))
.Series(series =>
{
    series.Column(model => model.JobNo).Name("Val2");
})
.CategoryAxis(axis => axis
    .Categories(model => model.SupplierID)
    .Labels(labels => labels.Rotation(-90))
 )
 ) 
```

但有了这个我没有得到`Chart`。它给出了一个 Javascript 错误：

```
Microsoft JScript runtime error: Object doesn't support this property or method 
```

Javascript自动生成的代码出现上述错误：

```
 jQuery(
function () {
    debugger;
    jQuery("#chart").kendoChart(
        { "title": { "text": "Pop In Accounts" },
        "legend": { "position": "top" },
       "series": [{ "name": "Val2", "type": "column", "field": "JobNo"}],
      "categoryAxis": [{ "labels": { "rotation": -90 }, "field": "SupplierID"}],
      "dataSource": { "transport": { "prefix": "", "read": { "url": "/Kendo/GetTaskAllz", "type": "POST"} },
        "type": "aspnetmvc-ajax",
        "schema":
       { "model":
       { "fields":
        { "JobNo":
         { "type": "number", "defaultValue": null },
        "SupplierID": { "type": "number", "defaultValue": null }
        }
      }
    }
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:55:48.957

你应该包括“kendo.all.min.js”。“kendo.web.min.js”不包括 Kendo UI DataViz 小部件。更多信息可以在[文档](http://docs.kendoui.com/getting-started/javascript-dependencies)中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:20:23.157

解决了 ！！只需用以下脚本替换所有上述脚本。

```
 <script src="../../Kendo/Jquery-1.8.3.min.js" type="text/javascript"></script>
     <link href="../../Kendo/kendo.dataviz.min.css" rel="stylesheet" type="text/css" />
     <script src="../../Kendo/kendo.dataviz.min.js" type="text/javascript"></script> 
```

# ios - 核心数据不一致 - fetch 有时什么也不返回

> ID：15969079
> 
> 赞同：6
> 
> 时间：2013-04-12T10:33:01.670
> 
> 标签：ios, objective-c, core-data, activerecord, restkit

我已经在那个上面花了几个小时，但我似乎找不到解决方案。首先，我有什么规格：

*   带有 Core Data 的 Objective-C iOS 6 应用程序
*   Core Data 是从 UIManagedDocument 初始化的，它开启了自动保存
*   UIManagedDocument 中的 ManagedContext 存储在静态变量中，并在整个应用程序中重用
*   该应用程序使用 RestKit，我使用它提供的 ActiveRecord 类别。

我有一个带有团队实体的模型。在应用程序中，有一个团队列表视图控制器，它从后端加载团队。后端返回 JSON 数组，其中包含团队 ID。我将此 ID 存储在模型的“id”字段中，并在迭代服务器响应时，查找给定 ID 的团队是否已经存在。如果是，我只更新它的信息并传递对象，如果不是 - 我先创建它。

这就是它变得奇怪的地方。这在 90% 的时间内都有效。我可以加载团队列表控制器，在应用程序中走得更远，回到控制器（再次加载数据），大多数时候一切都很好。但是，偶尔，我的 fetch 请求不会返回任何内容。如：

```
NSArray *results = [context executeFetchRequest:request error:&error]; 
```

将返回空数组，错误也是空的。服务器上的任何东西都不会改变。当我尝试调试它时，请求如下所示：

```
<NSFetchRequest: 0x127a0e20> (entity: Team; predicate: (id == "123"); sortDescriptors: ((null)); limit: 1; type: NSManagedObjectResultType; ) 
```

当我在外部应用程序中预览 sqlite 商店时，我可以看到该 ID 的 Team 项目存在，并且在其他 90% 的时间里它确实被加载了。更奇怪的是，当我打开 SQLDebug 时，我可以看到：

```
2013-04-12 12:00:27.934 SportLink[10831:c07] CoreData: annotation: fetch using
NSSQLiteStatement <0x12656d10> on entity 'Team' with sql text 'SELECT 0, t0.Z_PK,
t0.Z_OPT, t0.ZACI1, t0.ZACI2, t0.ZACI3, t0.ZALTFIRSTNAME, t0.ZALTSECONDNAME, t0.ZCOLOR1,
t0.ZCOLOR2, t0.ZGENDER, t0.ZICON, t0.ZID, t0.ZLOCATION, t0.ZLOGO1, t0.ZLOGO2, t0.ZNAME,
t0.ZTYPE, t0.ZSPORT FROM ZTEAM t0 WHERE  t0.ZID = ?  LIMIT 133' returned 6 rows 
```

这意味着后备存储实际上获取了数据，但由于某种原因没有传递它。现在：

*   我在主线程中做所有事情，所以这不是问题
*   我相信自动保存也不是问题，因为即使我关闭应用程序并在已经存在数据的情况下再次打开它时也会发生这种情况。

关于这里到底发生了什么的任何想法？

编辑：我已经使用 Instruments 分析了该应用程序。我刚刚进入有问题的 VC，然后进入它的子控制器并离开，重复了几次，直到问题开始显现。这是结果。也许从这里知道发生了什么会更容易：

![仪器输出](https://i.stack.imgur.com/l3ie2.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T11:14:59.270

经过几天的调查，我终于找到了这个bug的原因。获取 Team 实体的代码如下所示：

```
Team *team = [Team findFirstByAttribute:WSK_ID withValue:data[WSK_ID] inContext:moc]; 
```

`WSK_ID`只是一个定义`@"id"`。`data`是我从 RestKit 获得的字典，来自 JSON 响应。因为它没有被强制转换为任何类型，所以它可能是一个 NSString，而`id`Team 实体的属性是 NSNumber。虽然我不知道它有时会失败，但将此位更改为：

```
Team *team = [Team findFirstByAttribute:WSK_ID withValue:@([data[WSK_ID] intValue]) inContext:moc]; 
```

即将 ID 字符串转换为 int，然后用 NSNumber 装箱解决了这个问题。

# php - PHP日期时间格式和字符串

> ID：15969080
> 
> 赞同：0
> 
> 时间：2013-04-12T10:33:05.520
> 
> 标签：php, javascript, date, datetime, strtotime

我正在为在线考试构建一个 Joomla 组件，并且正在为格式转换而苦苦挣扎。基本上我想得到日期之间的差异（以秒为单位），然后将它们转换为分钟，但无论我尝试什么以及我在网上搜索什么（包括 SO），我似乎都无法让事情正常工作。

我有以下代码：

```
<?php
$session =& JFactory::getSession();
$sessionStuff = $session->get('quizSession');

$time_config =& JFactory::getConfig();
$time_jnow =& JFactory::getDate();
$time_jnow->setOffset( $time_config->getValue('config.offset' ));
$time_now = strtotime($time_jnow);
$started_time = strtotime($sessionStuff['lineSession']['started_on']);

$elapsedtime = /*gmdate("H:i:s",*/ abs($started_time - $time_now)/*)*/;
echo "Start_time: " . $started_time . '- Type: ' . gettype($started_time). '<br/>';
echo "Now: " . $time_now . '- Type: ' . gettype($time_now). '<br/>';
echo "Elapsed time: " . $elapsedtime . /*'- Type: ' . gettype($elapsedtime) .*/ '<br/>';

$availabletime = $started_time - $elapsedtime;

if(empty($sessionStuff)){
    $availabletime = ($this->quiz->time_limit) ? $this->quiz->time_limit : 0;
} else {
    $availabletime = $started_time - $elapsedtime;
}

echo "Available: " . $availabletime . '- Type: ' . gettype($availabletime);
?> 
```

输出以下内容：

> 开始时间：1365756958-类型：整数
> 
> 现在：1365757510- 类型：整数
> 
> 经过时间：552
> 
> 可用：1365756406- 类型：整数

然后我有这个 JS 代码，它接收一个值（以分钟为单位）并将其转换为正确的格式：

```
 var hours ;
    var minutes ; 
    var seconds ;
    var t ;
    var availableTime ;
    var remainingTime ;

window.onload = function () {

    listener();

    availableTime = <?php
                        echo ($this->quiz->time_limit) ? $this->quiz->time_limit : 0;;                       
                    ?> ;
    if (availableTime)
    {
        hours = Math.floor(availableTime / 60) ;
        minutes = availableTime % 60;

        if (hours < 10) {
            hours = '0' + hours ;
        }

        if (minutes < 10) {
            minutes = '0' + minutes ;
        }

        seconds = '00' ;

        var timer = document.getElementById('timer') ;
        timer.innerHTML = '<?php echo JText::_('TIME_REMAINING') ; ?> ' + hours + ":" + minutes + ":" + seconds ;

        remainingTime = availableTime *= 60 ;

        updateTimer();
    }
}

function pad(number, length) 
{
    var str = '' + number;
    if (str.length < length) {
        str = '0' + str;
    }

    return str;
}

function updateTimer()
{
    seconds -= 1 ;
    seconds = pad(seconds, 2) ;

    if (seconds < 0)
    {
        seconds = '59' ;
        minutes -= 1 ;
        minutes = pad(minutes, 2) ;

        if (minutes < 0)
        {
            minutes = '59' ;
            hours -= 1 ;
            hours = pad(hours, 2) ;

            if (hours < 0)
            {
                hours = minutes = seconds = '00' ;
                document.getElementById('timeUp').value = 1 ;
                document.jquarks_quiz.submit();
                return true ;
            }
        }
    }

    var timer = document.getElementById('timer') ;
    timer.innerHTML = '<?php echo JText::_('TIME_REMAINING') ; ?> ' + hours + ':' + minutes + ':' + seconds ;

    remainingTime -= 1 ;
    if (Math.floor(availableTime / 10) == remainingTime ) 
    {
        timer.style.color="white" ;
        timer.style.backgroundColor = "#DD0000" ;
    }

    t = setTimeout("updateTimer()", 1000);
} 
```

如果我对这段代码使用“本机”格式（在 PHP 中）：

```
$time_now = $time_jnow;
$started_time = $sessionStuff['lineSession']['started_on']; 
```

我得到输出：

> 开始时间：2013-04-12 09:55:58- 类型：字符串
> 
> 现在：2013-04-12 10:23:20- 类型：对象

现在，我打算计算'started_time'和'time_now'之间的时间差，并且（如果它是页面刷新并且设置了会话）将'elapsedtime'减去'started_time'，以便超时计数器将从它停止的地方。

无论我尝试什么，我似乎都无法让事情正常工作。谁能指出我正确的方向？我已经为此浪费了太多时间，而 PHP 不是我的*强项*。我怎样才能达到预期的目标？

### 编辑：

我意识到 JS 'availableTime' 的时间是固定的，但这只是为了现在的调试目的。一旦一切正常，它将被提供 PHP '$availabletime' 输出。

### 编辑2：

我似乎没有明确目标是什么。考试开始后，假设有 15 分钟可用。假设用户在 1 分 31 秒 (00:01:31) 后刷新页面，可用时间应该是 13 分 29 秒 (00:13:29)。这是我无法实现的行为，尽管我*可以*计算已经过去了多少时间（以秒为单位）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:47:36.327

这是一个非常简单的方法。

```
 // Define your time strings
 $date1 = new DateTime("2013-01-01 07:00:00");
 $date2 = new DateTime("2014-01-01 03:17:00");

 // Perform a bit of black hoodoo magic
 $interval = $date1->diff($date2,true);

 // Output the result in a formatted fashion
 echo $interval->format("%d days %h hours %i minutes %s seconds");
 // Or as a number of seconds. This is a bit more complicated.
 echo (($interval->y * 365 * 24 * 60 * 60) + 
           ($interval->m * 30 * 24 * 60 * 60) + 
           ($interval->d * 24 * 60 * 60) + 
           ($interval->h * 60 * 60) + 
           ($interval->i * 60) + 
           $interval->s); 
 // For more info, check this out along with the doc:
 var_dump($interval); 
```

这使您可以抽象出所有正在执行的计算，以便专注于逻辑。出了什么问题？

# javascript - node.js async.series 是它应该如何工作的？

> ID：15969082
> 
> 赞同：32
> 
> 时间：2013-04-12T10:33:10.037
> 
> 标签：javascript, node.js, asynchronous

```
var async = require('async');

function callbackhandler(err, results) {
    console.log('It came back with this ' + results);
}   

function takes5Seconds(callback) {
    console.log('Starting 5 second task');
    setTimeout( function() { 
        console.log('Just finshed 5 seconds');
        callback(null, 'five');
    }, 5000);
}   

function takes2Seconds(callback) {
    console.log('Starting 2 second task');
    setTimeout( function() { 
        console.log('Just finshed 2 seconds');
        callback(null, 'two');
    }, 2000); 
}   

async.series([takes2Seconds(callbackhandler), 
              takes5Seconds(callbackhandler)], function(err, results){
    console.log('Result of the whole run is ' + results);
}) 
```

输出如下所示：

```
Starting 2 second task
Starting 5 second task
Just finshed 2 seconds
It came back with this two
Just finshed 5 seconds
It came back with this five 
```

我期待takes2Second 函数在takes5Second 开始之前完全完成。这就是它应该如何工作的方式。请告诉我。最后的功能永远不会运行。谢谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-12T10:41:28.793

不完全的。您正在立即执行函数（一旦评估了数组），这就是它们似乎同时启动的原因。

传递给每个要执行的函数的回调在异步库内部。一旦你的函数完成，你就执行它，传递一个错误和/或一个值。您不需要自己定义该功能。

在您的情况下，最终函数永远不会运行，因为 async 需要您调用以继续执行系列中的下一个函数的回调函数实际上从未被执行（只有您的`callbackHandler`函数被执行）。

试试这个：

```
async.series([
    takes2Seconds,
    takes5seconds
], function (err, results) {
    // Here, results is an array of the value from each function
    console.log(results); // outputs: ['two', 'five']
}); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-13T14:29:11.703

James 给了你一个很好的概述`async.series`。请注意，您可以在系列数组中设置匿名函数，然后使用参数调用您的实际函数

```
var async = require('async')
var param1 = 'foobar'
function withParams(param1, callback) {
  console.log('withParams function called')
  console.log(param1)
  callback()
}
function withoutParams(callback) {
  console.log('withoutParams function called')
  callback()
}
async.series([
  function(callback) {
    withParams(param1, callback)
  },
  withoutParams
], function(err) {
  console.log('all functions complete')
}) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-07-24T17:56:06.077

我创建异步系列的首选方法是使用操作数组，如下所示；

```
var async = require('async'),
    operations = [];

operations.push(takes2Seconds);
operations.push(takes5seconds);

async.series(operations, function (err, results) {
    // results[1]
    // results[2]
});

function takes2Seconds(callback) {
    callback(null, results);
}

function takes5seconds(callback) {
    callback(null, results);
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-05-20T19:21:00.937

```
async.series
    ([  
        function (callback)
        {
            response=wsCall.post(user,url,method,response);
            console.log("one");
            callback();
        }
        ,
        function (callback)
        {
            console.log("two");
            //console.log(response);
            callback();
        }
    ]
    ,
    function(err) 
    {
        console.log('Both a and b are saved now');
        console.log(response);
    }); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-04-20T09:11:18.490

在`async.series`中，所有函数都被串行执行，每个函数的合并输出被传递给最终的回调。例如

```
var async = require('async');
async.series([
    function (callback) {
        console.log('First Execute..');
        callback(null, 'userPersonalData');
    },
    function (callback) {
        console.log('Second Execute.. ');
        callback(null, 'userDependentData');
    }
],
function (err, result) {
    console.log(result);
}); 
```

输出：

```
First Execute..
Second Execute..
['userPersonalData','userDependentData'] //result 
```

# c# - C# 检查文本框是否 == 文本框

> ID：15969083
> 
> 赞同：1
> 
> 时间：2013-04-12T10:33:13.727
> 
> 标签：c#, version, auto-update

为什么这不起作用：

```
 if (This_Ver.Text == New_Ver.Text)
            {
                MAIN_PANEL.Visible = true;
            }
            else if (This_Ver.Text != New_Ver.Text)
            {
            DialogResult dialogResult = MessageBox.Show("An update has been found!" + Environment.NewLine + "Would you like to download and install it?", "Update found!", MessageBoxButtons.YesNo, MessageBoxIcon.Information);
            if (dialogResult == DialogResult.Yes)
            {
                MAIN_PANEL.Visible = false;
                UPDATE_PANEL.Visible = true;
                USERNAME_TEXT.Enabled = false;
                PASSWORD_TEXT.Enabled = false;
                LOGIN_BUTTON.Enabled = false;
                MAIN_PANEL.Visible = false;
                UPDATE_NOW_BUTTON.Enabled = true;
            }
            else if (dialogResult == DialogResult.No)
            {
                UPDATE_NOW_BUTTON.Enabled = true;
                MAIN_PANEL.Visible = true;
            }
        } 
```

我正在尝试比较新版本和当前运行的版本。当文本框不包含相同版本时，它应该打开更新程序面板。

但它不起作用。它总是打开更新程序面板。

编辑 ：

值：This_Ver.Text：V1.1.13.1

值：New_Ver.Text：V1.1.13.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:52:43.890

试试下面可能对你有帮助..

*更改您的代码*

**从 ：**

```
if (This_Ver.Text == New_Ver.Text) 
```

**至 ：**

```
if (This_Ver.Text.ToUpper().Trim().Equals(This_Ver.Text.ToUpper().Trim())) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:40:06.887

尝试这样的事情

```
string value1 = This_Ver.Text.Trim();
string value2 = New_Ver.Text.Trim();
if(value1  == value2 )
 {
   //hide your panel
 }
 else
 {
    // code something
 } 
```

如果值匹配，则隐藏，否则将转到`else`您执行一些逻辑代码的部分。

Aslo 想知道你在调试时得到`value1,value2`了**什么**值`IF Condition`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:40:03.387

您必须使用 (This_Ver.Text.Equals(New_Ver.Text)) 因为 == 比较器不起作用。与 Java 中一样，== 比较器进行对象引用比较。相反，Equals 方法比较字符串内容。

祝你好运。

# css - MVC 4 ActionLink 与背景图像的替代文本

> ID：15969091
> 
> 赞同：1
> 
> 时间：2013-04-12T10:33:51.960
> 
> 标签：css, asp.net-mvc-4

在我看来，我有这个链接：

```
@Html.ActionLink(" ", null, null, new { @class = "Edit" }) 
```

我的编辑 css 类：

```
.Edit
{
    background: url("../Images/Edit.png") no-repeat;
    display: inline-block;
    height: 24px;
    width: 24px;
    vertical-align: middle;
    } 
```

工作正常，但我想在用户将链接悬停为替代文本时显示“编辑”。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T10:36:15.033

尝试`title`为您的链接添加属性：

```
@Html.ActionLink(" ", null, null, new { @class = "Edit", title="Edit" }) 
```

# excel - 如何检查是否选择了选项按钮组中的至少一个选项按钮

> ID：15969094
> 
> 赞同：1
> 
> 时间：2013-04-12T10:34:07.150
> 
> 标签：excel, vba

我在用户窗体上有选项按钮组，需要验证每个组中至少有一个选项按钮已被单击。有没有办法在不单独检查每个按钮的值的情况下做到这一点？可以整体引用选项按钮组吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:04:52.660

另一种方法是在加载时为每个组设置一个默认值。这样就没有循环，没有额外的公共变量，也没有理由验证组中的选项按钮是否已被勾选。

编辑显示示例（我也承认这也是一个笨拙的黑客）：

如果您不反对使用一系列单元格来保存值，则可以使用选项按钮的“ContolSource”属性并将其设置为单元格。就像是：

```
Private Sub UserForm_Initialize()
    Sheet1.Range("A:B").Delete
' Group 1
    OptionButton1.ControlSource = "Sheet1!A1"
    OptionButton2.ControlSource = "Sheet1!A2"
' Group 2
    OptionButton3.ControlSource = "Sheet1!B1"
    OptionButton4.ControlSource = "Sheet1!B2"
End Sub 
```

现在您可以计算每列中具有值的单元格的数量。如果一列至少有 1 个值，那么您知道该组的选项按钮已被勾选

# ruby-on-rails - 输出字符串时防止 HTML 字符编码

> ID：15969096
> 
> 赞同：1
> 
> 时间：2013-04-12T10:34:10.737
> 
> 标签：ruby-on-rails, string, concatenation

我正在尝试在我的 ruby​​ on rails 中输出一个字符串`View`：

```
<% @myquiz.map do |x| %>

    <%= "<div>#{x.quiz_ID}</div>" %>

<% end %> 
```

出于某种奇怪的原因，它以 HTML 安全格式输出：

```
&lt;div&gt;14&lt;/div&gt;

&lt;div&gt;16&lt;/div&gt; 
```

如何防止这种行为，使其输出为 HTML？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:37:38.777

```
<%= "<div>#{x.quiz_ID}</div>".html_safe %> 
```

将为您提供所需的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:05:57.477

```
<%= raw "<div>#{x.quiz_ID}</div>" %> 
```

# c# - 调用 PInvoke 函数 xxx 使堆栈不平衡

> ID：15969097
> 
> 赞同：0
> 
> 时间：2013-04-12T10:34:11.087
> 
> 标签：c#, c, marshalling, output-parameter

我在控制台应用程序中的 C# 代码（.net 4.0）中使用 C DLL 并面临问题。当我调用 C 方法时，它会引发以下异常。

```
"A call to PInvoke function 'ProcessFilesC' has unbalanced the stack. This is likely because the managed PInvoke signature does not match the unmanaged target signature. Check that the calling convention and parameters of the PInvoke signature match the target unmanaged signature." 
```

这是C代码

```
 int ProcessFilesC(
        char **p_FilesOrDirs,
        ImageInfoC **p_vecImageInfo,
        int ***p_vecStackIndexes,
        RectC ***p_vecFaces
    ); 
```

这是我的 C# 代码

```
 [DllImport(@"..\ref\myCApp.dll", CallingConvention = CallingConvention.StdCall)]
    unsafe private static extern UInt16 ProcessFilesC(
               String[] p_FilesOrDirs,
               ref ImageInfoC[] p_vecImageInfo,
               out Int32[] p_vecStackIndexes,
               out RectC[] p_vecFaces
            );

    public unsafe struct ImageInfoC
    {            
        public String resizedFilePath;      //char*   (in C)
        public Byte isUsable;               //unsigned char (in C)
        public UInt32 imageId;              //long int in (in C)
        public UInt16 stackIndex;           //int (in C)
        public Boolean isBestPhoto;         //unsigned char  (in C)
    } 
```

下面是调用该方法的 C# 代码

```
 unsafe
        {
             iResult = ProcessFilesC(
                              p_FilesOrDirs,          // Value getting passed to DLL
                              ref p_vecImageInfo,
                              out p_vecStackIndexes,
                              out p_vecFaces
                        );
             Console.WriteLine("ProcessFilesC Complete");
        } 
```

当代码到达这里时，我可以看到该方法在控制台中打印时正在处理，但在处理之后，它会引发上述异常。

我猜这是由于 C DLL 试图在输出/引用参数中写入值。我不知道问题出在哪里或我的代码有什么问题。

请注意，我已经在工具 -> 选项 -> 调试 -> 常规中取消选中选项“在模块加载时抑制 JIT 优化”

请尽快提供帮助。

感谢您花费宝贵的时间阅读这篇文章。

谢谢，基兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:36:15.067

首先要检查的是调用约定。在大多数情况下，您的`DllImport`属性中指定的调用约定与本机 DLL 中的实际调用约定不同。

# java - 是否可以更改 JUNIT 中的测试方法的数量？

> ID：15969099
> 
> 赞同：-1
> 
> 时间：2013-04-12T10:34:20.837
> 
> 标签：java, html, junit

我有一个带有许多测试用例的测试套件。现在每个测试用例都包含可变数量的较小测试。但是，这些较小的测试的数量有所不同。如果每个较小的测试在测试用例下工作，我需要 JUnit GUI 来呈现。这可能吗？使用不同的@Test 方法可以得到我想要的结构，但我不能动态更改测试用例所需的这些@Test 方法的数量。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:44:53.283

你看过 JUnit 参数化测试吗？

现在使用 @Parameters 注释，您可以遍历数据并更改每个测试的名称，如下所示：

```
@RunWith(value = Parameterized.class)
public class JunitTest {

     private int number;

     public JunitTest(int number) {
        this.number = number;
     }

     @Parameters(name = "namestring")
     public static Collection<Object[]> data() {
       Object[][] data = new Object[][] { { 1 }, { 2 }, { 3 }, { 4 } };
       return Arrays.asList(data);
     }

     @Test
     public void simpleTest() {
       System.out.println("Parameterized Number is : " + number);
     }
} 
```

**namestring**是一个字符串，它可以有以下特殊的占位符：

*   {index} - 这组参数的索引。默认名称字符串是 {index}。
*   {0} - 此测试调用的第一个参数值。
*   {1} - 第二个参数值

等等

# paypal - 买家的自动 Paypal 转换

> ID：15969105
> 
> 赞同：1
> 
> 时间：2013-04-12T10:34:30.643
> 
> 标签：paypal, type-conversion

我在 ebay 上看到一些卖家为买家自动转换卖家只接受美元付款，所以如果我有英镑并且我是买家，我需要将我的 gbp 转换为美元来支付卖家。我如何以及在哪里可以为我提供此选项？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:54:06.263

您需要拥有 Premier 或 Business 帐户。

如果您这样做，请转到*个人资料 > 我的销售工具 > 阻止付款 > 更新 > 阻止以我不持有的货币发送给我的付款*。并选择*否，接受它们并将它们转换为 USD*。

另请参阅：
[https ://www.paypal.com/us/smarthelp/article/how-do-i-receive-money-with-my-paypal-account-faq1664](https://www.paypal.com/us/smarthelp/article/how-do-i-receive-money-with-my-paypal-account-faq1664)

# java - Array Index Out of Bounds 奇怪的情况

> ID：15969120
> 
> 赞同：-1
> 
> 时间：2013-04-12T10:35:10.470
> 
> 标签：java, arrays, exception

我正在编写一小段代码，遇到了一个与数组索引越界异常相关的非常奇怪的案例。

我已经在下面解释过了。

1）我有一个数组，我试图在一个特定的索引 UNKNOWN 给我分配一些值。

```
 distanceToVerticesArr[getVertexDistanceIndex(neighbour)] = distanceToNeighbour + minDistance; 
```

2）getVertexDistanceIndex()函数如下：

```
static int getVertexDistanceIndex(String Vertex) {
        //This method returns the index at which the distance to a particular vertex is stored in the distanceToVerticesArr

        for (int i = 0; i < vertexIndex.size(); i++) {
            if (vertexIndex.get(i).toString().equals(Vertex)) {
                return i;
            }
        }

        //index not found, hence inserting the vertex
        int j = vertexIndex.size();

        float[] temp = Arrays.copyOf(distanceToVerticesArr, distanceToVerticesArr.length + 1);

        distanceToVerticesArr = new float[temp.length];
        distanceToVerticesArr = Arrays.copyOf(temp, temp.length); //length of array = j+1
        vertexIndex.put(j, Vertex);
        return j;

    } 
```

3) 现在，查看注释“未找到索引，因此插入索引”下方的代码。如果我返回值 j，我会在第 1 点提到的调用中得到一个 IndexOutOfBounds 异常。但如果我返回 i，我不会遇到异常。

4）我更进一步，我修改了 POINT 1 中的代码如下：

```
int VertexDistanceIndex =getVertexDistanceIndex(neighbour);
distanceToVerticesArr[VertexDistanceIndex] = distanceToNeighbour + minDistance; 
```

现在，在这种情况下，无论我返回 i 还是 j，我都没有例外。

5）我的问题是，为什么会出现这种奇怪的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:44:30.513

问题是您正在修改方法`distanceToVerticesArr`内的引用`getVertexDistanceIndex`。所以，在这种情况下：

```
int VertexDistanceIndex =getVertexDistanceIndex(neighbour);
distanceToVerticesArr[VertexDistanceIndex] = distanceToNeighbour + minDistance; 
```

当它到达第二行时，`distanceToVerticesArr`它指向新数组，但是当你这样做时：

```
distanceToVerticesArr[getVertexDistanceIndex(neighbour)] = distanceToNeighbour + minDistance; 
```

的值`distanceToVerticesArr`已经被计算过了，所以将使用旧值，这当然是指向一个太小的数组。数组指针将在行执行后更新，但为时已晚。解决方案是：a) 使用第一种方法，或 b) 编写更好的代码。

# wordpress - 在 Qtranslate 插件中，它不显示多语言幻灯片标题。如何使它工作？

> ID：15969133
> 
> 赞同：2
> 
> 时间：2013-04-12T10:35:39.530
> 
> 标签：wordpress, qtranslate

您好我正在使用***qtranslate***插件。一切正常，但滑块标题没有显示多语言，如英语和俄语......如何解决这个问题？

WordPress 版本 3.5.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:41:24.850

您需要执行以下操作：

1.) 使滑块标题使用 qTranslate 语言标签，如下所示：

```
<!--:en-->english title<!--:--><!--:de-->german title<!--:--> 
```

2.）找到模板中滑块标题的使用位置并使用`_e()`这样的功能

```
 _e($title) 
```

要了解有关`_e()`功能的更多信息，请查看[翻译 Wordpress](http://codex.wordpress.org/Translating_WordPress#Localization_Technology)文章。

# java - NoSuchMethodError：org.slf4j.helpers.MessageFormatter.format

> ID：15969139
> 
> 赞同：9
> 
> 时间：2013-04-12T10:35:51.190
> 
> 标签：java, google-app-engine, gwt, slf4j, shiro

运行我的应用程序时出现此错误：

```
[ERROR] Apr 12, 2013 10:18:56 AM com.google.appengine.tools.development.ApiProxyLocalImpl log
[ERROR] INFO: javax.servlet.ServletContext log: Initializing Shiro environment
[ERROR] 1601 [main] INFO org.apache.shiro.web.env.EnvironmentLoader - Starting Shiro environment initialization.
[ERROR] 1931 [main] INFO org.apache.shiro.config.IniSecurityManagerFactory - Realms have been explicitly set on the SecurityManager instance - auto-setting of realms will not occur.
[ERROR] 1984 [main] ERROR org.apache.shiro.web.env.EnvironmentLoader - Shiro environment initialization failed
[ERROR] java.lang.NoSuchMethodError: org.slf4j.helpers.MessageFormatter.format(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/String;
[ERROR]     at org.slf4j.impl.SimpleLogger.formatAndLog(SimpleLogger.java:222)
[ERROR]     at org.slf4j.impl.SimpleLogger.info(SimpleLogger.java:258)
[ERROR]     at org.apache.shiro.web.env.EnvironmentLoader.initEnvironment(EnvironmentLoader.java:146)
[ERROR]     at org.apache.shiro.web.env.EnvironmentLoaderListener.contextInitialized(EnvironmentLoaderListener.java:58)
[ERROR]     at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)
[ERROR]     at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
[ERROR]     at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
[ERROR]     at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
[ERROR]     at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
[ERROR]     at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
[ERROR]     at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
[ERROR]     at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
[ERROR]     at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
[ERROR]     at org.mortbay.jetty.Server.doStart(Server.java:224)
[ERROR]     at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
[ERROR]     at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:228)
[ERROR]     at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:255)
[ERROR]     at com.google.appengine.tools.development.AbstractServer.startup(AbstractServer.java:79)
[ERROR]     at com.google.appengine.tools.development.DevAppServerImpl$Servers.startup(DevAppServerImpl.java:451)
[ERROR]     at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:198)
[ERROR]     at com.google.appengine.tools.development.gwt.AppEngineLauncher.start(AppEngineLauncher.java:97)
[ERROR]     at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
[ERROR]     at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)
[ERROR]     at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
[ERROR]     at com.google.gwt.dev.DevMode.main(DevMode.java:311)
[ERROR] Apr 12, 2013 10:18:56 AM com.google.apphosting.utils.jetty.JettyLogger warn 
```

这是我认为与此相关的 pom.xml 配置的一部分：

```
<properties>
        <!-- other properties omitted -->
        <slf4jVersion>1.5.11</slf4jVersion>
</properties>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${slf4jVersion}</version>
    </dependency>
    <dependency>
        <!-- any library that uses commons-logging will be directed to slf4j -->
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>${slf4jVersion}</version>
        </dependency>
    <dependency>
        <!-- any library that uses slf4j will be directed to java.util.logging -->
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-jdk14</artifactId>
        <version>${slf4jVersion}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
            <artifactId>slf4j-simple</artifactId>
            <version>${slf4jVersion}</version>
            <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>${slf4jVersion}</version>
    </dependency> 
```

我很确定我将 SLF4j 版本全部设置为一个版本。我的配置可能有什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-10T08:53:23.240

使用更新版本的 slf4j，例如 1.7.5。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-17T23:59:28.397

对于受到这些错误困扰的其他任何人，我还将检查您是否正在使用：spring-ldap-test

我无意中将它包含在我的运行时中，它依赖于 apacheds-all-1.5.5.jar，它有自己的一些 slf4j 类的实现。在我将 -verbose:class 添加到我的 java 命令并看到这些类是从那个 jar 加载之前，我浪费了很多时间试图解决这个问题。

# asp.net-mvc - 有没有办法从 VS2012 CSHTML 代码编辑器获取 CSS 类定义？

> ID：15969141
> 
> 赞同：1
> 
> 时间：2013-04-12T10:35:57.047
> 
> 标签：asp.net-mvc, asp.net-mvc-3, visual-studio-2010, visual-studio-2012

有没有办法在 VS2012 查看代码编辑器中单击 CSS 类来获取类定义，例如类的“转到定义”等。

谢谢。

编辑：

与此问题相关的是如何确定应用于 textbox/html.editfor 助手的 CSS。我以为“宽度”会存储在“编辑字段”类中，但它不是！？？！

.editor-field {边距：0.5em 0 0 0;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:44:13.873

从 6.0 版开始，ReSharper 支持 CSS：

> [http://www.jetbrains.com/resharper/whatsnew/whatsnew_60.html#CSS](http://www.jetbrains.com/resharper/whatsnew/whatsnew_60.html#CSS)
> 
> 您可以在当前文件和更大范围内轻松找到 CSS 属性或选择器的用法。

编辑：

> 与此问题相关的是如何确定应用于 textbox/html.editfor 助手的 CSS。

不，这是一个全新的问题。您可以使用浏览器中的调试工具（IE 中的 F12）进行检查。

# java - AKKA 远程演员可以在 p2p 群环境中使用吗？

> ID：15969146
> 
> 赞同：12
> 
> 时间：2013-04-12T10:36:05.283
> 
> 标签：java, scala, akka, distributed-computing, distributed-transactions

我见过的大多数[Akka Actor](http://akka.io/)用例都是高性能的多核服务器或本地集群。

我很好奇它是否适用于更远程**的高延迟**和**高度失败**的集群结构，例如 p2p 网络。

我想到的应用程序将有关于集群节点的可信任性和/或资源丰富性的规则，为它们提供一些状态，就像 bittorrent 那样。它还需要能够尽可能地跨集群传播事务，但**最终或部分一致性是可以接受**的。可扩展性将比一致性更重要。

**AKKA 是**构建这样的东西的潜在解决方案吗？与其他方法相比，它是否有任何**特定的优点或缺点。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T07:52:54.223

在这种情况下使用 Akka 的主要问题是 Actor 系统没有适合这种去中心化分布式计算的可扩展的成员管理系统。

您需要一些可以处理您在场景中描述的节点流失的东西。特别是，您需要能够监控节点何时加入、离开以及因故障而被假定为死亡和断开连接的东西。我建议使用基于八卦的注册表查看 Ibis： [http ://www.cs.vu.nl/ibis/。](http://www.cs.vu.nl/ibis/)您仍然需要一个众所周知的引导节点来启动系统，但 Ibis 使用的加入、选择、离开模型将在与基于 Gossip 的注册表结合使用时提供您正在寻找的可扩展性。该系统在某种程度上类似于 Akka Actor，因为它基于向上或向下调用和传递消息的单向管道的系统。一旦你掌握了它，就很容易对分布式的东西进行编程。

就最终一致性而言，这是大型分布式环境中已知的难题。我需要更多地了解您想要分发的交易类型以及在那里提出更多建议所需的一致性和历史保存水平。最近的一些论文证明，尽管在如此恶劣的环境中，你能想出的最好的方法是分叉因果一致性，至少每个人都可以看到历史已经分叉，如果不能确定“获胜”分叉，没有其他分叉解决机制。

比特币是这个领域的一个有趣的例子，其中“获胜”由最长的链决定，但这个领域还有其他解决方案可能会或可能不会根据应用程序语义工作。您的问题有点太模糊，无法在如此大的设计空间中给出具体建议。

# php - 使用 MIME 类型 text/html 传输的样式表

> ID：15969148
> 
> 赞同：1
> 
> 时间：2013-04-12T10:36:07.173
> 
> 标签：php, apache, stylesheet

正如您已经通过以下消息理解我的问题

```
Resource interpreted as Stylesheet but transferred with MIME type text/html: "http://localhost/EcoVis/user/css/style.css". login:5
Resource interpreted as Stylesheet but transferred with MIME type text/html: "http://localhost/EcoVis/user/css/navigation.css". 
```

我在 Win7 64 位上使用 xampp。

使用以下 MVC 构建应用程序。我没有使用任何框架，只是为了更好地理解而从头开始构建。Apache 重写已打开，并且正在使用 .htaccess，以便将条目限制为仅 index.php。

```
##  Can be commented out if causes errors, see notes above.
Options +FollowSymLinks

#Folder indexing
Options -Indexes

#  mod_rewrite in use

RewriteEngine On

########## Begin - Rewrite rules to block out some common exploits
## If you experience problems on your site block out the operations listed below
#
## Deny access to extension xml files (uncomment out to activate)
#<Files ~ "\.xml$">
    #Order allow,deny
    #Deny from all
    #Satisfy all
#</Files>

#Secure access to php files except from index.php,proxy_get.php,proxy_post.php
<FilesMatch "\.php$">
    Order Allow,Deny
    Deny from all
</FilesMatch>
#Allow access only to index files of each folder.
<FilesMatch "^(index)\.php$">
    Order Allow,Deny
    Allow from all
</FilesMatch>

RewriteCond %{QUERY_STRING} mosConfig_[a-zA-Z_]{1,21}(=|\%3D) [OR]
# Block out any script trying to base64_encode crap to send via URL
RewriteCond %{QUERY_STRING} base64_encode.*\(.*\) [OR]
# Block out any script that includes a <script> tag in URL
RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]
# Block out any script trying to set a PHP GLOBALS variable via URL
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
# Block out any script trying to modify a _REQUEST variable via URL
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
# Send all blocked request to homepage with 403 Forbidden error!
RewriteRule ^(.*)$ index.php [F,L]

#  Uncomment following line if your webserver's URL
#  is not directly related to physical file paths.

# RewriteBase /

########## Core sef Section
# Index.php is the only gateway to the webapp
# If the request is for a real directory (one that exists on the server), index.php isn't served.
RewriteCond %{REQUEST_FILENAME} !-f
#If the request is for a file that exists already on the server, index.php isn't served.
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?rt=$1 [L,QSA] 
```

Index php 进行一些初始化并触发下面给出的主控制器。

```
<?php

/**
 * Controller decides where the next step will be.
 * Web server's RewriteEngine On is needed.
 * the rt from _GET['rt'] is defined in .htaccess
 *
 */

class controller extends baseController {

  public function load()
  { 
      /*  get the route from the url  */
      $route = (empty($_GET['rt'])) ? '' : $_GET['rt'];

      if (empty($route)) 
      {
        $controller = 'main';
        $action = NULL;
      } 
      else 
      {
        /*  decide the route  */
        $parts = explode('/', $route);
        switch ($parts[0]) {
          case 'uploaddata':
            $controller = 'uploaddata';
            $action = $parts[1];
            break;
          case 'exportdata':            
            break;
          case 'user':
            $controller = 'user';
            $action = $parts[1];
            break;            
          case 'about':
            break;
          default:
            break;
        } 
      }

          require_once __SITE_PATH . '/controller/controller_' . $controller . '.class.php';
          $controller = 'controller_' . $controller;
          $c = new $controller($this->registry);
          $c->load($action);          
  }
}

?> 
```

然后是子控制器（如果跟随）。确切的工作由子控制器和加载的模板文件确定，该文件由 html 组成，但具有 php 扩展名。下面给出了从上传子控制器（按预期工作）加载的模板文件。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
      <title>Visualization of Economic Data</title>
      <link rel="shortcut icon" href="favicon.ico"/>
      <link href="css/style.css" rel="stylesheet" type="text/css" media="screen"/>
      <link href="css/navigation.css" rel="stylesheet" type="text/css" media="screen"/>
      <script type="text/javascript" src="scripts/jquery-1.9.1.min.js"></script>      
      <script type="text/javascript" src="scripts/uploaddata.js"></script>      
    </head>
    <body>
      <div id="main">
        <?php
          include(__SITE_PATH . '/views/header.php');
          include(__SITE_PATH . '/views/uploaddata.php');
          include(__SITE_PATH . '/views/footer.php');
        ?>
      </div>
    </body>
</html> 
```

页面加载完毕后，按Ctrl-U查看页面代码，点击“css/style.css”，如下图，浏览器在新页面中加载css文件。这是我所期待的，并且正在发生。

```
 <link href="css/style.css" rel="stylesheet" type="text/css" media="screen"/> 
```

坏消息现在开始。

当我的主控制器加载子控制器用户（用于登录、注销等）并加载登录模板（如下所示）时，我得到了我期望的所有 html 元素，但没有应用 css 方向。相反，我收到了页面顶部显示的消息。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
      <title>Visualization of Economic Data</title>
      <link rel="shortcut icon" href="favicon.ico"/>
      <link href="css/style.css" rel="stylesheet" type="text/css" media="screen"/>
      <link href="css/navigation.css" rel="stylesheet" type="text/css" media="screen"/>
    </head>
    <body>
      <div id="main">
        <?php
          include(__SITE_PATH . '/views/header.php');
          include(__SITE_PATH . '/views/login.php');
          include(__SITE_PATH . '/views/footer.php');
        ?>
      </div>
    </body>
</html> 
```

再次检查代码并单击 css/style.css 加载一个新的空白页面，并调用服务器，输入由控制器处理的 css/style.css（逻辑类型为 text/html）。

我正在谷歌搜索，但找不到任何解决方案。Apache 配置正确（或不正确），因为它适用于上传部分。我在 .htaccess 文件中添加了以下行，但没有运气。

```
AddType text/css .css 
```

关于发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-09-21T12:44:09.653

要解决 CSS 问题的这个问题，请检查在 bin/apache/apache version/ 文件夹中找到的文件夹中的 /conf/mime.types 文件。然后您想在这个时间搜索文件扩展名，以便稍后在 httpd.config 文件中使用 AddType 和 AddHandler 指令配置模块。httpd.config 文件看起来像这样

```
AddType text/CSS .css 
AddHandler text/css .css 
```

根据 mime.types 设置的媒体类型

路径也应该有一个像这样的“/”

```
"/styles/style.css" or "/style.css" 
```

在 CSS 文件中也使用它

```
<?php header("Content-Type:text/css; charset: UTF-8"); ?> 
```

只需将样式表链接到 php 文件 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-24T01:47:40.640

如果在将“AddType text/css .css”添加到 httpd.conf 和 root .htaccess 并重新加载您的 apache 之后，我会将错误归因于路径的另一种可能性 - 路径区分大小写。

还要尝试从根目录开始的绝对路径，即使用“/css/styles.css”代替“css/styles.css”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-26T10:44:46.333

检查您的`/etc/apache2/apache2.conf` 如果有任何`SetHandler application/x-httpd-php`行，请尝试对其进行评论，然后通过以下方式重新加载您的 apache`$ sudo system apache2 reload`

让我们知道问题是否仍然存在。

您还可以检查您的其他站点 ( `/etc/apache2/sites-enabled/*.conf`) 以确保它们都没有类似的线路。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-27T09:39:57.783

我的错误：

> 资源解释为样式表，但使用 MIME 类型文本/纯文本传输：“”

**使固定**

1> 在 httpd.conf 添加

```
AddType text/CSS .css 
AddHandler text/css .css 
```

2>重置阿帕奇

# ios - 如果 x < y，则 .m 文件中的滑块值更改运行方法

> ID：15969151
> 
> 赞同：1
> 
> 时间：2013-04-12T10:36:10.630
> 
> 标签：ios, objective-c, xcode

对不起，如果标题含糊不清。我有这部分代码确定滑块是否已更改。

```
- (IBAction)sliderChanged:(id)sender {
    UISlider *slider = (UISlider *)sender;
    NSString *newText = [[NSString alloc] initWithFormat:@"%1.2f", slider.value];
    sliderValue.text = newText;
    if(slider.value <= 0.4){

    }
} 
```

我有一个名为以下的方法（操作）：`- (IBAction)fridayEvent:(id)sender {`它获取一个 url，获取一个 JSON 字符串并将引脚添加到地图中。当滑块值 x < y 时，我需要能够调用此操作。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:26:12.647

好没问题。做就是了：

```
if( slider.value <= 0.4 ) {
    [self fridayEvent: self];
} 
```

或者，如果您的 fridayEvent: 操作也需要查询滑块，您可以将滑块传递为：

```
[self fridayEvent: slider]; 
```

# corba - 如何在 CORBA 中指定枚举字段值

> ID：15969152
> 
> 赞同：4
> 
> 时间：2013-04-12T10:36:12.473
> 
> 标签：corba

我想在 idl 文件中写一个枚举为 -

```
module Media 
{
enum eSpeed
{
    int speed1 = 2000,
    int speed2 = 4000,
    int speed3 = 8000
};
}; 
```

但是 CORBA 不允许在枚举的情况下进行任何值分配。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:11:35.490

IDL 枚举不能被赋予值。通常，我所做的是将 IDL 枚举重新映射到我自己在 C++ 中制作的枚举（可能使用查找表），该枚举在我的应用程序代码中使用它之前具有正确的值。换句话说，例如，服务器实现可能会在 CORBA 调用中接收 IDL 枚举，然后通过表查找将其映射到具有定义值的内部 C++ 枚举，然后将其传递给应用程序代码。

如果您不想这样做，您可以在 IDL 中使用常量而不是枚举：

```
const long speed1 = 2000;
const long speed2 = 4000; 
```

然后，您将在 IDL 中传递`long`而不是`eSpeed`作为参数。

# java - 将二叉树节点的所有祖先附加到Java中的字符串

> ID：15969158
> 
> 赞同：0
> 
> 时间：2013-04-12T10:36:16.657
> 
> 标签：java, binary-tree

我正在使用二叉树在 Java 中编写一个家谱程序。从另一个类调用祖先方法并调用 findAncestors 以递归方式运行以将所有祖先附加到输出字符串。我向我的树添加了父指针，希望能够更轻松地找到所有祖先。

我使用的 locate 方法在树中搜索传递的字符串并返回它所在的节点。

我目前遇到的问题是该方法仅返回直接父节点而不是节点的所有祖先。

```
public String ancestors(String x)
    {
    String outputString = "";
    if (locate(x).parent!=null)
        outputString = findAncestors(locate(x),outputString);
    return outputString;
    }

    private String findAncestors(Node x,String outputString)
    {
    if(x.parent != null)
        {
            outputString = outputString + String.valueOf(x.parent.value);
            findAncestors(x.parent,outputString);
        }
    return outputString;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:48:19.583

您不能将字符串作为更改参数传递，因为它是不可变的。尝试：

 `````
 return findAncestors(x.parent,outputString); 
`````

# java - 相机停止移动一段时间后更新谷歌地图

> ID：15969160
> 
> 赞同：3
> 
> 时间：2013-04-12T10:36:22.560
> 
> 标签：java, android, google-maps, google-api

我仍然不相信我在 SO 上找不到任何问题，所以请随时指出我的问题。

我正在使用显示多个标记的谷歌地图实现应用程序。我想让它动态化，以便只绘制看到的标记。为此，我希望能够知道地图何时完全停止，然后等待几秒钟，这样我就不会在用户可能仍在移动地图时弄乱地图，然后清除标记并绘制新标记。如果用户在计时器触发之前移动，它必须取消然后再次开始计数。

到目前为止，当动画停止使用时，我设法让相机更改触发`onCameraChangeListener`，尽管[它的定义](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.OnCameraChangeListener)指定这可能仍会在动画中间调用。这是正确的方法吗？

第二个问题是关于计时器的。我目前的实现如下：

```
map.setOnCameraChangeListener(new OnCameraChangeListener() {
    public void onCameraChange(CameraPosition position) {
        refresher.schedule(new refreshMapData(), 2000);
    }
}); 
```

实际更新必要标记的 Timer 是这个：

```
class refreshMapData extends TimerTask{

    public void run() {
        map.clear();
        for ( ... ) {
            map.addMarker( ... );
        }
    }
} 
```

这显然会引发“不在主线程上”异常并引导我进入下一个问题：这个问题的解决方法是什么？如果不允许从主线程外部进行修改，如何使用计时器修改 Google Map 的值？

**编辑：**关于第一个问题，我想我只需要比较自上次以来位置是否发生变化，这样就可以了。只需要计时器更新问题的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T14:53:56.783

你最好使用`Handler`. 这不会创建额外的线程，这是不必要的。

只需在 onCameraChange 中调用它：

```
handler.removeMessages(MSG_ID);
handler.sendEmptyMessageDelayed(MSG_ID, 2000); 
```

并在[handleMessage](http://developer.android.com/reference/android/os/Handler.html#handleMessage%28android.os.Message%29)中完成您的工作。

如果只显示几个标记，为什么需要它是动态的？可见区域之外的标记不制作要慢得多。您清除和添加标记的代码可能会使其变慢。

如果您要显示数千个标记，请尝试[Android Maps Extensions](http://code.google.com/p/android-maps-extensions/)，它只添加了内置的可见标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-18T22:06:26.710

我不知道您是否仍然需要一个好的解决方案，但我发现[了这个问题](https://stackoverflow.com/questions/13713066/google-maps-android-api-v2-very-slow-when-adding-lots-of-markers)并认为可能会有所帮助。这对我有帮助，[这家伙写了一篇博文，](http://discgolfsoftware.wordpress.com/2012/12/06/hiding-and-showing-on-screen-markers-with-google-maps-android-api-v2/)解释如何使用集群管理器以及如何设置。

# java - HashMap中put()的返回值

> ID：15969162
> 
> 赞同：21
> 
> 时间：2013-04-12T10:36:24.760
> 
> 标签：java, dictionary, syntax

我无法理解`put()`in a的返回值的解释`HashMap`：

```
 private Map<Bookmark, Integer> mDevice = new HashMap<String, Integer>();

    String abc = "two"
    Integer ret = mDevice.put(abc, ONLINE); 
```

我这样说是否正确：

1.  如果 abc 键值已经存在`OFFLINE`，则 ret 等于`OFFLINE`。
2.  如果 abc 键值已经存在`ONLINE`，则 ret 等于`ONLINE`。
3.  如果 abc 键不存在，则 ret 等于`null`。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-12T11:03:09.837

put 方法的返回类型与值相同：

```
 @Override
    public V put(K key, V value) {
        return putImpl(key, value);
    } 
```

该方法将指定的值与此映射中的指定键相关联。如果映射先前包含键的映射，则替换旧值。

它返回与键关联的先前值，如果没有键映射，则返回 null。因此，您的观点是正确的。

欲了解更多详情，请访问[这里](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-07T06:40:59.133

```
package com.payu.Payu;

import java.util.*;

public class HashMap_Example {
    public static void main(String[] args) {

        // Creating an empty HashMap
        HashMap<Integer, String> hashmap = new HashMap<Integer, String>();

        // Mapping string values to int keys
        hashmap.put(10, "HashMap");
        hashmap.put(15, "4");
        hashmap.put(25, "You");

        // Displaying the HashMap
        System.out.println("Initial Mappings are: " + hashmap);

        // Inserting existing key along with new value
        // return type of put is type of values i.e. String and containing the old value 
        String returned_value = hashmap.put(10, "abc");

        // Verifying the returned value
        System.out.println("Returned value is: " + returned_value);

        // Inserting new key along with new value
        // return type of put is type of values i.e. String ; since it is new key ,return value will be null

        returned_value = hashmap.put(20, "abc");

        // Verifying the returned value
        System.out.println("Returned value is: " + returned_value);

        // Displayin the new map
        System.out.println("New map is: " + hashmap);
    }
} 
```

输出 ：-

初始映射为：`{25=You, 10=HashMap, 15=4}`
返回值为：`HashMap`
返回值为：`null`
新映射为：`{20=abc, 25=You, 10=abc, 15=4}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-16T06:16:14.207

当我们调用 HashMap put 方法时：

如果映射没有与任何值关联，则返回类型为**null**，否则返回**之前的关联值**。

# c++ - makefile：cpp + cu 文件 - 未定义引用的错误

> ID：15969163
> 
> 赞同：3
> 
> 时间：2013-04-12T10:36:27.990
> 
> 标签：c++, cuda, makefile

考虑三个文件：main.cpp、func_prototypes.h 和 test_kernels.cu。我想从这三个文件中构建一个项目。我试图基于 CUDA 样本来构建一个“makefile”，但我失败了。make 的执行返回未定义引用的错误。下面是我的三个文件和makefile

**主文件**

```
#include <iostream>

#include <cstdlib>
#include <stdlib.h>
#include <stdio.h>

#include <new>

#include <cuda.h>

using namespace std;

#include "func_prototypes.h"

typedef float mytype;

int main(){

    mytype *vec;
    unsigned int N = 1024;

    vec = new mytype[N];

    for(int i = 0; i < N; i++){
        vec[i] = i;
    }

    cout << "Calling CUDA function.\n";

    getSquares(vec,N);

    cout << "result:\n";

    for(int i = 0; i < N; i++){
        cout << vec[i] << " ";
    }

    ResetCUDA();
    return EXIT_SUCCESS;

} 
```

**func_prototypes.h**

```
template <class type>
void getSquares(type *v, unsigned const int N);
void ResetCUDA(); 
```

**test_kernels.cu**

```
#include <cuda.h>
#include <new>

#define BlockSize 256

template <class type>
__global__
void getSquareKernel(type *v, unsigned const int N){
    int tIdx = blockIdx.x*blockDim.x + threadIdx.x;

    if(tIdx < N){
        v[tIdx] *= v[tIdx];
    }
}

template <class type>
void getSquares(type *v, unsigned const int N){

    int threads = BlockSize;
    int blocks = ceil(N/threads);

    type *d_v;
    cudaMalloc(&d_v,N*sizeof(type));
    cudaMemcpy(d_v,v,N*sizeof(type),cudaMemcpyHostToDevice);

    getSquareKernel<<<blocks,threads>>>(d_v,N);

    cudaMemcpy(v,d_v,N*sizeof(type),cudaMemcpyDeviceToHost);

    cudaFree(d_v);

}

void ResetCUDA(){
    cudaDeviceReset();
} 
```

**生成文件**

```
############################# Makefile ##########################
CUDA_PATH       ?= /usr/local/cuda-5.0
CUDA_INC_PATH   ?= $(CUDA_PATH)/include
CUDA_BIN_PATH   ?= $(CUDA_PATH)/bin

ifeq ($(OS_SIZE),32)
    CUDA_LIB_PATH  ?= $(CUDA_PATH)/lib
else
    CUDA_LIB_PATH  ?= $(CUDA_PATH)/lib64
endif

ifeq ($(OS_SIZE),32)
    LDFLAGS :=  -L$(CUDA_LIB_PATH) -lcudart
    CPPFLAGS    :=  -m32
else
    LDFLAGS :=  -L$(CUDA_LIB_PATH) -lcudart
    CPPFLAGS    :=  -m64
endif
# Debug build flags
ifeq ($(dbg),1)
      CPPFLAGS      += -g
      NVCCFLAGS = -g -G
endif

INCLUDES    := -I$(CUDA_INC_PATH) -I. -I.. -I../../common/inc

CPP     =       icpc
NVCC        =       $(CUDA_BIN_PATH)/nvcc

SOURCE  =       main.cpp
AUX     =       test_kernels.cu

all:    test
test_kernels.o: $(AUX)
    $(NVCC) $(NVCCFLAGS) -o test_kernels.o -c $(AUX) $(NVCCFLAGS) $(INCLUDES)
main.o: $(SOURCE)
    $(CPP) $(CPPFLAGS) -o main.o -c $(SOURCE) $(CPPFLAGS) $(INCLUDES)
test:   test_kernels.o  main.o
    $(CPP) -o test test_kernels.o main.o $(LDFLAGS)
run: test
    ./test
clean:
    rm -rf test *.o 
```

返回的错误是`main.o:main.cpp:function main: error: undefined reference to 'void getSquares<float>(float*, unsigned int)' make: *** [test] Error 1`

有谁知道我的错误在哪里？

**编辑：**作为记录，我的操作系统是 Ubuntu 12.04 x86_64，内核 3.2.0-39

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T11:03:08.883

这是模板编译中[标准陷阱的体现。](http://www.parashift.com/c++-faq-lite/separate-template-fn-defn-from-decl.html)

您的主机函数`getSquares`和内核`getSquareKernel`从未在定义它们的编译单元中实例化（即在 test_kernels.cu 中）。因此，编译器永远不会为 发出任何代码`getSquares`，并且链接失败。

因为您在 test_kernels.cu 中使用组合的主机代码/设备代码编译轨迹，所以正确的解决方案是显式实例化您在 test_kernels.cu 中需要的模板代码的所有变体，方法是添加如下内容：

```
template __global__ void getSquareKernel<float>(float *, unsigned int);
template void getSquares<float>(float *, unsigned int); 
```

到 test_kernels.cu 的底部。这将确保您需要链接它的设备和主机代码实例在链接时都存在。

另一种选择是将包含 main 的文件更改为 .cu 文件并将 test_kernels.cu 包含到该文件中并使用 nvcc 编译整个内容。在这种情况下，内部宿主类的实例化`main()`应该触发在同一编译单元内编译完整的模板链。

免责声明：我面前没有一台机器可以在上面测试任何机器，所以至少要购买代码...

# ios - 如何在 Facebook 上分享打开 iPad 应用程序的链接

> ID：15969167
> 
> 赞同：1
> 
> 时间：2013-04-12T10:36:36.423
> 
> 标签：ios, facebook, ipad

我们为 iPad 开发了应用程序，可以在 Facebook 上共享应用程序的某些部分。场景是当用户打开共享链接时，它将在 iPad 上启动我们的应用程序。语法是 myapp:// 从 iPad 浏览打开链接，但问题是无法在 Facebook 上分享此类链接，如“...发生错误。”。如何在 Facebook 上分享此类链接或以其他方式执行相同操作。

# php - 从两个表查询时如何使用外键

> ID：15969170
> 
> 赞同：17
> 
> 时间：2013-04-12T10:36:47.613
> 
> 标签：php, mysql, sql

我的问题很基本。它是关于如何使用外键从两个表中选择某些信息来构建我的查询？

```
table vehicles
+-------+----------+------------+
| id_car| car_model| car_owner  |
+-------+----------+------------+
|  1    |       VW |         132|
+-------+----------+------------+
|  2    |       VW |         200|
+-------+----------+------------+
table users
+-------+----------+------------+
|user_id| user_name| user_phone |
+-------+----------+------------+
|  132  |     Peter|    555-555 |
+-------+----------+------------+
|  200  |      Jim |    555-333 |
+-------+----------+------------+ 
```

`car_owner`是表中的外键，`vehicles`它引用表的主键`user_id`。`users`

所以有人正在搜索所有大众汽车，我希望像 html 一样填充以下信息（是的，我知道这不是正确的方法 - 我使用它只是为了简化示例并显示每个表中的哪些信息） ：

```
>    echo "Car model:". `vehicles.car_model`
>    echo "Car owner:". `users.user_name`
>    echo "Contacts: ". `users.user_phone` 
```

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-12T10:54:05.617

我不确定，如果您了解外键的用途。外键基本上说“对于这个条目，父表中必须有一个条目”。你说`user_id is foreign key in vehicle table`，我不清楚。

所以，让我们假设你有一个这样的表定义：

```
CREATE TABLE vehicles
(`id_car` int, `car_model` varchar(2), `car_owner` int);

CREATE TABLE users
(`user_id` int, `user_name` varchar(5), `user_phone` varchar(7)
, CONSTRAINT `fk_your_foreign_key` FOREIGN KEY (user_id) REFERENCES vehicles(car_owner)
); 
```

当您要向表中插入新用户时，user_id 必须是车辆表中 car_owner 列中的现有条目。

外键用于实现业务规则。每个用户都必须是车主吗？或者反过来说，每辆车都必须归某人所有吗？如果您可以对这两个问题都没有回答，那么就不要在这种情况下实现任何外键。但是，如果您可以肯定地回答“是”，请这样做。

要获得您正在寻找的信息，只需执行

```
SELECT 
* 
FROM 
vehicles 
INNER JOIN users ON vehicles.car_owner = users.user_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T10:42:04.387

使用连接：

```
SELECT * FROM vehicles INNER JOIN users ON (vehicles.car_owner=users.user_id) 
```

扩展：`vehicles INNER JOIN users`将只返回有车主的汽车。如果要显示所有者为 NULL 或已删除所有者的汽车，请使用`vehicles LEFT JOIN users`.

因为`vehicles INNER JOIN users`还有另一种可能的方式：

```
SELECT * FROM vehicles, users WHERE vehicles.car_owner=users.user_id 
```

后者从两个表的笛卡尔积中选择匹配条件的行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T10:43:24.297

你需要 SQL Join，像这样 -

```
SELECT vehicles.car_model, users.user_name, users.user_phone
FROM vehicles
JOIN users ON vehicles.car_owner = users.users_id 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-06T09:06:52.343

从学习者的角度来看，令人惊讶的是，外键似乎不是在查询中链接表的功能：即上面 3 个答案中给出的查询在没有外键的情况下工作。例如，对于最后一个示例，mysql 学习者会期望 mysql 从外键中隐式推断出 vehicle.car_owner = user.users_id 以便在查询时

```
SELECT vehicles.car_model, users.user_name, users.user_phone
FROM vehicles JOIN users 
```

应该足够了。而查询代码：

```
 ON vehicles.car_owner = users.users_id 
```

看起来像外键的冗余显式重新声明

# objective-c - 如何确保 UINavigationController 在弹出另一个之前完成动画？

> ID：15969171
> 
> 赞同：2
> 
> 时间：2013-04-12T10:36:49.180
> 
> 标签：objective-c, uinavigationcontroller

我制作了一个推送 uinavigationcontroller 的程序。一旦完成，它就会弹出一些东西，然后做一些事情。

它想做的一件事就是等到它完成弹出后再做那件事。

那是因为它可能做的一件事是推动另一个视图控制器。

我该怎么做？

```
I already create a category 

-(void)SafelyPushController:(UIViewController *) pushee
{
    AssertMainThread;
    if([self.viewControllers lastObject]!=pushee){
        [self pushViewController:pushee animated:YES];
        while (false);
    }
    else{
        //DLog(@"Dont need to pushview");
    }

    while (false);
    //[self pushViewController:pushee animated:YES];
} 
```

为了防止某些情况。

我需要更通用的解决方案。

就像是：

如果 navigationController 仍在动画，请等到它在后台完成并在当前线程执行此块。

那种事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:45:54.173

您需要使用*UINavigationController*的委托：

```
@property(nonatomic, assign) id<UINavigationControllerDelegate> delegate; 
```

将其设置为符合此协议的类的对象，该协议实现此方法：

```
- (void)navigationController:(UINavigationController *)navigationController didShowViewController:(UIViewController *)viewController animated:(BOOL)animated; 
```

在这种方法中，您将知道何时完成了视图控制器的显示，因此，如果它是动画的，则动画已经结束。请注意，如果您推送多个视图控制器，则必须跟踪它们。

**文档**：

[UINavigationController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)
[UINavigationControllerDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationControllerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UINavigationControllerDelegate)

# java - 私有和受保护之间的 Java

> ID：15969172
> 
> 赞同：10
> 
> 时间：2013-04-12T10:36:49.320
> 
> 标签：java, access-modifiers

我有一个带有方法的类，我希望只能对其子对象访问该方法，而不是对该包中的其他类。

```
Modifier    | Class | Package | Subclass | World
————————————+———————+—————————+——————————+———————
public      |  ✔    |    ✔    |    ✔     |   ✔
————————————+———————+—————————+——————————+———————
protected   |  ✔    |    ✔    |    ✔     |   ✘
————————————+———————+—————————+——————————+———————
no modifier |  ✔    |    ✔    |    ✘     |   ✘
————————————+———————+—————————+——————————+———————
private     |  ✔    |    ✘    |    ✘     |   ✘
____________+_______+_________+__________+_______
my Modifier |  ✔    |    ✘    |    ✔     |   ✘
____________+_______+_________+__________+_______ 
```

有这种修饰符的解决方法吗？

也许有一种方法可以使包最终化，因此其他程序员不能将任何类添加到我的包中？

或者有没有办法获取调用函数的实例，并检查这是否是我的`super`对象的实例？

还是我只需要离开它，只使用受保护的，其他程序员可能会在我的包中添加类......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T10:40:07.373

1）您不能在 Java 中创建自定义访问修饰符

2）您可以将包密封在罐子中，请参阅[http://docs.oracle.com/javase/tutorial/ext/security/sealing.html](http://docs.oracle.com/javase/tutorial/ext/security/sealing.html)

3）你可以找到调用类，试试

```
public static void main(String[] args) throws Exception {
    xxx();
}

static void xxx() {
    Class[] cc = new SecurityManager() {
        @Override
        protected Class[] getClassContext() {
            return super.getClassContext();
        }
    }.getClassContext();
    System.out.println(cc[cc.length - 1].getName());
} 
```

# c# - Linq to Entity 按周数分组

> ID：15969174
> 
> 赞同：8
> 
> 时间：2013-04-12T10:36:56.383
> 
> 标签：c#, asp.net, linq, entity-framework, linq-to-entities

我正在使用 ASP.NET v4.5 和 linq 到实体我试图使用下面的代码按周对我的数据进行分组

```
var groupedByWeek = salesOrdersList
    .GroupBy(i => i.DueDate.AddDays(-(int)i.DueDate.DayOfWeek)); 
```

但是，我收到“黄屏死机”错误：

> LINQ to Entities 无法识别方法 'System.DateTime AddDays(Double)' 方法，并且此方法无法转换为存储表达式。

理想情况下，我想把

```
var groupedByWeek = salesOrdersList.GroupBy(i => i.DueDate.WeekNumber); 
```

但生活没那么容易！

有谁知道在 Linq to Entity 中使用周数的方法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-12T11:03:01.457

使用[`SqlFunctions.DatePart()`](http://msdn.microsoft.com/en-us/library/dd487171.aspx)方法：

```
var groupedByWeek = salesOrdersList.GroupBy(i => SqlFunctions.DatePart("week", i.DueDate)); 
```

它将`DATEPART`sql 函数调用添加到生成的 SQL 查询中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-03T09:52:28.850

每日：

```
var daily = salesOrdersList.Where(x => (long)(x.DueDate - new DateTime(1970, 1, 1, 0, 0, 0)).TotalDays == (long)(Datetime.Now.ToLocalTime()- new DateTime(1970, 1, 1, 0, 0, 0)).TotalDays ).ToList(); 
```

或者

```
var daily = salesOrdersList.Where(x => x.DueDate.Day == Datetime.Now.ToLocalTime().Day).ToList(); 
```

对于每周：

```
var weekly = salesOrdersList.Where(x => (long)(x.DueDate - new DateTime(1970, 1, 1, 0, 0, 0)).TotalDays / 7 == (long)(Datetime.Now.ToLocalTime()- new DateTime(1970, 1, 1, 0, 0, 0)).TotalDays / 7).ToList(); 
```

每月

```
var monthly= salesOrdersList.Where(x => x.DueDate.Month== Datetime.Now.ToLocalTime().Month).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-11T16:46:25.047

或者您可以获取一周中第一天的日期，然后按该日期分组。

获取一周中第一天的日期。您可以使用以下代码：

```
public static class DateTimeExtensions
{
    public static DateTime StartOfWeek(this DateTime dt, DayOfWeek startOfWeek)
    {
        int diff = dt.DayOfWeek - startOfWeek;
        if (diff < 0)
        {
            diff += 7;
        }
        return dt.AddDays(-1 * diff).Date;
    }
} 
```

然后你可以像这样按一周的第一个日期分组：

```
var groupedByWeek = salesOrdersList.GroupBy(i => i.DueDate.StartOfWeek(DayOfWeek.Monday)); 
```

# sql - 在sql中选择下一行

> ID：15969178
> 
> 赞同：2
> 
> 时间：2013-04-12T10:37:09.897
> 
> 标签：sql, sql-server-2008, select

我的数据库中有更多记录。所以我想选择前 10,000 条记录。然后我必须继续从下一个记录中选择意味着下一个 10,001 到一些值。如何在这里查询？

任何想法对我都有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T11:03:22.377

如果您的表中没有 ID 行，或者 ID 不是 IDENTITY，则可以使用 ROW_NUMBER 函数，如下所示：

```
SELECT ROW_NUMBER() OVER (ORDER BY Products.ProductID) as 'rownbr', Products.ProductID
FROM Products
ORDER BY Products.ProductID 
```

然后像这样使用 WHERE 子句：

```
SELECT ROW_NUMBER() OVER (ORDER BY Products.ProductID) as 'rownbr', Products.ProductID
FROM Products
WHERE rownbr BETWEEN 10000 and 20000
ORDER BY Products.ProductID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:45:35.893

前 10,000 条记录，然后是其余记录；

```
SELECT TOP 10000 * FROM table ORDER BY Id
DECLARE @count int;
SET @count = (SELECT COUNT(*)  FROM table);
SELECT TOP (@count - 10000) * FROM table ORDER BY Id DESC; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:42:10.897

我假设您想从第 10,001 行中进行选择

要获得接下来的 1000 行，您可以执行以下操作：

```
SELECT TOP 1000 * FROM
TABLE
WHERE ID >= 10001 
```

或者只是在其中应用一个`AND`子句`WHERE`，它将返回第 10,001 - 15,001 行：

```
SELECT * FROM
TABLE
WHERE ID >= 10001 AND ID <= 15001 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T10:47:53.937

请参阅以下链接以获取解决方案-

[http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/6fdeb5f0-b705-4e40-a98b-6dd25539e92d](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/6fdeb5f0-b705-4e40-a98b-6dd25539e92d)

# dynamic - VHDL - 动态 std_logic_vector 大小

> ID：15969179
> 
> 赞同：2
> 
> 时间：2013-04-12T10:37:12.913
> 
> 标签：dynamic, vector, logic, std, vhdl

VHDL中有没有一种方法可以声明一个`std_logic_vector`它的大小根据输入的大小而不断变化？

我想做的是，输入`std_logic_vector`8 位的 a，然后有一个动态`std_logic_vector`信号来存储输入值。然后，下次再次接收到输入值时，我将值连接到动态信号的末尾，依此类推。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:16:56.053

您正在寻找的行为是不可能的。的大小`std_logic_vector`必须在编译时知道。因为 VHDL 用于描述硬件，所以`std_logic_vector`具有动态大小的 a 将对应于动态硬件（例如，在运行时实例化更多的寄存器）。这是不可能的。

你所描述的听起来像一个移位寄存器。您可以定义 a`std_logic_vector(MAX_LEN-1 downto 0)`然后在收到新值时将每个字节移动到更高阶的字节位置。

# sql - 如何使用 SQL 计算 Access DB 中的夜班

> ID：15969181
> 
> 赞同：0
> 
> 时间：2013-04-12T10:37:14.520
> 
> 标签：sql, ms-access

我有一个包含 Inbounddatum1、Inbounddatum2、Timeinterval 字段的表，我想根据班次计算间隔摘要，如下所示。由于夜班从晚上 10:00 开始，到早上 6:00 结束，我找不到在查询中显示它的正确方法。你能帮忙查询一下吗？提前致谢。

```
Inbounddatum1          Inbounddatum2         Timeinterval 
----------             -------------          ---------         
26.02.2013 05:56:50    26.02.2013 05:57:02   00:00:12
26.02.2013 06:04:44    26.02.2013 06:05:36   00:00:52 
```

Sql 代码：

```
SELECT 
Int(Inbounddatum1) AS DATUM,
Format(SUM(IIf((DatePart('h',Inbounddatum2)>5 And DatePart('h',Inbounddatum2)<14),Timeinterval,0)),"hh:nn:ss") AS FRUHLEERZEIT, 
Format(SUM(IIf((DatePart('h',Inbounddatum2)>13 And DatePart('h',Inbounddatum2)<22),Timeinterval,0)),"hh:nn:ss") AS SPATLEERZEIT, 
Format(SUM(IIf((DatePart('h',Inbounddatum2)>24 And DatePart('h',Inbounddatum2)<6),Timeinterval,0)),"hh:nn:ss") AS NACHTLEERZEIT,
Format(Sum(Timeinterval),"hh:nn:ss") AS GESAMTLEERZEIT INTO LEERZEIT
FROM SUBINBINDOLEER
GROUP BY Int(Inbounddatum1); 
```

结果：

```
 DATUM      FRUHLEERZEIT  SPATLEERZEIT   NACHTLEERZEIT  GESAMTLEERZEIT
 ---------  ------------  -----------   --------------  --------------
 26.02.2013 00:00:52                     00:00:12 
```

# android - 如果我按住屏幕，我会更改活动，我可以在第二个活动中获得 action_up 的动作事件吗？

> ID：15969186
> 
> 赞同：0
> 
> 时间：2013-04-12T10:37:24.710
> 
> 标签：android, touch, surfaceview, touch-event, motionevent

我有一个应用程序，我有一个视频播放器，里面有视频。如果我将手指放在屏幕上超过 0.4 秒，它会完成此活动，启动记录器活动，并自动开始记录。我的问题是：当我将手指从屏幕上移开时，我可以让第二个活动识别出来，这样会停止录制吗？

当我按住屏幕时调用它：

```
 Intent i = new Intent(VideoPlayerActivity.this, VideoRecorderActivity.class);

                    Bundle extras = new Bundle();
                    extras.putInt("mode", VideoRecorderModes.SEND_ALL_MODE);
                    extras.putInt("index", index);
                    extras.putInt("touches", 2);
                    i.putExtras(extras);
                    i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    i.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);

                    mPreview.getHolder().removeCallback(VideoPlayerActivity.this);
                    mPreview = null;                        
                    startActivity(i);
                    VideoPlayerActivity.this.finish(); 
```

这在我的第二个活动中调用，在相机准备好后：

```
 touches = getIntent().getExtras().getInt("touches");
    if (touches == 1) {
        mySurfaceView.setPressed(true);
        recordButton.setEnabled(false);
        okButton.setEnabled(false);

        recordButton.setImageResource(R.drawable.shutter_pressed);

        startTime = System.currentTimeMillis();
        timer = new Timer();
        timer.schedule(new TimerDisplayTask(), 0, 500);

        startRecording();
        touches = 0;
        System.out.println("----------------here----------");
    } 
```

这是第二个活动的表面视图的 SurfaceView onTouch 方法：

```
mySurfaceView.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            Log.i(TAG, "event : " + event.getAction() + "||is?: " + isRecording);
            Log.i(TAG, "touches:" + touches);
            switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                //DO NOTHING
                break;
            case MotionEvent.ACTION_UP:
                if (touches == 1 && isRecording) {
                    Log.i(TAG, "touch up");
                    timer.cancel();
                    timer.purge();
                    if (isRecording) {
                        mySurfaceView.setEnabled(false);
                        Log.i("VideoRecorder blabla", "touche enabled record, ok ,surface: " + recordButton.isEnabled() + "| " + okButton.isEnabled() + "|" + mySurfaceView.isEnabled());
                        stopRecording();
                        recordButton.setImageResource(R.drawable.shutter);
                        touches = 0;
                    }
                } 
                break;
            }
            return false;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:50:36.530

我对这个答案做了一些研究，因为我自己也遇到了这个问题。

不幸的是，在它正在观看的活动中出现 ACTION_DOWN 事件之前，onTouchEvent 似乎不会触发（这仅来自观察和测试，如果我错了，请告诉我）。所以我相信你想做的事情不可能用你想走的路线。

我还没有测试过，但是如果您使用相同的活动并换出不同的片段，我相信 onTouchEvent 不会被重置，因此这种方法可能是解决您问题的可能方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T14:01:01.450

我实际上设法使用 Fragments 来做到这一点，使用 FragmentManager 作为主要活动，并将 onTouchListener 实现到 Activity 中，然后将我需要的命令传递给该活动的两个片段；

```
@Override
public boolean onTouch(View v, MotionEvent event) {
    if (Constants.gestureEnabled) {
        switch (event.getAction()) {

        case MotionEvent.ACTION_DOWN:
            Log.i(TAG, "current fragment: " + currentFragment);
            if (currentFragment.toString().contains("VideoPlayerFragment")) {
                if (currentFragment instanceof VideoPlayerFragment) {
                    ((VideoPlayerFragment) currentFragment).onActionDown(event.getX());
                }
            } else if (currentFragment.toString().contains("VideoRecorderFragment")) {
                if (currentFragment instanceof VideoRecorderFragment) {
                    ((VideoRecorderFragment) currentFragment).onActionDown();
                }
            }
            break;
        case MotionEvent.ACTION_UP:
            if (currentFragment.toString().contains("VideoPlayerFragment")) {
                if (currentFragment instanceof VideoPlayerFragment) {
                    ((VideoPlayerFragment) currentFragment).onActionUp();
                }
            } else if (currentFragment.toString().contains("VideoRecorderFragment")) {
                if (currentFragment instanceof VideoRecorderFragment) {
                    ((VideoRecorderFragment) currentFragment).onActionUp();
                }
            }
            break;
        default:
            break;
        }
    }
    return gDetector.onTouchEvent(event);
} 
```

# c# - 如何在 Windows 窗体中从数据库中检索和显示数据？

> ID：15969189
> 
> 赞同：0
> 
> 时间：2013-04-12T10:37:41.573
> 
> 标签：c#, winforms

我试图通过基于特定电子邮件选择记录来在我的 Windows 窗体上显示数据库内容。

我正在使用以下代码，但它没有检索它

```
private void editrecordbutton_Click(object sender, EventArgs e)
{
    MyOleDbConnection.Open();
    string query = string.Format("select Email from login where Email='{0}'", editrecordtextBox.Text);
    OleDbCommand vcom1 = new OleDbCommand(query, MyOleDbConnection.vcon);
    OleDbDataReader reader = vcom1.ExecuteReader();
    //int check = vcom1.ExecuteNonQuery();
    string email = (string)reader["Email"];
    if (email == editrecordtextBox.Text)
    {
        if (editrecordtextBox.Text != string.Empty)
        {
            EmailReturn = editrecordtextBox.Text;
            FinalEdit er = new FinalEdit();
            this.Close();
            er.Show();
            MyOleDbConnection.Close();
        }
        else
        {
            MessageBox.Show("No record selected");
        }
    }
    else
    {
        MessageBox.Show("Invalid Email-Id");
    }
    MyOleDbConnection.Close();
} 
```

请帮助我了解它有什么问题，以及我是否以正确的方式看待这种方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:42:38.777

有`OleDbDataReader`一个方法`Read`。`Read`只要有可用数据，就会返回 true。

通常你会像这样使用它：

```
while(reader.Read())
{
    // work with the current row of data    
} 
```

由于您从不调用`Read`，因此您不会检索任何数据。您需要至少调用一次 Read 以将其移至查询返回的第一行数据。

您的代码的另一个重要问题与[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)有关。您正在手动创建非常危险的查询字符串。您确实需要切换到参数化查询。这是一篇很好的博客文章，解释了如何使用它们：[给我参数化 SQL，或者给我死](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)

# jquery - 响应式布局。同位素容器高度和其他过滤不一致

> ID：15969193
> 
> 赞同：0
> 
> 时间：2013-04-12T10:37:54.227
> 
> 标签：jquery, jquery-isotope

我想知道我的同位素元素容器是怎么回事。我尝试使用同位素优秀脚本（[http://isotope.metafizzy.co/docs/filtering.html](http://isotope.metafizzy.co/docs/filtering.html)）实现布局。

这是我的html

```
<nav id="citta">
<ul>
<li><a href="#" data-filters="*">All cities</a></li> 
                    <li><a href="#" data-filters=".rm">Rome</a>    </li> 
                    <li><a href="#" data-filters=".to">Torino</a></li> 
                    <li><a href="#" data-filters=".vr">Verona</a></li> 

    </ul>
    </nav>

<div id="elenco">

    <article class="rm">
        <span><a href="/content-Details" class="detail" data-fancybox-type="iframe"><img src="/images/image.jpg" alt="caption"/></a></span>
        <h3>Content example <strong>****</strong></h3>
        <span id="localita">Rome - rm</span>
        <p>Cras sed ante. Phasellus in massa. Curabitur dolor eros, gravida et, hendrerit ac, cursus non, massa. Aliquam lorem. In hac habitasse platea dictumst. Cras eu mauris. Quisque lacus. Donec ipsum. Nullam vitae sem at nunc pharetra ultricies. Vivamus elit eros, ullamcorper a, adipiscing sit amet, porttitor ut, nibh. Maecenas adipiscing mollis massa. Nunc ut dui eget nulla venenatis aliquet. Sed luctus posuere justo. Cras vehicula varius turpis. Vivamus eros metus, tristique sit amet, molestie dignissim, malesuada et, urna.</p>
    </article>  
    </div>
</section> 
```

这是我的jQuery

```
$(window).load(function(){
var $container = $('#elenco')
// initialize Isotope
    $container.isotope({
        // options...
        itemSelector : 'article',
        resizable: false, // disable normal resizing
        layoutMode : 'fitRows',
        animationEngine : 'best-available',

        // set columnWidth to a percentage of container width
        masonry: { columnWidth: $container.width() / 5 }
    });

    // update columnWidth on window resize
    $(window).smartresize(function(){
        $container.isotope({
        // update columnWidth to a percentage of container width
        masonry: { columnWidth: $container.width() / 5 }
        });
    });
    $('#citta a').click(function(){
        var selector = $(this).attr('data-filter');
        $container.isotope({ filter: selector });
        return false;
    });
    }); 
```

每当加载页面时，所有元素都会闪烁一会儿，然后由于容器高度，它们将无法查看……页面位于此地址…… [http://bit.ly/122qSk5](http://bit.ly/122qSk5)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:43:24.087

你试过吗

```
$('window').resize(function() {
    $container.isotope( 'reloadItems' )
}); 
```

或者

```
$('window').resize(function() {
    $container.isotope( 'reLayout' )
}); 
```

?

# c - 函数 getenv() 总是返回 null

> ID：15969195
> 
> 赞同：4
> 
> 时间：2013-04-12T10:37:54.913
> 
> 标签：c

我的程序

```
int main(void){
printf("Log file location : %s\n", getenv("LOG_FILE"));
return 0;
} 
```

总是打印空值。

但我已经设置了环境

/etc/nagios/.profile 文件，其中我的用户是“nagios”，通过**export LOG_FILE=/root/log**

当我在终端中执行**“env”**命令时，我也能看到同样的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T10:46:45.243

`getenv`如果您忘记写入`#include <stdlib.h>`文件的标题，函数会显示非常有趣的结果。

例如，代码：

```
#include <stdio.h>
#include <stdlib.h>

int main(void){
  printf("Log file location : %s\n", getenv("LOG_FILE"));
  return 0;
} 
```

效果很好：

```
LOG_FILE="log" ./a.out 
Log file location : log 
```

但是当我注释掉第二行时，我得到：

```
LOG_FILE="log" ./a.out 
Segmentation fault (core dumped) 
```

# clojure - 为什么 Clojure/REPL 将相同数字的浮点表示和整数表示不同？

> ID：15969202
> 
> 赞同：4
> 
> 时间：2013-04-12T10:38:09.997
> 
> 标签：clojure

在 Clojure 中，我写了一个简单的函数，一直调试到最后才实现。

```
(= 3 3) 
```

是`true`

但

```
(= 3.0 3) 
```

是`false`

为什么？

我知道浮点运算存在问题，不应该直接比较两个浮点值。

即使在 Java 中，3.0 和 3 也将是相同的，可能还有很多其他语言。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T11:55:41.523

它们不是同一类型。

注意 java 是如何`equal`返回 false 的：

```
> (.equals 3.0 3)
false 
```

或考虑以下 java 程序：

```
 public static void main(String []args){
   Integer i = 1000;
   System.out.println(i.equals(1000.0));
   System.out.println(i==1000.0);
 } 
```

**输出：**

> 假
> 真

* * *

[`=`](http://clojuredocs.org/clojure_core/clojure.core/=)和[`==`](http://clojuredocs.org/clojure_core/clojure.core/==)函数有区别

> =
> 
> 平等。如果 x 等于 y，则返回 true，否则返回 false。与 Java x.equals(y) 相同...

所以如果你想比较数字的值，使用`==`

> ==
> 
> 如果 nums 都具有等效值（与类型无关），则返回非 nil，否则返回 false

# html - 在 Canvas 中嵌入 HTML5 控件？

> ID：15969207
> 
> 赞同：-1
> 
> 时间：2013-04-12T10:38:34.993
> 
> 标签：html, canvas

我正在开发一个非常丰富和复杂的 Web UI，它只能在 HTML5 Canvas 控件中完全实现。但是，有一些“标准”HTML 控件我想以某种方式嵌入在 Canvas 中呈现的 UI 中。

例如，我希望能够在 Canvas 中嵌入 Google 地图。可以想象，我还想嵌入许多其他控件类型。

这种嵌入是否可能？我是 HTML5 新手，所以我不确定是否有某种方法可以将标准控件呈现到屏幕外缓冲区，然后将该缓冲区作为图像爆破到 Canvas 中。

这有可能吗？

谢谢，

菲利克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:41:30.753

比在屏幕外渲染 HTML 更简单的解决方案是在画布上的 div 中简单地显示一些**HTML**。

我对所有类型的 UI 都这样做，尤其是输入，没有任何问题。只需为要在画布上显示的 HTML 元素提供一个固定位置和一个 z-index，并在您希望它们可见时将它们附加到 DOM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:05:53.293

试试 google canvas 控件库这些搜索词，看看该库是否符合您的需求，而不是进行大量返工。

# c# - 在 asp.net 项目中使用 jar

> ID：15969210
> 
> 赞同：1
> 
> 时间：2013-04-12T10:38:36.843
> 
> 标签：c#, asp.net, .net, jar

我有一个问题，我想在 asp.net 项目中使用 jar。

我的代码：

```
 System.Diagnostics.Process process1 = new System.Diagnostics.Process();

        process1.StartInfo.WorkingDirectory = Request.MapPath("/");

        process1.StartInfo.FileName = Request.MapPath("kokBul.jar");

        process1.Start(); 
```

错误：

发生Java异常

请帮忙

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:22:45.443

> 错误：
> 
> 发生Java异常

表示 JAR 文件中有错误尝试在项目外部打开 jar 如果它在项目外部打开，则它的调用方式一定有错误

编辑 1 这篇文章可能会帮助你[在 asp.net 中执行 jar](http://forums.asp.net/t/1162909.aspx/1)

编辑 2 尝试`Class-path:`从文件中删除该行并重`Meta-inf` `MANIFEST.MF`试，如果这不起作用，请删除整个 meta-inf 文件

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T12:25:33.860

好的。

我解决了问题。

我忘了添加使用的 jar 库

我的代码：

```
 System.Diagnostics.Process process1 = new System.Diagnostics.Process();

    process1.StartInfo.WorkingDirectory = Request.MapPath("/");

    process1.StartInfo.FileName = Request.MapPath("kokBul.jar");

    process1.Start(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-12T14:19:54.040

您不能直接在 .Net 中使用 JAR 文件。

它必须转换成 DLL，您可以使用 IKVM.NET。

你可以运行：

> 运行 ikvmc -target:library mylib.jar

创建 mylib.dll。

[IKVM：在您的 .Net 应用程序中使用 Java 库](http://www.ikvm.net/uses.html#Use+Java+libraries+in+your+.NET+applications)

# python - Python 异步和 CPU 密集型任务？

> ID：15969213
> 
> 赞同：16
> 
> 时间：2013-04-12T10:38:47.273
> 
> 标签：python, asynchronous, flask, gevent

我最近一直在使用烧瓶在 python 中做一个宠物项目。它是一个简单的 pastebin，带有 pygments 的服务器端语法高亮支持。因为这是一项代价高昂的任务，所以我将语法突出显示委托给 celery 任务队列，并在请求处理程序中等待它完成。不用说，这只不过是减轻了另一个工作人员的 CPU 使用率，因为等待结果仍然会锁定与 Web 服务器的连接。尽管我的直觉告诉我要避免像瘟疫那样过早的优化，但我仍然忍不住研究异步。

**异步**

如果最近一直在关注 Python Web 开发，那么您肯定已经看到异步无处不在。async 所做的是带回协作多任务，这意味着每个“线程”决定何时何地让步给另一个。这种非抢占式进程比操作系统线程更有效，但仍然有它的缺点。目前似乎有两种主要方法：

*   事件/回调风格的多任务处理
*   协程

第一个通过在事件循环中执行的松散耦合组件提供并发性。尽管这在竞争条件方面更安全并提供了更高的一致性，但与抢先式多任务处理相比，它的直观性和编码难度要小得多。

另一种是更传统的解决方案，更接近线程编程风格，程序员只需手动切换上下文。虽然更容易出现竞争条件和死锁，但它提供了一个简单的解决方案。

目前大多数异步工作都是在所谓的**IO-bound**任务上完成的，即阻塞等待输入或输出的任务。这通常是通过使用可以调用的轮询和基于超时的函数来完成的，如果它们返回负数，则可以切换上下文。

尽管有这个名字，但这也可以应用于**CPU 密集型**任务，可以委托给另一个工作人员（线程、进程等），然后非阻塞地等待屈服。理想情况下，这些任务将以异步友好的方式编写，但实际上这意味着将代码分成足够小的块以防止阻塞，最好不要在每一行代码之后分散上下文切换。这对于现有的同步库来说尤其不方便。

* * *

由于方便，我决定使用 gevent 进行异步工作，并想知道如何在异步环境中处理 CPU 密集型任务（使用期货、芹菜等？）。

如何将异步执行模型（在本例中为 gevent）与烧瓶等传统 Web 框架一起使用？python（期货，任务队列）中这些问题的一些普遍同意的解决方案是什么？

**编辑：**更具体地说 - 如何在烧瓶中使用 gevent 以及如何在这种情况下处理 CPU 密集型任务？

**EDIT2：**考虑到 Python 如何具有阻止线程代码最佳执行的 GIL，至少在我的情况下，这只留下了多处理选项。这意味着要么使用*concurrent.futures* ，要么使用其他一些处理处理的外部服务（甚至可以为与语言无关的东西打开大门）。在这种情况下，gevent（**即**芹菜）的一些流行或经常使用的解决方案是什么？- 最佳实践

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T19:49:23.630

执行以下操作将 cpu 密集型任务分成异步线程应该是线程安全的：

```
from threading import Thread

def send_async_email(msg):
    mail.send(msg)

def send_email(subject, sender, recipients, text_body, html_body):
    msg = Message(subject, sender = sender, recipients = recipients)
    msg.body = text_body
    msg.html = html_body
    thr = Thread(target = send_async_email, args = [msg])
    thr.start() 
```

如果您需要更复杂的东西，那么也许 Flask-Celery 或带有“Pool”的多处理库可能对您有用。

我对 gevent 不太熟悉，尽管我无法想象您可能需要更多的复杂性或为什么。

我的意思是，如果您想获得大型世界网站的效率，那么我建议您构建 C++ 应用程序来完成您的 CPU 密集型工作，然后使用 Flask-celery 或 Pool 来运行该进程。（这就是 YouTube 在混合 C++ 和 Python 时所做的）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T11:58:53.657

简单地使用 ThreadPool 和 Queue 怎么样？然后，您可以以同步方式在单独的线程中处理您的东西，您根本不必担心阻塞。好吧，Python 首先不适合 CPU 密集型任务，因此您还应该考虑生成子进程。

# php - 用户名恢复代码未按预期工作

> ID：15969217
> 
> 赞同：1
> 
> 时间：2013-04-12T10:38:52.230
> 
> 标签：php, forms, codeigniter, validation

我正在为我工​​作的公司开发一个网站。它需要用户注册并登录。所有数据都存储在 SQL 数据库中。我正在尝试添加一个“丢失的用户名”表单，以便通过电子邮件恢复用户名。现在......我不是编码员。我只是一个相当有天赋的代码浏览器。我已经成功完成了他们要求的所有事情，除了这个，并且不能完全弄清楚为什么它不起作用。我想是时候寻求一些帮助了。

这是我的控制器的代码：

```
 function forgot_pass(){

          $data['page_title']=" Forgot Password ";
          $data['item']="Password";

          // initializing db keys
          $data['table_name'] ="physicians";
          $data['primary_key_name']="physician_id";

           //BOF Edit physician
           if( isset( $_REQUEST['physician_forgot_pass'] ) ){

              if ($this->form_validation->run('physician_forgot_pass'))
              {
                $physician_row=$this->model_site->check_physcian_retrive_password( $_REQUEST['username'],  encode_decode($_REQUEST['email'],'encode')  );
                //echo "<pre />"; print_r($physician_row); die;
                if($physician_row){

                    $physician_exist=1;

                    if($physician_row['approved']==1){ 

                       //Generate new Randmo password
                       $this->load->helper( 'get_random_password' );
                       $new_password=get_random_password(); //echo $new_password; die;

                       $update_data=array(
                                        'password'   => md5($new_password)
                                      );
                       $this->model_site->update_table('physicians', $update_data, 'username', $_REQUEST['username']  );

                       $this->load->helper( 'email_send' );

                       //GET SENDER EMAIL ADDRESS
                       $data['email_data']=$this->model_cms->get_single_record( 'email', 'email_id', 1 );
                       //echo "<pre />"; print_r($data['email_data']); die;

                       //Sending Mail To Physician
                       $physician_email = encode_decode($physician_row['email'],'decode');

                       $data['physician_email_msg']="Your New Password is ".$new_password;
                       $data['email_sent']=email_send( $data['email_data']['email'], $data['email_data']['email_name'], $physician_email  , "Retrive Password", $data['physician_email_msg']);
                       if($data['email_sent']){
                              $data['status']=1;
                              $data['status_message']="Your password has been sent to your mail at ".$physician_email;
                              $data['notification']=  array(
                                                        "notify_type"  => "notify_site_success",
                                                        "notify_message"   => $data['status_message']
                                                     );

                              //insert to audit log table
                              $audit_log_details="Physician <b>".encode_decode($physician_row['name'],'decode')."</b> ( Username : <b>".$physician_row['username']."</b> ) requested for retrieving lost passwords. A new password was sent to Physician. Email Address of the Physician is  <i>".$physician_email."</i> . ";
                              $audit_log_id = $this->model_cms->add_audit_log_record( $physician_row['physician_id'] , $physician_row['username'] , 'physician', "Retrieving lost passwords request ", $audit_log_details, time() );

                              $data['nbc_email_msg']=$audit_log_details."Here is the email below \n Your New Password is ".$new_password;
                              $data['email_sent']=email_send( $data['email_data']['email'], $data['email_data']['email_name'], $data['email_data']['email'], "Retrive Password", $data['nbc_email_msg']);
                       }
                       else {
                          $data['status']=0;
                          $data['status_message']="Error in sending mail to National Biological Corporation. Please try again later";
                          $data['notification']=  array(
                                                    "notify_type"  => "notify_site_error",
                                                    "notify_message"   => $data['status_message']
                                                 );
                       }

                    }
                    else {
                         $data['status']=0;
                         $data['status_message']="Your account is not approved yet. you will be able to request for retrive password after your account is approved.";
                         $data['notification']=  array(
                                                    "notify_type"  => "notify_site_error",
                                                    "notify_message"   => $data['status_message']
                                                 );
                    }
                }
                else {
                         $data['status']=0;
                         $data['status_message']="Sorry! Could not found physcian with this username and email.";
                         $data['notification']=  array(
                                                    "notify_type"  => "notify_site_error",
                                                    "notify_message"   => $data['status_message']
                                                 );
                }
              }
            }
           //EOF Edit physician

          $this->load->view('site/view_header',$data);
          $this->load->view('site/view_left_panel',$data);
          $this->load->view('site/view_physician_forgot_password',$data);
          $this->load->view('site/view_footer');
    }

    function forgot_userid(){

          $data['page_title']=" Forgot Username ";
          $data['item']="Username";

          // initializing db keys
          $data['table_name'] ="physicians";
          $data['primary_key_name']="physician_id";

           //BOF Edit physician
           if( isset( $_REQUEST['physician_forgot_userid'] ) ){

              if ($this->form_validation->run('physician_forgot_userid'))
              {
                $physician_row=$this->model_site->check_physician_get_userid( $_REQUEST['dea_number'],  encode_decode($_REQUEST['email'],'encode')  );
                //echo "<pre />"; print_r($physician_row); die;
                if($physician_row){

                    $physician_exist=1;

                    if($physician_row['approved']==1){ 

                        $this->load->helper( 'email_send' );

                       //GET SENDER EMAIL ADDRESS
                       $data['email_data']=$this->model_cms->get_single_record( 'email', 'email_id', 1 );
                       //echo "<pre />"; print_r($data['email_data']); die;

                       //Sending Mail To Physician
                       $physician_email = encode_decode($physician_row['email'],'decode');

                       $data['physician_email_msg']="According to our records, your registered username is ".$physician_row['username'];
                       $data['email_sent']=email_send( $data['email_data']['email'], $data['email_data']['email_name'], $physician_email  , "Your requested username reminder from phototherapydoctor.com", $data['physician_email_msg']);
                       if($data['email_sent']){
                              $data['status']=1;
                              $data['status_message']="Your username has been sent to your mail at ".$physician_email;
                              $data['notification']=  array(
                                                        "notify_type"  => "notify_site_success",
                                                        "notify_message"   => $data['status_message']
                                                     );

                              //insert to audit log table
                              $audit_log_details="Physician <b>".encode_decode($physician_row['name'],'decode')."</b> ( Username : <b>".$physician_row['username']."</b> ) requested for retrieving lost passwords. A new password was sent to Physician. Email Address of the Physician is  <i>".$physician_email."</i> . ";
                              $audit_log_id = $this->model_cms->add_audit_log_record( $physician_row['physician_id'] , $physician_row['username'] , 'physician', "Retrieving lost passwords request ", $audit_log_details, time() );

                              $data['nbc_email_msg']=$audit_log_details."Here is the email below \n Your New Password is ".$physician_row['username'];
                              $data['email_sent']=email_send( $data['email_data']['email'], $data['email_data']['email_name'], $data['email_data']['email'], "Retrive Password", $data['nbc_email_msg']);
                       }
                       else {
                          $data['status']=0;
                          $data['status_message']="Error in sending mail to National Biological Corporation. Please try again later";
                          $data['notification']=  array(
                                                    "notify_type"  => "notify_site_error",
                                                    "notify_message"   => $data['status_message']
                                                 );
                       }

                    }
                    else {
                         $data['status']=0;
                         $data['status_message']="Your account is not approved yet. You will be able to request username after your account is approved.";
                         $data['notification']=  array(
                                                    "notify_type"  => "notify_site_error",
                                                    "notify_message"   => $data['status_message']
                                                 );
                    }
                }
                else {
                         $data['status']=0;
                         $data['status_message']="Sorry! We could not find a physician with this DEA number and email.";
                         $data['notification']=  array(
                                                    "notify_type"  => "notify_site_error",
                                                    "notify_message"   => $data['status_message']
                                                 );
                }
              }
            }
           //EOF Edit physician

          $this->load->view('site/view_header',$data);
          $this->load->view('site/view_left_panel',$data);
          $this->load->view('site/view_physician_forgot_userid',$data);
          $this->load->view('site/view_footer');
    } 
```

这是我的模型中的块......：

```
 function check_physician_get_userid( $dea_number, $email ) {  //check if physcian exist with this dea number and password

    $query = $this->db->get_where( "physicians", array( "dea_number" => $dea_number , "email" => $email ) ) ;

    if( $query->num_rows() > 0 ) {
        return $query->row_array();
    }
    else {
        return false;
    }

} //end check_physcian_retrive_userid 
```

这是我的 form_validation 条目：

```
 'physician_forgot_userid'=> array(
                               array(
                                        'field' => 'dea_number',
                                        'label' => 'DEA Number',
                                        'rules' => 'required'
                                     ),
                               array(
                                        'field' => 'email',
                                        'label' => 'Email',
                                        'rules' => 'required|valid_email'
                                     )
                                ), 
```

最后，我的观点：

```
<div class="middle_panel">

 <p style="color:#424A8D;font-family:Verdana,Arial,Helvetica,sans-serif;font-size:15pt;font-weight:bold;">Retrieve Lost Username</p>

 <div class="physician_join_form">

    <?php echo  form_open('physician/forgot_userid'); ?>

       <div class="register_box_text">DEA Number : </div>
       <div class="register_box_field">
         <input name="dea_number" id="dea_number" value="<?php echo set_value('dea_number'); ?>" type="dea_number" size="20">
         <?php echo form_error('dea_number'); ?>
       </div>

       <div class="register_box_text">Email : </div>
       <div class="register_box_field">
         <input name="email" id="email" value="<?php echo set_value('email'); ?>" type="email" size="20">
         <?php echo form_error('email'); ?>
       </div>

       <div class="register_box_text" style="background:#F9F9F9;"> &nbsp; </div>
       <div class="register_box_field">
          <input type="submit" id="physician_forgot_userid" name="physician_forgot_userid" value="Submit">
       </div>

    <?php echo form_close(); ?>

 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:30:12.917

1.  在您看来：将 DEA 编号字段的输入类型更改为有效的输入类型：[但这不会解决您的问题。]

    > **类型="dea_number"**

2.  只需编写一个单独的函数和模型，从`physicians`表中获取所有详细信息。

**控制器：**在您当前的控制器内部。

```
 function fetch_details_ctrl($dea_number) {
           if(!empty($dea_number)) {
               $result = $this->model_cms->fetch_details_model($dea_number);
               print_r($result);
           }
           else
               echo 'Pls. provide a DEA NUMBER';
    } 
```

**型号：**内models/model_cms.php

```
 function fetch_details_model($dea_number) {
       $query = $this->db->get_where("physicians",array("dea_number"=>$dea_number));
       if( $query->num_rows() > 0 ) {
           return $query->row_array();
       }
       else {
           return false;
       }
    } 
```

像这样调用控制器函数：**http://{YOURSITE}.com/{CONTROLLER_NAME}/fetch_details_ctrl/[DEA_NUMBER]**
DEA_NUMBER 应该是用户将在恢复视图中提供的输入字段中输入的那个。
如果这产生了结果，则意味着问题不完全在于dea数。如果没有，可能有两个原因：
1\. 用户输入的 DEA 号码在数据库中不存在。
~~2.电子邮件地址加密存在一些问题，但您明确表示它可以正常工作[忘记密码]。但是我还没有看到那个代码，所以我仍然有这个疑问。~~

# spring-mvc - 如何使用 WebApplicationInitializer 初始化 dispatcherServlet？

> ID：15969223
> 
> 赞同：1
> 
> 时间：2013-04-12T10:39:22.077
> 
> 标签：spring-mvc, web, jetty, tomcat7

我已经使用 WebApplicationInitializer 搜索了一些用于 no-web.xml 配置的代码。

这些代码格式相同。

1.  创建根上下文
2.  创建 ContextLoaderListener
3.  将侦听器注册到 servlet

这是代码块

```
 @Override
public void onStartup(ServletContext servletContext) throws ServletException {
    registerListener(servletContext);
    registerDispatcherServlet(servletContext);
}

private void registerListener(ServletContext servletContext) {
    AnnotationConfigWebApplicationContext rootContext = createContext(DomainConfiguration.class);
    ContextLoaderListener contextLoaderListener = new ContextLoaderListener(rootContext);
    servletContext.addListener(contextLoaderListener);
    servletContext.addListener(new RequestContextListener());
}

private void registerDispatcherServlet(ServletContext servletContext) {
    AnnotationConfigWebApplicationContext dispatcherContext = createContext(WebMvcContexConfiguration.class);
    ServletRegistration.Dynamic dispatcher = servletContext.addServlet(DISPATCHER_SERVLET_NAME,
            new DispatcherServlet(dispatcherContext));
    dispatcher.setLoadOnStartup(1);
    dispatcher.addMapping("/");
}

private AnnotationConfigWebApplicationContext createContext(final Class<?>... annotatedClasses) {
    AnnotationConfigWebApplicationContext context = new AnnotationConfigWebApplicationContext();
    context.register(annotatedClasses);
    return context;
} 
```

但是，此代码不起作用。它无法在根上下文中找到上下文对象。所以，我改变了一些代码，它正在工作。

这是工作代码。

```
 private void registerListener(ServletContext servletContext) {
    AnnotationConfigWebApplicationContext rootContext = createContext(DomainConfiguration.class);
    ContextLoaderListener contextLoaderListener = new ContextLoaderListener(rootContext);
    // This is changed code!!
    contextLoaderListener.initWebApplicationContext(servletContext);
    servletContext.addListener(new RequestContextListener());
} 
```

这样对吗？我在 spring 帮助文档中看到了第一个代码。但它不适用于jetty 9。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T22:11:49.830

您使用的是哪个版本的 jetty-9？jetty-9.0.0.RC3 中修复了一个问题（参考：[https](https://bugs.eclipse.org/bugs/show_bug.cgi?id=400312) ://bugs.eclipse.org/bugs/show_bug.cgi?id= 400312），这意味着通过这种代码添加的任何侦听器都会没有被调用。请尝试使用 jetty-9.0.1 版本的原始代码。如果它不起作用，请在此处提出错误并在码头问题跟踪器中包含代码示例：[https ://bugs.eclipse.org/bugs/enter_bug.cgi?product=Jetty](https://bugs.eclipse.org/bugs/enter_bug.cgi?product=Jetty)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:17:43.477

这是码头的问题。Jetty 无法使用 ContextLoaderListener 初始化 rootContext。

我不知道原因。但是tomcat7现在正在工作。

# codeigniter - datamapper：通过关系字段获取对象顺序

> ID：15969226
> 
> 赞同：0
> 
> 时间：2013-04-12T10:39:45.957
> 
> 标签：codeigniter, codeigniter-datamapper

我将 Codeigniter 与 datamapper orm 一起使用并且有问题

这是我的模型：

> 邮寄 -> 有很多行
> 
> 行 -> 有很多单元格
> 
> cell -> 有很多版本
> 
> version 有一个 created 和一个 updated 字段。

我想通过创建或更新的最后一个版本更改来获取最后 10 个邮件订单。

我想这样做：

```
$versions = new Version(); 
```

现在通过创建或更新获取最近 10 个版本的顺序

并且由 mailing_id 区分，现在让所有邮件显示......像这样：？

```
foreach ($version as $v) 
{
$v->mailing->get();
} 
```

谢谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T19:39:05.737

是的，您可以`->get()`在循环中调用每个相关模型，但这会生成一个[*n+1 查询*场景](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-issue)，并且如果您要遍历大量版本行，则速度会很慢。

当您一步查询 s 时（使用幕后连接），您可以使用来获取加载数据的[`include_related`](http://datamapper.wanwizard.eu/pages/getadvanced.html#include_related)完整实例，如下所示：`Mailing``Version`

```
$versions = new Version;
$versions->order_by(...)->limit(...); // add your ordering and limiting as before
$versions->include_related('mailing', null, true, true);
// include related mailings, with of their fields and create instances, see
$versions->get();

foreach ($versions as $version) {
    // now the $version->mailing is a Mailing instance loaded with the related data
    print $version->mailing->id
} 
```

# android - JsonParsing 时活动崩溃

> ID：15969233
> 
> 赞同：0
> 
> 时间：2013-04-12T10:40:14.300
> 
> 标签：android, android-asynctask, currency

我正在尝试在单位转换器上制作应用程序。我已经完成了所有其他实现，但我无法获取货币的实时值。我找到了一种“JSON解析”的方法。我搜索它并创建了这个代码。

```
package com.example.unitconverter;

import java.io.IOException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;

public class HttpExample extends Activity{

Spinner S1,S2;
TextView tv;
EditText et;
Button abutton;
HttpClient client;
JSONObject json;

static final String URL = "http://rate-exchange.appspot.com/currency?from=";

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.currency);

    S1=(Spinner)findViewById(R.id.spinner1);
    S2=(Spinner)findViewById(R.id.spinner2);
    et=(EditText)findViewById(R.id.editText1);
    tv = (TextView) findViewById (R.id.textView1);
    abutton=(Button)findViewById(R.id.button1);
    client = new DefaultHttpClient();

    abutton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            new Read().execute("rate");

        }
    });

}

public JSONObject retrieve(String from,String to) throws ClientProtocolException,IOException,JSONException{

    StringBuilder url = new StringBuilder(URL);
    url.append(from + "&to=" + to);

    HttpGet get = new HttpGet(url.toString());
    HttpResponse r = client.execute(get);

    int status = r.getStatusLine().getStatusCode();
    if(status == 200){
        HttpEntity e = r.getEntity();
        String data = EntityUtils.toString(e);
        JSONArray timeline = new JSONArray(data);
        JSONObject last = timeline.getJSONObject(0);

        return last;

    }
    else{
        Toast.makeText(HttpExample.this, "error",Toast.LENGTH_SHORT).show();
        return null;

    }

}
public class Read extends AsyncTask<String,Integer,String>{

     @Override
        protected void onPreExecute() {
            Log.i("AsyncTask", "onPreExecute");
        }

    @Override
    protected String doInBackground(String... params) {
        // TODO Auto-generated method stub

        try {

            json = retrieve(S1.getSelectedItem().toString(),S2.getSelectedItem().toString());

            return json.getString(params[0]);
        } 
        catch (Exception e) {
            // TODO Auto-generated catch block
            Toast.makeText(HttpExample.this, "Exception", Toast.LENGTH_LONG).show();
            e.printStackTrace();
            return null;
        }

    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        Double F=Double.parseDouble(result);
        Double D = Double.parseDouble(et.getText().toString());
        String newstring = Double.toString(D*F);

        tv.setText(newstring);

    }
} 
```

}

xml 文件包含 2 个包含货币缩写的微调器、1 个 EditText、1 个 TextView 和 1 个按钮“Convert”。当我单击“转换”时，我收到一条消息“不幸的是，UnitConverter 停止工作”。

我是 android 新手，因此对错误了解不多，但我可以从 LogCat 中了解到 doInBackground() 函数存在一些问题。

请帮助，因为我提交此应用程序的最后日期非常接近。

提前致谢。

更新：

```
04-12 16:26:36.494: E/AndroidRuntime(1853): FATAL EXCEPTION: main
04-12 16:26:36.494: E/AndroidRuntime(1853): java.lang.NullPointerException
04-12 16:26:36.494: E/AndroidRuntime(1853):     at     java.lang.StringToReal.parseDouble(StringToReal.java:244)
04-12 16:26:36.494: E/AndroidRuntime(1853):     at     java.lang.Double.parseDouble(Double.java:295)
04-12 16:26:36.494: E/AndroidRuntime(1853):     at com.example.unitconverter.HttpExample$Read.onPostExecute(HttpExample.java:119)
04-12 16:26:36.494: E/AndroidRuntime(1853):     at com.example.unitconverter.HttpExample$Read.onPostExecute(HttpExample.java:1)
04-12 16:26:36.494: E/AndroidRuntime(1853):     at android.os.AsyncTask.finish(AsyncTask.java:631)
04-12 16:26:36.494: E/AndroidRuntime(1853):     at android.os.AsyncTask.access$600(AsyncTask.java:177)
04-12 16:26:36.494: E/AndroidRuntime(1853):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
04-12 16:26:36.494: E/AndroidRuntime(1853):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-12 16:26:36.494: E/AndroidRuntime(1853):     at android.os.Looper.loop(Looper.java:137)
04-12 16:26:36.494: E/AndroidRuntime(1853):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-12 16:26:36.494: E/AndroidRuntime(1853):     at java.lang.reflect.Method.invokeNative(Native Method)
04-12 16:26:36.494: E/AndroidRuntime(1853):     at java.lang.reflect.Method.invoke(Method.java:511)
04-12 16:26:36.494: E/AndroidRuntime(1853):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-12 16:26:36.494: E/AndroidRuntime(1853):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-12 16:26:36.494: E/AndroidRuntime(1853):     at dalvik.system.NativeStart.main(Native Method) 
```

更新：

我得到了我的错误..我使用的是 JSONArray 而不是 JSONObject。

```
public JSONObject retrieve(String from,String to) throws    ClientProtocolException,IOException,JSONException{

    StringBuilder url = new StringBuilder(URL);
    url.append(from + "&to=" + to);

    HttpGet get = new HttpGet(url.toString());
    HttpResponse r = client.execute(get);

    int status = r.getStatusLine().getStatusCode();
    if(status == 200){
        HttpEntity e = r.getEntity();
        String data = EntityUtils.toString(e);
        JSONObject last = new JSONObject(data);     
        return last;

    }
    else{
        Toast.makeText(Currency.this, "Error!!!",Toast.LENGTH_SHORT).show();
        return null;

    } 
```

谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:53:03.550

删除这个

```
 Toast.makeText(HttpExample.this, "Exception", Toast.LENGTH_LONG).show(); 
```

里面`doInBackgrond`。

由于`doInBackground`不在 UI 线程中运行，因此不允许您在那里执行 UI 操作。

所以把 Toast 放在 onPostExecute 或`runonUiThred`

# wpf - WPF TextBlock 多重绑定

> ID：15969234
> 
> 赞同：0
> 
> 时间：2013-04-12T10:40:14.767
> 
> 标签：wpf, textblock, multibinding

我想将 TextBlock 的 Text 属性绑定到某些元素和某些模型的属性。像这样的东西：

```
<TextBlock>
    <TextBlock.Text>
        <MultiBinding>
            <Binding ElementName="myElement1" Mode="OneWay" Path="Text" />
            <Binding ElementName="myElement2" Mode="OneWay" Path="Text" />
            <Binding Mode="OneWay" Path="Property1" />
            <Binding Mode="OneWay" Path="Property2" />
        </MultiBinding>
    </TextBlock.Text>
</TextBlock> 
```

TextBlock 有一个文本值，由 myElement1、myElement2 和 Property1、Property2 组合而成。没有问题。文本值生成成功。

这是我的问题：

我可以在没有代码的情况下将 TextBlock 的整个（组合）文本值绑定到另一个模型的属性，即 Property3 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:03:19.940

并非没有一些非常糟糕的黑客行为，这需要编写一些代码来设置附加属性和其他绑定。问题是任何绑定都有两个端点：目标和源。由于目标（设置绑定的位置）必须是 DependencyProperty，这意味着您的模型必须位于您尝试执行的绑定的源端。就设置值而言，这不是问题，因为 TwoWay 和 OneWayToSource 绑定可以很好地做到这一点。

您有一个更大的问题，因为值来自的原始位置 (TextBlock.Text) 已经分配了绑定，因此不能成为模型绑定的目标。接下来您可能想尝试使用另一个 UIElement 属性作为中介来获取 Text 值并将其推送到模型。为此，您需要再次将模型作为源，并将其他 UIElement 属性作为目标。但是同样的属性也需要成为绑定到您尝试提取的原始 Text 属性的目标，因此您再次陷入困境。

底线是你最好在你的模型和视图模型层中处理这个，而不是试图强迫你在 XAML 中设置的东西来驱动一切。

# r - 使用 R 中的竞争风险模型预测每种故障类型的可能性

> ID：15969240
> 
> 赞同：2
> 
> 时间：2013-04-12T10:40:38.180
> 
> 标签：r, statistics, survival-analysis

我希望在历史数据上运行一个竞争风险模型，并预测新数据集中每种类型的死亡在指定时期（假设一个时期）的可能性。到目前为止，我已经查看`comp.risk`了`timereg`package 和`crr`in `cmprsk`，但是在弄清楚如何使用他们的 predict 方法来返回这些可能性时遇到了麻烦。

使用`bmt`数据集（来自`timereg`包）并`comp.risk`作为示例，我想做类似的事情：

```
m <- comp.risk(Surv(time, cause>0)~platelet+age+tcell, data=bmt,
               bmt$cause, causeS=1, resample.iid=1)
ndata <- data.frame(platelet=c(1,0,0), age=c(0,1,0), tcell=c(0,0,1), 
                    start.time=c(1, 1, 1), end.time=c(2, 2, 2))
out <- predict(m, newdata=ndata) 
```

`t=1`理想情况下，这将预测和之间每种死亡类型的可能性`t=2`，但 predict 函数会返回其他类型的结果。

最后一行不起作用，因为模型不是使用 start/stop`Survival`对象类型构建的，并且`comp.risk`似乎没有采用左截断数据。为了说明，下面的模型语句包括开始时间返回错误*Error in `comp.risk(Surv(start.time, time, cause > 0) ~ platelet + age +` : only right censored data*。

```
m <- comp.risk(Surv(rep(0, nrow(bmt)), time, cause>0)~platelet+age+tcell, data=bmt,
               bmt$cause, causeS=1, resample.iid=1) 
```

# java - 从 Java 调用 SQL Server 2008 存储过程并将 POJO 映射到自定义数据库类型

> ID：15969241
> 
> 赞同：1
> 
> 时间：2013-04-12T10:40:39.027
> 
> 标签：java, sql-server-2008, jdbc, user-defined-types

我已经在 SQL Server 2008 中声明了一个 UDT（用户定义类型），比如 CustomType。我正在将此数据类型用作存储过程的 IN 参数。我想从 Java 类调用这个过程。为此，我做了以下工作：

创建了一个名为 CustomType 的类，它实现了 SQLData

```
public class CustomType implements SQLData {

String name ;
int year ;
String sql_type = "CustomType_t";

public String getSQLTypeName() throws SQLException {
return sql_type;
}

public void readSQL(SQLInput arg0, String type) throws SQLException {
sql_type = type;
name = arg0.readString() ;
year = arg0.readInt() ;

}

public void writeSQL(SQLOutput arg0) throws SQLException {
arg0.writeString(name) ;
arg0.writeInt(year) ;

}

} 
```

我的主要 Java 类如下所示：

```
public class Proc2Test {

public static void main(String[] args) {
msmsqlTest() ;
}

public static void msmsqlTest()
{

Connection con = null ;
CallableStatement cStatement = null ;
ResultSet rs = null ;
String url = "jdbc:sqlserver://localhost:1433;databaseName=testDB;username=abc;password=xyz";
String driver = "com.microsoft.sqlserver.jdbc.SQLServerDriver";
try
{
Class.forName(driver);
con = DriverManager.getConnection(url);
java.util.Map map = con.getTypeMap();
map.put("CustomType",
Class.forName("com..test.CustomType"));

con.setTypeMap(map);

cStatement = con.prepareCall("{call abc2(?,?)}") ;

CustomType x = new CustomType() ;

x.name = "ABC" ;
x.year = 20 ;

cStatement.setObject("para1", x, java.sql.Types.OTHER);
cStatement.registerOutParameter(2,Types.INTEGER) ;
rs = cStatement.executeQuery();
}
catch(Exception ex)
{
ex.printStackTrace() ;
}

}
} 
```

当我运行此代码时，出现以下异常：

```
com.microsoft.sqlserver.jdbc.SQLServerException: This operation is not supported.
at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(Unknown Source)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.NotImplemented(Unknown Source)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.setTypeMap(Unknown Source)
at com.mindcraft.test.Proc2Test.msmsqlTest(Proc2Test.java:97)
at com.mindcraft.test.Proc2Test.main(Proc2Test.java:22) 
```

此异常发生在 con.setTypeMap(map)

我的问题是如何调用输入参数为自定义数据库类型的 SQL Server 存储过程？如何使用 SQL Server 2008 的自定义数据库类型映射 POJO 并将其发送到存储过程？SQL Server 2008 JDBC驱动有没有实现`Connection.setTypeMap()`方法？

# grails - 应用程序起始页空白，但服务器正在运行

> ID：15969244
> 
> 赞同：0
> 
> 时间：2013-04-12T10:41:01.683
> 
> 标签：grails, localhost

所以，我是 grails 开发的新手，这是我的问题。

当我创建了一个 grails-application 并浏览到 localhost 时，我得到了这个：

浏览器（本地主机：8080 /test3）

页面（无法获取 /test3）

我做什么都没关系。有没有人遇到过这个问题？

这是服务器说它已启动并正在运行。

```
Created file test/unit/test3/HelloControllerTests.groovy
n156-p125:test3 bobby_falck$ grails run-app test3
| Server running. Browse to http://localhost:8080/test3 
```

问题是几天前它没有给我这个错误消息。:S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:08:14.410

好的，我认为这有助于我解决问题：

grails> -Dserver.port="someportnumber" 运行应用程序

:)

# c# - 如何将 managementobjectcollection 转换为 IEnumerable >?

> ID：15969245
> 
> 赞同：-4
> 
> 时间：2013-04-12T10:41:09.247
> 
> 标签：c#

如何将 managementobjectcollection 转换为`IEnumerable<IEnumerable<IPropertyData>>`propertydata 仅是名称和值的位置？

```
interface IPropertyData
{

     string Name { get; }
     object Value { get; }
}

class ManagementObjectInfo : IManagementInfo
{

    public IEnumerable<IEnumerable<IPropertyData>> Get(string query)
    {
        ManagementObjectSearcher searcher = new ManagementObjectSearcher(query);

        return  searcher.Get()  ;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:48:05.013

您不能只转换引用，但您可以相当轻松地使用 LINQ：

```
public IEnumerable<IEnumerable<IPropertyData>> Get(string query)
{
    var searcher = new ManagementObjectSearcher(query);
    var results = searcher.Get();
    return results.Cast<ManagementBaseObject>()
        .Select(item => item.Cast<PropertyData>()
                            .Select(x => (IPropertyData)
                                         new PropertyDataImpl(x.Name, x.Value));
} 
```

（您的界面`PropertyDataImpl`的简单实现在哪里。）`IPropertyData`

这样做的一个缺点：它不执行任何处置。您可能希望将结果具体化为列表或其他内容，以便您可以随时处理所有内容。

# cakephp - Cakephp2.3 html->自定义函数中的url

> ID：15969251
> 
> 赞同：0
> 
> 时间：2013-04-12T10:41:21.137
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我正在使用 Cakephp2.0 我创建了一个自定义函数

```
 <?php echo GenerateNavHTML($navarray);  ?>

<?php 

    function GenerateNavHTML($nav)
    { 

        if(!empty($nav)) {

              if(isset($nav[0]['parent'])) {
                     $parentid=$nav[0]['parent'];
              }else{
                  $parentid=1;
              }
             if($parentid==0) {
                 $html = '<ul style="display: block;" class="nav">';
             }else {
                 $html='<ul>';
             }
               foreach($nav as $page) {
                    $html.='<li>';    
                    $html .= '"'.$this->Html->url('Logout',array('controller'=>'users','action'=>'logout')).'"';

                    $html .= '</li>';
                }
                $html.='</ul>';
                return $html;
         }
    }

       ?> 
```

它给

> 致命错误：无法重新声明 GenerateNavHTML()

但是没有重新声明功能。

如果我写

```
<?php 

function GenerateNavHTML($nav)
{ 

    if(!empty($nav)) {

          if(isset($nav[0]['parent'])) {
                 $parentid=$nav[0]['parent'];
          }else{
              $parentid=1;
          }
         if($parentid==0) {
             $html = '<ul style="display: block;" class="nav">';
         }else {
             $html='<ul>';
         }
           foreach($nav as $page) {
                $html.='<li>';    
                $html .= '<a href=""></a>';

                $html .= '</li>';
            }
            $html.='</ul>';
            return $html;
     }
}

   ?> 
```

它工作正常

我想使用 cakephp 语法

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:53:13.097

在 MVC 中，这段代码应该是 Helper 的一部分，而不仅仅是一个独立的“函数”。

## 创建自己的助手

这听起来可能很难，但实际上并非如此。它也有很多优点；通过将代码移动到 Helper，它更易于重用和维护。

例如;

创建一个“导航”助手（当然，给它一个逻辑名称）；

应用程序/视图/Helper/NavigationHelper.php

```
class NavigationHelper extends AppHelper
{
    /**
     * Other helpers used by *this* helper
     * 
     * @var array
     */
    public $helpers = array(
        'Html',
    );

    /**
     * NOTE: In general, convention is to have
     *       functions/methods start with a lowercase
     *       only *Classes* should start with a capital
     * 
     * @param array $nav
     * 
     * @return string
     */
    public function generateNavHTML($nav)
    {
        $html = '';

        if (!empty($nav)) {

            if (isset($nav[0]['parent'])) {
                $parentid = $nav[0]['parent'];
            } else {
                $parentid = 1;
            }
            if ($parentid == 0) {
                $html = '<ul style="display: block;" class="nav">';
            } else {
                $html = '<ul>';
            }
            foreach ($nav as $page) {
                $html .= '<li>';
                $html .= '"' . $this->Html->url('Logout', array('controller' => 'users', 'action' => 'logout')) . '"';
                $html .= '</li>';
            }
            $html .= '</ul>';
        }

        // NOTE: moved this 'outside' of the 'if()'
        //       your function should always return something
        return $html;
    }

    /**
     * You can add other methods as well
     * For example, a 'Convenience' method to create a link to the Homepage
     *
     * Simply use it like this:
     * <code>
     * echo $this->Navigation->logoutLink();
     * </code>
     */
    public function logoutLink()
    {
        return $this->Html->link(__('Log out'), array(
                'controller' => 'users',
                'action' => 'logout',
                'confirm' => __('Are you sure you want to log out')
            ));
    }    } 
```

创建该文件后，您可以在*任何*视图或元素中使用它；

```
echo $this->Navigation->generateNavHTML($navarray); 
```

您甚至不必将它添加到控制器的“Helpers”数组中，因为 CakePHP 2.3 使用“自动加载”来为您执行此操作

如果您需要其他功能（与“导航”相关），您可以在 Helper 中添加一个“方法”，我添加了一个“logoutLink()”方法只是为了说明这一点

有关更多信息，请阅读本章[创建助手](http://book.cakephp.org/2.0/en/views/helpers.html#creating-helpers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:43:50.827

尝试这个：

```
<?php echo $this->GenerateNavHTML($navarray);  ?> 
```

并在所有安全之前声明该功能

# android - 数据库名称没有出现在文件资源管理器中 eclipse uding sqlite android

> ID：15969252
> 
> 赞同：0
> 
> 时间：2013-04-12T10:41:21.567
> 
> 标签：android, database, sqlite

这是我的代码，我的数据库没有显示在文件资源管理器中。我犯错了吗？有人可以解决吗？

我很抱歉，因为我只是 android 的初学者

```
package com.testmysqlite.database;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class MySqliteOpenHelper extends SQLiteOpenHelper {

private static String  dbName = "TestDatabase.db";
private static String tableName = "User";
private static String columnId = "Id";
private static String columnName = "Name";
private String sql = "create table "+tableName+"("+columnId+" integer,"+columnName+" text)";
private SQLiteDatabase sqliteDatabase = null;
public MySqliteOpenHelper(Context context) {
    super(context, dbName, null, 1);
    sqliteDatabase = getWritableDatabase();
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(sql);// TODO Auto-generated method stub

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:53:18.520

看看这个：[链接](https://stackoverflow.com/questions/2729438/how-do-i-create-a-database-in-android) [link2](http://developer.android.com/reference/android/database/sqlite/package-summary.html)

# ruby - 如何使用 Jenkins 和 watir webdriver 解决并行运行作业的错误？

> ID：15969253
> 
> 赞同：1
> 
> 时间：2013-04-12T10:41:22.457
> 
> 标签：ruby, jenkins, watir-webdriver, selenium-chromedriver

我在 Windows 上运行来自 Jenkins 的测试，当多个作业同时在不同的构建线程上运行时，当一次只执行一个时，测试工作正常。我正在使用 Watir 网络驱动程序。浏览器的创建是使用代码：

```
profile = Selenium::WebDriver::Chrome::Profile.new
browser = Watir::Browser.new :chrome, :profile => profile, :http_client=>client 
```

测试是用 Ruby 和 Cucumber 编写的，我使用标签在每个作业中运行测试的子集。测试是使用“执行 Windows 批处理命令”中的黄瓜执行的。在我的桌面上打开两个命令行实例并并行运行作业可以正常工作。

几个不同的错误似乎再次出现。一种是：

```
[0412/111507:ERROR:ipc_sync_channel.cc(378)] Canceling pending sends
[0412/111552:ERROR:proxy_launcher.cc(114)] WaitForInitialLoads failed.
[0412/111552:ERROR:proxy_launcher.cc(556)] Failed to ConnectToRunningBrowser
[0412/111552:ERROR:automation_proxy.cc(319)] Channel error in AutomationProxy.
[0412/111552:ERROR:ipc_sync_channel.cc(378)] Canceling pending sends
[0412/111552:ERROR:ipc_sync_channel.cc(378)] Canceling pending sends
Unable to either launch or connect to Chrome. Please check that ChromeDriver is up-to-date. Using Chrome binary at: C:\Users\steve\AppData\Local\Google\Chrome\Application\chrome.exe (Selenium::WebDriver::Error::UnknownError) 
```

另一个是

```
No connection could be made because the target machine actively refused it. - connect(2) (Errno::ECONNREFUSED) 
```

通过我的桌面上的命令行而不是通过 Jenkins 运行的示例运行是：

```
cucumber --tags @event_discounts ENVIRONMENT=beta 
```

和

```
cucumber --tags @WhiteList ENVIRONMENT=BETA 
```

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:47:41.183

解决方案是打开服务，打开 Jenkins 的属性，单击“登录”选项卡并选中“允许服务与桌面交互”，然后我通过`http://localhost:8080/safeRestart` 单击“是”重新启动 Jenkins，现在测试将正确并行运行。

不幸的是，我现在收到有关交互式服务检测的弹出窗口，但我可以将其移动到屏幕的角落并忽略它。

# c# - QuickGraph：周期检测

> ID：15969254
> 
> 赞同：2
> 
> 时间：2013-04-12T10:41:22.717
> 
> 标签：c#, graph, quickgraph

我正在开发一个应用程序，我需要从无向图检测循环。我在 c# 中实现了相同但速度很慢。我找到了 Quickgraph Sdk，但找不到任何实现或示例或文档相同的。

如果有人知道 quickgraph 的实施或演练，请告诉我，因为这对我来说非常紧迫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:50:27.587

I don't know quickgraph, but finding cycles in an undirected graph should be doable in O(n) by searching depth first and marking each visited node... if you explore a new edge to an already visited node you have a cycle in your graph.

# android - Android ObserveableScrollView 加载更多（加载问题）

> ID：15969260
> 
> 赞同：0
> 
> 时间：2013-04-12T10:41:39.893
> 
> 标签：android, scrollview, progressdialog

我正在从网站以 JSON 格式获取信息，并使用 AsynTask 将该信息显示到我的应用程序中。问题是在第一次我的进度对话框显示良好并在将内容加载到应用程序后隐藏。但是当我使用滚动视图加载更多时，进度对话框出现并在加载后立即隐藏，同时进度对话框再次打开而不隐藏，滚动视图在后台再加载一次数据。我只想加载一次每次使用 Scroll-View 加载更多数据后。进度对话框没有隐藏，它一直在运行我的应用程序。在这一点上我很震惊。

基本上我注意到我的滚动视图指示器在底部碰撞了两次，因为这个滚动视图触发了两次。我怎样才能停止它并在每次滚动后仅限制一次。

还有一件事要分享，在 Froyo 2.2 中一切都很好，而在 2.3 到 4.2 中却没有。请帮助我。提前致谢。

下面是我的代码。

```
package com.example.lmf;

import java.net.URLEncoder;
import org.json.JSONArray;
import org.json.JSONObject;

import com.example.lmf.ObservableScrollView.ScrollViewListener;

import android.app.Activity;
import android.app.Dialog;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.graphics.Color;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.MenuItem.OnMenuItemClickListener;
import android.view.View.OnClickListener;
import android.view.WindowManager;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.LinearLayout.LayoutParams;
import android.widget.Toast;

public class searchClassified extends Activity implements ScrollViewListener
{

    ObservableScrollView scrollView;
    ProgressDialog _progressDialog;
    int page_no = 1;
    String k = "";
    final static String URL = "http://www.lmf.com.pk/admin/json.php?YOUR URL OF JSON";
    final getInternetData obj = new getInternetData();
    public ImageLoader imageLoader = null;
    Context context = this;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.get_classified);
        getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN);
        scrollView = (ObservableScrollView) findViewById(R.id.my_scroll);
        scrollView.setScrollViewListener(this);
        imageLoader = new ImageLoader(this);
        String s = getIntent().getExtras().getString("query")!= "" ? getIntent().getExtras().getString("query") : "";
        EditText et = (EditText) findViewById(R.id.query);
        et.setText(s);
        k = "all="+URLEncoder.encode(s);
        //showProgress(context);
        new getBackgroundData().execute();

    }

    public void onScrollEnded(ObservableScrollView scrollView, int x, int y,
            int oldx, int oldy) {
        // TODO Auto-generated method stub
        page_no = page_no + 1;
        k = k+"&page_no="+page_no;
        //showProgress(context);
        getBackgroundData d1 =  new getBackgroundData();
        d1.execute();
        if(d1.getStatus()==AsyncTask.Status.FINISHED) {
            d1 = null;
            _progressDialog.dismiss();

        }

    }

    public void searchAds(View v)
    {

        EditText query = (EditText) findViewById(R.id.query);
        String q = query.getText().toString();
        if(q == "" || q == "search")
        {
            Dialog d = new Dialog(this);
            d.setTitle("Enter Valid Search Parameter");
            d.show();
        }
        else
        {
            getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN);
            Intent i = new Intent(searchClassified.this,com.example.lmf.searchClassified.class);
            i.putExtra("query", ""+q+"");
            startActivity(i);

        }

    }

    public void showProgress(Context c)
    {
         _progressDialog = ProgressDialog.show(
                    c,
                    "Please wait",
                    "Performing task..."
                );

    }

    public void hideProgress()
    {
        _progressDialog.dismiss();
    }

    //////////// Async Class

    private class getBackgroundData extends AsyncTask<Void, Integer, JSONArray>
    {

        protected void onPreExecute() 
        {
            _progressDialog = new ProgressDialog(context);
            _progressDialog.setMessage("Loading...");
            _progressDialog.show();
        }

        @Override
        protected JSONArray doInBackground(Void... params) 
        {
            try
            {
                JSONArray array = obj.getDATA(k,URL);
                return array;

            }
            catch(Exception e)
            {
                e.printStackTrace();
            }
                return null;
        }

        @Override
        protected void onPostExecute(JSONArray array) 
        {
            LinearLayout sv = (LinearLayout) findViewById(R.id.data);
            try
            {

            for (int i = 0; i <array.length(); i++) {

                JSONObject row = array.getJSONObject(i);

                //// TextView Creation start here /////////

                TextView tv = (TextView)getLayoutInflater().inflate(R.layout.tvtemplate, null);
                tv.setText(row.getString("post_title"));
                tv.setTextColor(Color.BLACK);
                tv.setTextSize(14);
                tv.setPadding(8, 6, 0, 12);
                tv.setFocusable(true);
                tv.setLayoutParams(new LayoutParams(
                        LayoutParams.WRAP_CONTENT,
                        LayoutParams.WRAP_CONTENT));

                //// TextView Creating Ends here /////////

                //// Horizontal Line Creating here /////////
                View v = new View(searchClassified.this);
                LinearLayout.LayoutParams viewLp = new LayoutParams(LayoutParams.MATCH_PARENT, 1);
                viewLp.setMargins(0, 4, 0, 4);

                v.setLayoutParams(viewLp);
                v.setBackgroundColor(Color.LTGRAY);

                //// Horizontal Line Creating Ends here /////////

                //// Image Creating Starts from  here /////////

                LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

                lp.setMargins(3, 0, 15, 8);

                lp.width = 70;
                lp.height = 80;
                ImageView imageView = new ImageView(searchClassified.this);
                String[] parts = row.getString("post_img").split("/");
                int last_index = parts.length - 1;
                String image_name = "thumb_"+parts[last_index];
                String str = "";
                for(int j=0; j<last_index; j++)
                {
                    str += parts[j]+"/";
                }
                String path = "http://www.lmf.com.pk/"+str+image_name;

                imageLoader.DisplayImage(path, imageView);

                //// Image Creating Ends here /////////

                // Creating LinearLAyout /////////

                LinearLayout l1 = new LinearLayout(searchClassified.this);

                l1.setOrientation(LinearLayout.HORIZONTAL);
                l1.setHapticFeedbackEnabled(true);
                l1.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
                l1.setId(obj.convertStrtoInt(row.getString("post_id")));
                l1.setHapticFeedbackEnabled(true);
                l1.setOnClickListener(new OnClickListener() {

                    public void onClick(View v) {
                        // TODO Auto-generated method stub

                        Intent i = new Intent(searchClassified.this,com.example.lmf.adsDetail.class);
                        i.putExtra("id", v.getId());
                        startActivity(i);
                    }
                });

                l1.addView(imageView, lp);
                l1.addView(tv);
                sv.addView(l1);
                sv.addView(v);

            }

            _progressDialog.hide();
            _progressDialog.dismiss();
            _progressDialog = null;
            }
            catch(Exception e)
            {
                e.printStackTrace();

            }

        }

    }

    /////////// Ends Here 

    public boolean onCreateOptionsMenu(Menu menu) 
    {
        MenuItem item = menu.add ("Quit");
        item.setOnMenuItemClickListener (new OnMenuItemClickListener()
        {
            public boolean onMenuItemClick (MenuItem item)
            {
                //clearArray();
                finish();
                return true;
            }
        });
                return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:44:41.247

我已经解决了这个问题，并希望与未来的读者分享。我进行了切换并添加了案例，现在新的 Scroll-View 触发器无法运行，直到以前的数据无法完成加载。

这是最终的代码，希望对各位朋友有所帮助。谢谢

```
package com.example.lmf;

import java.net.URLEncoder;
import org.json.JSONArray;
import org.json.JSONObject;

import com.example.lmf.ObservableScrollView.ScrollViewListener;

import android.app.Activity;
import android.app.Dialog;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.graphics.Color;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Handler;
import android.view.Gravity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.MenuItem.OnMenuItemClickListener;
import android.view.View.OnClickListener;
import android.view.WindowManager;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.LinearLayout.LayoutParams;
import android.widget.Toast;

public class searchClassified extends Activity implements ScrollViewListener
{

    ObservableScrollView scrollView;
    ProgressDialog _progressDialog;
    int page_no = 1;
    String k = "";
    final static String URL = "Your URL HERE For Getting JSON";
    final getInternetData obj = new getInternetData();
    public ImageLoader imageLoader = null;
    Context context = this;
    int num = 1;
    private static final int SPLASH_DURATION = 3000; // 3 seconds

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.get_classified);
        getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN);
        scrollView = (ObservableScrollView) findViewById(R.id.my_scroll);
        scrollView.setScrollViewListener(this);
        imageLoader = new ImageLoader(this);
        String s = getIntent().getExtras().getString("query")!= "" ? getIntent().getExtras().getString("query") : "";
        EditText et = (EditText) findViewById(R.id.query);
        et.setText(s);
        k = "all="+URLEncoder.encode(s);
        showProgress();
        new getBackgroundData().execute();

    }

    public void onScrollEnded(ObservableScrollView scrollView, int x, int y, int oldx, int oldy) 
    {
        // TODO Auto-generated method stub
        page_no = page_no + 1;
        k = k+"&page_no="+page_no;
        switch(num)
        {
        case 1:
            showProgress();
            new getBackgroundData().execute();
            num = 0;
            Handler handler = new Handler();
            handler.postDelayed(new Runnable() {

                public void run() {
                     num = 1; 
                }

            }, SPLASH_DURATION);
            break;

        case 0:
            num = 0;
            break;
        }

    }

    public void searchAds(View v)
    {

        EditText query = (EditText) findViewById(R.id.query);
        String q = query.getText().toString();
        if(q == "" || q == "search")
        {
            Dialog d = new Dialog(this);
            d.setTitle("Enter Valid Search Parameter");
            d.show();
        }
        else
        {
            getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN);
            Intent i = new Intent(searchClassified.this,com.example.lmf.searchClassified.class);
            i.putExtra("query", ""+q+"");
            startActivity(i);

        }

    }

    public void showProgress()
    {
        _progressDialog = new ProgressDialog(context);
        _progressDialog.setMessage("Loading...");
        _progressDialog.show();

    }

    public void hideProgress()
    {
        _progressDialog.dismiss();
    }

    //////////// Async Class

    private class getBackgroundData extends AsyncTask<Void, Integer, JSONArray>
    {

        @Override
        protected JSONArray doInBackground(Void... params) 
        {
            try
            {
                JSONArray array = obj.getDATA(k,URL);
                return array;

            }
            catch(Exception e)
            {
                e.printStackTrace();
            }
                return null;
        }

        @Override
        protected void onPostExecute(JSONArray array) 
        {
            LinearLayout sv = (LinearLayout) findViewById(R.id.data);
            try
            {

            for (int i = 0; i <array.length(); i++) {

                JSONObject row = array.getJSONObject(i);

                //// TextView Creation start here /////////

                TextView tv = (TextView)getLayoutInflater().inflate(R.layout.tvtemplate, null);
                tv.setText(row.getString("post_title"));
                tv.setTextColor(Color.BLACK);
                tv.setTextSize(14);
                tv.setPadding(8, 6, 0, 12);
                tv.setWidth(350);
                tv.setHeight(100);
                tv.setFocusable(true);
                LinearLayout.LayoutParams tvPar = new LinearLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
                //tvPar.weight = 2;
                tv.setLayoutParams(tvPar);

                //// TextView Creating Ends here /////////

                //// Horizontal Line Creating here /////////
                View v = new View(searchClassified.this);
                LinearLayout.LayoutParams viewLp = new LayoutParams(LayoutParams.MATCH_PARENT, 1);
                viewLp.setMargins(0, 4, 0, 4);

                v.setLayoutParams(viewLp);
                v.setBackgroundColor(Color.LTGRAY);

                //// Horizontal Line Creating Ends here /////////

                //// More Detail Icon Ends /////////////////////

                ImageView more_info_icon = new ImageView(searchClassified.this);
                //setting image resource
                more_info_icon.setImageResource(R.drawable.arrow);
                //setting image position
                LinearLayout.LayoutParams par = new LinearLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
                    //par.weight = 1;
                more_info_icon.setLayoutParams(par);
                more_info_icon.getLayoutParams().height = 30;
                more_info_icon.getLayoutParams().width = 30;
                more_info_icon.setPadding(0, 14, 0, 0);

                /// More Detail Icon Ends Here /////////////////////

                //// Image Creating Starts from  here /////////
                LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT,4);
                lp.weight = 1;
                lp.setMargins(3, 0, 15, 8);

                lp.width = 70;
                lp.height = 80;
                ImageView imageView = new ImageView(searchClassified.this);
                String[] parts = row.getString("post_img").split("/");
                int last_index = parts.length - 1;
                String image_name = "thumb_"+parts[last_index];
                String str = "";
                for(int j=0; j<last_index; j++)
                {
                    str += parts[j]+"/";
                }
                String path = "http://www.lmf.com.pk/"+str+image_name;

                imageLoader.DisplayImage(path, imageView);

                //// Image Creating Ends here /////////

                // Creating LinearLAyout /////////

                final LinearLayout l1 = new LinearLayout(searchClassified.this);

                l1.setOrientation(LinearLayout.HORIZONTAL);
                l1.setHapticFeedbackEnabled(true);
                LinearLayout.LayoutParams LParam = new LinearLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
                LParam.weight = 4;
                l1.setLayoutParams(LParam);
                l1.setId(obj.convertStrtoInt(row.getString("post_id")));
                l1.setHapticFeedbackEnabled(true);
                l1.setOnClickListener(new OnClickListener() {

                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        l1.setBackgroundColor(Color.GREEN);
                        //l1.setBackgroundColor(Color.WHITE);
                        Intent i = new Intent(searchClassified.this,com.example.lmf.adsDetail.class);
                        i.putExtra("id", v.getId());
                        startActivity(i);
                    }
                });

                l1.addView(imageView, lp);
                l1.addView(tv);
                l1.addView(more_info_icon);
                sv.addView(l1);
                sv.addView(v);

            }
                hideProgress();

            }
            catch(Exception e)
            {
                e.printStackTrace();

            }

        }

    }

    /////////// Ends Here 

    public boolean onCreateOptionsMenu(Menu menu) 
    {
        MenuItem item = menu.add ("Quit");
        item.setOnMenuItemClickListener (new OnMenuItemClickListener()
        {
            public boolean onMenuItemClick (MenuItem item)
            {
                //clearArray();
                finish();
                return true;
            }
        });
                return true;
    }

} 
```

# windows-phone-7 - 从 URL / Windows Phone 读取数据

> ID：15969261
> 
> 赞同：0
> 
> 时间：2013-04-12T10:41:53.163
> 
> 标签：windows-phone-7, windows-phone-8

请在我的问题上需要帮助！

我有以下链接；它存储了特定的数字（数据），我将在我的 Windows Phone 应用程序中使用它。 [http://jaradat.eb2a.com/read.php](http://jaradat.eb2a.com/read.php)

我如何读取链接中存储的最新数字（这个数字会改变）；并将其显示在我的 Windows Phone 应用程序中。

我应该使用 webclient 来访问 url 中的数据，如下所示？

```
 WebClient wc = new WebClient();
            wc.DownloadStringCompleted += HttpCompleted;
            wc.DownloadStringAsync(new Uri("http://jaradat.eb2a.com/read.php"));

 private void HttpCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Error == null)
        {

            // do something  here
        } 
```

以及如何读取链接中的最新值？应该把它分成代币吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:44:57.993

您在问题中指出的方法对于从链接中检索数据是正确的。尽管还有其他方法可以做到这一点。
如果您想进一步了解，这里有一些参考资料。 [在 Windows Phone HttpWebRequest 基础知识 - Windows Phone 服务消耗 - 第 1 部分](http://blogs.msdn.com/b/devfish/archive/2011/04/07/httpwebrequest-fundamentals-windows-phone-services-consumption-part-2.aspx)
[中发出 HTTP 请求并监听其完成](http://www.developer.nokia.com/Community/Wiki/Making_a_HTTP_request_and_listening_its_completion_in_Windows_Phone) [HttpWebRequest 基础 - Windows Phone 服务消耗 - 第 2 部分](http://blogs.msdn.com/b/devfish/archive/2011/04/07/httpwebrequest-fundamentals-windows-phone-services-consumption-part-2.aspx)

您的问题似乎是关于如何检索响应中的最后一个值。尝试这个...

```
private void HttpCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    if (e.Error == null)
    {
       //this will break the string into two tokens
        string[] first_lot = e.Result.Split('"');

        //assuming you want to read the first lot first_lot[0].Split(','); 
        // seccond lot  first_lot[1].Split(',');
        string[] numbers = first_lot[0].Split(',');

        int last_digit = int.Parse(numbers[numbers.Length - 1]);

    }
} 
```

**观察**

1.  如果可能，调整服务器代码以仅返回一位数字。它将为应用程序用户节省大量的数据成本。
2.  考虑使用 JSON 数据格式作为服务器端代码的响应格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:17:46.740

去做就对了

```
 WebClientwc = new WebClient();
        wc.DownloadStringCompleted += HttpCompleted;
        wc.DownloadStringAsync(new Uri("http://jaradat.eb2a.com/read.php"));

    private void HttpCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Error == null)
        {
            var resultString = e.Result;
            var parts = resultString.Split('"').Select(n => n).ToArray();
            int[] resultIntArrayFirst = parts[1].Split(',').Select(n => Convert.ToInt32(n)).ToArray();
            double [] resultIntArraySecond = parts[3].Split(',').Select(Convert.ToDouble).ToArray();
             double lastValue = resultIntArraySecond[resultIntArraySecond.Length - 1];
        }
    } 
```

希望它的帮助。

# c - 将 40 个 Socket 绑定到 40 个不同的 IP 地址

> ID：15969262
> 
> 赞同：5
> 
> 时间：2013-04-12T10:41:53.867
> 
> 标签：c, windows, winapi, network-programming, udp

我正在写 UDP 服务器/客户端应用程序。

我希望我的单个服务器一次处理 40 个客户端。为此，我想创建 40 个专用线程，每个专用于一个客户端。由于每个客户端有 40 个线程，我也想创建 40 个专用套接字。

但问题是：

我不知道我将绑定（）我的套接字的 40 个 IP 地址是什么。（就我现在而言，我必须将绑定（）绑定到我的服务器的 IP 地址。）通常我绑定（）到`"INADDR_ANY"`只有一个套接字时。

但是我应该绑定（）我的 40 个套接字中的每一个的 IP 地址应该是什么？请帮我。任何评论/帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:27:22.603

使用 UDP 执行此操作的一种常见方法是：

*   服务器 bind() 到一个众所周知的端口。
*   客户端将初始数据包发送到那个众所周知的端口
*   服务器在众所周知的端口上接收来自客户端的第一个数据包。
*   服务器创建一个带有随机端口的新套接字
*   服务器从这个新套接字回复客户端。
*   客户端收到回复，注意到它来自另一个端口而不是众所周知的服务器端口，并使用该端口作为进一步通信的目的地。

您将使用 getpeername() 调用来了解远程地址。

请记住，UDP 是无连接的，您需要某种方式来发出结束信号或使套接字超时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T11:07:36.293

`bind`只需要本地地址，不需要远程地址。

如果您想为每个客户端使用一个套接字，那么您需要为每个客户端使用不同的端口（使用`bind`）。这样，每个客户端都可以将其流量发送到专用端口，并且您可以为每个套接字/端口拥有一个线程。

不过，只有一个套接字（和一个端口）可能是一个更好的主意，并且在代码中具有逻辑以根据远程地址（使用`recvfrom`例如检索）将流量分配给线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T10:45:14.617

通常的方法是[绑定](http://linux.about.com/library/cmd/blcmdl2_bind.htm)单个[套接字](http://linux.about.com/library/cmd/blcmdl2_socket.htm)并[接受](http://linux.about.com/library/cmd/blcmdl2_accept.htm)传入的连接。每个连接都将被接受分配一个唯一的套接字。

当您使用 UDP 时，我会简单地使用上面描述的 TCP 让客户端知道他们各自的服务器 UDP 地址。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T22:22:03.427

在专用侦听线程中创建单个侦听套接字。

当它接收到一个新的数据包时，使用数据包的远程地址/端口，或者在数据包负载中放置一个唯一的客户端ID，以唯一标识客户端。

如果该客户端尚不存在，则为该客户端创建一个新线程，将数据包传递给该线程以进行进一步处理，然后返回侦听。

如果给定的客户端线程有一段时间没有收到任何数据包，它可以自行终止。

# c# - 为 64 位 dll 创建 32 位包装器。这可能吗？

> ID：15969263
> 
> 赞同：2
> 
> 时间：2013-04-12T10:41:59.367
> 
> 标签：c#, c++, 64-bit, 32bit-64bit, 32-bit

我有几个 dll，`x64`版本`x86`尚未发布。我想在`x86`环境中使用这些。没有办法改变这些因素的任何平台。

我曾尝试在互联网上搜索，但无济于事。我想做的是以某种方式创建一个`x86`可以与这些库进行通信的库`x64`。这可能吗？如果是这样，怎么做？

包装器最好在`C#`代码中，尽管它必须能够访问`C++`dll。（这些`x64`库是用 . 编写的`unmanaged C++`。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T10:44:15.420

您不能在单个进程中执行此操作。那是因为 32 位进程只能加载 32 位模块，而 64 位进程只能加载 64 位模块。

64 位代码调用 32 位代码（反之亦然）的唯一方法是使用进程外解决方案。例如一个进程外的 COM 服务器。

# c# - 将打开链接事件重定向到扩展的webbrowser 选项卡

> ID：15969269
> 
> 赞同：0
> 
> 时间：2013-04-12T10:42:12.670
> 
> 标签：c#, winforms, events, browser

我有一个 ac# 形式的网络浏览器，当用户点击链接时，页面会在 ie10 浏览器中打开。

我想要的只是拦截这个事件并在另一个网络浏览器中打开新页面（真的是扩展网络浏览器）。

事实是我不想知道用户在页面中点击了什么，但我想拦截来自我的网络浏览器的所有“打开新页面”请求并将它们重定向到我的扩展网络浏览器并创建一个新标签关联。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T02:19:18.033

至少有两种方法可以做到这一点：

1.  扩展 WebBrowser 控件以拦截 NewWindow2 事件，然后取消原始请求并使用该 url 在新窗口中打开它。可以在[此处](http://blogs.artinsoft.net/Mrojas/archive/2008/09/18/Extended-WebBrowser-Control-SeriesNewWindow2-Events-in-the-C-WebBrowserControl.aspx)或代码项目[Extended .NET 2.0 WebBrowser Control](http://www.codeproject.com/Articles/13598/Extended-NET-2-0-WebBrowser-Control)中找到类似的代码。

2.  实现 INewWindowManager，并使用 EvaluateNewWindow 来做同样的事情。

# c# - SharedPreferences 值不粘

> ID：15969270
> 
> 赞同：0
> 
> 时间：2013-04-12T10:42:19.223
> 
> 标签：c#, android, xamarin.android

我正在尝试将字符串保存为`SharedPerferences`：

**写**

```
var prefs = Application.Context.GetSharedPreferences ("Janssen", FileCreationMode.WorldReadable);  

var prefEditor = prefs.Edit ();
prefEditor.PutString ("SecurityToken", SecurityCode.Text);
prefEditor.Commit (); 
```

**读**

```
var prefs = Application.Context.GetSharedPreferences ("Janssen", FileCreationMode.WorldReadable);  

var SecurityToken = prefs.GetString ("SecurityToken", null); 
```

我是来自 iOS 的 Android 新手。我正在尝试`NSUserDefaults`在 iOS 中进行模拟。我正在阅读`SharedPreferences`一项新活动，也许这就是导致问题的原因？我不知道。我也不知道将什么设置为默认值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:06:38.377

`SharedPreferences`您是否在编写和阅读它们之间重新部署？这通常会擦掉`SharedPreferences`.

我刚刚对它们进行了测试，它们在两个之间运行良好`Activities`：

*WritePrefsAcitivity.cs*

```
using Android.App;
using Android.Content;
using Android.Widget;
using Android.OS;

namespace Derrrp
{
    [Activity (Label = "Derrrp", MainLauncher = true)]
    public class WritePrefsActivity : Activity
    {
        protected override void OnCreate (Bundle bundle)
        {
            base.OnCreate (bundle);

            SetContentView (Resource.Layout.Write);

            var prefs = Application.Context.GetSharedPreferences("MySharedPrefs", FileCreationMode.Private);
            var prefsEditor = prefs.Edit();

            var ed = FindViewById<EditText>(Resource.Id.editText1);
            ed.AfterTextChanged += (sender, e) => {
                prefsEditor.PutString("MyPref", e.Editable.ToString());
                prefsEditor.Commit();
            };

            Button button = FindViewById<Button> (Resource.Id.myButton);

            button.Click += delegate {
                var intent = new Intent(this, typeof(ReadPrefsActivity));
                StartActivity(intent);
            };
        }
    }
} 
```

*ReadPrefsActivity.cs*

```
using Android.App;
using Android.Content;
using Android.OS;
using Android.Widget;

namespace Derrrp
{
    [Activity (Label = "ReadPrefsActivity")]            
    public class ReadPrefsActivity : Activity
    {
        protected override void OnCreate (Bundle bundle)
        {
            base.OnCreate (bundle);

            SetContentView(Resource.Layout.Read);

            var tv = FindViewById<TextView>(Resource.Id.myTextView);
            var button = FindViewById<Button>(Resource.Id.myButton);

            var prefs = Application.Context.GetSharedPreferences("MySharedPrefs", FileCreationMode.Private);

            button.Click += (sender, e) => {
                tv.Text = prefs.GetString("MyPref", "");
            };
        }
    }
} 
```

`defValue`可以设置为您想要的任何内容。如果您尝试获取的首选项为空，则将选择此值。

**注意**：如果您使用它来存储一些秘密信息，建议使用`FileCreationMode.Private`甚至使用使其只能由应用程序读取的东西，例如加密。

![GIF 图像显示了这两个活动的工作情况。](https://i.stack.imgur.com/xDVax.gif)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:46:53.873

我不确定您遇到的错误是什么，但下面是我之前使用共享首选项保存字符串的示例。我以前将默认值设置为“”，这样在读取时，如果之前没有保存该值，它会将变量设置为空字符串。您可以在任何新活动中读取共享首选项，共享首选项是每个应用程序而不是活动..

例子：

写字符串：

```
 String pass = "abcdefg";
 SharedPreferences preferences = getSharedPreferences("pref", 0);
 SharedPreferences.Editor editor = preferences.edit();
 editor.putString("savedPass", pass);
 editor.commit(); 
```

读取字符串：

```
 SharedPreferences preferences = getSharedPreferences("pref", 0);
 String mypassword = preferences.getString("savedPass", ""); 
```

# perl - Perl - CGI::Application - 从数据库创建会话变量

> ID：15969271
> 
> 赞同：1
> 
> 时间：2013-04-12T10:42:20.833
> 
> 标签：perl, dbi, cgi-application

我在数据库中存储了一堆配置变量，可通过以下查询访问键值对：

```
select * from conf_table; 
```

我想将这些键/值对加载到 CGI::Applicaiton 会话中。目前这是通过手动完成的（所以不是来自数据库，而是硬编码）

```
$self->session->param( NAME => VALUE ); 
```

对于一堆键值对。使用 DBI 和某种形式的循环是否有更明智的方法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:58:57.733

你的意思是这样的？

```
my $sth = $dbh->prepare("select key, value from mytable");
$sth->execute;
$sth->bind_columns(\(my ($key, $value)));
while ($sth->fetch) {
  $self->session->param($key => $value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T18:48:44.460

DBI 有一些方便的方法使这种工作更简单。尝试[selectall_arrayref](https://metacpan.org/module/DBI#selectall_arrayref)：

```
my $configs = $dbh->selectall_arrayref(
    'SELECT * FROM conf_table',
    { Slice => {} }, # make each row a hash
);
$self->session->param($_->{key} => $_->{value}) for @$configs; 
```

# android - 如果添加动画，视图翻转器不会删除未显示的子项

> ID：15969273
> 
> 赞同：1
> 
> 时间：2013-04-12T10:42:27.653
> 
> 标签：android, animation, view, viewflipper, transitions

**编辑：** 总结如果我在视图转换上有动画问题出现了，但是一旦我从视图中删除动画，视图翻转器中未显示的子项也会消失。

我创建了一个视图翻转器，它工作得很好我也设置了一些动画，但是例如出现了一个错误。![第一屏](https://i.stack.imgur.com/vraoL.png)![第二屏](https://i.stack.imgur.com/00gm5.png)![第三屏的错误](https://i.stack.imgur.com/IOmEY.png). 就像在下面的屏幕上可以看到的那样，如果我单击随机行视图被翻译，我有一个列表视图。代码：`((ViewFlipper)findViewById(R.id.in_app_vf)).setDisplayedChild(1);`之后我点击返回按钮，第一个视图出现代码：`((ViewFlipper)findViewById(R.id.in_app_vf)).setDisplayedChild(0);`但问题是当我点击editText所在的同一个空间时，它会调用键盘。所以列表视图在 editText 字段所在的位置是不可点击的。我找不到问题出在哪里。

我使用的动画：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/decelerate_interpolator"
    android:fillAfter="true">
    <translate
        android:fromXDelta="0"
        android:toXDelta="-100%p"
        android:duration="700"/>

    <alpha 
        android:fromAlpha="1.0" 
        android:toAlpha="0.0" 
        android:duration="900" />
</set> 
```

我试图删除未使用的视图的代码，但它不起作用：

```
private void setAllTheOtherViewGone(){
        for(int i = 0; i <= ((ViewFlipper)findViewById(R.id.in_app_vf)).getChildCount()-1;i++)
            if(i != ((ViewFlipper)findViewById(R.id.in_app_vf)).getDisplayedChild()){
                ((ViewFlipper)findViewById(R.id.in_app_vf)).getChildAt(i).setVisibility(View.GONE);
                ((ViewFlipper)findViewById(R.id.in_app_vf)).getChildAt(i).setVisibility(View.INVISIBLE);
            }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:48:55.283

设置edittext setFocusable(false) 和setFocusableInTouchmode(false) 的属性就可以了。

# c++ - C++ 错误：从 'char' 到 'const char*' 的无效转换

> ID：15969281
> 
> 赞同：8
> 
> 时间：2013-04-12T10:42:46.837
> 
> 标签：c++

我对 C++ 完全陌生，我创建了这个函数：

```
bool guessWord(string compWord)
{
    cout << "Guess a letter: ";
    string userLetter;
    cin >> userLetter;
    for (unsigned int x = 0; x < compWord.length(); x++)
    {
        string compLetter = compWord[x];
        if (compLetter == userLetter)
        {
            return true;
        }
    }
    return false;
} 
```

但它返回到以下`error: invalid conversion from 'char' to 'const char*' [-fpermissive]`。谁能帮我理解这意味着什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T10:44:38.280

```
string compLetter = compWord[x]; 
```

`compWord[x]`获取`char`并且您试图将其分配给`string`，这是错误的。但是，您的代码应该类似于

```
bool guessWord(string compWord)
{
    cout << "Guess a letter: ";
    char userLetter;
    cin >> userLetter;
    for (unsigned int x = 0; x < compWord.length(); x++)
    {
        char compLetter = compWord[x];
        if (compLetter == userLetter)
        {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:45:15.083

`string compLetter = compWord[x];`

应该

`char compLetter = compWord[x];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T10:45:57.083

在这条线上

```
string compLetter = compWord[x]; 
```

您正在将 char 分配给字符串。将其更改为

```
char compLetter = compWord[x]; 
```

应该做的伎俩。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T10:50:21.947

compWord[x] 为您提供字符串 compWord 中的第 x 个字符，然后您尝试将其分配给字符串。

您应该直接比较两个字符串，或者并行迭代它们并逐个字符进行比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T11:21:53.877

您可以使用[`std::string::find`](http://en.cppreference.com/w/cpp/string/basic_string/find)来查看字符是否在`string`. 如果不是，则返回`std::string::npos`：

```
bool guessLetter(string compWord)
{
    cout << "Guess a letter: ";
    char userLetter;
    cin >> userLetter;
    return compWord.find(userLetter) != string::npos; 
```

}

# ruby-on-rails-3 - Rails + Slim - MissingTemplate（生产中）

> ID：15969288
> 
> 赞同：3
> 
> 时间：2013-04-12T10:43:01.897
> 
> 标签：ruby-on-rails-3, ubuntu, capistrano, bundler, slim-lang

我有一个关于 Rails 3.2 的项目。我也使用 haml 作为我的模板引擎，但我决定使用 slim 而不是 haml。所以我用 slim 重写了一些视图。但是当我将此更改推送到服务器时，我在生产中遇到了奇怪的错误。

该错误仅出现在使用 slim 作为模板引擎的页面上。在我的开发机器上，页面打开得很好。为了设置服务器，我使用[了 Rayan Byte 的截屏视频](http://railscasts.com/episodes/335-deploying-to-a-vps)

我该如何解决？

**错误**：

```
Started GET "/" for 128.69.76.116 at 2013-04-12 11:19:31 +0000

Started GET "/ru/articles" for 128.69.76.116 at 2013-04-12 11:19:31 +0000
Processing by ArticlesController#index as HTML
  Parameters: {"locale"=>"ru"}
Completed 500 Internal Server Error in 180ms

ActionView::MissingTemplate (Missing template articles/index, application/index with {:locale=>[:ru], :formats=>[:html], :handlers=>[:erb, :builder, :haml]}. Searched in:
  * "/home/deployer/apps/Chirch_app/releases/20130412101936/app/views"
  * "/home/deployer/apps/Chirch_app/shared/bundle/ruby/1.9.1/gems/gmaps4rails-1.5.6/app/views"
  * "/home/deployer/apps/Chirch_app/shared/bundle/ruby/1.9.1/gems/kaminari-0.14.0/app/views"
  * "/home/deployer/apps/Chirch_app/shared/bundle/ruby/1.9.1/gems/devise-2.1.2/app/views"
):
  actionpack (3.2.8) lib/action_view/path_set.rb:58:in `find'
  actionpack (3.2.8) lib/action_view/lookup_context.rb:109:in `find'
  actionpack (3.2.8) lib/action_view/renderer/abstract_renderer.rb:3:in `find_template'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:34:in `determine_template'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:10:in `render'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:110:in `_render_template'
  actionpack (3.2.8) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /home/deployer/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:39:in `render'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.8) lib/active_support/callbacks.rb:436:in `_run__609582508__process_action__934117167__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__319658905__call__322020128__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  railties (3.2.8) lib/rails/railtie/configurable.rb:30:in `method_missing'
  unicorn (4.5.0) lib/unicorn/http_server.rb:552:in `process_client'
  unicorn (4.5.0) lib/unicorn/http_server.rb:628:in `worker_loop'
  unicorn (4.5.0) lib/unicorn/http_server.rb:500:in `spawn_missing_workers'
  unicorn (4.5.0) lib/unicorn/http_server.rb:511:in `maintain_worker_count'
  unicorn (4.5.0) lib/unicorn/http_server.rb:277:in `join'
  unicorn (4.5.0) bin/unicorn:121:in `<top (required)>'
  /home/deployer/apps/Chirch_app/shared/bundle/ruby/1.9.1/bin/unicorn:23:in `load'
  /home/deployer/apps/Chirch_app/shared/bundle/ruby/1.9.1/bin/unicorn:23:in `<main>' 
```

**宝石文件**：

```
source 'https://rubygems.org'

gem 'rails', '3.2.13'
gem 'pg', '0.15.1'                                                                                  
gem 'jquery-rails', '2.2.1'                                                                         
gem 'haml', '4.0.2'                                                                                 
gem 'therubyracer', :platform => :ruby
gem 'devise', '2.2.3'                                                                               
gem 'simple_form', '2.1.0'                                                                          
gem 'bootstrap-wysihtml5-rails', "0.3.1.19"                                                         
gem 'kaminari', '0.14.0'                                                                            
gem "cancan", '1.6.9'                                                                               
gem "carrierwave", '0.8.0'                                                                          
gem "rmagick", '2.13.2'                                                                             
gem 'gmaps4rails', '1.5.6'                                                                          
gem 'unicorn', '4.6.2'                                                                              
gem 'capistrano', '2.14.2'                                                                          
gem 'less-rails', '2.3.2'                                                                           
gem 'slim', '1.3.8'
gem 'haml2slim'

group :assets do
  gem 'sass-rails',   '~> 3.2.4'
  gem 'coffee-rails', '~> 3.2.2'
  gem 'twitter-bootstrap-rails', '2.2.6'                                                            
  gem 'uglifier', '>= 1.2.3'
end

group :development do
  gem 'annotate', '~> 2.5.0'
  gem 'better_errors'                                                                               
  gem 'binding_of_caller'                                                                           
  gem 'brakeman'                                                                                    
  gem 'meta_request'                                                                                
end

group :development, :test do
  gem 'rspec-rails', '2.13.0'
  gem 'rb-fsevent'                                                                                  
  gem 'guard-rspec', '2.5.2'                                                                        
  gem 'terminal-notifier-guard'                                                                     
  gem 'launchy'                                                                                     
end

group :test do
  gem 'capybara', '2.1.0'                                                                           
  gem 'factory_girl_rails', '4.2.1'                                                                 
  gem 'database_cleaner', '0.9.1'
  gem 'selenium-webdriver', '2.32.1'                                                                
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T15:51:47.047

我发现了问题。经过长时间的研究（独角兽和 ngingx 重启没有帮助），我只是重新启动了整个操作系统，然后该`Slim`页面出现了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:32:17.020

看错误，模板句柄还是haml

```
:formats=>[:html], :handlers=>[:erb, :builder, :haml]} 
```

我的猜测是你的`index`页面包括一些用haml写的部分，从而带来了混乱。本地开发机器可能在浏览器中有一些缓存，因此那里没有问题。

你把所有的haml模板变成slim怎么样，**删除所有的haml模板**（使用`git rm`），`haml`从Gemfile中删除gem，然后再试一次？

# ios - 在 Core Data 中存储关系中不存在的对象的数量

> ID：15969291
> 
> 赞同：0
> 
> 时间：2013-04-12T10:43:15.043
> 
> 标签：ios, objective-c, core-data

我有一些需要从服务器（后端）加载的数据。例如，假设我有一个用户和事件实体。它们之间的关系是多对多的（用户可以参加很多活动，活动可以有很多参加者）。所有数据都远程存储在后端和本地核心数据中。当我从后端下载数据时，我将其转换为 NSManagedObjects 并将其存储在 NSManagedObjectContext 中。一切都很简单，但是...

当我下载我想知道的活动列表时，该活动有多少参与者。但是我不能在同一个请求中下载用户列表，因为这完全是矫枉过正。我需要下载，比如说，用户的唯一 ID 列表，这样我就可以拥有两件事：参加者总数和下载具体用户详细数据的方法（通过唯一 ID）。或者还有另一个例子：我需要知道参与者的总数并下载有限的一组，所以我可以在 CoreData 中创建一些实体，但不是全部。

所以主要问题是我应该如何将这些信息存储在我的 CoreData 中？这意味着我需要知道对于某些实体，有一些相关的实体在关系中当前实际上并不存在于 CoreData 中，但我知道其中应该有多少。我想到的第一件事是`usersCount`在我的事件实体中有一个类似的属性，但这似乎有点脏。这种情况的最佳做法是什么？

如果问题不够清楚，请发表评论，以便我可以添加更多细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:16:32.877

当您下载具有相应用户 ID 列表的事件时，您可以创建`Event`对象以及相关`User`对象，但您仅填写用户对象中的“userId”属性。

稍后，当您下载完整的用户信息时，您会更新现有的（不完整的）对象或创建新的用户对象。[“核心数据编程指南”中的“高效实现查找或创建](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdImporting.html#//apple_ref/doc/uid/TP40003174-SW4)”描述了一种可能有用的模式。

所以想法是首先创建具有不完整信息的 Core Data 对象，然后更新具有详细信息的对象。优点是您可以立即建立所有关系，例如，即使用户信息不完整，也可以计算相关用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:27:55.947

有一个属性来存储计数并没有什么不好的，特别是如果这些实体是通过单独的请求检索和分页的。

# c# - 解耦架构

> ID：15969293
> 
> 赞同：5
> 
> 时间：2013-04-12T10:43:23.583
> 
> 标签：c#, architecture, modularity, decoupling

我正在开发一个系统，我希望我的层尽可能地解耦，你知道，某种模块化应用程序能够在不严重修改系统其余部分的情况下切换数据库和东西。

所以，我一直在关注 Robert C. Martin 关于良好实践、简洁代码、解耦架构等的谈话之一，以获得一些灵感。我觉得有点奇怪的是他对系统的描述`Fitnesse`以及他们为`WikiPage`s 实现存储/加载方法的方式。我也在链接视频：[Robert C. Martin - Clean Architecture and Design](http://www.youtube.com/watch?feature=player_detailpage&v=asLUTiJJqdE#t=1885s)

他所描述的（至少根据我的理解）是实体知道如何从某个持久层存储和加载自身的机制。当他想将 WikiPages 存储在内存中时，他只需覆盖 WikiPage 并创建一个新的`InMemoryWikiPage`. 当他想将它们存储在数据库中时，他做了同样的事情......

所以，我的一个问题是——**这种方法叫什么？**我一直在学习存储库模式和东西，为什么要像这种持久性无知的类，但我似乎找不到关于他所做的这件事的任何材料。因为我的应用程序将由模块组成，我认为这可能有助于解决我的问题，而无需为我的实体创建一些集中式存储......每个模块都会简单地照顾自己，包括其实体的持久性。

我认为代码看起来像这样：

```
public class Person : IEntity
{
   public int ID { get;set; }
   public string Name { get;set; }

   public void Save()
   {
       ..
   }

   public void Update()
   {
   }

   public void Delete()
   {
   }

   ...
} 
```

看起来有点奇怪，但是……或者我误解了他在视频中所说的话？

我的第二个问题是，如果您不同意这种方法，**那么在这种模块化应用程序中您将采取什么途径？**

如果可能的话，请提供一个例子并给出一些解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T12:08:35.867

我会回答你的**第二个问题**。我想你也会对`Dependency Injection`.

我不是 DI 方面的专家，但我会尽量解释清楚。

首先，来自维基百科：

> 依赖注入是一种软件设计模式，它允许删除硬编码的依赖关系，并可以在运行时或编译时更改它们。
> 
> 依赖注入模式的主要目的是允许在运行时或通过配置文件而不是在编译时选择**给定依赖接口的多个实现。**

周围有许多库可以帮助您实现这种设计模式：AutoFac、SimpleInjector、Ninject、Spring .NET 等等。

理论上，这就是您的代码的样子（AutoFac 示例）

```
var containerBuilder = new ContainerBuilder();
//This is your container builder. It will be used to register interfaces
// with concrete implementations 
```

然后，为接口类型注册具体实现：

```
containerBuilder.RegisterType<MockDatabase>().As<IDatabase>().InstancePerDependency();
containerBuilder.RegisterType<Person>().As<IPerson>().InstancePerDependency(); 
```

在这种情况下，`InstancePerDependency`意味着每当您尝试解析时`IPerson`，您都会获得一个新实例。例如`SingleInstance`，可能是这样，所以每当您尝试解析时`IPerson`，您都会得到相同的共享实例。

然后你构建你的容器，并使用它：

```
 var container = containerBuilder.Build();

 IPerson myPerson = container.Resolve<IPerson>(); //This will retrieve the object based on whatever implementation you registered for IPerson
 myPerson.Id = 1;

 myPerson.Save(); //Save your changes 
```

我在这个例子中使用的模型：

```
interface IEntity
{            
    int Id { get; set; }            
    string TableName { get; }
    //etc
}

interface IPerson: IEntity
{
    void Save();
}

interface IDatabase
{
    void Save(IEntity entity);
}

class SQLDatabase : IDatabase
{
    public void Save(IEntity entity)
    {
        //Your sql execution (very simplified)
        //yada yada INSERT INTO entity.TableName VALUES (entity.Id)
        //If you use EntityFramework it will be even easier
    }
}

class MockDatabase : IDatabase
{
    public void Save(IEntity entity)
    {
        return;
    }
}

class Person : IPerson
{
    IDatabase _database;

    public Person(IDatabase database)
    {
        this._database = database;
    }

    public void Save()
    {
        _database.Save(this);
    }

    public int Id
    {
        get;
        set;
    }

    public string TableName
    {
        get { return "Person"; }
    }
} 
```

不用担心，AutoFac 会自动解析任何`Person`Dependencies，例如`IDatabase`.

这样，如果您想切换数据库，您可以简单地执行以下操作：

```
containerBuilder.RegisterType<SqlDatabase>().As<IDatabase>().InstancePerDependency(); 
```

我写了一个过度简化（不适合使用）的代码，它只是作为一个启动，谷歌“依赖注入”以获取更多信息。我希望这有帮助。**祝你好运。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T11:12:34.717

您发布的模式是[Active Record](http://www.martinfowler.com/eaaCatalog/activeRecord.html)。

Repository 和 Active Record 模式的区别在于，在 Active Record 模式中，数据查询和持久化，以及域对象属于一个类，而在 Repository 中，数据持久化和查询与域对象本身是解耦的。

您可能想要研究的另一种模式是查询对象，它与存储库模式不同，它的方法数量将在每个可能的查询（过滤器、排序、分组等）中增加，查询对象可以使用流利的接口来表达[[1 ]](http://ayende.com/blog/2266/query-objects-vs-methods-on-the-repository)或专用于其中一个您可以传递参数[[2]](http://lostechies.com/jimmybogard/2012/10/08/favor-query-objects-over-repositories/)

最后，您可以查看[命令查询职责分离](http://www.h-online.com/developer/features/CQRS-an-architecture-precept-based-on-segregation-of-commands-and-queries-1803276.html)架构的想法。我个人松散地遵循它，只是拿起了可以帮助我的想法。

希望这可以帮助。

*根据评论更新*

存储库模式的一种变体是

```
UserRepository
{
    IEnumerable<User> GetAllUsers()
    IEnumerable<User> GetAllByStatus(Status status)
    User GetUserById(int id)
    ...
} 
```

这个不能扩展，因为存储库已更新以获取请求的附加查询

另一种变体是将[查询对象](http://martinfowler.com/eaaCatalog/queryObject.html)作为参数传递给数据查询

```
UserRepository
{
    IEnumerable<User> GetAll(QueryObject)
    User GetUserById(int id)
    ...
}

var query = new UserQueryObject(status: Status.Single)
var singleUsers = userRepo.GetAll(query) 
```

在 .Net 世界中的某些地方，传递的是 Linq 表达式而不是 QueryObject

```
var singleUsers = userRepo.GetAll(user => user.Status == Status.Single) 
```

另一种变体是通过其唯一标识符在一个实体上检索专用存储库并将其保存，而查询对象用于提交数据检索，就像在 CQRS 中一样。

*更新 2*

我建议你熟悉[SOLID 原则](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)。这些原则对于指导您创建松散耦合、高内聚架构非常有帮助。

[Los Techies 对 SOLID 原理的汇编](http://lostechies.com/wp-content/uploads/2011/03/pablos_solid_ebook.pdf)包含有关 SOLID 原理的良好介绍性文章。

# actionscript-3 - 在 Flex 中为折线图创建自定义图例而不使用 Legend 类

> ID：15969297
> 
> 赞同：1
> 
> 时间：2013-04-12T10:43:32.950
> 
> 标签：actionscript-3, apache-flex, charts

我正在尝试以自定义方式创建图例（Hbox，Vbox 包含图像以指示线系列图的标记形状），因为创建自定义图例无法在图例集中包含线系列标记的形状。以下是我的代码示例：

```
var img:Image = new Image();
img.source= new ClassFactory( mx.charts.renderers.CircleItemRenderer); 
```

它根本不显示图像。用image好还是iflexdisplayobject好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:13:25.767

您应该查看`LegendItem`可以看到 ItemRenderer 实例已分配给`IFlexDisplayObject`（标记）的源代码。

只需查看`updateDisplayList`LegendItem 的方法即可了解如何处理渲染器。

# spring - Spring xml中的注解和定义bean

> ID：15969298
> 
> 赞同：0
> 
> 时间：2013-04-12T10:43:42.937
> 
> 标签：spring

在任何情况下，我们都需要将spring bean定义为注释以及spring xml。

如果不是，哪一个更易维护，更有优势。

提前致谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:46:19.207

You do not need to do both. It is a case of one or the other.

I personally prefer having an xml file, as it allows me to see all of the resources I am wiring in one place, but it comes down to a matter of opinion.

# java - SSL Hanshake 时缺少 ServerHelloDone

> ID：15969304
> 
> 赞同：3
> 
> 时间：2013-04-12T10:43:56.967
> 
> 标签：java, ssl, websocket

我尝试使用 java 小程序连接到 wss（安全 Websocket）服务器，但 ssl 握手失败，没有任何有用的日志条目。

如果我连接到 wss://echo.websocket.org 握手工作正常，所以我认为这不是一般的 java 代码错误。

如果我尝试连接到我自己的服务器，则会发送 HelloDone 位（由 wireshark 验证），但连接以挂断结束，并且不在日志中。通常日志中应该有以下消息：“ **** ServerHelloDone* ”

*请参阅我的“ javax.net.debug=sll* ” 的 java 控制台日志[http://pastebin.com/ZuvKww4J](http://pastebin.com/ZuvKww4J) 它没有被截断，它只是在那里结束。几秒钟后，tcp 连接超时消息被添加到日志中。

我使用以下 java 代码示例： [https ://github.com/TooTallNate/Java-WebSocket/blob/master/src/main/example/SSLClientExample.java](https://github.com/TooTallNate/Java-WebSocket/blob/master/src/main/example/SSLClientExample.java)

但我使用的不是密钥库：

```
sslContext.init( null, null, null ); 
```

对于服务器，我有两个不同的测试系统：

1.  在 443 端口有一个 ha-proxy
2.  在港口 8443 一个隧道。

我试图用不同的方法隔离错误。首先，我使用 stunnel 强制使用与 echo.websocket.org "SSL_RSA_WITH_RC4_128_SHA" 相同的密码，但没有成功。

其次，我检查了 ssl 证书本身是否仍然有效。但是，由于我的 java 小程序的 Web 浏览器和正常的 https 连接被服务器（相同的服务器。ha-proxy orstunnel）接受，一切都在那个时候工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:13:24.253

Java-WebSocket 的维护者解决了问题。大过

# javascript - 如何使用 Javascript 清除 HTML 上的文本框

> ID：15969307
> 
> 赞同：2
> 
> 时间：2013-04-12T10:44:11.343
> 
> 标签：javascript, html, button, textarea

我有这样的html代码

```
<html>
<script type="text/javascript" src='LatihanKuisJs.js'></script>
    <body>
        <form name="kuis">
            <table border="1" width="50%">
                <tr>
                    <th colspan="2" >Celcius
                </tr>
                <tr>
                        <td align="center" width="80%">Kelvin</td>
                        <td align="center"><input type="text" id="kelvin">
                        </td>
                </tr>
                <tr>
                    <td align="center" width="80%">Reamur</td>
                    <td align="center"><input type="text" id="reamur"></td>
                </tr>
                <tr>
                    <td align="center" width="80%">Fahrenheit</td>
                    <td align="center"><input type="text" id="fahrenheit"></td>
                </tr>
            </table>
            <input type="button" value="Calculate" onclick='calculateCelcius();'/>
            <br/><br/>
            <textarea rows="20" cols="90" id="textarea">
            </textarea>
            <br/><br/>
            <input type="button" value="Clear" onclick='clear();'/>
        </form>
    </body>
</html> 
```

和像这样的外部javascript函数：

```
function calculateCelcius(){
    var kelvin = document.getElementById('kelvin');
    var reamur = document.getElementById('reamur');
    var fahrenheit = document.getElementById('fahrenheit');
    var textarea = document.getElementById('textarea');

    var hasil=(kelvin.value*1 + reamur.value*1 + fahrenheit.value*1);
    textarea.value += hasil + '\n';
}

function clear(){
    document.getElementById("textarea").value="";
} 
```

当我尝试单击页面上的清除按钮时，文本区域不清晰。怎么了？我该怎么办？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T10:47:37.743

只需将您的函数重命名`clear`为类似的名称`clearTextarea`，它就会起作用。

该`clear()`方法指的是过时的`document.clear()`方法，在[**MDN**](https://developer.mozilla.org/en-US/docs/DOM/document.clear)中描述为：

> 此方法用于在 Mozilla 的早期（1.0 之前）版本中清除整个指定文档。在基于 Mozilla 的应用程序的最新版本以及 Internet Explorer 和 Netscape 4 中，此方法不起作用。

同样根据[HTML5 规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/obsolete.html#dom-document-clear)：

> 该`clear()`方法必须什么都不做。

**参考：**

1.  [https://developer.mozilla.org/en-US/docs/DOM/document.clear](https://developer.mozilla.org/en-US/docs/DOM/document.clear)
2.  [http://www.whatwg.org/specs/web-apps/current-work/multipage/obsolete.html#dom-document-clear](http://www.whatwg.org/specs/web-apps/current-work/multipage/obsolete.html#dom-document-clear)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-24T17:30:20.217

如果您使用这样的功能

```
function clearInput(element){
element.value="";
} 
```

然后在输入中添加这个

```
onfocus="clearInput(this)" 
```

这可以多次用于任何文本字段或文本区域，因为对象的 id 是在它调用函数的地方传递的。

基拉

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-12T10:48:07.373

尝试在定义 onclick 事件时在函数名称前添加 javascript:。
像这样的东西：

```
<input type="button" value="Clear" onclick='javascript: clear();'/> 
```

# ios - iOS 6.1 上的 EASession 版本问题，iOS 5.0 中不存在

> ID：15969322
> 
> 赞同：1
> 
> 时间：2013-04-12T10:44:55.957
> 
> 标签：ios, objective-c

我最近将我的 iPhone 升级到了 iOS 6.1，当我发布 EASession 对象时，我开发并在 iOS 5.0 上成功运行的应用程序现在崩溃了。

控制台中出现以下错误日志：

```
-[NSRecursiveLock dealloc]: lock (<NSRecursiveLock: 0x1f5afa00> '(null)') deallocated while still in use
Break on _NSLockError() to debug.
-[NSRecursiveLock unlock]: message sent to deallocated instance 0x1f5afa00 
```

导致问题的代码行是：

```
[_session release]; 
```

导致此问题的两个 iOS 版本发生了什么变化？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:24:23.703

```
- (void)closeSession{

[[_session inputStream] close];
[[_session inputStream] removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[[_session inputStream] setDelegate:nil];
[[_session outputStream] close];
[[_session outputStream] removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[[_session outputStream] setDelegate:nil];
if (_session){
   MCRelease(_session);
}
} 
```

(NSRecursiveLock: 0x1f5afa00) 在仍在使用时释放，当您释放会话时会发生此问题，同时有输入和输出。

在您的代码中，不要自己释放会话，而是调用 closeSession。检查来自苹果的 EA 框架示例。希望这会有所帮助。

# python - 从models.py导入

> ID：15969323
> 
> 赞同：0
> 
> 时间：2013-04-12T10:45:09.630
> 
> 标签：python, django, django-models

这是我的项目的结构：

```
onlineVersion/  crawler.py  conf.txt

./onlineVersion:
onlineVersion/  URLService/  links.db  manage.py

./onlineVersion/onlineVersion:
settings.pyc  urls.pyc  wsgi.pyc      __init__.py
settings.py   urls.py   __init__.pyc  wsgi.py

./onlineVersion/URLService:
serializers.pyc  models.py       views.pyc  __init__.pyc  tests.py
models.pyc       serializers.py  views.py   __init__.py 
```

在文件 crawler.py 中，我尝试使用以下命令从 URLService 文件夹中的 models.py 文件导入：

```
from onlineVersion.URLService.models import * 
```

这给了我以下错误：

```
ImportError: No module named onlineVersion.URLService.models 
```

任何人都知道我如何摆脱这个错误信息？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T10:46:48.057

I think you should put a `__init__.py` file in the ./onlineVersion dir.

# html - 表格单元格上的额外空白

> ID：15969327
> 
> 赞同：5
> 
> 时间：2013-04-12T10:45:16.580
> 
> 标签：html, css, html-table, space

![在此处输入图像描述](https://i.stack.imgur.com/pmQtA.png)

我正在创建一个包含 5 张图像的表格，每个单元格中一张。我希望它跨越 920 像素，每个单元格之间有 10 像素的间隙。每个单元格等于 176，所以我将图像设置为 176px 宽。

这是我的 html 和 CSS：

```
 <table>
    <tr>
        <td><a class="fancybox-effects-c" rel="group" href="images/newhomes_02.jpeg" title="New Home Number Two"><img src="images/thumb_newhomes_01.gif" class="fade" alt="" /></a></td>
        <td><a class="fancybox-effects-c" rel="group" href="images/newhomes_02.jpeg" title="New Home Number Two"><img src="images/thumb_newhomes_01.gif" class="fade" alt="" /></a></td>
        <td><a class="fancybox-effects-c" rel="group" href="images/newhomes_01.jpeg" title="New Home Number Three"><img src="images/thumb_newhomes_01.gif" class="fade" alt="" /></a></td>
        <td><a class="fancybox-effects-c" rel="group" href="images/newhomes_02.jpeg" title="New Home Number Four"><img src="images/thumb_newhomes_01.gif" class="fade" alt="" /></a></td>
        <td><a class="fancybox-effects-c" rel="group" href="images/newhomes_01.jpeg" title="New Home Number Five"><img src="images/thumb_newhomes_01.gif" class="fade" alt="" /></a></td>
</table>

table {
    width:100%;
    cell-padding:"0";
    cell-spacing:"0";
    margin:0;
    border:none;
}

td {
    width:176px;
} 
```

你可以在我附加的图片中看到。每个单元格的右侧都有这个空白区域。我认为 cell-padding 和 cell-spacing 会解决它，但它没有。即使 td 设置 176px 的宽度也不起作用。我究竟做错了什么？有没有更好的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T10:47:38.187

你需要`cellpadding`和`cellspacing`在表标签

```
<table cellpadding="0" cellspacing="0"> 
```

**[演示](http://jsfiddle.net/psh4u/)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T11:13:38.253

您需要明确设置填充、边距和边框的值。看看下面更正后的代码：

```
<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <style type="text/css">
      table {
        width: 100%;
        padding: 0;
        margin: 0;
        border: 0;
        border-collapse: collapse;
      }

      td {
        width: 176px;
        padding: 0 10px 0 0;
        margin: 0;
        border: 0;
      }
      td.last {
        padding: 0;
        margin: 0;
        border: 0;
      }
    </style>
  </head>
  <body>
    <div id="imageContainer" style="width: 920px; margin: 0; padding: 0; border: 0;">
      <table>
        <tr>
          <td>
            <a class="fancybox-effects-c" rel="group" href="#" title="New Home Number Two"
              ><img src="testImage176.jpg" class="fade" alt=""
            /></a>
          </td>
          <td>
            <a class="fancybox-effects-c" rel="group" href="#" title="New Home Number Two"
              ><img src="testImage176.jpg" class="fade" alt=""
            /></a>
          </td>
          <td>
            <a class="fancybox-effects-c" rel="group" href="#" title="New Home Number Three"
              ><img src="testImage176.jpg" class="fade" alt=""
            /></a>
          </td>
          <td>
            <a class="fancybox-effects-c" rel="group" href="#" title="New Home Number Four"
              ><img src="testImage176.jpg" class="fade" alt=""
            /></a>
          </td>
          <td class="last">
            <a class="fancybox-effects-c" rel="group" href="#" title="New Home Number Five"
              ><img src="testImage176.jpg" class="fade" alt=""
            /></a>
          </td>
        </tr>
      </table>
    </div>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T10:54:42.067

`cell-spacing`并且`cell-padding`不存在于 CSS 中。

对于您要实现的目标，您可以使用：

```
border-spacing: 10px; 
```

这是一个演示：http: [//jsfiddle.net/Town/7Gkxr/](http://jsfiddle.net/Town/7Gkxr/)

和

```
padding: 0 // applied to your td elements, gives you the equivalent of cellpadding="0" 
```

有一个关于这个的现有问题：[Set cellpadding and cellspacing in CSS?](https://stackoverflow.com/questions/339923/how-to-set-cellpadding-and-cellspacing-in-css)

此外，由于您的表格包含图像，我将删除 和 的宽度设置`table`，`td`因为表格无论如何都会与图像的总和一样宽。

# java - Java Rmi 异常

> ID：15969328
> 
> 赞同：0
> 
> 时间：2013-04-12T10:45:16.627
> 
> 标签：java, rmi, java-server

我想建立一个RMI服务器，我试过这样

```
package first_project;

import java.rmi.Naming;
import java.rmi.RemoteException;
import java.rmi.server.UnicastRemoteObject;
import java.util.ArrayList;

public class Server extends UnicastRemoteObject implements ServerInterface {

    // list for know users
    protected ArrayList<ClientInterface> clients = new ArrayList<ClientInterface>();

    public Server() throws RemoteException {}

     //logged in clients get a notification that a new user has joined the chat
     // remote reference to the new client is added to the ArrayList.
    public void login(ClientInterface client, String nickname) throws RemoteException {
        broadcastMessage("--> " + nickname + " is entering the chatroom", "");  
        clients.add(client);
    }

    // used for broadcasting an incoming message
        //  and the nickname of its sender to all currently logged in clients .
        //remote call of the method getMessage which is

    public void broadcastMessage(String message, String nickname) throws RemoteException {
        for (int i = 0; i < clients.size(); i++) {
            ClientInterface c = clients.get(i);
            try {
                c.getMessage(message, nickname);
            } catch (RemoteException e) {

                            logout(c);
                    i = i - 1;
            } }}

        //remove user
    public void logout(ClientInterface client) {
        clients.remove(client);
    }

    public static void main(String[] args) {
        try {
            Naming.rebind("Server", new Server());
            System.out.println("Server is ready");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

但我不知道为什么我得到这个异常：

```
java.rmi.ConnectException: Connection refused to host: 192.168.1.3; nested exception is: 
        java.net.ConnectException: Connection refused: connect
        at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:601)
        at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:198)
        at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:184)
        at sun.rmi.server.UnicastRef.newCall(UnicastRef.java:322)
        at sun.rmi.registry.RegistryImpl_Stub.rebind(Unknown Source)
        at java.rmi.Naming.rebind(Naming.java:160)
        at first_project.Server.main(Server.java:47)
Caused by: java.net.ConnectException: Connection refused: connect
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
        at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
        at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
        at java.net.Socket.connect(Socket.java:519)
        at java.net.Socket.connect(Socket.java:469)
        at java.net.Socket.<init>(Socket.java:366)
        at java.net.Socket.<init>(Socket.java:180)
        at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:22)
        at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketFactory.java:128)
        at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:595)
        ... 6 more 
```

请问我做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:53:02.927

你有没有启动注册表。启动注册表后尝试
*rmiregistry* for windows
*rmiregistry &* for Linux/Unix

# php - 如何使用 PHP 与 Instagram 共享链接和照片

> ID：15969330
> 
> 赞同：5
> 
> 时间：2013-04-12T10:45:18.083
> 
> 标签：php, photo, sharing, instagram

如何使用 PHP 与 Instagram 共享链接和照片？我找不到“与 Instagram 分享照片”的任何内容。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T15:05:45.763

“与 instagram 分享照片”是指您试图通过 PHP 将照片发布到 Instagram 吗？您不能通过 API 将图片发布到 Instagram。

# sql - 创建过程出错

> ID：15969331
> 
> 赞同：0
> 
> 时间：2013-04-12T10:45:19.390
> 
> 标签：sql, plsql

我创建的 proc 出现了一些错误。proc主体是：-

```
CREATE OR REPLACE PROCEDURE suppress_termination_charge(v_curr_date IN DATE)
IS

TYPE suppress_term_cust_type IS RECORD (id NUMBER(11),pev NUMBER(11),piv NUMBER(11));
TYPE cur_suppress_term_cust IS REF CURSOR RETURN suppress_term_cust_type;
v_count NUMBER(4);
v_serv_item suppress_term_cust_type;
v_serv_itm_pev service_item.price_excluding_vat%TYPE;
v_serv_itm_piv service_item.price_including_vat%TYPE;

BEGIN

v_count:=0;

IF NULL=v_curr_date THEN
    SELECT sysdate INTO v_curr_date FROM dual;
END IF;

OPEN cur_suppress_term_cust FOR
    SELECT id AS id,price_excluding_vat AS pev,price_including_vat AS piv  FROM service_items;

LOOP 
FETCH cur_suppress_term_cust INTO v_serv_item;
EXIT WHEN cur_suppress_term_cust%NOTFOUND;

    v_comment := 'Price changed from ('||v_serv_item.pev||', '||v_serv_item.piv||') to (0,0) (PEV, PIV) on '||v_curr_date||' for managed cease';

    UPDATE service_items
    SET price_including_vat=0, price_excluding_vat=0 , comments= v_comment
    WHERE id = v_serv_item.id;

    v_count:=v_count+1;

    IF v_count=5000 THEN
        COMMIT;
        v_count:=0;
    END IF;

END LOOP;

CLOSE cur_suppress_term_cust;

END;
/ 
```

错误如下：-

```
SQL> SHOW ERROR;
Errors for PROCEDURE SUPPRESS_TERMINATION_CHARGE:
LINE/COL ERROR
-------- -----------------------------------------------------------------
19/30    PLS-00103: Encountered the symbol "IS" when expecting one of the
         following:
         . ( % ; for

23/2     PLS-00103: Encountered the symbol "FETCH" when expecting one of
         the following:
         constant exception <an identifier>
         <a double-quoted delimited-identifier> table LONG_ double ref
         char time timestamp interval date binary national character
         nchar

LINE/COL ERROR
-------- -----------------------------------------------------------------
41/2     PLS-00103: Encountered the symbol "CLOSE" when expecting one of
         the following:
         end not pragma final instantiable order overriding static
         member constructor map 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:02:31.580

我看到了错误，但没有看到您报告的错误：

```
 SELECT sysdate INTO v_curr_date FROM dual; 
```

`v_curr_date`是输入参数，不能用作 SELECT 或 FETCH 的目标。

```
 OPEN cur_suppress_term_cust FOR...
    FETCH cur_suppress_term_cust INTO v_serv_item;
    EXIT WHEN cur_suppress_term_cust%NOTFOUND. 
```

`cur_suppress_term_cust`是 TYPE，而不是游标变量。

```
 v_comment := ... 
```

`v_comment`未声明。

尝试解决这些问题，看看情况是否有所改善。

分享和享受。

# php - jQuery成功函数不提醒

> ID：15969333
> 
> 赞同：0
> 
> 时间：2013-04-12T10:45:23.597
> 
> 标签：php, jquery, html, json, web-services

这是问题所在，我有以下功能

```
$(document).ready(function() {
$('#selectTypeDD').change(function() {
    var type = $("#selectTypeDD option:selected").text();
    changeType(type);
    alert(type);
});
}); 
```

`pub`当我选择下拉菜单的城市时，警报会打印出来。

changeType 是这个函数

```
function changeType(type)
{
$.ajax
({
    type: 'GET',
    url: 'webservice.php',
    data: {type: type},
    success: function(response, textStatus, XMLHttpRequest)
    {
        alert("SUCCESS");
    }
});
} 
```

我在 Firebug 中得到了这个结果

```
pub[{"name":"The Master Builder","lon":"-1.34532","lat":"50.9303"},{"name":"Goblets","lon":"-1.40455","lat":"50.9088"},{"name":"Rat and Parrot","lon":"-1.40442","lat":"50.9085"},{"name":"The Victory Inn","lon":"-1.31415","lat":"50.8588"},{"name":"The King and Queen","lon":"-1.31356","lat":"50.8586"} 
```

名单还在继续，但我认为这些是最重要的。现在的问题是，我想对结果做一些事情但它没有用，所以我测试了为什么会这样，并在`alert("SUCCESS")`成功函数中输入。但它甚至不会打印出警报。为什么？我究竟做错了什么？werbservice 运行没有问题。当我打开我的网站 localhost/blabla/webservice.php?type=pub 时，它会打印出所有内容。那么可能是什么问题呢？

这是我的网络服务的聚会

```
else if(isset($_GET['type']))
{
$type = $_GET['type'];
echo $type;
if($result = $mysqli->query("SELECT name, lon, lat FROM pointsofinterest WHERE type = '".$type."'"))
{
    $tempArray = array();
    while($row = $result->fetch_assoc())
    {
        $tempArray = $row;
        array_push($array, $tempArray); 
    }
    echo json_encode($array);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:47:43.620

改变你的

```
success: function(response, textStatus, XMLHttpRequest) 
```

至

```
success: function(response) 
```

# google-maps - 如何从谷歌街景中抓取视频 Hyperlapse

> ID：15969335
> 
> 赞同：3
> 
> 时间：2013-04-12T10:45:31.677
> 
> 标签：google-maps, video

谷歌创建了基于 javascripts 的新项目。[http://hyperlapse.tllabs.io/](http://hyperlapse.tllabs.io/)

引擎创建延时视频但不将其生成为可见视频文件。

如何得到它？只能通过桌面视频采集器从屏幕上保存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-29T20:48:20.543

好的，我找到了一种方法，但它很复杂。首先，它实际上并不是由 Google 制作的，而是由 T+L 实验室使用 Google Maps API 和 JavaScript 制作的。现在，有趣的部分：当您说没有预先制作的方法来保存输出视频时，您是对的，因此您必须在使用屏幕捕获之前弄乱源代码（以删除覆盖）。你需要什么：

*   谷歌浏览器
*   截屏软件
*   Windows Live影音制作

脚步：

1.  首先，像往常一样创建你的超延时。
2.  准备好导出后，打开“检查元素”（在大多数浏览器中，默认键是“F12”）
3.  应该会弹出一个包含大量文本的窗口。向外拖动边缘以放大窗口。
4.  将鼠标向下移动到彩色文本上。执行此操作时，页面的不同部分应一次以蓝色突出显示。
5.  你看到的是一个自动系统；当您将鼠标悬停在网站上某个对象的代码上时，浏览器会为您突出显示它！
6.  四处移动鼠标，直到找到页面底部突出显示滚动条的部分。
7.  单击一次以选择它，然后按删除。滚动条应该消失。
8.  重复步骤 6-7 对超延时本身之上的所有其他内容。
9.  您现在应该有一个清晰的空间来记录！
10.  最后，在录制之前，按“F11”最大化窗口，移除顶部的导航栏。
11.  激活您的屏幕捕获并记录超延时（注意：确保在您捕获时鼠标光标不在屏幕上）
12.  再次按“F11”重新获得导航栏，然后按“F5”刷新页面并取回已删除的对象。
13.  使用 Windows Live 电影制作器将捕获的内容编辑到正确的部分，然后导出为高质量电影。
14.  你完成了！

# objective-c - 一个一个地为 UITableViewCells 设置动画

> ID：15969336
> 
> 赞同：1
> 
> 时间：2013-04-12T10:45:32.270
> 
> 标签：objective-c, ios5, core-animation, objective-c-blocks, uiviewanimation

我正在尝试动画，其中 UITableView 已经到位，但是每个 UITableViewCells 的子视图（它本身包含单元格的内容视图）都在窗口范围之外。它在屏幕之外。当视图加载时，单元格从左到右，一个一个地动画，直到框架的最右边的 x 值接触到 UITableView 的最右边的 x 值。

动画是这样的，一旦第一个单元格起飞，第二个单元格在第一个单元格完成动画之前起飞。同样，第三个单元格在第二个单元格完成动画之前起飞。但是，我无法做到这一点，并且我所有的行都动画在一起。

```
-(void)animateStatusViewCells:(SupportTableViewCell *)cell
{
__block CGPoint center;
[UIView animateWithDuration:0.55 delay:0.55 options:UIViewAnimationOptionCurveEaseIn animations:^{
    center = cell.statusView.center;
    center.x += (cell.frame.size.width - 20);
    cell.statusView.center = center;
}completion:^(BOOL success){
    NSLog(@"Translation successful!!!");
    double delayInSeconds = 2.0;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        //[self animateStatusViewCells:cell];
    });
}];
}

 -(void)animateSupportTableView:(UITableView *)myTableView
 {
   NSMutableArray *cells = [[NSMutableArray alloc] init];
   NSInteger count = [myTableView numberOfRowsInSection:0];

 for (int i = 0; i < count; i++) {
    [cells addObject:[myTableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:0]]];
}

for (SupportTableViewCell *cell in cells) {

    [self animateStatusViewCells:cell];
   }

}

-(void)viewDidAppear:(BOOL)animated{
   [super viewDidAppear:animated];
   [self animateSupportTableView:_statusTableView];
 } 
```

这是自定义 UITableViewCell 的 initWithStyle 方法：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
 {
 self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
 if (self) {
    // Initialization code
    _statusView = [[UIView alloc] initWithFrame:self.frame];
    self.contentView.backgroundColor = [UIColor greenColor];
    self.contentView.alpha = 0.7;
    CGPoint cellCenter = self.center;
    cellCenter.x = self.center.x -  (self.frame.size.width - 20);
    _statusView.center = cellCenter;

    [self addSubview:_statusView];
    [_statusView addSubview:self.contentView];
 }
 return self; 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T19:14:33.673

您需要为每个动画使用不同的延迟值。不要使用 0.55 的恒定延迟，而是将单元格编号传递给您的 animate 方法，并使用以下内容：

```
CGFloat delay = .55 + cellNumber * cellDelay;
[UIView animateWithDuration: 0.55 delay: delay options:UIViewAnimationOptionCurveEaseIn animations:
^{
  //animation code
}
]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-12T16:52:25.440

对于它的价值，这是一个干净的解决方案：

```
func tableView(tableView: UITableView, willDisplayCell cell: UITableViewCell,     forRowAtIndexPath indexPath: NSIndexPath) {
    let trans = CATransform3DMakeTranslation(-cell.frame.size.width, 0.0, 0.0)
    cell.layer.transform = trans

    UIView.beginAnimations("Move", context: nil)
    UIView.setAnimationDuration(0.3)
    UIView.setAnimationDelay(0.1 * Double(indexPath.row))
    cell.layer.transform = CATransform3DIdentity
    UIView.commitAnimations()
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:58:11.283

尝试这个

在某处声明这一点。

```
int c=0;

-(void)animateStatusViewCells:(SupportTableViewCell *)cell
{
__block CGPoint center;
[UIView animateWithDuration:0.55 delay:0.55 options:UIViewAnimationOptionCurveEaseIn animations:^{
    center = cell.statusView.center;
    center.x += (cell.frame.size.width - 20);
    cell.statusView.center = center;
}completion:^(BOOL success){
c++;
if(c<[cells count]){
[self animateStatusViewCells:[cells objectAtIndex:c]];
}
}];
}

-(void)animateSupportTableView:(UITableView *)myTableView
 {
   NSMutableArray *cells = [[NSMutableArray alloc] init];
   NSInteger count = [myTableView numberOfRowsInSection:0];

 for (int i = 0; i < count; i++) {
    [cells addObject:[myTableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:0]]];
}

   [self animateStatusViewCells:[cells objectAtIndex:c]];

} 
```

# java - 从 Java 程序，可移植的方式来编写带重音符号的字符串

> ID：15969345
> 
> 赞同：4
> 
> 时间：2013-04-12T10:45:57.460
> 
> 标签：java, windows, internationalization, portability, non-ascii-characters

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T11:20:09.587

在 Java 1.6 中，您可以使用[System.console()](http://docs.oracle.com/javase/6/docs/api/java/io/Console.html)而不是 System.out.println() 来向控制台显示重音字符。

```
public class Test2 {
  public static void main(String args[]){
   String s = "caractères français :  à é \u00e9"; // Unicode for "é"
   System.out.println(s);
   System.console().writer().println(s);
  }
} 
```

输出是

```
C:\temp>java Test
caractþres franþais :  Ó Ú Ú
caractères français :  à é é 
```

另请参阅[将重音字符输出到控制台](http://www.rgagnon.com/javadetails/java-0046.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T10:49:13.910

Use unicode escaped sequence: `\u00E8`

```
System.err.println("Param\u00E8tre manquant. … "); 
```

[Here's](http://www.tamasoft.co.jp/en/general-info/unicode.html) an useful Unicode character table.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T10:50:12.053

Try using `\u<XXXX>` when encoding unicode characters. It won't look pretty in code, but it will work and be portable.

For instance:

```
String specialCharacters= "\u00E1 \u00E9 \u00ED \u00F3 \u00FA";
System.out.println(specialCharacters); // This will print á é í ó ú 
```

Check Alepac's answer for a table of unicode characters.

# delphi - StrToDate do not use my FormatSetting

> ID：15969349
> 
> 赞同：0
> 
> 时间：2013-04-12T10:46:20.383
> 
> 标签：delphi, datetime, delphi-2007

In my big application I try to read another dateformat than my locale settings. But that failed with exception. So I made a simple demo to reproduce.

Could be that I made a simple error. My local settings in Windows XP is Finnish date format that is 'd.m.yyyy'. I want to read Swedish format that is 'yyyy-mm-dd'. Please help!

```
unit Unit5;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs;

const
  cnFormat     = 'yyyy-mm-dd';             // Swedish dateformat
  cnFIFormat   = 'd.m.yyyy';               // Finnish dateformat

type
  TForm5 = class(TForm)
    procedure FormCreate(Sender: TObject);
  private
    fSetting: TFormatSettings;
    function GetCustomDateFormatSettings(aDateFormat: String = cnFormat): TFormatSettings;
    function GetSafeDate(aDate: String): TDate;
  end;

var
  Form5: TForm5;

implementation

{$R *.dfm}

procedure TForm5.FormCreate(Sender: TObject);
var
  vDate: TDate;
begin
  fSetting := GetCustomDateFormatSettings;
  vDate := GetSafeDate('2010-01-04');
end;

function TForm5.GetCustomDateFormatSettings(aDateFormat: String): TFormatSettings;
begin
  GetLocaleFormatSettings(LOCALE_SYSTEM_DEFAULT, Result);
  Result.ShortDateFormat := aDateFormat;
end;

function TForm5.GetSafeDate(aDate: String): TDate;
begin
  try
    Result := StrToDate(aDate, fSetting);  // <- Exception here
  except
    on E: EConvertError do
    begin
      // logic to recover from exception
    end;
  end;
end;

end. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:01:00.433

好的，得到了​​答案。我忘记了日期分隔符。所以为了避免在演示中出现异常，我添加了一行。然后必须使它更具活力...

```
function TForm5.GetCustomDateFormatSettings(aDateFormat: String): TFormatSettings;
begin
  GetLocaleFormatSettings(LOCALE_SYSTEM_DEFAULT, Result);
  Result.ShortDateFormat := aDateFormat;
  Result.DateSeparator := '-';
end; 
```

# sql - getting more then 1 data from other tables while joining them

> ID：15969355
> 
> 赞同：0
> 
> 时间：2013-04-12T10:47:05.217
> 
> 标签：sql, sql-server, join, inner-join

![screenshot of the query](https://i.stack.imgur.com/EH0wx.jpg)

I think the screenshot of the query is pretty much self-explanatory.

What I need, is simply to get 2 addresses from CustomerAddresses table instead of only 1 like in this example. **1 for ShippingAddress and the other for BillingAddress.**

It sounds like It's quite easy to solve this but obviously I'm missing something. Thanks in advance..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:49:09.600

您需要将包含地址的表加入两次。一次`ShippingAddressID`又一次`BillingAddressID`：

```
SELECT
    ...
    ShippingAddress.Address as 'ShippingAddress',
    BillingAddress.Address as 'BillingAddress',
    ...
FROM
    ...
    INNER JOIN CustomerAddresses as ShippingAddress
      ON Orders.ShippingAddressID = ShippingAddress.CustomerAddressID
    INNER JOIN CustomerAddresses as BillingAddress
      ON Orders.BillingAddressID = BillingAddress.CustomerAddressID 
```

# ios - 离线 iOS 网络应用所需的用户统计信息

> ID：15969362
> 
> 赞同：0
> 
> 时间：2013-04-12T10:47:14.340
> 
> 标签：ios, web, offline

我正在为销售团队创建一个 iPad 定制网络应用程序，有时需要离线工作。到目前为止，一切都很好。

客户希望能够获取销售团队何时使用该应用程序的统计信息？我可以在本地写入文件，然后在给定时间上传此文件或通过电子邮件发送吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:00:05.073

如果我正确理解你的问题，答案是肯定的！

您可以在应用文档中写入和读取任何类型的文件。请检查此[链接](https://stackoverflow.com/questions/11078647/how-to-read-write-file-with-ios-in-simulator-as-well-as-on-device)。获取您的文件信息后，您可以通过电子邮件或保管箱发送或......

# java - 此模式的正则表达式

> ID：15969364
> 
> 赞同：1
> 
> 时间：2013-04-12T10:47:16.513
> 
> 标签：java, regex

我想要一个模式的正则表达式

1）字符串可以包含至少一个'/'和一个数字（/2/）或带空格的数字（//232 232/）或只有一个空格（/// ////）

2) 不允许出现文字

```
**valid inputs:**

/1 323////
///////323 3232
//4343//4343
3/

**Invalid inputs:**

/////
121
///////3434dsds344//
//dsd///232 
```

我已经使用过`^/*(?:\\d[\\d ]*/*)*$`，但这对于一些有效的输入来说是失败的，比如`232/////232`

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:51:52.740

这个应该工作：

```
(?=.*\d)(?=.*\/)^[\d\/ ]+$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:56:26.517

一个简单的替换就足够了：

```
^(?:\d+ */+|/+ *\d+)[\d/ ]*$ 
```

# php - Ajax Get 不工作？

> ID：15969373
> 
> 赞同：0
> 
> 时间：2013-04-12T10:47:52.657
> 
> 标签：php, jquery, ajax

```
function submitForm()
{
    $.ajax({
        type: 'GET', 
        url: 'iccrefresh.php', 
        data: $('this').serialize(),
        dataType:'script',
        error: function()
                { $( "#dialog_error" ).dialog( "open" ); },
        success: function()
                { $( "#dialog_success" ).dialog( "open" ); }
            });
    return false;
} 
```

在 PHP 中

```
echo "<form name='refresh' onsubmit='return submitForm();'>";
echo "<input type='hidden' name='team1' value=$teamx />";
echo "<input type='hidden' name='team2' value=$teamy />";
echo "<input type='submit' name='submit' align='middle' value='Refresh Match Score'/>";
echo "</form>"; 
```

有什么原因我不能送第 1 队和第 2 队过去吗？我收到一条成功消息，但 iccrefresh 无法访问团队 1 和团队 2 的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:50:55.270

不存在名为 的标签`this`。你必须写`$(this)`而不是`$('this')`......

但这在这里也是错误的，您必须将`this`（元素）传递给函数，然后将其用作“*选择器*”：

```
function submitForm(form)
{
    $.ajax({
        type: 'GET', 
        url: 'iccrefresh.php', 
        data: $(form).serialize(),
        dataType:'script',
        error: function()
                { $( "#dialog_error" ).dialog( "open" ); },
        success: function()
                { $( "#dialog_success" ).dialog( "open" ); }
            });
    return false;
} 
```

在 PHP 中：

```
echo "<form name='refresh' onsubmit='return submitForm(this);'>";
echo "<input type='hidden' name='team1' value='$teamx' />";
echo "<input type='hidden' name='team2' value='$teamy' />";
echo "<input type='submit' name='submit' align='middle' value='Refresh Match Score'/>";
echo "</form>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:51:24.710

您不应将其括在引号中，`$('this')`会找到标签名称`this`并且不会引用当前`form`对象。

*改变*

```
data: $('this').serialize(), 
```

*到*

```
data: $(this).serialize(), 
```

此外，您正在使用 javascript 绑定事件，因此您需要显式传递源代码。

*html*

```
echo "<form name='refresh' onsubmit='return submitForm();'>"; 
```

*Javascript*

```
function submitForm(formobj)
{
    $.ajax({
        type: 'GET', 
        url: 'iccrefresh.php', 
        data: $(formobj).serialize(),
        dateType:'script',
        error: function()
                { $( "#dialog_error" ).dialog( "open" ); },
        success: function()
                { $( "#dialog_success" ).dialog( "open" ); }
            });
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:51:39.443

删除数据类型“脚本”。您正在从请求中返回 html，因此 jquery 应该为您解析它

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-12T10:50:04.053

试试这个：

```
echo "<form name='refresh' onsubmit='return submitForm();'>";
echo "<input type='hidden' name='team1' value='".$teamx."' />";
echo "<input type='hidden' name='team2' value='".$teamy."' />";
echo "<input type='submit' name='submit' align='middle' value='Refresh Match Score'/>";
echo "</form>"; 
```

# .net - 表单 InitializeComponent 需要很长时间才能开始

> ID：15969383
> 
> 赞同：0
> 
> 时间：2013-04-12T10:48:22.063
> 
> 标签：.net, winforms, optimization

不久前，我的应用程序开始需要很长时间才能显示主窗口。我`System.Diagnostics.Profiler`在表单构造函数中添加了一个如下：

```
Private m_profiler As New System.Diagnostics.Stopwatch
Public Sub New()
  ' This call is required by the designer.
  m_profiler.Restart()
  InitializeComponent()
  m_profiler.Stop()
  Rhino.RhinoApp.WriteLine("InitializeComponent() took {0}ms", m_profiler.ElapsedMilliseconds)

  ' Add any initialization after the InitializeComponent() call.
End Sub

<System.Diagnostics.DebuggerStepThrough()> _
Private Sub InitializeComponent()
  Rhino.RhinoApp.WriteLine("InitializeComponent() init took {0}ms", m_profiler.ElapsedMilliseconds)

  Me.components = New System.ComponentModel.Container()
  .....yada yada yada 
```

结果是：

```
InitializeComponent() init took 2572ms
InitializeComponent() took 2837ms 
```

所以几乎所有的时间都花在调用`InitializeComponent()`方法上，*我认为*这是因为 jitting。我可以做些什么来加速主窗体的显示吗？

在没有任何控件的情况下显示表单，在后台线程中加载这些控件以便编译它们，然后在 UI 线程上实例化新控件并将它们添加到表单中是否有意义？

我能做些什么来找出这段时间真正占用的东西吗？

我的应用程序是一个非托管 C++ 桌面应用程序的纯 .NET 插件，它公开了一个 .NET SDK。它目前在 Windows 7 上作为 64 位应用程序运行。

# delphi - Delphi 和 Windows 登录事件

> ID：15969389
> 
> 赞同：2
> 
> 时间：2013-04-12T10:48:45.780
> 
> 标签：delphi, windows-services, delphi-2010

我想知道如何在 delphi windows 服务中接收 windows 登录和注销事件。服务本身已经构建，现在我想显示一个打开设置/日志窗口的系统托盘图标。要显示该图标，我需要知道用户是否已登录...

我已经看到了一些关于 c# 的“系统事件通知服务”的信息，但是关于 delphi 的信息很少。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T12:01:32.723

由于用户会话基于 RDS（[远程桌面服务](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383464%28v=vs.85%29.aspx)- 前终端服务）技术，您可以尝试[WTSRegisterSessionNotification](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383841%28v=vs.85%29.aspx) / [WTSRegisterSessionNotificationEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383841%28v=vs.85%29.aspx) API。[他们为您提供有关各种事件](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383828%28v=vs.85%29.aspx)的信息，例如：

*   WTS_SESSION_LOGON
*   WTS_SESSION_LOGOFF
*   WTS_REMOTE_CONNECT
*   WTS_REMOTE_DISCONNECT
*   WTS_CONSOLE_CONNECT
*   WTS_CONSOLE_DISCONNECT 等

根据事件，您可以找到用户的会话 ID。然后你可以在这个特定的会话中启动一个进程（即[注入一个程序到一个特定的RDS会话](http://www.remkoweijnen.nl/blog/2007/10/20/how-to-launch-a-process-in-a-terminal-session/)）。例如，您可以在用户会话中启动一个显示您的图标的进程。该进程可以通过命名管道、内存映射文件等与您的服务进行通信。

我个人使用这些事件来在用户断开会话时停止 GUI 密集型工作（即停止更新标签、列表框、备忘录等）

** 这些 API 需要有一个接收通知的窗口。[在服务中，您需要创建一个带有消息循环的隐藏服务（另一个主题）](https://stackoverflow.com/a/6902074/1022219)

# java - 使用 POI 在现有工作表之间创建 Excel 工作表

> ID：15969390
> 
> 赞同：4
> 
> 时间：2013-04-12T10:48:45.410
> 
> 标签：java, excel, apache-poi

我使用 org.apache.poi.ss.usermodel.Sheet 类构建代码以满足我的客户要求

现在我有一个新要求，即在两个现有工作表之间创建一个新的 Excel 工作表。在现有的 excel 文件中，索引号 p、1、2 处已经有三张工作表。我想在索引号 2 处创建一个工作表，将索引号 2 处的工作表移动到 3。

我可以使用以下代码在 Excel 文件中找到工作表名称：

```
for (int i = 0; i < wb.getNumberOfSheets(); i++) 
        {  
          System.out.println("Sheet name: " + wb.getSheetName(i));
        } 
```

此外，我可以使用以下代码在 Excel 文件中找到工作表索引号：

```
System.out.println("Sheet name: " + wb.getSheetIndex("Retail - All")); 
```

我用来创建新工作表的代码是：`Sheet failuresSheet= wb.createSheet("Failures");`这是在最后创建一个新工作表。请让我知道我的要求的正确代码。

请记住，我使用该课程`org.apache.poi.ss.usermodel.Sheet`来满足我的要求。

请让我知道如何在索引号 2 处创建工作表，将索引号 2 处的工作表移动到 3。提前谢谢您。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T10:57:55.780

看看[这个](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Workbook.html#setSheetOrder%28java.lang.String,%20int%29)javadoc，你可以用那个方法改变shhet顺序。所以你需要：

```
wb.setSheetOrder("Failures",1); //the index is 0 based 
```

# java - Dojo not getting loaded into rhino emmbedded in java

> ID：15969392
> 
> 赞同：1
> 
> 时间：2013-04-12T10:49:00.953
> 
> 标签：java, dojo, rhino

I'm trying to render the dojo charts server side. I came across the Rhino and envjs for server side browser emulation. when I tried to an example program to load the dojo.js in the rhino embedded in the java impl, the exception is thrown,

> > Exception in thread "main" javax.script.ScriptException: sun.org.mozilla.javascript.EcmaError: ReferenceError: "location" is not defined. (#15) in at line number 15.

My code is as follows:

```
import javax.script.*;
import java.io.*;

public class Java6RhinoRunner {
  public static void main(String[] args) throws ScriptException {
    new Java6RhinoRunner().load(args[0]);
  }

  private final ScriptEngine engine;

  public Java6RhinoRunner() throws ScriptException {
    ScriptEngineManager factory = new ScriptEngineManager();
    this.engine = factory.getEngineByName("JavaScript");

    this.engine.put("Java6RhinoRunner", this);
    this.engine.eval("function load(filename) { Java6RhinoRunner.load(filename); }");
  }

  public void load(String filename) throws ScriptException {
    try {
      this.engine.eval(new FileReader(filename));
    }
    catch(FileNotFoundException e) {
      throw new RuntimeException("Error loading javascript file: " + filename, e);
    }
  }
} 
```

Lots of googling has been done but all in vain. Please help me to solve this problem

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:31:05.070

代码失败是因为 Dojo 检测到它在 Rhino 环境中运行的方式。

Dojo 代码是为了与 Rhino 的 shell ( ) 兼容而编写的，`org.mozilla.javascript.tools.shell.Main`并通过查找由`org.mozilla.javascript.tools.shell.Global`. 如果这些不存在，Dojo 假定它在浏览器环境中运行。

通过在您的脚本引擎中定义它们来模拟这些功能可能是可能的，但我还没有尝试过。

*我写[了一篇关于在嵌入式 Rhino 中运行 Dojo 的博客文章，](http://illegalargumentexception.blogspot.co.uk/2013/01/dojo-bootstrapping-in-embedded-rhino.html)但它不使用`ScriptEngine`API。*

# magento - One Domain - Two Stores - Magento

> ID：15969393
> 
> 赞同：1
> 
> 时间：2013-04-12T10:49:02.507
> 
> 标签：magento

I have Magento installed on my server.

My client would like to host 2 'Stores' on the same domain.

Each 'Store' would have different Products within it.

Should I create 2 separate Store 'Views' or 2 separate Stores? Or perhaps just create 2 categories with the Store Name for each?

Thanks for any pointers :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:53:43.423

最后，我创建了 2 个商店和 2 个根类别（商店 A 和商店 B）。

我也跟着这个教程： http: [//www.magentocommerce.com/wiki/3_-_store_setup_and_management/catalog/creating_and_assigning_root_categories](http://www.magentocommerce.com/wiki/3_-_store_setup_and_management/catalog/creating_and_assigning_root_categories)

希望这对某人有用:-)

# node.js - 带有websocket的Nodejs服务器无法远程工作

> ID：15969395
> 
> 赞同：1
> 
> 时间：2013-04-12T10:49:05.893
> 
> 标签：node.js, websocket

大家好，我的nodejs服务器有问题，我在debian上运行javascript服务器，localy运行良好，当我尝试从本地网络外部调用它时问题就开始了，我的IP是固定的，并且我已经安装了所有l需要，因为它在本地工作。您知道我是否需要在服务器端或客户端更改某些内容？我的客户：

```
socket = new WebSocket ('ws://172.17.31.7:8080', 'proof'); 
```

我的服务器：

```
wsServer.on('request', function(request)
{
     if ( ! originIsAllowed(request.origin))
     {
           // Make sure we only accept requests from an allowed origin
          request.reject();
          console.log((new Date()) + ' Connection from origin ' + request.origin + ' rejected.');
          return;
     }

var con = request.accept('proof', request.origin);
} 
```

# android - 如何在android中维护我的应用程序的登录状态

> ID：15969397
> 
> 赞同：0
> 
> 时间：2013-04-12T10:49:09.363
> 
> 标签：android

如何维护我的应用程序的登录状态

1.  通过任务管理器杀死后
2.  同时关闭我的设备。我怎么能在android中以编程方式做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:52:43.133

```
getSharedPreferences("Name", MODE_PRIVATE).edit().putBoolean("isLoggedIn", true).commit(); 
```

登录时设置此项。注销后

```
getSharedPreferences("Name", MODE_PRIVATE).edit().putBoolean("isLoggedIn", false).commit(); 
```

或者，如果您的服务器在登录后返回会话，您可以保存该会话`SharedPreferences`并将其用于未来的 API 请求。

您还可以依靠`onSavedInstanceState`函数来保存一些有助于重新创建视图的值。这也会有所帮助。

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    // TODO Auto-generated method stub

    super.onSaveInstanceState(outState);
    outState.putString(key, value);
} 
```

[有关更多信息，请参阅开发人员文档](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:52:06.107

您可以将用户名和密码存储在加密的共享首选项中。

使用这些用户名、密码并在后台（不是前台）再次登录。

# java - 关于 Java 中覆盖的查询

> ID：15969403
> 
> 赞同：1
> 
> 时间：2013-04-12T10:49:19.347
> 
> 标签：java

考虑我有一个这样的界面：

```
public interface Test {
  //Basically life cycle methods
  public void beforeStart(); 
  public void start();
  public void end();
} 
```

还有一个抽象类，它为所有方法提供基本的或空的实现。

```
public abstract class TestAdapter implements Test {
   //Implementations here
} 
```

这样扩展的客户`TestAdapter`就可以覆盖一个或所有生命周期方法。我要求每个消费者都应该扩展`TestAdapter`类，并且他们可以覆盖`TestAdapter`.

但问题是每个消费者都`TestAdapter`创建了一个 POJO 类的实例，应该对其生命周期进行管理，`beforeStart()`例如等等。

我的问题是：

1.  如果客户端覆盖所有生命周期方法没有问题，但如果他不覆盖任何方法，我应该能够为该特定生命周期方法执行默认服务，并且我需要参考创建的用户`testAdapter`实现类中的 POJO 。我该如何继续实施呢？
2.  如您所知，这有点类似于 servlet 的生命周期。那么有人可以指导我吗？还是我让我的设计复杂化了？

如果您需要更多关于相同的说明，请告诉我。

编辑： **注意**：如果您觉得我正在尝试重新发明轮子，您能否为上述要求提出任何替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:56:14.093

您可以在方法中使用一个参数来控制*POJO*对象。
另一方面，有很多现成的框架可供使用，而不是创建自己的，为什么要再次发明轮子？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:00:31.897

这个问题是“逐步创建对象”。这是由[Builder Pattern](http://en.wikipedia.org/wiki/Builder_pattern)解决的。

这是Java中实现Builder模式的[另一个示例](http://javapapers.com/design-patterns/builder-pattern/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T11:02:10.043

首先，我认为您应该像在大多数测试框架中看到的那样使用注释：

```
@BeforeClass
public void beforeClass() {
  // code here
}

@BeforeMethod
public void beforeMethod() {
  // code here
} 
```

如果你真的想坚持继承，你可以这样做：

```
public abstract class TestAdapter implements Test {

    private AbstractPojo myPojo;

    protected void doBeforeStart(){
        // do something which you always want to happen
        beforeStart();
    } 
    protected void doStart() {
        start();
    }
    protected void doEnd() {
        end();
    }

    // your empty implementations of Test here

    // getter and setter for myPojo
} 
```

在这种情况下，您可以在内部控制应该发生的事情，并让您的用户在他们认为合适的时候覆盖界面中的方法。

# jquery-mobile - Visual bug in Safari using jQuery Mobile - Content duplication

> ID：15969404
> 
> 赞同：59
> 
> 时间：2013-04-12T10:49:21.070
> 
> 标签：jquery-mobile, safari, easeljs, createjs

I'm building a mobile app using jQuery Mobile 1.3.0, EaselJs 0.6.0 and TweenJs 0.4.0.

So, when I load the page, some content gets visually duplicated. The DIVs are not really duplicated, it is just visual.

> *   **This bug only appears on Safari (Windows + OSX).**
> *   If I click and slide to select the page, the bug disappears.
> *   If I switch page *(with jQuery Mobile slide transition)*, it also disappears.

Here is a screenshot:

![Good and Bad screenshot examples](https://i.stack.imgur.com/hJRGh.jpg)

My code is massive so I cannot really post it fully here. I've just spent 2 hours playing around with my code to try to fix this. I really have no clue.

If you have an idea and need more information, then please let me know.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-01-27T08:21:58.850

不是一个漂亮的答案，而是一个适用于很多人的解决方法：

这听起来像是一个可能的赛车条件，您可以尝试在页面加载时设置超时（几个 MS），然后在超时后通过`display: none/block`打开`body`.

# c# - LINQ to Entities - 如何检索数据并将其用作整个项目中的变量

> ID：15969406
> 
> 赞同：0
> 
> 时间：2013-04-12T10:49:33.553
> 
> 标签：c#, linq, entity-framework

我有 1 个 WinForm 和 2 个表：

*   Form1 包含 TextBox1

*   Employee 包含 ID、LastName、FirstName、BirthDate。

*   Tasks 包含 ID、TaskName

我需要在 TextBox1 中输入 LastName 和 FirtName 以检索相关的“TaskName”（如果存在），然后使检索到的数据可从项目中的任何位置使用

我需要知道将 TaskName 变量放在哪里？以及如何修改下一个代码以达到该目的？

```
using (LINQtoEntitiesEntities MyEntities = new LINQtoEntitiesEntities())
{
ObjectQuery<Employee> Employee = MyEntities.Employee;
var query = (from p in Employee
where p.FirstName == TextBox1.Text.Trim()
select p.LasttName, p.FirstName);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:57:11.737

如果 LastName 和 FirstName 被输入（按该顺序）到 TextBox1，那么假设它们由一个或多个空格分隔，您可以将它们拆分如下：

```
string[] items = TextBox1.Text.Trim().Split(new char[]{' '}, StringSplitOptions.RemoveEmptyEntries);
string lastName = items[0];
string firstName = items[1]; 
```

Split 方法的第二个参数处理可能存在多个空格分隔姓氏和名字的可能性。

如果 ID 列用于链接 Employee 和 Tasks 表，那么您应该能够检索相关的 TaskName 并将其放置在全局变量中，如下所示：

// 如果您还没有全局变量，请创建一个包含全局变量的类

```
static class Global
{
    public static string Task {get; set;}
} 
```

// 在某个其他类的某个方法中

// 插入上面的代码以获取姓氏和名字

```
using (LINQtoEntitiesEntities MyEntities = new LINQtoEntitiesEntities())
{
   ObjectQuery<Employee> Employee = MyEntities.Employee;
   ObjectQuery<Tasks> Tasks = MyEntities.Tasks;
   Global.Task = (from e in Employee where e.LastName == lastName && e.FirstName == firstName join t in Tasks on e.ID equals t.ID select t.TaskName).FirstOrDefault();
} 
```

// 从别处检索全局变量：

```
if (Global.Task != null)
{
   // do something with Global.Task
} 
```

# php - 使用codeigniter将数据插入数据库

> ID：15969411
> 
> 赞同：12
> 
> 时间：2013-04-12T10:49:48.287
> 
> 标签：php, database, codeigniter, insert

尝试使用 CodeIgniter 在我的数据库中插入一行。

我的数据库表是`Customer_Orders`，字段是`CustomerName`和`OrderLines`。变量已正确提交。

我的控制器是（`sales.php`）：

```
function new_blank_order_summary() 
  {
      $data = array(
        'OrderLines'=>$this->input->post('orderlines'),
        'CustomerName'=>$this->input->post('customer')
          );
     $this->sales_model->order_summary_insert($data);

    $this->load->view('sales/new_blank_order_summary');
  } 
```

我的模型是（`sales_model.php`）：

```
function order_summary_insert($data){
    $this->db->insert('Customer_Orders',$data);
} 
```

虽然视图加载正确，但没有数据插入到数据库中。

关于为什么不的任何想法？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-13T07:48:16.423

在你的模型中试试这个：

```
function order_summary_insert()
    $OrderLines=$this->input->post('orderlines');
    $CustomerName=$this->input->post('customer');
    $data = array(
        'OrderLines'=>$OrderLines,
        'CustomerName'=>$CustomerName
    );

    $this->db->insert('Customer_Orders',$data);
} 
```

尝试使用控制器来控制视图，模型总是在模型中发布你的值。它很容易理解。您的控制器将是：

```
function new_blank_order_summary() {
    $this->sales_model->order_summary_insert($data);
    $this->load->view('sales/new_blank_order_summary');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-08T07:54:18.530

像这样编写代码对您来说会更好。

在你的控制器中写下这段代码。

```
 function new_blank_order_summary() {
     $query = $this->sales_model->order_summary_insert();
     if($query) {
        $this->load->view('sales/new_blank_order_summary'); 
    } else {
        $this->load->view('sales/data_insertion_failed');
    }
  } 
```

在你的模型中

```
function order_summary_insert() {
    $orderLines = trim(xss_clean($this->input->post('orderlines')));
    $customerName = trim(xss_clean($this->input->post('customer')));
    $data = array(
        'OrderLines'=>$orderLines,
        'CustomerName'=>$customerName
    );

    $this->db->insert('Customer_Orders',$data);
    return ($this->db->affected_rows() != 1) ? false : true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T10:54:48.743

根据我在这里看到的，您在`$data`数组中使用了小写的字段名，在数据库表中使用了大写的字段名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-18T13:35:07.407

```
function saveProfile(){
    $firstname = $this->input->post('firstname');
    $lastname = $this->input->post('lastname');
    $post_data = array('firstname'=> $firstname,'lastname'=>$lastname);
    $this->db->insert('posts',$post_data);
    return $this->db->insert_id(); 
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-18T13:14:56.607

看法

```
<input type="text" name="name"/>
<input type="text" name="class"/> 
```

控制器

```
function __construct()
{
    parent:: __construct();
    $this->load->Model('Model');
}

function index()
{
    $this->load->view('view');
}

function user(){
    if (isset($_POST['submit'])){
        $data = array('name'=>$_POST['name'],
                    'class'=>$_POST['class']);
         $this->Model->insert($data);
    }
} 
```

模型

```
function insert($data)
{
    $this->db->insert('table_name',$data);
    return true;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-22T14:54:52.343

```
<?php
defined('BASEPATH') OR exit('No direct script access allowed');

class Cnt extends CI_Controller {

 public function insert_view()
 {
  $this->load->view('insert');
 }
 public function insert_data(){
  $name=$this->input->post('emp_name');
  $salary=$this->input->post('emp_salary');
  $arr=array(
   'emp_name'=>$name,
   'emp_salary'=>$salary
   );
  $resp=$this->Model->insert_data('emp1',$arr);
  echo "<script>alert('$resp')</script>";
  $this->insert_view();  
 }
} 
```

有关更多详细信息，请访问： [http ://wheretodownloadcodeigniter.blogspot.com/2018/04/insert-using-codeigniter.html](http://wheretodownloadcodeigniter.blogspot.com/2018/04/insert-using-codeigniter.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-18T07:56:18.107

```
function order_summary_insert()
$OrderLines=$this->input->post('orderlines');
$CustomerName=$this->input->post('customer');
$data = array(
'OrderLines'=>$OrderLines,
'CustomerName'=>$CustomerName
);

$this->db->insert('Customer_Orders',$data);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-18T08:00:30.267

检查您的控制器：

```
function order()
    $OrderLines = $this->input->post('orderlines');
    $CustomerName = $this->input->post('customer');
    $data = array(
        'OrderLines' => $OrderLines,
        'CustomerName' =>$CustomerName
    ); 

    $this->db->insert('Customer_Orders', $data);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-10T13:21:18.583

只需插入`$this->load->database();`您的模型：

```
function order_summary_insert($data){
    $this->load->database();
    $this->db->insert('Customer_Orders',$data);
} 
```

# jquery - Jquery resize隐藏溢出滚动条，直到浏览器调整大小

> ID：15969413
> 
> 赞同：0
> 
> 时间：2013-04-12T10:49:58.507
> 
> 标签：jquery, resize

溢出在 x 轴上，我希望滚动条出现在 60px 的固定页脚上方。所以计算了高度，这很有效。

```
$('#shf').css('height', '100%').css('height', '-=60px'); 
```

当我添加调整大小事件时，它会在初始加载时隐藏它，但一旦浏览器调整大小就会出现。我试过2个单独的例子：

添加显示事件

```
$(window).resize(function() {
    $('#shf').show();
    $('#shf').css('height', '100%').css('height', '-=60px');
}); 
```

创建一个调整大小函数并在之后调用它

```
function resizePortfolioScroll(){
var $height = $('#shf').css('height', '100%').css('height', '-=60px');
}

$(window).resize(function() {
    $('#shf').show();
    resizePortfolioScroll();
}); 
```

如何在页面初始加载时加载滚动条？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:56:13.713

尝试在初始加载时添加调整大小。

```
$(window).resize(function() {
    $('#shf').show();
    resizePortfolioScroll();
}).resize(); 
```

# android - Not able to read audio streams with ffmpeg

> ID：15969415
> 
> 赞同：0
> 
> 时间：2013-04-12T10:50:03.930
> 
> 标签：android, ffmpeg, android-audiomanager, libavcodec, libavformat

I am trying to solve a big problem but stuck with very small issue. I am trying to read audio streams inside a video file with the help of ffmpeg but the loop that should traverse the whole file of streams only runs couple of times. Can not figure out what is the issue as others have used it very similarly. Following is my code please check:

```
JNIEXPORT jint JNICALL Java_ru_dzakhov_ffmpeg_test_MainActivity_logFileInfo
    (JNIEnv * env,
     jobject this,
     jstring filename
    )
{

AVFormatContext *pFormatCtx;
int             i,j,k, videoStream, audioStream;
AVCodecContext  *pCodecCtx; 
AVCodec         *pCodec;
AVFrame         *pFrame; 
AVPacket        packet;
int             frameFinished;
float           aspect_ratio;
AVCodecContext  *aCodecCtx;
AVCodec         *aCodec;
//uint8_t inbuf[AUDIO_INBUF_SIZE + FF_INPUT_BUFFER_PADDING_SIZE];
j=0;

av_register_all();
char *str = (*env)->GetStringUTFChars(env, filename, 0);
 LOGI(str);
// Open video file
if(av_open_input_file(&pFormatCtx, str, NULL, 0, NULL)!=0)
    ;

// Retrieve stream information
if(av_find_stream_info(pFormatCtx)<0)
    ;

 LOGI("Separating");
// Find the first video stream  
videoStream=-1;
audioStream=-1;

for(i=0; i<&pFormatCtx->nb_streams; i++) {

    if(pFormatCtx->streams[i]->codec->codec_type==AVMEDIA_TYPE_AUDIO)
    {
        LOGI("Audio Stream");
        audioStream=i;
        }
}
av_write_header(pFormatCtx);
if(videoStream==-1)
     LOGI("Video stream is -1");    

if(audioStream==-1)
     LOGI("Audio stream is -1");

return i;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:57:47.297

您可能遇到与库加载和卸载相关的问题，以及这与通过 jni 的重复调用有何关系。不确定您的症状是什么，但如果您没有解决方案，请尝试阅读：

[这里](https://stackoverflow.com/questions/10649119/calling-native-method-twice-of-third-party-library-in-an-activity-causes-the-and)

[在](https://stackoverflow.com/questions/11898338/android-video-trimming-via-ffmpeg)这里

# php - 数组输出重复

> ID：15969418
> 
> 赞同：0
> 
> 时间：2013-04-12T10:50:06.013
> 
> 标签：php

`Array`我从`POST`PHP 中的操作中得到以下信息：

```
Array ( 
    [level-1] => 3 
    [quarter-1] => 1 
    [year-1] => 2014 
    [level-2] => 4 
    [quarter-2] => 2 
    [year-2] => 2014 
    [level-53] => 2 
    [quarter-53] => 1 
    [year-53] => 2013 
    [level-58] => 3 
    [quarter-58] => 2 
    [year-58] => 2014 
    [action] => store 
    [submit_values] => Store 
) 
```

我执行以下操作以从数组中获取值：

```
 $array=$_POST;
        foreach(array_chunk($array,3,true) as $val){
            foreach($val as $k=>$v){
               if(strpos($k, "level") !== false){
                 $temp    = explode("-",$k);
                 $id      = $temp[1];
                 $level   = $v;
                 }
             if(strpos($k, "quarter") !== false){
                 $quarter = $v;
             }
             if(strpos($k, "year") !== false){
                $year    = $v;
                }
            }
          echo "ID ".$id." Level ".$level." Quarter ".$quarter." Year ".$year;
          echo "<br>";
        } 
```

但我得到的是以下内容：

```
ID 1 Level 3 Quarter 1 Year 2014
ID 2 Level 4 Quarter 2 Year 2014
ID 53 Level 2 Quarter 1 Year 2013
ID 58 Level 3 Quarter 2 Year 2014
ID 58 Level 3 Quarter 2 Year 2014 
```

最后一行重复！我在代码中做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:52:15.723

尝试这个：

```
$array = $_POST;
unset($array['submit_values']);
unset($array['action']); //... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:03:22.433

您不使用 and 检查最后一个循环`action`，`submit_values`因此它返回**最后保存的值**：

```
$array=$_POST;
    foreach(array_chunk($array,3,true) as $val){
        foreach($val as $k=>$v){
           if(strpos($k, "level") !== false){
             $temp    = explode("-",$k);
             $id      = $temp[1];
             $level   = $v;
             }
         elseif(strpos($k, "quarter") !== false){
             $quarter = $v;
         }
         elseif(strpos($k, "year") !== false){
            $year    = $v;
         }
         // if not one of ifs works
         else continue;
        }
      echo "ID ".$id." Level ".$level." Quarter ".$quarter." Year ".$year;
      echo "<br>";
    } 
```

在循环后重置值也总是更好：

```
foreach(array_chunk($array,3,true) as $val){
    $id = '';
    $level = '';
    $quarter = '';
    $year = ''; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:03:48.847

当循环经过**[action] = >store** 和**[submit_values] => Store**时，控件不会进入任何 if 语句，因此在最后 2 个循环期间，它会打印先前设置的值

**即，ID 58 Level 3 Quarter 2 Year 2014**

**解决方案：**

尝试在 foreach 循环结束时将**ID**、**Level**、**Quarter**和**Year**重新初始化为***" "（空白值） 。***

# drupal-7 - how to apply standard and advanced theme to tinymce in drupal 7

> ID：15969423
> 
> 赞同：1
> 
> 时间：2013-04-12T10:50:15.070
> 
> 标签：drupal-7, tinymce, wysiwyg

I have integrated wysiwyg with tinymce editor.. now Tinymce asks to choose buttons which we want in editor... I want to apply its own theme like 'standard' or 'advanced' or any other and dont want to select buttons.. How can I do it ?

![Here in image, I have two options like 'full_html' and 'standard'.. I want to configure tinymce accrding their names.. standard theme for 'standard' option and 'advanced' theme for 'full_html'..](https://i.stack.imgur.com/vR9AG.png)

# c# - How do find out MSOLAP.2 provider installed in my machine?

> ID：15969430
> 
> 赞同：1
> 
> 时间：2013-04-12T10:50:29.773
> 
> 标签：c#, windows, windows-server-2008, windows-server-2003, olap

How do find out `MSOLAP.2` provider installed in my machine. Also, How can i test the same through C# code?

Any help or guidelines are greatly appreciated !!!

# matlab - 在 Matlab 中绘制点的行

> ID：15969431
> 
> 赞同：0
> 
> 时间：2013-04-12T10:50:30.073
> 
> 标签：matlab, plot

所以我还在习惯 Matlab 并且在绘图时遇到了一些麻烦。我有一个单元格，其中包含每行中的点列表。我想在同一张图上以不同颜色绘制每一行点，以便我可以比较它们。问题是我需要对未知数量的点和行进行这项工作（即每次运行程序时点和行的数量都会改变）。

例如，我可能有我的单元格数组 A：

A = {[0,0], [1,2], [3,4]; [0,0] [5,6], [9,2]}

我想根据它们的索引绘制第 1 行中的点（所以是 3D 图），然后将第 2 行中的点以不同的颜色显示在同一张图上。行将始终具有相同的长度。（每行将始终具有相同的点数）。我尝试了一些不同的 for 循环，但似乎无法做到这一点。

任何帮助我朝着正确的方向前进将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:55:22.880

您可以将其转换为矩阵并直接绘制它：

```
% Some dummy data - format a little different from your example 
% to allow for different numbers of elements per row
A = {[0,0, 1,2, 3,4]; [0,0, 5,6]};

% Figure out how many columns we need in total
maxLen = max(cellfun(@length, A));
% Preallocate
Amat = NaN(size(A, 1), maxLen);
% Copy data
for n = 1:size(A, 1)
    curA = A{n}; 
    Amat(n, 1:length(curA)) = curA; 
end

% Generate 1:N vector repeated the correct number of times (rows)
x = repmat(1:size(Amat, 2), size(Amat, 1), 1);
plot(x, Amat) 
```

**编辑：**您在帖子中的某个时间点提到了 3D 图表。上面不会绘制 3D 图，所以这里有一些东西：

```
% Generate Amat as above

% Then:
[X, Y] = meshgrid(1:size(Amat, 1), 1:size(Amat, 2));
surf(X, Y, Amat.'); % OR: plot3(X, Y, Amat.'); 
```

我不确定这正是你想要的，但你的问题有点不清楚你想要什么样的图表。如果您只想在绘图上使用彩色线条，则可以使用`plot3`而不是`surf`，但恕我直言`surf`，此类数据可能会为您提供更清晰的绘图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:04:56.637

点和行的数量可以随着每次迭代而改变这一事实应该不会造成太大的问题。我建议在绘图循环之前使用 size 函数（size(A,1) 和 size(A,2)）来获取矩阵的维度。

一旦你有了矩阵的大小，循环遍历维度并使用holdon在同一个图上绘制线条，然后最后在循环时使线条颜色成为尺寸的函数，这样你总是有不同的线条颜色

# ios - 从隐藏的 webview 控制下拉菜单

> ID：15969434
> 
> 赞同：1
> 
> 时间：2013-04-12T10:50:33.867
> 
> 标签：ios, uiwebview

我有一个隐藏的 webview 加载一个 html 登录表单，其中包含一个下拉菜单，用户可以从中指定它的类型。我设置了一个分段控件，并希望它从 html 下拉菜单中进行选择，但无法使其正常工作。相关代码如下所示：

```
//The html code with the drop down menu. 

<div class="login_formtable">
    <label class="login_label">I am</label>
    <div id="loginselect" style="clear:both:">
            <select name="usertype" size="1"  id="usertype" class="select1" >     
 <option value="0"  selected="selected">Staff</option>
 <option value="1" >Student</option>
 <option value="2" >Parent</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:54:13.273

你不应该这样做。

如果要使用复选框，则需要使用`UIButton`或创建自己的 UI `UIPickerView`。

如果您在 中尝试此`UIWebView`操作，则无法在 中获取所选值`UIWebView`。

我想这个[链接](http://iphoneprobsolutions.blogspot.in/)可能会对你有所帮助。

# java - Java Arraylist/List 错误

> ID：15969435
> 
> 赞同：1
> 
> 时间：2013-04-12T10:50:35.913
> 
> 标签：java, exception, netbeans, arraylist

我已经标记了给我带来麻烦的行

```
private void EditButtonActionPerformed(java.awt.event.ActionEvent evt) { 
```

DefaultListModel PatientListModel = new DefaultListModel();

```
for (Patient s : PatientList) {
    int AccNum = Integer.parseInt(IDTextField.getText());

    if (AccNum == s.getAccountNumber()) {

        s.setName(NameTextField.getText());
        s.setAge(Integer.parseInt(AgeTextField.getText()));
        s.setAddress(AddressTextField.getText());
        String PatientSex = "";

        if (MaleRadioButton.isSelected()) {
            PatientSex = "Male";
        }

        if (FemaleRadioButton.isSelected()) {
            PatientSex = "Female";
        }

        s.setSex(PatientSex);
        s.setPhone(PhoneTextField.getText());
        ArrayList<PatientCondition> PatientConditions3 = new ArrayList();
  ===>      PatientConditions3 = (ArrayList<PatientCondition>) ConditionsJList.getSelectedValuesList(); //error here
        s.setConditionsList(PatientConditions3);
        PatientInfoLabel2.setText("Patient Details Updated");

        for (Patient f : PatientList) {
            PatientListModel.addElement(f.getAccountNumber() + "-" + f.getName());
        }

        PatientJList.setModel(PatientListModel);
        UpdateAllViews();

        //       
    }
}
} 
```

错误是：

```
Exception in thread "AWT-EventQueue-0" java.lang.ClassCastException: java.util.Collections$EmptyList cannot be cast to java.util.ArrayList 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T10:55:02.590

我认为错误消息非常有用。你不能做那个演员。

您应该将您的重新定义`PatientConditions3`为 type `List<PatientCondition>`。对接口`List`而不是特定实现进行编码是一种很好的做法，例如`ArrayList`. 此外，您应该重命名它以遵循 Java 命名约定：

```
List<PatientCondition> patientConditions3; 
```

如果您需要将收到的转换`List`为例如一个`ArrayList`，您可以使用收到的元素创建一个新的`List`：

```
patientConditions3 = new ArrayList<PatientCondition>(ConditionsJList.getSelectedValuesList()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:55:30.797

[`Collections.emptyList()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#emptyList%28%29)返回一个非法的[`List`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)引用转换。[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)

尝试改变这个

```
ArrayList<PatientCondition> PatientConditions3 = new ArrayList(); 
```

对此

```
List<PatientCondition> PatientConditions3 = new ArrayList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T10:56:09.027

最有可能的是，该方法的方法声明`ConditionsJList.getSelectedValuesList`指定它返回一个`List`. 您不能指望该列表将成为`ArrayList`.

将变量的类型更改`PatientConditions3`为`List`而不是`ArrayList`. 此外，如果您立即再次分配，则无需创建新的`ArrayList`并将其分配给；然后，您一无所有地创建它，它会立即被丢弃。`PatientConditions3``PatientConditions3``ArrayList`

```
List<PatientCondition> PatientConditions3 = ConditionsJList.getSelectedValuesList(); 
```

另一个说明：根据常见的 Java 编码约定，您不应该以大写字母开头的变量名。调用它`patientConditions3`而不是`PatientConditions3`. （这当然也适用于所有其他变量）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T10:55:57.823

如果`List`变量后面`ArrayList`实际上没有 a，则不能将其强制转换为 a。`ArrayList`在大多数情况下，您应该依赖接口来获取变量以实现最大的灵活性

```
List<PatientCondition> PatientConditions3 = ConditionsJList.getSelectedValuesList(); 
```

关于类型安全：只有在你确定**要**转换的对象是目标类型的实例时才转换。`instanceof`在你施放之前检查一下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T10:56:30.240

当你在那里时，`ConditionsJList.getSelectedValuesList();`你会得到一些值的集合（或 List<>，如果这听起来更好）。你只需要将它们转换为`PatientCondition`..所以你应该有类似的东西： `PatientConditions3 = (PatientCondition) ConditionsJList.getSelectedValuesList();`

当然 PatientConditions3 必须是`List<PatientCondition>`...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-08T08:21:41.930

如果它是一个 ArrayList，这会为你做一个演员，否则 ArrayList 是空的：

```
ArrayList<PatientCondition> patientConditions3 = (ConditionsJList.getSelectedValuesList() instanceof ArrayList<PatientCondition> ? ((ArrayList<PatientCondition>) ConditionsJList.getSelectedValuesList()) : new ArrayList<PatientCondition>()); 
```

# jquery - 强制 IE 在标准模式下工作

> ID：15969436
> 
> 赞同：1
> 
> 时间：2013-04-12T10:50:40.107
> 
> 标签：jquery, html, internet-explorer, doctype, ie-compatibility-mode

我正在研究 JQchart。它在 Mozilla 和 chrome 上运行良好。当我在任何版本的 IE 上运行它时，它会自动进入怪癖模式，并且不会向我显示任何内容。

但是当我将模式从 IE 中的开发人员工具更改为标准时，它工作正常

那么我应该怎么做才能让它在 IE 标准模式下工作

我已经尝试过以下事情

1.  `<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" >`

2.  `<!DOCTYPE html>`

3.  `<meta http-equiv="X-UA-Compatible" content="IE=edge" >`

但上面没有任何帮助。

# java - play framework 2.0 json - 接收 null JsonNode 对象

> ID：15969441
> 
> 赞同：3
> 
> 时间：2013-04-12T10:51:13.463
> 
> 标签：java, json, playframework

我在下面的代码中得到了一个空的 JsonNode 对象。客户端javascript有问题。如果我使用 POST 请求运行 curl 命令，我会得到正确的响应。如果我在下面提到的 Javascript 中运行相同的内容 - 我会得到 JsonNode 对象的空值。这是代码

```
Application.java
package controllers;

import org.codehaus.jackson.JsonNode;

import play.Routes;
import play.mvc.Controller;
import play.mvc.Result;
import views.html.index;

public class Application extends Controller {

    public static Result index() {
        return ok(index.render("Your new application is ready."));
    }

    public static Result receiveData() {
      response().setContentType("application/json");
      JsonNode json = request().body().asJson();
      if(json == null) {
        return badRequest("Expecting Json data");
      } else {
        String name = json.findPath("name").getTextValue();
        if(name == null) {
          return badRequest("Missing parameter [name]");
        } else {
          return ok("Hello " + name);
        }
      }
    }

    public static Result javascriptRoutes() {
      response().setContentType("text/javascript");
      return ok(
        Routes.javascriptRouter("jsRoutes",
          // Routes
          controllers.routes.javascript.Application.receiveData()
        )
      );
    }

}

Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

# Home page
GET     /                           controllers.Application.index()
POST    /receiveData                controllers.Application.receiveData()
GET    /assets/javascripts/routes   controllers.Application.javascriptRoutes()

# Map static resources from the /public folder to the /assets URL path
GET     /assets/*file               controllers.Assets.at(path="/public", file) 
```

main.scala.html

```
@(title: String)(content: Html)
@import helper._
@import controllers.routes.javascript._

<!DOCTYPE html>

<html>
    <head>
        <title>@title</title>
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/bootstrap.css")">
        <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">
        <script type="text/javascript" src="@routes.Application.javascriptRoutes"></script>
        <script src="@routes.Assets.at("javascripts/jquery-1.9.0.min.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/bootstrap.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/message.js")" type="text/javascript"></script>

    </head>
    <body>
        <div class="container">
          <div class = "row">
            <div class = "span12">
              <input type = "text" id = "inputValue" value="getData"></input>
              <button class = "approveButton btn btn-primary">Approve </button>
            </div>
          </div>
        </div>

    </body>
</html> 
```

消息.js

```
$(document).ready(function(){
  $('.approveButton'). click(function(){
      var value = $('#inputValue').val();
      var jsonToSend = {};
      jsonToSend.name = value;
      var outputData = JSON.stringify(jsonToSend);
      jsRoutes.controllers.Application.receiveData().ajax({
        data:outputData,
        contentType:'application/json',
        success: function(data) {
          console.log(data);
        },
        error: function() {
          alert("Error!");
        }
      });
    });
  }); 
```

这是 curl 命令的输出：

```
curl --header "Content-type:application/json" --request POST --data '{"name":"abx"}' http://localhost:9000/receiveData
Hello abx 
```

有人可以帮助确定javascript文件中的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:55:06.303

ajax 调用的预期结果是一个 json 对象。在这种情况下，如果您想使用纯文本进行响应，请将*dataType: 'text'*添加到请求中：

```
jsRoutes.controllers.Application.receiveData().ajax({
        data:outputData,
        dataType: 'text',
        contentType:'application/json',
        success: function(data) {
          console.log(data);
        },
        error: function() {
          alert("Error!");
        }
      }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:47:18.493

也许是一个愚蠢的问题，但你认为，ajax 调用将是 POST 而不是 GET ？您是否尝试过用 GET 替换 POST ？

# xml - 在多个 XML 节点中搜索串联文本

> ID：15969442
> 
> 赞同：1
> 
> 时间：2013-04-12T10:51:13.797
> 
> 标签：xml, xpath, full-text-search, searching-xml

我必须在“有序”xml 文件中进行搜索，在这些文件中，我要检索的文本被分派到这样的几个节点上。

```
<root>
    <div id="1">Hello</div>
    <div id="2">Hel</div>
    <div id="3">lo dude</div>   
    <div id="4">H</div>
    <div id="5">el</div>
    <div id="6">lo</div>
</root> 
```

必须在连接的文本上进行搜索：

```
HelloHello dudeHello 
```

但我需要能够检索节点属性。例如，对于“将”搜索，我希望获取节点：

```
<div id="1">Hello</div>
<div id="2">Hel</div>
<div id="3">lo dude</div>   
<div id="5">el</div>
<div id="6">lo</div> 
```

或者至少是ID。

有人知道如何在 XPath 或任何其他方式中执行此操作吗？

我认为这有点挑战性，我暂时没有（简单的）想法。谢谢你的帮助。

**编辑**：在搜索之前必须连接文本是关键信息并且必须精确！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:48:34.437

您的更新要求使问题变得更加复杂，因为“元素包装”可能发生在搜索令牌内的任意点，甚至可能跨越多个元素。我认为您无法在 XPath < 3.0 中编写查询（如果您只能在 XPath 中执行此操作）。我为此使用了 XQuery，它扩展了 XPath。代码在[BaseX](http://www.basex.org)中运行良好，但也应该在所有其他 XQuery 引擎中运行（可能需要 XQuery 3.0，没看过）。

代码变得相当复杂，我想我在其中添加了足够的注释以使其易于理解。它要求节点位于下一个元素内，但稍作调整后，它也可用于遍历任意 XML 结构（想想带有`<span/>`s 和其他标记的 HTML）。

```
(: functx dependencies :)
declare namespace functx = "http://www.functx.com";
declare function functx:is-node-in-sequence 
  ( $node as node()? ,
    $seq as node()* )  as xs:boolean {

   some $nodeInSeq in $seq satisfies $nodeInSeq is $node
 } ;
declare function functx:distinct-nodes 
  ( $nodes as node()* )  as node()* {

    for $seq in (1 to count($nodes))
    return $nodes[$seq][not(functx:is-node-in-sequence(
                                .,$nodes[position() < $seq]))]
 } ;

declare function local:search( $elements as item()*, $pattern as xs:string) as item()* {
  functx:distinct-nodes(
    for $element in $elements
    return ($element[contains(./text(), $pattern)], local:start-search($element, $pattern))
  )
};

declare function local:start-search( $element as item(), $pattern as xs:string) as item()* {
    let $splits := (
      (: all possible prefixes of search token :)
      for $i in 1 to string-length($pattern) - 1
      (: check whether element text starts with prefix :)
      where ends-with($element/text(), substring($pattern, 1, $i))
      return $i
    )
    (: go on for all matching prefixes :)
    for $split in $splits
    return
      (: recursive call to next element :)
      let $continue := local:continue-search($element/following-sibling::*[1], substring($pattern, $split+1))
      where not(empty($continue))
      return ($element, $continue)
};

declare function local:continue-search( $element as item()*, $pattern as xs:string) as item()* {
  if (empty($element)) then () else
  (: case a) text node contains whole remaining token :)
  if (starts-with($element/text(), $pattern))
  then ($element)
  (: case b) text node is part of token :)
  else if (starts-with($pattern, $element/text()))
  then
    (: recursive call to next element :)
    let $continue := local:continue-search($element/following-sibling::*[1], substring($pattern, 1+string-length($element/text())))
    where not(empty($continue))
    return ($element, $continue)
  (: token not found :)
  else ()
};

let $token := 'll'
return local:search(//div, $token) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T00:12:21.717

在 XPath 2 中，您可以使用 tokenize 来计算搜索文本出现的频率，然后测试每个节点，如果文本中*不*包括该节点，则会减少出现次数。如果数量减少，则该节点必须包含在结果中。这不是那么快。

假设只有直接子节点中的文本很重要，就像在示例中一样，它看起来像这样：

```
for $searched in "ll" 
return //*/ for $matches in count(tokenize(string-join(*, ""), $searched)) - 1
            return *[$matches > count(tokenize(concat(" ",string-join(preceding-sibling::*, "")), $searched)) +
                                count(tokenize(concat(" ",string-join(following-sibling::*, "")), $searched)) - 2] 
```

# razor - Umbraco 6 剃须刀菜单

> ID：15969443
> 
> 赞同：4
> 
> 时间：2013-04-12T10:51:18.793
> 
> 标签：razor, umbraco

嗨，我想在我的 li 中添加一个“活动”类，如果它是活动的，或者我在它下面的页面上。我有以下代码

```
@inherits Umbraco.Web.Mvc.UmbracoTemplatePage
@{
    Layout = null;
}

<nav class="topNav">
    <ul>
        @foreach (var item in Model.Content.AncestorOrSelf(1).Children.Where(x => x.IsVisible() && x.IsDocumentType("Subfrontpage") || x.IsDocumentType("Procesguide")))
        {       
            <li>
                <a href="@item.Url">@item.Name</a>
            </li>
        }
    </ul>
</nav> 
```

我想我可以用这个做点什么，但它给出了一个错误

```
var isSelected = Model.Path.Contains(item.Id.ToString()) ? "active" : "";

            <li class="@Html.Raw(isSelected)">
                <a href="@item.Url">@item.Name</a>
            </li> 
```

这是我得到的错误。第 10 行。

```
Compilation Error

Description: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately. 

Compiler Error Message: CS1061: 'Umbraco.Web.Models.RenderModel' does not contain a definition for 'Path' and no extension method 'Path' accepting a first argument of type 'Umbraco.Web.Models.RenderModel' could be found (are you missing a using directive or an assembly reference?)

Source Error:

Line 8:         @foreach (var item in Model.Content.AncestorOrSelf(1).Children.Where(x => x.IsVisible() && x.IsDocumentType("Subfrontpage") || x.IsDocumentType("Procesguide")))
Line 9:         {       
Line 10:            var isSelected = Model.Path.Contains(item.Id.ToString()) ? "active" : "";
Line 11: 
Line 12: <li class="@Html.Raw(isSelected)"> 
```

我现在已经尝试过了，但没有 lunk

```
<ul>        
        <li>
            <a href="@home.Url">@home.Name</a>
        </li>

        @foreach (var item in Model.Content.AncestorOrSelf(1).Children.Where(x => x.IsVisible() && x.IsDocumentType("Subfrontpage") || x.IsDocumentType("Procesguide")))
        {       

            var isSelected = item.IsDescendant(Model,"active", "");

            <li class="@Html.Raw(isSelected)">
                <a href="@item.Url">@item.Name</a>
            </li>

        }

    </ul> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T21:46:37.010

好的，这是解决方案。这是用于键入的，而不是动态的 cshtml。

```
@inherits Umbraco.Web.Mvc.UmbracoTemplatePage
@{
    Layout = null;
    var home = Model.Content.AncestorOrSelf(1);
}

<ul>    
    @*Render Home item*@

    @{ var homeActive = ""; }

    @if( home.Id == Model.Content.Id){
        homeActive = "active";
    }
    <li class="@homeActive">
        <a href="@home.Url">
            @home.Name               
        </a>
    </li>

    @*Render Home children*@    
    @foreach (var item in home.Children.Where(x => x.IsVisible()))
    {                       
        var active = "";

        if(home.Id != Model.Content.Id){ @* if NOT home *@
            if (item.Id == Model.Content.AncestorOrSelf(2).Id){ 
                @* if foreach id and currentpage ancestor id is equal  *@
                active = "active";
            }
        }          
        <li class="@active">                             
            <a href="@item.Url">
                @item.Name                   
            </a>
        </li>
    }
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:27:30.107

你可以尝试这样的事情：

```
var isSelected = item.IsDescendant(Model,"active", ""); 
```

以下是您可以使用的功能列表：

```
@Model.AncestorOrSelf(string nodeTypeAlias)
@Model.AncestorOrSelf(int level)
@Model.AncestorOrSelf(Func<DynamicNode, bool> func) 
```

以及那些辅助功能：

```
@Model.IsDescendant(DynamicNode[,valueIfTrue][,valueIfFalse])
@Model.IsDescendantOrSelf(DynamicNode[,valueIfTrue][,valueIfFalse]) 
```

参考：[当前页面是特定节点id的后代吗？](https://stackoverflow.com/questions/13754328/is-the-current-page-a-descendant-of-a-specific-node-id)

以下是 umbraco 制作的默认导航脚本：

```
@inherits umbraco.MacroEngines.DynamicNodeContext

@*
    Macro to display child pages below the root page of a standard website.
    Also highlights the current active page/section in the navigation with
    the css class "current". 
*@

@{ 
    @*Get the root of the website *@
    var root = Model.AncestorOrSelf(1);
}

<ul>
    @foreach (var page in root.Children.Where("Visible"))
    { 
        <li class="@page.IsAncestorOrSelf(Model, "current", "")">
            <a href="@page.Url">@page.Name</a>
        </li>
    }
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-29T12:42:31.507

我刚刚自己创建了一个菜单，并且还需要该`Home`页面`active`。仅使用该方法`IsAncestorOrSelf`不适用于主页。

我创建的代码是这样的：

```
@{ 
    var root = Model.AncestorOrSelf(1);

    var homeClass = root.Id == Model.Id ? "active" : "";
}

<ul id="nav" class="nav navbar-nav pull-right">
    <li class="@homeClass"><a href="/" >Home</a></li>
        @foreach (var page in root.Children.Where("Visible"))
    {
        <li class="@page.IsAncestorOrSelf(Model, "active", "")">
            <a href="@page.Url">@page.Name</a>
        </li>
    }
</ul> 
```

这将遍历根节点 (1) 的所有子节点。为了能够发现您是否在`Home`页面上，我正在检查页面的`Id`'s 并`active`相应地设置类。

# python - 如何检查 2 条绘制的线是否重叠？

> ID：15969447
> 
> 赞同：0
> 
> 时间：2013-04-12T10:51:24.433
> 
> 标签：python, tk, overlap, turtle-graphics

我尝试查看线-线相交测试，但我不太了解它，因为它使用的是线的端点。

```
def lines(xcoord, ycoord):  
    penup()  
    goto(xcoord, ycoord)  
    pensize(3)  
    pendown()  
    color("blue")  
    forward(10)  
    right(randint(0,360))  
    penup() 
```

因此，如果我随机绘制这些线 10 次，我如何检测它们是否重叠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:07:01.543

我假设您了解线交点测试的工作原理，但您不了解如何将其应用于您的代码，因为您目前无法获得线的端点。

您应该修改您的`lines`方法，以便它返回它绘制的线的端点。

```
def lines(xcoord, ycoord):  
    penup()  
    goto(xcoord, ycoord)  
    startPoint = pos()
    pensize(3)  
    pendown()  
    color("blue")  
    forward(10)  
    right(randint(0,360))
    endPoint = pos()
    penup()
    return (startPoint, endPoint) 
```

然后，当您绘制线条时，请跟踪点：

```
myLines = []
for i in range(10):
    #not pictured: generate xcoord and ycoord however you want
    myLines.append(lines(xcoord,ycoord)) 
```

稍后，您可以使用之前查看的线-线相交测试来检测哪些重叠。

```
def intersects(line1, line2):
    #todo: implement line-line intersection test that you read about

#iterate through all combinations of lines,
#testing whether the two intersect
for i, line1 in enumerate(myLines):
    for j, line2 in enumerate(myLines):
        #we don't care if a line intersects with itself
        if i == j: 
            continue
        if intersects(line1, line2):
            print "Line #{} intersects with Line #{}".format(i,j) 
```

# google-maps - 谷歌地图在外部触发点击事件时变为空白

> ID：15969449
> 
> 赞同：1
> 
> 时间：2013-04-12T10:51:32.653
> 
> 标签：google-maps, google-maps-api-3, map

我使用 V3 js API 创建了一个谷歌地图，在地图内我显示了多个标记。当我单击标记时，它会执行 ajax 调用并在信息窗口中显示结果。我在地图外添加了一个外部链接，点击它会在地图旁边显示相应的标记结果。我已经使用下面的代码来完成功能..

```
$('#marker_link').click(function () {
    var longitude = $(this).find("#longitude").val();
    var latitude = $(this).find("#latitude").val();
    var index = $(this).find("#index").val();

    google.maps.event.trigger(gmarkers[index], "click", {
        latLng: new google.maps.LatLng(latitude, longitude)
    });
}); 
```

此代码正确提取标记数据并显示在窗口中。但当时地图一片空白。我们怎样才能解决它。我们如何将地图与商店结果保持一致。

这里 gmarkers[ ] 是一个全局数组，我在其中保存在渲染地图期间创建的所有标记。

我第一次在地图中显示标记时使用了以下代码。

```
var marker = new google.maps.Marker({
                                    map: map,
                                    position: new google.maps.LatLng(pLat, pLong),
                                });
                                gmarkers.push(marker);

                                google.maps.event.addListener(marker, 'click', function (event) {

                                    var dataString = 'store_id=' + {{ store.store_id }}
                                    $.ajax({  
                                        type: "GET",  
                                        url: GET_STORE_DATA,  
                                        data: dataString, 
                                        success: function(res) { 
                                            if(res != '') {
                                                var contentString = res;
                                                var infoWindow = new google.maps.InfoWindow({ content: contentString });

                                                infoWindow.setPosition(event.latLng);
                                                infoWindow.open(map);
                                                google.maps.event.addListener(map, 'click', function() {
                                                    infoWindow.close();
                                                });
                                            } else {
                                                alert('No data found')
                                            }
                                        }  
                                    });
                                }); 
```

# jquery - 如何将格式化程序（日期）添加到 jqgrid 子网格

> ID：15969450
> 
> 赞同：1
> 
> 时间：2013-04-12T10:51:38.513
> 
> 标签：jquery, jqgrid, formatter, subgrid

我遇到了一个问题，我有下一个 jqgrid：

```
grid.jqGrid({
    datatype: "xml",
    url:'../Controladores/cPedidos.php?action=lpp',
    mtype: 'POST',
    colNames:['FECHA','PROVEEDOR','USUARIO'],
    colModel:[
        {name:'fecha_compra',index:'fecha_compra',width:120, sorttype: 'date',
            formatter: 'date', formatoptions: { srcformat: 'm/d/Y H:i', newformat: 'd/m/Y H.i'} },
        {name:'nombre',index:'nombre',editable: false, width:560},
        {name:'usuario_id',index:'usuario_id',width:100, editable: false}

    ],
    rowNum:100,
    rowList:[50,100,200],
    pager: '#paginacion',
    gridview:true,
    rownumbers:true,
    ignoreCase:true,
    sortname: 'fecha_compra',
    viewrecords: true,
    sortorder: "desc",
    caption:"Pedidos",
    height: "100%",
    subGrid : true,
    subGridUrl: '../Controladores/cPedidos.php?action=lac',
    subGridModel: [{ name  : ['Codigo','Cantidad','Articulo','Estado','Rubro','Observaciones','Fecha Recibido','Usuario'], 
        width : [50,50,450,60,60,150,0,0] }],
    ondblClickRow: function(id, ri, ci) {
        // edit the row and save it on press "enter" key
        grid.jqGrid('editRow',id,true,null,null, 'clientArray');
    },
    onSelectRow: function(id) {
        if (id && id !== lastSel) {
            // cancel editing of the previous selected row if it was in editing state.
            // jqGrid hold intern savedRow array inside of jqGrid object,
            // so it is safe to call restoreRow method with any id parameter
            // if jqGrid not in editing state
            if (typeof lastSel !== "undefined") {
                grid.jqGrid('restoreRow',lastSel);
            }
            lastSel = id;
        }
    }
}).jqGrid('navGrid','#pager',{add:false,edit:false},{},{},myDelOptions,{multipleSearch:true,overlay:false}); 
```

我正在将主网格上的日期格式化为 dd/mm//yy (FECHA)，现在我需要对“fecha recibido”的子网格执行此操作，我不知道要放置格式化程序代码

你怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:14:08.863

您用于`subGridModel`创建子网格。它只使用有限的可能性来创建最简单的子网格（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:subgrid#properties)）。如果您需要在子网格中有格式化程序，则需要使用更灵活的方式：[Subgrid as Grid](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:subgrid_as_grid)。

这种 subgid 的实现非常简单，非常灵活。您应该只`subGridRowExpanded`在主网格中实现回调而不是使用`subGridModel`。如果用户单击展开按钮 ("+") 以查看为您创建的子网格 jqGrid 在扩展行下的空行。如果创建空`<div>`元素，您可以在其中放置*任何*信息，包括任何其他网格（子网格）。您需要做的只是创建`<table>`具有某些独特`id`属性的新元素，并将该元素放置在jqGrid 之前为您创建`<table>`的空元素中。`<div>`通常一个`id`表的构造基于 id作为回调`<div>`的第一个参数。`subGridRowExpanded`

您可以在[我的旧答案](https://stackoverflow.com/a/4115481/315935)中找到最简单的回调实现。您可以在[此处](https://stackoverflow.com/a/13241406/315935)找到另一个示例。[您可以在文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:subgrid_as_grid)中找到更多此类实现的示例，或者只是在 web 或 stackoverflow 上搜索`"subGridRowExpanded"`文本。

# jsf - 如果primefaces，则使用通用entityConverter（由BalusC提出）作为selectonemenu

> ID：15969452
> 
> 赞同：0
> 
> 时间：2013-04-12T10:51:40.373
> 
> 标签：jsf, generics, primefaces, converter, selectonemenu

我想完全使用[这个通用转换器](https://stackoverflow.com/a/4273528/157762)，`<p:selectOneMenu />`但它不显示数据，我也没有例外。

我不知道问题

```
<p:selectOneMenu id="articles-type" style="margin-right:20px;"
                 converter="entityConverter"
                 value="#{newsessionVentesMB.selectedTypeFiltre}">
    <f:selectItem itemLabel="Selectionner Type" itemValue="" />
    <f:selectItems itemLabel="#{t.libelle}" itemValue="#{t}"
                   value="#{newsessionVentesMB.listTypes}" var="t" />
</p:selectOneMenu> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T08:47:36.707

如果您的 f:selectItems 没有打印任何选项，请尝试：

1.  检查#{newsessionVentesMB.listTypes}
2.  移除转换器
3.  从 p:selectOneMenu 更改为 h:selectOneMenu

仅用于调试目的。

没有关于如何实现 newsessionVentesMB.listTypes 的任何信息，这是我做的最好的事情......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T14:42:11.460

我通过将**noSelectionOption="true"**放在空的 selectItem 上解决了这个问题，如下所示：

```
<f:selectItem itemLabel="Selectionner Type" itemValue="" noSelectionOption="true" /> 
```

我希望这有帮助。

# wordpress - 在小部件 Wordpress 中保存复选框组

> ID：15969464
> 
> 赞同：3
> 
> 时间：2013-04-12T10:52:30.913
> 
> 标签：wordpress, checkbox, widget

为了我的一生，我无法让多个复选框起作用！

其他一切都有效，包括一个复选框，但我不知道如何制作多个复选框。

我想要的是以下内容：

我有一个名为 Team 的自定义帖子类型，其中包含所有团队成员。我想制作团队中帖子的小部件。我希望复选框输出团队中的所有帖子，最终用户可以在其中选择要显示的人。

我尝试在数组中这样做，但这没有用。

我的单个复选框是这样的：

```
public function widget( $args, $instance ) {
    $teammember = $instance['teammember'];
}

public function update( $new_instance, $old_instance ) {
    $instance['teammember'] = $new_instance['teammember'];
    return $instance;
}

public function form( $instance ) {
    $teammember = $instance['teammember'];
?>
<p>
    <input id="<?php echo $this->get_field_id('teammember'); ?>" name="<?php echo $this->get_field_name('teammember'); ?>" type="checkbox" value="Name 1" <?php checked( '1', $teammember ); ?>/> Name 1
    <input id="<?php echo $this->get_field_id('teammember'); ?>" name="<?php echo $this->get_field_name('teammember'); ?>" type="checkbox" value="Name 2" <?php checked( '1', $teammember ); ?>/> Name 2
</p>
<?php } ?> 
```

因此，假设我有 10 个团队成员，我希望他们都在小部件中有一个复选框，最终用户可以在其中选择要显示的团队成员。

我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T16:51:35.643

在您的示例中，由于 ID 重复，输入将违反 W3C。这些名称将相互覆盖。

将`$this->get_field_name('teammember');`返回相同的结果并相互覆盖。

您需要将其作为数组来实现。

```
<?php
    public function form($instance) {
        $teammember = $instance['teammember'];
?>
<p>
    <?php
        foreach($teammember as $id => $name) {
    ?>
    <input id="<?php echo $this->get_field_id('teammember') . $id; ?>" name="<?php echo $this->get_field_name('teammember'); ?>[]" type="checkbox" value="<?php echo $name; ?>" <?php checked('1', $name); ?> />
    <?php
        }
    ?>
</p>
<?php
} 
```

# sql - 从 MS Access 中的字母数字列中选取最大值

> ID：15969465
> 
> 赞同：1
> 
> 时间：2013-04-12T10:52:37.503
> 
> 标签：sql, ms-access, max, memo

我有一个表，其中有一列数据类型为“备忘录”。
该字段包含“X003”、“X0022”、“X002”、“X0030”、“X0031”、“X004”等值。简而言之，第一个“X00”部分是通用的，其余部分是整数。
我想通过 sql 查询选择第二部分中包含最大整数的行。sql应该怎么写？
如果它只是一个整数，我会在 sql 中使用“MAX()”来获取最大值。但它与此不同。我应该怎么办？请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T10:58:26.087

```
SELECT max(val(mid([col],3))) FROM thetable; 
```

即选择第三个字符后的最大值，转换为数字（如果不可转换，则为 0）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:08:26.653

```
How should i write the sql? 
```

如果您正在寻找 sql 查询

```
SELECT 
    MAX(CONVERT(INT,CASE WHEN PatIndex('%[a-z]%',REVERSE(memo)) > 0
      THEN RIGHT(memo,PatIndex('%[a-z]%',REVERSE(memo))-1)
      ELSE NULL END)) AS maxmemo
FROM Table1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:58:18.880

您可以在查询中执行简单`MID()`的操作以获取最后两个字符，然后将它们转换为整数，甚至`MAX()`直接在块上执行。

# html - CSS位置：固定不工作

> ID：15969471
> 
> 赞同：1
> 
> 时间：2013-04-12T10:53:03.077
> 
> 标签：html, css, position, css-position

我为我的页面创建了这个 .css 文件：

```
#content-box, #header-box, #menu-box, #footer-box
{
    background-color:#084B8A;
    color:#FFFFFF;
}

#content-box
{
    display:block;
    width:auto;
    min-height:205px;
    border-radius: 10px;
    -moz-border-radius: 10px;
    margin:1px;
    padding:5px;
}

#menu-box
{
    position:fixed;
    display:block;
    width:auto;
    height:205px;
    border-radius: 10px;
    -moz-border-radius: 10px;
    margin:1px;
    padding:5px;
}

#footer-box
{
    display:block;
    width:auto;
    height:20px;
    border-radius: 10px;
    -moz-border-radius: 10px;
    margin:0px;
    padding:0.5px 5px;
    text-align:right;
}

#header-box
{
    display:block;
    width:auto;
    height:20px;
    border-radius: 10px;
    -moz-border-radius: 10px;
    margin:0px;
    padding:0.5px 5px;
    text-align:left;
} 
```

当我向下/向上滚动页面但不工作时，我想#menu-box 移动。这是页面的排列：

```
#header-box
---------------------------------------
         |#
         |c
#menu-box|o
         |n
         |t
         |e
         |n
         |t
         |-
         |b
         |o
         |x
---------------------------------------
                            #footer-box 
```

在每个 div(#header-box, #menu-box, #content_box, #footer-box) 我添加信息（在 #menu-box 我添加一个 css 垂直下拉菜单）。

编辑：这是我的 HTML 代码，我认为问题出在表格标签上：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="ro">
<head>
<title>...</title>
</head>
<body>
<table border="1" width="100%"><tr><td><div id='header-box'>Bine ai venit
</div></td></tr></table>
<table border="1" width="100%">
<tr><td style="width:200px; height:205px;"><div id='menu-box'><?php include("nav.php"); ?></div></td>
<td><div id='content-box'>
<?php // content ?>
</div></td></tr></table>
<table border="0" width="100%"><tr><td><div id='footer-box'>Creat de ...</div></td></tr></table>
</body>
</html> 
```

（正常边框设置为 0 但现在，因为我设置为 1 我看不到我的#menu-box）

@Andrew：我知道我需要一个长页面，并且我在#content-box 中列出了表格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:00:02.513

我在这里创建了您的代码的 jsfiddle：http: [//jsfiddle.net/cXmhS/](http://jsfiddle.net/cXmhS/)

它似乎工作。您需要有更多的内容才能使菜单随滚动条一起移动。

为了让它更好地工作，我改变了你的`min-height:1005px;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:02:41.217

即使我看到类似的答案，我也尝试创建自己的示例。对我来说，最好为自己设置宽度，`#menu-box`因为没有办法向左浮动。如果菜单框具有自动宽度，即使定义边距也无济于事。

我的解决方案是这样的：http: [//jsfiddle.net/6sg3v/](http://jsfiddle.net/6sg3v/)

定义`width:`为`#menu-box`和适当`margin-left:`的`#content-box`

# uiapplicationdelegate - UIApplicationDelegate applicationWillResignActive 执行方法但不显示效果

> ID：15969481
> 
> 赞同：0
> 
> 时间：2013-04-12T10:53:20.330
> 
> 标签：uiapplicationdelegate

出于安全原因，我需要在进入后台之前而不是在进入前台之前清除应用程序的状态。applicationWillResignActive 中的代码执行，但视图的关闭没有显示，也没有生效，因为前一个视图仍然可见并且视图控制器没有从堆栈中删除。另一方面，applicationWillEnterForeground 中的代码执行并生效，因为dismissModalViewControllerAnimated 实际上正在转换视图并从堆栈中删除视图控制器。

我收到这个警告：

```
Warning: Attempt to dismiss from view controller <UINavigationController: 0x1e074c90>     while a presentation or dismiss is in progress! 
```

如何强制dismissModalViewControllerAnimated 生效并显示视图的转换并从堆栈中删除视图控制器？

```
- (void)applicationWillResignActive:(UIApplication *)application
{
    [self initializeState];
}

- (void)initializeState
{
    [self.appDelegateDelegate resetApp:self];
} 
```

...

```
#pragma mark - AppDelegateDelegate

- (void)resetApp:(AppDelegate *)appDelegate
{
    [SVProgressHUD dismiss];
    [[EmployeeAPIClient sharedInstance] logout];
    [self dismissModalViewControllerAnimated:NO];
} 
```

但如果包含在 applicationWillEnterForeground: 中可以正常工作

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{
    [self initializeState];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T08:20:50.830

在您要关闭的视图控制器中，尝试使用 NSNotification 观察者：

```
-(void)viewDidLoad{
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(dismissThisViewController) name:UIApplicationWillResignActiveNotification object:nil];
}

-(void)dismissThisViewController {
    [self dismissViewControllerAnimated:NO completion:nil];
} 
```

# php - 如果 url 包含无效字符，如何检测和阻止 ip

> ID：15969482
> 
> 赞同：1
> 
> 时间：2013-04-12T10:53:20.397
> 
> 标签：php, ip, blocking

我有一个在 url 中有 id= 的页面。问题是这引起了试图操纵 url 的黑客的大量不必要的关注，例如 id=133+order by 1-- （遗憾的是，更改 id 不是一种选择）

我有以下代码来获取 id 并去除任何“坏处”。

```
$ia = intval($_GET['id']);
$ib = mysql_real_escape_string($ia);
$ic = strip_tags($ib); 
```

但我真正想做的是在 x 时间内禁止用户的 IP 地址。这样，如果他们曾经是一个安全漏洞，它会为我赢得时间来检测它并在黑客之前修复它（最好是安全而不是抱歉！）

还有它不必要的 CPU 使用率，我想排除它。

有谁知道一个 php 脚本，它可以检测和阻止基于 url 操作的 ip x 时间量？或者甚至更好的人喜欢展示他们已经制作的基本示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:10:46.727

你有几个选择：

1.  如果源 IP 包含在您管理的某个黑名单中，则只需使请求失败，即可在 PHP 中实现 IP 阻止。
2.  以某种方式告诉您的服务器程序（Apache，IIS，...）在接受传入连接之前阻止请求。
3.  为自己编写一个非常简单的代理，如果它不是来自黑名单 IP 的 HTTP 请求，它会接受它，检查 ID 的语义有效性，管理黑名单，并将可接受的请求转发到您的实际网络服务器。

选项 1 相当简单：维护一个黑名单，对照它检查传入的请求，并根据需要使它们失败。您可以在此处找到更多信息，包括一个简单的代码示例：http: [//perishablepress.com/how-to-block-ip-addresses-with-php/](http://perishablepress.com/how-to-block-ip-addresses-with-php/)

选项 1 的问题在于，它并没有真正为您节省任何 CPU 负载，而且可能比 DaveRandom 建议的简单解析 ID 并验证它而不是源 IP 的计算涉及更多。

不幸的是，选项 2 将在很大程度上取决于您正在使用的服务器基础架构，并且在大多数情况下，不容易实现。为此，您可能必须找到一种方法来在 PHP 中修改服务器的配置文件，然后以某种方式让服务器重新读取这些文件。我还没有研究如何使用 Apache 或 IIS 来实现这一点，但是对于 Google AppEngine，我知道这对于当前的 API 是不可能的。

选项 3 将涉及大量编码（除非您可以在某处找到预制解决方案），但可能应该是最灵活的解决方案。

我不确定，但是，根据您使用的服务器，如果您的服务器提供了一个钩子，您可以在进一步处理之前检查传入的请求，甚至可以实现选项 2 和 3 之间的混合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:09:04.317

您可以从超级全局变量中获取所有必要的数据，`$_SERVER`您可以使用键 REMOTE_ADDR 和 REMOTE_HOST（更多信息[在手册中](http://php.net/manual/en/reserved.variables.server.php)）。

要阻止某人，您可以将此值与以前保存的值进行比较。您可以将它们保存在任何地方，例如数据库（最简单的解决方案）或外部文件中。为了更安全，服务器不应访问此文件。

然而，这并不是一个完美的解决方案，因为可能会更改 IP 地址以及动态设置的问题。

在您的数据库/文件中，您可以添加一个像“过期”这样的字段，在此之后用户可以被允许。

但正如我在评论中所说，我不会阻止任何人。正如@DaveRandom 所写，您可以简单地将`id`转换为整数，这将使您远离 SQL 注入。请记住，您应该考虑从客户端获取和处理的所有变量，这些变量`$_POST`也是如此。

# c++ - 调用构造函数时 C++/Qt 无法解析外部

> ID：15969483
> 
> 赞同：6
> 
> 时间：2013-04-12T10:53:28.850
> 
> 标签：c++, qt, unresolved-external

# [已解决]这个问题不知何故在5-6清理和重建时自行解决，没有更改任何代码

我有一个带有默认构造函数的类，以及一个带有 8 个参数的构造函数。

从另一个类中，我试图调用构造函数并传递 8 个参数，但是当我尝试这样做时，我得到了一个`LNK2019 Error`.

令我困惑的是，如果我调用默认构造函数，程序编译并运行良好......一切都有正确的包含并且必须工作，因为我可以调用默认构造函数，我使用 QStrings 作为一些参数但是QString 被包括在内，所以它不可能是......任何其他人都知道为什么我会`LNK2019 error`为构造函数获取参数而不是默认参数的任何其他原因？

汽车.h

```
#include <QString>
class car
{
public:

    car();
    car(int car_id, QString something, QString something_else, QString something3, int an_int, int another_int, int another_int_i, QString something4);
}; 
```

汽车.cpp

```
car::car()
{
}

car::car(int car_id, QString something, QString something_else, QString something3, int an_int, int another_int, int another_int_i, QString something4)
{
} 
```

显然我刚刚删除了上下文和值等，但在结构上没有区别

数据库控制器.cpp

```
#include "DatabaseController.h"
#include "car.h"
void DatabaseController::DoSomething()
{
    car *pcar = new car(0, "", "", "", 0, 0, 0, "");
} 
```

接口.cpp

```
#include "DatabaseController.h"
void interface::on_btn_clicked()
{
    DatabaseController DC;
    DC.DoSomething();
} 
```

完全错误：

```
DatabaseController.obj:-1: error: LNK2019: unresolved external symbol "public: __thiscall car::car(int,class QString,class QString,class QString,int,int,int,class QString)" (??0car@@QAE@HVQString@@00HHH0@Z) referenced in function "public: void __thiscall DatabaseController::getAll(class QString)" (?getAll@DatabaseController@@QAEXVQString@@@Z) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-11-27T17:10:02.453

我知道这是一个非常晚的回应，但我在同样的问题上挣扎了很长时间。

在进行 clean->rebuild 时，QT 并不总是正确解析 c++ 文件。幸运的是，只要手动删除构建文件，它就会从头开始运行。

它对我有用，我希望它可以帮助一些人！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T11:31:36.507

您是否尝试过重建项目？在某些情况下，这确实会产生类似于您描述的链接错误。

好的，您能否复制粘贴与您项目中相同的代码？:)

```
car *car = new car(0, "", "", "", 0, 0, 0, ""); 
```

例如，在这里，您不能用相同的名称命名“汽车”的实例。您应该使用另一个标识符，例如：

```
car *pCar = new car(0, "", "", "", 0, 0, 0, ""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-15T15:22:15.873

我面临着同样的问题，没有一个建议的答案对我有用。最终**运行 qmake**为我解决了问题。

1.  右键项目名称
2.  运行 qmake
3.  干净的
4.  重建

我认为这可能会对面临类似问题的人有所帮助。

# android - Achartengine：条形图着色

> ID：15969486
> 
> 赞同：0
> 
> 时间：2013-04-12T10:53:32.193
> 
> 标签：android, achartengine

我使用 AChartEngine lirary:: 设计了一个条形图

它看起来如下所示：

[![2](https://i.stack.imgur.com/Rs3LQ.jpg)](https://i.stack.imgur.com/Rs3LQ.jpg)

我的问题是？？？-**我可以制作不同的高度条以具有不同的颜色（传递的数据是单个系列）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:12:33.177

使用 achartengine线程检查[条形图。](https://stackoverflow.com/questions/5405858/bar-chart-using-achartengine)如果这不能帮助检查[使用多个系列的不同颜色条](https://stackoverflow.com/questions/15439976/different-color-bars-using-multiple-series/15464307)。我设法使用第二个问题中提问者使用的概念来做同样的事情。另外我做了

```
renderer.setBarSpacing(0); 
```

我知道您已经提到数据是以单个系列传递的。然而，这目前没有在 AChartEngine 中实现。让我们等待它的新版本。

# jquery - jQuery多选自动完成触发器

> ID：15969489
> 
> 赞同：0
> 
> 时间：2013-04-12T10:53:37.867
> 
> 标签：jquery, autocomplete, multi-select

我正在使用

[http://wilker-dev.com/jquery-multiselect/](http://wilker-dev.com/jquery-multiselect/)自动完成插件。

我想触发这个插件的添加事件 onclick 带有值的复选框。

我该怎么做？

这是我的代码

```
$('.sampleCats').live('click',function(){
    var catName = $(this).data('name');
    var searchCatData = $("#searchCat").val();
    var ele = '<a class="bit bit-box" data-name="'+catName+'">'+catName+'<a class="closebutton"></a></a>';
    if($(this).is(':checked'))
    {
        $("#searchCatBox .jquery-multiselect").prepend(ele);
        if(searchCatData)
        {
            $("#searchCat").val(searchCatData+','+catName);
        }
        else
        {
            $("#searchCat").val(catName);
        }
    }
    else
    {
        searchCatData = searchCatData.split(',');
                    $("#searchCat").val(searchCatData.join(','));
        $("#searchCatBox .jquery-multiselect").find("a.bit-box").each(function() {
            if ($(this).data("name") === catName) {
                return $(this).remove();
            }
        });
    }
}); 
```

它添加除关闭链接以外的数据，并在选中和取消选中复选框时添加和删除...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:03:23.983

您可以尝试解决方法，例如

```
 $(".checkboxClss").click(function(){
      var htmlToAdd = '<a class="bit bit-box">'+this.value+'<a class="closebutton"></a></a>';
      $('.jquery-multiselect').append(htmlToAdd);
    }); 
```

当您添加任何元素时，此插件会将新的锚元素添加到具有类的 div 中，`jquery-multiselect`因此您可以执行相同操作而不是手动触发添加事件。
**PS：**我从来没有使用过这个插件，所以只是检查了源代码并想出了这个解决方法，只有在你没有得到任何其他合适的解决方案时才使用。

当我检查源代码时

```
close = $(document.createElement("a"));
        close.addClass("closebutton");
        close.click(__bind(function() {
          return this.remove(a.data("value"));
        }, this));
        a.append(close); 
```

随便玩一下，看看你是否可以手动绑定它。

# css - css 用填充将 div 分成四个相等的部分

> ID：15969492
> 
> 赞同：2
> 
> 时间：2013-04-12T10:53:51.130
> 
> 标签：css, html

我有一个内容 div，在那里我希望有四个相等的 div，具体取决于页面的宽度和高度。

目前这是我的代码：

HTML：

```
<div id="content">
<div class='A' id="none" data-panel_type="none">
    <textarea id="1" name="none"></textarea>
</div>
<div class='B' id="none" data-panel_type="none">
    <textarea id="2" name="none"></textarea>
</div>
<div class='C' id="none" data-panel_type="none">
    <textarea id="3" name="none"></textarea>
</div>
<div class='D' id="none" data-panel_type="none">
    <textarea id="4" name="none"></textarea>
</div>
</div> 
```

CSS：

```
#content {
    border: 2px solid;
    width: 100%;
    height: 100%;
    position: relative;
    top: -15px;
    left: -15px;
    padding: 10px;
  }

  #content .A {
    border: 2px solid;
    width:50%;
    height: 50%;
    float: left;
    background: purple;
  }

  #content .B {
    border: 2px solid;
    width:50%;
    height: 50%;
    float: left;
    background: purple;
  }

  #content .C {
    border: 2px solid;
    width:50%;
    height: 50%;
    float: left;
    background: purple;
  }

  #content .D {
    border: 2px solid;
    width:50%;
    height: 50%;
    float: left;
    background: purple;
  } 
```

为了工作，我需要改变什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:58:54.290

您可以使用`box-sizing`属性（有关[MDN](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)的更多信息），添加

```
#content, #content > div {
    -webkit-box-sixing: border-box;
    -moz-box-sizing: border-box; 
    box-sizing: border-box;
} 
```

见[http://jsbin.com/egukon/1/edit](http://jsbin.com/egukon/1/edit)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T11:01:43.143

用这个

```
#content {
    border: 2px solid;
    position: relative;   
    float:left;
    width:100%
  }

  #content div {
    float:left;
    width:25%;
    height: 50%;
    background: purple;
    display:inline-block;
  } 
```

**[演示](http://jsfiddle.net/psh4u/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:56:07.800

你有你`content div width`的等于`100%`。

因此，如果您有 4 个 div，则需要将宽度设置为`content A, B, C, D`to `25%`。

因为`25%*4 = 100%`

也许将属性添加`display:inline`到`content A, B, C, D`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T10:59:56.517

如果您希望它们适合容器并随意使用，那么您的所有内容都`div`必须是宽的，以便子 div 的边框包含在宽度/高度内。[工作演示](http://cssdeck.com/labs/dxqlhmyv)。`25%``box-sizing: border-box;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-28T02:57:50.200

在你的 html 中使用 flex 属性

#content
{
你的 CSS 属性
display:flex;
}

这将在宽度和高度上平均划分主分区标签内的子分区标签。

# php - PHP：set_include_path 和 require_once()：需要打开失败

> ID：15969499
> 
> 赞同：1
> 
> 时间：2013-04-12T10:54:15.380
> 
> 标签：php, path, include, set

我的 php 设置有问题，我肯定知道因为完全相同的库非常适合我在 HIS 服务器上的合作伙伴。

```
$inc_path = get_include_path();
$inc_path .= PATH_SEPARATOR . "./rtmp" . PATH_SEPARATOR . "./SabreAMF";
set_include_path($inc_path);

require_once 'rtmp/SabreAMF/OutputStream.php';
require_once 'rtmp/SabreAMF/InputStream.php';
require_once 'rtmp/SabreAMF/AMF0/Serializer.php';
require_once 'rtmp/SabreAMF/AMF0/Deserializer.php';
require_once 'rtmp/SabreAMF/TypedObject.php'; 
```

这就是我得到的

```
Warning: require_once(rtmp/SabreAMF/OutputStream.php): failed to open stream: No such file or directory in C:\Program Files (x86)\EasyPHP-12.1\www\phpLoL-master\rtmp\RtmpClient.php on line 7

Fatal error: require_once(): Failed opening required 'rtmp/SabreAMF/OutputStream.php' (include_path='.;C:\php\pear;./rtmp;./rtmp/SabreAMF;./rtmp;./SabreAMF') in C:\Program Files (x86)\EasyPHP-12.1\www\phpLoL-master\rtmp\RtmpClient.php on line 7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:44:42.273

更新到 php 5.4 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:59:24.887

尝试

```
$inc_path = $_SERVER['DOCUMENT_ROOT'];    
require_once $inc_path.'/rtmp/SabreAMF/OutputStream.php';    
require_once $inc_path.'/rtmp/SabreAMF/InputStream.php';    
require_once $inc_path.'/rtmp/SabreAMF/AMF0/Serializer.php';    
require_once $inc_path.'/rtmp/SabreAMF/AMF0/Deserializer.php';    
require_once $inc_path.'/rtmp/SabreAMF/TypedObject.php'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:04:26.260

实际上你正在设置包含路径

已经这样了

```
$inc_path .= PATH_SEPARATOR . "./rtmp" . PATH_SEPARATOR . "./SabreAMF";
set_include_path($inc_path); 
```

由于现在 PHP 知道您包含的任何文件都可能在此路径中，您可以像下面这样包含

```
require_once 'OutputStream.php'; 
```

或者

```
require_once 'AMF0/Deserializer.php'; 
```

> 注意： - 我假设您在应用程序引导程序中执行 set_include_path ，否则这种设置包含路径的方法在语法上根本不起作用

# javascript - 提示最大长度

> ID：15969503
> 
> 赞同：14
> 
> 时间：2013-04-12T10:54:44.307
> 
> 标签：javascript, html, specifications

使用 prompt() 我正在生成一些 html 并需要知道我可以放入弹出窗口的最大长度。

我在规范中找不到任何关于此的内容，想知道是否有人可以提供帮助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-07-06T21:19:09.630

如果有人感兴趣，这里有一些真实世界的数字。有的话请补充。

在浏览器控制台中使用以下代码：

`s = prompt("a", Array(SOME_NUMBER).join("0")); s.length;`

*   @Redzarf 提到的带有省略号的Chrome 43 - **2000 。**
*   Firefox 39 - 达到**10,000,000**然后停止测试（浏览器在执行时运行缓慢。您也可能会收到“非响应脚本”警报）。
*   IE 11 - 达到**10,000,000**然后停止测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T11:00:11.990

ECMAScript 编程语言规范没有指定任何最大长度。最大长度将是特定于实现的，即基于可用内存。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-22T11:43:43.087

例如，Chrome (v41) 将 prompt() 的第二个参数限制为 2000 个字符。

如果给定的值比它长，它会截断这 3 个字符串：

```
first 999 char
'...'
last 998 char 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-23T07:30:58.447

我在 Chrome 72 上进行了测试，我能够输入超过 50K 的字符`prompt`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T11:02:05.217

这是因为在规范中 prompt() 没有最大长度。为了限制长度，您需要在输入结果后检查结果的长度。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-27T11:24:43.570

[karthick](https://stackoverflow.com/users/358435/karthick)的响应是正确的，但是您可以通过这种方式手动检查输入提示的长度，强制用户只输入少于设定数量的字符，或者取消：

```
var maxLength = 25;
var userData = -1;

while (userData == -1 || (userData != null && userData.length > maxLength)) {
    userData = window.prompt('Please enter some data. It should be no more than ' + maxLength + ' characters in length', ');
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-02-08T17:50:16.853

尝试这个 ：

```
var rep = "+" ;
while (rep != null)
{
    // document.write(rep.length + " " + rep + "<br>") ; // alternate code
    document.getElementById("res").innerHTML = rep.length + " " + rep + "<br>" ;
    rep = prompt("Input length was : " + rep.length, rep + rep);
} 
```

只要您响应“取消”，导航器就会显示最后输入的长度和相应的字符串。在 262144 之后取消。然后进一步测试。对于非常大的长度，刷新显示可能需要很长时间。我没有实际证据证明显示的字符串具有正确的长度。在 262144 "+" 的情况下，我开始在视觉上计算这个字符串，但我在 32 小时后放弃了这个游戏（开个玩笑）。

# java - Android - 访问活动启动后添加的对象

> ID：15969511
> 
> 赞同：0
> 
> 时间：2013-04-12T10:55:14.323
> 
> 标签：java, android, layout, dynamic, layout-inflater

我是 Android 开发的初学者，非常感谢您在这方面的帮助。

我有一个 android 活动，当用户单击一个按钮时，它会创建一个 Checkbox 和一个 EditText。用户可以自由添加他喜欢的任意数量的复选框/编辑文本。

这是添加到活动中的视图的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <CheckBox
            android:id="@+id/checkBox1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

        <EditText
            android:id="@+id/editText1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10" >

            <requestFocus />
        </EditText>

    </LinearLayout>

</LinearLayout> 
```

这是java代码：

```
public void onclickplus (View view){

        LayoutInflater inflate = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        final View view1 = inflate.inflate(R.layout.row_checkitem, null);
        mainLayout.addView(view1);
        count = count +1;

} 
```

***我的问题是，我们如何在实际的 java 代码中访问这些复选框和添加的 EditText，以便我可以将它们的数据保存到我的数据库中。***

如果这些对象预先确定，我会做例如：

```
EditText text1;
text1 = (EditText) findViewById(R.id.editText1);
text1.getText().toString(); 
```

等等，以访问editText的值。

然而，在这种情况下，这些对象在活动启动时并不存在。

你能帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:34:23.277

你可以看看这个解决方案：

[动态添加 EditText(s) 并检索值 - Android](http://prasans.info/2011/03/add-edittexts-dynamically-and-retrieve-values-android/)

他们所做的是动态添加多个 EditText 字段并将它们保存在列表中以便以后访问它们。您只需要稍微重写一下，还可以添加复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:47:25.537

多亏了 D.Wonnik 的帮助，我终于实现了我想做的事情。

我放弃了 LayoutInflater 方法，而是使用了 TableLayout 和 TableRows。

这样，用户可以通过单击“+”按钮添加包含复选框和 EditText 的 TableRows，并且他还可以通过单击“-”按钮在他认为合适的情况下删除它们。我也可以通过这种方式检索它们的值。

这是代码：

```
LinearLayout mainLayout;
    TableLayout tablelayout;
    TableRow[] tableRow;
    int count;
    EditText[] ed;
    CheckBox[] cb;

protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mainLayout = (LinearLayout)findViewById(R.id.LinearLayout1);
        tablelayout = new TableLayout(this);
        mainLayout.addView(tablelayout);
        ed = new EditText[10];
        cb = new CheckBox[10];
        tableRow = new TableRow[10];

    }

public void onclickplus (View view){

        ed[count] = new EditText(this);
        ed[count].setId(count);
        cb[count] = new CheckBox(this);
        cb[count].setId(count);
        tableRow[count] = new TableRow(this);

        tablelayout.addView(tableRow[count]);

        tableRow[count].addView(cb[count]);
        tableRow[count].addView(ed[count]);

        count = count +1;

}

public void onclickminus (View view){

        if (count>0){

            count = count -1;
            tablelayout.removeView(tableRow[count]);
    }

    } 
```

感谢 D.Wonnik 为我指明了正确的方向！

# python - Python 2.7：如何查找字符串中每个单词的首字母的索引

> ID：15969513
> 
> 赞同：2
> 
> 时间：2013-04-12T10:55:25.240
> 
> 标签：python, python-2.7

我正在寻找一种在 Python 中检测字符串中每个单词的第一个字符的索引的方法：

```
string = "DAY MONTH      YEAR    THIS   HAS RANDOM   SPACES" 
```

我想找到每个“单词”的位置，所以这个输出是：

```
[0, 4, 15, 23...] 
```

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T10:57:36.180

```
>>> import re
>>> string = "DAY MONTH      YEAR    THIS   HAS RANDOM   SPACES"
>>> [match.start() for match in re.finditer(r'\b\w', string)]
[0, 4, 15, 23, 30, 34, 43] 
```

# ruby-on-rails - 如何在 ruby vcr 中记录 http 交互？

> ID：15969516
> 
> 赞同：2
> 
> 时间：2013-04-12T10:55:29.593
> 
> 标签：ruby-on-rails, ruby-on-rails-3, stubbing, vcr

我正在使用以下宝石的 Rails 项目工作。

```
gem "webmock", "1.6.1"
gem "vcr", "1.4.0" 
```

test_data.yml 中已经记录了很少的 http 交互。我已经实现了新的业务逻辑，并尝试记录 http 交互。但它没有记录。以下是我使用的 VCR 配置。

```
VCR.config do |c|
  c.cassette_library_dir     = File.join(Rails.root, 'spec', 'helpers', 'cassette_library')
  c.http_stubbing_library    = :webmock
  c.ignore_localhost         = false
end
VCR.insert_cassette('test_data', :record => :new_episodes) 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:44:41.797

查看有关[VCR 录制模式](https://www.relishapp.com/vcr/vcr/v/1-6-0/docs/record-modes)的文档。使用`:record => :new_episodes`时，VCR 正在重放以前记录的请求。在进行逻辑更改时，您可以尝试删除之前记录的请求或切换到记录模式`:all`。

# python - 凯勒盒中的矩阵，检索值时出错

> ID：15969518
> 
> 赞同：1
> 
> 时间：2013-04-12T10:55:36.387
> 
> 标签：python, numpy

我在以下代码中遇到错误，关于矩阵，有人可以解释发生了什么吗？我是 python 新手，无法真正理解错误。该代码是使用凯勒盒求解边界层，也可以称为矩阵中的矩阵。这是整个代码

```
import numpy as npy

blt = int(raw_input("Input the boundary layer thickness = "))
deleta = float(raw_input("Input the step size of boundary layer thickness = "))
np = int((blt/deleta) + 1)
stop = 1
k=1
l=2
g=2
eselon = 0.00001

def eta(j,k):
    if j == 1 and k == 1:
        return 0
    else:
        return eta(j-1,k) + deleta;
deta = deleta
def etanp():
    return eta(np,k)       
def f(j,k):
    return -eta(np,1)*etab2 + etanp()*etab1 + eta(j,1)
def u(j,k):
    return  -3*etab1 + 2*etab +1
def v(j,k):
    return (-6/etanp()*etab + (2/etanp()))
def fb(j,k):
    return 0.5 * (f(j,k) + f(j-1,k))
def ub(j,k):
    return 0.5 * (u(j,k) + u(j-1,k))
def vb(j,k):
    return 0.5*(v(j,k) + v(j-1,k))
def fvb(j,k):
    return fb(j,k)*vb(j,k)
def uub(j,k):
    return ub(j,k) * ub(j,k)

def a1(j,k):
    return 1 + 0.5*deta *fb(j,k)
def a2(j,k):
    return -1 + 0.5*deta *fb(j,k)
def a3(j,k):
    return 0.5 * deta * vb(j,k)
def a4(j,k):
    return a3(j,k)
def a5(j,k):
    return -1 * deta * ub(j,k)
def a6(j,k):
    return a5(j,k)

def r1(j,k):
    return f(j-1,k) - f(j,k) + deta * ub(j,k)
def r2(j,k):
    return u(j-1,k) - u(j,k) + deta * vb(j,k)
def r3(j,k):
    return v(j-1,k)-v(j,k) - deta *((fvb(j,k)*uub(j,k)))-deta

def AJ(j,k):
    if j == 2:
        return npy.matrix([[0,1,0],[-0.5*deta,0,-0.5*deta],[a2(2,k), a3(2,k), a1(2,k)]])
    else:
        return npy.matrix([[-0.5*deta,0,0],[-1,0,-0.5*deta],[a6(j,k),a3(j,k),a1(j,k)]])
def BJ(j,k):
    return npy.matrix([[0,-1,0],[0,0,-0.5*deta],[0,a4(j,k),a2(j,k)]])
def CJ(j,k):
    return npy.matrix([[-0.5*deta,0,0],[1,0,0],[a5(j,k),0,0]])

def alfa(j,k):
    return AJ(j,k) - (BJ(j,k)*gamma(j,k))
def gamma(j,k):
    return npy.matrix.I((alfa(g,k))*CJ(g,k))
def rr(j,k):
    return npy.matrix([[r1(j,k)],[r2(j,k)],[r3(j,k)]])   
def ww(j,k):
    if j == 2:
        return npy.matrix.I(AJ(2,k)*rr(2,k))
    else:
        return npy.matrix.I((alfa(j,k))*(rr(j,k)-(BJ(j,k)*ww(j-1,k))))

def dell(j,k):
     if j == np:
        return ww(np,k)
     else:   
        return ww(j,k) - (gamma(j,k)*dell(j+1,k))
def delf(j,k):
    if j == 1:
        return 0
    elif j == 2:
        return dell(2,k)[2,1]
    else:
        return dell(j,k)
def delu(j,k):
    if j == 1 or j == np:
        return 0
    elif j == np-1:
        return dell(j,k)[1,1]
def delv(j,k):
    if j == 1:
        return dell(2,k)[1,1]
    elif j == 2:
        return dell(2,k)[3,1]
    else:
        return dell(j,k)[3,1]

def ffinal(j,l):
    return f(j,k) + delf(j,k)
def ufinal(j,l):
    return u(j,k) + delu(j,k)
def vfinal(j,l):
    return v(j,k) + delv(j,k)

# Beginning of calculation for Keller-Box

while stop > eselon:
    eta(1,1)
    for j in range (2,np):
        eta(j,k)  

# Initial condition
    etab = eta(j,k) / eta(np,k)
    etab1 = etab**2
    etab2 = etab**3 
    for j in range (1,np):
        deta
        f(j,1)
        u(j,1)
        v(j,1)

# Current value of Central Differentiation
    for j in range (2,np):
        fb(j,k)
        ub(j,k)
        vb(j,k)
        fvb(j,k)
        uub(j,k)
        a1(j,k)
        a2(j,k)
        a3(j,k)
        r1(j,k)
        r2(j,k)
        r3(j,k)
# Matrices Value for A1, Aj, Bj, and CJ
        CJ(j,k)
        AJ(j,k)
        BJ(j,k)
# Recursion: Forward Sweeping
    for j in range (3,np):
        alfa(j,k)
        gamma(j,k)
    for j in range(2,np):
        rr(j,k)
    for j in range(3,np):
        ww(j,k)

# Recursion: Backward Sweeping
    for j in range (np-1,2,-1):
        dell(j,k)

    for j in range (np,3,-1):
        delu(j-1,k)
        delf(j,k)
        delv(j,k)

# Newton's Method
    for j in range (1,np):
        ffinal(j,l)
        ufinal(j,l)
        vfinal(j,l)

# Check the convergence of iteration
    stop = npy.abs(delv(1,k))
    kmax = k
    k =+ 1

cfrex = vfinal(1,kmax)

print cfrex 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:28:01.900

你应该用括号调用 numpy.matrix ：

```
>>> numpy.matrix([[1,2],[1,2]])
matrix([[1, 2],
        [1, 2]]) 
```

试试[numpy 教程](http://www.scipy.org/Tentative_NumPy_Tutorial#head-926a6c9b68b752eed8a330636c41829e6358b1d3)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T22:14:12.083

更新：您的函数`alfa`和`gamma`，定义如下：

```
def alfa(j,k):
    print 'alfa({},{}) called'.format(j,k)
    return AJ(j,k) - (BJ(j,k)*gamma(j,k))

def gamma(j,k):
    print 'gamma({},{}) called'.format(j,k)
    return npy.matrix.I((alfa(g,k))*CJ(g,k)) 
```

无论它们作为参数给出什么，都将永远运行，因为每个都只会调用另一个并且它们无法终止。也就是说，无论输入如何，每个函数都会调用另一个函数。

* * *

我可以看到您的代码中有一些错误。

1）这是@graphite提到的一个，在`npy.matrix`其参数周围没有括号的情况下被调用：

```
def A1(j,k):
    return npy.matrix[[0,1,0],[-0.5*deta(2,k),0,-0.5*deta(2,k)],[a2(2,k), a3(2,k), a1(2,k)]] 
# needs parentheses:
    return npy.matrix([[0,1,0],[-0.5*deta(2,k),0,-0.5*deta(2,k)],[a2(2,k), a3(2,k), a1(2,k)]]) 
```

在您使用的任何地方修复此问题`npy.matrix`

2）在您的定义中`r`，您缺少我认为应该是的内容`k`：

```
def r1(j,k):
    return f(j-1,k) - f(j,k) + deta(j,) * ub(j,k)
#should be:
    return f(j-1,k) - f(j,k) + deta(j,k) * ub(j,k) 
```

3) 这里`np1`没有定义。也许应该是`np`？

```
# Recursion: Backward Sweeping
    for j in range (np1,2,-1):
        dell(j,k) 
```

但总的来说，如果你定义的函数更少，尤其是那些没有参数的函数，那么这段代码可以变得更具可读性（因此更容易找到错误），例如：

```
def etab():
    return eta(j,k) / eta(np,k)
def etab1():
    return etab()*etab()
def etab2():
    return etab()*etab()*etab() 
```

可以替换为：

```
etab = eta(j, k) / eta(np, k)
etab1 = etab**2
etab2 = etab**3 
```

另一个例子：

```
def deta(j,k):
    return deleta 
```

甚至不使用`j`or `k`，因此您可以将整个内容更改为：

```
deta = deleta 
```

在下面的任何地方，而不是写作，`deta(j, k)`或者`deta(2, k)`你可以只写`deta`. 当然，如果您计划在未来某个时候更改您的代码，以便`deta`实际更改为不同的`j`or `k`，那么您可以保持原样。

我希望这有帮助！

# php - Ejabberd xmpp 活动用户列表

> ID：15969522
> 
> 赞同：0
> 
> 时间：2013-04-12T10:55:39.617
> 
> 标签：php, ios, xmpp, chat, ejabberd

我正在为 ios 编写一个聊天应用程序，我在本地安装了 ejabberd 服务器、我的 xcode 项目上的 xmppframework 和 web 服务器上的 xmpphp 框架。我只需要知道如何检索服务器中所有活动用户的列表？我该怎么办？我已经能够在两个特定用户之间发送消息，我可以通过 php 注册和删除用户，但我找不到一段代码来解释我如何检索在线用户列表。 . 我已经在 ejabberd 服务器上设置了一个共享名册，就像这个链接解释：[http](http://www.ejabberd.im/shared-roster-all) ://www.ejabberd.im/shared-roster-all （示例 1）

也许我的解决方案是 XEP-0133 ？我在文档中找到了这个：

```
<iq from='bard@shakespeare.lit/globe'
id='get-active-users-1'
to='shakespeare.lit'
type='set'
xml:lang='en'>
 <command xmlns='http://jabber.org/protocol/commands' 
       action='execute'
       node='http://jabber.org/protocol/admin#get-active-users'/>
</iq> 
```

它似乎提取了所有活动用户，无论如何我不知道如何通过 php 将这个 xml 发送到服务器。所以我的问题是；

我如何通过 php 检索我的 ejabberd 服务器上的活动用户列表？我如何检索指定用户的存在（如果在线）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T00:45:46.027

您想为自己检索数据还是想将其作为操作的一部分？

ejabberd 具有包含大量数据的 Web 界面，但我没有一个可以检查。

当我需要进行临时查询时，我会查看会话表。它拥有所有活动的会话。你在哪里保持会话？在失忆症？

这是网络界面的链接：[http ://www.ejabberd.im/files/doc/guide.html#htoc20](http://www.ejabberd.im/files/doc/guide.html#htoc20)

# ruby-on-rails - 创建模型时出错

> ID：15969523
> 
> 赞同：0
> 
> 时间：2013-04-12T10:55:44.640
> 
> 标签：ruby-on-rails

在创建模型时，我在语言环境机器上遇到了 mysql 错误

```
rails g model language name:string -e localdev

C:/Ruby192/lib/ruby/gems/1.9.1/gems/mysql2-0.2.6-x86-mingw32/lib/mysql2/client.rb:37:in `connect': Can't connect to MySQL server on 'jivestaging.cxrwdp0ae112.us-east-1.rds.amazon
s.com' (10060) (Mysql2::Error)
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mysql2-0.2.6-x86-mingw32/lib/mysql2/client.rb:37:in `initialize'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mysql2-0.2.6-x86-mingw32/lib/active_record/connection_adapters/mysql2_adapter.rb:14:in `new'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mysql2-0.2.6-x86-mingw32/lib/active_record/connection_adapters/mysql2_adapter.rb:14:in `mysql2_connection'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.0.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:230:in `new_connection'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.0.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:238:in `checkout_new_connection'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.0.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:194:in `block (2 levels) in checkout'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.0.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:190:in `loop'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.0.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:190:in `block in checkout'
        from C:/Ruby192/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.0.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:189:in `checkout'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.0.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:96:in `connection'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.0.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:318:in `retrieve_connection'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.0.0/lib/active_record/connection_adapters/abstract/connection_specification.rb:97:in `retrieve_connection'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.0.0/lib/active_record/connection_adapters/abstract/connection_specification.rb:89:in `connection'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.0.0/lib/active_record/base.rb:596:in `quoted_table_name'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/friendly_id-4.0.0/lib/friendly_id/history.rb:67:in `block in included'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/friendly_id-4.0.0/lib/friendly_id/history.rb:63:in `instance_eval'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/friendly_id-4.0.0/lib/friendly_id/history.rb:63:in `included'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/friendly_id-4.0.0/lib/friendly_id/configuration.rb:60:in `include'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/friendly_id-4.0.0/lib/friendly_id/configuration.rb:60:in `block in use'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/friendly_id-4.0.0/lib/friendly_id/configuration.rb:58:in `map'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/friendly_id-4.0.0/lib/friendly_id/configuration.rb:58:in `use'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/friendly_id-4.0.0/lib/friendly_id/base.rb:165:in `friendly_id'
        from D:/work/tibco-docs/app/models/product.rb:6:in `<class:Product>'
        from D:/work/tibco-docs/app/models/product.rb:3:in `<top (required)>'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `require'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `block in require'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:227:in `load_dependency'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `require'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:346:in `require_or_load'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:491:in `load_missing_constant'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:183:in `block in const_missing'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:181:in `each'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:181:in `const_missing'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/inflector/methods.rb:124:in `block in constantize'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/inflector/methods.rb:123:in `each'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/inflector/methods.rb:123:in `constantize'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/core_ext/string/inflections.rb:43:in `constantize'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activemodel-3.0.0/lib/active_model/observing.rb:160:in `block in observe'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activemodel-3.0.0/lib/active_model/observing.rb:160:in `collect!'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activemodel-3.0.0/lib/active_model/observing.rb:160:in `observe'
        from D:/work/tibco-docs/app/models/auditor_observer.rb:2:in `<class:AuditorObserver>'
        from D:/work/tibco-docs/app/models/auditor_observer.rb:1:in `<top (required)>'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `require'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `block in require'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:227:in `load_dependency'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `require'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:346:in `require_or_load'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:300:in `depend_on'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:216:in `require_dependency'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.0/lib/rails/engine.rb:138:in `block (2 levels) in eager_load!'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.0/lib/rails/engine.rb:137:in `each'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.0/lib/rails/engine.rb:137:in `block in eager_load!'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.0/lib/rails/engine.rb:135:in `each'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.0/lib/rails/engine.rb:135:in `eager_load!'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.0/lib/rails/application.rb:108:in `eager_load!'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.0/lib/rails/application/finisher.rb:41:in `block in <module:Finisher>'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.0/lib/rails/initializable.rb:25:in `instance_exec'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.0/lib/rails/initializable.rb:25:in `run'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.0/lib/rails/initializable.rb:50:in `block in run_initializers'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.0/lib/rails/initializable.rb:49:in `each'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.0/lib/rails/initializable.rb:49:in `run_initializers'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.0/lib/rails/application.rb:134:in `initialize!'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.0/lib/rails/application.rb:77:in `method_missing'
        from D:/work/tibco-docs/config/environment.rb:8:in `<top (required)>'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `require'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `block in require'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:225:in `block in load_dependency'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:591:in `new_constants_in'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:225:in `load_dependency'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `require'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.0/lib/rails/application.rb:103:in `require_environment!'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.0/lib/rails/commands.rb:16:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

我的本地环境是

```
localdev:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: tibcodocs_development
  pool: 5
  username: root
  password: root
  host: localhost 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:09:28.490

您应该在正确的环境中启动您的 rails 应用程序。

```
RAILS_ENV=localdev bundle exec rails g model language name:string -e localdev 
```

（如果 localdev 不是您的开发模式，或者类似的东西）

目前它看起来像生产设置，因为您的应用程序尝试联系亚马逊云或类似的东西（jivestaging.cxrwdp0ae112.us-east-1.rds.amazons.com）。

视窗版本：

```
set RAILS_ENV=localdev
bundle exec rails g model language name:string 
```

# php - 在 PHP + Mysql 中登录后不显示用户名

> ID：15969525
> 
> 赞同：0
> 
> 时间：2013-04-12T10:55:48.117
> 
> 标签：php, html, sql

我想在他登录后显示登录用户名的用户名，下面是我的代码我不知道为什么它不起作用......我已经发布了所有 3 个文件：

第一个文件。（身份验证将在哪里处理）

授权文件

```
<?php
    //Start session
    session_start();
    //Check whether the session variable SESS_MEMBER_ID is present or not

    if(!isset($_SESSION['SESS_MEMBER_ID']) || (trim($_SESSION['SESS_MEMBER_ID']) == '')) {
        header("location: ../index.php");

        exit();
    }
?> 
```

第二（login_exec.php - 登录逻辑工作的地方）

```
<?php
    //Start session
    session_start();

    //Include database connection details
    require_once('connection.php');

    //Array to store validation errors
    $errmsg_arr = array();

    //Validation error flag
    $errflag = false;

    //Function to sanitize values received from the form. Prevents SQL injection
    function clean($str) {
        $str = @trim($str);
        if(get_magic_quotes_gpc()) {
            $str = stripslashes($str);
        }
        return mysql_real_escape_string($str);
    }
    //Sanitize the POST values
    $username = clean($_POST['username']);
    $password = clean($_POST['password']);

    //Input Validations
    if($username == '') {
        $errmsg_arr[] = 'Username missing';
        $errflag = true;
    }
    if($password == '') {
        $errmsg_arr[] = 'Password missing';
        $errflag = true;
    }

    //If there are input validations, redirect back to the login form
    if($errflag) {
        $_SESSION['ERRMSG_ARR'] = $errmsg_arr;
        session_write_close();
        header("location: ../index.php");
        exit();
    }

    //Create query
    $qry="SELECT * FROM member WHERE username='$username' AND password='$password'";
    $result=mysql_query($qry);

    //Check whether the query was successful or not
    if($result) {
        if(mysql_num_rows($result) > 0) {
            //Login Successful
            session_regenerate_id();
            $member = mysql_fetch_assoc($result);
            // $_SESSION['mem_id'] = $id;
            $_SESSION['SESS_MEMBER_ID'] = $member['mem_id'];
            $_SESSION['SESS_FIRST_NAME'] = $member['username'];
            $_SESSION['SESS_LAST_NAME'] = $member['password'];
            $role = $member['role'];  

            switch ($role) {
                case 'user':
                    $redirect = '../t1.php';
                    break;
                case 'administrator':
                    $redirect = '../t2.php';
                    break;
            }
            // session_write_close();
            header('Location: ' . $redirect); 
            exit();
        }else {
            //Login failed
            $errmsg_arr[] = 'user name and password not found';
            $errflag = true;
            if($errflag) {
                $_SESSION['ERRMSG_ARR'] = $errmsg_arr;
                session_write_close();
                header("location: ../index.php");
                exit();
            }
        }
    }else {
        die("Query failed");
    }
?> 
```

第三个代码文件（t2.php）：用户登录后将去哪里：

```
<?php
    require_once('connect/auth.php');
    $_SESSION['mem_id'] = $id;
    mysql_query("SELECT username FROM member WHERE id=".$_SESSION['mem_id']);

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <title>TAILSHIFT MEDIA PORTAL</title>
  <style type="text/css">
    <!--
    .style1 {
    font-size: 36px;
    font-weight: bold;
    }
    -->
  </style>
</head>

<body>
  <div align="right"><a href="index.php"><img src="images/logout.png" /></a></div>
  <p align="center" class="style1">Welcome <u><?php echo $row['username'];  ?></u></p>
  <br /><br /><br />
  <div align=center>
    <h1>Rest Contents goes here...</h1>
  </div>
</body>
</html> 
```

现在我需要在用户登录后访问第三页时显示用户名。

我应该做些什么改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:58:02.237

编辑：我假设这在被调用`$row['username']`之前以某种方式包含用户名`echo`

你需要替换这个：

```
<?php $row['username'];  ?> 
```

有了这个：

```
<?php echo $row['username'];  ?> 
```

为了输出变量的值，需要调用 echo 函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:24:17.480

我使用以下方法自己解决了这个问题：

从之前在第 2 页创建的 $_SESSION 中，我刚刚回显了数组中存储用户名的位置。

处理登录的页面，在成功登录时设置以下内容：

```
 $_SESSION['SESS_FIRST_NAME'] = $member['username']; 
```

“欢迎用户”页面然后通过以下方式显示用户名：

```
<?php echo $_SESSION['SESS_FIRST_NAME']; ?> 
```

# wordpress - Forbidden 您无权访问此服务器上的 /wp-login.php

> ID：15969527
> 
> 赞同：18
> 
> 时间：2013-04-12T10:55:57.347
> 
> 标签：wordpress, permissions

我的所有 WordPress 网站都有一个问题。我可以全部访问并在帖子、页面和其他内容中导航。但是当我去`wp-login.php`查看表格并输入用户名和密码时。

当我点击访问时：

> 禁止的
> 
> 您无权访问此服务器上的 /blog/wp-login.php。

`755`我在文件夹和文件中有权限，`644`如果可以的话，我会检查所有内容，有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-15T00:33:28.780

解决方案是将其添加到 .htaccess 的开头

```
<Files wp-login.php>
Order Deny,Allow
Deny from all
Allow from all
</Files> 
```

这是因为许多主机受到攻击，使用他们客户的 wordpress。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-07T10:20:18.470

确保以下行不在您的 wp.config 中

```
define( 'FORCE_SSL_LOGIN', true );
define( 'FORCE_SSL_ADMIN', true );
define( 'DISALLOW_FILE_EDIT', true ); 
```

停用 iThemes 安全插件后我被锁定了

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-15T07:35:10.033

我遇到了同样的问题，在暂时删除所有 .htaccess 文件后，尝试按照建议修改它们，并确保我的所有文件和文件夹权限都设置为`777`，我仍然无法让它工作。我不知道为什么我无法访问该文件，但我能够创建一个新文件并访问它没有问题。所以我所做的是在`/wp-admin/`调用中创建一个新文件`temp.php`并将所有代码粘贴`install.php`到其中。这使我可以访问该文件。我唯一需要做的另一件事是编辑代码，以便将表单提交到 temp.php 而不是 install.php。之后，我可以完成安装并且一切正常。

`<form id="setup" method="post" action="temp.php?step=2">`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-11T09:49:02.340

我有一个类似的错误，通过添加：

```
Options FollowSymLinks 
```

...在`apps/[app-name]/conf/httpd-app.conf`文件中。这是因为，在我的例子中，一个`.htaccess`文件想要使用重写规则，而在 FollowSymLinks 和 SymLinksIfOwnerMatch 关闭时是不允许的。

如果您的 conf 文件已经有一行`Options ...`，您可以添加`FollowSymLinks`到选项列表中。你可能会得到这样的结果：

```
Options Indexes MultiViews FollowSymLinks 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-09T13:22:54.330

有时，如果您使用一些简单的登录信息，例如：用户名：'admin' 并通过：'admin'，主机会将您视为通过 WP 登录文件进行的潜在暴力攻击，并阻止您的 IP 地址或该特定文件。

**我遇到了 ixwebhosting 的问题，刚刚从他们的支持人员那里得到了这些信息。**在这种情况下，他们必须解禁您的 IP。而且您必须将您的 WP 管理员登录信息更改为更安全的信息。

这解决了我的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-03T11:22:02.133

如果您使用的是 iThemes Security 插件（以前的 Better WP security），请参考 Mikeys4u 提供的答案。

此外，在 WordPress 支持上有一个与此插件相关的类似线程：[https ://wordpress.org/support/topic/how-to-reset-ithemes-security-plugin-to-fix-issues](https://wordpress.org/support/topic/how-to-reset-ithemes-security-plugin-to-fix-issues)

确保在尝试任何解决方案之前备份数据库。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-12T10:58:31.177

这应该工作：

说明说您将包含上述行的单独 .htaccess 添加到 wp-admin 文件夹 - 并将主 .htaccess 单独保留在根目录中。

如果这没有帮助，你可以试试这个：

从 wp-admin 复制 .​​htaccess 文件并将其放在根文件夹和宾果游戏中！它应该工作！如果您在此之后遇到新错误，请告诉我们。

作为参考，您也可以在这里查看：

[http://wordpress.org/support/topic/you-dont-have-permission-to-access-blogwp-loginphp-on-this-server](http://wordpress.org/support/topic/you-dont-have-permission-to-access-blogwp-loginphp-on-this-server)

使用这个检查：

```
<IfModule mod_security.c>
SecFilterEngine Off
SecFilterScanPOST Off
</IfModule> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-09T13:36:29.703

通过以下代码更改 .htaccess 文件代码：

```
# BEGIN WordPress
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]

# uploaded files
RewriteRule ^([_0-9a-zA-Z-]+/)?files/(.+) wp-includes/ms-files.php?file=$2 [L]

# add a trailing slash to /wp-admin
RewriteRule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin/ [R=301,L]

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule ^[_0-9a-zA-Z-]+/(wp-(content|admin|includes).*) $1 [L]
RewriteRule ^[_0-9a-zA-Z-]+/(.*\.php)$ $1 [L]
RewriteRule . index.php [L]
# END WordPress 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-09-11T18:50:54.887

确保您的 apache .conf 文件正确——然后仔细检查您的 .htaccess 文件。在这种情况下，我的 .htaccess 不正确！我删除了一些不再需要的奇怪东西并且它起作用了。多田。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-03T21:53:07.607

我最近遇到了这个错误，我使用了@SirPaul 提出的解决方案。但该错误存在于 WordPress 的其他配置页面上，例如`update-core.php`.

我找到**的解决所有权限问题**的解决方案是停用`iThemes Security plugin`并更新它并重新激活它。

# sqlite - web2py-sqlite3->“_lazy_tables”错误

> ID：15969529
> 
> 赞同：0
> 
> 时间：2013-04-12T10:55:57.993
> 
> 标签：sqlite, web2py

我尝试在 def 中制作这个数据库

```
database = DAL('sqlite://userhistory3.db')
database.define_table('userjob', Field('UserID'),Field('JobID'))
session.database=database 
```

但是当我尝试在另一个 def 中插入一个值时

```
sd=session.database     
sd.userjob.insert(UserID=auth.user_id,JobID=job_Id)
database.commit() 
```

我收到错误“DAL”对象没有属性“_lazy_tables”。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:53:43.360

当您`DAL`从会话中检索（数据库连接）对象时，它只有在您首先使用相同的连接字符串重新连接时才会起作用——如下所示：

```
database = DAL('sqlite://userhistory3.db')
sd=session.database 
```

但是检索到的连接不会有任何表定义，因此它对您的目的没有用处。

通常，您不需要将`DAL`对象存储在会话中。只需将`DAL`创建和表定义放在模型文件中，它就可用于所有请求——无需继续保存和从会话中检索。

此外，没有理由`db.commit()`在应用程序代码中调用——提交是在请求结束时自动完成的。

# ruby-on-rails - 在 OSX 上 Rails 启动失败

> ID：15969533
> 
> 赞同：0
> 
> 时间：2013-04-12T10:56:05.127
> 
> 标签：ruby-on-rails, ruby, macos

我正在使用 ruby​​ 2.0.0，rails 3.2.13。当我尝试运行 rails 应用程序时：这是我运行时收到的消息`rails server RAILS_ENV=production`

```
/Users/myhome/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/gems/2.0.0/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `require': cannot load such file -- rb-fsevent (LoadError)
    from /Users/myhome/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/gems/2.0.0/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `block (2 levels) in require'
    from /Users/myhome/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/gems/2.0.0/gems/bundler-1.3.4/lib/bundler/runtime.rb:70:in `each'
    from /Users/myhome/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/gems/2.0.0/gems/bundler-1.3.4/lib/bundler/runtime.rb:70:in `block in require'
    from /Users/myhome/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/gems/2.0.0/gems/bundler-1.3.4/lib/bundler/runtime.rb:59:in `each'
    from /Users/myhome/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/gems/2.0.0/gems/bundler-1.3.4/lib/bundler/runtime.rb:59:in `require'
    from /Users/myhome/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/gems/2.0.0/gems/bundler-1.3.4/lib/bundler.rb:132:in `require'
    from /Users/git/gitlab/config/application.rb:9:in `<top (required)>'
    from /Users/git/gitlab/vendor/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/commands.rb:53:in `require'
    from /Users/git/gitlab/vendor/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/commands.rb:53:in `block in <top (required)>'
    from /Users/git/gitlab/vendor/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/commands.rb:50:in `tap'
    from /Users/git/gitlab/vendor/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T11:25:00.110

在您的开发组中移动您的 gem 'rb-fsevent' 并`bundle install`

```
group :development, :test do
     gem 'rb-fsevent'
end 
```

# android - Android Dropbox Sync SDK 身份验证视图未关闭

> ID：15969537
> 
> 赞同：1
> 
> 时间：2013-04-12T10:56:09.257
> 
> 标签：android, android-webview, dropbox, dropbox-api

在 Dropbox Sync SDK 中测试用户身份验证时，我注意到了这个奇怪的问题。主要问题是，在成功进行身份验证（在 webview 中输入用户名和密码，并允许应用程序访问某个文件夹）后，身份验证似乎被解除（应该如此），但令我惊讶的是，事实并非如此。点击后退按钮后，我被带回身份验证对话框，而不是退出我的应用程序，就好像我的视图是从身份验证对话框推送的，而不是在身份验证后真正关闭对话框（webview）。

我尝试在清单中修改 Dropbox 活动中的值，但没有成功：

```
<activity
    android:name="com.dropbox.client2.android.AuthActivity"
    android:launchMode="singleTask" >
    <intent-filter>
        <data android:scheme="db-xxxxxx" />
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.BROWSABLE"/>
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T20:22:13.507

您仍然在屏幕上看到的不是 AuthActivity，而是由 AuthActivity 启动的浏览器。它通过重定向返回到应用程序，这实际上并没有关闭浏览器。如果安装了官方 Dropbox 应用，您将不会看到此行为，因为它将被用于授权流程而不是浏览器。

# android - Android - 恢复活动（销毁时）

> ID：15969538
> 
> 赞同：0
> 
> 时间：2013-04-12T10:56:11.260
> 
> 标签：android, android-activity, lifecycle, ondestroy

我说过`ActivityA`，当我按下后退按钮时，我打电话`moveTaskToBack(true)`是为了把它放在后台（`onPause()`被调用）。当我去手机里做其他事情时，系统最终会破坏我的`ActivityA`，`onCreate()`当我回到我的`ActivityA`. 发生这种情况时，如何恢复活动而不是创建它？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:01:26.537

我不得不承认并不完全了解 moveTaskToBack();，但在我看来，这听起来不像你可以使用它来影响 Activity 生命周期。

这听起来更像是简单地影响您留下的“面包屑”，这会影响您的后退按钮的工作方式。你只是把你的 Activity 放在这个堆栈的后面，所以我认为它不会首先用后退按钮返回。

其次，你的Activity在离开时不会进入onPause，而是onStop。onPause 用于例如在您的活动上打开一个对话框时。

您无法阻止系统在需要时销毁您的 Activity，也无法阻止它在发生这种情况后调用 onCreate。您可以使用 Bundle savedinstancestate 来保存数据，因此您不必从数据库、互联网、文件目录或其他任何地方重新获取这些数据。

# image - HTML 电子邮件 - 带有标签的图像在点击时会反转颜色 - Outlook

> ID：15969542
> 
> 赞同：1
> 
> 时间：2013-04-12T10:56:17.170
> 
> 标签：image, outlook, click, anchor, html-email

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T14:10:14.803

奇怪，以前没见过这个。不过，您可能希望避免使用 rowspan 和 colspan，因为许多电子邮件客户端在使用这些方面存在困难。

当你只插入一个没有图像的锚时，你会得到什么行为？您是否从纯文本链接中获得相同的行为？

过去，我在不同的客户端中使用 png 文件时遇到了一些问题。你用的是什么格式？

# jquery - 在 javascript 中嵌入 ruby

> ID：15969543
> 
> 赞同：3
> 
> 时间：2013-04-12T10:56:19.697
> 
> 标签：jquery, ruby-on-rails, ruby, ujs

我是 RoR 世界的新手。

虽然我已经使用 rails 脚手架生成了一些代码。我还可以使用 :remote => true 通过 ajax 发布表单。

表格被张贴，干净整洁！但我希望使用 link_to 渲染从我的控制器返回的一些数据，以便它创建到路由/资源的链接。

我尝试创建一个 .js.erb 文件并将代码嵌入其中，但它给了我一个错误提示：

```
undefined method `link_to' 
```

.js.erb 中的代码

```
$(document).ready(function(){

$("#new_post").bind('ajax:success', function(xhr, data, status){ 
    console.log(data)
    if(data.errors){
        console.log("Error!")
    }
    else{
        var user_name = data.user; // json is contained in data variable        
        $("#recent_posts").prepend("<%= j link_to(user_name, '#') %>");
    }
});

}); 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:59:34.343

我认为这里有几个错误来源：

```
undefined method `link_to' 
```

这是非常不寻常的，因为`link_to`它是一个标准的视图助手。你确定之前的空间`link_to`真的是一个空间，而不是某种其他不可见的字符（你有时会在 OSX 上得到那些，例如当你`space`按住时使用`alt`）。此外，你的 js erb 必须在你的控制器视图命名空间中，但由于它在你渲染动作时被执行，这似乎是这种情况。

```
$(document).ready(function(){ 
```

您不需要在`.js.erb`模板中使用它，因为没有触发 ready 事件。如果 DOM 无论如何都准备好了，jQuery 会立即执行脚本，所以它不会（通常）受到伤害，只是没有必要。

```
$("#new_post").bind('ajax:success', function(xhr, data, status){ 
```

这是一个更大的问题。您现在附加处理程序的方式，每次提交表单并且服务器返回数据时都会附加它。因此，如果出现错误，并且表单被提交并再次返回，您将`console`执行两次消息或锚点插入。所以最好为这种事件做好准备：

```
$("#new_post").not('.registered').addClass('registered').bind('ajax:success', function(xhr, data, status){ 
```

这将防止多个事件处理程序。

然后是第三个问题：

```
var user_name = data.user; // json is contained in data variable        
$("#recent_posts").prepend("<%= j link_to(user_name, '#') %>"); 
```

在这里，您尝试在内`erb`联 ruby​​ 中使用您在 javascript 中分配的变量。这不起作用，因为 ruby​​ 变量`user_name`是在渲染模板时在服务器端评估的。另一方面，当客户端从服务器接收到呈现的模板时，会在浏览器中评估 javascript 变量分配。所以，你可以做什么？

`link_to`并不是那么神奇。它只是呈现一个锚标记。所以，同样可以这样写：

```
var user_name = data.user; // json is contained in data variable        
$("#recent_posts").prepend(["<a href='#'>", user_name, "</a>"].join('')); 
```

到现在为止还挺好。您遇到的最大问题是：服务器不能同时返回渲染的`.js.erb`模板*和* `json`数据。因此，您在 javascript 函数中获得的数据将只是呈现的`.js.erb`模板字符串。与服务器通信`JSON`确实是最好的事情，所以让我们忘记rails集成表单处理并自己编写它：

1.  `:remote => true`从表单选项中删除

2.  添加`:format => :json`到您的`create`路线

    ```
    resources :posts, :only => [:create], :format => :json
    resources :posts, :except => [:create] 
    ```

3.  在您的资产中添加 javascript 以远程处理您的表单

    ```
    // after DOM ready

    var form = $('#new_post');
    form.on('submit', function(e) {

      $.ajax({
        url: form.prop('action'),
        type: form.prop('method') || 'POST' //for create action,
        data: form.serializeArray(),
        dataType: form.data('type') || 'json',
        success: function(data, status, xhr) {
              var user_name = data.user; // json is contained in data variable        
              $("#recent_posts").prepend(["<a href='#'>", user_name, "</a>"].join(''));
        },
        error: function(xhr, status, error) {
          console.log('error')
        }
      });

      return false; //prevent normal submit

    }); 
    ```

4.  现在你已经准备好`JSON`从服务器返回 pure：

    ```
    render :json => resource.to_json(:include => :errors) 
    ```

# sql - “ORA-01489：字符串连接的结果太长”（字符串太小）

> ID：15969546
> 
> 赞同：1
> 
> 时间：2013-04-12T10:56:27.097
> 
> 标签：sql, oracle

我正在尝试按如下方式使用 listagg 函数，但得到 ORA-01489: result of string concatenation is too long。

```
SELECT LOCATIONID, LISTAGG(TO_CHAR(XPOSITION||','||YPOSITION), ',') WITHIN GROUP (ORDER BY SEQUENCENUMBER) ords
FROM POSITIONPOINTS 
GROUP BY LOCATIONID
HAVING COUNT(SEQUENCENUMBER) = 20; 
```

当我尝试在 Oracle Sql Developer 中运行它时，它会显示前 1550 行，然后报告 ORA-01489 错误。总共应返回 2612 行，所有 ords 值的长度约为 440 个字符。Sql Developer 返回的行之一的示例是：

22372682 410434.801,551142.885,410434.784,551142.875,410439.801,551141.922,410439.991,551141.795,410439.293,551138.303,410438.531,551137.668,410429.768,551134.302,410427.228,551133.159,410426.212,551132.143,410425.196,551129.667,410421.957,551114.3,410414.972,551081.28,410413.639 ,551076.136,410412.94,551073.66,410412.94,551072.326,410413.639,551071.628,410415.798,551070.612,410416.369,551069.469,410416.877,551068.834,410433.23,551061.795

PositionPoints 表中有一些 LocationIDs 有超过 20 个条目（最多 254 个），对于这些行，我希望连接的字符串超过 4000 个字符的最大值。但是，如果 count(sequencenumber) = 20，则连接的字符串长度将小于 500。即使对于我使用 HAVING 子句排除的位置，Oracle 是否也在执行连接，并报告这些错误？

我尝试从 Oracle Sql Developer 和 SQL Plus 运行查询。

如果有人能对这个问题有所了解，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:05:03.217

您需要首先减少要聚合的行数（如您所料），然后将 listagg() 应用于减少的数字。

像这样的东西：

```
select locationid, 
       listagg(to_char(xposition||','||yposition), ',') within group (order by sequencenumber) ords
from (
  select locationid, 
         xposition, 
         yposition, 
         sequencenumber,
         count(sequencenumber) over (partition by locationid) as cnt
  from positionpoints 
) t
where cnt = 20
group by locationid; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:59:48.673

> Oracle 是否甚至对我使用 HAVING 子句排除的位置执行连接，并报告这些错误？

是的。

# sublimetext2 - 如何使用 Sublime Text2 完成 vim 之类的单词？

> ID：15969555
> 
> 赞同：0
> 
> 时间：2013-04-12T10:57:02.820
> 
> 标签：sublimetext2

Sublime Text2 在当前目录中是否有一个完整单词的插件？

我想念 vim 的关键字补全（Ctrl + N）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:59:10.337

您如何描述“ctrl + n”和其他人如何向我描述它是不一样的，所以我有点困惑（尽管这可能是因为 vi(m) 中的设置不同。他们要求关键字匹配（vi 中的 ctrl + p 和 ctrl + n）。你可能想看看。

[Sublime 编辑器：如何通过 vi 之类的快捷方式（CTRL+p、CTRL+n）精确地完成上一个/下一个匹配？](https://stackoverflow.com/questions/15260843/sublime-editor-how-to-complete-with-exactly-previous-next-match-via-shortcuts-l/15279304#15279304)

我扩展了我的要点以继续前进，尽管正如我在那里所说的那样，它只插入了第一场比赛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:45:26.390

您可以使用 AutoFileName 插件自动完成文件名：

[https://github.com/BoundInCode/AutoFileName](https://github.com/BoundInCode/AutoFileName)

# c++ - SHFileOperation 使用字符串复制文件夹

> ID：15969557
> 
> 赞同：3
> 
> 时间：2013-04-12T10:57:06.690
> 
> 标签：c++, string, stdstring, shfileoperation

我正在尝试按`SHFileOperationA`功能复制文件夹。这是我的代码。

```
int main()  {

    SHFILEOPSTRUCTA sf;
    int result;

    string source = "D:\\check\\folder4";
    string dest = "D:\\Documents\\test\\folder4";

    sf.pFrom = source.c_str( );
    sf.pTo = dest.c_str( );
    sf.wFunc = FO_COPY;
    sf.fFlags = FOF_NOCONFIRMATION | FOF_NOCONFIRMMKDIR | FOF_SILENT;

    result = SHFileOperationA(&sf);

    return 0;
} 
```

我无法理解如何使字符串附加`\0`两次。我尝试过这样的事情。

```
 string source = "D:\\check\\folder4\\0\\0";
    string dest = "D:\\Documents\\test\\folder4\\0\\0"; 
```

但是，它不起作用。我还尝试了更多组合，但没有一个有效。请任何人都可以建议我如何解决这个问题？

我可以通过直接分配这样的路径来解决问题：-

```
 sf.pFrom = "D:\\check\\folder4";
    sf.pTo = "D:\\Documents\\test\\folder4"; 
```

问题得到解决，但我的意图是使用字符串。请任何人都可以帮我解决这个问题。

另外，如果可能的话，任何人都可以告诉我为什么直接分配字符串常量，即`sf.pFrom = "D:\\check\\folder4";`有效，而使用类似字符串的分配`sf.pFrom = source.c_str( );`无效？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:37:25.013

dos （或类似的）查找常量 char 数组的末尾`std::string`并`strlen`仅分配所需数量的字符。所以它在第一个 null 处停止并且不复制另一个。如果要覆盖它，则需要使用带大小的构造函数，例如：

```
string source("D:\\check\\folder4\\0", 18); 
```

请注意，与任何其他字符串一样，会自动添加第二个空字符。

或明确添加空字符（更好的解决方案）：

```
std::string source = std::string("D:\\check\\folder4") + std::string(1, '\0'); 
```

或者

```
std::string source = "D:\\check\\folder4";
source.append(1, '\0'); 
```

至于另一个问题，为什么使用常量字符数组有效：

我相信，如果它有效，那么常量字符数组之后内存中的字节/字符为空只是一种运气。

您可以自己测试（在调试器中或通过打印值）：

```
// this is the compiler generated null
(*(sf.pFrom + strlen(sf.pFrom))) == '\0'

// this is the following byte/character that should be luckily null
(*(sf.pFrom + strlen(sf.pFrom) + 1)) == '\0' 
```

如果您在调试器中发现以下字符不为空，请确保您完成调试，直到`SHFileOperationA`. 在那种特殊情况下，它可能会失败/崩溃/无论如何（虽然它通常不会），因为您单独调试的事实可能会使内存映像不同。

此外，您还没有具体说明“它有效”的确切含义。你的意思是`SHFileOperationA`（它是什么）的结果。或者应用程序崩溃/抛出，当它不起作用时。或者文件是否被复制。这可能有助于回答你。

# php - MySQL 加入不知所措

> ID：15969560
> 
> 赞同：0
> 
> 时间：2013-04-12T10:57:10.647
> 
> 标签：php, mysql, sql, codeigniter, codeigniter-2

请帮助任何人！

**例如**，我希望user_id 27 返回 case_id 1 和 2，因为同一公司的另一个 user_id 创建了这些案例。

用户 ID 27 就是一个例子，因为表非常大，所以我需要一个通用的 SQL 语句。

CodeIgniter Active Query 会很有帮助，但可能太复杂了？

```
Cases
case_id | case_user | case_name
1, 25, Test Case A
2, 25, Test Case B
3, 26, Test Case C

Users
user_id | user_email | user_company
25, example-email-a, Company Alpha
26, example-email-b, Company Beta
27, example-email-c, Company Alpha 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:02:02.797

尝试这个：

```
SELECT * FROM Cases 
WHERE case_user IN 
(SELECT user_id FROM Users WHERE user_company=(
   SELECT user_company FROM Users WHERE user_id=27) 
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:11:06.820

这是您作为示例输出显示的数据。

```
 SELECT S1.USER_ID, C.CASE_ID
 FROM USERS S1
 JOIN USERS S2
 ON S1.USER_ID <> S2.USER_ID
 AND S1.USER_COMPANY = S2.USER_COMPANY
 JOIN CASES C
 ON S2.USER_ID = C.CASE_USER 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:59:58.077

尝试这个。对于 user_id 27，它不是返回 case_id 1 和 2，而是对于 user_id 25，它返回 case_id 1 和 2

```
SELECT * FROM `Users`
LEFT JOIN `Cases` ON `Users`.`user_id`=`Cases`.`case_user` 
WHERE `Users`.`user_id`=25 
```

# java - 抽象类中数据成员的使用是什么

> ID：15969568
> 
> 赞同：-4
> 
> 时间：2013-04-12T10:57:29.500
> 
> 标签：java

Java 中的抽象类是不能实例化的类，这意味着我们不能创建抽象类的新实例。抽象类的目的是作为子类的基础。但是为什么java允许在*抽象类*中定义数据成员，而我们不能创建抽象类的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:59:50.267

但是您可以拥有可以创建实例的具体类。假设你有一个抽象类`Animal`——比如说，每个动物都有一个`Color`——所以你把它作为基类的成员，虽然你不能创建一个简单的`Animal`（你可以创建一个`Dog`或一个`Cat`想法，但两者都有颜色）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:05:33.417

抽象类可以由其他具体类扩展。这些具体类可以使用这个数据成员。

抽象类不过是无法实例化的类，但它们可能具有所有具体类都应包含的一些公共逻辑和公共成员变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-16T14:48:29.427

我们有抽象类称为形状（形状：正方形，圆形，矩形）这里正方形，圆形和矩形是扩展抽象类形状的子类。假设我们正在计算不同形状的面积，其中面积（字段/变量）对所有子类都是通用的。所以，它可以在抽象类中声明，而不是在每个子类中声明。

# asp.net-mvc - @Scripts.Render 不工作

> ID：15969572
> 
> 赞同：9
> 
> 时间：2013-04-12T10:57:37.460
> 
> 标签：asp.net-mvc, bundling-and-minification

我在 BundleConfig 中注册了 bundle，如下所示： `bundles.Add(new ScriptBundle("~/bundles/jqueryupload").Include( "~/Scripts/jquery.upload-1.0.2.min.js"));`

并希望像这样在视图上呈现它： `@Scripts.Render("~/bundles/jqueryupload")`

但我的 sript 不包含在页面中。有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-12T11:00:52.680

不要在你的包中包含缩小版本：

```
ScriptBundle("~/bundles/jqueryupload").Include("~/Scripts/jquery.upload-1.0.2.js")) 
```

捆绑包的全部意义在于它们将负责缩小和组合您的静态资源。`.min.js`你不应该在你的包中注册 a 。

# javascript - 首字母大写

> ID：15969576
> 
> 赞同：-4
> 
> 时间：2013-04-12T10:57:58.740
> 
> 标签：javascript

在 ASP.NET 中使用 JavaScript，我需要将小写字母转换为大写字母。

如何用 JavaScript 中的正确答案解决这个问题？

```
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head id="Head1" runat="server">
<title></title>

<script language="JAVASCRIPT">
     function capitalizeMe(obj) {
         val = obj.value;
            newVal = '';
         val = val.split(' ');
         for (var c = 0; c < val.length; c++) {
             newVal += val[c].substring(0, 1).toUpperCase() +
             val[c].substring(1, val[c].length) + ' ';
         }   
     }
</script>

</head>
<body>
     <form id="Form2" runat="server">
        <asp:TextBox ID="TextBox1" runat="server" onblur="capitalizeMe(this)">
        </asp:TextBox>
        <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
     </form> 
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:01:32.833

为什么不使用 css 代替？

```
.capitalized{
    text-transform: capitalize
} 
```

将类添加到您的元素并让 css 处理其余部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:59:58.560

```
 <script language="JAVASCRIPT">
 function capitalizeMe(obj) {
    val = obj.value;
        newVal = '';
     val = val.split(' ');
     for (var c = 0; c < val.length; c++) {
    newVal += val[c].substring(0, 1).toUpperCase() +
 val[c].substring(1, val[c].length) + ' ';
  }
    obj.value = newVal;
   }
    </script> 
```

# java - 实时解析和存储数据

> ID：15969577
> 
> 赞同：0
> 
> 时间：2013-04-12T10:57:59.947
> 
> 标签：java, android, parsing, background-process

我已经构建了一个带宽监视器应用程序，它使用以下内容成功地将数据上传到 parse.com：

```
 testObject.put("dataOutput", String.valueOf(mStartTX)); 
```

但是，数据始终存储为零。原因是我发送的长/字符串的初始值为零（当应用程序首次启动时），但是随着用户开始发送和接收数据，它会不断变化。可以以某种方式实时解析这些数据吗？或者随着数据的变化每隔几秒重新发送一次？

完整来源：

```
public class ParseStarterProjectActivity extends Activity {
TextView textSsid, textSpeed, textRssi;

public Handler mHandler = new Handler();
public long mStartRX = 0;
public long mStartTX = 0;

/** Called when the activity is first created. */
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.parser);
textSsid = (TextView) findViewById(R.id.Ssid);
textSpeed = (TextView) findViewById(R.id.Speed);
textRssi = (TextView) findViewById(R.id.Rssi);
Long.toString(mStartTX);
ParseAnalytics.trackAppOpened(getIntent());
ParseObject testObject = new ParseObject("TestObject");
testObject.put("dataOutput", String.valueOf(mStartTX));
testObject.saveInBackground();

mStartRX = TrafficStats.getTotalRxBytes();
mStartTX = TrafficStats.getTotalTxBytes();
if (mStartRX == TrafficStats.UNSUPPORTED || mStartTX == TrafficStats.UNSUPPORTED)     AlertDialog.Builder alert = new AlertDialog.Builder(this);
alert.setTitle("Uh Oh!");
alert.setMessage("Your device does not support traffic stat monitoring.");
alert.show();
} else {
mHandler.postDelayed(mRunnable, 1000);
}
}
private final Runnable mRunnable = new Runnable() {
public void run() {
TextView RX = (TextView)findViewById(R.id.RX);
TextView TX = (TextView)findViewById(R.id.TX);
long rxBytes = TrafficStats.getTotalRxBytes()- mStartRX;
RX.setText(Long.toString(rxBytes));
long txBytes = TrafficStats.getTotalTxBytes()- mStartTX;
TX.setText(Long.toString(txBytes));
mHandler.postDelayed(mRunnable, 1000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:04:04.333

您将要创建一个在您的应用程序运行时（或者甚至在它关闭时）运行的 IntentService。使用 AlarmService 收集您的数据，以便它在设置的迭代中唤醒以收集数据。AlarmService 设计为电池友好型。

```
private final Runnable mRunnable = new Runnable() { // ... } 
```

Runnable 在 Java 中是一个好主意。在Android中没有那么多。如果您只需要离开 UI 线程，请考虑使用 AsyncTask() 或类似的方法——但是，如上所述，后台服务可能是更好的选择。我不知道您对 Java 或命名约定的熟悉程度，所以也许这只是一个简单的疏忽，但`mRunnable`应该只是`runnable`在您的代码中。以“m”或“_”（下划线）为前缀的变量是诸如your`mHandler`和.`mStartTX``mStartRX`

此外，独奏线`Long.toString(mStartTX);`什么也不做。

# android - 垂直文本安卓

> ID：15969578
> 
> 赞同：-4
> 
> 时间：2013-04-12T10:58:00.893
> 
> 标签：android, textview, orientation

我知道之前有人问过这个问题，但我在小部件中使用它，所以我无法制作自定义类（例如 VerticalTextView）。

知道如何使用 xml 来实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:03:13.980

真的在小部件中，我认为只有一种方法 - 尝试使用`rotate`. [类似的例子](https://stackoverflow.com/a/7855852/1616443)。希望有帮助。

# backbone.js - 路由器更改的主干视图和子视图

> ID：15969583
> 
> 赞同：0
> 
> 时间：2013-04-12T10:58:12.090
> 
> 标签：backbone.js, views

我对 Backbone.js 没有太多经验，所以如果我在这里完全错过了一些东西，请原谅我的无知。

我有一个应用程序，它有一个链接到路由器对象的侧边栏，当用户单击我发送`navigate`事件的链接之一时。但这本身并没有用。

我拥有的是左侧的静态侧边栏，然后是`.pane`右侧的元素。这`.pane`只是将动态加载的内容的包装器。我已经把它变成了它自己的视图，但是当用户点击侧边栏中的链接时，我需要做的是在其中添加一个子视图。

```
|--------------------------------------- |
| Link | |-----------------------------| |
| Link | |.pane                        | |
| Link | |                             | |
| Link | |                             | |
| Link | |                             | |
| Link | |-----------------------------| |
|--------------------------------------- | 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:56:10.380

我认为您应该在索引状态上加载带有导航栏的视图。然后，每个链接都会更改 url。对于每个 url，设置一个路由器状态，为每个菜单项调用另一个视图。如果您仍然不明白，您应该观看一些骨干教程。您可以在以下网址找到一些： [http ://www.tutsplus.com](http://www.tutsplus.com) [http://www.backbonetutorials.com](http://www.backbonetutorials.com)

希望能帮助到你

# python - Redis 定期在 Twisted 上断开连接并重新连接

> ID：15969588
> 
> 赞同：5
> 
> 时间：2013-04-12T10:58:25.077
> 
> 标签：python, asynchronous, redis, twisted, disconnect

我有与 Redis 持续连接的 Twisted 服务器。我正在使用库[https://github.com/fiorix/txredisapi](https://github.com/fiorix/txredisapi)。

问题是 Twisted 有时会失去与 Redis 的连接并在不久后重新连接。我不知道为什么。在我的本地机器和在线 VPS 上都发生了同样的事情。

日志：

```
2013-04-12 11:25:34+0200 [RedisProtocol,client] <twisted.internet.tcp.Connector instance at 0xf6c45d4c> will retry in 10 seconds
2013-04-12 11:25:34+0200 [RedisProtocol,client] Stopping factory <lib.txredisapi.txredisapi.RedisFactory instance at 0xf6c45ccc>
2013-04-12 11:25:45+0200 [-] Starting factory <lib.txredisapi.txredisapi.RedisFactory instance at 0xf6c45ccc>
2013-04-12 11:30:47+0200 [RedisProtocol,client] <twisted.internet.tcp.Connector instance at 0xf6c45d4c> will retry in 10 seconds
2013-04-12 11:30:47+0200 [RedisProtocol,client] Stopping factory <lib.txredisapi.txredisapi.RedisFactory instance at 0xf6c45ccc>
2013-04-12 11:30:58+0200 [-] Starting factory <lib.txredisapi.txredisapi.RedisFactory instance at 0xf6c45ccc>
2013-04-12 11:35:59+0200 [RedisProtocol,client] <twisted.internet.tcp.Connector instance at 0xf6c45d4c> will retry in 10 seconds
2013-04-12 11:35:59+0200 [RedisProtocol,client] Stopping factory <lib.txredisapi.txredisapi.RedisFactory instance at 0xf6c45ccc>
2013-04-12 11:36:10+0200 [-] Starting factory <lib.txredisapi.txredisapi.RedisFactory instance at 0xf6c45ccc>
2013-04-12 11:41:12+0200 [RedisProtocol,client] <twisted.internet.tcp.Connector instance at 0xf6c45d4c> will retry in 8 seconds
2013-04-12 11:41:12+0200 [RedisProtocol,client] Stopping factory <lib.txredisapi.txredisapi.RedisFactory instance at 0xf6c45ccc>
2013-04-12 11:41:21+0200 [-] Starting factory <lib.txredisapi.txredisapi.RedisFactory instance at 0xf6c45ccc> 
```

它整天整夜都在发生，我的日志很快就变大了。

当 redis 断开时有人连接时记录：

```
2013-04-12 12:29:58+0200 [HTTPPageGetter,client] Unhandled error in Deferred:
2013-04-12 12:29:58+0200 [HTTPPageGetter,client] Unhandled Error
Traceback (most recent call last):
Failure: lib.txredisapi.txredisapi.ConnectionError: Not connected
2013-04-12 12:30:03+0200 [-] Starting factory <lib.txredisapi.txredisapi.RedisFactory instance at 0xf6c45ccc>
2013-04-12 12:30:22+0200 [Protocol,20,89.73.182.51] Connection from 89.73.182.51:38635 closed. Code: 1006, Reason: connection was closed uncleanly (peer dropped the TCP connection without previous WebSocket closing handshake) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T14:29:33.647

好的，我从 txredisapi 的创建者那里得到了答案。在配置中有超时设置，默认设置为 300 秒。很简单。

# java - 对象哈希码的 EasyMock 无效方法不匹配

> ID：15969590
> 
> 赞同：0
> 
> 时间：2013-04-12T10:58:30.757
> 
> 标签：java, junit, mocking, easymock

我已经为 HttpSession 创建了一个模拟对象，如下所示。

```
HttpSession mocks.createMock(HttpSession.class); 
```

现在我正在测试一些方法，方法是

```
public String validateProduct(String productId,Model model,HttpServletRequest request){
    Customer customer=new Customer();
    Product product=customerService.validateProduct(productId, VSCConstants.CLIENT_CODE);
    customer.setProduct(product);
    /*Doing more operation with customer*/
    request.getSession().setAttribute(
            VSCConstants.SESSION_CUSTOMER,customer);
    request.setAttribute("response", "InValidVIN");
    return "forward:/profile";
} 
```

现在我的junit测试代码是

```
expect(customerService.validateProduct(null, VSCConstants.CLIENT_CODE))
            .andReturn(new Product());
expect(request.getSession()).andReturn(session).anyTimes();
    session.setAttribute(VSCConstants.SESSION_CUSTOMER, createdObject);
    expectLastCall().andAnswer(new IAnswer<Customer>() {
          public Customer answer() throws Throwable {
              createdObject= (Customer) EasyMock.getCurrentArguments()[1];
              return null;
          }
    }); 
```

现在的问题是该`session.setAttribute()`方法是 void 方法，所以我使用了 expectLastCall() 但是如果您看到我正在测试的方法是创建一个新客户并将其添加到会话中，所以这里它变得不匹配并且我正在流动异常。

```
Unexpected method call HttpSession.setAttribute("SESSION_CUSTOMER", com.budco.vsc.domain.Customer@feebefcb):
HttpSession.setAttribute("SESSION_CUSTOMER", null): expected: 1, actual: 0
at org.easymock.internal.MockInvocationHandler.invoke(MockInvocationHandler.java:44)
at org.easymock.internal.ObjectMethodsFilter.invoke(ObjectMethodsFilter.java:85)
at $Proxy6.setAttribute(Unknown Source)
at com.budco.vsc.mvc.controller.AdvancedCustomerSearchController.validateProduct(AdvancedCustomerSearchController.java:110)
at com.budco.vsc.mvc.controller.AdvancedCustomerSearchController.getAdvancedSearchResult(AdvancedCustomerSearchController.java:83)
at com.budco.vsc.mvc.controller.AdvancedCustomerSearchControllerTest.testgetAdvancedSearchResultWithValidateProduct(AdvancedCustomerSearchControllerTest.java:148)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
```

显示在......

我希望，我需要使用在测试方法中使用的相同客户对象，但这是不可能的，因为该方法正在创建对象。第二个选项可能会覆盖 hashCode() 但它会很重，因为该方法在客户身上做了很多事情，而且它是一个非常大的对象，包含很多其他对象和集合。有什么简单的方法可以让我简单地跳过不匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:36:59.380

我想你快到了（见下文）。这里 1 是您尝试处理的 Customer 对象的 setAttribute 中的参数索引。拥有它后，您应该能够毫无问题地比较两个 Customer 对象。

```
 private static Customer createdObject;

  expectLastCall().andAnswer(new IAnswer<Customer>() {
      public Customer answer() throws Throwable {
          createdObject = (Customer) EasyMock.getCurrentArguments()[1];
          return null;
      }
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:19:57.370

在测试 servlet 代码时，我个人会避免使用模拟框架模拟请求、响应和会话，而是使用专用`MockHttpServletRequest`的`MockHttpServletResponse`和`MockHttpSession`对象，所有这些都可以通过编程方式与之交互。

几乎所有主要的 Web 框架都有这些类的版本，您可以在[这个 JarFinder Search for`MockHttpSession`](http://www.jarfinder.com/index.php/java/search/~MockHttpSession~) . [就个人而言，我更喜欢Spring Reference](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/testing.html#mock-objects-servlet "Spring 参考：11.2.1 模拟对象：Servlet API")和[包 javadoc](http://static.springsource.org/spring/docs/current/javadoc-api/index.html?org/springframework/mock/web/package-summary.html "包 org.springframework.mock.web")中描述的 Spring mock 组件。

# java - Java，MongoDB：如何在迭代一个巨大的集合时更新每个对象？

> ID：15969592
> 
> 赞同：15
> 
> 时间：2013-04-12T10:58:31.347
> 
> 标签：java, mongodb, updating

我收集了大约 100 万条记录，每条记录有 20 个字段。我需要更新`flag`每条记录（文档）中的整数字段，为该`flag`字段随机分配 1 或 2。在整个集合上迭代光标时如何做到这一点？第二次搜索 MongoDB 已经找到的对象只是为了能够更新它似乎不是一个好主意：

```
 DBCursor cursor = coll.find();
  try {
     while(cursor.hasNext()) {
    BasicDBObject obj = (BasicDBObject) cursor.next();
    ...
    coll.update(query,newObj)

     }
  } finally {
     cursor.close();
  } 
```

如何有效地更新具有不同值的巨大 MongoDB 集合的每个文档中的字段？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-12T11:34:47.937

你的方法基本正确。但是我不会认为这样的集合是“巨大的”你可以从 shell 运行类似的东西：

```
coll.find({}).forEach(function (doc) {
    doc.flag = Math.floor((Math.random()*2)+1);
    coll.save(doc);
 }); 
```

根据您的 MongoDB 版本、配置和负载，这可能需要几分钟到几个小时

如果您想批量执行此更新，请在查询文档中使用一些条件，例如`coll.find({"aFiled" : {$gt : minVal}, "aFiled" : {$lt : maxVal}})`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-13T19:31:15.457

受@orid 启发，我对自己问题的解决方案：

```
public void tagAll(int min, int max) {
    int rnd = 0;
    DBCursor cursor = this.dataColl.find();
    try {
        while (cursor.hasNext()) {
            BasicDBObject obj = (BasicDBObject) cursor.next();
            rnd = min + (int) (Math.random() * ((max - min) + 1));
            obj.put("tag", rnd);
            this.dataColl.save(obj);
        }
    } finally {
        cursor.close();
    }
} 
```

# javascript - Fancybox 1.3.4 - 重新加载后没有覆盖

> ID：15969593
> 
> 赞同：0
> 
> 时间：2013-04-12T10:58:31.973
> 
> 标签：javascript, jquery, jquery-plugins, fancybox

我正在开发一个`ajax`弹出系统。功能之一是，当 ajax 收集任何新数据时，使用 Fancybox 显示它。有两种情况：

1.  用户读取 带来的数据`ajax`，并关闭fancybox。
2.  用户是AFK。当另一个数据进来时，它应该被**附加**到已经显示的fancybox内容

我的fancybox html 容器如下所示：

```
<div id="notifications_fancybox">
  <div class="notifications_fancybox_title">
    Powiadomienia
  </div>
  <div id="notifications_fancybox_content">

  </div>
</div> 
```

在哪里`notifications_fancybox`有`display: none;`css。

拳头我只想`$('#otifications_fancybox_content').append('some html');`附加一些数据，但似乎在fancybox初始化之后，不知何故它不会让我附加任何东西。

所以我找到了另一种方法来做到这一点：

当新数据进来时，首先检查fancybox是否已经打开：

```
nl.isFancyboxOpened = function(){
    if($('#fancybox-wrap').is(':visible')) return true;
    return false;
}; 
```

如果已打开，请关闭它：

```
if(nl.isFancyboxOpened()){
    $.fancybox.close();
} 
```

附加一些数据

```
$('#otifications_fancybox_content').append('some html'); 
```

并打开fancybox

```
nl.openFancybox = function(){   
    if(nl.isFancyboxOpened() == false){
      $.fancybox(
        $('#notifications_fancybox').html(),
        {
          'autoDimensions'            : false,
          'overlayShow'               : true,
          'hideOnOverlayClick'        : false,
          'showCloseButton'           : true,
          'width'                     : 450,
          'height'                    : 400,
          'transitionIn'              : 'none',
          'transitionOut'             : 'none'
        }
      );

    }
    else{
      $.fancybox.resize();
    }
}; 
```

**现在，主要问题**：当第一次显示fancybox时，一切都很好——有覆盖层、按钮等等。

当显示更多 ajax 数据并且我尝试执行上述过程（close-append-reopen）时，一切似乎都很好，除了......没有覆盖！所以用户可以点击页面上的所有内容，我不希望他这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:32:43.270

好的，我已经设法解决了这个问题。不完全是我想要的，但我会工作得很好。

我的解决方案使用`onComplete`回调来强制`display`覆盖的属性设置为`block`. 它被打包了，`setTimeout`因为立即调用它是行不通的。此外，将超时减少到特定时间以下将导致此解决方案失败。我相信有更好的方法来解决这个问题，但我还没有找到一个……还没有；）

```
$.fancybox(
        $('#notifications_fancybox').html(),
        {
          'autoDimensions'            : false,
          'overlayShow'               : true,
          'hideOnOverlayClick'        : false,
          'showCloseButton'           : true,
          'onComplete'                : function(){setTimeout(function(){$('#fancybox-overlay').css('display', 'block');}, 250);},
          'width'                     : 450,
          'height'                    : 400,
          'transitionIn'              : 'none',
          'transitionOut'             : 'none'
        }
); 
```

# jquery - 从一段 html 中获取所有输入元素的值

> ID：15969596
> 
> 赞同：1
> 
> 时间：2013-04-12T10:58:37.113
> 
> 标签：jquery

我有一个这样的html

```
 <tbody>
    <tr>
        <td >
            <img src="" alt="close" />
        </td>
        <td>
        <input type="hidden" name="addproducts" value="141420">141420
        </td>
        <td class="prd">
            <strong>
                <a href=""></a>
            </strong>
        </td>
        <td>
            <a rel="prettyPhoto" href=""><img src="" alt="Product"></a>
        </td> 
    </tr>
    <tr>
        <td >
            <img src="" alt="close" />
        </td>
        <td>
        <input type="hidden" name="addproducts" value="1213143">1213143
        </td>
        <td class="prd">
            <strong>
                <a href=""></a>
            </strong>
        </td>
        <td>
            <a rel="prettyPhoto" href=""><img src="" alt="Product"></a>
        </td> 
    </tr>
    <tr>
        <td >
            <img src="" alt="close" />
        </td>
        <td>
        <input type="hidden" name="addproducts" value="242424">242424
        </td>
        <td class="prd">
            <strong>
                <a href=""></a>
            </strong>
        </td>
        <td>
            <a rel="prettyPhoto" href=""><img src="" alt="Product"></a>
        </td> 
    </tr>
</tbody> 
```

我正在尝试将名称为“addproducts”的所有“隐藏”“输入”的值获取到一个字符串中。我尝试了一些类似下面的代码（此代码基于我的完整html，我不能放在这里，因为大小和其他问题。如果我得到解决这个问题的逻辑，我可以自己解决这个问题）。

```
 var txt=    $(this).parent().parent().find(".antal").find("input:hidden[name='addproducts']").each(function () {
           $(this).val() 
        });
    alert(txt); 
```

但这只是给出一个对象作为警报。任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:01:36.600

您可以使用[map()](http://api.jquery.com/jQuery.map/)，您可以根据需要更改选择器。您的 html 中几乎没有修复，例如关闭`input`和`image`标记。

**[现场演示](http://jsfiddle.net/rajaadil/CRskv/)**

```
str = $('[name=addproducts]').map(function(){
    return this.value;
}).get().join(','); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T11:01:06.720

如果您想获得由所有连接值组成的文本，您可以这样做：

```
var txt= $(this).parent().parent().find(".antal")
    .find("input:hidden[name='addproducts']").map(function () {
       return this.value
}).get().join('') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:03:41.920

尝试像这样[的 FIDDLE](http://jsfiddle.net/XckwS/2/)

```
 $(function(){
        var my_txt = [];
        $("input:hidden[name='addproducts']").each(function () {
            my_txt.push($(this).val());       
        });
        alert(my_txt.toString());
    }); 
```

编辑代码

# ios - 如何从存储在 sqlite 中的 NSData 中检索字符串？

> ID：15969598
> 
> 赞同：0
> 
> 时间：2013-04-12T10:58:41.290
> 
> 标签：ios, objective-c, ipad, nsstring, nsdata

**笔记：**

1.  我已经存储`NSData`在本地数据库中。
2.  我想从本地数据库中使用它。但由于它以文本形式存储在本地数据库中，因此在将其转换回 `NSData`.
3.  strDbData 是`NSString`此处类型的对象。

我有一个`NSData`存储在本地数据库中，例如 `<a3829c97 3b1efacb c7680f7e 7e7a95a2>`

现在我想把它找回来，所以我按照下面提到的做，但我收到错误。

1) 第一种方式

```
NSData *myData = (NSData*)strDbData;
NSLog(@"%@",[myData class]); 
```

错误 ：`-[__NSCFString AES256DecryptWithKey:]: unrecognized selector sent to instance 0x1ddcd9c0`

2) 第二种方式

```
NSData *myData = [[NSData alloc]initWithData:(NSData*)strDbData]; 
```

错误：`-[__NSCFString bytes]: unrecognized selector sent to instance 0x1dd61a40`

那么如何将`NSData`本地数据库中的 soret 转换为“文本” `NSData`？

**编辑**

```
strDbData = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 6)]; 
```

**编辑 2**在数据库中存储 NSData

```
-(BOOL)updateSingleRow:(NSData*)myData 
{
    @try
    {
        BOOL success = NO;
        sqlite3_stmt    *statement;
        const char *stmt = [[NSString stringWithFormat:@"UPDATE ABC SET XYZ = '%@' WHERE ID = 1 ",myData] UTF8String];
        if (sqlite3_open([databaseFilePath UTF8String], &database) == SQLITE_OK)
        {
            if(sqlite3_prepare_v2(database, stmt, -1, &statement, NULL) == SQLITE_OK)
            {
                if(sqlite3_step(statement) != SQLITE_DONE )
                {
                    NSLog( @"updateSingleRow Error: %s", sqlite3_errmsg(database) );
                }
                else if (sqlite3_total_changes(database)>0)
                {
                    success = YES;
                }
                else if (sqlite3_total_changes(database)==0)
                {
                    NSLog(@"No Updates : %@" , query);
                }
            }
            sqlite3_finalize(statement);
            sqlite3_close(database);
        }
        return success;
    }
    @catch (NSException *exception)
    {
        TRACE_ERROR(@"updateSingleRow", exception.name, exception.description);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:46:34.587

如果 SQLite 列包含二进制数据，您应该通过

```
const void *bytes = sqlite3_column_blob(statement, 6);
int length = sqlite3_column_bytes(statement, 6);
NSData *myData = [[NSData alloc] initWithBytes:bytes length:length]; 
```

而不是将其读入字符串。

要存储二进制数据，请使用“准备好的语句”。（这段代码我没有测试，希望是正确的！）

```
const char *stmt = "UPDATE ABC SET XYZ = ? WHERE ID = 1";
if (sqlite3_prepare_v2(database, stmt, -1, &statement, NULL) == SQLITE_OK) {
    sqlite3_bind_blob(statement, 1, [myData bytes], [myData length], NULL);
    // ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:42:53.570

您是否尝试从方法中将数据加载为`dataWithContentsOfFile:`、 或或其他一些。`initWithBytes:length:``NSData`

一些例子：

```
void* bytedata = [self getByteDataByParam:param];

NSData* loadedData = [NSData dataWithBytes:byteData length:length]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-12T12:33:45.763

您的数据库字段应该是 Blob 而不是 String 类型，这将解决问题

# mysql - mysql唯一声明

> ID：15969600
> 
> 赞同：0
> 
> 时间：2013-04-12T10:58:46.257
> 
> 标签：mysql, sql, group-by

我有一张这样的桌子

```
ID     |   date  |    CODE 

1        01-02-13     VDOT
2        03-02-13     CMAX
3        05-02-13     VDOT
1        05-02-13     CMAX
1        09-02-13     VDOT 
```

我的SQL查询如下

```
SELECT * FROM Table_Name ; 
```

这显然显示了所有结果，但我只需要显示日期最近的每个代码的一个实例，所以我的结果需要看起来像这样

```
1        09-02-13     VDOT
1        05-02-13     CMAX 
```

谁能告诉我如何只为每个代码（按日期的最新条目）获得一个结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:00:25.137

```
SELECT  a.*
FROM    TableName a
        INNER JOIN
        (
            SELECT  CODE, MAX(date) max_date
            FROM    TableName
            GROUP   BY CODE
        ) b ON  a.Code = b.Code AND
                a.date = b.max_date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:00:19.780

尝试这个：

```
SELECT * FROM Table_Name 
GROUP BY CODE
ORDER BY date DESC 
```

这将在它分组后排序。因此在分组结果中给出 ORDERS。

.

但现在试试这个：

```
SELECT * FROM 
(SELECT * FROM Table_Name ORDER BY date DESC) tx2 
GROUP BY CODE 
```

这将确保 GROUP 之前的正确日期 ORDER。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:06:06.237

```
SELECT * FROM
TABLE AS A
JOIN
(
SELECT D.CODE, MAX(D.DATE) AS DATE FROM TABLE AS D
GROUP BY D.CODE
) AS E
WHERE 
A.CODE =  E.CODE
AND A.DATE = E.DATE 
```

# c# - 如何在托管客户端对象模型中创建内容数据库和网站集？

> ID：15969601
> 
> 赞同：1
> 
> 时间：2013-04-12T10:58:50.320
> 
> 标签：c#, asp.net, sharepoint-2010, sharepoint-clientobject

我们正在为 SharePoint Foundation 2010 开发远程 asp.net 应用程序。我们希望以编程方式为该内容数据库创建内容数据库和网站集。我正在互联网上搜索。我发现了很多使用服务器对象模型的例子。我找不到任何使用托管客户端对象模型的文章。有没有办法在托管客户端对象模型中创建内容数据库和网站集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:51:31.837

不幸的是，COM 中没有任何东西可以帮助您将内容数据库附加到 Web 应用程序，然后在其上创建站点集合。

您可以使用 admin.asmx webservice 或者在中央管理 web 应用程序下可用

```
http://CAURL/_vti_adm/admin.asmx 
```

这可以帮助您创建站点集合，但我没有看到 OOTB 服务来创建内容数据库，您必须为此创建自定义 Web 服务

# web-services - HTTPS WSDL soap：地址位置未被 web-service-proxy 正确重写

> ID：15969604
> 
> 赞同：0
> 
> 时间：2013-04-12T10:58:55.153
> 
> 标签：web-services, proxy, mule

这个问题存在于 mule 1.3.2-201212121943

WSDL 肥皂：地址位置未被使用 .NET WS 的 web-service-proxy 正确重写

```
<mule ...>
    <https:connector name="HTTP_HTTPS"  sendBufferSize="0" receiveBufferSize="0" receiveBacklog="0" clientSoTimeout="10000" serverSoTimeout="10000"  doc:name="HTTP\HTTPS">
        <https:tls-client path="xyz\keystore.jks" storePassword="mulepassword"/>
    </https:connector>

    <pattern:web-service-proxy name="xyz-ws-proxy"  >
      <http:inbound-endpoint address="http://localhost:8081"/>
      <https:outbound-endpoint followRedirects="true" address="https://xyz/g2g/BPM#[header:inbound:http.request.path]" connector-ref="HTTP_HTTPS" />
    </pattern:web-service-proxy>
</mule> 
```

`http://localhost:8081/xyz.asmx?wsdl`返回 wsdl

```
<wsdl:port name="XYZEndpointSoap" binding="tns:XYZEndpointSoap">
  <soap:address location="http://xyz/g2g/BPM/xyz.asmx" />
</wsdl:port>
<wsdl:port name="XYZEndpointSoap12" binding="tns:XYZEndpointSoap12">
  <soap12:address location="http://xyzg2g/BPM/xyz.asmx" />
</wsdl:port> 
```

使用另一个 jax-ws 服务，此配置有效 - 只有一个 soap:address 嗯。

这是.NET WS。

谢谢

PS：我已经阅读了谷歌搜索结果并关闭了 mule 问题，但对这项服务没有任何作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:46:29.673

我已经检查并`pattern:web-service-proxy`没有问题重写包含 a`soap:address`和 a的 WSDL 的所有地址`soap12:address`。

问题实际上可能是由于您获取 WSDL 的方式：将 HTTP 入站端点绑定到`http://localhost:8081`no `path`（我主张反对：最好有 a `path`），WSDL 可在`http://localhost:8081/?wsdl`，而不是`http://localhost:8081/xyz.asmx?wsdl`。

# zend-framework2 - 在没有源关键字的情况下，Poedit 翻译字符串的推荐方式/最佳实践是什么？

> ID：15969607
> 
> 赞同：1
> 
> 时间：2013-04-12T10:58:59.240
> 
> 标签：zend-framework2, translation, translate, poedit

我正在开发一个 Zend Framework 2 应用程序，但翻译有问题。实际上在视图脚本中可以使用视图助手[`Translate`](https://github.com/zendframework/zf2/blob/master/library/Zend/I18n/View/Helper/Translate.php)。由于我在 Poedit ( ) 中将“翻译”定义为源关键字，`[Poedit menu] -> Catalogue -> Properties... -> Source keywords`因此该工具会识别字符串并将其添加到翻译列表中。

但是在其他地方也有一些字符串，我不能使用/a 视图助手，例如在表单类或导航中。这应该如何管理？

一些想法：

1.  创建一个包含此类字符串列表的文件。示例：我们创建文件`navigation.i18n`等`forms.i18n`（或仅一个文件），在我们添加到列表的通用 Poedit 语法中定义我们需要的所有字符串`Source keywords`（例如，使用`translate`:`translate('my label foo'), translate('my label bar')`等），最后添加`i18n`为源路径（`[Poedit menu] -> Catalogue -> Properties... -> Source paths`）。我们还可以使用已经定义为“源路径”的扩展。

2.  一个类，它提供一个（静态）方法`translate(...)`而没有任何功能。示例：而不是`'label' => 'foo'`我们使用`'label' => \MyNamespace\Util\Translator::translate('foo')`

我认为，第二种方法更干净，我更喜欢。我不需要写两次我的钥匙串并记住已经翻译/更新的内容。但也许有更好的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-10T21:40:11.373

只需将关键字添加`_`到 Poedit ( `[Poedit menu] -> Catalogue -> Properties... -> Source keywords`)。然后用这个标签代替标签使用函数`_`。例如改变

```
 'options' => array(
            'label' => 'Username',
        ), 
```

至

```
 'options' => array(
            'label' => _('Username'),
        ), 
```

并在 Poedit 从源更新目录。就是这样——现在你在 Poedit 中有了你的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T08:03:41.733

我仍然不明白你的问题出在哪里：S 从我能说的一切来看，你正在尝试翻译模型/实体的输出。这是 View 的典型关注点！

如果主要关注的是“如何将所有这些模型输出放入 PoEdit？”，那么我只能告诉您：手动或实现 DB-Translation ......

将 ServiceManager 注入到基本上遵循以下语法的所有内容中`getServiceConfig()`

```
return array( 'factories' => array(
    'my-service' => function ($sm) {
        $class = new ServiceClass();
        $class->setServiceManager($sm);
        return $class;
    }
)); 
```

在上面的例子`$class`中几乎可以是一切。模型/实体、TableGateway 或任何您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-26T09:35:57.607

如果您以不同的方式构建表单，如下所示：

```
$name = new \Zend\Form\Element('name');
$name->setLabel('Your name');
$name->setAttributes(array(
    'type'  => 'text'
));
$this->add($name); 
```

（[http://framework.zend.com/manual/2.0/en/modules/zend.form.quick-start.html](http://framework.zend.com/manual/2.0/en/modules/zend.form.quick-start.html)）

然后你可以在 poedit 中注册“setLabel”作为关键字，它会选择标签文本进行翻译。

# windows - 文件路径中的\和\\有什么区别

> ID：15969608
> 
> 赞同：14
> 
> 时间：2013-04-12T10:58:59.577
> 
> 标签：windows, web-config, directory, filepath

Windows操作系统的文件路径中的单斜杠和双斜杠有什么区别，例如

```
c:\\Personal\MyFolder\\MyFile.jpg 
```

和

```
c:\Personal\MyFolder\MyFile.jpg 
```

如果我使用单斜杠或双斜杠怎么办，因为我已经尝试将图像存储在我的代码中（在 webconfig 文件中）并且它们都可以正常工作。

有什么区别吗？？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-12T11:09:55.953

Windows 忽略双反斜杠。因此，虽然第二个语法 with`\`是正确的，你应该使用那个，第一个 with`\\`也可以。

唯一的例外是在指示 UNC 路径的路径的最开始处的双反斜杠。
请参阅[通用命名约定](https://en.wikipedia.org/wiki/Path_(computing)#Universal_Naming_Convention)。

* * *

尽管请注意，在 C、C++、Java、C#、Python、PHP、Perl 等许多编程语言中，反斜杠在[字符串文字](https://en.wikipedia.org/wiki/String_literal)中用作[转义字符](https://en.wikipedia.org/wiki/String_literal#Escape_sequences)。因此，它需要自行转义（通常使用另一个反斜杠）。因此，在这些语言中，您通常需要在字符串文字中使用双反斜杠来实际获取路径的单个反斜杠。因此，例如在 C# 中，以下字符串文字实际上被解释为：`C:\Personal\MyFolder\MyFile.jpg`

```
var path = "C:\\Personal\\MyFolder\\MyFile.jpg"; 
```

虽然有[替代语法](https://en.wikipedia.org/wiki/String_literal#Raw_strings)。例如，在 C# 中，您可以使用以下语法来获得相同的结果：

```
var path = @"C:\Personal\MyFolder\MyFile.jpg"; 
```

# javascript - 如果无法访问 URL，如何隐藏 div？

> ID：15969612
> 
> 赞同：0
> 
> 时间：2013-04-12T10:59:19.503
> 
> 标签：javascript, url, html

我已将 Twitter 提要集成到网站中，如果`http://twitter.com/something`无法到达最终位置（大概是 ），则提要不会显示。这是理想的，但是我在提要正上方放置了一个标题 div，无论提要是否显示在页面上，它都保持可见。

如果无法访问 URL，是否可以阻止 div ( `#title`) 显示？我发现了 JavaScript 片段，它们看起来会根据正在查看的文件的 URL 隐藏一个 div，但这在我的情况下似乎不起作用。

HTML：

```
 <div id="title">
    <h3>Latest Tweets</h3>
  </div>
  <div id="twitter_update_list">
    <script type="text/javascript" src="http://twitter.com/javascripts/blogger.js">  
    </script>
    <script type="text/javascript" src="http://api.twitter.com/1/statuses/user_timeline/SW_Trains.json?callback=twitterCallback2&count=3">
    </script>
  </div> 
```

提前谢谢了。我知道这对于 JS 可能是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:05:12.927

也许像

```
var divContent = document.getElementById('twitter_update_list');
if (NOT divContent) {
    //no content detected
    document.getElementById('title').style.visibility = 'hidden'; 
} 
```

这是未经测试的，我不知道它是否有效。您必须创建一个函数，该函数将在页面完全加载后执行。也许像：

```
window.onload = function(){
  // your code...
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:09:47.503

加载后创建一个函数来测试将保存内容的 div 的内容。如果为空，则隐藏您需要隐藏的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:19:07.537

用这个。

```
<div id="title" style="display:none;">
 <h3>Latest Tweets</h3>
</div>

<div id="twitter_update_list">
 <script type="text/javascript" src="http://twitter.com/javascripts/blogger.js">  
 </script>
 <script type="text/javascript" src="http://api.twitter.com/1/statuses/user_timeline/SW_Trains.json?callback=twitterCallback2&count=3">
 </script>
</div>

<script type="text/javascript">
 window.onload = function(){

  var tdata = jQuery('#twitter_update_list').html().length;

  if(tdata > 0)
  {
     jQuery('#title').css('display','block');
  }
  else
  {
     jQuery('#title').css('display','none');
  }
 } 

</script> 
```

可能对你有帮助。

# mysql - 在 SQL 中，如何为每个组选择前 2 行

> ID：15969614
> 
> 赞同：21
> 
> 时间：2013-04-12T10:59:25.603
> 
> 标签：mysql, sql, group-by, greatest-n-per-group

我有一张如下表：

```
NAME    SCORE
-----------------
willy       1
willy       2
willy       3
zoe         4
zoe         5
zoe         6 
```

这是[样本](http://www.sqlfiddle.com/#!2/ee665/1)

的聚合函数`group by`只允许我得到每个的最高分`name`。我想查询每个 2 的最高分`name`，我该怎么做？

我的预期输出是

```
NAME    SCORE
-----------------
willy       2
willy       3
zoe         5
zoe         6 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-12T11:02:21.663

```
SELECT *
FROM   test s
WHERE 
        (
            SELECT  COUNT(*) 
            FROM    test  f
            WHERE f.name = s.name AND 
                  f.score >= s.score
        ) <= 2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/ee665/18)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-12T11:04:24.233

在 MySQL 中，您可以使用用户定义的变量来获取每个组中的行号：

```
select name, score
from
(
  SELECT name,
    score,
    (@row:=if(@prev=name, @row +1, if(@prev:= name, 1, 1))) rn
  FROM test123 t
  CROSS JOIN (select @row:=0, @prev:=null) c
  order by name, score desc 
) src
where rn <= 2
order by name, score; 
```

看[演示](http://rextester.com/JSY60185)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-02-13T09:06:25.940

如果您不介意有额外的列，那么您可以使用以下代码：

```
SELECT Name, Score, rank() over(partition by Name order by Score DESC) as rank
From Table
Having rank < 3; 
```

**Rank 函数为每个分区提供排名，在您的情况下它是名称**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-19T20:15:54.980

```
insert into test values('willy',1)
insert into test values('willy',2)
insert into test values('willy',3)
insert into test values('zoe',4)
insert into test values('zoe',5)
insert into test values('zoe',6)

;with temp_cte
as (
    select Name, Score,
       ROW_NUMBER() OVER (
          PARTITION BY Name
          ORDER BY Score desc
       ) row_num
    from test
)
select * from temp_cte
where row_num < 3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-07T23:26:33.823

你可以这样做：

```
SET @num :=0, @name :='';   
SELECT name, score,
    @num := IF( @name= name, @num +1, 1 ) AS row_number,
    @name := name AS dummy
FROM test
GROUP BY name, score
HAVING row_number <=2 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T11:02:52.073

为此，您可以这样做-

[http://www.sqlfiddle.com/#!2/ee665/4](http://www.sqlfiddle.com/#!2/ee665/4)

但为了获得前 2 个查询，您应该使用一个 ID，然后对 ID 运行限制，例如 0,2。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-23T11:41:51.537

```
SELECT * FROM (   
    SELECT  VD.`cat_id` ,  
       @cat_count := IF( (@cat_id = VD.`cat_id`), @cat_count + 1, 1 ) AS 'DUMMY1', 
       @cat_id := VD.`cat_id` AS 'DUMMY2',
       @cat_count AS 'CAT_COUNT'   
     FROM videos VD   
     INNER JOIN categories CT ON CT.`cat_id` = VD.`cat_id`  
       ,(SELECT @cat_count :=1, @cat_id :=-1) AS CID  
     ORDER BY VD.`cat_id` ASC ) AS `CAT_DETAILS`
     WHERE `CAT_COUNT` < 4

------- STEP FOLLOW ----------  
1 . select * from ( 'FILTER_DATA_HERE' ) WHERE 'COLUMN_COUNT_CONDITION_HERE' 
2\.  'FILTER_DATA_HERE'   
    1\. pass 2 variable @cat_count=1 and  @cat_id = -1  
    2\.  If (@cat_id "match" column_cat_id value)  
        Then  @cat_count = @cat_count + 1    
        ELSE @cat_count = 1      
    3\. SET @cat_id = column_cat_id    

 3\. 'COLUMN_COUNT_CONDITION_HERE'   
    1\. count_column < count_number    

4\. ' EXTRA THING '
   1\. If you want to execute more than one statement inside " if stmt "
   2\. IF(condition, stmt1 , stmt2 )
      1\. stmt1 :- CONCAT(exp1, exp2, exp3) 
      2\. stmt2 :- CONCAT(exp1, exp2, exp3) 
   3\. Final "If" Stmt LIKE 
      1\. IF ( condition , CONCAT(exp1, exp2, exp3) , CONCAT(exp1, exp2, exp3) ) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-03-15T04:39:59.677

使用此查询。

```
select * from fruits 
where type = 'orange'  
order by price limit 2 
```

解决方案在这里：
[https ://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/](https://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)

# ruby-on-rails-3 - NameError 与不存在的类

> ID：15969615
> 
> 赞同：1
> 
> 时间：2013-04-12T10:59:27.430
> 
> 标签：ruby-on-rails-3, dependencies

我希望这里有人可以帮助我。我收到以下错误：

```
uninitialized constant Subscription::SubscriptionContactDatum 
```

问题是那`SubscriptionContactDatum`不存在。我有一个类叫`SubscriptionContactData`，但不是`SubscriptionContactDatum`。几天后想知道发生了什么，我发现问题来自依赖项。

有两个相关的类：`Subscription`和`SubscriptionContactData`。`Subscription`can 有很多`ContactData`，每个都`ContactData`属于 2 个不同的`Subscriptions`：`Subs_cont_datas(id, subscription_id1, subscription_id2)`

我虽然问题在那里，所以我尝试添加第二个`:belongs_to`，`ContacDatas`但没有运气。

订阅.rb

```
class Subscription < ActiveRecord::Base
  has_many :subscription_contact_data, :dependent => :destroy
end 
```

subscription_contact_data.rb

```
class SubscriptionContactData < ActiveRecord::Base  
  belongs_to :subscription
end 
```

**注 1**：如果我删除`:dependent => :destroy`fon`Subscriptions.rb`错误消失，但数据库抛出一个外键约束错误（显然）。所以删除`:dependent`不是一种选择......

**注 2**：我使用的是 Ruby 1.8.9，Rails 3.0.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:13:13.800

I think, problem is not with :dependent => destroy. It is the Problem with "rails trying to pluralize the association name". So, you can try the below line.

```
has_many :subscription_contact_data, :class_name => 'SubscriptionContactData' 
```

This should solve your issue.

Hope it helps.

# javascript - 小型静态数据是否适合被定义为全局变量？

> ID：15969616
> 
> 赞同：1
> 
> 时间：2013-04-12T10:59:27.647
> 
> 标签：javascript, express

我一直在仔细阅读 stackoverflow 和其他地方提供的信息，但我没有看到与我的想法 100% 匹配的响应。

基本上，它是关于标题所说的。我正在使用*快递*。我有一组数据，每组大约有 100-200 行对象，而这些对象又具有 5-8 个字段。虽然这可以自然地保存在数据库集合中（我已经拥有更大的集合），但我正在考虑在运行时将这些数据定义为对象数组，因为数据不应该占用太多内存。访问频率会有所不同；对于其中一些人来说经常是这样，而对于其他人来说，很少甚至没有特定条件。

我知道由于我同意的各种原因，全局变量不好，但是这些数据将是静态的，永远不会修改，并且如果在本地定义并在每次需要时调用它可能会更昂贵。

那么，即使有这些**静态**和**低容量**的情况，是否仍然不建议将它们定义为全局变量？然后，我当然会在本地重新定义这些变量，以适应​​它们将被多次使用的条件。

如果没有，请分享您对替代方案的看法。

# java - Java中未使用的参数

> ID：15969617
> 
> 赞同：2
> 
> 时间：2013-04-12T10:59:29.843
> 
> 标签：java, android, eclipse, suppress-warnings

如果您无意在 C++ 中使用参数，则只需省略变量的名称，但将类型保留在函数声明中。这样做是一种轻量级的方法，可以向编译器发出信号，表明不打算使用给定的参数。

这可以在Java中复制吗？

场景是这样的：我不想`@SuppressWarnings("unused")`为每个按钮侦听器充斥我的代码（因为按钮侦听器通常会忽略`View v`他们收到的），但我想总体上警告我这个愚蠢的错误，比如说，不通过参数初始化成员变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:10:35.280

我想不出像 C++ 选项这样的东西，但您可以扩展/实现您的按钮侦听器并添加一个不带参数的新方法，并在原始事件方法中调用该方法。这样，您只需抑制一次警告。

`public void someEvent(Parameter p) { someEvent(); }`

`public void someEvent() { }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T17:24:12.740

In addition to creating an adapter like @Farzad suggested, you might want to also check your compiler settings in your IDE. For example, I use Eclipse and there are error/warning compiler settings under Window->Preferences->Java Compiler->Errors/Warnings. Within that dialog you can set UnnecessaryCode->Value of parameter is not used->Ignore in overriding and implementing methods.

Having that option checked automatically ignores those unused params when they are from a method that you are implementing/overriding such as in your listener case. I generally find that to be sufficient without needing to create an adapter.

# jquery - 如何从 textarea 中清除所有字符

> ID：15969618
> 
> 赞同：0
> 
> 时间：2013-04-12T10:59:30.073
> 
> 标签：jquery, forms, textarea

我有一个简单的代码，它会在我按 Enter 后清除 textarea （一个输入 - 像往常一样只是下一行）

```
<textarea name="text" id="text" wrap="soft"></textarea> 
```

和.js（基于jquery）

```
(function($) {
       $.fn.keyWatcher = function() {
              return this.keydown(function(evt){
                     var $this =  $(this);
                     var prevEvt = $this.data('prevEvt');
                     $this.trigger('multikeydown',[prevEvt,evt]);
                     $this.data('prevEvt',evt);
              });
       }; 
})(jQuery); //plugin for double key remember 

$('#text').keyWatcher().bind('multikeydown',function(evt,prevKey,currKey){
       var prKey = ((prevKey) ? prevKey.keyCode : "(none)");
       var cuKey = currKey.keyCode;
       if (cuKey == 13 && prKey == 13 ) { 
              $("#text").val('');
       }else{

       } 
```

这段代码几乎可以正常工作 - 它清理了我的 textarea，但它在开始时留下了一个空行。它不在乎我之前输入了多少行 - 1 或 100，无论如何它都会将第一行留空并将光标放在第二行。

我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:06:00.457

当您清除它时，输入压力尚未添加到该字段中。将插件中的事件更改为 keyup ，以便在添加换行符后触发。

```
return this.keyup(function(evt){ 
```

演示：http: [//jsfiddle.net/LtsAx/](http://jsfiddle.net/LtsAx/)

# regex - 正则表达式在缅甸文本中插入零宽度空格

> ID：15969619
> 
> 赞同：0
> 
> 时间：2013-04-12T10:59:31.507
> 
> 标签：regex, line-breaks

向所有在这里贡献时间和脑力的人致敬。我正在使用缅甸语文本，资源很少。

为了在 Unicode 中的 Unicode 文本列中使换行正常工作，我想编译一个正则表达式，它将在以下上下文中插入一个零宽度空格 (ZWSP) [u\200B]：

在任何 unicode 字符范围 [\u1000-\u1021] 的示例之前插入 ZWSP

除非

*   字符后跟 [\u103A]

或者

*   前一个字符是相同范围的 unicode 字符 [\u1000-\u1021] 或 [\u1039] 之一，（我可能需要稍后添加一两个其他字符）。

任何人都可以帮忙吗？我将在 UltraEdit 中使用大量文本语料库进行查找/替换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T14:42:27.417

Perl 正则表达式搜索字符串

`([^\x{1000}-\x{1021}\x{1039}])([\x{1000}-\x{1021}])(?!\x{103A})`

与替换字符串一起使用

`\1\x{200B}\2`

符合您的所有要求。

**搜索字符串的解释：**

`([^\x{1000}-\x{1021}\x{1039}])`匹配任何不具有十六进制范围 1000 到 1021 的代码值且不是十六进制代码值 1039 的字符，并标记此字符以通过`\1`替换字符串中的表达式进行反向引用，因为必须保留此字符。

`([\x{1000}-\x{1021}])`匹配代码值在 0x1000 到 0x1021 范围内的任何字符，并标记该字符以供替换字符串中的表达式反向引用，`\2`因为该字符也必须保留。

`(?!\x{103A})`是一个否定的前瞻表达式，检查下一个字符是否没有十六进制代码值 103A。

**替换字符串的解释：**

`\1`引用搜索字符串中第一个标记组找到的字符。

`\x{200B}`指定要插入的零宽度空间。

`\2`引用搜索字符串中第二个标记组找到的字符。

# jquery - 使用 WCF 在 JSONP 中跨域图像上传

> ID：15969620
> 
> 赞同：1
> 
> 时间：2013-04-12T10:59:33.130
> 
> 标签：jquery, jsonp

我只需要使用 JSONP 从客户端上传图像并将文件流发送到 WCF 服务托管。

但我无法实施，也找不到方法。

如果有人知道，请帮助我如何做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:12:00.420

您不能真正使用 jsonp 流式传输图像。

您可以对图像字节进行 64 位编码并将它们添加到查询字符串中，但是您将被限制为导致查询字符串小于相关客户端（浏览器）的最大 url 大小的文件大小。

为了克服最大图像大小问题，您可以将图像分块为字节并向图像端点发出许多请求，将当前块号和有多少块等编码到查询字符串中，以便可以在服务器（并且可能是唯一的图像上传 ID），但是这将依赖于粘性会话或服务器之间的共享数据存储，以便在您有多个服务器时可能重新创建图像。

或者（不使用 jsonp）：

*   @SebastienRenauld 的回答中涵盖的 iframe 技巧。
*   网络套接字

# java - 如何序列化 JSON 对象？

> ID：15969621
> 
> 赞同：-3
> 
> 时间：2013-04-12T10:59:48.253
> 
> 标签：java, json

我有以下 JSON 字符串。

```
{"portfolio":"HEXGENFUND","transSrlNo":"1","transCode":"BUY","investReason":"009","inflowOutflow":"I","transDate":"2012-09-01","tradeDate":"2012-09-01","tradeDateUpto":"2012-09-01","tradeTime":"15:46:36","investCategory":"FVTPL","custodian":"DEUTSCHE","holdType":"HOLD","securityType":"INV","security":"9.45SBAI160326","assetClass":"NCD","issuer":"SBAI","marketType":"LIM","tradePriceType":"R","requisitionType":"MS","priceFrom":"343490934332","priceTo":"343490934332","marketPrice":"343490934332","averagePrice":"343490934332","price":"343490934332","quantity":"234","grossAmtTcy":"80376878633688","exchRate":"1","grossAmtPcy":80376878633688,"grossIntTcy":"992.42","grossIntPcy":992.42,"netAmountTcy":80376878634680.42,"netAmountPcy":80376878634680.42,"acquCostTcy":80376878633688,"acquCostPcy":80376878633688,"yieldType":"N","purchaseYield":"0","marketYield":"0","ytm":"-80.07453968","mduration":"0","currPerNav":"0","desiredPerNav":"0","currHolding":"0","noofDays":"0","realGlPcy":0,"realGlTcy":"0","nowLater":"N","isAllocable":"false","acquCostReval":0,"acquCostHisTcy":80376878633688,"acquCostHisPcy":0,"exIntTcy":0,"exIntPcy":0,"accrIntReval":0,"accrIntTcy":0,"accrIntPcy":0,"grossAodTcy":0,"grossAodPcy":0,"grossAodReval":0,"bankAccAmtAcy":80376878634680.42,"bankAccAmtPcy":80376878634680.42,"taxAmountTcy":0,"unrelAmortTcy":0,"unrelAmortPcy":0,"unrelGlTcy":0,"unrelGlPcy":0,"realGlHisTcy":0,"realGlHisPcy":0,"tradeFeesTcy":0,"tradeFeesPcy":0} 
```

我有一个以上的 POJO。

如何将其反序列化为对象？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T11:04:01.160

您可以使用这样的[**gson 库**](https://code.google.com/p/google-gson/)将上面的 JSON 字符串转换为 HashMap：

```
Gson gson = new Gson(); // get a new Gson instance

// define a Type for Map<String, String>
Type type = new TypeToken<Map<String, String>>(){}.getType();

// convert JSON string to a Map<String, String> instance
Map<String, String> map = gson.fromJson(jsonStr, type); 
```

### 编辑（基于您编辑的问题）：用于将 JSON 转换为您的 POJO 对象

**您可以使用 gson**将 JSON 字符串转换为您的自定义 POJO，如下所示：

```
// assuming your POJO is of type MyClass
MyClass instance = gson.fromJson(jsonStr, MyClass.class); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T11:02:45.087

如果要为上述 json 字符串生成匹配的 java 类，使用 json 生成器将是最好的解决方案，因为数据有很多字段。

您可以查看[http://www.jsonschema2pojo.org/](http://www.jsonschema2pojo.org/)

只需粘贴您的 json，选择 JSON 作为源类型，您将拥有一个与[Jackson](http://jackson.codehaus.org/)兼容的带注释的 java 类。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T11:03:45.297

看看这个库教程：[jackson](http://wiki.fasterxml.com/JacksonInFiveMinutes)

String myJson = new org.codehaus.jackson.map.ObjectMapper.writeValueAsString(myObject);

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T11:02:04.990

有一些 JSON 库可能会对您有所帮助。例如，[Gson](https://code.google.com/p/google-gson/)是一个 Java 库，可用于将 Java 对象转换为其 JSON 表示形式。它还可用于将 JSON 字符串转换为等效的 Java 对象

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-12T11:02:36.173

您可以使用 gson 或 JsonOrg 等库创建 JSON 对象。您可以通过以下链接了解库和实现

```
https://sites.google.com/site/gson/gson-user-guide
http://code.google.com/p/google-gson/
http://json.org/java/ 
```

# android - Android 通过 Activity 控制服务

> ID：15969634
> 
> 赞同：1
> 
> 时间：2013-04-12T11:00:25.047
> 
> 标签：android, service

对于聊天应用程序，我需要管理用户和 Web 服务之间通信的服务。我决定使用通常的 Android 服务组件。

我现在如何启动服务，我也知道如何从服务向活动发送消息，但是如何从活动控制服务？例如，用户发送一条消息，所以我必须让服务发送例如包含该消息的 http 请求。或者用户想要结束聊天会话，因此活动必须使服务发送包含结束聊天会话命令的请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:09:05.350

您可以使用`AIDL` [http://developer.android.com/guide/components/aidl.html](http://developer.android.com/guide/components/aidl.html)

在 AIDL 中，您可以在 service 中实现方法，并通过 binder 从 Activity 调用这些方法。

所以在你的情况下，1）在服务中实现 sendMessage(String msg)

2）在aidl文件中声明此方法并从服务中调用

```
mService.sendMessage(msg); 
```

不使用 AIDL 进行编辑：

服务等级

```
public class LocalService extends Service {
    private final IBinder mBinder = new LocalBinder();
    private final Random mGenerator = new Random();
    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return mBinder;
    }

    public class LocalBinder extends Binder{
        LocalService getService(){
            return LocalService.this;
        }
    }

    public int getRandomNumber()
    {
        return mGenerator.nextInt(100);
    }

} 
```

活动课

```
public class BindingActivity extends Activity {
    LocalService mService;
    boolean mbound = false;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_binding);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_binding, menu);
        return true;
    }

    @Override
    protected void onStart() {
        // TODO Auto-generated method stub
        super.onStart();
        Intent intent = new Intent(this, LocalService.class);
        bindService(intent,mConnection,Context.BIND_AUTO_CREATE);

    }

    @Override
    protected void onStop() {
        // TODO Auto-generated method stub
        super.onStop();
        if(mbound)
        {
            unbindService(mConnection);
            mbound = false;
        }
    }
    private ServiceConnection mConnection = new ServiceConnection(){

        @Override
        public void onServiceConnected(ComponentName name, IBinder service) {
            // TODO Auto-generated method stub
            LocalBinder binder = (LocalBinder)service;
            mService = binder.getService();
            mbound = true;
        }

        @Override
        public void onServiceDisconnected(ComponentName name) {
            // TODO Auto-generated method stub
            mbound = false;

        }
    };

    public void onClick(View view)
    {
        if(mbound)
        {
            int num = mService.getRandomNumber();
            Toast.makeText(this, "number: "+num, Toast.LENGTH_SHORT).show();
        }
    }
} 
```

# c# - 如何将 Windows 窗体控件应用于 WPF 自定义控件库？

> ID：15969639
> 
> 赞同：0
> 
> 时间：2013-04-12T11:00:33.100
> 
> 标签：c#, wpf, winforms, wpf-controls

我正在尝试将 Windows 窗体控件（来自以前版本的项目）封装到 WPF 自定义控件库。因为我想在未来的 Wpf 应用程序中使用它（比如从 VS 工具箱中拖放）。我成功地做到了这一点：[Wpf App 中的 WinForms](http://www.example.com/)。你知道解释这些事情的网站/或教程吗？

我得到了什么：带有 WinForms 控件的 .dll、Wpf 自定义控件库项目（用于放置 WinForms 控件）和 Wpf 应用程序。

感谢您的帮助和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:49:58.087

SonerGönül 指的是，如果您阅读他指出的链接。您可以看到您应该更好地执行此步骤：

*   *做你的作业*

    关于如何实现你想做的事情，到处都有很多例子。在 Google 上搜索类似“如何在 wpf 中托管 winforms”之类的内容，您将获得大量链接，例如：http: [//msdn.microsoft.com/en-us/library/ms751761.aspx](http://msdn.microsoft.com/en-us/library/ms751761.aspx) 甚至过去在此站点上完成的问题。

*   *要具体，使其与他人相关*

    你需要提出一个更明确的问题。像其他人一样阅读您的问题，并思考您是否能够正确理解它。

这个网站的人希望看到你努力解决你的问题，因此你可以提及你已经做过的事情，并提出一个具体的问题。就像“我实施了这个网站的建议，但我得到了这个例外”

**回答你的问题**

我真的很喜欢这个网站：[混合 WPF 和 WinForms](https://www.simple-talk.com/dotnet/.net-framework/mixing-wpf-and-winforms/)

因为它通过示例为您提供了混合 WPF 和 Winforms 如何工作的很好的双方解释。

# html - 输入中每个字母的宽度相同

> ID：15969641
> 
> 赞同：1
> 
> 时间：2013-04-12T11:00:50.087
> 
> 标签：html, css, mobile

我有一个输入，其样式使它看起来像有 5 个输入。它只接受字母 ([az])

![在此处输入图像描述](https://i.stack.imgur.com/ZKMfY.png)

我想做的是给该输入中的 5 个字母相同的宽度，以便每个字母都居中以防止这样的事情

![在此处输入图像描述](https://i.stack.imgur.com/DzYV5.png)

这是这个输入的 CSS

```
input {
  min-height: 0;
  min-width: 0;
  font-size: 2em;
  line-height: 1.4;
  letter-spacing: 1.18em;
  text-align: left;
  padding: 0 0 0 0.55em;
  display: block;
  position: relative;
  width: 6em;
}

input::after {
  content: attr(data-content);
  display: block;
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  padding-left: .55em;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T12:55:08.753

正如@HeikoRupp 在评论中所建议的那样，使用固定宽度的字体。但是不要使用 Courier，因为它是最糟糕的选择，而且在旧系统中它甚至可能是位图字体（因此仅在几种字体大小下看起来可以容忍）。在实践中，在现代 Windows 系统中，Courier 这个名称指的是 Courier New（除非系统确实安装了 Courier），这有点好，但值得怀疑。

部分基于[字体调查](http://www.codestyle.org/css/font-family/sampler-Monospace.shtml)，我建议如下：

```
input { font-family: Consolas, Monaco, Lucida Console, monospace } 
```

通用名称`monospace`意味着将使用系统的默认等宽字体。在 Android 上，这意味着 Droid Mono，这是默认情况下唯一可用的等宽字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:14:48.737

也许试试这个插件：[https ://github.com/davatron5000/Lettering.js](https://github.com/davatron5000/Lettering.js)

```
lettering(); 
```

示例：http: [//jsfiddle.net/krMhR/](http://jsfiddle.net/krMhR/)

# java - 为 JNI 控制的字段选择哪种可见性？

> ID：15969647
> 
> 赞同：1
> 
> 时间：2013-04-12T11:01:08.313
> 
> 标签：java, java-native-interface

我有一个 Java 类，它包含一个仅由本机 JNI 方法使用的本机句柄指针。让我们以这个类（位于[http://thebreakfastpost.com/2012/01/23/wrapping-ac-library-with-jni-part-1/](http://thebreakfastpost.com/2012/01/23/wrapping-a-c-library-with-jni-part-1/)）为例：

```
public class Plugin
{
    private long nativeHandle;

    protected Plugin(long handle) {
        nativeHandle = handle;
    }

    public native String getIdentifier();
    public native String getName();
    public native String getDescription();
    public native int getPluginVersion(); 
```

}

所以这个例子中的句柄是私有的。JNI 不关心可见性。但是像 Eclipse 中的源代码分析器会抱怨该字段，因为它没有被使用。Eclipse 不知道有一些 JNI 代码可以访问该字段。

将字段设置为受保护或公共也是一个坏主意，因为这样可以从外部（直接或通过扩展类）修改句柄，这会导致崩溃。Package-private 并没有那么糟糕，但是像 checkstyle 这样的源代码分析器的默认设置抱怨编程风格不好。

当然，我可以添加`@SuppressWarnings("unused")`注释以使 eclipse 警告静音，或者我可以添加一些注释，以便 checkstyle 忽略该问题或完全禁用 checkstyle 中的检查。但我不确定是否需要这样做，或者我是否只是做错了。

那么，对于使用 JNI 代码的类中的本地句柄的可见性，是否有一些最佳实践？或者也许可以在 Java 代码中完全避免它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:11:32.580

看一下 java.lang.Thread src

```
/**
 * Dispatch an uncaught exception to the handler. This method is 
 * intended to be called only by the JVM.
 */
private void dispatchUncaughtException(Throwable e) {
    getUncaughtExceptionHandler().uncaughtException(this, e);
} 
```

Eclipse 会抱怨未使用的方法，但它仍然是私有的，注释有助于理解原因。

`@SuppressWarnings("unused")`IMO 是个好主意

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:08:18.467

除了禁用警告之外，我通常会尝试添加一个单元测试来检查字段的值。例如，您可以检查它是否非零并且对于不同的插件是不同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:01:41.780

嗯...也许我找到了替代方案。好吧，实际上有两种选择。两者都只是将私有值用于实际目的，因此代码分析器没有理由抱怨未使用的代码。

第一种选择是在`hashCode`and中使用本机句柄`equals`。这适用于本机句柄是某种主键的对象（例如设备句柄）。它不适用于使用一些其他数据来识别对象更有意义的对象（例如，用户对象可能已经具有用户 ID）。

```
public final Device
{
    /** The device handle. Set by native code. */
    private long handle;

    @Override
    public int hashCode()
    {
        final int prime = 31;
        int result = 1;
        result = prime * result + (int) (this.handle ^ (this.handle >>> 32));
        return result;
    }

    @Override
    public boolean equals(Object obj)
    {
        if (this == obj) return true;
        if (obj == null) return false;
        if (getClass() != obj.getClass()) return false;
        Device other = (Device) obj;
        if (this.pointer != other.pointer) return false;
        return true;
    }    
} 
```

第二种选择是简单地为本机句柄提供一个吸气剂。退回它是无害的，因为它仍然无法从外部修改。如果有人想编写自定义 JNI 代码，使用本机指针直接使用本机 C API 而不是使用 Java API 访问对象，它甚至可能很有用：

```
public final Device
{
    /** The device handle. Set by native code. */
    private long handle;

    public long getHandle()
    {
        return this.handle;
    }
} 
```

# php - PHP preg_replace 不会用多行替换普通字符串

> ID：15969648
> 
> 赞同：0
> 
> 时间：2013-04-12T11:01:08.580
> 
> 标签：php, xml, regex

我在这里遇到了一个非常奇怪的 preg_replace 问题（据我所知，这不是我第一次看到这个）。我有一个带有无效结构元素的 XML（结束标记缺少斜杠，中断解析器）：

```
<info> 
<datetime>2013.04.12 12:04:02</datetime> 
<info> 
```

我想要做的是：（`$xml = preg_replace('/<info>.*<info>/iu', '', $xml)`因为我实际上并不需要那个元素），但它不会替换。
我如何使它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T11:03:14.627

尝试将`s`修饰符添加到正则表达式规则。不会在新行停止匹配

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T11:15:19.340

它不会替换，因为没有匹配项：

```
<?php

$xml = '<info>
    <datetime>2013.04.12 12:04:02</datetime>
<info>';
var_dump(preg_match('/<info>.*<info>/iu', $xml, $matches), $matches); 
```

```
int(0)
array(0) {
} 
```

让我们看看有什么问题。[究竟是什么`.`意思](http://es2.php.net/manual/en/regexp.reference.meta.php)？

> 匹配除换行符以外的任何字符（默认情况下）

就是这样！你如何更改默认值？我们查看了可用的[内部选项](http://es2.php.net/manual/en/regexp.reference.internal-options.php)并发现：

> `s`为了`PCRE_DOTALL`

.... [PCRE_DOTALL 表示](http://es2.php.net/manual/en/reference.pcre.pattern.modifiers.php)：

> s (PCRE_DOTALL)
> 如果设置了此修饰符，则模式中的点元字符匹配所有字符，包括换行符。没有它，换行符被排除在外。

我们可以在本地更改它：

```
'/<info>(?s:.*)<info>/iu'
          ^ 
```

...或全球：

```
'/<info>.*<info>/ius'
                   ^ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T11:10:35.757

添加`s`修饰符并使用`?`使其非贪婪：

```
$string = '<info> 
<datetime>2013.04.12 12:04:02</datetime> 
<info>
<valid>2013.04.12 12:04:02</valid>
<info> 
<datetime>2013.04.12 12:04:02</datetime> 
<info>';
var_dump(preg_replace('/<info>.*?<info>/s', '', $string)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T11:03:36.577

见[http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)

您需要在正则表达式的末尾使用 s 修饰符。

```
$xml = preg_replace('/<info>.*<info>/ius', '', $xml); 
```

# amazon-web-services - ec2-describe-instance-status Client.InvalidInstanceID.NotFound 但我知道实例存在

> ID：15969649
> 
> 赞同：24
> 
> 时间：2013-04-12T11:01:15.473
> 
> 标签：amazon-web-services, amazon-ec2, amazon-elb, aws-cli

我已经设置了一些亚马逊 AWS CLI 工具（EC2、Auto Scaling、监控和 ELB）。这些工具设置正确并且工作正常。我的环境变量都设置好了，与这个 Q 相关的是：

```
export EC2_REGION=eu-west-1
export EC2_URL=https://ec2.$EC2_REGION.amazonaws.com
export AWS_ELB_URL=https://elasticloadbalancing.$EC2_REGION.amazonaws.com 
```

当我为我`ec2-describe-instance-status i-XXXXXXXX`的任何实例运行时，我得到：

```
Client.InvalidInstanceID.NotFound: The instance ID 'i-XXXXXXXX' does not exist 
```

我知道实例 ID 存在，我将它从 AWS Web 控制台复制出来，它位于 eu-west-1 区域中，并且我的 env vars 设置为该区域。

对于我的生活，我无法弄清楚为什么它找不到我的实例。有什么明显的地方我做错了吗？

更新：重新创建 x509 cert/pk 解决了这个问题……出于某种原因。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-09-23T10:24:54.757

我有同样的问题。这是因为我没有为我的命令定义一个区域。我假设它会列出所有地区的所有实例，但它默认为`us-west-1`并且我在那里没有任何实例。

为了描述我在爱尔兰的机器，我使用以下内容：

`ec2-describe-instances --region eu-west-1`
*注意：我在别处定义我的 AWS 访问密钥和秘密。*

为了避免这个问题继续发生，我现在通过我的 linux 和 windows 机器上的[环境变量](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/SettingUp_CommandLine.html#set_ec2_url_linux)`EC2_URL=https://ec2.eu-west-1.amazonaws.com`设置我的区域： 这样我就不必在命令行上明确说明。

**2014 年 5 月更新**您还可以通过将以下行添加到`~/.aws/config`您的主文件夹中的文件来设置区域（未在 Windows 上测试）。这是我现在首选的方法，尤其是在我的 VM 和容器上：

```
[default]
region = eu-west-1 
```

有关更多信息，请参阅[此处的官方文档。](http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/set-up-ec2-cli-linux.html)

**2021 年 5 月更新** 由于我现在在这么多区域工作，因此我使用隐式和临时环境变量来为该命令定义我的区域，并且在我的区域中**没有**默认值，`.aws/config`这可能很危险。这也使 bash 脚本编写更容易，因为我可以为整个脚本/实用程序定义它。打字要多一点，但更安全、更灵活、更透明，例如：

```
AWS_DEFAULT_REGION=eu-central-1 aws ec2 describe-instances

# or for a script/utility
AWS_DEFAULT_REGION=us-east-1 ./tagInstances.sh 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T11:30:24.130

奇怪的问题——像往常一样，在软件开发中遇到奇怪的事情时，首先应该质疑假设：

> 我知道实例 ID 存在，我将它从 AWS Web 控制台复制出来，它位于 eu-west-1 区域中，并且我的 env vars 设置为该区域。

因此，实例 ID 源自与您要使用它的环境不同的环境 - 我会尝试通过相同的环境派生实例 ID，即：

```
ec2-describe-instances 
```

我冒险猜测该列表不会返回您期望的实例。这表明您正在使用属于另一个账户的 AWS 凭证，或者这些凭证没有通过[IAM 策略分配的所需](http://docs.aws.amazon.com/IAM/latest/UserGuide/PoliciesOverview.html)[Amazon EC2](http://aws.amazon.com/ec2/)读取权限。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-07-21T01:44:20.170

就我而言，我在`~/.aws/credentials`. 要指定凭证标签，请使用

`aws ec2 describe-instances --instance-id <your-instance-id> --profile <your-profile-name> --region <your-region>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-29T11:48:13.923

我有一个类似的问题，我在这里为任何能发现它有帮助的人写下解决方案。

我在几个小时内被这个错误困住了。

```
Client.InvalidInstanceID.NotFound: The instance ID 'i-XXXXXXXX' does not exist 
```

最后我发现发生了什么：我的实例位于与默认区域不同的区域（美国东部（弗吉尼亚北部）），我必须更新此信息。默认情况下，这些命令仅查找默认区域中的实例！

它在文档部分*（可选）中进行了解释：设置区域* [http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/SettingUp_CommandLine.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/SettingUp_CommandLine.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-05T07:38:05.470

这是非常简单的问题。如果您收到此错误

```
Client.InvalidInstanceID.NotFound: The instance ID 'i-XXXXXXXX' does not exist 
```

然后按照步骤操作。

1.  [在此处](https://i.stack.imgur.com/auQVC.png)查看您的实例所在的国家/地区

现在输入`root@Indian:~# aws configure`

进入

`AWS Access Key ID [****************D7M2]:`

`AWS Secret Access Key [****************2h3r]:`

`Default region name [us-east-1]:`

> 当询问默认区域时，更改实例所在的区域。例如：us-east-2。然后按 Enter。实际上，这些是可用区域名称“RegionNames”的列表

```
 "Regions": [
    {
        "RegionName": "ap-south-1",
        "Endpoint": "ec2.ap-south-1.amazonaws.com"
    },
    {
        "RegionName": "eu-west-2",
        "Endpoint": "ec2.eu-west-2.amazonaws.com"
    },
    {
        "RegionName": "eu-west-1",
        "Endpoint": "ec2.eu-west-1.amazonaws.com"
    },
    {
        "RegionName": "ap-northeast-2",
        "Endpoint": "ec2.ap-northeast-2.amazonaws.com"
    },
    {
        "RegionName": "ap-northeast-1",
        "Endpoint": "ec2.ap-northeast-1.amazonaws.com"
    },
    {
        "RegionName": "sa-east-1",
        "Endpoint": "ec2.sa-east-1.amazonaws.com"
    },
    {
        "RegionName": "ca-central-1",
        "Endpoint": "ec2.ca-central-1.amazonaws.com"
    },
    {
        "RegionName": "ap-southeast-1",
        "Endpoint": "ec2.ap-southeast-1.amazonaws.com"
    },
    {
        "RegionName": "ap-southeast-2",
        "Endpoint": "ec2.ap-southeast-2.amazonaws.com"
    },
    {
        "RegionName": "eu-central-1",
        "Endpoint": "ec2.eu-central-1.amazonaws.com"
    },
    {
        "RegionName": "us-east-1",
        "Endpoint": "ec2.us-east-1.amazonaws.com"
    },
    {
        "RegionName": "us-east-2",
        "Endpoint": "ec2.us-east-2.amazonaws.com"
    },
    {
        "RegionName": "us-west-1",
        "Endpoint": "ec2.us-west-1.amazonaws.com"
    },
    {
        "RegionName": "us-west-2",
        "Endpoint": "ec2.us-west-2.amazonaws.com"
    }
]
} 
```

`Default output format [None]:`

**将输出格式留空，然后按 Enter。现在你完成了**

现在在控制台中输入

```
root@Indian-3543:~# aws ec2 describe-instance --instance-id i-06343434322t 
```

让快乐快乐

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-28T16:28:38.273

我通过将 EC2_URL 从“ [https://ec2.ap-southeast-1.amazonaws.com](https://ec2.ap-southeast-1.amazonaws.com) ”更改为“ec2.ap-southeast-1.amazonaws.com”解决了这个问题

# jquery - Adding background images to navigation menu in wordpress and change images dynamicaly

> ID：15969650
> 
> 赞同：0
> 
> 时间：2013-04-12T11:01:17.277
> 
> 标签：jquery, css, wordpress

In my wordpress home page having navigation menus , so i want to add 4 different images to first 4 navigation menu's then if 5th menu is available then gives 1st menus image as background likewise for 6th -> 2nd image , for 7th -> 3rd image, for 8th-> 4th image such sequence goes running till end of the menu list. So it continue the group of 4 series. So for navigation images i uses the **unorderd list** this tag . So please help me out.. I am suck on that problem.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:27:42.117

In case of this HTML markup

```
<ul id="menu">
    <li>item 1</li>
    <li>item 2</li>
    <li>item 3</li>
    <li>item 4</li>
    <li>item 5</li>
    <li>item 6</li>
    <li>item 7</li>
    <li>item 8</li>
    <li>item 9</li>
</ul> 
```

you can use `:nth-child()` selector.

Here is CSS:

```
#menu {
    list-style-type: none;
}

#menu li:nth-child(4n-3) {
    background: red;
}
#menu li:nth-child(4n-2) {
    background: green;
}
#menu li:nth-child(4n-1) {
    background: blue;
}
#menu li:nth-child(4n) {
    background: silver;
} 
```

Just replace colors in `background` property with images you want to use for background.

[http://cssdeck.com/labs/csfcyj5t](http://cssdeck.com/labs/csfcyj5t)

# c# - 以 OO 方式组合对象属性

> ID：15969654
> 
> 赞同：3
> 
> 时间：2013-04-12T11:01:30.313
> 
> 标签：c#, design-patterns

我有一种情况，我必须发送邮件 A，有时我必须发送邮件 B，但也有一种情况，我想发送一封由邮件 A 和邮件 B 组合而成的邮件。

例如，邮件 A 的主题为“邮件 A 的主题”。邮件 B 的主题是“这是邮件 B 的主题”。现在我遇到了我想要这个作为我的主题的情况：'邮件 A 的主题/这是邮件 B 的主题'

如何使用 OO 方式实现这一目标？

我已经有两个单独的 mailA 和 mailB 类。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T11:05:57.090

假设您有一个具有两个属性的基类`Mail`或接口，并且您可以创建一个派生类：`IMail``Subject``Body``CompositeMail`

```
public class CompositeMail : Mail
{
    private readonly List<Mail> _mails;

    public CompositeMail(params Mail[] mails) : this(mails.AsEnumerable())
    {
    }

    public CompositeMail(IEnumerable<Mail> mails)
    {
        if(mails == null) throw new ArgumentNullException("mails");

        _mails = mails.ToList();
    }

    public override string Subject
    {
        get { return string.Join("/", _mails.Select(x => x.Subject)); }
    }

    public override string Body
    {
        get
        {
            return string.Join(Environment.NewLine, _mails.Select(x => x.Body));
        }
    }
} 
```

这是[复合模式](http://en.wikipedia.org/wiki/Composite_pattern)的缩写实现。“缩写”，因为它不包含添加、删除或枚举子项的方法。如果要添加此功能，只需`CompositeMail`另外实现`ICollection<Mail>`.

你可以像这样实例化它：

```
var compositeMail = new CompositeMail(mailA, mailB); 
```

您可以在使用普通邮件的任何地方使用此实例，因为它派生自`Mail`您在其他地方使用的类。

# c++ - 使用指向基类的指针访问受保护的继承成员

> ID：15969658
> 
> 赞同：0
> 
> 时间：2013-04-12T11:01:38.107
> 
> 标签：c++

有人可以解释为什么这段代码不起作用。

```
class A
{
public:
    A(void){}
    virtual ~A(void){}
protected:
    A* parent;
};

class B : public A
{
public:
    B(void){parent = new B;}
    ~B(void){delete parent;}
protected:
    int a;
};

class C : public B
{
public:
    C(void){}
    virtual ~C(void){}
    void f(void){ ((B*)parent)->a; }
}; 
```

怎么可能`C`无法访问成员`B`？

如果我转换`parent`为 a`C*`而不是 a`B*`它工作正常。但我不希望用户承担任何不必要的风险。有更清洁的访问方式`a`吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T11:14:16.773

从`C`类的对象中，您可以访问 的受保护成员`B`，但前提是它们是类的某个对象的一部分`C`（可能是您的，也可能不是）。换句话说，`a`要从访问`C`，您需要指向 的指针（或引用）`C`。这就是`protected`修饰符的意思。

其原因如下。`((B*)parent)`指针可能指向 的某个其他子类，与`B`完全不同`C`，并且该子类可能具有`a`不可访问的成员。

# php - Extjs+PHP-文件上传错误-试图解码无效的 JSON 字符串：

> ID：15969659
> 
> 赞同：1
> 
> 时间：2013-04-12T11:01:41.570
> 
> 标签：php, file-upload, extjs4

我正在使用 extjs+PHP[yii 框架]。我正在研究文件上传控制。我有查看代码为-

```
Ext.define('Balaee.view.kp.dnycontent.Content', 
{
    extend:'Ext.form.Panel',
    requires:[
              'Balaee.view.kp.dnycontent.ContentView'
              ],
    id:'ContentId',
    alias:'widget.Content',
    enctype : 'multipart/form-data', 
    title:'This day in a history',
    items:[
        {
        xtype: 'fileuploadfield',
        hideLabel: true,
        emptyText: 'Select a file to upload...',
        //inputType: 'file',
        id: 'upfile',
        name:'file',
        width: 220
}],

   buttons: [{
        xtype : 'button',
        fieldlabel:'upload',
        action:'upload',
        name:'upload',
        text: 'Upload',
        formBind:'true',
       handler: function() {
            var form = this.up('form').getForm();
            if(form.isValid()){
                form.submit({
                    url: 'index.php/QuestionBank/Qbpaper/getFile',
                    waitMsg: 'Uploading your photo...',
                  //  uploadPath:'/app/model',
                    success: function(fp, o) {
                        Ext.Msg.alert('Success', 'Your photo "' + o.result.file + '" has been uploaded.');
                    }
                });} } }]}); 
```

我已经编写了上面的代码来从 extjs4 发送文件。我的服务器端是 PHP [Yii 框架]。在服务器端，我编写了代码来接收这个文件——

```
public function actiongetFile()
    {
        $fileName = $_FILES['upfile']['name'];
        $fileSize = $_FILES['upfile']['size'];
        $fileType = $_FILES['upfile']['type'];
        $fp      = fopen($fileName, 'r');
        $content = fread($fp, filesize($fileName));
        $content = addslashes($content);
        fclose($fp);
        if(!get_magic_quotes_gpc()){
            $fileName = addslashes($fileName);
        } 
```

但服务器端代码无法正常工作。从 extjs 发送文件时，它给出的错误是-“Ext.Error: You're trying to decode an invalid JSON String: PHP notice Undefined index: upfile” 所以在 php 中如何访问通过 extjs4 发送的文件。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:03:52.810

```
name:'file' 
```

这 ^ 是您在数组中的文件的索引。

`id`是内部的，但是`name`是提交的标签。

试试看。利用：

```
$_FILES['file']['name'] 
```

代替：

```
$_FILES['upfile']['name'] 
```

# twitter-bootstrap - 使用 ng-repeat 创建“网格”布局

> ID：15969661
> 
> 赞同：5
> 
> 时间：2013-04-12T11:01:49.910
> 
> 标签：twitter-bootstrap, angularjs

我试图解决的情况就是这样，我对如何解决这个问题有点困惑。我正在使用`ng-repeat`我在这里陈述的每一点，如果可能的话，我打算在最终解决方案中使用它。

*   我有一个对象数组，所有格式都完全相同。（安全地假设这是真的）
*   每个对象都有一个属性列表。
*   我希望将它们排列在 >2 列的网格中，并且会有任意大量的行。
*   每个网格位置将显示该位置中对象的属性。
*   列数不需要动态改变。

>2 列要求是我了解如何进行一列或两列网格布局（一列是无序且无样式的列表，两列使用`ng-even`or`ng-odd`并使用 css 创建新行）。

**所以问题基本上是这样的：对于一个大小的数组`N`和一个大小的列数`M`（ ），我可以在仍然使用的同时创建一个每行元素的元素`M<N`网格吗？`N``M``ng-repeat`**

如果可能的话，我宁愿不只插入`<br>`每个`M`元素——因为我使用`ng-repeat`的每个元素都应该具有我在`ng-repeat`这似乎不是正确的做法。

同样使用表格使我处于与以前相同的情况，我仍然需要对每个`M`元素进行不同的操作。

有没有一种干净的方法可以在角度上做到这一点？

值得注意的是，我也在使用`twitter-bootstrap`，所以我也会欢迎 css 解决方案。

在此先感谢，如果我遗漏了一些明显的东西，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T12:41:51.920

我真的不知道这是否是您正在寻找的（如果不是，请提供一个示例 - json 数据数组也可以！）

这是一个显示 MxN 数据的 plunk（数组！-如果您愿意，也可以将其设为对象）

[http://plnkr.co/edit/TgKA0cQ80Vo3vWztxFw4?p=preview](http://plnkr.co/edit/TgKA0cQ80Vo3vWztxFw4?p=preview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-08T17:47:55.783

我也有同样的问题，不幸的是，一张桌子对我的用例不起作用。即使`col-md-6`在`row`.

# windows - 确保在任何给定时间仅运行 1 个 PowerShell 脚本实例

> ID：15969662
> 
> 赞同：13
> 
> 时间：2013-04-12T11:01:56.100
> 
> 标签：windows, powershell

我正在 PowerShell v1 中编写一个批处理脚本，它将被安排运行，假设每分钟运行一次。不可避免地，工作需要超过 1 分钟才能完成，现在我们有两个脚本实例正在运行，然后可能有 3 个，等等......

我想通过让脚本本身检查是否有自己的实例已经在运行来避免这种情况，如果是，则脚本退出。

我已经在 Linux 上用其他语言完成了此操作，但从未在 Windows 上使用 PowerShell 完成此操作。

例如，在 PHP 中，我可以执行以下操作：

```
exec("ps auxwww|grep mybatchscript.php|grep -v grep", $output);
if($output){exit;} 
```

PowerShell v1 中有这样的东西吗？我还没有遇到过这样的事情。

在这些常见模式中，哪一种模式最适合频繁运行 PowerShell 脚本？

1.  锁定文件
2.  操作系统任务计划程序
3.  带有睡眠间隔的无限循环

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-11-06T20:07:01.820

这是我的解决方案。它使用命令行和进程 ID，因此无需创建和跟踪任何内容。它并不关心您如何启动脚本的任何一个实例。

以下应该按原样运行：

```
 Function Test-IfAlreadyRunning {
    <#
    .SYNOPSIS
        Kills CURRENT instance if this script already running.
    .DESCRIPTION
        Kills CURRENT instance if this script already running.
        Call this function VERY early in your script.
        If it sees itself already running, it exits.

        Uses WMI because any other methods because we need the commandline 
    .PARAMETER ScriptName
        Name of this script
        Use the following line *OUTSIDE* of this function to get it automatically
        $ScriptName = $MyInvocation.MyCommand.Name
    .EXAMPLE
        $ScriptName = $MyInvocation.MyCommand.Name
        Test-IfAlreadyRunning -ScriptName $ScriptName
    .NOTES
        $PID is a Built-in Variable for the current script''s Process ID number
    .LINK
    #>
        [CmdletBinding()]
        Param (
            [Parameter(Mandatory=$true)]
            [ValidateNotNullorEmpty()]
            [String]$ScriptName
        )
        #Get array of all powershell scripts currently running
        $PsScriptsRunning = get-wmiobject win32_process | where{$_.processname -eq 'powershell.exe'} | select-object commandline,ProcessId

        #Get name of current script
        #$ScriptName = $MyInvocation.MyCommand.Name #NO! This gets name of *THIS FUNCTION*

        #enumerate each element of array and compare
        ForEach ($PsCmdLine in $PsScriptsRunning){
            [Int32]$OtherPID = $PsCmdLine.ProcessId
            [String]$OtherCmdLine = $PsCmdLine.commandline
            #Are other instances of this script already running?
            If (($OtherCmdLine -match $ScriptName) -And ($OtherPID -ne $PID) ){
                Write-host "PID [$OtherPID] is already running this script [$ScriptName]"
                Write-host "Exiting this instance. (PID=[$PID])..."
                Start-Sleep -Second 7
                Exit
            }
        }
    } #Function Test-IfAlreadyRunning

    #Main
    #Get name of current script
    $ScriptName = $MyInvocation.MyCommand.Name 

    Test-IfAlreadyRunning -ScriptName $ScriptName
    write-host "(PID=[$PID]) This is the 1st and only instance allowed to run" #this only shows in one instance
    read-host 'Press ENTER to continue...'  # aka Pause

    #Put the rest of your script here 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-12T11:28:45.323

如果脚本是使用 powershell.exe -File 开关启动的，您可以检测到进程命令行属性中存在脚本名称的所有 powershell 实例：

```
Get-WmiObject Win32_Process -Filter "Name='powershell.exe' AND CommandLine LIKE '%script.ps1%'" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-12T11:23:36.533

加载 Powershell 实例并非易事，每分钟加载一次都会给系统带来大量开销。我只需安排一个实例，然后编写脚本以在进程-睡眠-进程循环中运行。通常我会使用秒表计时器，但我认为他们在 V2 之前不会添加这些计时器。

```
$interval = 1
while ($true)
 {
  $now = get-date
  $next = (get-date).AddMinutes($interval)

  do-stuff

  if ((get-date) -lt $next)
    {
     start-sleep -Seconds (($next - (get-date)).Seconds)
    }
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T12:12:57.233

“总是”最好让“最高进程”处理这种情况。该进程应在​​运行第二个实例之前检查这一点。所以我的建议是使用任务计划程序为您完成这项工作。这也将消除可能的权限问题（在没有权限的情况下保存文件），并且它将保持您的脚本干净。

在任务计划程序中配置任务时，您可以在“设置”下选择：

```
If the task is already running, then the following rule applies: 
Do not start a new instace 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T11:20:04.793

我不知道有一种方法可以直接做你想做的事。您可以考虑改用外部锁。当脚本启动时，它会更改注册表项、创建文件或更改文件内容或类似的东西，当脚本完成时，它会反转锁定。同样在设置锁之前的脚本顶部，需要检查以查看锁的状态。如果它被锁定，则脚本退出。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-02T08:53:39.873

```
$otherScriptInstances=get-wmiobject win32_process | where{$_.processname -eq 'powershell.exe' -and $_.ProcessId -ne $pid -and $_.commandline -match $($MyInvocation.MyCommand.Path)}
if ($otherScriptInstances -ne $null)
{
    "Already running"
    cmd /c pause
}else
{
    "Not yet running"
    cmd /c pause
} 
```

您可能想要更换

```
$MyInvocation.MyCommand.Path (FullPathName) 
```

和

```
$MyInvocation.MyCommand.Name (Scriptname) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-03-04T16:38:26.897

这是 Win32 应用程序通常使用的经典方法。它是通过尝试创建一个命名的[事件对象](https://docs.microsoft.com/en-us/windows/win32/api/synchapi/nf-synchapi-createeventw)来完成的。在 .NET 中存在一个 wrapper class [`EventWaitHandle`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.eventwaithandle)，这也使得它在 PowerShell 中也很容易使用。

```
$AppId = 'Put-Your-Own-GUID-Here!'
$CreatedNew = $false
$script:SingleInstanceEvent = New-Object Threading.EventWaitHandle $true, ([Threading.EventResetMode]::ManualReset), "Global\$AppID", ([ref] $CreatedNew)
if( -not $CreatedNew ) {
    throw "An instance of this script is already running."
} 
```

**笔记：**

*   确保`$AppId`它是真正唯一的，当您为其使用随机 GUID 时，它会被完全填充。
*   `$SingleInstanceEvent`只要脚本正在运行，该变量就应该存在。`script`像我上面那样把它放在范围内，通常就足够了。
*   事件对象是在“全局”[内核命名空间](https://docs.microsoft.com/en-us/windows/win32/termserv/kernel-object-namespaces)中创建的，这意味着即使脚本已经在另一个客户端会话中运行（例如，当多个用户登录到同一台机器上时），它也会阻止执行。如果您想防止多个实例仅在当前客户端会话中运行，请替换`"Global\$AppID"`为。`"Local\$AppID"`
*   这不像 WMI（命令行）解决方案那样具有[竞争条件](https://stackoverflow.com/questions/15969662/assure-only-1-instance-of-powershell-script-is-running-at-any-given-time#comment56389302_15970187)，因为操作系统内核确保只能在所有进程中创建具有相同名称的事件对象的一个​​实例。

# ruby-on-rails - 从 datanoise-actionwebservice 执行 web_service 生成器时出错

> ID：15969664
> 
> 赞同：0
> 
> 时间：2013-04-12T11:01:57.420
> 
> 标签：ruby-on-rails, ruby, actionwebservice

我正在遵循[本指南](http://srikanthjeeva.blogspot.com/2009/11/action-web-service-gem.html)。

尝试使用`generate`脚本创建 web 服务时，出现以下错误：

```
in 'load_missing_constant': uninitialized constant ActionController::Request (NameError) 
```

注意我得到`::Request`，不是`::AbstractRequest`！

# networking - SMSC911x 驱动程序锁定在 Windows CE 设备上

> ID：15969671
> 
> 赞同：0
> 
> 时间：2013-04-12T11:02:09.870
> 
> 标签：networking, embedded, windows-ce, device-driver

我正在努力解决拔掉网络电缆时偶尔会锁定的 Windows CE 设备。它运行 Windows CE 5.0，网卡驱动程序是 SMSC911x。它运行的是 1.01 版，我不确定在哪里可以找到此驱动程序的源更新。有谁知道在哪里可以找到此驱动程序的更新和/或有任何经验与驱动程序在与类似设备的网络断开时没有表现？广泛的谷歌搜索揭示了许多 Linux 驱动程序，但在 CE 方面并不多。

问候，

弗雷迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:50:56.410

[我在此处页面底部的](http://www.smsc.com/Products/Ethernet_and_Embedded_Networking/Ethernet_Controllers/LAN9218/Download)SMSC 网站上看到了 CE 5.0 和 6.0 的下载。它在 LAN9218 页面上，但驱动程序适用于“LAN91xx/LAN92xx/LAN9311/LAN9312”，因此应该适用。

# php - MySQL数据库不同的插入

> ID：15969678
> 
> 赞同：0
> 
> 时间：2013-04-12T11:02:28.840
> 
> 标签：php, mysql, phpmyadmin

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:28:08.003

在mysql连接之后，在任何查询之前，使用这个：

```
mysql_connect(...);
mysql_select_db(...);
mysql_query("SET NAMES 'utf8'"); 
```

从那时起，您可以使用查询和 utf8 字符将正确显示。

更新：

不要忘记放入`<meta http-equiv="Content-Type" content="text/html; charset=utf-8">`您的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:10:44.000

PhpMyAdmin 可能已为连接正确配置了字符集，但您的脚本没有。

确保您已[正确配置字符集](http://dev.mysql.com/doc/refman/5.0/en/charset-connection.html)，例如通过语句：

```
SET CHARACTER SET 'UTF-8';
SET NAMES 'UTF-8'; 
```

在将任何内容推送到 DB 之前（如果您使用`latin1`而不是`UTF-8`作为表字符集，则应该使用`latin1`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:09:45.590

默认情况下，您的 MySql 服务器不期望 UTF8，请先运行以下查询

```
SET NAMES 'utf8'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T11:05:32.730

也许您需要对字符串进行编码..

```
$myText = utf8_encode('MyText');

INSERT INTO `table`(`attr`) 
                      VALUES (
                      '$myText',
                      ...
                      ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T11:07:46.883

检查您的[字符集文档](http://dev.mysql.com/doc/refman/5.1/en/charset-connection.html)`charset`的和`collations``table`

# java - 使用 libgdx 和 mt4j 使用 Java 中的跨平台多点触控和图形

> ID：15969684
> 
> 赞同：4
> 
> 时间：2013-04-12T11:02:44.867
> 
> 标签：java, libgdx, multi-touch, mt4j

我有一个用 libgdx 构建的跨平台应用程序。该软件通常与带有 Windows (7 & 8) 和 MacOS 的大型触摸屏（如微软咖啡桌）结合使用。这些屏幕具有多点触控功能，但我只实现了单点触控，并希望实现多点触控。我在这里问几个问题，以防知识渊博的人可以为我节省大量时间来测试未记录且无法通过谷歌搜索的 AFAIK 假设：

- libgdx 是否支持 win7 多点触控界面？赢8？

-如果我必须求助于 mt4j，它可以在没有 3d 引擎层的情况下使用吗？哎呀，我什至不需要手势识别，只需要手指的低级状态。我无法用 mt4j 替换 10000 多行 libgdx！

- 有没有人尝试过 sparsh-ui 作为 mt4j 的替代品？支持win7多点触控吗？

感谢您提供有关这些问题的任何信息！干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-01T09:36:30.953

据我所知，多点触控应该没有问题。因为 libgdx 鼠标按下和触摸是一回事，所以 win7 和 win8 应该没有问题。
和方法给你一个`touchDown`，`touchUp`它描述了触摸的次数。因此，如果您用 4 根手指触摸，则with描述了第 4 根手指的触摸。您可以[在此处](https://github.com/libgdx/libgdx/wiki/Polling)阅读相关内容。 请注意，我没有对此进行测试，因为我没有 win7/8 触摸设备。所以你必须自己测试它，但正如我所说它应该工作。让我知道它是否有效。谢谢`touchDragged``int pointer``touchDown``pointer = 4`

# java - opengl camera rotation around object

> ID：15969686
> 
> 赞同：0
> 
> 时间：2013-04-12T11:02:47.350
> 
> 标签：java, android, opengl-es-2.0

I'm fighting with the code, to make it rotate camera around the object. The code that I'm using is:

`eyeX = (float) (obj.x + 500*Math.cos(Math.toRadians(angle))*Math.sin(Math.toRadians(angle))); eyeY = (float) (obj.y + 500*Math.sin(Math.toRadians(angle))*Math.sin(Math.toRadians(angle))); eyeZ = (float) (obj.z + 500*Math.cos(Math.toRadians(angle))); Matrix.setLookAtM(mViewMatrix, 0, eyeX, eyeY, eyeZ, obj.x, obj.y, obj.z, 0, 1, 0);`

Where obj is the model I want to rotate the camera around, and angle is incremented by 1 with every draw. Can somebody shed a light to this problem, what I'm doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:03:25.850

您想要实现什么精确的相机运动？如果您想在 XZ 平面上转动 obj 并保持恒定高度，您应该这样做：

eyeX = (float)(obj.x + 500*Math.cos(Math.toRadians(angle));

eyeY = (float)(y0); //恒定高度

eyeZ = (float)(obj.z + 500*Math.sin(Math.toRadians(angle));

此外，如果 y0 != 0，则 (0, 1, 0) 不是正确的“向上”向量，并且会扭曲您的视图。

# iphone - 使用 iOS 中已知模数和指数密钥的 RSA 算法加密 NSString

> ID：15969687
> 
> 赞同：1
> 
> 时间：2013-04-12T11:02:49.350
> 
> 标签：iphone, ios, objective-c, rsa

在 iOS 应用程序中，我需要使用 RSA 算法加密 NSString，我知道公共模数和指数密钥。在 Android 方面，他们使用弹性城堡 ApI 进行 RSA 加密。有人可以帮我如何加密如何用这些加密 NSString公共模数和指数密钥可以生成与 Android 中类似的加密。我查看了许多可用的源代码，但无法生成正确的加密。任何帮助将不胜感激。Modulus key That I have is "117130940722358865944076735715016871148960803304334901248996815419815052552875336322790410991392433604701394608500231884113911915168625416296669114728862690539451024021812353340986348428958506523689933432584403548435474622224828221548841371083486321081622447517054022904372023020885356296462823306439795173749" Exponent is "65537"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:26:12.513

您可以为此使用 openSSL

[https://www.openssl.org/docs/man1.1.0/crypto/RSA_public_encrypt.html](https://www.openssl.org/docs/man1.1.0/crypto/RSA_public_encrypt.html)

```
#include <openssl/rsa.h>
 int RSA_public_encrypt(int flen, unsigned char *from,
    unsigned char *to, RSA *rsa, int padding);
 int RSA_private_decrypt(int flen, unsigned char *from,
     unsigned char *to, RSA *rsa, int padding); 
```

[通过在 iPhone 应用程序中使用 SSL 来](https://stackoverflow.com/questions/2128927/using-ssl-in-an-iphone-app-export-compliance)了解出口合规性 - 出口合规性

你可能会更好地尝试让 Common Crypto 等效于工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:58:21.987

在 iOS 中，您可能需要在没有像 OpenSSL 这样的额外库的情况下工作。但要做到这一点，您必须拥有某种“大数字”库。我没有使用 iOS，但搜索提到了“大数字”库，在这里讨论：[在 iOS 中存储和执行大数字操作](https://stackoverflow.com/questions/14160974/store-and-perform-operations-with-huge-numbers-in-ios) 使用这个库，您只需要 RSA 公式。快速搜索给出了这篇文章[http://www.linuxjournal.com/article/6695](http://www.linuxjournal.com/article/6695)，你不需要全部，只需向下滚动以提及 ModExp - 这是你需要加密消息时的操作键和模数可用。

# android - Android startForeground 通知消失

> ID：15969689
> 
> 赞同：4
> 
> 时间：2013-04-12T11:02:56.913
> 
> 标签：android, service, notifications

我的 android 应用程序启动了一项服务来收听耳机按钮。在服务运行时，我想显示一个通知。因为它不会被杀死也很重要，所以我决定在我的服务中使用 startForeground 函数。

在服务的 OnCreate 中，我启动 BuildNotification()：

```
 public void BuildNotification() {

    // Make sure the launch mode of the activity is singleTask, otherwise it will create a new one
    Intent intent = new Intent(this, ListItemsActivityScroll.class);
    PendingIntent pIntent = PendingIntent.getActivity(this, 0, intent, 0);

     // Build notification
     note = new NotificationCompat.Builder(this)
             .setContentTitle(getString(R.string.notification_text))
             .setSmallIcon(R.drawable.vp_launcher)
             .setContentText(getString(R.string.notification_content))
             .setContentIntent(pIntent).build();

     startForeground(1, note); 
  } 
```

第一次启动服务时，通知会显示并停留在状态栏中，直到服务被销毁。但是，如果第二次创建该服务，它只会显示几秒钟。

消失后，服务仍在运行。我还执行了“adb shell dumpsys 活动服务”，它确实显示了服务正在前台运行，并且还为我提供了设置为通知的正确标志：

```
isForeground=true foregroundId=1     foregroundNoti=Notification(contentView=com.example.mediabuttontest/0x10900a7 vibrate=null,sound=null,defaults=0x0,flags=0x62) 
```

0x62 标志表示以下处于活动状态：FLAG_FOREGROUND_SERVICE、FLAG_NO_CLEAR、FLAG_ONGOING_EVENT

我认为这对于保持通知处于活动状态是正确的。

有人理解这种行为吗？为什么它在第一次创建服务时起作用，但在第二次创建时不起作用？我的代码有错误吗？

**编辑**：感谢您的时间和评论，我创建了另一个测试应用程序并开始删除代码，直到问题消失。最后，它是由启用/禁用广播接收器组件引起的：

```
 pm.setComponentEnabledSetting(mRemoteControlResponder,
                PackageManager.COMPONENT_ENABLED_STATE_DISABLED,
                PackageManager.DONT_KILL_APP); 
```

不知何故，这使通知消失了。在文档中还提到“DONT_KILL_APP”可以使您的应用程序行为不可预测：

*设置时要小心，因为更改组件状态会使包含应用程序的行为变得不可预测。*

我想这是真的:)

# javascript - 你如何只使用正则表达式保留数字、逗号和点（出现在数字之间）？

> ID：15969691
> 
> 赞同：1
> 
> 时间：2013-04-12T11:03:07.197
> 
> 标签：javascript, regex

假设您有以下字符串：

```
var string = "This shirt, is very nice. It costs DKK 1.500,00"; 
```

我想要一个返回的函数`1.500,00`。

关键是，我只想允许逗号和点出现在数字之间，所以我不会得到：`,.1.500,00`

你会如何在 javascript 中使用正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:05:34.657

这个怎么样- `\b\d[.,\d]*\b`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:10:26.377

这似乎有效：

```
"This shirt, is very nice. It costs DKK ,.1.500,00,.".match(/(\d+\.\d+)+,\d+/g); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:13:52.920

这可能是必需的：

```
\d((?=([.,]\d|\d)).)* 
```

`\d`匹配一个数字

`(?=([.,]\d|\d))`是一个前瞻，它确保后面的字符是数字或 a`.`或`,`后跟数字。

`.`匹配任何字符并允许零次`*`或多次出现前面的模式

# c - 在linux内核编译的单独文件夹中制作.o文件

> ID：15969694
> 
> 赞同：10
> 
> 时间：2013-04-12T11:03:10.087
> 
> 标签：c, linux, compilation, linux-kernel

如果只是做make，请在linux内核编译中查看

```
make ARCH=xyz uImage 
```

然后它将根据您的 .conf 文件编译文件，并在您的 .c 文件所在的同一文件夹中创建 .o 或 .ko 。

那么有什么办法可以强制编译，以便所有 .o 和 .ko 都在我指定的不同文件夹中

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-12T13:26:27.780

尝试使用`make O=/path/to/mydir`

以下是内核 Makefile 中的文档：

```
# kbuild supports saving output files in a separate directory.
# To locate output files in a separate directory two syntaxes are supported.
# In both cases the working directory must be the root of the kernel src.
# 1) O=
# Use "make O=dir/to/store/output/files/"
#
# 2) Set KBUILD_OUTPUT
# Set the environment variable KBUILD_OUTPUT to point to the directory
# where the output files shall be placed.
# export KBUILD_OUTPUT=dir/to/store/output/files/
# make
#
# The O= assignment takes precedence over the KBUILD_OUTPUT environment
# variable. 
```

# c - 内核模式键盘过滤器拦截 - 双输出

> ID：15969699
> 
> 赞同：1
> 
> 时间：2013-04-12T11:03:15.253
> 
> 标签：c, windows, winapi, kernel, driver

我已经编辑了 WDK ***kbfiltr.c***回调例程来拦截`Esc`密钥并将其替换为“E”。
它的工作原理是它总是用 2 个“E”替换它。
所以按`Esc`会输出'ee'。这是代码：

```
{
PKEYBOARD_INPUT_DATA pCur = InputDataStart; 

PDEVICE_EXTENSION   devExt;
WDFDEVICE   hDevice;

hDevice = WdfWdmDeviceGetWdfDeviceHandle(DeviceObject);
devExt = FilterGetData(hDevice);

while (pCur < InputDataEnd)
{
ULONG consumed = 0;

if (pCur->MakeCode == 0x01) {//Esc
pCur->MakeCode = 0x12; //E
}
else{
pCur++;
continue;
}

// indicate one packet at a time
(*(PSERVICE_CALLBACK_ROUTINE)(ULONG_PTR) 
devExt->UpperConnectData.ClassService)(
devExt->UpperConnectData.ClassDeviceObject,
pCur,
pCur+1,
&consumed);
pCur++;
}
// tell the caller you consumed everything
*InputDataConsumed = (InputDataEnd-InputDataStart);

(*(PSERVICE_CALLBACK_ROUTINE)(ULONG_PTR) devExt->UpperConnectData.ClassService)(
devExt->UpperConnectData.ClassDeviceObject,
InputDataStart,
InputDataEnd,
InputDataConsumed);
} 
```

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:46:24.390

我认为这是编码错误。如下更改代码似乎可以使其正常工作。

```
 {
PKEYBOARD_INPUT_DATA pCur = InputDataStart; 

PDEVICE_EXTENSION   devExt;
WDFDEVICE   hDevice;

hDevice = WdfWdmDeviceGetWdfDeviceHandle(DeviceObject);
devExt = FilterGetData(hDevice);

while (pCur < InputDataEnd)
{
ULONG consumed = 0;

if (pCur->MakeCode == 0x01) {//Esc
pCur->MakeCode = 0x12; //E
}

// indicate one packet at a time
(*(PSERVICE_CALLBACK_ROUTINE)(ULONG_PTR) 
devExt->UpperConnectData.ClassService)(
devExt->UpperConnectData.ClassDeviceObject,
pCur,
pCur+1,
&consumed);
pCur++;
}
// tell the caller you consumed everything
*InputDataConsumed = (InputDataEnd-InputDataStart);

} 
```

# android - Android GCMIntentService BroadcastReceiver 得到常见的消息问题

> ID：15969700
> 
> 赞同：0
> 
> 时间：2013-04-12T11:03:20.567
> 
> 标签：android, google-cloud-messaging

之后我`Register` 在我的课堂`GCMRegistrar`上获得`regID`了 SuccessFully`MainActivity`

```
private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String newMessage = intent.getExtras().getString(EXTRA_MESSAGE);
            // Waking up mobile if it is sleeping               
              WakeLocker.acquire(getApplicationContext());          

                  Here Im getting Message Id store in my sharedPref and make Login

            // Releasing wake lock
            WakeLocker.release();
        }
    }; 
```

并将此`regID`传递给`myLogin`Api `SuccessFully`，并存储在 My 中`SharedPrefrence`，当从那时获得任何消息时再次存储`Server`我的`regId`密钥 Override 并再次将其传递给我的`login`Api。我想`server Message`分开`regId` `Message`

```
public class GCMIntentService extends GCMBaseIntentService {

    private static final String TAG = "GCMIntentService";

    public GCMIntentService() {
        super(SENDER_ID);
    }
    /**
     * Method called on device registered
     **/
    @Override
    protected void onRegistered(Context context, String registrationId) {
        Log.i(TAG, "Device registered: regId = " + registrationId);
        displayMessage(context, "Your device registred with GCM");
        Log.d("NAME", MainActivity.name);
        ServerUtilities.register(context, MainActivity.name, MainActivity.email, registrationId);
    }

    /**
     * Method called on device un registred
     * */
    @Override
    protected void onUnregistered(Context context, String registrationId) {
        Log.i(TAG, "Device unregistered");
        displayMessage(context, getString(R.string.gcm_unregistered));
        ServerUtilities.unregister(context, registrationId);
    }

    /**
     * Method called on Receiving a new message
     * */
    @Override
    protected void onMessage(Context context, Intent intent) {
        Log.i(TAG, "Received message");
        String message = intent.getExtras().getString("price");

        displayMessage(context, message);
        // notifies user
        generateNotification(context, message);
    }

    /**
     * Method called on receiving a deleted message
     * */
    @Override
    protected void onDeletedMessages(Context context, int total) {
        Log.i(TAG, "Received deleted messages notification");
        String message = getString(R.string.gcm_deleted, total);
        displayMessage(context, message);
        // notifies user
        generateNotification(context, message);
    }

    /**
     * Method called on Error
     * */
    @Override
    public void onError(Context context, String errorId) {
        Log.i(TAG, "Received error: " + errorId);
        displayMessage(context, getString(R.string.gcm_error, errorId));
    }

    @Override
    protected boolean onRecoverableError(Context context, String errorId) {
        // log message
        Log.i(TAG, "Received recoverable error: " + errorId);
        displayMessage(context, getString(R.string.gcm_recoverable_error,errorId));
        return super.onRecoverableError(context, errorId);
    }

    /**
     * Issues a notification to inform the user that server has sent a message.
     */
    private static void generateNotification(Context context, String message) {
        int icon = R.drawable.ic_launcher;
        long when = System.currentTimeMillis();
        NotificationManager notificationManager = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(icon, message, when);

        String title = context.getString(R.string.app_name);        
        Intent notificationIntent = new Intent(context, MainActivity.class);
        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP|Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
        notification.setLatestEventInfo(context, title, message, intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;        
        // Play default notification sound
        notification.defaults |= Notification.DEFAULT_SOUND;        
        //notification.sound = Uri.parse("android.resource://" + context.getPackageName() + "your_sound_file_name.mp3");        
        // Vibrate if vibrate is enabled
        notification.defaults |= Notification.DEFAULT_VIBRATE;
        notificationManager.notify(0, notification);      

    }

} 
```

也 `CommonUtilities`很常见显示消息

```
 static void displayMessage(Context context, String message) {
        Intent intent = new Intent(DISPLAY_MESSAGE_ACTION);
        intent.putExtra(EXTRA_MESSAGE, message);
        context.sendBroadcast(intent);
    } 
```

**我的问题是要在 BroadcastReceiver Intent 中制作单独的 regId 和服务器消息**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:24:54.093

您可以通过预定义参数集 onMessage 来区分 OnMessage，如下面的代码描述。

接收新消息时调用的方法

```
@Override
        protected void onMessage(Context context, Intent intent) {
            Log.i(TAG, "Received message");
             Log.i(TAG, "Received message");
            String message = intent.getExtras().getString("price");

            if(message!=null)
            {
                    if(operation.equals("server"))
                    {

                      CommonUtilities.displayMessage(context, "message"); // call intent for message to server
                    }
                    else
                    {
                     //code for regId here
                       CommonUtilities.displayMessage(context, "regID"); // call intent  for regid 
                    }
            }  
            displayMessage(context, message);
            // notifies user

        } 
```

CommonUtilities 常用来显示消息你可以根据消息值调用 BroadcastReceiver

```
 static void displayMessage(Context context, String message) 
    {

        if(message.equals("regID")) 
        {
            //broadcast rec. for registrattion 
            Intent intent = new Intent(DISPLAY_MESSAGE_ACTION);
            intent.putExtra(EXTRA_MESSAGE, message);
            context.sendBroadcast(intent);
        }else
        {
            //broadcast rec. for send message to server 
            Intent intent = new Intent(DISPLAY_MESSAGE_ACTION);
            intent.putExtra(EXTRA_MESSAGE, message);
            context.sendBroadcast(intent);
        }     

        } 
```

# java - JSP在Struts 2中提交表单后显示属性名称而不是值

> ID：15969703
> 
> 赞同：1
> 
> 时间：2013-04-12T11:03:20.753
> 
> 标签：java, jsp, struts2, internationalization

我有一个包含很多`s:text`' 和`s:property`' 的 JSP。其中也有一些`s:iterator`带有`s:text`' 的 '。我面临的问题是，一旦我提交表单并尝试在同一个 JSP 上显示某些内容，所有用于显示与属性相对应的值的`s:text`' 和`s:property`' 开始仅显示属性名称。

喜欢

```
login.username=Username 
```

JSP：

```
<s:text name="login.username" /> 
```

在提交表单并返回到同一个 JSP 时，属性 name:`login.username`会显示在它曾经显示的页面上`Username`。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T06:59:42.093

操作堆栈上可能没有[`i18n`](https://struts.apache.org/core-developers/i18n-interceptor.html)拦截器，或者您没有用于 JVM 使用的语言环境或默认语言环境的资源包。

> 本质上，i18n 拦截器会在每次请求时将语言环境推送到 ActionContext 映射中。支持本地化的框架组件都使用 ActionContext 语言环境。

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:37:57.637

如果每个操作使用一个属性文件来存储 i18n 消息，那么您可能会遇到以下情况：

```
ActionA.java -> 1.jsp
ActionB.java -> 1.jsp
ActionA.properties (all i18n messages are defined only here) 
```

在 ActionA 上一切正常，但在 ActionB 上提交后，stuts 找不到相应的 i18n 消息。

# python - 如何旋转形状为 (n,) 或 (n,1) 的 numpy 数组中的数字？

> ID：15969708
> 
> 赞同：6
> 
> 时间：2013-04-12T11:03:28.380
> 
> 标签：python, numpy

假设我有一个 numpy 数组：

```
>>> a 
array([0,1,2,3,4]) 
```

我想“旋转”它以获得：

```
>>> b
array([4,0,1,2,3]) 
```

什么是最好的方法？

我一直在转换为双端队列并返回（见下文），但有更好的方法吗？

```
b = deque(a)
b.rotate(1)
b = np.array(b) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T11:28:46.970

只需使用以下[`numpy.roll`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.roll.html)功能：

```
a = np.array([0,1,2,3,4])
b = np.roll(a,1)
print(b)
>>> [4 0 1 2 3] 
```

另请参阅[此问题](https://stackoverflow.com/questions/15792465/how-to-do-circular-shift-in-numpy/15792525#15792525)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T11:19:05.477

```
numpy.concatenate([a[-1:], a[:-1]])
>>> array([4, 0, 1, 2, 3]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T11:07:47.410

试试这个

```
b = a[-1:]+a[:-1] 
```

# jquery - 使用 jquery deferred 同步动画和 ajax

> ID：15969710
> 
> 赞同：5
> 
> 时间：2013-04-12T11:03:32.567
> 
> 标签：jquery, ajax, fadein, deferred

我试图了解整个`deferred`概念，并尝试使用它来将`fadeIn`/`fadeOut`动画与 Ajax 调用同步。

基本上我在页面上切换内容：

1.  使用ajax获取内容
2.  响应淡出
3.  替换内容
4.  淡入

但是，如果我理解`deferred`正确，我也许可以做这样的事情：

1.  fadeOut，同时用ajax初始化Fetch内容
2.  当 fadeOut 和 Fetch 内容都完成时：更改内容
3.  淡入

原始解决方案的一些代码：

```
$.get(url, function(page) {
    $('#content').fadeTo(100, 0, 'linear', function() {
        $(this).html(page.text).fadeTo(400, 1, 'linear');
    });
} 
```

我正在尝试做这样的事情：

```
var deferred1 = $.get(url);
var deferred2 = $('#content').fadeTo(100, 0, 'linear').promise();

$.when(deferred1, deferred2).done(function() {
    $('#content').html(page.text).fadeTo(400, 1, 'linear');
}); 
```

我只是不清楚如何使用它。我应该使用 done 还是 then？我应该以聪明的方式使用管道吗？我需要`promise`吗？

实现这一点的更“标准化”的方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T11:16:07.940

当您使用`$.when`（我知道，有趣的句子；））时，用于解决承诺的值将作为参数传递给回调函数。即在您的`done`回调中，第一个参数指的是解析的值，`deferred1`第二个参数指的`deferred2`是（无论是什么）。

现在，当调用 Ajax 成功回调时，它会传递三个参数：

*   响应
*   状态文本
*   `jqXHR`对象_

你只对第一个感兴趣。

因此，您的设置应该是：

```
var promise1 = $.get(url);
var promise2 = $('#content').fadeTo(100, 0, 'linear').promise();

$.when(promise1, promise2).done(function(ajax_success) {
    $('#content').html(ajax_success[0]).fadeTo(400, 1, 'linear');
}); 
```

另请查看[`$.when`文档](http://api.jquery.com/jQuery.when/)。

* * *

> 我需要`promise`吗？

不，当您传递一个 jQuery 集合时，它看起来像内部`$.when`调用。`.promise`但在其他情况下，您将不得不这样做，因此在这里也这样做是有意义的，以保持一致性（感谢[Alnitak](https://stackoverflow.com/users/6782/alnitak)）。

> 我应该……吗？我是不是该 ...？会是什么 ...？

这类问题没有标准的解决方案。Promise 非常灵活，有很多使用方法。我*认为*它们在 JavaScript 中出现的时间还不够长，无法出现标准模式。查找/创建对您有意义并在您的应用程序中保持一致的东西。

如果你有多个 promise，我唯一推荐做的就是把它们放在一个数组中：[jQuery $.when() with variable arguments](https://stackoverflow.com/q/8011652/218196)。

# javascript - tabstop 改变焦点会扼杀转换

> ID：15969711
> 
> 赞同：2
> 
> 时间：2013-04-12T11:03:33.323
> 
> 标签：javascript, html, css

我有一个小问题，不知何故我找不到任何解决方案。我在另一个 div 中有一个 div，我用 css3 翻译移动这个 div。在这个 div 里面，我有一个可变数量的控件，比如输入。

像这样：

```
<div id='container'>
    <div id='content'>
        <input id='input1' type='text'/>
        <input id='input2' type='text'/>
    </div>
</div> 
```

如果用户循环使用这些控件，则制表符会完全破坏翻译。并且没有提示现在 div 在哪里。这里有一个小演示：

[JSFiddle 演示](http://jsfiddle.net/ZfxLR/6/)

如果单击第一个输入和选项卡，您的目标是第二个输入（右下角，此时不可见）。浏览器想要看到它，并终止翻译。所有值都保持不变，但视图不同步。使用 shift-tab 返回选项卡会清楚，视图已损坏。翻译仍然是-100，-100。

我想阻止浏览器自动查看输入。它可以聚焦框，但不能将视图滚动到框。有任何想法吗？

# android - 如何在 android 中使用 vouforia sdk 从 youtube 播放视频

> ID：15969719
> 
> 赞同：0
> 
> 时间：2013-04-12T11:03:51.800
> 
> 标签：android, android-emulator

嗨，我正在研究 android 中的增强现实概念，使用 vouforia sdk 能够在 vedioplayback 示例中播放 vedios，在 vedioplay back 示例应用程序中使用 assets 文件夹用于不同的目标图像正在播放不同的视频，但我的问题是我需要播放不同的 youtube 视频针对不同的目标图像。

```
 public class VideoPlayerHelper implements OnPreparedListener,
                                      OnBufferingUpdateListener,
                                      OnCompletionListener,
                                      OnErrorListener
  {

       public static final int CURRENT_POSITION            = -1;
private MediaPlayer     mMediaPlayer                = null;
private MEDIA_TYPE      mVideoType                  = MEDIA_TYPE.UNKNOWN;
private SurfaceTexture  mSurfaceTexture             = null;
private int             mCurrentBufferingPercentage = 0;
private String          mMovieName                  = "";
private byte            mTextureID                  = 0;
Intent                  mPlayerHelperActivityIntent = null;
private Activity        mParentActivity             = null;
private MEDIA_STATE     mCurrentState               = MEDIA_STATE.NOT_READY;
private boolean         mShouldPlayImmediately      = false;
private int             mSeekPosition               = CURRENT_POSITION;
private ReentrantLock   mMediaPlayerLock            = null;
private ReentrantLock   mSurfaceTextureLock         = null;

// This enum declares the possible states a media can have:
public enum MEDIA_STATE
{
    REACHED_END     (0),
    PAUSED          (1),
    STOPPED         (2),
    PLAYING         (3),
    READY           (4),
    NOT_READY       (5),
    ERROR           (6);

    private int type;
    MEDIA_STATE (int i)
    {
        this.type = i;
    }
    public int getNumericType()
    {
        return type;
    }
}

// This enum declares what type of playback we can do, share with the team:
public enum MEDIA_TYPE
{
    ON_TEXTURE              (0),
    FULLSCREEN              (1),
    ON_TEXTURE_FULLSCREEN   (2),
    UNKNOWN                 (3);

    private int type;
    MEDIA_TYPE (int i)
    {
        this.type = i;
    }
    public int getNumericType()
    {
        return type;
    }
}

/** Initializes the VideoPlayerHelper object. */
public boolean init()
{
    mMediaPlayerLock = new ReentrantLock();
    mSurfaceTextureLock = new ReentrantLock();

    return true;
}

/** Deinitializes the VideoPlayerHelper object. */
public boolean deinit()
{
    unload();

    mSurfaceTextureLock.lock();
        mSurfaceTexture = null;
    mSurfaceTextureLock.unlock();

    return true;
}

/** Loads a movie from a file in the assets folder */
@SuppressLint("NewApi")
public boolean load(String filename, MEDIA_TYPE requestedType,
    boolean playOnTextureImmediately, int seekPosition)
{
    // If the client requests that we should be able to play ON_TEXTURE,
    // then we need to create a MediaPlayer:

    boolean canBeOnTexture = false;
    boolean canBeFullscreen = false;

    boolean result = false;
    mMediaPlayerLock.lock();
    mSurfaceTextureLock.lock();

        // If the media has already been loaded then exit.
        // The client must first call unload() before calling load again:
        if ((mCurrentState == MEDIA_STATE.READY) || (mMediaPlayer != null))
        {
            DebugLog.LOGD("Already loaded");
        }
        else
        {
            if (((requestedType == MEDIA_TYPE.ON_TEXTURE) ||                        // If the client requests on texture only
                (requestedType == MEDIA_TYPE.ON_TEXTURE_FULLSCREEN)) &&             // or on texture with full screen
                (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH))  // and this is an ICS device
            {
                if (mSurfaceTexture == null)
                {
                    DebugLog.LOGD("Can't load file to ON_TEXTURE because the Surface Texture is not ready");
                }
                else
                {
                    try
                    {
                        mMediaPlayer = new MediaPlayer();

                        // This example shows how to load the movie from the assets folder of the app
                        // However, if you would like to load the movie from the sdcard or from a network location
                        // simply comment the three lines below
                        AssetFileDescriptor afd = mParentActivity.getAssets().openFd(filename);
                        mMediaPlayer.setDataSource(afd.getFileDescriptor(),afd.getStartOffset(),afd.getLength());
                        afd.close();

                        mMediaPlayer.prepareAsync();
                        mMediaPlayer.setOnPreparedListener(this);
                        mMediaPlayer.setOnBufferingUpdateListener(this);
                        mMediaPlayer.setOnCompletionListener(this);
                        mMediaPlayer.setOnErrorListener(this);
                        mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
                        mMediaPlayer.setSurface(new Surface(mSurfaceTexture));
                        canBeOnTexture = true;
                        mShouldPlayImmediately = playOnTextureImmediately;
                    }
                    catch (Exception e)
                    {
                        DebugLog.LOGE("Error while creating the MediaPlayer: " + e.toString());

                        mCurrentState = MEDIA_STATE.ERROR;
                        mMediaPlayerLock.unlock();
                        mSurfaceTextureLock.unlock();
                        return false;
                    }
                }
            }
            else
            {
                try
                {
                    // We need to verify that the file exists
                    AssetFileDescriptor afd = mParentActivity.getAssets().openFd(filename);
                    afd.close();
                }
                catch (Exception e)
                {
                    DebugLog.LOGD("File does not exist");
                    mCurrentState = MEDIA_STATE.ERROR;
                    mMediaPlayerLock.unlock();
                    mSurfaceTextureLock.unlock();
                    return false;
                }
            }

            // If the client requests that we should be able to play FULLSCREEN
            // then we need to create a FullscreenPlaybackActivity
            if ((requestedType == MEDIA_TYPE.FULLSCREEN) || (requestedType == MEDIA_TYPE.ON_TEXTURE_FULLSCREEN))
            {
                mPlayerHelperActivityIntent = new Intent(mParentActivity, FullscreenPlayback.class);
                mPlayerHelperActivityIntent.setAction(android.content.Intent.ACTION_VIEW);
                canBeFullscreen = true;
            }

            // We store the parameters for further use
            mMovieName = filename;
            mSeekPosition = seekPosition;

            if (canBeFullscreen && canBeOnTexture)  mVideoType = MEDIA_TYPE.ON_TEXTURE_FULLSCREEN;
            else if (canBeFullscreen) {             mVideoType = MEDIA_TYPE.FULLSCREEN; mCurrentState = MEDIA_STATE.READY; } // If it is pure fullscreen then we're ready otherwise we let the MediaPlayer load first
            else if (canBeOnTexture)                mVideoType = MEDIA_TYPE.ON_TEXTURE;
            else                                    mVideoType = MEDIA_TYPE.UNKNOWN;

            result = true;
        }

    mSurfaceTextureLock.unlock();
    mMediaPlayerLock.unlock();

    return result;
}

/** Unloads the currently loaded movie
    After this is called a new load() has to be invoked */
public boolean unload()
{
    mMediaPlayerLock.lock();
        if (mMediaPlayer != null) {
            try
            {
                mMediaPlayer.stop();
            }
            catch (Exception e)
            {
                mMediaPlayerLock.unlock();
                DebugLog.LOGE("Could not start playback");
            }

            mMediaPlayer.release();
            mMediaPlayer = null;
        }
    mMediaPlayerLock.unlock();

    mCurrentState = MEDIA_STATE.NOT_READY;
    mVideoType = MEDIA_TYPE.UNKNOWN;
    return true;
}

/** Indicates whether the movie can be played on a texture */
public boolean isPlayableOnTexture()
{
    if ((mVideoType == MEDIA_TYPE.ON_TEXTURE) || (mVideoType == MEDIA_TYPE.ON_TEXTURE_FULLSCREEN))
        return true;

    return false;
}

/** Indicates whether the movie can be played fullscreen */
public boolean isPlayableFullscreen()
{
    if ((mVideoType == MEDIA_TYPE.FULLSCREEN) || (mVideoType == MEDIA_TYPE.ON_TEXTURE_FULLSCREEN))
        return true;

    return false;
}

/** Return the current status of the movie such as Playing, Paused or Not Ready */
MEDIA_STATE getStatus()
{
    return mCurrentState;
}

/** Returns the width of the video frame */
public int getVideoWidth()
{
    if (!isPlayableOnTexture())
    {
        // DebugLog.LOGD("Cannot get the video width if it is not playable on texture");
        return -1;
    }

    if ((mCurrentState == MEDIA_STATE.NOT_READY) || (mCurrentState == MEDIA_STATE.ERROR))
    {
        // DebugLog.LOGD("Cannot get the video width if it is not ready");
        return -1;
    }

    int result=-1;
    mMediaPlayerLock.lock();
        if (mMediaPlayer != null)
            result = mMediaPlayer.getVideoWidth();
    mMediaPlayerLock.unlock();

    return result;
}

/** Returns the height of the video frame */
public int getVideoHeight()
{
    if (!isPlayableOnTexture())
    {
        // DebugLog.LOGD("Cannot get the video height if it is not playable on texture");
        return -1;
    }

    if ((mCurrentState == MEDIA_STATE.NOT_READY) || (mCurrentState == MEDIA_STATE.ERROR))
    {
        // DebugLog.LOGD("Cannot get the video height if it is not ready");
        return -1;
    }

    int result=-1;
    mMediaPlayerLock.lock();
        if (mMediaPlayer != null)
            result = mMediaPlayer.getVideoHeight();
    mMediaPlayerLock.unlock();

    return result;
}

/** Returns the length of the current movie */
public float getLength()
{
    if (!isPlayableOnTexture())
    {
        // DebugLog.LOGD("Cannot get the video length if it is not playable on texture");
        return -1;
    }

    if ((mCurrentState == MEDIA_STATE.NOT_READY) || (mCurrentState == MEDIA_STATE.ERROR))
    {
        // DebugLog.LOGD("Cannot get the video length if it is not ready");
        return -1;
    }

    int result=-1;
    mMediaPlayerLock.lock();
        if (mMediaPlayer != null)
            result = mMediaPlayer.getDuration()/1000;
    mMediaPlayerLock.unlock();

    return result;
}

/** Request a movie to be played either full screen or on texture and at a given position */
public boolean play(boolean fullScreen, int seekPosition)
{
    if (fullScreen)
    {
        // If the play request was for fullscreen playback
        // We check first whether this was requested upon load time
        if (!isPlayableFullscreen())
        {
            DebugLog.LOGD("Cannot play this video fullscreen, it was not requested on load");
            return false;
        }

        if (isPlayableOnTexture())
        {
            // If it can also play on texture then we forward information such as whether
            // it is currently playing (shouldPlayImmediately) and in which position
            // it was being played previously (currentSeekPosition)

            mMediaPlayerLock.lock();

                if (mMediaPlayer == null)
                {
                    mMediaPlayerLock.unlock();
                    return false;
                }

                if (mMediaPlayer.isPlaying())
                    mPlayerHelperActivityIntent.putExtra("shouldPlayImmediately", true);
                else
                    mPlayerHelperActivityIntent.putExtra("shouldPlayImmediately", false);

                try
                {
                    mMediaPlayer.pause();
                }
                catch (Exception e)
                {
                    mMediaPlayerLock.unlock();
                    DebugLog.LOGE("Could not pause playback");
                }

                if (seekPosition != CURRENT_POSITION)
                    mPlayerHelperActivityIntent.putExtra("currentSeekPosition", seekPosition);
                else
                    mPlayerHelperActivityIntent.putExtra("currentSeekPosition", mMediaPlayer.getCurrentPosition());

            mMediaPlayerLock.unlock();
        }
        else
        {
            // If it cannot play on texture then we set these values to default
            mPlayerHelperActivityIntent.putExtra("currentSeekPosition", 0);
            mPlayerHelperActivityIntent.putExtra("shouldPlayImmediately", true);

            if (seekPosition != CURRENT_POSITION)
                mPlayerHelperActivityIntent.putExtra("currentSeekPosition", seekPosition);
            else
                mPlayerHelperActivityIntent.putExtra("currentSeekPosition", 0);
        }

        // We must pass the current playback orientation of the activity
        // and the name of the movie currently being played
        mPlayerHelperActivityIntent.putExtra("requestedOrientation", mParentActivity.getRequestedOrientation());
        mPlayerHelperActivityIntent.putExtra("movieName", mMovieName);
        mParentActivity.startActivityForResult(mPlayerHelperActivityIntent,1);
        return true;
    }
    else
    {
        // If the client requested playback on texture
        // we must first verify that it is possible
        if (!isPlayableOnTexture())
        {
            DebugLog.LOGD("Cannot play this video on texture, it was either not requested on load or is not supported on this plattform");
            return false;
        }

        if ((mCurrentState == MEDIA_STATE.NOT_READY) || (mCurrentState == MEDIA_STATE.ERROR))
        {
            DebugLog.LOGD("Cannot play this video if it is not ready");
            return false;
        }

        mMediaPlayerLock.lock();
            // If the client requests a given position
            if (seekPosition != CURRENT_POSITION)
            {
                try
                {
                    mMediaPlayer.seekTo(seekPosition);
                }
                catch (Exception e)
                {
                    mMediaPlayerLock.unlock();
                    DebugLog.LOGE("Could not seek to position");
                }
            }
            else    // If it had reached the end loop it back
            {
                if (mCurrentState == MEDIA_STATE.REACHED_END)
                {
                    try
                    {
                        mMediaPlayer.seekTo(0);
                    }
                    catch (Exception e)
                    {
                        mMediaPlayerLock.unlock();
                        DebugLog.LOGE("Could not seek to position");
                    }
                }
            }

            // Then simply start playing
            try
            {
                mMediaPlayer.start();
            }
            catch (Exception e)
            {
                mMediaPlayerLock.unlock();
                DebugLog.LOGE("Could not start playback");
            }
            mCurrentState = MEDIA_STATE.PLAYING;

        mMediaPlayerLock.unlock();

        return true;
    }
}

/** Pauses the current movie being played */
public boolean pause()
{
    if (!isPlayableOnTexture())
    {
        // DebugLog.LOGD("Cannot pause this video since it is not on texture");
        return false;
    }

    if ((mCurrentState == MEDIA_STATE.NOT_READY) || (mCurrentState == MEDIA_STATE.ERROR))
    {
        // DebugLog.LOGD("Cannot pause this video if it is not ready");
        return false;
    }

    boolean result = false;

    mMediaPlayerLock.lock();
        if (mMediaPlayer != null)
        {
            if (mMediaPlayer.isPlaying())
            {
                try
                {
                    mMediaPlayer.pause();
                }
                catch (Exception e)
                {
                    mMediaPlayerLock.unlock();
                    DebugLog.LOGE("Could not pause playback");
                }
                mCurrentState = MEDIA_STATE.PAUSED;
                result = true;
            }
        }
    mMediaPlayerLock.unlock();

    return result;
}

/** Stops the current movie being played */
public boolean stop()
{
    if (!isPlayableOnTexture())
    {
        // DebugLog.LOGD("Cannot stop this video since it is not on texture");
        return false;
    }

    if ((mCurrentState == MEDIA_STATE.NOT_READY) || (mCurrentState == MEDIA_STATE.ERROR))
    {
        // DebugLog.LOGD("Cannot stop this video if it is not ready");
        return false;
    }

    boolean result = false;

    mMediaPlayerLock.lock();
        if (mMediaPlayer != null)
        {
            mCurrentState = MEDIA_STATE.STOPPED;
            try
            {
                mMediaPlayer.stop();
            }
            catch (Exception e)
            {
                mMediaPlayerLock.unlock();
                DebugLog.LOGE("Could not stop playback");
            }

            result = true;
        }
    mMediaPlayerLock.unlock();

    return result;
}

/** Tells the VideoPlayerHelper to update the data from the video feed */
@SuppressLint("NewApi")
public byte updateVideoData()
{
    if (!isPlayableOnTexture())
    {
        // DebugLog.LOGD("Cannot update the data of this video since it is not on texture");
        return -1;
    }

    byte result = -1;

    mSurfaceTextureLock.lock();
        if (mSurfaceTexture != null)
        {
            // Only request an update if currently playing
            if (mCurrentState == MEDIA_STATE.PLAYING)
                mSurfaceTexture.updateTexImage();

            result = mTextureID;
        }
    mSurfaceTextureLock.unlock();

    return result;
}

/** Moves the movie to the requested seek position */
public boolean seekTo(int position)
{
    if (!isPlayableOnTexture())
    {
        // DebugLog.LOGD("Cannot seek-to on this video since it is not on texture");
        return false;
    }

    if ((mCurrentState == MEDIA_STATE.NOT_READY) || (mCurrentState == MEDIA_STATE.ERROR))
    {
        // DebugLog.LOGD("Cannot seek-to on this video if it is not ready");
        return false;
    }

    boolean result = false;
    mMediaPlayerLock.lock();
        if (mMediaPlayer != null)
        {
            try
            {
                mMediaPlayer.seekTo(position);
            }
            catch (Exception e)
            {
                mMediaPlayerLock.unlock();
                DebugLog.LOGE("Could not seek to position");
            }
            result = true;
        }
    mMediaPlayerLock.unlock();

    return result;
}

/** Gets the current seek position */
public int getCurrentPosition()
{
    if (!isPlayableOnTexture())
    {
        // DebugLog.LOGD("Cannot get the current playback position of this video since it is not on texture");
        return -1;
    }

    if ((mCurrentState == MEDIA_STATE.NOT_READY) || (mCurrentState == MEDIA_STATE.ERROR))
    {
        // DebugLog.LOGD("Cannot get the current playback position of this video if it is not ready");
        return -1;
    }

    int result = -1;
    mMediaPlayerLock.lock();
        if (mMediaPlayer != null)
            result = mMediaPlayer.getCurrentPosition();
    mMediaPlayerLock.unlock();

    return result;
}

/** Sets the volume of the movie to the desired value */
public boolean setVolume(float value)
{
    if (!isPlayableOnTexture())
    {
        // DebugLog.LOGD("Cannot set the volume of this video since it is not on texture");
        return false;
    }

    if ((mCurrentState == MEDIA_STATE.NOT_READY) || (mCurrentState == MEDIA_STATE.ERROR))
    {
        // DebugLog.LOGD("Cannot set the volume of this video if it is not ready");
        return false;
    }

    boolean result = false;
    mMediaPlayerLock.lock();
        if (mMediaPlayer != null)
        {
            mMediaPlayer.setVolume(value, value);
            result = true;
        }
    mMediaPlayerLock.unlock();

    return result;
}

/**
 *  The following functions are specific to Android
 *  and will likely not be implemented on other platforms
 */

/** Gets the buffering percentage in case the movie is loaded from network */
public int getCurrentBufferingPercentage()
{
    return mCurrentBufferingPercentage;
}

/** Listener call for buffering */
public void onBufferingUpdate(MediaPlayer arg0, int arg1) {
    //DebugLog.LOGD("onBufferingUpdate " + arg1);

    mMediaPlayerLock.lock();
        if (mMediaPlayer != null)
        {
            if (arg0 == mMediaPlayer)
                mCurrentBufferingPercentage = arg1;
        }
    mMediaPlayerLock.unlock();
}

/** With this we can set the parent activity */
public void setActivity(Activity newActivity)
{
    mParentActivity = newActivity;
}

/** To set a value upon completion */
public void onCompletion(MediaPlayer arg0) {
    // Signal that the video finished playing
    mCurrentState = MEDIA_STATE.REACHED_END;
}

/** Used to set up the surface texture*/
@SuppressLint("NewApi")
public boolean setupSurfaceTexture(int nativeTextureID)
{
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH)
    {
        // We create a surface texture where the video can be played
        // We have to give it a texture id of an already created (in native) // OpenGL texture
        mSurfaceTextureLock.lock();
            mSurfaceTexture = new SurfaceTexture(nativeTextureID);
            mTextureID = (byte)nativeTextureID;
        mSurfaceTextureLock.unlock();

        return true;
    }
    else
        return false;
}

@SuppressLint("NewApi")
public void getSurfaceTextureTransformMatrix(float []mtx)
{
    mSurfaceTextureLock.lock();
        if (mSurfaceTexture != null)
            mSurfaceTexture.getTransformMatrix(mtx);
    mSurfaceTextureLock.unlock();
}

/** This is called when the movie is ready for playback */
public void onPrepared(MediaPlayer mediaplayer)
{
    mCurrentState = MEDIA_STATE.READY;

    // If requested an immediate play
    if (mShouldPlayImmediately)
        play(false, mSeekPosition);

    mSeekPosition = 0;
}

public boolean onError(MediaPlayer mp, int what, int extra) {

    if (mp == mMediaPlayer)
    {
        String errorDescription;

        switch (what)
        {
            case MediaPlayer.MEDIA_ERROR_NOT_VALID_FOR_PROGRESSIVE_PLAYBACK:
                errorDescription = "The video is streamed and its container is not valid for progressive playback";
                break;
            case MediaPlayer.MEDIA_ERROR_SERVER_DIED:
                errorDescription = "Media server died";
                break;
            case MediaPlayer.MEDIA_ERROR_UNKNOWN:
                errorDescription = "Unspecified media player error";
                break;
            default:
                errorDescription = "Unknown error " + what;
        }

        DebugLog.LOGE("Error while opening the file. Unloading the media player (" + errorDescription + ", " + extra + ")");

        unload();

        mCurrentState = MEDIA_STATE.ERROR;

        return true;
    }

    return false;
   }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T17:45:29.593

以这种方式加载视频违反了 Youtube 使用条款。我会推荐在[https://developers.google.com/youtube/android/player/找到的 Google 自己的 youtube android api](https://developers.google.com/youtube/android/player/)

# api - 是否可以在 facebook api 上创建 facebook 业务页面？

> ID：15969722
> 
> 赞同：3
> 
> 时间：2013-04-12T11:03:56.173
> 
> 标签：api, facebook-page

当我重新研究时，我被告知无法使用 api 创建页面。但是 pagemodo 怎么能做到这一点？此外，是否可以使用 iframe facebook 应用程序向我的应用程序发送带有签名请求的页面地址（实际上是页面 id）？当我解码签名请求数据时，我可以获得 user_id 但我需要页面信息。

# android - 如何向可扩展菜单添加元素？

> ID：15969729
> 
> 赞同：1
> 
> 时间：2013-04-12T11:04:15.787
> 
> 标签：android

我想要一个可扩展的菜单，当您展开子项目时，它会显示一些自定义项目，我选择的项目，如文本输入字段或复选框（见下图）。

现在我怎样才能做到这一点？我可以使用 Eclipse GUI 构建器来实现吗？还是我必须创建动态加载数据的方法？

![带有自定义项目的可扩展菜单的图像](https://i.stack.imgur.com/PWwrd.png)

## 更新：

所以我不仅想要文本项作为子元素，还想要各种元素，比如输入字段或复选框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:25:37.667

本教程就像魅力一样

[http://myandroidsolutions.blogspot.in/2012/08/android-expandable-list-example.html](http://myandroidsolutions.blogspot.in/2012/08/android-expandable-list-example.html)

我还从这里获取了代码，通过实现适配器来制作我的自定义可扩展 UI

# javascript - 验证 PKCS#7 (PEM) 签名/解压 node.js 中的数据

> ID：15969733
> 
> 赞同：11
> 
> 时间：2013-04-12T11:04:27.310
> 
> 标签：javascript, node.js, pem, pkcs#7

我从第 3 方系统获得 PKCS#7 加密包。该包未压缩，未加密，PEM 编码，使用 X.509 证书签名。我也有来自提供商的 PEM 证书文件。

里面的数据是XML

我需要在 Node.JS 中执行以下操作：

*   提取数据
*   验证签名

一个示例包（无敏感信息，数据参考我们的 qa 系统）[http://pastebin.com/7ay7F99e](http://pastebin.com/7ay7F99e)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T13:27:21.230

好的，终于明白了。

首先，PKCS 消息是使用[ASN1](http://en.wikipedia.org/wiki/Abstract_Syntax_Notation_One)二进制编码的复杂结构。

其次，它们可以序列化为二进制文件（[DER 编码）或使用](http://en.wikipedia.org/wiki/Distinguished_Encoding_Rules#DER_encoding)[Base64](http://en.wikipedia.org/wiki/Base64)编码的文本 PEM 文件。

第三，[PKCS#7 格式](https://www.rfc-editor.org/rfc/rfc2315)指定了几种包类型，其中 my 被称为签名数据。这些格式通过 ASN1 对象（包装器序列的第一个元素）开头的 OBJECT IDENTIFIER 值来区分 - 您可以转到[http://lapo.it/asn1js/](http://lapo.it/asn1js/)并粘贴完全解析结构的[包文本](http://pastebin.com/7ay7F99e)。

接下来，我们需要解析包（Base64 -> ASN1 -> 一些对象表示）。不幸的是，没有 npm 包。我发现了一个相当不错的项目[伪造](https://github.com/digitalbazaar/forge/)，它没有发布到 npm 注册表（尽管 npm 兼容）。它解析了 PEM 格式，但是遍历生成的树是一件非常不愉快的事情。基于他们的 Encrypted Data 和 Enveloped Data 实现，我在自己的 fork 中创建了 Signed Data 的部分实现。**UPD：**我的拉取请求后来被合并到了 forge 项目中。

现在终于我们解析了整个事情。那时我发现了一篇关于签名 PKCS#7 验证的很棒的（可能是整个网络上唯一的）解释性文章：http: [//qistoph.blogspot.com/2012/01/manual-verify-pkcs7-signed-data- with.html](http://qistoph.blogspot.com/2012/01/manual-verify-pkcs7-signed-data-with.html)

我能够从文件中提取并成功解码签名，但里面的哈希与数据的哈希不同。上帝保佑克里斯，他[解释](http://qistoph.blogspot.com/2012/01/manual-verify-pkcs7-signed-data-with.html?showComment=1366358745362#c7080164702597052179)了实际发生的事情。

数据签名过程分为两步：

1.  计算原始内容的哈希
2.  构建了一组“授权属性”，包括：签名数据的类型、签名时间和数据哈希

然后使用签名者的私钥对步骤 2 中的集合进行签名。

由于 PKCS#7 的细节，这组属性存储在特定于上下文的构造类型（class=0x80，type=0）中，但应该像普通 SET（class=0，type=17）一样签名和验证。

正如 Chris 提到的（[https://stackoverflow.com/a/16154756/108533](https://stackoverflow.com/a/16154756/108533)），这仅验证包中的属性是否有效。我们还应该根据摘要属性验证实际数据散列。

所以最后这是一个验证代码（`cert.pem`是提供商发送给我的证书文件，`package`是我通过 HTTP POST 从他们那里得到的 PEM 编码消息）：

```
var fs = require('fs');
var crypto = require('crypto');
var forge = require('forge');
var pkcs7 = forge.pkcs7; 
var asn1 = forge.asn1;
var oids = forge.pki.oids;

var folder = '/a/path/to/files/';
var pkg = fs.readFileSync(folder + 'package').toString();
var cert = fs.readFileSync(folder + 'cert.pem').toString();

var res = true;

try {
    var msg = pkcs7.messageFromPem(pkg);
    var attrs = msg.rawCapture.authenticatedAttributes;
    var set = asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SET, true, attrs);
    var buf = Buffer.from(asn1.toDer(set).data, 'binary');

    var sig = msg.rawCapture.signature;

    var v = crypto.createVerify('RSA-SHA1');
    v.update(buf);
    if (!v.verify(cert, sig)) {
        console.log('Wrong authorized attributes!');
        res = false;
    }

    var h = crypto.createHash('SHA1');
    var data = msg.rawCapture.content.value[0].value[0].value;
    h.update(data);

    var attrDigest = null;
    for (var i = 0, l = attrs.length; i < l; ++i) {
        if (asn1.derToOid(attrs[i].value[0].value) === oids.messageDigest) {
            attrDigest = attrs[i].value[1].value[0].value;
        }
    }

    var dataDigest = h.digest();
    if (dataDigest !== attrDigest) {
        console.log('Wrong content digest');
        res = false;
    }

}
catch (_e) {
    console.dir(_e);
    res = false;
}

if (res) {
    console.log("It's OK");
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T19:06:10.790

您的回答是朝着正确方向迈出的一大步。但是，您错过了验证的重要部分！

您应该根据签名属性中包含的摘要验证数据的哈希值。否则，有人可能会用恶意数据替换内容。例如，尝试使用您的代码验证以下“包”（并查看内容）： http: [//pastebin.com/kaZ2XQQc](http://pastebin.com/kaZ2XQQc)

我不是 NodeJS 开发人员（这实际上是我的第一次尝试：p），但这里有一个建议可以帮助您入门。

```
var fs = require('fs');
var crypto = require('crypto');
var pkcs7 = require('./js/pkcs7'); // forge from my own fork
var asn1 = require('./js/asn1');

var folder = '';
var pkg = fs.readFileSync(folder + 'package').toString();
var cert = fs.readFileSync(folder + 'cert.pem').toString();

try {
    var msg = pkcs7.messageFromPem(pkg);
    var attrs = msg.rawCapture.authenticatedAttributes; // got the list of auth attrs
    var set = asn1.create(asn1.Class.UNIVERSAL, asn1.Type.SET, true, attrs); // packed them inside of the SET object
    var buf = new Buffer(asn1.toDer(set).data, 'binary'); // DO NOT forget 'binary', otherwise it tries to interpret bytes as UTF-8 chars

    var sig = msg.rawCapture.signature;

    var shasum = crypto.createHash('sha1'); // better be based on msg.rawCapture.digestAlgorithms
    shasum.update(msg.rawCapture.content.value[0].value[0].value);

    for(var n in attrs) {
        var attrib = attrs[n].value;
        var attrib_type = attrib[0].value;
        var attrib_value = attrib[1].value[0].value;
        if(attrib_type == "\x2a\x86\x48\x86\xf7\x0d\x01\x09\x04") { // better would be to use the OID (1.2.840.113549.1.9.4)
            if(shasum.digest('binary') == attrib_value) {
                console.log('hash matches');

                var v = crypto.createVerify('RSA-SHA1');
                v.update(buf);
                console.log(v.verify(cert, sig)); // -> should type true
            } else {
                console.log('hash mismatch');
            }
        }
    }

}
catch (_e) {
    console.dir(_e);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-09-27T00:46:12.897

基于[这个答案](https://stackoverflow.com/questions/15969733/verify-pkcs7-pem-signature-unpack-data-in-node-js/16148331#16148331)的灵感，我实现了一个使用[node-signpdf](https://github.com/vbuch/node-signpdf/)和[node](https://github.com/digitalbazaar/forge) -forge签名和验证 pdf 文件的[示例](https://github.com/MohammedEssehemy/node-sign-validate-pdf)。

# ios - Cocos2d纵向模式下的偏移问题

> ID：15969734
> 
> 赞同：1
> 
> 时间：2013-04-12T11:04:29.047
> 
> 标签：ios, objective-c, cocos2d-iphone

我正在根据 Ray Wenderlich 的 Cocos 2d 中旋转炮塔教程（参见此处：[http ://www.raywenderlich.com/25791/rotating-turrets-how-to-make-a-simple-iphone-game-与-cocos2d-2-x-part-2](http://www.raywenderlich.com/25791/rotating-turrets-how-to-make-a-simple-iphone-game-with-cocos2d-2-x-part-2)）。我需要我的游戏处于纵向模式，所以我设法正确地获得了炮塔的位置：![在此处输入图像描述](https://i.stack.imgur.com/5xdDc.png)

炮塔设法向右射击，但没有向左射击。这是我的代码：

```
- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
if (_nextProjectile != nil) return;

// Choose one of the touches to work with
UITouch *touch = [touches anyObject];
CGPoint location = [self convertTouchToNodeSpace:touch];

// Set up initial location of projectile
CGSize winSize = [[CCDirector sharedDirector] winSize];
_nextProjectile = [[CCSprite spriteWithFile:@"projectile2.png"] retain];
_nextProjectile.position = ccp(160, 20);

// Determine offset of location to projectile
CGPoint offset = ccpSub(location, _nextProjectile.position);

// Bail out if you are shooting down or backwards
if (offset.x <= 0) return;

// Determine where you wish to shoot the projectile to
int realX = winSize.width + (_nextProjectile.contentSize.width/2);
float ratio = (float) offset.y / (float) offset.x;
int realY = (realX * ratio) + _nextProjectile.position.y;
CGPoint realDest = ccp(realX, realY);

// Determine the length of how far you're shooting
int offRealX = realX - _nextProjectile.position.x;
int offRealY = realY - _nextProjectile.position.y;
float length = sqrtf((offRealX*offRealX)+(offRealY*offRealY));
float velocity = 480/1; // 480pixels/1sec
float realMoveDuration = length/velocity;

// Determine angle to face
float angleRadians = atanf((float)offRealY / (float)offRealX);
float angleDegrees = CC_RADIANS_TO_DEGREES(angleRadians);
float cocosAngle = -1 * angleDegrees;
float rotateDegreesPerSecond = 180 / 0.5; // Would take 0.5 seconds to rotate 180 degrees, or half a circle
float degreesDiff = _player.rotation - cocosAngle;
float rotateDuration = fabs(degreesDiff / rotateDegreesPerSecond);
[_player runAction:
 [CCSequence actions:
  [CCRotateTo actionWithDuration:rotateDuration angle:cocosAngle],
  [CCCallBlock actionWithBlock:^{
     // OK to add now - rotation is finished!
     [self addChild:_nextProjectile];
     [_projectiles addObject:_nextProjectile];

     // Release
     [_nextProjectile release];
     _nextProjectile = nil;
 }],
  nil]];

// Move projectile to actual endpoint
[_nextProjectile runAction:
 [CCSequence actions:
  [CCMoveTo actionWithDuration:realMoveDuration position:realDest],
  [CCCallBlockN actionWithBlock:^(CCNode *node) {
     [_projectiles removeObject:node];
     [node removeFromParentAndCleanup:YES];
 }],
  nil]];

_nextProjectile.tag = 2; 
```

}

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:07:17.693

您正在检查 x 轴而不是 Y

```
// Bail out if you are shooting down or backwards
if (offset.x <= 0) return 
```

;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T14:53:19.230

您是否真的将应用程序设置为以纵向模式运行，或者您只是旋转了模拟器并重新定位了炮塔？

如果您没有明确地将应用程序设置为纵向运行，您的 x 和 y 坐标将被交换（x 将从 ios 按钮运行到手机顶部，而不是您期望的交叉）。

如果转换正确，[我之前已经回答过这个问题](https://stackoverflow.com/questions/8529581/projectiles-bullets-direction-cocos2d?rq=1):)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-11T21:24:43.670

这里的问题是您复制粘贴了数学而不是为了您的目的正确编辑它。Ray 的代码中有一些假设，依赖于你总是在炮塔的右侧而不是向上、向下或向左射击。

这是您应该查看的数学代码：

```
// Determine offset of location to projectile
CGPoint offset = ccpSub(location, _nextProjectile.position);

// Bail out if you are shooting down or backwards
if (offset.x <= 0) return; 
```

请注意，如果分接位置位于炮塔左侧，则 offset.x 将小于 0，因此这是您从 Ray 那里得到的假设，但没有修改。正如 gheesse 所说，出于您的目的，这应该设置为 offset.y，因为您不希望它们在射弹的原始位置以南射击。但这只是问题的一部分。

```
// Determine where you wish to shoot the projectile to
int realX = winSize.width + (_nextProjectile.contentSize.width/2); 
```

这是你的另一个大问题。你没有修改 Ray 的数学来确定射弹应该去哪里。在 Ray 的代码中，他的射弹总是会落在屏幕右侧之外的位置，因此他使用屏幕的宽度和射弹的大小来确定他想要射弹的真实位置。这导致了您的问题，因为您没有假设您的弹丸将始终朝右 - 您的弹丸将始终向上（提示，类似于此的代码应该用于您的真实）

```
float ratio = (float) offset.y / (float) offset.x;
int realY = (realX * ratio) + _nextProjectile.position.y; 
```

再一次，雷在他的比赛中做出了他的数学假设，而你实际上并没有更正它。您的代码使炮塔转动的方式会影响 realX 坐标而不是 realY，这是 Ray 总是射击右炮塔需要影响的坐标。

你需要坐下来重新计算。

# c - strtok 返回字符串？

> ID：15969737
> 
> 赞同：0
> 
> 时间：2013-04-12T11:04:38.487
> 
> 标签：c, token, delimiter, strtok, strcmp

只是对 strtok 和 strcmp 有一点问题。

我试图通过 fgets 将用户的输入与一些预定的字符串进行比较：

```
char *token[100];

fgets(s, sizeof(s), stdin)
token[0] = strtok(s, " "); // Get first word
printf("tok: %s", token[0]);
printf("cmp: %d\n", strcmp(token[0], "/bin/echo"); 
```

显然这不是所有的代码，但这表明了我的问题——如果我输入“/bin/echo ...”（或其他任何东西），它将被放入token [0]，并被打印出来。它打印正确，但是当它打印 cmp 值时，它永远不会为 0。对于 /bin/echo，由于某种原因， cmp 值是 1。

谢谢。

编辑以消除关于 s 和令牌的混淆：

```
char s[1024];
char *token[100]; 
```

编辑 2 - 添加了一些其他测试用例：我在标准输入中输入了“/bin/echo hello world”

```
token[0] = strtok(s, " \n\0"); // Get first word
printf("token[0] is: %s", token[0]);
printf("cmp: %d\n", strcmp(token[0], "/bin/echo")); 
```

输出：

```
token[0] is: /bin/echo
cmp: 1 
```

然后我尝试对标记字符串进行硬编码：

```
char str[] = "/bin/echo hello world";
token[0] = strtok(str, " ");
printf("token[0] is: %s", token[0]);
printf("cmp: %d\n", strcmp(token[0], "/bin/echo")); 
```

输出：

```
token[0] is: /bin/echo
cmp: 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:17:05.437

这里我做了小程序

```
#include<string.h>
#include<stdio.h>

int main()
{
char str[] ="/bin/echo this is something";
  char * token[100];
  token[0] = strtok (str," ");

token[0] = strtok(str, " "); // Get first word
printf("cmp: %d\n", strcmp(token[0], "/bin/echo"));
return 0;
} 
```

在这里，我静态存储了输入字符串而不是 fgets()

这很好用。

见[http://codepad.org/IrGAXT8f](http://codepad.org/IrGAXT8f)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:07:36.077

利用

```
char token[1000];
strcpy(token,strtok(s," ")); 
```

字符串不能像这样在 c 中直接分配 :)

另外，包括 string.h

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-12T11:11:09.597

需要动态分配内存来复制字符串。首先阅读动态内存管理（malloc、calloc 等...）

**编辑： http:** [//ideone.com/0UxEwO](http://ideone.com/0UxEwO) - 为我工作

```
#include <stdio.h>
#include <string.h>

int main()
{
    char s[1024];
    char *token[100];
    fgets(s, sizeof(s), stdin);
    token[0] = strtok(s, " \n\0");
    printf("token[0] is: %s", token[0]);
    printf("cmp: %d\n", strcmp(token[0], "/bin/echo"));
} 
```

# zend-framework2 - ZF2 获取 POST 和 GET 的值

> ID：15969738
> 
> 赞同：3
> 
> 时间：2013-04-12T11:04:40.150
> 
> 标签：zend-framework2

在 ZF1 中，我可以执行以下操作来获取 $_POST 和 $_GET 值。

```
$this->getRequest()->getParam('foo'); 
```

ZF2中是否有类似的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T11:14:03.320

开箱即用，您不能单独检查两者：

```
$this->getRequest()->getPost('foo'); // $_POST
$this->getRequest()->getQuery('foo'); // $_GET 
```

# java - “此版本的 SLF4J 需要 log4j 版本 1.2.12”警告 log4j 1.2.17

> ID：15969739
> 
> 赞同：2
> 
> 时间：2013-04-12T11:04:41.367
> 
> 标签：java, eclipse, maven, log4j, slf4j

我有一个 Java Maven 项目，其依赖项包括`slf4j`及其`log4j adapter`. 我根据[http://mvnrepository.com](http://mvnrepository.com)管理 的版本及其最新版本`log4j`，尤其是1.2.17 的版本远远超过 1.2.12 但我仍然收到错误`slf4j-log4j12``slf4j-api``log4j`

```
SLF4J: This version of SLF4J requires log4j version 1.2.12 or later. 
    See also http://www.slf4j.org/codes.html#log4j_version 
```

这对我来说完全不清楚。

我的 Maven 依赖管理如下所示：

```
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.apache.jena</groupId>
            <artifactId>apache-jena-libs</artifactId>
            <type>pom</type>
            <version>2.10.0</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.7.5</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.7.5</version>
        </dependency>
    </dependencies>
</dependencyManagement> 
```

我怎样才能摆脱警告？

PS：我也得到一个`java.lang.NoSuchMethodError: org.apache.log4j.Logger.isTraceEnabled()`.

PPS：由于您的评论，我记得该程序有一个“lib”文件夹，该文件夹不包含在 Maven 的类路径中，而是由 Eclipse 本身包含，因此冲突的依赖项必须存在。抱歉，我完全忘记了将 Maven 与 lib 文件夹混合是我的错。我想我必须尝试将尽可能多的库转换为 Maven 依赖项。奇怪的是，即使我编辑“订单和导出”以将 Maven 依赖项放在顶部，问题仍然存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T11:52:24.837

`StaticLoggerBinder`slf4j-log4j12 中的代码很早就加载了，它会检查该`TRACE`级别是否在 log4j 中可用。这是代码：

```
private StaticLoggerBinder() {
  loggerFactory = new Log4jLoggerFactory();
  try {
    Level level = Level.TRACE;
  } catch (NoSuchFieldError nsfe) {
    Util.report("This version of SLF4J requires log4j version 1.2.12 or later."+
                " See also http://www.slf4j.org/codes.html#log4j_version");
  }
} 
```

这对我来说似乎很密封。

可能是其他一些依赖项正在引入或实际上嵌入了 log4j 的早期版本。一些 * *-standalone.jar*文件已知会这样做。

在部署时检查您的类路径。您是否在应用服务器中部署？服务器类路径上是否有旧版本的 log4j？在Java认可的路径中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:29:48.937

将评论更改为回答，因为它似乎可以解决问题。

> 这是一个类加载器问题，maven 正确构建了它，但缺少依赖项。您可以尝试向 Maven 提供缺少的依赖项吗？否则，我建议您查看 Eclipse 特定的依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:19:54.877

您应该将`<dependency>`外部定义`<dependencyManagement>`如下： -

```
<dependencyManagement>
    <dependencies>
    ...
    </dependencies>
</dependencyManagement>
<dependencies>
    <dependency>
        <groupId>org.apache.jena</groupId>
        <artifactId>apache-jena-libs</artifactId>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
    </dependency>
</dependencies> 
```

请参阅[依赖机制简介：依赖管理](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Management)了解更多信息。

我希望这可能会有所帮助。

# php - 在 PHP 中使用 PGP 加密文件？

> ID：15969740
> 
> 赞同：27
> 
> 时间：2013-04-12T11:04:42.167
> 
> 标签：php, pgp, gnupg, openpgp

我想使用 PGP 加密来加密 CSV 文件，我通过 PHP 脚本生成，然后通过电子邮件将该文件发送给客户端。客户会给我加密密钥，我需要用它来加密文件。

我在 Google 上搜索了 PGP，发现它的隐私非常好，我还发现 OpenPGP [http://www.openpgp.org/](http://www.openpgp.org/)和 GnuPG [http://www.gnupg.org/](http://www.gnupg.org/)这两种 PGP 是什么？我应该使用哪一个？

另外，如何使用我的客户端提供的密钥在 PHP 中使用 PGP 加密文件？

我第一次听到这个术语，任何人都可以帮助理解这个并在 PHP 中实现它。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-12T12:10:31.507

### 问题一：关于PGP

*   **PGP**（Pretty Good Privacy）是赛门铁克公司的产品和商标（他们在几年前购买了它）。
*   **OpenPGP**是 PGP 使用的标准。
*   **GnuPG**（Gnu Privacy Guard）是 PGP 的免费开源实现。

所以你想要做的是加密到一个*OpenPGP*密钥。您的客户端使用哪种 OpenPGP 实现来解密数据对您来说并不重要。在 PHP 中，通常使用 GnuPG，并且内置了接口。

### 问题 2：在 PHP 中使用 GnuPG

使用[GnuPG 接口](http://php.net/manual/en/book.gnupg.php)，这是一个可以为 PHP 安装的扩展。

首先，导入密钥，`$keydata`ASCII 铠装公钥在哪里：

```
<?php
$gpg = new gnupg();
$info = $gpg -> import($keydata);
print_r($info);
?> 
```

然后使用此密钥加密数据，这次使用客户端密钥的指纹：

```
<?php
  $gpg = new gnupg();
  $gpg -> addencryptkey("8660281B6051D071D94B5B230549F9DC851566DC");
  $enc = $gpg -> encrypt("just a test");
  echo $enc;
?> 
```

如果要加密文件，请读取并将它们传递给`encrypt()`. 确保`DEADBEEFDEADBEEF`在引用密钥时至少使用长密钥 ID（例如 ）、更好的指纹（如示例中）；并且[永远不要使用短密钥 ID ( `DEADBEEF`)，因为它们很容易受到碰撞攻击](https://security.stackexchange.com/q/74009/19837)。

* * *

这是用户在 PHP 手册中添加的更[全面的示例。](http://www.php.net/manual/en/function.gnupg-encrypt.php#81229)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-04-19T00:00:18.073

在这里留下一个答案，因为网络上的许多 PHP GnuPG 示例都是非常简单的，希望这可以为人们节省一些挫败感。

基本上，它反映了 GnuPG 命令行工具的工作方式。如果密钥不在 gpg 的密钥环中，则需要导入密钥，然后您需要选择收件人的密钥以用于加密/解密。

```
gpg --import recipients-public-key.asc
gpg -r recipient --encrypt test.txt 
```

如果你做了我所做的并作为接收者传递了密钥，它就行不通了！

[在GPG 手册](https://www.gnupg.org/documentation/manpage.html)或[PHP 文档](https://www.php.net/manual/en/function.gnupg-adddecryptkey.php)中不清楚这个字段是什么，将这个字段称为“指纹”。检查 gpg 的密钥环以获取您新导入的密钥：

```
gpg --list-keys 
```

这将输出如下内容：

```
pub   rsa2048 2019-04-14 [SC] [expires: 2021-04-14]
      0DAA2C747B1974BE9EB9E6DCF7EE249AD00A46AA
uid           [ultimate] Dean Or
sub   rsa2048 2019-04-14 [E] [expires: 2021-04-14] 
```

这将为您提供 UID，并在第二行提供与每个键关联的指纹。**据我所知，您可以使用 UID 和指纹作为收件人。**

因此，您要加密的 PHP 代码可能如下所示：

```
// Encrypt
$gpg = new gnupg();
$gpg->seterrormode(gnupg::ERROR_EXCEPTION);

// Check key ring for recipient public key, otherwise import it
$keyInfo = $gpg->keyinfo('0DAA2C747B1974BE9EB9E6DCF7EE249AD00A46AA');
if (empty($keyInfo)) {
    $gpg->import('recipients-public-key.asc');
}
$gpg->addencryptkey('0DAA2C747B1974BE9EB9E6DCF7EE249AD00A46AA');
echo $gpg->encrypt('This is a test!'); 
```

然后收件人的代码将如下所示：

```
// Decrypt
$gpg = new gnupg();
$gpg->seterrormode(gnupg::ERROR_EXCEPTION);

// Check key ring for recipient private key, otherwise import it
$keyInfo = $gpg->keyinfo('0DAA2C747B1974BE9EB9E6DCF7EE249AD00A46AA');
if (empty($keyInfo)) {
    $gpg->import('recipients-private-key.asc');
}
$gpg->adddecryptkey('0DAA2C747B1974BE9EB9E6DCF7EE249AD00A46AA', '');
echo $gpg->decrypt($encyptedMessage); 
```

请注意，收件人的公钥和私钥的指纹相同。

adddecryptkey 不使用密码也有一个已知问题！您需要删除密码或更改您的 GnuPG 版本。

# c# - 如何在 Windows Store 应用程序中为图像添加标题

> ID：15969741
> 
> 赞同：0
> 
> 时间：2013-04-12T11:04:48.130
> 
> 标签：c#, windows-8, windows-store-apps

当用户在 Windows 8 App Store 应用程序中选择图像时，我被要求自动为图像添加标题（当前日期和时间）。

我知道如何在“沼泽标准窗口”中做到这一点，已经做了几次，但是，我不确定如何在应用商店应用程序中实现这一点。

有没有人有任何指导？因为我不能立即看到 GraphicsHandle 或类似的东西。

提前谢谢了。

# compiler-construction - 解析外部模块中的函数类型

> ID：15969742
> 
> 赞同：1
> 
> 时间：2013-04-12T11:04:49.823
> 
> 标签：compiler-construction, module, programming-languages, static-typing

假设我们有一种虚构的静态类型编程语言——我们称之为*SL*。每个 SL 文件对应一个*模块*- SL 将相关功能逻辑分组到命名空间中。

对当前模块中的函数的调用很容易检查：编译器通过发现所有声明的函数并存储它们的签名。我们稍后可以通过将参数类型与签名中形式参数的类型进行比较来验证任何此类调用。

*但是，处理对其他*模块中的函数的调用似乎更复杂一些。特别是，假设编译器可以定位到与导入模块名称对应的源代码/目标代码，它是如何提取类型信息的呢？可以：

*   扫描解析导入模块的源代码，直到找到函数声明？
*   从目标文件中读取某种元数据？
*   对符号名中的函数返回类型和参数类型进行编码，并在编译时读取符号表？
*   在其他地方查找元数据？

我很好奇 Haskell、D 和 Go 等现代语言的编译器采用什么方法。

* * *

编辑：我知道 C 和 C++ 使用头文件解决了这个问题。我对这种方法不感兴趣。理想情况下，我正在寻找一个根本不涉及任何解析的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:12:52.923

首先，请注意这种类型解析是编译器的属性，而不是语言本身。C/C++ 的不同实现实际上在这些方面提供了不同的特性——例如，微软的“预编译头文件”选项。

Haskell 的 GHC 编译器通过生成包含必要类型信息的接口文件（带有“.hi”后缀）来处理这个问题。我想这符合“在其他地方查找元数据”的资格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:36:38.623

这就是为什么您需要 c/c++ 的头文件来包含静态库或 dll 的原因。对于 dll，您可以通过仅检查 dll 来找出函数。所以这意味着dll文件存储了函数的名称、返回值和参数类型。有一些工具可以生成此声明。

实际上，您为您的问题提供了解决方案。所有方法都根据情况使用。

> 从目标文件中读取某种元数据？

对于像 dll 这样的动态库，您可以动态查询目标代码并通过函数指针调用它。去[http://code.google.com/p/go-wiki/wiki/WindowsDLLs](http://code.google.com/p/go-wiki/wiki/WindowsDLLs) 所以是的。.net 语言，如 c#，vb 经常使用它。

> 在其他地方查找元数据？

对于 C/C++，如果使用静态库，则需要一个用于定义的头文件。我不能举出你说的语言的例子。

> 扫描解析导入模块的源代码，直到找到函数声明？

如果您有代码，那么它就像您拥有的其他代码一样，是显而易见的做法。

我认为 Go、D 或 Haskell 与 C/C++ 没有什么不同。

# c# - 序列化并添加到 XDocument

> ID：15969743
> 
> 赞同：2
> 
> 时间：2013-04-12T11:04:50.523
> 
> 标签：c#, serialization

```
I have Class Calendar

        public class Calendar
        {
        public static List<ServiceCalendar> DaysOfWeek
                {
                    get
                    {
                        return new List<Calendar>
                        {
                            new Calendar { Id = 1, Code = "Mo", Name = "Mo" },
                            new Calendar { Id = 2, Code = "Tu", Name = "Tu" },
                            new Calendar { Id = 3, Code = "We", Name = "We" },
                            new Calendar { Id = 4, Code = "Th", Name = "Th" },
                            new Calendar { Id = 5, Code = "Fr", Name = "Fr" },
                            new Calendar { Id = 6, Code = "Sa", Name = "Sa" },
                            new Calendar { Id = 7, Code = "Su", Name = "Su" }
                        };
                    }
                }
        public static List<Calendar> MonthsOfYear
            {
                get
                {
                    return new List<Calendar>
                    {
                        new Calendar { Id = 1, Code = "Jan", Name = "Jan" },
                        new Calendar { Id = 2, Code = "Feb", Name = "Feb" },
                        new Calendar { Id = 3, Code = "Mar", Name = "Mar" },
                        new Calendar { Id = 4, Code = "Apr", Name = "Apr" },
                        new Calendar { Id = 5, Code = "May", Name = "May" },
                        new Calendar { Id = 6, Code = "Jun", Name = "Jun" },
                        new Calendar { Id = 7, Code = "Jul", Name = "Jul" },
                        new Calendar { Id = 8, Code = "Aug", Name = "Aug" },
                        new Calendar { Id = 9, Code = "Sep", Name = "Sep" },
                        new Calendar { Id = 10, Code = "Oct", Name = "Oct" },
                        new Calendar { Id = 11, Code = "Nov", Name = "Nov" },
                        new Calendar { Id = 12, Code = "Dec", Name = "Dec" },
                    };
                }
            }

        }

My Serizlization Class 

public static class SerializationUtil
    {
        public static T Deserialize<T>(XDocument doc)
        {
            XmlSerializer xmlSerializer = new XmlSerializer(typeof(T));

            using (var reader = doc.Root.CreateReader())
            {
                return (T)xmlSerializer.Deserialize(reader);
            }
        }

        public static XDocument Serialize(this object obj)
        {
            XmlSerializer xmlSerializer = new XmlSerializer(obj.GetType());

            XDocument doc = new XDocument();
            using (var writer = doc.CreateWriter())
            {
                xmlSerializer.Serialize(writer, obj);
            }

            return doc;
        } 
```

我需要序列化两个对象 MonthsOfYear 和 DaysOfWeek 并将它们添加到 XDocument

```
XDocument doc = new XDocument();

doc = SerializationUtil.Serialize(trigger.MonthsOfYear);
var daysOfWeek = SerializationUtil.Serialize(trigger.DaysOfWeek) 
```

如何将 DaysOfWeek 序列化添加到 doc 和反序列化之后

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:09:29.217

您可以使用 WriteTo 方法：

[http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.writeto.aspx](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.writeto.aspx)

这样的东西会满足您的需求吗？

```
 public static XDocument Serialize(this Calendar obj)
    {
        XDocument doc = new XDocument();

        using (var writer = doc.CreateWriter())
        {
            writer.WriteStartElement("Calendar");

            foreach (var dayOfWeek in obj.DaysOfWeek)
            {
                writer.WriteStartElement("DayOfWeek");

                writer.WriteAttributeString("Id", dayOfWeek.Id.ToString());
                writer.WriteAttributeString("Code", dayOfWeek.Code);
                writer.WriteAttributeString("Name", dayOfWeek.Name);

                writer.WriteEndElement();
            }

            foreach (var monthOfYear in obj.MonthsOfYear)
            {
                writer.WriteStartElement("MonthOfYear");

                writer.WriteAttributeString("Id", monthOfYear.Id.ToString());
                writer.WriteAttributeString("Code", monthOfYear.Code);
                writer.WriteAttributeString("Name", monthOfYear.Name);

                writer.WriteEndElement();
            }
        }

        return doc;
    } 
```

**更新**

或将您的代码改进为如下所示：

```
class Program
{
    static void Main(string[] args)
    {
        var document = CalendarService.DaysOfWeek.Serialize();
    }
}

public static class CalendarService
{
    public static List<Calendar> DaysOfWeek
    {
        get
        {
            return new List<Calendar>
                    {
                        new Calendar { Id = 1, Code = "Mo", Name = "Mo" },
                        new Calendar { Id = 2, Code = "Tu", Name = "Tu" },
                        new Calendar { Id = 3, Code = "We", Name = "We" },
                        new Calendar { Id = 4, Code = "Th", Name = "Th" },
                        new Calendar { Id = 5, Code = "Fr", Name = "Fr" },
                        new Calendar { Id = 6, Code = "Sa", Name = "Sa" },
                        new Calendar { Id = 7, Code = "Su", Name = "Su" }
                    };
        }
    }
    public static List<Calendar> MonthsOfYear
    {
        get
        {
            return new List<Calendar>
                {
                    new Calendar { Id = 1, Code = "Jan", Name = "Jan" },
                    new Calendar { Id = 2, Code = "Feb", Name = "Feb" },
                    new Calendar { Id = 3, Code = "Mar", Name = "Mar" },
                    new Calendar { Id = 4, Code = "Apr", Name = "Apr" },
                    new Calendar { Id = 5, Code = "May", Name = "May" },
                    new Calendar { Id = 6, Code = "Jun", Name = "Jun" },
                    new Calendar { Id = 7, Code = "Jul", Name = "Jul" },
                    new Calendar { Id = 8, Code = "Aug", Name = "Aug" },
                    new Calendar { Id = 9, Code = "Sep", Name = "Sep" },
                    new Calendar { Id = 10, Code = "Oct", Name = "Oct" },
                    new Calendar { Id = 11, Code = "Nov", Name = "Nov" },
                    new Calendar { Id = 12, Code = "Dec", Name = "Dec" },
                };
        }
    }
}

public static class SerializationUtil
{
    public static T Deserialize<T>(XDocument doc)
    {
        XmlSerializer xmlSerializer = new XmlSerializer(typeof(T));

        using (var reader = doc.Root.CreateReader())
        {
            return (T)xmlSerializer.Deserialize(reader);
        }
    }

    public static XDocument Serialize(this object obj)
    {
        XmlSerializer xmlSerializer = new XmlSerializer(obj.GetType());

        XDocument doc = new XDocument();
        using (var writer = doc.CreateWriter())
        {
            xmlSerializer.Serialize(writer, obj);
        }

        return doc;
    }
}

[Serializable]
public class Calendar
{
    public int Id { get; set; }
    public string Code { get; set; }
    public string Name { get; set; }
} 
```

}

# c# - JQPlot 和 C# 响应问题

> ID：15969747
> 
> 赞同：0
> 
> 时间：2013-04-12T11:05:01.160
> 
> 标签：c#, jquery, jqplot, webmethod

我有一个JQPlot 图表，调用一个WebMethod 是c#。WebMethod 调用 sp 并返回日期和金额。我遇到了返回数据的问题。Firebug 报告以下内容：

SyntaxErrorL JSON.parseLunexpected character var = series = JSON.parse(data.d);

我的 WebMethod 的响应是：

```
{"d":[{"__type":"GlobalClasses+jqplotModel","amount":25000.00,"ValueDate":"2013-03-27"},    
{"__type":"GlobalClasses+jqplotModel","amount":10000.00,"ValueDate":"2013-03-27"}, 
{"__type":"GlobalClasses+jqplotModel","amount":200000.00,"ValueDate":"2013-03-27"},
{"__type":"GlobalClasses+jqplotModel","amount":69900.00,"ValueDate":"2013-03-27"},]} 
```

网络方法代码：

```
 [WebMethod]
     [ScriptMethod]
     public static List<GlobalClasses.jqplotModel> BuildCharts()
     {

    List<GlobalClasses.jqplotModel> newChart = new List<GlobalClasses.jqplotModel>();

    using (SqlConnection conn = new SqlConnection(WebConfigurationManager.ConnectionStrings 
     ["Conn"].ConnectionString))
     {
        using (SqlCommand cmd = new SqlCommand("ChartData_Sel", conn))
        {

            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.Add("@senderBIC", SqlDbType.VarChar, 11).Value = "ARBUGB2LXXX";
            cmd.Parameters.Add("@messageType", SqlDbType.VarChar, 3).Value = "103";
            cmd.Connection = conn;

            conn.Open();
            using (SqlDataReader dreader = cmd.ExecuteReader())
            {
                while (dreader.Read())
                {
                    GlobalClasses.jqplotModel dataSet = new GlobalClasses.jqplotModel()
                    {
                        amount = dreader.GetDecimal(0),
                        ValueDate = dreader.GetString(1)
                    };
                    newChart.Add(dataSet);
                }
            }

        }

      }
        return newChart;
    } 
```

像这样从我的 HTML 页面调用：

```
 $.ajax({
            type: "POST",
            url: "Default.aspx/BuildCharts",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                var series = JSON.parse(data.d);
                chart = $.jqplot("chart", [series], chartOptions);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:09:59.130

您返回的 JSON 格式不正确，因为您`,`在最后一项末尾有一个额外的内容。你可以[在这里查看](http://jsonlint.com/)。如果你删除它，你不应该有解析错误。

试试这个

```
{"d":[{"__type":"GlobalClasses+jqplotModel","amount":25000,"ValueDate":"2013-03-27"},{"__type":"GlobalClasses+jqplotModel","amount":10000,"ValueDate":"2013-03-27"},{"__type":"GlobalClasses+jqplotModel","amount":200000,"ValueDate":"2013-03-27"},{"__type":"GlobalClasses+jqplotModel","amount":69900,"ValueDate":"2013-03-27"}]} 
```

# node.js - 在 ondata 事件中更改 node.js 流

> ID：15969748
> 
> 赞同：2
> 
> 时间：2013-04-12T11:05:02.430
> 
> 标签：node.js, https, stream

我正在尝试在将 node.js http 流发送到解析器之前对其进行编辑。我已经实现了以下代码

```
//catch any connection event to this server
server.on('secureConnection', function (stream) {
  //create a new buffer to hold what we are receiving in this stream
  var receiveBuffer = new Buffer(0);
  //store a link to the original ondata function so we can call it and restore it
  originalOnDataFunction = stream.ondata;
  //declare a new ondata function for this stream
  stream.ondata = function (d, start, end) {
    //record what we have received 
    receiveBuffer = Buffer.concat([receiveBuffer, d.slice(start, end)]);
    //if what we have received is greater than 4 (i.e. we have at least got a GET request)
    //then make changes
    if (receiveBuffer.length >= 4) {
      //reset the streams ondata function to the original
      //this is all we want to edit for this connection
      stream.ondata = originalOnDataFunction;
      //if the first 11 characters of the buffer are 'MKCALENDAR ' then make a change
      if (receiveBuffer.toString('ascii', 0, 11) === 'MKCALENDAR ') {
        //I change this to MKCOL /MKCALENDAR<rest of buffer> as this will work with the node.js http parser
        //and then I can check on the other side for a MKCOL method with /MKCALENDAR as the start of the url and 
        //know that it was a MKCALENDAR method
        var rewrittenBuffer = Buffer.concat([new Buffer('MKCOL /MKCALENDAR', 'ascii'), receiveBuffer.slice(11)]);
        //now call the original ondata function with this new buffer
        stream.ondata.apply(this, [rewrittenBuffer, 0, rewrittenBuffer.length]);
      } else {
        //no change needed just call the original ondata function with this buffer
        stream.ondata.apply(this, [receiveBuffer, 0, receiveBuffer.length]);
      }
    }
  }
}); 
```

我从这里的答案中得到了[Overriding Node.js HTTP parser](https://stackoverflow.com/questions/9881305/overriding-node-js-http-parser)

上面的代码似乎在大约 95% 的时间内都可以工作。但是，它会不断丢弃然后只是超时的请求。我看不出它是如何或在哪里丢弃它们的。任何人都可以帮忙。

谢谢，

标记

请注意，secureConnection 来自 node.js https.createServer( 调用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:10:36.547

乔纳森第一个数据包似乎是所有的标题，所以这条线工作正常。我确实让它工作了，问题似乎在于 .apply 语句并不总是有效。以下工作正常：

```
//catch any secure connection event to this server
server.on('secureConnection', function (stream) {
  //create a new buffer to hold what we are receiving in this stream
  var receiveBuffer = new Buffer(0);
  //store a link to the original ondata function so we can call it and restore it
  stream._ondataOld = stream.ondata;
  stream.ondata = function(d,start,end){
    receiveBuffer = Buffer.concat([receiveBuffer, d.slice(start, end)]);
    //if what we have received is greater than 4 (i.e. we have at least got a GET request)
    //then make changes
    if (receiveBuffer.length >= 4) {
      //reset the streams ondata function to the original
      //this is all we want to edit for this connection
      stream.ondata = stream._ondataOld;
      //if the first 11 characters of the buffer are 'MKCALENDAR ' then make a change
      if (receiveBuffer.toString('ascii', 0, 11) === 'MKCALENDAR ') {
        //I change this to MKCOL /MKCALENDAR<rest of buffer> as this will work with the node.js http parser
        //and then I can check on the other side for a MKCOL method with /MKCALENDAR as the start of the url and
        //know that it was a MKCALENDAR method
        //this facilitates MKCALENDAR calls on the CALDAV server
        var rewrittenBuffer = Buffer.concat([new Buffer('MKCOL /MKCALENDAR', 'ascii'), receiveBuffer.slice(11)]);
        //console.log(rewrittenBuffer.toString('ascii',0,rewrittenBuffer.length));
        //console.log(rewrittenBuffer.toString('ascii'));
        //now call the original ondata function with this new buffer
        stream.ondata(rewrittenBuffer,0,rewrittenBuffer.length);
      } else {
        //no change needed just call the original ondata function with this buffer
        stream.ondata(d,start,end);
      }
    } else {
      stream.ondata(d,start,end);
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:38:55.140

你确定你想要

```
if (receiveBuffer.length >= 4) 
```

如果第一个缓冲区是包含至少前四个字节的部分 MKCALENDAR，则上面的代码不会转换为 MKCOL。

# php - 我想对 PHP 中包含数字的变量进行排序

> ID：15969751
> 
> 赞同：-1
> 
> 时间：2013-04-12T11:05:04.227
> 
> 标签：php, arrays, sorting

我正在做一个项目，我想做的是对包含数字的变量进行排序..比如 123546 等..现在我想对它们进行排序，比如 123456 等，如果它在变量中，那么它很好，但如果它在数组中然后也非常感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:06:33.477

假设所有数字实际上都是单数，这应该会解决它。

```
$numbers = str_split('123546');

sort($numbers);

echo join('', $numbers); 
```

[**演示**](http://codepad.viper-7.com/3hXQ29)

它用于`str_split()`将字符串转换为数组，然后对数组进行排序并连接在一起。

# playframework - 玩1.2.4，无法设置cookies

> ID：15969757
> 
> 赞同：1
> 
> 时间：2013-04-12T11:05:21.333
> 
> 标签：playframework, playframework-1.x

我需要保留用户的令牌，如 play 的“记住我”，但我无法在 mac 上使用 safari、chrome 设置 cookie（换句话说，我无法获取名为“userToken”的 cookie）。我应该怎么办？我使用 play!framework`v1.2.4`

```
public class Security extends Secure.Security {

static boolean authenticate(String username, String password) {
    String token = "";
    //to get API token
    MultivaluedMap postParams = new MultivaluedMapImpl();
    postParams.add("login[email]", username);;
    MultivaluedMap queryParams = new MultivaluedMapImpl();
    queryParams = new MultivaluedMapImpl();
    queryParams.add("path_info", "login");
    String url = Play.configuration.getProperty("mctokenendpoint");

    Client client = new Client();
    client.setFollowRedirects(true);
    WebResource resource = client.resource(url);
    try {
        String resultJSON = resource.queryParams(queryParams).accept(MediaType.APPLICATION_JSON)
                .post(String.class, postParams);
        Map result;
        if (resultJSON != null) {
            try {
                result = new ObjectMapper().readValue(resultJSON, Map.class);
                token = result.get("id").toString() + "-" + result.get("token").toString();
                session.put("loginToken", token);
                //keep token
                rememberToken(token);
                return true;
            } catch (Exception e) {
                Logger.error(e.toString(), e);
                return false;
            }
        }
    } catch (Exception e) {
        Logger.error(e.toString(), e);
        return false;
    }
    return false;
}

/**
 * remember token
 * @param token
 */
@Util
public static void rememberToken(String token) {
    if (token != null && !token.equals("")) {
        Date expiration = new Date();
        String duration = "1mn"; // maybe make this override-able
        if(duration.indexOf("d") != -1 && duration.indexOf("d")+1 == duration.length() ) {
            duration = String.valueOf(24*Long.parseLong(duration.substring(0, duration.indexOf("d"))));
        }
        expiration.setTime(expiration.getTime() + Time.parseDuration(duration)*1000);
        response.setCookie("userToken", Crypto.sign(token + "_" + expiration.getTime()) + "_" + token + "_"
                + expiration.getTime(), duration);
    }
}

}

@With(Secure.class)
public class ApplicationController extends Controller {

@Before
public static void commBefore() {
    Http.Cookie remember = request.cookies.get("rememberme");

    if (remember != null) {
        Http.Cookie userToken = request.cookies.get("userToken");

        if (userToken != null) {
            int firstIndex = userToken.value.indexOf("_");
            int lastIndex = userToken.value.lastIndexOf("_");
            if (lastIndex > firstIndex) {
                String token = userToken.value.substring(firstIndex + 1, lastIndex);
                String time = userToken.value.substring(lastIndex + 1);
                Date expirationDate = new Date(Long.parseLong(time)); 
                Date now = new Date();
                if (expirationDate == null || expirationDate.before(now)) {
                    try {

                        Secure.logout();
                    } catch (Throwable e) {
                        Logger.error(e.toString(), e);
                        error();
                    }
                }
                if (session.get("loginToken") != null) {
                    if (!session.get("loginToken").equals(token)) {
                        //remove old token
                        session.remove("loginToken");
                        //set new token
                        session.put("loginToken", token);
                    }
                } else {
                    session.put("loginToken", token);
                }
            }
        } else {
            try {
                Secure.logout();
            } catch (Throwable e) {
                Logger.error(e.toString(), e);
                error();
            }
        }
    } 

}
} 
```

这些代码无法在mac上完美运行，但我不知道，请帮助我

# jquery - 哪个更快？

> ID：15969760
> 
> 赞同：2
> 
> 时间：2013-04-12T11:05:29.173
> 
> 标签：jquery, ajax, optimization, for-loop, each

我有一个 AJAX + jQuery 示例，成功时我有我的数据数组。对于我在 Firebug 中的实验，我没有看到太大的不同。哪个更快，`for`或者`each`在 jQuery 中？

`for`例子：

```
for (var i = 0; i < data.length; i++) {
    options += '<option value="' + data[i].c_id + '">'+ data[i].c_name +'</option>';
} 
```

`each`例子：

```
$(data).each(function() {
    options += '<option value="' + $(this).attr('c_id') + '">' + $(this).attr('c_name') + '</option>';
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T11:15:29.643

在这种情况下，for 循环肯定会更快。在遍历页面中的 html 标记时，您通常更喜欢使用 jquery 的 .each() 。Jquery 可能并不总是比核心 javasript 快，但它绝对更清洁和对开发人员友好；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T11:07:41.567

绝对 for 循环更快。但会有非常小的差异。只有当你有非常大的数据时，它才会有所作为。

# maven - 具有各种模块的项目的 Maven 肯定测试结果

> ID：15969764
> 
> 赞同：7
> 
> 时间：2013-04-12T11:05:46.593
> 
> 标签：maven, junit, report, surefire

我有一个带有各种子模块的父 pom 项目。我想获得单元测试结果的报告，但使用 surfire 插件，我得到每个模块的独立结果。

我的意思是，如果我执行：

```
mvn surefire-report:report 
```

从父pom所在的父目录中，它为每个子项目创建一个surefire-report.html，但我想要的只是一个包含所有子项目结果的html。

有没有办法自动实现这一点？使用surefire或其他插件。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-12T11:13:29.300

要创建，`aggregate report`请尝试在`parent project`.

```
mvn surefire-report:report -Daggregate=true 
```

我希望这可能会有所帮助。

# node.js - 如何处理 should.js 断言错误

> ID：15969770
> 
> 赞同：3
> 
> 时间：2013-04-12T11:06:04.490
> 
> 标签：node.js, exception, assert, handle, should.js

应该如何处理由 should.js（或 node.js）失败的断言引发的未捕获异常并在断言失败的同一函数/块上继续执行？

我尝试将断言包装在 try/catch 中，但无论如何它似乎都会上升到 process.on('uncaughtexception')。

最后，在生产代码中使用断言来验证对象属性是否是一种好的实践和高性能？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-24T15:31:42.617

嗨@dublx，我认为有完全有效的用例可以在生产代码中使用断言。例如，如果您依赖一个您知道以某种方式运行的外部 API。此 API 可能会突然更改并破坏您的代码。如果一个断言检测到 API 发生了变化，并且您会收到一封自动电子邮件，那么您甚至可以在您的客户意识到中断之前修复它。

也就是说，我推荐[假设.js](http://assumejs.org)，它可以完全解决您的问题。甚至性能也很出色：一个断言只消耗 17µs 或 0.017ms。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:19:16.543

正如[文档](http://nodejs.org/api/assert.html)所述，Node 的断言基本上是用于单元测试的。因此我不会在生产代码中使用它。我更喜欢单元测试来确保断言在几种情况下是正确的。

但是，我认为您在这里以错误的方式使用断言：如果断言失败，则出现问题。您的应用处于某种未知状态。

如果您对无效对象进行某种处理，则断言不是正确的工具：据我了解您的用例，您并不真正要求对象有效，但如果不是，则想做一些不同的事情。这是一个简单的条件，而不是断言。

# reporting-services - SSRS 矩阵报告表达式的总和

> ID：15969778
> 
> 赞同：1
> 
> 时间：2013-04-12T11:06:40.067
> 
> 标签：reporting-services, matrix, sum, expression

我正在尝试创建 sum() 表达式，它将汇总行并将结果放入“TPM 中的总服务器”列中。看起来我无法为 sum 表达式提供正确的提要。

设计模式下的 SSRS 矩阵报告如下所示：

[矩阵报表图片](http://img812.imageshack.us/img812/2866/matrix1c.jpg)

[TPM_scan_type] 表达式可以有 2 个值：“TPM 成功扫描”或“TPM 失败扫描”

```
=Switch(Fields!ScanStatus.Value = "OK","TPM Succesfull Scan",Fields!ScanStatus.Value = "FAILED!","TPM Failed Scan") 
```

[scan_count] 表达式只是聚合每个“主要 SA”的值

```
=Switch(Fields!ScanStatus.Value="FAILED!",Count(Fields!ScanStatus.Value),Fields!ScanStatus.Value="OK", CountDistinct(Fields!ServerName.Value)) 
```

结果：

[报表输出图片](http://img90.imageshack.us/img90/4820/matrix2c.jpg)

数据样本：

```
USE tempdb;
GO

IF OBJECT_ID('dbo.TPM_test') IS NOT NULL
DROP TABLE dbo.TPM_test;
GO

CREATE TABLE dbo.TPM_test
(
ServerName   varchar(30) NOT NULL,
ScanStatus   varchar(10) NOT NULL,
Primary_SA   varchar(30) NOT NULL,
HotfixID     int
);

INSERT INTO dbo.TPM_test(ServerName, ScanStatus, Primary_SA, HotfixID)
VALUES('LDNSQLF700', 'OK', 'SA1', 157848);
INSERT INTO dbo.TPM_test(ServerName, ScanStatus, Primary_SA, HotfixID)
VALUES('LDNSQLF700', 'OK', 'SA1', 976832);
INSERT INTO dbo.TPM_test(ServerName, ScanStatus, Primary_SA, HotfixID)
VALUES('LDNSQLF700', 'OK', 'SA1', 234354);
INSERT INTO dbo.TPM_test(ServerName, ScanStatus, Primary_SA, HotfixID)
VALUES('NYSQL502', 'FAILED!', 'SA1', '');
INSERT INTO dbo.TPM_test(ServerName, ScanStatus, Primary_SA, HotfixID)
VALUES('PSQL1011', 'FAILED!', 'SA1', '');
INSERT INTO dbo.TPM_test(ServerName, ScanStatus, Primary_SA, HotfixID)
VALUES('NTQDF002', 'OK', 'SA1', 878641);

INSERT INTO dbo.TPM_test(ServerName, ScanStatus, Primary_SA, HotfixID)
VALUES('AUSSQL140', 'OK', 'SA2', 537990);
INSERT INTO dbo.TPM_test(ServerName, ScanStatus, Primary_SA, HotfixID)
VALUES('AUSSQL140', 'OK', 'SA2', 1349605);
INSERT INTO dbo.TPM_test(ServerName, ScanStatus, Primary_SA, HotfixID)
VALUES('JAP543X2', 'FAILED!', 'SA2', '');
INSERT INTO dbo.TPM_test(ServerName, ScanStatus, Primary_SA, HotfixID)
VALUES('EU456CLX', 'FAILED!', 'SA2', '');
INSERT INTO dbo.TPM_test(ServerName, ScanStatus, Primary_SA, HotfixID)
VALUES('EUCTX654', 'OK', 'SA2', 5637965);
INSERT INTO dbo.TPM_test(ServerName, ScanStatus, Primary_SA, HotfixID)
VALUES('EUCTX654', 'OK', 'SA2', 6464367) ;
INSERT INTO dbo.TPM_test(ServerName, ScanStatus, Primary_SA, HotfixID)
VALUES('EUCTX654', 'OK', 'SA2', 1323123) ;
INSERT INTO dbo.TPM_test(ServerName, ScanStatus, Primary_SA, HotfixID)
VALUES('EUCTX654', 'OK', 'SA2', 1004326) ;
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:09:43.187

`CountRows`只使用函数而不是**scan_count**`Switch`的语句会不会更容易？

 **看起来您已经在 Matrix 中设置了行/列组，因此`CountRows`只会在它被调用的任何 Scope 中执行并给出您想要的结果。

我创建了一个简单的测试数据集：

![在此处输入图像描述](https://i.stack.imgur.com/qelcZ.png)

使用此数据集，我根据您上面的表达式添加了一个计算字段**TPM_scan_type 。**

基于此，我创建了一个标准矩阵：

![在此处输入图像描述](https://i.stack.imgur.com/j1qco.png)

在每种情况下，屏幕截图中的表达式都是`=CountRows()`.

另请注意，**TPM 中的 Total Servers**不在列组范围内。

最终结果：

![在此处输入图像描述](https://i.stack.imgur.com/QpSsq.png)

这看起来像您所需要的，并且似乎以更简单的方式进行。

**评论后编辑：**

好的，我已更改 DataSet 以包含*OK* **ScanStatus**结果的重复行：

![在此处输入图像描述](https://i.stack.imgur.com/m4Oqd.png)

我已将**TPM**表达式中的 Total Servers 更改为以下内容：

```
=Count(IIf(Fields!ScanStatus.Value = "FAILED!", Fields!ServerName.Value, Nothing))
    + CountDistinct(IIf(Fields!ScanStatus.Value = "OK", Fields!ServerName.Value, Nothing)) 
```

我认为，这给出了所需的结果，与使用这个新数据集的上述报告输出相同。

事实上，这也可以用于**TPM_Scan_Type**。

最后一个建议 - 有什么理由不能只`=CountDistinct(Fields!ServerName.Value)`用于所有表达式？如果我了解您的数据，这将给出所需的结果 - 例如，它适用于上述数据集。

**添加数据集后编辑：**

我已更新报告以使用您的示例数据：

![在此处输入图像描述](https://i.stack.imgur.com/T6PjI.png)

两个表达式的结果，即

```
=Count(IIf(Fields!ScanStatus.Value = "FAILED!", Fields!ServerName.Value, Nothing))
    + CountDistinct(IIf(Fields!ScanStatus.Value = "OK", Fields!ServerName.Value, Nothing)) 
```

和

```
=CountDistinct(Fields!ServerName.Value) 
```

![在此处输入图像描述](https://i.stack.imgur.com/gV2qW.png)

所以对我来说，你似乎可以`=CountDistinct(Fields!ServerName.Value)`在所有情况下使用。**

# mysql - 在两个非常大的表上优化我的查询

> ID：15969782
> 
> 赞同：1
> 
> 时间：2013-04-12T11:06:58.497
> 
> 标签：mysql, performance, optimization, query-optimization

我有 2 个表第一个表名称 cjfeeds 另一个名称是 linkshare 我的 2 个表包含多达 4000 万条记录。所以我的选择查询需要 12 到 15 分钟来获取我的单条记录。

这是我现在的查询：

```
SELECT SUM(SPRICE) AS Tot, MIN(SMIN) AS Min 
FROM 
   (SELECT COUNT(LS.SALEPRICE) AS SPRICE, MIN(LS.SALEPRICE) AS SMIN 
    FROM `linkshare` LS 
    WHERE LS.`PRODUCTNAME` LIKE 'DVS Men\'s Comanche Skate Shoe%' 
    UNION 
    SELECT COUNT(CJ.PRICE) AS SPRICE, MIN(CJ.PRICE) AS SMIN 
    FROM `cjfeeds` CJ 
    WHERE CJ.NAME LIKE 'DVS Men\'s Comanche Skate Shoe%' ) 
   AS xyz 
```

我的问题：我正在为价格字段创建索引键。我怎样才能使用这个查询？

另外如何优化我的查询性能？

我的解释查询如下

![这是一个解释的样子：](https://i.stack.imgur.com/AZXOU.png)

请指教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:19:52.880

首先，没有使用索引。在 LS.PRODUCTNAME 和 CJ.NAME 上放置一个索引。

还怀疑你想要一个 UNION ALL，可能是 COUNT(*) 而不是 COUNT(fieldname)。

价格指数不太可能有帮助。

从长远来看，将产品名称拆分到另一个表中可能会更好，您在那里的表上的行指的是产品表的 id。

# c# - MVC Display 装饰器和使用 EditorFor 应用的 View 有什么关系？

> ID：15969785
> 
> 赞同：2
> 
> 时间：2013-04-12T11:07:04.473
> 
> 标签：c#, html, asp.net-mvc-4

我正在研究在 MVC4 中创建编辑器模板的示例。

我在我的模型中添加了以下内容：

```
[Required]
[DataType(DataType.EmailAddress)]
[Display(Name = "Email"]
public string Email { get; set; } 
```

将此添加到模型的视图中：

```
@Html.EditorFor(m => m.Email) 
```

并使用以下行创建了一个名为 EmailAddress.cshtml 的 EditorTemplate：

```
 @Html.TextBox("", null, new {@class="text-box single-line", type="email", placeholder="Enter an email address"}) 
```

在将 Display 属性更改为以下内容之前，我无法在 Chrome 中显示占位符：

```
[Display(Name = "Email address")] 
```

有人可以向我描述为什么在我更改它之前它不起作用吗？该属性与我调用 EditorFor 时生成的内容之间有什么关系，以及此更改如何导致占位符正确显示？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-23T13:55:58.970

在模型中，装饰者

```
 [Display(Name = "Some Name")]
 public string myproperty{get;set;} 
```

用于在视图中显示标签，通过

```
@Html.Labelfor(m=>m.myproperty) 
```

我相信它与占位符无关

# database - ModelForm独有，如何返回带有错误消息的表单？

> ID：15969787
> 
> 赞同：0
> 
> 时间：2013-04-12T11:07:11.567
> 
> 标签：database, django, django-models, django-forms, django-views

我发现一些帖子或多或少与[这个](https://stackoverflow.com/questions/2141030/djangos-modelform-unique-together-validation)或[另一个](https://stackoverflow.com/questions/1923826/django-how-do-i-validate-unique-together-from-within-the-model)类似的情况相同，但我无法使其中任何一个适应我的情况。如果用户尝试创建另一个与他自己已经存储在数据库中的模型同名的模型，我想要返回到我的表单并发出警告。我想使用[此处](https://docs.djangoproject.com/en/1.5/ref/forms/validation/#cleaning-and-validating-fields-that-depend-on-each-other)描述的 Django 内置设施，但我需要一些建议来更改我的代码：你能帮帮我吗？我的代码如下：

*   **模型.py**

    ```
    class ShapeFile(models.Model):
        name = models.CharField(max_length=100)
        srid = models.ForeignKey(SpatialRefSys)
        model_definition = models.OneToOneField(ModelDefinition)
        user = models.ForeignKey(User)
        color_table = models.ManyToManyField(ColorTable)
        file = models.FileField(upload_to=get_upload_path)
        class Meta:
            unique_together = ('name', 'user') 
    ```

*   **表格.py**

    ```
    class UploadForm(ModelForm):
        class Meta:
            model = ShapeFile
            fields = ('name','srid','file','color_table')
            widgets = {'srid': TextInput()} 
    ```

*   **视图.py**

    ```
    @login_required
    def index(request):
        if request.method == 'POST':
            form = UploadForm(request.POST, request.FILES)
            if form.is_valid():
                req = request.POST
                sridVal = form.cleaned_data['srid'].pk
                shpVal = form.cleaned_data['name']

                # The final table name is something like 'mutant_celeryPy2_123_salzburg_lc'
                end_table_name = request.user.username + "_" + shpVal + '_lc'

                # Creates a table, otherwise return the retrieved one
                model_def, created = ModelDefinition.objects.get_or_create(
                    app_label='celeryPy2',
                    object_name=end_table_name,
                    defaults=dict(
                       bases=(BaseDefinition(base=GeoModel),),
                       fields=(GeometryFieldDefinition(name='the_geom', srid=sridVal),
                               SmallIntegerFieldDefinition(name='cat'),)
                    )
                )
                obj = form.save(commit=False)
                obj.user = request.user
                obj.model_definition = model_def
                obj.save()
                messages.success(request, 'Shapefile upload succesful!')
                return HttpResponse('Stored!')
            else:
                print "Upload shapefile form is invalid!!!"
        else:
            form = UploadForm()

        return render_to_response('celeryPy2/index.html',
                                  {'form': form,},
                                  context_instance=RequestContext(request)) 
    ```

如果我以 user1 身份登录并填写表单，假设名称为“myshape”，当我提交时，我得到“已存储！” 消息：一切正常，模型 user1_myshape_lc 已创建。如果我使用相同的 user1 重新登录并尝试存储字段名称设置为“myshape”的其他数据，就像我正确得到异常之前一样：

```
 Exception Type: IntegrityError at /celeryPy2/main
    Exception Value: duplicate key value violates unique constraint "celeryPy2_shapefile_model_definition_id_key"
    DETAIL:  Key (model_definition_id)=(154) already exists. 
```

如何用警告取回我的表单以获取 Django 异常错误消息？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:59:05.780

模型表单验证应该注意这一点并引发验证错误。但是您已经从表单中排除了该`user`字段，这是`unique_together`约束的一部分，因此它没有得到验证。参考[`validate_unique`](https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.validate_unique)

您可以尝试更改视图代码以`user`在发布的数据中添加字段，然后实例化表单。

或者更好的方法是在表单中添加隐藏的用户字段，以便其可用`request.POST`并且验证按要求工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:40:22.417

感谢 Rohan，我发现隐藏字段解决方案是最好的：现在我正确地取回我的表单并显示错误消息：`Shape file with this Name and User already exists`. 这是我修改后的代码以使事情正常进行：

*   **表格.py**

    ```
    class UploadForm(ModelForm):
        class Meta:
            model = ShapeFile
            fields = ('name','user','srid','file','color_table')
            widgets = {'srid': TextInput(), 'user': HiddenInput()} 
    ```

*   **视图.py**

    ```
    @login_required
    def index(request):
        if request.method == 'POST':
            form = UploadForm(request.POST, request.FILES)
            if form.is_valid():
                req = request.POST
                sridVal = form.cleaned_data['srid'].pk
                shpVal = form.cleaned_data['name']

                # The final table name is something like 'mutant_celeryPy2_123_salzburg_lc'
                end_table_name = request.user.username + "_" + shpVal + '_lc'

                # Creates a table, otherwise return the retrieved one
                model_def, created = ModelDefinition.objects.get_or_create(
                    app_label='celeryPy2',
                    object_name=end_table_name,
                    defaults=dict(
                       bases=(BaseDefinition(base=GeoModel),),
                       fields=(GeometryFieldDefinition(name='the_geom', srid=sridVal),
                               SmallIntegerFieldDefinition(name='cat'),)
                    )
                )
                obj = form.save(commit=False)
                obj.model_definition = model_def
                obj.save()
                messages.success(request, 'Shapefile upload succesful!')
                return HttpResponse('Stored!')
            else:
                print "Upload shapefile form is invalid!!!"
        else:
            form = UploadForm(initial={'user': request.user})

        return render_to_response('celeryPy2/index.html',
                                  {'form': form,},
                                  context_instance=RequestContext(request)) 
    ```

# ember.js - Mark the current detail entry in a master list

> ID：15969791
> 
> 赞同：0
> 
> 时间：2013-04-12T11:07:19.713
> 
> 标签：ember.js, ember-data

I have a list of users which are displayed in a master view on the left side (Twitter Bootstrap CSS). Details of each user can be shown by clicking the `show` button. They will be displayed on the right side (detail).

How can I remove the `show` button for the currently displayed user? e.g. `#/users/1` shouldn't render the `show` button for the first user.

**index.html**

```
<script type="text/x-handlebars" data-template-name="users">
  <div class='row'>
    <div class='span4'>
      <table class='table table-striped'>
        {{#each model}}
          <tr>
            <td>{{lastName}}</td>
            <td>{{#linkTo 'user' this}}<button class="btn" type="button">show</button>{{/linkTo}}</td>
          </tr>
        {{/each}}
      </table>
    </div>
    <div class='span8'>
      {{outlet}}
    </div>
  </div>
</script>

<script type="text/x-handlebars" data-template-name="user">
  <h1>{{firstName}} {{lastName}}</h1>
</script> 
```

**app.js**

```
App = Ember.Application.create();

App.Store = DS.Store.extend({
  revision: 12,
  adapter: 'DS.FixtureAdapter'
})

App.Router.map(function() {
  this.resource('users', function() {
    this.resource('user', { path: ':user_id' })
  })
});

App.UsersRoute = Ember.Route.extend({
  model: function() {
    return App.User.find();
  }
});

App.User = DS.Model.extend({
  firstName: DS.attr('string'),
  lastName: DS.attr('string')
})

App.User.FIXTURES = [{
  id: 1,
  firstName: "Bill",
  lastName: "Clinton"
}, {
  id: 2,
  firstName: "Barack",
  lastName: "Obama"
}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:30:23.920

Ember provides some support for doing what you want. By default it sets the "active" css class on the selected element. You can find more information about that here: [http://emberjs.com/api/classes/Ember.LinkView.html](http://emberjs.com/api/classes/Ember.LinkView.html) (note that the {{#linkTo}} is just a helper based on the LinkView).

The simplest way to override this behavior, since instead of "active" you want to hide the button, would be to make use of the hide class that comes with Twitter Bootstrap. So your users template would look like:

```
<script type="text/x-handlebars" data-template-name="users">
  <div class='row'>
    <div class='span4'>
      <table class='table table-striped'>
        {{#each model}}
          <tr>
            <td>{{lastName}}</td>
            <td>{{#linkTo 'user' this activeClass="hide"}}<button class="btn" type="button">show</button>{{/linkTo}}</td>
          </tr>
        {{/each}}
      </table>
    </div>
    <div class='span8'>
      {{outlet}}
    </div>
  </div>
</script>

<script type="text/x-handlebars" data-template-name="user">
  <h1>{{firstName}} {{lastName}}</h1>
</script> 
```

# sql - 在 oracle join 上匹配精确值

> ID：15969793
> 
> 赞同：1
> 
> 时间：2013-04-12T11:07:22.153
> 
> 标签：sql, oracle, join

就这样吧。
我有两张表，应用程序和报告。
这些表有一个共同的列（分别为 appId、externalAppId），可以将其连接起来以查找唯一值。
我的问题是当我加入这两张表时，我得到了我并不真正想要的值。

样本值

```
Application   Report
No appId      ReportNo ExternalAppId
1  123         1        123
2  456         2        00000123
3  789         3        321 
```

因此，当我在 where 条件中说 Application.appId = Report.ExternalAppId 时，它会从 Report table 返回我的 123 和 00000123 行。
连接中不考虑前导零。
我只需要完全匹配的结果。
在这种情况下，仅第一行。我认为问题的原因是appId是数字，而ExternalAppId是varchar。
这个我也改不了。有什么解决方法吗？
我见过可以删除前导零然后匹配的正则表达式，但只是想知道是否有更好的解决方案。
即我可以指定连接只适用于完全匹配的值吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T11:14:53.537

Oracle 只能比较**相同数据类型**的两个值。我怎么强调都不过分。事实上，大多数语言只有在数据类型相同时才能比较两个值。数学中的关系也将使用相同类型的对象定义（以便您可以定义[传递性](http://en.wikipedia.org/wiki/Transitive_relation)、[自反性](http://en.wikipedia.org/wiki/Reflexive_relation)......）。橙子和苹果也有这样的说法：不要试图比较它们。

因此，当您要求 Oracle 比较不同数据类型的两个值时，会发生**隐式转换**。在大多数情况下，您应该避免这些转换，因为选择哪种数据类型而不是其他数据类型的规则可能非常复杂，并且（就像在这种情况下）经常会产生错误，因为您会错误地猜测哪种类型会*获胜*。您应该依赖显式转换（您指定的转换）。

我假设那`Application (appId)`是 a`NUMBER`并且`Report (ExternalAppId)`是 type `VARCHAR2`。在这种情况下，Oracle 选择在空格中转换`ExternalAppId`为, ，因为**数字没有格式**。`NUMBER``NUMBER``00123=123`

 **你应该把你的加入条件写成：

```
to_char(application.appId) = report.externalAppId 
```**

# excel - 使用字符串调用 Sub

> ID：15969796
> 
> 赞同：14
> 
> 时间：2013-04-12T11:07:31.107
> 
> 标签：excel, vba, string

我想根据`i`.

例如，如果`i = 1`调用`sale_call1`和如果`i = 2`调用`sale_call2`。

```
Private Sub test_Click()
    Dim i As String
    Dim pro As String

    i = Me.tb1.Value
    pro = "sale_call" + i

    If i = "1" Then
        Call pro
    Else
        Call pro
    End If
End Sub

Sub sale_call1()
    MsgBox "Hello"
End Sub

Sub sale_call2()
    MsgBox "goodbye"
End Sub 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-12T11:12:34.523

尝试这个

替换`Call pro`为`Application.Run pro`

例子

```
Private Sub test_Click()
    Dim i As String
    Dim pro As String

    i = 1
    pro = "sale_call" + i

    '~~> This will run sale_call1
    Application.Run pro

    i = 2
    pro = "sale_call" + i

    '~~> This will run sale_call2
    Application.Run pro
End Sub

Sub sale_call1()
    MsgBox "Hello"
End Sub

Sub sale_call2()
    MsgBox "goodbye"
End Sub 
```

**跟进**

如果您的代码不在模块中，而是在用户表单或工作表代码区域中，那么`Application.Run`直到那时才会起作用，`sale_call1`或者`sale_call2`没有放在模块中。如果您不想将它们移动到模块中，则必须使用`CallByName`. 查看 Excel 对此功能的内置帮助。这是一个假设代码在`Userform1`

```
Private Sub CommandButton1_Click()
    Dim i As String
    Dim pro As String

    i = 1
    pro = "sale_call" + i

    '~~> This will run sale_call1
    CallByName UserForm1, pro, VbMethod

    i = 2
    pro = "sale_call" + i

    '~~> This will run sale_call2
    CallByName UserForm1, pro, VbMethod
End Sub

Sub sale_call1()
    MsgBox "Hello"
End Sub

Sub sale_call2()
    MsgBox "goodbye"
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-26T15:23:22.190

只需将托管宏的工作簿名称添加为前缀即可。就像在单元格中做公式一样：

```
Application.Run "WorkbookNameAsString.app_ext!MacroName" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-09-16T10:41:27.953

VBA 使用 '&' 进行连接；

不正确：

```
pro = "sale_call" + i 
```

更正：

```
pro = "sale_call" & i 
```

我希望它有所帮助。

# javascript - Javascript 发布超时

> ID：15969797
> 
> 赞同：1
> 
> 时间：2013-04-12T11:07:34.660
> 
> 标签：javascript, jquery, post, timeout, crossrider

问题描述：
我在 $.each 循环内发出一个帖子请求：

```
$.each(companies, function() {
    appAPI.request.post({
        url: url,
        postData: postdata,
        onSuccess: onSuccess(),
        onFailure: onFailure()
    });
}) 
```

语法（我使用 crossrider.com API）类似于 jQuery，但仍然不同 - 'post' 方法没有 'timeout' 选项。如何检查是否需要超过 3 秒才能收到响应，如果是 - 放弃此请求（不要调用 onSuccess() 函数）？

这里也可以使用 jQuery，但由于某些原因，我必须使用 appAPI.request.post 而不是 $.post。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:11:55.517

您可以使用布尔变量。例如`isThreeSecElapsed`，在 OnSuccess & Failure 中将其设置为 true。
您还必须使用`setInterval`from javascript，它将继续阅读`isThreeSecElapsed`直到 3 秒。如果 3 秒后未设置为 true。你可以在那里做你需要的代码。
您可以`return`在 Success 方法的开始处直接写入，这样就不会执行其中的操作。

# javascript - 从javascript填充radcomboBox项目属性

> ID：15969800
> 
> 赞同：1
> 
> 时间：2013-04-12T11:07:37.883
> 
> 标签：javascript, jquery, asp.net, telerik

我有一个 Telerik radcombobox，我在其中使用 HeaderTemplate 和 ItemTemplte

事件代码

```
 <%#  DataBinder.Eval(Container, "Attributes['Event_code']")%> 
```

我想在这个 radcombo 中填充来自 javascript 的文本、值和属性值。

目前我正在做的是：

```
 var RadComboBox1Item = new Telerik.Web.UI.RadComboBoxItem();
        RadComboBox1Item.set_text("DISPLAY TEXT");
        RadComboBox1Item.set_value("1");
        RadComboBox1Item.get_attributes().setAttribute("Event_code", "E00019");
        RadComboBox1.trackChanges();
        RadComboBox1.get_items().add(RadComboBox1Item);
        RadComboBox1.commitChanges(); 
```

但这段代码只显示“显示文本”而不​​是属性文本，即 E00019

我很困惑是否需要更改我的 aspx 页面代码或 javascript 代码，以便只有 E00019 在 radcombo click 中可见

# php - 仅输出价格范围内最低和最高的

> ID：15969808
> 
> 赞同：0
> 
> 时间：2013-04-12T11:08:03.087
> 
> 标签：php, wordpress

我在我的 Wordpress 网站上保存了许多自定义帖子类型的商店项目，并以字符串形式`$nn.nn`或简单地以自定义元的形式附加了各种价格`$n`。

我想输出以下内容：

> 价格范围从 £nn.nn 到 £nn.nn？

所以，我想查询价格元，只显示最低和最高。

是否可以在 PHP 中执行此操作？

到目前为止，这就是我想出的所有方法，但它只是输出一个用逗号分隔的所有价格列表：

```
$args = array('post_type' => 'shop-items',);

$the_query = new WP_Query( $args );

if ( $the_query->have_posts() ):

    echo 'Prices range from ';

    // The Loop
    while ( $the_query->have_posts() ) : $the_query->the_post();

        $price  = get_post_meta( get_the_ID(), 'itemprice', true );

        echo '$price . ', ';

    endwhile;

endif; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:11:07.957

首先声明变量（将包含结果）：

```
$min_price = INF;
$max_price = -INF; 
```

在你的循环中做：

```
$price = get_post_meta( get_the_ID(), 'itemprice', true );
if ($price < $min_price)
    $min_price = $price;
if ($price > $max_price)
    $max_price = $price; 
```

最后写（在if之前）：

```
echo "$min_price to $max_price"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:18:25.027

用于`sort()`价格数组

```
if ( $the_query->have_posts() ):
$pricearray=array();
echo 'Prices range from ';

// The Loop
while ( $the_query->have_posts() ) : $the_query->the_post();

    $price  = get_post_meta( get_the_ID(), 'itemprice', true );
$price=str_replace("£","",$price);
if(!empty($price)){
     $pricearray[]= $price;
 }else{
 $pricearray[]= "0";
 }
endwhile;

endif;

sort($pricearray, SORT_NUMERIC);
$minprice=$pricearray[0];
$maxprice=$pricearray[count($pricearray)-1] 
```

# cruisecontrol.net - 从 CC.Net 触发可执行/HTTP 请求

> ID：15969810
> 
> 赞同：0
> 
> 时间：2013-04-12T11:08:07.350
> 
> 标签：cruisecontrol.net

我正在将构建项目从 CC.Net 转移到 Jenkins。但是，我需要从 CC.Net 运行一些项目一段时间，直到迁移完成。简单地说，我希望 CC.Net 项目通过使用 HTTP 请求作为远程触发器来触发 Jenkins 中的工作。

我已经在 J​​enkins 中设置了所有内容。我需要做的就是将项目添加到 CC.Net 并让这个项目触发我的 Jenkins 工作。

我未能成功触发詹金斯的工作。我尝试过使用 HTTP 请求和可执行文件（创建了一个执行 HTTP 请求的小型控制台应用程序）。每当我尝试从我的 CCTray 强制构建时，构建服务器都会告诉我“异常捕获：输入字符串的格式不正确。”。这应该对我尝试过的事情有所了解：

```
<project name="Test32" queue="venus-02">
  <tasks>
    <exec>
      <executable>C:\key\TestRemoteTrigger.exe</executable>
    </exec>
  </tasks>
</project> 
```

我不需要任何花哨的东西。我*只想*让 CC.Net 项目运行我的可执行文件。或者更好的是，简单地执行 HTTP 请求。但我无法让它发挥作用，而且我使用谷歌却一无所获——主要是因为我发现的每个主题都是关于更复杂的事情，这与我所需要的相反。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:06:08.850

好吧，在敲了几下键盘之后，我发现它不是我现在的样子，或者不是，放在这个部分*里面*......这是我在它外面缺少的东西。而且显然不需要。

这将起作用：

```
<project name="Test32" queue="venus-02">
  <publishers>
    <exec>
      <executable>C:\key\TestRemoteTrigger.exe</executable>
    </exec>
  </publishers>
</project> 
```

# java - 我是 java 编程的新手，正在研究数组，我偶然发现了一个预先增加数组的代码，无法理解它

> ID：15969811
> 
> 赞同：-3
> 
> 时间：2013-04-12T11:08:15.360
> 
> 标签：java, arrays

```
int responses[] = { 1, 2, 6, 4, 8, 5, 9, 7, 8, 10, 1, 6, 3, 8, 6,10, 3, 8, 2, 7, 6, 5, 7, 6, 8, 6, 7, 5, 6, 6, 5, 6, 7, 5, 6,4, 8, 6, 8, 10 };

       int frequency[] = new int[ 11 ]; // array of frequency counters

        // for each answer, select responses element and use that value
        // as frequency index to determine element to increment
        for ( int answer = 0; answer < responses.length; answer++ )
           **++frequency[ responses[ answer ] ];**

        System.out.printf( "%s%10s", "Rating", "Frequency" );

        // output each array element's value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:26:22.763

answer 是数组的索引，response[answer] 将给出该索引处的值，然后我们将以频率递增索引的值（即 response[answer]）。

```
answer   response[answer]     frequency[response[answer]]    ++frequency[response[answer]]
 0             1             frequency[1]=0                      frequency[1]=1
 1             2             frequency[2]=0                      frequency[2]=1                 
 2             6             frequency[6]=0                      frequency[6]=1
 3             4             frequency[4]=0                      frequency[4]=1
 4             8             frequency[8]=0                      frequency[8]=1
 5             5             frequency[5]=0                      frequency[5]=1
 6             9             frequency[9]=0                      frequency[9]=1
 7             7             frequency[7]=0                      frequency[7]=1
 8             8            **frequency[8]=1**                 **frequency[8]=2** 
```

伪代码：

给定：从 1 到 10 的响应数组

初始化空频率数组，默认为 0 (frequency[0],frequency[1],frequency[2],frequency[3],.....,frequency[9],frequency[10])

对于响应数组的每个值

```
 increment the value of frequency array 
```

在最后一行，现在 8 的频率增加了。所以它会告诉每个响应的频率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:37:13.303

首先：您创建具有值`responses`的数组：`40`

```
 int responses[] = { 1, 2, 6, 4, 8, 5, 9, 7, 8, 10, 1, 6, 3, 8, 6,10, 3, 8, 2, 7, 6, 5, 7, 6, 8, 6, 7, 5, 6, 6, 5, 6, 7, 5, 6,4, 8, 6, 8, 10 }; 
```

然后你`frequency`用长度 =创建`11`，为什么是 11？因为值的范围在`responses`数组中的值范围从`1`to`11`并且您想计算数字重复的次数（例如：数字 1 重复 2 次，数字 6 重复 11 次）：

```
 int frequency[] = new int[ 11 ]; // this array with 0 values at each index 
```

然后，您将在`responses`数组上循环

```
for ( int answer = 0; answer < responses.length; answer++ ) 
```

`++frequency[ responses[ answer ] ];`这意味着当 index = 1 时，您将得到which `responses [1]`will equal`2`所以您将添加`1`which到 `frequency[2];`which 意味着你找到 number等等`2``responses`

要更了解运行此代码：

```
 int responses[] = {1, 2, 6, 4, 8, 5, 9, 7, 8, 10, 1, 6, 3, 8, 6, 10, 3, 8, 2, 7, 6, 5, 7, 6, 8, 6, 7, 5, 6, 6, 5, 6, 7, 5, 6, 4, 8, 6, 8, 10};
        int frequency[] = new int[11]; // array of frequency counters

        for (int answer = 0; answer < responses.length; answer++) {
            ++frequency[ responses[ answer]];
        }

        for (int i = 0; i < frequency.length; i++) {
            System.out.println(i + "   "  + frequency[i]);

        } 
```

输出是：

```
0    0/////////// mean there is no 0 in responses array
1    2//////////mean you have number 1 in responses array 2 times
2    2
3    2
4    2
5    5
6    11//////// mean you have number 6 in responses array 11 times
7    5
8    7
9    1
10   3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:25:17.643

您需要使用循环来显示结果：

```
for ( int i = 0; i < responses.length; i++ )
    System.out.printf( "Number of %d: %d\n", i, frequency[i] ); 
```

否则删除注释外的“*”，它将编译。

它的作用是简单地使用数组的值作为索引来计算它们。因此，当遇到“5”时，频率数组中的第 5 个元素将递增，因为至少有一个“5”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T11:32:12.580

由于未使用操作的值，因此预递增和后递增给出相同的结果。所以这：

```
++frequency[ responses[ answer ] ]; 
```

与此相同：

```
frequency[ responses[ answer ] ]++; 
```

与以下内容相同：

```
frequency[ responses[ answer ] ] = frequency[ responses[ answer ] ] + 1; 
```

代码所做的是递增`frequence`数组中与数组中的项目相对应的项目`responses`。`responses`它只是计算数组中每个值的数量。

# javascript - 在 Google Maps V3 中使 OverlayView 可点击

> ID：15969812
> 
> 赞同：0
> 
> 时间：2013-04-12T11:08:17.440
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在尝试将鼠标悬停事件侦听器添加到 Google 地图覆盖视图。我一直在[关注这个问题](https://stackoverflow.com/questions/3361823/make-custom-overlay-clickable-google-maps-api-v3)，但无法让听众工作。这是我的代码：

```
InfoWindow.prototype = new google.maps.OverlayView;
InfoWindow.prototype.onAdd = function() {
  this.getPanes().overlayMouseTarget.appendChild(this.$content.get(0));
  this.getPanes().overlayMouseTarget.parentNode.style.zIndex = 100000;
  google.maps.event.addListener(this, 'mouseover', function() {
    console.log('MOUSEOVER');
  });
}; 
```

这不会给出任何错误，但也不会在鼠标悬停时做任何事情。我也尝试过使用`this.listeners`：

```
this.listeners = [
    google.maps.event.addDomListener(this, "mouseover", function (e) {
       console.log('MOUSEOVER');
    })
]; 
```

但这也无济于事。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T14:17:52.747

For the domListener to work, you need to attach it to a dom node:

google.maps.event.addDomListener(this.$content.get(0), "mouseover", function (e) { console.log('MOUSEOVER'); });

# html - 如何避免“元素元上的属性名称的错误值语言”HTML 验证错误？

> ID：15969814
> 
> 赞同：5
> 
> 时间：2013-04-12T11:08:21.160
> 
> 标签：html, w3c-validation, meta

当我使用[W3C 验证器](http://validator.w3.org/)验证我的 HTML 时出现此错误：

```
Bad value language for attribute name on element meta: Keyword language is not registered.

<meta name="language" content="en" /> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T11:16:57.763

利用

```
<html lang="en"> 
```

[资源](http://nimbupani.com/declaring-languages-in-html-5.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T11:11:41.197

您应该在 HTML 标记上指定语言，如下所示：

```
<html lang="en"> 
```

您还可以`lang`在任何元素上使用该属性，因此如果您只有一个带有法语的 div，您可以这样做：

```
<html lang="en">
    ...
    <body>
        ...
        <div lang="fr"></div>
        ...
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:10:32.257

我认为您正在寻找内容语言

```
<meta http-equiv="Content-Language" content="en" /> 
```

# lua - LuaJ：将多个字节码块组合成单个块

> ID：15969817
> 
> 赞同：1
> 
> 时间：2013-04-12T11:08:29.233
> 
> 标签：lua, luaj

我有几个预编译的 lua 脚本，我想将它们组合起来并转储到单个字节码块中。预编译的脚本可以相互依赖。

在 C 中，我可以使用：

`luaL_loadfile`// `luaL_loadfile`_`lua_dump`

但我不确定如何使用 LuaJ 来做到这一点。我正在使用 luaj-3.0-alpha2 版本。

有任何想法吗？

# sql - 选择查询以根据值返回 id

> ID：15969820
> 
> 赞同：0
> 
> 时间：2013-04-12T11:08:47.187
> 
> 标签：sql, sql-server

我需要一个 select 语句来解析 xml 并根据条件返回 Id。在这种情况下如何使用循环？

我在 xml 中传递了fruitIds。如果每个fruitids 存在，则在fruitids 中检查它是fresh-0 还是not-1。如果售罄-(2) 则不应考虑在内。SP 必须返回 IsFresh 设置为 0 或 1 的水果的不同 ID

```
 CREATE PROCEDURE [dbo].[Fruits]      
 @Data XML 
AS

BEGIN TRY

SET @Data = '<Fruits>
 <Fruit FruitID="1"></Fruit>
  <Fruit FruitID="2"></Fruit>
 </Fruits>'

SELECT DISTINCT(FruitType)      
from dbo.FruitsTable
where FruitID =  (SELECT    Fruit.cols.value('@FruitID', 'INT') FruitID
            FROM   @Data.nodes('/Fruits/Fruit') Fruit(cols))
 AND (Fruit.IsFresh = 0 OR Fruit.IsFresh = 1)                      
END TRY
BEGIN CATCH  
END CATCH 
GO 
```

> ```
> FruitsTable
> 
>       Composite Key = fruitid,buyerid
>          FruitID IsFresh BuyerID(this if FK)
>          1            0     1
>          2            1     2
>          3            0     2
>          4            0     3
>          5            2     1
>          1            1     2 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:09:52.633

Senthil，你非常接近，这意味着你的逻辑是合理的，只是你的语法是错误的。您需要使用 IN 而不是“=”（IN 检查值是否在集合中）并修复表别名：

```
SELECT  DISTINCT f.FruitId
from    dbo.FruitsTable f
where   f.FruitID in (
            SELECT Fruit.cols.value('@FruitID', 'INT') FruitID
            FROM   @Data.nodes('/Fruits/Fruit') Fruit(cols))
        AND (f.IsFresh in (0,1)) 
```

# c# - 有没有办法强制 NHTMLUNIT 忽略页面 JavaScript 错误并继续执行脚本？

> ID：15969821
> 
> 赞同：11
> 
> 时间：2013-04-12T11:08:56.513
> 
> 标签：c#, asp.net, ajax

我是 ASP.NET 和 C# 项目的一部分。我们正在努力使我们的 asp.net 门户谷歌搜索引擎友好 ( [https://developers.google.com/webmasters/ajax-crawling/](https://developers.google.com/webmasters/ajax-crawling/) )。我们网站中的网页是动态生成的，DOM 是用 JavaScript 修改的，所以当 Google 搜索引擎发送请求时，我们使用 NHTML 来生成快照（服务器端）。它会生成 HTML 快照，但问题是当页面中存在脚本错误时，它会返回部分呈现的页面（由页面 JavaScript 修改的内容被部分呈现）。页面在浏览器中完美运行。

我尝试了以下选项

```
ThrowExceptionOnScriptError = false,
ThrowExceptionOnFailingStatusCode = false 
```

但没有运气。

有没有办法强制 NHtmlUnit 忽略页面错误并继续执行？

以下是代码

```
 // Create a webclient.
    WebClient webClient = new WebClient(BrowserVersion.FIREFOX_17)
        {
            ThrowExceptionOnScriptError = false,
            ThrowExceptionOnFailingStatusCode = false
        };

    webClient.WaitForBackgroundJavaScript(5000);

    // Load the Page with the given URL.
    HtmlPage htmlPage = webClient.GetHtmlPage(url);

    // Return the page for the given URL as Text.
    return htmlPage.WebResponse.ContentAsString; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T15:56:21.430

```
// Create a webclient.
WebClient webClient = new WebClient(BrowserVersion.FIREFOX_17)
    {
        JavaScriptEnabled = true
        ThrowExceptionOnScriptError = false,
        ThrowExceptionOnFailingStatusCode = false,
    };

webClient.WaitForBackgroundJavaScript(5000);

HtmlPage htmlPage = webClient.GetHtmlPage(url);

// Return the page for the given URL as Text.
return htmlPage.WebResponse.ContentAsString; 
```

我注意到您没有启用 JavaScript，如果我错了，请见谅。

# java - 如何为使用eclipse开发的java程序提供批处理文件？

> ID：15969822
> 
> 赞同：-2
> 
> 时间：2013-04-12T11:08:56.973
> 
> 标签：java

我创建了一个使用 eclipse 进行图像处理的 java 程序。但我需要创建一个批处理文件来提供不同的输入..如何实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:13:32.783

您需要首先了解 Java 如何在 IDE 的舒适范围之外工作。

您可以阅读这篇文章，例如： [http ://www.sergiy.ca/how-to-compile-and-launch-java-code-from-command-line/](http://www.sergiy.ca/how-to-compile-and-launch-java-code-from-command-line/)

或者只是谷歌如何从命令行运行你的 Java 程序。

之后，您可以创建一个简单的批处理来运行您的程序，就像您在提示符下手动执行的操作一样。

那篇文章应该介绍如何将参数传递给您的程序，并且从那里，修改您的 bash 文件以将参数传递给程序应该相当容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:19:38.617

您甚至不需要编写批处理文件。
您可以使用一些参数启动您的 Jar 文件。在您的主要方法中，您可以从 args 数组中读取参数。

例如：

您可以使用以下命令从命令提示符启动程序：

> java -jar yourJar.jar 你好世界

在您的主要方法中，您可以读取如下参数：

```
public static void main(String[] args)
    {
        String parameter1 = args[0];
        String parameter2 = args[1];
    } 
```

所以 parameter1 有值`hello`，parameter2 有值`world`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:19:04.543

看看 ant [http://ant.apache.org](http://ant.apache.org) 你可以在这里找到关于在这个问题中将 args 传递给 ant 的信息 [How do I pass an argument to an Ant task?](https://stackoverflow.com/questions/1911536/how-do-i-pass-an-argument-to-an-ant-task)

# javascript - 使用 DnD 为 iPad 优化的 HTML/JS/CSS 仪表板

> ID：15969826
> 
> 赞同：1
> 
> 时间：2013-04-12T11:09:08.153
> 
> 标签：javascript, html, ipad, dashboard, gridster

我目前正在尝试创建一个可用的基于 HTML/CSS/JS 的仪表板，它在 iPad 上表现得相当好。仪表板将包含几个主要包含图表的小部件。我开始使用[gridster](http://gridster.net/)，它在 iPad 上运行良好（我发现的唯一一个，其余的要么基于 gridster[ [2](http://shopify.github.io/dashing/) ]，不支持 iPad 或超重/慢 [ [3](http://shopify.github.io/dashing/) ]）。

但是，当小部件内容更复杂（例如图表）时，一切都会变得非常缓慢。我目前正在尝试重新配置 gridster 以在拖动时不呈现内容，或者重新配置在 iPad 上流畅运行的其他小部件解决方案，即使拖动更复杂的内容也是如此。有什么建议么？

相关点：CSS3 是否会转换一种方式来优化这一点，因为据我了解，它们是硬件支持的，并且不依赖于 JavaScript 进行渲染？或者它们是否不适合即时计算的小型实时运动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T12:43:56.130

我们没有发现任何比 gridster 更好并且更快的东西。因此，我们通过在拖动时基本上隐藏小部件内容来使 gridster “更快”，这在 iPad 和旧设备上表现更好。

# javascript - 需要在 extjs 文本字段中允许单个条目

> ID：15969832
> 
> 赞同：1
> 
> 时间：2013-04-12T11:09:30.337
> 
> 标签：javascript, extjs4, extjs-mvc

我正在 extjs 4.0.7 中开发一个表单

我需要将逗号和点等货币的格式更改为千位分隔符和小数部分。

为此，我只需要在文本字段中插入一个符号，在 ExtJS 中我尝试了以下代码：

```
 {
    xtype       : 'textfield',
    type        : 'string',
    fieldLabel  : '1000s separator:',
    name        : 'amount_separator',
    id          : 'amount_separator',
    maxLength   : 1,
    size        : 1,

    anchor      : '30%'
} 
```

但这无助于我限制单个符号（'，'或'。'）中的插入

我如何需要重新排列控制器文件中代码的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:19:15.347

您是否尝试过 enforceMaxLength ？为 true 以在基础输入字段上设置 maxLength 属性。默认为假

```
enforceMaxLength : true 
```

# java - 如何使用 Eclipse 作为 IDE 将 Robot Framework 与 Java 结合使用

> ID：15969833
> 
> 赞同：5
> 
> 时间：2013-04-12T11:09:34.660
> 
> 标签：java, eclipse, robotframework

我已经按照以下 URL 上的说明安装了 Robot Framework-EclipseIDE 插件：

[https://github.com/NitorCreations/RobotFramework-EclipseIDE/wiki/Installation](https://github.com/NitorCreations/RobotFramework-EclipseIDE/wiki/Installation)

安装成功。现在我想在 Robot Framework 中使用 Java 编写一些测试用例。我是 Robot Framework 的新手，我不知道如何在 Eclipse 中使用 Java 在 Robot Framework 中编写 TC。

请帮我开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-02T09:42:00.380

除非您打算使用自己的关键字库扩展 RF，否则您不会用 Java 编写[Robot Framework](https://code.google.com/p/robotframework/)测试用例。Robot Framework 测试通常以[文本、html、TSV 或 reStructured](http://robotframework.googlecode.com/hg/doc/userguide/RobotFrameworkUserGuide.html?r=2.8.1#test-data-syntax)格式编写。在文本格式中，分隔符很重要，通常是**两个空格**或竖线字符。

[Robot Framework 用户指南](http://robotframework.googlecode.com/hg/doc/userguide/RobotFrameworkUserGuide.html?r=2.8.1)是一个极好的智慧来源，但本[指南](http://www.virtuousprogrammer.com/?p=264)是快速介绍的好指南。

Robot Framework 也有一个[快速入门指南](https://code.google.com/p/robotframework/wiki/QuickStartGuide)，您可以下载。

我建议您首先启动浏览器并使用它导航到例如。搜索引擎主页执行搜索。有关更多信息，请参阅[Selenium 库文档](http://robotframework-seleniumlibrary.googlecode.com/hg/doc/SeleniumLibrary.html?r=2.9.1)。

下面是一个示例测试用例。

```
Search with DuckDuckGo
  Open Browser  https://duckduckgo.com/
  Input Text  search_form_input_homepage  ATDD
  Submit Form  search_form_homepage
  Page Should Contain  Using Robot Framework for ATDD 
```

# php - 如何在php中比较三个数字时找到最高组合

> ID：15969837
> 
> 赞同：-1
> 
> 时间：2013-04-12T11:09:47.377
> 
> 标签：php

集合 A {3,4,7} 和集合 B {2,4,7} 中有三个数字。

因为 a 和 b 中的第一个数字不相同，所以不可能得到结果。

但是我需要通过比较其他两个数字并留下第一个数字来使结果为真。

怎么可能在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:14:21.850

```
<?php

$a = array(3,4,7);
$b = array(2,4,7);

echo $a === $b ? 'TRUE' : 'FALSE';

echo PHP_EOL;

array_shift($a);
array_shift($b);

echo $a === $b ? 'TRUE' : 'FALSE';
?> 
```

显示：

```
FALSE TRUE 
```

**升级版：**

如果您需要从字符串中提取值，则：

```
$strA = '3,4,7';
$strB = '2,4,7';

$a = explode(',', $strA);
$b = explode(',', $strB);

array_shift($a);
array_shift($b);

echo $a === $b ? 'TRUE' : 'FALSE'; 
```

应该管用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:17:29.257

```
<?
$A = array(2,3,7);
$B = array(4,3,7);

$isTrue=1;
for($i=1; $i < count($A); $i++) if($A[$i]!=$B[$i]) $isTrue=0;

echo $isTrue;
?> 
```

**编辑：**

如果您想在两个元素完全相同的情况下返回 true，那么代码将是：

```
$common=0;
for($i=0; $i < count($a); $i++) if($a[$i]==$b[$i]) $common++;
if($common==2) $isTrue=1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T12:01:41.300

试试这个，它会对你有所帮助.. 它会显示 1 => 表示更多相同的组合，0 => 表示更多不同的组合。在下面的代码中，组合的数量越多，所以它返回 0。

```
<?php
$A = array(2,3,7,5,6);
$B = array(4,3,7,8,9);

$flagTrue = 0;
$flagFalse = 0;
for($i=0; $i < count($A); $i++)
{
    if($A[$i] == $B[$i])
    {
        $flagTrue=$flagTrue+1;
    }
    else 
    {
        $flagFalse=$flagFalse+1;
    }
}

$var_is_greater_than_two = ($flagTrue >= $flagFalse) ? 1 : 0;
echo $var_is_greater_than_two;
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T11:35:59.977

```
function compareSets($a, $b) {
    $result = TRUE;
    $diffArray = array_diff($a, $b);
    foreach ($diffArray as $key => $value) {
        if ($key > 0) {
            $result = FALSE;
            break;
        }
    }
    return $result;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-12T11:17:54.193

```
 <?php

  $a = array(3,4,7);
  $b = array(2,4,7);

  for($i=0;$i<3;$i++)
 {
      if($a[$i] > $b[$i]
       echo true;
 }

 ?> 
```

如果 a 更大，则返回 true。

# css - 嵌套在里面的元素的填充问题 元素

> ID：15969839
> 
> 赞同：0
> 
> 时间：2013-04-12T11:09:48.003
> 
> 标签：css

 我正在尝试在我的主页上创建一个粉红色的号召性用语按钮。我的`<a>`内部元素`<p class="cta">`具有以下 CSS 属性：

```
.cta a {
    padding: 10px;
    text-align: center;
} 
```

但是，填充`.cta a`不会扩展`<p>`它包含的标签。这是否有原因以及我可以对我的 CSS 进行的任何修改？

该网站可以在这里找到： 

[http://www.bestcastleintown.co.uk/pg/](http://www.bestcastleintown.co.uk/pg/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:11:32.610

在浏览器默认情况下，锚元素是[内联元素](http://www.webdesignfromscratch.com/html-css/css-block-and-inline/)。

根据评论，您需要`display:block`锚元素：

```
.cta a {
    padding: 10px;
    text-align: center;
    display:block;
} 
```

***现场演示：http:** [//jsfiddle.net/KShgU/1/](http://jsfiddle.net/KShgU/1/)*

# php - Laravel 4：RouteNotFoundException 与 Route::resources

> ID：15969840
> 
> 赞同：1
> 
> 时间：2013-04-12T11:09:53.550
> 
> 标签：php, laravel, laravel-4

登录成功后尝试访问 localhost:8000/users 时出现以下错误：

```
 RouteNotFoundException: Unable to generate a URL for the named route "users" as 
    such route does not exist. 
```

我的控制器是：

```
<?php

class UserController extends BaseController {

    //public $restful = TRUE;

    public function index()
    {
        return View::make('users.index')
            ->with('title', "Title Example")
            ->with('users', User::all());
    }

    public function create()
    {
        return View::make('users.new')
            ->with('title', "New User");
    }

    ... 
```

我的路线.php：

```
Route::resource('users', 'UserController');

Route::get('login', array( 'as' =>'login','uses' => 'UserController@login'));

Route::post('login', function(){

    $credentials = array('email' => Input::get('email'), 'password' => Input::get('password'));

    if (Auth::attempt($credentials))
    {
         return Redirect::route('users.index');
    }
    else
    {
        return Redirect::back()->withInput()->with('login_errors',true);;
    }   

});

Route::get('logout', function(){

        Auth::logout();

        return Redirect::route('login');
}); 
```

控制台 php 工匠路线

```
GET /                                                   Closure                         
GET /users                       users.index            UserController@index            
GET /users/create                users.create           UserController@create           
POST /users                      users.store            UserController@store            
GET /users/{users}               users.show             UserController@show             
GET /users/{users}/edit          users.edit             UserController@edit             
PUT /users/{users}               users.update           UserController@update           
PATCH /users/{users}                                    UserController@update           
DELETE /users/{users}            users.destroy          UserController@destroy          
GET /login                       login                  UserController@login            
POST /login                                             Closure                         
GET /logout                                             Closure 
```

例外：

```
in /Users/sangar1982/Sites/tlaravel4/vendor/symfony/routing/Symfony/Component/Routing/Generator/UrlGenerator.php line 134
at UrlGenerator->generate('users', array(), true) in /Users/sangar1982/Sites/tlaravel4/vendor/laravel/framework/src/Illuminate/Routing/UrlGenerator.php line 181
at UrlGenerator->route('users') in /Users/sangar1982/Sites/tlaravel4/bootstrap/compiled.php line 4299
at Facade::__callStatic('route', array('users')) in /Users/sangar1982/Sites/tlaravel4/app/storage/views/5fc6ba4595a2ad28f9c15b73141f869f line 30
at URL::route('users') in /Users/sangar1982/Sites/tlaravel4/app/storage/views/5fc6ba4595a2ad28f9c15b73141f869f line 30
at include('/Users/sangar1982/Sites/tlaravel4/app/storage/views/5fc6ba4595a2ad28f9c15b73141f869f') in /Users/sangar1982/Sites/tlaravel4/bootstrap/compiled.php line 15928
at PhpEngine->evaluatePath('/Users/sangar1982/Sites/tlaravel4/bootstrap/../app/storage/views/5fc6ba4595a2ad28f9c15b73141f869f', array('__env' => object(Environment), 'app' => object(Application), 'errors' => object(MessageBag), 'title' => 'Title Example', 'users' => object(Collection))) in /Users/sangar1982/Sites/tlaravel4/vendor/laravel/framework/src/Illuminate/View/Engines/CompilerEngine.php line 45
at CompilerEngine->get('/Users/sangar1982/Sites/tlaravel4/app/config/../views/layouts/backend.blade.php', array('__env' => object(Environment), 'app' => object(Application), 'errors' => object(MessageBag), 'title' => 'Title Example', 'users' => object(Collection))) in /Users/sangar1982/Sites/tlaravel4/bootstrap/compiled.php line 15692
at View->getContents() in /Users/sangar1982/Sites/tlaravel4/bootstrap/compiled.php line 15675
at View->render() in /Users/sangar1982/Sites/tlaravel4/app/storage/views/178250f445fac7ac6adce8b5af153a21 line 8
at include('/Users/sangar1982/Sites/tlaravel4/app/storage/views/178250f445fac7ac6adce8b5af153a21') in /Users/sangar1982/Sites/tlaravel4/bootstrap/compiled.php line 15928
at PhpEngine->evaluatePath('/Users/sangar1982/Sites/tlaravel4/bootstrap/../app/storage/views/178250f445fac7ac6adce8b5af153a21', array('__env' => object(Environment), 'app' => object(Application), 'errors' => object(MessageBag), 'title' => 'Title Example', 'users' => object(Collection))) in /Users/sangar1982/Sites/tlaravel4/vendor/laravel/framework/src/Illuminate/View/Engines/CompilerEngine.php line 45
at CompilerEngine->get('/Users/sangar1982/Sites/tlaravel4/app/config/../views/users/index.blade.php', array('__env' => object(Environment), 'app' => object(Application), 'errors' => object(MessageBag), 'title' => 'Title Example', 'users' => object(Collection))) in /Users/sangar1982/Sites/tlaravel4/bootstrap/compiled.php line 15692
at View->getContents() in /Users/sangar1982/Sites/tlaravel4/bootstrap/compiled.php line 15675
at View->render() in /Users/sangar1982/Sites/tlaravel4/bootstrap/compiled.php line 16983
at Response->setContent(object(View)) in /Users/sangar1982/Sites/tlaravel4/bootstrap/compiled.php line 16015
at Response->__construct(object(View)) in /Users/sangar1982/Sites/tlaravel4/bootstrap/compiled.php line 7407
at Router->prepare(object(View), object(Request)) in /Users/sangar1982/Sites/tlaravel4/vendor/laravel/framework/src/Illuminate/Routing/Controllers/Controller.php line 156
at Controller->processResponse(object(Router), 'index', object(View)) in /Users/sangar1982/Sites/tlaravel4/vendor/laravel/framework/src/Illuminate/Routing/Controllers/Controller.php line 126
at Controller->callAction(object(Application), object(Router), 'index', array()) in /Users/sangar1982/Sites/tlaravel4/bootstrap/compiled.php line 7094
at Router->Illuminate\Routing\{closure}()
at call_user_func_array(object(Closure), array()) in /Users/sangar1982/Sites/tlaravel4/bootstrap/compiled.php line 13427
at Route->callCallable() in /Users/sangar1982/Sites/tlaravel4/bootstrap/compiled.php line 13406
at Route->run(object(Request)) in /Users/sangar1982/Sites/tlaravel4/bootstrap/compiled.php line 7114
at Router->dispatch(object(Request)) in /Users/sangar1982/Sites/tlaravel4/bootstrap/compiled.php line 958
at Application->dispatch(object(Request)) in /Users/sangar1982/Sites/tlaravel4/bootstrap/compiled.php line 946
at Application->run() in /Users/sangar1982/Sites/tlaravel4/public/index.php line 49
at require_once('/Users/sangar1982/Sites/tlaravel4/public/index.php') in /Users/sangar1982/Sites/tlaravel4/server.php line 19 
```

我无法找到问题所在。似乎一切正常。

有人能帮助我吗？谢谢！

更新了异常日志

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:34:41.827

查看异常似乎您的一个视图正在调用`URL::route('user')`. 仔细检查您的所有视图，以确保您调用正确的路线。

# jquery - 验证电子邮件地址语法

> ID：15969843
> 
> 赞同：0
> 
> 时间：2013-04-12T11:10:00.373
> 
> 标签：jquery, contact-form

我正在从头开始构建一个联系表单，其中包含一些简单但花哨的动画，如动画复选标记、动画发送按钮、mouseenter/mouseleave 动画字段等。同时我正在编写验证代码，但我遇到了一些困难电子邮件字段。我一直在查看其他帖子并在谷歌上搜索有用的信息，但我的上下文有点奇怪。这是代码：

```
// Check if the email address is valid
function checkValidEmailAddress(emailAddress) {
  var pattern = new RegExp(/^(("[\w-+\s]+")|([\w-+]+(?:\.[\w-+]+)*)|("[\w-+\s]+")([\w-+]+(?:\.[\w-+]+)*))(@((?:[\w-+]+\.)*\w[\w-+]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][\d]\.|1[\d]{2}\.|[\d]{1,2}\.))((25[0-5]|2[0-4][\d]|1[\d]{2}|[\d]{1,2})\.){2}(25[0-5]|2[0-4][\d]|1[\d]{2}|[\d]{1,2})\]?$)/i);
  return pattern.test(emailAddress);
};

// Email field validation
$('#userEmail').blur(function(){
  $(this).animate({'background-color':'#ffffff'}, 200);
  if($.trim($(this).val()) == ""){
    emailInvalidation();
    $('#inputText_infoBox p').html('Não se esqueça do seu e-mail!');
  }
  else{
    emailValidation();
    $('#inputText_infoBox p').html('O endereço de e-email parece válido');
  }
}); 
```

如您所见，我正在对 blur() 进行验证，特别是检查该字段是否不为空 - 问题：如何在 blur 函数**中将 checkValidEmailAddress 上下文化？**我应该把它放在哪里以及如何放置？

谢谢你。

佩德罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:52:56.993

我做了一个更容易扩展的替代解决方案。[你可以在http://jsbin.com/eyimis/1/](http://jsbin.com/eyimis/1/)上看到它，这里的代码：http: [//jsbin.com/eyimis/1/edit](http://jsbin.com/eyimis/1/edit)

一旦验证了所有输入，它还能够显示提交按钮。

```
var test = {
  // Email
  'email' : {
    'validate' : 0,
    'fn' : function(emailAddress) {
      var pattern = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\ ".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA -Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
      return pattern.test(emailAddress);
    }
  },
  // First and last name
  'name' : {
    'validate' : 0,
    'fn' : function(name) {
      name = name.split(' ');
      // Does it contain two names?
      return name.length > 1 && name[1].length > 0;
    }
  }
}, $error = $('#inputText_infoBox p');

var ready = function () {
  // How many inputs do we have to validate?
  var inputs = $.map(test, function(n, i) { return i; }).length, score = 0;
  for(var key in test) {
    // If this input is validated, we have ourselves a score!
    if(test[key].validate === 1) {
      score++;
    }
    // Is the amount of scores equal to to amount of inputs?
    if(score === inputs) {
      return true; 
    }
  }
};

$('input[type=text]').on({
  /* We'll check against a validate function every time the user
  press a key, depending on what field the user is interacting with */
  keyup: function() {
    var $this = $(this);
    // Run the validate function for this particular input field
    if(test[$this.attr('id')].fn($this.val())) {
      // Validation returned true, yay! :)
      test[$this.attr('id')].validate = 1;
      $this.css({'background-color': '#00f000'});
      $error.html('');
    } else {
      // It returned false :(
      test[$this.attr('id')].validate = 0;
      $this.css({'background-color': '#ffffff'});
    }
    if(ready()) {
      $('#inputText_infoBox').after().html($('<input type="submit">'));
    } else {
      $button = $('input[type="submit"]');
      if(typeof $test !== undefined) {
        $button.remove();
      }
    }
  },
  /* We'll do the check for empty text fields on blur to
  avoid annoying errors */
  blur: function() {
    var $this = $(this);
    // Only run if input hasn't validated yet
    if(test[$this.attr('id')].validate === 0) {
      if($.trim($this.val()) === '') {
        $error.html('Empty field');
      }
      // The input got to be invalid!
      else {
       $error.html('Your ' + $this.attr('id') + ' is invalid'); 
      }
    } 
    // It validated, clear error messages 
    else {
      $error.html(''); 
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:19:23.037

您必须将它放在您的`else`语句中并将您的字段值作为参数传递；您的代码将如下所示：

```
$('#userEmail').blur(function(){
  $(this).animate({'background-color':'#ffffff'}, 200);
  if($.trim($(this).val()) == ""){
    $('#inputText_infoBox p').html('Não se esqueça do seu e-mail!');
  }
  else{
    // Here you are passing the field value to the checkValidEmailAddress
    // function, which will return true if the pattern is found, or false
    // if it is not.
    if( checkValidEmailAddress( $(this).val() ) ) 
         $('#inputText_infoBox p').html('O endereço de e-email parece válido');
    else 
         $('#inputText_infoBox p').html('O endereço de e-email parece inválido');
  }
}); 
```

# javascript - 如何在 XDR 请求中指定 dataType？

> ID：15969844
> 
> 赞同：1
> 
> 时间：2013-04-12T11:10:00.497
> 
> 标签：javascript, ajax, internet-explorer, cross-domain, xdr

我在 ie 中使用 XDR 进行跨域资源共享。它完美地工作。我需要知道如何在此指定返回数据类型。我需要将 json 作为 responseText。这是我的代码，

```
 if (window.XDomainRequest&& $.browser.msie && $.browser.version < 10) {
        xdr = new XDomainRequest();
        if (xdr) {
            xdr.onload = function () {
                var customResponse = xdr.responseText;

                }
            };
            xdr.open("get", url);
            xdr.send();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T05:44:26.320

试试这个

```
 xdr.onload = function () {
               var data = $.parseJSON(xdr.responseText);

                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:31:52.640

不幸的是，XDR 不支持 setRequestHeader（[MSDN](http://msdn.microsoft.com/en-us/library/ie/cc288060%28v=vs.85%29.aspx)显示 XDR 的能力很差），所以你不能告诉服务器你想要带有`Accept`请求头的 JSON。但是你可以提供查询字符串参数，告诉服务器这个信息（`url += "?format=json"`）。当然，服务器必须对这个参数做出反应，否则就没有意义了。如果您自己维护服务器，这将是一件容易的事。如果没有，请检查您的 API 文档是否允许您请求不同的内容类型。如果两个选项的答案都是否定的，您可能应该回退到 JSONp 而不是 XDR。

# java - How can I create proxy without using spring AOP

> ID：15969847
> 
> 赞同：7
> 
> 时间：2013-04-12T11:10:07.620
> 
> 标签：java, spring, aop

My server doesn't have spring AOP jars and I can't add them. Spring version is 2.0.6.

I want to use proxy for 5 of my services.

What is the best way to do this

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:13:22.823

看看`java.lang.reflect.Proxy`API。请注意，它只允许为接口创建代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T00:55:08.133

使用 Spring bean 后处理器代理每个 bean 的示例：

```
public class ProxifyingPostProcessor implements BeanPostProcessor {

    @Override
    public Object postProcessBeforeInitialization(final Object bean, String beanName) throws BeansException {

        Class beanClass = bean.getClass();

        if (Proxy.isProxyClass(beanClass)) {
            return bean;
        }

        List<Class<?>> interfaceList = getAllInterfaces(beanClass);
        Class[] interfaces = (interfaceList.toArray(new Class[interfaceList.size()]));

        return Proxy.newProxyInstance(beanClass.getClassLoader(), interfaces, new InvocationHandler() {

            @Override
            public Object invoke(Object o, Method method, Object[] objects) throws Throwable {
                return method.invoke(bean, objects);
            }

        });
    }

    @Override
    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {
        return bean;
    }

    private List<Class<?>> getAllInterfaces(Class<?> cls) {
        if (cls == null) {
            return null;
        }
        LinkedHashSet<Class<?>> interfacesFound = new LinkedHashSet<Class<?>>();
        getAllInterfaces(cls, interfacesFound);
        return new ArrayList<Class<?>>(interfacesFound);
    }

    private void getAllInterfaces(Class<?> cls, HashSet<Class<?>> interfacesFound) {
        while (cls != null) {
            Class<?>[] interfaces = cls.getInterfaces();
            for (Class<?> i : interfaces) {
                if (interfacesFound.add(i)) {
                    getAllInterfaces(i, interfacesFound);
                }
            }
            cls = cls.getSuperclass();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T11:55:59.340

您可以实现动态代理或 CGLib 代理。

# tabs - 标签导航通过ajax动态调用jsp

> ID：15969851
> 
> 赞同：0
> 
> 时间：2013-04-12T11:10:18.320
> 
> 标签：tabs

我是阿贾克斯的新手。我有像开发包含标签结构的网页这样的要求

我已经开发了带有 6 个其他选项卡的主页来浏览 ajax 功能。每个选项卡都可以访问一个或多个 jsp。

我想要的是 tab1 的内容应该被携带并提交给 tab(jsp2) 并且 jsp2 的内容应该显示在 tab2 上，它必须得到 highlate，并且 lly 到所有 5tabs。

注意：在这个过程中，我的主页不应该被刷新，只有标签的内容应该加载到同一页面的最后一个标签，然后提交表单。

我使用过的技术是。

Java、Servlets、Jsp、Jquery、Javascript、Ajax、CSS。

任何人都可以帮助我提供示例源文件。提前致谢。

# mapreduce - Coucbase 大视图与小视图和多个获取

> ID：15969852
> 
> 赞同：1
> 
> 时间：2013-04-12T11:10:20.453
> 
> 标签：mapreduce, couchbase

假设我们有一些包含`N`文档、每个`S`字节大小和`V`视图计数的 couchbase 存储桶。我们需要检索这些文档，包括。它们包含的所有信息。

一种方法：创建一个具有这种地图功能的视图：

```
function (doc, meta) {
  if (meta.type == "json" && doc.type == "mytype"){
    emit([doc.field1, doc.field2], doc);
  }
} 
```

这个 map 函数将在一个步骤中返回我们需要的所有数据。但另一方面，它会产生大量安静的数据。

另一种方法：创建一个只返回类似文档 ID 的视图（甚至使用 的文档键`meta.id`）：

```
function (doc, meta) {
  if (meta.type == "json" && doc.type == "mytype"){
    emit([doc.field1, doc.field2], doc.id);
  }
} 
```

然后在客户端得到这个之后，我们需要通过提供的 id 来获取每个文档，例如：

```
couchbase.getMultiple([key1,key2,...,keyX]) * 
```

* 从哪里`keyX`看`doc.id`s。

在这种情况下，我们生成的视图数据量较少，但操作将通过 X+1 个请求完成。

因此，第一种方式加载 couchbase 服务器并为视图消耗大量磁盘空间。第二种方式消耗更少的视图空间，但会加载客户端并向 couchbase 服务器产生更多请求。

所以有一些关于这个的问题：

1.  这些方式中哪一种更容易接受/经常使用，或者几乎不依赖于它和`N`价值观？`S``V`
2.  如果正确的方式取决于`N`, `S`，`V`那么这些变量的哪些值（高/中/低）一种方式比其他方式更容易接受？
3.  Couchbase 可以轻松地水平缩放。如果客户端更难扩展，首选第一种方式吗？
4.  可能有一些测试结果可以比较这两种方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:05:12.840

您使用哪个 SDK 来访问视图？

好的做法通常是避免发出文档 ID，因为它会自动放入视图索引中。

基本规则：

*   不要发出文档（或过多的值）
*   不发射密钥

看看： http: [//www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-writing-bestpractice.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-writing-bestpractice.html)

然后，如果您的应用程序需要访问您只需要执行的完整文档（以 Java 为例）：

```
query.setIncludeDocs(true); 
```

在这种情况下，客户端会自动为您执行“获取”以调用服务器并将文档加载到缓存中。（实际上 SDK 正在做一个多获取。

# android - 在收到短信或电话时重新启动应用程序

> ID：15969853
> 
> 赞同：0
> 
> 时间：2013-04-12T11:10:24.833
> 
> 标签：android

我想知道当应用程序设置->管理应用程序->强制关闭时到底会发生什么。它是否调用 onDestroy()。如果用户强制关闭我的应用程序，我想重新启动它。这个怎么做。我想知道是否可以在接收 SMS 或使用广播接收器呼叫时重新启动它。

是的，我也在做同样的事情。我正在使用此代码检查我的服务是否正在运行，但它始终显示“服务正在运行” Toast boolean isServiceRunning = AppSettings.getServiceRunning(context); if (isServiceRunning) { Toast.makeText(context,"service running", Toast.LENGTH_LONG).show(); } else { Toast.makeText(context,"服务停止", Toast.LENGTH_LONG).show(); 我在广播接收器的 onReceive( )
中写这个请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:18:54.793

强制关闭是：

```
android.os.Process.killProcess(android.os.Process.myPid()); 
```

> 在 AndroidManifest 中注册您的接收器。这样，即使您的应用未运行，它也会被调用：[R.styleable.AndroidManifestReceiver](http://developer.android.com/reference/android/R.styleable.html#AndroidManifestReceiver)
> 
> 然后，您可以在 BroadcastReceiver 中检查服务是否仍在运行并重新启动它。
> 
> [例如，请参见此处](https://github.com/flurischt/sms2HTTP/blob/master/src/ch/flurischt/sms2http/SmsForwarder.java)的 SmSForwarder 类。广播接收器不需要运行，因为它是 [AndroidManifest.xml](https://github.com/flurischt/sms2HTTP/blob/master/AndroidManifest.xml)中的注册端（参见第 29 行）。发送 Intent “android.provider.Telephony.SMS_RECEIVED”后，Android 将启动 Broadcastreceiver。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:39:09.507

在用户强制关闭后重新启动应用程序可能被视为恶意软件的迹象。这是非常不鼓励的。话虽如此，如果您真的想重新启动它，请使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)并每隔一小时左右检查一次应用程序状态。

与短信或电话相比，捕获`android.intent.action.SCREEN_ON`Intent 并重新启动应用程序可能是一个更好的主意。

# facebook - How to post a Recent Activity on Facebook?

> ID：15969860
> 
> 赞同：1
> 
> 时间：2013-04-12T11:10:49.867
> 
> 标签：facebook, facebook-graph-api, android-activity, scribe

Is it possible to post an activity on facebook? I was thinking of something like this

"Has Posted A Photo `<MyWebSite URL Here>`" Is it possible? if so how? I've tried looking at the docs but I could not find any.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:59:17.853

是的，可以通过将[Open Graph](https://developers.facebook.com/docs/opengraph/)集成到您的应用程序中来实现。您需要创建自定义[对象](https://developers.facebook.com/docs/opengraph/using-objects/)和[操作](https://developers.facebook.com/docs/opengraph/using-actions/)，因为目前在 Open Graph 中没有可用的照片通用对象。
您还可以考虑根据您的要求[创建自定义故事。](https://developers.facebook.com/docs/opengraph/creating-custom-stories/)

**更新**
您可以使用的 Java 第三方库：- [Spring Social](http://www.springsource.org/spring-social/) 您可以利用其方法[post()](http://static.springsource.org/spring-social-facebook/docs/1.0.x/api/org/springframework/social/facebook/api/impl/FacebookTemplate.html#post%28java.lang.String,%20java.lang.String,%20org.springframework.util.MultiValueMap%29)来发布操作，`/{user-id}/{namespace}:{action-type-name}`并使用所需的参数来创建故事。

# linux - Pass parameter to an awk script file

> ID：15969861
> 
> 赞同：43
> 
> 时间：2013-04-12T11:10:53.677
> 
> 标签：linux, unix, awk

If I want to pass a parameter to an awk script file, how can I do that ?

```
#!/usr/bin/awk -f

{print $1} 
```

Here I want to print the first argument passed to the script from the shell, like:

```
bash-prompt> echo "test" | ./myawkscript.awk hello
bash-prompt> hello 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-04-12T12:00:59.230

In`awk` `$1`引用记录中的第一个字段，而不是像 in 中那样引用第一个参数`bash`。您需要为此使用`ARGV`，请在**[此处](http://www.gnu.org/software/gawk/manual/html_node/ARGC-and-ARGV.html)**查看官方用词。

脚本：

```
#!/bin/awk -f

BEGIN{
    print "AWK Script"
    print ARGV[1]
} 
```

演示：

```
$ ./script.awk "Passed in using ARGV"
AWK Script
Passed in using ARGV 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-04-12T11:16:51.437

您可以使用`-v`命令[行选项](https://www.gnu.org/software/gawk/manual/gawk.html#Options)为脚本提供变量：

假设我们有一个像这样的文件*script.awk*：

```
BEGIN {print "I got the var:", my_var} 
```

然后我们像这样运行它：

```
$ awk -v my_var="hello this is me" -f script.awk
I got the var: hello this is me 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-04-12T11:35:38.890

你的 hash bang 定义的脚本不是 shell 脚本，它是一个 awk 脚本。您不能在脚本中以 bash 方式执行此操作。

另外，您所做的：`echo blah|awk ...`不是传递参数，**而是**将 echo 命令的输出通过管道传输到另一个命令。

您可以尝试以下方法：

```
 echo "hello"|./foo.awk file - 
```

或者

```
var="hello"
awk -v a="$var" -f foo.awk file 
```

有了这个，你`a`的 foo.awk 中有 var，你可以使用它。

如果你想做一些类似于 shell script accept $1 $2 vars 的事情，你可以写一个小的 shellscript 来包装你的 awk 东西。

**编辑**

不，我没有误会你。

让我们举个例子：

比方说，你`x.awk`有：

```
{print $1} 
```

如果你这样做：

```
echo "foo" | x.awk file 
```

它与以下内容相同：

```
echo "foo"| awk '{print $1}' file 
```

这里 awk 的输入是 only `file`，你的 echo foo 没有意义。如果你这样做：

```
 echo "foo"|awk '{print $1}' file -
or
    echo "foo"|awk '{print $1}' - file 
```

awk 需要两个输入（awk 的参数）一个是标准输入一个是文件，在你的 awk 脚本中你可以：

```
echo "foo"|awk 'NR==FNR{print $1;next}{print $1}' - file 
```

这将首先`foo`从您的回声中打印，然后`file`当然这个示例中的 column1 没有任何实际工作，只需将它们全部打印出来。

您当然可以有两个以上的输入，并且不要检查 NR 和 FNR，您可以使用

```
ARGC   The number of elements in the ARGV array.

ARGV   An array of command line arguments, excluding options and the program argument, numbered from zero to ARGC-1 
```

例如 ：

```
echo "foo"|./x.awk file1 - file2 
```

那么你的“foo”是第二个参数，你可以在你的 x.awk 中得到它`ARGV[2]`

```
echo "foo" |x.awk file1 file2 file2 - 
```

现在是 ARGV[4] 案例。

我的意思是，你`echo "foo"|..`将是 awk 的标准输入，它可以是 awk 的第一个或第 n 个“参数”/输入。取决于您放置`-`（stdin）的位置。您必须在 awk 脚本中处理它。

# java - In Java, should I be creating a new Package, Folder, or Source Folder?

> ID：15969862
> 
> 赞同：8
> 
> 时间：2013-04-12T11:11:01.143
> 
> 标签：java, eclipse

There are a couple of questions on SO that sort of hit this, but I am totally new to Java development and I don't know the correct way to approach this.

I have a C# solution, containing two projects (my app, and a unit test project) and within the app, most things are put into folders eg. Interfaces, Exceptions etc.

I am trying to recreate this in Java / Eclipse, but I don't know how. I ended up with lots of packages, which sounds really bad. I also tried adding a source folder but that ended up being outside of the package.

Could anyone point me in the right direction?

Namely, which of those should I use to represent my unit test project/set of unit tests, and subfolders which exist just for organising stuff.

Edit: It also says use of the default package is not advised. What should I be doing?

Edit 2: Here is what it looks like. Does this look vaguely correct? My original C# solution is on the right.

![My Layout](https://i.stack.imgur.com/03agn.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T11:21:05.690

在典型的 java eclipse 项目中，您将拥有一个或多个源文件夹（例如，一个用于应用程序代码，一个用于单元测试）。

每个文件夹都包含一个包树，通常从您的基本包开始，例如`com.mycompany.myapp`.

为了避免名称冲突，包名称通常以作为代码作者的实体的域名开头，从顶级域开始并向后（更一般到更具体）。这样，每个类的完全限定名称都是唯一的。比如google创建了一个名为的类`List`，它会被称为`com.google.List`，并且不会与现有`java.util.List`接口冲突。

您可以在此基础包中拥有无限数量的包，例如：

```
com.mycompany.myapp.persistence
com.mycompany.myapp.domain
com.mycompany.myapp.services
com.mycompany.myapp.web 
```

这完全取决于您的项目以及您想要组织代码和类的方式。

在逻辑级别，包以点作为分隔符命名。它们包含 java 类。

在物理磁盘级别，每个包都是一个目录。java 类包含在 .java 文件中（最常见的是每个文件一个类）。

在 Eclipse 中，“源文件夹”是项目中的一个文件夹，Eclipse 已知该文件夹包含 java 源文件。当您构建项目时，它将被编译并包含在输出中（例如 JAR 文件）。

在 Eclipse 中，您通常在逻辑级别查看它们，显示包。当您告诉 Eclipse“创建一个新包”时，它会为您创建目录。例如，如果您告诉它创建`com.mycompany.myproject`包，它会自动创建一个`com`包含文件夹的文件夹，该`mycompany`文件夹包含一个`myproject`文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:15:30.730

在java源码树结构必须匹配包结构

所以 foo.bar 包必须放在

src/foo/bar

也可能不建议使用默认包 - 但您仍然可以使用它 - 最好将东西放入包中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:19:35.623

在java中，不同的项目开发结构是根据项目类型流动的。因此，由于您是 java 和 Eclipse 的新手，因此最好安装 maven 插件并创建 maven 项目并根据您的项目类型选择原型，例如独立的或基于 Web 的。maven 插件将创建项目结构，包括包、测试包源文件夹等。您可以从中获得有关项目结构的更多[信息](http://maven.apache.org)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T11:20:34.350

使用默认包可能会产生命名空间冲突。想象一下，您正在创建一个包含 MyClass 类的库。有人在他的项目中使用您的库，并且在他的默认包中也有一个 MyClass 类。编译器应该做什么？Java 中的包实际上是一个完全标识您的项目的名称空间。所以重要的是不要在现实世界的项目中使用默认包。

# perl - 使用 (Spreadsheet::WriteExcel::Chart) Perl 模块中的另一个工作表创建图表

> ID：15969867
> 
> 赞同：1
> 
> 时间：2013-04-12T11:11:15.460
> 
> 标签：perl

我已经开始使用 Spreadsheet::WriteExcel::Chart 来编写图表。我有 10 个包含数据的工作表。我为图表添加了一张工作表。我的问题是，如何使用另一个工作表数据创建图表。

2）我还尝试了另一种方法，在这种方法中，我创建了新工作表并从旧工作表加载数据，而不是尝试创建图表。

3）在 $data 中，我们是硬编码值，是否有可能我们可以从单元格中获取值而不是硬编码值在这两种情况下，我都无法找出解决方案。

```
use Spreadsheet::ParseExcel;
  use Spreadsheet::WriteExcel;
  use Spreadsheet::ParseExcel::SaveParser;

  # Open the template with SaveParseir
  my $parser   = new Spreadsheet::ParseExcel::SaveParser;
  my $workbook = $parser->Parse('DD1.xls');
  if ( !defined $workbook ) {
        die $parser->error(), ".\n";
    }

  #Create the New worksheet
  my $Flop_workbook = Spreadsheet::WriteExcel->new('Flop.xls'); 
  for my $worksheet ( $workbook->worksheets() ) {
        my ( $row_min, $row_max ) = $worksheet->row_range();
        my ( $col_min, $col_max ) = $worksheet->col_range();

        my $worksheetname         = $worksheet->get_name(); 
        print "worksheetname : ", $worksheetname ,"\n"; 

        my $sheet                 = $Flop_workbook->add_worksheet($worksheetname);

        for my $row ( $row_min .. $row_max ) {
                for my $col ( $col_min .. $col_max ) {
                    my $cell = $worksheet->get_cell( $row, $col );
                    next unless $cell;
                    print "Row, Col    = ($row, $col)\n";
                    print "Value = ", $cell->value, "\n";
                    print "Unformatted = ", $cell->unformatted(), "\n";
                    $sheet->write_string($row,$col,$cell->value);
                    print "\n";
                }
            }
        } 
  my $chartsheet = $Flop_workbook->add_worksheet('Chart_data');
  my $chart     = $Flop_workbook->add_chart( type => 'line' );

  #Configure the chart.
  $chart->add_series(
                    categories => '=SUM_F_SCDLIB_DFF!$I$2',
                    values     => '=SUM_F_SCDLIB_DFF!$I$2',
          ); (Failed here As I need to load another worksheet data)

    # Add the worksheet data the chart refers to.
     my $data = [
       [ 'Category', 2, 3, 4, 5, 6, 7 ],
        [ 'Value',    1, 4, 5, 2, 1, 5 ],
    ];

    $chartsheet->write( 'AB5', $data );
    #$template->SaveAs('newfile.xlsx'); 
```

# primefaces - Primefaces Translations

> ID：15969869
> 
> 赞同：1
> 
> 时间：2013-04-12T11:11:18.677
> 
> 标签：primefaces, translation, message

i'm using primefaces

whan the List of an p:dataTable is empty it shows

```
"No records found." 
```

how can i translate it to an other language?

i found datatable uses

```
public java.lang.String getEmptyMessage() {
    return (java.lang.String) getStateHelper().eval(PropertyKeys.emptyMessage, "No records found.");
} 
```

so i tried adding the key emptyMessage to my message-properties, but this didn't help

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:43:01.880

您可以在 xhtml 中设置属性：

```
<p:dataTable emptyMessage="#{msg['your.resourcebundlekey']}"> 
```

# html - Background image doesn't show for header

> ID：15969870
> 
> 赞同：0
> 
> 时间：2013-04-12T11:11:25.700
> 
> 标签：html, css, background-image

I have simple html page with `body` and `header elements`:

```
<body>
    <header class="logoBar"></header>
</body> 
```

I try to add background image to `header`. If i do:

```
.logoBar {
   background:url('http://img704.imageshack.us/img704/2162/67726065.jpg') repeat-x center top;
} 
```

It doesn't show image. But if i make:

```
body {
    background:url('http://img704.imageshack.us/img704/2162/67726065.jpg') repeat-x center top;
} 
```

I see image. Why doesn't it work for `header`?

Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:13:05.103

您必须为标题设置一个`width`和`height`。如果它没有内容，它将只是 0px 宽和 0px 高。

```
.logoBar {
   background:url('http://img704.imageshack.us/img704/2162/67726065.jpg') repeat-x center top;
   width: 900px;
   height: 300px;
} 
```

演示：http: [//jsfiddle.net/Zjczp/](http://jsfiddle.net/Zjczp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:13:25.477

尝试在标题元素的 css 上设置宽度和高度。

```
.logoBar {
   width: 100%;
   height: 250px; <!-- Your image height goes here...
   background:url('http://img704.imageshack.us/img704/2162/67726065.jpg') repeat-x center top;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:37:36.343

现在定义你的班级的价值`.logobar`

**像这样**

```
.logobar{display:block;} 
```

并且定义`width`和`height` **根据** `@WDffy`和`@Cristy`

# android - Fragment Replaced even then 获取被替换片段的触摸事件

> ID：15969872
> 
> 赞同：0
> 
> 时间：2013-04-12T11:11:29.817
> 
> 标签：android, android-layout, fragment

我有一个 Activity，在不同的位置 A、B、C 有 3 个片段

当我用一个片段 D 替换我的片段 C 时。我仍然收到片段 C 的触摸事件。我会在哪里出错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:20:02.430

我知道实现可交换片段的一种方法是将它们附加到 FrameLayout。您是否可能已将片段设置为侦听 FrameLayout 上的点击事件而忘记断开非活动片段的连接？

# jsf - How to use Streamed Content with p:fileDownload to Download Non class path File

> ID：15969873
> 
> 赞同：9
> 
> 时间：2013-04-12T11:11:32.410
> 
> 标签：jsf, primefaces

I'm using Primefaces

> p:fileDownload

to download a file which is not in class path.
So I'm passing **FileInputStream** as parameter to **DefaultStreamedContent**.
Every thing works fine when my bean is kept at **@SessionScoped**...,
But

> java.io.NotSerializableException: java.io.FileInputStream

is thrown when I keep my bean in **@Viewscoped**.

My Code:

DownloadBean.java

```
@ManagedBean
@ViewScoped
public class DownloadBean implements Serializable {

    private StreamedContent dFile;

    public StreamedContent getdFile() {
        return dFile;
    }

    public void setdFile(StreamedContent dFile) {
        this.dFile = dFile;
    }

    /**
     * This Method will be called when download link is clicked
     */
    public void downloadAction()
    {
        File tempFile = new File("C:/temp.txt");
        try {
            dFile = new DefaultStreamedContent(new FileInputStream(tempFile), new MimetypesFileTypeMap().getContentType(tempFile));
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
    }

} 
```

index.xhtml

```
<h:form>
    <h:commandLink action="#{downloadBean.downloadAction}">
        Download
        <p:fileDownload value="#{downloadBean.dFile}"/>
    </h:commandLink>
</h:form> 
```

Isn't there any method to make it work?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-12T11:40:40.170

被`NotSerializableException`抛出是因为视图范围由 JSF 视图状态表示，在服务器端状态保存的情况下，该视图状态又可以序列化为 HTTP 会话，或者在客户端状态保存的情况下可以序列化为 HTML 隐藏输入字段。`FileInputStream`绝不能以序列化的形式表示。

如果您绝对需要保持 bean 视图的范围，那么您不应该将其声明`StreamedContent`为实例变量，而是在 getter 方法中重新创建它。诚然，在 getter 方法中执行业务逻辑通常是不受欢迎的，但这`StreamedContent`是一个相当特殊的情况。在 action 方法中，您应该只准备稍后在`DefaultStreamedContent`构造期间使用的可序列化变量。

```
@ManagedBean
@ViewScoped
public class DownloadBean implements Serializable {

    private String path;
    private String contentType;

    public void downloadAction() {
        path = "C:/temp.txt";
        contentType = FacesContext.getCurrentInstance().getExternalContext().getMimeType(path);
    }

    public StreamedContent getdFile() throws IOException {
        return new DefaultStreamedContent(new FileInputStream(path), contentType);
    }

} 
```

*（请注意，我还修复了获取内容类型的方法；通过这种方式，您可以更自由地通过`<mime-mapping>`中的条目配置 mime 类型`web.xml`）*

顺便说一句，`<p:graphicImage>`与`StreamedContent`. 另请参阅[使用 p:graphicImage 和 StreamedContent 显示来自数据库的动态图像](https://stackoverflow.com/questions/8207325/display-image-from-database-with-pgraphicimage/12452144#12452144)。

# android - 在首选项中保存搜索栏进度

> ID：15969877
> 
> 赞同：2
> 
> 时间：2013-04-12T11:11:43.817
> 
> 标签：android, seekbar

请告诉我如何在 Android 的“首选项”中保存 SeekBar 进度，以及如何在用户再次打开时将保存的值显示在 seekbar 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-15T20:51:17.417

[在 GitHub 上](https://github.com/afarber/android-newbie/tree/master/MyPrefs)尝试我的带有滑块首选项的简单但完整的示例：

![截屏](https://i.stack.imgur.com/PhNeC.png)

[SeekBarPreference.java](https://github.com/afarber/android-newbie/blob/master/MyPrefs/src/de/afarber/myprefs/SeekBarPreference.java)（将 SeekBar 进度保存为整数值）：

```
public class SeekBarPreference extends Preference implements OnSeekBarChangeListener {
    private SeekBar mSeekBar;
    private int mProgress;

    public SeekBarPreference(Context context) {
        this(context, null, 0);
    }

    public SeekBarPreference(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public SeekBarPreference(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        setLayoutResource(R.layout.preference_seekbar);
    }

    @Override
    protected void onBindView(View view) {
        super.onBindView(view);
        mSeekBar = (SeekBar) view.findViewById(R.id.seekbar);
        mSeekBar.setProgress(mProgress);
        mSeekBar.setOnSeekBarChangeListener(this);
    }

    @Override
    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
        if (!fromUser)
            return;

        setValue(progress);
    }

    @Override
    public void onStartTrackingTouch(SeekBar seekBar) {
        // not used
    }

    @Override
    public void onStopTrackingTouch(SeekBar seekBar) {
        // not used
    }

    @Override
    protected void onSetInitialValue(boolean restoreValue, Object defaultValue) {
        setValue(restoreValue ? getPersistedInt(mProgress) : (Integer) defaultValue);
    }

    public void setValue(int value) {
        if (shouldPersist()) {
            persistInt(value);
        }

        if (value != mProgress) {
            mProgress = value;
            notifyChanged();
        }
    }

    @Override
    protected Object onGetDefaultValue(TypedArray a, int index) {
        return a.getInt(index, 0);
    }
} 
```

[preference_seekbar.xml](https://github.com/afarber/android-newbie/blob/master/MyPrefs/res/layout/preference_seekbar.xml)（带有 SeekBar 和 TextView 的布局文件）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_vertical" >

    <SeekBar
        android:id="@+id/seekbar"
        android:layout_width="0dp"
        android:layout_weight="80"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@android:id/summary"
        android:layout_width="0dp"
        android:layout_weight="20"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-24T13:36:51.367

我给你**xml**和**java**代码来保存**SeekBar**的状态以及**TextView** ，它使用**SharedPreferences**类显示**SeekBar的值。**

 *****xml***代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity">

    <TextView
        android:id="@+id/textview"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="30dp"
        android:gravity="center_horizontal"
        android:textSize="30sp"
        tools:text="0" />

    <SeekBar
        android:id="@+id/seekBar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="30dp" />

</LinearLayout> 
```

***Java***代码：

```
import androidx.appcompat.app.AppCompatActivity;
import android.content.SharedPreferences;
import android.os.Build;
import android.os.Bundle;
import android.widget.TextView;
import android.widget.SeekBar;

public class MainActivity extends AppCompatActivity {

    private TextView textView;
    private SeekBar seekBar;

    private int seekBarProgress;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        textView = (TextView) findViewById(R.id.textview);
        seekBar = (SeekBar) findViewById(R.id.seekBar);

        seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
            @RequiresApi(api = Build.VERSION_CODES.M)
            @Override
            public void onProgressChanged(SeekBar seekBar, int i, boolean b) {
                textView.setText(String.valueOf(i));
                saveData();
            }

            @Override
            public void onStartTrackingTouch(SeekBar seekBar) {

            }

            @Override
            public void onStopTrackingTouch(SeekBar seekBar) {

            }
        });

        loadData();
        updateViews();
    }
    public void saveData() {
        SharedPreferences sharedPreferences = getSharedPreferences("my_preference", MODE_PRIVATE);
        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.putInt("my_seekBar", seekBar.getProgress());
        editor.apply();
    }
    public void loadData() {
        SharedPreferences sharedPreferences = getSharedPreferences("my_preference", MODE_PRIVATE);
        seekBarProgress = sharedPreferences.getInt("my_seekBar",0);
    }
    public void updateViews() {
        seekBar.setProgress(seekBarProgress);
        textView.setText(String.valueOf(seekBarProgress));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:16:41.630

保存进度

```
SharedPreference mSharedPrefs = PreferenceManager.getDefaultSharedPreferences(context);
Editor mEditor = mSharedPrefs.edit();
int mProgress = mSeekBar.getProgress();
mEditor.putInt("mMySeekBarProgress", mProgress).commit(); 
```

而不是你可以这样做来得到它：

```
int mProgress = mSharedPrefs.getInt("mMySeekBarProgress", 0);
mSeekBar.setProgress(mProgress); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T11:18:29.573

初始化一个 SharedPreferences 对象：

```
SharedPreferences pre = getSharedPreferences("pre_name", Context.MODE_PRIVATE); 
```

在首选项中添加一个值：

```
pre.edit().putInt("KEY_PROGRESS_VALUE", 30).commit(); 
```

从首选项中加载一个值：

```
int progress = pre.getInt("KEY_PROGRESS_VALUE",0); // 0: default value 
```

然后设置进度条的进度：

```
progrssBar.setProgress(progress); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-28T05:08:16.397

公共类 MainActivity 扩展 Preference 实现 OnSeekBarChangeListener { private SeekBar mSeekBar; 私人int mProgress；

```
public MainActivity(Context context) {
    this(context, null, 0);
}

public MainActivity(Context context, AttributeSet attrs) {
    this(context, attrs, 0);
}

public MainActivity(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    setLayoutResource(R.layout.preference_seekbar);
}

@Override
protected void onBindView(View view) {
    super.onBindView(view);
    mSeekBar = (SeekBar) view.findViewById(R.id.seekbar);
    mSeekBar.setProgress(mProgress);
    mSeekBar.setOnSeekBarChangeListener(this);
}

@Override
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
    if (!fromUser)
        return;

    setValue(progress);
}

@Override
public void onStartTrackingTouch(SeekBar seekBar) {
    // not used
}

@Override
public void onStopTrackingTouch(SeekBar seekBar) {
    // not used
}

@Override
protected void onSetInitialValue(boolean restoreValue, Object defaultValue) {
    setValue(restoreValue ? getPersistedInt(mProgress) : (Integer) defaultValue);
}

public void setValue(int value) {
    if (shouldPersist()) {
        persistInt(value);
    }

    if (value != mProgress) {
        mProgress = value;
        notifyChanged();
    }
}

@Override
protected Object onGetDefaultValue(TypedArray a, int index) {
    return a.getInt(index, 0);
} 
```

}**

# javascript - Google Maps Store Locator API - TypeError: this.b is undefined

> ID：15969878
> 
> 赞同：0
> 
> 时间：2013-04-12T11:11:54.763
> 
> 标签：javascript, jquery, google-maps-api-3

To cut a long story short i'm attempting to modify this example from Google: [http://storelocator.googlecode.com/git/examples/custom.html](http://storelocator.googlecode.com/git/examples/custom.html) to come from some XML instead.

The store locator API is here: [http://storelocator.googlecode.com/git/index.html](http://storelocator.googlecode.com/git/index.html)

As far as I can tell the code i've got is working ok, but for some reason I get a

> TypeError: this.b is undefined

in firebug and no markers show. I revert it back to the CSV and it works, so I can only assume i'm not passing something.

For some reason I can't get the jsfiddle to even show the map: [http://jsfiddle.net/tmtJz/4/](http://jsfiddle.net/tmtJz/4/) So i've upload the files here: [http://www.speedyshare.com/CSm8j/storelocator.zip](http://www.speedyshare.com/CSm8j/storelocator.zip) (click on the link at the top to download)

The main bit i've changed is:

```
 /**
 * @private
 * @param {string} csv
 * @return {!Array.<!storeLocator.Store>}
 */
tcmapData.prototype.parse_ = function() {
  var stores = [];

var xml='<markers><marker><name>1</name> <lat>53.043041229248</lat> <lng>-2.9924941062927</lng> </marker><marker><name>2</name> <lat>53.544544219971</lat> <lng>-2.1187319755554</lng> </marker></markers>';

     $(xml).find("marker").each(function() {
  var marker = $(this);
  //alert(marker.find('lat').text());

                var features = new storeLocator.FeatureSet;
              features.add(tcmapData.prototype.FEATURES_.getById('ServiceDepot-YES'));

              var position = new google.maps.LatLng(marker.find('lng').text(), marker.find('lat').text());

              var store = new storeLocator.Store(marker.find('name').text(), position, features, {
                title: marker.find('name').text(),
                address: 'Test Address',
                  hours: '9-5',
                  servicedepot: "YES"
               // servicedepot: row.Service_Depot
              });

                            stores.push(store);

});

}; 
```

If someone could help I would be internally grateful as I'm loosing the will the live trying to figure it out, but I think i'm close!

Thank You.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:48:57.730

*叹*

总是简单的东西。

只是忘记在最后一行之前返回商店......

```
 return stores; 
```

:( 花费数小时试图弄清楚！

如果其他人收到此错误，请务必检查以上内容！

# android - 如何Startintent在另一个类--Android

> ID：15969883
> 
> 赞同：0
> 
> 时间：2013-04-12T11:12:04.593
> 
> 标签：android, android-intent, android-activity

我想做一个带有类的应用程序，以使用 for 循环动态创建按钮。

我调用构造函数和点击监听器。

除了点击监听器之外的所有代码都不会改变我拥有的活动，我可以做什么？

```
public BotonPersonalizado(RelativeLayout layoutactual, int id, int posicionX,
        int posicionY, String texto, final Context contexto) {

    Button boton = new Button(contexto);
    boton.setId(id);
    boton.setText(texto);
    boton.setTextSize(10);
    boton.setMinimumHeight(5);
    boton.setHeight(5);
    boton.setWidth(100);
    boton.setX(posicionX);
    boton.setY(posicionY);
    boton.setTextColor(Color.BLACK);

    layoutactual.addView(boton); 
```

我使用上下文来改变和使用 Intent.FLAG_ACTIVITY_NEW_TASK 来调用一个新的活动

```
 boton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            int pasarid = v.getId();
            Intent i = new Intent(contexto,Tercero.class);
            i.putExtra("id", pasarid);
            i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
            contexto.startActivity(i);

        }
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:16:51.933

尝试调用另一个这样的活动，

```
private OnClickListener buttonclicked1 = new OnClickListener()
    {

        @Override
        public void onClick(View v)
        {
            Intent intent = new Intent(getApplicationContext(), InformationActivity.class);
            startActivity(intent);
        }

    }; 
```

在清单中，

```
<activity android:name=".InformationActivity" android:label="@string/app_name">
- <intent-filter>
  <action android:name="android.intent.action.VIEW" /> 
  <category android:name="android.intent.category.DEFAULT" /> 
  </intent-filter>
  </activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:43:16.247

```
boton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            int pasarid = v.getId(); //i get the ID for the next activity               
                Intent i = new Intent(context,Tercero.class);
            i.putExtra("id", pasarid); //i put the id to intent
            i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
            context.startActivity(i);

        }
    });

} 
```

看看这个链接：

[从 Activity 外部调用 startActivity()？](https://stackoverflow.com/a/3689900/1329126)

# javascript - javascript for is not working

> ID：15969885
> 
> 赞同：1
> 
> 时间：2013-04-12T11:12:25.350
> 
> 标签：javascript, for-loop

First time trying javascript and i cant find a solution about this. I need a open/close div button.

if div1 is not visible and i press button 1

set it visible

set all other not visible

elseif div1 is visible and i press button 1

set it not visible

this is my code so far...

```
<script type="text/javascript">
    function toggle_visibility(id) 
    {
        if (document.getElementById(id).style.display=='block')
        {
            document.getElementById(id).style.display='none';
        }
        else
        {
            document.getElementById(id).style.display='block';

            for (i=0; i<5; i++)
            {
                document.getElementById(i).style.display='none';
            }
        }
    }
</script>

<button onclick="toggle_visibility(1);">
    1
</button>

...

<button onclick="toggle_visibility(5);">
    5
</button> 
```

i forgot this ->

```
<div id="1" style="display:none">
1
</div>

...

<div id="5" style="display:none">
5
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:14:06.757

您没有带有 id 的元素。并且 id 不能以数字开头（在 (X)HTML 中，但不是 HTML5）！如果您只想显示一个元素，请尝试我的`showOnly`功能。

```
<script type="text/javascript">
    function toggle_visibility(id) 
    {
        var i; // omiting this causes a global variable
        if (document.getElementById("a"+id).style.display=='block')
        {
            document.getElementById("a"+id).style.display='none';
        }
        else
        {
            document.getElementById("a"+id).style.display='block';

            for (i=1; i<=5; i++)
            {
                document.getElementById("a"+i).style.display='none';
            }
        }
    }

    function showOnly(id) {
        for(var i=1; i<=5; i++) {
            document.getElementById("a"+i).style.display='none';
        }
        document.getElementById("a"+id).style.display='block';
    }
</script>

<div id="a1" onclick="toggle_visibility(1);">1</div>
<!-- ... -->
<div id="a5" onclick="toggle_visibility(5);">5</div> 
```

另见这个[小提琴](http://jsfiddle.net/CFmFk/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:15:20.097

您缺少 div 的 ID 属性。

```
<div id="yourId"> 
```

理想情况下，ID 不应以数字开头。

此外，您可以使用浏览器控制台窗口来帮助识别此类问题。

# java - cannot find symbol error when refering to a method to print from an array of objects

> ID：15969886
> 
> 赞同：0
> 
> 时间：2013-04-12T11:12:26.240
> 
> 标签：java, compiler-errors

I am getting a cannot find symbol error when trying to print out the contents of an array of objects based on istanceof either TeamLeader or Engineer. When i get to the class specific methods the error pops up:

> Cannot find method `getTeamSize()` location class `Person`.

The `getTeamSize` is from the `TeamLeader` subclass. Same error paired with a method from the other subclass specific method.

Errors occur on lines 112 and 117 within the `System.out.printf()`:

```
try {
    in = new ObjectInputStream(new FileInputStream("persons.dat"));
    Person[] personList = new Person[3];
    for (int i = 0; i < personList.length; i++) {
        personList[i] = (Person) in.readObject();
    }
    System.out.printf("%-20s %3s %10s %10s", "Name", "Age", "Team Size", "Experience\n");
    for (int x = 0; x < personList.length; x++) {
        if (personList[x] instanceof TeamLeader) {
            System.out.printf("-20s %3i %10i %10s\n",
                              personList[x].getName(), personList[x].getAge(),
                              personList[x].getTeamSize(), " ");
        } else {
            System.out.printf("-20s %3i %10s %10.1f\n",
                              personList[x].getName(), personList[x].getAge(),
                              " ", personList[x].getExperience());
        }

    }
    System.out.println();
} catch (IOException e) {
    System.out.println("Problem reading file");
    e.printStackTrace();
} catch (ClassNotFoundException e) {
    System.out.println("Could not find designated class");
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:18:56.320

我想该`getTeamSize()`方法只存在于`TeamLeader`类中，而不存在于`Person`类中。因此，您需要将 Person 转换为 TeamLeader 才能使用该方法：

```
if (personList[x] instanceof TeamLeader){
    TeamLeader teamLeader = (TeamLeader) personList[x];
    System.out.printf("-20s %3i %10i %10s\n",
        teamLeader.getName(), teamLeader.getAge(), 
        teamLeader.getTeamSize(), " ");
} 
```

# html - w3c markup validation

> ID：15969890
> 
> 赞同：0
> 
> 时间：2013-04-12T11:12:47.183
> 
> 标签：html, validation

```
Bad value copyright for attribute name on element meta: Keyword copyright is not registered.
<meta name="copyright" content="Copyright (c) 2009-2013 Skyline" /> 
```

When I try to validate my code, i'm getting this error. Why?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:21:01.417

HTML 规范为 meta 元素的 name 属性定义了一些名称。

`meta name="copyright"`在本规范中没有定义。请试试这个：

```
<meta name="dcterms.rightsHolder" content="Copyright (c) 2009-2013 Skyline" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:24:30.153

尝试

```
<meta name="dcterms.rightsHolder" content="Copyright (c) 2009-2013 Skyline"> 
```

有关完整详细信息，请参阅[http://dublincore.org/documents/dcmi-terms/#terms-rightsHolder](http://dublincore.org/documents/dcmi-terms/#terms-rightsHolder)。

有关完整说明，[请参阅 Karl Horky 的这篇文章](https://stackoverflow.com/questions/6665312/w3c-markup-validator-html5-meta)

# ios - 使用 FMDB for SQLite 库如何自动更新 Core Data 的 controllerDidChangeContent 之类的 tableview

> ID：15969908
> 
> 赞同：0
> 
> 时间：2013-04-12T11:13:35.950
> 
> 标签：ios, sqlite, core-data, fmdb

我在我的应用程序中使用核心数据，但我注意到这有点慢，而且我遇到了一些不一致的问题，也许我管理不好，但是我想通过`SQLite`并且我找到了`FMDB`库，但我的问题是当我在数据库中进行背景更改时，如何自动更新表格视图？使用核心数据`NSFetchedController`，特别是`NSFetchedResultsControllerDelegate`自动刷新表视图，我如何使用 SQLite 执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:52:28.990

您可以使用`NSNotificationCenter`它，这是代码示例..

在您的 TableViewController.m 文件中添加此代码

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    if (self) {
        // Custom initialization
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reloadTableView:) name:@"ReloadTableView" object:nil];
    }
    return self;
}

- (void)reloadTableView:(NSNotification*)notification
{
    [tableView relodData];
} 
```

在你调用你的后台线程的地方，把这段代码放在它的完成中。

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"ReloadTableView" object:nil]; 
```

# php - 对象属性到文本

> ID：15969912
> 
> 赞同：1
> 
> 时间：2013-04-12T11:13:44.380
> 
> 标签：php, codeigniter, model

我正在从我的数据库中检索一个整数，该整数在输出时应该对应于一个文本字符串。

```
$sql = ('SELECT drinking, smoking FROM users WHERE id = ?')

$q = $this->db->query($sql, $this->session->userdata('user_id'));

if ($q->num_rows() === 1) {
    $userobject = $q->row();
} 
```

这可能会得到 1 表示饮酒和 2 表示吸烟。然后我想要一个函数将该整数转换为相应的字符串。例如“只在聚会上喝酒”表示饮酒，“我不吸烟”表示吸烟。

我希望只有一个函数可以处理所有属性。

我正在考虑做类似的事情：

```
$userobject->drinking = number_to_text($userobject->drinking); 
```

然后有这样的功能：

```
public function number_to_text()
{

} 
```

但是由于这个函数将同时处理饮酒和吸烟（以及其他），所以我需要获取属性的名称来获取正确的字符串。

怎么可能呢？

希望有人可以帮助我（并理解我）。如果不能以这种方式完成，我愿意接受另一种方式的建议。

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:50:10.727

正如您在对此问题的评论中所要求的那样，我提出了我的建议，但是，在重新考虑之后，您可以在下面找到更好的解决方案。

**首先，就像我的评论一样。**

您可以简单地将活动作为参数传递，例如将您的函数声明为

```
function number_to_text($value, $type_of_activity){
  switch ($type_of_activity){
    case 'drinking': 
      switch($value){
        case 1: return "I'm drinking a lot"; break;
        case 2: return "I've never tasted alcohol, I'm too young for that"; break;
        //
      } // switch($value)
      break;
    case 'smoking':
      switch($value){
        case 1: return 'I smoke as a steam engine'; break;
        case 2: return 'I saw once a smoke and since then I keep away from it'; break;
        //
      } // switch($value)
      break;
  } // switch $type_of_activity
  return ''unknown';
} 
```

但...

正如你所看到的，这是一个相当复杂的陈述。

**第二，更容易的。**

您可以创建一个包含所有文本的数组，例如：

```
$activities['drinking'][1] = "I'm drinking a lot";
$activities['drinking'][2] = "I've never tasted alcohol, I'm too young for that";
$activities['smoking'][1] = "I smoke as a steam engine";
$activities['smoking'][2] = "I saw once a smoke and since then I keep away from it"; 
```

只需调用它

```
$activity = 'drinking';
$userobject->{$activity} = $activities[$activity][$userobject->{$activity}]; 
```

我认为要简单得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:26:31.880

使用 Switch 机箱并将您的机箱放入该功能中。请参阅我已将其设为数组响应，因此您的属性将是一个键，值将是您想要的字符串。

```
public function number_to_text($text)
{
    switch($text) {
        case 1:
        $arr['property'] = 'drinking';
        $arr['val']      =  "Drinking at parties only";
        return $arr;
        break;

} 
```

# c# - 我试图从我的硬盘播放视频 avi 文件但收到 FileLoadException 错误，为什么？

> ID：15969914
> 
> 赞同：0
> 
> 时间：2013-04-12T11:13:46.583
> 
> 标签：c#

这是我在 Form1 中的代码：

```
private void play()
        {
            pictureBox1.Load(vp.PlayVideoFile(@"D:\testdata\new.avi"));
        } 
```

vp 是我的 VideoPlayer 类的变量：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ScreenVideoRecorder
{
    class VideoPlayer
    {
        public VideoPlayer()
        {
        }

        public string PlayVideoFile(string fileName)
        {
            //create the video
            Microsoft.DirectX.AudioVideoPlayback.Video video = new Microsoft.DirectX.AudioVideoPlayback.Video(fileName);
            //Play the video (put this in a buttons click event)
            video.Play();
            //Pause the video (put this in a buttons click event)
            video.Pause();
            //Stop the video (put this in a buttons click event)
            video.Stop();

            return fileName;
        }
    }
} 
```

为什么我得到这个异常？

混合模式程序集是针对运行时的“v1.1.4322”版本构建的，如果没有额外的配置信息，则无法在 4.0 运行时中加载

它需要哪些额外的配置信息？怎么做？

```
System.IO.FileLoadException was unhandled
  HResult=-2146232799
  Message=Mixed mode assembly is built against version 'v1.1.4322' of the runtime and cannot be loaded in the 4.0 runtime without additional configuration information.
  Source=ScreenVideoRecorder
  StackTrace:
       at ScreenVideoRecorder.VideoPlayer.PlayVideoFile(String fileName)
       at ScreenVideoRecorder.Form1.play() in d:\C-Sharp\ScreenVideoRecorder\ScreenVideoRecorder\ScreenVideoRecorder\Form1.cs:line 107
       at ScreenVideoRecorder.Form1.timer1_Tick(Object sender, EventArgs e) in d:\C-Sharp\ScreenVideoRecorder\ScreenVideoRecorder\ScreenVideoRecorder\Form1.cs:line 58
       at System.Windows.Forms.Timer.OnTick(EventArgs e)
       at System.Windows.Forms.Timer.TimerNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.Run(Form mainForm)
       at ScreenVideoRecorder.Program.Main() in d:\C-Sharp\ScreenVideoRecorder\ScreenVideoRecorder\ScreenVideoRecorder\Program.cs:line 19
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

编辑：

现在我在我的 VideoPlayer 类中遇到异常：

```
Microsoft.DirectX.AudioVideoPlayback.Video video = new Microsoft.DirectX.AudioVideoPlayback.Video(fileName); 
```

例外情况是：检测到加载程序锁：

```
DLL 'C:\WINDOWS\assembly\GAC\Microsoft.DirectX\1.0.2902.0__31bf3856ad364e35\Microsoft.DirectX.dll' is attempting managed execution inside OS Loader lock. Do not attempt to run managed code inside a DllMain or image initialization function since doing so can cause the application to hang. 
```

检测到 LoaderLock 消息：DLL 'C:\WINDOWS\assembly\GAC\Microsoft.DirectX\1.0.2902.0__31bf3856ad364e35\Microsoft.DirectX.dll' 正在尝试在 OS Loader 锁内进行托管执行。不要尝试在 DllMain 或图像初始化函数中运行托管代码，因为这样做会导致应用程序挂起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:16:54.437

将 app.config 文件添加到您的项目中，其中包含以下内容：

```
 <?xml version="1.0"?>
 <configuration>
   <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v1.0"/>
    <supportedRuntime version="v4.0"/>
  </startup>
 </configuration> 
```

# android - 在 ImageView 中返回 BitmapDrawable

> ID：15969930
> 
> 赞同：1
> 
> 时间：2013-04-12T11:14:41.573
> 
> 标签：android, imageview, mvvmcross

我正在 MVVMCross 的 Android 应用程序中创建收藏夹汽车列表。我的问题是该列表上的动态加载图像。我的观点是，每辆车的 ImageView 正在获取转换器获取并返回 BitmapDrawable 对象的图片 ID。它在我的 Windows Phone 应用程序上运行，但在 Android 中我有一个小问题。代码如下所示：

```
<LinearLayout
      android:id="@+id/PeoplePanel"
      android:orientation="horizontal"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:background="@color/transparent"
      android:layout_below="@id/TitleTextView"
      android:paddingTop="3dip"
      android:paddingLeft="10dip">
    <ImageView
        android:id="@+id/imagePhoto"
        android:layout_width="70dp"
        android:layout_height="70dp"
        local:MvxBind="{'ResourcesImagePath':{'Path':'Item.Obj.IDZdjeciaGlownego', 'Converter':'ByteToImg'}}"/> 
```

转换器是：

```
public override object Convert(object value, Type targetType, object parameter, CultureInfo culture)
            {
                var id = (int?)value;
                if (id != null)
                {
                    var Service = this.GetService<IKomisSamService>();
                    var img = Service.GetImage((int)id);
                    try
                    {                
                        var drawable = BitmapFactory.DecodeByteArray(img, 0, img.Length);
                        return new BitmapDrawable(drawable);
                    }
                    catch { }
                }
                return null; 
```

..和输出：

```
04-12 11:13:06.034 I/MvxBind (  856): 135.42 Failed to create target binding for from Item.Obj.IDZdjeciaGlownego to ResourcesImagePath
MvxBind:Warning:135.42 Failed to create target binding for from Item.Obj.IDZdjeciaGlownego to ResourcesImagePath
04-12 11:13:06.034 I/mono-stdout(  856): MvxBind:Warning:135.42 Failed to create target binding for from Item.Obj.IDZdjeciaGlownego to ResourcesImagePath
04-12 11:13:06.644 D/dalvikvm(  856): GC_EXTERNAL_ALLOC freed 1850 objects / 93880 bytes in 48ms 
```

转换器运行两次：第一次要求服务获取项目，下载时第二次运行以获取并返回 BitmapDrawable 对象。

我假设我的问题出在 MvxBind 中，我不应该使用 ResourcesImagePath 而是其他获取 BitmapDrawable 对象而不是他的路径的东西。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:55:40.750

一般来说：

*   MvvmCross 中有“内置”绑定，用于显示来自资产和`ImageView`s内资源的图像
*   这`MvxImageView`使得显示下载的图像非常简单 - 只需使用`ImageUrl`并确保您已加载 DownloadCache 和 File 插件。
*   在 v3 中，还有一个现成的绑定可用于在 s`Byte[]`内部显示`ImageView`（这是在 PictureChooser 插件中）

但是，对于您想要添加自己的绑定的一般情况，如果您愿意，您可以自己执行此操作...

但是你不能仅仅通过发明`ResourcesImagePath`和使用价值转换器来做到这一点。An`ImageView`没有`ResourcesImagePath`属性——所以在这种情况下 Mvx 系统没有什么可以绑定的。

反而：

1.  您需要使用如下类定义绑定操作：[https ://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Droid/Target/MvxImageViewDrawableTargetBinding.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Droid/Target/MvxImageViewDrawableTargetBinding.cs)

2.  然后您需要（在您的 期间`Setup`）告诉 mvvmcross 如何使用该绑定 - 例如第 63 行：[https ://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Droid /MvxAndroidBindingBuilder.cs#L63](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Droid/MvxAndroidBindingBuilder.cs#L63)

这样做称为“创建自定义绑定”

* * *

*注意*：我不完全确定“转换器正在运行两次”-不确定您的意思是什么（听起来像是一个单独的问题）

* * *

重要提示 - 为避免位图内存泄漏，请对您动态加载的所有位图使用 InPurgeable

# android - 在屏幕中心使用动画实现自定义视图的最佳方法？

> ID：15969936
> 
> 赞同：2
> 
> 时间：2013-04-12T11:15:02.230
> 
> 标签：android, android-animation, toast, android-framelayout, android-windowmanager

我的目标是在我的应用程序中实现自定义 toast，如下所示：

```
MyCustomToastClass.makeText(context,View,anyDurationInMS); 
```

我想设置“Toast”重力、布局、持续时间（不仅仅是 Length.SHORT/LONG）

到目前为止我尝试过的事情：

*   具有 windowManager 对象问题的类是它必须在以下位置实现 android 系统动画：

    params.windowAnimations

当我尝试如下实现我的自定义动画时：

```
windowManager.addView(mLayout);
Animation AlphaAnimation = new ... 
```

它没有实现我的动画。

*   使用 rootView 元素向其添加 Toast 的布局：通过这种方式，只有当根视图为 FrameLayout 类型时，我才能成功实现所有内容（对于其他布局，我无法将“Toast”重力设置为中心）。

如果有人实现了此功能，我将不胜感激，或者如果我在其中一种方式中遗漏了某些东西，请指导我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:21:38.013

很抱歉误解了你的问题

如果您想创建一个像 toast 一样的弹出窗口并且持续时间取决于您，也许您可​​以尝试创建一个自定义视图，其中包含您想要烘烤的内容，之后您可以将主布局放置在框架布局中，然后每次用户触发您的自定义 toast 您可以将自定义视图添加到您的框架布局中，以便将其放置在您的主布局前面，并且对于淡入淡出动画，您可以使用它

```
Animation fadeIn = new AlphaAnimation(0, 1);
fadeIn.setInterpolator(new DecelerateInterpolator()); //add this
fadeIn.setDuration(1000);

Animation fadeOut = new AlphaAnimation(1, 0);
fadeOut.setInterpolator(new AccelerateInterpolator()); //and this
fadeOut.setStartOffset(1000);
fadeOut.setDuration(1000); 
```

或者如果你想使用 XML

淡入

```
<?xml version="1.0" encoding="utf-8"?> 
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromAlpha="0.0" 
    android:toAlpha= 1.0" 
    android:duration="1000"    
    android:repeatCount="infinite" 
    android:repeatMode="reverse"
    /> 
```

消退

```
<?xml version="1.0" encoding="utf-8"?> 
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromAlpha="1.0" 
    android:toAlpha="0.0" 
    android:duration="1000"    
    android:repeatCount="infinite" 
    android:repeatMode="reverse"
    /> 
```

在你可以使用的时候

```
final Handler handler = new Handler();
handler.postDelayed(new Runnable() {
  @Override
  public void run() {
    // FADE OUT THE POP UP/TOAST HERE
  }
}, /*SET THE TIME HERE*/); 
```

我希望这个答案对您来说足够清楚，如果您对我的回答仍有疑问，请随时在评论中提问：)

# ruby-on-rails - how does the gem backbone-on-rails generate its templates

> ID：15969937
> 
> 赞同：0
> 
> 时间：2013-04-12T11:15:08.090
> 
> 标签：ruby-on-rails, backbone.js, gem, asset-pipeline

I'm trying to understand how the gem [backbone-on-rails](https://github.com/meleyal/backbone-on-rails) works under the hood.

My problem right now is that I don't know who is in charge of generating the code for the templates it provides.

After installing and setting it up (I'm using the plain js route, not coffeescript, but the question is the same), if I write a template file in `/app/assets/templates/hello.jst`, it gets "somehow" translated to the following javascript inside `application.js`:

```
(function() {
 this.JST || (this.JST = {});
 this.JST["hello"] = function(obj){ <ugly js here> };
); 
```

But who actually does generate that code? I've browsed the sourcecode of `backbone-on-rails`, and could not find anything that pointed to template compilation. Is the asset pipeline capable of doing that out of the box?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:22:28.153

好的，我想我找到了答案。

该功能由 sprokets 提供，[对其自述文件有很好的解释](https://github.com/sstephenson/sprockets#javascript-templating-with-ejs-and-eco)。

过两天就关了。

# javascript - Three.js 无法加载 DAE 模型

> ID：15969946
> 
> 赞同：2
> 
> 时间：2013-04-12T11:15:37.563
> 
> 标签：javascript, model, load, three.js, webgl

我遇到了无法将模型加载到 Three.js 中的严重问题。首先。我已经下载了[https://github.com/mrdoob/three.js/](https://github.com/mrdoob/three.js/)并将其提取到本地 WebMatrix 服务器中。大多数示例运行良好，除了我最需要的示例。

webgl_loader_collada.html 给了我

```
GET http://localhost:26238/three.js-master/examples/models/collada/monster/monster.dae 404 (Not Found) 
```

webgl_loader_obj.html 给了我

```
GET http://localhost:26238/three.js-master/examples/obj/male02/male02.obj 404 (Not Found) 
```

我在同一个文件夹中也有 ColladaLoader.js。

当我尝试像这样加载 Collada 文件时：

```
var loader = new THREE.ColladaLoader();
                loader.load("monster.dae", function loadCollada(collada) {
                                            var model = collada.scene;
                                            model.scale.set(0.1, 0.1, 0.1);
                                            model.rotation.x = -Math.PI/2;
                                            model.updateMatrix();
                                            scene.add(model);
                                            }); 
```

我明白了：

```
GET http://localhost:26238/monster.dae 404 (Not Found)
ColladaLoader.js:108 load ColladaLoader.js:108

init webgl.html:43

onload webgl.html:107 
```

我可以让 JSON 加载器加载模型，但我需要其他格式工作。

我被困住了。我需要这个工作，但我不知道问题是什么。我已经从工作示例中复制了代码，但它仍然不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-06T13:14:23.707

我假设您正在使用 Visual Studio Express... 如果是这样，您可能正在使用 IIS Express... 来解决我这样做的问题：

1.  转到 X:\Users\YOURUSERNAME\Documents\IISExpress\config
2.  编辑 applicationhost.config
3.  在该 `<staticContent lockAttributes="isDocFooterFileName">` 部分中添加以下内容：`<mimeMap fileExtension=".dae" mimeType="text/xml" />`

我希望这会有所帮助！

# php - 在没有 ssh 访问服务器的情况下使用 Composer

> ID：15969948
> 
> 赞同：21
> 
> 时间：2013-04-12T11:16:00.220
> 
> 标签：php, composer-php

是否可以在无法使用 ssh 访问的廉价网络空间上运行[composer ，只有 ftp？](http://getcomposer.org/)

理论上跑步`system('php composer.phar install');`应该有效——这是推荐的方法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-07-13T11:49:38.383

正如之前评论中所建议的，我认为最好的方法是在能够执行此操作的本地系统上执行 composer 步骤，然后通过 FTP 上传结果。

Composer 有一些（可能是可选的）软件依赖项，这些依赖项很可能在您的网络空间中不可用。例如，它需要 Git 和 SVN 客户端软件，以防您要安装的项目引用此类依赖项。

另一件事是从 Github（或其他任何地方）下载可能会失败。或者触发 API 限制并要求登录。

您真的想收集所有软件并知道它可以工作，而不是希望它能够在远程运行良好。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-10-09T11:35:57.803

我仅使用 FTP 在我的共享主机上成功安装了 Composer：

1.  在共享主机上安装[PHPShell](http://phpshell.sourceforge.net/)

2.  在 PHPShell 中`config.php`添加用户和别名：

    `php = "php -d suhosin.executor.include.whitelist=phar"`

3.  登录 PHPShell 并输入：`curl -sS https://getcomposer.org/installer | php`

4.  成功安装后，运行 Composer：`php composer.phar`

# macos - 使用 Mac OS X 应用程序部署 Qt - 如何不加载任何插件？

> ID：15969949
> 
> 赞同：2
> 
> 时间：2013-04-12T11:16:02.997
> 
> 标签：macos, qt, plugins, deployment, qt4.8

我想将 Qt 4.x 共享库与我的应用程序一起打包，这样用户就不必安装 Qt 框架。使用构建脚本，我正确修补了所有 Qt 依赖项，并确保`/Library/Frameworks`不再从我的 Qt 安装中加载任何依赖项（请参阅我的答案[here](https://stackoverflow.com/a/15947403/245706)）。

但是现在我遇到了问题，因为在初始化期间的某个时刻，插件`/Developer/Applications/Qt/plugins/bearer/libqcorewlanbearer.dylib`被加载：

```
$ export DYLD_PRINT_LIBRARIES=1
$ cd /path/to/my.app/Contents/MacOS
$ ./myappexecutable

dyld: loaded: /path/to/executable
dyld: loaded: /usr/lib/libz.1.dylib
dyld: loaded: /System/Library/Frameworks/CoreMedia.framework/Versions/A/CoreMedia
dyld: loaded: /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox
dyld: loaded: /System/Library/Frameworks/AVFoundation.framework/Versions/A/AVFoundation
dyld: loaded: /usr/lib/libxml2.2.dylib
dyld: loaded: /System/Library/Frameworks/LDAP.framework/Versions/A/LDAP
dyld: loaded: /System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL
dyld: loaded: /usr/lib/libssl.0.9.8.dylib
dyld: loaded: /System/Library/Frameworks/QTKit.framework/Versions/A/QTKit
dyld: loaded: /System/Library/Frameworks/CoreVideo.framework/Versions/A/CoreVideo
dyld: loaded: /System/Library/Frameworks/Cocoa.framework/Versions/A/Cocoa
dyld: loaded: /path/to/my.app/Contents/MacOS/./../Qt/QtCore.framework/Versions/4/QtCore
dyld: loaded: /path/to/my.app/Contents/MacOS/./../Qt/QtGui.framework/Versions/4/QtGui
dyld: loaded: /path/to/my.app/Contents/MacOS/./../Qt/QtOpenGL.framework/Versions/4/QtOpenGL
dyld: loaded: /path/to/my.app/Contents/MacOS/./../Qt/QtWebKit.framework/Versions/4/QtWebKit
dyld: loaded: /path/to/my.app/Contents/MacOS/./../Qt/phonon.framework/Versions/4/phonon
dyld: loaded: /path/to/my.app/Contents/MacOS/./../Qt/QtNetwork.framework/Versions/4/QtNetwork
dyld: loaded: /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation
dyld: loaded: /usr/lib/libobjc.A.dylib
dyld: loaded: /usr/lib/libstdc++.6.dylib
dyld: loaded: /usr/lib/libSystem.B.dylib
dyld: loaded: /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ApplicationServices
dyld: loaded: /System/Library/Frameworks/CoreServices.framework/Versions/A/CoreServices
dyld: loaded: /usr/lib/system/libcache.dylib
[...]
dyld: loaded: /usr/lib/libsasl2.2.dylib
dyld: loaded: /System/Library/Frameworks/AGL.framework/Versions/A/AGL
dyld: loaded: /path/to/my.app/Contents/MacOS/./../Qt/QtDBus.framework/Versions/4/QtDBus
dyld: loaded: /path/to/my.app/Contents/MacOS/./../Qt/QtXml.framework/Versions/4/QtXml
dyld: loaded: /System/Library/PrivateFrameworks/CoreServicesInternal.framework/Versions/A/CoreServicesInternal
dyld: loaded: /System/Library/Frameworks/Security.framework/PlugIns/csparser.bundle/Contents/MacOS/csparser
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Frameworks/ColorSync.framework/Versions/A/Resources/ColorSyncDeprecated.dylib
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCSync.A.dylib
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libRIP.A.dylib
dyld: loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCGXType.A.dylib
dyld: loaded: /System/Library/Frameworks/OpenGL.framework/Resources/GLEngine.bundle/GLEngine
dyld: loaded: /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLProgrammability.dylib
dyld: loaded: /System/Library/Extensions/ATIRadeonX3000GLDriver.bundle/Contents/MacOS/ATIRadeonX3000GLDriver
dyld: loaded: /System/Library/PrivateFrameworks/GPUSupport.framework/Versions/A/Libraries/libGPUSupport.dylib
dyld: loaded: /System/Library/Extensions/AppleIntelHD3000GraphicsGLDriver.bundle/Contents/MacOS/AppleIntelHD3000GraphicsGLDriver
dyld: loaded: /System/Library/Frameworks/OpenGL.framework/Resources//GLRendererFloat.bundle/GLRendererFloat
dyld: loaded: /System/Library/Frameworks/OpenCL.framework/Versions/A/Libraries/libcldcpuengine.dylib
dyld: loaded: /System/Library/PrivateFrameworks/DiskImages.framework/Versions/A/DiskImages
dyld: loaded: /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libCoreFSCache.dylib
dyld: loaded: /System/Library/Frameworks/DiscRecording.framework/Versions/A/DiscRecording
dyld: loaded: /usr/lib/libcurl.4.dylib
dyld: loaded: /System/Library/PrivateFrameworks/MediaKit.framework/Versions/A/MediaKit
dyld: loaded: /Developer/Applications/Qt/plugins/bearer/libqcorewlanbearer.dylib
[^^^ this one is problematic as it loads global Qt libraries, see below]
dyld: loaded: /System/Library/Frameworks/CoreWLAN.framework/Versions/A/CoreWLAN
dyld: loaded: /Library/Frameworks/QtNetwork.framework/Versions/4/QtNetwork
dyld: loaded: /Library/Frameworks/QtCore.framework/Versions/4/QtCore
QObject::moveToThread: Current thread (0x7fc2d260b280) is not the object's thread (0x7fc2d4245fd0).
Cannot move to target thread (0x7fc2d260b280) 
```

该插件引用了全局安装的 Qt 框架，然后我基本上加载了两组 Qt 二进制文件，导致各种麻烦。

现在我的问题是：该插件在哪里加载（找不到任何包含“wlanbearer”的二进制文件）以及如何确保没有插件从我的应用程序中自动加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-08T12:35:37.440

尝试在 QApplication 初始化后立即替换插件路径：

```
QApplication app(argc, argv);
QCoreApplication::removeLibraryPath(QLibraryInfo::location(QLibraryInfo::PluginsPath));
QCoreApplication::addLibraryPath("../../PlugIns"); 
```

它对我有用。

# c++ - 在派生类 C++ 上访问方法的最佳方式

> ID：15969972
> 
> 赞同：1
> 
> 时间：2013-04-12T11:17:22.810
> 
> 标签：c++, virtual, base-class

我有一些不同类型的对象`Zoo`，它们都有一个成员变量`Collection = vector<Animal>`。我有一个动物园实例，其中所有元素都是动物，一个是所有元素`Birds`，一个是所有元素`Bats`。两者`Birds`都`Bats`来自动物。

我希望有一种方法`fly()`可以调用所有的鸟类和蝙蝠，但我不确定最好的方法。我应该在我的鸟类/蝙蝠动物园循环时施放吗？像这样：

```
Bird thisBird = static_cast<Bird>(Collection[i]);
thisBird.fly(); 
```

...或者我可以在 Animal 上以某种方式拥有一个虚拟函数，它只在派生自它的类上实现？

想法，以及为什么它们是“好代码”的理由，欢迎！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:17:21.380

哦，是的，`Animal`可以有一个虚函数：

```
virtual void move(){}
virtual void fly(){} 
```

当你命令一只狗飞行时，它什么也不做。当你命令一只鸟移动时，它`fly()`也会叫。

正确定义`fly()`会飞的动物， `Colection[i]->fly()`只会做正确的事。这样你的代码就会很简单。

但要做到这一点，您的集合必须收集指向动物的指针，而不仅仅是 Animal 对象。例如：

```
#include <vector>
#include <memory>
#include <iostream>  
using namespace std;
struct Animal{virtual void fly(){}};
struct Bird:public Animal{void fly(){cout<<"fly\n";}};
int main()
{
  vector<unique_ptr<Animal>> Colection(1);
  Colection[0].reset( new Bird ); 
  Colection.push_back(unique_ptr<Animal>(new Bird) );
  Colection.push_back(unique_ptr<Animal>(new Animal) );
  Colection[0]->fly(); 
  Colection[1]->fly(); 
  Colection[2]->fly();   
} 
```

阅读其他答案，我可以建议您实施类似

```
struct Animal    {virtual bool fly(){return false;     }};
struct Bird:public Animal{bool fly(){cout<<"fly\n";return true;}}; 
```

而且您不需要单独的 canFly。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:33:03.757

并非所有动物都能飞，因此没有必要为了通用目的而尝试执行特定行为（即所有动物之间不常见）。如果您有动物类（或其派生类）的集合，其目的是允许它们执行共同行为（每个派生类以不同方式实现）。

您可以实现一个`FlyAble`接口（即抽象类）并仅由真正会飞的动物扩展它。不仅仅是将它们保存在为这些类型的动物指定的另一个集合中（即< `FlyAble`>）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T11:41:44.197

你可能不想要一个层次结构，就像在你交付的低类中没有声明的方法`Bird`那样产生`Bat`。这样你就失去了统一层次结构的意义。`Animal``fly()`

你可以这样做：

```
class Animal {
    virtual bool canFly() { return false; }
    virtual void fly() {throw Exception( "Sorry babe, I don't fly"); }
} 
```

并覆盖`fly`和。`Bird``Bat`

这将导致您为`fly()`您可能不想要的狗、猫实现方法。所以也许你可以创建一个新的类`Flyer`来声明这个方法：

```
class Flyer : public Animal {
    virtual void fly() = 0;
}

class Bat : public Flyer {}
class Bird : public Flyer {} 
```

这将与更详细的生物学分类不一致，例如`Reptile`，`Mammal`。

另一个技巧可能是提出方法 like`move()`和 dog 会实现它 as`run()`和 bird as `fly()`，都具有统一的接口。

另一件事是，我认为问狗是否会飞是一个有效的问题，所以我认为 `Dog.canFly()`应该在你的代码中实现类似的方法，作为动物的一部分。

考虑到所有这些，我会这样做：

```
// Your base animal
class Animal {
    virtual bool canFly() {return false;}
};

// Any animal that could fly, just abstract class
class Flyer {
    virtual void fly() = 0;
}

// Ants, flies etc.; real biological hierarchy
class Insect : public Animal {}
class Mammals : public Animals {}
class Birds : public Animals {}

// And now flying bird :
class Bird : public Birds, public Flyer {
    virtual bool canFly() {return true; }
    virtual void fly() {...}
}

// And flying insect
class Fly : public Insect, public Flyer {
    virtual bool canFly() {return true; }
    virtual void fly() {...}
} 
```

然后您就可以这样做（基于[此答案](https://stackoverflow.com/a/10338559/1149736)，恐怕您必须为此使用指针）：

```
if( Collection[i]->canFly()){
    Flyer *thisBird = static_cast<Flyer*>(Collection[i]);
} 
```

您也可以从虚拟继承派生`Flyer`并`Animal`使用虚拟继承，但这被称为*“可怕*的钻石”，它[不被认为是好的做法](https://stackoverflow.com/a/21607/1149736)，但值得一读。

* * *

*正如Ricibob*在评论中指出的那样，`Flyer`应该指定`canFly()`，这将在简单的示例中：

```
class Flyer {
public:
    virtual bool canFly() const {return true;}
    virtual void fly() {cout << "Flying" << endl; }
};

Bird b;
cout << "Can fly: " << b.canFly() << endl;
// Error    1   error C2385: ambiguous access of 'canFly' 
```

但是，如果您从课程的一部分中`Flyer`交付`Animal`并且：`Bird``Birds``Flyer`

```
class Animal {
public:
    virtual bool canFly() const {return false;}
};

class Flyer : virtual Animal {
public:
    virtual bool canFly() const {return true;}
    virtual void fly() {cout << "Flying" << endl; }
};

class Bird : virtual public Birds, virtual public Flyer {

}; 

// Warning  1   warning C4250: 'Bird' : inherits 'Flyer::Flyer::canFly' via dominance 
```

现在`canFly()`返回`1`，但代码对我来说似乎是错误的。

此时......您可以`canFly()`为每个子类（或大型组）手动指定，或者`Birds`从`Flyers`（例如对于 不正确`Chicken`）交付，或者交付新的子类：

```
class FlyingBrids : public Birds, public Flyer /* Flyer not delivered from Animal */ {
    virtual bool canFly() const {return true;}
}; 
```

请注意，这`Flyer`仍然很重要，因为`Fly`从`Insect`.

# ruby-on-rails - Rails 3：使用多模型形式将文件上传到公共并在数据库中保存路径

> ID：15969978
> 
> 赞同：0
> 
> 时间：2013-04-12T11:17:38.807
> 
> 标签：ruby-on-rails, file-upload

我坚持上传文件。我正在使用复杂的表格。这是一个模型：

```
class Project < ActiveRecord::Base
  has_one :task
  accepts_nested_attributes_for :task
end

class Task < ActiveRecord::Base
  has_one :project
  accepts_nested_attributes_for :project
end 
```

这是一个视图：

```
<%= form_for(@project) do |f| %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>

  <%= f.fields_for :task_attributes do |a| %>
    <div class="field">
        <%= a.label :name %><br />
        <%= a.text_field :name %>
        <%= form_tag 'project/upload', :multipart => true do %>
            <label for="file">Upload text File</label><%= a.file_field :path %>
        <% end %>
     </div>
  <% end %>

<% end %> 
```

这是一个控制器：

```
class ProjectsController < ApplicationController
  def new
    @project = Project.new
    @project.build_task

    respond_to do |format|
      format.html # new.html.erb
      format.xml  { render :xml => @project }
    end
  end

  def upload
    uploaded_io = params[:upload][:path]
    File.open(Rails.root.join('public', 'uploads', uploaded_io.original_filename), 'w') do |file|
      file.write(uploaded_io.read)
    end
  end

  def create
    @project = Project.new(params[:project])

    respond_to do |format|
      if @project.save
        format.html { redirect_to(@project, :notice => 'Project was successfully created.') }
        format.xml  { render :xml => @project, :status => :created, :location => @project }
      else
        format.html { render :action => "new" }
        format.xml  { render :xml => @project.errors, :status => :unprocessable_entity }
      end
    end
  end
end 
```

移民：

```
class CreateProjects < ActiveRecord::Migration
  def self.up
    create_table :projects do |t|
      t.integer :id
      t.string :name

      t.timestamps
    end
  end

  def self.down
    drop_table :projects
  end
end

class CreateTasks < ActiveRecord::Migration
  def self.up
    create_table :tasks do |t|
      t.string :name
      t.integer :project_id
      t.string :path

      t.timestamps
    end
  end

  def self.down
    drop_table :tasks
  end
end 
```

当我通过表单创建带有任务的新项目时，我在数据库中有两条记录。我在数据库中看到任务文件路径。但是我在我的公共目录中看不到文件。我不知道如何将文件保存到公共目录。

请帮我解决这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:47:08.790

html 中不能有嵌套表单。您有嵌套表单。提交表单时，它将作为一个请求将数据发送到服务器，并且将调用控制器中的一个操作。在您提交表单的情况下，将调用创建操作，而不是调用上传操作。

摆脱内部形式并将多部分添加到外部形式。这对你的情况就足够了。

手动处理文件上传是一种开销。我建议您使用回形针或载波。无论如何，这不是你的问题。

# scala - Scala 是否有“唯一列表”类型？

> ID：15969986
> 
> 赞同：3
> 
> 时间：2013-04-12T11:17:53.187
> 
> 标签：scala, scala-collections, scala-2.10

我正在寻找类似**immutable** `SortedSet`的东西，除了我希望元素按照它们传递给构造函数的顺序进行排序。

```
UniqueList(4,2,3,1,1) // Throws exception
UniqueList(4,2,3,1) // Iterator yields: 4,2,3,1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:23:17.820

尝试`collection.mutable.LinkedHashSet`- 它具有独特的元素，并且按照添加元素的顺序进行遍历。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:15:46.037

有[ListSet](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.ListSet)，尽管它的值与传递给构造函数的顺序相反。

```
scala> import scala.collection.immutable.ListSet
import scala.collection.immutable.ListSet

scala> ListSet(1,2,3,4)
res7: scala.collection.immutable.ListSet[Int] = ListSet(4, 3, 2, 1) 
```

# sql - 更新表增量字段

> ID：15969989
> 
> 赞同：0
> 
> 时间：2013-04-12T11:18:10.950
> 
> 标签：sql, sql-server-2008

使用 SQL Server 2008。

大家好，这里有这个查询：

```
CREATE PROCEDURE [dbo].[GenerateNumbers]
@pg varchar(255)
AS
BEGIN
DECLARE @Counter as int
SET @Counter = 0
UPDATE dbo.paretoMain

SET @counter = NewPareto = @counter +1  
WHERE PG = @pg

END 
```

工作正常，只有我希望它按 1 列的特定顺序执行此操作。基本上按第 1 列排序。

似乎无法弄清楚任何想法如何？

多谢你们！

编辑：

好吧，看来我把人们弄糊涂了，所以就这样吧。

表中的 3 列。1 称为“newpareto” 1 称为“销售” 1 称为“零件”。销售有货币，部分是varchar。纽帕累托是空白的。

我只想为 100 条记录使用 100 个数字（示例），所以当 row1，Newpareto = 1 时。我提供的这个查询就是这样做的。然而。100 条记录未排序。我需要的是以某种方式在其中添加 order by 以按 Sales 列排序，以便最高销售额（例如 100.00 英镑）将在 Newpareto 列中排名第一。有更清楚的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:50:41.127

我相信这可能是你想要做的：

```
update paretoMain
set NewPareto=rn
from (select Sales, row_number() over(order by Sales desc) as rn from paretoMain) as x
where paretoMain.Sales=x.Sales 
```

# android - 维护 Nook 和 Kindle 的单一来源或 apk

> ID：15969992
> 
> 赞同：0
> 
> 时间：2013-04-12T11:18:22.607
> 
> 标签：android, apk, kindle-fire, nook

我必须在 Android Play、Kindle 和 Nook 商店中维护我的应用程序。我在我的应用程序中使用相机选项。由于 Nook 没有摄像头，因此每次发布到市场时，我都必须隐藏摄像头选项。所以我必须使用两个不同的 apk（一个用于 Play 商店、Kindle 和另一个用于 Nook。）。有什么方法可以在所有三个商店中发布单个 apk。这将节省我很多时间。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:36:34.187

最简单的方法是检测设备现在是否有摄像头。

您可以使用[`PackageManager#hasSystemFeature(String)`](http://developer.android.com/reference/android/content/pm/PackageManager.html#hasSystemFeature%28java.lang.String%29)和传递[`PackageManager.FEATURE_CAMERA`](http://developer.android.com/reference/android/content/pm/PackageManager.html#FEATURE_CAMERA)作为参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:09:47.887

最后，我通过使用`Build.MANUFACTURER`. Nook的制造商是“富士康”。

# linux - 使用 Awk 或 Bash 减去两列的值？

> ID：15969997
> 
> 赞同：1
> 
> 时间：2013-04-12T11:18:43.523
> 
> 标签：linux, bash, unix, sed, awk

这是我的文件：

```
$ cat myfile.txt 
48700039|09:39:58|09:40:34
48700040|09:59:12|09:59:42
48700041|10:01:08|10:05:47
48700042|10:50:53|10:51:24 
```

我想从 3 中减去第 2 列，所以我想要的输出是：

```
48700039|09:39:58|09:40:34|00:00:36
48700040|09:59:12|09:59:42|00:00:30
48700041|10:01:08|10:05:47|00:04:39
48700042|10:50:53|10:51:24|00:00:31 
```

我已经尝试了一切......提前谢谢！=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:14:56.133

有时有必要离开美妙的 awk/sed/bash 世界，转而使用一种理解时代的脚本语言。这是这样一个场合。

```
#!/usr/bin/env python

from datetime import datetime

FMT = '%H:%M:%S'

with open("myfile.txt") as fd:
    for line in fd:
        line = line.strip()
        t = line.split('|')
        tdelta = datetime.strptime(t[2], FMT) - \
                datetime.strptime(t[1], FMT)

        print "%s|%s" % (line, tdelta) 
```

输出：

```
48700039|09:39:58|09:40:34|0:00:36
48700040|09:59:12|09:59:42|0:00:30
48700041|10:01:08|10:05:47|0:04:39
48700042|10:50:53|10:51:24|0:00:31 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:19:18.807

基于 GNU awk (gawk) 的解决方案：

```
gawk -F"|" 'BEGIN {DT="2000 01 01 "} { gsub(/:/, " "); t1=mktime(DT $2);
      t2=mktime(DT $3); gsub(/ /, ":"); print $0"|"strftime("%T", t2-t1, "UTC") }' 
```

### 现场演示：http: [//ideone.com/VZ1DPD](http://ideone.com/VZ1DPD)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-23T09:45:29.110

使用 sed 和日期，

```
while read line;do
    #extraction of the columns 2 and 3 && converting them into an array
    d=($(echo $line | sed -e 's/\(.*\)|\(.*\)|\(.*\).*/\2\n\3/')) 
    #substraction of dates
    datediff=$(($(date -d ${d[0]} +%s)-$(date -d ${d[1]} +%s))) 
    #absolute value
    datediff=${datediff/-/}
    #print the line and the 'extra' H:M:S
    printf "%s|%02d:%02d:%02d\n" $line $((datediff/3600)) $((datediff%3600/60)) $((datediff%60))
done < myfile.txt 
```

输出：

```
48700039|09:39:58|09:40:34|00:00:36
48700040|09:59:12|09:59:42|00:00:30
48700041|10:01:08|10:05:47|00:04:39
48700042|10:50:53|10:51:24|00:00:31 
```