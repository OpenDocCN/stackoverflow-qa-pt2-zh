# StackOverflow 问答 14919000-14919999

# c# - 如何将密钥发送到后台进程？

> ID：14919000
> 
> 赞同：0
> 
> 时间：2013-02-17T07:42:48.307
> 
> 标签：c#, sendkeys

使用 C# 我想将 CTRL+C（中断）发送到我从服务（后台进程）运行的某个控制台进程，因为这似乎是终止它的唯一有效方法。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:08:20.137

您可以向控制台应用程序添加一个简单的 WCF 服务，该服务只有一个方法：public void Kill()

在主服务中，您将拥有该服务的客户端，该客户端将在必要时调用“Kill”方法。在该 Kill() 方法的实现中，您可以调用 System.Exit() 或执行后台进程所需的任何其他关闭操作。

# javascript - Tablesorter 工作但不能正确排序

> ID：14919002
> 
> 赞同：1
> 
> 时间：2013-02-17T07:42:54.767
> 
> 标签：javascript, jquery, tablesorter

我从数据库中检索按名称排序的对象列表，并将它们显示在这样的表中

![按名称排序的对象列表](../Images/2fde1d74e47dcea39ad2286ce9453e2e.png)

我有一个 html 链接，可以根据上次修改日期对它们进行排序，它可以工作。这是链接

```
 $('#sort-date-added').click(function () {
        var sorting = [[3, 1]];
        $("#products-table-mine").trigger("sorton", [sorting]);
        return false;
    }); 
```

我有另一个链接可以按名称再次对它们进行排序，但是当我单击该链接时，它会以一种奇怪的方式对它们进行排序，它应该根据正确来自数据库的第一个排列来排序它们，而是向我显示此顺序

![单击按名称排序时，它应该像第一个](../Images/21f327bfb1dc1861c01edc3178613289.png)

这是按名称对它们进行排序的功能

```
 $('#sort-a-z').click(function () {
        var sorting = [[0, 0]];
        $("#products-table-mine").trigger("sorton", [sorting]);
        return false;
    }); 
```

# php - WP Nav 菜单用语言代码修改网址

> ID：14919003
> 
> 赞同：0
> 
> 时间：2013-02-17T07:42:55.503
> 
> 标签：php, wordpress, menu, multilingual

使用`wp_nav_menu()`，我如何修改生成链接的 url 以在每个 URL 的末尾添加语言代码就像我有 url`http://www.example.com/`但我必须在末尾附加语言参数，所以 url 将是`http://www.example.com/?lang=$language`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:48:48.647

`wp_nav_menu`您可以使用`wp_get_nav_menu_items`-filter修改 的行为。这是一个比较完整的例子：

```
class ModifyLinkFilter {
    protected $_prio = 10;
    protected $_args;

    public function __construct($addargs = array(), $prio = 10) {
        $this->_args = $addargs;
        $this->_prio = $prio;

        if(!empty($addargs)) {
            $this->register();
        }
    }

    public function register() {
        add_filter('wp_get_nav_menu_items',
            array($this, 'on_nav_items'), $this->_prio, 3);
    }

    public function unregister() {
        remove_filter('wp_get_nav_menu_items',
            array($this, 'on_nav_items'), $this->_prio, 3);
    }

    public function on_nav_items($items, $menu, $args) {
        foreach($items as $item) {
            if(!empty($item->url)) {
                $item->url = self::modifyUrlSimple($item->url, $this->_args);
            }
        }
        return $items;
    }

    public static function modifyUrlSimple($url, $query) {
        $url .= strchr($url, '?') === false ? '?' : '&';
        $url .= http_build_query($query);
        return $url;
    }
}

// You can use the class like that
$language = "de";
$args = array('lang' => $language, 'foo' => 'bar');
$linkfilter = new ModifyLinkFilter($args); 
wp_nav_menu();
$linkfilter->unregister(); 
```

这会修改导航菜单中的每个项目。因此，如果您有外部链接，它也会被更改。

另外，修改 URL 并不像看起来那么容易。项目的 URL 可以是修改后的`/blabla?myvalue=5#anchor`样子`/blabla?myvalue=5#anchor&lang=de&foo=bar`。

# java - 字符串修剪功能不起作用

> ID：14919019
> 
> 赞同：3
> 
> 时间：2013-02-17T07:45:52.467
> 
> 标签：java, string, trim

我学会了`string.trim()`删除前导和尾随空格。但在我的情况下，它不起作用我正在尝试下面的代码，但输出带有前导和尾随空格。但我的期望是没有前导和尾随空格的文本。这是我的代码。

```
String s = " Hello Rais ";
s += " Welcome to my World ";
s.trim( );
System.out.println(s); 
```

请帮我

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T07:46:29.643

您需要将返回的结果重新分配`trim`给`s`：

```
s = s.trim(); 
```

请记住，***Java 中的字符串是不可变的***，因此**几乎**所有 String 类方法都会创建并返回一个新字符串，而不是就地修改字符串。

* * *

虽然这是题外话，但是（正如我在那里所说`almost`），值得知道的是，这个规则的例外是在创建`substring`相同长度的时候，或者任何时候方法返回具有相同值的字符串，这将被优化和不会创建一个新字符串，而只是简单地 return `this`。

```
String s = "Rohit";
String s2 = s.substring(0, s.length());

System.out.println(s == s2); // will print true 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-17T07:47:45.207

在 Java 中，字符串是`immutable`. 所以`s.trim()`不修改原始字符串而是返回一个新字符串。

```
String trimmed  = s.trim(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-17T07:47:13.063

只需添加`s=s.trim( );`，因为 trim 返回一个**新字符串**。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-17T07:48:36.963

嗯..string 是不可变的对象。因此，每当您执行 trim() 时，它都会创建一个全新的 String 对象，该对象需要引用才能访问它。因此，请按如下方式为这个修剪过的 String 对象分配一个引用。

```
s = s.trim(); 
```

或者

```
trimmedS = s.trim(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-17T07:48:47.443

了解`String`在 Java 中是不可变的。这意味着对`String`类的任何操作都不会更改内部字符串本身，而是返回一个新`String`对象。

所以你真的需要做

`s = s.trim()`

它将引用分配给删除了尾随和前导空格`s`的新对象。`String`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-17T07:49:50.727

`trim`函数通过修剪空格返回原始字符串的副本，因此您需要存储新返回的字符串，例如`s = s.trim()`

来自[String#trim() 的 javadocs](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#trim%28%29)

```
trim

public String trim()
Returns a copy of the string, with leading and trailing whitespace omitted. 
```

# python - 字符串列表到字符串元组列表

> ID：14919029
> 
> 赞同：2
> 
> 时间：2013-02-17T07:47:34.127
> 
> 标签：python, string, list, tuples

我有一个字符串列表

```
['aaa','bbb','ccc'] 
```

我需要将它们转换成这样的元组列表，

```
[('aaa',),('bbb',),('ccc',)] 
```

当我尝试将元组函数应用于列表的每个元素时，它会拆分字符串并返回类似的内容

```
('a','a','a') 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T07:48:43.103

使用[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)，并通过“单项元组创建方法”创建元组，或[在此处](http://bugs.python.org/issue2817)查看有关此的信息。

```
lst = ['aaa','bbb','ccc']
tpl_lst = [(i,) for i in lst] 
```

产量：

```
[('aaa',), ('bbb',), ('ccc',)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T07:48:38.613

不要应用元组函数，因为它将字符串作为序列，并将其字符分开。您可以像这样简单地使用[List Comprehension](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)`tuple`手动构建：

```
>>> l = ['aaa','bbb','ccc']
>>> [(elem,) for elem in l]
[('aaa',), ('bbb',), ('ccc',)] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T07:48:46.450

```
>>> l = ['aaa', 'bbb', 'ccc']
>>> print [(i,) for i in l]
[('aaa',), ('bbb',), ('ccc',)] 
```

您需要做的就是将每个元素放在它自己的一个元组中。

# python - 无法使用 Flask 和 Shapely 在 Heroku 上运行应用程序

> ID：14919032
> 
> 赞同：4
> 
> 时间：2013-02-17T07:47:54.833
> 
> 标签：python, heroku, flask, shapely

我开发了一个需要 Shapely python 库的小应用程序。我通过 .exe 文件将它安装在 Windows 上，因此它会自动将必要的 DLL 文件（geos.dll、geos_c.dll）放在 Python27\Lib\site-packages\shapely\DLLs 中。

当我试图在我的盒子上创建一个 virtualenv 时，我通过 pip 进行了安装，但它没有放置那些 DLL 文件，所以我收到了这个错误：

```
from shapely.geos import lgeos
File "...\lib\site-packages\shapely\geos.py", line 71, in <module>
_lgeos = CDLL("geos.dll")
File "C:\Python27\Lib\ctypes\__init__.py", line 353, in __init__
self._handle = _dlopen(self._name, mode)
WindowsError: [Error 126] The specified module could not be found 
```

所以我手动替换了 virtualenv\Lib\site-packages\shapely\DLLs 文件夹中的这 2 个 DLL 文件，并且它起作用了。

现在我正在尝试在 heroku 上部署应用程序，但由于以下错误再次失败：

```
from shapely.geos import lgeos
_lgeos = load_dll('geos_c', fallbacks=['libgeos_c.so.1', 'libgeos_c.so'])
file "/app/.heroku/python/lib/python2.7/site-packages/shapely/geos.py", line 44, in     load_dll
from shapely.coords import required
file "/app/.heroku/python/lib/python2.7/site-packages/shapely/geos.py", line 47, in <module>
libname, fallbacks or []))
Error: Could not find library geos_c or load any of its variants ['libgeos_c.so.1', 'libgeos_c.so']
Process exited with status 1
State changed from starting to crashed 
```

所以我认为它崩溃是因为那 2 个 DLL 文件不存在。我将这两个文件复制到一个单独的文件夹中并通过 git 推送它们

我在我的应用程序根目录中创建了一个 .profile 文件，以将这两个文件复制到 python 环境

。轮廓

```
#Copy Shapely DLL Files to Site packages
cp -r $HOME/env_files/DLLs $HOME/.heroku/python/lib/python2.7/site-packages/shapely/ 
```

但该应用程序仍然因相同的错误而崩溃。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:34:00.707

Heroku 使用 *nix 系统 - 它适用于 *.so 类型库*而不是**.dll。

所以删除任何 ENV vars 和 dll。

我通过 pip 安装

```
pip install shapely 
```

从[github](https://github.com/sgillies/shapely)安装失败

# ios - 从 MailCore 保存 CTCoreMesssage

> ID：14919045
> 
> 赞同：1
> 
> 时间：2013-02-17T07:49:10.517
> 
> 标签：ios, email, mailcore

我试图想出一种方法来存储来自 MailCore 的 CTCoreMessage 的最新电子邮件的本地副本，以便用户可以在本地离线查看它们。我该怎么做呢？我研究过 NSCoding，但我不想重写大部分 MailCore 来支持它。有哪些替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:41:10.703

我认为这里是您问题的解决方案.. 您看过邮​​件吗，它是一个基于 Mailcore 的开源应用程序，其中本地存储以 SQlite 数据库的形式创建，.edb 文件在您的文档目录中形成。正如我在我的应用程序中所做的那样，在与服务器建立连接后，所有邮件都在本地编写，并且可以在离线模式下工作。你可以从这里得到它..

[http://code.google.com/p/remail-iphone/](http://code.google.com/p/remail-iphone/)

对于与此相关的任何其他帮助，.. 向我询问..

# c++ - Switch Case 语句中的 C++ 循环

> ID：14919047
> 
> 赞同：0
> 
> 时间：2013-02-17T07:49:09.783
> 
> 标签：c++, visual-studio-2010

如何循环这个开关盒？在每个切换案例之后，我需要能够循环回到菜单选择以进行新的选择。帮助？

```
int _tmain(int argc, _TCHAR* argv[]){

    char choice;
    showWelcome();  // Show Welcom Screen
    showMenu();     // Show Menu Screen
    cin >> choice;  // Make Menu Secection
    {
            switch(choice)
            {
            case'1':
                seriesCalc();
                break;

            case'2':
                parallelCalc();
                break;

            case'q':
                system("cls");
                break;

            default:
                break;
                return 0;
            }

    }       

} // end main 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T07:51:55.463

```
while(cin){ 
    cin >> choice;  // Make Menu Secection
    {
            switch(choice)
            {
            case'1':
                seriesCalc();
                break;

            case'2':
                parallelCalc();
                break;

            case'q':
                system("cls");
                break;

            default:
                break;
                return 0;
            }

    }       
} 
```

另外，如果您不介意以下`goto`声明：

```
back: cin >> choice;  // Make Menu Secection
{
switch(choice)
{
case'1':
    seriesCalc();
    break;
case'2':
    parallelCalc();
    break;
case'q':
    system("cls");
    break;
default:
    break;
    return 0;
}
goto back;
} 
```

但是，如果您打算继续`goto`前进：请记住

![在此处输入图像描述](../Images/c2b6357442b57209ddaf81e64a49bad5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T07:57:19.283

使用 while 循环或 do-while 循环。您可能希望在 switch 语句中添加退出的可能性，即`while ( loop ) {`和`case 'q': loop = false`。

这很好，因为它不会在之后自动退出程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T08:03:33.717

```
int _tmain(int argc, _TCHAR* argv[]){

    char choice;boolean again=true;
    showWelcome();  // Show Welcom Screen
    showMenu();   
while(again){  // Show Menu Screen
    cin >> choice;  // Make Menu Secection
    {
            switch(choice)
            {
            case'1':
                seriesCalc();
                break;

            case'2':
                parallelCalc();
                break;

            case'q':
                system("cls");
                break;

            default:
                again=false;
            }

    }  
return 0; 
}    

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T08:25:45.433

int _tmain(int argc, _TCHAR* argv[]){

```
char choice;
showWelcome();  // Show Welcom Screen
showMenu();     // Show Menu Screen
**while**(cin >> choice)  // Make Menu Secection
{
        switch(choice)
        {
        case'1':
            seriesCalc();
            break;

        case'2':
            parallelCalc();
            break;

        case'q':
            system("cls");
            break;

        default:
            break;
            return 0;
        }

} 
```

} // 结束主程序

当输入有效时，std::cin 将返回一个正值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T13:22:13.967

编写一个函数来封装真正的工作并调用它。

```
for(;;) {
    cin >> choice;
    if (!cin || do_user_command(choice) == cmd_exit)
        break;
} 
```

# java - 充气城堡：PEMReader => PEMParser

> ID：14919048
> 
> 赞同：21
> 
> 时间：2013-02-17T07:49:15.380
> 
> 标签：java, bouncycastle

使用 PEM 证书，例如

```
-----BEGIN RSA PRIVATE KEY-----
Proc-Type: 4,ENCRYPTED
DEK-Info: AES-256-CBC,B9846B5D1803E..... 
```

使用 BC 1.46，我使用以下代码提取密钥对：

```
int myFunc(String pemString, char [] password) {

    ByteArrayInputStream tube = new ByteArrayInputStream(pemString.getBytes());

    Reader fRd = new BufferedReader(new InputStreamReader(tube));

    PEMReader pr = new PEMReader(fRd, new Password (password), "BC");

     try {
            Object o = pr.readObject();
            if (o instanceof KeyPair)
    ..... 
```

现在我刚刚安装了 BC 1.48，他们告诉我 PEMReader 已被弃用，必须由 PEMParser 替换。

我的问题是，AFAIK，PEMParser 中没有密码的地方。

有人可以给我一个如何将我的代码迁移到 PEMParser 版本的例子吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-27T23:02:26.220

我只需要解决同样的问题并没有找到答案。所以我花了一些时间研究 BC API 并找到了一个适合我的解决方案。我需要从文件中读取私钥，因此 myFunc 方法中有 privateKeyFileName 参数而不是 pemString 参数。

使用 BC 1.48 和 PEMParser：

```
int myFunc(String privateKeyFileName, char [] password) {
     File privateKeyFile = new File(privateKeyFileName); // private key file in PEM format
     PEMParser pemParser = new PEMParser(new FileReader(privateKeyFile));
     Object object = pemParser.readObject();
     PEMDecryptorProvider decProv = new JcePEMDecryptorProviderBuilder().build(password);
     JcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider("BC");
     KeyPair kp;
     if (object instanceof PEMEncryptedKeyPair) {
        System.out.println("Encrypted key - we will use provided password");
        kp = converter.getKeyPair(((PEMEncryptedKeyPair) object).decryptKeyPair(decProv));
    } else {
        System.out.println("Unencrypted key - no password needed");
        kp = converter.getKeyPair((PEMKeyPair) object);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-17T11:32:36.143

对于 1.55 版`bcpkix-jdk15on`的解密代码更改为：

```
kp = ((PEMEncryptedKeyPair) object).decryptKeyPair(decryptorProvider); 
```

我没有检查这是否是上述答案中的错误，或者只是版本之间的 API 差异。

# asp.net - Web.config 错误与 节点

> ID：14919049
> 
> 赞同：1
> 
> 时间：2013-02-17T07:49:33.717
> 
> 标签：asp.net, .net, css, web-config, authorization

当我添加`<authorization>`它显示页面但没有css。任何人都知道为什么？

这是我的`web.config`

```
<?xml version="1.0"?>
<configuration>
  <connectionStrings>
    <add name="UomDBConnectionString1"
         connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\UomDB.mdf;Integrated Security=True;User Instance=True"
         providerName="System.Data.SqlClient" />
  </connectionStrings>
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
        <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
      </assemblies>
    </compilation>
    <authentication mode="Forms">
      <forms loginUrl="Login.aspx" timeout="2880" />
    </authentication>
    <authorization>
      <deny users="?"/>
    </authorization>
  </system.web>
</configuration> 
```

如果我将其删除，则显示带有 css 的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T07:52:07.397

可能是您的 css 和图像文件夹在受限区域内。

您需要在 web.config 中的此表单身份验证代码中允许访问这些文件。

这就是你的做法：

```
 <location path="default.aspx">
    <system.web>
      <authorization>
        <allow users="?"/>
      </authorization>
    </system.web>
  </location>

  <location path="Home">
    <system.web>
      <authorization>
        <allow users="?"/>
      </authorization>
    </system.web>
  </location>

  <location path="Styles">
    <system.web>
      <authorization>
        <allow users="?"/>
      </authorization>
    </system.web>
  </location>

  <location path="Scripts">
    <system.web>
      <authorization>
        <allow users="?"/>
      </authorization>
    </system.web>
  </location>

  <location path="images">
    <system.web>
      <authorization>
        <allow users="?"/>
      </authorization>
    </system.web>
  </location> 
```

从[这里取](http://forums.asp.net/t/1744811.aspx/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T07:54:33.057

似乎您的 CSS 在授权下受到保护。要允许未经身份验证的用户查看您的 .css 文件（或任何其他文件/目录），您可以将 location 元素添加到指向 .css 文件的 web.config 文件。

```
<configuration>
    <location path="App_Themes/Default/YourFile.css">
        <system.web>
            <authorization>
                <allow users="*"/>
            <authorization>
        <system.web>
    <location>
<configuration> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T07:51:14.173

您需要确保您的 CSS 不在另一个受保护的文件夹中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-15T13:01:49.247

我有这些症状，但出于某种原因，我的问题是设置了一个单一的 mimetype：

```
<system.webServer>
   <staticContent>
      <mimeMap fileExtension=".pdf" mimeType="application/pdf" />
...
</staticContent> 
```

无论我的机器是如何设置的，这似乎阻止了使用任何图像或 css 文件。

我假设有一个默认集，并且通过指定一个 mimetype，您不再隐含地拥有其他类型。放弃那个，为我修好了。

# javascript - Javascript： THIS 关键字的解释

> ID：14919056
> 
> 赞同：0
> 
> 时间：2013-02-17T07:50:35.857
> 
> 标签：javascript

有人可以解释`this`Javascript 中的关键字吗？最好用简单的英语，不要引用在线资源或教科书。我很确定我已经通读了那些。我还没有完全掌握这个概念。

我知道这`this`可能有几种不同的含义，具体取决于它的使用方式和时间。

例如，我读到它在某些情况下可以引用全局对象。`this`你能解释一下含义会改变的不同情况以及它是如何使用的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:14:19.830

更好的方法是“如何在 Javascript 中调用*函数*？”

在内部有一个函数原语，称为`"[[Call]]"`我们有一个接口，[`Function.prototype.call(thisArg, arguments...)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)所以这就是我将在这里使用的。

每次您在 Javascript 中调用函数时，您都在编写将转换为等效语句的语法，并且它会为您`Function.call`传递该语句。`thisArg`它完全取决于您调用函数的方式，而不取决于任何其他面向对象的概念。这是程序员在接触 Javascript 时习惯于其他语言中基于类的对象语义工作方式的主要困惑之一。

对于在全局上下文中调用的函数：

```
function foo(a) { console.log(a); return this; }
foo(5); // equivalent to foo.call(window, 5);
        // outputs 5, returns (Window) 
```

在调用函数的情况下，*就好像*它链接到一个对象（点语法）：

```
var o = { foo: function(a) { console.log(a); return this; } };
o.foo(5); // equivalent to o["foo"].call(o, 5)
          // outputs 5, returns (Object(o)) 
```

这就是它的全部。请注意，我们可以通过不同的方式获得*相同*的功能：

```
var x = o.foo;
x(5); // equivalent to x.call(window, 5);
      // outputs 5, returns (Window) 
```

而且这个完全相同的功能根本不知道与`o`我们创建它的方法有任何关系。

我认为这个主题可以用简单的英语：

*   如果您调用一个函数而不在前面放置一个点，`this`则将是`window`（全局对象）。
*   如果一个点在前面，`this`将是该点前面的对象。

如果您不喜欢它的工作方式，您可以通过多种方式模拟不同的行为（例如[`Function.prototype.bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)或将您自己的方式传递`thisArg`给`call`or `apply`）。

^(小字：在 ECMAScript 严格模式下，在`window`上面的示例中传递了 where ，而是传递`undefined`. 通过“前面的点”，我实际上只是在说 ，`o["foo"](6)`与`o.foo(6)`相同`this`。)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-17T08:04:11.280

要了解`this`，您必须了解面向对象的编程。

在面向对象编程中，大多数方法（函数）属于`objects`. 在 Javascript 中，大多数`objects`是窗口元素；一个按钮，一个列表，一个 div。网页上几乎所有可以用名词来描述的东西都可能是`object`, 在某种程度上；少数不是的东西是`objects`.

因此，在面向对象编程中，您可能会遇到一个问题，即您可能有一个方法，例如`onclick`. 在里面`onclick`你有一些执行的代码；假设您正在将 a 的背景`<div>`从蓝色更改为绿色，然后在单击它时返回。让我们用英语/伪代码构建它。

```
myDiv.onClick {
  if the div that was clicked on has a background of blue then set that div's background to green
  else if the div that was clicked on has a background of green then set it to blue
} 
```

所以，很容易，对吧？如果这不是面向对象的编程，您的函数将接受一个参数，`div_id`. 所以，

```
onClick(div_id theDiv) {
  if theDiv.background=blue then theDiv.background=green
  else if theDiv.background=green then theDiv.backgrond=blue
} 
```

但是，这是面向对象的编程。onClick 是 div 的一种方法，面向对象编程的部分优势在于您不需要传递您所指的 div 之类的参数 - 当然，您所指的 div 是其参数被调用的那个！每个 div 都有自己对 onClick 的引用，可能有自己的副本，具体取决于您编写方法的方式。

不过，这确实留下了一个问题。你怎么说，

```
 if this Div's background is blue then set this div's background to green 
```

? 答案是`this`。 `this`指当前方法所属的对象。所以，当一个 div 被点击时，它的 onClick 方法就会被调用；你有：

```
div.onClick() {
  if this.background=blue then this.background=green
  else if this.background=green then this.background=blue
} 
```

所以你只写了一个 div.onClick 函数，现在每个 div 都可以随意变成蓝色或绿色。

# c++ - Qt 将信号连接到插槽

> ID：14919058
> 
> 赞同：0
> 
> 时间：2013-02-17T07:50:47.760
> 
> 标签：c++

我正在尝试连接信号。但我不断遇到这种情况。我确信我已经链接了包含 QAction *actionCameraSetup 的 *.h 文件。我错过了什么吗？

请帮忙。谢谢。

错误：

> 1>camera.cpp 1>.\camera.cpp(10)：错误 C2065：'actionCamera_Setup'：未声明的标识符

**相机.cpp**

```
#include "camera.h"
#include "camera_setup.h"
#include "ui_camera.h"

Camera::Camera(QWidget *parent, Qt::WFlags flags)
    : QMainWindow(parent, flags)
{
    ui.setupUi(this);

    connect(actionCamera_Setup, SIGNAL(activated()), this, SLOT(openCameraSetup()));
}

Camera::~Camera()
{

}

void Camera::openCameraSetup()
{
    newCameraSetup = new camera_setup();
    newCameraSetup->show();
} 
```

**相机.h**

```
#ifndef CAMERA_H
#define CAMERA_H

#include <QtGui/QMainWindow>
#include "ui_camera.h"
#include "ui_camera_setup.h"

class camera_setup;

class Camera : public QMainWindow
{
    Q_OBJECT

public:
    Camera(QWidget *parent = 0, Qt::WFlags flags = 0);
    ~Camera();

public slots:
    void openCameraSetup();

private:
    Ui::CameraClass ui;
    camera_setup *newCameraSetup;
};

#endif // CAMERA_H 
```

**ui_camera.h**

```
#ifndef UI_CAMERA_H
#define UI_CAMERA_H

#include <QtCore/QVariant>
#include <QtGui/QAction>
#include <QtGui/QApplication>
#include <QtGui/QButtonGroup>
#include <QtGui/QGridLayout>
#include <QtGui/QHeaderView>
#include <QtGui/QLabel>
#include <QtGui/QMainWindow>
#include <QtGui/QMenu>
#include <QtGui/QMenuBar>
#include <QtGui/QWidget>

class QAction;

QT_BEGIN_NAMESPACE

class Ui_CameraClass
{
public:
    QAction *actionExit;
    QAction *actionCamera_Setup;
    QAction *actionFull_Screen;
    QAction *action1_Camera_1;
    QAction *action1_Camera_2;
    QAction *action1_Camera_3;
    QAction *action1_Camera_4;
    QAction *action1_Camera_5;
    QAction *action1_Camera_6;
    QAction *action2_Camera_1;
    QAction *action2_Camera_2;
    QAction *action2_Camera_3;
    QAction *action2_Camera_4;
    QAction *action2_Camera_5;
    QAction *action2_Camera_6;
    QWidget *centralWidget;
    QGridLayout *gridLayout;
    QLabel *label_CCV;
    QMenuBar *menuBar;
    QMenu *menuFile;
    QMenu *menuView;
    QMenu *menuCameras;

    void setupUi(QMainWindow *CameraClass)
    {
        if (CameraClass->objectName().isEmpty())
            CameraClass->setObjectName(QString::fromUtf8("CameraClass"));
        CameraClass->resize(600, 367);
        actionExit = new QAction(CameraClass);
        actionExit->setObjectName(QString::fromUtf8("actionExit"));
        actionCamera_Setup = new QAction(CameraClass);
        actionCamera_Setup->setObjectName(QString::fromUtf8("actionCamera_Setup"));
        actionFull_Screen = new QAction(CameraClass);
        actionFull_Screen->setObjectName(QString::fromUtf8("actionFull_Screen"));
        action1_Camera_1 = new QAction(CameraClass);
        action1_Camera_1->setObjectName(QString::fromUtf8("action1_Camera_1"));
        action1_Camera_2 = new QAction(CameraClass);
        action1_Camera_2->setObjectName(QString::fromUtf8("action1_Camera_2"));
        action1_Camera_3 = new QAction(CameraClass);
        action1_Camera_3->setObjectName(QString::fromUtf8("action1_Camera_3"));
        action1_Camera_4 = new QAction(CameraClass);
        action1_Camera_4->setObjectName(QString::fromUtf8("action1_Camera_4"));
        action1_Camera_5 = new QAction(CameraClass);
        action1_Camera_5->setObjectName(QString::fromUtf8("action1_Camera_5"));
        action1_Camera_6 = new QAction(CameraClass);
        action1_Camera_6->setObjectName(QString::fromUtf8("action1_Camera_6"));
        action2_Camera_1 = new QAction(CameraClass);
        action2_Camera_1->setObjectName(QString::fromUtf8("action2_Camera_1"));
        action2_Camera_2 = new QAction(CameraClass);
        action2_Camera_2->setObjectName(QString::fromUtf8("action2_Camera_2"));
        action2_Camera_3 = new QAction(CameraClass);
        action2_Camera_3->setObjectName(QString::fromUtf8("action2_Camera_3"));
        action2_Camera_4 = new QAction(CameraClass);
        action2_Camera_4->setObjectName(QString::fromUtf8("action2_Camera_4"));
        action2_Camera_5 = new QAction(CameraClass);
        action2_Camera_5->setObjectName(QString::fromUtf8("action2_Camera_5"));
        action2_Camera_6 = new QAction(CameraClass);
        action2_Camera_6->setObjectName(QString::fromUtf8("action2_Camera_6"));
        centralWidget = new QWidget(CameraClass);
        centralWidget->setObjectName(QString::fromUtf8("centralWidget"));
        gridLayout = new QGridLayout(centralWidget);
        gridLayout->setSpacing(0);
        gridLayout->setContentsMargins(0, 0, 0, 0);
        gridLayout->setObjectName(QString::fromUtf8("gridLayout"));
        label_CCV = new QLabel(centralWidget);
        label_CCV->setObjectName(QString::fromUtf8("label_CCV"));

        gridLayout->addWidget(label_CCV, 0, 0, 1, 1);

        CameraClass->setCentralWidget(centralWidget);
        menuBar = new QMenuBar(CameraClass);
        menuBar->setObjectName(QString::fromUtf8("menuBar"));
        menuBar->setGeometry(QRect(0, 0, 600, 21));
        menuFile = new QMenu(menuBar);
        menuFile->setObjectName(QString::fromUtf8("menuFile"));
        menuView = new QMenu(menuBar);
        menuView->setObjectName(QString::fromUtf8("menuView"));
        menuCameras = new QMenu(menuView);
        menuCameras->setObjectName(QString::fromUtf8("menuCameras"));
        CameraClass->setMenuBar(menuBar);

        menuBar->addAction(menuFile->menuAction());
        menuBar->addAction(menuView->menuAction());
        menuFile->addAction(actionExit);
        menuView->addAction(menuCameras->menuAction());
        menuView->addAction(actionCamera_Setup);
        menuView->addSeparator();
        menuView->addAction(actionFull_Screen);
        menuCameras->addAction(action1_Camera_1);
        menuCameras->addAction(action1_Camera_2);
        menuCameras->addAction(action1_Camera_3);
        menuCameras->addAction(action1_Camera_4);
        menuCameras->addAction(action1_Camera_5);
        menuCameras->addAction(action1_Camera_6);
        menuCameras->addSeparator();
        menuCameras->addAction(action2_Camera_1);
        menuCameras->addAction(action2_Camera_2);
        menuCameras->addAction(action2_Camera_3);
        menuCameras->addAction(action2_Camera_4);
        menuCameras->addAction(action2_Camera_5);
        menuCameras->addAction(action2_Camera_6);

        retranslateUi(CameraClass);
        QObject::connect(actionCamera_Setup, SIGNAL(activated()), CameraClass, SLOT(show()));

        QMetaObject::connectSlotsByName(CameraClass);
    } // setupUi

    void retranslateUi(QMainWindow *CameraClass)
    {
        CameraClass->setWindowTitle(QApplication::translate("CameraClass", "Camera", 0, QApplication::UnicodeUTF8));
        actionExit->setText(QApplication::translate("CameraClass", "Exit", 0, QApplication::UnicodeUTF8));
        actionCamera_Setup->setText(QApplication::translate("CameraClass", "Camera Setup", 0, QApplication::UnicodeUTF8));
        actionFull_Screen->setText(QApplication::translate("CameraClass", "Full Screen", 0, QApplication::UnicodeUTF8));
        action1_Camera_1->setText(QApplication::translate("CameraClass", "1 Camera 1", 0, QApplication::UnicodeUTF8));
        action1_Camera_2->setText(QApplication::translate("CameraClass", "1 Camera 2", 0, QApplication::UnicodeUTF8));
        action1_Camera_3->setText(QApplication::translate("CameraClass", "1 Camera 3", 0, QApplication::UnicodeUTF8));
        action1_Camera_4->setText(QApplication::translate("CameraClass", "1 Camera 4", 0, QApplication::UnicodeUTF8));
        action1_Camera_5->setText(QApplication::translate("CameraClass", "1 Camera 5", 0, QApplication::UnicodeUTF8));
        action1_Camera_6->setText(QApplication::translate("CameraClass", "1 Camera 6", 0, QApplication::UnicodeUTF8));
        action2_Camera_1->setText(QApplication::translate("CameraClass", "2 Camera 1", 0, QApplication::UnicodeUTF8));
        action2_Camera_2->setText(QApplication::translate("CameraClass", "2 Camera 2", 0, QApplication::UnicodeUTF8));
        action2_Camera_3->setText(QApplication::translate("CameraClass", "2 Camera 3", 0, QApplication::UnicodeUTF8));
        action2_Camera_4->setText(QApplication::translate("CameraClass", "2 Camera 4", 0, QApplication::UnicodeUTF8));
        action2_Camera_5->setText(QApplication::translate("CameraClass", "2 Camera 5", 0, QApplication::UnicodeUTF8));
        action2_Camera_6->setText(QApplication::translate("CameraClass", "2 Camera 6", 0, QApplication::UnicodeUTF8));
        label_CCV->setText(QApplication::translate("CameraClass", "<html><head/><body><p><img src=\":/Camera/Resources/pictures/Camera View.jpg\"/></p></body></html>", 0, QApplication::UnicodeUTF8));
        menuFile->setTitle(QApplication::translate("CameraClass", "File", 0, QApplication::UnicodeUTF8));
        menuView->setTitle(QApplication::translate("CameraClass", "View", 0, QApplication::UnicodeUTF8));
        menuCameras->setTitle(QApplication::translate("CameraClass", "Cameras...", 0, QApplication::UnicodeUTF8));
    } // retranslateUi

};

namespace Ui {
    class CameraClass: public Ui_CameraClass {};
} // namespace Ui

QT_END_NAMESPACE

#endif // UI_CAMERA_H 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:12:27.153

`actionCamera_Setup`是类的属性`Ui::CameraClass`。在 C++ 中，只有当它们属于同一类代码的属性时，才能通过名称访问属性，否则，您应该通过对象实例或指向对象实例的指针来访问属性

```
instanceOfClassName.propertyName 
```

或者

```
pointerToInstanceOfClassName->propertyName 
```

在您的情况下`instanceOfClassName`，`ui`因为在类中`Ui::CameraClass ui`定义了一个属性。`Camera`

# xslt - 使用 xsl:variable 进行 Xslt 循环

> ID：14919061
> 
> 赞同：4
> 
> 时间：2013-02-17T07:51:13.160
> 
> 标签：xslt

我想使用 xsl:variable 并根据它的计数进行循环，但我不确定它在 Xslt 中是否可行。例如，如果我有一个变量名计数

```
<xsl:variable name="count" as="xs:integer" select="4"/> 
```

我可以使用以下形式的变量吗！！！

```
<xsl:if test="some condition"/>
loop from 0 to $count
...do something here
end loop
</xsl:if> 
```

是否可以？

我的输入 XML：

```
<Root>
<Element>
    <Value>1</Value>
    <Value>2</Value>
</Element>
<Element>
    <Value>1</Value>
    <Value>2</Value>
    <Value>3</Value>
    <Value>4</Value>
</Element>
    <Element>
    <Value>1</Value>
</Element>
</Root> 
```

平面文件中的预期输出是（带换行符）：

```
1,2,,
1,2,3,4
1,,, 
```

任何帮助表示赞赏。谢谢先生。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T09:04:43.313

使用 XSLT 2.0 的解决方案可能是：

```
<xsl:stylesheet version="2.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="text" />
    <xsl:variable name="count" select="4" />

    <xsl:template match="Element">
        <xsl:value-of select="for $i in 1 to $count return concat(Value[$i], '')"
                      separator="," />
        <xsl:text>&#xA;</xsl:text>
    </xsl:template>

    <xsl:template match="text()" />

</xsl:stylesheet> 
```

注意：您也可以使用 if 语句代替 concat 函数。

* * *

为了完整起见，使用 XSLT 1.0 编写的解决方案：

```
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="text" />

    <xsl:variable name="count" select="4" />

    <!-- Ignore all text elements -->    
    <xsl:template match="text()" />

    <xsl:template match="Element">
        <xsl:if test="$count > 0">
            <!-- Output existing values -->
            <xsl:apply-templates select="Value[position() &lt;= $count]" />
            <!-- Output remaining commas -->
            <xsl:call-template name="print-commas">
                <xsl:with-param name="number"
                                select="$count - count(Value)" />
            </xsl:call-template>            
            <!-- Line break -->
            <xsl:text>&#xA;</xsl:text>
        </xsl:if>
    </xsl:template>

    <!-- Print the first value without a comma preprended to the value -->
    <xsl:template match="Value[1]">
        <xsl:value-of select="." />
    </xsl:template>

    <!-- Print the reamaining value with a comma preprended to the value -->
    <xsl:template match="Value">
        <xsl:value-of select="concat(',', .)" />
    </xsl:template>

    <!-- Print the given amount of commas -->
    <xsl:template name="print-commas">
        <!-- Number of commas to be printed -->
        <xsl:param name="number" />

        <xsl:if test="$number > 0">
            <xsl:text>,</xsl:text>
            <!-- Recursive call decrementing the number of commas to
                 be printed -->
            <xsl:call-template name="print-commas">
                <xsl:with-param name="number"
                                select="$number - 1" />
            </xsl:call-template>
        </xsl:if>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T08:13:29.957

是的，这在 XSLT 2.0 中是可能的（从`as="xs:integer"`您的示例中，我假设您正在使用它）。以下转换将从您的示例输入中产生您的预期输出：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:variable name="count" select="4"/>

    <xsl:template match="text()" />

    <xsl:template match="Element">
        <xsl:variable name="curElement" select="."/>
        <xsl:for-each select="1 to $count">
            <xsl:variable name="curVal" select="."/>
            <xsl:value-of select="$curElement/Value[. = $curVal]"/>
            <xsl:if test="$curVal != $count">
                <xsl:text>,</xsl:text>
            </xsl:if>
        </xsl:for-each>
        <xsl:text>&#xA;</xsl:text>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T09:49:32.037

示例“循环”在：

[http://www.w3schools.com/xsl/xsl_for_each.asp](http://www.w3schools.com/xsl/xsl_for_each.asp)

您可以“匹配”到每个“元素”，而不必“每个”

```
<xsl:template match="element" >
  <xsl:if test="not(constant(value, ' '))">
     <xsl:value-of select="concat(value/text(), ',')"/>
  <xsl:if>
</xsl:template> 
```

# java - JRE错误？（使用 kerberos 的 Active Directory 身份验证问题）

> ID：14919063
> 
> 赞同：0
> 
> 时间：2013-02-17T07:51:32.973
> 
> 标签：java, active-directory, kerberos

我们的活动目录控制器和域很少，我们的系统应该能够使用来自其他域的用户查询一个域。由于一个错误，我们没有在 java 1.60_00 中这样做：

[http://btsc.webapps.blackberry.com/btsc/viewdocument.do;jsessionid=F6E8EB086BF9B51A61F4D441EC9DAFBD?noCount=true&externalId=KB33449&sliceId=2&cmd=displayKCPopup&docType=kc&isLoadPublishedVer=&docTypeID=DT_SUPPORTISSUE_1_1&ispopup=true&ViewedDocsListHelper=com.kanisa.apps.common.BaseViewedDocsListHelperImpl](http://btsc.webapps.blackberry.com/btsc/viewdocument.do;jsessionid=F6E8EB086BF9B51A61F4D441EC9DAFBD?noCount=true&externalId=KB33449&sliceId=2&cmd=displayKCPopup&docType=kc&isLoadPublishedVer=&docTypeID=DT_SUPPORTISSUE_1_1&ispopup=true&ViewedDocsListHelper=com.kanisa.apps.common.BaseViewedDocsListHelperImpl)

目前我们的以下设置存在问题：我们正在尝试使用 D200.D1.W2K8.CORP.ME 的管理员用户连接到 QA.DOM，我们收到以下错误：“机制级别：无法创建凭据。（63 ) - 没有服务信用”。我们**可以**连接到 RESOURCE.W2K8.CORP.ME，如果我们使用 D1.W2K8.CORP.ME 的管理员，我们也可以连接到 QA.DOM。在调查了 pcap 捕获后，我认为 java 实现有一个关于传递信任到具有不同后缀的域的错误。

顺便说一句：我们使用 C 编写的基于 SMB 的包尝试了相同的场景，并且它可以工作。是否已知 JRE 错误（我搜索了 java 错误，但一无所获）？是否存在解决方法？

我们的活动目录设置：

```
QA.DOM<----ForestTrust-->D1.W2K8.CORP.ME<-----ForestTrust--->RESOURCE.W2K8.CORP.ME
----------------------------------------------^
-----------------------------------------------|
-----------------------------------------------|
-----------------------------------------------|
-----------------------------------------------^
--------------------------------------------tree(two way trust)
----------------------------------------D200.D1.W2K8.CORP.ME (child of D1.W2K8.CORP.ME). 
```

和 krb 文件：

```
[libdefaults]
default_realm = D200.D1.W2K8.CORP.ME
default_keytab_name = FILE:/usr/local/ctera/portal.keytab
[realms]
D200.D1.W2K8.CORP.ME = {
    kdc = D200.D1.W2K8.CORP.ME
}
D1.W2K8.CORP.ME = {
    kdc = D1.W2K8.CORP.ME
}
RESOURCE.W2K8.CORP.ME = {
    kdc = RESOURCE.W2K8.CORP.ME
}
QA.DOM = {
    kdc = QA.DOM
}
[domain_realm]
.d200.d1.w2k8.corp.me = D200.D1.W2K8.CORP.ME
d200.d1.w2k8.corp.me = D200.D1.W2K8.CORP.ME
.d1.w2k8.corp.me = D1.W2K8.CORP.ME
d1.w2k8.corp.me = D1.W2K8.CORP.ME
.resource.w2k8.corp.me = RESOURCE.W2K8.CORP.ME
resource.w2k8.corp.me = RESOURCE.W2K8.CORP.ME
.qa.dom = QA.DOM
qa.dom = QA.DOM 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:00:02.337

目前还不清楚你在这里问什么。然而，

> 由于一个错误，我们没有在 java 1.60_00 中做到这一点

没有这样的 Java 版本。

如果您询问是否遇到链接到的错误，错误报告指出（假定的）解决方法是恢复到早于 1.6.0_31 的 Java 1.6 版本。因此，如果您的版本已经比这更旧，这证明这不是您的问题。

* * *

至于是否是*一些*JRE错误......

好吧，如果你用谷歌搜索那个错误信息，就会有很多命中。快速阅读其中的一些内容表明，*很多时候*根本问题在于人们配置事物的方式。所以，如果我是你，我会首先追求*那个*理论。

您可以做的另一件事（如果您有 Oracle 服务合同）是打开一张票...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T10:39:53.753

我为 oracle 打开了一个错误，他们修复了它： [https ://bugs.openjdk.java.net/browse/JDK-8012615](https://bugs.openjdk.java.net/browse/JDK-8012615)

# django - 如何让简单的 Hello World Dajaxice 交互工作？

> ID：14919065
> 
> 赞同：0
> 
> 时间：2013-02-17T07:51:49.303
> 
> 标签：django, dajaxice, dajax

我试图让 Django 在我的网页上生成有效的 Ajax 交互。

我在这里遵循了 django-dajaxice 的说明：[http](http://django-dajaxice.readthedocs.org/en/latest/quickstart.html) ://django-dajaxice.readthedocs.org/en/latest/quickstart.html和这里：[http ://django-dajaxice.readthedocs.org/en/latest/installation .html](http://django-dajaxice.readthedocs.org/en/latest/installation.html)

但是，当我尝试在 Chrome 中运行该 Ajax 代码时，我得到的只是弹出一个对话框，其中包含“未定义”一词

顺便说一句，这就是我从 HTML 页面调用 Ajax 的方式：

```
<script type="text/javascript">
    function my_js_callback(data){
        alert(data.message);
    }
</script>

AJAX!!<br/>
<br/>
<input id="myID" type="text" name="myID" maxlength="255" onclick="Dajaxice.example.sayhello(my_js_callback);"/>
<br/> 
```

那么为什么我会得到这个未定义的对话框呢？我打开了 Chrome 的调试器，在这种情况下它没有显示任何错误。

顺便说一句，当上面的安装说明告诉我修改我的 urls.py 时，这是模棱两可的。我有两个 urls.py；一个用于我的站点，一个用于我的应用程序。我把这些陈述放在网站的 url.py 中。但我不确定这是否正确。有人可以确认或否认吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-28T10:14:21.627

在遵循您引用的安装和快速入门参考资料时，我也在努力处理 dajaxice 示例。我的错误类似，但我看到“Dajaxice.example 未定义”。

`myproj`让我们调用ajax.py 文件所在的主 django 项目和已安装的应用程序`myproj/myapp`。似乎让它对我有用的两个部分是：

1.  将 ajax.py 文件包含`def sayhello(request)`在正确的目录中，并为 sayhello 函数使用相应的正确路径。

    *   将其放在 settings.INSTALLED_APPS 中列出的应用程序之一的目录中
    *   如果您安装的应用名称被列为`"myproj",`ajax 文件应该是`myproj/ajax.py`，那么 js 引用应该是： `Dajaxice.myproj.sayhello(my_js_callback)`
    *   如果您安装的应用名称被列为`"myproj.subapp",`ajax文件应该是`myproj/myapp/ajax.py`，js参考应该是：`Dajaxice.myproj.myapp.sayhello(my_js_callback)` [我用这个]
    *   记得把 放在`{% dajaxice_js_import %}`模板`<head>`部分

    注意：在我的示例中，“myapp”可以替换为“example”以匹配 dajaxice 示例代码。

2.  当我通过代码更新时，正确设置 collectstatic 以生成新的 /static/dajaxice/dajaxice.core.js 文件。

    *   我完全按照您引用的 dajaxice readthedocs 安装链接中列出的说明进行操作。
    *   在 settings.py 文件中添加了 STATIC = '/static/
    *   `INSTALLED_APPS`在 settings.py 文件中添加了“django.contrib.staticfiles”
    *   跑到`python manage.py collectstatic`将所有文件拉到 /static/ 目录中。这包括*生成*的文件`/static/dajaxice/dajaxice.core.js`
    *   检查此文件，您应该看到 sayhello 函数的对象层次结构为：`Dajaxice.myproj.sayhello`或`Dajaxice.myproj.myapp.sayhello`.

此外，如果您正在尝试来自[http://www.dajaxproject.com/multiply/](http://www.dajaxproject.com/multiply/)`function calculate()`的乘法示例，请将`ajax.py`文件的位置更改为：

```
<script type="text/javascript" charset="utf-8">
    function calculate(){
        Dajaxice.myproj.myapp.multiply(Dajax.process,{'a':$('#a').val(),'b':$('#b').val()})
    };
</script> 
```

或者

```
<script type="text/javascript" charset="utf-8">
    function calculate(){
  Dajaxice.myproj.multiply(Dajax.process,{'a':$('#a').val(),'b':$('#b').val()})
    };
</script> 
```

并在该部分中包含适当的 dajax js 文件`<head>`：

```
 <script src="/static/dajax/jquery.dajax.core.js"></script> 
```

或者

```
 {% static "/static/dajax/jquery.dajax.core.js" %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T09:31:35.227

你正在发送一个`POST`请求，很可能是[CSRF 中间件](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)阻止了它。`GET`相反，通过修改方法装饰器发送请求：

```
@dajaxice_register(method='GET')
def sayhello(request):
    return simplejson.dumps({'message':'Hello World'}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-14T05:22:32.153

我的错误：我在 chrome(F12) 中使用调试，Dajaxice 可用，但**Dajaxice.example**和**Dajaxice.example.sayHello**未定义。

您应该在 settings.py 中安装您的 APP**示例**

[http://django-dajaxice.readthedocs.org/en/latest/quickstart.html](http://django-dajaxice.readthedocs.org/en/latest/quickstart.html)

```
INSTALLED_APPS = (
        'django.contrib.auth',
        'django.contrib.contenttypes',
        'django.contrib.sessions',
        'django.contrib.sites',
        'dajaxice',
        'example',
        ...
) 
```

注意 example/ **ajax.py**，您不能将代码放入其他文件中。

猫示例/ **ajax.py**

```
#!/usr/bin/env python
#coding:utf-8
from django.utils import simplejson
from dajaxice.decorators import dajaxice_register

@dajaxice_register()
def sayhello(request):
    return simplejson.dumps({'message':'Hello World'}) 
```

# google-apps-script - 如何使用数组值作为变量名？

> ID：14919067
> 
> 赞同：1
> 
> 时间：2013-02-17T07:52:01.997
> 
> 标签：google-apps-script

我在这里有一段脚本，它创建一个对象构造函数，然后`buildList()`从电子表格中获取数据并输出一个包含部门名称的数组。我要做的`buildObjects()`是使用该数组为每个部门创建一个对象，然后用与该部门有关的各种值填充它。显然我的线路有问题`var ADCnames[i] = new ADC(ADCnames[i]);`

```
function ADC(name) {
  this.name = name;
}

function buildObjects () {
  var ADCnames = buildList('ADC', 1);
  var ADCarray = [];
  for (var i in ADCnames) {
    var ADCnames[i] = new ADC(ADCnames[i][0]);
    ADCarray.push(<<the variable I just created>>);
  }
  return ADCarray;
} 
```

我是使用对象的新手，所以我可能缺少一种更简单的方法。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T17:20:48.280

您所要做的就是重命名变量。

尝试

```
function buildObjects () {
  var ADCnames = buildList('ADC', 1);
  var ADCarray = [];
  for (var i in ADCnames) {
    var tempADC = new ADC(ADCnames[i][0]);
    //do whatever else you need to do to this object.
    ADCarray.push(tempADC);
  }
  return ADCarray;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T08:35:42.277

对象属性可以通过点表示法或括号表示法（如数组）分配

所以试试这个：

这个[名称] = 名称；

然后，您将不会获得部门名称的“变量”，但部门数组将是具有部门作为属性的对象。这是您想要的吗，如果部门名称始终是唯一的，您可能不需要 Array for loo。

**更新**

扩展我上面关于不需要额外数组的观点。因为您正在处理（我假设）唯一的部门名称，所以这些可能是关键。

所以：

```
function buildDepartments() {

  var departmentList = SpreadsheetApp.getActiveSpreadsheet().getRange('a1:c2').getValues(), // Assuming a 3 column list with, say: department name, department head, department deputy.
      departments = {},
      d;

  for (d = 0; d < departmentList.length; d += 1) {
    departments[departmentList[d][0]] = {head: departmentList[d][1], deputy: departmentList[d][2]};
  }

  // To recall the department details ... however many there are
  Logger.log(departments['Math'].head); // Logs the head of the Math department
} 
```

但是，不要将自己束缚在可能会随着时间而变化的键上，因为如果部门名称发生变化，那么进行更改会很麻烦。如果您“取消指定”对象，使用 ScriptDB 也会更容易。因此：

```
function buildDepartments() {

  // Assuming a 3 column list with, say: name, head, deputy.
  var departmentList = SpreadsheetApp.getActiveSpreadsheet().getRange('a1:c2').getValues(), 
      departments = [], // Now this an array
      d;

  for (d = 0; d < departmentList.length; d += 1) {
    departments.push({
      title: departmentList[d][0],
      head: departmentList[d][1], 
      deputy: departmentList[d][2]
    });
  }

  // To recall the department details ... however many there are
  // Logs the head of the Math department by filtering the array to a single entry
  Logger.log(departments.filter(function (d) { return d.title = 'Math'; })[0]);
} 
```

在这一点上，为了让事情更直观地回忆一下，部门数组可以再次成为构造函数对象。因此：

```
function DepartmentList () {
  var list = [];
  this.addDepartment = function (dept) {
    list.push({ title: dept[0], head: dept[1], deputy: dept[2] });
    return this; // for chaining reasons, if you like.
  }
  this.getDepartment() = function(dept) {
    var foundDepartment = list.filter(function (d) { return d.title = dept; });
    return foundDepartment[0] || {}; // empty object if no department match
  }
  return list; // bare calls to the object returns the whole list
}

function buildDepartments () {
 var departments = SpreadsheetApp.getActiveSpreadsheet().getRange('a1:c2').getValues(),
     departmentList = new DepartmentList(), // Now this an object again
     d;

  departments.forEach( departmentList.addDepartment(entry) ); // Possible because GAS supports ECMAScript5 

  // To recall the department details ... however many there are
  // Logs the head of the Math department
  Logger.log(departmentList.getDepartment('Math').head);
} 
```

只有当输入数据更广泛或需要对象函数进行任何处理时，后一种方法才会开始有意义。对于我所说的例子来说，这可能是矫枉过正。

# ruby - 如何在 Ruby 中像这样设置哈希实例的值？

> ID：14919071
> 
> 赞同：2
> 
> 时间：2013-02-17T07:52:53.950
> 
> 标签：ruby, metaprogramming

我有两个类 A 和 B，它们都有一些选项，通常我会使用一个 Hash 来存储选项，例如`@options[:name]='xxxx'`；现在我想用元编程重构它，

```
class A
    set_option :name, "james"
    set_option :address, "some street"

    def hello
        puts @options[:name]
        puts @options[:address]
    end
end

class B
    set_option :age, 18

    def greeting
        put @options[:age]
    end
end 
```

在这里，我想使用`set_option`将键值对设置为一个哈希实例`@options`，我该怎么做？

此外，我想将解决方案包装到一个单独的模块中。

更新：

首先谢谢，你所有的答案对我来说都很有价值，让我更清楚，现在我意识到我想要的一些东西不是那么正确，那么如果我提出这样的问题呢？

*   如何使用一种方法`option`来替换`@options`？
*   A 类和 B 类都可以为同一个键设置不同的选项，所以可能有些答案`@@options`不起作用？我希望不同的类可以有不同的哈希实例。

``` 像这样：

```
class A
    set_option :name, "james"
    set_option :provider, 'twitter'

    def hello
        puts option[:name]
    end
end

class B
    set_option :name, "not james"

    def greeting
        put option[:name]
    end
end 
```

经过深思熟虑，我认为我真正想要的是不同类的不同选项哈希实例，而不是类的实例。

这是我想要的，它可以工作。

```
module HasOptions
  def self.included(cls)
    cls.class_eval do
      def self.set_option(key, value)
        options[key] = value
      end

      def self.options
        @options ||= {}
      end

      def options
        self.class.options
      end
    end
  end
end

class Baz
  include HasOptions
  set_option :name, "bad"

  def greeting
        puts options[:name]
  end
end

class Foo
  include HasOptions
  set_option :name, "foo"

  def greeting
        puts options[:name]
  end
end 
```

感谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T08:06:28.623

正如您尝试做的那样，使用实例变量是行不通的。但是，您可以使用这样的方法：

```
module HasOptions
  def self.included(cls)
    cls.class_eval do
      def self.set_option(key, value)
        (@@options ||= {})[key] = value
      end
    end
  end

  def options
    @options ||= @@options.dup
  end
end 
```

此实现允许您设置每个实例的选项，而不会覆盖所有实例的通用选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T10:14:50.420

看起来你有点搞砸了。让我试着列出你想要解决的问题：

*   将选项存储在类变量的实例中`Hash`（我猜对了吗？ - 一个用于所有类实例的哈希）；
*   使用漂亮的符号来设置选项。

上述任何内容实际上都不需要元编程。要满足第一个条件，您只需找到所有类的第一个共同祖先并 [monkey] 用您的`@@options`var 和`set_option`方法修补它。如果你没有决定为你的所有类提供你自己的超类，让我们修补最祖先（例如`Kernel`模块）：

```
module Kernel
  def set_option name, value
    (@@options ||= {})[name.to_sym] = value
  end
end 
```

现在任何类都可以包含`set_option`将选项放入*共享*选项哈希的“指令”（考虑使用实例变量`@options`而不是`@@options`使选项特定于实例，或者使用 Alex D 的解决方案。）

如果您想为选项设置使用花哨的花哨语法（使用默认值、就地检查器、褶边和奢侈品），您将在此处使用[DSL](http://en.wikipedia.org/wiki/Domain-specific_language)。[本文](https://practicingruby.com/articles/shared/iptocucwujtj)中的第一个示例展示了如何`set_option`使用 DSL 实现 pure。进一步的调整仅受您的想象力限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T08:15:04.527

如果您需要初始化实例选项，您应该使用实例方法来执行此操作。

```
module OptionSetter
  def set_option(key, value)
    @options[key] = value
  end
end

class Base
  def initialize(options = {})
    @options = {}
    options.each do |key, value|
      set_option key, value
    end
  end
end

class A < Base
  include OptionSetter

  def hello
    puts @options[:name]
    puts @options[:address]
  end
end

class B < Base
  include OptionSetter

  def greeting
    puts @options[:age]
  end
end

A.new(name: "james", address: "some street").hello
B.new(age: 18).greeting 
```

在 ruby​​ 中更常见的方法是使用`attr_accessor`'s

```
class Base
  attr_accessor :options

  def initialize(options = {})
    @options = options
  end
end

class A < Base
  def hello
    puts @options[:name]
    puts @options[:address]
  end
end

class B < Base
  def greeting
    puts @options[:age]
  end
end

A.new(name: "james", address: "some street").hello
B.new(age: 18).greeting

# another approach
james = A.new
james.options[:name] = "james"
james.options[:address] = "some street"
james.hello 
```

# c# - 使用 LibTiff.Net 重复目录更新现有图像中的标签

> ID：14919072
> 
> 赞同：3
> 
> 时间：2013-02-17T07:53:07.333
> 
> 标签：c#, .net, libtiff, libtiff.net

我正在尝试更改现有 TIFF 图像中一些自定义 ASCII 标记的值，如[http://bitmiracle.com/libtiff/help/add-custom-tiff-tags-to-an-中的示例所示现有的 tiff-image.aspx](http://bitmiracle.com/libtiff/help/add-custom-tiff-tags-to-an-existing-tiff-image.aspx)。

这些更改主要涉及添加到现有标签的字符串，或添加不存在的自定义标签。

但是，在添加新标签时，LibTiff 似乎在图像末尾添加了一个全新的目录，而不是更改现有的目录，该目录保持不变。我已经用 WinHex 验证了这一点，还尝试了几种不同的方法，例如 WriteDirectory、CheckpointDirectory。正在打开文件以进行附加。

重复的目录导致另一个我们无法控制的程序出现问题，该程序必须处理图像。

有没有办法只更新现有目录？或者，如果有必要重写整个文件，我能否得到一些关于如何做到这一点的指示？如果文件被重写，则需要保留其他自定义标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:29:55.637

如果您将新标签添加到现有目录或更改某些现有标签，那么您最好用新目录替换现有目录。否则，您的标签可能会覆盖栅格数据（因为更新后的目录比旧目录需要更多空间）。

因此，如果程序无法正确处理具有更新目录链的文件，那么您假设您需要重写整个文件是正确的。

您可能想查看库附带的 TiffCP 实用程序的源代码。源代码应该为您提供足够的开始线索。该实用程序会重新压缩文件中的数据，但您可能不需要这样做。您可以使用`ReadRawStrip`和`WriteRawStrip`方法复制压缩数据。该实用程序还复制所有标签。这是您绝对需要在代码中执行的操作（同时更改/添加标签）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-20T01:31:27.030

According to libbit.net documentation: [Tiff.Open Method](http://bitmiracle.github.io/libtiff.net/html/915344e3-3d06-7d40-fac7-26cad5880e74.htm)

only "r" "w" "a" mode is supported, plus some minor mode, there's no "r+" as in fopen to support both read and write to tiff.

The native libtiff library has a utility which can be used to change specified tiff tag:

tiffset -s XResolution 400 test.tif

tiffinfo test.tif can be used to verify the result.

# algorithm - 高级（口语/人工）语言翻译项目？

> ID：14919073
> 
> 赞同：0
> 
> 时间：2013-02-17T07:53:09.100
> 
> 标签：algorithm, language-translation

有没有不简单逐字翻译的语言翻译项目？具有先进算法/设计的人？

当前主流和流行的翻译软件，例如谷歌翻译，似乎查找一个单词或一组连续的单词，并将其直接翻译成某种确定为最佳匹配的内容。但是因为它不知道上下文，它可能会抓住错误的词。此外，它根本不懂语言，它只是试图解码单词，而不是解码含义。许多语言根本不相似，没有对应的常用词和/或它们的用法根本不一样。

或者，我认为更好的方法是可以从短语中提取含义或信息。它实际上会解码含义，然后将该含义编码为计算机可读的中间语言，从而能够将其完全解码为一种新语言。

有没有这样的项目，无论是开源的还是封闭的，在语言翻译的新算法方面取得了进展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T08:01:14.303

[Apertium](http://www.apertium.org/)项目似乎很活跃（几个月前的最新版本）。支持多种语言。在其他翻译的背景下也有关于它的[文章。](http://linuxgazette.net/152/oregan.html)

# php - 更短的写法 if(x==1 || x==5 || x==7 || x==22)

> ID：14919074
> 
> 赞同：0
> 
> 时间：2013-02-17T07:53:16.053
> 
> 标签：php, javascript

用 JavaScript 和 PHP 编程，是否有更短的方法在 if() 条件中包含多个选项？

我想知道是否有一种写法，例如，一种写法

```
if( myvar==1 || myvar==5 || myvar==7 || myvar==22 ) 
```

就像是

```
if( myvar==(1||5||7||22) ) 
```

有人知道这样做的方法吗？也许正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T07:56:48.350

使用数组保留所有值

```
$os = array(1, 3, 5, 22);
if (in_array(x, $os))  
{  
   ///...  
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T07:56:56.533

正如维努所说。

```
<?php

    $array = array(1, 5, 7, 22);
    if (in_array($myvar, $array))
    {
        // my var is either 1, 5, 7 or 22
    }

?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T07:57:39.260

对于 javascript，您可以将所有内容添加到数组中，并且可以通过 .indexOf 检查 myvar 是否存在于数组中

```
if([1,5,7,22].indexOf(myvar)!=-1){
//do something
} 
```

# android - 用于聊天的 Quickblox 头像

> ID：14919078
> 
> 赞同：1
> 
> 时间：2013-02-17T07:53:46.123
> 
> 标签：android, quickblox

我有兴趣为聊天用户提供头像。我查看了 API（聊天、用户、内容）并找不到解决方案。用户对象没有“头像”字段 - 所以这里没有运气。内容对象（上传和浏览照片）允许用户仅搜索他上传的内容（据我所知），但该对象中有一个“公共”字段，因此必须有某种方法来获取例如内容为 ID 为“xxxx”的用户命名为“头像”，对吗？

相同的问题可能适用于其他用户详细信息（地址、年龄等）

谁能提供有关如何实现这一目标的任何提示？Android 示例（甚至 REST）将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T10:05:46.003

每个用户都有字段**blob_id** [http://quickblox.com/developers/Users#Response_3](http://quickblox.com/developers/Users#Response_3)

这是 Content 模块中文件的链接，因此您可以将图像上传到 Content 模块并通过**blob_id**字段将其连接到 User

# iphone - 使用 objc_setAssociatedObject 为 UITableViewCell 传递 UIButton @selector 参数

> ID：14919082
> 
> 赞同：1
> 
> 时间：2013-02-17T07:54:07.587
> 
> 标签：iphone, objective-c, uitableview, uibutton

我正在尝试在这篇文章中实现一个建议：[将参数传递给选择器](https://stackoverflow.com/questions/12297511/pass-an-argument-to-selector/12297575#12297575)以将`@selector`参数传递给 a `UIButton`in a `UITableViewCell`using `objc_setAssociatedObject`and `objc_getAssociatedObject`。我对其进行编码的方式，它总是最终通过它创建/加载的最后一个单元格的行。这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    UILabel *mainLabel;
    soundButton=[UIButton buttonWithType:UIButtonTypeCustom];

    if (cell == nil){

        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    soundButton.tag = 33;
        [soundButton addTarget:self action:@selector(soundButtonAction) forControlEvents:UIControlEventTouchUpInside];
        [soundButton setFrame:CGRectMake(210,3,68, 37)];

         [soundButton setBackgroundImage:[UIImage imageNamed:@"musicNote"] forState:UIControlStateNormal];

         [cell.contentView addSubview:soundButton];
    } else {

        soundButton = (UIButton *)[cell.contentView viewWithTag:33];
    }
    objc_setAssociatedObject(soundButton, "IndexPath", indexPath, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
    return cell;
}

-(void)soundButtonAction
{
    NSIndexPath *ip = objc_getAssociatedObject(soundButton, "IndexPath"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:09:56.573

看起来像`soundButton`你班上的伊瓦尔？每次请求一个单元格时都会被覆盖，因此您只能获得最后一个单元格。

`"IndexPath"`我也认为用作密钥不是一个好主意。

```
static char indexPathKey; // use address of indexPathKey as key

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    UILabel *mainLabel;
    soundButton=[UIButton buttonWithType:UIButtonTypeCustom];

    if (cell == nil){

        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    soundButton.tag = 33;
        [soundButton addTarget:self action:@selector(soundButtonAction:) /*extra :*/ forControlEvents:UIControlEventTouchUpInside];
        [soundButton setFrame:CGRectMake(210,3,68, 37)];

         [soundButton setBackgroundImage:[UIImage imageNamed:@"musicNote"] forState:UIControlStateNormal];

         [cell.contentView addSubview:soundButton];
    } else {

        soundButton = (UIButton *)[cell.contentView viewWithTag:33];
    }
    objc_setAssociatedObject(soundButton, &indexPathKey, indexPath, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
    return cell;
}

-(void)soundButtonAction:(UIButton *)sender
{
    NSIndexPath *ip = objc_getAssociatedObject(sender, &indexPathKey); 
```

# javascript - 将图像从 web api 导入到 javascript

> ID：14919084
> 
> 赞同：0
> 
> 时间：2013-02-17T07:54:19.257
> 
> 标签：javascript, html, asp.net-web-api

我是网络开发世界的新手。我正在尝试将 Web api 中的位图值返回到要在 HTML 页面上显示的 javascript，但由于某种原因它没有这样做，这是我的代码：

在 webAPI 中：

```
 public Bitmap  gettestBitmap()
    {
        Bitmap theBM = new Bitmap(Properties.Resources._2_15_2013_5_08_48_PM);

        return theBM;
    } 
```

在 javascript 中，这是我的代码

```
var callstring = "api/Generator/gettestBitmap";
alert(callstring);
$.getJSON(callstring,
function (data) {
    alert(data);                                 
    anImage.dataSrc = data;
})
.fail(
function (jqXHR, textStatus, err)
{
    alert("All checks are correct, image was not      
           generated.\n jqXHR = " + jqXHR.responseText + "\n  
           textStatus=" + textStatus + " \n Error=" + err);}); 
```

webAPI 函数被成功调用，返回的数据是`System.Drawing.Bitmap`而不是实际图像

任何线索如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:22:31.260

找到了解决方案！！！！

只需执行以下操作：

```
var callstring = "api/Generator/gettestBitmap";
 $("#anImage").attr("src", callstring); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T08:01:40.230

您可能希望返回一个字节数组，而不是现在将在发送到客户端之前进行 base64 编码。

```
 public byte[] gettestBitmap()
    {
        var imageBytes = File.ReadAllBytes(Properties.Resources._2_15_2013_5_08_48_PM);

    return imageBytes;
    } 
```

您可能还想更改图像线。

```
anImage.attr("src", "data:image/png;base64," + data); // if format is jpeg change image/png to image/jpeg 
```

# vba - 如何使用此流程图创建宏？

> ID：14919090
> 
> 赞同：0
> 
> 时间：2013-02-17T07:55:28.763
> 
> 标签：vba

您能帮我获取 vba 代码以突出显示该列的最小值和最大值吗？

前任：

```
   上校 | B栏
   --------+---------
   商店 1 | 500
   商店 2 | 400
   店铺 3 | 300
   ========+==========
   总计 | 1200

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:05:58.403

我完全同意@Peter L 的评论，即使用 MIN 和 MAX 的条件格式可以顺利完成这项工作，但如果你真的想要 VBA 代码，这种方法可以完成这项工作

```
Sub HighlightMinMax()
 Const column As Integer = 2
 Dim row As Integer, minRow As Integer, maxRow As Integer
 Dim minValue, maxValue
 ' initialize variables
 row = 1
 minRow = 1
 maxRow = 1
 minValue = Cells(row, column)
 maxValue = Cells(row, column)
 ' loop until found "Total" in the first column
 While Cells(row, 1) <> "Total"
    Debug.Print Cells(row, 1) ' inspect the label
    If (Cells(row, column) < minValue) Then
        minRow = row
        minValue = Cells(row, column)
    End If
    If (Cells(row, column) > maxValue) Then
        maxRow = row
        maxValue = Cells(row, column)
    End If
    row = row + 1
 Wend
 ' select the cell with the min value and highlight it ...changing the background color to green
 Cells(minRow, column).Select
 With Selection.Interior
        .Pattern = xlSolid
        .PatternColorIndex = xlAutomatic
        .Color = 5296274
        .TintAndShade = 0
        .PatternTintAndShade = 0
 End With
 ' select the cell with the max value and highlight it ...changing the background color to red
 Cells(minRow, column).Select
 With Selection.Interior
        .Pattern = xlSolid
        .PatternColorIndex = xlAutomatic
        .Color = 5296274
        .TintAndShade = 0
        .PatternTintAndShade = 0
 End With
 Cells(maxRow, column).Select
 With Selection.Interior
    .Pattern = xlSolid
    .PatternColorIndex = xlAutomatic
    .Color = 255
    .TintAndShade = 0
    .PatternTintAndShade = 0
 End With
End Sub 
```

# c++ - c++编译时异构数组，python风格

> ID：14919110
> 
> 赞同：1
> 
> 时间：2013-02-17T07:59:05.577
> 
> 标签：c++

我有一个 C++ 问题的解决方案，但我发现自己在写这个：

```
dosomething(1,"value1");
dosomething(2,"somethingelse");
dosomething(3,"notthesame");
dosomething(7,"wahetevr");
dosomething(5,"yeah"); 
```

它工作正常，但它相当长......而且越来越长。但是这两组值只是编译时间。

在 python 中，我会在列表中创建两个值的元组，然后对它们进行遍历。有没有办法创建两个值的轻量级异构数组？我试图避免创建一个类型并将它们投入其中，并试图避免使用库，因为到目前为止我已经将我使用过的库保持为零。

我宁愿不创建两个值集的两个数组，让它们不同步太容易了。

感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T08:05:23.067

这取决于你的编译器。如果你有一个现代编译器，你可以使用 C++ 11[`tuple`](http://en.cppreference.com/w/cpp/utility/tuple)类型。例如：

```
std::vector<std::tuple<int, std::string>> tuples = 
    { 
        std::make_tuple(1, "value1"), 
        std::make_tuple(2, "somethingelse"), 
        ... 
    };

for(auto item : tuples)
    dosomething(get<0>(item), get<1>(item)); 
```

如果您的编译器不支持元组或基于范围的 for，您可以使用 boost 元组和 BOOST_FOREACH。他们有一个类似的界面，只是谷歌它:)

亚历克斯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T08:07:04.427

这就是[std::map](http://www.cplusplus.com/reference/map/map/)的用途。它本质上是一个关联数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T08:26:47.897

**核心 C++ 语言中没有异构或关联数组文字，如`dict`Python 中的 s**。

存储和检索键值对是C++ 中*映射的一项工作。*[**`std::map`**](http://en.cppreference.com/w/cpp/container/map)是标准库的一部分，包含在每个符合标准的编译器中，不容忽视！

```
#include <iostream>
#include <map>
#include <string>

int main()
{   
    // Typedefs make code more readable:
    typedef std::map<int, std::string> lookup_t;

    // Create map:
    lookup_t lookup;

    // Insert information:
    lookup[1] = "value1";
    lookup[2] = "somethingelse";
    lookup[3] = "notthesame";
    lookup[7] = "wahetevr";
    lookup[5] = "yeah";

    // Random access:
    std::cout << "3 -> " << lookup[3] << std::endl;

    // Sequential access:
    for (lookup_t::iterator i = lookup.begin(), end = lookup.end(); i != end; ++i)
    {   
        std::cout << i->first // key
            << " -> "
            << i->second // value
            << std::endl;
    }
} 
```

类似的结构存在于其他第三方库中，例如[Qt和`QMap`](http://doc.qt.digia.com/4.7-snapshot/qmap.html)[Boost.Container](http://www.boost.org/doc/libs/release/doc/html/container/history_and_reasons.html)中的各种映射，以及诸如 Microsoft 的移植性较差的库中[`CMap`](http://msdn.microsoft.com/en-us/library/s897094z%28v=vs.71%29.aspx)。

出于效率和可移植性的考虑，我会选择标准地图，除非有令人信服的理由采取替代方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T08:01:28.717

只使用`boost`元组库

这是文档： http: [//www.boost.org/doc/libs/1_37_0/libs/tuple/doc/tuple_users_guide.html](http://www.boost.org/doc/libs/1_37_0/libs/tuple/doc/tuple_users_guide.html)

编辑：

你也有[http://www.cplusplus.com/reference/tuple/tuple/](http://www.cplusplus.com/reference/tuple/tuple/)

# javascript - 如何激活动态 或视频标签？

> ID：14919112
> 
> 赞同：0
> 
> 时间：2013-02-17T07:59:16.677
> 
> 标签：javascript, jquery, youtube, youtube-api

我正在从 YouTube 播放列表中检索视频，并将其加载到 carousal 中。

现在，我要Active动态<li>。当我单击任何一个 <li> 或视频（在 <li> 内部。它应该是活动的。

```
var playListURL = 'http://gdata.youtube.com/feeds/api/playlists/'+nPlaylistID+'?v=2&alt=json&callback=?';
var videoURL= 'http://www.youtube.com/watch?v=';
$.getJSON(playListURL, function(data) {
    var list_data="";
    $.each(data.feed.entry, function(i, item) {
        var feedTitle = item.title.$t;
        var feedURL = item.link[1].href;
        var fragments = feedURL.split("/");
        var videoID = fragments[fragments.length - 2];
        var url = videoURL + videoID;
        var thumb = "http://img.youtube.com/vi/"+ videoID +"/default.jpg";
        list_data += '<li><a href= "#" title="'+ feedTitle +'" onClick=show_yt_vid("'+videoID+'");><img src="'+ thumb +'" /></a></li>';
    }); 
```

> 演示链接：- [http://jsfiddle.net/4hHaG/](http://jsfiddle.net/4hHaG/)
> 
> 屏幕截图（我想要的）：- [https://docs.google.com/file/d/0B1EUrqDt0LieWUEydnVIUTh6NWM/edit?usp=sharing](https://docs.google.com/file/d/0B1EUrqDt0LieWUEydnVIUTh6NWM/edit?usp=sharing)

提前谢谢！！！！！！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:59:48.540

我的建议是：在循环中的 a 标签中添加一个类

```
 list_data += '<li><a class="vids" href= "#" title="'+ feedTitle +'" onClick=show_yt_vid("'+videoID+'");><img src="'+ thumb +'" /></a></li>'; 
```

然后使用jquery为点击的元素添加一个类

```
 $(document).on('click', '.vids', function() {
            $('.vids').removeClass('active');
            $(this).addClass('active');
        }); 
```

这是演示： http: [//jsfiddle.net/4hHaG/1/](http://jsfiddle.net/4hHaG/1/) 只需使用您想要的图像在css中的“活动”类中添加背景

# php - PHP 和 mysqli：使用表单将 blob 上传到数据库

> ID：14919128
> 
> 赞同：0
> 
> 时间：2013-02-17T08:01:42.637
> 
> 标签：php, html, mysqli, blob

我正在尝试使用 PHP 和 mysqli 将图像作为 blob 上传到数据库中。如果我只是尝试使用查询插入图像名称，它就可以正常工作并创建一个具有该名称的新行（blob 为空）。一旦我开始尝试使用查询和 jquery 函数通过表单将 blob 上传到数据库中，就会创建一个新行，但 blob 显示 0 B。代码的第一位是 html 表单。第二个是提交表单后调用的 php 文件。任何建议，将不胜感激。提前致谢。

**澄清：**我知道将图像上传到目录是一种更有效的存储方式。为了了解如何使用其他选项，我试图弄清楚使用 blob 是如何工作的。

**编辑**

为了澄清起见，我还尝试了以下代码片段。

```
if ($filetype == "image/jpeg" && $filesize > 0 && $filesize < 1048576) {
        echo "Import of photo success";

        $aimage = file_get_contents($tmpfile);

        if (!($stmt=$mysqli->prepare("INSERT INTO actor_info (aname, aimage) VALUE (?,?)"))) {
            echo "Prepare failed: (" . $mysqli->errno . ")" . $mysqli->error;
        }

        if (!$stmt->bind_param("sb", $_POST['aname'], $aimage)) {
            echo "Binding parameters failed: (" . $stmt->errno .") " . $stmt->error;
        }

        if (!$stmt->execute()) {
            echo "Execute failed: (" . $stmt->errno . ") " . $stmt->error;
        }

        else {
            printf("%d row inserted.<br/>", $stmt->affected_rows);
        }
    } 
```

**结束编辑**

**错误信息**

导入照片成功通知：未定义索引：aimage in /nfs/stak/students/m/martalic/public_html/CS494/Test/addActorInfo.php on line 43

警告：file_get_contents() [function.file-get-contents]：文件名在 /nfs/stak/students/m/martalic/public_html/CS494/Test/addActorInfo.php 中的第 43 行不能为空插入 1 行

**HTML 表格**

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
<form id="form" method="post" action=addActorInfo.php enctype="multipart/form-data">
    Actor Name: <input id="aname" type="text" name="aname" class="required" maxlength="64"><br><br>
    Attach Photo: <input id="aimage" type="file" name="aimage" class="required"><br><br>
    <input type="submit" name="ADD" value="ADD"/>
</form>

</body>
</html> 
```

**PHP**

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
Actor Information
<?php
ini_set('display_errors', 'On');
ini_set('display_startup_errors', 'On');
error_reporting(E_ALL);

$mysqli = new mysqli($dbhost, $dbuser, $dbpass, $dbname);
if ($mysqli->connect_errno) {
    echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
}

if(isset( $_POST["ADD"]) ) {
    $aname = $_POST['aname'];
    $errorinfo = $_FILES["aimage"]["error"];
    $filename = $_FILES["aimage"]["name"];
    $tmpfile = $_FILES["aimage"]["tmp_name"];
    $filesize = $_FILES["aimage"]["size"];
    $filetype = $_FILES["aimage"]["type"];

    if (!($filetype == "image/jpeg" && $filesize > 0)) {
        echo "Import of photo failed";
    }

    if ($filetype == "image/jpeg" && $filesize > 0 && $filesize < 1048576) {
        echo "Import of photo success";

        if (!($stmt=$mysqli->prepare("INSERT INTO actor_info (aname, aimage) VALUE (?,?)"))) {
            echo "Prepare failed: (" . $mysqli->errno . ")" . $mysqli->error;
        }
        $null = NULL;
        if (!$stmt->bind_param("sb", $_POST['aname'], $null)) {
            echo "Binding parameters failed: (" . $stmt->errno .") " . $stmt->error;
        }

        if (!$stmt->send_long_data(0, file_get_contents($_POST['aimage']))) {
            echo "Did not get contents";
        }

        if (!$stmt->execute()) {
            echo "Execute failed: (" . $stmt->errno . ") " . $stmt->error;
        }

        else {
            printf("%d row inserted.<br/>", $stmt->affected_rows);
        }
    }
    else {
        echo "Image must be under 1 MB";
    }
    $stmt->close();
}
$mysqli->close();
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:05:50.557

您是否没有考虑像您一样上传图像，然后将其放在文件夹 /uploadedimg/ 中，然后引用文件名（随机生成）并将其插入数据库？BLOB 效率不高。

所以上传。名称文件。保存存档。db 中的参考文件为 imgName = myfile123.png ，然后在需要时使用它

```
$myvar = $SQLQuery;

<img src="/uploadedimg/". $myvar ." " alt="my image" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T01:22:35.367

在我的绑定参数中发现了问题。通过从“b”切换到“s”，我能够将图像作为 blob 存储在我的数据库中。

# git - 删除旧的 git 标签

> ID：14919130
> 
> 赞同：2
> 
> 时间：2013-02-17T08:02:03.303
> 
> 标签：git, tags, naming

当我需要创建新标签时，我执行以下步骤：

*   运行命令`git tag -l | sort -V`
*   浏览列表试图找到最新的标签

该列表如下所示：

```
aftercare-1.1.0
...
rc-1.1.0
...
rc-1.2.0
...
rc-1.3.0
...
rc-1.11.0
...
release-1.1.0
...
release-1.11.1 
```

有时（取决于项目）我们有很多标签，我可能会错过查看列表并创建名称错误的标签。我有几次这样的错误。

当我使用 command`git describe`时，它会给我最后一个标签名称，但有时我需要从另一个序列创建一个标签。

您是否删除了无意义的标签（例如非常旧的 rc 标签）？也许您有其他命名约定并且没有这样的问题？你怎么知道下一个标签应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T08:21:38.277

> 您是否删除了无意义的标签（例如非常旧的 rc 标签）？

不，你为什么要这样做？标签几乎不占用空间（它们只是一个指向提交的小指针，有自己的名字）。与您不删除旧提交的方式相同，旧标签是项目历史的一部分，应该保留在您的存储库中。

> 也许您有其他命名约定并且没有这样的问题？你怎么知道下一个标签应该是什么？

使用一个分支模型，可以很容易地看到你的下一个标签应该从哪里推断出来。例如，有一个长期运行的分支，其中只有稳定版本，并有另一个分支（长期运行的或每次新创建的），您的 RC 版本在其上集成。

您可以阅读[Vincent Driessen 的工作流文章](http://nvie.com/posts/a-successful-git-branching-model/)，了解分支模型和工作流的一个很好的示例。这样，您应该能够得出一些适用于您的项目和团队的指导方针。

# javascript - 从 asp.net 向 javascript 传递值

> ID：14919131
> 
> 赞同：1
> 
> 时间：2013-02-17T08:02:08.787
> 
> 标签：javascript, asp.net

```
<script type="text/javascript">

function abc()
{
    var id = document.getElementById('123');
    var caption= <%=MyProperty %>;
}
</script> 
```

后面的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    Page.RegisterStartupScript(Guid.NewGuid().ToString(),"<script language = 'javascript'>abc();</script>");
}

protected int MyProperty
{
    get
    {
        return 123;
    }
} 
```

我需要将字符串值传递给 javascript，使用 int 这个代码可以正常工作。

```
protected string MyProperty
{
    get
    {
        return "123";
    }
} 
```

当我尝试传递字符串时，此代码不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T08:05:29.107

如果需要传递字符串，则必须指定分隔符 " 或 '

```
var caption= "<%=MyProperty %>"; 
```

或者

```
var caption= '<%=MyProperty %>'; 
```

没有它们，javascript 会将 MyProperty 的字符串值解释为 Javascript 变量的名称。

# android - Cordova (Android) 中的白名单

> ID：14919133
> 
> 赞同：1
> 
> 时间：2013-02-17T08:02:20.540
> 
> 标签：android, dns, cordova, whitelist

我在真正应该是微不足道的任务上遇到了一些真正的麻烦。我正在 Cordova Android 应用程序中执行 FileTransfer.download，但在我的日志中看到以下错误：源 URL 不在白名单中。我做了功课，发现了 res/xml/config.xml 文件中的白名单（我使用的是 Cordova 2.4.0），并尝试了所有我能想到的组合。

我试过 <access origin="文件的确切 url" /> 我试过 <access origin=" *" /> 我试过 <access origin=".* " />

和其他一百件事

我什至尝试过 FileTransfer.download google.com，但我遇到了同样的白名单错误。我什至从配置文件中删除了所有访问标签，除了上面提到的那些，但仍然没有运气。如果有人有任何建议，将不胜感激。我已经把我的头撞在这个上面三个小时了，哈哈。

哦，如果重要的话，我正在使用适用于 Android 2.2+ 的 Cordova 2.4.0 构建。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:06:33.207

如果您不使用 DroidGap，则需要：

配置.init（这个）；

在您的活动的 onCreate 中。否则，所有白名单都会失败。经过两个小时的痛苦挖掘源代码后才发现这一点。

# python - Python正则表达式，如何将有效字符添加到否定子节

> ID：14919137
> 
> 赞同：1
> 
> 时间：2013-02-17T08:03:15.613
> 
> 标签：python, regex

在以下 Python 正则表达式中：

```
pattern = re.compile(r"""
^                     # Match start of line.
([^\W\d]+)            # One or more word characters (including ê, etc.; but excluding 0-9) 
                      # as a returned group. Not \W and not \d.
$                     # Match end of line.
""", re.VERBOSE + re.UNICODE) 
```

如何在 [] 中添加 - 字符（破折号）作为有效字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T08:04:05.067

您可以使用`pipe`合并两个正则表达式：

```
((?:[^\W\d]|-)+) 
```

# neural-network - Matlab - 如何保存matlab神经网络的视图配置

> ID：14919140
> 
> 赞同：3
> 
> 时间：2013-02-17T08:03:39.233
> 
> 标签：neural-network, matlab, matlab-figure

我正在尝试使用 matlab 和`newff`命令配置神经网络。

之后，我尝试使用`view`命令可视化我创建的配置。

```
x = view(net); 
```

如何将显示的窗口保存到`.png`文件中？我试过了，`saveas(x, 'figure.png', 'png')`但它不起作用？你知道我怎么能从代码中做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T08:54:35.447

创建的窗口是一个纯 Java 图形（不是 MATLAB Handle Graphics）。试试这个来捕捉它：

```
%# neural net, and view it
net = feedforwardnet(5);
jframe = view(net);

%# create it in a MATLAB figure
hFig = figure('Menubar','none', 'Position',[100 100 565 166]);
jpanel = get(jframe,'ContentPane');
[~,h] = javacomponent(jpanel);
set(h, 'units','normalized', 'position',[0 0 1 1])

%# close java window
jframe.setVisible(false);
jframe.dispose();

%# print to file
set(hFig, 'PaperPositionMode', 'auto')
saveas(hFig, 'out.png')

%# close figure
close(hFig) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:55:27.027

我也有同样的问题，特别是当我尝试保存神经网络工具箱（nntraintool）生成的图时。我使用截图工具来捕捉这些情节。但是，请尝试使用以下一种：

确定您需要快照的 gfx 对象（它的句柄）。它将来自可识别的属性。然后您可以使用打印选项将其保存到文件中；你需要写文件名，类型；转到此链接了解更多信息（[http://www.mathworks.com/help/matlab/ref/print.html](http://www.mathworks.com/help/matlab/ref/print.html)）。

例如，如果您想使用标签“performance.fig”保存图形，您可以尝试：

```
h = findobj('Type', 'figure', 'tag', 'performance.fig');

    for k = 1:numel(h)

    print(h(k), sprintf('Pic%d.ps',k));

    end; 
```

让我知道这是否有帮助，您必须根据需要修改代码。在这个 stackoverflow 论坛中，我也从另一个人那里得到了帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-02T16:19:26.470

我试图获得 nntraintool 框的结果并创建网络配置图、生成的训练快照以及性能、训练状态和回归图。

看到建议后，7。我设计了下面的代码来解决这些问题。我会为我的程序风格道歉，并希望为这些问题的解决做出贡献。

```
%***************************************************************************
% TrainingToolDisplays
%***************************************************************************

function [] = TrainingToolDisplays(net,P,T) 

%***************************************************************************
% After configuring the net, do a silent net training
%***************************************************************************

net.trainParam.showWindow = 0;
net = train(net,P,T);

%***************************************************************************
% Create a figure for the net configuration
%***************************************************************************

jConfig = view(net);
hConfig = figure('Name','Neural Network Configuration', ...
                 'NumberTitle','off', ...  
                 'Menubar','none', ...
                 'Position',[100 100 600 200], ...
                 'PaperPositionMode', 'auto', ...
                 'Visible','on');

jPanel = get(jConfig,'ContentPane');
[~,h] = javacomponent(jPanel);
set(h, 'units','normalized', 'position',[0 0 1 1])
jConfig.setVisible(false)
jConfig.dispose

%***************************************************************************
% Create a figure for the nntraintool training snap shot
%***************************************************************************

jTrainTool = nntraintool('handle');
hTrainTool = figure('Name','Neural Network Training', ...    
                    'NumberTitle','off', ...  
                    'Menubar','none', ...
                    'Position',[100 100 600 600], ...
                    'PaperPositionMode', 'auto', ...
                    'Visible','on');

jPanel = get(jTrainTool,'ContentPane');
[~,h] = javacomponent(jPanel);
set(h, 'units','normalized', 'position',[0 0 1 1])
jTrainTool.setVisible(false)
jTrainTool.dispose

%***************************************************************************
% Plot the plots you want and get the handles 
%***************************************************************************

nntraintool('plot', 'plotperform');    hPerform = gcf;
nntraintool('plot', 'plottrainstate'); hTrainState = gcf;
nntraintool('plot', 'plotregression'); hRegression = gcf;

%***************************************************************************
% Now you may do whatever you may want with those matlab handles
% hConfig, hTrainTool, hPerform, hTrainState and bRegression
%***************************************************************************

return
%******************************************************************************* 
```

# jquery - Codeigniter 和样板集成 - jQuery 未定义问题

> ID：14919144
> 
> 赞同：1
> 
> 时间：2013-02-17T08:04:40.340
> 
> 标签：jquery, codeigniter, html5boilerplate

我已经将样板与 Codeigniter 集成在一起。我正在使用 codeigniter 模板。当我在页面中调用任何 jQuery 内联函数时，它会在控制台中显示“$ 未定义”。所以我复制了 jquery 代码并将其放入 main.js 文件中，它就可以工作了。但是，当我在此页面中包含依赖于 jquery 插件的任何脚本文件时，它会向我显示相同的 jquery 未定义错误。请帮我！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T23:35:57.980

[@WillemLabu](https://stackoverflow.com/users/579996/willemlabu)是正确的，在定义之前不能使用 jQuery。您必须在页面中包含 jQuery 之后放置使用 jQuery 的脚本。

Boilerplate 将脚本放在页脚中，因为典型的应用程序会从页脚中的外部脚本运行它们的 javascript。

解决方案是

1.  把jQuery放在头上；或者
2.  将 jQuery 放在脚下，并将内联脚本附加到在 jQuery 包含之后运行的对象。

你可以这样做：

**头文件**

```
<html>
<head>
 ...
<!-- define a global object to attach your scripts to -->
<script type="text/javascript">APP_READY = { callbacks: []};</script>
</head> 
```

**你的视图.php**

```
<!-- add your inline scripts inside the APP_READY namespace -->
<script type="text/javascript">
// MODULE
APP_READY.callbacks.push(function() {

  alert('simple example of APP_READY Callback');

});
</script> 
```

**另一个视图.php**

```
<script type="text/javascript">
// MODULE
APP_READY.callbacks.push(function() {

  var exampleModule = [];

  exampleModule.init = function() {
    alert('modular example of APP_READY Callback');
  };

  exampleModule.init();

});
</script> 
```

**脚.php**

```
<!-- include jQuery -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<!-- execute your Object -->
<script type="text/javascript">
(function($) {
  'use strict';

  // Initialise the callbacks
  //
  for (var i =0; i<APP_READY.callbacks.length; i++ ) {
    var callback = APP_READY.callbacks[i];

    if(callback && typeof callback == 'function') {
        callback();
    }
  }

})(jQuery);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T08:27:40.020

JavaScript 是按顺序运行的，这意味着您需要在尝试使用 jQuery 之前将其包含在内。

确保在任何其他尝试使用`$()`或`jQuery()`.

# c# - 在join中如何隔离select语句

> ID：14919151
> 
> 赞同：0
> 
> 时间：2013-02-17T08:05:36.743
> 
> 标签：c#, linq, linq-to-entities, linq-expressions

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T08:25:27.983

You can't do that, because your expression needs three arguments, but from query you always receive single argument (which is sequence type). Also your query needs *select* statement after last *join* to eliminate error you see now. So, technically you can create type, which holds all three objects:

```
public class Foo
{
    public CmnCompany Company { get; set; }
    public CmnCompanyReference CompanyReference { get; set; }
    public CmnPartnerDetail PartnerDetail { get; set; }
} 
```

And select that object from query (don't worry, query is not executed yet):

```
var query = 
   from p in this.Context.CmnCompanies
   where organogramType != "" && 
         !p.OrganogramType.Contains(organogramType) && 
         p.OrganogramType != null
   join r in this.Context.CmnCompanyCategories 
         on p.CompanyCategoryID equals r.CompanyCategoryID
   join s in this.Context.CmnCompanyReferences on p.RefID equals s.RefID
   join t in this.Context.CmnPartnerDetails on p.PartnerID equals t.PartnerID)
   select new Foo { 
       Company = p, 
       CompanyReference = s, 
       PartnerDetails = t 
   }; 
```

Then modify your expression (if property name matches original property name, you can skip property name specifying):

```
public Expression<Func<Foo, dynamic>> SelectSearchColumns = (f) => new    
{
    f.Company.CompanyID,
    f.Company.CompanyName,
    f.PartnerDetail.PartnerName,
    f.Company.OrganogramType,
    f.Company.ParentID,
    f.Company.InceptionDate,
    f.CompanyReference.RefName,
}; 
```

And do projection (query executed only when converted to list):

```
return query.Select(SelectSearchColumns).ToList(); 
```

If you will run SQL Profiler, you will see, that only columns selected in your expression are returned from database.

# django - 从 Django 中手动呈现的表单中获取合理的数据

> ID：14919152
> 
> 赞同：1
> 
> 时间：2013-02-17T08:05:39.330
> 
> 标签：django, django-forms, django-views

我有以下在 Django 模板中手动呈现的表单。“手动渲染”是指代码中没有对应的 Form 或 ModelForm 对象（不使用 Form 对象的原因/细节有点复杂，可以安全地排除在这个问题之外）。我现在有一个心理障碍，我似乎无法弄清楚如何在 Django 视图中以可用的形式获取这些数据。具体来说，当表单发布时，我如何获得相应的`attendance_value`和`attendance_remarks`每个？`workers_pks`

```
<form>
<table>
    <thead>
        <tr>
            <th>Sl</th>
            <th>Worker</th>
            <th>Worker's Gender</th>
            <th>Work</th>
            <th>Unit cost of work</th>
            <th>Job</th>
            <th>Attendance</th> {# 1 or less if unit is day, 8 or less if unit is hours #}
            <th>Remarks</th> {# if any #}
        </tr>
    </thead>
    <tbody>
    {% for result in results %}
        <tr>
            <th>{{ forloop.counter }}</th>
            <td>{{ result.worker.name }} <input type="hidden" name="workers_pks" value="{{ result.worker.pk }}" id="id_workers_pks_{{ forloop.counter }}"></td>
            <td>{{ result.worker.get_gender_display }}</td>
            <td>{{ result.work.name }}</td>
            <td>{{ result.work.unit_cost }} per {{ result.work.work_unit }}</td>
            <td>{{ result.job_handover.job.name }}</td>
            <td>
                <input type='text' name='attendance_value' id='id_attendance_value_{{ forloop.counter }}' />
            </td>
            <td>
                <input type='text' name='attendance_remarks' id='id_attendance_remarks_{{ forloop.counter }}' />
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>
</form> 
```

只是为了澄清，我知道我可以通过做类似的事情来获得价值

`workers = request.POST.getlist('workers_pks')`

`attendance_values = request.POST.getlist('attendance_values')`

`attendance_remarks = request.POST.getlist('attendance_remarks')`

我主要关心的是如何获得正确的`attendance_value`和`attendance_remarks`每个对应的`workers_pks`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T08:11:52.957

使用请求对象的 POST 属性 -

```
def your_view(request):
    #...
    if attendence_value in request.POST:
        at_value = request.POST['attendence_value'] 
```

但是，我看到您有很多具有相同名称属性的输入（并且浏览器将使用输入名称作为键来构造发布数据）。你需要改变它。我的回忆是，当 django 这样做时（使用表单集），它会为每个名称添加一个前缀，以便它可以识别输入所属的对象。我看到你已经在 ids 上做了这个。

更新

`worker.pk`添加到您的`name`属性中怎么样-

```
<input type='text' name='attendance_value{{ result.worker.pk }}'> 
```

然后在您的视图中构建相应的字符串 -

```
for worker in workers: 
    val_str = "attendance_value" + str(worker.pk)
    rmk_str = "attendance_remarks" + str(worker.pk)
    if val_str in request.POST:
        worker.attendance_value = request.POST['val_str']
    if mrk_str in request.POST:
        worker.attendance_remarks = request.POST['rmk_str'] 
```

您可能想要使用不同的循环（可能是通过输入循环）。但你明白了。

# javascript - 通过类名获取 Elemt

> ID：14919158
> 
> 赞同：2
> 
> 时间：2013-02-17T08:06:14.343
> 
> 标签：javascript, html, css

我想改变边框底部的颜色`.arrow_box:after`

## JavaScript

```
document.getElementsByClassName("arrow_box:after")[0].style.borderBottomColor="blue"; 
```

但它不起作用！

[这是小提琴](http://jsfiddle.net/u2jCE/)上的相同示例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T08:11:10.227

您不能`:after`直接通过 JS 更改伪元素的样式（也可以选择它们）。原因是它们不是 DOM 树的一部分。

您可以做的最好的事情是为元素分配另一个类，如下所示：

```
document.getElementsByClassName("arrow_box")[0].className = "arrow_box blue-border";

.arrow_box.blue-border:after {
    border-bottom-color: blue;
} 
```

# nginx - APC 清除率和碎片

> ID：14919160
> 
> 赞同：1
> 
> 时间：2013-02-17T08:06:38.750
> 
> 标签：nginx, apc, varnish, php

我有一个在 Nginx、PHP-FPM、Varnish 和 APC 设置上运行的 Magento。

APC 的碎片和清除率都很高。

碎片化在 2 小时内增加 >50% 并慢慢达到 100%。

更令人不安的是，Munin 表明净化率几乎始终保持在 100%。

我尝试将 shm 大小增加到 1G（APC 通常使用大约 200M，总 RAM 为 6G），但没有任何帮助，还尝试调整 ttl:s 没有任何运气。

清漆中有什么东西会导致 APC 不断清洗吗？

这是我的 APC.ini

```
extension = apc.so
apc.enabled=1
apc.shm_segments=1
apc.shm_size=1024M
apc.num_files_hint=10000
apc.user_entries_hint=10000
apc.max_file_size=5M
apc.stat=0
apc.enable_cli = 1
apc.optimization=0
apc.cache_by_default=1
apc.slam_defense=0
apc.include_once_override=0
apc.ttl=3600
apc.user_ttl=7200
apc.gc_ttl = 600 
```

apc.php：

```
**File Cache Information**
Cached Files    1053 ( 58.1 MBytes)
Hits    40172
Misses  1038
Request Rate (hits, misses) 102.26 cache requests/second
Hit Rate    99.68 cache requests/second
Miss Rate   2.58 cache requests/second
Insert Rate 10.41 cache requests/second
Cache full count    0

**User Cache Information**
Cached Variables    74 ( 1.2 MBytes)
Hits    374
Misses  5907
Request Rate (hits, misses) 15.59 cache requests/second
Hit Rate    0.93 cache requests/second
Miss Rate   14.66 cache requests/second
Insert Rate 0.18 cache requests/second
Cache full count    0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T17:11:01.237

我发现有效保持 APC 正常的一个技巧是设置`gc_ttl`为 600，就像您一样，但保持`ttl`为 0。这效率较低，理论上可能会在非常繁忙的站点上导致踩踏，但它可以阻止碎片的积累。您还需要通过确保没有在缓存中放置太多东西（即为其分配足够的内存）来降低清除率。

这听起来可能违反直觉，但是当我今天在服务器上切换到这种方法时，发生了以下情况：

![缓存命中率](../Images/e90c08fa7bec7de2f20f26a4b2403aea.png) ![碎片化](../Images/357285b5e157105ade387604c67e6932.png) ![吹扫率](../Images/b2fb938cd62fa3a0bb80308b13a040d5.png)

[这个 munin 插件](http://code.google.com/p/munin-php-apc/)非常适合监控 APC 随时间的变化，比试图破译 apc 状态页面要好得多。

# java - 以编程方式清除 Java\CPU 缓存

> ID：14919164
> 
> 赞同：1
> 
> 时间：2013-02-17T08:07:10.343
> 
> 标签：java, caching, testing, junit, jvm

我正在尝试测试一些队列插入和对象时间戳的删除。经过几次测试运行后，我在相同代码上的结果显着提高了 80 倍。这显然是 JVM 或 hardware\cpu 缓存的缓存结果，但我希望每次运行都能获得新的结果。

有没有办法从 Java 代码中以编程方式清除这两个缓存？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T08:09:28.227

这可能是由于[JIT](http://en.wikipedia.org/wiki/Just-in-time_compilation)的作用。JIT 会在运行一定次数后将您的字节码编译为机器码，以提高效率。

`-XX:CompileThreshold`您可以通过设置选项（默认值为 10,000）或[将您的类完全排除在优化之外](https://stackoverflow.com/questions/4004340/disable-java-jit-for-a-specific-method-class)来更改方法优化之前的调用次数。

但是我不确定你为什么要禁用编译器并强制你的程序运行得更慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-13T07:21:21.283

如果你想设计一个微基准，我建议使用 JMH。

它是“最”的微基准测试框架，它将负责 JIT 预热、死代码消除等。它还对包括 Linux Perf 在内的各种分析器提供开箱即用的支持。

[https://www.baeldung.com/java-microbenchmark-harness](https://www.baeldung.com/java-microbenchmark-harness)

[https://github.com/openjdk/jmh](https://github.com/openjdk/jmh)

# php - 如何将 mysql 函数转换为现代 PDO

> ID：14919165
> 
> 赞同：-2
> 
> 时间：2013-02-17T08:07:24.473
> 
> 标签：php, mysql, pdo

我有一个登录系统，我一直在使用 mysql 函数，如 real_escape_strings 等。但现在我正试图将其转换为 PDO，因为它比 mysql 函数更现代。问题是现在它不适用于 PDO。下面是我的代码，请告诉我我做错了什么。

```
<?php
try {
$con = new PDO('mysql:host=localhost;dbname=tish_database;charset=utf8','root','');

} catch(PDOException $e){
echo 'Connection failed'.$e->getMessage();
}

?>
<?php 
$is_ajax = $_POST['is_ajax'];
    if(isset($is_ajax) && $is_ajax)

    {
$username =(isset($_POST['username']))? trim($_POST['username']): '';
$Password=(isset($_POST['Password']))? $_POST['Password'] : '';
$redirect=(isset($_REQUEST['redirect']))? $_REQUEST['redirect'] :
'view.php';
$query ='SELECT username FROM tish_user WHERE '.
'username="'.($username,$con).'" AND ' .
   'Password = md5("'.($Password,$con).'")';
  $result = $con->prepare($query); 
   $result->execute();
        if(count($result)>0)
        {
        $_SESSION['username']=$username;
$_SESSION['logged'] = 1;
            echo "success"; 
        }
        else {
//set these explicitly just to make sure 

}
    }

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T08:24:19.660

删除所有无用代码后

```
<?php
$con = new PDO('mysql:host=localhost;dbname=tish_database;charset=utf8','root','');

if(!empty($_POST['is_ajax']))
{
    $sql = 'SELECT id FROM tish_user WHERE username=? AND Password = md5(?)';
    $stm = $con->prepare($sql); 
    $stm->execute(array($_POST['username'],$_POST['Password']));
    if($row = $stm->fetch())
    {
        $_SESSION['id'] = $row['id'];
    }
}
?> 
```

你也需要检查字母大小写。大写的“密码”看起来很可疑。最好选择一个标准（全小写）并在任何地方遵循它

这是我对[准备好的语句如何防止 SQL 注入攻击的回答？](https://stackoverflow.com/a/8265319/285587)解释它是如何工作的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T08:21:19.967

```
$query ='SELECT username FROM tish_user WHERE username=? AND Password = md5(?) )';
$result = $con->prepare($query); 
$result->execute(array($username, $password)); 
```

这将自动为您转义字符串。

# php - 使用 PHP 和 REGEX 查找文字字符串

> ID：14919167
> 
> 赞同：0
> 
> 时间：2013-02-17T08:07:30.000
> 
> 标签：php, regex

这是我第一次将 REGEX 与 preg_match 一起使用，无论如何我对 REGEX 一点经验都没有。`def`所以我试图在输入中找到可能后跟字符串的字符串（不区分大小写） 。我正在使用的正则表达式是：`(?-i)def?\.`

我收到以下错误：`Warning: preg_match(): Unknown modifier 'd' in /var/www/process.php on line 11`

输入时：`asdsa saj dasjdkj def ddas`

以及任何其他输入的相同错误。

那么我在这里搞砸了什么？有一些简单的解决方法吗？

抱歉，如果这看起来很傻，但我是 PHP 领域的小鸡。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T08:15:07.537

您必须为您的正则表达式使用[分隔符](http://www.php.net/manual/en/regexp.reference.delimiters.php)。这是正则表达式中的第一个字符，并且必须是非字母数字（非空白、非反斜杠）字符。因此，正则表达式解析器`(`在您的示例中将其作为定界字符（括号样式），并认为 d 是右括号之后的修饰符，因为它不存在，所以它无法识别。

更好的正则表达式是：

```
/def/i 
```

这将匹配字符串中的“def”。你想和这个`(?-i)`部分匹配什么？必须`def`跟一个`.`? 是`f`可选的吗？这就是您当前使用示例正则表达式告诉正则表达式引擎的内容。

编辑：在开头匹配“Was”或“Will”，后跟一个空格：

```
/^(Was|Will) /i 
```

# java - 用于基于 REST/SOAP 的服务中的域模型更改的 OSGi

> ID：14919169
> 
> 赞同：1
> 
> 时间：2013-02-17T08:07:41.603
> 
> 标签：java, architecture, domain-driven-design, osgi

假设有一个电子商务系统由相互连接的细粒度 RESTfull API 组成，以编排和组成业务逻辑。（类似于 Amazon 中的 SOA 架构，OrderAPI，InventoryAPI，MerchantAPI，ItemAPI ......等）有必要更改域模型对象为了随着时间的推移实施新功能/增强功能。

为了保持高可用性，是否可以在服务运行时利用 OSGi 更新对域模型的修改。（没有任何市中心的服务）？

如果使用缓存技术（如 Oracle Coherence）来存储这些域对象，如何处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:53:36.943

我建议您查看 Blueprint OSGi 规范，该规范旨在使您可以轻松地使用 OSGi 的功能来实现您似乎需要的动态服务。

不要看 IBM 指南（如果你用谷歌搜索它，它会先出现），先查看这个指南，它真的很容易理解：

[http://www.javabeat.net/2011/11/blueprint-and-service-dynamism-in-osgi/](http://www.javabeat.net/2011/11/blueprint-and-service-dynamism-in-osgi/)

使用 Blueprint，您可以拥有与 Spring 上下文非常相似的上下文。当您启动一个包时，蓝图扩展器会自动创建您的包的上下文。

任何 OSGi 包都可以发布一个服务（通常只是一个 POJO）。这是与其他捆绑软件共享功能的标准方式。只需确保在一个或多个通用 API 包中声明您要共享的功能，以便以后可以随时动态更改 API 的实际实现而无需停机。

声明导出服务的简单蓝图上下文可能如下所示：

```
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0">
  <!-- Exported service declaration -->
  <service interface="com.package.api.SomeServicePojo" ref="beanId" />

  <bean id="beanId" class="com.package.impl.ServicePojoImpl" />
  <!-- ... lots of beans here -->
</blueprint> 
```

另一个包可能会像这样导入该服务：

```
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0">
  <!-- Import service declaration -->
  <reference interface="com.package.api.SomeServicePojo" id="service" />

  <bean id="otherBean" class="com.package.client.ServiceUser">
    <property name="service" ref="service" >
  </bean>
  <!-- ... lots of beans here -->
</blueprint> 
```

如您所见，服务被注入到 ServiceUser 中。请注意，实际注入的实例是代理！通过在运行的 OSGi 环境中安装/启动新的蓝图包，可以随时交换服务的实际实现！

尽管我们将导出/导入的东西称为“服务”，但请注意它们实际上可以是任何东西！！！一个字符串，例如！因此，您也许可以以这种方式动态更改域模型的实现，例如使用导出的工厂。

但是，更改 API**定义**包需要您重新启动 OSGi 环境……如果您仔细地将 API 设计为灵活，您仍然可以通过简单地交换 API**实现**包来修改它的某些方面，不是 API 本身，因此不需要重新启动。

这也是处理缓存问题的唯一方法...如果您将缓存与您希望交换的缓存放在不同的捆绑包中，那么事情应该可以正常工作...如果您不卸载缓存，状态不会丢失- 持有捆绑包......但显然，如果您的缓存包含与您新安装的 API 实现不兼容的对象，那么世界上没有任何技术能够神奇地为您处理差异......您可以自己做，也许吧，但在我看来，这会带来巨大的复杂性而没有什么好处……只需对缓存进行编程，以便在您进行修改时清除，如果使用旧的缓存对象，这可能会破坏！

# python - 如何从python中另一个字符串的列表中找到第一次出现的字符串

> ID：14919171
> 
> 赞同：1
> 
> 时间：2013-02-17T08:08:08.043
> 
> 标签：python, string

我有一个字符串列表（大约 100 个），我想找到其中一个字符串在另一个字符串中的第一次出现以及它出现的索引。

我保留索引，然后使用该索引中的另一个单词列表再次搜索，然后返回第一个列表，直到它到达字符串的末尾。

我当前的代码（搜索第一次出现）如下所示：

```
 def findFirstOccurence(wordList, bigString, startIndex):
            substrIndex = sys.maxint
            for word in wordList:
                tempIndex = bigString.find(word, startIndex)
                if tempIndex < substrIndex and tempIndex != -1:
                    substrIndex = tempIndex
            return substrIndex 
```

这段代码可以完成这项工作，但需要很多时间（我对相同的单词列表运行了几次，但使用了 100 个大字符串（每个大约 10K-20K 单词）。

我确信有更好的方法（以及更 Pythonic 的方法）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:41:55.117

这似乎工作得很好，并告诉你它找到了什么词（尽管可以省略）：

```
words = 'a big red dog car woman mountain are the ditch'.split()
sentence = 'her smooth lips reminded me of the front of a big red car lying in the ditch'

from sys import maxint
def find(word, sentence):
    try:
        return sentence.index(word), word
    except ValueError:
        return maxint, None
print min(find(word, sentence) for word in words) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T08:24:39.590

具有列表理解的单行将是

```
return min([index for index in [bigString.find(word, startIndex) for word in wordList] if index != -1]) 
```

但我会争辩说，如果你把它分成两行它更具可读性

```
indexes = [bigString.find(word, startIndex) for word in wordList]
return min([index for index in indexes if index != -1]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T10:42:20.777

```
import re

def findFirstOccurence(wordList, bigString, startIndex=0):
    return re.search('|'.join(wordList), bigString[startIndex:]).start()

wordList = ['hello', 'world']
bigString = '1 2 3 world'

print findFirstOccurence(wordList, bigString) 
```

# php - PHP：如何排序和过滤一个“数组”，即一个对象，实现 ArrayAccess？

> ID：14919172
> 
> 赞同：4
> 
> 时间：2013-02-17T08:08:12.477
> 
> 标签：php, arrays, spl, arrayaccess, countable

我有一个对象，它是对象的集合，表现得像一个数组。它是一个数据库结果对象。类似于以下内容：

```
$users = User::get();
foreach ($users as $user)
    echo $user->name . "\n"; 
```

`$users`变量是实现[`ArrayAccess`](http://php.net/ArrayAccess)和[`Countable`](http://php.net/Countable)接口的对象。

我想对这个“数组”进行排序和过滤，但我不能在上面使用数组函数：

```
$users = User::get();
$users = array_filter($users, function($user) {return $user->source == "Twitter";});
=> Warning: array_filter() expects parameter 1 to be array, object given 
```

如何对此类对象进行排序和过滤*？*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T09:29:44.713

你不能。接口的目的`ArrayAccess`不仅仅是为数组创建一个 OOP 包装器（尽管它经常被这样使用），而且还允许对从一开始甚至可能不知道所有元素的集合进行类似数组的访问。`offsetGet()`想象一个 Web 服务客户端，它在和中调用远程过程`offsetSet()`。您可以访问任意元素，但不能访问整个集合 - 这不是`ArrayAccess`界面的一部分。

如果对象也实现`Traversable`（通过[`Iterator`](http://php.net/iterator)或[`IteratorAggregate`](http://php.net/iteratoraggregate)），则至少可以从它构造一个数组（[`iterator_to_array`](http://php.net/iterator-to-array)完成这项工作）。但是您仍然必须像这样转换它，本机数组函数**只**接受数组。

如果您的对象在内部将数据存储为数组，那么最有效的解决方案当然是实现一个`toArray()`返回该数组的方法（并且可能`toArray()`对包含的对象进行递归调用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-03T17:50:50.223

您可以使用[`ArrayObject`](http://php.net/manual/en/class.arrayobject.php)而不是`ArrayAccess`，它具有多种本机排序功能：

*   [`ArrayObject::asort`](http://php.net/manual/en/arrayobject.asort.php)
*   [`ArrayObject::ksort`](http://php.net/manual/en/arrayobject.ksort.php)
*   [`ArrayObject::natcasesort`](http://php.net/manual/en/arrayobject.natcasesort.php)
*   [`ArrayObject::natsort`](http://php.net/manual/en/arrayobject.natsort.php)
*   [`ArrayObject::uasort`](http://php.net/manual/en/arrayobject.uasort.php)
*   [`ArrayObject::uksort`](http://php.net/manual/en/arrayobject.uksort.php)

# ios - 可以在 Ubuntu 环境下用 Rhodes 平台开发 iOS 应用吗？

> ID：14919175
> 
> 赞同：1
> 
> 时间：2013-02-17T08:08:54.990
> 
> 标签：ios, ubuntu, ios-simulator, rhodes

我需要为 iOS 平台开发一个应用程序。我没有 Mac，想为此使用 Ubuntu 操作系统。我可以在 Ubuntu 上为此目的设置开发环境吗？如果是，那么我是否也有模拟器在 Ubuntu 中测试 iOS 应用程序？

我知道我可以使用 Ubuntu 操作系统在 Rhodes 上创建基于 Android 的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:19:00.657

根据官方[常见问题解答](https://developer.apple.com/support/ios/ios-dev-center.html)，您不能。

> **使用 iOS SDK 和 Xcode 进行开发有什么要求？** 要使用 iOS SDK 和 Xcode 进行开发，您必须拥有运行 Mac OS X Snow Leopard 或更高版本的基于 Intel 的 Mac，并且您必须注册为 Apple Developer。

另请查看[Rhodes 应用程序构建说明](http://docs.rhomobile.com/rhodes/build.print)。

> Rhodes 应用程序的 iPhone/iPad 版本必须在 Macintosh 计算机或 rhohub.com 上构建。下面的说明描述了如何从 Macintosh Xcode 开发环境或本地 Macintosh 上的命令行执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T08:45:20.443

不可以，只能在基于 Mac OS 的计算机上开发 iOS 应用程序。

# c# - 如何在 C# 中为参数设置定义的值？

> ID：14919180
> 
> 赞同：2
> 
> 时间：2013-02-17T08:09:23.717
> 
> 标签：c#

如何为参数设置定义的值？我的意思是，例如，我有以下功能：

```
int functionA(string parameterA) {} 
```

现在，当我调用此函数并为参数 A 输入值时，我希望该值位于我定义的值集中。例如，定义的值集是：

```
string[] definedParameterA = { "Hello World", "stackoverflow" }; 
```

我输入的 parameterA 的值必须是“Hello World”或“stackoverflow”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T08:11:50.113

如果你真的希望它是一个字符串，你只需在方法的开头验证它：

```
private static readonly String[] ValidValues = {"Hello World", "stackoverflow"};

public void DoSomething(string text)
{
    if (!ValidValues.Contains(text))
    {
        throw new ArgumentException("Invalid value: " + text, "text");
    }
    // Carry on
} 
```

但是，您也可以考虑改用枚举。您仍然需要验证枚举值是否已定义，但它使调用者更容易正确处理：

```
public enum Message
{
    HelloWorld,
    StackOverflow
}

public void DoSomething(Message message)
{
    if (!Enum.IsDefined(typeof(Enum), message))
    {
        throw new ArgumentException("Invalid value: " + message, "message");
    }
    // Carry on
} 
```

当然，如果需要，您可以将枚举值映射到其他地方的字符串。

请注意，上面的代码将`message`在每次调用时装箱。*如果你真的想要，你可以使用我的*[Unconstrained Melody](https://code.google.com/p/unconstrained-melody/)项目来避免这种情况（并使其更安全），但在你证明这种拳击实际上是一个问题之前，它可能不值得。代码将如下所示：

 *```
public void DoSomething(Message message)
{
    if (!message.IsNamedValue()) // Extension method
    {
        throw new ArgumentException("Invalid value: " + message, "message");
    }
    // Carry on
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T08:19:01.263

也许静态类可以帮助您。

```
public static class MyValidParameters
{
    public static const string HelloWorld = "Hello World";
    public static const string Stackoverflow = "stackoverflow";
    //
} 
```

因此，您可以拥有任何类型的复杂参数（不仅是字符串），并且可以在不同的静态类中管理它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T08:46:05.797

我想用最笼统的术语改写 John Skeet 的回答：

您正在使用字符串。字符串是一种无界类型，可以包含几乎无限的可能值范围，从莎士比亚的全集`null`到`""`莎士比亚的全部作品。如果您只期望少数可能的值，那么无限数据类型可能不是您的正确选择。也许您可以将其替换为有界数据类型？

正如 John Skeet 所示，系统中内置的最简单的有界数据类型是 Enums。它们提供了一组封闭的可能值。所以你得到你的输入，将它映射到值列表中，然后从现在开始使用它。但是，有一些并发症。第一个是 John Skeet 提到的可能的性能惩罚。第二个是不是所有的字符串都可以表示为 Enum 值。例如，“Hello World”不是有效的 C# 标识符，因此很难将其映射到枚举中。

这可以通过使用`[Description("Hello world")]`or`[DisplayName("Hello world")]`属性装饰枚举值并使用反射来匹配它来完成，但这有其自身的性能损失。在这种情况下，您可能会考虑使用某种静态实用程序将字符串映射到枚举值。*

# android - 方法 findViewById(int) 未定义 Get Data Fragment for Accelerometer Sensor 类型

> ID：14919182
> 
> 赞同：3
> 
> 时间：2013-02-17T08:09:33.140
> 
> 标签：android, fragment, accelerometer, findviewbyid

我正在做我的项目，通过 android 平台中的加速度计传感器获取数据。我在最后 3 行代码中有错误代码。确切的错误是 findViewById 不适用于获取数据片段。那么，我如何在 Fragment 中使用 findviewbyId 来获取数据加速度计传感器？非常感谢您的回答:)

```
import android.app.Activity;
import android.app.Fragment;
import android.content.Context;
import android.hardware.Sensor;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.TextureView;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorManager;
import android.hardware.SensorEventListener;

public class GetDataFragment extends Fragment implements SensorEventListener {

//definisi variabel-variabel
//Sensor accelerometer;
private Activity parent;
TextView koordinatX;
TextView koordinatY;
TextView koordinatZ;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    return inflater.inflate(R.layout.get_data, container, false);
}

private SensorManager sensorManager;
private Sensor sensor;
//TextView koordinatX;

    @Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

     parent = getActivity();

    sensorManager = (SensorManager) parent.getSystemService(Context.SENSOR_SERVICE);
    sensor = sensorManager.getSensorList(Sensor.TYPE_ACCELEROMETER).get(0);

    koordinatX = (TextView)findViewById(R.id.coordinatx);
    koordinatY = (TextView)findViewById(R.id.coordinaty);
    koordinatZ = (TextView)findViewById(R.id.coordinatz);

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T08:43:41.943

你必须给你的`Views`in充气`onCreateView()`：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View rootView = inflater.inflate(R.layout.get_data, container, false);
    koordinatX = (TextView)rootView.findViewById(R.id.coordinatx);
    koordinatY = (TextView)rootView.findViewById(R.id.coordinaty);
    koordinatZ = (TextView)rootView.findViewById(R.id.coordinatz);
    return rootView;
} 
```

希望这可以帮助。

# objective-c - Core Plot 需要很长时间才能加载

> ID：14919185
> 
> 赞同：2
> 
> 时间：2013-02-17T08:09:58.300
> 
> 标签：objective-c, core-plot, nsthread

我在设置 CPTBarPlot 的方法中有以下代码：

```
CPTGraphHostingView *chartView = [[CPTGraphHostingView alloc] initWithFrame:CGRectMake(10, 100, 290, 330)];
    [self.view addSubview:chartView];

    CPTGraph *graph = [[CPTXYGraph alloc] initWithFrame:chartView.bounds];
    graph.plotAreaFrame.masksToBorder = NO;
    chartView.hostedGraph = graph;

    graph.paddingLeft = 20.0f;
    graph.paddingTop = 0.0f;
    graph.paddingRight = 0.0f;
    graph.paddingBottom = 20.0f;

    CPTMutableTextStyle *textStyle = [CPTMutableTextStyle textStyle];
    textStyle.color = [CPTColor grayColor];
    textStyle.fontName = @"Helvetica-Bold";
    textStyle.fontSize = 8.0f;;

    CPTMutableTextStyle *axisTitleStyle = [CPTMutableTextStyle textStyle];
    axisTitleStyle.color = [CPTColor grayColor];
    axisTitleStyle.fontName = @"Helvetica-Bold";
    axisTitleStyle.fontSize = 12.0f;
    CPTMutableLineStyle *axisLineStyleX = [CPTMutableLineStyle lineStyle];
    axisLineStyleX.lineWidth = 2.0f;
    axisLineStyleX.lineColor = [CPTColor grayColor];
    CPTMutableLineStyle *axisLineStyleY = [CPTMutableLineStyle lineStyle];
    axisLineStyleY.lineWidth = 2.0f;
    axisLineStyleY.lineColor = [CPTColor grayColor];

    CPTXYAxisSet *axisSet = (CPTXYAxisSet *) chartView.hostedGraph.axisSet;

    axisSet.xAxis.labelingPolicy = CPTAxisLabelingPolicyFixedInterval;
    axisSet.xAxis.title = @"Ferientage pro Jahr";
    axisSet.xAxis.titleTextStyle = axisTitleStyle;
    axisSet.xAxis.titleOffset = 10.0f;
    axisSet.xAxis.axisLineStyle = axisLineStyleX;
    axisSet.xAxis.labelTextStyle = textStyle;
    axisSet.xAxis.labelOffset = -7.0f;
    axisSet.xAxis.majorIntervalLength = CPTDecimalFromFloat(10.0f);
    axisSet.xAxis.labelFormatter.maximumFractionDigits = 0;

    axisSet.yAxis.labelingPolicy = CPTAxisLabelingPolicyNone;
    axisSet.yAxis.title = @"Bundesländer";
    axisSet.yAxis.titleTextStyle = axisTitleStyle;
    axisSet.yAxis.titleOffset = 5.0f;
    axisSet.yAxis.axisLineStyle = axisLineStyleY;

    CPTXYPlotSpace *plotspace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
            plotspace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0) length:CPTDecimalFromFloat(110)];
    plotspace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0) length:CPTDecimalFromFloat(17)];
    [graph addPlotSpace:plotspace];

    CPTBarPlot *plot = [CPTBarPlot tubularBarPlotWithColor:[CPTColor redColor] horizontalBars:YES];
    plot.plotRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0.5) length:CPTDecimalFromFloat(16)];
    plot.labelTextStyle = textStyle;
    plot.labelFormatter.maximumFractionDigits = 0;
    plot.labelOffset = -3.0f;
    plot.identifier = @"bl";
    plot.dataSource = self;
    plot.delegate = self;
    [graph addPlot:plot];

    plot.anchorPoint = CGPointMake(0.0, 0.0);
    CABasicAnimation *scaling = [CABasicAnimation
                                         animationWithKeyPath:@"transform.scale.x"];
    scaling.fromValue = [NSNumber numberWithFloat:0.0];
    scaling.toValue = [NSNumber numberWithFloat:1.0];
    scaling.duration = 1.0f;
    scaling.removedOnCompletion = NO;
    scaling.fillMode = kCAFillModeForwards;
    [plot addAnimation:scaling forKey:@"scaling"]; 
```

加载它在 iPhone 5 上大约需要 4 秒，在 iPhone 4 上是两倍。这正常吗？

我还试图通过从主线程中分离该方法并使用 a 来规避这一点`UIActivityIndicatorView`，但是还有第二个奇怪的行为：

有时它会显示微调器并且情节会在一段时间后变为动画，有时微调器不会出现并且情节显示时没有动画。

如您所见，我实际上正在努力解决两个问题，但也许第二个问题与第一个问题交织在一起。

* * *

也许我会向您展示与 Core Plot 工作相关的其他方法：

```
-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot {
return 16;
}

-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index {
Ferien *ferien = [[Ferien alloc] init];

NSNumber *num = nil;
if ([plot isKindOfClass:[CPTBarPlot class]]) {
    NSArray *reversedArrayCount = [[ferien.getToplist reverseObjectEnumerator] allObjects];
    num = (NSNumber *)[NSNumber numberWithFloat:[[reversedArrayCount objectAtIndex:index] floatValue]];
    }
return num; 
```

}

```
-(CPTLayer *)dataLabelForPlot:(CPTPlot *)plot recordIndex:(NSUInteger)index {
if ( [plot.identifier isEqual: @"bl"] ) {
    Ferien *ferien = [[Ferien alloc] init];
    CPTMutableTextStyle *textStyle = [CPTMutableTextStyle textStyle];
    textStyle.fontName = @"Helvetica-Bold";
    textStyle.fontSize = 8.0f;
    textStyle.color = [CPTColor blackColor];

    NSArray *reversedArrayBl = [[ferien.bundeslandListWithManagedObjects reverseObjectEnumerator] allObjects];
    NSArray *reversedArrayCount = [[ferien.getToplist reverseObjectEnumerator] allObjects];

    CPTTextLayer *label = [[CPTTextLayer alloc] initWithText:[NSString stringWithFormat:@"%@ (%@)", [reversedArrayBl objectAtIndex:index], [reversedArrayCount objectAtIndex:index]]];
    label.textStyle = textStyle;

    return label;
}

CPTTextLayer *defaultLabel = [[CPTTextLayer alloc] initWithText:@"Label"];
return defaultLabel; 
```

}

```
-(CPTFill *)barFillForBarPlot:(CPTBarPlot *)barPlot recordIndex:(NSUInteger)index {
if ([barPlot.identifier isEqual:@"bl"] ) {
    Ferien *ferien = [[Ferien alloc] init];

    NSMutableArray *colors = [[NSMutableArray alloc] initWithObjects:[UIColor lightGrayColor], [UIColor lightGrayColor], [UIColor lightGrayColor], [UIColor lightGrayColor], [UIColor lightGrayColor], [UIColor lightGrayColor], [UIColor lightGrayColor], [UIColor lightGrayColor], [UIColor lightGrayColor], [UIColor lightGrayColor], [UIColor lightGrayColor], [UIColor lightGrayColor], [UIColor lightGrayColor], [UIColor lightGrayColor], [UIColor lightGrayColor], [UIColor lightGrayColor], nil];

    [colors replaceObjectAtIndex:15-ferien.currentBundesland withObject:[UIColor orangeColor]];

    for (int i = 0; i < 16; i++) {
        CPTGradient *gradient = [CPTGradient gradientWithBeginningColor:[colors objectAtIndex:index]
                                                        endingColor:[CPTColor whiteColor]
                                                  beginningPosition:0.0 endingPosition:1.5 ];
        [gradient setGradientType:CPTGradientTypeAxial];
        [gradient setAngle:320.0];

        CPTFill *fill = [CPTFill fillWithGradient:gradient];

        return fill;
    }
}
return [CPTFill fillWithColor:[CPTColor colorWithComponentRed:1.0 green:1.0 blue:1.0 alpha:1.0]]; 
```

}

```
- (void)initView {
self.labelFerienName.text = self.ferienName;
self.labelFeriendauer.text = self.feriendauer; 
```

}

```
- (void)mergeChanges:(NSNotification *)notification {
AppDelegate *delegate = [[UIApplication sharedApplication] delegate];
NSManagedObjectContext *mainContext = [delegate managedObjectContext];

// Merge changes into the main context on the main thread
[mainContext performSelectorOnMainThread:@selector(mergeChangesFromContextDidSaveNotification:)
                              withObject:notification
                           waitUntilDone:YES]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:35:16.527

您可以在任何地方进行数据计算，包括其他线程，但图形设置和所有其他 Core Plot 交互必须在主线程上。当您准备好显示图表时调用`-initGraph`，即使数据尚未准备好。在后台线程上进行数据计算，并将结果缓存在数据源可以快速访问的结构中。当数据准备好时调用`-reloadData`绘图（从主线程）以强制绘图从数据源读取新数据。

# qt - Qt creator 5.0.1 和 Windows 上的 OpenCv 2.3.4

> ID：14919186
> 
> 赞同：1
> 
> 时间：2013-02-17T08:10:00.830
> 
> 标签：qt, opencv, cmake, qt5

几天来我一直在寻找一个好的指南，但我找不到最新版本的 Qt 和 OpenCv。我听说他们都很好，所以我想和他们一起做一个项目。我是 Qt 和 OpenCv 的初学者，你能一步一步告诉我吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-07T10:21:26.590

我已经为此苦苦挣扎了一段时间，今天早上就开始工作了。我想我会通过发布我的发现来回馈这个美妙的社区（因为它在许多场合都帮助了我）。享受！

我花了很多时间试图让 qt5 和 opencv 2.4.3 工作（实际上他们在我开始工作之前发布了 opencv 2.4.4。）我一直在看不少教程，但是迄今为止最好的一个是这个，非常重要，非常感谢：

[http://www.laganiere.name/opencvCookbook/chap1s1_2.shtml](http://www.laganiere.name/opencvCookbook/chap1s1_2.shtml)

我不能强调本教程对我有多大帮助，我正在编写本指南作为补充。大多数情况下，我提供了编译器和库的更新路径，并描述了如何处理我在此过程中遇到的错误。使用食谱教程获取图片和更详细的说明。

但正如我暗示的那样，事情并非没有痛苦并且按照说明进行，所以我想我会分享我为解决问题所做的事情，希望这会对某人有所帮助。

注意：我不完全确定我在一半的时间里在做什么，当有疑问时，我只是倾向于跟随我的直觉，所以如果有更多知识和经验的人发现不准确的东西，请告诉我，我会纠正它. 这就是我所做的，它已经为我解决了，我现在正在使用 C++ 在 qt creator 5 中构建 openCV 程序。

我使用了以下路径：

*Qt:* C:\软件\Qt

*OpenCV解压目录：* c:\software\opencv-win

*OpenCV 安装目录：* c:\software\opencvMinGW

**下载：**

好的，所以对于初学者来说，使用 MinGW 下载最新的 qt 库和创建者（在我的例子中是 5.0.1）

然后下载openCV，在我的例子中是2.4.4

下载 CMake（目前版本 2.8.10.2）

**安装：**

安装 Qt（这将需要相当长的时间）。

运行 openCV exe，它将提取您需要的所有文件。如前所述，我使用 C:\software\opencv-win 作为提取它们的位置。

安装 CMake。确保选择“将 CMake 添加到所有用户的系统路径”（或类似选项）。

将 C:\software\qt\5.0.1\mingw47_32\bin （或等效项）添加到系统变量中的路径（如何执行此操作在我开头链接的指南中进行了描述）

重新启动计算机。

**编译 OpenCV：**

启动 Cmake-gui。在“源代码在哪里：”下，您浏览到解压缩 opencv 的位置（在我的情况下为 C:\software\opencv-win），然后在“在哪里构建二进制文件”中，输入您想要完成的库的位置（我使用 c:\software\opencvMinGW)，然后单击生成并创建目录。在弹出窗口中，选择“MinGW makefiles”和“Specify native compilers”。在 C 中，对我来说，路径变成了“C:/software/qt/Tools/MinGW/bin/gcc.exe”，而对于 C++“C:/software/qt/Tools/MinGW/bin/g++.exe”，你相应地输入您安装 Qt 的位置。

按配置。

对我来说，这就是事情变得时髦的地方。我收到一条错误消息：

> “CMake 错误：CMake 无法找到与“MinGW Makefiles”对应的构建程序。CMAKE_MAKE_PROGRAM 未设置。您可能需要选择不同的构建工具。CMake 错误：CMake 无法找到与“MinGW Makefiles”对应的构建程序”。CMAKE_MAKE_PROGRAM 未设置。您可能需要选择不同的构建工具。CMake 错误：未设置内部 CMake 变量所需的错误，cmake 可能未正确构建。缺少变量是：CMAKE_CXX_COMPILER_ENV_VAR CMake 错误：找不到 cmake 模块文件:C:/software/opencvMinGWblah/CMakeFiles/2.8.10.2/CMakeCXXCompiler.cmake CMake 错误：错误需要内部 CMake 变量未设置，cmake 可能未正确构建。缺少变量是：CMAKE_C_COMPILER_ENV_VAR CMake 错误：找不到 cmake 模块文件：C：/software/opencvMinGWblah/CMakeFiles/2.8.10.2/CMakeCCompiler.cmake 配置不完整，出现错误！”

我怀疑这与make-program有关。呃。但是如何解决呢？

我通过检查“高级”按钮、找到条目 CMAKE_MAKE_PROGRAM 并指定路径“C:/software/qt/Tools/MinGW/bin/mingw32-make.exe”来解决它

一切都很好，就一切都好。或者是吗？

选中“Grouped”按钮，打开 WITH 类别，选中“WITH_QT”。按配置。另一块错误：

> C:/software/CMake 2.8/share/cmake-2.8/Modules/FindQt4.cmake:615 处的 CMake 警告（消息）：C:/software/qt/5.0.1/mingw47_32/bin/qmake.exe 报告 QT_INSTALL_LIBS 为“ C:/software/qt/5.0.1/mingw47_32/lib" 但在那里找不到 QtCore。没有为目标构建环境正确安装 Qt。调用堆栈（最近调用优先）：
> cmake/OpenCVFindLibsGUI.cmake:8 (find_package) CMakeLists.txt:377 (include)

因此，正如人们可能从错误消息中所怀疑的那样，程序找不到库。我对此进行了如下补救。展开分类QT，找到值QT_QTCORE_LIBRARY_DEBUG，输入

“C:/software/qt/5.0.1/mingw47_32/bin/Qt5Cored.dll”在它下面你会找到QT_QTCORE_LIBRARY_RELEASE，输入“C:/software/qt/5.0.1/mingw47_32/bin/Qt5Core.dll " 现在，您可以在没有警告的情况下按配置（希望如此），然后您可以按生成，一切都会变得美好，您可以按照食谱教程进行操作。

顺便说一句，这些是我添加到系统变量中的附加路径变量。我不知道，也许其中一些是不必要的，但当一切终于正常时，我不打算开始惹他们。

```
C:\software\qt\Tools\MinGW\bin;
C:\software\Qt\Tools\MinGW;
C:\software\opencvMinGW\install\bin; 
```

并且不要忘记您需要将 DLL 名称更改为 244 而不是 231，如下所示：

```
LIBS += -LC:\\software\\opencvMinGW\\install\\lib \
    -lopencv_core244.dll \
    -lopencv_highgui244.dll \
    -lopencv_imgproc244.dll \
    -lopencv_features2d244.dll \
    -lopencv_calib3d244.dll 
```

我真的希望这对某人有帮助！

编辑：上面的链接不再起作用。此链接可能会有所帮助（[https://wiki.qt.io/How_to_setup_Qt_and_openCV_on_Windows](https://wiki.qt.io/How_to_setup_Qt_and_openCV_on_Windows)）

# windows - Node js Web 服务器 - 问题和问题。

> ID：14919194
> 
> 赞同：0
> 
> 时间：2013-02-17T08:11:49.470
> 
> 标签：windows, node.js

我是节点 js 的新手。这些是我的问题

1.  我能否提供包含 javascripts、css 等的 html 页面。可能是内联的或来自外部页面的引用？
2.  是否可以根据请求显示页面？例如：`http://localhost:1234/`-> index.html 或`http://localhost:1234/Users.html`-> users.html
3.  是否需要维护任何文件夹结构以实现上述要求
4.  我有 html 页面并计划对服务器使用 ajax 请求。可能吗 ？

这些是我的疑惑。我做了一个可以显示静态 html 的小型服务器。但我需要对物理文件进行硬编码。那是可行的，但是当我更改了包含对 jquery 文件的引用的 html 时。它显示在控制台中找不到的文件。

我在 Windows 7 机器上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:21:13.270

1 Yes, node.js can serve html pages with images, css or javascript

2 Yes, you can set different pages for different URL's

3 Your choice, but you should to stick to folder structure, its better to be organised right. Here's a typical structure.

```
├───node_modules // installed npm packages 
│   ├───.bin
│   ├───express
│   ├───jade
├───public
│   ├───data         //created for other files
│   ├───img          //all my image files
│   ├───javascripts  //all my js files
│   └───stylesheets  //all my css files
├───routes  //handling routes for urls
├───Temp    //created by me for temp stuff
└───views   //all the static files you want to put 
```

4 Yes, node.js can accept/respond to AJAX requests

file not found is the error you get when you specify incorrect file location. If you use relative paths in your code like `./view` rather than `/view`, it is relative to where you start the node.js server.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T09:18:48.470

您要问的很多问题都归结为“如何使用 Node 提供静态内容？” 为此，我推荐 Express，它在此处记录： http: [//expressjs.com/api.html](http://expressjs.com/api.html) - 特别是“静态”服务功能，它可以让您轻松地在 Node 中从目录中提供整个文件，即使您的程序还提供动态内容。

# android - AutoCompleteTextView的下拉内容

> ID：14919198
> 
> 赞同：0
> 
> 时间：2013-02-17T08:12:43.027
> 
> 标签：android, themes, autocompletetextview

的下拉内容`AutoCompleteTextView`是白字。但是看不清楚。如何处理？</p>

这是我的代码：

```
ArrayAdapter<String> myAdapter=new ArrayAdapter<String>
(this,android.R.layout.browser_link_context_header, info_array); 
```

字体还是看不清楚。然后我像这样更改代码：`myAdapter.setDropDownViewResource(R.layout.dropdown_tv);`

它仍然看不到字体。请帮我。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T08:20:27.747

我建议保持应用程序的任何主题不变，并且只更改此活动中的`AutoCompleteTextView`主题`setTheme(android.R.style.Theme);`

在这里，有人通过覆盖`Widget.AutoCompleteTextView`主题检查[didldum](http://code.google.com/p/android/issues/detail?id=5237#c8)答案解决了它，它可能对您有所帮助：

***[引用自 code.google.com](http://code.google.com/p/android/issues/detail?id=5237#c8)***

```
1\. use an extended theme in your manifest:
...
<application android:theme="@style/Theme.Light.NoTitleBar.Workaround" ... >
...

2\. create the new theme (res/values/themes.xml) which uses fixed styles:
...
    <style name="Theme.Light.NoTitleBar.Workaround" parent="@android:style/Theme.Light.NoTitleBar">
        <item name="android:autoCompleteTextViewStyle">@style/AutoCompleteTextViewLight</item>
        <item name="android:dropDownItemStyle">@style/Widget.DropDownItemLight</item>
    </style>
...

3\. create the styles (res/values/styles.xml) which fix the color:
...
    <style name="AutoCompleteTextViewLight" parent="@android:style/Widget.AutoCompleteTextView">
        <item name="android:textColor">@android:color/primary_text_light</item>
    </style>
    <style name="Widget.DropDownItemLight" parent="@android:style/Widget.DropDownItem">
        <item name="android:textColor">@android:color/primary_text_light</item>
    </style>
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T10:19:06.843

我有同样的问题**但**我使用的是android支持库。和`Theme.AppCompat.Light`主题。

我的问题只发生在`android 2.3`设备上。

我通过更改下拉到的布局来解决问题：

```
R.layout.support_simple_spinner_dropdown_item 
```

# c++ - appendChild xml C++ 不能按需要工作

> ID：14919199
> 
> 赞同：3
> 
> 时间：2013-02-17T08:12:58.317
> 
> 标签：c++, xml, msdn

为什么，在做之后`appendChild`，我无法读取下一个节点？

```
(newChildList->get_item(count,&pNewChild)) 
```

`appendChild` API 无法正常工作。在我放了这条线之后，我无法获得下一个`get_item()`循环。它返回`pNewChild`是`NULL`. 为什么会这样？

```
IXMLDOMNode *pNewChild=NULL,*outNewChild;
IXMLDOMNodeList *newChildList=NULL;
BSTR newName;
long len=0;
HRESULT hr=S_OK;

//aggregate attribute
//CHK_HR(aggregateAttribute(pNodeNew,pXMLDomSrc,pXMLDomNew));

//read the list of child
CHK_HR(pNodeNew->get_childNodes(&newChildList));
CHK_HR(newChildList->get_length(&len));
//go over all the children
for(long count=0;count<len;count++)
{       
    hr =newChildList->get_item(count,&pNewChild);
    CHK_HR(pNewChild->get_nodeName(&newName));

    USES_CONVERSION;
    string temp= W2T(newName);
    temp = temp.substr(temp.find_first_of("/:")+1);
    if (!temp.compare("tuple")) 
    {       
        //CHK_HR(aggregateTuple(pXMLDomSrc,pNewChild));
    }       
    else 
    {       
        CHK_HR(pXMLElement->appendChild(pNewChild,&outNewChild));
    }
    SAFE_RELEASE(pNewChild);
    //SysFreeString(newName);
}

CleanUp:
//SAFE_RELEASE(newChildList);
SAFE_RELEASE(pNewChild);
return hr; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-10T17:58:23.090

appendChild 将节点移动到其他位置，每次将子列表减少一个。

尝试这个 ：

```
// reverse loop from index base 0 "len-1" to 0
for(long count=len-1;count>=0;--count) 
```

附带说明一下，您会泄漏大量内存（`outNewChild`和`newName`）

# memcached - Redis Data Structures Using up a lot of memory

> ID：14919200
> 
> 赞同：3
> 
> 时间：2013-02-17T08:13:08.303
> 
> 标签：memcached, redis, in-memory-database, in-memory

I ran an experiment in Redis to test memory usage of large keys. I loaded **16 Million strings** with **50-60 characters** (bytes), roughly taking **802 MB** on disk into a sorted set in Redis. It used up (got bloated to) **3.12 GB of RAM** for this sorted set.

Then I loaded 16 Million **short strings** (10-12 characters) occupying 220 MB of space on disk into another sorted set which still used up **2.5 GB of RAM**. It is evident that the reduction in space usage on disk is quite high (~72% reduced), but the Redis sorted set still uses quite a significant amount of memory used by the large strings.

The same is the case with Redis hashes also (the short strings use up pretty much 80% of memory used by long strings). Does memory used by Redis data structures depend only on the number of elements in the data structure (sorted set or hash) and does not on the length of each element (which is natural to think so- **shorter strings=>lesser memory**)?

It'll be great if I can understand **why**

***16 Million long strings use up almost same space as 16 Million short strings***

in **sorted set**, and if there is anything I can do to reduce memory taken up by the short strings (any memory optimization)?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T08:51:36.523

This question is similar to this one: [Redis 10x more memory usage than data](https://stackoverflow.com/questions/10004565/redis-10x-more-memory-usage-than-data/10008222#10008222)

Sorted set is the less memory efficient data structure of Redis. It is implemented as a dictionary plus a skip list. Both data structures involve a number of metadata and pointers (on a per item basis), whose size is higher than 10, 12, 50, or 60 bytes.

A 50 bytes difference in the size of your strings does not result in significant difference in the global memory footprint, because most of the memory is used by pointers, metadata, and [internal fragmentation](http://en.wikipedia.org/wiki/Fragmentation_%28computing%29). Of course a larger difference would result in a larger impact.

To leverage memory optimizations, you need to split your data structures (as described in the above link). It is easier to do it with hash or set, and generally difficult (or not possible at all) for sorted sets.

# javascript - javascript：计算两个日期之间的差异

> ID：14919201
> 
> 赞同：2
> 
> 时间：2013-02-17T08:13:12.687
> 
> 标签：javascript

我想找出两个日期之间的区别。为此，我确实从另一个 Date 对象中减去了一个 Date 对象。我的代码如下：

```
var d1 = new Date(); //"now"
var d2 = new Date(2012,3,17); // before one year
document.write("</br>Currrent date : "+d1);
document.write("</br>Other Date : "+d2);
document.write("</br>Difference : "+new Date(Math.abs(d1-d2))); 
```

但结果并不如我所料：

**当前日期：2013 年 2 月 17 日星期日 02:58:16 GMT-0500 (EST)
其他日期：2012 年 1 月 21 日星期六 00:00:00 GMT-0500 (EST)
差异：1971 年 1 月 28 日星期四 21:58:16 GMT-0500 （美东时间）** 

我想计算它们之间的（1 年）差异。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T08:41:09.023

如果您需要相当准确，我建议您使用天数作为单位。年有不同的天数，月也有不同的天数，所以说“1 个月”或“1 年”可能意味着不同的天数。

```
var d1 = new Date(); //"now"
var d2 = new Date(2012,3,17); // before one year
var msPerDay = 1000*60*60*24;
document.write( ((d1 - d2) / msPerDay).toFixed(0) + " days ago"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T09:04:54.313

所以从根本上说，最大的精确日期单位是**一周**，占 7 * 86400 秒。月份和年份没有精确定义。因此，假设您想说“1 个月前”，如果两个日期是例如`5.1.2013`and`5.2.2013`或`5.2.2013`and `5.3.2013`。并说“1 个月零 1 天前”，如果你有例如`5.1.2013`and `6.2.2013`，那么你将不得不使用这样的计算：

```
// dateFrom and dateTo have to be "Date" instances, and to has to be later/bigger than from.
function dateDiff(dateFrom, dateTo) {
  var from = {
    d: dateFrom.getDate(),
    m: dateFrom.getMonth() + 1,
    y: dateFrom.getFullYear()
  };

  var to = {
    d: dateTo.getDate(),
    m: dateTo.getMonth() + 1,
    y: dateTo.getFullYear()
  };

  var daysFebruary = to.y % 4 != 0 || (to.y % 100 == 0 && to.y % 400 != 0)? 28 : 29;
  var daysInMonths = [0, 31, daysFebruary, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];

  if (to.d < from.d) {
    to.d   += daysInMonths[parseInt(to.m)];
    from.m += 1;
  }
  if (to.m < from.m) {
    to.m   += 12;
    from.y += 1;
  }

  return {
    days:   to.d - from.d,
    months: to.m - from.m,
    years:  to.y - from.y
  };
}
// Difference from 1 June 2016 to now
console.log(dateDiff(new Date(2016,5,1), new Date()));
```

正如我所说，它变得棘手;）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T08:20:29.047

你在找[这个](http://jsfiddle.net/V7ESF/)吗？

```
 Math.ceil((new Date(2012, 11, 23) - new Date(2012, 11, 21)) / 86400000) + 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-27T05:35:37.147

你在找这个吗？

Math.ceil((新日期(2012, 11, 23) - 新日期(2012, 11, 21)) / 864000) + 1

# dart - dart 上是否有相当于 python 的 dir() ？

> ID：14919211
> 
> 赞同：7
> 
> 时间：2013-02-17T08:15:11.577
> 
> 标签：dart, dart-mirrors

`dir()`正如标题所说，飞镖上是否有相当于蟒蛇的东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T17:34:10.907

Python [dir() 函数](http://docs.python.org/release/1.5.1p1/tut/dir.html)用于找出模块定义的名称。

我们可以使用[Mirrors](http://api.dartlang.org/docs/bleeding_edge/dart_mirrors.html)并自己编写一个等效的函数（或至少非常相似）：

```
import 'dart:mirrors';

List<String> dir([String libraryName]) {
  var lib, symbols = [];

  if (?libraryName) {
    lib = currentMirrorSystem().libraries[libraryName];
  } else {
    lib = currentMirrorSystem().isolate.rootLibrary;
  }

  lib.members.forEach((name, mirror) => symbols.add(name));

  return symbols;
} 
```

现在举个例子：

```
class Hello {}

bar() => print('yay');

main() {
  var foo = 5;

  print(dir()); // [main, bar, Hello, dir]
} 
```

或者指定一个库：

```
print(dir('dart:mirrors')); 
```

> [MirroredError, TypeMirror, ObjectMirror, _LazyLibraryMirror, TypeVariableMirror, MirrorException, ClassMirror, MirrorSystem, _LocalMirrorSystemImpl, _LocalVMObjectMirrorImpl, DeclarationMirror, _LazyTypeMirror, _LocalClosureMirrorImpl, mirrorSystemOf, _LazyFunctionTypeMirror, _filterMap, MirroredCompilationError, _Mirrors, _LocalClassMirrorImpl, _LocalInstanceMirrorImpl, _LocalTypedefMirrorImpl, _LocalFunctionTypeMirrorImpl, reflect, MethodMirror, _LocalVariableMirrorImpl ，LibraryMirror，_LocalIsolateMirrorImpl，FunctionTypeMirror，_LocalLibraryMirrorImpl，镜像，_LocalObjectMirrorImpl，_LocalMirrorImpl，_makeSignatureString，_LocalTypeVariableMirrorImpl，评论，MirroredUncaughtExceptionError，_LocalParameterMirrorImpl，_LazyTypeVariableMirror，TypedefMirror，VariableMirror，IsolateMirror，currentMirrorSystem，_dartEscape，_LocalMethodMirrorImpl、ClosureMirror、VMReference、ParameterMirror、InstanceMirror、_isSimpleValue、SourceLocation]

这从字面上说明了特定库（模块）中定义的内容。现在，Python 的函数可能存在一些差异，它似乎也对名称进行了排序，但这应该让您有一个良好的开端。

# haskell - Quickcheck 中的测试不相等？

> ID：14919214
> 
> 赞同：1
> 
> 时间：2013-02-17T08:15:52.357
> 
> 标签：haskell, quickcheck

我是新手，[**`QuickCheck`**](http://hackage.haskell.org/package/QuickCheck)不能完全理解如何使用它。

假设我不小心用 a `Set`（而不是 a `List`）实现了一个数据类型：

```
data Profile = Profile (Set Strategy)
--for completeness:
data Strategy = Strategy Int 
```

然后后来遇到了这个错误，其中两个对象是相等的，即使它们不应该：

```
Profile (Set.fromList [1,2,3]) == Profile (Set.fromList [2,1,3])
-- D'OH! Order doesn't matter in sets! 
```

如何编写[**`QuickCheck`**](http://hackage.haskell.org/package/QuickCheck)测试用例来测试这种情况？在伪代码中，这看起来像这样：

```
assertNotEqual(Profile (Set.fromList [1,2,3]), Profile (Set.fromList [2,1,3]))
assertEqual(Profile (Set.empty), Profile (Set.empty )) 
```

我已经尝试查看项目 github 上的[示例](https://github.com/nick8325/quickcheck/tree/master/examples)，但似乎它们并没有涵盖这些微不足道的案例。

欢迎任何提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T14:54:27.643

> 我如何编写一个 QuickCheck 测试用例来测试这个用例？

你不应该！QuickCheck 是一种*基于属性的测试*工具。在基于属性的测试中，您提供数据结构（或其他）的属性，测试工具将自动生成测试用例，以查看该属性是否适用于生成的测试用例。那么，让我们看看如何给出属性而不是给出具体的测试用例`[1,2,3]`，以及为什么属性是有利的！

所以。我从

```
import Test.QuickCheck
import qualified Data.Set as Set 
import Data.Set (Set)

data Profile = Profile (Set Int)
  deriving (Eq, Show)

mkProfile :: [Int] -> Profile
mkProfile = Profile . Set.fromList

-- | We will test if the order of the arguments matter.
test_mkProfile :: [Int] -> Bool
test_mkProfile xs = (mkProfile xs `comp` mkProfile (reverse xs))
  where comp | length xs <= 1 = (==)
             | otherwise      = (/=) 
```

这就是我对我的属性的推理：嗯，对于空列表和单例列表的情况，then`reverse`只是身份，所以我们期望`mkProfile xs`与`mkProfile (reverse xs)`. 正确的？我的意思是`mkProfile`得到完全相同的论点。在这种情况下`length xs >= 2`显然`reverse xs`不是`xs`。喜欢`reverse [1, 2] /= [2, 1]`。我们知道 Profile*确实*关心订单。

现在让我们试试这个`ghci`

```
*Main> quickCheck test_mkProfile 
*** Failed! Falsifiable (after 3 tests and 1 shrink):     
[0,0] 
```

现在请注意，我们的代码中实际上有**两个**错误。一，首先，`Profile`应该使用列表而不是集合。第二，我们的属性不对！因为即使`length xs >= 2`，`xs == reverse (xs)`也可能是真的。让我们尝试修复第一个错误，看看 quickcheck 仍然会指出第二个缺陷。

```
data Profile2 = Profile2 [Int]
  deriving (Eq, Show)

mkProfile2 :: [Int] -> Profile2
mkProfile2 = Profile2 

-- | We will test if the order of the arguments matter.
test_mkProfile2 :: [Int] -> Bool
test_mkProfile2 xs = (mkProfile2 xs `comp` mkProfile2 (reverse xs))
  where comp | length xs <= 1 = (==)
             | otherwise      = (/=) 
```

请记住，我们的代码现在是正确的，但我们的属性有缺陷！

```
*Main> quickCheck test_mkProfile2
+++ OK, passed 100 tests.
*Main> quickCheck test_mkProfile2
+++ OK, passed 100 tests.
*Main> quickCheck test_mkProfile2
+++ OK, passed 100 tests.
*Main> quickCheck test_mkProfile2
+++ OK, passed 100 tests.
*Main> quickCheck test_mkProfile2
+++ OK, passed 100 tests.
*Main> quickCheck test_mkProfile2
+++ OK, passed 100 tests.
*Main> quickCheck test_mkProfile2
+++ OK, passed 100 tests.
*Main> quickCheck test_mkProfile2
*** Failed! Falsifiable (after 8 tests):                   
[-8,-8] 
```

是的。你还需要思考！或者您可能会因为您的代码实际上通过了 700 个测试用例而产生一切正常的错误印象！好的，现在让我们也修复我们的财产！

```
test_mkProfile2_again :: [Int] -> Bool
test_mkProfile2_again xs = (mkProfile2 xs `comp` mkProfile2 ys)
  where ys   = reverse xs
        comp | xs == ys  = (==)
             | otherwise = (/=) 
```

现在让我们看看它可以多次工作！

```
*Main> import Control.Monad
*Main Control.Monad> forever $ quickCheck test_mkProfile2_again
+++ OK, passed 100 tests.
+++ OK, passed 100 tests.
+++ OK, passed 100 tests.
+++ OK, passed 100 tests.
+++ OK, passed 100 tests.
+++ OK, passed 100 tests.
+++ OK, passed 100 tests.
... (a lot of times) 
```

万岁。现在，我们不仅消除了`Profile`实现中的错误，而且对我们的代码及其所遵循的属性也有了更好的理解！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T08:26:13.580

您可以使用[SmallCheck](http://hackage.haskell.org/package/smallcheck)支持的存在量化来做到这一点：

```
> depthCheck 5 $ exists $ \xs -> (xs :: [Integer]) /= sort xs
    Depth 5:
      Completed 1 test(s) without failure.
> depthCheck 5 $ exists $ \xs -> fromList (xs :: [Integer]) /= fromList (sort xs)
    Depth 5:
      Failed test no. 1\. Test values follow.
      non-existence 
```

另一种选择，使用通用量化（也适用于 QuickCheck）：

```
> smallCheck 5 $ \xs ys -> xs /= ys ==> fromList (xs :: [Integer]) /= fromList ys
Depth 0:
  Completed 1 test(s) without failure.
  But 1 did not meet ==> condition.
Depth 1:
  Completed 4 test(s) without failure.
  But 2 did not meet ==> condition.
Depth 2:
  Failed test no. 26\. Test values follow.
  [0]
  [0,0] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T18:46:21.930

正如我所评论的，我回答这个问题的主要问题是你的类型缺乏结构`Profile`。如果您定义 Profile、一组操作和不变量，那么进行快速检查测试将变得很容易。

例如，假设您有一个配置文件、一种构建配置文件的方法和一种修改配置文件的方法。属性都将是唯一的

```
 module Profile (Profile, mkProfile, addItem) where
 import Data.Set

 newtype Profile = Profile { unProfile :: Set Int }
   deriving (Eq, Ord, Show)

 mkProfile :: [Int] -> Profile
 mkProfile = Profile . fromList

 addItem :: Int -> Profile -> Profile
 addItem x = Profile . insert x . unProfile 
```

您可以通过在每次操作之前和之后声明属性来使用快速检查来测试这样的 ADT：

```
 import Test.QuickCheck
 import Profile as P

 prop_unique_list_unique_profile :: [Int] -> [Int] -> Bool
 prop_unique_list_unique_profile xs ys =
    xs /= ys ==> mkProfile xs /= mkProfile ys

 prop_addItem_nonequal :: Int -> [Int] -> Bool
 prop_addItem_nonequal x xs = P.addItem x xs /= xs 
```

# javascript - 如何使用 Ember.Select ？如何设置默认选中项？

> ID：14919218
> 
> 赞同：3
> 
> 时间：2013-02-17T08:16:20.080
> 
> 标签：javascript, html, ember.js

我正在使用 ember.select。我试图动态设置值。但这对我不起作用。我附上了我的示例代码。

帮我解决这个问题。

这是我的车把模板 Hbs：-

```
{{view Ember.Select
    contentBinding="dropDown"
    optionValuePath="content.id"
    optionLabelPath="content.value"
    selectionBinding="obj3"   //This is the object am trying to set dynamically. I defined my object in below
}}

//View Model - This is my view model. This model gives the dropdown list
App.MyModel = Em.Object.extend({
    id:{
       },
    dropDown:[
      {id:"1",value:"test1"},
      {id:"2",value:"test2"},
      {id:"3",value:"test3"}
    ]
});

// Model - Here is my data model. I want to update obj3 with dropdown list value.
DataModel = Em.Object.extend({
    obj1:"",
    obj2:"",
    obj3:null
});

// Create obj. Initially am trying to set default value for my dropdown.

var dataModel = DataModel.create({
    obj1:"value1",
    obj2:"value1",
    obj3:{id:"1",value:"test1"}
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T13:01:06.673

您必须将所选值保留在应用程序中的某个位置，并将`valueBinding`of设置`Em.Select`为该路径，例如：

```
window.App = Em.Application.create()

App.ApplicationRoute = Em.Route.extend({
    model: function() {
        return [
            {id: 1, text: "ein"},
            {id: 2, text: "zwei"},
            {id: 3, text: "polizei"}
        ];
    }
});

App.ApplicationController = Em.ObjectController.extend({
    selected: 2 // will select "zwei"
}); 
```

在`ApplicationController`上面，我创建了一个属性`selected`来保存`id`我想要在组合中动态选择的对象，然后在我的模板中我将绑定设置如下：

```
<script type="text/x-handlebars">
    {{view Ember.Select contentBinding="content" 
           optionLabelPath="content.text"
           optionValuePath="content.id"
           valueBinding="controller.selected"}}
</script> 
```

你可以在这里看到一个工作小提琴[http://jsfiddle.net/schawaska/zfVP8/](http://jsfiddle.net/schawaska/zfVP8/)

# json - 我如何将 maya 文件转换为 json 文件并将其与 three.js 一起使用

> ID：14919219
> 
> 赞同：2
> 
> 时间：2013-02-17T08:16:30.367
> 
> 标签：json, three.js, maya

我想在我的three.js项目中使用一些maya文件，但似乎只有json文件可以在three.js中使用

那么如何转换这些文件呢？

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T09:29:04.660

Please have a look at the [three.js Maya exporter](https://github.com/mrdoob/three.js/tree/master/utils/exporters/maya).

The scripts should be in `your three.js folder/ utils / exporters / maya`

# cocoa-touch - iOS CGAffineTransform 奇怪的行为

> ID：14919224
> 
> 赞同：2
> 
> 时间：2013-02-17T08:17:54.210
> 
> 标签：cocoa-touch, uiview, cgaffinetransform

我正在尝试使用下面的代码简单地将视图从一个位置动画到另一个位置，但动画并不流畅。动画中有一个“pop”。例如，它在向下移动之前快速向上移动。

如果我的设置有问题，谁能告诉我？

```
 [UIView animateWithDuration:0.2 animations:^{
            [_label setTransform:CGAffineTransformMake(1, 0, 0, 1, 0, 88)];
            transformState = 1;
   }]; 
```

谢谢阅读！

如果你有时间，请下载这个非常简单的测试项目，这样你就可以很容易地看到问题，如果你这样做了，非常感谢你抽出宝贵的时间。

[http://owolf.net/uploads/StackOverflow/TransformTest.zip](http://owolf.net/uploads/StackOverflow/TransformTest.zip)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T08:25:05.583

您的视图控制器在情节提要中打开了自动布局，并且[自动布局可以以意想不到的方式与变换交互。](https://stackoverflow.com/questions/12943107/how-do-i-adjust-the-anchor-point-of-a-calayer-when-auto-layout-is-being-used/14105757#14105757)

要么关闭自动布局，要么考虑[使用自动布局约束](https://stackoverflow.com/questions/14559677/animating-a-view-created-in-ib-using-autolayout/14698401#14698401)来制作动画。

# ios - 在 UIWebView 中截取图片中的链接

> ID：14919226
> 
> 赞同：2
> 
> 时间：2013-02-17T08:18:24.467
> 
> 标签：ios, objective-c, cocoa-touch, uiwebview

在我的应用程序中，我有一个 webview，并且想在单独的视图控制器中打开加载在网页中的图像，这很好，我需要做的就是获取图像源的 URL 并将其加载到不同的视图中控制器，我可以做到。

这是我用来获取图像源 URL 的代码。

```
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
    if ([gestureRecognizer isKindOfClass:[UITapGestureRecognizer class]]) {
        CGPoint touchPoint = [touch locationInView:self.view];

        NSString *imageSRC = [NSString stringWithFormat:@"document.elementFromPoint(%f, %f).src", touchPoint.x, touchPoint.y];
        NSString *srcOfImage = [webView stringByEvaluatingJavaScriptFromString:imageSRC];
        NSLog(@"src:%@",srcOfImage);
    }
    return YES;
} 
```

现在，我的问题是，有时，当图像可能带有链接（即标签）时，webview 将加载链接，而图像在我的单独视图控制器中打开。我想做的是，如果存在链接，请阻止 webview 打开链接（仅图像中的链接）。关于我如何实现这一目标的任何指示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T09:33:19.127

终于想通了，答案就在于UIWebViewDelegate。对于任何有兴趣的人，这就是我解决它的方法..

```
bool isImage;

-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
    if ([gestureRecognizer isKindOfClass:[UITapGestureRecognizer class]]) {
        CGPoint touchPoint = [touch locationInView:self.view];

        NSString *imageSRC = [NSString stringWithFormat:@"document.elementFromPoint(%f, %f).src", touchPoint.x, touchPoint.y];
        NSString *srcOfImage = [webView stringByEvaluatingJavaScriptFromString:imageSRC];
        NSLog(@"src:%@",srcOfImage);
        NSURL *imgsrcURL = [NSURL URLWithString:srcOfImage];
        if (imgsrcURL && imgsrcURL.scheme && imgsrcURL.host) {
            isImage = TRUE;
        }
    }
    return YES;
}

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    if ((navigationType == UIWebViewNavigationTypeLinkClicked) && (isImage)) {
        return NO;
        isImage = FALSE;
    } else {
        return YES;
    }
} 
```

# jquery - 使用 GWT 后端但不使用前端

> ID：14919229
> 
> 赞同：1
> 
> 时间：2013-02-17T08:18:49.640
> 
> 标签：jquery, gwt

我刚刚加入了一个 GWT 项目。

我们现在的目标是创建更多的登录页面。

我想将这些页面添加为简单的 HTML 并使用现有的 GWT 后端。

这可能吗？

当我查看当前登录页面中的网络时，我看到 GWT 使用与竖线连接的长字符串，例如：

```
7|0|11|http://15.165.128.219:8099/welcome/|B080515AD1EBC13C065F38E72385F941|com.company.AdminService|login|com.company.LoginDetails/94248548|java.util.HashSet/3273092938|java.lang.String/2004016611|myusername|mypassword|1|2|3|4|1|5|5|P__________|6|1|7|8|6|1|7|9|10|11| 
```

我知道 JQuery Ajax

```
$.ajax( { username : "username" , password : "password" } 
```

GWT 响应如下所示：

```
//OK['C',[],0,7] 
```

如何桥接这两种技术？使用 GWT 发送 JQuery Ajax 请求和回复的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T09:45:53.057

GWT的使用就是把它作为一种前端技术来使用。如果您想删除该功能，那么您可能根本不需要 GWT 并使用后端技术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T10:36:07.597

GWT 具有三个“层” `client, shared and server`。

在服务器端，您可以使用任何适合的`Java and database.`

GWT 在浏览器和服务器之间有自己的远程过程调用机制。

这很像`vanilla Java RMI`- 为您的服务器函数定义接口和实现，并且将生成代码以允许您的客户端代码调用它们，就好像它们是简单的本地方法一样。

`XML or JSON`这让为请求和响应定义数据格式的所有工作都一扫而光。只需为服务器编写函数，从客户端代码调用函数（仍然是 Java），所有的`marshalling, unmarshalling, network communication`等等都为您完成。

因此，如果没有客户端，您不能单独使用 RPC 功能，而且这样使用也不是一个好习惯。

```
My suggetion is to go for Pure `AJAX`. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-02T01:46:28.573

通过 javascript 将 ajax 请求分派到 GWT RPC 调用的正确方法是将调用转换为 javascript api。Gwt 有一个库可以让这变得相当容易 - [https://code.google.com/p/gwt-exporter/](https://code.google.com/p/gwt-exporter/)

它允许您在 GWT 的 java 代码中注释方法（例如，一个包含调用某些 GWT RPC 的方法的类），并以一个好听的名称使其可用于 javascript。

例如，

```
 package com.example;
  @Export
  public static class YourClass implements Exportable {
    private YourServiceAsync service = (YourServiceAsync) Gwt.create(YourService.class);
    public void foo() {
      //you can make RPC calls here via the normal GWT way
      service.doService("foo", new YourAsyncCallback()); 
    }
    public static String bar(){
      return "bar";
    }
  } 
```

然后在javascript中，您可以调用这些方法

```
 // create an instance of YourClass 
   var a = new com.example.YourClass ()
   // call an instance method
   a.foo();
   // call a static method
   com.example.YourClass .bar(); 
```

还有更高级的用途（例如在 javascript 中传入闭包） - 检查该项目的 doco/wiki。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T03:45:40.240

当您编写自己的代码以向 GWT-RPC 发出请求并解析来自 GWT-RPC 的响应时，您已经重写了相当多的 GWT。

您最好的选择是在客户端使用 GWT 来处理服务器通信（然后可能将结果传递给 jQuery），或者在服务器端编写类似 servlet 的东西，作为 GWT-RPC 调用的替代接口。

但是，如果您坚持走这条路，那么开始的地方就是这个问题： [GWT RPC 数据格式](https://stackoverflow.com/questions/6135590/gwt-rpc-data-format)

所选答案链接了格式的基本概述的来源。对于完整的细节，虽然别无选择，只能深入挖掘源头。该协议在其他任何地方都没有完整记录。

# vb.net - VB.NET 我应该为此使用集合吗？

> ID：14919230
> 
> 赞同：0
> 
> 时间：2013-02-17T08:18:52.703
> 
> 标签：vb.net, collections

我正在尝试将我的旧 VB6 代码引入现代 VB.NET 代码。

在我的 VB6 代码中，我需要查询集合中是否存在键。

我这样做：

```
Private Function pIndexFromKey(ByRef uCol As Collection, ByVal uText As String) As Long
  On Error Resume Next
  Dim lRet&
  lRet = uCol.Item(uText)
  pIndexFromKey = lRet
End Function 
```

如果 pIndexFromKey 返回 0，我知道该键不包含在集合中，我添加它是这样的：

```
nCollection.Add(lIndex, sText) 
```

我想知道这是否是“不错”的方法。我认为不是因为在 .NET 中我使用的是 VisualBasic 集合，而且它是“VB”而不是系统集合这一事实让我感到怀疑。

仅作记录，这是我的 VB.NET 代码：

```
Private Function pIndexFromKey(ByRef uCol As Collection, ByVal uText As String) As Integer
  On Error Resume Next
  Dim lRet As Integer = CInt(uCol(uText))
  Return lRet
End Function 
```

代码工作正常，但我的 On Error Resume Next 方法看起来很难看，而且我不喜欢每次抛出（并吃掉）错误时让调试窗口告诉我异常。

有没有人有更好的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:54:08.040

删除您的 VB 集合并使用高级通用列表。

在您的情况下，我怀疑您使用的是简单的 List(Of String)。
如果是这样，请将此替换用于您的方法

```
Dim k as List(Of String) = new List(Of String) 
k.Add("Test1")
k.Add("Test2")
k.Add("Test3")
k.Add("Test4")
k.Add("Test5")

' No need to use Contains, IndexOf doesn't throw exceptions if the element is not there
Dim x = k.IndexOf("Test4")
if x = -1 then 
      Console.WriteLine("Test4 is not in list")
else 
      Console.WriteLine("Test4 is at index" + x.ToString)
End if 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T08:35:48.447

您可以简单地使用 contains 方法来检查密钥是否存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T08:36:57.170

我不会使用“on errer resume next”的方法。只需使用“包含”方法测试集合。

```
Dim  Ret as integer
Ret=0
If (uCol.contains(uText)) then
  Ret= CInt(uCol(uText))
Return ret 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T13:32:04.140

您可以使用[Generic.Dictionary](http://msdn.microsoft.com/en-ca/library/xfhwa508.aspx) (Of String, Integer)。所以代替这个：

```
Private Function pIndexFromKey(ByRef uCol As Collection, ByVal uText As String) As Integer
  On Error Resume Next
  Dim lRet As Integer = CInt(uCol(uText))
  Return lRet
End Function 
```

你会有这个：

```
Private Function pIndexFromKey(dict As Dictionary(Of String, Integer), uText As String) As Integer
  Dim lRet As Integer
  If dict.TryGetValue(uText, lRet) Then Return lRet
  Return -1 'default value if key was not found in the dictionary
End Function 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T09:08:57.177

我会用`VisualBasic.Collection`初学者替换`ObjectModel.Collection(Of T)`。然后，摆脱您的自定义函数并检查`Contains()`方法。

```
 Dim nCollection As New ObjectModel.Collection(Of String)
    Dim sText As String = "value"

    If Not nCollection.Contains(sText) Then
        nCollection.Add(uText)
    End If

    If nCollection.Contains(sText) Then
        Dim index = nCollection.IndexOf(sText)
    End If 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-17T08:28:19.863

如果你有 Vb.Net，你可以在 Try 使用示例中处理错误：Try

抓住前任作为例外

结束尝试

我希望我理解正确

# c# - 在 C# 中填充一个数组

> ID：14919234
> 
> 赞同：23
> 
> 时间：2013-02-17T08:20:01.450
> 
> 标签：c#, arrays

在 Java 中，Arrays 类中有大约 18 个静态“填充”方法，它们用于为数组中的每个元素分配一个值。我正在寻找 C# 中的等价物来实现相同的目标，但我没有找到任何具有相同紧凑性的东西：

1）据我所知，ForEach 按值传递数组中的元素，因此我无法更改它们

2）从 Enumerable 重复创建一个新数组，创建一个新数组然后从数组中复制每个元素似乎是开销

3) for 循环并不漂亮，我想这就是为什么 Java 人一开始就引入了这种紧凑的符号

4) Array 类中的 Clear 方法可以将所有内容设置为零，但是如何将零转换为我想要的非零值？

为了演示 Java 的语法，请考虑打印三倍于数字 7 的这段代码：

```
int[] iii = {1, 2, 3};
Arrays.fill(iii, 7);
for (int i : iii) {
    System.out.println(i);
} 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-17T09:28:42.057

```
int[] arr = Enumerable.Repeat(42, 10000).ToArray(); 
```

我相信这可以完成工作:)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-17T08:33:31.593

给自己写一个扩展方法

```
public static class ArrayExtensions {
    public static void Fill<T>(this T[] originalArray, T with) {
        for(int i = 0; i < originalArray.Length; i++){
            originalArray[i] = with;
        }
    }  
} 
```

并像使用它一样

```
int foo[] = new int[]{0,0,0,0,0};
foo.Fill(13); 
```

将用 13 填充所有元素

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-02-17T08:31:26.030

你可以尝试这样的事情：

我已经将数组初始化为值为 5，您可以类似地输入您的数字。

```
int[] arr = new int[10]; // your initial array

arr = arr.Select(i => 5).ToArray(); // array initialized to 5. 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-17T08:45:34.710

假设您要填写数字 13。

`int[] myarr = Enumerable.Range(0, 10).Select(n => 13).ToArray();`

或者

`List<int> myarr = Enumerable.Range(0,10).Select(n => 13).ToList();`

如果您更喜欢列表。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-17T08:39:17.920

你可以写一个扩展方法

```
public static void Fill<T>(this T[] array, T value)
{
  for(int i = 0; i < array.Length; i++) 
  {
     array[i] = value;
  }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-17T08:42:14.793

```
public static void Fill<T>(this IList<T> col, T value, int fromIndex, int toIndex)
{
    if (fromIndex > toIndex)
        throw new ArgumentOutOfRangeException("fromIndex");

    for (var i = fromIndex; i <= toIndex; i++)
        col[i] = value;
} 
```

适用于所有`IList<T>`s 的东西。

# html - html页面加载css延迟1秒？

> ID：14919236
> 
> 赞同：7
> 
> 时间：2013-02-17T08:20:23.517
> 
> 标签：html, css

我一直在尝试制作一些 html 和 css 页面。每次我加载页面时。它总是给我大约半秒的没有css样式的html页面。任何人都知道为什么会发生这种情况以及如何解决它？提前致谢。

已解决：谢谢大家，我只是将我的 jquery 放在底部并解决了问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-10-03T09:40:40.220

对于其他有同样问题的人，在我的情况下，延迟来自`autofocus=""`文本输入中的属性，所以我删除了它，问题就解决了！

希望这可以帮助

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-17T08:31:58.910

我建议以下内容：-

1.  从标题中删除任何 jquery 并将其放在页面底部。

2.  从您的编码中删除多余的空格。

3.  减小图像文件的大小。

4.  如果可能，请尝试将多个脚本合并为一个。

5.  删除任何不必要的元素。

6.  将所有样式表组合成一个更小的文件，更短的响应时间和更快的加载时间。

7.  优化您的背景图像或您在页面上使用的任何图像以加快加载速度。

8.  最后使用 Gzip 压缩 JS、CSS 和 HTML。切勿在图像、视频、pdf 上使用它 - 不会进行任何额外的压缩，但可能会增加大小。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-17T08:24:52.460

文档的 HEAD 元素中只有一个 LINK 元素或 SCRIPT 元素将防止无样式内容的闪现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-15T11:20:09.173

在头部放置一个带有 0 的脚本标签

```
<head>
    <!-- Other head stuff ... -->
    <script>0</script>
</head> 
```

# java - 在原始数组上调用 amap 时，Clojure 失败

> ID：14919239
> 
> 赞同：1
> 
> 时间：2013-02-17T08:20:37.590
> 
> 标签：java, arrays, clojure, functional-programming, interop

在 ClojureDocs 上，它提到 aset 仅适用于参考 java 类型的数组。但它没有提到amap的使用。

```
(reduce
  (fn [#^doubles sum #^doubles prob]
    (println sum)
    (amap ^doubles sum idx ret 
      (fn [x] (println x) (+ x (get prob idx)))))
  (double-array 3 (double 0))
  [(double-array [1.0 2.0 3.0])
   (double-array [1.0 2.0 3.0])
   (double-array [1.0 2.0 3.0])
   (double-array [1.0 2.0 3.0])
   (double-array [1.0 2.0 3.0])]) 
```

上面的代码失败并显示以下错误消息

> IllegalArgumentException 未找到匹配方法： aset clojure.lang.Reflector.invokeMatchingMethod (Reflector.java:80)

在这种情况下似乎无法使用 amap。

我有两个问题：

*   是否有任何巧妙的解决方案可以为简单的地图逻辑返回原始数组？
*   为什么原始数组不支持 aset？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T09:06:52.670

您使用`amap`不正确。amap 的最后一个参数应该是一个表达式，而不是您使用的函数（如法线贴图）。

```
(reduce
  (fn [^doubles sum ^doubles prob]
    (println sum)
    (amap ^doubles sum idx ret 
      (+ (aget sum idx) (aget prob idx))))
  (double-array 3 (double 0))
  [(double-array [1.0 2.0 3.0])
   (double-array [1.0 2.0 3.0])
   (double-array [1.0 2.0 3.0])
   (double-array [1.0 2.0 3.0])
   (double-array [1.0 2.0 3.0])]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T16:55:43.527

如果数组的元素数量很少，您可以使用`map`：

```
(apply map + [(double-array [1.0 2.0 3.0])
              (double-array [1.0 2.0 3.0])
              (double-array [1.0 2.0 3.0])
              (double-array [1.0 2.0 3.0])
              (double-array [1.0 2.0 3.0])])

=> (5.0 10.0 15.0) 
```

它看起来更干净。`into-array`如果你真的需要它，你可以将计算的最终结果转换为数组。

# html - 嵌入 Flash 在 Firefox 中不起作用

> ID：14919240
> 
> 赞同：1
> 
> 时间：2013-02-17T08:20:45.933
> 
> 标签：html

出于某种原因，此代码在 Firefox 中不起作用，而在所有其他浏览器上都起作用。

```
<object type="application/x-shockwave-flash" width="336" height="180"><param name="movie" value="http://www.monex.com/ichart/inter_chart.swf" /><embed src="http://www.monex.com/ichart/inter_chart.swf" width="336" height="180" /></object> 
```

# android - android从UIThread获取数据

> ID：14919243
> 
> 赞同：3
> 
> 时间：2013-02-17T08:21:24.120
> 
> 标签：android

我正在尝试使用 .我的`Bluetooth`gui将 android`SeekBar`数据发送到arduino我改变了 SeekBar。`Sockets``OutputStream``Socket``onSeekBarChanged()`

```
 public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
        if(seekBar.getId() == R.id.seekBar)
        {
            speed.setText(String.valueOf(progress));
            String outputData = String.valueOf(progress)+",";
            try
            {
            streams.write(outputData.getBytes());//writes data to OutputStream of Socket
            }catch (Exception e){
                Log.d("RTR","Sockets not yet formed");
            }

        }
    } 
```

问题是我需要`Accelerometer`与当前值一起连续发送数据。`SeekBar`所以我尝试写入加速度计`OutputStream`的`Socket`from`onSensorChanged(SensorEvent event)`方法。`Result:Program not responding.`

```
public void onSensorChanged(SensorEvent event) {

        if(event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
        {
            float accXYZ[] = event.values;

            float accX = accXYZ[0];
            float accY = accXYZ[1];
            float accZ = accXYZ[2];

            x.setText(String.format("%.2f",accX));
            y.setText(String.format("%.2f",accY));
            z.setText(String.format("%.2f",accZ));

            String outputData = x.getText().toString()+","+speed.getText().toString()+";";

            try{
                  streams.write(outputData.getBytes());
            }catch (Exception e){
                //Log.d("RTR","X");
            }

        }
    } 
```

我知道这对 . 来说太重了`UI Thread`。我想我应该在方法中创建一个`new Thread`无限循环`run()`来连续发送数据。我怎样才能将加速度计和 SeekBar 数据连续发送到这个新线程。

或者我应该从这个新线程中收集 UIThread 的加速度计和 SeekBar 的数据。

```
In Short, how do I get data from UIThread to this new Thread. 
```

请提供您知道的所有可能的解决方案，以解决我的问题以及我当前程序的任何并发症。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T14:30:39.453

一个很好的方法是使用内置[`Looper`](http://developer.android.com/reference/android/os/Looper.html)类。Looper 是为 Android 的 UI 线程提供支持的消息队列系统，您也可以在自己的线程中使用它。它的设计方式的好处在于它创建的垃圾收集负载非常少（取决于您使用的参数类型，它可以是无）。

我正在徒手写这个，所以你必须稍微修改一下才能让它工作，但它最终可能看起来像这样：

```
class LooperThread extends Thread {
    private static final int MSG_TYPE_OUTPUT_DATA = 0;
    private Handler mHandler;
    private volatile OutputStream mOutputStream;

    public void run() {
        Looper.prepare();

        mHandler = new Handler() {
            public void handleMessage(Message msg) {
                if (msg.what == MSG_TYPE_OUTPUT_DATA
                    && mOutputStream != null) {
                    //try-catch left out for brevity
                    mOutputStream.write(msg.obj.getBytes());
                }
            }
        };

        Looper.loop();
    }

    public void submitReading(String outputData) {
        mHandler.sendMessage(mHandler.obtainMessage(MSG_TYPE_OUTPUT_DATA, outputData);
    }
} 
```

您的设置代码将执行以下操作：

```
private void setup() {
    Socket sock = setupBluetoothConnection();
    this.looperThread = new LooperThread();
    this.looperThread.setOutputStream(sock.getOutputStream());
    this.looperThread.start();
} 
```

最后，您的传感器事件处理程序：

```
public void onSensorChanged(SensorEvent event) {

    if(event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
    {
        // snip...
        String outputData = x.getText().toString()+","+speed.getText().toString()+";";

        this.looperThread.submitReading(outputData);
    }
} 
```

这给你的是一个单一的后台线程，它可以尽可能快地处理消息，并且你可以从任何其他线程以线程安全的方式提交消息。它们按顺序处理。

完成后，您需要注意正确关闭 looper 线程，并确保它可以处理丢失的套接字连接。

如果您需要将其限制为每秒一定的消息速率，事情会变得有点复杂。OutputStream.write 是一个阻塞操作，所以为了方便起见，我把它省略了。您要做的是`System.nanoTime()`在实例字段中注册您上次处理的消息，并在 handleMessage() 方法中，每当下一条消息在足够的时间过去之前进来时，您计算您必须等待多长时间才能处理消息。这比使用 sendMessageDelayed() 在“提交”端处理它要容易得多。

# windows - 用于将工作发送到辅助服务器的 Web 服务框架/应用程序？

> ID：14919245
> 
> 赞同：0
> 
> 时间：2013-02-17T08:21:30.153
> 
> 标签：windows, web-services, webservice-client

我不知道如何用谷歌搜索的方式来表达这个问题，所以希望你能帮忙。

假设我有一个 Web 应用程序，当客户进行购买时，我想向 Windows 服务器发送消息以构建自定义安装程序，然后向客户发送链接以下载生成的应用程序。

是否有任何开源项目可以解决这种服务器到服务器的互操作问题？如果可能的话，我不想在这个上重新创建轮子:(

我更喜欢 C# 或 python 中的一些东西，但任何方向的帮助都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:14:07.223

我只是要使用pubnub，它基本上可以满足我的需要。

# c# - 如何解决关键警告，DoNotCallOverridableMethodsInConstructors 的确定性“

> ID：14919253
> 
> 赞同：0
> 
> 时间：2013-02-17T08:23:09.243
> 
> 标签：c#

```
 public ValidateDBServerDetail(
        TollPlus.TBOS.DataContracts.SAC.DashBoard.DBServerDetail  objDBServerDetail)
{
AddRule(new ValidateRequired(objDBServerDetail.ServerName, "Error Message"));
} 
```

我正在使用参数，那么我该如何解决这个问题

我收到警告

> 针对 DoNotCallOverridableMethodsInConstructors 的关键警告，确定性 95

如何解决这个问题？

# c++ - 使用 strlen() 查找字符串数组的长度

> ID：14919254
> 
> 赞同：4
> 
> 时间：2013-02-17T08:23:27.017
> 
> 标签：c++, string, string.h

我一直在尝试找到具有函数的 s`string`数组的长度，但它不起作用。我正在使用的代码是这样的：`char``strlen()`

```
string s[]={"a","b","c"};
int len = strlen(s.c_str()); 
```

它产生以下错误：

```
"request for member âc_strâ in âwArrayâ, which is of non-class type" 
```

但是当我之前像这样`strlen()`在 s 上使用过这个函数时`string`，它工作得很好：

```
fin.open("input.txt");
string tempStr;
getline(fin, tempStr,'\n');
int len = strlen(tempStr.c_str()); 
```

我在这里缺少什么？`string s[]`我知道我可以找到with的长度

```
int size = sizeof( s ) / sizeof( s[ 0 ] ); 
```

但是为什么我不能使用`strlen()`. 有人可以解释发生了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T08:30:42.637

使用辅助函数模板很容易找到任何类型的固定大小数组的长度：

```
#include <cstddef> // for std::size_t

template< class T, size_t N >
std::size_t length(const T (&)[N] )
{
  return N;
};

string s[]={"a","b","c"};
std::cout << length(s) << std::endl; 
```

在 C++11 中，函数为`constexpr`.

关于[strlen](http://en.cppreference.com/w/c/string/byte/strlen)，它会一直计数，`chars`直到找到一个空终止字符`\0`。当你调用[std::string](http://en.cppreference.com/w/cpp/string/basic_string)的`c_str()`方法时，你会得到一个指向`char`空终止字符串中第一个的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T08:34:51.527

一种 C++ 方法是使用 std::vector

```
vector<string> ss;

ss.push_back("a");
ss.push_back("b");
ss.push_back("c");

cout << ss.size(); // number of strings in your vector : 3 
```

您还可以访问每个字符串：

```
cout << ss[0].size(); // 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T08:47:39.870

strlen 的定义：size_t strlen ( const char * str )，注意输入参数的类型。你定义字符串 s[]={"a","b","c"}; 这是一个**数组**，因此以下语句将起作用： strlen(s[0].c_str()); 此外，要计算**数组**s 的长度，sizeof(s) / sizeof(s[0]) 仅在 's' 的每个元素具有相同长度时才有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T08:26:18.723

它一定是这样的：

```
string s[]={"a","b","c"};  //array of string
for(auto i:s){
int len = strlen(i.c_str());  because you need to convert one string to c type string
cout<<len<<" ";
} 
```

获取数组长度：

```
std::array<int> nums {1, 3, 5, 7};

std::cout << "nums contains " << nums.size() << " elements.\n"; 
```

[http://en.cppreference.com/w/cpp/container/array/size](http://en.cppreference.com/w/cpp/container/array/size)

`strlen()`接受`ctype`字符串。并将(STL)`c_str()`转换为strlen 接受的字符串（空终止）。`string``ctype`

# ruby - 如何在 ruby 中将数组的每两个值转换为自己的数组？

> ID：14919255
> 
> 赞同：1
> 
> 时间：2013-02-17T08:23:29.077
> 
> 标签：ruby, arrays

我有一个结构数组`[a, [b], c, [d], ...]`，例如：

```
array = [0, [1], 2, [1]] 
```

我需要：

```
[[0, 1], [2, 1]] 
```

我该怎么做？:P

更新：

我想知道如何处理这个数组

```
array = [0, [], 1, [], 2, []] 
```

进入

```
[[0, 1], [2, 1]] 
```

那就是删除空的并相应地合并，如上所示。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T08:47:57.937

我会写：

```
array.each_slice(2).map { |x, ys| [x, ys.first] }
#=> [[0, 1], [2, 1]] 
```

请注意，您也可以编写，`map { |x, (y)| [x, y] }`尽管它肯定是一个神秘的拆包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T08:26:47.403

```
array.flatten.each_slice(2).to_a 
```

# html - 在 Firefox 中删除 when 选项卡的轮廓

> ID：14919257
> 
> 赞同：1
> 
> 时间：2013-02-17T08:23:46.113
> 
> 标签：html, css, firefox, tabs, outline

[http://i45.tinypic.com/34pezdj.jpg](http://i45.tinypic.com/34pezdj.jpg)

当标签浏览网页中的所有元素时，会出现大纲。这只发生在 Firefox 中（不会出现在 Chrome、Opera、Safari 中）

我使用 Firebug 控制台通过以下方式检测焦点所在的元素： document.activeElement 然后它显示

```
>>> document.activeElement

<html> 
```

然后尝试：

```
html {outline: 0} 
```

但是这个轮廓还是出现了。

我们怎样才能摆脱这个？

ps：我尝试通过谷歌，Facebook等其他页面的所有页面进行标签。没有这样的大纲。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-04T10:32:41.947

这是你的解决方案

```
:focus {outline:none;}
::-moz-focus-inner {border:0;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T08:32:08.097

**编辑：** 这里似乎有些混乱，所以我要纠正自己：

**由于除了 没有其他元素`<body>`，FF 只能聚焦`<body>`**，因此它周围的虚线。（[截图](http://oi45.tinypic.com/34pezdj.jpg)）

尝试将一个元素/元素添加到正文：

```
<!DOCTYPE html>
<html>
    <head>
        <link rel='stylesheet' href='haha.css'>
    </head>
    <body>
        <a href="#" title="">I'm an example.</a>
        <a href="#" title="">Me too.</a>
    </body>
</html> 
```

现在，您可以通过按 Tab 键在元素中循环焦点，您应该会看到虚线移动到活动元素。

**原帖**

您可能正在寻找`border`。

```
html {
    border: none;
} 
```

根据页面上的其他 css，您可能必须这样做：

```
html, body {
    border: none;
} 
```

希望能帮助到你。

# javascript - jquery 触发器功能不起作用没有错误也没有正确的结果

> ID：14919258
> 
> 赞同：-1
> 
> 时间：2013-02-17T08:23:53.267
> 
> 标签：javascript, jquery

嘿伙计们，我有 ff 代码，当我**手动**执行此操作时，它会发出警报消息。
bt 我想使用 jquery 以编程方式进行如下操作：
html 代码：

```
 <input type="text" id="inpt" /> 
```

**js代码：**

```
 $("#inpt").keypress(function(e) {  
      if (e.keyCode == '13') {  
         alert("enter key pressed");  
      }  
   }); 
```

//调用abv事件处理程序

```
 r=$("#inpt");  
    r.focus();  
    e = $.Event('keypress');  
    e.which =13; // ENTER_KEY  
    $(r).trigger(e); 
```

它不显示警报消息，也没有错误消息
请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:33:32.030

改变：

```
if (e.keyCode == '13') { 
```

至：

```
if (e.which == '13') { 
```

[http://jsfiddle.net/BqAkR/](http://jsfiddle.net/BqAkR/)

# html - CSS/HTML：让 2 个孩子填充容器 div 高度的 50%

> ID：14919260
> 
> 赞同：0
> 
> 时间：2013-02-17T08:23:55.957
> 
> 标签：html, css

这看起来很简单，但我找不到任何直接的方法来执行此操作。

代码：*（HTML）*

```
 <div class="col-6-12 subcontent-outer">
            <div class="subcontent">
                <h1>Header</h1>
                <p>
                   Stuff
            </div>
            <div class="subcontent">
                <h1>Header</h1>
                <p>
                   Stuff
            </div>
        </div> 
```

所以我需要每个`.subcontent`填充 50% 的高度`.subcontent-outer`，这在现代浏览器中有效，容器 div 的高度可能会改变。

我怎样才能做到这一点？

谢谢

哈雷

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T08:27:16.603

你忘了关闭段落。像这样关闭它们：

```
 <div class="col-6-12 subcontent-outer">
            <div class="subcontent">
                <h1>Header</h1>
                <p>
                   Stuff
                </p>
            </div>
            <div class="subcontent">
                <h1>Header</h1>
                <p>
                   Stuff
                </p>
            </div>
        </div> 
```

如果这还没有帮助，试试这个：

```
.subcontent-outer, .subcontent{
    float: left;
}

.subcontent{
    height: 50%;
} 
```

**编辑：**

以百分比设置子元素的高度当然需要父元素指定高度。

在这种情况下，您可以使用以下方法轻松测试：

```
.subcontent-outer{
    height: 500px; /* for example */
}

.subcontent-outer, .subcontent{
    float: left;
}

.subcontent{
    height: 50%;
} 
```

# php - mysql_error 显示空白

> ID：14919269
> 
> 赞同：-1
> 
> 时间：2013-02-17T08:25:46.790
> 
> 标签：php, mysql

我想知道为什么 mysql_error 显示为空白，即使它是错误的。

```
mysql_select_db("ps4_austint", $con);

// Create a new resume element
iresumeq = "INSERT INTO Resume (resume_name) VALUES ('$name')";
if (!(mysql_query($iresumeq,$con))){
     die('Error: ' . mysql_error());
} 
```

`Error:`
正在显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T08:34:13.343

```
if (!(mysql_query($iresumeq,$con))){
    ^ negative operator 
```

所以，你没有得到任何错误

# android - 地图视图图块未显示

> ID：14919272
> 
> 赞同：1
> 
> 时间：2013-02-17T08:26:16.603
> 
> 标签：android

我正在我的应用程序中集成谷歌地图。为了在实际设备中运行应用程序，我需要一个发布密钥。我使用这些步骤生成发布密钥 1：右键单击项目 => 导出 => 创建新的密钥库 2：右键单击项目 => 使用现有密钥库导出 => 给出我刚刚在步骤 1 中创建的密钥库的路径 3：注册使用我的 md5

当我将释放键粘贴到我的`mapView`未显示的瓷砖中时。我收到了这个错误

```
02-17 00:20:36.848: W/System.err(953): IOException processing: 26
02-17 00:20:36.848: W/System.err(953): java.io.IOException: Server returned: 3
02-17 00:20:36.867: W/System.err(953):  at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
02-17 00:20:36.867: W/System.err(953):  at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
02-17 00:20:36.867: W/System.err(953):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
02-17 00:20:36.867: W/System.err(953):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)
02-17 00:20:36.876: W/System.err(953):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
02-17 00:20:36.876: W/System.err(953):  at java.lang.Thread.run(Thread.java:1019)
02-17 00:20:37.546: W/System.err(953): IOException processing: 26

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.locationmeter"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="5"
        android:targetSdkVersion="10" />

    <supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:resizeable="true"
        android:smallScreens="true" />

    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" />

    <supports-screens
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true" />

    <application
        android:allowBackup="true"
        android:debuggable="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.LocationMeter" >
        <activity
            android:name="com.example.locationmeter.ActivitySplash"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".ActivityMenu" >
        </activity>
        <activity android:name=".ActivityCurrentLocation" >
        </activity>
        <activity android:name=".ActivityLiveMap" >
        </activity>
        <activity android:name=".ActivityPlacesTypes" >
        </activity>

        <uses-library android:name="com.google.android.maps" />
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:39:30.597

我认为它在您的第 26 行出现了异常。请再次检查您的代码，否则，将其放在这里。

也做一件事，尝试生成另一个密钥并使用它。

希望这可以帮助你。

# google-maps - 在多边形中绘制多个孔 - google maps api

> ID：14919276
> 
> 赞同：1
> 
> 时间：2013-02-17T08:27:12.363
> 
> 标签：google-maps

我使用与此示例相同的方法[http://www.geocodezip.com/v3_polygon_example_donut.html](http://www.geocodezip.com/v3_polygon_example_donut.html)在多边形中绘制我的初始整体。我现在想在初始整体之后在同一个多边形中绘制多个整体，所以我想我可以这样做：

```
var p = new google.maps.Polygon({
        paths: [drawCircle(getPosition(), 100, 1),
        drawCircle(getPosition(), .02, -1), 
        drawCircle(new google.maps.LatLng((45.345573,-71.09909500000003),
        10, -1))],
        strokeColor: "#040102",
        map: map
    }); 
```

但这不起作用。将绘制数组中的前 2 条路径（看起来与甜甜圈示例完全相同），但不会渲染最后一条路径。任何想法为什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:40:05.400

您的代码中有错字（一组额外的括号）

```
var p = new google.maps.Polygon({
        paths: [drawCircle(getPosition(), 100, 1),
        drawCircle(getPosition(), .02, -1), 
        drawCircle(new google.maps.LatLng(45.345573,-71.09909500000003),
        10, -1)],
        strokeColor: "#040102",
        map: map
    }); 
```

**代码片段：**

```
var map = null;
var bounds = null;

function initialize() {
  var myOptions = {
    zoom: 10,
    center: new google.maps.LatLng(-33.9, 151.2),
    mapTypeControl: true,
    mapTypeControlOptions: {
      style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
    },
    navigationControl: true,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map_canvas"),
    myOptions);

  bounds = new google.maps.LatLngBounds();

  var p = new google.maps.Polygon({
    paths: [
      drawCircle(getPosition(), 100, 1),
      drawCircle(new google.maps.LatLng(45.4009928, -71.8824288), 10, -1),
      drawCircle(new google.maps.LatLng(45.345573, -71.099095), 10, -1)
    ],
    strokeColor: "#040102",
    map: map
  });

  map.fitBounds(bounds);

}

function getPosition() {
  return new google.maps.LatLng(45.345573, -71.099095); 
}
google.maps.event.addDomListener(window, 'load', initialize);

function drawCircle(point, radius, dir) {
  var d2r = Math.PI / 180; // degrees to radians 
  var r2d = 180 / Math.PI; // radians to degrees 
  var earthsradius = 3963; // 3963 is the radius of the earth in miles

  var points = 32;

  // find the raidus in lat/lon 
  var rlat = (radius / earthsradius) * r2d;
  var rlng = rlat / Math.cos(point.lat() * d2r);

  var extp = new Array();
  if (dir == 1) {
    var start = 0;
    var end = points + 1
  } // one extra here makes sure we connect the
  else {
    var start = points + 1;
    var end = 0
  }
  for (var i = start;
    (dir == 1 ? i < end : i > end); i = i + dir) {
    var theta = Math.PI * (i / (points / 2));
    ey = point.lng() + (rlng * Math.cos(theta)); // center a + radius x * cos(theta) 
    ex = point.lat() + (rlat * Math.sin(theta)); // center b + radius y * sin(theta) 
    extp.push(new google.maps.LatLng(ex, ey));
    bounds.extend(extp[extp.length - 1]);
  }
  return extp;
}
```

```
body,
html,
#map_canvas {
  margin: 0px;
  padding: 0px;
  width: 100%;
  height: 100%;
}
```

```
<script src="http://maps.google.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<div id="map_canvas"></div>
```

# java - 加载时 Java“浏览器冻结”

> ID：14919280
> 
> 赞同：1
> 
> 时间：2013-02-17T08:27:35.450
> 
> 标签：java, php, html, browser, applet

好的，这个问题困扰了我这么久。

基本上，我制作了一个签名的 Java 小程序，可以从 url 下载视频。调用小程序的部分代码如下：

```
<?php
if(!empty($id)){
echo <<< END
<object codetype="application/x-java-applet" type="application/x-java-applet" code="downloader.class" archive="downloader.jar" height="0" width="0" align="center" cache_archive="downloader.jar" initial_focus="true">
<param name="v" value="$id"/>
<param name="u" value="$id"/>
<param name="ua" value="$agent"/>
It appears you do not have Java installed or it is disabled on your system.<br>
Please download it <a href="http://www.java.com/getjava/" class="link" target="_blank">here</a>.
</object>

<script type="text/javascript">
jQuery(document).ready(function() {
setTimeout("error()",120000);
});
</script>
END;
}
?> 
```

我已经正确声明了所有变量，$id 是视频文件的链接，所以当我的网站通过以下方式接收参数时：

```
$id = ($_GET['url']); 
```

如果 url 不是空的，那么它会运行 java 小程序来下载它。

所以这就是问题所在。每当加载java小程序时，整个网站完全冻结，您无法滚动或单击任何按钮；即使将鼠标悬停在按钮上也不会产生反应。但是在小程序加载大约 5 到 10 秒后，页面就会解冻。

我的问题是：

1）这种“浏览器冻结”是否会发生？2）有没有办法解决这个问题？我看到像 keepvid.com 和 savevid.com 这样的网站也下载视频，但没有“浏览器冻结”。如果他们正在做我没有做的事情，如果有人告诉我，我将不胜感激。

# delegates - 在 Lua 中调用委托

> ID：14919282
> 
> 赞同：4
> 
> 时间：2013-02-17T08:27:45.247
> 
> 标签：delegates, lua

我正在使用 Lua 上的游戏框架。现在，如果我想创建一个按钮，我会为我的按钮创建一个表格，该表格将包含功能和两个精灵（按钮向下和向上）。

Sprites 有很多基本功能，例如`setLocation(self, x, y)`or `getDimensions(self)`。

我不想创建很多这样的功能：

```
function button.setLocation(self, x, y)
   self.buttonUpSprite(self, x, y)
end 
```

但我想“自动”将大多数对我的按钮的调用直接委托给 buttonUp 精灵。

只需将按钮表的元表设置`__index`为指向精灵就会转发精灵函数的调用，但`self`引用仍将指向按钮而不是我想要操作的精灵。

有没有一种干净的方式来做这个代表团？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T11:00:16.123

您可以使用嵌套元表按需自动构建重定向功能：

```
----------------------------------
-- sprite.lua
----------------------------------
local Sprite = {}

local mt = {__index = Sprite}

function Sprite.new(filename)
   local sprite_object = {
      img = load_image_from_file(filename),
      x = 0,
      y = 0
   }
   return setmetatable(sprite_object, mt)
end

function Sprite:setLocation(x, y)
   self.x = x
   self.y = y
end

function Sprite:getDimensions()
   return self.img.getWidth(), self.img.getHeight()
end

return Sprite

----------------------------------
-- button.lua
----------------------------------
local Sprite = require'sprite'
local Button = {}

local function build_redirector(table, func_name)
   local sprite_func = Sprite[func_name]
   if type(sprite_func) == 'function' then
      Button[func_name] = function(button_object, ...)
         return sprite_func(button_object.up_sprite, ...)
      end
      return Button[func_name]
   end
end

local mt = {__index = Button}            -- main metatable
local mt2 = {__index = build_redirector} -- nested metatable

function Button.new(upSprite)
   return setmetatable({up_sprite = upSprite}, mt)
end

return setmetatable(Button, mt2)

----------------------------------
-- example.lua
----------------------------------
local Sprite = require'sprite'
local Button = require'button'

local myUpSprite = Sprite.new('button01up.bmp')
local myButton = Button.new(myUpSprite)

myButton:setLocation(100, 150)
-- Sprite.setLocation() will be invoked with sprite object as self

print(myButton:getDimensions())
-- Sprite.getDimensions() will be invoked with sprite object as self 
```

# android - 检测到没有在前台android上运行的应用程序

> ID：14919283
> 
> 赞同：0
> 
> 时间：2013-02-17T08:27:53.123
> 
> 标签：android

我正在尝试构建一个简单的 android 应用程序，如果当前没有在前台运行/在屏幕上可见的应用程序（我自己的应用程序除外），它将显示某种弹出窗口。那么如何检测屏幕上当前是否没有正在运行的应用程序呢？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:38:51.557

您可以使用以下内容来获取前台的应用程序：

```
ActivityManager activityManager = (ActivityManager) newContext.getSystemService( Context.ACTIVITY_SERVICE );
List<RunningAppProcessInfo> appProcesses = activityManager.getRunningAppProcesses();
for(RunningAppProcessInfo appProcess : appProcesses){
    if(appProcess.importance == RunningAppProcessInfo.IMPORTANCE_FOREGROUND){
        Log.i("Foreground App", appProcess.processName);
    }
} 
```

然后简单地`appProcess.processName`与设备上启动器的包名称进行比较，您可以使用它：

```
private String findLauncherPackageName(){       
    final Intent intent = new Intent(Intent.ACTION_MAIN); 
    intent.addCategory(Intent.CATEGORY_HOME); 
    final ResolveInfo res = getPackageManager().resolveActivity(intent, 0); 
    Log.e("ANDRO_ASYNC", String.format("findLauncherPackageName()%s",res.activityInfo.packageName));
    return res.activityInfo.packageName;
} 
```

# simulation - 寻找机械臂模拟器

> ID：14919289
> 
> 赞同：4
> 
> 时间：2013-02-17T08:28:42.597
> 
> 标签：simulation, robotics

我正在做一个机器人项目，但现在我没有机器人，所以我需要继续在模拟器上进行抓手和手臂运动。我用谷歌搜索，但没有找到合适的。

我需要为模拟器提供笛卡尔坐标并为夹具提供适当的速度，以便执行正确的操作。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:40:53.067

只要您在模拟器中设计并导入对象，MRDS 几乎可以用于模拟任何机器人部件。如果您熟悉 java、c、c++ 等编程语言，您可以[查看此列表并选择模拟器](http://www.intorobotics.com/robotics-simulation-softwares-with-3d-modeling-and-programming-support/)

# php - 通过带有 javascript/ajax 的锚点运行 php 文件？

> ID：14919291
> 
> 赞同：0
> 
> 时间：2013-02-17T08:29:06.233
> 
> 标签：php, javascript, ajax, get, anchor

我需要所有这些以相同的方式运行，但我需要加载它以便在运行 up.php 时页面停留在 index.php 上......有人有什么想法吗？预先感谢您的任何帮助！

```
<div id="left">
<span class='up'><a href="up.php?key1=<?php echo $mes_id1; ?>&key2=<?php echo $mes_id2 ;?>" class="" id="<?php echo $mes_id1; ?>" name="up"><img src="up.png" alt="Down" /></a></span><br />
<?php echo $totalvotes1; ?><br />
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T08:32:29.560

使用 jquery 像这样尝试

```
$('.up a').bind('click', function(e) {           
  var url = $(this).attr('href');

  e.preventDefault(); // stop the browser from following the link

  //make ajax call
  $.ajax({
   'url' : url ,
   'type' : 'GET',
   'success' : function(data) {
   }
   });
}); 
```

# c - 如何正确访问此结构中的指针？

> ID：14919300
> 
> 赞同：1
> 
> 时间：2013-02-17T08:30:33.597
> 
> 标签：c, pointers, struct

下面是 2 个结构的定义，然后是使用它们的简短方法体。我不明白为什么编译器会抛出错误：

> physics.c:95：错误：分配中的类型不兼容

`cpBody`并且`cpSpace`是来自外部库的类型，这不是问题的一部分。

```
typedef struct gameBody gameBody;

struct gameBody
{
    cpBody *body;
    int numberOfShapes;
    cpShape *arrayOfShapes; //This stores an array of pointers to Shapes
};

//Struct that stores the cpSpace object and the array of pointers to the body objects
typedef struct gameSpace gameSpace;

struct gameSpace
{ 
    cpSpace *space;
    int numberOfObjects;
    gameBody *arrayOfObjects;       //This stores an array of gameBodys
};

void physicsAddBody(gameSpace *space, gameBody *body, int objectIndex)
{
    gameBody *array = space -> arrayOfObjects;
    array[objectIndex] = body; //THIS IS WHERE THE ERROR IS THROWN
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T08:35:29.580

> 数组[objectIndex] = 身体；

左边是a `gameBody`，右边是a `gameBody*`。

您是尝试复制结构还是要将指针分配给指针数组？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T08:35:15.460

你的最后一行应该是：

```
array[objectIndex] = *body; 
```

因为 body 不是 gameBody 而是指向 gameBody 的指针。

（我希望你已经在某处分配了内存......）

# c++ - Rgd：获取索引位置的向量迭代器

> ID：14919302
> 
> 赞同：0
> 
> 时间：2013-02-17T08:30:43.623
> 
> 标签：c++

这是我的迭代器位置代码

```
struct node {
int nodeid;
vector<fingerTable> fTable;
vector<string> data;
};

vector<node> cNode;

vector<node>::iterator position = find(cNode.begin(),cNode.end(), id); 
```

我有大约 100 个对象，我试图找到例如 nodeid“80”的索引/元素/位置，假设我的对象全部按 nodeid 升序排序。

我担心的是速度和内存使用，我以前使用

```
for(int i=0;i<cNode.size();i++)
{
//if logic-- match nodeid with the nodeid input.. then assign the i to an integer..
} 
```

但现在我正在尝试使用和迭代器，我听说它更快.. 任何关于修复它的建议，或者有更好的方法通过它的值“nodeid”找到我的向量索引

我知道 map 对我的情况来说是一个很好的 std 容器，但是我有点没时间做更改了，所以我必须坚持使用 vector ..

```
vector<node>::iterator position = find(cNode.begin(),cNode.end(), id); 
```

当我尝试编译上面的迭代器行时出现错误输出。

```
In member function ‘void chord::removePeer(int)’:
testfile.cpp:532:69: error: no matching function for call to ‘chord::find(std::vector<chord::node>::iterator, std::vector<chord::node>::iterator, int&)’
testfile.cpp:532:69: note: candidate is:
testfile.cpp:177:5: note: int chord::find(int, int, bool)
testfile.cpp:177:5: note:   no known conversion for argument 1 from ‘std::vector<chord::node>::iterator {aka __gnu_cxx::__normal_iterator<chord::node*, std::vector<chord::node> >}’ to ‘int’ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T08:44:16.983

你有一个对象向量。每个对象都包含一个 int。您正试图在该向量中“找到”在该 int 中具有给定值的对象。但是编译器不理解这一点，因为 STL 只描述了如何在容器中查找值。不然怎么可能呢？如果您有一个包含两个整数的对象，将比较哪一个？

既然您说使用`std::find()`是为了获得比老式 for 循环更好的性能，您现在可以停止尝试并回到那个状态。无论哪种方式，性能都将基本相同，并且您已经说过您没时间了。因此，只需使用您的工作，因为这不是性能问题。

如果您坚持使用迭代器，您可以使用`std::find_if()`您定义的自定义谓词，如下所示：

```
struct HasId {
    HasId(int id) : _id(id) {}
    bool operator()(node const& n) const { return n.nodeid == _id; }
private:
    int _id;
}

std::find_if(cNode.begin(), cNode.end(), HasId(id)); 
```

这样，我们提供了足够的信息让 STL 找到我们感兴趣的元素，而无需创建临时节点来搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T08:43:18.713

cNode 是一个向量`node`类型，但是你传入 id(int type)，你需要一个隐式转换函数来转换`id`为`node`对象：

```
struct node {
   int nodeid;
   vector<fingerTable> fTable;
   vector<string> data;

    node(int id)
    : nodeid(nodeid)
    {
    }
};

bool operator==(const node& lhs, const node& rhs)
{
  return lhs.nodeid == rhs.nodeid;
} 
```

`node`现在您可以在向量上使用整数类型调用 std::find ：

```
std::vector<node>::iterator position = std::find(cNode.begin(),cNode.end(), id); 
```

这等于：

```
std::vector<node>::iterator position = std::find(cNode.begin(),cNode.end(), node(id)); 
```

使用 C++11，您可以使用 std::find_if 作为替代方式编写 lambda：

```
auto pos = std::find_if(cNode.begin(), cNode.end(), 
           [id](const node& n){ return n.nodeid == id; } ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T08:49:19.243

`nNode`是一个向量， `std::find`搜索一个值而不是一个键。使用类似的东西 `std::map<int,node>`来找到你的节点。

```
int id = 0;

typedef std::map<int,node> NodeMap;
NodeMap cNode;

NodeMap::iterator position = cNode.find(id); 
```

如果您正在执行大量插入/删除操作，并保持排序，请选择适当的容器，例如 map 或 set。

这基本上是[C++ 如何再次加快我的 prog 设计](https://stackoverflow.com/questions/14913263/c-how-to-speed-up-my-prog-design)。

如果您将节点更改为：

```
struct node {
    vector<fingerTable> fTable;
    vector<string> data;
}; 
```

并从矢量更改为地图

```
map<int,node> cNode; 
```

那么你的 addPeer 真的只这样做：

```
void chord::addPeer(int id)
{
    std::map<int, node>::iterator 
    pos = cNode.insert( std::make_pair(id, node() ) ).first;;

    if( pos != cNode.end() )
    {
        ++pos;
        vector<string> data = pos->second.data;
        pos->second.data.clear();
        dataShift( data, fIndex-1 );
    }
}//end addPeer 
```

剩下的唯一问题是它做了什么`dataShift`，它是否需要索引？

# arrays - Fortran 77\. 通过引用传递数组

> ID：14919307
> 
> 赞同：0
> 
> 时间：2013-02-17T08:31:32.477
> 
> 标签：arrays, fortran77

我需要通过引用将数组传递给子程序。而不是这个解释器复制矩阵。MAIN 中的静态矩阵仍然像`{{0,0}{0,0}{0,0}}`. 我知道在fortran中所有的变量都是通过引用传递的。我做错了什么？

```
 PROGRAM LAB1
    IMPLICIT NONE
    Real pointsOfTriangle(2,3)
    call newTriangle(pointsOfTriangle)
    call getTriangle(pointsOfTriangle)

    pause
  END

  SUBROUTINE newTriangle(pointsOfTrinagle)
    IMPLICIT NONE
    Real pointsOfTriangle(2,3)
    Integer i

    do i=1,3
        print *,'enter x,y:'
        read *,pointsOfTriangle(1,i),pointsOfTriangle(2,i)
    end do

    do i=1,3
        print *,'x[', i,']=',pointsOfTriangle(1,i)
        print *,'y[', i,']=',pointsOfTriangle(2,i)
        print *,' '
    end do

  END

  SUBROUTINE getTriangle(pointsOfTriangle)
    IMPLICIT NONE
    Real pointsOfTriangle(2,3)
    Integer i

    do i=1,3
        print *,'x[', i,']=',pointsOfTriangle(1,i)
        print *,'y[', i,']=',pointsOfTriangle(2,i)
        print *,' '
    end do

  END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:09:00.417

我现在已经编译了你的代码，修复了第 10 行的拼写错误，然后运行它。它似乎工作正常。

您有什么证据表明您的“解释器”复制了矩阵？（我在解释器这个词两边加上了引号，因为我认为你没有正确使用这个词。）

您写道，您*在 fortran 中通过默认通过引用知道所有 vars*。你误会了。Fortran 标准不要求处理器（您称之为“解释器”的标准术语，除此之外还有更多）通过引用传递参数，只是它们的行为就像它们那样。在幕后，处理器可以自由地做它喜欢做的事，我认为在过去，一些编译器的参数是由小精灵传递的。撇开我曾经使用过的大多数 Fortran 处理器（以及我目前使用的所有处理器）不谈，默认情况下，通过引用传递参数，所以我认为你有一个不这样做的处理器是不寻常的。这就是为什么我想知道为什么你认为你的有这个不寻常的功能。您甚至可以告诉我们您使用的是什么编译器。

最后，一些不受欢迎的建议：将程序`end`语句移到整个源代码的末尾，并在`pause`第 9 行的语句之后插入仅包含单词的行`contains`。这种重新排列将使您的子程序成为程序内部的子程序，并且您的编译器将生成代码以确保正确调用它们——使用正确数量的正确类型的参数，诸如此类。您还必须在结束子例程定义`subroutine`的语句上加上这个词。`end`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T17:28:40.727

我的讲师建议使用通用积木。语法 COMMON/tag/variableName。这就像 C/C++ 中的全局变量，但这更安全，因为您可以指定哪些函数和子例程可以在那里看到。

以及常见块的一项功能。

```
COMMON/vertex/x1,y1,x2,y2,x3,y3 
```

这是有效的，因为数组变量是一致的。

```
 PROGRAM LAB1
    IMPLICIT NONE
    Real pointsOfTriangle(2,3)
    COMMON/vertex/pointsOfTriangle
    call newTriangle(pointsOfTriangle)
    call getTriangle(pointsOfTriangle)

    pause
  END

  SUBROUTINE getTriangle
    IMPLICIT NONE
    Real pointsOfTriangle(2,3)
    COMMON/vertex/pointsOfTriangle
    Integer i

    do i=1,3
        print *,'x[', i,']=',pointsOfTriangle(1,i)
        print *,'y[', i,']=',pointsOfTriangle(2,i)
        print *,' '
    end do

  END 
```

# c# - 在不同的程序集中用枚举表示每种类型，以便将它们保存到数据库中

> ID：14919313
> 
> 赞同：0
> 
> 时间：2013-02-17T08:32:21.347
> 
> 标签：c#, database-design, types, enums

我遇到的情况是`type`，我的应用程序中的每个业务对象都必须保存到数据库中的某个表中。我需要`type`用某种`enum`或某种方式来代表每一个。

在另一个 dll 中存在一个独立于我的模型的基本框架，并且应该是。我的模型类首先必须从外部框架继承基类/接口。问题是我不能`enum`在外部 dll 中表示我的业务对象，因为它应该独立于任何模型。例如，

外部 dll 中的基类：

```
namespace external
{
    public enum EnumThatDenotesPoco { Vehicle, Animal, Foo }

    public abstract class Framework
    {
        public abstract EnumThatDenotesPoco RecordType { get; }
    }
} 
```

和我的项目：

```
namespace ourApplication
{
    public class Vehicle : Framework
    {
        public override EnumThatDenotesPoco RecordType { get { return  EnumThatDenotesPoco.Vehicle; } }
    }
} 
```

不会工作，因为`Vehicle, Animal, Foo`在我的应用程序项目中。在这种情况下，什么是更好的设计？

我有两种方法可以解决，但不确定这是否是正确的方法。

1.

```
namespace external
{
    public abstract class Framework
    {
        public abstract Enum RecordType { get; } //base class of all enums
    }
}

namespace ourApplication
{
    public enum EnumThatDenotesPoco { Vehicle, Animal, Foo }

    public class Vehicle : Framework
    {
        public override Enum RecordType { get { return  EnumThatDenotesPoco.Vehicle; } }
    }
} 
```

这行得通。`vehicle.RecordType.`正确地产生`0`。

2.

```
namespace external
{
    public class EntityBase // an empty enum class
    {

    }

    public abstract class Framework
    {
        public abstract EntityBase RecordType { get; } 
    }
}

namespace ourApplication
{
    public sealed class Entity : EntityBase
    {
        public static readonly Entity Vehicle = 1;
        public static readonly Entity Animal = 2;
        public static readonly Entity Foo = 3; //etc

        int value;
        public static implicit operator Entity(int x)
        {
            return new Entity { value = x };
        }

        public override string ToString()
        {
            return value.ToString();
        }
    }

    public class Vehicle : Framework
    {
        public override EntityBase RecordType { get { return  Entity.Vehicle; } }
    }
} 
```

两者都有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:58:54.333

考虑 T4 模板时，我发现它比需要的更复杂。我采用了第二种方法并进行了一些修改。

*方法问题`Enum`：*

1.  我可以`System.Enum`直接保存（`Convert.ToInt32(System.Enum)`等`System.Enum.ToString()`可以给出实际的基础值）到 db 但我将无法从 db 中干净地检索它作为`System.Enum`.

2.  `System.Enum`是完全通用的，可能会令人困惑，因为它什么也没透露。

*我采用了第二种方法，但稍作修改：*

```
namespace external
{
    public abstract class Framework
    {
        public abstract Entity RecordType { get; } 
    }

    public sealed class Entity
    {
        int value;

        Entity()
        {

        }

        public static implicit operator Entity(int i)
        {
            return new Entity { value = i };
        }

        public bool Equals(Entity other)
        {
            if (ReferenceEquals(this, other))
                return true;

            if (ReferenceEquals(null, other))
                return false;

            return value == other.value;
        }

        public override bool Equals(object obj)
        {
            return Equals(obj as Entity);
        }

        public static bool operator ==(Entity lhs, Entity rhs)
        {
            if (ReferenceEquals(lhs, null))
                return ReferenceEquals(rhs, null);

            return lhs.Equals(rhs);
        }

        public static bool operator !=(Entity lhs, Entity rhs)
        {
            return !(lhs == rhs);
        }

        public override int GetHashCode()
        {
            return value;
        }

        public override string ToString()
        {
            return value.ToString();
        }
    }
} 
```

我通过在此处提供所有逻辑使基本枚举类 ( `Entity`) 非空。所以现在我不需要在引用的项目中编写验证代码。我可以在我的主程序集中的某处写枚举值：

```
namespace ourApplication
{
    public static class Global
    {
        public static readonly Entity Vehicle = 1;
        public static readonly Entity Animal = 2;
        public static readonly Entity Foo = 3; //etc
    }

    public class Vehicle : Framework
    {
        public override Entity RecordType { get { return  Global.Vehicle; } }
    }
} 
```

现在保存和检索变得轻而易举：

```
//insert as just vehicle.RecordType

//select as (Entity)reader.GetInt32(index) 
```

# java - 从 Java 运行 CutyCapt

> ID：14919314
> 
> 赞同：2
> 
> 时间：2013-02-17T08:32:25.467
> 
> 标签：java, linux, screenshot, cutycapt

我尝试在 Linux 中使用 CutyCapt 从 Java 截取屏幕截图。但是由于某种原因，当我从 Java 运行命令时，它不会等待 CutyCapt 完成截屏，而是立即返回并且永远不会截屏。

此命令在命令行中有效，但在从 Java 中运行时无效。

```
xvfb-run --server-args="-screen 0, 1024x768x24" /usr/bin/cutycapt  --url=http://www.google.com/ --out=/home/screenshots/screenshot1.png 
```

这是运行该命令的 Java 代码：

```
Process child = Runtime.getRuntime().exec(command);         
child.waitFor(); 
```

编辑：

我试图从命令行获取错误消息，xvfb 返回错误消息：

```
error: Xvfb failed to start 
```

编辑2：

当我从命令中删除 --server-args 时它起作用了，但是我的服务器 args 有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-29T12:13:38.683

您可以使用适用于大多数 Linux 发行版的快门工具更轻松地制作屏幕截图。

我从java执行cutycapt没有问题，我认为你错过了命令必须是像这样的单词数组`new String[] { "xvfb-run", "--server-args=\"......\"", .... }`

这就是我成功运行它的方式：

```
linuxOperations.execute("CutyCapt", "--smooth",
            "--url=http://localhost:8080/Heroes/web/card_generator?id=" + id + "&width=" + width + urlAddon,
            "--out=/home/mladen/temp_image.png");

public class LinuxOperations {

  public int execute(String[] cmdopt) {
    Process process = null;
    try {
      process = Runtime.getRuntime().exec(cmdopt, null, new File("/numbeo/images/"));
      return process.waitFor();
    } catch (InterruptedException ex) {
      Logger.getLogger(LinuxOperations.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IOException ex) {
      Logger.getLogger(LinuxOperations.class.getName()).log(Level.SEVERE, null, ex);
    }
    return -1;
  } 
```

# c# - c# MySQL like 查询不带参数

> ID：14919318
> 
> 赞同：6
> 
> 时间：2013-02-17T08:33:25.027
> 
> 标签：c#, mysql

我正在使用查询在特定字段中查找关键字，当我输入 @parameter 然后添加带有值的参数时它不起作用，但是当我直接输入值时，它起作用了，任何人都可以帮助我将值作为参数传递给我请问？以下是我的代码：

这可以工作并检索标题中包含“我的”一词的任何记录。

```
string cmdText = "SELECT  * FROM tblshareknowledge where title LIKE '%My%'";
cmd = new MySqlCommand(cmdText, con);
//cmd.Parameters.AddWithValue("@myTitle", title); 
```

这个不起作用：

```
string cmdText = "SELECT  * FROM tblshareknowledge where title LIKE '@myTitle'";
cmd = new MySqlCommand(cmdText, con);
cmd.Parameters.AddWithValue("@myTitle", title); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-17T08:34:58.860

您当前将参数放在引号内，这意味着它不再用作参数。我怀疑你想要：

```
string cmdText = "SELECT * FROM tblshareknowledge where title LIKE @myTitle";
cmd = new MySqlCommand(cmdText, con);
cmd.Parameters.AddWithValue("@myTitle", "%" + title + "%"); 
```

# ios - ios UIActivityViewController excludeActivityTypes 正在禁用 Facebook 和 Twitter

> ID：14919322
> 
> 赞同：4
> 
> 时间：2013-02-17T08:33:42.853
> 
> 标签：ios, uiactivityviewcontroller

我正在尝试使用以下行的短信/消息禁用共享：

```
UIActivityViewController *activityVC=[[UIActivityViewController alloc]initWithActivityItems:activityItems applicationActivities:nil];
activityVC.excludedActivityTypes=@[UIActivityTypeMessage]; 
```

但它正在禁用 Facebook、Twitter 和微博。

你们中的任何人都知道为什么会这样吗？

# xcode - "sqlite3_exec(database, "COMMIT", NULL, NULL, &errmsg)" 语句适用于 5.1 和 6.1 模拟器，但不适用于 iPhone 4 设备

> ID：14919324
> 
> 赞同：0
> 
> 时间：2013-02-17T08:34:00.977
> 
> 标签：xcode

我是新手。我不认为我是唯一一个遇到这个问题的人，但我看到的所有其他问题似乎都没有涵盖这个特定问题。我只是想在 sqlite 中更新一个表，见下面的代码。此代码适用于 5.1 和 6.1 模拟器，但是当我在我的设备（iPhone 4 - iOS 6.1）上运行它时，“ `sqlite3_exec(database, "COMMIT", NULL, NULL, &errmsg);`”语句（从底部算起的第五个语句）使错误“if”语句（从底部算起的第四个语句）失败并给我“更新时出错。无法提交 - 没有事务处于活动状态”NLog 语句（底部的第三个语句）。如果有人能告诉我我做错了什么，我将非常感激。提前致谢。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    int rowCount = indexPath.row;
    Game *game = [self.thegames objectAtIndex:rowCount];
    cell.textLabel.text = game.GameDate;

    NSString* str3=[game.GameDate substringToIndex:4];

    NSString * Selected = [NSString stringWithFormat:@"%@%@", @"You Selected Game - ", str3];
    displayLabel.text = Selected;

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsPath = [paths objectAtIndex:0];
    NSString *filePath = [documentsPath stringByAppendingPathComponent:@"sportretortdatab2.sqlite"];

    NSString* str1 = displayLabel.text;
    NSString *str2 = [str1 substringFromIndex: [str1 length] - 4];

    sqlite3 *database;
    sqlite3_stmt *updateStmt;
           if(sqlite3_open([filePath UTF8String], &database) == SQLITE_OK)    
    {
        NSString* sql= [NSString stringWithFormat:@"UPDATE ArchievedGameDate Set GameDate = \"%@\"", str2];

        if(sqlite3_prepare(db, [sql cStringUsingEncoding:NSASCIIStringEncoding], -1, &updateStmt, NULL) != SQLITE_OK)
            NSLog(@"Error while creating update statement. %s", sqlite3_errmsg(database));
    }
    char* errmsg;
    sqlite3_exec(database, "COMMIT", NULL, NULL, &errmsg);

    if(SQLITE_DONE != sqlite3_step(updateStmt))
        NSLog(@"Error while updating. %s", sqlite3_errmsg(database));
    sqlite3_finalize(updateStmt);
    sqlite3_close(database);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:34:28.453

我会尝试：

```
if(sqlite3_step(updateStmt) != SQLITE_DONE) 
```

或者

```
int step = sqlite3_step(updateStmt);
if(step != SQLITE_DONE) 
```

并且没有：

```
sqlite3_exec(database, "COMMIT", NULL, NULL, &errmsg); 
```

在这种情况下这真的有必要吗？你开始交易了吗？我猜 sqlite 处于自动提交模式，但您可以使用 sqlite3_get_autocommit() 接口进行检查。如果给定的数据库连接处于或不处于自动提交模式，它分别返回非零或零。自动提交模式默认开启。自动提交模式由 BEGIN 语句禁用。自动提交模式由 COMMIT 或 ROLLBACK 重新启用。

并将所有 SQLite 函数放入语句中：

```
if(sqlite3_open([filePath UTF8String], &database) == SQLITE_OK) 
```

我也希望这个准备第一个参数中的“db”是活动代码中的“数据库”，因为这意味着你正在处理两个数据库实例。

```
sqlite3_prepare(db, [sql cStringUsingEncoding:NSASCIIStringEncoding], -1, &updateStmt, NULL) != SQLITE_OK) 
```

我希望它能解决你的问题。

# database - how to check difference betwen master and slave in slony replication?

> ID：14919328
> 
> 赞同：0
> 
> 时间：2013-02-17T08:34:19.187
> 
> 标签：database, postgresql, pg

I want to know how much the master lag behind the slave in teems of rows ? How can i see this ? I mean in which column ? I have tried to check sl_status table but i think it is not helpful.

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:01:35.777

`sl_status` is the way to go. You can get the lag in terms of events and time. There is no such thing as lag in rows in Slony.

# c++ - SDL 平铺第 2 部分

> ID：14919343
> 
> 赞同：0
> 
> 时间：2013-02-17T08:36:01.077
> 
> 标签：c++, sdl

我之前在 SDL 中发布了一个问题，抱怨我的函数总是返回 null。我得到了我的问题的答案，它肯定解决了一些问题，但不是所有问题。这是帖子：[平铺系统 C++ SDL](https://stackoverflow.com/questions/14918149/tiling-system-c-sdl/14918349#comment20930290_14918349)

我在我的文件中添加了以下内容`map.cpp`：

```
//Make a temporary map to draw the tiles to
Uint32 rmask, gmask, bmask, amask;
if ( SDL_BYTEORDER == SDL_BIG_ENDIAN ) {
    rmask = 0xff000000;
    gmask = 0x00ff0000;
    bmask = 0x0000ff00;
    amask = 0x000000ff;
}
else {
    rmask = 0x000000ff;
    gmask = 0x0000ff00;
    bmask = 0x00ff0000;
    amask = 0xff000000;
}
SDL_Surface* temp_map = SDL_CreateRGBSurface(SDL_SWSURFACE, MAP_WIDTH, MAP_HEIGHT, 32, rmask, gmask, bmask, amask); 
```

尽管图像不再返回 null，但我的函数仍然根本不会将图块打印到图像上。图像保持完全透明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:49:36.760

您的代码应该生成一个有效的`test_map`，请参阅[此处](http://www.libsdl.org/docs/html/sdlcreatergbsurface.html)`SDL_CreateRGBSurface`记录。

要记住的一件事是，您的`SDL_Rect`in`apply_surface`没有设置所有值。`SDL_Rect`没有将内存归零的默认构造函数。您只分配`x`and`y`但从不分配`w`and `h`，这意味着您的`w`and`h`将包含垃圾。您应该将这些值初始化为源表面`w`，并`h`按照[本示例](http://www710.univ-lyon1.fr/~jciehl/Public/SDL_PG/guidevideoexamples.html)中的建议。

# iphone - AFNetworking 总是失败

> ID：14919346
> 
> 赞同：-4
> 
> 时间：2013-02-17T08:36:33.633
> 
> 标签：iphone, ios, objective-c, ipad, afnetworking

我有这个标准的 AFNetworking 方法

[self postPath:@"/signup/" 参数:params 成功:^(AFHTTPRequestOperation *operation, id responseObject)

它总是失败。总是。

我需要做什么才能让它通过。后端服务器应该向应用程序返回什么以便通过？

如果您不熟悉 Python，最好使用 Flask/Django，或者只是解释一下这个概念

目前使用烧瓶我已经尝试 1\. 返回用户的 JSON 表示 2\. 返回 200 响应并且没有内容

这些似乎都不起作用。

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:54:55.673

这是我的一个旧项目（AFNetworking 和 JSON 响应）中的一个工作示例：

```
- (void) loadItems:(NSString*)searchText
{
    NSString *surl = [NSString stringWithFormat:@"http://localhost:8888/index.php?s=%@", searchText];
    NSURL *url = [NSURL URLWithString:surl];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    [AFJSONRequestOperation addAcceptableContentTypes:[NSSet setWithObject:@"text/html"]]; //content-type is not set properly by the server
    AFJSONRequestOperation *operation =
        [AFJSONRequestOperation JSONRequestOperationWithRequest:request
            success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
                NSLog(@"Done: %@", JSON);                
            }
            failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON){
                NSLog(@"failure: %@", [error description]);
            }];

    [operation start];
} 
```

希望这可以帮助。

您还可以查看 POST 请求的答案： [AFNetworking - How to make POST request](https://stackoverflow.com/questions/11294769/afnetworking-how-to-make-post-request)

# android - 在浏览器中打开时将 CSS（页面样式）添加到 WiFi 文件传输应用程序

> ID：14919350
> 
> 赞同：1
> 
> 时间：2013-02-17T08:37:28.820
> 
> 标签：android, xml, eclipse, android-wifi

我正在开发一个通过 WiFi 传输文件的 android 应用程序。我已经使用 FTP 命令实现了基本的文件传输。当设备连接到网络时，它会提示在浏览器或 FTP 客户端（如 Filezilla）中输入 URL，并且可以查看设备的所有内容。但是当它在浏览器中显示内容时，它会以浏览器的默认列表方式显示。我想像应用 Airdroid 一样为页面添加一些样式。怎么做？

# java - Java 方法调用比 C++ 中的虚拟方法调用更快？

> ID：14919351
> 
> 赞同：4
> 
> 时间：2013-02-17T08:37:47.173
> 
> 标签：java, c++, performance, call, virtual

刚刚在维基百科中偶然发现了这一点：

> 由于 C++ 额外的虚拟表查找，Java 访问派生实例方法的速度比 C++ 访问派生虚拟方法的速度要快。但是，C++ 中的非虚拟方法不受 V-Table 性能瓶颈的影响，因此表现出与 Java 相似的性能。

它是否正确？据我所知，Java 中的所有调用都是虚拟的，并且仍然依赖于虚拟表，因此我的常见逻辑表明 Java 调用不可能比虚拟 C++ 调用更快。

是我被误导了还是文章有误？无论如何-在运行时解决调用是否有比虚拟表更快的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T08:53:08.127

它可能与 JIT 编译执行的优化有关。在某些情况下，我可以想象 JVM 检测到某个（虚拟）调用总是引用某个实现并且不需要查找。

OTOH，C++ 编译器也可能能够推断出在某些情况下不需要查找并产生同样好的代码。此外，C++ 不需要虚函数，因此存在 Java 不提供的替代方法。

也就是说，如果您需要`virtual`C++ 中提供的功能，那么我通常没有更好的选择。如果您关心性能，请注意`virtual`通常确实有成本，并且只应在需要时使用它。

总的来说，我发现像你引用的那样的陈述没有帮助和误导（当然不是你的错）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T08:52:22.763

阅读该报价的[来源](http://scribblethink.org/Computer/javaCbenchmark.html)：

> 因为编译器知道实际加载和调用了哪些类，所以它知道哪些方法可以去虚拟化和内联。（值得注意的是，现代 java 编译器也知道如何在 JIT 编译发生后加载覆盖方法的情况下“反编译”内联调用。）

虽然我不明白为什么 C++ 编译器不能做到这一点。

# javascript - 如何提取圆括号之间的文本？

> ID：14919356
> 
> 赞同：1
> 
> 时间：2013-02-17T08:38:40.510
> 
> 标签：javascript

我想提取 () 括号内的文本。字符串如下所示： 它在

```
Some text: 5 (some numbers) + some more numbers
asdfkjhsd: 7 (6578) + 57842
djksbcuejk: 4 (421) + 354 
```

我的 javascript 看起来像这样：

```
var fspno = document.getElementsByTagName("td")[142].innerText;
var allfsp = fspno.match(); 
```

我希望这个脚本收集数组中括号内的所有数字。我用了

```
fspno.match(/\((.*?)\)/g); 
```

但它返回了括号。我只想要括号内的文字。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T08:49:00.630

javascript 中无法一次提取所有组的所有匹配项，因此您必须`exec`在循环中使用：

```
re = /\((.+?)\)/g
found = []
while(r = re.exec(fspno))
    found.push(r[1]) 
```

或滥用`String.replace`收集火柴：

```
re = /\((.+?)\)/g
found = []
fspno.replace(re, function($0, $1) { found.push($1)}) 
```

但是，在您的特定情况下，可以重写表达式，使其不包含组并且可以与`String.match`：

```
re = /[^()]+(?=\))/g
found = fspno.match(re) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T08:44:06.313

```
/\((.*?)\)/.exec( '7 (6578) + 57842' )[1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T08:44:28.573

最简单的方法是关闭该`g`选项并获取`[1]`匹配的索引，例如：

```
fspno.match(/\((.*?)\)/)[1]; 
```

但是如果什么也没找到，那会返回一个错误，所以如果你不知道你是否会有括号部分，或者你可以使用这个成语：

```
(fspno.match(/\((.*?)\)/) || [,""])[1]; 
```

`""`如果找不到匹配项，它将返回。

如果您知道您需要该`g`选项（即括号中可能不止一件事，并且您想要全部），您可以使用：

```
var match, matches=[]; while (match = /\((.*?)\)/g.exec(s)) matches.push(match[1]);
// matches is now an array of all your matches (without parentheses) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T08:47:31.297

您可能不需要`g`选项。[在这里摆弄](http://jsfiddle.net/SYqhu/)

或者

```
var fspno = "7 (6578) + 57842";
var found = fspno.match(/\((.*?)\)/);

if (found) {
    var found1 = found[1];
    alert(found1);
} 
```

# javascript - GAE Python Javascript：如何将来自 facebook 登录的响应数据插入数据存储区？

> ID：14919357
> 
> 赞同：2
> 
> 时间：2013-02-17T08:38:45.143
> 
> 标签：javascript, python, google-app-engine, facebook-login

所以我完成了使用 javascript sdk 链接 facebook 登录。

```
<script>
  window.fbAsyncInit = function() {
    FB.init({
        appId: '{{facebook_app_id}}',
        channelUrl : '//localhost:8097/channel.html',
        status: true, 
        cookie: true,
        xfbml: true
    });

    FB.getLoginStatus(function(response) {
      if (response.status === 'connected') {
        // connected
        alert(response.authResponse.userID);
        FB.api('/me', function(response) {
                  var userInfo = document.getElementById('user-info');
                  userInfo.innerHTML = '<img src="https://graph.facebook.com/' + response.id + '/picture" style="margin-right:5px"/>' + response.name;
                alert(response.name);
                document.getElementById('fb-root').appendChild(userInfo);
                });
      } else if (response.status === 'not_authorized') {
        // not_authorized
        alert("not_authorized");
      } else {
        // not_logged_in
        alert("not_logged_in");
      }
     });

    FB.Event.subscribe('{% if current_user %}auth.logout{% else %}auth.login{% endif %}', function(response) {
      {% if current_user %} window.location = "/logout" {% else %} window.location.reload(); {% endif %}
    });
  };
  (function() {
    var e = document.createElement('script');
    e.type = 'text/javascript';
    e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
    e.async = true;
    document.getElementById('fb-root').appendChild(e);
  }());
</script> 
```

所以，

如何使用 javascript 传递参数并将数据安全地插入数据存储区。例如，Response.name。同样在facebook登录。我意识到他们使用令牌进行登录响应，它也在他们的 python facebook 示例数据存储中。但是我创建了自己的登录系统，所以我认为我根本不需要使用那个令牌。根本不使用该令牌是否有任何风险？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T10:57:12.660

用纯 JavaScript 做这件事有点困难，但你可以使用 jQuery，更具体地说是[jQuery.post](http://api.jquery.com/jQuery.post/)。因此，通过`id`和`name`您可以简单地将这些信息发送回您的应用程序，如下所示：

```
$.post("/login/facebook/", { id: response.id, name: response.name })
.done(function(data) {
  alert("Data Loaded: " + data);
}); 
```

在后端，您应该有一个处理程序，该处理程序期望这种类型的请求以登录该 Facebook 用户。

这样做的唯一问题是，任何人都可以使用任何 ID 和名称发出此 POST 请求，而您不知道他们是真正的用户还是只是试图进入您的系统。这就是 Facebook 使用访问令牌的原因，因此您可以将其发送回您的服务器，并使用`token`、 the`App ID`和 the`App Secret`您可以检索实际用户。

在下一步中，由于您实现了自己的登录系统，您应该使用会话 cookie 来存储有关当前登录用户的信息，以便您能够浏览该站点。尽管自己做这件事非常可行，但我建议您使用某种框架来帮助您完成所有这些工作。

当我们遇到类似情况时，经过一些研究，我们得出结论，因为[Sessions使用](http://flask.pocoo.org/docs/quickstart/#sessions)[Flask](http://flask.pocoo.org/)，后来我们发现使用[Flask-OAuth](http://pythonhosted.org/Flask-OAuth/)扩展连接 Facebook 并不难。

[您可以在我的一个名为gae-init](https://bitbucket.org/lipis/gae-init/src)的开源项目中找到使用 Flask、Sessions、Facebook 登录和其他一些东西的完整示例。

# asp.net - 使用 ASP.NET 减小图像大小（进一步）

> ID：14919359
> 
> 赞同：0
> 
> 时间：2013-02-17T08:38:55.753
> 
> 标签：asp.net, image-resizing

我正在使用下面的代码来减小图像的大小。它工作正常。我的问题是，一张 3MB 的图片会缩小到 470~ KB。有没有办法进一步减小文件大小？我使用了所有可能的插值模式、平滑模式和其他设置，但生成的图像仍然在 400 kb 左右。这些图像用于报纸网站，因此也应保持其品质。

* * *

编辑我的图像尺寸是 4000 x 3000 像素，我正在缩小到 650 像素宽。

* * *

```
Dim image_p As Image = _
    ResizeImage(img, Convert.ToInt32(pWidth), Convert.ToInt32(pHeight))

Private Function ResizeImage( _
    original_img As Bitmap, width As Integer, height As Integer) As Bitmap
        Dim callback As New Image.GetThumbnailImageAbort(AddressOf GetThumbAbort)

        Dim new_img As New Bitmap(original_img, width, height) 'new blank bitmap'

        Dim g As Graphics = Graphics.FromImage(new_img)

        g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.High
        g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias
        g.PixelOffsetMode = System.Drawing.Drawing2D.PixelOffsetMode.HighSpeed
        g.CompositingQuality = _
            System.Drawing.Drawing2D.CompositingQuality.HighSpeed
        g.CompositingMode = System.Drawing.Drawing2D.CompositingMode.SourceOver
        g.DrawImage(original_img, 0, 0, width, height)
        Return new_img
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:29:16.610

[如果您使用具有 EncoderParameters 选项的Image.Save](http://msdn.microsoft.com/en-us/library/ytz20d80.aspx)方法，则可以缩小尺寸。

只是[MSDN 示例](http://msdn.microsoft.com/en-us/library/ytz20d80.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)中的一部分代码：

```
 'Save the bitmap as a JPEG file with quality level 50.
 myEncoderParameter = New EncoderParameter(myEncoder, CType(50L, Int32))
 myEncoderParameters.Param(0) = myEncoderParameter
 myBitmap.Save("Shapes050.jpg", myImageCodecInfo, myEncoderParameters) 
```

注意：您使用的其他参数会影响图像的构图，而不是您制作 jpg 时的最终尺寸。它们以质量的方式影响尺寸，清晰度越高，尺寸越大，因为 jpeg 需要显示更多细节，但最终尺寸会因我在这里的调用而改变。

# java - 如何使用显示标签将我想要删除/编辑的行中的值从struts2中的jsp传递给动作类？

> ID：14919363
> 
> 赞同：0
> 
> 时间：2013-02-17T08:39:21.600
> 
> 标签：java, struts2, displaytag

我想用struts2在显示标签中创建编辑、删除链接。这是我的jsp代码

```
<%@ page contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@taglib uri="http://displaytag.sf.net" prefix="display" %>
<html>
<head>

    <title>Contact Manager - display tag Example</title>
    <link href="css/style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<display:table  name="contactList" requestURI="" pagesize="10" export="true" cellpadding="1" uid="sr"  cellspacing="1" size="50"
    defaultorder="ascending" sort="list" style="width:850"
     id="row">
            <display:column property="id" title="serial no" sortable="true"   />
            <display:column property="lastName" title="TV Show" sortable="true"   />
            <display:column property="firstName" title="User Name" sortable="true"  />
            <display:column property="emailId" title="Email Id" sortable="true"  />

            <display:column media="html"
    title="Delete"
    style="text-align:center">
    <s:url id="deleteUrl" action="deleteLink">
    <s:param name="id1" value="#attr.row.id" />
    </s:url>
    <s:a href="%{deleteUrl}">
         Delete
    </s:a>
</display:column>

<display:column media="html"
title="edit"
style="text-align:center">
<a href="deleteLink?id=<s:property value="id"/>">edit</a>
</display:column>

             <display:setProperty name="export.excel.filename" value="ActorDetails.xls"/>
            <display:setProperty name="export.pdf.filename" value="ActorDetails.pdf"/>
            <display:setProperty name="export.pdf" value="true" />
        </display:table>

</body>
</html> 
```

这是我的动作课：

```
 package net.viralpatel.contact.view;

    import java.util.List;

    import net.viralpatel.contact.controller.ContactManager;
    import net.viralpatel.contact.model.Contact;

    import com.opensymphony.xwork2.ActionSupport;

    public class ContactAction extends ActionSupport implements ModelDriven<Contact>,Preparable {

        private static final long serialVersionUID = 9149826260758390091L;

        private Contact contact;
        private List<Contact> contactList;

        private ContactManager linkController;

        public ContactAction() {
            linkController = new ContactManager();
        }

        public String getRecords()
        {
            contactList =linkController.lSist();

            return SUCCESS;
        } 

        public String deleteRecord()
        {
           System.out.println(contact.getId());

            return SUCCESS;
        } 

        public Contact getContact() {
            return contact;
        }

        public List<Contact> getContactList() {
            return contactList;
        }

        public void setContact(Contact contact) {
            this.contact = contact;
        }

        public void setContactList(List<Contact> contactsList) {
            this.contactList = contactsList;
        }

@Override
    public Contact getModel() {

        return contact;
    }

    @Override
    public void prepare() throws Exception {
        // TODO Auto-generated method stub
        contact = new Contact();
    }
    } 
```

如何获取从 jsp 页面中删除的行中的属性值到 ContactAction 类中的 deleteRecord() 方法？这里的声明

```
System.out.println("ID IS "+contact.getId()); 
```

给出一个输出：ID IS null

请提出一些解决方案。

谢谢

这是联系 bean

```
package net.viralpatel.contact.model;

import java.io.Serializable;
import java.sql.Date;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="Contacts")
public class Contact implements Serializable{

    private static final long serialVersionUID = -8767337896773261247L;

    private Long id;
    private String firstName;
    private String lastName;
    private String emailId;
    private String cellNo;
    private Date birthDate;
    private String website;

    private Date created;

    @Id
    @GeneratedValue
    @Column(name="id")
    public Long getId() {
        return id;
    }
    @Column(name="firstname")
    public String getFirstName() {
        return firstName;
    }
    @Column(name="lastname")
    public String getLastName() {
        return lastName;
    }
    @Column(name="email_id")
    public String getEmailId() {
        return emailId;
    }
    @Column(name="cell_no")
    public String getCellNo() {
        return cellNo;
    }
    @Column(name="birthdate")
    public Date getBirthDate() {
        return birthDate;
    }
    @Column(name="website")
    public String getWebsite() {
        return website;
    }
    @Column(name="created")
    public Date getCreated() {
        return created;
    }
    public void setId(Long id) {
        this.id = id;
    }
    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }
    public void setLastName(String lastName) {
        this.lastName = lastName;
    }
    public void setEmailId(String emailId) {
        this.emailId = emailId;
    }
    public void setCellNo(String cellNo) {
        this.cellNo = cellNo;
    }
    public void setBirthDate(Date birthDate) {
        this.birthDate = birthDate;
    }
    public void setCreated(Date created) {
        this.created = created;
    }
    public void setWebsite(String website) {
        this.website = website;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:05:16.577

您可以使用

```
#attr.uidOfYourTable.property 
```

在你的情况下

```
<display:column media="html" title="edit" style="text-align:center">
   <a href="deleteLink?id=<s:property value="#attr.sr.id"/>">edit</a>
</display:column> 
```

（忽略您的编辑链接指向 DeleteLink 操作的事实：o）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:20:23.657

你可以这样写：

```
 <display:column property="status" title="Status" sortable="true" paramId="aid" paramProperty="aid" href="/MsgSystem/adminread" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T16:44:25.710

这是答案，我们可以使用`<s:bean>`实例化 bean 类，然后`<s:param>`充当 setter 方法，其值可以使用 bean 类 Contact 的 getter 方法在动作类中检索

```
<display:column media="html"
    title="Delete"
    style="text-align:center">
    <s:url id="deleteUrl" action="deleteLink">
    <s:bean name="net.viralpatel.contact.model.Contact"></s:bean>
    <s:param name="id" value="#attr.row.id"></s:param>
    <s:param name="firstName" value="#attr.row.firstName"></s:param>
    </s:url>
    <s:a href="%{deleteUrl}">
         Delete
    </s:a>
</display:column> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T09:06:31.227

以下是[文档](http://www.displaytag.org/1.2/displaytag/tagreference.html)中有关 display:table 标签的内容：

> id：见“uid”。
> 
> uid：用于标识此表的唯一 id。**表示当前行的对象也以该名称添加到 pageContext 中，以便您可以使用 ${uid} 在列体中引用它**。您还可以使用 uid_rowNum 来引用当前行号。同一页面中的两个表不能具有相同的 id（分页和排序都会影响两者）。如果未指定“htmlId”，则生成表的 html id 将使用相同的值。

（强调我的）

所以在你的标签中选择`id`and `uid`（不要像你一样指定 id 两次）而不是同时使用两者，然后（假设你保留 uid），使用 ${sr} 来引用当前元素：

```
<s:param name="id1" value="${sr.id}" /> 
```

# java - 在 LWJGL 窗口中使用 Slick2D 渲染文本？

> ID：14919364
> 
> 赞同：0
> 
> 时间：2013-02-17T08:39:37.717
> 
> 标签：java, text, lwjgl, slick2d

如何在使用 LWJGL 的 Display.Create() 创建的窗口中使用 Slick2D 呈现基本字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T16:01:34.623

没有简单的方法可以做到这一点，但是您可以使用一些库。在这里查看更多信息：[如何使用 OpenGL 将字符串绘制到窗口？](https://stackoverflow.com/questions/13143344/how-to-draw-a-string-to-the-window-with-opengl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-28T23:50:45.050

听起来您应该使用 Slick2d 的`UnicodeFont`课程。

使用`UnicodeFont`，您可以轻松地将不同颜色的文本绘制到屏幕上。

初始化：

```
UnicodeFont uf = null;
try {
    uf = new UnicodeFont("path/to/font", <size>, <bold>, <italic>);
    uf.getEffects().add(new ColorEffect(java.awt.Color.white)); // set the default color to white
    uf.addAsciiGlyphs();
    uf.loadGlyphs(); // load glyphs from font file
} catch (SlickException exception) {
    exception.printStackTrace();
} 
```

要将文本绘制到屏幕上：

```
uf.drawString(<x>, <y>, <text>); 
```

请务必将此代码添加到您的 OpenGL 初始化中：

```
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

这确保不会发生这种情况：

[![不好了！](../Images/949764d066a82b7cca58d50a6fcbfb6e.png)](https://i.stack.imgur.com/0mGD5.png)

`GL_DEPTH_TEST`此外，如果启用，也会发生类似的问题。`GL_DEPTH_TEST`要解决此问题，请在将文本绘制到屏幕时禁用。

完整的字体绘图程序：

```
import static org.lwjgl.opengl.GL11.*;

import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;
import org.newdawn.slick.SlickException;
import org.newdawn.slick.UnicodeFont;
import org.newdawn.slick.font.effects.ColorEffect;

public class TextDrawing {
    static UnicodeFont uf = null;

    public static void initGL() {
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        glOrtho(0, 640, 480, 0, 1, -1);
        glMatrixMode(GL_MODELVIEW);

        glEnable(GL_TEXTURE_2D);
        glEnable(GL_BLEND);
        glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    }

    @SuppressWarnings("unchecked")
    public static void initFont(int size, boolean bold, boolean italic) {
        try {
            uf = new UnicodeFont("path/to/font.ttf", size, bold, italic);
            uf.addAsciiGlyphs();
            uf.getEffects().add(new ColorEffect(java.awt.Color.white));
            uf.loadGlyphs();
        } catch (SlickException e) {

        }
    }
    public static void main(String[] args) {
        try {
            Display.setDisplayMode(new DisplayMode(640, 480));
            Display.setTitle("Text Drawing!");
            Display.setResizable(false);
            Display.create();
        } catch (LWJGLException e) {

        }

        initGL();
        initFont(100, false, false);

        while (!Display.isCloseRequested()) {

            glClear(GL_COLOR_BUFFER_BIT);

            uf.drawString(10, 10, "Sweet Text");

            Display.update();
            Display.sync(60);
        }

        System.exit(0);

    }
} 
```

这会产生：

[![甜蜜的文字](../Images/e50debe1b600a1c47aa6cb4eef6769b9.png)](https://i.stack.imgur.com/OBFuJ.png)

您将需要提供一个字体文件。

# android - Greendao：插入、更新、删除语法，最佳实践

> ID：14919365
> 
> 赞同：0
> 
> 时间：2013-02-17T08:40:05.957
> 
> 标签：android, greendao

我在这里问过类似的问题，但我没有得到任何满意的答复，所以请理解我的担忧：

```
 1\. https://stackoverflow.com/questions/14846105/insert-ot-update-using-one-of-the-field-as-key-in-greendao
    2\. https://stackoverflow.com/questions/14547288/best-way-to-select-row-with-following-scenario-using-greendao 
```

我在服务器和客户端都有一个名为**“TARGET”的表。**
这里的服务器是 MySql，客户端是 Android。

我想将**greendao**用于客户端部分，我有多个任务要做，如下所示：

1.  具有某些**EMPLOYEE_ID**的员工将在特定日期后从服务器获取所有目标，现在在客户端部分，如果存在**TARGET**，则应该更新它，否则插入。这是**insertOrUpdate**案例。
2.  **使用TARGET_ID**删除特定目标。
***   使用**TARGET_NAME**获取目标列表。**

 **关于问题的数据：

```
 TABLE : TARGET
    FIELDS: TARGET_ID
            TARGET_NAME
            EMPLOYEE_ID 
```

在 DaoExampleGenerator 中使用以下代码：
[使用 greenDao 在以下场景中选择行的最佳方法？](https://stackoverflow.com/questions/14547288/best-way-to-select-row-with-following-scenario-using-greendao)

```
 private static void addTarget(Schema schema){
        Entity target = schema.addEntity("TARGET");
        target.addStringProperty("TARGET_ID").primaryKey().autoincrement();
        target.addStringProperty("TARGET_NAME");
        target.addStringProperty("EMPLOYEE_ID");
    } 
```

以下是我为我发布的问题所做的：

```
 1\. tDao.insertOrReplaceInTx(tArrayList);
       where, tArrayList is ArrayList of TARGET Object.
    2\. for deleting a target using TARGET_ID, i load all the targets in     
       ArrayList<TARGET> then check TARGET_ID of each TARGET object. If 
       the TARGET_ID matches then i use, **tDao.delete(t);**
    3\. for this also i do the same as (2), i load all the targets then match 
       the TARGET_NAME, If it matches then i add it to list. 
```

谁能告诉我实现上述问题陈述的最佳方法。使用**绿道**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-27T19:11:23.933

您应该能够构建删除查询。正如[GreenDao 文档](http://greendao-orm.com/documentation/queries/)所说：

> 删除查询
> 
> 批量删除不会删除单个实体，而是删除符合某些条件的所有实体。要执行批量删除，请创建一个 QueryBuilder，调用其 buildDelete 方法，然后执行返回的 DeleteQuery。这部分 API 将来可能会发生变化，例如可能会添加便利方法等。请记住，批量删除当前不会影响身份范围内的实体，例如，如果之前已缓存的实体，您可以“复活”已删除的实体并通过它们的 ID（加载方法）访问。如果这可能会导致您的用例出现问题，请考虑暂时清除身份范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:16:22.780

看来您现在所做的是您问题的唯一答案......据我所知，greenDao 中没有任何方法可以按标准获取行或按标准删除单行......仅通过 ID（长） ...**

# c - 如何使用 GCC 在 C 上编译库？

> ID：14919366
> 
> 赞同：12
> 
> 时间：2013-02-17T08:40:12.020
> 
> 标签：c, gcc, compilation, include, libraries

我用文件`pila.h`和`pila.c`. 我编译文件`pila.c`，`gcc pila.c -c`这个库工作正常。我已经测试过了。

然后我做了另一个图书馆。这个库有文件`pila_funciones_extra.h`和`pila_funciones_extra.c`. 在这个库中，我需要包含第一个库。在文件中`pila_funciones_extra.h`，我将下一行包含在内：

```
#include "pila.h" 
```

在文件中`pila_funciones_extra.c`我放了下一行：

```
#include "pila_funciones_extra.h" 
```

必须如此。

但是当我尝试编译该文件时`pila_funciones_extra.c`，编译器无法识别该库的包含`pila`。它表示库中定义的函数、结构、常量和宏`pila`尚未定义。

我试图用它编译它，`gcc pila_funciones_extra.c -c`但`gcc pila_funciones_extra.c -c pila.o`它不起作用。

我确保所有文件都在同一个文件夹中。

我在 Ubuntu 上工作。

谁能告诉我编译它的正确方法？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-17T12:15:13.470

首先，始终养成使用`-Wall`（甚至可能*还会* `-Wextra`获得更多警告）选项编译的习惯`gcc`；它给了你几乎所有的警告，你应该改进你的代码，直到没有给出警告。

然后你经常希望能够调试你的代码，所以也传递`-g`给`gcc`. 一旦您对自己的代码有信心，您就可以要求`gcc`使用`-O2`. 学习使用`gdb`调试器。

所以编译你的第一个库，假设它的源文件在目录`first1.c`中，例如`first2.c``FirstLib/`

```
cd FirstLib/
gcc -Wall -g -c first1.c -o first1.o
gcc -Wall -g -c first2.c -o first2.o 
```

此时，您应该使用 a`Makefile`并学习如何使用`make`，特别是因为您想获得`libfirst.a`与

```
ar ruv libfirst.a first1.o first2.o
ranlib libfirst.a 
```

然后，您可以将`-L../FirstLib -lfirst`最后一个选项传递给`gcc`使用您的程序编译和链接程序的命令`libfirst.a`

然后编译你的第二个库，让你的`Makefile`in 目录`SecondLib/`很可能应该包含

```
# in SecondLib/Makefile
CC=gcc
CFLAGS= -I../FirstLib/ -Wall -g
## add your other stuff for make 
```

等等等等。你真的很想学习如何使用`make`和编写你自己的`Makefile`-s 所以花点时间阅读[GNU make 文档](http://www.gnu.org/software/make/manual/)。

您可能希望通过`-H`to`gcc`让它告诉您所有包含的文件，并且您可能还想使用[remake](http://bashdb.sourceforge.net/remake/)（除了和替换 `make`）来调试更复杂的`Makefile`-s （特别是通过运行`remake -x`）。[这](https://stackoverflow.com/a/16751650/841108)是一个例子`Makefile`；你会发现很多其他人！

另请阅读[程序库 Howto](http://www.tldp.org/HOWTO/Program-Library-HOWTO/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T10:47:20.967

对于由许多文件组成的库，您可以先编译然后单独编译，然后执行以下操作：

```
ar ruv mylib.a pila_funciones_extra.o pila.o
ranlib mylib.a 
```

如果该库尚不存在，则此命令会导致创建该库。如果是，则更新 .o 文件（或添加到此库中）。*ranlib*用于以对加载程序有用的方式随机化库。

当你使用这个库时，你会：

```
gcc -o myapp myapp.c mylib.a 
```

# mysql - 如何插入具有分层类别的产品表

> ID：14919370
> 
> 赞同：0
> 
> 时间：2013-02-17T08:40:48.700
> 
> 标签：mysql, database-design

我有一个由相邻列表模型组成的表格类别：

```
id      name        parent_id
1   Clothing        0
2   Books           0
3   Computers       0
4   Mobiles         0
5   Movies          0
6   Music           0
7   Mens            1
8   Shirts          7
9   Formal Trousers 7
10  Jeans           7 
```

和 product_category 表：

```
product_id fk
category_id fk
parent_id 
```

并有一个产品表

```
product_id
category_id
parent_id
prod_name
genre
unit price
image 
```

我如何将产品插入到具有父 ID 链接的表中，然后它又具有到类别的链接。这样我就可以从 parent_id 和类别中检索产品。我应该将 parent_id 定义为主键吗.. 帮助表示赞赏.. 提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:48:28.457

如果我是正确的，我理解，您需要以相反的顺序检索数据。例如，parent_id + category_id -> product_id 以及 product_id -> parent_id + category_id。

我希望你做得最多，我只是建议你使用 SQL 'where' 子句从末尾检索数据。

我什至想在每个表中使用类别、父项和产品的 PK，但经过一些研究，我发现我可以在不更改数据库设计的情况下检索数据。

# android - 获取应用程序在android中的最后运行时间

> ID：14919374
> 
> 赞同：0
> 
> 时间：2013-02-17T08:41:19.237
> 
> 标签：android, adb, stat

我正在尝试在 android 中获取应用程序的**最后运行时间**（不仅是我的应用程序）。
据我了解，所有应用程序都安装在 /data/app/ 中。
所以，我尝试运行`stat`命令`adb shell`来获取所有apk的最后访问时间。

但令我惊讶的是，上次访问时间似乎是上次安装/更新时间而不是运行时间。为什么会这样？我认为android系统需要“访问”apk才能加载并运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T01:30:07.493

由于性能原因，访问时间不再更新

[http://en.wikipedia.org/wiki/Stat_%28system_call%29#Criticism_of_atime](http://en.wikipedia.org/wiki/Stat_%28system_call%29#Criticism_of_atime)

# jquery - jQuery - 延迟 DOM 中的每个 div

> ID：14919376
> 
> 赞同：-1
> 
> 时间：2013-02-17T08:41:51.987
> 
> 标签：jquery, delay, fadeout

我正在尝试遍历 DOM 中的每个 DIV 并应用效果（比方说`fadeOut()`），每个 DIV 之间都有时间空间。由于某种原因，这件事不想工作。

```
var stupid = -1000;

return_stupid = function(){
return stupid+=1000;
}

$(function(){
    $("div").not("#wrapper").delay(return_stupid()).queue(function(){
        $(this).fadeOut("slow");
        $(this).dequeue();
    });
}); 
```

编辑：嗯，我发现了这个问题。return_stupid() 仅称为 ONCE，因为它不是 .each() 语句。

好吧，我不想使用 each()，它正在吃掉内存！

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:01:14.887

您可以使用如下 jQuery 插件。它将在给定间隔之间淡出每个匹配的元素。

```
$.fn.fadetraining = function(duration, delay) {
  var $elements = this;
  $elements.length && $elements.first().fadeOut(duration, function(){
    $elements.slice(1).delay(delay).fadetraining(duration);
  });
  return $elements;
}; 
```

你可以像这样使用它：

```
$("div").not("#wrapper").fadetraining("slow", 1000); 
```

[**在这里你可以看到它。**](http://jsfiddle.net/c4k5m/)

我不明白你为什么不想使用`.each()`. 毕竟，几乎所有的 jQuery 函数都在内部使用它。

**注意：**这是我之前编写的一个 jQuery 插件的衍生产品，[`$.fn.fadetrain`](https://github.com/aeurielesn/jQuery.fn/tree/master/%24.fn.fadetrain).

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-17T08:57:36.393

I think you might be using delay wrong. Try something like this:

```
$(".cell").animate({width:"100px",height:"100px"}, 3000).delay(1000).fadeOut(); 
```

I've made a JSFiddle as an example. [http://jsfiddle.net/M9n8a/1/](http://jsfiddle.net/M9n8a/1/)

# iphone - iOS 切换视图 1 视图返回

> ID：14919379
> 
> 赞同：-1
> 
> 时间：2013-02-17T08:42:21.833
> 
> 标签：iphone, ios, objective-c

我昨天开始 iOS 开发并尝试设置 2 个切换视图。在教程的帮助下，这并不是真正的问题。然后我想：让我们做第三个视图。一切都很好，但是当我尝试从第三个切换回第二个时，它切换到 1。当我尝试使用 [self presentModalViewController...] 时，它向前切换到我在那里写的视图，但不向后切换。并且随着 [self dismiss...] 它一直切换到第一个视图。是否有可能在我想要的任何地方进行此切换？3 比 2、2 比 1、3 比 1 等。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:47:03.483

当您说切换视图时，您指的是视图控制器。可以有多种方式在控制器之间切换。

首先也是最重要的一个是推送到新的视图控制器。这只有在当前视图控制器上持有导航控制器时才能实现。导航控制器是允许您在视图控制器之间导航的控制器。当您使用“pushViewController”方法导航到新控制器时，您需要使用“导航控制器的 popviewcontroller 方法”返回到前一个控制器。这使您可以弹回上一个屏幕/控制器。

但是，每当您推送到新控制器时，这意味着您正在将一个控制器添加/插入到堆栈中，并且您知道堆栈是 LIFO，最后一个必须首先从堆栈中取出，然后只有您可以获得其他元素堆栈。

因此，例如：如果您有 3 个控制器 A、B 和 C。您从 A 开始并推送到 B，然后从 B 进一步推送到 C。然后堆栈将具有 CBA（C 将在顶部，A 将位于底部）。因此，您必须先弹出 C 再弹出 B 等。

移动到新控制器的其他方法是：presentModalViewController 呈现屏幕/控制器，可以使用dismissmodalviewcontroller 方法将其删除。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T09:36:09.167

您可以使用一个 viewContoller 并在不同的视图之间切换，例如：

```
[view1 removeFromSuperview];
[myRootView addSubview: view2]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T14:29:22.300

当您呈现模态视图控制器时，您需要在继续之前将其关闭。特别是你不能模态呈现视图控制器 1，然后模态呈现视图控制器 2，然后模态呈现视图控制器 1。

至少您必须关闭模态视图控制器 2 - 然后 1 应该仍然存在。

根据这些控制器的性质，UINavigationController 或视图交换可能是更好的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T09:04:07.307

为了继续前进，您可以使用 UINavigation 控制器，如下所示：

```
FirstViewController *firstViewController = [[FirstViewController alloc] initWithNibName:@"FirstView" bundle:[NSBundle mainBundle]]; 

  [self.navigationController pushViewController:firstViewController animated:YES];
  [firstViewController release]; 
```

myViewController 是您的视图控制器的对象。& 对于一个视图返回仅使用以下行：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

# sql-server - 在远程服务器中执行 xp_cmdshell

> ID：14919382
> 
> 赞同：2
> 
> 时间：2013-02-17T08:42:34.830
> 
> 标签：sql-server, tsql

```
RECONFIGURE
EXEC sp_configure 'xp_cmdshell',1  

declare @cmdstring varchar(1000)

set @cmdstring = 'copy D:\\Mine\\Mine\\Icons\\1355312509_gadu.ico D:\\Mine\\Mine\\1355312509_gadu.ico'
exec master..xp_cmdshell @cmdstring 

RECONFIGURE
EXEC sp_configure 'xp_cmdshell',0 
```

我正在尝试在远程服务器上执行此操作，虽然我无法执行，但我以系统管理员身份登录，这是我得到的错误，我已经完成了之前的帖子，但找不到合适的解决方案

```
output
The device is not ready.
NULL 
```

任何帮助将不胜感激

这段代码不会

```
RECONFIGURE
    EXEC sp_configure 'xp_cmdshell',0 
```

在代码末尾消除那些安全威胁？

这就是我所做的，没关系

```
CREATE TABLE #temp
(
    id               INT IDENTITY(1, 1),
    name_file        VARCHAR(500),
    depth_tree       VARCHAR(10),
    is_folder_files  VARCHAR(10)
)

/* xp_dirtree selects file from specific location
*  depth_tree       :   depth of the search i.e. subfolders
*  is_folder_files  :   selects folders only or files too
*/

INSERT INTO #temp(name_file, depth_tree, is_folder_files) EXEC xp_dirtree @source_path, 0, 1

-- Must concatenate to have permission for xp_cmdshell
SET @concatenate_string = 'RECONFIGURE EXEC sp_configure ''xp_cmdshell'',1 EXEC MASTER..xp_cmdshell '

-- Generating copy string in bulk
SELECT @cmd_string =    
    ISNULL(@cmd_string, '') + 
    CASE WHEN (LEN(REPLACE(t.name_file, @seperate_value, 1)) <> LEN(t.name_file)) -- if @seperate_value is not in image
        THEN
        (
            SELECT CASE 
                WHEN REPLACE(t.name_file, 'Approach', 1) <> t.name_file OR REPLACE(t.name_file, 'CloseUp', 1) <> t.name_file -- if word Approach or CloseUp is not there in image 
                THEN
                    (
                    SELECT CASE
                    WHEN ((SELECT f.FaceID FROM Face f WHERE CAST(f.Notes AS VARCHAR) = SUBSTRING(t.name_file, 0, CHARINDEX(@seperate_value, t.name_file)-1)) IS NOT NULL) -- when extracted ID from image <> NotesID
                    THEN
                    (
                    @concatenate_string + '''copy ' + @source_path + t.name_file + ' ' 
                    + @destination_path 
                    + (SELECT f.FaceID FROM Face f WHERE CAST(f.Notes AS VARCHAR) = SUBSTRING(t.name_file, 0, CHARINDEX(@seperate_value, t.name_file)-1)) -- Compares and gives the faceID
                    + (SELECT   CASE 
                                    WHEN REPLACE(t.name_file, 'Approach', 1) <> t.name_file THEN '-AS.jpg'' '
                                    WHEN REPLACE(t.name_file, 'CloseUp', 1) <> t.name_file THEN '-BS.jpg'' '
                                    ELSE
                                        'Undefined'
                                END
                       )
                    )
                    ELSE
                        ' '
                    END
                )
                ELSE
                    ' '
                END
        )    
        ELSE
            ' '
    END

FROM #temp t

SELECT @cmd_string + 'RECONFIGURE EXEC sp_configure ''xp_cmdshell'',0'

EXEC (@cmd_string) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T08:57:59.637

I have had this one some time too. I ran the script from server a, where things were on server b. I checked and the only thing (besides credentials, which looks it isn't an issue) was that the filestructure didn't exists on the remote server..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T08:47:40.807

这很可能是运行 SQL Server 服务的凭据存在问题。该帐户可能没有足够的权限访问您尝试从中复制或复制到的文件夹。

一种解决方案可能是尝试从 SQL Server 代理运行任务，另请参阅[MSDN 论坛上的讨论](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/d5d8a5fa-a9be-4998-ad23-ec8b03cf19dc)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-08T06:48:35.930

除了使用 T-SQL 在 SQL Server 之外做任何事情，这有其自身的继承风险，您首先需要为正确的帐户授予正确的权限才能运行`xp_cmdshell`.

您将需要一个本地 AD 帐户，因为本地“nt service\mssqlserver”帐户可能不存在于您的其他远程服务器中，所以为什么永远无法访问它。

但是，在获得 Shell 步骤之前，请执行以下操作：

```
USE MASTER;

-- this turns on advanced options and is needed to configure xp_cmdshell
EXEC sp_configure 'show advanced options', '1'
    RECONFIGURE
-- this enables xp_cmdshell
EXEC sp_configure 'xp_cmdshell', '1'
    RECONFIGURE

IF NOT EXISTS
     (SELECT loginname
      FROM   master.dbo.syslogins
      WHERE  name = 'yourdomain\anADaccount')
  BEGIN
    CREATE LOGIN [yourdomain\anADaccount] FROM WINDOWS;
    EXEC sp_xp_cmdshell_proxy_account 'yourdomain\anADaccount', 'accountpassword'
  END

--Create the database role and assign rights to the role
--select DATABASE_PRINCIPAL_ID('CmdShell_Executor')
IF DATABASE_PRINCIPAL_ID('CmdShell_Executor') IS NULL
  BEGIN
    CREATE ROLE [CmdShell_Executor] AUTHORIZATION [dbo]
    GRANT EXEC ON xp_cmdshell TO [CmdShell_Executor]
  END

IF NOT EXISTS
     (SELECT [name]
      FROM   [sys].[database_principals]
      WHERE  [name] = 'yourdomain\anADaccount')
  BEGIN
--Then once done create users and assign to CmdShell_Executor
    CREATE USER [yourdomain\anADaccount] FROM LOGIN [yourdomain\anADaccount];
    EXEC sp_addrolemember[CmdShell_Executor], [yourdomain\anADaccount];
  END 
```

现在确保您的 AD 帐户也有权访问远程服务器。我强烈建议您在每台机器上创建这些 AD 帐户，`<<local>>`而不是在通用域的 AD 下。然后，您可以控制该帐户仅对远程服务器上的特定文件夹或位置具有读取权限。

现在您已准备好从 SQL Server 运行 CMD shell，而没有任何安全漏洞的风险，即外国人可能会访问您的数据库并运行 Shell 命令！

```
EXEC    master..xp_cmdshell 'whoami.exe'  --find out what account you're actually using 
```

在您的程序结束时，请确保您删除所有这些权限！

```
EXEC sp_xp_cmdshell_proxy_account NULL
drop user [yourdomain\anADaccount] 
drop role [CmdShell_Executor]
drop login [yourdomain\anADaccount] 
```

# python - 使用 PDFminer 作为库：“AttributeError: 'NoneType' 对象没有属性 'getobj'”

> ID：14919384
> 
> 赞同：0
> 
> 时间：2013-02-17T08:43:08.037
> 
> 标签：python, pdf

我正在编写一个用于上传 PDF 文件并在此过程中解析它们的脚本。对于解析，我使用[PDFminer](http://www.unixuser.org/~euske/python/pdfminer/programming.html)。

为了将文件转换为 PDFMiner 文档，我使用以下功能，完全按照上面链接中的说明进行操作：

```
def load_document(self, _file = None):
    """turn the file into a PDFMiner document"""
    if _file == None:
        _file = self.options['file']

    parser = PDFParser(_file)
    doc = PDFDocument()
    doc.set_parser(parser)
    if self.options['password']:
        password = self.options['password']
    else:
        password = ""
    doc.initialize(password)
    if not doc.is_extractable:
        raise ValueError("PDF text extraction not allowed")

    return doc 
```

预期的结果当然是一个很好的`PDFDocument`例子，但是我得到了一个错误：

```
Traceback (most recent call last):
  File "bzk_pdf.py", line 45, in <module>
    cli.run_cli(BZKPDFScraper)
  File "/home/toon/Projects/amcat/amcat/scripts/tools/cli.py", line 61, in run_cli
    instance = cls(options)
  File "/home/toon/Projects/amcat/amcat/scraping/pdf.py", line 44, in __init__
    self.doc = self.load_document()
  File "/home/toon/Projects/amcat/amcat/scraping/pdf.py", line 56, in load_document
    doc.set_parser(parser)
  File "/usr/local/lib/python2.7/dist-packages/pdfminer/pdfparser.py", line 327, in set_parser
    self.info.append(dict_value(trailer['Info']))
  File "/usr/local/lib/python2.7/dist-packages/pdfminer/pdftypes.py", line 132, in dict_value
    x = resolve1(x)
  File "/usr/local/lib/python2.7/dist-packages/pdfminer/pdftypes.py", line 60, in resolve1
    x = x.resolve()
  File "/usr/local/lib/python2.7/dist-packages/pdfminer/pdftypes.py", line 49, in resolve
    return self.doc.getobj(self.objid)
AttributeError: 'NoneType' object has no attribute 'getobj' 
```

我不知道去哪里找，我还没有找到其他人有同样的问题。

一些可能有帮助的额外信息：

*   这是我的测试文件：[http ://www.2shared.com/document/kM_wrI3J/testpdf.html](http://www.2shared.com/document/kM_wrI3J/testpdf.html)
*   `_file`是一个[django File 对象](https://docs.djangoproject.com/en/1.4/ref/files/file/)，但使用普通文件具有相同的结果
*   pdfminer 版本：'pdfminer-20110515'
*   Django：1.4.3（我认为这不重要）
*   Python 2.7.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T12:33:26.960

通过一些实验，我发现我错过了一行：

**parser.set_document(doc)**

添加该行后，该功能现在可以工作了。

对我来说，图书馆设计看起来很糟糕，但可能是我错过了一些东西，这只是弥补了错误。

无论如何，我现在有一个包含我需要的数据的 PDF 文档。

这是最终结果：

```
def load_document(self, _file = None):
    """turn the file into a PDFMiner document"""
    if _file == None:
        _file = self.options['file']

    parser = PDFParser(_file)
    doc = PDFDocument()
    parser.set_document(doc)
    doc.set_parser(parser)

    if 'password' in self.options.keys():
        password = self.options['password']
    else:
        password = ""

    doc.initialize(password)

    if not doc.is_extractable:
        raise ValueError("PDF text extraction not allowed")

    return doc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T09:28:31.550

Try opening the file and sending it to the parser, like this:

```
with open(_file,'rb') as f:
    parser = PDFParser(f)
    # your normal code here 
```

The way you are doing it now, I suspect you are sending the filename as a string.

# abstraction - 抽象的真正定义是什么？

> ID：14919385
> 
> 赞同：1
> 
> 时间：2013-02-17T08:43:17.920
> 
> 标签：abstraction

我在几个网站上看到了抽象的不同含义。

有些网站说

> **选择相关数据并忽略无关紧要的数据**

有些网站说

> **从同一种对象中获取公共类**

例如，与公共汽车、卡车和汽车相比，车辆类可以被视为抽象。

我对这些定义感到困惑。什么是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-07T12:21:01.233

最简单的抽象定义是“从规范中隐藏实现细节”。最佳实时示例是：假设您是驾驶员，那么您需要知道“如何驾驶汽车（其规范）”，而不是汽车的实现细节（例如发动机的构建方式等）。

最简单的编程示例是 System.out.println() 函数。作为程序员，您需要知道如何使用 System.out.println()，而不是它的实现细节。希望它能消除你的疑虑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T07:51:33.590

抽象是*“代表基本特征而不代表背景细节”。*

抽象让您专注于对象的作用，而不是它如何做。

抽象通过提供相关信息为您提供类或对象的通用视图。

抽象是隐藏对象的工作方式，并以可理解的方式显示对象信息的过程。

**抽象的真实世界示例： -**

假设您有一个对象移动电话。

假设您有 3 部手机如下：-

*   诺基亚 2700（功能：- 通话、短信、FM 收音机、MP3、相机）
*   Black Berry（功能：-通话、短信、FM 收音机、MP3、相机、视频录制、阅读电子邮件）
*   Black Berry（功能：-通话、短信、FM 收音机、MP3、相机、视频录制、阅读电子邮件）

对象“手机”的抽象信息（Necessary and Common Information）是拨打任意号码，可以发送短信。

这样，对于手机对象，您将拥有如下抽象类：-

```
abstract class MobilePhone
{
    public void Calling();
    public void SendSMS();
}

public class Nokia1400 : MobilePhone
{

}

public class Nokia2700 : MobilePhone
{
    public void FMRadio();
    public void MP3();
    public void Camera();
}

public class BlackBerry : MobilePhone
{
    public void FMRadio();
    public void MP3();
    public void Camera();
    public void Recording();
    public void ReadAndSendEmails();

} 
```

抽象意味着将所有必要的变量和方法放在一个类中。

例如： - 抽象类和抽象方法。

*抽象是常见的事情：*

**例子：**

如果您的大学有人告诉您填写申请表，您将填写您的详细信息，例如姓名，地址，出生数据，哪个学期，您获得的百分比等。如果某个医生给您申请填写详细信息，您将填写姓名、地址、出生日期、血型、身高和体重等详细信息。

看看上面的例子有什么共同点？年龄、姓名、地址 - 因此您可以创建由称为抽象类的常见事物组成的类。该类不完整，可以由其他类继承。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T17:55:16.100

抽象是处理高级概念而忽略低级细节的能力。

我喜欢我在 McConnell 的书“代码完成”中看到的例子：

> 如果您将一个对象称为“房子”而不是木头、玻璃和钉子的组合，那么您就是在使用抽象。

# php - PHP 在字符串中的每个数字上使用 preg_replace

> ID：14919387
> 
> 赞同：1
> 
> 时间：2013-02-17T08:43:19.783
> 
> 标签：php, regex

假设我有一个多行字符串，例如

```
A: 51
B: 221
C: 45 
```

我想替换它以获得

```
A: $51
B: $221
C: $45 
```

我试过

```
preg_replace("/[\d*][^0-9]*/","$currency$0",$pricelist); 
```

但这会在每个数字而不是每个数字之前添加货币符号。我也试过

```
preg_replace("/[\d]*/","$currency$0",$pricelist); 
```

但这用两个货币符号包围了金额。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T08:46:06.280

使用`+`量词代替`*`：

```
preg_replace("/\d+/", "$currency$0",$pricelist); 
```

使用`*`量词，您的正则表达式首先匹配所有数字，然后匹配最后一个数字之后的空字符串。因此，您会看到两个`$`符号 - 一个在数字匹配之前，一个在空字符串之前，在最后一个数字之后匹配。

# c# - 声明所有父构造函数的简单方法？

> ID：14919390
> 
> 赞同：1
> 
> 时间：2013-02-17T08:43:34.973
> 
> 标签：c#, inheritance, constructor

我想知道是否有一个 VS 工具可以简单地在子级中生成所有父级构造函数。

我的问题是，当我从任何类继承并希望能够使用父类中定义的所有构造函数时，我必须编写大量代码。

例如，当我定义此类时：`class MyList<T> : List<T>{}` 创建 MyList 对象的唯一方法是调用`new MyList<>()`. 如果我想能够使用所有的构造函数，`List<T>`我需要手动编写很多构造函数（`List<T>`因为他只有 3 个构造函数，所以不是这种情况。），例如：

```
class MyList<T> : List<T>
{
    internal MyList(int capacity) : base(capacity) { }
} 
```

我的问题是 Visual Studio 中是否有一个工具（以及哪种工具）可以代表我生成这些构造函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:49:16.017

答案似乎是否定的。Visual Studio 没有为此提供工具。

根据 WannaCSharp 的评论，ReSharper 可以做到这一点。

# android - 为什么 glReadPixels 返回意外的颜色格式值？

> ID：14919393
> 
> 赞同：3
> 
> 时间：2013-02-17T08:43:42.677
> 
> 标签：android, opengl-es, irrlicht

我想使用 Irrlicht 和 OpenGL ES 1.0 驱动程序来捕获屏幕。

这是我用 C++ 编写的代码

```
glReadPixels(0, 0, 200, 200, GL_RGBA, GL_UNSIGNED_BYTE, pixels); 
```

大多数安卓设备运行良好。但是 Android 2.2.3 的 MileStone 得到了意想不到的结果。我想要 RGBA 颜色格式，而 MileStone 返回 BGRA 颜色。

最后，我更改了我的代码

```
glReadPixels(0, 0, 200, 200, GL_BGRA, GL_UNSIGNED_BYTE, pixels); 
```

但是 MileStone 返回 RGBA 颜色。

我有疑问，为什么红色和蓝色是出乎意料的？正确的理由是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:13:11.197

`GL_BGRA`OpenGL ES不[支持](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glReadPixels.xml)。由于您隐含地假设支持某些扩展，它可能适用于其他设备。

在这种情况下，我希望 OpenGL 设置一个`GL_INVALID_ENUM`错误代码。你检查了吗？

编辑：等一下，我没有正确阅读你的问题。所以 MileStone 正在交换 和 的`GL_RGBA`结果`GL_BGRA`？无论扩展如何，这都很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-05T01:55:58.437

如果您要做的是创建位图。只需使用 bmp.copyPixelsFromBuffer(...) 代替 bmp.setPixels(...)

从文档[位图](https://developer.android.com/reference/android/graphics/Bitmap.html#copyPixelsFromBuffer(java.nio.Buffer))：

> 缓冲区中的数据不会以任何方式更改（与 setPixels() 不同，它将未预乘的 32 位转换为位图的本机格式。源缓冲区中的像素假定位于位图的颜色空间中。

# kendo-ui - 如何将 kendo UI 与 oracle AdF 一起使用？

> ID：14919394
> 
> 赞同：0
> 
> 时间：2013-02-17T08:43:59.617
> 
> 标签：kendo-ui, oracle-adf

我可以使用 kendo UI 作为我们基于 Web 的应用程序的前端吗？

oracle adf 作为后端？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T18:07:19.467

是的你可以。（因为它只是 JS）

# ios - 在应用程序后台观察 NSDate 或时间以将自定义声音播放为警报

> ID：14919398
> 
> 赞同：0
> 
> 时间：2013-02-17T08:44:24.940
> 
> 标签：ios, objective-c, xcode, nsdate

我正在开发祈祷应用程序，该应用程序指示祈祷时间。如果应用程序正在运行或在后台运行，我现在要做的就是。当祈祷时间到达时，我想播放超过 60 秒的声音。我被困在后台观察时间。任何人都请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T08:50:01.517

iOS App 不会在后台运行超过 10 分钟，除非它是音乐或磅应用程序。但是，你可以使用 UILocalNotification，一个 UILocalNotification 的声音不能超过 30 秒，所以如果你想要一个 60 秒的声音，你需要调度多个 UILocalNotification。

# python - 如何在 matplotlib 的极轴上使用对数刻度

> ID：14919407
> 
> 赞同：5
> 
> 时间：2013-02-17T08:45:39.537
> 
> 标签：python, matplotlib, polar-coordinates

我正在尝试在径向轴上创建一个带有对数刻度的极坐标图，但我不断收到错误消息。一些示例代码和错误如下。它似乎在笛卡尔坐标中工作正常，有谁知道发生了什么？

```
import matplotlib.pyplot as plt
import numpy as np
import matplotlib.cm as cm

bazbins = np.linspace(0, 2*np.pi, 360)
fbins = np.logspace(np.log10(0.05), np.log10(0.5), 101)
theta, r = np.meshgrid(bazbins, fbins) 

# Set up plot window
fig, ax = plt.subplots(figsize=(12,9))#, subplot_kw=dict(projection='polar'))

# polar
ax.set_theta_zero_location('N')
ax.set_theta_direction(-1)
ax.set_rscale('log')

# carthesia
#ax.set_yscale('log')

# Plot data
#ax.pcolormesh(theta, r, r)
plt.gca().invert_yaxis()
ax.contourf(theta, r, r)
ax.set_ylim((0.0, 0.5))
plt.show() 
```

Tkinter 回调中的异常：

```
Traceback (most recent call last):
  File "/usr/lib/python2.7/lib-tk/Tkinter.py", line 1413, in __call__
    return self.func(*args)
  File "/usr/lib/pymodules/python2.7/matplotlib/backends/backend_tkagg.py", line 236, in resize
    self.show()
  File "/usr/lib/pymodules/python2.7/matplotlib/backends/backend_tkagg.py", line 239, in draw
    FigureCanvasAgg.draw(self)
  File "/usr/lib/pymodules/python2.7/matplotlib/backends/backend_agg.py", line 421, in draw
    self.figure.draw(self.renderer)
  File "/usr/lib/pymodules/python2.7/matplotlib/artist.py", line 55, in draw_wrapper
    draw(artist, renderer, *args, **kwargs)
  File "/usr/lib/pymodules/python2.7/matplotlib/figure.py", line 898, in draw
    func(*args)
  File "/usr/lib/pymodules/python2.7/matplotlib/artist.py", line 55, in draw_wrapper
    draw(artist, renderer, *args, **kwargs)
  File "/usr/lib/pymodules/python2.7/matplotlib/axes.py", line 1997, in draw
    a.draw(renderer)
  File "/usr/lib/pymodules/python2.7/matplotlib/artist.py", line 55, in draw_wrapper
    draw(artist, renderer, *args, **kwargs)
  File "/usr/lib/pymodules/python2.7/matplotlib/axis.py", line 1045, in draw
    tick.draw(renderer)
  File "/usr/lib/pymodules/python2.7/matplotlib/artist.py", line 55, in draw_wrapper
    draw(artist, renderer, *args, **kwargs)
  File "/usr/lib/pymodules/python2.7/matplotlib/axis.py", line 239, in draw
    self.label1.draw(renderer)
  File "/usr/lib/pymodules/python2.7/matplotlib/artist.py", line 55, in draw_wrapper
    draw(artist, renderer, *args, **kwargs)
  File "/usr/lib/pymodules/python2.7/matplotlib/text.py", line 591, in draw
    ismath=ismath)
  File "/usr/lib/pymodules/python2.7/matplotlib/backends/backend_agg.py", line 156, in draw_text
    return self.draw_mathtext(gc, x, y, s, prop, angle)
  File "/usr/lib/pymodules/python2.7/matplotlib/backends/backend_agg.py", line 145, in draw_mathtext
    x = int(x) + ox
ValueError: cannot convert float NaN to integer 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-29T19:54:13.177

## 更新为`matplotlib v3.3.4`

*   更新`def scatter_logpolar_mpl`使用`'symlog'`，因为使用`'log'`结果`posx and posy should be finite values`和 的空图`'log-polar matplotlib'`。

```
# updated function with symlog
def scatter_logpolar_mpl(ax, theta, r):
    ax.scatter(theta, r)
    ax.set_rlim(0)
    ax.set_rscale('symlog')
    ax.set_title('log-polar matplotlib')

# use other unchanged original functions

# setup the plot
r = np.arange(0, 3.0, 0.01) + 0.001

theta = 2 * np.pi * r

ax = plt.subplots(1, 3, subplot_kw=dict(polar=True), figsize=(12, 7))[1].flatten()
scatter_polar_mpl(ax[0], theta, r)
scatter_logpolar_mpl(ax[1], theta, r)
scatter_logpolar(ax[2], theta, r)

plt.tight_layout()
plt.show() 
```

[![在此处输入图像描述](../Images/d7c0750cf45b14784839ac9a3e1dd019.png)](https://i.stack.imgur.com/MGQye.png)

## 原始答案

当前的 matplotlib 和对数极坐标图存在更多问题。

例如，尝试在[matplotlib 示例](http://matplotlib.org/examples/pylab_examples/polar_demo.html)中为极坐标图的半径添加一个小值，然后使用`set_rlim(0)`和`set_rscale('log')`绘制它（如此处的评论中所建议的那样）。所有低于 0.1 的值都会得到一些特殊处理。这会影响`r`轴上的刻度（注意完全错位的 10e-2 和 10e-3）以及绘制的数据：

![极坐标图和对数极坐标图示例](../Images/9bfcb1fa9317379280910698ad90968d.png)

该行为似乎没有记录。我最终手动进行了对数转换（上面系列中的第三个图）。对于遇到此线程的其他人，这是我的代码：

```
import numpy as np
import matplotlib.pyplot as plt

def scatter_polar_mpl(ax, theta, r):
    ax.scatter(theta, r)
    ax.set_rlim(0)
    ax.set_title('polar matplotlib')

def scatter_logpolar_mpl(ax, theta, r):
    ax.scatter(theta, r)
    ax.set_rlim(0)
    ax.set_rscale('log')
    ax.set_title('log-polar matplotlib')

def scatter_logpolar(ax, theta, r_, bullseye=0.3, **kwargs):
    min10 = np.log10(np.min(r_))
    max10 = np.log10(np.max(r_))
    r = np.log10(r_) - min10 + bullseye
    ax.scatter(theta, r, **kwargs)
    l = np.arange(np.floor(min10), max10)
    ax.set_rticks(l - min10 + bullseye) 
    ax.set_yticklabels(["1e%d" % x for x in l])
    ax.set_rlim(0, max10 - min10 + bullseye)
    ax.set_title('log-polar manual')
    return ax

r = np.arange(0, 3.0, 0.01) + 0.001

theta = 2 * np.pi * r

ax = plt.subplots(1, 3, subplot_kw=dict(polar=True))[1].flatten()
scatter_polar_mpl(ax[0], theta, r)
scatter_logpolar_mpl(ax[1], theta, r)
scatter_logpolar(ax[2], theta, r)

plt.show() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T18:35:24.437

这似乎是 matplotlib 中的一个错误。您不必在 (or ) 之前调用( `set_rlim`or `set_ylim`) 方法。此外，您必须调用or以 0 或 0.0 作为下限。下限的其他值也将导致崩溃。其他后端也会出现此问题（我已确认 gtkagg 和 pdf 后端的问题）。`set_rscale``set_yscale``set_rlim``set_ylim`

我为此问题提交了一份错误报告，可以在[此处](https://github.com/matplotlib/matplotlib/issues/1847)找到。如果此问题对您有影响，请前往错误报告页面并发表评论，让 matplotlib 开发人员知道此问题对用户很重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T09:11:31.220

当我在设置绘图窗口的行中取出注释时，它会为我运行。

```
import matplotlib.pyplot as plt
import numpy as np
import matplotlib.cm as cm

bazbins = np.linspace(0, 2*np.pi, 360)
fbins = np.logspace(np.log10(0.05), np.log10(0.5), 101)
theta, r = np.meshgrid(bazbins, fbins) 

# Set up plot window
fig, ax = plt.subplots(figsize=(12,9), subplot_kw=dict(projection='polar'))

# polar
ax.set_theta_zero_location('N')
ax.set_theta_direction(-1)
ax.set_rscale('log')

plt.gca().invert_yaxis()
ax.contourf(theta, r, r)
ax.set_ylim((0.0, 0.5))
plt.show() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T20:44:50.283

设置`rscale`在 之后`set_ylim()`，就像上面评论中回答的 theta 一样。

# android - GridView 中的缩略图重复

> ID：14919413
> 
> 赞同：0
> 
> 时间：2013-02-17T08:46:43.627
> 
> 标签：android, gridview, thumbnails

我正在寻找一些帮助来解决为什么 GridView 不显示正确数量的缩略图而是在组中显示大量重复的缩略图的问题？当我上下滚动缩略图列表并返回顶部时，图像的顺序一直在变化。

谁知道可能是什么原因以及如何解决？也许有更好的方法来创建缩略图的 GridView？还是我的手机？我使用的是带有 Android 版本 2.3.3 的 Samsung Young。我读到HTC也有类似的问题。

我真的很感激能够继续我的工作的一些帮助。谢谢！

下面是代码：

```
public class MainActivity extends Activity {

Cursor cursor;
int indexColumn;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Array for the columns to access
    String[] projection = {MediaStore.Images.Thumbnails._ID};

    // Cursor object
    cursor = managedQuery(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, projection, null, null, MediaStore.Images.Thumbnails.IMAGE_ID);

    // Number of columns
    indexColumn = cursor.getColumnIndexOrThrow(MediaStore.Images.Thumbnails._ID);

    GridView gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(new ImageAdapter(this)); // Send this class to constructor

    /*
    gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            Toast.makeText(MainActivity.this, "" + position, Toast.LENGTH_SHORT).show();
        }
    });
    */

    gridview.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

            // Sending image id to FullScreenActivity
            Intent i = new Intent(getApplicationContext(), FullImageActivity.class);
            // passing array index
            i.putExtra("id", position);
            startActivity(i);
        }
    });   
}

// Nested class
public class ImageAdapter extends BaseAdapter {
    private Context mContext;

    // Constructor
    public ImageAdapter(Context c) {
        mContext = c;   
    }

    public int getCount() {
        return cursor.getCount();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {

        ImageView imageView;

        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);

            // Move cursor to current position
            cursor.moveToPosition(position);

            // Get the current value value for the requested column
            int imageId = cursor.getInt(indexColumn);

            // Set content of the image
            imageView.setImageURI(Uri.withAppendedPath(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, "" + imageId));

            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);

        } else {
            imageView = (ImageView) convertView;
        }

        //imageView.setImageResource(mThumbIds[position]);
        return imageView;
    }
}   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:19:05.653

将您的 getView 方法替换为以下内容：

```
// create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {

        ImageView imageView;

        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);

        } else {
            imageView = (ImageView) convertView;
        }

        // Move cursor to current position
            cursor.moveToPosition(position);

            // Get the current value value for the requested column
            int imageId = cursor.getInt(indexColumn);
            // Set content of the image
                  imageView.setImageURI(Uri.withAppendedPath(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, "" + imageId));
                imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        return imageView;
    } 
```

告诉我它是否有效..

# vmware - 捕获 Ctrl+Alt+Del。VMWare 可以，但不应该，对吧？

> ID：14919414
> 
> 赞同：5
> 
> 时间：2013-02-17T08:46:56.873
> 
> 标签：vmware

我的整个计算生涯（至少从 Windows NT 4.0 开始）都假设++`Ctrl`组合键被操作系统视为神圣 - 没有程序可以篡夺这个组合键，并且它总是会被内核的安全层并发出导致显示安全屏幕的最高优先级中断（Windows XP Home Edition 上直接通过 shell 调用任务管理器时除外）。`Alt``Del`

但是我今天使用的是 VMWare Player，我让它捕获了我的鼠标和键盘，但是完成后我想退出并且我忘记了热键组合（注意以备将来参考，我需要双击`Ctrl`+ `Alt`）。我以为我会`Ctrl`++`Alt`调用`Del`安全屏幕并将焦点切换到任务管理器，但是当我按下键时，VMWare Player 重新启动了我的虚拟机——它以某种方式捕获了按键。

所以这次经验告诉我，流程可以捕获 CAD，但它是如何做到的呢？

### 更新：

*   我正在运行 Windows 7 x64。
*   我想知道 VMWare 如何能够捕获 CAD 击键。

### 更新2：

在查看了您链接到的 QA 之后，我查看了我的设备管理器，发现有一个`vmkbd`键盘类过滤器，看起来像是 VMWares - 所以他们可能从那里捕获 SAS/CAD 击键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:43:31.547

回答我自己的问题，虽然克里斯摩根（见我原来的问题的第三条评论）值得称赞。

> 在查看了您链接到的 QA 之后，我查看了我的设备管理器，发现有一个 vmkbd 键盘类过滤器，看起来像是 VMWares - 所以它们可能从那里捕获 SAS/CAD 击键。

我做了更多的研究（阅读：我用谷歌搜索了“vmkbd ctrl alt del”）并找到了其他文章和论坛主题来证实这一解释。

即便如此，驾驶员可以拦截 CAD 的想法还是有点令人不安，尽管它是有道理的。我确实怀念在 USB 之前 CAD 触发硬件 CPU 中断的旧时光。无需驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T12:25:30.017

在用户模式下无法捕获此键盘组合。在内核模式下是可能的。（过滤器）驱动程序坐在那里，以捕获这个*仅限内核的*中断。由于它可以捕获，因此它可以将相同的信息发送到用户模式进程。

# c# - 将 ListView 中的多个唯一用户控件绑定到 ObservableCollection

> ID：14919415
> 
> 赞同：1
> 
> 时间：2013-02-17T08:46:59.477
> 
> 标签：c#, wpf, listview, mvvm-light, observablecollection

我希望用户能够在 10 个或更多唯一的 UserControl 之间进行选择，并以任意顺序将它们显示在列表中，其中包含任意数量的任何 UserControl 的多个实例。因此，列表可能如下所示 UC1、UC1、UC3、UC3、UC 10、UC8 等。需要注意的是，前面示例中的两个 UC1 和两个 UC3 是具有不同关联值的不同实例。本质上，我正在创建一系列命令，并将其解析为真实世界的动作。

问题：我无法将 ListView 中显示的 UserControls 绑定到 ObservableCollection 中的数据。至少，我在 UserControls 中的绑定是错误的，我不知道如何让它们工作。

我正在使用 MVVMLight。我有一个 Window 控件，它只包含一个内容控件，该控件加载了一个名为 CommandView 的 UserControl，这是我的主要显示。CommandView 目前有几个按钮，其属性绑定到 CommandViewModel 中的中继命令，这些命令将唯一的类实例添加到称为 CommandsCollection 的 ObservableCollection。ListView 绑定到封装 CommandsCollection 的属性。

我在后面的代码中使用 DataTemplate 和 DataTemplateSelector 来根据集合中该位置的类类型选择正确的 UserControl（UC1、UC2 等）。我已经成功地工作了，但是我没有将显示的 UserControl 文本框绑定回 ObservableCollection，因此在 UserControl 的文本框中没有显示任何数据。我确实在 ObservableCollection 中设置了类属性的默认值，并将集合写入文本文件并查看这些值是默认值。所以 ObservableCollection 正在查看这些值。

如何在用户控件中设置绑定？这是我在 UC1 用户控制中的内容：

```
 <lightext:UserControl
DataContext="{Binding VelocityCommandStatic, Source={StaticResource Locator}}">

<TextBox Text="{Binding VelocityCommandProperty.VelocityKinematic, 
         UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/> 
```

VelocityCommandStatic – 实际上我也对此有点困惑，但这是在 viewmodellocator.cs 中创建的用户控件的对象 (?)。

最好的绑定方法是什么？xaml 绑定点可以直接回到 ObservableCollection 吗？一个问题是，每个 UserControl 都有不同的属性，我为集合中的每个用户控件放置了一个不同的类（实例）。我会知道这些属性，但需要在 xaml 中正确设置它们。也许这种方法并不理想。我可以在视图模型中将 UserControl 的属性指向 CommandViewViewModel 中 observablecolleciton 中的正确位置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T13:28:44.527

看，你太复杂了。您所需要的只是一个 ObservableCollection，它可以保存您的所有项目和每个项目的适当 DataTemplate。不需要 DataTemplateSelectors 或任何其他类似的东西。`point directly back to the ObservableCollection`此外，无论这意味着什么，都没有必要：

主窗口：

```
<Window x:Class="WpfApplication5.Window3"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication5"
        Title="Window3" Height="300" Width="300">
    <Window.Resources>
        <DataTemplate DataType="{x:Type local:Item1}">
            <local:UserControl1/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type local:Item2}">
            <local:UserControl2/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type local:Item3}">
            <local:UserControl3/>
        </DataTemplate>
    </Window.Resources>
    <ListBox ItemsSource="{Binding}"/>
</Window> 
```

代码背后：

```
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Windows;
using System.ComponentModel;

namespace WpfApplication5
{
    public partial class Window3 : Window
    {
        public Window3()
        {
            InitializeComponent();

            DataContext = new ObservableCollection<ItemBase>
                {
                    new Item1() {MyText1 = "This is MyText1 inside an Item1"},
                    new Item2() {MyText2 = "This is MyText2 inside an Item2"},
                    new Item3() {MyText3 = "This is MyText3 inside an Item3", MyBool = true}
                };
        }
    }

    public class ItemBase: INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;

        protected virtual void NotifyPropertyChange(string propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    public class Item1: ItemBase
    {
        private string _myText1;
        public string MyText1
        {
            get { return _myText1; }
            set
            {
                _myText1 = value;
                NotifyPropertyChange("MyText1");
            }
        }
    }

    public class Item2: ItemBase
    {
        private string _myText2;
        public string MyText2
        {
            get { return _myText2; }
            set
            {
                _myText2 = value;
                NotifyPropertyChange("MyText2");
            }
        }

        private ObservableCollection<string> _options;
        public ObservableCollection<string> Options
        {
            get { return _options ?? (_options = new ObservableCollection<string>()); }
        }

        public Item2()
        {
            Options.Add("Option1");
            Options.Add("Option2");
            Options.Add("Option3");
            Options.Add("Option4");
        }
    }

    public class Item3: ItemBase
    {
        private string _myText3;
        public string MyText3
        {
            get { return _myText3; }
            set
            {
                _myText3 = value;
                NotifyPropertyChange("MyText3");
            }
        }

        private bool _myBool;
        public bool MyBool
        {
            get { return _myBool; }
            set
            {
                _myBool = value;
                NotifyPropertyChange("MyBool");
            }
        }
    }
} 
```

用户控件1：

```
<UserControl x:Class="WpfApplication5.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Border BorderBrush="Black" BorderThickness="1">
        <StackPanel>
            <TextBlock Text="This is UserControl1"/>
            <TextBlock Text="{Binding MyText1}"/>
        </StackPanel>
    </Border>
</UserControl> 
```

用户控件2：

```
<UserControl x:Class="WpfApplication5.UserControl2"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Border BorderBrush="Black" BorderThickness="1">
        <StackPanel>
            <TextBlock Text="This is UserControl2"/>
            <TextBox Text="{Binding MyText2}"/>
            <ComboBox ItemsSource="{Binding Options}" SelectedItem="{Binding MyText2}"/>
        </StackPanel>
    </Border>
</UserControl> 
```

用户控件3：

```
<UserControl x:Class="WpfApplication5.UserControl3"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Border BorderBrush="Black" BorderThickness="1">
        <StackPanel>
            <TextBlock Text="This is UserControl3"/>
            <TextBlock Text="{Binding MyText3}"/>
            <CheckBox Content="This is the MyBool Property" IsChecked="{Binding MyBool}"/>
        </StackPanel>
    </Border>
</UserControl> 
```

只需将我的代码复制并粘贴到文件 - 新建 - WPF 应用程序中，然后自己查看结果。它看起来像这样：

![在此处输入图像描述](../Images/2a05e9985f6d84322142b87dd3deb4c6.png)

# php - glob没有拾取一些文件？

> ID：14919416
> 
> 赞同：0
> 
> 时间：2013-02-17T08:47:12.083
> 
> 标签：php, mp3, glob

```
$files = glob("*.*");
for ($i=1; $i<count($files); $i++){
    $file = $files[$i];
    echo "$file<br />";
} 
```

我正在尝试显示目录​​中的所有文件，这是在获取我在此目录中的 .php 文件，但没有找到 mp3 文件。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:49:26.917

可能这行得通:)

```
for ($i=0; $i<count($files); $i++){ 
```

你为什么不使用 foreach

```
foreach (glob("*.*") as $filename) {
    echo "$filename size " . filesize($filename) . "\n";
} 
```

# objective-c - 使用 Wahoo API 连接到外部附件

> ID：14919417
> 
> 赞同：4
> 
> 时间：2013-02-17T08:47:18.820
> 
> 标签：objective-c, xcode4.5

我正在将 Wahoo api 用于使用 Wahoo 的外部附件（ANT+ 键）的 iPhone 应用程序。我在“将二进制文件与项目链接”部分下的“构建阶段”选项卡中添加了框架版本 2.3.5。然后，我创建了一个 test.h 和 test.m。我导入了头文件 WFConnector/WFConnector.h 并声明了一个属性

```
@property(nonatomic,retain) WFHardwareConnector* hardwareConnector; 
```

在 test.m 中，在一个方法中，假设“getHWConnect”我输入了以下内容

```
hardwareConnector = [WFHardwareConnector sharedConnector];    
hardwareConnector.delegate = self; 
```

但是，当我尝试使用检查 ANT+ 键的状态时

```
if(hardwareConnector.isCommunicationHWReady) 
```

我收到以下错误

```
"Property 'isCommunicationHWReady' not found on object of type "WFHardwareConnector *" 
```

但是，该属性在标题中！检查我在下面附上的图片

![错误](../Images/755ae9389b032ad9cc5fb647903363ac.png)

![标题中的属性](../Images/79522a42fb3dd8547933e9cf1f97d4a1.png)

也可以在[api.wahoofitness.com](http://api.wahoofitness.com/interface_w_f_hardware_connector.html#a8abb006def39ef55ec1e743af0a100d8)中查看。

我犯了什么错误？请在这方面帮助我。

# .net - Outlook 邮件项目实际关闭时的事件

> ID：14919419
> 
> 赞同：1
> 
> 时间：2013-02-17T08:47:32.477
> 
> 标签：.net, events, outlook, interop

我有一个使用`Microsoft.Office.Interop.Outlook`互操作程序集的 .NET 应用程序。

应用程序打开一个新的 Outlook `MailItem`，然后*如果电子邮件已发送*（通过用户单击“发送”）记录日志条目，或者知道*它是否在未发送的情况下关闭*（保存为草稿或丢弃）。

通过订阅[`ItemEvents_10_Event.Send`](http://msdn.microsoft.com/en-us/library/office/microsoft.office.interop.outlook.itemevents_10_event.send%28v=office.14%29.aspx)事件可以很容易地捕获发送项目的时间。

但是，为了在项目关闭时捕获，我只能找到[`ItemEvents_10_Event.Close`](http://msdn.microsoft.com/en-us/library/office/microsoft.office.interop.outlook.itemevents_10_event.close%28v=office.14%29.aspx)事件。但是，此事件*在项目关闭时**触发***，而不是*在项目关闭时**触发***。更糟糕的是，在我收到事件*后*，用户仍有机会取消操作。会发生什么：

1.  我的应用程序打开了新的`MailItem`.
2.  用户单击关闭按钮。
3.  **`ItemEvents_10_Event.Close`被解雇**。
4.  控制权返回到 Outlook，*然后*显示 Outlook 的“是否要保存更改（是/否/取消）”对话框。
5.  用户按下取消。*（我没有收到通知）*
6.  然后，用户可以做任何他们想做的事情，包括发送电子邮件或再次关闭它。

有没有办法：

*   订阅一个在项目关闭而不是关闭时通知我的**事件**？*（最好的）*
*   或者，知道用户在上述场景中何时按下取消？*（一个黑客，但它会做）*

如果我可以区分电子邮件是*关闭并丢弃*还是*另存为草稿*，那将是一个奖励。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-11-29T09:10:49.723

使用检查器关闭事件：

```
inspector = mailItem.GetInspector;
((InspectorEvents_10_Event) inspector).Close += CloseEventHandler;

void CloseEventHandler(){
    //execute only when email window is closed or closing
    // without problem with confirmation dialog (yes/no/cancel)
} 
```

要解决*关闭*或*关闭*问题，您可以检查 mailItem 发送事件。如果它已触发，则“关闭”，否则，用户关闭窗口而不发送电子邮件。

# java - java中带扩展的目录遍历

> ID：14919424
> 
> 赞同：0
> 
> 时间：2013-02-17T08:48:02.190
> 
> 标签：java, directory, traversal

我正在尝试制作一个遍历具有指定扩展名的目录和子目录的程序。这是我到目前为止的代码。我正在尝试使用endsWith方法但是因为我传递文件类型的参数进行递归调用，我不能使用增强的 For 循环中的字符串。

```
import java.io.File; 
```

公共类 Traverse_Recursively {

```
/**
 * @param args
 */
public static void main(String[] args) {
    File inputFolder = new File("c:/inputFolder");
    traverse(inputFolder, "");
}

public static void traverse(File parentNode, String leftIndent) {
    if (parentNode.isDirectory()) {
        System.out.println(leftIndent + parentNode.getName());

        leftIndent += "     ";

        File childNodes[] = parentNode.listFiles();
        for (File childNode : childNodes) {
            traverse(childNode, leftIndent);
        }
    } else {

        System.out.println(leftIndent +"|   --> "+ parentNode.getName());

    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:24:51.287

You could use the Java 7 Files.walkFileTree method - it'll make things much easier I think:

```
 Path path = Paths.get(<your root directory>);
    Files.walkFileTree(path, new FileVisitor<Path>() {
        @Override
        public FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attrs) throws IOException {
            return FileVisitResult.CONTINUE;
        }

        @Override
        public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) throws IOException {
            System.out.println("visitFile: " + file.getFileName());
            return FileVisitResult.CONTINUE;
        }

        @Override
        public FileVisitResult visitFileFailed(Path file, IOException exc) throws IOException {
            return FileVisitResult.CONTINUE;
        }

        @Override
        public FileVisitResult postVisitDirectory(Path dir, IOException exc) throws IOException {
            System.out.println("postVisitDirectory: " + dir.getFileName());
            return FileVisitResult.CONTINUE;
        }
    }); 
```

If you're only interested in files, you only need to do something in the visitFile method.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T10:37:18.957

如果您使用的是 java 6 或更早版本，则可以为此目的使用 apache commons FileUtils 或 DirectoryWalker。

# python - 在数据库中输入特殊字符

> ID：14919425
> 
> 赞同：0
> 
> 时间：2013-02-17T08:48:53.177
> 
> 标签：python, sqlite, special-characters

我正在扫描我的系统并使用 python 将文件名输入到 sqlite3 数据库中。

其中一个文件的名称中恰好有一个特殊字符，并且在插入记录时会产生错误。这是文件名。

```
 a¿.mp3 
```

这是查询

```
self.cursor.execute("INSERT INTO TRACKS VALUES (?)", i) 
```

同样由于特殊字符，我无法将其编码为 utf-8。

是否有其他编码可用于将此数据添加到数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:50:38.850

您可以尝试 utf-16 编码，或在特殊字符周围添加 ''。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T10:36:29.307

你用`os.walk`这个吗？如果这样做，则不要将目录名称作为裸字符串传递，而是作为 unicode 对象传递，例如`os.walk(u'/some/path')`获取 unicode 中的所有文件。然后你可以用 utf-8 （或者 utf-16 如果 utf-8 不够的话）对它们进行编码`filename.encode('utf-8')`

# c# - LongListSelector 和 ContextMenu

> ID：14919437
> 
> 赞同：0
> 
> 时间：2013-02-17T08:49:34.810
> 
> 标签：c#, wpf, silverlight, windows-phone-7

我正在使用以下代码创建一个页面，并在用户长按时`LongListSelector`添加一个：`ContextMenu``ListBoxItem`

```
<Controls:LongListSelector Height="Auto" x:Name="historylist" HorizontalContentAlignment="Stretch"  
                                   Background="White" SelectionChanged="DidPressSelectItem" Hold="HoldListBox">
            <Controls:LongListSelector.ItemTemplate>
                <DataTemplate>
                    <local:SearchTemplateSelector Content="{Binding}" HorizontalContentAlignment="Stretch">
                        <toolkit:ContextMenuService.ContextMenu>
                            <toolkit:ContextMenu>
                                <toolkit:MenuItem Header="Remove from history" Click="DeleteVideoFromHistory"/>
                                <toolkit:MenuItem Header="Remove from cache" Click="DeleteVideoFromCache"/>
                            </toolkit:ContextMenu>
                        </toolkit:ContextMenuService.ContextMenu>

                        <local:SearchTemplateSelector.VideoTemplate>
                            <DataTemplate>
                                <Grid>
                                    <Rectangle Height="1" HorizontalAlignment="Stretch" VerticalAlignment="Top" Fill="Black" Opacity="0.3" />
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="100" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <Image Margin="0" Source="{Binding Path=ImgUrl}" HorizontalAlignment="Left" Width="100" Height="100" Tag="{Binding idStr}"/>
                                        <Grid Grid.Column="1" Margin="10,0,8,0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="60"/>
                                                <RowDefinition Height="*"/>
                                                <RowDefinition Height="*"/>
                                            </Grid.RowDefinitions>
                                            <TextBlock Text="{Binding Name}" FontSize="20" Foreground="Black" TextWrapping="Wrap" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
                                            <StackPanel Orientation="Horizontal" Margin="0,-5,0,0" Grid.Row="1">
                                                <TextBlock Text="Views:  " FontSize="20" Foreground="Black"/>
                                                <TextBlock Text="{Binding ViewCount}" FontSize="20" Foreground="Black"/>
                                            </StackPanel>

                                            <Grid Grid.Row="2">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <TextBlock Text="{Binding TimeStr}" FontSize="20" Foreground="Black" Margin="0,0,0,0" />
                                            </Grid>
                                        </Grid>
                                    </Grid>

                                </Grid>

                            </DataTemplate>
                        </local:SearchTemplateSelector.VideoTemplate>

                        <local:SearchTemplateSelector.VideoTemplateCached>
                            <DataTemplate>
                                <Grid>
                                    <Rectangle Height="1" HorizontalAlignment="Stretch" VerticalAlignment="Top" Fill="Black" Opacity="0.3" />
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="100" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <Image Margin="0" Source="{Binding Path=ImgUrl}" HorizontalAlignment="Left" Width="100" Height="100" Tag="{Binding idStr}"/>
                                        <Grid Grid.Column="1" Margin="10,0,8,0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="60"/>
                                                <RowDefinition Height="*"/>
                                                <RowDefinition Height="*"/>
                                            </Grid.RowDefinitions>
                                            <TextBlock Text="{Binding Name}" FontSize="20" Foreground="Black" TextWrapping="Wrap" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
                                            <StackPanel Orientation="Horizontal" Margin="0,-5,0,0" Grid.Row="1">
                                                <TextBlock Text="Views:  " FontSize="20" Foreground="Black"/>
                                                <TextBlock Text="{Binding ViewCount}" FontSize="20" Foreground="Black"/>
                                            </StackPanel>

                                            <Grid Grid.Row="2">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <TextBlock Text="{Binding TimeStr}" FontSize="20" Foreground="Black" Margin="0,0,0,0" />
                                                <TextBlock Text="Cached" FontSize="20" Foreground="Red" Margin="50,0,0,0" Grid.Column="1" />
                                            </Grid>
                                        </Grid>
                                    </Grid>

                                </Grid>

                            </DataTemplate>
                        </local:SearchTemplateSelector.VideoTemplateCached>

                    </local:SearchTemplateSelector>
                </DataTemplate>

            </Controls:LongListSelector.ItemTemplate>
        </Controls:LongListSelector> 
```

这是`DeleteVideoFromHistory`方法：

```
private void DeleteVideoFromHistory(object sender, RoutedEventArgs e)
    {
        VideoItem video = (sender as MenuItem).DataContext as VideoItem;
        if (video == null) { return; }

        historyRep.RemoveFromHistory(video);
        this.RelodeTableData();
    } 
```

问题是，当 ai 在和 Item 上按下 Longpress 并单击其中的一个项目`ContextMenu`并在其他列表框中再次按下时，我得到最后一个 VideoItem 而不是我刚刚按下的当前。知道如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T09:42:07.640

我也遇到过这个问题，并通过清除 ContextMenu 的 Unload 上的 DataContext 来解决它。

```
 private void ContextMenu_Unload(object sender, RoutedEventArgs e)
    {
        ContextMenu conmen = (sender as ContextMenu);
        conmen.ClearValue(FrameworkElement.DataContextProperty);
    } 
```

# excel - 想根据另一行的匹配内容对某一行的内容求和（不知道SUMIF是否适用）

> ID：14919439
> 
> 赞同：0
> 
> 时间：2013-02-17T08:50:00.880
> 
> 标签：excel

这是操作的期望结果

![这是操作的期望结果](../Images/e77c17d37f22fa381a2ffb16b58f6c4e.png)

因此，该函数应将所有匹配 A 值的所有 B 值相加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T08:54:39.960

进入 C1 ，然后扩展为 C1:C4 ：

```
=IF(A1<>A2,SUMIF(A:A,A1,B:B),"") 
```

IF 检查下一行是否不同，如果是，则使用 SUMIF。如果你的数据没有排序，你可以做一个稍微复杂的检查，看看它下面是否没有更多的 A1 值（使用 COUNTIF）。

# sockets - Unix 域套接字的原理。它是如何工作的？

> ID：14919441
> 
> 赞同：13
> 
> 时间：2013-02-17T08:50:02.840
> 
> 标签：sockets, unix, unix-socket

我正在研究 Unix 域套接字。特别是关于它是如何工作的。我用很多关键字搜索了很多次，但结果都是关于 API、系统调用、如何使用它、示例...... 我也读过管道和 FIFO，因为据说 Unix 域套接字与管道和 FIFO 相同，但我仍然想了解更多关于 Unix 域套接字的概念/原则。它是如何工作的？（也许在内核级别，因为 Wiki 这么说：“这允许两个进程打开同一个套接字以进行通信。但是，通信完全发生在操作系统内核中。”

我还是想知道为什么 Unix 域的 Socket 纪录片比 Pipe 或 FIFO 少？也许是因为它是多年前出生的？

谁能告诉我任何想法或阅读哪些书籍/链接？

提前致谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-17T09:04:42.710

Unix 套接字用作任何其他套接字类型。这意味着，套接字系统调用用于它们。FIFO 和 Unix 套接字之间的区别在于 FIFO 使用文件系统调用，而 Unix 套接字使用套接字调用。

Unix 套接字作为文件寻址。它允许使用文件权限进行访问控制。

Unix 套接字是由套接字系统调用创建的（而 FIFO 是由 mkfifo 创建的）。如果您需要客户端套接字，则调用 connect，将其传递给服务器套接字地址。如果你需要服务器套接字，你可以绑定分配它的地址。同时，对于 FIFO 开放调用被使用。IO 操作是通过读/写来执行的。

Unix socket 可以区分它的客户端，而 FIFO 不能。关于对等点的信息由接受调用提供，它返回对等点的地址。

Unix 套接字是双向的。这意味着每一方都可以执行读取和写入操作。而 FIFO 是单向的：它有一个写入端和一个读取端。

与 localhost IP 套接字相比，Unix 套接字产生的开销更少，通信速度更快。数据包不需要像 localhost 套接字那样通过网络堆栈。而且由于它们仅存在于本地，因此没有路由。

如果您需要有关 Unix 套接字如何在内核级别工作的更多详细信息，请查看 Linux 内核源代码中的 net/unix/af_unix.c 文件。

# ios - [__NSCFString setView:]: 无法识别的选择器发送到实例 0x8292720

> ID：14919442
> 
> 赞同：-3
> 
> 时间：2013-02-17T08:50:03.167
> 
> 标签：ios, modal-dialog, uisearchdisplaycontroller, nscfstring

我将 searchBar 和 searchDisplayController 放在作为主标签栏的标签栏中。
当我通过推打开新的视图控制器时没有问题。

> mainTabbar -> navigationController+searchController -(push after rowdidselect)-> newVC -(push)-> newVC -(push)-> ...

但是当我做一些现在的模态时。

> mainTabbar -> navigationController+searchController -(push after rowdidselect)-> newVC -(modal)-> newVC

然后返回 searchResult

> mainTabbar -> 导航控制器+搜索控制器

我无法再次推送 newViewController 并收到以下错误：

```
[__NSCFString setView:]: unrecognized selector sent to instance 0x8292720 
```

我怎么了？所有结果都只是告诉我有关手势识别器的信息。

::启用僵尸后，我收到了此消息

> -[UITapGestureRecognizer 保留]：发送到已释放实例 0xfcd83b0 的消息

我猜在 searchDisplayController 表的单元格中的 TapGestureRecognizer 已被释放。有人知道如何保留它们吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:59:35.897

您并没有真正提供有关您的案例的太多信息，但通常是错误日志：

```
[__NSCFString setView:]: unrecognized selector sent to instance 0x8292720 
```

表示您试图将`setView`消息发送到类型错误的对象`NSString`。

由于您说您的代码在一种情况下工作，我认为这不是*您*将消息发送到错误对象的问题。相反，这与被释放的正确对象有关，并且它的内存被重用于`NSString`对象（然后接收消息）。

我怀疑关键可能在于您如何返回搜索结果，但您应该提供更多代码让我们了解正在发生的事情。

# c# - 有任何开源 API 可以靠近印度特定位置的餐厅吗？

> ID：14919443
> 
> 赞同：0
> 
> 时间：2013-02-17T08:50:37.443
> 
> 标签：c#, windows-mobile

我正在开发一个移动应用程序来获取餐厅的详细信息，例如位于**印度的用户的地理位置和评分。**我想到了使用 Zomato。由于它现在不是免费的，有人可以指点我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:22:27.910

How about Bing Maps API? [there](http://www.microsoft.com/maps/product/features.aspx)

# c++ - C++。与 code::blocks ide 相关。“对象未在此范围内声明”错误

> ID：14919448
> 
> 赞同：-1
> 
> 时间：2013-02-17T08:51:10.253
> 
> 标签：c++

我正在使用代码::块。我曾经使用涡轮 C++ 3.0。

我编写了以下代码并得到了一个有点不可能的错误：

```
#include<iostream>
#include<conio.h>

int main()
{
    using namespace std;

    clrscr();

    char name[20];

    cout<<"\nEnter your name:";

    cin.getline(name,20);

    cout<<"\nName stored";

    clrscr();

    cout<<"\nName:"<<name;

    getch();
    return 0;

} 
```

它显示 cout、cin 和 clrscr() 未在此范围内声明的错误。我不明白为什么要显示这个。

我在 Turbo C++ 3.0 中运行了相同的代码，这是我之前使用的编译器。我在那里没有这样的错误。请帮助纠正这个错误。

请告诉我这里有什么问题以及为什么它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T09:49:07.083

这就是为什么人们建议您使用标准库而不是依赖于编译器特定的 API。

TurboC++`<conio.h>`不是标准的 C++/C 头文件。

解决方法：

对于 Linux：[libconio.h](http://sourceforge.net/projects/linux-conioh/)

对于窗户：

```
 #include <conio.h>
  #define clrscr() system("cls");
  #define getch() kbhit() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T08:54:01.827

Conio.h 适用于 borland 编译器。使用 curses.h。Turbo c++ 基于 borland 编译器。

MingGw 是 Code::blocks 的默认编译器，它基于 GNU 编译器。标头将被导入，但大多数功能将不可用。

# http - 使用 urllib2.urlopen() 打开 URL 'get' 或 'post' 时的默认方法是什么

> ID：14919453
> 
> 赞同：0
> 
> 时间：2013-02-17T08:51:59.843
> 
> 标签：http, python-2.7

```
import urllib2,urllib
params = {}
resp = urllib2.urlopen('http://somewhere/',urllib.urlencode(params)) 
```

在 urlopen() 方法中，方法 'get' 或 'post' 没有 argv。这种方法可以通过所需的 url 找出“get”或“post”吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T08:55:25.613

从[文档](http://docs.python.org/2/library/urllib2.html)中：

> `urllib2.urlopen(url[, data][, timeout])`
> 
> `data`可以是一个字符串，指定要发送到服务器的附加数据，或者`None`如果不需要此类数据。目前，HTTP 请求是唯一使用`data`; 提供参数时，HTTP 请求将是 a`POST`而不是 a 。应该是标准格式的缓冲区。该 函数采用 2 元组的映射或序列，并以这种格式返回一个字符串。urllib2 模块发送 包含 Connection:close 标头的请求。`GET``data``data``application/x-www-form-urlencoded``urllib.urlencode()``HTTP/1.1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T08:55:35.553

它计算出`GET`或`POST`基于给定的参数。在您的情况下，这将是`POST`因为提供了参数字典。

使用`POST`你可以这样做（来自[文档](http://docs.python.org/2/library/urllib.html)）

```
import urllib
params = urllib.urlencode({'spam': 1, 'eggs': 2, 'bacon': 0})
f = urllib.urlopen("http://www.musi-cal.com/cgi-bin/query", params)
print f.read() 
```

请注意，我们在这里将字典传递给函数。

要使用`GET`，我们只需单独传递 URL（这里我们使用字符串插值将参数添加到 URL，而不是将其传递给 URL lib）

```
import urllib
params = urllib.urlencode({'spam': 1, 'eggs': 2, 'bacon': 0})
f = urllib.urlopen("http://www.musi-cal.com/cgi-bin/query?%s" % params)
print f.read() 
```

# ruby-on-rails-3 - Writing a Rails cancan ability using an association, that works with accessible_by

> ID：14919456
> 
> 赞同：2
> 
> 时间：2013-02-17T08:52:41.457
> 
> 标签：ruby-on-rails-3, cancan

Working on an app where a `User` belongs_to an `Organization`. An `Organization` has_and_belongs_to_many Products, though an `organizations_products` table.

I want a `User` with a particular role to be able to manage Products for their `Organization`. In `ability.rb`:

```
def initialize(user)
  # ...snip unrelated stuff
  elsif user.is_manager?
    can :manage, Product, do |product|
      user.organization.products.include?(product)
    end 
```

This describes what I want to do but it raises an exception in the products controller:

```
def index
    @products =  Product.accessible_by(current_ability)
end 
```

because `acessible_by` [can't be used with blocks](https://stackoverflow.com/questions/3557091/using-blocks-to-define-abilities-in-cancan-raises-an-exception) in ability definitions. How can I write this ability in a way that is compatible with `accessible_by`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T18:07:38.387

```
can :manage, Product, user.organization.products do |product|
  user.organization.products.include?(product)
end 
```

澄清一下：CanCan 在 1.6 版中添加了第三个参数，您可以将其理解为 access_by 使用的范围。用于评估的块`can :manage, @a_specific_product`，如果您使用其中任何一个（范围或块），您可能应该同时使用两者。

另请参阅：[这个问题](https://stackoverflow.com/a/17532906/1546887)，主要是这个问题的一个副本，以及[文档](https://github.com/ryanb/cancan/wiki/Defining-Abilities-with-Blocks)。

# c# - InputPane.Showing/Hiding never called

> ID：14919458
> 
> 赞同：3
> 
> 时间：2013-02-17T08:52:48.067
> 
> 标签：c#, xaml, windows-phone-8

I'm trying to do some smart resizing of XAML elements when the software keyboard is opened in my WP8 app, and for some reason the InputPane.Showing/Hiding events are never getting called. Inside my `OnNavigatedTo` override, I have the following:

```
InputPane inputPane = InputPane.GetForCurrentView();
inputPane.Showing += (InputPane sender, InputPaneVisibilityEventArgs args) =>
{
    outputTextScroller.Height -= args.OccludedRect.Height;
};

inputPane.Hiding += (InputPane sender, InputPaneVisibilityEventArgs args) =>
{
    outputTextScroller.Height += args.OccludedRect.Height;
}; 
```

Putting breakpoints into the lambda expressions, I find that the code is never getting called. No exceptions are being thrown, and nothing else in the app seems to be malfunctioning. Does anyone know why these events would not be being triggered? The input pane is opened either when I tap a TextBox for data entry, or tap a TextBlock which then focuses the TextBox for that data entry.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-23T10:45:24.443

我在 Microsoft Connect 上添加了一个错误报告，如果您也有兴趣解决此问题，请点赞： [https ://connect.microsoft.com/VisualStudio/feedback/details/814487/allow-inputpane-events-to-在非本机 Windows 电话 8 应用程序中触发](https://connect.microsoft.com/VisualStudio/feedback/details/814487/allow-inputpane-events-to-be-triggered-in-non-native-windows-phone-8-applications)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-18T15:36:49.480

[InputPane](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.inputpane.aspx)的文档声明它仅支持“仅本机应用程序”。为了确定何时显示虚拟键盘，您需要处理[GotFocus](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.windows.uielement.gotfocus%28v=vs.105%29.aspx)和[LostFocus](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.windows.uielement.lostfocus%28v=vs.105%29.aspx)事件。

# javascript - 使用 jQuery 监听 keydown 事件

> ID：14919459
> 
> 赞同：42
> 
> 时间：2013-02-17T08:52:48.817
> 
> 标签：javascript, jquery, event-handling, onkeydown, jquery-events

我想在将动态注入的 HTML 上检测何时按下回车键。

为了简单地检测何时按下回车键，我可以这样做：

```
$('#textfield').keydown(function (e){
    if(e.keyCode == 13){
        console.log('Enter was pressed');
    }
}) 
```

此代码适用于`on()`，但我担心它效率低下，因为 jQuery 会在每次按下键时进行检查。这有什么低效的吗？

```
$('body').on('keydown','#textfield', function(event) {
  if (event.keyCode == 13) {
    console.log('Enter was pressed');
  }
} 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-17T09:02:49.377

如果您想在页面上的任何位置捕获按键 -

```
$(document).keypress(function(e) {
  if(e.which == 13) {
    // enter pressed
  }
}); 
```

不用担心这会检查每个按键，它实际上并没有给浏览器带来任何显着的负载。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-12-08T16:03:37.203

你仍然可以使用 .on()

```
$(document).off('keyup#textfield');

$(document).on('keyup#textfield', function(event) {
    if (event.keyCode == 13) {
         console.log('Enter was pressed');
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T08:59:04.077

实际上，您无需担心。浏览器已经开始冒泡该事件，即使它可能被`body`委托事件捕获并运行选择器，这对于 JQuery 执行来说并不是一个深入或困难的实际检查，尤其是对于仅 ID 的选择器.

# c# - 如何从数据库表中返回数据表，而不是使用 adapter.fill

> ID：14919460
> 
> 赞同：1
> 
> 时间：2013-02-17T08:52:54.260
> 
> 标签：c#, ado.net

我希望返回一个不使用 adapter.fill 技术的数据表。

```
 internal DataTable ConnectedSelect(string TableName, string[] Cols, string Condition)
    {
        DataTable dt = new DataTable();
        using (SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString))
        {
            con.Open();
            using (SqlCommand cmd = new SqlCommand(GenerateSelectStatment(TableName, Cols, Condition),con))
            {
                SqlDataReader rdr = cmd.ExecuteReader();
                object[] temp = new object[rdr.FieldCount];
                while (rdr.Read())
                {
                   rdr.GetValues(temp);
                   dt.Rows.Add(temp);
                }
            }
        }
        return dt;
    }
    } 
```

问题是我得到输入数组比这个表中的列数长。表有 4 列 可能是什么问题？rows.add 应该添加与输入相同的具有 4 个元素的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T08:57:33.740

您可以使用`load`以下方法`DataTable`

```
 dt.Load(rdr); 
```

整个代码将是

```
internal DataTable ConnectedSelect(string TableName, string[] Cols, string Condition)
{
    DataTable dt = new DataTable();
    using (SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString))
    {
        con.Open();
        using (SqlCommand cmd = new SqlCommand(GenerateSelectStatment(TableName, Cols, Condition),con))
        {
            SqlDataReader rdr = cmd.ExecuteReader();
            if(rdr.HasRows)
               dt.Load(rdr);
        }
    }
    return dt;
}
} 
```

# java - Java reflection invoking main method of jar sometimes throws ClassNotFoundException?

> ID：14919468
> 
> 赞同：1
> 
> 时间：2013-02-17T08:53:49.283
> 
> 标签：java, reflection, classloader, main, classnotfoundexception

I'm invoking another jar file using reflection like this `mainMethod.invoke(null, new Object[] { passargs });` (basic stuff). It works for most jar files, but for one I keep getting a `ClassNotFoundException`. It's erroring out on the first line of code in the external jar which is creating a new object defined in that jar (although the other classes load their own jar-classes fine). Since the error is occuring on the first line of the jar's main method, I don't think it's using any custom classloaders.

Any ideas what could cause a ClassNotFoundException when calling the main method of another jar? **This works for many other complex jars. Just one of them isn't working, and I'm wondering what could be the cause. It works fine when I executed it individually with `java -jar`**

```
//my jar
JarFile jar = new JarFile(load);
Attributes attributes = jar.getManifest().getMainAttributes();
String mainClass = attributes.getValue("Main-Class");

URLClassLoader cl = new URLClassLoader(new URL[] { new File(load).toURI().toURL() }, ClassLoader.getSystemClassLoader());
Class main = cl.loadClass(mainClass);
System.out.println("MAIN CLASS: " + mainClass);
Method mainMethod = main.getDeclaredMethod("main", new Class[] { String[].class });
mainMethod.invoke(null, new Object[] { new String[0] }); 
```

It throws the exception on this line (Other jar - one being invoked)

```
public static void main(String[] args) throws Exception {
    LoadingScreen ls = new LoadingScreen(); 
```

Exception:

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/spoutcraft/launcher/gui/LoadingScreen
at org.spoutcraft.launcher.Main.main(Main.java:106)
at com.mineshaftersquared.MineshafterSquaredGUI.wrapJar(Driver.java:110)
at com.mineshaftersquared.resources.ServerProxy.main(ServerProxy.java:71)

Caused by: java.lang.ClassNotFoundException: org.spoutcraft.launcher.gui.LoadingScreen
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
... 3 more 
```

# c - Accessing a pointer in a struct that is in a struct

> ID：14919470
> 
> 赞同：-2
> 
> 时间：2013-02-17T08:53:51.463
> 
> 标签：c, pointers, struct

An error is thrown, and I'm not sure sure why:

> physics.c:74: error: incompatible types in initialization

```
typedef struct gameBody gameBody;

struct gameBody
{
    cpBody *body;
    int numberOfShapes;
    cpShape *arrayOfShapes; //This stores an array of pointers to Shapes
};

//Struct that stores the cpSpace object and the array of pointers to the body objects
typedef struct gameSpace gameSpace;

struct gameSpace
{ 
    cpSpace *space;
    int numberOfObjects;
    gameBody *arrayOfObjects;       //This stores an array of gameBodys
};

for(int i = 0; i < space -> numberOfObjects; i++)
{
    //body info
    gameBody *gBody = space -> arrayOfObjects[i];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T08:57:04.067

I'm guessing it's in the line

```
gameBody *gBody = space -> arrayOfObjects[i]; 
```

While `space->arrayOfObject` is a pointer, `space->arrayOfObject[i]` *is not* a pointer.

You either have to declare `gBody` to not be a pointer:

```
gameBody gBody = space->arrayOfObjects[i]; 
```

Or use the address-of operator on the object in the array;

```
gameBody *gBody = &space->arrayOfObjects[i]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T08:57:28.323

try

```
 gameBody *gBody = &(space -> arrayOfObjects[i]); 
```

or

```
gameBody *gBody = space -> arrayOfObjects + i; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T08:58:05.870

`gBody`是 类型`gameBody *`，`space->arrayOfObjects[i]`是 类型`gamebody`。也许你想要：

```
gameBody *gBody = &space->arrayOfObjects[i]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T08:58:09.047

根据您发布的代码

`gameBody *gBody = space->arrayOfObjects[i]`<~问题来了...

应该是：

`gameBody *gBody = &(space->arrayOfObjects[i]);`

# jquery - removeClass/addClass doesn't work in IE8?

> ID：14919478
> 
> 赞同：0
> 
> 时间：2013-02-17T08:55:03.977
> 
> 标签：jquery, internet-explorer

A project I'm working on has a table of "buttons" (could also be thought of as tabs), where one can be selected/highlighted at a time just by clicking it. Simple enough. A few lines of code and it worked in all browsers, except IE8 and earlier. In my original code, IE8 wouldn't unselect any buttons ever (removeClass didn't work), unless an alert is displayed at the same time (??). It seems IE8 doesn't play nice in jsFiddle, so I made a codepen example - [http://codepen.io/anon/pen/FHfwc](http://codepen.io/anon/pen/FHfwc) . Though for some reason, the clicking doesn't activate any buttons in IE8 there (so addClass is not working). But, as it should, it works fine in all other browsers. Any ideas?

# c# - Unable to write to database but able to read

> ID：14919480
> 
> 赞同：0
> 
> 时间：2013-02-17T08:55:11.713
> 
> 标签：c#, winforms, connection-string, readonly

In my windows form application, I have placed database with in the project.

But I am not able to write anything into the database. My winforms can read all the contents of the database.

How can I solve this problem?

Currently the database is in the following location:

```
C:\Users\Amrit\Documents\Visual Studio 2012\Projects\Purchase Management\Purchase Management\Resources\App_Data 
```

In `app.config` file I have this configuration:

```
<configuration>
    <configSections>
    </configSections>
    <connectionStrings>
        <add name="Database" connectionString="Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\Resources\App_Data\Database.accdb;Persist Security Info=False;"
            providerName="System.Data.OleDb" />
        <add name="Purchase_Management.Properties.Settings.DatabaseConnectionString"
            connectionString="Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\Resources\App_Data\Database.accdb"
            providerName="System.Data.OleDb" />
    </connectionStrings>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
</configuration> 
```

And I am accessing the database from classes using this;

```
string connString = ConfigurationManager.ConnectionStrings["Database"].ConnectionString; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:17:48.760

我认为，SQL File Writer 服务对该文件夹没有写入权限。您可以设置 ACL 或更改文件夹。

# macos - 从 shell 脚本或直接在终端中调用 kill 有什么区别

> ID：14919484
> 
> 赞同：0
> 
> 时间：2013-02-17T08:55:51.497
> 
> 标签：macos, shell, terminal, kill

我试图通过这个 shell 脚本中的 ID 杀死一个进程。

```
# based on
# http://stackoverflow.com/questions/6437602/shell-script-to-get-the-process-id-on-linux
output=`ps -ax|grep Ad[o]be\ After\ Effects\ CS6`;
# set -- parses the ps output into words,
# and $1 is the first word on the line
# which happens to be the process ID
set -- $output;
pid=$1;
echo "I'm about to kill process " $pid;
killall -SEGV $pid; 
```

但这给了我这个结果

```
No matching processes belonging to you were found 
```

当我使用相同的 ID 时，我的脚本会回显并直接执行命令，它会执行应有的操作。

```
kill -SEGV 50283 
```

那么有什么区别呢？我该怎么做才能让我的脚本表现得好像它在“我”的位置（我认为这是具有用户权限的东西）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:09:06.290

在您的脚本中，您说`killall`which 按名称查找进程。在您的终端中，您说`kill`哪个需要 PID。前者是错误的，尽管可以说您应该在脚本中使用 killall 而不是自己实现类似的东西。

# c++ - wrapping map access, smart or stupid?

> ID：14919490
> 
> 赞同：1
> 
> 时间：2013-02-17T08:56:56.847
> 
> 标签：c++, templates

I'm accessing a lot of maps in a non-performance critical piece of code. I don't want to write the usual find/!=end all the time to check for missing keys. I also don't want to use [] blindly and get default values. Is the following wrapper function smart or stupid? Is there a simpler way? Are there side effects I didn't consider?

```
template<typename M>
static typename M::mapped_type getMapValue(const M& m, typename M::key_type key) {

    typename M::const_iterator it = m.find(key);

    if (it != m.end()) {
        return it->second;
    } else {
        std::cerr << "Key: " << key << " not found!" << std::endl;
        std::cerr << "Returning default value." << std::endl;
        return typename M::mapped_type();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T09:02:24.277

我建议使用[`std::map::at`](http://en.cppreference.com/w/cpp/container/map/at)，然后客户端代码必须决定如何处理`std::out_of_range`从调用中抛出的任何异常，其中键不在映射中。

```
std::map<std::string, int> m;

....
int n = m.at("hello!"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T09:50:02.917

每当 STL 接口对于某些程序逻辑变得繁琐时，我倾向于包装整个容器，而不仅仅是访问单个函数。通常，我会从现有容器类型中私下派生，并再次将我需要的部分公开。此外，我添加了我需要的实际接口，例如 operator[] 用于 const map-like 对象：

```
struct mycontainer:
    private map<string, string>
{
    typedef map<string, string> base;
    using base::iterator;
    using base::const_iterator;
    using base::begin;
    using base::end;

    string const& operator[](string const& k) const
    {
        const_iterator it = find(k);
        if(it == end())
            throw runtime_error("lookup failure");
        return it->second;
    }
}; 
```

笔记：

*   如果您需要特殊的迭代器，Boost 中有一个帮助程序库可以轻松创建自定义迭代器类型。
*   您还可以显着更改界面，例如返回默认值而不将其添加到地图或返回 boost::optional。后者是恕我直言*，*一种轻松检查存在并一步检索值的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T18:48:39.797

如果这个想法正在检查，那么你可能想要这样的东西：

```
if (theMap.count(theKey)) {
  doSomethingWith(theMap[theKey]);
} else {
  doSomethingDefault();
} 
```

名称计数非常尴尬，因为如果元素存在则返回 true，否则返回 false。我认为它应该与支持每个键多个值的某些容器一致，但后来他们从未编写过该容器。仅仅重命名“计数”“包含”可能不值得包装地图。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T08:59:46.503

# 聪明的

包装`std`容器通常是一个好主意，因为它允许您在将来根据需要更换它们。

但是，返回默认值是正确的行为吗？它可能是你的情况，但在大多数情况下，它不会。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T08:59:53.053

我认为你最好在找不到元素时抛出异常。无论如何，谁将监视您的程序是否会打印所有这些警告？

另外，考虑通过 const-reference 获取密钥，因为`std::map`确实如此。

# c# - int[] 有资格作为 IList ?

> ID：14919502
> 
> 赞同：0
> 
> 时间：2013-02-17T08:57:45.207
> 
> 标签：c#

在 stackoverflow 上的另一个问题中，有人建议为数组编写扩展方法，但`this IList<T>`在扩展方法中使用了接口。我评论说它应该是一个数组，但他拒绝了。我测试了它，当然，他是对的...... :)

扩展方法：

```
public static void Fill<T>(this IList<T> array, T value)
{
    for(var i = 0; i < array.Count; i++) 
    {
        array[i] = value;
    }
} 
```

测试代码：

```
[Test] 
public void Stackoverflow()
{
    int[] arr = new int[] { 1,2,3,4};
    arr.Fill(2);
    Assert.AreEqual(2, arr[0]);
    Assert.AreEqual(2, arr[1]);
    Assert.AreEqual(2, arr[2]);
    Assert.AreEqual(2, arr[3]);
} 
```

一个`array`不是一个`IList<T>`。为什么这甚至可以编译？更别说，通过？！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T09:00:05.300

`Array`没有实现`IList<T>`，但`T[]`由于一些运行时魔法，它确实实现了。数组有点奇怪，因为它应该是通用的，但早于通用系统，因此使用了专门的 hack。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T09:02:14.580

从 C# 4 规范的第 12.1.2 节：

> 一维数组`T[]`实现接口`System.Collections.Generic.IList<T>`及其基本接口。因此，存在从`T[]`to`IList<T>`及其基本接口的隐式转换。

值得注意的是，如果您创建一个矩形数组*或*一维数组，其下界不是零，则*不会*实现`IList<T>`.

在 CLI 中，实际上有两个术语：*向量*和*数组*。向量是一个下界为零的一维集合，并被 JIT 优化为可以返回。一个数组可以有多个维度和不同的下界，并且不需要进行彻底的优化。

`T[]`C# 中的A*始终*是向量。您不能将作为 CLI 数组的对象强制转换为`T[]`- 您最终会遇到如下异常：

```
Unhandled Exception: System.InvalidCastException: Unable to cast object of type
'System.String[*]' to type 'System.String[]'. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T08:58:59.327

**编辑：最初认为 OP 是在询问`IList`而不是`IList<T>`.**

...因为数组实现`IList`：

```
public abstract class Array : ICloneable, IList, ICollection, IEnumerable, IStructuralComparable, IStructuralEquatable
//                                        ^^^^^ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T09:46:58.893

在一个稍微相关的注释上：

不幸的是， T[] 有时会实现 IList<T> 。考虑以下代码：

```
int[] array = new int[10];
IList<int> list = array; // Compiles
list.Add(1);             // Runtime error. Ew! 
```

真的不是很好。

因此，在使用 IList<T> 而不是 T[] 之前需要仔细考虑。

# android - 如何将 mp3 文件添加到虚拟 android 设备

> ID：14919503
> 
> 赞同：3
> 
> 时间：2013-02-17T08:57:56.173
> 
> 标签：android

我刚开始使用 android，我想知道是否有一种方法可以将内容添加到我的虚拟设备以进行测试。例如，添加一个 mp3 文件，以便我在 eclipse 中的 android 模拟器中的代码可以找到该文件。有什么建议么 ？

更新：进入 DDMS 透视图后，推送选项可能被禁用，可能是因为没有设备。我没有得到这部分，因为我正在测试设备并且它在 AVD 管理器中列出。有什么建议么 ？为什么在 AVD 管理器中有设备时，推送选项被禁用，为什么 DDMS 透视图中没有设备？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T09:01:54.917

如果您使用 Eclipse，请转到 DDMS 透视图。在那里你会看到所有连接的设备（模拟器）。您必须选择模拟器，然后在选项卡 FileExplorer 中单击窗口右侧。在那里，您将看到模拟器中的所有文件。将您的内容复制到文件夹 /sdcard。

您还可以像这样使用 adb 推送 mp3 文件或文件夹

```
adb push file.mp3 /sdcard 
```

# css - Firefox 中的 HTML5 奇怪渲染

> ID：14919508
> 
> 赞同：0
> 
> 时间：2013-02-17T08:58:13.533
> 
> 标签：css, firefox, height

我的网站正文在 Firefox 中显示得很奇怪。包装器 div 忽略其内容的高度。我的视频播放器的图像忽略了应用于它们的 CSS 规则。我的网站：[http ://www3.carleton.ca/clubs/sissa/html5/video.html](http://www3.carleton.ca/clubs/sissa/html5/video.html)

这是它的样子： ![在此处输入图像描述](../Images/4b5eab247ba22c7f158ad98c63277fe7.png)

CSS：

```
#controls img{
    height:100%;
    opacity: 0.3;
}
#wrapper{
    max-width: 850px;
    display: -moz-box;
    display: -webkit-box; /*means this is a box with children inside*/
    -moz-box-orient:vertical;
    -moz-box-flex:1;
    -webkit-box-orient:vertical;
    -webkit-box-flex: 1; /*allows site to grow or shrink 1 = flex 0 = statix*/
    background: rgba(0,0,0,0.7);

    z-index: 1;
}
#body_div{
    display: -webkit-box;
    -webkit-box-orient:horizontal;
    display: -moz-box;
    -moz-box-orient:horizontal;
    color:#000000;
    margin-top: 190px;
} 
```

正文 HTML：

```
<div id="wrapper">
    <section id="body_div">

        <div id="dimPlayer" class="dim" onclick="playPause()"></div>
        <div id="video_container">
            <video id="trailers" poster="images/poster/poster.jpg">
                <source src="media/vLast.mp4" type="video/mp4">
                <source src="media/vLast.webm" type="video/webm">
                <track id="mytrack" label="English Subtitles" src="subtitles.vtt" srclang="en" />
            </video>
            <nav>
               <div id="controls" class="cAnimated fadeInUp fadeInDown">
                    <div id="defaultBar">
                        <div id="progressBar"></div>
                    </div>
                    <button id="playButton"><img src="images/icons/play.png" /></button>
                    <button id="vol" onclick="showSlider()"><img src="images/icons/vol.png" /></button>      
                    <button id="containSlider"> 
                                <input type="range" id="vSlider" min="0" max="1" step="0.1" value="0.5"/></button>
                    <div id='containTime'><span id='timeDisplay'>0:00</span><span>/</span><span id='durationDisplay'>0:00</span></div>
                    <button id="full"><img src="images/icons/full.png" /></button>
                    <button id="mute"><img src="images/icons/mute.png" /></button>
                    <button id="cc">CC</button>

               </div> 
               <div id="playlist" class="animated fadeInRight">
                    <div class="thumb" id="tb1"><img src="images/thumbnails/TbGow.jpg" onClick="changeTrailer('media/vGow')"/></div>
                    <div class="thumb" id="tb2"><img src="images/thumbnails/TbLast.jpg" onClick="changeTrailer('media/vLast')"/></div>
                    <div class="thumb" id="tb3"><img src="images/thumbnails/TbTwo.jpg" onClick="changeTrailer('media/vTwo')"/></div>
               </div>
            </nav>
        </div>        
        <aside id="sidebar">
            <div id="side_events">
                <h1>Upcoming Releases</h1> 
                 <ul id="events">
                    <li><a href="http://www.t3.com/news/half-life-3-rumours-trailer-news-release-date-and-screenshots" target="_blank">Half-Life 3 Release: <time>04/01/13</time></a></li>
                    <li><a  href="http://www.examiner.com/article/borderlands-2-writer-talks-about-possible-borderlands-3-plot-points" target="_blank">Borderlands 3 Release: <time>05/29/13</time></a></li>
                    <li><a href="http://www.e3expo.com/" target="_blank">E3 2013 Starting: <time>08/11/13</time></a></li>
                    <li><a href="http://www.theverge.com/2013/2/1/3942142/new-sony-playstation-2013" target="_blank">Playstation 4 Release: <time>08/31/13</time></a> </li>
                    <li><a href="http://www.theverge.com/2012/1/25/2731888/next-xbox" target="_blank">Xbox 720 Release: <time>09/01/13</time></a></li>
                </ul>
            </div>

            <div id="side_trailer"><a href="video.html"><img src="images/thumbnails/TbTwo.jpg" /></a></div>

            <div id="side_advert"></div>                     
        </aside>

    </section>

    <footer id="footer">
        &copy; Copyright  by SimKessy
    </footer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:41:41.030

更改显示：-moz-box；在#wrapper 上显示：块；。

```
#wrapper{
   max-width: 850px;
   display: block;
   ... 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-17T09:12:25.643

为了将块元素拉伸到其子元素的高度，您需要添加`float: left;`到该块元素，在您的情况下为`#wrapper`.

图像的样式适用得很好。将鼠标悬停在视频的下部区域时，图像栏显示为`opacity: 0.3`;

# c++ - rint 在 Visual Studio 2010 math.h 中不存在，相当于 CUDA rint

> ID：14919512
> 
> 赞同：4
> 
> 时间：2013-02-17T08:59:11.613
> 
> 标签：c++, visual-studio-2010, cuda

我正在将 CUDA 代码移植到 C++ 并使用 Visual Studio 2010。CUDA 代码使用该`rint`函数，该函数似乎在 Visual Studio 2010 math.h 中不存在，因此看来我需要自己实现它。

根据这个[链接](http://developer.download.nvidia.com/compute/cuda/4_2/rel/toolkit/docs/online/group__CUDA__MATH__DOUBLE_g3b8026edb2f2e441669845f0f3fa3bf7.html)，CUDA`rint`函数

*以浮点格式将 x 舍入为最接近的整数值，中途情况舍入为零。*

我想我可以使用`int`丢弃小数部分的转换，有效地向零舍入，所以我最终得到了以下函数

```
inline double rint(double x)
{
    int temp; temp = (x >= 0\. ? (int)(x + 0.5) : (int)(x - 0.5));
    return (double)temp;
} 
```

它有两个不同的铸件，一个 to`int`和一个 to `double`。

我有三个问题：

1.  上述功能是否完全等同`rint`于“小”数字的 CUDA？对于不能表示为的“大”数字，它会失败`int`吗？
2.  有没有更高效的定义方法（而不是使用两个铸件）`rint`？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-17T23:48:47.267

CUDA 文档中引用的 rint() 描述不正确。使用浮点结果舍入到整数映射 IEEE-754 (2008) 指定的舍入模式，如下所示：

```
trunc()   // round towards zero
floor()   // round down (towards negative infinity)
ceil()    // round up (towards positive infinity)
rint()    // round to nearest or even (i.e. ties are rounded to even)
round()   // round to nearest, ties away from zero 
```

通常，这些函数按照 C99 标准中的描述工作。对于 rint()，标准指定函数根据当前舍入模式进行舍入（默认舍入到最接近或偶数）。由于 CUDA 不支持动态舍入模式，因此定义为使用当前舍入模式的所有函数都使用舍入模式“舍入到最接近或偶数”。以下是一些示例，显示了 round() 和 rint() 之间的区别：

```
argument  rint()  round()
1.5       2.0     2.0
2.5       2.0     3.0
3.5       4.0     4.0
4.5       4.0     5.0 
```

round() 可以按照您发布的代码行相当容易地模拟，我不知道 rint() 的简单模拟。请注意，您不希望使用中间转换为整数，因为“int”支持的数字范围比“double”精确表示的整数更窄。而是酌情使用 trunc()、ceil()、floor()。

由于 rint() 是当前 C 和 C++ 标准的一部分，我有点惊讶 MSVC 不包含这个函数；我建议检查 MSDN 以查看是否提供替代品。如果您的平台支持 SSE4，则可以使用中`_mm_round_sd(), _mm_round_pd()`定义的 SSE 内在函数`smmintrin.h`，将舍入模式设置为`_MM_FROUND_TO_NEAREST_INT`，来实现 CUDA rint() 的功能。

虽然（根据我的经验），SSE 内在函数可以跨 Windows、Linux 和 Mac OS X 移植，但您可能希望避免使用特定于硬件的代码。在这种情况下，您可以尝试以下代码（经过轻微测试）：

```
double my_rint(double a)
{
    const double two_to_52 = 4.5035996273704960e+15;
    double fa = fabs(a);
    double r = two_to_52 + fa;
    if (fa >= two_to_52) {
        r = a;
    } else {
        r = r - two_to_52;
        r = _copysign(r, a);
    }
    return r;
} 
```

请注意，MSVC 2010 似乎也缺少标准的 copysign() 函数，所以我不得不替换为 _copysign()。上面的代码假定当前的舍入模式是舍入到最近的偶数（默认情况下）。通过添加 2**52 它确保舍入发生在整数单位位。请注意，这还假设执行纯双精度计算。在对中间结果使用更高精度的平台上，可能需要将 'fa' 和 'r' 声明为 volatile。

# html - 有人可以帮我在两列布局中创建一个静态侧边栏吗

> ID：14919523
> 
> 赞同：-1
> 
> 时间：2013-02-17T09:00:09.853
> 
> 标签：html, css, responsive-design, two-column-layout

当用户开始滚动时，请帮助我将右侧边栏设为静态。我是响应式网页设计的新手。我尝试使用“位置：固定”属性，但我不知道它在响应式设计中的可行性。请帮我。这是链接[http://the-bootstrap.obenland.it/page-with-comments/](http://the-bootstrap.obenland.it/page-with-comments/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:05:59.473

JSfiddle 适合你 -- [JSfiddle 适合你](http://jsfiddle.net/shail/U8HGz/897/)

创建一个这样的类：-

```
.fixed {

          position:fixed;
          right:88px; /*insert this aswell*/
       } 
```

并将其与下面的侧边栏部分一起使用。

```
<section role="complementary" class="widget-area span4 fixed" id="secondary"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T09:10:29.263

如果您希望维护响应式 Web 设计原则，那么简单地应用 position:fixed 将无法解决问题。如果你想让它在较小的屏幕上很好地工作，你必须有条件代码。它必须固定在“正常”屏幕上，当屏幕变得“太小”时，您需要删除该类。您还必须决定“正常”和“太小”对您意味着什么。请参阅此处的示例：

[http://home.edgemontgeek.com/dev/stackoverflow/14919523/](http://home.edgemontgeek.com/dev/stackoverflow/14919523/)

请记住，您还需要控制屏幕高度。如果窗口不够大，无法容纳固定内容，他们将无法看到它。您可以考虑有两列可以分别滚动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T09:29:44.293

采用

```
.fixed{
left:0;
position:fixed;
top:Height_of_logo;
} 
```

这将创建一个侧边栏，在顶部为徽标留出空间，但是如果您希望侧边栏在用户向下滚动时向上滑动，然后在徽标超出范围时粘住，那么我建议您使用像这样的 Jquery 插件

[http://viget.com/inspire/jquery-stick-em](http://viget.com/inspire/jquery-stick-em)

这个站点有很好的文档和演示。

# ruby-on-rails - Ransack 不适用于多态列类型（未初始化的常量）

> ID：14919525
> 
> 赞同：0
> 
> 时间：2013-02-17T09:00:26.243
> 
> 标签：ruby-on-rails, ransack

我已经按照[http://railscasts.com/episodes/370-ransack?view=asciicast](http://railscasts.com/episodes/370-ransack?view=asciicast)设置了 Ransack，并且使用 orders#index 控制器搜索 Orders 表中的大多数列都可以正常工作。

但是，它不会搜索 orderable_type 或 orderable_id，这两列存储与其他模型的多态关联。有谁知道为什么，或者如何解决这个问题？

模型：

```
class Order < ActiveRecord::Base
  attr_accessible :quantity
  belongs_to :orderable, polymorphic: true
  belongs_to :delivery
  belongs_to :requisition 
```

控制器：

```
 def index
    @search = Order.search(params[:q])
    @orders = @search.result
  end 
```

看法：

```
= search_form_for @search do |f|
  .field
    = f.label :orderable_type_matches, "Type"
    = f.text_field :orderable_type_matches
  .field
    = f.label :created_at_gteq, "Created between"
    = f.text_field :created_at_gteq, 'data-behaviour' => 'datepicker'
    = f.label :created_at_lteq, "and"
    = f.text_field :created_at_lteq, 'data-behaviour' => 'datepicker'
  .actions
    = f.submit "Search" 
```

我收到的错误是：

> 未初始化的常量 Order::Orderable 提取的源代码（大约第 13 行）：
> 
> 10：= f.text_field：location_place_matches 11：.field 12：= f.label：orderable_type_matches，“类型”13：= f.text_field：orderable_type_matches 14：.field 15：= f.label：created_at_gteq，“创建于”16 : = f.text_field :created_at_gteq, '数据行为' => 'datepicker'

对于我的生活，我不明白为什么它对待 orderable_type 与所有其他列不同 - 任何人都可以帮忙解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:35:12.843

我并没有真正找到解决此问题的方法，但一位开发人员朋友提出了一种方法，我可以实现相同的结果，这可能对其他人有所帮助。他说我应该只对表单字段进行硬编码，而不是依赖 Ransack 助手来创建下拉菜单。所以这就是我所做的并且它有效:-)

# c - 静态函数和具有“隐藏”可见性属性的函数之间的实际区别是什么？

> ID：14919528
> 
> 赞同：18
> 
> 时间：2013-02-17T09:00:42.337
> 
> 标签：c, visibility

我知道在函数上使用`static`C 中的关键字会将函数限制为定义它的编译单元。我现在正在研究符号可见性，我对`static`函数和用 标记的函数`__attribute__((visibility("hidden")))`或使用`-fvisibility=hidden`命令行选项之间的区别有点困惑。

我有一种感觉，这些在幕后改变事物的方式根本不一样，但我不知道区别是什么，也不知道在实际代码中使用它们时意味着什么。两者之间有什么变化，您什么时候想使用其中一个？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-17T09:04:07.830

一个函数`__attribute__((visibility("hidden")))`在包含它的共享库之外是不可见的，但是如果该库是通过链接创建的`foo.pic.o`，并且`bar.pic.o`这样的函数`fhid`可以在 中定义`foo.c`和调用`bar.c`。当然外部代码（例如来自主程序或其他共享库）不能调用它`fhid`

因此，隐藏可见性适用于整个共享库，而不适用于组成它的单个编译单元。

相比之下，`foo.c`定义一个`static void fsta(void)`函数和`bar.c`定义一个*不同* `static void fsta(void)`的函数是可能的（即使这很糟糕，出于可读性的原因应该避免这样做）。

此外，原则上，一个`static`函数可以更容易地内联，或者编译器可以（有时）为它使用不同的调用约定。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T09:11:30.110

如果您在共享库中有一个`global`函数，您只想在共享库的上下文中使用，而不是在共享库之外使用 - 那么您需要`__attribute__((visiblity("hidden")))`

例如：

如果您在其中`void foo()`定义了一个函数`Foo.c`并且您希望它引用它`Bar.c`以及`Baz.c`要生成哪些编译单元`FooBarBaz.dll`（或 FooBarBaz.so），那么您可以将该函数设为

```
__attribute__((visibility("hidden"))) void foo() {} 
```

请记住，加载（或 .so 文件）`foo()`的可执行文件将不可见阅读[本文](http://www.akkadia.org/drepper/dsohowto.pdf)`dll`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T09:06:26.510

> 隐藏可见性表示该符号不会被放入动态符号表中，因此没有其他“模块”（可执行文件或共享库）可以直接引用它。

[http://ohse.de/uwe/articles/gcc-attributes.html](http://ohse.de/uwe/articles/gcc-attributes.html)

我可以补充：您可以`__attribute__((visibility("hidden")))`在 C++ 中使用语义接近 C 版本的`static`.

# javascript - Google Map place API 在地图上重复列出学分

> ID：14919531
> 
> 赞同：1
> 
> 时间：2013-02-17T09:00:59.933
> 
> 标签：javascript, google-maps-api-3, google-places

我正在尝试将 Google Place API 集成到我已成功完成的应用程序中。但是，我不太确定为什么地图左下方有重复的列表信用。

我放置这些谷歌位置标记的代码如下。为了帮助大家更好地理解问题，在代码片段之后提供了屏幕截图。

```
 var request = {
        location: latlng,
        radius: '500',
        types['bank','cafe','bus_station','gym','beauty_salon','convenience_store','health','school','store',
        'gym','hair_care','school','police','pet_store','parking','pharmacy','dentist','church','bus_stop']
    };
   service = new google.maps.places.PlacesService(map);
    service.nearbySearch(request, callback); 
```

![在此处输入图像描述](../Images/4a43a32b523ee00f7ccd211071d5ebea.png)

我很确定罪魁祸首是上面的代码片段。帮助表示赞赏。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:47:49.003

Google Map Api 并不意味着以下代码段位于 for 循环中。

```
 service = new google.maps.places.PlacesService(map);
    service.nearbySearch(request, callback); 
```

多次调用时，您将在地图上获得重复的信用额度。

# ios - 如何为 ios 制作新的自定义情感键盘（有点像表情符号）

> ID：14919532
> 
> 赞同：0
> 
> 时间：2013-02-17T09:01:00.040
> 
> 标签：ios, objective-c, ios6, keyboard, emoji

我想做的是情感键盘，这样我就可以在 iPhone 中使用它。当我搜索时，我发现[Emoji](http://support.apple.com/kb/HT4976)是一个更好的想法。

简而言之，我想制作一个可以用作键盘的应用程序，并且可以在 Messenger 的任何地方使用。

任何想法/输入如何继续创建像表情符号这样的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:40:00.383

`Emoji`字符是 unicode 系统的一部分，关键是您可以在每个平台上使用 unicode 字符，因为它是一个标准。

每个“图像”在 unicode 表中都有一个唯一的代码，（就像字母一样`A`）对于该代码，当前平台显示所选字体集的当前字符。

制作随机图像（代码）是行不通的，因为它们**不是**标准的一部分，并且接收者**必须拥有**像 Skype 或 Messenger 那样在房子内解码特殊图像（或代码）的钥匙，但他们赢了'不是标准 unicode 表的一部分。

您可以在全球范围内使用标准 unicode 字符，也可以仅在应用程序中使用您的特殊图像。您可能会在**[这里](http://en.wikipedia.org/wiki/Emoji)**找到更多关于`Emoji`charset、unicode 代码的信息，它向您展示了大多数`Emoji`字符将如何出现在不同的平台上。

这只是对它的快速回顾。

# java - Struts：在 JSP 页面中多次执行

> ID：14919541
> 
> 赞同：0
> 
> 时间：2013-02-17T09:02:19.570
> 
> 标签：java, eclipse, jsp, jstl, struts

我试图在struts中运行以下代码并得到错误：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%> <!DOCTYPE
        HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"   
        "http://www.w3.org/TR/html4/loose.dtd">         
<html> 
<jsp:include page="/Shop_login.jsp"></jsp:include>
<head>Welcome To My shop application </head> 
<body> 
  User Name:<html:input text="first_name"> </html:input>
  Password:<html:password text="password"> </html:password>  
</body>
</html> 
```

得到输出为：

```
Welcome To My shop application User Name: Password: Welcome To My shop application User Name: Password: Welcome To My shop application User Name: Password: Welcome To My shop application User Name: Password:  ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:36:09.740

如果您使用 JSTL，您也可以在 JSP 中拥有这些标记库

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib prefix="html" uri="http://struts.apache.org/tags-html" %>
<%@ taglib prefix="bean" uri="http://struts.apache.org/tags-bean" %>
<%@ taglib prefix="logic" uri="http://struts.apache.org/tags-logic" %> 
```

文件中没有更多内容只是这些代码片段

然后使用

```
<%@ include file="/tags/taglibs.jsp" %> 
```

在页面顶部，您可以使用定义下方的标签。其他可以包含在 JSTL 中的 JSP 片段，例如

```
<c:import url="/pages/page.jsp"/> 
```

或使用 JSP 指令

```
<jsp:include page="/pages/page.jsp"/> 
```

并且不要在其内部使用相同的片段，它可能会导致从您的代码编译的 servlet 中的递归调用。

# asp.net-mvc - DbContext 已被处理和 autofac

> ID：14919543
> 
> 赞同：13
> 
> 时间：2013-02-17T09:02:32.450
> 
> 标签：asp.net-mvc, entity-framework, entity-framework-5, autofac

我有一个控制器：

```
private readonly ILogger _logger;    
private readonly IRepository _repository;

public HomeController(ILogger logger, IRepository repository)
{
   _logger = logger;
   _repository = repository;
} 
```

这是存储库：

```
public class EfRepository : IRepository
{
    // ...methods for add, delete, update entities
    // ....

    public void Dispose()
    {
         if (this._context != null)
         {
             this._context.SaveChanges();
             (this._context as IDisposable).Dispose();
             this._context = null;
         }
    }
} 
```

最后，IoC 中的注册类型：

```
_builder.RegisterType<Logger>().As<ILogger>();
_builder.RegisterType<EfRepository>().As<IRepository>().WithParameter("context", new PcpContext()); 
```

当我运行应用程序时，我收到此错误：

> 操作无法完成，因为 DbContext 已被释放。

我尝试像这样更改注册 EfRepository：

```
_builder.RegisterType<EfRepository>()
   .As<IRepository>()
   .WithParameter("context", new PcpContext()).InstancePerLifetimeScope(); 
```

在这种情况下，第一个请求完成，但在尝试打开其他页面时，我再次收到错误。哪里有问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-17T11:27:43.150

使用 WithParameter 方法时，每个已解析对象的参数实例都是相同的。因此，`.WithParameter("context", new PcpContext())`您可以有效地将 PcpContext 类的相同实例用于任何已解析的 IRepository 实例。

使用您当前的代码，当一个 IRepository 实例被释放时，它也会释放该 PcpContext 实例。然后，任何后续尝试解析 IRepository 都将收到已释放的 PcpContext 实例。您需要一种在请求结束时处理的每个 Http 请求上接收 EF DbContext 的新实例的方法。

一种选择是为 IRepository 注册一个代码块，以便每次需要解析 IRepository 时执行代码块：

```
_builder.Register<IRepository>(c => new EfRepository(new PcpContext())) 
```

更好的选择是创建一个新的`IDatabaseContext`抽象，更新`EfRepository`它依赖于新的 IDatabaseContext 抽象而不是`PcpContext`类（可能已经是这种情况:)）。

IDatabaseContext 的实现类将是您的 PcpContext 类，它必须从 EF DbContext 继承，并且可能接收连接字符串作为参数。

```
public class EfRepository : IRepository
{
    private readonly IDatabaseContext _context;

    public EfRepository(IDatabaseContext context)
    {
        _context = context;
    }

    ...methods for add, delete, update entities

    //There is no longer need for this to be disposable.
    //The disaposable object is the database context, and Autofac will take care of it
    //public void Dispose()
}

public interface IDatabaseContext : IDisposable 
{
    ... declare methods for add, delete, update entities
}

public class PcpContext: DbContext, IDatabaseContext 
{
    public EntityFrameworkContext(string connectionString)
        : base(connectionString)
    {
    }

    ...methods exposing EF for add, delete, update entities

    //No need to implement IDisposable as we inherit from DbContext 
    //that already implements it and we don´t introduce new resources that should be disposed of
} 
```

使用 IoC 容器并将生命周期管理的负担留给它们的想法会变得更好。现在您的 Repository 类不需要是一次性的，也不需要管理和处理其 IDatabaseContext 依赖项。Autofac 将跟踪上下文实例并在适当的时候处理它。

出于同样的原因，您可能希望将 InstancePerLifetimeScope 与数据库上下文依赖项一起使用。这意味着同一 Http 请求上的每个存储库实例都共享相同的 EF 上下文，并在请求结束时处理。

```
_builder.RegisterType<EfRepository>()
   .As<IRepository>();

_builder.RegisterType<PcpContext>()
   .As<IDatabaseContext>()
   .WithParameter("connectionString", "NameOfConnStringInWebConfig")
   .InstancePerLifetimeScope(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-20T16:04:56.670

我采用了@Daniel JG 建议的“代码块”的简单解决方案（lambda）。

下面是 Autofac 中的代码示例。Daniels 的例子是 Unity，因为他也提到了自己。因为 OP 添加了 Autofac 作为标签，所以这似乎与我有关：

```
_builder.Register(c => new AppDbContext()).As(typeof(AppDbContext)); 
```

该代码解决了`DbContext has been disposed`我在使用 Entity Framework 时遇到的问题。请注意，与大多数其他 DI 容器（包括 Unity）相比，Autofac 会切换已注册的事物及其解析的事物。

对于 OP 给出的代码示例，修复将是这样的：

```
_builder.Register(c => new EfRepository(new PcpContext())).As(IRepository); 
```

请注意，最后一位是未经测试的代码。但是无论如何，您都应该参考 Daniels 的回答以获取更多信息，因为我认为他的“更好的选择”是正确的。但是，如果您现在没有时间（像我一样），您可以使用我的解决方案选项。只需添加一个 TODO，您就可以弥补您所招致的技术债务 :)。

When I do I'll see if I can update this answer with working code for Autofac that follows his 'better option'. First I want to carefully read [this article](http://nblumhardt.com/2011/01/an-autofac-lifetime-primer/). On quick reading it seems to me the Autofac people are promoting using the 'Service Locator' for handling lifetime scope. But according to Mark Seemann that is [an anti-pattern](http://blog.ploeh.dk/2010/02/03/ServiceLocatorisanAnti-Pattern/), so I have some stuff to figure out... Any DI expert with an opinion?

# c - c - realloc() 在 Windows 7 中成功，但在 Windows XP 中失败，为什么？

> ID：14919548
> 
> 赞同：2
> 
> 时间：2013-02-17T09:02:52.593
> 
> 标签：c, windows, memory-management

所以我的这段代码有以下`realloc`块：

```
char **ptr = NULL;

void realloc_ptr(unsigned int new_size)
{    
    void *temp = NULL;

    temp = realloc(ptr, new_size * sizeof(*ptr));

    if(temp != NULL) {
        ptr = temp;
    }
    else {
        exit(EXIT_FAILURE);
    }
} 
```

`new_size`在调用此函数之前递增。这个数组总是只扩展。此外，`new_size`我的代码中永远不要超过 3（目前）。

现在上面的`realloc`调用在我在 Windows 7 中的测试过程中运行良好。当我在 XP 中测试这段代码时，上面的代码会成功 3 次，然后它会在第 4 次抛出异常。当我回到代码时，我将发布确切的异常（这台计算机没有代码）。

我猜我的内存太碎片化了，系统无法分配连续的内存块。我已经测试了我的代码是否存在内存泄漏并修复了所有问题（我希望如此）。任何想法为什么会发生这种情况？

**编辑：**

当我使用 Doug Lea 的[malloc.c](http://gee.cs.oswego.edu/pub/misc/malloc.c)时，上述问题就消失了。但我仍然想知道为什么会这样。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T09:14:24.910

> 当我在 XP 中测试这段代码时，上面的代码会成功 3 次，然后它会在第 4 次抛出异常。当我回到代码时，我将发布确切的异常（这台计算机没有代码）。

那（例外）意味着您在某处（可能未初始化）和/或内存损坏的地方有无效的指针（或索引）。`realloc()`如果无法满足请求，则必须静默失败并返回 NULL。

在不同的操作系统上有不同的行为是完全正常的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T09:11:49.850

我最好的猜测是它`new_size`太大而无法在连续的虚拟内存中使用。您永远无法确定在 32 位系统上是否有大量连续的虚拟内存可用。

您通常应该尝试使用多个较小的块，如果可能，甚至不要同时分配它们，而是在前一个被释放后分配下一个。

# java - Java 通过带问号的换行正则表达式问题拆分字符串

> ID：14919551
> 
> 赞同：2
> 
> 时间：2013-02-17T09:03:05.427
> 
> 标签：java, regex, string, split, newline

我编写了一个 Java 类，它必须从包含换行符的字符串中提取元素。作为第一步，代码必须用换行符分割输入字符串并将结果放入数组中。除了在一种特定情况下，这一切都很好。我正在使用以下代码来执行拆分：

```
String lines[] = inputText.split("[\\r?\\n\\r]+"); 
```

我遇到的问题是以下行：

```
##INFO=<ID=DS,Number=0,Type=Flag,Description=""removed?"">" 
```

它导致两行：

```
##INFO=<ID=DS,Number=0,Type=Flag,Description=""removed
"">" 
```

它在问号上分裂。谁能指出我为什么会发生这种情况的正确方向？正则表达式内部没有“？” 表示 0 或 1 次出现？这不是按换行符分割的可接受方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:27:23.223

这行得通，简单地说 \n\r 或 \n。

```
String manyLines = "line1\nline2\n\rline3?\nline4";
System.out.println(Arrays.asList(manyLines.split("\\n\\r|\\n"))); 
```

输出

```
[line1, line2, line3?, line4] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T09:29:19.053

方括号内的问号*实际上是*一个问号。用圆括号替换方括号（前者仅限于每个交替一个字符）：

```
String lines[] = inputText.split("(\\r?\\n|\\r)+"); 
```

行将在“\r\n”、“\n”和“\r”处拆分，但这实际上与以下内容相同：

```
String lines[] = inputText.split("(\\n|\\r)+"); 
```

所以我们可以回到方括号：

```
String lines[] = inputText.split("[\\n\\r]+"); 
```

如果您实际需要的是取决于操作系统的恒定换行符：

```
String lines[] = inputText.split("(" + System.getProperty("line.separator") + ")+"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T09:32:06.360

您正在使用一个字符类（`[]`），这意味着括号内的任何字符，所以在您的情况下*，**它**意味着*`[\\r?\\n\\r]+`任何*一个，，，，，，一次或多次（+）`\\r``\\n``?``\\r`*。

[由Unicode UTS #18: Unicode Regular Expressions](http://www.unicode.org/reports/tr18)定义的换行符的真正可移植正则表达式是：

```
\R => (?:(?>\u000D\u000A)|[\u000A\u000B\u000C\u000D\u0085\u2028\u2029]) 
```

正如Perl 成名的 Tom Christiansen在[这个答案中所解释的那样。](https://stackoverflow.com/a/4307261/371250)考虑 Java 的双重转义（字符串然后是正则表达式）：

```
(?:(?>\\u000D\\u000A)|[\\u000A\\u000B\\u000C\\u000D\\u0085\\u2028\\u2029]) 
```

# http - Netty 4：同时处理 HTTP 和 HTTPS

> ID：14919552
> 
> 赞同：3
> 
> 时间：2013-02-17T09:03:17.820
> 
> 标签：http, https, netty

我想使用共享处理程序处理与端口 80 的 HTTP 连接和与端口 443 的 HTTPS 连接。

我目前所做的是创建两个单独的 ServerBootstrap，ChannelInitializers 共享我的处理程序的实例，其中一个将 SslHandler 添加到管道中。

有一个更好的方法吗？如果使用这种方式，我可以共享 EventLoopGroups 以减少线程使用（我的并发连接数量很少）吗？使用 OIO/NIO/AIO 执行此操作时，在共享父组和子组时，我应该注意什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:40:41.413

是的，您可以共享 EventLoops，甚至可能应该这样做。您所做的其余部分听起来像是要走的路。

# sql - 我认为我的存储过程很脆弱

> ID：14919553
> 
> 赞同：1
> 
> 时间：2013-02-17T09:03:21.383
> 
> 标签：sql, sql-server, security, stored-procedures, sql-injection

我正在 SQL Server 上运行一个 ASP.NET MVC 应用程序，该应用程序似乎已被黑客入侵或 SQL 注入。数据库每天都会创建大量新的虚假帐户，我还没有完全确定问题，但我担心我以前认为不受 SQL 注入影响的存储过程代码。

以下是我的存储过程代码的三个简短版本，如果它易受攻击，请帮助我纠正它，谢谢。

创建新用户：

```
CREATE PROCEDURE [dbo].[NEWUSER]
@Name varchar(50),
@Email varchar(70),
@Language varchar(20)
AS

SET NOCOUNT ON;

INSERT INTO dbo.User (name, email, language)
VALUES (@Name, @Email, @Language);

SET NOCOUNT OFF;

INSERT INTO dbo.Names (name)
VALUES (@Name);

SELECT @@IDENTITY 
```

选择用户：

```
CREATE PROCEDURE [dbo].[GETUSER] 
@Name varchar(33)
AS

SET NOCOUNT ON;

SELECT name, email, language FROM dbo.User WHERE name = @Name; 
```

更新用户：

```
CREATE PROCEDURE [dbo].[EDITUSER] 
@Name varchar(33),
@Email varchar(70)
AS

SET NOCOUNT ON;

UPDATE dbo.User SET email = @Email WHERE name = @Name; 
```

请帮我解决这个问题，我将不胜感激。

我的 ASP.NET 代码：[http ://www.cindro.com/all/database.txt](http://www.cindro.com/all/database.txt)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T09:12:44.380

您的存储过程看起来不错。我会尝试在某处查看您的应用程序代码。

1.  您的表格中有验证码吗？
2.  您是否执行任何服务器端验证？
3.  您是否检查请求来自的 IP 地址？
4.  您是否检查请求是否来自真实浏览器或某些脚本（Request.Browser.Cookies Request.Browser.Crawler）？

# php - mySQLi 查询将结果放入数组和不同的 DIV

> ID：14919554
> 
> 赞同：1
> 
> 时间：2013-02-17T09:03:30.867
> 
> 标签：php, arrays, html, mysqli

我想使用 mySQLi 从 mySQL 数据库中查询多个（总共 6 个，ID 为 1 到 6）ID 的内容。之后，我想将结果（“introtext”）放在不同的 DIV 中。目前我使用以下代码（完美运行）：

```
<?php
$q = $db->query("SELECT introtext FROM content WHERE id=1");
$r = $q->fetch_object();
?>
<div id="content1" class="toggle"><?php echo "$r->introtext";?></div>

<?php
$q = $db->query("SELECT introtext FROM content WHERE id=2");
$r = $q->fetch_object();
?>
<div id="content2" class="toggle"><?php echo "$r->introtext";?></div>

<?php
$q = $db->query("SELECT introtext FROM content WHERE id=3");
$r = $q->fetch_object();
?>
<div id="content3" class="toggle"><?php echo "$r->introtext";?></div> 
```

等等...

如何优化此代码以仅查询一次 mySQL（将结果放入数组中）并将不同的结果分配给不同的 DIV？

干杯碎纸机

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:08:41.933

好问题
基本上你需要2个循环
来获取你的数组数据：

```
<?php
$data = array();
$res = $db->query("SELECT id, introtext FROM content ORDER BY id LIMIT 6");
while($row = $res->fetch_assoc()) {
    $data[$row['id']] = $row['introtext'];
}
?> 
```

您可以使用任何 SQL 过滤掉您的查询。`ORDER BY id LIMIT 6`对于目前的情况“获取前 6 个 id”似乎最方便，因为永远不能保证连续性。

然后显示另一个循环

```
<? foreach ($data as $id => $introtext): ?>
<div id="content<?=$id?>" class="toggle"><?=htmlspecialchars($introtext?)></div>
<? endforeach ?> 
```

顺便说一句，如果不使用原始 Mysqli API 而是使用一些帮助库，PHP 部分将减少到一行：

```
<?php
$data = $db->getIndCol("id","SELECT id, introtext FROM content ORDER BY id LIMIT 6");
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-17T09:09:28.610

为什么不使用[IN](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in) mysql 运算符？

```
SELECT introtext FROM content WHERE id IN (1,2,3,4,5,6); 
```

然后在 object/array 中获取结果。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-17T09:10:30.637

如果项目不大，我可以建议尝试**RedBean ORM**解决方案。要查看它是如何工作的，请转到[这里](http://redbeanphp.com/) 非常简单，只需在项目中包含 rb.php 文件即可！

顺便说一句，如果您仍想手动使用 mysqli，解决方案是在查询中使用 id >= 1 和 id <= 6 创建一个新的 WHERE，然后使用 php 引用将结果提取到数组中... [mysqli quickstart指导](http://www.php.net/manual/en/mysqli.quickstart.php)

# xml - 在 *.oeaccount 文件中查找文本后更改文件夹名称

> ID：14919556
> 
> 赞同：1
> 
> 时间：2013-02-17T09:03:41.217
> 
> 标签：xml, batch-file, cmd, dos, rename

我`*.oeaccount`在许多文件夹中有文件（XML 文件）。我想要一个批处理文件读取 XML 文件中的文本并重命名包含该文件的文件夹。

xml 文件包含类似于以下内容的文本：

```
 <SMTP_Display_Name type="SZ">abc@cba.com</SMTP_Display_Name>
    <SMTP_Email_Address type="SZ">abc@cba.com</SMTP_Email_Address>
    <SMTP_Split_Messages type="DWORD">00000000</SMTP_Split_Messages>
</MessageAccount> 
```

该批次必须`abc@cba.com`在此行中找到并忽略所有其他邮件：

```
 <SMTP_Email_Address type="SZ">abc@cba.com</SMTP_Email_Address> 
```

行首有 4 个空格。

批处理必须提取电子邮件地址`abc@cba.com`并重命名文件夹，每个文件夹都作为 XML 文件中的文本。

文件夹树是这样的：

*   文件夹/1.oeaccount
*   文件夹/2.oeaccount
*   文件夹/3.oeaccount

有人给了我这段代码，但它不起作用：

```
@echo off
setlocal
pushd "YourRootLocation"
set "search=<SMTP_Email_Address .*>[^ ][^ ]*@[^ ][^ ]*\.[^ ][^ ]*</SMTP_Email_Address>"
for /f "eol=: delims=" %%A in (
  'findstr /srmbc:"%search%" file1.txt^|sort /r'
) do for /f "tokens=2 delims=<>" %%B in (
  'findstr /rbc:"%search%" "%%A"'
) do if exist "%%A" for %%F in ("%%A\..") do if "%%~fF" neq "%CD%" (
  echo ren "%%~fF" "%%B"
  ren "%%~fF" "%%B"
)
popd 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:57:56.527

如果我理解正确，您希望将每个`*.oeaccount`文件的父文件夹重命名为在该文件中找到的电子邮件地址。为此，这样的事情应该起作用：

```
for /r "C:\root\folder" %%f in (*.oeaccount) do (
  for /f "delims=<> tokens=3" %%a in (
    'findstr "<SMTP_Email_Address" "%%~ff"'
  ) do (
    ren "%%~dpf" "%%~a"
  )
) 
```

但是，请注意，虽然它应该在这种特殊情况下工作，但 XML 文件的面向行的处理（这是什么`findstr`）通常**不是**一个好主意，因为

```
<SMTP_Email_Address type="SZ">abc@cba.com</SMTP_Email_Address> 
```

与 XML 一样有效

```
<SMTP_Email_Address
    type="SZ">abc@cba.com</SMTP_Email_Address> 
```

因此重新换行可能会破坏您的搜索模式。

# jython - 如何使用 jython 2.7 beta 1 获取 urllib3 和请求？

> ID：14919557
> 
> 赞同：6
> 
> 时间：2013-02-17T09:03:42.090
> 
> 标签：jython, urllib3

聪明的人，

我想在我的 jython 程序中使用很棒的请求模块。它在 python 中安装和运行得很好，但我无法在 jython 中安装它。我已经在 mac 和 ubuntu 上尝试了 Jython 2.7a2 和 2.7b1，并得到了与 urllib3 相关的相同错误。

首先安装 ez_setup.py，如[我如何使用 jython setup.py install？](https://stackoverflow.com/questions/11729842/how-can-i-use-jython-setup-py-install)

然后从 jython bin 目录中运行 easy_install 会导致异常：

```
NameError: name 'CERT_NONE' is not defined
gautam-mbp:bin gautam$ ./easy_install requests
Searching for requests
Reading http://pypi.python.org/simple/requests/
Reading http://python-requests.org
Reading https://github.com/kennethreitz/requests
Best match: requests 1.1.0
Downloading http://pypi.python.org/packages/source/r/requests/requests-1.1.0.tar.gz#md5=a0158815af244c32041a3147ee09abf3
Processing requests-1.1.0.tar.gz
Running requests-1.1.0/setup.py -q bdist_egg --dist-dir /var/folders/jf/cb2pc45s7d94hd6sndysvyxw0000gn/T/easy_install-MnOao_/requests-1.1.0/egg-dist-tmp-E2Rkg1
Traceback (most recent call last):
  File "./easy_install", line 7, in <module>
    sys.exit(
  File "/Users/gautam/jython27b1/Lib/site-packages/setuptools-0.6c11-py2.7.egg/setuptools/command/easy_install.py", line 1712, in main
  File "/Users/gautam/jython27b1/Lib/site-packages/setuptools-0.6c11-py2.7.egg/setuptools/command/easy_install.py", line 1700, in with_ei_usage
  File "/Users/gautam/jython27b1/Lib/site-packages/setuptools-0.6c11-py2.7.egg/setuptools/command/easy_install.py", line 1712, in <lambda>
-----------lots of stack trace---------------
  File "setup.py", line 6, in <module>
  File "/var/folders/jf/cb2pc45s7d94hd6sndysvyxw0000gn/T/easy_install-MnOao_/requests-1.1.0/requests/__init__.py", line 52, in <module>
  File "/var/folders/jf/cb2pc45s7d94hd6sndysvyxw0000gn/T/easy_install-MnOao_/requests-1.1.0/requests/utils.py", line 23, in <module>
  File "/var/folders/jf/cb2pc45s7d94hd6sndysvyxw0000gn/T/easy_install-MnOao_/requests-1.1.0/requests/compat.py", line 7, in <module>
  File "/var/folders/jf/cb2pc45s7d94hd6sndysvyxw0000gn/T/easy_install-MnOao_/requests-1.1.0/requests/packages/__init__.py", line 3, in <module>
  File "/var/folders/jf/cb2pc45s7d94hd6sndysvyxw0000gn/T/easy_install-MnOao_/requests-1.1.0/requests/packages/urllib3/__init__.py", line 16, in <module>
  File "/var/folders/jf/cb2pc45s7d94hd6sndysvyxw0000gn/T/easy_install-MnOao_/requests-1.1.0/requests/packages/urllib3/connectionpool.py", line 45, in <module>
  File "/var/folders/jf/cb2pc45s7d94hd6sndysvyxw0000gn/T/easy_install-MnOao_/requests-1.1.0/requests/packages/urllib3/util.py", line 293, in <module>
NameError: name 'CERT_NONE' is not defined 
```

看起来与 urllib3 相关的问题不适用于 jython。感谢您在获取请求（和 urllib3 ）以处理 jython 方面的帮助。同样的错误也出现在 ubuntu 上。

谢谢高塔姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T19:53:40.293

***编辑**：截至 2015 年 5 月，[请求的当前稳定版本 2.7.0](https://pypi.python.org/pypi/requests/2.7.0)不再遭受 Jython --Aprillion 中的原始错误*

* * *

[您面临的错误已在urllib3](https://github.com/shazow/urllib3/issues/137)和[requests](https://github.com/kennethreitz/requests/issues/1008)的开发版本中修复了一段时间。

由于您将无法安装它，因为它会炸毁 pip/easy_install，[`java.lang.RuntimeException: java.lang.RuntimeException: Class file too large!`](http://bugs.jython.org/issue1891)您必须直接从源代码树运行它。

在那里，您可以通过使用以下虚拟方法替换`ssl_wrap_socket`最后的所有内容来修复导入错误：`requests/packages/urllib3/util.py`

```
def ssl_wrap_socket(sock, keyfile=None, certfile=None, cert_reqs=None,
                    ca_certs=None, server_hostname=None,
                    ssl_version=None):
    raise Error('This is not meant to be called') 
```

（如果您担心 ssl 支持：[无论如何](http://bugs.jython.org/issue2016)它现在都坏了）

由于 jython[缺少](http://bugs.jython.org/issue1153)对[idna](https://en.wikipedia.org/wiki/Internationalized_domain_name)的支持，因此您也必须将其删除。转到第 290 行`request/models.py`并替换`'idna'`为`'utf-8`'.

因此，如果您不需要使用 ssl 或 idna，这些步骤应该可以工作。

跟进：jython 中的相关 ssl 错误在此处跟踪：http: [//bugs.jython.org/issue2016](http://bugs.jython.org/issue2016)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-16T16:59:56.383

此问题已解决 - 请使用 Jython 2.7 beta 4（或最终版本）。

# dynatree - dynatree onClick 回调函数的参数是什么？

> ID：14919558
> 
> 赞同：1
> 
> 时间：2013-02-17T09:03:57.083
> 
> 标签：dynatree, jquery-dynatree

我正在查看[dynatree 文档](http://wwwendt.de/tech/dynatree/doc/dynatree-doc.html)，它显示 onClick 回调函数传递了两个参数：节点和事件。这些参数究竟是什么？我会假设“节点”参数是 DynaTreeNode 类型。

我正在寻找的是在为元素调用 onClick 回调时获取对与节点关联的元素的引用`<a>`。我知道在这种情况下，`node.data.href`将等于`<a>`元素的 href 并`node.getEventTargetType(event)`返回“title”。该`<a>`元素将具有类“dynatree-title”。我实际上正在寻找对`<span>`紧接在元素之前的标签的引用`<a>`。它将具有“dynatree-expander”类。如果我可以获取`<a>`元素的引用，我可以使用 jQuery`.prev()`方法来获取`<span>`.

`<a>`当为元素前面的元素调用 onClick 回调时，我需要在它中执行条件登录`<span class="dynatree-expander">`。

**编辑：**

由于以下帖子，我一直专注于“节点”参数。他们表明它可能具有文档中未列出的属性。但是，我相信“事件”参数可能与 jQuery 单击处理程序的“事件”参数相同。因此，我应该使用`event.target`. 我将进行实验，看看是否可行。

以下是显示“节点”参数具有未记录属性的帖子：

1.  [这篇文章](https://groups.google.com/forum/?fromgroups=#!searchin/dynatree/nodeSpan/dynatree/EVIB0OYSMEs/HDJ9psAGlsoJ)显示`node.span`为`onActivate`。
2.  [这篇文章](https://groups.google.com/forum/?fromgroups=#!searchin/dynatree/nodeSpan/dynatree/lcBXdm6_mhw/qGD_5xWcbPwJ)显示`node.span`为`onPostInit`。
3.  [这篇文章](https://groups.google.com/forum/?fromgroups=#!searchin/dynatree/nodeSpan/dynatree/ADJFBzo700E/8VYK6GJGa2IJ)显示`node.span`,`node.ul`和`node.li`for `onRender`。

但后来我看到了[这篇文章](https://groups.google.com/forum/?fromgroups=#!searchin/dynatree/nodeSpan/dynatree/dHnekPo8ZrI/eCPZU2Ozz8cJ)，它显示了`event.target`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:04:50.170

“node”参数绝对是[dynatree 文档](http://wwwendt.de/tech/dynatree/doc/dynatree-doc.html)中列出的 DynaTreeNode 类型。我查看了它的属性，并且为 DynaTreeNode 记录的所有属性都在那里。它的原型是空的；属性都直接在对象上。

“节点”上有一些属性未在文档中列出。一些属性名称以下划线开头，因此绝对不应该使用它们，但其他的则不要。未记录的属性列表确实包括“ul”、“li”和“span”。其他值得注意的是“childList”、“parent”和“tree”。尽管 DynaTreeNode 类型没有列出“树”，但文档中的几个示例显示了它的用法。

“node.span”元素是一个`<span>`包围`<span>`扩展器图标和`<a>`包含标题的元素。“node.li”元素是`<li>`围绕`<span>`“node.span”引用的元素。我原以为“node.ul”会引用周围的`<ul>`元素，但对我来说它总是为空。

“node”参数上未记录的一些函数是“append”、“collapseSiblings”、“fromDict”和“removeChild”。

“事件”参数确实是一个 jQuery 事件参数，因此`event.target`可以很好地获取被点击的元素。

# database-design - 有效地组织大型数据集以进行报告

> ID：14919561
> 
> 赞同：0
> 
> 时间：2013-02-17T09:04:09.533
> 
> 标签：database-design, data-structures, nosql, bigdata

所以数据层次结构非常简单：

```
Account >> SubAccount >> Category >> Product 
```

我需要为每个产品提取**每日**统计数据（这只是一个数字，我们称之为每日绩效）。可以有几十个账号，几十个子账号，上百个品类，上***百万***个产品。

让我这样做的 API 的形式是

```
GetCurrentPerformance(Product) 
```

现在，在基于 Web 的仪表板中，我需要能够显示任何产品、类别、子帐户和帐户的时间与性能。如果自上次获取`GetCurrentPerformance(Product)`.

我正在云上构建这个解决方案，最好是在 AWS 上。我正在尝试决定如何最好地存储我每天获取的数据。这是我考虑过的：

1.  将所有内容放入数据库 (RDBMS)。担心桌子大小会以多快的速度失控。
2.  为每个产品维护一个平面文件，将当天的绩效附加到此文件中。在获取（平均）时计算类别、子帐户和帐户的统计信息，并为每个类别、子帐户和帐户维护一个文件。**问题**：文件需要存储在 S3 上，S3 不支持追加。使整个拉文件、附加数据、推文件非常耗时。
3.  为每天的数据（所有产品）维护一个文件。然后在批处理作业中，计算每个产品、类别、子帐户和帐户的统计信息。维护一个文件/数据库，以便不必为平均计算引用所有文件。**关注点：**要显示特定产品的时间线，需要阅读数百个文件。
4.  No-SQL 数据库？没有这方面的经验。

这似乎是一个非常简单的问题——但我对最好的处理方式感到困惑。建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:33:36.090

如果您只关心当前与以前的性能并且不需要任何历史性能统计信息，那么以下将在 RDBMS 中正常工作：

```
create table product_performance (
  product_id integer primary key,
  current_perf number,
  previous_perf number
); 
```

然后，您可以通过执行以下命令来设置性能：

```
update product_performance
set    current_perf = :new_perf,
       previous_perf = current_pref
where  product_id = :product; 
```

如果你想保持历史表现（这样你就可以随着时间的推移跟踪变化），你需要这样的东西：

```
create table product_performance (
  product_id integer,
  performance_date date,
  performance number,
  is_current char(1), --optional, may improve the performance of finding current perf easier
  primary key (product_id, performance_date)
); 
```

每个新的性能值只是产品和日期的插入。

无论您使用哪种方法，最好在设置新性能时发出警报，而不是等待仪表板获取查询重新运行。

# javascript - jQuery 触发 DatePicker 更改事件

> ID：14919563
> 
> 赞同：5
> 
> 时间：2013-02-17T09:04:11.020
> 
> 标签：javascript, ruby-on-rails-3, jquery-ui

我有以下代码：

```
$('.custom_datepicker_selector').datepicker({
  weekStart: 1
})
.on('changeDate', function(en) {
  var correct_format;
  correct_format = en.date.getFullYear() + '-' + ('0' + (en.date.getMonth() + 1)).slice(-2) + '-' + ('0' + en.date.getDate()).slice(-2);
  $('.custom_datepicker_selector').datepicker('hide');
  return $(this).parent().find("input[type=hidden]").val(correct_format);
}); 
```

这就像我想要的那样显示日期格式。但是，它仅在我单击日期选择器后才这样做，而不是最初。

最初显示此日期：

```
2013-02-17 
```

在我点击它之后，我得到了这个：

```
17/02/2013 
```

如何立即显示正确的日期？（上面的代码在 .ready

我为此创建了一个 jsFiddle：http: [//jsfiddle.net/jwxvz/](http://jsfiddle.net/jwxvz/)

这比 javascript 更像是一个 rails 问题：

我遵循了 abu 的建议，并在 rails 中这样做了：

```
<%= f.input :order_date, :as => :custom_datepicker, :input_html =>  { :value => localize(@client_order.order_date) } %> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T09:10:34.023

您也可以定义默认日期格式。

试试这个：

```
$('.custom_datepicker_selector').datepicker({
  weekStart: 1,
  dateFormat: 'dd/mm/yy'
}).on('changeDate', function(en) {
      $('.custom_datepicker_selector').datepicker('hide');
      return $(this).parent().find("input[type=hidden]").val(en);
   }); 
```

**更新：（重要）**

我看过你的 JSFiddle，你保留了文本框的默认值，因为`value="2013-02-17"`这就是为什么它在开始时显示该值只是删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T09:15:34.790

只是你必须使用：

```
$('.custom_datepicker_selector').datepicker({
weekStart: 1,
dateFormat:'yy-mm-dd'
}) 
```

你可以在这里参考：[链接](http://jqueryui.com/datepicker/#date-formats)

# java - 在适当的时候尝试禁用 JButton

> ID：14919583
> 
> 赞同：1
> 
> 时间：2013-02-17T09:08:28.600
> 
> 标签：java, swing, awt, actionevent

该程序读入一个数据文件并将内容存储到一个向量中。然后，当用户单击下一个和上一个按钮时，它会在文本字段中显示每个项目。我想在显示第一项时禁用上一个按钮，并在显示最后一项时禁用下一个按钮。

```
import java.io.*;
import java.util.Vector;
import java.util.Scanner;
import java.awt.*;
import java.awt.event.*;
import java.awt.event.ActionListener;
import javax.swing.*;

public class choosing_fruit extends JFrame implements ActionListener
{
    private JTextField dataItemTextField;
    private JButton nextButton, previousButton, closeButton;
    private Vector<String> v; 
    private int current = 0; // index value of current item shown in text field
    public static void main(String[] args) throws FileNotFoundException
    {
        choosing_fruit f = new choosing_fruit();
    }

    public choosing_fruit()
    {
        v = new Vector<String>();
        nextButton = new JButton(">>");
        previousButton = new JButton("<<");
        closeButton = new JButton("Close");
        dataItemTextField = new JTextField(20);
        setLayout(new FlowLayout());

        this.add(dataItemTextField);
        this.add(previousButton);
        this.add(nextButton);
        this.add(closeButton);

        nextButton.addActionListener(this);
        previousButton.addActionListener(this);
        closeButton.addActionListener(this);

        try
        {  
            Scanner in = new Scanner(new File("fruit.dat"));
            String inputLine;
            while(in.hasNextLine()) 
            {
                inputLine = in.nextLine();
                v.add(inputLine);
            }

            in.close(); 
        }
        catch(Exception e)      
        {       
            JOptionPane.showMessageDialog(null,"error");    
        }

        dataItemTextField.setText(v.get(current)); // show 1st item

        this.setTitle("Choosing Fruit");
        this.pack();
        this.setVisible(true);
    }
    public void actionPerformed(ActionEvent ae)
    {   
        if(current > 0)
        {
            previousButton.setEnabled(true);
        }
        else
        {
            previousButton.setEnabled(false);
        }
        if(current < 5)
        {
            nextButton.setEnabled(true);
        }
        else
        {
            nextButton.setEnabled(false);
        }

        if(ae.getSource() == nextButton) 
        {
            if(current >= 0)
            {
                current = current + 1;
                dataItemTextField.setText(v.get(current));
                System.out.println(current);
            }           
        }

        else if(ae.getSource() == previousButton) 
        {
            if(current <= 5)
            {
                current = current - 1;
                dataItemTextField.setText(v.get(current));
                System.out.println(current);
            }   
        }
        else if(ae.getSource() == closeButton)
        {
            shutDown();
        }

    }
        private void shutDown()     
        {
            this.dispose();
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:33:41.767

更改当前位置后尝试更新按钮的状态

```
public void actionPerformed(ActionEvent ae) {
    if (ae.getSource() == nextButton) {
        if (current >= 0) {
            current = current + 1;
            dataItemTextField.setText(v.get(current));
            System.out.println(current);
        }
    } else if (ae.getSource() == previousButton) {
        if (current <= 5) {
            current = current - 1;
            dataItemTextField.setText(v.get(current));
            System.out.println(current);
        }
    } else if (ae.getSource() == closeButton) {
        shutDown();
    }

    previousButton.setEnabled(current > 0);
    nextButton.setEnabled(current < v.size() - 1);
} 
```

# javascript - 为什么这段代码不能使用单独的 javascript？

> ID：14919591
> 
> 赞同：1
> 
> 时间：2013-02-17T09:09:45.243
> 
> 标签：javascript, html

单击按钮时，我想将一段文本变为红色。为什么第一组代码（带有单独的 Javascript 和 HTML）不起作用……但第二组代码可以？

第一组（不工作）

```
JAVASCRIPT:
    function focus()
    {
        getElementById('redder').style.color = '#ff0000';
    }

HTML:
    <button id="button1" onClick="javascript:focus()">cool</button>
    <span id="redder"> RED </span> 
```

. . .

第二组（工作）

```
HTML:
    <button id="button1" onClick="getElementById('redder').style.color = '#ff0000';">cool</button>
    <span id="redder"> RED </span> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T09:18:41.143

1.  将点击事件处理程序的名称从**焦点**更改为其他名称；
2.  你需要使用`document.getElementById()`

```
<script>
     function changeColor()
        {
            document.getElementById('redder').style.color = '#ff0000';
        }
    </script>
    <body>
        <button id="button1" onClick="changeColor();">cool</button>
        <span id="redder"> RED </span>
    </body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T09:14:47.487

使用非内联 JavaScript 时，需要添加文档范围：

```
document.getElementById('redder').style.color('#ff0000'); 
```

我认为 JavaScript 在定义内联时不需要该范围，但我无法快速找到有关该范围的文档。

# mysql - 在相邻列表模型中以类别和父级的层次关系将产品插入表中

> ID：14919592
> 
> 赞同：1
> 
> 时间：2013-02-17T09:09:50.923
> 
> 标签：mysql, database-design, adjacency-list-model

我有一个由邻接列表模型组成的表类别：

```
id  name             parent_id
------------------------------
1   Clothing         0
2   Books            0
3   Computers        0
4   Mobiles          0
5   Movies           0
6   Music            0
7   Mens             1
8   Shirts           7
9   Formal Trousers  7
10  Jeans            7 
```

和 product_category 表：

```
product_id fk
category_id fk
parent_id 
```

并有一个产品表：

```
product_id
category_id
parent_id
prod_name
genre
unit price
image 
```

我如何将产品插入到具有父 ID 链接的表中，然后它又具有到类别的链接。这样我就可以从 parent_id 和类别中检索产品。我应该将 parent_id 定义为主键吗.. 帮助表示赞赏.. 提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:11:04.027

假设产品和类别之间的关系是 M:N，并且类别和产品都形成一个层次结构（彼此独立），您的模型应该如下所示：

**类别：**

```
category_id PK
parent_id FK -> category.category_id
(other fields...) 
```

**产品：**

```
product_id PK
parent_id FK -> product.product_id
(other fields...) 
```

**产品分类：**

```
product_id FK -> product.product_id
category_id FK -> category.category_id
PK (product_id, category_id) 
```

* * *

我不太清楚你的意思是什么：*“我怎样才能在表中插入产品，该表具有指向父 ID 的链接，而它又具有指向类别的链接”*？假设您知道父产品的 id 和类别的 id，您可以：

```
INSERT INTO product (product_id, parent_id, other fields...)
VALUES (whatever, known parent id, other values...) 
```

然后将其连接到类别：

```
INSERT INTO product_category (product_id, category_id)
VALUES (what you inserted above, known category id) 
```

# android - 如何从 Google play 动态获取应用程序图标

> ID：14919595
> 
> 赞同：7
> 
> 时间：2013-02-17T09:10:06.273
> 
> 标签：android, google-play

我正在开发一个显示应用程序列表的应用程序，我想从 Google Play 商店获取此应用程序的图标以将其显示在列表中，所以如果有任何方法可以做到这一点，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T09:34:09.690

我最近在更新我的投资组合网站时不得不自己解决这个问题，所以我什至为你准备了一些代码:) 我所做的是在 php 中，但我不确定你想使用什么。首先，我使用视图-> 开发者-> 开发者工具（在 chrome 上）检查了带有我的应用程序的页面源。然后使用它我可以遍历 DOM 寻找可以用来识别应用程序图标的东西。我找到了这个： ![截屏](../Images/4425f355c818482fd05f6a57f61df4df.png)

这表明应用程序图标保存在一个带有“doc-banner-icon”类的 div 中——我在其他任何地方都找不到这个类，所以我理所当然地认为它是该类的唯一 div。然后在我的 php 代码中，我使用[simpledomparser](http://simplehtmldom.sourceforge.net/)加载 url，找到图标并吐出它的 url，如下所示：

```
<?php
include('simple_html_dom.php');

$html = file_get_html("https://play.google.com/store/apps/details?id=com.smithyproductions.swissarmycarrot"); //put your app id here

$bannerImage = $html->find('.doc-banner-icon'); //the class we found before

$img = $bannerImage[0]->find('img'); //find the img tag inside the div

$imgUrl = $img[0]->src; //get its src url

$arr = array(); //in my own example I filled this array with other things like the title an screenshots

$arr['imgUrl'] = $imgUrl;

echo json_encode($arr); //output it in an easy to read format

?> 
```

导致类似
{'imgUrl',' [https://lh6.ggpht.com/1WMU4E3lnbjz5yxLHxsPrJAJPw3uYZ8LXk3QkD1EKOxwOcHu0W9QyGlpM5AfrKYEVzzi=w124](https://lh6.ggpht.com/1WMU4E3lnbjz5yxLHxsPrJAJPw3uYZ8LXk3QkD1EKOxwOcHu0W9QyGlpM5AfrKYEVzzi=w124) '}

关于这种方法，请记住一件事：Google 可以随时更改所有内容的呈现和布局方式，因此请准备好在发生这种情况时更新您的应用程序 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-30T05:18:01.773

谷歌不断改变页面结构的问题，到目前为止，我找不到任何资源来以类似于 Apple Store 的官方方式处理这个问题。

无论如何，下面是我今天（2019 年 6 月）使用的 php 代码

PS：在我的代码中，一旦我设法获取图标 URL，我会将其缓存在我的数据库中，因此我不必在 google play store 中再次查找它

```
 try{
            $lookupData = @file_get_contents('https://play.google.com/store/apps/details?id=com.google.android.gm&hl=en');
            // Not valid any more 
            $pregString = '/<meta itemprop="image" content="(.*?)"\/>/';

            //June 2019
            $pregString = '/<img src="(.*?)" srcset=".*" class=".*" aria-hidden="true" alt="Cover art" itemprop="image">/';
            preg_match($pregString, $lookupData, $output);

        } catch (\Throwable $e) {
            $error = $e->getMessage();
            if (strpos($error, '404 Not Found') === false) {
                //unknown error
            }else{
                //Package not found, use default icon or something
            }
        }
        if(isset($output[1])){
            //Store $output[1];
        }else{
            //icon not found, use default icon or something
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-22T08:24:18.167

[我通过roarster](https://stackoverflow.com/users/1433482/roarster)修改了代码以使用 Play 商店的新网页，并对其进行了简化：

```
<?php
include('simple_html_dom.php');

$play_link = $_GET['playlink']; //Play store link

$html = file_get_html($play_link); //put your app id here

$bannerImage = $html->find('div.cover-container'); //the class we found before

$img = $bannerImage[0]->find('img'); //find the img tag inside the div

$imgUrl = $img[0]->src; //get its src url

$arr = array(); //in my own example I filled this array with other things like the title an screenshots

$arr['imgUrl'] = $imgUrl;

echo json_encode($arr); //output it in an easy to read format

?> 
```

现在你加载例如：`yourwebpage.com/script.php?playlink=https://play.google.com/store/apps/details?id=com.igg.android.im`

你得到结果；）

# c# - windows store app中如何设置HttpRequest的Referer？

> ID：14919596
> 
> 赞同：2
> 
> 时间：2013-02-17T09:10:15.227
> 
> 标签：c#, httprequest, windows-store-apps

我想从网站下载一些图片，但它必须发送带有“referer”的请求。像这样的代码：

```
 HttpWebRequest request = (HttpWebRequest)WebRequest.Create(imgUrl);
 CookieContainer cc = new CookieContainer();
 request.CookieContainer = cc;
 request.UserAgent = "Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5";
 request.Referer = "http://www.xxxxx.com/xxx/xxx/list_78542.html";
 request.CookieContainer = cc;
 HttpWebResponse myResponse = (HttpWebResponse)request.GetResponse();
 using (Stream stream = myResponse.GetResponseStream())
 ... 
```

但是，当我想在 Windows 商店应用程序中执行此操作时，它在 WebRequest 中没有属性“Referer”，我尝试使用它（如下所示）来设置“UserAgent”和“Referer”

```
 request.Headers["UserAgent"] = UserAgent;
    request.Headers["Referer"] = Referer; 
```

但它会引发错误**“必须使用适当的属性或方法修改'Referer'标头。”**

我该怎么办，请帮帮我？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-16T17:33:20.610

尝试使用**Windows.Web.Http**命名空间而不是**System.Net**，如此处所述[https://msdn.microsoft.com/en-us/library/windows/apps/xaml/dn440594.aspx](https://msdn.microsoft.com/en-us/library/windows/apps/xaml/dn440594.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-12T06:43:27.250

很简单：

myHttpWebRequest.Referer="http://www.microsoft.com";

# javascript - 如何创建具有透明网站其余部分的简单 div？

> ID：14919599
> 
> 赞同：2
> 
> 时间：2013-02-17T09:10:34.207
> 
> 标签：javascript, jquery

如何创建具有透明站点其余部分的简单 div（此 div 将在单击链接或其他 div 后显示）

这里的例子：

![在此处输入图像描述](../Images/1bd65a0fe4e3b001cfb0513c0ea5a61d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T09:13:23.003

不能`rgba(0, 0, 0, 0.8);`用作背景吗？[**小提琴示范**](http://jsfiddle.net/BU4cJ/1/)

```
div#transparent {
width:100%;
height:100%;
position:absolute;
top:0;
left:0;
z-index:2;
background:rgba(0, 0, 0, 0.8);
}
div#content {
width:300px;
height:300px;
position:absolute;
top:0;
left:0;
right:0;
bottom:0;
margin:auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T09:27:55.840

另一种方法是使用 jQuery UI。使用 jQuery UI，您可以使用`dialog`小部件和`modal`属性来获得相同的效果。jQuery UI 还有很多其他非常有用的小部件。

**jQuery 用户界面**：http: [//jqueryui.com/](http://jqueryui.com/)

您还可以使用 jQuery Themeroller 向 jQuery UI 添加不同的主题或制作自定义主题以获得所需的透明背景

jQuery Themeroller：http: [//jqueryui.com/themeroller/](http://jqueryui.com/themeroller/)

jsFiddle 上的工作示例：http: [//jsfiddle.net/jk4ru/](http://jsfiddle.net/jk4ru/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T09:28:49.750

## 使用 jquery：http: [//jsfiddle.net/bbgwB/](http://jsfiddle.net/bbgwB/)

```
$.fn.center = function () {
    this.css({
        'top': ($(window).height() - this.height()) / 2,
        'left': ($(window).width() - this.width()) / 2
    });
    return this;
};

$(function () {
    $(window).resize(function () {
        $('.message').center();
    }).resize();
}); 
```

## 使用的CSS：

```
html, body {
   height:100%;
}
.overlay {
  width:100%;
  height:100%;
  background:rgba(0, 0, 0, 0.4);
  position:relative;
  z-index:1;
}
.message {
   width:120px;
   height:200px;
   background:yellow;
   position:absolute;
   z-index:2;
   left:0;
   top:0;
} 
```

# c++ - 用另一个 ROI 替换 ROI

> ID：14919601
> 
> 赞同：1
> 
> 时间：2013-02-17T09:10:47.020
> 
> 标签：c++, opencv, image-processing

我正在处理处于中间阶段的视频处理项目，需要用另一个图像的 ROI（相同尺寸）替换某些图像的 ROI。是否有任何内置功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:44:14.480

您可以用来`Mat::copyTo`在 Mat 实例之间传输内容：

```
cv::Mat image1, image2;

cv::Rect roi1(0, 0, 100, 100);
cv::Rect roi2(50, 50, 150, 150);

cv::Mat(image2, roi2).copyTo(cv::Mat(image1, roi1)); 
```

# java - ScrollPane 中的水平滚动条

> ID：14919602
> 
> 赞同：1
> 
> 时间：2013-02-17T09:10:47.630
> 
> 标签：java, swing, jscrollpane, horizontal-scrolling

我有一个奇怪的问题。我将 scroolpane 添加到我的两个内部框架之一中，将两个 scroobars 策略设置为“ALLWAYS”。垂直工作正常，但水平显示 scroolbar 但不显示滚动句柄。这是它的样子

![问题](../Images/5d72a310807e331eb9b0fcb25d4103bb.png)

我认为它在JDK中的问题，但我应该是错的。我在这里看到了一些关于此的主题，但没有答案，也许现在有人可以知道。有什么想法吗？

这是关于我的滚动窗格的代码

```
JInternalFrame waypointsFrame = new JInternalFrame("Waypoints");
mapInternalFrame.getContentPane().add(waypointsFrame, BorderLayout.EAST);

topNode=new DefaultMutableTreeNode("Top node ");
InitializeTree(topNode);
model=new DefaultTreeModel(topNode);

JTree waypointTree = new JTree(model);
waypointTree.setDropMode(DropMode.INSERT);

waypointTreeRef=waypointTree;
waypointTree.setPreferredSize(new Dimension(180, 400));
waypointTree.setMaximumSize(new Dimension(180, 500));

waypointsFrame.setVisible(true);

JScrollPane scrollPane = new JScrollPane();
scrollPane.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
scrollPane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_ALWAYS);
scrollPane.setViewportView(waypointTree);
waypointsFrame.getContentPane().add(scrollPane, BorderLayout.NORTH); 
```

# php - PHP：类似数组构造函数的函数

> ID：14919603
> 
> 赞同：1
> 
> 时间：2013-02-17T09:11:20.750
> 
> 标签：php, arrays, casting, variadic-functions

我已经有几年没有使用 PHP 了——我主要关注 C、C++、Objective-C、Ruby 和 ECMAScript。通过尝试其他一些语言，我度过了一个保持头脑清醒的夜晚。

我在 PHP.net 上遇到了一个将数组转换为对象的示例，以便能够通过键访问它的值，就好像它们是实例变量一样：

`$obj = (object)array('foo' => 'bar', 'property' => 'value');`

作为练习，我想创建一个函数，它采用与`array`已转换为对象的“数组”相同的参数并返回。就像是：

```
function o_array(\* variable amount of key=>value args like array()*\)
{
  return (object)array.call(self, arguments);
} 
```

我不知道如何在 PHP 中构造一个接受可变数量的 key=>value 参数的函数。提前感谢您的建议。

***更新***
我希望将来有以下变化，因为我认为 PHP 的主要优势在于它的灵活性和普遍的疯狂（也是它的弱点）。不支持命名参数： [关于命名参数等项目的 PHP 语言会议。](http://www.php.net/~derick/meeting-notes.html#named-parameters)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T09:15:57.483

可变数量的参数是可能的[**`func_get_args`**](http://php.net/func-get-args)：

```
function f()
{
    $args = func_get_args();
    // ...
} 
```

但是函数没有“键=>值参数”之类的东西。所以你唯一能做的就是将它们作为数组传递（这使得整个函数变得毫无意义）：

```
function arrayToObject(array $from)
{
     return (object)$from;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T09:14:59.757

PHP 不允许命名参数，所以这是不可能的。数组不是函数而是语言结构，这就是为什么它是唯一可以使用键值分配的地方

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T09:21:12.850

听起来您正在尝试将数组转换为对象。如果是这种情况，您可以这样做：

```
function array_to_object($array) {
  $obj = new stdClass;
  foreach($array as $k => $v) {
     if(is_array($v)) {
        $obj->{$k} = $this->array_to_object($v); 
     } else {
        $obj->{$k} = $v;
     }
  }
  return $obj;
} 
```

因此，如果您有以下数组：

```
 $a = array('foo' => 'bar', 'property' => 'value'); 
```

转换它将导致：

```
 $o = array_to_object($a); 
 echo ($o->foo ); // will print 'bar' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T11:42:55.900

在我的理解中，我认为这是最明智的做法。

```
class Array()
{
   public $array = array('foo' => 'bar', 'property' => 'value');  
} 

 //initiate an object...
   $obj = new Array();
   $array = array_values($obj->array);
   print_r($array); //will print 'bar' and 'value'   
} 
```

# php - 在 cakephp 中获取会话 ID

> ID：14919605
> 
> 赞同：1
> 
> 时间：2013-02-17T09:11:20.857
> 
> 标签：php, cakephp

我是 cakephp 新手，这是我为获取会话 ID 所做的：

```
 $mySessionVars = $this->Session->read('Auth');
   debug( $mySessionVars ); 
```

调试后我得到了这个

```
 array(
'User' => array(
    'id' => '3',
    'full_name' => 'Saurav M',
    'email' => 'samual@gmail.com',
    'group_id' => '1',
    'created' => '2013-02-16 08:04:30',
    'modified' => '2013-02-16 08:04:30',
    'Group' => array(
        'id' => '1',
        'name' => 'Master Admin',
        'created' => '2012-11-13 04:16:40',
        'modified' => '2012-11-13 04:16:40'
    )
)
 ) 
```

我想获取用户ID，请任何人帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:08:02.483

在 Cake 中，您可以像这样访问 Session 变量（称为点表示法）。

```
 $all_auth_data = $this->Session->read('Auth');  
  $user_id = $this->Session->read('Auth.User.id');   
  $user_group_array = $this->Session->read('Auth.User.Group');     
  $user_group_id = $this->Session->read('Auth.User.Group.id'); 
```

将返回由变量名指示的数据。但是你真的应该[阅读](https://stackoverflow.com/questions/10707272/php-multidimensional-array-access)评论中链接的线程，因为它是非常基本的 php.ini 文件。

# python - 这个文件是视频（Python）吗？

> ID：14919609
> 
> 赞同：7
> 
> 时间：2013-02-17T09:11:50.900
> 
> 标签：python, file, video, file-io

我正在尝试在 Python 2.7 中创建一个具有以下要求的程序：

1.  枚举 Windows 中的所有视频文件。
2.  使用以下命令打开每个视频文件：`os.open(filepath, os.O_RDWR)`
3.  处理文件。

我目前的算法是：

1.  拥有所有视频文件扩展名的列表。我从[这里得到它们](http://www.fileinfo.com/filetypes/video)
2.  循环遍历所有文件
3.  如果文件具有视频扩展名，则对其进行处理

这种方法有以下缺点：

1.  一些文件扩展名如“.dat”或“.am”用于非媒体文件。
2.  其他程序（即防病毒）使用某些带有“.dat”等扩展名的文件

我应该怎么做才能制作满足上述要求的程序？

这是我当前的代码：

```
def is_video_file(filename):
    video_file_extensions = (
'.264', '.3g2', '.3gp', '.3gp2', '.3gpp', '.3gpp2', '.3mm', '.3p2', '.60d', '.787', '.89', '.aaf', '.aec', '.aep', '.aepx',
'.aet', '.aetx', '.ajp', '.ale', '.am', '.amc', '.amv', '.amx', '.anim', '.aqt', '.arcut', '.arf', '.asf', '.asx', '.avb',
'.avc', '.avd', '.avi', '.avp', '.avs', '.avs', '.avv', '.axm', '.bdm', '.bdmv', '.bdt2', '.bdt3', '.bik', '.bin', '.bix',
'.bmk', '.bnp', '.box', '.bs4', '.bsf', '.bvr', '.byu', '.camproj', '.camrec', '.camv', '.ced', '.cel', '.cine', '.cip',
'.clpi', '.cmmp', '.cmmtpl', '.cmproj', '.cmrec', '.cpi', '.cst', '.cvc', '.cx3', '.d2v', '.d3v', '.dat', '.dav', '.dce',
'.dck', '.dcr', '.dcr', '.ddat', '.dif', '.dir', '.divx', '.dlx', '.dmb', '.dmsd', '.dmsd3d', '.dmsm', '.dmsm3d', '.dmss',
'.dmx', '.dnc', '.dpa', '.dpg', '.dream', '.dsy', '.dv', '.dv-avi', '.dv4', '.dvdmedia', '.dvr', '.dvr-ms', '.dvx', '.dxr',
'.dzm', '.dzp', '.dzt', '.edl', '.evo', '.eye', '.ezt', '.f4p', '.f4v', '.fbr', '.fbr', '.fbz', '.fcp', '.fcproject',
'.ffd', '.flc', '.flh', '.fli', '.flv', '.flx', '.gfp', '.gl', '.gom', '.grasp', '.gts', '.gvi', '.gvp', '.h264', '.hdmov',
'.hkm', '.ifo', '.imovieproj', '.imovieproject', '.ircp', '.irf', '.ism', '.ismc', '.ismv', '.iva', '.ivf', '.ivr', '.ivs',
'.izz', '.izzy', '.jss', '.jts', '.jtv', '.k3g', '.kmv', '.ktn', '.lrec', '.lsf', '.lsx', '.m15', '.m1pg', '.m1v', '.m21',
'.m21', '.m2a', '.m2p', '.m2t', '.m2ts', '.m2v', '.m4e', '.m4u', '.m4v', '.m75', '.mani', '.meta', '.mgv', '.mj2', '.mjp',
'.mjpg', '.mk3d', '.mkv', '.mmv', '.mnv', '.mob', '.mod', '.modd', '.moff', '.moi', '.moov', '.mov', '.movie', '.mp21',
'.mp21', '.mp2v', '.mp4', '.mp4v', '.mpe', '.mpeg', '.mpeg1', '.mpeg4', '.mpf', '.mpg', '.mpg2', '.mpgindex', '.mpl',
'.mpl', '.mpls', '.mpsub', '.mpv', '.mpv2', '.mqv', '.msdvd', '.mse', '.msh', '.mswmm', '.mts', '.mtv', '.mvb', '.mvc',
'.mvd', '.mve', '.mvex', '.mvp', '.mvp', '.mvy', '.mxf', '.mxv', '.mys', '.ncor', '.nsv', '.nut', '.nuv', '.nvc', '.ogm',
'.ogv', '.ogx', '.osp', '.otrkey', '.pac', '.par', '.pds', '.pgi', '.photoshow', '.piv', '.pjs', '.playlist', '.plproj',
'.pmf', '.pmv', '.pns', '.ppj', '.prel', '.pro', '.prproj', '.prtl', '.psb', '.psh', '.pssd', '.pva', '.pvr', '.pxv',
'.qt', '.qtch', '.qtindex', '.qtl', '.qtm', '.qtz', '.r3d', '.rcd', '.rcproject', '.rdb', '.rec', '.rm', '.rmd', '.rmd',
'.rmp', '.rms', '.rmv', '.rmvb', '.roq', '.rp', '.rsx', '.rts', '.rts', '.rum', '.rv', '.rvid', '.rvl', '.sbk', '.sbt',
'.scc', '.scm', '.scm', '.scn', '.screenflow', '.sec', '.sedprj', '.seq', '.sfd', '.sfvidcap', '.siv', '.smi', '.smi',
'.smil', '.smk', '.sml', '.smv', '.spl', '.sqz', '.srt', '.ssf', '.ssm', '.stl', '.str', '.stx', '.svi', '.swf', '.swi',
'.swt', '.tda3mt', '.tdx', '.thp', '.tivo', '.tix', '.tod', '.tp', '.tp0', '.tpd', '.tpr', '.trp', '.ts', '.tsp', '.ttxt',
'.tvs', '.usf', '.usm', '.vc1', '.vcpf', '.vcr', '.vcv', '.vdo', '.vdr', '.vdx', '.veg','.vem', '.vep', '.vf', '.vft',
'.vfw', '.vfz', '.vgz', '.vid', '.video', '.viewlet', '.viv', '.vivo', '.vlab', '.vob', '.vp3', '.vp6', '.vp7', '.vpj',
'.vro', '.vs4', '.vse', '.vsp', '.w32', '.wcp', '.webm', '.wlmp', '.wm', '.wmd', '.wmmp', '.wmv', '.wmx', '.wot', '.wp3',
'.wpl', '.wtv', '.wve', '.wvx', '.xej', '.xel', '.xesc', '.xfl', '.xlmv', '.xmv', '.xvid', '.y4m', '.yog', '.yuv', '.zeg',
'.zm1', '.zm2', '.zm3', '.zmv'  )

if filename.endswith((video_file_extensions)):
    return True

def get_drives():
    import string
    from ctypes import windll
    import ctypes
    from ctypes.wintypes import MAX_PATH

    drives = []
    bitmask = windll.kernel32.GetLogicalDrives()
    for letter in string.uppercase:
        if bitmask & 1:
            letter = letter + ':\\'
            drives.append(letter)
        bitmask >>= 1
    return drives

def process(filepath):
    try:
        video_file = os.open(filepath, os.O_RDWR)
        # Do processing

def process_all_videos():
    for dirve in drives:
        for root, dirs, files in os.walk(dirve):
            for filename in files:
                if is_video_file(filename):
                    try:
                        filepath = os.path.join(root, filename)
                        process(filepath)

def main():
    process_all_videos()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T09:17:50.430

尝试使用[`python-magic`](https://github.com/ahupp/python-magic)，它是通过读取文件内容（通常是前 1024 个字节）来更好地检测文件类型的方法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-01-27T18:24:45.093

此时，有一种更简单的方法可以检查任何给定文件是否包含有效的视频流：使用[Python 的 MediaInfo 包装器](https://github.com/paltman/pymediainfo)加载文件并检查是否存在视频流。

```
fileInfo = MediaInfo.parse('some/file/name.ext')
for track in fileInfo.tracks:
    if track.track_type == "Video":
        # success! 
```

我不知道这样做的效率，但它至少应该和使用 ffmpeg 一样快。至少，它有一个很好的 API，并且还有很多其他很棒的信息可以很容易地用它来提取。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-05-27T13:24:16.397

这是解决您问题的有效方法

```
import mimetypes

if mimetypes.guess_type('file_path')[0].startswith('video'):
   print('It is a video')``` 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-17T09:16:52.223

我可能会使用 ffmpeg / libavcodec 打印出文件信息，并解析输出以检查文件是否包含视频流。

然后，您可以避免拥有大量文件扩展名，它还可以解决 DAT 文件的问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-06-10T12:08:03.793

我在同样的问题上苦苦挣扎，这是我的解决方案：

```
import magic
mime = magic.Magic(mime=True)
filename = mime.from_file(path_to_video)
if filename.find('video') != -1:
   print('it is video') 
```

# javascript - IE8 中的表单验证问题

> ID：14919611
> 
> 赞同：1
> 
> 时间：2013-02-17T09:12:20.693
> 
> 标签：javascript, validation

嗨，我在 javascript 中创建了一个方法来验证表单中的所有输入元素

这是我的表格

```
<form name="frmRegister" action="" method="post" onsubmit="return validate(this);">
<ul>
<li>
  <input  type="text"   validate="true" regex="" displayname="card number 1" name="inpt1"  >
</li>
<li>
<input  type="text"   validate="true" regex="" displayname="card number 2" name="inpt5"  >
</li>
<li>
 <input  type="text"   validate="true" regex="" displayname="card number 3" name="inpt2"  >
</li>
<li>
 <input  type="text"   validate="true" regex="" displayname="card number 4" name="inpt3"  >
</li>
<li>
<input  type="text"   validate="true" regex="" displayname="card number 5" name="inpt4"  >
</li>
 </ul>
 <input type="submit" name="SubmitButton" value="SEND"  />
 </form> 
```

这是我的方法

```
<script type="text/javascript">
function validate(form_name)
{
    for (var i = 0; i < form_name.elements.length; i++) 
  {
    var elem = form_name.elements[i];
    var displayname = elem.getAttribute("displayname")
    var element_names="";
     if (elem.getAttribute("validate") == "true")
 {
    if(elem.value=="")
    {
      alert(displayname+" connot be null.");
      elem.focus();
      return false;

    }
    }

  }

  return true;

}
</script> 
```

问题是它在 IE8 中不起作用，它显示警报消息但表单仍在提交，所以我在我的数据库中得到空值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:27:19.080

试试这个：

```
<form name="frmRegister" action="" method="post" onsubmit="event.returnValue = validate(this);"> 
```

此外，您的代码中缺少`;`您的代码。

```
var elem = form_name.elements[i];
var displayname = elem.getAttribute("displayname")   //Here you miss ; 
```

让我知道它是否对您有用。

编辑（在**Firefox**、**Opera**、**IE**和**Chrome**中检查）：

```
<form name="frmRegister" action="" method="post" onsubmit=" if (event.preventDefault) return validate(this) ; else  event.returnValue = validate(this) ; "> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T10:36:52.153

尝试替换下面的部分代码。

```
if(elem.value=="" || elem.value == null)
{
  alert(displayname+" connot be null.");
  elem.focus();
  return false;

} 
```

# cuda - 在哪里可以找到 CUDA 的 cutil_math.h？

> ID：14919613
> 
> 赞同：10
> 
> 时间：2013-02-17T09:12:43.900
> 
> 标签：cuda

[CUDA 常见问题解答](https://developer.nvidia.com/cuda-faq)说：

> CUDA 定义了 float4 等向量类型，但默认不包含任何运算符。但是，您可以使用标准 C++ 定义自己的运算符。CUDA SDK**包含一个头文件“cutil_math.h”**，它定义了对向量类型的一些常见操作。

但是我无法使用 CUDA SDK 5.0 找到它。它是否已被删除/重命名？

我在[这里](http://code.google.com/p/cudpp/source/browse/trunk/common/inc/cutil_math.h?r=157)找到了标题的一个版本。它与 SDK 附带的那个有什么关系？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T02:48:00.343

cutil 功能已从 CUDA 5.0 示例（即“SDK”）中删除。您仍然可以[下载以前的 SDK](https://developer.nvidia.com/cuda-toolkit-archive)并在 CUDA 5 下编译它，然后您应该拥有以前 SDK 附带的所有内容。

官方通知由 nvidia 在 CUDA 5.0 发行说明（CUDA_Samples_Release_Notes.pdf，随样本一起安装）中给出。至于为什么，我想 nvidia 关于 cutil 的情绪可能类似于[这里](https://devtalk.nvidia.com/default/topic/486454/cuda-programming-and-performance/cutil-header-not-present-at-all-no-its-not-an-environment-variable-error/)所说的“不适合在实际应用程序中使用。它完全不受支持”，但人们在实际应用程序中使用它。所以尝试阻止这种情况的一种方法是删除它，我想。这只是猜测。

请注意发行说明中提供的一些其他有用信息：

> CUTIL 已随 CUDA 5.0 中的 CUDA 示例一起删除，并替换为 NVIDIA_CUDA-5.0/common/inc 中的辅助函数：helper_cuda.h、helper_cuda_gl.h、helper_cuda_drvapi.h、helper_functions.h、helper_image.h、helper_math.h , helper_string.h, helper_timer.h
> 
> 这些帮助函数处理 CUDA 设备初始化、CUDA 错误检查、字符串解析、图像文件加载和保存以及计时功能。CUDA Samples 项目不再有对 CUTIL 的引用和依赖，现在继续使用这些辅助函数。

因此，您可能会在其中一些头文件中找到有用的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-03T14:45:57.750

在最新的 SDK helper_math.h 中实现了大部分必需的运算符，但它仍然缺少 OR 或 AND 等逻辑运算符

# css - 如何删除禁用输入中的字体颜色

> ID：14919618
> 
> 赞同：3
> 
> 时间：2013-02-17T09:13:14.020
> 
> 标签：css, disabled-input

[http://jsfiddle.net/NUDDv/](http://jsfiddle.net/NUDDv/)

HTML：

```
<div class="red">
    <input type="text" value="text" disabled="disabled">
    <select disabled>
        <option>aaa</option>
        <option>aaa</option>
    </select>
</div>
<div>
    <input type="text" value="text" disabled="disabled">
    <select disabled>
        <option>aaa</option>
        <option>aaa</option>
    </select>
</div> 
```

CSS：

```
div.red input[type=text],
div.red select{
    color: red;
}
div.red input[type=text][disabled],
div.red select[disabled]{
    color: none;
} 
```

我可以写什么到 css disabled 输入以去除红色？我不能设置颜色，因为禁用的输入看起来不太好。我只想在 CSS 中设置它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T09:19:36.463

没有什么叫`color:none;`

```
div.red input[type=text][disabled],
div.red select[disabled]{
    color: black;
} 
```

要恢复默认颜色，请使用：

```
color:GrayText; 
```

## CSS 系统颜色关键字 -[链接](http://webdesign.about.com/od/colorcharts/l/blsystemcolors.htm)

> CSS 系统颜色关键字是一种使用 CSS 设置文档样式的方法，以便它们集成到客户正在使用的环境中。您无需准确指定颜色，而是告诉用户代理使用系统上定义的颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T09:16:59.727

`color: none`不是有效的颜色。使用 hex、rgb 或任何 css 有效颜色。如果您希望文本不可见，请使用`color: transparent;`.

为了让颜色回落到元素的原始颜色或禁用状态，您可以使用`color: initial;`. 见[这里](https://developer.mozilla.org/en-US/docs/CSS/initial_value)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T09:36:20.110

我不相信，跨浏览器，一旦在 CSS 中指定了文本颜色，就只使用 CSS 将文本颜色重置为其[初始状态。](https://developer.mozilla.org/en-US/docs/CSS/initial)`red`禁用输入时，您必须删除该类。

否则，您可以强制一个特定`color`且`background-color`处于禁用状态的浏览器进行某种程度的奇偶校验。

```
input[type=text][disabled],
select[disabled] {
    color: #545454 !important;
    background-color: #EBEBE4 !important;
} 
```

但是请注意，还有许多其他与表单元素相关的默认样式。您不能期望事情在任何地方看起来都完全相同。

[jsfiddle](http://jsfiddle.net/vYyyJ/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T11:40:42.700

保持简单。使用[`:not()`](https://developer.mozilla.org/en/docs/CSS/%3anot)伪类。

见[演示](http://jsfiddle.net/NUDDv/4/)。

```
div.red input[type=text]:not([disabled]),
div.red select:not([disabled]){
    color: red;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T09:19:25.093

在您的 jsfiddle 第三个 javascript 行中：

```
$('input[type=text], select').attr('disabled', 'disabled').css('color', 'grey'); 
```

# windows-7 - Windows 7 上的 Visual Studio 2012 仍然需要 .NET 4.5

> ID：14919622
> 
> 赞同：5
> 
> 时间：2013-02-17T09:14:04.910
> 
> 标签：windows-7, visual-studio-2012

我在 Windows 7 SP1、x86 上安装了 VS 2012 Professional Update 1。但是，当我尝试编译面向 .NET 4.5 的 Windows 应用程序时，我收到以下错误：

![在此处输入图像描述](../Images/0a35dcefa3ff081dfd3dccea6cc7847d.png)

我按要求安装了 .NET 4.5，但仍然出现相同的窗口。Windows 已全面更新。

在同一台机器上，我还运行 VS 2010 Professional SP1，它适用于 .NET 4。我应该怎么做才能在同一个操作系统中运行 VS 2010 和 2012？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:35:58.787

我已经安装了上述所有内容，但在 x64 上。

我推荐以下内容：

*   卸载 vs2012 和 .net framework 4.5
*   [从这里](http://www.microsoft.com/en-us/download/details.aspx?id=30653)重新安装.net framework 4.5
*   安装vs2012
*   从我读到的关于这个问题的内容来看，.net 4.5 不会改变任何其他.net fw 版本

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T09:30:02.703

微软表示，.NET 4.5 是替换旧的.NET Framework 4.0 程序集的就地更新。您是否尝试过卸载 4.0，然后再安装 4.5？

这里也解释了这个问题（或多或少）：http: [//msdn.microsoft.com/en-us/library/ms246609.aspx](http://msdn.microsoft.com/en-us/library/ms246609.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-27T20:52:37.453

Visual Studio 2012 在 Windows 7 Professional 上运行时存在已知的兼容性问题。

尝试为其安装修复程序：

[http://www.microsoft.com/en-us/download/details.aspx?id=36020](http://www.microsoft.com/en-us/download/details.aspx?id=36020)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-18T20:32:49.407

在启动新项目之前，您必须指定要在 Visual Studio 2012 中定位的 .NET Framework 版本 - 请参阅此处的答案 [http://msdn.microsoft.com/library/bb398197.aspx](http://msdn.microsoft.com/library/bb398197.aspx)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-08-02T07:02:20.013

如果您在 Windows 7 上使用 VS 2012，则无法创建 Windows 应用程序，这是限制。

# algorithm - 给定 N 个弹珠和 M 个楼层，找出算法找出弹珠会从哪个最低楼层破裂

> ID：14919628
> 
> 赞同：3
> 
> 时间：2013-02-17T09:14:37.123
> 
> 标签：algorithm, puzzle

它与这个问题有关：[两颗弹珠和一座 100 层的建筑](https://stackoverflow.com/questions/6547/two-marbles) ，但它不一样......我们要找出最好的算法来找出答案，最小化找到最低楼层所需的最大下降的策略..

这是我的想法

> 最后一块大理石必须以逐步的方式掉落
> 
> 其余的弹珠会选择一跳（比如 hop-n）
> 
> 例如。因此，当 N = 2，M = 100 时，我们知道最大掉落数 = 14，并且 hop-1 = 第一次掉落第一颗大理石的地板。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T09:27:37.627

这是用Java编写的简单暴力解决方案：

```
/**
 * Return maximum number of floors that could be checked with given number
 * of marbles and drops.
 */
private static int getMaximumFloors (int marblesCount, int dropsCount)
{
    if (marblesCount == 0) return 0;
    else
    {
        int result = 0;

        for (int i = 0; i < dropsCount; i++)
        {
            result += getMaximumFloors (marblesCount - 1, i) + 1;
        }

        return result;
    }
}

/**
 * Return minimum number of drops that is definitely enough to check
 * given number of floors having given number of marbles.
 */
private static int getMinimumDrops (int marblesCount, int floorsCount)
{
    int dropsCount = 0;
    while (getMaximumFloors (marblesCount, dropsCount) < floorsCount)
        dropsCount += 1;
    return dropsCount;
}

public static void main (String [] args)
{
    System.out.println (getMinimumDrops (2, 100));
} 
```

将它移植到 C/C++ 应该很容易。

以下是一些结果：

```
2 marbles, 100 floors -> 14
3 marbles, 100 floors -> 9
4 marbles, 100 floors -> 8
5 marbles, 100 floors -> 7
6 marbles, 100 floors -> 7 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T10:46:30.280

可以用 M 个弹珠和 D 个掉落物探索的楼层 F 为

```
F(0,D) = 0 /* no marbles, no results */
F(M,0) = 0 /* no drops, no results */

F(M,D) = 1 + /* we drop a marble once... */
    F(M-1,D-1) + /* it breaks ... */
    F(M,D-1) /* or it doesn't */ 
```

此函数与您要计算的相反，但这不是问题。该函数是单调的，因此只需在结果空间中进行二进制搜索。

# java - 如何使用工作日名称在 DD/MM/YYYY 中打印 Java 日期

> ID：14919642
> 
> 赞同：-5
> 
> 时间：2013-02-17T09:17:21.023
> 
> 标签：java

打印一周的 Java 日期和日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:21:36.323

```
SimpleDateFormat format = SimpleDateFormat("EEE, dd/MM/yyyy").format(yourDateObject); 
```

(sigh)

[http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

# c# - 在 jquery datepicker 中添加验证

> ID：14919646
> 
> 赞同：0
> 
> 时间：2013-02-17T09:18:03.073
> 
> 标签：c#, jquery, asp.net, validation

```
 $(document).ready(function () {

        $("#datepicker1").datepicker({

            minDate: 0,
            numberOfMonths: 2,
            onSelect: function (selected) {
                var minDate = $(this).datepicker('getDate');
                minDate.setDate(minDate.getDate() + 1);
                $("#datepicker2").datepicker("option", "minDate", minDate)
            }
        });

        $("#datepicker2").datepicker({
            numberOfMonths: 2,
            onSelect: function (selected) {
                $("#datepicker1").datepicker("option", "maxDate", selected)
            }
        });
    }); 
```

我有 2 个文本框（带有 jquery datepicker），它们是 datepicker1 和 datepicker2 以及一个搜索按钮。如果我点击按钮而不选择任何日期，我想显示一个标签，上面写着“请选择一个日期”这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:21:11.540

Use [RequiredFieldValidator](http://asp.net-tutorials.com/validation/required-field-validator/) to check for empty input fields.

Also refer to:

[RequiredFieldValidator Class](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.requiredfieldvalidator.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T09:23:48.867

well if you only want to validate against empty textbox then you could just go

Lets say your asp button has an id of "btnSubmit" hence you do this..

```
$('#btnSubmit').click(function (e) {
if (!valdateForm) {
e.preventDefault(); // this will prevent the button to submit so you can display error messages or do any other stuff you want. if validateForm returns true, then the form will submit as expected.
}

});

function validateForm() {
    if ($('#datepicker1').val().length == 0 || $('#datepicker2').val().length == 0) {
     return false;
    } else {return true;}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T09:25:36.573

sure !

You can either use a plugin that does this for you. jQuery validation is a great pick [http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation).

Or you could write it youself:

```
$("#search").click(function(e){
  if($("#datepicker2").val() === '' ||  $("#datepicker1").val() === ''){
    alert("Please provide a value for date");
    e.cancel();
  }
}); 
```

Code not tested, you might need to tweak it a bit :)

# ios - iOS Web 应用上的 HTML5 音频

> ID：14919647
> 
> 赞同：1
> 
> 时间：2013-02-17T09:18:17.113
> 
> 标签：ios, html, jquery-mobile, audio

我正在尝试在 iPad 网络应用程序上播放声音。使用 jquery mobile 和 iOS 6.1。我知道 iOS 上的自动播放限制，因此我通过单击（功能）开始播放音频。它在 iPad 上的 Safari 浏览器中运行良好。但是当我全屏访问与网络应用程序相同的页面（添加到主屏幕）时，它不会播放。我会认为它只是全屏显示的完全相同的 Safari。显然情况并非如此，网络应用程序似乎有额外的限制。

为什么 html5 音频会在 iPad Safari 浏览器中播放，但不能通过 iPad 网络应用程序播放？在浏览器与网络应用程序中我需要注意更多限制吗？

我使用的示例代码：

```
html: <audio id="audio" src="/audio/test.mp3"></audio>
script:
$(document).on("pageinit", function () {
        var audio = document.getElementById('audio');
        $("#playGame").on("click", function (event, ui) {

            audio.play();
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-09T19:41:31.807

我在同样的事情上挣扎。在 Safari 和 Chrome 上：播放音频没问题。停止、暂停、播放，一切正常。

但在网络应用程序中也是如此：没有音频。

原来是一件很简单的事情。我删除了这一行：

```
<meta name="apple-mobile-web-app-capable" content="yes"> 
```

我有音频播放！它不再是一个真正的网络应用程序；显示 URL 框和 Safari 控件....但我需要音频才能工作（网络播放器）所以这对我来说已经足够了...

# java - Jinternalframe 无法正常工作

> ID：14919655
> 
> 赞同：0
> 
> 时间：2013-02-17T09:19:06.313
> 
> 标签：java, swing, jinternalframe

嗨，我有几个具有默认最小/最大和恢复按钮的内部框架。它在默认状态下工作正常，但是当你恢复主框架时，它就不能正常工作。假设两个内部框架处于最小状态，一个处于最大状态状态。现在，如果您将主容器最大化，那么所有最小内部框架都会消失>请在下面找到代码。请找到随附的屏幕截图

```
package tryout;
import java.awt.Component;
import java.awt.EventQueue;
import java.awt.event.*;
import java.util.ArrayList;
import java.util.List;

import javax.swing.*;

public class Test3 {

    public static void main(String[] args) {
        new Test3();
    }

    private int xpos = 0;
    private int ypos = 0;

    public Test3() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception exp) {
                    exp.printStackTrace();
                }
                DesktopPane pane = new DesktopPane();
                pane.add(newInternalFrame());
                pane.add(newInternalFrame());
                pane.add(newInternalFrame());

                JFrame frame = new JFrame();
                frame.add(pane);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setSize(400, 400);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

            }
        });
    }

    public JInternalFrame newInternalFrame() {
        JInternalFrame inf = new JInternalFrame("Blah", true, false, true, true);
        inf.setLocation(xpos, ypos);
        inf.setSize(100, 100);
        inf.setVisible(true);
inf.repaint();
inf.revalidate();
        xpos += 50;
        ypos += 50;

        return inf;
    }

    public class DesktopPane extends JDesktopPane {

        @Override
        public void doLayout() {
            super.doLayout();
            List<Component> icons = new ArrayList<Component>(25);
            int maxLayer = 0;

            for (Component comp : getComponents()) {
                if (comp instanceof JInternalFrame.JDesktopIcon) {
                    icons.add(comp);
                    maxLayer = Math.max(getLayer(comp), maxLayer);
                }
            }

            maxLayer++;
            int x = 0;
            for (Component icon : icons) {

                int y = getHeight() - icon.getHeight();
                icon.setLocation(x, y);
                x += icon.getWidth();
                setLayer(icon, maxLayer);

            }
        }
     /*   public void doLayout() {
            super.doLayout();
            List<Component> icons = new ArrayList<Component>(25);
            for (Component comp : getComponents()) {
                if (comp instanceof JInternalFrame.JDesktopIcon) {
                    icons.add(comp);
                }
            }

            int x = 0;
            for (Component icon : icons) {

                int y = getHeight() - icon.getHeight();
                icon.setLocation(x, y);
                x += icon.getWidth();

            }
        }*/
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:02:04.570

这更像是一种技巧，而不是一种解决方案。

为什么会发生，我不知道，但是由于某种原因，当调整桌面窗格的大小时，无论所有其他组件（以及图层属性）如何，似乎最大化的窗口都被带到了前面

这似乎迫使桌面窗格尊重图层属性。

```
public class DesktopPane extends JDesktopPane {

    public DesktopPane() {
        addComponentListener(new ComponentAdapter() {
            @Override
            public void componentResized(ComponentEvent e) {
                revalidate();
                repaint();
            }
        });
    }

    /*...*/

} 
```

# php - 通过客户端和服务器的安全命令

> ID：14919656
> 
> 赞同：1
> 
> 时间：2013-02-17T09:19:08.463
> 
> 标签：php, javascript, security, sockets, websocket

我在 Javascript 中使用 Fancy WebSockets 与我的 php 服务器进行通信以进行多人游戏。

但是现在，我只是将原始套接字（json）发送为

```
Sending: {"command": "login", "data": {"id" : "1575","md5" : "6bd8937a8789a3e58489c4cfd514b1a7","username": "densortekat"}} index.php:58
Sending: {"command": "inroom"} index.php:58
Reciveing: {"command": "roombg","data" : "shop.png"} index.php:83
Reciveing: {"command" : "NEWUSER","data" : { "username" : "densortekat","seat_id" : "29","room_id" : "9"}} index.php:83
Sending: {"command" : "move", "data" : { "seat_id" : "53"}} index.php:58
Reciveing: {"command": "move", "data" : {"username" : "densortekat", "seat_id" : "53"}} index.php:83
Sending: {"command": "request_trade", "data" : "densortekat"} index.php:58
Reciveing: {"command":"trade", "data": {"username":"densortekat"}} index.php:83
Sending: {"command":"ping"} 
```

我的问题是，我如何从 javascript 到 PHP 以及 PHP->Javascript 加密数据的相同方式，所以其他人看不到发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T09:22:17.153

请参阅[带有 SSL 的 html5 Websocket](https://stackoverflow.com/questions/9745249/html5-websocket-with-ssl) - 如果您的初始页面是 HTTPS (SSL/TLS)，那么它上面的 websockets 也将是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T09:45:21.913

您不能确定在客户端激活了 javascript，但真正的问题是，您无法知道您从服务器发送和接收到客户端的数据是由 javascript 处理的，而不是由用户处理的。

作为一个恶意用户，我可以向您发送我自己伪造的上述数据，而不是由您的 js 代码计算的数据。无法从带有任何证书的客户端接收数据，该证书说“此数据是由受信任的 js VM 生成的，而不是由用户伪造/操纵的”。

# c# - Azure 项目不在本地运行 - 找不到程序集

> ID：14919662
> 
> 赞同：4
> 
> 时间：2013-02-17T09:20:22.020
> 
> 标签：c#, asp.net-mvc, azure

我为此挣扎了2天。我有一个包含 4 个项目的解决方案：

*   网络
*   服务
*   对象
*   达尔

当我将一个 Web 项目设置为启动项目并运行它时，一切正常。现在，我将一个空白 Azure 云服务项目添加到解决方案中，并手动将 Web 项目添加为新的 Web 角色项目。当我运行新添加的 Azure 云服务时，云模拟器启动，但项目无法运行，因为它找不到 AutoMapper.dll（Web 项目使用它）。如果我将 AutoMapper.dll 添加到 GAC，它会前进到下一个外部程序集（在我的情况下是 Dapper.dll）。我仔细检查了一下，我所有的外部程序集都将 Copy Local 设置为 true。

为什么云项目在 GAC 中搜索而不是在 bin 文件夹中？我必须做一些非常错误的事情，所以请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:14:55.470

我设法解决了删除 C:\users\username\AppData\Local\Temp\Temporary ASP.NET 文件中的临时文件的问题。

# android - 为什么我的 TableLayout 在 API 级别 10 或更低级别上运行时无法正常显示？

> ID：14919665
> 
> 赞同：0
> 
> 时间：2013-02-17T09:20:44.537
> 
> 标签：android, xml, tablelayout

我的应用程序使用 TableLayout 向用户显示一些数据。当我在 API 级别 11 或更高级别的设备（或 AVD）上运行该应用程序时，表格会按预期完美显示。

![api 11 级截图](../Images/467fbe8f565a86bfedc0460647b13b8b.png)

但是，一旦我使用 API 级别为 10 或更低的 AVD，TableView 就不再显示边距，也不能正确执行`android:layout_width="wrap_content"`-tag。

![api 8级截图](../Images/8e812708f2371a56749bd9b15b9736c8.png)

有谁知道，为什么会这样，我该如何解决？边距不是第一要务（它只是看起来很难看），但内容包装是：由于表格没有按预期包装整个内容，用户将无法获得他应该获得的所有信息！

这是我的 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".EvalActivity" >       

    <ScrollView
        android:id="@+id/scrollViewGeneral"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"        
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="10dp"        
        android:layout_marginBottom="10dp"          
        android:background="@drawable/border_surrounded" >

        <TableLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="10dp" >

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginRight="@dimen/margin_EvalTableRight"
                    android:layout_marginBottom="@dimen/margin_EvalTableBottom"
                    android:text="@string/str_EvalNumberOfProblems"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <TextView
                    android:id="@+id/lblProblemsCount"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="right"
                    android:text="@string/lbl_OutputDummyString"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

            </TableRow>

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginRight="@dimen/margin_EvalTableRight"
                    android:layout_marginBottom="@dimen/margin_EvalTableBottom"
                    android:text="@string/str_EvalCorrectSolutions"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <TextView
                    android:id="@+id/lblCorrectSolutions"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="right"
                    android:text="@string/lbl_OutputDummyString"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

            </TableRow>

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginRight="@dimen/margin_EvalTableRight"
                    android:layout_marginBottom="@dimen/margin_EvalTableBottomBreak"
                    android:text="@string/str_EvalWrongSolutions"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <TextView
                    android:id="@+id/lblWrongSolutions"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="right"
                    android:text="@string/lbl_OutputDummyString"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

            </TableRow>

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginRight="@dimen/margin_EvalTableRight"
                    android:layout_marginBottom="@dimen/margin_EvalTableBottom"
                    android:text="@string/str_EvalDuration"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <TextView
                    android:id="@+id/lblDuration"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="right"
                    android:text="@string/lbl_OutputDummyString"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

            </TableRow>

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginRight="@dimen/margin_EvalTableRight"
                    android:layout_marginBottom="@dimen/margin_EvalTableBottom"
                    android:text="@string/str_EvalAverageDuration"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <TextView
                    android:id="@+id/lblAverageDuration"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="right"
                    android:text="@string/lbl_OutputDummyString"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

            </TableRow>

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginRight="@dimen/margin_EvalTableRight"
                    android:layout_marginBottom="@dimen/margin_EvalTableBottom"
                    android:text="@string/str_EvalShortestDuration"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <TextView
                    android:id="@+id/lblShortestDuration"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="right"
                    android:text="@string/lbl_OutputDummyString"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

            </TableRow>

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginRight="@dimen/margin_EvalTableRight"
                    android:layout_marginBottom="@dimen/margin_EvalTableBottomBreak"
                    android:text="@string/str_EvalLongestDuration"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <TextView
                    android:id="@+id/lblLongestDuration"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="right"
                    android:text="@string/lbl_OutputDummyString"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

            </TableRow>

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginRight="@dimen/margin_EvalTableRight"
                    android:layout_marginBottom="@dimen/margin_EvalTableBottom"
                    android:text="@string/str_EvalAddition"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <TextView
                    android:id="@+id/lblAddition"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="right"
                    android:text="@string/lbl_OutputDummyString"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

            </TableRow>

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginRight="@dimen/margin_EvalTableRight"
                    android:layout_marginBottom="@dimen/margin_EvalTableBottom"
                    android:text="@string/str_EvalSubtraction"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <TextView
                    android:id="@+id/lblSubtraction"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="right"
                    android:text="@string/lbl_OutputDummyString"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

            </TableRow>

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginRight="@dimen/margin_EvalTableRight"
                    android:layout_marginBottom="@dimen/margin_EvalTableBottom"
                    android:text="@string/str_EvalMultiplication"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <TextView
                    android:id="@+id/lblMultiplication"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="right"
                    android:text="@string/lbl_OutputDummyString"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

            </TableRow>

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginRight="@dimen/margin_EvalTableRight"
                    android:layout_marginBottom="@dimen/margin_EvalTableBottom"
                    android:text="@string/str_EvalDivision"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <TextView
                    android:id="@+id/lblDivision"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="right"
                    android:text="@string/lbl_OutputDummyString"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

            </TableRow>

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginRight="@dimen/margin_EvalTableRight"
                    android:layout_marginBottom="@dimen/margin_EvalTableBottom"
                    android:text="@string/str_EvalPower"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <TextView
                    android:id="@+id/lblPower"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="right"
                    android:text="@string/lbl_OutputDummyString"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

            </TableRow>

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginRight="@dimen/margin_EvalTableRight"
                    android:layout_marginBottom="@dimen/margin_EvalTableBottom"
                    android:text="@string/str_EvalPercent"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <TextView
                    android:id="@+id/lblPercent"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="right"
                    android:text="@string/lbl_OutputDummyString"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

            </TableRow>
        </TableLayout>
    </ScrollView>    

    <ScrollView
        android:id="@+id/scrollViewTable"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"        
        android:layout_alignParentRight="true"
        android:layout_toRightOf="@+id/scrollViewGeneral"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="0dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="10dp"        
        android:layout_marginBottom="10dp"          
        android:background="@drawable/border_surrounded" >

        <TableLayout
            android:id="@+id/tableViewTable"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_margin="10dp" >

            <!-- 
            CONTENT GENERATED PROGRAMATICALLY! 
            -->          
        </TableLayout>

    </ScrollView>
 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T02:35:12.673

要解决此问题，您需要在表格布局上设置重力。由于您在所有方面都使用边距，因此您可能需要`android:gravity="center"`. 出于某种原因，如果您没有为`TableLayout`.

# c++ - C++ COM Object Hotpatching?

> ID：14919666
> 
> 赞同：0
> 
> 时间：2013-02-17T09:20:45.763
> 
> 标签：c++, com, closures, hook

**Background:**

I'm hooking on windows COM object.

The method used is vtable modification. say we have an instance of **interface A** named **instance**, it contains **oldmethod** in the interface, I replaced with **newmethod**. However, in my **newmethod** I need to know the address of **oldmethod** so that I can call **oldmethod** after doing my own thing.

It is not safe to store the address of **oldmethod** in a global variable, since there might be more than one implementation behind **interface A**, let's say there are two implementations, **class A1** and **class A2**. Thus my **newmethod** needs to store both **A1->oldmethod** and **A2->oldmethod**, and call appropriate function based on the instance type.

*   One way to accomplish this is that I keep a map, which stores the (address of vtable -> oldmethod). Since the address of vtable can act as a distinguisher of class A1 and class A2\. In my **newmethod**, the map is checked for the correct **oldmethod** for current instance. However, this will make the program check the map every time, which imposes a cost, and thread safety on the map will increase the cost.

*   Another way is to make a closure, I allocate a chunk of executable memory, and write the binary code of my **newmethod** inside(which can be reduced to the minimum size, so size is not a problem). I modify the address of **oldmethod** in the binary code for each instance. In this case there is no searching on the map cost.

**Question 1**:

Is the second way a safe way to do this, or is the first way better? Is there any potential safety problems in either of them?

**Question 2**:

In the second way, the closure I created contains class specific data, which is the oldmethod pointer. If I need to store instance specific data in my **newmethod** is there any strategy other than keeping a (this pointer -> data) map? I tried my best and couldn't find a way.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:04:07.140

您可能没有 A1 类的源代码，但是您是否可以控制它何时被实例化（通过“new”、CoCreateInstance 或其他一些工厂函数）？如果是这样，那么只需实现一个实现接口 A 的类，并将接口 A 上的所有调用转发到真实对象并拦截您关心的方法。

在下面的例子中，我们展示了一个替换的例子

```
class InterfaceA : public IUnknown
{
public:

    virtual int M1() = 0;
    virtual int M2(int x, int y) = 0;
    virtual int M3() = 0;
};

class CMyWrapperClass : public InterfaceA
{
public:

    int _refcount;
    InterfaceA* _pInner;

    CSomeClass2(InterfaceA* pInner)
    {
        _pInner = pInner;
        _pInner->AddRef();
        _refcount = 1;
    }

    ~CSomeClass2()
    {
        _pInner->Release();
    }

    virtual int M1() {return _pInner->M1();}
    virtual int M2(int x, int y)  {printf("CSomeClass2::M2(x=%d, y=%d)\n", x, y); return _pInner->M2(x,y);  }
    virtual int M3() {return _pInner->M3();}

    // not shown - addRef, release, queryinterface
};

   // example instantiation
   hr = CoCreateInstance(CLSID_A1, NULL, CLXCTX_ALL, IID_InterfaceA, (void**)&pInterfaceA);

   // now do the wrap
   pInterfaceA = new CMyWrapperClass(pInterfaceA); 
```

如果您无法控制您尝试热补丁的类的实例化，我确实有代码可以分享。但这显然要复杂一些。如果这不起作用，我将发布另一个与热修补 COM vtable 直接相关的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T23:02:09.730

我花了很长时间才理解这个问题。实际上，我写了一大段代码来演示如何修补 vtable，然后在包装类中调用原始方法。修补 vtable 很容易。

然后我发现了你所指的问题。那就是调用修补的 vtable 方法（newmethod）时，即使它在另一个类中定义，“this”也是原始对象，并且您没有任何关于哪个实例被调用的上下文。所以你不能轻易地引用一个成员变量来回到你保存的“旧方法”。

所以经过一番思考，我认为全球地图是最安全的方法。您可能只需要一个锁 (critical_section) 来保护在映射中插入、删除或查找函数指针。从地图中安全地检索到旧方法后，您可能不需要在调用旧方法时持有锁。因此，执行此操作的运行时开销可以忽略不计。

# python - setup.py: Copy file to root python directory

> ID：14919670
> 
> 赞同：0
> 
> 时间：2013-02-17T09:21:23.290
> 
> 标签：python, setuptools

I have a python library which depends on a DLL. For better deploying I'd like to write a `setup.py` for easily installing via `python setup.py install`. The mentioned DLL needs to be inside the python root directory, for example `C:\Python32\`. Is this possible using setuptools?

# java - How intent activity without calling the startactivity in android?

> ID：14919675
> 
> 赞同：0
> 
> 时间：2013-02-17T09:22:15.753
> 
> 标签：java, android, android-intent

im developing a quiz, wherein in java class i want to intent another class(question) after i clicked the next button without using the startactivity, or is it possible to call another activity using another method to pass another activity? please help me guys..thank you so much! i hope my question is clear..i really appreciate ur help!

***Question1.java***

```
public class Question1 extends Activity implements OnClickListener
{
int Scorecount = 0;
//private RadioGroup rgp;
private RadioButton rb1;
private RadioButton rb2;
private RadioButton rb3;
private Button b1;
//private TextView t1;
int currentQuestion = 0;
Toast t;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.startquiz);

Scorecount = getIntent().getIntExtra("score",0);
rb1=(RadioButton)findViewById(R.id.option1);
rb2=(RadioButton)findViewById(R.id.option2);
rb3=(RadioButton)findViewById(R.id.option3);
b1=(Button)findViewById(R.id.selected);
b1.setOnClickListener(this);
//rgp=(RadioGroup)findViewById(R.id.QueGroup1);

//t1=(TextView)findViewById(R.id.txtdisplayanswer);
}

@Override
public void onClick(View v) {

    if(v == b1)

    {

        if(rb1.isChecked() || rb2.isChecked() || rb3.isChecked())
        {
            if(rb1.isChecked())
            {
                Scorecount++;
                Toast.makeText(getApplicationContext(),"Your answer is correct!",
                        Toast.LENGTH_LONG).show();

                /*LinearLayout layout = (LinearLayout) t.getView();
                layout.setGravity(Gravity.CENTER);
                layout.setBackgroundResource(R.drawable.toastgreen);
            //t1.setText("Your answer is correct!"  +rb1.getText());*/

            }
        /*
        if(rb2.isChecked() == true)
            //t1.setText("Your wrong, the correct answer is: "+rb1.getText());
        if(rb3.isChecked() == true)
            //t1.setText("Your wrong, the correct answer is: "+rb1.getText());*/

    else {
        // do nothing

        Toast.makeText(getApplicationContext(),"Your answer is wrong! The correct answers is:    " + rb1.getText(),
                Toast.LENGTH_LONG).show();

        /*LinearLayout layout = (LinearLayout) t.getView();
        layout.setGravity(Gravity.CENTER);
        layout.setBackgroundResource(R.drawable.toastred);*/

    }
            //Intent i = new Intent(this,Question2.class);
            Intent i= getIntent();
            i.putExtra("score", Scorecount);
            startActivity(i);
            finish();

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:46:49.883

尝试使用片段而不是活动，并且您不必为每个新片段使用启动活动。要更改屏幕，您只需执行删除旧片段并添加新片段的事务。而且这种机制也更节省内存而不是使用多个活动来显示每个不同的问题。

# c# - webclient 远程服务器返回错误：(500) Internal Server Error

> ID：14919683
> 
> 赞同：8
> 
> 时间：2013-02-17T09:23:10.347
> 
> 标签：c#, httpwebrequest, webclient

我正在尝试使用 webclient 下载网页并收到 500 内部错误

```
public class AsyncWebClient
    {
        public string GetContent(string url)
        {
            return GetWebContent(url).Result.ToString();
        }
        private Task<string> GetWebContent(string url)
        {
            var wc = new WebClient();
            TaskCompletionSource<string> tcs = new TaskCompletionSource<string>();

            wc.DownloadStringCompleted += (obj, args) =>
            {
                if (args.Cancelled == true)
                {
                    tcs.TrySetCanceled();
                    return;
                }

                if (!String.IsNullOrEmpty(args.Result))
                    tcs.TrySetResult(args.Result);
            };

            wc.DownloadStringAsync(new Uri(url));
            return tcs.Task;
        }
    } 
```

并致电：

```
var wc =new AsyncWebClient();
var html = wc.GetContent("http://truyen.vnsharing.net/");    >> always get the above error 
```

如果我使用其他网站，那么它工作得很好。不知道这个网站有什么特别之处。

请帮忙 ！！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-17T09:34:51.477

服务器很可能期待一个正确的用户代理。

将您的代码更新为以下内容：

```
var wc = new WebClient();
wc.Headers.Add ("user-agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)");
TaskCompletionSource<string> tcs = new TaskCompletionSource<string>(); 
```

# java - 如何在 Java 中泛化 Hashmap 类型？

> ID：14919685
> 
> 赞同：0
> 
> 时间：2013-02-17T09:23:14.390
> 
> 标签：java

我想概括一下我从应用程序的函数中返回的结果。目前，我返回一个 Hashmap 作为结果并将其解析到 UI 中，并显示给用户。

我想扩展我的应用程序返回的值。快速示例：

```
 public class Model implements Runnable {
        private HashMap<String, Integer> result;
        public HashMap<String, Integer> returntheanswertoeverything() {
            HashMap<String, Integer> result = new HashMap<String, Integer>(result.putall(answer(universe));
// returns (universe,42)

            return result;
            }
    } 
```

结果返回哈希图以及我的结果。在单独的功能或 GUI 中，我可以将其输出给用户。但是，如果我不仅想返回一个整数，还想返回其他东西，我将如何做到最好？

如果我想为宇宙返回第三个（第四个......）答案？我将如何保持这种可扩展性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T10:11:31.247

`Integer`如果您想返回除`Map`.

```
public YourAdditionalInfoClass {

    // Up to you if you want getter/setters or just public visibility
    public Integer yourIntegerValue;

    // Replace Object by the additional class you want
    public Object yourAdditionalInfo;
}

public HashMap<String, YourAdditionalInfoClass > returntheanswertoeverything() 
```

# php - 插入时，如何将重复名称更改为数据库中的其他名称？

> ID：14919687
> 
> 赞同：2
> 
> 时间：2013-02-17T09:23:21.460
> 
> 标签：php, mysql, duplicates

我在处理多个文档时遇到了挑战，特别是处理数据库中的重复文件名。我正在尝试创建一个管理员可以在其中添加 HTML 文档的系统。他将输入两个字段：文档名称及其源代码。

添加文档时，名称（例如“A Page”）和文件名（基于名称，例如“a_page.html”）将插入数据库，并在服务器上创建包含源代码的文件。

现在的问题是如果我尝试添加另一个具有相同名称的文档（例如“A Page”）会发生什么。我希望文件名是“a_page_2.html”，以免覆盖现有文件。如果另一个同名，“a_page_3.html”等等。

有没有简单的SQL语句来实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:38:39.813

不，没有简单的说法。可能已经有 a_page_2.html 了。

因此，只需让您的文档名称已经是唯一的：

*   在数据库中插入新记录
*   获取唯一标识
*   通过将给定的名称和 id 放在一起，使用此 id 创建文件

选择文档名称时，您可以这样做

```
SELECT concat(name,'_',id) as name ... 
```

它类似于 Stackoverflow 创建问题 url 的方式：

```
/questions/14919687/on-insert-how-can-i-change-the-duplicate-name-to-something-else-in-the-database/
            ^ id    ^ conventional name that can have 1000s duplicates 
```

您也可以完全摆脱传统名称，只留下 id：
`http://stackoverflow.com/questions/14919687/`仍然有效

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-17T10:40:30.297

*   制作文件名列`UNIQUE`
*   尝试插入，如果出现重复键错误，请重复添加数字直到成功

使用 PDO，它可能看起来像这样：

```
class QueryException extends RuntimeException { }
class DuplicateKeyException extends QueryException { }

function executeInsert(PDOStatement $stmt) {
    try {
        $stmt->execute();
    } catch (PDOException $e) {
        switch ($e->errorInfo[1]) {
            case 1062:
                throw new DuplicateKeyException($e->getMessage(), null, $e);
            default:
                throw new QueryException($e->getMessage(), null, $e);
        }
    }
}

$filename = 'a_page';
$contents = '<title>test</title>';

$stmt = $pdo->prepare('INSERT INTO documents (filename,contents) VALUES (:filename,:contents)');
$repeat = true; $counter = 0;
while ($repeat)
    try {
        $stmt->bindValue(
            ':filename',
            $filename . ($counter > 0 ? ("-$counter" : '') . '.html'
        );
        $stmt->bindValue(':contents', $contents);
        executeInsert($stmt);
        $repeat = false;
    } catch (DuplicateKeyException $e) {
        $repeat = true;
        $counter++;
    } catch (QueryException $e) {
        $repeat = false;
        // error handling here
    }
} 
```

# objective-c - Accessory arrow in table not showed in master detail project with search bar

> ID：14919688
> 
> 赞同：0
> 
> 时间：2013-02-17T09:23:38.267
> 
> 标签：objective-c, uitableview

Using XCode 4.5.2 I have created a Master/Detail iOS 6.0 project from template. The generated project already contains disclosure indicator ">" in table cell and detail view opens when table row is tapped. Then:

1.  I added the Search Bar and Search Display Controller above the master table
2.  According to the [following problem](https://stackoverflow.com/questions/12737860/assertion-failure-in-dequeuereusablecellwithidentifierforindexpath) I added UITableViewCell class registration in MasterViewController's method `- (void)viewDidLoad`

`[self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"Cell"];`

After this registerClass line is added I run the program in simulator. The disclosure indicator is not shown in table cells and the detail view does not open when the table row is tapped.

I followed the advice [here](http://code.thewebanalyzers.com/2011/11/how-to-add-arrow-disclosure-indicator-button-checkmark-in-table-view/) that adds disclosure indicator back but the detail view still does not open when table row is tapped.

What else is needed?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T13:48:17.703

您可以尝试使用`dequeueReusableCellWithIdentifier:`而不是`dequeueReusableCellWithIdentifier:forIndexPath:`.
另外，检查是否`tableView:didSelectRowAtIndexPath:`被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T21:13:16.123

我找到了甚至可以摆脱的解决方案：

```
 [self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"Cell"]; 
```

在

```
- (void)viewDidLoad 
```

解决方案是：

```
UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath]; 
```

在方法中

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

差异是：**自我。**需要将其添加到 Xcode 生成的模板（用于 Master/Detail）。

# javascript - 在javascript中设置一个等于一个变量的HTML字符串

> ID：14919699
> 
> 赞同：1
> 
> 时间：2013-02-17T09:26:55.950
> 
> 标签：javascript, jquery, html

我声明了一个 HTML 字符串并将其设置为一个变量。我想不出它会产生错误的任何原因，但它是：

未捕获的 SyntaxError：Ln 136 上的意外标识符。

```
Ln 136: new_comment = '
    <li class="photobooth-comment">
       <span class="username">
          <a href="#">You</a>
       </span>
       <span class="comment-text">
          ' + text + '
       </span>
       <span class="comment-time">
          2d
       </span>
    </li>
'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T09:31:35.490

您可以做的最接近您想要的事情是转义换行符。

```
new_comment = '\
    <li class="photobooth-comment">\
       <span class="username">\
          <a href="#">You</a>\
       </span>\
       <span class="comment-text">\
          ' + text + '\
       </span>\
       <span class="comment-time">\
          2d\
       </span>\
    </li>\
'; 
```

除此之外，您还可以使用字符串连接。

（我发现了一个可能的重复项：[如何创建多行字符串](https://stackoverflow.com/q/805107/417685)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T09:33:55.353

如果您想在实际代码中包含换行符以使其更易于阅读，则需要使用反斜杠对每个换行符进行转义，例如：

```
var new_comment = '\
    <li class="photobooth-comment">\
       <span class="username">\
          <a href="#">You</a>\
       </span>\
       <span class="comment-text">\
          ' + text + '\
       </span>\
       <span class="comment-time">\
          2d\
       </span>\
    </li>\
'; 
```

或者您需要将它们连接为单独的字符串，如下所示：

```
var new_comment = ''+
    '<li class="photobooth-comment">' +
       '<span class="username">' +
          '<a href="#">You</a>' +
       '</span>' +
       '<span class="comment-text">' +
          text +
       '</span>' +
       '<span class="comment-time">' +
          '2d' +
       '</span>' +
    '</li>'+
''; 
```

或者简单地把它放在一行上：

```
var new_comment = '<li class="photobooth-comment"><span class="username"><a href="#">You</a></span><span class="comment-text">' + text + '</span><span class="comment-time">2d</span></li>'; 
```

不是那么容易阅读，但对你的 JavaScript 来说更整洁！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T09:37:38.010

您正在使用[jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")，因此，使用 jquery 您可以将 .html() 方法放入`<li>`您的 HTML 页面并使用[.html()](http://api.jquery.com/html/)方法获取匹配元素集中第一个元素的 HTML 内容，或者设置每个匹配元素的 HTML 内容，如下所示

```
 var new_comment = $(".photobooth-comment").html();
   //do what you want to 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T09:43:28.537

这是一个顽皮的 PHP 启发方法。我把它贴在这里作为一种心理锻炼。请不要投反对票...

[演示](http://jsfiddle.net/mplungjan/pMSc8/)

```
var new_comment; /*<<<EOF 
    <li class="photobooth-comment">
       <span class="username">
          <a href="#">You</a>
       </span>
       <span class="comment-text">
          $text
       </span>
       <span class="comment-time">
          2d
       </span>
    </li>
EOF*/
// note the script tag here is the hardcoded as the first tag 
new_comment=document.getElementsByTagName('script')[0].innerHTML.split("EOF")[1]; 
alert(new_comment.replace('$text','Here goes some text')); 
```

# c# - How to put a unicode character in XML?

> ID：14919710
> 
> 赞同：0
> 
> 时间：2013-02-17T09:28:48.107
> 
> 标签：c#, xml

I'm trying to do this:

```
 ArticleTitle = ArticleTitle.Replace(" - ", "&#8212;"); 
```

To get a — to appear in front of the text. It doesn't work. And it appeared &#8212; What should I be doing here?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T09:30:00.110

使用嵌入在字符串文字中的实际 Unicode 字符（根据正常的 C# 源代码规则） - 并让 XML API 处理它需要执行的任何转义或编码：

```
ArticleTitle = ArticleTitle.Replace(" - ", "\u8212"); 
```

# wordpress - 限制 wordpress 的每个类别和子项的帖子数量

> ID：14919720
> 
> 赞同：0
> 
> 时间：2013-02-17T09:29:53.383
> 
> 标签：wordpress, templates, categories

我有一个我无法解决的问题。正如标题所说，我想在每个类别中定义不同数量的帖子。我尝试查询帖子但不工作，他们留下所有类别的帖子，我也尝试使用 pre_get_posts 并且这有效。但它只适用于父类，找不到一个功能也适用于子类。

这就是我要的：

```
Category Parent 1 > Posts per page 5
 subcategory > post per page 5

Category Parent 2 > Posts per page 10
 subcategory > post per page 10

Category Parent 3 > Posts per page 20
 subcategory > post per page 20 
```

我尝试使用 pre_get_posts 但 is_category 仅适用于父类别而子类别不适用。

```
 function wpse47875_change_posts_per_page( $query ) {

    if ( is_category( 'portadas-facebook' ) ){
        //Display 4 posts for category 1
        $query->set( 'posts_per_page', 1);
    }

}
add_action('pre_get_posts', 'wpse47875_change_posts_per_page', 1); 
```

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:42:01.107

我认为[cat_is_ancestor_of()](https://codex.wordpress.org/Function_Reference/cat_is_ancestor_of)函数应该做你想做的事。

```
$portadasCat = get_category_by_slug( 'portadas-facebook' );

$currentCatId = get_query_var( 'cat' );

if ( is_category( $portadasCat ) || cat_is_ancestor_of( $portadasCat, $currentCatId ) ){
        //Display 4 posts for category 1
        $query->set( 'posts_per_page', 1);
} 
```

# hibernate - @ManyToOne 单向映射

> ID：14919726
> 
> 赞同：8
> 
> 时间：2013-02-17T09:30:58.587
> 
> 标签：hibernate, jpa, spring-data

我有一个实体类**Payment** ，它具有具有**多对一**关系的实体类**PaymentMethod**。

 **现在因为 My PaymentMethod 是主表。

所以我想在不影响主表 PaymentMethod 的情况下保存付款。

但是每次我保存付款时，它都会在 PaymentMethod 中插入新行。我无法弄清楚为什么。

我正在使用 SpringData 保存。

**支付.java**

```
@Entity
@Table(name="payment")
public class Payment implements Serializable {
   @Id
   @GeneratedValue(strategy = GenerationType.AUTO)
   private Long id;

   @ManyToOne(cascade={CascadeType.REFRESH,CascadeType.MERGE,CascadeType.PERSIST})
   @JoinColumn(name="payment_method_id")
   private PaymentMethod paymentMethod;

  //getter and setters
} 
```

**PaymentMethod.java**

```
@Table(name="paymentmethod")
 public class PaymentMethod implements Serializable {
 @Id
 @GeneratedValue(strategy = GenerationType.AUTO)
 private Long id;

 @Column(name="name",unique=true ,nullable=false)
 private String name;

 //GETTER AND SETTERS
} 
```

**PAYMENT_METHOD 数据**

```
ID | NAME 
1  | AA
2  | BB
3  | CC 
```

付款后保存 PAYMENT_METHOD 条目与重复名称？

我无法弄清楚为什么？

为了节省，我为付款类型创建了简单的 CRUDRepository

调用存储库的保存实体。

请建议我在哪里摔倒。

每当代码执行此行时：

```
paymentMethodRepository.findByName(payment.getPaymentMethod().getName()); 
```

它给出了错误

```
Caused by: org.hibernate.TransientPropertyValueException: object references an unsaved transient instance - save the transient instance before flushing: com.enrollment.domain.Payment.paymentMethod -> com.enrollment.domain.PaymentMethod
    at org.hibernate.engine.spi.CascadingAction$8.noCascade(CascadingAction.java:380)
    at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:176)
    at org.hibernate.event.internal.AbstractSaveEventListener.cascadeBeforeSave(AbstractSaveEventListener.java:423)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:264)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136)
    at org.hibernate.ejb.event.EJB3PersistEventListener.saveWithGeneratedId(EJB3PersistEventListener.java:78)
    at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:208)
    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:151)
    at org.hibernate.internal.SessionImpl.firePersistOnFlush(SessionImpl.java:870)
    at org.hibernate.internal.SessionImpl.persistOnFlush(SessionImpl.java:863)
    at org.hibernate.engine.spi.CascadingAction$8.cascade(CascadingAction.java:346)
    at org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:380)
    at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:323)
    at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:208)
    at org.hibernate.engine.internal.Cascade.cascadeCollectionElements(Cascade.java:409)
    at org.hibernate.engine.internal.Cascade.cascadeCollection(Cascade.java:350)
    at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:326)
    at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:208)
    at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:165)
    at org.hibernate.event.internal.AbstractSaveEventListener.cascadeAfterSave(AbstractSaveEventListener.java:448)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:293)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136)
    at org.hibernate.ejb.event.EJB3PersistEventListener.saveWithGeneratedId(EJB3PersistEventListener.java:78)
    at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:208)
    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:151)
    at org.hibernate.internal.SessionImpl.firePersistOnFlush(SessionImpl.java:870)
    at org.hibernate.internal.SessionImpl.persistOnFlush(SessionImpl.java:863)
    at org.hibernate.engine.spi.CascadingAction$8.cascade(CascadingAction.java:346)
    at org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:380)
    at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:323)
    at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:208)
    at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:165)
    at org.hibernate.event.internal.AbstractSaveEventListener.cascadeAfterSave(AbstractSaveEventListener.java:448)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:293)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136)
    at org.hibernate.ejb.event.EJB3PersistEventListener.saveWithGeneratedId(EJB3PersistEventListener.java:78)
    at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:208)
    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:151)
    at org.hibernate.internal.SessionImpl.firePersistOnFlush(SessionImpl.java:870)
    at org.hibernate.internal.SessionImpl.persistOnFlush(SessionImpl.java:863)
    at org.hibernate.engine.spi.CascadingAction$8.cascade(CascadingAction.java:346)
    at org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:380)
    at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:323)
    at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:208)
    at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:165)
    at org.hibernate.event.internal.AbstractSaveEventListener.cascadeBeforeSave(AbstractSaveEventListener.java:423)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:264)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136)
    at org.hibernate.ejb.event.EJB3PersistEventListener.saveWithGeneratedId(EJB3PersistEventListener.java:78)
    at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:208)
    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:151)
    at org.hibernate.internal.SessionImpl.firePersistOnFlush(SessionImpl.java:870)
    at org.hibernate.internal.SessionImpl.persistOnFlush(SessionImpl.java:863)
    at org.hibernate.engine.spi.CascadingAction$8.cascade(CascadingAction.java:346)
    at org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:380)
    at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:323)
    at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:208)
    at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:165)
    at org.hibernate.event.internal.AbstractSaveEventListener.cascadeBeforeSave(AbstractSaveEventListener.java:423)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:264)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136)
    at org.hibernate.ejb.event.EJB3PersistEventListener.saveWithGeneratedId(EJB3PersistEventListener.java:78)
    at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:208)
    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:151)
    at org.hibernate.internal.SessionImpl.firePersistOnFlush(SessionImpl.java:870)
    at org.hibernate.internal.SessionImpl.persistOnFlush(SessionImpl.java:863)
    at org.hibernate.engine.spi.CascadingAction$8.cascade(CascadingAction.java:346)
    at org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:380)
    at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:323)
    at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:208)
    at org.hibernate.engine.internal.Cascade.cascadeCollectionElements(Cascade.java:409)
    at org.hibernate.engine.internal.Cascade.cascadeCollection(Cascade.java:350)
    at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:326)
    at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:208)
    at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:165)
    at org.hibernate.event.internal.AbstractFlushingEventListener.cascadeOnFlush(AbstractFlushingEventListener.java:160)
    at org.hibernate.event.internal.AbstractFlushingEventListener.prepareEntityFlushes(AbstractFlushingEventListener.java:151)
    at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:88)
    at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:58)
    at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1186)
    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1241)
    at org.hibernate.internal.QueryImpl.list(QueryImpl.java:101)
    at org.hibernate.ejb.QueryImpl.getSingleResult(QueryImpl.java:285) 
```

当我从存储库调用 finder 方法时，如果尝试刷新代码，我无法弄清楚代码如何。

我错过了什么吗？

感谢@JB 和@spiritwalker 解决了问题，但无法找到确切的根本原因，所以只讨论行为可能是讨论会增加太多知识。

```
Behaviour ..

Open Transaction
   1\. validate
   2\. save child
   3\. validate and update 
   4\. save parent
Close Transaction

it was giving above error.

Now, after code change it worked

Open Transaction
   1\. validate
   2\. validate and update 
   3\. save child
   4\. save parent
Close Transaction 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T09:35:22.587

首先删除级联，因为您在创建/修改付款时不希望创建/修改 PaymentMethod。

然后，当您创建 Payment 时，为其分配您希望与其关联的现有 PaymentMethod：

```
PaymentMethod existingPaymentMethod = em.find(PaymentMethod.class, idOfThePaymentMethod);
Payment payment = new Payment();
payment.setPaymentMethod(existingPaymentMethod);
em.persist(payment); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T09:32:59.897

从您的支付实体中删除**cascade={CascadeType.REFRESH,CascadeType.MERGE,CascadeType.PERSIST} 。**

由于 PaymentMethod 是您所说的主表，因此您不希望从 Payment 到 PaymentMethod 发生任何级联操作。**

# facebook - 如何通过 facebook graph api 获取群组的所有帖子

> ID：14919731
> 
> 赞同：20
> 
> 时间：2013-02-17T09:31:38.237
> 
> 标签：facebook, facebook-graph-api

我想参考其 ID 从 facebook 组中获取所有帖子。我试过这个：

```
https://graph.facebook.com/".$group_id."/feed?time_format=U&".$authToken 
```

这只给了我某些帖子。如果可能，如果不是通过分页 url，我希望通过单个 url 检索所有帖子。但是分页网址包含分页标记为

```
https://graph.facebook.com/55259308085/feed?limit=500&access_token=ACCESS_TOKEN&until=1298025645&__paging_token=55259308085_10150259582898086 
```

什么是分页令牌和直到？

请指引我走向正确的道路。谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-21T04:02:52.630

```
set_time_limit(99999999);
ini_set('memory_limit', "9999M");

function fetchUrl($url) {
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_TIMEOUT, 40);

    $data = curl_exec($ch);
    curl_close($ch);

    return $data;
}

$url_array = array();

function recurse_it($url, $c) {
    global $url_array;
    $feeds         = fetchUrl($url);
    $feed_data_obj = json_decode($feeds, true);
    if (!empty($feed_data_obj['data'])) {
        $next_url      = $feed_data_obj['paging']['next'];
        $url_array[$c] = $next_url;
        recurse_it($next_url, $c + 1);
    }
    return $url_array;
}

$url = "https://graph.facebook.com/55259308085/groups?access_token=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";
$arr = recurse_it($url, 0);
print_r($arr); 
```

where`$arr`是所有可用分页链接的数组，我使用 foreach 循环遍历分页的所有内容。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-20T16:30:17.450

在 PHP 中试试这个：

```
$response = file_get_contents("https://graph.facebook.com/$group_id/feed?limit=1000&access_token=$access_token"); 
```

它会给你一个限制为 1000 个帖子的页面。将 JSON 响应转换为 PHP 关联数组：

```
$array = json_decode($response, true);
// Do your own stuff with $array ... 
```

通过以下方式获取下一页：

```
$response = file_get_contents($array['paging']['next']); 
```

循环尝试，直到`$array['data']`在响应中显示为空。

* * *

直到 - 这是一个 UNIX 时间整数，用于指定要获取帖子的时间点（只有在此之后发布的帖子才会出现）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-31T11:26:20.363

```
$url_array=array();
$url="https://graph.facebook.com/v2.2/".$fbpageid."/feed?access_token=".$access_token."&limit=250&fields=full_picture,picture,id,message,name,caption,description,updated_time,link,icon,from,privacy,type,status_type,application,object_id,story,story_tags,actions";

function recurse_it($url,$c)
{
    $feeds=file_get_contents($url);
    $feed_data_obj=json_decode($feeds,true);
    while(!empty($feed_data_obj['data']))
    {   
        $next_url      = $feed_data_obj['paging']['next'];
        $url_array[$c] = $next_url;
        $feeds=file_get_contents($next_url);
        $feed_data_obj=json_decode($feeds,true);
        $c=$c+1;
    }
    return $url_array;
}
$final_result=recurse_it($url,0); 
```

# android - 对 google play 上的取消做出反应

> ID：14919735
> 
> 赞同：0
> 
> 时间：2013-02-17T09:32:47.453
> 
> 标签：android, google-play

是否可以对用户在 google play 上购买后执行的取消做出反应？有什么可以听的活动吗？背景：使用我的应用程序时，用户在服务器上创建了一个帐户。取消后，该帐户已过时，我想将其删除（例如使用 HTTP 请求）

那可能吗？谷歌发送的邮件不包含任何识别买家的信息（我猜是有充分理由的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T02:06:52.993

如果您有权访问 Google Checkout Merchant API（仅限美国/英国），则可以查询订单状态并在您的服务器上采取适当的措施。虽然没有通用的、Android 特定的 API。

# android - 如何在没有 setOnItemClickListener Android 的情况下获取我的自定义列表视图的第一项价值？

> ID：14919739
> 
> 赞同：0
> 
> 时间：2013-02-17T09:33:15.297
> 
> 标签：android

如何在没有 setOnItemClickListener Android 的情况下获取我的自定义列表视图的第一项价值？

这是我的代码

```
// list is my listview adapter

            list.setOnRefreshListener(new OnRefreshListener() {

            public void onRefresh() {

                View view = (View) list.getItemAtPosition(0);
                    String Title= ((TextView) view.findViewById(R.id.Title))
                            .getText().toString();

                Toast toast = Toast.makeText(CustomizedListView.this, 
                            judul, Toast.LENGTH_LONG);
                toast.show();

                String url = "http://blablabla.com/android/inbox.json/index.php?act=new_update&id_title="+Title;
                 grabURL(url); 

            }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:36:18.113

如果我正确理解了您的问题，这应该有效，`String fistItem = list.get(0).toString();`

# android - 如何将 json 数据填充到 Spinner？

> ID：14919740
> 
> 赞同：0
> 
> 时间：2013-02-17T09:33:17.707
> 
> 标签：android

我有一组 json 数据。如何将数据填充到 Spinner 并显示 hyname 字符并获取 id 的值？

这是我的java代码：

```
[{"id":"32","hyname":"Construction & Remodel"},{"id":"15","hyname":"machine manufacturing"},{"id":"16","hyname":"E-communication"},{"id":"21","hyname":"Measurement monitoring"},{"id":"28","hyname":"Laboratory testing"},{"id":"19","hyname":"geological exploration "},{"id":"23","hyname":"Agriculture & Farming "},{"id":"30","hyname":"Mechanical cold"},{"id":"31","hyname":"Mechanical hot work"},{"id":"22","hyname":"Material storage"},{"id":"24","hyname":"Food Service"}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:54:19.307

使用 Collection 设置 ID 和 HeName。

```
class YourCollection{
  private String id;
  private String hename;

  void setHename(String hename){
  this.hename = hename;
  }

  String getHename(){
   return hename;
   }

  void setId(String id){
  this.id= id;
  }
   String getId(){
   return id;
   }

} 
```

// 异步任务

```
@Override
    protected List<YourCollection> doInBackground(Void... params) {

        JSONObject obj = null;
        List<YourCollection> result = new ArrayList<YourCollection>();

        try{

            InputStream ips = activity.getAssets().open("your.json");
            BufferedReader buffer = new BufferedReader(new InputStreamReader(ips));

            StringBuilder string = new StringBuilder();
            String line = "";

            while((line = buffer.readLine()) != null){
                string.append(line);
            }

            obj = new JSONObject(string.toString());

        }
        catch(Exception e){

        }

            if(obj != null){
                JSONArray array = obj.optJSONArray("data");       
                for (int i=0; i<array.length(); i++){
                    JSONObject rss = array.optJSONObject(i);
                    YourCollection m = new YourCollection ();
                    m.setHename(rss.optString("hename")); m.setId(rss.optString("id")); 
                    result.add(m);
                }
            }

        return result;
    } 
```

并在您的适配器创建函数以返回您的列表，并使用

```
 OnItemSelectedListener mwe = new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub
List<YourCollection> list = YourAdapter.getList(); // your function to get List
YourCollection c = list.get(arg2);
String id = c.getId();

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T10:02:19.520

试试这个

```
String jsontext=[{"id":"32","hyname":"Construction & Remodel"},...];

ArrayList<String> list=new ArrayList<String>();

Hashtable<String,String> hnameids=new Hashtable<String,String>();

JsonArray array=new JsonArray(jsontext);

for(int i=0;i<array.length;i++)
{

JsonObject obj=array.getJsonObject(i);

list.add(obj.getString("hyname"));

hnameids.put(obj.getString("hyname"),obj.getString("id"));

}
ArrayAdapter adapter=new ArrayAdapter(context,android.R.layout.simple_list_item1,list);
spinner.setAdapter(adapter); 
```

* * *

```
spinner.OnItemSelectedListener (new OnItemClickListener() {

    public void onItemClick(AdapterView<?> adapter, View view, int pos,
            long id) {

        String data= spinner.getSelectedItem();
              String id=hnameids.get(data);
    }

}); 
```

# excel - Excel 2007 - 将 VBA 工作簿语法应用于工作表中使用的代码 - 获得不同的结果

> ID：14919744
> 
> 赞同：0
> 
> 时间：2013-02-17T09:33:22.653
> 
> 标签：excel, excel-2007, vba

我是 VBA 新手，所以请多多包涵。

我已经在网站上搜索了答案，但没有找到。

我有这个 VBA 代码，当在 Excel 2007 中作为工作表 VBA 输入时，我有这个 VBA 代码，即当突出显示 A 列中的单元格时，缩放增加到 120，当突出显示 A 列以外的单元格时，缩放恢复到 75。

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    If Target.Cells.Count > 1 Then Exit Sub
    If Target.Column = 1 Then
        ActiveWindow.Zoom = 120
    Else
        ActiveWindow.Zoom = 75
    End If

End Sub 
```

我想将此代码应用于整个工作簿，因此我将其放在“ThisWorkbook”区域并更改语法如下：

```
Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)
    If Target.Cells.Count > 1 Then Exit Sub
    If Target.Column = 1 Then
        ActiveWindow.Zoom = 120
    Else
        ActiveWindow.Zoom = 75
    End If
End Sub 
```

但是，我没有得到相同的结果。

在第二种情况下，A 列中的单元格在突出显示时不会“自动”缩放到 120。它们仅在我在 A 列中选择或输入值时进行缩放。之后缩放保持在 120 并且不会恢复到 75。

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T09:41:56.207

你使用了错误的事件`Workbook`

利用`Workbook_SheetSelectionChange`

# java - 正则表达式：连续重复，中间有一个字母

> ID：14919745
> 
> 赞同：2
> 
> 时间：2013-02-17T09:33:25.050
> 
> 标签：java, regex

我正在尝试解决正则表达式的问题。我使用的 Java 正则表达式显然与 Perl 中的类似。

我想搜索一个字符串，它有一个从 1 到 9 的数字，连续重复 3 次或更多次，或者在重复之间使用单个字母“w”。

例如。12333、123w3、12ww3、ww123 应该都给出成功的匹配，但不是 12345、1234w、1323w。

我尝试了模式“[[0-9]w]{3,}”，但我现在明白为什么这绝对是不正确的。有人可以给我一些线索来构建符合我要求的搜索模式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T09:40:01.873

如果我正确理解这`w`是一个通配符（因为我不确定您所写的内容 - 更多的是您提供的示例），那么这个正则表达式应该可以工作......

```
([1-9])(\1|w){2,}|w([1-9])(\3|w)+|ww([1-9])\5* 
```

这可能不是最优雅的解决方案，但应该可以工作，并分成这样的部分......

```
 # matches that don't start with wildcards
([1-9])    # get a digit, and capture for future reference
(\1|w){2,} # the captured digit, or the letter w, 2 or more times
|          # or, matches that start with a single w
w          # match a w
([1-9])    # get a digit, and capture for future reference
(\3|w)+    # get one or more of the captured digit, or letter w
|          # or, matches starting with two w
ww         # get two w
([1-9])    # get a digit, and capture for future reference
\5*        # get all the successive captured digits 
```

这也应该工作......

```
([1-9])(\1|w){2,}|w([0-9](\3|w)|w[0-9]) 
```

# c# - 将具有大量“锁”的代码重构为更多无锁代码

> ID：14919751
> 
> 赞同：3
> 
> 时间：2013-02-17T09:34:13.387
> 
> 标签：c#, locking, task-parallel-library, lock-free, low-latency

**Upd**感谢 Matthew Watson 注意到并注意到我计划将我的代码移植到 c++-linux，所以我更喜欢“平台无关”的代码

我的交易应用程序几乎是无锁的。下面的代码是我**唯一**使用锁的地方。让我从代码开始，它很长，但不要担心有很多重复的部分，所以它很简单。我更喜欢添加所有“重复”部分，以更好地展示我的工作方式：

```
Task.Factory.StartNew(() =>
{
    while (true)
    {
        Iterate();
    }
}, TaskCreationOptions.LongRunning);

private void Iterate()
{
    bool marketDataUpdated = false;

    lock (ordersToRegisterLock)
    {
        if (ordersToRegister.Count > 0)
        {
            marketDataUpdated = true;
            while (ordersToRegister.Count > 0)
            {
                Order order = ordersToRegister.Dequeue();
                // Stage1, Process
            }
        }
    }

    lock (aggrUpdatesLock)
    {
        if (aggrUpdates.Count > 0)
        {
            marketDataUpdated = true;
            while (!aggrUpdates.IsNullOrEmpty())
            {
                var entry = aggrUpdates.Dequeue();
                // Stage1, Process
            }
        }
    }

    lock (commonUpdatesLock)
    {
        if (commonUpdates.Count > 0)
        {
            marketDataUpdated = true;
            while (!commonUpdates.IsNullOrEmpty())
            {
                var entry = commonUpdates.Dequeue();
                // Stage1, Process
            }
        }
    }

    lock (infoUpdatesLock)
    {
        if (infoUpdates.Count > 0)
        {
            marketDataUpdated = true;
            while (!infoUpdates.IsNullOrEmpty())
            {
                var entry = infoUpdates.Dequeue();
                // Stage1, Process
            }
        }
    }

    lock (tradeUpdatesLock)
    {
        if (tradeUpdates.Count > 0)
        {
            marketDataUpdated = true;
            while (!tradeUpdates.IsNullOrEmpty())
            {
                var entry = tradeUpdates.Dequeue();
                // Stage1, Process
            }    

        }
    }

    if (marketDataUpdated)
    {
        // Stage2 !
        // make a lot of work. expensive operation. recalculate strategies, place orders etc.
    }
}

private readonly Queue<Order> ordersToRegister = new Queue<Order>();
private readonly object ordersToRegisterLock = new object();

private readonly Queue<AggrEntry> aggrUpdates = new Queue<AggrEntry>();
private readonly object aggrUpdatesLock = new object();

private readonly Queue<CommonEntry> commonUpdates = new Queue<CommonEntry>();
private readonly object commonUpdatesLock = new object();

private readonly Queue<InfoEntry> infoUpdates = new Queue<InfoEntry>();
private readonly object infoUpdatesLock = new object();

private readonly Queue<TradeEntry> tradeUpdates = new Queue<TradeEntry>();
private readonly object tradeUpdatesLock = new object();

    public void RegistorOrder(object sender, Gate.RegisterOrderArgs e)
    {
        lock (ordersToRegisterLock)
        {
            ordersToRegister.Enqueue(e.order);
        }
    }

    public void TradeUpdated(object sender, Gate.TradeArgs e)
    {
        lock (tradeUpdatesLock)
        {
            foreach (var entry in e.entries)
            {
                tradeUpdates.Enqueue(entry);
            }
        }
    }

    public void InfoUpdated(object sender, Gate.InfoArgs e)
    {
        lock (infoUpdatesLock)
        {
            foreach (var entry in e.entries)
            {
                infoUpdates.Enqueue(entry);
            }
        }
    }

    public void CommonUpdated(object sender, Gate.CommonArgs e)
    {
        lock (commonUpdatesLock)
        {
            foreach (var entry in e.entries)
            {
                commonUpdates.Enqueue(entry);
            }
        }
    }

    public void AggrUpdated(object sender, Gate.AggrArgs e)
    {
        lock (aggrUpdatesLock)
        {
            foreach (var entry in e.entries)
            {
                aggrUpdates.Enqueue(entry);
            }
        }
    } 
```

在我的代码中，我有两个阶段。`Stage1`是更新阶段，`Stage2`是工作阶段。我需要尽快在这两个阶段之间切换，如下所示：

*   任何更新？不
*   任何更新？不
*   有更新吗？是的，订单已更新！应用更新，做`Stage2`
*   任何更新？不
*   任何更新？是的，订单需要注册！应用更新，做`Stage2`
*   任何更新？是的，交易发生了，应用更新，做`Stage2`

我`Stage2`不应该更新，但应该继续“收集”更新，以便以后应用它们。

重要的是 - 这是对延迟非常关键的代码，所以我同意“花费”一个核心来获得**最小的**延迟！因此，当发生**任何**更新时，我需要**尽快**处理并执行`Stage2`。

所以我希望现在很清楚我需要实现什么，并且很清楚我是如何实现的。现在是时候讨论我的代码有多好了。我确实看到了几个潜在的问题：

*   很多锁！可以用一些“无锁”代码代替吗？自旋锁与 CAS 什么的？
*   占用100%的CPU核心，可以**在不影响延迟**的情况下节省一些CPU资源吗？
*   我可以/应该告诉 .NET 使用“专用”核心（设置任务关联？）以避免额外的“切换”吗？
*   我从一个线程*添加*到队列，然后从另一个线程*读取*队列。会不会是个问题？如果添加和读取队列是易变的？我的*阅读*线程是否有可能因为缓存更新问题而看不到队列中的更新？

欢迎任何关于如何改进我所写内容的建议，谢谢！

**upd**部分解决了 - 据我了解，我最好将查询替换为无锁（可能基于环形缓冲区？）查询。我想我稍后会使用 c++ 版本的中断器。我也使用了这篇文章[http://www.umbraworks.net/bl0g/rebuildall/2010/03/08/Running_NET_threads_on_selected_processor_cores](http://www.umbraworks.net/bl0g/rebuildall/2010/03/08/Running_NET_threads_on_selected_processor_cores)并用在“固定”核心上运行的线程替换了任务，但是我仍在使用“忙-spin”，也许我应该使用更聪明的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T23:08:48.287

使用下面的代码，您在“阶段 1”处理期间不再被锁定：

```
Task.Factory.StartNew(() =>
{
    while (true)
    {
        Iterate();
    }
}, TaskCreationOptions.LongRunning);

private void Iterate()
{
    bool marketDataUpdated = false;

    foreach (Order order in ordersToRegister)
    {
        marketDataUpdated = true;
        // Stage1, Process
    }

    foreach (var entry in aggrUpdates)
    {
        marketDataUpdated = true;
        // Stage1, Process
    }

    foreach (var entry in commonUpdates)
    {
        marketDataUpdated = true;
        // Stage1, Process
    }

    foreach (var entry in infoUpdates)
    {
        marketDataUpdated = true;
        // Stage1, Process
    }

    foreach (var entry in tradeUpdates)
    {
        marketDataUpdated = true;
        // Stage1, Process
    }

    if (marketDataUpdated)
    {
        // Stage2 !
        // make a lot of work. expensive operation. recalculate strategies, place orders etc.
    }
}

private readonly ConcurrentQueue<Order> ordersToRegister = new ConcurrentQueue<Order>();

private readonly ConcurrentQueue<AggrEntry> aggrUpdates = new ConcurrentQueue<AggrEntry>();

private readonly ConcurrentQueue<CommonEntry> commonUpdates = new ConcurrentQueue<CommonEntry>();

private readonly ConcurrentQueue<InfoEntry> infoUpdates = new ConcurrentQueue<InfoEntry>();

private readonly ConcurrentQueue<TradeEntry> tradeUpdates = new ConcurrentQueue<TradeEntry>();

    public void RegistorOrder(object sender, Gate.RegisterOrderArgs e)
    {
        ordersToRegister.Enqueue(e.order);
    }

    public void TradeUpdated(object sender, Gate.TradeArgs e)
    {
        foreach (var entry in e.entries)
        {
            tradeUpdates.Enqueue(entry);
        }
    }

    public void InfoUpdated(object sender, Gate.InfoArgs e)
    {
        foreach (var entry in e.entries)
        {
            infoUpdates.Enqueue(entry);
        }
    }

    public void CommonUpdated(object sender, Gate.CommonArgs e)
    {
        foreach (var entry in e.entries)
        {
            commonUpdates.Enqueue(entry);
        }
    }

    public void AggrUpdated(object sender, Gate.AggrArgs e)
    {
        foreach (var entry in e.entries)
        {
            aggrUpdates.Enqueue(entry);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:27:25.640

这是一种可能更便携的方法。希望能帮助到你。

```
public class SafeQueue<T> : Queue<T>
{
    public T SafeDequeue()
    {
        lock (this)
        {
            return (Count > 0) ? Dequeue() : null;
        }
    }

    public void SafeEnqueue(T entry)
    {
        lock (this)
        {
            Enqueue(entry);
        }
    }
}

Task.Factory.StartNew(() =>
{
    while (true)
    {
        Iterate();
    }
}, TaskCreationOptions.LongRunning);

private void Iterate()
{
    bool marketDataUpdated = false;

    while ((Order order = ordersToRegister.SafeDequeue()) != null)
    {
        marketDataUpdated = true;
        // Stage1, Process
    }

    while ((var entry = aggrUpdates.SafeDequeue()) != null)
    {
        marketDataUpdated = true;
        // Stage1, Process
    }

    while ((var entry = commonUpdates.SafeDequeue()) != null)
    {
        marketDataUpdated = true;
        // Stage1, Process
    }

    while ((var entry = infoUpdates.SafeDequeue()) != null)
    {
        marketDataUpdated = true;
        // Stage1, Process
    }

    while ((var entry = tradeUpdates.SafeDequeue()) != null)
    {
        marketDataUpdated = true;
        // Stage1, Process
    }

    if (marketDataUpdated)
    {
        // Stage2 !
        // make a lot of work. expensive operation. recalculate strategies, place orders etc.
    }
}

private readonly SafeQueue<Order> ordersToRegister = new SafeQueue<Order>();

private readonly SafeQueue<AggrEntry> aggrUpdates = new SafeQueue<AggrEntry>();

private readonly SafeQueue<CommonEntry> commonUpdates = new SafeQueue<CommonEntry>();

private readonly SafeQueue<InfoEntry> infoUpdates = new SafeQueue<InfoEntry>();

private readonly SafeQueue<TradeEntry> tradeUpdates = new SafeQueue<TradeEntry>();

    public void RegistorOrder(object sender, Gate.RegisterOrderArgs e)
    {
        ordersToRegister.SafeEnqueue(e.order);
    }

    public void TradeUpdated(object sender, Gate.TradeArgs e)
    {
        foreach (var entry in e.entries)
        {
            tradeUpdates.SafeEnqueue(entry);
        }
    }

    public void InfoUpdated(object sender, Gate.InfoArgs e)
    {
        foreach (var entry in e.entries)
        {
            infoUpdates.SafeEnqueue(entry);
        }
    }

    public void CommonUpdated(object sender, Gate.CommonArgs e)
    {
        foreach (var entry in e.entries)
        {
            commonUpdates.SafeEnqueue(entry);
        }
    }

    public void AggrUpdated(object sender, Gate.AggrArgs e)
    {
        foreach (var entry in e.entries)
        {
            aggrUpdates.SafeEnqueue(entry);
        }
    } 
```

# .net - 在带有 EF 的 ASP .NET MVC 3 上开发时，最好使用的控制容器反转是什么？

> ID：14919752
> 
> 赞同：1
> 
> 时间：2013-02-17T09:34:16.347
> 
> 标签：.net, asp.net-mvc-3, entity-framework, inversion-of-control, ioc-container

我正在开发一个企业 Web 应用程序，并且对当今可用的控制容器反转有一点了解。我对 ASP .NET MVC 3 有一定的了解。我的选择包括 Castle.Windsor 和 Unity。两者都有控制容器的反转，但我不知道哪个最适合使用 Entity Framework 4.1 的 ASP .NET MVC 3 Web 应用程序。你知道我会选择什么作为最好的，或者你知道什么与我用来开发的网络应用程序兼容吗？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T09:44:07.093

没有最好的容器。如果有其他人可能不会存在，因为每个人都会使用这个最好的容器。只要您正确使用控制反转，您选择哪个容器并不重要。Unity、Ninject、Castle Windsor、StructureMap ……都具有用于 ASP.NET MVC 的自定义 DependencyResolver，可用于将依赖项注入对象。

[`Funq`](http://funq.codeplex.com/)如果速度和性能是您唯一关心的事情，那么您可以看看[`ServiceStack`](http://www.servicestack.net/).

# java - Spring 中 AspecJ AOP 配置的问题：java.lang.IllegalArgumentException: ::0 处的错误找不到引用的切入点

> ID：14919755
> 
> 赞同：0
> 
> 时间：2013-02-17T09:34:36.073
> 
> 标签：java, spring, spring-mvc, aop, aspectj

我正在研究 AspectJ 注释以在 Spring Framework 中配置 AOP 阅读本文： [http ://www.tutorialspoint.com/spring/aspectj_based_aop_appoach.htm](http://www.tutorialspoint.com/spring/aspectj_based_aop_appoach.htm)

与本文不同的是，我不是在我的项目中手动添加 jar，而是使用 Maven。

问题是当我尝试执行 MainApp 类时，我收到以下错误：

```
Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'student' defined in class path resource [Beans.xml]: Initialization of bean failed; nested exception is java.lang.IllegalArgumentException: error at ::0 can't find referenced pointcut selectAll
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at org.andrea.myexample.mySpringAspectJAOP.MainApp.main(MainApp.java:14)
Caused by: java.lang.IllegalArgumentException: error at ::0 can't find referenced pointcut selectAll
    at org.aspectj.weaver.tools.PointcutParser.parsePointcutExpression(PointcutParser.java:317)
    at org.springframework.aop.aspectj.AspectJExpressionPointcut.buildPointcutExpression(AspectJExpressionPointcut.java:207)
    at org.springframework.aop.aspectj.AspectJExpressionPointcut.buildPointcutExpression(AspectJExpressionPointcut.java:193)
    at org.springframework.aop.aspectj.AspectJExpressionPointcut.checkReadyToMatch(AspectJExpressionPointcut.java:182)
    at org.springframework.aop.aspectj.AspectJExpressionPointcut.getClassFilter(AspectJExpressionPointcut.java:163)
    at org.springframework.aop.support.AopUtils.canApply(AopUtils.java:209)
    at org.springframework.aop.support.AopUtils.canApply(AopUtils.java:263)
    at org.springframework.aop.support.AopUtils.findAdvisorsThatCanApply(AopUtils.java:295)
    at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findAdvisorsThatCanApply(AbstractAdvisorAutoProxyCreator.java:117)
    at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findEligibleAdvisors(AbstractAdvisorAutoProxyCreator.java:87)
    at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.getAdvicesAndAdvisorsForBean(AbstractAdvisorAutoProxyCreator.java:68)
    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:359)
    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:322)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:407)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1461)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    ... 11 more** 
```

我想我错过了一些依赖，但我不明白是什么......

这是我的**pom.xml**：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>org.andrea.myexample</groupId>
<artifactId>mySpringAspectJAOP</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>jar</packaging>

<name>mySpringAspectJAOP</name>
<url>http://maven.apache.org</url>

<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context-support</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjtools</artifactId>
        <version>1.6.2</version>
    </dependency>

    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
</dependencies>
</project> 
```

为什么我有这个问题？我能做些什么来解决？

Tnx安德烈亚

**解决方案（自己解决）：**

我已经从我的 pom.xml 文件中删除了这两个依赖项：

```
 <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjtools</artifactId>
        <version>1.6.2</version>
    </dependency> 
```

我已经用这个替换了它：

```
 <dependency>
                <groupId>org.aspectj</groupId>
                <artifactId>aspectjweaver</artifactId>
                <version>1.6.8</version>
           </dependency> 
```

似乎工作正常:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:55:57.903

@AndreaNobili，以下是我的 Maven 依赖项。很高兴你自己解决了问题。

```
<!-- Application Context -->
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context</artifactId>
    <version>${spring.framework.version}</version>
</dependency>
<!-- Spring AOP -->
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-aop</artifactId>
    <version>${spring.framework.version}</version>
</dependency>
<!-- to use AspectJ style AOP interception -->
<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjrt</artifactId>
    <version>1.6.11</version>
</dependency>
<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjweaver</artifactId>
    <version>1.6.11</version>
</dependency> 
```

# yii - yii，如何将纯文本返回到表单的目标（ 我有以下 HTML 代码我想从 actionLogin 返回文本并将其显示在 f 问问题 问问题 2013-02-17T09:34:57.430 621 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我有以下 HTML 代码我想从 actionLogin 返回文本并将其显示在 form_target 中。怎么做？ 我努力了 $this->renderText($Respond); 但仍然失败。在浏览器上，我得到了一个显示返回文本的新屏幕。我想要 form_target 中的文本。 谢谢你。 首先删除级联，因为您在创建/修改付款时不希望创建/修改 PaymentMethod。 然后，当您创建 Payment 时，为其分配您希望与其关联的现有 PaymentMethod： PaymentMethod existingPaymentMethod = em.find(PaymentMethod.class, idOfThePaymentMethod); Payment payment = new Payment(); payment.setPaymentMethod(existingPaymentMethod); em.persist(payment); yii 4 2 回答 2 This answer is useful 0 我用标签替换了

> ID：14919758
> 
> 赞同：0
> 
> 时间：
> 
> 标签：yii

我有以下 HTML 代码

```
<div id="form_target"></div>

<form action="?r=index/login" target="#form_target"></form> 
```

我想从 actionLogin 返回文本并将其显示在 form_target 中。怎么做？

我努力了

```
$this->renderText($Respond); 
```

但仍然失败。在浏览器上，我得到了一个显示返回文本的新屏幕。我想要 form_target 中的文本。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:24:01.620

我用 <div> 标签替换了 <form> 标签。所以我提交没有 <form> 标签的表单条目。我使用 ajax 发布请求来提交值。

我无法解释为什么即使我使用标签，页面在从控制器获取结果时也会不断刷新。

所以修改后的html代码是这样的：

```
<div id="form_target"></div>

<div id="form">
  <input .../>
  <input .../>
  <input .../>
  <input type="button" value="submit" onclick="SubmitForm();"/>
</div> 
```

SubmitForm() 看起来像这样

```
SubmitForm()
{
  var data = $("#form *:input").serialize();

  $.post(
    url,
    data,
    function(data)
    {
      $("#form_target").html(data['respond_text']);
    },
    'json'
  );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T09:54:50.130

替换`$this->renderText($Respond)`为`echo $Respond`。从[API](http://www.yiiframework.com/doc/api/1.1/CController#renderText-detail)页面`renderText()`

> 呈现静态文本字符串。该字符串将插入当前控制器布局并返回。

# ios - 无法刷新 UITableView 中的图片

> ID：14919759
> 
> 赞同：0
> 
> 时间：2013-02-17T09:34:58.220
> 
> 标签：ios, objective-c, cocoa-touch, cocoa

我正在尝试更改表格视图中的图片。我正在使用`[myTableView reloadData];`另一种方法（即启动）来刷新我的`TableView`，我可以看到 tableview 中的其他元素正在刷新，但图像保持不变。我错过了什么？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    UILabel *lblName;
    UIImageView *checkMark = [[UIImageView alloc] initWithFrame:CGRectMake(230, 0, 30, 50)];
    if (cell == nil) {

        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
                cell.selectionStyle = UITableViewCellSelectionStyleNone;
        UIView *backgroundView = [[UIView alloc] initWithFrame:CGRectMake(10, 1, 260, 70)];
        backgroundView.backgroundColor = UIColorFromRGB(0x000000, 0.3);
        backgroundView.userInteractionEnabled = YES;        

        checkMark.image = [UIImage imageNamed:@"V.png"];
        checkMark.contentMode = UIViewContentModeCenter;
        checkMark.backgroundColor = [UIColor clearColor];
        [backgroundView addSubview:checkMark];
        [checkMark release];

        [cell.contentView addSubview:backgroundView];
        [backgroundView release];
    }
    if (something)
    {
        checkMark.image = [UIImage imageNamed:@"halfleft.png"];
        NSLog(@"something was done");
    }
    return cell;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:44:57.597

reloadData 正确调用此方法。

您的问题很简单，在“重用”单元格的情况下，“checkMark”上的指​​针不好。做这样的事情：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    UIView *backgroundView;
    UIImageView *checkMark;
    if (cell == nil) {

        checkMark = [[UIImageView alloc] initWithFrame:CGRectMake(230, 0, 30, 50)];
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        backgroundView = [[UIView alloc] initWithFrame:CGRectMake(10, 1, 260, 70)];
        backgroundView.backgroundColor = UIColorFromRGB(0x000000, 0.3);
        backgroundView.userInteractionEnabled = YES;
        backgroundView.tag = 555;

        checkMark.image = [UIImage imageNamed:@"V.png"];
        checkMark.contentMode = UIViewContentModeCenter;
        checkMark.backgroundColor = [UIColor clearColor];
        checkMark.tag = 666;
        [backgroundView addSubview:checkMark];
        [checkMark release];

        [cell.contentView addSubview:backgroundView];
        [backgroundView release];
    } else {
        backgroundView = (UIImageView *)[cell.contentView viewWithTag:555];
        checkMark = (UIImageView *)[backgroundView viewWithTag:666];
    }
    if (something)
    {
        checkMark.image = [UIImage imageNamed:@"halfleft.png"];
        NSLog(@"something was done");
    }
    return cell;

} 
```

但是，你应该做一些更简单的事情（如果可能的话，更少的子视图。或者子类 UITableViewCell 在复选标记上有一个指针;-)

# linux - Linux Lubuntu Eclipse Checkstyle SWT 错误

> ID：14919762
> 
> 赞同：0
> 
> 时间：2013-02-17T09:35:49.743
> 
> 标签：linux, eclipse, swt

我安装了 Lubuntu 12.10 64bit 和 Eclipse Juno Distribution。如果我切换到 Preferences- Checkstsyle 并在那里配置（打开 checkstyle 配置）我得到以下异常：

```
org.eclipse.swt.SWTError: No more handles [MOZILLA_FIVE_HOME='/home/user/Development/Tools/firefox18.0.2'] (java.lang.UnsatisfiedLinkError: Could not load SWT library. Reasons: 
    /home/user/Development/IDE/eclipse/configuration/org.eclipse.osgi/bundles/626/1/.cp/libswt-mozilla-gtk-4234.so: libxpcom.so: wrong ELF class: ELFCLASS32
    no swt-mozilla-gtk in java.library.path
    /home/user/.swt/lib/linux/x86_64/libswt-mozilla-gtk-4234.so: libxpcom.so: wrong ELF class: ELFCLASS32
    Can't load library: /home/user/.swt/lib/linux/x86_64/libswt-mozilla-gtk.so
)
    at org.eclipse.swt.SWT.error(SWT.java:4387)
    at org.eclipse.swt.browser.Mozilla.initMozilla(Mozilla.java:1970)
    at org.eclipse.swt.browser.Mozilla.create(Mozilla.java:699)
    at org.eclipse.swt.browser.Browser.<init>(Browser.java:99)
    at net.sf.eclipsecs.ui.config.CheckConfigurationConfigureDialog.createDialogArea(CheckConfigurationConfigureDialog.java:207)
    at org.eclipse.jface.dialogs.TitleAreaDialog.createContents(TitleAreaDialog.java:155)
    at org.eclipse.jface.window.Window.create(Window.java:431)
    at org.eclipse.jface.dialogs.Dialog.create(Dialog.java:1089)
    at net.sf.eclipsecs.ui.config.CheckConfigurationConfigureDialog.create(CheckConfigurationConfigureDialog.java:222)
    at org.eclipse.jface.window.Window.open(Window.java:790)
    at net.sf.eclipsecs.ui.config.CheckConfigurationWorkingSetEditor.configureCheckConfig(CheckConfigurationWorkingSetEditor.java:505)
    at net.sf.eclipsecs.ui.config.CheckConfigurationWorkingSetEditor.access$6(CheckConfigurationWorkingSetEditor.java:492)
    at net.sf.eclipsecs.ui.config.CheckConfigurationWorkingSetEditor$PageController.widgetSelected(CheckConfigurationWorkingSetEditor.java:391)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1276)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3554)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3179)
    at org.eclipse.jface.window.Window.runEventLoop(Window.java:825)
    at org.eclipse.jface.window.Window.open(Window.java:801)
    at org.eclipse.ui.internal.dialogs.WorkbenchPreferenceDialog.open(WorkbenchPreferenceDialog.java:215)
    at org.eclipse.ui.internal.OpenPreferencesAction.run(OpenPreferencesAction.java:65)
    at org.eclipse.jface.action.Action.runWithEvent(Action.java:498)
    at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
    at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
    at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1276)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3554)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3179)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1029)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:923)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)
Caused by: java.lang.UnsatisfiedLinkError: Could not load SWT library. Reasons: 
    /home/user/Development/IDE/eclipse/configuration/org.eclipse.osgi/bundles/626/1/.cp/libswt-mozilla-gtk-4234.so: libxpcom.so: wrong ELF class: ELFCLASS32
    no swt-mozilla-gtk in java.library.path
    /home/user/.swt/lib/linux/x86_64/libswt-mozilla-gtk-4234.so: libxpcom.so: wrong ELF class: ELFCLASS32
    Can't load library: /home/user/.swt/lib/linux/x86_64/libswt-mozilla-gtk.so

    at org.eclipse.swt.internal.Library.loadLibrary(Library.java:331)
    at org.eclipse.swt.internal.Library.loadLibrary(Library.java:240)
    at org.eclipse.swt.browser.Mozilla.initMozilla(Mozilla.java:1955)
    ... 50 more 
```

我在网上找到了很多关于这个问题的帖子，但没有一个可以帮助我。我到底该怎么做？目前我只在 home/user 的 .profile 中设置了 MOZILLA_FIVE_HOME 路径。

我目前已经安装了我在 PATH 和 JAVA_HOME 中提到的 Oracle JDK 1.7。

能得到你们的帮助将不胜感激。

问候马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T19:35:11.897

我在我的 Fedora 19（64 位）上遇到了类似的问题。我通过以下步骤解决了它：

```
1\. $ sudo yum install libwebkitgtk*
2\. Restart Eclipse 
```

# xamarin.ios - MonoTouch 表格单元格未被重用 (DequeueReusableCell)

> ID：14919768
> 
> 赞同：1
> 
> 时间：2013-02-17T09:37:08.740
> 
> 标签：xamarin.ios

Update1：​​非常感谢 Greg Munn 和 Json 看我的代码，在当前阶段，我认为这可能是由于我使用的是 MonotTouch 的评估版。

更新2：我粘贴了版本信息，输出也更新了。

更新 3：安装 monotouch 2.0 后，我能够将应用程序部署到设备，它确实发生在真实设备上。但它在模拟器上继续出现相同的症状。

我得到了派生自 UITableViewSource 的自定义类（TableSource），我发现一旦我尝试在模拟器（6.1）中滚动表格视图，它将创建整个 1000 个单元格。我仍在尝试 monoTouch，我不确定它在真实设备上运行后的行为是什么。我真的不知道为什么当我尝试滚动表格视图时它会创建 1000 个单元格。我错过了什么吗？

这是输出的一部分：

```
Console.Out.WriteLine(string.Format("Created: {0} Reused: {1} - currentRow: {2}", this._totalRowCreated, this._totalRowReused, indexPath.Row.ToString())); 
```

*   2013-02-20 17:43:16.638 TableViewTest[3039:c07] 创建新的 row999
*   2013-02-20 17:43:16.638 TableViewTest[3039:c07] 创建：1000 重用：0 - currentRow：999
*   2013-02-20 17:43:16.638 TableViewTest[3039:c07] 创建新的 row1000
*   2013-02-20 17:43:16.639 TableViewTest[3039:c07] 创建：1001 重用：0 - currentRow：1000
*   2013-02-20 17:43:21.581 TableViewTest[3039:c07] 创建新的 row11
*   2013-02-20 17:43:21.582 TableViewTest[3039:c07] 创建：1002 重用：0 - currentRow：11
*   2013-02-20 17:43:30.650 TableViewTest[3039:c07] 重用 row1001
*   2013-02-20 17:43:30.650 TableViewTest[3039:c07] 创建：1002 重用：1 - currentRow：1001
*   2013-02-20 17:43:30.651 TableViewTest[3039:c07] 创建新的 row1002
*   2013-02-20 17:43:30.651 TableViewTest[3039:c07] 创建：1003 重用：1 - currentRow：1002
*   2013-02-20 17:43:30.904 TableViewTest[3039:c07] 创建新的 row12
*   2013-02-20 17:43:30.904 TableViewTest[3039:c07] 创建：1004 重用：1 - currentRow：12
*   2013-02-20 17:43:30.905 TableViewTest[3039:c07] 创建新行 0
*   2013-02-20 17:43:30.906 TableViewTest[3039:c07] 创建：1005 重用：1 - currentRow：0

    ```
    public override bool FinishedLaunching(UIApplication app, NSDictionary options)
    {
        this.window = new UIWindow(UIScreen.MainScreen.Bounds);
        this.window.MakeKeyAndVisible();

        this.viewController = new TableViewTestViewController();

        this.viewController.View.Frame = new RectangleF(
                0, 
                UIApplication.SharedApplication.StatusBarFrame.Height, 
                UIScreen.MainScreen.ApplicationFrame.Width, 
                UIScreen.MainScreen.ApplicationFrame.Height);

        this.window.RootViewController = viewController;

        return true;
    } 
    ```

* * *

```
private TableSource _tblSrc;

public override void ViewDidLoad()
{
  base.ViewDidLoad();

  // Perform any additional setup after loading the view, typically from a nib.

  if (this._tblSrc == null)
  {
    this._tblSrc = new TableSource();

    for (int i = 0; i < 1000; i++)
    {
      this._tblSrc.DataItems.Add(string.Format("Row {0}", i));
    }

    this.TableView.Source = this._tblSrc;
  }
}

//---------------------------------

namespace TableViewTest.Models
{
    public class TableSource : UITableViewSource
    {
        private string _cellIndentifier = "MyCellId";
        private List<string> _dataItems;
        private int _totalRowCreated = 0;
        private int _totalRowReused = 0;

        public TableSource()
        {
        }

        public List<string> DataItems
        {
            get{ return this._dataItems ?? (this._dataItems = new List<string>());}
        }

        public override int RowsInSection(UITableView tableview, int section)
        {
            return this.DataItems.Count;
        }

        public override UITableViewCell GetCell(UITableView tableView, NSIndexPath indexPath)
        {
            var cell = tableView.DequeueReusableCell(this._cellIndentifier);

            if (cell == null)
            {  
                this._totalRowCreated ++;
                Console.Out.WriteLine("Create new row" + indexPath.Row.ToString());
                cell = new UITableViewCell(UITableViewCellStyle.Default, this._cellIndentifier);
                cell.Tag = indexPath.Row;
            } else
            {
                this._totalRowReused ++;
                Console.Out.WriteLine("Reuse row" + indexPath.Row.ToString());
            }

            Console.Out.WriteLine(string.Format("Created: {0} Reused: {1}", this._totalRowCreated, this._totalRowReused));

            var value = this.DataItems [indexPath.Row];
            cell.TextLabel.Text = value;

            return cell;
        }
    }
} 
```

* * *

```
MonoDevelop 3.1.1
Installation UUID: 4098f059-8936-47d8-8e66-4e501f33a58b
Runtime:
  Mono 2.10.9 (tarball)
  GTK 2.24.10
  GTK# (2.12.0.0)
  Package version: 210090011
Apple Developer Tools:
   Xcode 4.6 (2066)
   Build 4H127
Xamarin.Mac: Not Installed
Monotouch: 6.0.10 (Evaluation)
Mono for Android: Not Installed

Build information:
  Release ID: 30101000
  Git revision: 5d928ec4f9d5864b4db04a1301b8a8649b43fb9d
  Build date: 2012-12-14 19:11:30+0000
  Xamarin addins: 80f2dcc8fe4ed316b3e77dde496fc33d90305047
Operating System:
  Mac OS X 10.8.2 
```

# java - Android计时器不精确

> ID：14919770
> 
> 赞同：4
> 
> 时间：2013-02-17T09:37:43.307
> 
> 标签：java, android, timer

好的，所以，我是一个真正的 java 和 android 编程初学者。我正在尝试为友谊赛制作篮球应用程序。现在我正在制作一个从 24 计数到 0 的时钟，播放声音，并通过按钮重置。

```
public class MainActivity extends Activity {
    private ShotClock shotClock;
    private TextView shotClockTimer;
    private Timer timer = new Timer();
    private Button shotClockReset;
    private final static int interval = 100;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        shotClockTimer = (TextView) findViewById(R.id.shotClock);
        shotClockReset = (Button)findViewById(R.id.shotClockReset);
        shotClock = new ShotClock();
        shotClockReset.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                shotClock.shotClockReset();
            }

        });
        timer = new Timer();
        timer.schedule(new TimerTask() {
            @Override
            public void run() {
                TimerMethod();
            }

        }, 0, interval);

    }

    private void TimerMethod() {
        this.runOnUiThread(Timer_Tick);
    }

    private Runnable Timer_Tick = new Runnable() {
        public void run() {
            shotClock.advanceClock();
            shotClockTimer.setText(String.format("%.1f",shotClock.getSeconds()));

        }
    };
} 
```

我的想法是我有一个每 0.1 秒运行一次的计时器，并相应地更新时钟。这工作正常，时钟从 24-0 开始计数并正确重置。我的问题是它不准确 - 我用其他 3 个计时器对其进行了测试，但它总是有点慢：当其他计时器达到 0 时，这个计时器仅剩约 1-1.5 秒。除了以原始方式更改间隔之外，我还能做些什么来使其更准确？请保持友好，因为我是新手 :) 感谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T09:43:49.190

那是因为内部调度，调度器大约每 0.1 秒调用一次这个方法。但是，系统本身是准确的。使用 System.currentTimeMillis() 更正此错误。

Android 本身不是实时应用程序，但系统是您可以获得的最准确的来源。

因此，例如为体育赛事编写精确的秒表在 android 中是没有用例的；）

只需循环并计算毫秒的偏移量，如果达到偏移量，则调用方法。

但也要考虑这里的不准确性。始终使用开始时间（1*0.1 秒、2*0.1 秒...）计算偏移量，而不是使用最后一个值，因此在此处尽量减少不准确性。

# wpf - Wpf 应用程序崩溃无异常

> ID：14919775
> 
> 赞同：1
> 
> 时间：2013-02-17T09:39:14.710
> 
> 标签：wpf, xaml, mvvm, wpf-controls

我有一个包含两个选项卡项的 xaml 文件。

起初它打开得很好，当我切换标签时，应用程序毫无例外地崩溃。

问题不在第二个选项卡中，因为如果我在 xaml 文件中切换选项卡项，它会在切换回来时正常打开并再次崩溃。

选项卡项包含一个自定义编辑器，其中包含一个富文本框（每个），并且它们具有相同的加载功能（没关系，我测试过）。

有趣的是，当我添加`visability="hidden"`到第二个编辑器时，它会以现在的问题打开。

HTML 示例：

```
<TabControl SelectedItem="{Binding SelectedEditorView}">            
            <TabItem Header="first">
<editor:SourceCodeEditor x:Name="globalEditor" Grid.Row="4" Grid.ColumnSpan="3" Loaded="codeEditor_Loaded" SourceCodeDocumnet="{Binding Path=GlobalDocument, Mode=TwoWay}" Margin="0 10" />                        
            </TabItem>
            <TabItem Header="second">                
            <editor:SourceCodeEditor x:Name="monitorEditor" Loaded="codeEditor_Loaded" Grid.Column="2" SourceCodeDocumnet="{Binding Path=MonitorDocument, Mode=TwoWay}"  />         
            </TabItem>            
</TabControl> 
```

我真的不知道该怎么办！

# mysql - mysql查询中运行时生成的结果总和

> ID：14919777
> 
> 赞同：0
> 
> 时间：2013-02-17T09:39:28.740
> 
> 标签：mysql, sql, runtime

我在 MySQL 中有一个包含大量数据的表。我想显示生成列的总和...

我减去两列，我想显示结果的总和。这是我所拥有的

```
 CREATE TABLE amounts(
id MEDIUMINT NOT NULL AUTO_INCREMENT,
bank_amount INT,
amount INT,
PRIMARY KEY (id)
) ENGINE=MyISAM;
INSERT INTO `amounts` (`id`, `bank_amount`, `amount`) VALUES (NULL, '1000', '100'),
(NULL, '2000', '200'),(NULL, '3000', '300'),(NULL, '1200', '500'),(NULL, '2000', '600'),
(NULL, '1202',   '800'),(NULL, '220', '50'); 
```

我有这个查询

```
SELECT bank_amount,amount,(bank_amount-amount) as bal from amounts where ...... 
```

上面的查询会给我这个结果

bank_amount 金额 bal

1000 100 900

2000 200 1800

3000 300 2700

等等

现在我想显示 bal 的 SUM 也像 900+1800+2700

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:18:19.403

你是这个意思吗？

```
SELECT x.*
      , x.bank_amount-x.amount bal
      , SUM(y.bank_amount-y.amount) running
   FROM amounts x
   JOIN amounts y
     ON y.id <= x.id
  GROUP
     BY id;
 +----+-------------+--------+------+---------+
 | id | bank_amount | amount | bal  | running |
 +----+-------------+--------+------+---------+
 |  1 |        1000 |    100 |  900 |     900 |
 |  2 |        2000 |    200 | 1800 |    2700 |
 |  3 |        3000 |    300 | 2700 |    5400 |
 |  4 |        1200 |    500 |  700 |    6100 |
 |  5 |        2000 |    600 | 1400 |    7500 |
 |  6 |        1202 |    800 |  402 |    7902 |
 |  7 |         220 |     50 |  170 |    8072 |
 +----+-------------+--------+------+---------+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T09:43:11.123

你在寻找

```
SELECT
    A.id,
    A.bank_amount,
    A.amount,
    (A.bank_amount - A.amount) as bal,
    T.Total_bal
FROM amounts A
    JOIN 
      (
          SELECT Id, SUM(bank_amount-amount) Total_bal
          FROM amounts
          GROUP BY Id
      ) T
      ON A.Id = T.Id 
```

?

# javascript - 从调用中调用javascript函数？

> ID：14919779
> 
> 赞同：0
> 
> 时间：2013-02-17T09:40:31.550
> 
> 标签：javascript

当我拨打这个电话时，我该怎么做

```
 client.notification("test", "test", function(){
      alert("Hello world");
 }); 
```

我可以在“client.notification”中调用 function(){....} 里面的东西吗？

前任。

```
var client = ({"notification" : function(a,b,c){
    document.write(a + b);
    if ( .... ) {
        //call the alert stuff from the function "c"
    }
}); 
```

我试过这个：

```
$('#notification').click(eval(c)); 
```

没有运气

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:51:20.460

试试这个：

```
var client = ({"notification" : function(a,b,c){
    alert('inside of notification');
    c.call(); // or even `c()`
}});

client.notification("test", "test", function(){
    alert("inside of callback");
}); 
```

# cakephp - 使用 saveAssociated() 保存模型关联的 2 个表单

> ID：14919781
> 
> 赞同：1
> 
> 时间：2013-02-17T09:40:43.963
> 
> 标签：cakephp

CakePHP 2.2.3 版

我想使用 2 个关联模型在同一页面上保存 2 个表单。模型 1 : 提案 hasOne Client 模型 2 : Client belongsTo Proposal

现在这是我在 ProposalsController.php 中的 admin_edit 操作：

```
function admin_edit($id=null){
        $this->loadModel('Client');
        if ($this->request->is('put') || $this->request->is('Post')) {
            if (!empty($this->request->data)) {
        // Use the following to avoid validation errors:
                unset($this->Proposal->Client->validate['proposal_id']);
                //$this->Proposal->saveAssociated($this->request->data);
                //$this->redirect(array('action' => 'index'));
                debug($this->request->data);
            }
        }
        elseif($id){
            $this->Proposal->id = $id;
            $this->request->data = $this->Proposal->read();
        }

    } 
```

我使用了 CakePHP 书中的示例。

这是我的观点 admin_edit.ctp 有两种形式：

```
<hr/>
<h1>Proposition</h1>
<hr/>

<?php echo $this->Form->create('Proposal'); ?>

<?php echo $this->Form->input('Proposal.name', array('label' => "Nom de la proposition")); ?>
<?php echo $this->Form->input('Proposal.created', array('label' => "Date de création")); ?>
<?php echo $this->Form->input('Proposal.due', array('label' => "Date d'échéance")); ?>
<?php echo $this->Form->input('Proposal.content', array('label' => "Termes & conditions")); ?>
<?php echo $this->Form->input('Proposal.id'); ?>

<hr/>
<h1>Client</h1>
<hr/>

<?php echo $this->Form->input('Client.name', array('label' => "Nom du client")); ?>
<?php echo $this->Form->input('Client.project', array('label' => "Nom du projet")); ?>
<?php echo $this->Form->input('Client.address', array('label' => "Adresse")); ?>
<?php echo $this->Form->input('Client.phone', array('label' => "Téléphone")); ?>
<?php echo $this->Form->input('Client.email', array('label' => "Email")); ?>
<?php echo $this->Form->hidden('Client.proposal_id'); ?>
<?php echo $this->Form->input('Client.id'); ?>

<?php echo $this->Form->end('valider'); ?> 
```

也受到 CakePHP 书的启发。

数据已保存，但对于第二种形式，它保存的只是`NULL`我的客户表的每一列中的“”值。但是，如果我调试（请求-> 数据），我会得到我输入 2 个表单的所有数据。这很奇怪。

我做错了什么？

非常感谢您的帮助！

**[编辑]**：我已经更新了这篇文章并更正了代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:47:18.143

我目前不在我的电脑前，所以无法检查，但是：

因为你有一个“hasOne”关系，而不是一个“hasMany”，所以你不应该使用.0。为第二种形式命名。查看手册中的第一个示例/说明：

[http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveassociated-array-data-null-array-options-array](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveassociated-array-data-null-array-options-array)

所以第二种形式的输入看起来像这样：

```
<?php echo $this->Form->input('Client.name', array('label' => "Nom du client")); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:48:54.880

`Client.0.name`仅关系需要使用该符号`hasMany`，因此您需要将其更改为：`Client.name`

# sql - 此表达式中不允许使用 Blob

> ID：14919784
> 
> 赞同：1
> 
> 时间：2013-02-17T09:41:04.947
> 
> 标签：sql, blob, informix

我面临以下问题：

> *-615：此表达式中不允许出现 Blob。*

```
SELECT ser
      ,task_code
      ,trans_serial
      ,trans_year
      ,CASE when nvl(length(signed_content), 0) <> '' THEN  signed_content  ELSE  attach_content  END AS signed_content
      ,CASE WHEN nvl(length(signed_content), 0) <> '' THEN 'signed_content' ELSE 'attach_content' END AS comes_from
FROM attach_detail
WHERE serial = 5 AND task_code = 88 AND trans_year = 2012 AND trans_serial = 23728 
```

* * *

注：`signed_content`,`attach_content`属于`BYTE`; 其他列是 type `INT`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T18:26:08.023

您的问题似乎是 Informix 不允许在`CASE`表达式中使用 blob。

要解决此问题，您可以将其`CASE`转换为两个子查询：

```
SELECT ser
      ,task_code
      ,trans_serial
      ,trans_year
      ,signed_content AS signed_content
      ,'signed_content' AS comes_from
FROM attach_detail
WHERE nvl(length(signed_content), 0) <> ''
  AND serial = 5 AND task_code = 88 AND trans_year = 2012 AND trans_serial = 23728
UNION ALL
SELECT ser
      ,task_code
      ,trans_serial
      ,trans_year
      ,attach_content AS signed_content
      ,'attach_content' AS comes_from
FROM attach_detail
WHERE nvl(length(signed_content), 0) = ''
  AND serial = 5 AND task_code = 88 AND trans_year = 2012 AND trans_serial = 23728 
```

# nhibernate - 为什么级联 SaveUpdate 会触发 Delete 语句？

> ID：14919792
> 
> 赞同：0
> 
> 时间：2013-02-17T09:42:28.643
> 
> 标签：nhibernate, nhibernate-mapping, nhibernate-cascade

这与我之前提出的这个问题有关。

在`Request`映射中，我将其设置为`SaveUpdate`到期，在`Discount`映射中，我将级联设置为无。

有两种情况：

1.  首先是新要求和新折扣。创建两者，然后将折扣添加到请求并保存请求；这按预期工作。

2.  下一个场景是新请求和现有折扣。这不正常，我不确定为什么。以下是测试中运行的 SQL 语句（省略值）：

    ```
    NHibernate: INSERT INTO Requests
    NHibernate: SELECT @@identity
    NHibernate: INSERT INTO DiscountRequests (DiscountId, RequestId) VALUES (3, 5);
    NHibernate: UPDATE Discounts
    NHibernate: DELETE FROM DiscountRequests WHERE DiscountId = 3; 
    ```

最后一行是问题：它会返回并从第 3 行删除插入。我应用于 Request 对象的命令是`session.Save(request);`，仅此而已。

是否有任何理由调用删除？

编辑：

更新代码

```
 public void Add(Request request)
    {

        using (ISession session = NHibernateHelper.OpenSession())
        {
            using (ITransaction transaction = session.BeginTransaction())
            {
                session.Save(request);
                transaction.Commit();
            }
        }
    } 
```

折扣映射

```
<join table="DiscountRequests" optional="true">
  <key column="DiscountId" />
  <many-to-one name="Request" column="RequestId" cascade="none" />
</join> 
```

请求映射

```
<join table="DiscountRequests" optional="true">
    <key column="RequestId" />
    <many-to-one name="Discount" column="DiscountId" cascade="save-update" />
</join> 
```

ttp://stackoverflow.com/questions/14837373/zero-to-one-relationship-nhibernate-mapping

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:00:45.103

我不同意您[先前问题](https://stackoverflow.com/questions/14837373/how-to-map-a-zerotoone-relationship-in-nhibernate)的公认答案；有关连接映射的说明，请参阅[本文](http://ayende.com/blog/3961/nhibernate-mapping-join)。

我会将其建模为简单的多对多关系（如果 DiscountRequest 有其他数据，则为两个一对多）。您可以将集合映射为字段并通过公共属性强制执行折扣具有 0 或 1 个请求（反之亦然）的规则。如果是多对多，那么级联设置应该是`none`.

例如：

```
public class Request
{
    private ICollection<Discount> _discounts;

    public Request() { _discounts = new Hashset<Discount>(); }

    public Discount
    {
        get { return _discounts.SingleOrDefault(); }
        set
        {
            _discounts.Clear();
            if (value != null) { _discounts.Add(value);
        }
     }
} 
```

# border - 如何在此元素内添加边框？

> ID：14919793
> 
> 赞同：0
> 
> 时间：2013-02-17T09:42:45.227
> 
> 标签：border, css

如何*在*以下内容中添加`1px solid rgba(255,255,255,0.6)`边框？`5px` *`fieldset`*

 *结果应该是这样的：

![一种](../Images/12a5f6a3ae2f74d486638a82a2f06c65.png)

我只需要它与 Chrome 最新版、Firefox 最新版和 IE 9 兼容。

这是一个[JSFiddle](http://jsfiddle.net/dFDw6/)，以及我当前的代码：

**HTML**

```
<fieldset>&nbsp;</fieldset> 
```

**CSS**

```
fieldset
{
    background: #3AA0BD;
    background: -moz-linear-gradient(top, #3AA0BD 0%, #06446E 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#3AA0BD), color-stop(100%,#06446E));
    background: -webkit-linear-gradient(top, #3AA0BD 0%,#06446E 100%);
    background: -o-linear-gradient(top, #3AA0BD 0%,#06446E 100%);
    background: -ms-linear-gradient(top, #3AA0BD 0%,#06446E 100%);
    background: linear-gradient(to bottom, #3AA0BD 0%,#06446E 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#3AA0BD', endColorstr='#06446E',GradientType=0 );
    -webkit-border-radius: 8px;
    -moz-border-radius: 8px;
    border-radius: 8px;
    display: inline-block;
    padding: 20px;
    /* temp */
    height: 60px;
    width: 500px;
} 
```

高度和宽度未知。我刚刚在此处添加它们以填写`fieldset`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T09:45:04.873

对于普通的 CSS，我认为没有内联 CSS 规则。你得到`box-shadow`了一个内联部分，但这并不适用于每个浏览器。

请查看以下 URL： http: [//net.tutsplus.com/tutorials/html-css-techniques/quick-tip-multiple-borders-with-simple-css/](http://net.tutsplus.com/tutorials/html-css-techniques/quick-tip-multiple-borders-with-simple-css/)

您可以在其中使用`:before`并`:after`在其中创建另一个元素，`position absolute`以便选择整个内容减去边框的宽度和高度。

```
 #box {  
        background: #f4f4f4;  
        border: 1px solid #bbbbbb;  
        width: 200px;  
        height: 200px;  
        margin: 60px auto;  
        position: relative;  
    }  
    #box:before {  
        border: 1px solid white;  
        content: '';  
        width: 198px;  
        height: 198px;  
        position: absolute;  
    }  
    #box:after {  
        content: '';  
        position: absolute;  
        width: 196px;  
        height: 196px;  
        border: 1px solid #bbbbbb;  
        left: 1px; top: 1px;  
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T09:55:39.477

包装元素呢？( [JSFiddle](http://jsfiddle.net/vuEGF/ "编辑 JSFiddle") )

***由 OP 编辑​​：***这就是我最终要做的，因为我已经有一个`form`元素“包装”了`fieldset`：

**HTML**

```
<form>
    <fieldset>&nbsp;</fieldset>
</form> 
```

**CSS**

```
form
{
    background: #3AA0BD;
    background: -moz-linear-gradient(top, #3AA0BD 0%, #06446E 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#3AA0BD), color-stop(100%,#06446E));
    background: -webkit-linear-gradient(top, #3AA0BD 0%,#06446E 100%);
    background: -o-linear-gradient(top, #3AA0BD 0%,#06446E 100%);
    background: -ms-linear-gradient(top, #3AA0BD 0%,#06446E 100%);
    background: linear-gradient(to bottom, #3AA0BD 0%,#06446E 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#3AA0BD', endColorstr='#06446E',GradientType=0 );
    -webkit-border-radius: 8px;
    -moz-border-radius: 8px;
    border-radius: 8px;
    display: inline-block;
    padding: 5px;
}

fieldset
{
    -webkit-border-radius: 8px;
    -moz-border-radius: 8px;
    border-radius: 8px;
    border: 1px solid rgba(255,255,255,0.6);
    padding: 20px;
} 
```*

# c# - 关系负载中的日期时间未正确反序列化

> ID：14919794
> 
> 赞同：1
> 
> 时间：2013-02-17T09:42:45.797
> 
> 标签：c#, neo4j, neo4jclient

背景。

我正在存储用户和产品节点，我希望能够记录用户每次购买产品的日期。当返回结果时，购买日期返回为 DateTime.Min 但如果我通过控制台查询 Neo4j，我可以看到日期存储为“2013-02-16T08:31:54.8604715+00:00”

我用来返回关系有效负载的查询是：

```
graphClient
.RootNode
.In < RootNode >(sourceTypeKeyToRoot)
.OutE<TData>(TypeKeyRelatingNodes())
.ToList(); 
```

TData 是一个简单的类

```
public class PayLoad
{
   public DateTime Purchased { get; set; }
} 
```

如果我也使用 Cypher 查询，我会得到相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:13:23.553

这不是受支持的类型，因为我们无法通过 Neo4j 正确地往返它。

你应该`DateTimeOffset`改用。

`DateTime`如果您尝试使用, 对于自 1.0.0.174 左右的任何构建，您应该会收到异常：

[http://hg.readify.net/neo4jclient/src/d4118523780ee5dcacbe2f57b4f40ee6b90d6500/Neo4jClient/Deserializer/CommonDeserializerMethods.cs?at=default#cl-109](http://hg.readify.net/neo4jclient/src/d4118523780ee5dcacbe2f57b4f40ee6b90d6500/Neo4jClient/Deserializer/CommonDeserializerMethods.cs?at=default#cl-109)

[http://hg.readify.net/neo4jclient/commits/fa5bedfa60cb](http://hg.readify.net/neo4jclient/commits/fa5bedfa60cb)

# silverlight - Silverlight 和 Windows Metro 风格有什么不同？

> ID：14919798
> 
> 赞同：0
> 
> 时间：2013-02-17T09:43:24.683
> 
> 标签：silverlight

我不知道 Metro 风格的应用程序我想将我的**silverlight**应用程序转换为**Metro 风格**的应用程序所以请给我建议

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T13:21:46.587

再一次，这都是关于框架的。

*   WPF 在 .NET 框架中。
*   Silverlight 位于 Silverlight 框架中（它本身就是 .NET 框架的子集）。
*   现代 UI（Metro 的新名称）在 WinRT API 中

你可以在这个博客上找到有趣的信息：http: [//blogs.microsoft.co.il/blogs/arik/archive/2011/09/19/windows-8-what-s-new.aspx](http://blogs.microsoft.co.il/blogs/arik/archive/2011/09/19/windows-8-what-s-new.aspx)

将您的 Silverlight 应用程序转换为现代 UI 应用程序将非常简单，尤其是如果您使用 MVVM 和 C#/XAML 编写它。现代 UI 的唯一大限制是您需要 Windows 8 和 VS 2012 为其编程。您的目标是在 Modern UI 框架中重新编译您的代码（VS2012 中的 Windows Store 项目：http: [//msdn.microsoft.com/en-us/library/windows/apps/br211384.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br211384.aspx)），这可能需要一些代码修改（最后几乎与尝试使用 .NET 在 WPF 中重新编译它相同）。

![在此处输入图像描述](../Images/6194fab447be493256d4423c808e460e.png)

# ios - 无论如何要缩短 if ( i == x || i == y)？

> ID：14919800
> 
> 赞同：4
> 
> 时间：2013-02-17T09:43:41.940
> 
> 标签：ios, objective-c, if-statement, logic, conditional-statements

我试图缩短我的代码，从：

```
if(i== x || i == y || i == z ) 
```

至

```
if (i == ( x || y || z )) 
```

我知道这种方式是错误的，因为我在日志中得到了不正确的 i。

但是，有什么方法可以缩短 Objective-C 中的代码吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T09:47:59.970

您可以使用一个`switch`语句，但这并不能真正为您带来 2-3 个值。

```
switch (i) {
    case x:
    case y:
    case z:
        ....some code....
        break
    default:
        ....some other code....
} 
```

如果你检查的东西更复杂或者你有更多的选择，那就更省钱了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-17T09:47:26.820

如果有更高的概率，`x==i`那么`y==i`最好写它`x==i || y==i`而不是`y==i || x==i`因为如果第一个语句的计算结果为真，则第二个语句不会被计算（它是短路的）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-17T09:49:48.887

如果你想检查很多你可以使用的对象`NSArray`和`indexOf`方法：

```
 NSArray *matchingNumbers = @[@1,@2,@3,@4,@5,@6,@7,@8];
    NSNumber *checkedNumber = @3;
    if ( [matchingNumbers indexOfObject:checkedNumber] != NSNotFound)
    {
        //...
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-17T09:48:13.917

计算机处理数字信号。计算机的所有自然运算都是二进制的。

如果你想比较三个东西，你必须使用两个二进制比较来使它对计算机更好。

您还需要意识到**更短的代码不一定更快**。通常，这只是作者的一个捷径概念。

那么为什么你认为你需要进一步缩短这个表达式呢？

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-17T14:02:54.053

至于您比较 50 个值的问题。

制作一个由这 50 个变量组成的 NSMutableArray……然后使用此代码。

使用此代码：

```
if ([myArray containsObject:i]) { 
```

奇迹般有效！

如果要分别检查每个值，可以使用 while 循环或 for 循环：

```
n = 0;
while (n<49) {
    if (n==[myArray objectAtIndex:n]) {
        //OR statement returned true for one of the 50 objects... 
    }
} 
```

* * *

以下部分适用于需要对此问题有不同答案的其他人：

* * *

如果我们有其余的代码，可能有办法缩短你的整个条件语句......至于缩短“或”部分，我不确定如何......

但是像：

```
if ((i==x)||(i==y)) {
     string=@"hello";
} 
```

可能变成：

```
string = ((i==x)||(i==y)) ? @"hello"; 
```

* * *

或者......类似的东西：

```
if ((i==x)||(i==y)) {
     string=@"hello";
} else {
     string=@"goodbye";
} 
```

可能变成：

```
string = ((i==x)||(i==y)) ? @"hello" : @"goodbye"; 
```

* * *

因为我经常使用带有数值的条件语句，所以我经常使用快捷方式，如果条件语句为真，则等于 1，而如果条件语句为假，则等于 0，因此我可以这样说

```
myNumber = ((i==x)||(i==y))*(z+w); 
```

如果 i 等于 x 或 y，它将返回 true（即“1”），这将返回 1*(z+w) 或 (z+w)，但如果条件为 false，则返回“0”，即返回 0* (z+w) 或 0。

* * *

最后说明：*可能有数学方法来表示一个函数帽子返回你想要的结果......例如，如果 x = -2 和 y = 2 而不是检查 i==x 或 i==y 只是检查如果 abs(i) == y (*abs 是绝对值)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-30T19:12:35.000

如果您使用大量变量，则可以执行以下操作:)

```
if ([[[NSMutableArray alloc] initWithObjects:x,y,z,a,b,c,d,e,f,g,h,j,k,l,nil] containsObject:i]) { 
```

# sql - 如何比较两行/多行的两个不同列

> ID：14919807
> 
> 赞同：1
> 
> 时间：2013-02-17T09:44:21.853
> 
> 标签：sql

我需要帮助来查询需要使用两个不同列比较两行的单个表。

例如：

```
EMP Table
EmpId EmpName EmpIDNum EmpAddNum
1      xyz        123   456
2      wer        345   123
3      qwe        478   908
4      ghe        123   567
5      fde        456   123 
```

在上表中，我需要查找具有相同 ID 号的行（这可以通过 using`group by`子句完成），并且我正在寻找如何获取两行，其中一行的 EmpIDNum 是另一行的 EmpAddNum。

我需要使用单个查询来获取这两件事。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:03:51.770

关键是为同一个表创建 2 个别名并对其进行操作。

```
create table #temp(ID int, num1 int, num2 int)
insert into #temp values (1,123,234)
insert into #temp values (2,234,345)
insert into #temp values (3,345,123)

--query just to create a dummy table fro your reference
--main query starts from here

select * from #temp where ID in
((select t1.id  from #temp t1, #temp t2
where t1.num1 = t2.num2 and t1.num1 = 123),(select t2.id  from #temp t1, #temp t2
where t1.num1 = t2.num2 and t1.num1 = 123))

--sorry for not indenting it
drop table #temp

--returns
--ID    num1   num2
-- 1     123    234
-- 3     345    123 
```

我给出的另一个答案要好得多。看看它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T12:33:56.717

如果我正确理解了你的问题，在 SQLServer2005+ 中你可以试试这个

```
SELECT t1.EmpID, t1.EmpName, t1.EmpIDNum, t1.EmpAddNum
FROM EMPtbl t1 
  CROSS APPLY(
              SELECT t2.EmpIDNum
              FROM EMPtbl t2
              GROUP BY t2.EmpIDNum              
              HAVING COUNT(*) > 1
              INTERSECT
              SELECT t3.EmpIDNum
              FROM EMPtbl t3              
              WHERE T1.EmpIDNum IN (t3.EmpAddNum, t3.EmpIDNum)
              ) o 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/67125/1/0)上的演示[](http://sqlfiddle.com/#!3/67125/1/0)

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T10:34:28.317

如果你想在第二个 cloumn 中多于 1 行，那么

```
create table #temp(ID int, num1 int, num2 int)

insert into #temp values (1,123,234)
insert into #temp values (2,234,345)
insert into #temp values (3,345,123)
insert into #temp values (4,567,123)

--query just to create a dummy table fro your reference
--main query starts from here

select * from #temp where ID in
(select t1.id  from #temp t1, #temp t2
where t1.num1 = t2.num2 and t1.num1 = 123) or ID in
(select t2.id  from #temp t1, #temp t2
where t1.num1 = t2.num2 and t1.num1 = 123)

--sorry for not indenting it
drop table #temp

--returns
--ID    num1   num2
-- 1     123    234
-- 3     345    123
-- 4     567    123 
```**

# bash - 在bash中的if语句中将参数传递给函数

> ID：14919819
> 
> 赞同：9
> 
> 时间：2013-02-17T09:45:30.713
> 
> 标签：bash, shell, unix

我试图在`if`语句中将参数传递给函数，然后评估函数返回的内容（在 bash 中）。我得到的结果是不正确的。你如何正确地做到这一点？

```
#!/bin/bash

foo() {
    if [ $1 = "zero" ]; then
        echo "0"
    else 
        echo "1"
fi
}

arg="zero"
if foo $arg -eq 0 ; then
    echo "entered 0"
else
    echo "entered something else"
fi

arg="blah"
if foo $arg -eq 0 ; then
    echo "entered 0"
else
    echo "entered something else"
fi 
```

不是想要的结果：

```
cknight@macbook:~/work$ ./test.sh
0
entered 0
1
entered 0 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T09:48:15.050

您可以`return`从函数中获取结果，也可以`$()`用于捕获其输出：

```
if [ $(foo $arg) -eq 0 ] ; then 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T15:54:17.917

你确定你需要你的函数来回显 0 或 1 吗？它看起来更像你想要的东西

```
foo() {
  if [ $1 = "zero" ]; then
    return 0
  else 
    return 1
  fi
}

# Or even just simply foo () { [ $1 = "zero ]; }

arg="zero"
if foo $arg; then
    echo "entered 0"
else
    echo "entered something else"
fi

arg="blah"
if foo $arg; then
    echo "entered 0"
else
    echo "entered something else"
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T09:54:56.043

不知道你想做什么...

你的`foo()`函数总是成功返回，使用`return`.

`foo()`您将第二个和第三个参数传递给您的函数，`-eq 0`但它们没有被使用。是否要检查退出状态？那简直了`if foo $arg; then ..; fi`。

# php - 表单数据未设置

> ID：14919820
> 
> 赞同：1
> 
> 时间：2013-02-17T09:45:42.243
> 
> 标签：php, javascript, jquery, google-maps

这是我的 HTML 代码：

```
<html>
    <head>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">           
        </script>

        <script>
            function getCords(){
                var x=document.forms["get_loc"]["loc"].value;
                var y=x.replace(" ","+");
                $.getJSON("http://maps.google.com/maps/geo?q=%22"+y+"%22&key=%22My_Google_API_Key%22&sensor=false&output=json",
                    function(data, textStatus){
                        //alert(data.Placemark[0].Point.coordinates[0]);
                        //document.getElementById("MyDiv").innerHTML=data.Placemark[0].Point.coordinates[0] 
                        $("#lon").val(data.Placemark[0].Point.coordinates[1]);
                        $("#lat").val(data.Placemark[0].Point.coordinates[0]);
                    console.log(data);
                });
            return true;            
            }
        </script>

    </head> 

    <body>
        <form name="get_loc" id="get_loc" action="get_loc.php" onsubmit="return getCords()" method="post">
        Location:   <input type="text" name="loc" id="loc"/></br>
        <input type="hidden" name="lat" id="lat" value="0"/>
        <input type="hidden" name="lon" id="lon" value="0"/>
        <input type="submit" value="Submit" id="submit_button"/></br>
        </form>
    </body> 
</html> 
```

现在，我要做的是使用此函数获取位置的坐标，并将其传递给单独的 PHP 文件以执行某些数据库操作。但是当我尝试获取打印在 PHP 文件中的值时，纬度和经度仍然显示为 0。

这里出了什么问题？

P：S：当返回错误并检查警报时，它给了我正确的纬度。所以它不是谷歌API的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:57:13.540

有两件事几乎注定了你正在尝试做的事情。你不能像那样 ajax 到谷歌，跨域安全限制。而且“你的谷歌 api 密钥”不起作用。客户端浏览器只能是您，或者是愿意使用它的拥有自己密钥的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T10:36:15.213

以这种方式提交表单的事情是这样的：您在提交表单的确切时刻调用了一个 javascript 函数。这不会取消实际的表单提交，并且 javascript-function (Async) 没有时间设置字段。在异步请求完成之前，页面已经消失了。

幸运的是，您可以取消原始事件，并在获取 api 的结果后，提交表单。不要忘记这可能需要一些时间并且用户不知道发生了什么，通过显示某种“加载程序”让他们知道正在发生的事情。

此外，使用 jQuery 提交事件将 html 与 javascript 分开。这是如何工作的：

```
<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">           
    </script>

    <script>
        function getCords(event){

            event.preventDefault();
            var callingForm = $(this);                
            var location = callingForm.find("#loc").val();
                location = location.replace(" ","+");
            $.getJSON("http://maps.google.com/maps/geo?q=%22"+y+"%22&key=%22My_Google_API_Key%22&sensor=false&output=json",
                function(data, textStatus){
                    //alert(data.Placemark[0].Point.coordinates[0]);
                    //document.getElementById("MyDiv").innerHTML=data.Placemark[0].Point.coordinates[0] 
                    $("#lon").val(data.Placemark[0].Point.coordinates[1]);
                    $("#lat").val(data.Placemark[0].Point.coordinates[0]);
                console.log(data);
                callingForm.submit();
            });
        return false;            
        }
        $(".jsFormSubmit").submit(getCords);

    </script>

</head> 

<body>
    <form name="get_loc" id="get_loc" class="jsFormSubmit" action="get_loc.php" method="post">
    Location:   <input type="text" name="loc" id="loc"/></br>
    <input type="hidden" name="lat" id="lat" value="0"/>
    <input type="hidden" name="lon" id="lon" value="0"/>
    <input type="submit" value="Submit" id="submit_button"/></br>
    </form>
</body> 
```

# c++ - 排除范围内的 C++ 随机数

> ID：14919823
> 
> 赞同：4
> 
> 时间：2013-02-17T09:46:11.307
> 
> 标签：c++

我想生成0到5范围内的随机数，但是例如，在某些情况下我不需要数字3，我只需要0、1、2、4、5。如何生成范围内的随机数，但可以选择排除我不需要的数字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-31T04:48:52.513

这是另一个使用 C++ 11 的现代特性的解决方案。

```
#include <functional>
#include <iostream>
#include <ostream>
#include <random>

int main()
{
    std::random_device rd;

    unsigned long seed = rd();
    std::cout << "seed " << seed << std::endl;

    std::mt19937 engine(seed);

    // Distribution  {0, 1, 2, 4, 5}
    std::discrete_distribution<> dist {{1, 1, 1, 0, 1, 1}};
    auto rng = std::bind(dist, std::ref(engine));

    const int n = 10;
    for (int i = 0; i != n; ++i)
    {
        int x = rng();
        std::cout << x << std::endl;
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T10:35:57.603

您要排除的数字在编译时是否已知？然后一个简单的查找表应该做：

```
static int table[] = {0, 1, 2, 4, 5};
int index = rand() % (sizeof table / sizeof *table);
int number = table[index]; 
```

当然，`rand()`这是一个可怕的伪随机数生成器，但那是另一个话题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T10:33:42.653

只需在循环中丢弃 3：

```
template <typename Rng>
int rand_no_three (Rng& rng)
{
    std::uniform_int_distribution<> dist (0, 5);
    int c;

    do {
       c = dist (rng);
    } while (c == 3);

    return c;
} 
```

示例用法：

```
std::mt19937 rng;
int c = rand_no_three (rng); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T10:40:51.250

这是一种在没有查找表的情况下执行此操作的方法，以防您有内存限制。

```
int map_fun(int i)
{ 
  switch(i)
  {
    case 3: return 4;
    case 4: return 5;
  }
  return i;
}

int main()
{
   int i= map_fun(random_between(0, 4));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T11:12:00.563

这是使用这篇文章中的 java 代码的示例：[如何在一个范围内生成一个随机数但排除一些？](https://stackoverflow.com/questions/6443176/how-can-i-generate-a-random-number-within-a-range-but-exclude-some?rq=1) 翻译成c++。

这有点通用，并且没有使用不必要的循环。

我还做了一个分布、范围和出现 - 检查这个程序：

```
#include <iostream>
#include <vector>
#include <cstdlib>
#include <time.h>
#include <map>
using namespace std;

int getRandomWithExclusion(int start, int end, vector<int> &excludes){
    unsigned int max = end - start + 1 - excludes.size();
    int random = start+(rand() % max);
    for (unsigned int i = 0;i<excludes.size();i++) {
        int ex = excludes[i];
        if (random < ex){
            break;
        }
        random++;
    }
    return random;
}

int main()
{
    srand (time(NULL));
    vector<int> excl;

    map<int,int> distMap;

    excl.push_back(-2);
    excl.push_back(3);

    for(int i=0;i<100000;i++){

        int val = getRandomWithExclusion(-5,5,excl);
        if (distMap.find(val) == distMap.end()){
            distMap[val]=0;
        }
        int key = distMap[val]+1;
        distMap[val]=key;
    }
    map<int, int>::iterator p;
    for(p = distMap.begin(); p != distMap.end(); p++) {
        cout << p->first <<" occurs " <<p->second << endl;

    }

    cout << "seems legit: even distributed and correct" << endl;

    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-22T20:04:50.180

这个 c++ 函数应该处理这个任务：

```
int getRandomIntExcludingRange(int start, int end, int start_range, int end_range) {

    // handle bad input gracefully
    if (start > end) {
        std::swap(start, end);
    }
    if (start_range > end_range) {
        std::swap(start_range, end_range);
    }
    std::clamp(start_range, start, end);
    std::clamp(end_range, start, end);

    auto range_length = end_range - start_range;
    auto adj_end      = end - range_length;
    auto shifted_end  = adj_end - start;

    int rand_int = (rand() % shifted_end) + start;

    if (rand_int >= start_range) {
        rand_int = (rand_int - start_range) + end_range;
    }
    return rand_int;
} 
```

# sql - 选择以特殊字母开头的记录

> ID：14919825
> 
> 赞同：1
> 
> 时间：2013-02-17T09:46:19.510
> 
> 标签：sql, sql-server, tsql

想象一下，我有一个包含如下几条记录的表：

```
zare
azre
arze
arez 
```

我想找到包含`'z'`但如果我在这些记录中搜索的记录首先找到`'zare'`因为以开头`'z'`，第二次找到`'azre'`因为`z`是第二个字母等等

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T09:49:15.870

你可以试试这个：

```
SELECT *
FROM tbl
WHERE col LIKE '%z%'
ORDER BY CHARINDEX('z', col) 
```

# javascript - Cordova 2.3.0 DeviceReady 未在 Blacberry OS 5 及更高版本上触发

> ID：14919828
> 
> 赞同：0
> 
> 时间：2013-02-17T09:46:45.430
> 
> 标签：javascript, cordova

我通过 Android 调用了一个 DeviceReady 事件，它可以工作。在 Cordova-2.3.0.js 中添加了一个警报，它适用于 Android。它似乎在黑莓中不起作用。为什么会发生这种情况？我用的是黑莓9900。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:22:34.077

您是否使用与 Android 相同的 Cordova-2.3.0.js 文件？我在使用 Android/iOS 时遇到了同样的问题，因为操作系统之间的文件不同。我最终用 iOS 创建了一个新项目，将 js 文件复制到我的旧项目中，并在我的 js 文件夹中有两个不同的 Cordova 文件。

我用这个数字在它们之间切换：

```
<script type="text/javascript">
    var is_ios = ((/iphone|ipad/gi).test(navigator.appVersion));
    var is_android = ((/android/gi).test(navigator.appVersion));
    var is_blackberry = ((/blackberry/gi).test(navigator.appVersion));
    var scripts = new Array();
    if (is_ios) {
        scripts.push('cordova-2.2.0.ios.js');
        scripts.push('ios_plugins.js');
    } else if (is_android) {
        scripts.push('cordova-2.2.0.android.js');
        scripts.push('android_plugins.js');
    } else if (is_blackberry) {
        scripts.push('cordova-2.2.0.blackberry.js');
        scripts.push('blackberry_plugins.js');
    }
    for (var i = 0; i < scripts.length; i++)
        document.write('<script charset="utf-8" src="js/' + scripts[i] + '"><\/script>');           
</script> 
```

当然，我不确定添加黑莓是否会起作用……您可以试一试并根据需要进行调整。

# java - 对原始类型使用常量或枚举

> ID：14919829
> 
> 赞同：0
> 
> 时间：2013-02-17T09:46:55.600
> 
> 标签：java, enums, constants, primitive-types

如果我想询问原始类型名称，我想知道使用什么首选方法。我需要创建一个枚举类还是使用已经存在的一个（我搜索这个没有成功）

在这种情况下你有什么建议？

这是我的代码：

```
 else if (typeName.equals("char")) {
                return new SwitchInputType<Character>(new Character('z'));
            } else if (typeName.equals("decimal")
                    || (typeName.equals("java.math.BigDecimal"))) { 
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:57:29.577

您可以将变量转换为`Object`，然后`Class`像这样获取该对象的：

```
else if (((Object) typeName).getClass() == Character.class) {  
          return new SwitchInputType<Character>(new Character('z'));
}   
else if (typeName != null && ((Object) typeName).getClass() == BigDecimal.class) { 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-04T16:42:16.210

我不喜欢有很多 if-else 的代码。所以，这是我对同样问题的解决方案。

枚举类型：

```
public enum Types {
    BYTE,
    BOOLEAN,
    SHORT,
    CHAR,
    INT,
    FLOAT,
    LONG,
    DOUBLE,
    OBJECT;

    private static final String ALL_TYPES_STRING = Arrays.toString(Types.values());

    public static Types getType(Class<?> clazz) {
        String className = clazz.getSimpleName().toUpperCase();
        if (ALL_TYPES_STRING.contains(className)) {
            return Types.valueOf(className);
        } else {
            return Types.OBJECT;
        }
    }
} 
```

ReflectionHelper 的方法：

```
 public static void setFieldValue(Object object,
                                     String fieldName,
                                     String value) {
        try {
            Field field = object.getClass().getDeclaredField(fieldName);
            field.setAccessible(true);

            Types types = Types.getType(field.getType());
            switch (types) {
                case BYTE:
                    field.set(object, Byte.valueOf(value));
                    break;
                case BOOLEAN:
                    field.set(object, Boolean.valueOf(value));
                    break;
                case SHORT:
                    field.set(object, Short.valueOf(value));
                    break;
                case CHAR:
                    field.set(object, value.charAt(0));
                    break;
                case INT:
                    field.set(object, Integer.decode(value));
                    break;
                case FLOAT:
                    field.set(object, Float.valueOf(value));
                    break;
                case LONG:
                    field.set(object, Long.valueOf(value));
                    break;
                case DOUBLE:
                    field.set(object, Double.valueOf(value));
                    break;
                case OBJECT:
                default:
                    field.set(object, value);
            }

            field.setAccessible(false);
        } catch (SecurityException | NoSuchFieldException | IllegalArgumentException | IllegalAccessException e) {
            e.printStackTrace();
        }
    } 
```

# jpeg - 渐进式 JPEG 的完整缩略图需要多少字节？

> ID：14919839
> 
> 赞同：4
> 
> 时间：2013-02-17T09:47:37.333
> 
> 标签：jpeg, libjpeg, progressive

我正在尝试构建一个上传器，它分两步上传渐进式文件：

1.  上传最小字节数以创建缩略图 (0-10%)
2.  上传缩略图的其余字节。(11%-100%)

我想这样做是为了让缩略图更早可用，而不必上传单独的缩略图。拍摄一张创建的图像（3426398 字节），`jpegtran -copy all -progressive -outfile progressive.jpg original.jpg`然后拍摄前 350000 个字节，`dd if=progressive.jpg of=thumb.jpg bs=1 count=350000`我得到了一个可以工作的缩略图。

*   原文：[https ://dl.dropbox.com/u/5910/thumbtest/progressive.jpg](https://dl.dropbox.com/u/5910/thumbtest/progressive.jpg)
*   缩略图：[https ://dl.dropbox.com/u/5910/thumbtest/thumb.jpg](https://dl.dropbox.com/u/5910/thumbtest/thumb.jpg)

有没有办法找出我必须传输多少字节才能获得所有行都可用的图像？因此只会失去图像质量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T07:37:34.353

渐进式 JPEG 图像由一系列“扫描”组成。每次扫描都会为每个 MCU 模块提供更多信息（更多 A/C 系数）。第一次扫描通常只是每个 MCU 的 DC 值。这恰好是获得 1/8 大小的缩略图的完美信息量。

在 JPEG 文件中，每次扫描都以 FFDA 的 SOS（扫描开始）标记开始。为了知道完全保存第一次扫描需要多少数据，只需在文件数据中搜索第二次扫描的开始（第二个 FFDA 标记），您就会得到答案。由于标记字节规则，2 字节序列 FF DA 只能是 SOS 标记。需要对值 FF 后跟 DA 进行编码的压缩数据必须编码为 FF 00 DA。

# php - 关于服务器运行脚本的速度

> ID：14919849
> 
> 赞同：-1
> 
> 时间：2013-02-17T09:49:11.303
> 
> 标签：php, performance, web-applications, web-crawler, bandwidth

我的互联网连接速度很慢，比如 128k。如果我编写一个脚本，该脚本将从另一个网站获取 100 个页面，并使用 curl 或其他任何方式将其内容放入我的数据库中，那么需要很长时间才能获取所有 100 个页面。

```
$get = file_get_contents("www.google.com?search=something");
$res = pareser::parse()$get; 
foreach($res as $r )
{
    $db->insert($r['title']);
} 
```

但是如果我使用 AJAX 并向我的服务器发送 AJAX 请求来激活我的蜘蛛怎么办？我的服务器速度比我的客户端速度快得多，现在运行脚本的是服务器（至少我认为！）。为什么它在窃取这 100 页的速度上并没有太大的不同呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:54:06.057

1.  不，128K 是您的连接速度，您无法使用 PHP 使其更快
2.  您很快就会被谷歌禁止，并且将显示验证码而不是实际结果

# php - php 无法显示，因为它包含错误

> ID：14919854
> 
> 赞同：1
> 
> 时间：2013-02-17T09:49:32.090
> 
> 标签：php, image, gd, dynamic-image-generation

运行脚本时出现以下错误 `php cannot be displayed because it contains errors`

该脚本获取一个文件，调整其大小并将其输出到屏幕和一个文件。

url_example：`localhost/testimage.php?img=img_592_121_200.jpg`

我已经阅读了大多数帖子并尝试了建议的解决方案。全部失败

该文件不会输出到屏幕/浏览器，但可以保存到文件中。

这是代码，我去掉了所有的空白和空行。并在脚本中硬编码文件名

**我开始怀疑这是我的设置，但我什至不确定如何/从哪里开始寻找

编辑：简化为仅输出到屏幕

测试图像.php

```
<?php
//session_start();
//ob_start();
ini_set("display_errors", "1");
error_reporting(E_ALL); 
Header('Content-type:image/jpeg');
//$cacheFile="mypicXXX.jpg";
//$cache_dir="cache/1/592/";
$img_dir="webspace/1/592/";
$img="img_592_121.jpg";
$id="$img_dir$img";
$src=imagecreatefromjpeg($id);
$new_width=200;
$new_height=77;
$width=600;
$height=1001;
$w_src=600;
$h_src=1001;
$img=imagecreatetruecolor($new_width,$new_height);
imagecopyresampled($img,$src,0,0,0,0,$new_width,$new_height,$w_src,$h_src);
imagejpeg($img,NULL,45);
//$cacheFile=$cache_dir.$cacheFile;
//imagejpeg($img,$cacheFile,45); 
imagedestroy($src);
imagedestroy($img);
//ob_end_flush();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:51:23.607

固定的。修复（至少对我而言）是将文件保存为**"UTF-8 - NO NOM"**。在我将其命名为“UTF-8”之前

这整个文件格式让我迷失了，我需要在这些日子里阅读它

谢谢大家的帮助！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T10:04:54.650

您是否检查过在标头之前没有发送任何输出？您可以尝试几件事：

1.  将 header() 函数移到顶部。
2.  删除缓存（ob_start），看看你是否可以在没有它的情况下让它工作。
3.  当你使用 ob_start 时，我猜你也想使用 ob_end_flush(); 在最后？
4.  尝试使用 NULL 作为 imagejpeg() 的第二个参数来执行 RAW 输出而不是写入文件。（可能与写权限有关）

*更新* 您确定您检查了您指向的文件是否存在/或路径是否有效？这适用于我的本地主机，运行默认的 xamp 安装（PHP3.5.1）

```
ini_set("display_errors", "1");
error_reporting(E_ALL);
Header('Content-type:image/jpeg');
//$cacheFile="mypicXXX.jpg";
//$cache_dir="cache/1/592/";
$img_dir="webspace/1/592/";
$img="test.jpg";
$src=imagecreatefromjpeg($img);
$new_width=200;
$new_height=77;
$width=600;
$height=1001;
$w_src=600;
$h_src=1001;
$img=imagecreatetruecolor($new_width,$new_height);
imagecopyresampled($img,$src,0,0,0,0,$new_width,$new_height,$w_src,$h_src);
imagejpeg($img,NULL,45);
//$cacheFile=$cache_dir.$cacheFile;
//imagejpeg($img,$cacheFile,45);
imagedestroy($src);
imagedestroy($img); 
```

# c# - 如何将日期选择器与 datagridview 集成？

> ID：14919859
> 
> 赞同：0
> 
> 时间：2013-02-17T09:50:05.610
> 
> 标签：c#, sql, gridview

在我的应用程序中，我正在对员工进行查询，以了解每个人有多少订单。我想添加一个日期过滤器。所以我创建了两个日期时间选择器并为它们构建了一个函数。我应该在哪里以及如何在它们之间进行整合，或者我可以在查询中输入一些如何？

代码：

```
 private void Form3_Load(object sender, EventArgs e)
    {
        this.employeesTableAdapter.Fill(this.nORTHWNDDataSet.Employees);
        using (NorthWindDataContext db = new NorthWindDataContext())
        {
                var query =
                from d in db.Employees
                select new EmployeeData
        {
            FirstName = d.FirstName,
            EmployeeID = d.EmployeeID
        };
            dataGridView1.AutoGenerateColumns = false;
            dataGridView1.DataSource = query;
        }
    }

    public bool CheckDate(DateTime date)
    {
        DateTime floorDate = FromDate.Value;
        DateTime roofDate = ToDate.Value;

        if (date > floorDate && date < roofDate)
        {
            return true;
        }
        else
        {
            return false;
        }
    }

    private void displayOrdersToolStripMenuItem_Click(object sender, EventArgs e)
    {
        using (NorthWindDataContext db = new NorthWindDataContext())
        {
            if (db.Employees == null)
            {
            }
            EmployeeData currentEmployee = (EmployeeData)dataGridView1.SelectedRows[0].DataBoundItem;

            var query =
              from o in db.Employees
              where o.EmployeeID == currentEmployee.EmployeeID 
              select new
              {
                  orderNumber = o.Orders.Count()
              };

            dataGridView2.AutoGenerateColumns = false;
            dataGridView2.DataSource = query;
        } 
```

就像是

```
 where o.EmployeeID == currentEmployee.EmployeeID && o.Orders.Where(x=>x.OrderDate.Value.Date>FromDate.Value.Date&&<ToDate.Value.Date) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:57:23.000

可以对`DataGridViewColumn`和`DataGridViewCell`类进行子类化以托管您选择的任何控件。

MSDN 上的这篇文章更详细地解释了该过程，甚至包括一些示例代码：
[How to: Host Controls in Windows Forms DataGridView Cells](http://msdn.microsoft.com/en-us/library/7tas5c80.aspx)

您还可以在代码项目中找到完整示例：[Generic DataGridView V2.0](http://www.codeproject.com/KB/miscctrl/GenericDataGridView.aspx)

# php - 想要使用 Excel 二进制格式在 Excel 中添加工作表

> ID：14919860
> 
> 赞同：0
> 
> 时间：2013-02-17T09:50:10.837
> 
> 标签：php, export-to-excel, xls

我有以下代码片段取自[http://network.convergenceservices.in/forum/5-components/2191-export-excel-a-new-way.html](http://network.convergenceservices.in/forum/5-components/2191-export-excel-a-new-way.html)

```
function xlsBOF() {
            echo pack("ssssss", 0x809, 0x8, 0x0, 0x10, 0x0, 0x0);
            return;
        }
        function xlsEOF() {
            echo pack("ss", 0x0A, 0x00);
            return;
        }
        function xlsWriteNumber($Row, $Col, $Value) {
            echo pack("sssss", 0x203, 14, $Row, $Col, 0x0);
            echo pack("d", $Value);
            return;
        }
        function xlsWriteLabel($Row, $Col, $Value ) {
            $L = strlen($Value);
            echo pack("ssssss", 0x204, 8 + $L, $Row, $Col, 0x0, $L);
            echo $Value;
            return;
        }

    header("Pragma: public");
    header("Expires: 0");
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
    header("Content-Type: application/force-download");
    header("Content-Type: application/octet-stream");
    header("Content-Type: application/download");;
    header("Content-Disposition: attachment;filename=vandetailslist.xls ");
    header("Content-Transfer-Encoding: binary");

    xlsBOF();

    xlsWriteLabel(0,0,"Column 1");
    xlsWriteLabel(0,1,"Column 2");
    xlsWriteLabel(0,2,"Column 3");
    xlsWriteLabel(0,3,"Column 4");
    $xlsRow = 1;

    foreach($somearray as $value)
    {
        xlsWriteNumber($xlsRow,0,"{Column Value 1}");
        xlsWriteLabel($xlsRow,1,"{Column Value 2}");
        xlsWriteLabel($xlsRow,2,"{Column Value 3}");
        xlsWriteLabel($xlsRow,3,"{Column Value 4}");
        $xlsRow++;

    }
    xlsEOF();
    exit; 
```

问题是我只想在每张纸上添加 10 条记录，如果数据更多，我想添加一张新纸并开始在那里添加行。我无法找到添加新工作表的方法。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T07:32:51.187

没有一个简单的答案，因为您需要**更多**的代码，以及对 OLE2 和 Excel BIFF8 文件结构的良好理解......太多了，无法在此处提供快速答案。

您需要为每个工作表创建一个工作表流：我建议您使用现有的 PHP 库之一来处理电子表格，例如[PHPExcel或](http://www.phexcel.net)[此处](https://stackoverflow.com/questions/3930975/alternative-for-php-excel)列出的那些编写器之一

# javascript - 如何将 twitter 引导模式设置得更宽更高？

> ID：14919862
> 
> 赞同：38
> 
> 时间：2013-02-17T09:51:00.830
> 
> 标签：javascript, css, twitter-bootstrap, size, bootstrap-modal

如何将 twitter 引导模式设置得更宽更高？

此处示例（请点击：启动演示模式）：

[http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2014-03-11T18:07:37.057

在[Bootstrap 3.1.1](http://getbootstrap.com/javascript/#modals-sizes)中，他们添加了`modal-lg`和`modal-sm`类。您可以像他们一样使用查询来控制`modal`大小。`@media`这是一种更全局的控制`modal`大小的方式。

```
@media (min-width: 992px) {
    .modal-lg {
        width: 900px;
        height: 900px; /* control height here */
    }
} 
```

示例代码：

```
<!-- Large modal -->
<button class="btn btn-primary" data-toggle="modal" data-target=".bs-example-modal-lg">Large modal</button>

<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      ...
    </div>
  </div>
</div>

<!-- Small modal -->
<button class="btn btn-primary" data-toggle="modal" data-target=".bs-example-modal-sm">Small modal</button>

<div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      ...
    </div>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-02-17T09:58:12.233

如果您的模态 ID 是“myModal”

您可以尝试添加如下样式：

```
#myModal 
{
    width: 700px; 
    margin-top: -300px !important;
    margin-left:  -350px !important; 
} 

#myModal .modal-body {
    max-height: 525px;
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-01-23T18:59:56.270

最简单的方法是使用 .modal-lg。将它添加到模态容器中的模态对话框类，如下所示：

```
<div class="modal fade">
    <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                I am now wider!
            </div>
    </div>
</div> 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-05-06T23:38:42.507

对于以 % 为单位的大小，您可以这样做：

```
.modal-body
{
   max-height:80%;
}
.modal
{
   height:80%;
   width:70%;
   margin-left: -35%; 
}
@media (max-width: 768px) {
   .modal
   {
    width:90%;
        margin-left: 2%; 
   }
} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-02-15T21:02:04.417

改变类模型对话框对我有用

```
.modal-dialog {
    width: 90%;
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-02-17T10:00:05.030

在您的 css 文件中，添加一个新的类定义：

```
.higherWider {
    width:970px;
    margin-top:-250px;
} 
```

在您的 HTML 中，在`higherWider`您的模式的类字符串中添加：

```
<div class="modal hide fade higherWider"> 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-11-16T23:34:44.877

接受的答案效果很好，但是我建议使用填充而不是边距。这样，当您在模式对话框之外单击时，您可以保留关闭功能。

```
#myModal {
    width: 700px; 
    padding-top: -300px !important;
    padding-left: -350px !important; 
} 

#myModal .modal-body {
    max-height: 525px;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-07-06T19:25:37.540

CSS：

```
.modal-lg, .modal-sm {
    min-width: 90%;
} 
```

代码：

```
<!-- The Modal -->
<div class="modal fade" id="myModal">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">Modal Heading</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <!-- Modal body -->
            <div class="modal-body">
                Modal body..
            </div>

            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>

        </div>
    </div>
</div> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-17T09:59:20.927

使用 CSS：

```
.modal {
    width: 900px;
    margin-left: -450px; // half of the width
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-07-15T20:23:08.117

以下作品没有视口断点，也适用于较旧的引导模式：

```
#myModal{
   position: fixed;
   left: 10% !important;
   right: 10% !important;
   top: 10% !important;
   width: 80% !important;
   margin: 0 !important;
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2015-12-13T13:28:09.777

以下任一解决方案都对我有用：

1.  应用`style="width: 50%; height:50%;"`到`div`模态部分中的`class="modal-dialog"`类似这样

    ```
    <div class="modal-dialog" style="width: 50%; height:50%;"> 
    ```

    或者

2.  像这样创建样式部分

    ```
     #themodal .modal-dialog{ width:50%; height:50%;} 
    ```

# c++ - qVariantValue 是“QT_DEPRECATED”——替代品是什么？

> ID：14919867
> 
> 赞同：3
> 
> 时间：2013-02-17T09:51:23.283
> 
> 标签：c++, qt, qvariant

我需要将 Qt 遗留代码从 4 转换为 5.1 现在我在 Visual Studio 2010 中出现编译错误：

```
SingleItem* item = qVariantValue<SingleItem*>(index.data()); 
```

给我 ：

> .cpp(63)：错误 C2065：'qVariantValue'：未声明的标识符

当我转到标题时，我看到：

```
#if QT_DEPRECATED_SINCE(5, 0)
template<typename T>
inline QT_DEPRECATED T qVariantValue(const QVariant &variant)
{ return qvariant_cast<T>(variant); }

template<typename T>
inline QT_DEPRECATED bool qVariantCanConvert(const QVariant &variant)
{ return variant.template canConvert<T>(); }
#endif 
```

好的...那么替换是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T10:11:45.710

请参阅[兼容性说明](http://qt-project.org/doc/qt-5.0/qtcore/qvariant-compat.html)。

对于`qVariantValue`，请`QVariant::value<T>`改用。

```
index.data().value<SingleItem*>(); 
```

# parallel-processing - opencl 中的多个内核调用

> ID：14919868
> 
> 赞同：1
> 
> 时间：2013-02-17T09:51:36.603
> 
> 标签：parallel-processing, opencl

当使用 clSetKernelArg(memory_object) 设置内核参数并使用 clEnqueueNDKernelRangeKernel() 多次调用内核时，您之前在 clSetKernelArg() 中为内核设置的 memory_object 是否会从主机传输到 GPU，每次调用内核？

```
 status = clSetKernelArg(kernel, 0, sizeof(cl_mem), &inbuf);

    size_t num_total_wi = M * N;
    size_t num_wg = num_elem/N + ((num_elem/N == 0) ? 0 : 1); 
    size_t num_iter = num_elem/(num_total_wi) + (((num_elem % (num_total_wi)) == 0) ?     0 : 1); 
    for(i = 0; i < num_iter; i++) {
            size_t global_work_size[3] = {num_total_wi, 1, 1};    
            size_t local_ws[3] = {N, 1, 1}; 
            size_t global_offset[3] = {i * num_total_wi, 0, 0}; 

            clEnqueueNDRangeKernel(queue, kernel, 1, global_offset, global_work_size, local_ws, 0, NULL, NULL);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T13:16:17.870

内存传输由调用`clEnqueueWriteBuffer`or启动，`clEnqueueWriteImage`但很可能在`clEnqueueNDRangeKernel`被调用时启动。数据传输后，您可以根据需要多次重复使用内存对象，如果您不再次明确说明，它将不会再次传输。

# c++ - C++边界框三角形碰撞

> ID：14919878
> 
> 赞同：2
> 
> 时间：2013-02-17T09:53:57.967
> 
> 标签：c++, geometry, collision-detection, bounding-box

我需要一种算法来知道边界框轴是否对齐（如立方体，但边不相等）和三角形是否在 3D 空间中相交。

我正在用 C++ 编写代码，如果解决方案非常长，最好用 C++（如果可以的话）:)，如果它是几行代码，请不要担心它是否是另一种语言。

（判断一个三角形的顶点是否在盒子里面很容易，但判断盒子和三角形是否相交但所有顶点都在盒子和三角形外面并不容易。）

（在 3d 空间中矩形和三角形相交的算法也很好，我可以将边界框划分为 6 个平面）

# ruby-on-rails - 待办事项列表中的模型关联与可共享的列表项

> ID：14919884
> 
> 赞同：0
> 
> 时间：2013-02-17T09:54:34.060
> 
> 标签：ruby-on-rails, model, associations

即使在阅读了[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)和一些类似的问题之后，我仍然无法想象我需要包括哪些关联。

这是我到目前为止所拥有的：

**用户**：

```
has_one :list 
```

**清单**：

```
belongs_to :user  
has_many :list_items 
```

**列表项**：

```
belongs_to :list 
```

问题是我需要具有允许用户查看其他人的列表并将他们的任何 list_items 添加到他/她自己的列表的功能。意思是 list_item 可以`belong_to_many :lists`。

我是否需要另一种模式来促进`has_many :through`关系，还是我想多了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T10:22:54.727

是的，你想多了。你不需要`has_many :through`。如果`user`只有一个`list`。他可以简单地`list_item`添加`list`。为什么需要`has_many :through`。

向用户添加`list_item`：

```
 def add_list_item_to_user(user, list_item)
    user.list.list_items << list_item
  end 
```

就是这样。

如果您想访问`list_items`使用`user`，您可以执行以下操作：

用户型号：

```
 has_many :list_items, :through => :list 
```

形成这个你可以`list_items`访问`user`

```
 user.list_items
   user.list_items << list_item 
```

你们有`has_one`亲戚关系，我想你们不用太担心`through`。如果你真的想用你可以做到。

# php - 具有登录状态的 js 对象与仅服务器端会话

> ID：14919887
> 
> 赞同：0
> 
> 时间：2013-02-17T09:54:48.053
> 
> 标签：php, javascript, session, session-cookies, session-state

有一个 js 对象与服务器会话中的重复数据是否很常见？

例如，如果用户登录，我将此服务器端存储在我的`$_SESSION`. 但是当我在客户端时，如果不检查 DOM 的某些部分（这很糟糕），或者发送一些 Ajax 调用来检查`$_SESSION`. 我应该只创建一个包含重复数据的 js 对象吗？

似乎是个坏主意，因为现在我总是需要使两个对象保持同步，但我不确定如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T10:11:28.433

您可以在浏览器加载时将几行 Javascript 回显到浏览器中，或者在需要 $_SESSION 变量时提取一个单独的脚本。因此，您可以有一个文件“session.php”，其中仅包含以下行：

```
<?php
    session_start();
    echo json_encode($_SESSION);
?> 
```

然后你可以在你的 Javascript/HTML 中使用它（这样你就不必做花哨的 AJAX 或任何东西）：

```
var session = <?php include('session.php'); ?> 
```

我在这里建立了一个实时示例：http: [//home.edgemontgeek.com/dev/stackoverflow/14919887/](http://home.edgemontgeek.com/dev/stackoverflow/14919887/) 可在此处下载代码：http: [//home.edgemontgeek.com/dev/stackoverflow/14919887/code 。压缩](http://home.edgemontgeek.com/dev/stackoverflow/14919887/code.zip)

请记住，您需要使它们保持同步，如果您希望它们在页面加载之间进行更改，则必须查看 AJAX 和 json_decode。

# java - 如何在java中显示String []选项

> ID：14919891
> 
> 赞同：-5
> 
> 时间：2013-02-17T09:55:17.390
> 
> 标签：java

```
String[] options = { "3 km/hr", "5 km/hr", "8 km/hr", "9 km/hr" }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:58:25.157

您可以迭代数组并自己“显示”每个元素，也可以使用`Arrays.toString(options)`它来创建格式良好的字符串表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T10:02:05.890

如果您想知道如何打印这些值，您可以尝试：

```
 String[] options = { "3 km/hr", "5 km/hr", "8 km/hr", "9 km/hr" };
    System.out.println(Arrays.toString(options));
    --> the output would be: [3 km/hr, 5 km/hr, 8 km/hr, 9 km/hr] 
```

或者你可以手动完成，使用：

```
 for (String option : options) {
        System.out.println(option);
    }
    --> the output would be:
    3 km/hr
    5 km/hr
    ...etc 
```

# jquery - $.getScript，但是对于 jQuery 中的样式表？

> ID：14919894
> 
> 赞同：31
> 
> 时间：2013-02-17T09:55:54.160
> 
> 标签：jquery, css, load, stylesheet

jQuery 中是否有`$.getScript`等价物，但用于加载样式表？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-17T10:00:46.407

CSS 不是脚本，因此您不必在脚本执行的意义上“执行”它。

基本上一个`<link>`动态创建并附加到标题的标签就足够了，比如

```
$('<link/>', {
   rel: 'stylesheet',
   type: 'text/css',
   href: 'path_to_the.css'
}).appendTo('head'); 
```

或者

```
var linkElem = document.createElement('link');
document.getElementsByTagName('head')[0].appendChild(linkElem);
linkElem.rel = 'stylesheet';
linkElem.type = 'text/css';
linkElem.href = 'path_to_the.css'; 
```

如果你想在没有 jQuery 的情况下做到这一点。

浏览器将响应 DOM 中的更改并相应地更新您的页面布局。

* * *

**编辑**：

我已经读过旧的 Internet Explorer 对此有问题，您可能需要像在回答中那样做才能使其工作：

[https://stackoverflow.com/a/2685639/618206](https://stackoverflow.com/a/2685639/618206)

* * *

**编辑2**：

读取文件内容并将其内联（在`<style>`标签之间）也是一个有效的解决方案，但这样 CSS 将不会被浏览器缓存。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-03T21:15:29.133

我创建了一个`$.getScript`处理样式表的替代方案。出于显而易见的原因，我将其称为[$.getStylesheet 。](https://gist.github.com/james2doyle/9456c3e145f8d0afbe25)

它实现了`$.Deferred`对象，这意味着您可以像这样链接事物：

```
$.when($.getStylesheet('css/main.css'), $.getScript('js/main.js'))
.then(function () {
  console.log('the css and js loaded successfully and are both ready');
}, function () {
  console.log('an error occurred somewhere');
}); 
```

这是[$.getStylesheet](https://gist.github.com/james2doyle/9456c3e145f8d0afbe25)的小功能。它只是托管在 Github gist 上，所以如果需要，我可以更新它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T10:01:41.047

您可以使用相同的方法 $.getScript 来“下载”样式表，因为 $.getScript 实际上只是另一个 HTTP 请求。但它会有点连线，因为 css 是不可执行的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-15T11:09:51.150

这是一个函数，它将加载带有成功或失败回调的 CSS 文件。我认为这种方法比公认的答案更好，因为使用 HREF 将元素插入 DOM 会导致额外的浏览器请求（尽管请求可能来自缓存，具体取决于响应标头）。

```
function loadCssFiles(urls, successCallback, failureCallback) {

    $.when.apply($,
        $.map(urls, function(url) {
            return $.get(url, function(css) {
                $("<style>" + css + "</style>").appendTo("head");
            });
        })
    ).then(function() {
        if (typeof successCallback === 'function') successCallback();
    }).fail(function() {
        if (typeof failureCallback === 'function') failureCallback();
    });

} 
```

用法如下：

```
loadCssFiles(["https://test.com/style1.css", "https://test.com/style2.css",],
    function() {
    alert("All resources loaded");
}, function() {
    alert("One or more resources failed to load");
}); 
```

这是另一个同时加载 CSS**和**javascript 文件的函数：

```
function loadJavascriptAndCssFiles(urls, successCallback, failureCallback) {

    $.when.apply($,
        $.map(urls, function(url) {
            if(url.endsWith(".css")) {
                return $.get(url, function(css) {
                    $("<style>" + css + "</style>").appendTo("head");
                });
            } else {
                return $.getScript(url);
            }
        })
    ).then(function() {
        if (typeof successCallback === 'function') successCallback();
    }).fail(function() {
        if (typeof failureCallback === 'function') failureCallback();
    });

} 
```

# android - Android-Phonegap-MySql 同步

> ID：14919895
> 
> 赞同：0
> 
> 时间：2013-02-17T09:56:28.093
> 
> 标签：android, mysql, database, cordova, synchronization

我想开发一个与 mysql 数据库（服务器-客户端和客户端-服务器）双向同步的 Android-Phonegap 应用程序。
哪种方法最好，你知道一些例子或好的教程吗？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T06:20:00.570

我自己也做过这种事情。我使用 JSONP 将数据从我的应用程序发送/接收到托管在我的服务器上的 PHP 文件。如果应用内数据库发生变化，您可以使用 AJAX 将其传播到服务器。

现在对于服务器上数据库的更改，一旦发生更改，您可以在服务器端设置一个标志，并让您的应用程序定期检查是否有任何更新并使用 JSON 调用同步您的应用程序。这可能是一种简单的方法，但如果您正在寻找实时推送通知，您可以考虑查看以下内容：

1.  [http://www.adobe.com/devnet/phonegap/articles/android-push-notifications-with-phonegap.html](http://www.adobe.com/devnet/phonegap/articles/android-push-notifications-with-phonegap.html)
2.  [https://stackoverflow.com/questions/9464500/phonegap-push-notification-for-android](https://stackoverflow.com/questions/9464500/phonegap-push-notification-for-android)

# git - facebook 应用程序在克隆代码时显示错误

> ID：14919896
> 
> 赞同：1
> 
> 时间：2013-02-17T09:56:34.937
> 
> 标签：git, heroku, facebook-apps

我正在创建我的第一个 facebook 应用程序，并且我第一次使用这个 Heroku（用于托管我的应用程序），因为我按照[https://devcenter.heroku.com/articles/facebook](https://devcenter.heroku.com/articles/facebook)中提供的程序进行操作。在尝试获取我的应用程序的源代码时，说明中的第一步显示

```
ssh:connect to host heroku.com port 22: Bad file number  
fatal: The remote end hung up unexpectedly 
```

我是网络和 facebook 应用程序的新手，请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:03:55.280

该`Bad file number`错误表明您在代理后面，或者连接被其他方式阻止。看看这两个问题：

*   [Git SSH 错误：“连接到主机：错误的文件号”](https://stackoverflow.com/questions/7144811/git-ssh-error-connect-to-host-bad-file-number)
*   [从工作推送到 github “错误的文件号”错误](https://stackoverflow.com/questions/4399106/pushing-to-github-from-work-bad-file-number-error)

# opencv - 使用鼠标回调打印坐标和像素值

> ID：14919897
> 
> 赞同：6
> 
> 时间：2013-02-17T09:56:43.570
> 
> 标签：opencv, mouseevent, cout, mat

这是我尝试过的代码，**只打印坐标值而不打印像素值。**

```
#include <iostream>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>

void onMouse( int event, int x, int y, int, void* );
using namespace cv;

Mat img = cv::imread("b.jpg", 0); // force grayscale
Mat thresh=Mat::zeros(img.size(),CV_8UC1);

int main(int argc, char **argv)
{

    if(!img.data) {
        std::cout << "File not found" << std::endl;
        return -1;
    }

   threshold(img,binary,50,255,THRESH_TOZERO);  

   namedWindow("thresh");
   setMouseCallback( "thresh", onMouse, 0 );

   imshow("thresh",thresh);
}

void onMouse( int event, int x, int y, int, void* )
{
    if( event != CV_EVENT_LBUTTONDOWN )
            return;

    Point pt = Point(x,y);
    std::cout<<"x="<<pt.x<<"\t y="<<pt.y<<"\t value="<<thresh.at<uchar>(x,y)<<"\n";

} 
```

我得到的**输出**为： -

![截屏](../Images/0ca10781ae9e5051219b603f6138e18e.png)

坐标值已打印，但像素值未正确打印。我犯了什么错误？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T10:26:50.847

cout 将 uchar 打印为字符，就像您看到的那样。

只需将它们包装为 int 即可进行打印：

```
cout << int( thresh.at<uchar>(y,x) )

also note, that it's at<uchar>(y,x), not x,y 
```

# capybara - 水豚找不到选择选项

> ID：14919900
> 
> 赞同：1
> 
> 时间：2013-02-17T09:57:06.007
> 
> 标签：capybara, capybara-webkit

我正在从远程主机上进行一些抓取，使用 Capybara 和 Webkit 驱动程序（驱动使用 JS 的表单）。

表格在[这里](http://www.assemblee-afe.fr/annuaire-des-membres)。

问题是我无法通过文本选择选项，Capybara 说它找不到它们。例如：

```
select("AICARDI René", from: "nom_message_annuaire")
Capybara::ElementNotFound: Unable to find option "AICARDI René" 
```

该选项存在。是什么赋予了？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T10:15:22.923

问题在于`&nbsp;`选项文本的内部。

我解决了它：

```
select(Nokogiri::HTML("AICARDI&nbsp;Réné").text, from: "nom_message_annuaire") 
```

# php - 更新查询运行但不更新表php

> ID：14919905
> 
> 赞同：0
> 
> 时间：2013-02-17T09:57:49.133
> 
> 标签：php, mysql, sql-update

这是我使用 for 循环运行 10 次的代码：

```
$query = "UPDATE fblikes SET likes = '$var[$i]' WHERE link = '$web[$i]'";

if(mysql_query($query))
{
    echo $query;
}                         
else
{
    echo mysql_error();
} 
```

代码运行，我确实`ok!`打印了 10 次，但表中没有任何反应。我还检查了 2 个数组，即`$var`和`$web`​​ ，它们包含正确的值。

查询对我来说看起来不错。这是我得到的（10 个输出之一）：`UPDATE fblikes SET likes = '5' WHERE link = 'xxxxxxx.com/xxxx/iet.php';`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T10:06:49.967

我不知道问题到底是什么，要弄清楚你应该打印 的值`$query`，并向我们展示你得到了什么。更多，请告诉我们`mysql_affected_rows()`调用后的价值`mysql_query()`。

但是，您的代码实现了一些错误的模式。

首先，你没有逃跑`$var[$i]`并且`$web[$i]`有两个潜在的影响：

*   您可能会产生错误的查询
*   您不会清理数据库的输入，从而使您的应用程序面临安全问题

此外，您执行了几个类似的查询，这些查询仅在所提供的输入上有所不同。

对于这两个问题，解决方案是使用准备好的语句，这将为您提供更多的控制、安全性和性能。考虑放弃`mysql_*`函数并切换到`mysqli_*`or `PDO`，并阅读[准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)。

# java - IE 不支持通过 JSF Trinidad 的 SVG 查看器

> ID：14919906
> 
> 赞同：1
> 
> 时间：2013-02-17T09:58:06.217
> 
> 标签：java, jsf, svg, adobe, trinidad

当使用`<tr:chart>`Trinidad lib 中的组件时，在 Explorer 中使用它会出现问题，因为它没有内置对 SVG 查看器的支持。

特立尼达有硬编码的 url，以防打开 SVG 查看器的 adobe 页面出现错误。问题是它的链接没有更新，因为 adobe 中没有 SVG 安装。

我们需要提供不同的链接。我们如何覆盖这个 URL？

有没有更好的解决方案？

Adobe 已决定于2009 年 1 月 1 日[停止支持 SVG 查看器。](http://www.adobe.com/devnet/svg/adobe-svg-viewer-eol.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:32:37.887

曾经考虑过在您的 Trinidad 项目中使用[Highcharts](http://www.highcharts.com/)生成图表吗？我们这样做了，它就像一个魅力！它不在旧版本的 Internet Explorer 上使用 SVG；请参阅[Highcharts 兼容性文档](http://www.highcharts.com/documentation/compatibility)。此外，Highcharts 有更多的可能性来生成图表并添加交互性[`<tr:chart>`](http://myfaces.apache.org/trinidad/trinidad-api/tagdoc/tr_chart.html)。实际上，[它的可能性](http://example.irian.at/trinidad-components-showcase/component-demo/chart-VerticalBar)`<tr:chart>`是有限的。

缺点是您没有可以使用的 JSF 组件。创建静态图很容易，但您可能需要编写几行代码来将数据传递给 Highcharts Javascript 以使事情变得更有趣。特立尼达[`ExtendedRenderKitService`](http://myfaces.apache.org/trinidad/trinidad-api/apidocs/org/apache/myfaces/trinidad/render/ExtendedRenderKitService.html)在那里派上用场：

```
ExtendedRenderKitService service = 
  Service.getRenderKitService(facesContext, ExtendedRenderKitService.class);
service.addScript(facesContext, "alert('foo');"); 
```

# windows-store - 提交申请 Windos Store 404 not found logo

> ID：14919907
> 
> 赞同：0
> 
> 时间：2013-02-17T09:58:06.777
> 
> 标签：windows-store

我已经为 Windows Store 开发了一个应用程序，但是当我按下审核按钮时，它不显示我的徽标（404 Not Found）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:45:51.417

最近，当我上传/认证我的第一个 Windows 应用商店应用程序时，我遇到了同样的问题。我与 Windows 代表讨论了这个问题，他们表示可能需要 24 到 48 小时才能显示图像。

如果两天后图像仍有问题，请联系[Microsoft 支持](http://msdn.microsoft.com/en-US/windows/apps/hh690938)

# android - 构建灵活的 GUI

> ID：14919908
> 
> 赞同：1
> 
> 时间：2013-02-17T09:58:09.467
> 
> 标签：android, xml, user-interface, runtime

我有一个布局，我想用由 2 个文本视图和一个按钮组成的项目来填充。我事先不知道有多少项目会填充我的布局。由于我在编写 layout.xml 时不知道要添加多少项目，这意味着我必须在 java 而不是 xml 中添加项目。但我不喜欢用 java 构建 GUI，因为它看起来很丑。

有谁知道我是否可以为我的项目创建一个 xml 文件，然后在执行期间将新项目添加到我的布局中？

我编写了一些伪代码来尝试演示我想要完成的任务：

主布局.xml

```
//My empty Layout
<Layout myMainLayout >
</RelativeLayout> 
```

Fragment_post.xml

```
//one post
<TextView/>
<TextView/>
<Button/> 
```

在某处的代码中

```
setContentView(R.layout.MainLayout);
MyMainLayout.addFragment(R.layout.Fragment_post); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T10:30:18.580

您可以在任何地方添加您的 fragment_post.xml：

```
LayoutInflater inflater=(LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
LinearLayout view=(LinearLayout)inflater.inflate(R.layout.yourfragment, null);
yourLayout.addView(view); 
```

请不要将 Fragment 与 GUI 的一部分混淆。详见此处：http: [//developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T10:37:42.280

你当然可以做到这一点。只需为您的活动设置一个初始空布局。

```
onCreate()
{
setContentView(R.layout.initial_layout);
} 
```

然后获取并保留对主布局的引用。

```
LayoutInflater inflater =(LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
RelativeLayout mainLayout=(RelativeLayout)inflater.inflate(R.layout.initial_layout, null); 
```

接下来，在需要时将新视图添加到您的布局中。

```
LinearLayout view=(LinearLayout)inflater.inflate(R.layout.fragment_post, null);
mainLayout.addView(view); 
```

但是请注意，您在这里所说的片段并不是android所说的片段。在此处了解实际的 android 片段：

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

# php - 在 Codeigniter 中查询结果为空

> ID：14919911
> 
> 赞同：1
> 
> 时间：2013-02-17T09:58:12.050
> 
> 标签：php, sql, codeigniter

我有一段用 Codeigniter 框架编写的 PHP 代码，它什么都不返回（一个空集）。看看它，告诉我它有什么问题。

```
function sbsn($serial){
    $this->db->select('asset_types.name as type_name,asset_brands.name as brand_name');
    $this->db->from('asset_types,asset_brands,assets');
    $this->db->where('assets.type_code','asset_types.code');
    $this->db->where('assets.brand_code','asset_brands.code');
    $this->db->where('serial_no',$serial); 
    $result = $this->db->get();
    return $result;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T10:10:39.057

嗨，db get 你只得到结果集而不是记录从结果中得到结果你必须做以下事情

```
$this->db->get()->result(); // will return an array of objects
$this->db->get()->result_array(); //will return result in pure array
$this->db->get()->row() // just single row as object
$this->db->get()->row_array() // just single row as array

you can use $result to perform the same above things
$result->result();
$result->row(); 
```

有关更多信息，请阅读生成结果[用户指南](http://ellislab.com/codeigniter/user-guide/database/results.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T10:09:32.007

改变：

```
$result = $this->db->get(); 
```

到

```
$result = $this->db->get()->row_array();  //to get single row
//OR
$result = $this->db->get()->result_array();  //to get multiple rows 
```

或尝试使用 JOIN，例如

```
$this->db->select('asset_types.name as type_name,asset_brands.name as brand_name');
$this->db->from('assets');
$this->db->join('asset_types', 'asset_types.code = assets.type_code', 'left');
$this->db->join('asset_brands', 'asset_brands.code = assets.brand_code', 'left');
$this->db->where('assets.serial_no',$serial); 
$result = $this->db->get()->result_array();
return $result; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T07:03:47.340

通过以下方式连接表可以轻松解决该问题。

```
$this->db->select('at.name as type_name,ab.name as brand_name');
$this->db->from('asset_types as at,asset_brands as ab');
$this->db->join('assets as a', 'a.type_code = at.code and a.brand_code as ab.code');
$this->db->where('a.serial_no',$serial); 
$result = $this->db->get()->result_array();
return $result; 
```

# .net - 在哪里存储组件 DLL？

> ID：14919915
> 
> 赞同：1
> 
> 时间：2013-02-17T09:59:02.487
> 
> 标签：.net, web-applications, dll, class-library, bin

我目前正在将 VB.NET 网站迁移到 VB.NET Web 应用程序。以前我会将所有组件 DLL（第 3 方类库）存储在 bin 文件夹中，它们会在运行时进行编译。我已经在我的新应用程序中手动添加了对 DLL 的引用，但是 bin 文件夹是存储这些附加 DLL 的理想位置吗？这是否被认为是最佳实践，当我创建新版本时它会干扰应用程序生成的 DLL 吗？

抱歉，如果这是一个非常基本的问题，我对 Visual Studio 中的 Web 应用程序概念不熟悉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:10:39.153

作为一般规则，我从不直接将任何东西放在 bin 文件夹中。我总是允许构建过程将 dll 或其他文件复制到 bin 文件夹中。

如果添加引用，并确保“本地复制”设置为 true，则 dll 将在构建期间被复制。这有许多优点，尤其是在使用版本控制时。

至于你应该把这些文件放在哪里，我通常在解决方案级别创建一个文件夹并将 dll 放在那里，然后我将它们作为该位置的引用添加。这使它们可以轻松地检查到版本控制中（并像许多版本控制系统一样标记为只读）。

将文件检入 bin 文件夹中的版本控制时，您会遇到很多问题。另一个问题是当您需要“清理” bin 文件夹时，其中的文件可能会导致问题。如果您使用我描述的方法，您可以随时删除 bin 文件夹中的所有文件。

更好的方法是使用 NuGet 包。如果所需文件不属于现有 NuGet 包，则可以创建自己的文件并运行自己的本地 NuGet 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T10:02:57.153

不，它不会干扰应用程序生成的 dll。

如果这些是您在很多应用程序中使用的 dll，您可以考虑在 GAC 中注册它们。

将它们放在 bin 中可以轻松部署（只需复制 Web 应用程序文件夹），如果您处于无法在 GAC 中安装 dll 的共享托管环境中，这可能是您唯一的选择

# jquery - 设置选择属性时无法取消选择选定元素

> ID：14919921
> 
> 赞同：0
> 
> 时间：2013-02-17T09:59:24.963
> 
> 标签：jquery, html, html-select

您好有一个下拉列表，其中填充了数据库中的数据。

```
<select name="form[entities][]" multiple="true">
        {% for entity in entities %}
            {% if entity.selected %}

            <option value="{{ entity.id }}" selected="selected">
                 {{ entity.name }}
            </option>

            {% else %}

            <option value="{{ entity.id }}">{{ entity.name }}</option>

            {% endif %}
        {% endfor %}
</select> 
```

如果一个实体之前被选中，它将被渲染为选中。

我可以切换选择，这意味着我可以选择另一个实体，而前一个实体将被取消选择。但是例如，如果只有一个项目并且它被选中，则无法取消选择它只是保持选中状态。

所以我的问题是，这是正常的行为吗？该字段不是必需的。有没有办法只使用 html 来处理取消选择，还是我必须引入另一个按钮并使用 javascript 处理取消选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:53:37.143

有几个可能的答案

*   向用户显示以使用 CTRL 取消选择最后选择的选项
*   添加一个空白选项
*   用 jquery 处理取消选择

# javascript - 选择 onChange 在表单中不起作用

> ID：14919922
> 
> 赞同：9
> 
> 时间：2013-02-17T09:59:43.203
> 
> 标签：javascript, forms, select, option, onchange

我有一个关于表单提交和 onchange 事件不能一起工作的问题。当我更改下拉列表中的值时，事件 viewroom() 没有触发。谁能帮我解决这个问题？代码如下

```
<script type="text/javascript">
function viewroom()
{
    alert(123);
}
</script>

<form id="myform" name="myform" action="joinroom.php" method="post">
<select name="viewroom" id="viewroom" onChange="viewroom()">
    <option value="1">Room1 </option>
    <option value="2">Room2 </option>
</select>
<input type="submit" onclick="this.form.submit()" value="Join room"><br>
</form> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-17T10:05:10.607

您的函数名称与`name`和冲突，只需给函数取另一个名称`id`。`select`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T10:06:06.203

您不能将函数命名为与页面上的元素相同的名称。我建议将函数名称更改为类似于[此 jsFiddle](http://jsfiddle.net/amullins/v5XFN/1/)`viewroomSelected`中所示的名称。

相关变化：

```
function viewroomSelected()
{
  alert(123);
}

<select name="viewroom" id="viewroom" onChange="viewroomSelected()"> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T10:12:27.747

我发现由于您设置`name`和`id`属性相同的函数名称导致此冲突并提示错误`viewroom`不是函数，请更改函数名称。还在文档底部定义您的 js。

```
function viewRoom()
{
    alert(123);
} 
```

[工作演示](http://jsfiddle.net/8T8pf/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-12T15:31:38.010

改变

```
<select name="viewroom" id="viewroom" onChange="viewroom()"> 
```

至

```
<select name="viewroom" id="viewroom" onChange="()=>viewroom()"> 
```

# android - TextView：如何在选择时设置图像

> ID：14919929
> 
> 赞同：0
> 
> 时间：2013-02-17T10:01:25.360
> 
> 标签：android

我正在使用文本视图：

```
 <TextView
     android:id="@+id/textView_setup_menu_msa"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignLeft="@+id/textView_member_menu_msa"
     android:layout_below="@+id/textView_event_menu_msa"
     android:layout_marginTop="38dp"
     android:text="@string/string_setup_menu_msa"
     android:textColor="#000000"
     android:textSize="8pt" 
     android:onClick="onCLick"
     android:clickable="true"
     android:background="@drawable/textview_selector"/> 
```

我想在单击像 listview 这样的 textview 时设置选择器图像，我已经这样做了：在 res/drawable/textview_selector.xml 中，

```
 <selector xmlns:android="http://schemas.android.com/apk/res/android" >
      <item android:state_enabled="true"
         android:state_pressed="true" 
         android:drawable="@drawable/selectioncell" />
      <item 
         android:state_enabled="true"
         android:state_focused="true" 
         android:drawable="@drawable/selectioncell" />

      <item android:state_enabled="true"
         android:state_selected="true" 
         android:drawable= "@drawable/selectioncell" /> 
   </selector> 
```

这里的“selectioncell”是一个图像。但是我在选择 textview 时没有得到正确大小的图像。我希望不仅选择文本视图，还选择完整的单元格。有没有办法像listview一样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T10:14:57.267

如果 textview_selector.xml 设置为 TextView，则不能这样做，而不是为您的 ImageView。将该选择器设置为您的 ImageView 并在您的 TextView onClickListener 中调用 yourimageview.performClick()。这可能会有所帮助。

# ruby-on-rails - 我的 RSpec 电子邮件唯一性测试中发生了什么黑魔法？

> ID：14919930
> 
> 赞同：0
> 
> 时间：2013-02-17T10:01:27.680
> 
> 标签：ruby-on-rails, ruby, capybara, unique, rspec2

我按照[Michael Hartl 的 The Ruby on Rails Tutorial Book 进行了](http://ruby.railstutorial.org/chapters/modeling-users#sec-uniqueness_validation)修改，添加了用于用户身份验证的设计，并遇到了电子邮件唯一性测试的问题。

```
# spec/models/user_spec.rb

require 'spec_helper'

describe User do
  before do
    @user = User.new(username: 'ExampleUser',
                     email:    'user@example.com',
                     password: 'passworD123')
    @user.save
  end

  subject { @user }

  it { should respond_to(:email) }
  it { should respond_to(:name) }
  it { should respond_to(:username) }
  it { should respond_to(:password) }

  it { should be_valid }

  describe 'username is already taken' do
    before do
      user_with_same_username = @user.dup
      user_with_same_username.username = @user.username.upcase
      user_with_same_username.email = 'a@b.c'
      user_with_same_username.save
    end

    it { should_not be_valid }
  end

  describe 'email address is already taken' do
    before do
      user_with_same_email = @user.dup
      user_with_same_email.username = 'differentUsername'
      user_with_same_email.email = @user.email.upcase
      user_with_same_email.save
    end

    it { should_not be_valid }
  end

  .
  . 
```

失败：

```
 1) User email address is already taken
     Failure/Error: it { should_not be_valid }
       expected valid? to return false, got true
     # ./spec/models/user_spec.rb:104:in `block (3 levels) in <top (required)>' 
```

电子邮件的唯一性已设置，尽管不需要，因为 Devise 已经这样做了。我更改`user_with_same_email.save`为`user_with_same_email.save!`，然后我收到了电子邮件地址的验证错误，因为它已经被占用：

```
1) User email address is already taken
   Failure/Error: user_with_same_email.save!
   ActiveRecord::RecordInvalid:
     Validation failed: Email has already been taken
   # ./spec/models/user_spec.rb:101:in `block (3 levels) in <top (required)>' 
```

的返回值为`user_with_same_email.save`false 并`it { should_not be_valid }`检查这种情况，但为什么测试仍然失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T10:10:44.227

关于您的实际问题，原因很简单：您没有测试正确的`subject`

其他指南：

*   如果您知道对象无效，请不要保存它，您只是在浪费时间。

*   与您的第一个规格相同，您真的需要一个持久对象吗？我猜不会..

*   最后但同样重要的是：考虑使用工厂，它是可重用的，并且可以让您进行更一致的测试。

这是您的规格可能的样子：

```
require 'spec_helper'

describe User do
  let(:user_attributes) { {
      username: 'ExampleUser',
      email:    'user@example.com',
      password: 'passworD123'
    }
  }

  subject(:user) { User.new(user_attributes) }

  it { should respond_to(:email) }
  it { should respond_to(:name) }
  it { should respond_to(:username) }
  it { should respond_to(:password) }
  it { should be_valid }

  context 'with existing user in db' do
    before(:each) { user.save }

    describe 'username is already taken' do
      subject(:user_with_same_username) { User.new(user_attributes.merge(email: 'another@email.com')) }
      it { should_not be_valid }
    end

    describe 'email address is already taken' do
       subject(:user_with_same_email) { User.new(user_attributes.merge(username: 'another name')) }
       it { should_not be_valid }
    end
  end
end 
```

# php - 了解 OuterIterator 接口 PHP

> ID：14919932
> 
> 赞同：5
> 
> 时间：2013-02-17T10:01:40.040
> 
> 标签：php, iterator, spl

我正在尝试`OuterIterator`在我的类上实现接口，但我不确定在方法中使用什么`getInnerIterator`。我知道它应该返回一个 Iterator 但我不明白在什么情况下它应该返回 an`InnerIterator`尽管它已经拥有 Iterator 接口的所有方法，那么为什么它需要一个`InnerIterator`？

我完全迷失了`OuterIterator`

```
class myouterIterator implements OuterIterator 
{
    /**
    * Returns the inner Iterator for the current entry
    */
    public $data = array(1,2,3,4,5,6,7,8,9,10);
    public $position = 0;
    public function getInnerIterator()
    {
        // What code should be place here
    }
    public function rewind()
    {
        $this->position = 0;
    }
    public function valid()
    {
        return isset($this->data[$this->position]);
    }
    public function key()
    {
        return $this->position;
    }
    public function current()
    {
        return $this->data[$this->position];
    }
    public function next()
    {
        ++$this->position;
    }
}   

$OuterIt = new myouterIterator();
foreach($OuterIt as $key => $value)
{
    echo $key, ' ', $value, '<br>';

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T10:23:44.173

为什么要实施`OuterIterator`？它旨在“迭代迭代器”，但您的示例只是迭代标量值，为每个迭代器设置一个迭代器是没有意义的。

如果您想查看`OuterIterator`接口的实际示例，请查看[`AppendIterator`](http://php.net/manual/en/class.appenditerator.php)，它连续迭代多个迭代器。

# c++ - 处理多个灯光和 GLSL 着色器程序

> ID：14919934
> 
> 赞同：1
> 
> 时间：2013-02-17T10:01:41.723
> 
> 标签：c++, opengl, glsl

我有一个点光阴影贴图程序，但对如何控制多光场景有点迷茫。如何设置多个灯光，每个灯光都有自己的“深度纹理”吗？如果是这样，它们如何组合以最终渲染场景（显然，并非所有灯光都会一直处于活动状态）？

当考虑到这一点时，拥有单独的（小）深度立方体贴图似乎更合乎逻辑，而不是用于整个场景（尤其是用于近距离关卡而不是开放景观），但是实现这样一个系统只是让我盯着屏幕。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:26:43.877

有很多方法可以完成你想要的。该方法取决于您的确切需求。如果您使用的是 OpenGL 2.1 或更早版本，则可以通过启用多个 OpenGL 灯来设置多个灯：

```
glEnable(GL_LIGHTING);
glEnable(GL_LIGHT0);
glLightfv(GL_LIGHT0, <light 0 settings>);
glEnable(GL_LIGHT1);
glLightfv(GL_LIGHT1, <light 1 settings>);
...etc. with up to GL_MAX_LIGHTS lights 
```

例如，如果您想要超过 GL_MAX_LIGHTS 灯，或者您使用的是 OpenGL 3 或更高版本，则需要将灯光数据作为制服传递到您的着色器程序中。

当我过去处理阴影时，我对每个灯光都使用了深度纹理。

要组合它们，您通常会针对每个灯光测试每个片段。如果片段对灯光可见（即不在阴影中），则添加灯光的贡献。如果片段处于阴影中（对光不可见），那么您不会添加该光的贡献。

如果您需要数百个灯或类似的东西，您还可以查看[Deferred Shading](https://stackoverflow.com/questions/1993431/opengl-rendering-more-than-8-lights-how)。（另请参阅[有关延迟着色的 Wikipedia 条目](http://en.wikipedia.org/wiki/Deferred_shading)。）

# ssas - 连接事实表的 SSAS 相异总和

> ID：14919938
> 
> 赞同：0
> 
> 时间：2013-02-17T10:02:25.697
> 
> 标签：ssas, ssas-2008

我有 2 个与 Fact Flight 1:many Fact Cost 关系的事实表。此外，我对 Fact Flight 和 Fact Cost 有单独的维度。我想让 Fact Flight 度量按 Fact Cost 维度进行过滤，反之亦然。SSAS可以吗？

![维度使用](../Images/5976c81c4fae7f5ee27eb01780d2cebc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:12:09.357

正如我所描述的，这些事实是一对多的。我解决了它使用连接键添加连接维度：Fact Cost 的 Regular 和 Fact Flight 的 Fact。

# sql - 合并中的可选参数

> ID：14919939
> 
> 赞同：2
> 
> 时间：2013-02-17T10:02:35.017
> 
> 标签：sql, sql-server, tsql, upsert, sql-merge

我有一个用于更新 SQL Server 数据库中记录的存储过程。

如果找到匹配项并提供 null 作为变量，我想使用数据库中的现有值。

通常只有部分数据可用，因此该过程分几个阶段执行以完成记录。我并不总是在每次执行时都有所有变量。

为什么以下 CASE 不起作用？如果提供了空值，它将替换字段中的现有数据。

```
ALTER PROCEDURE [dbo].[sp_UPSERT_Test] 

@ID int,
@Account_ID varchar(15)
@Name varchar(15)

AS 
BEGIN 

MERGE INTO dbo.Database_Log AS target  
USING ( 
   SELECT @ID, @Account_ID ,@Account_ID)  
   AS source (ID, Account_ID, Name)
ON target.ID = source.ID 

WHEN MATCHED
THEN UPDATE
SET
    Account_ID = CASE 
    WHEN source.Account_ID = NULL 
    THEN target.Account_ID 
    ELSE source.Account_ID 
        END
    ,Name = CASE 
    WHEN source.Name = NULL 
    THEN target.Name 
    ELSE source.Name 
        END)

WHEN NOT MATCHED  
THEN INSERT (Account_ID, Name)  
       VALUES (Account_ID, Name);

RETURN
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:04:50.413

也许是因为你没有正确检查`NULL`？`NULL`不是您**可以**与相等运算符比较的值 - 您**必须**使用`IS NULL`

试试这个：

```
 SET      
    Account_ID = CASE 
                    WHEN source.Account_ID IS NULL 
                    THEN target.Account_ID 
                    ELSE source.Account_ID 
                 END 
```

使用`IS NULL`代替`= NULL`

# sql-server-2008 - SQL Server 2008 时间数据类型经典 ASP

> ID：14919941
> 
> 赞同：2
> 
> 时间：2013-02-17T10:02:57.487
> 
> 标签：sql-server-2008, asp-classic, sqldatatypes

我将签入时间和签出时间存储在 SQL Server 2008 的表中。

当我存储它正确显示的时间时：`16:00:00`例如。

但是，当我将其从数据库中拉出并将其绑定到页面以向用户显示时，格式显示为`16:00:00.0000000`

所以精度显然是精确的，但我不需要为此目的。

我已经尝试过`FormatDateTime`，但这不起作用（显然）并且`Time`在 Google 上找不到任何适用于 Classic ASP 和 SQL Server 2008 数据类型的内容。

```
<%=(rsHotelFields.Item("checkintime").Value)%> 
```

有关如何更改上述内容的任何想法？

谢谢尼克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T10:21:23.680

默认情况下，如果您在 SQL Server 2008 中将列定义为 datatype `TIME`，它将使用可能的最大精度 - 小数秒为 7 位，精确到 100ns。

这很好 - 但如果您不需要那种准确性，您可以将您的列定义为：

```
YourColumn TIME(0) 
```

然后将不存储小数秒，`16:04:44`并且还将再次从要显示的数据库表中检索相同的值。

使用`TIME(0)`还将列的存储大小从 5 个字节减少到 3 个字节。

[在 MSDN 上阅读有关 SQL Server 2008 和更新版本](http://msdn.microsoft.com/en-us/library/ms186724.aspx)的日期和时间数据类型的更多信息。

# php - 如何在 Silex 上添加记住我的登录信息？

> ID：14919949
> 
> 赞同：2
> 
> 时间：2013-02-17T10:03:51.803
> 
> 标签：php, remember-me, silex

我尝试但不了解安全核心，有人可以帮我添加记住我吗？我已经等了几个月 @fabpot ( [https://github.com/fabpot/Silex/pull/464](https://github.com/fabpot/Silex/pull/464) ) 否则，我需要为我的应用程序重写登录名，并且可能会将我的应用程序移植到 Symfony :'( 无论如何，我喜欢Silex。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-12T21:57:59.990

使用 RememberMeServiceProvider：[http ://silex.sensiolabs.org/doc/providers/remember_me.html](http://silex.sensiolabs.org/doc/providers/remember_me.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T21:23:19.500

转到`vendor/silex/silex`项目中的文件夹并运行：

```
curl https://github.com/fabpot/Silex/pull/464.patch | git am 
```

# trigger.io - 触发器工具包不加载

> ID：14919950
> 
> 赞同：0
> 
> 时间：2013-02-17T10:04:40.410
> 
> 标签：trigger.io

我已经在我的 Mac 上安装了 Trigger Toolkit，但是当我运行它时，会打开一个浏览器窗口，地址为“ [https://toolkit-local.com:38394/](https://toolkit-local.com:38394/) ”并出现错误：

```
"Error 105 (net::ERR_NAME_NOT_RESOLVED): Unable to resolve the server's DNS address." 
```

在 ~/Library/Trigger Toolkit/toolkit.log 的日志文件中：

3 秒内未打开会话，正在关闭...3 秒内未打开会话，正在关闭...3 秒内未打开会话，正在关闭...3 秒内未打开会话，正在关闭...没有会话在 3 秒内打开，正在关闭...在 3 秒内没有打开会话，正在关闭...在 3 秒内没有打开会话，正在关闭...在 3 秒内没有打开会话，正在关闭...在 3 秒内没有打开会话3 秒，正在关闭... 3 秒内未打开任何会话，正在关闭...

我是 Trigger.oi 的新手（实际上只是尝试一下），现在卡住了。我还没有注册订阅 - 我需要订阅帐户才能让 Trigger Toolkit 工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T16:54:00.860

如果您手动将主机名更改为 localhost，那么您将获得工具包页面（如果您的环境与我的类似）。

```
https://localhost:38394 
```

# ruby - 如何在滚动窗口中获取 textView？

> ID：14919958
> 
> 赞同：0
> 
> 时间：2013-02-17T10:05:11.340
> 
> 标签：ruby, gtk

我正在使用 ruby​​-gtk。我的应用程序中有一个笔记本。我将 textView 添加到滚动窗口。我想获得 textView 缓冲区。我的一些代码

```
editor = Textview.new
swin = Gtk::ScrolledWindow.new
tab = Gtk::Notebook.new
swin.add(editor)
tab.append_page(swin, Gtk::Label.new("Tab")
tab.get_nth_page(current_page).buffer # wrong because its contain is a scrolledWindow 
```

我怎样才能获得编辑器缓冲区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:28:22.373

作为*一个*，您可以使用方法将小部件添加为孩子。在您的情况下，它应该返回. 尝试以下内容： [`GtkScrolledWindow`](http://ruby-gnome2.sourceforge.jp/hiki.cgi?Gtk%3A%3AScrolledWindow) *`GtkBin`[`child`](http://ruby-gnome2.sourceforge.jp/hiki.cgi?Gtk%3A%3ABin#child)`GtkTextView`*

 *```
tab.get_nth_page(current_page).child.buffer 
```

希望这可以帮助！*

# c# - 保持类别中的项目计数

> ID：14919959
> 
> 赞同：1
> 
> 时间：2013-02-17T10:05:15.867
> 
> 标签：c#, .net, asp.net-mvc-3, entity-framework

如果一个快速的谷歌会回答这个问题，那么 MVC 的新手很抱歉，解释这个的文章的链接或使用它的例子将不胜感激！

基本上，我有一个类别/子类别中的产品列表，并且希望能够输出它们的列表以及每个子类别中的产品数量，例如：

```
Computers
 - Laptops  (4)
 - Tablets  (9)
 - Netbooks (3) 
```

我使用的是 EF Code First，但我不确定如何最好地组织它。我可以遍历我的产品列表并计算每个产品的数量，但这似乎效率低下。我还可以在模型中为每个子类别存储一个计数变量，并在每次添加新产品时递增它。

基本上，我追求的是“最佳实践”方法来了解如何做到这一点，所以我可以从一开始就学会这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T10:12:36.160

您可以让数据库执行查询：

```
var model = db
    .Categories
    .Select(c => new MyViewModel
    {
        Name = c.Name,
        ProductsCount = c.Products.Count()
    })
    .ToList(); 
```

然后在您的视图中，您将在视图模型中获得名称和产品总数，以便在显示列表时能够显示此信息。

# java - 通过平方求幂（得到乘法的次数）

> ID：14919960
> 
> 赞同：1
> 
> 时间：2013-02-17T10:05:16.350
> 
> 标签：java, math

我正在做作业，我必须使用[平方乘幂](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)来做两件事。一个是得到乘法的次数，另一个是得到实际的结果。

下面是一些例子：

```
2
11 
```

应该输出

```
2048
5 
```

因为`2^11 = 2(2((2)²)²)²`

我在没有递归的情况下这样做，我得到了正确的结果，但是乘法的数量是错误的。如果我输入`2^6`我得到`3`乘法，那没关系，但如果我输入`2^8`我得到`4`乘法，这是错误的。

你能指出我在正确乘法方面做错了什么吗？

这是代码：

```
public static void main(String[] args) {
    double x, result = 1;
    int n, multiplications = 0;
    DecimalFormat df = new DecimalFormat("#.00");
    Scanner readLine = new Scanner(System.in);

    x = readLine.nextDouble();
    n = readLine.nextInt();

    if (n == 1) {
        multiplications++;
        System.out.print(df.format(x) + "\n" + multiplications + "\n");
    } else if (n == 2) {
        x *= x;
        multiplications++;
        System.out.print(df.format(x) + "\n" + multiplications + "\n");
    } else {
        while (n > 0) {
            if (n % 2 == 0) {
                multiplications++;
            } else {
                multiplications++;
                result *= x;
                n--;
            }
            x *= x;
            n /= 2;
        }
        System.out.print(df.format(result) + "\n" + multiplications + "\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:27:40.717

如果`n % 2 == 0`，则不乘；你只是广场。所以离开`multiplications++`吧。

然后对于 2^8 你得到：

```
n  |  n % 2  |  multiplications
----------------------
8  |  0      |  0
4  |  0      |  0
2  |  0      |  0
1  |  1      |  1 
```

1乘法应该是正确的。自从`2^8 = (((1² * 2)²)²)²`

如果你想把平方算作乘法，你应该这样做

```
... else
    multiplications = multiplications + 2 
```

然后减去 2 进行初始平方和乘法运算。

所以总的来说：

```
while (n > 0) {       
    if(n % 2 == 1) {
        multiplications++;
        result *= x;
        n--;
    }
    multiplications++;
    x *= x; // shouldn't that be result *= result?
    n /= 2;
}
multiplications -= 2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T00:04:38.270

你应该看的是数字的**二进制表示**。11 的二进制表示为 1011。从左到右读取。对于每个新的二进制数字，将结果平方。然后对于每个 1，也乘以因子。

对于 2 ^ 11，您可以：

第一个数字是一个，所以是 2。

下一个是零，所以只平方 2\. 4。

下一个是 1，所以将 4 平方并乘以 2。4 的平方是 16。乘以 2 是 32。

下一个是一个，所以平方和相乘。32 的平方是 1024。乘以 2 是 2048。

# mfc - mfc CFileDialog 使用 IFileOpenDialog 浏览文件夹

> ID：14919964
> 
> 赞同：2
> 
> 时间：2013-02-17T10:05:47.137
> 
> 标签：mfc, cfiledialog

我发现以下代码允许我浏览文件夹

```
CFileDialog od(TRUE/*bOpenFileDialog*/, NULL, NULL,     OFN_HIDEREADONLY |
                      OFN_OVERWRITEPROMPT , NULL, NULL, 0,   TRUE/*bVistaStyle*/);
    IFileOpenDialog * openDlgPtr = od.GetIFileOpenDialog();
    if ( openDlgPtr != NULL )
     {
      openDlgPtr->SetOptions(FOS_PICKFOLDERS);
      openDlgPtr->Release();
    }

    int r = od.DoModal(); 
```

它会打开一个文件对话框，我可以选择一个文件夹，然后“打开”按钮就会启用，但按下它只会打开文件夹，它不会选择它。除非我点击取消，否则 DoModal 不会返回

任何想法如何在 MFC 中选择文件夹？谢谢

顺便说一句，我知道 CFolderDialog [http://www.codeproject.com/Articles/2024/CFolderDialog-Selecting-Folders?msg=4497794#xx4497794xx](http://www.codeproject.com/Articles/2024/CFolderDialog-Selecting-Folders?msg=4497794#xx4497794xx)

不错的项目，但是当我选择我的 USB 安装的 android 文件夹时，对话框返回不正常，所以它对我没有用，除非我能修复它

更新

我也发现了这个

```
BROWSEINFO bi = { 0 };
TCHAR path[MAX_PATH];
bi.lpszTitle = _T("Pick a Directory");
bi.pszDisplayName = path;
LPITEMIDLIST pidl = SHBrowseForFolder ( &bi );
if ( pidl != 0 )
{
    // get the name of the folder
    //_tprintf ( _T("Selected Item: %s\n"), path );
    // free memory used
    IMalloc * imalloc = 0;
    if ( SUCCEEDED( SHGetMalloc ( &imalloc )) )
    {
        imalloc->Free ( pidl );
        imalloc->Release ( );
    }
    setMobilePath(path);
} 
```

这确实允许我在我的 android 设备上选择一个文件夹，但它不返回完整路径，只是文件夹名称也没有多大用处

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:55:32.707

将返回的 pidl 转换为字符串，如下所示：

```
BROWSEINFO bi = { 0 };
bi.lpszTitle = _T("Pick a Directory");
LPITEMIDLIST pidl = SHBrowseForFolder (&bi);
if (pidl != 0)
{   // convert pidl to string
    TCHAR szPath[MAX_PATH];
    SHGetPathFromIDList(pidl, szPath);
    // free memory used
    IMalloc * imalloc = 0;
    if ( SUCCEEDED( SHGetMalloc(&imalloc)))
    {   imalloc->Free (pidl);
        imalloc->Release();
    }
    //_tprintf(_T("Selected Item: %s\n"), szPath);
    setMobilePath(szPath);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-10T18:50:55.773

试试这个

```
CFolderPickerDialog dlgFolder;

if (dlgFolder.DoModal() == IDOK)
{
    CString strFolder = dlgFolder.GetPathName();
    AfxMessageBox(strFolder);
} 
```

# android - 使用 jTwitter for android 获取访问令牌

> ID：14919966
> 
> 赞同：0
> 
> 时间：2013-02-17T10:05:55.807
> 
> 标签：android, twitter-oauth, signpost, jtwitter

我正在使用 jTwitter for android 开发我的应用程序。我能够将用户重定向到授权页面，他在其中输入凭据以授权应用程序。然后调用回调函数。在回调函数中无法获取访问令牌。它正在向我抛出异常。请帮忙。

我收到“与服务提供商的通信失败”异常。更新：我得到了令牌，但仍然得到了例外。这是代码：

```
 Twitter twitter = null;
private EditText tweetTxt = null;
private Button postBtn = null;

private OAuthSignpostClient client = null;
private String CALLBACK_URI = "myapp://twitt";

private String authUrl = null;
private ProgressDialog postDialog = null;
String[] accessTokenandSecret=null;
String consumerKey="";
String consumerSecret="";
String verifier;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    postBtn=(Button)findViewById(R.id.button1);

    postBtn.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            new MyTask().execute();

        }
    });

    Button postTweet = (Button)findViewById(R.id.button2);
    postTweet.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            new PostTweet().execute();
        }
    });

}

private class PostTweet extends AsyncTask<Void, Void, Void> {

    protected void onPreExecute() {
        Toast.makeText(getApplicationContext(), "pre execute 2", Toast.LENGTH_LONG).show();
        if(accessTokenandSecret==null)
        {
            Toast.makeText(getApplicationContext(), "IT IS NULL", Toast.LENGTH_LONG).show();
        }
    }

    @Override
    protected Void doInBackground(Void... arg0) {

        client=new OAuthSignpostClient(consumerKey, consumerSecret, accessTokenandSecret[0], accessTokenandSecret[1]);
        Twitter jtwit = new Twitter(null, client);
        jtwit.setStatus("test post from my app");

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        Toast.makeText(getApplicationContext(), "Tweet is post Successfully!!", Toast.LENGTH_SHORT).show();
    }

}

private class MyTask extends AsyncTask<Void, Void, Void> {

    protected void onPreExecute() {
        Toast.makeText(getApplicationContext(), "pre execute", Toast.LENGTH_LONG).show();
    }

    @Override
    protected Void doInBackground(Void... arg0) {

        client = new OAuthSignpostClient("QvkiReKCHNKcHn3pGrEzQ" ,"EV9vdMRfuT2AQlSNPJW4LhDAyOe0z1mAZYqHJNkPH7g", CALLBACK_URI);

        authUrl = client.authorizeUrl().toString();
        Intent intent=new Intent(Intent.ACTION_VIEW, Uri.parse(authUrl));
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        getApplicationContext().startActivity(intent);
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        Toast.makeText(getApplicationContext(), "post execute", Toast.LENGTH_LONG).show();
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

protected void onNewIntent(Intent intent) {

    super.onNewIntent(intent);
    Uri uri = intent.getData();
    //Check if you got NewIntent event due to Twitter Call back only

    if (uri != null && uri.toString().startsWith(CALLBACK_URI))
    {
    try
    {
    verifier = uri.getQueryParameter(OAuth.OAUTH_VERIFIER);
    Toast.makeText(getApplicationContext(), "inside verfier", Toast.LENGTH_LONG).show();

    client.setAuthorizationCode(verifier);

    accessTokenandSecret=client.getAccessToken();

    //if(accessTokenandSecret==null)
        //{
        //Toast.makeText(getApplicationContext(), "it is null you fool", Toast.LENGTH_LONG).show();
    //  }

    //client=new OAuthSignpostClient(consumerKey, consumerSecret, accessTokenandSecret);
    }
    catch(Exception e){
    Log.d("exception", " "+e.getMessage());
    }
    }} 
```

日志猫错误：

```
 02-17 15:13:46.599: E/AndroidRuntime(12915): FATAL EXCEPTION: AsyncTask #4
         02-17 15:13:46.599: E/AndroidRuntime(12915): java.lang.RuntimeException: An error occured while executing doInBackground()
         02-17 15:13:46.599: E/AndroidRuntime(12915):   at android.os.AsyncTask$3.done(AsyncTask.java:299)
        02-17 15:13:46.599: E/AndroidRuntime(12915):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
        02-17 15:13:46.599: E/AndroidRuntime(12915):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
        02-17 15:13:46.599: E/AndroidRuntime(12915):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
        02-17 15:13:46.599: E/AndroidRuntime(12915):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
        02-17 15:13:46.599: E/AndroidRuntime(12915):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
        02-17 15:13:46.599: E/AndroidRuntime(12915):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
        02-17 15:13:46.599: E/AndroidRuntime(12915):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
        02-17 15:13:46.599: E/AndroidRuntime(12915):    at java.lang.Thread.run(Thread.java:856)
        02-17 15:13:46.599: E/AndroidRuntime(12915): Caused by: winterwell.jtwitter.TwitterException: oauth.signpost.exception.OAuthCommunicationException: Communication with the service provider failed: http://twitter.com/oauth/access_token
        02-17 15:13:46.599: E/AndroidRuntime(12915):    at winterwell.jtwitter.OAuthSignpostClient.setAuthorizationCode(OAuthSignpostClient.java:431)
        02-17 15:13:46.599: E/AndroidRuntime(12915):    at com.example.retrieve.contacts.twitter.MainActivity$GetAccessTok.doInBackground(MainActivity.java:114) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:06:07.927

[您可以尝试从http://winterwell.com/software/jtwitter.php](http://winterwell.com/software/jtwitter.php)下载最新版本的 JTwitter吗？AndroidTwitterLogin 中存在未使用回调 URL 的错误。现在已经修复了。

顺便说一句 - 在网络上发布应用程序的 oauth 详细信息时要小心。一旦您的应用程序正常运行，我建议您访问 dev.twitter.com 并生成新的详细信息。

# c# - 在 GridView 中转置列

> ID：14919969
> 
> 赞同：1
> 
> 时间：2013-02-17T10:06:14.183
> 
> 标签：c#, asp.net

我有一个包含如下数据的数据表。

![在此处输入图像描述](../Images/94dad4235b77b47031bcdfca5aaed740.png)

我想在我的网格视图中显示它，如下所示。它实际上是上表的转置，并为查看产品详细信息添加了一个额外的行，这将是一个链接按钮。你能帮我如何使用 C# 在 ASP.net 中实现以下要求。

![在此处输入图像描述](../Images/6c1f84e80beb8bd3bfe580922e55858a.png)

非常感谢，Awais Afzal。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T10:18:37.413

假设您的 table 是 a `DataTable`，您可以使用这样的扩展来重新排序它：

```
public static DataTable Pivot(this DataTable tbl)
{ 
    var tblPivot = new DataTable();
    tblPivot.Columns.Add(tbl.Columns[0].ColumnName);
    for (int i = 1; i < tbl.Rows.Count; i++)
    {
        tblPivot.Columns.Add(Convert.ToString(i));
    }
    for (int col = 0; col < tbl.Columns.Count; col++)
    {
        var r = tblPivot.NewRow();
        r[0] = tbl.Columns[col].ToString();
        for (int j = 1; j < tbl.Rows.Count; j++)
            r[j] = tbl.Rows[j][col];

        tblPivot.Rows.Add(r);
    }
    return tblPivot;
} 
```

并将其设置为新的`DataSource`：

```
dataGridView1.DataSource = oldDataTable.Pivot(); 
```

# php - PHP MySQL 插入错误处理

> ID：14919970
> 
> 赞同：-1
> 
> 时间：2013-02-17T10:06:14.930
> 
> 标签：php, mysql

再会，

我需要有关以下问题的帮助。我需要从一个表中检索数据并插入到另一个表中。我遇到的问题是这两点：

1.  脚本需要从上次导入继续，以防出现故障
2.  脚本还应该检测脚本的另一个实例是否已经在进行中并退出

这是我的代码：

```
<?php
/*echo "<pre>";
print_r(get_defined_functions());
echo "</pre>";*/

echo "testX";
try {
    $link = mysql_connect('host', 'username', 'password');
} catch (Exception $e) {
    echo 'Caught exception: ',  $e->getMessage(), "\n";
}

if (!$link)
  {
  die('Could not connect: ' . mysql_error());
  }
else
{
echo "link worked!";
}
mysql_select_db("aaatrycmpg_db2", $link);
$result = mysql_query("SELECT * FROM  source_cdr");
//print_r($result);
$count = mysql_num_rows($result);
echo "<table border='1'><tr><td>callstart</td><td>src</td><td>dst</td>                  <td>accountcode</td><td>uniqueid</td><td>ID</td><td>callanswer</td><td>callend</td> <td>disposition</td><td>cdr_id</td><td>pin_code</td><td>provider</td></tr>";
 while($row = mysql_fetch_array($result))
  {
echo "<tr><td>".$row['callstart']."</td><td>".$row['src']."</td><td>".$row['dst']."    </td><td>".$row['accountcode']."</td><td>".$row['uniqueid']."</td><td>".$row['ID']."</td><td>".$row['callanswer']."</td><td>".$row['callend']."</td><td>".$row['disposition']."</td><td>".$row['cdr_id']."</td><td>".$row['pin_code']."</td><td>".$row['provider']."</td></tr></table>";
  $callstart = $row['callstart'];
  $callanswer = $row['callanswer'];
  $callend = $row['callend'];
  $datetime=$callstart; 
$date=substr($datetime, 0, 10); 
echo $date."<br>"; 
  $callduration = strtotime($callend) - strtotime($callstart);
  $talkduration = strtotime($callend) - strtotime($callanswer);
  echo strtotime($callend)." - ".strtotime($callstart)." = ".$callduration." = ".$talkduration;
  echo "<br />";
  if ($row['cdr_id'] != '1')
  {
mysql_query("INSERT INTO destination_cdr     (calldate,source,destination,account_code,pincode,duration_call,duration_talk,disposition,clid,cdr_id,provider)
VALUES ('".$callstart."','".$row['src']."','".$row['dst']."','".$row['accountcode']."','".$row['pin_code']."',".$callduration.",".$talkduration.",'".$row['disposition']."','".$row['ID']."','".$row['cdr_id']."','".$row['provider']."')");
  }
  }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:13:59.713

1.  您没有正确格式化查询部分。
2.  你根本不需要 PHP。

做吧

```
INSERT INTO destination_cdr
(calldate,source,destination,account_code,pincode,duration_call,duration_talk,disposition,clid,cdr_id,provider) 
SELECT callstart,src, etc. FROM source_cdr 
```

日期也可以重新格式化，使用 TO_DAYS() 或类似的 mysql 函数

我根本看不到所有这些移动的混乱有多大用处。为什么不将所有记录保存在 source_cdr 中？

# php - 从每一行中删除一个或多个字符

> ID：14919971
> 
> 赞同：1
> 
> 时间：2013-02-17T10:06:18.490
> 
> 标签：php, regex

谁能帮我解决这个问题。'>' 符号的问题 转发电子邮件时，一些电子邮件客户端会在电子邮件的每一行之前添加“>”符号。例如：

```
This is an example of forwarded text 
```

变成：

```
> test message 
```

如果多次这样做，文本可能会变得不可读：

```
>>>>>>>>>>>>>>>>>>> test message
>>>>>>>>>>>>>>>>> test message 
```

“>”符号组之间甚至可能有空格，如下所示：

```
>> >>>>>> >>>>>>>>> test message 
```

我需要从每一行中删除这些文本并清理电子邮件内容

任何人都帮我找出一个正则表达式来解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T10:16:12.067

$trimmed = preg_replace('/^([>\s]+)/m', '', $content);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T10:18:07.790

```
function strip_forward($input) {
    return preg_replace("/^[> ]+/m","",$input); 
}

////////////////////////////////////////////////

$input = ">>> >> > Test\n".
         ">> Test\n".
         "> Test\n".
         "Test";

echo $input."\n\n\n";
echo strip_forward($input); 
```

在这里测试它：http: [//codepad.org/I1Ddfwte](http://codepad.org/I1Ddfwte)

# javascript - javascript：将函数添加到.prototype = {中的函数

> ID：14919972
> 
> 赞同：2
> 
> 时间：2013-02-17T10:06:27.507
> 
> 标签：javascript

如果我在“构造函数”中添加一个函数，我可以使用其他函数来扩展它，如下所示：

```
var MyClass = function() {
    this.time = function() { return 4.5; }
    this.time.formatted = function() { return format(this.time(), "HH:mm"); }
} 
```

如果我像这样在原型中创建函数，我想不出一个很好的方法来做到这一点：

```
var MyClass = function() {}
MyClass.prototype = {
    time: function() { return 4.5; },
    time.formatted: function () { ... } // This does not work!
}

MyClass.prototype.time.formatted = function() { ... }
// the line above works but I don't like it since it separates everything.
// e.g. if I have 15 functions inside prototype, the .formatted will be like
// 50 lines apart from the time: function 
```

*编辑：*重新考虑上面的行不起作用，添加 .formatted 混乱对此的引用。也许可以解决？

有小费吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T10:22:09.280

在创建原型对象之前创建函数，它允许您向其添加属性，并且还使您能够在不使用的情况下使用该函数`this`：

```
function MyClass() {}

function time() { return 4.5; }
time.formatted = function() { return format(time(), "HH:mm"); }

MyClass.prototype = {
    time: time;
} 
```

您可以将其放在函数表达式中以将其保持在一起，并避免将`time`函数置于全局范围内：

```
function MyClass() {}
MyClass.prototype = (function(){

  function time() { return 4.5; }
  time.formatted = function() { return format(time(), "HH:mm"); }

  return {
    time: time;
  }

})(); 
```

* * *

注意：该`formatted`函数将作为常规函数调用，而不是作为对象的方法。这意味着该函数在从函数调用时`time`无权访问。`this``formatted`

如果您需要，您根本无法`time`在原型中拥有该功能。类的每个实例都需要自己的`time`函数版本，其中`formatted`属性可以访问对象的特定实例：

```
function MyClass() {

  this.theTime = 4.5;

  this.time = function() { return this.theTime; }

  var t = this;

  this.time.formatted = function() { return format(t.time(), "HH:mm"); }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T10:16:25.887

此代码不起作用：

```
var MyClass = function() {
    this.time = function() { return 4.5; }
    this.time.formatted = function() { return format(this.time(), "HH:mm"); }
}

var m = new MyClass();
console.log(m.time.formatted()) 
```

因为`this`里面`.formatted`指向`m.time`，不是`m`。你应该使用：

```
var MyClass = function() {
    this.time = function() { return 4.5; }
    this.time.formatted = function() { return format(this(), "HH:mm"); }
} 
```

或者

```
var MyClass = function() {
    var self = this;
    this.time = function() { return 4.5; }
    this.time.formatted = function() { return format(self.time(), "HH:mm"); }
} 
```

* * *

回答您的实际问题，创建一个辅助函数：

```
var callable(f, props) {
    for(p in props) f[p] = props[p];
    return f;
}

MyClass.prototype = {
    time: callable(function() {
        return 4.5;
    }, {
        formatted: function () { return format(this(), "HH:mm"); }
    })
} 
```

# ios - iOS Facebook 在登录和权限之间切换回应用

> ID：14919975
> 
> 赞同：2
> 
> 时间：2013-02-17T10:07:32.170
> 
> 标签：ios, facebook, login, permissions

我正在尝试设置我的应用程序以将简单的帖子发布到用户的 Facebook 提要（图片网址、链接、描述）。他们不需要将 Facebook 用于其他任何事情，所以当他们第一次点击“分享”时，它需要授权应用程序和发布权限。

如果他们将他们的凭据存储在 iOS 6 的设备中，他们只需获得两个警报框就可以了。但如果他们没有，或者有旧版本，它会切换到 Safari 登录。我的问题是它会将用户切换回我的应用程序，然后立即再次返回 Safari 以接受发布权限。这是非常不和谐和不专业的。

我想要的是 Safari 中的页面在登录到权限页面后更改，以便他们可以接受它，然后切换回我的应用程序。我知道这是可以做到的，因为流行的 Mixology 应用程序就是这样做的。不幸的是，Facebook 一直在更改他们的 SDK，我在网上找到的所有信息都已经过时了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:53:11.663

我在这里写了一个解决方案：[FacebookSDK 两次显示登录 UI](https://stackoverflow.com/questions/13727796/facebooksdk-presents-login-ui-twice/16073570#16073570)以避免双重切换。

基本上，你可以`openActiveSessionWithPublishPermissions:`用来做你想做的事。但是，您必须处理用户从设备设置登录到 Facebook 的特殊情况，这需要在两个单独的调用中请求读取和发布权限。

# google-maps-api-3 - 使用 Google Maps JavaScript API v3 突出显示区域

> ID：14919978
> 
> 赞同：1
> 
> 时间：2013-02-17T10:08:21.437
> 
> 标签：google-maps-api-3, highlight

我想突出显示如下图所示的区域，该区域取自[Google Maps](https://maps.google.com/)。这可以用他们的 API (v3) 的当前版本来完成吗？如果是，如何？

![谷歌地图突出显示](../Images/36594d0e34e15f3a4ad3cf13f6641ef4.png)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:47:27.813

您需要知道该区域的顶点并根据它们创建一个多边形。

但是多边形目前不支持虚线笔划，如果您需要虚线笔划，则必须根据顶点创建具有不同笔划颜色的折线序列。

当前不存在突出显示区域的内置方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-23T20:01:54.590

您可以使用 Google Maps Javascript API 自动突出显示区域，这是一个示例：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Place ID Finder</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      #map {
        height: 100%;
      }

      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }

      #ggg
      {
          position: absolute;
          left:20%;
          top:5%;
      }

      .controls {
        background-color: #fff;
        border-radius: 2px;
        border: 1px solid transparent;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        box-sizing: border-box;
        font-family: Roboto;
        font-size: 15px;
        font-weight: 300;
        height: 29px;
        margin-left: 17px;
        margin-top: 10px;
        outline: none;
        padding: 0 11px 0 13px;
        text-overflow: ellipsis;
        width: 400px;
      }

      .controls:focus {
        border-color: #4d90fe;
      }
      .title {
        font-weight: bold;
      }
      #infowindow-content {
        display: none;
      }
      #map #infowindow-content {
        display: inline;
      }

    </style>
  </head>
  <body>
    <div style="display: none">
        <input id="pac-input" class="controls" type="text" placeholder="Enter a location">
    </div>
    <div id="map"></div>
    <div id="infowindow-content">
        <span id="place-name" class="title"></span><br>
        <strong>Place ID:</strong> <span id="place-id"></span><br>
        <span id="place-address"></span>
    </div>

    <script>
      function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 37.9989746, lng: 23.6413698},
          zoom: 11
        });

        var input = document.getElementById('pac-input');

        var autocomplete = new google.maps.places.Autocomplete(input);
        autocomplete.bindTo('bounds', map);

        autocomplete.setFields(
            ['place_id', 'geometry', 'name', 'formatted_address']);

        map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);

        var infowindow = new google.maps.InfoWindow();
        var infowindowContent = document.getElementById('infowindow-content');
        infowindow.setContent(infowindowContent);

        var marker = new google.maps.Marker({map: map});

        marker.addListener('click', function() {
          infowindow.open(map, marker);
        });

        autocomplete.addListener('place_changed', function() {
          infowindow.close();

          var place = autocomplete.getPlace();

          if (!place.geometry) {
            return;
          }

          if (place.geometry.viewport) {
            map.fitBounds(place.geometry.viewport);
          } else {
            map.setCenter(place.geometry.location);
            map.setZoom(17);
          }

          marker.setPlace({
            placeId: place.place_id,
            location: place.geometry.location,
          });

          marker.setVisible(true);

          infowindowContent.children['place-name'].textContent = place.name;
          infowindowContent.children['place-id'].textContent = place.place_id;
          infowindowContent.children['place-address'].textContent = place.formatted_address;
          infowindow.open(map, marker);

           var frame = document.getElementById("map");

           frame.innerHTML = '<iframe width="100%" height="100%" frameborder="0" style="border:0" src="https://www.google.com/maps/embed/v1/place?q=place_id:'.concat(place.place_id).concat('&key=XXXXXXX" allowfullscreen></iframe>');

           frame.innerHTML += '<p id="ggg"><button type="button" onclick="location.reload()">Try again!</button></p>';
        });
      }

    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=XXXXXXXXX&libraries=places&callback=initMap" async defer></script>

</body>
</html> 
```

您需要将 API KEY 替换为您的 API KEY。在输入中尝试例如“Nea Smyrni 171 21, Greece”，然后选择第一个下拉选项，注意它会自动突出显示该区域！

# html - 如何以更大的缩放级别在图像后显示产品信息

> ID：14919980
> 
> 赞同：0
> 
> 时间：2013-02-17T10:08:47.433
> 
> 标签：html, css, jquery-ui, internet-explorer, shopping-cart

在购物车详细信息页面中，产品图像是使用下面的代码定义的。它的比例应该保留。

对于更大的缩放级别，图像会在其后隐藏文本的开头。

如何在所有缩放级别中正确呈现此页面？

由于未知原因 div #productinfo 从左侧开始，但它应该在图像之后开始。我尝试将 display:inline-block 添加到每个 div 但这没有任何效果。使用 jquery、jquery ui、fancybox 和 pikachoose。

html:

```
<div style="float: left; width: 30%; margin-right: 1%">
            <a href="#" class="details-picture">
                <img src="/Thumb?product=1308318&amp;size=198" alt="">
            </a>
        </div>
<div id="productinfo">
 <div>
            Price <span id="Price">
                1.73
            </span>
  </div> 
```

CSS：

```
.details-picture {
    background: none repeat scroll 0 0 #FFFFFF;
    border: thin ridge #BBBBBB;
    display: block;
    float: left;
    height: 200px;
    line-height: 200px;
    margin: 0 20px 15px 0;
    overflow: hidden;
    position: relative;
    text-align: center;
    width: 198px;
}
.details-picture img {
    border-width: 0;
    height: auto;
    max-height: 198px;
    max-width: 198px;
    vertical-align: middle;
    width: auto;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:53:32.987

这似乎是由于顶级的那些内联属性`div`。`float: left`和`width: 30%`导致您遇到的问题的组合。

```
<div class="productimage">
    <a href="#" class="details-picture">
        <img src="/Thumb?product=1308318&amp;size=198" alt="" />
    </a>
</div>
<div class="productinfo">
    <div>
        Price <span id="Price">1.73</span>
    </div>
</div> 
```

[jsfiddle](http://jsfiddle.net/nTJrS/)

# jquery - 仅 jQuery 移动滑动内容

> ID：14919982
> 
> 赞同：4
> 
> 时间：2013-02-17T10:08:57.973
> 
> 标签：jquery, html, css, jquery-mobile

所以我使用jquery mobile ui来做一个页面，向左/向右滑动，现在这对我不起作用，因为我只想滑动内容，而不是页面的entery body，我尝试使用`data-role="content"`但它没有'不再工作了，`data-role="page"`是否可以使用滑动动画，但仅适用于内容？

我有一些`<article>`，我想向左/向右滑动它们……但我不想滑动标题和其他东西……只是中间部分。

如果可以的话，还要禁用那个愚蠢的 jquery 移动主题。

//乐

代码结构

```
<header data-role="header"> .... </header>
 <section>
  <!-- only this part I want to swipe, one article at a time -->
  <article data-role="page"> .....  </article>
  <article data-role="page"> .....  </article>
  <article data-role="page"> .....  </article>
  <article data-role="page"> .....  </article>
  <!-- only this part I want to swipe, one article at a time -->
</section>
<footer> ... </footer>

  $('article').bind("swipeleft", function(){
    var nextpage = $(this).next('article[data-role="page"]');
    // swipe using id of next page if exists
    if (nextpage.length > 0) {
      $.mobile.changePage(nextpage, {transition: "slide",
    reverse: false}, true, true);
    }

  });

  $('article').bind("swiperight", function(){
    var prevpage = $(this).prev('article[data-role="page"]');
    if (prevpage.length > 0) {
    $.mobile.changePage(prevpage, {transition: "slide",
    reverse: true}, true, true);
    }

  }); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-17T11:07:04.093

你可以在这里作弊，有一种方法可以在 jQM 中更改页面，但让它看起来只有内容已更改。如果您在每个页眉和每个页脚中放置一个**data-id="footer"属性，就可以做到这一点。**

我为您创建了一个有效的 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/NV6Py/](http://jsfiddle.net/Gajotres/NV6Py/)

```
<!DOCTYPE html>
<html>
<head>
  <title>Share QR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>     
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />   
  <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head>

<body>

  <article data-role="page" id="article1">
    <div data-role="header" data-theme="b" data-position="fixed" data-id="footer">
      <h1>Articles</h1>
    </div>
    <div data-role="content">
      <p>Article 1</p>
    </div>
    <div data-role="footer" data-theme="b" data-position="fixed" data-id="footer">
      <h1>Footer</h1>    
    </div>
  </article>

  <article data-role="page" id="article2">
    <div data-role="header" data-theme="b" data-position="fixed" data-id="footer">
      <a href="#article1" data-icon="home" data-iconpos="notext">Home</a>
      <h1>Articles</h1>
    </div>
    <div data-role="content">
      <p>Article 2</p>
    </div>
    <div data-role="footer" data-theme="b" data-position="fixed" data-id="footer">
      <h1>Footer</h1>
    </div>
  </article>

  <article data-role="page" id="article3">
    <div data-role="header" data-theme="b" data-position="fixed" data-id="footer">
      <a href="#article1" data-icon="home" data-iconpos="notext">Home</a>
      <h1>Articles</h1>
    </div>
    <div data-role="content">
      <p>Article 3</p>
    </div>
    <div data-role="footer" data-theme="b" data-position="fixed" data-id="footer">
      <h1>Footer</h1>
    </div>
  </article>

</body>
</html> 
```

如果您想阻止 jQM 页面样式，您可以借助**data-enhance="false"**属性来实现，它必须放在 page/article 容器中并使用以下内容进行初始化：

```
<script>
    $(document).on('mobileinit', function () {
        $.mobile.ignoreContentEnabled = true;
    });
</script> 
```

还要记住，必须在加载 jQM js 之前初始化**mobileinit事件。**

我也有一个这样的工作示例：http: [//jsfiddle.net/Gajotres/5gXKj/](http://jsfiddle.net/Gajotres/5gXKj/)，这是一个与顶部相同的示例，但没有 jQM 页面标记增强。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-13T18:51:03.137

另一种方法是将固定的页眉/页脚固定在其位置，然后滑动将仅移动内容。

HTML：

```
<body>

<div id="site-header"> My fixed-position header </div>

<div data-role="page" id="pageone">
    ...
    <a href="#pagetwo" data-transition="slide">Slide to Page Two</a>
    ...
</div> 

<div data-role="page" id="pagetwo">
    ...
    <a href="#pageone">Go to Page One</a>
    ...
</div>

</body> 
```

CSS：

```
#site-header {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    z-index: 1;
} 
```

另请参阅：[http ://www.artandlogic.com/blog/2013/11/jquery-mobile-transitions-static-vs-dynamic-content-part-ii/](http://www.artandlogic.com/blog/2013/11/jquery-mobile-transitions-static-vs-dynamic-content-part-ii/)

# iphone - 检查 Internet 访问代理的可达性

> ID：14919984
> 
> 赞同：0
> 
> 时间：2013-02-17T10:09:05.120
> 
> 标签：iphone, ios, nsurlconnection, nsurlrequest, reachability

我已经阅读了许多与可达性相关的问题，但我有新的案例可以总结如下：-

1.  我已经连接到 WiFi 网络。
2.  该网络需要访问用户名和密码才能访问互联网，例如咖啡馆。
3.  我尝试使用 Reachability & NSURLConnection 但我没有找到任何标准来识别我是否访问任何域 ( [http://www.google.com](http://www.google.com) ) 或者我是否访问互联网访问登录以输入我的凭据信息以便能够使用互联网服务。

# java - 如何从 EObjectNode 获取 EObject

> ID：14919986
> 
> 赞同：0
> 
> 时间：2013-02-17T10:09:18.537
> 
> 标签：java, eclipse, xtext

在一个独立的 ViewPart 中，我设法在 OutlineView 中选择了 EObjectNode。我现在需要获取它引用的 EObject，但我不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:00:00.627

```
 if (selection instanceof IStructuredSelection) {
        Object first = ((IStructuredSelection)selection).getFirstElement();
        EObjectNode enode = (EObjectNode)first;
        ResourceSet resourceSet = new ResourceSetImpl();
        Resource inResource = resourceSet.getResource(enode.getEObjectURI(),true);
        MyEcoreElement element = (MyEcoreElement)inResource.getEObject(enode.getEObjectURI().fragment());
        //....  
 } 
```

# firebase - 如何强制节点中的最大子节点数？

> ID：14919987
> 
> 赞同：5
> 
> 时间：2013-02-17T10:09:22.873
> 
> 标签：firebase

如何使用安全规则强制节点的最大子节点数？

```
/bar/customers/$customer/drinks_ordered 
```

不应该有超过十五个孩子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T20:41:27.253

看起来您可以为订购的饮料使用数字 ID，然后尝试这样的操作；它将失败，因为 ID 是一个字符串：

```
"$customer_id": {
    "drinks_ordered": {
       "$drink_id": {
          ".validate": "$drink_id > 0 && $drink_id < 16" // error
       }
    }
} 
```

相反，您可以使用计数器并将计数器验证为 1-15，然后验证饮料 ID 是否与计数器匹配。

```
"$customer_id": {
    "counter": {
       // counter can only be incremented by 1 each time, must be a number
       // and must be <= 15
       ".validate": "newData.isNumber() && newData.val() > 0 && newData.val() <= 15 && ((!data.exists() && newData.val() === 1) || (newData.val() === data.val()+1))"
    },
    "drinks_ordered": {
       // new record's ID must match the incremented counter
       "$drink_id": {
          // use .val()+'' because $drink_id is a string and Firebase always uses ===!
          ".validate": "root.child('bar/customers/'+$customer_id+'/counter').val()+'' == $drink_id"
       }
    }
} 
```

自然地，你的饮料看起来像这样：

```
 /bar/customers/george_thorogood/counter/3
 /bar/customers/george_thorogood/drinks_ordered/1/burbon
 /bar/customers/george_thorogood/drinks_ordered/2/scotch
 /bar/customers/george_thorogood/drinks_ordered/3/beer 
```

现在，在客户可以添加另一种饮料之前，他们必须将计数器设置为 4（这是唯一可以设置的值），然后添加具有相同 ID 的饮料。

有点迂回，但它确实可以完成工作:)

# c++ - C++ - 如何模板类属性而不是类的功能？

> ID：14919990
> 
> 赞同：2
> 
> 时间：2013-02-17T10:10:01.573
> 
> 标签：c++, class, templates

我想模板化一个类的属性，但不是所有的功能。

```
enum myEnum
{
CHAR,
INT,
FLOAT,
DOUBLE
};

class   myClass
{
public:
  myClass(T);
  ~myClass();
  myEnum getType(); // need to template it to know the type
  myClass *operator+(const myClass&);
   /*
I don't want to template it, because I don't need it,
I can find the type tanks to getType() (for the precision of the operation,
I'll need it, ie. for a char + int)
*/
protected:
  T _value;
  std::string _sValue;
}; 
```

我知道如何在一个类中模板化一个独特的函数，我只需要`template<typename T>`在类中的函数上面写。我想知道如何在`T _value`不模板化所有类的情况下模板化属性。

如果我尝试对属性做同样的事情，我的意思是：

```
template<typename T>
T _value; 
```

我有那个错误： `error: data member '_value' cannot be a member template` `error: ‘myClass’ is not a template`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:12:26.737

你的问题很不清楚你想要什么，但我猜它可能是这样的：

```
template<typename T>
T getType();

template<typename T>
T myClass::getType()
{
   T t;
   return t;
} 
```

如果你想在你的类中有一个模板化的成员，你必须使类本身成为一个模板。真的没有别的办法了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T10:16:52.913

如果您需要模板数据成员，那么您的类*必须*是类模板：

```
enum myenum { .... };

template <typename T>
class myclass {
 public:
  myenum gettype() const;
  myclass& operator+=(const myclass& rhs);
 private:
  T value_;
}; 
```

# extjs - 调用 reconfigure() 时禁用网格的事件

> ID：14919994
> 
> 赞同：2
> 
> 时间：2013-02-17T10:10:54.263
> 
> 标签：extjs, extjs4, extjs-mvc

我有一个网格，我要动态地设置它的存储。
我之前在stackoverflow上看到过这个问题：[ExtJS 4 Change grid store on the fly](https://stackoverflow.com/questions/5884136/extjs-4-change-grid-store-on-the-fly)

正如最佳答案所说，我`reconfigure`在网格上做了方法。一切正常，数据加载到网格中，但我的重要问题是调用方法后网格的事件不再起作用`reconfigure`，例如我的`actioncolumn`网格中有一个，之后，`handler`回调函数不起作用：

```
items: [{
    icon: '/accept.png',
    tooltip: "Boo",
    handler: function(grid, rowIndex, colIndex) {
        debugger;
    }
}] 
```

还有其他解决方案吗？

# c++ - 带有 cin 实现问题的指针

> ID：14919998
> 
> 赞同：0
> 
> 时间：2013-02-17T10:11:15.973
> 
> 标签：c++

我是 CPP 的新手。我正在尝试使用`pointer`和`cin`组合，这会产生奇怪的结果。

```
int *array;
int numOfElem = 0;
cout << "\nEnter number of  elements in array : ";  
cin  >> numOfElem;
array = new (nothrow)int[numOfElem];

if(array != 0)
{
    for(int index = 0; index < numOfElem; index++)
    {
        cout << "\nEnter " << index << " value";
        cin >> *array++;
    }

    cout << "\n values are : " ;
    for(int index = 0; index < numOfElem; index++)
    {
        cout << *(array+index) << ",";
    }
}else
{
    cout << "Memory cant be allocated :(";
} 
```

输出是

![在此处输入图像描述](../Images/6ba183d1c345c05be1b325f407bcb973.png)

我的代码有什么问题？

问候，
沙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T10:13:15.987

循环内部`array++`增加了指针，所以当你完成第一个循环时，`array`将指向最初分配的数组之外。

做就是了

```
cin >> *(array+index); 
```

或者干脆

```
cin >> array[index]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T10:13:35.333

您`array`在第一个循环中推进指针 , ：

```
for(int index = 0; index < numOfElem; index++)
{
    cout << "\nEnter " << index << " value";
    cin >> *array++;
} 
```

然后你假装你在第二个循环中使用原始的、未修改的指针：

```
cout << "\n values are : " ;
for(int index = 0; index < numOfElem; index++)
{
    cout << *(array+index) << ",";
} 
```