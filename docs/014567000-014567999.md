# StackOverflow 问答 14567000-14567999

# php - 如何将当前节点链接到下一个节点？

> ID：14567002
> 
> 赞同：1
> 
> 时间：2013-01-28T16:51:44.110
> 
> 标签：php, drupal, drupal-7, drupal-modules

示例我想添加 5 个不同的节点。当我单击第一个节点时，我想查看寻呼机（1 个，共 5 个）当我单击下一步时，它将转到下一个节点页面。看这里[http://transcribe.archives.gov/content/communication-relating-katyn-forest-massacre](http://transcribe.archives.gov/content/communication-relating-katyn-forest-massacre)

有不同的内容没有一个分页的内容。它是 Drupal Trancribr distrubiton。如何使该寻呼机成为我的 Drupal 站点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:28:59.397

您可能想查看上一个/下一个 API 模块：

[http://drupal.org/project/prev_next](http://drupal.org/project/prev_next)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T08:42:22.513

考虑使用 Drupal 的`Book module`. 它是一个核心模块。

Drupal.org 文档使用`Book module`.

# angularjs - AngularJS e2e 测试：如何获取 repeater().count() 的值？

> ID：14567018
> 
> 赞同：6
> 
> 时间：2013-01-28T16:52:29.180
> 
> 标签：angularjs, karma-runner, end-to-end

# 问题

调用`repeater('#myTable tr','Rows').count();`返回 a `Future`，而不是整数。我需要获取整数值，以便确认向表中添加了额外的行。

# 代码

```
it('should add a new user when save button is clicked',function()
    {
        showModal();

        //here I'm trynig to store the row count of my table into  a local variable.
        //a future is returned who's 'value' field is undefined.
        var memberCount = repeater('#memberTable tr','Member Rows').count();

        //this outputs 'undefined'
        console.log(memberCount.value);

        input('editedMember.name').enter('John');
        input('editedMember.grade').enter(5);
        input('editedMember.ladderPosition').enter(3);

        element('#saveMemberButton').click();
        sleep(1);
        expect(element(modalId).css('display')).toBe('none');

        //here is where I want to do the comparison against the above stored memberCount
        expect(repeater('#memberTable tr', 'Member Rows').count()).toBe(memberCount.value + 1);

    }); 
```

# 测试结果

```
Chrome 25.0 e2e should add a new user when save button is clicked FAILED
    expect repeater 'Member Rows ( #memberTable tr )' count toBe null
    /Users/jgordon/learning/chessClub/web-app/test/e2e/scenarios.js:45:3: expected null but was 6
Chrome 25.0: Executed 2 of 2 (1 FAILED) (1 min 4.117 secs / 1 min 3.773 secs) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T17:25:32.530

深入了解 Angularjs 的 e2e 支持的源代码会发现，您必须调用`execute()`才能`Future`让它填充其值。此外，当您打电话时，`execute`您必须提供“完成”功能，`execute()`否则 Testacular 将（奇怪的是！）跳过您的测试。

# 代码

```
var rowCountFuture = repeater('#memberTable tr','Member Rows').count();

        rowCountFuture.execute(function(){
        });

        var memberCount = rowCountFuture.value; 
```

虽然我很高兴看到这个作品，但我担心可能会出现一些异步错误，而且，我觉得这是一个 hack，而不是正确的方法。有任何想法吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-30T15:36:02.330

基于最新的量角器版本：

```
it('should add a new user when save button is clicked', function() {
    var memberCount;
    element.all(by.repeater('#memberTable tr','Member Rows')).count().then(function(value) {
        memberCount = value;
    });
    ...
    // then do all your entering user info, saving etc.
    ...
    browser.refresh(); // or however you want to load new data
    expect(element.all(by.repeater('#memberTable tr','Member Rows')).count()).toEqual(memberCount + 1);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-09T04:21:05.860

我遇到了同样的问题，`value`并且*在*调用`execute()`. 我发现这种方法更可靠：

```
var getCount = repeater('ul li').count();
getCount.execute(function(value) {
    expect(value).toEqual(3);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-22T02:37:37.413

您可以在定位器返回的异步承诺中最轻松地做到这一点

```
element.all(By.repeater 'thing in things').then(function(elements){
      count = elements.length;
      expect(count).toEqual(3);
}); 
```

# google-app-engine - GAE 从 localhost:8080/_ah/admin/interactive 更新多条记录

> ID：14567019
> 
> 赞同：-1
> 
> 时间：2013-01-28T16:52:30.477
> 
> 标签：google-app-engine, google-cloud-datastore, localhost

我在本地主机上使用 Google App Engine。我有一个关于带有`summary`文本字段的书籍的数据存储。许多`summary`条目都有以下两行，我想将它们更改为随后的一行：

将被替代：

```
Many, many years ago
In a land far, far away 
```

替代品：

```
Once upon a time, 
```

要通过`http://localhost:8080/_ah/admin/interactive`控制台进行更改，我执行的查询是什么？

编辑：

每个`summary`字段包含大约两段文字，大约 20 行。在这些段落中，我需要找到两个特定的行并将它们替换为一个特定的行。换句话说，我并不是想用新的内容替换整个摘要内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:30:43.747

在[交互式控制台](https://developers.google.com/appengine/docs/python/tools/devserver#The_Development_Console)中，您应该能够执行以下操作：

```
to_replace = """
             Many, many years ago
             In a land far, far away
             """
replace_with = 'Once upon a time,'

to_change = db.GqlQuery("SELECT * FROM Books WHERE summary = :1", to_replace)
for entity in to_change:
    entity.summary = replace_with
    entity.put() 
```

# c# - 当 ClickOnce 应用程序注意到安装了错误版本的 .Net 时自定义错误消息

> ID：14567021
> 
> 赞同：0
> 
> 时间：2013-01-28T16:52:47.030
> 
> 标签：c#, clickonce, custom-errors

当您尝试在运行 .Net 3.5 的机器上运行 .Net 4 ClickOnce 应用程序时，会弹出以下错误：

```
Unable to install or run this application. This application requires your system
to be updated to Microsoft Common Language Runtime Version 4.0.30319.0.

Please contact your system administrator. 
```

我的问题是，有什么方法可以自定义此错误消息的正文，以便我可以输入自定义电话号码来拨打电话，而不是显示上面的内容？

注意：我不能只包含用户安装的先决条件，因为用户没有足够的权限自行安装，因此我想在错误消息中添加一个电话号码给我们的技术支持人员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:06:50.300

让我们考虑一下：清单文件启动部署文件启动可执行文件，我认为错误消息来自部署文件，因为如果没有适当的框架，可执行文件就无法运行。因此，在传统意义上，您的问题的答案是否定的。

当然，您可以使用现有的应用程序或服务来自定义此类错误消息，但您也将无法部署该系统。我没有得到的是我的 clickonce 应用程序为您自己解决问题安装了框架，如果您出于某种原因不这样做，我建议将 .NET 4 FW 的可执行文件放在共享上并从那里链接人们。

你可以这样做的另一种黑客方式，如果你的设置和我的一样，你有一个 clickonce 安装的网页，也许你可以签入那个网页？您必须从 .htm 更改为 .aspx，但这在 iis 服务器上不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:46:17.790

这是您可以`catch`在代码中使用的异常吗？如果是这样，您可以使用自己的消息创建并引发异常。

```
throw new Exception("your message here"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T22:53:12.753

您还可以检查`Environment.Version`初始化序列上的值以查看系统上安装了哪个版本的 .NET，然后相应地显示一条消息。

# file - 使用 7zip 按年归档文件

> ID：14567022
> 
> 赞同：0
> 
> 时间：2013-01-28T16:52:47.377
> 
> 标签：file, batch-file, 7zip

我有一个运行 7zip 的批处理脚本，它允许我将所有文件压缩到一个文件夹中。我只想压缩修改日期为 2010 年或我选择的其他日期的文件。我想在将文件归档到 zip 文件夹后删除这些文件。这是我的逻辑。查找 2012 年的文件并将这些文件存档到名为 2012 的文件夹中。压缩文件夹并删除文件。0

这就是我到目前为止所拥有的。

```
@ECHO OFF

REM This sets name of the zip file
Set choice=
set /p choice=What is the year of the files?
PAUSE

REM This sets the path of the file
Set path=
set /p path=What is the path of the files on C:\'path'\?

REM Use 7Zip to Zip files in folder c:\path and place the zip archive in C:\path

ECHO.
ECHO Zipping all files in C:\%path% and moving archive to c:\%path%
ECHO.
PAUSE

C:\7z a -tzip "C:\%path%\%choice%.zip" "C:\%path%\*.*" -mx5
ECHO.
PAUSE

ECHO Would you like to Delete the files in orginal folder?
DEL "C:\%path%\*.*"
PAUSE

ECHO File is now zipped 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:42:36.077

看起来很简单。顺便说一句，我不熟悉 7zip 的命令行开关。我认为您已经拥有 7z.exe 的语法，这是理所当然的。

```
@echo off

set 7z=C:\7z.exe
if not exist %7z% set /p 7z="Path to 7-zip executable? "

set /p year="What year do you wish to archive? "

set /p dir="What is the path of the files you wish to archive? "

mkdir "%year%"

rem output of dir is date time am/pm size filename
rem filename = 5th + additional tokens
for /f "tokens=5*" %%I in ('dir "%dir%" ^| find "/%year%"') do move "%dir%\%%I %%J" "%year%"

%7z% a -tzip "%dir%\%year%.zip" "%year%" -mx5

set /p I="I'm about to delete the %year% folder.  Hit Ctrl-C if this is a bad idea, or hit Enter to continue."
rmdir /q /s "%year%"

echo Done.  w00p. 
```

我认为你缺少的是`for`循环。正如我所写的那样，它执行目录列表，在用户输入时忽略与年份不匹配的任何内容，然后将令牌 5* 移动到 %year% 目录进行压缩。

# java - 使用 USB 连接的 Zebra 打印机在 Windows 7 中打印 ZPL

> ID：14567028
> 
> 赞同：2
> 
> 时间：2013-01-28T16:52:58.290
> 
> 标签：java, usb, zpl

我正在尝试从 Windows 7 中的 Java 应用程序将一些 ZPL 代码发送到通过 USB 连接的 Zebra TLP 2824。我尝试了不同的方法，但还无法打印。在驱动程序设置中，我激活了直通模式并尝试使用通用/文本模式驱动程序安装打印机，但没有任何效果。

我总是在打印队列中遇到未指定的 Windows 错误。

这是我的代码：

```
 try {

           PrintService psZebra = null;
           String sPrinterName = null;
           PrintService[] services = PrintServiceLookup.lookupPrintServices(null, null);

           for (int i = 0; i < services.length; i++) {

               PrintServiceAttribute attr = services[i].getAttribute(PrinterName.class);
               sPrinterName = ((PrinterName) attr).getValue();

               if (sPrinterName.toLowerCase().indexOf("generic") >= 0) {
                   psZebra = services[i];
                   System.out.println(psZebra);
                   break;
               }
           }

           if (psZebra == null) {
               System.out.println("Zebra printer not found.");
               return;
           }
           DocPrintJob job = psZebra.createPrintJob();

           String s = "${^XA^FO100,100^BY7^BCN,100,Y,N,N^FD123456^FS^XZ}$";

           byte[] by = s.getBytes();
           DocFlavor flavor = DocFlavor.BYTE_ARRAY.AUTOSENSE;
           Doc doc = new SimpleDoc(by, flavor, null);
           job.print(doc, null);

       } catch (PrintException e) {
           e.printStackTrace();
       } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T18:59:01.090

看来我已经很亲近了。我的打印机不支持 ZPL，我不得不使用 EPL2 代码。另一件事是使用 an`InputStream`而不是`byteArrays`

这就是改变：

```
DocPrintJob job = psZebra.createPrintJob();

String s =  "N"+"\n"+
        "q305"+"\n"+
        "Q203,26"+"\n"+
        "B55,26,0,1,2,2,152,B,\""+code+"\""+"\n"+
        "P1,1";

InputStream is = new ByteArrayInputStream(s.getBytes());
DocFlavor flavor = DocFlavor.INPUT_STREAM.AUTOSENSE;
Doc doc = new SimpleDoc(is, flavor, null);

job.print(doc, null);
try {
is.close();
} catch (IOException e) {
e.printStackTrace();
} 
```

# android - Android，如何将数据从 SQL DB 填充到自定义数组适配器？

> ID：14567029
> 
> 赞同：0
> 
> 时间：2013-01-28T16:53:04.067
> 
> 标签：android, sql, listview

我正在尝试将数据加载到`mArrayAdapter`. 这是可能吗？

我希望列表看起来就像其他活动中的其他列表一样。

```
-------------------------------
Startpage.java,
-------------------------------
package com.example.sqltest;
import android.app.ListActivity;

import android.content.Context;
import android.content.Intent;
import android.content.res.AssetManager;
import android.graphics.Color;
import android.graphics.Typeface;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemLongClickListener;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class Startpage extends ListActivity {
    final Context context = this;
    String[] startpage;
    private SQLiteAdapter mySQLiteAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        startpage = new String[]{SQLiteAdapter.KEY_CONTENT}; //  <--- This returns the word"content" 

        //startpage = getResources().getStringArray(R.array.startpage);  <---- How do I load SQL DATA to here?

        setListAdapter(new mArrayAdapter(this, startpage));
        mySQLiteAdapter = new SQLiteAdapter(this);
        mySQLiteAdapter.openToWrite();
        mySQLiteAdapter.deleteAll();
        mySQLiteAdapter.insert("this");
        mySQLiteAdapter.insert("that");
        mySQLiteAdapter.insert("where");
        mySQLiteAdapter.close();
        getListView().setOnItemClickListener(

        new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                switch (position) {
                case 0:
                    Intent int1 = new Intent(view.getContext(),
                            AndroidSQLite.class);
                    startActivity(int1);

                    break;
                case 1:
                    Intent int2 = new Intent(view.getContext(),
                            AndroidSQLite.class);
                    startActivity(int2);

                    break;
                case 2:
                    Intent int3 = new Intent(view.getContext(),
                            AndroidSQLite.class);
                    startActivity(int3 );

                    break;
                case 3:
                    Intent int4 = new Intent(view.getContext(),
                            AndroidSQLite.class);
                    startActivity(int4 );

                    break;

                }

            }
        });

    }

    public class mArrayAdapter extends ArrayAdapter<String> {
        private final Context context;
        private final String[] values;

        public mArrayAdapter(Context context, String[] values) {
            super(context, R.layout.startpage, values);
            this.context = context;
            this.values = values;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View rowView = inflater.inflate(R.layout.startpage, parent, false);
            TextView textView = (TextView) rowView.findViewById(R.id.startpage);
            ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);

            ListView list = getListView();

            list.setOnItemLongClickListener(new OnItemLongClickListener() {

                @Override
                public boolean onItemLongClick(AdapterView<?> parent,
                        View view, int position, long id) {                 

                    String s = values[position];

                    System.out.println(s);

                    if (s.equals("this")) {                     
                        Toast.makeText( Startpage.this, getItem(position), Toast.LENGTH_LONG).show();
                    } else if (s.equals("that")) {
                        Toast.makeText( Startpage.this, getItem(position), Toast.LENGTH_LONG).show();;
                    } else if (s.equals("where")) {
                        Toast.makeText( Startpage.this, getItem(position), Toast.LENGTH_LONG).show();
                    } else {
                        Toast.makeText( Startpage.this, getItem(position), Toast.LENGTH_LONG).show();
                    }               
                    return true;
                }
            });         

            textView.setText(values[position]);         
            Context context1 = context;
            AssetManager assetManager = context1.getResources().getAssets();
            Typeface typeface = Typeface.createFromAsset(assetManager, (getString(R.string.font1))); 
            textView.setTextColor(Color.YELLOW);
            textView.setTypeface(typeface);     
            String s = values[position];

            System.out.println(s);

            if (s.equals("this")) {
                imageView.setImageResource(R.drawable.ic_launcher);
            } else if (s.equals("that")) {
                imageView.setImageResource(R.drawable.ic_launcher);
            } else if (s.equals("where")) {
                imageView.setImageResource(R.drawable.ic_launcher);
            } else {
                imageView.setImageResource(R.drawable.ic_launcher);
            }

            return rowView;
        }
    }   
}
-------------------------------
SQLiteAdapter.java
-------------------------------
package com.example.sqltest;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase.CursorFactory;

public class SQLiteAdapter {

    public static final String MYDATABASE_NAME = "MY_DATABASE";
    public static final String MYDATABASE_TABLE = "MY_TABLE";
    public static final int MYDATABASE_VERSION = 1;
    public static final String KEY_ID = "_id";
    public static final String KEY_CONTENT = "Content";

    //create table MY_DATABASE (ID integer primary key, Content text not null);
    private static final String SCRIPT_CREATE_DATABASE =
        "create table " + MYDATABASE_TABLE + " ("
        + KEY_ID + " integer primary key autoincrement, "
        + KEY_CONTENT + " text not null);";

    private SQLiteHelper sqLiteHelper;
    private SQLiteDatabase sqLiteDatabase;

    private Context context;

    public SQLiteAdapter(Context c){
        context = c;
    }

    public SQLiteAdapter openToRead() throws android.database.SQLException {
        sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
        sqLiteDatabase = sqLiteHelper.getReadableDatabase();
        return this;    
    }

    public SQLiteAdapter openToWrite() throws android.database.SQLException {
        sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
        sqLiteDatabase = sqLiteHelper.getWritableDatabase();
        return this;    
    }

    public void close(){
        sqLiteHelper.close();
    }

    public long insert(String content){

        ContentValues contentValues = new ContentValues();
        contentValues.put(KEY_CONTENT, content);
        return sqLiteDatabase.insert(MYDATABASE_TABLE, null, contentValues);
    }

    public int deleteAll(){
        return sqLiteDatabase.delete(MYDATABASE_TABLE, null, null);
    }

    public Cursor queueAll(){
        String[] columns = new String[]{KEY_ID, KEY_CONTENT};
        Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns, 
                null, null, null, null, null);

        return cursor;
    }

    public class SQLiteHelper extends SQLiteOpenHelper {

        public SQLiteHelper(Context context, String name,
                CursorFactory factory, int version) {
            super(context, name, factory, version);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            db.execSQL(SCRIPT_CREATE_DATABASE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub

        }

    }

}
----------------------------------
startpage.xml   layout
----------------------------------
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="bottom|left"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/logo"
        android:layout_width="50sp"
        android:layout_height="50sp"
        android:layout_marginLeft="5sp"
        android:layout_marginRight="20sp"
        android:layout_marginTop="5sp" /> 

    <TextView
        android:id="@+id/startpage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:gravity="bottom|left"
        android:text="@+id/label"
        android:textSize="27sp" />
</LinearLayout>
----------------------------------
main.xml layout
----------------------------------
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<ListView
    android:id="@+id/contentlist"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/>
</LinearLayout>
----------------------------------
row.xml  layout
----------------------------------
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/text"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dip"/> 
```

该代码基于[**教程**](http://android-er.blogspot.ch/2011/06/simple-example-using-androids-sqlite_02.html)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:44:39.410

调用后您尚未更新适配器的数据源`setListAdapter(new mArrayAdapter(this, startpage));`。所有`mySQLiteAdapter.<foo>`代码都只是修改了数据库中的数据，您永远不会真正再次检索它并将其交换到您的适配器中。您所拥有的只是一个包含一项的字符串数组，其值为“内容”。

在您的 mArrayAdapter 类中添加一个方法：

```
public void setData(String[] newData) {
    values = newData;
    notifyDataSetChanged(); // tells the adapter the data has been updated
} 
```

虽然，您可以使用 a[`CursorAdapter`](https://developer.android.com/reference/android/widget/CursorAdapter.html)并使用`Cursor`从查询数据库中获得的来填充列表。可以查看sdk中的ApiDemos示例项目，了解如何使用`CursorAdapter`。

# java - 为什么不能长期从零开始？

> ID：14567033
> 
> 赞同：4
> 
> 时间：2013-01-28T16:53:12.030
> 
> 标签：java, double, native, long-integer

> **可能重复：**
> [09 不被识别，而 9 被识别](https://stackoverflow.com/questions/970039/09-is-not-recognized-where-as-9-is-recognized)

只是想知道，当我声明以下内容时：

```
public static final long __VERSIONCODE = 0L;
public static final long __VERSIONCODE = 9L; 
```

这会起作用，但每当我尝试这个时：

```
public static final long __VERSIONCODE = 09L;
public static final long __VERSIONCODE = 08235L; 
```

我收到一个错误（在 Eclipse 中）：

> “long 类型的文字 09L 超出范围。”

所以我认为那是因为它以零开头。

但后来我尝试将第二个数字降低为八：

```
public static final long __VERSIONCODE = 07235L; 
```

这给了我没有错误。

然后：

```
public static final long __VERSIONCODE = 07239L; 
```

也给了我一个错误。

所以我真的不明白我可以将哪些值分配给 long 而我不能。为什么我会收到此错误？（其实只是我很好奇，我也可以只用一个String作为我的版本代码）。

另外，我忘了提到使用双精度而不是长整数的行为完全相同。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-28T16:55:30.590

当您将 0 放在整数类型文字前面时，它将解释为表示[八进制数](http://en.wikipedia.org/wiki/Octal)。由于“9”不是八进制数的有效数字，这可能就是正在发生的事情。尝试打印出“010L”的（十进制）值，看看是否显示“8”来确认。

注意：不确定 Java 是否这样做，或者这是否纯粹是 Eclipse 的工件。如果是后者，打印出 010L 将显示 10。如果是前者，您会看到 8。如果它只是 Eclipse 的一个工件，您可以通过尝试 01L、02L、...、07L 来确认，这应该都可以工作，并且08L 和 09L 会失败。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T17:00:06.237

对常量使用前导零表示八进制表示法，仅允许使用数字 0..7。所以如果你使用前导零来制作漂亮的数字，这是一个坏主意，因为它代表的值是不同的。

请参阅[http://docs.oracle.com/javase/specs/jls/se5.0/html/lexical.html#3.10.1](http://docs.oracle.com/javase/specs/jls/se5.0/html/lexical.html#3.10.1)并注意“八进制数字”。

# ruby-on-rails - ruby on rails：rspec 在应该测试时没有失败

> ID：14567034
> 
> 赞同：1
> 
> 时间：2013-01-28T16:53:14.113
> 
> 标签：ruby-on-rails, ruby, macos, rspec

```
 require 'spec_helper'

describe PagesController do
  render_views

  describe "GET 'home'" do
    it "should be successful" do
      get 'home'
      response.should be_success
    end
  end

  describe "GET 'about'" do
    it "should be successful" do
      get 'about'
      response.should be_success
    end
  end

  describe "GET 'contact'" do
    it "should be successful" do
      response.should be_success
    end
  end

end 
```

上面是我在学习 Ruby on rails 测试基础知识时编写的一个非常简单的测试，问题是它应该没有通过“接触”测试，因为我的 app/controllers/pages_controller.rb 中没有这个.

它返回以下内容

```
 Finished in 0.04558 seconds
3 examples, 0 failures 
```

因此，它会成功计算测试，但如果其中之一是错误的，它不会失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:01:06.650

如果您已经联系了视图文件，这可能是通过联系的原因。尝试删除这些文件或重命名文件并再次检查。

（或者）

如果您不在测试环境中关闭缓存，您可能会遇到同样的问题。转到`config/environments/test.rb`并更改`config.cache_classes = true`为`config.cache_classes = false`

如果不让知道，这可能是原因。

# ios - 使用该子视图的实例绘制到 UIView 子视图

> ID：14567035
> 
> 赞同：0
> 
> 时间：2013-01-28T16:53:14.307
> 
> 标签：ios, objective-c, cocoa, drawing, core-graphics

我正在尝试从另一个类绘制到 UIView 子视图。

1.  `MainViewController`我在 IB 中将 UIView 拖入了一个视图。
2.  我创建了一个类并将 UIView's（我之前在 IB 中`DrawView`拖到's 视图上的那个）类更改为.`MainController``DrawView`

3.  `DrawView`我可以通过编码绘制到该UIView 子视图，`DrawView`以便按预期工作。

4.  我有一个自定义`UITableViewController`类，想`DrawView`从自定义中绘制“UIView” `UITableViewController`。怎么做？

    *   `DrawView`我已经尝试从自定义`UITableViewController`和创建函数中创建一个新实例`DrawView`，我可以调用它来绘制。不起作用，因为我创建的实例与启动时创建的 IB 中`DrawView`的“ `DrawView`UIView”不同。新创建`DrawView`的 bounds 也为零，传入 bounds for`initWithFrame`不起作用。

我不明白如何获得`DrawView`在 IB 中创建的相同实例以在 custom 中使用`UITableViewController`。

如果上面的内容太罗嗦，我想调用绘图方法从另一个类中绘制它的类中的 UIView 子视图。

我该如何实施？谢谢。

# javascript - 谷歌翻译/基本 Javascript 问题

> ID：14567040
> 
> 赞同：1
> 
> 时间：2013-01-28T16:53:26.313
> 
> 标签：javascript, api, google-translate

鉴于以下

```
 <textarea style="width: 150px; height: 150px" id="sourceText">Hello Justin how are you today?</textarea>
<textarea style="width: 150px; height: 150px" id="translation"></textarea>
<button id="translateMe" value="Translate!" onclick="translateThis();"></button>
<script>
  function translateText(response) {document.getElementById("translation").innerHTML += response.data.translations[0].translatedText;}
  function translateThis(){
      var sourceText = escape(document.getElementById("sourceText").innerHTML);
      var source = 'https://www.googleapis.com/language/translate/v2?key=MY_KEY_HERE&source=en&target=es&callback=translateText&q=' + sourceText;
      return source;
  }
</script> 
```

如何连接此按钮以处理将翻译文本放入翻译文本区域的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:58:21.030

你少了一步。“源”变量需要成为`src`HTML`script`元素的属性。

仔细查看他们的[“入门”](https://developers.google.com/translate/v2/getting_started#JSONP)文档。

顺便说一句，其他人正在将您指向 AJAX，但这实际上行不通。由于 Google URL 未托管在您的网站上，因此“同源”政策将阻止您使用 AJAX。Google 方法的目的是使用来自服务器端代码（例如 Java、ASP.NET、Ruby）的 API 调用，或者使用称为“JSONP”的技术直接在 javascript 中使用，该技术涉及在服务器端创建“脚本”元素-飞。

（您还应该知道，当您使用后一种方法时，您会在页面源中暴露您的 Google 翻译 API 密钥，因此用户可能会窃取它。）

编辑添加：这是来自 Google 的 API 文档的示例代码：

```
<div id="sourceText">Hello world</div>
<div id="translation"></div>
<script>
  function translateText(response) {
    document.getElementById("translation").innerHTML += "<br>" + response.data.translations[0].translatedText;
  }
</script>
<script>
  var newScript = document.createElement('script');
  newScript.type = 'text/javascript';
  var sourceText = escape(document.getElementById("sourceText").innerHTML);
  // WARNING: be aware that YOUR-API-KEY inside html is viewable by all your users.
  // Restrict your key to designated domains or use a proxy to hide your key
  // to avoid misuage by other party.
  var source = 'https://www.googleapis.com/language/translate/v2?key=YOUR-API-KEY&source=en&target=de&callback=translateText&q=' + sourceText;
  newScript.src = source;

  // When we add this script to the head, the request is sent off.
  document.getElementsByTagName('head')[0].appendChild(newScript);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:57:49.727

您将希望使用您最喜欢的 AJAX 方法（我的在 JQuery 中是 $.ajax）发布到该 url，然后将响应放入您的文本字段。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

目前，您正在构建一个 URL，如果访问该 URL，它将获得您想要的答案 - AJAX 请求将以编程方式访问该 URL 并从中获取数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:03:27.017

我以这种方式解决了我的问题。

```
<script>          
function callbackDescription(response) {
     document.getElementById("siteDesc" + langCode).innerHTML = response.data.translations[0].translatedText;
              }

              var langCode;

              function translateToLangCode(lang) {
                  langCode = lang;
                  translateDescription();
              }

              function translateDescription() {
                  var faciDescScript = document.createElement('script');
                  faciDescScript.type = 'text/javascript';
                  var sourceText = escape(document.getElementById("siteDescEN").innerHTML);
                  var faciDesc = 'https://www.googleapis.com/language/translate/v2?key=API_KEY_HEREsource=en&target=' + langCode.toLowerCase() + '&callback=callbackDescription&q=' + sourceText;
                  faciDescScript.src = faciDesc;
                  document.getElementsByTagName('head')[0].appendChild(faciDescScript);
              }
</script> 
```

# python - Python 私有继承？如何欺骗 isinstance()？

> ID：14567048
> 
> 赞同：3
> 
> 时间：2013-01-28T16:53:54.947
> 
> 标签：python, database, django, orm

django核心代码片段：

```
class ForeignKey(RelatedField, Field):

    ...

    def db_type(self, connection):
        rel_field = self.rel.get_related_field()
        if (isinstance(rel_field, AutoField) or
                (not connection.features.related_fields_match_type and
                isinstance(rel_field, (PositiveIntegerField,
                                       PositiveSmallIntegerField)))):
            return IntegerField().db_type(connection=connection)
        return rel_field.db_type(connection=connection) 
```

这段代码非常糟糕，因为如果我定义一个继承自的自定义字段`AutoField`，那么我的 db_type 方法将被忽略。

我想做的是隐藏我的类是`AutoField`. 在 C++ 中，我会通过私有继承来做到这一点。

有没有办法欺骗`isinstance`返回`False`或隐藏继承？

我的自定义字段的代码：

```
class MyAutoField(models.AutoField):

    def __init__(self, length, *args, **kwargs):
        self.length = length
        super(MyAutoField, self).__init__(*args, **kwargs)

    def db_type(self, connection):
        if connection.vendor == 'oracle':
            return 'NUMBER(%s,0)' % (self.length)
        if connection.vendor == 'postgresql':
            if self.length <= 4:
                return 'smallint'
            if self.length <= 9:
                return 'integer'
            return 'bigint'
        return super(MyAutoField, self).db_type(connection) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T16:57:36.920

So I have a way to do it, but its via "monkey patching." You can't use `ABCMeta` because that requires you override your base class's metaclass.

You could "change" isinstance as follows. It is important that "patches" only gets imported once, and I would only do this if is no other way.

**patches.py**

```
import django.models
import mymodel
import __builtin__
def _isinstance(instance, clz):
    if clz is models.AutoField and isinstance_orig(instance, MyAutoField):
        return False
    return isinstance_orig(instance, clz)
__builtin__.isinstance_orig = __builtin__.isinstance
__builtin__.isinstance = _isinstance 
```

Then your test program:

```
class MyAutoField(models.AutoField): pass

x = MyAutoField()
print(isinstance(x, models.AutoField))
print(isinstance(x, models.MyAutoField)) 
```

* * *

Introducing Abstract Base Classes: [PEP-3119](http://www.python.org/dev/peps/pep-3119/) . Below is an abstract example...

```
class ABCMeta(type):

  def __instancecheck__(cls, inst):
    """Implement isinstance(inst, cls)."""
    return any(cls.__subclasscheck__(c)
               for c in {type(inst), inst.__class__})

  def __subclasscheck__(cls, sub):
    """Implement issubclass(sub, cls)."""
    candidates = cls.__dict__.get("__subclass__", set()) | {cls}
    return any(c in candidates for c in sub.mro()) 
```

# php - 上传多张图片到服务器

> ID：14567050
> 
> 赞同：2
> 
> 时间：2013-01-28T16:54:01.593
> 
> 标签：php, android, image

用户可以通过相机在android端拍摄5-6张照片。所以，我使用了 ACTION_IMAGE_CAPTURE。在 onActivityResult 我这样做是为了收集相机拍摄的图像的位图。假设第一张照片和第二张照片如下。

```
if(requestCode == 1)
{
    bitMap1 = (Bitmap)extras.get("data");
    imageView1.setImageBitmap(bitMap1);
    globalvar = 2;
}
if(requestCode == 2)
{
    bitMap1 = (Bitmap)extras.get("data");
    imageView2.setImageBitmap(bitMap2);
    globalvar = 2;
} 
```

**要将这些图像发送到 php 服务器，我执行以下操作。**

```
protected String doInBackground(Integer... args) {
            // Building Parameters

    ByteArrayOutputStream bao1 = new ByteArrayOutputStream();
    bitMap1.compress(Bitmap.CompressFormat.JPEG, 90, bao1);
    byte [] bytearray1 = bao1.toByteArray();
    String stringba1 = Base64.encode(bytearray1);

 ByteArrayOutputStream bao2 = new ByteArrayOutputStream();
    bitMap2.compress(Bitmap.CompressFormat.JPEG, 90, bao2);
    byte [] bytearray2 = bao2.toByteArray();
    String stringba2 = Base64.encode(bytearray2);

            String parameter1 = "tenant";
                String parameter2 = "price";

            List<NameValuePair> params = new ArrayList<NameValuePair>();

                params.add(new BasicNameValuePair("person",parameter1));
                params.add(new BasicNameValuePair("price",parameter2));
                params.add(new BasicNameValuePair("image1",stringba1));
                params.add(new BasicNameValuePair("image2",stringba2));

            JSONObject json = jParser.makeHttpRequest(requiredurl, "POST", params);

            Log.d("Details", json.toString());

                int success = json.getInt("connected");

                if (success == 1) {

                    //blah blah
                      }
        } 
```

这是**makeHttpRequest() 方法**：

```
public JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // Making HTTP request
        try {

            // check for request method
            if(method == "POST"){

                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);

                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            }       

       ................
       ....................... // Here the result is extracted and made it to json object
       .............................

        // return JSON 
        return jObj;  // returning the json object to the method that calls.

    } 
```

**下面是php代码片段：**

```
$name = $_POST[person];
$price = $_POST[price];
$binary1 = base64_decode($image2);
$binary2 = base64_decode($image2);

$file1 = tempnam($uploadPath, 'image2');
$fp1  = fopen($file1, 'wb');
fwrite($fp1, $binary1);
fclose($fp1);
.................
............................ 
```

但是我无法将图像存储在服务器端文件夹中。即使我在一些链接中看到说上传多张图片时 Base64 不是可取的方式。有人可以建议我如何进行吗？已经看过[这个](https://stackoverflow.com/questions/8940969/uploading-multiple-image-on-php-server-from-android)链接和许多其他链接，但由于我什至必须连同这些图像一起发送一些数据（如人名、价格），因此无法满足我的要求。非常感谢您对此的任何帮助。

**注意：**即使有人可以建议我如何将上面的临时文件（$file1）保存在服务器文件夹中，我也会非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T03:55:08.500

您是否考虑过使用 FTP 而不是您目前的方法？Apache 有一个名为 Apache 的 commons-net-ftp 库的库，可以轻松完成工作。

[使用 apache FTP 库](http://php.net/manual/en/function.move-uploaded-file.php)

这是我很久以前在stackoverflow上提出的一个问题。我之前实现了几乎相同的代码，但我发现 FTP 方法更容易将文件上传到服务器。

**@TemporaryNickName 如何与该图像一起发送其他数据。此外，我的图像数据是位图，而不是 uri。根据我现在的情况如何实现？**

*有很多教程向您展示如何将位图转换为图像文件（这几乎是临时保存文件并在 FTP 完成后立即删除的方法），此外，当您使用默认内置的相机应用程序拍照时，您的图像自动保存。那么发送数据应该单独完成，在这种情况下，我会用 $_POST 编写一个 PHP 脚本来接收数据而不是将其保存到数据库中或将其写入 XML*

* * *

要保存上传的文件，请使用

```
move_uploaded_file($src, $path); 
```

[移动上传的文件 doc](http://php.net/manual/en/function.move-uploaded-file.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T06:21:05.253

发送多种类型的数据使用`MultipartEntity`（来自您问题中提供的链接）而不是`URLEncodedEntity`. 这个想法是`MultipartEntity`只包含不同类型的主体（例如`StringBody`，`FileBody`等）。因此，如果您需要在 Base64 中发送图像，请将它们添加`StringBody`到`MultipartEntity`（应设置为您的请求的实体，使用`setEntity`）。

虽然，我强烈建议您将位图保存在磁盘（sd 卡）上并`FileBody`改用。它将为您节省大量内存（使用 Base64，您必须一次加载所有图像）并且......如果用户在上传时关闭您的应用程序怎么办？您将永远丢失位图。

PS不要忘记`Service`用于上传任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T10:32:05.793

这是我的代码片段，希望对您有所帮助：

```
private class AsyncTask1 extends AsyncTask<Void, Void, String>{

    @Override
    protected String doInBackground(Void... params) {

        boolean response = false;

        try {

            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            FileBody bin = new FileBody(new File("temp"));

            File tempImg  = new File("sdcard/signature.jpg");
            if(tempImg.exists())
            {
                checkimgfile=checkimgfile+"LPA"+tempImg;
                bin = new FileBody(tempImg, "image/jpg");
                reqEntity.addPart("txt_sign_lpa", bin);
                reqEntity.addPart("count_lpa",new StringBody("1"));
            }
            else
            {
                reqEntity.addPart("count_lpa",new StringBody("0"));
            }

                FileBody bin1 = new FileBody(new File("temp"));
                File tempImg1  = new File("sdcard/signature2.jpg");
                if(tempImg1.exists())
                {

                    checkimgfile=checkimgfile+"subject"+tempImg1;
                    bin1 = new FileBody(tempImg1, "image/jpg");
                    reqEntity.addPart("txt_sign", bin1);
                    reqEntity.addPart("count_subject",new StringBody("1"));
                }

                reqEntity.addPart("count",new StringBody("0"));

            reqEntity.addPart("name",new StringBody("Shaili"));
            reqEntity.addPart("age",new StringBody("47"));

            try
            {

            ConnectivityManager cm =
            (ConnectivityManager)getBaseContext().getSystemService(Context.CONNECTIVITY_SERVICE);

            NetworkInfo activeNetwork = cm.getActiveNetworkInfo();

            if(activeNetwork!=null && activeNetwork.isAvailable() && activeNetwork.isConnected())
            {
                String xml = "";
                HttpParams httpParameters = new BasicHttpParams();  
                HttpConnectionParams.setConnectionTimeout(httpParameters, 100000);
                HttpConnectionParams.setSoTimeout(httpParameters, 100000);
                final HttpClient httpclient = new DefaultHttpClient(httpParameters);
                final HttpPost httppost = new HttpPost("https://www.xyz.com/abc.php");//url where you want to post your data.
                httppost.setParams(httpParameters);

                httppost.setEntity(reqEntity);
                httppost.addHeader("Accept", "text/html");

                httppost.addHeader("Host", "www.xyz.com");
                httppost.addHeader("User-Agent",
                        "Android ");

                HttpResponse response1 = null;
                String errMessage = "Error";
                try {

                    response1 = httpclient.execute(httppost);
                    final HttpEntity resEntity = response1.getEntity();
                    InputStream content = resEntity.getContent();
                    BufferedReader b = new BufferedReader(new InputStreamReader(
                            content));
                    xml = XmlParser.getTrimmedResponse(b);

                    if (response1 != null){
                        if(Integer.toString(response1.getStatusLine().getStatusCode()).equals("200")){
                            return "success";
                        }
                    }

                } catch (Exception e) {

                    e.printStackTrace();
                    errorstring=errorstring+e.getLocalizedMessage();
                    errMessage = "Network error";

                    return errMessage;
                }

            }
            else if(activeNetwork==null)
            {

                return "Available";
            }

            }
            catch(Exception e)
            {

            Toast.makeText(getBaseContext(), "Network Connection not available", 1).show();
            progressDialog.dismiss();

            }

        } catch (Exception e) {

            errorstring=errorstring+e.getLocalizedMessage();
            return "Network error";

        }
        return "abc";
    }       

    protected void onPostExecute(String result) {

    //do your stuff

    }
} 
```

# parsing - 使用 sed 实时解析 maven 输出

> ID：14567051
> 
> 赞同：0
> 
> 时间：2013-01-28T16:54:04.457
> 
> 标签：parsing, sed, grep, flush

我正在尝试解析我的 mvn verify 输出以仅显示带有 INFO 标记的行。*请注意，maven实时*输出线到标准输出，而不是批量输出。我不认为这是 maven 的问题。

起初我尝试用 grep 来做：

```
$ mvn verify | grep INFO 
```

但似乎没有实时输出行，据我所知 grep 在输出之前会缓冲它的行，所以我必须在每次刷新之间等待几秒钟，然后同时打印几十行，不是很方便. 然后我想我会尝试使用 sed。

根据此[链接](http://www.grymoire.com/Unix/Sed.html#toc-uh-15b)，以下命令：

```
sed -n '/PATTERN/p' file
// is equivalent to 
grep PATTERN file 
```

并且根据此[链接](http://swtch.com/plan9port/man/man1/sed.html)， -l 选项应强制 sed 在每个换行符后刷新其输出缓冲区。所以现在我正在使用这个命令：

```
 $ mvn verify | sed -ln -e '/INFO/p' 
```

但我仍然得到与以前相同的结果，我每 30 秒左右刷新大量输出，我不知道我做错了什么。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:09:07.087

试试这个，如果你的 grep 支持它：

```
mvn verify | grep --line-buffered INFO 
```

如果您在终端中执行此操作并且仍然看到缓冲结果，那么它可能比 grep 进行缓冲更早，但我不熟悉`mvn`. （而且，是的，应该做同样的事情的`-l`选项`sed`，所以问题可能出在上游。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:03:55.070

试试这一行：

```
mvn verify | while read line; do echo $line|grep INFO; done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:17:14.007

我发现了问题所在，我正在使用一个脚本来为 maven 输出着色（请参见[此处](https://gist.github.com/1027800)），事实上，正是该脚本在管道中缓冲了输出。我忘了它，因为我用它作为别名，我想这是一个很好的教训，我以后不会那么容易别名了。无论如何，这是修复，我在 sed 调用的最后一行更改`-e`为：`-le`

```
 mvn $@ | sed -e "s/\(\[INFO\]\ \-.*\)/${TEXT_BLUE}${BOLD}\1/g" \
               -e "s/\(\[INFO\]\ \[.*\)/${RESET_FORMATTING}${BOLD}\1${RESET_FORMATTING}/g" \
               -e "s/\(\[INFO\]\ BUILD SUCCESSFUL\)/${BOLD}${TEXT_GREEN}\1${RESET_FORMATTING}/g" \
               -e "s/\(\[WARNING\].*\)/${BOLD}${TEXT_YELLOW}\1${RESET_FORMATTING}/g" \
               -e "s/\(\[ERROR\].*\)/${BOLD}${TEXT_RED}\1${RESET_FORMATTING}/g" \
               -le "s/Tests run: \([^,]*\), Failures: \([^,]*\), Errors: \([^,]*\), Skipped: \([^,]*\)/${BOLD}${TEXT_GREEN}Tests run: \1${RESET_FORMATTING}, Failures: ${BOLD}${TEXT_RED}\2${RESET_FORMATTING}, Errors: ${BOLD}${TEXT_RED}\3${RESET_FORMATTING}, Skipped: ${BOLD}${TEXT_YELLOW}\4${RESET_FORMATTING}/g" 
```

实际上，这告诉 sed 在每一行刷新它的输出，这正是我想要的。很抱歉，我没有找到另一个更通用的解决方法。我尝试使用[空](http://empty.sourceforge.net/)（参见[手册](http://www.linuxcertif.com/man/1/empty/)页）和[脚本](http://unixhelp.ed.ac.uk/CGI/man-cgi?script)，但这些解决方案都不适合我。

# gwt - 在 GWT 中为数据网格设置样式 - 一个项目中的多个网格

> ID：14567054
> 
> 赞同：0
> 
> 时间：2013-01-28T16:54:14.673
> 
> 标签：gwt, datagrid

我试图在一个项目中拥有多个数据网格。它们有一些不同的行为，因此也有不同的样式。第一个网格是完全自定义的网格，使用带有完全自定义 CSS 文件的 AbstractCellTableBuilder 构建行（使用 DataGrid.Resources 覆盖）。

我遇到的问题是我的第二个网格的自定义 CSS 正在应用于我的第一个网格。我没有看到任何编码重叠。似乎 CSS 类被匿名化了，所以它们出现在两个网格的元素上。

有什么想法吗？

如果有什么我可以提供的来澄清情况，请告诉我。

更新：

ReportSelectorGrid.css 定义了 DataGrid.Style 所需的每个类。他们都是空的。

```
 private SelectorDataGridResources gridResource = GWT.create(SelectorDataGridResources.class);
    public interface SelectorDataGridResources extends DataGrid.Resources {
        @Source({ "ReportSelectorGrid.css" })
        DataGrid.Style dataGridStyle();
    }; 
```

然后这是我的 UiFactory 方法：

```
 DataGrid<ReportSelectorItem> grid = new DataGrid<ReportSelectorItem>(-1, gridResource, KEY_PROVIDER); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:17:50.523

您必须声明一个`DataGrid.Style`子接口，否则它们将共享相同的混淆类名。另请参阅：[https ://code.google.com/p/google-web-toolkit/issues/detail?id=6144](https://code.google.com/p/google-web-toolkit/issues/detail?id=6144)

# javascript - 自调用函数中的不可变未定义

> ID：14567055
> 
> 赞同：3
> 
> 时间：2013-01-28T16:54:15.720
> 
> 标签：javascript, performance, security, ecmascript-5

ECMAScript 5 出现已经有一段时间了，并且在大多数现代浏览器（IE9、CH 19+、FF 4+）中都[得到了很好的支持，“不可变未定义”也是如此。](http://kangax.github.com/es5-compat-table/)虽然我一直看到“未定义”像这样被传递：

```
(function ( ..., undefined ) {

})(...); 
```

据我所知，[Crockford 的 JSLint 工具](http://www.jslint.com/)并不喜欢它：

```
Expected an identifier and instead saw 'undefined' (a reserved word). 
```

即使它没有被传递（函数调用没有参数）并且它实际上是一个标识符。我知道他的工具[不是](https://stackoverflow.com/questions/5020479/what-advantages-does-using-functionwindow-document-undefined-windo)我们应该遵循的圣经，另一方面[JSHint](http://www.jshint.com/)似乎并不关心它。

这在今天仍然被认为是最佳实践吗？它如何影响代码性能/安全性？考虑浏览器支持 >= IE9。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:22:05.197

> 这在今天仍然被认为是最佳实践吗？它如何影响代码性能/安全性？考虑浏览器支持 >= IE9。

就像[`undefined`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/undefined),[`Infinity`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Infinity)是全局对象的不可写属性，而不是字面量 like [`null`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/null)，因此它可以用作参数名称而不会引发错误。让我们考虑这样的函数

```
function example(Infinity) {
    return Infinity;
} 
```

In `example`,`Infinity`不再是不可写的属性，而是像*函数*的任何其他参数一样，被初始化为`undefined`好像没有传递任何内容或以其他方式获取参数的值。这意味着在这个*函数*中你不能仅仅假设它`Infinity`意味着*Infinity*，因为它没有，但你可以假设它意味着`undefined`。

So let's go back to the question of `undefined`. It will be initialised as `undefined` so the meaning will stay the same, however, it has now lost it's immutability within the function and therefore any typos assinging a values to `undefined` will have this error carried forward. Additionally, if a parameter is passed to the function the value will be different from the start.

Therefore to conclude, it does have an effect on security, as an `undefined` like this is no longer as "safe" because it has lost it's immutable status and can be changed.

* * *

It may be interesting to note that `undefined` is not actually a [reserved](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words) [word](http://es5.github.com/#x7.6.1). If you require an `undefined` for compatibility, rather than adding it as a parameter name, I would suggest using a simple `var undefined;` at the top of the function [or in the global namespace where you will find `var undefined; undefined = 1; undefined; // undefined`](http://jsbin.com/ekejuj/1/edit) where it is immutable.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:26:22.893

If you wanted to comply with [jsLint](http://www.jslint.com/), you could use another variable that is not a reserved word instead of `undefined`. The following complies with [jsLint](http://www.jslint.com/):

```
(function (window, document, undef) {
    'use strict';

}(window, document)); 
```

You would, however, need to remember to use your newly defined variable (in this case `undef` instead of `undefined`). *The strict mode above was added to comply with jsLint.* **This is mostly used so that you know for certain that the variable you are testing to be undefined is actually undefined.**

Note, that if you're running this example in the text area provided on the [jsLint](http://www.jslint.com/) website, you may need to define `window` and `document`. I was receiving two errors until I did so.

```
var window = window; //global window object
var document = document; //global window object 
```

**However,** I'm of the opinion that:

```
(function (..., undefined) {
    'use strict';

}(...)); 
```

is perfectly fine and more importantly, highly recommended.

There are cases where reserved words can be changed from their normal states. Such as setting `undefined` to `true`. Paul Irish discusses this briefly in his video: [http://paulirish.com/2010/10-things-i-learned-from-the-jquery-source/](http://paulirish.com/2010/10-things-i-learned-from-the-jquery-source/)

# css - 仅当您将鼠标悬停在其顶部时 CSS 按钮悬停/链接

> ID：14567059
> 
> 赞同：0
> 
> 时间：2013-01-28T16:54:31.143
> 
> 标签：css

[http://justxp.plutohost.net/gxx/](http://justxp.plutohost.net/gxx/)

尝试悬停按钮。

悬停/链接仅在您将鼠标悬停在按钮顶部时才有效。为什么会这样？

这是代码：

```
 <a href="#">
        <div class="button-1">
            <span class="bebas">play</span>
        </div>
    </a>
    <a href="#">
        <div class="button-1">
            <span class="bebas">community</span>
        </div>
    </a>
    <a href="#">
        <div class="button-1">
            <span class="bebas">account help</span>
        </div>
    </a> 
```

css

```
 .button-1 {
   background-image: url("../img/buttonoff.png");
   background-repeat: no-repeat;
width: 302px;
height: 82px;
margin-left: 1.4%;
margin-top: 1%;
float: left;
text-align: center;
line-height: 90px;
-webkit-transition: all 200ms ease-in-out;
        -moz-transition: all 200ms ease-in-out;
        -ms-transition: all 200ms ease-in-out;
        -o-transition: all 200ms ease-in-out;
        transition: all 200ms ease-in-out;
}
.button-1:hover {
background-image: url("../img/buttonon.png");
background-repeat: no-repeat;
width: 302px;
height: 82px;
-webkit-transition: all 200ms ease-in-out;
        -moz-transition: all 200ms ease-in-out;
        -ms-transition: all 200ms ease-in-out;
        -o-transition: all 200ms ease-in-out;
        transition: all 200ms ease-in-out;
} 
```

我看有什么不对吗？我试着把高度调大，还是不行。

我对此非常好奇！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:58:22.590

您需要在班级新闻上添加边距：

```
.news {
    position: relative;
    top: 5%;
    margin-top: 65px;
} 
```

编辑：

奖金！请在按钮的背景上使用 css3 背景渐变而不是图像。

[gradients.glrzad.com](http://gradients.glrzad.com)

希望这会有所帮助，如果我错过了干扰，对不起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:03:05.457

你的这个 div 覆盖了按钮

```
<div class="news"> 
```

你可以做的是：

要么你添加这个：

```
<br clear="all"/> //<---add this just above the div class named "news" 
```

或者你可以为 div 调整你的css `class news`：

```
.news {
   position: relative;
   top: 24%;
 } 
```

# d3.js - 简单的 D3 折线图示例

> ID：14567064
> 
> 赞同：4
> 
> 时间：2013-01-28T16:54:46.803
> 
> 标签：d3.js

我是一个 D3 新手，在这个库上的速度很慢。我试图让这个简单的 D3 面积图工作，但在显示它自己的实际面积时遇到了一些问题。我可以让轴正确显示数据的正确范围，但图表本身没有显示区域。

我正在向它提供看起来像这样的 JSON 数据，并且它似乎正在尽我所能地消耗数据。

```
[{"Date":"Date","Close":"Close"},{"Date":"20130125","Close":"75.03"},{"Date":"20130124","Close":"75.32"},{"Date":"20130123","Close":"74.29"},{"Date":"20130122","Close":"74.16"},{"Date":"20130118","Close":"75.04"},{"Date":"20130117","Close":"75.26"},{"Date":"20130116","Close":"74.34"},{"Date":"20130115","Close":"76.94"},{"Date":"20130114","Close":"76.55"}] 
```

这是我的代码

```
 var margin = {top: 20, right: 20, bottom: 30, left: 50},
        width = 960 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom;

    var parseDate = d3.time.format("%Y%m%d").parse;

    var x = d3.time.scale()
        .range([0, width]);

    var y = d3.scale.linear()
        .range([height, 0]);

    var xAxis = d3.svg.axis()
        .scale(x)
        .orient("bottom");

    var yAxis = d3.svg.axis()
        .scale(y)
        .orient("left");

    var area = d3.svg.area()
        .x(function(d) { return x(d.Date); })
        .y0(height)
        .y1(function(d) { return y(d.Close); });

    var svg = d3.select("body").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
      .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    d3.json('JSONstockPriceOverTime.php', function (data) {
      data.forEach(function(d) {
        d.Date = parseDate(d.Date);
        d.Close = +d.Close;
      });

    x.domain(d3.extent(data, function(d) { return d.Date; }));
    y.domain([0, d3.max(data, function(d) { return d.Close; })]);

    svg.append("path")
      .datum(data)
      .attr("class", "area")
      .attr("d", area);

    svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

    svg.append("g")
      .attr("class", "y axis")
      .call(yAxis)
    .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Price ($)");
    }); 
```

我应用了这种风格

```
 <style>

        body {
          font: 10px sans-serif;
        }

        .axis path,
        .axis line {
          fill: none;
          stroke: #000;
          shape-rendering: crispEdges;
        }

        .area {
          fill: steelblue;
        }

    </style> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T17:32:54.727

移除 json (JSONstockPriceOverTime.php) 文件的开始部分；

`{"Date":"Date","Close":"Close"},`

由于它具有定义为 json 格式的一部分的“日期”和“关闭”变量，因此您不需要像 csv 文件那样包含标头信息，并将“错误”添加到 json 加载行中

`d3.json("JSONstockPriceOverTime.php", function(error, data) {`

你应该全力以赴（为我工作）。

你正在取得良好的进展。

# css - 网站布局问题 (HTML5)

> ID：14567068
> 
> 赞同：-2
> 
> 时间：2013-01-28T16:55:00.173
> 
> 标签：css, html, web, web-testing

我正在设计我的第一个网站（为一家初创的 IT 支持公司），我在学习中遇到了一些问题。问题是：

1.  当我尝试在导航元素周围放置边框时，它将导航框向下移动到它仍然在左侧的位置，但在网页的主要（文章？）部分下方。它还使我的主要标题部分周围的边框更厚（仅导航框所在的一侧）。

2.  我无法让页脚与文章部分对齐（即使两者都应该与中心对齐。我怀疑页脚没有对齐，因为导航框正在改变文章的“中心”对齐方式）。

PS我不明白为什么这篇文章被遗忘了......我在其他任何地方都没有找到这个问题的答案，我也不认为这是一个毫无意义的问题。

这是我网站的 jsfiddle：http: [//jsfiddle.net/EchoedTruth/a4CLL/](http://jsfiddle.net/EchoedTruth/a4CLL/)

```
 `$` <nav style="background-color: red">
        <table> 

   <ul>
   <tr> 
   <td><li><a href="BTSMain.html"><b>Home</b> </a></li></td> 
   </tr> 
   <tr>
   <td> <li><a href="BTSServices.html"><b>Services We Offer</b></a></li>
   </td>
   </tr> 
   <tr>
   <td>
   <li><a href="BTSAboutUs.html"><b>About Our Company</b></a></li> 
   </td>
   </tr>
   <tr>
   <td>
   <li><a href="BTSTestPage.html"><b>Testing Page</b></a></li> 
   </td>
   </tr>
   <tr><td><li><a href="BTSTestPage2.html"><b>Testing Page 2</b></a></li></td></tr>

   </ul>
   </table>
    </nav>

    `$` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:10:15.410

您的 NAV 元素中的代码是无效的 HTML。

你有这个只是各种各样的错误：

```
<table>
<ul>
<tr> 
   <td><li><a href="BTSMain.html"><b>Home</b> </a></li></td> 
   </tr> 
   <tr>
   <td> <li><a href="BTSServices.html"><b>Services We Offer</b></a></li>
   </td>
   </tr> 
   <tr>
   <td>
   <li><a href="BTSAboutUs.html"><b>About Our Company</b></a></li> 
   </td>
   </tr>
   <tr>
   <td>
   <li><a href="BTSTestPage.html"><b>Testing Page</b></a></li> 
   </td>
   </tr>
   <tr><td><li><a href="BTSTestPage2.html"><b>Testing Page 2</b></a></li></td></tr>

   </ul>
   </table> 
```

尝试将其更改为：

```
<nav>
  <ul>
    <li><a href="BTSMain.html">Home</a></li>
    <li><a href="BTSServices.html">Services We Offer</a></li>
    <li><a href="BTSAboutUs.html">About Our Company</a></li> 
    <li><a href="BTSTestPage.html">Testing Page</a></li> 
    <li><a href="BTSTestPage2.html">Testing Page 2</a></li>
  </ul>
</nav> 
```

当您添加边框时，您的 NAV 元素移动不合适的原因可能是因为添加边框会使 NAV 元素具有更大的宽度。

例如，如果您的 NAV 元素是 300px 宽，并且您给它一个 1px 的边框，这将使 NAv 元素成为 302px。

阅读 HTML Box Model 以更好地理解这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:12:51.547

您的 HTML 结构不正确，您`<li>`在`<table>`? `<li>`元素只能与 a`<ul>`或`<ol>`元素一起使用。因此，在尝试样式之前，我会先修复您的导航：

CSS：

```
ul {
    border:1px solid #000; // border around all li elements
}

ul li {
   border:1px solid #666; // border around each li element
} 
```

HTML：

```
<nav style="background-color:red;">
    <ul>
        <li><a href="BTSMain.html"><b>Home</b></a></li>
        <li><a href="BTSServices.html"><b>Services We Offer</b></a></li>
        <li><a href="BTSAboutUs.html"><b>About Our Company</b></a></li>
        <li><a href="BTSTestPage.html"><b>Testing Page</b></a></li>
        <li><a href="BTSTestPage2.html"><b>Testing Page 2</b></a></li>
    </ul>
</nav> 
```

# c# - 在控制器中查找特定的 HttpGet 操作

> ID：14567071
> 
> 赞同：1
> 
> 时间：2013-01-28T16:55:19.010
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

考虑以下情况。在我的控制器中，我有：

```
public ActionResult Edit(int id)
{
  ...
}

[HttpPost]
public ActionResult Edit(Model model)
{
  ...
} 
```

我还有一个`ActionFilterAttribute`，它适用于同一控制器的其他一些操作。在`OnActionExecuting`我需要获取操作的方法`ActionDescriptor`中`HttpGet` `Edit`：

```
public override void OnActionExecuting(ActionExecutingContext filterContext)
{
    // as this is called from the same controller, I use
    ActionDescriptor action = filterContext.ActionDescriptor.ControllerDescriptor
             .FindAction(filterContext.Controller.ControllerContext, "Edit");
    ...
} 
```

问题是，该方法在请求的情况下`FindAction`返回对操作的“引用” 。我如何让它只寻找动作？`HttpPost` `Edit``POST``HttpGet`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T14:45:05.290

你可以使用也许属性？

```
public class FooAttribute
    {

    }

[FooAttribute]
public ActionResult Edit(int id)
{
  ...
} 
```

您可以检查 OnActionExecution；例子;

```
var isHasAttribute= filterContext.ActionDescriptor.IsDefined(typeof(FooAttribute), true); 
```

# sql - 生成视图和存储过程脚本

> ID：14567080
> 
> 赞同：0
> 
> 时间：2013-01-28T16:55:44.093
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

SQL Server 中是否有任何表实际存储视图和存储过程的元数据？

即他们的实际脚本。

任何知识都会非常有帮助

谢谢 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:00:02.523

是的，脚本是这样检索的：

```
SELECT name, object_definition(object_id) AS script
FROM sys.objects
WHERE type_desc IN ('SQL_SCALAR_FUNCTION',
    'SQL_STORED_PROCEDURE',
    'SQL_TABLE_VALUED_FUNCTION',
    'SQL_TRIGGER',
    'VIEW') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:58:16.990

`sp_helptext`是你的朋友

[http://msdn.microsoft.com/en-us/library/ms176112.aspx](http://msdn.microsoft.com/en-us/library/ms176112.aspx)

(xxx)

# spring - Spring占位符格式

> ID：14567083
> 
> 赞同：-1
> 
> 时间：2013-01-28T16:55:55.060
> 
> 标签：spring, jakarta-ee

这是有效的语法

```
<bean id="placeholderConfig" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="classpath:application.properties"/>
    <property name="systemPropertiesModeName" value="SYSTEM_PROPERTIES_MODE_OVERRIDE"/>
</bean> 
```

这是不工作的替代格式

```
 <context:property-placeholder location="classpath:application.properties" system-properties-mode="OVERRIDE"/> 
```

任何想法为什么？我总是会在构建时进行测试。

应用程序属性文件只包含这个 hibernate.show.sql = false hibernate.format.sql = true

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:19:22.457

您的语法看起来正确。您是否`context`在上下文文件中注册了命名空间？

例如：

```
<beans ...
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="...
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd"> 
```

# amazon-ec2 - Win 2k12, DirectAccess, EC2

> ID：14567087
> 
> 赞同：0
> 
> 时间：2013-01-28T16:56:06.053
> 
> 标签：amazon-ec2

Background/objective here is to get clients that VPN in to have access to the LAN they are VPN-ing into. Everything is on EC2.

To get this working, I'm trying to set up direct-access on the Win2k12 box where Remote Access is set-up. Once of the perquisite checks when you launch the "Enabled Direct Access Wizard" is verifying one of the network adapters is configured to have a static IP address (I do not, nor am I aware of a way to make that a reality on EC2!) I can choose to suppress that warning and continue...to a point...eventually I am prompted to "Type the public name of IPv4 used by clients..." prompt pictured below. No value I have tried (host name, fully qualified host name, IP) seems to work failing with the below errors

host name : "The public name of IPv4 address is invalid. Modify the settings"

fully qualified host name : "An internal adapter with a valid IP address, IPv6 enabled, DNS settings, and a domain profile cannot be located"

IP: "The public name of IPv4 address is invalid. Modify the settings"

![enter image description here](../Images/0916ed9f2941f8ab9aeae55fd8433ac9.png)

I'm thinking this could all be due to the failed pre-requisite, though I'm not 100% sure. Ultimately, I'm beginning to be become unsure if this is possible [by using direct access] or if it is possible to accomplish my goal by using a different approach. Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:12:50.253

我也在我的 2012 服务器上进行了设置，遇到了同样的错误。在验证我有一个静态 IP 后，我不得不重新启动服务器，它自己的 IP 和主 DNS 和环回地址作为辅助。这可能是因为我说 DNS 只能响应该特定 IP。

# phalcon - 重定向代码不起作用

> ID：14567096
> 
> 赞同：2
> 
> 时间：2013-01-28T16:56:44.353
> 
> 标签：phalcon

我在 Phalcon 0.8b 上的重定向有一些问题。

这是我的代码：

```
<?php
class UsersController extends \Phalcon\Mvc\Controller {
    public function loginAction() {
        if($this->session->get('user')) {
            $this->response->redirect('users/view/');

            exit;
        }
    }
} 
```

基本上，代码检查用户是否登录，然后重定向他们。但是，我没有发生重定向。它只是我的白屏。难道我做错了什么？文档不是很有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T18:48:30.973

“退出”是避免将响应标头发送到客户端，以下必须有效：

```
<?php

class UsersController extends \Phalcon\Mvc\Controller {

    public function loginAction() {
        if($this->session->get('user')) {
            return $this->response->redirect('users/view/');            
        }
    }
} 
```

# ruby - Ruby：将二维数组转换为带有基于第一个元素的第一个字母的键的排序哈希

> ID：14567097
> 
> 赞同：0
> 
> 时间：2013-01-28T16:56:44.497
> 
> 标签：ruby

假设我有以下二维数组（未排序）

```
[["Abigail", 1047], ["Betty", 1049], ["Alfred", 1048], ["Bernadette", 1050]] 
```

如何根据第一个元素的第一个字母将其转换为带有字母键的哈希？需要根据第一个元素（即本例中的人名）对键和数组元素进行排序：

```
{
'A' => [['Abigail','1047'], ['Alfred','1048']],
'B' => [['Bernadette','1050'], ['Betty','1049']]
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T17:15:51.463

```
a = [["Abigail", 1047], ["Betty", 1049], ["Alfred", 1048], ["Bernadette", 1050]]
p Hash[a.sort.chunk{|x| x[0][0]}.to_a] 
```

适用于 1.9.x

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T17:13:34.667

```
a = [["Abigail", 1047], ["Betty", 1049], ["Alfred", 1048], ["Bernadette", 1050]]
p a.sort.group_by{|el| el.first[0]} 
```

`sort`确保散列中的键已排序的数组（在 1.9 中），`group_by`第一个元素的第一个字母（名称）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T17:06:01.207

```
names_and_values = [["Abigail", 1047], ["Betty", 1049], ["Alfred", 1048], ["Bernadette", 1050]]
#=> [["Abigail", 1047], ["Betty", 1049], ["Alfred", 1048], ["Bernadette", 1050]]
names_and_values.sort.reduce({}) do |memo, name_and_value|
  name = name_and_value[0]
  initial = name[0]
  ( memo[initial] ||= [] ) << name_and_value
  memo
end
#=> {"A"=>[["Abigail", 1047], ["Alfred", 1048]], "B"=>[["Bernadette", 1050], ["Betty", 1049]]} 
```

# css - 在 Zurb Foundation 3 中修复列宽？

> ID：14567107
> 
> 赞同：3
> 
> 时间：2013-01-28T16:57:16.303
> 
> 标签：css, responsive-design, zurb-foundation

我有一个布局，其中我的一个列包含一个广告。见图1：

![图像1](../Images/b3ed31e0435a7fdaef2dfb8f6d241da2.png)

广告图片位于四列 div 中。该广告是一个 300 像素宽的 MREC。但是，在 iPad 上，由于列减少，广告会下降到 236 像素，这是一个禁忌。请参见下面的图 2，当然它在这里看起来相同，但它更小：

![图2](../Images/0ebce3a2c8ab7f9a8372c82c29929d95.png)

我需要它保持在 300 像素。此外，有时广告服务器可能会投放基于 iframe 的广告（也是 300 像素）。

所以那个 div 不需要缩小宽度。

我尝试添加一个类并将css设置为min-width：300px，但是在iPad上它伸出右边缘；另一个 div 没有相应地缩小。见图3：

![图3](../Images/f89b5dca7e0b8c2c107da69499588edc.png)

那么，如何确保我的广告中的 div 不会在 iPad 上重新调整大小？

编辑：此外，当我使用推拉反转列顺序时，问题似乎更加复杂。我这样做是因为我需要广告在手机上排在第一位，但在其他平台上排在第二位：

```
<div class="row">
<div class="four columns ad push-eight">
    <img src="http://placehold.it/300x300">
</div>
<div class="eight columns pull-four">
  <h1>Bacon ipsum dolor sit amet tri-tip shankle chicken leberkas beef pork</h1>
</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T17:46:54.923

为了让它发挥作用，我不得不稍微走出基金会。这就是你需要的。

示例：[http ://cdpn.io/Kypen](http://cdpn.io/Kypen)

解释：我创建了一个广告包装器`.ad`和一个`.container`元素。

是`.ad`300px 宽并向右浮动；而`.container`元素被赋予 320px 宽边距。由于 Foundation 使用边框大小调整边距，因此将考虑到整个`.container`元素的宽度。结果，`.ad`位于“假边距”内（20 额外的 px 用于空白）。这是一个古老的技巧，它在 Foundation 的 .row 和 .column 元素中工作得很好，此外它也不影响嵌套行的创建。

我还添加了一个媒体查询，可以使用它来改变低分辨率下的行为。

```
.ad
{
  float:right;
  width:300px;
}
.container
{
  position:relative;
  margin-right:320px;
}
@media only screen and (max-width: 767px)
  {
  .ad
  {float:none;}
  .container
  {margin:0;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T22:25:29.487

当我需要修复侧边栏的宽度时，我最终使用了 calc()。我想在较小的设备上将侧边栏放在主要内容的下方，这样真的很容易。

我在haml中的布局

```
.row
  .content.column.large-9
    = yield
  .sidebar.column.large-3
    = render 'sidebar' 
```

风格

```
.sidebar{
  width: 100%;
}
.content {
  width: 100%;
}
@media #{$small} {
  .sidebar {
    width: 225px !important;
  }
  .content {
    width: 70.2% !important; /* Fallback for older browsers */
    width: calc(100% - 240px) !important;
  }
} 
```

媒体查询参数 $small 确实令人困惑，因为它实际上意味着“大于小”。

# ruby-on-rails - 使用与父模型相同的数据更新子模型

> ID：14567108
> 
> 赞同：0
> 
> 时间：2013-01-28T16:57:19.130
> 
> 标签：ruby-on-rails

我有四个相互关联的模型，如下所示：

```
class User < ActiveRecord::Base
    has_many :clients
    has_many :default_prices
end

class DefaultPrice < ActiveRecord::Base
    has_many :client_prices
    has_many :clients, :through => :user
    belongs_to :user
end

class Client < ActiveRecord::Base
    belongs_to :user
    has_many :client_prices
    before_create do
        user.default_prices.each do |default_price|
            client_prices.build("price" => default_price.price, "visit_type" => default_price.visit_type, "default_price_id" => default_price.id)
        end
    end
end

class ClientPrice < ActiveRecord::Base
    belongs_to :client
    belongs_to :default_price
end 
```

现在，当用户创建新客户端时，用户的默认价格将应用于客户端的 client_prices 表。当用户创建新的 default_prices 时，如何创建新的 client_prices（针对每个现有客户端）？另外，当默认价格发生变化时，如何让 client_prices 更新？如果有帮助，每个客户价格都有一个与默认价格相关的 default_price_id 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:29:23.113

```
class DefaultPrice < ActiveRecord::Base
  before_create :new_client_price
  before_update :update_clients_price

private
    def new_client_price
  clients.each do |c|
    self.client_prices.create(:price => self.price, :visit_type => self.visit_type, :client_id => c.id)
        end
end

def update_clients_price
  self.client_prices.each do |p|
      p.price = self.price
        p.visit_type = self.visit_type
      p.save
  end
end 
```

# html - 网站内容显示在 Moz 而不是 Chrome

> ID：14567110
> 
> 赞同：1
> 
> 时间：2013-01-28T16:57:21.930
> 
> 标签：html, css, google-chrome, heroku, zurb-foundation

我有一个正在使用 Sinatra 框架的[网站](http://serendipitynow.herokuapp.com/)，我已经将它上传到 Heroku。在 Firefox 上，我可以看到页面及其所有内容，但在 Chrome 上，所有文本、边框等的颜色都是白色的。为什么会这样，我该如何解决？请注意，我还将 Zurb 基础用于 HTML 框架，将 Sinatra 用于后端。

下面是我的 CSS 页面。

```
/* LAYOUT */
/*========*/
.the-page {
  -webkit-box-shadow: 4px 2px   rgba(0,0,0,.1),  -4px 0 2px  rgba(0,0,0,.1);
  -moz-box-shadow: 4px 0 2px  rgba(0,0,0,.1),  -4px 0 2px  rgba(0,0,0,.1);
  box-shadow: 4px 0 2px  rgba(0,0,0,.1),  -4px 0 2px  rgba(0,0,0,.1);
}

/* MISC */
/*======*/

.center {text-align: center;}

.brown {color: #653000;}

.green {color: #003218;}

a{color: #653000;}

a:hover {color: #003218;}

.size20 { font-size: 20px;}

/* Prevent MOZ border outline */
:focus {outline:none;}
::-moz-focus-inner {border:0;}

/* FOOTER */
/* ====== */

html, body {
  height: 100%;
  color: #653000;
}
.body-wrapper {
  min-height: 100%;
  height: auto !important;
  height: 100%;
  margin: 0 auto -65px;
}
.footer, .push {
  height: 65px;
}

.footer {
  color: black;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:34:33.533

我在这里使用 Chrome 24 进行了测试，并查看了开发人员工具中应用的 CSS 规则。通过从标签中删除`row`类`<html>`，我能够在 Chrome 中看到您的网站。

以下规则似乎至少是您的一些麻烦的根源。

```
.row:before,.row:after{content:" ";display:table} 
```

Chrome 根本不喜欢`display:table`应用于`<html>`标签的规则。

# git - Git- Why .txt file is not ignored

> ID：14567111
> 
> 赞同：6
> 
> 时间：2013-01-28T16:57:21.840
> 
> 标签：git, ignore

I need to ignore .txt file in git. To do so i have included *.txt in the .gitignore file.But when i edit something in one of my .txt file git is still tracking it. Where is the problem or do i make something wrong. Please help me.

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-28T17:03:04.993

如果你曾经提交过文本文件 git 已经在跟踪它。您需要将它从 git 中删除，以便它不会被跟踪，然后它会正确地忽略它。

```
git rm --cached name.txt 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T17:03:14.140

您可能已经提交了该文件，以便对其进行跟踪。你需要：

```
git rm --cached filename 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T17:05:28.490

Gitignore 不会阻止您跟踪已跟踪的文件。您需要将它们从您的存储库中删除。

```
find . -name '*.txt' ¦ xargs git rm 
```

应该做的伎俩。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T17:05:31.797

我认为您在包含该文件`.txt`之前已将该文件添加到暂存索引中。要取消跟踪它，您必须从暂存索引中删除该文件。要将其从暂存索引中但不从工作目录中删除，请粘贴以下行：`.txt``.gitignore``.txt`

```
git rm --cached my_file.txt 
```

如果它不起作用，则粘贴：

```
git rm --cached my_file.txt -f 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-13T05:51:22.823

另一个可能的错误是行后有空格`*.txt`。

# sql - LOV query is invalid

> ID：14567113
> 
> 赞同：2
> 
> 时间：2013-01-28T16:57:29.147
> 
> 标签：sql, oracle, oracle-apex

I am working with APEX 4.2.1.00.08 and I keep getting the validation error "*LOV query is invalid, a display and a return value are needed, the column names need to be different. If your query contains an in-line query, the first FROM clause in the SQL statement must not belong to the in-line query.*". I'm not sure what's causing this. My sql is:

```
SELECT u1.name d, susu.subunitid r
FROM basic.subunitsuperunit susu
INNER JOIN basic.unit u1 ON susu.subunitid = u1.unitid
INNER JOIN basic.unit u2 ON susu.superunitid = u2.unitid
WHERE level = 3
AND u1.name != 'XYZ'
CONNECT BY PRIOR subunitid = superunitid
START WITH u1.name = (SELECT u3.name FROM basic.unit u3 WHERE u3.unitid = (SELECT TO_NUMBER(gp.value) FROM basic.global_parameters gp WHERE gp.name = 'A_UNIT'))
ORDER BY u1.name 
```

I have made sure there was no semicolon, and I have checked this query in SQL Developer and it runs fine. I already realize those subqueries aren't optimal, but what am I doing wrong here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:49:14.473

尝试使用您的查询创建一个 apex_collection 或数据库视图，然后根据新对象创建您的 lov。我在其他查询中也面临同样的困难，我总是这样解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T09:33:59.807

如果您使用 WITH 子句开始查询，也会发生这种情况。你可以用 `SELECT name d, ID r From (***your query here***)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-02T22:24:29.347

我看到这篇文章很旧，但我在应用程序的“值列表”部分遇到了同样的错误。我的问题恰好是应用程序以用户身份运行时缺少授权。

# mysql - mysql /位掩码：选择NOT值

> ID：14567115
> 
> 赞同：3
> 
> 时间：2013-01-28T16:57:30.890
> 
> 标签：mysql, bit-masks

我有一个带有位掩码列（无符号整数）的表。该字段的值有 1、2、4、8、16 等。

如何选择 NOT 特定值？IE 我不在乎其他位是什么 - 只是特定位为 0。

我试过的：

> 从 mytable 中选择 count(*)；

这给了我**3387255**。

> 从 mytable 中选择 count(*) where outageMask & ~8;

这给了我**552061**。

所以我会假设：

> 从 mytable 中选择 count(*) where outageMask & 8;

会给我**2835194**。不是这样。相反，我得到**87711**。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T17:25:21.343

> 只有特定位为 0。

这个很重要。让我们看看你计算的结果（为简化起见，使用 8 位数字）：

```
 8 = 0b00001000
~8 = 0b11110111 
```

那么，如果您将它们与另一个值进行按位运算，这些位掩码会测试什么？第一个掩码测试是否设置了位“8”。第二个掩码测试是否设置**了所有其他位**。但这不是您想要的，您想要否定整个声明。这很容易：

```
select count(*) from mytable where (outageMask & 8) = 0; 
```

# sql-server - Getting 'Error converting data type varchar to numeric.'

> ID：14567116
> 
> 赞同：0
> 
> 时间：2013-01-28T16:57:36.547
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

I have a table called `testTable` with two columns, `id` that is auto incremented and `someValue`.

The data contained in the `someValue` column are: `12, 1.2, .4, 1d4, +, -, .`

Data type for `someValue` is `varchar(50)`.

Why are the following queries throwing

> *Error converting data type varchar to numeric.*

```
select ID, someValue 
from testTable 
where ISNUMERIC(someValue + 'd0') = 1 and CAST(someValue as decimal(8,2)) > 0.1;

select tt.ID,tt.someValue 
from (select ID, someValue 
      from testTable 
      where ISNUMERIC(someValue + 'd0') = 1) as tt 
where CAST(tt.someValue as decimal(8,2)) > 0.1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T01:15:10.457

你有几个问题；`CAST`不适用于非十进制输入，并`ISNUMERIC`接受可以转换为货币金额的字符串，包括非十进制值，例如“-”、“.”或“US$100”。

解决此问题的正确方法是在`Decimal`数据库中添加一列，使用要比较的值`someValue`填充列，然后仅与列进行比较。`Decimal``Decimal`

如果由于某种原因你不能这样做，你可以使用`ISNUMERIC`并且只包括非货币小数金额，并使用`Convert`而不是`CAST`：

```
select ID, someValue 
from testTable 
where ID IN
    (select ID from testTable where ISNUMERIC(someValue) = 1
    AND Patindex('%[^0-9-+.]%', someValue) = 0
    AND someValue NOT IN ('-', '+', '.')
    )
    and Convert(decimal, someValue) > 0.1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:59:59.907

在您的第一个陈述中，您直接从`testTable`并尝试：

```
CAST(someValue as  decimal(8,2)) 
```

这将引发错误，因为您没有过滤掉非数值。

# c - 在 C 中移动字符串时程序终止

> ID：14567119
> 
> 赞同：1
> 
> 时间：2013-01-28T16:57:47.540
> 
> 标签：c, string

> **可能重复：**
> [为什么在写入字符串时会出现分段错误？](https://stackoverflow.com/questions/164194/why-do-i-get-a-segmentation-fault-when-writing-to-a-string)

假设我有 s =“你好”。我希望它转换成 s = "Hello"。

这就是我所拥有的

```
# include <stdio.h>
# include <string.h>
main()
{
    char *s = " Hello";
    char *shift(char *, int);

    shift(s+1,-1);
    printf("%s", s);
}

char *shift (char *str, int units)
{
    if (units < 0)
    {
        for (; *str != '\0'; str++)
            *(str + units) = *str;
        *(str + units) = '\0';
        return str-strlen(str)-units;
    }

} 
```

程序终止！甚至没有显示错误。我哪里错了..

最重要的是，是什么让这个程序将控制权交给操作系统来终止？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T16:58:56.193

您不能修改字符串文字。此外，您永远不会检查它`str + units`是否在字符串中，即它不会超出字符串的分配内存（假设您传递了一个真实的字符串，而不是字符串文字作为参数）。

# html - 将锚点应用于 CSS 中的背景图像

> ID：14567120
> 
> 赞同：0
> 
> 时间：2013-01-28T16:57:48.997
> 
> 标签：html, css, background, anchor, background-image

如果我有一个高度为 200 像素的 DIV 并应用了高度为 175 像素的背景，有没有办法*只*在图像周围包裹一个锚点？

```
<div style="background: url('http://www.crmpicco.co.uk/downloads/Image/11218.jpg') no-repeat scroll 0 0 transparent; background-position: bottom;" class="block block2 ">
    <ul class="elem"></ul>
    <span class="left_border"></span>       
</div> 
```

除了重组我的标记之外，没有什么能引起我的注意，我宁愿在这个阶段避免这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T17:02:05.260

如果你给父 div（有背景的那个）一些 css：`position:relative`

然后你可以像这样创建一个锚点：

```
.block2 a.block_link {
    position:absolute;
    bottom:0;
    height:175px;
    left:0px;
    width:100%;
    z-index:1;
    background-image:url(transparent.png);
    text-indent:-9999px;
} 
```

**请注意**：对链接应用透明 png 以修复 IE 错误.. 只需 1px x 1px 透明图像就可以了..

```
<div style="background: url('http://www.crmpicco.co.uk/downloads/Image/11218.jpg') no-repeat scroll 0 0 transparent; background-position: bottom;" class="block block2 ">
    <ul class="elem"></ul>
    <span class="left_border"></span>    
    <a href="#" class="block_link">&nbsp;</a>   
</div> 
```

为了保持链接上方的其他元素，即 ul 和 span.. 添加 css

```
.block2 ul,.block2 span {
    position:relative;
    z-index:2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:03:39.960

您可以放入一个 div，将其绝对放置在背景图像的顶部，并将宽度和高度设置为背景图像的尺寸，然后在该 div 周围包裹一个锚链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T17:08:40.370

你可以这样做：

```
<div style="position:relative; background: url('http://www.crmpicco.co.uk/downloads/Image/11218.jpg') no-repeat scroll 0 0 transparent; background-position: bottom;" class="block block2 ">
   <ul class="elem"></ul>
   <span class="left_border"></span>
   <a href='#'>link</a>       
</div> 
```

链接的CSS `<a>`：

```
.block a{
    display:block;
    width:100%;
    height:25px; // spared height: from the top;
    overflow:hidden;
    text-indent:-99999px;
    position:absolute;
    left:0;
    bottom:0; // or you can try with top:175px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T17:08:46.120

正如评论所说，从技术上讲，您不能在背景图像周围放置链接，但我假设您只是想让该区域可点击？

HTML：

```
<div id="my-div" style="background: url('http://www.crmpicco.co.uk/downloads/Image/11218.jpg') no-repeat scroll 0 0 transparent; background-position: bottom;" class="block block2 ">
    <ul class="elem"></ul>
    <span class="left_border"></span>      
    <a href="http://www.example.com/"></a> 
</div> 
```

CSS：

```
#my-div {
position: relative;
}
#my-div a {
display: block;
position: absolute;
top: 0;
left: 0;
height: 175px;
width: 100%;
} 
```

从您的问题中不清楚您希望链接如何与 UL 一起工作，但是如果需要可点击，您必须将列表放置在链接区域下方或使用更高的 z-index。

# php - PHP 到 MySql 到 CSV 到 Excel UTF-8

> ID：14567121
> 
> 赞同：3
> 
> 时间：2013-01-28T16:57:48.867
> 
> 标签：php, mysql, excel, csv, export

我知道这个问题已经讨论过好几次了，但是我在处理这个问题时变得很疯狂。我有一个带有 submit.php 操作的表单。起初我没有更改任何有关字符集的内容，我没有使用任何 utf8 标头信息。结果是我可以正确读取数据库中的所有 ä、ö、ü 等。现在将它们导出`.csv`到 Excel 并将它们导入 Excel `UTF-8 charset`（也测试了所有其他的）会导致不正确的字符集。

现在我尝试了什么：

PHP：

```
header("Content-Type: text/html; charset=utf-8");
$mysqli->set_charset("utf8"); 
```

MySQL：我删除了我的数据库并创建了一个新数据库：

```
create database db CHARACTER SET utf8 COLLATE utf8_general_ci;
create table ... 
```

我更改了 my.cnf 并重新启动了我的 sql 服务器：

```
[mysqld]
character-set-server=utf8
collation-server=utf8_general_ci

[mysql]
default-character-set=utf8 
```

如果我通过 bash 连接到我的数据库，我会收到以下输出：

```
| character_set_client     | utf8                             |
| character_set_connection | utf8                             |
| character_set_database   | utf8                             |
| character_set_filesystem | binary                           |
| character_set_results    | utf8                             |
| character_set_server     | utf8                             |
| character_set_system     | utf8                             |
| character_sets_dir       | /usr/local/mysql/share/charsets/ | 
```

一个php测试：

```
var_dump($mysqli->get_charset()); 
```

给我：

```
Current character set: utf8 object(stdClass)#3 (8) { ["charset"]=> string(4) "utf8"     ["collation"]=> string(15) "utf8_general_ci" ["dir"]=> string(0) "" ["min_length"]=> int(1) ["max_length"]=> int(3) ["number"]=> int(33) ["state"]=> int(1) ["comment"]=> string(13) "UTF-8 Unicode" } 
```

现在我使用：

```
mysql -uroot -ppw db < require.sql > /tmp/test.csv 
```

require.sql 只是一个

```
select * from table; 
```

同样，无论我选择 UTF-8 还是其他任何东西，我都无法将其作为 csv 导入 Excel。它总是给我一些加密货币..

希望有人得到提示这里可能出了什么问题..

干杯

E：TextMate 给了我一个正确的输出，所以看起来转换确实有效并且它和 Excel 问题？使用 Microsoft Office 2011。

E2：还尝试了与 latin1 相同的东西 - 同样的问题，无法将特殊字符导入 excel 而不破坏它们。任何提示或解决方法？

E3：我找到了一种解决方法，它可以使用 Excel 导入功能，但不能双击 .csv。

```
 iconv -f utf8 -t ISO-8859-1 test.csv > test_ISO.csv 
```

现在我可以使用 Windows(ANSI) 将 csv 导入到 excel 中。不得不使用此功能而不是双击仍然很烦人。此外，我真的不明白为什么 UTF8 不起作用，即使是导入功能、添加的 BOM 和 UTF8 中的完整数据库也是如此。

逗号分隔也变得一团糟。1\. Concat_WS 仅部分起作用，因为它在 .csv 文件中添加了一个愚蠢的 concat_ws(..) 标头。“文件 test.csv”也没有给我一个“逗号分隔”。这意味着即使所有内容都用逗号分隔，Excel 也不会在双击时注意到它。2\. sed/awk：找到了一些代码片段，但它们都非常糟糕地分离了表格。例如，colum street "streetname number" 仍然是一个 'streetname','number' ，它使 2 个列从一个列中取出，并且表被搞砸了。

所以在我看来，Excel 只能通过双击打开 .csv 文件 a）使用 ISO-8859-1 编码（并且仅在 windows 下，因为标准 mac 字符集是 Macintosh）b）具有“逗号分隔”属性的文件。这意味着如果我通过 Excel 本身创建一个 .csv

```
file test1.csv 
```

将会

```
test1.csv: ISO-8859 text, with CRLF line terminators 
```

而使用用于添加逗号的正则表达式的 iconv 更改字符集如下所示：

```
test1.csv: ISO-8859 text 
```

非常奇怪的行为 - 也许有人有一个可行的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:43:54.047

这就是我保存从 utf-8 mysql 表中获取的数据的方式。您需要先添加 BOM。例子：

```
<?php
$fp = fopen(dirname(__FILE__).'/'.$filename, 'wb'); 
fputs($fp, "\xEF\xBB\xBF"); 
fputcsv($fp, array($utfstr_1,$utfstr_2);
fclose($fp); 
```

确保你还告诉 MySQL 你将使用 UTF-8

```
mysql_query("SET CHARACTER SET utf8"); 
mysql_query("SET NAMES utf8"); 
```

您需要在选择任何数据之前执行此操作。

如果您设置语言环境，Propaply 不会很糟糕：`setlocale(LC_ALL, "en_US.UTF-8");`

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:34:08.827

感谢大家的帮助，我终于设法得到一个工作 - 可双击 csv 文件，该文件分开打开并正确显示字母。对于那些对良好工作流程感兴趣的人，我们可以：

1.) 我的数据库完全使用 UTF8。2.) 我通过 php 将表单导出到我的数据库中。我正在使用 mysqli 并作为标题信息：

```
header("Content-Type: text/html; charset=ISO-8859"); 
```

我知道这会使数据库中的所有内容看起来都很糟糕，请随意使用 utf8 使其看起来正确，但在我的情况下并不重要。

3.) 我写了一个由 cron 守护进程执行的脚本，它 a) 删除了之前创建的 .csv 文件

```
rm -f path/to/csv ##I have 3 due to some renaming see below 
```

b) 使用 mysql 创建新的 csv (这仍然是 UTF8)

```
mysql -hSERVERIP -uUSER -pPASS DBNAME -e "select * from DBTABLE;" > PATH/TO/output.csv 
```

现在您有一个制表符分隔的 .csv 并且（如果您以 UTF8 格式从 PHP 导出）它将在 OpenOffice 等中正确显示，但在 Excel 中则不会。即使导入为 UTF8 也不起作用。

c) 使文件以分号分隔（Excel 标准，双击逗号分隔的文件将不起作用，至少不适用于欧洲版的 Excel）。我使用了一个小的 python 脚本 semicolon.py：

```
import sys
import csv

tabin = csv.reader(sys.stdin, dialect=csv.excel_tab)
commaout = csv.writer(sys.stdout, delimiter=";")
for row in tabin:
  commaout.writerow(row) 
```

d) 现在我必须在我的 cron sh 文件中调用脚本：

```
/usr/bin/python PATH/TO/semicolon.py < output.csv > output_semi.csv 
```

如果您将脚本用作 cron，请确保为每个文件使用完整路径。

e) 使用 iconv 将字符集从 UTF8 更改为 ISO-8859-1（Windows ANSI Excel 标准）：

```
iconv -f utf8 -t ISO-8859-1 output_semi.csv > output_final.csv 
```

就是这样。csv 在 Mac/Windows Excel 2010（已测试）上双击打开。

也许这对有类似问题的人有帮助。它把我逼疯了。

编辑：对于某些服务器，您不需要 iconv，因为数据库的输出已经是 ISO8859。您应该在执行 mysql 命令后检查您的 csv：

```
file output.csv 
```

仅当字符集不是 iso8859-1 时才使用 iconv

# php - Checking Values in Array

> ID：14567124
> 
> 赞同：0
> 
> 时间：2013-01-28T16:57:53.733
> 
> 标签：php, mysql, arrays, if-statement

Hopefully someone can help!

I successfully completed over the weekend my quiz which was a 10 question / multiple choice / multiple answer type scenario - however the brief changed this morning -

It turns out that Question 1 for example:

```
Q How do you make tea
A) Water
B) Teabag
C) Cup
D) Fish Tank 
```

The client would like it that while A B C are the correct answers, there are other correct answers for example: -

```
A - Is correct + 1 to score
B - Is correct + 1 to score
C - Is Correct + 1 to score
A & B - Is correct  + 1 to score
A & C - Is correct + 1 to score
B & A - Is correct + 1 to score
B & C - Is correct + 1 to score
A & B & C - Is the Jackpot! + 1 to score 
```

Before this 'amendment' I had stored the results into the Database for Question as A,B,C - so everything was working - so I believe I have to 'explode' the original array so they are individual array elements (I was assuming it would be easier to do it this way) - So my array now looks like this:

```
 Array ( [0] => A [1] => B [2] => C ) 
```

I tried to do a if nested if statement:

```
 if($vex['0'] == 'A')
    {
    echo "Yup, it equals A";
    if($vex['1'] == 'B')
    {
    echo "Yup, it equals B";
    } 
```

But I realised that the array might not always start with [0] => A etc.

Could help me and point me in the right direction?

Would it simpler for me to store the checkboxes as single values rather than an array and just do a check?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:07:09.623

使用数组并将它们[相交](http://php.net/intersect)以获得如下评分：

```
$user_choices = array('A', 'C');
$valid_choices = array('A', 'B', 'C');

$common = array_intersect($user_choices, $valid_choices); // A,C
$score = count($common); // 2 
```

同样：

```
choices A     -> common = A     -> score = 1
choices D     -> common =       -> score = 0
choices A,B,C -> common = A,B,C -> score = 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:11:56.453

我认为您可以使用 in_array() 函数。

```
if(in_array('A',$vex))
{
    echo "Yup, it equals A";
    if(in_array('B',$vex))
    {
        echo "Yup, it equals B";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T17:13:01.833

您可以使用[`array_intersect`](http://php.net/manual/en/function.array-intersect.php)或[`in_array`](http://php.net/manual/en/function.in-array.php)。

例如，如果他们检查了 A 和 B，正确答案是 B 和 C，你可以这样做：

```
$aAnswers = array('A', 'B');
$aCorrectAnswers = array('B', 'C');
$bSuccess = count(array_intersect($aAnswers, $aCorrectAnswers) || false);
// $bSuccess == true 
```

这会告诉你他们是否至少做对了一项。如果您需要更具体，您可以执行以下操作：

```
$aComparedAnswers = array();
foreach($aAnswers as $sAnswer){
    if(in_array($sAnswer, $aCorrectAnswers)){
        $aComparedAnswers[] = $sAnswer;
    }
} 
```

然后您可以比较比较和正确的数组。如果他们的数量相同，他们就会得到所有的问题。比较答案的数量将等于正确答案的数量。

# c++ - 8 个字节怎么能容纳 302 个十进制数字？（欧拉挑战 16）

> ID：14567127
> 
> 赞同：4
> 
> 时间：2013-01-28T16:58:06.973
> 
> 标签：c++, types, integer, double

[c++ pow(2,1000) 通常对于 double 来说很大，但它正在工作。为什么？](https://stackoverflow.com/questions/7371928/c-pow2-1000-is-normaly-to-big-for-double-but-its-working-why)

所以我已经学习 C++ 几个星期了，但数据类型仍然让我感到困惑。

首先是一件小事：0xbadc0de 在另一个线程中发布的代码对我不起作用。首先`pow(2,1000)`给我`this more than once instance of overloaded function "pow" matches the argument list.`

我通过更改来修复它`pow(2,1000)`- >`pow(2.0,1000)` 似乎很好，我运行它并得到这个：

[http://i.stack.imgur.com/bbRat.png](https://i.stack.imgur.com/bbRat.png)

代替

```
10715086071862673209484250490600018105614048117055336074437503883703510511249361224931983788156958581275946729175531468251871452856923140435984577574698574803934567774824230985421074605062371141877954182153046474983581941267398767559165543946077062914571196477686542167660429831652624386837205668069376 
```

它缺少很多值，可能是什么原因造成的？

但现在真正的问题。我想知道 302 位长数字如何适合双精度（8 字节）？0xFFFFFFFFFFFFFFFF = 18446744073709551616 那么这个数字怎么会大于这个呢？

我认为这与浮点数编码有关。如果不是 0xFFFFFFFFFFFFFFFF，那么可以存储在 8 个字节中的*最大数字是多少？*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T17:07:42.483

八个字节包含 64 位信息，因此您可以`2^64 ~ 10^20`使用这些位存储唯一的项目。这些项目可以很容易地解释为从`0`到的整数`2^64 - 1`。所以你不能在 8 个字节中存储 302 个十进制数字；`0`和之间的大多数数字`10^303 - 1`不能这样表示。

浮点数可以保持 302 位十进制数字的近似值；这是因为它们分别存储尾数和指数。此表示中的数字存储一定数量的有效数字（如果我没记错的话，双精度数为 15-16）和指数（可以进入数百个内存服务）。但是，如果一个小数是 X 字节长，那么它只能区分`2^(8X)`不同的值......不太可能精确地表示具有 302 个十进制数字的整数。

要表示这样的数字，您必须使用更多位：实际上大约 1000 或 125 个字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:06:24.087

它被称为“浮点”是有原因的。数据类型包含标准意义上的数字和表示小数点所在位置的指数。这就是为什么`pow(2.0, 1000)`有效，这就是为什么你会看到很多零。浮点数（或双精度数，只是一个更大的浮点数）数包含固定位数的精度。所有剩余的数字最终都为零。尝试一下`pow(2.0, -1000)`，你会看到相反的情况。

浮点数（32 位）中精度的小数位数约为 7，而双精度数（64 位）约为 16 位小数。

现在大多数系统都使用[IEEE floating point](http://en.wikipedia.org/wiki/IEEE_floating_point)，我只是链接到一个非常好的描述。此外，有关特定标准[IEEE 754-1985](http://en.wikipedia.org/wiki/IEEE_754-1985)的文章详细描述了各种大小的浮点数的位布局。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T17:10:48.353

浮点类型可以覆盖比相同大小的整数类型更大的范围，但精度较低。

它们代表一个数字：

*   一个*符号位* `s`来表示正或负；
*   *尾数* ，介于 1 和 2 之间的`m`值，给出一定数量的精度；
*   一个*指数* `e`来表示数字的规模。

该值本身计算为`m * pow(2,e)`，如果设置了符号位，则取反。

[标准`double`](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)有一个53 位尾数，它提供大约 16 位十进制数字的精度。

因此，如果您需要表示一个精度超过（例如）64 位的整数，那么 64 位整数和 64 位浮点类型都不起作用。您将需要一个大整数类型，用尽可能多的位来表示您正在使用的值，或者（取决于您要解决的问题）一些其他表示，例如素数分解。标准 C++ 中没有这种类型，因此您需要自己制作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T17:17:39.793

2.0 ^ 1000 在数学上将具有十进制（非浮点）输出。IEEE 浮点数，在您的情况下为双精度数（因为 pow 函数接受双精度数并输出双精度数）具有分配给尾数的 64 位表示的 52 位。如果你算一下，2^52 = 4,503,599,627,370,496。因为浮点数可以表示正数和负数，所以整数表示实际上将是 ~ 2^51 = 2,251,799,813,685,248。注意有 16 位数字。您看到的输出中有 16 个质量（非零）数字。

本质上 pow 函数将执行取幂，但是一旦取幂超过 ~2^51，它将开始失去精度。最终它将保持前 16 位小数的精度，但所有其他正确的数字将不受保证。

因此这是一个浮点精度/舍入问题。

如果您严格处于无符号整数域中，则该数字将在 (2^64 - 1) = 18,446,744,073,709,551,616 之后溢出。溢出的意思是，您实际上永远不会看到数字比提供的数字高，事实上我相信这个操作的答案是 0。一旦答案超出 2^64，结果寄存器将为零，任何乘法后缀将为 0 * 2，这将始终导致 0。我必须尝试一下。

可以使用使用多精度库的标准计算机获得确切的答案（如您所示）。它们的作用是通过连接多个较小的数据类型来模拟更大的位计算机，并使用算法动态转换和打印。Mathematica 是实现任意精度数学计算库的数学引擎的一个示例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-23T22:07:53.413

如果要计算某些字节可以容纳的数字范围，应该是(2^(64bits - 1bit)) 到(2^(64bits - 1bit) - 1)。

因为变量的最左边的数字用于表示符号（+ 和 -）。所以数字的负数范围应该是：(2^(64bits - 1bit))，数字正数的范围应该是：(2^(64bits - 1bit) - 1) 有-1由于 0 的正范围（避免每边都计为 0 的声誉）。

例如，如果我们计算 64 位，范围应该是 ==> 大约 [-9.223372e+18] 到 [9.223372e+18]

# linux - Export a variable with dynamically created name in bash shell script

> ID：14567128
> 
> 赞同：5
> 
> 时间：2013-01-28T16:58:12.147
> 
> 标签：linux, shell

I want to create a variable with its name partly dynamic and export it from my bash shell script. I have been trying to do it the following way. No success though. Please tell me where I am wrong.

```
#!/bin/bash
CURRENT_PROCESS_ID=$$
var=METASTORE_JDBC_DRIVER_$CURRENT_PROCESS_ID
echo $var
export $var='1' 
```

execution command

```
bash <filename>.sh 
```

I am hoping the script would create an environmental variable like `METASTORE_JDBC_DRIVER_8769` and I should be able to use that out of the script but when I do `echo $METASTORE_JDBC_DRIVER_8769` outside the script, doesn't give me anything. Any suggestions/ideas are welcomed.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-06T05:02:42.627

`${!var}`Bash 版本 2为动态创建的变量名称（又名“间接引用”）引入了更直观的表示法......

```
a=letter_of_alphabet
letter_of_alphabet=z

echo "a = $a"           # Direct reference.

echo "Now a = ${!a}"    # Indirect reference.  (a = z)
#  The ${!variable} notation is more intuitive than the old
#+ eval var1=\$$var2 
```

有关详细信息和示例，请参阅[http://tldp.org/LDP/abs/html/bashver2.html#EX78](http://tldp.org/LDP/abs/html/bashver2.html#EX78)

有关使用更知名`eval var1=\$$var2`技术的详细信息和示例，请参阅[http://tldp.org/LDP/abs/html/ivr.html](http://tldp.org/LDP/abs/html/ivr.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T17:00:11.700

Export 将变量导出到当前的 shell 上下文中。通过使用 bash 运行脚本，它会在该 shell 的上下文中设置。您需要获取文件以使其在当前 shell 上下文中运行。

```
source <filename>.sh 
```

只是为了显示子外壳和源之间的区别：

```
[nedwidek@yule ~]# bash test.sh
METASTORE_JDBC_DRIVER_8422
[nedwidek@yule ~]# env |grep META
[nedwidek@yule ~]# source test.sh
METASTORE_JDBC_DRIVER_8143
[nedwidek@yule ~]# env |grep META
METASTORE_JDBC_DRIVER_8143=1 
```

# java - How to use forloop iteration variable inside onclicklistener method of a button

> ID：14567134
> 
> 赞同：0
> 
> 时间：2013-01-28T16:58:25.243
> 
> 标签：java, android, eclipse, for-loop

this is my code..

```
for (int i = 0; i < 12; i++) 
   {
          buttons[i] = (Button)findViewById(R.id.buttonid);
        @Override
        public void onClick(View v) {
           // in this method I want to set the button text to the iteration variable 'i'
        }
    });
   } 
```

my need is to get the iteration variable inside the onclick method. I tried by assigning the i value to another int variable(with and without using final) before the onclick method. But all this shows some errors.

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:59:26.790

通过在方法外部类的顶部声明 i 变量来使它成为全局变量。`private int i;` [http://en.wikipedia.org/wiki/Global_variable](http://en.wikipedia.org/wiki/Global_variable)

那你就不用`int`在for循环里面说了

```
for (i = 0; i < 12; i++) 
   {
         buttons[i] = (Button)findViewById(R.id.buttonid);
        @Override
        public void onClick(View v) {
           // in this method I want to set the button text to the iteration variable 'i'
        }
    });
   } 
```

您也可以使用评论中提到的 final 修饰符，如果您希望我们调试您的错误，则必须发布您尝试使用它的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:14:44.663

您可以不再将`i`变量作为全局/最终变量，而是使用 的`setTag()`方法`Button`来传递值。

```
 for (int i = 0; i < 12; i++) {
          buttons[i] = (Button)findViewById(R.id.buttonid);
          buttons[i].setTag(new Integer(i));
          buttons[i].setOnClickListener(listener);
   } 
```

并分离出`OnClickListener`：

```
 OnClickListener listener = new View.OnClickListener() {

        @Override
        public void onClick(View v) {
               Integer iHolder = v.getTag();
               int i = iHolder.intValue();
               // set button text
        }
    }; 
```

这样，`Button`它本身就持有对值的引用，`i`而不是在全局范围内浮动或被声明`final`。

# php - 正则表达式中的“~”是什么？

> ID：14567137
> 
> 赞同：8
> 
> 时间：2013-01-28T16:58:44.473
> 
> 标签：php, regex

> **可能重复：**
> [正则表达式中的波浪号运算符](https://stackoverflow.com/questions/938100/tilde-operator-in-regular-expressions)

```
echo preg_replace_callback('~-([a-z])~', function ($match) {
    return strtoupper($match[1]);
}, 'hello-world'); 
```

代码来自[http://php.net/manual/en/functions.anonymous.php](http://php.net/manual/en/functions.anonymous.php)

我在正则表达式中搜索了“~”，但没有找到答案。

它有什么作用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T17:00:41.020

PHP（和其他实现）中正则表达式的第一个和最后一个字符称为*分隔符*。通常，您会看到`/`正在使用 ，但在这种情况下，有人选择了`~`. [在这里阅读更多。](http://php.net/manual/en/regexp.reference.delimiters.php)

不知道为什么`~`选择了；可能是该特定开发人员的习惯。`/`通常，当正则表达式本身包含斜杠（*例如*匹配的 URL）时，会选择不同的分隔符，这样就不需要每次都转义斜杠。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T17:02:55.297

该符号`~`仅用作 PHP 正则表达式中的分隔符。

# c# - C#泛型类型约束混乱

> ID：14567138
> 
> 赞同：0
> 
> 时间：2013-01-28T16:58:47.090
> 
> 标签：c#, generics, type-constraints

我遇到了泛型类型约束的问题。我有下面的方法，我正在努力将任何东西传递给 childSegments 参数，这是我可以得到的第一个参数。

```
private void FillSegment<T, TT>(BaseSegment<T> segment, IEnumerable<BaseSegment<TT>> childSegments)
        where T : class
        where TT : class
    {} 
```

TT 属于类型类，但我试图传入的列表应该是不同类的组合，而不仅仅是一个类类型，这就是我要打的墙。我可以传入这个列表：

`List<BaseSegment<Lead>> l = new List<BaseSegment<Lead>>();`

但就像我说的，我需要传递多个类，我有一个 LeadSegment、AccountSegment、ContactSegment 等（实现`BaseSegment<T>`）。

理想的情况是这样的：

```
List<BaseSegment<T>> lst = new List<BaseSegment<T>>();
lst.Add(LeadSegment);
lst.Add(AccountSegment);
lst.Add(ContactSegment); 
```

`<T>`..并通过它，但是我相信您不能在方法内或外部创建具有类型的列表

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:32:01.953

制作`BaseSegment`一个非泛型抽象类（你从不`BaseSegment`直接实例化吗？）。您的签名`FillSegment`可能如下所示：

```
private void FillSegment<TParent>(TParent parent, IEnumerable<BaseSegment> children)
    where TParent : BaseSegment 
```

这使您可以使用如下方法：

```
var parent = new SomeParentSegment(); // SomeParentSegment derives from BaseSegment
var children = new List<BaseSegment>();
children.Add(new LeadSegment()); // LeadSegment derives from BaseSegment
children.Add(new AccountSegment()); // AccountSegment derives from BaseSegment
children.Add(new ContactSegment()); // ContactSegment derives from BaseSegment

FillSegment(parent, children); 
```

请注意，这允许`children`与 具有相同的类型`parent`，因为这两个实例都派生自`BaseSegment`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:01:48.293

我在遵循您想要做的事情时遇到了一些麻烦，但我认为您想要做出限制

```
where TT : T 
```

或者...

```
where TT : BaseSegment<T> 
```

这两种场景都支持您上面的“理想场景”；但没有进一步的了解......

# eclipse - 如何使用 eclipse 解决来自 CVS 的“无法识别的请求”错误

> ID：14567142
> 
> 赞同：0
> 
> 时间：2013-01-28T16:58:54.537
> 
> 标签：eclipse, cvs

我正在使用 Eclipse Indigo 登录 CVS 服务器。当我尝试与存储库同步时，出现此错误：

> 同步 CVS 工作区时报告的问题。1 个资源中的 0 个已同步。服务器报错：unrecognized request`dated Template Copy-file Mod-time Set-static-directory Update-existing Clear-static-directory Set-sticky New-entry MT Notified Created Remove-entry Checked-in Merged Removed Valid-requests透明粘性模块扩展'

我能够提交更改，但我看不到任何更新。有谁知道此错误消息的含义以及如何解决？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T14:03:34.373

你可以试试这个它可能会解决你的问题

> 有同样的问题，当我用问题/CVS/Entries 删除我的工作区/项目/WebContent/文件夹的内容时解决了它，然后我在 Eclipse 中刷新了我的文件并且它工作了。我猜那里的东西已经损坏了。

从[这里](https://stackoverflow.com/questions/856686/how-to-solve-synchronizing-cvs-problem-in-eclipse-ide/19716806#19716806)。

# android - Android上的Unicode字符不显示

> ID：14567146
> 
> 赞同：22
> 
> 时间：2013-01-28T16:59:12.443
> 
> 标签：android, unicode

我正在开发一个使用响应式设计的网站。我正在尝试显示 unicode 字符 ☰（☰ 符号），但它没有出现在 Android 上。有什么方法可以让这个角色正确显示，还是我需要用它制作图像？

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-28T17:22:43.873

表示的字符`&#9776;`不会出现在 Android 字体中，其[字体覆盖范围](http://www.fileformat.info/info/unicode/char/2630/fontsupport.htm)在其他环境中也相对有限。

基本选项是使用可下载的字体（网络字体），`@font-face`并使用适当缩放到文本大小的图像。

如果这是您需要的唯一“特殊”字符，则图像方法可能是合适的：它很简单，并且字符的形状非常简单，可以很好地缩放。

使用可下载字体可能会产生更好的效果，尤其是当字符在文本内内联使用时。但是您可能需要 Quivira 或 Symbola 之类的字体，它们是大（> 1 MB）免费字体，如果仅用于一个字符，这似乎意味着不成比例的开销。

有关更多信息，请参阅我[在 HTML 中使用特殊字符的指南](http://www.cs.tut.fi/~jkorpela/html/characters.html)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-25T18:24:53.693

为什么没有人建议 CSS3 方法超出了我的范围。几乎所有设备都支持这一点。

这是一个可以看到它的小提琴，[http://jsfiddle.net/328k7/](http://jsfiddle.net/328k7/)。

***使用 CSS3 创建三元组，如下所示：***

```
div {
    content: "";
    position: absolute;
    left: 0;
    display: block;
    width: 16px;
    top: 0;
    height: 0;
    -webkit-box-shadow: 1px 10px 1px 1px #69737d,1px 16px 1px 1px #69737d,1px 22px 1px 1px #69737d;
    box-shadow: 0 10px 0 1px #69737d,0 16px 0 1px #69737d,0 22px 0 1px #69737d;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T17:02:39.780

它没有为当前字体定义。如果您只关心自己的设备，则可以将字体更改为原来的样子，但确保其在所有设备上显示的唯一方法是使用图像。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-28T17:05:40.667

查看 Android 上支持的字符：[Android 字符集](http://www.ascendercorp.com/pdf/Droid_fonts.pdf)。好像不支持。您可能可以用`<img src="http://www.fileformat.info/info/unicode/char/2630/trigram_for_heaven.png">`标签替换它。

*[编辑] 链接的 URL 不再有效，但您仍然可以在 archive.org 上查看：*
[https://web.archive.org/web/20130603091753/http://www.ascendercorp.com/pdf/Droid_fonts。 pdf](https://web.archive.org/web/20130603091753/http://www.ascendercorp.com/pdf/Droid_fonts.pdf)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-10-30T06:49:55.123

我知道原来的帖子很旧。这就是我实现它的方式。

**CSS**

```
/*⮛*/
.caretdown:before {
font-size: 13px;
font-weight:900;
content:"\002b9b";
} 
```

使用@media 标签在移动设备上替换

```
/* If the screen size is 600px or less */
@media only screen and (max-width: 600px) {
/*substitute ⮛  on mobile for ▼ */
    .caretdown:before {
    content:"\25BC";
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-07-11T22:33:36.473

我将此代码用于汉堡菜单图标：

```
public class MenuButton extends Button
{
    public MenuButton(android.content.Context context){
        super(context);
    }

    public MenuButton(android.content.Context context, android.util.AttributeSet attrs) {
        super(context,attrs);
    }
    public MenuButton(android.content.Context context, android.util.AttributeSet attrs, int defStyleAttr) {
        super(context,attrs,defStyleAttr);
    }
    public MenuButton(android.content.Context context, android.util.AttributeSet attrs, int defStyleAttr, int defStyleRes) {
        super(context,attrs,defStyleAttr,defStyleRes);
    }
    Paint paint = new Paint();
    @Override
    protected void onDraw(Canvas canvas){
        //super.onDraw(canvas);
        MarginLayoutParams lp=(MarginLayoutParams)getLayoutParams();

        float p=lp.rightMargin;
        float w=getWidth()-lp.leftMargin-lp.rightMargin;
        float h=getHeight()-lp.topMargin-lp.bottomMargin;

        paint.setColor(Color.WHITE);
        paint.setStrokeWidth(0.0f);
        float ww=(h)/5.0f;
        canvas.drawRect(0+p, ww*0+p, p+w, ww*1+p, paint);
        canvas.drawRect(0+p, ww*2+p, p+w, ww*3+p, paint);
        canvas.drawRect(0+p, ww*4+p, p+w, ww*5+p, paint);
    }
} 
```

# jakarta-ee - Tomcat 如何处理多个请求

> ID：14567153
> 
> 赞同：9
> 
> 时间：2013-01-28T16:59:32.040
> 
> 标签：jakarta-ee, tomcat, servlets, containers

我知道创建 Web 应用程序，但我有一个基本的疑问。

我很抱歉问了一个非常愚蠢的问题，但想澄清我的疑问。

Tomcat Container 如何处理请求，我的意思是说，当我发送对*home.jsp*页面的请求时，我只得到*home.jsp*页面的响应，而不是同时可能是其他请求的*register.jsp*页面从世界其他角落请求的人。

例如：

```
Client A --------request(a.jsp)----------> Tomcat (check request received for a.jsp and give proper a.jsp response to client A)

Client B --------request(b.jsp)----------> Tomcat (check request received for b.jsp and give proper b.jsp response to client B) 
```

在这种情况下，Tomcat 如何不混淆请求者和对正确请求者的响应。

它是如何在内部工作的。

一些解释这一点的链接也会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-28T20:17:00.077

你基本上是在问 TCP 是如何工作的。这是一个相当大的主题。基本上，它可以按原样恢复：Tomcat 侦听给定 TCP 端口（默认为 8080）上的连接。每次某些浏览器打开到 Tomcat 的连接时，该连接由远程主机的 IP 地址和该主机用于连接到 Tomcat 的 TCP 端口标识。

浏览器通过此连接发送 HTTP 请求，当请求进入 Tomcat 时，Tomcat 从其线程池中分配一个线程来处理该请求。生成并发送响应后，线程返回池中，准备好为来自任何客户端的另一个请求提供服务。

TCP 栈本身不是由 Tomcat 实现的，而是由操作系统实现的。Java 运行时提供 java.io.Socket 和其他相关类，这些类使用操作系统提供的底层 TCP IP 堆栈。Tomcat 依赖于 java.net.Socket 和其他相关类。

# c# - 如何检测 DLL 是否已安装/可用

> ID：14567162
> 
> 赞同：3
> 
> 时间：2013-01-28T16:59:56.740
> 
> 标签：c#, dllimport

检测 C# 中是否安装了 DLL 的最有效方法是什么？我对这个很感兴趣：msvcr80.dll。我尝试从 C# 程序调用 LoadLibrary 互操作 API 调用，但它不起作用。我只需要检测它，而不是利用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T18:11:49.680

Pinvoking msvcr80.dll 很困难。它是一个特殊的 DLL，它存储在 Windows 并行缓存 (c:\windows\winsxs) 中，并且通常在一台机器上安装了许多版本。我在这台机器上有 16 个。并行缓存相当于非托管 DLL 的 GAC。在您的代码中使用这样的 DLL 需要一个清单，说明您要使用哪个特定版本的 msvcr80.dll。

因此，您要做的第一件事就是将该条目添加到您自己的程序清单中。Project + Add New Item，选择Application Manifest项模板。您必须对其进行编辑以包含对 msvcr80.dll 的依赖项。您的清单应如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<asmv1:assembly manifestVersion="1.0" xmlns="urn:schemas-microsoft-com:asm.v1" xmlns:asmv1="urn:schemas-microsoft-com:asm.v1" xmlns:asmv2="urn:schemas-microsoft-com:asm.v2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <assemblyIdentity version="1.0.0.0" name="MyApplication.app"/>
    <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
        <security>
            <requestedPrivileges xmlns="urn:schemas-microsoft-com:asm.v3">
                <requestedExecutionLevel level="asInvoker" uiAccess="false" />
            </requestedPrivileges>
        </security>
    </trustInfo>
    <dependency>
        <dependentAssembly>
            <assemblyIdentity type="win32" name="Microsoft.VC80.CRT" version="8.0.50727.6195" processorArchitecture="x86" publicKeyToken="1fc8b3b9a1e18e3b"></assemblyIdentity>
        </dependentAssembly>
    </dependency>
</asmv1:assembly> 
```

注意版本属性，`8.0.50727.6195`现在是最新的。其他常见的修订版本是 42（原始 RTM 版本）和 762（SP1 版本）以及大量安全更新。您通常可以在清单中使用 .42，更新部署的发布者策略文件将重定向到机器上最新安装的版本。

另请注意该`processorArchitecture`属性，如果您想使用 64 位版本的 DLL，则需要“amd64”。最好坚持使用 x86 并确保您的程序在 32 位模式下运行。右键单击您的 EXE 项目，属性，构建选项卡，平台目标 = x86。

您现在可以使用 [DllImport] 从 DLL 调用函数。喜欢：

```
 [DllImport("msvcr80.dll", CallingConvention = CallingConvention.Cdecl)]
    private static extern IntPtr _errno(); 
```

我故意选择了一个无用的无辜函数。这样您就可以调用它来测试是否安装了具有所需版本号的 DLL。捕获异常以知道它不存在。如果您想毫无例外地执行此操作，请调用 LoadLibrary()。

我猜你并没有完全指望这些并发症。一种完全不同的方法是使用 Windows 代码使用的等效 DLL。只要您不尝试调用“不寻常”的功能，这很好。每次安装 Windows 都有 msvcrt.dll，不需要检查它的存在，也不需要清单。只需更改 [DllImport] 属性中的 DLL 名称即可。但请注意，当 Microsoft 显着更改此 CRT 的私有副本时，您的程序可能会在某天中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:16:09.887

您需要检查`PATH`环境变量下的目录和*全局程序集缓存*，最好使用[此 API](http://support.microsoft.com/kb/317540)完成。

# java - 在 Eclipse 中集成 SWT 和 JMF

> ID：14567163
> 
> 赞同：1
> 
> 时间：2013-01-28T16:59:57.363
> 
> 标签：java, swt, mp3, javasound, jmf

尝试用 GUI 前端构建一个简单的 MP3 播放器。基本上我可以使用 JMF 让 mp3 正常播放，但是当我导入/使用 org.eclipse.swt 时，它只是拒绝播放 mp3。我猜想使用 SWT 在某种程度上与 JMF 有冲突，但我不知道如何或如何解决它。

# ruby-on-rails-3 - 可以吗？（：更新）返回false，但不能使用inherited_resources gem 限制资源的编辑/更新

> ID：14567166
> 
> 赞同：0
> 
> 时间：2013-01-28T17:00:00.613
> 
> 标签：ruby-on-rails-3, cancan, inherited-resources

我正在使用带有继承资源的 cancan，我遇到了一个奇怪的问题（可能是错误？），我为用户定义了一个编辑权限，突然他们被授权访问 /edit 操作，尽管能力返回 false。这就是我正在经历的行为。

```
class VenuesController < ApplicationController
  inherit_resources
  authorize_resource
end 
```

如果没有定义能力，我的非管理员用户会从 /venues/1/edit 重定向到主页。但是，一旦我定义了一个 :update 能力，无论该能力返回真还是假，我都不会被重定向。这是我要定义的能力：

# 能力.rb

```
can :update, Venue do |venue|
  venue.admin_ids.map{|a| a.to_s}.include? user.id.to_s
end 
```

这将返回正确的值，正如我在测试中看到的以及在我的视图中进行的健全性检查：

# 场地/edit.html.haml

```
= can? :update, @venue
#returns false 
```

所以，如果我在编辑操作中并且我的视图显示“我无法更新”，那么不应该可以从这个页面重定向我吗？作为双重检查，我尝试了

```
can :update, Venue do |venue|
  false
end 
```

仍然没有运气......我只是觉得奇怪的是，没有任何能力定义，我被重定向，但是当我定义一个返回 false 的能力时，尽管视图层适当地告诉我我无法编辑，但我没有被重定向。有任何想法吗？这是一个错误吗？难道我做错了什么？

此外，我不仅可以看到编辑操作，而且还可以实际向资源发出 put 请求并保存资源。

# python - 如何从 Django 记录器中检索真正的 SQL？

> ID：14567172
> 
> 赞同：0
> 
> 时间：2013-01-28T17:00:13.663
> 
> 标签：python, sql, django, django-database

我正在尝试分析我们的 Django (1.3) Web 应用程序的 SQL 性能。我添加了一个附加到`django.db.backends`并设置的自定义日志处理程序`DEBUG = True`，这使我可以查看所有正在执行的数据库查询。

但是 SQL 不是有效的 SQL！实际查询是`select * from app_model where name = %s`使用传入的一些参数（例如`"admin"`），但是日志消息没有引用参数，所以 sql 是`select * from app_model where name = admin`，这是错误的。这也发生在使用`django.db.connection.queries`. AFAIK django 调试工具栏有一个复杂的自定义光标来处理这个问题。

**更新**对于那些建议使用 Django 调试工具栏的人：我知道那个工具，它很棒。但是它不能满足我的需要。我想运行我们应用程序的示例交互，并聚合使用的 SQL。DjDT 非常适合展示和浅层学习。但对于汇总和总结数十页的交互作用并不好。

是否有任何简单的方法来获得运行的真实、合法的 SQL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:02:22.077

查看[django-debug-toolbar](https://github.com/django-debug-toolbar/django-debug-toolbar)。打开一个页面，边栏将显示所有 SQL 查询以及其他信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:18:13.517

`select * from app_model where name = %s`是一个准备好的语句。我建议您分别记录语句和参数。为了获得格式正确的查询，您需要执行类似`"select * from app_model where name = %s" % quote_string("user")`或更一般的操作`query % map(quote_string, params)`。

请注意，quote_string 是特定于 DB 的，DB 2.0 API 没有定义 quote_string 方法。所以你需要自己写一个。出于记录目的，我建议将查询和参数分开，因为它可以更好地进行分析，因为您可以轻松地对查询进行分组，而无需考虑实际值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T17:27:35.590

Django Docs 声明这种不正确的引用只发生在 SQLite 上。

[https://docs.djangoproject.com/en/dev/ref/databases/#sqlite-connection-queries](https://docs.djangoproject.com/en/dev/ref/databases/#sqlite-connection-queries)

您是否尝试过其他数据库引擎？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T17:02:27.163

每个 QuerySet 对象都有一个“查询”属性。做你想做的事情的一种方法（我接受可能不是一个理想的方法）是使用[Django 的测试客户端](https://docs.djangoproject.com/en/1.3/topics/testing/#module-django.test.client)将每个视图生成的查找链接到一种脚本化的用户故事中。对于每个查找，您的用户故事包含的只是将查询附加到您在最后编写的类似文件的对象中，例如（为简洁起见，使用列表代替）：

```
l = []
o = Object.objects.all()
l.append(o.query) 
```

# mysql - 这个查询有什么问题（UNION SELECT SUBSTRING）

> ID：14567176
> 
> 赞同：0
> 
> 时间：2013-01-28T17:00:28.723
> 
> 标签：mysql, union

我有一个查询：

```
select first_name from users where user_id=1 
UNION 
SELECT IF(SUBSTRING user(),1,4) = 'root',SLEEP(5),1); 
```

每当我运行它时，我都会收到以下错误：

```
ERROR 1064 (42000): You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL server version 
for the right syntax to use near 'user(),1,4) = 'root',SLEEP(5),1)' at line 1 
```

我的目的是测试用户是否是root。

`SUBSTRING user(),1,4)`意思是：从位置1开始，获取四个字符（基本上是root）。如果数据库用户是root，则暂停5秒。

但是`SLEEP(5),1)`除了指示暂停指定的 5 秒之外，这意味着什么？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:04:49.207

正确的语法是：

```
IF(SUBSTRING(user(),1,4) = 'root',SLEEP(5),1) 
```

你只是缺少一个`(`. 也许你也可以使用这个：

```
IF(user() like "root%", SLEEP(5), 1). 
```

[Sleep(n)](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_sleep)只是将查询的执行暂停 n 秒。我不觉得它真的有用......但它是可能的。

# spring - Spring JPA Hibernate 有效配置不适用于 JdbcTemplate？

> ID：14567180
> 
> 赞同：2
> 
> 时间：2013-01-28T17:00:47.190
> 
> 标签：spring, hibernate, jpa-2.0, entitymanager, jdbctemplate

我在 Spring 中使用 Hibernate 提供程序为 JPA 提供了一个工作配置：

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="loadTimeWeaver">
        <bean class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver"/>
    </property>
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="true"/>
        </bean>
    </property>
    <property name="jpaProperties">
        <props>
            <prop key="hibernate.hbm2ddl.auto">create</prop>
        </props>
    </property>
</bean>
<bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

<tx:annotation-driven mode="aspectj"/>
<bean id="jpaTransactionManager" class="org.springframework.orm.jpa.JpaTransactionManager"/> 
```

此配置在基于 Spring 的小型 Web 应用程序中运行。

但是，当我将相同的配置插入到其他现有的基于 Spring 的 web 应用程序中时，我确实得到了以下异常：

**javax.persistence.TransactionRequiredException：没有正在进行的事务**

我认为它与 Spring JDBC 模板有一些冲突：

```
<bean id="mysqlTemplate"
    class="org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate">
    <constructor-arg ref="dataSource" />
</bean> 
```

我怎样才能让它并排工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:22:52.120

“没有进行中的事务”只是意味着您正在尝试在某处使用 EntityManager 并且您没有先启动事务。堆栈跟踪将告诉您确切的位置。由于您使用的是注释驱动的事务，因此只需确保您`@Transactional`在异常发生位置的调用链上的某个位置有适当的位置。

# asp.net-mvc - 定义列表 在剃刀页面

> ID：14567181
> 
> 赞同：0
> 
> 时间：2013-01-28T17:00:47.990
> 
> 标签：asp.net-mvc, razor, generic-collections

为什么当我尝试定义 List 对象时会插入标签名称而不是“T”？

![在此处输入图像描述](../Images/4e11c7f33751f5c287b568273f5c1cbd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:11:21.370

您应该将 @ 之后的所有代码括在括号中：

```
<td>@(Html.DropDownList("yyy", new SelectList(new List<string>{"",""})))</td> 
```

# android - 不针对最新版本的 Android 2.2

> ID：14567182
> 
> 赞同：0
> 
> 时间：2013-01-28T17:00:51.813
> 
> 标签：android

> **可能重复：**
> [不针对最新版本的 Android](https://stackoverflow.com/questions/13431722/not-targeting-the-latest-versions-of-android)

尝试在最新的 Android SDK Package 4.2 上测试主题时出现警告。这是我的清单文件：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="8" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.thepikopaper.sdd.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
     <activity
        android:name=".PlayButton"
        android:label="@string/app_name" >  
            <action android:name="com.thepikopaper.sdd.PLAYBUTTON" />
            <category android:name="android.intent.category.DEFAULT" />
    </activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:31:06.973

如果可以的话，您应该在可以找到的最新 android 版本（以及所有旧版本）上测试您的应用。并使用此版本作为 targetSdkVersion。[你可以在这里阅读它。](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html#target)

如果您对所有内容都满意，您也可以忽略此消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:39:29.140

它可能是说您不使用最后一个 API（API 级别 17）。

# c# - 从matlab将二进制数据传递给c#

> ID：14567184
> 
> 赞同：1
> 
> 时间：2013-01-28T17:00:58.653
> 
> 标签：c#, matlab, image-processing

我有一个专有（内部）图像处理库的 C# 接口。

接口看起来像这样：

```
void RGBConvert::ConvertFromRGBToYCbCr(                   
    int            ncols,        
    int            nrows,        
    IntPtr         rgb,         
    IntPtr         out) 
```

其中 IntPtr 是指向底层内存的指针。我已经多次从 Matlab 调用 .NET 对象，但是将大型 C 数据数组传递到 C# 不是我做过的事情，而且我已经走到了死胡同。

Matlab 手册： http: [//www.mathworks.com/help/matlab/matlab_external/handling-net-data-in-matlab_bte9oxc-1.html#bte9o7y-1](http://www.mathworks.com/help/matlab/matlab_external/handling-net-data-in-matlab_bte9oxc-1.html#bte9o7y-1)表示不支持 IntPtr。我的意思是，它不会将 Unsigned8Bit 整数数组转换为 IntPtr 以传递给该方法。（如果你通过一些其他机制构造一个 IntPtr，Matlab 会像对待任何其他 .NET 对象一样对待它并传递它。）那么，我如何找到指向 Matlab 数据的指针，并将它传递给这个方法呢？

显然，一种方法是使用普通的 Matlab C/C++ 接口来“欺骗”matlab 显示指向底层数组数据结构的指针，然后将该指针传递给 IntPtr 构造函数。然后传递 IntPtr。我们曾希望有一个“纯”的 C# 实现，并且除了 C# 接口之外不必有 C/C++ 接口。

另一种方法可能是使用 Matlab`ConvertArray`调用，将 matlab 数组转换为 .NET 数组，但是我仍然需要一个指向原始数据的 IntPtr。

我不介意这里有多余的内存副本，这不是性能关键代码，这是实验代码。

有没有人有这个问题的经验和建议？

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:41:02.887

如果你不能得到 MathLab 数组的地址，你最好用一个接受（并返回）数组的方法来包装 3rd Party API

```
byte[] ConvertFromRGBToYCbCr(int ncols, int nrows, byte[] rgb) 
```

[然后使用这样](https://stackoverflow.com/a/537722/842543)的技术在 .net 中获取此数组的地址，以调用原始 RGBConvert 方法。

# c# - MonoTouch - 带有 MotionManager 的加速度计停止发送更新

> ID：14567187
> 
> 赞同：2
> 
> 时间：2013-01-28T17:01:07.367
> 
> 标签：c#, ios, xamarin.ios, core-motion

我正在尝试将加速度计`Monotouch`与`MotionManager`. **更新将在 2-3 秒后停止发送。**

这是代码。（一切都是在我的 main 的构造函数中创建的`UIView`）。

```
CMMotionManager motionManager = new CMMotionManager();
motionManager.AccelerometerUpdateInterval = 0.5;
motionManager
    .StartAccelerometerUpdates(NSOperationQueue.CurrentQueue, 
        delegate(CMAccelerometerData data, NSError error) 
{
    myLabel.Text = data.Acceleration.X.ToString("0.0000");        
}); 
```

随着`UIAccelerometer`，它的工作：

```
UIAccelerometer acc = UIAccelerometer.SharedAccelerometer;
acc.UpdateInterval = 0.5;
acc.Acceleration += delegate(object sender, UIAccelerometerEventArgs e) 
{
    myLabel.Text = e.Acceleration.X.ToString("0.0000"); 
}; 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:07:39.950

没有足够的源代码来查看您是否保留对`CMMotionManager`实例的引用。否则 GC 可以处理它，这将停止任何更新。

相比之下，您在创建自己的（可能是）时使用**共享的（永远不会被 GC'ed）。** `UIAccelerometer``CMMotionManager`

# cygwin - 在 Cygwin 中导出带有空格的 JAVA_HOME

> ID：14567191
> 
> 赞同：10
> 
> 时间：2013-01-28T17:01:21.047
> 
> 标签：cygwin, export, space, java-home

我正在尝试使用以下命令在 Cygwin 中设置我的 JAVA_HOME：

```
export JAVA_HOME="/cygdrive/c/Program Files/Java/jdk1.7.0_10" 
```

但是当我这样做时`cd $JAVA_HOME`，我会收到此错误：

```
$ cd $JAVA_HOME
-bash: cd: /cygdrive/c/Program: No such file or directory 
```

我尝试引用并转义空格（即，`\`），但没有奏效。知道还有什么吗？

谢谢，

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-25T13:43:09.243

我也遇到了这个问题，我看到了很多帖子，但都没有真正奏效。我做了一个小技巧，事情开始起作用了。

我的 JAVA_HOME 设置为 C:/Program Files/Java/jdk1.7.0_23。问题出在 Program Files 目录上，我遇到了同样的错误。

在 Windows 中，为每个有空格的目录创建了一个短名称，没有空格。您可以通过在命令提示符下运行 dir /X 命令来查看它。Program Files 的简称为 PROGRA~1。

在通过我的电脑的 Windows 环境变量中，我将 JAVA_HOME 更改为 C:/PROGR~1/Java/jdk1.7.0_23，在 hadoop-env.sh 中我将 JAVA_HOME 更改为 /cygdrv/c/PROGRA~1/Java/jdk1。 7.0_23。

它工作得很好。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-28T17:10:11.350

你设置`JAVA_HOME`正确。现在让我们`cd`也正确。

```
cd "$JAVA_HOME" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-10T20:48:10.747

为了避免使用繁琐的 Windows 环境变量，并使用从 Windows 资源管理器复制的实际路径字符串，我建议将以下内容添加到您的启动脚本中：

```
 TMP=`cygpath -sw "C:\Program Files\Java\jdk1.8.0_31"`
export JAVA_HOME=`cygpath -u $TMP` 
```

第一次`cygpath`调用获得一个短的**窗口****路径**；第二个将其转换为**u** nix 格式，这在 cygwin 中运行良好。

这现在也可以正常工作：

```
$ cd $JAVA_HOME 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-01T20:11:29.933

尝试使用短名称以避免路径中出现空格。

"C:\Program Files" 应该具有短名称 C:\Progra~1（您可以使用 DOS dir 命令或在文件资源管理器的地址栏中输入它来验证它）。

以这种方式设置您的 JAVA_HOME：

```
export JAVA_HOME="/cygdrive/c/Progra~1/Java/jdk1.7.0_10" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-20T02:01:42.210

尝试使用 DOS subst 命令获取 JAVA_HOME 路径名的空格。假设驱动器 J；未安装或以其他方式使用。

在 DOS 外壳中

```
subst j: "C:/Program Files/Java/jdk1.7.0_45" 
```

J：现在是 C:/Program Files/Java/jdk1.7.0_45 的缩写

您现在可以 cd 到 J：

现在运行 Cygwin 和

```
export JAVA_HOME="J:" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-09T18:51:03.667

我在“程序文件”之外安装了 Java，特别是在 c:\tools 中。然后您可以使用 cygpath 将 C:\tools\jdk1.8.0_144 转换为 /cygdrive/c/tools/jdk1.8.0_144

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-13T15:54:30.163

在**MSYS2**终端上

检查以前的声明： `ls "/C/program files/"`！工作！- 那是长文件名，所以，直截了当：

```
export JAVA_HOME="/D/Devel/jdk-12.0.2" 
```

现在 Maven 工作....

查看：

```
user55@DESKTOP MSYS ~
# echo $JAVA_HOME
/D/Devel/jdk-12.0.2 
```

# xaml - 您好，我是 XAML 新手，需要帮助。我不断收到此错误“在“网格”类型中找不到可附加属性“资源”

> ID：14567194
> 
> 赞同：0
> 
> 时间：2013-01-28T17:01:25.900
> 
> 标签：xaml

这是我在 xaml 中的代码。我不断收到此错误“在'Grid'类型中找不到可附加属性'Resources'。此外，我还得到本地：AgeValidation - 未找到。你能帮忙吗。谢谢。

> > ```
> > <Window x:Class="WpfApplication1.MainWindow"
> >         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
> >         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
> >         Title="MainWindow" Height="350" Width="525">
> > 
> >     <Grid.Resources>
> >         <Style TargetType="{x:Type TextBox}">
> >             <Style.Triggers>
> >                 <Trigger Property="Validation.HasError" Value ="true">
> >                     <Setter Property="ToolTip" 
> >                       Value="{Binding RelativeSource 
> >                      ={x:Static RelativeSource.Self},
> >                       Path= (Validation.Errors)[0].ErrorContent}"/>
> >                 </Trigger>
> >             </Style.Triggers>
> >             <Setter Property="Validation.ErrorTemplate">
> >                 <Setter.Value>
> >                     <ControlTemplate>
> >                         <DockPanel DockPanel.Dock="Right">
> >                             <AdornedElementPlaceholder>
> >                                 <Border BorderBrush="Red" BorderThickness="2"/>
> >                             </AdornedElementPlaceholder>
> >                             <TextBlock Margin=" 3" Text=" *" Foreground="Red" 
> >                                        ToolTip="{Binding Path= AdornedElement.ToolTip,
> >                                                   RelativeSource=
> >                                                  {RelativeSource Mode=FindAncestor,
> >                                                  AncestorType={x:Type Adorner}}}"/>
> >                         </DockPanel>
> >                     </ControlTemplate>
> >                 </Setter.Value>
> >             </Setter>
> >         </Style>
> >          <Style TargetType="x:Type Button}">
> >           <Style.Triggers>
> >             <DataTrigger Binding="Binding ElementName= txtAge,
> >                          Path= (Validation.HasError)}"
> >                          Value=" True">
> >                 <Setter Property="IsEnabled" Value=" False"/>
> >             </DataTrigger>
> >             <DataTrigger Binding="Binding ElementName= txtFirstName,
> >                          Path=(Validation.HasError)}"
> >                          Value=" True">
> >                 <Setter Property="IsEnabled" Value=" False"/>
> >             </DataTrigger>
> >             <DataTrigger Binding="Binding ElementName= txtLastName,
> >                          Path= (Validation.HasError)}"
> >                          Value=" True">
> >                 <Setter Property="IsEnabled" Value=" False"/>
> >             </DataTrigger>
> >         </Style.Triggers>
> >     </Style>
> >     <TextBox Name="txtFirstName" Grid.Column=" 1"
> >              Text="{Binding Path=FirstName,
> >                             UpdateSourceTrigger=PropertyChanged, 
> >                             ValidatesOnDataErrors =True}"
> >              Width="150" Margin=" 5"/>
> >     <TextBlock Text="Last Name :" Margin=" 10" Grid.Row="1" />
> >     <TextBox Name="txtLastName" Grid.Column="1"
> >              Text="Binding Path=LastName,
> >                            UpdateSourceTrigger=PropertyChanged,
> >                             ValidatesOnDataErrors=True}"
> >              Grid.Row="1" Width=" 150" Margin=" 5"/>
> >     <TextBlock Text="Age : " Margin=" 10" Grid.Row="2" />
> >     <TextBox Name="txtAge" Grid.Column="1" Grid.Row="2" Width=" 150" Margin="5">
> >         <TextBox.Text>
> >             <Binding Path=" Age" UpdateSourceTrigger="PropertyChanged" 
> >                       ValidatesOnDataErrors="True">
> >                 <Binding.ValidationRules>
> >                     <local:AgeValidation MinimumAge="1"/>
> >                 </Binding.ValidationRules>
> >             </Binding>
> >         </TextBox.Text>
> >     </TextBox> 
> > ```
> 
> ```
>  <Button Grid.Column="1" Grid.Row="3"
>             Content=" Update" Margin=" 5" HorizontalAlignment="Center" />
> </Grid.Resources> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:07:51.683

您应该添加`<Grid></Grid>`才能在其中插入资源！对于 AgeValidation，请确保验证类是公共的，包含在指定的命名空间中并继承 ValidationRule 类，请参阅[此](http://www.switchonthecode.com/tutorials/wpf-tutorial-binding-validation-rules)。

```
 <Grid>
       <Grid.Resources>
            <Style TargetType="{x:Type TextBox}">
                <Style.Triggers>
                    <Trigger Property="Validation.HasError" Value ="true">
                        <Setter Property="ToolTip" 
                          Value="{Binding RelativeSource 
                         ={x:Static RelativeSource.Self},
                          Path= (Validation.Errors)[0].ErrorContent}"/>
                    </Trigger>
                </Style.Triggers>
                <Setter Property="Validation.ErrorTemplate">
                    <Setter.Value>
                        <ControlTemplate>
                            <DockPanel DockPanel.Dock="Right">
                                <AdornedElementPlaceholder>
                                    <Border BorderBrush="Red" BorderThickness="2"/>
                                </AdornedElementPlaceholder>
                                <TextBlock Margin=" 3" Text=" *" Foreground="Red" 
                                           ToolTip="{Binding Path= AdornedElement.ToolTip,
                                                      RelativeSource=
                                                     {RelativeSource Mode=FindAncestor,
                                                     AncestorType={x:Type Adorner}}}"/>
                            </DockPanel>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
             <Style TargetType="x:Type Button}">
              <Style.Triggers>
                <DataTrigger Binding="Binding ElementName= txtAge,
                             Path= (Validation.HasError)}"
                             Value=" True">
                    <Setter Property="IsEnabled" Value=" False"/>
                </DataTrigger>
                <DataTrigger Binding="Binding ElementName= txtFirstName,
                             Path=(Validation.HasError)}"
                             Value=" True">
                    <Setter Property="IsEnabled" Value=" False"/>
                </DataTrigger>
                <DataTrigger Binding="Binding ElementName= txtLastName,
                             Path= (Validation.HasError)}"
                             Value=" True">
                    <Setter Property="IsEnabled" Value=" False"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
        <TextBox Name="txtFirstName" Grid.Column=" 1"
                 Text="{Binding Path=FirstName,
                                UpdateSourceTrigger=PropertyChanged, 
                                ValidatesOnDataErrors =True}"
                 Width="150" Margin=" 5"/>
        <TextBlock Text="Last Name :" Margin=" 10" Grid.Row="1" />
        <TextBox Name="txtLastName" Grid.Column="1"
                 Text="Binding Path=LastName,
                               UpdateSourceTrigger=PropertyChanged,
                                ValidatesOnDataErrors=True}"
                 Grid.Row="1" Width=" 150" Margin=" 5"/>
        <TextBlock Text="Age : " Margin=" 10" Grid.Row="2" />
        <TextBox Name="txtAge" Grid.Column="1" Grid.Row="2" Width=" 150" Margin="5">
            <TextBox.Text>
                <Binding Path=" Age" UpdateSourceTrigger="PropertyChanged" 
                          ValidatesOnDataErrors="True">
                    <Binding.ValidationRules>
                        <local:AgeValidation MinimumAge="1"/>
                    </Binding.ValidationRules>
                </Binding>
            </TextBox.Text>
        </TextBox>
        <Button Grid.Column="1" Grid.Row="3"
                Content=" Update" Margin=" 5" HorizontalAlignment="Center" />
    </Grid.Resources>  </Grid>` 
```

# rest - 是否有将 SAML 令牌与 RESTful 服务结合使用的标准？

> ID：14567198
> 
> 赞同：10
> 
> 时间：2013-01-28T17:01:44.927
> 
> 标签：rest, saml

我正在使用 SAML 令牌对一组 REST-ful 服务进行身份验证，方法是将 SAML 令牌放在`Authorization`标头中。

我找不到任何表明有标准方法可以做到这一点的东西。例如，我是否使用：

```
Authorization: Bearer <EncryptedAssertion ... 
```

或者：

```
Authorization: Bearer PEVuY3J5cHRlZEFzc2VydGlvbiAuLi4= 
```

或者：

```
Authorization: SAML PEVuY3J5cHRlZEFzc2VydGlvbiAuLi4= 
```

或者是其他东西？

请注意，如果证书具有多个名称组件，则第一个不起作用（因为逗号会弄乱标头解析）。

我使用'Bearer'这一事实并没有说明令牌的格式。

Apache CXF 似乎使用了第三种变体。

哪个是标准的？有标准吗？如果没有，是否有事实上的标准？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-10T20:38:57.700

HTTP 中自定义身份验证方案的标准在 RFC 2617 和 7235 中定义。

```
Authorization: scheme key="value", ... 
```

我怀疑您的具体情况是否有标准，但我会说这是可以接受的：

```
Authorization: SAML bearer="PEVuY3J5cHRlZEFzc2VydGlvbiAuLi4=" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-20T10:53:15.190

在对该主题进行了大量研究之后，我找不到任何标准来定义如何在授权标头中使用 SAML 令牌。

然而，CXF 是一个非常著名的 Web-Serviec 堆栈，它以以下方式[支持 SAML Token ：](http://cxf.apache.org/docs/jax-rs-saml.html)

```
Authorization: SAML eJydV1m....9fYTCPr= 
```

OAuth2 还定义了如何使用 SAML 令牌进行身份验证以接收 OAuth2 访问令牌，然后该令牌可用于调用另一个 REST 服务 ( [https://www.rfc-editor.org/rfc/rfc7522](https://www.rfc-editor.org/rfc/rfc7522) )

```
POST /token.oauth2 HTTP/1.1
Host: as.example.com
Content-Type: application/x-www-form-urlencoded

grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Asaml2-bearer&
assertion=PHNhbWxwOl...[omitted for brevity]...ZT4 
```

# vim - VIM从行尾删除到字符？

> ID：14567199
> 
> 赞同：2
> 
> 时间：2013-01-28T17:01:47.147
> 
> 标签：vim

我正在寻找 VI(M) 中的快速命令，我可以在其中删除从行尾开始到字符的所有文本。我可以反过来：

```
:%s/.*" 
```

但我想要相反。我试过：

```
:%s/$.*" 
```

但这不起作用（我的逻辑是 $ - 从行尾开始，找到所有内容到 " 并删除它。

这是我正在尝试操作的文本示例（编辑：但此行多次出现-该解决方案必须适用于类似结构的多行-单行解决方案是不够的-抱歉首先不清楚):

```
APPPOOL "default app pool" (some long list of stuff, more entries here) 
```

变成

```
APPPOOL "default app pool" 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T17:07:11.790

为什么不只是简单地输入`$dT"`？

如果你真的想用 :s 来做，试试

```
:s/"[^"]*$/"/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T17:03:46.197

两个想法。第一的：

```
:s/\(.*"\).*/\1/ 
```

或者，转到行尾并执行以下操作：

```
dT"x 
```

对整个缓冲区进行操作：

```
:%normal $dT"x 
```

# tfs - 羞耻警报器构建监视器，无法连接到 TFS 2008 或 TFS 2012

> ID：14567201
> 
> 赞同：2
> 
> 时间：2013-01-28T17:01:52.887
> 
> 标签：tfs, tfsbuild

我正在尝试设置[羞耻警报器构建监视器](http://sirenofshame.com/buildmonitor)，但由于某种原因无法连接到我的 TFS。

TFS 本身在端口 8080 上运行，TFSBuild 在 9192 上运行 - 但放置`http://build-server:8080`或尝试其他端口不起作用......

![在此处输入图像描述](../Images/20ef9f3e0b031264989c778764f56c08.png) ![错误信息](../Images/59fcda34fedab5f3bb5793fabf7d7c5a.png)

（更新 1）我已经下载了源代码，并且还使用 Wireshark 查看了它尝试进行身份验证时发生的情况。我很困惑，因为代码使用了标准的 .net 库用于 TFS - Microsoft.TeamFoundation.dll (v2.0.50727)。如果我在服务器上查看 IIS，它似乎正在寻找不存在的 Web 服务 - 即`POST /TeamFoundation/Administration/v3.0/LocationService.asmx`

是不是完全不兼容 TFS 2008，只有 TFS 2010 可以工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:29:56.860

我下载了“耻辱警报”来看看。

要连接，您需要按以下格式输入 TFS 的 URL

`http://tfs-Application-Server:8080/tfs`

![警笛配置屏幕](../Images/1632f7fac4a753b822c86d804aec0357.png)

请注意，它附加到 TFS 服务器而不是构建服务器（或构建控制器）。

但是，连接到 TFS 后，配置起来似乎很痛苦。它正确检测到我在 TFS 中拥有的所有团队项目集合，但是当我选择其中一个集合时，它没有显示任何正在运行的构建。所以我尝试选择一个团队项目，再次没有显示任何构建。最后我选择了一个我知道正在运行的构建，然后它才出现在 Siren of Shame 中。

我有数千个构建，我不想单独选择每个构建来监控它。至少我希望能够选择一个团队项目并一键监控该项目中的所有构建

有很多选择。但它们都不是很好 [http://teambuildscreen.codeplex.com/](http://teambuildscreen.codeplex.com/)

[http://buildmonitor.codeplex.com/](http://buildmonitor.codeplex.com/)

[http://tfsbuildinspector.codeplex.com/](http://tfsbuildinspector.codeplex.com/)

# python - 表单处理Django中的日期时间对象格式错误

> ID：14567208
> 
> 赞同：2
> 
> 时间：2013-01-28T17:02:26.363
> 
> 标签：python, django, datetime

我已经把头撞在墙上一段时间了，也许有人可以帮助我。这涉及 Django 表单和日期时间格式。

所以我正在尝试制作一个表单视图，该视图从用户那里获取一些信息，包括日期时间元素。我的看法如下：

```
def index(request):
un = request.user.username
plot, created = PreciseRequest.objects.get_or_create( user_name=un )
if request.method == 'POST':
  form = PreciseForm(request.POST)
    if form.is_valid():
        plot.user_name = form.cleaned_data['user_name'],
        plot.analyte_choice = form.cleaned_data['analyte_choice'],
        plot.plot_format = form.cleaned_data['plot_format'],
        plot.start_datetime = form.cleaned_data['start_datetime'],
        plot.end_datetime = form.cleaned_data['end_datetime'],
        plot.inoculation_start = form.cleaned_data['inoculation_start'],
        plot.inoculation_end = form.cleaned_data['inoculation_end'],
        plot.time_interval_value = form.cleaned_data['time_interval_value'],
        plot.time_interval_type = form.cleaned_data['time_interval_type'],
        plot.auto_glycerol = form.cleaned_data['auto_glycerol'],
        plot.min_glycerol = form.cleaned_data['min_glycerol'],
        plot.max_glycerol = form.cleaned_data['max_glycerol'],
        plot.auto_methanol = form.cleaned_data['auto_methanol'],
        plot.min_methanol = form.cleaned_data['min_methanol'],
        plot.max_methanol = form.cleaned_data['max_methanol'],
        plot.auto_od = form.cleaned_data['auto_od'],
        plot.min_od = form.cleaned_data['min_od'],
        plot.max_od = form.cleaned_data['max_od']
        plot.save( )
    else:
      plot_data = {
        'user_name': plot.user_name,
        'analyte_choice': plot.analyte_choice,
        'plot_format': plot.plot_format,
        'start_datetime': plot.start_datetime,
        'end_datetime': plot.end_datetime,
        'inoculation_start': plot.inoculation_start,
        'inoculation_end': plot.inoculation_end,
        'time_interval_value': plot.time_interval_value,
        'time_interval_type': plot.time_interval_type,
        'auto_glycerol': plot.auto_glycerol,
        'min_glycerol': plot.min_glycerol,
        'max_glycerol': plot.max_glycerol,
        'auto_methanol': plot.auto_methanol,
        'min_methanol': plot.min_methanol,
        'max_methanol': plot.max_methanol,
        'auto_od': plot.auto_od,
        'min_od': plot.min_od,
        'max_od': plot.max_od
    }
    form = PreciseForm( initial=plot_data )
context = Context({ 'title':'Create a Precise Plot', 'form':form })
return render_to_response('PrecisePlot/index.html',context)

        return HttpResponseRedirect( 'ViewPlot/%s/' % plot.id ) 
```

我收到以下错误，好像我错误地传递了 datetime 对象？

> [u"'(datetime.datetime(2013, 1, 1, 14, 44, 27),)' 值的格式无效。必须是YYYY-MM-DD HH:MM[:ss[.uuuuuu]] [TZ] 格式。"]

任何帮助将不胜感激，谢谢！

模型

```
class PreciseRequest( models.Model ):
user_name = models.CharField( max_length=32 )
analyte_choice = models.CharField( max_length=3, choices=ANALYTE_CHOICES, default='GMO' )
plot_format = models.CharField( max_length=2, choices=PLOT_FORMATS, default='SD' )
start_datetime = models.DateTimeField()
end_datetime = models.DateTimeField( )
inoculation_start = models.DateTimeField(  )
inoculation_end = models.DateTimeField(  )
time_interval_value = models.IntegerField( default = 1 )
time_interval_type = models.CharField( max_length=1, choices=INTERVAL_OPTIONS, default='D' )
auto_glycerol = models.BooleanField( default=True )
min_glycerol = models.FloatField( default = 0 )
max_glycerol = models.FloatField( default = 20 )
auto_methanol = models.BooleanField( default=True )
min_methanol = models.FloatField( default = 0 )
max_methanol = models.FloatField( default = 6 )
auto_od = models.BooleanField( default=True )
min_od = models.FloatField( default = 0 )
max_od = models.FloatField( default = 2 )
def __unicode__(self):
    return u'%s' % self.user_name
class Meta:
    ordering = ( 'id', )
    verbose_name = ( 'Precise Plot' )
    verbose_name_plural = ( 'Precise Plots' ) 
```

形式：

```
class PreciseForm( forms.Form ):
user_name = forms.CharField( max_length=32 )
analyte_choice = forms.ChoiceField( choices=ANALYTE_CHOICES, initial='GMO' )
plot_format = forms.ChoiceField( choices=PLOT_FORMATS, initial='SD', widget=forms.Select(attrs={'onclick':'showOptions(this);'}) )
start_datetime = forms.DateTimeField( )
end_datetime = forms.DateTimeField( )
inoculation_start = forms.DateTimeField()
inoculation_end = forms.DateTimeField()
time_interval_value = forms.IntegerField()
time_interval_type = forms.ChoiceField(  choices=INTERVAL_OPTIONS, initial='D' )
auto_glycerol = forms.BooleanField( initial=False, required=False, widget=forms.CheckboxInput(attrs={'onclick':'showScale(this);'}) )
min_glycerol = forms.FloatField( min_value=-10, max_value=20, initial=0, required=False )
max_glycerol = forms.FloatField( min_value=0, max_value=100, initial=20, required=False )
auto_methanol = forms.BooleanField( initial=False, required=False, widget=forms.CheckboxInput(attrs={'onclick':'showScale(this);'}) )
min_methanol = forms.FloatField( min_value=-10, max_value=6, initial=0, required=False )
max_methanol = forms.FloatField( min_value=0, max_value=20, initial=6, required=False )
auto_od = forms.BooleanField( initial=False, required=False, widget=forms.CheckboxInput(attrs={'onclick':'showScale(this);'}) )
min_od = forms.FloatField( min_value=-10, max_value=2, initial=0, required=False )
max_od = forms.FloatField( min_value=0, max_value=20, initial=2, required=False ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:05:12.267

查看有关[forms.DateField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#datefield)的文档。您可以指定要验证传入日期的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-19T13:22:57.197

检查 DateField 表单小部件。它允许您指定
日期的格式。

[http://docs.djangoproject.com/en/dev/ref/forms/fields/#datefield](http://docs.djangoproject.com/en/dev/ref/forms/fields/#datefield)

# python - python - 如何通过groupby执行函数导致python中的pandas？

> ID：14567210
> 
> 赞同：3
> 
> 时间：2013-01-28T17:02:27.257
> 
> 标签：python, csv, pandas

我已使用此代码计算每个集群中每个用户的不同质量指标的值

```
>>> for name, group in df.groupby(["Cluster_id", "User"]):
...     print 'group name:', name
...     print 'group rows:'
...     print group
...     print 'counts of Quality values:'
...     print group["Quality"].value_counts()
...     raw_input()
... 
```

但现在我得到的输出为

```
group rows:
                tag                       user                    quality  cluster
676    black fabric  http://steve.nl/user_1002          usefulness-useful        1
708      blond wood  http://steve.nl/user_1002          usefulness-useful        1
709      blond wood  http://steve.nl/user_1002    problematic-misspelling        1
1410         eames?  http://steve.nl/user_1002      usefulness-not_useful        1
1411         eames?  http://steve.nl/user_1002  problematic-misperception        1
3649  rocking chair  http://steve.nl/user_1002          usefulness-useful        1
3650  rocking chair  http://steve.nl/user_1002  problematic-misperception        1
counts of Quality Values:
usefulness-useful            3
problematic-misperception    2
usefulness-not_useful        1
problematic-misspelling      1 
```

我现在想做的是有一个检查条件，即：

```
if quality==usefulness-useful:
 good = good + 1
else:
 bad = bad + 1 
```

我尝试编写输出：

```
counts of Quality Values:
usefulness-useful            3
problematic-misperception    2
usefulness-not_useful        1
problematic-misspelling      1 
```

进入一个变量并尝试逐行遍历变量，但它不起作用。有人可以给我建议，关于如何对某些行进行计算。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:28:30.827

一旦你有了一个组，你可以使用该方法逐行迭代`.iterrows()`。它为您提供行索引和行本身：

```
In [33]: for row_number, row in group.iterrows():
   ....:     print row_number
   ....:     print row
   ....:     
676
Tag                        black fabric
User          http://steve.nl/user_1002
Quality               usefulness-useful
Cluster_id                            1
Name: 676
708
Tag                          blond wood
User          http://steve.nl/user_1002
Quality               usefulness-useful
Cluster_id                            1
Name: 708
[etc] 
```

并且这些行中的每一行都可以像字典一样被索引，例如：

```
In [48]: row
Out[48]: 
Tag                       rocking chair
User          http://steve.nl/user_1002
Quality       problematic-misperception
Cluster_id                            1
Name: 3650

In [49]: row["User"]
Out[49]: 'http://steve.nl/user_1002'

In [50]: row["Tag"]
Out[50]: 'rocking chair' 
```

所以你可以写你的循环

```
good = 0
bad = 0
for row_number, row in group.iterrows():
    if row['Quality'] == 'usefulness-useful':
        good += 1
    else:
        bad += 1
print 'good', good, 'bad', bad 
```

这使

```
good 3 bad 4 
```

如果这对您有意义，那将是一个非常好的方法。另一种方法是直接从`Quality`列中的计数工作：

```
In [54]: counts = group["Quality"].value_counts()

In [55]: counts
Out[55]: 
usefulness-useful            3
problematic-misperception    2
usefulness-not_useful        1
problematic-misspelling      1

In [56]: counts['usefulness-useful']
Out[56]: 3 
```

因为坏=总 - 好，我们有

```
In [57]: counts.sum() - counts['usefulness-useful']
Out[57]: 4 
```

# php - 将文本区域数据从 MySQL 拉入现有 HTML 表单

> ID：14567219
> 
> 赞同：-1
> 
> 时间：2013-01-28T17:02:49.770
> 
> 标签：php, mysql, textarea

我有一个为内部使用而创建的表单。我已经能够使用表单中的数据填充 MySQL 数据库。我还创建了一个搜索功能，它将根据 ID 键（在本例中为数字）将数据拉回字段中。所有文本字段都返回到字段中，但文本区域数据不会。我转到 MySQL 数据库，这些文本区域的表字段已填写，但它们似乎并没有拉回表单中。如果可以，请你帮助我。谢谢你。

**我的 HTML 表单：**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>- - = =  EPC Print Order Form = = - -  </title>

</head>
<body bgcolor="#DFDFD9">

<h1>Digital Print Form &nbsp &nbsp<input type="image" src="http://commonmedia.asicentral.com/180000/182101/EPC_KAPP.jpg"></h1>

<!-- form to get key detail of record in database -->
<fieldset style='width:570px; text-align:left; border-width:2px;'>
<legend><h3>Request RFQ</h3></legend>
<table bgcolor="beige" border="0" width="570px">
<tr>
<td><form name="form" method="POST" action="form1.php">
RFQ#:</td><td><input type="text" name="search"></td><td><input type="submit"  value="submit"></td>
</form></tr></table>
</fieldset>

<!---------------------  Print Form Data ------------------>

<form action="mysqlTest.php" method="post" id="prayfrm" name="prayfrm" onsubmit="return checkform(this);" onreset="return confirm('Do you want to clear this form?')">
<input type="hidden" name="drfq" value="6">

<!--**********   Basic Job Information for the form******************-->

<fieldset style='width:570px; text-align:left; border-width:2px;'>
<legend><h3>Job Information</h3></legend>
<table bgcolor="beige" border="0" width="570px">
<tr>
        <td><label for="drepid">Sales Rep</label></td>
        <td><input type="text" name="drepid" size="30" required="true"/>
        </td>
        <td><label>Today's Date</label></td>
<td><input type="text" name="datepicker" size="10"/></td>
</tr>     
<tr>
<td><label for="repemail">Rep Email</label></td>
<td><input id="repemail" name="repemail" type="text" size="30" required="true" /></td>
<td><label>Date Needed</label></td>
<td><input id="dateneeded" name="dateneeded" type="text" size="10" required="true" /> </td>
</tr>
<tr>
<td><label for="description">Description</label></td>
<td><input id="description" name="description" type="text" size="30" required="true" /></td>
<td><label for="qty">Quantity</label></td>
<td><input id="qty" name="qty" type="text" size="10" required="true" /></td>
</tr>
<tr>
<td><label for="pgsizeh">Page Size (h) x (w)</label></td>
<td><input id="pgsizeh" name="pgsizeh" type="text" size="10" required="true" />  x  <input id="pgsizew" name="pgsizew" type="text" size="13" required="true" /></td>
<td><label for="pageno">Page Number</label></td>
<td><input id="pageno" name="pageno" type="text" size="10" required="true" /></td>
</tr>
<tr>
<td><label for="stock">Stock</label></td>
<td><input id="stock" name="stock" type="text" size="10" required="true" /> &nbsp<label for="stock">Color &nbsp </label>
<input type="text" name="ink" size="6" required="true"/>
</td>

<td><label for="inknote"> &nbsp Explain </label></td>
<td><input id="inknote" name="inknote" type="text" size="10" /></td>                    

</tr>
<tr>
<td><label for="rfq">Referenced RFQ:</label></td>
<td><input id="rfq" name="rfq" type="text" size="10" required="true" /><td><label for="finishing">Finishing</label></td>
<td><input id="finishing" name="finishing" type="text" size="10" required="true" />
</tr>

</table></fieldset>

<!--**********  Customer Information for the form******************-->

<fieldset style='width:570px; text-align:left; border-width:2px;'>
<legend><h3>Customer Information</h3></legend>
<table bgcolor="beige" border="0" width="570px">
<tr>
<td><label for="dfirstname">First Name</label></td><td><input id="dfirstname" name="dfirstname" type="text" size="31" required="true" /></td><td><label for="dlastname">&nbsp Last </label></td><td><input id="dlastname" name="dlastname" type="text" size="31" required="true" /></td>
</tr>
<tr>
<td><label for="dorganization">Organization</label></td>
<td><input id="dorganization" name="dorganization" type="text" size="31" required="true" /></td><td><label for="email">Email</label></td>
<td><input id="email" name="email" type="text" size="31" required="true" /></td>
</tr>
<tr>
<td><label for="daddress1">Address</label></td><td><input id="daddress1" name="daddress1" type="text" size="31" required="true" /><td></td><td><input id="daddress2" name="daddress2" type="text" size="31" />
</tr>
<tr>
<td><label for="dcity">City</label></td><td><input id="dcity" name="dcity" type="text" size="25" required="true" /> <label for="dstate"> State</label></td><td><input id="dstate" name="dstate" type="text" size="3" required="true" /> <td><label for="dzip"> Zip </label> <input id="dzip" name="dzip" type="text" size="27" required="true" /></tr>
<tr>
<td><label for="phone">Phone </label><td><input id="phone" name="phone" type="text" size="31" required="true" /></td><td><label for="fax">Fax </label><td><input id="fax" name="fax" type="text" size="31" required="true" /> </td>
</tr></table></fieldset>

<!--**********  Delivery Information for the form******************-->

<fieldset style='width:570px; text-align:left; border-width:2px;'>
<legend><h3>Delivery Information</h3></legend>
<table bgcolor="beige" border="0" width="570px">
<tr>
<td><label for="proof">Proof?</label>&nbsp <input type="checkbox" name="proof" value="yes"  required="true" />&nbsp </td><td><label for="whoproof">Proof to Whom?</label> <input id="whoproof" name="whoproof" type="text" size="44" required="true" /></td>
</tr>
<tr>
<td><label for="quote">Quote?</label>&nbsp<input type="checkbox" name="quote" value="yes" required="true" />&nbsp </td>
<td><label for="amount">Amount: $</label> <input id="amount" name="amount" type="text" size="50" required="true" /></td>
</tr>
<tr>
<td><label for="delivery">Delivery Instructions</label></td><td><textarea name="delivery" rows="4" cols="50"></textarea></tr>
<tr>
<td><label for="notes">Additional Notes</label></td><td><textarea name="notes" rows="4" cols="50"></textarea>
</tr>
<td align="right"><input name="submit" type="submit" id="submit" value="Submit" /></td>
<td align="left"><input name="Reset" type="reset" id="reset" value="Reset Form" /></table></fieldset>
</body>
</html> 
```

**用于向数据库添加字段的我的 PHP 文件**

```
<?php
$dbhost = 'hostname';
$dbuser = 'username';
$dbpass = '*******';

$conn = mysql_connect($dbhost, $dbuser, $dbpass) or die ('Error connecting to mysql');

$dbname = 'dbasename';
mysql_select_db($dbname);

// -------------------------------------------------------------------
// Field Names
// -------------------------------------------------------------------

$drepid=mysql_real_escape_string($_POST['drepid']);
$datepicker=mysql_real_escape_string($_POST['datepicker']);
$repemail=mysql_real_escape_string($_POST['repemail']);
$dateneeded=mysql_real_escape_string($_POST['dateneeded']);
$description=mysql_real_escape_string($_POST['description']);
$qty=mysql_real_escape_string($_POST['qty']);
$pgsizeh=mysql_real_escape_string($_POST['pgsizeh']);
$pgsizew=mysql_real_escape_string($_POST['pgsizew']);
$pageno=mysql_real_escape_string($_POST['pageno']);
$stock=mysql_real_escape_string($_POST['stock']);
$ink=mysql_real_escape_string($_POST['ink']);
$inknote=mysql_real_escape_string($_POST['inknote']);
$rfq=mysql_real_escape_string($_POST['rfq']);
$finishing=mysql_real_escape_string($_POST['finishing']);
$dfirstname=mysql_real_escape_string($_POST['dfirstname']);
$dlastname=mysql_real_escape_string($_POST['dlastname']);
$dorganization=mysql_real_escape_string($_POST['dorganization']);
$email=mysql_real_escape_string($_POST['email']);
$daddress1=mysql_real_escape_string($_POST['daddress1']);
$daddress2=mysql_real_escape_string($_POST['daddress2']);
$dcity=mysql_real_escape_string($_POST['dcity']);
$dstate=mysql_real_escape_string($_POST['dstate']);
$dzip=mysql_real_escape_string($_POST['dzip']);
$phone=mysql_real_escape_string($_POST['phone']);
$fax=mysql_real_escape_string($_POST['fax']);
$proof=mysql_real_escape_string($_POST['proof']);
$whoproof=mysql_real_escape_string($_POST['whoproof']);
$quote=mysql_real_escape_string($_POST['quote']);
$amount=mysql_real_escape_string($_POST['amount']);
$delivery=mysql_real_escape_string($_POST['delivery']);
$notes=mysql_real_escape_string($_POST['notes']);

$sql = "INSERT INTO epc_print (drepid, datepicker, repemail, dateneeded, description, qty, pgsizeh, pgsizew, pageno, stock, ink, inknote, rfq, finishing, dfirstname, dlastname, dorganization, email, daddress1, daddress2, dcity, dstate, dzip, phone, fax, proof, whoproof, quote, amount, delivery, notes) values ('$drepid', '$datepicker', '$repemail', '$dateneeded', '$description', '$qty', '$pgsizeh', '$pgsizew', '$pageno', '$stock', '$ink', '$inknote', 'rfq', '$finishing', '$dfirstname', '$dlastname', '$dorganization', '$email', '$daddress1', '$daddress2', '$dcity', '$dstate', '$dzip', '$phone', '$fax', '$proof', '$whoproof', '$quote', '$amount', '$delivery', '$notes')";
mysql_query($sql) or die(mysql_error());
echo "
<code><pre></code>";
echo "POST:";
print_r($_POST);
echo "<code></pre></code>
";
echo "1 record added";

?> 
```

**然后我的 php 文件来检索数据：**

```
<?php

$connection = mysql_connect('hostname','username','*****') or die ("Couldn't connect to server."); 
$db = mysql_select_db('databasename', $connection) or die ("Couldn't select database."); 

$search=$_POST['search'];

$data = 'SELECT * FROM `epc_print` WHERE `drfq` = "'.$search.'"';
  $query = mysql_query($data) or die("Couldn't execute query. ". mysql_error());
  $data2 = mysql_fetch_array($query);

?> 

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
      <title>- - = = EPC Print Form = = - - </title>
 </head>

<body bgcolor="#DFDFD9">

<h1>Digital Print Form &nbsp &nbsp<input type="image" src="http://commonmedia.asicentral.com/180000/182101/EPC_KAPP.jpg"></h1>

<!-- form to get key detail of record in database -->
<fieldset style='width:570px; text-align:left; border-width:2px;'>
<legend><h3>Request RFQ</h3></legend>
<table bgcolor="beige" border="0" width="570px">
<tr>
<td><form name="form" method="POST" action="form1.php">
RFQ#:</td><td><input type="text" name="search"></td><td><input type="submit"  value="submit"></td>
</form></tr></table>
</fieldset>

<!---------------------  Print Form Data ------------------>

<form action="form2.php" method="post" id="prayfrm" name="prayfrm" onsubmit="return checkform(this);" onreset="return confirm('Do you want to clear this form?')">
<input type="hidden" name="drfq" value="6">

<!--**********   Basic Job Information for the form******************-->

<fieldset style='width:570px; text-align:left; border-width:2px;'>
<legend><h3>Job Information</h3></legend>
<table bgcolor="beige" border="0" width="570px">
<tr>
        <td><label for="drepid">Sales Rep</label></td>
        <td><input id="drepid" name="drepid" type="text" size="30" value="<?php echo htmlspecialchars ($data2[drepid])?>" required="true" /></td>

      </td>
        <td><label>Today's Date</label></td>
<td><input id="datepicker" name="datepicker" type="text" size="10" value="<?php echo htmlspecialchars ($data2[datepicker])?>" required="true" /></td>

</tr>     
<tr>
<td><label for="repemail">Rep Email</label></td>
<td><input id="repemail" name="repemail" type="text" size="30" value="<?php echo htmlspecialchars ($data2[repemail])?>" required="true" /></td>
<td><label>Date Needed</label></td>
<td><input id="dateneeded" name="dateneeded" type="text" size="10" value="<?php echo htmlspecialchars ($data2[dateneeded])?>" required="true" /></td></td>
</tr>
<tr>
<td><label for="description">Description</label></td>
<td><input id="description" name="description" type="text" size="30" value="<?php echo htmlspecialchars ($data2[description])?>" required="true" /></td>
<td><label for="qty">Quantity</label></td>
<td><input id="qty" name="qty" type="text" size="10" value="<?php echo htmlspecialchars ($data2[qty])?>"required="true" /></td>
</tr>
<tr>
<td><label for="pgsizeh">Page Size (h) x (w)</label></td>
<td><input id="pgsizeh" name="pgsizeh" type="text" size="10" value="<?php echo htmlspecialchars ($data2[pgsizeh])?>" required="true" />  x  <input id="pgsizew" name="pgsizew" type="text" size="14" value="<?php echo  htmlspecialchars ($data2[pgsizew])?>" required="true" /></td>
<td><label for="pageno">Page Number</label></td>
<td><input id="pageno" name="pageno" type="text" size="10" value="<?php echo htmlspecialchars ($data2[pageno])?>" required="true" /></td>
</tr>
<tr>
<td><label for="stock">Stock</label></td>
<td><input id="stock" name="stock" type="text" size="10" value="<?php echo htmlspecialchars ($data2[stock])?>" required="true" /> <label for="ink">Color </label> <input id="ink" name="ink" type="text" size="10" value="<?php echo htmlspecialchars ($data2[ink])?>" required="true" /></td>

<td><label for="inknote"> &nbsp Explain </label></td>
<td><input id="inknote" name="inknote" type="text" size="10" value="<?php echo htmlspecialchars ($data2[inknote])?>"/></td>                 

</tr>
<tr>
<td><label for="rfq">Referenced RFQ:</label></td>
<td><input id="rfq" name="rfq" type="text" size="10" value="<?php echo htmlspecialchars ($data2[rfq])?>" required="true"/></td> <td><label for="finishing">Finishing</label></td>
<td><input id="finishing" name="finishing" type="text" size="10" value= "<?php echo htmlspecialchars ($data2[finishing])?>" required="true" />
</tr>

</table></fieldset>

<!--**********  Customer Information for the form******************-->

<fieldset style='width:570px; text-align:left; border-width:2px;'>
<legend><h3>Customer Information</h3></legend>
<table bgcolor="beige" border="0" width="570px">
<tr>
<td><label for="dfirstname">First Name</label></td><td><input id="dfirstname" name="dfirstname" type="text" size="31" value="<?php echo htmlspecialchars ($data2[dfirstname])?>" required="true" /></td><td><label for="dlastname">&nbsp Last </label></td><td><input id="dlastname" name="dlastname" type="text" size="31" value= "<?php echo htmlspecialchars ($data2[dlastname])?>"required="true" /></td>
</tr>
<tr>
<td><label for="dorganization">Organization</label></td>
<td><input id="dorganization" name="dorganization" type="text" size="31" value="<?php echo htmlspecialchars ($data2[dorganization])?>" required="true" /></td><td><label for="email">Email</label></td>
<td><input id="email" name="email" type="text" size="31" value="<?php echo htmlspecialchars ($data2[email])?>" required="true" /></td>
</tr>
<tr>
<td><label for="daddress1">Address</label></td><td><input id="daddress1" name="daddress1" type="text" size="31" value="<?php echo htmlspecialchars ($data2[daddress1])?>" required="true" /><td></td><td><input id="daddress2" name="daddress2" type="text" size="31" value="<?php echo htmlspecialchars ($data2[daddress2])?>"/>
</tr>
<tr>
<td><label for="dcity">City</label></td><td><input id="dcity" name="dcity" type="text" size="25" value="<?php echo htmlspecialchars ($data2[dcity])?>" required="true" /> <label for="dstate"> State</label></td><td><input id="dstate" name="dstate" type="text" size="3" value="<?php echo htmlspecialchars ($data2[dstate])?>" required="true" /> <td><label for="dzip"> Zip </label> <input id="dzip" name="dzip" type="text" size="27" value="<?php echo htmlspecialchars ($data2[dzip])?>" required="true" /></tr>
<tr>
<td><label for="phone">Phone </label><td><input id="phone" name="phone" type="text" size="31" value="<?php echo htmlspecialchars ($data2[phone])?>" required="true" /></td><td><label for="fax">Fax </label><td><input id="fax" name="fax" type="text" size="31" value="<?php echo htmlspecialchars ($data2[fax])?>"/> </td>
</tr></table></fieldset>

<!--**********  Delivery Information for the form******************-->

<fieldset style='width:570px; text-align:left; border-width:2px;'>
<legend><h3>Delivery Information</h3></legend>
<table bgcolor="beige" border="0" width="570px">
<tr>
<td><label for="proof">Proof?</label>&nbsp <input type="checkbox" name="proof" value="<?php echo ($data2[proof])?>" />&nbsp </td><td><label for="whoproof">Proof to Whom?</label> <input id="whoproof" name="whoproof" type="text" size="44" value="<?php echo htmlspecialchars ($data2[whoproof])?>"required="true" /></td>
</tr>
<tr>
<td><label for="quote">Quote?</label>&nbsp<input type="checkbox" name="quote" value="<?php echo htmlspecialchars ($data2[quote])?>" required="true" />&nbsp </td>
<td><label for="amount">Amount: $</label> <input id="amount" name="amount" type="text" size="50" value="<?php echo htmlspecialchars ($data2[amount])?>" required="true" /></td>
</tr>
<tr>
<td><label for="delivery">Delivery Instructions</label></td><td><textarea name="delivery" rows="4" cols="50" value="<?php echo htmlspecialchars ($data2[delivery])?>" /></textarea></tr>
<tr>
<td><label for="notes">Additional Notes</label></td><td><textarea name="notes" rows="4" cols="50" value="<?php echo htmlspecialchars ($data2[notes])?>"/></textarea>
</tr>
<td align="right"><input name="submit" type="submit" id="submit" value="Submit" /></td>
<td align="left"><input name="Reset" type="reset" id="reset" value="Reset Form" /></table></fieldset>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:05:15.897

文本区域的默认值由元素内的文本节点提供，而不是值属性。

```
<textarea>Default value
Which can have new lines</textarea> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:05:54.653

`value`不是 textareas 的有效属性，您需要使用`<textarea>value</textarea>`

# c# - 为访问 mdb 文件创建 OdbcConnection 的 ConnectionString 是什么

> ID：14567220
> 
> 赞同：3
> 
> 时间：2013-01-28T17:02:50.747
> 
> 标签：c#, .net, ms-access, odbc, connection-string

我想使用 Odbc 从 c# 连接到 Access MDB 文件。

当我尝试执行

```
OdbcConnection con = new OdbcConnection(
    "Driver={Microsoft Access Driver (*.mdb)};DBQ=c:\\temp\\test.mdb;"); 
```

我得到以下异常：

```
exc {System.Data.Odbc.OdbcException (0x80131937): ERROR [IM002] [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified
   at System.Data.Odbc.OdbcConnection.HandleError(OdbcHandle hrHandle, RetCode retcode)
   at System.Data.Odbc.OdbcConnectionHandle..ctor(OdbcConnection connection, OdbcConnectionString constr, OdbcEnvironmentHandle environmentHandle)
   at System.Data.Odbc.OdbcConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionInternal.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
   at System.Data.Odbc.OdbcConnection.Open()
   : 
```

这里有什么问题？它抱怨“未找到数据源名称且未指定默认驱动程序”，但我指定了驱动程序？

我从这里得到了连接字符串[http://www.connectionstrings.com/access#net-framework-data-provider-for-odbc](http://www.connectionstrings.com/access#net-framework-data-provider-for-odbc)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T17:24:55.977

哦，我刚刚找到了我的问题的根源。我认为其他人也可能会遇到它：

我正在编写一个 .net 应用程序，当操作系统是 32 位 Windows 时，它在 32 位 .net vm 中运行，而当操作系统是 64 位 Windows 时，它在 64 位 vm 中运行。在 syswow 和 system32 中使用 2 个 odbcad32.exe（是的，两者都被命名为 odbcad32.exe，即使 system32 中的那个是 64 位的，是的，这也是正确的）我发现我只为 odbc32 位安装了 Access MdB 驱动程序。因此，当我的应用程序在 64 位 Windows 上运行时，.net 想要使用 64 位版本的 odbc 并且找不到驱动程序。

好的，所以现在我需要一个 64 位访问驱动程序，根据[此处输入链接描述](http://social.msdn.microsoft.com/Forums/en-US/netfx64bit/thread/dfbd0406-bc69-436e-998b-7fc454012f91)，该驱动程序不存在。好的，帖子很旧，所以现在可能存在一个？

当我将项目设置中的平台强制为 x86 时，它可以工作。当然，这也迫使我的应用程序在 32 位 .net vm 中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:10:41.527

使用如下示例的 Web 配置设置

```
<add      name="ODBCDataConnectionString"   connectionString="Driver=ODBCDriver;server=ODBCServer;"   providerName="System.Data.Odbc"   /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T17:16:13.933

您可以创建一个 udl 文件，创建您的连接，然后在记事本中打开该文件以查看连接字符串。这在过去帮助了我 -

[http://msdn.microsoft.com/en-us/library/e38h511e%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/e38h511e%28v=vs.71%29.aspx)

使用它，您可以像在 odbc 工具中一样创建常规连接并验证它是否有效。

希望有帮助。

# c# - 如何添加到列表 目录中的最后一个文件？

> ID：14567221
> 
> 赞同：2
> 
> 时间：2013-01-28T17:02:55.167
> 
> 标签：c#

```
if (Form1.sf != null)
{
    radarDI = new DirectoryInfo(Form1.sf);
    radarFiles = radarDI.GetFiles("*.png");
    for (int i = radarFiles.Length; i > 0; i--)
    {
        myGifListRadar.Add(radarFiles[i].Name);
    }
} 
```

雷达文件包含 224 个文件。我想添加到`myGifListRadar List<string>`硬盘上文件末尾的最后 5 个文件或任何最后数量的文件。

如果我这样做`int I = 0 ; I < test.Length; I++`会添加：

> 00001.png
> 
> 00002.png

我希望它从最后添加：

> 00224.png
> 
> 00223.png

依此类推...所以我尝试将 FOR 更改为现在的状态，但我遇到了异常：

> 指数数组的边界之外

FOR 有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T17:05:54.623

它是一个零边界索引，因此它的长度为-1，您还需要大于或等于以将计数减至零，否则您将错过数组中的第一个元素。

```
for (int i = radarFiles.Length - 1; i >= 0; i--)
{
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T17:05:49.880

尝试

```
for (int i = radarFiles.Length - 1; i >= 0; i--) 
```

数组和其他集合从零开始索引，所以你必须从长度中减去 1

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T17:07:22.967

改变这个：

```
for (int i = radarFiles.Length; i > 0; i--) 
```

对此：

```
for (int i = radarFiles.Length-1; i >= 0; i--) 
```

您从列表末尾开始。此外，您需要使用 >= 而不是仅使用 >，否则如果目录足够小，您将错过一个文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T17:09:34.200

您可以使用`Enumerable.OrderByDescending`+ `Enumerable.Take`：

```
var last5Files = Directory.EnumerateFiles(directoryPath, "*.png")
    .Select(p => new { Path = p, FileName = Path.GetFileName(p) })
    .Select(x => new { x.FileName, Number = x.FileName.TryGetInt() })
    .Where(x => x.Number.HasValue)
    .OrderByDescending(x => x.Number.Value)
    .Select(x => x.FileName)
    .Take(5);
foreach (string fn in last5Files)
    myGifListRadar.Add(fn); 
```

这是我用来`int?`从您的文件名中获取 a 的扩展方法：

```
public static class NumericExtensions
{
    public static int? TryGetInt(this string item)
    {
        int i;
        bool success = int.TryParse(item, out i);
        return success ? (int?)i : (int?)null;
    }
} 
```

（假设您只想要具有数字文件名的 png 文件）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T17:10:13.140

由于您的文件具有该格式的名称，您可以使用它：

```
var fileList = Directory.GetFiles(path)
                  .OrderByDescending(n => Path.GetFileName(n))
                  .Take(5)
                  .ToList(); 
```

# ruby-on-rails-3 - Rails：有没有一种有效的方法来获取所有列入白名单的属性的值？

> ID：14567224
> 
> 赞同：0
> 
> 时间：2013-01-28T17:03:04.927
> 
> 标签：ruby-on-rails-3, activerecord, mass-assignment

我正在尝试使用模型作为模板来创建新模型。但是，我只想使用`attr_accessible`模板模型中的属性。

这就是我现在正在做的事情。它有效，但它似乎太复杂了。

```
def copy_attrs_and_errors(other)
  self.class.attr_accessible[:default].to_a.each do |attr|
    eval("self.#{attr} = other.#{attr}") unless attr.blank?
  end
end 
```

我想说一些简单的话：

```
self.attributes = other.whitelist_attributes(:default) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:56:22.017

这有点疯狂，但你可以在模块或其他任何东西中做这样的事情：

```
def self.from_accessible_attributes(other)
  values     = other.attributes.values_at(*other.class.accessible_attributes)
  attributes = Hash[other.class.accessible_attributes.zip(values)]
  new(attributes)
end 
```

# c# - Linq to XML - 根据 if 语句设置 Xelement 值

> ID：14567229
> 
> 赞同：2
> 
> 时间：2013-01-28T17:03:18.587
> 
> 标签：c#, xml, linq, linq-to-xml

我正在使用 linq to xml 创建一个 xml。

在一个元素中，我想根据语句控制元素的值

```
<Type>Query</Type> 
```

“查询”取决于对象中的一些变量，所以我必须运行 1-2 个 if 语句。（这是正在编写的大 xml 的一部分）我知道我正在写的东西是不可能的，我正在寻找一种方法以任何可能的合法方式做到这一点

```
new XElement("Parameters",
from p in parameters.ParametersList
select
    new XElement("Parameter", 
        new XAttribute("ID", "??"),
        new XAttribute("Name", p.Name),
        new XElement("Prompt", p.Prompt),
        if (p.validvalues.count == 0)
            new XElement("Type", "None")
        else if (p.something == something)
               new XElement("Type, "List") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:19:57.300

您可以使用[三元运算符](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.80%29.aspx)(?:)：

```
new XElement("Type", (p.validvalues.Count() == 0) ? "None" : "List") 
```

如果您有复杂的条件或许多可能的值，您可以提取获取此节点值的方法：

```
new XElement("Type", GetParameterType(p)) 
```

和

```
private string GetParameterType(Parameter p)
{
    if (p.validvalues.Count() == 0)
        return "None";

    if (p.something == something)
        return "List";

    // etc
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:06:27.670

我认为没有什么能阻止您将方法插入 XElement 构造函数并添加适合您的逻辑。

```
class Program
{
    static void Main(string[] args)
    {
        var parameters = new List<MyParam> { 
            new MyParam { Name="bla", Size=1 }, 
            new MyParam { Name="lala", Size=10 }, 
        };

        var xml = new XElement("Parameters",
            from p in parameters
            select new XElement("Parameter",
                 new XAttribute("Name", p.Name),
                 ConditionalElement(p)
                )
        );
    }

    private static XElement ConditionalElement(MyParam arg)
    {
        if (arg.Size < 5)
        {
            return new XElement("Type", "Small");
        }
        else
        {
            return new XElement("Type", "Big");
        }
    }

}

class MyParam
{
    public int Size { get; set; }
    public string Name { get; set; }
} 
```

# c# - 检索完整的计算机名称

> ID：14567231
> 
> 赞同：-3
> 
> 时间：2013-01-28T17:03:32.680
> 
> 标签：c#, windows

我正在使用 C# 开发 Windows 应用程序。我有一个表单，我在其中拖动了一个文本框和一个按钮控件。我想通过单击按钮来检索文本框中的用户完整计算机名称。我为此编写了一些代码......

```
private void button1_Click(object sender, EventArgs e)            
{                
    string name = System.Environment.MachineName;                
    textBox1.Text = name[0].ToString();            
} 
```

通过单击该按钮，它只检索它开始的计算机名称的第一个字母（例如：D 代表 Donald-PC），但我想检索全名（例如：Donald-PC）。如果我对代码进行了任何更改，请有人帮助。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T17:04:47.250

只需输出全名，而不仅仅是 0 索引：

```
textBox1.Text = name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:06:32.293

您正在使用 的第一个字符`System.Environment.MachineName`。你需要这样做：

```
textBox1.Text = System.Environment.MachineName; 
```

顺便`textBox1`说一句，控件名称真的很糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T17:06:35.187

您正在使用数组的 char 索引，删除 [0] 并仅使用名称。

# asp.net - 使用 CascadingDropDown 创建填充 OnFocus 的 DropDownList

> ID：14567237
> 
> 赞同：1
> 
> 时间：2013-01-28T17:03:46.383
> 
> 标签：asp.net, ajax, visual-studio-2010

当用户在下拉列表之前单击它时，有没有办法填充下拉列表？我想也许使用 CascadingDropDown 可能会工作，但我根本无法让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:20:42.953

您是否考虑过只使用 an`UpdatePanel`并将其`DropDownList`放在上面？

然后只需执行 的`OnSelectedIndexChanged`事件`DropDownList`以使其重新加载下一个`DropDownList`。如果您不打算使用 CascadingDropDown，这是最简单的方法，它可以让您很好地了解它们是如何联系在一起的。只需注意您的`ViewState`并在不需要时将其禁用。

这是 asp.net 标记的示例：

```
<asp:DropDownList ID="yourFirstDropDownList" runat="server"
    OnSelectedIndexChanged="yourFirstDropDownList_OnSelectedIndexChanged" />
<asp:UpdatePanel ID="yourUpdatePanel" runat="server">
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="yourFirstDropDownList"
            EventName="SelectedIndexChanged">
    </Triggers>
    <ContentTemplate>
        <asp:DropDownList ID="yourSecondDropDownList" runat="server" />
    </ContentTemplate>
</asp:UpdatePanel> 
```

# php - 获取子内容

> ID：14567239
> 
> 赞同：1
> 
> 时间：2013-01-28T17:04:08.227
> 
> 标签：php, wordpress

我正在使用以下内容来获取子标题和内容。每个孩子在内容的内容编辑器中都有一个画廊和一个短代码，但我只得到画廊而不是短代码。这与短代码无关，而是与内容有关，因为我试图在图库后面的内容中添加一些段落，但它没有显示出来。

```
<?php $pages = get_pages('child_of='.$page->ID.'&sort_order=asc&number=3&sort_column=menu_order&parent='.$page->ID);
foreach($pages as $page) {
    $content = $page->post_content;
    $content = apply_filters('the_content', $content);
?>

    <div class="span4">
       <h2><a href="<?php echo get_page_link($page->ID) ?>"><?php echo $page->post_title ?></a></h2>
        <?php echo $content ?>
    </div> 
```

我认为`$content = apply_filters('the_content', $content);`基本上是剥离了部分内容。知道为什么它不显示短代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:11:27.150

这就是我解决它的方法：

```
<?php
 /*
  Template Name: home
  */
  get_header(); ?>

 <?php $counter = 1 ?>
 <div class="row-fluid"> 
 <?php
$args = array(
 'child_of' => 4,
 'parent' => 0,
 'post_type' => 'page',
 'post_status' => 'publish'
); 
 $childrens =   query_posts('showposts=3&post_parent=4&post_type=page&orderby=menu_order&order=DESC');

  foreach ( $childrens as $children ) :
 query_posts('showposts=3&post_parent='.$children->ID.'&post_type=page&orderby=menu_order&order=DESC');
if ( have_posts ) :
while ( have_posts() ) : the_post();
 ?>
    <div class="span4">
        <h2>
            <?php the_title(); ?>
        </h2>
        <?php the_content(); ?>
    </div>
  <? if ($counter % 3 == 0): ?>
 <div id="content" class="row-fluid"></div>
</div>
<div class="row-fluid">
   <?php endif; ?>
    <?php $counter++; ?>
<?php
endwhile;
 endif;
endforeach;
?>
 </div>

<?php get_footer(); ?> 
```

# c# - 将经纬度转换为谷歌地图经纬度

> ID：14567242
> 
> 赞同：2
> 
> 时间：2013-01-28T17:04:17.133
> 
> 标签：c#, google-maps, coordinates

我在从 GPRS 跟踪器获取准确读数时遇到了一些麻烦，实现了 gMaps api 中给出的坐标。

我在这里读到你应该通过分别除以 60 和 3600 来转换分钟/度，但即使尝试这个我也无法得到任何太准确的结果：

[GPS追踪器坐标转换成谷歌地图格式和精确度](https://stackoverflow.com/questions/4091530/gps-tracker-coordinate-conversion-into-google-maps-format-and-preciseness)

跟踪器发送包含以下信息的数据包；

```
5242.8157 North
00126.3539 West 
```

我翻译为;

```
latitude: 52 degrees, 42 minutes, 8157 seconds - > 52.428157
longitude: -1 degree, 26 minutes, 3539 seconds - > -1.263539 
```

但这会大大偏离我所在的位置。这里有什么我遗漏的东西，也许是一些简单的东西，有人可能知道为了更精确而做这个把戏？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T17:16:03.577

输入数据的小数部分（例如 .8157）不是秒；它是十进制分钟。所以应该是：

纬度 52 度，42.8157 分或 52.7136 度

# perl - Perforce 触发器脚本可以写入临时文件吗？

> ID：14567245
> 
> 赞同：1
> 
> 时间：2013-01-28T17:04:28.460
> 
> 标签：perl, xslt, perforce, jing

我想编写一个脚本（一个 perforce 触发器），它将在允许提交之前验证更改列表中文件的内容。但是，我的脚本使用 Xsltproc 处理 XML，然后使用 Jing 进行验证。我需要将间歇性输出保存到临时文件中 - 在为 perforce 编写更改内容触发器（服务器端）时可以这样做吗？我已阅读大量文档，但从未见过在运行触发脚本时创建临时文件的任何提及。唯一的其他解决方法是将 Xsltproc 的输出通过管道传输到 Jing（我也不知道该怎么做）。

欢迎任何有经验的 XSLT 或 Perforce 用户的建议。谢谢。

顺便说一句，我正在使用 perl - 但我认为这不会让事情变得更加困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:30:46.483

当然，您可以创建临时文件。只需确保触发器有权写入您想要放置的位置，服务器驱动器上有足够的空间，您以避免冲突的方式命名文件（有一个用于创建临时文件名的 Perl 模块），然后你清理它（IIRC，正确的模块会为你做这件事）。

但是请记住，如果您的触发器需要很长时间来处理，它将对用户造成破坏，甚至可能令人恐惧。在这种情况下，最好使用守护进程来访问提交循环之外的文件并让用户修复它，而不是一开始就尝试阻止它。（如果可以容忍坏文件，只要修复它们就行。这是你需要打的电话。）

# python - flask-wtf 字段渲染示例

> ID：14567247
> 
> 赞同：1
> 
> 时间：2013-01-28T17:04:40.877
> 
> 标签：python, html, wtforms

我将 wtforms 字段（[http://wtforms.simplecodes.com/docs/0.6/fields.html](http://wtforms.simplecodes.com/docs/0.6/fields.html)）与`<input>`标签（[http://www.w3schools.com/tags/att_input_type.asp](http://www.w3schools.com/tags/att_input_type.asp)）进行比较。对于 wtforms 中的某些字段，`<input type>`等价物很容易猜到。但是对于其他人，我真的不知道如何实施。

有没有可以尝试渲染 wtform 字段的示例网页？还是有一些 wtforms 的模板集合，所以我可以自己尝试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:13:38.573

只需查看源代码，您就可以轻松找到：

```
# ... snip ...
class SearchField(core.StringField):
    """
    Represents an ``<input type="search">``.
    """
    widget = widgets.SearchInput()

class TelField(core.StringField):
    """
    Represents an ``<input type="tel">``.
    """
    widget = widgets.TelInput()

class URLField(core.StringField):
    """
    Represents an ``<input type="url">``.
    """
    widget = widgets.URLInput()
# ... snip ... 
```

*   [html5.py](https://bitbucket.org/simplecodes/wtforms/src/c4f179614c36/wtforms/fields/html5.py?at=default)（你可能想要这个）
*   [simple.py](https://bitbucket.org/simplecodes/wtforms/src/c4f179614c36/wtforms/fields/simple.py?at=default)（或者这个）
*   [核心.py](https://bitbucket.org/simplecodes/wtforms/src/c4f179614c36/wtforms/fields/core.py?at=default)

# sql - SQL Server 2008：输入逗号分隔列表？

> ID：14567248
> 
> 赞同：0
> 
> 时间：2013-01-28T17:04:40.907
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures

我有一个返回 5 个结果的查询，这是正确的。我现在正在尝试将其重新写入存储过程。

原始查询：

```
 SELECT something  FROM myTable  where
   ORG + '-' + ORGSUB like '2342342-________' or
    ORG + '-' + ORGSUB like '5435354-________' or 
    ORG + '-' + ORGSUB like '_______-________' 
```

但我现在想以`ORG`逗号分隔列表的形式传入，所以它看起来像：

```
 SELECT ORG + '-' + ORGSUB   FROM myTable  where
   ORG + '-' + ORGSUB in('2342342-________','5435354-________' ,'_______-________') 
```

但我在这里得到 0 个结果。

我也尝试使用 Split 功能，如下所示：

```
ALTER FUNCTION [dbo].[udf_Split]
(
   @psCSString VARCHAR(max)
)
RETURNS @otTemp TABLE(sID VARCHAR(50))
AS
BEGIN
 DECLARE @sTemp VARCHAR(50)

 WHILE LEN(@psCSString) > 0
 BEGIN
  SET @sTemp = LEFT(@psCSString, ISNULL(NULLIF(CHARINDEX(',', @psCSString) - 1, -1),
                    LEN(@psCSString)))
  SET @psCSString = SUBSTRING(@psCSString,ISNULL(NULLIF(CHARINDEX(',', @psCSString), 0),
                               LEN(@psCSString)) + 1, LEN(@psCSString))
  INSERT INTO @otTemp VALUES (@sTemp)
 END

RETURN
END 
```

创建存储过程并在顶部声明所有变量

```
SELECT something
FROM myTable 
where ORG + '-' + ORGSUB  in (select * from udf_Split(@orgList) as Split) 
```

但这也给了我一个大胖子 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:09:00.047

我知道这并不能回答实际问题，但是我所见过的所有解决方案都感觉像是一种肮脏的黑客攻击，以绕过以前无法将多个值传递给过程的限制。由于在 sql-server 2008 中引入了表值参数，我看不出为什么在 SQL 中需要分隔字符串：

第一步是创建包含值的类型（我倾向于使用通用名称，以便可以重用它们）：

```
CREATE TYPE dbo.StringList AS TABLE (Value NVARCHAR(MAX)); 
```

然后创建您的程序：

```
CREATE PROCEDURE dbo.GetFromTable @OrgList dbo.StringList READONLY
AS
    SELECT  Something
    FROM    MyTable
    WHERE   Org + '-' + OrgSub IN (SELECT Value FROM @OrgList);

GO 
```

然后您可以按如下方式调用您的程序

```
DECLARE @OrgList dbo.StringList;
INSERT @OrgList VALUES 
    ('2342342', '________', 'A'),
    ('5435354', '________', 'B');

EXECUTE dbo.GetFromTable @OrgList; 
```

**[SQL小提琴](http://sqlfiddle.com/#!3/c5275/3)**

这甚至可以提供创建更合适的表的机会：

```
CREATE TYPE dbo.OrgList AS TABLE(Org VARCHAR(10), OrgSub VARCHAR(10));

CREATE PROCEDURE dbo.GetFromTable @OrgList dbo.OrgList READONLY
AS
    SELECT  Something
    FROM    MyTable
    WHERE   EXISTS
            (   SELECT  1
                FROM    @OrgList O
                WHERE   MyTable.Org = o.Org
                AND     MyTable.OrgSub = o.OrgSub
            );

GO 
```

然后执行

```
DECLARE @OrgList dbo.OrgList;
INSERT @OrgList VALUES 
    ('2342342', '________'),
    ('5435354', '________');

EXECUTE dbo.GetFromTable @OrgList; 
```

**[SQL小提琴](http://sqlfiddle.com/#!3/2869a/1)**

如果绝对需要传递逗号分隔列表，您可以使用 XML 转换将其转换为 StringList 类型，并使用相同的过程，但使用表值参数比使用分隔字符串具有更大的灵活性：

```
DECLARE @S VARCHAR(MAX) = '2342342-________,5435354-________,_______-________';

DECLARE @OrgList dbo.StringList;
INSERT @OrgList
SELECT  Y.value('.', 'NVARCHAR(MAX)')
FROM    (SELECT [X] = CAST(('<X>' + REPLACE(@S, ',' ,'</X><X>')+'</X>') AS XML)) X
        CROSS APPLY X.nodes('X') AS y (Y)

EXECUTE GetFromTable @OrgList 
```

**[SQL小提琴](http://sqlfiddle.com/#!3/ebdd5/5)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:11:58.497

使用`charindex()`或`like`：

```
where ','+'2342342-________','5435354-________' ,'_______-________'+',' like '%,' + ORG + '-' + ORGSUB + ',%' 
```

如果参数中有空格，则更像是：

```
where ','+replace(@orglist, ' ', '')+',' like '%,'+ORG+'-'+ORGSUB+',%' 
```

# ios - ios6应用程序中的标签栏导航错误

> ID：14567254
> 
> 赞同：1
> 
> 时间：2013-01-28T17:04:54.243
> 
> 标签：ios

一个错误正在影响我的 ios6 iPhone 应用程序。

使用情节提要，“顶部”视图控制器是一个`tabbar`控制器，并且几个选项卡由导航控制器控制。

当应用程序首次加载时，您位于其中一个导航控制器的顶层。您可以向右导航，但向左“倒带”不会显示正确的幻灯片动画；相反，它看起来没有滑动动画。这会影响该导航控制器上的所有展开转场。

一旦您选择另一个选项卡并再次返回，动画问题就会自行解决。如果您从后台恢复应用程序，它也可以正常工作。问题仅在应用程序的首次启动时出现。

为什么会这样以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T01:05:16.713

从我从您的问题中可以看出，您正在尝试使用 unwind segues 向后浏览嵌入在导航控制器中的控制器。如果这就是你正在做的，那就错了。你应该删除那些展开的segues。您不需要添加任何 segues 或代码来执行此操作 - 导航控制器会自动处理此操作。

**编辑后：**

在查看您的项目后，问题出在自定义标签栏控制器上。您没有在 viewDidAppear 方法中调用 [super viewDidAppearAnimated:animated]，这导致了这种奇怪的行为。切换选项卡后它消失的原因是因为选项卡栏控制器的 viewDidAppear 不再被调用 - 仅在应用程序第一次启动时。

# ruby - 如何为 HTTPI 分配端口？

> ID：14567256
> 
> 赞同：0
> 
> 时间：2013-01-28T17:04:59.823
> 
> 标签：ruby, http, httpi

我正在使用[httpi](http://httpirb.com/)库。

通常在 http 库中我们可以为 http 连接设置一个端口，但在 httpi 中我不能。

如何为 HTTPI 连接分配端口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:07:01.573

通常你会在 URL 中包含端口号，如下所示：

```
request = HTTPI::Request.new("http://example.com:1234/") 
```

# c# - 将 SQL Server 异常传递给 .net

> ID：14567268
> 
> 赞同：2
> 
> 时间：2013-01-28T17:05:43.140
> 
> 标签：c#, sql, sql-server, exception-handling

存储过程：

```
Procedure GetLocalConfig
(
    @ConfigId int
)
AS
SET NOCOUNT ON; 
BEGIN TRY
BEGIN TRANSACTION
SELECT 1/0
COMMIT TRANSACTION;
END TRY
BEGIN CATCH
    SELECT 
    ERROR_NUMBER() AS ErrorNumber
    ,ERROR_SEVERITY() AS ErrorSeverity
    ,ERROR_STATE() AS ErrorState
    ,ERROR_PROCEDURE() AS ErrorProcedure
    ,ERROR_LINE() AS ErrorLine
    ,ERROR_MESSAGE() AS ErrorMessage;  

     IF @@TRANCOUNT > 0
        ROLLBACK TRANSACTION;
        RETURN 
END CATCH 
```

.Net 代码调用存储过程：

```
try
{
return DatabaseFactory.CreateDatabase(ConnectionStringConfigName)
       .ExecuteSprocAccessor(DbCommands.GetLocalConfig, new LocalConfigDtoMapper(), configId)
       .Single();

}
catch (Exception ex)
{
   // Exception : Sequence contains no elements???
} 
```

如果我从 SSMS 执行这个 SP，我会得到实际的异常：

```
ErrorNumber ErrorSeverity ErrorState  ErrorProcedure ErrorLine   ErrorMessage
8134        16            1           GetLocalConfig 54           Divide by zero error encountered. 
```

我想在.Net 的 try catch 块中看到这个异常，但是我不断得到 Sequence 不包含任何元素。

经过一些研究，我发现我可以在我的存储过程中出现 RAISEERROR Try catch 块：

```
DECLARE @errnum nchar(5), @errmsg nvarchar(2048);
SELECT
   @errnum = RIGHT('00000' + ERROR_NUMBER(), 5),
   @errmsg = @errnum + ' ' + ERROR_MESSAGE();
RAISERROR (@errmsg, 16, 1); 
```

现在，当我使用 SSMS 运行 SP 时，我得到：

> *消息 50000，级别 16，状态 1，过程 GetLocalConfig，第 70 行
> 8134 除以零错误。*

但是 .Net 仍然给了我同样的异常，在这种情况下如何让异常传递给 .Net？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:19:11.440

我假设您从`GetLocalConfig`SP 返回的错误行没有使用 映射`LocalConfigDtoMapper`，它需要不同的架构。

因此，您抑制了实际的异常，并返回了带有错误模式的行。这导致将零长度序列或空可枚举返回给调用者。当`Single()`检查断言您只有一行时，它会引发适当的异常，因为您没有。

* * *

如果您想回滚错误，请查看这些重复项

[截断字符串数据时如何回滚TSQL中的事务？](https://stackoverflow.com/questions/639238/how-to-rollback-a-transaction-in-tsql-when-string-data-is-truncated)

[SQL Server 2008 事务，需要回滚吗？](https://stackoverflow.com/questions/3997271/sql-server-2008-transaction-rollback-required)

[SQL Server - 事务回滚错误？](https://stackoverflow.com/questions/1749719/sql-server-transactions-roll-back-on-error)

本质

[`RAISERROR`](http://msdn.microsoft.com/en-us/library/ms178592.aspx)您可以在您的`CATCH`块中重新提出错误。[`ERROR_`](http://msdn.microsoft.com/en-us/library/ms190358.aspx)您可以使用... 函数获取原始“异常”详细信息

或者

[`SET XACT_ABORT ON`](http://msdn.microsoft.com/en-us/library/ms188792.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:21:47.460

SP 中的 TRY CATCH 块抑制了实际的错误消息，删除了我在应用程序中得到实际异常的消息。

# javascript - 如何创建脏标志功能

> ID：14567269
> 
> 赞同：3
> 
> 时间：2013-01-28T17:05:44.740
> 
> 标签：javascript, knockout.js

我想使用淘汰赛创建脏标志功能。我只想在某些事情发生变化时启用保存按钮。我的视图和我的视图模型与淘汰赛 js 教程加载和保存数据中的示例完全相同。[链接到教程](http://learn.knockoutjs.com/#/?tutorial=loadingsaving)

我正在关注 Ryan[在这里发布的小提琴示例](http://jsfiddle.net/rniemeyer/dtpfv/)

我不明白在哪里声明他在视图模型中声明的代码。

```
 this.dirtyFlag = new ko.dirtyFlag(this); 
```

如果我以淘汰教程为例，我在上面发布的链接，我尝试如下

```
function Task(data) {
this.title = ko.observable(data.title);
this.isDone = ko.observable(data.isDone);
this.dirtyFlag = new ko.dirtyFlag(this); 
```

}

如下所示绑定我的视图

```
<button data-bind="click: saveOperation , enable: isDirty" >Save</button> 
```

它给了我错误，因为无法解析绑定 isDirty 未定义。

我不确定如何继续执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T20:55:34.167

用于淘汰的脏标志已经在小型库中实现`koLite`- [https://github.com/CodeSeven/kolite](https://github.com/CodeSeven/kolite)。

或者这里是一个创建它的例子：[http ://www.knockmeout.net/2011/05/creating-smart-dirty-flag-in-knockoutjs.html](http://www.knockmeout.net/2011/05/creating-smart-dirty-flag-in-knockoutjs.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T19:01:52.353

您的代码有几个问题：

1.  您正在定义`dirtyFlag`您的`Task`功能。但是您在绑定到 viewModel 实例的视图上检查它。

2.  您必须在加载数据**后**定义脏标志，否则您必须调用`dirtyFlag().reset()`.

3.  `isDirty`是一个计算出来的。你必须用括号来调用它。

视图模型如下所示：

```
function TaskListViewModel() {
    // Data

    function Task(data) {
    this.title = ko.observable(data.title);
    this.isDone = ko.observable(data.isDone);

}

    var self = this;
    self.tasks = ko.observableArray([]);
    self.newTaskText = ko.observable();
    self.incompleteTasks = ko.computed(function() {
        return ko.utils.arrayFilter(self.tasks(), function(task) { return !task.isDone() && !task._destroy });
    });

    this.dirtyFlag = new ko.DirtyFlag(this.isDone);

    // Operations
    self.addTask = function() {
        self.tasks.push(new Task({ title: this.newTaskText() }));
        self.newTaskText("");
    };
    self.removeTask = function(task) { self.tasks.destroy(task) };
    self.save = function() {
        $.ajax("/echo/json/", {
            data: {
                json: ko.toJSON({
                    tasks: this.tasks
                })
            },
            type: "POST",
            dataType: 'json',
            success: function(result) {
                self.dirtyFlag().reset();
                alert(ko.toJSON(result))
            }
        });
    };

     //Load initial state from server, convert it to Task instances, then populate self.tasks
    $.ajax("/echo/json/", {
        data: {
            json: ko.toJSON(fakeData)
        },
        type: "POST",
        dataType: 'json',
        success: function(data) {
            var mappedTasks = $.map(data, function(item) {
                return new Task(item);
            });

            self.tasks(mappedTasks);

            self.dirtyFlag().reset();
        }
    });                               
} 
```

取消按钮的绑定：

```
<button data-bind="enable: dirtyFlag().isDirty()">Cancel</button> 
```

工作小提琴（你的一个叉子）可以在以下位置找到：http: [//jsfiddle.net/delixfe/ENZsG/6/](http://jsfiddle.net/delixfe/ENZsG/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T20:22:38.950

还有 ko.editables 插件：[https ://github.com/romanych/ko.editables](https://github.com/romanych/ko.editables)

```
var user = {
    FirstName: ko.observable('Some'),
    LastName: ko.observable('Person'),
    Address: {
        Country: ko.observable('USA'),
        City: ko.observable('Washington')
    }
};
ko.editable(user);

user.beginEdit();
user.FirstName('MyName');
user.hasChanges();          // returns `true`
user.commit();
user.hasChanges();          // returns `false`
user.Address.Country('Ukraine');
user.hasChanges();          // returns `true`
user.rollback();
user.Address.Country();     // returns 'USA' 
```

# c - 字符串比较不起作用C

> ID：14567276
> 
> 赞同：0
> 
> 时间：2013-01-28T17:06:02.567
> 
> 标签：c, string, string-comparison

我今天在 c 编程中遇到了一个奇怪的问题。我编写了一个用于服务器客户端通信的程序并在其上应用了字符串比较函数，但是如果我将字符串与 buf 中的内容进行比较，该函数将不起作用。我还检查了 buf 中的数据是否与我在几次迭代后输入的数据不同，但结果是否定的，并且数据与我输入的数据相同。那为什么不`strcmp`工作。这是代码：

```
char buf[1024];
while(1)
{
    int readbytes=read(communFd,buf,1024);

    write(STDOUT_FILENO,buf,readbytes);

   if(!strcmp(buf,"exitChat"))
    {
        printf("Chat terminating...\n");
        break;
    }
} 
```

问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T17:08:52.077

`read()`不会终止`strcmp()`依赖的缓冲区，您必须明确执行此操作：

```
int readbytes=read(communFd,buf,1023); /* Read one less for null terminator. */
if (readBytes != -1)
{
    buf[readBytes] = 0;
    if(!strcmp(buf,"exitChat"))
    {
    }
} 
```

或者，正如其他人所提到的，使用不依赖于空终止符存在的不同函数。

请注意，[`read()`](http://linux.die.net/man/2/read)它不能保证读取请求的字节数，如果读取的字节数较少，则不会将其视为错误。从链接的参考页面：

> **成功时，返回读取的字节数**（零表示文件结束），文件位置提前该数字。**如果此数字小于请求的字节数，则不是错误；**这可能会发生，例如因为现在实际可用的字节数较少（可能是因为我们接近文件结尾，或者因为我们正在从管道或终端读取），或者因为 read() 被中断信号。出错时，返回 -1，并适当设置 errno。在这种情况下，未指定文件位置（如果有）是否更改。

为确保收到完整的消息，您需要将数据添加到正在发送的文本中，以便接收者知道何时收到完整的消息。这可能是：

*   在文本之前加上它的长度。
*   使用标记值来指示消息的结束，例如一个`\n`字符来指示结束。代码的结构将更改为`read()`在循环中调用，直到`\n`找到将读取的每个字节附加到数组中为止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T17:09:30.713

`strcmp`将比较两个以 null 结尾的 char 数组。 `read`不会以空值终止您从文件描述符中读取的缓冲区。除非您知道文件中应该有`'\0'`字节，否则您可以尝试使用`strncmp(buf,"exitChat", sizeof("exitChat")-1)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T17:09:51.813

既然你有`readbytes`，只比较那么多字节：

```
if(!strncmp(buf,"exitChat",readbytes)) 
```

# php - Excel html表格导出

> ID：14567277
> 
> 赞同：0
> 
> 时间：2013-01-28T17:06:10.753
> 
> 标签：php, html, excel, header, html-table

所以我有这个代码：

```
$output = '
<table class="sticky-enabled">
 <thead><tr><th>Text0</th><th>Text1</th><th>Text2</th> </tr></thead>
<tbody id="">
 <tr class="odd"><td>7</td><td>texttt</td><td>texttt</td> </tr>
</table>';

    header("Content-type: application/vnd.ms-excel;");
    header("Cache-Control: no-store, no-cache");
    header("Content-Disposition: attachment; filename=file.xls");
    print chr(255) . chr(254) . mb_convert_encoding($output, 'UTF-16LE', 'UTF-8');
    exit; 
```

这个东西会下载一个带有表格的Excel文件。

但是有两个问题：

1.  当我用 Excel 打开它时，它会显示您尝试打开的文件格式与扩展错误不同
2.  当我尝试保存它时，默认文件扩展名是 .htm 而不是 xls

有没有办法操纵标题等以解决这两个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:08:55.527

```
header('Content-type : text/csv'); 
```

并将其打印为逗号分隔值文件。您不能只将 HTML 表格打印到 .xls 或 .xlsx

# extjs4 - extjs 网格在列调整大小时消失

> ID：14567279
> 
> 赞同：1
> 
> 时间：2013-01-28T17:06:11.817
> 
> 标签：extjs4

我有一个 ext.js 网格，当用户调整列大小时，有时所有列都会消失。我尝试设置网格的宽度，但似乎没有什么不同。这是代码：

```
 Ext.create('Ext.grid.Panel', {
        id: 'ViolList_grid',
        title: config.title,
        store: Ext.data.StoreManager.lookup('BailCardStore'),
        selModel: sm,
        maxHeight: 390,
        columns: [
            { header: 'Violation', dataIndex: 'lawCd' },
            { header: 'Description', dataIndex: 'lawCdDesc', flex: 1, sortable: false,
    renderer: formatLineWrap },
            { header: 'Amount Due', dataIndex: 'beforeAmt', renderer: 
       Ext.util.Format.usMoney }
        ],
        frame: true,
        autoscroll: false,
        renderTo: Ext.get(config.renderTo)

    }); 
```

任何帮助将不胜感激。我是 ext.js 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:44:30.803

尝试将 enableDragDrop : true 添加到 Ext.grid.Panel。

# foreach - 为什么每个循环都没有被输入？

> ID：14567284
> 
> 赞同：1
> 
> 时间：2013-01-28T17:06:23.870
> 
> 标签：foreach, action, listener

对于执行完全相同的操作的相同代码中的每个循环，我都有相似之处，但由于某种原因，我的程序从未进入这个循环。

有什么想法吗？

```
JButton undo = new JButton(" Undo ");
    undo.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {

            indices = list.getSelectedIndices();
            for(int x: indices){
                                      // do stuff
                           }
                       }

        }
    }); 
```

# php - 包含 javascript 时禁止出现错误 403

> ID：14567286
> 
> 赞同：1
> 
> 时间：2013-01-28T17:06:29.100
> 
> 标签：php, javascript, ajax

我有几段代码应该从另一个网站获取表单。标头中的 php 清理 URL 中的 GET 字符串。基本上我有一个页面：order.html，如果我像这样粘贴整个 javascript 函数，它就可以工作：

```
<?php  if (isset($_GET['url'])) {
            echo file_get_contents("http://".sanitizeString($_GET['url']));
        }
function sanitizeString($var) {
    $var = strip_tags($var);
    $var = htmlentities($var);
    return stripslashes($var);
} ?>

<html>
<body>
<p>html text still displays</p>
<script>
document.write("<div id='info'></div>");
nocache = "&nocache=" + Math.random() * 1000000
request = new ajaxRequest()
request.open("GET", "<?php echo basename($_SERVER['SCRIPT_FILENAME']); ?>?url=platform.leedhub.com/merchants/form.php?merchant_id=<?php echo $_GET['merchantid']; ?>&margin=<?php echo $_GET['affiliateid'] ?>&padding=<?php echo $_GET['URL'] ?>" + nocache, true);
request.onreadystatechange = function()
{
    if (this.readyState == 4)
    {
        if (this.status == 200)
        {
            if (this.responseText != null)
            {
                document.getElementById('info').innerHTML =
                this.responseText
            }
            else alert("Ajax error: No data received")
        }
        else alert( "Ajax error: " + this.statusText)
    }
}
request.send(null)
    function ajaxRequest()
    {
        try
        {
            var request = new XMLHttpRequest()
        }
        catch(e1)
        {
            try
            {
                request = new ActiveXObject("Msxml2.XMLHTTP")
            }
            catch(e2)
            {
                try
                {
                    request = new ActiveXObject("Microsoft.XMLHTTP")
                }
                catch(e3)
                {
                    request = false
                }
            }
        }
        return request
    }
</script>
</body>
</html> 
```

**但是，如果我使用编写的 javascript 并从外部 url 包含它，它将无法工作。**

```
<?php  if (isset($_GET['url'])) {
echo file_get_contents("http://".sanitizeString($_GET['url']));
}
function sanitizeString($var) {
$var = strip_tags($var);
$var = htmlentities($var);
return stripslashes($var);
} ?>
<p>html text still displays</p>
<html>
<body>
<script src="urlget.js"></script>
</body>
</html> 
```

我收到 403 禁止错误。它从 request.send(null) 告诉我。

**禁止访问 您无权访问请求的对象。它要么是读保护的，要么是服务器不可读的。**

你知道我该如何解决这个问题吗？我需要将脚本作为外部文件，以便可以将其包含在多个网站上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:09:56.173

我认为这是一个文件系统权限问题。您必须确保 Web 服务器对该`urlget.js`文件具有读取权限。您必须找出哪个用户正在运行 Web 服务器的工作线程，并授予该用户对`urlget.js`文件的读取权限。

# python - Python参数中的等号

> ID：14567289
> 
> 赞同：13
> 
> 时间：2013-01-28T17:06:34.433
> 
> 标签：python, syntax, python-2.7, arguments

我希望能够以下列方式从 shell 命令行启动 python 脚本：

```
python script_name -temp=value1 -press=value2 
```

我是这样写的：

```
#!/usr/bin/python

import sys
import argparse
parser = argparse.ArgumentParser()
parser.add_argument("temp", help="specify the temperature [K]", type=float)
parser.add_argument("press", help="specify the pressure [Pa]", type=float)

args = parser.parse_args()
temp = args.temp
press = args.press
print temp
print press 
```

输入可以是：

```
python script_name value1 value2 
```

如何能够以 -arg=value 的方式输入值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T17:08:51.167

利用`parser.add_argument("--temp", ...)`

argparser 手册中有很好的例子：

[http://docs.python.org/2.7/library/argparse.html](http://docs.python.org/2.7/library/argparse.html)

**编辑：**

对于`-`仅以模式开头的参数`-argument VALUE`有效。这也适用于以 开头的参数`--`，但在这里您也可以使用模式`--argument=VALUE`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-21T18:38:16.830

当配置为接受“-argument VALUE”形式的参数时，argparse 也会自动接受“-argument=VALUE”形式的参数

# api - 在 Twitter Streaming API 中过滤数据

> ID：14567290
> 
> 赞同：3
> 
> 时间：2013-01-28T17:06:35.503
> 
> 标签：api, twitter, filter

我目前正在试验 Twitter Streaming API。一切正常，但 API 向我发送了大量数据，而我并不需要这些数据。是否有可能过滤 API 发送给我的数据？

我正在使用以下流：[https ://stream.twitter.com/1.1/statuses/filter.json](https://stream.twitter.com/1.1/statuses/filter.json)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T18:09:56.067

看一下api的过滤流：

> [https://dev.twitter.com/docs/api/1.1/post/statuses/filter](https://dev.twitter.com/docs/api/1.1/post/statuses/filter)

您可以输入一组关键字作为过滤器来跟踪 twitter，根据当前的限制，您最多可以跟踪 400 个关键字。

检索推文后，您必须再次进行手动过滤以删除嘈杂的数据。

因此，如果您可以通过一组关键字指定您要查找的内容，您将实现您想要的；但是您的数据中总会有噪音，因为几乎不可能通过简单的关键字过滤来精确定义 smtg。

例如，假设您想要跟踪与名为 XYZ 的品牌相关的所有推文。要获取有关品牌的推文，`XYZ`您可能有一个仅包含“XYZ”的单词关键字集。API 会将所有包含的推文提供`XYZ`给您，但假设“XYZ”在某种语言中具有含义，并且说该语言的人会发布关于该词的推文，您也会收到。还假设有一个名为 XYZ 的城市，人们会发送登记信息。因此，此时您需要通过语言检测或上下文信息检索过滤掉与您的主题无关的推文。但关键是指定您要涵盖的主题的关键字集。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T17:22:55.033

对于“有没有办法（除了我自己手动搜索）来检测推文对应于我在过滤器中指定的三个关键字中的哪一个？”的问题的答案是“**否”？**我们必须手动完成..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-28T17:11:46.523

看看[backtypestorm 项目](http://storm-project.net/documentation.html)。有使用 twitter4j 过滤 api 的示例。

# ios - 如何连接两个视图控制器之间的动作？

> ID：14567302
> 
> 赞同：-1
> 
> 时间：2013-01-28T17:07:34.683
> 
> 标签：ios

我的故事板中有两个视图控制器。

在第一个视图控制器中，有一个按钮-A，它有一个动作-A。当我在第一个视图控制器中按下按钮 A 时，它会在第二个视图控制器中显示 A 的图像。

我在 viewcontroller.h 文件中声明 action-A 并在 viewcontroller.m 文件中实现 actionA。然后我在第一个视图控制器的 First Responder 上连接 action-A 和 button-A。

当我测试这个应用程序时，我单击按钮-A，但它没有进入操作-A。

我在哪里犯了错误？我刚开始学习iOS，我不是专业人士。请帮帮我我该怎么办？

在 viewcontroller.h

```
@interface ViewController : UIViewController
{
 IBOutlet UIPageControl *pagecontrol;
 IBOutlet UIImageView *imageview1;
 IBOutlet UIImageView *imageview2;

 UIImageView *tempimageview, *bgimageview;
}

@property (nonatomic,retain) UIPageControl *pagecontrol;
@property (nonatomic,retain) UIImageView *imageview1;
@property (nonatomic,retain) UIImageView *imageview2;

- (IBAction) ButtonA_Click:(UIButton *)sender; 
```

在 viewcontroller.m 中

```
@implementation ViewController

@synthesize imageview1;
@synthesize imageview2;
@synthesize pagecontrol;

- (IBAction) ButtonA_Click:(UIButton *)sender;
{
 [imageview1 setImage:[UIImage imageNamed:@"MyImage.jpg"]];
 tempimageview = imageview2;
 [imageview1 setHidden:NO];
 [imageview2 setHidden:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:09:02.573

据我了解，您希望有两个由其视图控制器控制的单独视图。因此，您不希望每个都有两个 ImageView，而只需要一个。

请记住，您将拥有两个单独的对象，即视图控制器。您的代码看起来更多，您希望只有一个处理两种视图。那是行不通的。

为了完成这项工作，第一个视图控制器必须告诉第二个视图控制器它应该使用哪个图像。这要么通过

*   使用从第一个 vc 发送到第二个 vc 的通知。请参阅[NSNotificationCenter](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003701)了解如何使用`addObserver...`和`postNotification`

*   或在第一个 vc 中拥有第二个 vc 的属性，您将在创建视图期间设置该属性。最后，您将需要某种方式，两个视图控制器可以相互通信。

另外，请不要将网点声明为私有；从括号中删除它们并写下：

```
@interface ViewController : UIViewController
{
    UIImageView *tempimageview, *bgimageview;
}

@property (nonatomic,retain) IBOutlet UIPageControl *pagecontrol;
@property (nonatomic,retain) IBOutlet UIImageView *imageview1;
@property (nonatomic,retain) IBOutlet UIImageView *imageview2; 
```

# asp.net - 标签绑定麻烦

> ID：14567303
> 
> 赞同：0
> 
> 时间：2013-01-28T17:07:35.213
> 
> 标签：asp.net, data-binding, label

所以我试图使用标签来显示我存储在数据库表中的记录。此表中只有一条记录。

//在页面顶部声明类

```
 protected Invoice invoice_Info;

   myDataBase db = new myDataBase();

   invoice_Info =
            (from invoiceInfo in db.Invoice_Infos
             select invoiceInfo).FirstOrDefault();

                labelBindforInvoiceDetails.DataBind(); 
```

然后在我的 aspx 页面中，我正在使用：

```
<span>                             
 <asp:Label id="labelBindforInvoiceDetails" runat="server" Text="<%# Bind('invoice_Info') %>"/>                                  
 </span> 
```

但是代码给我一个“绑定”错误数据绑定方法，例如 Eval()、XPath() 和 Bind()，只能在数据绑定控件的上下文中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:16:24.343

那是对的。标签不是数据绑定控件。将标签放在Repeater（这是一个数据绑定控件）中。然后可以绑定里面的控件（即你的标签）。

或者

取出绑定并在后面的代码中执行此操作

```
 labelBindforInvoiceDetails.Text = invoice_Info.ToString() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:10:20.670

您需要对 Header 进行数据绑定，然后查看它是否有效。

```
Page.DataBind() 
```

检查此以获取另一个解决方案[http://www.mikesdotnetting.com/Article/64/Bind-Data-From-a-SqlDataSource-to-a-Label](http://www.mikesdotnetting.com/Article/64/Bind-Data-From-a-SqlDataSource-to-a-Label)

# php - 关于重构自定义路由场景的建议（锂框架）

> ID：14567304
> 
> 赞同：2
> 
> 时间：2013-01-28T17:07:37.873
> 
> 标签：php, refactoring, url-routing, lithium

上一个问题的延续：[自定义锂路由方案](https://stackoverflow.com/questions/8717119/custom-lithium-routing-scenario)

***注意：这是特定于[锂框架的](http://lithify.me/)***

**问题**

我继承了一个 URL 方案，它实际上没有任何约定来区分页面、项目和类别。所以，我有一个非常通用的路由器，它传递给一个包罗万象的控制器。

这个包罗万象的控制器 (PagesController) 使用 url 作为键从数据库中检索页面类型。然后 PagesController 运行方法并根据页面类型选择模板。我将这些信息无限期地存储在 Memcached 中，因此查找速度非常快。

然而，随着越来越多的页面类型开始发挥作用，我可以看到这个控制器变得过于臃肿和不灵活。理想情况下，我想将不同的页面类型分解为它们自己的控制器。

**解决方案？**

是否有可能有一个路由方案来检查数据库以确定正确的控制器？

我的第一个想法是在and中继承`lithium\net\http\Router`和使用自定义逻辑。`Router::connect()``Router::_parseController()`

如果可以在 bootstrap\routes.php 中查询数据库并`lithium\net\http\Route`根据结果创建一个新对象，那就太好了。然后，只需将其传递给`Router::connect()`. 这似乎是一个可怕的黑客攻击。

无论哪种方式，`Router::connect()`它的设计并不意味着是*动态*的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:44:38.320

很难非常具体，没有看到更多不同页面类型的示例和其他示例 URL（我确实看过上一个问题，但我觉得这并没有给出全貌），但与上一个问题一样，听起来答案将再次是使用处理程序的自定义路由。

```
Router::connect('/{:pageType}/{:pageKey}', ['pageKey' => null], function($req) {
    $types = ['list', 'of', 'page', 'types'];
    $controller = 'pages';
    $action = 'view';

    if (in_array($req->pageType, $types)) {
        // It's a proper type, do a database lookup and set
        // `$controller` accordingly

        // Here I'm assuming category vs. item view for the action:
        $action = $req->pageKey ? 'view' : 'index';
    } elseif (!$req->pageKey) {
        // It's a `/custom` URL, figure out what to do with it
    }

    // This lets you return custom, arbitrary parameters that Lithium
    // will use for dispatch
    return compact('controller', 'action') + $req->params;
}); 
```

如您所见，使用处理程序，您几乎可以做任何您想做的事情。解析参数，运行你的数据库调用，并传回一组完全任意的路由参数供 Lithium 调度。

如果您的规则开始变得复杂，您可能要添加到上面的唯一其他内容是一个单独的类，它可以管理页面类型/自定义页面和路由参数之间的配对。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T17:17:03.147

您可以构建一个像一堆过滤器一样工作的路由器。

您从列表的顶部开始并询问每个过滤器是否与给定的 URL 匹配。如果不匹配，它将继续到下一个过滤器等。一直到堆栈。

堆栈顶部的过滤器具有更高的优先级。优先级可能是因为匹配规则或仅仅是性能。IE。数据库查找速度很慢，因此请添加一个预过滤器，以尽快拒绝不匹配的 URL。

您可以构建一个非常通用的路由器类，您可以在其中添加过滤器。路由器只是（堆栈）过滤器的容器，具有使用给定输入数据集开始运行的方法。

```
class Router {
    public function addFilter(Filter $filter) {}
    public function run($input) {}  // returns a route
}

interface Filter {
    public function findRoute($input) {} // returns false or a route
} 
```

这允许非常模块化的结构。您可以在加载模块时动态添加过滤器。

一个示例过滤器可能是：

```
class NewsFilter implements Filter {
    public function findRoute($input) {
        if (preg_match(":^/news/item/([0-9]+)$:", $input["url"], $matches)) {
            $item = $this->news->findItem($matches[1]);
            if (false === $item) {
                return false;
            } else {
                return new NewsRoute($item);
            }
        }
        return false;
    }
}

$router = new Router();
$newsfilter = new NewsFilter();
$router->addFilter($newsfilter);
...
$router->run($input); 
```

# spring - Spring Declaration Transaction - 获取 ProxyObject 时出现 ClassCastException

> ID：14567312
> 
> 赞同：0
> 
> 时间：2013-01-28T17:07:58.373
> 
> 标签：spring, transactions, declaration, classcastexception

我正在实施 Spring 旧的声明性 TX 技术

这是我的目标 DAO 对象：

必要的进口..

```
public class UserDAOImpl extends JdbcDaoSupport {   
public void add(int id, String name, Float salary){
    System.out.println("add");
    String SQL = "insert into User_Details (id, name, salary) values (?, ?, ?)";
    getJdbcTemplate().update(SQL, id, name, salary);
    getJdbcTemplate().update(SQL, id, name, salary);
    getJdbcTemplate().update(SQL, id, name, salary);
    throw new java.lang.RuntimeException("Exception occurs :)");
} 
```

}

应用程序上下文.xml：

```
<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource" />
</bean>

<bean id="transactionInterceptor" class="org.springframework.transaction.interceptor.TransactionInterceptor">
    <property name="transactionManager" ref="transactionManager" />
    <property name="transactionAttributes">
        <props>
            <prop key="add">PROPAGATION_REQUIRED</prop>
        </props>
    </property>
</bean>

<bean id="userDetailProxy" class="org.springframework.aop.framework.ProxyFactoryBean">
    <property name="target" ref="userDetailDAOImpl" />
    <property name="interceptorNames">
        <list>
            <value>transactionInterceptor</value>
        </list>
    </property>
</bean>
<bean id="userDetailDAOImpl" class="com.gagan.dao.UserDAOImpl">
  <property name="dataSource"  ref="dataSource" /> 
```

主类：

进口..

```
public class SpringTxTestCase {

public static void main(String[] args) {
    ApplicationContext context = new ClassPathXmlApplicationContext("applicationContext.xml");

    UserDAOImpl ud=(UserDAOImpl)context.getBean("userDetailProxy");
    ud.add(101,"Rahul", 1233.6f);
} 
```

}

当我执行我的应用程序时，我收到了这个错误：

线程“主”java.lang.ClassCastException 中的异常：$Proxy0 无法在 SpringTxTestCase.main 中转换为 com.gagan.dao.UserDAOImpl（SpringTxTestCase.java:14）

我已经在 applicationContext.xml 中正确配置了指向我的 com.gagan.dao.UserDAOImpl 的 org.springframework.aop.framework.ProxyFactoryBean 但我很困惑为什么会出现 ClassCastException 错误。

提前致谢， 加根

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:15:50.137

使用 Spring 代理您的 DAO impl 类不会产生 impl 类的实例。它产生的东西实现了与该类相同的接口。因此，您永远不能将其转换为 impl 类，只能转换为接口。这是因为 Spring 在底层使用[JDK 动态代理](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html)（默认情况下）。由于您实际上没有 DAO 接口，因此您的代理对您来说几乎毫无用处。给DAO添加一个接口，通过接口引用。

**更新：**哦，我还应该注意，DAO 几乎从来都不是交易边界的正确位置。它们属于您的“服务”层，除了少数罕见的情况，因为事务反映了一个业务工作单元，而不是一个持久性工作单元。

# lambda-calculus - lambda 演算中的 Beta 减少：评估顺序重要吗？

> ID：14567313
> 
> 赞同：3
> 
> 时间：2013-01-28T17:08:09.107
> 
> 标签：lambda-calculus

给定以下 lambda 表达式，其中`\`类似于`lambda`：

```
(\kf.f(\c.co)km)(\x.dox)(\le.le) 
```

`(\c.co)k`如果我转换成是错的`ko`吗？我这样做了，显然，这是错误的。正确的方法是首先评估外部函数，这意味着`(\f.f(\c.co)(\x.dox)m)(\le.le)`将是所需的解决方案。

这是真的吗，因为我在我们的讲义中找不到任何可以表明这一点的规则？如果是，为什么我不能先评估内部功能？我已经这样做了，但是我的解决方案是正确的。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:18:03.067

我问了我的TA，他说应用程序是左关联的，意思是

```
(\kf.f(\c.co)km)(\x.dox)(\le.le) 
```

相当于

```
( [\kf.( [ f(\c.co) ]k )m ][\x.dox] )[ \le.le ] 
```

这就解释了为什么`k`不能应用于`(\c.co)`.:/

括号/括号仅用于使其更具可读性。

问候。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:16:36.517

因此，（无类型的）lambda 演算中的 beta-reduction 就是我们所说的*融合*重写规则。这意味着如果您可以`A`使用`B`beta 缩减重写，也`A`可以`C`使用 beta-reduction 重写，那么您可以找到一些`D`这样的`B`重写`D` **和** `C`重写`D`- 实际上会有一些共同的后代。用于 lambda 演算的定理通常称为[Church-Rosser 定理](http://en.wikipedia.org/wiki/Church%E2%80%93Rosser_theorem)。整体属性有时称为菱形属性，因为该图类似于菱形（两条路径分支出来，但最终又重新组合在一起）。这也意味着无论您如何选择应用 beta 缩减，“终止”lambda 表达式的最终结果都是相同的。

但是，并非所有 lambda 项都有一个最终结果。这意味着无类型演算不是我们所说的*规范化*。有很多 lambda 项会在 beta 归约下永远扩展（永远不会达到不可归约或*正常*形式）。在这些情况下，有一些系统来安排你的重写是很有用的，因为它可以确保对两个相同的程序进行相同的程序评估。

当然，您需要确保遵守 lambda 的绑定规则，因此不要尝试将术语应用于错误的 lambda 变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-11T16:45:18.837

这显然是在问题得到满意回答之后的方式。但是，我不得不对 lambda 演算中的“求值顺序”有些挣扎，而这个更详尽的答案主要是为了后代，以防其他人有同样的疑问。@danyel 的回答非常有帮助，我将以此为基础。

正如 OP 正确指出的那样，没有关于评估顺序的明确规则。然而，应用程序是左关联的规则导致了这样一个规则 - 最外面的应用程序将在内部应用程序之前进行评估。

在表达式中，

*   `(\kf.f(\c.co)km)(\x.dox)(\le.le)`：

让我们首先进行一些简化（使用每个术语`e`是变量`x`、抽象`\x.y`或应用程序的首要原则`e1e2`）：

*   `\c.co = e1`,
*   `\x.dox = e2`,
*   `\le.le = e3`.

这导致原始表达式转换为：

*   `(\kf.f(e1)km)(e2)(e3)`.

让我们考虑上面表达式中最左边的项：

*   `(\kf.(f(e1)km)) = e4`

并仔细查看抽象的主体： - `(fe1)km`，或`(f(\c.co))km`

beta redex（可还原表达式）是形式的表达式`(\x.e1)e2`。上面的表达式看起来不像，也不是 beta redex（因为基于可用信息， f 不是抽象）。这就是为什么它不能被减少以及为什么它是错误的应用`\c.co`到`k`.

所以`e4`不会减少并保持原样，这会导致：

*   `((e4)(e2))(e3)`.

`((e4)(e2))`正如所指出的，是第一个 beta redex，并且确实`e2`替换了 .`k`

还有一点，由于同样的原因`((e4)(e2))`没有首先应用：它 ( ) 不是 beta redex，它的形式是：((\kf.body)e2)e3。内部表达式 (\kf.body)e2) 是第一个可以减少的有效 beta redex。这样做会导致提供的答案。`(e3)``((e4)(e2))e3`

# mysql - 自动从 SQL server 2008r2 获取数据到 mysql

> ID：14567315
> 
> 赞同：0
> 
> 时间：2013-01-28T17:08:19.527
> 
> 标签：mysql, sql, sql-server, replication

我有一个与 sql server 数据库在同一个域中运行的 Web 界面（php 前端、mysql 后端）。我需要经常（每天或每周）查询 sql server，然后将该数据加载到 mysql 中。最有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:17:13.037

您可以使用`SQL Server Agent`来运行计划的作业，该作业将选择数据并将其直接导出到您的 MySQL 服务器。

像这个例子（[SQL Server Management Studio 2008 计划导出到 MS Access](https://stackoverflow.com/questions/10861955/sql-server-management-studio-2008-scheduled-export-to-ms-access)），但导出到 MySQL 而不是 MS Access

# qt - 在 QTextEdit 中锁定一行

> ID：14567317
> 
> 赞同：0
> 
> 时间：2013-01-28T17:08:39.217
> 
> 标签：qt, text, locking, editor, line

如何在“QTextEdit”控件中锁定一行（或一行的一部分）？我可以这样做：当我在该行的那部分移动光标位置时，光标将自动移动到不属于该行该部分的下一个第一个位置。也许你有antoher的想法。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:46:29.543

我会连接到`QTextEdit::cursorPositionChanged()`并处理那里的运动。

[http://qt-project.org/doc/qt-4.8/qtextcursor.html#position](http://qt-project.org/doc/qt-4.8/qtextcursor.html#position)

[http://qt-project.org/doc/qt-4.8/qtextedit.html#textCursor](http://qt-project.org/doc/qt-4.8/qtextedit.html#textCursor)

```
QObject::connect(myTextEdit, SIGNAL(cursorPositionChanged()), 
    this, SLOT(on_cursorPositionChanged()));

// ...

int lockedAreaStart = 15;
int lockedAreaEnd = 35;

// ...

void MyWidget::on_cursorPositionChanged()
{
    int lockedAreaMiddle = (lockedAreaEnd + lockedAreaStart)/2.;

    int cursorPosition = myTextEdit->textCursor().position();
    if(cursorPosition > lockedAreaStart && cursorPosition < lockedAreaEnd)
    {
        if(cursorPosition < lockedAreaMiddle)
        {
            // was to the left of the locked area, move it to the right
            myTextEdit->textCursor().setPosition(lockedAreaEnd);
        }
        else
        {
            // was to the right of the locked area, move it to the left
            myTextEdit->textCursor().setPosition(lockedAreaStart);
        }
    }
} 
```

您可以通过继承 QTextEdit 并重新实现`setPosition()`.

您可能还需要在上面的代码中添加一些错误处理。当在“锁定行”之前插入文本时，您可能需要修改lockedAreaStart 和lockedAreaEnd。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:02:04.910

我认为实现这一目标的最佳方法是继承 QTextEdit 并重新实现 event() 方法来处理所有可能更改锁定行的事件。像这样的东西：

```
class MyTextEdit : public QTextEdit 
{
    Q_OBJECT

public:

    bool event(QEvent *event) 
    {
        switch (event->type()) {
        case QEvent::KeyPress:
        case QEvent::EventThatMayChangeALine2:
        case QEvent::EventThatMayChangeALine3:
             if (tryingToModifyLockedLine(event)) {
                 return true; // true means "event was processed"
             }
        }

        return QTextEdit::event(event); // Otherwise delegate to QTextEdit
    }  
}; 
```

此外`QEvent::KeyPress`，可能还有一些其他事件可以更改您的文本。例如`QEvent::Drop`

有关活动的更多信息，请参阅：

[http://doc.qt.digia.com/qt/eventsandfilters.html](http://doc.qt.digia.com/qt/eventsandfilters.html)

# sql - 识别拉丁字符

> ID：14567320
> 
> 赞同：0
> 
> 时间：2013-01-28T17:08:43.630
> 
> 标签：sql, sql-server

以下仅返回一个字符长的姓氏。
我可以添加一个进一步的条件，以便它只返回拉丁字母字符，即 AZ（加 az）

```
SELECT Surname
FROM WHData.dbo.vw_DimUser
WHERE 
    LEN(Surname) =1
    AND <extra condition required>
GROUP BY Surname 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:13:58.250

```
SELECT Surname
FROM WHData.dbo.vw_DimUser
WHERE 
    LEN(Surname) = 1
    AND Surname like '[a-Z]'
GROUP BY Surname 
```

[通配符匹配](http://msdn.microsoft.com/en-gb/library/ms179884.aspx)

**在下面的评论后编辑：**

让我们测试一下：

```
create table t1 (c1 char(1) collate Latin1_General_CS_AS
                 , c2 char(1) collate Latin1_General_CS_AS
                 , wild1 varchar(10) collate Latin1_General_CS_AS
                , wild2 varchar(10) collate Latin1_General_CS_AS)

insert into t1 values ('A', 'a', '[A-z]', '[a-Z]')

select match1 = case when c1 like wild1 then 'Matched' else 'Unmatched' end
  , match2 = case when c1 like wild2 then 'Matched' else 'Unmatched' end
  , match3 = case when c2 like wild1 then 'Matched' else 'Unmatched' end
  , match4 = case when c2 like wild2 then 'Matched' else 'Unmatched' end
from t1 
```

![在此处输入图像描述](../Images/f22d1a41b282213c16feb333bf89d46d.png)

您可以看到两者`A`和`a`仅在`[a-Z]`用作匹配模式时才正确匹配。

[以 SQL 小提琴为例](http://sqlfiddle.com/#!3/8cd0c/1)。

这可以在[上一个 SO question 的答案](https://stackoverflow.com/questions/8410523/how-does-sql-server-wildcard-character-range-eg-a-d-work-with-case-sensitive)中得到解释。基本上，使用`Latin1_General_CS_AS`，SQL Server 将对字符进行排序，例如：

```
a
A
b
B 
```

然而，为了再次窃取这个问题，Books Online 指出：

```
In range searches, the characters included in the range may vary depending on the sorting rules of the collation. 
```

所以我想它在某种程度上依赖于 COLLATION，所以实际上是在任何特定环境中进行测试的情况，其中部署了类似的东西。

# json - 如何在 Go 中打印出 JSON

> ID：14567324
> 
> 赞同：4
> 
> 时间：2013-01-28T17:08:48.560
> 
> 标签：json, go

我是 Go 新手，无法弄清楚如何打印出我创建的 JSON。我正在使用“encoding/json”并得到一个 []byte 返回。但是，当我将其打印出来时，我得到：

```
cannot use json_msg (type []byte) as type string in function argument 
```

收到此消息后，我尝试将 []byte 数组转换为字符串或空接口。但是我似乎无法让它工作。有任何想法吗？相关代码如下：

```
type Message struct {
    Id int
    Name string
}

for _, row := range rows {
    m := Message{row.Int(0), row.Str(1)}

    json_msg, err := json.Marshal(m)

    if err == nil {
        panic(err)
    }//if

            //tried below to print out a interface, didn't work either
    //var f interface{}
    //err = json.Unmarshal(json_msg, &f)

    fmt.Fprintf(c.ResponseWriter, json_msg)
}//for 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-28T21:42:22.637

有几种方法可以得到你正在寻找的东西。

首先，直接回答您的问题，`fmt.Fprintf`如果类型为`func(io.Writer, string, ...interface{})`. 既然你正在传递`c.ResponseWriter`它，我认为这是满足的东西`io.Writer`。第二个参数`fmt.Fprintf`是一个格式字符串。如果要将某些内容打印为字符串，请使用`%s`格式字符串，因此您想要的是：

```
fmt.Fprintf(c.ResponseWriter, "%s", json_msg) 
```

这直接回答了您的问题，但让我们更进一步：这是解决您正在解决的问题的正确方法吗？不，不是真的；这样做有点奇怪。

首先，因为我们知道`fmt.Fprintf`accept `io.Writer`，所以我们正在讨论一些具有 form 方法的东西`Write([]byte) (int, error)`。您可以通过直接调用方法将该`[]byte`数据写入：`ResponseWriter``Write()``ResponseWriter`

```
_, err := c.ResponseWriter.Write(json_msg) 
```

这*有点*不那么尴尬。事实证明，有一种*更好*的方法可以做到这一点：使用`json.Encoder`. A`json.Encoder`是一个*嵌入*a的结构`io.Writer`，有效地向任何`io.Writer`结构添加一个`Encode`方法，该方法会将结构编码为 json 并将它们写入编写器。不同之处在于，您所做的是将数据编码为内存中的字节切片，然后将其复制到 中`io.Writer`，而您可以直接编写它，如下所示：

```
err := json.NewEncoder(c.ResponseWriter).Encode(m) 
```

现在你甚至没有那种中间`[]byte`格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T05:49:42.687

您`json_msg`在`Printf`类型函数中用作格式字符串，它仅`string`作为格式字符串除外（`[]byte`并且`string`是不同的类型。尽管您可以将它们相互转换）。编写字节切片的正确方法是指定格式字符串：

```
fmt.Fprintf(WRITER_OBJ, "%s", json_msg) 
```

这将打印`[]byte`Unicode 内容。您不应该使用变量作为 Fprintf/Printf 中的格式字符串。我认为这不会像在 C 中那样有问题。但如果 JSON 中出现“%”，则可能会导致问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T18:35:00.023

```
fmt.Fprintf(c.ResponseWriter, string(json_msg)) 
```

将您投射`[]byte`到一个`string`

# hadoop - 使用 kerberos 配置 Hadoop CDH4.1.2 的问题

> ID：14567329
> 
> 赞同：0
> 
> 时间：2013-01-28T17:08:59.323
> 
> 标签：hadoop, kerberos

**我的数据节点日志文件：**

`*2013-01-28 22:12:05,084 WARN org.apache.hadoop.ipc.Client: Exception encountered while connecting to the server : javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)] 2013-01-28 22:12:05,084 ERROR org.apache.hadoop.security.UserGroupInformation: PriviledgedActionException as:dr.who (auth:KERBEROS_SSL) cause:java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]*`

我已经开始使用 kerberos 安装 hadoop CDH4.1.2，并且 datanode 作为安全进程启动。

根据[https://ccp.cloudera.com/display/CDH4DOC/Configuring+Hadoop+Security+in+CDH4](https://ccp.cloudera.com/display/CDH4DOC/Configuring+Hadoop+Security+in+CDH4) [https://ccp.cloudera.com/display/CDH4DOC/Appendix+A+-+Troubleshooting#AppendixA-Troubleshooting-问题2](https://ccp.cloudera.com/display/CDH4DOC/Appendix+A+-+Troubleshooting#AppendixA-Troubleshooting-Problem2)

以上链接我了解到 hadoop 命令行无法获取 kerberos 票证的凭据，因此建议使用解决方法来更新票证。是的，解决方法解决了命令行问题，我可以访问 HDFS。

但是从 Namenode UI，我无法查看日志，它显示 HTTP 401 错误。 `**User dr.who is unauthorized to access this page.**`

有没有人遇到过这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T06:49:52.777

将以下添加到 hdfs-sit.xml

```
<property>
<name>dfs.web.ugi</name>
<value>hdfs</value>
</property> 
```

在下面添加到 core-site.xml

```
<property>
<name>hadoop.http.staticuser.user</name>
<value>mapred</value>
</property> 
```

重启NameNode并检查，祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T17:24:25.770

您需要设置 Web UI 来处理 kerberos。

[http://hadoop.apache.org/docs/stable/HttpAuthentication.html](http://hadoop.apache.org/docs/stable/HttpAuthentication.html)

“dr.who”引用似乎是[hadoop.http.staticuser.user 的默认值](http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/core-default.xml)。

# c# - 将不同高度的文本块添加到gridview c#winrt

> ID：14567333
> 
> 赞同：0
> 
> 时间：2013-01-28T17:09:05.360
> 
> 标签：c#, gridview, windows-runtime, textblock

我正在尝试将几个包含不同长度文本的文本块添加到网格视图中。我想调整高度和宽度属性，以便文本块中的文本可见。问题是当程序运行时，所有的文本块项目都具有相同的高度。宽度是我指定的，但高度不是我分配的值。我错过了什么？

```
GridView grdvMain = new GridView();
List<TextBlock> tList = new List<TextBlock>;

for (int i =0; i < paragraphs.Length; i++)
{
    if (paragraphs[i].Trim() == "")
        continue;

    double height = (paragraphs[i].Trim().Split(' ').Length / 5.0) * 30;
    tList.Add(
        new TextBlock() 
        {
            TextWrapping = TextWrapping.Wrap, 
            Text = paragraphs[i].Trim(), 
            Width = 300, 
            Height = height ,
            Foreground = new SolidColorBrush(Windows.UI.Colors.Black),
            FontSize = 20
        });
}

grdvMain.ItemsSource = tList; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:22:59.240

ListView 或 GridView 中的项目始终具有相同的高度。它通常基于第一个项目的计算高度，但您也可以通过指定为其定义的[ItemsPanel](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.wrapgrid.itemheight.aspx)的[ItemHeight](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.itemscontrol.itemspanel.aspx)`ItemsControl`来设置它（例如 ListView 或 GridView）。

您可以使用 VariableSizedWrapGrid 来定义一个单元格跨越多少个网格列/行，但它的目的更多是为了突出某些项目而不是扩展所有项目以适应所有文本。

如果您的最大文本长度有限 - 您可以使所有项目的大小适合任何文本，或者如果文本不适合，您可以修剪文本，并在点击网格视图项目并导航到详细视图后全部显示的项目。

# java - 无法运行程序“wsimport”：Eclipse 中的 CreateProcess

> ID：14567336
> 
> 赞同：2
> 
> 时间：2013-01-28T17:09:16.733
> 
> 标签：java, eclipse, web-services, wsimport

这个问题是针对 java web 服务初学者的。
如果您在**构建或在****Web 服务**中生成**客户端**代码时遇到问题。 因此，我建议您按照以下步骤操作：-

 **> 1) 打开你的 Eclipse，我确定它只能打开 :)
> 2) 现在转到**文件 > 属性**或直接说 ( ` ALT `+ `   Enter   `)**
> 3) 系统会提示你出现名为**“属性”**
> 的新窗口4) 看这里对于**Java Build Path**，然后检查 Eclipse 的 Installed JRE。
> 5)如果path只给了JRE而没有jdk，请**立即更改**

这是唯一不允许您调用**wsimport**命令的事情。
因为**wsimport**是一个**exe**文件，它位于**JDK/bin 目录**而不是 **JRE 目录**
中 ，这就是为什么您总是遇到无法执行命令的问题。
现在享受你的学习。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:35:11.763

您可以尝试使用[Apache Ant](http://help.eclipse.org/juno/topic/org.eclipse.platform.doc.user/gettingStarted/qs-80_ant.htm?cp=0_1_2)[`wsimport`](http://docs.oracle.com/javase/7/docs/technotes/tools/share/wsimport.html)使用JDK中的工具在 Eclipse 上生成 WebService 客户端。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE project>
<project name="generate-client" default="generate-client" basedir=".">

    <property name="java.home" value="C:\Software\Java\jdk1.7.0_05" />
    <property name="wsdl.location" 
           value="http://www.webservicex.net/geoipservice.asmx?WSDL" />

    <target name="generate-client">
        <exec executable="${java.home}\bin\wsimport.exe">
            <arg line="${wsdl.location} -s src -Xdebug -verbose -Xnocompile" />
        </exec>
    </target>

</project> 
```

将此 XML 文件放在您的项目文件夹中。**

# ruby-on-rails - 将符号传递给 Ruby on Rails 中的辅助函数？

> ID：14567337
> 
> 赞同：0
> 
> 时间：2013-01-28T17:09:21.110
> 
> 标签：ruby-on-rails, ruby-on-rails-3

有没有办法将我的表单的这一部分移动到辅助方法中？

```
<%= f.label :address do %>
  <%= f.object.class.human_attribute_name :address %>
  <span>optional</span>
<% end %><br/> 
```

我有很多场合需要，`span`但我不知道如何将`:address`符号传递给辅助函数。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:21:37.613

您可以将视图的这一部分实现为部分视图，可以在需要时随时回收，请参阅[布局和渲染](http://guides.rubyonrails.org/layouts_and_rendering.html)

您可以按照 3.4.4 传递局部变量中所述将变量传递给 Partials

# c# - 将分页与 GridView 一起使用时，EntityDataSource 为空

> ID：14567343
> 
> 赞同：3
> 
> 时间：2013-01-28T17:09:30.550
> 
> 标签：c#, asp.net, entity-framework, gridview, entitydatasource

我一直在四处寻找答案，但到目前为止还没有找到解决方案。我正在尝试将 an`EntityDataSource`与 GridView (C#) 一起使用。GridView 最初没有填充，`Page_Load`因为我希望用户从下拉列表中选择一些信息。当用户做出一些选择并按下按钮时，我会修改 EDS 的 connectionstring 属性以使其特定于用户。这一切都很好，并且 GridView 填充了数据。

然后我尝试转到第 2 页，它工作正常。问题是当我尝试转到第 3 页时（这是任意的...我可以从 4 开始并尝试转到第 6 页...没关系）。此时，我在调试中观察并看到它`EntityDataSource`是空的（TotalRowCount = 0）。我真的不想用一种`non-EntityDataSource`方法重做这个，但别无选择，我会的。

我也被`PageIndexChanging`解雇了，我正在尝试正确设置新索引，所以这似乎不是问题的原因......我不确定我是如何失去`EntityDataSource`.

以下是部分代码：

```
protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
        EntityDataSource ed2 = (EntityDataSource)this.lv2.FindControl("EntityDataSource2");
        GridView gv1 = (GridView)this.lv2.FindControl("GridView1");
        gv1.DataSourceID = null;
        gv1.DataSource = ed2;
        gv1.DataBind(); 
        gv1.PageIndex = e.NewPageIndex;  
    }

<asp:EntityDataSource ID="EntityDataSource2" runat="server" ConnectionString="name=MAS_CMLEntities1" DefaultContainerName="MAS_CMLEntities1" EnableFlattening="False" EntitySetName="CI_Item" AutoGenerateWhereClause="false"
Select="it.[ItemCode], it.[ItemCodeDesc], it.[LastSoldDate], it.[UDF_Manufact], it.[Category2], it.[SalesUMConvFctr], it.[DefaultWarehouseCode], it.[TotalQuantityOnHand], it.[SalesUMConvFctr]" 
Where="it.[ItemCode] LIKE @siteFilter" OrderBy="it.[ItemCode]" 
ViewStateMode="Inherit" onselected="EntityDataSource2_Selected">
<WhereParameters>
<asp:Parameter Name="siteFilter" Type="String" />
</WhereParameters>
</asp:EntityDataSource> 

<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataKeyNames="ItemCode" 
        DataSourceID="EntityDataSource2" CellPadding="20"
        GridLines="None" CssClass="mGrid" PagerStyle-CssClass="pgr" 
        AlternatingRowStyle-CssClass="alt" CellSpacing="20" AllowPaging="True" 
        AllowSorting="True" onpageindexchanging="GridView1_PageIndexChanging" 
        onpageindexchanged="GridView1_PageIndexChanged" PageSize="15"
        onrowcommand="GridView1_RowCommand">
    <AlternatingRowStyle CssClass="alt"></AlternatingRowStyle>
        <Columns>
            <asp:BoundField DataField="ItemCode" HeaderText="ItemCode" ReadOnly="True" 
                SortExpression="ItemCode" />
            <asp:BoundField DataField="ItemCodeDesc" HeaderText="Desc" ReadOnly="True" 
                SortExpression="ItemCodeDesc" />
            <asp:BoundField DataField="UDF_Manufact" HeaderText="MFG" ReadOnly="True" 
                SortExpression="UDF_Manufact" />
            <asp:BoundField DataField="Category2" HeaderText="Container" ReadOnly="True" 
                SortExpression="Category2" />
            <asp:BoundField DataField="SalesUMConvFctr" HeaderText="ContainerUOM" ReadOnly="True" 
                SortExpression="SalesUMConvFctr" />
            <asp:BoundField DataField="DefaultWarehouseCode" HeaderText="WhseCode" ReadOnly="True" 
                SortExpression="DefaultWarehouseCode" />
            <asp:BoundField DataField="TotalQuantityOnHand" HeaderText="QtyOnHand" ReadOnly="True" 
                SortExpression="TotalQuantityOnHand" />
            <asp:BoundField DataField="SalesUMConvFctr" HeaderText="Units" ReadOnly="True" 
                SortExpression="SalesUMConvFctr" />
            <asp:ButtonField ButtonType="Button" CommandName="AddToCart" 
                HeaderText="Add To Request" Text="Add" >
                <ItemStyle HorizontalAlign="Center" />
            </asp:ButtonField>
        </Columns>
    <PagerStyle CssClass="pgr"></PagerStyle>
</asp:GridView> 
```

我在这里做错了什么？我不明白 EDS 是如何变空的，或者我应该如何保持它的状态。

# asp.net - asp.net中的虚拟目录错误

> ID：14567344
> 
> 赞同：1
> 
> 时间：2013-01-28T17:09:31.757
> 
> 标签：asp.net

当我今天尝试启动我的网站时，我对 asp.net 还很陌生，我收到了这个错误：

错误 2 在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。

有人可以解释这个错误的含义以及我该如何解决它吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:55:46.657

您没有将应用程序的目录定义为 IIS 中的虚拟目录，或者您在子目录中的 web.config 中有不允许的内容。有些元素只能存在于根 web.config 中。

# c# - 在另一台计算机上运行包含 .sdf 文件的项目时出错

> ID：14567348
> 
> 赞同：0
> 
> 时间：2013-01-28T17:09:50.613
> 
> 标签：c#, winforms, deployment, sql-server-ce

我在 Visual Studio 2010 中创建了 ac# 项目，其中包含一些数据库连接。问题是当我运行正确运行的项目以及复制 exe 文件和 dll 文件以及 bin/debug 文件夹中的所有文件并放置在另一个位置时。并删除作为 c# 项目的项目并尝试运行 exe 文件，该表单正在正确打开，但是当打开数据库表单时，出现此错误

> *路径无效。检查数据库的目录。
> [ 路径 = E:\WindowsFormsApplication1\WindowsFormsApplication1\Database1.sdf ]*

它仍然采用我在 c# 代码中编写的目录。

在出现上述错误的第二种形式中，我编写了此代码，文件路径的连接字符串相同，这是错误的。如果它从同一个文件夹中获取路径，为什么会发生这种情况，那么我如何在另一台计算机上运行该项目？

```
 connectionString = @"E:\WindowsFormsApplication1\
    WindowsFormsApplication1\Database1.sdf";
                sqlConnection = new SqlCeConnection(connectionString);
                selectQueryString = "SELECT * FROM table2";
                sqlConnection.Open();
                sqlDataAdapter = new SqlCeDataAdapter(selectQueryString,
 sqlConnection);
                sqlCommandBuilder = new SqlCommandBuilder(sqlDataAdapter);
                dataTable = new DataTable();
                sqlDataAdapter.Fill(dataTable);
                bindingSource = new BindingSource();
                bindingSource.DataSource = dataTable;
                dataGridView1.DataSource = bindingSource; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:22:38.677

**第 1 步**：如果您的项目尚未包含`app.config`- 添加一个：

*   在你的`Solution Explorer`，去项目
*   然后从上下文菜单中选择`Add > New Item`
*   转到`General`模板并选择`Application Configuration File`

**第 2 步**：将连接字符串（包含`.sdf`文件路径）放入该配置文件：

*   打开`app.config`您从第 1 步获得的新文件
*   `<configuration> ..... </configuration>`在标签内添加这些行：

    ```
    <connectionStrings>
        <add name="SomeNameHere" 
             connectionString="E:\WindowsFormsApplication1\WindowsFormsApplication1\Database1.sdf"/>
    </connectionStrings> 
    ```

**第 3 步：**在您的程序中，从该配置中读取连接字符串：

```
connectionString = ConfigurationManager.ConnectionStrings["SomeNameHere"].ConnectionString; 
```

**第 4 步：**当您将应用程序复制到新计算机时，根据需要在配置文件中**调整**该路径。

# jquery - 改变图像

> ID：14567350
> 
> 赞同：0
> 
> 时间：2013-01-28T17:09:51.987
> 
> 标签：jquery, image

我想制作一个电影院在线预订系统......我找到了一种将座位从可用座位更改为选定座位的方法，但它只适用于一个座位我需要一种方法来制作多个座位，并且每次用户点击一个座位它将更改为选定的座位图像

这是 1 个座位的代码，它正在工作（我认为问题出在 ids 上）

```
<html>
<head>
</head>
<body>
<h1>Select Here:</h1>
<img id="ChangeImage" src="images/available_seat_img.gif"/>

<script src="js/jquery.js"></script> 
<script>
var image1 = 'images/available_seat_img.gif'; 
var image2 = 'images/selected_seat_img.gif'; 
$("#ChangeImage").click(function () { 
$(this).attr('src', function (index, currentSource)
 { return currentSource == image2 ? image1 : image2; }); }); 
 </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:15:48.810

您的问题是因为您正在为标签分配 ID `img`。如果您有多个具有相同 ID 的元素，则它是无效的 HTML，并且 jquery 选择器将始终只选择第一个匹配的元素。这就是为什么它只适用于一张图像。

您需要创建`ChangeImage`一个类并更改您的点击功能选择器。

HTML：

```
<h1>Select Here:</h1>
<img class="ChangeImage" src="images/available_seat_img.gif"/>
<img class="ChangeImage" src="images/available_seat_img.gif"/>
<img class="ChangeImage" src="images/available_seat_img.gif"/>
<img class="ChangeImage" src="images/available_seat_img.gif"/>
<img class="ChangeImage" src="images/available_seat_img.gif"/> 
```

JQuery ：（如果您将使用 jquery 动态添加图像，则此更改可以适应）

```
$(document).on('click', '.ChangeImage',  function () {
    $(this).attr('src', function (index, currentSource) {
        return currentSource == image2 ? image1 : image2;
    });

    // do something else to mark the seat as resever
}); 
```

# slider - FlexSlider 全角显示屏

> ID：14567352
> 
> 赞同：3
> 
> 时间：2013-01-28T17:09:56.310
> 
> 标签：slider

我似乎无法摆脱将 FlexSlider 设置为 width:100% 的大约 5px 的白边距。

我已将所有填充和边距设置为 0px，甚至尝试调整 js 插件本身，但运气不佳。

有人吗？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-11T23:56:26.850

The class `.flexslider` has a border of 4 or 5px (white). Set this border to none to get rid of it in your CSS.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-23T13:43:17.067

不，不是这样，从 flexslider.css 中删除以下行，我相信在第 66 行：

```
.flex-direction-nav .flex-next { 
    right: -50px; 
    text-align: right; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T17:20:45.307

我真的明白了。太容易了。只需禁用 FlexSlider css 并将 flexslider div 设置为 position:absolute; 左：0px；

# javascript - 悬停链接时如何更改DIV背景？

> ID：14567354
> 
> 赞同：1
> 
> 时间：2013-01-28T17:09:58.167
> 
> 标签：javascript, jquery, html, css

当我悬停几个链接时，我可以更改 div 的背景图像吗？我的意思是，如果我将鼠标悬停在链接 1 上，则有一个背景，链接 2 是另一个背景，依此类推。

```
<div style="background: url(image1.jpg) no-repeat right; ">
  <a href="#">Link 1</a>
  <a href="#">Link 2</a>
  <a href="#">Link 3</a>
  <a href="#">Link 4</a>
</div> 
```

可以用 JavaScript、jQuery 或简单的 CSS 技巧来完成吗？

谁能告诉我我做错了什么？？？？

```
<html>
<head>
<script src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
<script type="text/javascript">
$('.background-changer').on('mouseover', 'a', function () {

    var background = "url('" + $(this).attr('data-background') + "')";

    $('.background-changer').css('background-image', background)
});
</script>
</head>

<body>

<div style="background:url(http://i.dailymail.co.uk/i/pix/2013/01/01/article-2255449-16B57005000005DC-878_964x641.jpg) no-repeat right;" class="background-changer"> 

 <a href="#" data-background="https://twimg0-a.akamaihd.net/profile_images/1298643948/FranceFlag_svg.png">Link 1</a>
 <a href="#" data-background="http://cdn.londonandpartners.com/visit/london-organisations/houses-of-parliament/63950-640x360-london-icons2-640.jpg">Link 2</a>
 <a href="#" data-background="http://i.dailymail.co.uk/i/pix/2013/01/01/article-2255449-16B57005000005DC-878_964x641.jpg">Link 3</a> 
 <a href="#" data-background="http://us.123rf.com/400wm/400/400/godrick/godrick1002/godrick100200011/6503920-tower-bridge-london-england-uk-europe-illuminated-at-dusk.jpg">Link 4</a>

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:16:34.940

使用数据属性

**jQuery：**

```
$('.background-changer').on('mouseover', 'a', function () {

    var background = "url('" + $(this).attr('data-background') + "')";

    $('.background-changer').css('background-image', background)
}); 
```

**HTML：**

```
<div style="background: url(image1.jpg) no-repeat right;" class="background-changer"> 

    <a href="#" data-background="image1.jpg">Link 1</a>
    <a href="#" data-background="image2.jpg">Link 2</a>
    <a href="#" data-background="image3.jpg">Link 3</a> 
    <a href="#" data-background="image4.jpg">Link 4</a>

</div> 
```

[活生生的例子](http://jsfiddle.net/a9ZRe/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:14:27.963

是的，您可以使用以下代码：

```
$('a').mouseover(function () {
    $(this).parent().css('background', new_background);
}); 
```

这是使用`jQuery`，您选择所有`anchors`并订阅 mouseover 事件。`CSS`然后在被悬停的元素的父元素上应用新的背景属性值。您可以使用`mouseout()`恢复旧背景，但从锚点移动到时会出现一些闪烁效果`anchor`，因此您可以使用超时来恢复背景。仅供参考，使选择器更具体，因为目前它适用于文档中的所有锚点。通过给 div 一个 ID 或某个特定的类，将其限制在 div 内的所有锚点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T17:17:20.210

看例子[http://codepen.io/yardenst/pen/LJldn](http://codepen.io/yardenst/pen/LJldn)

使用数据属性以声明方式设置背景颜色

```
<div style="background: url(image1.jpg) no-repeat right; ">
  <a href="#" data-bg="yellow">Link 1</a>
  <a href="#" data-bg="green">Link 2</a>
  <a href="#" data-bg="#000">Link 3</a>
</div>

$("a").on("mouseover",function(){

  $(this).parent().css("background-color",$(this).attr("data-bg"));

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T17:12:11.803

试试这个：

jQuery

```
$(document).ready(function(){
    $('.selector a').hover(function() {
        var targetBG = $(this).attr('id');

        $('.selector').css({'background':'url('+targetBG+'.jpg) no-repeat right'});
    });
}); 
```

HTML

```
<div class="selector" style="background: url(image1.jpg) no-repeat right; ">
      <a href="#" id="image1">Link 1</a>
      <a href="#" id="image2">Link 2</a>
      <a href="#" id="image3">Link 3</a>
      <a href="#" id="image4">Link 4</a>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T17:18:05.193

有很多方法可以做到这一点。一种简单的方法是给你的 div 一个 ID，每个链接一个 ID：

```
<div id="parent" style="background: url(image1.jpg) no-repeat right; ">
  <a id="link1" href="#">Link 1</a>
  <a id="link2" href="#">Link 2</a>
  <a id="link3" href="#">Link 3</a>
  <a id="link4" href="#">Link 4</a>
</div> 
```

然后将 JavaScript 与 jQuery 一起使用：

```
$('#parent a').hover(function() {
  var color;
  switch($(this).attr('id')) {
    case 'link1': color = 'red';    break;
    case 'link2': color = 'black';  break;
    case 'link3': color = 'yellow'; break;
    case 'link4': color = 'green';
  }

  $(this).parent().css({ 'background': color });
}); 
```

显然，使用有意义的 ID。

您还可以给每个背景颜色一个 CSS 类，并在悬停时将它们分配给父级，或者使用多种其他解决方案。这一切都是为了弄清楚什么对您的应用程序最有意义。如果您将拥有大量链接，您将需要使用更动态的解决方案，可能会提供链接 ID，例如`link_red`和`link_yellow`，然后从 JavaScript 中的 ID 中提取颜色。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T17:19:49.497

使用简单的 JS：

```
<!DOCTYPE html>
<html>
<head>
    <script>

    function chgBG(e){
        document.getElementsByTagName('body')[0];
        body.style.backgroundImage = 'url(newImage.jpg)';
    }
    </script>
</head>
<body>
    <div id="focusArea" onmousemove="getPos(event)">
        <p>Mouse Over This Text And Background will change!</p>
    </div>
</body>
</html> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-28T17:22:30.550

bk 变量将保存默认颜色，然后应用悬停功能更改颜色。然后在鼠标离开时用默认颜色替换

```
 <div style="background: silver; ">
      <a href="#black">Link 1</a>
      <a href="#green">Link 2</a>
      <a href="#red">Link 3</a>
      <a href="#gray">Link 4</a>
    </div>

 var bk = $('div').css('background');
    $('a').hover(function(){
        $('div').css('background',$(this).attr('href').replace("#",''));
        // or 
        // $(this).parent().css('background',$(this).attr('href').replace("#",''));

    }); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-01-28T17:16:44.203

```
onmouseover="this.parentNode.style.backgroundImage = 'url(newimage.gif)'" 
```

如果你更喜欢纯js。

parentNode 获取您使用 onmouseover 的元素的上述元素，在这种情况下，您在 a 元素上添加 onmouseover 以获取它的上述元素。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-01-28T17:18:30.277

首先，如果可以避免的话，你不应该使用内联样式。

```
<div class="some-class-name">
  <a class="link1" href="#">Link 1</a>
  <a class="link2" href="#">Link 2</a>
  <a class="link3" href="#">Link 3</a>
  <a class="link4" href="#">Link 4</a>
</div>

.some-class-name {
    background: url(image1.jpg) no-repeat right;
} 
```

使用 jQuery 通过在每个链接的悬停时向包含的 div 添加/删除一个类来更改背景图像。

```
$(".link1").hover(
  function () {
  $(this).parent().addClass("link1-bg");
},
  function () {
  $(this).parent().removeClass("link1-bg");
}
);

$(".link2").hover(
      function () {
      $(this).parent().addClass("link2-bg");
    },
      function () {
      $(this).parent().removeClass("link2-bg");
    }
    );

$(".link3").hover(
      function () {
      $(this).parent().addClass("link3-bg");
    },
      function () {
      $(this).parent().removeClass("link3-bg");
    }
    );

$(".link4").hover(
      function () {
      $(this).parent().addClass("link4-bg");
    },
      function () {
      $(this).parent().removeClass("link4-bg");
    }
    ); 
```

您的 css 类将由上述 jQuery 代码添加。

```
.link1-bg {
    background: url(link1-bg.jpg) no-repeat right;
}

.link2-bg {
    background: url(link2-bg.jpg) no-repeat right;
}

.link3-bg {
    background: url(link3-bg.jpg) no-repeat right;
}

.link4-bg {
    background: url(link4-bg.jpg) no-repeat right;
} 
```

# java - 从其他类调用非静态方法

> ID：14567360
> 
> 赞同：0
> 
> 时间：2013-01-28T17:10:13.783
> 
> 标签：java

我正在做我的任务，并且遇到了一些错误。在一个类中，我有这种方法：

```
public class Class1{
    public static boolean winningRecord(){
        final int WINNING_RECORD;
        return Class2.getPoints() > WINNING_RECORD;
    }
}

class Class2{
    int wins = 0;
    public int getPoints(){
        return wins; //More to it but to keep it simple I'll leave that out
    }
} 
```

现在我收到错误“无法从静态上下文引用非静态方法......”，所以我将 getPoints() 设为静态方法，也将变量设为静态，并且它可以工作。但是在另一种打印出 Objects 的方法中它不起作用（我相信这是因为 static 关键字）。

所以我的问题毕竟是有一种方法可以在不创建第二个类的实例的情况下调用方法吗？这是我拥有的一般想法代码，它应该让您了解正在发生的事情，如果没有，我会添加更多内容。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-28T17:30:28.727

java中的一个关键概念是实例化的概念。类定义具有一种对象类型的所有规则。对象的每个实例都将遵循相同的规则。例如，如果我定义

```
class Ball {
  public void bounce() { 
    // lots of code here
  }
} 
```

然后系统有代码用于称为`Ball`s 的东西，它可以`bounce`

如果我想要两个球...

```
public class Main {
  public static void main(String args[]) {
    Ball beachBall = new Ball();
    Ball soccerBall = new Ball(); 
```

我可以随心所欲地弹跳它们

```
 beachBall.bounce();
    beachBall.bounce();
    soccerBall.bounce();
    beachBall.bounce(); 
```

但我不能说

```
 Ball.bounce(); 
```

因为这会让我的系统产生“哪个球？”的问题。

`static`方法和变量与特定实例无关。

例如：

```
class Werewolf {
  static boolean fullMoon = false;

  static void setFullMoon(boolean isVisible) {
    fullMoon = isVisible;
    // code code code
  }

  void eatPerson(Person p) {
    // code code code
  }
} 
```

应用于所有狼人的静态方法，因此在类上调用它：

```
Werewolf.fullMoon(true); 
```

应用于特定狼人的非静态（实例）方法，因此在实例上调用它。

```
jeff.eatPerson(chuck); 
```

杰夫是狼人。查克是他吃的人。尽量忽略那些残酷的评论。我们都从某个地方开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:19:41.393

在您的代码中，由于静态键工作，`winningRecord()`特定于类`Class1`本身。

而`getPoints()`在 Class2 中特定于类的实例`Class2`

无法从静态上下文访问非静态方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-26T10:38:27.677

getPoints 不能是静态的，除非 wins 是静态的。如果wins 是静态的，那么只有一个wins 副本，由整个应用程序共享。你需要决定你需要多少份胜利。（而且“除了单例，只有一个类来存储一个类通常是愚蠢的

# excel - 如何获得范围的 MIN 以及同一行中的第二个单元格？

> ID：14567362
> 
> 赞同：1
> 
> 时间：2013-01-28T17:10:18.443
> 
> 标签：excel, excel-formula

感谢 stackoverflow 的 Excel 专家帮助我完成看似不可能的项目。我有另一个问题：

我有 2 个工作表，Sheet1 和 Sheet2。

`Sheet1`有一个产品代码列表和一个从in`A`获得最低价格的公式：`Sheet2``B`

```
A      B      C
A100   $10
A200   $12
A300   $45 
```

`Sheet2`有一个产品代码、价格和描述的列表：

```
A      B      C
A100   $20    Product One
A100   $10    Product Two
A100   $12    Product Three
A100   $0     Not Found
A200   $25    Product A
A200   $12    Product B
etc, etc, etc 
```

在`Sheet1`, 列`B`中，我使用以下公式来找到最低的非零价格：

```
=MIN(IF('Sheet2'!$A$1:$A$20000=A1,IF('Sheet2'!$B$1:$B$20000>0,'Sheet2'!$B$1:$B$20000))) 
```

如何修改它以获取 column 中的描述`C`并将其放在`Sheet1`column中`C`？

一如既往，感谢您的时间和精力！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:48:39.523

我想我得到了答案）将以下内容放入 C1：

`=IFERROR(INDIRECT("Sheet2!C"&MATCH(A1&MIN(IF(Sheet2!$A$1:$A$20000=A1,IF(Sheet2!$B$1:$B$20000>0,Sheet2!$B$1:$B$20000))),Sheet2!$A$1:$A$20000&Sheet2!$B$1:$B$20000,0)),"No price / description found")`

并且不要忘记按`CTRL`+ `SHIFT`+`ENTER`而不是通常的方式`ENTER`- 这将定义一个 ARRAY 公式，并在`{}`其周围产生括号（但不要手动输入它们！）。错误处理也包括在内。

如果需要结合价格和描述的 1 单元解决方案 - 使用这个怪物：

`=IFERROR("$"&MIN(IF(Sheet2!$A$1:$A$20000=A1,IF(Sheet2!$B$1:$B$20000>0,Sheet2!$B$1:$B$20000)))&": "&INDIRECT("Sheet2!C"&MATCH(A1&MIN(IF(Sheet2!$A$1:$A$20000=A1,IF(Sheet2!$B$1:$B$20000>0,Sheet2!$B$1:$B$20000))),Sheet2!$A$1:$A$20000&Sheet2!$B$1:$B$20000,0)),"No price / description found")`

示例文件也可用：[https ://www.dropbox.com/s/tnb3ov7o1s2sper/PriceWithDescr.xlsx](https://www.dropbox.com/s/tnb3ov7o1s2sper/PriceWithDescr.xlsx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:55:13.777

您可以使用`INDEX/MATCH`解决方案，例如 C1

`=INDEX(Sheet2!C$1:C$20000,MATCH(1,(Sheet2!A$1:A$20000=A1)*(Sheet2!B$1:B$20000=B1),0))`

确认`CTRL+SHIFT+ENTER`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T18:56:07.057

因为 Sheet2 中的 Product Code 和 Price 列都可能有重复的值，所以我建议在 Sheet2 中创建一个唯一值，您可以使用它来区分不同的价格/产品代码组合。这是我解决这个问题的方法：

**第 1 步 - 在 Sheet2 中插入新列**

我使用以下公式在当前列 A 之前添加了一个新列：

```
=CONCATENATE(B2,"-",C2) 
```

此修订版现在将为 Sheet2 生成以下值：

```
A          B          C          D
A100-20    A100       20         Product One   
A100-10    A100       10         Product Two
A100-12    A100       12         Product Three
A100-0     A100       0          Not Found 
```

**第 2 步 - 在 Sheet2 的 C 列中输入新公式**

```
=VLOOKUP(CONCATENATE(A2,"-",B2),Sheet2!A:D,4,FALSE) 
```

这将从 Sheet2 的数据中查找 Sheet1 的 A 和 B 列中的值组合。可以添加额外的错误检查以忽略零价产品，但我没有将其包含在我的公式中，因为您已经在 Sheet1 列 B 中的先前公式中考虑了这一点。当我测试它时，这产生了正确的描述。

如果您无法在此范围内修改工作表，您还可以使用基于迭代 VBA 的解决方案，如有必要，我很乐意演示。

祝你好运！

# postgresql - 在 Postgres 中从制表符分隔的文件复制到表

> ID：14567364
> 
> 赞同：5
> 
> 时间：2013-01-28T17:10:21.243
> 
> 标签：postgresql, copy, csv

我正在使用复制命令将带有标题的制表符分隔文件的内容复制到 postgres 中的表中。我以前使用过副本，所以我知道它是如何工作的，但是我有一个关于如何解决文件中丢失的数据的问题。

我已经预先制作了表格，使其具有与标题中的值相同的列名。

我收到的文件中的一些“列”只是空白。我放了假数据只是为了让命令正常工作，但这是每周都会自动化的东西。我想知道我是否只需要告诉人们确保他们的数据是正确的，或者是否有办法告诉复制命令输入一个 NULL 来代替空白数据。

我想我可能不得不放置在空白标签中，这将作为一个空值，但我不确定这是否是最好的做法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T20:33:36.547

[`COPY`](http://www.postgresql.org/docs/current/interactive/sql-copy.html)用于指定的[文档](http://www.postgresql.org/docs/current/interactive/sql-copy.html)`NULL`， s 的默认值为`\N`. 因此，按照@a_horse_with_no_name 的建议将其更改为空是可行的方法。

另一种方法是使用任何其他工具预处理文件。我经常在我的脚本中执行以下操作：

```
psql dbname <<EOSQL
COPY tab FROM stdin WITH (FORMAT 'csv', DELIMITER E'\t', NULL 'NULL');
$(printf "1\t2\t3\n4\t\t6\n7\t8\t\n\t10\t11\n"| \
  sed -e 's/\(\t\|^\)\(\t\|$\)/\1NULL\2/g')
\.
EOSQL 
```

而不是`printf`你可以 cat 你的文件。使用所需的任何操作。 *注意：我在 OSX 上，所以`sed`语法可能因您而异。*

此外，在当前的 PostgreSQL CommitFest 中，有[一个补丁](https://commitfest.postgresql.org/action/patch_view?id=985)可以将通用的前置和后置处理器添加到`COPY`命令中。[在这里](http://www.postgresql.org/message-id/002101cd9190%24081c4140%241854c3c0%24@lab.ntt.co.jp)你可以找到整个讨论。

# matrix-multiplication - 无法在 Eigen 中正确获得 X^TX

> ID：14567365
> 
> 赞同：0
> 
> 时间：2013-01-28T17:10:26.873
> 
> 标签：matrix-multiplication, eigen

我有一个矩阵 X；

```
 Eigen::MatrixXcf X = Shapes.block(0,0,Shapes.rows(),data.cols()) * std::complex<float>(0,1) +
        Shapes.block(0,data.cols(),Shapes.rows(),data.cols())*std::complex<float>(1,0); 
```

我已经验证 matlab 中的数字符合我的预期。然后我在 Eigen 中进行跟踪。

```
Eigen::MatrixXcf A =  X.transpose() * X; 
```

现在在matlab中验证数字，A与我在matlab中使用X'X不同。我错过了什么吗？

例子：

> （21.5056，-85.0501）（19.9044，-84.2936）（18.0362，-59.8332）（41.4988，-81.8243）（36.6729，-83.0033） ,-47.5751) (88.5798,-58.5984) (82.4639,-58.4872) (93.4947,-37.2525) (105.993,-43.7597) (104.392,-44.2936) (112.198,-26.2848)

```
> (21.5056,-85.0501) (41.4988,-81.8243) (64.0719,-74.0823) 
> (88.5798,-58.5984) (105 .993,-43.7597) (19.9044,-84.2936)
> (36.6729,-83.0033)  (58.601,-73.3259) (82.4639,-58.4872) 
> (104.392,-44.2936) (18.0362,-59.8332) (38.0295,-56.6073)
> (70.2767,-47.5751) (93.4947,-37.2525) (112 .198,-26.2848)

 (-16735,-9172.05)   (-15034.5,-13329) (-11516.3,-18504.6) (-6910.19,-23175.2)
(-2647.21,-26824.3)
  (-15034.5,-13329) (-12275.9,-17184.7) (-7360.56,-21657.5) (-1502.46,-25378.6)
 (3748.75,-28128.9)
(-11516.3,-18504.6) (-7360.56,-21657.5)   (-650.169,-24774)  (6676.41,-26856.9)
 (13053.4,-28091.3)
(-6910.19,-23175.2) (-1502.46,-25378.6)  (6676.41,-26856.9)  (15145.7,-26993.3)
 (22353.3,-26482.6)
(-2647.21,-26824.3)  (3748.75,-28128.9)  (13053.4,-28091.3)  (22353.3,-26482.6)
   (30153,-24422.5)

Eigen::MatrixXcf B = X.topLeftCorner<3,5>();
Eigen::MatrixXcf C = X.topLeftCorner<3,5>();
B.transposeInPlace();

std::cout << B << std::endl<<std::endl;
std::cout << C << std::endl<<std::endl;
std::cout << B*C << std::endl; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:32:52.903

是的，X' 是 X 的伴随，即共轭转置，而不仅仅是转置。在本征中：

```
A = X.adjoint() * X; 
```

或等效地：

```
A = X.transpose().conjugate() * X; 
```

# asp.net-mvc - 重定向到 MVC3 操作后加载页面出错

> ID：14567366
> 
> 赞同：0
> 
> 时间：2013-01-28T17:10:27.220
> 
> 标签：asp.net-mvc, asp.net-mvc-3, post-redirect-get, redirecttoaction

场景：我有一个视图（我们称它为`Index.cshtml`）将表单发布到控制器操作（我们称它为`GetWorkList`）。

`GetWorkList`运行，然后返回一个局部视图`WorkReport`。之后，用户可以通过`ModifyDuration`操作修改和保存一些数据，这些数据又应该返回`GetWorkList`（与我上面提到的相同）。然后部分视图按应有的方式更新，但我收到一条错误消息：`Error loading page`在页面完全加载之前消失。

我应该怎么做才能没有此错误消息？

**控制器代码：**

```
 [HttpGet]
    public ActionResult Index()
    {
        return View();
    }

    [HttpGet]
    public PartialViewResult GetWorkList(string date)
    {
     .....instructions
       return PartialView("WorkReport", model);
    }

      [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult ModifyDuration(string newDuration, string id, string date)
    {
       .....instructions
      return RedirectToAction("GetWorkList", new
        {
            date = date
        });
    } 
```

**浏览器提示的错误：**

![Mozilla错误](../Images/5d528ade78cb0416b1ba2e8de9f5cb1d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T03:19:37.877

如果没有看到您的视图，很难具体说明，但看​​起来错误是因为您正在从作为 POST 请求的一部分呈现的视图中调用部分视图（get 请求成功，而 post 请求失败）。我在您的控制器代码中看不到任何建议您在 Post 请求中呈现视图的内容，但我想不出更好的解释。例如：

```
[HttpPost]
public ActionResult DoSomething() 
{
    ...
    return View(Index);
} 
```

在你的里面`Index.cshtml`：

```
@Html.Action("GetWorkList") 
```

这是一个例子，我可以看到它以同样的方式失败。因为视图是在 post 请求的上下文中呈现的，所以部分视图也作为 post 请求而不是 get 被调用。

# java - Hibernate没有找到具有多个多对多映射到相同实体的默认值

> ID：14567370
> 
> 赞同：0
> 
> 时间：2013-01-28T17:10:36.077
> 
> 标签：java, hibernate, orm

用户有这些：

```
@ManyToMany(mappedBy = "votedDownBy")
private Set<Foo> votedDown =new HashSet<Foo>();

@ManyToMany(mappedBy = "favouritedBy")
private Set<Foo> favourites = new HashSet<Foo>(); 
```

对应的 Foo 有这些：

```
@ManyToMany
private Set<User> votedDownBy = new HashSet<User>();

@ManyToMany
private Set<User> favouritedBy = new HashSet<User>(); 
```

部署时，我没有为 votedDownBy_id 提供默认值……我不知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:18:19.223

`@ManyToMany`映射是使用连接表完成的。在您的情况下，必须有一个`Foo_User`具有这些映射的表。即一个`Foo_id`和一个`User_id`列。（用各自的主键替换`Foo_id`和。也用where是 table和for ）`User_id``Foo_User``Table1_Table2``Table1``Foo``Table2``User`

`@JoinTable`您可以使用注释覆盖这些默认值：

```
@ManyToMany(mappedBy = "votedDownBy")
@JoinTable(name="User_Foo_Votedown", 
            joinColumns={@JoinColumn(name="User_ID")}, 
            inverseJoinColumns={@JoinColumn(name="Foo_id")})
private Set<Foo> votedDown =new HashSet<Foo>();

@ManyToMany(mappedBy = "favouritedBy")
@JoinTable(name="User_Foo_Fav", 
            joinColumns={@JoinColumn(name="User_ID")}, 
            inverseJoinColumns={@JoinColumn(name="Foo_id")})
private Set<Foo> favourites = new HashSet<Foo>(); 
```

和

```
@ManyToMany(mappedBy = "votedDown")
private Set<User> votedDownBy = new HashSet<User>();

@ManyToMany(mappedBy = "favorites")
private Set<User> favouritedBy = new HashSet<User>(); 
```

您也可以将`mappedBy`注释放入`User`和`JoinTable`放入，`Foo`因为这是对称的双向关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:34:07.927

只需将连接表添加到每个映射修复它， foo 类现在看起来像这样：

```
@ManyToMany
@JoinTable(name="user_foo_vote_down")
private Set<User> votedDownBy = new HashSet<User>();

@ManyToMany
@JoinTable(name="user_foo_favourite")
private Set<User> favouritedBy = new HashSet<User>(); 
```

# python - 使用 jinja2 访问实体的集合

> ID：14567371
> 
> 赞同：2
> 
> 时间：2013-01-28T17:10:36.103
> 
> 标签：python, google-app-engine, jinja2

我有一个简单的“章节”模型：

```
class Chapter(db.Model):
    book = db.ReferenceProperty(Book, collection_name='chapters')
    title = db.StringProperty(required=True)
    father = db.SelfReferenceProperty(collection_name='sons') 
```

我正在尝试列出 HTML 页面上的章节和子章节：

```
{% block content %}
    {% for chap in chaps %}
       Title: {{ chap.title}}<br>
    {% endfor %}
{% endblock %} 
```

有了这个，我得到了所有的章节和子章节，但我想列出这些章节的子章节，所以，我尝试了这个：

```
{% block content %}
    {% for chap in chaps %}
       Title: {{ chap.title}}<br>
       {% for sub in chap.sons %}
         teste: {{ sub.title }}<br>
       {% endfor %}
    {% endfor %}
{% endblock %} 
```

但看起来 chap.sons 没有任何东西，因为它没有显示任何东西，但是我没有收到任何错误。

（我确定我的数据库中有“儿子”）

如何正确使用“collection_name”？

# ios - 在CoreData中保存数据时出错

> ID：14567373
> 
> 赞同：0
> 
> 时间：2013-01-28T17:10:38.247
> 
> 标签：ios, objective-c, core-data

我正在尝试将数据保存在 CoreData 中并出现错误。

**NSInvalidArgumentException'，原因：'+entityForName: nil 不是搜索实体名称'文件'的合法 NSManagedObjectContext 参数**

这是代码：

```
-(NSMutableArray *)listFileAtPath:(NSString *)path
{
    NSMutableArray *directoryContent = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:path error:NULL];
    return directoryContent;
}
-(void)FileData
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    File *myMO = (File*) [NSEntityDescription insertNewObjectForEntityForName:@"File" inManagedObjectContext:[self managedObjectContext]];
    [myMO setValue:[self listFileAtPath:documentsDirectory] forKey:@"filename"];
} 
```

为什么他没有看到我的实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:14:05.503

`[self managedObjectContext]`正在`nil`根据错误消息返回，查看此方法以验证它是否返回正确的`NSMangedObjectContext`

# css - Chrome Mobile 的“Display:-webkit-flex”替代方案

> ID：14567376
> 
> 赞同：7
> 
> 时间：2013-01-28T17:10:45.123
> 
> 标签：css, flexbox

最近我一直在开发一个使用 HTML5/CSS3 的移动优化网络平台。这个应用程序有一个登陆页面，它由四个大小相同的图块组成，中间有一个图标（一些其他样式，比如它们之间的一些填充和边框半径等）。这些图块的大小根据屏幕大小使用“ *display: flex;* ”显然是由于用户能够更改屏幕方向的性质。

我正在使用以下标记来实现这一点......

**HTML**

```
<div class="container">        
    <a href="1.aspx">
        <span class="icon1"></span>
    </a>
    <a href="2.aspx">
        <span class="icon2"></span>
    </a>
    <a href="3.aspx">
        <span class="icon3"></span>
    </a>
    <a href="4.aspx">
        <span class="icon4"></span>
    </a>
</div> 
```

**CSS**

```
.container {
    min-height: 100%;
    display: -webkit-flex;
    display: flex;
    -webkit-flex-flow: row wrap;
    flex-flow: row wrap;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    padding: 1%;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    }   

    .container a {
        -webkit-flex: 1 1 48%;
        flex: 1 1 48%;
        margin: 1%;
        position: relative;

        -webkit-border-radius: 8px;
           -moz-border-radius: 8px;
                border-radius: 8px;

        -webkit-box-sizing: border-box;
                box-sizing: border-box;
        } 
```

我遇到了一个相当令人沮丧的问题，即这在 iOS 或 Android 上的 Chrome Mobile（适用于 Beta 版，不适用于当前版本）上**根本无法正常显示。**

基本上我正在寻找重新编写 CSS 以实现完全相同的布局，但我很难找到另一种方法来做到这一点，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:59:23.577

Beta 可能支持最近重新起草的功能（您在代码中使用），而较旧的浏览器（即当前不在 beta 中的浏览器！）采用不同的语法。[这里](http://css-tricks.com/old-flexbox-and-new-flexbox/ "这里")有一篇很好的文章。同时，[caniuse.com](http://caniuse.com/#search=flex "caniuse.com")非常适合快速检查什么支持什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:09:00.410

使用以下标记自己解决了这个问题。

**HTML**

```
 <div class="landingwrap">
        <div class="landingstrip">
            <div class="landingicon-wrap">
                <a Class="landingicon landingicon-tl">
                    <span class="icon"></span>
                </a>
            </div>
            <div class="landingicon-wrap">
                <a Class="landingicon landingicon-tl">
                    <span class="icon"></span>
                </a>
            </div>
        </div>
        <div class="landingstrip">
            <div class="landingicon-wrap">
                <a Class="landingicon landingicon-tl">
                    <span class="icon"></span>
                </a>
            </div>
            <div class="landingicon-wrap">
                <a Class="landingicon landingicon-tl">
                    <span class="icon"></span>
                </a>
            </div>
       </div>
  </div> 
```

**CSS**

```
body {
     background: #222;

}
.landingwrap {

    position: absolute;
    top: 5px;
    right: 5px;
    bottom: 5px;
    left: 5px;
}
.landingstrip {
    height: 50%;
}
.landingicon-wrap {
    float: left;
    position: relative;
    width: 50%;
    height: 100%;
}
.landingicon {
    background-color: #2aace2;
    position: absolute;
        top: 5px;
    right: 5px;
    bottom: 5px;
    left: 5px;
} 
```

工作一种享受。[JSFIDDLE](http://jsfiddle.net/blowsie/ch7n6/14/)

# php - 同一服务器上的两个数据库之间的 MSSQL LEFT JOIN，使用 PDO 时不返回任何内容

> ID：14567377
> 
> 赞同：4
> 
> 时间：2013-01-28T17:10:45.393
> 
> 标签：php, tsql, pdo, sql-server-2000

我正在使用 PDO 连接到 MS SQL 2000 数据库，并希望在同一 SQL 2000 服务器上创建与另一个数据库的左连接。此查询在 MSSQL 查询分析器上运行时返回正确的结果，并按我的预期从两个数据库中提取数据。

```
select t_job.pk_Job, t_JobSummary.Description, t_CarChecks.YesNo
from t_job
left join t_JobSummary on pk_Job=t_JobSummary.fk_Job
left join DATABASE2.dbo.t_CarChecks t_CarChecks on pk_Job=t_CarChecks.fk_Job
where t_JobSummary.Description_vc LIKE \'Cars %\' 
```

但是，当我从网页使用相同的查询时，没有返回任何结果。查询从网页开始工作，直到我将 LEFT JOIN 添加到第二个数据库，如果我如下所示注释掉该数据库，查询将返回结果，因此我可以确定（？！）问题出在 SQL陈述。

```
select t_job.pk_Job, t_JobSummary.Description --, t_CarChecks.YesNo
from t_job
left join t_JobSummary on pk_Job=t_JobSummary.fk_Job
--left join DATABASE2.dbo.t_CarChecks t_CarChecks on pk_Job=t_CarChecks.fk_Job
where t_JobSummary.Description_vc LIKE \'Cars %\' 
```

在这里和其他网站上阅读后，我为第二个数据库使用了别名，但我仍然没有得到任何结果。

我是 PDO 的新手，这让我很困惑。任何有用的指示（或让我知道这里有一个明显的错误），将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:35:02.357

感谢您的快速响应，但是，我发现了问题。与PDO完全无关，是数据库中第二张表的权限。来自 SQL Server 查询分析器的测试重新调整了结果，因为我对新表具有权限；我用来用 PDO 查询表的用户没有...

一个用于“再次在 Stack-Overflow 上发布之前检查此内容”笔记本...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T18:15:41.417

生命宇宙和 PDO 问题的终极问题的答案是

```
$dbh->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); 
```

连接后立即设置。
它会告诉你数据库中发生的任何错误

# asp.net-mvc-4 - ASP.NET MVC 授权角色，具有视图中的 HasAccesss

> ID：14567393
> 
> 赞同：3
> 
> 时间：2013-01-28T17:11:22.813
> 
> 标签：asp.net-mvc-4, authorization, roles

我们在`[Authorize (Roles="yadda, yadda2")]`控制器上使用该属性，我想知道是否有内置机制来发现它们是否可以从视图中访问？

```
[Authorize (Roles="System Administrator, Administrator")]
public abstract class OperationsBaseContoller : BaseController
{
    // omitted
}

// some view
@if(HasAccessTo<OperationsBaseController>())
{
   <a href="#somewhereInOperations">Operations Action</a>
   <a href="#anotherInOps">Example</a>
   <a href="#oneMore">filler</a>
} 
```

像上面这样的东西会很棒，这样我就可以避免渲染无论如何都无法传递给他们的链接。但是，我不想在视图中再次列出可用角色列表**，**`User.IsInRole("....")`因为这似乎是维护/重复代码的噩梦。我想如果他们给了我们这个属性，他们也给了一个内置的方法来从视图中检查它。

如果没有（我自己找不到），我会自己写，但想避免潜在的轮子改造。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T17:15:08.897

有一些有用的扩展方法可以做到这一点

```
Html.ActionAuthorized

Html.ActionLinkAuthorized 
```

发表于

[http://vivien-chevallier.com/Articles/create-an-authorized-action-link-extension-for-aspnet-mvc-3](http://vivien-chevallier.com/Articles/create-an-authorized-action-link-extension-for-aspnet-mvc-3)

> 在本文中，我将解释如何创建一个授权感知的操作链接扩展，以便我们可以根据其授权隐藏或禁用操作链接。

# sql-server - Crystal Reports 9 中的存储过程

> ID：14567396
> 
> 赞同：0
> 
> 时间：2013-01-28T17:11:44.427
> 
> 标签：sql-server, stored-procedures, crystal-reports

> **可能重复：**
> [Crystal Reports 未显示存储过程输出](https://stackoverflow.com/questions/14577704/crystal-reports-not-showing-stored-procedure-outputs)

我在 SQL Server 中创建了一个存储过程。它在那里工作得很好。

当我从 Crystal Reports 调用它时，它会显示参数字段，但不会显示数据库字段中的输出。实际上，它在数据库字段中显示存储过程，而不是在存储过程旁边的输出字段或 + 号。

请帮我做，因为我不专业，请一步一步说我该怎么做

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:12:42.580

不要将结果作为输出参数返回，而是尝试将它们包含`select`在过程末尾的语句中 - 例如：

```
select @result1, @result2, @result3 
```

# node.js - 向远程 URL 发出 UDP 请求

> ID：14567399
> 
> 赞同：2
> 
> 时间：2013-01-28T17:11:50.557
> 
> 标签：node.js

我想将消息发送到 UDP 套接字，我在谷歌上搜索，`http.request`但我刚刚意识到它只在`http`协议上使用（或者是它？）。如何在 node.js 中发出 UDP 请求？我来自 PHP，我以前只使用`fsockopen`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:13:38.567

[http://nodejs.org/api/dgram.html](http://nodejs.org/api/dgram.html)

任何 HTTP 都将始终是 TCP，因为 HTTP 依赖于有保证的消息传递。

# jquery - 如何通过 OpenWeatherAPI 使用 JSONP GET 请求？

> ID：14567402
> 
> 赞同：2
> 
> 时间：2013-01-28T17:11:59.070
> 
> 标签：jquery, json, callback, jsonp

我正在尝试使用[OpenWeatherAPI](http://openweathermap.org/wiki/API/2.0/JSON_API)`get`使用 JQuery请求执行获取 JSONP 数据。我的查询结构如下：

```
function getWeather(callback) {
    var weather = 'http://openweathermap.org/data/2.1/find/city?lat=13.3428&lon=-6.2661&cnt=10&jsoncallback=?';
    jQuery.getJSON(weather, callback);
}

// get data:
getWeather(function(data){
    console.log('weather data received');
}); 
```

我收到以下错误消息：

> 语法错误：标签无效

但是，数据正在返回，因为我可以在 Firebug 中单击它，它给了我预期的结果。我在客户端执行这一切，所以我的 JSONP 请求可能有一个基本错误。搜索此主题还表明返回的数据可能是 JSON 格式而不是 JSONP，但我不确定有什么区别。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T17:38:39.577

如果您使用的是 jQuery，则可以使用内置的 JSONP 功能为您处理回调。只需使用 $.ajax 代替，如下所示：

```
function getWeather(callback) {
    var weather = 'http://openweathermap.org/data/2.1/find/city?lat=13.3428&lon=-6.26612&cnt=10';
    $.ajax({
      dataType: "jsonp",
      url: weather,
      success: callback
    });
}

// get data:
getWeather(function (data) {
    console.log('weather data received');
    console.log(data.list[0].weather[0].description);
}); 
```

jsfiddle：http: [//jsfiddle.net/wCjW3/1/](http://jsfiddle.net/wCjW3/1/)

参考：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T17:21:00.563

看起来api说你应该在url中使用`callback`而不是作为参数。`jsoncallback`

[在此处的表格中进行了描述](http://openweathermap.org/wiki/API/2.0/JSON_API)

> callback - JSONP 回调的函数名。[http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)

以下代码对我有用：

```
$.getJSON('http://openweathermap.org/data/2.1/find/city?lat=13.3428&lon=-6.2661&cnt=10&callback=?', function(data) { console.log(data); }); 
```

# reporting-services - 无法重新生成报告：渲染扩展时出现 ReportProcessingException

> ID：14567405
> 
> 赞同：3
> 
> 时间：2013-01-28T17:12:06.150
> 
> 标签：reporting-services, ssrs-2008, reporting

我可以在 SSRS 2008 中生成报告，但是当我尝试再次生成它时，它将失败，并出现以下异常。然而，它会在 SSRS 重新启动后再次工作。什么配置选项可能会影响这一点？（我已经添加了所有必要的扩展。）

> 处理中！ReportServer_0-1！1ef4！01/28/2013-16:39:41::
> 
> 错误：抛出 Microsoft.ReportingServices.ReportProcessing.ReportProcessingException：您尝试使用未为此报表服务器注册或此版本的 Reporting Services 不支持的呈现扩展插件。，；
> 
> 信息：Microsoft.ReportingServices.ReportProcessing.ReportProcessingException：您尝试使用未为此报表服务器注册或此版本的 Reporting Services 不支持的呈现扩展插件。图书馆！ReportServer_0-1！1ef4！01/28/2013-16:39:41::
> 
> 警告：Microsoft.ReportingServices.ReportProcessing.ReportProcessingException：您尝试使用未为此报表服务器注册或此版本的 Reporting Services 不支持的呈现扩展插件。
> 在 Microsoft.ReportingServices.ReportProcessing.ReportProcessing.CreateRenderer(String format, IRenderingExtension& newRenderer)
> 在 Microsoft.ReportingServices.ReportProcessing.ReportProcessing.RenderSnapshot(RenderingContext rc, ProcessingContext pc, GetResource getResourceCallback)
> 在 Microsoft.ReportingServices.Library.RenderFromSnapshot.DoRendering(ProcessingContext pc , RenderingContext rc)
> 
> 在 Microsoft.ReportingServices.Library.RenderStrategyBase.ExecuteStrategy (OnDemandProcessingResult& processingResult) 在 Microsoft.ReportingServices.Library.RenderFromSnapshot.CallProcessingAndRendering(ProcessingContext pc, RenderingContext rc, OnDemandProcessingResult& result )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:21:56.163

似乎 SSRS 正在尝试加载包含一些报告呈现功能的程序集（可能是您添加的一些图表）？

如果是这种情况，[本文](http://support.microsoft.com/kb/920769)将介绍如何使用 SSRS 注册 DLL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:17:17.650

原来问题是 SQL Web 版不支持 html 扩展。您至少需要标准。为什么它曾经奏效仍然是个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-27T10:25:00.200

在我们的案例中，问题是我们通过 API 请求报告并尝试将报告从 HTML 转换为不同的呈现扩展。而且，不幸的是，特定的 Reporting Services 实例的配置文件尚未配置\扩展以支持请求的呈现格式。

在 MS SQL Server 2008-R2 中，配置文件位于类似于以下的目录结构中：

```
 E:
   \Program Files
      \Microsoft SQL Server
         \MSRS10_50.MSSQLSERVER_RS
            \Reporting Services
               \ReportServer 
```

而且，实际的文件名是 rsreportserver.config

在配置文件中，找到“渲染”部分：

< 配置 >

< 扩展 >

< 渲染 >

在“渲染”部分中，找到相应的“扩展”条目。如果未找到扩展名，请添加：

# javascript - 如何使文本在 JQuery 幻灯片下方移动

> ID：14567406
> 
> 赞同：0
> 
> 时间：2013-01-28T17:12:09.490
> 
> 标签：javascript, jquery, html, css

我正在制作一个 JQuery 切换/滑动类型菜单，并希望在 JQuery 向下滑动时移动下面的文本。

由于我是新手，我的代码可能会很乱。我提前为此道歉，但它几乎按照我需要的方式工作。

请在[此处查看实际代码](http://chadi.rhpmgroup.com.au/criminal_charges/testjquery.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:19:33.890

只需将文本放在自己的位置`div`

```
<div id="textId">
    <!-- text elements here -->
</div> 
```

然后使用下面的css

```
#textId {
    float: left;
    position: relative; 
    clear: both;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:19:36.557

发生这种情况是因为您正在浮动两个滑块，使它们脱离正常的文档流。您可以对它下面的内容执行此操作：

```
<article>
    <h2>Lorem Ipsum</h2>
    <h3>Vestibulum tortor quam</h3>
    <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante.  </p>
</article> 
```

然后用 CSS 防止它允许浮动：

```
article{
    clear: both;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T17:24:02.367

您在关闭`<ul>`元素时遇到问题，重新打开它：

这个：

```
<ul>
    <li>Possession or use of Firearm without Licence Permit</li>
    <li>Unregistered Firearm</li>
    <li>Not keep Firearm Safe</li>
    <li>Discharge Firearm</li>
<ul> 
```

应该：

```
<ul>
    <li>Possession or use of Firearm without Licence Permit</li>
    <li>Unregistered Firearm</li>
    <li>Not keep Firearm Safe</li>
    <li>Discharge Firearm</li>
</ul> 
```

然后清除 div 浮动：

[这是一个工作示例。](http://jsfiddle.net/dAeD5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T17:19:26.357

在菜单下方添加周围的内容。

然后使用以下 css 向 div 添加一个类：

```
clear: both; 
```

编辑：确切地说，在#sliderright div 之后和开始Criminal Charges 元素之前，放置一个

```
<div style="clear:both;"></div> 
```

# python - 在 Python 中按长度（以字节为单位）拆分值中的数组

> ID：14567424
> 
> 赞同：2
> 
> 时间：2013-01-28T17:13:02.333
> 
> 标签：python, split, tornado

我有一个传感器系统。传感器从我那里接收命令，做一些事情，然后向我发送响应。

响应是这样的：

```
seq. number |   net_id  |   opcode_group |  opcode | payloadlength    |   val 
```

我有这些值由空格字符分隔。

现在我想取最后一个名为`val`. 在这一部分中，我有所有我想知道的信息来详细说明传感器的响应。

例如，对于想知道传感器的 IEEE MAC 地址的命令，我有以下响应：

![回复](../Images/6d57187490c6b739e83c041d4663fc50.png)

在这种情况下，`val`是响应中的所有字段`Length`。没有分离，但我有一种字符串。

我所要做的就是拆分这个数组/数字字符串，只知道每个字段的长度。例如。状态为 1 个字节，MAC 地址为 8 个字节，以此类推……

我的代码是这样的：

```
if response.error:
        ret['error'] = 'Error while retrieving unregistered sensors'
    else:
        for line in response.body.split("\n"):
            if line != "": 
                value = int(line.split(" ")[6])

    ret['response'] = value
    self.write(tornado.escape.json_encode(ret))
    self.finish()               

    if command == 'IDENTIFY':
        status = value.split(" ")[0]
        IEEEAddrRemoteDev = value.split(" ")[1]
        NWKAddrRemoteDev = value.split(" ")[2]
        NumOfAssociatedDevice = value.split(" ")[3]
        StartIndex = value.split(" ")[4]
        ListOfShortAddress = value.split(" ")[5]
        if status == 0x00:
            ret['success'] = "The %s command has been succesfully sent! \
            IEEE address: %s" % % (command.upper(), IEEEAddrRemoteDev)
            self.write(tornado.escape.json_encode(ret))
        elif status == 0x80:
            ret['success'] = "Invalid Request Type"
            self.write(tornado.escape.json_encode(ret))
        elif status == 0x81:
            ret['success'] = "Device Not Found"
            self.write(tornado.escape.json_encode(ret)) 
```

在第一部分中，我从整个响应中获取第 6 个值并将其放入变量中`value`。在此之后，我想在每个组件中拆分这个变量。

例如。这个`status = value.split(" ")[0]`我要怎么分？？？？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:25:36.777

该字段的确切格式是什么`val`（即`value`代码中的内容）？它是一个字符串吗？一个字节序列？

如果它是一个字符串，你可以使用：

```
 status = value[0]
   IEEEAddrRemoteDev = value[1:8]
   NWKAddrRemoteDev = value[9:2]
   NumOfAssociatedDevice = value[11:1]
   StartIndex = value[12:1]
   ListOfShortAddress = value[13:2*NumOfAssociatedDevice] 
```

如果它是一个字节序列，那么您可以使用`struct.unpack()`-see [here](http://docs.python.org/2/library/struct.html?highlight=struct.unpack#struct.unpack)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:47:10.570

问题是您将其视为 Python 字符串，但它只是一堆位。

您需要使用[**`struct.unpack`**](http://docs.python.org/2/library/struct.html?highlight=struct.unpack#struct.unpack)来拆分这些。

# jquery - Slidesjs双打图像

> ID：14567427
> 
> 赞同：0
> 
> 时间：2013-01-28T17:13:25.227
> 
> 标签：jquery, css, slideshow

我目前正在使用 SlidesJS 进行图像幻灯片放映。当我请求网页时，由于某种原因，第一张幻灯片被下载了两次，这占用了一些带宽。我不知道为什么会这样......它与jquery有关。

![图像被请求两次](../Images/d389191f62f511e981792ff58099ba28.png)

编辑：这个例子也发生了（使用 F12 作为代码）[例子](http://slidesjs.com/examples/standard/)

# c# - 为 XSD 文件的加载批量生成示例 xml

> ID：14567430
> 
> 赞同：1
> 
> 时间：2013-01-28T17:13:32.977
> 
> 标签：c#, java, c++, xml, xsd

我需要从 xsd 生成示例 xml 来测试目的，而 XMLSpy 可以很好地完成这项工作！

但我不想一个一个地做，我希望能够批量做，因为我有 XSD 文件的负载，每当我对这些 XSD 文件进行一些更改时，我希望能够轻松生成 xml再次来自 XSD 文件。

这个工作有 API 吗？C++, C#, java, python 我不在乎，只要它能工作。

或者有什么简单的方法吗？

顺便说一句，我知道我可以使用 xsd 工具生成 c# 类，然后编写几行 c# 代码来提供一些数据来生成 xml，但是这样我需要为每个 XSD 提供我真的不想的数据...

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:28:39.113

您可以使用开源 Java 项目[XMLBeans中的 xsd2inst 命令](http://xmlbeans.apache.org/)

用法在[这里](http://xmlbeans.apache.org/docs/2.0.0/guide/tools.html#xsd2inst)。

另请查看：[如何从其 DTD 或 XSD 生成示例 XML 文档？](https://stackoverflow.com/questions/17106/how-to-generate-sample-xml-documents-from-their-dtd-or-xsd/)

# mysql - 如何对重复记录进行 SQL 查询？

> ID：14567435
> 
> 赞同：0
> 
> 时间：2013-01-28T17:13:45.120
> 
> 标签：mysql, sql, duplicates

我需要执行 SQL 查询来创建一个列出同名测验的表。这是我到目前为止的查询代码：

```
$sql = "SELECT a.name, a.id FROM tests a 
        INNER JOIN tests b 
        ON a.tests = b.tests WHERE a.id <> b.id";
$result = mysql_query($sql, $conn); 
```

但是我没有得到任何结果 - 我确保手动检查数据库并且肯定有重复。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T17:15:39.343

我认为最简单的方法是然后分组并使用过滤它`HAVING`

```
SELECT Name, COUNT(*) totalCount
FROM tests
GROUP BY Name
HAVING COUNT(*) > 1 
```

# android - 做多少款式？

> ID：14567436
> 
> 赞同：0
> 
> 时间：2013-01-28T17:13:45.390
> 
> 标签：android, android-layout, android-screen-support

我的任务是为 android 设备的每个屏幕制作不同的样式。例如：values-small-nodpi、values-small-ldpi、values-small-mdpi ... values-normall-nodpi、values-normall-ldpi ... 总结 28 种不同的风格。做这么多样式是正确的，还是只做值-小，值-正常...就足够了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:20:12.397

这取决于您要达到的目标。

例如，对于字符串，您可能只有一个版本。这是我猜的，很明显。

对于字体大小，您只能使用几个存储桶。说，小，正常，大和超大。

对于尺寸，即，您可能会用于视图的尺寸，或者说边距或填充，您可以再次只使用几个桶（ldpi、mdpi、hdpi 等）

我看不出您必须为每个资源创建 28 个副本的原因。仅处理几个存储桶将确保您将针对几乎所有设备。

正如@Davhed 提到的那样，这样做会不必要地增加您的 apk 大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:19:50.440

根据需要做样式是正确的。没有必要（也几乎不可能）拥有所有可能的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T17:19:15.190

谷歌有关于这个主题的非常全面的文档。请参阅此链接：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

这取决于您的需求，但如果您针对每个 DPI 变体设定最低分辨率，则应该没问题。如果您有每个图形的 28 个版本，您的应用程序最终将是一个非常大的文件大小。

# android - 将 Appcelerator 云服务集成到使用 ASP.NET 制作的自定义网站

> ID：14567444
> 
> 赞同：0
> 
> 时间：2013-01-28T17:14:10.070
> 
> 标签：android, asp.net, titanium

我对移动世界真的很陌生，所以我想从有经验的人那里得到一些意见。在互联网上搜索了几天后，我想知道是否可以将 Appcelerator 云服务集成到使用 ASP.NET 制作的自定义网站中。虽然我的移动应用程序是用 Titanium 构建的，它链接到 ACS，并且工作正常，但我不知道是否可以从自定义网站管理存储在 ACS 中的数据。澄清一下，一方面是我的移动应用程序与网络服务器（例如 ACS）对话，另一方面是一个网站，用于管理存储在 ACS 中的数据。你怎么看，有人做到了这一点？还是最好从头开始编写网络服务器，将我的数据存储在某个地方，然后忘记 ACS？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:36:58.250

Appcelerator 说

> Appcelerator 云服务 (ACS) 是一种移动后端即服务 (MBaaS)，提供了一种快速简便的方法来构建连接的移动应用程序。从推送通知、状态更新、照片存储和社交集成等服务库中进行选择，或创建您自己的自定义云服务。

在此页面 -[入门：使用 Javascript SDK](http://cloud.appcelerator.com/docs/javascript#) - 您可以了解我们如何使用 javascript SDK，它允许您通过一些简单易用的 JavaScript 调用访问 Appcelerator 云服务服务器。您可以使用它来开发基于 Web 的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:56:50.393

ACS 有一个 REST API，您可以通过任何支持 xhr（.NET 支持）的东西来访问它。例如，要在 ACS 中创建新用户，请使用以下链接：

[https://api.cloud.appcelerator.com/v1/users/create.json?key=YOUR](https://api.cloud.appcelerator.com/v1/users/create.json?key=YOUR) APP APP KEY?email=john.smith@company.com&role=teacher

您可以将其他属性标记到查询字符串上，以通过 REST 调用创建新用户。他们有一个使用 REST 的完整 API。这一切都记录在案。您甚至可以使用 REST API 从您的自定义网站向设备发送推送通知！它太酷了。

[http://cloud.appcelerator.com/docs/api/v1/users/create#rest](http://cloud.appcelerator.com/docs/api/v1/users/create#rest)

祝你好运！

# greasemonkey - 使用 Greasemonkey 脚本隐藏以前查看的图像

> ID：14567447
> 
> 赞同：0
> 
> 时间：2013-01-28T17:14:16.690
> 
> 标签：greasemonkey

我正在尝试编写一个 Greasemonkey 脚本，该脚本将隐藏我已经看过的[Google 图片搜索](http://images.google.com/)中的图片（这样在进行多次搜索时，我不会在搜索结果中两次显示相同的图片。）有什么办法吗使用 Greasemonkey 脚本从搜索结果中获取图像列表，以便我可以防止图像在查看后加载？为了做到这一点，我需要找到一种方法来防止在之前查看过图像后加载它们。

```
var blockedImageList = new Array();

function blockImages(imageList){
    //prevent images from loading if they are on the blocked image list,
                                      //which is an array of image URLs
}

function getAllImagesFromPage(){
    //add all of the images on the current page to the blocked image list.
} 
```

# c++ - C++——函数返回模板类型的向量

> ID：14567450
> 
> 赞同：2
> 
> 时间：2013-01-28T17:14:30.490
> 
> 标签：c++, templates, vector, compilation

> **可能重复：**
> [为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

我在编译返回模板类型向量的函数时遇到问题。如果我删除模板并替换为`double`. 此外，仅当函数定义和原型不在同一个文件中时，才会出现此问题。我编译使用：

```
g++ func.cpp main.cpp 
```

主.cpp：

```
#include <vector>
#include "func.h"

int main(int argc, char** argv)
{
    double x_min = 0.0;
    double x_max = 1.0;
    int N = 20;
    std::vector<double> x = linspace(x_min,x_max,N);

    return 0;
} 
```

函数.cpp：

```
#include "func.h"

template <class T>
std::vector<T> linspace(T x1, T x2, int N)
{
    std::vector<T> x(N);
    if(N == 1)
    {
        x[0] = x2;
        return x;
    }

    T delta_x = (x2-x1)/(N-1);

    for(int ii = 0; ii < N; ii++)
    {
        x[ii] = x1 + ii*delta_x;
    }

    x[N-1] = x2;
    return x;
} 
```

函数.h：

```
#include <vector>

template <class T>
std::vector<T> linspace(T x1, T x2, int N); 
```

编译器产生以下输出：

```
/tmp/cclptwq7.o: In function `main':
main.cpp:(.text+0x45): undefined reference to `std::vector<double, std::allocator<double> > linspace<double>(double, double, int)'
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:16:15.627

模板类不应拆分为`.hpp`文件`.cpp`。

成员函数实现也必须包含在编译单元（例如，您的`main.cpp`）中，否则编译器无法知道如何使用您作为模板参数提供的类型构建模板类。你*也*可以`#include "func.cpp"`in `main.cpp`，但这会很丑陋。

正如大卫建议的那样，如果您好奇， [https://stackoverflow.com/a/3040706/713961会为您提供更多信息。](https://stackoverflow.com/a/3040706/713961)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:16:47.780

模板必须在同一个文件中定义，否则会出现链接器错误。有关更多信息，请参阅[此答案](https://stackoverflow.com/a/3040706/701092)。

# c++ - 检查类型是否使用多重继承

> ID：14567453
> 
> 赞同：1
> 
> 时间：2013-01-28T17:14:36.523
> 
> 标签：c++, templates

我有这些课程：

```
class A{};
class B{};
class C : public A{};
class D : public A, public B{}; 
```

我想做一个这样的模板函数：

```
template<typename T>
void f(T* arg); 
```

并为它制作2个专业：

*   当 T 不使用继承或使用单继承时的一种
*   当 T 使用多重继承时

假设`f_specialization1()`是第一种情况和`f_specialization2()`（我知道嘿必须有相同的名字，这只是一个方便的约定）。我想要这种行为：

```
A a;
B b;
C c;
D d;

f(&a);//here f_specialization1 is called
f(&b);//here f_specialization1 is called
f(&c);//here f_specialization1 is called
f(&d);//here f_specialization2 is called 
```

是否有可能实现这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:37:10.593

虽然我不知道您的意图并同意预期的行为应该包含在问题中以获得更好的设计解决方案，但实现您要求的一个简单机制是创建一个空白接口，您的所有多重继承的类也必须继承from 和 to 专门用于该 MultipleInheritance “接口”。

```
class MultipleInheritance
{
protected:
    MultipleInheritance() {}
};

class A{};
class B{};
class C : public A{};
class D : public A, public B, public MultipleInheritance {};

template<>
void f(MultipleInheritance* arg);

template<typename T>
void f(T* arg); 
```

但是，我个人认为这将非常需要根据设计约束进行重新设计，并且它确实不允许您做很多有用的事情，因为使用了其他无用的类型来选择此功能专业化。

# filter - 谷歌分析 - 包括过滤器 nto 工作

> ID：14567454
> 
> 赞同：1
> 
> 时间：2013-01-28T17:14:37.073
> 
> 标签：filter, include, google-analytics

今天早上我刚刚在我的域 (test.org) 中添加了一个包含过滤器。我有

自定义过滤器 > 包含 > 请求 URI > ^/test-a/46212$|^/test-a/46212|^/test-a/46315

现在，在我转到“内容”>“网站内容”>“所有页面”后，我会看到我的过滤器中未包含的其他页面的统计信息。例如，我看到 /somethingelse。我只想查看 /test-a/46212 的统计信息以及过滤器中的其他任何内容。

请让我知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T18:33:24.503

我知道您可能已经继续前进，但我一直在努力解决与您所看到的类似的行为一段时间（谷歌似乎没有注意到我的过滤器的变化）。

根据我的测试，对预定义过滤器的更改似乎很快（立即）生效，但根据谷歌的网站（[https://support.google.com/ ），对](https://support.google.com/analytics/answer/1638635?hl=en)*自定义过滤器的更改可能需要“几个小时”* [analytics/answer/1638635?hl=en](https://support.google.com/analytics/answer/1638635?hl=en)）。我不确定“几个小时”到底有多长。对于我的一个过滤器，我昨天下午设置了它，今天早上它终于可以工作了。对于另一个配置文件，我在大约 20 小时前更改了过滤器，但该配置文件仍然没有显示过滤器所指示的内容。

延迟使调试过滤器变得很痛苦，因为当出现问题时，您无法确定您的过滤器是否错误，或者谷歌是否尚未应用它（或者谷歌方面是否存在错误对于特定的过滤器）...

无论如何，我希望这对可能正在努力使用谷歌分析过滤器的其他人有所帮助。

# knockout.js - 带有 Knockout 绑定的 Wijmo Grid 似乎在更新时重绘了整个表格？

> ID：14567460
> 
> 赞同：1
> 
> 时间：2013-01-28T17:14:54.697
> 
> 标签：knockout.js, knockout-2.0, wijmo

我需要在 Wijmo Grid 中一次更新一个单元格。我正在使用填充表格和更新单元格的 Knockout 绑定，但似乎每当我更改表格中某个元素的 Knockout 值时，都会重绘整个表格，而不仅仅是更改单个单元格。

有没有办法使用 Knockout 更新表格中的单个单元格，而无需在每次更新时重新绘制整个表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:33:10.367

这似乎是网格的默认行为，因为可能有其他字段可能绑定到同一个 observable。我发现以下论坛帖子更详细地讨论了这个问题：[http](http://wijmo.com/topic/highlight-single-cell-updates-with-knockback) ://wijmo.com/topic/highlight-single-cell-updates-with-knockback 。希望这可以在不久的将来被纳入。

# python - Django：顶级项目文件夹=根（好短名称），非顶级项目文件夹=？（需要漂亮的短名称）

> ID：14567466
> 
> 赞同：2
> 
> 时间：2013-01-28T17:15:22.850
> 
> 标签：python, django, naming-conventions

```
my_project(1)
├── my_project(2)
│   ├── __init__.py
│   ├── settings.py
│   ├── urls.py
│   └── wsgi.py
└── manage.py 
```

用于区分`my_project`文件夹的名称：
`my_project`(1)
*顶级项目文件夹*
*项目根文件夹*
*Root*

`my_project`(2)
*非顶级项目文件夹*

*开发人员有时会为非顶级文件夹*使用另一个名称吗？*项目根*/*root* 是一个比较简短明了的名字。**我认为使用类似长度的名称来指示另一个（非根）文件夹会很有用**。（例如*项目分支*（但这可能会与*git 分支*混淆））。

对于那些说“只使用*项目文件夹*和*项目根目录*”的人：假设不需要提及根文件夹并且您想立即解决*非根文件夹*？您必须使用*非顶级文件夹*或在其中/旁边列出至少一个文件或目录才能完全清楚。

## 编辑

此处将列出尝试取个好名字的尝试：
-`secondary`否则`secondary_dir`我必须将 my 重命名`root`为`primary`/ `primary_dir`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:15:39.647

我通常会做这样的事情：

```
andrews_app
├── andrews
│   ├── __init__.py
│   ├── settings.py
│   ├── urls.py
│   └── wsgi.py
├── another_module
│   ├── __init__.py
│   ├── models.py
│   ├── tests.py
│   ├── views.py
│   └── urls.py
└── manage.py 
```

# asp.net-mvc - MVC 3 - 传入字典的模型项的类型为“System.Collections.Generic.List”1

> ID：14567467
> 
> 赞同：0
> 
> 时间：2013-01-28T17:15:24.917
> 
> 标签：asp.net-mvc, linq

嗨，我对 mvc 很陌生，需要帮助我创建了这个

```
public ActionResult Index()
        {
            var joblist = (from s in _entities.TaleoJobs
                           group s by new { s.JobTitle}
                               into myGroup
                               where myGroup.Count() > 0
                               select new { myGroup.Key.JobTitle }
                               );
            return View(joblist.ToList()); 
        } 
```

但是当我创建视图时出现以下错误

> 传入字典的模型项的类型为“System.Collections.Generic.List `1[<>f__AnonymousType0`1[System.String]]”，但此字典需要类型为“System.Collections.Generic.IEnumerable`1[careers.TaleoJobs”的模型项]'。

这是视图的代码

```
*@model IEnumerable<careers.TaleoJobs>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h2>Index</h2>
<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>

        <th>
            JobTitle
        </th>

    </tr>
@foreach (var item in Model) {
    <tr>

        <td>
            @Html.DisplayFor(modelItem => item.JobTitle)
        </td>

    </tr>
}
</table>* 
```

如果有人可以提供帮助，我将不胜感激 - 尝试查看其他示例，但我不知所措。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:18:22.100

当您选择列表时，您只选择了 JobTitle，它是一个字符串。所以你的清单确实是一个`List<string>`.

您可以更新您的选择以选择整个对象：

```
var joblist = (from s in _entities.TaleoJobs
                           group s by new { s.JobTitle}
                               into myGroup
                               where myGroup.Count() > 0
                               select s
                               ); 
```

或者，保留当前选择并将视图类型更新为：

```
IEnumerable<string> 
```

# java - 如何将微调器与我的转换器连接

> ID：14567469
> 
> 赞同：1
> 
> 时间：2013-01-28T17:15:30.370
> 
> 标签：java, android, spinner

1.  **我需要将微调器与 editText 连接以获得转换器的结果**

    微调器和我的转换器之间没有连接。

    ```
    public class A01Acre extends Activity {
        Spinner spinnerarea;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.a01acre);  

            final    EditText editAcre = (EditText) findViewById(R.id.editAcre);        
            final    EditText editHectar = (EditText) findViewById(R.id.editHectar);        
            final    EditText editSquareinch = (EditText) findViewById(R.id.editSquareinch);
            final    EditText editSquarekm = (EditText) findViewById(R.id.editSquarekm);
            final    EditText editSquaremeter = (EditText) findViewById(R.id.editSquaremeter);
            final    EditText editSquaremile = (EditText) findViewById(R.id.editSquaremile);
            final    EditText editSquareyard = (EditText) findViewById(R.id.editSquareyard);

            Button buttonConvert = (Button) findViewById (R.id.buttonConvertAcre);
            buttonConvert.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    //try
                    try {
                        //    
                        double acre = Double.valueOf (editAcre.getText().toString());
                        double hectar = acre * 0.404686;
                        double squareinch = acre * 6.273e+6;
                        double squarekm = acre * 0.00404686;
                        double squaremeter = acre * 4046.86;
                        double squaremile = acre * 0.0015625;
                        double squareyard = acre * 4840;

                        editHectar.setText (String.valueOf(hectar));
                        editSquareinch.setText (String.valueOf(squareinch));
                        editSquarekm.setText (String.valueOf(squarekm));                    
                        editSquaremeter.setText (String.valueOf(squaremeter));
                        editSquaremile.setText (String.valueOf(squaremile));                    
                        editSquareyard.setText (String.valueOf(squareyard));        

                        //catch
                    } catch (NumberFormatException ex) {
                        // write a message to users
                        editHectar.setText ("");
                    }
                }

            });

            spinnerarea = (Spinner) findViewById(R.id.spinnerarea);

            ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
                    this, R.array.spinnerTestArray, android.R.layout.simple_spinner_item);
            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            spinnerarea.setAdapter(adapter);
            spinnerarea.setOnItemSelectedListener(new MyOnItemSelectdListerne());
        }

        @Override
        public void onDestroy(){
            super.onDestroy();
        }

        public class MyOnItemSelectdListerne implements OnItemSelectedListener {

            @Override
            public void onItemSelected(AdapterView<?> patent,
                    View view, int pos, long id) {
                String str = patent.getItemAtPosition(pos).toString().toUpperCase();
            }

            @Override
            public void onNothingSelected(AdapterView parent) {

            }
        }
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:40:31.370

在您的方法中添加一个 switch 语句`onItemSelected()`- 开启`pos`。

对于每个单位（每个`case`），您可以重新计算，然后将值输出给用户。

就像是，

```
switch(pos) {
    case 0:
        //acre - redo calculation
        break;
    case 1:
        //hectare - redo calculation
        break;
    case 2:
        //squareinch - redo calculation
        break;
    //...
    default:
        throw new UnexpectedException();
}

//display results to user 
```

# php - 如何摆脱网页顶部的空白？

> ID：14567479
> 
> 赞同：0
> 
> 时间：2013-01-28T17:15:54.520
> 
> 标签：php, html, web, whitespace

我正在用 PHP 开发一个网站，但有一件事让我很烦恼。网页开始前有很多空白`<!DOCTYPE html>`。看看我的网页和谷歌主页的源代码截图：

![我的网页](../Images/b8288e3ffd553a3cafd49b5fc559f745.png)

![谷歌的主页](../Images/fcc0e26875de76307d9691b79b961a4a.png)

这真的很烦人。我不知道是什么让这些行在应该在第 1 行时跳到第 6 行。

我的网页的源代码是 -

```
<?php
header('Content-Type: text/html');
require_once 'core.php';
$index=new Index();
$index->run('home', array('file.js', 'script.js', 'main.js'), array('style.css'));
?>
<!DOCTYPE html>
<!-- rest of the DOM here --> 
```

我认为一定有一些`echo`东西在`core.php`打印一些空白，但事实并非如此。以前没有`echo`ing `<!DOCTYPE html>`。

怎么了？请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:18:07.700

请记住，没有“php 脚本”之类的东西。只有文件中嵌入了 PHP 代码块。以下文件将输出 4 个空白行，即使其中绝对没有“echo”/“print”调用：

```
<?php
    // this is just a useless comment
?>

<?php
    /// and another useless comment, 4 lines later
?> 
```

**括号对之外的**任何**`<?php ?>`文本都被 PHP 引擎视为输出。**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T17:20:32.663

这很有可能是由包含的 PHP 文件末尾的空格引起的（假设“core.php”包含许多其他文件）。解决这个问题的最简单方法（通常也是最佳实践）是省略`?>`PHP 文件末尾的 final。无论如何它是可选的。

您可以尝试诊断此问题的另一件快速事情是将您的（不必要的）`header()`调用向下移动一行，使其位于 core.php 包含的下方。如果此脚本导致浏览器输出，您将收到标准的 PHP 'headers sent' 错误，它将告诉您输出开始的位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T17:20:36.147

core.php（或它包含的任何文件）在 final 之后是否有空行`?>`？

如果是这样，请删除`?>`. 最好`?>`在文件末尾隐含final。

否则，只需开始平分您的代码库，直到您可以确定添加它的内容。**

# c# - c# dot net 的库文件

> ID：14567480
> 
> 赞同：1
> 
> 时间：2013-01-28T17:15:54.973
> 
> 标签：c#, asp.net

我是一个相对较新的 c#.net 程序员，需要一些关于将库文件添加到 ac# 项目的建议。

这个项目没有以适当的 C# 方式完成，我意识到这一点，但我今天不想解决这个问题。

我有 3 个 .aspx 页面，每个页面都有一个对应的 .cs 文件设置为后面的代码。这一切都很好。

每个 .cs 文件都有几个相同的功能。我想将这些通用函数移动到一个通用的 .cs 文件中，该文件由所有 .aspx 页面（或 .cs 文件，如果这样做的话）使用，同时保留文件后面的唯一代码，以用于唯一的函数那个 aspx/cs 对。

一旦创建了公共文件（它已经是），我如何尽可能简单地引用该文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:20:25.357

您的项目应该有一个 App_Code 文件夹。Visual Studio 将自动在此位置查找类。如果将公共类放在该文件夹中，则可以直接在 .aspx.cs 代码隐藏文件中访问该类。

无需添加任何引用。

# php - Yii 验证码不变

> ID：14567482
> 
> 赞同：2
> 
> 时间：2013-01-28T17:16:04.927
> 
> 标签：php, yii

我的验证码没有改变，总是出现相同的单词，除非点击`Reload Captcha`按钮。为什么`testLimit`不能正常工作？

控制器.php

```
public $attempts = 5; // allowed 5 attempts
public $counter;

public function actions()
{
    return array(
        'captcha'=>array(
        'class'=>'CCaptchaAction',
        'backColor'=>0xf5f5f5,
        'testLimit'=>1,
    );
}

private function captchaRequired()
{           
    return Yii::app()->session->itemAt('captchaRequired') >= $this->attempts;
}

public function actionLogin()
{
    if (!Yii::app()->user->isGuest) $this->redirect(array('users/update'));

    $model = $this->captchaRequired()? new LoginForm('captchaRequired') : new LoginForm;

    // collect user input data
    if(isset($_POST['LoginForm']))
    {
        $model->attributes=$_POST['LoginForm'];
        // validate user input and redirect to the previous page if valid
        if($model->validate() && $model->login()) {
            $this->redirect(array('users/update'));
        } else {
            $this->counter = Yii::app()->session->itemAt('captchaRequired') + 1;
            Yii::app()->session->add('captchaRequired',$this->counter);
        }
    }
    // display the login form
    $this->render('login',array('model'=>$model));
} 
```

查看.php

```
<?php if($model->scenario == 'captchaRequired'): ?>
    <br>
    <legend><?php echo CHtml::activeLabelEx($model,'verifyCode'); ?></legend>
    <div class="control-group">
        <div class="controls">
            <?php $this->widget('CCaptcha'); ?>
            <?php echo CHtml::activeTextField($model,'verifyCode'); ?>
        </div>
    </div>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-13T23:52:39.613

`testLimit`是验证码提交的数量，用户可以在生成的哈希更改之前尝试。用于避免拼写错误。

验证会话中的代码存储（[http://www.yiiframework.com/doc/api/1.1/CCaptchaAction#getVerifyCode-detail](http://www.yiiframework.com/doc/api/1.1/CCaptchaAction#getVerifyCode-detail)），因此默认代码只能通过以下两种方式之一更改：`testLimit`使用错误代码提交表单，或由用户手动更新。

所以你可以扩展 CCaptchaAction 类来实现你想要的，fg 强制设置`$regenerate`变量为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-06T15:17:37.693

很简单的解决方案，使用 JScript。此脚本将重新加载图像验证码。

```
$(document).ready(function () {
setTimeout(function () {
    $("img#reviews-verifycode-image").click();
}, 100);
}); 
```

# netflow - 带有 nfdump 的 Cisco Netflow

> ID：14567483
> 
> 赞同：1
> 
> 时间：2013-01-28T17:16:08.810
> 
> 标签：netflow

我一直在使用 nfdump 从我的路由器读取 netflow 数据，但我的问题是流持续时间字段以毫秒为单位。如果可能的话，我希望以微秒或纳秒为单位进行测量。有谁知道有关 nfdump 或 netflow 的任何信息，他们可以帮助我做到这一点？我已经检查了 ubuntu 手册页，在那里找不到任何关于我的问题的信息。

在此先感谢，谢恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:44:21.553

根据规范，NetFlow 的精度限制为毫秒。有软件 netflow 导出器报告纳秒精度，但他们使用自定义 NetFlow 9 字段这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-02T20:12:11.823

毫秒精度是 NetFlow v9 导出中的最高精度。此外，考虑到 netflow 的用例，我认为不需要比毫秒更精细的精度。

# javascript - Windows Phone 8 IE10 Javascript 调试

> ID：14567491
> 
> 赞同：24
> 
> 时间：2013-01-28T17:16:41.897
> 
> 标签：javascript, windows-phone-8, internet-explorer-10

IE10 在 HTML5 合规性方面有一些出色的增强，但在 WP8 上运行时仍然无法开发 JavaScript HTML5，因为除了控制台消息之外无法调试应用程序。

在 WP8 上运行的 IE10 是否可以像 WebKit 手机浏览器一样提供远程调试体验（例如，请参阅我在[http://www.youtube.com/watch?v=GNAjzFpNEj4](http://www.youtube.com/watch?v=GNAjzFpNEj4)上的视频）。当使用 USB 电缆连接到桌面 Safari 时，在 IOS 上调试 Javascript 应用程序很容易，因为可以设置断点并在远程调试器中检查变量。我希望 IE10 中也有相同的功能，并希望了解有关在何处启用这些非常需要的功能的任何信息。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-28T19:36:34.280

The bad news, that there is no new debug capabilities in comparison to WP7/IE9\. Please take a look on [How do I debug Internet Explorer on Windows Phone 7?](https://stackoverflow.com/questions/5198808/how-do-i-debug-internet-explorer-on-windows-phone-7) since we are in exactly the same situation on WP8.

What I personally use on daily basis

1.  Debug your app in IE10 Desktop as much as possible

2.  [Weinre](http://people.apache.org/~pmuellr/weinre/docs/latest/) remote debugger. [Demo video.](https://vimeo.com/47159911) You can use the following app based on Weinre to simplify its usage (no local setup needed) - [IeMobileDebugger src](https://github.com/sgrebnov/IeMobileDebugger) or [link to Store](http://www.windowsphone.com/s?appid=dd032799-1fd9-4ba5-9135-4589908063e7)

    Supports

    Html traversing Html node styles, properties, metrics Reading console output Executing js on device side from console (including intellisense) Dynamic script injection - ability to debug live sites

    Not supported

    js breakpoints

3.  For javascript line by line debugging use [aardwolf](http://lexandera.com/aardwolf/). [Demo with VS integration](https://vimeo.com/58078616).

4.  To redirect console trace to Visual Studio output and be able to use console.log("some message") for tracing

index.html:

```
<script type="text/javascript">
    window.console = {
        log: function (str) { window.external.Notify(str); }
    };

    // output errors to console log
    window.onerror = function (e) {
        console.log("window.onerror ::" + JSON.stringify(e));
    };

    console.log("Installed console !");
</script> 
```

MainPage.xaml.cs

```
private void Browser_Loaded(object sender, RoutedEventArgs e)
{
    Browser.IsScriptEnabled = true;
    // Add your URL here
    Browser.Navigate(new Uri(MainUri, UriKind.Relative));

    Browser.ScriptNotify += (s, arg) =>
    {
        Debug.WriteLine(arg.Value);
    };           
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-05-19T15:15:33.937

FWIW：Windows Phone 8.1 终于支持远程调试了。请参阅[http://blogs.msdn.com/b/visualstudioalm/archive/2014/04/04/diagnosing-mobile-website-issues-on-windows-phone-8-1-with-visual-studio.aspx](http://blogs.msdn.com/b/visualstudioalm/archive/2014/04/04/diagnosing-mobile-website-issues-on-windows-phone-8-1-with-visual-studio.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-26T16:19:41.707

虽然不是一个完整的解决方案，但 Lauri Piispanen 的[consolelog.js](https://github.com/lauripiispanen/consolelog.js)是一个基于 nodejs 的远程 JS 控制台记录器，可以为您提供帮助。

# android - 将文件推送到 android 模拟器并以编程方式从模拟器中提取文件

> ID：14567492
> 
> 赞同：0
> 
> 时间：2013-01-28T17:16:43.040
> 
> 标签：android, android-emulator

我需要一段代码来帮助我将计算机中的数据存储到 android 模拟器上（例如，我想将“C/Users/Desktop/myFile.txt”存储到我的模拟器 sd 卡上），反之亦然（存储文件从 sd 卡到我的电脑上）以编程方式（因为我知道如何手动操作！！！！）感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:19:49.700

使用 Adroid 调试桥 ( `adb`) 向您的设备或模拟器推送和提取文件：http: [//developer.android.com/tools/help/adb.html#copyfiles](http://developer.android.com/tools/help/adb.html#copyfiles)

如果要自动执行此操作，可以使用 shell 脚本。

# vb.net - 使用 acrobat dll 将 PDF 转换为字符串

> ID：14567495
> 
> 赞同：0
> 
> 时间：2013-01-28T17:16:47.297
> 
> 标签：vb.net, pdf, windows-services, adobe

我正在做一个 vb.net 项目。我正在尝试使用 acrobat dll 将 pdf 文件的内容转换为字符串（不能使用其他 3 rd 方 dll）。下面是我的代码，当我运行程序时出现以下错误：“检索具有 CLSID 的组件的 COM 类工厂，由于以下错误而失败：80040154 类未注册”。我做了一些研究，发现我必须安装完整版的acrobat标准版或专业版。不仅完整版的 acrobat 还必须安装在程序运行的所有用户机器上。

谁能告诉我这是否属实并建议如何修复未注册的类错误？

```
Sub Main()
        Dim s As String
        Dim sSourceFile As String
        sSourceFile = "P:\Report images\DevReports\New Folder\UM-STD-Approval_154.pdf"

        Dim oSourceFileInfo As New System.IO.FileInfo(sSourceFile)

        Dim st As New AcroPDDoc
        st.Open(sSourceFile)
        s = GetText(st)

        Dim oAcroApp As Acrobat.CAcroApp = New Acrobat.AcroApp
        Dim oAcroAvDoc As Acrobat.CAcroAVDoc = New Acrobat.AcroAVDoc
        Dim oAcroPDDoc As Object = Nothing
        If oAcroAvDoc.Open(sSourceFile, "") Then
            'Set PDDoc object and save the file.
            oAcroPDDoc = oAcroAvDoc.GetPDDoc()
            ' oAcroPDDoc.Save(1, sOutputFile)
        Else ' Document FAILED to open.
            MsgBox("Cannot open ")
        End If
        oSourceFileInfo = Nothing
        oAcroApp.CloseAllDocs()
        oAcroPDDoc = Nothing
        oAcroAvDoc = Nothing
        oAcroApp.Exit()
        oAcroApp = Nothing
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:30:59.040

为明显的答案道歉，但你已经回答了你自己的问题。

Adobe Reader 是一个免费的应用程序，其界面非常有限，允许自动化；实际上，它仅限于您可以显示 PDF 文件并在其中导航（在某种程度上）。

对于全功能自动化（就像我认为您正在寻找的那样），您需要安装完整的 Adob​​e Acrobat。是的，您在其上运行的任何系统也需要安装 Adob​​e Acrobat。

现在，可能有一些库（包括来自 Adob​​e 的库或内部包含 Adob​​e 技术的库）可以让您在应用程序中嵌入您正在寻找的功能，但这些也不是免费的......

# image - 想要一个高效的 ASP.NET Web API 控制器，能够可靠地返回 30 到 50 ~3MB JPEG

> ID：14567497
> 
> 赞同：0
> 
> 时间：2013-01-28T17:16:48.697
> 
> 标签：image, download, asp.net-web-api

我想将以下代码更改为一个高效的 Web API 控制器方法，该方法可以返回 30 到 50 个平均 3MB 大小的 JPEG（对于 <20 个同时用户）。

```
 public async Task<HttpResponseMessage> Get(int imageid) {
        return await Task.Run(() => {
            var dzImage = _dataContext.DeepZoomImages.SingleOrDefault(_ => _.ImageID == imageid);
            if (dzImage == default(DeepZoomImage)) {
                throw new HttpResponseException(new HttpResponseMessage(HttpStatusCode.NotFound));
            }
            var response = new HttpResponseMessage(HttpStatusCode.OK);
            var bitmap = GetFullSizeBitmap(dzImage);
            var memoryStream = new MemoryStream();
            bitmap.Save(memoryStream, ImageFormat.Jpeg);
            response.Content = new ByteArrayContent(memoryStream.ToArray());
            var fileName = string.Format("{0}.jpg", dzImage.ImageName);
            response.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment") { FileName = fileName };
            response.Content.Headers.ContentType = new MediaTypeHeaderValue("image/jpeg");
            memoryStream.Flush();
            return response;
        });
    } 
```

上述方法处理一张图像。对于这种使用/加载场景，我怎样才能最好地对其进行复数化以有效地处理多个图像？是否可以返回 Task<HttpResponseMessage>[] 或 Task<HttpResponseMessage[]>？

或者生成所有图像并一次性返回它们会更好吗？

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:42:26.227

根据我们的讨论，这里最好的方法是在服务器上创建一个 ZIP 文件，然后将该文件下载给用户。作为替代方案，您可以尝试这种[多文件下载](https://github.com/biesiad/multiDownload)方法。

# nhibernate - 插入新的 NHibernate 实体并立即分配给父级

> ID：14567499
> 
> 赞同：0
> 
> 时间：2013-01-28T17:16:54.113
> 
> 标签：nhibernate, mapping-by-code

我的 Oracle 数据库中有父对象和子对象 BOOKLET 和 DEMOGRAPHICS_INFO，在我的数据层中映射如下：

```
public BookletMapping()
{
    Table("BOOKLET");
    Id(x => x.Id, m => m.Column("ID");
    ...
    ManyToOne(x => x.DemographicsInfo, m => m.Column("DEMOGRAPHICS_INFO_ID"));
}

public DemographicsInfoMapping()
{
    Table("DEMOGRAPHICS_INFO");
    Id(x => x.Id, m => m.Column("ID");
    ...
} 
```

我故意省略了与小册子的 DemographicsInfo 关系，因为我不需要遍历我的实体那个方向。ManyToOne 关系实际上是一对一的。

我编写了一个测试，以确保我可以创建一个 DemographicsInfo 并立即将其分配给它的父 Booklet，它看起来像这样：

```
[Test]
public void ShouldSaveCorrectEntity()
{
    var booklet = _unitOfWork.Get<Booklet>(4);
    var demInfo = new DemographicsInfo();
    _unitOfWork.Insert(demInfo);
    booklet.DemographicsInfo = demInfo;
    _unitOfWork.Save();

    demInfo.Id.ShouldNotEqual(0);
} 
```

当我调用 Save() 时，我得到以下异常：

```
{"ORA-02291: integrity constraint (<schema>.BOOKLET_DEMOGRAPHICS_INFO_FK1) violated - parent key not found\n"} 
```

这是因为在 Insert() 时没有为 demInfo 对象指定 Id。我的插入实现如下所示：

```
public void Insert<T>(T entity)
{
    using (var transaction = _session.BeginTransaction())
    {
        _session.Save(objectToSave);
        _session.Flush();
        transaction.Commit();
    }
} 
```

其中 _session 是一个 NHibernate ISession。因为我已经保存了新实体（它成功保存）并刷新了我的会话，所以我希望我的 demInfo 变量有一个 Id，但它仍然为 0，当我尝试保存我的父对象时，这违反了外键。我在这里忽略了一步吗？我应该重新考虑将新孩子添加到现有父母的模式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:54:42.993

我已经解决了我的问题。事实证明，对 Id 列值使用序列并在行插入时使用触发器填充它们的 Oracle 约定不允许 NHibernate 在持久化实体时学习 Id。我在我的 Id 映射中添加了一个序列生成器，并且 Insert() 现在在保存时更新我的​​瞬态实体上的 Id，因此我可以将 DemographicsInfo 分配给我的 Booklet.DemographicsInfo。

```
Id(x => x.Id, m =>
{
    m.Column("ID");
    m.Generator(Generators.Sequence, a => a.Params(new { sequence = "SEQ_TABLE_ID" }));
}); 
```

现在我的测试无一例外地通过了。

# image - 如何在标题中从颜色淡化为图像？

> ID：14567500
> 
> 赞同：0
> 
> 时间：2013-01-28T17:16:55.640
> 
> 标签：image, colors, header, gradient, fade

我有颜色#FF6600，我想从标题左侧的颜色开始水平淡入图像并进入最右侧的图像。我怎样才能在css中做到这一点？我是否必须使用 webkit？谢谢！

# android - Android：更新 https 证书导致 SSLPeerUnverifiedException

> ID：14567502
> 
> 赞同：0
> 
> 时间：2013-01-28T17:16:59.023
> 
> 标签：android, ssl, https

我们有一个与 https 服务器通信的 Android 应用程序。在架构团队更改服务器上的 https 证书之前，一切正常。现在，当用户尝试登录时，它将返回以下错误：

javax.net.ssl.SSLPeerUnverifiedException：没有对等证书

我不熟悉 SSL，但我的猜测是身份验证失败，因为设备上的旧证书与新服务器不匹配。我的问题是：

1.  如果用户卸载/重新安装应用程序，它会起作用吗？
2.  如果没有，那么我们如何手动删除设备上的 https 证书？
3.  我们可以更改代码以防止将来发生这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:12:01.890

原来它只是Android设备不支持证书。以下是有效 CA 的列表：[http ://www.setupmobile.se/wp-content/uploads/2011/11/trusted_roots_ICS.txt](http://www.setupmobile.se/wp-content/uploads/2011/11/trusted_roots_ICS.txt)

服务器团队修复 CA 后，现在一切正常。

# xml - 对目录中存在的数千个 XML 文件应用单个 XSLT

> ID：14567505
> 
> 赞同：0
> 
> 时间：2013-01-28T17:17:01.547
> 
> 标签：xml, xslt-2.0

我编写了一个 XSLT 文件来将 XML 文件从非结构化格式转换为更结构化的格式。但问题是我在目录/子目录结构中存在数千个 XML 文件，我想在所有这些文件上应用相同的 XSLT 并生成与它们对应的新结构化 XML。我尝试使用 Collection() 但没有奏效。我正在使用 Altova XMLSpy。

XML 文件看起来像这样：

```
<University xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
 SchemaVersion="1.0.8">
 <UniName>StackOverflow</UniName>
 <UniId>123</UniId>
 <Courses>
  <Course>
   <ID>1001</ID>
   <Seats>10</Seats>
   <Description>Department: CS , Faculty: XYZ</Description>
  </Course>
  <Course>
   <ID>1001</ID>
   <Seats>10</Seats>
   <Description>To teach how to Write XSLT</Description>
  </Course>
  <Address>Planet No.# 3 Earth</Address>
  <ZipCode>007</ZipCode>
 </Courses>
</University> 
```

其对应的 XSLT 文件是：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"   
xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-
functions" exclude-result-prefixes="xs fn">

<xsl:output method="xml" encoding="UTF-8" indent="yes"/> 
<xsl:template match="/">
  <ConnectUni>
<xsl:for-each select="University">
  <xsl:variable name="var1_resultof_first" as="node()" select="Courses"/>
     <Address>
        <xsl:sequence select="fn:string($var1_resultof_first/Address)"/>
     </Address>
         <Courses>
     <xsl:for-each select="$var1_resultof_first/Course">
        <Course>
      <Id>
                 <xsl:sequence select="fn:string(ID)"/>
      </Id>
      <Seats>
         <xsl:sequence select="fn:string(Seats)"/>
      </Seats>
         <xsl:apply-templates select="Description"></xsl:apply-templates>
          </Course>
    </xsl:for-each>
  </Courses> 
   </xsl:for-each>
 </ConnectUni>
</xsl:template>
<xsl:template match="Description">
  <xsl:analyze-string select="." regex="Department:\s*(.+)\s*,\s*Faculty:\s*(.+)">
    <xsl:matching-substring>
      <xsl:element name="Department"><xsl:value-of select="fn:string(regex-group(1))"/>
      </xsl:element>
      <xsl:element name="Faculty"><xsl:value-of select="fn:string(regex-group(2))"/>
      </xsl:element>
    </xsl:matching-substring>
    <xsl:non-matching-substring>
      <xsl:element name="Description"><xsl:value-of select="fn:string(.)"/>
      </xsl:element>
    </xsl:non-matching-substring>
   </xsl:analyze-string>
 </xsl:template>
</xsl:stylesheet> 
```

我正在寻找 Java 或 C# 中的解决方案，因为我必须将新生成的 XML 文件转换为可以执行 SQL 查询的 RDBMS。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:29:33.007

如果您想从 Java 运行它，那么您可以读取 Java 中的目录结构并为每个文件调用一次 transform() ，假设（据我了解）每个输入文件都独立于任何其他文件转换为输出文件。

或者，您可以从 XSLT 中控制它。假设 Saxon，您将添加一个模板规则

```
<xsl:template name="main">
  <xsl:for-each select="collection(concat($directory, '?select=*.xml;recurse=yes'))">
    <xsl:result-document href="{......}">
       <xsl:apply-templates select="."/>
    </
  </
</ 
```

然后开始转换，指定“main”作为初始模板，而不提供源文档。

# git - GIT diff 临时文件命名约定导致问题

> ID：14567512
> 
> 赞同：0
> 
> 时间：2013-01-28T17:17:13.107
> 
> 标签：git, matlab, diff, simulink, tortoisegit

我在 Windows 上使用 Tortoise GIT，在当前项目中使用 MATLAB。我尝试将 MATLAB 2012b 设置为 Simulink 模型 (*.slx) 的差异工具。

但是，当 MATLAB 中的 visdiff 工具尝试在 GIT 生成的输入上执行时，它会失败，因为从存储库中提取的临时文件的名称为 ModelName-123456-left.slx。

这是 MATLAB 中的无效模型名称。所以我正在寻找一种将临时文件名中的“-”更改为“_”或类似名称的方法。

它是 GIT 的一个简单部分，我在任何地方都找不到它的文档。我正在寻求有关如何解决此问题的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:18:42.400

您可以通过为 MATLAB visdiff 创建包装脚本来解决此问题。此脚本可以在将临时文件传递给 MATLAB 之前重命名它们（之后可能会重命名它们）。

# javascript - 使用日期和优先级对 Backbone.Collection 进行排序

> ID：14567517
> 
> 赞同：0
> 
> 时间：2013-01-28T17:17:34.720
> 
> 标签：javascript, backbone.js

好的，我有一个包含某个模型的对象的集合，这个模型包含一个日期和一个优先级，我希望它按日期排序，然后按优先级，我目前以这种方式实现：

```
App.Collections.Tasks = Backbone.Collection.extend({
model: App.Models.Task,
comparator: function(model) 
{
  return model.get("date") + model.get("priority");
}
}); 
```

这是我的输出：

```
Get to the party  Edit Delete 1 Fri Feb 1
Get to the party  Edit Delete 2 Mon Jan 28
Go to the store  Edit Delete 4 Mon Jan 28
Go to the mall  Edit Delete 3 Tue Jan 29
Get to the party  Edit Delete 3 Tue Jan 29
Get to the party  Edit Delete 5 Tue Jan 29
Get to the party  Edit Delete 2 Wed Jan 30
Get to work  Edit Delete 5 Wed Jan 30 
```

我希望更早的日期始终排在首位，所以 2 月的日期应该是最后一个，我怎么能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:02:18.220

你可以这样做：

```
comparator: function(model1, model2) {
    return (model1.get("date") + model1.get("priority")) -
        (model2.get("date") + model2.get("priority"));
} 
```

[文档](http://backbonejs.org/#Collection-comparator)声称，返回的值应该是 -1、0 或 1，但这不是之前的强制要求，任何值都可以解决问题。

**编辑**

```
comparator: function(model1, model2) {
    var comp = (model1.get("date") + model1.get("priority")) -
        (model2.get("date") + model2.get("priority"));
    if (comp < 0) {
        return -1;
    } else if (comp > 0) {
        return 1;
    } else {
        return 0;
    }
} 
```

现在代码完全遵循提到的规范。如果这不能解决问题，那么问题不在比较器中。

**编辑**

傻我。我假设您将 unix 时间存储在 中`date`，但显然您没有。减去字符串会得到 NaN，因此确实没有进行排序。因此，您现在需要做的就是转换`date`为 unix 时间格式（或至少类似的格式），然后它应该可以工作。

# php - 为什么我的 PHP 脚本可以在 IE 9 中运行，但不能在 IE 8 或 Chrome 24 中运行？

> ID：14567521
> 
> 赞同：0
> 
> 时间：2013-01-28T17:17:55.257
> 
> 标签：php, cross-browser

我不是开发人员，所以我来向大家寻求帮助。我已经在 Google 上搜索了答案，但我看到的大部分内容都是因为 PHP 在服务器上运行，最终用户的浏览器并不重要。但是，我正在解决一个问题，我刚刚了解到，虽然我可以在 Chrome 24 和 IE 8 中重现该问题，但在 IE 9 中一切正常。如果有更多关于 PHP 脚本中的某些元素是否存在的信息，那就太好了可能会影响特定浏览器是否可以处理它。

以下是我使用 Adob​​e Captivate 获得的预配置脚本。到目前为止，我只做了一个修改，我已经用评论做了标记。基本上，Captivate 会生成一个我在 Web 服务器上发布的 flash 文件。当用户在 Web 浏览器中查看演示文稿时，它会在最后打开一个表单。当他们单击提交时，swf 将其存储的信息发送到此脚本（我在项目文件中提供 URL），以便它可以解析和存储数据。

```
<?php # InternalServerReporting.php
# Copyright 2000-2008 Adobe Systems Incorporated. All rights reserved.
#
   print "<pre>\n";

#
   foreach ($_POST as $k => $v) 
   {
      if($k == "CompanyName")
      {
        $CompanyName = $v;
      }
      if($k == "DepartmentName")
      {
        $DepartmentName = $v;
      }
      if($k == "CourseName")
      {
        $CourseName = $v;
      }
      if($k == "Filename")
      {
        $Filename = $v;
      }
      if($k == "Filedata")
      {
        if(get_magic_quotes_gpc())
        $Filedata = stripslashes($v);
        else
        $Filedata = $v;
      }
   }

    $ResultFolder = "./"."CaptivateResults";
    mkdir($ResultFolder, 0777); #I inserted the 0777 to solve a permissions issue.
    $CompanyFolder = $ResultFolder."//".$CompanyName;
    mkdir($CompanyFolder);
    $DepartmentFolder = $CompanyFolder."//".$DepartmentName;
    mkdir($DepartmentFolder);
    $CourseFolder = $DepartmentFolder."//".$CourseName;
    mkdir($CourseFolder);
    $FilePath = $CourseFolder."//".$Filename;
    $Handle = fopen($FilePath, 'w');
    fwrite($Handle, $Filedata);
    fclose($Handle);

   print "</pre>\n";
?> 
```

# c# - 具有至少一个数字的 C# 随机字符串生成器

> ID：14567525
> 
> 赞同：0
> 
> 时间：2013-01-28T17:18:08.120
> 
> 标签：c#

我正在使用这个逻辑来生成随机字符串。我如何强制它至少包含一个数字？

```
var charsALL = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghijklmnopqrstuvwxyz";
var randomIns = new Random();
var resultGenerated = new string(
        Enumerable.Repeat(charsALL, 6)
                  .Select(stringgen => stringgen[randomIns.Next(stringgen.Length)])
                  .ToArray());
return resultGenerated.ToString(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T17:33:31.247

```
var charsALL = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghijklmnopqrstuvwxyz";
var randomIns = new Random();
int N = 6;
var rndChars = Enumerable.Range(0, N)
                .Select(_ => charsALL[randomIns.Next(charsALL.Length)])
                .ToArray();
rndChars[randomIns.Next(rndChars.Length)] = "0123456789"[randomIns.Next(10)];

var randomstr = new String(rndChars); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:21:47.537

您可以检查它是否包含一个数字：

```
while(!resultGenerated.Any(c => Char.IsDigit(c)))
{
    // try again until you have a digit 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T17:36:18.333

我认为更快的解决方案是在字符串的随机位置插入一个随机数：

```
char[] chars = Enumerable.Repeat( charsALL, 6 )
               .Select( stringgen => stringgen[ randomIns.Next( stringgen.Length ) ] )
               .ToArray( );

if (!chars.Any(c => Char.IsDigit(c)))
   chars[ randomIns.Next( chars.Length ) ] = randomIns.Next( 10 ).ToString( )[ 0 ];

return new string(chars); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T17:46:35.323

您可以使用 az、AZ 和 0 -9 的 asci 代码进行随机化

```
 public static string GetRandomString(int randomStrLength)
        {
            Random rand = new Random(DateTime.Now.Millisecond);
            char[] randomString = new char[randomStrLength];

            int randCode = 0;
            bool containsDigit = false;

            while (containsDigit == false)
            {
                for (int i = 0; i < randomStrLength; i++)
                {
                    // Get random asci codes (allowed: a-z, A-Z, 0-9)
                    do
                    {
                        randCode = rand.Next(48, 122);
                    }
                    while (randCode > 57 && randCode < 65 || randCode > 90 && randCode < 97);

                    randomString[i] = (char)randCode;

                    // We want at least one digit.
                    if (randCode >= 48 && randCode <= 57)
                    {
                        containsDigit = true;
                    }
                }
            }
            return new String(randomString);
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T17:29:46.203

*   生成你的随机字符串
*   生成 0 到 9 之间的随机数字
*   在字符串的随机索引处插入随机数字。

如果这对您来说还不够随机，那么恐怕您将不得不坚持 Tim 的回答。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T17:51:08.837

**我的版本（经过试验和测试）；）**

```
namespace PasswordGenerator
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Your new password is : " + CreateRandomPassword(8));
            Console.ReadLine();
        }
        private static string CreateRandomPassword(int passwordLength)
        {
            string allowedChars = "abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNOPQRSTUVWXYZ0123456789!@$?_-";
            char[] chars = new char[passwordLength];
            Random random = new Random();

            bool containsNum = false;
            do {
                for (int i = 0; i < passwordLength; i++)
                {
                    chars[i] = allowedChars[random.Next(0, allowedChars.Length)];
                    if(Char.IsDigit(chars[i])){
                        containsNum = true;
                    }
                }
            } while(!containsNum);

            return new string(chars);
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-13T12:43:43.193

我不知道这是否有帮助，但这是我用来生成随机字符串的类。在生成字符串之前使用它时，有复选框来决定它是否必须至少有 1 个大写字母/符号/数字等。对某些人来说可能很冗长，但它对我有用。

```
 class RandomString
{
    private bool m_HasCaps;
    private bool m_HasNumbers;
    private bool m_HasSymbols;
    private int m_StringLength;
    private string characterString;
    private string randomString;

    //Set possible characters to char array rather than a string for potential future method involving chars
    private char[] lower = "abcdefghijklmnopqrstuvwxyz".ToCharArray();
    private char[] upper = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".ToCharArray();
    private char[] numbers = "0123456789".ToCharArray();
    private char[] symbols = "!£$%&()<>[]?#-+=".ToCharArray();

    /// <summary>
    /// The returned string can contain just lowercase or a mixture of upper, digits and symbols depending on params and
    /// the lenght of the string return can also be set
    /// </summary>
    /// <param name="caps">Does the string need to conatain at least 1 upper case</param>
    /// <param name="nums">does the string need to contain at least 1 numeral</param>
    /// <param name="symbols">does the string need to contain at least 1 symbol</param>
    /// <param name="length">the length of the string to return </param>
    public RandomString(bool caps, bool nums,bool symbols,int length)
    {
        m_HasCaps = caps;
        m_HasNumbers = nums;
        m_HasSymbols = symbols;
        m_StringLength = length;
    }

    public string CreatePassword()
    {
        BuildCharacterstring();
        BuildRandomString();

        return randomString;

    }

    //Check to see what the string must contain and add those characters to the 
    //Character string 
    private void BuildCharacterstring()
    {
        characterString = new string(lower);

        if (m_HasCaps)
        {
            string upperString = new string(upper);
            characterString += upperString;
        }

        if (m_HasNumbers)
        {
            string numberString = new string(numbers);
            characterString += numberString;
        }

        if (m_HasSymbols)
        {
            string symbolString = new string(symbols);
            characterString += symbolString;
        }
    }

    //
    private void BuildRandomString()
    {
        Random rdm = new Random();
        bool validPassword = false;

        while (validPassword == false)
        {
            //blank the string before each run otherwise you end up with double the characters
            randomString = "";

            for (int x = 0; x < m_StringLength; x++)
            {
                //select a char from the password character string
                int place = rdm.Next(0, characterString.Length);
                char character = characterString[place];
                randomString += character;

            }

            //Check that the password has the appropriate characters
            validPassword = CheckParams();
        }

    }

    //checks that each required preference is met and that the string includes at least 1 of what 
    //is selected. If the parameter is not required ie symbols are not required set it to true to pass
    //the test anyway.
    private bool CheckParams()
    {
        bool capsPassed;
        bool numeralPassed;
        bool symbolPassed;
        bool lowerPassed;

        //If caps are not required set to true to pass the test automatically
        if(m_HasCaps == false)
        {
            capsPassed = true;
        }
        else
        {
            //check if the password contains an uppercase letter
            capsPassed = (randomString.Any(char.IsUpper)) ? true : false;
        }

        if(m_HasNumbers == false)
        {
            numeralPassed = true;
        }
        else
        {
            numeralPassed = (randomString.Any(char.IsDigit)) ? true : false;
        }

        if(m_HasSymbols == false)
        {
            symbolPassed = true;
        }
        else
        {
            symbolPassed = (randomString.Any(char.IsSymbol)) ? true : false;
        }

        lowerPassed = (randomString.Any(char.IsLower)) ? true : false;

        //All 4 must pass to return true and stop password generation
        if (capsPassed && numeralPassed && symbolPassed &&lowerPassed)
        {
            return true;
        }
        else
        {
            return false;
        }
    }       
} 
```

# javascript - Titanium 3 中用于 bb10 的多行文本字段

> ID：14567535
> 
> 赞同：0
> 
> 时间：2013-01-28T17:18:44.233
> 
> 标签：javascript, titanium, blackberry-10

是否有任何替代 Ti.Ui.TextArea 在 Titanium 中使用 javascript。我需要一个多行文本字段，但由于 bb10 的 Titan3 仍处于预览阶段，因此尚未实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T05:47:06.960

textField 仅用于单行输入。您必须将 textArea 用于多行输入，但不幸的是，到目前为止，对于 bb10 还没有 TextArea 支持。p1 实现后会添加到 p2 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:37:47.523

It's not planned to be implemented until P2 according to the release notes [here](https://github.com/appcelerator/titanium_mobile_blackberry/blob/master/docs/ReleaseNotes.txt)

# iphone - 为什么仪器不能跟踪我的内存使用情况？

> ID：14567536
> 
> 赞同：1
> 
> 时间：2013-01-28T17:18:49.007
> 
> 标签：iphone, ios, objective-c, memory, instruments

我正在为 App Store 开发一个应用程序，并且在内存管理方面遇到了奇怪的问题。

我正在使用 ARC。

**在连接到 Instruments 的未越狱 iPod touch 4G 6.0.1**上测试我的应用程序时，一切似乎都很顺利——我的应用程序始终使用**不到 5mb**的内存并且没有泄漏。然而，经过长时间的使用，尽管仍然在仪器中被监控为 < 5Mb，但我开始收到内存警告并最终被操作系统**杀死**。我在后台没有任何打开的应用程序，所以我假设我的应用程序正在泄漏内存，仪器无法跟踪。怎么会这样？

此外，我开始使用一个函数来跟踪内存使用情况，特别是：

```
 struct task_basic_info info;
    mach_msg_type_number_t size = sizeof(info);
    kern_return_t kerr = task_info(mach_task_self(),
                                   TASK_BASIC_INFO,
                                   (task_info_t)&info,
                                   &size);
    if( kerr == KERN_SUCCESS ) {
        return info.resident_size/1024.0/1024.0;
    } else {
        return -1.0;
    } 
```

它似乎报告了我的应用程序行为（60-70Mb）可能预期的内存使用情况。我在 Instruments 中同时进行测量，它仍然显示 ~3-4Mb。这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T18:16:29.197

Instruments 可能跟踪堆分配而不是总地址空间消耗。如果您的应用程序导致大量文件被内存映射，这可能会导致堆分配量（malloc 等）较少，但应用程序的系统内存消耗较高。

如果不了解您的应用程序的更多信息，则无法真正推测超出上述内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T07:17:59.700

Allocations 工具只跟踪堆内存，它只是整个运行应用程序内存使用的一小部分。

看看VM Tracker这个工具，就是整个虚拟内存使用统计，说不定就能找到问题所在。

# lldb - 在 LLDB 中打印一个 NSArray

> ID：14567537
> 
> 赞同：5
> 
> 时间：2013-01-28T17:18:49.943
> 
> 标签：lldb

您最喜欢`NSArray`使用 LLDB 打印内容的方式是什么？

一个python脚本？内联for循环？一个Objective-C方法调用？

我知道按索引打印对象很容易。我想一次打印所有对象。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T16:48:44.370

NSArray 上的 description 方法遍历数组中的对象并对它们进行描述。无需发明任何东西：

```
po [fooArray description] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:41:38.530

你使用的是什么版本的 Xcode/LLDB？

在刚刚发布的 4.6 版本中，您应该可以在 Xcode 中展开 NSArray 并显示内容。在命令行，做

帧变量*myArray* --show-types -d run --ptr-depth 1

也应该工作。

# c++ - 将值与向量值进行比较

> ID：14567538
> 
> 赞同：-4
> 
> 时间：2013-01-28T17:18:55.450
> 
> 标签：c++, vector

我可以将 int 值与向量值进行比较吗？

我正在尝试搜索用户是否输入 no，匹配向量 id no

```
int no;
cout << "Input a no";
cin >> no;    

for (int n=0;vector.size();n++){

if(no==vector[n].getID()){

...

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:31:40.120

在 C++11 中，您可以使用`find_if`lambda*函数*来检测匹配的 ID，如下所示：

```
#include <iostream>
#include <vector>
#include <string>
#include <algorithm>

using namespace std;

struct user {
    int userid;
    string name;
    user(int id, string n) : userid(id), name(n) {}
};

int main() {
    vector<user> v;
    v.push_back(user(1, "quick"));
    v.push_back(user(2, "brown"));
    v.push_back(user(3, "fox"));
    v.push_back(user(4, "jumps"));
    auto needId = 3;
    // Here is the part that replaces the loop in your example:
    auto res = find_if(v.begin(), v.end(), [needId](user const& u) {
        return u.userid == needId;
    });
    // res is an interator pointing to the item that you search.
    if (res != v.end()) {
        cout << res->name << endl;
    }
    return 0;
} 
```

这`fox`将按预期打印（[链接到 ideone](http://ideone.com/QobAnJ)）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T17:22:49.223

首先，我假设没有。你的意思是数字。所以 cin 发生的事情是你得到一个字符串。然后需要将其转换为 int 以与向量进行比较，这就是我认为您正在使用的。然后，只需将 noAsNumber 与 vector[i] 值进行比较。

```
string no;
int noAsNumber = atoi(no.c_str());

int i;
for (i = 0; i < vector.size(); i++)
{
    ...
} 
```

# javascript - javascript easelJs onPress 放大图片圈

> ID：14567540
> 
> 赞同：0
> 
> 时间：2013-01-28T17:19:13.317
> 
> 标签：javascript, callback, easeljs, createjs

使用 javascript 和 Easeljs lib 和 createjs，我需要一些帮助。我的程序画了一些圆圈并用颜色填充它们。他们也使用 Ticker 移动，并且使用一些 if 语句，它们从窗口的墙壁上弹跳。圈子是动态创建的，圈子的数量每次都不同。

现在我需要实现一个功能，以便当你按下它们时圆圈会放大。它们的半径应该每 30 毫秒增加 1px。我不知道该怎么做。1.你是否使用onPress？我需要使用哪些回调，我将如何确定鼠标是否被释放并且圆圈是否可以停止增长？2\. 我需要从我的 circlesArray 中删除 circleObject 还是从舞台上删除它并再次绘制它们就足够了？我迫切需要帮助，如果有人能给我一些线索，我会很高兴！

问候 T

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:44:24.187

根据您提供的信息，我建议您查看 github 上的这个 EaselJS 示例：[https](https://github.com/CreateJS/EaselJS/blob/master/examples/DragAndDrop_hitArea.html) ://github.com/CreateJS/EaselJS/blob/master/examples/DragAndDrop_hitArea.html onPress-Method 用于您可能几乎可以照原样复制的方式。

你的可能看起来像这样：

```
function(target){
    target.onPress = function(evt) {
        target.grow = true; //or a grow-factor or so
        evt.onMouseUp = function(ev) {
            target.grow = false;
        }
    }
}(circle); 
```

并在您的刻度功能中查看所有圆圈，检查它们`grow==true`并增加它们的半径（如果是）

和2：你的circleObjects都是对的`createjs.Shape`吗？您不必从舞台或数组中删除它们，您可以使用`circle.graphics.clear();`然后重新绘制具有新半径的圆。

# c# - 为什么我对子文档的更新删除了子文档的数组性质

> ID：14567544
> 
> 赞同：0
> 
> 时间：2013-01-28T17:19:20.770
> 
> 标签：c#, mongodb

我有这个

```
{
 "ClockID" : "fd51b6e0-5b81-49ab-8424-71fd768281b2",
 "ClockName" : "AAA-TEST123-002",
 "FilesList" : [{
                 "FileName" : "AAA-TEST123-002.mpg",
                 "FileLocationHistory" :    [{
                                               "FullPath" : "192.168.32.166/Ingestion",
                                               "AllowDeleteOnCancel" : false,
                                               "_id" : "565b7343-9dc5-4916-a788-0f392fce2502"
                                    }],
                  "_id" : "15b54499-a0be-4278-82ed-58c82c13bd40",
               }],
 "_id" : ObjectId("510164d0a63cfa2250fd6d19"),
 "_t" : "ClockRecord" 
```

当我用这个更新 FileLocationHistory 数组文档时：

```
 public void UpdateClockFilesLocationRecord(string collectionName, ClockFileLocationHistoryRecord clockFileLocationHistory, BsonObjectId clockDocumentID, string clockFileDocumentID)
    {
        var mongoCollection = MongoDatabase.GetCollection<ClockRecord>("Clocks");
        var update = Update.Set("FilesList.$.FileLocationHistory", BsonDocumentWrapper.Create<ClockFileLocationHistoryRecord>(clockFileLocationHistory));
        var modeResult = mongoCollection.Update(
             Query.And(
                Query.EQ("_id", clockDocumentID),
                Query.EQ("FilesList._id", clockFileDocumentID)
                ), 
              update, UpdateFlags.Upsert
              );
    } 
```

更新通过，但文档不再是数组：

```
{
 "ClockID" : "fd51b6e0-5b81-49ab-8424-71fd768281b2",
 "ClockName" : "AAA-TEST123-002",
 "FilesList" : [{
                 "FileName" : "AAA-TEST123-002.mpg",
                 "FileLocationHistory" :    {
                                               "FullPath" : "192.168.32.166/Ingestion",
                                               "AllowDeleteOnCancel" : false,
                                               "_id" : "565b7343-9dc5-4916-a788-0f392fce2502"
                                    },
                  "_id" : "15b54499-a0be-4278-82ed-58c82c13bd40",
               }],
 "_id" : ObjectId("510164d0a63cfa2250fd6d19"),
 "_t" : "ClockRecord" 
```

这意味着该文档尝试将其反序列化为驱动程序无法识别的对象。

我的更新代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:40:11.903

代替：

```
var update = Update.Set("FilesList.$.FileLocationHistory", BsonDocumentWrapper.Create<ClockFileLocationHistoryRecord>(clockFileLocationHistory)); 
```

您可以使用推送：

```
var update = MongoUpdate.Push("FilesList.$.FileLocationHistory", BsonDocumentWrapper.Create<ClockFileLocationHistoryRecord>(clockFileLocationHistory)); 
```

... 添加到数组中

# python - Python脚本通过自动填充列中的空格来操作Excel工作表

> ID：14567545
> 
> 赞同：0
> 
> 时间：2013-01-28T17:19:24.833
> 
> 标签：python, excel

嗨，我有一个结构类似的 excel 文件，如下所示：

```
 Location       column2    column3
1     South Africa
2     
3     
4     
5     England
6     
7     
8     
9     U.S
10    
11    
12 
```

我正在尝试编写一个python脚本，可以用前面位置的名称填写每个位置之间的空格（即以南非为位置填写2到4的空格，6-8将填写为英格兰作为地点等）

如果有人能指出我正确的方向，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:11:37.937

好的，伙计，我认为答案是我为这个愚蠢的包装器`xlrd`（或者，你自己写的一个！）。关键是该函数一次将一行读取到一个列表中，并且 Python 列表会记住它们被填充的顺序。包装器生成一个字典，它将 Excel 工作表名称映射到该工作表上的行列表（我们假设这里每张工作表一个表，否则您必须概括事物）。每行都是一个字典，其键是列名。

对你来说，我会读入你的数据，然后做这样的事情（未经测试）：

```
import see_below as sb
dict = sb.workbookToDict(your_file)
output = []
this_location = None
for row in dict[relevant_sheet_name]:
    output_row = row
    if row['Location'] is not None:
        this_location = row['Location']
    else:
        output_row['Location'] = this_location 
```

你可以用列表理解做一些可爱的事情，但今晚我喝了太多酒来愚弄它：）

这是读者的包装：

```
import xlrd

def _isEmpty(_):
        return ''

def _isString(element):
        return element.value.encode('ascii', 'ignore')

def _isFloat(element):
    return float(element.value)

def _isDate(element):
    import datetime
    rawDate = float(element.value)
    return (datetime.datetime(1899, 12, 30) +
            datetime.timedelta(days=rawDate))

def _isBool(element):
    return element.value == 1

def _isExcelGarbage(element):
    return int(element.value)

_options = {0: _isEmpty,
            1: _isString,
            2: _isFloat,
            3: _isDate,
            4: _isBool,
            5: _isExcelGarbage,
            6: _isEmpty}

def WorkbookToDict(filename):
    '''
        Reads .xlsx file into dictionary.

        The keys of the dictionary correspond to sheet names in the Excel workbook.
        The first row of the Excel workbook is taken to be column names, and each row
        of the worksheet is read into a separate dictionary, whose keys correspond to
        column names. The collection of dictionaries (as a list) forms the value in the
        dictionary. The output maps sheet names (keys) to a collection of dictionaries
        (value).
    '''
    book = xlrd.open_workbook(filename)
    allSheets = {}
    for s in book.sheets():
        thisSheet = []
        headings = [_options[x.ctype](x) for x in s.row(0)]

        for i in range(s.nrows):
            if i == 0:
                continue

            thisRow = s.row(i)
            if len(thisRow) != len(headings):
                raise Exception("Mismatch between headings and row length in ExcelReader")

            rowDict = {}
            for h, r in zip(headings, thisRow):
                rowDict[h] = _options[r.ctype](r)
            thisSheet.append(rowDict)
        allSheets[str(s.name)] = thisSheet
    return allSheets 
```

作者在这里：

```
import xlwt

def write(workbookDict, colMap, filename):
    '''
       workbookDict should be a map of sheet names to a list of dictionaries.
       Each member of the list should be a mapping of column names to contents,
       missing keys are handled with the nullEntry field. colMap should be a
       dictionary whose keys are identical tto the sheet names in the workbookDict.
       Each value is a list of column names that are assumed to be in order.
       If a key exists in the workbookDict that does not exist in the colDict, the
       entry in workbookDict will not be written.
    '''

    workbook = xlwt.Workbook()

    for sheet in workbookDict.keys():
        worksheet = workbook.add_sheet(sheet)
        cols = colMap[sheet]
        i = 0
        writeCols = True
        while i <= len(workbookDict[sheet]):
            if writeCols:
                for j in range(len(cols)):
                    if writeCols:  # write col headings
                        worksheet.write(i, j, cols[j])
                writeCols = False
            else:
                for j in range(len(cols)):
                    worksheet.write(i, j, workbookDict[sheet][(i-1)][cols[j]])
            i += 1

    workbook.save(filename) 
```

无论如何，我真的希望这对你有用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-14T12:39:38.943

```
wb = openpyxl.load_workbook('enter your workbook name')

sheet = wb.get_sheet_by_name('enter your sheet name')

row=sheet.max_row

for row in range (3,row):

   if sheet.cell(row=row, column=1).value is not None and sheet.cell(row=row+1,column=1).value is None:

        sheet.cell(row=row+1, column=1).value = sheet.cell(row=row, column=1).value

 wb.save('enter your workbook name') 
```

# linux - 用于将数据传入和传出基于 WebKit 的浏览器的方法

> ID：14567547
> 
> 赞同：0
> 
> 时间：2013-01-28T17:19:31.720
> 
> 标签：linux, web-applications, web, webkit, webkitgtk

我使用`WebKitGTK+ ( WebKit )`的应用程序将是一个在 Linux 环境中运行的非常简单的 Web 浏览器，作为一个单独的可执行文件，需要在另一个应用程序之间交换数据。该系统如下图所示：

![在此处输入图像描述](../Images/5178e64093a409c1010d2f242986e8df.png)

示例场景：

*   检测到智能卡插入等事件`Backend processing Application`
*   读取智能卡数据并将其传递给`WebKitGTK+ GUI Application`
*   用户与显示的“网页”交互`WebKitGTK+ Application`
*   数据从`WebKitGTK+ Application`后端传递到`Backend processing Application`

`WebKitGTK+ Application`在和之间传递数据的常用方法是`Backend processing Application`什么？

`WebKitGTK+ 是否提供了一些钩子来做这种事情？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T04:18:01.047

我知道这是一个老问题，但会尽力回答它，以便对其他人有用。

Webkit 基本上是在渲染一个 html 页面。您可以连接到 webkit 提供的各种信号并对这些信号采取行动。更多详情请访问[http://webkitgtk.org/reference/webkitgtk/stable/webkitgtk-webkitwebview.html](http://webkitgtk.org/reference/webkitgtk/stable/webkitgtk-webkitwebview.html)

对于您的后端应用程序，如果发生有趣的事情，您可以通过导航到新 url、新页面内容或仅通过设置所需元素的文本来更新页面。Webkit 提供了 DOM api 功能，所有这些都是可能的。

从 webkit 获取数据并将其发送到您的后端系统时会变得很有趣。同样，这取决于您的特定设计，但通常您可以在用户单击按钮并获取内容时连接诸如导航信号之类的信号。另一种选择是使用警报处理程序并简单地使用javascript警报并在后端处理警报数据。

无耻插件例如：[https](https://github.com/nhrdl/notesMD) ://github.com/nhrdl/notesMD 。它使用一个简单的数据库后端，可能是一个很好的用例，因为它在数据库和网页之间来回发送数据。甚至操纵链接，以便发生所需的操作。

# asp.net - 使用 ReportViewer 传递参数

> ID：14567549
> 
> 赞同：0
> 
> 时间：2013-01-28T17:19:36.217
> 
> 标签：asp.net, visual-studio-2010, reportviewer

我曾经与`winForm`. 现在我需要`report`使用`Web`. 我需要知道如何通过`parameters`使用`WebForms`. 我有一些东西，但不知道如何将它传递到其他`parameter`页面`reportviewer`

```
ReportParameter[] param = new ReportParameter[2];
            param[0] = new ReportParameter("usr",Drop_Responsaveis.SelectedValue.ToString());
            param[1] = new ReportParameter("clube", Drop_Clientes.SelectedValue.ToString()); 
```

这是正确的吗 ？创建`parameters`at 一个页面并将其传递到另一个包含`reportviewer` ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:58:26.587

您可以使用 Querystring 或 Session 将值传递到下一页。例如`page2.aspx?clube=1234&user=John`

然后您可以从查询字符串中检索值并传递给报表查看器

```
param[0] = new ReportParameter("usr", Request.QueryString["user"]);
param[1] = new ReportParameter("clube",  Request.QueryString["clube"]); 
```

# c# - 如何向 FileZilla Server 添加自定义事件处理程序？

> ID：14567552
> 
> 赞同：1
> 
> 时间：2013-01-28T17:19:47.977
> 
> 标签：c#, ftp, filezilla

我想向 FileZilla 服务器添加一个事件处理程序。只要上传完成，它就会被触发。

Serv-U 有这个功能，我希望 FileZilla 也有这个功能。由于许可要求，我需要离开 Serv-U。

我更喜欢 C# 解决方案，但任何有效的东西都会受到赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:40:09.167

对于其他找到此帖子的人。

没有添加事件处理程序的内置功能。

服务器的源代码可用，用非托管 C++ 编写并使用 Visual Studio 编译。

有一些与日志记录相关的函数可以用来添加事件处理，但一些必需的数据（例如文件名和用户信息）存储在受保护或私有变量中。这使得在代码中确定文件被成功移动的位置或文件移动失败时，很难同时访问文件的名称、用户等。

在这个时候，我不确定这是否值得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-01T08:31:26.733

试试[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher%28v=vs.110%29.aspx)类。这可用于为任何 ftp 服务器的文件上传创建 C# 事件。

# android - Android 是否支持 TLS 压缩？

> ID：14567561
> 
> 赞同：1
> 
> 时间：2013-01-28T17:20:09.023
> 
> 标签：android, ssl, compression

我正在尝试为我的应用程序找到一种按照[RFC 3749](https://www.rfc-editor.org/rfc/rfc3749)使用压缩的方法，但我没有在 Android 的 javax.net.ssl 包中找到任何启​​用/指定压缩的选项。我确实看到javax.net.ssl 使用的[OpenSSL](http://en.wikipedia.org/wiki/Comparison_of_TLS_implementations)支持 DEFLATE 压缩。是否有任何开源库/实现允许在 Android 中使用此功能？

# php - 在导航栏中更改当前活动页面的颜色/背景

> ID：14567563
> 
> 赞同：-1
> 
> 时间：2013-01-28T17:20:13.700
> 
> 标签：php, jquery, css, ssi, server-side-includes

我正在设计我的移动网站并使用导航链接的大标签，我如何显示用户当前在哪个页面上，例如链接背景是红色的，而无需手动更改每个单独页面的每个链接上的 css。

我的页面使用服务器端包括使用 PHP 作为我的标题，其中包括我的导航。如何以这种方式将类添加到单独的页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:24:04.137

您可以使用纯 CSS 来完成。

观看这些参考视频。

[部分 - 1](http://www.youtube.com/watch?v=tS_ns96LrAU) [部分 - 2](http://www.youtube.com/watch?v=9-FV2dzYgE8)

希望能帮助到你。

# php - 从 HTML 网页中的 Google Maps iframe 获取坐标

> ID：14567565
> 
> 赞同：1
> 
> 时间：2013-01-28T17:20:18.473
> 
> 标签：php, javascript, html, maps

我目前在我的 HTML 页面中嵌入了一个谷歌地图窗口（iframe），我想知道是否可以在用户每次点击地图时检索坐标。这可能吗？我应该使用 JavaScript 来执行此操作吗？

我还想知道是否可以禁用单击指定地标时出现的地图弹出窗口。

这是我工作的开始：

```
<!DOCTYPE html>
<html>
<body>

<h1>Tour Creator</h1>

<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/?ie=UTF8&amp;ll=41.807933,-72.249892&amp;spn=0.015754,0.033023&amp;t=h&amp;z=16&amp;output=embed"></iframe><br /><small><a href="https://maps.google.com/?ie=UTF8&amp;ll=41.807933,-72.249892&amp;spn=0.015754,0.033023&amp;t=h&amp;z=16&amp;source=embed" style="color:#0000FF;text-align:left">View Larger Map</a></small>

</body>
</html> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:23:23.943

听起来您想使用实际的地图 API，而不仅仅是嵌入式地图。

在此处查看 API 文档 - [https://developers.google.com/maps/documentation/javascript/tutorial](https://developers.google.com/maps/documentation/javascript/tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T05:14:23.673

使用 api，是您最好的选择，如果您设法从 dom 或 javascript 变量中破解值（不太可能），您可能无法保证 google 会将坐标保留在该位置，并且当然，不会有文档，如果您在其他地方获得值，您的代码将不可靠。

# ruby-on-rails - 强制关闭模型的每个查询以及嵌套

> ID：14567567
> 
> 赞同：1
> 
> 时间：2013-01-28T17:20:21.690
> 
> 标签：ruby-on-rails, rails-activerecord, default-scope

我首先想到的是使用`default_scope`对每个请求强制一个条件，但它似乎不起作用。

例如，如果我有`Product.include(:prices)`它将不使用默认范围。我不确定它是否是正确的行为。

我`default_scope`的价格是这样的：

```
default_scope where(type: "normal") 
```

我正在开发一种移植到 Rails 的“crm”，我们感兴趣的唯一价格类型是“正常”价格。我可以在任何地方编辑代码，但是每当需要从数据库中查询价格时，“强制”条件会简单得多。出于同样的原因，使用`named_scope`目前也不是替代方案，因为它可能需要大量重构。

更多信息，因为它“应该”工作但没有......

```
class Ts::Price < ActiveRecord::Base
  acts_as_terrasoft
  default_scope where(PriceKindID: "{43D5117A-D52D-4E72-B33B-7D3158524BF1}")

  .. 

  other scopes

  ..
end 
```

实际调用

```
products = Product.includes(:supplier, :prices, :user)

... some more where unrelated to prices

products = products.find(:all, {
  conditions: {
      :vendors_Products => {
          AccountTypeID: type
      }
  },
  limit: @count,
  offset: @offset * @count
}) 
```

产品

```
class Ts::Product < ActiveRecord::Base
  acts_as_terrasoft

  self.table_name =   "Products"
  self.primary_key =  "ID"

  has_many :prices, class_name: "::Ts::Price", foreign_key: "ProductID", :dependent => :destroy
end 
```

# 编辑

导轨 3.2.8

# php - Sql 请求“非空”

> ID：14567571
> 
> 赞同：3
> 
> 时间：2013-01-28T17:20:33.887
> 
> 标签：php, mysql, pdo, null

我有表格，其中包含 id、姓名、电子邮件、消息、电话、链接和登录名。登录名可以为空（空）。

它是我的 sql 请求：

```
$dbh = new PDO("mysql:host=$dbHost;dbname=$dbName", $dbUser, $dbPassword);
$sth = $dbh->query('SELECT * FROM `form` WHERE login NOT NULL ');
$sth->setFetchMode(PDO::FETCH_ASSOC); 
```

有这个错误

```
 Call to a member function setFetchMode() on a non-object 
```

我知道，它的错误是“WHERE login NOT NULL”。我如何正确地提出这个要求？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T17:21:54.103

缺少一个`IS`

```
SELECT * FROM `form` WHERE login IS NOT NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:22:22.810

尝试`IS NOT NULL`而不是仅仅`NOT NULL`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T17:25:58.490

您正在寻找：

“在哪里登录不为空”

# image - Matlab - 区分 RGB 或灰度图像中重叠的低对比度对象

> ID：14567580
> 
> 赞同：3
> 
> 时间：2013-01-28T17:21:14.527
> 
> 标签：image, matlab, image-processing, filtering, detection

我在检测图像中的对象时遇到了一个大问题——我知道这个话题已经在许多论坛中得到了高度的讨论，但我在过去的 4 天里一直在寻找答案，但没有找到答案。

事实上：我有一张来自分支的图片（[http://cl.ly/image/343Y193b2m1c](http://cl.ly/image/343Y193b2m1c)）。我的目标是计算这张照片中的每一根针。所以我不得不面对几个问题：

将带有针头的分支与背景分开（在这种情况下没有问题）。

选择针的边界。这是一个大问题；我尝试了不同的方法，包括所有边缘（）函数，但问题总是相同的 - 针周围的边界没有关闭 - 这导致了最后一个问题：

针是重叠的！这会导致“针之间的正方形”，如果我使用 imfill() 或相等的公式，则填充而不是针。并且：针集中的地方（一个地方有很多针）几乎无法区分。

我尝试了分水岭，我尝试增强对比度，Kmeans 聚类，我尝试了 imerose、imdilate 和相关功能以及后续的边缘检测。我还尝试对图片进行一些过滤和平滑处理，以便稍微“锐化”针，这样并不是每一个颜色的微小变化都被识别为边框（这是另一个问题）。

我对matlab比较陌生，所以我不知道我要寻找什么。我尝试按照用于核检测的 MatLab 教程进行操作 - 但这样我就可以获得所有绿色物体（一次所有针）。

我希望这个问题以前没有出现过 - 如果是的话，我为双重职位深表歉意。如果有人知道该做什么或使用什么方法，那将是很棒的，并且可以保护这个非常糟糕的一周开始。

非常感谢您，

菲利普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:25:40.363

区分重叠的对象非常非常困难，尤其是在您不知道必须区分多少对象的情况下。你的大脑在区分重叠对象方面比我知道的任何分割算法都要好得多，因为它能够整合很多难以编码的信息。因此：如果您自己无法区分某些功能，请忘记通过代码进行操作。

话虽如此，可能有一种方法可以让您获得针的大致数量：如果您可以将图像像素分为两类：“针”与“非针”，并且您知道有多少区域您的照片被针覆盖（在拍照时包括尺子可能会有所帮助），然后您可以将“针”像素数除以单个针覆盖的像素数以估计针的总数在图像中。由于重叠，这会有点低估针数，并且会低估针越密集（由于更多重叠），但它应该允许您自动比较具有大量针的分支和具有少量针的分支，以及至于识别时间变化，这应该是您的目标之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:59:20.247

我同意@Jonas = 你自己遇到了一个巨大的问题。

让我提几个建议。

首先，沿着@Jonas 的方向，而不是获得准确的计数，另一种粗略估计的方法是计算**针尖**。显然，并非所有提示都清晰可见。但是，如果你能得到一个清晰的分支遮罩，那么使用你自己提到的一些形态学操作来识别针尖可能相对容易。

其次，有什么方法可以获取更多信息？例如，如果您可以获得深度信息，它可能有助于将针彼此区分开来（它不会完全解决任务，但可能会有所帮助）。您可能会从立体图像中获得深度信息——也就是说，在稍微移动相机的同时拍摄两张树枝的照片。如果您可以使用 Kinect 设备（或其他一些测距相机），您可以直接获取深度图...

# java - 自定义 Json 序列化器，在自定义 json 序列化器中

> ID：14567582
> 
> 赞同：2
> 
> 时间：2013-01-28T17:21:18.737
> 
> 标签：java, jackson, mapper

首先，我有：

```
public class Person {

    private String name;

    @JsonSerialize(using=SSNJsonSerializer.class)
    private SSN ssn;

} 
```

这有效..

现在我有一个“包装类”，例如：

```
public class Response {

    private Integer total;

    @JsonSerializer(contentUsing=ResponseJsonSerializer.class)
    private List<Object> itens;
    private Boolean success;

} 
```

itens 可以是人员列表。但我不能序列化（人的）所有字段。ResponseJsonSerializer 知道可以写什么；

Insite ResponseJsonSerializer，我有：

```
jgen.writeObjectField(name, field.get(value) ); 
```

但控制台说：`No serializer found for class ...SSN and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationConfig.Feature.FAIL_ON_EMPTY_BEANS) )`

我如何在 ResponseJsonSerializer 中使用在字段上声明的序列化程序？

# avr - Xmega-A1 Xplained 在禁用 JTAG 保险丝后没有响应

> ID：14567583
> 
> 赞同：0
> 
> 时间：2013-01-28T17:21:20.443
> 
> 标签：avr, avrdude

我有一个[XMEGA-A1 Xplained](http://www.atmel.com/tools/XMEGA-A1XPLAINED.aspx)和一个 JTAG ICE mkII。我只是尝试在 Linux 上使用 avrdude。我做的第一件事是尝试关闭 JTAG 保险丝以使用 PDI（因为[硬件用户指南](http://www.atmel.com/Images/doc8370.pdf)说 JTAG 和 PDI 不能一起使用 - 第 9.3 节），但现在我只有 8 个快速闪烁的 LED 并且没有与设备通信的能力。USB 连接器上的 LED 呈绿色/红色常亮，但重新插入 USB 时红色会闪烁。如果我按下 SW0，LED 会停止闪烁，但只要我一松手，它们就会重新开始，按下其他 7 个按钮中的任何一个似乎都没有效果。

当我现在尝试与设备通信时，我得到的只是：

```
$ avrdude -p x128a1 -c jtag2pdi -P usb -v

avrdude: jtagmkII_setparm(): bad response to set parameter command: RSP_FAILED
avrdude: jtagmkII_close(): bad response to GO command: RSP_ILLEGAL_EMULATOR_MODE

avrdude done.  Thank you. 
```

如果我使用`jtag2slow`（以前有效），我会得到：

```
avrdude: jtagmkII_setparm(): bad response to set parameter command: RSP_FAILED
avrdude: initialization failed, rc=-1
     Double check connections and try again, or use -F to override
     this check.

avrdude: jtagmkII_close(): bad response to GO command: RSP_ILLEGAL_EMULATOR_MODE

avrdude done.  Thank you. 
```

我用来设置保险丝的命令取自 Eclipse 生成的内容：`-Ufuse4:w:0x1:m`

有没有办法“闯入”设备并重新建立通信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:37:04.540

这是由于（自制）squid 电缆中的连接不良导致 JTAGICE mkII 无法通过 PDI 连接进行通信造成的。我做了一个新的，一切都很好。再次计算出正确的连接花了一些时间，因为似乎没有人将两个连接表放在一起（即 AVR 帮助中的“连接到 PDI 目标”和“表 4.1：编程头” Xplained 用户指南），我的 squid 电缆全是灰色的，我在写下连接之前断开了它（不要这样做！）。所以，就在这里。

## 如何通过 PDI 连接 XMega-A1 Xplained 与 JTAGICE mkII

```
-------------------------------------------------- ----
| JTAGICE mkII | XMEGA-A1 Xplained |
|--------------------------------+---------------- ---|
| 销 | JTAG 名称 | 鱿鱼色 | 销 | PDI 名称 |
|-----------------+-------------+---------------- ---|
| 2 | 接地 | 白色 | 2 | 接地 |
| 4 | 参考值 | 紫色 | 4 | VCC |
| 6 | nSRST | 绿色 | 6 | PCI_CLK |
| 9 | TDI | 红色 | 3 | PDI_DATA |
-------------------------------------------------- ----

```

## 设置保险丝

这在文档中有所提及，但值得在此重复：一旦将`JTAGEN`熔断器设置为 1（即禁用 JTAG），返回 JTAG 的唯一方法是建立 PDI 连接并将熔断器设置回 0。

如果无法通过 PDI 编程，设置熔丝时要非常小心，就像将熔丝字节 4 设置`0x01`为 一样，以及设置`JTAGEN`，您还将禁用外部复位（第 4 位）并且无法使用 ISP 编程。如果你看上面，你会看到这就是我所做的。

显然，并不是所有的 JTAGICE mkII 都可以做 PDI（我的可以），所以在你烧断这个保险丝之前一定要确保！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T16:40:28.887

我遇到了同样的问题，这是因为我正在刷新 .elf 文件而不是 .hex。

为了解决它，我做了下一个：

1.  断开 xplained usb 电缆以断开微型计算机的电源。
2.  重新连接 USB 电缆，并尽可能快地发送命令以重新编程微型计算机。如果有人能帮忙就更好了。

它对我有用。

# html - 如何使 :before 内容垂直居中？

> ID：14567585
> 
> 赞同：1
> 
> 时间：2013-01-28T17:21:27.730
> 
> 标签：html, css, pseudo-element

我想让`:before`内容垂直居中，并且我希望里面的**所有**文本`blockquote`都填充到**:before**内容的右侧。

[http://jsfiddle.net/m3jEH/](http://jsfiddle.net/m3jEH/)

我尝试更改`height`,`line-height`和`min-height`，但这些都不允许我垂直居中并填充内容（我希望这适用于内容可能的任何长度）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:51:42.860

试试这个（如果我理解正确的话）：

```
blockquote {
 background-color: #fcc;
 padding: 20px 20px 20px 60px;
 margin: 30px;
 position: relative
}

blockquote::before {
 content: '{ }';
 color: #b8a08e;
 text-shadow: 0 1px #412917;
 font-size: 30px;
 font-weight: bold;
 position: absolute;
 top: 50%;
 left: 15px;
 margin-right: 12px;
 margin-bottom: 12px;
 min-height: 100%;
 height: 100%;
 margin-top:-25px
} 
```

# django - RESTful API 的令牌认证：是否应该定期更改令牌？

> ID：14567586
> 
> 赞同：137
> 
> 时间：2013-01-28T17:21:28.897
> 
> 标签：django, rest, restful-authentication, django-rest-framework

我正在使用 Django 和[django-rest-framework](http://www.django-rest-framework.org/)构建一个 RESTful API 。

作为身份验证机制，我们选择了“令牌身份验证”，并且我已经按照 Django-REST-Framework 的文档实现了它，问题是，应用程序是否应该定期更新/更改令牌，如果是，如何？应该是需要更新令牌的移动应用程序还是网络应用程序应该自主执行？

最佳做法是什么？

这里的任何人都对 Django REST 框架有经验并且可以提出技术解决方案吗？

（最后一个问题的优先级较低）

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-03-13T08:56:54.827

让移动客户端定期更新其身份验证令牌是一种很好的做法。这当然是由服务器来强制执行的。

默认的 TokenAuthentication 类不支持这个，但是你可以扩展它来实现这个功能。

例如：

```
from rest_framework.authentication import TokenAuthentication, get_authorization_header
from rest_framework.exceptions import AuthenticationFailed

class ExpiringTokenAuthentication(TokenAuthentication):
    def authenticate_credentials(self, key):
        try:
            token = self.model.objects.get(key=key)
        except self.model.DoesNotExist:
            raise exceptions.AuthenticationFailed('Invalid token')

        if not token.user.is_active:
            raise exceptions.AuthenticationFailed('User inactive or deleted')

        # This is required for the time comparison
        utc_now = datetime.utcnow()
        utc_now = utc_now.replace(tzinfo=pytz.utc)

        if token.created < utc_now - timedelta(hours=24):
            raise exceptions.AuthenticationFailed('Token has expired')

        return token.user, token 
```

还需要覆盖默认的 rest 框架登录视图，以便在登录时刷新令牌：

```
class ObtainExpiringAuthToken(ObtainAuthToken):
    def post(self, request):
        serializer = self.serializer_class(data=request.data)
        if serializer.is_valid():
            token, created =  Token.objects.get_or_create(user=serializer.validated_data['user'])

            if not created:
                # update the created time of the token to keep it valid
                token.created = datetime.datetime.utcnow()
                token.save()

            return Response({'token': token.key})
        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)

obtain_expiring_auth_token = ObtainExpiringAuthToken.as_view() 
```

并且不要忘记修改网址：

```
urlpatterns += patterns(
    '',
    url(r'^users/login/?$', '<path_to_file>.obtain_expiring_auth_token'),
) 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-02-02T06:22:11.870

如果有人对该解决方案感兴趣，但想要一个在一段时间内有效的令牌，那么会**被一个新令牌替换，**这是完整的解决方案（Django 1.6）：

你的模块/views.py：

```
import datetime
from django.utils.timezone import utc
from rest_framework.authtoken.views import ObtainAuthToken
from rest_framework.authtoken.models import Token
from django.http import HttpResponse
import json

class ObtainExpiringAuthToken(ObtainAuthToken):
    def post(self, request):
        serializer = self.serializer_class(data=request.DATA)
        if serializer.is_valid():
            token, created =  Token.objects.get_or_create(user=serializer.object['user'])

            utc_now = datetime.datetime.utcnow()    
            if not created and token.created < utc_now - datetime.timedelta(hours=24):
                token.delete()
                token = Token.objects.create(user=serializer.object['user'])
                token.created = datetime.datetime.utcnow()
                token.save()

            #return Response({'token': token.key})
            response_data = {'token': token.key}
            return HttpResponse(json.dumps(response_data), content_type="application/json")

        return HttpResponse(serializer.errors, status=status.HTTP_400_BAD_REQUEST)

obtain_expiring_auth_token = ObtainExpiringAuthToken.as_view() 
```

你的模块/urls.py：

```
from django.conf.urls import patterns, include, url
from weights import views

urlpatterns = patterns('',
    url(r'^token/', 'yourmodule.views.obtain_expiring_auth_token')
) 
```

您的项目 urls.py（在 urlpatterns 数组中）：

```
url(r'^', include('yourmodule.urls')), 
```

你的模块/身份验证.py：

```
import datetime
from django.utils.timezone import utc
from rest_framework.authentication import TokenAuthentication
from rest_framework import exceptions

class ExpiringTokenAuthentication(TokenAuthentication):
    def authenticate_credentials(self, key):

        try:
            token = self.model.objects.get(key=key)
        except self.model.DoesNotExist:
            raise exceptions.AuthenticationFailed('Invalid token')

        if not token.user.is_active:
            raise exceptions.AuthenticationFailed('User inactive or deleted')

        utc_now = datetime.datetime.utcnow()

        if token.created < utc_now - datetime.timedelta(hours=24):
            raise exceptions.AuthenticationFailed('Token has expired')

        return (token.user, token) 
```

在您的 REST_FRAMEWORK 设置中，将 ExpiringTokenAuthentication 添加为 Authentification 类而不是 TokenAuthentication：

```
REST_FRAMEWORK = {

    'DEFAULT_AUTHENTICATION_CLASSES': (
        'rest_framework.authentication.SessionAuthentication',
        #'rest_framework.authentication.TokenAuthentication',
        'yourmodule.authentication.ExpiringTokenAuthentication',
    ),
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-04-24T01:27:13.393

以为我会使用 DRY 给出 Django 2.0 答案。有人已经为我们构建了这个，谷歌 Django OAuth ToolKit。可用于 pip `pip install django-oauth-toolkit`，. [使用路由器添加令牌视图集的说明： https](https://django-oauth-toolkit.readthedocs.io/en/latest/rest-framework/getting_started.html) ://django-oauth-toolkit.readthedocs.io/en/latest/rest-framework/getting_started.html 。跟官方教程差不多。

所以基本上 OAuth1.0 更像是昨天的安全性，这就是 TokenAuthentication。为了获得精美的过期令牌，OAuth2.0 现在风靡一时。您将获得一个 AccessToken、RefreshToken 和范围变量来微调权限。你最终会得到这样的信任：

```
{
    "access_token": "<your_access_token>",
    "token_type": "Bearer",
    "expires_in": 3600,
    "refresh_token": "<your_refresh_token>",
    "scope": "read"
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-05-24T16:18:33.863

我试过@odedfos 的回答，但[我有误导性的错误](https://stackoverflow.com/questions/16736710/wsgirequest-object-has-no-attribute-successful-authenticator?noredirect=1#comment24104003_16736710)。这是相同的答案，已修复并具有适当的导入。

`views.py`

```
from django.utils import timezone
from rest_framework import status
from rest_framework.response import Response
from rest_framework.authtoken.models import Token
from rest_framework.authtoken.views import ObtainAuthToken

class ObtainExpiringAuthToken(ObtainAuthToken):
    def post(self, request):
        serializer = self.serializer_class(data=request.DATA)
        if serializer.is_valid():
            token, created =  Token.objects.get_or_create(user=serializer.object['user'])

            if not created:
                # update the created time of the token to keep it valid
                token.created = datetime.datetime.utcnow().replace(tzinfo=utc)
                token.save()

            return Response({'token': token.key})
        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST) 
```

`authentication.py`

```
from datetime import timedelta
from django.conf import settings
from django.utils import timezone
from rest_framework.authentication import TokenAuthentication
from rest_framework import exceptions

EXPIRE_HOURS = getattr(settings, 'REST_FRAMEWORK_TOKEN_EXPIRE_HOURS', 24)

class ExpiringTokenAuthentication(TokenAuthentication):
    def authenticate_credentials(self, key):
        try:
            token = self.model.objects.get(key=key)
        except self.model.DoesNotExist:
            raise exceptions.AuthenticationFailed('Invalid token')

        if not token.user.is_active:
            raise exceptions.AuthenticationFailed('User inactive or deleted')

        if token.created < timezone.now() - timedelta(hours=EXPIRE_HOURS):
            raise exceptions.AuthenticationFailed('Token has expired')

        return (token.user, token) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-12-27T02:31:43.340

作者问

> 问题是，应用程序是否应该定期更新/更改令牌，如果是，如何？应该是需要更新令牌的移动应用程序还是网络应用程序应该自主执行？

但是所有的答案都是关于如何自动更改令牌的。

**我认为通过令牌定期更改令牌是没有意义的。** 其余框架创建一个有 40 个字符的令牌，如果攻击者每秒测试 1000 个令牌，则需要`16**40/1000/3600/24/365=4.6*10^7`数年才能获得令牌。您不必担心攻击者会一一测试您的令牌。即使你改变了你的令牌，猜到你令牌的概率是一样的。

如果你担心攻击者可能会得到你的令牌，所以你定期更改它，而不是攻击者得到令牌后，他也可以更改你的令牌，而不是真正的用户被踢出去。

您真正应该做的是防止攻击者获取您的用户令牌，请**使用 https**。

顺便说一句，我只是说逐个令牌更改令牌是没有意义的，通过用户名和密码更改令牌有时是有意义的。也许令牌用于某些 http 环境（您应该始终避免这种情况）或某些第三方（在这种情况下，您应该创建不同类型的令牌，使用 oauth2）以及当用户执行一些危险的事情时，例如更改绑定邮箱或删除帐户，您应该确保不再使用原始令牌，因为它可能已被攻击者使用嗅探器或 tcpdump 工具泄露。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-05-09T05:25:47.360

您可以利用[http://getblimp.github.io/django-rest-framework-jwt](http://getblimp.github.io/django-rest-framework-jwt)

该库能够生成具有到期日期的令牌

要了解 DRF 默认令牌和 DRF 提供的令牌之间的区别，请查看：

[如何使用多个网络服务器使 Django REST JWT 身份验证扩展？](https://stackoverflow.com/questions/26126622/how-to-make-django-rest-jwt-authentication-scale-with-mulitple-webservers/30136310#30136310)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-05-16T08:43:53.177

无论是针对移动客户端还是 Web 客户端，在您的应用程序上设置过期机制都是一种很好的做法。有两种常见的解决方案：

1.  系统令牌过期（在特定时间之后），用户必须再次登录才能获得新的有效令牌。

2.  系统会自动过期旧令牌（在特定时间之后）并用新令牌替换它（更改令牌）。

两种解决方案的共同点：

### settings.py 中的更改

```
DEFAULT_AUTHENTICATION_CLASSES = [
# you replace right path of 'ExpiringTokenAuthentication' class
'accounts.token_utils.ExpiringTokenAuthentication'
]

TOKEN_EXPIRED_AFTER_MINUTES = 300 
```

### 创建 token_utils.py

```
from django.conf import settings
from datetime import timedelta

from django.conf import settings
from django.utils import timezone
from rest_framework.authentication import TokenAuthentication
from rest_framework.authtoken.models import Token
from rest_framework.exceptions import AuthenticationFailed

def expires_in(token: Token):
elapsed_time = timezone.now() - token.created
return timedelta(minutes=settings.TOKEN_EXPIRED_AFTER_MINUTES) - elapsed_time

def is_token_expired(token):
return expires_in(token) < timedelta(seconds=0) 
```

### 您的观点的变化：

```
@api_view(['GET'])
@authentication_classes([ExpiringTokenAuthentication])
@permission_classes([IsAuthenticated])
def test(request):
    ...
return Response(response, stat_code) 
```

如果使用选项 1，请将这些行添加到 token_utils.py

```
def handle_token_expired(token):
Token.objects.filter(key=token).delete()

class ExpiringTokenAuthentication(TokenAuthentication):

    def authenticate_credentials(self, key):
        try:
            token = Token.objects.get(key=key)
        except Token.DoesNotExist:
            raise AuthenticationFailed("Invalid Token!")

        if not token.user.is_active:
            raise AuthenticationFailed("User inactive or deleted")

        if is_token_expired(token):
            handle_token_expired(token)
            msg = "The token is expired!, user have to login again." 
            response = {"msg": msg}
            raise AuthenticationFailed(response)

    return token.user, token 
```

如果使用选项 2，请将这些行添加到 token_utils.py

```
def handle_token_expired(token):
    is_expired = is_token_expired(token)
    if is_expired:
        token.delete()
        token = Token.objects.create(user = token.user)
    return is_expired, token

class ExpiringTokenAuthentication(TokenAuthentication):
    """
    when token is expired, it will be removed
    and new one will be created
    """
    def authenticate_credentials(self, key):
        try:
            token = Token.objects.get(key = key)
        except Token.DoesNotExist:
            raise AuthenticationFailed("Invalid Token")

        if not token.user.is_active:
            raise AuthenticationFailed("User is not active")

        is_expired, token = handle_token_expired(token)
        if is_expired:
            raise AuthenticationFailed("The Token is expired")

        return (token.user, token) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-18T17:10:06.630

如果您注意到令牌就像会话 cookie，那么您可以坚持 Django 中会话 cookie 的默认生命周期：[https](https://docs.djangoproject.com/en/1.4/ref/settings/#session-cookie-age) ://docs.djangoproject.com/en/1.4/ref/settings/#session-cookie-age 。

我不知道 Django Rest Framework 是否会自动处理该问题，但您始终可以编写一个简短的脚本来过滤掉过时的脚本并将它们标记为过期。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-28T23:45:48.987

只是想我会添加我的，因为这对我有帮助。我通常使用 JWT 方法，但有时这样的方法更好。我使用正确的导入更新了 django 2.1 的公认答案。

身份验证.py

```
from datetime import timedelta
from django.conf import settings
from django.core.exceptions import ObjectDoesNotExist
from django.utils import timezone
from rest_framework.authentication import TokenAuthentication
from rest_framework import exceptions

EXPIRE_HOURS = getattr(settings, 'REST_FRAMEWORK_TOKEN_EXPIRE_HOURS', 24)

class ExpiringTokenAuthentication(TokenAuthentication):
    def authenticate_credentials(self, key):
        try:
            token = self.get_model().objects.get(key=key)
        except ObjectDoesNotExist:
            raise exceptions.AuthenticationFailed('Invalid token')

        if not token.user.is_active:
            raise exceptions.AuthenticationFailed('User inactive or deleted')

        if token.created < timezone.now() - timedelta(hours=EXPIRE_HOURS):
            raise exceptions.AuthenticationFailed('Token has expired')

    return token.user, token 
```

视图.py

```
import datetime
from pytz import utc
from rest_framework import status
from rest_framework.response import Response
from rest_framework.authtoken.models import Token
from rest_framework.authtoken.views import ObtainAuthToken
from rest_framework.authtoken.serializers import AuthTokenSerializer

class ObtainExpiringAuthToken(ObtainAuthToken):
    def post(self, request, **kwargs):
        serializer = AuthTokenSerializer(data=request.data)

        if serializer.is_valid():
            token, created = Token.objects.get_or_create(user=serializer.validated_data['user'])
            if not created:
                # update the created time of the token to keep it valid
                token.created = datetime.datetime.utcnow().replace(tzinfo=utc)
                token.save()

            return Response({'token': token.key})
        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-04-14T17:07:07.563

只是为了继续添加@odedfos 答案，我认为语法已经发生了一些变化，因此 ExpiringTokenAuthentication 的代码需要一些调整：

```
from rest_framework.authentication import TokenAuthentication
from datetime import timedelta
from datetime import datetime
import datetime as dtime
import pytz

class ExpiringTokenAuthentication(TokenAuthentication):

    def authenticate_credentials(self, key):
        model = self.get_model()
        try:
            token = model.objects.get(key=key)
        except model.DoesNotExist:
            raise exceptions.AuthenticationFailed('Invalid token')

        if not token.user.is_active:
            raise exceptions.AuthenticationFailed('User inactive or deleted')

        # This is required for the time comparison
        utc_now = datetime.now(dtime.timezone.utc)
        utc_now = utc_now.replace(tzinfo=pytz.utc)

        if token.created < utc_now - timedelta(hours=24):
            raise exceptions.AuthenticationFailed('Token has expired')

        return token.user, token 
```

另外，不要忘记将其添加到 DEFAULT_AUTHENTICATION_CLASSES 而不是 rest_framework.authentication.TokenAuthentication

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-11-06T15:56:21.890

如果有人想在一段时间不活动后使令牌过期，下面的答案会有所帮助。我正在调整这里给出的答案之一。我在我添加的代码中添加了注释

```
from rest_framework.authentication import TokenAuthentication
from datetime import timedelta
from datetime import datetime
import datetime as dtime
import pytz

class ExpiringTokenAuthentication(TokenAuthentication):

    def authenticate_credentials(self, key):
        model = self.get_model()
        try:
            token = model.objects.get(key=key)
        except model.DoesNotExist:
            raise exceptions.AuthenticationFailed('Invalid token')

        if not token.user.is_active:
            raise exceptions.AuthenticationFailed('User inactive or deleted')

        # This is required for the time comparison
        utc_now = datetime.now(dtime.timezone.utc)
        utc_now = utc_now.replace(tzinfo=pytz.utc)

        if token.created < utc_now - timedelta(minutes=15):  # TOKEN WILL EXPIRE AFTER 15 MINUTES OF INACTIVITY
            token.delete() # ADDED THIS LINE SO THAT EXPIRED TOKEN IS DELETED
            raise exceptions.AuthenticationFailed('Token has expired')
        else: 
            token.created = utc_now #THIS WILL SET THE token.created TO CURRENT TIME WITH EVERY REQUEST
            token.save() #SAVE THE TOKEN

        return token.user, token 
```

# html - 使链接图标与最后一个单词断开

> ID：14567596
> 
> 赞同：0
> 
> 时间：2013-01-28T17:22:01.363
> 
> 标签：html, css

> **可能重复：**
> [添加与最后一个单词断开的链接图标？](https://stackoverflow.com/questions/13780461/add-link-icon-that-breaks-with-last-word)

当文本对于容器来说太长时，我想将最后一个单词换成新行，而不仅仅是出现在它之后的背景图像。

这是问题的一个例子：![文本不与背景图像中断。](../Images/0f51959fb440fcb28cb8bfe4c6d0f4ac.png)

我想要“太”这个词。与背景图像一起跳到下一行。

这是HTML：

```
<ul>
    <li><a href="#" class="myIcon">The name of some link goes here</a></li>
    <li><a href="#" class="myIcon">The name of some link goes here too.</a></li>
    <li><a href="#" class="myIcon">Here is yet another link that could be used</a></li>
    <li><a href="#" class="myIcon">This could be a really long link that one could try to use also</a></li>
    <li><a href="#">The name of some link goes here.</a></li>
    <li><a href="#">The name of some link goes here.</a></li>
    <li><a href="#">The name of some link goes here.</a></li>
</ul> 
```

这是CSS：

```
.myIcon:after {
    height: 16px;
    width: 16px;
    display:inline-block;
    content:'';
    background-image: url("/wps/themes/html/3M.com/images/ui-icons_000000_256x240.png");
    vertical-align:middle;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:51:01.110

你可以在你的css中尝试一个断词，它会自动强制你的文本在一定长度后换行：

```
.myIcon:after {
height: 16px;
width: 16px;
display:inline-block;
content:'';
background-image: url("/wps/themes/html/3M.com/images/ui-icons_000000_256x240.png");
vertical-align:middle;
word-wrap: break-word;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:52:22.903

不幸的是，我认为要确保这适用于跨浏览器，您必须将最后一个单词包装在跨度中，然后将图标应用于跨度。

```
<li><a href="#">This could be a really long link that one could try to use <span class="myIcon">also</span></a></li> 
```

CSS：

```
.myIcon {
    display:inline-block;
    background: url("/wps/themes/html/3M.com/images/ui-icons_000000_256x240.png") no-repeat center right;
    padding-right:16px;
    white-space:nowrap;
    text-decoration:underline;
} 
```

[例子在这里](http://jsfiddle.net/KU6P9/)

# mysql - 如何设置多个“order by”？

> ID：14567600
> 
> 赞同：1
> 
> 时间：2013-01-28T17:22:13.230
> 
> 标签：mysql, sql, sql-order-by

我即将为我的网站制作一个订阅列表，但在我的查询中找不到多个“order by”的解决方案，它确实有效。

我目前的代码是：

```
 select name from data_subscriptions 
 where authVal="1" 
 order by id desc, name asc limit 100 
```

但我只按 id desc 排序，而不是按名称 asc。

数据库：

```
[1] ( id=1, authVal=1, name=Alex )
[2] ( id=2, authVal=1, name=Jens ) 
```

它显示了 Jens，然后是 Alex - 我做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T17:24:57.637

我想也许你想要的是这样的：

```
order by name asc, id desc 
```

这相当于*按名称排序，但如果名称相同，则按 id 排序*

您现有的代码将按 id 排序，如果 id 相同，则按名称排序。我的猜测是 id 永远不会相同，所以它总是以 id 顺序结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:25:57.367

您需要按最重要到最不重要的顺序排列。

```
order by lastname asc, firstname asc 
```

这将按姓氏然后名字排序。仅当姓氏在两行之间匹配时才考虑名字。

```
Doe, John
Smith, Able
Smith, Joe
Smith, John 
```

在您的情况下，id 很可能是您的 PK。在这种情况下，它不应该与其他任何人匹配，因此二级排序永远不会发挥作用。

# c# - c# listbox - 播放第一个选定的项目

> ID：14567601
> 
> 赞同：1
> 
> 时间：2013-01-28T17:22:13.790
> 
> 标签：c#, winforms

这是我的问题：我有一个文本框、按钮和一个列表框。这些功能可以正常工作，但是每当我搜索 Flash 视频时，当我单击搜索按钮时，就会播放列表中的第一个视频。我不希望它在那个时候播放 - 我想从列表中选择而不播放 ListBox 上第一个突出显示的项目。

这是我的代码：

```
private void button1_Click(object sender, EventArgs e)
{
    var path = "C:\\Users\\John\\Desktop\\Video\\FLASH";
    listBox1.DataSource = Directory.GetFiles(path, "*" + txtbox1.Text + "*")
                       .Select(f => Path.GetFileName(f))
                       .ToList();
} 
```

这是搜索按钮。它将`textbox1`从指定路径搜索文本：

```
private void listBox1_DoubleClick(object sender, EventArgs e)
{
    var fileName = listBox1.SelectedItem as string;
    if (fileName != null)
    {
        var path = Path.Combine("C:\\Users\\John\\Desktop\\Video\\FLASH", fileName);
        Process.Start(path);
    }    
} 
```

这是 ListBox，搜索的项目将在此处，但始终选择一个项目，并且每当搜索完成时都会播放该项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:53:02.773

填充列表，然后添加 selectedindexchanged 事件处理程序。（确保设计者没有为您添加事件）。

所以，listBox1.DataSource = ...

listBox1.SelectedIndexChanged += new System.EventHandler(this.listBox1_SelectedIndexChanged);

# c++ - 报告失败值的 C++ 断言宏

> ID：14567602
> 
> 赞同：3
> 
> 时间：2013-01-28T17:22:18.067
> 
> 标签：c++, assert

我的应用程序中有大量运行时断言失败，我需要与每个人坐在一起找出导致此类失败的断言条件的运行时值是多少。例如：

```
assert ( a == b ) ; 
```

在第 100 行失败。在运行时，我只能看到第 100 行发生了一些事情，然后我需要在那里设置一个断点来找出 a 和 b 的实际值。

我的问题是，有什么方法可以获得比行号更多的智能故障报告？我想查看不匹配的变量的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:27:22.117

当然，您可以利用该语言定义自己的断言宏：

```
#define ASSERT_EQUAL(a,b) if ((a) != (b)) std::cout << "Assertion failed:" << (a) << "!=" << (b) << " at:" << __LINE__ 
```

但是，我认为如果您过度依赖断言，您可能希望将其中一些“异常”错误表示为异常。一个好的调试器会捕获这些并按名称描述异常。你可能会说一些比 更有意义的东西`a != b`，例如：

```
if (a != b) {
    throw InvalidArgumentsException(a, b);
} 
```

虽然这很有用，但重要的是要意识到在调试和发布版本中都会抛出异常，而断言通常只在调试版本中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:25:56.747

为什么不直接使用调试器？一个好的调试器会告诉你你需要知道什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-10T21:38:46.763

我释放了[`PPK_ASSERT`](https://github.com/gpakosz/Assert)。示例用法：

```
#include <pempek_assert.h>

int main()
{
  float min = 0.0f;
  float max = 1.0f;
  float v = 2.0f;
  PPK_ASSERT(v > min && v < max, "invalid value: %f, must be between %f and %f", v, min, max);

  return 0;
} 
```

# node.js - 围绕 socket.io 构建 node.js 应用程序

> ID：14567607
> 
> 赞同：2
> 
> 时间：2013-01-28T17:22:33.327
> 
> 标签：node.js, socket.io

我正在基于 websockets 在 Node.js/Express 中编写一个应用程序。我将 Node 的 EventEmitter 与 socket.io 结合使用，用于几乎完全由事件驱动的应用程序。

我想知道这是否是一个很好的架构。我的主套接字现在在 app.js 中管理，代码如下：

```
socket.on(Events.InitialFetch, function(battle_id){
    dispatcher.emit(Events.InitialFetch, battle_id);
  });

dispatcher.on(Events.InitialFetched, function(data){
    socket.emit(Events.InitialFetched, data);
  }); 
```

...在我的控制器中，我有这样的代码：

```
dispatcher.on('initial-fetch', function(data){
    Battle.findOne({_id: data})
        .populate('players')
        .populate('owner')
        .exec(function(err, battle){
        if (err) {

        }
        else {
            dispatcher.emit(Events.InitialFetched, battle);
        }
    });
}); 
```

而不是正常的 RESTful 路由。我担心的是它有点令人困惑（即描述数据流的'fetch'和'fetched'）以及我基本上将方法从一种类型的事件发射器（socket.io）传递给另一种（Event.EventEmitter） .

如何更好地构建它？让控制器直接访问套接字而不是使用 EventEmitter 作为总线会更好吗？如何使我的活动名称更清晰？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:55:32.170

我不会担心使用多个事件发射器。它们是在 Node.js 中构建的一种很好的原语。至于设计，我发现一个很好的问题是我对组件的耦合程度。

通过为控制器使用非 socket.io 事件发射器，Socket.io 是一个独立于控制器的传输。这很好。

作为最后阶段，您应该使用依赖注入将两者连接在一起。在您的`server.js`文件中创建您的调度程序，然后初始化您的 socket.io 模块，将调度程序作为依赖项传递。

```
var dispatcher       = require('./dispatcher')
var socket_transport = require('./socket_transport')

socket_transport.init_with_dispatcher(dispatcher); 
```

这将使您能够独立于传输测试您的调度程序。调试 socket.io 可能很困难。

# python - Python将元素添加到列表（追加）

> ID：14567608
> 
> 赞同：0
> 
> 时间：2013-01-28T17:22:35.607
> 
> 标签：python, windows, function, append

所以我遇到了附加功能的问题。它只是不会将单词添加到列表中。我想做的是帐户登录，您可以在其中添加新帐户，您可以在登录时使用什么。这只是一个示例脚本，它的工作方式相同。我正在尝试向我的 mapp 添加新单词（例如：Guido），然后我可以使用该单词“guido”来让我的程序打印 yay 。所以这是我的示例脚本：

```
mapp = ["example"]

example1 = raw_input("Enter Username: ")
if example1 in mapp:
    print "yay"
else:
    print ("Forgot Username eh?")
    example = raw_input("Enter New Username: ")
    if example not in mapp:
        mapp.append(example) 
```

因此，如果有人可以提供帮助，我们将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:27:51.913

只需将最后一行添加到您的脚本中，就可以看到它实际上正在工作。（编辑添加一个`while`循环，使程序永远运行）。

```
mapp = ["example"]

while True:
    example1 = raw_input("Enter Username: ")
    if example1 in mapp:
        print "yay"
    else:
        print ("Forgot Username eh?")
        example = raw_input("Enter New Username: ")
        if example not in mapp:
            mapp.append(example)

    print mmap 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:27:42.200

它确实将单词（一个单词，因为您只做一次）添加到列表中。添加`print mapp`到最后，你会看到。

# css - 两个div的相对定位

> ID：14567610
> 
> 赞同：1
> 
> 时间：2013-01-28T17:22:39.483
> 
> 标签：css, html, css-position

我做了[这个小提琴](http://jsfiddle.net/6wSAJ/225/)，我希望红色 div 位于黄色 div 的正下方。他们不是。如何定位 div`up`和`down`relative `wrapper`？

猜测它应该很简单，但我无法让它工作。**我想我需要使用 relative**。“条”是时间线，可以自由“浮动”。

**HTML：**

```
<div class="wrapper" style="background:blue">
    <div class="up" style="background:yellow"/>
    <div class="down" style="background:red"/>
</div> 
```

**CSS：**

```
.wrapper {
    width:50px;
    height:400px;
    background:blue;
    margin:1em;
}
.up {
    position:relative;
    top:100px;  /*I want this one 100px from the top of .wrapper*/
    height:100px;
}
.down {
    position:relative;
    top:200px;  /*I want this one 200px from the top of .wrapper*/
    height:50px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T17:27:11.847

`position:relative`涉及到前面`div`。

Div **.up**的高度为 100px，因此要将**.down**直接放在 .up 下方，.down 应该包含`top:100px`. 因此，`top:200px`on .down 会将其放置在 .up 下方 200px 处，这不是您想要的，因为 .up 只有高度 100px。`top`通过将.down 的属性更改为来解决它`top:100px`

如果要相对于包装器定位它，请使用`position:absolute`.

**演示：http:** [//jsfiddle.net/6wSAJ/274](http://jsfiddle.net/6wSAJ/274)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:40:58.600

你不需要设置 top:xx; 如果您只想堆叠黄色和红色，请将您的 html 修改为格式 '<div></div>' 而不是 '<div />'

# sinatra - 如何在 sinatra 上同时使用 sass 和 960gs 系统？

> ID：14567616
> 
> 赞同：0
> 
> 时间：2013-01-28T17:23:14.650
> 
> 标签：sinatra, sass, 960.gs

作为一个实验，我将尝试在 sinatra 上同时使用 sass 和 960gs 系统，但这会出现很多问题。没有人知道我的情况会出什么问题吗？

```
app.rb:
get '/reset.css' do
sass :reset
end
get '/960.css' do
sass :'960gs'
end
get '/main.css' do
sass :main
end
get '/' do
erb :index
end

layout.erb:
<link rel="stylesheet" href="/reset.css"  type="text/css"  />
<link rel="stylesheet" href="/960gs.css"  type="text/css" />
<link rel="stylesheet" href="/main.css"  type="text/css"  /> 
```

960gs.sass、reset.sass、main.sass 位于 views 子目录中，但只有 main.sass 在我运行应用程序时呈现。

感谢帮助。问候 Z。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:37:39.320

我确定我之前已经给出了这个答案，但找不到它......</p>

我的建议是，使用您过去尝试过的路线，预编译这些资产。我将[Guard](https://github.com/guard/guard)与[Guard-SASS](https://github.com/hawx/guard-sass)一起使用，如下所示：

```
guard 'sass', :input => 'app/views/stylesheets', :output => 'app/public/css', :style => "compressed" 
```

然后在布局中使用普通样式表链接。它更易于管理且速度更快。

# javascript - javascript/css 文本突出显示图像内

> ID：14567617
> 
> 赞同：0
> 
> 时间：2013-01-28T17:23:17.360
> 
> 标签：javascript, css, image-processing

我有一个图像格式的文本文档（PNG 文件）。我想使用 javascript/css 以编程方式手动突出显示该图像中的每个句子。我想在网页上使用这种技术。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:25:06.267

您需要使用 OCR 进行一些服务器端处理，以检测图像中句子开始/结束的位置。一旦你知道了，你可以使用 javascript 和 CSS 将 styled `div`s 放置在图像上。

# asp.net - 浏览和上传文件

> ID：14567618
> 
> 赞同：0
> 
> 时间：2013-01-28T17:23:22.373
> 
> 标签：asp.net, file-upload, file-browser

我有一个 ASP.NET (.NET Framework 3.5) 应用程序。现在，我必须在 aspx 页面上放置一个按钮，单击时具有休闲功能：

*   向用户询问扩展名为 xls 的文件 (OpenFileDialog)
*   将所选文件上传到 WebServer 上的特定文件夹

我怎样才能做到这一点？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:29:09.117

您应该从 ASP.NET [FileUpload](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.aspx)控件开始。这是一个关于如何完成此任务的非常好的[教程。](http://www.codeproject.com/Articles/1757/File-Upload-with-ASP-NET)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:30:43.947

这是检查某些文件类型后可用于文件上传的代码。

```
 protected void Upload_File() {
    bool correctExtension = false;

    if (FileUpload1.HasFile) {
        string fileName = FileUpload1.PostedFile.FileName;
        string fileExtension = Path.GetExtension(fileName).ToLower();
        string[] extensionsAllowed = {".xls", ".docx", ".txt"};

        for (int i = 0; i < extensionsAllowed.Length; i++) {
            if (fileExtension == extensionsAllowed[i]) {
                correctExtension = true;
            }
        }

        if (correctExtension) {
            try {
                string fileSavePath = Server.MapPath("~/Files/");
                FileUpload1.PostedFile.SaveAs(fileSavePath + fileName);
                Label1.Text = "File successfully uploaded";
            }
            catch (Exception ex) {
                Label1.Text = "Unable to upload file";
            }
        }
        else {
            Label1.Text = "File extension " + fileExtension + " is not allowed";
        }

    }
} 
```

# android - 如何在 Android 设备上升级\转换 Sqlite 数据库

> ID：14567623
> 
> 赞同：0
> 
> 时间：2013-01-28T17:23:48.990
> 
> 标签：android, sqlite

我有一个用户报告说他有一台运行 Android v 2.2.2 的 HTC Desire 和一台运行 Android v 2.3.4 的 HTC Flyer 平板电脑。

我的应用在他的平板电脑上创建的任何数据库（Sqlite）都无法在他的手机上读取。在他的手机上创建的任何数据库都可以在任一设备上读取。（希望我得到了正确的方法，但希望你明白）

我猜这是因为数据库引擎的版本不同。有没有办法处理这个问题并将一个数据库转换为与另一个数据库相同的格式，允许两个设备打开数据库，而不管是哪个设备创建的？

我确实找到了这个链接，它建议使用命令行进行转换。虽然在设备上不是很有帮助。[http://www.sqlite.org/formatchng.html](http://www.sqlite.org/formatchng.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:09:17.913

似乎问题在于 WAL 模式已打开。[http://www.sqlite.org/wal.html](http://www.sqlite.org/wal.html)

WAL 应该默认为关闭（在我所有的 Nexus 设备上都是如此）。

我只能假设一些制造商认为将设置默认为 On 会很有趣，因此会使数据库与早期版本不兼容。

早于 3.7.0 的任何 SQLite 版本都不支持 Wal 模式，如果尝试，如果在数据库上设置了此标志，则无法打开数据库。

# ruby-on-rails - 重定向用户的来源

> ID：14567625
> 
> 赞同：0
> 
> 时间：2013-01-28T17:23:58.693
> 
> 标签：ruby-on-rails

所以，假设我们有一些小部件和一个小部件控制器，这些小部件位于分布在整个站点的多个控制器中的视图中。

在 Rails 中，使用常规约定，用户在完成小部件编辑后会被重定向到 widgets_path。但是，在这种情况下，我们希望将它们发送回它们来自的任何控制器的#index。

问题是，实现这一点的最佳方法是什么？当然我们可以使用 cookie 来存储上次访问的控制器等，但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:56:21.317

我想你可能想看看`request.referer`你是否可以用它来回到`#index`引用控制器的位置。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T17:31:14.060

看看，正如在[这个 Railscast](http://railscasts.com/episodes/131-going-back)`redirect_to :back`中讨论的那样。

# javascript - 使用 jQuery.getScript 导入多个文件

> ID：14567626
> 
> 赞同：1
> 
> 时间：2013-01-28T17:24:00.057
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何使用 jQuery $.getScript() 方法包含多个 js 文件](https://stackoverflow.com/questions/11803215/how-to-include-multiple-js-files-using-jquery-getscript-method)

我需要在 .js 文件中导入多个文件，我正在查看 getScript jQuery 方法： [http](http://api.jquery.com/jQuery.getScript/) ://api.jquery.com/jQuery.getScript/但这只是加载一个文件，而我想加载 3。

有没有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:27:45.470

你可能想要这样的东西

```
var files = array('filename1', 'filename2');

for (var file in files) {
    $.getScript(file);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:25:06.053

您可以调用该`getScript()`方法 3 次或您要导入的脚本文件数量的多次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T17:29:03.877

你可以这样做，但是你必须调用每个脚本，以及它们加载的顺序，在文件 3 的这个例子中，我们使用回调来执行一个函数。

```
$.get("js/file1.js")
.pipe($.get("js/file2.js"))
.pipe($.get("js/file3.js", {}, function()
{
    runFunction();
}); 
```

# javascript - 在显示/隐藏时爆炸/内爆文本（而不是展开但将页面重新组合回正常状态）

> ID：14567628
> 
> 赞同：1
> 
> 时间：2013-01-28T17:24:04.090
> 
> 标签：javascript, jquery, html

我发现了几段不同的代码，但我不知道如何将它们放在一起，以便它们一起工作。请帮忙。

显示/隐藏部分文本： [使用 JQuery 显示更多显示更少](https://stackoverflow.com/questions/4566137/show-more-show-less-with-jquery)

Explode/Implode Text：[使用 jQuery 将文本从字面上分解到随机位置](https://stackoverflow.com/questions/9656353/literally-explode-text-apart-to-random-places-with-jquery)

我如何结合2？我想从隐藏的部分段落文本开始，当有人点击“阅读更多”时，它会显示（打开）一个“点”，其中 Implode 文本将聚集在一起并用文本、图像显示段落的其余部分，管他呢。因为当有人点击“折叠文本”时，显示的部分段落会爆炸，“点”会关闭并将页面恢复到原来的状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:52:16.933

您想要打开和扫除的空间应该作为默认的 DOM 操作“自动清理”以某种方式自动发生。这段代码应该完全符合您的需要:)

**编辑**我已更改此代码以适用于任何 jquery/jquery UI。从文本中删除显示无并使用此代码。

```
 <a href="javascript:;" id="openLink">Read More</a>
 <p id="text" >lorem ipsum dolowhatever this is</p>

 <script type="text/javascript">
$(document).ready(function(){ 
 $("#text").hide();
 $("#openLink").toggle(function () {
   $("#text").show('explode', {}, 600);
   $("#openLink").text("Read Less");
   }, function () {
   $("#text").hide('explode', {}, 600);
   $("#openLink").text("Read More");
  });
});
</script> 
```

[参考](http://www.devcurry.com/2010/01/explode-and-implode-element-using.html) -->[演示](http://jsbin.com/uyena3)--> [JSFiddle](http://jsfiddle.net/bCz4T/12/)

# sql - 使用 QAbstractItemModel 表示 SQL 数据库中的数据

> ID：14567630
> 
> 赞同：0
> 
> 时间：2013-01-28T17:24:08.047
> 
> 标签：sql, qt, model

我正在尝试创建一个 QTreeView 来显示来自 SQL 数据库的数据。这是一个大型数据库，因此简单地将数据加载到 QStandardItemModel 似乎令人望而却步。

Qt 的预构建 SQL 模型类都不足以完成该任务。因此，似乎有必要对 QAbstractItemModel 进行子类化。

首先，我找不到这样做的例子，所以我想知道这是否是正确的方法。

实现 QAbstractItemModel::data 非常简单。我不确定如何实现 QAbstractItemModel::parent。

Qt 的“简单树模型示例”示例将提供信息，但在该示例中，树结构在内存中用 TreeItem 类表示。我可以复制它，但如果我要复制数据库结构，那么使用 QStandardItemModel 将同样容易。如果我需要维护一个单独的数据结构（除了数据库和 QAbstractItemModel 子类）来表示树结构，那么将 QAbstractItemModel 子类化比仅使用 QStandardItemModel 有什么优势吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T06:47:59.870

树结构中的挑战是始终能够识别模型索引的父级（即重载 parent() 方法）。在简单树示例中，这是通过将三个结构存储在单独的数据结构中来完成的。对于大型 SQL 查询，这是不切实际的。对于正确的数据库结构，您可能能够计算给定子节点的正确父节点，但这不是保证。我能想象的唯一选择是将 quint32 传递给 QAbstractItemModel::createIndex ，它对项目的父项进行编码。

一种可能有用的性能考虑因素。在放弃子类化 QAbstractItemModel 之后，我尝试从数据库中填充一个 QStandardItemModel。我将大约 1200 个项目加载到模型中，并为每个项目加载了四个子项目，并使用两个单独的数据库调用。在 2009 年的笔记本电脑上，这需要大约 3 秒。这比我预期的要快。（如果我使用单个查询而不是重复查询，则会有性能提升。）

最后我选择了另一条路线：在 GUI 中有几个 QTableView，用信号和槽来显示数据的不同方面。我的代码要简单得多，并且具有适当的功能，所以这感觉像是“正确”的解决方案。

# silverlight - Silverlight 5 是否支持 Dolby Digital (AC-3) 5.1 环绕声播放？

> ID：14567631
> 
> 赞同：0
> 
> 时间：2013-01-28T17:24:13.043
> 
> 标签：silverlight, silverlight-5.0, codec, smooth-streaming

使用 Silverlight 5 播放视频是否支持播放 Dolby Digital (AC-3) 5.1 环绕声，还是总是将声道缩混为立体声？

我正在流式传输[Smooth Streaming](http://www.microsoft.com/silverlight/smoothstreaming/)视频，但 Silverlight [Smooth Streaming Sample Player](http://smf.codeplex.com/releases/view/88970)似乎不支持 Dolby 音频播放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:15:42.840

没有默认播放器。

来源：http: [//msdn.microsoft.com/en-us/library/cc189080%28v=vs.95%29.aspx#delivery_method_containers_and_codecs](http://msdn.microsoft.com/en-us/library/cc189080%28v=vs.95%29.aspx#delivery_method_containers_and_codecs)

引用：

```
(For WMA audio, the only one mentioning surround sound)
Multichannel (5.1 and 7.1 surround) audio content is automatically mixed down to stereo. 
```

* * *

对于平滑流式传输：

[http://www.iis.net/learn/media/smooth-streaming/smooth-streaming-client-readme](http://www.iis.net/learn/media/smooth-streaming/smooth-streaming-client-readme)

这里没有太多细节，支持的音频编解码器是 AAC。

* * *

另请参阅此处：

[http://www.iis.net/learn/media/smooth-streaming/smooth-streaming-primer#create_piff](http://www.iis.net/learn/media/smooth-streaming/smooth-streaming-primer#create_piff)

支持的编解码器是 AAC 和 WMA/WMA Pro。

# signalr - 有没有办法在集线器上设置在连接的整个生命周期中持续存在的任何属性？

> ID：14567632
> 
> 赞同：4
> 
> 时间：2013-01-28T17:24:13.850
> 
> 标签：signalr, signalr-hub

为了设置正确的上下文，让我解释一下这个问题。直到 RC1，我们使用 GenerateConnectionIdPrefix() 来将用户 Id 前缀到连接 Id。然后我们可以随时从连接字符串中检索用户 ID。

使用 RC2，我们现在不能继承 IConnectionIdPrefixGenerator 和实现 GenerateConnectionIdPrefix 了。所以我想知道还有哪些其他途径可以使用我们的数据在集线器上设置任何属性，这些属性在连接的整个生命周期中都会持续存在。

通过文档，我意识到设置查询字符串是一种方法，但这意味着我们需要为每次调用设置它。设置往返状态可能是另一种选择，但看起来即使这样对于单个往返而不是整个生命周期都是持久的。

因此，我的最终目标是在 SignalR 连接开始时将其设置为可以在整个连接生命周期中使用的属性。

如果现在没有可用的东西，是否有计划添加支持以在下一个版本中实现类似的功能？

[更新] 如下所示，我尝试在 OnConnected 方法中设置一个状态 Clients.Caller.Userid，然后尝试在后续调用中访问它，我发现它为 null。两个呼叫都来自相同的连接 ID。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T21:03:20.610

[查看https://github.com/SignalR/SignalR/wiki/Hubs](https://github.com/SignalR/SignalR/wiki/Hubs)上的“客户端和服务器之间的往返状态”部分。

基本上，您可以在 Hub 方法中读取和写入动态属性，`Clients.Caller`例如`OnConnected`客户端调用的任何内容。前任：

```
using System;
using System.Threading.Tasks;
using Microsoft.AspNet.SignalR;

namespace StateDemo
{
    public class MyHub : Hub
    {
        public override Task OnConnected()
        {
            Clients.Caller.UserId = Context.User.Identity.Name;
            Clients.Caller.initialized();
            return base.OnConnected();
        }

        public void Send(string data)
        {
            // Access the id property set from the client.
            string id = Clients.Caller.UserId;

            // ...
        }
    }
} 
```

以这种方式存储的状态将在连接的整个生命周期内保持不变。

[如果您想了解如何使用 SignalR JS 客户端访问此状态，请查看https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs](https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs)的“往返状态”部分。

还有其他方法可以跟踪用户，而无需`IConnectionIdPrefixGenerator`在以下 SO 答案中讨论：[SignalR 1.0 beta connection factory](https://stackoverflow.com/questions/14350158/signalr-1-0-beta-connection-factory/14350859#14350859)

# jquery - 无法获取从 $.ajax-populated textarea 输入的文本用户

> ID：14567633
> 
> 赞同：0
> 
> 时间：2013-01-28T17:24:27.920
> 
> 标签：jquery, textarea

我有一个 textarea 添加到 DOM 并在对查询数据库的 php 脚本成功调用 $.ajax 后填充。

使用查询结果生成一个表，并且在表中的每一行添加一个编辑和保存按钮，以便用户可以更改信息。

用户可以更改两个文本类型输入和一个文本区域（由于该列中的大量数据）。

两个文本输入工作正常（更改保存到服务器）。但我无法获得用户从 textarea 所做的更改。

表格行如下所示：

```
<table id="tblBranchCoverage" width="100%">
    <thead>
        <tr>
            <th width="115px">County</th>
            <th>State</td>
            <th>Zip Codes</th>
        </tr>
    </thead>
    <tbody>
        <tr class="coverageRow" style="cursor: pointer;">
            <td class="countyCovered" width="115px">
                <label class="branchCountyCovered coverageDisplay" style="display: none;">Barrow</label>
                <input type="text" class="edit editBox editCounty" style="width: 111px;" value="Barrow"><br>
                <input type="submit" class="edit button submitCoverageEdits" style="" value="Save Changes"><br>
                <input type="submit" class="edit button cancelCoverageEdits" style="" value="Cancel">
                <input type="hidden" id="branchCoverageID" value="1">
            </td>
            <td class="stateCovered" width="30px">
                <label class="branchStateCovered coverageDisplay" style="display: none;">GA</label>
                <input type="text" class="edit editBox editState" style="width: 22px;" value="GA" max-length="2">
            </td>
            <td class="zipsCovered">
                <label class="branchZipsCovered coverageDisplay" style="display: none;">30028, 30040, 30041</label>
                <textarea class="edit editBox editZips" style="resize: none; overflow: hidden;" cols="100">30028, 30040, 30041</textarea>
            </td>
        </tr>
    </tbody>
</table> 
```

我正在使用这个 jQuery 获取输入的值：

```
$('#tblBranchCoverage').on('click', 'tr input.submitCoverageEdits', function() {

var $tr = $(this).parent().parent(),
    county = $tr.find('input.editCounty').val(),
    state = $tr.find('input.editState').val(),
    zips = $tr.find('textarea.editZips').text();
...
}); 
```

在控制台中检查 textarea 的内容：

```
console.log('zips: ' + zips); 
```

无论用户进行任何更改，始终只显示填充的文本。我还在 textarea 上尝试了 .val() 和 .html() ，但都无济于事。

谁能告诉我为什么这仅适用于 textarea 以及如何解决？

谢谢。

# redirect - 用 nginx 重定向中的破折号替换未知子域中的下划线

> ID：14567634
> 
> 赞同：5
> 
> 时间：2013-01-28T17:24:30.527
> 
> 标签：redirect, nginx

我的 URL 看起来像这样：

```
https://some_sub_domain.whatever.com 
```

这需要重定向到：

```
https://some-sub-domain.whatever.com 
```

我不知道子域将是什么（它们是用户名）。

虽然我需要替换子域的下划线，但我需要保留其他下划线：

```
https://some_sub_domain.whatever.com/hey_there_underscore 
```

应该重定向到：

```
https://some-sub-domain.whatever.com/hey_there_underscore 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T04:48:29.020

这是一种通过lua重写的方法：

```
location / {
  rewrite_by_lua '
  if string.find(ngx.var.host, "_") then
    local newHost, n = ngx.re.gsub(ngx.var.host, "_", "-")
    ngx.redirect(ngx.var.scheme .. "://" .. newHost .. ngx.var.uri)
  end
  ';
  proxy_pass       http://my_backend;
  proxy_set_header Host $host;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T03:33:11.040

假设用户名中没有'.'，您可以使用正则表达式：

```
(https?://)([a-zA-Z0-9_]+)(\..*) 
```

并使用第二个分组调用一个简单的替换。使用 perl 模块 favouretti 建议这样做应该可以正常工作，但坦率地说，我没有足够的 nginx 或 perl 模块经验来做到这一点。

# flash - Flex 跨域套接字不工作

> ID：14567635
> 
> 赞同：1
> 
> 时间：2013-01-28T17:24:32.070
> 
> 标签：flash, apache-flex, sockets, cross-domain

我正在尝试从浏览器与使用 Flex/Flash 在我的本地计算机上运行的第 3 方视频会议应用程序进行通信。这个想法是用户可以登录我们的网页，该页面反过来告诉本地应用程序打开并转到正确的聊天室。需要闪光灯作为绕过混合源警告的桥梁。我的 AS 代码：

```
 public function Check():void {  
        import flash.events.SecurityErrorEvent;
        import flash.external.ExternalInterface;
        import flash.net.Socket;
        import flash.system.Security;

        var mySocket:Socket = new Socket();
        Security.loadPolicyFile('xmlsocket://127.0.0.1:63457');

        mySocket.addEventListener(Event.CONNECT, onConnect);
        mySocket.addEventListener(Event.CLOSE,onClose);
        mySocket.addEventListener(IOErrorEvent.IO_ERROR, onError);
        mySocket.addEventListener(ProgressEvent.SOCKET_DATA, onProgress);
        mySocket.addEventListener(DataEvent.DATA, onData);
        mySocket.addEventListener(SecurityErrorEvent.SECURITY_ERROR, onSecurityError);

        function onConnect(event:Event):void {
            trace('connect');
        }

        function onClose(event:Event):void {
            trace('close');
        }

        function onProgress(event:ProgressEvent):void {
            trace('Progressevent fired');
            var output:String = mySocket.readUTFBytes(mySocket.bytesAvailable);
            ExternalInterface.call("alert", output);
        }

        function onData(event:DataEvent):void {
            trace('onData fired');

        }

        function onSecurityError(event:ErrorEvent) : void {
            trace("SECURITY ERROR : " +  event.text);
            ExternalInterface.call("alert", 'error: ' + event.text, 0);
        }

        function onError(event:ErrorEvent) : void {
            trace("ERROR : " +  event.text);
            ExternalInterface.call("alert", 'error: ' + event.text, 0);
        }

        mySocket.connect("127.0.0.1", 63457);
        mySocket.writeMultiByte('GET /?url=http://app.mydomain.com HTTP/1.1', 'UTF-8');
        mySocket.flush();
    }; 
```

在本地运行一切顺利，“onProgress”监听器被触发，我看到应用程序响应了请求。但是，从不同的域运行失败。我没有收到沙盒错误，就像没有发生调用一样。远程调试器提示连接成功。

正如您可能从代码中看到的那样，我是 AS3 的初学者，但在这里提出这个问题之前我做了很多研究。我希望有人能帮帮忙。在 Flash Pro、Flash Builder（作为 AS 项目和 Flex 项目）中尝试了此代码，结果相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:06:37.747

看起来这是一个时间问题；mySocket.writeMultiByte 调用发生在套接字准备好交换数据之前。在连接处理程序中进行调用解决了这个问题。

感谢您的日志记录建议，真的很有帮助！

代码：

```
 import flash.events.SecurityErrorEvent;
    import flash.events.HTTPStatusEvent;
    import flash.external.ExternalInterface;
    import flash.net.Socket;
    import flash.system.Security;
    import flash.net.URLLoader;
    import flash.net.URLRequest;

    var mySocket:Socket = new Socket();

    mySocket.addEventListener(Event.CONNECT, onConnect);
    mySocket.addEventListener(Event.CLOSE,onClose);
    mySocket.addEventListener(IOErrorEvent.IO_ERROR, onError);
    mySocket.addEventListener(ProgressEvent.SOCKET_DATA, onProgress);
    mySocket.addEventListener(DataEvent.DATA, onSocketData);
    mySocket.addEventListener(SecurityErrorEvent.SECURITY_ERROR, onSecurityError);

    function onConnect(event:Event):void
    {
        trace('connect');
        // ready to send!
        mySocket.writeMultiByte('GET /?url=http://app.mydomain.com HTTP/1.1', 'UTF-8');
    }

    function onClose(event:Event):void
    {
        trace('close');
    }

    function onProgress(event:ProgressEvent):void
    {
        var output:String = mySocket.readUTFBytes(mySocket.bytesAvailable);
        trace('Progressevent fired: \n' + output + '\n-----------');

    }

    function onSocketData(event:DataEvent):void
    {
        trace('onSocketData fired');

    }

    function onSecurityError(event:ErrorEvent):void
    {
        trace("SECURITY ERROR : " +  event.text);
    }

    function onError(event:ErrorEvent):void
    {
        trace("ERROR : " +  event.text);
    }

    mySocket.connect("127.0.0.1", 63457); 
```

# setup-project - 从 Windows Installer 安装项目卸载中删除先决条件验证

> ID：14567645
> 
> 赞同：0
> 
> 时间：2013-01-28T17:25:14.807
> 
> 标签：setup-project, uninstallation, custom-action, prerequisites

我们正在使用带有 Windows C# 的安装项目，并在安装时使用启动条件来验证一些先决条件。但它也发生在卸载时间。任何机构都可以建议，如何**在卸载时删除启动条件验证**...

请让我知道任何可能的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:02:25.597

卸载时，REMOVE 属性设置为“ALL”。

条件将包括'... AND NOT REMOVE = "ALL" '。

# objective-c - 检查错误的 NSURLConnection

> ID：14567646
> 
> 赞同：1
> 
> 时间：2013-01-28T17:25:18.357
> 
> 标签：objective-c, nsurlconnection, nsdata

我是 Objective-C 的新手，正在阅读《The Big Nerd Ranch Guide to Objective-C Programming》一书。

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        NSURL *url = [NSURL URLWithString:@"http://www.google.com/imagess/logos/ps_logo2.png"];

        NSURLRequest *request = [NSURLRequest requestWithURL:url];

        NSError *error =nil;

        NSData *data = [NSURLConnection sendSynchronousRequest:request
                                             returningResponse:NULL
                                                         error:&error];

        if(!data){
            NSLog(@"fetch failed %@", [error localizedDescription]);
            return 1;
        }

        NSLog(@"the files is %lu bytes", [data length]);

        BOOL written = [data writeToFile:@"/tmp/google.png"
                                 options:NSDataWritingAtomic
                                   error:&error];

        if(!written){
            NSLog(@"write failed: %@",[error localizedDescription]);
            return 1;
        }
        NSLog(@"Success!");

        NSData *readData = [NSData dataWithContentsOfFile:@"/tmp/google.png"];
        NSLog(@"the file read from disk has %lu bytes", [readData length]);

    }
    return 0;
} 
```

问题是这样的，如果我将 *url 更改为[http://aFakeDomain.com/imimimi/myImage.png](http://aFakeDomain.com/imimimi/myImage.png)那么我的数据对象将为零，因为没有主机并且一切正常.. 但是如果我使用 google 作为域并指向错误的文件位置，然后数据对象仍然具有标头信息并且不是零，因此我永远不会得到我应该的错误。

确保 *url 成功找到文件的最佳方法是什么。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:47:27.667

您需要将响应传递给`NSURLConnection`调用，然后检查其状态代码：

```
NSHTTPURLResponse* httpResponse = (NSHTTPURLResponse*)response;
NSData *data = [NSURLConnection sendSynchronousRequest:request
                                         returningResponse:&httpResponse
                                                     error:&error];
int code = [httpResponse statusCode]; 
```

你会`404`在你的情况下得到一个状态码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T18:52:49.527

```
NSUrlResponce *responce = nil;
NSData *data = [NSURLConnection sendSynchronousRequest:request
                                         returningResponse:&responce
                                                     error:&error];

if (error) {
    // handle the error
}

if (![[responce MIMEType] isEqualToString:@"image/png"]) {
    // failed to get png file
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T02:28:12.913

文件名也有一些错误；而不是@"/tmp/google.png"，你应该使用代码列表：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES);
NSString *filePath = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"google.png"]; 
```

# php - Javascript 字符串数组访问返回字符

> ID：14567647
> 
> 赞同：0
> 
> 时间：2013-01-28T17:25:20.630
> 
> 标签：php, javascript, arrays, string

好的，所以我在 Javascript 的网页上有一个字符串数组，定义如下：

```
var arr = ["Apple", "Orange", "Pear"]; //this is populated by a php script prior to being sent to the client. 
```

问题是，当我尝试在这样的 for 循环中访问这些项目时：

```
for (var i = 0; i < arr.length; i++)
{
    alert(arr[i]);
} 
```

我的输出是：

```
A
p
p 
```

因此，数组似乎一次只能访问一个字符，这当然不是我创建数组的原因。

我真的无法理解为什么会发生这种情况。任何人都可以看到问题吗？

编辑：完整的代码 - 它不是很好，但它正在进行中：

```
var votes = {<?php foreach ($options as $o) { echo ' "'.$o['name'].'":"'.$o['votes'].'"'; if (next($options)) { echo ','; } } ?>};
var name = [<?php for ($i = 0; $i < count($options); $i++) { echo ' "'.$options[$i]['name'].'"'; if ($i < count($options)-1) { echo ','; } } ?> ];

function run(num) {
document.getElementById('out').innerHTML = '';

for (var i = 0; i < num; i++) {
    if (document.getElementById(i+1).checked)
    {
        votes[name[i]] = (parseInt(votes[name[i]]) + 1);
        document.getElementById(num+(i+1)).checked = true;
    }
    if (document.getElementById(num+(i+1)).checked)
    {
        votes[name[i]] = (parseInt(votes[name[i]]) + 1);
    }

    document.getElementById('out').innerHTML += name[i] + ': ' + votes[name[i]] + '<br />';
    console.log('arr: ', name, 'j: ', name.length);
}

$.ajax("vote.php", {
        data:votes,
            });
} 
```

这是选项

```
"options" : [
    {
        "name"  : "Children of Men",
        "id"    : "1",
        "votes" : "0"
    },
    {
        "name"  : "City of God",
        "id"    : "2",
        "votes" : "0"
    },
    {
        "name"  : "Hidden",
        "id"    : "3",
        "votes" : "0"
    },
    {
        "name"  : "We Need To Talk About Kevin",
        "id"    : "4",
        "votes" : "0"
    }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:35:39.580

```
var arr = ['Apple', 'Orange', 'Pear'],
    i,
    j = arr.length;

console.log('Array?: ', arr.toString() == '[object Array]'); // edited

for (i = 0; i < j; i++) {
    console.log('arr: ', arr, 'j: ', j);
} 
```

上面的 console.log 应该告诉你什么是错的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:27:52.813

最后我通过定义数组来“解决”这个问题

```
new Array( 'Apple', 'Orange', 'Pear' ); 
```

不幸的是，我无法弄清楚实际问题。

# android - BitmapFun 示例应用程序中的图像缓存 - 此检查背后的基本原理是什么

> ID：14567650
> 
> 赞同：4
> 
> 时间：2013-01-28T17:25:34.423
> 
> 标签：android, caching, android-emulator

我想为图像实现内存和磁盘缓存。调查我找到了这个链接和示例代码（你可以从右边的链接下载它）

[http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

代码中的某处有这种方法：

```
/**
 * Get a usable cache directory (external if available, internal otherwise).
 *
 * @param context The context to use
 * @param uniqueName A unique directory name to append to the cache dir
 * @return The cache dir
 */
public static File getDiskCacheDir(Context context, String uniqueName) {
    // Check if media is mounted or storage is built-in, if so, try and use external cache dir
    // otherwise use internal cache dir
    final String cachePath =
            Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState()) ||
                    !isExternalStorageRemovable() ? getExternalCacheDir(context).getPath() :
                            context.getCacheDir().getPath();

    return new File(cachePath + File.separator + uniqueName);
} 
```

我想知道这个检查背后的理由是什么：

```
Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState()) ||
                    !isExternalStorageRemovable() 
```

第二部分对我来说似乎是多余的。这可以理解为“即使没有安装外部存储，我们也可以使用它，因为它不能被删除”，但显然你不能将它用于缓存，因为它没有安装。

使用此代码在模拟器上发生了有趣的事情。它在基于 Galaxy Nexus 和未指定 SD 卡的 AVD 上崩溃。第一部分将返回 false（它将其视为“已删除”），第二部分将返回 true（因为“外部”存储在 GN 上不可删除）。因此，它将尝试使用外部存储，并且由于无法使用它而崩溃。

我已经用我的 Galaxy Nexus 进行了测试，看看当手机连接到 pa PC 或 Mac 时第一部分的价值是多少，两次都是如此。它仍处于安装状态，但 PC 或 Mac 仍可对其进行写入。

如果您需要它们，这里有上面代码中使用的其他方法：

```
/**
 * Check if external storage is built-in or removable.
 *
 * @return True if external storage is removable (like an SD card), false
 *         otherwise.
 */
@TargetApi(9)
public static boolean isExternalStorageRemovable() {
    if (Utils.hasGingerbread()) {
        return Environment.isExternalStorageRemovable();
    }
    return true;
}

/**
 * Get the external app cache directory.
 *
 * @param context The context to use
 * @return The external cache dir
 */
@TargetApi(8)
public static File getExternalCacheDir(Context context) {
    if (Utils.hasFroyo()) {
        return context.getExternalCacheDir();
    }

    // Before Froyo we need to construct the external cache dir ourselves
    final String cacheDir = "/Android/data/" + context.getPackageName() + "/cache/";
    return new File(Environment.getExternalStorageDirectory().getPath() + cacheDir);
} 
```

**奖金问题：**有人在生产中使用此代码吗？这是一个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:43:54.803

发表我自己的评论作为答案。它可能对其他人有帮助。：

**getExternalStorageDirectory 并不总是返回 SDCard。**这就是实施安全检查的原因。

[我在这里](https://stackoverflow.com/a/14557132/1070711)发布了类似的答案，始终检查它是一个好习惯。

希望这会给您一些有关双重检查的提示。

# javascript - 如何在 CFWheels 中为 Ajax 启动控制器/动作？

> ID：14567658
> 
> 赞同：0
> 
> 时间：2013-01-28T17:26:08.647
> 
> 标签：javascript, jquery, coldfusion, cfwheels

两天来，我一直试图让 cfwheels 与 FineUploader 一起工作，但我只是不知道如何强制 jQuery 脚本执行控制器/动作。这是我到目前为止走了多远：

```
$(document).ready(function() {

    var restricteduploader = new qq.FineUploader({
        // Since we're using jQuery, use the jQuery way to select the HTML element
        element: $('##restricted-fine-uploader')[0],
        request: {
            type: "POST",
            url: $(this).attr("href") + "/index.cfm?controller=users&action=UploadFileXhr&format=json", // References "/say/hello?format=json"
            dataType: "json",
            endpoint: '/index.cfm?controller=users&action=UploadFileXhr&format=json'
        },
        multiple: false,
        validation: {
            allowedExtensions: ['jpeg', 'jpg', 'txt'],
            sizeLimit: 5120000000 // 50 kB = 50 * 1024 bytes
        },
        text: {
            uploadButton: 'Click or Drop'
        },
        showMessage: function(message) {
            // Using Twitter Bootstrap's classes and jQuery selector and method
            $('##restricted-fine-uploader').append('<div class="alert alert-error">' + message + '</div>');
        },
        debug: true
    });
}); 
```

CFWheels 文档说我必须使用它来获取异步请求：

```
(function($){$(document).ready(function(){

    // Listen to the "click" event of the "alert-button" link and make an AJAX request
    $("#alert-button").click(function() {
     $.ajax({
     type: "POST",
     url: $(this).attr("href") + "?format=json", // References "/say/hello?format=json"
     dataType: "json",
     success: function(response) {
     $("h1").html(response.message);
     $("p").html(response.time);
     }
     });
     return false; // keeps the normal request from firing
    });

});})(jQuery); 
```

这三行是我试图合并到我的代码中的（因为这是我认为我需要的）：

**类型：“发布”，**

**url: $(this).attr("href") + "?format=json", // 引用 "/say/hello?format=json"**

**数据类型：“json”，**

但是我尝试过的一切都没有奏效。我什至无法处理我的实际上传代码来让它工作，因为我什至无法让上传者启动所需的控制器/动作。

希望有人能够指出我正确的方向。谢谢！

**问题也发布到 cfWheels 邮件列表：[https ://groups.google.com/forum/?fromgroups=#!topic/cfwheels/UKk_57y9ncQ](https://groups.google.com/forum/?fromgroups=#!topic/cfwheels/UKk_57y9ncQ)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:20:05.123

我不熟悉 FineUploader，但通常当我在 Wheels 中执行 AJAX 请求时，我使用 urlFor() 函数来构建正确的控制器/操作位置。

[CFWheels - urlFor](http://cfwheels.org/docs/1-1/function/urlfor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T18:15:35.127

我想我知道你面临什么问题。按着这些次序：

1.  确保在您的控制器`Say.cfc`中为 Ajax 调用提供 JSON 格式： 在 的`init()`函数中`Say.cfc`，确保添加以下内容：

    ```
    <cffunction name="init" hint="It secures component from invalid access">
        <!--- this is necessary --->
        <cfset provides("json") />
    </cffunction> 
    ```

2.  现在，在`hello`操作中，呈现您想要提供的数据而不进行布局。删除`<cfabort>`动作中存在的所有标签：

    ```
    <!--- this will go at the very end of the action --->
    <!--- here the attribute data is the data you want to serve: a query, struct or any other custom data generated inside a `<cfsavecontent>`  ---> 
    <cfset renderWith(data=data,layout=false) /> 
    ```

我希望这对你有用。

# three.js - 使用 Three.js 对 OpenGL 进行平面着色

> ID：14567659
> 
> 赞同：1
> 
> 时间：2013-01-28T17:26:08.303
> 
> 标签：three.js, flat

我正在尝试使用 Three.js 模拟 OpenGL 平面着色模型。我的想法是创建一个类似[http://en.wikipedia.org/wiki/File:Phong-shading-sample.jpg](http://en.wikipedia.org/wiki/File:Phong-shading-sample.jpg)的示例。我试图更改一些不同的着色模型，但无法获得所需的结果。

是否可以在three.js中创建这个场景？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:12:39.727

MeshBasicMaterial 等材质有一个名为“shading”的选项。可以设置为 THREE.None、THREE.FlatShading、THREE.SmoothShading。

我不确定您是否首先需要光源，或者您是否必须为整个场景启用阴影。查看 Three.js 网站上的演示，了解有关阴影的内容。

# html - 我该如何对齐？

> ID：14567660
> 
> 赞同：0
> 
> 时间：2013-01-28T17:26:15.307
> 
> 标签：html, css

这是演示：http: [//jsfiddle.net/KS4eS/](http://jsfiddle.net/KS4eS/)

请先看演示。

我想将它们的对齐方式设置为相同。

像这样的东西。我怎样才能？

```
 center
------------------------------------------------------
                    A2345343
                    B435234
                    C4364353
                    D3426432632
                    E46324362
                    F235235
                    GGGGG

------------------------------------------------------ 
```

**HTML**

```
<div class='general'>

    <div class='list'>

            <div class="top_page_function">A2345343</div>
            <div class="top_page_function">B435234</div>
            <div class="top_page_function">C4364353</div>
            <div class="top_page_function">D3426432632</div>
            <div class="top_page_function">E46324362</div>
            <div class="top_page_function">F235235</div>
            <div class="top_page_function">GGGGG</div>

    </div>

</div> 
```

**CSS**

```
.general {
    background-color: rgb(255, 255, 255);
    border-radius: 8px 8px 8px 8px;
    box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.3);
    margin-bottom: 30px;
    text-align: center;
    padding: 10px;
}

.list{
    width: 400px;
    min-width: 250px;
    margin-bottom: 20px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T17:34:09.783

这将得到你想要的：

```
.general {
    background-color: rgb(255, 255, 255);
    border-radius: 8px 8px 8px 8px;
    box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.3);
    margin-bottom: 30px;
    padding: 10px;
    text-align:center;
}

.list{
    margin-bottom: 20px;
    text-align: left;
    margin: 0 auto;
    display: inline-block;
} 
```

它也适用于任何宽度。见这里：http: [//jsfiddle.net/KS4eS/8/](http://jsfiddle.net/KS4eS/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:44:03.437

另一个技巧是给 .List div 添加一个换行符。

**HTML：**

```
<div class='general'>
   <div class='list_wrap'>
    <div class='list'>
            <div class="top_page_function">A2345343</div>
            <div class="top_page_function">B435234</div>
            <div class="top_page_function">C4364353</div>
            <div class="top_page_function">D3426432632</div>
            <div class="top_page_function">E46324362</div>
            <div class="top_page_function">F235235</div>
            <div class="top_page_function">GGGGG</div>
    </div>
   </div>  
</div> 
```

**CSS**

```
.general {
    background-color: rgb(255, 255, 255);
    border-radius: 8px 8px 8px 8px;
    box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.3);
    margin-bottom: 30px;
    text-align: center;
    padding: 10px;
}

.list_wrap{
    margin:0 auto;
    width: 250px;
}

.list{
    width: 100%;
    text-align:left;
    margin-bottom: 20px;
} 
```

[JSFiddle](http://jsfiddle.net/FRmWj/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T17:29:51.127

您可以像这样对齐列：

```
.list div {
    text-align:left;
    margin-left:200px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T17:36:19.297

也许在类 div 周围设置一个容器`top_page_function`并将其位置设置为绝对位置，左侧为 50%，就可以了。
其他解决方案也可以，更喜欢它们，但只是因为我做了小提琴，所以我发布了它。
是的，您也必须自己设置列表 clss 的高度。这是这种方法的一个缺点。
[JSFiddle](http://jsfiddle.net/svineet/KS4eS/6/)

# joomla - 更改订单后，Joomla 子菜单消失了

> ID：14567662
> 
> 赞同：0
> 
> 时间：2013-01-28T17:26:30.460
> 
> 标签：joomla, submenu

我们正在使用 Joomla 2.5

我的一个客户不小心选择了大部分菜单和子菜单，并通过单击其中一个蓝色箭头更改了顺序，现在子菜单不再显示。

我试图重建菜单

我试图清除缓存（我的和 joomla 的）

我已尝试更改订单

我试图进入菜单模块并确保已配置显示子菜单

有人对如何解决这个问题有任何建议吗？将不胜感激。

该网站是 n1golf.com，您可以看到没有任何菜单下拉，这是订购的屏幕截图以防万一：http: [//d3v9w2rcr4yc0o.cloudfront.net/uploads/stream/2013/ 01/35569/1d30c79df72549006fdb760569e31399.jpg](http://d3v9w2rcr4yc0o.cloudfront.net/uploads/stream/2013/01/35569/1d30c79df72549006fdb760569e31399.jpg)

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:07:28.337

通常下拉是使用 jQuery 或 CSS 实现的，要启用它，您需要在菜单模块中指定一个额外的 CSS 类。检查是否有一个，然后查看模板的文档以确保它是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:42:36.320

```
Uncaught TypeError: Property '$' of object [object Window] is not a function golf-tuition:38
Uncaught TypeError: Property '$' of object [object Window] is not a function s5_flex_menu.js:79 
```

您可以看到 chrome 调试控制台中有几个错误。由于您的页面上有 jquery 和 mootools - 所以我建议可能存在某种 jquery/mootools 冲突。虽然我不知道为什么它现在才被触发！

请参阅我的答案[，](https://stackoverflow.com/questions/13234445/need-help-resolving-what-appears-to-be-a-jquery-mootools-conflict/13234752#13234752)了解如何解决它 - 但总结一下：

使用调用 jquery 库后，立即完全禁用 jQuery 的 $ 别名

```
// Disable the $ global alias completely
jQuery.noConflict(); 
```

然后对于 jQuery 脚本使用

```
(function($){

// set a local $ variable only available in this block as an alias to jQuery
... here is your jQuery specific code ...

})(jQuery); 
```

为了安全起见，我也会对你的 mootools 脚本做同样的事情：

```
(function($){

// set a local $ variable only available in this block as an alias 
// to Mootools document.id
... here is your Mootools specific code ...

})(document.id); 
```

您之前没有遇到过这些问题的事实意味着我无法确定这是否是 jQuery/mootools 冲突 - 但通常`$`符号错误确实表明存在这样的冲突！

# database - 如何更改大量数据库记录的排序顺序

> ID：14567664
> 
> 赞同：0
> 
> 时间：2013-01-28T17:26:38.907
> 
> 标签：database, data-structures

假设您有 1,000,000 条数据库记录。

假设每个项目都有一个订单，1-> 1,000,000。

假设我想将项目 2 移动到 823,423。

这意味着 2 到 823,423 之间的每个项目都需要减 1，以保持顺序并保持唯一性。

这似乎是一项相当密集的任务。

对此有什么解决方案？数据库中的链表？非唯一优先记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:29:41.457

数据库不按排序顺序存储记录。数据库使用`index`来维护排序顺序。

见[http://en.wikipedia.org/wiki/Database_index](http://en.wikipedia.org/wiki/Database_index)

# bash - 将一系列矩阵文件转换为awk中的坐标索引

> ID：14567665
> 
> 赞同：4
> 
> 时间：2013-01-28T17:26:37.500
> 
> 标签：bash, awk

我有一个时间序列的文件 0000.vx.dat、0000.vy.dat、0000.vz.dat；...; 0077.vx.dat, 0077.vy.dat, 0077.vz.dat... 每个文件都是一个空格分隔的二维矩阵。我想获取每个三元组文件并将它们全部组合成基于坐标的数据格式，即：

[时间步长 + 1] [i] [j] [vx(i,j)] [vy(i,j)] [vz(i,j)]

每个文件编号对应一个特定的时间步长。鉴于我在这个时间序列中拥有的数据量（~ 4 GB），bash 并没有削减它，所以似乎是时候转向 awk 了……特别是 mawk。在 bash 中尝试这个非常愚蠢，但这是我命运多舛的尝试：

```
for x in $(seq 1 78)
do
  tfx=${tf[$x]} # an array of padded zeros
  for y in $(seq 1 1568)
  do
    for z in $(seq 1 1344)
    do
      echo $x $y $z $(awk -v i=$z -v j=$y "FNR == i {print j}" $tfx.vx.dat) $(awk -v i=$z -v j=$y "FNR == i {print j}" $tfx.vy.dat) $(awk -v i=$z -v j=$y "FNR == i {print j}" $tfx.vz.dat) >> $file
    done
  done
done 
```

编辑：谢谢你，ruakh，指出我把 j 保存在 shell 变量格式中，前面有一个 $！这只是原始脚本的一个片段，但我想会被认为是它的胆量！

可以说这需要大约六个月的时间，因为 bash 中的所有内存开销都与 O(MxN) 算法、子外壳和管道等相关联。我最多在一天内寻找更多。每个文件大约 18 MB，所以应该不是什么大问题。如果我在每个时间步得到一个输出文件，我会很高兴在 awk 中一次执行一个时间步。我想我可以把它们全部放在一起，没有太多的后记问题。但重要的是，时间步数是坐标列表中的第一项。我可以通过 bash 例程中的 awk -v 参数（见上文）来实现这一点。我不知道如何在三个单独的文件中查找矩阵的特定元素并将它们全部放在一个输出中。这是我想克服的主要障碍。我希望 mawk 可以在工作量和计算速度之间提供一个很好的平衡。如果这对于 awk 脚本来说似乎太过分了，我可以转到较低级别的内容，并且会感谢任何回答让我知道我应该改为使用 C 的人。

先感谢您！我真的很喜欢awk，但我怕我是新手。

这三个文件 0000.vx.dat、0000.vy.dat 和 0000.vz.dat 的内容如下（巨大且尺寸正确的除外）：

0000.vx.dat：

```
1 2 3
4 5 6
7 8 9 
```

0000.vy.dat：

```
10 11 12
13 14 15
16 17 18 
```

0000.vz.dat：

```
19 20 21
22 23 24
25 26 27 
```

我希望能够输入：

```
awk -v t=1 -f stackoverflow.awk 0000.vx.dat 0000.vy.dat 0000.vz.dat 
```

并获得以下输出：

```
1 1 1 1 10 19
1 1 2 2 11 20
1 1 3 3 12 21
1 2 1 4 13 22
1 2 2 5 14 23
1 2 3 6 15 24
1 3 1 7 16 25
1 3 2 8 17 26
1 3 3 9 18 27 
```

编辑：谢谢你，shellter，建议我更清楚地输入所需的输入和输出！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T06:15:17.590

就个人而言，我`gawk`用来处理我的大部分文本文件。但是，由于您已请求`mawk`兼容的解决方案，因此这是解决问题的一种方法。在您当前的工作目录中运行：

```
for i in *.vx.dat; do nawk -f script.awk "$i" "${i%%.*}.vy.dat" "${i%%.*}.vz.dat"; done 
```

内容`script.awk`：

```
FNR==1 {
    FILENAME++
    c=0
}

{
    for (i=1;i<=NF;i++) {
        c++
        a[c] = (a[c] ? a[c] : FILENAME FS NR FS i) FS $i
    }
}

END {
    for (j=1;j<=c;j++) {
        print a[j] > sprintf("%04d.dat", FILENAME)
    }
} 
```

当您运行上述程序时，结果应该是每个包含您的坐标的三个文件的单个文件。这些输出文件的文件名格式为：timestamp + 1 ".dat"。为了方便起见，我决定用四个 0 填充这些文件名。但是您可以将其更改为您喜欢的任何格式。这是我从您发布的示例数据中得到的结果。内容`0001.dat`：

```
1 1 1 1 10 19
1 1 2 2 11 20
1 1 3 3 12 21
1 2 1 4 13 22
1 2 2 5 14 23
1 2 3 6 15 24
1 3 1 7 16 25
1 3 2 8 17 26
1 3 3 9 18 27 
```

# c# - JsonTypeCoercionException：只能反序列化具有默认构造函数的对象

> ID：14567666
> 
> 赞同：0
> 
> 时间：2013-01-28T17:26:54.367
> 
> 标签：c#, mono, unity3d

我正在使用 C#（通过 Unity3D 中的 Mono）使用 JsonFx 来序列化一些数据，但是当我尝试反序列化数据时，我得到：“JsonTypeCoercionException：只有具有默认构造函数的对象才能被反序列化。（Level []）”。

我尝试向序列化类添加默认构造函数，但仍然出现错误。Fwiw，我在类似的线程中尝试了不同的建议：http: [//forum.unity3d.com/threads/117256-C-deserialize-JSON-array](http://forum.unity3d.com/threads/117256-C-deserialize-JSON-array)

这是我的代码：

```
//C#
using System;
using UnityEngine;
using System.Collections;
using JsonFx.Json;
using System.IO;

public class LoadLevel : MonoBehaviour {

string _levelFile = "levels.json"; 
Level[] _levels; 

void Start () {

    if (!File.Exists (_levelFile)){

        // write an example entry so we have somethng to read
        StreamWriter sw = File.CreateText(_levelFile);

        Level firstLevel = new Level();
        firstLevel.LevelName = "First Level";               
        firstLevel.Id = Guid.NewGuid().ToString();

        sw.Write(JsonFx.Json.JsonWriter.Serialize(firstLevel)); 
        sw.Close();

    }

    // Load our levels
    if(File.Exists(_levelFile)){

        StreamReader sr = File.OpenText(_levelFile);

        _levels = JsonReader.Deserialize<Level[]>(sr.ReadToEnd());

    }

}
} 
```

这是它正在序列化的对象：

```
using UnityEngine;
using System.Collections;
using System; 

public class Level {

public string Id;
public string LevelName;

public Level() {}

} 
```

有任何想法吗？我已经尝试过使用和不使用 Level() 构造函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:50:07.963

我相信你的 JSON 流实际上需要包含一个数组才能工作 - 它不能只是一个元素，因为你在反序列化中要求一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-20T01:44:03.193

我认为您需要 Serializable 属性。

```
[System.Serializable]
public class Level 
 {
     public string Id;
     public string LevelName;
 } 
```

然后，您的 json 级别数组必须如下所示：

```
{
  [
    { 
      "Id" : "1",
      "LevelName" : "first level"
    },
    { 
      "Id" : "2",
      "LevelName" : "second level"
    }
  ]
} 
```

# android - 以编程方式更改微调器文本大小

> ID：14567671
> 
> 赞同：0
> 
> 时间：2013-01-28T17:27:19.997
> 
> 标签：android, layout, size, spinner

有一个 SeekBar，每当我滚动它时我都会得到它的价值。然后位置应该是因素，我的微调器中的文本应该有多大。

因此，每当我滚动而不是布局中的 50sp 时，我都想更改微调器项目的文本大小

我的 custom_list_row.xml

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/textViewRow"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="top|left"
    android:minHeight="?android:attr/listPreferredItemHeightSmall"
    android:paddingLeft="?android:attr/listPreferredItemPaddingLeft"
    android:paddingRight="?android:attr/listPreferredItemPaddingRight"
    android:textAppearance="?android:attr/textAppearanceListItemSmall"
    android:textSize="50sp" /> 
```

我的适配器

```
ArrayAdapter<Language> adapter = new ArrayAdapter<Language>(this, R.layout.custom_list_row,
                currentLanguages);
        spinnerLanguage.setAdapter(adapter); 
```

Language 类是一个带有 toString 方法的 Object。

```
@Override
    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
        resizeViews(progress);
    }

private void resizeViews(int progress){
    textViewFirstName.setTextSize(20+progress);
    //how can I do this for a spinner here?
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:19:25.360

你可以使用这个。

```
private void resizeViews(int progress){
textViewFirstName.setTextSize(20+progress);
//this might be helpful
for(int i=0;i<spinnerLanguage.getChildCount();i++){
((TextView)spinnerLanguage.getChildAt(i)).setTextSize(20+progress);
}
} 
```

# php - 为什么我的 url 编码不起作用？

> ID：14567674
> 
> 赞同：0
> 
> 时间：2013-01-28T17:27:27.367
> 
> 标签：php, regex

如果这个问题显得太廉价，请原谅我。

我有这条线：

```
preg_match_all($pattern, $_GET['id'], $arr); 
```

当您在搜索期间传递带有空格的值时，一旦遇到空格，该值就会中断。

例如：

```
36 2543541284 
```

请注意 6 和 2 之间的空格。在与此类似的情况下，仅显示 36。

空格后的数字提示将被忽略。这是给用户“找不到数据”的消息。

我尝试使用 urlencode 添加 20% 但没有运气。

```
preg_match_all($pattern, rawurlencode($_GET[id]), $arr); 
```

我也尝试过 urlencode 但无济于事。

我可能做错了什么？

```
function format($matches)
{
    return $matches[1][0].(strlen($matches[2][0])>0?$matches[2][0]:" ").$matches[3][0].(strlen($matches[4][0])>0?"  ".$matches[4][0]:"");
}

// CONSTRUCT A REGULAR EXPRESSION
$pattern
= '/'         // regex delimiter
. '('         // START of a capture group
. '\d{2}'     // exactly two digits
. ')'         // END of capture group
. '('         // START SECOND capture group
. '[ND]?'     // letters "D" OR "N" in any order or number - This is optional
. ')'         // END SECOND capture group
. '('         // START THIRD capture group
. '\d*'       // any number of digits
. ')'         // END THIRD capture group
. '('         // START FOURTH capture group
. 'GG'        // the letters "GG" EXACTLY
. '[\d]*'     // any number of digits
. ')'         // END THIRD capture group
. '?'         // make the LAST capture group OPTIONAL
. '/'         // regex delimiter
;

 preg_match_all($pattern, rawurlencode($_GET[id]), $arr);

// REFORMAT the array
$str = format($arr);

// show what we did to the data
echo '<pre>' . PHP_EOL;
echo '1...5...10...15...20...' . PHP_EOL;
echo $pattern;
echo PHP_EOL;
//Are we getting what we asked for? This is a test. We will comment out all 6 lines if we are happy with output of our REFORMATTING.
echo $str;
echo PHP_EOL; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:05:49.033

您的正则表达式不会匹配后跟空格和其他数字的两位数字。
如果您愿意，您可以更改`[ND]?`为`[\sND]?`，但如果字符串不是全数字，这也将允许空格。

如果您想要关于正则表达式的进一步建议，您需要准确地指定规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:48:45.093

在这种情况下，正则表达式是多余的。

**来自[urlencode 手册](http://php.net/urlencode)：**

> 返回一个字符串，其中所有非字母数字字符`-_.` 均已替换为百分号 ( `%`) 符号，后跟两个十六进制数字和编码为加号 ( `+`) 符号的空格。它的编码方式与 WWW 表单中发布的数据的编码方式相同，即与 application/x-www-form-urlencoded 媒体类型中的方式相同。这与[» RFC 3986](http://www.faqs.org/rfcs/rfc3986)编码（**参见[`rawurlencode()`](http://php.net/rawurlencode)）的不同之处在于，由于历史原因，空格被编码为加号 ( `+`)**。

它明确指出，如果您希望将空格编码为`%20`，而不是`+`，您应该使用[`rawurlencode()`](http://php.net/rawurlencode).

**代码示例：**

```
$strings = array(
    '36 2543541284',
    '1234 5678',
    'this is a string'
);
$strings_encoded = array();

foreach($strings as $string)
{
    $strings_encoded[] = rawurlencode($string);
}

var_dump($strings_encoded); 
```

**输出：**

```
array(3) {
  [0]=>
  string(15) "36%202543541284"
  [1]=>
  string(11) "1234%205678"
  [2]=>
  string(22) "this%20is%20a%20string"
} 
```

# ruby-on-rails-3 - 如何删除 Arel 中的一些默认范围

> ID：14567682
> 
> 赞同：4
> 
> 时间：2013-01-28T17:27:47.087
> 
> 标签：ruby-on-rails-3, arel

假设我在表上有几个默认范围

```
class User < ActiveRecord::Base
  default_scope where(:first_name => 'Allen')  # I know it's not realistic
  default_scope where(:last_name => 'Kim')     # I know it's not realistic
  default_scope where(:deleted_at => nil)
end

>> User.all
   User Load (0.8ms)  SELECT `users`.* FROM `users` 
   WHERE `users`.`first_name` = 'Allen' 
   AND  `users`.`last_name` = 'Kim' AND (`users`.`deleted_at` IS NUL 
```

L)

当我想找到不考虑 first_name 的用户时，我唯一能做的就是取消它的范围并再次重新定义默认范围

```
User.unscoped.where(:deleted_at=>nil).where(:last_name=>"Kim") 
```

有没有办法取消某些键的范围，如下所示？

```
User.unscoped(:first_name) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:40:20.653

不，`unscoped`不接受参数。
似乎在您的情况下，您最好定义正常`scopes`（是：） `named_scopes`。

仅当您*始终*（或几乎）需要`default_scope`.

# php - 实际导出BIFF的PHP excel导出包

> ID：14567685
> 
> 赞同：0
> 
> 时间：2013-01-28T17:27:58.200
> 
> 标签：php, excel, export, export-to-excel

有谁知道满足以下条件的 PHP excel 导出包：

1.  不是 PHPExcel - 因为 phpExcel 对大表有性能问题
2.  能够通过 PHP 导出 Excel 8.0 - Excel 11.0 (1997-2003) 格式或更高版本的文件，以便下载文件
3.  实际上导出 Excel BIFF 而不是 HTML/XML/其他技巧

我尝试了[http://code.google.com/p/php-excel/](http://code.google.com/p/php-excel/)但它似乎以低于 8.0 的 excel 版本导出，这导致 excel 2010 在打开文件时抱怨

有人知道 PEAR 出口商（[http://pear.php.net/package/Spreadsheet_Excel_Writer/redirected](http://pear.php.net/package/Spreadsheet_Excel_Writer/redirected)）是否满足这些条件（显然它满足条件 1）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:45:48.933

您会发现大多数 Excel 导出器类在处理大型表（包括 PEAR）时存在性能问题，而在 PHPExcel 中可以通过使用专门为此目的添加的单元格缓存等功能来减少这些开销；[但是，这里](https://stackoverflow.com/questions/3930975/alternative-for-php-excel)列出了一大堆替代方案。

# svg - 从 Java Web 应用程序导出 PDF，带有客户端可视化

> ID：14567687
> 
> 赞同：1
> 
> 时间：2013-01-28T17:28:01.703
> 
> 标签：svg, pdf-generation, wkhtmltopdf, phantomjs

我一直在使用服务器端 Java 将 HTML + CSS 转换为 PDF，例如 Flying Saucer ( [http://code.google.com/p/flying-saucer/](http://code.google.com/p/flying-saucer/) )

现在我需要看看随着 RaphaelJS 等客户端可视化 API 的增长而出现的替代方法，这些 API 也应该包含在 PDF 导出中。

理想情况下，我只需要一个打印友好的布局和 CSS（有点像 Google 地图），并且会有一些神奇的方式让 Javascript 调用可以静默地将窗口“打印”到 PDF 文件，而不是拥有单独的 PDF生成管道。

有没有这样的事情？

如果没有，您会推荐哪些其他方法？

例如

*   使用 node.js 或 Rhino 运行 Raphael 服务器端，使用 Batik 将 SVG 输出转换为图像，在服务器端渲染 PDF
*   同样的事情，但要从 Raphael 已经在客户端完成的工作中获取 SVG
*   在服务器上做一个无头浏览器，如 wkhtmltopdf 或 phantomjs，以捕获并执行生成的 HTML/JS 服务器端。

这些方法或其他建议中的任何一个是否成功？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:54:57.947

这两个选项对我有用：

*   **[使用html2canvas](http://html2canvas.hertzen.com/)**生成客户端 PNG （仅适用于支持画布的情况）

*   **[使用wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)**生成服务器端 PDF 或 PNG （您可能需要**[xvfb](https://stackoverflow.com/a/13604819/734335)**）

请询问您是否需要有关如何使用这些解决方案的更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:57:42.383

我为 PhantomJS 和 CasperJS 设置了一个（非常）简单的测试，以便能够使用无头浏览器打印 PDF 服务器端。它确实需要额外的非 Java 工具，但我认为这种方法更具前瞻性。在这些示例中，我能够动态加载网页，让 Angular 初始化，然后与 Javascript 代码交互，以便像用户在真实浏览器中修改页面一样打印页面。

这是我的例子：[https ://github.com/fmarot/miscPOC/tree/master/angularAppOutputPDF](https://github.com/fmarot/miscPOC/tree/master/angularAppOutputPDF)

# javascript - 定期更新 Javascript 变量

> ID：14567688
> 
> 赞同：0
> 
> 时间：2013-01-28T17:28:02.967
> 
> 标签：javascript, jquery, jquery-isotope

我有一个使用 JSON 数据在容器 div 中创建元素的脚本。我有另一个定期更新 JSON 数据的脚本，但是我在尝试使用 setInterval 让新的 JSON 数据在创建的元素中自动更新（不刷新页面）时遇到问题。

我正在像这样创建变量：

```
function renderElement(ajaxResponse) {
var responseArray = JSON.parse(ajaxResponse);
var container = document.getElementById("container"); 
```

然后我使用 JSON 数据来创建我的 html，如下所示：

```
for (var i = 0; i < responseArray.length; i += 1) {

var element = document.createElement("div");
element.className = "element";
}

var Score = document.createElement("p");
Score.className = "Score";
Score.innerHTML = responseArray[i].Score;

element.appendChild(Score);
container.appendChild(element);

}
} 
```

当我刷新页面时，确实会出现由 JSON 中的其他脚本更新的数据，但是我想让新数据出现而不刷新页面。我一直在尝试使用 setInterval 来做到这一点。我遇到的一个问题是 JSON 数据必须在页面加载时可用，*然后*每 5 秒更新一次，否则更广泛的脚本（同位素）将不会自行绘制。

在下面的回复之后，我在代码的各个部分（函数内、函数后等）中放置了以下内容。页面加载，但我仍然无法在更新 JSON 时更新 innerHTML 元素（不刷新页面）：

```
setInterval(function() {renderElement(ajaxResponse); }, 5000); 
```

任何帮助是极大的赞赏

更新：

我已将其更改为：

```
setInterval(function() {renderElement(json); }, 5000); 
```

所以我的 ajaxResponse 变量正在使用最新数据进行更新，然后尝试添加

```
setInterval(function() {renderElement(ajaxResponse); }, 10000); 
```

在函数内更新 innerHTML 元素。我*认为*它有效，因为我可以看到正在绘制多个实例（在原件后面）。我现在正在尝试“清除”元素 div，因此当它更新时，它不会保留第一组数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:49:45.263

您应该调用 renderElement 函数而不是 ajaxResponse ，但要在需要使用的 setInterval 中调用带有参数的函数`functon() { FuncHere() }`

这是完整的代码：

`setInterval(function() {renderElement(ajaxResponse); }, 5000);`

# c++ - Glibc的静态链接

> ID：14567689
> 
> 赞同：14
> 
> 时间：2013-01-28T17:28:07.540
> 
> 标签：c++, g++, glibc, static-linking

我如何编译我的应用程序静态链接 glibc 库，但只有我的应用程序所需的代码？（不是所有的库）

现在我的编译命令：

```
g++  -o newserver  test.cpp ... -lboost_system -lboost_thread -std=c++0x 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T17:41:31.727

这就是`-static`（如另一个答案中所述）：不需要的模块不会链接到您的程序中。但是您对所需内容数量的期望*（*从某种意义上说，我们无法说服链接器相反）可能过于乐观。

如果您尝试为可移植性而做（在其他机器上使用较旧的 glibc 或类似的东西运行可执行文件），有一个简单的测试问题可以查看您是否会得到您想要的：

你有没有想过 的问题`libnss`，你确定它不会咬你吗？

如果你的答案是*肯定*的，也许继续下去是有意义的。如果答案是否定的，或者问题看起来太模糊并且没有答案，只需使用静态链接的 glibc 退出你的过期：它有更多的伤害而不是帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T17:32:44.680

添加`-static`到编译行。它只会添加你的应用程序需要的东西[当然，你应用程序调用的任何函数，以及这些函数调用的任何函数，包括一堆启动代码和其他一些零碎的东西]，所以它大约是 800K（对于一个简单的“hello world”程序）在 x86 机器上。其他架构各不相同。由于 boost 可能至少也会调用标准库一点点，因此您的应用程序中可能会添加超过 800K。但它只应用最终二进制文件中任何代码使用的函数，而不是整个库[大约 2MB 作为共享库]。

如果您只想要链接 glibc，则需要将链接行修改为您的编译为： `-Wl,-Bstatic -libc -Wl,-Bdynamic`. 这将防止任何其他库被静态链接[你有时需要有多个这些语句，因为有时另一个库拉入的东西需要从 glibc 拉入“更多”——别担心，它不会的t 引入超出链接器认为必要的任何内容]。

# python - Django：CSRF 令牌丢失或不正确

> ID：14567692
> 
> 赞同：1
> 
> 时间：2013-01-28T17:28:27.680
> 
> 标签：python, django, csrf, django-csrf

姜戈菜鸟在这里！我基本上已经在线尝试了所有解决方案，但仍然有错误（一个 Chrome）“CSRF 令牌丢失或不正确”，而 Opera 和 Firefox 返回“CSRF cookie 未设置”...？这是我的文件：

**视图.py**

```
# views.py
from django.shortcuts import render_to_response
from django.http import HttpResponse, HttpResponseRedirect
from django.contrib.auth import authenticate, login
from django.template import RequestContext
from django.core.context_processors import csrf

def dashboard(request):
    state = "log in"
    if request.user.is_authenticated():
        return render_to_response('memberbrd.html')
    elif request.method == "POST":
        username = request.POST.get('username')
        password = request.POST.get('password')
        user = authenticate(username=username, password=password)
        if user is not None:
            if user.is_active:
                login(request, user)
                return HttpResponseRedirect('/')
            else: 
                error = "inactive"
        else:
            error = "wrong username or password"
        render_to_response('visitorbrd.html', {'errors': error}, context_instance = RequestContext(request)) # I've also tried without context_instance, without passing errors...
    else:
        return render_to_response('visitorbrd.html') 
```

**网址.py**

```
#urls.py
from django.conf.urls import patterns, include, url

from django.contrib import admin
admin.autodiscover()

from mission.views import *

urlpatterns = patterns('',
    url(r'^admin/', include(admin.site.urls)),
    url(r'^$', dashboard),
) 
```

**访客brd.html**

```
{% extends "base.html" %}
{% block content %}
    {% if state %}
        <p>{{ state }}</p>
    {% endif %}
    <form action="." method="POST">{% csrf_token %}
        <label for="username">User name:</label>
        <input type="text" name="username" value="" id="username">
        <label for="password">Password:</label>
        <input type="password" name="password" value="" id="password">
        <input type="submit" value="login" />
        <input type="hidden" name="next" value="{{ next|escape }}" />
    </form>
{% endblock %} 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:39:21.823

您没有使用负责实际显示表单`RequestContext`的最终结果。`render_to_response`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:56:22.177

前面的答案是绝对正确的。但是，不需要 RequestContext 来输出表单本身。这是由 Form 类处理的。问题是需要通过请求生成一个新的 CSRF 令牌，这是通过 Django 的中间件完成的。中间件只能访问上下文变量，因此根据该逻辑，它需要 RequestContext 来执行此操作。

附带说明一下，我更喜欢 Django 的“render”函数而不是“render_to_response”。有时这个函数太通用了，但对于新用户来说，打字的节省很好，代码看起来更干净。我从 Django 的网站上复制了这个例子（我也会在下面包含一个永久链接）。

```
from django.shortcuts import render

def my_view(request):
    # View code here...
    return render(request, 'myapp/index.html', {"foo": "bar"},
        content_type="application/xhtml+xml") 
```

[Django 文档：快捷功能：渲染](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render)

# c# - ASP.NET - 在数据库中存储文章查看计数

> ID：14567697
> 
> 赞同：0
> 
> 时间：2013-01-28T17:29:02.957
> 
> 标签：c#, asp.net, sql-server, msmq

我正在构建一个 Wiki / Blog 类似的应用程序，并且我有一个关于存储每篇文章的查看计数的最佳方法的问题。要求是我只想存储查看文章的唯一用户数，而不是总查看次数。到目前为止，我想出了 3 种不同的方法来完成：

**1、SQL Server存储过程：**这种方式存在的问题是数据以XML数据类型存储，使用这种方式实现需求可能有点复杂。我把它作为最后的手段。

**2\. MSMQ：**这会很好用，因为我可以串行处理请求。这种方法的唯一问题是，我无法确保 MSMQ 安装在主机服务器上。这个就不用说了！

**3\. Using `Application.Lock()`：**我知道使用这种方法我可以锁定对`Application`对象的访问，更新应用程序中的某些条目，更新数据库，然后调用`Application.Unlock()`. 虽然这听起来是一种功能性方法，但它仍然感觉像是一种解决方法。

有没有人对我应该做些什么来达到要求有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:39:04.740

MsMQ 和 Application.Lock 绝对不是您想做的简单事情要考虑的选项。（Application.Lock() 是一个 def NO GO）

我也认为没有理由使用 XML。存储过程不依赖于 XML

创建表 [page,userip]

在页面的每个视图上

`insert into <table>(page,userip) values(@page,@userip)`

对于统计信息，只需发出查询

```
select count(*) from <table> group by userip having page=@page 
```

这可以识别其 IP 上的用户，而不是完全故障安全，因为多个用户可以来自同一个 ip。

但为什么不调查谷歌分析呢？您需要的所有信息（以及更多）

# php - 试图清理我的 PHP 错误日志

> ID：14567703
> 
> 赞同：0
> 
> 时间：2013-01-28T17:29:11.287
> 
> 标签：php, code-cleanup

我知道您应该定义 PHP 变量，这样您就不会用未定义的变量堵塞错误日志，但我的日志仍然充满了不必要的信息。

例如...

```
[28-Jan-2013 16:45:42 UTC] PHP Notice:  Undefined index: site in C:\Sites\FLCBranson.org\freedownloads.php on line 34 
```

我的 PHP 代码已`$site`定义，但我确实希望可以选择覆盖它...

```
// it's a good idea to define the variable first and then make changes as necessary (that way you don't fill up your logs with worthless errors)
$site = "flc";
// overrides the domain (useful for IP addresses)
if ($_GET["site"]) $site = $_GET["site"]; 
```

所以，我有很多这样的问题。然后我有一堆这些讨厌的错误......

```
[28-Jan-2013 16:45:42 UTC] PHP Notice:  Undefined offset: 3 in C:\Sites\FLCBranson.org\listseries.php on line 264
[28-Jan-2013 16:45:42 UTC] PHP Notice:  Undefined offset: 4 in C:\Sites\FLCBranson.org\listseries.php on line 265
[28-Jan-2013 16:45:42 UTC] PHP Notice:  Undefined offset: 5 in C:\Sites\FLCBranson.org\listseries.php on line 266 
```

我有一个填充了各种内容的数组。如果其中一个插槽中有东西，那么我想用它做点什么......

```
// explode() takes a string of text ($item->title in this case) and creates an array comprised of parts of the text separated by the separator (- in this case)
$title = explode(" - ", $sermontitle);
// sets the sermon title variable
$sermontitle = $title[0];
if ($title[1]) $sermontitle = $sermontitle . " - " . $title[1];
if ($title[2]) $sermontitle = $sermontitle . "<br>" . $title[2];
if ($title[3]) $sermontitle = $sermontitle . " - " . $title[3];
if ($title[4]) $sermontitle = $sermontitle . " - " . $title[4];
if ($title[5]) $sermontitle = $sermontitle . " - " . $title[5]; 
```

那么，我做错了什么？我定义我的变量。然后我只在满足某些条件时才对变量进行更改。我认为这是正确的做法。

编辑...

我发现了另一个奇怪的例子......

```
[28-Jan-2013 20:07:05 UTC] PHP Notice:  Undefined variable: broadcast in C:\Sites\FLCBranson.org\flconlineservices.php on line 242 
```

似乎这`if (file_exists($golive) || ($broadcast == "live")`还不够。我需要做`if (file_exists($golive) || (isset($broadcast) && $broadcast == "live"))`吗？这似乎需要很多代码来执行简单的比较。

编辑 2...

所以，我开始理解为什么`isset()`需要，但这里有一些我不明白的东西。我有一些代码从数据库中提取信息，`if ($row["Sarasota"])`但错误日志没有显示任何内容。如果需要，为什么`isset()`那里不需要`if ($title[5])`？我能看到的唯一区别是引用的单词“Sarasota”，而不是未引用的数字 5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:30:13.967

使用 isset 避免这些通知：

```
if (isset($title[1]) && $title[1]) $sermontitle = $sermontitle . " - " . $title[1];
if (isset($title[2]) && $title[2]) $sermontitle = $sermontitle . "<br>" . $title[2];
if (isset($title[3]) && $title[3]) $sermontitle = $sermontitle . " - " . $title[3];
if (isset($title[4]) && $title[4]) $sermontitle = $sermontitle . " - " . $title[4];
if (isset($title[5]) && $title[5]) $sermontitle = $sermontitle . " - " . $title[5]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T17:31:16.083

写入**默认值**的常用方法是使用三元运算符`? :`，如下所示：

```
$site = isset($_GET["site"]) ? $_GET["site"] : null; // null is the default value 
```

对于数组，我建议使用`count`函数而不是`isset`. 这加强了读者对您正在处理数组的理解。

`isset`在关联数组（如`$_GET`）中使用了更多注释，因此您可能期望其他不一定是数字的键。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T17:30:45.007

```
if ($_GET["site"]) 
```

一定是

```
if (isset($_GET["site"])) 
```

对于 $title 的东西，你应该使用 isset：

```
if (isset($title[1])) [...] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T17:31:57.223

您还可以使用包含 isset 错误处理的解决方案，方法是使用 !empty

```
if(!empty($_GET['site'])) 
```

# java - 我应该如何使用 Maven 和 Intelij 构建多组件 Java 项目？

> ID：14567705
> 
> 赞同：1
> 
> 时间：2013-01-28T17:29:26.617
> 
> 标签：java, maven

我的 java se 项目/系统由多个组件组成，如下所示，其中可以有许多共享库和许多应用程序/正在运行的进程。例如，下面的 3 个组件构成“系统 1”。

系统 1： 1\. 公共库 - 用于我们的共享代码 2\. 应用程序 1 - 一个应用程序/进程，它有自己的代码引用公共库。3\. App 2 - 一个应用程序/进程，它有自己的代码引用公共库。

我的问题是如何设置 Maven/Intelij 来支持这种结构……它是一个很好的结构吗？

目前，我的 groupId 为“com.MyCompany.System1”，组件的 Mavan 模块为 artifactIds 为“com-MyCompany-System1-common”等。

这是正确的方法还是我应该如何安排 Maven 来支持这种结构？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:40:27.153

听起来典型的[Maven 多模块设置](http://www.sonatype.com/books/mvnex-book/reference/multimodule.html)应该可以满足您的需求。至于 IntelliJ，只需在 Maven 中设置，然后将 maven pom 导入 IntelliJ。它会起作用的。您可以将 pom 文件作为项目打开，IntelliJ 将为您正确设置所有内容。

建议：

1.  即使感觉需要更多的前期工作，您越能将项目分解为明确定义的模块，最终您会越快乐。
2.  我不会在 artifactId 中重复 groupId。artifactId 绝对应该是不同的，但不是*那么*不同。
3.  如果可以选择，请考虑使用[Gradle 。](http://www.gradle.org/)这是继 Maven 之后构建工具的下一个合乎逻辑的步骤，随着模块数量的增加，它将大大减少您的工作量。Gradle/IntelliJ 交互*几乎*和 Maven/IntelliJ 一样好。工作量稍大一些，但权衡是值得的。

资料来源：我拥有超过 100 个 Maven 和 Gradle 模块，分布在超过 30 个源代码存储库中，我已经使用 IntelliJ 构建和工作了 3 年。

# three.js - 如何使用三个 JS 为 Camera.lookAt 设置动画

> ID：14567712
> 
> 赞同：16
> 
> 时间：2013-01-28T17:29:58.393
> 
> 标签：three.js, webgl

我有一个场景，它渲染了一个带有多个对象的板。单击其中一个对象并通过使用对象拾取，我可以获得对象并将相机位置设置为动画以位于对象的“俯视”视图中。然后使用 camera.lookAt 方法，我可以强制相机直接看对象。

在 onUpdate 方法中调用 camera.lookAt 时，我注意到动画开始时的快速跳转，因为它最初有很大的距离可以旋转以查看所选对象。相比之下，对 camera.lookAt 的每个后续调用都很小，并且动画效果很好。

```
// Position the camera to fit
var tween = new TWEEN.Tween(camera.position).to({
    x: selectedObject.position.x,
    y: selectedObject.position.y,
    z: 1
}).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(function() {
    camera.lookAt(selectedObject.position);
}).onComplete(function() {
    camera.lookAt(selectedObject.position);
}).start(); 
```

有什么方法可以为该方法设置动画，还是我必须手动转换相机的矩阵值才能查看我选择的对象？

这是一个例子。它使用 WebGLRenderer，所以请使用合适的浏览器。

[http://jsfiddle.net/fungus1487/SMLwa/](http://jsfiddle.net/fungus1487/SMLwa/)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-28T18:32:50.567

您可以做的一件事是在相机位置和相机目标（您必须定义）之间进行补间。

```
var tween = new TWEEN.Tween( camera.position )
    .to( {
        x: selectedObject.position.x,
        y: selectedObject.position.y,
        z: 1
    } )
    .easing( TWEEN.Easing.Linear.None ).onUpdate( function () {

        camera.lookAt( camera.target );

    } )
    .onComplete( function () {

        camera.lookAt( selectedObject.position );

    } )
    .start();

var tween = new TWEEN.Tween( camera.target )
    .to( {
        x: selectedObject.position.x,
        y: selectedObject.position.y,
        z: 0
    } )
    .easing( TWEEN.Easing.Linear.None )
    .onUpdate( function () {

    } )
    .onComplete( function () {

        camera.lookAt( selectedObject.position );

    } )
    .start(); 
```

这有点棘手，因为补间需要完全同时运行，而他们不需要......这就是在第二个补间中调用 camera.lookAt() 的原因。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-21T15:19:34.047

WestLangley 的答案有效，但似乎冗长。我将以下内容与预定义的位置（xyz）和目标（xyz）一起使用。使用透视相机和轨迹球控件。

```
new TWEEN.Tween( camera.position ).to( {
    x: position.x,
    y: position.y,
    z: position.z}, 600 )
  .easing( TWEEN.Easing.Sinusoidal.EaseInOut).start();
new TWEEN.Tween( controls.target ).to( {
    x: target.x,
    y: target.y,
    z: target.z}, 600 )
  .easing( TWEEN.Easing.Sinusoidal.EaseInOut).start(); 
```

# core-data - 将文本框与核心框架绑定

> ID：14567715
> 
> 赞同：0
> 
> 时间：2013-01-28T17:30:02.733
> 
> 标签：core-data, data-binding, binding, textbox

我已经搜索了答案，但没有找到针对我的具体问题的答案。

我正在使用核心数据来保存配置文件并将它们显示在表格中。由于已经设置了核心数据，我还想用它来存储应用程序设置。

我已经设置了模型，设置了一个数组控制器来检索数据，但是现在，我不知道如何将此数组控制器连接到单个文本框。

我试图解释：理论上我的模型可以有更多的条目，就像配置文件模型一样。但它只有一个有一些设置，就好像数据库只有一个数据行一样。有没有办法可以指定我想要第一行中包含的数据？不知道我的问题是否清楚，解释起来并不容易。如果不清楚，请告诉我，我会再次尝试解释。

谢谢

伊戈尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:33:19.920

不要将应用程序设置放在 Core Data 中。每当您发现自己认为您只需要一个实体的实例（行）时，您就错了。

Cocoa Touch 提供了一个`NSUserDefaults`专门用于保存应用设置的类。调查一下，这几乎肯定是你想要的。

# java - Java 事件模型类似于 GWT 事件处理？

> ID：14567716
> 
> 赞同：0
> 
> 时间：2013-01-28T17:30:10.160
> 
> 标签：java, gwt, event-handling

我在 GWT 中使用了非常棒的事件处理，Java 中是否有类似的东西，我一直在谷歌上搜索它，没有找到任何具体的东西，有人对此有任何想法吗？

# c - ffmpeg 代码未链接（未定义对 avcodec_register_all 的引用

> ID：14567721
> 
> 赞同：2
> 
> 时间：2013-01-28T17:30:26.910
> 
> 标签：c, linker, ffmpeg, undefined-reference

我正在尝试使用`ffmpeg`它来编译一个简单的介绍性程序，以检查`mp3`编解码器是否可用。虽然代码编译正常，但我在解决链接器错误方面遇到了困难。这是代码：

```
#include <stdio.h>
#include <math.h>
#include <libavcodec/avcodec.h>

float *generateSinusoid(unsigned int sampleRate, unsigned int nSecondsAudio) {

  unsigned int nsamples = (nSecondsAudio * sampleRate);
  float *arr;
  arr = (float*) malloc(sizeof(float) * nsamples);
  int i = 0;

  for(i = 0; i < nsamples; i++) {
    arr[i] = 20 * sin(2.f * (M_PI) * (330/sampleRate) * i);  /*frequency of 330H
z*/
  }

  return arr;

}

int main(int argc, char *argv[]) {

  avcodec_register_all();

  AVCodec *codec;

  unsigned int sampleRate = 22050;  /*assumed.*/
  unsigned int nSecondsAudio = 4;
  float *arr;
  arr = (float *) malloc(sizeof(float) * nSecondsAudio * sampleRate);

  /*Step 1\. Generate sinusoid.*/
  arr = generateSinusoid(sampleRate, nSecondsAudio);

  /* Step 2\. See if encoder exists.*/
  /*codec = avcodec_find_encoder(AV_CODEC_ID_MP3);*/

  if(!codec) {  /*codec = NULL.*/
    printf("MP3 codec not found!!!!");
  } else {
    printf("MP3 codec found!!!");
  }

   return 0;
} 
```

代码是这样编译和链接的：

```
encoding_mp3: encoding_mp3.o
        gcc encoding_mp3.o -o encoding_mp3 -L/cygdrive/c/Users/Desktop/webserver/cygnus/lib/w32api -L/cygdrive/c/Users/Desktop/webserver/cygnus/ffmpeg/ffmpeg_dev/lib -lm -luser32 -lpthread -lavcodec

encoding_mp3.o: encoding_mp3.c
        gcc -I/cygdrive/c/Users/Desktop/webserver/cygnus/ffmpeg/ffmpeg_dev/include -I/cygdrive/c/Users/Desktop/webserver/cygnus/usr/include -g -c encoding_mp3.c -o encoding_mp3.o

clean:
        rm encoding_mp3.o encoding_mp3 
```

链接给出以下错误：

```
gcc -I/cygdrive/c/Users/Desktop/webserver/cygnus/ffmpeg/ffmpeg_dev/include -I/cygdrive/c/Users/Desktop/webserver/cygnus/usr/include -g -c encoding_mp3.c -o encoding_mp3.o
gcc encoding_mp3.o -o encoding_mp3 -L/cygdrive/c/Users/Desktop/webserver/cygnus/lib/w32api -L/cygdrive/c/Users/Desktop/webserver/cygnus/ffmpeg/ffmpeg_dev/lib -lm -luser32 -lpthread -lavcodec
encoding_mp3.o: In function `main':
/cygdrive/c/Users/Desktop/webserver/cygnus/ffmpeg/work/encoding_mp3.c:31: undefined reference to `_avcodec_register_all'
collect2: ld returned 1 exit status
make: *** [encoding_mp3] Error 1 
```

关于这个问题，我已经完成了关于 SO 的大部分线程，这是我迄今为止尝试过的：
- 将库放在所有非选项参数的末尾
- 注释掉引用函数的代码。这似乎有效。删除所有函数调用后，`undefined reference`错误就会消失，尽管结构的存在`AVCodec`不会导致任何问题。

非常欢迎对此提供任何帮助。

# vb.net - OpenFileDialog 过滤器选项不起作用

> ID：14567722
> 
> 赞同：0
> 
> 时间：2013-01-28T17:30:26.753
> 
> 标签：vb.net, filter, backgroundworker, openfiledialog

由于我将 OpenFileDialog 放入 BackgroundWorker，该`Filter`选项不再有效。

我曾经将它作为一个按钮单击，它工作正常，除了我打开的每个文件都不会关闭文件，因此我添加了 BackgroundWorker。

任何人，这是我当前的代码，与我拥有的按钮单击代码没有什么不同。

```
Dim OpenFileDialog2 As New OpenFileDialog()

OpenFileDialog2.InitialDirectory = "C:\Temp\Config_Files\"
OpenFileDialog2.Filter = "Configuration Files (*.cfg)|*.cfg" 
```

是否需要添加一些内容才能使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:30:26.640

我认为您误解了使用后台工作人员的建议。
您应该让 OpenFileDialog 完成其工作并获取要处理的 cfg 文件，然后，如果您想要更快的 UI 响应，请启动后台工作程序。

```
Dim fileToProcess as String = string.Empty
Using opf As New OpenFileDialog()
    opf.InitialDirectory = "C:\Temp\Config_Files\"
    opf.Filter = "Configuration Files (*.cfg)|*.cfg"
    if opf.ShowDialog() = DialogResult.OK then
        fileToProcess = opf.FileName
    Endif
End Using
if fileToProcess <> string.Empty then
    ' Now start you backgroundworker to do its job
end if 
```

当然，用户可以重新启动相同的代码并再次选择相同的文件。这可能会导致意想不到的结果。最好禁用按钮/菜单或启动文件选择过程的任何东西，直到前一个过程结束。

# android - V2 地图库是否需要 ACCESS_NETWORK_STATE 权限？

> ID：14567723
> 
> 赞同：12
> 
> 时间：2013-01-28T17:30:27.393
> 
> 标签：android, android-maps, android-permissions

我在我发布的应用程序中使用 Android V2 Google 地图库（Google Play 服务）。我一直在 Google Play 中看到零星的异常，这似乎表明支持地图片段偶尔会尝试检查网络状态。但是，库文档没有提到需要此权限。我没有直接在我的应用程序中检查网络状态，所以我没有声明这个权限。因此，`SecurityException`在扩展支持图片段时有时会抛出 a：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.foo/com.foo.ui.TransactionDetailActivity}: android.view.InflateException: Binary XML file line #327: Error inflating class fragment
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
    at android.app.ActivityThread.access$600(ActivityThread.java:141)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5039)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: android.view.InflateException: Binary XML file line #327: Error inflating class fragment
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:459)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
    at com.actionbarsherlock.internal.ActionBarSherlockNative.setContentView(SourceFile:119)
    at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SourceFile:262)
    at com.foo.ui.TransactionDetailActivity.onCreate(SourceFile:129)
    at android.app.Activity.performCreate(Activity.java:5104)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
    ... 11 more
Caused by: java.lang.SecurityException: ConnectivityService: Neither user 10106 nor current process has android.permission.ACCESS_NETWORK_STATE.
    at android.os.Parcel.readException(Parcel.java:1425)
    at android.os.Parcel.readException(Parcel.java:1379)
    at android.net.IConnectivityManager$Stub$Proxy.getActiveNetworkInfo(IConnectivityManager.java:623)
    at android.net.ConnectivityManager.getActiveNetworkInfo(ConnectivityManager.java:425)
    at maps.bm.e.e(Unknown Source)
    at maps.bm.e.a(Unknown Source)
    at maps.z.ag.a(Unknown Source)
    at maps.z.ag.a(Unknown Source)
    at maps.z.ag.a(Unknown Source)
    at maps.z.bw.a(Unknown Source)
    at maps.z.r.onCreateView(Unknown Source)
    at com.google.android.gms.maps.internal.IMapFragmentDelegate$Stub.onTransact(IMapFragmentDelegate.java:107)
    at android.os.Binder.transact(Binder.java:310)
    at com.google.android.gms.maps.a.l.a(Unknown Source)
    at com.google.android.gms.maps.m.a(Unknown Source)
    at com.google.android.gms.internal.ap.a(Unknown Source)
    at com.google.android.gms.internal.al.a(Unknown Source)
    at com.google.android.gms.internal.al.a(Unknown Source)
    at com.google.android.gms.maps.SupportMapFragment.onCreateView(Unknown Source)
    at android.support.v4.app.FragmentManagerImpl.moveToState(SourceFile:846)
    at android.support.v4.app.FragmentManagerImpl.moveToState(SourceFile:1061)
    at android.support.v4.app.FragmentManagerImpl.addFragment(SourceFile:1160)
    at android.support.v4.app.FragmentActivity.onCreateView(SourceFile:272)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
    ... 28 more 
```

我已经在我的清单中声明了相关许可，并将查看是否可以解决问题。但是，令人担忧的是，这只会发生在某些设备上，而不会发生在其他设备上。例如，这在我们的内部测试设备和许多其他设备上运行良好。有人对这个神秘的问题有任何见解吗？它可能是由proguard错误引起的吗？

**编辑 1：**使用 Google Play 服务库的 2.0.10 (541717-10) 版本时发生此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:27:41.700

在最新版本的 Google Play 服务库中，[文档已更新](https://developers.google.com/maps/documentation/android/start#specifying_permissions)，表明需要此权限。

发行[说明](https://developers.google.com/maps/documentation/android/releases#february_2013)指出了为什么需要此权限：

> 改进了从获得网络连接中的恢复。此修复需要 ACCESS_NETWORK_STATE 权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:05:51.573

是的。任何使用该`getActiveNetworkInfo()`方法都需要网络状态访问权限。

清单中的以下行应该可以解决问题：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

# ruby-on-rails-3 - 载波雾 (S3) Heroku

> ID：14567725
> 
> 赞同：0
> 
> 时间：2013-01-28T17:30:32.743
> 
> 标签：ruby-on-rails-3, amazon-s3, carrierwave, fog

我正在为这个设置而苦苦挣扎，并且已经阅读了 Carrierwave 文档并且仍然拉扯头发。即使在开发模式下也尝试启动服务器时出现错误。

> 退出 /Users/my-machine/.rvm/gems/ruby-1.9.3-p327/gems/carrierwave-0.7.1/lib/carrierwave/uploader/configuration.rb:73:in `eval'：无法转换零到字符串（TypeError）

这是我的设置。

**配置/初始化程序/carrierwave.rb**

```
S3_CONFIG = YAML.load_file(Rails.root.join('config', 'amazon_s3.yml'))[Rails.env]

CarrierWave.configure do |config|
  config.storage              = :s3
  config.s3_access_policy     = :public_read
  config.s3_access_key_id     = S3_CONFIG['access_key_id']
  config.s3_secret_access_key = S3_CONFIG['secret_access_key']
  config.s3_bucket            = S3_CONFIG['bucket']
  config.s3_region           = 'us-east-1'
end 
```

**配置/amazon_s3.yml**

```
development:
  access_key_id: xxxxxxxxxxxxxxxxxxx
  secret_access_key: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
  bucket: dev-bucket

test:
  access_key_id: xxxxxxxxxxxxxxxxxxx
  secret_access_key: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
  bucket: test-bucket

production:
  access_key_id: xxxxxxxxxxxxxxxxxxx
  secret_access_key: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
  bucket: prod-bucket 
```

**应用程序/上传器/image_uploader.rb**

```
class ImageUploader < CarrierWave::Uploader::Base
  # Choose what kind of storage to use for this uploader:
  #storage :file
  storage :fog

  # Override the directory where uploaded files will be stored.
  # This is a sensible default for uploaders that are meant to be mounted:
  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  # fix for Heroku, unfortunately, it disables caching, 
  # see: https://github.com/jnicklas/carrierwave/wiki/How-to%3A-Make-Carrierwave-work-on-Heroku
  def cache_dir
    "#{Rails.root}/tmp/uploads"
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:31:20.227

您如何在开发环境中建立 S3_CONFIG 环境变量？好像你失踪了。

# sql - SQL空数据取消所有计算

> ID：14567726
> 
> 赞同：0
> 
> 时间：2013-01-28T17:30:32.560
> 
> 标签：sql

我在这里有这个计算/查询：

```
SELECT  u.username,
        (a.totalCount * 7) +
        (b.totalCount * 3) +
        (c.totalCount * 1) AS totalScore
        FROM users u 
        LEFT JOIN
            (
                SELECT user_id, COUNT(user_id) totalCount
                FROM items 
                GROUP BY user_id
            ) a ON a.user_id= u.user_id
        LEFT JOIN
            (
                SELECT user_id, COUNT(user_id) totalCount
                FROM comments
                GROUP BY user_id
            ) b ON b.user_id= u.user_id
        LEFT JOIN
            (
                SELECT user_id, COUNT(user_id) totalCount
                FROM ratings
                GROUP BY user_id
            ) c ON c.user_id = u.user_id

        ORDER BY totalScore DESC LIMIT 10; 
```

问题是，如果 a、b 或 c 返回 0，则整个`totalScore`为 0。我不知道发生了什么？我没有将最终计数乘以 0 我不认为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T17:32:20.853

我认为这是一个空问题（使用您的 LEFT JOIN，这可能很容易发生）。

和`NULL + 1 + 2 = NULL`

所以使用`COALESCE`(if null then...) 运算符

所以

```
SELECT  u.username,
        (COALESCE(a.totalCount, 0) * 7) +
        (COALESCE(b.totalCount, 0) * 3) +
        (COALESCE(c.totalCount, 0) * 1) AS totalScore 
```

和一点[SqlFiddle](http://sqlfiddle.com/#!2/d41d8/6583)

# javascript - 在 x 和 y 之间生成相差至少 100 的“随机”数

> ID：14567732
> 
> 赞同：0
> 
> 时间：2013-01-28T17:30:46.527
> 
> 标签：javascript, random

我正在尝试将图像放置在网页上的横幅 div 中。图像需要沿 x 轴“随机”定位（使用 CSS`left`属性），因此在加载页面时它们并不总是相同的。我有以下脚本来执行此操作（它还设置了随机延迟，因此图像每次都以不同的时间顺序出现：

```
for (var i = 1; i <= 5; i++) {

    var delay = Math.floor(Math.random() * 800) + 1;
    var xPos = Math.floor(Math.random() * 900) + 1;

    $('#item'+i).css('left',xPos+'px').delay(delay).animate({ top: 18 }, { duration: 1000, easing: 'easeOutBounce' });

} 
```

但是，问题在于图像之间经常有太多重叠，并且它们彼此隐藏在一起。所以我想歪曲随机性，以便所有 xPos 变量之间至少有 100px 的差异。这应该给我一个随机的外观，但也让项目大部分可见。

必须有一个词来描述这种事情，但经过搜索，我找不到任何有用的东西来说明如何实现它。

谁能在这里指出我正确的方向？

非常感谢。

*编辑：*

好的，所以尝试滚动我自己的功能来做到这一点。我想我快到了。我正在做的是创建一个初始随机数并将其添加到一个数组中，然后遍历 5 个项目中的每一个并生成另一个随机数，然后比较它以确保它与当前数组中的任何东西有 100 多个不同。

代码是这样的（目前并非我的所有变量都在使用 - 这是一项正在进行的工作！）：

```
function randomImagePlacement() {
    var containerWidth = 940;                   // Width of container element
    var itemWidth = 267;                        // Width of item (taking into account rotation)
    var minX = 0;                               // Minimum left position of an item
    var maxX = containerWidth - itemWidth;      // Maximum left position of an item
    var minSeparation = 100;                    // Minimum number of pixels of separation between items
    var numberOfItems = 5;                      // Total number of items
    var randomNumbers = [];                     // Array 'container' to hold random numbers

    for (var i = 1; i <= numberOfItems; i++) {

        if (i == 1) {
            var firstRandomNumber = Math.floor(Math.random() * 700) + 1;
                    randomNumbers.push(firstRandomNumber);
                    console.log('First random number: ' + firstRandomNumber);
        } else {
                    var newRandomNumber = Math.floor(Math.random() * 700) + 1;

            /*
            This if/else block works okay but it doesn't keep checking differences until the criteria is met
            if (checkDiff(newRandomNumber, randomNumbers)) {
                        console.log('New number (' + newRandomNumber + ') sufficiently different enough');
                        randomNumbers.push(newRandomNumber);
            } else {
                        console.log('New number (' + newRandomNumber + ') NOT sufficiently different enough');
            }
            */
            /* This do/while block is my attempt at trying to run the check diff function until the criteria is met, but it just results in the browser crashing */     
            do {
                        randomNumbers.push(newRandomNumber);
            } while (checkDiff(newRandomNumber, randomNumbers) == true);

        }

    }

    for (var i = 0; i < randomNumbers.length; i++) {
        console.log('From final array: ' + randomNumbers[i]);
    }

}

function checkDiff(newRandomNumber, currentArray) {
    console.log('newRandomNumber = ' + newRandomNumber);

    var proximityMatch = false;
    for (var i = 0; i < currentArray.length; i++) {
        console.log('Diff between ' + currentArray[i] + ' and ' + newRandomNumber + ' = ' + Math.abs(currentArray[i] - newRandomNumber));
        if (Math.abs(currentArray[i] - newRandomNumber) > 100) {
            proximityMatch = true;
        }
    }
    if (proximityMatch == true) {
        return true;
    } else {
        return false;
    }
}

randomImagePlacement(); 
```

基本上它失败的地方是在上面的 do/while 循环中。我不确定执行此类操作的正确方法，但我基本上需要说“继续运行 checkDiff 函数，直到它返回 true；当它返回 true 时，将 newRandomNumber 添加到数组中；如果它不返回再次运行它”。

谁能帮我解决这个问题？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:34:31.957

您可以解决此问题的一种可能方法是：

item0.x = //随机数

item1.x = item0.x+item0.width + 100 + (随机数)

item2.x = item1.x+item1.width + 100 +（随机数）

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:48:47.230

**更新**

抱歉，我没有意识到您需要对所有生成的值进行比较。这将起作用：

```
var isLessThanMinSeparation = function checkDiff(randomNumber, randomNumbers, minSeparation) {
    var lessThan100 = false,                // Flag for whether minSeparation has been maintained
        i = 0;                              // Incrementer
    console.log('randomNumber = ' + randomNumber);
    for (i = 0; i < randomNumbers.length; i += 1) {
        console.log('Diff between ' + randomNumbers[i] + ' and ' + randomNumber + ' = ' + Math.abs(randomNumbers[i] - randomNumber));
        lessThan100 = lessThan100 || Math.abs(randomNumbers[i] - randomNumber) <= minSeparation;
    }
    return lessThan100;
};
var randomImagePlacement = function randomImagePlacement(numberOfItems, minSeparation) {
    //numberOfItems = 5,                    // Total number of items
    //minSeparation = 100,                  // Minimum number of pixels of separation between items
    var randomNumbers = [],                 // Array 'container' to hold random numbers
        randomNumber = 0,                   // Random number
        i = 0;                              // Incrementer
    for (i = 1; i <= numberOfItems; i += 1) {
        while (isLessThanMinSeparation(randomNumber, randomNumbers, minSeparation)) {
            randomNumber = Math.floor(Math.random() * 700) + 1;
        }
        randomNumbers.push(randomNumber);
    }
    return randomNumbers;
};
console.log(randomImagePlacement(5, 100)); 
```

我要做到这一点的方式是：

1.  存储最后一个随机分配的位置
2.  使用循环（最少运行一次）分配新的随机分配位置
3.  比较新随机分配的位置，如果差值 < 100，则重新进入循环

一个例子：

```
var randomizeImgPlacement = function randomizeImgPlacement() {
    var i = 0,
        delay = 0,
        xPos = 0,
        lastPos = 1000; //Default to 1000 so very first assignment has at least 100 difference
    for (i = 1; i <= 5; i += 1) {
        delay = Math.floor(Math.random() * 800) + 1;
        do { //loop assignment of xPos
            xPos = Math.floor(Math.random() * 900) + 1;
        } while (Math.abs(xPos) - Math.abs(lastPos) >= 100); // while difference is < 100
        $('#item' + i).css('left', xPos + 'px').delay(delay).animate({
            top: 18
        }, {
            duration: 1000,
            easing: 'easeOutBounce'
        });
        lastPos = xPos; //store lastPos for loop comparison
    }
}; 
```

# mysql - 向查询添加子查询

> ID：14567733
> 
> 赞同：2
> 
> 时间：2013-01-28T17:30:48.720
> 
> 标签：mysql

我是子查询的新手，我认为在以下情况下我需要它们，但不知道如何继续。

我有以下查询。现在，我有两件事需要添加到查询中 =

*   对于 CA 消费者，他们只能有 1 次车祸（car_acc），而在其他州则无关紧要。
*   在佛罗里达州、马里兰州、新罕布什尔州和西澳州，当前投保的可能为 0（布尔值），而在其他州则只能为 1。

    ```
    SELECT Count(*),
           Avg(sl.our_cost),
           Avg(sl.purchase_price)
    FROM   sold_leads AS sl
           INNER JOIN leads AS l
                   ON l.id = sl.lead_id
           INNER JOIN contacts AS c
                   ON c.lead_id = l.id
           INNER JOIN drivers AS d
                   ON d.lead_id = l.id
    WHERE  c.state IN( 'AK', 'AL', 'AR', 'AZ',
                       'CA', 'CO', 'CT', 'DC',
                       'DE', 'FL', 'GA', 'HI',
                       'IA', 'ID', 'IL', 'IN',
                       'KS', 'KY', 'LA', 'MD',
                       'ME', 'MI', 'MN', 'MO',
                       'MS', 'MT', 'NC', 'ND',
                       'NE', 'NH', 'NJ', 'NM',
                       'NV', 'NY', 'OH', 'OK',
                       'OR', 'PA', 'RI', 'SC',
                       'SD', 'TN', 'TX', 'UT',
                       'VA', 'VT', 'WA', 'WI',
                       'WV', 'WY' )
           AND l.leg = 0
           AND ( Datediff(CURRENT_DATE, d.date_of_birth) / 365 ) >= 50
           AND l.create_date >= '2012-1-1'; 
    ```

我将如何将这些子查询添加到我的查询中？有没有更好的方法来查找该信息？

**编辑：**

我应该提一下，它应该是 1 次“车祸”或“违规”。我有两张不同的表格，其中包含车祸和违规行为，因此对于 CA 居民，我只需要那些有 1 次事故或 1 次违规的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:57:03.187

因为 , 的数据`car_accidents`位于`violations`单独的表中，所以您需要使用`left join`.

希望这是有道理的:-)

```
SELECT Count(*),
       Avg(sl.our_cost),
       Avg(sl.purchase_price)
FROM   sold_leads AS sl
       INNER JOIN leads AS l
               ON l.id = sl.lead_id
       INNER JOIN contacts AS c
               ON c.lead_id = l.id
       INNER JOIN drivers AS d
               ON d.lead_id = l.id
       LEFT JOIN 
  (SELECT ca1.driver_id, COUNT(*) AS cnt FROM car_accidents ca1 GROUP BY ca1.driver_id) ca 
               ON (c.state = 'CA' and ca.driver_id = d.id)
       LEFT JOIN 
  (SELECT v1.driver_id, COUNT(*) AS cnt FROM violations v1 GROUP BY v1.driver_id) v
               ON (c.state IN ('CA') and v.driver_id = d.id)
WHERE  c.state IN( 'AK', 'AL', 'AR', 'AZ','CA', 'CO', 'CT', 'DC',
                   'DE', 'FL', 'GA', 'HI','IA', 'ID', 'IL', 'IN',
                   'KS', 'KY', 'LA', 'MD','ME', 'MI', 'MN', 'MO',
                   'MS', 'MT', 'NC', 'ND','NE', 'NH', 'NJ', 'NM',
                   'NV', 'NY', 'OH', 'OK','OR', 'PA', 'RI', 'SC',
                   'SD', 'TN', 'TX', 'UT','VA', 'VT', 'WA', 'WI',
                   'WV', 'WY' )
       AND l.leg = 0
       AND ( Datediff(CURRENT_DATE, d.date_of_birth) / 365 ) >= 50
       AND l.create_date >= '2012-1-1'
       AND IFNULL(v.cnt,0) < 2 AND ifnull(ca.cnt.0) < 2
       AND (c.state IN ('FL','MD','NH','WA') OR c.IsInsured = 1) 
```

**note** 将状态放在单独的表中会更有意义。这样，您可以将条款和条件放在该表中，并在您的联接条件中使用它们。

```
Table state
-----------
id : varchar(2) primary key not null
country : varchar(45) not null
max_accidents : int null
max_violations : int null
must_be_insured : boolean not null 
```

然后您可以将查询重写为：

```
SELECT Count(*),
       Avg(sl.our_cost),
       Avg(sl.purchase_price)
FROM   sold_leads AS sl
       INNER JOIN leads AS l
               ON l.id = sl.lead_id
       INNER JOIN contacts AS c
               ON c.lead_id = l.id
       INNER JOIN drivers AS d
               ON d.lead_id = l.id
       INNER JOIN state s ON (s.id = c.state)
       LEFT JOIN 
(SELECT ca1.driver_id, COUNT(*) AS cnt FROM car_accidents ca1 GROUP BY ca1.driver_id) ca 
           ON (s.max_accidents IS NOT NULL AND ca.driver_id = d.id)
   LEFT JOIN 
(SELECT v1.driver_id, COUNT(*) AS cnt FROM violations v1 GROUP BY v1.driver_id) v
           ON (s.max_violations IS NOT NULL AND v.driver_id = d.id)
       AND l.leg = 0
       AND (Datediff(CURRENT_DATE, d.date_of_birth) / 365.25 ) >= 50
       AND l.create_date >= '2012-1-1'; 
       AND IFNULL(v.cnt,0) < 2 AND ifnull(ca.cnt.0) < 2
       AND (s.must_be_insured = 0 OR c.IsInsured = 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:57:21.847

我知道它与子查询不同，但我经常用 CASE 语句解决这个“子条件”问题。您可以在 WHERE 子句的末尾添加一个：

```
WHERE c.state IN (...)
    AND l.leg = 0
    AND ( Datediff(CURRENT_DATE, d.date_of_birth) / 365 ) >= 50
    AND l.create_date >= '2012-1-1'
    AND CASE 
        # Identify cases where record should be excluded
        WHEN c.state = 'CA' AND c.car_acc > 1   THEN 0
        WHEN c.state NOT IN ('FL', 'MD', 'NH', 'WA') AND c.currently_insured = 1   THEN 0
        ELSE 1
    END = 1 
```

警告：与其他过滤方法相比，我不知道这会如何影响性能。

# java - MD5 MessageDigest 在系统类加载器中不可用

> ID：14567740
> 
> 赞同：1
> 
> 时间：2013-01-28T17:31:17.773
> 
> 标签：java, classloader

我有一个自定义类加载器，在它的构造函数中我有以下行。

```
MessageDigest.getInstance("MD5") 
```

当我使用自定义类加载器作为系统类加载器运行示例主应用程序时，出现以下错误。

```
Error occurred during initialization of VM
java.lang.Error: java.security.NoSuchAlgorithmException: MD5 MessageDigest not available
at java.lang.ClassLoader.initSystemClassLoader(ClassLoader.java:1504)
at java.lang.ClassLoader.getSystemClassLoader(ClassLoader.java:1468) 
```

由于安全提供程序来自 rt.jar，我认为这些类必须由引导类加载器加载，因此我应该能够在我的类加载器中使用它们。毕竟我可以访问 MessageDigest 类。为什么提供程序类不可用？

编辑：

我注意到的一件奇怪的事情是，虽然以下失败，

```
getInstance("MD5")
getInstance("MD5", "SUN") 
```

这个有效！

```
getInstance("MD5", new sun.security.provider.Sun()) 
```

所以提供程序类毕竟是由引导加载程序加载的，但由于某种原因查找失败。我想知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:25:43.210

您的自定义类加载器可能做错了——例如，没有从 extdirs 路径加载，或者没有将类加载请求传递给父级，因此它可以做同样的事情。

如果您只处理应用程序类路径，而不是 ext 类路径，这正是将会发生的事情（我知道，因为我在编写自定义类加载器时遇到了同样的问题）。

首先要检查的是类加载请求是否按照您的预期进入您的类加载器。是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:22:08.803

我刚刚尝试在自定义类加载器中将 MD5 作为构造函数的一部分加载，它似乎加载得很好。

MD5 的一部分是：import java.security.MessageDigest；

我也尝试了 SHA - 这对我来说也很好。可能您可以重新检查 java 版本 - 因为旧版本不包括在内，或者您可以通过加载其他算法来检查。像SHA什么的？

我的代码片段 public MD5Test(){ super(MD5Test.class.getClassLoader()); 尝试 { MessageDigest md = MessageDigest.getInstance("MD5"); System.out.println("我在这里.."); } catch (NoSuchAlgorithmException e) { e.printStackTrace(); }

# php - 如何将“\uxxxx”格式的 utf8 字符串转换为 latin1？

> ID：14567741
> 
> 赞同：0
> 
> 时间：2013-01-28T17:31:20.137
> 
> 标签：php, encoding, utf-8

我必须将 JSON 格式的字符串保存到我的 latin1 mysql 数据库中。为了能够使用 uft8_encode 函数，我必须将整个数组转换为 utf8，然后将生成的字符串转换回 latin1。

所以我尝试了以下代码：

```
 // $context is equal to array('produção' => 'homologação'), for testing purposes
    $context = Helper::getHelper('Util')->encodeUtf8($context); // Encodes key and value with utf8_encode

    $context = json_encode($context); // {"produ\u00e7\u00e3o":"homologa\u00e7\u00e3o"}

    $context = utf8_decode($context); // Still {"produ\u00e7\u00e3o":"homologa\u00e7\u00e3o"} 
```

但正如你所看到的，它并没有像我预期的那样工作。我也尝试使用 Zend_Json 库，但它也不适用于这些字符。

**为了简化：**我需要将一个 latin1 数组编码为 JSON，然后将该 JSON 插入到我的 latin1 数据库中。

有人知道我该怎么做吗？实现相同结果的更好方法也将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:38:32.667

你正在表演`utf8_decode`的东西不是`utf8`。

JSON 编码的内容始终是 ASCII，因此执行`utf8_decode`将无济于事（ASCII 是 UTF8 的子集）。您必须首先解码 JSON。

正确的顺序是：

```
$string = "some UTF8 string";   // utf8
$json = json_encode($string); // json
$utf8 = json_decode($json); // utf8
$latin = utf8_decode($utf8); // latin1 
```

当然，这里的 JSON 步骤是不必要的，但我猜您正在使用 JSON 来传输或存储您的数据（这是个好主意！）。

* * *

由于您更新了问题：

JSON 是 ASCII，因此将其存储在 latin1 编码字段中应该没问题。

如果您希望将 utf8 编码的数据作为 latin1 发送到客户端，那么您需要在将其放入数据库之前或将其拉出之后进行一些编码转换。

我的观点是你不需要做任何技巧来将 JSON 存储在数据库中。这不应该是问题的一部分。在这一点上，我仍然不清楚你想要什么。该声明：

> 为了简化：我需要将一个 latin1 数组编码为 JSON，然后将该 JSON 插入到我的 latin1 数据库中。

与您的输入是（我假设）utf8 编码的 JSON 的代码示例不押韵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:19:26.953

我有一个 latin1 编码的数组。我必须将该数组编码为 JSON，然后将该 JSON 存储在我的也是 latin1 db 中。我的第一个问题是 json_encode 只接受 utf8 编码的数组，所以我必须将整个数组编码为 utf8。

但真正的问题是我的数据库。当我插入 JSON 时，它会插入带有一些“\uxxxx”序列的文字字符串。我一开始以为那些只是 utf8 字符，所以我尝试解码它们。显然，我错了。

@Frits 解释 json_encode 的结果是纯 ascii 对我帮助很大，让我看到了不同的方向，我找到了解决问题的方法。

由于“\uxxxx”序列只是 ascii，我真正需要的是用正确的 utf8 字符替换这些序列，然后解码整个字符串。

这里解释得很好： [如何将 Unicode 转义序列（如“\u00ed”）解码为正确的 UTF-8 编码字符？](https://stackoverflow.com/questions/2934563/how-to-decode-unicode-escape-sequences-like-u00ed-to-proper-utf-8-encoded-cha)

我对这个解决方案特别不满意，但我有一个截止日期。所以，如果有人有更好的方法来做到这一点，请与我分享。

我希望这可以帮助一些处于相同情况的人。尽管它很丑，但它确实有效。

# python - 'AdminSite' 对象没有属性 'root'

> ID：14567744
> 
> 赞同：1
> 
> 时间：2013-01-28T17:31:31.250
> 
> 标签：python, django, django-admin, python-module, django-errors

```
 Environment:

Request Method: GET
Request URL: http://54.235.168.5/mds/

Django Version: 1.3.1
Python Version: 2.7.3
Installed Applications:
['sana.mrs',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.admin']
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'sana.mrs.util.LoggingMiddleware')

Traceback:
File "/usr/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  101\.                             request.path_info)
File "/usr/lib/python2.7/dist-packages/django/core/urlresolvers.py" in resolve
  250\.             for pattern in self.url_patterns:
File "/usr/lib/python2.7/dist-packages/django/core/urlresolvers.py" in _get_url_patterns
  279\.         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
File "/usr/lib/python2.7/dist-packages/django/core/urlresolvers.py" in _get_urlconf_module
  274\.             self._urlconf_module = import_module(self.urlconf_name)
File "/usr/lib/python2.7/dist-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)
File "/opt/sana/urls.py" in <module>
  131\.     (r'^admin/(.*)', admin.site.root),

Exception Type: AttributeError at /
Exception Value: 'AdminSite' object has no attribute 'root' 
```

可能的重复项是[How to correct this error: "'Adminsite' object has no attribute 'root'"](https://stackoverflow.com/questions/5503616/how-to-correct-this-error-adminsite-object-has-no-attribute-root)。

提到您的管理员网址应该是：

```
url(r'^admin/', include(admin.site.urls)) 
```

不是`(r'^admin/(.*)', admin.site.root)` - 它适用于 Django 1.0。对于 Django 1.3，它不起作用。

然后我得到了这个错误

NameError at / name 'include' 未定义

```
 Environment:

Request Method: GET
Request URL: http://54.235.168.5/mds/

Django Version: 1.3.1
Python Version: 2.7.3
Installed Applications:
['sana.mrs',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.admin']
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'sana.mrs.util.LoggingMiddleware')

Traceback:
File "/usr/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  101\.                             request.path_info)
File "/usr/lib/python2.7/dist-packages/django/core/urlresolvers.py" in resolve
  250\.             for pattern in self.url_patterns:
File "/usr/lib/python2.7/dist-packages/django/core/urlresolvers.py" in _get_url_patterns
  279\.         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
File "/usr/lib/python2.7/dist-packages/django/core/urlresolvers.py" in _get_urlconf_module
  274\.             self._urlconf_module = import_module(self.urlconf_name)
File "/usr/lib/python2.7/dist-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)
File "/opt/sana/urls.py" in <module>
  132\.  url(r'^admin/', include(admin.site.urls))

Exception Type: NameError at /
Exception Value: name 'include' is not defined 
```

我正在使用 Django 版本 1.3.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:34:46.823

你有这个吗

```
from django.conf.urls.defaults import patterns, include, url 
```

在你的`urls.py`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:34:22.813

它接缝你忘记了`from django.conf.urls.defaults import *`或`from django.conf.urls.defaults import include`在你的 urls.py 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T17:34:30.193

你可能还没有导入它：

```
from django.conf.urls.defaults import include 
```

一般来说，当它说 something`is not defined`时，意味着编译器无法解析某些东西。这通常是由于缺少导入语句或拼写错误造成的。

# regex - 用 grep 检测俄语字符

> ID：14567745
> 
> 赞同：6
> 
> 时间：2013-01-28T17:31:32.447
> 
> 标签：regex, shell, unicode, utf-8, grep

我正在尝试使用 grep 检测俄语字符，但目前我所拥有的似乎没有做任何事情：

```
 echo "Ёё" | grep -Eo "/[А-Яа-яЁё]/u" 
```

不返回任何输出。我需要做些什么来告诉 grep 返回输出吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T17:34:05.990

没有输出，因为 grep 正在寻找模式`/yourletters/u`

尝试这个：

```
 echo "Ёё" | grep -Eo "[А-Яа-яЁё]*" 
```

在这里测试：

```
kent$  echo "Ёё" | grep -Eo "[А-Яа-яЁё]*"
Ёё 
```

# hadoop - 带有按时间戳分区的配置单元表的 sqoop 导出问题

> ID：14567746
> 
> 赞同：0
> 
> 时间：2013-01-28T17:31:32.667
> 
> 标签：hadoop, hive, hdfs, sqoop

我无法 sqoop 导出按时间戳分区的配置单元表。

我有一个按时间戳分区的配置单元表。它创建的 hdfs 路径包含我认为导致 sqoop 问题的空格。

fs -ls 2013-01-28 16:31 /user/hive/warehouse/my_table/day=2013-01-28 00%3A00%3A00

从 sqoop 导出的错误：

13/01/28 17:18:23 错误 security.UserGroupInformation: PriviledgedActionException as:brandon (auth:SIMPLE) 原因:java.io.FileNotFoundException: 文件不存在: /user/hive/warehouse/my_table/day=2012- 10-29 00%3A00%3A00 在 org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getBlockLocationsUpdateTimes(FSNamesystem.java:1239) 在 org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getBlockLocationsInt(FSNamesystem. java:1192) 在 org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getBlockLocations(FSNamesystem.java:1165) 在 org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getBlockLocations(FSNamesystem.java:1147)在 org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.getBlockLocations(NameNodeRpcServer.java:383) 在 org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB。getBlockLocations(ClientNamenodeProtocolServerSideTranslatorPB.java:170) at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java:44064) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call (ProtobufRpcEngine.java:453) 在 org.apache.hadoop.ipc.RPC$Server.call(RPC.java:898) 在 org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1693)在 org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1689) 在 java.security.AccessController.doPrivileged(Native Method) 在 javax.security.auth.Subject.doAs(Subject.java:396 ) 在 org.apache.hadoop.ipc.Server$Handler.run(Server.java:1687) 的 org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1332)170) 在 org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:453) 的 org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java:44064) ) 在 org.apache.hadoop.ipc.RPC$Server.call(RPC.java:898) 在 org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1693) 在 org.apache.hadoop .ipc.Server$Handler$1.run(Server.java:1689) at java.security.AccessController.doPrivileged(Native Method) at javax.security.auth.Subject.doAs(Subject.java:396) at org.apache。 hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1332) 在 org.apache.hadoop.ipc.Server$Handler.run(Server.java:1687)170) 在 org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:453) 的 org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java:44064) ) 在 org.apache.hadoop.ipc.RPC$Server.call(RPC.java:898) 在 org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1693) 在 org.apache.hadoop .ipc.Server$Handler$1.run(Server.java:1689) at java.security.AccessController.doPrivileged(Native Method) at javax.security.auth.Subject.doAs(Subject.java:396) at org.apache。 hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1332) 在 org.apache.hadoop.ipc.Server$Handler.run(Server.java:1687)callBlockingMethod(ClientNamenodeProtocolProtos.java:44064) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:453) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java: 898) 在 org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1693) 在 org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1689) 在 java.security .AccessController.doPrivileged(Native Method) at javax.security.auth.Subject.doAs(Subject.java:396) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1332) at org.apache.hadoop .ipc.Server$Handler.run(Server.java:1687)callBlockingMethod(ClientNamenodeProtocolProtos.java:44064) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:453) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java: 898) 在 org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1693) 在 org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1689) 在 java.security .AccessController.doPrivileged(Native Method) at javax.security.auth.Subject.doAs(Subject.java:396) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1332) at org.apache.hadoop .ipc.Server$Handler.run(Server.java:1687)898) 在 org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1693) 在 org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1689) 在 java.security .AccessController.doPrivileged(Native Method) at javax.security.auth.Subject.doAs(Subject.java:396) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1332) at org.apache.hadoop .ipc.Server$Handler.run(Server.java:1687)898) 在 org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1693) 在 org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1689) 在 java.security .AccessController.doPrivileged(Native Method) at javax.security.auth.Subject.doAs(Subject.java:396) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1332) at org.apache.hadoop .ipc.Server$Handler.run(Server.java:1687)

如果你执行 fs -ls /user/hive/warehouse/my_table/day=2013-01-28 00%3A00%3A00 ls: `/user/hive/warehouse/my_table/day=2013-01-28': No such file or directory ls:`00%3A00%3A00': No such file or directory

如果添加引号，它会起作用：brandon@prod-namenode-new:~$ fs -ls /user/hive/warehouse/my_table/day="2013-01-28 00%3A00%3A00" 找到 114 个项目 -rw-r --r-- 2 布兰登超级组 4845 2013-01-28 16:30 /user/hive/warehouse/my_table/day=2013-01-28%2000%253A00%253A00/000000_0 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-08T21:52:20.520

您可以尝试使用“/user/hive/warehouse/my_table/day=2013-01-28*”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T18:33:20.737

So what you can do is:

Select all the data from hive and write it to a directory in HDFS

(using **INSERT OVERWRITE DIRECTORY '..path..' select a.column_1, a.column_n FROM table a**) ,

and in the sqoop command specify the directory location using **--export-dir ..dir..**

Hope this will help.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-09T05:52:12.440

不支持带有冒号（:) 的文件名作为这些[jira](https://issues.apache.org/jira/browse/HDFS-13)中提到的 HDFS 路径。但是可以通过将其转换为十六进制来工作。但是当 sqoop 尝试再次读取该路径时，它会将其转换为冒号（:) 因此它不能找到该路径。我建议从您的目录名称中删除时间部分，然后重试。希望这能回答您的问题。

# scala - JSON/Playframework 无效类型

> ID：14567751
> 
> 赞同：1
> 
> 时间：2013-01-28T17:31:49.450
> 
> 标签：scala, playframework, playframework-2.1, typesafe-stack

我在使用 Play 2.1 解析器解析 JSON 响应时遇到了一些麻烦。假设我收到以下 json 作为字符串：

{“姓名”：“我的姓名”}

我可以使用这几行来解析它......

```
case class MyJsonObj(name: String)
implicit val jsonRead = (
  (__ \ "name").read[String])(MyJsonObj.apply _)
val myObj = Json.parse("{\"name\": \"myName\"}").valide[MyJsonObj] 
```

现在说我收到几乎相同的消息，但我收到的不是字符串“myName”而是一个空值（即：{“name”：null}），解析失败......理想情况下，每当我收到一个空值时，我会喜欢放一个默认值（而不是引发错误）并继续解析。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:27:27.297

[`readNullable`](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/api/libs/json/JsPath.scala#L262-L272)您可以使用or实现此目的`orElse`：

```
(__ \ 'name).readNullable[String].map(_.getOrElse("default"))
// Another solution:
(__ \ 'name).read[String] orElse Reads.pure("default") 
```

注意：读者不能很好地使用“one-field”案例类（但我想这只是为了这个例子）。否则，请参阅[此主题](https://play.lighthouseapp.com/projects/82401-play-20/tickets/918-play-21-json-issues#ticket-918-4)。

# java - Jasper 报告：执行 SQL 语句时出错 (ORA-00942)：表或视图不存在

> ID：14567755
> 
> 赞同：0
> 
> 时间：2013-01-28T17:32:03.353
> 
> 标签：java, jakarta-ee, jasper-reports, ireport

我有一个名为 Analysis 的报告，由这个简单的查询填充：

```
SELECT * FROM TB_ANL analysis WHERE analysis.CD_ANL = $P{FILTER} 
```

只会选择一个元素（CD_ANL 是唯一的）。

当我在 iReports（4.7 版）中编辑此查询时，“*编辑查询*”窗口实际上显示了表格的列（因此它可以识别表格）并且我成功编译了报告。

当我尝试在我的服务器上运行它时，它指责 ORA-00942 并说：

```
net.sf.jasperreports.engine.JRException: Error executing SQL statement for : AnalysisTemplate
at net.sf.jasperreports.engine.query.JRJdbcQueryExecuter.createDatasource(JRJdbcQueryExecuter.java:229)
at net.sf.jasperreports.engine.fill.JRFillDataset.createQueryDatasource(JRFillDataset.java:758)
at net.sf.jasperreports.engine.fill.JRFillDataset.initDatasource(JRFillDataset.java:623)
at net.sf.jasperreports.engine.fill.JRBaseFiller.setParameters(JRBaseFiller.java:1160)
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:802)
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:746)
at net.sf.jasperreports.engine.fill.JRFiller.fillReport(JRFiller.java:58)
at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:417)
at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:247)
at gov.chesf.leilaovenda.nucleo.negocio.analise.RelatorioGerador.gerarRelatorio(RelatorioGerador.java:57)
at gov.chesf.leilaovenda.web.analise.analise.action.Index.gerarAnalise(Index.java:725)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:452)
at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:291)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:254) 
```

...引起：java.sql.SQLException：ORA-00942：表或视图不存在

```
at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)
at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:331)
at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:288)
at oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:745)
at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:219)
at oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPreparedStatement.java:813)
at oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:1049)
at oracle.jdbc.driver.T4CPreparedStatement.executeMaybeDescribe(T4CPreparedStatement.java:854)
at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1154)
at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3370)
at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3415)
at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)
at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)
at net.sf.jasperreports.engine.query.JRJdbcQueryExecuter.createDatasource(JRJdbcQueryExecuter.java:222)
... 85 more 
```

**所以，基本上，问题是：我可以在 iReports 和 SQLDeveloper 中查看表，但我不能用它填充报告，因为表或视图“不存在”。它有什么问题？Jasper 看不到桌子还有其他原因吗？**

我在这里发布之前所做的事情：

1.  我授予 Jasper 正在使用的用户。

2.  该表存在，是的。

3.  我检查了 Jasper 中的连接。这与 Hibernate 使用的是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:40:55.387

问题解决了。

这就是问题所在：它与 iReport 本身无关，而是与连接登录时用户使用的模式有关。

表 TB_ANL 应该被引用为 OWNER.TB_ANL 而不仅仅是 TB_ANL。

可能的解决方案：

1) 更新架构以包含 TB_ANL 2) 为 OWNER.TB_ANL 创建一个同义词作为 TB_ANL，这样每次您引用该表时，它都会在 OWNER 的架构中查找。

# c# - ClassInterfaceTypes 混合在一个程序集中（AutoDual 和无）

> ID：14567761
> 
> 赞同：2
> 
> 时间：2013-01-28T17:32:33.933
> 
> 标签：c#, delphi, com

我有 c# 项目，其中声明了一些类`[ClassInterface(ClassInterfaceType.AutoDual)]`和其他类`[ClassInterface(ClassInterfaceType.None)]`。

这些类是 COM 可见的，因为我需要将类型库（.tlb）导入 Delphi。

当我将类型库导入 Delphi 时，如果我在未启用“创建组件包装器”的情况下创建单元，则使用该`AutoDual`类型的 Delphi 包将无法识别它们。但是，如果我在启用包装器选项的情况下创建单元，则会发生相反的情况，这些`ClassInterfaceType.None`类无法正确识别，而是通过这些`AutoDual`类。

任何想法？我需要在不同的程序集中拥有这些类型吗？

我在 32 位 Windows Server 2003 上生成 _TLB.pas 文件并使用 FinalBuilder 7 进行编译。

# jquery-mobile - 恢复复选框列表

> ID：14567762
> 
> 赞同：0
> 
> 时间：2013-01-28T17:32:44.323
> 
> 标签：jquery-mobile, checkbox

我正在尝试使用 jquery mobile，我想检索复选框列表。这是我填充复选框列表的代码：

```
for( var i=0; i<results.rows.length; i++  ) //Remplir tableau liste des identifiants étapes
    { 
         $('#lbtn2').append("<input    type='checkbox' value="+
               results.rows.item(i).Phrase+
               "  name = "+results.rows.item(i).QuotationParDefaut+
               "   id="+results.rows.item(i).idPhrase+" />");
         $('#lbtn2').append('<label for='+
               results.rows.item(i).idPhrase+'>'+
               results.rows.item(i).Phrase+'</label>');
    } 
```

这是允许检索选定标签列表的代码。

```
$("#lbtn2 input:checked").each(function()
{
   tab_phrase_selectionner[j] = 
       $("label[for='" + ( $(this).attr("id") ) + "']").text();//Pour le fichier A1.js
   j++;
}); 
```

问题是，如果我选择六个复选框，它只会返回 3 个复选框。有人对这个问题有想法吗？

# c# - 检查莫尔斯电码转换器的输入

> ID：14567764
> 
> 赞同：1
> 
> 时间：2013-01-28T17:32:46.197
> 
> 标签：c#, asp.net

我想检查用户的输入，以确保他们只输入点和破折号，任何其他字母或数字都会返回错误消息。我还想允许用户在转换时输入空格，如何删除或忽略空格？

```
string permutations;
        string entered = "";
        do
        {
            Console.WriteLine("Enter Morse Code: \n");
            permutations = Console.ReadLine();
         .
         .
         } while(entered.Length != 0); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:40:03.763

```
string permutations = string.Empty;
Console.WriteLine("Enter Morse Code: \n");
permutations = Console.ReadLine(); // read the console
bool isValid = Regex.IsMatch(permutations, @"^[-. ]+$"); // true if it only contains whitespaces, dots or dashes
if (isValid) //if input is proper
{
    permutations = permutations.Replace(" ",""); //remove whitespace from string
}
else //input is not proper
{
    Console.WriteLine("Error: Only dot, dashes and spaces are allowed. \n"); //display error
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T17:57:11.003

假设您用一个空格分隔字母，用两个空格分隔单词。然后您可以使用这样的正则表达式来测试您的字符串是否格式正确

```
bool ok = Regex.IsMatch(entered, @"^(\.|-)+(\ {1,2}(\.|-)+)*$"); 
```

正则表达式解释：
`^`是字符串的开头。
`\.|-`是一个点（转义，`\`因为点在 Regex 中具有特殊含义）或 ( `|`) 一个减号。
`+`表示剩余部分的一个或多个重复（点或减号）。
`\ {1,2}`一或两个空格（它们后面又是点或减号`(\.|-)+`）。
`*`重复空格后跟点或减号零次或多次。
`$`是行的结尾。

您可以在空格处拆分字符串

```
string[] parts = input.Split(); 
```

两个空格将创建一个空条目。这允许您检测单词边界。例如

```
"–– ––– .–. ... .  –.–. ––– –.. .".Split(); 
```

产生以下字符串数组

```
{字符串[10]}
    [0]：“--”
    [1]：“————”
    [2]：“.-.”
    [3]：“……”
    [4]：“。”
    [5]：“”
    [6]：“–.–.”
    [7]：“————”
    [8]：“-..”
    [9]：“。”

```

# php - 广泛的沙盒测试后未调用 PayPal notify_url

> ID：14567768
> 
> 赞同：0
> 
> 时间：2013-01-28T17:33:14.017
> 
> 标签：php, paypal, paypal-ipn, paypal-sandbox

我正在为慈善棋盘游戏活动设计一个网站，人们可以在其中现场观看活动，并可以向慈善机构（儿童游戏）捐款，以迫使玩家连续玩 60 小时。因为捐款直接转到 Child's Play，所以我需要使用 notify_url 设置来传递我的 IPN 通知 URL；我们之前已经完成了两次马拉松比赛并且没有遇到任何问题，但是我们最近将其移植到了 PHP 上。

现在，在过去的几个月里，我一直在使用沙盒广泛地测试该站点，并且一切都运行良好。现在距离马拉松只有几个星期了，所以我切换到实际的 PayPal 系统，启动了测试捐赠，现在我遇到了一个问题：由于某种原因，PayPal 根本没有点击 notify_url。我通过暂时切换回沙盒验证了 URL，一切正常。我还在侦听器代码中添加了一些对 error_log 的调用，以查看它是否只是在某处的代码中被捕获，但发现它根本没有被命中。

如果有人可以在这里就我能做什么提供任何建议，我将不胜感激。显然我有点时间紧迫，所以如果你能早点而不是晚点回复，我会非常感激。

编辑：这是相关代码：

```
if (isset($_GET['paypalipn'])) {
  // tell PHP to log errors to ipn_errors.log in this directory
  ini_set('log_errors', true);
  ini_set('error_log', dirname(__FILE__).'/ipn_errors.log');

  // intantiate the IPN listener
  $listener = new IpnListener();

  // tell the IPN listener to use the PayPal test sandbox
  $listener->use_sandbox = false;

  error_log("here");

  // try to process the IPN POST
  try {
    $listener->requirePostMethod();
    $verified = $listener->processIpn();
  } catch (Exception $e) {
    error_log($e->getMessage());
    exit(0);
  }

  error_log("here2");

  // Process the IPN
  if ($verified) {

      error_log("here3");

      $errmsg = '';   // stores errors from fraud checks

      // Split the custom variable
      $split_custom = explode("&", $_POST['custom']);
      $custom_array = array();
      for ($i = 0; $i<count($split_custom); $i++) {
        $current_set = explode("=", $split_custom[$i]);
        $custom_array[$current_set[0]] = $current_set[1];
      } 

      error_log("here4");

      if (!isset($custom_array['game'])) {
        $custom_array['game'] = 0;
      }
      if (!isset($custom_array['player'])) {
        $custom_array['player'] = 0;
      }

      error_log("here5");

      if (!empty($errmsg)) {

          // manually investigate errors from the fraud checking
          $body = "IPN failed fraud checks: \n$errmsg\n\n";
          $body .= $listener->getTextReport();
          mail('jafawcett@gmail.com', 'IPN Fraud Warning', $body);

      } else {

          mail('jafawcett@gmail.com', 'Successful IPN', $listener->getTextReport());
      }

      error_log("donor_un: ".$custom_array['donor_un']);
      process_donation($_POST['mc_gross'], $custom_array['player'], $custom_array['game'],     $custom_array['donor_name'], $_POST['payer_email'], $custom_array['donor_un']);

  } else {
      // manually investigate the invalid IPN
      mail('jafawcett@gmail.com', 'Invalid IPN', $listener->getTextReport());
  }

} 
```

对于 ipn 侦听器类，我使用的是 Micah Carrick 创建的，可在此处获得： [https ://github.com/Quixotix/PHP-PayPal-IPN](https://github.com/Quixotix/PHP-PayPal-IPN)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:22:49.957

我问了我在 PayPal 的直接联系人，并得到了以下回复......

> 关于 IPN 问题，我们昨晚发生了中断。大约在凌晨 1 点到 2 点修复，IPN 被延迟，因为我们有大约 250 万个 IPN 的备份队列没有发送出去。我们目前正在处理这些 IPN。我希望很快就会有正常的功能。

[您还可以在 Twitter 上](https://twitter.com/search?q=paypal%20down)看到很多人在谈论这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:24:51.257

我们有同样的问题。

几个月来它工作得非常好，脚本保持不变。PayPal IPN 也在 PayPal 帐户中启用，我们的 IPN 刚刚在今天早上停止。

PayPal 可能存在问题，我们仍在努力解决。

# java - Java 延迟/不准确的碰撞检测

> ID：14567774
> 
> 赞同：-1
> 
> 时间：2013-01-28T17:33:35.223
> 
> 标签：java, swing, synchronization, collision-detection

> **可能重复：**
> [Java 矩形碰撞检测混淆](https://stackoverflow.com/questions/13825515/java-rectangle-collision-detection-confusion)

我遇到了碰撞检测的问题，我在其他论坛上询问过，现在已经在谷歌搜索了一个月（没有人有答案）。我对碰撞检测的问题是它被延迟或不准确，有时它可以完美地检测到它，有时会检测到一半，有时根本检测不到。有人说这是我的更新循环（使用摆动计时器）和 KeyInput 之间的同步问题。你怎么看？

代码！:)

键盘输入：

```
 public void keyPressed(KeyEvent e)
{

    int key = e.getKeyCode();

        if (key == KeyEvent.VK_D && walkRight == true)
        {

                Screen.movementX=-1;

        }
        else if (key == KeyEvent.VK_A && walkLeft == true)
        {

                Screen.movementX=1;

        }
        else if (key == KeyEvent.VK_S && walkDown == true)
        {

                Screen.movementY=-1;

        }
        else if (key == KeyEvent.VK_W && walkUp == true)
        {

                Screen.movementY=1;

        }

        if (key == KeyEvent.VK_D && walkRight == false)
        {

                Screen.movementX =0;

        }
        else if (key == KeyEvent.VK_A && walkLeft == false)
        {

                Screen.movementX=0;

        }
        else if (key == KeyEvent.VK_S && walkDown == false)
        {

                Screen.movementY=0;

        }
        else if (key == KeyEvent.VK_W && walkUp == false)
        {

                Screen.movementY=0;

        }

}
public void keyReleased(KeyEvent e)
{
    int key = e.getKeyCode();
    if (key == KeyEvent.VK_D)
    {
        Screen.movementX=0;
    }
    else if (key == KeyEvent.VK_A)
    {
        Screen.movementX=0;
    }
    else if (key == KeyEvent.VK_S)
    {
        Screen.movementY=0;
    }
    else if (key == KeyEvent.VK_W)
    {
        Screen.movementY=0;
    }
} 
```

碰撞：

```
public static void collision()
{
    p.walkUp = true;
    p.walkDown = true;
    p.walkLeft = true;
    p.walkRight = true;
    for (int i = 0; i < wallTileArr.size(); i++)
    {
        wallTile = wallTileArr.get(i);
        wallTile.collision(p);
    }
} 
```

和：

```
public void collision(Player p)
{
    if (p.downGetBounds().intersects(getBounds()))
    {
        p.walkDown = false;
    }

    else if (p.upGetBounds().intersects(getBounds()))
    {
        p.walkUp = false;
    }
    else if (p.leftGetBounds().intersects(getBounds()))
    {
        p.walkLeft = false;
    }
    else if (p.rightGetBounds().intersects(getBounds()))
    {
        p.walkRight = false;
    }

} 
```

切换 JPanel（将其用于主菜单等）

```
public static void changePanelTo(Component add)
{
        Main.f.getContentPane().invalidate();
        Main.f.getContentPane().removeAll();
        Main.f.add(add);
        Main.f.validate();
        add.requestFocusInWindow();

} 
```

随意询问有关代码的问题！

下载：[点击这里](http://www.mediafire.com/download.php?lz99e5n1vhcmish)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:57:28.007

如果您正在使用课程，请**[在此处](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Timer.html)**`java.util.Timer`观看。 它显然是这样的：

> 对应于每个 Timer 对象的是单个后台线程，用于按顺序执行所有计时器的任务。**定时器任务应该很快完成。如果一个定时器任务花费了过多的时间来完成，它就会“占用”定时器的任务执行线程。反过来，这可以延迟后续任务的执行，这些任务可能会在（如果）有问题的任务最终完成时“聚集”并快速连续执行**。

因此，有时与您的 Timer 类关联的 TimerTask 会在确切的碰撞时间触发，但有时需要一段时间，因为到那时您的上一个任务可能正在完成..

# jquery - 将 jQuery 的 ajax() 函数与 SSL 客户端证书一起使用

> ID：14567776
> 
> 赞同：13
> 
> 时间：2013-01-28T17:33:44.303
> 
> 标签：jquery, ajax, rest, authentication, ssl

我想使用`ajax()`jQuery 的功能对 REST 服务进行 XHR 调用。基本上，这工作正常，但 REST 服务只能通过 https 访问，并且需要客户端使用客户端证书进行身份验证。

如何使用 jQuery 的`ajax()`函数发送客户端证书？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-31T18:45:19.860

客户端证书身份验证 (a) 仅在服务器请求时执行，并且 (b) 由浏览器透明地完成，就 HTTP 和 JavaScript 层而言。

当服务器请求客户端证书（可能需要在 HTTP 请求之后重新协商）时，浏览器应提供一个弹出窗口来选择证书（取决于浏览器，不受任何 JavaScript 或 HTML 控制）或选择一个自动取决于其设置。

因此，jQuery 的`ajax()`功能不能对客户端证书做任何事情。

在我的脑海中，我不确定浏览器是否会触发客户端证书选择弹出窗口，如果它仅在 AJAX 调用期间首先出现（这可能取决于浏览器）。但是，如果已经选择了客户端证书（或者如果选择是自动的），浏览器将使用它进行身份验证，就像它用于任何其他正常请求一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T14:20:51.710

如果请求源和目标在同一个域中并使用 https: [Securing AJAX & SSL](https://stackoverflow.com/questions/7029042/securing-ajax-ssl) ，则可以进行 ssl ajax 调用。但是您不能在 ajax 调用中进行 ssl 身份验证。

# android - 运行反编译文件

> ID：14567778
> 
> 赞同：2
> 
> 时间：2013-01-28T17:33:55.613
> 
> 标签：android, eclipse, jar, decompiling

我正在开发一个 Android 应用程序，但昨天我的硬盘崩溃了，所有数据都消失了。我现在剩下的是一个 .apk 文件，我将其保存为备份。我设法从那个 .apk 文件中取回了我的代码，但不确定如何在 Eclipse 中导入整个项目。源文件与其他文件夹（如可绘制对象、值、清单等）一起保存在一个文件夹中。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:41:13.087

我有两种方法：

1.  下载 APKTool ( [url](http://code.google.com/p/android-apktool/) ) 并反编译您的 apk 包。[在这里](http://www.miui-au.com/add-ons/apktool/)你有一个教程。在此之后，您应该可以将您的代码导入 Ecpise。

2.  去找专家并尝试恢复您的硬盘。

我希望我有所帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T17:42:37.983

好的，首先，如果你试图反编译一个应用程序，我猜你已经使用了 apk-tool 或 smali/backsmali 工具来编写代码。

1.  AFAIK 你无法取回你的java代码。反编译后得到 smali 代码，这是一些 dalvik 汇编语言。我认为您不想在其中编写应用程序。

2.  如果您是应用程序的开发人员，您将备份您的代码，而不是 APK。所以，你确定你没有骗我们吗？

# c# - 循环 xaml 元素

> ID：14567780
> 
> 赞同：3
> 
> 时间：2013-01-28T17:34:04.603
> 
> 标签：c#, xaml

我有一个字符串数组。对于这些字符串中的每一个，我想创建一个单独的 xaml 元素（`<menuitem>`来自外部库）：

```
<MenuItem Header="Update">
  <MenuItem Header="arrayvalue1" Command="{Binding UpdateCommand}" />
  <MenuItem Header="arrayvalue2" Command="{Binding UpdateCommand}" />
  <MenuItem Header="arrayvalue3" Command="{Binding UpdateCommand}" />
</MenuItem> 
```

我不想硬编码 3 个元素，而是想从字符串数组中创建这些元素。

这可能吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:43:41.533

MenuItem 是一个 ItemsControl，因此您可以将任何集合绑定到 ItemsSource 属性，它会为您生成子项。在 MenuItem 的情况下，生成的子项也是 MenuItem。要将绑定值应用于这些子项的属性，您可以设置将应用于每个子项的 ItemContainerStyle。由于您要使用的命令位于顶级 DataContext 上，您将需要使用更多的间接绑定，这可能会因您使用的技术而异。这是 WPF 的外观：

```
 <MenuItem Header="Update" ItemsSource="{Binding Strings}">
            <MenuItem.ItemContainerStyle>
                <Style TargetType="{x:Type MenuItem}">
                    <Setter Property="Command" Value="{Binding Path=DataContext.UpdateCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Menu}}}" />
                    <Setter Property="Header" Value="{Binding}" />
                </Style>
            </MenuItem.ItemContainerStyle>
        </MenuItem> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:42:55.357

您要查找的内容称为[ItemsControl](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.aspx)。您可以通过向其中添加 ItemTemplate 来使用它以您喜欢的任何形式呈现一堆项目。

# html - 嵌入的 vimeo 视频无法在 iPad 上播放

> ID：14567785
> 
> 赞同：1
> 
> 时间：2013-01-28T17:34:13.010
> 
> 标签：html, ipad, embed, vimeo

她的网址是：http: [//greyhawkfilms.com/whatwedo.html](http://greyhawkfilms.com/whatwedo.html)

它在 iPhone 上播放良好，但当我尝试在 iPad 上播放时，只播放音频而没有视频。

我正在使用的嵌入代码在这里：

```
<iframe id="iframe1" src="http://player.vimeo.com/video/57884624" width="768px" height="432px" frameborder="10px" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T00:34:21.420

这个问题似乎是由隐藏 Vimeo 播放器引起的。我看到您在代码中执行此操作：

```
<div id="about-1-VP" style="display: none;">
  <div class="videoplayer">
    <div class="closevp"><a href="javascript:return:false"><span class="closevpbutton">(x) CLOSE</span></a>
    </div>
    <iframe id="iframe1" src="http://player.vimeo.com/video/57884624" width="768" height="432" frameborder="10" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>
  </div>
</div>4 
```

为避免此问题，请尝试使用另一种方法来隐藏 iframe 元素而不是 display:none，例如附加一个将元素置于屏幕外的类，例如

```
.special-hide
{
    position: absolute;
    left:-99999px;
} 
```

然后在显示 Vimeo 播放器时删除该类。

# c - C语言中最快的去交错操作？

> ID：14567786
> 
> 赞同：14
> 
> 时间：2013-01-28T17:34:14.377
> 
> 标签：c, arrays, performance, extract, memcpy

我有一个指向字节数组的指针，`mixed`其中包含两个不同数组的交错字节`array1`和`array2`. 说`mixed`看起来像这样：

```
a1b2c3d4... 
```

我需要做的是对字节进行去交错处理，以便得到`array1 = abcd...`and `array2 = 1234...`。`mixed`我提前知道了 的长度，`array1`和的长度`array2`是等价的，都等于`mixed / 2`。

这是我当前的实现（`array1`并且`array2`已经分配）：

```
int i, j;
int mixedLength_2 = mixedLength / 2;
for (i = 0, j = 0; i < mixedLength_2; i++, j += 2)
{
    array1[i] = mixed[j];
    array2[i] = mixed[j+1];
} 
```

这避免了任何昂贵的乘法或除法运算，但仍然不够快。我希望有类似的东西`memcpy`需要一个索引器，它可以使用低级块复制操作来加速这个过程。有没有比我目前拥有的更快的实现？

**编辑**

目标平台是 iOS 和 Mac 的 Objective-C。对于 iOS 设备而言，快速操作更为重要，因此专门针对 iOS 的解决方案总比没有好。

**更新**

感谢大家的回复，尤其是 Stephen Canon、Graham Lee 和 Mecki。这是我的“主”函数，如果可用，它使用斯蒂芬的 NEON 内在函数，否则使用格雷厄姆的联合游标，如 Mecki 所建议的那样减少迭代次数。

```
void interleave(const uint8_t *srcA, const uint8_t *srcB, uint8_t *dstAB, size_t dstABLength)
{
#if defined __ARM_NEON__
    // attempt to use NEON intrinsics

    // iterate 32-bytes at a time
    div_t dstABLength_32 = div(dstABLength, 32);
    if (dstABLength_32.rem == 0)
    {
        while (dstABLength_32.quot --> 0)
        {
            const uint8x16_t a = vld1q_u8(srcA);
            const uint8x16_t b = vld1q_u8(srcB);
            const uint8x16x2_t ab = { a, b };
            vst2q_u8(dstAB, ab);
            srcA += 16;
            srcB += 16;
            dstAB += 32;
        }
        return;
    }

    // iterate 16-bytes at a time
    div_t dstABLength_16 = div(dstABLength, 16);
    if (dstABLength_16.rem == 0)
    {
        while (dstABLength_16.quot --> 0)
        {
            const uint8x8_t a = vld1_u8(srcA);
            const uint8x8_t b = vld1_u8(srcB);
            const uint8x8x2_t ab = { a, b };
            vst2_u8(dstAB, ab);
            srcA += 8;
            srcB += 8;
            dstAB += 16;
        }
        return;
    }
#endif

    // if the bytes were not aligned properly
    // or NEON is unavailable, fall back to
    // an optimized iteration

    // iterate 8-bytes at a time
    div_t dstABLength_8 = div(dstABLength, 8);
    if (dstABLength_8.rem == 0)
    {
        typedef union
        {
            uint64_t wide;
            struct { uint8_t a1; uint8_t b1; uint8_t a2; uint8_t b2; uint8_t a3; uint8_t b3; uint8_t a4; uint8_t b4; } narrow;
        } ab8x8_t;

        uint64_t *dstAB64 = (uint64_t *)dstAB;
        int j = 0;
        for (int i = 0; i < dstABLength_8.quot; i++)
        {
            ab8x8_t cursor;
            cursor.narrow.a1 = srcA[j  ];
            cursor.narrow.b1 = srcB[j++];
            cursor.narrow.a2 = srcA[j  ];
            cursor.narrow.b2 = srcB[j++];
            cursor.narrow.a3 = srcA[j  ];
            cursor.narrow.b3 = srcB[j++];
            cursor.narrow.a4 = srcA[j  ];
            cursor.narrow.b4 = srcB[j++];
            dstAB64[i] = cursor.wide;
        }
        return;
    }

    // iterate 4-bytes at a time
    div_t dstABLength_4 = div(dstABLength, 4);
    if (dstABLength_4.rem == 0)
    {
        typedef union
        {
            uint32_t wide;
            struct { uint8_t a1; uint8_t b1; uint8_t a2; uint8_t b2; } narrow;
        } ab8x4_t;

        uint32_t *dstAB32 = (uint32_t *)dstAB;
        int j = 0;
        for (int i = 0; i < dstABLength_4.quot; i++)
        {
            ab8x4_t cursor;
            cursor.narrow.a1 = srcA[j  ];
            cursor.narrow.b1 = srcB[j++];
            cursor.narrow.a2 = srcA[j  ];
            cursor.narrow.b2 = srcB[j++];
            dstAB32[i] = cursor.wide;
        }
        return;
    }

    // iterate 2-bytes at a time
    div_t dstABLength_2 = div(dstABLength, 2);
    typedef union
    {
        uint16_t wide;
        struct { uint8_t a; uint8_t b; } narrow;
    } ab8x2_t;

    uint16_t *dstAB16 = (uint16_t *)dstAB;
    for (int i = 0; i < dstABLength_2.quot; i++)
    {
        ab8x2_t cursor;
        cursor.narrow.a = srcA[i];
        cursor.narrow.b = srcB[i];
        dstAB16[i] = cursor.wide;
    }
}

void deinterleave(const uint8_t *srcAB, uint8_t *dstA, uint8_t *dstB, size_t srcABLength)
{
#if defined __ARM_NEON__
    // attempt to use NEON intrinsics

    // iterate 32-bytes at a time
    div_t srcABLength_32 = div(srcABLength, 32);
    if (srcABLength_32.rem == 0)
    {
        while (srcABLength_32.quot --> 0)
        {
            const uint8x16x2_t ab = vld2q_u8(srcAB);
            vst1q_u8(dstA, ab.val[0]);
            vst1q_u8(dstB, ab.val[1]);
            srcAB += 32;
            dstA += 16;
            dstB += 16;
        }
        return;
    }

    // iterate 16-bytes at a time
    div_t srcABLength_16 = div(srcABLength, 16);
    if (srcABLength_16.rem == 0)
    {
        while (srcABLength_16.quot --> 0)
        {
            const uint8x8x2_t ab = vld2_u8(srcAB);
            vst1_u8(dstA, ab.val[0]);
            vst1_u8(dstB, ab.val[1]);
            srcAB += 16;
            dstA += 8;
            dstB += 8;
        }
        return;
    }
#endif

    // if the bytes were not aligned properly
    // or NEON is unavailable, fall back to
    // an optimized iteration

    // iterate 8-bytes at a time
    div_t srcABLength_8 = div(srcABLength, 8);
    if (srcABLength_8.rem == 0)
    {
        typedef union
        {
            uint64_t wide;
            struct { uint8_t a1; uint8_t b1; uint8_t a2; uint8_t b2; uint8_t a3; uint8_t b3; uint8_t a4; uint8_t b4; } narrow;
        } ab8x8_t;

        uint64_t *srcAB64 = (uint64_t *)srcAB;
        int j = 0;
        for (int i = 0; i < srcABLength_8.quot; i++)
        {
            ab8x8_t cursor;
            cursor.wide = srcAB64[i];
            dstA[j  ] = cursor.narrow.a1;
            dstB[j++] = cursor.narrow.b1;
            dstA[j  ] = cursor.narrow.a2;
            dstB[j++] = cursor.narrow.b2;
            dstA[j  ] = cursor.narrow.a3;
            dstB[j++] = cursor.narrow.b3;
            dstA[j  ] = cursor.narrow.a4;
            dstB[j++] = cursor.narrow.b4;
        }
        return;
    }

    // iterate 4-bytes at a time
    div_t srcABLength_4 = div(srcABLength, 4);
    if (srcABLength_4.rem == 0)
    {
        typedef union
        {
            uint32_t wide;
            struct { uint8_t a1; uint8_t b1; uint8_t a2; uint8_t b2; } narrow;
        } ab8x4_t;

        uint32_t *srcAB32 = (uint32_t *)srcAB;
        int j = 0;
        for (int i = 0; i < srcABLength_4.quot; i++)
        {
            ab8x4_t cursor;
            cursor.wide = srcAB32[i];
            dstA[j  ] = cursor.narrow.a1;
            dstB[j++] = cursor.narrow.b1;
            dstA[j  ] = cursor.narrow.a2;
            dstB[j++] = cursor.narrow.b2;
        }
        return;
    }

    // iterate 2-bytes at a time
    div_t srcABLength_2 = div(srcABLength, 2);
    typedef union
    {
        uint16_t wide;
        struct { uint8_t a; uint8_t b; } narrow;
    } ab8x2_t;

    uint16_t *srcAB16 = (uint16_t *)srcAB;
    for (int i = 0; i < srcABLength_2.quot; i++)
    {
        ab8x2_t cursor;
        cursor.wide = srcAB16[i];
        dstA[i] = cursor.narrow.a;
        dstB[i] = cursor.narrow.b;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T17:42:42.627

在我的脑海中，我不知道用于解交织 2 通道字节数据的库函数。但是，值得向 Apple 提交错误报告以请求此类功能。

同时，使用 NEON 或 SSE 内在函数对此类函数进行矢量化非常容易。具体来说，在 ARM 上，您将希望使用`vld1q_u8`从每个源数组加载一个向量，`vuzpq_u8`对它们进行去交错，并`vst1q_u8`存储结果向量；这是我没有测试甚至尝试构建的粗略草图，但它应该说明总体思路。更复杂的实现肯定是可能的（特别是，NEON 可以在单个指令中加载/存储*两个*16B 寄存器，编译器可能不会这样做，并且根据缓冲区的长度，一些流水线和/或展开可能是有益的是）：

```
#if defined __ARM_NEON__
#   include <arm_neon.h>
#endif
#include <stdint.h>
#include <stddef.h>

void deinterleave(uint8_t *mixed, uint8_t *array1, uint8_t *array2, size_t mixedLength) {
#if defined __ARM_NEON__
    size_t vectors = mixedLength / 32;
    mixedLength %= 32;
    while (vectors --> 0) {
        const uint8x16_t src0 = vld1q_u8(mixed);
        const uint8x16_t src1 = vld1q_u8(mixed + 16);
        const uint8x16x2_t dst = vuzpq_u8(src0, src1);
        vst1q_u8(array1, dst.val[0]);
        vst1q_u8(array2, dst.val[1]);
        mixed += 32;
        array1 += 16;
        array2 += 16;
    }
#endif
    for (size_t i=0; i<mixedLength/2; ++i) {
        array1[i] = mixed[2*i];
        array2[i] = mixed[2*i + 1];
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T17:52:24.870

我只对此进行了轻微测试，但它似乎至少是您的版本的两倍：

```
typedef union {
uint16_t wide;
struct { uint8_t top; uint8_t bottom; } narrow;
} my_union;

uint16_t *source = (uint16_t *)mixed;
for (int i = 0; i < mixedLength/2; i++)
{
    my_union cursor;
    cursor.wide = source[i];
    array1[i] = cursor.narrow.top;
    array2[i] = cursor.narrow.bottom;
} 
```

请注意，我对结构打包并不小心，但在这种情况下*，在这种架构上这*不是问题。另请注意，有人可能会抱怨我选择的命名`top`和`bottom`；我假设你知道你需要哪个整数的哪一半。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T18:03:21.027

好的，这是您的原始方法：

```
static void simpleDeint (
    uint8_t * array1, uint8_t * array2, uint8_t * mixed, int mixedLength
) {
    int i, j;
    int mixedLength_2 = mixedLength / 2;
    for (i = 0, j = 0; i < mixedLength_2; i++, j += 2)
    {
        array1[i] = mixed[j];
        array2[i] = mixed[j+1];
    }
} 
```

拥有 1000 万个条目并且`-O3`（编译器应针对最大速度进行优化），我可以在我的 Mac 上每秒运行 154 次。

这是我的第一个建议：

```
static void structDeint (
    uint8_t * array1, uint8_t * array2, uint8_t * mixed, int mixedLength
) {
    int i;
    int len;
    uint8_t * array1Ptr = (uint8_t *)array1;
    uint8_t * array2Ptr = (uint8_t *)array2;
    struct {
        uint8_t byte1;
        uint8_t byte2;
    } * tb = (void *)mixed;

    len = mixedLength / 2;
    for (i = 0; i < len; i++) {
      *(array1Ptr++) = tb->byte1;
      *(array2Ptr++) = tb->byte2;
      tb++;
    }
} 
```

与以前相同的计数和优化，我每秒运行 193 次。

现在来自 Graham Lee 的建议：

```
static void unionDeint (
    uint8_t * array1, uint8_t * array2, uint8_t * mixed, int mixedLength
) {
    union my_union {
        uint16_t wide;
        struct { uint8_t top; uint8_t bottom; } narrow;
    };

    uint16_t * source = (uint16_t *)mixed;
    for (int i = 0; i < mixedLength/2; i++) {
        union my_union cursor;
        cursor.wide = source[i];
        array1[i] = cursor.narrow.top;
        array2[i] = cursor.narrow.bottom;
    }
} 
```

与以前相同的设置，每秒运行 198 次（注意：此方法不安全，结果取决于 CPU 字节序。在您的情况下，array1 和 array2 可能已交换，因为 ARM 是小字节序，因此您必须在代码中交换它们）。

这是我迄今为止最好的一个：

```
static void uint32Deint (
    uint8_t * array1, uint8_t * array2, uint8_t * mixed, int mixedLength
) {
    int i;
    int count;
    uint32_t * fourBytes = (void *)mixed;
    uint8_t * array1Ptr = (uint8_t *)array1;
    uint8_t * array2Ptr = (uint8_t *)array2;

    count = mixedLength / 4;
    for (i = 0; i < count; i++) {
        uint32_t temp = *(fourBytes++);

#if __LITTLE_ENDIAN__
        *(array1Ptr++) = (uint8_t)(temp & 0xFF);
        temp >>= 8;
        *(array2Ptr++) = (uint8_t)(temp & 0xFF);
        temp >>= 8;
        *(array1Ptr++) = (uint8_t)(temp & 0xFF);
        temp >>= 8;
        *(array2Ptr++) = tb->byte2;

#else
        *(array1Ptr++) = (uint8_t)(temp >> 24);
        *(array2Ptr++) = (uint8_t)((temp >> 16) & 0xFF);
        *(array1Ptr++) = (uint8_t)((temp >>  8) & 0xFF);
        *(array2Ptr++) = (uint8_t)(temp & 0xFF);
#endif
    }
    // Either it is a multiple of 4 or a multiple of 2.
    // If it is a multiple of 2, 2 bytes are left over.
    if (count * 4 != mixedLength) {
        *(array1Ptr) = mixed[mixedLength - 2];
        *(array2Ptr) = mixed[mixedLength - 1];
    }
} 
```

与上面相同的设置，每秒 219 次，除非我犯了错误，否则应该可以使用任何一种字节序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T18:20:07.823

我推荐 Graham 的解决方案，但如果这对速度非常关键并且您愿意使用 Assembler，那么您可以变得更快。

这个想法是这样的：

1.  从 中读取**整个 32 位**整数`mixed`。你会得到'a1b2'。

2.  将低 16 位旋转 8 位得到 '1ab2'（我们使用小端序，因为这是 ARM 和 Apple A# 中的默认值，所以前两个字节是低字节）。

3.  将整个 32 位寄存器向右旋转 8 位（我认为它是正确的......）以获得“21ab”。

4.  将低 16 位旋转 8 位得到 '12ab'

5.  将低 8 位写入`array2`.

6.  将整个 32 位寄存器循环 16 位。

7.  将低 8 位写入`array1`

8.  前进`array1`16 位、`array2`16 位和`mixed`32 位。

9.  重复。

我们已经交换了 2 次内存读取（假设我们使用 Graham 版本或等效版本）和 4 次内存，其中一次内存读取、两次内存写入和 4 次寄存器操作。虽然操作的数量从 6 个增加到 7 个，但寄存器操作比内存操作快，所以这样更有效。此外，由于我们一次读取`mixed`32 位而不是 16 位，因此我们将迭代管理减少了一半。

PS：理论上这也可以用于 64 位架构，但是为 'a1b2c3d4' 做所有这些旋转会让你发疯。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-05T18:40:11.350

对于 x86 SSE，`pack`和`punpck`说明是您所需要的。使用 AVX 以方便非破坏性 3 操作数指令的示例。（不使用 AVX2 256b-wide 指令，因为 256b pack/unpck 指令在低和高 128b 通道中执行两个 128b 解包，因此您需要洗牌才能以正确的最终顺序得到东西。）

以下的内在函数版本将起作用。Asm 指令的输入时间较短，仅用于编写快速答案。

**交错**:`abcd`和`1234`-> `a1b2c3d4`:

```
# loop body:
vmovdqu    (%rax), %xmm0  # load the sources
vmovdqu    (%rbx), %xmm1
vpunpcklbw %xmm0, %xmm1, %xmm2  # low  halves -> 128b reg
vpunpckhbw %xmm0, %xmm2, %xmm3  # high halves -> 128b reg
vmovdqu    %xmm2, (%rdi)   # store the results
vmovdqu    %xmm3, 16(%rdi)
# blah blah some loop structure.

`punpcklbw` interleaves the bytes in the low 64 of the two source `xmm` registers.  There are `..wd` (word->dword), and dword->qword versions which would be useful for 16 or 32bit elements. 
```

**去交错**：`a1b2c3d4`->`abcd`和`1234`

```
#outside the loop
vpcmpeqb    %xmm5, %xmm5   # set to all-1s
vpsrlw     $8, %xmm5, %xmm5   # every 16b word has low 8b = 0xFF, high 8b = 0.

# loop body
vmovdqu    (%rsi), %xmm2     # load two src chunks
vmovdqu    16(%rsi), %xmm3
vpand      %xmm2, %xmm5, %xmm0  # mask to leave only the odd bytes
vpand      %xmm3, %xmm5, %xmm1
vpackuswb  %xmm0, %xmm1, %xmm4
vmovdqu    %xmm4, (%rax)    # store 16B of a[]
vpsrlw     $8, %xmm2, %xmm6     # even bytes -> odd bytes
vpsrlw     $8, %xmm3, %xmm7
vpackuswb  %xmm6, %xmm7, %xmm4
vmovdqu    %xmm4, (%rbx) 
```

这当然可以使用更少的寄存器。我避免重用寄存器以提高可读性，而不是性能。只要您从不依赖于先前值的东西开始，硬件寄存器重命名就不会导致重用。（例如`movd`，不是`movss`或`pinsrd`。）

解交织的工作量要大得多，因为`pack`指令会进行有符号或无符号饱和，因此每个 16b 元素的高 8b 必须首先归零。

另一种方法是使用`pshufb`将单个源 reg 的奇数或偶数字打包到寄存器的低 64 位。但是，在 AMD XOP 指令集之外`VPPERM`，没有可以同时从 2 个寄存器中选择字节的 shuffle（就像 Altivec 的备受喜爱的`vperm`）。因此，仅使用 SSE/AVX，每 128b 的交错数据需要 2 次随机播放。并且由于存储端口的使用可能是瓶颈，a`punpck`将两个 64 位块组合`a`到一个寄存器中以建立一个 128b 存储。

使用 AMD XOP，去交错将是 2x128b 加载、2`VPPERM`和 2x128b 存储。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-28T18:08:50.810

1.  过早优化不好

2.  您的编译器可能比您更擅长优化。

也就是说，您可以做*一些*事情来帮助编译器，因为您拥有编译器无法拥有的数据语义知识：

1.  尽可能多地读取和写入字节，直到本机字大小 - 内存操作很昂贵，因此尽可能在寄存器中进行操作

2.  展开循环 - 查看“Duff 的设备”。

FWIW，我制作了您的复制循环的两个版本，一个与您的大致相同，第二个使用大多数人认为“最佳”（尽管仍然很简单）的 C 代码：

```
void test1(byte *p, byte *p1, byte *p2, int n)
{
    int i, j;
    for (i = 0, j = 0; i < n / 2; i++, j += 2) {
        p1[i] = p[j];
        p2[i] = p[j + 1];
    }
}

void test2(byte *p, byte *p1, byte *p2, int n)
{
    while (n) {
        *p1++ = *p++;
        *p2++ = *p++;
        n--; n--;
    }
} 
```

在`gcc -O3 -S`Intel x86 上，它们都产生了几乎相同的汇编代码。这是内部循环：

```
LBB1_2:
    movb    -1(%rdi), %al
    movb    %al, (%rsi)
    movb    (%rdi), %al
    movb    %al, (%rdx)
    incq    %rsi
    addq    $2, %rdi
    incq    %rdx
    decq    %rcx
    jne LBB1_2 
```

和

```
LBB2_2:
    movb    -1(%rdi), %al
    movb    %al, (%rsi)
    movb    (%rdi), %al
    movb    %al, (%rdx)
    incq    %rsi
    addq    $2, %rdi
    incq    %rdx
    addl    $-2, %ecx
    jne LBB2_2 
```

两者具有相同数量的指令，差异仅是因为第一个版本计数为`n / 2`，而第二个版本计数为零。

**编辑**这里是一个更好的版本：

```
/* non-portable - assumes little endian */
void test3(byte *p, byte *p1, byte *p2, int n)
{
    ushort *ps = (ushort *)p;

    n /= 2;
    while (n) {
        ushort n = *ps++;
        *p1++ = n;
        *p2++ = n >> 8;
    }
} 
```

导致：

```
LBB3_2:
    movzwl  (%rdi), %ecx
    movb    %cl, (%rsi)
    movb    %ch, (%rdx)  # NOREX
    addq    $2, %rdi
    incq    %rsi
    incq    %rdx
    decq    %rax
    jne LBB3_2 
```

这是少了一条指令，因为它利用了对`%cl`and的立即访问`%ch`。

# html - 在 XML 中为 XSLT使用标签

> ID：14567794
> 
> 赞同：2
> 
> 时间：2013-01-28T17:34:29.907
> 
> 标签：html, xml, xslt, xslt-2.0

我目前在进行 XML/XSLT 到 HTML 的转换时遇到了一些麻烦。简而言之，我想`<br />`在一个 XML 标签内使用标签，这样转换后的 HTML 文件就会显示一个换行符。经过一些尝试，我得到了它的工作，但是以其他一些功能为代价。即突出部分的能力。

首先是转储下来的 XML 文件。所以基本上，有几个可能的标签都包含名字和姓氏。在这种情况下，我希望在单独的行上解析名字和姓氏（因此是`<br />`标签）。此外，在某些情况下，需要突出显示名字或姓氏。在这种情况下，在第 3 行，姓氏“The Hand”。

```
<swift_native>
<tag tag_code=":1:"><![CDATA[Jaco<br />Ronnie]]></tag>
<tag tag_code=":2:"><![CDATA[John<br />Doe]]></tag>
<tag tag_code=":2:"><![CDATA[Robbie<br />]]><highlight>The Hand</highlight></tag>
</swift_native> 
```

到目前为止，根据我在 XSLT 中使用的方法，我可以使换行符正确或突出显示。但不是两者兼而有之：下图显示了这一点。

![输出](../Images/65f0207c51ca2941cbff2edf3baea692.png) 下面是使用的 XSLT 文件。您可以在哪里看到 using`<xsl:apply-templates/>`将使突出显示工作并`<xsl:value-of select="." disable-output-escaping="yes"/>`让我`<br />`正确使用。

```
<?xml version="1.0"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<!-- HTML Layout definition -->
<xsl:output method="html"/>
<xsl:template match="swift_native">

    <html>
        <head>
            <title>
                <xsl:apply-templates select="message_id"/>
            </title>
            <style type="text/css">
                #tbl1,#tbl2 {display:none;}
                #lnk1,#lnk2   {border:none;background:none;width:85px;}
                td {FONT-SIZE: 75%; MARGIN: 0px; COLOR: #000000;}
                td {FONT-FAMILY: verdana,helvetica,arial,sans-serif}
                a {TEXT-DECORATION: none;}
                table.subtable {border-collapse:collapse;}
                table.subtable td {border:1px solid black;}
            </style>
        </head>
        <body>
            <table cellpadding="3" width="100%" class="subtable">
                <tr bgcolor="#cccccc">
                    <td colspan="3">Block4</td>
                </tr>
                <xsl:apply-templates select="tag" />
            </table>
        </body>
    </html>
</xsl:template>

<!-- Variable definition -->

<xsl:template match="tag">
    <tr>
        <td>
            <b>
                <xsl:value-of select="@tag_code" />
            </b>
        </td>
        <td>
            <xsl:value-of select="." disable-output-escaping="yes"/>
        </td>
        <td>
            <xsl:apply-templates/>
        </td>
    </tr>
</xsl:template>

<xsl:template match="highlight">
    <span style="background-color:yellow;">
        <xsl:apply-templates/>
    </span>
</xsl:template>

</xsl:stylesheet> 
```

显然，问题是：有人知道我可以同时使用`<br />`标签和突出显示的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:44:24.923

`CDATA`告诉处理器将内容解释为纯文本，而不是标记。这就是为什么`disable-output-escaping`需要防止`<br/>`显示为`&lt;br/&gt;`.

如果你想利用`disable-output-escaping`，你必须打破你选择标签内容的方式。

添加模板

```
<xsl:template match="tag/text()">
    <xsl:value-of select="." disable-output-escaping="yes"/>
</xsl:template> 
```

并将`value-of`行更改为

```
<xsl:apply-templates select="text()|*"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:48:49.173

这里的一种解决方案是同时使用两者：

```
<xsl:template match="tag">
    <tr>
        <td>
            <b>
                <xsl:value-of select="@tag_code" />
            </b>
        </td>
        <td>
            <xsl:apply-templates/>
        </td>
    </tr>
</xsl:template>

<xsl:template match="tag//text()">
    <xsl:value-of select="." disable-output-escaping="yes" />
</xsl:template>

<xsl:template match="highlight">
    <span style="background-color:yellow;">
        <xsl:apply-templates />
    </span>
</xsl:template> 
```

但是请注意，如果您这样做，您需要确保`<tag>`节点内的任何文本值在 CDATA 中正确转义，并在其外部进行*双重*转义，也就是说，而不是

```
<tag tag_code=":2:"><![CDATA[Robbie & Bobbie <br />]]><highlight> &amp; The Hand</highlight></tag> 
```

你需要有：

```
<tag tag_code=":2:"><![CDATA[Robbie &amp; Bobbie<br />]]><highlight> &amp;amp; The Hand</highlight></tag> 
```

`<tag>`因此，如果元素有可能包含 XML 特殊字符，这可能不是一个好方法。

如果您可以确保直接位于下方的文本`<tag>`将*始终*位于 CDATA 中，并且较低节点（例如`<highlight>`s）中的任何内容都不会，那么它会稍微简单一些。您可以用这个替换上面的文本匹配模板：

```
<xsl:template match="tag/text()">
    <xsl:value-of select="." disable-output-escaping="yes" />
</xsl:template> 
```

然后您只需要确保 CDATA 中的内容被正确转义，并且其他任何内容都只是有效的 XML。

最后，如果您对源数据有一定的控制权，则应考虑放弃 CDATA 并仅在以下内容中拥有`<br />`权利`<tag>`：

```
<tag tag_code=":2:">Robbie<br /><highlight>The Hand</highlight></tag> 
```

然后你可以使用这个 XSL，它比任何使用的东西都要健壮得多`disable-output-escaping`：

```
<xsl:template match="tag">
    <tr>
        <td>
            <b>
                <xsl:value-of select="@tag_code" />
            </b>
        </td>
        <td>
            <xsl:apply-templates/>
        </td>
    </tr>
</xsl:template>

<xsl:template match="tag/@* | tag/node()">
   <xsl:copy>
      <xsl:apply-templates select="@* | node()" />
   </xsl:copy>
</xsl:template>

<xsl:template match="highlight">
    <span style="background-color:yellow;">
        <xsl:apply-templates />
    </span>
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-04T20:39:01.737

令人高兴的是，也有一个简单的解决方案。只需将此行添加到您的 xsl 文件中：

```
<xsl:template match="br"><br/></xsl:template> 
```

这样，无需将数据包装到 CDATA 中，而是使用更直观的方法：

```
<tag tag_code=":1:">Jaco<br/>Ronnie</tag> 
```

同样，可以包括其他常见的简单 HTML 标记。这是一个将粗体、斜体等链接到 CSS 样式的示例，但是每个（如上）的单行也可以：

```
<xsl:template match="i|b|u|strong">
    <span>
        <xsl:attribute name="class">html_<xsl:value-of select="name(.)" /></xsl:attribute>
        <xsl:apply-templates />
    </span>
</xsl:template> 
```

如果您发现自己经常这样做，请将它们全部复制到 html.xsl 并`xsl:include`在需要时使用它们。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2019-07-12T12:38:26.387

如果你想做**在 html 中是**

 **您需要的只是在 XLS 中制作：

```
<br></br> 
```**

# doctrine-orm - OneToMany 无效映射

> ID：14567796
> 
> 赞同：0
> 
> 时间：2013-01-28T17:34:36.240
> 
> 标签：doctrine-orm

我正在尝试创建 oneToMany 关系。由于 Doctrine 仅提供 ManyToOne 单向 im 使用它。不知何故，映射验证失败，我无法发现我的错误：

验证错误：

> [映射] FAIL - 实体类 'Strego\TippBundle\Entity\BetRound' 映射无效：* 关联 Strego\TippBundle\Entity\BetRound#userStatus 指的是拥有方字段 Strego\TippBundle\Entity\UserBetRoundStatus#betRound 哪个不存在。

我的第一个实体（BetRound）：

```
<?php 
namespace Strego\TippBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

use Doctrine\Common\Collections\Collection as Collection;
use Strego\AppBundle\Entity\Base as BaseEntity;

/**
 * Strego\TippBundle\Entity\BetRound
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class BetRound extends BaseEntity {

    //......

    /**
     *
     * @var Collection
     * @ORM\OneToMany(targetEntity="UserBetRoundStatus", mappedBy="betRound", cascade={"all"})
     */
    protected $userStatus;

} 
```

我的相关实体（UserBetRoundStatus）

```
<?php
namespace Strego\TippBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use Strego\AppBundle\Entity\Base as BaseEntity;

/**
 * Strego\TippBundle\Entity\Game
 *
 * @ORM\Table
 * @ORM\Entity
 * @UniqueEntity(fields={"user", "betRound"}, message="Unique Entity Validator Fails for UserStatus", groups="unique")
 * 
 */
class UserBetRoundStatus extends BaseEntity {
    // .....

    /*
     * @var BetRound
     * @ORM\ManyToOne(targetEntity="BetRound", inversedBy="userStatus")
     * @ORM\JoinColumn(name="betround_id", referencedColumnName="id", nullable=false)
     * @Assert\NotNull()
     */
    protected $betRound;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:35:49.777

我发现了问题：

```
/**  <---------  you need two *
 * @var BetRound
 * @ORM\ManyToOne(targetEntity="BetRound", inversedBy="userStatus")
 * @ORM\JoinColumn(name="betround_id", referencedColumnName="id", nullable=false)
 * @Assert\NotNull()
 */
protected $betRound; 
```

# java - 奇怪的Java泛型编译错误：参数化方法不适用于相同的参数化类型？

> ID：14567798
> 
> 赞同：1
> 
> 时间：2013-01-28T17:34:43.033
> 
> 标签：java, generics

我偶然发现了这个错误，我找不到问题：

```
The method compute(Set<String>, Set<String>) 
in the type JaccardSimilarity<String> is not applicable 
for the arguments (Set<String>, Set<String>) 
```

有问题的方法是使用泛型：

```
public class JaccardSimilarity<E> implements SimilarityMeasure<Set<E>, Set<E>> {

    @Override
    public double compute(Set<E> s1, Set<E> s2){
        // compute some stuff
    return unionSize == 0 ? 1 : intersectionSize / (double)unionSize;
    }
} 
```

我在课堂上这样称呼它：

```
public MyClass {
    private JaccardSimilarity<String> sim = new JaccardSimilarity<String>();

    public void calc() {
    Set<String> s1 = new HashSet<>();
    s1.add("hallo welt");
    Set<String> s2 = new HashSet<>();
    s2.add("hallo welt");
            // the line below throws the error..
    double result = sim.compute(s1, s2);
    } 
```

在我对 Java 泛型的谦虚理解中，这是完全有效的代码......

这怎么可能？

编辑 - 附加代码：

```
public interface SimilarityMeasure<Q, R> extends RelevanceFunction<Q, R> {} 
```

和..

```
public interface RelevanceFunction<Q, R> {
    public double compute(Q v1, R v2);
} 
```

编辑2：这里是进口：

```
import java.io.File;
import java.io.IOException;
import java.util.HashSet;
import java.util.Iterator;
import java.util.List;
import java.util.Set;

import org.codehaus.jackson.JsonNode;
import org.codehaus.jackson.map.ObjectMapper;

import <redacted>.JaccardSimilarity; 
```

编辑3：这是错误：

```
import <redacted>.representation.Set; 
```

微妙的...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T17:42:22.367

您可能正在导入不同的类。要么`Set`要么`String`。

仔细检查您的进口！

还可以考虑`Set<? extends E>`在您的实现中使用。如果满足其他要求，则`E`只需是您使用的实际类型的超类型。

# javascript - 我的 FancyBox 无法运行...使用带有图像映射的单个图像

> ID：14567801
> 
> 赞同：0
> 
> 时间：2013-01-28T17:34:48.507
> 
> 标签：javascript, fancybox

我正在尝试在图像上使用 FancyBox，分为 4 个图像映射。我找到了这篇文章：[Using Fancybox with Image map](https://stackoverflow.com/questions/5530871/using-fancybox-with-image-map)，并复制了使用的资源和 js，但我的似乎不想运行...？请帮忙！

HTML：

```
<img src="http://www.acquafibrausa.com/images/caps_top.png" usemap="#Map">
    <map name="Map" id="Map">
       <area shape="rect" coords="43,91,177,141" href="http://www.acquafibrausa.com/images/nutrition_lime.png"
class="fancybox" alt="Click to view Lime nutrition facts" rel="image" />
       <area shape="rect" coords="264,92,399,142" href="http://www.acquafibrausa.com/images/nutrition_orange.png"
class="fancybox" alt="Click to view Orange nutrition facts" rel="image"
/>
       <area shape="rect" coords="488,92,622,143" href="http://www.acquafibrausa.com/images/nutrition_strawberry.png"
class="fancybox" alt="Click to view Strawberry nutrition facts" rel="image"
/>
       <area shape="rect" coords="711,90,846,142" href="http://www.acquafibrausa.com/images/nutrition_peach.png"
class="fancybox" alt="Click to view Peach nutrition facts" rel="image"
/>
    </map> 
```

JQUERY/头部内容：

```
<link href="main_style.css" rel="stylesheet" type="text/css">
<link href="/fancybox/jquery.fancybox-1.3.4.css" rel="stylesheet" type="text/css" media="screen" />

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
<script type="text/javascript" src="./fancybox/jquery-1.4.3.min.js"></script>
<script type="text/javascript" src="./fancybox/jquery.fancybox-1.3.4.pack.js"></script>

<script type="text/javascript">
   $('map > area.fancybox').click(function(e) {
   e.preventDefault();
   var url = $(this).attr('href');
   var title = $(this).attr('title');
   var type = $(this).attr('rel');
   $.fancybox({
      'title': title,
      'titlePosition': 'inside',
      'href' : url,
      'type' : type
   });
});
</script> 
```

[看这里。](http://jsfiddle.net/amandabeau/FvG8p/)

jsfiddle上有一个上面的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:59:53.923

你还没有包括 jQuery。要在您的 Fiddle 中执行此操作，请查看[页面右侧的](https://docs.google.com/file/d/0B-aM3i7CypSVNXNtN3BCMURqeTg/edit)。要在您的真实页面上执行[此](http://jquery.com/download/)操作，最简单的方法是*使用带有 CDN 的 jQuery*。

它似乎只适用于 jQuery 1.8.3 及以下版本（我尝试了 jsFiddle 中可用的默认版本）。

而且你还没有关闭你的图片标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:18:36.280

如果您只想**从**图像映射中打开 fancybox（也在这里回答[https://stackoverflow.com/a/11418310/1055987](https://stackoverflow.com/a/11418310/1055987)），那么您只需要将`area`标签绑定到 fancybox，或者执行以下操作：

```
$("#Map area").fancybox(); 
```

...如果`area`标签没有任何类，或者：

```
$(".fancybox").fancybox(); 
```

...假设`area`标签有`class="fancybox"`.

见**[JSFIDDLE](http://jsfiddle.net/AA6mN/)** ....

关于您的[小提琴](http://jsfiddle.net/amandabeau/FvG8p/)，您使用此链接链接到 jQuery：http: [//ajax.googleapis.com/ajax/libs/jquery/1.3.4/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.3.4/jquery.min.js)但这会返回 404 错误。实际上，jQuery 的 v1.3.4 似乎从未存在过；) ...您可以查看[http://code.jquery.com/](http://code.jquery.com/)以了解以前版本的 jQuery。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-20T18:19:31.690

`http://`对我来说，使用完整 URL 路径（即以 开头）时不会加载脚本

尝试使用相对路径加载图像：`href="images/image.jpg"`

# delphi - 在构造函数中获取组件名称？

> ID：14567802
> 
> 赞同：6
> 
> 时间：2013-01-28T17:34:57.583
> 
> 标签：delphi, custom-component

我正在创建一个从 TCustomControl 派生的自定义控件，例如：

```
type
  TMyCustomControl = class(TCustomControl)
private
  FText: string;
  procedure SetText(const Value: string);
protected
  procedure Paint; override;
public
  constructor Create(AOwner: TComponent); override;
  destructor Destroy; override;
published
  property Text: string read FText write SetText;
end; 
```

请注意，为了保持示例的简短和简单，以上内容是不完整的。

无论如何，在我的控制中，我有一个 Paint 事件，它`FText`使用 Canvas.TextOut 显示文本（来自字段）。

当我的组件被添加到 Delphi 表单设计器时（在用户可以对组件进行任何更改之前），我希望 TextOut 显示组件的名称 - TButton、TCheckBox、TPanel 等是带有标题属性的示例。

如果我尝试在构造函数中将组件的名称分配给 FText，它会返回空，例如`''`；

```
constructor TMyCustomControl.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  FText  := Name; //< empty string
  ShowMessage(Name); //< empty message box too
end; 
```

如果我更改`FText := Name`它`FText := 'Name';`确实将文本输出到我的组件，所以我知道这在实际代码中不是问题，但显然这输出“名称”而不是实际的组件名称，如 MyCustomControl1、MyCustomControl2 等。

所以我的问题是，如何从它的构造函数事件中获取组件的名称？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T17:46:54.353

构造函数运行时，该`Name`属性尚未分配。`Name`在设计时，IDE 会在组件被拖放到设计器上之后，在控件的构造函数退出之后为属性分配一个值。在运行时，该`Name`属性由 DFM 流系统设置，它也在构造函数退出后调用。

无论哪种方式，`TControl.SetName()`属性设置器都会验证新值，然后将新值设置为控件的`Text`属性，以匹配当前`Text`值与旧`Name`值匹配并且控件的`ControlStyle`属性包含`csSetCaption`标志（默认情况下）。当`Text`属性因任何原因发生更改时，控件会自动向自身发送`CM_TEXTCHANGED`通知。您可以让您的控件捕获该消息并调用`Invalidate()`自身以触发新的重绘。在您的`Paint()`处理程序内部，只需按原样绘制当前`Name`值，无论它碰巧是什么值。如果它是空白的，那就这样吧。不要强求`Name`，让VCL正常为你处理。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T17:40:10.483

我相信处理这个问题的正确方法是使用继承的`Text`或`Caption`属性`TCustomControl`，并确保`csSetCaption` `ControlStyle`设置了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:15:04.673

要应用名称，您可以覆盖`TComponent.Loaded`方法。

但我认为您不应该将名称复制到文本。这些是语义上独立的属性，向它们添加意想不到的绑定有一天会伤害你。

而是 WMPaint 方法应该检查 Text 是否为空，然后渲染 Name，但是 Text 的属性不应该改变。

```
procedure TMyComponent.WMPaint; message WM_Paint; var InternalCaption: string;
begin
....
   InternalCaption := Self.Text;
   If InternalCaption = '' then InternalCaption := Self.Name;
   If InternalCaption = '' then InternalCaption := Self.ClassName;
....
   Self.Canvas.OutText(InternalCaption); 
```

`Name := 'AAA'; Name := 'BBB';`如果有的话 - 您应该将属性分开，只是出于不应该使文本和名称不同步的简单原因。并且使用您的方法，第一个语句将解决文本，第二个语句将使旧名称在实际名称更改后仍然显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-28T10:32:41.307

一个简单的方法是覆盖方法 SetName：

```
TMyCaptionString = type of WideString;

TMyLabel = class(TCustomControl)
private
  FCaption: TMyCaptionString;
  FCaptionAsName: Boolean;
  procedure SetCaption(Value: TMyCaptionString);
protected
  procedure SetName(const NewName: TComponentName); override;
public
  constructor Create(AOwner: TComponent); override;
  property Caption: TMyCaptionString read FCaption write SetCaption;
end;

implementation

constructor TMyLabel.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  ControlStyle := ControlStyle + [csOpaque, csReplicatable,csSetCaption];
  FCaptionAsName := (csDesigning in ComponentState) and not (csReadingState in ControlState);
  ...
end;

procedure TMyLabel.SetName(const NewName: TComponentName);
begin
  if FCaptionAsName then
  begin
    FCaptionAsName := FCaption = Name;
    FCaption := NewName;
    invalidate;
  end;
  inherited SetName(NewName);
end;

procedure TMyLabel.SetCaption(Value: TMyCaptionString);
begin
  if FCaption <> Value then
  begin
    FCaption := Value;
    Invalidate;
    FCaptionAsName := False;
  end;
end; 
```

我需要自己的 Caption poreprty 变量，因为我想使用宽字符串而不是 unicode 并编写自定义属性编辑器。抱歉，我写的是旧主题，但我希望这会有所帮助。

# tomcat - 在 Windows 2008 中从 ANT 启动 Tomcat 7.0.x 的问题

> ID：14567804
> 
> 赞同：0
> 
> 时间：2013-01-28T17:35:03.803
> 
> 标签：tomcat, ant

我在尝试从 Windows 2008 R2 中的 ANT 启动 Tomcat 7.0.x 服务器时遇到问题。

这是我正在使用的代码：

```
<exec executable="cmd.exe" spawn="true">
  <env key="CATALINA_HOME" value="${tomcat.home}" />
  <arg line="/C '${tomcat.home}/bin/startup.bat'"/>
</exec> 
```

问题是，虽然我在调用 cmd.exe 时使用 spawn 设置为 true 和 /C 参数，但我的构建被挂起并且在我停止 Tomcat 之前永远不会完成。

你知道原因吗？我在 stackoverflow 中看到了很多帖子，其中包含理论上可以正常工作的类似代码。其他帖子使用 bash 而不是 cmd，但据我所知，bash 仅在 Unix 世界中。

有什么帮助吗？

非常感谢，

化学。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:39:26.883

这是我们一直在使用的我的 ant 脚本的一部分……永远。它每天都在开发中使用，我们也在生产中使用它来启动和停止 Tomcat（不过，所有都在 *NIX 上......我们有一些开发人员出于某种原因必须在 Microsoft Windows 上运行，这似乎不是向他们提出任何问题）。

据我所知，悬挂没有问题。

```
<exec osfamily="unix" executable="${app.tomcat-home}/bin/catalina.sh">
  <env key="JAVA_HOME" value="${app.java-home}" />
  <env key="JAVA_OPTS" value="${effective.JAVA_OPTS}" />
  <env key="CATALINA_BASE" value="${app.home.dir}" />
  <env key="CATALINA_OPTS" value="${effective.CATALINA_OPTS}" />

  <arg value="start" />
  <arg value="${security-option}" />
</exec>

<!-- Separate script for win32 -->
<exec osfamily="winnt" executable="${app.tomcat-home}/bin/catalina.bat">
  <env key="JAVA_HOME" value="${app.java-home}" />
  <env key="JAVA_OPTS" value="${effective.JAVA_OPTS}" />
  <env key="CATALINA_HOME" value="${app.tomcat-home}" />
  <env key="CATALINA_BASE" value="${app.home.dir}" />
  <env key="CATALINA_OPTS" value="${effective.CATALINA_OPTS}" />

  <arg value="start" />
  <arg value="${security-option}" />
</exec> 
```

所有属性的定义留给读者作为练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:14:02.387

不太确定Windows，但基于这个讨论（[http://mail-archives.apache.org/mod_mbox/ant-user/200108.mbox/%3C2D90C2075E27D4118960000629A832E503751900@scooby.corp.bspark.com%3E](http://mail-archives.apache.org/mod_mbox/ant-user/200108.mbox/%3C2D90C2075E27D4118960000629A832E503751900@scooby.corp.bspark.com%3E)）我会尝试：

```
<exec dir="${tomcat.home}/bin" executable="start">
    <arg line="startup.bat" />
    <env key="CATALINA_HOME" value="${tomcat.home}" />
</exec> 
```

# linux - 带有 IPC 队列的 epoll

> ID：14567806
> 
> 赞同：0
> 
> 时间：2013-01-28T17:35:10.160
> 
> 标签：linux, ipc, epoll

抱歉这个愚蠢的问题:)，我在两个线程之间使用 IPC 队列，所以如果队列中有足够的空间，我有一个线程发送，另一个线程正在检查无限循环是否有数据在队列中可用并接收它。

是否可以对这个队列使用 epoll 来检查双方是否有新数据可用？所以发送者检查 EPOLLOUT 并且接收者检查 EPOLLIN？

# jsp - 将现有对象传递给 JSP

> ID：14567807
> 
> 赞同：-1
> 
> 时间：2013-01-28T17:35:10.233
> 
> 标签：jsp, object, servlets

我有个问题。在我的应用程序中，我有一个用于身份验证的现有对象（在我的自定义身份验证提供程序类中）。该对象很重要，因为它包含有关连接的信息。身份验证后，此对象存在。现在我想将此对象传递给 JSP 页面。我不知道该怎么做。

我试图`doGet()`为这个类编写方法，在 JSP 上制作`request.setAttribute("object", object)`和获取这个对象`request.getAttribute("object")`，但它不起作用。我也试过用，`<jsp:useBean>`但还是不行。我没有任何其他解决方案。

你会帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:13:56.733

好的，所以我在连接到 ldap 服务器（ldapConnect 类）的自定义身份验证提供程序中有一个 retrieveUser 方法：

```
@Override
protected UserDetails retrieveUser(String username,
        UsernamePasswordAuthenticationToken authentication)
        throws AuthenticationException {

    log.entry("retrieveUser", authentication.getPrincipal());

    LdapUser userDetail = null;

    UsernamePasswordAuthenticationToken userToken = authentication;
    String userName = userToken.getName();
    userName = userName != null ? userName.toLowerCase() : userName;
    String password = userToken.getCredentials().toString();

    if (password == null || "".equals(password)) {
        log.debug("retrieveUser", "no password provided");
        throw new AuthenticationCredentialsNotFoundException(
                "Invalid login or password");
    }

    // try to connect with ldap and check retrieved username and
    // password
    LdapConnect ldapConnect = new LdapConnect();
    connect = ldapConnect.connection(userName, password);

    if (connect) {
        log.debug("retrieve user", "correct connection with ldap");
        userDetail = new LdapUser();
        setUserDetails(userDetail, ldapConnect.getCtx(), username);
        userDetail.setLdapConnect(ldapConnect);
    }

    if (userDetail == null) {
        throw new UsernameNotFoundException("User not found");
    }

    return userDetail;

} 
```

之后，我想访问现有的 LdapConnect 类（恰好访问此类的一个属性），并从 HttpServlet 类扩展我的 LdapConnect 类，并实现了 doGet 方法：

```
@Override
public void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    request.setAttribute("ctx", ctx);
    getServletContext().getRequestDispatcher("/ldap_saved.jsp").forward(
            request, response);
} 
```

最后，我尝试在我的 jsp 文件中从 LdapClass 获取 ctx 属性：

```
 <%DirContext ctx = (DirContext) request.getAttribute("ctx");%>
<%=ctx.toString();%> 
```

但通过这种方式，我没有得到现有的 ctx 对象。

# javascript - 带有 Javascript 的 VisualForce 页面集 URL 参数

> ID：14567808
> 
> 赞同：0
> 
> 时间：2013-01-28T17:35:21.297
> 
> 标签：javascript

我有一个自定义搜索 VisualForce 页面。我有一个用于搜索词的 inputText 区域，按回车后我不想将该值传递给 URL 参数。试图通过 JavaScript 来实现。

我希望 URL 是 apex/pageName?s=ValueEnteredInSearchBox

这就是我现在所拥有的，它不起作用。

```
<body id="bodyPortalCaseSearch">
    <apex:form id="frmPortalCaseSearch">
        <apex:pageBlock id="pbPortalCaseSearch">
            <div class="table">
                <div class="tableRow">
                    <div id="searchDiv" class="tableCell">
                        <apex:inputText id="searchinput" style="width:85%; height:25px;margin:0; padding: 0px 6px 0px;"
                        title="Portal_Search_Phrase" value="{!portalSearchModel.searchTerm}" onkeypress="insertSearchParam()"
                        />
                        <apex:commandLink id="goSearch" title="Search" style="text-decoration:none;"
                        rerender="asQuestions,asAnswers,asSolutions,asIdeas,asCases,asContent">Search</apex:commandLink>
                        <script type="text/javascript">
                            function insertSearchParam() {
                                var val = document.getElementById("{!$Component.searchinput}").value;
                                document.location.search = "?s=" + val;
                                searches();
                            }
                            document.getElementById("{!$Component.searchinput}").onkeypress = function (e) {
                                if (!e) e = window.event; // resolve event instance
                                if (e.keyCode == '13') {
                                    insertSearchParam();
                                    return false;
                                }
                            }
                        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:21:58.407

```
<apex:commandLink action="{!addParameter}" id="goSearch" title="Search" style="text-decoration:none;"rerender="asQuestions,asAnswers,asSolutions,asIdeas,asCases,asContent">Search</apex:commandLink>

 public Pagereference addParameter(){
            ApexPages.currentPage().getParameters().put('s',portalSearchModel.searchTerm);
            return null;
         } 
```

# javascript - 如何使用 D3.js 将图像添加到 svg 容器

> ID：14567809
> 
> 赞同：62
> 
> 时间：2013-01-28T17:35:22.310
> 
> 标签：javascript, asp.net-mvc-4, svg, d3.js

我创建了一个示例 Asp.Net MVC 4 应用程序，我在其中使用 D3.js 附加了一个 SVG 元素，然后在 SVG 内部附加了一个文本元素（参见下面的代码）。在我尝试使用本地 png 文件将 img 附加到 SVG 之前，这一切都很好。img 被附加到 DOM，但 img 不会呈现在页面上。任何想法我在这里做错了什么，以及如何解决它？

```
@{
    ViewBag.Title = "Home Page";
}

<script src="~/Scripts/d3.v3.js"></script>
<script type="text/javascript">
    var svg = d3.select("body")
        .append("svg")
        .attr("width", 200)
        .attr("height", 100)
        .style("border", "1px solid black");

    var text = svg.selectAll("text")
        .data([0])
        .enter()
        .append("text")
        .text("Testing")
        .attr("x", "40")
        .attr("y", "60");

    var imgs = svg.selectAll("img").data([0]);
    imgs.enter()
        .append("img")
        .attr("xlink:href", "@Url.Content("~/Content/images/icons/refresh.png")")
        .attr("x", "60")
        .attr("y", "60")
        .attr("width", "20")
        .attr("height", "20");

</script> 
```

@Richard Marr - 下面是尝试在直接 HTML 中做同样的事情，这给了我相同的结果。我不确定我的代码是否可以通过这种方式从本地驱动器获取 refresh.png 文件。

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <script src="http://d3js.org/d3.v2.js"></script>

    </head>
    <body>
        <script type="text/javascript">
            var svg = d3.select("body")
                .append("svg")
                .attr("width", 200)
                .attr("height", 100)
                .style("border", "1px solid black");

            var text = svg.selectAll("text")
                .data([0])
                .enter()
                .append("text")
                .text("Testing")
                .attr("x", "40")
                .attr("y", "60");

            var imgs = svg.selectAll("img").data([0]);
                imgs.enter()
                .append("svg:img")
                .attr("xlink:href", "file:///D:/d3js_projects/refresh.png")
                .attr("x", "60")
                .attr("y", "60")
                .attr("width", "20")
                .attr("height", "20");

        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-10-09T04:29:54.953

```
nodeEnter.append("svg:image")
.attr('x', -9)
.attr('y', -12)
.attr('width', 20)
.attr('height', 24)
.attr("xlink:href", "resources/images/check.png") 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-01-29T15:00:54.630

在 SVG（与 HTML 对比）中，您将希望使用`<image>`而不是`<img>`for 元素。

尝试使用以下命令更改您的最后一个块：

```
var imgs = svg.selectAll("image").data([0]);
            imgs.enter()
            .append("svg:image")
            ... 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-10-21T13:21:03.223

我的团队还想在 d3 绘制的圆圈内添加图像，并提出以下（[小提琴](https://jsfiddle.net/duhaime/q51ok9jc/)）：

索引.html：

```
<!doctype html>
<html>
<head>
  <link rel="stylesheet" type="text/css" href="timeline.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.js"></script>
  <script src="https://code.jquery.com/jquery-2.2.4.js"
    integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI="
    crossorigin="anonymous"></script>
  <script src="./timeline.js"></script>
</head>
  <body>
    <div class="timeline"></div>
  </body>
</html> 
```

时间线.css：

```
.axis path,
.axis line,
.tick line,
.line {
  fill: none;
  stroke: #000000;
  stroke-width: 1px;
} 
```

时间线.js：

```
// container target
var elem = ".timeline";

var props = {
  width: 1000,
  height: 600,
  class: "timeline-point",

  // margins
  marginTop: 100,
  marginRight: 40,
  marginBottom: 100,
  marginLeft: 60,

  // data inputs
  data: [
    {
      x: 10,
      y: 20,
      key: "a",
      image: "https://unsplash.it/300/300",
      id: "a"
    },
    {
      x: 20,
      y: 10,
      key: "a",
      image: "https://unsplash.it/300/300",
      id: "b"
    },
    {
      x: 60,
      y: 30,
      key: "a",
      image: "https://unsplash.it/300/300",
      id: "c"
    },
    {
      x: 40,
      y: 30,
      key: "a",
      image: "https://unsplash.it/300/300",
      id: "d"
    },
    {
      x: 50,
      y: 70,
      key: "a",
      image: "https://unsplash.it/300/300",
      id: "e"
    },
    {
      x: 30,
      y: 50,
      key: "a",
      image: "https://unsplash.it/300/300",
      id: "f"
    },
    {
      x: 50,
      y: 60,
      key: "a",
      image: "https://unsplash.it/300/300",
      id: "g"
    }
  ],

  // y label
  yLabel: "Y label",
  yLabelLength: 50,

  // axis ticks
  xTicks: 10,
  yTicks: 10

}

// component start
var Timeline = {};

/***
*
* Create the svg canvas on which the chart will be rendered
*
***/

Timeline.create = function(elem, props) {

  // build the chart foundation
  var svg = d3.select(elem).append('svg')
      .attr('width', props.width)
      .attr('height', props.height);

  var g = svg.append('g')
      .attr('class', 'point-container')
      .attr("transform",
              "translate(" + props.marginLeft + "," + props.marginTop + ")");

  var g = svg.append('g')
      .attr('class', 'line-container')
      .attr("transform", 
              "translate(" + props.marginLeft + "," + props.marginTop + ")");

  var xAxis = g.append('g')
    .attr("class", "x axis")
    .attr("transform", "translate(0," + (props.height - props.marginTop - props.marginBottom) + ")");

  var yAxis = g.append('g')
    .attr("class", "y axis");

  svg.append("text")
    .attr("class", "y label")
    .attr("text-anchor", "end")
    .attr("y", 1)
    .attr("x", 0 - ((props.height - props.yLabelLength)/2) )
    .attr("dy", ".75em")
    .attr("transform", "rotate(-90)")
    .text(props.yLabel);

  // add placeholders for the axes
  this.update(elem, props);
};

/***
*
* Update the svg scales and lines given new data
*
***/

Timeline.update = function(elem, props) {
  var self = this;
  var domain = self.getDomain(props);
  var scales = self.scales(elem, props, domain);

  self.drawPoints(elem, props, scales);
};

/***
*
* Use the range of values in the x,y attributes
* of the incoming data to identify the plot domain
*
***/

Timeline.getDomain = function(props) {
  var domain = {};
  domain.x = props.xDomain || d3.extent(props.data, function(d) { return d.x; });
  domain.y = props.yDomain || d3.extent(props.data, function(d) { return d.y; });
  return domain;
};

/***
*
* Compute the chart scales
*
***/

Timeline.scales = function(elem, props, domain) {

  if (!domain) {
    return null;
  }

  var width = props.width - props.marginRight - props.marginLeft;
  var height = props.height - props.marginTop - props.marginBottom;

  var x = d3.scale.linear()
    .range([0, width])
    .domain(domain.x);

  var y = d3.scale.linear()
    .range([height, 0])
    .domain(domain.y);

  return {x: x, y: y};
};

/***
*
* Create the chart axes
*
***/

Timeline.axes = function(props, scales) {

  var xAxis = d3.svg.axis()
    .scale(scales.x)
    .orient("bottom")
    .ticks(props.xTicks)
    .tickFormat(d3.format("d"));

  var yAxis = d3.svg.axis()
    .scale(scales.y)
    .orient("left")
    .ticks(props.yTicks);

  return {
    xAxis: xAxis,
    yAxis: yAxis
  }
};

/***
*
* Use the general update pattern to draw the points
*
***/

Timeline.drawPoints = function(elem, props, scales, prevScales, dispatcher) {
  var g = d3.select(elem).selectAll('.point-container');
  var color = d3.scale.category10();

  // add images
  var image = g.selectAll('.image')
    .data(props.data)

  image.enter()
    .append("pattern")
    .attr("id", function(d) {return d.id})
    .attr("class", "svg-image")
    .attr("x", "0")
    .attr("y", "0")
    .attr("height", "70px")
    .attr("width", "70px")
    .append("image")
      .attr("x", "0")
      .attr("y", "0")
      .attr("height", "70px")
      .attr("width", "70px")
      .attr("xlink:href", function(d) {return d.image})

  var point = g.selectAll('.point')
    .data(props.data);

  // enter
  point.enter()
    .append("circle")
      .attr("class", "point")
      .on('mouseover', function(d) {
        d3.select(elem).selectAll(".point").classed("active", false);
        d3.select(this).classed("active", true);
        if (props.onMouseover) {
          props.onMouseover(d)
        };
      })
      .on('mouseout', function(d) {
        if (props.onMouseout) {
          props.onMouseout(d)
        };
      })

  // enter and update
  point.transition()
    .duration(1000)
    .attr("cx", function(d) {
      return scales.x(d.x); 
    })
    .attr("cy", function(d) { 
      return scales.y(d.y); 
    })
    .attr("r", 30)
    .style("stroke", function(d) {
      if (props.pointStroke) {
        return d.color = props.pointStroke;
      } else {
        return d.color = color(d.key);
      }
    })
    .style("fill", function(d) {
      if (d.image) {
        return ("url(#" + d.id + ")");
      }

      if (props.pointFill) {
        return d.color = props.pointFill;
      } else {
        return d.color = color(d.key);
      }
    });

  // exit
  point.exit()
    .remove();

  // update the axes
  var axes = this.axes(props, scales);
  d3.select(elem).selectAll('g.x.axis')
    .transition()
    .duration(1000)
    .call(axes.xAxis);

  d3.select(elem).selectAll('g.y.axis')
    .transition()
    .duration(1000)
    .call(axes.yAxis);
};

$(document).ready(function() {
  Timeline.create(elem, props);
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-03T03:31:43.783

我不知道为什么，但是图像不应该被复制、三倍等......应该删除前一个并再次加载它，但使用另一个旋转数据。这是我的代码：

data.csv [在此处输入图像描述](https://i.stack.imgur.com/15vb8.png)

```
d3.csv("data/data.csv").then(function(data){
//console.log(data);
// Clean data
formattedData = data.map(function(id){
id.rot_1 = +id.rot_1;
        id.trans_1 = +id.trans_1;
        return id;
});
// First run of the visualization
update(formattedData[0]);})

$("#play-button")
.on("click", function(){
    var button = $(this);
    if (button.text() == "Play"){
        button.text("Pause");
        interval = setInterval(step, 1000);            
    }
    else {
        button.text("Play");
        clearInterval(interval);
    }})

function step(){
// At the end of our data, loop back
time = (time < 76) ? time+1 : 0
update(formattedData[time]); }

function update(data) {
// Standard transition time for the visualization
var t = d3.transition()
    .duration(1000);

//console.log(d3.selectAll(data));    
//console.log(data)

// original
var imgs1 = g.append("image") // en vez de g es svg
.attr("xlink:href", "img/picturetest.png");

// EXIT old elements not present in new data.
imgs1.exit()
    .attr("class", "exit")
    .selectAll("svg:image")
    .remove();

//console.log(data)

// ENTER new elements present in new data.
imgs1.enter()
    .append("svg:image") // svg:image
    //.attr("xlink:href", "img/picturetest.png")
    .attr("class", "enter")
    .merge(imgs1)
    .transition(t)
        .attr("x", 0) // 150
        .attr("y", 0) // 80
        .attr("width", 200)
        .attr("height", 200)
        .attr("transform", "rotate("+data.rot_1+") translate("+data.trans_1+")" ); }` 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2015-02-09T23:24:24.503

```
 var svg = d3.select("body")
        .append("svg")
        .style("width", 200)
        .style("height", 100) 
```

# c# - 要解密的数据长度无效

> ID：14567813
> 
> 赞同：0
> 
> 时间：2013-01-28T17:35:29.543
> 
> 标签：c#, encryption

我正在尝试解密字节数组，但出现此错误：

> *要解密的数据长度无效。*

此时出现错误：

```
int decryptedByteCount = cryptoStream
                        .Read(plainTextBytes, 0, plainTextBytes.Length); 
```

这是完整的代码

```
public static byte[] Decrypt(byte[] encryptedBytes, string key) {
    string initVector = "@1B2c3D4e5F6g7H8";
    string saltValue = "s@1tValue";
    string passPhrase = key;//"s@1tValue";
    string hashAlgorithm = "SHA1";
    int passwordIterations = 2;
    int keySize = 128;

    // Convert strings defining encryption key characteristics into byte
    // arrays. Let us assume that strings only contain ASCII codes.
    // If strings include Unicode characters, use Unicode, UTF7, or UTF8
    // encoding.
    byte[] initVectorBytes = Encoding.ASCII.GetBytes(initVector);
    byte[] saltValueBytes = Encoding.ASCII.GetBytes(saltValue);

    // Convert our ciphertext into a byte array.
    byte[] cipherTextBytes = encryptedBytes;

    // First, we must create a password, from which the key will be 
    // derived. This password will be generated from the specified 
    // passphrase and salt value. The password will be created using
    // the specified hash algorithm. Password creation can be done in
    // several iterations.
    PasswordDeriveBytes password = new PasswordDeriveBytes(passPhrase, saltValueBytes, hashAlgorithm, passwordIterations);

    // Use the password to generate pseudo-random bytes for the encryption
    // key. Specify the size of the key in bytes (instead of bits).
    byte[] keyBytes = password.GetBytes(keySize / 8);

    // Create uninitialized Rijndael encryption object.
    TripleDESCryptoServiceProvider symmetricKey = new TripleDESCryptoServiceProvider();

    // It is reasonable to set encryption mode to Cipher Block Chaining
    // (CBC). Use default options for other symmetric key parameters.
    symmetricKey.Mode = CipherMode.CBC;

    // Generate decryptor from the existing key bytes and initialization 
    // vector. Key size will be defined based on the number of the key 
    // bytes.
    ICryptoTransform decryptor = symmetricKey.CreateDecryptor(keyBytes, initVectorBytes);

    // Define memory stream which will be used to hold encrypted data.
    MemoryStream memoryStream = new MemoryStream(cipherTextBytes);

    // Define cryptographic stream (always use Read mode for encryption).
    CryptoStream cryptoStream = new CryptoStream(memoryStream, decryptor, CryptoStreamMode.Read);

    // Since at this point we don't know what the size of decrypted data
    // will be, allocate the buffer long enough to hold ciphertext;
    // plaintext is never longer than ciphertext.
    byte[] plainTextBytes = new byte[cipherTextBytes.Length];

    // Start decrypting.
    int decryptedByteCount = cryptoStream.Read(plainTextBytes, 0, plainTextBytes.Length);

    // Close both streams.
    memoryStream.Close();
    cryptoStream.Close();

    // Convert decrypted data into a string. 
    // Let us assume that the original plaintext string was UTF8-encoded.
    string plainText = Encoding.UTF8.GetString(plainTextBytes, 0, decryptedByteCount);

    // Return decrypted string.   
    //return plainText;
    return plainTextBytes;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:28:40.753

错误在这里，

```
 MemoryStream fileStreamIn = new MemoryStream(buffer);
        ZipInputStream zipInStream = new ZipInputStream(fileStreamIn);
        ZipEntry entry = zipInStream.GetNextEntry();
        MemoryStream fileStreamOut = new MemoryStream();
        int size;
        byte[] bufferOut = new byte[buffer.Length];
        do {
            size = zipInStream.Read(bufferOut, 0, bufferOut.Length);
            fileStreamOut.Write(bufferOut, 0, size);
        } while (size > 0);
        zipInStream.Close();
        fileStreamOut.Close();
        fileStreamIn.Close();
        return bufferOut; 
```

这是解压缩方法，缓冲区的大小大于应有的大小

# bash - 无法将 bash 命令嵌入到厨师食谱中

> ID：14567817
> 
> 赞同：3
> 
> 时间：2013-01-28T17:35:54.603
> 
> 标签：bash, chef-infra

我正在尝试将一个 shell 命令嵌入到我的 Chef 食谱中，但是当 Chef 执行该命令时，它似乎出错了。这是有问题的资源：

```
script "create libs symlink" do
  interpreter "bash"
  user "root"
  cwd "/home/robin/test"
  code <<-EOH
ln -s $(ls -1 | grep '^[0-9.-]\+$') curr-version-libs
  EOH
end 
```

该`/home/robin/test`目录包含一个名为 19.26-3 的文件夹，所以我期待一个名为`curr-version-libs`指向`19.26-3`.

相反，我最终得到了一个循环符号链接：

```
drwxr-xr-x 4 root root  4096 Jan 17 22:35 19.26-3
drwxr-xr-x 2 root root  4096 Jan 17 22:35 config
lrwxrwxrwx 1 root root    17 Jan 28 17:31 curr-version-libs -> curr-version-libs 
```

似乎 $(ls -1 | grep '^[0-9.-]+$') 正在被删除，我最终得到了 command `ln -s curr-version-libs`。

有谁知道这里发生了什么？我试过使用`execute`资源，但我得到了相同的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T18:56:16.260

如果你的**19.26-3**目录在 chef run 开始之前就已经存在，那么很容易。如果您正在创建符号链接，我建议您使用**链接**资源。

```
version = `ls /home/robin/test/ -1 | grep '^[0-9.-]+$'`.strip

link "/home/robin/test/curr-version-libs" do
  to ::File.join( "/home/robin/test", version )
end 
```

但如果它不存在，我建议使用 ruby​​_block 并动态定义链接资源。

```
ruby_block "create libs symlink" do
  block do
    version = `ls /home/robin/test/ -1 | grep '^[0-9.-]+$'`.strip
    res = Chef::Resource::Link.new( "/home/robin/test/curr-version-libs", run_context )
    res.to ::File.join( "/home/robin/test", version )
    res.run_action :create
  end
end 
```

**编辑：**我通过修复正则表达式并在分配给 Robin 建议的版本之前调用*strip来纠正答案。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T06:08:45.533

看来您正在调用 shell 以创建符号链接。在这种情况下，更好的方法是使用[Chef 链接资源](http://docs.opscode.com/resource_link.html)。我永远不会使用*脚本*或*执行*资源来做你正在做的事情。

使用链接资源，您将执行以下操作：

```
 link "/home/robin/test/curr-version-libs" do
    to '/home/robin/test/19.26-3'
    user 'root'
    group 'root'
    link_type :symbolic 
    action :create
  end 
```

简短的旁白：我已经指导和辅导了许多人来学习 Chef。那些开始了解资源、提供者和轻量级资源（又名 LWRP）所提供的东西的人比那些试图将旧的 shell 脚本放入他们的食谱中的人要快乐和有效得多。

我强烈建议阅读[资源和提供者](http://docs.opscode.com/chef/resources.html)以及[轻量级资源](http://docs.opscode.com/chef/lwrps.html)文档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T17:50:34.857

你试过转义美元符号吗？

```
ln -s \$(ls -1 | grep '^[0-9.-]\+$') curr-version-libs 
```

# javascript - 在 jQuery weekcalendar 插件中为事件设置不同的背景颜色

> ID：14567821
> 
> 赞同：1
> 
> 时间：2013-01-28T17:36:07.383
> 
> 标签：javascript, jquery, css, jquery-plugins

我正在使用[jQuery weekcalendar 插件](https://github.com/themouette/jquery-week-calendar)来显示带有约会的基于网络的日历。所有事件的颜色都在这个 CSS 部分中设置：

```
.wc-cal-event {
    background-color: #00BFFF;
    font-size: 0.8em;
    position: absolute;
    text-align: center;
    overflow: hidden;
    cursor: pointer;
    color: #000;
    width: 100%;
    border: 1px solid #000;
    font-weight: normal;
} 
```

我刚刚实现了日历中的新约会属于一个类别的功能（如在 Outlook 中）。基于这个类别，约会的背景颜色应该改变，假设它应该是红色。

如何动态更改事件的背景？当我更改`.wc-cal-event`时，每个事件的每个背景都会受到影响。

感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:36:11.663

可以在这个函数中完成：

```
eventRender : function(calEvent, $event) {
    $.ajax({
        url: url,
        dataType: 'json',
        async: false,
        success: function(data) {
            $.each(data, function(i, appointment) {
                $event.css('backgroundColor', appointment.htmlColor);
                $event.css('color', appointment.textColor);
            });
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:39:21.040

给每个事件它自己的类，例如`.wc-cal-event.meeting`并应用你的样式。

# javascript - JQuery 数据表单元格中的换行符

> ID：14567826
> 
> 赞同：2
> 
> 时间：2013-01-28T17:36:24.463
> 
> 标签：javascript, jquery, datatables

我正在通过 Ajax 和 JSON 填充数据表单元格。为了在单元格中的名称列表中获取换行符，我尝试了 \n 并转义了 \n (\\n)。都不工作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:38:40.050

我怀疑这是因为您的单元格是 HTML，所以 \n 不是有效的 HTML 标记，不会导致换行。在您的情况下，一个`<br/>`元素可能会导致链接中断，但是如果没有您的示例代码，很难知道。

# html - 如何制作拆分文本输入占位符？

> ID：14567828
> 
> 赞同：4
> 
> 时间：2013-01-28T17:36:33.960
> 
> 标签：html, css

我正在尝试做的事情可能最好在图像中解释（我将在下面包含），但本质上它是一个文本`input`HTML 字段，它是预先存在的值的一半，另一半是可替换的。我尝试同时添加 a`value`和 a`placeholder`字段，然后在 CSS 中将它们分开`padding-left`，但浏览器（Chrome）只是`placeholder`完全忽略了它们。

![示例图像](../Images/b9939f30caebe99013447971797344e1.png)

请注意字符串“turingpages.com/”和“用户名”之间的分隔。我想保持“turingpages.com/”不可编辑，并让“用户名”充当 HTML5 占位符。我怎样才能达到这种效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:48:34.533

只需将其设为两个元素并将其样式化，就好像它们是一个元素一样。

将它们并排放置（*或者更好地嵌套它们并制作外部 a`label`以便它可以与 click 一起使用*），并且`input`只为正确的元素制作 a 。

```
<label class="group">turingpages.com/<input type="text" placeholder="username"/></label> 
```

和

```
label.group{
    line-height:40px;
    background-color:white;
    display:inline-block;
    padding:0 10px;
    font-size:14px;
}
label.group input{
    border:0;
    background-color:transparent;
    padding:0;
    display:inline;
    color:#aaa;
} 
```

**演示在** [http://jsfiddle.net/gaby/ahTJv/](http://jsfiddle.net/gaby/ahTJv/)

# opengl - QGLWidget 中的 gl_lines 和 gl_clear

> ID：14567830
> 
> 赞同：0
> 
> 时间：2013-01-28T17:36:53.183
> 
> 标签：opengl, qglwidget

我在绘制 QGLWidget 时遇到问题。我在小部件上有几个四边形，当按下一些键时我可以四处移动。只要我只画四边形，一切正常，但现在我想添加一些线：

```
 glBegin(GL_LINE);
glColor3f(c[0], c[1], c[2]);
glVertex3f(v1.x, v1.y, v1.z);
glVertex3f(v2.x, v2.y, v2.z);
glEnd; 
```

绘图也可以正常工作，但清除 glwidget 不再起作用。意味着我看到了我曾经画过的一切。顺便提一下。我使用相同的初始化对 GLUT 进行了同样的尝试，并且它工作了，但是由于我已经切换到 Qt，它不再工作了。paintGL()、resizeGL() 和 initializeGL() 如下所示。

```
void GLWidget::paintGL() {
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glEnable(GL_DEPTH_TEST);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
gluLookAt(0.0f, 0.0f, 0.0f, 0.0f, -10.0f, -20.0f, 0.0f, 20.0f, -10.0f);

glTranslatef(0.0f, -30.0f, -40.0f);
glRotatef(-90.0f, 1.0f, 0.0f, 0.0f);
glRotatef(s_deg, 0.0f, 0.0f, 1.0f);
glRotatef(s_deg2, cos(DEGRAD(s_deg)), sin(DEGRAD(s_deg)), 0.0f);

float colors[8][3] = {
    0.5, 0.0, 0.0,
    0.0, 0.5, 0.0,
    0.0, 0.0, 0.5,
    1.0, 0.5, 0.5,
    0.5, 1.0, 0.5,
    0.5, 0.5, 1.0,
    0.9, 0.9, 0.9,
    0.1, 0.1, 0.1,

}; //red, green, blue, red shiny, green shiny, blue shine, light grey, dark grey

for(int i=0;i<glBoxes.size();i++) {
    glBoxes.at(i).setColor(colors[i]);
    glBoxes.at(i).drawCuboid();
    glBoxes.at(i).drawCuboidGrid();
} 
```

}

```
void GLWidget::initializeGL() {    
glDepthFunc(GL_LESS);
glClearColor(0.2, 0.2, 0.2, 0.2);
glClearDepth(1.0); 
```

}

```
void GLWidget::resizeGL(int width, int height) {    
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glViewport(0.0f, 0.0f, (float)width, (float)height);
glLoadIdentity();
gluPerspective(45.0f, (float)width/(float)height, 0.5f, 100.0f);
glMatrixMode(GL_MODELVIEW); 
```

}

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:03:51.233

glBegin 接受的令牌是

*   GL_POINTS
*   GL_LINES
*   GL_TRIANGLES
*   GL_TRIANGLE_FAN
*   GL_TRIANGLE_STRIP
*   GL_QUADS
*   GL_QUAD_STRIP

和

*   GL_POLYGON

您使用的令牌 GL_LINE （不是缺少的尾随*S*）对 glBegin 无效。

* * *

该语句`glEnd;`将评估函数 glEnd 的地址并默默地丢弃结果。有没有可能，你有 Pascal 或 Delphi 背景？在类似 C 的语言中，您必须添加一对匹配的括号才能使其成为函数调用。不带参数的函数用一对空括号调用。例如在你的情况下`glEnd();`。

* * *

与你的问题无关。中的所有代码都`resizeGL`应该放在`paintGL`（使用小部件`width()`和`height()`吸气剂）的头部。你所拥有的也`initializeGL`属于`paintGL`.

的正确用途`initializeGL`是进行一次性初始化，例如加载纹理和着色器，准备 FBO 等。

`resizeGL`旨在重新/初始化取决于窗口大小并且更改非常耗时的内容，例如渲染缓冲区和/或用作用于窗口大小后处理或类似的FBO中的附件的纹理。设置投影矩阵不属于那里，视口也不属于那里。那些进入`paintGL`.

glDepthFunc、glClearColor 和 glClearDepth 直接影响绘图过程，因此属于绘图代码。

此外，您根本不应该使用立即模式（glBegin ... glEnd）。自从 15 年前发布 OpenGL-1.1 以来，它就已经过时了。使用顶点数组，并可能添加缓冲区对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:39:51.907

`glEnd;`应该是`glEnd();`。这实际上可以解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T17:42:42.140

它必须`GL_LINES`代替`GL_LINE`. 接受的符号`glBegin`是复数（即GL_QUADS、GL_LINE_STRIPS...）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T17:44:56.897

`GL_LINE`不是 的有效令牌`glBegin`。要画线，你需要`GL_LINES`（这很微妙，而且你的公司很好——这是一个常见的错误）。

`GL_LINE`用于控制如何渲染多边形，由`glPolygonMode`函数控制。

# ruby - 在帕德里诺/西纳特拉需要图书馆的最合适的地方

> ID：14567832
> 
> 赞同：0
> 
> 时间：2013-01-28T17:37:05.070
> 
> 标签：ruby, sinatra, padrino

我在模型中使用“therubyracer”，并且我要求在模型的顶部是这样的：

```
require 'v8'
class Thing
  def self.ctx; @@ctx ||= V8::Context.new; end;

  def self.eval(script); ctx.eval(script); end;
end 
```

但是，我间歇性地得到：

```
NameError - uninitialized constant Thing::V8: 
/app/thing.rb:3:in `ctx' 
```

通过本地 Padrino 服务器测试请求时，显然是在我修改了 Thing 中的代码之后。这可以通过重新启动 padrino 服务器来纠正。我假设在其他地方需要 v8 可以解决这个问题，正确的地方在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:23:46.000

这看起来可能是由于 Padrino 重新加载器在重新加载`thing.rb`文件时感到困惑，导致 Ruby`V8`在`Thing`命名空间中查找。

尝试使用前缀显式指定`V8`is 在顶层：`::`

```
def self.ctx; @@ctx ||= ::V8::Context.new; end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:22:43.590

如果将其添加到 Gemfile 中，则可以将其放在任何位置。你加了吗？

谢谢！

# c# - 导入 CSV - 将文件读入一列 - 现在没有列分隔符

> ID：14567834
> 
> 赞同：0
> 
> 时间：2013-01-28T17:37:13.840
> 
> 标签：c#, ssis

我正在使用 SQL 2008r2 SSIS。在尝试处理可能具有不同列数的日志文件时，我决定将所有数据读入一列，然后解析该列。

我遇到的问题是我收到一个错误：

> *未找到列“列 0”的列分隔符。*

这让我相信它没有进入脚本组件来解析列。

有没有人有任何想法？

## 文件配置

*   标题行 - 最多 50 个字符的文本字段

*   详细信息行 - 最多 50 个字符的整数和文本字段

原始规格 - 64 列长

新规格 - 可以是 19 或 26 或 64 或未知

解析代码：

```
public override void Input0_ProcessInputRow(Input0Buffer Row)
{
    //Split Input string into string array
    string[] allValues = Row.Column1000.Split(',');

    int i = 0;

    //known Rows
    Row.Column0 = allValues[i++];
    Row.Column1 = allValues[i++];
    Row.Column2 = allValues[i++];
    Row.Column3 = allValues[i++];
    Row.Column4 = allValues[i++];
    Row.Column5 = allValues[i++];
    Row.Column6 = allValues[i++];
    Row.Column7 = allValues[i++];
    Row.Column8 = allValues[i++];
    Row.Column9 = allValues[i++];
    Row.Column10 = allValues[i++];

    //variable values - if column exists
    Row.Column11 = allValues.Length > i ? allValues[++i] : null;
    Row.Column12 = allValues.Length > i ? allValues[++i] : null;
    Row.Column13 = allValues.Length > i ? allValues[++i] : null;
    // etc
    Row.Column64 = allValues.Length > i ? allValues[++i] : null;
} 
```

# c# - 如何在内存中将 PNG 文件转换为 Gif？

> ID：14567836
> 
> 赞同：0
> 
> 时间：2013-01-28T17:37:19.330
> 
> 标签：c#

这是代码：

```
if (Form1.sf != null)
            {
                radarDI = new DirectoryInfo(Form1.sf);
                radarFiles = radarDI.GetFiles("*.png");
                for (int i = radarFiles.Length - 1; i >= 0; i--)
                {
                    radarImage = Image.FromFile(radarFiles[i].Name);
                    radarImage.Save(FileName, System.Drawing.Imaging.ImageFormat.Gif);
                    myGifListRadar.Add(radarFiles[i].Name);
                    if (myGifListRadar.Count == 5)
                    {
                        break;
                    }
                }
                radar_animation.MakeGIF(myGifListRadar, @"d:\RadarGifAnimatoion.gif", 8, true);
            } 
```

我想将所有 png 文件转换为 gif。因为我需要创建动画 gif 并且它只获取 gif 文件。所以现在我将 png 文件保存到硬盘进行转换，然后从硬盘读回 gif 文件：

```
radarImage.Save(FileName, System.Drawing.Imaging.ImageFormat.Gif); 
```

FileName 应该稍后在我保存的文件上，然后读回以使用它。问题是是否有任何方法可以将文件转换为 gif 而无需先将其保存到硬盘？一些更快的方法，然后将文件保存到硬盘转换，然后再次使用 FileInfo 将它们作为 gif 再次读取？

刚刚更新：

```
using (var ms = new MemoryStream())
            {
                if (Form1.sf != null)
                {
                    radarDI = new DirectoryInfo(Form1.sf);
                    radarFiles = radarDI.GetFiles("*.png");
                    for (int i = radarFiles.Length - 1; i >= 0; i--)
                    {
                        radarImage = Image.FromFile(radarFiles[i].FullName);
                        radarImage.Save(ms, System.Drawing.Imaging.ImageFormat.Gif);
                        myGifListRadar.Add(radarFiles[i].Name);
                        if (myGifListRadar.Count == 5)
                        {
                            break;
                        }
                    }
                }
                radar_animation.MakeGIF(myGifListRadar, @"d:\RadarGifAnimatoion.gif", 8, true);
            } 
```

但现在这部分：

```
radarImage.Save(ms, System.Drawing.Imaging.ImageFormat.Gif);
                            myGifListRadar.Add(radarFiles[i].Name); 
```

myGifListRadar 是列表我现在如何将radarImage 作为字符串文件名添加到列表中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T17:40:54.503

使用[`Image.Save(Stream, ImageFormat)`](http://msdn.microsoft.com/en-us/library/ms142147.aspx)：

```
using (var ms = new MemoryStream)
{
    radarImage.Save(ms, System.Drawing.Imaging.ImageFormat.Gif);
    // do something with ms
} 
```

根据您制作多帧 GIF 的方式，这可能是不必要的 - 您可以只取单独`Image`的 s 并直接制作多帧 GIF，而不是制作单独的 GIF 然后合并它们吗？

# ruby-on-rails - 未初始化的常量 Rack::Massive (NameError)

> ID：14567838
> 
> 赞同：2
> 
> 时间：2013-01-28T17:37:25.310
> 
> 标签：ruby-on-rails, ruby, rake

我正在尝试首先在我使用代码创建 helloworld.ru 的目录中创建一个 rake 基本应用程序

class HelloRack def call(env) ["200",{"Content-Type" => "text/plain"}, "Hello World"] end end run HelloRack.new

我用 rackup helloworld.ru 运行它，之后我用代码在同一目录中创建了三个文件 Massive.rb

```
module Rack
  class Massive
    def initialize(app)
      @app = app
    end

    def call(env)
      status, headers, response= @app.call(env)
      [status, headers, "<div style="font-size:5.0em">#{response} - it's all small stuff</div>"]
    end
  end
end 
```

其他文件名为 SmallStuff.rb

```
class SmallStuff
  def call(env)
    ["200", {"Content-Type" => "text/html"}, "Don't Sweat The Small Stuff"]
  end
end 
```

还有一个文件名为 config.ru 和代码

```
require 'rubygems'
require 'rack'

use Rack::Massive
run SmallStuff.new 
```

当我运行 rackup config.ru 它给了我错误

```
/home/ritesh/rails/config.ru:4: uninitialized constant Rack::Massive (NameError)
    from /var/lib/gems/1.8/gems/rack-1.4.4/lib/rack/builder.rb:51:in `instance_eval'
    from /var/lib/gems/1.8/gems/rack-1.4.4/lib/rack/builder.rb:51:in `initialize'
    from /home/ritesh/rails/config.ru:0:in `new'
    from /home/ritesh/rails/config.ru:0 
```

如何删除此错误我是 rake 应用程序的新手，任何人都可以提供 rake 应用程序教程或有用的链接！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:50:55.077

看起来您只是缺少一两个`require`s。首先将您的其他文件重命名为 mass.rb 和 small_stuff.rb（以遵循 Ruby 约定），然后像这样要求它们：

```
require 'rubygems'
require 'rack'

require_relative './massive'
require_relative './small_stuff'

use Rack::Massive
run SmallStuff.new 
```

# git - git clone 要求输入密码（多个用户）

> ID：14567841
> 
> 赞同：3
> 
> 时间：2013-01-28T17:37:34.557
> 
> 标签：git, ssh

我已经设置了一个有多个用户的 VM。我的主要用户是 VM-User，使用该帐户我创建了另一个名为“Joe”的用户。我已经通过登录到 VM-User 克隆了一个 git repo，一切正常。

我遇到的问题是，当我尝试通过登录用户“Joe”来克隆相同的存储库时，它要求我输入 git 服务器的密码。

```
git clone git@0.0.0.0:repo.git some_folder 
```

它的节目：

```
git@0.0.0.0's password: (asks me to type in a password) 
```

我为“Joe”创建了一个 ssh 密钥并将其添加到 gitosis。

有谁知道我做错了什么？

提前致谢 ：）

SSH 调试日志：

```
debug1: Authentications that can continue: publickey,password
debug1: Next authentication method: publickey
debug1: Offering RSA public key: email@example.com
debug1: Authentications that can continue: publickey,password
debug1: Trying private key: /home/joe/.ssh/id_rsa
debug1: Trying private key: /home/joe/.ssh/id_dsa
debug1: Trying private key: /home/joe/.ssh/id_ecdsa
debug1: Next authentication method: password 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:32:41.767

您没有在克隆机器上设置授权密钥，否则 SSH 将永远无法执行此步骤：

```
 debug1: Next authentication method: password 
```

我会检查我在 VM 和克隆机器上是否拥有正确的密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-21T20:15:34.093

我遇到过同样的问题。我只是按 Enter 响应，`Enter file in which to save the key (/c/Users/sposada/.ssh/id_rsa):`然后复制`id_rsa.pub`并更改了服务器中的名称。

git 正在尝试从中获取 ssh 公钥，`/home/joe/.ssh/id_rsa`但您有`/home/joe/.ssh/joe`

# hibernate - [错误] ORA-00918: 列定义不明确

> ID：14567846
> 
> 赞同：1
> 
> 时间：2013-01-28T17:37:56.680
> 
> 标签：hibernate, jakarta-ee, jpa, orm, createquery

有两个实体：

```
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
public class Person implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    ...
}

@Entity
public class Man extends Person {
    ...
} 
```

尝试执行以下方法：

```
@Test
public void clear(EntityManager em) {
    EntityTransaction tx = em.getTransaction();
    tx.begin();
    System.out.println(em
            .createQuery("delete from Man m where m.id > 14582647")
            .executeUpdate());
    tx.commit();
} 
```

得到错误：

```
[ERROR] ORA-00918: column ambiguously defined 
```

hibernate.show_sql 显示 sql 查询：

```
Hibernate: insert into HT_Man select man0_.id as id from Man man0_ inner join Person man0_1_ on man0_.id=man0_1_.id where id=14582647
Hibernate: delete from HT_Man 
```

错误发生在**id = 14582647**的地方，因为必须不止**id**，例如**man0_.id**。如何生成正确的 sql 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:01:16.637

在 Man 类上添加 @PrimaryKeyJoinColumn 注释：

```
@Entity
@PrimaryKeyJoinColumn(name = "<pk column name in Man table>")
public class Man extends Person {
    ...
} 
```

此外，您应该在 Person 中定义一个 Discriminator 列，在 Man 中定义 @DiscriminatorValue ，以便 Hibernate 可以确定要加入哪些表（当您介绍一个 Woman 表时）。

# sql - 如何根据特定的顺序选择每组的第一行？

> ID：14567847
> 
> 赞同：2
> 
> 时间：2013-01-28T17:37:57.533
> 
> 标签：sql, sql-server-2008, greatest-n-per-group

假设我有一个包含以下数据的表。

*   表名 [数据]。
*   PrimaryID：表的主 ID。
*   ParentID：表引用自身；这是对 PrimaryID 的 FK 约束。
*   DateTime：上次更新的时间。

    ```
    PrimaryID        ParentID          Date
        1            null      1/1/2013
        2               1      1/2/2013
        3               1      1/3/2013
        4            null      1/4/2013
        5               4      1/5/2013
        6            null      1/6/2013 
    ```

我想选择如下所示的结果：

```
PrimaryID        ParentID
        3               1
        5               4
        6               6 
```

对于每个“组”（定义为具有相同 ParentID 和该父级的所有条目），我想选择最近的行，并将 null ParentID（通常表示该行是父行）替换为该行自己的 PrimaryID。

我真的不知道从哪里开始生成这样的查询。

我有一个看起来像这样的内部选择：

```
(SELECT PrimaryID, ISNULL(ParentID, PrimaryID) as ParentID, Date FROM [Data]) 
```

这看起来是正确的开始方向，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:42:54.327

您可以使用`row_number()`：

```
select primaryid,
  coalesce(ParentID, PrimaryID) parentid
from
(
  select *,
    row_number() over(partition by coalesce(ParentID, PrimaryID)
                      order by date desc) rn
  from yourtable
) src
where rn = 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/540bd/5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T17:41:25.677

在@ypercube 的帮助下，这样的事情应该可以工作：

```
SELECT t.PrimaryId, coalesce(t.ParentId,t.PrimaryId) as parent
FROM YourTable t 
JOIN (
   SELECT coalesce(ParentId, PrimaryId) as parent, Max(DateField) as dtMax
   FROM YourTable
   GROUP BY coalesce(ParentId, PrimaryId)
) t2 ON coalesce(t.ParentId,t.PrimaryId) = parent AND t.DateField = t2.dtMax 
```

这是更新的[Fiddle](http://sqlfiddle.com/#!3/66e19/5)。

# php - MySQL - CodeIgniter 无法插入查询参数

> ID：14567850
> 
> 赞同：0
> 
> 时间：2013-01-28T17:38:09.797
> 
> 标签：php, mysql, codeigniter

好的，我正在运行一个查询，CodeIgniter 给了我这个错误：

> 错误号：1064
> 
> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的 '' 附近使用正确的语法
> 
> SELECT username FROMfriend_request JOIN user ON user_id =friend WHERE (friend = '8' AND sender =

我确实意识到，它没有捕捉到发件人，但是 $this->session->userdata('user_id') 回显为 4（这是我的 user_id）......那么它为什么没有显示出来呢？

```
$this->db->query('SELECT username
    FROM friend_request
    JOIN user ON user_id = friend
    WHERE (friend = ? AND sender = ?)
    OR (friend = ? AND sender = ?)', 
        $user->row()->user_id, 
        $this->session->userdata('user_id'), 
        $this->session->userdata('user_id'), 
        $user->row()->user_id);

if($this->db->num_rows() > 0) {
    $this->errors->set_error('You either have a pending request from '.ucfirst($this->db->row()->username).' 
        or you have already requested their friendship!');
    return false;
} 
```

我尝试将所有内容放在一条线上，因为我不知道输入是否会破坏任何内容，但它仍然没有解决任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:40:56.503

你会得到一个错误，因为你应该`num_rows`在查询结果上使用，而不是在数据库上。另外，您的查询绑定是错误的。

```
$query = $this->db->query(
  'SELECT username
  FROM friend_request
  JOIN user ON user_id = friend
  WHERE (friend = ? AND sender = ?)
  OR (friend = ? AND sender = ?)', 
  array(
    $user->row()->user_id, 
    $this->session->userdata('user_id'), 
    $this->session->userdata('user_id'), 
    $user->row()->user_id
  )
);

if ($query->num_rows() > 0) {
    $this->errors->set_error('You either have a pending request from '.ucfirst($this->db->row()->username).' 
        or you have already requested their friendship!');
    return false;
} 
```

# iphone - 带有角点检测的 GPUImage 覆盖实时视频

> ID：14567852
> 
> 赞同：0
> 
> 时间：2013-01-28T17:38:23.900
> 
> 标签：iphone, ios, gpuimage

尝试让基本过滤器与 GPUImage 一起使用，但不确定如何正确设置它以在检测角落时在实时视频源上显示十字准线。我尝试将十字准线与视频一起添加到混合过滤器中，然后将其添加到 gpuimageview 中，但我得到的只是一个白屏。有任何想法吗？

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    videoCamera = [[GPUImageVideoCamera alloc] initWithSessionPreset:AVCaptureSessionPreset640x480 cameraPosition:AVCaptureDevicePositionBack];
    videoCamera.outputImageOrientation = UIInterfaceOrientationPortrait;

    GPUImageView *filteredVideoView = (GPUImageView *)self.view;

    GPUImageCrosshairGenerator *crosshairGenerator = [[GPUImageCrosshairGenerator alloc] init];
    crosshairGenerator.crosshairWidth = 15.0;
    [crosshairGenerator forceProcessingAtSize:CGSizeMake(480.0, 640.0)];

    customFilter = [[GPUImageHarrisCornerDetectionFilter alloc] init];
    [customFilter setCornersDetectedBlock:^(GLfloat* cornerArray, NSUInteger cornersDetected, CMTime frameTime){
        [crosshairGenerator renderCrosshairsFromArray:cornerArray count:cornersDetected frameTime:frameTime];
        NSLog(@"corners: %u", cornersDetected);
    }];

    GPUImageAlphaBlendFilter *blendFilter = [[GPUImageAlphaBlendFilter alloc] init];
    [blendFilter forceProcessingAtSize:CGSizeMake(480.0, 640.0)];

    [videoCamera addTarget:blendFilter];
    [crosshairGenerator addTarget:blendFilter];
    [blendFilter addTarget:filteredVideoView];

    [videoCamera startCameraCapture];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-09T15:37:40.203

这就是你的代码在**Swift 2.0中的样子**

```
var liveCam:GPUImageVideoCamera!
var edgesDetector:GPUImageHarrisCornerDetectionFilter!
var crosshairGenerator:GPUImageCrosshairGenerator!
@IBOutlet weak var camView: GPUImageView!

override func viewDidLoad() {
    super.viewDidLoad()
    liveCam = GPUImageVideoCamera(sessionPreset: AVCaptureSessionPreset640x480, cameraPosition: .Back)
    liveCam.outputImageOrientation = .Portrait

    crosshairGenerator = GPUImageCrosshairGenerator()
    crosshairGenerator.crosshairWidth = 15
    crosshairGenerator.forceProcessingAtSize(CGSize(width: 480, height: 640))

    edgesDetector = GPUImageHarrisCornerDetectionFilter()
    edgesDetector.blurRadiusInPixels = 2 //Default value
    edgesDetector.threshold = 0.2 //Default value

    edgesDetector.cornersDetectedBlock = {(cornerArray:UnsafeMutablePointer<GLfloat>,cornersDetected:UInt,frameTime:CMTime) -> Void in
        self.crosshairGenerator.renderCrosshairsFromArray(cornerArray, count: cornersDetected, frameTime: frameTime)
        print("\(cornerArray) =-= \(cornersDetected) =-= \(frameTime)")

    }

    liveCam.addTarget(edgesDetector)
    edgesDetector.addTarget(crosshairGenerator)
    crosshairGenerator.addTarget(camView)

    liveCam.startCameraCapture()
} 
```

结果 ：

[![在此处输入图像描述](../Images/bb1bb7929415f33312c3edd315bdce85.png)](https://i.stack.imgur.com/3tg3t.png)

# mongodb - 使用 Meteor.js 和 MongoDB 进行全文搜索

> ID：14567856
> 
> 赞同：8
> 
> 时间：2013-01-28T17:38:35.880
> 
> 标签：mongodb, meteor

我正在试验 Meteor.js 并寻找可以在 Meteor/MongoDB 服务器上运行的全文搜索引擎。看来 Meteor 还没有开发这个功能。

我想知道是否存在将全文搜索添加到 Meteor 应用程序的现有解决方案。

我唯一能找到的是[MongoLantern](http://sourceforge.net/projects/mongolantern/)，它有 node.js API。我应该如何将 MongoLantern 添加到我的 Meteor 应用程序中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T14:10:18.610

MongoDB 2.4 将在其中进行全文搜索。[指南可以在这里找到。](http://blog.mongohq.com/blog/2013/01/22/first-week-with-mongodb-2-dot-4-development-release/)

如果您准备运行开发版本，您[现在可以下载 MongoDB 2.3](http://www.mongodb.org/downloads) - 它包含文本搜索。

**更新：** MongoDB 2.4 已经发布。文本搜索被描述为 Beta。

文本搜索指南在[这里](http://docs.mongodb.org/manual/core/text-search/)，[`mongod`必须像这样运行](http://docs.mongodb.org/manual/tutorial/enable-text-search/)

```
mongod --setParameter textSearchEnabled=true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T08:27:13.753

看看[http://lunrjs.com/](http://lunrjs.com/)。这也可能有助于获得真实 Meteor 应用程序的近乎即时的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-04T05:09:18.190

你可能想看看：

[https://github.com/Crenshinibon/spomet](https://github.com/Crenshinibon/spomet)

这是一个提供全文搜索的 Meteor 原生包。它有一个易于包含自动完成功能的搜索框。

您可以在此处阅读有关扩展示例应用程序的教程：

[http://shiggyenterprises.wordpress.com/2013/09/28/developing-a-full-text-search-enabled-meteor-app/](http://shiggyenterprises.wordpress.com/2013/09/28/developing-a-full-text-search-enabled-meteor-app/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-10T04:23:57.197

还有另一种使用 Meteor 实现解决方案的方法。它是[搜索源](https://github.com/meteorhacks/search-source)。

这是一种**预输入**，但没有 UI 部分。它公开了一个反应式数据源，您可以在其中使用它来根据需要使用 Blaze 构建 UI。

*   这是一个演示应用程序：[https ://instant-search-demo.meteor.com/](https://instant-search-demo.meteor.com/)

上面的应用程序是一个即时搜索应用程序来搜索 Meteor 包。[本文](https://meteorhacks.com/implementing-an-instant-search-solution-with-meteor.html)记录了它如何使用搜索源构建

简而言之，这就是搜索源的工作方式：

### 在客户端，创建一个源

```
var options = {
  keepHistory: 1000 * 60 * 5,
  localSearch: true
};
var fields = ['packageName', 'description'];

PackageSearch = new SearchSource('packages', fields, options); 
```

### 然后在服务器中定义搜索源

```
SearchSource.defineSource('packages', function(searchText, options) {
  var options = {sort: {isoScore: -1}, limit: 20};

  if(searchText) {
    var regExp = buildRegExp(searchText);
    var selector = {packageName: regExp, description: regExp};
    return Packages.find(selector, options).fetch();
  } else {
    return Packages.find({}, options).fetch();
  }
});

function buildRegExp(searchText) {
  // this is dumb implementation
  var parts = searchText.trim().split(' ');
  return new RegExp("(" + parts.join('|') + ")", "ig");
} 
```

### 现在获取数据源并渲染它

```
Template.searchResult.helpers({
  getPackages: function() {
    return PackageSearch.getData({
      transform: function(matchText, regExp) {
        return matchText.replace(regExp, "<b>$&</b>")
      },
      sort: {isoScore: -1}
    });
  }
}); 
```

### 最后进行搜索

```
PackageSearch.search("the text to search"); 
```

[您可以从文档](https://github.com/meteorhacks/search-source)中了解有关上述各项的更多信息。

# struts2 - Struts2 Lifecycle of Action 对象

> ID：14567863
> 
> 赞同：4
> 
> 时间：2013-01-28T17:38:59.050
> 
> 标签：struts2

我是 Struts2 框架的新手，我真的没有太多时间阅读任何 Struts2 书籍。我只是从 YouTube 上学习的。无论如何，这是我的问题。

据说我的 struts.xml 如下：

```
<struts>
<package name="p1" namespace="/" extends="struts-default">
    <action name="login" class="org.tutorial.struts2.action.LoginAction">
        <result name="success"  type="redirect" >searchTutorialForm</result>
        <result name="error">/login.jsp</result>
    </action>
    <action name="searchTutorialForm">
        <result>/searchForm.jsp</result>
    </action>
</package>  
</struts> 
```

让我们谈谈包 p1。

如果 URL 是 [http://localhost:8080/Struts2/login]，则调用 org.tutorial.struts2.action.LoginAction 并在成功后重定向到调用 searchForm.jsp 的 searchTutorialForm 操作标记。

所以客户端看到的URL是[http://localhost:8080/Struts2/searchTutorialForm]（目的不是让客户端看到[http://localhost:8080/Struts2/searchForm.jsp]）

现在 LoginAction 中有一些成员变量正在使用标签显示在 searchForm.jsp 中。但是使用这种方法，它们不会显示，因为我认为对象 LoginAction 不再在 ValueStack 中（在重定向之后，我想？？）。

当然，如果我不使用上述方法，而是按照以下方法：

```
<struts>
<package name="p1" namespace="/" extends="struts-default">
    <action name="login" class="org.tutorial.struts2.action.LoginAction">
        <result name="success">/searchForm.jsp</result>
        <result name="error">/login.jsp</result>
    </action>
</package>  
</struts> 
```

然后 LoginAction 对象中的成员变量使用标签显示在 success.jsp 中（但随后用户会看到 URL [http://localhost:8080/Struts2/searchForm.jsp]）

基本上我的意图是让用户看不到任何特定的内部文件或调用像 .jsp 或 .action。

重要提示：动作标签 searchTutorialForm 中没有动作类 - 基本上是一个虚拟动作。

问题：
1\. 如何使用第一种方法在 LoginAction 对象中显示成员变量？
2、Value Stack中LoginAction对象的生命周期是什么？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T18:00:35.113

*   操作是根据请求创建的。
*   重定向会导致新的请求。
*   因此，先前操作中的对象不再可用。

问题：

1.  您将其放入会话中或将它们作为参数包含在重定向中。
2.  操作在请求结束时消失。

# vim - 如何在点命令后将光标返回到之前的位置？

> ID：14567868
> 
> 赞同：1
> 
> 时间：2013-01-28T17:39:18.067
> 
> 标签：vim

我曾经有一个宏，当我点击`.`（重复命令）时，它会将光标返回到之前的位置

这非常有用，因为我经常使用`.`。

基本上，我想做`.`的正是它现在所做的——但不改变光标位置。

我知道这是可能的，但我忘记了如何去做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T18:06:44.910

实现此目的的一种方法是使用标记：`nnoremap . ma.`a`

这是做什么的：

*   用`ma`
*   重复最后一次更改`.`
*   回到标记的位置``a`。

它将覆盖以前用 标记的任何位置`a`，但您可以`a`用任何您想要的字母替换。

# eclipse - 当 GWT Starter 应用程序部署在 Tomcat 上时，获取 ClassNotFound 异常调用 greetServlet

> ID：14567873
> 
> 赞同：0
> 
> 时间：2013-01-28T17:39:25.573
> 
> 标签：eclipse, gwt, tomcat, service, classnotfound

环境：Windows 7、Eclipse、GWT 2.5、Tomcat7、Java jre7

创建了一个 GWT Web 应用程序项目并让示例代码生成。该应用程序在 Eclipse 中以调试模式运行良好（无需任何代码更改）。GWT 在同一台机器上编译和部署在 Tomcat7 上。当发出 RPC 请求时，获取`ClassNotFoundException`服务实现`class GreetingServiceImpl`。来自 Tomcat7 的日志如下。

我是否需要添加生成的示例代码中缺少的一些设置？我在网上找不到任何答案。我有点受阻...请指教。

```
----------------
Jan 28, 2013 11:55:34 AM org.apache.catalina.core.ApplicationContext log
INFO: Marking servlet greetServlet as unavailable
Jan 28, 2013 11:55:34 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Allocate exception for servlet greetServlet
java.lang.ClassNotFoundException: com.test.sample.server.GreetingServiceImpl
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:527)
    at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:509)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:137)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1137)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:858)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
---------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:45:00.430

尝试解压缩 WAR 文件并搜索以确保包含 GreetingsServiceImpl 的 JAR 文件位于 /WEB-INF/lib 中，或者 GreetingsServiceImpl 类位于 /WEB-INF/classes 中。

如果不知道 GreetingsServiceImpl 是什么以及它是如何合并到您的构建中的，很难说要查看哪个文件夹。

# c# - 如何等到文件下载（或 URL 验证）？

> ID：14567875
> 
> 赞同：1
> 
> 时间：2013-01-28T17:39:28.390
> 
> 标签：c#, windows-phone-7, windows-phone, async-await

我有一个问题，我想等到`Main()`完成`Download()`。但是，文件下载/检查开始，同时其他行开始执行。

我怎样才能使用`await`或其他任何东西来等待`Main`？

```
 private void Main()
    {
       Download("http://webserver/file.xml");
       //Do something here ONLY if the file exists!!
    }

    //This method invokes the URL validation
    private void Download(downloadURL)
    {
       System.Uri targetUri = new System.Uri(downloadURL);
       HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(targetUri);
       request.BeginGetResponse(new AsyncCallback(WebRequestCallBack), request);
    }

    //In this method the URL is being checked for its validity
    void WebRequestCallBack(IAsyncResult result)
    {
        HttpWebRequest resultInfo = (HttpWebRequest)result.AsyncState;
        HttpWebResponse response;
        string statusCode;
        try
        {
            response = (HttpWebResponse)resultInfo.EndGetResponse(result);
            statusCode = response.StatusCode.ToString();
        }
        catch (WebException e)
        {
            statusCode = e.Message;
        }
        onCompletion(statusCode);
    }

    //This method does not help! I just added if it could be any useful
    private  void onCompletion(string status)
    {
        if (status == HttpStatusCode.OK.ToString())
            MessageBox.Show("file exists");  
        else
            MessageBox.Show("file does not exists");  
    } 
```

我需要的是，详细...

*   从给定的 URL 下载文件
*   下载前验证网址
*   **如果（已验证）则**
    *   继续下载并执行其他任务
*   **别的**
    *   失败并停止进程，不要下载！并给出 URL 已损坏（无法验证）的消息！

我正在**尝试执行“验证”部分，检查 URL 是否正确并等待响应**。我需要某种验证过程的状态才能继续。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:59:40.983

应该试试：

```
var task = Task.Factory.FromAsync<WebResponse>(request.BeginGetResponse,  
                                               request.EndGetResponse, null);
var response = task.Result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:48:06.097

您可以使用 ManualResetEventSlim 对象。实例化时将其初始化为 true。在 OnComplete 方法结束时，调用 ManualResetEventSlim 对象的 Reset 方法。在您的主应用程序中，您只需调用 ManualResetEventSlim 对象上的 WaitOne 方法。

# regex - 你能修复这个正则表达式吗？（德语字符问题）

> ID：14567880
> 
> 赞同：0
> 
> 时间：2013-01-28T17:39:42.670
> 
> 标签：regex, .htaccess

一个朋友有一个德语网站——所有的 url 都需要重定向到 main.php 进行处理——不幸的是，任何带有德语字符的网址都不会被重定向。

这是有问题的规则：

```
RewriteRule ^([a-zA-Z0-9\-\/ÀÁÅÃÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõöøùúûüýþÿ]+)$ /main.php?qs=$1 [L] 
```

任何人都可以看到一个明显的问题吗？

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:45:42.527

这是一个编码问题，不容易修复，因为 URL*应该*是 UTF-8 编码但不是必需的。

当您想要重定向所有 URL 并捕获路径时，为什么不使用这个简单得多的正则表达式呢？

```
RewriteRule ^(.+)$ /main.php?qs=$1 [L] 
```

# php - 如何测量 PHP 文档的下载速度和大小

> ID：14567883
> 
> 赞同：0
> 
> 时间：2013-01-28T17:39:46.197
> 
> 标签：php, time-measurement, ob-get-contents

**这是我的计划**：我的网页是一个简单的文件共享系统。我想为用户显示下载速度。这不是100％，但它相对较好。我想写下下载的时间......例如：你的下载速度是300kb / s，你可以在7秒内下载这个文件..

* * *

我有 2 个 PHP 文件。

阿尔法文件这样做：

```
ob_start();
require 'speedtest.php';
$sebesseg = ob_get_clean(); 
```

这很简单。我从 speedtest.php 中只得到一个数字我的问题是：我有一个变量：`(int)$size = 1`; 我想做他的：`$time_left = $size / $sebesseg`; `$sebesseg`指速度。以字节为单位的下载速度。但是我不能使用 settype 或`(int)$sebesseg`.. 或任何我已经知道的东西，因为它给我写了一个空变量.. :-( 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:44:47.737

`ob_get_clean()`将返回一个字符串。获取写入的字节数

```
$sebesseg = ob_get_clean();
$numberOfBytes = strlen($sebesseg); 
```

* * *

在阅读了您的最后一条评论后，我准备了一个简短的示例，如何使用 PHP 完成一个简单的下载速度测量脚本。下面的代码应该做你想做的事：

```
<?php
// get the start time as UNIX timestamp (in millis, as float)
$tstart = microtime(TRUE);

// start outout buffering
ob_start();

// display your page
include 'some-page.php';

// get the number of bytes in buffer
$bytesWritten = ob_get_length();

// flush the buffer
ob_end_flush();

// how long did the output take?
$time = microtime(TRUE) - $tstart;

// convert to bytes per second
$bytesPerSecond = $bytesWritten / $time;

// print the download speed
printf('<br/>You\'ve downloaded %s in %s seconds',
    humanReadable($bytesWritten), $time);
printf('<br/>Your download speed was: %s/s',
    humanReadable($bytesPerSecond));

/**
 * This function is from stackoverflow. I just changed the name
 *
 * http://stackoverflow.com/questions/2510434/php-format-bytes-to-kilobytes-megabytes-gigabytes
 */
function humanReadable($bytes, $precision = 2) { 
    $units = array('B', 'KB', 'MB', 'GB', 'TB'); 

    $bytes = max($bytes, 0); 
    $pow = floor(($bytes ? log($bytes) : 0) / log(1024)); 
    $pow = min($pow, count($units) - 1); 

    // Uncomment one of the following alternatives
    //$bytes /= pow(1024, $pow);
    $bytes /= (1 << (10 * $pow)); 

    return round($bytes, $precision) . ' ' . $units[$pow]; 
} 
```

请注意，实际下载速度只能在客户端测量。但是上面代码的结果应该差不多。

它也只会测量 HTML 页面本身的下载大小。图片。样式和 javascripts 将扩展页面加载的实际下载大小。但速度在大多数情况下应该与 HTML 文档相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-18T09:44:45.350

使用函数[stream_notification_callback()](https://www.php.net/manual/zh/function.stream-notification-callback.php)

例子：

```
function stream_notification_callback($notification_code, $severity, $message, $message_code, $bytes_transferred, $bytes_max) {

    switch($notification_code) {
        case STREAM_NOTIFY_RESOLVE:
        case STREAM_NOTIFY_AUTH_REQUIRED:
        case STREAM_NOTIFY_COMPLETED:
        case STREAM_NOTIFY_FAILURE:
        case STREAM_NOTIFY_AUTH_RESULT:
            var_dump($notification_code, $severity, $message, $message_code, $bytes_transferred, $bytes_max);
            /* Ignore */
            break;

        case STREAM_NOTIFY_REDIRECTED:
            echo "Being redirected to: ", $message;
            break;

        case STREAM_NOTIFY_CONNECT:
            echo "Connected...";
            break;

        case STREAM_NOTIFY_FILE_SIZE_IS:
            echo "Got the filesize: ", $bytes_max;
            break;

        case STREAM_NOTIFY_MIME_TYPE_IS:
            echo "Found the mime-type: ", $message;
            break;

        case STREAM_NOTIFY_PROGRESS:
            echo "Made some progress, downloaded ", $bytes_transferred, " so far";
            break;
    }
    echo "\n";
}

$ctx = stream_context_create();
stream_context_set_params($ctx, array("notification" => "stream_notification_callback"));

file_get_contents("http://php.net/contact", false, $ctx); 
```

# google-apps-script - 如何在开始使用电子表格之前请求信息，例如日期范围

> ID：14567889
> 
> 赞同：0
> 
> 时间：2013-01-28T17:40:04.650
> 
> 标签：google-apps-script

在开始使用我的电子表格之前我需要请求信息，这是一个日期范围，如果您不输入日期范围，则必须关闭电子表格。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:03:38.317

您可以实现一个`onOpen()`触发对话框打开的函数，只要用户没有输入您想要的日期范围，对话框就会保持打开状态。如果没有输入任何值，我认为您不能强制关闭电子表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:34:54.457

您可以使用 UiApp 在 UI 中执行此操作，只有在验证条件时才会显示指向电子表格的链接，否则它将拒绝请求。

**编辑：**这是一个让你开始的例子：

（必须定义条件，我评论了必须由您完成的部分......

```
 function doGet() {
  var app = UiApp.createApplication().setStyleAttribute('padding', '15').setStyleAttribute('background', 'beige').setWidth('300').setHeight('140');// adjust dimensions to your needs  

  var mygrid = app.createGrid(3, 2);
  mygrid.setWidget(0, 0, app.createLabel('StartDate:'));
  mygrid.setWidget(0, 1, app.createDateBox().setId('dateA'));
  mygrid.setWidget(1, 0, app.createLabel('EndDtate:'));
  mygrid.setWidget(1, 1, app.createDateBox().setId('dateB'));

  var mybutton = app.createButton('OK');
  mybutton.setId("mybutton");
  var mypanel = app.createVerticalPanel();
  mypanel.setId('mypanel');
  mypanel.add(mygrid);
  var label = app.createHTML('<BR>Your request has been approved, <BR><BR>thanks for submitting').setId('Label').setStyleAttribute('padding', '15').setVisible(false).setWidth('300').setHeight('120');// adjust dimensions to your needs  
  var anchor = app.createAnchor('Open the Spreadsheet', 'https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dDljeXhtY3lacUtxdllQbGNHREY0VUE#gid=0').setId('anchor').setVisible(false)
  mypanel.add(label).add(anchor)
  mypanel.add(mybutton);
  app.add(mypanel).add(label);

  var handler = app.createServerHandler('checkDates');
  handler.addCallbackElement(mypanel);
  mybutton.addClickHandler(handler);
   var Chandler = app.createClientHandler();
   Chandler.forTargets(mygrid,mybutton).setVisible(false)
   mybutton.addClickHandler(Chandler)     
  return app;
}

function checkDates(e) {
  var app = UiApp.getActiveApplication();
  var Label = app.getElementById('Label');
  var anchor = app.getElementById('anchor');
  Label.setVisible(true);// show the masking label with message
  var dateA = e.parameter.dateA;
  var dateB = e.parameter.dateB;
// write your condition...  
//  if(dateA)...&& dateB== ...
  anchor.setVisible(true);
  return app
// }else{
app.close
//return app}
} 
```

# coldfusion - CFWheels - 我应该在本地范围内确定我的 Wheels 操作吗？

> ID：14567892
> 
> 赞同：4
> 
> 时间：2013-01-28T17:40:12.387
> 
> 标签：coldfusion, railo, cfwheels, cfml

假设我有一个非常简单的控制器，如下所示：

```
<cfcomponent extends="Controller">
    <cffunction name="hello">
        <cfset time = Now()>
    </cffunction>
</cfcomponent> 
```

在直接的 ColdFusion / Railo 中，我将在此范围内对所有变量进行本地范围界定……但我看到的每个车轮示例都没有。

这可能会为我赢得*年度最愚蠢的问题奖*，但这是我在考虑的事情，因为似乎没有人证明他们的 Wheels 代码的范围是正确的？

我会这样写：

```
<cfcomponent extends="Controller">
    <cffunction name="hello">
        <cfset local.time = Now()>
    </cffunction>
</cfcomponent> 
```

我只是不确定 Wheels 是否无论如何都可以解决这个问题，这就是为什么我到处都能看到我在做什么......或者这只是一个糟糕的编程案例？

谢谢！米奇

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T17:45:22.807

**是的，你应该确定它的范围**。

在您的第一个示例中，在大多数情况下，您是（通过不确定范围）设置`variables.time`，它是组件实例的本地，而不是函数 - 如果它打算作为函数局部变量（即`local.time`）但在组件的变量范围内，并且该组件是共享/持久的，这可能会导致问题（尽管可能仅在重负载下才会显示自己）。

如果有意将变量放在变量范围内，则仍应明确范围（如`variables.time`），否则如果在启用了 localmode 设置的 Railo 服务器上使用它可能会导致问题。

**由于 cfWheels 设计决策**（请参阅评论中的链接），需要将变量放在变量范围内才能将变量传递给视图，即使它们在技术上可能是函数/视图的本地变量。（控制器实例为单个请求而存在，避免了这通常会带来的问题。）如上一段所述，localmode 设置（如下所述）意味着当您无法控制所有服务器时，仍然建议明确范围代码将被部署到。

### Railo 的本地模式设置

Railo (since v1) has had an admin setting called "localmode" which defines whether assigning an unscoped variable will go to the local scope, rather than the component's variables scope - making explicit var/local scoping not required (if you know your code will only be run on Railo servers with that setting enabled).

Since that setting is off by default, and ColdFusion does not have such a setting, cross-engine-compatible code should always scope such variable assignments to avoid this being an issue.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T17:59:31.907

It depends. If you want the variable to be shown in the view, scope it to variables. If you want the variable to be only in the controller, scope it to local.

# ruby-on-rails - 为什么要使用 Backbone JS 与 Rails 的集成

> ID：14567897
> 
> 赞同：2
> 
> 时间：2013-01-28T17:40:33.583
> 
> 标签：ruby-on-rails, backbone.js

我对 Rails 和骨干网比较陌生。我了解到有些人在他们的应用程序中集成了 Rails 和骨干网——但我不清楚人们是否这样做。

Rails 是一个优秀的 MVC 框架 - 使用 twitter Bootstrap 和 html 5 样板，可以很好地构建它。Backbone js 在 JS 端支持更多。因此，对于电子商务网站，它可能有助于在事件中显示图像或在用户向下滚动时显示更多元素。这是为什么？

有人可以为我提供一个示例应用程序或网站，或者提及为什么 rails + 骨干网有帮助吗？谢谢！

# eclipse - 更改工作区后 Eclipse 不会启动

> ID：14567898
> 
> 赞同：1
> 
> 时间：2013-01-28T17:40:48.000
> 
> 标签：eclipse

我搞砸了我的 Eclipse 安装。我更改了工作区位置（文件->切换工作区）。现在它不会启动。我看到了几秒钟的飞溅，然后它就关闭了。然后，我尝试在新旧工作区的命令行上使用 -data 参数，但行为相同。我也尝试重新启动机器。

在*eclipse\workspace.metadata.plugins\org.eclipse.core.runtime.settings\org.eclipse.ui.ide.prefs*中，我为 SHOW_WORKSPACE_SELECTION_DIALOG 添加了最后一行，但没有区别。

```
EXIT_PROMPT_ON_CLOSE_LAST_WINDOW=false
IMPORT_FILES_AND_FOLDERS_RELATIVE=true
IMPORT_FILES_AND_FOLDERS_TYPE=23,1
PROBLEMS_FILTERS_MIGRATE=true
SWITCH_PERSPECTIVE_ON_PROJECT_CREATION=always
TASKS_FILTERS_MIGRATE=true
eclipse.preferences.version=1
platformState=1346849854920
quickStart=false
tipsAndTricks=true
SHOW_WORKSPACE_SELECTION_DIALOG=true 
```

我该如何取回它？

（编辑）我删除了 .metadata 目录，然后 Eclipse 重新启动。

从日志文件中截取：

```
!SESSION 2013-01-28 10:35:51.245 -----------------------------------------------
eclipse.buildId=M20120914-1800
java.version=1.7.0_07
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.java.product
Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product org.eclipse.epp.package.java.product

!ENTRY org.eclipse.ui 4 4 2013-01-28 10:32:40.278
!MESSAGE Unhandled Exception

!ENTRY org.eclipse.ui 4 0 2013-01-28 10:32:40.278
!MESSAGE Error occurred during status handling
!STACK 0
java.lang.NullPointerException
    at org.eclipse.ui.internal.statushandlers.StatusHandlerRegistry.<init>(StatusHandlerRegistry.java:72)
...
!ENTRY org.eclipse.equinox.p2.ui.sdk.scheduler 4 0 2013-01-28 10:32:40.294
!MESSAGE Unable to execute early startup code for an extension
!STACK 1
org.eclipse.core.runtime.CoreException: Plug-in "org.eclipse.equinox.p2.ui.sdk.scheduler" was unable to instantiate class "org.eclipse.equinox.internal.p2.ui.sdk.scheduler.AutomaticUpdateScheduler".
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.throwException(RegistryStrategyOSGI.java:194)
...
!SUBENTRY 1 org.eclipse.equinox.registry 4 1 2013-01-28 10:32:40.294
!MESSAGE Plug-in "org.eclipse.equinox.p2.ui.sdk.scheduler" was unable to instantiate class "org.eclipse.equinox.internal.p2.ui.sdk.scheduler.AutomaticUpdateScheduler".
!STACK 0
java.lang.NullPointerException
    at org.eclipse.equinox.internal.p2.ui.sdk.scheduler.AutomaticUpdateScheduler.<init>(AutomaticUpdateScheduler.java:68)
...
!ENTRY org.eclipse.equinox.p2.ui.sdk.scheduler 4 0 2013-01-28 10:32:40.294
!MESSAGE Unable to execute early startup code for an extension
!STACK 1
org.eclipse.core.runtime.CoreException: Plug-in "org.eclipse.equinox.p2.ui.sdk.scheduler" was unable to instantiate class "org.eclipse.equinox.internal.p2.ui.sdk.scheduler.AutomaticUpdateScheduler".
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.throwException(RegistryStrategyOSGI.java:194)
...
!SUBENTRY 1 org.eclipse.equinox.registry 4 1 2013-01-28 10:32:40.294
!MESSAGE Plug-in "org.eclipse.equinox.p2.ui.sdk.scheduler" was unable to instantiate class "org.eclipse.equinox.internal.p2.ui.sdk.scheduler.AutomaticUpdateScheduler".
!STACK 0
java.lang.NullPointerException
    at org.eclipse.equinox.internal.p2.ui.sdk.scheduler.AutomaticUpdateScheduler.<init>(AutomaticUpdateScheduler.java:68)
...
!ENTRY org.eclipse.ui 4 0 2013-01-28 10:32:40.294
!MESSAGE Error occurred during status handling
!STACK 0
java.lang.NullPointerException
    at org.eclipse.ui.internal.statushandlers.StatusHandlerRegistry.<init>(StatusHandlerRegistry.java:72)
...
!ENTRY org.eclipse.core.jobs 2 2 2013-01-28 10:32:40.809
!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.epp.internal.mpc.ui.wizards.MarketplaceDropAdapter$1

!ENTRY org.eclipse.core.jobs 2 2 2013-01-28 10:32:40.809
!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.epp.internal.mpc.ui.wizards.MarketplaceDropAdapter$1

!ENTRY org.eclipse.ui 4 0 2013-01-28 10:32:40.809
!MESSAGE Error occurred during status handling
!STACK 0
java.lang.NullPointerException
    at org.eclipse.ui.internal.statushandlers.StatusHandlerRegistry.<init>(StatusHandlerRegistry.java:61)
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T17:45:29.430

`org.eclipse.ui.ide.prefs`在你的文件中找到

> eclipse\配置\.settings

文件夹。

改变

> SHOW_WORKSPACE_SELECTION_DIALOG=false

到`true`.

# css - 如何应对可变高度的内容？

> ID：14567904
> 
> 赞同：3
> 
> 时间：2013-01-28T17:41:12.410
> 
> 标签：css, twitter-bootstrap, responsive-design

在[此页面上](http://festivals.ie/)，有一个图像轮播（来自 Twitter Bootstrap），其中显示了一系列图像和标题。所有图像的高度相同，但包含轮播标题的元素的高度将根据标题文本的长度而有所不同。

当浏览器宽度较窄时（例如在移动设备上查看时），这会成为一个问题，因为随着窗口变窄，字幕高度之间的差异会变得更加明显。如果您将浏览器设置为大约 450 像素宽并在轮播下方向下滚动，您会注意到轮播下方的内容每次在轮播中的图像发生变化时都会向上/向下跳跃，以适应新图像的更小/更大尺寸标题。

这使得难以阅读轮播下方的任何文本（在小屏幕上），因为内容大约每 5 秒向上/向下跳跃一次。除了将轮播放在页面的最底部或禁用轮播图像的自动循环之外，是否有解决此问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:58:24.420

我希望给 .carousel-caption div 设置一个最小高度可以工作。如果没有，请尝试在小型设备上使用媒体查询为其提供准确的高度。

第一种方式：

```
.carousel-caption {
  min-height: 300px !important;
} 
```

第二种方式：

```
@media screen and max-width:xxxpx
{
.carousel-caption {
  height: 300px !important;
} 

} 
```

这可能在小段落的底部有一些空白空间，但没有出路。这至少可以防止它上下波动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:27:26.970

如果您说标题容器需要适应它的子元素（要显示的字符数量），您可以尝试@Darshan 建议的内容以及`overflow: hidden;`css 属性，或者您可以将标题容器设置为其内的绝对位置相对的父母。

例如，

```
<div class="relative" style="position: relative">
    <div class="child" style="position: absolute; bottom: 0; left: 0;">
        <p> My text yadda yadda yadda... </p>
    </div>
    <div style="clear: both;"></div>
</div> 
```

将父容器设置为`relative`重置其子元素的边界，然后所有子元素位置将绑定到具有该`relative`位置的最近父容器。

这样，内容仍会显示，但不会下降到页面上的其余内容中，只要相对父级没有高度规范。

# git - 为 SVN 存储库的特定 git-svn 分支创建一个远程 Git 分支作为镜像

> ID：14567906
> 
> 赞同：2
> 
> 时间：2013-01-28T17:41:23.697
> 
> 标签：git, svn, git-svn, git-remote

我使用 git-svn's 从本地远程服务器上克隆了一个现有的 svn repo `git svn clone <orig_svn_repo_path>`。我现在想为本地克隆仓库的几个分支中的一个特定分支设置一个远程仓库说`<cloned_repo>/branches/<branch_to_clone>`。这可能吗？回购的其余部分在大小方面非常庞大，因为我只有那个特定的分支需要处理，我宁愿为它设置一个远程镜像。另外，如果可能的话，我将如何使用正在处理的分支更新原始 svn 存储库，并将我的更改推送到远程 git 分支（repo）以使其与本地分支保持同步（更新到 svn回购）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:46:20.387

如果您想向 SVN 提交（使用`git svn dcommit`），则不应*使用*任何`git clone`git 存储库的 a 。

您应该改为使用`git svn init`带有适当参数的命令，以便仅获取您感兴趣的 SVN 目录，然后获取`git svn fetch`. 您可以根据需要多次执行此操作。

如果您执行一个`git clone`设置为跟踪 SVN 的存储库，您会遇到一个问题：git-svn 修改它通过 发送到 Subversion 的提交主体`dcommit`，添加`git-svn-id`一行。这是一种历史改写。因此，如果您有一个 SVN-oblivious 存储库，它推送到支持 SVN 的存储库，然后推送到 Subversion 本身，那么当您`git push`第二次尝试执行时，您将遇到问题。

只是为了确保我们清楚，问题是第一个存储库在执行`dcommit`. 因此，从那时起，任何下拉到另一个 git repo 的新更改都将具有不同的提交哈希，需要强制拉/推。这就像如果有人要重新设置公开可见的更改会发生什么：请参阅[此 SO answer](https://stackoverflow.com/a/2046748/383402)。

从根本上说，git-svn 旨在与 SVN 存储库本身一起用作“中央”存储库。

如果你想要一个Subversion 的*只读*副本，从不做另一个`dcommit`（或者至少在你`dcommit`从第一个 git repo 做一个之后不让第二个 git repo 保持最新），那么你很好。只需`git clone`使用仅限于您感兴趣的分支的 refspec 即可。

# angularjs - 从内部指令观察控制器模型值

> ID：14567908
> 
> 赞同：22
> 
> 时间：2013-01-28T17:41:26.473
> 
> 标签：angularjs, angularjs-directive

我正在尝试`$viewValue`从指令内部对控制器进行角度观察。

小提琴：http: [//jsfiddle.net/dkrotts/TfTr5/5/](http://jsfiddle.net/dkrotts/TfTr5/5/)

```
function foo($scope, $timeout) {
    $scope.bar = "Lorem ipsum";

    $timeout(function() {
        $scope.bar = "Dolor sit amet";
    }, 2000);
}

myApp.directive('myDirective', function() {
    return {
        restrict: 'A',
        require: '?ngModel',
        link: function (scope, element, attrs, controller) {
            scope.$watch(controller.$viewValue, function() {
                console.log("Changed to " + controller.$viewValue);
            });
        }
    } 
}); 
```

照原样，$watch 函数没有从控制器内部捕获 2 秒后完成的模型更改。我错过了什么？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-28T17:57:23.520

`$watch`接受要在范围内观察的属性的“名称”，您要求它观察值。将其更改为 watch`attrs.ngModel`返回“bar”，现在您正在观看`scope.bar`。您可以以与以前相同的方式获得价值，也可以使用`scope[attrs.ngModel]`which 就像再说`scope["bar"]`一遍一样，与`scope.bar`.

```
scope.$watch(attrs.ngModel, function(newValue) {
    console.log("Changed to " + newValue);
}); 
```

澄清 user271996 的评论：`scope.$eval`使用是因为您可以将对象表示法传递给`ng-model`属性。即`ng-model="someObj.someProperty"`因为`scope["someObj.someProperty"]`无效而不起作用。`scope.$eval`用于将该字符串评估为实际对象，从而`scope["someObj.someProperty"]`变为`scope.someObj.someProperty`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-06T19:33:18.543

想要补充：在 1.2.x 中，在隔离范围内，上述方法不起作用。[http://jsfiddle.net/TfTr5/23/](http://jsfiddle.net/TfTr5/23/)

我想出的一个解决方法是使用 $watch 也接受一个函数的事实，因此您可以使用它访问您的控制器。

```
scope.$watch(
    function(){return controller.$viewValue},
    function(newVal, oldVal){
        //code
    }
) 
```

工作小提琴：http: [//jsfiddle.net/TfTr5/24/](http://jsfiddle.net/TfTr5/24/)

如果有人有替代品，我很乐意欢迎！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-22T16:11:11.670

如果你想在独立作用域内绑定一个值，有两种方法可以做到。第一种方法即使你没有独立作用域也可以使用。方法如下：

1）使用`$attrs.any_attribute`并绑定它（在手表中设置）

2）使用**2路绑定（'='）**方法并将其设置为监听器

如果您想要更多示例，这里是一篇很棒的文章

[http://www.w3docs.com/snippets/angularjs/bind-variable-inside-angularjs-directive-isolated-scope.html](http://www.w3docs.com/snippets/angularjs/bind-variable-inside-angularjs-directive-isolated-scope.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-06-13T20:16:01.010

如果你想对模型值进行去抖动，值得一提的是**ng-model-option**中的去抖动设置：

```
<input type="text" ng-model-options="{ debounce: 1000 }" ng-model="search"/> 
```

例如：此表在更改后 1000 毫秒触发并在新更改时重置。

```
scope.$watch(attrs.ngModel, function(newValue) { }); 
```

[https://docs.angularjs.org/api/ng/directive/ngModelOptions](https://docs.angularjs.org/api/ng/directive/ngModelOptions)

# sql - 基于日期的 SQL 排名

> ID：14567911
> 
> 赞同：0
> 
> 时间：2013-01-28T17:41:31.557
> 
> 标签：sql, sql-server-2008-r2, rank

我正在尝试根据过去 18 个月内的访问次数将客户链接到“首选”商家，其中决胜局是最近的访问日期。我对决胜局有点麻烦。如果有两条记录都基于某个 MemberID 的访问次数排名 1，我想在该 MemberID 的 MAX(EncounterDate) 记录上将 IsFirst 位列设置为 1。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:04:27.773

这可能会对您有所帮助... 这是基于现有 emp 表的 Oracle 查询。我认为在发布问题时创建结构是个好主意。将第一个选择替换为更新等...：更新您的表设置您的日期 = max_date（在我的示例中为 max_hire_date）WHERE your_field IN（在我的示例中选择最大日期）并且 rnk = 1 和 rno = 1

```
SELECT * FROM 
 (  
 SELECT deptno
      , ename
      , sal
      , RANK() OVER (PARTITION BY deptno ORDER BY sal desc) rnk 
      , ROW_NUMBER() OVER (PARTITION BY deptno ORDER BY sal desc) rno 
      , MAX(hiredate) OVER (PARTITION BY deptno ORDER BY deptno) max_hire_date
   FROM emp_test
  WHERE deptno = 20
 ORDER BY deptno
 )
 WHERE rnk = 1
   --AND rno = 1 -- or 2 or any other number...
/

SQL>

DEPTNO  ENAME   SAL    RNK  RNO HIREDATE    MAX_HIRE_DATE
-----------------------------------------------------------
 20     SCOTT   3000    1   1   1/28/2013   1/28/2013
 20     FORD    3000    1   2   12/3/1981   1/28/2013 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:46:03.287

假设某些表的结构，以下 SQL 获取您想要的信息：

```
select c.*, NumVisits, MaxVisitDate, MaxFirstVisitDate
       (select count(*)
        from visits v
        where v.customerid = c.customerid and 
              v.visi
from customers c join
     (select customerid,
             sum(case when visitdate between getdate() - 365*1.5 and getdate()
                      then 1 else 0
                  end) as NumVisits,
             max(visitdate) as MaxVisitDate,
             max(case when IsFirst = 1 then visitdate end) as MaxFirstVisitDate
      from visits
      group by customerid
     ) v
     on c.customerid = v.customerid 
```

从这些信息中，您可以将您想要做的事情的逻辑放在一起。当 时`MaxVisitDate = MaxFirstVisitDate`，则在最近的日期设置该位。

您的更新问题的答案是这样的：

```
update visits
    set IsFirst = 1
    where exists (select max(encounterDate)
                  from visits v2
                  where v2.customer_id = visits.customer_id
                  having max(encounterDate) = visits.encounterDate)
                 ) 
```

# java - spring 3 自动表单字段验证与文件上传

> ID：14567912
> 
> 赞同：1
> 
> 时间：2013-01-28T17:41:37.940
> 
> 标签：java, spring

我使用带有休眠验证器的 JSR 303 验证，通过在控制器方法上指定 @Valid 来自动验证字段。验证工作正常。我知道在表单中添加了一个上传字段，并添加了一个 @RequestParam("file") 作为 MultipartFile 文件。现在它只有在所有字段在提交时都有效时才有效，否则我会收到 404（错误请求）。如果我删除 @Valid 注释，我会得到 javax.validation.ConstraintViolationException，其中包含状态 500 的所有验证违规。

我正在使用 Spring 3.2

我的表格：

```
 <form action="#springUrl("/admin/stores/save")" method="POST" enctype="multipart/form-data">
Name: 
  #springBind( "store.name" )
  <input type="text" 
    name="${status.expression}" 
    value="$!status.value" /><br>
......
   <input type="file" name="file" accept="image/*">

  <input type="submit" value="submit"/>
</form> 
```

控制器：

```
@RequestMapping(value="/save", method = RequestMethod.POST)
    @Transactional
    public String save(@Valid @ModelAttribute Store store, @RequestParam("file") MultipartFile file, BindingResult bindingResult, ModelMap model) {
        if (bindingResult.hasErrors()) {
            model.addAttribute("message", "Failed");
            model.addAttribute("store", store);
            return "admin/stores/form";
        } else {
                ..... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T12:02:05.883

您的问题在于方法参数顺序。`@ModelAttribute`后面必须跟`BindingResult`论据。查看[Spring 文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-ann-arguments)并检查*示例 17.1。BindingResult 和 @ModelAttribute 的排序无效*。

. 如果它是其中的一部分，您还应该添加`MultipartFile`到表单类 ( ) 中。`Store`

```
Store {

    /* Your other fields */

    @NotNull
    private  MultipartFile file;

    public MultipartFile getFile() {
        return file;
    }

    public void setFile(MultipartFile file) {
        this.file= file;
    }
} 
```

# hibernate - org.hibernate.exception.SQLGrammarException：无法插入/选择用于批量删除的 id

> ID：14567915
> 
> 赞同：2
> 
> 时间：2013-01-28T17:41:45.480
> 
> 标签：hibernate, jpa, persistence, bulk, createquery

有以下java代码：

```
EntityTransaction myTransaction = myManager.getTransaction();
myTransaction.begin();
System.out.println(myManager.createQuery("delete from UserProfile where id > 16787504").executeUpdate());
myTransaction.commit(); 
```

运行后出现错误：

```
javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: could not insert/select ids for bulk delete
    at org.hibernate.ejb.AbstractEntityManagerImpl.throwPersistenceException(AbstractEntityManagerImpl.java:614)
    at org.hibernate.ejb.QueryImpl.executeUpdate(QueryImpl.java:60) 
```

有什么解决办法吗？

# php - php 表单验证问题，“填写所有必需的框”

> ID：14567916
> 
> 赞同：1
> 
> 时间：2013-01-28T17:41:45.873
> 
> 标签：php, html

我创建了一个简单的 HTML 表单，并使用 PHP 处理它。

当我尝试提交表单时，它给了我我创建的错误消息，因为我没有填写所有必需的框。我已经检查并重新检查了变量，但我无法弄清楚为什么它会向我发送所有字段都已填写的消息。

HTML：

```
<form name="volunteer" action="form-to-email3.php" method="post">

<label>Last Name*: </label><input type="text" name="lastname" /><br />
<label>First Name*: </label><input type="text" name="firstname" /><br />
<label>Middle Initial: </label><input type="text" name="initial" size=1 maxlength=1 /><br /><br />
<label>Date of Birth*: </label><INPUT NAME="month" input type="tel" SIZE=2 MAXLENGTH=2
onKeyPress="return numbersonly(this, event)">/<INPUT NAME="day" input type="tel" SIZE=2 MAXLENGTH=2
onKeyPress="return numbersonly(this, event)">/<INPUT NAME="year" input type="tel" SIZE=4 MAXLENGTH=4
onKeyPress="return numbersonly(this, event)">
<SCRIPT TYPE="text/javascript">
<!--
autojump("month", "day", 2); autojump("day", "year", 2);
//-->
</SCRIPT><br /><br />
<label>Gender*:</label><input type="radio" name="gender" value="Male"> Male
<input type="radio" name="gender" value="Female"> Female
<br /> <br />
<label>Street Address*: </label><input type="text" name="streetaddress" /><br />
<label>Address Line 2: </label><input type="text" name="addressline2" /><br />
<label>City*: </label><input type="text" name="city" /><br />
<label>State/Province/Region*: </label><input type="text" name="state" /><br />
<label>Zipcode*: </label>
<INPUT NAME="zip" input type="tel" SIZE=5 MAXLENGTH=5
onKeyPress="return numbersonly(this, event)"><br />
<label>Country: </label>
<select class="element select medium" id="element_3_6" name="country"> 
<option value="" selected="selected"></option>
<option value="Afghanistan" >Afghanistan</option>
<option value="Albania" >Albania</option>

</select>
<br /><br />

<label>Email*: </label><input type="email" name="email" /><br /><br />

<label>Cell Phone*: </label>(<INPUT NAME="areacode" input type="tel" SIZE=3 MAXLENGTH=3
onKeyPress="return numbersonly(this, event)">)<INPUT NAME="cellphone" input type="tel"SIZE=7 MAXLENGTH=7
onKeyPress="return numbersonly(this, event)"><br />
<SCRIPT TYPE="text/javascript">
<!--
autojump("areacode", "cellphone", 3);
//-->
</SCRIPT>
<label>Daytime Phone*: </label>(<INPUT NAME="daytime_phone_area" input type="tel" SIZE=3 MAXLENGTH=3
onKeyPress="return numbersonly(this, event)">)<INPUT NAME="daytime_phone" input type="tel"SIZE=7 MAXLENGTH=7
onKeyPress="return numbersonly(this, event)"><br /><br />
<SCRIPT TYPE="text/javascript">
<!--
autojump("daytime_phone_area", "daytime_phone", 3);
//-->
</SCRIPT>

<label>T-Shirt Size*: </label><input type="radio" name="shirt_size" value="Small"> Small
<input type="radio" name="shirt_size" value="Medium"> Medium
<input type="radio" name="shirt_size" value="Large"> Large
<input type="radio" name="shirt_size" value="XL"> XL
<input type="radio" name="shirt_size" value="2XL"> 2XL
<input type="radio" name="shirt_size" value="Other"> Other (Please provide)<br />
<label>Other:</label><input type="text" name="other size" /><br /><br />
<p>In which area will you be helping*:</p>
<select>
<option name= "position" value= "Pastor">Pastor</option>
<option name= "position" value="Nursing Staff">Nursing Staff</option>
<option name= "position" value="Camp Staff">Camp Staff (Including Huddle Leaders)</option>
<option name= "position" value="Other Staff">Other Staff</option>
</select><br /><br />
<label>Dates Attending*: <br />(Please check all dates you can be present)</label>
<input type="checkbox" name="dates" value="7/6">July 6
<input type="checkbox" name="dates" value="7/7" />July 7
<input type="checkbox" name="dates" value="7/8">July 8
<input type="checkbox" name="dates" value="7/9">July 9
<input type="checkbox" name="dates" value="7/10">July 10
<input type="checkbox" name="dates" value="7/11">July 11
<input type="checkbox" name="dates" value="7/12">July 12<br /><br /><br /><br />
<label>What is the best way to contact you*? </label><input type="text" name="contactmethod" /><br /><br /><br />

<b>Electronic Submission</b>
<p>I understand that by filling in my name here, it shall act as a binding, legal signagure. </p>
<label>Electronic Signagure*: </label><input type="text" name="signature" /><br />
<label>Date*: </label><INPUT NAME="signature_month" input type="tel" SIZE=2 MAXLENGTH=2
onKeyPress="return numbersonly(this, event)">/<INPUT NAME="signature_day" input type="tel" SIZE=2 MAXLENGTH=2
onKeyPress="return numbersonly(this, event)">/<INPUT NAME="signature_year" input type="tel" SIZE=4 MAXLENGTH=4
onKeyPress="return numbersonly(this, event)">
<SCRIPT TYPE="text/javascript">
<!--
autojump("signature_month", "signature_day", 2); autojump("signature_day", "signature_year", 2);
//-->
</SCRIPT><br /><br /><br /><br /><br />

<input type="submit" value="Submit">
</form> 
```

PHP：

```
<?php
if($_SERVER['REQUEST_METHOD'] !== 'POST')
{
//This page should not be accessed directly. Need to submit the form.
echo "error; you need to submit the form!";
die;
} 

$firstname = $_POST['firstname']; $lastname = $_POST['lastname']; $initial = $_POST['initial']; $streetaddress = $_POST['streetaddress']; $addressline2 = $_POST['addressline2']; $city = $_POST['city']; $state = $_POST['state']; $zip = $_POST['zip']; $email = $_POST['email']; $month = $_POST['month']; $day = $_POST['day']; $year = $_POST['year']; $gender = $_POST['gender']; $areacode = $_POST['areacode']; $cellphone = $_POST['cellphone']; $shirtsize = $_POST['shirt_size']; $country = $_POST['country']; $dayarea = $_POST['daytime_phone_area']; $dayphone = $_POST['daytime_phone']; $shirtsizeother = $_POST['other']; $dates = $_POST['dates']; $signature = $_POST['signature']; $signday = $_POST['signature_day']; $signmonth = $_POST['signature_month']; $signyear = $_POST['signature_year']; $position = $_POST['position']; $contactmethod = $_POST['contactmethod']; 

//Validate first

/*
Simple form validation
check to see if required fields were entered
*/
if ($_POST['firstname'] == "" || $_POST['lastname'] == "" || $_POST['streetaddress'] == "" || $_POST['city'] == "" || $_POST['state'] == "" || $_POST['zip'] == "" || $_POST['email'] == "" || $_POST['month'] == "" || $_POST['day'] == "" || $_POST['year'] == "" || $_POST['gender'] == "" || $_POST['areacode'] == "" || $_POST['cellphone'] == "" || $_POST['daytime_phone_area'] == ""  || $_POST['daytime_phone'] == ""  || $_POST['dates'] == ""  || $_POST['signature'] == ""  || $_POST['signature_day'] == ""  || $_POST['signature_month'] == ""  || $_POST['shirt_size'] == ""  || $_POST['signature_year'] == ""  || $_POST['position'] == ""  || $_POST['contactmethod'] == "" ) {
    echo "Please fill in all required boxes.";}
else {

$email_from = 'chris569x@gmail.com';//<== update the email address
$email_subject = "New Volunteer Registration"; $email_body = "You have received a new volunteer registration.\n". 
"Volunteer: $firstname $initial $lastname \n".
"Address: $streetaddress \n".
"$addressline2 \n".
"$city, $state $zip \n".
"Email: $email \n".
"Date of Birth: $month/$day/$year \n".
"Gender: $gender \n".
"Cell Phone: ($areacode) $cellphone \n".
"Daytime Phone: ($dayarea) $dayphone \n".
"T-Shirt Size: $shirtsize $shirtsizeother \n".
"Dates availible to volunteer: $dates \n".
"Electronic Signature: $signature $signmonth/$signday/$signyear \n".
"Preferred contact method: $contactmethod \n";  
$to = "chris569x@gmail.com";//<== update the email address
$headers = "From: $email_from \r\n";
//Send the email!
mail($to,$email_subject,$email_body,$headers);
//done. redirect to thank-you page.
header('Location: thanks2.htm');
echo "<meta http-equiv='refresh' content='0; url=thanks2.htm'>";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:59:00.133

我相信您需要更改您的职位选择。

似乎该名称没有出现在帖子页面上，因为您输入的是名称而不是 . 解决这个问题，你应该很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:53:38.173

恭喜，您的服务器似乎配置正确！变量 $city 不应包含任何数据。您必须改用 $_POST['city'] 或 $_REQUEST['city'] 。

一些主机可能仍然支持直接向 $variables 提交变量，但这不是一个安全的配置。

例如：

... if (password_check($username,$password)) { $access = 'yes' } ...

if ('yes'==$access) { ... }

可以通过提交 script.php&access=yes 被黑

所以你必须直接使用 $_POST['variable'] 或者首先将它复制到 $variable 中。

# php - 如何使用 yii 隐藏 URL 中的动态文件夹？

> ID：14567917
> 
> 赞同：1
> 
> 时间：2013-01-28T17:41:51.717
> 
> 标签：php, url, dynamic, yii, seo

我们正在创建一个应用程序，我们可以在其中创建数据库内的页面。我们所有的域都将指向这个应用程序，所以我们也将我们的域存储在数据库中。同样基于该域，我们正在创建新布局并确定哪些页面属于该域。话虽如此，我们的问题是：

我们在 urlMangaer: 里面放了一条规则，它的
`'http://dev.<domain:\w+>.com'=>'site/view'`
输出：`http://dev.example.com/example/index`
代表：`http://dev.$domain.com/$domain/$page`

我们的目标是让 url 可以读取`http://dev.$domain.com/$page`并且仍然具有我们需要的功能。

这是我们的行动呼吁：
`public function actionView($domain = null,$page = null, $parm = null){}`

我们想到的一个可能的解决方案是扩展 urlManager，但我们不知道从哪里开始这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:21:19.967

如何在您的站点控制器中定义新操作，或者找到一种使用 actionIndex 的方法，以获取域和页面作为输入并从 DB 呈现相应的域和页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:57:31.400

我想出了解决方案，它一直在我的控制器中。

我创建了一个名为 getDomain 的新函数：

```
public function getDomain(){
    $domain = Domain::model()->find('domain_name=:domain_name', array(':domain_name'=>Yii::app()->request->baseUrl));
    return $domain->domain_name;
} 
```

然后在我的 actionView 函数中

```
public function actionView($domain = null,$page = null, $parm = null){
    if ($domain === null){
        $domain = $this->getDomain();
    } ... 
```

现在它可以在 $domain 必须位于 URL 内的情况下工作

# jsf-2 - 回发期间请求参数为空

> ID：14567920
> 
> 赞同：2
> 
> 时间：2013-01-28T17:42:07.907
> 
> 标签：jsf-2

我有一个显示用户列表的视图，从这个视图我可以转到任何选定用户的“详细信息”的另一个视图。在详细信息视图中，我需要从 2 个选择列表中选择一些值，然后在支持的 bean 中获取这些值，并将它们添加到用户以最终将用户存储（更新）到数据库中。这些是我在“用户 Bean”中的方法。

使用这种方法，我从“用户列表视图”中获取用户 ID，并从数据库中检索用户以在详细信息视图中显示其信息。

```
public void getParam(){

    FacesContext facesContext = FacesContext.getCurrentInstance();
    ExternalContext externalContext = facesContext.getExternalContext();

    //Obtener parametros del request
    Map<String, String> parameterMap = (Map<String, String>) externalContext.getRequestParameterMap();
    Long param = Long.valueOf(parameterMap.get("id_usuario"));
    System.out.println(param);
    this.setU(controlador.getUser(param));

} 
```

使用这种方法，我将选择列表中的值设置为一个对象，然后将此对象添加给用户，最后将其保存在数据库中。

```
public void setPrivilegio(){

    System.out.println("hola");
    Privilegio pri=new Privilegio();
    FacesContext facesContext = FacesContext.getCurrentInstance();
    ExternalContext externalContext = facesContext.getExternalContext();

    //Obtener parametros del request
    Map parameterMap = externalContext.getRequestParameterMap();
    Agrupacion agrupacion= (Agrupacion)parameterMap.get("agrup");
    System.out.println(agrupacion.getNombre());
    Rol rol = (Rol)parameterMap.get("rols");
    System.out.println(rol.getNombre());
    System.out.println(""+rol.getNombre()+" "+agrupacion.getNombre());
    pri.setRol(rol);
    pri.setAgrupacion(agrupacion);
    pri.setActive(true);
    this.getU().addPrivilegio(pri);

    controlador.saveUsuario(this.getU());

} 
```

这是我的看法：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core">
    <div class="container">
        <h:panelGroup id="Usuarios">
            <h:form id="FormUsuarios">
                <h2>Detalles Usuario</h2>

                <h:dataTable id="users" value="#{usuario.u}"  styleClass="table table-striped table-bordered" headerClass="sorting_asc"
                             rowClasses="odd,even">
                    <h:column>
                        <f:facet name="header">#</f:facet>
                        #{usuario.u.id}
                    </h:column>
                    <h:column>
                        <f:facet name="header">Identificador</f:facet>
                        <h:inputText id="identificador" value="#{usuario.u.identificador}" />
                    </h:column>
                    <h:column>
                        <f:facet name="header">Nombre</f:facet>
                        <h:inputText id="nombres" value=" #{usuario.u.nombres}"/>   <h:inputText id="apellidoP" value=" #{usuario.u.apellidoPaterno}"/> <h:inputText id="apellidoM" value=" #{usuario.u.apellidoMaterno}"/>
                    </h:column>
                    <h:column>
                        <f:facet name="header">Active</f:facet>
                        <h:selectBooleanCheckbox id="check" value="#{usuario.u.active}"></h:selectBooleanCheckbox>
                    </h:column>

                </h:dataTable>

                <h3>Asignar Privilegios</h3>

                <h:selectOneMenu id="agrup" value="#{usuario.selected}" converter="omnifaces.SelectItemsConverter">
                    <f:selectItems value="#{agrupacion.agrupacion}" var="entity" itemLabel="#{entity.nombre}" itemValue="#{entity.id}"/>
                </h:selectOneMenu>

                <h:selectOneMenu id="rols" value="#{rol.selected}" converter="omnifaces.SelectItemsConverter">
                    <f:selectItems value="#{rol.roles}" var="rol" itemLabel="#{rol.nombre}" itemValue="#{rol.id}"/>
                </h:selectOneMenu>

                <h:commandButton  value="Asignar"  styleClass="btn-primary" actionListener="#{usuario.setPrivilegio}">
                </h:commandButton>

                <h3>Privilegios Asignados:</h3>

                <h:dataTable id="privilegios" value="#{usuario.u.privilegios}" var="p" styleClass="table table-striped table-bordered" headerClass="sorting_asc"
                             rowClasses="odd,even">
                    <h:column>
                        <f:facet name="header">#</f:facet>
                        #{p.id}
                    </h:column>
                    <h:column>
                        <f:facet name="header">Roles</f:facet>
                        #{p.rol.nombre}
                    </h:column>
                    <h:column>
                        <f:facet name="header">Grupos</f:facet>
                        #{p.agrupacion.nombre}
                    </h:column>
                    <h:column>
                        <f:facet name="header">Active</f:facet>
                        <h:selectBooleanCheckbox id="checkbox" value="#{p.active}"></h:selectBooleanCheckbox>
                    </h:column>

                </h:dataTable>

            </h:form>
            <script type="text/javascript" src="js/paging-bootstrap.js"></script>
            <script type="text/javascript" src="js/contenidoc.datatable.init.js"></script>
        </h:panelGroup>
    </div>
</ui:composition> 
```

当我单击调用该方法的名为“Asignar”的命令按钮时，`setPrivilegio()`出现此错误：

```
java.lang.NumberFormatException: null
    at java.lang.Long.parseLong(Long.java:404)
    at java.lang.Long.valueOf(Long.java:540)
    at cl.uchile.sti.bean.UsuarioBean.getParam(UsuarioBean.java:114) 
```

视图中的表格显示了所有信息，但是当我想调用将所选项目添加到用户并将其保存在数据库中的方法时（`setPrivilegio`）我收到此错误。

这是如何引起的，我该如何解决？

这是我完整的“用户 bean”：

```
@ManagedBean(name = "usuario")
@ViewScoped
public class UsuarioBean {
    private usuarioController controlador;
    private Usuario u=new Usuario();
    private Privilegio Selected=new Privilegio();
    private Boolean active;
    private long id_user;

    @PostConstruct
    public void init() {

        controlador=new usuarioController();

    }

    public long getId_user() {
        return id_user;
    }

    public void setId_user(long id_user) {
        this.id_user = id_user;
    }

    public Privilegio getSelected() {
        return Selected;
    }

    public void setSelected(Privilegio selected) {
        Selected = selected;
    }

    public Boolean getActive() {

        return active;
    }

    public void setActive(Boolean active) {

        this.active = active;
    }

    public Usuario getU() {
        getParam();
        return u;
    }

    public void setU(Usuario u) {
        this.u = u;
    }

    private List<Usuario> usuario;

    public List<Usuario> getUsuario() {
        usuario=UsuarioDAO.getAll();
        return usuario;
    }

    public Usuario getById(long id_usuario){

       return u;
    }

    public void setUsuario(List<Usuario> usuario) {
        this.usuario = usuario;
    }

    public void saveUsuario(Usuario u){
        controlador.saveUsuario(u);
    }

    public void getParam(){

        FacesContext facesContext = FacesContext.getCurrentInstance();
        ExternalContext externalContext = facesContext.getExternalContext();

        //Obtener parametros del request
        Map<String, String> parameterMap = (Map<String, String>) externalContext.getRequestParameterMap();
        Long param = Long.valueOf(parameterMap.get("id_usuario"));
        System.out.println(param);
        this.setU(controlador.getUser(param));

    }

    public void setPrivilegio(){

        System.out.println("hola");
        Privilegio pri=new Privilegio();
        FacesContext facesContext = FacesContext.getCurrentInstance();
        ExternalContext externalContext = facesContext.getExternalContext();

        //Obtener parametros del request
        Map parameterMap = externalContext.getRequestParameterMap();
        Agrupacion agrupacion= (Agrupacion)parameterMap.get("agrup");
        System.out.println(agrupacion.getNombre());
        Rol rol = (Rol)parameterMap.get("rols");
        System.out.println(rol.getNombre());
        System.out.println(""+rol.getNombre()+" "+agrupacion.getNombre());
        pri.setRol(rol);
        pri.setAgrupacion(agrupacion);
        pri.setActive(true);
        this.getU().addPrivilegio(pri);

        controlador.saveUsuario(this.getU());

    }

} 
```

这是第一个视图（用户列表，我从中转到用户详细信息）

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core">
    <div class="container">
        <h:panelGroup id="Usuarios">
            <h:form id="FormUsuarios">
                <h2>Listado de Usuarios</h2>
                <h:graphicImage url="http://a.dryicons.com/images/icon_sets/simplistica/png/128x128/add.png" width="30" height="30"/>

                <h:dataTable id="users" value="#{usuario.usuario}" var="o" styleClass="table table-striped table-bordered" headerClass="sorting_asc"
                             rowClasses="odd,even">
                    <h:column>
                        <f:facet name="header">#</f:facet>
                        #{o.id}
                    </h:column>
                    <h:column>
                        <f:facet name="header">Identificador</f:facet>
                        #{o.identificador}
                    </h:column>
                    <h:column>
                        <f:facet name="header">Nombre</f:facet>
                        #{o.nombres}  #{o.apellidoMaterno} #{o.apellidoPaterno}
                    </h:column>
                    <h:column>
                        <f:facet name="header">Active</f:facet>
                        <h:selectBooleanCheckbox id="check" value="#{o.active}"></h:selectBooleanCheckbox>
                    </h:column>
                    <h:column>
                        <f:facet name="header">Detalles</f:facet>

                        <h:outputLink  value="contenido/detalleUsuario.xhtml">
                            Detalle
                            <f:param name="id_usuario" value="#{o.id}"  />
                        </h:outputLink>
                    </h:column>
                </h:dataTable>
            </h:form>
            <script type="text/javascript" src="js/paging-bootstrap.js"></script>
            <script type="text/javascript" src="js/contenidoc.datatable.init.js"></script>
        </h:panelGroup>
    </div>
</ui:composition> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:51:04.593

坏吸气剂！

```
 public Usuario getU() {
    getParam();
    return u;
    } 
```

上面的吸气剂是一个非常糟糕的主意。您自己说过该变量使其成为`usuario`支持bean（我对此表示怀疑）。由于不一致（就像您正在经历的那样）以及在请求期间多次调用 getter 的事实，在 getter 中[执行业务逻辑是完全错误](https://stackoverflow.com/a/2090062/1530938)的。[在 JSF 页面之间传递和初始化参数](https://stackoverflow.com/a/4889226/1530938)有更优雅和更简洁的方法。

`private Usuario u=new Usuario();`也是个坏主意。为什么这有必要，当你有

```
 this.setU(controlador.getUser(param)); 
```

这一切都应该发生在你的内心`@PostConstructor`

```
 @PostConstruct
    public void init() {

    controlador=new usuarioController();
    FacesContext facesContext = FacesContext.getCurrentInstance();
    ExternalContext externalContext = facesContext.getExternalContext();

    //Obtener parametros del request
    Map<String, String> parameterMap = (Map<String, String>) externalContext.getRequestParameterMap();
    Long param = Long.valueOf(parameterMap.get("id_usuario"));
    System.out.println(param);
    this.setU(controlador.getUser(param));

    } 
```

吸气剂应该很简单

```
public Usuario getU() {
    return u;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:28:45.140

此错误的原因`parameterMap.get("id_usuario")`是 null。您应该研究如何将此参数从 UI 传递到支持 bean。

# windows - python pygtk windows 7 64位

> ID：14567921
> 
> 赞同：7
> 
> 时间：2013-01-28T17:42:08.763
> 
> 标签：windows, python-2.7, 64-bit, pygtk

我在 linux 上使用 pygtk 已经有一段时间了。我只是想让我的应用程序更易于分发。现在我已经将 pygtk 用于 32 位，但现在我想使用 pygtk 64 位将 pygtk 用于 64 位。我已经下载了多合一安装程序。我已经按照 gtk 的需要更改了路径，然后运行“pkg-config --cflags gtk+-2.0”命令，然后运行 ​​gtk-demo 命令，它确实给了我一个演示，并且效果很好！只是我错过了一些东西，因为在我的 python gtk 64 位中仍然没有名为“gtk”的模块。

我想让 gtk 的 64 位版本在 Windows 上工作，当我得到修复时，我想在 Youtube 上发布如何让它为其他人工作。

谢谢，我希望有人可以提供帮助，因为这部分缺少文档。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-29T16:08:28.723

好的，对于那些正在搜索要在 Windows 64 位中使用的 GUI Python 库的人来说，就是这样！

1）从python.org安装python 64位，如果你的系统上已经安装了python，你不需要担心这个。 [http://www.python.org/ftp/python/2.7.3/python-2.7.3.amd64.msi](http://www.python.org/ftp/python/2.7.3/python-2.7.3.amd64.msi)

2）在高级设置/环境变量中添加到您的 PATH ;C:\python27

[3)然后从 GTK+ http://ftp.gnome.org/pub/gnome/binaries/win64/gtk+/2.22/gtk+-bundle_2.22.1-20101229_win64.zip](http://ftp.gnome.org/pub/gnome/binaries/win64/gtk+/2.22/gtk+-bundle_2.22.1-20101229_win64.zip)下载一体化安装程序

4) 在 c:\opt\gtk 中创建一个文件夹 # 将它添加到 PATH 的位置并不重要。解压缩文件夹并将所有文件复制到上面创建的文件中。然后，将您的 PATH 设置为创建的文件 EG ;C:\opt\gtk\bin

您现在可以在 cmd 中输入以下命令对其进行测试：“gtk-demo”

5）现在你仍然需要获取库 gtk、PyCairo、goobject [http://www.lfd.uci.edu/~gohlke/pythonlibs/#pygtk](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pygtk)

py2cairo-1.10.0.win-amd64-py2.7.‌exe

pygobject-2.28.6.win-amd64-py2.7.‌exe

pygtk-2.22.0.win-amd64-py2.7.‌exe

我希望它有所帮助。我看到一个文件“py2cairo-1.10.0.win-amd64-py2.7.‌exe”我不确定是否需要我目前正在测试我的应用程序。现在我只需要找到 gtksourceview2/3 for win7 64bit。祝你好运！;)

# java - ADF 导航到相同的视图/页面

> ID：14567922
> 
> 赞同：0
> 
> 时间：2013-01-28T17:42:20.563
> 
> 标签：java, oracle-adf

**前提条件：** 我不使用 ADF 业务组件。只有 ADFaces 和绑定。

**问题**：我在从一个视图导航到自身时遇到问题。

我有以下物品：

**Taskflow1**：包含*Taskflow2*和*Taskflow3*。当单击 view1 Taskflow2 中的按钮 b1 时，会导航到 Taskflow3。

**Taskflow2**和**Taskflow3**：包含相同的视图*view1*。

**view1**：在*view1*中有 inputFields 和一个*按钮 b1*应该再次打开*view1*但没有当前绑定（--> 之前输入的数据）。

所以目标是点击b1后inputFields等为空。

我认为问题在于没有页面刷新。如果我导航到另一个视图 view2，然后调用 TaskFlow1 或 TaskFlow2，则绑定不存在并且一切正常。但在这种情况下，导航到另一个页面不是选项。

我已经尝试过，taskflow1 仅在单击按钮 b1 时才调用自身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:46:42.840

我通过在输入字段上定义 partialTriggers 解决了这个问题。触发器是页面上离开任务流的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T12:04:51.463

您必须在 i/p 字段上设置 partialTrigger。此外，您必须立即 =“true”，以便不会在其他组件上触发验证。在迭代器上，您必须将刷新条件设置为“ifNeeded”，以便在再次调用页面后重新加载迭代器时，它将具有一组新的值。随时发布任何疑问。

# tridion - 使用核心服务和模拟发布

> ID：14567925
> 
> 赞同：2
> 
> 时间：2013-01-28T17:42:28.883
> 
> 标签：tridion, tridion-2011

我有一个 Tridion 核心服务 Web 应用程序来发布页面。当登录到服务器并通过浏览器客户端从那里运行它时，它使用 ajax 调用 Web 服务，它工作正常。但是，当我从桌面运行应用程序时，它什么也不做，也不会抛出任何错误消息。

*编辑：托管 Web 服务的 Web 应用程序在 Tridion 2011 CMS 网站下作为“应用程序”运行。这样做是为了避免跨域 ajax 问题/

*   更新：下面的代码运行良好 - 无论是模拟还是尼克的解决方案。我的问题实际上在于我如何从 jQuery 调用 Web 服务并使用适当的 URL。我要留下代码和问题，所以也许它会帮助其他人。

我的代码是：

```
string binding = "wsHttp_2011";
using (var client = new SessionAwareCoreServiceClient(binding))
{
    client.Impersonate("company\\cms_svc");

    // ** Get Items to Publish
    List<string> itemsToPublish = GetItemsToPublish(publishItem.TcmUri, client);

    PublishInstructionData instruction = new PublishInstructionData
    {
        ResolveInstruction = new ResolveInstructionData() { IncludeChildPublications = false },
        RenderInstruction = new RenderInstructionData()
    };

    PublicationTargetData pubtarget = (PublicationTargetData)client.Read(publishItem.PubTargetUri, readoptions);
    List<string> target = new List<string>();
    target.Add(pubtarget.Id);

    client.Publish(itemsToPublish.ToArray(), instruction, target.ToArray(), GetPublishPriority(publishItem.Priority), readoptions);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T19:31:52.040

请查看 SDL Live Content 上的此页面，其中解释了以不同用户身份连接的各种类型的场景：

[http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_87284697A4BB423AAD5387BBD6884735](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_87284697A4BB423AAD5387BBD6884735)

根据文档，您可能希望使用 NetworkCredential 建立核心服务连接，而不是模拟，如下所示：

```
using (ChannelFactory<ISessionAwareCoreService> factory = 
  new ChannelFactory<ISessionAwareCoreService>("netTcp_2011"))
{
  NetworkCredential networkCredential = 
   new NetworkCredential("username", "password", "domain");
  factory.Credentials.Windows.ClientCredential = networkCredential;
  ISessionAwareCoreService client = factory.CreateChannel();
  Console.WriteLine(client.GetCurrentUser().Title);
} 
```

# tomcat - Tomcat 7 或 Tomcat 6 的最低和推荐要求

> ID：14567926
> 
> 赞同：12
> 
> 时间：2013-01-28T17:42:33.693
> 
> 标签：tomcat, memory, processor

tomcat 6 或 Tomcat 7 的最低和推荐要求是什么？请提供内存要求、磁盘空间要求和处理器要求？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-28T22:36:04.363

Tomcat 6/7 本身可以在大约 12MiB 的堆中运行。Tomcat 7.0.35 在您的磁盘上占用了 13412390 字节，没有安装任何应用程序，也没有日志文件。如果您不安装任何 Web 应用程序或编写任何日志文件，则 Tomcat 需要 13MiB 的磁盘空间。处理器要求都取决于 JVM。我怀疑 JVM 需要一个至少有一个内核的 32 位处理器。

因此，基本上过去 20 年制造的任何可以成功引导的东西都应该能够运行 Tomcat 6 或 7。

推荐的系统配置：你能承受的最多的内核、最多的内存和最多的磁盘空间。

显然，没有任何意见，没有人能给你任何好的建议。我已经看到 Web 应用程序在安装了 512MiB 内存和最少磁盘使用的单核上在预期负载下运行得非常好。另一方面，由于配置不当、软件编写不当和容量规划不足，我曾看到内存为 32GiB 的多核机器出现故障。

**编辑 2016-07-13**

对于在 Oracle Java 8 上运行的 Tomcat 8，仅运行一个普通 Web 应用程序的 Tomcat 服务器在 ~24MiB 内启动。Tomcat 8 需要在启动和部署 Web 应用程序时处理更多事情，因此需要额外的堆。也许可以减少它，但我只是使用了一个现有的 Tomcat 实例，并在没有部署 Web 应用程序的情况下启动它（除了一个用于报告内存使用情况的微不足道的应用程序），以查看它的外观。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-05-21T08:57:34.840

由于您很可能要在 Tomcat 上运行 Java EE 应用程序，因此我建议您参考 Java EE 7 SDK System Reuirements：

[Java EE 7 SDK 系统要求](http://www.oracle.com/technetwork/java/javaee/documentation/javaee7sdk-readme-1957703.html#System_Requirements)

> 最低和推荐的内存和磁盘空间要求如下：
> 
> *   最小内存：1 GB
> *   推荐内存：Windows 平台 2 GB，非 Windows 平台 1 GB
> *   最小磁盘空间：250 MB
> *   推荐磁盘空间：500 MB

尽管如此，我完全同意**Christopher Schultz**的观点，即最终需求应该基于应用程序的非功能性需求，当然，JVM 应该正确配置。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-11T10:58:10.780

如果我们看一下 Tomcat 7/8 中的 service.bat 文件，默认内存选项将 JvmMs（初始内存池大小）设置为 128 MB，将 JvmMx（最大内存池大小）设置为 256 MB。所以看起来 Tomcat 开发人员已经确定作为 Windows 服务运行的“瘦”版本的 Tomcat 只需要 128...256 MB 的 RAM。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-14T14:41:49.883

这完全取决于正在部署的应用程序和该应用程序将具有的负载。

在将基础设施规划作为 RFP 提交等活动的一部分时，我几乎会将其归类为来自供应商或系统集成商等组织的“技巧”问题。

# java - Spring + Java：时间戳不能转换为日期？从 SQL 中提取，但类型是日期。代码中没有时间戳

> ID：14567929
> 
> 赞同：0
> 
> 时间：2013-01-28T17:42:41.693
> 
> 标签：java, sql, spring, date, timestamp

我目前正在使用 Spring 框架，但我不确定这是否是直接的问题。我收到以下错误：

`org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.ClassCastException: java.sql.Timestamp cannot be cast to java.sql.Date org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:929) org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:824) javax.servlet.http.HttpServlet.service(HttpServlet.java:641) org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:798) javax.servlet.http.HttpServlet.service(HttpServlet.java:722)`

```
 @SuppressWarnings({ "rawtypes", "unchecked"})
public List getAllByFilter( String collectionPeriod,String sYear, String submission) {
    // TODO Auto-generated method stub SELECT_QUERY_BY_COLL_MSTR

    List<CollectionCalendar> orgs1 = new ArrayList<CollectionCalendar>();        
    List<Map<String,Object>> rows1 = null;
    String query="SELECT_QUERY_BY_COLL_MSTR";

    if("All".equalsIgnoreCase(sYear) && "All".equalsIgnoreCase(collectionPeriod)){
        query="SELECT_QUERY_BY_COLL_MSTR_SUBMISSION";
         rows1 = getJdbcTemplate().queryForList(p.getProperty(query),new Object[] {submission});
    }else if(!"All".equalsIgnoreCase(sYear) && "All".equalsIgnoreCase(collectionPeriod)){
        query="SELECT_QUERY_BY_COLL_MSTR_SUBMISSION_YEAR";
         rows1 = getJdbcTemplate().queryForList(p.getProperty(query),new Object[] {sYear,submission});
    }else if("All".equalsIgnoreCase(sYear) && !"All".equalsIgnoreCase(collectionPeriod)){
        query="SELECT_QUERY_BY_COLL_MSTR_SUBMISSION_COLLECTION";
         rows1 = getJdbcTemplate().queryForList(p.getProperty(query),new Object[] {collectionPeriod,submission});
    }else if(!"All".equalsIgnoreCase(sYear) && !"All".equalsIgnoreCase(collectionPeriod)){      
         rows1 = getJdbcTemplate().queryForList(p.getProperty(query),new Object[] {sYear,collectionPeriod,submission});
    }
    System.out.println("hellooooooooooooooooooo");
    for (Map row : rows1) {
        System.out.println("row------"+row);
        CollectionCalendar collectionCalendar = new CollectionCalendar(row.get("COLL_KEY").toString(),
                (Date)row.get("COLL_OPEN_DT"),
                (Date)row.get("COLL_CLOSE_DT"),
                (Date)row.get("COLL_AVLBL_DT"),
                row.get("COLL_ACAD_YR").toString(),
                row.get("COLL_NAME").toString(),
                row.get("COLL_DESC").toString(),
                row.get("SUBM_DESC").toString(),
                row.get("UPDATE_USER").toString());
                //(Timestamp) row.get("UPDATE_DTTM"));            
        orgs1.add(collectionCalendar); (COMMENTED THIS OUT BUT STILL GETTING ERROR)
    }
    return orgs1;
}

public CollectionCalendar(String colKey,Date opDate,Date clDate,Date avDate,String sYear,String submission,String collectionPeriod,String subDesc,String updateUser){
    setCollKey(colKey);
    setOpenDate(opDate);
    setCloseDate(clDate);
    setAvailDate(avDate);
    setsYear(sYear);
    setSubmission(submission);
    setCollectionPeriod(collectionPeriod);
    setSubDesc(subDesc);
    setUpdateUser(updateUser);
    //setUpdateTime(updateTime);
} 
```

我拥有的是一个查询数据库并将结果返回到表中的搜索表单。我正在从列类型所在的 Oracle DB 表中提取数据，`Date`但由于某种原因，它告诉我它不能从`Timestamp`值中转换。我根本不要求`Timestamp`价值。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:09:03.370

看起来 COLL_OPEN_DT、COLL_CLOSE_DT 和 COLL_AVLBL_DT 中的一个或全部是数据库中的时间戳。幸运`java.sql.Timestamp`地延伸`java.util.Date`。

## 选项1

将类中的日期元素更改`CollectionCalendar`为 java.util.Date

## 选项 2

使用采用 java.sql.Timestamp `and returns a`java.sql.Date`的方法创建一个类

这是一个简单的例子：

```
class Blammy
{
  static final java.sql.Date convertTimestamp(final java.sql.Timestamp timestamp)
  {
    java.sql.Date returnValue;

    if (timestamp != null)
    {
      returnValue = new java.sql.Date(timestamp.getTime());
    }
    else
    {
      returnValue = null; // an exception might be better here.
    }

    return returnValue
  }
} 
```

然后把上面的代码改成这样：

```
...
Blammy.convertTimestamp(row.get("COLL_OPEN_DT")),
... 
```

## 选项 3

别的东西（我没想到）。

# java - 具有 Java 语法突出显示的 Android 应用程序中的文本

> ID：14567932
> 
> 赞同：1
> 
> 时间：2013-01-28T17:42:46.137
> 
> 标签：java, android, syntax, highlighting

是否可以在 Android 应用程序中使用 Java 语法高亮显示？例如，当您在 TextView 中添加一堆代码时。我将如何在 Java 语法突出显示中为它着色？或者换句话说，有没有办法让程序为你做这件事，或者你必须自己做所有的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:49:57.343

你可能想试试这个。

[Android 语法高亮？](https://stackoverflow.com/questions/11987660/android-syntax-highlighting)

看起来它可能会做你正在寻找的东西。

# json - Erlang erlang-rfc4627 奇怪的错误

> ID：14567935
> 
> 赞同：0
> 
> 时间：2013-01-28T17:43:00.193
> 
> 标签：json, erlang

嗨，我一直在为 erlang 使用 rfc4627，现在我之前有这段代码可以工作，但现在在我对传递的方式进行了更改之后，我在节点“@127.0.0.1”上遇到了进程错误*** ，退出值：{ {badmatch,{obj,[{c,1}]}}

这是代码

```
-define(TO_SELF, fun(S, M, T) -> Msg = {obj, M}, ?LOG("OUTGOING: ~p~n", [Msg]), ok end). 
```

其中 M 是 Msg=[{c,1}]，

有没有人知道是什么原因导致我整天都在尝试但没有运气。谢谢戴夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:13:23.930

这可能是导致您的问题的 Erlang 中 funs 的变量范围规则。在 fun 定义之前绑定的 fun 主体中的任何*自由变量都将其值导入到 fun 中。*fun 是一个闭包，所以这对于大多数带有闭包的语言来说都很常见，它实际上是使 funs/closures 如此强大的原因之一。

所以如果`Msg`在你定义乐趣的时候已经绑定了，

```
Msg = foo,
F = ?TO_SELF,
... 
```

在示例中，它的值然后被导入并且`Msg = {obj,M}`不绑定`Msg`而是针对它的值进行测试`foo`。

# ruby-on-rails - 在查询中使用 globalize3 (with_translation) 和 2 个模型（包括）

> ID：14567936
> 
> 赞同：2
> 
> 时间：2013-01-28T17:43:06.933
> 
> 标签：ruby-on-rails, include, globalize3

使用 Globalize3 我正在尝试在单个查询中加载以下模型，包括翻译：

*   产品（带有 product_translations）
*   属性（带有 property_translations）

当我尝试下面的查询时，它只加载产品的翻译。尽管进行了一些尝试，但我不知道如何加载 property_translations。

```
@products = Product.includes(:properties).with_translations 
```

### 编辑 (1)

我的目标是用急切加载的翻译加载 2 个模型。现在，它在单个查询中加载产品、product_translations 和属性，但不加载 property_translations

我也试过：

```
Product.with_translations.all(:include => { :properties => :property_translations } 
```

但这里的问题是没有 property_translations 模型（使用 Globalize3 创建的表）

谢谢你的想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:18:41.753

我从以下问题中得到了答案：[Rails 3 包括翻译 globalize3 activerecord](https://stackoverflow.com/questions/4337086/rails-3-includes-translations-globalize3-activerecord?rq=1)，即：

```
@products = Product.includes([:translations, {:properties => :translations}]) 
```

# c# - 带有 SQLConnection 的“用户登录失败”C#

> ID：14567939
> 
> 赞同：17
> 
> 时间：2013-01-28T17:43:26.697
> 
> 标签：c#, sql, database, sqlconnection

我一直在尝试通过我的 C# 代码连接到我的数据库（与我的代码在同一台计算机上）。问题是我不断收到“用户登录失败”“”错误......我承认我对连接数据库的了解很少，我已经尝试了其他问题中的几乎所有步骤！

这是我的代码的一部分：

```
SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["SQLServerConnection"].ConnectionString);
        SqlCommand command = connection.CreateCommand();
        command.CommandText = @"IF EXISTS
                            (
                              SELECT *
                              FROM user 
                              WHERE EMAILADRES = @email and WACHTWOORD = @password
                            ) SELECT CAST (1 as bit) 
                            ELSE
                              SELECT CAST(0 as bit)";
        command.Parameters.AddWithValue("email", email);
        command.Parameters.AddWithValue("password", password);

        connection.Open();
        object ReturnBool = command.ExecuteScalar();
        connection.Close(); 
```

这是我的连接字符串：

```
<add name="SQLServerConnection" connectionString="Server=localhost; Database=database1;uid=NT AUTHORITY\NETWORK SERVICE" /> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-28T17:46:05.473

您需要更改连接字符串；

```
<add name="SQLServerConnection" connectionString="Server=localhost;Database=database1;Trusted_Connection=True;/> 
```

如果您使用 windows 身份验证连接到本地数据库，则需要设置`Trusted_Connection=True`；如果您使用 SQL Server 身份验证，则需要声明`User Id=myUsername; Password=myPassword;`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-28T17:50:37.883

我建议这样做：

1）将连接字符串更改为：

```
<add name="SQLServerConnection" connectionString="Server=.;Database=database1;Trusted_Connection=True;"/> 
```

'服务器=。' - 使用您机器上的默认 SQL Server 实例，

'Trusted_Connection=True' - Windows 身份验证用于验证您对 SQL Server 实例的访问。

2) 在 Sql Management Studio 中检查您的 Windows 用户是否有权访问“database1”。

您遇到的第二个错误是因为您应该在参数名称中添加“@”，如下所示：

```
command.Parameters.AddWithValue("@email", email);
command.Parameters.AddWithValue("@password", password); 
```

我还建议您像这样更改代码：

```
using (var connection = new SqlConnection(ConfigurationManager.ConnectionStrings["SQLServerConnection"].ConnectionString))
{
    using (var command = connection.CreateCommand())
    {
        command.CommandText = @"IF EXISTS
                        (
                          SELECT *
                          FROM user 
                          WHERE EMAILADRES = @email and WACHTWOORD = @password
                        ) SELECT CAST (1 as bit) 
                        ELSE
                          SELECT CAST(0 as bit)";

        command.Parameters.AddWithValue("@email", email);
        command.Parameters.AddWithValue("@password", password);

        connection.Open();
        var result = command.ExecuteScalar();
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-28T18:09:49.833

更改您的连接字符串。

```
<add name="SQLServerConnection" connectionString="Server=.;Database=database1;Trusted_Connection=True;"/> 
```

如果您使用服务器身份验证，

```
<add name="SQLServerConnection" connectionString="Server=.;Database=database1; UserId = Username; Password = Password;"/> 
```

如果还是有错误，

在 sql server 配置管理器中检查您的 sql 服务和协议。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-28T17:57:07.857

试试下面...它会帮助你..

```
 string email ="YourEmail@sample.com" //Give your email id to check
        string password ="Test" //Give your Password to check
        SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["SQLServerConnection"].ConnectionString);
        SqlCommand command = connection.CreateCommand();
        command.CommandText = "SELECT * FROM user WHERE EMAILADRES = @email and WACHTWOORD = @password" 
        command.Parameters.AddWithValue("@email", email);
        command.Parameters.AddWithValue("@password", password);
        connection.Open();
        SqlDataReader dr = command.ExecuteReader();
        if (dr.Read())
        MessageBox.Show("Exists");
        else
        MessageBox.Show("Not Exists");
        connection.Close(); 
```

# javascript - 低效的javascript循环

> ID：14567940
> 
> 赞同：0
> 
> 时间：2013-01-28T17:43:27.370
> 
> 标签：javascript, arrays, image, canvas, for-loop

收集到阵列中的图像相互叠加以完成最终图片。问题是一旦图像加载，循环似乎会继续运行，因为几乎不可能滚动或发生任何其他动画。

```
function map(id){
var img_elem = document.getElementById("img_elem");
var ctx = document.getElementById('canvas').getContext('2d');
var name = <?php echo json_encode($sorted_array);?>;
var elements=<?php echo $filecount?>;
var image= [];
for(i=0;i<elements;i++){
image[i]= new Image();
image[i].src = "images/"+name[i];
image[i].setAttribute("class","container");
image[i].setAttribute("style","position:absolute");
ctx.drawImage(image[i],1,1);
alert(image[i].src);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:54:22.010

这可能很慢的一个原因是您重复地将元素附加到 DOM，这通常会导致浏览器重绘页面。

您可以通过将更改分组并进行一次添加来避免很多情况，如下所示：

```
var buffer = [];
for(i=0;i<elements;i++){
    buffer.push("<img ",
        "src='images/",name[i],"' ",
        "class='container' ",
        "style='position:absolute' ",
        "id='",name[i],"'/>");
}
document.getElementById(id).innerHTML = buffer.join(""): 
```

# android - 扩展 android 内置应用程序

> ID：14567944
> 
> 赞同：3
> 
> 时间：2013-01-28T17:43:54.800
> 
> 标签：android, operating-system

在过去的几个月里，我一直在搞乱 android 编程，现在在开发了几个应用程序之后，我想扩展现有的 android 应用程序，以便我可以更改他们的菜单添加更多功能等。为此我有两个问题：1 . 我可以将这样的“驱动程序”作为应用程序上传到android市场吗？即使在安装之后，它所做的只是为 android 操作系统添加更多功能？2\. 我在哪里可以获得更多关于我应该如何以及应该阅读\学习什么的信息？

提前Tnx。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T17:51:19.867

如果您想对系统应用程序进行某些扩展，那么...这很困难。您必须通过编辑系统应用程序并添加新的 smali 代码来实现这一点。问题是，它只能在您的手机上工作，或者在具有确切系统的手机上工作。例如，如果您想从三星手机向 Phone.apk 添加新功能，则生成的应用程序将仅适用于具有相同 Phone.apk 的三星手机。另外，手机必须root，不能从play安装...因为它不能替换系统应用程序。

另一件要考虑的事情是[Xposed 框架，用于替换应用程序内部的功能](http://forum.xda-developers.com/showthread.php?t=1574401)

您可以在此处阅读更多相关信息。

总之，浪费时间扩展系统应用程序并不容易或愉快。例如，您可以尝试为 CM 开发新的模组。

# language-agnostic - 使用数字执行国际化/本地化时的陷阱？

> ID：14567945
> 
> 赞同：0
> 
> 时间：2013-01-28T17:43:56.220
> 
> 标签：language-agnostic, character-encoding, internationalization, right-to-left

在开发需要使用各种本地化的应用程序时，特别是使用“从右到左”文本时，是否存在数字也需要转换为“从右到左”的情况？

我不是语言学者，但我知道我熟悉的 RTL 语言在 LTR 中显示它们的数字。

*例如（使用谷歌翻译）：*

```
I have 345 apples. 
```

阿拉伯语：

```
لدي 345 التفاح. 
```

所以，我有两个问题：

1.  是否有可能遇到使用 RTL 数字的语言？
2.  在这种情况下应该如何处理国际化？

或者，

仅使用西方阿拉伯字符从左到右读取数字是“公认的规范”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:51:15.937

数字通常会按照您的意思进行翻译。即使在以不同方向阅读的语言中，西方阿拉伯数字通常也能被用户识别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:12:47.153

在从右到左的大字体中——阿拉伯语、希伯来语和塔纳语——数字总是从左到右排列。（当我说“阿拉伯语”时，我指的是所有用阿拉伯语书写的语言——阿拉伯语、波斯语、乌尔都语、帕斯托语和许多其他语言。）

希伯来语和 Thaana 始终使用欧洲数字，与英语相同的 0-9 设置。那里没什么可做的，因为 Unicode 会自动负责正确地对数字进行排序。但请参阅下面关于隔离的评论。

也可以在阿拉伯语中使用欧洲数字；例如，阿拉伯语维基百科使用它们。但是，阿拉伯语文本经常使用不同的数字集 - [https://en.wikipedia.org/wiki/Eastern_Arabic_numerals](https://en.wikipedia.org/wiki/Eastern_Arabic_numerals)。这取决于您的用户的偏好。另请注意，在波斯语中，数字略有不同。从从右到左布局的角度来看，它们的行为与欧洲数字几乎相同，尽管数学符号的行为略有不同 - 例如，减号可以在另一边。这里有一些微妙之处，但它们大多是边缘情况。

在希伯来语和阿拉伯语中，您可能会遇到双向隔离问题。例如，如果您有一个希伯来语段落，其中您有一个英文单词，并且在单词之后您有数字，则数字将出现在单词的右侧，尽管您可能希望它们出现在左侧。这就是 Unicode 双向算法默认工作的方式。要解决此类问题，您可以使用 Unicode 控制字符 RLM 和 LRM。如果您使用的是 HTML5，您还可以为此使用 <bdi> 标记，以及 CSS 规则“unicode-bidi:isolate”。这些 CSS 和 HTML5 解决方案非常强大和优雅，但并非所有浏览器都支持。

我知道一个数字从右到左运行的脚本：N'Ko，它用于非洲的某些语言。我实际上看到了用它写的网站，但它远不如希伯来语和阿拉伯语常见。

最后，如果您使用 JavaScript，您可以使用免费的 jquery.i18n 库进行自动数字转换。请参阅[https://github.com/wikimedia/jquery.i18n](https://github.com/wikimedia/jquery.i18n)。（免责声明：我是这个库的开发人员之一。）

# php - Sublime PHP 方法签名和自动完成描述

> ID：14567950
> 
> 赞同：6
> 
> 时间：2013-01-28T17:44:13.077
> 
> 标签：php, autocomplete, sublimetext2, method-signature, sublimetext3

我真的很喜欢 sublime，但我有 1 个主要问题阻止我从 Netbeans 迁移：

我需要 sublime 自动完成来显示函数描述和方法签名（我正在使用 Yii 框架，我需要确切地知道每个函数的作用、返回和传递的参数类型）。

我尝试安装几个插件，但没有一个工作......如果有这样的方式，那么我错过了它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T06:58:06.557

你正好赶上[Sublime Text 3](http://www.sublimetext.com/blog/articles/sublime-text-3-beta)！

> **符号索引。**Sublime Text 现在会扫描项目中的文件，并为哪些文件包含哪些符号建立一个索引。这支持了 Project 中的新功能 Goto Definition 和 Goto Symbol，这两者都可以从 Goto 菜单中获得。Goto Definition 将您带到插入符号下的符号定义，而 Goto Symbol in Project 提示您通过模糊匹配选择符号，然后将您带到该符号的定义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T17:56:09.240

您可能想尝试代码 intel 插件

[在这里](https://github.com/Kronuz/SublimeCodeIntel)可用

否则你可以使用 zencoding 查看[这里](http://urbangiraffe.com/2011/08/15/sublime-text-2-for-php/)的提示

或者 alt + click 应该这样做！

这是一个相对较[新的插件](https://github.com/timdouglas/sublime-find-function-definition)

# excel - excel中的ISERROR函数以避免#Value与预期的日期结果

> ID：14567951
> 
> 赞同：-3
> 
> 时间：2013-01-28T17:44:13.757
> 
> 标签：excel, excel-2007, excel-formula

我需要以下带有`ISERRoR`函数的公式来避免：

> 与数字格式相比，日期格式的预期结果值错误。

```
=IF(DAY(P20)>10,ABS(MONTH(P20)+1&"/1/"&YEAR(P20)),ABS(MONTH(20)&"/1/"&YEAR(P20))) 
```

在 P20 中，我将插入一个日期，例如：`09/24/2013`我目前在 P21 中得到的结果是，`41548`但预期的结果是`10/01/2013`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:22:14.403

使用您选择的日期格式格式化结果单元格。

# ruby - ruby中单运算符等号的目的是什么？

> ID：14567958
> 
> 赞同：2
> 
> 时间：2013-01-28T17:44:53.153
> 
> 标签：ruby

我已经看过几次了：

```
if foo = bar
  # do something
end 
```

这在语法上合适吗？有区别吗？：

```
if foo == bar
   # do something
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T17:48:48.873

```
if foo = bar
end 
```

可以这样解读：

```
foo = bar
if foo
  # do stuff
end 
```

ruby 中的赋值运算符返回一个已分配的值。这使得它在某些情况下非常有用，这要归功于 ruby​​ 对什么是真的什么不是真的有非常简单的规则。

这是一个在条件中使用赋值的典型示例（虽然不是一个好的示例，因为您应该使用文件[`each_line`](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-each_line)和块，但您明白了）：

```
f = File.open(...)
while line = f.gets
  # do something with a line from file
end 
```

另一方面，这是一个比较运算符，而不是赋值运算符。如果`foo`和`bar`相等，它返回一个布尔值。

```
if foo == bar 
```

[编辑] 一个例子说明使用这种模式可能会对代码的冗长程度产生真正的影响。看看这个嵌套的条件表达式：

```
a = f(1)
result = if a
  b = g(a)
  if b
    c = h(b)
    if c
      2 * c
    end
  end
end 
```

使用这种模式，我们可以改写（注意我如何[围绕 assignments](https://github.com/bbatsov/ruby-style-guide)）：

```
result = if (a = f(1)) && (b = g(a)) && (c = h(b))
  2 * c 
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T17:48:04.957

它们完全不同。第一个将分配 to 的值，`bar`然后`foo`评估该值是否为真（不是`nil`或`false`）。第二个是直接比较。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T17:48:11.743

第一个将 bar 的值分配给 foo。之后， foo 中的新值被评估为真或假。

第二个检查，如果 foo 和 bar 相同。

你在第一个中失去了 foo 的价值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T17:47:12.850

这是有效的代码，但可能是一个无意的错误。

有些人可能会尝试对他们的代码感兴趣，并在同一行中同时执行赋值和 if 检查（如您的第一个示例），但它与常见的错字非常相似，因此它被称为“坏代码”之一为了清楚起见，应该避免气味。

# javascript - 通过href与Bootstrap模式冲突滚动到元素

> ID：14567959
> 
> 赞同：1
> 
> 时间：2013-01-28T17:44:53.963
> 
> 标签：javascript, jquery, twitter-bootstrap, modal-dialog, scrolltop

我有这段代码，当它们的 ID 放在 hrefs 中时，它会滚动到特定元素（[这里是演示](http://php.quicoto.com/how-to-scroll-smoothly-with-jquery/)）：

```
$('a[href*=#]:not([href=#])').click(function () {
            if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '')
                || location.hostname == this.hostname) {

                var target = $(this.hash);
                target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
                if (target.length) {
                    $('html,body').animate({
                        scrollTop: target.offset().top - 125
                    }, 1000);
                    return false;
                }
            }
        }); 
```

问题是，我认为它与 Bootstrap JS 组件冲突，尤其是模式。现在，打开我的模态似乎不像以前那样工作：

关联：

```
<a href="#myModal" role="button" class="btn btn-primary btn-large" data-toggle="modal">Sign-up for Beta!</a> 
```

JS：

```
 $('#myModal').modal({
                keyboard: true,
                show: false,
                backdrop: 'static'
            }); 
```

元素：

```
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
</div> 
```

谁能帮我解决这个冲突？任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:58:45.790

我实际上通过反复试验找到了答案。

我注意到第一行 $('a[href*=#]:not([href=#])') 实际上会查找所有锚元素，这有点糟糕。通过对 HTML 5 数据属性的一些研究，我得到了它的工作：

代替：`$('a[href*=#]:not([href=#])')`

和：`$('[data-toggle="elementscroll"]')`

接下来要做的是在每个锚链接上放置 HTML 5 属性，如下所示：

```
<a href="#Seamless" data-toggle="elementscroll">Seamless</a> 
```

希望这可以帮助那里的任何人！

# django - Yuglify 压缩器无法从通过 npm 安装的包中找到二进制文件

> ID：14567960
> 
> 赞同：17
> 
> 时间：2013-01-28T17:44:55.010
> 
> 标签：django, npm, django-pipeline, yuglify

我有一个全新的 virtualenv 环境，并且拥有最新的 django-pipleline。

使用 Closure 的 JS 压缩效果很好，但是使用 Yuglify 的 CSS 压缩失败，由于节点错误：

```
STATICFILES_STORAGE = 'pipeline.storage.PipelineCachedStorage'
PIPELINE_JS_COMPRESSOR = 'pipeline.compressors.closure.ClosureCompressor'
PIPELINE_CSS_COMPRESSOR = 'pipeline.compressors.yuglify.YuglifyCompressor' 
```

当我尝试收集静电时：

```
./manage.py collectstatic 
```

它说：

```
pipeline.compressors.CompressorError: /usr/bin/env: node: No such file or directory 
```

但是我已经清楚地安装了 yuglify 甚至是全局的：

```
sudo npm -g install yuglify

/usr/local/bin/yuglify -> /usr/local/lib/node_modules/yuglify/bin/yuglify
yuglify@0.1.2 /usr/local/lib/node_modules/yuglify 
├── uglify-js@1.3.4
├── ycssmin@1.0.1
└── nopt@2.1.1 
```

尝试在设置中设置 biney 也无济于事：

```
PIPELINE_YUGLIFY_BINARY = '/usr/local/bin/yuglify' 
```

我仍然得到同样的错误。为什么现在 npm 出现这样的问题？有什么我必须额外设置的吗？

或者有没有办法用 pip 安装 yuglify？

非常感谢，

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-28T18:31:18.877

经过3个小时的痛苦，我找到了解决办法。

发生这种情况是因为命名错误，如果您从包管理器 (npm) 安装，您的 bin 可能被称为 nodejs，因此您只需像这样对它进行符号链接：

```
ln -s /usr/bin/nodejs /usr/bin/node 
```

现在它正在工作。旧版本没有发生这种情况，它是新的。但至少它又开始工作了。我希望这对其他人有帮助。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-27T13:35:37.187

就我而言，uglify **-js**和**cssmin**都没有安装。

所以我使用以下命令重新安装了它们，然后它又开始工作了。

```
sudo npm install -g cssmin uglify-js 
```

# tsql - T-SQL 在 sql_variant 列上创建索引时需要帮助

> ID：14567962
> 
> 赞同：0
> 
> 时间：2013-01-28T17:45:00.127
> 
> 标签：tsql, sql-server-2012, indexing

我需要一些帮助来在表上创建索引。该表具有以下结构：

```
RowsetID INT
Col001 SQL_VARIANT
Col002 SQL_VARIANT
....
Col255 SQL_VARIANT 
```

该表以下列方式存储大量信息（数百万行）：

```
RowsetID    Col001  Col002  Col003  Col004  ... Col255
1           1       Ivan    10      NULL        NULL
1           2       Petar   11      NULL        NULL
...
1           n       Petko   m       NULL        NULL
...
2           10      Germany 120     NULL        NULL
2           11      Japan   121     NULL        NULL
...
2           m       Poland  120     NULL        NULL
...
4           120     Europe          NULL        NULL
4           121     Asia            NULL        NULL 
```

请注意，这是一个示例数据，仅用于描述情况。这个想法是将不同的信息存储在单独的行集中。

现在，我需要像这样获取所有这些信息：

```
SELECT * 
FROM
(
    SELECT Col001,Col002,Col003
    FROM DataTable
    WHERE RowsetID=1
)AS RowsetOne
INNER JOIN
(
    SELECT Col001,Col002,Col003
    FROM DataTable
    WHERE RowsetID=2
)AS RowsetTwo ON RowsetOne.Col003=RowsetTwo.Col001
INNER JOIN
(
    SELECT Col001,Col002,Col003
    FROM DataTable
    WHERE RowsetID=4
)AS RowsetFour ON RowsetTwo.Col003=RowsetFour.Col001
... 
```

在我的实际情况中，我需要加入许多行集和列，它们是数百万行，因此包含上述选择的视图很慢。

我决定像这样在表上创建索引：

```
CREATE UNIQUE NONCLUSTERED INDEX [PersonsPersionID] ON DataTable
(
    Col001
)
WHERE RowsetID=1

CREATE UNIQUE NONCLUSTERED INDEX [PersonsCountryID] ON DataTable
(
    Col003
)
WHERE RowsetID=1

...

CREATE UNIQUE NONCLUSTERED INDEX [CountriesCountryID] ON DataTable
(
    Col001
)
WHERE RowsetID=2 
```

我的想法是在我用作连接列的每一列上创建索引，但最终没有实现优化。

你能建议我应该创建什么类型的索引吗？我花了很多时间阅读 T-SQL 索引[文档](http://msdn.microsoft.com/en-us/library/ms188783.aspx)，但更多的是关于您可以创建什么类型的索引，而不是何时使用它们。

# python - 如何将列表中的元素分组为元组列表？

> ID：14567965
> 
> 赞同：0
> 
> 时间：2013-01-28T17:45:02.300
> 
> 标签：python, tuples

> **可能重复：**
> [在块中迭代列表的最“pythonic”方式是什么？](https://stackoverflow.com/questions/434287/what-is-the-most-pythonic-way-to-iterate-over-a-list-in-chunks)

这是我的问题的一个例子：

```
l = [1,2,3,4,5,6,7,8,9] 
```

然后如果groupsize = 3，我想要：

```
l1 = [(1,2,3),(4,5,6),(7,8,9)] 
```

如果groupsize = 4，那么，

```
l1 = [(1,2,3,4),(5,6,7,8),(9,)] 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:48:17.513

```
In [1]: def group(l, size):
   ...:     return [tuple(l[i:i+size]) for i in range(0, len(l), size)]
   ...: 

In [2]: l = [1,2,3,4,5,6,7,8,9]

In [3]: group(l, 3)
Out[3]: [(1, 2, 3), (4, 5, 6), (7, 8, 9)]

In [4]: group(l, 4)
Out[4]: [(1, 2, 3, 4), (5, 6, 7, 8), (9,)] 
```

如果您决定想要一个生成器，您可以更改`[]`为并获得与[此答案](https://stackoverflow.com/a/312464/1258041)（和[此](https://stackoverflow.com/a/1751478/1258041)`()`答案）等效的答案（转换为元组除外）。

# kendo-ui - 迭代时，选定网格行的索引为 -1

> ID：14567966
> 
> 赞同：1
> 
> 时间：2013-01-28T17:45:06.223
> 
> 标签：kendo-ui, kendo-grid

我的要求是遍历网格的所有选定行，并在数据源上设置一个具有给定值的字段。我有以下代码并遍历 kendo ui 网格的选定行。

```
$('#grid').data("kendoGrid").select().each(function () {
                if($('#grid').data().kendoGrid.dataSource.data()[$(this).index()] != null ){

                    var myItem = $('#grid').data().kendoGrid.dataSource.data()[$(this).index()];
                    myItem.set(myFiled, myValue);
                    leg.push(myItem);

                }
            }); 
```

问题是，在我的代码到达 myItem.set(myFiled, myValue); 行之后 索引得到值 -1 并且即使在我的下一次迭代中它也会保持这个值。

删除 .set 方法时，我发现我没有相同的行为，并且我的索引保持正确的值。为什么会这样？

此外，这行之间有什么区别：

i) $('#grid').data("kendoGrid").dataItem($(this)).set(myField, myValue);

ii) $('#grid').data().kendoGrid.dataSource.data()[$(this).index()].set(myField, myValue);

我知道第一个与网格上的值有关。不幸的是，我从未设法设置 (i) 所示的值。第 (i) 行显示的代码似乎根本不适用于 set 函数。

我从这里拿了我的例子[Refresh a single Kendo grid row](https://stackoverflow.com/questions/13613098/refresh-a-single-kendo-grid-row) and [Kendo-UI grid Set Value in grid with Javascript](https://stackoverflow.com/questions/13326316/kendo-ui-grid-set-value-in-grid-with-javascript) for case (i) and (ii) 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:10:33.477

我找到了解决方案/解决方法。虽然我仍然不明白为什么剑道网格索引有这种行为。

而不是在我的迭代中使用 myItem.set(myField, myValue); 我将代码更改为 myItem[myField] = myValue;

使用此方法更改了值，未触发更改事件（根据需要），并且索引也根据需要保持其值。

# c# - WPF 哪个控件调用了以自定义样式定义的事件

> ID：14567970
> 
> 赞同：0
> 
> 时间：2013-01-28T17:45:13.253
> 
> 标签：c#, wpf, events, button, wpf-controls

我已经为 WPF 中的滑块控件编写了一个自定义样式（包括模板），它里面有 2 个按钮（'MinusBtn' 和 "PlusBtn"）。

现在，我想为 4 个不同的滑块使用相同的滑块自定义样式，并且当我在 4 个滑块中的每个滑块（“MinusBtn_Clicked”事件和“PlusBtn_Clisked”事件）上按下它时，我希望按钮做同样的事情。**但我需要知道哪个滑块调用了该事件。**

由于按钮以通用样式配置，因此我无法通过它们的父级知道它。我怎样才能解决这个问题？我可以向这个事件的委托添加参数吗？

这是我的自定义样式：

```
 <Style x:Key="MyCustomStyleForSlider" TargetType="{x:Type Slider}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Slider}">  
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="10.5"/>
                            <RowDefinition Height="Auto" MinHeight="{TemplateBinding Slider.MinHeight}"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="47*"/>
                            <ColumnDefinition Width="331*"/>
                            <ColumnDefinition Width="47*"/>
                        </Grid.ColumnDefinitions>

                        <TickBar Name="BottomTick" SnapsToDevicePixels="True" Grid.Row="2" Fill="{TemplateBinding Foreground}"
                                Placement="Bottom"
                                Height="4"
                                Visibility="Collapsed" />

                        <Grid x:Name="JustTrack" Height="20" Width="335" Grid.RowSpan="1" Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="1">
                            <Track Grid.Row="1" Name="PART_Track">
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton Style="{StaticResource DecreaseSliderButtonStyle}"  />
                                </Track.DecreaseRepeatButton>
                                <Track.Thumb>
                                    <Thumb Style="{StaticResource SliderThumbStyle}" />
                                </Track.Thumb>
                                <Track.IncreaseRepeatButton>
                                    <RepeatButton Style="{StaticResource SliderButtonStyle}" />
                                </Track.IncreaseRepeatButton>
                            </Track>
                        </Grid>
                    <Grid x:Name="Minus" Grid.Column="0" Grid.RowSpan="3" Width="47" Height="40">
                            <Button x:Name="MinusBtn" Click="MinusBtn_Click" >
                                <Button.Template>
                                    <ControlTemplate>
                                        <Ellipse Height="25" Width="25" Fill="Transparent"></Ellipse>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>
                        </Grid>
                        <Grid x:Name="Plus" Grid.Column="2" Grid.RowSpan="3" Width="47" Height="40">
                            <Button x:Name="PlusBtn" Click="PlusBtn_Click">
                                <Button.Template>
                                    <ControlTemplate>
                                        <Ellipse Height="25" Width="25" Fill="Transparent"></Ellipse>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>
                        </Grid>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="TickPlacement" Value="BottomRight">
                            <Setter TargetName="BottomTick" Property="Visibility" Value="Visible"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:56:12.813

如果要使用按钮增加或减少滑块的值。使用按钮的 Command 属性：

```
<Grid x:Name="Minus" Grid.Column="0" Grid.RowSpan="3" Width="47" Height="40">
    <Button x:Name="MinusBtn" Command="Slider.DecreaseSmall">
        <Button.Template>
            <ControlTemplate>
                <Ellipse Height="25" Width="25" Fill="Transparent"></Ellipse>
            </ControlTemplate>
        </Button.Template>
    </Button>
</Grid>
<Grid x:Name="Plus" Grid.Column="2" Grid.RowSpan="3" Width="47" Height="40">
    <Button x:Name="PlusBtn" Command="Slider.IncreaseSmall">
        <Button.Template>
            <ControlTemplate>
                <Ellipse Height="25" Width="25" Fill="Transparent"></Ellipse>
            </ControlTemplate>
        </Button.Template>
    </Button>
</Grid> 
```

或者，如果您真的想要事件处理程序中的滑块，您可以执行以下操作：

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    FrameworkElement frameworkElement = (FrameworkElement)sender;
    Slider slider = (Slider)frameworkElement.TemplatedParent;
} 
```

# exec - ccnet exec 块返回值？

> ID：14567981
> 
> 赞同：0
> 
> 时间：2013-01-28T17:46:07.300
> 
> 标签：exec, cruisecontrol.net, conditional-statements

我正在使用 ccnet 1.6 并且在某些概念上遇到了麻烦。我使用返回成功或失败的批处理文件构建我的 .NET 解决方案。之后还有为单元测试构建解决方案的步骤和运行批处理以自行执行单元测试的步骤。我想知道是否有一种方法可以访问 ccnet 从第一次构建返回的返回值，以便我可以有条件地运行步骤来构建联合测试并运行它们。看过了，找到了很多关于ccnet的资料，但是还没有看到怎么从ccnet得到这个返回值，肯定是我错过的一件简单的事情。

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:19:28.917

不是直接的。您可以使用[Conditional Task](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Conditional_Task)。但是我的方法是在单独的 CC.net 项目中设置单元测试，并在构建成功时使用[项目触发器启动。N](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Project_Trigger)

也许你想研究一下`NAnt`，`Python`或者另一种脚本语言——我对批处理文件的经验很差。

# xpath - 简单 importXML 查询的 Xpath 问题

> ID：14567985
> 
> 赞同：0
> 
> 时间：2013-01-28T17:46:17.550
> 
> 标签：xpath, web-scraping, google-sheets, google-sheets-importxml

以下内容未在 Google 电子表格中返回任何数据，即使 //h1 xpath 查询使用 Chrome 的 XPath Helper 扩展验证 OK：

```
=importXML("http://www.amazon.com/gp/offer-listing/1118358708","//h1") 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-06-13T01:14:48.937

Google 漫游器尊重 robots.txt 文件，其中包括：

```
Disallow: /gp/offer-listing/ 
```

# jquery - jQuery的addClass方法如何添加回调函数？

> ID：14567990
> 
> 赞同：19
> 
> 时间：2013-01-28T17:46:24.127
> 
> 标签：jquery, addclass

我正在使用来自 Google 和 Markdown 的 Prettify，我希望每次在 Markdown 中找到`pre`添加的代码`textarea`来再次调用该`prettyPrint()`函数。

这是我的实际代码：

```
if($('#wmd-preview').length > 0) {
  $('#wmd-preview').on('DOMNodeInserted DOMNodeRemoved',function(){
    $(this).find("pre").not('.prettyprint').addClass("prettyprint");
  });
} 
```

但我想要类似的东西：

```
$(this).find("pre").not('.prettyprint').addClass("prettyprint",function(){
  prettyPrint();
}); 
```

有没有可能的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-28T18:40:13.330

您可以扩展`.addClass()`jquery 的方法，让它接受一个回调函数：

```
;(function ($) {
    var oAddClass = $.fn.addClass;
    $.fn.addClass = function () {
        for (var i in arguments) {
            var arg = arguments[i];
            if ( !! (arg && arg.constructor && arg.call && arg.apply)) {
                setTimeout(arg.bind(this));
                delete arguments[i];
            }
        }
        return oAddClass.apply(this, arguments);
    }

})(jQuery); 
```

然后像往常一样使用它：

```
 $('pre:not(.prettyprint)').addClass('prettyprint',prettyPrint); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-28T17:58:42.267

据我了解，你需要这个：

```
$(this).find("pre").not('.prettyprint').each(function(){
   $(this).addClass("prettyprint");
   prettyPrint();
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T17:49:54.713

jQuery 函数在`addClass`参数中没有回调。

[在文档](http://api.jquery.com/addClass/)中阅读有关此内容的更多信息。

我认为这对你有用：

```
// prettyprint class is added
$(this).find("pre").not('.prettyprint').addClass("prettyprint");
// after prettyprint class is added, prettyPrint function is called
prettyPrint(); 
```

# java - 如何防止弹出基本身份验证表单

> ID：14567991
> 
> 赞同：2
> 
> 时间：2013-01-28T17:46:26.317
> 
> 标签：java, javascript, jsf, basic-authentication

我有一个 Java 应用程序，JSF 使用 javascript 连接到需要基本身份验证的网站。

我想要做的事情与我在弹出表单中输入用户名和密码时发生的事情完全相同。

我已经尝试了许多我在该主题上看到的不同方法，但它们都不起作用。奇怪的是，ajax 调用返回了一个响应，但是我还是得到了 windows 安全弹出窗口。我需要以某种方式缓存它吗？例如下面的两个代码我都没有开始工作。下面的一个使用base64

```
$.ajax(
                {
                  'password' : password,
                  'username' : username,
                  'url'      : url,
                  'type'     : 'GET',
                  'success'  : function(){ alert("success");  },
                  'error'    : function(err){ alert('Bad Login Details' + err);},
                }
              );

$.ajax({
            url : url,
            method : 'GET',
            beforeSend : function(req) {
                req.setRequestHeader('Authorization', auth);
            },
            error : function(xhr, ajaxOptions, thrownError) {

                alert('Invalid username or password. Please try again. thrownError:' + thrownError + 'xhr:' + xhr + 'ajaxOptions:'+ajaxOptions);

            },
            sucess: function(result) {
                alert('done');
            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:38:25.760

如果您可以控制服务器端代码，则可以滚动您自己的 Authenticate 标头以防止浏览器弹出标准基本挑战。例如，如果您的标题是：

```
WWW-Authenticate: Basic realm="realm here" 
```

然后浏览器会弹出挑战。但如果你的标题是：

```
WWW-Authenticate: my-basic realm="insert realm" 
```

那么浏览器就不会弹出401挑战了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T17:54:13.467

您可以采用以下格式在 URL 中对基本身份验证凭据进行编码：

[https://username:password@www.example.com/abc](https://username:password@www.example.com/abc)

所以以同样的方式调整你的 ajax url。

# python - 你如何将特定文件移动到匹配的文件夹中

> ID：14567993
> 
> 赞同：0
> 
> 时间：2013-01-28T17:46:33.323
> 
> 标签：python, file, select, move, directory

我已经编写了一个脚本来帮助我将所需的文件移动到从文件列表中创建的相应文件夹中。我知道描述很模糊，但我的脚本是：

```
import os
from os import listdir
import dircache
import sys
import shutil
import dircache
import glob

#selecting the directory to work from
path = "C:\\Users\\hra\\Desktop\\fg"
dirList=os.listdir(path)

#print file names in directory
for fname in dirList:
    print fname

myList2 = sorted(dirList, key=lambda x:x[0:3])
oldList = [x[0:2] for x in myList2]
newList = list(set(oldList))
print "newList =", newList

#first check
#print "my list = ", myList2
#print "my list letters = ", oldList
print "unique characters = ", newList

root_path = "C:\\Users\\hra\\Desktop\\fg"
folders = newList
for folder in folders:
    os.mkdir(os.path.join(root_path,folder))

#selecting unique names from the list of files
from itertools import groupby
the_list = oldList
gb = groupby(sorted(the_list))
print [(i,len(list(j))) for i,j in gb]

#counters for checking
#fCounter = len(glob.glob1("C:\\Users\\hra\\Desktop\\fg","fg*"))
#mCounter = len(glob.glob1("C:\\Users\\hra\\Desktop\\fg","m*"))
#bCounter = len(glob.glob1("C:\\Users\\hra\\Desktop\\fg","b*"))
nLCounter =  len(newList)

#print "unique character count =", nLCounter
#print "f = ", fCounter
#print "m = ", mCounter
#print "b = ", bCounter 
```

这个脚本的重点是允许我根据每个文件的文件名自动将许多文件组织到单独的文件夹中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:50:12.957

[shutil](http://docs.python.org/2/library/shutil.html)模块具有执行您想要的功能。

# xaml - 合并 XAML 视图？

> ID：14567997
> 
> 赞同：0
> 
> 时间：2013-01-28T17:46:58.607
> 
> 标签：xaml, windows-8, winrt-xaml, semantic-zoom

我来自 Android/iOS 背景，我正在考虑构建一个使用 SemanticZoom 的登录页面（使用网格），并且有 6 列包含在一个长的水平滚动中。

每个网格列将具有不同的组件并具有不同的宽度：

例如

*   第一列将有一堆网格图块和一个带有文本的堆叠图像
*   第二列是带有文档缩略图的网格
*   第三列是视频列表等。

我想知道是否有一种方法可以合并 XAML 视图（例如在 Android 中），或者是否有人可以提出一种有效的方法来构建这个登录页面？