# StackOverflow 问答 14787000-14787999

# assembly - 在 VSYASM 中使用 win64 展开数据指令

> ID：14787000
> 
> 赞同：0
> 
> 时间：2013-02-09T10:10:07.237
> 
> 标签：assembly, x86-64, yasm

代码一切正常，但后来我添加[了创建展开数据的指令](http://www.tortall.net/projects/yasm/manual/html/objfmt-win64-exception.html)，而 YASM 开始拒绝汇编我的代码。

构建设置适用于 x64，如自动生成的命令行中的“-f x64”所示：`"C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\"vsyasm.exe -Xvc -f x64 -o "x64\Debug\\" -l "" -P "" --mapdir= "" -E "" --prefix "" --suffix "" -rnasm -pnasm -m amd64`

通常`-m`开关不在那里，但我添加它是为了很好的衡量。那没有帮助。

`-f`将switch的参数更改为`win64`也无济于事：`"C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\"vsyasm.exe -Xvc -f win64 -o "x64\Debug\\" -l "" -P "" --mapdir= "" -E "" --prefix "" --suffix "" -rnasm -pnasm -m amd64`

在这段代码中，

```
 bits 64
    global s24_fl32_sse2_win64
s24_fl32_sse2_win64:
    proc_frame s24_fl32_sse2_win64
    sub rsp, 8 + 4 * 16
    [alloc_stack 8 + 4 * 16]
    movdqa [rsp], xmm6
    [save_xmm128 xmm6, 0]
    [endprolog] 
```

VSYASM 抱怨函数标签的重新定义，这可能意味着它没有被识别`proc_frame`为指令。它也说`error: unrecognized directive 'alloc_stack'`和相同的`save_xmm128`。它不抱怨`endprolog`。

放入`proc_frame`括号会使第一个错误消失（标签重新定义），但手册说不带括号使用它，无论如何它并不能解决问题。

我该如何解决？最好以创建适当展开数据的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:57:12.653

我认为`PROC_FRAME`定义了标签，所以你不需要这`s24_fl32_sse2_win64:`条线——还有一些我在`global s24_fl32_sse2_win64`后面看到的例子`PROC_FRAME`——我不确定这是否是必需的。

此外 - `alloc_stack`and `save_xmm128`（不带方括号）是宏（它们处理堆栈操作本身和相关的展开原语） - 这些的展开原语版本是`[allocstack ....]`and `[savexmm128....]`。

# c# - 按两个条件对列表进行分组 C#

> ID：14787006
> 
> 赞同：1
> 
> 时间：2013-02-09T10:11:11.543
> 
> 标签：c#, linq, list

我有一个清单

```
Class =>       Second      Third   Second  Fourth  Fifth  Second

Position =>     2           3       2       5        1     3 
```

我想创建具有相同类和相同位置的新列表

即新列表

```
Class  =>      Second       Second

Postion =>       2             2

Class  =>         Second

Position =>         3

Class  =>          Third

Position =>          3 
```

等等

我可以在父列表上使用多个 GroupBy 来生成这些不同的列表，还是首先我应该 GroupBy "Class" 然后按 "Position" ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T10:17:13.813

...以及*如何*同时按两件事分组：

```
var groupedByTwoThingsAtOnce = myList
    .GroupBy(i => new { Class = i.Class, Position = i.Position }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-09T10:14:12.727

`position`一次分组`class`。一`GroupBy()`。

例如：

```
var groupedByTwoThingsAtOnce = myList
   .GroupBy(i => new { Class = i.Class, Position = i.Position }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-09T10:20:23.773

您可以使用匿名类型进行分组，然后使用 GroupBy 任意数量的属性。可能类似于以下内容

```
.GroupBy(item => new {ClassGroup = item.Class, PositionGroup = item.Position}) 
```

如果您可以使用匿名类型（例如，如果您需要从当前方法返回分组结果），您也可以尝试使用元组

```
.GroupBy(item => new Tuple<string, int>(item.Class, item.Position)) 
```

# java - 如何使用progressBar查看线程进度

> ID：14787016
> 
> 赞同：2
> 
> 时间：2013-02-09T10:12:26.707
> 
> 标签：java, multithreading, progress-bar

我第一次尝试弄乱progressBar。我想使用 progressBar 记录线程 --- 我确实看过[这个](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)，但它没有帮助。

有谁知道如何做到这一点？

我尝试使用 mp3 文件的字节来更新 progressBar，但没有成功。我想使用我用来播放 mp3 文件的线程。

这是mp3播放器的截图。

![我正在开发的 mp3 播放器](../Images/b49ec1facf0a0ce844b71f5d0710fd13.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:34:39.347

通常的问题是，在更新进度条的值时，您还需要适当的 GUI 刷新。前段时间我使用进度条进行了异步加载，在那里我使用了该教程。

请注意，对于压缩的音频文件，字节计数器的使用可能不准确，如果最初没有完全解压缩，可能不是您想要的。

当然，在开始播放之前，您必须使用[构造函数](http://docs.oracle.com/javase/7/docs/api/javax/swing/JProgressBar.html#JProgressBar%28int,%20int%29)和/或[setMaximum()](http://docs.oracle.com/javase/7/docs/api/javax/swing/JProgressBar.html#setMaximum%28int%29)、[setMinimum()](http://docs.oracle.com/javase/7/docs/api/javax/swing/JProgressBar.html#setMinimum%28int%29)和[setValue()适当地设置进度条的值和最小值和最大值，例如](http://docs.oracle.com/javase/7/docs/api/javax/swing/JProgressBar.html#setValue%28int%29)

```
progressBar.setMinimum(0);
progressBar.setMaximum(totalTime);
progressBar.setValue(0); 
```

但*不是*

```
progressBar.setValue(elapsedTime); 
```

从您的工作线程中，使用工作实例中的`PropertyChangeListener`接口和[setProgress()](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html#setProgress%28int%29)，`SwingWorker`如下例所示。只需根据您的需要调整代码：

[http://docs.oracle.com/javase/tutorial/uiswing/examples/components/ProgressBarDemoProject/src/components/ProgressBarDemo.java](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/ProgressBarDemoProject/src/components/ProgressBarDemo.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T10:15:10.273

如果允许 HTML5，您可以查看新的进度标签：[http ://www.w3schools.com/tags/tag_progress.asp](http://www.w3schools.com/tags/tag_progress.asp)

# c - 无法创建超过 1000 个文件（C++ 程序）

> ID：14787018
> 
> 赞同：0
> 
> 时间：2013-02-09T10:12:45.907
> 
> 标签：c, file

我一直在尝试用 C/C++ 创建一个程序，该程序会创建文件，直到进程停止。文件名从 0 开始并遵循等差数列。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

long cifre(long x) //returns the number of digits a number has
{
    int nr = 0;
    while (x != 0)
    {
        x = x/10;
        nr++;
    }
    return nr;
}

int main()
{
    long i=0;
    FILE* g;
    char* v;
    char buffer[1025];
    int j=0;

    for (j=0;j<1024;j++)
        buffer[j] = 'x';

    while (1)
    {   
        v = (char*)malloc(cifre(i)+10);
        snprintf(v,sizeof(v),"%ld",i);
        g = fopen(v,"w");
        fprintf(g,"%s",buffer);
        free(v);
        fclose(g);
        i++;
    }    
    return 0;
} 
```

问题是程序只创建了 1000 个文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T10:24:28.810

对`sizeof(v)`sprintf 的调用是 char 指针的大小，在您的情况下可能是 4，这意味着格式化的字符串最多包含 3 个字符，或从 0 到 999 的数字。要解决此问题，请使用您使用的相同长度分配内存：

```
 size_t len = cifre(i)+10;
    v = (char*)malloc(len);
    snprintf(v,len,"%ld",i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T10:25:04.250

`snprintf(v,sizeof(v)` doesn't make much sense because `sizeof(v)` returns the size of the pointer (`v` is `char*`), not the size of the dynamically allocated array. And so `snprintf()` is limited to only printing `sizeof(v)`-1 characters, or 3 digits and the NUL string terminator. 3 digits give you values from 000 to 999, exactly 1000.

# php - PHP 从 txt 文件中读取一个数字，然后进行计算

> ID：14787021
> 
> 赞同：1
> 
> 时间：2013-02-09T10:13:29.170
> 
> 标签：php, file

我有一个文件，它只有一行，数字从 1 到 40，我有以下代码：

```
$file_line = file('../countersaver.txt');
foreach ($file_line as $line) {
    $line_result = $line;
}

echo $line; 
```

我必须计算结果`$line - 1`并回显该结果。

但是当我这样做时：

```
$line = $line - 1; 
```

然后它显示`$line - 1`并且实际上并没有进行计算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-23T12:33:35.220

尝试更换

```
$line = $line - 1;
echo $line 
```

和

```
$line = ($line -1);
echo $line 
```

这将打印 19 而不是 20-1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T10:17:13.913

您的代码对文件内容的更改很弱。例如，如果有人添加了几行空行，您的代码将无法正常工作。试试这个：

```
$number = trim(file_get_contents('../countersaver.txt'));
echo $number - 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-30T15:39:18.800

我在这里没有看到批准的答案，但对于任何查看这篇文章的人来说，如果您有一个希望 PHP 将其读取为数字的变量，您可以使用 intval() 函数。此处涵盖的详细信息...

[http://php.net/manual/en/function.intval.php](http://php.net/manual/en/function.intval.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-12T00:34:31.623

尝试这个：

```
 $fin = @fopen("path to file", "r"); 

 if ($fin) { 
    while (!feof($fin)) { 
       $buffer = fgets($fin);         
    } 

    fclose($fin); 
 } 
```

# php - 脚本在 localhost 中有效，但在服务器上无效

> ID：14787022
> 
> 赞同：2
> 
> 时间：2013-02-09T10:14:01.480
> 
> 标签：php, javascript, jquery, html, localhost

我有这个问题，代码在本地主机上运行，​​但当我将它上传到服务器时没有。

我想实现这个： [Polaroid Photobar Gallery](http://tympanus.net/Tutorials/PolaroidPhotobarGallery/)

这是我网站的链接： [Zodiac 2013](http://zodiac.rgit.in/)

**注意：**您需要转到图库选项卡才能查看它。

**编辑：**请在谷歌浏览器中查看以获得最佳观看体验。

我尝试使用 FireBug 但没有帮助。使用 google chrome 的 Inspect Element 功能，我发现服务器不接受**文档**中编写的 javascript 代码。代码有点庞大，涉及许多文件，这是主要的：

**HTML 标记**

```
<h1>Polaroid Photobar Gallery</h1>
    <div id="pp_gallery" class="pp_gallery">

        <div id="pp_loading" class="pp_loading"></div>
        <div id="pp_next" class="pp_next"></div>
        <div id="pp_prev" class="pp_prev"></div>
        <div id="pp_thumbContainer">

            <div class="album">
                <div class="content">
                    <img src="../images/album1/thumbs/1.jpg" alt="../images/album1/1.jpg" />
                    <span>The Sixties by Tetsumo</span>
                </div>
                <div class="content">
                    <img src="../images/album1/thumbs/2.jpg" alt="../images/album1/2.jpg" />
                    <span>The Sixties by Tetsumo</span>
                </div>
                <div class="content">
                    <img src="../images/album1/thumbs/3.jpg" alt="../images/album1/3.jpg" />
                    <span>The Sixties by Tetsumo</span>
                </div>
                <div class="content">
                    <img src="../images/album1/thumbs/4.jpg" alt="../images/album1/4.jpg" />
                    <span>The Sixties by Tetsumo</span>
                </div>
                <div class="content">
                    <img src="../images/album1/thumbs/5.jpg" alt="../images/album1/5.jpg" />
                    <span>The Sixties by Tetsumo</span>
                </div>
                <div class="content">
                    <img src="../images/album1/thumbs/6.jpg" alt="../images/album1/6.jpg" />
                    <span>The Sixties by Tetsumo</span>
                </div>
                <div class="descr">
                    The Sixties
                </div>
            </div>

            <div class="album">
                <div class="content">
                    <img src="../images/album2/thumbs/1.jpg" alt="../images/album2/1.jpg" />
                    <span>Butterfly Girl</span>
                </div>
                <div class="content">
                    <img src="../images/album2/thumbs/2.jpg" alt="../images/album2/2.jpg" />
                    <span>Mmmmmmh Strawberries</span>
                </div>
                <div class="content">
                    <img src="../images/album2/thumbs/3.jpg" alt="../images/album2/3.jpg" />
                    <span>Polaroid in Picture</span>
                </div>
                <div class="content">
                    <img src="../images/album2/thumbs/4.jpg" alt="../images/album2/4.jpg" />
                    <span>Girl with brown hair</span>
                </div>
                <div class="content">
                    <img src="../images/album2/thumbs/5.jpg" alt="../images/album2/5.jpg" />
                    <span>Hair up</span>
                </div>
                <div class="content">
                    <img src="../images/album2/thumbs/6.jpg" alt="../images/album2/6.jpg" />
                    <span>Smiling Girl</span>
                </div>
                <div class="descr">
                    Portraits
                </div>
            </div>

            <div id="pp_back" class="pp_back">Albums</div>
        </div>
    </div>
    <div>
        <span class="reference">
            <a href="http://tympanus.net/codrops/2010/09/28/polaroid-photobar-gallery/">back to the Codrops tutorial</a>
        </span>
    </div> 
```

**CSS**

```
.pp_loading{
display:none;
position:fixed;
top:50%;
left:50%;
margin:-35px 0px 0px -35px;
background:#fff url(../images/icons/loader.gif) no-repeat center center;
width:70px;
height:70px;
z-index:999;
opacity:0.7;
-moz-border-radius:10px;
-webkit-border-radius:10px;
border-radius:10px;
}
.pp_next, .pp_prev{
cursor:pointer;
top:50%;
margin-top:-16px;
width:32px;
height:32px;
position:fixed;
text-align:center;
border:1px solid #111;
color:#fff;
-moz-box-shadow:0px 0px 3px #000;
-webkit-box-shadow:0px 0px 3px #000;
box-shadow:0px 0px 3px #000;
}
.pp_next{
right:-40px;
background:#222 url(../images/icons/next.png) no-repeat center center;
}
.pp_prev{
left:-40px;
background:#222 url(../images/icons/prev.png) no-repeat center center;
}
#pp_thumbContainer{
position:fixed;
bottom:0px;
left:0px;
height:65px;
width:100%;
}
#pp_thumbContainer .album{
position:absolute;
width:200px;
height:65px;
bottom:-90px;
}
.album .descr,
.pp_back{
position:absolute;
bottom:0px;
left:-16px;
background:#222;
text-align:center;
border:1px solid #111;
padding:5px;
cursor:pointer;
width:169px;
color:#fff;
cursor:pointer;
text-shadow:0px 0px 1px #fff;
-moz-box-shadow:1px 1px 4px #000;
-webkit-box-shadow:1px 1px 4px #000;
box-shadow:1px 1px 4px #000;
}
.pp_back{
text-transform:uppercase;
bottom:120px;
left:-100px;
width:80px;
}
#pp_thumbContainer .content{
position:absolute;
top:0px;
height:155px;
cursor:pointer;
}
#pp_thumbContainer img{
border:5px solid #fff;
-moz-box-shadow:1px 1px 7px #000;
-webkit-box-shadow:1px 1px 7px #000;
box-shadow:1px 1px 7px #000;
}
#pp_thumbContainer .content span{
display:none;
}
.pp_preview{
position:fixed;
top:150%;
left:50%;
}
.pp_preview img{
position:absolute;
top:0px;
left:0px;
border:10px solid #fff;
border-bottom:45px solid #fff;
-moz-box-shadow:1px 1px 7px #000;
-webkit-box-shadow:1px 1px 7px #000;
box-shadow:1px 1px 7px #000;
}
.pp_descr{
height:45px;
line-height:45px;
font-size:28px;
width:100%;
bottom:0px;
left:0px;
position:relative;
text-align:center;
color:#fff;
}
h1{
            font-size:50px;
            margin:50px;
            color:#333;
        }
        span.reference{
            font-family:Arial;
            position:fixed;
            right:10px;
            top:10px;
            font-size:15px;
        }
        span.reference a{
            color:#fff;
            text-transform:uppercase;
            text-decoration:none;
        } 
```

上面的代码包含在名为 style1.css 的外部文件中。你可以在我的网站上找到它。最后，**JAVASCRIPT**：

```
 $(function() {
            var ie          = false;
            if ($.browser.msie) {
                ie = true;
            }
            //current album/image displayed 
            var enableshow  = true;
            var current     = -1;
            var album       = -1;
            //windows width
            var w_width     = $(window).width();
            //caching
            var $albums     = $('#pp_thumbContainer div.album');
            var $loader     = $('#pp_loading');
            var $next       = $('#pp_next');
            var $prev       = $('#pp_prev');
            var $images     = $('#pp_thumbContainer div.content img');
            var $back       = $('#pp_back');

            //we wnat to spread the albums through the page equally
            //number of spaces to divide with:number of albums plus 1
            var nmb_albums  = $albums.length;
            var spaces      = w_width/(nmb_albums+1);
            var cnt         = 0;
            //preload all the images (thumbs)
            var nmb_images  = $images.length;
            var loaded      = 0;
            $images.each(function(i){
                var $image = $(this);
                $('<img />').load(function(){
                    ++loaded;
                    if(loaded == nmb_images){
                        //let's spread the albums equally on the bottom of the page
                        $albums.each(function(){
                            var $this   = $(this);
                            ++cnt;
                            var left    = spaces*cnt - $this.width()/2;
                            $this.css('left',left+'px');
                            $this.stop().animate({'bottom':'0px'},500);
                        }).unbind('click').bind('click',spreadPictures);
                        //also rotate each picture of an album with a random number of degrees
                        $images.each(function(){
                            var $this   = $(this);
                            var r       = Math.floor(Math.random()*41)-20;
                            $this.transform({'rotate'   : r + 'deg'});
                        });
                    }
                }).attr('src', $image.attr('src'));
            });

            function spreadPictures(){
                var $album  = $(this);
                //track which album is opened
                album       = $album.index();
                //hide all the other albums
                $albums.not($album).stop().animate({'bottom':'-90px'},300);
                $album.unbind('click');
                //now move the current album to the left 
                //and at the same time spread its images through 
                //the window, rotating them randomly. Also hide the description of the album

                //store the current left for the reverse operation
                $album.data('left',$album.css('left'))
                      .stop()
                      .animate({'left':'0px'},500).find('.descr').stop().animate({'bottom':'-30px'},200);
                var total_pic   = $album.find('.content').length;
                var cnt         = 0;
                //each picture
                $album.find('.content')
                      .each(function(){
                    var $content = $(this);
                    ++cnt;
                    //window width
                    var w_width     = $(window).width();
                    var spaces      = w_width/(total_pic+1);
                    var left        = (spaces*cnt) - (140/2);
                    var r           = Math.floor(Math.random()*41)-20;
                    //var r = Math.floor(Math.random()*81)-40;
                    $content.stop().animate({'left':left+'px'},500,function(){
                        $(this).unbind('click')
                               .bind('click',showImage)
                               .unbind('mouseenter')
                               .bind('mouseenter',upImage)
                               .unbind('mouseleave')
                               .bind('mouseleave',downImage);
                    }).find('img')
                      .stop()
                      .animate({'rotate': r+'deg'},300);
                    $back.stop().animate({'left':'0px'},300);
                });
            }

            //back to albums
            //the current album gets its innitial left position
            //all the other albums slide up
            //the current image slides out
            $back.bind('click',function(){
                $back.stop().animate({'left':'-100px'},300);
                hideNavigation();
                //there's a picture being displayed
                //lets slide the current one up
                if(current != -1){
                    hideCurrentPicture();
                }

                var $current_album = $('#pp_thumbContainer div.album:nth-child('+parseInt(album+1)+')');
                $current_album.stop()
                              .animate({'left':$current_album.data('left')},500)
                              .find('.descr')
                              .stop()
                              .animate({'bottom':'0px'},500);

                $current_album.unbind('click')
                              .bind('click',spreadPictures);

                $current_album.find('.content')
                          .each(function(){
                            var $content = $(this);
                            $content.unbind('mouseenter mouseleave click');
                            $content.stop().animate({'left':'0px'},500);
                            });

                $albums.not($current_album).stop().animate({'bottom':'0px'},500);
            });

            //displays an image (clicked thumb) in the center of the page
            //if nav is passed, then displays the next / previous one of the 
            //current album
            function showImage(nav){
                if(!enableshow) return;
                enableshow = false;
                if(nav == 1){
                    //reached the first one
                    if(current==0){
                        enableshow = true;
                        return;
                    }
                    var $content            = $('#pp_thumbContainer div.album:nth-child('+parseInt(album+1)+')')
                                              .find('.content:nth-child('+parseInt(current)+')');
                    //reached the last one
                    if($content.length==0){
                        enableshow = true;
                        current-=2;
                        return;
                    }   
                }
                else
                    var $content            = $(this);

                //show ajax loading image
                $loader.show();

                //there's a picture being displayed
                //lets slide the current one up
                if(current != -1){
                    hideCurrentPicture();
                }

                current                 = $content.index();
                var $thumb              = $content.find('img');
                var imgL_source         = $thumb.attr('alt');
                var imgL_description    = $thumb.next().html();
                //preload the large image to show
                $('<img style=""/>').load(function(){
                    var $imgL   = $(this);
                    //resize the image based on the windows size
                    resize($imgL);
                    //create an element to include the large image
                    //and its description
                    var $preview = $('<div />',{
                        'id'        : 'pp_preview',
                        'className' : 'pp_preview',
                        'html'      : '<div class="pp_descr"><span>'+imgL_description+'</span></div>',
                        'style'     : 'visibility:hidden;'
                    });
                    $preview.prepend($imgL);
                    $('#pp_gallery').prepend($preview);

                    var largeW              = $imgL.width()+20;
                    var largeH              = $imgL.height()+10+45;
                    //change the properties of the wrapping div 
                    //to fit the large image sizes
                    $preview.css({
                        'width'         :largeW+'px',
                        'height'        :largeH+'px',
                        'marginTop'     :-largeH/2-20+'px',
                        'marginLeft'    :-largeW/2+'px',
                        'visibility'    :'visible'
                    });
                    Cufon.replace('.pp_descr');
                    //show navigation
                    showNavigation();

                    //hide the ajax image loading
                    $loader.hide();

                    //slide up (also rotating) the large image
                    var r           = Math.floor(Math.random()*41)-20;
                    if(ie)
                        var param = {
                            'top':'50%'
                        };
                    else
                        var param = {
                            'top':'50%',
                            'rotate': r+'deg'
                        };
                    $preview.stop().animate(param,500,function(){
                        enableshow = true;
                    });
                }).error(function(){
                    //error loading image. Maybe show a message : 'no preview available'?
                }).attr('src',imgL_source); 
            }

            //click next image
            $next.bind('click',function(){
                current+=2;
                showImage(1);
            });

            //click previous image
            $prev.bind('click',function(){
                showImage(1);
            });

            //slides up the current picture
            function hideCurrentPicture(){
                current = -1;
                var r   = Math.floor(Math.random()*41)-20;
                if(ie)
                    var param = {
                        'top':'-150%'
                    };
                else
                    var param = {
                        'top':'-150%',
                        'rotate': r+'deg'
                    };
                $('#pp_preview').stop()
                                .animate(param,500,function(){
                                    $(this).remove();
                                });
            }

            //shows the navigation buttons
            function showNavigation(){
                $next.stop().animate({'right':'0px'},100);
                $prev.stop().animate({'left':'0px'},100);
            }

            //hides the navigation buttons
            function hideNavigation(){
                $next.stop().animate({'right':'-40px'},300);
                $prev.stop().animate({'left':'-40px'},300);
            }

            //mouseenter event on each thumb
            function upImage(){
                var $content    = $(this);
                $content.stop().animate({
                    'marginTop'     : '-70px'
                },400).find('img')
                      .stop()
                      .animate({'rotate': '0deg'},400);
            }

            //mouseleave event on each thumb
            function downImage(){
                var $content    = $(this);
                var r           = Math.floor(Math.random()*41)-20;
                $content.stop().animate({
                    'marginTop'     : '0px'
                },400).find('img').stop().animate({'rotate': r + 'deg'},400);
            }

            //resize function based on windows size
            function resize($image){
                var widthMargin     = 50
                var heightMargin    = 200;

                var windowH      = $(window).height()-heightMargin;
                var windowW      = $(window).width()-widthMargin;
                var theImage     = new Image();
                theImage.src     = $image.attr("src");
                var imgwidth     = theImage.width;
                var imgheight    = theImage.height;

                if((imgwidth > windowW)||(imgheight > windowH)){
                    if(imgwidth > imgheight){
                        var newwidth = windowW;
                        var ratio = imgwidth / windowW;
                        var newheight = imgheight / ratio;
                        theImage.height = newheight;
                        theImage.width= newwidth;
                        if(newheight>windowH){
                            var newnewheight = windowH;
                            var newratio = newheight/windowH;
                            var newnewwidth =newwidth/newratio;
                            theImage.width = newnewwidth;
                            theImage.height= newnewheight;
                        }
                    }
                    else{
                        var newheight = windowH;
                        var ratio = imgheight / windowH;
                        var newwidth = imgwidth / ratio;
                        theImage.height = newheight;
                        theImage.width= newwidth;
                        if(newwidth>windowW){
                            var newnewwidth = windowW;
                            var newratio = newwidth/windowW;
                            var newnewheight =newheight/newratio;
                            theImage.height = newnewheight;
                            theImage.width= newnewwidth;
                        }
                    }
                }
                    $image.css({'width':theImage.width+'px','height':theImage.height+'px'});
            }
        }); 
```

上面的 javascript 是写在正文部分的代码，浏览器拒绝加载，因为它是内部代码，FireBug 没有帮助。我使用以下几行来包含必要的 js 文件（在 head 部分）：

```
<script src="js/jquery.min.js">
</script> 
```

在编写 javascript 代码之前的正文部分：

```
<script src="js/jquery.transform-0.8.0.min.js"></script> 
```

该库在 xampp 服务器上运行时似乎运行良好，但当我将其上传到 Web 服务器时却不行。请帮我！

**注意：**我已经验证所有文件都已成功上传到我的网络服务器。我是这个网站的新手，所以请原谅我的任何错误并帮助我纠正它们。

**编辑：**谷歌浏览器控制台向我显示了许多图像的 404，说它们不存在，而它们存在。我也检查了文件夹的权限，一切都很好，猜这是主要问题。请在这里帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T11:39:43.183

似乎文件系统在服务器上区分大小写，在本地计算机上不区分错误。

所有带有小写 ( `*.jpg`) 后缀的图像都可以成功加载，但大写 ( `*.JPG`) 加载失败（未找到 404）。因为您的代码总是尝试获取小写的图像

在您的网站上：

![在此处输入图像描述](../Images/3b90f0fa1ae53981a4f60351e4c0e5e8.png) ![在此处输入图像描述](../Images/3465a0cc7ab1ea243629fbcdf8b27faa.png)

它应该是：

![在此处输入图像描述](../Images/20b90d832991cbce962327e4da7ea764.png)

# java - 非缓冲 StreamReader？

> ID：14787024
> 
> 赞同：0
> 
> 时间：2013-02-09T10:14:10.733
> 
> 标签：java, stream, inputstream, streamreader

某处是否有非缓冲流读取器实现？

我通过以下方式创建了我的流

```
FileInputStream inputStream = new FileInputStream(inputFilename);
CountingInputStream countingStream = new CountingInputStream(inputStream);
InputStreamReader streamReader = new InputStreamReader(countingStream, Charset.forName("utf8")); 
```

并`countingStream`从一开始就指示位置 8192。这意味着尽管我正在逐个字符地读取，但阅读器读取了 8192 个字节。

有没有没有这个功能的阅读器？

[CountingInputStream](http://commons.apache.org/io/apidocs/org/apache/commons/io/input/CountingInputStream.html)来自 Apache Commons IO API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:19:26.020

我不确定你为什么*想要*一个（似乎效率很低），但你可以使用[CharsetDecoder](http://docs.oracle.com/javase/6/docs/api/java/nio/charset/CharsetDecoder.html)自己实现一个。

# asp.net-mvc - Asp.Net MVC 中私有方法和用 NonAction 修饰的 Action 的区别

> ID：14787029
> 
> 赞同：12
> 
> 时间：2013-02-09T10:14:42.647
> 
> 标签：asp.net-mvc, private

在 Asp.Net MVC 中，如果我用属性装饰一个操作方法，`NonAction`那么访问该站点的用户将不允许调用它。当我制作它时也会发生同样的情况`private`

那么两者之间有什么区别，是否有特殊目的用于`NonAction`制作哪个属性？

例如有什么区别

```
[NonAction]
public ActionResult SomeAction(){} 
```

和

```
private ActionResult SomeAction(){} 
```

在 asp.net MVC 的上下文中，我当然知道一个是`public`，另一个是`private`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-09T10:23:40.477

这是唯一的区别。当您想要一个方法具有可以使其成为操作的签名但您不想成为操作时，使用该属性。

一个使用的例子是动作方法调用来`ActionResult`为它们生成的方法：

```
[NonAction]
public JsonResult JsonInfo(string id, string value) {
  return Json(new { id = id, value = value });
}

public JsonResult GetBusInfo() {
  return JsonInfo("4", "Bus");
}

public JsonResult GetCarInfo() {
  return JsonInfo("8", "Car");
} 
```

将其设为公开而不是私有的原因是其他控制器中的操作也可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-15T13:28:46.533

两者都与动作方法相同，您可以单独或一起使用它们。

```
[NonAction]           
        private ActionResult Details(int? id)
        {
            if (id == null)
            {
                return new HttpStatusCodeResult(HttpStatusCode.BadRequest);
            }
            FEED_TBL fEED_TBL = db.FEED_TBL.Find(id);
            if (fEED_TBL == null)
            {
                return HttpNotFound();
            }
            return View(fEED_TBL);
        } 
```

如果像上面的代码一样声明它，那么当我们尝试转到详细信息操作方法时，它不会转到它。而是会显示错误。

```
{{ HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly.}} 
```

这表明我们在视图上的详细信息链接确实找到了对详细信息操作方法和我们的控制器的任何引用。

# java - 使用 Hazelcast 将数据从多台机器移动到服务器

> ID：14787043
> 
> 赞同：0
> 
> 时间：2013-02-09T10:16:07.077
> 
> 标签：java, hazelcast

我们的目标是将来自多台机器的文本文件表示的数据库表行移动到一台机器上，我们当前的解决方案是基于文件的 - 压缩文件然后通过网络发送 - 服务器将从这些机器接收压缩文件并解压缩到一些文件夹根据。

在这之间还有很多其他的文件移动操作正在发生，这确实是错误的。

我正在考虑使用 hazlecast 将每个“行”字符串移动到服务器中。Hazelcast 能胜任这种工作吗？

许多机器正在以每天 200K 到 300K 的速度生成文本文件。这些文件必须发送到服务器。所以我想把它迁移到 Hazelcast。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:52:29.197

你可以用 hazelcast 做到这一点，但它是错误的用例。Hazelcast 将在各个方向同步。如果您在 client1 上添加一个条目，它将被传输到服务器但也会传输到 client2。即使这不会吓到你，它也表明 hazelcast 在这里被误用了。

通过在客户端将“行”推送到的服务器上实现一个简单的 Web 服务，您会更好。

# c - 如何在linux中为ac程序分配更多的cpu和RAM

> ID：14787046
> 
> 赞同：2
> 
> 时间：2013-02-09T10:16:26.550
> 
> 标签：c, linux, cpu, ram

我正在运行一个简单的 C 程序，它执行大量计算（CFD），因此需要大量时间来运行。但是我仍然有很多未使用的 CPU 和 RAM。那么我将如何将我的一些处理能力分配给一个程序。？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T16:17:23.100

我猜 CFD 是指计算流体动力学（但[CFD](http://en.wikipedia.org/wiki/CFD_%28disambiguation%29)还有很多其他含义，所以我可能猜错了）。

您绝对应该首先[分析](http://en.wikipedia.org/wiki/Profiling_%28computer_programming%29)您的代码。至少，编译它`gcc -Wall -pg -O`并学习如何使用[gprof](http://sourceware.org/binutils/docs/gprof/)。您还可以使用`strace`来找出您的代码完成的系统调用。

我不是 CFD 专家（即使在上个世纪我确实与 CFD 专家合作过）。但是这样的代码使用了大量的[有限元分析](http://en.wikipedia.org/wiki/Finite_element_analysis)和其他向量计算。

如果您正在编写代码，您可能会考虑使用[OpenMP](http://en.wikipedia.org/wiki/OpenMP)（因此通过在源代码中仔细添加[OpenMP pragma](http://heather.cs.ucdavis.edu/~matloff/openmp.html)，您可能会加快速度），或者甚至考虑通过编写在 GPU 上运行的[OpenCL 内核来使用 GPGPU。](http://en.wikipedia.org/wiki/OpenCL)

您还可以了解有关[pthreads](https://computing.llnl.gov/tutorials/pthreads/)编程的更多信息并更改您的代码以使用线程。

如果您使用重要的数值库，例如[BLAS](http://en.wikipedia.org/wiki/BLAS)，它们有很多调整，甚至是专门的变体（例如，多核、OpenMP-ed，甚至在 OpenCL 中）。

在所有情况下，并行化您的代码都是一项繁重的工作。如果可能的话，您将花费数周或数月的时间来改进它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T10:24:15.903

当程序需要进行计算时，Linux 不会让程序等待并释放 CPU。要么你有一个多核 CPU 和一个正在运行的单线程（正如@Pankrates 所建议的那样），要么你阻塞了一些 I/O。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T13:39:24.800

要一次使用多个 CPU，您需要运行程序的多个副本，或者在程序中运行多个线程。两者都不是非常难以开始。

然而，做一个并行版本的“我有 10000 个大数，我想找出它们是否是素数”比做“很多 A = A + B”要容易得多并行输入计算 - 因为您需要新的 A 才能进行下一步。CFD 计算倾向于做后者 [据我了解]，但使用大型数组。您可以将大型向量计算拆分为一组较小的向量计算[假设我们有一个 1000 x 1000 的矩阵，您可以将其拆分为 4 组 250 x 1000 矩阵或 4 组 500 x 500 矩阵，并且在它自己的线程中执行每一个]。

如果它是您自己的代码，那么您希望知道它的作用和工作原理。如果是其他人的代码，那么您需要与拥有该代码的人交谈。

没有“自动使用更多 CPU”的神奇方法。四核处理器上 30% 的 CPU 使用率可能意味着您的系统基本上使用一个内核，而 5% 左右是系统中其他事情的开销 - 或者您的应用程序中某处可能有第二个线程使用一点点 CPU 做任何事情。或者应用程序是多线程的，但由于线程之间在某些共享资源上存在争用，因此没有充分使用多个内核……我们不可能说出这三个 [或其他几个] 替代方案中的哪一个。

除非你有一些有用的东西可以放入内存中，否则要求更多的 RAM 不会有帮助。如果有可用内存，您的应用程序将获得所需的内存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-09T10:18:32.193

您可以使用负增量来完善该过程，但您需要成为超级用户。看

```
man nice 
```

这将增加进程的调度优先级。如果它与其他进程竞争 CPU 时间，它将获得更多的 CPU 时间，因此“运行得更快”。

至于增加程序使用的 RAM 量：您需要重写或重新配置程序以使用更多 RAM。鉴于问题中提供的信息，很难说更多。

# asp.net-mvc - 在 jquery 按钮单击中获取 jsonresult 操作结果

> ID：14787050
> 
> 赞同：1
> 
> 时间：2013-02-09T10:17:09.087
> 
> 标签：asp.net-mvc, jquery, asp.net-mvc-2

我正在开发 asp.net MVC 2 应用程序。我有这样的表格：

```
<% using (Html.BeginForm("SaveCallRecording", "Recording", FormMethod.Post, new { id = "frmAddCallRecording", name = "frmAddCallRecording" }))
                           {%>

        <tr>
                                    <td>
                                    </td>
                                    <td>
                                        <input type="button" id="btnCall" title="Call" value="Call" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" />
                                        <input type="button" id="btnNewCall" title="New Call" value="New Call" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" />
                                    </td>
                                </tr>
                            </table>
                            <%} %> 
```

我在 document.ready 中有这个

```
 $("#btnCall").click(function () {
                var CallStatus = $("#txtCallStatus").val();
                if (CallStatus == 'READY') {
                    if ($("#isUniquePassword").is(':checked') && $("#UniquePassword").val() == '') {
                        $("#dialog-RecipientEmail-error").dialog("open");
                    }
                    else {
                        $.ajax({
                            type: "POST",
                            dataType: "json",
                            url: "/account/getGenericPassword",
                            success: function (data) {
                                if (data == null || data == "") {
                                    if ($('#isGenericPassword').is(':checked')) {
                                        $("#dialog-add-generic-password").dialog("open");
                                    }
                                }
                                else {
                                         $("#frmAddCallRecording").submit();
                               //after this I want to show alert based on result                                   
                                }
                            }
                        });
                    } // end of isUniquePassword if
                } // end of call status if
                else if (CallStatus == 'NOT SET') {
                    $("#dialog-required-fields").dialog("open");
                }
            }); 
```

控制器是这样的：

```
 [Authorize]
        [HttpPost]
        public JsonResult SaveCallRecording(CallRecording recording, FormCollection form)
        {
     return Json("record saved!");
            } 
```

执行 actionresult SaveCallRecording 后，我想显示成功或失败消息。我该怎么做 ？如果我尝试 $.ajax，我需要使用 `data: { "item" : "value1" , ....} 手动形成表单数据。我尝试使用 $.post 但我也需要手动将数据传递给它。如果我将 btnCall 作为提交按钮而不是按钮，则验证失败。

我想要：

1）首先验证表单并在表单未验证时显示警报。2) 将表单数据发布到 json Action 方法 SaveCallRecording 3) 从 Action 方法获取成功或失败消息并显示为警报

请提出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:26:07.247

您可以先将此表单放在部分 ( `_SaveCallRecordingForm.ascx`) 中：

```
<% using (Html.BeginForm("SaveCallRecording", "Recording", FormMethod.Post, new { id = "frmAddCallRecording", name = "frmAddCallRecording" })) { %>
    <tr>
        <td></td>
        <td>
            <input type="button" id="btnCall" title="Call" value="Call" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" />
            <input type="button" id="btnNewCall" title="New Call" value="New Call" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" />
        </td>
    </tr>
<% } %> 
```

此外，如果您希望能够进行一些验证，我建议您将此部分强类型化到您的 CallRecording 模型中，并使用 Html 帮助程序以这种形式生成输入字段。您还可以使用 validationMessageFor 帮助器为错误生成占位符。

然后你可以 AJAXify 这个表单：

```
else {
    var $form = $("#frmAddCallRecording");
    $.ajax({
        url: $form.attr('action'), 
        type: $form.attr('method'),
        data: $form.serialize(),
        success: function(result) {
            if (result.success) {
                alert('Thanks for submitting');
            } else {
                $('#someContainerOfYourForm').html(result);
            }
        }
    });
} 
```

并让您的控制器操作执行验证并返回 JsonResult（如果成功）或带有错误列表的 PartialView：

```
[Authorize]
[HttpPost]
public ActionResult SaveCallRecording(CallRecording recording)
{
    if (!ModelState.IsValid)
    {
        // There were validation errors => let's redisplay the form
        return PartialView("_SaveCallRecordingForm", recording);
    }

    // at this stage we know that the model is valid => do some processing
    // and return a JsonResult to indicate the success
    return Json(new { success = true });
} 
```

# javascript - 在javascript中使用没有if和var表达式的bool

> ID：14787054
> 
> 赞同：1
> 
> 时间：2013-02-09T10:17:28.703
> 
> 标签：javascript

`console && (typeof console.log === "function") && console.log('contains called');`此函数中的字符串在做什么：

```
(function ($) {
$.validator.addMethod('contains', function (value, element, param) {
    console && (typeof console.log === "function") && console.log('contains called');
    if (this.optional(element)) { return true; } // let required rule deal with this.

    var pattern = new RegExp('' + param, "gi");
    return value && ('' + value).match(pattern);
}, "Part of the word is invalid");

$.validator.unobtrusive.adapters.add('contains', function (options) {
    var element = options.element,
            message = options.message;
    options.rules['contains'] = $(element).attr('data-val-contains-word');
    if (options.message) {
        options.messages['contains'] = options.message;
    }
});
})(jQuery); 
```

我会理解该字符串是否像： `var var1 = console && (typeof console.log === "function") && console.log('contains called');`

或喜欢：`if(console && (typeof console.log === "function") && console.log('contains called'))`

这不是错误的代码。它正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:20:25.723

它只是向浏览器控制台写入一些内容。但前提是该控制台可用并且具有“日志”功能。前两个条件可以阻止第三个条件运行，因此在 console.log(..) 不存在的情况下不会导致 js 错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T10:23:03.393

运行时检查第一个条件。如果没有控制台，它将停止检查其他条件，因为`false && ...`在任何情况下都是`false`。如果存在，则`console`运行时检查是否`console.log`是函数，如果是，则将某些内容记录到控制台。这称为[短期评估](https://en.wikipedia.org/wiki/Short-circuit_evaluation)。否则，运行时将始终尝试执行每个条件，如果没有控制台对象，则会导致运行时错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T10:32:13.983

这只是一种可读性较差的写作方式：

```
if (console && (typeof console.log === "function")) {
  console.log('contains called');
} 
```

它（错误）使用了这样一个事实，即您可以编写一个不对结果做任何事情的表达式，并且语句也是一个表达式，因此可以将它写在表达式中来做某事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T10:36:17.130

它的作用与

```
if (console && (typeof console.log === "function")) {
    console.log('contains called');
} 
```

一旦某些东西是假的，解释器就会停止，所以`console.log`如果`console`没有`log`函数就不会被调用。`console`如果甚至不存在，它也不会检查此功能是否存在。

# jquery-ui - jquery文件上传 - 如何覆盖文件不重命名

> ID：14787055
> 
> 赞同：8
> 
> 时间：2013-02-09T10:17:34.180
> 
> 标签：jquery-ui, jquery-plugins, file-upload, overwrite, blueimp

我正在努力更新 Jquery 文件上传插件，因此当您上传文件时，它只会覆盖具有相同名称的现有文件，而不是使用 upcount 重命名它。

我已应用此链接中涵盖的更改：[https ://github.com/blueimp/jQuery-File-Upload/issues/1965](https://github.com/blueimp/jQuery-File-Upload/issues/1965)

但我似乎无法覆盖这个插件来让它工作？

这里有一个尚未回答的现有问题：[jQuery File Upload by bluimp，如何替换而不是重命名](https://stackoverflow.com/questions/12895693/jquery-file-upload-by-bluimp-how-to-replace-instead-of-renaming)

对此的任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-11T18:17:43.777

如果您使用 wiki 中存在的 UploadHandler.php，这很简单。在 get_file_name 方法中，您应该替换此行：

```
 return $this -> get_unique_filename($this -> trim_file_name($name, $type, $index, $content_range), $type, $index, $content_range); 
```

有了这个：

```
 return $this -> trim_file_name($name, $type, $index, $content_range); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-01T14:10:56.923

**[MKoosej](https://stackoverflow.com/users/445491/mkoosej)**修复的2016 年更新！在**UploadHandler.php** → protected function get_file_name ...替换

```
return $this->get_unique_filename(
        $file_path,
        $this->fix_file_extension($file_path, $name, $size, $type, $error,
            $index, $content_range),
        $size,
        $type,
        $error,
        $index,
        $content_range
    ); 
```

和

```
return $this -> trim_file_name($file_path, $name, $size, $type, $error, $index, $content_range); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-28T00:33:22.667

我需要相同的文件覆盖选项。

使用 PHP UploadHandler.php 文件，我做了一个非常适合我的快速破解。我确信有更好的方法，但这可能对其他人有所帮助。

查找处理程序“upcount_name_callback”并将返回语句替换为取出的（索引）编号。我留下了原始的退货声明，以防我需要回去:)

```
protected function upcount_name_callback($matches) {
    $index = isset($matches[1]) ? intval($matches[1]) + 1 : 1;
    $ext = isset($matches[2]) ? $matches[2] : '';
    return ''.$ext;
    /* return ' ('.$index.')'.$ext; */
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-11T10:12:52.920

Anno 2018 这也可以工作（PHP 7.1）：

```
class MyUploadHandler extends UploadHandler
{
    public function __construct($options = array(), $initialize = true, $error_messages = null) {
        $options += array(
            'overwrite_existing' => true
        );

        parent::__construct($options, $initialize, $error_messages);
    }

    protected function get_unique_filename($file_path, $name, $size, $type, $error, $index, $content_range) {
        if ($this->options['overwrite_existing'] ?? false) {
            return $name;
        }

        return parent::get_unique_filename($file_path, $name, $size, $type, $error, $index, $content_range);
    }
} 
```

它避免了必须更改原始代码，然后可以将其用作库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-21T06:12:59.490

考虑 github 上的文档（[此处](https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin)）并向下滚动到“**如何在上传的生命周期中将文件绑定到元素节点**”的位置。这是代码：

```
$(function () {
    $('#fileupload').fileupload({
        dataType: 'json',
        add: function (e, data) {
            data.context = $('<p/>').text('Uploading...').appendTo(document.body);
            data.submit();
        },
        done: function (e, data) {
            data.context.text('Upload finished.');
        }
    });
}); 
```

注意**完成**的回调函数。如果展开**数据**对象，您会注意到有一个**data.files**对象和一个**data.result**对象。 **data.result**包含**服务器上文件**的名称。因此，基于上面给出的示例脚本，服务器上新上传的文件的名称是**data.result.files[0].name 。**

我希望这可以帮助别人

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-24T10:38:14.800

我尝试了@MKoosej 的解决方案。就我而言，它工作得很好，但我还编辑`trim_file_name`了我让它只返回一个文件名的地方（我必须做一个上传器，将任何文件名转换为 data.csv）。此外，我必须制作其他版本的上传器，我应该重写文件名而不是重命名，但不同名称的不同文件应该保持不同。所以当我在那里尝试@MKoosej 解决方案时，它开始上传只有扩展名的文件，比如没有文件名的.jpeg。所以，我找到了这个解决方案：在 func`get_unique_filename`一开始我放了这个：

```
$oldName=$name; 
```

并返回`$oldName`而不是，`$name`这很好。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-05-08T07:22:27.867

只需在回调中执行 ajax 请求即可开始上传并从数据磁盘中删除文件。您可以使用 data.files[0].name 找到文件名。

然后，您只需使用旧链接搜索 tr，如下所示：

```
$("a[title='"+ data.files[0].name + "']").each(function () {
        $(this).closest('tr').fadeOut();
    }); 
```

并将其淡出。

问候

# android - Android：ViewPager，在片段加载时拦截

> ID：14787059
> 
> 赞同：0
> 
> 时间：2013-02-09T10:18:17.000
> 
> 标签：android, android-viewpager

我有一个 ViewPager，它通常会预加载它的一些元素。用户可以与一个页面交互，该页面应该会影响 ViewPager 的所有其他元素的一部分。

目前我所有的逻辑都在 onCreateView() 中。当元素实际显示并更改公共部分时，我需要得到一个句柄。我尝试使用 onResume() ，但这个函数被更早地调用了。我不想重绘整个元素，因为这无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T11:24:36.963

我不确定，但请尝试使用此方法：

```
viewPager.setOffscreenPageLimit(0); 
```

当您在该片段上时，此方法一次只会调用一个片段。

或者

另一种方法是，您可以在运行时获取视图寻呼机片段的位置，该片段位于屏幕前面，根据该特定片段位置，您可以通过检查位置来简单地调用您的方法，例如：if(position == 1){}。

# php - 使用 FileData 对象上传文件

> ID：14787061
> 
> 赞同：1
> 
> 时间：2013-02-09T10:18:28.030
> 
> 标签：php, jquery

我想创建一个上传脚本。这是我的 JS：

```
$("#subUpload").live("change", function(){
    var fd = new FormData();
    var file = this.files[0];
    fd.append("subUpload", file);

    $.ajax({
      type: 'POST',
      cache: false,
      url: "script.php",
      processData: false,
      contentType: false,
      data: fd,
      success: function(data){
        alert("Message: " + data);
      }
    });
}); 
```

这是我的PHP：

```
<?php
    if($_FILES['subUpload']['error'] == 0){
        if(is_dir('./files')){
            if(move_uploaded_file($_FILES['subUpload']['tmp_name'], '/files/'.$_FILES['subUpload']['tmp_name'])){
                echo"UPLOADED";
            }else{
                echo"FAIL";
            }
        }
        else{
            echo "Uncorrect Path";
        }
    }
    else{
        echo $_FILES['subUpload']['error'];
    }
?> 
```

我总是收到“失败”的消息。我已将文件夹权限设置为 777。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:34:29.963

```
bool move_uploaded_file ( string $filename , string $destination ) 
```

您需要为该文件命名，而不仅仅是文件夹

见[http://php.net/manual/fr/function.move-uploaded-file.php](http://php.net/manual/fr/function.move-uploaded-file.php)

```
 (move_uploaded_file($_FILES['subUpload']['tmp_name'], '/files/'.$_FILES['subUpload']['name']) 
```

如果有更多问题，请检查`is_dir('/files')`直到找到指向它的正确方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T10:24:07.260

尝试提供目标文件夹的完整路径。不仅如此`/files`，例如`getcwd() . DIRECTORY_SEPARATOR . 'files'`。

# c - 如何多次读取文件C

> ID：14787062
> 
> 赞同：0
> 
> 时间：2013-02-09T10:18:29.037
> 
> 标签：c, file-upload

我正在尝试将文件中的单词列表存储到 char**中。我不会假设最大行数或最大字符数。因此，为了解决这个问题，我决定运行 .txt 文件以查找行数和最大字符数，以便为 char* * 列表分配内存。

但是，当我使用 GDB 调试我的程序时，它会跳过文件的第二次运行以存储在单词中。为什么会这样，我该如何解决？谢谢！

```
void readFile(int argc, char** argv)
{
    FILE *myFile;
    char** list;
    char c;
    int wordLine = 0, counter = 0, i;
    int maxNumberOfChars = 0, numberOfLines = 0, numberOfChars = 0;

    myFile = fopen(argv[1], "r");

    if(!myFile)
    {
        printf("No such file or directory\n");
        exit(EXIT_FAILURE);  
    }

    while((c = fgetc(myFile)) !=EOF)
    {
        numberOfChars++;
        if(c == '\n')
        {
            if(maxNumberOfChars < numberOfChars)
                maxNumberOfChars += numberOfChars + 1;

            numberOfLines++;
        }
    }

    fseek(myFile, 0, SEEK_SET);

    list = malloc(sizeof(char*)*numberOfLines);

    for(i = 0; i < wordLine ; i++)
        list[i] = malloc(sizeof(char)*maxNumberOfChars);

    while((c = fgetc(myFile)) != EOF)
    {
        if(c == '\n' && counter > 0)
        {
            list[wordLine][counter] = '\0';
            wordLine++;
            counter = 0;
        }
        else if(c != '\n')
        {
            list[wordLine][counter] = c;
            counter++;
        }
    } 
    fclose(myFile);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T10:20:00.077

您需要在第二个循环之前使用 fseek 重置文件的读取指针。

添加这样的东西

```
fseek(myFile, 0, SEEK_SET); 
```

或者

```
rewind(myFile); 
```

感谢@ThomasPadron-McCarthy。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T10:21:30.990

首先，你的技术很差，因为它很慢。您可以只分配一些内存，然后在需要更多内存时使用 realloc。

第二：您可以在文件上使用 stat() 来了解大小。您不会知道其中的行数，但它可能很有用。

第三：您可以使用 fseek() 将光标移回文件的开头，通常是文件中的任何位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T10:23:09.450

在再次阅读之前使用 rewind(myFile)。

```
rewind(myFile) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T10:32:40.770

但您无需阅读整个文件即可找出字符数。你可以使用这个结构

```
struct stat file_stat;
fstat(file_id, &file_stat);
int size_to_read = file_stat.st_size - 1; 
```

您不需要知道行数，因为您可以在线使用 realloc：

```
list=realloc(list,(sizeof(char*))); 
```

# php - 如何在 JQgrid 的元素中添加功能，如选择框中的 Onchange 事件

> ID：14787064
> 
> 赞同：1
> 
> 时间：2013-02-09T10:18:38.200
> 
> 标签：php, jquery, jqgrid

我正在使用`Jqgrid`并处于编辑模式我正在选择框中`JQgrid`类似`Onchange`事件的元素中使用函数

代码是这样的

```
{name:'tipo_norma',index:'tipo_norma', editable:true, 
width:'90',align:'center',edittype:'select',editoptions: 
{dataUrl:'../ajax/selectNorma.php' }} 
```

我想在组合框的情况下添加`myfunction(`）。`Onchange``tipo_norma`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T11:05:31.920

[在editoptions](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acommon_rules#editoptions)中使用dataEvent

```
 editoptions: { dataEvents: [
{ type: 'change', fn: function(e) {myfunction(); } },

]} 
```

# gwt - 创建 Uibinder 多个实例。

> ID：14787068
> 
> 赞同：0
> 
> 时间：2013-02-09T10:19:23.760
> 
> 标签：gwt, uibinder

我有一个使用 UiBinder“MyTable”的小部件和另一个使用 UiBinder“MyTableElement”的小部件。我想添加 MyTableElement inn MyTable 的多个实例。我在clickevent上添加元素。MyTableElement 第一次添加，但如果我添加更多小部件，它会挂起。我应该如何创建 MyTableElement 小部件的多个实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:32:14.207

问题出在浏览器上。自动修好了。

# mysql - 游戏的mysql查询优化

> ID：14787072
> 
> 赞同：1
> 
> 时间：2013-02-09T10:19:33.647
> 
> 标签：mysql, query-optimization, database-schema

我有这张桌子用于 2-4 名玩家的纸牌游戏：

```
CREATE TABLE IF NOT EXISTS `cardgame` (
  `id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,
  `players` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `p1` mediumint(6) unsigned NOT NULL DEFAULT '0',
  `p2` mediumint(6) unsigned NOT NULL DEFAULT '0',
  `p3` mediumint(6) unsigned NOT NULL DEFAULT '0',
  `p4` mediumint(6) unsigned NOT NULL DEFAULT '0',
  `p1_state` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `p2_state` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `p3_state` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `p4_state` tinyint(1) unsigned NOT NULL DEFAULT '0',
  /* other rows */,
  `game_state` tinyint(1) unsigned NOT NULL DEFAULT '0',
PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=79218 DEFAULT CHARSET=utf8; 
```

我必须检查所有比赛，我是一名球员。（在示例中我的 user_id 是 1981）

```
mysql> EXPLAIN SELECT id FROM cardgame 
WHERE ((p1=1981 AND p1_state=1) OR (p2=1981 AND p2_state=1) 
OR (p3=1981 AND p3_state=1) OR (p4=1981 AND p4_state=1)) 
AND game_state < 7;
+----+-------------+----------+------+---------------+------+---------+------+-------+-------------+
| id | select_type | table    | type | possible_keys | key  | key_len | ref  | rows  | Extra       |
+----+-------------+----------+------+---------------+------+---------+------+-------+-------------+
|  1 | SIMPLE      | cardgame | ALL  | NULL          | NULL | NULL    | NULL | 79208 | Using where |
+----+-------------+----------+------+---------------+------+---------+------+-------+-------------+ 
```

我可以在哪些行上创建索引？p1, p1_state, p2.. p3.. p4, p4_state 行需要索引加上 game_state，但不是太多了吗？

或者我必须以某种方式重新设计架构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:27:42.217

> 或者我必须以某种方式重新设计架构？

是的，[标准化](http://en.wikipedia.org/wiki/Database_normalization)您的架构：

```
CREATE TABLE game_players (
  game_id  MEDIUMINT NOT NULL,
  position TINYINT   NOT NULL,
  player   MEDIUMINT NOT NULL,
  state    TINYINT UNSIGNED NOT NULL DEFAULT 0,
  PRIMARY KEY (game_id, position),
  UNIQUE (game_id, player), -- if a player can only be in each game once
  INDEX (player, state)
)
SELECT id, 1, p1, p1_state FROM cardgame
  UNION ALL
SELECT id, 2, p2, p2_state FROM cardgame
  UNION ALL
SELECT id, 3, p3, p3_state FROM cardgame
  UNION ALL
SELECT id, 4, p4, p4_state FROM cardgame;

ALTER TABLE cardgame 
  DROP p1, DROP p1_state,
  DROP p2, DROP p2_state,
  DROP p3, DROP p3_state,
  DROP p4, DROP p4_state; 
```

然后您的查询变为：

```
SELECT g.id
FROM   game_players p JOIN cardgame g ON p.game_id = g.id
WHERE  p.player = 1981 AND p.state = 1
   AND g.game_state < 7; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T16:03:11.853

关于数据正确性的说明：

@eggyal 在另一个答案中的重新设计删除了`DEFAULT`您列中的大部分 s。这是好事。

a 的一大好处`NOT NULL`是防止您的程序创建没有正确指定所有列的行。有一个`DEFAULT`无用的渲染。让我们看一个类似于您的纸牌游戏桌的桌子：

```
CREATE TABLE IF NOT EXISTS `cardgame` (
    `id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,
    `player_names` varchar(20) NOT NULL,
    `players` tinyint(1) unsigned NOT NULL DEFAULT '0'
); 
```

所以现在你创建一个这样的行：

```
INSERT INTO cardgame (player_names) VALUES ('Bob and Doug'); 
```

您没有指定 ，`id`因为它是`AUTO_INCREMENT`，并且您指定`player_names`正确，但是糟糕，您忘记指定`players`. 现在，您的`players`列中的值为 0，这是错误数据。从来没有这样的情况，你应该能够在不指定玩家数量的情况下向表中添加一行，对吧？这`DEFAULT '0'`消除了该限制，更糟糕的是，将无效数量的玩家放入列中。有 0 个玩家的游戏永远都不正确，对吧？但是您`DEFAULT`在其中放置了无效数量的玩家。即使您将 更改为`DEFAULT`像 2 这样的有效数字，您也不知道它是正确的。您必须始终指定玩家人数，对吗？DB无法知道。

因此，永远不要指定 a `DEFAULT`，除非它专门是一个不必每次都指定的列。

# java - 在if条件java中添加系列

> ID：14787074
> 
> 赞同：0
> 
> 时间：2013-02-09T10:19:48.017
> 
> 标签：java, if-statement

我想在这样的条件下添加系列

```
if (count == 33 || count == 66 || count == 99
            || count == 132 || count == 165 || count == 198
            || count == 231 || count == 264 || count == 297
            || count == 330 || count == 363 || count == 396
            || count == 429 || count == 462 || count == 495
            || count == 528 || count == 561 || count == 594
            || count == 627 || count == 660 || count == 693
            || count == 726 || count == 759 || count == 792
            || count == 825 || count == 858 || count == 891
            || count == 924 || count == 957 || count == 990
            || count == 1023 || count == 1056 || count == 1089){
        retValue = true;
    }else {
        retValue = false;
    } 
```

有没有最好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-09T10:22:42.907

所以，基本上你正在检查除以`33`，然后只需使用模运算符* ：

```
if (count % 33 == 0) {
        retValue = true;
} else {
        retValue = false;
} 
```

如果您想确认该范围，可以将其添加到条件中：

```
if (count >= 33 && count <= 1089 && count % 33 == 0) 
```

此外，您可以将该`if-else`块简化为单个`return`语句：

```
return count >= 33 && count <= 1089 && count % 33 == 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T10:21:43.990

尝试使用 switch case 来解决您的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T10:23:04.377

使用`ArrayList<Integer>`，用整数值填充它。然后简单地说：

`list.contains(value)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T10:25:02.620

```
if (count <=1089 && count%33==0){
   return true;
else
 return false; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-09T10:32:53.940

```
 List<int> list = new ArrayList<int>() { 33, 66, 99, 132, 165, 1198 };// add your numbers to this List, this can be reuse in another parts of Program 

            if (list.Contains(count))
            {
                retValue = true;
                System.out.ptinrtln("Element Found");

            }
            else
            {
                retValue = false;
                 System.out.ptinrtln("Element Not Found");
            } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-09T10:43:10.253

如前所述，您可以检查`%33`，但如果实际上您需要检查一些任意条件列表，您可以迭代地创建答案

```
retValue = false;
do {

   // retValue = retValue || <newcondition>;
   retValue |= <newcondition>;

} while( !retValue );
return retValue; 
```

# cakephp-2.0 - 我自己的助手蛋糕 php 中的应用程序控制器？

> ID：14787076
> 
> 赞同：-1
> 
> 时间：2013-02-09T10:20:04.757
> 
> 标签：cakephp-2.0

我如何在 cake php 2.X 中自己的辅助方法中使用 App 控制器方法或属性？我`get_lan()`在 App 控制器中调用了方法，这是我的助手，但是当我运行时收到错误消息：

```
Error: Call to undefined function get_lan() 
File: C:\wamp\www\app\View\Helper\current_langHelper.php    
Line: 8" 
```

代码：

```
<?php
App::uses('AppHelper', 'View/Helper');

class current_langHelper extends AppHelper {
    public $helpers = array('Html');

    public function current_lang()
    {
        var_dump(get_lan());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:49:58.160

助手不调用控制器方法。换句话说，Helper 不会“看到”Controller 成员。Controller 应该通过 set() 方法将信息传递给 View/Helper。您可以使用 get_lang() 方法（最好将其命名为 setLang()）将语言传递给视图，例如：

```
private setLang(){ $this->set('lang',$selectedLanguage); } 
```

然后，您可以使用以下方法在视图中使用此变量：

```
var_dump($lang); 
```

# c# - 壁虎浏览器中的 C# 自动填充输入框

> ID：14787081
> 
> 赞同：2
> 
> 时间：2013-02-09T10:20:47.363
> 
> 标签：c#, winforms, autocomplete, browser, gecko

我一直在尝试使用以下代码用数据填充一些输入框：

```
 GeckoHtmlElement checkElement = null;
        GeckoDocument checkDoc = GeckowebBrowser.Window.Document;                        
        checkElement = checkDoc.GetHtmlElementById("username");
        if (checkElement!=null)
            {
                checkElement.InnerHtml = username;
            } 
```

上面的代码找到了正确的元素并将 InnerHtml 设置为“用户名”，但我在屏幕上什么也没有。使用断点，我确认 InnerHtml 已按计划更改。我也尝试更改 .TextContent（而不是 .InnerHtml），但结果是一样的。Html 代码如下所示：

```
<input id="username" class="inputboxclass" type="text" name="myusername"> 
```

我使用 C# winforms .NET 4.5 和 geckoFX 16 (XulRunner 16)。

编辑：这是有效的代码（感谢 RENE Victor 的建议）

```
checkElement.SetAttribute("value", username); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T10:31:50.323

将此代码放在一个独立的文本文件中并在浏览器中打开它：

```
 <input type="text" value="5">fdfuhsi</input> 
```

如您所见，您要修改 vale，而不是 InnerHtml。

# android - 从静态类访问 NOT 静态字段

> ID：14787089
> 
> 赞同：0
> 
> 时间：2013-02-09T10:21:50.713
> 
> 标签：android, android-activity

```
public class MainActivity extends Activity {

   TextView textview;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.getWindow().setSoftInputMode(LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
    setContentView(R.layout.activity_main);

      textview = (TextView)findViewById(R.id.textView6);
      //other method,startservice()and so on.

      //and there is BroadcastReceiver to receive a flag from service.
      public static class Receiver extends BroadcastReceiver{

      @Override
          public void onReceive(Context context, Intent intents) {
          intents.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
          textview.setText("set"); 
```

这是我的代码。我想要的只是 textview.setText() onReceive。

我的第一次尝试，textview 是静态的。但是静态变量似乎在另一个方法运行期间被杀死。textview 设置为空，不能设置文本。

所以我尝试让 textview 不是静态的。但还有第二个问题。当我这样做时，我必须获取 new MainActivity() 才能访问 textview。这没有很好地工作。复杂。

我如何从静态方法中获取文本视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:27:04.623

You cannot access non-static variable/method within static method because the static method exists *regardless* if there is instance of your class or no

You can maintain a static instance of your MainActivity (initialize it in the constructor or in `onCreate`) and use it to access the `textview`

For example

```
public class MainActivity extends Activity {
    private static MainActivity instance;

    protected void onCreate(Bundle savedInstanceState) {
      instance = this;
    }

  public void onReceive(Context context, Intent intents) {
     instance.textview.setText("set");     
} 
```

I do not know what you are trying to achieve here or when this `onReceive` will be called, but having static class for `BroadcastReceiver` does not seem to be good.

Another thing you will need to update the `textview` from the `UI thread` which you can do using `runOnUiThread`

```
instance.runOnUiThread(new Runnable() {

        public void run() {
            // update your textview             
        }
    }); 
```

# google-app-engine - 从第三方应用程序编辑/上传 GAE 应用程序代码

> ID：14787091
> 
> 赞同：1
> 
> 时间：2013-02-09T10:21:59.140
> 
> 标签：google-app-engine

我想使用 Python 创建一个可以上传 GAE 应用程序代码的 Google App Engine 应用程序。

我想知道我需要使用哪个 Google 服务来连接到 Google App Engine。我知道第三方应用程序可以做到这一点，因为[https://codenvy.com/](https://codenvy.com/)正在做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:52:49.187

没有创建 GAE 应用程序的 api。
您需要先创建它，然后才能上传您的代码。

# java - 如何从终端运行处理应用程序

> ID：14787093
> 
> 赞同：7
> 
> 时间：2013-02-09T10:22:05.567
> 
> 标签：java, processing

我目前正在为一个小项目使用[处理](http://processing.org)，但是我不喜欢它附带的文本编辑器。我使用 vim 来编写我所有的代码。我找到了 .pde 文件的位置，我一直在从 vim 编辑它们，然后我重新打开它们并运行它们（重新加载脚本并运行它需要很多时间）。这就是为什么我想要一个可以从终端编译所有内容的解决方案。

经过仔细检查，我发现了应该编译并运行草图的 processing-java 文件。但是，无论我提供什么参数，它都会不断地吐出帮助页面。这是我如何运行它们的示例。

（PS：我制作了一个运行 processing-java 的脚本并将其添加到 /usr/bin）

`processing-java --sketch=/home/george/sketchbook/testproject --output=/tmp/processing/test --force --run`

谁能帮我从终端运行我的草图？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-28T18:15:17.597

我设法通过创建一个名为 pjava 的 bash 脚本来做到这一点，如果有人有这个问题，代码如下：

```
#!/bin/bash
rm -rf /tmp/processing
mkdir /tmp/processing
/home/euler/Desktop/processing-2.0b8/processing-java --output=/tmp/processing/ --force --sketch=$1 --run 
```

我运行它的方式如下：

如果我在一个名为 的文件夹`project`中，我会运行`pjava ../project`并且 project.pde 将被编译并运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-12-27T00:00:15.347

我知道这已经晚了，但更简单的方法是这样做（假设 processing-java 在你的路径中）。
`processing-java --sketch=$PWD --run`
并将其添加到别名：
`alias pjava='processing-java --sketch=$PWD --run`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-03T17:21:23.953

您也可以只保持处理应用程序打开并使用任何编辑器。

当您在 VS 代码中保存更改时（我有处理扩展，但认为除了语法突出显示之外什么都不做），它将显示在处理应用程序中，您可以从那里运行它。有一个脚本很好，但处理的可视化界面也很方便。

# php - 将表格中的最新数据放入表单内的文本字段中

> ID：14787095
> 
> 赞同：-1
> 
> 时间：2013-02-09T10:22:20.507
> 
> 标签：php, html, mysql, sql

我想将数据库中的最新数据放入表单中的一个文本字段中。我该怎么做。有什么建议吗？

我有一个表单，它需要最终的文本字段才能从我的数据库中的表中获取最新数据。我表中的某些表单是动态的，但我不知道如何将最新数据放入最终文本字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:26:05.700

进行查询以获取按 id 和限制 1 排序的 DESC 表

获取结果并在文本字段中打印

我认为您只需要一种方法来完成它而不是编码，因为它是一个基本查询

我希望这可以帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T10:28:04.517

如果没有看到代码和表格结构，很难提出建议。但你仍然可以做类似的事情

```
$query = "select * from users order by id desc limit 1"; 
```

用户的表结构是

```
---------------------
   id   |   username
---------------------
    1   |   test
    2   |   new_user 
```

因此，在这种情况下，运行查询时将返回“new_user”行

# sql - 存储过程中的多个选择语句以获得所需的结果

> ID：14787098
> 
> 赞同：1
> 
> 时间：2013-02-09T10:22:31.447
> 
> 标签：sql, sql-server-2008

大家好，我有两张表`tblTechnology`，`tblQuestions`其中`tblTechnology`包含有关技术的信息，例如`Asp.net, c# and all`并`tblQuestions`保存以下信息`QuestionID] ,[QuestionTitle] ,[QuestionDesc] ,[DatePosted] ,[UserName] ,[TechID] ,[viewCount] ,[ReplyCount]`

最初我编写了一个存储过程来获得所需的结果，现在我想从中获取每种技术的最新插入记录`tblQuestions`，这是我的数据`tblquestion`

![在此处输入图像描述](../Images/f59100c3eaf57073296e230f9000f38f.png)

从此我想从每种技术中获取最后插入的问题 ORDER BY Dateposted

这是我最初写的

```
 SELECT TechName,TechDesc, tblTechnology.TechID as ID, COUNT(QuestionDesc) AS 
  'Totalposts',sum(ReplyCount) as ReplyCount FROM tblTechnology LEFT JOIN 
  tblQuestions ON tblQuestions.TechID = tblTechnology.TechID 
     GROUP BY tblTechnology.TechID, TechName,TechDesc 
```

结果如下

![在此处输入图像描述](../Images/eed3372b6c1fa4869a65a9c276b96850.png)

我想要我的`QuestionTitle`,`DatePosted`并`Username`包含在结果中，所以有人可以帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T10:36:42.070

[http://www.sqlfiddle.com/#!3/f5fe6/5](http://www.sqlfiddle.com/#!3/f5fe6/5)

```
WITH A AS (
    SELECT top(1) WITH ties Q.TechID
        ,QuestionID
        ,QuestionTitle
        ,DatePosted
        ,Username
    FROM tblTechnology T LEFT JOIN tblQuestions Q ON Q.TechID = T.TechID
    ORDER BY row_number() over(partition BY Q.TechID ORDER BY Dateposted DESC)
)
SELECT * FROM A
OUTER apply (SELECT count(QuestionDesc) Totalposts, sum(ReplyCount) ReplyCount
    FROM tblQuestions WHERE A.TechID=tblQuestions.TechID) D 
```

# php - PHP：有什么方法可以保护我的 RSS 提要？

> ID：14787106
> 
> 赞同：-1
> 
> 时间：2013-02-09T10:23:16.230
> 
> 标签：php, rss, feed

在我的网站上，我的内容也可以通过 RSS 提要访问。有什么方法可以保护这些提要？我的意思是，有什么方法可以让用户将这些 RSS 提要添加到他们的 RSS 阅读器中，但将其阻止给我的竞争对手（因为现在他们可以通过 RSS 加载我的数据并直接提供给他们自己的客户）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:44:16.470

并不真地。

您可以做的是，根据内容，使来源（您）可识别。

即使这样，某些客户也可能*更喜欢*使用您的竞争对手之一的便利，因为他们聚合了其他更感兴趣的东西。如果您阻止了这种可能性（而不仅仅是在项目的某处添加“by user984621”），那么这些客户*可能会将*您视为站在他们和他们想要的东西之间的人。虽然他们确实可能永远不会成为*您的*客户，但为什么要特意给他们带来不便呢？

也就是说，您可以使用某种 URL*标识*方案，例如

```
http://yoursite.com/rss/58ee09937d51f3886dcd0c0ea91c053e/channel1/rss2.0.xml 
```

并按 ID 记录 RSS 访问记录。这样您就可以监控谁在获取该数据，甚至可以有选择地在某些提要上拔掉插头。甚至有可能（**但值得吗？**）通过监控竞争对手的信息来自动监控这种情况。当相关性出现时，可以逐步限制提要来自哪个 ID。

然后只需使用安德罗波夫文档方案 - 自动在一半的候选提要中注入一个迹象。如果目标提要中的迹象浮出水面，您就知道它来自哪一半，并且您已将候选提要的数量减半。重复直到只剩下一个候选人。该计划可能会因多个候选人之间的勾结而延迟，但不会被击败；也许您甚至可以在*每个提要*中注入一个 ID （但它们可能会在此过程中被重写）。

到那时，如果有与提要相关的许可协议，很容易获得违反它的证据，并要求任何人停止并停止。你想在那条路上走多远……以及是否真的值得麻烦……只有你能说。

# android - 如何在 sencha touch 2 中设计这样的面板

> ID：14787107
> 
> 赞同：0
> 
> 时间：2013-02-09T10:23:17.453
> 
> 标签：android, extjs, sencha-touch, sencha-touch-2

我在 sencha touch 工作了将近一个月，但在 sencha 中找不到像下面这样设计 UI 的方法。

![在此处输入图像描述](../Images/d6c4592f7629e7b5c04e5d932456b4a6.png)

上面的面板是使用 Jquery mobile 创建的。

如何在 sencha 中创建这样的面板？

煎茶触控面板看起来不像上面那么漂亮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T00:51:49.750

是的，它只是面板中的一些按钮。他们大概会在下面。您必须编辑 CSS（边框半径、阴影等），但基本设置非常简单：

```
{
    xtype: 'panel',
    layout:{
        type:'hbox'
    },
    items:[
        {
            xtype:          "button",
            text:           'Register with X',
        },
        {
            xtype:          "button",
            text:           'Use Facebook Account',
        },
        {
            xtype:          "button",
            text:           'Use Twitter Account',
        }
    ]
}; 
```

# java - 静态嵌套类如何拥有这个指针

> ID：14787115
> 
> 赞同：0
> 
> 时间：2013-02-09T10:24:31.177
> 
> 标签：java

今天我正在阅读有关静态嵌套类的内容，由于下面的代码，我有点困惑。

```
class testOuter {
    int x;
     static class inner {
       int innerVar; 
    public void testFunct() {
        x = 0;       // Error : cannot make static reference to non static field
        innerVar = 10;
        outerFunc(this);
     }
     }
     static void outerFunc(SINGLETON s) {

     }
} 
```

我对静态嵌套类的理解是，它的行为就像外部类的静态成员。它只能引用静态变量，并且可以调用静态方法。从上面的代码来看，错误`x=0`是可以的。

但我感到困惑的是，如果它的行为类似于静态块，那么它允许我修改不是静态的 innerVar，以及它如何拥有这个指针。因此，如果嵌套类是静态的，那么内部的方法还是不是隐式静态的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:28:31.850

写`static int x`而不是`int x`，那么它将起作用。正如您自己所说，静态内部类只能访问外部类的静态成员。由于`x`在您的代码中不是静态的，因此您无法访问它。

附言

请注意，所有普通类都是静态的，即每次应用程序运行都存在一个类信息实例。因此，当您声明内部类为 时`static`，您只需声明它与普通类一样。

相反，非静态内部类是不同的。非静态内部类的每个实例都是一个闭包，即它与外部类的某个实例相关联。即你不能在不考虑外部类实例的情况下创建非静态内部类的实例。

聚苯乙烯

啊抱歉，您没有突出显示`this`and `innerVar`。两者都是内部类的非静态成员，因此您可以访问它们。只有属于 OUTER 类的非静态成员才能访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T10:29:56.593

`this`与任何其他类的含义相同。它指`instance`的是类的电流。静态内部类可以被实例化（通常是）：

```
Inner inner = new Inner(); 
```

静态内部类的工作方式与任何其他类完全相同。唯一的区别是它可以通过将其设置为包含类的私有来使其对其他类不可见。

编译示例：

```
public class Course {
    private List<Student> students;

    public Course(Collection<Student> students) {
        this.students = new ArrayList<>(students);
        Collections.sort(this.students, new StudentComparator(-1));
    }

    private static class StudentComparator implements Comparator<Student> {
        private int factor;
        StudentComparator(int factor) {
            this.factor = factor;
        }

        @Override
        public int compare(Student s1, Student s2) {
            return this.factor * (s1.getName().compareTo(s2.getName());
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T10:34:23.537

```
class testOuter {
   static int x;

   static class inner {
     int innerVar; 
     public void testFunct() {
       x = 0;       
       innerVar = 10;
     }
   }

   static void outerFunc(SINGLETON s) {
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T10:36:46.940

> 但我感到困惑的是，如果它的行为类似于静态块，那么它允许我修改不是静态的 innerVar

从静态内部类，您不能引用**外部类的非静态成员**。 `innerVar`属于您的静态内部类，因此在您访问它时没有错误。

# apache - Access localhost through IP behind proxy

> ID：14787116
> 
> 赞同：0
> 
> 时间：2013-02-09T10:24:35.240
> 
> 标签：apache, proxy, localhost

I have apache server running on my machine. So when I type

```
localhost/test.html 
```

on my browser's address bar, it correctly opens a test page which I have created. But when I try to open it by

```
<myIPAddress>/test.html 
```

it doesn't open. I am accessing the internet through proxy. Moreover, when I access internet without proxy, it correctly opens test page.
Do I have to do some proxy setting in apache configuration or else ?

# html - 对齐导航和标题

> ID：14787121
> 
> 赞同：0
> 
> 时间：2013-02-09T10:25:18.563
> 
> 标签：html, css

我的标题部分有点混乱。我的导航菜单被放在实际标题下方。我尝试将显示更改为内联，但是当我对#navmenu 执行此操作时，它会清除颜色并完全保持不变。

我知道对于我提出的几乎所有问题可能都有一个简单的答案，但是有人可以帮助我吗？

HTML：

```
<!DOCTYPE html>

<html>

    <head>
        <meta name="Description" content="This is your test website!"/>
        <meta name="author" content="Me!"/>
        <title>ReallyGoodPie | Home</title>
        <link type="text/css" rel="stylesheet" href="css/style.css"/>
    </head>

    <body>

        <div id="wrapper">
            <nav id="navmenu">
            <div id="title">
                <h1>Title</h1>
            </div>

                <ul>
                    <li>Home</li>
                    <li>About</li>
                    <li>Tutorials</li>
                    <li>Services</li>
                    <li>Contact Us</li>
                </ul>
            </nav>

            <aside id="sidenews">

            </aside>

            <div id="center">

                <section id="mainsection">
                    <article>
                        <header>
                            <hgroup>
                                <h1>This is a test</h1>
                                <h2>I like tests!</h2>
                            </hgroup>
                        </header>
                        <section>
                            <p>This is the main section of my section (sectception)</p>
                        </section>
                        <footer>
                            <p>Time and date</p>
                        </footer>
                    </article>
                </section>

            </div>

            <footer id="cright">
                <p>This is the copyright section. All rights reserved.</p>
            </footer>
    </body>

</html> 
```

CSS：

```
*{
margin: 0;
padding: 0;
}

header, section, footer, aside, nav, article, hgroup{
    display: block;
}

a{
    text-decoration: none;
    color: #FFF;
}

a:hover{
    color: #333399;
}

#wrapper{
    width: 100%;
    margin: 20px auto;
    margin-top: 0px;
    text-align: left;
    background-color: #FFF;
}

#navmenu{
    background: #3366CC;
    color: #eee;
    text-align: right;
    height: 100px;
    padding: 0;
    margin:0;
    float: top;
    width: 100%;
}

#navmenu li{
    display: inline-block;
    list-style: none;
    padding: 20px;

}

#navmenu ul{
    padding-right: 10px;
}

#navmenu li:hover{
    color: #FFF;
    background: #3399FF;
    border-radius: 5px;
    -moz-border-radius: 5px;
    padding-top: 10px;
    padding-bottom: 10px;
}

#mainsection{
    float:left;
    width: 630px;
    margin:30px;
    margin-top: 2
    background-color:#FFF;
    color: #222;
    text-align: left;

}

#cright{
    text-align:center;
    background-color: #AAA;
    clear: both;
}

#center{
    width: 1000px;
    height: 1000px;
    background-color:#FFF;
}

#sidenews{
    float:right;
    width: 250px;
    height: 940px;
    margin: 0px 0px;
    padding: 30px;
    background-color:#FFF;
}

#title{
    text-align: left;
    padding: 0;
    padding-top: 10px;
    padding-left: 10px;
    width: 200px;
}

h1{
    width: 100px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T10:30:32.873

如果我理解您的“问题”，您希望标题位于导航的左侧吗？在这种情况下，您需要使用：

```
#title
{
    float: left;
} 
```

[http://jsfiddle.net/z3F4x/](http://jsfiddle.net/z3F4x/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T10:31:09.867

将 float 属性设置为 on`navmenu ul`和`title`to`left`

```
#title{
    text-align: left;
    padding: 0;
    padding-top: 10px;
    padding-left: 10px;
    width: 100px;
    float: left;
}

#navmenu ul{
    padding-right: 10px;
    float:left;
} 
```

工作示例：http: [//jsfiddle.net/J5Zvn/](http://jsfiddle.net/J5Zvn/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T10:33:18.710

如果你想把你的标题移到导航菜单之外，如果你想在上面，或者如果你想在下面

```
 <div id="wrapper">
          <div id="title">
                    <h1>Title</h1>
                </div>
            <nav id="navmenu">

                <ul>
                    <li>Home</a>
                    <li>About</li>
                    <li>Tutorials</li>
                    <li>Services</li>
                    <li>Contact Us</li>
                </ul> 
```

# java - 活动主要错误

> ID：14787122
> 
> 赞同：0
> 
> 时间：2013-02-09T10:25:23.007
> 
> 标签：java, android

`Activity_main.xml`存在但仍然给出错误`MainActivity.java` 谁能告诉我这里的错误是什么？

```
package com.example.hellotabwidget;

import android.R;
import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

> activity_main 无法解析或不是字段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:31:00.357

删除线

```
import android.R; 
```

并导入`R`适当的包

在这一行

```
setContentView(R.layout.activity_main) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T10:44:10.543

清理您的项目工作区并重建一次

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T10:46:18.403

你所需要的只是改变这一行：

```
import android.R; 
```

到这一行（如果`com.example.hellotabwidget`是您的应用程序的基本包）

```
import com.example.hellotabwidget.R; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T10:50:19.300

**金句：**

照顾**进口android.R;** ，它会导入内置的 R 文件，除非您想访问内置资源，否则它在您的项目中不需要。

更多关于：[android.R](http://developer.android.com/reference/android/R.html)或[这里](http://www.yugandroid.in/android-tutorials/r-java-file.html)。

# database - CakePHP model, unknown column in fieldlist

> ID：14787124
> 
> 赞同：0
> 
> 时间：2013-02-09T10:25:26.510
> 
> 标签：database, cakephp, model, cakephp-2.0

I have this model file:

```
// Myfan.php
class Myfan extends AppModel {
    var $name = 'Myfan';
    var $useTable = 'myfans';

    function getAll(){
        return $this->find('all');
    }

} 
```

I try this query (which is simplified to isolate the problem) inside my controller class.

```
$Data=$this->Myfan->find('all',
            array(
                'limit' => 10
        )); 
```

From MySQL I get this error:

```
SQLSTATE[42S22]:
   Column not found: 1054 Unknown column 'Myfan.name' in 'field list' 
```

My table structure like this:

```
CREATE TABLE IF NOT EXISTS `myfans` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `screen_name` varchar(50) CHARACTER SET utf8 NOT NULL,
  `age` int(20) DEFAULT NULL,
  `color` int(10) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=705314 ; 
```

I removed `myapp_cake_model_default_mydatabase_myfans` file from `/httpdocs/app/tmp/cache/models` folder. Cake created file automatically but I still get the same error. How can I solve this?

I even don't have "name" field inside my table now. But I'm not sure whether I had before or not. Where does Cake checks for that field?

**Edit**: I get the same error when I change query to this:

```
$Data=$this->Myfan->find('all', array(
        'conditions' => array('Myfan.screen_name' => $screenname),
        'order' => array('Myfan.id DESC')
    )); 
```

Also my AppModel

```
// AppModel.php
App::uses('Model', 'Model');

class AppModel extends Model {
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:35:02.320

如果您使用不同的显示字段，您还需要告诉模型：

```
$this->displayField = 'screen_name'; 
```

对于“名称”和“标题”蛋糕能够自动检测。

# javascript - how do i use cakephp 2.2 jshelper to call other jshelper functions?

> ID：14787125
> 
> 赞同：1
> 
> 时间：2013-02-09T10:25:40.910
> 
> 标签：javascript, cakephp, cakephp-2.0

I have the following code:

```
$this->Js->get('#get_meters_today')->event('click',
    $this->Js->request(
        array('action' => 'getMetersToday'),
        array('async' => true, 'update' => '#meters_today')
    )
);

$this->Html->scriptBlock(
    $this->Js->domReady(
        $this->Js->request(
            array('action' => 'getMetersToday'),
            array('async' => true, 'update' => '#meters_today')
        )
    ), array('inline' => false)
); 
```

what I want to do is just have the `Js->request` written once and referred to by the `click` method and the `domReady` method. How do I do this?

Thanks

# sencha-touch - Changing the active colors of the buttons in toolbar in sencha using SASS

> ID：14787129
> 
> 赞同：0
> 
> 时间：2013-02-09T10:26:36.183
> 
> 标签：sencha-touch, sass, compass-sass

I'm looking to change my button colors and active colors of buttons in toolbar in sencha. After following some tutorial i got this.

My sample sass code:

```
@mixin sencha-toolbar-ui('toolbarcolour', #333333,'glossy') {
      $toolbar-border-color: darken(#333333, 50%);
      $toolbar-button-color: darken(#0088CC, 10%);

      .x-toolbar-#{toolbarcolours} {
        @include background-gradient(#333333, 'glossy');

        .x-toolbar-title {
          @include color-by-background(#FFFFFF);
          @include bevel-by-background(#FFFFFF);
        }

        .x-button, .x-field-select .x-input-text, .x-field-select:before {
          @include toolbar-button(#0088CC, 'glossy');
        }
      }
    } 
```

When compile the code using Compass I'm getting the following error:

```
 error app.scss (Line 32: Invalid CSS after "...cha-toolbar-ui(": expected va
    riable (e.g. $foo), was "'toolbarcolour'...")
    Sass::SyntaxError on line ["32"] of D: Invalid CSS after "...cha-toolbar-ui(": e
    xpected variable (e.g. $foo), was "'toolbarcolour'..."
    Run with --trace to see the full backtrace. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:47:44.530

mixins 的参数需要命名，它们不能只是值的集合。在这里，我命名了参数并给了它们一个默认值：

```
@mixin sencha-toolbar-ui($class: toolbarcolour, $color: #333333, $style: glossy) {
    $toolbar-border-color: darken($color, 50%);
    $toolbar-button-color: darken(#0088CC, 10%);

    .x-toolbar-#{$class} {
        @include background-gradient($color, $style);

        .x-toolbar-title {
            @include color-by-background(#FFFFFF);
            @include bevel-by-background(#FFFFFF);
        }

        .x-button, .x-field-select .x-input-text, .x-field-select:before {
            @include toolbar-button(#0088CC, $style);
        }
    }
} 
```

# iphone - 无法使用自定义设置器设置属性

> ID：14787132
> 
> 赞同：0
> 
> 时间：2013-02-09T10:27:10.587
> 
> 标签：iphone, properties, location, core-location

我尝试使用我的 locationManager 实现以下功能：

开始更新用户位置

```
- (void)startStandardUpdates {
    if (self.locationManager == nil) {
        self.locationManager = [[CLLocationManager alloc] init];
    }

    self.locationManager.delegate = self;
    self.locationManager.desiredAccuracy = kCLLocationAccuracyBest;

    // Set a movement threshold for new events
    self.locationManager.distanceFilter = kCLLocationAccuracyNearestTenMeters;

    [self.locationManager startUpdatingLocation];

    CLLocation *currentLocation = self.locationManager.location;

    if (currentLocation) {
        self.currentLocation = currentLocation;
    }
} 
```

为我的属性实现自定义设置以发送通知

```
- (void)setCurrentLocation:(CLLocation *)currentLocation {
    self.currentLocation = currentLocation;
    NSLog(@"%f", currentLocation.coordinate.latitude);

    //Notify the app of the location change
    NSDictionary *userInfo = [NSDictionary dictionaryWithObject:self.currentLocation forKey:kIFLocationKey];
    dispatch_async(dispatch_get_main_queue(), ^{
        [[NSNotificationCenter defaultCenter] postNotificationName:kIFLocationChangeNotification object:nil userInfo:userInfo];
    });
} 
```

问题是：当我运行应用程序时，在调试模式下的“setCurrentLocation”方法中收到“BAD_EXEC（代码 2）”错误消息，应用程序已挂起。但我不明白这个问题。我错过了什么吗？据我所知，在“startStandardUpdates”中，如果位置管理器找到了用户的位置，则使用我的自定义设置器“self.currentLocation = currentLocation”更新属性“currentLocation”。

提前感谢您的帮助！关于塞巴斯蒂安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T10:31:34.950

您实现 setter 的方式是问题所在。self.currentLocation = ... 导致 setter 被调用，并且您在实现 setter 时调用它，这会导致无限循环。如下合成您的 ivar，并仅在 setter（和 getter）中使用 _variablename。

@synthesize currentLocation = _currentLocation;

//二传手

```
- (void)setCurrentLocation:(CLLocation *)currentLocation {
    _currentLocation = currentLocation;
    NSLog(@"%f", currentLocation.coordinate.latitude);

    //Notify the app of the location change
    NSDictionary *userInfo = [NSDictionary dictionaryWithObject:self.currentLocation forKey:kIFLocationKey];
    dispatch_async(dispatch_get_main_queue(), ^{
        [[NSNotificationCenter defaultCenter] postNotificationName:kIFLocationChangeNotification object:nil userInfo:userInfo];
    });
} 
```

# java - Can i search any person in linkedin with API or only people near me?

> ID：14787134
> 
> 赞同：1
> 
> 时间：2013-02-09T10:27:27.740
> 
> 标签：java, linkedin, linkedin-j

I am using the library linkedin-j to use the linkedin API in Java. I am testing the search functionality but it seems that only return people near me, and I need to search people who has not relation with me, or people from any university or something like that.

I am using this code:

```
 Map<SearchParameter, String> searchParameters = new EnumMap<SearchParameter, String>(SearchParameter.class);
 searchParameters.put(SearchParameter.KEYWORDS, "University of X");        

 People people = client.searchPeople(searchParameters);
 System.out.println("Total search result:" + people.getCount());

 for (Person person : people.getPersonList()) {
     System.out.println(person.getId() + ":" + person.getFirstName() + " " +
     person.getLastName() + ":" + person.getHeadline());
 } 
```

It returns me nothing.

However if i put my lastname in the parameters.

```
 searchParameters.put(SearchParameter.LAST_NAME, "MYLASTNAME"); 
```

It returns me only me.

Please, how can i search more people with this API?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:48:16.073

您必须寻找[开发](http://developer.linkedin.com/)人员以获取更多详细信息。根据我的链接，我们只能访问 1 级连接。您可以使用 LinkedIn [REST 控制台](http://developer.linkedinlabs.com/rest-console/)尝试更多...希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T07:12:56.083

要访问网络外的人，请使用 Factes

```
 if(!searchParameters.isEmpty()) {
              System.out.println("Searching for users.");
             facets  = new ArrayList<Parameter<FacetType,String>>();
             facets.add(new Parameter<FacetType, String>(FacetType.NETWORK, RelationshipCodes.FIRST_DEGREE_CONNECTIONS));
              facets.add(new Parameter<FacetType, String>(FacetType.NETWORK, RelationshipCodes.OUT_OF_NETWORK_CONNECTIONS));
              facets.add(new Parameter<FacetType, String>(FacetType.NETWORK, RelationshipCodes.SECOND_DEGREE_CONNECTIONS));

            } 
```

使用 Follow Api 访问除名字、姓氏、id 之外的配置文件属性。

```
 peopleSearch = client.searchPeople(searchParameters, EnumSet.of(ProfileField.FIRST_NAME, ProfileField.LAST_NAME, ProfileField.ID, ProfileField.HEADLINE,ProfileField.DISTANCE), EnumSet.of(FacetField.NAME, FacetField.CODE, FacetField.BUCKET_NAME, FacetField.BUCKET_CODE, FacetField.BUCKET_COUNT), facets); 
```

# android - Cant get the response number from HttpResponse

> ID：14787136
> 
> 赞同：0
> 
> 时间：2013-02-09T10:27:34.613
> 
> 标签：android, post

I have a piece of code that sends post packet to somewhere. I want to output to my screen the status code, eg 200 for OK, or 400 for bad request.. either the number or the string, what i have at the moment:

```
response.getStatusLine().getStatusCode() 
```

where response is an HttpResponse, but i need to compare it to HttpStatus.SC_OK or whatever. the post is happening inside an AsyncTask class, which executes the post.execute() object. the return value is some "com.example.....postAsync@#NUMBER#". the number is something random, not a response type. what should i do?

Edit: Some more code:

```
HttpResponse response = null;
StringEntity tmp = null;
HttpPost httpPost = null;
DefaultHttpClient httpClient;
HttpContext localContext;
    public String post(String url,String data) {
        httpClient = new DefaultHttpClient();
        httpPost = new HttpPost(url);
        localContext = new BasicHttpContext(); 
        String ret = "";
        try {
            tmp = new StringEntity("value={ \"n\": " + data + " }","UTF-8");
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        }
        httpPost.setEntity(tmp);
        httpPost.setHeader("Content-Type", "application/x-www-form-urlencoded"); 
        try {
            response = httpClient.execute(httpPost,localContext);
            if (response != null) {
                ret = "" + response.getEntity();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        return ret;
    } 
```

Its like im getting the content of the response, where im only interested if its sent ok or not.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:53:09.697

试试这样：

```
response = httpClient.execute(httpPost,localContext);
StatusLine statusLine = response.getStatusLine();
int statusCode = statusLine.getStatusCode(); // This will be 200 or 404, etc. 
```

# java - How to disable log4j in web environment?

> ID：14787137
> 
> 赞同：1
> 
> 时间：2013-02-09T10:27:36.280
> 
> 标签：java, log4j

Can any one please tell me how to disable log4j in web environment? In production environment without affecting the code, how to disable logging mechanism from our code?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:44:46.953

应仔细考虑完全禁用日志记录。更好的选择是在 log4j.properties 中的包级别停用/更改日志级别：

```
# Print only messages of level WARN or above in the package com.foo.
log4j.logger.com.foo=WARN 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T10:37:32.650

您将需要更改 log4j.properties 文件。如果你不能这样做，你可以使用 slf4j 项目让你的 log4j 调用进入 slf4j，然后你可以告诉它使用你想要的任何日志后端。要么 slf4j-jdk14 使其进入大多数容器处理的标准日志记录，要么 slf4j-nop 使 slf4j 沉默。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T10:38:33.017

如果您对 log4j 使用 XML 配置，则可以启用对“热”配置更改的支持。例如，要每 10 秒轮询一次配置的更改，请像这样加载您的配置：

```
DOMConfigurator.configureAndWatch("log4j.xml", 10000); 
```

这样，您可以在不更改代码甚至不重新启动应用程序的情况下更改日志级别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T10:30:20.977

你有 log4j.properties 文件，你也有报告级别，如果你当前的级别是`ERROR`或者不是`OFF`，你应该把它改成`OFF`: 比不会写报告。

这是允许的不同报告级别的[链接。](http://www.tutorialspoint.com/log4j/log4j_logging_levels.htm)

# asp.net-mvc-3 - How to make Multi lingual application in asp.net mvc 3 using Razor view engine with resource file

> ID：14787138
> 
> 赞同：0
> 
> 时间：2013-02-09T10:27:36.660
> 
> 标签：asp.net-mvc-3, razor

I am beginner in mvc and I need an introduction How to make Multi Language Application in asp.net mvc 3 using Razor view engine with resource file

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:31:23.013

我建议你阅读官方教程：[http ://www.asp.net/mvc/overview/internationalization](http://www.asp.net/mvc/overview/internationalization)

# xcode - Xcode 360 panorama video

> ID：14787140
> 
> 赞同：1
> 
> 时间：2013-02-09T10:27:45.263
> 
> 标签：xcode, video, pan, 360-degrees

Anyone met with the development application to view panoramic video 360? Do you have any ideas for this or tutorials?

I find this [http://www.ptgrey.com/products/ladybugSDK/](http://www.ptgrey.com/products/ladybugSDK/)

But I don't know how to work with it

or there is another option - to realize this in html 5 [http://krpano.com/docu/html5/](http://krpano.com/docu/html5/) # fact

but with this, I also did not work

Do you have any experience in this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:11:08.893

查看 www.gopano.com 和他们的播放器（用于非商业用途）：[https ://github.com/EyeSee360/Pantaloons](https://github.com/EyeSee360/Pantaloons)

艾美

# php - 将动态参数插入 jQuery datepicker

> ID：14787144
> 
> 赞同：1
> 
> 时间：2013-02-09T10:28:09.633
> 
> 标签：php, datepicker

我正在尝试将动态值插入

```
日期选择器（）
```

方法。

我*可以*像这样插入一个变量：

```
<html>
<head>
<?php $date='2-15-2013'; ?>

<script>
var date = '<?php echo $date; ?>';
/* create an array of days which need to be disabled */
var disabledDays = [
        date,
        "2-21-2013",
        ];

/* utility functions */
function bookedDays(date) {
var m = date.getMonth(), d = date.getDate(), y = date.getFullYear();

for (i = 0; i < disabledDays.length; i++) {
  if($.inArray((m+1) + '-' + d + '-' + y, disabledDays) != -1 ) {
      return [false];
  }
}
return [true];
}

/* create datepicker */
jQuery(document).ready(function() {
jQuery('#datepicker').datepicker({
  minDate: 0,
  maxDate: "+3M +10D",
  dateFormat: 'dd MM, yy',
  constrainInput: true,
  beforeShowDay: bookedDays
 });
});
</script>

</head>
<body>
<p>Date: <input type="text" id="datepicker" /></p>
</body> 
```

并且日期“2-15-2013”​​已被正式禁用。为什么我不能再插入一串值说：

```
$dates = ['2-21-2013', '2-24-2013', '2-27-2013'];
$unavailable = array();
foreach($dates as $date){
    array_push( $unavailable, $date);
}
$unavaildays = implode(',', $unavailable);
$string = "{$unavaildays},";
?>

<script>
var dates = '<?php echo $string; ?>';
/* create an array of days which need to be disabled */
var disabledDays = [
        dates
        "2-21-2013",

    ];
/* utility functions */
function bookedDays(date) { ... 
```

日期：

```
2-21-2013,2-24-2013,2-27-2013,
```

成为残疾人？我的值是在运行时在服务器上解析的，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:33:25.060

您错过了日期周围的引号：

```
$dates = ['"2-21-2013"', '"2-24-2013"', '"2-27-2013"']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:04:09.567

正如@ahoo 回答的那样，引号有问题，但这还不是全部。似乎`disabledDays`也以错误的方式分配`dates`.

我会推荐这样的东西：

```
<?
$dates = ['2-21-2013', '2-24-2013', '2-27-2013'];
$unavailable = array();
foreach($dates as $date){
    array_push( $unavailable, "'$date'");
}
$unavaildays = '[' . implode(',', $unavailable) . ']';
?>
<script>
var disabledDays = <?= $unavaildays?>;
disabledDays.push('2-21-2013'); 
```

这样你就有了由 php 制成的正确的初始数组，并且你可以在 javascript 中添加更多的日期。

**现在，出了什么问题：**

当您`dates`以这种方式添加时：

```
var dates = '<?php echo $string; ?>';
/* create an array of days which need to be disabled */
var disabledDays = [
        dates
        "2-21-2013",

    ]; 
```

结果数组是

```
[
    '2-21-2013,2-24-2013,2-27-2013',
    '2-21-2013'
] 
```

注意第一个数组值，它不是 3 个日期，它是由 3 个日期粘合而成的字符串。

# web - 测试环境中使用哪个数据库 EAN 沙箱？

> ID：14787147
> 
> 赞同：0
> 
> 时间：2013-02-09T10:28:19.567
> 
> 标签：web, sandbox

我想问一下，当我们使用EAN（Expedia Affiliated Network）沙箱作为测试环境时，沙箱使用的是哪个数据库？

我的意思是它是本地主机数据库还是有一些由 EAN 托管的 Live Server 数据库镜像数据库来服务沙盒的请求？

或者如果我们可以根据沙盒的配置使用这两个数据库中的任何一个（考虑到存在镜像数据库），那么如何进行配置？我知道测试环境的 CID 为 55505，但我不确定数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:09:27.490

[Expedia Affiliate Network (EAN)](http://devhub.ean.com/V3sandbox/index.asp)沙盒使用生产数据。沙盒对 CID 55505 和以有限方式设置的 apiKey 的使用是测试环境的含义。此外，该网页的设计目的是具有教育意义，而不是您用来销售酒店的东西。

# gcc - CUDA 和 gcc 兼容性问题

> ID：14787148
> 
> 赞同：8
> 
> 时间：2013-02-09T10:28:26.730
> 
> 标签：gcc, ubuntu, cuda

我收到了这个错误

> /usr/local/cuda-5.0/bin/../include/host_config.h:82:2: 错误：#error -- 不支持的 GNU 版本！不支持 gcc 4.7 及更高版本！make: *** [src/Throughput.o] 错误 1

在 host_config.h 中，它们确保兼容 4.6

```
#if __GNUC__ > 4 || (__GNUC__ == 4 && __GNUC_MINOR__ > 6)

#error -- unsupported GNU version! gcc 4.7 and up are not supported! 
```

我有 4.6 和 4.7

> 选举@选择桌面：/usr/local/cuda-5.0/bin$ gcc gcc
> gcc-4.7 gcc-nm-4.7 gcc-4.6 gcc-ar-4.7
> gcc-ranlib-4.7

在互联网上，他们建议在 cuda bin 目录中添加指向 gcc-4.6 的链接。

所以我做了

> 选择@选择桌面：/usr/local/cuda-5.0/bin$ sudo ln -s /usr/bin/gcc-4.6 gcc

我得到另一个错误

```
**** Build of configuration Debug for project Throughput ****

make all 
Building file: ../src/Throughput.cu
Invoking: NVCC Compiler
nvcc -G -g -O0 -gencode arch=compute_20,code=sm_20 -odir "src" -M -o "src/Throughput.d"     "../src/Throughput.cu"
gcc: error trying to exec 'cc1plus': execvp: No such file or directory
make: *** [src/Throughput.o] Error 1

**** Build Finished **** 
```

再次谷歌搜索并没有给我带来一些明确的情况（gcc降级等）

所以我在这里问现在问题是什么，因为 CUDA 应该与 gcc-4.6 兼容......

我的系统：

*   Ubuntu 12.10 64b
*   cuda_5.0.35_linux_64_ubuntu11.10-1

这是我目前正在尝试编译的教程代码

```
/**
 * Copyright 1993-2012 NVIDIA Corporation.  All rights reserved.
 *
 * Please refer to the NVIDIA end user license agreement (EULA) associated
 * with this source code for terms and conditions that govern your use of
 * this software. Any use, reproduction, disclosure, or distribution of
 * this software and related documentation outside the terms of the EULA
 * is strictly prohibited.
 */
#include <stdio.h>
#include <stdlib.h>

static const int WORK_SIZE = 256;

/**
 * This macro checks return value of the CUDA runtime call and exits
 * the application if the call failed.
 */
#define CUDA_CHECK_RETURN(value) {                                          \
    cudaError_t _m_cudaStat = value;                                        \
    if (_m_cudaStat != cudaSuccess) {                                       \
        fprintf(stderr, "Error %s at line %d in file %s\n",                 \
                cudaGetErrorString(_m_cudaStat), __LINE__, __FILE__);       \
        exit(1);                                                            \
    } }

__device__ unsigned int bitreverse(unsigned int number) {
    number = ((0xf0f0f0f0 & number) >> 4) | ((0x0f0f0f0f & number) << 4);
    number = ((0xcccccccc & number) >> 2) | ((0x33333333 & number) << 2);
    number = ((0xaaaaaaaa & number) >> 1) | ((0x55555555 & number) << 1);
    return number;
}

/**
 * CUDA kernel function that reverses the order of bits in each element of the array.
 */
__global__ void bitreverse(void *data) {
    unsigned int *idata = (unsigned int*) data;
    idata[threadIdx.x] = bitreverse(idata[threadIdx.x]);
}

/**
 * Host function that prepares data array and passes it to the CUDA kernel.
 */
int main(void) {
    void *d = NULL;
    int i;
    unsigned int idata[WORK_SIZE], odata[WORK_SIZE];

    for (i = 0; i < WORK_SIZE; i++)
        idata[i] = (unsigned int) i;

    CUDA_CHECK_RETURN(cudaMalloc((void**) &d, sizeof(int) * WORK_SIZE));

    CUDA_CHECK_RETURN(cudaMemcpy(d, idata, sizeof(int) * WORK_SIZE, cudaMemcpyHostToDevice));

    bitreverse<<<1, WORK_SIZE, WORK_SIZE * sizeof(int)>>>(d);

    CUDA_CHECK_RETURN(cudaThreadSynchronize());
    // Wait for the GPU launched work to complete
    CUDA_CHECK_RETURN(cudaGetLastError());
    CUDA_CHECK_RETURN(cudaMemcpy(odata, d, sizeof(int) * WORK_SIZE, cudaMemcpyDeviceToHost));

    for (i = 0; i < WORK_SIZE; i++)
        printf("Input value: %u, device output: %u\n", idata[i], odata[i]);

    CUDA_CHECK_RETURN(cudaFree((void*) d));
    CUDA_CHECK_RETURN(cudaDeviceReset());

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T11:48:48.577

问题源于 CUDA 工具链无法找到有效的 C++ 编译器。`nvcc`只是一个编译器驱动程序，它需要一个工作的 C++ 编译器来编译任何代码。

执行此操作的最正确方法 [注意您使用的是不受支持的 Linux 版本，因此使用此建议需要您自担风险]，是设置一个本地目录，其中包含指向受支持的编译器套件的链接（这意味着匹配、受支持的 gcc 版本和 g++) 并将`--compiler-bindir`参数传递给`nvcc`编译时。例如：

```
$ ls -l $HOME/cuda/bin
total 16
lrwxr-xr-x  1 talonmies  koti  16 Feb  9 12:41 g++ -> /usr/bin/g++-4.2
lrwxr-xr-x  1 talonmies  koti  16 Feb  9 12:41 gcc -> /usr/bin/gcc-4.2 
```

在这里，我有一组指向受支持编译器的链接。然后我可以这样编译：

```
$ nvcc --compiler-bindir=$HOME/cuda/bin -c -arch=sm_12 -Xptxas="-v" nanobench.cu 
ptxas info    : 0 bytes gmem
ptxas info    : Compiling entry function '_Z5benchIfLi128000EEvPjPT_i' for 'sm_12'
ptxas info    : Used 5 registers, 28 bytes smem, 12 bytes cmem[1] 
```

在不支持系统编译器的情况下，这可能是使用替代编译器的最安全和侵入性最小的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-04T05:00:57.820

正如在其他地方发现的：

```
su -c 'update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.6 10'  
sudo update-alternatives --config gcc 
```

为我工作。我正在编译 CudaMiner。

# java - jzmq 似乎忽略了 XREP 上的 HWM

> ID：14787152
> 
> 赞同：2
> 
> 时间：2013-02-09T10:28:58.203
> 
> 标签：java, zeromq, jzmq

我希望这个程序中的线程在锁步中工作。但是，发送者在等待接收者赶上之前发送了大约 60000 条消息。我对 HWM 有什么误解？

如果我不启动接收者线程，则发送者在尝试发送第二条消息时会阻塞。

```
public static void main(String[] args) throws Exception {
    new Thread() {
        @Override
        public void run() {
            ZMQ.Context context = ZMQ.context(1);
            ZMQ.Socket socket = context.socket(ZMQ.XREP);
            socket.setHWM(1);
            socket.bind("tcp://127.0.0.1:8080");
            while (true) {
                try {
                    socket.recv(0);
                    byte[] msg = socket.recv(0);
                    System.out.println("Received: " + new String(msg, "UTF-8"));
                    Thread.sleep(1000);
                } catch (Exception ex) {
                    Logger.getLogger(App.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        }
    }.start();

    new Thread() {
        @Override
        public void run() {
            ZMQ.Context context = ZMQ.context(1);
            ZMQ.Socket socket = context.socket(ZMQ.XREQ);
            socket.setHWM(1);
            socket.connect("tcp://127.0.0.1:8080");
            Integer i = 1;
            while (true) {
                System.out.println("Sending: " + i);
                socket.send(i.toString().getBytes(), 0);
                i++;
            }
        }
    }.start();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:59:43.980

乍一看，我的想法和你一样，并对这种行为感到惊讶。但我做了一些研究，我想我找到了答案。

系统中还有其他缓冲区在这里起作用。设置高水位线只会影响其中之一。

[http://www.aosabook.org/en/zeromq.html#fig.zeromq.arch](http://www.aosabook.org/en/zeromq.html#fig.zeromq.arch)

调用 send 只是推送到管道，而不是等待它通过线路。相关的 I/O 线程将消息从管道中读取到网络上。因为您处于发送小消息的如此紧密的循环中，所以您似乎在发送第一条消息之前就已经填满了管道。

# android - Unable to send sms based on sensor values with gps

> ID：14787153
> 
> 赞同：0
> 
> 时间：2013-02-09T10:29:01.153
> 
> 标签：android, gps, sms, accelerometer, sensors

I am developing a app which will send the sms based on the sensor condition.

Sms consists of gps location as well as the sensor value.

When I try it in emulator gps values became null and when I try it in mobile phone it showed an error. (application stopped like that)

Here is my code:

```
public class MainActivity extends Activity implements SensorEventListener , LocationListener {

    private SensorManager sensorManager;
    TextView xCoor; // declare X axis object
    TextView yCoor; // declare Y axis object
    TextView zCoor; // declare Z axis object
    TextView aCoor;
    public static float x;
    public static float y;
    public static float z;
    String theftreport;
    String Text;

@Override
    public void onCreate(Bundle savedInstanceState) 
{

    //for sensor 
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    xCoor=(TextView)findViewById(R.id.xcoor); // create X axis object
    yCoor=(TextView)findViewById(R.id.ycoor); // create Y axis object
    zCoor=(TextView)findViewById(R.id.zcoor); // create Z axis object

    sensorManager=(SensorManager)getSystemService(SENSOR_SERVICE);
      sensorManager.registerListener(this,sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),SensorManager.SENSOR_DELAY_FASTEST);

    //for gps
   // super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    LocationListener mlocListener = new MainActivity();
    mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {    }

@Override
public void onLocationChanged(Location loc) {
 loc.getLatitude();
     loc.getLongitude();

     Text = "My current location is: " +"Latitud =" +
            " " + loc.getLatitude() +"Longitud = " + loc.getLongitude();

    // Toast.makeText( getApplicationContext(), Text, Toast.LENGTH_SHORT).show();

}

@Override
public void onSensorChanged(SensorEvent event){

    // check sensor type
    if(event.sensor.getType()==Sensor.TYPE_ACCELEROMETER){
    // assign direction

        x=event.values[0];
        y=event.values[1];
        z=event.values[2];
        xCoor.setText("X: "+x);
        yCoor.setText("Y: "+y);
        zCoor.setText("Z: "+z);

        if(x>=5)
        {

        theftreport=Text.toString() + "Crash rate : " + x;

        SmsManager smsManager = SmsManager.getDefault();
        smsManager.sendTextMessage("900XXXXXXX", null, theftreport, null,null);                                                       

        Toast.makeText(MainActivity.this, "message sent", Toast.LENGTH_LONG).show();

        }
                                        }

}

@Override
public void onProviderDisabled(String provider) {
     Toast.makeText( getApplicationContext(), "Gps Disabled", Toast.LENGTH_SHORT ).show();
}

@Override
public void onProviderEnabled(String provider) {
    Toast.makeText( getApplicationContext(), "Gps Enabled", Toast.LENGTH_SHORT).show();

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:01:24.717

当我遇到同样的问题时，我做了一个公共变量来存储我的位置值，并在 SMS 发送类中使用该变量而不是调用该函数。对不起，我也不知道确切的问题是什么。因为它正在工作，所以我没有尝试其他任何东西。

# java - Java split() 正则表达式

> ID：14787157
> 
> 赞同：1
> 
> 时间：2013-02-09T10:29:22.867
> 
> 标签：java, regex, string, split

我喜欢使用 split(regex) 函数将字符串拆分为数组。

我想用分号拆分它`;`- 但字符串 ( `\;`) 中也有“转义”分号，不应该用于拆分。

`.split(regex)`是否有用于执行此操作的函数的正则表达式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T10:30:47.190

用于`negative look-behind`拆分`semi-colon`前面没有`\\`：-

```
str.split("(?<!\\\\);"); 
```

您需要使用`4 backslashes`- 为 Java 转义一次反斜杠，然后为正则表达式再次转义 2 个反斜杠。

# ruby-on-rails-3 - Testing creating status is failing

> ID：14787159
> 
> 赞同：0
> 
> 时间：2013-02-09T10:29:30.713
> 
> 标签：ruby-on-rails-3

My test is not successfully creating a guideline and I cannot work out why.

The test in guidelines_controller_test.rb is

```
test "should create guideline when logged in" do
sign_in users(:tester)
assert_difference('Guideline.count') do
  post :create, guideline: { content: @guideline.content, hospital: @guideline.hospital, title: @guideline.title }
end 
```

My create action in guidelines_controller.rb is

```
def create
@guideline = Guideline.new(params[:guideline])

respond_to do |format|
  if @guideline.save
    format.html { redirect_to @guideline, notice: 'Guideline was successfully created.' }
    format.json { render json: @guideline, status: :created, location: @guideline }
  else
    format.html { render action: "new" }
    format.json { render json: @guideline.errors, status: :unprocessable_entity }
  end
end 
```

end

when I try to run the test it fails

```
 1) Failure:
test_should_create_guideline_when_logged_in(GuidelinesControllerTest) [test/functional/guidelines_controller_test.rb:36]:
"Guideline.count" didn't change by 1.
<4> expected but was
<3>. 
```

and the test.log shows (have tried to copy the relevant bit)

```
 Processing by GuidelinesController#create as HTML
  Parameters: {"guideline"=>{"content"=>"www.test.com", "hospital"=>"Test Hospital", "title"=>"Test title"}}
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 781720531 LIMIT 1
   (0.1ms)  SAVEPOINT active_record_1
  Guideline Exists (0.3ms)  SELECT 1 AS one FROM "guidelines" WHERE (LOWER("guidelines"."title") = LOWER('Test title') AND "guidelines"."hospital" = 'Test Hospital') LIMIT 1
   (0.1ms)  ROLLBACK TO SAVEPOINT active_record_1
  Rendered guidelines/_form.html.erb (256.5ms)
Completed 200 OK in 313ms (Views: 279.2ms | ActiveRecord: 0.8ms)
   (0.2ms)  SELECT COUNT(*) FROM "guidelines" 
   (0.1ms)  rollback transaction 
```

Can anyone help?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:56:59.113

看起来您正在尝试使用已经存在的标题/医院组合创建指南。你得到了正确的日志块——这一行：

```
Guideline Exists (0.3ms)  SELECT 1 AS one FROM "guidelines" WHERE [...] 
```

Rails 是否确保不存在重复的准则（您的模型中可能有“唯一”验证）。它找到匹配项，因此取消保存事务：

```
(0.1ms)  ROLLBACK TO SAVEPOINT active_record_1 
```

更改您尝试插入的标题和/或医院，它应该可以通过。

**编辑：**

根据我们在评论中的对话，我认为问题如下：您正在使用 进行初始化`@guideline`，`@guideline = guidelines(:one)`这会加载您在夹具文件中定义的名为“one”的指南。

但是，当您开始在 Rails 中运行测试时，它会自动将所有的固定装置加载到测试数据库中。因此，当您尝试使用 中的属性创建新指南时`@guideline`，您一定会*得到*重复！

解决此问题的最简单方法是在测试代码中内联定义新属性：

```
post :create, guideline: {
    content:  "This is my new content!",
    hospital: "Some Random Hospital",
    title:    "Some Random Title"
} 
```

希望有帮助！

# vb.net - 从两个表中获取数据到水晶报表中

> ID：14787160
> 
> 赞同：0
> 
> 时间：2013-02-09T10:29:35.307
> 
> 标签：vb.net, crystal-reports

我有两张桌子，第一张是员工的个人信息。第二个是有emp的付款细节。我想在同一张水晶报告上打印个人信息和付款详情。但是在这样做的时候，我面临的问题是，有多个付款细节，多次打印个人信息。个人信息应该只打印一次。应该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:54:34.487

将员工详细信息放在 中`Page Header Section`，将付款详细信息放在 中`Details Section`。见下图：

![在此处输入图像描述](../Images/6efa524df8f2b129f89218488a83ef94.png)

# tcl - 将一个 tcl 字解析成一个 tcl 命令列表，为 eval 或 uplevel 做好准备

> ID：14787162
> 
> 赞同：0
> 
> 时间：2013-02-09T10:29:38.303
> 
> 标签：tcl

我想写一个可以像这样使用的函数：

```
my_function {
    cmdA argA_1 argA_2
    cmdB argB_1 argB_2
    cmdC argC_1 argC_2
} 
```

我想通过使用实现 my_function `namespace eval ::my_internal_namespace [uplevel ...]`，可能在一个循环中。虽然这不是立即很有用，但我稍后会对其进行增强以做更多的事情`uplevel`。

`my_internal_namespace`将被定义为：

```
namespace eval my_internal_namespace {
  proc cmdA { args } {
      puts "$args"
  }

  proc cmdB { args } {
      puts "$args"
  }

  proc cmdC { args } {
      puts "$args"
  }
} 
```

我认为这种技术最终将允许 my_function 的调用者从 my_function 中声明他们想要的一些事实和行为，其中这些事实和行为的参数在调用者的上下文中进行评估，例如，获取变量的值或在调用者的命名空间和范围内执行其他替换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:13:49.907

为什么不直接将单词传递给`namespace eval`？这*几乎*就是 Tcl 在[`oo::define`](http://www.tcl.tk/man/tcl8.6/TclCmd/define.htm)命令等情况下所做的事情。作为脚本进行评估是解析一些受信任代码的一种非常简单的方法。

```
namespace eval ::my_internal_namespace $the_user_word 
```

对于不受信任的代码，建议使用安全的解释器。对于这些“小语言”方法，您最好创建一个[基本的安全解释器](http://www.tcl.tk/man/tcl8.6/TclCmd/interp.htm#M44)，隐藏您不想公开的剩余命令，并为您想要提供的所有命令添加别名。

```
set i [interp create -safe]
foreach cmd [$i eval {info commands}] {
    $i hide $cmd
}
foreach cmd {cmdA cmdB cmdC} {
    $i alias $cmd ::my_internal_namespace::$cmd
}
$i eval $the_user_word 
```

仅仅做一个相当昂贵的`namespace eval`; 如果代码相对受信任，我不会打扰。

# python - 名称“自我”未定义

> ID：14787163
> 
> 赞同：1
> 
> 时间：2013-02-09T10:29:48.310
> 
> 标签：python, django, python-2.x

```
class customerDetailView(DetailView):
    queryset = Customer.objects.get(name=self.name) # This line give error NameError: name 'self' is not defined
    context_object_name = 'customerDetail'
    template_name = "customer.html"
    allow_empty = True

    def __init__(self, name=None, *args):
        self.name = name 
```

给出错误 NameError: name 'self' is not defined

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T10:42:53.427

你应该把你的初始化代码放在里面`__init__`，而不是类主体：

```
class CustomerDetailView(DetailView):
    def __init__(self, name=None):
        self.name = name
        self.queryset = Customer.objects.get(name=self.name, None)
        self.context_object_name = 'customerDetail'
        self.template_name = "customer.html"
        self.allow_empty = True
    # stuff 
```

此外，作为不相关的旁注，您的代码混合使用了三种不同的样式。尝试阅读[PEP8](http://www.python.org/dev/peps/pep-0008/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T10:58:46.280

由于您想要自定义 a`DetailView`的查询集，因此正确的方法是覆盖该`get_queryset()`函数。请参阅[DetailView 的文档，](https://docs.djangoproject.com/en/dev/ref/class-based-views/generic-display/#detailview)其中显示了方法解析顺序。特别[`get_queryset()`](https://docs.djangoproject.com/en/dev/ref/class-based-views/mixins-single-object/#django.views.generic.detail.SingleObjectMixin.get_queryset)是被称为。

所以你的代码会变成这样：

```
class customerDetailView(DetailView):
    context_object_name = 'customerDetail'
    template_name = "customer.html"
    allow_empty = True

    def __init__(self, name=None, *args):
        self.name = name

    def get_queryset(self):
        return Customer.objects.get(name=self.name) 
```

您不能`self`以您现在的方式使用，因为`self`在类声明中不存在 a，只有在创建类的*实例*时才存在。

# ruby-on-rails - 无法在 Windows 7 中安装 rails - 文件意外结束错误

> ID：14787168
> 
> 赞同：2
> 
> 时间：2013-02-09T10:30:16.207
> 
> 标签：ruby-on-rails, ruby, rubygems

我是红宝石的新手。安装最新版本的 ruby​​ 后，我开始安装 sqlite3 和 rails 但我安装 rails 失败，按照指南，这是命令：

**gem install rails**

我得到了这个错误

> 错误：执行 gem 时 ... (Zlib::GzipFile::Error) 文件意外结束

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:01:04.323

大多数情况下，`Zlib::GzipFile::Error`RubyGems 在解析服务器响应时遇到问题。

当您的 Internet 连接/配置位于 RubyGems 不知道的代理之后时，就会发生这种情况。

请查看您的 Internet 选项以确定代理配置（它看起来像`http://user:pass@proxyserver:8080/`或类似（用户、通行证、代理服务器和端口是示例）

一旦你有了这些信息，你就可以告诉 RubyGems 使用它：

```
gem install rails --http-proxy=http://user:pass@proxyserver:8080 
```

或者您可以将其设置为环境变量：

```
SET HTTP_PROXY=http://user:pass@proxyserver:8080/ 
```

有关`gem help install`代理文档的更多详细信息，请参阅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T10:59:25.890

我发现了如何安装它，只需在最后添加 --ignore-dependencies 。

> gem install rails --ignore-dependencies

# drupal - Drupal 7：在管理菜单中添加一个简单按钮的模块

> ID：14787169
> 
> 赞同：2
> 
> 时间：2013-02-09T10:30:16.143
> 
> 标签：drupal, module

我正在尝试创建一个简单的模块，在 admin/config 菜单中添加一个按钮。我需要该按钮在单击时运行 php 脚本。到目前为止，我已经浏览了几十个教程，但我什至无法在 admin/config 菜单中将启用的模块视为一个项目（即使我使用了应该重定向到的代码`node/1`）。

这是我使用的代码：

```
function send_reminders_menu() {

$items['admin/config/reminders'] = array(
    'title' => 'Reminders Control Panel',
    'page callback' => 'drupal_goto',
    'page arguments' => array('node/1'),
    'access arguments' => array('access reminders control panel'),
    'weight' => 50,
    'type' => MENU_LOCAL_TASK,
  );
  return $items; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T11:03:51.813

更改`MENU_LOCAL_TASK` 为`MENU_NORMAL_ITEM`。

`MENU_LOCAL_TASK`期望 one-level_up 菜单路由器项为 a`MENU_DEFAULT_LOCAL_TASK`但`admin/config`不是。 `MENU_NORMAL_ITEM`添加一个普通的菜单项。

最后，不要忘记在进行更改时清除缓存。祝你好运！

# android - 位置监听器不工作

> ID：14787174
> 
> 赞同：1
> 
> 时间：2013-02-09T10:30:57.433
> 
> 标签：android, google-maps, location

**我已经使用该代码在 30 秒间隔和 30 米距离后播放 mp3 声音，但在手机处于睡眠状态**并且我已经行驶了 5 英里之后它不会播放。

如何使上面的代码工作？请帮忙。

提前致谢。

我有一个插件查询：onLocationChanged 方法是否知道我的最后位置？换句话说，如果我执行了这个语句：

```
locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 30, 30000, new MyLocationListener()); 
```

**mp3 文件会每 30 秒间隔和 30 米的距离自行执行吗？**或者我是否必须像这样在 ScheduledExecutorService 中执行语句：

```
ScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();
        executor.scheduleWithFixedDelay(new Runnable(){

            public void run() {

locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 30, 30000, new MyLocationListener());

            }

        }, 0, 600, TimeUnit.SECONDS); 
```

**总代码：**

```
locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 30, 30000, new MyLocationListener());

private class MyLocationListener implements LocationListener {

    public void onLocationChanged(Location location) {

        ///Audio file which plays everytime the above condition is met 
        mp3.start();

        );

        Toast.makeText(AndroidGPSSampleActivity.this, message, Toast.LENGTH_LONG).show();
    }

    public void onStatusChanged(String s, int i, Bundle b) {

        Toast.makeText(AndroidGPSSampleActivity.this, "Provider status changed",Toast.LENGTH_LONG).show();
    }

    public void onProviderDisabled(String s) {

        Toast.makeText(AndroidGPSSampleActivity.this,"Provider disabled by the user. GPS turned off",Toast.LENGTH_LONG).show();
    }

    public void onProviderEnabled(String s) {
        System.out.println("==onProviderEnabled=" + s);
        Toast.makeText(AndroidGPSSampleActivity.this, "Provider enabled by the user. GPS turned on",Toast.LENGTH_LONG).show();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:25:29.310

首先，我认为您需要检查您的位置参数是否是您的意思。你的 30 时间实际上意味着 30 毫秒，我想你想要 30 * 1000。你的距离是 30000 米，大约是 18 英里。所以我不认为你想要 30000，而是 30。

现在，只有在位置实际发生变化时才会根据这些参数通知您。因此，如果在 30 秒内该位置与上一个位置相同或在 30 米范围内，您将不会收到通知。此外，您正在使用网络提供商，在最好的情况下，如果您有 wifi 位置，您的准确度是 60 米，这意味着您可能需要移动更多距离才能收到通知。如果您要获取手机信号塔位置，您可能需要很长的路才能切换手机信号塔，从而切换位置。

# php - PHP stdClass 对象，使用常量访问

> ID：14787180
> 
> 赞同：4
> 
> 时间：2013-02-09T10:31:24.640
> 
> 标签：php, stdclass

以 JSON 格式接收响应，**$requestBody**保存 json 响应。该类的类型是stdclass。

现在，如果我使用它访问它

```
 $myCar=$requestBody->Car; 
```

$myCar 中的值是“Alpha”。到现在为止还挺好。

我已经定义了一个常量，例如在“MyConstants.php”中定义的

```
 define("ITEM1","Car"); 
```

所以，我正在尝试使用常量从 $requestBody 访问值。但我得到零。代码在下面的“index.php”中列出

```
<?php 

include 'MyConstants.php';

//Works 
$key=constant("ITEM1");
$carStr=$requestBody->key;

//Does not work 
$carStr2=$requestBody->constant("ITEM1");
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T10:33:52.960

尝试以下操作：

```
$requestBody->{ITEM1} 
```

您也可以考虑将 json 解码为数组：

```
$requestBody = json_decode($json, true);
$requestBody[ITEM1]; 
```

# c# - 按下删除按钮而不选择复选框时如何在客户端显示错误消息

> ID：14787189
> 
> 赞同：2
> 
> 时间：2013-02-09T10:32:01.490
> 
> 标签：c#, asp.net, gridview, textbox

当我没有`checkbox`在我的选择`gridview`并按下删除按钮时，它显示错误“没有选中复选框”但是当我选择`checkbox`并单击删除按钮后它仍然显示该错误不知道为什么？我没有使用任何数据库，我只是使用`datatable`and `gridview`。

这是我在删除按钮上的代码

```
protected void DeleteButton_Click(object sender, EventArgs e)
{

    var dt = (DataTable)ViewState["CurrentData"];

    if (dt == null)
    {
        return;
    }
    List<DataRow> rowsToDelete = new List<DataRow>();
    foreach (GridViewRow row in GridView1.Rows)
    {
        CheckBox cb = (CheckBox)row.FindControl("CheckBox1");
        if (cb != null && cb.Checked)
        {
            row.Visible = false;

            //remove row by its index as it should GridViewRow index == DataRow index
            //it is not the best way but from your code I dont have information how your GridView looks
            dt.Rows.RemoveAt(row.RowIndex);

            GridView1.DataSource = dt;
            GridView1.DataBind();

            GridView2.DataSource = dt;
            GridView2.DataBind();

            ViewState["CurrentData"] = dt;
        }
        else
        {
            lblError.Visible = true;
        }
        for (int i = 0; i < rowsToDelete.Count; i++)
        {
            dt.Rows.Remove(rowsToDelete[i]);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:34:55.373

我认为你必须使用

```
if (!Page.IsPostBack)
{

} 
```

页面加载功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T10:37:59.430

> ```
> lblError.Visible = true; 
> ```

将控件设置为可见后，所有回发都会记住该控件是可见的，并将继续显示该控件。你有两个选择：

*   `lblError.Visible = false;`没有错误时在您的代码中显式设置。
*   更改`lblError`您的`.aspx`文件以设置`EnableViewState`为`false`.

实际上，仔细观察：您的逻辑还有其他问题需要解决。您检查每一行，如果*任何*行的复选框未选中，则设置`lblError.Visible`为`true`. 根据您的文本`lblError`，您只需在*所有*行的复选框都未选中时使其可见。

```
bool allUnchecked = true;
foreach (GridViewRow row in GridView1.Rows)
{
    CheckBox cb = (CheckBox)row.FindControl("CheckBox1");
    if (cb != null && cb.Checked)
    {
        /* your existing code here */

        allUnchecked = false;
    }
    /* no else branch here */

    for (int i = 0; i < rowsToDelete.Count; i++)
    {
        dt.Rows.Remove(rowsToDelete[i]);
    }
}
lblError.Visible = allUnchecked; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T10:56:38.477

请运行此代码。

```
 protected void Button2_Click(object sender, EventArgs e)
 {
    var dt = (DataTable)ViewState["CurrentData"];

    if (dt == null)
    {
        return;
    }

    foreach (GridViewRow row in GridView1.Rows)
    {
        CheckBox cb = (CheckBox)row.FindControl("CheckBox2");
        if (cb != null && cb.Checked)
        {
            Label1.Visible = false;
            dt.Rows.RemoveAt(row.RowIndex);
            GridView1.DataSource = dt;
            GridView1.DataBind();

            GridView2.DataSource = dt;
            GridView2.DataBind();

            ViewState["CurrentData"] = dt;
        }
        else if (cb.Checked == false)
        {
            Label1.Visible = true;
        }
    }

} 
```

# winapi - 为什么我的汇编代码在中间停止执行？

> ID：14787192
> 
> 赞同：0
> 
> 时间：2013-02-09T10:32:11.773
> 
> 标签：winapi, assembly, x86

我正在编写一些汇编代码，并且出于某种原因在执行以下指令时：

```
mov [ds:0x666c44], eax   (NASM) 
```

子程序的执行停止。该子例程是从我的其他应用程序加载的 DLL 中调用的。0x666c44 是我要更改的全局变量的地址。

可能是什么问题？

# iphone - 在 phonegap 上创建项目时出错

> ID：14787193
> 
> 赞同：1
> 
> 时间：2013-02-09T10:32:13.377
> 
> 标签：iphone, cordova

我是Phonegap的新手。我已经下载了 cordova-2.4.0 并通过终端创建新项目。但我收到以下错误。

我按照命令运行

```
./create ~/Documents/Cordova22/HelloWorld org.apache.cordova.HelloWorld HelloWorld 
```

我收到以下错误

```
cat: some/path : No such file or directory
cat: some/path : No such file or directory
cat: Cordova/cordova-2.4.0/cordova-ios/bin/../CordovaLib/VERSION: No such file or directory 
```

请帮忙。谢谢你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T07:14:48.927

将 cordova-2.4.0 库（整个目录）放在创建项目目录的同一目录中。假设我的项目目标是“Documents/Cordova22/”，然后将 cordova-2.4.0 库放在同一目录中。

你的图书馆路径应该是这样的

```
"Documents/Cordova22/cordova-2.4.0" 
```

你的项目路径应该是这样的

```
"Documents/Cordova22/HelloWorld" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T10:40:40.193

我忘记将 cordova-2.4.0 库（整个目录）放在“Documents/Cordova22/”中。

# c#-4.0 - IIS 6 在部署时无法选择框架 4.0 dll

> ID：14787195
> 
> 赞同：0
> 
> 时间：2013-02-09T10:32:23.070
> 
> 标签：c#-4.0, iis-6

我有一个用框架 4.0 编写的服务并部署在 IIS 6、操作系统 64 位 Windows Server 2003 中。

从我做的步骤

```
1:Installed framework 4.0 of 64 bit
2 : C:\WINDOWS\Microsoft.NET\Framework64\v4.0.30319 aspnet_regiis –i
3: C:\WINDOWS\Microsoft.NET\Framework64\v4.0.30319\ServiceModelReg.exe –i
4: http://stackoverflow.com/questions/2009233/how-to-deploy-wcf-service-on-iis-6-0 
```

当部署在 IIS 7、操作系统 Windows Server 2008 中时，相同的代码工作正常

当我浏览 url 时，它显示服务工作正常。

当我使用服务时，它会抛出一个错误，告诉这里的长度无效；它正在尝试选择导致问题的框架 2.0 dll 导致问题的代码：`Encoding.Unicode.GetString(MachineKey.Decode)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T10:34:49.443

确保在服务虚拟目录的 ASP.NET 选项卡中选择了 .NET 4.0 Framework：

![在此处输入图像描述](../Images/1cd02706acbbf6ef80bc1bec3db243a0.png)

# android - 从后台服务访问数据库

> ID：14787197
> 
> 赞同：0
> 
> 时间：2013-02-09T10:32:41.350
> 
> 标签：android, android-sqlite, android-context, sqliteopenhelper

我想从 SERVICE 中的 SQLiteDatabse 访问数据。我创建了对象 db 并尝试从服务访问数据库，但它不起作用。要在服务的方法中访问数据库内容`onStart`我应该怎么做。我搜索了很多，但通过`getApplicationContext()`方法创建上下文对我不起作用。请帮助我提供访问服务中数据库的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:51:01.480

Android`Service`没有这种方法`onStart()`。您可以使用`onStartCommand()`或`onCreate()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:14:54.953

你必须选择，你能做什么。

**第一个选项如下：**

* * *

您始终使用静态上下文（例如 mainactivity），您始终可以通过该上下文访问数据库。你可以这样做：

```
public static Activity thi; 
```

**第二个选项如下：**

* * *

在您的服务中，您可以致电：

```
this.getApplicationContext(); 
```

使用此上下文，您还可以写入您的数据库。

此致

苹果浏览器

# android - 在android中阻止来电

> ID：14787198
> 
> 赞同：2
> 
> 时间：2013-02-09T10:32:41.907
> 
> 标签：android

我想在我的 android 应用程序中阻止/取消阻止来电。我可以使用下面的代码来做到这一点。

```
telephony = (TelephonyManager) this.getSystemService(Context.TELEPHONY_SERVICE);
customPhoneListener = new PhoneCallStateListener(MainActivity.this, vSMS);
start.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        telephony.listen(customPhoneListener, 
                         PhoneStateListener.LISTEN_CALL_STATE);
        Toast.makeText(MainActivity.this, "START", Toast.LENGTH_SHORT).show();
    }
});

stop.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        telephony.listen(customPhoneListener,
                         PhoneStateListener.LISTEN_NONE);
        Toast.makeText(MainActivity.this, "STOP", Toast.LENGTH_SHORT).show();
        }
    });
} 
```

但问题是当我点击开始按钮呼叫阻止服务激活然后我们进入主页呼叫阻止仍处于激活模式。（没关系）。但是当我打开我的应用程序并按下停止按钮时，呼叫不会解除阻止。它仍然被阻止。为什么？我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:00:51.457

您正在使用活动上下文获取电话对象，并且`customPhoneListener`我猜想在您的活动中被定义为实例变量。

但是，当您关闭活动（通过转到主屏幕）并再次打开它时，您将获得一个新的上下文，因此停止按钮几乎没有任何作用。

要解决此问题，您可以尝试以下操作：

1- 用户应用程序上下文

```
telephony = (TelephonyManager)  getApplicationContext().getSystemService(Context.TELEPHONY_SERVICE); 
```

2-确保侦听器对象`customPhoneListener`在您的应用程序的生命周期中是相同的，而*不是*您的活动。尝试制作`static`或定义它`application class`

# ruby - Ruby 语法。在下面的例子中，“=~”、“/ /i”、“{2}”做了什么？

> ID：14787206
> 
> 赞同：1
> 
> 时间：2013-02-09T10:34:34.800
> 
> 标签：ruby, syntax, combinations

```
raise NoSuchStrategyError unless some_string1[1] + some_string2[1] =~ /[RSP]{2}/i 
```

我没有得到 "=~ /[RSP]{2}/i" 部分。

如果你们有时间回答，我将不胜感激。

我的意思是 =~ 在那里做什么？

“/ /i”在那里做什么？

我猜测 /[RSP]{2}/i 会从 [RSP] 中生成所有可能的对。真的吗？那我们为什么需要 / /i 呢？为什么它不会在 irb 中产生对，当我输入 /[RSP]{2}/i 我从 irb 得到的只是

```
=> /[RSP]{2}/i 
```

而不是对。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T10:37:08.750

这是正则表达式（正则表达式）匹配的快捷方式。它不产生任何对。

`=~`运算符的意思是“左侧值是否与右侧正则表达式匹配？”

`/[RSP]{2}/`是一个正则表达式文字。你可以写它而不是`Regex.new("[RSP]{2}")`

最后，正则表达式文字的尾随`/i`意味着这个正则表达式应该不区分大小写。

# node.js - 如何在 Phonegap 中使用 cookie 与 Nodejs 服务器交互？

> ID：14787209
> 
> 赞同：0
> 
> 时间：2013-02-09T10:34:45.627
> 
> 标签：node.js, cordova, cookies

我写了一个应用程序（像 Twitter 这样的社交网络），我写的第一件事就是登录功能。

在服务器端，我使用 Nodejs、Expressjs 和 Mongoose 创建 RESTful Web 服务处理请求，但我不知道用户何时登录（从 Android 应用程序）如何将 cookie 保存到此设备，之后如果他们已经登录，如何在他们发布推文或评论之前先检查他们。

我想知道如何保存 cookie 或类似的东西，以及如何在向服务器发送 post get put 请求之前检查它是否已经登录。

我的理想是：在 Android 应用程序（Phonegap）中发送加密（用户+密码+密钥），服务器以 JSON 消息成功或失败响应。我不知道那会怎样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T22:34:01.420

详细了解什么是会话和 cookie，并使用[http://passportjs.org/](http://passportjs.org/)轻松进行身份验证

# mysql - Select form table A where value in table B

> ID：14787211
> 
> 赞同：0
> 
> 时间：2013-02-09T10:34:53.520
> 
> 标签：mysql

Table A

```
id    name
1     name1
2     name2
3     name3
4     name4 
```

Table B

```
id    userlist
1     1,2,3,4 
```

What I do now is

```
SELECT `userlist` FROM `table B` WHERE `id` = 1 
```

Then save the result and put into second query

```
SELECT `name` FROM `table A` WHERE `id` in ($userlist) 
```

Just wondering if got better way. I try

```
SELECT `name` FROM `table A` WHERE `id` in (SELECT `userlist` FROM `table B` WHERE `table B`.`id` = 1) 
```

But it only return 1 result.

EDIT*

DB structure can not be change since so many data inside. I just try to optimize the old code.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T10:43:42.293

You could use [FIND_IN_SET](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set):

```
SELECT `name`
FROM `table A` INNER JOIN `table B` ON
     FIND_IN_SET(`table A`.`id`, `table B`.`userlist`)
WHERE `table B`.`id` = 1 
```

but i would suggest you to normalize your tables.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T10:40:33.250

The proper way to solve this is changing the table definition and using JOINs. For example

Table A

```
id    name    b_id
1     name1   1
2     name2   1
3     name3   1
4     name4   1 
```

Table B

```
id    
1 
```

To get names from table A that have B id 1 you would write:

```
select name from A join B on A.b_id = B.id where B.id = 1 
```

Or, if you can't change Table A, define a new table to maintain the relationship A-B:

Table A

```
id    name
1     name1
2     name2
3     name3
4     name4 
```

Table B

```
id    
1 
```

Table A_B

```
a_id b_id
1    1
2    1
3    1
4    1 
```

SQL to extract data:

```
select name from A join A_B on A.id = A_B.b_id where A_B.b_id = 1 
```

# php - Imgur api认证PHP

> ID：14787216
> 
> 赞同：1
> 
> 时间：2013-02-09T10:35:19.230
> 
> 标签：php, api, imgur

我正在尝试在 PHP 中实现 imgur api，但我无法对其进行身份验证。我使用 file_get_contents 从 api 获取结果，并将标题设置为包含我的 Client-Id。

```
 $opts = array(
  'http'=>array(
'method'=>"POST",
'header'=>"Authorization: Client-ID CLIENT_ID"
  )
 );

$context = stream_context_create($opts);

 $file = file_get_contents('https://api.imgur.com/3/image/$get', false, $context);
 echo $file; 
```

但它仍然显示“需要身份验证”并返回 401 状态。有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:18:54.817

您是否已注册您的应用程序？为什么不尝试使用 cURL 请求？

```
// Get cURL resource
$curl = curl_init();

// Set some options (including authentication header)
curl_setopt_array($curl, array(
    CURLOPT_RETURNTRANSFER => 1,
    CURLOPT_URL => 'IMGUR_API_URL',
    CURLOPT_HTTPHEADER => array('Authorization: Client-ID CLIENT_ID')
));

// Send the request & save response to $resp
$resp = curl_exec($curl);

// Close request to clear up some resources
curl_close($curl); 
```

一些主机不允许远程文件访问`file_get_contents()`

# android - ksoap2 中的“AndroidHttpTransport 无法解析为类型”错误

> ID：14787217
> 
> 赞同：7
> 
> 时间：2013-02-09T10:35:28.877
> 
> 标签：android, wsdl, ksoap2

这是 Eclipse 中的一个 android 应用程序。我正在使用 ksoap2 访问在线 wsdl 中的函数。在制作一个soapobject（）来做到这一点时，我遇到了这个错误。我已经在构建路径中添加了 ksoap2 jar 文件，并且与 ksoap2 相关的所有其余代码都运行良好。我尝试了谷歌搜索，但一无所获。那么如何防止这个错误呢？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-09T10:40:06.607

`AndroidHttpTransport`被 `HttpTransportSE`现在替换。

您可以`HttpTransportSE`按以下方式使用：

```
HttpTransportSE HttpTransport = new HttpTransportSE(YOUR_URL); 
```

希望它对你有用。

# ios - iOS 6 Facebook“操作无法完成。”

> ID：14787219
> 
> 赞同：0
> 
> 时间：2013-02-09T10:36:03.163
> 
> 标签：ios, facebook-graph-api

错误-->我正在尝试使用 IOS6.0 登录 Facebook

偶尔，用户会收到此错误消息，尤其是那些未在其设备上打开 Facebook 的用户。

知道为什么它会在某些 IOS6 设备上发生而有些不会吗？

```
- (void)openSession
{
    NSArray *permissions = [[NSArray alloc] initWithObjects:
                        @"email",
                        @"user_birthday",
                        nil];
    [FBSession openActiveSessionWithReadPermissions:permissions
                                   allowLoginUI:YES
                              completionHandler:
 ^(FBSession *session,
   FBSessionState state, NSError *error) {
     [self sessionStateChanged:session state:state error:error];
 }]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:46:03.647

我猜您的 Facebook 应用程序没有正确的捆绑包 ID。[检查这个](http://kosovich.org.ua/tmp/facebook_ios6_app_howto.png)

# javascript - 使用 JavaScript 调用 Android 活动的方法

> ID：14787238
> 
> 赞同：0
> 
> 时间：2013-02-09T10:39:17.983
> 
> 标签：javascript, android, android-webview

我从以下指南中了解到如何从 HTML -> JavaScript-> Android [http://developer.android.com/guide/webapps/webview.html调用简单函数](http://developer.android.com/guide/webapps/webview.html)

你能帮我解决以下问题吗？（在线启动活动错误）

```
Intent i = new Intent(android.content.Intent.ACTION_DIAL, Uri.parse("tel:+918979"));
//Intent(android.content.Intent.ACTION_DIAL, Uri.parse("tel:+6512567"));
startActivity(i); 
```

错误：

```
02-09 10:13:40.615：W/dalvikvm(1194)：待处理的例外是：
02-09 10:13:40.615: I/dalvikvm(1194): Java.lang.NullPointerException:
02-09 10:13:40.615: I/dalvikvm(1194): 在 Android.app.Activity.startActivityForResult(Activity.Java:3190)
02-09 10:13:40.615: I/dalvikvm(1194): 在 Android.app.Activity.startActivity(Activity.Java:3297)
02-09 10:13:40.615: I/dalvikvm(1194): 在 sstpl.app.CallActivity.onClickCall(CallActivity.Java:34)

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:11:43.530

排序问题 mContext.startActivity(i);

# c# - ASP.NET 应用程序中的数字证书

> ID：14787243
> 
> 赞同：0
> 
> 时间：2013-02-09T10:39:48.900
> 
> 标签：c#, asp.net, security, digital-certificate

我有一个 .NET 应用程序 (C#)，出于安全原因，我被要求要求用户在浏览器中安装某个证书，然后检查用户的浏览器中是否安装了该证书。

如何创建特定的数字证书？

如何检查用户的浏览器是否安装了此证书？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T13:52:42.920

在 Windows 上，我认为您有 3 个选项：

*   使用任何版本的 Windows 服务器中包含的证书服务器服务创建证书。请参阅[http://d3planet.com/rtfb/2009/11/10/install-certificate-services-on-windows-server-2008-r2/](http://d3planet.com/rtfb/2009/11/10/install-certificate-services-on-windows-server-2008-r2/)
*   从像verysign这样的证书颁发机构购买证书
*   使用 makecert.exe 工具创建证书。测试的最佳解决方案，但在某些情况下可能是一种选择。请参阅[http://msdn.microsoft.com/en-us/library/bfsktky3(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/bfsktky3(v=vs.80).aspx)

要检查客户端是否安装了证书，您可以检查 Request.ClientCertificate 属性，但最好将 iis 配置为仅接受具有有效证书的请求。您可以使用 iis 安全设置中的“需要客户端证书”选项，然后您还可以将特定证书映射到 Windows 帐户以进行更好的用户身份验证。有关完整示例，请参阅[http://support.microsoft.com/kb/315588](http://support.microsoft.com/kb/315588)。

# java - 多个属性的休眠 IN 子句

> ID：14787245
> 
> 赞同：4
> 
> 时间：2013-02-09T10:40:03.970
> 
> 标签：java, hibernate, orm

我有一个`user_activities`包含列、`user_id`和`activity_id`的表`comments`。`activity_id`并且`user_id`都是外键，活动表具有另一个属性`activity_name`。要获取一行，具有特定的`user_id`，`activity_name`我可以使用：

```
FROM UserActivityMapping AS mapping
    INNER JOIN mapping.activityId AS activity
    WHERE userId = <something> AND activity.activityName = <something> 
```

到目前为止，一切都很好。现在，给定一个`Pair`s 的列表`<UserId, ActivityName>`，我想删除所有这样的行。这份清单可能非常大……就像 600-700 件物品一样大。现在看起来我可以生成一个非常混乱的查询：

```
DELETE ...
    WHERE (userId = userId[0] AND activity.activityName = activityName[0]) OR
          (userId = userId[1] AND activity.activityName = activityName[1]) OR
          ... 
```

这显然不是最好的方法。我该怎么做？像这样的事情会很棒：

```
"WHERE (userId, activityId) in :userActivityList".setParameterList(
    new List<Pair<String, String>>()
); 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T17:49:21.857

我之前遇到过类似的问题，并编写了一个相当简单的函数来动态构建 hql

```
private String buildInClause(List<Integer> keys)  {
   String inClause = "object.id in (";
   for (Integer key : keys) {
     inClause += key + ',";
   }
   inClause = inClause.substring(0,inClause.length -1) + ")";  // strip off last comma and add a closing paren.
   return inClause;
} 
```

对于您的问题，您可以稍微修改此方法

```
inClause = " userId || '-' || activity.activityName in (";

// loop over your pairs however they are passed in
inClause += "'" + userId + "-" + activityName + "',";
// strip off trailing coman and add closing paren
inClause = inClause.substring(0,inClause.length -1) + ")";  
// end loop 
```

# javascript - JavaScript - 在不使用 :hover 的情况下为多个元素设置 onmouseover

> ID：14787248
> 
> 赞同：3
> 
> 时间：2013-02-09T10:40:10.963
> 
> 标签：javascript, events, hover

有什么方法可以通过不使用 :hover 并且不在所有元素中添加“onmouseover 和 onmouseout”来做到这一点，就像在脚本中为所有输入元素设置 onmouseover 和 onmouseout 的有效方法一样。

注意：在尝试使用 JQuery 之前，请先尝试使用 JavaScript

* * *

```
<head>

    <title>123</title>

    <style>

    .button {
    color: red;
    }

    .button:hover {
    color: blue;
    }

    </style>

</head>

<body>

    <div>

        <input class="button" type="button" value="1">

        <input class="button" type="button" value="2">

        <input class="button" type="button" value="3">

    </div>

</body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T10:52:24.803

`input`循环遍历所有带有标签的元素

```
a=document.getElementsByTagName('input')
for (i in a){
   a[i].onmouseover=function(){/* code goes here */}
   a[i].onmouseout=function(){/* code goes here */}
} 
```

使用 jQuery：

```
$('input').on('mouseover',function(){/* code goes here */}).on('mouseout',function(){/* code goes here */}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T10:50:33.870

不是我推荐这个，但是您可以尝试`mouseover`在 body 元素上放置一个事件处理程序，然后使用`event.target`/`event.srcElement`来确定您是否要处理该事件

```
document.body.addEventListener("mouseover",function(e) {
    e = e || window.event;

    var targetElem = e.target || e.srcElement;

    // you can use a switch on the nodeName and handle event
    switch(targetElem.nodeName) {
        case 'INPUT':
            // do something
        break;
    }
},false); 
```

JS Fiddle 示例（背景颜色更改）[http://jsfiddle.net/Rcgx5/](http://jsfiddle.net/Rcgx5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T10:55:00.647

你可以试试这个

```
window.onload=function(){
    document.onmouseover=function(e){
        var e = e || window.event, el = e.target || el.srcElement;
        if(el.type == 'button') el.style.color='red';
    };

    document.onmouseout=function(e){
        var e = e || window.event, el = e.target || el.srcElement;
        if(el.type == 'button') el.style.color='black';
    };
}; 
```

[**演示。**](http://jsfiddle.net/wqvRt/)

# java - 在自定义 ListView 中调用 getView() 方法

> ID：14787249
> 
> 赞同：1
> 
> 时间：2013-02-09T10:40:14.703
> 
> 标签：java, android, android-arrayadapter, custom-lists

我`ListView`在列表行的右侧使用带有文本和箭头图像的自定义。

我有以下

> 1：MainActivity 扩展 ListActivity
> 
> 2：SpecialAdapter 扩展了 ArrayAdapter 有 getView() 方法。
> 
> 3：Sqlite 数据库的类。

我有一个`EditText`and add`Button`用于将新文本存储到数据库以及我的列表中。代码在这里。

```
 OnClickListener listenerAdd = new OnClickListener() {
        @Override
        public void onClick(View v) {
            Comment comment = null;
            EditText edit = (EditText) findViewById(R.id.edit_txt);
            String number = edit.getText().toString();
            if(!number.equals("")){
            comment = datasource.createComment(number);
            adapter.add(comment);
            edit.setText("");
            adapter.notifyDataSetChanged();
            }
            else{
                Toast.makeText(getApplicationContext(), "Please enter a Number",Toast.LENGTH_SHORT).show();
            }
        }
    }; 
```

我很困惑我应该在哪个类中使用这段代码？

如何调用 getView 方法？

我在主类中使用了这段代码，但它抛出了异常。

更重要的是我应该使用什么适配器？

适配器代码在这里..

```
 public class SpecialAdapter extends ArrayAdapter<Comment>{

    Context context;
    int layoutResourceId;   
    Comment data[]= null;
   // Comment dataCom[] = null;
    public SpecialAdapter(Context context, int layoutResourceId,Comment[] values) {
        super(context, layoutResourceId, values);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = values;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        WeatherHolder holder = null;

        if(row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new WeatherHolder();
            holder.imgIcon = (ImageView)row.findViewById(R.id.img_arrow);
            holder.txtTitle = (TextView)row.findViewById(R.id.tv_number);

            row.setTag(holder);
        }
        else
        {
            holder = (WeatherHolder)row.getTag();
        }

        Comment comment =  data[position];
        holder.txtTitle.setText(comment.getComment());
        holder.imgIcon.setImageResource(R.drawable.arrow);

        return row;
    }

    static class WeatherHolder
    {
        ImageView imgIcon;
        TextView txtTitle;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T05:27:43.420

你必须把你的类放在`onClickListner`扩展为`Actvity`. 还要确保 yourXML 文件包含该按钮。否则你会得到异常。

IE

```
setContentView(R.layout.yourXMLLayoutFileName); 
```

您的按钮应该在`yourXMLLayoutFileName`XML 文件中

# android - GPS联系人位置

> ID：14787252
> 
> 赞同：2
> 
> 时间：2013-02-09T10:40:24.313
> 
> 标签：android, gps

我有一个代码可以找到我手机的位置，但我想找到存储在数据库中的联系人的位置。谁能帮忙怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:49:42.990

如果有与联系人一起存储的地址字段，则只需读取它；否则，直接的解决方案是不可能*的*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T01:44:45.717

只有少数几种可能会起作用：

1) 您存储了联系人的地址：
在这种情况下，请使用地理编码器定位服务：例如 Google、Apple 但这当然不是当前位置。

2) 联系人安装并运行了相同的 - 您的 - 应用程序，并且此应用程序能够定期将当前位置传达给您查询它的服务器。

# html - 为什么未关闭的 H3 标签会破坏此页面？

> ID：14787255
> 
> 赞同：12
> 
> 时间：2013-02-09T10:40:43.717
> 
> 标签：html, quirks-mode

如果您在现代浏览器（Chrome、Firefox 或 IE 的最新稳定版本）中查看[此页面](https://web.archive.org/web/20140310190221/http://www.sewingandembroiderywarehouse.com/embtrb.htm)，您会看到文本变大了。看了一下源码，好像是由于`<h3>`代码中未闭合的s造成的。

但是，我记得大多数浏览器只要有机会就会自动关闭标签。以下代码（与损坏的站点相同的文档类型）适用于所有标签关闭：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
  <head></head>
  <body>Hello
    <h3>My
    <h3>Name
    <h3>Is
    <h3>Manish
  </body>
</html> 
```

因此，未封闭`<h3>`的 s 可能不是（或可能只是其中的一部分）问题。

所以，我的问题是，为什么浏览器不在那里自动关闭标签？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-09T10:47:58.603

首先，`h1`to`h6`元素总是需要它们的开始和结束标签才能进行验证，[甚至在 HTML 3.2 中也是如此](http://www.w3.org/TR/REC-html32/#headings)：

> `H1`, `H2`, `H3`, `H4`,`H5`和`H6`用于文档标题。您总是需要开始和结束标签。

因此，链接中的页面和您的示例均无效。

也就是说，有趣的是浏览器如何以不同的方式处理这两种情况（是的，未封闭`<h3>`的标签是问题所在）：

在任何 HTML DOM 中，`h1`to`h6`元素永远不能成为彼此的子元素，类似于`p`元素永远不能成为彼此的子元素。任何直接跟在任何此类未关闭的开始标签之后的对标签的打开都会隐式关闭它，`<h1>`并且*只有*. 因此，您示例中的所有元素实际上都是彼此的兄弟姐妹，而不是连续的后代。`<h6>`*`h3`*

 *但是，该页面中发生的情况是`h3`元素根本不是彼此的兄弟姐妹。相反，它们都由表格单元格、`font`元素等分隔。这是一团糟（尽管这可能是使用 Microsoft FrontPage ¹创作的页面所期望的）。

但是，虽然`<tr>`和`<td>`标签有自己的结束标签，但这不会导致`<h3>`它们之间的标签隐式关闭。他们还开着！由于没有一个`<h3>`标签是封闭的，并且有中间`<font>`标签和其他标签与元素发生冲突`h3`，结果是这些`h3`元素包含所有它们作为后代的元素，但不直接作为子元素*，尽管有*and`<tr>`元素`<td>`：

```
h3
  font
    font
      ...
        h3
         font
           font
             ... 
```

结果，字体大小随着每个连续的 增加`h3`，并且随之而来的是相当大的（哈哈！）灾难。请注意，这些`font`元素是不相关的，因为它们都没有定义`size`属性。

这一切的主要收获是什么？

**验证你该死的标记。²**特别是，**关闭您所有的怪异标签**（禁止关闭标签的地方除外）。

* * *

尽管页面和您的示例使用触发 quirks 模式的 HTML 3.2 doctype，但应注意此行为在 quirks 模式和标准模式中是一致的。事实上，HTML5 规范包含一个完全致力于[解析](http://www.w3.org/TR/html5/syntax.html#parsing)和[DOM 树构造](http://www.w3.org/TR/html5/syntax.html#tree-construction)的部分，以便针对无效标记设置各种浏览器行为（与旧标记兼容等）。即使在标准模式下，浏览器也应该遵循这个规范，因此在大多数浏览器中两种模式下的行为都是一致的。

其中有一个小节包含有关如何处理这种特定情况的规则：

> **一个起始标签，其标签名称是以下之一：“h1”、“h2”、“h3”、“h4”、“h5”、“h6”**
> 
> 如果打开元素的堆栈有一个`p`按钮范围内的元素，那么就好像看到了一个标签名为“p”的结束标签。
> 
> 如果当前节点是标签名称为“h1”、“h2”、“h3”、“h4”、“h5”或“h6”之一的元素，则这是一个解析错误；从打开的元素堆栈中弹出当前节点。
> 
> 为令牌插入一个 HTML 元素。

这意味着如果解析器仅在当前打开的标题元素中遇到标题标签，则会引发解析错误，并且它应该在输入这个新的标题元素之前关闭先前打开的标题元素，这就是您的示例所发生的情况。否则，没有什么特别的事情发生（即解析器应该像往常一样继续）。

也就是说，**请不要依赖这个**。解析错误仍然是错误；善待解析器，不要仅仅因为可以就向它抛出错误。只需编写有效的代码就可以了。当然，即使在您验证了您的代码之后，如果浏览器仍然出现问题，您就可以担心了。

* * *

¹ [顺便说一句，这也是*我的*第一个 HTML 编辑器……我 9 岁。]

² [不要过度，但也不要忽视去做。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T10:43:12.193

只有特定的标签，如`<p>`或`<li>`被自动关闭。`<hN>`标签不是。

（另外，为了将来参考，如果一个站点在两个以上的现代浏览器中被破坏，问题不在于浏览器或规范，它通常是站点）。

无效的纠正者可以做多少惩罚是有限度的。由于`<font>`元素是内联的（即使无效），并且`<h3>`不是直接后代（它不被识别为“兄弟”），所以没有理由关闭`<h3>`这些元素的外部，它们被包含在其中。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-09T11:00:51.227

您总是需要关闭标题标签。据我所知，关闭 p 和 li 标签也很好，尽管通常没关系。关于编码的事情是最好尽可能具体。您不希望您的浏览器尝试猜测任何内容，所以要具体。*

# c# - Tfs 构建失败

> ID：14787257
> 
> 赞同：7
> 
> 时间：2013-02-09T10:40:48.773
> 
> 标签：c#, tfs, tfsbuild

我在 TFS 构建控制器中配置了项目，但是在排队新构建后我面临构建失败。在日志中我发现在我签入所有文件时缺少引用的错误。

我如何调试和创建精细的 tfs 构建 zip。

构建失败。

```
 "C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp.sln" (default target) (1) ->
   "C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj" (default target) (2) ->
   (ResolveAssemblyReferences target) -> 
     C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets(1578,5): warning MSB3245: Could not resolve this reference. Could not locate the assembly "EntityFramework". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. [C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj]
     C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets(1578,5): warning MSB3245: Could not resolve this reference. Could not locate the assembly "Newtonsoft.Json". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. [C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj]
     C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets(1578,5): warning MSB3245: Could not resolve this reference. Could not locate the assembly "System.Web.Optimization". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. [C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj]
     C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets(1578,5): warning MSB3245: Could not resolve this reference. Could not locate the assembly "DotNetOpenAuth.AspNet, Version=4.0.0.0, Culture=neutral, PublicKeyToken=2780ccd10d57b246, processorArchitecture=MSIL". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. [C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj]
     C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets(1578,5): warning MSB3245: Could not resolve this reference. Could not locate the assembly "DotNetOpenAuth.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=2780ccd10d57b246, processorArchitecture=MSIL". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. [C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj]
     C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets(1578,5): warning MSB3245: Could not resolve this reference. Could not locate the assembly "DotNetOpenAuth.OAuth.Consumer, Version=4.0.0.0, Culture=neutral, PublicKeyToken=2780ccd10d57b246, processorArchitecture=MSIL". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. [C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj]
     C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets(1578,5): warning MSB3245: Could not resolve this reference. Could not locate the assembly "DotNetOpenAuth.OAuth, Version=4.0.0.0, Culture=neutral, PublicKeyToken=2780ccd10d57b246, processorArchitecture=MSIL". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. [C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj]
     C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets(1578,5): warning MSB3245: Could not resolve this reference. Could not locate the assembly "DotNetOpenAuth.OpenId, Version=4.0.0.0, Culture=neutral, PublicKeyToken=2780ccd10d57b246, processorArchitecture=MSIL". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. [C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj]
     C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets(1578,5): warning MSB3245: Could not resolve this reference. Could not locate the assembly "DotNetOpenAuth.OpenId.RelyingParty, Version=4.0.0.0, Culture=neutral, PublicKeyToken=2780ccd10d57b246, processorArchitecture=MSIL". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. [C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj]
     C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets(1578,5): warning MSB3245: Could not resolve this reference. Could not locate the assembly "WebGrease". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. [C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj]
     C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets(1578,5): warning MSB3245: Could not resolve this reference. Could not locate the assembly "Antlr3.Runtime". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. [C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj]

   "C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp.sln" (default target) (1) ->
   "C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj" (default target) (2) ->
   (CoreCompile target) -> 
     App_Start\BundleConfig.cs(2,18): error CS0234: The type or namespace name 'Optimization' does not exist in the namespace 'System.Web' (are you missing an assembly reference?) [C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj]
     Controllers\AccountController.cs(8,7): error CS0246: The type or namespace name 'DotNetOpenAuth' could not be found (are you missing a using directive or an assembly reference?) [C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj]
     Filters\InitializeSimpleMembershipAttribute.cs(3,26): error CS0234: The type or namespace name 'Infrastructure' does not exist in the namespace 'System.Data.Entity' (are you missing an assembly reference?) [C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj]
     Global.asax.cs(7,18): error CS0234: The type or namespace name 'Optimization' does not exist in the namespace 'System.Web' (are you missing an assembly reference?) [C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj]
     Models\AccountModels.cs(4,45): error CS0234: The type or namespace name 'Schema' does not exist in the namespace 'System.ComponentModel.DataAnnotations' (are you missing an assembly reference?) [C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj]
     Models\AccountModels.cs(12,33): error CS0246: The type or namespace name 'DbContext' could not be found (are you missing a using directive or an assembly reference?) [C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj]
     App_Start\BundleConfig.cs(9,44): error CS0246: The type or namespace name 'BundleCollection' could not be found (are you missing a using directive or an assembly reference?) [C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj]
     Models\AccountModels.cs(19,16): error CS0246: The type or namespace name 'DbSet' could not be found (are you missing a using directive or an assembly reference?) [C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj]
     Models\AccountModels.cs(26,10): error CS0246: The type or namespace name 'DatabaseGeneratedAttribute' could not be found (are you missing a using directive or an assembly reference?) [C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj]
     Models\AccountModels.cs(26,10): error CS0246: The type or namespace name 'DatabaseGeneratedAttributeAttribute' could not be found (are you missing a using directive or an assembly reference?) [C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj]
     Models\AccountModels.cs(22,6): error CS0246: The type or namespace name 'Table' could not be found (are you missing a using directive or an assembly reference?) [C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj]
     Models\AccountModels.cs(22,6): error CS0246: The type or namespace name 'TableAttribute' could not be found (are you missing a using directive or an assembly reference?) [C:\Builds\1\SourceCode\MvcApp\Sources\MainLine\Mvc App\MvcApp\MvcApp\MvcApp.csproj]

11 Warning(s)
12 Error(s) 
```

经过时间 00:00:06.40

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T05:24:49.417

您需要将所有这些 dll 放在您的构建机器上。简单的方法是使用 NuGet 来管理您的包并将其配置为拉下丢失的 dll。或者您可以手动将它们添加到构建机器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-24T17:37:59.497

配置 Nuget 以在构建期间加载依赖项：

[http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-08T14:25:11.630

我知道这是一个老问题，但这是我如何让它工作的。

我按照上面 Daniel Miller 的说明进行操作：http: [//docs.nuget.org/docs/workflows/using-nuget-without-committing-packages](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)

然后我不得不使用这个链接[http://docs.nuget.org/docs/reference/package-restore-with-team-build](http://docs.nuget.org/docs/reference/package-restore-with-team-build)中提到的简单构建文件， 它只是预先触发包恢复。

我必须从构建文件中更改的只是我的解决方案文件的路径和我的 nuget.exe 不同。

然后我将 TFS 配置为使用 build.proj 文件而不是解决方案。

# objective-c - 在 NSTextView 中获取 NSTextAttachmentCell 的框架

> ID：14787258
> 
> 赞同：4
> 
> 时间：2013-02-09T10:40:49.977
> 
> 标签：objective-c, cocoa, nstextview, nstextattachment

我有一个带有图像的 NSTextView。我想为这些图像添加跟踪区域。我需要保存图像的单元格框架以创建跟踪区域。

所以我的问题是：如何在 NSTextView 的坐标系中获取 NSTextAttachments 的框架？

我正在以编程方式更改文本视图中图像的大小，此时我需要创建这个新的跟踪区域。我正在执行以下操作来创建带有文本附件的属性字符串，然后以编程方式将其插入到我的文本视图的属性字符串中。但是一旦我完成了所有这些，我就不知道如何为新附件创建我的跟踪区域。

```
-(NSAttributedString*)attributedStringAttachmentForImageObject:(id)object {
    NSFileWrapper* fileWrapper = [[NSFileWrapper alloc] initRegularFileWithContents:[object TIFFRepresentationUsingCompression:NSTIFFCompressionLZW factor:1.0]];
    [fileWrapper setPreferredFilename:@"image.tiff"];
    NSTextAttachment* attachment = [[NSTextAttachment alloc] initWithFileWrapper:fileWrapper];
    NSAttributedString* aString = [NSAttributedString attributedStringWithAttachment:attachment];
    [fileWrapper release];
    [attachment release];
    return aString;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T09:56:33.837

由于附件由单个（不可见）字形 (0xFFFC) 组成，因此您可以使用字形消息来获取边界框。这是我用来根据鼠标位置突出显示 NSTextView 中的附件的代码（需要获取附件边界）：

```
/**
 * Determines the index under the mouse. For highlighting we use the index only if the mouse is actually
 * within the tag bounds. For selection purposes we return the index as it was found even if the mouse pointer
 * is outside the tag bounds.
 */
- (NSUInteger)updateTargetDropIndexAtPoint: (NSPoint)point
{
    CGFloat fraction;
    NSUInteger index = [self.layoutManager glyphIndexForPoint: point
                                              inTextContainer: self.textContainer
                               fractionOfDistanceThroughGlyph: &fraction];
    NSUInteger caretIndex = index;
    if (fraction > 0.5) {
        caretIndex++;
    }

    // For highlighting a tag we need check if the mouse is actually within the tag.
    NSRect bounds = [self.layoutManager boundingRectForGlyphRange: NSMakeRange(index, 1)
                                                  inTextContainer: self.textContainer];
    NSUInteger newIndex;
    if (NSPointInRect(point, bounds)) {
        newIndex = index;
    } else {
        newIndex = NSNotFound;
    }
    if (hotTagIndex != newIndex) {
        NSRect oldBounds = [self.layoutManager boundingRectForGlyphRange: NSMakeRange(hotTagIndex, 1)
                                                         inTextContainer: self.textContainer];
        [self setNeedsDisplayInRect: oldBounds];
        hotTagIndex = newIndex;
        [self setNeedsDisplayInRect: bounds];
    }

    return caretIndex;
} 
```

此代码用于 NSTextView 后代，因此 self.layoutManager 访问。

# java - 如何将 Windows Azure 存储 blob 发送到带有更改标头的浏览器

> ID：14787259
> 
> 赞同：1
> 
> 时间：2013-02-09T10:41:10.083
> 
> 标签：java, playframework-2.0, azure-storage, httpresponse

**情况：**我有大量视频和图像以及小型 Play 应用程序，它们在数据库中存储对 blob 的引用。对于没问题的网络使用，我正在渲染页面，我在其中放置 Flowplayer，在它的配置中，我使用直接 blob 的路径作为源视频。无论如何，我被要求为其他旧设备提供额外的可能性 - 它应该直接在响应正文中发送带有标题的文件：

```
Content-Type:video/mp4
Content-disposition:inline
Content-Transfer-Encoding:binary 
```

最初，该解决方案是使用 PHP 脚本完成的，该脚本使用 CURL 将 blob 获取到服务器，并作为带有操纵标头的客户端的响应返回。

**问题：**使用 Play 完成这项工作的最佳方式是什么？（最好不要将文件下载到服务器）。Blob 将是公开的，所以我不需要关心隐藏原始路径，我只需要添加上面提到的标头即可。

1.  我应该使用`WS.url()`将文件获取到服务器并将其作为`Result`带有修改后的标题的文件发送吗？`WS`我试过这个，但超时有一些问题。
2.  还尝试设置 header `Content-Location:http//mystorage...`，无论如何，据我所知，它无论如何都需要响应正文中的文件。因此，也许还有其他一些仅使用标头的技术。
3.  有没有办法在返回直接 blob 时强制自定义标头（即通过在 GET 参数中设置它）？

也许一些完全不同的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:22:04.257

我用方法解决了我的问题。1，但使用 of`java.net.URL`代替`WS.url()`,

赏金承诺对于更好的提议是实际的（特别是如果它在不将文件下载到服务器的情况下完成）。

# xcode - 将设备添加到由 Xcode 管理的开发人员配置文件

> ID：14787260
> 
> 赞同：0
> 
> 时间：2013-02-09T10:41:24.787
> 
> 标签：xcode, provisioning-profile, iphone-developer-program

我正在尝试将设备添加到我的开发人员资料中。但是这个配置文件是由 Xcode 管理的。我手头没有设备。我只有UDID。我正在运行 Xcode 4.6。谁能帮我？

问候， EZFrag

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T20:31:57.387

我最终撤销了证书并颁发了新证书。开发人员计划有时会很麻烦。不过这会很有趣：P 周一早上大约 +30 位开发人员将无法运行任何东西

# jquery - 相同的 在多个页面上

> ID：14787261
> 
> 赞同：2
> 
> 时间：2013-02-09T10:41:48.400
> 
> 标签：jquery, html

我有几个包含一组链接的静态 HTML 页面`div`。目前，当我编辑这组链接时，我必须在多个页面上进行相同的编辑。

`div`当我进行更改时，是否有更简单的方法来更新每个页面上的内容？也许我可以将它移动到一个单独的 HTML 文件并使用 jQuery 插入它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T10:51:43.040

好吧，你真正需要的（如果你想继续使用 Javascript，没有 PHP）是模板（我可以推荐你[mustache.js](https://github.com/janl/mustache.js)）

然后，您的代码将如下所示：

```
var data = {
    links: [
    {   url: "http://",
        text: "Lorem"},
    {   url: "http://",
        text: "Ipsum"}
    ]};
var template = "<ul>{{#links}}" +
                            "<li><a href="{{url}}">{{text}}</a></li>" +
                            "{{/links}}</ul>";
var html = Mustache.to_html(template, data);
$('#DIV_CONTAINING_MENU').html(html); 
```

当然，你可以用 jQuery（甚至 javascript）做同样的事情：

```
var data = [
{url: 'http://', text: 'Lorem'},
{url: 'http://', text: 'Ipsum'}
];
$ul = $('<ul></ul>');
for(var i=0,c=data.length;i<c;i++){
    $ul.append('<li><a href="'+data[i].url+'">'+data[i].text+'</a></li>');
}
$ul.appendTo($('#DIV_CONTAINING_MENU')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T10:53:53.850

你可以使用 PHP

```
<div>link</div> 
```

将此 div 保存为单独的文件。然后`include('filepath');`在每一页上都包含这个文件。所以当你想要编辑时，你只需要在主文件中编辑一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T11:50:59.133

假设您在网站根文件夹中名为**links.html**的静态文件中有链接：

```
<div id="links">
   Your links.
</div> 
```

有几种方法可以将此文件包含在另一个页面中；这里有三个最简单的。

* * *

# 使用 jQuery

使用起来非常简单[`jQuery.load`](http://api.jquery.com/load/)。

**JS：**

```
$('.add-links').load('/links.html'); 
```

**HTML：**

```
<div class="add-links"></div> 
```

* * *

# 使用 SSI

首先，在您的服务器上启用 SSI（如果尚未启用）。（例如，这是在 Apache 、[IIS6](https://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/eced0b89-e052-42ff-baa8-751dd191c3b5.mspx?mfr=true)和[IIS7](http://tech.mikeal.com/blog1.php/server-side-includes-for-html-in-iis7)[中设置 SSI 的](http://www.linuxtopia.org/HowToGuides/apache_ssi.html)方法。）接下来，在静态文件中需要的位置添加包含。

**HTML：**

```
<!--#include virtual="/links.html" --> 
```

* * *

# 使用 PHP

假设 PHP 已正确安装并启用，告诉服务器将静态 HTML 文件解析为 PHP——例如，将扩展名`.html`从`.php`. 您可以在它们需要出现的地方包括如下链接：

```
<?php include('/links.html'); ?> 
```

# linux - 检测 SFTP 文件上传完成

> ID：14787262
> 
> 赞同：4
> 
> 时间：2013-02-09T10:41:49.690
> 
> 标签：linux, ssh, ftp, debian, sftp

我有一个 SFTP 服务器（debian ssh 服务器），远程用户在其中偶尔将一个大文件上传到特定目录。

我的挑战是我需要检测：

1) 存在一个新文件。

2) 上传过程/传输完成。

最好的方法是什么？也许已经有一些可用的工具？

从逻辑上讲，我也许可以在第一阶段检测到目录中存在一个新文件。然后在第二阶段循环/等待，直到用户 SFTP 断开连接！？之后我可以启动下一个过程......

谢谢，干杯，彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T11:28:27.890

对于问题 1)，您可以使用`inotify`API 来监视目录的更改。你没有说你使用哪种编程语言。在 Perl 中，您将`Linux::Inotify`在 Python 中使用 , `pynotify`。

对于问题 2)，一种方法是等到 ssh 会话断开连接，另一种方法是也用于`inotify`监视文件关闭通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:59:59.627

我也有过类似的情况。虽然我使用了 JSCH，但这种方法可能会有所帮助。

您可以上传带有一些临时扩展名的文件。例如**bigFile.txt.temp**。文件上传后，将其[重命名](http://epaul.github.com/jsch-documentation/simple.javadoc/)为所需的文件名，即**bigFile.txt**并删除临时文件。[JSCH ChannelSftp](http://epaul.github.com/jsch-documentation/simple.javadoc/)。在 JSCH 中，重命名只保留一个文件。因此，您无需显式删除临时文件。

在上传任何较新版本的文件之前，请检查是否存在临时文件 - bigFile.txt.temp。如果存在，则表示该文件当前正在上传。设置回复代码或等待会话断开连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-31T11:39:33.557

在我的用例中，查看当前是否有任何用户通过 SFTP 连接就足够了。如果是这样，我会简单地认为所有文件都被锁定。

这可以通过[此处](https://superuser.com/questions/321035/how-can-i-see-if-users-are-logged-in-over-sftp)`ps -ef`描述的方式通过命令完成（在 Linux/OpenSSH 中） 。

干杯!

# javascript - 如何让我的小提琴在第二次输入时工作，使用 three.js 将对象添加到场景中？

> ID：14787263
> 
> 赞同：0
> 
> 时间：2013-02-09T10:42:09.207
> 
> 标签：javascript, three.js, render

当我在文本框中输入第二次、第三次...时，我想删除旧对象并添加新对象。我的意思是从场景中删除对象并根据新输入添加新对象。请工作示例或编辑我的小提琴。我在网上搜索了很多并尝试了各种可能性，没有一个对我有帮助。

这是我的工作小提琴：[这里](http://jsfiddle.net/sagh0900/x8n8b/4/)

这是示例代码：

```
for (var i = 0; i < document.getElementById('txtN').value; i++) {

            var scale = 10;
            var conegeo = new THREE.Mesh(getGeometry(meshMaterial), new THREE.MeshFaceMaterial(meshMaterial));
            subset.push(conegeo);
            conegeo.doubleSided = true;
            conegeo.overdraw = true;
            conegeo.position.set(i*(0.5-Math.random())*scale, (0.5-Math.random())*scale, (0.5-Math.random())*scale);
            conegeo.updateMatrix();
            conegeo.matrixAutoUpdate = false;
            scene.add(conegeo);

        } 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:33:45.627

我知道了。我将变量设为全局变量，每次更新都不需要更改。现在它的工作并包含在按钮点击中：

```
if (scene.children.length > 0)
           for (var i = scene.children.length - 1; i > 0; i--) {
               var child = scene.children[i];
               scene.remove(child);
               render(camera, scene);
           } 
```

# android - 在添加的 fllipperview 子视图中不起作用

> ID：14787265
> 
> 赞同：0
> 
> 时间：2013-02-09T10:42:18.043
> 
> 标签：android, viewflipper

我用过 Flipper。我们通常在 Flipper 标签中添加布局。如下

```
<flipper>
   <LinearLayout1>
   <LinearLayout2>
</flipper> 
```

在我的程序中，我想在脚蹼中显示三个活动（应该一个接一个地翻转。）

每个活动分别执行一些任务。

当我将该布局文件添加到鳍状肢标签时。如下图所示，

（这是我的主要 xml 文件）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
android:orientation="horizontal" >

<ViewFlipper
    android:id="@+id/ViewFlipper"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ffffff" >

    <include
        android:id="@+id/screenxyzf"
        layout="@layout/screenxyz" />

    <include
        android:id="@+id/screenabcf"
        layout="@layout/screenabc" />

    <include
        android:id="@+id/activity_mainf"
        layout="@layout/activity_main" />
</ViewFlipper>

</LinearLayout> 
```

// 我的 Java 代码...

```
package com.example.exampledemo3;

import android.app.Activity;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.widget.LinearLayout;
import android.widget.ViewFlipper;

public class Swipe extends Activity {

ViewFlipper flipper;
float lastX;
View.OnTouchListener gestureListener;
LinearLayout chapterMain,chapterAbc,chapterXyz;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.swipe);
    flipper = (ViewFlipper) findViewById(R.id.ViewFlipper);
    /*chapterMain=(LinearLayout) findViewById(R.id.activity_mainf);
    chapterAbc=(LinearLayout) findViewById(R.id.screenabcf);
    chapterXyz=(LinearLayout) findViewById(R.id.screenxyzf);*/

    flipper.setDisplayedChild(R.id.activity_mainf);
    flipper.setDisplayedChild(R.id.screenabcf);
    flipper.setDisplayedChild(R.id.screenxyzf);     

}

public boolean onTouchEvent(MotionEvent touchevent) {

    switch (touchevent.getAction()) {
    case MotionEvent.ACTION_DOWN: {
        lastX = touchevent.getX();
        break;
    }
    case MotionEvent.ACTION_UP: {
        float currentX = touchevent.getX();
        if (lastX < currentX) {
            if (flipper.getDisplayedChild() == 0)
                break;
            flipper.setInAnimation(this, R.anim.in_from_left);
            flipper.setOutAnimation(this, R.anim.out_to_right);
            flipper.showNext();
        }
        if (lastX > currentX) {
            if (flipper.getDisplayedChild() == 1)
                break;
            flipper.setInAnimation(this, R.anim.in_from_right);
            flipper.setOutAnimation(this, R.anim.out_to_left);
            flipper.showPrevious();
        }
        break;
    }
    }
    return false;
}
 } 
```

现在在我的代码中，鳍状肢工作正常，但我想在鳍状肢中显示的活动不起作用（活动不起作用，意味着列表视图没有加载数据，按钮，文本视图可见但不支持任何事件）。

谁能告诉我我该怎么办..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:31:34.093

1.  **您是否创建了“screenxyz.xml”和“screenabc.xml”文件并填写了它们的内容？**
2.  您必须`android:id`为每个包含设置，否则这些将无用。
3.  如果除了 ViewFlipper 没有其他视图，您可以安全地删除 LinearLayout。

看看这个：

```
<ViewFlipper xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/ViewFlipper"
    android:background="#ffffff" >

<include layout="@layout/screenxyz"
    android:id="@+id/xyzView" />
<include layout="@layout/activity_main" 
    android:id="@+id/mainView" />
<include layout="@layout/screenabc" 
    android:id="@+id/abcView" />

</ViewFlipper> 
```

# c# - 如何在客户端系统上调试 c# 应用程序？

> ID：14787266
> 
> 赞同：2
> 
> 时间：2013-02-09T10:42:24.173
> 
> 标签：c#, debugging, client-server

我制作了一个在网络系统中运行的应用程序。

有时它会挂在某些计算机上，但在其他计算机上却很好。

我想调试它并知道为什么会发生这种情况

怎么可能调试它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:52:02.883

使用日志库添加一些日志记录，例如[log4net](http://logging.apache.org/log4net/)或[NLog](http://nlog-project.org/)都推荐。

# c++ - 在 C++ 中设置 map* 的键和值

> ID：14787267
> 
> 赞同：2
> 
> 时间：2013-02-09T10:42:25.550
> 
> 标签：c++, pointers, map

我正在关注[http://www.cplusplus.com/reference/map/map/map/](http://www.cplusplus.com/reference/map/map/map/)。

我正在尝试构建一个反转索引结构，它是一个以 64 位整数作为键的映射，**每个键将包含一个指向 sub-map 的指针**。子映射将包含 int int 对。所以我让自己写了一些示例：

```
map<unsigned long long int, map<int, int>*> invertID;

int main(int argc, char *argv[]){

    map<int,int>* m = new map<int,int>();

    m[10] = 1;

    invertID[1] = m;

    return 0;

} 
```

但是，通常情况下，对于像这样的非指针类型映射来说，这是一个麻烦

```
std::map<char,int> first; 
```

如[http://www.cplusplus.com/reference/map/map/map/](http://www.cplusplus.com/reference/map/map/map/)中所述，我看到我们可以做到

```
first['a']= 10; 
```

但是**，如果我们有一个 map 的指针类型，我们该怎么做呢？**我上面的代码会产生一个错误抱怨

```
error C2679: binary '=' : no operator found which takes a right-hand operand of type 'int' (or there is no acceptable conversion) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T10:44:33.840

您可以取消引用指针：

```
 (*m)[10] = 1; 
```

或者

```
m->operator[](10) = 1; 
```

另一方面，你真的需要所有这些指针吗？你的程序会因为使用这种形式而受到很大的影响吗？

```
map<unsigned long long int, map<int, int>> invertID;
int main()
{
    map<int,int> m;
    invertID[1][10] = 1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T11:15:05.170

Map 是一棵红黑树，用于操作，因此您可以使用它来获得搜索和插入等的最佳性能。您在 invertID 中使用的是地图而不是多地图。因此，在大多数情况下，当您获取某些密钥时，我会假设您正在寻找一对元素。除非您出于我现在没有想到的任何原因需要第二张地图，否则我会这样做：

```
std::map < unsigned long long int, std::pair < int , int >  > invertID;
int main(){
    std::pair<int,int>  m;
    m = std::make_pair(1,2);
    invertID[1] = m;
    return 0;
} 
```

玩得开心。

# javascript - 从字符串中提取日期和时间

> ID：14787271
> 
> 赞同：6
> 
> 时间：2013-02-09T10:43:15.803
> 
> 标签：javascript, datetime

我有一个日期\时间字符串：

> 2013 年 2 月 8 日星期五 09:47:57 GMT +0530 (IST)

我需要提取日期 (02/08/2013) 和时间 (09:47 am) 部分并将它们存储在两个变量中。

有没有使用 JavaScript 的有效方法？

我写了以下代码：

```
var day = elementDate.getDate(); //Date of the month: 2 in our example
            var monthNo = elementDate.getMonth(); //Month of the Year: 0-based index, so 1 in our example
            var monthDesc = {'0':'January', '1':'February'}; //, "March", "April", "May", "June", "July", "August", "September", "October", "November", "December");
            var year = elementDate.getFullYear() //Year: 2013
            var hours = elementDate.getHours();
            var mins = elementDate.getMinutes();
            var lDateValue = (year.toString() + "-" + monthNo.toString() + "-" + day.toString());

document.getElementById("lDate").value = lDateValue; 
```

我的 HTML 中有这个：

```
<input type="date" name="name" id="lDate" class="custom" value=""/>
                <input type="time" name="name" id="lTime" class="custom" value=""  /> 
```

这些字段没有得到更新。我错过了什么吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-09T10:45:30.573

Date 构造函数非常擅长从字符串创建日期：

使用以下内容：

```
// This could be any Date String
var str = "Fri Feb 08 2013 09:47:57 GMT +0530 (IST)";
var date = new Date(str); 
```

这将使您可以访问所有日期功能（[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)）

例如：

```
var day = date.getDate(); //Date of the month: 2 in our example
var month = date.getMonth(); //Month of the Year: 0-based index, so 1 in our example
var year = date.getFullYear() //Year: 2013 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-08-05T19:11:14.160

[您可以使用Date 构造函数在](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)[.toLocaleDateString()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleDateString)和[.toTimeString()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toTimeString)方法的帮助下直接获取日期和时间字符串，如下所示 -

```
let dateStr =new Date("Wed Aug 05 18:11:48 UTC 2020")

dateStr.toLocaleDateString()
// "05/08/2020"

dateStr.toTimeString()
// "23:41:48 GMT+0530 (India Standard Time)" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-31T15:30:42.023

### 转换为 ISO 字符串并按“T”分割。

不确定您分别对日期和时间做了什么。但是，如果您打算将它们存储在数据库中，最好将它们存储在 UTC 时区和 ISO 格式（例如`2013-02-08`和`09:47:57`）中。

要以这种格式获取日期和时间，您可以执行以下操作：

```
const dateTimeInParts = yourDateTime.toISOString().split( "T" ); // DateTime object => "2021-08-31T15:15:41.886Z" => [ "2021-08-31", "15:15:41.886Z" ]

const date = dateTimeInParts[ 0 ]; // "2021-08-31"
const time = dateTimeInParts[ 1 ]; // "15:15:41.886Z" 
```

我认为这种格式的日期很好，但您可能还想从时间中删除毫秒和“Z”，具体取决于您将在何处以及如何使用它。

# c - 段错误字符** C

> ID：14787272
> 
> 赞同：1
> 
> 时间：2013-02-09T10:43:16.613
> 
> 标签：c, segmentation-fault, character-arrays

我试图弄清楚为什么我不能将文件存储到 char** 中。

我以为我正确分配了内存。有人可以帮帮我吗？谢谢！

另外，我知道我的方法不是解决问题的最有效方法，但首先我想在担心效率之前解决问题。谢谢！

```
void readFile(int argc, char** argv)
{
    FILE *myFile;
    char** list;
    char c;
    int wordLine = 0, counter = 0, i;
    int maxNumberOfChars = 0, numberOfLines = 0, numberOfChars = 0;

    myFile = fopen(argv[1], "r");

    if(!myFile)
    {
        printf("No such file or directory\n");
        exit(EXIT_FAILURE);  
    }

    while((c = fgetc(myFile)) !=EOF)   //goes through the file to get # of lines
    {                                  //and columns so I can allocate array
        numberOfChars++;
        if(c == '\n')
        {
            if(maxNumberOfChars < numberOfChars)
                maxNumberOfChars = numberOfChars + 1;

            numberOfLines++;
        }
    }

    fseek(myFile, 0, SEEK_SET);   //resets file pointer

    list = malloc(sizeof(char*)*numberOfLines);  //dynamically allocating

    for(i = 0; i < wordLine ; i++)
        list[i] = malloc(sizeof(char)*maxNumberOfChars);

    while((c = fgetc(myFile)) != EOF)       //stores in words
    {
        if(c == '\n' && counter > 0)
        {
            list[wordLine][counter] = '\0';
            wordLine++;
            counter = 0;
        }
        else if(c != '\n')
        {
            list[wordLine][counter] = c;   //seg fault happens at first character
            counter++;
        }
    } 
    fclose(myFile);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T10:51:54.193

在此刻：

```
for(i = 0; i < wordLine ; i++) 
```

`wordLine`= 0，因此不会分配内存。我认为应该是：

```
for(i = 0; i < numberOfLines; i++) 
```

而且你需要设置`numberOfChars`= 0，类似于 Grijesh Chauhan 说的那样，否则你会分配太多的内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T10:52:06.393

您对字线的分配：

```
for(i = 0; i < wordLine ; i++)
    list[i] = malloc(sizeof(char)*maxNumberOfChars); 
```

使用`wordLine`，但您在开始时将其初始化为 0，并且它永远不会更改。

因此，这个 for 循环中的 malloc 永远不会执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T10:53:54.220

您的`for`循环条件混乱，

```
for(i = 0; i < wordLine ; i++)
    list[i] = malloc(sizeof(char)*maxNumberOfChars); 
```

`wordLine`初始化为`0`，它不会按预期执行并分配内存`list[i]`

您可能希望将其更改为

```
for(i = 0; i < numberOfLines ; i++)
    list[i] = malloc(sizeof(char)*maxNumberOfChars); 
```

# mysql - OpenLayers：如何基于 MySQL 数据库创建标记

> ID：14787273
> 
> 赞同：1
> 
> 时间：2013-02-09T10:43:24.057
> 
> 标签：mysql, database, map, openlayers, marker

我有一个**MySQL 数据库**，里面有关于学生的数据（姓名、年龄、学校、大学等）。我想要做的是将我得到的数据转换**为地图上的标记**。更具体地说，例如，我将计算在 X 大学学习并来自 Y 镇的学生人数。此请求的结果（数字）将**作为标记设置在地图上**。我一直在寻找这样的示例，但在 OpenLayers 示例中找不到相应的示例。此外，关于 POI 示例，大多数都有文本文件作为数据源。

我将非常非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:48:21.740

您有两个选择，获取数据和： 动态生成页面和相应的 JavaScript（使用 PHP 或其他）。对您的服务器进行 ajax 调用，并将数据序列化为 JSON，并将其提供给进行相应 OpenLayer 调用的某个函数。

# java - jfreechart XYLineAndShaperanderer、XYDotRenderer 和 XYSplineRenderer 的代码区别？

> ID：14787280
> 
> 赞同：2
> 
> 时间：2013-02-09T10:44:14.743
> 
> 标签：java, charts, jfreechart

我正在尝试创建简单的 XYSplineRenderer，但代码只有在我编写 XYDotRenderer a = new XYDotRenderer(); 时才有效 或 XYLineAndShapeRenderer a = new XYLineAndShapeRenderer(); 同一个人可以告诉我做错了什么吗？我只是编程的初学者。

这是我的代码：

```
package kubas;

import org.jfree.chart.*;
import org.jfree.chart.axis.*;
import org.jfree.chart.plot.*;
import org.jfree.chart.renderer.xy.XYSplineRenderer;
import org.jfree.data.xy.*;
import org.jfree.ui.ApplicationFrame;

public class spausdink {

    public static void main(String[] args) {

XYSeries series = new XYSeries("XY grafikas");
        series.add(1, 2);
        series.add(2, 4);
        series.add(3, 8);
        series.add(4, 16);
        series.add(5, 32);
        series.add(6, 64);
        series.add(7, 128);
        series.add(8, 256);
        series.add(9, 512);
        series.add(10, 1024);

XYSeriesCollection dataset = new XYSeriesCollection();
        dataset.addSeries(series);

ApplicationFrame frame = new ApplicationFrame("Mano grafikas");

        NumberAxis xax = new NumberAxis("x");
        NumberAxis yax = new NumberAxis("y");
        XYSplineRenderer a = new XYSplineRenderer();
        a.setPrecision(10);
        XYPlot xyplot = new XYPlot(dataset, xax, yax, a);

        JFreeChart chart = new JFreeChart(xyplot);

        ChartPanel chartPanel = new ChartPanel(chart);
        frame.setContentPane(chartPanel);
        frame.pack();
        frame.setVisible(true);

    }

} 
```

编辑消息：

两个代码都可以正常工作，然后我创建了新项目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T16:33:48.293

我不确定出了什么问题，但下面有一个工作示例。我倾向于为精度选择小的奇数值；默认为`5`. 相同的代码适用于`XYLineAndShapeRenderer`or

```
XYDotRenderer r = new XYDotRenderer();
r.setDotWidth(5);
r.setDotHeight(5); 
```

![图片](../Images/2c011b53a059b0620d9fd835c3c79546.png)

```
import java.awt.Dimension;
import java.awt.EventQueue;
import javax.swing.JFrame;
import org.jfree.chart.*;
import org.jfree.chart.axis.*;
import org.jfree.chart.plot.*;
import org.jfree.chart.renderer.xy.XYSplineRenderer;
import org.jfree.data.xy.*;

public class Test {

    public static final String Title = "f(x) = 2^x";

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                display();
            }
        });
    }

    private static void display() {
        XYSeries series = new XYSeries(Title);
        for (int i = 0; i <= 10; i++) {
            series.add(i, Math.pow(2, i));
        }
        XYSeriesCollection dataset = new XYSeriesCollection();
        dataset.addSeries(series);
        NumberAxis domain = new NumberAxis("x");
        NumberAxis range = new NumberAxis("f(x)");
        XYSplineRenderer r = new XYSplineRenderer(3);
        XYPlot xyplot = new XYPlot(dataset, domain, range, r);
        JFreeChart chart = new JFreeChart(xyplot);
        ChartPanel chartPanel = new ChartPanel(chart){

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(640, 480);
            }
        };
        JFrame frame = new JFrame(Title);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(chartPanel);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

# java - 从 android 应用程序发送 OSC（打开声音控制）消息

> ID：14787287
> 
> 赞同：5
> 
> 时间：2013-02-09T10:44:51.090
> 
> 标签：java, android, osc, javaosc

我正在使用 SDK for android 4.0 编写一个 android 应用程序

我想知道在 android SDK 中是否有用于发送 OSC 消息（Open Sound Control）的 API，或者我应该只使用 java OSC SDK。

我尝试浏览[http://opensoundcontrol.org/introduction-osc](http://opensoundcontrol.org/introduction-osc) 并在实现下发现以下内容：[http ://www.illposed.com/software/javaosc.html](http://www.illposed.com/software/javaosc.html)

所以我只是想知道我是否应该使用 JavaOSC、其他一些库，或者 android 是否带有它自己的 API 来发送 OSC 消息。

任何有关该问题的信息将不胜感激。

谢谢你

冷杉

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-09T11:09:11.810

**不**，Android 本身没有 API 来广播 OSC 消息。**是**的，目前唯一的方法似乎是 JavaOSC 。

这是一个应用程序，[FingerPlay MIDI](http://thesundancekid.net/blog/fingerplay-midi/)，它使用 OSC 消息通过 WIFI 进行通信。[在http://code.google.com/p/fingerplaymidi/source/browse/](http://code.google.com/p/fingerplaymidi/source/browse/)查看它的源代码，并了解如何在您的代码中使用 JavaOSC。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-28T09:53:20.073

这是我专门针对 Android 编写的库。

[https://github.com/alistairrutherford/osc-tools](https://github.com/alistairrutherford/osc-tools)

我有一个在这里使用它的示例应用程序。

[https://github.com/alistairrutherford/tonome](https://github.com/alistairrutherford/tonome)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-04T21:13:15.733

我的解决方案是在 Android 模式下使用处理 IDE 和库 OscP5。

# node.js - Nginx + Express + Socket.IO 解决方法

> ID：14787289
> 
> 赞同：0
> 
> 时间：2013-02-09T10:44:53.367
> 
> 标签：node.js, nginx, express, socket.io

众所周知，此时 nginx 稳定版无法代理 tcp 连接。因此，如果 express 和 socket.io 将在同一个端口上工作，我们需要使用其他代理解决方案。

但是还有其他方法可以绕过这个问题：

1.  如果我们将 socket.io 设置为监听不同的端口，然后 express 监听。例如：nginx代理80端口到8000端口，express监听8000端口，socket.io监听8001端口，客户端直接连接socket.io到8001端口。
2.  使用[nginx_tcp_proxy_module](https://github.com/yaoweibin/nginx_tcp_proxy_module)我们可以代理 tcp 连接，但我们不能在同一端口上使用 http。所以我们使用这样的解决方案：nginx代理80端口到8000端口和81端口（用于websockets）到8001，express监听8000端口，socket.io监听8001端口，客户端连接socket.io到81端口。

这些方法有什么优点和缺点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T11:22:03.917

我更喜欢在前面使用[Haproxy](http://haproxy.1wt.eu/)，并且只有一个公共开放端口。“生根”是按路径完成的。

配置看起来像这样（您可以轻松找到许多教程/资源）

```
frontend all 0.0.0.0:80

    acl is_websocket path_beg /websocket/
    use_backend nodejs if is_websocket
    default_backend nginx

backend nodejs
   server srv_node 127.0.0.1:16852

backend nginx
   balance roundrobin
   server srv_static 127.0.0.1:8080 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-09T22:30:27.133

You can do it with Varnish and Nginx - [http://blog.dealspotapp.com/post/40923117591/websockets-with-varnish-and-multiple-nginx-backends](http://blog.dealspotapp.com/post/40923117591/websockets-with-varnish-and-multiple-nginx-backends)

or with Haproxy - [http://blog.dealspotapp.com/post/41226162147/websockets-with-haproxy-ssl-and-multiple-backends](http://blog.dealspotapp.com/post/41226162147/websockets-with-haproxy-ssl-and-multiple-backends)

If you use Haproxy, make sure to set the tunnel timeout to something long, such as 1 day. otherwise you'll see new sockets being created every few seconds.

# jquery - 如何仅克隆特定数量的元素？

> ID：14787290
> 
> 赞同：4
> 
> 时间：2013-02-09T10:45:06.457
> 
> 标签：jquery, clone

我有 10 多个 img div，例如`<img class="thumbnail22">`.

但我只想克隆前 5 个元素（img divs）。

我将`$('img.thumbnail22').clone().prependTo(".cloned");`它们克隆到 .cloned div 中，它可以工作。但是我怎样才能只克隆前 5 个元素呢？

感谢帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T10:46:36.577

您可以使用[slice()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)来限制要保留在选择器中的元素数量。

```
$('img.thumbnail22').slice(0, 5).clone().prependTo(".cloned"); 
```

[另一种方法是使用:lt()](http://api.jquery.com/lt-selector/)直接限制选择器中的元素数量

```
$('img.thumbnail22:lt(5)').clone().prependTo(".cloned"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T10:47:18.277

试试看`slice()`_

```
$('img.thumbnail22').slice(0,20).clone().prependTo(".cloned"); 
```

请记住，jQuery 对象是数组的扩展。

# java - 在java中将自定义信任库添加到imaps

> ID：14787294
> 
> 赞同：1
> 
> 时间：2013-02-09T10:45:48.513
> 
> 标签：java, ssl, imap, truststore

我将 SMTP 用于邮件并检索我使用 imaps (imap + ssl) 的邮件：

我做的内部连接方法：

```
private Session connect(SMTPTask task) {

    SSLSocketFactory factory = null;
    try {
        SSLContext ctx;
        KeyManagerFactory kmf;
        KeyStore ks;
        char[] passphrase = "changeit".toCharArray();

        ctx = SSLContext.getInstance("TLS");
        kmf = KeyManagerFactory.getInstance("SunX509");
        ks = KeyStore.getInstance("JKS");

        ks.load(new FileInputStream("truststore.jks"), passphrase);

        kmf.init(ks, passphrase);
        ctx.init(kmf.getKeyManagers(), null, null);

        factory = ctx.getSocketFactory();
    } catch (Exception e) {
        log.error("Error with SSLFactory",e);
    }

    String host = getHost();
    String port = String.valueOf(getPort());

    Authenticator authenticator = new Authenticator(task);

    Properties properties = new Properties();
    properties.setProperty("mail.smtp.submitter", authenticator.getPasswordAuthentication().getUserName());
    properties.setProperty("mail.smtp.auth", "true");
    //properties.setProperty("mail.imap.auth.login.disable", "true");
    properties.setProperty("mail.smtp.host", host);
    properties.setProperty("mail.smtp.port", port);
    properties.put("mail.imaps.ssl.socketFactory", factory);
    properties.setProperty("mail.imap.port", "993");

    Properties systemProps = System.getProperties();
    systemProps.put( "javax.net.ssl.trustStore", "truststore.jks");
    systemProps.put( "javax.net.ssl.trustStorePassword", "changeit");
    System.setProperties(systemProps);

    return Session.getInstance(properties, authenticator); 
```

我在其他地方做：

```
...
store.connect(getHost(),getUser(),getPass());
... 
```

**编辑：**在这里我得到以下异常：

```
PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target 
```

现在我想添加一个带有自己证书的自定义信任库。另一篇文章展示了如何在 java 中做到这一点：[为客户端身份验证添加 trustStore](https://stackoverflow.com/questions/9552725/add-truststore-for-client-authentication)

但是如何将 SSLSocketFactory 与我的商店结合起来？所以我的商店使用自定义 ssl 连接？

这样做的正确方法是什么？如果那不可能，是否有另一种方法可以将我的信任库添加到 java 中的商店？

**编辑：**我错过了什么，或者我在属性中做错了什么？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:54:17.093

您通过用于创建的属性映射传递套接字工厂`Session`

```
Properties props = new Properties();
// other properties as usual
props.put("mail.imaps.ssl.socketFactory", new MyCustomSSLSocketFactory());
Session sess = Session.getInstance(props); 
```

有关完整详细信息，请参阅[com.sun.mail.imap 包摘要](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/imap/package-summary.html)底部的表格。

# javafx - 在 JavaFX 中创建 3x3 魔方

> ID：14787295
> 
> 赞同：1
> 
> 时间：2013-02-09T10:45:48.577
> 
> 标签：javafx, rubiks-cube

我有兴趣第一次在 JavaFX 上工作。我有一个正在做的项目，我没有太多时间来完成。我想知道 javaFX 是否会成为动画和制作 3x3 魔方游戏的绝佳平台？通过所有的鼠标移动和旋转，无需计算大量线性代数。

![在此处输入图像描述](../Images/17869eb39bf8383ad13e4ccd9ebef537.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:45:13.753

[Jelinek](http://software.rubikscube.info/)提供公共领域示例算法和源代码，用于在 Swing/AWT 中创建魔方。您可以从它开始并尝试将其转换为 JavaFX，可能使用[Canvas](http://docs.oracle.com/javafx/2/api/javafx/scene/canvas/Canvas.html)作为绘图表面。

JavaFX 2.2 中的 3D 功能非常有限。您可以在 Ensemble 应用程序中查看一些[示例](http://www.oracle.com/technetwork/java/javafx/samples/index.html)，让您了解它的功能。有一个[关于 Ensemble 3D xylophone 的教程，](http://docs.oracle.com/javafx/2/transformations/jfxpub-transformations.htm)它应该有助于提供构建应用程序所需的许多基本知识。

Java 8 将拥有更全面的[3D 功能集](https://wikis.oracle.com/display/OpenJDK/3D+Features)。这样的应用程序在 Java 8 中可能比当前的 JavaFX 2.2 版本更容易实现。Java 8 最终版本要到 2013 年 9 月才会发布，但您可以下载[Java 8 的预览版](http://jdk8.java.net/download.html)。预览版目前并未完全实现 Java 8 计划中的所有 3D 功能，但确实实现了比 JavaFX 2.2 版本更多的功能，特别是围绕实现所需的 3D 转换、法线计算、矢量逻辑等概念.

# ruby - `rescue $!` 是如何工作的？

> ID：14787300
> 
> 赞同：5
> 
> 时间：2013-02-09T10:46:16.470
> 
> 标签：ruby, exception-handling

我知道全局变量`$!`包含最新的异常对象，但我对下面的语法感到困惑。谁能帮我理解以下语法？

```
 rescue $! 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-09T10:49:54.993

此构造可防止异常停止您的程序并冒泡堆栈跟踪。它还会将该异常作为值返回，这很有用。

```
a = get_me_data rescue $! 
```

在此行之后，`a`将保存请求的数据或异常。然后，您可以分析该异常并采取相应措施。

```
def get_me_data
  raise 'No data for you'
end

a = get_me_data rescue $!
puts "Execution carries on"

p a
# >> Execution carries on
# >> #<RuntimeError: No data for you> 
```

### 更现实的例子

```
lines = File.readlines(filename) rescue $! 
```

你要么得到这些行，要么得到错误（如果文件不存在，你没有权限等）。在任何情况下，执行都不会停止。

# ios - iPad中的UITableView问题？

> ID：14787302
> 
> 赞同：-1
> 
> 时间：2013-02-09T10:46:24.800
> 
> 标签：ios, ipad, uitableview, xcode4.3

我正在使用 iPad 应用程序。我正在使用 a`UITableView`创建一个表格并`UIImageView`在每个单元格中插入 2 s。我尝试在两个`UIImageView`s 中设置图像，但索引路径值从 0、1、2、3、4 等开始...

每个`UIImageView`在第一个单元格中都有相同的图像。如何解决这个问题？

![在此处输入图像描述](../Images/1bd3b299c6df50d9b4006e6ef1458115.png)

例子：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // ImageArray have 5images;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return [ImageArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    imgView1.image = [imageArray objectAtIndex:indexPath.row]; 
    imgView2.image = [imageArray objectAtIndex:indexPath.row]; 
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:59:30.123

格式化代码后，很明显您将数组中的相同图像分配给两个图像视图中的每一个。您将需要一个具有双倍成员数量的 imageViewArray。

此外，您不应该检查图像数组的计数，而是检查`row`索引路径的计数。

# winforms - 首先使用代码保存和恢复断开连接的实体的正确方法是什么？

> ID：14787306
> 
> 赞同：1
> 
> 时间：2013-02-09T10:46:55.300
> 
> 标签：winforms, entity-framework-5

为了可以存储用户的屏幕首选项，我有 ScreenSettings 实体，我想在程序启动时检索它并在程序结束时保存。

出于这个原因，我不想保持上下文开放。

我想知道最好的方法来做到这一点。我尝试了以下方法，但是我对 SaveSettings 功能不满意，因为它会删除并重新添加对象。

如何保存对对象的更改而不实际替换它？

```
namespace ClassLibrary1
{
using System.ComponentModel.DataAnnotations;
using System.Data.Entity;

//Domain Class
public class ScreenSetting
{
    #region Properties

    public int Id { get; set; }

    [Required]
    public int WindowLeft { get; set; }

    [Required]
    public int WindowTop { get; set; }

    #endregion
}

// Context
public class Context : DbContext
{
    #region Properties

    public DbSet<ScreenSetting> ScreenSettings { get; set; }

    #endregion
}

// UI
public class UI
{
    #region Public Methods

    // Get the settings object
    public ScreenSetting GetSettings(int SettingsId)
    {
        var Db = new Context();
        ScreenSetting settings = Db.ScreenSettings.Find(SettingsId);
        if (settings == null)
        {
            settings = new ScreenSetting { Id = SettingsId, WindowTop = 100, WindowLeft = 100 };
            Db.ScreenSettings.Add(settings);
        }
        Db.Dispose();
        return settings;
    }

    // Save the settings object
    public void SaveSettings(ScreenSetting settings)
    {
        var Db = new Context();
        ScreenSetting oldSettings = Db.ScreenSettings.Find(settings.Id);
        if (oldSettings == null)
        {
            Db.ScreenSettings.Add(settings);
        }
        else
        {
            Db.ScreenSettings.Remove(oldSettings);
            Db.ScreenSettings.Add(settings);
        }
        Db.Dispose();
    }

    public void test()
    {
        ScreenSetting setting = this.GetSettings(1);
        setting.WindowLeft = 500;
        setting.WindowTop = 500;
        this.SaveSettings(setting);
    }

    #endregion

    #region Methods

    private static void Main()

    {
        var o = new UI();
        o.test();
    }

    #endregion
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T12:28:38.750

您遇到了一个常见的模式，更新或插入，它很常见，以至于它有一个名字：*upsert*。当一个模式很常见时，通常也有一个共同的解决方案。

有`System.Data.Entity.Migrations`一个扩展方法[`AddOrUpdate`](http://msdn.microsoft.com/en-us/library/hh846520%28v=vs.103%29.aspx)可以完全满足您的要求：

```
public void SaveSettings(ScreenSetting settings)
{
    using (var db = new Context())
    {
        db.ScreenSettings.AddOrUpdate(settings);
        db.SaveChanges();
    }
} 
```

# mapping - 异构数组的Restkit映射

> ID：14787307
> 
> 赞同：0
> 
> 时间：2013-02-09T10:46:56.157
> 
> 标签：mapping, restkit

我完全被困在试图映射这个 JSON 数据：

```
{
  "All_Data": [
    {
      "TANTENNE": [
        {"ID": 2068, "KIND": "PARABOLE"}, 
        {"ID": 2069, "KIND": "ANTENNE TNT HERTZIENNE"}, 
        {"ID": 2070, "KIND": "ANTENNE COLLECTIVE"}, 
        {"ID": 2071, "KIND": "PARABOLE PLATE"}
      ],
      "totalCount": 4, 
      "success": true
    },
    {
      "success": true,
      "FANTENNE": [
        {"ID": 1121, "CONNECT": "Autre"}, 
        {"ID": 1122, "CONNECT": "Neovia"}, 
        {"ID": 1124, "CONNECT": "non"}, 
        {"ID": 1125, "CONNECT": "oui"}, 
        {"ID": 1126, "CONNECT": "Patch"}, 
        {"ID": 1127, "CONNECT": "SRTD"}, 
        {"ID": 1128, "CONNECT": "Standard"}
      ],
      "totalCount": 7
    },
    {
      "MANTENNE": [
        {"ID": 2065, "STATUS": "NON PRESENTE", "ACTION": 1}, 
        {"ID": 2066, "STATUS": "DEFECTUEUSE", "ACTION": 2}, 
        {"ID": 2067, "STATUS": "2EME ANTENNE POSEE", "ACTION": 3}
      ],
      "totalCount": 3, 
      "success": true
    }, 
    {
      "totalCount": 5, 
      "LANTENNE": [
        {"ID": 1139, "LOCATION": "AU SOL"}, 
        {"ID": 1140, "LOCATION": "Balcon"}, 
        {"ID": 1142, "LOCATION": "FACADE"}, 
        {"ID": 1143, "LOCATION": "Toit"}, 
        {"ID": 2064, "LOCATION": "JARDIN"}
      ], 
      "success": true
    }, 
  ], 
  "success": true
} 
```

鉴于我有核心数据实体（以及所有单个叶对象（、、、、`TANTENNE`）`FANTENNE`的`MANTENNE`关联类`LANTENNE`。

当我收到上述 JSON 时，我想插入 4 个实例`TANTENNE`、7 个实例`FANTENNE`、3 个实例`MANTENNE`和 5 个实例`LANTENNE`。

我对这些类有单独的映射，例如：

```
RKManagedObjectMapping *mapping =  [RKManagedObjectMapping mappingForEntityWithName:@"TANTENNE" inManagedObjectStore:self.objectStore];
mapping.primaryKeyAttribute = @"id";

[mapping mapKeyPathsToAttributes:
 @"ID", @"id",
 @"KIND", @"kind",
 nil];

[self setObjectMapping:mapping forKeyPath:@"TANTENNE"]; 
```

这在我的映射提供程序的初始化时调用。但这显然还不够，因为我收到控制台消息，例如

```
[…] T restkit.object_mapping:RKObjectMapper.m:293 Examining keyPath 'TANTENNE' for mappable content...
[…] D restkit.object_mapping:RKObjectMapper.m:303 Found unmappable value at keyPath: TANTENNE 
```

如果我使用“All_Combo.TANTENNE”键路径添加映射，则 RestKit 稍后会在尝试将完整数组映射到一个目标对象时崩溃。

这是 RestKit 0.10（我还没有迁移到 0.20，因为所有 Magical Record 的东西都不见了，而且我经常使用它）。

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:23:03.153

我有一些事情可能会破坏你的映射。

1) 根密钥路径 通过`mapping.rootKeyPath = @"All_Data"`每个映射配置根密钥路径，以确保密钥路径“TANTENNE”的映射不会期望返回的 JSON 的根中的值。

2) 数组内的字典因为“TANTENNE”的这些值是在字典中发送的，如果可能需要使用额外的配置。通过使用将“TANTENNE”数组的根连接到字典中的值`[mapping mapRelationship:@"TANTENNE" withMapping:mapping];`- 也许它有效。

# eclipse - 如何设置用于构建 Androlate 的项目和工作区；一个 Eclipse 插件

> ID：14787312
> 
> 赞同：2
> 
> 时间：2013-02-09T10:47:31.293
> 
> 标签：eclipse, eclipse-plugin

有谁知道如何正确设置 Eclipse 项目以构建 Androlate 插件；可以在[http://code.google.com/p/androlate/issues/list](http://code.google.com/p/androlate/issues/list)找到？

我需要这个来用新的 Bing 翻译代码替换旧的谷歌翻译代码 - 它不再有效 - （有关更多信息，请参阅此插件的问题 #2）。

我以前从未构建过 Eclipse 插件，到目前为止我对这个插件的所有尝试都失败了。但是，我能够构建 Eclipse 提供的插件示例，并且还能够构建复杂的 Motodev 插件（[http://www.motorola.com/sites/motodev/library/motodev_core_plugins.html](http://www.motorola.com/sites/motodev/library/motodev_core_plugins.html)）；因此我的环境（Eclipse Juno）应该是正确的。

首先，这个插件的源码缺少它的 .project 文件；所以我不得不欺骗 Eclipse，以便通过在源文件上覆盖一个新的插件项目来将该项目导入工作区。（顺便说一句，有谁知道为什么简单地将现有项目添加到 Eclipse 中的当前工作区如此困难？为什么他们必须让如此简单的任务变得如此困难？）。

其次，当我尝试在调试模式下作为 Eclipse 应用程序启动这个插件时，我首先收到多个错误消息：`Can't find bundle for base name feature, locale en_US`.

最后，当我尝试插件本身时，我`Logging bundle must not be null`在 AndrolateWizard.java 文件的第 60 行得到了错误；表示`Platform.getBundle(Activator.PLUGIN_ID)`对上一行（第 59 行）的调用返回一个空包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:50:45.587

这是因为激活器中指定的插件 ID 与您的 MANIFEST.MF 中指定的插件 ID 不匹配 [检查并更正为 com.cicadalane.androlate]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-08T00:03:57.443

[旧帖子，但如果它可以帮助任何人https://github.com/ayvazj/gradle-androlate-plugin](https://github.com/ayvazj/gradle-androlate-plugin)，这里是一个 androlate gradle 插件

# java - 使用 Blazeds 和 Flex 将文件上传到文件夹？

> ID：14787313
> 
> 赞同：0
> 
> 时间：2013-02-09T10:47:37.873
> 
> 标签：java, spring, hibernate, apache-flex, blazeds

在我的 Flex 应用程序中，我正在使用 Blazeds 进行图像上传...

```
 private var fileReference:FileReference;
        protected function imageUpload(event:MouseEvent):void
        {
            // create a fileFilter - class declaration
            var imageTypes:FileFilter;
            // set the file filter type - jpg/png/gif - init method             
            imageTypes = new FileFilter("Images (*.jpg, *.jpeg, *.gif, *.png)", "*.jpg; *.jpeg; *.gif; *.png");

            fileReference = new FileReference();

            fileReference.browse([imageTypes]);

            fileReference.addEventListener(Event.SELECT, browseImage);              
            fileReference.addEventListener(Event.COMPLETE, uploadImage);                
        }

        private function browseImage(event:Event):void {
            fileReference.load();
        }
        private function uploadImage(event:Event):void {
            profileImage.source = fileReference.data;

            var name:String = fileReference.name;
            var directory:String = "/EClassV1/flex_src/Images";
            var content:ByteArray = new ByteArray();
            fileReference.data.readBytes(content, 0, fileReference.data.length);
            var fileAsyn:AsyncToken = userService.uploadImage(name,directory,content);
            fileAsyn.addResponder(new mx.rpc.Responder(handler_success, handler_failure)); 
        } 
```

在我的 Java 代码中......

```
@RemotingInclude
public void uploadImage(String name, String directory, byte[] content) {
    File file = new File(directory);
    if (!file.exists()) {
        file.mkdir();
    }
    name = directory + "/" + name;
    File fileToUpload = new File(name);
    try {
        FileOutputStream fos = new FileOutputStream(fileToUpload);
        fos.write(content);
        System.out.println("file write successfully");
        fos.close();
    } catch (Exception ex) {
        ex.printStackTrace();
   }

} 
```

但它给...错误..

```
java.io.FileNotFoundException: \EClassV1\flex_src\Images\image001.png (The system cannot find the path specified)
at java.io.FileOutputStream.open(Native Method)
at java.io.FileOutputStream.<init>(FileOutputStream.java:194) 
```

实际上我想将文件放入文件夹并存储数据库..帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:52:57.793

如果该文件尚不存在，则需要创建该文件。该方法`createNewFile()`将为您执行此操作：

```
File fileToUpload = new File(name);
fileToUpload.createNewFile();

try {
    FileOutputStream oFile = new FileOutputStream(fileToUpload, false); 
    ... 
```

# iphone - ipad中的SplitView导航问题

> ID：14787318
> 
> 赞同：0
> 
> 时间：2013-02-09T10:48:18.013
> 
> 标签：iphone, ios, objective-c, xcode, uisplitviewcontroller

我在我的应用程序中实现了拆分视图。当我的应用程序启动时，它显示正常。

**masterview=左侧视图 & detailView = 主视图**

但我的主视图还包含 2 个表格视图。当我单击表格视图的任何行时，**详细视图（现在，类视图）不会显示**。

意味着我想根据选择的主视图的表行显示多个详细视图。

我的拆分视图代码如下：

```
// AppDelegate.h

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

LeftViewController *masterViewController = [[LeftViewController alloc] initWithNibName:@"LeftViewController_iPad" bundle:nil] ;
        UINavigationController *masterNavigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController] ;

        HomeViewController *detailViewController = [[HomeViewController alloc] initWithNibName:@"HomeViewController_iPad" bundle:nil];
        UINavigationController *detailNavigationController = [[UINavigationController alloc] initWithRootViewController:detailViewController];

        masterViewController.home_Detail = detailViewController;

        self.splitViewController = [[UISplitViewController alloc] init] ;
        self.splitViewController.delegate = detailViewController;

        self.splitViewController.viewControllers=[NSArray arrayWithObjects:masterNavigationController,detailNavigationController, nil];

        self.window.rootViewController = self.splitViewController;

        [self.window makeKeyAndVisible];
}

//LeftView.m

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    [self.appDelegate.splitViewController viewWillDisappear:YES];
    NSMutableArray *viewControllerArray=[[NSMutableArray alloc] initWithArray:[[self.appDelegate.splitViewController.viewControllers objectAtIndex:1] viewControllers]];

    [viewControllerArray removeAllObjects];

    if (tableView==tbl_class) 
    {

       self.class_VC=[[Class_Vice_ViewController alloc]initWithNibName:@"Class_Vice_ViewController" bundle:nil];

        [[NSUserDefaults standardUserDefaults]setInteger:[[[classNames objectAtIndex:indexPath.row]valueForKey:@"class_id"]intValue] forKey:@"psel_class"];

        NSLog(@"%d",[[[classNames objectAtIndex:indexPath.row]valueForKey:@"class_id"]intValue]);

        [viewControllerArray addObject:self.class_VC];
        self.appDelegate.splitViewController.delegate = self.class_VC;

        [[self.appDelegate.splitViewController.viewControllers objectAtIndex:1] setViewControllers:viewControllerArray animated:NO];
        [class_VC viewWillAppear:YES];

    }
} 
```

**帮我解决这个问题**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T16:59:31.920

违规行是 didSelectRowAtIndexPath: 方法中的这一行：

```
[self.appDelegate.splitViewController viewWillDisappear:YES]; 
```

我不知道你为什么把它放进去，但如果你删除它，它应该可以工作。您也不需要这一行：

```
[self.class_VC viewWillAppear:YES]; 
```

虽然重写 viewWillAppear: 和 viewWillDisappear: 是很常见的，但您几乎从不会像现在这样调用它们。

# java - 在 servlet 中启动线程，可能是什么问题？

> ID：14787320
> 
> 赞同：1
> 
> 时间：2013-02-09T10:48:27.260
> 
> 标签：java, multithreading, tomcat, servlets, asynchronous

我有一个 Web 应用程序，在单个请求中可能需要加载数百个数据。现在的问题是数据是分散的。所以，我必须从几个地方加载数据，对它们应用过滤器，处理它们然后做出响应。依次执行所有这些操作会使 servlet***变慢***！

所以我想到了将所有数据加载到单独的线程中，例如`t[i] = new Thread(loadData).start();`，等待所有线程完成使用`while(i < count) t[i].join();`，完成后，加入数据并响应。

现在我不确定这种方法是否正确或有更好的方法。我在某处读到过，不建议在 servlet 中生成线程。

我想要的代码看起来像这样。

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
{
       Iterable<?> requireddata = requiredData(request);
       Thread[] t = new Thread[requireddata.size];
       int i = 0;
       while (requireddata.hasNext())
       {
             t[i]  = new Thread(new loadData(requiredata.next())).start();
             i++;
       }
       for(i = 0 ; i < t.length ; i++)
         t[i].join();
       // after getting the data process and respond!
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T10:54:00.853

主要问题是，如果您的 servlet 收到许多并发请求，您将使服务器瘫痪，因为您没有限制可以产生的线程数。另一个问题是你不断地创建新线程而不是重用它们，这是低效的。

使用线程池可以轻松解决这两个问题。Java 对它们有原生支持。阅读[教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html)。

此外，请确保在 webapp 关闭时使用 ServletContextListener 关闭线程池。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T07:34:15.580

由于您正在等待所有线程完成然后提供响应，因此如果您仅使用 CPU 周期，IMO 多线程将无济于事。它只会通过在线程中添加上下文切换延迟来增加响应时间。单线程会更好。但是，如果涉及网络/ IO 等，您可以使用线程池。

但是您想重新考虑您的方法。不建议在 http 请求中同步处理大量数据。对最终用户来说不会是一个很好的体验。您可以做的是启动一个线程来处理数据并提供“正在处理”的响应。您可以随时为网络用户提供某种手势来检查状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T11:01:52.127

您可以考虑使用 java.util.concurrent api 中的 Executor 框架。例如，您可以将计算任务创建为 Callable，然后将该任务提交给 ThreadPoolExecutor。Java Concurrency in Practice 中的示例代码：-

```
public class Renderer {
    private final ExecutorService executor;
    Renderer(ExecutorService executor) { this.executor = executor; }

    void renderPage(CharSequence source) {
        final List<ImageInfo> info = scanForImageInfo(source);
        CompletionService<ImageData> completionService =
            new ExecutorCompletionService<ImageData>(executor);
    for (final ImageInfo imageInfo : info)
        completionService.submit(new Callable<ImageData>() {
            public ImageData call() {
                return imageInfo.downloadImage();
                }
               });
renderText(source);
try {
    for (int t = 0, n = info.size(); t < n; t++) {
    Future<ImageData> f = completionService.take();
    ImageData imageData = f.get();
    renderImage(imageData);
    }
} catch (InterruptedException e) {
    Thread.currentThread().interrupt();
} catch (ExecutionException e) {
    throw launderThrowable(e.getCause());
}
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T11:18:28.327

听起来像是[CyclicBarrier](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html)的问题。

例如：

```
ExecutorService executor = Executors.newFixedThreadPool(requireddata.size);

public void executeAllAndAwaitCompletion(List<? extends T> threads){
   final CyclicBarrier barrier = new CyclicBarrier(threads.size() + 1);
   for(final T thread : threads){
       executor.submit(new Runnable(){
           public void run(){
                //it is not a mistake to call run() here
                thread.run();
                barrier.await();
           }
       }); 
    }
   barrier.await();
} 
```

`threads`一旦所有其他线程完成，最后一个线程将被执行。

与其调用`Executors.newFixedThreadPool(requireddata.size);`，不如复用一些已有的线程池。

# java - 如何在 LWJGL 中制作全屏？

> ID：14787324
> 
> 赞同：0
> 
> 时间：2013-02-09T10:49:03.693
> 
> 标签：java, fullscreen, lwjgl

我正在使用 LWJGL 在 Eclipse 中制作游戏，我想知道如何通过更改以下一些代码来使屏幕全屏显示。你能帮忙吗？

```
public static void main(String args[]) {
    AppGameContainer appgc;
    try{
        appgc = new AppGameContainer(new Game(gamename));
        appgc.setDisplayMode(700, 500, false);
        appgc.start();
    }catch(SlickException e){
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:59:39.930

[JavaDoc](http://slick.cokeandcode.com/javadoc/org/newdawn/slick/AppGameContainer.html#setDisplayMode%28int,%20int,%20boolean%29)说第三个参数表示`setDisplayMode`全屏标志。试着把它放在真实的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T11:03:34.757

您可以通过调用启用全屏模式`Display.setFullscreen(true);`。

此外，请务必设置全屏模式下支持分辨率的显示模式。

参考：[http ://www.lwjgl.org/wiki/index.php?title=LWJGL_Basics_5_%28Fullscreen%29](http://www.lwjgl.org/wiki/index.php?title=LWJGL_Basics_5_%28Fullscreen%29)

* * *

编辑：在我看到您的编辑（带有片段）后，您需要致电`appgc.setFullscreen(true);`（[doc](http://slick.cokeandcode.com/javadoc/org/newdawn/slick/AppGameContainer.html)）。

所以这一切看起来像这样：

```
public static void main(String args[]) {
    AppGameContainer appgc;
    try {
        appgc = new AppGameContainer(new Game(gamename));
        appgc.setDisplayMode(800, 600, false);
        appgc.setFullscreen(true);
        appgc.start();
    }
    catch(SlickException e) {
        e.printStackTrace();
    }

} 
```

或者

```
public static void main(String args[]) {
    AppGameContainer appgc;
    try {
        appgc = new AppGameContainer(new Game(gamename));
        appgc.setDisplayMode(800, 600, true);
        appgc.start();
    }
    catch(SlickException e) {
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-31T10:03:06.760

您必须搜索显示器上可用的分辨率，并且只有在这些分辨率下才能使用全屏

# magento-1.7 - 如何查看magento中的错误？

> ID：14787329
> 
> 赞同：2
> 
> 时间：2013-02-09T10:49:40.563
> 
> 标签：magento-1.7

页面显示“处理您的请求时出错

出于安全原因，异常被禁用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T10:50:52.917

在您的magento 目录的errors 文件夹中有一个文件名local.xml.sample。

将其重命名为 local.xml 并刷新显示错误的浏览器页面。

# php - Pdo 查询只插入一个图片名称

> ID：14787332
> 
> 赞同：0
> 
> 时间：2013-02-09T10:50:02.117
> 
> 标签：php, mysql

此代码有效，它将多个图像上传到文件夹，但在将图像信息插入数据库时​​，它仅插入 1 个名称。如有任何帮助，我将不胜感激

```
#target folder
$target = 'image_uploads/';
  if(isset($_FILES['image_name'])===true){
      $files = $_FILES['image_name'];
      for($x = 0 ; $x < count($files['name']); $x++){
          $name = $files['name'][$x] ;
          $temp_name = $files['tmp_name'][$x];
          $move = move_uploaded_file($temp_name,$target.$name);
      }
  }
?>
<?php
try{
    $con = new PDO('mysql:host=localhost;dbname=tish_database;charset=utf-8','root','');
    $query="INSERT INTO tish_images(image_name)
VALUES(:image_name)";
    $insert = $con->prepare($query);
    $insert->execute(array(
                          ':image_name'=>$name));
}catch(PDOException $e){
    echo $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:55:46.080

我不确定，但您需要在 for 循环中定义插入查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T10:56:30.073

您的`INSERT`&`execute array`声明超出了`for`周期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T13:08:44.280

@Devang Rathod 和 @revoua。我非常感谢您的帮助，这是您的帮助之后的代码它按照我想要的方式工作

```
<?php 
#target folder 
$target = 'image_uploads/';
  if(isset($_FILES['image_name'])===true){
  $files = $_FILES['image_name'];
  for($x = 0 ; $x < count($files['name']); $x++){
  $name = $files['name'][$x] ;
  $temp_name = $files['tmp_name'][$x];  
  $move = move_uploaded_file($temp_name,$target.$name); 
?>
<?php
try{
$con = new PDO('mysql:host=localhost;dbname=tish_database;charset=utf-8','root','');
$query="INSERT INTO tish_images(image_name)
VALUES(:image_name)";
$insert = $con->prepare($query);
$insert->execute(array(
':image_name'=>$name));
}catch(PDOException $e){
echo $e->getMessage();
}
 } 
}
?> 
```

# python - 与python中的getattribute和setattribute混淆

> ID：14787334
> 
> 赞同：13
> 
> 时间：2013-02-09T10:50:28.123
> 
> 标签：python, python-2.7

我想知道如果我有这样的课

```
class Test(object):
    def __init__(self):
        self.a = 20
        self.b = 30

obj = Test() 
```

当我这样做`obj.a`时，首先调用哪个？

`__getattr__`或`getattr`或查找`__dict__['a']`

和一样`setattr`

根据[Python 2.7 文档](https://docs.python.org/2.7/reference/datamodel.html#object.__getattr__)：

> 目的。**__getattr__**（*自我*，*姓名*）
> 
> 当属性查找在通常的位置没有找到该属性时调用（即它不是实例属性，也不是在 self 的类树中找到）。name 是属性名称。此方法应返回（计算的）属性值或引发 AttributeError 异常。

它说在通常的地方找不到。什么是通常的地方。我想知道它什么时候被调用

这还有什么区别`object.__getattribute__(self, name)`

谁能给我举个例子

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-09T11:15:50.267

这有点复杂。如果您请求对象的属性，这是 Python 执行的检查序列。

首先，Python 会检查对象的类是否有`__getattribute__`方法。如果没有定义，它将继承`object.__getattribute__`实现查找属性值的其他方法。

下一个检查是在对象的类中`__dict__`。但是，即使在那里找到了一个值，也可能不是属性查找的结果！如果在此处找到，则只有“数据描述符”优先。最常见的数据描述符是`property`对象，它是函数的包装器，每次访问属性时都会调用该函数。您可以使用装饰器创建属性：

```
class foo(object):
    @property
    def myAttr(self):
        return 2 
```

在这个类中，`myAttr`是一个数据描述符。这仅仅意味着它通过同时具有`__get__`和`__set__`方法来实现描述符协议。A`property`是数据描述符。

如果该类中没有任何`__dict__`具有请求名称的内容，则`object.__getattribute__`搜索其基类（在 MRO 之后）以查看是否是继承的。继承的数据描述符与对象类中的描述符一样工作。

如果找到数据描述符，`__get__`则调用其方法，返回值成为属性查找的值。如果找到了一个不是数据描述符的对象，它会被保留片刻，但还没有返回。

接下来，`__dict__`检查对象自身的属性。这是找到大多数普通成员变量的地方。

如果对象`__dict__`没有任何内容，但之前通过类（或基类）的搜索发现了数据描述符以外的内容，则它具有下一个优先级。一个普通的类变量将被简单地返回，但“非数据描述符”将得到更多的处理。

非数据描述符是一个有`__get__`方法但没有`__set__`方法的对象。最常见的非数据描述符类型是函数，当作为对象的非数据描述符访问时，它们成为绑定方法（这就是 Python 自动将对象作为第一个参数传递的方式）。描述符的`__get__`方法将被调用，它的返回值将是属性查找的结果。

最后，如果之前的检查都没有成功，`__getattr__`将被调用，如果它存在的话。

以下是一些使用稳定增加的优先级属性访问机制来覆盖其父类行为的类：

```
class O1(object):
    def __getattr__(self, name):
        return "__getattr__ has the lowest priority to find {}".format(name)

class O2(O1):
    var = "Class variables and non-data descriptors are low priority"
    def method(self): # functions are non-data descriptors
        return self.var

class O3(O2):
    def __init__(self):
        self.var = "instance variables have medium priority"
        self.method = lambda: self.var # doesn't recieve self as arg

class O4(O3):
    @property # this decorator makes this instancevar into a data descriptor
    def var(self):
        return "Data descriptors (such as properties) are high priority"

    @var.setter # I'll let O3's constructor set a value in __dict__
    def var(self, value):
        self.__dict__["var"]  = value # but I know it will be ignored

class O5(O4):
    def __getattribute__(self, name):
        if name in ("magic", "method", "__dict__"): # for a few names
            return super(O5, self).__getattribute__(name) # use normal access

        return "__getattribute__ has the highest priority for {}".format(name) 
```

并且，演示类的实际操作：

O1 ( `__getattr__`):

```
>>> o1 = O1()
>>> o1.var
'__getattr__ has the lowest priority to find var' 
```

O2（类变量和非数据描述符）：

```
>>> o2 = O2()
>>> o2.var
'Class variables and non-data descriptors are low priority'
>>> o2.method
<bound method O2.method of <__main__.O2 object at 0x000000000338CD30>>
>>> o2.method()
'Class variables and non-data descriptors are low priority' 
```

O3（实例变量，包括本地覆盖的方法）：

```
>>> o3 = O3()
>>> o3.method
<function O3.__init__.<locals>.<lambda> at 0x00000000034AAEA0>
>>> o3.method()
'instance variables have medium priority'
>>> o3.var
'instance variables have medium priority' 
```

O4（数据描述符，使用`property`装饰器）：

```
>>> o4 = O4()
>>> o4.method()
'Data descriptors (such as properties) are high priority'
>>> o4.var
'Data descriptors (such as properties) are high priority'
>>> o4.__dict__["var"]
'instance variables have medium priority' 
```

O5 ( `__getattribute__`):

```
>>> o5 = O5()
>>> o5.method
<function O3.__init__.<locals>.<lambda> at 0x0000000003428EA0>
>>> o5.method()
'__getattribute__ has the highest priority for var'
>>> o5.__dict__["var"]
'instance variables have medium priority'
>>> o5.magic
'__getattr__ has the lowest priority to find magic' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T11:25:46.343

```
class test():
    def __init__(self):
        self.a = 1

    def __getattribute__(self, attr):
        print 'Getattribute:',attr

    def __getattr__(self, attr):
        print 'GetAttr:',attr

    def __dict__(self, attr):
        print 'Dict:',attr

    def __call__(self, args=None):
        print 'Called:',args

    def __getitem__(self, attr):
        print 'GetItem:',attr

    def __get__(self, instance, owner):
        print 'Get:',instance,owner

    def __int__(self):
        print 'Int'

x = test()
print x.a 
```

以上都不会被调用..

```
[root@faparch doxid]# python -m trace --trace test_dict.py
 --- modulename: test_dict, funcname: <module>
test_dict.py(1): class test():
 --- modulename: test_dict, funcname: test
test_dict.py(1): class test():
test_dict.py(2):    def __init__(self):
test_dict.py(5):    def __getattribute__(self, attr):
test_dict.py(8):    def __getattr__(self, attr):
test_dict.py(11):   def __dict__(self, attr):
test_dict.py(14):   def __call__(self, args=None):
test_dict.py(17):   def __getitem__(self, attr):
test_dict.py(20):   def __get__(self, instance, owner):
test_dict.py(23):   def __int__(self):
test_dict.py(28): x = test()
 --- modulename: test_dict, funcname: __init__
test_dict.py(3):        self.a = 1
test_dict.py(29): print x.a
1
 --- modulename: trace, funcname: _unsettrace
trace.py(80):         sys.settrace(None) 
```

您可能需要查看：[http](http://docs.python.org/2/library/numbers.html#numbers.Number) ://docs.python.org/2/library/numbers.html#numbers.Number 您很可能 需要实现一个嵌套类来按顺序处理数字类函数抢夺电话，例如示例中的电话。或者，至少这是一种方法..

## 整数值包含您必须拦截的以下函数

```
['__abs__', '__add__', '__and__', '__class__', '__cmp__', '__coerce__', '__delattr__', '__div__', '__divmod__', '__doc__', '__float__', '__floordiv__', '__format__', '__getattribute__', '__getnewargs__', '__hash__', '__hex__', '__index__', '__init__', '__int__', '__invert__', '__long__', '__lshift__', '__mod__', '__mul__', '__neg__', '__new__', '__nonzero__', '__oct__', '__or__', '__pos__', '__pow__', '__radd__', '__rand__', '__rdiv__', '__rdivmod__', '__reduce__', '__reduce_ex__', '__repr__', '__rfloordiv__', '__rlshift__', '__rmod__', '__rmul__', '__ror__', '__rpow__', '__rrshift__', '__rshift__', '__rsub__', '__rtruediv__', '__rxor__', '__setattr__', '__sizeof__', '__str__', '__sub__', '__subclasshook__', '__truediv__', '__trunc__', '__xor__', 'bit_length', 'conjugate', 'denominator', 'imag', 'numerator', 'real'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T11:13:28.630

命名空间字典（`__dict__`）首先被调用。

来自[`docs`](http://docs.python.org/2/reference/datamodel.html)：

> 类实例有一个作为字典实现的命名空间，这是搜索属性引用的第一个位置。如果在那里找不到属性，并且实例的类具有该名称的属性，则使用类属性继续搜索。如果没有找到类属性，并且对象的类有一个 `__getattr__()`方法，则调用该方法以满足查找。

文档[`object.__getattribute__`](http://docs.python.org/2/reference/datamodel.html#object.__getattribute__)：

> 无条件调用以实现类实例的属性访问。如果该类还定义了`__getattr__()`，则不会调用后者，除非`__getattribute__()`显式调用它或引发`AttributeError`. 此方法应返回（计算的）属性值或引发`AttributeError`异常。

文档[`object.__getattr__(self, name)`](http://docs.python.org/2/reference/datamodel.html#object.__getattr__)：

> 如果属性是通过正常机制找到的，`__getattr__()` 则不调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T11:13:49.157

从[文档](http://docs.python.org/2/howto/descriptor.html)：

> ... 例如，obj.d 在 obj 的字典中查找 d。如果 d 定义了方法`__get__()`，则 `d.__get__(obj)`根据下面列出的优先规则调用。
> 
> ...对于对象，机器在`object.__getattribute__()`其中转换`b.x`为`type(b).__dict__['x'].__get__(b, type(b))`。该实现通过优先链工作，该优先链赋予数据描述符优先于实例变量，实例变量优先于非数据描述符，并分配最低优先级（ `__getattr__()`如果提供）。

也就是说，`obj.a`默认`__getattribute__()`情况下使用`__dict__`. `__getattr__()`被称为最后的手段。其余部分描述描述符，例如，`property`或普通方法行为。

> 如何`d`定义方法`__get__()`

```
import random 

class C(object):
    @property
    def d(self):
        return random.random()

c = C()
print(c.d) 
```

# python - Buildbot 不发送电子邮件？

> ID：14787336
> 
> 赞同：3
> 
> 时间：2013-02-09T10:50:49.733
> 
> 标签：python, continuous-integration, buildbot

我有一个为软件项目运行的 buildbot 设置，并且正在尝试设置电子邮件通知，如下所示：

```
from buildbot.status import mail
c['status'].append(mail.MailNotifier(fromaddr=BUILDBOT_EMAIL,
                                     mode=('failing'),
                                     extraRecipients=[NOTIFICATION_EMAIL],
                                     sendToInterestedUsers=False)) 
```

Where`BUILDBOT_EMAIL`是一个字符串“buildbot@name-of-our-project.org”，并且`NOTIFICATION_EMAIL`是一个字符串，其中包含我想要获取通知的电子邮件。

根据[文档](http://buildbot.net/buildbot/docs/latest/manual/cfg-statustargets.html#mailnotifier)，一切似乎都很好；我不会向感兴趣的用户发送邮件，因此不需要`lookup`争论。我只是尝试将邮件发送到明确说明的地址，以防任何构建失败。我基本上是这样做的：

> 要获得一个简单的每构建一条消息（例如，对于邮件列表），请改用以下表单。此表单不向单个开发人员发送邮件（因此不需要 lookup= 参数，如下所述），而是只向参数中指定的额外收件人发送邮件：

```
mn = MailNotifier(fromaddr="buildbot@example.org",
                  sendToInterestedUsers=False,
                  extraRecipients=['listaddr@example.org']) 
```

但是，即使我的构建失败，也没有电子邮件到达。可能是什么原因？

我使用 fromaddr 的方式是否存在问题，并且只是`buildbot@domain-name.org`按照示例使用地址？这个地址是否应该以某种方式在我们的域中注册？如果我改用它会有所不同`buildbot@localhost`吗？

问题可能是我没有使用引起的`relayhost`吗？从文档中的示例看来，这只需要为出站地址而不是入站地址进行身份验证设置。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:44:51.100

与 kfunk 的建议类似，我首先查看了 twistd.log。它包含以下内容：

```
2013-02-09 04:26:18+0000 [-] sending mail (868 bytes) to ['addr@example.com']
2013-02-09 04:26:18+0000 [-] Starting factory <twisted.mail.smtp.ESMTPSenderFactory instance at 0x31dc488>
2013-02-09 04:26:18+0000 [Uninitialized] SMTP Client retrying server. Retry: 5
2013-02-09 04:26:18+0000 [Uninitialized] SMTP Client retrying server. Retry: 4
2013-02-09 04:26:18+0000 [Uninitialized] SMTP Client retrying server. Retry: 3
2013-02-09 04:26:18+0000 [Uninitialized] SMTP Client retrying server. Retry: 2
2013-02-09 04:26:18+0000 [Uninitialized] SMTP Client retrying server. Retry: 1
2013-02-09 04:26:18+0000 [Uninitialized] Unhandled error in Deferred:
2013-02-09 04:26:18+0000 [Uninitialized] Unhandled Error
    Traceback (most recent call last):
    Failure: twisted.internet.error.ConnectionRefusedError: Connection was refused by other side: 111: Connection refused. 
```

我试图从机器的命令行手动发送一封电子邮件（使用`sendmail`），但失败了；事实证明，没有 SMTP 服务器启动。解决方案是安装和配置一个邮件传输代理（对于 Ubuntu，最常见的似乎是 Postfix，所以我安装了它）。有很多关于如何安装和配置 Postfix 的教程和手册，所以一旦我找到了线索，就很容易继续下去。

拥有自己的 SMTP 服务器有很多注意事项；例如找到一种方法来保护它免受未经授权的访问，否则它可能会被垃圾邮件发送者使用。但是，如果您想从 buildbot 获取电子邮件，则必须有一个 SMTP 服务器，因此值得努力学习和正确配置它。

# javascript - 使用动态 CSS 应用背景图像

> ID：14787343
> 
> 赞同：0
> 
> 时间：2013-02-09T10:51:35.973
> 
> 标签：javascript, css

我想将下面的图像应用为背景图像，但我不能这样做。

这是我的**setbackground.php**代码..

```
<?php

    $header_tile_image_url = 'http://www.example.com/myimage.jpg';
?>
var css = 'body {background-color:#fff;background-image:url(<?php echo $header_tile_image_url; ?>)}';

var themeCssNode = document.getElementById('theme_css');
if (themeCssNode) {
    themeCssNode.parentNode.removeChild(themeCssNode);
}
themeCssNode = document.createElement('style');
themeCssNode.type = 'text/css';
themeCssNode.id = 'theme_css';
document.getElementsByTagName('head')[0].appendChild(themeCssNode);
if (themeCssNode.styleSheet) {
    themeCssNode.styleSheet.cssText = css;
} else {
    var cssText = document.createTextNode(css);
    themeCssNode.appendChild(cssText);
} 
```

上面的 JavaScript 将替换样式表并应用新的样式表。问题是在应用背景图像时。

下面是我的**html代码**..

```
<html>
</head> <title> test program </title> 
<style id="theme_css" type="text/css"> 
    body {background-color:blue;font:13px arial,sans-serif;}
</style>
</head>

</body>

<script src="setbackground.php"> </script>
<h1> This is my test page </h1>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:43:24.723

那么，问题是执行代码时图像没有加载？您是否尝试`header("Content-type: text/javascript")`在输出任何内容之前在 setbackground.php 文件中包含代码？

```
<?php
   header("Content-type: text/javascript");
   $header_tile_image_url = 'http://www.example.com/myimage.jpg';
?>
var css = 'body {background-color:#fff;background-image:url(<?php echo $header_tile_image_url; ?>)}';
var themeCssNode = document.getElementById('theme_css');
// .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T10:55:32.273

您的 PHP 代码需要全部包含在 PHP 标记中。

```
<?php 
    $header_tile_image_url = 'http://www.example.com/myimage.jpg'; 
?> 
```

[http://www.javascriptkit.com/javatutors/setcss3properties.shtml](http://www.javascriptkit.com/javatutors/setcss3properties.shtml)

```
document.body.style.backgroundColor = "#fff";
document.body.style.backgroundImage = "url(<?php echo $header_tile_image_url; ?>)"; 
```

这对你有用吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T11:05:28.350

尝试这个

```
body
{
 background: url(../Image/bg.jpg) #10a5d3;
} 
```

# crontab - 我如何在 raspbian 上以用户身份执行 crontab？

> ID：14787350
> 
> 赞同：2
> 
> 时间：2013-02-09T10:52:54.333
> 
> 标签：crontab, raspbian

我在树莓派上，有 rasbpian ！我正在尝试安装一个新的 crontab 来执行一个基本脚本。这将使用 vlc 从网络摄像头拍摄照片。

我想每分钟都这样做，但我无法编辑我的 crontab 用户（crontab -e），只有 sudo crontab ......或者 vlc 必须在没有 root 的情况下执行！

```
pi@raspberrypi ~ $ crontab -e
crontabs/pi/: fdopen: Permission denied 
```

每个人都知道我该怎么做？

这是我的脚本：

```
#!/bin/bash

cvlc -I dummy v4l2:///dev/video0 --video-filter scene --no-audio --scene-path $

date > ~/webcam/date.txt 
```

这是我的 root crontab，它不起作用：

```
* * * * * sh image.sh 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T12:24:16.310

我不知道为什么你的权限被拒绝`crontab -e`，但如果你使用`sudo crontab -e -u pi`，那么你将能够使用 sudo 打开 pi 用户的 crontab。

顺便说一句，您可能需要为`image.sh`. 否则脚本将无法找到它。

# ruby-on-rails - 无法在我的控制器中使用 Geocoder 类

> ID：14787355
> 
> 赞同：3
> 
> 时间：2013-02-09T10:53:43.503
> 
> 标签：ruby-on-rails, module, geolocation, rails-geocoder

我有这样的麻烦：我想使用 ajax 请求来获取用户位置，所以我在我的控制器中创建了动作并在 json 中呈现 Geocoder 函数的结果。这是代码：

```
 def find_location
   location = Geocoder.coordinates(params[:location])
   render :json => (location)
  end 
```

在本地它工作得很好，在heroku上它也可以工作，但是当我将此代码添加到另一个项目时 - 它向我显示了这个错误

```
 NameError in ConnectionsController#find_location

   uninitialized constant ConnectionsController::Geocoder 
```

这很奇怪，因为**这是在控制台中工作的：**

```
 Geocoder.coordinates "Ukraine"
       => [48.379433, 31.16558] 
```

我试图包含 Geocoder::Model，但它不起作用。

有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-17T18:41:50.677

基于[这个问题](https://github.com/alexreisner/geocoder/issues/239)，您必须重新启动整个生产机器，而不仅仅是您的 apache 或 nginx。

我实际上不得不打开一个问题，因为它对我不起作用。 [https://github.com/alexreisner/geocoder/issues/501](https://github.com/alexreisner/geocoder/issues/501)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T15:06:01.350

确保你`geocoder gem`的没有分组在里面`:development`，或者`:test`里面`Gemfile`

它应该在组之外，以便我可以在所有环境中访问

前任：

```
#Gemfile

group :development, :test do
  #your gems
end 

gem 'geocoder' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-18T14:15:01.863

您是否有机会将 Docker 用于您的后端代码？

如果你这样做了，那么在你安装任何 gem 之后，你需要停止 Rails 容器，构建（或者如果你使用 dockerhub 从 dockerhub 下拉）新的镜像，然后再次启动你的容器。

一切都很好

# ruby-on-rails - 我必须以 unicode 格式（HINDI）捕获用户输入的表单数据并使用 Rails 存储到 oracle 数据库中

> ID：14787356
> 
> 赞同：1
> 
> 时间：2013-02-09T10:53:49.633
> 
> 标签：ruby-on-rails, ruby-on-rails-3, unicode, utf-8, internationalization

我已经厌倦了这里建议的多种选择。

[如何在印地语中以 unicode 存储数据](https://stackoverflow.com/questions/12435867/how-to-store-the-data-in-unicode-in-hindi-language)

[UTF8工作流程PHP、MySQL总结](https://stackoverflow.com/questions/11013537/utf8-workflow-php-mysql-summarized)

是否有任何可用的 rails gem 在这种情况下有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:06:44.110

您是否查看[`NLS_LANG`](http://www.oracle.com/technetwork/database/globalization/nls-lang-099431.html)过 Oracle 中的环境变量？

我会尝试将选项设置为：

`NLS_LANG = HINDI_INDIA.JA16EUC`

从常见问题解答：

> 语言环境是一组解决与给定语言和国家相对应的语言和文化要求的信息。传统上，与区域设置相关的数据为日期、时间、数字和货币等的格式化和解析提供支持。提供当前和正确的区域设置数据历来是每个平台所有者或供应商的责任，导致不一致和错误语言环境数据。
> 
> 设置 NLS_LANG 环境参数是为 Oracle 软件指定区域设置行为的最简单方法。它设置客户端应用程序和数据库服务器使用的语言和区域。它还表示客户端的字符集，它对应于客户端程序要输入或显示的数据的字符集。
> 
> NLS_LANG 在 UNIX 平台上设置为本地环境变量。NLS_LANG 在 Windows 平台上的注册表中设置。
> 
> NLS_LANG 参数包含三个部分：语言、地域和字符集。以下列格式指定它，包括标点符号：
> 
> `NLS_LANG = language_territory.charset`

在 Windows 机器上检查 NLS_LANG 环境变量的相关 SO 问题在[这里](https://stackoverflow.com/questions/11522800/how-do-i-check-the-nls-lang-of-the-client)。

# visual-studio-2012 - Visual Studio 2012 中的小自动提示蓝条的快捷方式是什么

> ID：14787360
> 
> 赞同：1
> 
> 时间：2013-02-09T10:54:12.820
> 
> 标签：visual-studio-2012, intellisense

在 Visual Studio 中，当您键入 Intellisense 无法识别的类名称或属性时，该单词的第一个字母下方会显示一个蓝色小条，其中包含建议要导入和重构的命名空间等选项。

有谁知道打开该窗口的快捷方式，必须将鼠标悬停在它上面？我一生都无法在 Google 上找到它，可能是因为我找不到该函数的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T15:23:58.310

我使用 Ctrl + 。（句点）在显示蓝条时打开该菜单的快捷方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T12:00:29.180

按 Alt + Shift + F10 调出上下文菜单。

此菜单中的命令在 Edit + IntelliSense + Generate 中也可用。只有生成方法具有预定义的快捷键：Ctrl+K、M。您可以使用工具 + 选项、自定义、键盘来分配其他快捷键。

# ember.js - Ember 和 Carrierwave

> ID：14787361
> 
> 赞同：0
> 
> 时间：2013-02-09T10:54:14.847
> 
> 标签：ember.js, carrierwave

因此，当查询返回载波哈希的模型时，我在 Ember 中得到了 his.get('pic') "[object Object]" 。那么如何进入视图呢？

```
{"record":{"id":1234,"first_name":"John","gravepic":{"url":"http://c185643.r43.cf1.rackcdn.com/uploads/record/gravepic/13267/IMG_0013.JPG","ios":{"url":"http://c185643.r43.cf1.rackcdn.com/uploads/record/gravepic/13267/ios_IMG_0013.JPG"},"thumb":{"url":"http://c185643.r43.cf1.rackcdn.com/uploads/record/gravepic/13267/thumb_IMG_0013.JPG"},"small":{"url":"http://c185643.r43.cf1.rackcdn.com/uploads/record/gravepic/13267/small_IMG_0013.JPG"},"medium":{"url":"http://c185643.r43.cf1.rackcdn.com/uploads/record/gravepic/13267/medium_IMG_0013.JPG"},"large":{"url":"http://c185643.r43.cf1.rackcdn.com/uploads/record/gravepic/13267/large_IMG_0013.JPG"}},"eulogy":"FATHER","deceased":true,"gender":"male","photos":[{"accuracy":null,"approval":null,"asset_caption":"","asset_name":null,"assetpic":{"url":"http://c185643.r43.cf1.rackcdn.com/uploads/photo/assetpic/270/iccfa_350x200_3.jpg","thumb":{"url":"http://c185643.r43.cf1.rackcdn.com/uploads/photo/assetpic/270/thumb_iccfa_350x200_3.jpg"},"small":{"url":"http://c185643.r43.cf1.rackcdn.com/uploads/photo/assetpic/270/small_iccfa_350x200_3.jpg"},"medium":{"url":"http://c185643.r43.cf1.rackcdn.com/uploads/photo/assetpic/270/medium_iccfa_350x200_3.jpg"},"large":{"url":"http://c185643.r43.cf1.rackcdn.com/uploads/photo/assetpic/270/large_iccfa_350x200_3.jpg"}},"copyright":null,"coredata_id":null,"created_at":"2013-02-09T10:36:13Z","id":270,"ignore":null,"is_approved":true,"latitude":null,"longitude":null,"record_id":"13267","updated_at":"2013-02-09T10:36:13Z","user_id":1},{"accuracy":null,"approval":null,"asset_caption":null,"asset_name":null,"assetpic":{"url":null,"thumb":{"url":null},"small":{"url":null},"medium":{"url":null},"large":{"url":null}},"copyright":null,"coredata_id":null,"created_at":null,"id":null,"ignore":null,"is_approved":true,"latitude":null,"longitude":null,"record_id":13267,"updated_at":null,"user_id":null}],"copies":[{"content":null,"created_at":null,"id":null,"is_approved":true,"name":null,"record_id":13267,"summary":null,"updated_at":null,"user_id":null}],}} 
```

接下来的问题将类似于record.photos.first.medium。或record.gravepic.small

只是不确定如何获得“对象对象”之外的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:45:59.283

我不确定这是否仍然是确切的 API，但如果你想从哈希中取出多个值，我建议添加一个新`DS.attr`类型。

```
DS.RESTAdapter.registerTransform('json', {
  deserialize: function(serialized) {
    return Em.isNone(serialized) ? {} : serialized;
  },
  serialize: function(deserialized) {
    return Em.isNone(deserialized) ? {} : deserialized;
  }
})

App.Something = DS.Model.extend({
  gravepic: DS.attr("json")
}) 
```

# android - 如何使用 ActionBar 中的项目图标显示文本？

> ID：14787364
> 
> 赞同：1
> 
> 时间：2013-02-09T10:54:41.097
> 
> 标签：android

有以下菜单：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item 
        android:id="@+id/item1"
        android:icon="@drawable/icon" 
        android:title="Text111" android:showAsAction="ifRoom|withText"/>
</menu> 
```

如您所见，我为菜单项设置了图标、标题和“showAsAction”属性，但是当我执行它时，Actionbar 上只有图标。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:18:27.800

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item 
        android:id="@+id/item1"
        android:icon="@drawable/ic_launcher" 
        android:title="Text111" android:showAsAction="withText"/>
</menu> 
```

检查您的代码，首先使用 ic_launcher 进行测试。然后移动 ifRoom 以检查它是否是原因！

# wcf - 在 .net 4.5 中使用 WCF 构建活动 STS

> ID：14787370
> 
> 赞同：2
> 
> 时间：2013-02-09T10:56:23.437
> 
> 标签：wcf, wif

我有一个场景，我需要构建一个 WCF 服务来为以“活动”模式连接的第 3 方非 Web 应用程序提供自定义身份验证 - 即我无法显示 Web 登录页面。

登录机制也是自定义的（即不一定是用户名/密码），所以我不能使用 ADFS 或 ACS。

我已经阅读了有关使用 WCF 构建活动 STS 的内容，但它们主要与 .NET 3.5 相关，并且由于 WIF 已集成到框架中，因此使用 .NET 4.5 的内容并不多。

我已经阅读[了如何使用 WCF 在 .Net 4.5 中进行 STS 的示例，](https://stackoverflow.com/questions/12851683/examples-of-how-to-a-sts-in-net-4-5-using-wcf)但它似乎不适合我的场景。

任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:05:06.783

也许你想看看

[http://thinktecture.github.com/Thinktecture.IdentityServer.v2/](http://thinktecture.github.com/Thinktecture.IdentityServer.v2/)

这是一个包含活动端点的开源 STS。

# ios - iPad 上的 UIModalPresentationFormSheet。键盘出现时如何调整UITextView的高度

> ID：14787372
> 
> 赞同：6
> 
> 时间：2013-02-09T10:56:37.137
> 
> 标签：ios, ipad, keyboard

UITextView 是模态控制器视图的子视图。当键盘出现时，我需要降低 UITextView 的高度，以便 UITextView 的底部边框 y 坐标等于键盘的顶部 y 坐标。我得到键盘高度

```
CGRect frameBegin = [[notification.userInfo objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue] ;
CGRect frameEnd = [[notification.userInfo objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue];

CGRect resultBegin = [self.view convertRect:frameBegin fromView:nil];
CGRect resultEnd = [self.view convertRect:frameEnd fromView:nil];

CGFloat kbdHeight = resultBegin.origin.y  - resultEnd.origin.y; 
```

问题是当键盘出现时这个模态视图会跳起来。在这种情况下如何计算键盘的上边框坐标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-14T18:49:28.180

你可以这样做：

```
1\. Register for keyboard notifications:

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(myTextViewHeightAdjustMethod:)
                                             name:UIKeyboardWillShowNotification
                                           object:nil];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(myTextViewHeightAdjustMethod:)
                                             name:UIKeyboardDidShowNotification
                                           object:nil];

2\. Calculate intersection and adjust textView height with the bottom constraint

    - (void)myTextViewHeightAdjustMethod:(NSNotification *)notification
    {
        NSDictionary *userInfo = [notification userInfo];
        CGRect keyboardFinalFrame = [[userInfo emf_ObjectOrNilForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue];

        CGPoint keyboardOriginInView = [self.view convertPoint:keyboardFinalFrame.origin fromView:nil];

             CGFloat intersectionY = CGRectGetMaxY(self.view.frame) - keyboardOriginInView.y;

             if (intersectionY >= 0)
             {
                 self.textViewBottomConstraint.constant = intersectionY + originalTextViewBottomConstraint;

                 [self.textView setNeedsLayout];
    } 
```

记得取消注册通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-19T10:50:13.493

如果您不需要自己为此编写代码，我建议您使用[https://github.com/hackiftekhar/IQKeyboardManager](https://github.com/hackiftekhar/IQKeyboardManager)

它工作得很好（对我来说，到目前为止），你需要做的就是导入它并在 AppDelegate 中添加这一行代码：

```
func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -> Bool {

    //Magic one-liner
    IQKeyboardManager.sharedManager().enable = true

    return true
} 
```

# c++ - 两个相关的类层次结构——覆盖虚函数

> ID：14787385
> 
> 赞同：1
> 
> 时间：2013-02-09T10:58:57.890
> 
> 标签：c++

假设我有这个基类：

```
struct Vehicle {
  //"op" stands for the operator of the vehicle
  //examples: pilot, truck driver, etc.
  virtual void insert_op(Op op) = 0;
  //other members...
}; 
```

而这两个子类

```
struct Truck : public Vehicle {
  void insert_op(Op op) override {
    //prepare Truck with truck driver
  }
};

struct Airplaine : public Vehicle {
  void insert_op(Op op) override {
    //prepare Airplaine with pilot
  }
}; 
```

如您所料，这是另一个层次结构：

```
struct Op {};
struct TruckDriver : public Op {};
struct Pilot : public Op {}; 
```

你已经看到问题了，不是吗？我想强制卡车只接受卡车司机和强制飞机只接受飞行员，但这在当前设计中是不可能的。C++ 不允许被覆盖的虚拟变量的 diff 参数。

我想我可以在 insert_op 的每个子类实现中对“Op”的类型进行运行时类型检查，但这听起来是一个非常丑陋的解决方案，而且它在编译时没有强制执行。

有什么出路吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T11:06:28.620

你`Vehicle`说`virtual void insert_op(Op op)`这意味着“每辆车都可以接受任何`Op`”。

因此，根据您的设计，a`Truck`不是`Vehicle`子类的有效候选者，因为它不能接受*任何* `Op`- 它只能接受`TruckDriver`s。

相关：[里氏替换原理](http://en.wikipedia.org/wiki/Liskov_substitution_principle)

* * *

问题出在您的设计中，而不是在实施中。我建议简化你的类层次结构。你真的需要这么多的类和继承吗？您可以简单地使用`Vehicle`并`Op`具有标识其类型的字段吗？

* * *

让我进一步解释设计问题：

假设某个对象`A`带有方法`manVehicle(Vehicle&)`。`Truck`是 Vehicle 的子类，因此可以使用 类型的对象调用此方法`Truck`。

但是， 的实现`A`并不知道`Vehicle`s 的具体类型是什么。它只知道所有车辆都有一个方法`insert_op(Op)`，因此`insert_op(Pilot())`即使车辆实际上是一个`Truck`.

结论：

*   编译时检查甚至是不可能的

*   运行时检查可以工作...

    *   但只会把问题扫到地毯下。s的用户`Vehicle`希望能够调用`insert_op(Op)`任何`Vehicle`.

一种解决方案是将`Vehicle`界面修改为如下所示：

```
struct Vehicle {
  virtual bool can_insert_op(Op op) = 0;
  virtual void insert_op(Op op) = 0;
}; 
```

并将其记录下来，以便调用者知道`insert_op`只能用`Op`满足`can_insert_op`给定的 s 来调用它`Vehicle`。或类似的东西（例如`insert_op`“此车辆的无效操作类型”中的记录异常） - 只要它是此接口的记录部分，任何东西都可以工作。

* * *

BTW 技术评论：您可能希望这些方法采用`Op`by 指针或引用而不是复制它，以避免不必要的复制和[切片](http://en.wikipedia.org/wiki/Object_slicing)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:12:58.287

Vehicle 子类应各自创建其适当的 Operator。应该没有设置运算符的方法。Vehicle 可以有一个 get_operator 方法，但仅此而已。

我猜这不是您的实际层次结构（除非您正在创建游戏或其他东西）。如果您显示您的实际层次结构，它可能有助于提出更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T11:27:18.383

不要发现反对OOD。如果卡车司机是司机的孩子，那么它是司机，但有其他特征。在你的情况下，司机是不允许的，那么它不是副卡车司机。如果您想坚持当前的设计，您需要按照您的假设在 fn 的开头进行检查。多态性被设计为不会在@compile time 出现错误，因此它是运行时的动态绑定，不依赖于编译时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T11:37:57.017

关于什么：

```
struct Vehicle {
  //"op" stands for the operator of the vehicle
  //examples: pilot, truck driver, etc.
  virtual void insert_op(Op op) = 0;
  virtual bool validate_op(Op op);
  //other members...
};

struct Truck : public Vehicle {
  void insert_op(Op op) override {
    if (validate_op(op)) {
        //prepare Truck with truck driver
    }
  }
  bool validate_op(Op op) override {
    //check if this is a valid truck driver
    return ( typeid(op)==typeid(TruckDriver) );
  }
}; 
```

您将能够保留`insert_op`对它的一些验证的通用定义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-29T06:22:15.627

你想要完成的事情是合法的，但是，没有一个好的解决方案的支持。这不是 C++ 本身的问题，而是面向对象的问题：

从 开始的类层次结构与 的层次结构`Vehicle`是*协变*`Op`的。如果你有燃料的层次结构，你也会遇到同样的问题。或者 Ops 的国籍等。

其他人已经告诉您如何通过运行时检查来完成此操作，但当然，总有一些需要改进的地方。

如果你想完成完整的编译时检查，并且你想要的多态性是在编译时而不是运行时，你可以使用通用编程模板。

# ios - 使用未声明的错误：iOS 应用程序中 ViewController.m 中的警报错误

> ID：14787390
> 
> 赞同：1
> 
> 时间：2013-02-09T10:59:42.770
> 
> 标签：ios, ios6, ios-simulator

在我的应用程序中执行代码时出错，任务是在警报后重定向到 url。但关于我猜是正确的代码。这是我的代码

```
- (void) alertStatus:(NSString *)msg :(NSString *)title :(int)tag
{
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:title
                                                       message:msg
                                                       delegate:self
                                               cancelButtonTitle:@"Ok"
                                              otherButtonTitles:nil, nil];
    if (tag) alert.tag = tag;
    {
    [alertView show];
    }
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if(alertView.tag == 101)
    {
        [[UIApplication sharedApplication] openURL:[NSURL URLWithString: @"http://ABC.company.com"]];
        //[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationFade];
    }
} 
```

错误显示在该行

```
if (tag) alert.tag = tag;(Use of undeclared identifier:alert) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:05:53.713

你有几个...错误（遗漏）

*   `- (void) alertStatus:(NSString *)msg **withTitle**:(NSString *)title **andTag**:(int)tag`
*   `if (tag) alert.tag = tag;`// 但之前你声明`alertView`

# java - 检查“空”的条件

> ID：14787392
> 
> 赞同：3
> 
> 时间：2013-02-09T10:59:47.327
> 
> 标签：java, android, string, if-statement, null

我对检查空条件有疑问。例如：

```
if(some conditon)
value1= value;  //value1 is string type
else 
value1= ""; 
```

同样，其他 4 个字符串值也有类似的条件。我需要的是我想检查所有这 5 个字符串值是否为空，以便做一些其他特定的部分。我是这样做的

```
if(value1 == null)
{
} 
```

但是即使 value1=""，pgm 控件也没有进入循环。然后我尝试了

```
if(value1 ==""){
} 
```

这也没有奏效。

我们不能检查 null 和 "" 值是否相同？谁能帮我？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-09T11:03:50.207

如果要检查 String 是否为空，请使用

```
if (s == null) 
```

如果要检查字符串是否为空字符串，请使用

```
if (s.equals("")) 
```

或者

```
if (s.length() == 0) 
```

或者

```
if (s.isEmpty()) 
```

空字符串是空字符串。它不为空。并且`==`绝不能用于比较字符串内容。`==`测试两个变量是否引用同一个对象实例。如果它们包含相同的字符，则不会。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-09T11:04:30.710

要检查字符串上的“不为空”和“不为空”，请使用静态

```
TextUtils.isEmpty(stringVariableToTest) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-09T11:02:41.303

看起来您想检查字符串是否为空。

```
if (string.isEmpty()) 
```

您无法通过这样做来检查，`if (string == "")`因为您正在比较 String 对象。它们永远不会相同，因为您有两个不同的对象。要比较字符串，请使用`string.equals()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-09T11:04:23.967

当您处理 String 时，请始终使用`.equals`.

equals() 函数是 Object 类的一个方法，程序员应该重写它。

如果您想检查字符串是否为空，那么`if (string.isEmpty())`您也可以尝试`if (string.equals(null))`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-09T11:06:14.750

您可以使用：

我们可以通过两种方式检查字符串是否为空：

*   `if(s != null && s.length() == 0)`
*   `if(("").equals(s))`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-09T11:06:09.520

喜欢下面。

```
String str;
if(str.length() > 0)
{
     Log.d("log","str is not empty");
}
else
{
     Log.d("log","str is empty");
} 
```

# java - Java Bean 约定

> ID：14787394
> 
> 赞同：2
> 
> 时间：2013-02-09T11:00:20.617
> 
> 标签：java, spring, servlets, javabeans, containers

Java Bean 的约定之一是：

**setter 的返回类型必须是*void*。**

或者至少这是大多数人所说的。我的问题是：它真的**必须**是无效的吗？我喜欢返回**“this”**而不是**“void”**，因为我可以像这样将方法链接在一起：

```
student.setName("Tom").setAge(15); 
```

如果我返回“this”而不是“void”，那么 Spring 容器或 Servlet 容器或任何使用 Java Beans 的东西会有问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T11:21:13.597

是的，setter 的返回类型*必须*是`void`为了将`java.beans.Introspector`其识别为 bean 属性并为其返回 a `PropertyDescriptor`。直接检查方法名称和参数类型的 API 将与非 void setter 一起使用，但任何依赖于它的东西`Introspector`都不会。

解决此问题的一个很好的例子是 Amazon Web Services SDK，它提供了普通`public void setSomething`方法（成为有效的 Java Bean）和`public X withSomething`返回`this`.

```
Student s = new Student().withName("Tom").withAge(15); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-09T11:06:44.543

可以肯定的是，您可以添加另一个私有方法，该方法返回在您的 SET 方法中设置的对象，并在**public void set()中调用这个新方法**

# c++ - 当回调与 boost::signals2::signal 断开连接时执行代码

> ID：14787395
> 
> 赞同：0
> 
> 时间：2013-02-09T11:00:47.123
> 
> 标签：c++, boost, signals2

`connect`简短：当使用断开连接的回调连接时，有什么方法可以执行代码？

Long：我有一个包含多个回调的类，这些回调很昂贵，我只想为用户感兴趣的那些生成回调：

```
boost::signals2::connection bind_to_signal(signal_code code, signal_signature const& fn)
{
    start_callback(code);
    return signal_[code].connect(fn);
} 
```

现在我想在`stop_callback`绑定到信号的所有回调断开连接时执行。

# php - 如何识别网页的真实访问

> ID：14787396
> 
> 赞同：1
> 
> 时间：2013-02-09T11:00:51.130
> 
> 标签：php, javascript, zend-framework

**我们想要做什么：**
我们的系统正在将客户端的所有连接重定向到我们的 Web 服务器（例如：www.example.com/index）。
如果某些东西（应用程序、win update、messengers 和...）想要连接到将被重定向到该地址的互联网，则在客户端 PC 中。
我们想跟踪客户通过打开网络浏览器并提交我们的地址而不是来自应用程序的网络访问。

**问题：**
我们正在使用 Zend 框架、php 和 javascript
一些应用程序可能会运行`java scripts`，所以不会使用完整的（一些例外）。如果我们想分别提交每个页面的访问，则无法进行
跟踪。 一些应用程序变得像访问者。（还有饼干） `IP address`
`sessions`

**我们做什么：**
使用java脚本代码来监听鼠标移动事件，当它发生时，我们用ajax发送我们的日志信息。所以这将表明真正的访问者正在访问一个页面。

**问题：**
有没有更好的方法来跟踪这次访问？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T11:08:24.693

也许您可以在网页加载时通过 JavaScript 加载隐藏图像来尝试“ping”服务器。像这样的东西：

```
window.addEventListener("load",function() {
    var img = document.createElement("img");
    img.src = "/pingme.php";
    img.style.display = "none";

    document.body.appendChild(img);
},false); 
```

# sharepoint - 从字符串c#中提取子字符串

> ID：14787402
> 
> 赞同：-1
> 
> 时间：2013-02-09T11:01:27.197
> 
> 标签：sharepoint, sharepoint-2010

我有一组代码返回一个值“2；#bbbb”，因为我想实现 bbbb。下面是我写的代码。SPListItemCollection col = StationaryList.Items；for (int i = 0; i < col.Count; i++) { SPListItem item = col[i]; categoryName=item["QuizCategoryName"].ToString(); }

```
Please tell me what do i do to achieve this.
Actual Output: "2;#bbbb"
Expected Output: bbbb 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:04:21.190

```
string str = categoryName;
string[] result = str.Split('#');
if(result.Length > 1)
Response.Write(result[1]); // your expected output 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T22:06:42.310

这是可以使用下一个 sintaxys 提取的查找字段的格式：

```
SPFieldLookupValue f = new SPFieldLookupValue("your text here");
string value = f.LookupValue; 
```

这种方式可以提取ID，在你的情况下是2

安德鲁

# makefile - 尝试编译 binutils 时配置错误

> ID：14787408
> 
> 赞同：1
> 
> 时间：2013-02-09T11:02:08.630
> 
> 标签：makefile, cross-compiling, configure, binutils

我正在尝试构建一个交叉编译器，但由于某种原因 binutils 无法编译。当我跑步时`make all`，这是我一段时间后得到的：

> 加载缓存 .././config.cache
> 检查是否启用 Makefile 的维护者特定部分...不
> 检查是否安装 libbfd...不
> 检查可执行后缀...（缓存）.dSYM
> 检查 gcc.. . (cached) /usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2
> 检查C编译器是否(/usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin /gcc-4.2 -g -O2 ) 工作...没有
> 配置：错误：安装或配置问题：C 编译器无法创建可执行文件。
> make: *** [配置操作码] 错误 1

看着`config.log`这是我得到的：

```
configure:565: checking for Cygwin environment
configure:598: checking for mingw32 environment
configure:675: checking host system type
configure:696: checking target system type
configure:714: checking build system type
configure:739: checking for gcc
configure:852: checking whether the C compiler (/usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2 -g -O2 ) works
configure:868: /usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2 -o conftest -g -O2   conftest.c  1>&5
configure:894: checking whether the C compiler (/usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2 -g -O2 ) is a cross-compiler
configure:899: checking whether we are using GNU C
configure:927: checking whether /usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2 accepts -g
configure:959: checking for POSIXized ISC
configure:997: checking for a BSD compatible install
configure:1050: checking whether build environment is sane
configure:1107: checking whether make sets ${MAKE}
configure:1153: checking for working aclocal
configure:1166: checking for working autoconf
configure:1179: checking for working automake
configure:1192: checking for working autoheader
configure:1205: checking for working makeinfo
configure:1228: checking for ar
configure:1260: checking for ranlib
configure:1407: checking for ld used by GCC
configure:1475: checking if the linker (/usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2) is GNU ld
configure:1492: checking for /usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2 option to reload object files
configure:1504: checking for BSD-compatible nm
configure:1542: checking whether ln -s works
configure:1563: checking how to recognise dependant libraries
configure:1736: checking for object suffix
configure:1762: checking for executable suffix
configure:1932: checking for ranlib
configure:1999: checking for strip
ltconfig:678:checking for /usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2 option to produce PIC
ltconfig:687:checking that /usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2 PIC flag  -fPIC -DPIC works.
ltconfig:749: checking if /usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2 static flag  works
ltconfig:780: finding the maximum length of command line arguments
ltconfig:@lineno@: result: 98305
ltconfig:887: checking if /usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2 supports -fno-rtti -fno-exceptions
ltconfig:888: /usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2 -c -g -O2 -fno-rtti -fno-exceptions -c conftest.c  conftest.c 1>&5
ltconfig:1431: checking if global_symbol_pipe works
ltconfig:1432: /usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2 -c -g -O2  conftest.c 1>&5
ltconfig:1435: eval "nm conftest.o | sed -n -e 's/^.*[  ]\([BCDEGRST][BCDEGRST]*\)[     ][  ]*\(\)\([_A-Za-z][_A-Za-z0-9]*\)$/\1 \2\3 \3/p' > conftest.nm"
cannot find nm_test_var in conftest.nm
ltconfig:1431: checking if global_symbol_pipe works
ltconfig:1432: /usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2 -c -g -O2  conftest.c 1>&5
ltconfig:1435: eval "nm conftest.o | sed -n -e 's/^.*[  ]\([BCDEGRST][BCDEGRST]*\)[     ][  ]*\(_\)\([_A-Za-z][_A-Za-z0-9]*\)$/\1 \2\3 \3/p' > conftest.nm"
ltconfig:1487: /usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2 -o conftest -g -O2 -fno-builtin   conftest.c conftstm.o 1>&5
configure:2338: checking whether to enable maintainer-specific portions of Makefiles
configure:2361: checking whether to install libbfd
configure:2398: checking for executable suffix
configure:2434: checking for gcc
configure:2547: checking whether the C compiler (/usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2 -g -O2 ) works
configure:2563: /usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2 -o conftest.dSYM -g -O2   conftest.c  1>&5
ld: can't open output file for writing: conftest.dSYM, errno=21 for architecture x86_64
collect2: ld returned 1 exit status
configure: failed program was:

#line 2558 "configure"
#include "confdefs.h"

main(){return(0);} 
```

我应该怎么做才能纠正这个？

# jquery - 如何仅在所选项目上切换列表菜单中的类？

> ID：14787409
> 
> 赞同：2
> 
> 时间：2013-02-09T11:02:10.383
> 
> 标签：jquery, toggle

我需要建立一个`list-menu`有`hover`效果的。我想要`toggle`一个包含其他几个类的类。这通常有效，但我有一个问题，即切换效果是在我的列表菜单中的所有列表项上切换类，而不仅仅是在我通过悬停选择的项上。

我做了一个小提琴给你看。

[JS小提琴](http://jsfiddle.net/rheingau360/NcQsd/)

```
$(document).ready(function() {

    $("li a").hover(function() {
    $(".lvl3-hover").toggle();

}) 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:05:55.260

您需要使用[.find()](http://api.jquery.com/find/)仅过滤接收悬停事件的元素：

```
$(document).ready(function() {
    $("li a").hover(function() {
        $(this).find(".lvl3-hover").toggle();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:13:32.503

将鼠标悬停给`'>'`事件持有者的直接孩子：

试试这个：

```
$("li a").hover(function () {
    $("> .lvl3-hover", this).toggle();
}); 
```

# asp.net-mvc - 在不刷新页面的情况下单击按钮将部分视图加载到 div

> ID：14787413
> 
> 赞同：0
> 
> 时间：2013-02-09T11:02:37.227
> 
> 标签：asp.net-mvc, jquery

我知道这个问题可能会重复，但我的查询不同让我解释一下，我在页面中有一个下拉菜单，通过在下拉列表中选择值，我点击提交按钮..我想通过点击提交按钮我需要在标记中加载部分视图，该标记是选定下拉列表值的记录列表。

我试过这个：

```
$("#btnclick").click(function () {
            $.ajax({
                type: 'POST',
                url: '@Url.Content("~/Search/MDLNoDataList")',
                data: mdlno,
                success: function (data) { $("#viewlist").innerHtml = data; }
            });
        }); 
```

但没有得到结果而且我正在使用这些许多 jquery 插件

```
<script src="../../Scripts/jquery-migrate-1.0.0.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.unobtrusive-ajax.js" type="text/javascript"></script>
<script src="../../Scripts/jquery-1.5.1.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T11:24:48.510

如果我理解正确，以下是您需要做的。

**HTML 示例：**

```
<div id="records">
</div>
<select id="ddlRecordType">
<option value="1">Type 1</option>
<option value="2">Type 2</option>
</select>
<input type="submit" value="Load Records" id="btn-submit" /> 
```

**jQuery 代码**

```
$(document).ready(function(){
 $('#btn-submit').click(function(){
  var selectedRecVal=$('#ddlRecordType').val();
   $('#records').load('/LoadRecords?Id='+selectedRecVal);
   return false; // to prevent default form submit
 });
}); 
```

> 这里**?Id=**是传递给服务器的查询字符串参数，以获取下拉列表中的选定项目。

**编辑：**添加了以下答案，因为问题内容从最初的帖子发生了变化

```
 $("#btnclick").click(function () {
        $.ajax({
            type: 'POST',
            url: '@Url.Action("MDLNoDataList","Search")',
            data: mdlno,
            success: function (data) { 
              // $("#viewlist")[0].innerHtml = data; 
               //or 
               $("#viewlist").html(data);
             }
        });
      return false; //prevent default action(submit) for a button
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T12:51:08.943

确保通过单击处理程序返回 false 来取消表单提交的默认操作：

```
$("#btnclick").click(function () {
    $.ajax({
        type: 'POST',
        url: '@Url.Action("MDLNoDataList", "Search")',
        data: mdlno,
        success: function (data) { 
            $("#viewlist").html(data); 
        }
    });

    return false; // <!-- This is the important part
}); 
```

如果您使用的是 WebForms 视图引擎而不是 Razor，请确保使用正确的语法来指定 url：

```
$("#btnclick").click(function () {
    $.ajax({
        type: 'POST',
        url: '<%= Url.Action("MDLNoDataList", "Search") %>',
        data: mdlno,
        success: function (data) { 
            $("#viewlist").html(data); 
        }
    });

    return false; // <!-- This is the important part
}); 
```

如果您不返回 false，则当您单击提交按钮时，表单只是简单地提交到服务器，浏览器会重定向离开页面，显然您的 AJAX 调用永远没有时间执行。

您还会注意到我对您的原始代码所做的一些改进：

*   在指向服务器端控制器操作时使用 Url.Action 帮助程序，以便考虑应用程序中定义的路由。
*   使用 jQuery 的`.html()`方法而不是`innerHTML`设置给定元素的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T11:06:32.933

为此，您需要 AJAX。

```
$.get(url, data, function(data) { $(element).append(data) }); 
```

和模糊的部分视图。

```
element {
    overflow:hidden;
} 
```

# dynamics-ax-2009 - 要查找 AX 2012 中字符串类型字段中写入的特定单词？

> ID：14787417
> 
> 赞同：0
> 
> 时间：2013-02-09T11:03:32.250
> 
> 标签：dynamics-ax-2009, x++, dynamics-ax-2012, ax

是否可以在 AX 2012 中找到写入 AX 2012 表或表单的字符串类型字段中的特定单词/单词。例如，我在名为 test 的表中有一个名为**Memo的字段。**在该字段中，我写了一条文字： *您好，我们需要确认您的 < mobileNumber > 已成功附加您的帐号。<帐户>。*

现在，我需要找到写在标签“<”和“>”内的所有文本。此外，我需要根据需要替换这些文本。请告诉它在 AX 2012 中是否可行，或者是否有任何其他选项可以满足我的需求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T20:21:18.520

您可以使用 strScan 函数 [http://msdn.microsoft.com/en-US/library/aa866529(v=ax.50).aspx找到每次出现的“<”和“>”](http://msdn.microsoft.com/en-US/library/aa866529%28v=ax.50%29.aspx)

使用它来查找“<”和匹配“>”的位置

使用 SubStr [http://msdn.microsoft.com/en-US/library/aa677836(v=ax.50).aspx](http://msdn.microsoft.com/en-US/library/aa677836%28v=ax.50%29.aspx)查找“<”和“>”之间的内容，并基于此应用您的替换（使用strPoke [http://msdn.microsoft.com/en-US/library/aa850123(v=ax.50).aspx](http://msdn.microsoft.com/en-US/library/aa850123%28v=ax.50%29.aspx) )

可以在此处找到一个有用的 AX2009 字符串类，该类使用这些方法并且可能会有所帮助 [http://axgeek.blogspot.co.uk/2010/04/string-function-class.html](http://axgeek.blogspot.co.uk/2010/04/string-function-class.html)，它不应该花费太多精力转换为 2012 年。

您特别感兴趣的是 replace 方法。

但是，将备忘录设置为“您好，我们需要确认您的 %1 已成功附加到您的帐号。%2。”并使用 strFmt [http://www.axaptapedia 插入值可能更简单。 com/index.php?title=StrFmt](http://www.axaptapedia.com/index.php?title=StrFmt)

当然.Net String.Replace 方法也是可用的。请参阅[http://msdn.microsoft.com/en-us/library/cc584291.aspx](http://msdn.microsoft.com/en-us/library/cc584291.aspx)和[http://msdn.microsoft.com/en-us/library/system.string.replace.aspx](http://msdn.microsoft.com/en-us/library/system.string.replace.aspx)

# android - 在Android中----当用户更改系统日期时，天小部件不会更新

> ID：14787423
> 
> 赞同：1
> 
> 时间：2013-02-09T11:04:11.537
> 
> 标签：android, android-widget, datepicker

Android Days Widget 因为用户手动更改日期时天数不会改变。但是当用户手动更改日期时，会自动调用剩余天数。

我在代码中使用了日期选择器。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:32:59.183

用这个...

```
 <receiver
        android:name=".WidgetProvider1_1"
        android:label="@string/app_name"
         >
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            <action android:name="android.intent.action.TIME_SET"/>
        </intent-filter>

        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/widget_info1_1" />
    </receiver> 
```

# javascript - 编码数据以发送到 javascript

> ID：14787427
> 
> 赞同：0
> 
> 时间：2013-02-09T11:04:30.680
> 
> 标签：javascript, grails

您好我正在尝试从我的 grails 控制器向 javascript 函数发送数据。我已经使用了 escape() 但它没有帮助。以下是 Fiddler 展示的内容。我想是导致问题的换行符..

控制器：

```
render(text:content, contentType: "text/javascript") 
```

数据：

```
addPestMarker( 6, escape('White Fly'), escape('Bemisia tabaci                                 ') ,  escape( 'N/A'), escape(' N/A'), escape('N/A'), escape('Install sticky fly traps.'), escape('Nymph measures to 0.3-0.8mm long. Size is about 1mm long with wings. They possess arrhenotoky where unfertilized eggs produce male flies while fertilized eggs produce female flies. Each female can produce 200 eggs in her life time. For whiteflies, development period takes 30 to 40 days depending on temperature.'), '35.0', '70.0','null', 'null'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T22:55:18.993

我相信你需要的是`return content as JSON`. Grails 将序列化为`content`JSON 并使用适当的 contet 类型。

# php - php 的 saprfc 扩展不起作用

> ID：14787432
> 
> 赞同：3
> 
> 时间：2013-02-09T11:05:48.213
> 
> 标签：php, saprfc

我是 SAP-ABAP 初学者，我需要通过 PHP 从 SAP 获取数据以满足我公司的需要。

我已经安装：

*   WAMP 2.2 版
*   阿帕奇版本：2.2.22
*   PHP版本：5.3.13
*   SAPRFC 版本为 1.4.1

将 php_saprfc_530.dll 添加到 php ext 目录并添加扩展名到 php.ini

重新启动 Apache 时，应用程序事件报告此错误：

> PHP 启动：saprfc：无法初始化模块 使用 build ID=API20090626、TS 编译的模块 使用 build ID=API20090626、TS、VC6 编译的 PHP

在过去的两天里，我一直在努力解决这个错误。我该如何解决？

# ruby - 救援给定匿名模块而不是异常类

> ID：14787436
> 
> 赞同：1
> 
> 时间：2013-02-09T11:06:07.057
> 
> 标签：ruby, exception

我们可以在语句之后放置一个类或模块`rescue`，但是在下面的代码中，我看到了一个方法`rescue`，它不适合这种模式。它是如何工作的，它是如何产生它所设计的输出的？

```
def errors_with_message(pattern)
  # Generate an anonymous "matcher module" with a custom threequals
  m = Module.new
  (class << m; self; end).instance_eval do
    define_method(:===) do |e|
      pattern === e.message
    end
  end
  m
end
puts "About to raise"
begin
  raise "Timeout while reading from socket"
rescue errors_with_message(/socket/)
  puts "Ignoring socket error"
end
puts "Continuing..." 
```

输出

```
About to raise
Ignoring socket error
Continuing... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T11:15:52.837

救援需要一个类或一个模块，真的。因此，该方法创建了一个具有特殊行为的匿名模块。您会看到，当`rescue`搜索处理程序时，它将`===`运算符应用于您提供的异常类/模块，并将实际异常作为参数传递。

```
begin
  # do something
rescue MyCustomError
  # process your error
rescue StandardError
  # process standard error
end 
```

因此，如果`StandardError`（或其后代之一）被提升，第一个处理程序将被跳过，第二个处理程序将被匹配。

现在，来自的模块`errors_with_message`很特别。它重新定义了 threequals 运算符以匹配异常消息。因此，如果引发错误并且其消息包含单词“socket”，则此处理程序将匹配。很酷的把戏，对吧？

# java - 如何将数据从一帧传递到另一帧以及项目中的所有其他帧？

> ID：14787439
> 
> 赞同：1
> 
> 时间：2013-02-09T11:06:15.430
> 
> 标签：java

我想将登录框架中的数据（值）传递或共享到我项目中的所有框架，H 已经制作了这样的变量类

```
public class SharedData {

    public  String LoginName;

    public SharedData() {
    }

    /**
     * @return the LoginName
     */
    public String getLoginName() {
        return LoginName;
    }

    /**
     * @param LoginName the LoginName to set
     */
    public void setLoginName(String LoginName) {
        this.LoginName = LoginName;
    }
} 
```

从第一帧（登录帧）开始，我创建了这个类的对象并像这样设置它的用户名

```
 public  SharedData  data1=new SharedData();
    data1.setLoginName(Username_Login.getText().toString()); 
```

从第二帧我得到值：

```
public  SharedData  data=new SharedData();
ogin_labelName.setText(data1.getLoginName().toString()); 
```

但最后它不起作用......有什么问题或任何解决方案？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T11:20:30.457

您可以创建一个 bean 类，如：

```
public class SharedData {
        public  static String LoginName;

        public static void setLoginName(String LoginName) {
            SharedData.LoginName = LoginName;
        }

        public static String getLoginName() {
            return LoginName;
        }
    } 
```

并使用这个类来设置和从另一个表单获取一个值，只需调用这个类来设置一个值：

```
SharedData.setLoginName(Username_Login.getText().toString()); 
```

并获得一个价值：

```
ogin_labelName.setText(SharedData.getLoginName(Username_Login.getText().toString())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:13:15.430

您正在第二帧中创建一个新对象。很明显，第二个对象不包含与第一个对象相同的数据。

如果您将消息放入一个盒子，然后打开另一个盒子，您将不会在其中找到该消息。与 Java 对象相同。

当登录框架构造主框架时，它应该将它创建的 SharedData 对象传递给主框架构造函数（或传递给一个 setter 方法）：

```
SharedData data1 = new SharedData();
data1.setLoginName(Username_Login.getText().toString());

MainFrame frame = new MainFrame(data1); 
```

您还应该学习 Java 命名约定并遵守它们。字段应以小写字母开头，并且不应包含下划线：`userNameLogin`而不是`Username_Login`. `toString()`调用字符串是没有意义的。

# objective-c - 方法之间的对象

> ID：14787441
> 
> 赞同：-1
> 
> 时间：2013-02-09T11:06:23.923
> 
> 标签：objective-c, cocoa

![错误截图](../Images/e4bad48b49f9e4cc278c55b779588c8a.png)

有什么方法可以在方法之间使用对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:08:27.757

stringOne 必须是你的类的成员变量：

[编辑] MyClass.h

```
@interface MyClass : NSObject {

 CString* stringOne;

}

@end 
```

# django - django：如何将变量传递给类？

> ID：14787450
> 
> 赞同：1
> 
> 时间：2013-02-09T11:06:47.300
> 
> 标签：django, python-2.7, python-2.x, django-generic-views, django-1.4

网址.py

```
url(r'^customer/(?P<name>[^\s]+)/$', customerDetailView.as_view(), name="customerDetailView"), #pass 'name' variable 
```

和

视图.py

```
class customerDetailView(DetailView):
    context_object_name = 'customerDetail'
    template_name = "customer.html"
    allow_empty = True

    def __init__(self, name=None, *args):
        self.name = name # name is 'None'... Why...?

    def get_queryset(self):
        return Customer.objects.get(name=self.name) 
```

我只是请求'192.168.1.5/customer/abc/'，但没有'name'...

如何接收“姓名”？我该怎么办？

编辑 - - -

视图.py

```
class customerDetailView(DetailView):
    context_object_name = 'customerDetail'
    template_name = "customer.html"
    allow_empty = True
    """
    def __init__(self, **kwargs):
        import pdb;pdb.set_trace()
        self.name = kwargs['name']
    """
    def get_queryset(self):
        # import pdb;pdb.set_trace()
        self.name = self.kwargs['name'] # Thanks  Kay Zhu!!
        return Customer.objects.get(name=self.name) 
```

我应用您回答的代码。

然后，我得到一个错误

```
Generic detail view customerDetailView must be called with either an object pk or a slug. 
```

所以我需要'pk'...

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:26:20.473

您应该能够使用 访问参数`self.kwargs['name']`。此外，`get_queryset`应该返回一个查询集。

如果要使用通用视图，还需要在 URL 中使用`pk`而不是。之后，您只需要在您的类中定义和，它应该可以工作。您根本不需要访问。[[来源]](https://github.com/django/django/blob/master/django/views/generic/detail.py)`name``DetailView``model = Customer``slug_field = 'name'``customerDetailView``self.kwargs['name']`

如果你*真的*想`<name>`在你的 URL 中使用，你还需要更改`slug_url_kwarg`为`name`（除了`slug_field = 'name'`：

```
class customerDetailView(DetailView):
    context_object_name = 'customerDetail'
    template_name = "customer.html"
    allow_empty = True
    model = Customer
    slug_field = 'name'
    slug_url_kwarg = 'name'
    # no need to override any methods here 
```

或通过以下方式覆盖`get_object`：

```
def get_object(self):
    return get_object_or_404(Customer, name=self.kwargs['name']) 
```

无需修改`slug_field`并`slug_url_kwarg`在您的班级中。

# android - 没有错误，但在 try catch 语句后没有执行任何操作

> ID：14787454
> 
> 赞同：0
> 
> 时间：2013-02-09T11:07:35.120
> 
> 标签：android

我正在尝试使用 Web 服务显示数据。代码没有给出错误，但是在按钮单击时，执行只发生在尝试部分，除此之外没有任何执行

```
try {
                 Toast.makeText(getApplicationContext(), "You r in try", Toast.LENGTH_LONG).show();
                HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
                //this is the actual part that will call the webservice
                androidHttpTransport.call(SOAP_ACTION1, envelope);                
                // Get the SoapResult from the envelope body.
                SoapObject result = (SoapObject)envelope.bodyIn;
               //from here nothing executes but gives no error
                ****if(result != null**)
                {
                    Toast.makeText(getApplicationContext(), "You r in if", Toast.LENGTH_LONG).show();
                      //Get the first property and change the label text
                      tv1.setText(result.getProperty(0).toString());     
                }
                else
                {
                      Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_LONG).show();
                }
          } catch (Exception e) {
                e.printStackTrace();
          }                         
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:48:30.227

您正在调用的几种方法引发异常。

“跳过”代码表示抛出了异常。

在 catch 块中放一个 toast 以确认。

# iphone - 如何在 iPhone 应用程序中使用 EGOPhotoViewer？

> ID：14787456
> 
> 赞同：0
> 
> 时间：2013-02-09T11:07:45.660
> 
> 标签：iphone, ios, xcode, github

我想在我的应用程序中使用 EGOphotoviewer，比如当用户按下按钮时，而不是加载 rootviewController 的 tableView，它只是导航到照片，有人可以帮助我吗？ ![在此处输入图像描述](../Images/4f87a138f9c9750ef9096e1134bd2fb9.png)

在这里我不想要 tableView 我只需要一个照片按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:18:03.443

演示项目使用了一个名为 rootViewController 的 UITableViewController 子类，并且在 didSelect 方法上它只是初始化 EGOPhotoViewerController 并推送它。您需要做的就是不使用 UTableViewController 子类，而是使用 UIViewController 子类，在其视图中添加一个按钮，为该按钮创建一个动作，然后在动作中执行完全相同的操作 ::

```
MyPhoto *photo = [[MyPhoto alloc] initWithImageURL:[NSURL URLWithString:@"http://a3.twimg.com/profile_images/66601193/cactus.jpg"] name:@" laksd;lkas;dlkaslkd ;a"];
MyPhoto *photo2 = [[MyPhoto alloc] initWithImageURL:[NSURL URLWithString:@"https://s3.amazonaws.com/twitter_production/profile_images/425948730/DF-Star-Logo.png"] name:@"lskdjf lksjdhfk jsdfh ksjdhf sjdhf ksjdhf ksdjfh ksdjh skdjfh skdfjh "];
MyPhotoSource *source = [[MyPhotoSource alloc] initWithPhotos:[NSArray arrayWithObjects:photo, photo2, photo, photo2, photo, photo2, photo, photo2, nil]];

EGOPhotoViewController *photoController = [[EGOPhotoViewController alloc] initWithPhotoSource:source];
[self.navigationController pushViewController:photoController animated:YES];

[photoController release];
[photo release];
[photo2 release];
[source release]; 
```

你会得到你想要的。

希望这可以帮助

# php - 添加安全层以尽可能防止 AJAX botting

> ID：14787459
> 
> 赞同：4
> 
> 时间：2013-02-09T11:07:48.177
> 
> 标签：php, javascript, ajax, security, codeigniter

我不确定标题是否是提出这个问题的正确方法，但它就是这样。

*案子：*

我正在使用 CodeIgniter (2.1.3) 进行 AJAX 调用并获取 JSON 数据。意识到您不能真正“保护” AJAX，因为用户始终可以访问 JavaScript，我想知道有什么可能使人们尽可能难以自动化 AJAX 调用。

假设你有一个游戏，你不断地请求队列数据来建造建筑物和训练部队。如果我想 bot 那个网站，我可以找出 AJAX 调用是如何工作的，并制作一个脚本来将自己登录到域并手动调用 AJAX 调用。

这样做的目标是；如果有 10000 人尝试对网站进行爬虫，我将在 AJAX 调用中构建的障碍层可能会将这 10000 人减少到可能 100 人，从而使仍然设法跨越所有层的管理员更容易跟踪。

在这种情况下，我们还可以看到他们在做什么，并尝试添加更多检查/层，以防止大多数人能够对网站进行 bot 操作。

**确认实际会话**

我想到的第一层是将随机哈希传递给加载的页面并将该哈希也存储在 PHP 会话中。通过这种方式，访问者可以“仅”从 AJAX 调用中获取 JSON，这些调用获取为单个页面加载提供的哈希值。因此，如果他们尝试在一个 cURL/wget 调用中使用正则表达式匹配来获取 HASH，他们就不能在调用中使用它来伪造 AJAX 调用。

我仍然认为这里存在多个页面加载问题。我可能会跟踪人们是否在他们的登录名下打开一个新页面，并向他们发送一条消息，他们可能无法在多个页面上操作以使用该应用程序。Selenium 等自动化工具也可能存在问题。

在 CodeIgniter 中，我现在这样做：

```
<?php
public function index()
{
    $this->load->helper(array('security', 'url'));
    $this->load->library('session');

    $data = array();

    // AJAX Security
    $data['hash'] = sha1(hash('md5', (microtime() - rand(0, 1^3)) * rand(0, 1^12)));
    $this->session->set_userdata('live_hash', $data['hash']);

    $this->load->view('jqueryjson', $data);
}

public function xhr()
{
    $json_data = json_decode($data_set);

    if (isset($data_set['hash']) AND $data_set['hash'] == $this->session->userdata('hash')) {
        echo 'HASH security layer passed<br />';
        echo json_encode(array('JSONDATA TO BE SEND BACK'));
    }
    else {
        echo 'Please do not call the page outside a browser.';
    }
}
?> 
```

我知道这种方法有点幼稚，但我想知道其他人如何做到这一点（客户端）以防止大多数botters。当然，我还在服务器端验证所有传递的数据，以确保没有超出数据应具有的标准定制数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:58:06.713

我认为这个问题不仅与 ajax 调用有关，而且与网页中的每个请求有关。为了防止自动机访问，大多数网站都使用某种验证码图像。

1.  想法：也许您可以将图形元素放置在图像内的不同位置以触发 ajax 调用，这样只有人类才能在正确的位置单击它们。我正在考虑显示只有您知道位置的元素的图像。您只需使用 ajax 请求发送图像内的点击位置并比较它是否是正确的位置......

2.Idea：在 10 个 ajax-requests 过快且内部有图像后打开一个验证窗口，这样用户必须验证自己是一个人。没有验证就没有正在进行的游戏。

也许您可以在游戏中以某种方式构建验证，以便用户不会立即将其视为验证码。

卢西安

# python - 通过继承巧妙地处理不同的权限

> ID：14787461
> 
> 赞同：0
> 
> 时间：2013-02-09T11:08:05.800
> 
> 标签：python, permissions, getattr

我必须管理权限并且我有不同的用户类型，例如这里的一对。

```
def not_allowed(*args, **kwargs): return False

class User(object):
    def __init__(self, userid):
        self.userid = userid

    def __getattr__(self, attr):
        return not_allowed

    def view_profile(self)
        return True

class Admin(User):
    def edit_comment(self):
        return True

class Expert(User):
    def delete_post(self):
        return True

user = {'userid': 'user', 'roles': ['admin', 'expert']} 
```

现在我希望能够拥有 MultiRole 类型，理论上它应该能够做它的角色能够做的所有事情。

我尝试过这样的事情：

```
class MultiRoleUser(User):
    """A multirole user has all the power of all the roles together
    """
    def __init__(self, userid, roles):
        super(MultiRoleUser, self).__init__(userid)
        self.roles = roles

    def __getattr__(self, attr):
        all_funcs = [getattr(x, attr) for x in self.roles]
        return any(x() for x in all_funcs) 
```

哪个应该用作

```
u = MultiRoleUser('userid', [Admin, Expert]) 
```

但这不起作用，理想情况下，我想为传入的所有类调用方法并执行 or (with any)。

问题是要调用我需要有一个该类型的对象的方法..

理论上，我什至可以只为每个角色使用字典，但我喜欢默认为 false 的技巧，有时我还需要一个函数来计算权限。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T20:51:51.127

尽管我倾向于同意您可能不想在这方面重新发明轮子，但以下是您尝试的版本，它似乎适用于 AFAIK。

基本上，我首先切换到显式的新型类，方法是使它们派生自，`object`以便`super()`调用可以工作，然后，我更改了类中的`self.roles = roles`初始化`MultiRoleUser`以创建所需的实例。最后，我更改了`MultiRoleUser.__getattr__()`使用它们来处理没有所寻求的权限属性的角色类的方式。

```
def not_allowed(*args, **kwargs): return False

class User(object):
    def __init__(self, userid):
        self.userid = userid

    def __getattr__(self, attr):
        return not_allowed

    def view_profile(self):
        return True

class Admin(User):
    def edit_comment(self):
        return True

class Expert(User):
    def delete_post(self):
        return True

class MultiRoleUser(User):
    """A multirole user has all the power of all the roles together"""
    def __init__(self, userid, roles):
        super(MultiRoleUser, self).__init__(userid)
        self.roles = [role(userid) for role in roles] # create instances needed

    def __getattr__(self, attr):
        all_funcs = [getattr(x, attr, None) for x in self.roles]
        return any(x() for x in all_funcs if x) # check permission if there was one

u = MultiRoleUser('userid', [Admin, Expert])

print 'u.edit_comment:', u.edit_comment
print 'u.delete_post:', u.delete_post 
```

顺便说一句，我认为一个更好的 Python 实现会使用`sets`它们并与它们一起操作来完成你想要做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:56:19.897

这是一个替代答案，它使用多重继承和属性来**大大**简化实现（因为，再一次，你本质上是在重新发明轮子）。它完全消除了在类中具有`roles`属性的需要`MultiRoleUser`，以及`getattr()`使用它所需的专门方法。

我之所以想到使用多重继承，是因为定义`class MultiRoleUser`为*拥有*多个子类实例，*而*`User`不仅仅是一个子类，这似乎很奇怪。使用属性的想法是考虑到类所需的类正在*调用*找到的函数属性以获取它们的值这一事实的结果，这是属性的一部分。*`gettattr()`*

 **```
class User(object):
    def __init__(self, userid):
        self.userid = userid

    def __getattr__(self, attr):  # unknown/undefined permission
        return False

    @property
    def view_profile(self):
        return True

class Admin(User):
    @property
    def edit_comment(self):
        return True

class Expert(User):
    @property
    def delete_post(self):
        return True

def multi_role_user(cls_name, *roles):
    """Factory function to create a multirole user class which has the combined
       power of all the User subclasses given"""
    if not roles:
        raise TypeError('at least one subclass of class User must be specified')
    if not all(issubclass(role, User) for role in roles):
        raise TypeError('all roles must be subclasses of class User')
    return type(cls_name, roles, {})

MultiRoleUser = multi_role_user('MultiRoleUser', Admin, Expert)
u = MultiRoleUser('my_userid')

print 'u.userid:', u.userid
print 'u.view_profile:', u.view_profile
print 'u.edit_comment:', u.edit_comment
print 'u.delete_post:', u.delete_post
print 'u.can_spam:', u.can_spam 
```**

# c++ - 打印通过 Copy Constructor 创建的 e2 崩溃程序

> ID：14787462
> 
> 赞同：0
> 
> 时间：2013-02-09T11:08:16.463
> 
> 标签：c++, debugging, dynamic, linked-list

我创建了一个名为 e 的链表。我使用复制构造函数来创建 e2，但由于某种原因，当我尝试打印 e2 时程序总是崩溃。有人可以向我解释并帮我解决这个问题，谢谢。

```
#include <iostream>
#include <ctime>
#include <cmath>

using namespace std;

class Element
{

public: Element();//constructor
    Element(const Element&); //copy constructor

    //Element& Element::operator =(const Element & from);
     void Addelement(int row, int col, int value);
     void swap(int num,int x, int arr[100]);
     void printelement();
     void rowordermajor();

private:

    typedef Element* ElementPtr;

        int row;
        int col;
        int value;
        ElementPtr next; 

    ElementPtr head;

    bool comparegreater(ElementPtr temp1, ElementPtr temp2);

};

int main()
{
Element e;
for (int i=0;i<5;i++)
{
    e.Addelement(i,i,i);

}
e.printelement();

Element e2(e);
//e2.printelement();

system("PAUSE");

}

Element::Element()//normal constructor
{
head=NULL;
}

Element::Element(const Element& e)
{
   this->row=e.row;
   this->col=e.col;
   this->value=e.value;
   this->next=e.next;

}

void Element::Addelement(int row, int col, int value )
{

ElementPtr temp= new Element;
temp->row=row;
temp->col=col;
temp->value=value;
temp->next=head;
head=temp;
 }

         void Element::printelement()//why does it print backwards
{
ElementPtr temp=head;

while (temp != NULL)
{
    cout<<"( "
        <<temp->row
        <<" , "
        <<temp->col
        <<" , "
        <<temp->value
        <<" ) ";

    cout<<endl;

    temp=temp->next;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T11:11:59.310

因为当您使用带有as 参数的构造函数时，您没有分配`NULL`（或可能）到 head 。`this->head = e.head;``Element& e`

# sql - 计算字段中的位数

> ID：14787466
> 
> 赞同：2
> 
> 时间：2013-02-09T11:08:38.093
> 
> 标签：sql, regex, sql-server-2008

我正在使用 Sql Serevr 2008

如何计算数据库字段中的位数，类似于以下内容：

```
select headline,
       REGEXP_count(name,'\d') as num_count
from accountTbl
where num_count > 3; 
```

我试图检测是否有人在他们的标题文本中写了超过 3 个数字。

例如我想捕捉：

```
'hello call me on 3 4 5 6 7 8' - match

'this is my number 234875' - match

'4 hello 4 and 66' - match

'leaving on the 24th going to be there at 6:30' - match 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T11:28:35.493

SQL Server 2008 不支持正则表达式；仅支持模式。您可以使用这样的查询来查找三位数或更多位数的匹配项：

```
select headline
from accountTbl
where patindex('%[0-9]%[0-9]%[0-9]%', headline) > 0 
```

你不会得到计数，但你可以过滤。这种解决方案的缺点是，为了搜索五位数字，您需要更改模式本身。

[这是关于 sqlfiddle 的快速演示。](http://sqlfiddle.com/#!3/d0dca/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T11:48:47.567

我能想到的如何在 SQL Server 2008 中计算字符串中的数字的最简单方法是计算原始字符串的长度与剥离所有数字字符 (0..9) 时的长度之间的差异。您的查询可能类似于以下内容：

```
(LEN(headline) * 10) - LEN(REPLACE(headline, '0', '') + 
                           REPLACE(headline, '1', '') +
                           REPLACE(headline, '2', '') +
                           REPLACE(headline, '3', '') +
                           REPLACE(headline, '4', '') +
                           REPLACE(headline, '5', '') +
                           REPLACE(headline, '6', '') +
                           REPLACE(headline, '7', '') +
                           REPLACE(headline, '8', '') +
                           REPLACE(headline, '9', '')) 
```

您应该测试首先计算每个替换或连接字符串的长度然后计算所有字符串的长度是否更快，但是如果您的字符串不是特别长，两种方法在性能方面应该大致相同。另一个更难阅读的不连接的版本可能是：

```
LEN(headline) - 
  LEN(REPLACE(
        REPLACE(
          REPLACE(
            REPLACE(
              REPLACE(
                 REPLACE(
                   REPLACE(
                     REPLACE(
                       REPLACE(
                         REPLACE(headline, '9', ''), 
                       '8', ''), 
                     '7', ''), 
                  '6', ''), 
                '5', ''), 
              '4', ''), 
            '3', ''), 
          '2', ''), 
        '1', ''), 
      '0', '')) 
```

但我不太确定它是否在视觉上更具吸引力（SQL Server 2008 真的可以使用正则表达式）。另一种值得考虑的方法是，如果您需要一种方法来确定字符串中的位数，请参阅[此博客](http://beyondrelational.com/modules/2/blogs/70/posts/10821/extract-only-numbers-from-a-string.aspx)。

干杯! ;)

# php - 来自已存在的新数组

> ID：14787467
> 
> 赞同：-4
> 
> 时间：2013-02-09T11:08:37.843
> 
> 标签：php

我有一个数组

`$t1 = array(2,1,8,18,10);`

我想使用定义的键从这个数组创建新数组

```
$t11 = array("no" => 2, "to" => 1);
$t12 = array("no" => 1, "to" => 8);
$t13 = array("no" => 8, "to" => 18);
$t14 = array("no" => 18, "to" => 10);
$t15 = array("no" => 10, "to" => 0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:22:10.480

使用带有计数器变量（例如 $i）的循环，使用 $t1[$i] 和 $t1[$i+1] 创建新数组，增加 $i，然后重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:54:06.030

您可以使用`CachingIterator`和`extract`

```
$a = array(2,1,8,18,10);
$it = new CachingIterator(new ArrayIterator($a));
$t1 = array();
foreach ( $it as $v ) {
    $var = array("no" => $v,"to" => 0);
    if ($it->hasNext()) {
        $var["to"] = $it->getInnerIterator()->current();
    }
    $t1[] = $var;

}

extract($t1, EXTR_PREFIX_ALL, "t1");
var_dump($t1_0,$t1_1,$t1_2,$t1_3,$t1_4); 
```

输出

```
array (size=2)
  'no' => int 2
  'to' => int 1
array (size=2)
  'no' => int 1
  'to' => int 8
array (size=2)
  'no' => int 8
  'to' => int 18
array (size=2)
  'no' => int 18
  'to' => int 10
array (size=2)
  'no' => int 10
  'to' => int 0 
```

# c++ - ruby 如何像在 C++ 中一样以 scanf 样式读取用户输入

> ID：14787471
> 
> 赞同：6
> 
> 时间：2013-02-09T11:09:24.873
> 
> 标签：c++, ruby, scanf

我是 Ruby 的新手。我需要从用户输入（n）数字中读取，并且在 C++ 中我使用了这段代码

```
for(i=0;i<N;i++)
{
  scanf("%d",&array[i]);
} 
```

此代码准确读取由任何空格（制表符、空格、换行符）分隔的 (n) 个数字。

我怎么能在红宝石中做到这一点？

在Ruby中我试着这样做

```
require 'scanf'
n = scanf("%d");
arr = Array.new()
n.times { arr << scanf("%d") } 
```

但是当我输入这样的字符串时，这段代码不起作用：

```
1   4    8 
```

但是如果我输入这个就可以了

```
1
4
8 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T11:36:58.977

## 使用字符串#scan

我不是 100% 确定我知道你在这里真正想做什么。如果您只想扫描字符串中的数字，可以使用[String#scan](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-scan)执行以下操作：

```
digits = '1   4    8'.scan /\d+/
# => ["1", "4", "8"] 
```

这将返回在字符串中找到的数字数组，您可以使用任何您喜欢的[Array](http://www.ruby-doc.org/core/Array.html)或[Enumerable](http://ruby-doc.org/core/Enumerable.html)方法访问您的*数字数组。*

如果您想处理换行符以及制表符或空格，您需要做的就是添加`m`用于多行匹配的标志。例如：

```
digits = '1
          4 8'.scan /\d+/m
# => ["1", "4", "8"] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-09T12:19:28.350

不得不承认，在这种情况下，我无法制作出与 C++ 版本一样紧凑的程序。在 Ruby 中似乎`scanf`不像 C++ 版本的`IO`流那样工作，对于字符串，您需要提供一个块来实现每行多次扫描。

所以这里有一个解决方案：

```
a = Array.new
n = gets.to_i

while a.length < n
  gets.scanf("%d") { |d| a << d[0] }
end 
```

您在这里遇到的唯一问题是，如果您请求例如 3 个数字，然后用户在一行上输入 10 个数字，那么`a`将包含所有这 10 个数字。要修复它，您总是可以在循环完成后截断数组：

```
a = a.take(n) 
```

`n`无论空格如何，此解决方案都将从输入中读取数字。用户可以将它们全部输入一行，或者单独的行，或者两者的混合（我认为这是您最初的要求）。

# codeigniter-2 - 将在grocery_crud CodeIgniter 中显示当前日期的列

> ID：14787472
> 
> 赞同：3
> 
> 时间：2013-02-09T11:09:37.477
> 
> 标签：codeigniter-2

在表Employees 中的grocery_crud 和Code Igniter 中，我今天有列（dd/mm/yyyy）。如何设置列以显示当前日期。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T07:10:12.487

使用 MySQL，您不能使用 Date 而是使用 Timestamp 列来执行此操作，并且您添加 'CURRENT_TIMESTAMP' 作为默认值。

也就是说，从 MySQL 5.6.5 版开始，您可以使用：

```
CREATE TABLE foo (
    `creation_time`     DATETIME DEFAULT CURRENT_TIMESTAMP,
    `modification_time` DATETIME ON UPDATE CURRENT_TIMESTAMP
) 
```

如此处所述：

[https://stackoverflow.com/a/10603198/1226118](https://stackoverflow.com/a/10603198/1226118)

# c++ - 如何从鼠标单击中获取像素值？

> ID：14787474
> 
> 赞同：0
> 
> 时间：2013-02-09T11:09:48.620
> 
> 标签：c++, opencv

我在屏幕上显示一个 Mat 矩阵作为图像。我想单击此图像上的某个位置，并希望在屏幕上获取该像素值。

如何使用 OpenCV、C++ 完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T11:55:13.940

我在下面使用此代码`IplImage`，但使用时结果应该相同`Mat`。

```
void my_mouse_callback(int event, int x, int y, int flags, void* param){
  IplImage* image = (IplImage*) param;

  switch(event) {
    case CV_EVENT_LBUTTONDOWN:
      std::cout << "x: " << x << std::endl;
      std::cout << "y: " << y << std::endl;
      break;
    default:
      break;
  }
}

int main() {
  IplImage* image = cvLoadImage("picture_file_name_here");

  cvNamedWindow("Test");

  cvSetMouseCallback("Test", my_mouse_callback, (void*) image);

  cvShowImage("Test", image);
  cvWaitKey(0);

  cvReleaseImage(&image);

  return 0;
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T12:12:08.620

对于 cv::Mat 它看起来像：

```
cv::Mat mat; // load img, etc

cv::setMouseCallback("Test", my_mouse_callback, (void*) &mat);

// ...

void my_mouse_callback(int event, int x, int y, int flags, void* param){
  cv::Mat mat = *((cv::Mat*)param);  // so, 1st cast, then deref
} 
```

# android - Google Maps API v2 显示空地图

> ID：14787475
> 
> 赞同：0
> 
> 时间：2013-02-09T11:10:08.900
> 
> 标签：android, google-maps, key

我试图让谷歌地图显示，但我不明白出了什么问题。更具体地说，我确实尝试了 3 个不同的 SHA1 密钥：1 个来自调试密钥库和 2 个其他新生成的密钥，我确实生成了不同的 API 密钥，但仍然没有映射。我正在使用这个程序[http://writecodeeasy.blogspot.ro/2013/01/androidtutorial-gmaps.html](http://writecodeeasy.blogspot.ro/2013/01/androidtutorial-gmaps.html)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:14:42.333

在生成如下所示的 MD5 密钥时，您是否使用过“-v”？

```
keytool -list -v -alias androiddebugkey -keystore C:\Users\<user>\.android\debug.keystore -storepass android -keypass android 
```

希望它会有所帮助。

# php - 如何通过代码加速？

> ID：14787476
> 
> 赞同：0
> 
> 时间：2013-02-09T11:10:19.290
> 
> 标签：php, performance, cycle

有没有办法加快我的代码？加载大约需要 15 秒...我真的没有看到减少代码的方法...我只是想将值插入数据库，因此用户不必每次都加载新信息..但是问题是我的 cron 每小时只允许 1 次负载……通过在每次负载时加载新信息，它给了我新的信息。

```
$q1=mysql_query("SELECT * FROM isara");

while($r1=mysql_fetch_array($q1)){

        $named=$r1['name'];
        $idd=$r1['id'];
        $descd=$r1['desc'];
        $online=check_online($named);

        $char = new Character($r1['name'],$r1['id'],$r1['desc']);

        if($online == "online"){
                $char->rank = $i++;    
        }
        else{
                $char->rank = 0;
        }

        $arr[] = $char;

}
?>

<br />
<h2 style="color:green">Online enemies</h2>

<?php
foreach ($arr as $char) {
        if($char->rank>=1){
                echo "<a style=\"color:green\" href=\"http://www.tibia.com/community/?subtopic=characters&name=$char->name\">";
                echo $char->name." ";
                echo "</a>";
                echo level($char->name)."<b> ";
                echo vocation($char->name)."</b> (<i>";
                echo $char->desc." </i>)<br />";
        }
}
?>
<br /> 
<h2 style="color:red">Offline enemies</h2>
<?php
foreach ($arr as $char) {
        if($char->rank==0){
                echo "<a style=\"color:red\" href=\"http://www.tibia.com/community/?subtopic=characters&name=$char->name\">";
                echo $char->name." ";
                echo "</a>";
                echo level($char->name)."<b> ";
                echo vocation($char->name)."</b> (<i>";
                echo $char->desc." </i>)<br />";
        }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:47:06.343

您应该避免在 SQL 查询中使用 distinct (*) 关键字以获取更多信息，请阅读此[http://blog.sqlauthority.com/category/sql-coding-standards/page/2/](http://blog.sqlauthority.com/category/sql-coding-standards/page/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:18:46.233

正如我在评论中所写，为数据库中的每个名称获取一次页面而不是一次。

我评论的伪代码：

```
users = <get users from database>
webpage = <get webpage contents>

for (user in users)
    <check if user exists in webpage> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T11:29:11.217

正如评论中提到的，您正在为数据库中的每个条目调用一个网页，假设每次调用大约需要 2 秒，那么它会大大降低您的速度。

为什么不调用一次页面并将其内容作为参数传递到 check_online() 函数中，这样您的代码将看起来像这样，这将加快它的速度：

```
$content=file_get_contents("http://www.tibia.com/community/?subtopic=worlds&worl‌​d=Isara",0);
$q1=mysql_query("SELECT * FROM isara");

while($r1=mysql_fetch_array($q1)){

    $named=$r1['name'];
    $idd=$r1['id'];
    $descd=$r1['desc'];
    $online=check_online($named,$content);

    $char = new Character($r1['name'],$r1['id'],$r1['desc']);

    if($online == "online"){
            $char->rank = $i++;    
    }
    else{
            $char->rank = 0;
    }

    $arr[] = $char;

}
?>

<br />
<h2 style="color:green">Online enemies</h2>

<?php
foreach ($arr as $char) {
    if($char->rank>=1){
            echo "<a style=\"color:green\" href=\"http://www.tibia.com/community/?subtopic=characters&name=$char->name\">";
            echo $char->name." ";
            echo "</a>";
            echo level($char->name)."<b> ";
            echo vocation($char->name)."</b> (<i>";
            echo $char->desc." </i>)<br />";
    }
}
?>
<br /> 
<h2 style="color:red">Offline enemies</h2>
<?php
foreach ($arr as $char) {
    if($char->rank==0){
            echo "<a style=\"color:red\" href=\"http://www.tibia.com/community/?subtopic=characters&name=$char->name\">";
            echo $char->name." ";
            echo "</a>";
            echo level($char->name)."<b> ";
            echo vocation($char->name)."</b> (<i>";
            echo $char->desc." </i>)<br />";
    }
}

?> 
```

你的 check_online() 函数看起来像这样：

```
function check_online($name,$content){
    $count=substr_count($name, " "); 
    if($count > 0){ $ex=explode(" ",$name); $namez=$ex[1]; $nameused=$namez; } 
    else{ $nameused=$name; } 
    if(preg_match("/$nameused/",$content)){ $status="online"; } 
    else{ $status="offline"; }     
    return $status; 
} 
```

您还可以执行以下操作以使其更快

1.  停止使用 select * 这在 innodb 上非常糟糕
2.  在您的数据库上放置更好的索引以使记录集返回更快
3.  安装 PHP 5.4，因为它更快，尤其是当您在每次迭代中创建一个新对象时
4.  使用字节码加速器/缓存，例如 xdebug

# python - 意外缩进

> ID：14787478
> 
> 赞同：2
> 
> 时间：2013-02-09T11:10:28.020
> 
> 标签：python, indentation

`IndentationError: unexpected indent`即使我编写的代码完全按照书中所示（[http://learnpythonthehardway.org/book/ex25.html](http://learnpythonthehardway.org/book/ex25.html)）

我确定我使用正好 4 个空格来缩进“def”之后的行。

在 Windows 7 上使用 Python 2.7

这是我在 powershell 中遇到的错误：

```
PS C:\Users\Kiedis\python> python ex25.py
  File "ex25.py", line 3
    return sorted(words)
    ^
IndentationError: unexpected indent 
```

这是我的代码的前 3 行：

```
def sort_words(words):
    """Sorts the words"""
    return sorted(words) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T11:29:06.210

*无论如何*，您都在混合制表符和空格；运行您的脚本：

```
python -tt ex25.py 
```

检测错误所在。

然后将您的编辑器配置为*仅*使用空格进行缩进，并重新缩进您的文件。请参阅[如何将 Notepad++ 配置为使用空格而不是制表符？](https://stackoverflow.com/questions/8197812/how-do-i-configure-notepad-to-use-spaces-instead-of-tabs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T11:12:22.223

确保注释（“”“对单词进行排序”“”）不直接低于 def sort_words（单词）。这会引发错误。这解决了你的问题吗？

# javascript - 出现 javascript 错误时刷新页面

> ID：14787480
> 
> 赞同：6
> 
> 时间：2013-02-09T11:10:55.827
> 
> 标签：javascript, refresh, reset, meta

我有一些页面运行 javascript 来显示不同度量值的更新。这些东西似乎运行良好。但是 - 总是存在 javascript 在发生故障时崩溃的风险（尤其是在运行几个小时后）

所以我想实现一种简单的看门狗。我的一个想法是使用元刷新标签。浏览器将在 xy 分钟后重新加载站点，并且所有 javascripts 都将重新初始化。

当然，如果没有发生错误，我不想刷新站点，并且想使用 javascript 重置刷新计时器。只要 js 运行，计时器就会定期重置。如果 javascript 崩溃，元刷新计时器倒计时到零，页面将被重新加载。

阅读stackoverflow帖子我发现了一些答案，说通过javascript重置元计时器是不可能的。您知道实现看门狗的更好方法吗？使用 javascript 本身进行刷新是没有用的：如果脚本崩溃，它将永远不会触发重新加载事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T11:17:52.973

理想情况下，您应该正确处理错误，而不是仅仅重新加载页面。但是，您可以`window.onerror`像这样使用事件：

```
window.onerror = function() {
    location.reload();
} 
```

有关`onerror`此处的更多信息：

[https://developer.mozilla.org/en/docs/DOM/window.onerror](https://developer.mozilla.org/en/docs/DOM/window.onerror)

# physics - 愤怒的小鸟物理冲击/碰撞

> ID：14787482
> 
> 赞同：1
> 
> 时间：2013-02-09T11:11:28.577
> 
> 标签：physics, game-physics, physics-engine

如何创建像愤怒的小鸟一样的运动冲击/碰撞。当物体撞到盒子和木头时，它们的交互和动画的流动将到正确的位置。我需要从头开始学习如何构建它。我需要物理和概念的基础

示例图片：

![示例图片](../Images/22704e3e6589f35fec07f601d9615c64.png)

到目前为止，我认为到目前为止是。一旦受到影响，我将申请

1.  归还法

    对象 1 速度 = e（球速度）

2.  我将采取球的方向并使对象 1 对球旋转 90%。

    如果球--->方向。我对对象 1 的最终结果将是 90 度。所以它会变成

    |____| 它会变成这样。

3.  目前看来是对的。但我不确定如何与对象 2 交互。我是否重复步骤和 2。由此我将速度和方向传递给对象 2。所以它会再次旋转 90 度？

这是我到目前为止收集到的。任何暗示我正朝着正确方向前进的建议都是好的。

对于碰撞部分。我打算使用AABB。和旋转AABB。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-09T11:43:27.653

当我在游戏中打开关于页面时， AngryBirds 使用`Box2D`了物理。 `Box2D`是开源物理引擎。大多数物理引擎都是基于脉冲的。他们对冲量求和并重新计算速度。最复杂和最重要的部分是发生碰撞时会发生什么。

物理引擎检测所有碰撞并使用`Solver`功能。`Solver`是物理引擎的核心和唯一。`Solve`添加额外的冲动来“解决”碰撞。

求解器通常具有采用碰撞岛（碰撞对象列表：通常为 2 个对象）和返回力或冲量施加到每个对象的函数形式。

大多数现代发动机都是基于脉冲的。

所以物理引擎最重要的学习和理解部分就是`Solver`函数。但是求解器可能是比函数更复杂的实体。

# database - jBPM 5：db-tables-scripts 在哪里？

> ID：14787484
> 
> 赞同：3
> 
> 时间：2013-02-09T11:11:55.237
> 
> 标签：database, jbpm

我在 JBPM 5.4 中创建了一个关于持久性的简单示例。它成功运行，并且记录已成功插入到创建的模式中的表中。

但我的问题是虽然该表是在架构中创建的，但它还创建了其他三个表 NodeInstanceLog VariableInstanceLog ProcessInstanceLog

但是创建这些表的脚本在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T11:19:46.357

数据库没有脚本。

数据库中的表是使用 JPA 实体生成的。例如实体 SessionInfo、WorkItemInfo、ProcessInstanceInfo 是带有 @Entity 注释的类，并且这些表是在您部署 jpbm-console-server 时创建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T11:49:42.030

在您的 persistence.xml 文件中，以下 hibernate 条目负责创建数据库脚本，假设用于 JPA 的持久性提供程序是 Hibernate。

```
<property name="hibernate.hbm2ddl.auto" value="update" /> 
```

# javascript - 缩小动态加载的javascript，同时使其可编辑

> ID：14787486
> 
> 赞同：1
> 
> 时间：2013-02-09T11:12:02.063
> 
> 标签：javascript, performance, optimization

所以，我正在使用 CodeIgniter 开发一个网站。

我注意到我有大约 10 个 javascript 文件都加载到我的标题中，即使它们并未全部用于给定页面。

因此，我现在将一个数组传递给我的标题视图，其中包含需要包含的 javascript 文件的列表。这样，只加载给定页面上我需要的文件。

我通过速度测试运行我的网站，虽然速度非常快，但它标记了众多 JS 文件加载，并说将它们合并到一个文件中，并缩小它。

我有我的 JS 文件作为单独的文件，所以我可以像上面一样使用它们，而且如果我想编辑我的标签 js，我可以很容易地在 tabs.js 中找到它

将所有 javascript 合并到一个文件中将消除上述好处。缩小它们会使它们在编辑时付出很多努力..

有没有办法在服务器尝试加载 JS 文件时合并它们并缩小它们，或者有什么方法可以避免上述问题？

谢谢

# excel-formula - 如何在 Excel 工作表中查找两列之间的匹配项？

> ID：14787487
> 
> 赞同：0
> 
> 时间：2013-02-09T11:12:08.117
> 
> 标签：excel-formula, excel-2010

在 Microsoft Excel 2010 中，我有一个包含两列 Z 和 AG 的 Excel 工作表。Z 有 11400 行，AG 有 3000 行。我想在新列中找到它们之间的匹配项。那么该怎么做呢？我尝试了以下公式：

```
=IF(MAX(COUNTIF($AG$2:$AG$114000,$Z$2:$Z$114000))>1,"Duplicate","Nope") 
```

但它对我不起作用，因为它给了我所有行的“Nope”，但是我在它们之间有很多匹配。

**那么你能帮我解决这个问题吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T11:21:12.700

如果结果可能是稀疏的（结果集中为空行），那么我会使用 vlookups。公式看起来像这样：

```
=vlookup(ag2,$z$2:$z$114000,1,false) 
```

将其复制到 az 中的每个条目，它应该为您提供匹配项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T20:19:04.077

也许使用条件格式会更容易。例如，您可以为条件格式应用一个公式，如下所示：

```
=COUNTIF($AG$1:$AG$114000,Z1)>1 
```

您可以将格式设置为突出显示单元格，然后将格式复制到 Z 列。我认为这应该可以。使用此网站以供参考：[http ://www.ozgrid.com/Excel/highlight-duplicates.htm](http://www.ozgrid.com/Excel/highlight-duplicates.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T20:38:24.463

尝试使用这个公式...效果很好

A - 第一列 C 是另一列 B 是您要填充公共数据的空列

=if(ISERROR(MATCH(A1,C1....C30,0)),""A1)

# sql - 使用 SQL Server 解决行版本控制

> ID：14787489
> 
> 赞同：0
> 
> 时间：2013-02-09T11:12:21.450
> 
> 标签：sql, sql-server, ormlite-servicestack

我正在尝试为新数据库建模。要求之一是保留不同行的版本。这里是同一对象的 2 个版本的示例：

```
ID | UID                                  | Name  | Date
--------------------------------------------------------------
 1 | 734FD814-024D-4795-AFD0-34FECF89A13A | Alpha | 2013-02-08
 2 | 734FD814-024D-4795-AFD0-34FECF89A13A | Bravo | 2013-02-09 
```

为了有这个表的外键作为参考，我需要指定一个主键。这两个候选者是`ID`第`UID`一个作为`auto increment`数字，第二个作为每个对象手动生成的唯一标识符。

**限制：**

选择`ID`为主键时：

*   创建对象的新版本时，对旧版本的所有引用都变得无效，必须更新
*   手动更新每个插入的所有引用不是一个选项，非常繁重

选择`UID`为主键时：

*   `UID`不是唯一的，因此不能单独使用，必须与其他字段关联并在复杂主键中使用
*   将使用的所有其他字段也可能会更改外键引用。

关于克服这些限制的最佳方法（尽可能轻）有什么建议吗？

**PS：**我正在使用 OrmLite 使用 POCO 对象对数据库进行建模。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:00:05.963

这是金融应用中非常常见的场景。一个很好的方法是将一行标记为活动的。例如：

```
ObjectID, StartDt, EndDt, ...other columns... 
```

where`[StartDt, EndDt>`标记该行是“实际”行的时间间隔。你可以像这样加入：

```
join    YourTable yt
on      yt.ObjectId  = otherTable.ObjectID
        and yt.StartDt is not null
        and yt.EndDt is null -- Select active row 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:24:28.557

不会将版本更改为版本的字段（可能只是 ID）可以放入另一个表中。那是您链接到的表。然后，特定于版本的信息在另一个表中。为了帮助加入最新版本信息，您可以在该表中保留一个 IsLatest 标志。

# javascript - 带有上一个、暂停和下一个按钮的 JS 文本循环

> ID：14787491
> 
> 赞同：1
> 
> 时间：2013-02-09T11:12:25.080
> 
> 标签：javascript, html, css, loops

对于带有下一个和上一个按钮的文本，我有以下代码。我希望它在页面加载时重复循环，并在两者之间暂停一个按钮。所有三个按钮都完全位于显示文本的同一行的右侧。请支持我。。谢谢。。

```
<!DOC HTML>
<html>
<head>
<script type="text/javascript">
var messages = [
    'Messages for <em>kindergarden</em> class',
    'Message for <em>1st grade</em>',
    'Message for <em>2nd grade</em>',
    'Message for <em>3rd grade</em>',
    'Message for <em>4th grade</em>',
    'Message for <em>5th grade</em>',
    'Message for <em>6th grade</em>'
];

var msgPtr = 0;
function nextMsg(direction) {
  msgPtr = msgPtr + direction;
  if (msgPtr < 0) { msgPtr = messages.length-1; }
  if (msgPtr > messages.length-1) { msgPtr = 0; }
  document.getElementById('msg').innerHTML = messages[msgPtr];
}
window.onload = function () {
  nextMsg(0);
}
</script>

<style type="text/css">
em { color:orange; }
#msg { 
font-family:monospace; 
background-color:yellow;
font-size:1em;  
width:890px; 
border:1px dotted red; 
overflow:hidden;}
</style>

</head>
<body>
<div id="msg"></div><br>
<button onclick="nextMsg(-1)">&lt;</button>
<button onclick="nextMsg(-1)">||</button>
<button onclick="nextMsg(1)">&gt;</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:57:34.080

一种解决方案是递归调用 nextMsg()

```
function nextMsg(direction){
    //snip
    nextMsg(direction);
} 
```

我用 jQuery 写了一个非常快速的概念证明，应该以更简洁的方式重写：http: [//jsfiddle.net/5NUPn/5/](http://jsfiddle.net/5NUPn/5/)

现在要在同一行显示消息和按钮，您需要使用浮动。

```
#msg { float: left; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:58:23.997

使用 'setInterval(code,millisec)' 函数。所以你的代码应该是这样的：

```
var msgPtr =0;
var set_interval_id;

function pause() {
    clearInterval(set_interval_id)
}

function play() {
    set_interval_id = setInterval(function() {
        nextMsg(msgPtr);
        msgPtr++;
    }, 2000 /* how often to execute the code (2 sec) */);
}

window.onload = function () {
  play();
}

...

<button onclick="nextMsg(-1)">&lt;</button>
<button onclick="pause()">||</button>
<button onclick="nextMsg(1)">&gt;</button>

.... 
```

# python - Pygame：.set_clip 返回列表中的第一个值，而不是请求的值

> ID：14787492
> 
> 赞同：0
> 
> 时间：2013-02-09T11:12:33.270
> 
> 标签：python, pygame, sprite, rect

我正在尝试为从精灵表返回的图像制作行走动画。
我`.set_clip`用来返回精灵表的一部分。一切看起来应该可以工作
但是`.set_clip`返回的是我提供的列表中的第一个 Rect 值，而不是我调用的列表中的项目。
**我的代码**

```
import pygame, sys
from pygame.locals import *

xList = (6, 27,48,69)
yList = (24,24,24,24)
wList = (21,21,21,21)
hList = (32,32,32,32)
ani_pos = list(zip(xList, yList, wList, hList))
sprite_num = 0

class Player:

    def __init__(self): 
        playerSheet = pygame.image.load('MainChar1.png').convert() # load sprite sheet
        playerSheet.set_clip(pygame.Rect(ani_pos[sprite_num]))
        self.player = playerSheet.subsurface(playerSheet.get_clip())
        self.x = 320
        self.y = 240
    def draw(self, DISPLAYSURF):
        DISPLAYSURF.blit(self.player, (self.x, self.y))
        self.player.set_colorkey(255, 0, 255)# set sprite background invisible

class Background:

    def __init__(self):
        dirtTile = pygame.image.load('DirtBackground.png').convert()
        dirtTile.set_clip(pygame.Rect(0, 0, 863, 1103))
        self.background = dirtTile.subsurface(dirtTile.get_clip())
        self.x = -111
        self.y = -311      
    def draw(self, DISPLAYSURF):
        DISPLAYSURF.blit(self.background, (self.x, self.y))

pygame.init()
FPS = 30
FPSCLOCK = pygame.time.Clock()

# set up the window
WINDOWWIDTH = 640 # size of windows' width in pixels
WINDOWHEIGHT = 480 # size of windows' height in pixels
DISPLAYSURF = pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT))
pygame.display.set_caption('farm game')
player = Player()
background = Background()
pygame.key.set_repeat(1,0) # (mSec to begin repeat, mSec between repeats)
running = True

while running: # the main game loop

    DISPLAYSURF.fill (255,255,255)
    background.draw(DISPLAYSURF)
    player.draw(DISPLAYSURF)
    pygame.display.flip()
    FPSCLOCK.tick(FPS)

    for event in pygame.event.get(): # event handling loop
        if event.type == QUIT or (event.type == KEYUP and event.key == K_ESCAPE):
            pygame.quit()
            sys.exit()
            running = False

        elif event.type == KEYDOWN:
            if event.key == K_d:
                background.x -= 4
                sprite_num = 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T21:05:53.283

> 我正在使用 .set_clip 返回精灵表的一部分。

不，你没有。您用于[`subsurface`](http://www.pygame.org/docs/ref/surface.html#Surface.subsurface)返回精灵表的一部分。

* * *

我不知道你认为什么[`set_clip`](http://www.pygame.org/docs/ref/surface.html#Surface.set_clip)，但它可能不是它实际做的：

> 这是一个矩形，表示 Surface 上唯一可以修改的像素。

在[SDL 文档](http://www.libsdl.org/docs/html/sdlsetcliprect.html)中有更好的解释：

> 设置曲面的剪切矩形。当这个表面是 blit 的目标时，只有剪辑矩形内的区域将被绘制到。

* * *

> 但是 .set_clip 返回我提供的列表中的第一个 Rect 值，而不是我调用的列表中的项目。

`set_clip`根本不返回任何列表的任何 Rect 值。

当您调用 时`pygame.Rect(ani_pos[sprite_num])`，您正在`Rect`使用列表中的值创建一个`ani_pos`index `sprite_num`，并且`sprite_num`是调用`0`该`__init__`方法的时间。

您将`Surface`您创建的内容存储`__init__`在字段中的方法中`player`，但您从未真正更改它。如果你想创建某种动画，你应该每`n`帧都改变它。您更改`sprite_num`为`2`，但这不会做任何事情，因为您再也不会使用该值。

# c# - 如何反序列化从网络接收到的文件

> ID：14787499
> 
> 赞同：1
> 
> 时间：2013-02-09T11:13:11.127
> 
> 标签：c#, serialization, tcpclient

我正在开发一个需要帮助的软件。

我有一个客户端和服务器。服务器将序列化一个文本文件并将其发送给客户端。

我目前的进展：客户端接收二进制数组但无法将其作为原始文本文件写入光盘。

```
private void ListenPort()
{
    TcpListener _TcpListener= new _TcpListener(7381);
    byte[] received_binary= new byte[1024];

    _TcpListener.Start();
    while (true) 
    { 
        Socket Soket = _TcpListener.AcceptSocket();
        Soket.Receive(received_binary, received_binary.Length, 0);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:16:03.870

您需要将其反序列化为字符串吗？这是我前段时间写的一个函数，它可能会有所帮助......

```
 public static T BinaryDeserializeObject<T>(byte[] serializedType)
    {
        if (serializedType == null)
            throw new ArgumentNullException("serializedType");

        if (serializedType.Length.Equals(0))
            throw new ArgumentException("byte array cannot be empty"));

        T deserializedObject;

        using (MemoryStream memoryStream = new MemoryStream(serializedType))
        {
            BinaryFormatter deserializer = new BinaryFormatter();
            deserializedObject = (T)deserializer.Deserialize(memoryStream);
        }

        return deserializedObject;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:17:39.860

主要问题似乎是您忽略了接收的返回值。这将返回每次读取的字节数。您应该循环直到这是非正数，每次处理（例如写入 FileStream）那么多字节（仅：即使缓冲区更大）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T11:30:13.213

一种可能的解决方案是将文本文件作为一系列字符串或作为字节数组加载并发送。字节数组方法可能是最简洁和有效的，因为它可以在发送期间被压缩，使用[网络库 networkcomms.net](http://www.networkcomms.net)调用发送的应用程序看起来像这样：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using NetworkCommsDotNet;

namespace Client
{
    class Program
    {
        static void Main(string[] args)
        {
            byte[] bytesToSend = File.ReadAllBytes("testFile.txt");
            TCPConnection.GetConnection(new ConnectionInfo("127.0.0.1", 10000)).SendObject("TextFileData", bytesToSend);

            Console.WriteLine("Press any key to exit client.");
            Console.ReadKey(true);
            NetworkComms.Shutdown();
        }
    }
} 
```

和服务器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using NetworkCommsDotNet;

namespace Server
{
    class Program
    {
        static void Main(string[] args)
        {
            NetworkComms.AppendGlobalIncomingPacketHandler<byte[]>("TextFileData", (packetHeader, connection, incomingData) => 
            {
                    Console.WriteLine("Received TextFileData");
                    File.WriteAllBytes("testFile.txt", incomingData);
            });

            TCPConnection.StartListening(true);

            Console.WriteLine("Server ready. Press any key to shutdown server.");
            Console.ReadKey(true);
            NetworkComms.Shutdown();
        }
    }
} 
```

您显然需要从网站下载 NetworkCommsDotNet DLL，以便可以将其添加到“使用 NetworkCommsDotNet”参考中。另请参阅客户端示例中的服务器 IP 地址当前为“127.0.0.1”，如果您在同一台机器上同时运行服务器和客户端，这应该可以工作。有关更多信息，还请查看[入门](http://www.networkcomms.net/getting-started/)或[如何创建客户端服务器应用程序](http://www.networkcomms.net/how-to-create-a-client-server-application-in-minutes/)文章。

# iphone - 在 UITableViewCell 中循环

> ID：14787504
> 
> 赞同：0
> 
> 时间：2013-02-09T11:13:28.130
> 
> 标签：iphone, uitableview, xcode4.5

我正在做一个测验项目，其中问题的数量和问题的选项数量是动态的（取自服务 url）。一个问题最多 5 个选项（但可能会减少）。我在分段的 UITableView 中显示它，每个问题及其选项显示在一个部分中。我将对象放在 NSMutableArray 的一个部分中并每次循环选项。但我只得到最后一个选项。我不明白为什么会这样？

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *hlCellID=@"hlCellID";

    UITableViewCell* hlcell=[tableView dequeueReusableCellWithIdentifier:hlCellID];

    if(hlcell == nil)
    {
        hlcell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault    reuseIdentifier:hlCellID]autorelease];

        hlcell.accessoryType = UITableViewCellAccessoryNone;
        hlcell.selectionStyle = UITableViewCellSelectionStyleNone;
        lblQuestion = [[UILabel alloc] initWithFrame:CGRectZero];
        lblQuestion.tag = 1;
        lblQuestion.backgroundColor = [UIColor clearColor];
        [lblQuestion setFont:[UIFont fontWithName:@"Helvetica-Bold" size:14]];
        [lblQuestion setLineBreakMode:NSLineBreakByWordWrapping];
        [hlcell addSubview:lblQuestion];

        lblanswers = [[UILabel alloc] initWithFrame:CGRectZero];
        lblanswers.tag = 2;
        lblanswers.backgroundColor = [UIColor clearColor];
        [lblanswers setFont:[UIFont fontWithName:@"Helvetica-Bold" size:12]];
        [lblanswers setLineBreakMode:NSLineBreakByWordWrapping];
        [hlcell addSubview:lblanswers];

    }
    int section=indexPath.section;
    NSMutableArray *sectionItems=[self.finalarray objectAtIndex:indexPath.section];
    int n=[sectionItems count];

   hlcell.selectionStyle = UITableViewCellSelectionStyleNone;

    NSString *question = [NSString stringWithFormat:@"%@",[[sectionItems  objectAtIndex:indexPath.row] objectForKey:@"Question"]];
    CGSize constraint1 = CGSizeMake(320, 2000.0f);
    CGSize size1 = [question sizeWithFont: [UIFont fontWithName:@"Helvetica-Bold" size:14] constrainedToSize:constraint1 lineBreakMode:NSLineBreakByWordWrapping];
    lblQuestion = (UILabel *)[hlcell viewWithTag:1];
    lblQuestion.text = [NSString stringWithFormat:@"%@",question];
    [lblQuestion setNumberOfLines:0];
    lblQuestion.frame = CGRectMake(10,25, size1.width, size1.height);

    for(int j=1;j<n;j++)
    {

        NSLog(@"%@",[[sectionItems  objectAtIndex:j] objectForKey:@"Description"]);
        NSString *answer = [NSString stringWithFormat:@"%@",[[sectionItems  objectAtIndex:j] objectForKey:@"Description"]];
        CGSize constraint2 = CGSizeMake(320, 2000.0f);
        CGSize size2 = [answer sizeWithFont: [UIFont fontWithName:@"Helvetica-Bold" size:14] constrainedToSize:constraint2 lineBreakMode:NSLineBreakByWordWrapping];
        lblanswers = (UILabel *)[hlcell viewWithTag:2];
        lblanswers.text = [NSString stringWithFormat:@"%@",answer];
        [lblanswers setNumberOfLines:0];
        lblanswers.frame = CGRectMake(10,20*j, size2.width, size2.height);
        [hlcell.contentView addSubview:lblanswers];

    }

    return hlcell;

} 
```

我不明白如何为 lblanswers 设置框架。

编辑：

```
-(IBAction)checkboxClicked:(id)sender
{
    NSMutableArray *arr1=[[NSMutableArray alloc]init];

    NSIndexPath *indexPath = [self.tableView indexPathForCell:(UITableViewCell *)
                              [[sender superview] superview]];

    NSLog(@"The section  is %d",  indexPath.section);
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
    NSMutableArray *cellSection = [self.finalarray objectAtIndex:indexPath.section];
    int tagID=[sender tag];

    int divnum=0;
    if(tagID<100)
        divnum=10;
    else
        divnum=100;
    int section=[sender tag]/divnum;
    section-=1;
    int itemId=[sender tag]%divnum;

    if(itemId==selectedrowforCheckBox)
    {

        if(self.isChecked ==NO)
        {
            self.isChecked =YES;
            [sender setImage:[UIImage imageNamed:@"checkbox_checked.png"] forState:UIControlStateNormal];

            NSNumber* xWrapped = [NSNumber numberWithInt:itemId];
            int m=[cellSection count]-1;
            NSString *questionId=[[cellSection objectAtIndex:m-1]objectForKey:@"QId"];

            NSMutableDictionary *hk=[[NSMutableDictionary alloc]init];
            [hk setObject:xWrapped forKey:@"Ans"];
            [hk setObject:questionId forKey:@"QId"];
            [selectedOptionandQIdArray addObject:hk];

        }
       else
        {
            self.isChecked =NO;
            [sender setImage:[UIImage imageNamed:@"checkbox_unchecked.png"]forState:UIControlStateNormal];

            NSNumber* xWrapped = [NSNumber numberWithInt:itemId];
            int m=[cellSection count]-1;
            NSString *questionId=[[cellSection objectAtIndex:m-1]objectForKey:@"QId"];

            for (int i=0;i<[selectedOptionandQIdArray count];i++)
            {

                NSString *qid=[[selectedOptionandQIdArray objectAtIndex:i]objectForKey:@"QId"];
                if(xWrapped==[[selectedOptionandQIdArray objectAtIndex:i]objectForKey:@"Ans"] && [questionId isEqualToString:qid])
                {

                    NSLog(@"nnd");
                    [selectedOptionandQIdArray removeObjectAtIndex:i];

                }

            }

        }

        selectedrowforCheckBox=itemId; 

    }
    else
    {

        if(self.isChecked ==NO)
        {
            self.isChecked =YES;
            [sender setImage:[UIImage imageNamed:@"checkbox_checked.png"] forState:UIControlStateNormal];

            NSNumber* xWrapped = [NSNumber numberWithInt:itemId];
            int m=[cellSection count]-1;
            NSString *questionId=[[cellSection objectAtIndex:m-1]objectForKey:@"QId"];

            NSMutableDictionary *hk=[[NSMutableDictionary alloc]init];
            [hk setObject:xWrapped forKey:@"Ans"];
            [hk setObject:questionId forKey:@"QId"];

            [selectedOptionandQIdArray addObject:hk];

        }
        else
        {
            self.isChecked =NO;
            [sender setImage:[UIImage imageNamed:@"checkbox_unchecked.png"]forState:UIControlStateNormal];

        }

        selectedrowforCheckBox=itemId;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:06:12.177

你这样做是不对的。将工作分解为两部分：

在此之前创建一个字典，其中每个键是问题，关联对象是一个包含所有答案的数组。

*   部分数= [字典计数]
*   每个部分的行数 = [[dictionary valueForKey:[[dic allKeys] objectAtIndex:indexPath.section]] count]

    1.  问题 - 使用 UITextView 创建一个自定义视图并将其作为每个部分的标题返回，您可以根据问题通过计算和返回高度来调整高度。

    2.  答案 - 使用 UITextView 创建一个自定义单元格并根据部分和行设置文本。

这种策略不仅可以通过给定结构来简化代码，还可以指定用户选择的答案的检测，因为您可以只存储 indexPath 并检查问题的部分和用户选择的答案的行。

你可以从这里下载示例代码：http: [//www.saplogix.net/QA/sample.zip](http://www.saplogix.net/QA/sample.zip)

# visual-studio-2010 - 未能成功启动或连接到子 MSBuild.exe 进程

> ID：14787507
> 
> 赞同：8
> 
> 时间：2013-02-09T11:13:38.423
> 
> 标签：visual-studio-2010, msbuild, visual-studio-2012

在VS2012中，我在构建时经常会得到以下错误：

```
Error   5   The build stopped unexpectedly because of an internal failure.
Microsoft.Build.Exceptions.BuildAbortedException: Build was canceled. Failed to successfully launch or connect to a child MSBuild.exe process. Verify that the MSBuild.exe "C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe" launches successfully, and that it is loading the same microsoft.build.dll that the launching process loaded. If the location seems incorrect, try specifying the correct location in the BuildParameters object, or with the MSBUILD_EXE_PATH environment variable.
   at Microsoft.Build.BackEnd.NodeProviderOutOfProc.CreateNode(Int32 nodeId, INodePacketFactory factory, NodeConfiguration configuration)
   at Microsoft.Build.BackEnd.NodeManager.AttemptCreateNode(INodeProvider nodeProvider, NodeConfiguration nodeConfiguration)
   at Microsoft.Build.BackEnd.NodeManager.CreateNode(NodeConfiguration configuration, NodeAffinity nodeAffinity)
   at Microsoft.Build.Execution.BuildManager.PerformSchedulingActions(IEnumerable`1 responses)
   at Microsoft.Build.Execution.BuildManager.HandleNewRequest(Int32 node, BuildRequestBlocker blocker)
   at Microsoft.Build.Execution.BuildManager.IssueRequestToScheduler(BuildSubmission submission, Boolean allowMainThreadBuild, BuildRequestBlocker blocker) 
```

在任务管理器中我看到至少有 10-20 个 MSBuild.exe 和 Conhost.exe。我无法终止这些，甚至关闭 VS 也不能解决问题。目前唯一的解决方法是注销并重新登录。

有没有人也经历过这种情况，也许有一个解决方案？

提前致谢。抢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T00:42:13.113

See [Failed to successfully launch or connect to a child MSBuild.exe process. Verify that the MSBuild.exe](https://stackoverflow.com/questions/14561278/failed-to-successfully-launch-or-connect-to-a-child-msbuild-exe-process-verify) which says to restart Visual Studio to fix the problem.

That certainly worked for me.

# google-closure - 使用 LimeJS 在我的 .js 文件中获取“b 未定义”

> ID：14787511
> 
> 赞同：0
> 
> 时间：2013-02-09T11:13:56.490
> 
> 标签：google-closure, google-closure-library, limejs

我正在尝试使用 javascript 编译文件，但我得到“b 未定义”，因为我使用它启动了应用程序。我真的不知道它是从哪里来的。

我再次从 LimeJS 中删除了 et init，更新了部门。问题还在。。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:40:39.687

您在压缩代码时是否在要使用的方法上使用了 goog.exportSymbol() ？如果不是，编译器会更改函数的名称以压缩它们以优化压缩！

# java - 用户信息

> ID：14787512
> 
> 赞同：-1
> 
> 时间：2013-02-09T11:14:00.093
> 
> 标签：java, android, facebook, facebook-graph-api

大家好，我正在为 android 开发一个应用程序，但我需要通过您的 facebook 帐户从用户那里获取一些额外的信息。

例如个人的兴趣；

使用 facebook 教程，我设法做一些简单的事情，只获取该人的基本信息，但现在我想从中获取更多个人信息。当然，这个人已经同意了。

好提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:42:57.510

我相信您正在寻找的答案在您开始身份验证过程时的 facebook 权限字符串中。自从我使用 facebook api 进行大量工作以来已经有大约一年的时间了，所以我相信他们已经改变了很多东西。也就是说，基本前提是您默认获取用户的基本信息，但对于更复杂的事情，您需要请求特殊权限，大概包括他们个人资料中的更多详细信息。您可以[在此处](https://developers.facebook.com/docs/reference/api/user/)查看哪些信息需要哪些权限。希望有帮助！

# c# - 如何从使用文本格式将文件路径存储到水晶报表的数据库中加载图像？

> ID：14787513
> 
> 赞同：0
> 
> 时间：2013-02-09T11:14:05.490
> 
> 标签：c#, database, ms-access, windows-forms-designer, crystal-reports-2010

我将图像路径文件作为文本存储到数据库中，而不是使用 OLE 对象。现在我想知道如何从数据库中检索图像路径并将图像加载到水晶报表中。

图像路径是这样存储的`C:\Users\HPLaptop\Desktop\Folder\ImageFile.jpg`，我希望水晶报告使用这个路径文件加载图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:48:46.700

报告架构：

我们都知道我们需要为水晶报告提供一个模式。这是我们将为报告提供的报告模式的 XML 视图。

BLOB 字段：

为了将图像添加到水晶报表（考虑到图像字段来自数据库），我们需要在模式中有一个 BLOB 字段。当您想在数据库中存储图像、文档或不同的自定义类型时，您可以使用 BLOB 字段。BLOB 代表二进制大对象。

如果您检查此模式，我们可以看到我们有一个名为“Images”的表和两列“path”和“image”。“图像”列是 Base64 二进制类型。这是我们的 BLOB 字段。我们在程序中要做的是，当用户选择要上传的图像时，我们将该图像作为字节流存储在 BLOB 字段中，然后将该数据集提供给报告。

CreateTable() 方法将说明如何在程序中生成此模式。

为报告生成架构：

还有其他方法可以创建架构，但这会让您更清楚地了解列字段。

创建表：

私人无效创建表（）

{

```
 //create a new data set.

      this.DsImages = new DataSet();

      //create a new table with two columns and add the table to the
  dataset 
```

数据表 ImageTable = new DataTable("Images");

```
 //in here the "path" column is not really needed. Image column is
  just enough. 
```

ImageTable.Columns.Add(new DataColumn("path",typeof(string)));

```
 //Important note

      //Note the type of the image column. You want to give this column
  as a blob field to the crystal report.

      //therefore define the column type as System.Byte[]

      ImageTable.Columns.Add(new DataColumn("image",typeof(System.Byte[])));

      this.DsImages.Tables.Add(ImageTable); 
```

}

如果您注意到“图像”列，您可以看到该列的类型是 System.Byte[]。这很简单。只需创建一个包含两列的表。然后将其添加到数据集。现在您可以使用以下行创建架构：

this.DsImages.WriteXmlSchema(@"c:\temp\ImagesSchema.xsd");

一旦我们准备好模式，我们就可以将它提供给水晶报表。

图 1：

![在此处输入图像描述](../Images/c0b6d615159fa8eedff14b4175c12da1.png)

检查图像 1，在字段资源管理器中，我们可以看到图像表和两列路径和图像。当您将图像列拖到报表上时，您可以看到该字段的类型是 IBlobFieldObject。这些字段将读取字节流并将其转换回图像。这样我们的任务就差不多完成了。下面的代码向您展示了它如何将图像保存为 BLOB 字段中的字节流。

私人无效openFileDialog1_FileOk（对象发送者，System.ComponentModel.CancelEventArgs e）

{

```
 try

      {

               //get the image file into a stream reader.

               FileStream FilStr = new FileStream(this.openFileDialog1.FileName, FileMode.Open);

                BinaryReader BinRed = new BinaryReader(FilStr);

               //Adding the values to the columns

               // adding the image path to the path column

               DataRow dr = this.DsImages.Tables["images"].NewRow();

               dr["path"] = this.openFileDialog1.FileName;

               //Important:

               // Here you use ReadBytes method to add a byte array of the image stream.

               //so the image column will hold a byte array.

               dr["image"] = BinRed.ReadBytes((int)BinRed.BaseStream.Length);

               this.DsImages.Tables["images"].Rows.Add(dr);

               FilStr.Close();

               BinRed.Close();

               //create the report object

               DynamicImageExample DyImg = new DynamicImageExample();

               // feed the dataset to the report.

               DyImg.SetDataSource(this.DsImages);

               this.crystalReportViewer1.ReportSource = DyImg;

      }

      catch(Exception er)

      {

               MessageBox.Show(er.Message,"Error");

      } 
```

}

您可以在 openFileDialog 的 FileOk 方法中编写它。您使用 BinaryReader.ReadBytes 方法来读取字节数组。

博士[“图像”] = BinRed.ReadBytes((int)BinRed.BaseStream.Length);

# javascript - 数据表 fnSort 建议

> ID：14787519
> 
> 赞同：0
> 
> 时间：2013-02-09T11:15:36.133
> 
> 标签：javascript, datatables

使用此数据表代码寻找有关在何处放置 fnSort 的帮助，以使默认排序第二列而不是第一列。我有：

```
dataClones['keyword_table_<?php echo ceil($countCallsCounter/7); ?>']=document.getElementById('keyword_table_<?php echo ceil($countCallsCounter/7); ?>').cloneNode(true);

    $('#keyword_table_<?php echo ceil($countCallsCounter/7); ?>').dataTable( {
    //"sDom": "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",
    "sDom":"<<'span6'l><'span6'f>r>t<<'span6'i><'span6'p>>",
    "sPaginationType": "bootstrap",
    "oLanguage": {
    "sLengthMenu": "_MENU_ records per page"
    }

} 
); 
```

我知道我需要添加[http://datatables.net/api#fnSort](http://datatables.net/api#fnSort)但我对 JS 并不太熟悉，所以如果可能的话，需要一些快速帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T03:10:18.080

您所要做的就是为 $(selector).datatable() 调用设置一个变量 =。然后你可以调用 variable.fnSort()。

```
var oTable; // Make sure this is within scope of your function, or where you want to execute the sort.

dataClones['keyword_table_<?php echo ceil($countCallsCounter/7); ?>']=document.getElementById('keyword_table_<?php echo ceil($countCallsCounter/7); ?>').cloneNode(true);

    oTable = $('#keyword_table_<?php echo ceil($countCallsCounter/7); ?>').dataTable( {
    //"sDom": "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",
    "sDom":"<<'span6'l><'span6'f>r>t<<'span6'i><'span6'p>>",
    "sPaginationType": "bootstrap",
    "oLanguage": {
    "sLengthMenu": "_MENU_ records per page"
    }

} 
);

function onSort(){
    oTable.fnSort([0,'asc']);
} 
```

此外，如果您在初始化数据表时知道要排序的列，您可以：

```
$('#example').dataTable( {
    "aaSorting": [[ 4, "desc" ]]
} ); 
```

[http://datatables.net/api#fnSort](http://datatables.net/api#fnSort) [http://datatables.net/release-datatables/examples/basic_init/table_sorting.html](http://datatables.net/release-datatables/examples/basic_init/table_sorting.html)

# scala - 可变集还是不可变集？

> ID：14787529
> 
> 赞同：1
> 
> 时间：2013-02-09T11:16:12.820
> 
> 标签：scala

考虑以下：

```
scala> val myset = Set(1,2)
myset: scala.collection.immutable.Set[Int] = Set(1, 2)

scala> myset += 3
<console>:9: error: reassignment to val
              myset += 3
                    ^

scala> var myset = Set(1,2)
myset: scala.collection.immutable.Set[Int] = Set(1, 2)

scala> myset += 3

scala> myset
res47: scala.collection.immutable.Set[Int] = Set(1, 2, 3) 
```

在一种情况下，我可以添加“alex”，而在另一种情况下，我不能。我知道 val 和 var 之间的区别。然而，在这两种情况下让我感到困惑的是，Scala 告诉我 Set 是不可变的，但它允许不同的行为。

我不想那样做，因为在情况下 myset 是一个 val，而在一个情况下它是一个 var。我想要一个比这更深入的答案来解释为什么在这两种情况下 Scala 都说 myset 是一个不可变的集合，但是却以不同的方式对待两者。因为它是反直觉的。

例如，使用可变集和将不可变集声明为 var 有什么区别吗？为什么 scala 会让你改变规则？如果当它说不可变时它意味着它不是更好吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T11:57:21.683

首先让我们翻译`+=`通话

```
val myset = Set(1,2)
myset = myset + 3 //this is what the compiler does for myset += 3 
```

这意味着我们实际上是在调用`+`方法 on `Set`，其[scaladoc](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Set)说

> 使用附加元素创建一个**新集合，除非该元素已经存在。**

因此，代码试图做的是使用添加的元素创建一个**新** `Set`元素并将其重新分配给*不可变引用* `myset`。

现在，如果我们将引用更改为可变引用（使用`var`），那么您可以使用*新创建的和不可变的重新分配它* `Set(1,2,3)`

原来的 Set(1, 2) 仍然是不可变的，没有规则被破坏。让我们用一个案例来解释一下

```
var myset = Set(1,2)
val holdIt = Some(myset)
myset += 3
println(myset) // will print Set(1, 2, 3)
println(holdIt)// will print Some(Set(1, 2)) 
```

如您所见，由`Set`捕获的原始`Option`从未更改，我们只是将其变量引用重新分配给新创建的`Set`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T12:00:26.710

当您使用不可变 Set 时，将创建一个新 Set 并重新分配给`var`，这在使用 时是不可能的`val`。但是一个可变的 Set 可以被改变。虽然以下不是一个完美的保存演示，但它仍然表明使用不可变 Set 创建了一个新对象，并且可变 Set 实例保持不变：

```
scala> var set1 = Set(1, 2)
set1: scala.collection.immutable.Set[Int] = Set(1, 2)

scala> System.identityHashCode(set1)
res0: Int = 2119337193

scala> set1 += 3

scala> System.identityHashCode(set1)
res2: Int = 1866831260

scala> var set2 = collection.mutable.Set(1, 2)
set2: scala.collection.mutable.Set[Int] = Set(2, 1)

scala> System.identityHashCode(set2)
res3: Int = 594308521

scala> set2 += 3
res4: scala.collection.mutable.Set[Int] = Set(2, 1, 3)

scala> System.identityHashCode(set2)
res5: Int = 594308521 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-09T12:07:55.593

考虑`myset`作为指针和 `Set(1,2)`对象

如果`val myset`指针只分配一次并且不能指向不同的对象（即**指针是不可变的**），而在这种情况下`var myset`可以分配任意时间并且可以指向不同的对象（即**指针是可变的**）

在这两种情况下，对象`Set(1,2)`都是不可变的。

当你这样做

```
scala> val myset = Set(1,2)
myset: scala.collection.immutable.Set[Int] = Set(1, 2)

scala> myset += 3
<console>:9: error: reassignment to val
              myset += 3
                    ^ 
```

`myset += 3` actually gives you a new `Set` with `3` appended to it..

Since the `myset` pointer is immutable you cannot reassign to the new `object` returned by the `+` method.

where as in case of

```
scala> var myset = Set(1,2)
myset: scala.collection.immutable.Set[Int] = Set(1, 2)

scala> myset += 3 
```

Since `myset` pointer is mutable you can reassign to the new `object` returned by the `+` method.

# recursion - 记忆化是否提高了该算法的运行时间？

> ID：14787530
> 
> 赞同：3
> 
> 时间：2013-02-09T11:16:19.923
> 
> 标签：recursion, memoization, factorial

> “给定一个包含 n 个整数的数组，返回它们的阶乘数组。”

我没有直接遍历数组并为每个数组查找阶乘，而是考虑了一种记忆化方法，在该方法中我存储先前计算的阶乘并在后续的阶乘中使用它们。

例如：7！如果结果 6 可以计算多禁食！存储在某处。但是，我注意到两种算法的运行时间仍然是 O(n)。（我可能错了）这是否意味着我们没有在这里加快进程？如果是这样，这是否意味着记忆化在非树递归问题中没有用？（在斐波那契中，我们通过记忆先前找到的值来有效地修剪递归树，在阶乘的情况下，我们并没有真正的树，更像是一个递归阶梯）任何评论表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:50:41.900

在没有记忆的情况下，时间复杂度应该是 O(n^2) 因为你需要 (i-1) 乘法来计算没有记忆的阶乘(i)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T11:31:17.453

> 但是，我注意到两种算法的运行时间仍然是 O(n)。

O-Notation 隐藏了这里最重要的特征。它只考虑*数组的长度*而不考虑数字的**大小**，这在处理阶乘时要重要*得多。*

您应该使用哈希表实现记忆。如果你这样做，那么你将渐近地得到每个条目的 O(1)。

# android - adb 找不到我的设备 (sony xperia J)

> ID：14787536
> 
> 赞同：4
> 
> 时间：2013-02-09T11:17:03.930
> 
> 标签：android, adb

1.  我使用的是 Windows 7 64 位
2.  我的手机是索尼 Xperia J
3.  我的手机处于调试模式
4.  我手机的驱动程序已安装
5.  'adb devices' 返回：“附加设备列表”，仅此而已
6.  我已删除所有相关软件并重新安装

我已经尝试了很多其他的事情，但是由于我已经尝试解决这个问题 2 天，我基本上已经尝试了互联网上所有可能的解决方案。请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-21T23:07:21.783

我发现您必须将手机置于大容量存储模式，默认为 MTP 模式。就如此容易 @＃！我花了几个小时尝试阅读帖子的各种事情。

Settings / Xperia / USB Connectivity / USB Connection Mode 并选择 MASS Storage，而不是 MTP。我确实取消了安装 PC Companion。它立即起作用。无需更新驱动程序，无需更改 android_winusb.inf。在再次尝试 adb devices 之前，您可能需要终止 adb.exe。

对我来说就是这样:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T19:28:47.593

索尼 Xperia Tablet S 的答案：

*   在 SDK 管理器中进入 Sony 存储库（工具 -> 管理附加站点 -> 用户定义的站点 - 新） [http://dl-developer.sonymobile.com/sdk_manager/Tablet-SDK-Add-on.xml](http://dl-developer.sonymobile.com/sdk_manager/Tablet-SDK-Add-on.xml)

*   在主 SDK 管理器中，选择“存储库”（屏幕底部）

*   浏览 Sony 条目，安装“Sony Tablet SDK Add-On”

*修改 Google USB 驱动程序*

*   在 Android SDK Manager 中安装 google usb 驱动程序
*   给出子目录 $ANDROID_SDK\sdk\extras\google\sub_driver
*   此目录包含 android_winusb.inf

    *   添加

    **（这在您的情况下必须有所不同）**

    ;SONY 索尼平板电脑 S %CompositeAdbInterface% = USB_Install, USB\VID_054C&PID_05B4&MI_01

    到部分

    [Google.NTx86] [Google.NTamd64]

*   打开 cmd 外壳

*   CDC：\
*   mkdir .android
*   光盘.android
*   echo 0x54c >> adb_usb.ini **（可能是不同的数字）**

*安装修改后的驱动程序*

*   首先杀死任何 adb 进程
*   连接平板电脑，确保在设备上选择了调试 USB 模式
*   打开设备管理器->其他设备，感叹号设备
    *   更新驱动程序
    *   浏览驱动软件
    *   ！！从列表中选择
    *   ！！有磁盘
    *   ！！选择 android_winusb.inf
    *   忽略有关未签名驱动程序的所有警告
    *   选择 Android ADB 接口
*   该设备现在应该显示为“Android Device - Android ADB Interface”（仍在设备管理器中

*   以上应该可以解决问题。

*   尝试 $ANDROID_PATH\sdk\platform-tools\adb 设备

    它现在应该列出新设备（在它不可见之前）

*使用的信息：*

由于限制，下一篇文章中的链接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-18T22:19:59.947

我遇到了同样的问题，即没有安装 Sony Xperia J 的 Android 驱动程序

解决方案：安装 Sony Companion [http://www-support-downloads.sonymobile.com/Software%20Downloads/PC%20Companion/Sony%20PC%20Companion_Web.exe](http://www-support-downloads.sonymobile.com/Software%20Downloads/PC%20Companion/Sony%20PC%20Companion_Web.exe)

享受！

# jquery - 无法让 boostraps jQuery 工具提示出现

> ID：14787538
> 
> 赞同：2
> 
> 时间：2013-02-09T11:17:14.350
> 
> 标签：jquery, html, css, twitter-bootstrap

开始感到沮丧，这使得我更难看出我可能出错的地方，但基本上我试图让 Bootstrap 的 jQuery 工具提示在将鼠标悬停在我的页面内容中的图像上时工作。

正文中的 HTML：

```
<div class="tooltip-demo well">
<a title="Tooltip Text Goes Here" rel="tooltip" class="pennant-task" href="#">
<img src="/ssawp/wp-content/themes/wordpress-bootstrap/images/tasks/ytool-boatparts.jpg" />
</a>
</div> 
```

标题：

```
<script type="text/javascript">
    $('.tooltip-demo.well').tooltip({
        selector: "a[rel=tooltip]"
    })
</script>
<script src="bootstrap.js" type="text/javascript"></script> 
```

我缩短了路径以使其更易于浏览，但请随时查看**问题**：

```
http://okamistudio.com/ssawp/pennants/ 
```

我正在尝试在“黄色三角旗”文本块下方的小船图标上实现工具提示。

任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T11:18:55.383

首先，您需要`bootstrap.js`在编写自己的代码之前包含。其次，您需要将代码包装在文档就绪处理程序中。

此外，您还没有将它包含在您的示例中，因此为了完整起见，我也包含了所需的内容`jquery.js`。试试这个：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="bootstrap.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function() {
        $('.tooltip-demo.well').tooltip({
            selector: "a[rel=tooltip]"
        });
    });
</script> 
```

# iphone - 如何调整阿拉伯语“aarab”字符？

> ID：14787544
> 
> 赞同：0
> 
> 时间：2013-02-09T11:17:59.200
> 
> 标签：iphone, ios, objective-c, arabic

我在用阿拉伯语展示阿拉伯语时遇到了问题。我在stackoverflow上检查了许多相同的问题，但没有一个对我有用。

现在的问题是它在 xcode 和模拟器中都没有正确显示阿拉伯语。我什至在我的 Mac 上安装了字体，并在模拟器中正确添加了它。 ![在此处输入图像描述](../Images/fa0a1fb112476e3d85b828aa71299973.png)

```
 label.font=[UIFont fontWithName:kArabicFont size:24.0f];
label.numberOfLines=2;
 // label.text=@"اَلْحَمْدُ لِلّٰهِ رَبِّ الْعٰلَمِيْنَۙ۰۰۱";
// label.text = @"السلام عليكم";
label.text = @"بِسْمِ اللّٰهِ الرَّحْمٰنِ الرَّحِيْمِ"; 
```

# timezone - 桌面中使用本地主机作为计算基础的简单世界时钟

> ID：14787545
> 
> 赞同：0
> 
> 时间：2013-02-09T11:18:01.723
> 
> 标签：timezone, desktop-application, offline

我一直在网上搜索一些简单的世界时钟程序，这些程序将在后台运行而无需使用互联网连接。相反，我使用谷歌搜索找到了这个网站：[http ://wwp.greenwichmeantime.com/info/global.htm](http://wwp.greenwichmeantime.com/info/global.htm)

现在我想就哪种语言最适合我想要的程序提出一些意见。基本上它看起来像一个简单的 2 列表。第 1 列将是时区，第 2 列将根据其各自的区域作为当前时间。它只会在后台持续运行，而不会消耗太多内存。计算机的本地时间将用作基准。

同样，这将是一个**离线世界时区，因此是一个桌面应用程序。**

功能也可能包括这些但不是必需的：

1.  时间将采用 24 小时格式，以便于阅读（我觉得它更容易并且可能是必要的）。
2.  透明度设置。
3.  总在最前面。

我已经学习了一些基本的编程语言，但不知道如何实际制作这个项目，因为我没有触及这些语言的“视觉”部分。我见过一些基于 java 构建的应用程序，但我还没有学会它。我知道基本的python和基本的C++。

这就是我认为它的样子： http: [//imgur.com/8ZdisWX](http://imgur.com/8ZdisWX) 只需垂直延长它，以便每个时区都适合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:48:17.023

首先是一些笔记。您链接的页面显示 24 个时区。这实际上是一个谎言。没有24个时区，有数百个。408，具体来说，其中几个有多个名字，所以有548个不同的名字。[http://en.wikipedia.org/wiki/List_of_tz_database_time_zones](http://en.wikipedia.org/wiki/List_of_tz_database_time_zones)如果您使用的是 Windows，您可能希望使用 Windows 内部时区注册表。它的时区较少，但仍有数百个时区。

列出所有这些是不切实际的。您将需要一种方法让用户选择他想要显示的时区。许多操作系统的时间/日期小部件已经允许这样做。

如果您仍想执行此应用程序，那么您可以或多或少地以任何语言执行此操作。由于您了解基本的 Python，我建议您在 Python 中使用[pytz](http://pytz.sourceforge.net/)作为时区库。至于 GUI 支持，[Kivy](http://kivy.org/)看起来很酷，而且非常便携，甚至支持 iOS 和 Android。

另请注意，时区经常更改，因此您可能需要每年更新几次应用程序，以获取最新的时区定义。您可以通过各种或多或少复杂的方式来解决这个问题。但我现在会把它留给过度使用。

# iphone - 我在哪里初始化 NSMutable 字典？

> ID：14787546
> 
> 赞同：0
> 
> 时间：2013-02-09T11:18:18.323
> 
> 标签：iphone, nsmutabledictionary

我有一个由更多子数组组成的数组

我想将子数组内容的摘要显示到 TableView 中，其中包含每个条目的出现次数。我已经确定最好和最简单的方法是通过 NSMutableDictionary 作为中间步骤。

我在我的实现中声明了字典

```
@implementation ReviewViewController
{
NSMutableDictionary *dict;
} 
```

在我的方法中，我初始化并像这样使用它：

```
dict =  [NSMutableDictionary new];
[dict setObject:[Observation entryCount] forKey:[observedItem species]]; 
```

键和对象的交换是故意的，因为它是我想要的计数。我正在使用保留值的事实，但键被覆盖，所以如果我交换它们，我会免费获得管理。

它有效！但每次调用该方法时，字典都会被重新初始化所破坏，所以我只输入最后一个内容。其他任何地方，它都超出了范围。

如果我将它作为方法名称中的参数传递，我会收到消息“'dict' 的本地声明隐藏实例变量”。代码已经是一组不可约的部分，所以

那么，实例化的正确位置在哪里？

我很想在这里做出我的贡献作为一个有意义的感谢，但在我能做到这一点之前，我会因为这样的问题而显得很傻。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:23:47.267

你通常会在你的`init`方法中初始化它。对于视图控制器，通常如下：

```
- (id)initWithNibName:(NSString*)nibName bundle:(NSBundle*)bundle {
    if ((self = [super initWithNibName:nibName bundle:bundle])) {
        dict = [NSMutableDictionary new];
    }
    return self;
} 
```

我不明白您所说的“其他任何地方都超出范围”是什么意思。它是一个实例变量。因此，它在类中的任何方法的范围内。

顺便说一句，我会用下划线前缀命名您的实例变量，例如`_dict`. 这是常见的约定，它可以帮助您在使用它时记住它是一个实例变量。

# asp.net-mvc - 如何将中型 .net 4.0 asp mvc4 VS 2012 解决方案（8 个项目）移植到 MonoDevelop 3.0.2

> ID：14787548
> 
> 赞同：1
> 
> 时间：2013-02-09T11:18:44.270
> 
> 标签：asp.net-mvc, visual-studio-2012, monodevelop

我想尝试将中型 .net 4.0 asp mvc4 解决方案（8 个项目）移植到 MonoDevelop。我正在使用 linux mint 14。

谁能告诉我步骤？

# twitter-bootstrap - 从模态打开引导模态

> ID：14787550
> 
> 赞同：0
> 
> 时间：2013-02-09T11:18:46.860
> 
> 标签：twitter-bootstrap, modal-dialog

我正在尝试从实际打开的模式视图中打开一个新的引导模式视图。

我正在使用以下模板打开所有不同的模式：

```
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">&nbsp;</h3>
  </div>
  <div class="modal-body">
    <div class="alert alert-error" style="text-align: center;">
      <strong>ERROR!</strong><br />You should not be able to see this text!^
    </div>
  </div>
</div>
<script>
    $("a[data-target=#myModal]").click(function(ev) {
        ev.preventDefault();
        var target = $(this).attr("href");

        // load the url and show modal on success
        $("#myModal .modal-body").load(target, function() {
            $("#myModal").modal("show");
        });
    });
</script> 
```

然后我用 RoR 调用我的模态：

```
<a href='<%= url_for :controller => :customers, :action => :new %>' data-target='#myModal' type='button' class='btn' role='button' data-toggle='modal'>
  <i class="icon-plus"></i> new Customer</a> 
```

实际上，当我在这样的模式中按下一个按钮时，什么也没有发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T11:00:31.333

首先，`data-toggle="modal"`当您使用自己的模态加载时，不应使用该属性，因为远程页面将被加载两次（由您和插件加载）。

其次，当您绑定事件时，它只使用页面上已有的元素，除非您使用[委托事件](http://api.jquery.com/on/#direct-and-delegated-events)，例如：

```
$(document).on('click','a[data-target="#myModal"]', function(ev) {

}); 
```

注意选择器周围的简单引号和属性值周围`'`的双引号。`"`

从那里开始，它应该可以工作：[Demo (jsfiddle)](http://jsfiddle.net/Sherbrow/FH7md/)

# node.js - 使用 Meteor.js 进行抓取

> ID：14787552
> 
> 赞同：13
> 
> 时间：2013-02-09T11:18:55.357
> 
> 标签：node.js, web-scraping, meteor, cheerio

我可以用meteor.js 刮吗？刚刚发现`cheerio`与`request`. 我可以将这些与流星一起使用，还是有类似的东西？

你有一个工作的例子吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-09T21:23:33.597

当然！很难想象流星不能做什么！首先，您需要一些东西来处理远程 http 请求。在终端运行的流星目录中`meteor add http`添加`Meteor.http`包，也`npm install cheerio`（查看[另一个关于如何安装 npm 模块的 SO 问题，](https://stackoverflow.com/questions/10587964/where-do-we-put-node-modules-we-install-by-npm-in-a-meteor-project)以了解在哪里安装外部 npm 模块。

这是一个可能对您有所帮助的示例，它会刮掉[当前时间](http://www.timeanddate.com/worldclock/city.html?n=136)。

服务器js

```
require = __meteor_bootstrap__.require; //to use npm require must be exposed.
var cheerio = require('cheerio');

Meteor.methods({
    getTime: function () {
        result = Meteor.http.get("http://www.timeanddate.com/worldclock/city.html?n=136");
        $ = cheerio.load(result.content);
        CurrentTime = $('#ct').html();
        return CurrentTime;
    }
}); 
```

客户端脚本：

```
Meteor.call("getTime", function(error, result) {
    alert("The current time is " + result); 
}); 
```

我希望这是有帮助的。在 Cheerio 中，还有其他节点框架，例如 node.io

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-27T18:38:33.667

[本项目](https://github.com/DeBraid/meteor-tutorial-http-and-session-vars)中使用以下代码来抓取推文风暴：

```
if (Meteor.isClient) {

  Meteor.call('getTweets', function (error, result) {
    if (error) {
      console.log("error", error);
    };

    Session.set("tweets", result);
  });

  Template.tweets.helpers({
    rant: function () {
      return Session.get("tweets");
    }
  });

} 
```

**服务器端**

```
 if (Meteor.isServer) {
      Meteor.startup(function () {
        var cheerio = Meteor.npmRequire('cheerio');

    Meteor.methods({
      getTweets: function () {
        result = Meteor.http.get("https://twitter.com/Royal_Arse/status/538330380273979393");
        $ = cheerio.load(result.content);
        var body = $('#stream-items-id > li:nth-child(n) > div > div > p').text();
        return body;
      },

    })

  });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-17T20:44:47.080

你可以看看[http://casperjs.org/](http://casperjs.org/)非常有用。还可以做截图、自动化测试等...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-14T13:10:56.307

现在你应该使用 meteorhacks npm 包[https://github.com/meteorhacks/npm](https://github.com/meteorhacks/npm) 并要求它：

```
var cheerio = Meteor.npmRequire('cherio'); 
```

为我工作:)

# php - 从表单创建连接实体

> ID：14787557
> 
> 赞同：0
> 
> 时间：2013-02-09T11:19:29.883
> 
> 标签：php, symfony

我有三个实体，`User`和`Provider`（`UserProvider`一个带有一些额外数据的连接实体）。

我正在尝试创建一个表单，用户通过勾选框指定他们的提供者（这应该生成一些`UserProvider`记录）。

我尝试使用选择并生成新的表单类型，但似乎无法使其正常工作。这是我尝试的最后一件事：

```
$form = $this->createFormBuilder($user)
    ->add('userProviders', 'entity', array(
        'class' => 'MyAppBundle:UserProvider',
        'property' => 'provider.name'
        'choices' => $userProviders
    ))
    ->getForm(); 
```

我生成的一些实体数组在哪里`$userProviders`将当前用户映射到所有可能的提供者，但这不起作用，因为实体没有持久化（因为它们可能不需要）。

在 Symfony 中最干净的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:54:40.677

只需使用实体表单类的内部方式来生成您的数组，如下所示：

```
use Doctrine\ORM\EntityRepository;
// ...

$builder->add('userProviders', 'entity', array(
    'class' => 'MyAppBundle:UserProvider',
    'property' => 'provider.name'
    'query_builder' => function(EntityRepository $er) {
        return $er->createQueryBuilder('u')
            //Your Query here
        ;
    },
)); 
```

取自这里：[http ://symfony.com/doc/master/reference/forms/types/entity.html](http://symfony.com/doc/master/reference/forms/types/entity.html)

你可以在里面做任何你想做的事情，甚至可以对可能的`NOT IN`情况进行 2 次查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:43:53.863

作为对此的解决方案，我刚刚创建了一个未绑定的表单列表`Providers`并将它们与当前`User`的 as一起保存`UserProviders`。

这并不理想，因为重新访问表单不会显示现有的连接实体 ( `UserProvider`)，并且需要进行额外的工作才能使它们可见。

# jquery - Ajax 完成后获取存储的 JSON 数据

> ID：14787559
> 
> 赞同：1
> 
> 时间：2013-02-09T11:19:39.600
> 
> 标签：jquery, ajax, json

我目前正在做关于 Jquery、Ajax 和 JSON 的练习。我找到了几种获取数据的方法，但现在我想将这些数据从 JSON 存储到一个变量中。据我所知，JSON 只是一大堆对象。

我的 JSON 文件如下所示：

```
{
    "Products" : [{
            "Id": 11,
            "Name": "Keyboard",
            "Description": "Microsoft Keyboard",
            "PriceExVat": 199.95,
            "QtyInStock": 11
        },
        {
            "Id": 211,
            "Name": "Mouse",
            "Description": "Microsoft 3 button Mouse with scroller",
            "PriceExVat": 199.95,
            "QtyInStock": 30
        },
        {
            "Id": 35,
            "Name": "TowerCase",
            "Description": "Mini Tower Case with 450W power unit",
            "PriceExVat": 600.95,
            "QtyInStock": 23
        },
        {
            "Id": 58,
            "Name": "Monitor",
            "Description": "17inch LCD monitor",
            "PriceExVat": 1499.95,
            "QtyInStock": 12
        }]
} 
```

我的 Jquery 代码如下所示：

```
 var products;           
        $(document).ready(function(){       
            $.ajax({
                type: 'GET',
                url: 'data/Products.json',
                data: { get_param: 'value'},
                dataType: 'json',
                complete: function(data){
                    products = data; //Store JSON data
                }
            });
        });

        $(document).ajaxComplete(function(){
            alert(products); //returns object [Object]. When attempting to get data here like products[0].Name, an error occurs saying that Name does not exist
        }); 
```

我之所以这样做，是因为我知道 ajax 是**异步**javascript 和 xml。因此，如果我使用`success : function(){...}`，将无法保证我的数据将保存到变量中`products`（即时间问题）。

所以我设置了ajax的代码，在操作完成时存储数据。这将触发`ajaxComplete()`事件，理论上允许我访问我保存到变量中的数据。

不过这里有一个小问题，也是我提出问题的原因。如果我`alert(products)`，我得到回应

![返回数据 1](../Images/7412750c642b45773c478656c91ea7c6.png)

稍微改变我的代码（因为现在我认为应该在那个变量中存储一些东西），到`alert(products.Products[0].Name);`，抛出一个错误（暗示这个变量我是未定义的）

![响应错误](../Images/f236251bb0167caa318ee41e8b221a70.png)

有没有人可以传递给我的建议让我遵循以获取数据？这个变量的目标是我想用它来分页到我的表中，并且通过使用存储在变量中的数据来减少对 json 文件（以后可能成为远程托管文件）的调用量。

**编辑** 更改警报到控制台。日志

对象 {readyState: 4, setRequestHeader: function, getAllResponseHeaders: function, getResponseHeader: function, overrideMimeType: function…}

不是我希望看到的。

**编辑** 显然我什至没有正确显示日志。

```
Object {readyState: 4, setRequestHeader: function, getAllResponseHeaders: function, getResponseHeader: function, overrideMimeType: function…}
abort: function (a){a=a||"abort",p&&p.abort(a),w(0,a);return this}
always: function (){i.done.apply(i,arguments).fail.apply(i,arguments);return this}
complete: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
done: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
error: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
fail: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
getAllResponseHeaders: function (){return s===2?n:null}
getResponseHeader: function (a){var c;if(s===2){if(!o){o={};while(c=bG.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c}
isRejected: function (){return!!i}
isResolved: function (){return!!i}
overrideMimeType: function (a){s||(d.mimeType=a);return this}
pipe: function (a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()}
progress: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
promise: function (a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}
readyState: 4
responseText: "{
↵   "Products" : [{
↵           "Id": 11,
↵           "Name": "Keyboard",
↵           "Description": "Microsoft Keyboard",
↵           "PriceExVat": 199.95,
↵           "QtyInStock": 11
↵       },
↵       {
↵           "Id": 211,
↵           "Name": "Mouse",
↵           "Description": "Microsoft 3 button Mouse with scroller",
↵           "PriceExVat": 199.95,
↵           "QtyInStock": 30
↵       },
↵       {
↵           "Id": 35,
↵           "Name": "TowerCase",
↵           "Description": "Mini Tower Case with 450W power unit",
↵           "PriceExVat": 600.95,
↵           "QtyInStock": 23
↵       },
↵       {
↵           "Id": 58,
↵           "Name": "Monitor",
↵           "Description": "17inch LCD monitor",
↵           "PriceExVat": 1499.95,
↵           "QtyInStock": 12
↵       },
↵       {
↵           "Id": 234,
↵           "Name": "Laptop",
↵           "Description": "Acer Core I5 Laptop",
↵           "PriceExVat": 6999.95,
↵           "QtyInStock": 7
↵       },
↵       {
↵           "Id": 789,
↵           "Name": "CarryCase",
↵           "Description": "Targus Carry Case",
↵           "PriceExVat": 399.95,
↵           "QtyInStock": 20
↵       },
↵       {
↵           "Id": 7,
↵           "Name": "Harddrive",
↵           "Description": "1TB External Hard Drive",
↵           "PriceExVat": 999.95,
↵           "QtyInStock": 100
↵       },
↵       {
↵           "Id": 51,
↵           "Name": "Projector",
↵           "Description": "HD Projector",
↵           "PriceExVat": 4995.95,
↵           "QtyInStock": 1
↵       },
↵       {
↵           "Id": 901,
↵           "Name": "Joystick",
↵           "Description": "Microsoft Joystick",
↵           "PriceExVat": 400.95,
↵           "QtyInStock": 2
↵       },
↵       {
↵           "Id": 500,
↵           "Name": "USBCable",
↵           "Description": "3m USB-toUSB cable",
↵           "PriceExVat": 80.95,
↵           "QtyInStock": 5
↵       }]
↵}"
setRequestHeader: function (a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this}
state: function (){return e}
status: 200
statusCode: function (a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this}
statusText: "OK"
success: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
then: function (a,b,c){i.done(a).fail(b).progress(c);return this}
__proto__: Object 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:01:35.333

所以我修补并找到了 parseJSON 方法。根据我在 Ajax 响应中看到的数据，我认为我可以获取 Ajax ResponseText（这是我需要的数据），将其存储在变量中，然后将其解析为 JSON。

Lo an Behold 工作产品：

```
 var products;           
        $(document).ready(function(){       
            $.ajax({
                type: 'GET',
                url: 'data/Products.json',
                data: { get_param: 'value'},
                dataType: 'json',
                complete: function(data){
                    products = data;
                }
            });
        });

        $(document).ajaxComplete(function(){            
            products = $.parseJSON(products.responseText); //Takes AJAX Reponse Text and parses it to JSON
            console.log(products.Products[0].Name);
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-18T04:08:44.837

你的`complete`函数有一个参数`data`，但实际上它是一个 jQuery XHR 对象。如果您的服务器将内容类型设置为`application/json`，您应该可以使用`products = data.responseJSON`. 另外，我会将该变量名称从更改`data`为更像`xhr`.

[https://api.jquery.com/jQuery.ajax/](https://api.jquery.com/jQuery.ajax/)

请参阅有关`complete`方法的部分以及该部分的 JSON 部分`Data Types`。

如果我是你，我会这样写：

```
$(document).ready(function(){       
  $.getJSON('data/Products.json?get_param=value').
    done(function(data){
      console.log(data.Products[0].name);
    });
}); 
```

有几点需要注意：

1.  摆脱全局产品变量。此代码异步运行，因此您不知道何时可以安全使用该变量。最好只使用 Promise 语法（done 方法）执行您的操作，因为一旦收到 Ajax 响应并且您的数据确实存在，该代码就会运行。
2.  仅`ajaxComplete`用于全局代码。它不适用于一次性的 Ajax 调用，因为它每次都会为每个 Ajax 调用运行。它用于全局处理，例如在发生错误时显示消息，或者在服务器以意味着您需要登录的方式响应时显示登录表单。
3.  Ajax 的`complete`回调返回一个 Jquery XHR 对象，所以`responseJSON`如果你想解析 json，你需要使用它的属性。
4.  使用 Promise 语法（done 方法）而不是回调，因为它看起来更简洁，并且组织总是有助于防止错误，并且如果您计划编写通用方法和重用代码（返回 Ajax 调用和调用方法），则更具可扩展性关闭它比传入许多回调函数作为选项要干净得多）。此外，第一个参数实际上`data`在这里，因此您不需要调用该`responseJSON`属性。
5.  在您的 Ajax 调用中抛弃不必要的选项。GET 是默认方法，因此没有必要指定它。数据类型是自动的，因此如果您的服务器发送正确的 Content-Type 标头，jquery 只会知道响应是 json。
6.  如果可以的话，坚持使用捷径。通过使用 getJSON，您获得了一些以前手动指定的属性，并且仍然显式指定它们，但是是以简写的方式。`getJSON`仍然调用`ajax`。
7.  避免对 GET 请求使用 JSON 正文。这不是很常见，通常最好只在 URL 中包含参数，因为当您通过地址栏访问 GET 请求时，浏览器会执行 GET 请求。主体通常仅用于 POST 或 PUT/PATCH。

# mysql - 在sql中查找两个组合列的平均值

> ID：14787561
> 
> 赞同：9
> 
> 时间：2013-02-09T11:20:18.377
> 
> 标签：mysql, sql, count, average

我想找到两列总数的平均值。我想计算 col1 的总数和 col2 的总数，然后找到平均值（它们有多少不同的行）。

我已经设法在这个[sqlfiddle](http://www.sqlfiddle.com/#!2/82193/1)中提出了一个解决方案（另见下文）这是最好的方法吗？我最初认为我需要使用 avg 函数，但无法使用它来解决。

```
 CREATE TABLE test (
        id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
        uid INT,
        col1 INT,
        col2 INT
    ) DEFAULT CHARACTER SET utf8 ENGINE=InnoDB;

    INSERT INTO test (id, uid, col1, col2) VALUES
    (1,5,8,12),
    (2,1,2,3),
    (3,1,2,33),
    (4,5,25,50),
    (5,5,22,3);

    (
    SELECT ((sum(col1) + sum(col2))/count(*))
    FROM test
      WHERE uid=5
    ) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-09T11:27:01.253

根据定义，`AVG(col1) = SUM(col1)/COUNT(*)`并且`AVG(col2) = SUM(col2)/COUNT(*)`，因此`(SUM(col1)+SUM(col2))/COUNT(*)`= `AVG(col1) + AVG(col2)`。

此外，加法的交换性给了我们`(SUM(col1)+SUM(col2))/COUNT(*) = SUM(col1+col2)/COUNT(*)`和因此`AVG(col1+col2)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T11:28:42.410

要使用 avg 函数，

```
SELECT avg(col1 + col2)
FROM test
WHERE uid=5; 
```

**[SQLFIDDLE 演示](http://www.sqlfiddle.com/#!2/82193/24/0)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T11:42:36.840

```
SELECT avg(col1 + col2) as avgtotal

FROM test
WHERE uid=5 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-11T11:10:24.933

我在这里得到了答案，所以我将添加此注释，这可能对其他人有所帮助：

```
1.avg(col1+col2) as avg_col1_plus_col2,
2.avg(col1) + avg(col2) as avg_col1_plus_avg_col2,
3.avg(col1+col2)/2 as avgTotal1, 
4.avg(col1)/2+avg(col1)/2 as avgTotal2 
```

正如 egyal 解释的那样，句子 1 等于句子 2，语法还可以，但从逻辑上讲它不是我们想要的结果，因此我们需要将平均值除以列数，如句子 3 和 4 中所示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-09T11:29:34.373

这是你想要的？

```
SELECT avg(col1 + col2)
FROM test
where uid = 5
group by uid 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-17T11:21:12.107

```
SELECT ((SUM(col1) + SUM(col2)) / (COUNT(col1) + COUNT(col2))) as a
FROM test
WHERE uid=5; 
```

# payment-processing - 信用卡定期付款

> ID：14787565
> 
> 赞同：1
> 
> 时间：2013-02-09T11:20:49.470
> 
> 标签：payment-processing, recurring-billing

我使用的网关是 Cardsave ( [http://www.cardsave.net](http://www.cardsave.net) )。我显然不能在我的服务器上存储信用卡，但是要将信用卡存储在他们的服务器上，需要进行初始交易。我正在编写一个计费管理网站，客户将从其他系统迁移到该网站。没有理由让他们的客户在计费周期之间付款。

我能想到的唯一解决方案是向信用卡支付小额款项（如 1 美元，PayPal 风格），然后在下一个计费周期将这笔款项返还给客户，或者退款。**这是正确的方法吗？**

这是处理每月定期“订阅”的常用方法，其中每月的数量是可变的，并且不会立即开始。例如，这是如何处理需要您的信用卡信息开始的试用期的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T21:11:31.470

[Visa 和 MasterCard 不再允许收取 1 美元的费用](http://community.developer.authorize.net/t5/Integration-and-Testing/How-to-do-AUTH-ONLY-for-Visa-Cards-to-avoid-quot-Misuse-of/m-p/309#M221)。您可以进行 $0 授权，因此如果您的处理器允许，您可能可以执行您的原始计划。

一些支付网关提供商，如 Authorize.Net，提供的服务允许您创建支付配置文件并随时收取任何金额的费用。他们的服务称为[客户信息管理器](http://developer.authorize.net/api/cim/)。您应该查看您的提供商是否提供类似的服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T06:22:24.113

对于**Cardsave**支付网关，您有**自动订阅**和**交叉参考交易代码示例**

有关参考，请查看此链接：[单击此处](http://www.cardsave.net/dev-downloads#Direct)

# c# - 从 ListBox 中选择并显示要在 PictureBox 中显示的图像文件？C＃

> ID：14787566
> 
> 赞同：1
> 
> 时间：2013-02-09T11:20:50.047
> 
> 标签：c#, listbox, picturebox

我正在尝试使我的列表框（**lstFiles**）可选择，因此它能够在图片框（图片框1）中显示图像文件并在从列表**框中**选择另一个文件后进行更改，我创建了一个可以拍摄照片的网络摄像头程序，但遇到问题显示图像。

我尝试了很多方法，但无法通过从列表框中选择文件名来使其工作

任何帮助将不胜感激谢谢

这是我到目前为止所拥有的：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Drawing.Imaging;
using System.Runtime.InteropServices;
using System.Text;
using System.Windows.Forms;
using Pinvoke;
using System.IO;

namespace TestAvicap32
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            InitializeDevicesList();
        }

        private void InitializeDevicesList()
        {
            splitContainer1.Panel1.Enabled = true;
            splitContainer1.Panel2.Enabled = false;

            foreach (CaptureDevice device in CaptureDevice.GetDevices())
            {
                cboDevices.Items.Add(device);
            }

            if (cboDevices.Items.Count > 0)
            {
                cboDevices.SelectedIndex = 0;
            }
        }

        private void btnStart_Click(object sender, EventArgs e)
        {
            int index = cboDevices.SelectedIndex;
            if (index != -1)
            {
                splitContainer1.Panel1.Enabled = false;
                splitContainer1.Panel2.Enabled = true;
                ((CaptureDevice)cboDevices.SelectedItem).Attach(pbImage);
            }
        }

        private void btnStop_Click(object sender, EventArgs e)
        {
            splitContainer1.Panel1.Enabled = true;
            splitContainer1.Panel2.Enabled = false;
            ((CaptureDevice)cboDevices.SelectedItem).Detach();
        }

        private void btnSnapshot_Click(object sender, EventArgs e)
        {
            try
            {
                Image image = ((CaptureDevice)cboDevices.SelectedItem).Capture();
                image.Save(@"c:\webcapture\" + DateTime.Now.ToString("HH.mm.ss-dd-MM-yy") + ".png", ImageFormat.Png);

            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.ToString(), "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }   
        }

        private void btntimer_Click(object sender, EventArgs e)
        {
            timer1.Enabled = true;
            btntimerstop.Visible = true;
            btntimer.Visible = false;
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            Image image = ((CaptureDevice)cboDevices.SelectedItem).Capture();
            image.Save(@"c:\webcapture\" + DateTime.Now.ToString("HH.mm.ss-dd-MM-yy") + ".png", ImageFormat.Png);
        }

        private void btntimerstop_Click(object sender, EventArgs e)
        {
            timer1.Enabled = false;
            btntimer.Visible = true;
            btntimerstop.Visible = false;
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            btntimerstop.Visible = false;

            foreach (DriveInfo di in DriveInfo.GetDrives())
                lstDrive.Items.Add(di);
        }

        private void lstFolders_SelectedIndexChanged(object sender, EventArgs e)
        {
            lstFiles.Items.Clear();

            DirectoryInfo dir = (DirectoryInfo)lstFolders.SelectedItem;

            foreach (FileInfo fi in dir.GetFiles())
                lstFiles.Items.Add(fi);
        }

        private void lstDrive_SelectedIndexChanged(object sender, EventArgs e)

        {
            lstFolders.Items.Clear();

            try
            {
                DriveInfo drive = (DriveInfo)lstDrive.SelectedItem;

                foreach (DirectoryInfo dirInfo in drive.RootDirectory.GetDirectories())
                    lstFolders.Items.Add(dirInfo);
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }

        private void lstFiles_SelectedIndexChanged(object sender, EventArgs e)
        {

        }

        private void pictureBox1_Click(object sender, EventArgs e)
        {

        }

        private void openFileDialog1_FileOk(object sender, CancelEventArgs e)
        {
            //I don't know If I need this?
        }

        }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:39:16.247

尝试如下...它会工作....

```
private void lstFiles_SelectedIndexChanged(object sender, EventArgs e)
{
  pictureBox1.Image = Image.FromFile(((FileInfo)lstFiles.SelectedItem).FullName);
} 
```

# html - 使用 Twitter 引导响应 css 时的边框对齐问题

> ID：14787571
> 
> 赞同：-1
> 
> 时间：2013-02-09T11:21:26.897
> 
> 标签：html, css, responsive-design

我在[Bootstrap Tutorial for Blog Design](http://www.9lessons.info/2012/03/bootstrap-tutorial-for-blog-design.html)上找到了这篇文章。我计划将它用于我的一个项目，以提供它提供的响应式布局。我在为[demo](http://demos.9lessons.info/bootstrap/index.html)托管的页面中发现了一个问题。已附上截图![截屏](../Images/3ecaebc97d33a1d289b543a1a1596dde.png) “Facebook Timeline Design using JQuery and CSS”页面中的第一个帖子落在了背景边框之外[已标记为蓝色]。[不是预期的结果]页面中的其余帖子落在了在边界内，这是预期的行为[已将其标记为绿色]。有什么办法可以解决第一个帖子落在背景边框之外的问题。我已经在 IE、firefox 和 chrome 中对此进行了测试，结果相同。[在这里](http://jsbin.com/anuvej/2/edit)创建了一个jsbin页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:29:15.247

在 css 文件中，它声明第一个跨度元素在左侧没有边距。

第 232 行的 bootstrap-responsive.css：

```
.row-fluid [class*="span"]:first-child { 
    margin-left: 0px;
} 
```

第 419 行的 bootstrap.css：

```
.row-fluid [class*="span"]:first-child { 
    margin-left: 0px;
} 
```

删除或注释掉这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:30:04.670

您可以使用 jquery 选择器解决它

```
$('.row > [class*="span"]:first-child').css({"padding-left":"20px"}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T11:35:05.713

添加此样式表（*首选在底部*）

```
.row > [class*="span"]:first-child {
    padding-left: 20px;
} 
```

如果你愿意，你可以添加这个 jQuery

```
$('.row > [class*="span"]:first-child').css('padding-left','20px'); 
```

# android - 我可以将我的 Play 商店 apk 文件上传到其他 android 商店吗？

> ID：14787572
> 
> 赞同：0
> 
> 时间：2013-02-09T11:21:27.630
> 
> 标签：android, app-store, google-play, amazon-appstore

我在 Play Store 上成功上传了我的第一个免费应用程序现在我有一个非常基本的问题。我也可以将我的 Play 商店**apk 文件**上传到**其他 android 商店**吗？例如

1.  Play 商店（安卓市场）
2.  亚马逊应用商店
3.  Opera 移动应用商店
4.  和AppStore
5.  获取罐子
6.  Handango OnlyAndroid Superstore by Mobihand
7.  英赛德市场
8.  阿波克
9.  SlideME YAAM 市场

**Play 商店**或任何其他商店对在该商店上传相同的标志**App apk**是否有任何**限制或反对**？如果有任何限制，那么我应该怎么做？

 ***** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T11:28:00.543

每个市场可能都有自己的限制。您必须阅读和研究其中的每一个。例如，我可以告诉您，“亚马逊的 AppStore”会审核您的应用程序，如果它有一些指向 Google Play 市场或其他竞争对手（Barnes & Nobel）的链接，则不会批准它。此外，您不能在 Amazon android 设备中使用 Google 服务（例如地图或应用内计费），因此您应该知道这是另一个限制。如前所述 - 您必须研究每个市场。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T11:27:03.063

**正如**网站在[Google Play 之外分发应用程序中所说的那样](http://support.google.com/googleplay/android-developer/answer/142471?hl=en&ref_topic=2364761)

> 通过 Google Play 分发您的应用程序是非排他性的；您也可以选择通过其他渠道分发您的应用程序。请记住，在商店中发布的版本必须符合所有 Google Play 政策。

您还可以阅读[Google Play 的政策，](http://support.google.com/googleplay/android-developer/topic/2364761?hl=en&ref_topic=2365624)了解简短且记录良好的线路。

希望它能清除您对问题的看法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T11:24:16.377

不，当您将应用上传到 Play 商店时没有这样的条款。但您只能上传到可靠和值得信赖的市场。您的 apk 文件可能已泄露。****

# java - HTTP 状态 500 - Servlet 执行在 tomcat7 中引发异常

> ID：14787573
> 
> 赞同：1
> 
> 时间：2013-02-09T11:21:38.467
> 
> 标签：java, jakarta-ee, servlets, tomcat7

我正在尝试检索数据库中的所有元素并显示在网页中。但现在它正在产生错误`HTTP Status 500 - Servlet execution threw an exception`。谁能告诉我如何解决这个错误。请帮我。

堆栈跟踪 ：

```
javax.servlet.ServletException: Servlet execution threw an exception
   root cause

java.lang.NoClassDefFoundError: com/google/gson/JsonObject
skypark.RetriveIm.doGet(RetriveIm.java:64)
javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
  root cause

java.lang.ClassNotFoundException: com.google.gson.JsonObject
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
skypark.RetriveIm.doGet(RetriveIm.java:64)
javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 
```

**完整的源代码在[这个](https://stackoverflow.com/questions/14777159/retrieving-images-using-jquery-and-servlet-produces-http-status-500-error)问题中**

这是`#64`行`Gson gson=new Gson();` 请帮助我........谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:22:55.627

将 Gson 的库添加到您的类路径中。到您的 webapp (WEB-INF/lib) 或到您的 AS 的类路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T11:23:28.513

您正在针对提供（或依赖）的 jar 进行*编译*`com.google.gson.JsonObject`，但未在运行时*部署*它。它需要被部署，以便类加载器在运行时可以找到/加载该类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T14:18:53.560

假设您使用 Eclipse 并将项目配置为 Dynamic Web Project 右键单击​​您的项目 --> 选择`configure build path`--> now `click on add jars button`--> 和`select the Gson jar`--> 单击`OK`。

`Republish`项目和`restart`服务器。

否则将罐子添加到`WEB-INF\lib directory`战争内部

或者直接进入 tomcat 中的 Deployed 位置，但在提到的同一目录中

# php - 如何以正确的方式索引查询

> ID：14787575
> 
> 赞同：0
> 
> 时间：2013-02-09T11:21:45.720
> 
> 标签：php, mysql, optimization, indexing

我正在尝试使我的数据库更加优化，并且正处于索引它的开始，但不知道如何正确地做到这一点。

我有这个查询：

```
$year = date("Y");
$thisYear = $year;
//$nextYear = $thisYear + 1; 
$sql = mysql_query("SELECT SUM(points) as userpoints
                                          FROM ".$prefix."_publicpoints
                                          WHERE date BETWEEN '$thisYear" . "-01-01' AND '$thisYear" . "-12-31' AND fk_player_id = $playerid");
$row = mysql_fetch_assoc($sql); 
$userPoints = $row['userpoints'];

$sql = mysql_query("SELECT 
                       fk_player_id
                    FROM ".$prefix."_publicpoints
                    WHERE date BETWEEN '$thisYear" . "-01-01' AND '$thisYear" . "-12-31'
                    GROUP BY fk_player_id
                    HAVING SUM(points) > $userPoints");
$row = mysql_fetch_assoc($sql);
$userWrank = mysql_num_rows($sql)+1; 
```

我不知道如何索引这个？我已经尝试索引 fk_player_id 但它仍然查看所有行（287937）。

我已将日期字段编入索引，这在 EXPLAIN 中返回：

**1 SIMPLE nf_publicpoints range IDXdate IDXdate 3 NULL 143969 使用 where 和 push 条件；使用临时...**

我也有 2 次呼叫同一张桌子......可以一次完成吗？

我如何索引这个和/或它可以做得更聪明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:37:22.460

您绝对应该花一些时间阅读索引，关于它的文章很多，了解正在发生的事情很重要。

从广义上讲，索引对表的行进行排序。

为简单起见，假设一个表只是一个大的 CSV 文件。每当插入一行时，它都会插入到最后。所以表的“自然”顺序就是插入行的顺序。

想象一下，您在一个非常基本的电子表格应用程序中加载了该 CSV 文件。这个电子表格所做的只是显示数据，并按顺序对行进行编号。

现在假设您需要在第三列中找到所有具有某个值“M”的行。鉴于你有什么可用的，你只有一个选择。您扫描表检查每一行的第三列的值。如果您有很多行，则此方法（“表扫描”）可能需要很长时间！

现在想象一下，除了这个表之外，你还有一个索引。此特定索引是第三列中值的索引。该索引以某种有意义的顺序（例如，按字母顺序）列出了第三列中的所有值，并且为每个值提供了该值出现的行号列表。

现在您有了一个很好的策略来查找第三列的值为 M 的所有行！例如，您可以执行二进制搜索！虽然表扫描需要您查看 N 行（其中 N 是行数），但二进制搜索只需要您查看 log-n 索引条目，在最坏的情况下。哇，那肯定容易多了！

当然，如果你有这个索引，并且你正在向表中添加行（最后，因为这就是我们的概念表的工作方式），你需要每次都更新索引。因此，您在编写新行时会做更多的工作，但在搜索某些内容时会节省大量时间。

因此，一般而言，索引会在读取效率和写入效率之间进行权衡。在没有索引的情况下，插入可以非常快——数据库引擎只是在表中添加一行。添加索引时，引擎必须在执行插入时更新每个索引。

另一方面，读取变得更快。

希望这涵盖了您的前两个问题（正如其他人所回答的那样——您需要找到正确的平衡点）。

您的第三种情况要复杂一些。如果您使用 LIKE，索引引擎通常会帮助您将读取速度提高到第一个“%”。换句话说，如果您选择 WHERE column LIKE 'foo%bar%'，数据库将使用索引查找列以“foo”开头的所有行，然后需要扫描该中间行集以找到子集包含“栏”。SELECT ... WHERE column LIKE '%bar%' 不能使用索引。我希望你能明白为什么。

最后，您需要开始考虑不止一列的索引。这个概念是相同的，并且行为类似于 LIKE 的东西——本质上，如果你在 (a,b,c) 上有一个索引，引擎将继续尽可能地从左到右使用索引。因此，对 a 列的搜索可能会使用 (a,b,c) 索引，就像对 (a,b) 的搜索一样。但是，如果您在搜索 WHERE b=5 AND c=1)，引擎将需要进行全表扫描

希望这有助于阐明一点点，但我必须重申，您最好花几个小时挖掘深入解释这些事情的好文章。阅读特定数据库服务器的文档也是一个好主意。查询计划者实现和使用索引的方式可以有很大的不同。

更多信息和示例访问这里：http: [//blog.sqlauthority.com/category/sql-index/](http://blog.sqlauthority.com/category/sql-index/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:36:50.700

为什么不索引日期列，看看这是如何在查找中评估的主要标准？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T11:28:15.360

尝试在日期列上创建索引，索引 fk_payer_id 对这个查询没有帮助。如果不起作用 - 粘贴解释...

有关 Mysql 中索引的更多信息，请参见此处：[http ://hackmysql.com/case1](http://hackmysql.com/case1)

# c# - 对象引用未设置为对象的实例。为什么 .NET 不显示哪个对象是“null”？

> ID：14787580
> 
> 赞同：105
> 
> 时间：2013-02-09T11:22:17.973
> 
> 标签：c#, .net

关于这个 .NET 未处理的异常消息：

> 你调用的对象是空的。

为什么.NET 不显示哪个对象是`null`？

我知道我可以检查`null`并解决错误。但是，为什么 .NET 不帮助指出哪个对象具有空引用以及哪个表达式触发了`NullReferenceException`?

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2013-02-09T11:53:56.733

（有关 Visual Studio 2017 中新的异常帮助程序的信息，请参阅此答案的结尾）

* * *

考虑这段代码：

```
String s = null;
Console.WriteLine(s.Length); 
```

这将在第二行抛出 a`NullReferenceException`并且您想知道为什么 .NET 没有告诉您`s`在抛出异常时它是 null。

要了解为什么您没有获得该信息，您应该记住执行的不是 C# 源代码，而是 IL：

```
IL_0001：ldnull      
IL_0002: stloc.0 // 秒
IL_0003: ldloc.0 // 秒
IL_0004: callvirt System.String.get_Length
IL_0009：调用 System.Console.WriteLine

```

它是`callvirt`抛出 的操作码，`NullReferenceException`当评估堆栈上的第一个参数是空引用（使用 加载的那个`ldloc.0`）时，它会这样做。

如果 .NET 应该能够判断它`s`是一个空引用，它应该以某种方式跟踪评估堆栈上的第一个参数源自表单`s`。在这种情况下，我们很容易看出它是`s`null 但是如果该值是另一个函数调用的返回值并且没有存储在任何变量中怎么办？无论如何，这种信息不是您想要在 .NET 虚拟机等虚拟机中跟踪的内容。

* * *

为了避免这个问题，我建议您在所有公共方法调用中执行参数 null 检查（当然，除非您允许 null 引用）：

```
public void Foo(String s) {
  if (s == null)
    throw new ArgumentNullException("s");
  Console.WriteLine(s.Length);
} 
```

如果将 null 传递给该方法，则会得到一个异常，该异常准确地描述了问题所在（即`s`null）。

* * *

四年后，Visual Studio 2017 现在有了一个新的异常帮助器，它会在`NullReferenceException`抛出 a 时尝试判断什么是 null。当方法的返回值为 null 时，它甚至可以为您提供所需的信息：

[![Visual Studio 2017 异常助手](../Images/2eb92f94043f79c9dbd49a489ecd75a6.png)](https://i.stack.imgur.com/Mv5gE.png)

请注意，这仅适用于 DEBUG 构建。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-09T11:41:11.787

您希望以下情况下的错误消息是什么样的？

```
AnyObject.GetANullObject().ToString();

private object GetANullObject()
{
  return null;
} 
```

这里没有要报告的变量名！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T11:41:48.303

嗯，这取决于微软的工程师来回答。但是您显然可以使用调试器并添加监视来找出其中哪些有问题。

但是，例外情况是`NullReferenceException`引用*不存在*。您根本无法获取尚未创建的对象。

`but why .NET don't tell us which object is null?` 因为它不知道哪个对象是空的。该对象根本不存在！

我说的情况也是如此，C# 被编译为 .NET IL 代码。.NET IL 代码不知道名称或表达式。它只知道引用及其位置。在这里，你也无法得到不存在的东西。表达式或变量名不存在。

理念：如果你一开始就没有鸡蛋，你就不能做煎蛋卷。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-07T05:48:29.203

不确定，但这可能是因为.Net 不知道它是预定义的类还是用户定义的。如果它是预定义的，那么它可以为空（如占用 2 个字节的字符串），但如果它是用户定义的，那么我们必须创建它的一个实例，以便它知道这个对象将占用这么多内存。因此，它在运行时引发错误。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-08-05T21:12:36.190

好问题。消息框简直没用。即使它与引用定义相距一英里，某些类或程序集或文件或其他信息也会比它们当前提供的更好（阅读：总比没有好）。

您最好的选择是在带有调试信息的调试器中运行它，并且您的 IDE 将在有问题的行处中断（更清楚地表明有用的信息实际上是可用的）。

# java - 如何确保在repaint() 之前清除了Jframe 的所有内容？

> ID：14787581
> 
> 赞同：0
> 
> 时间：2013-02-09T11:22:25.960
> 
> 标签：java

如何确保在repaint() 之前清除了Jframe 的所有内容？做类似秒表之类的事情只是结果是绘制了一个相互重叠的数字

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:26:16.610

如果我很好地理解了您的问题，您需要做的是绘制一个背景颜色与您想要的区域一样大的矩形。这有效地“清除”了该区域，您可以再次在干净的“画布”上绘制

# git - Git 显示，在新克隆后显示所有文件已更改

> ID：14787583
> 
> 赞同：2
> 
> 时间：2013-02-09T11:22:34.197
> 
> 标签：git

正如问题所说，在我重新克隆了一个 repo 之后，一个 git show 显示了很多文件已更改，但我还没有触及任何文件。git diff 什么也没给出。

我需要进行更改并使用 git show 查看更改，但只有我自己的更改。git show 目前不允许我这样做。

我检查了以下问题，但我没有 .gitattributes 文件。

[git clone 后直接显示为已修改的文件](https://stackoverflow.com/questions/5009096/files-showing-as-modified-directly-after-git-clone)

* * *

编辑：在 linux 上使用 git。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T11:26:36.683

`git show`用于显示 HEAD 和 HEAD~1 之间的所有变化。

我认为您正在寻找的是`git diff --cached`. （假设您已经使用 暂存了您的更改`git add`）

# javascript - 有没有办法从位置（x，y 绳索）中找到 div 名称

> ID：14787585
> 
> 赞同：16
> 
> 时间：2013-02-09T11:22:37.970
> 
> 标签：javascript, jquery, html

当您知道 div 名称时，很容易找到 div 的位置。但是，当我只知道屏幕的 X/Y 线时，有没有一种简单的方法来获取 div id？

在名为#HarbourRadar 的板（另一个 div）上名为“#Items1”到“#Items50”的 div 范围内不会有重叠的 div。每个 div #Items 中可以包含多个堆叠图像。

无论如何，任何从某个位置找到 div 的提示都将不胜感激。

以下代码（取自下面的答案）获取 div #HarbourRadar 的 id，这是部分正确的，因为 div #marker 在那个上面分层，但不返回选择的 div #marker -即具有较高Z-index 的一种。

```
var pos = $("#marker").position();
alert(document.elementFromPoint(pos.left, pos.top).id); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-09T11:25:51.240

是的，可以使用该`document.elementFromPoint`方法。
这是[Microsoft](http://msdn.microsoft.com/en-us/library/ms536417%28VS.85%29.aspx)记录的方式。这是[Mozilla 文档](https://developer.mozilla.org/en-US/docs/DOM/document.elementFromPoint)。
该功能几乎完全兼容，正如您在[此浏览器比较](http://www.quirksmode.org/dom/w3c_cssom.html#documentview)中看到的那样。

以下是 MDN 文档中的一些示例代码：

```
function changeColor(newColor) {
  elem = document.elementFromPoint(2, 2);
  elem.style.color = newColor;
}
```

```
<p id="para1">Some text here</p>
<button onclick="changeColor('blue');">blue</button>
<button onclick="changeColor('red');">red</button>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T11:48:23.497

看看这个现有的 StackOverflow 对话，您可能会发现这会有所帮助：

[在Javascript中确定鼠标指针位于哪个元素之上](https://stackoverflow.com/questions/8813051/determine-which-element-the-mouse-pointer-is-on-top-of-in-javascript)

这是使用 javascript 函数`document.elementFromPoint`，并有一个很好的演示，展示了一个工作示例。

jsFiddle URL 是：http: [//jsfiddle.net/MPTTp/](http://jsfiddle.net/MPTTp/)

小提琴中的代码：

```
$(window).click(function(e) {
    var x = e.clientX, y = e.clientY,
        elementMouseIsOver = document.elementFromPoint(x, y);

    alert(elementMouseIsOver);
}); 
```

# python - base64 为 Mixpanel API 像素跟踪器编码 JSON

> ID：14787587
> 
> 赞同：0
> 
> 时间：2013-02-09T11:23:00.687
> 
> 标签：python, mixpanel

根据[Mixpanel doc](https://mixpanel.com/docs/api-documentation/pixel-based-event-tracking)，我需要对我的 json 数组进行 base64 处理，然后再将其发送到他们的 API 端点

```
json = {"event": "e-mail opened", 
        "properties": {
        "distinct_id": "28224", 
        "token": "494f5d201963457e632d463d1d4745e4", 
        "time": int(time.time()), 
        "campaign": "gameweek 27"
            }
    } 
```

根据文档，我需要这样发送

> http://api.mixpanel.com/track/?data=[BASE_64_JSON_EVENT]&ip=1&img=1

这是我将 dict 转换为 base64 并发送它的 python 代码。我明白了

`data = base64.b64encode(json.dumps(json)) url = 'http://api.mixpanel.com/track/?data=%d&ip=1&img=1'%data requests.get(url)`

我的问题是它不跟踪任何东西。[如果我使用此在线转换器](http://www.percederberg.net/tools/text_converter.html)转换相同的字典并手动构建 url，它就可以工作。

所以可能有些东西在我的编码中不起作用，但是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T14:48:04.053

不确定这是否是问题中的错字，而不是：

```
url = 'http://api.mixpanel.com/track/?data=%d&ip=1&img=1'%data 
```

它应该是

```
url = 'http://api.mixpanel.com/track/?data=%s&ip=1&img=1'%data 
```

正如`%d`预期的那样，是一个数字，而不是一个`%s`字符串

# xcode - 使用 XCode 在 Mac OS X 上 GLSL 应用程序的奇怪行为

> ID：14787588
> 
> 赞同：0
> 
> 时间：2013-02-09T11:23:13.617
> 
> 标签：xcode, opengl, glsl

我正在尝试在 Mac OS X 上的 XCode 中设置一个有效的 OpenGL/GLUT/GLSL 示例。

这是我到目前为止所做的：

1.  创建一个新的终端项目
2.  在目标构建阶段链接 Cocoa.framework、OpenGL.framework 和 GLUT.framework
3.  编写一个简单的OpenGL/glut/glsl示例程序
4.  将“复制文件”构建阶段添加到目标可执行文件，将目标设置为可执行文件并将着色器源文件添加到该构建阶段
5.  运行程序。

该代码在另一台 unix 机器上运行良好，而且它也是由我的课堂讲师为 Mac 编写的，因此代码应该没有问题。我认为我的项目设置存在错误。

我遇到问题的奇怪行为是：当我调整 glut 窗口的大小时，显示的图像被破坏，并且仅有时会显示正确的图像。我可以根据要求发布图片链接。

找到着色器源文件。这只是我担心的奇怪的图形行为。

我的着色器代码：顶点着色器：

```
#version 150
in  vec3 in_Position;
void main(void)
{
gl_Position = vec4(in_Position, 1.0);
} 
```

片段着色器：

```
#version 150
out vec4 out_Color;
void main(void)
{
out_Color = vec4(1.0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T06:25:53.903

在这种情况下，您可能需要设置一个 GLUT *reshape*回调，该回调在窗口中调用。在该回调中，您通常会更新一些内容：

*   视口
*   你的投影变换（如果你正在使用一个）

GLUT reshape 函数的一个常见简单实现是：

```
void
reshape( int width, int height )
{
    glViewport( 0, 0, width, height );
    // Update projection transform, usually including new window
    //   aspect ratio: width / height
} 
```

您可以`reshape`像其他 GLUT 回调一样通过调用来注册`glutReshapeFunc`

# java - Android SDK：处理程序导致某些设备崩溃

> ID：14787592
> 
> 赞同：0
> 
> 时间：2013-02-09T11:23:46.777
> 
> 标签：java, android, android-asynctask, handler

我有一个处理程序，用于在指定的间隔循环中显示图像，在到达最后一个图像时，它会返回到第一个正确的图像。但是，我遇到了问题，因为它导致某些设备崩溃并使 CPU 使用率显着上升，我只是想知道代码有什么问题？

我在片段顶部像下面这样实例化它：

```
final public static Handler handler = new Handler();
boolean isRunning = false; 
```

然后在 AsyncTask 的 onPostExecute 部分，我有以下代码：

```
 @Override
         protected void onPostExecute(Void v) {

            if(!isRunning) {
             Runnable runnable = new Runnable() {

                @Override
                public void run() {

                    anImageView.setVisibility(View.VISIBLE);
                    isRunning = true;
                    counter++;

                    //imageDownloader.download(data.get(i).getImageURL(), anmageView);
                    if(TabsViewPagerFragmentActivity.theImages !=null && TabsViewPagerFragmentActivity.theImages.size() > 0){
                    Bitmap anImage = TabsViewPagerFragmentActivity.theImages.get(i);
                    anImageView.setImageBitmap(anImage);
                    }

                    i++;
                    if(i>TabsViewPagerFragmentActivity.theImages.size()-1)
                    {
                    i=0;    
                    }

                    handler.postDelayed(this, 1500); 
                }

             };
             handler.postDelayed(runnable, 0);

          }  

         } 
```

上面的 AsyncTask 在 onCreate() 方法中被调用。其次，我有一个刷新按钮，可以重新下载这些图像，以便在它们定期更改时获取最新的图像。因此，我在刷新按钮上附加了一个 onClick() 事件。这也可以正常工作，但这里是调用的代码：

```
@Override
     protected void onPostExecute(Void v) {

         for(int i=0;i<data.size()-1;i++) {

            Bitmap anImage = getBitmapFromURL(data.get(i).getImageURL());
            theImagesRefreshed.add(anImage);

         }

         if(!isRunning) {
             Runnable runnable = new Runnable() {

                @Override
                public void run() {

                    anImageView.setVisibility(View.VISIBLE);
                    isRunning = true;
                    counter++;

                    //imageDownloader.download(data.get(i).getImageURL(), anImageView);
                    if(theImagesRefreshed !=null && theImagesRefreshed.size() > 0){
                    Bitmap anImage = theImagesRefreshed.get(i);
                    anImageView.setImageBitmap(anImage);
                    }

                    i++;
                    if(i>theImagesRefreshed.size()-1)
                    {
                    i=0;    
                    }

                    handler.postDelayed(this, 1500); 
                }

             };
             handler.postDelayed(runnable, 0);

         }

     } 
```

我认为处理程序设置不正确并导致性能问题。任何人都可以看到这段代码有什么问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:43:31.710

您需要在线程中使用处理程序时调用 Looper.prepare() 。所以在创建 Runnable 实例后编写**Looper.prepare()**

# java - oracle 直接从 URL 代码读取无法正常工作

> ID：14787607
> 
> 赞同：0
> 
> 时间：2013-02-09T11:26:05.467
> 
> 标签：java, url

我正在尝试学习如何通过 Java 程序从网站下载图像和文件。下面的代码是从[http://docs.oracle.com/javase/tutorial/networking/urls/readingURL.html](http://docs.oracle.com/javase/tutorial/networking/urls/readingURL.html)复制而来的。该程序应该显示来自提供的 url 的 html 文件代码。

从该站点引用：“当您运行程序时，您应该会在命令窗口中滚动查看位于[http://www.oracle.com/](http://www.oracle.com/)的 HTML 文件中的 HTML 命令和文本内容。”

我的问题是它适用于某些网站，但不适用于 interfacelift.com。它不显示该网站的任何内容。我试图找出原因。

```
import java.net.*;
import java.io.*;

public class URLReader {
public static void main(String[] args) throws Exception {

    URL oracle = new URL("http://interfacelift.com/");
    BufferedReader in = new BufferedReader(
    new InputStreamReader(oracle.openStream()));

    String inputLine;
    while ((inputLine = in.readLine()) != null)
        System.out.println(inputLine);
    in.close();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:11:27.870

我怀疑该网站拒绝向您发送任何内容，因为它无法识别您正在使用网络浏览器。一些网站不喜欢自动网络抓取工具，例如您的程序试图读取他们的网页，因此选择阻止它们。

当我尝试使用 Python 发出相同的请求时，我收到了 403 Forbidden 错误。我想你的 Java 应用程序会遇到同样的错误：

```
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import urllib2
>>> urllib2.urlopen("http://interfacelift.com/").read()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python27\lib\urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "C:\Python27\lib\urllib2.py", line 406, in open
    response = meth(req, response)
  File "C:\Python27\lib\urllib2.py", line 519, in http_response
    'http', request, response, code, msg, hdrs)
  File "C:\Python27\lib\urllib2.py", line 444, in error
    return self._call_chain(*args)
  File "C:\Python27\lib\urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "C:\Python27\lib\urllib2.py", line 527, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
urllib2.HTTPError: HTTP Error 403: Forbidden 
```

# php - 在运行 SimpleAuth.php 时，它在 restler 中给出了致命错误

> ID：14787610
> 
> 赞同：1
> 
> 时间：2013-02-09T11:26:18.077
> 
> 标签：php, restler

我正在运行以下 url 并尝试运行 SimpleAuth.php

`http://localhost/restler/public/examples/nof/SimpleAuth.php` 它给了

```
Fatal error: Interface 'Luracast\Restler\iAuthenticate' not found in C:\wamp\www\Restler\public\examples\nof\SimpleAuth.php on line 5 
```

SimpleAuth.php 的内容

```
use Luracast\Restler\iAuthenticate;

class SimpleAuth implements iAuthenticate
{
    const KEY = 'rEsTlEr2';

    function __isAllowed()
    {
        return isset($_GET['key']) && $_GET['key'] == SimpleAuth::KEY ? TRUE : FALSE;
    }

    function key()
    {
        return SimpleAuth::KEY;
    }
} 
```

iAuthenticate.php

```
namespace Luracast\Restler;

interface iAuthenticate extends iFilter{  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:42:57.203

您是否正确定义了命名空间是 iAuthenticate 是否有效且已定义

您是否正在自动加载命名空间 Luracast\Restler\iAuthenticate ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T12:05:41.327

在我的测试中它工作得很好

看这个

```
命名空间 Luracast\Restler;

接口 iAuthenticate {

}

使用 Luracast\Restler\iAuthenticate as ia；

类 SimpleAuth 实现 ia {

    常量键 = 'rEsTlEr2';

    函数 __isAllowed() {
        返回 isset($_GET['key']) && $_GET['key'] == SimpleAuth::KEY ? 真假;
    }

    功能键（）{
        返回 SimpleAuth::KEY；
    }

}

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T13:26:35.090

看起来你直接调用了你不应该做的`C:\wamp\www\Restler\public\examples\nof\SimpleAuth.php'，除非你包含restler.php，否则它不会工作

确保您的 index.php 正确包含 restler.php，一旦这样做，我们的自动加载器应该能够加载 'Luracast\Restler\iAuthenticate' 就好了。

您不应该尝试自己创建restler api 类。

# php - 在php中显示来自mysql的数据

> ID：14787612
> 
> 赞同：0
> 
> 时间：2013-02-09T11:26:32.030
> 
> 标签：php, mysql

我是 php 和 mysql 的初学者，我在 php 中创建了一个 HTML 表显示名称小时日期并向我显示包含字段“名称”“小时”“日期”的数据库表数据库的名称是 androidhive 和表名是产品

我的代码是：

```
<?php
include("connectbd.php"); //importamos el archivo para la coneccion a la base de datos

$res=mysql_query("SELECT * FROM products",$link); //Hacemos la consulta
?>
<html>
<head></head>
<body>
<?php
echo"<table><tr><td>Nombre</td><td>hora<td>fecha</td></tr>" //Hacemos una tabla html para ordenar los datos

while($row=mysql_fetch_array($res)){ //Guardaremos los datos en un array llamado $row cada indice del array sera el nombre del campo "Nombre","Apellidos", "Email", "Id"
echo"<td>".$row["Nombre"]." ".$row["hora"]."".$row["fecha"]</td>"; //le pasamos el id a la pagina del link para que reconosca el dato
}
echo"</table>";
?>
</body>
</html> 
```

错误是尖叫：

> ( ! ) 忽略错误抑制 解析错误：语法错误，意外的 'while' (T_WHILE)，期待 ',' 或 ';' 在第 13 行的 C:\wamp\www\droidlogin\citas.php

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T11:29:57.807

这一行：

```
echo"<table><tr><td>Nombre</td><td>hora<td>fecha</td></tr>" 
```

最后需要一个`;`：

```
echo"<table><tr><td>Nombre</td><td>hora<td>fecha</td></tr>"; 
```

和这个：

```
echo"<td>".$row["Nombre"]." ".$row["hora"]."".$row["fecha"]</td>"; 
```

有一个*未封闭的附件*，意思是`."`剩下一个：

```
echo"<td>".$row["Nombre"]." ".$row["hora"]."".$row["fecha"]."</td>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:31:11.090

试试这个：

```
 echo"<td>".$row["Nombre"]." ".$row["hora"]." ".$row["fecha"]."</td>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T11:32:17.403

代替 ：

```
echo"<td>".$row["Nombre"]." ".$row["hora"]."".$row["fecha"]</td>"; //le pasamos el id a la pagina del link para que reconosca el dato 
```

到

```
echo"<td>".$row["Nombre"]." ".$row["hora"]."".$row["fecha"]."</td>"; //le pasamos el id a la pagina del link para que reconosca el dato 
```

失踪`."`后`$row["fecha"]`

# jquery - 与 jQuery 的 .Closest 相对（Top/Far-Most？）

> ID：14787618
> 
> 赞同：18
> 
> 时间：2013-02-09T11:27:12.783
> 
> 标签：jquery, dom, parent, closest

我有一个代码，其中包含许多共享相同类名的子菜单。

这是一个结构：

```
.menu
  .sub-menu
  .sub-menu
    .sub-menu
    .sub-menu
  .sub-menu
    .sub-menu
      .elem
      .elem
  .sub-menu 
```

请注意，`.sub-menu`深度可能是无限的。

那么我如何实现这一点：`.elem`单击时，我想向上遍历 DOM 直到`.sub-menu`到达最顶部并对其应用样式。我知道`.closest()`and `.parent()`，`.find()`但我不知道 jQuery 是否有这样的功能，例如`.topMost(selector)`？

我能想到的唯一方法可能是运行一个循环并遍历`.closest('.sub-menu')`新元素，直到它的长度为零（这个类没有更多的父级，所以它必须是最顶层的）。但是，我认为应该有一个更实际的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-06-13T18:44:02.220

这个问题有点误导，因为 . `closest`() 可能会被误解。实际上，这意味着搜索树，直到找到第一个匹配项。所以相反的是向下搜索树直到找到匹配并且该方法是`first().`

要查找*所有*可能使用的后代`find()`。的反义词`find()`是`parents()`。

**最接近（）**（所有级别） *对于集合中的每个元素，通过测试元素本身并遍历其在 DOM 树中的祖先来获取与选择器匹配的第一个元素。*

**first()**（所有级别） *将匹配元素的集合减少到集合中的第一个*

**parents()**（所有级别） *获取当前匹配元素集中每个元素的祖先，可选地由选择器过滤。*

**parent()**（仅下一级） *获取当前匹配元素集中每个元素的父元素，可选地由选择器过滤。*

**find()**（所有级别）获取当前匹配元素集中每个元素的后代，由选择器、jQuery 对象或元素过滤。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-09T11:29:10.830

假设通过“最近的对面”您想要“最远”的父元素，您可以使用`parents().last()`，如下所示：

```
$('.elem').click(function() {
    var $topSubMenu = $(this).parents('.sub-menu').last();
}); 
```

请注意，当 jQuery 遍历 DOM 时，您希望数组中的最后一个元素，因此顶级项目将是集合中的最后一个。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-07-20T10:37:41.897

[这是一个仅限JavaScript](https://developer.mozilla.org/en-US/docs/Web/API/Element/closest#Polyfill)的解决方案，基于`closest()`.

```
function furthest(s) {
    var el = this.parentElement || this.parentNode;
    var anc = null;

    while (el !== null && el.nodeType === 1) {
        if (el.matches(s)) anc = el;
        el = el.parentElement || el.parentNode;
    }
    return anc;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-11T12:29:43.067

`.closest()`实际上可以在这里使用，通过传递一个将匹配元素限制为直接后代的选择器`.menu`：

```
$('.elem').click(function() {
    let $topSubMenu = $(this).closest('.menu > .sub-menu');
}); 
```

# javascript - Modernizr load [A, B] 似乎在 A 之前执行 B，这怎么可能？

> ID：14787619
> 
> 赞同：2
> 
> 时间：2013-02-09T11:27:17.727
> 
> 标签：javascript, angularjs, modernizr, yepnope

[Modernizr](http://modernizr.com/) .load({ both: [a, b] }) 似乎之前执行`b`过，`a`但这不是 Modernizr 应该如何工作的？[“ *yepnope.js [Modernizr 使用的] 总是按照它们列出的顺序执行事物*”](http://yepnopejs.com/)

Modernizr 版本 2.5.3 和 2.6.2。

我正在加载[angular.js](https://ajax.googleapis.com/ajax/libs/angularjs/1.0.1/angular.js)和[angular-sanitize.js](https://ajax.googleapis.com/ajax/libs/angularjs/1.0.1/angular-sanitize.js)，如下所示：

```
Modernizr.load({
  both: [
    cdnDir + 'angular.js',
    cdnDir + 'angular-sanitize.js',
    d.i.assetsUrlPathStart + 'debiki-dashbar.js'],
  complete: bootstrapAngular
}) 
```

然而，很少会因为还不存在而`angular-sanitize.js`死去。`angular`

但是不`Modernizr.load(both: [a, b, c])`保证按顺序执行a、b、c？怎么了...？

***细节：***

错误发生`angular.extend(...)`在[angular-sanitize.js](https://ajax.googleapis.com/ajax/libs/angularjs/1.0.1/angular-sanitize.js)中的一行，即此摘录的最后一行：（第 148 行）

```
// Elements that you can, intentionally, leave open (and which close themselves)
// http://dev.w3.org/html5/spec/Overview.html#optional-tags
var optionalEndTagBlockElements = makeMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),
    optionalEndTagInlineElements = makeMap("rp,rt"),
    optionalEndTagElements = angular.extend({}, optionalEndTagInlineElements, optionalEndTagBlockElements); 
```

这是错误消息：

> 未捕获的类型错误：无法调用未定义 ajax.googleapis.com/ajax/libs/angularjs/1.0.1/angular-sanitize.js:148 的方法“扩展”

Chrome 的调试器显示这`window.angular`确实是未定义的——尽管它在[angular.js](https://ajax.googleapis.com/ajax/libs/angularjs/1.0.1/angular.js)的最后一行使用（应该首先执行）。

Chrome（版本 24.0.1312.57）表示 angular.js 和 angualar-sanitize.js 都是从浏览器的缓存中加载的。

* * *

更新：我认为这种更明确的重写确实应该有效。但是在运行时，它有时会打印“Angular 不存在”并在稍后死去（当 angular-sanitize.js 运行时）——尽管 Angular “必须”刚刚被创建。

```
Modernizr.load({
  load: cdnDir + 'angular.js', // <-- creates `angular`
  complete: function(){
    if (typeof angular == 'undefined' || angular === null) {
      console.log('Angular absent.');  // <-- printed sometimes, and everything fails
    }
    Modernizr.load({
      load: cdnDir + 'angular-sanitize.js',
      complete: ...
      }
    });
  }
}); 
```

* * *

有人将此问题标记为重复： [modernizr 可以异步加载脚本但按顺序执行它们吗？](https://stackoverflow.com/questions/6673406/can-modernizr-load-scripts-asychronously-but-execute-them-in-order)——但是，如果你仔细阅读这个问题，你会注意到这个问题本身实际上已经*包含*了另一个问题的*答案*（即：*“[...] 总是按照它们列出的顺序执行事情”* ——这就是回答另一个问题）。相反，根据文档，这个问题是关于为什么事情没有*按照他们应该的方式工作。*

# java - 将 JTextArea 中的文本读入 StringBuilder

> ID：14787621
> 
> 赞同：0
> 
> 时间：2013-02-09T11:27:20.770
> 
> 标签：java, swing, jtextarea, stringbuilder

我尝试将文本区域中的所有行读入 StringBuilder 以便我可以将文本区域中的文本用作**整个字符串**。但是我在 **s.append(line);行中得到了 NullPointerException** . 为什么？

```
public class tu extends JFrame implements ActionListener{

    JTextArea t;
    static StringBuilder s;

    tu (){

        setLayout(/*new BorderLayout()*/null);
        t=new JTextArea(30,77);
        JScrollPane s=new JScrollPane(t,JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
        JButton b=new JButton("process");
        b.addActionListener(this);
        JPanel p=new JPanel();
        JPanel p1=new JPanel();
        p.add(s);
        p.setBorder(new TitledBorder("sequence"));
        p.setBounds(0,0,880,540);
        p1.add(b);
        p1.setBounds(380,570,100,40);
        add(p);
        add(p1);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(900,700);
        setVisible(true);

    }
     public void actionPerformed(ActionEvent e){
         String text=t.getText();
         while (text!=null){for (String line : text.split("\\n")){ 
         s.append(line);
         }}

     }

    public static void main(String[] args){
        tu t=new tu();

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T11:29:03.053

尝试调用尚未实例化的对象上的任何方法将导致`NPE`. 您需要实例化您的`StringBuilder` `s`：

```
StringBuilder s = new StringBuilder(); 
```

你真的要等到用户点击了`JButton`之后再建立这个的内容`StringBuilder`吗？`StringBuilders`通常用作具有本地范围的按需助手对象。

* * *

有几点需要注意：

*   使用`static`成员变量被认为是糟糕的设计
*   类名以大写字母开头
*   不要使用绝对定位（`null`布局）。改用[布局管理](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)器
*   首选的方法是创建一个`JFrame`直接 & 使用的实例。
*   的首选方法`ActionListeners`是使用匿名实例或[Action](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)接口。
*   考虑使用[初始线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T11:31:06.073

当您要写入时，您的 StringBuilder 仍然为空。

您需要在附加之前实例化您的 StringBuilder 。

```
s = new StringBuilder(); 
```

顺便说一句，您的 StringBuilder 和您的 JScrollPane 具有相同的变量名称，您应该使用不同的名称。

# python - 在 urls.py 中使用正则表达式的内联过滤器

> ID：14787623
> 
> 赞同：1
> 
> 时间：2013-02-09T11:27:34.577
> 
> 标签：python, django, url

我遇到的问题是我想使用视图（而不是修改它）来显示组中的所有人。问题是我不知道如何使用正则表达式中的 pk 在同一行进行过滤...

我想要类似的东西：

```
url(r'^groups/(?P<pk>\d+)/$', login_required(MyListView.as_view(model=Person, queryset=Person.objects.filter(groups__id=pk))), name='person_group_list'), 
```

有了这个我得到：“/clients/的NameError

名称‘pk’未定义”

有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T11:37:41.283

你真的需要写一个视图。这就是基于类的视图的优势，您可以简单地从 MyListView 继承。（我知道你说过你不想这样做，但这确实是正确的方法）。

```
from your_app.views import MyListView
from your_app.models import Person

class MySpecialListView(MyListView):
    model = Person
    get_queryset(self, *args, **kwargs):
        return Person.objects.filter(groups__id=self.kwargs['group_pk'])) 
```

作为旁注，我会在您的正则表达式中将 pk 更改为 group_pk 以避免任何可能的冲突。

```
url(r'^groups/(?P<group_pk>\d+)/$', login_required(MySpecialListView.as_view(), name='person_group_list') 
```

# html - div 离开父 div

> ID：14787632
> 
> 赞同：0
> 
> 时间：2013-02-09T11:28:45.663
> 
> 标签：html, css, margin, hidden, behind

我目前正在开发一个网页。

基本上是两个部分。主要部分占据了右侧边栏没有的所有屏幕。侧边栏是固定的并设置为 250px 宽。主要部分设置为 100% 宽度，边距为 250 像素。

现在我放了几个测试块来看看它的样子，它们是 300px x 300px。如您所见，顶行的最后一个块位于侧边栏的后面。我怎样才能让它进入下一行而不是放在侧边栏后面？

提前致谢。

![目前页面预览](../Images/35a68c968b995bd0c23d4e3d444e8f1f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T12:01:02.280

块不换行的原因是因为它忽略了边距。

如果没有 CSS，很难给出一个准确的解决方案，但我建议一个简单的解决方案是让侧栏向右浮动，主 div 向左浮动。然后，您必须删除主 div 上的边距。

这将允许您保持固定的像素大小，尽管在大多数情况下使用百分比更合适。我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:57:41.690

根据对屏幕截图的理解，我假设您应该添加“位置”标签来确定 div 的优先级，我建议您在嵌套的 div 标签中使用 % 而不是 px 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T12:13:33.170

也许原因是宽度：主要部分为 100%？

```
.main {
        width: auto;
        margin-left: 250px;
} 
```

# jquery - Jquery Typeerror 变量未定义

> ID：14787636
> 
> 赞同：0
> 
> 时间：2013-02-09T11:29:08.400
> 
> 标签：jquery

我正在尝试在输入时动态创建行。我收到 TypeError：arrDetail[tempcount] is undefined。我使用的是 firefox 最新版本。我想知道这是浏览器问题还是编码问题。感谢您的帮助。提前致谢。我的代码如下

```
function makeDivTag(St)
{
    //alert("makediv");
     alert("tempcount");
        var i ;
        //var num = Number(document.getElementById("divLst_count").value) + 1;

    //var divIdName = "my"+(num-1)+"Div";
    var divName=0;
    strHTML = '';
    alert("selitem makediv" + selItem);
    if (selItem == -1)
    {
        alert("in for");
      for(i=0;i<=arrCount;i++)
      {
        divName= "my" + tempcount +"Div";
        strHTML = strHTML +"<TR id="+divName+">";
        strHTML = strHTML +"<TD><INPUT type=\"text\" class=\"divtext\" style=\"width:100;text-align:left;\" name=\"lstacode[]\"  id=\"lstacode[]\" value='"+ arrDetail[tempcount][1] +"'></TD>";

        strHTML = strHTML +"<TD><INPUT type=\"text\" class=\"divtext\" style=\"width:300;text-align:left;\" name=\"lstaccountname[]\" value='"+ arrDetail[tempcount][2] +"'></TD>";

        strHTML = strHTML +"<TD><INPUT type=\"text\" class=\"divtext\" style=\"width:90;text-align:left;\" name=\"lstamount[]\" value='"+ arrDetail[tempcount][5] +"'></TD>";
        strHTML = strHTML +"<INPUT type=\"hidden\" name=\"lstremarks[]\" value='"+ arrDetail[tempcount][7] +"'>";

        strHTML = strHTML +"<INPUT type=\"hidden\" name=\"lstprev_acode[]\" value='"+ arrDetail[tempcount][8] +"'>";

        if (St=='0')
        {

            strHTML = strHTML +"<TD><INPUT type=\"button\" name=\"V\" class=\"lstButton\" value=\"View\" onClick=\"displayDivRow(document.frmcashpayment,'"+ tempcount +"');\" ></TD>";
        }
        else
        {

            strHTML = strHTML +"<TD><INPUT type=\"button\" name=\"E\" style=\"width:20;\" class=\"lstButton\" value=\"M\" onClick=\"displayDivRow(document.frmcashpayment,'"+ tempcount +"');\">";

            strHTML = strHTML +"<INPUT type=\"button\" name=\"D\" style=\"width:20;\" class=\"lstButton\" value=\"D\" onClick=\"removeDivRow(document.frmcashpayment,'"+ tempcount +"');\"></TD>";
        }
        strHTML = strHTML +"</TR>";
    }

    $("#divList > tbody").append(strHTML);
    }
    else
    {
         alert("selitem in makediv else" + selItem);
         alert(document.getElementById('hidacode').value);
        document.getElementsByName("lstacode[]")[selItem].value = document.getElementById('hidacode').value;
        document.getElementsByName("lstaccountname[]")[selItem].value = document.getElementById('txtaccountname').value;
        document.getElementsByName("lstamount[]")[selItem].value = document.getElementById('txtamount').value;
        document.getElementsByName("lstremarks[]")[selItem].value = document.getElementById('txtremarks').value;

    }
    //$("#divList > tbody").append(strHTML);
} 
```

我正在动态地尝试在输入时创建一个行。感谢您的帮助。提前致谢。

# jsp - 如何从jsp页面向servlet提交以0开头的整数值？

> ID：14787650
> 
> 赞同：1
> 
> 时间：2013-02-09T11:30:43.833
> 
> 标签：jsp, servlets

我有一个 jsp 注册表单，其中包含邮政编码作为其字段之一，它接受 5 位整数作为输入。但现在的问题是，如果输入包含数字“0”作为起始数字，那么在提交表单时数字“0”将被忽略。我的 servlet 类中只有 4 位数字。

示例：如果输入为 02345

```
 I will get 2345 in my servlet, but expected value is 02345. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:22:54.557

实际上的问题是，我将邮政编码存储为整数，将其存储为字符串解决了我的问题。在发布这个问题之前，一旦它节省了我的时间以及阅读这篇文章的其他人，我就会看到我的模型课

# javascript - 为什么这个非捕获组捕获？

> ID：14787652
> 
> 赞同：2
> 
> 时间：2013-02-09T11:30:48.173
> 
> 标签：javascript, regex, css-selectors, pattern-matching

应用此正则表达式模式：

```
/(?:(^| |\>|\+))+([a-z\-\_]+)/gi 
```

到这个字符串：

```
body.test ol+li ol > li #foobar p>span a[href=*] 
```

我得到这些匹配，逗号分隔：

```
body, ol,+li, ol, > li, p,>span, a 
```

为什么有些匹配有前导空格和`符号？我希望我的正则表达式的这一部分与这些标志匹配，但不捕获它们。`>``+``(?:(^| |\>|\+))``

 `编辑：我正在尝试匹配有助于 css 选择器的 css 特异性的 html 标记和 css 选择器。因此，我想单独匹配每个`li`或`span`等等，而不需要`+`or `>`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T13:31:45.853

捕获不等于匹配。由于您在模式中指定组合器，因此匹配器将拾取它们，无论它们是被捕获还是未被捕获。

要捕获，您需要`exec()`在字符串上使用正则表达式并遍历结果，其中*将*包含您的捕获组。我还清理了您的模式并对其进行了修改，因此它不会不必要地捕获并且会识别[一般的兄弟组合`~`](http://www.w3.org/TR/selectors/#general-sibling-combinators)器：

```
var sel = "body.test ol+li ol > li #foobar p>span a[href=*]";
var re = /(?:^| |>|\+|~)+([a-z_-]+)/gi;
var matches = [], m;

while (m = re.exec(sel)) {
    matches.push(m[1]);
} 
```

然后，您将获得预期的匹配：

```
body, ol, li, ol, li, p, span, a 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T11:32:03.330

中的内括号`(?:(^| |\>|\+))`正在创建一个捕获的组。你也可以让它不被捕获，我认为你应该`+` 在外括号内有量词：

```
/(?:(?:^| |\>|\+)+)([a-z\-\_]+)/gi 
```

此外，您可以使用字符类来避免`pipes`介于两者之间的字符类，并且您也不需要转义`>`and `+`。但请记住，不要`caret(^)`在字符类的开头使用，否则它将否定一切：

```
/(?:[ >+^]+)([a-z_-]+)/gi 
```

您无需转义`-`并`_`进入角色类。只需`-`在最后使用，一切都很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T11:32:39.213

你在这里有捕获组：`(^| |\>|\+)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T12:09:05.880

您有两个捕获组，`(^| |\>|\+)`并且`([a-z\-\_]+)`- 第一个直接位于非捕获组内。只需将其删除：

```
/(?:^| |>|\+)+([a-z_-]+)/gi 
```

关于如何在重复（*全局*）匹配时获取捕获的组，请参阅[JavaScript 正则表达式和子匹配](https://stackoverflow.com/q/844001/1048572)。顺便说一句，您也可以尝试使用`.split(/[ >+]+/)`or `.match(/[^ >+]+/g)`。`

# android - 如何在sqlite中的表的日期时间字段中保存日期类型值

> ID：14787656
> 
> 赞同：0
> 
> 时间：2013-02-09T11:31:18.733
> 
> 标签：android

我正在使用editText输入类型是日期，我希望用户以日期格式输入日期并将其存储在sqlite表的日期时间字段中。这可能吗？因为 editText 日期格式是 dd/mm/yyyy 而在 sqlite 中它是 yyyy/mm/dd。

我设计了一个表单，其中有一个编辑文本，用户将通过该文本输入日期，并且我想将此日期存储在字段类型为 datetime 的 sqlite 中。怎么做？我是android新手，所以如果有人知道解决方案，请给我答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:47:51.380

我已经解决了我的问题：

1.  我在 sqlite3 中采用了 date 的数据类型是 datetime 。
2.  我使用了 textview、datepicker 和 date_picker_demo.xml 中保存在布局中的按钮。

3.  日期选择器.java

    ```
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
            db = new DatabaseHelper(this);
            date_textview = (TextView) findViewById(R.id.tv_date);
            picker_date = (DatePicker) findViewById(R.id.datepicker1);
            button_create = (Button) findViewById(R.id.button_create);
    }

    @Override 
    public void onClick(View arg0) {
        date = new Date(picker_date.getYear()-1900, picker_date.getMonth(), picker_date.getDayOfMonth()); 
            sdf = new SimpleDateFormat("yyyy-MM-dd");

           //sdf.format()->converting date to string
    String sdate = sdf.format(date); 

          //inserting date into database
             try {
        db.createDataBase();
    } catch (IOException e) {
        e.printStackTrace();
    }
    db.openDataBase();
    Cursor cur = db.select();

    for(cur.moveToFirst(); !cur.isAfterLast(); cur.moveToNext()){
        if(cur.isLast()){
            s_id = Integer.parseInt(cur.getString(0));
            s_id = s_id + 1;
        }
    }
             db.insertDate(s_id,sdate);
       } 
    ```

4.  数据库助手.java

    ```
     public Cursor select(){
     String qry = "Select subscription_id from Subscription_Master";
     cur = sqdb.rawQuery(qry,null); 
    return cur;
     }

     public void insertDate(int s_id,String s_date){

    String query = "insert into Subscription_TAB(subscription_id,start_date) values("+s_id+",date('"+s_date+"'))";
     sqdb.execSQL(query);
     Log.d("value","inserted");
     } 
    ```

日期已成功插入数据库。

# css - -webkit-linear-gradient 捕捉到 90 度

> ID：14787658
> 
> 赞同：0
> 
> 时间：2013-02-09T11:31:42.313
> 
> 标签：css, webkit, gradient, linear-gradients

我在 Win7 上的 Chrome（最新）中遇到了一些奇怪的行为。FF 和 IE10 按预期工作。

请看一下这个小提琴：http: [//jsfiddle.net/KrNm4/3/](http://jsfiddle.net/KrNm4/3/)

```
.a {
    display: block;
    margin-bottom: 10px;
    width: 100px;
    height: 100px;
    background: -webkit-linear-gradient(-85deg, #efefef 25%, #666 25%);
    background: -moz-linear-gradient(-85deg, #efefef 25%, #666 25%);
}
.b {
    display: block;
    margin-bottom: 10px;
    width: 400px;
    height: 400px;
    background: -webkit-linear-gradient(-85deg, #efefef 15%, #666 15%);  
    background: -moz-linear-gradient(-85deg, #efefef 15%, #666 15%);    
}

<div class="a">a</div>
<div class="b">b</div> 
```

第二个 div 以错误的角度显示渐变。我无法弄清楚它何时准确地捕捉到 90°。然而，它似乎取决于 div 的大小。

有人知道这件事吗？它是一个错误、一个功能、超人还是我很愚蠢，只是错过了一些东西？

编辑：我刚刚检查了 Browsershots，在 Linux 和 Mac 上的结果相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:46:46.703

看起来这是一个已知的错误。[看看这里](https://code.google.com/p/chromium/issues/detail?id=162538)。这是目前 Chromium 开发人员中的优先级 2 错误。

# node.js - expressjs：如何重定向到处理程序中间的静态文件？

> ID：14787662
> 
> 赞同：8
> 
> 时间：2013-02-09T11:32:04.187
> 
> 标签：node.js, redirect, express

我正在使用 expressjs，我想做这样的事情：

```
app.post('/bla',function(req,res,next){
   //some code
   if(cond){
      req.forward('staticFile.html');
   }
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-09T13:35:01.120

正如 Vadim 指出的，您可以使用 res.redirect 向客户端发送重定向。

如果您想返回静态文件而不返回客户端（如您的评论所建议的那样），那么一种选择是在使用 __dirname 构造后简单地调用 sendfile。您可以将下面的代码分解为单独的服务器重定向方法。您可能还想注销路径以确保它是您所期望的。

```
 filePath = __dirname + '/public/' + /* path to file here */;

    if (path.existsSync(filePath))
    {
        res.sendfile(filePath);
    }
    else
    {
       res.statusCode = 404;
       res.write('404 sorry not found');
       res.end();
    } 
```

这是供参考的文档： http: [//expressjs.com/api.html#res.sendfile](http://expressjs.com/api.html#res.sendfile)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T12:49:39.167

这种方法适合您的需要吗？

```
app.post('/bla',function(req,res,next){
   //some code
   if(cond){
      res.redirect('/staticFile.html');
   }
}); 
```

当然，您需要使用 express/connect`static`中间件来获得此示例工作：

```
app.use(express.static(__dirname + '/path_to_static_root')); 
```

**更新：**

你也可以简单的流文件内容来响应：

```
var fs = require('fs');
app.post('/bla',function(req,res,next){
   //some code
   if(cond){
      var fileStream = fs.createReadStream('path_to_dir/staticFile.html');
      fileStream.on('open', function () {
          fileStream.pipe(res);
      });
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-17T11:07:58.773

Sine express 已弃用 res。**sendfile**你应该使用 res. **而是发送文件**。

请注意，**sendFile**需要一个相对于当前文件位置的路径（而不是像**sendfile**那样的项目路径）。要使其具有与**sendfile**相同的行为- 只需将 root 选项设置为指向应用程序根目录：

```
var path = require('path');
res.sendfile('./static/index.html', { root: path.dirname(require.main.filename) }); 
```

[在这里](https://stackoverflow.com/questions/10265798/determine-project-root-from-a-running-node-js-application)找到有关的解释`path.dirname(require.main.filename)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-16T13:41:49.963

基于@bryanmac 的回答：

```
app.use("/my-rewrite", (req, res, next) => {
    const indexFile = path.join(__dirname, "index.html");

    // Check if file exists
    fs.stat(indexFile, (err, stats) => {
        if (err) {
            // File does not exist or is not accessible.
            // Proceed with other middlewares. If no other
            // middleware exists, expressjs will return 404.
            next();
            return;
        }

        // Send file
        res.sendFile(indexFile);
    });
}); 
```

由于在 Node.js v16.9.1`path.exists`中`path.existsSync`不再存在，`fs.stat`因此使用。

# javascript - 关于如何更改 textarea 选择颜色的任何想法？

> ID：14787664
> 
> 赞同：3
> 
> 时间：2013-02-09T11:32:23.817
> 
> 标签：javascript, jquery, html, css, textarea

我已经尝试过了，但在 textarea 的情况下它不起作用（在 Chrome 和 IE 中）:(

```
::-moz-selection {
  background: #b3d4fc;
  text-shadow: none;
}
::selection {
  background: #b3d4fc;
  text-shadow: none;
} 
```

有没有办法让它成为可能？
CSS或jQuery怎么样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T11:42:08.113

这仅在 Firefox（和 Safari？）中受支持。

你可以做一个解决方法。而不是与 contenteditable 一起`textarea`使用。`div`

见：http: [//jsfiddle.net/VF4tb/1/](http://jsfiddle.net/VF4tb/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T11:41:09.283

您是要更改背景颜色`textarea`还是仅更改其中文本的颜色？如果是后者，那么这就是你想要的：

```
::-moz-selection {
  color: #b3d4fc;
  text-shadow: none;
}
::selection {
  color: #b3d4fc;
  text-shadow: none;
} 
```

如此处所示：http: [//jsfiddle.net/u6CNN/](http://jsfiddle.net/u6CNN/)

顺便说一下，您也可以指定 a `background-color`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-21T20:55:05.737

我找到了以下解决方案：

```
.YourForm textarea:focus {
  background-color: #000;
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-09T12:35:12.973

如果我理解正确，您想更改文本区域的背景颜色，对吗？

像这样的东西：

```
textarea{
    /* Change the color of the typed text in the textarea */
    color: #CCC;

    /* Change the background color of the actual textarea */
    background-color: #000;
} 
```

或上课：

css->

```
.classname{
    /* Change the color of the typed text in the textarea */
    color: #CCC;

    /* Change the background color of the actual textarea */
    background-color: #000;
} 
```

html->

```
<textarea class="classname">
</textarea> 
```

# authentication - 多个网站如何从同一个 OpenID 用户/标识获得相同的唯一标识符？

> ID：14787667
> 
> 赞同：0
> 
> 时间：2013-02-09T11:32:48.290
> 
> 标签：authentication, openid

我们为网站提供后端 (RESTful) 服务，该服务依赖于在多个不相关的网站上唯一标识同一用户。我们一直使用电子邮件地址作为唯一标识符，但并非所有网站都使用电子邮件地址，尤其是当这些网站使用 OpenID 身份验证时。

那么，OpenID 是否提供了在多个依赖方之间相同的唯一标识符（如果用户使用相同的 OpenID 进行身份验证）？

如果是这样，如果目标是多个不相关的网站在每个都有相同的 OpenID 用户时提供相同的标识符，那么如何指示一系列独立网站为我们提供每个用户的用户标识符？

此外，我们的目标是让使用我们 API 的开发人员尽可能轻松地做到这一点。因此，如果您知道任何已经解决此问题的优秀 API 文档，那么指向该文档的链接将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:03:25.283

在不了解您的 Web 服务或其编写的语言的情况下，我不确定我的答案会有多大帮助，因为它相当笼统且技术性较低。

响应识别/授权请求的 OpenID 提供者将响应“声明的 ID”和“身份”以及任何请求的“属性交换”。属性交换信息可以是诸如电子邮件/用户名/语言/实名/等可能是您正在寻找的内容。

Google（作为 OpenID 提供者）支持查询一个像样的数字属性交换信息，并在他们的文档中提供了一个列表： [https ://developers.google.com/accounts/docs/OpenID#Parameters](https://developers.google.com/accounts/docs/OpenID#Parameters)

OpenID 身份对用户来说应该是唯一的，但即使是从同一提供商颁发的，也不能将他们交叉识别到不同的网站。（它可以是发给它的 RP 唯一的定向 ID）。在这里查看更多信息： [openid.claimed_id 是静态的吗？](https://stackoverflow.com/questions/2052277/is-openid-claimed-id-static)

综上所述，作为 API 的设计者，定义使用 Web 服务所需的某些信息（即电子邮件地址）是完全合理的。然后将其留给希望使用您的网络服务以某种方式获取该信息的各方（直接询问用户，或通过属性交换等）。

* * *

有关 OpenID 的更多信息，我会查看他们的网站，特别是规范和库： [http :](http://openid.net/developers/libraries/) [//openid.net/specs/openid-authentication-2_0.html http://openid.net/developers/libraries/](http://openid.net/specs/openid-authentication-2_0.html)

以一些好的文档作为起点的库包括：

*   JOpenID (Java)： [http ://code.google.com/p/jopenid/wiki/QuickStart](http://code.google.com/p/jopenid/wiki/QuickStart)
*   LightOpenID (PHP)： [http ://code.google.com/p/lightopenid/w/list](http://code.google.com/p/lightopenid/w/list)

* * *

直接实施 OpenID 身份验证不适用于后端 Web 服务，因为最终用户没有参与（即无法提供凭据）。

为了满足您在各种 3rd 方网站上识别同一用户的要求，您可能需要成为 OpenID*提供商*。然后提供进一步的 API 以允许用户在 3rd 方网站上的功能链接到您管理的他们的 OpenID 个人资料。

如果不是身份的实际提供者...与第 3 方共享 OpenID 身份可能是一个潜在的安全/隐私问题，或者至少违反 OpenID 的规范（它将交换描述为 RP 和操作）。尽管这可能超出了您想要做的范围，但作为 OpenID 提供者至少会消除许多隐私问题，因为用户必须明确选择加入。

我不知道有任何 API 可以在没有直接用户交互的情况下跨多个 3rd 方网站处理唯一标识用户。我编写的大多数 Web 服务都需要提供直接用户凭据（用户知道这一点），或者只需将用户标识为特定客户端的唯一用户。在后一种情况下，用户身份验证并不总是必要的，客户端可以进行全面身份验证，然后提供自己的唯一 ID 来跟踪用户，让 Web 服务对用户的实际构成视而不见。不幸的是，您的要求似乎不适合这些常见场景。

* * *

在设计 API 时要考虑的最后一件事......

向第三方提供唯一可识别信息（即电子邮件地址）可能会引起互联网隐私圈的一些关注。特别是如果从交换中获得任何经济收益（广告/直接支付/等），或者如果信息的使用是未知的/不安全的或其他不受欢迎的。 [http://www.ehow.com/about_5332990_legal-sell-email-list.html](http://www.ehow.com/about_5332990_legal-sell-email-list.html) [http://www.aclu.org/technology-and-liberty/internet-privacy](http://www.aclu.org/technology-and-liberty/internet-privacy)

您可能希望确保您的目标客户（您的 Web 服务的消费者）在他们的术语中使用正确的术语，或者可以为他们的用户提供足够的权力，允许他们选择不提交到您的服务中。并清楚地说明你在用这些信息做什么......

诸如此类的问题可能会阻碍您的 API 被接受，因此值得考虑。

# python - 将 OpenCV 文档添加到 PyCharm

> ID：14787668
> 
> 赞同：2
> 
> 时间：2013-02-09T11:32:56.920
> 
> 标签：python, opencv, pycharm

我试图简单地将 OpenCV 文档添加到 Pycharm，以便我可以快速查找我想要的任何元素的文档（SHIFT+F1）。例如，以下是 wx 的设置方式：

```
http://www.wxpython.org/docs/api/{module.name}.{class.name}-class.html#{function.name} 
```

我不知道如何为 cv2 模块做同样的事情。

示例网址：`docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=split#cv2.split`

这里中间的部分`operations_on_arrays.html`是有问题的，因为它对于功能组是不同的。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T22:31:26.173

PyCharm's external documentation feature can only build an URL from the name of the module and/or function for which the documentation is requested. If you need a more flexible structure of the URLs, the only way to support external documentation is by writing a plugin for PyCharm.

# ruby-on-rails - 如何找出为什么 Rails 服务器挂在 100%？

> ID：14787670
> 
> 赞同：1
> 
> 时间：2013-02-09T11:33:03.747
> 
> 标签：ruby-on-rails, ruby, debugging, gdb

有人能想办法找出我们的 Rails 生产服务器挂在哪里吗？它的 CPU 为 99%，所以我认为它会在 while/for/each 循环中丢失。不幸的是，我们找不到候选循环。

该问题在开发中不会出现，我们的测试套件现在具有 100% 的代码覆盖率。

我们已经通过 gdb 连接到 Ruby，但不知道从那里去哪里。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-09T12:59:10.380

将 gdb 附加到繁忙的循环进程后，然后`rb_backtrace`从 gdb 调用：

```
> call rb_backtrace() 
```

输出`rb_backtrace`将类似于崩溃报告，输出将进入您的日志文件，类似于标准 Ruby 错误回溯。

从那里你应该希望已经离解决方案更近了一步，因为你会看到你的 Ruby 代码中的哪个过程卡住了。

您可以在此处查看更多提示：http:
[//isotope11.com/blog/getting-a-ruby-backtrace-from-gnu-debugger](http://isotope11.com/blog/getting-a-ruby-backtrace-from-gnu-debugger)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:18:32.257

这不是一个干净的解决方案，但至少以下解决了我们的问题：我们迁移到“瘦”网络服务器并删除了“设计”。

# java - 验证器无法正常工作

> ID：14787671
> 
> 赞同：0
> 
> 时间：2013-02-09T11:33:05.390
> 
> 标签：java, validation, jsf

我有一个 JSF 验证器，用于验证来自表单的输入。

当我插入简单字符串或重复字符串时，它工作正常。但是，当我不输入任何内容时，正确的消息将是`This field cannot be empty!" : " '" + s + "' is not a valid name!`，但我什么也没有得到。你能帮我找到代码逻辑的问题吗？

```
// Validate Datacenter Name
    public void validateDatacenterName(FacesContext context, UIComponent component, Object value) throws ValidatorException, SQLException
    {

        String l;
        String s = value.toString().trim();

        if (s != null && s.length() > 18)
        {
            throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                    "  Value is too long! (18 digits max)", null));
        }

        try
        {
//            l = Long.parseLong(s);
//            if (l > Integer.MAX_VALUE)
//            {
//                throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
//                        "  '" + l + "' is too large!", null));
//            }
        }
        catch (NumberFormatException nfe)
        {
            l = null;
        }

        if (s != null)
        {

            if (ds == null)
            {
                throw new SQLException("Can't get data source");
            }

            Connection conn = null;
            PreparedStatement ps = null;
            ResultSet rs;
            int cnt = 0;
            try
            {
                conn = ds.getConnection();
                ps = conn.prepareStatement("SELECT count(1) from COMPONENTSTATS where NAME = ?");
                ps.setString(1, s);
                rs = ps.executeQuery();

                while (rs.next())
                {
                    cnt = rs.getInt(1);
                }

                if (cnt > 0)
                {
                    throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                            "  '" + s + "' is already in use!", null));
                }

            }
            catch (SQLException x)
            {
                throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                        "  SQL error!", null));
            }
            finally
            {
                if (ps != null)
                {
                    ps.close();
                }
                if (conn != null)
                {
                    conn.close();
                }
            }
        }
        else
        {
            throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                    s.isEmpty() ? "  This field cannot be empty!" : "  '" + s + "' is not a valid name!", null));
        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T11:37:17.210

那是因为您只检查您的 s 是否为 != null。

更改`if (s != null)`并重`if (s != null && s.lenght() > 0)`试。

顺便说一句，你`String s` 不能为空，因为你用它初始化它

```
String s = value.toString().trim(); 
```

`value`如果您为空，这将导致 NullPointerException 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T12:07:54.127

Set `inputText` tag attribute `required` to `true`

```
<h:inputText value="#{backingBean.input}" required="true" 
        requiredMessage="Input is empty!"> 
```

# jakarta-ee - 不同 Java EE 实现（尤其是 Glassfish 和 JBoss）之间的交叉开发方面

> ID：14787672
> 
> 赞同：0
> 
> 时间：2013-02-09T11:33:13.313
> 
> 标签：jakarta-ee, jboss, glassfish, ejb

我正在为部署在 JBoss 4 AS 实例上的现有企业应用程序开发 AddOn Web 应用程序。为了简单起见，我使用 Netbeans 中提供的 Glassfish 应用程序服务器。对于原型，我将我使用的每个库打包到我想要部署的 war 文件中，还有 Hibernate 和一些非常基本的库。但将来我还想使用服务器提供的库和功能，如 JNDI 数据库连接查找、会话和实体 bean 等。

我的问题：

1.  在 Jboss 上为 glassfish 打包的 war 文件中部署一个简单的 Web 应用程序是否有任何方面，这可能是一个难以解决的问题？
2.  EJB 接口是否在两种实现中以类似的方式访问？意思是，当我在 Glassfish 服务器上开发用于执行此操作的代码时，我是否能够访问 Jboss 上的会话 bean？
3.  JNDI 查询在两种实现上执行的相似吗？
4.  其他方面？

我不得不说，我只在开发简单的 servlet 方面有经验。我知道一些关于 Java EE 和 EJB 的理论知识，我想更深入地了解这一点。我对实现的具体细节一无所知，所以这就是这个问题的重点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T23:04:53.717

如果您的应用程序相对简单并且您坚持核心 Java EE 标准，那么理论上您应该不会发现任何重大问题。由于 JNDI 命名存在差异，您在访问 EJB 时可能会遇到一些问题。

话虽如此，JBoss 4 已经相当老了。它符合 J2EE 1.4，并实现了 EJB 2.1 规范。新的 JBoss 和 GlassFish 服务器符合 Java EE 6 并实现了 EJB 3.1 规范。EJB3 更易于使用，但是您不能将 3.x EJB 部署到 2.x 容器（也可以采用其他方式）。因此，您必须小心地坚持 EJB2 容器中的可能性。例如，如果您想在本地使用 EJB（即来自部署在同一服务器上的另一个 EJB），则在 EJB2 下您必须定义和实现本地接口。在 EJB3 下，使用`@LocalBean`. 不要让我开始使用 EJB2 所需的所有外部描述符。

一般的经验法则是在开发和生产中使用相同 AS 的相同版本。例如，应用服务器 Y 版本 Z 中可能存在某个功能的 bug，它不会出现在应用服务器 A 版本 B 中。所以你的应用程序可以在 A 中工作，但是当你将它部署到 Y 时，它会崩溃，你将很难调试它。如果您使用相同（相同版本）的 AS，则您在开发过程中发现错误的机会更大。

我曾经不得不将一个相当复杂的应用程序从 GlassFish v2 转移到 GlassFish v3，而这个过程并不简单。

所以，如果你必须使用JBoss 4作为目标，你所有的开发都在JBoss 4下进行。它会为你以后省去很多麻烦。如果您可以使用最新的 JBoss 7 作为目标，您可以在最新的 GlassFish 3.x 下开发您的应用程序，它很可能会工作，但我认为没有充分的理由这样做。

# winforms - 如何在 TileControl 上添加水平滚动条？

> ID：14787673
> 
> 赞同：0
> 
> 时间：2013-02-09T11:33:15.860
> 
> 标签：winforms, devexpress, devexpress-windows-ui

我试图在我`(DevExpress) TileControl`的 Visual Studio 2010 中添加一个水平滚动条，但我总是失败。我知道当你创建一个时，`TileControl`你可以用鼠标滚轮自动滚动，但是我如何添加一个水平滚动条呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T07:27:49.790

我相信您可以使用[TileControl.ScrollMode](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraEditorsTileControl_ScrollModetopic)属性：

```
tileControl1.ScrollMode = TileControlScrollMode.ScrollBar; 
```

# java - 内存映射文件的性能特点

> ID：14787674
> 
> 赞同：10
> 
> 时间：2013-02-09T11:33:40.160
> 
> 标签：java, linux, memory-mapped-files

背景：

> 我有一个 Java 应用程序，它在相当大的内存映射文件（> 500 MB）上执行密集的 IO。程序读取数据、写入数据，有时两者兼而有之。
> 
> 所有读/写函数都具有相似的计算复杂度。
> 
> 我对程序的 IO 层进行了基准测试，并注意到内存映射文件的奇怪性能特征：
> 
> *   它每秒执行 90k 读取（在随机位置每次迭代读取 1KB）
> *   它每秒执行 38k 次写入（每次迭代顺序写入 1KB）
> *   它每秒执行 43k 次写入（每次迭代在随机位置写入 4 个字节）
> *   它每秒仅执行 9k 读/写组合操作（读取 12 个字节，然后每次迭代写入 1KB，在随机位置）
> 
> 64 位 JDK 1.7、Linux 3.4 上的程序。
> 
> 该机器是一台普通的 Intel PC，具有 8 线程 CPU 和 4GB 物理内存。在进行基准测试时，只为 JVM 堆分配了 1 GB。
> 
> 如果需要更多细节，这里是基准代码：[https ://github.com/HouzuoGuo/Aurinko2/blob/master/src/test/scala/storage/Benchmark.scala](https://github.com/HouzuoGuo/Aurinko2/blob/master/src/test/scala/storage/Benchmark.scala)
> 
> 而这里是上述读、写、读/写函数的实现：[https ://github.com/HouzuoGuo/Aurinko2/blob/master/src/main/scala/aurinko2/storage/Collection.scala](https://github.com/HouzuoGuo/Aurinko2/blob/master/src/main/scala/aurinko2/storage/Collection.scala)

所以我的问题是：

*   给定固定的文件大小和内存大小，哪些因素会影响内存映射文件的随机读取性能？
*   给定固定的文件大小和内存大小，哪些因素会影响内存映射文件的随机写入性能？
*   如何解释读/写组合操作的基准测试结果？（我期望它每秒执行超过 20K 次迭代）。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T14:33:27.687

内存映射文件性能取决于磁盘性能、文件系统类型、可用于文件系统缓存的可用内存和读/写块大小。linux上的页面大小是4K。因此，您应该期望 4k 读/写的最大性能。如果页面未映射，则随机位置的访问会导致页面错误，并将拉取新的页面读取。通常，如果要将文件视为一个内存数组（或 Java 中的 ByteBuffer），则需要内存映射文件。

# matlab - Parfor 人口生成问题

> ID：14787677
> 
> 赞同：2
> 
> 时间：2013-02-09T11:34:35.510
> 
> 标签：matlab, parallel-processing, genetic-algorithm

我正在运行一个遗传算法，我正在尝试并行化人口生成。我的实际代码：

```
Q = [];
parfor i=1:halfPop
    pa = P(select(f),:);
    pb = P(select(f),:);
    ...
    Q = [Q; pa; pb];
end 
```

Matlab 给我错误**Parfor 中的临时变量 Q 未初始化。**

所以我像这样重写它：

```
Q = [];
parfor i=1:halfPop
    pa = P(select(f),:);
    pb = P(select(f),:);
    Q(i,:) pa;
    Q(i+halfPop,:) pb;
end 
```

但现在我得到错误**parfor 中的变量 Q 无法分类。**. 在编辑器中，MATLAB 告诉我我不能以两种不同的方式索引 parfor 内的同一个矩阵。

我能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T13:35:18.260

`parfor`尝试拆分`Q`为与迭代次数一样多的切片，因此每次迭代都会得到`Q`. 在您的情况下，每次迭代都应该得到两个切片，它们`parfor`（还）无法处理。

要解决此问题，您可以定义两个变量`Qa`和，您可以在循环`Qb`结束后组合它们。`parfor`

```
[Qa,Qb] = deal(zeros(halfPop,size(P,2)));
parfor i=1:halfPop
    pa = P(select(f),:);
    pb = P(select(f),:);
    Qa(i,:) = pa;
    Qb(i,:) = pb;
end 

Q = zeros(2*halfPop,size(P,2));
Q(1:2:end,:) = Qa;
Q(2:2:end,:) = Qb; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T20:23:55.117

如果您像这样使用单个操作数进行连接，那么您尝试的“连接减少”应该可以工作

```
tmp = [pa; pb];
Q = [Q; tmp]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T13:33:57.087

许多不同的选项取决于 pa 和 pb 的大小是否一致。Matlab 希望确保没有数据“覆盖”的风险（因为没有更好的术语），在这种情况下无法确定。本质上，您每次迭代只能写入一次矩阵，并且已经在它认为是“良好实践”的范围内完成。

我的解决方案：

```
Q = zeros(halfPop,size([pa pb]);
parfor i=1:halfPop
    pa = P(select(f),:);
    pb = P(select(f),:);
    Q(i,:)= [pa pb];
end 
```

# linux - 使用 xargs 在一行中执行带有各种变量的命令

> ID：14787681
> 
> 赞同：1
> 
> 时间：2013-02-09T11:35:06.603
> 
> 标签：linux, console, xargs, usergroups

快点，这是我的命令：

```
echo "user1,user2,user3" | xargs -d, -L 1 usermod -g specialgroup 
```

我想在一个命令行中将多个现有用户添加到一个组中。但是，上面的方法不起作用，但是如果你输入：

```
echo "user1,user2,user3" | xargs -d, -L 1 echo 
```

它列出了三个用户：

```
user1
user2
user3 
```

关于我该怎么做的任何想法？即使没有 xargs。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:42:55.713

由于最后的换行符由`echo`,`user3`变为`user3\n`. 我已经测试了您的示例（`echo`从代码中删除了格式化尝试和无关的 s），我发现这是阻止它工作的唯一问题。

用于`echo -n "user1,user2,user3"`避免最后的换行符。

# c# - Entity Framework 5.0 复杂对象的 SaveChanges

> ID：14787683
> 
> 赞同：2
> 
> 时间：2013-02-09T11:35:46.077
> 
> 标签：c#, ef-code-first, entity-framework-5

我有一个方法，它接受一个输入参数，用于添加或更新记录的交易列表。

我遍历列表以发现哪些被修改并使用以下命令添加了whish：context.Entry(item).State = System.Data.EntityState.Modified; 设置每个事务的状态。

我遇到的问题是因为事务对象与 TransactionType 有关系，而我循环遍历事务的输入参数列表，如果数据库中有多个具有相同事务 id 的事务，我会收到以下错误：

> ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。

*   顺便说一句，我使用的是 EF5 和 Code First。

关注的方法是：

```
public TransactionList SaveTransactions(Transaction[] transactions)
        {
            try
            {
                using (EntityContext context = new EntityContext())
                {
                    foreach (var item in transactions)
                    {
                        if (item.TransactionId > 0)
                            context.Entry(item).State = System.Data.EntityState.Modified;
                        else
                            context.Entry(item).State = System.Data.EntityState.Added;
                    }

                    context.SaveChanges();
                }
                return GetLatestTransactions();
            } 
```

**## UPDATE ##** 如果我将每个项目的 TransactionType 设置为 null，我不会收到任何错误，其余的事务字段将被更新。即 TransAmount、Date 等。问题是通过将 TransType 设置为 null 我将永远无法更改我的交易类型。

```
using (EntityContext context = new EntityContext())
{
  foreach (var item in transactions)
  {
    //set the fk to null
    item.TransactionType = null;

    if (item.TransactionId > 0)
    {
      context.Entry(item).State = System.Data.EntityState.Modified;
    }
    else
      context.Entry(item).State = System.Data.EntityState.Added;
    }
    context.SaveChanges();
} 
```

**## UPDATE 2 ##** 我刚刚找到了另一种可行的方法，但仍然不是我的理想选择。我得到每个项目的单笔交易，然后设置值。我不喜欢这种解决方案，因为 .Single 将为每次迭代进行一次往返。

```
foreach (var item in transactions)
{
  var or = context.Transaction
  .Include(t => t.Category)
  .Include(t => t.TransactionReasonType)
  .Include(t => t.TransactionType)
  .Single(t => t.TransactionId == item.TransactionId);

  if (item.TransactionId > 0)
  {
    context.Entry(or).CurrentValues.SetValues(item);
    context.Entry(or).State = System.Data.EntityState.Modified;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:39:07.250

我的问题的解决方案是将添加与更新分开。对于更新，从数据库中获取每一行，将原始值设置为新值。对于添加，只需将新值添加到上下文中。

```
foreach (var item in transactions)
{
  if (item.TransactionId > 0) //Update
  {
    var original = context.Transaction.Where(
                            t => t.TransactionId == item.TransactionId)
                          .FirstOrDefault();

    original.TransactionType = context.TypeTransaction.Single(
                           p => p.TypeTransactionId == item.TransactionType.TypeTransactionId);

    context.Entry(original).CurrentValues.SetValues(item);
  }
  else //Insert
  {    
    item.TransactionType = context.TypeTransaction.Single(
                           p => p.TypeTransactionId == item.TransactionType.TypeTransactionId);

    context.Transaction.Add(item);
  }
}

context.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T19:11:34.310

解决此问题的另一种方法：

```
foreach (var item in updated)
{
   var original = db.MyEntities.Find(item.Id);
   db.Entry(original).CurrentValues.SetValues(item);
}
db.SaveChanges(); 
```

# ruby-on-rails - 如果使用框架的类，表单不会更新数据库中的值

> ID：14787685
> 
> 赞同：1
> 
> 时间：2013-02-09T11:36:19.940
> 
> 标签：ruby-on-rails, form-for, ink.sapo.pt

我正在使用 ink 框架来设置我的 Web 应用程序的样式。对于样式表，我正在使用这个[http://ink.sapo.pt/index.php/forms](http://ink.sapo.pt/index.php/forms)。

```
<form class= "ink-form inline">
<%= form_for(@document, :remote => true) do |f| %>
   <fieldset>
    <div class="control required validation error">
      <%= f.label :title, :class => "short" %>
      <%= f.text_field :title, :class => "short" %>
    </div>

   </fieldset>
<% end %>
</form> 
```

在上面的表格中，我放置了`class= ink-form inline`表格样式。这样做会为我的表单设置样式，但不会更新数据库中的值。当我使用此代码时

`<%= form_for(@document, :remote => true, :class => "ink-form inline") do |f| %>`

然后它会更新数据库中的值，但不会设置表单样式。我没有找到问题所在。请帮忙。！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:39:19.617

尝试这个！

```
<%= form_for(@document, :remote => true, :html => {:class => "ink-form inline"}) do |f| %>
   <fieldset>
    <div class="control required validation error">
      <%= f.label :title, :class => "short" %>
      <%= f.text_field :title, :class => "short" %>
    </div>

   </fieldset>
<% end %> 
```

如果您在浏览器中检查过之前的代码，您会看到两个表单标签（一个在另一个中）。原因是`form_for`生成自己的表单，这就是您想要提供选项的地方。

# arrays - AS3 使用 indexOf() 对数组进行值搜索

> ID：14787689
> 
> 赞同：0
> 
> 时间：2013-02-09T11:37:08.720
> 
> 标签：arrays, actionscript-3, flash, variables, shared-objects

在下面的代码中，`indexOf()`总是返回`-1`. 正在搜索的数组肯定包含其中的值。

我们尝试将检查的整数转换为字符串，以防数组中包含字符串格式，但也没有运气。

如果有人能提供任何启示，那就太好了！

**AS3**

```
var c:int = 0;
var storedCachesShared:SharedObject = SharedObject.getLocal("cacheStore");
var storedCaches:Array = storedCachesShared.data.cacheArray;
trace(storedCaches); // 1, 2

trace(storedCaches.indexOf(c+1)); // Always returns -1

if(storedCaches.indexOf(c+1) < 0){
    storedCaches.push([c+1]);
    storedCachesShared.flush();
} 
```

非常感谢，尼克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T12:02:53.463

这条线看起来有问题。它在现有数组的末尾添加一个数组（当你用 [] 包围它时）：

```
storedCaches.push([c+1]); 
```

我认为你的意思是添加一个 int，所以你需要这个：

```
storedCaches.push(c+1); 
```

indexOf 返回 -1 因为它正在寻找一个 int 但 storedCaches 是一个数组数组。

# assembly - 引导加载程序 - 不能正确地 jmp 或加载第二个扇区

> ID：14787692
> 
> 赞同：0
> 
> 时间：2013-02-09T11:37:32.067
> 
> 标签：assembly, x86, bootloader

我一直在拼命地尝试制作一个引导加载程序。在某个时候，我让它工作了，但现在它不再工作了。当我运行它时，它会打印一个 A 和一个 B。这意味着它确实会读取，但由于某种原因，当它跳转时它不会执行我放在 USB 驱动器第二个扇区的代码。

我想知道我的寻址或跳跃是否有问题？

我包括了我的 USB 存储器的图像

```
[bits 16]
[org 0x7C00]

jmp Start

;%include "BIOS_Parameter_Block.inc"
;%include "Extensions.inc"
;%include "Print.inc"

; Prepare Stack Segment
;-----------------------------------------------------------------
Start:
xor ax, ax
mov ds, ax
mov es, ax
mov fs, ax
mov gs, ax
mov ss, ax

mov sp, 0x7C00              ; Move Stack into SP
mov bp, sp                  ; Store current Stack Base

; Print Character to Make Sure Bootloader Has Reached this Point
;-----------------------------------------------------------------
mov ah, 0x0E                ; Print Character to Screen
mov bh, 0x00                ; No Page Numbering
mov bl, 0x07                ; White Text, Black Background
mov al, 65                  ; Print Letter A
int 0x10

; Check if INT0x13 Extentions are Supported
;-----------------------------------------------------------------
mov ah, 0x41                ; Set Function 0x41
mov word bx, 0x55AA          
push dx                     ; Save old Drive Identifier
mov dl, 0x80                ; Load 'Active' ID Into dl
int 0x13                    ; Call Interupt
jc short unsupported        ; If Extentions aren't Supported, Jump
clc                         ; Clear Carry Bit

; Read from the device.
;-----------------------------------------------------------------
mov si, DAPS                ; Load DAPS Struct to DS:SI
mov ah, 0x42                ; Read Functions (AL Ignored)
mov dl, 0x80                ; Load 'Active' ID Into dl
int 0x13
jc short unsupported        ; If something goes wrong...

mov ah, 0x0E                ; Print Character to Screen
mov bh, 0x00                ; No Page Numbering
mov bl, 0x07                ; White Text, Black Background
mov al, 66                  ; Print Letter B
int 0x10

; IT DOES PRINT THIS ABOVE

jmp 0x0:0x7E00                  ; Jump to main

; Errors 
;-----------------------------------------------------------------
unsupported:
mov ah, 0x0E                ; Print Letter F, Gives Indication of Failure
mov bh, 0x00
mov bl, 0x07
mov al, 70
int 0x10

clc
hlt
; Memory Data Structures and Other Variables
;-----------------------------------------------------------------
; Disk Address Packet Structure (Used For Loading Rest of OS)
DAPS: db 0x10               ; Size of Structure (16 bytes)
      db 0                  ; Always 0
      dw 1                  ; Number of Sectors to Read (1x512)
      dw 0x7E00             ; Offset to load to.
      dw 0x0000             ; Segment to load to.
      dq 1                  ; Read from Second Block

; Fill Out Rest of Bootloader
;-----------------------------------------------------------------
times 510-($-$$) db 0

db 0x55, 0xAA               ; Add Boot Record Signature 
```

Stage2 位于第二扇区

```
 [ORG 0x7E00]
 [bits 16]

 mov ah, 0x0E                ; Print Character to Screen
 mov bh, 0x00                ; No Page Numbering
 mov bl, 0x07                ; White Text, Black Background
 mov al, 67                  ; Print Letter C
 int 0x10
 cli
 hlt 
```

希望你们能帮助我！

![Bootloader的内存](../Images/75ae80abb1d20a435984c62ff1bdf462.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:01:31.020

int 0x13 bios 调用通常使用 DL 寄存器中的驱动器 ID - 0x80 通常是第一个 HDD 的 ID。您可能需要更改此设置以便从 USB 驱动器（可能不是第一个 HDD）加载附加扇区。

# php - $_COOKIE 是否可以包含由另一个域设置的 cookie？

> ID：14787694
> 
> 赞同：2
> 
> 时间：2013-02-09T11:37:55.573
> 
> 标签：php, cookies

假设我有一个网站 www.mysite.com。

如果我通过域上的 PHP 代码使用，`$_COOKIE`数组是否可以包含由域以外的域设置的 cookie ？`www.mysite.com``$_COOKIE``www.mysite.com`

我的理解（这是非常有限的！）是域只能访问它自己设置的 cookie，这意味着它`$_COOKIE`只能包含由域设置的 cookie。这个对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T11:39:31.313

不，只有非功能性浏览器会做这样的事情。

只有客户端可以查看所有单独域的所有 cookie，浏览器确保只发送与当前域相关的 cookie，而不发送其他域。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-09T11:40:06.073

确切地说，`$_COOKIE`只能访问由他的域设置的 cookie。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T11:55:35.767

从浏览器`http request`发送到您的服务器的信息将包含您放置在浏览器中的 cookie。访问不属于您的域的 cookie 将是一种恶意活动，会导致安全问题。

*   **cookie 窃取/会话劫持**是一种用于窃取另一个用户的活动会话的攻击。
*   用户登录网站后，会在计算机上存储一个 cookie，因此每次访问该网站的不同页面时，都无需重新验证。
*   如果有人获得了其他人的 cookie 并将它们添加到浏览器中，那么攻击者存储的用户名/密码组合或会话 ID 将与受害者的相同，因此在网站上将攻击者身份验证为其他人（受害者），而无需知道他们的凭据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-09T11:53:21.860

通过使用 '.domain.com' 而不是 'domain.com' 可以但仅允许子域共享一些 cookie。

跨不同的域，如 domain1.com 和 domain2.com 是不可能的。

# c# - 泛型类和 IEquatable 问题

> ID：14787697
> 
> 赞同：4
> 
> 时间：2013-02-09T11:38:09.357
> 
> 标签：c#, generics, .net-4.0, interface, nunit

我想要一个通用类来实现 IEquatable<T> 接口。该类具有类型为 T 的数据项。为了使泛型类等价，数据项也需要是相同的。

这是我的通用类：

```
public class V<T> : IEquatable<V<T>> where T : IEquatable<T>
{
    public V(T[] Value)
    {
        this.Value = Value;
    }

    T[] Value { get; set; }

    public bool Equals(V<T> other)
    {
        if (Value.Count() != other.Value.Count()) return false;

        for (int i = 0; (i < Value.Count()) && i < other.Value.Count(); i++)
        {
            if (!Value[i].Equals(other.Value[i])) return false;
        }

        return true;
    }
} 
```

这就是问题所在。当我编译上述通用类时，我收到以下消息。

> GenericArguments[0], 'T' on 'Myspace.Generic.V`1[T]' 违反了类型参数 'T' 的约束。

我的推理在哪里犯了错误，或者我的泛型类有什么问题？

注意：当我`IEquatable<V<T>>`省略泛型类和`public bool Equals(V<T> other)`完整的代码时，泛型类将编译并可用。编译器检测 IEquitable 除外。

```
public class V<T> where T : IEquatable<T>
{ 
```

上面的代码有效，但实例`V<T>`不再被识别为 IEquitable

注意 2：感谢 dasblinkenlight 在自己的解决方案中尝试此代码，我发现这很可能是配置问题，而不是编码问题。我现在认为这个特定问题已得到解答，但我尚未确定我的配置问题。

注意3：问题的实际原因是一个NUnit测试模块通过访问器加载了dll。需要更改测试程序，但`IEquatable<V<T>>`现在使用没有任何问题。

问题解决了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T11:41:21.313

您的泛型类没有任何问题。您作为其泛型参数传递的类有问题`T`。即，`SomeClass`您传入的类`V<SomeClass>`没有实现`IEquitable<SomeClass>`。

Your `V<T>` class requires `T` to be an implementation of `IEquitable<T>`. You need it in order to check element-by-element equality of arrays using the `Value[i].Equals(other.Value[i])` expression. If whatever class that you use as `V<T>`'s generic parameter is not equitable to itself, the compiler would complain.

# java - 如何在固定时间间隔内调用方法（无线程）

> ID：14787699
> 
> 赞同：0
> 
> 时间：2013-02-09T11:38:33.393
> 
> 标签：java

我必须处理一些对象的动画。现在我已经用 4 种方法完成了：`getAnimationCooldown()`、`resetAnimationCooldown()`和.`subAnimationCooldown()``nextFrame()`

但可以肯定的是，有更简单的方法可以做到这一点。我想`nextFrame()`每 100 毫秒调用一次方法。是否有捷径可寻？我知道`ScheduledExecutor`，`Timer`但我看到他们为这个任务创建了新线程，我需要为这个`for()`循环中的每个对象循环调用这个方法。那么有没有一些简单的方法可以称之为：

```
for (Object object : objects) {
 every(100, TimeUnit.MILISECONDS) {
  object.nextFrame();
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:40:14.543

A couple ideas are:

First: Is it possible to invert the requirement to call nextFrame every 100ms? If so, it could become "Call nextFrame as often as you can, & the object will update **appropriately for the amount of time** since its last nextFrame"? You'd still want to call it often enough, but this would remove the pressure to call nextFrame at precise 100ms intervals.

With this idea, your main loop would deal with each of the actions you mention, like this:

```
while(!isGameOver()) {
  moving();
  shooting();
  for (Object object : objects) {
    object.nextFrame();
  }
} 
```

Second: Switch to a fully **event-driven model**, but beware the "inside out logic" danger of that model.

# iphone - PhoneGap/Cordova FileTransfer.abort 未按预期工作

> ID：14787705
> 
> 赞同：1
> 
> 时间：2013-02-09T11:39:19.480
> 
> 标签：iphone, cordova, upload

我正在编写一个例程，将图像从我的 iPhone（4S，iOS 6.1）上传到服务器。

```
var ft = undefined;

var e = document.getElementById('stopper');
e.addEventListener('click', onStopUploadBtn, false);

function uploadPhoto(imageURI) {

    console.log('Preparing to upload' + imageURI);

    ...

    ft = new FileTransfer();
    ft.onprogress = onProgress;
    ft.upload(imageURI, url, onUploadSuccess, onUploadError, uploadOptions);
    console.log('upload started');
}

function onStopUploadBtn() {
    if(ft) {
        console.log('Aborting');
        ft.abort(onUploadSuccess, onUploadError);
    }
}

function onProgress(progressEvent) {
    if (progressEvent.lengthComputable) {
        console.log(progressEvent.loaded / progressEvent.total);
}

function onUploadSuccess(response) {
    console.log("Code = " + response.responseCode);
    console.log("Response = " + response.response);
    console.log("Sent = " + response.bytesSent);
}

function onUploadError(error) {
    alert("An error has occurred: Code = " = error.code);
} 
```

上传就像一个魅力，但我无法用 .abort() 阻止它。

事实上，当我按下停止按钮时，我看到 ft.abort() 被调用，但传输继续进行，直到 comp

这里的日志：

```
2013-02-09 12:29:18.422 HelloWorld[855:907] Multi-tasking -> Device: YES, App: YES

2013-02-09 12:29:22.496 HelloWorld[855:907] [LOG] opening camera

2013-02-09 12:29:30.728 HelloWorld[855:907] [LOG] Preparing to uploadfile://localhost/var/mobile/Applications/C82E5A93-D276-4380-8420-39165C9644C4/tmp/cdv_photo_014.jpg

2013-02-09 12:29:30.729 HelloWorld[855:907] [LOG] upload ready to go

2013-02-09 12:29:30.732 HelloWorld[855:907] -[CDVFileTransfer requestForUploadCommand:fileData:][Line 207] fileData length: 1016478
2013-02-09 12:29:30.734 HelloWorld[855:907] [LOG] upload started
2013-02-09 12:29:31.208 HelloWorld[855:907] [LOG] 0.03223007996537784
2013-02-09 12:29:31.210 HelloWorld[855:907] [LOG] 0.06446015993075568
2013-02-09 12:29:31.213 HelloWorld[855:907] [LOG] 0.09669023989613353

...

2013-02-09 12:29:32.057 HelloWorld[855:907] [LOG] 0.16511030894372916
2013-02-09 12:29:32.113 HelloWorld[855:907] [LOG] 0.167868278432954
2013-02-09 12:29:32.172 HelloWorld[855:907] [LOG] 0.17062624792217884

2013-02-09 12:29:32.188 HelloWorld[855:907] [LOG] Aborting
2013-02-09 12:29:32.191 HelloWorld[855:907] FileTransferError {
    code = 4;
    source = "file://localhost/var/mobile/Applications/C82E5A93-D276-4380-8420-39165C9644C4/tmp/cdv_photo_014.jpg";
    target = "...";
}

2013-02-09 12:29:32.229 HelloWorld[855:907] [LOG] 0.17338421741140367

...

2013-02-09 12:29:45.641 HelloWorld[855:907] [LOG] 0.9939470241666585
2013-02-09 12:29:45.698 HelloWorld[855:907] [LOG] 0.9967049936558833
2013-02-09 12:29:45.757 HelloWorld[855:907] [LOG] 0.9991324789267132
2013-02-09 12:29:45.813 HelloWorld[855:907] [LOG] 1
2013-02-09 12:30:17.200 HelloWorld[855:907] File Transfer Finished with response code 200
2013-02-09 12:30:17.203 HelloWorld[855:907] [LOG] Code = 200
2013-02-09 12:30:17.204 HelloWorld[855:907] [LOG] Response = 17
2013-02-09 12:30:17.205 HelloWorld[855:907] [LOG] Sent = 1016692 
```

.abort() 被正确调用，因为我收到 API 的 [http://docs.phonegap.com/en/2.3.0/cordova_file_file.md.html#FileTransfer](http://docs.phonegap.com/en/2.3.0/cordova_file_file.md.html#FileTransfer)中所述的错误。

如日志所述，图像已正确传输到服务器。

你知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:14:24.263

"if (progressEvent.lengthComputable) {" 没有匹配的右括号。

可能是破坏了后续方法 onUploadSuccess 和 onUploadError。或者也许这只是你问题中的一个错字。

顺便说一句，最好为每个 imageURI 保存一个 FileTransfer 引用，而不是使用对单个 FileTransfer 的全局引用。然后您可以一次上传多张照片，并且仍然保留单独取消每张上传的能力，例如

```
// basic implementation of hash map of FileTransfer objects
// so that given a key, an abort function can find the right FileTransfer to abort
function SimpleHashMap()
{
    this.items = {};
    this.setItem = function(key, value) { this.items[key] = value; }
    this.getItem = function(key)
                   {
                       if (this.hasItem(key)) { return this.items[key]; }
                       return undefined;                    
                   }
    this.hasItem = function(key) { return this.items.hasOwnProperty(key); }
    this.removeItem = function(key)
                      {
                          if (this.hasItem(key)) { delete this.items[key]; }
                      }
}
var fileTransferMap = new SimpleHashMap(); 
```

...然后在创建新的 FileTransfer 后在 uploadPhoto 中：

```
// register this object so that abort can find it
fileTransferMap.setItem(imageURI, ft); 
```

...然后在取消按钮中传递 imageURI：

```
function onStopUploadBtn(imageURI)
{
    var ft = fileTransferMap.getItem(imageURI);
    if (ft)
    {
        console.log('Aborting');
        ft.abort(onUploadSuccess, onUploadError);
    }
} 
```

...并记住在下载完成或出现错误时从地图中删除 ft：

```
fileTransferMap.removeItem(imageURI); 
```

# asp.net-mvc-4 - MVC4 如何在视图处于活动状态时将 li 类设置为活动状态

> ID：14787706
> 
> 赞同：3
> 
> 时间：2013-02-09T11:39:24.780
> 
> 标签：asp.net-mvc-4

大家好，我`_layout`的如下

```
<div id="primary_nav">
    <ul>
        <li class="left active" id="nav_discussion" runat="server">
          <a title="Go to Forums" href="@Url.Action("Index", "Home")">Forums</a>
       </li>
       <li class="left" id="nav_members" runat="server">
          <atitle="Go to Member List" href="@Url.Action("Members", "Home")">Members</a>
       </li>
    </ul>
</div> 
```

我将其用作`layout or master page`我创建的每个视图，现在我需要的是当我移动到时，`...Home/Members`我想将成员选项卡设置为活动状态

![在此处输入图像描述](../Images/bf8416a1277dc1bb583536d2e3e87d87.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T12:36:03.687

我建议您为此编写一个自定义助手。我在这里举例说明了如何实现这一点：[https ://stackoverflow.com/a/6323032/29407](https://stackoverflow.com/a/6323032/29407)

您当然可以在您的 _Layout 中编写一些意大利面条代码（正如您已经开始的那样）并使用 RouteData 测试当前控制器和操作并测试它是否等于指定值并应用一些自定义 CSS 类使其成为*active*。我不想展示这方面的例子，因为我认为这是非常糟糕的做法。我会做的是把你的菜单项封装在一个可重用的助手中。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-09T20:52:11.043

我建议您在单击成员时使用 Jquery 从表单中删除“左激活”类并将其添加到成员中......这将是一个简单的解决方案！

# c# - DataList 控件排列

> ID：14787712
> 
> 赞同：0
> 
> 时间：2013-02-09T11:39:51.113
> 
> 标签：c#, asp.net, webforms, controls, datalist

我想创建 DataList 控件，我想首先为“名字”设置 2 列，然后为“姓氏”设置 2 列。像这样：

**名字**| **第二名**
Peter   Johnson
约翰   Peterson

当我尝试使用此代码时，它不起作用。这不是我想要的名称：

```
 <asp:DataList ID="NamesDataList" runat="server" >
        <HeaderTemplate>
            First Name
            Last Name
        </HeaderTemplate>
        <ItemTemplate>
            <%# Eval("FirstName")%>
            <%# Eval("LastName")%>
        </ItemTemplate>                 
    </asp:DataList> 
```

例如，我想要像这样的 DataList 控件。[https://www.packtpub.com/sites/default/files/Article-Images/asp.net-img03.png](https://www.packtpub.com/sites/default/files/Article-Images/asp.net-img03.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:47:11.260

尝试这个

```
<asp:DataList ID="NamesDataList" runat="server" >
        <HeaderTemplate>
            <table>
              <tr>
                 <td>First Name</td>
                 <td>Last Name</td>
              </tr>   
             </table>
        </HeaderTemplate>
        <ItemTemplate>                               
             <table>
              <tr>
                 <td><asp:Label ID="lblRaterName" runat="server" Text='<%# Eval("FirstName")%>'></asp:Label> </td>
                 <td><asp:Label ID="lblRaterName" runat="server" Text='<%# Eval("LastName")%>'></asp:Label></td>
              </tr>   
             </table>
        </ItemTemplate>                 
    </asp:DataList> 
```

# iphone - 触摸屏幕时隐藏 UITableview，除了表格视图

> ID：14787713
> 
> 赞同：-1
> 
> 时间：2013-02-09T11:39:52.477
> 
> 标签：iphone, xcode4.2

当我们开始编辑文本字段显示下面的表格视图时，我有一个包含许多文本字段的滚动视图。

当我们触摸屏幕上的任何位置时，必须隐藏表格视图，这很好，我们触摸表格视图单元格时，该单元格中的文本显示在文本字段中

我的问题是当我触及 Uitableviewcell 时没有获取 uitextfield 中的数据。

请帮帮我...

我的代码是

```
 UITapGestureRecognizer *tapGesture1 = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(dismisstable)];
    tapGesture1.cancelsTouchesInView = NO;    
    [testScroll addGestureRecognizer:tapGesture1];
    [tapGesture1 release];

-(void)dismisstable
{

self.autocompletetableview.hidden=YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:57:44.133

首先只需检查 tableView 数据源和委托

```
yourTableView.delegate=self;
yourTableView.dataSource=self; 
```

**和**

只需添加`UITapGestureRecognizer`

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(singleTapGestureCaptured:)];
    [scr addGestureRecognizer:singleTap];
}

- (void)singleTapGestureCaptured:(UITapGestureRecognizer *)gesture
{
    //Get touch point
    //CGPoint touchPoint=[gesture locationInView:scr];

    //Hide tableView
    [self.yourTableView setHidden:YES];
} 
```

按照我的回答更多[地从 UITextField、UITextView 作为 UIScrollView 的子视图解除键盘？](https://stackoverflow.com/questions/14785395/dismissing-the-keyboard-from-a-uitextfield-uitextview-as-a-subview-of-uiscrollvi/14788474#comment20707823_14788474)

# html - Float:left 导致其他分隔符的样式问题

> ID：14787716
> 
> 赞同：0
> 
> 时间：2013-02-09T11:40:15.013
> 
> 标签：html, css

我目前正在从事一个设计项目，我为三种不同的产品提供了三个 div。我还有一个付款方式图像 div 以及一个版权 div。三个产品 div 在它们自己的包装器中浮动到左侧，使它们能够居中并正确显示，尽管这导致版权和付款方式 div 出现在与它们应该在的位置不同的位置。

已修复，感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T11:45:03.447

我认为您需要`clear:both`在浮动列表之后的元素上添加 CSS。

```
.copyright {
     ...
     clear:both;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:50:03.343

这就是你正在寻找的[http://css-tricks.com/snippets/css/clear-fix/](http://css-tricks.com/snippets/css/clear-fix/)

```
.group:before,
.group:after {
    content: "";
    display: table;
} 
.group:after {
    clear: both;
}
.group {
    zoom: 1; /* For IE 6/7 (trigger hasLayout) */
} 
```

# java - Android：应用程序在手机上崩溃，但在我尝试打开网页时在模拟器上工作

> ID：14787717
> 
> 赞同：1
> 
> 时间：2013-02-09T11:40:17.507
> 
> 标签：java, android

首先，我无法将我的 Galaxy s2 Android 4.0.3 连接到我的 PC，eclipse 找不到作为设备，所以我必须编译并复制到我的存储卡上，然后将其安装在手机上。我正在调试模式下编译。这会是问题吗？其次，我使用 API Level 10 (Gingerbread 2.3.3) 来开发应用程序。

应用程序做什么？

该应用程序。有两个 EditText （用户名和密码）和一个提交按钮。当此人提交“表单”时，我将连接到一个网页，并验证此人提供的用户名和密码是否有效。如果它是有效的，那么这个人就会被迫打开一个网页。这是崩溃的应用程序。手机显示屏变暗，10-15 秒后我收到“应用程序崩溃”的警报。在模拟器上一切正常。

这是代码：

```
@Override
public void onCreate(Bundle savedInstance){
   //...
   if( checkUser(strUsername, strPassword) ){
      Intent browserInt = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.mydomain.com"));
      startActivity(browserInt);
   }
}

private boolean checkUser(String user, String pass){

        HttpClient client = new DefaultHttpClient();
        HttpGet req = new HttpGet("http://mydomain.com/login.php?u="+user+"&p="+pass+"");
        try {
            HttpResponse response = client.execute(req);

            String html = "";
            InputStream in = response.getEntity().getContent();
            BufferedReader reader = new BufferedReader(new InputStreamReader(in));
            String line = "";
            while((line = reader.readLine()) != null){
                html += line;
            }

            reader.close();
            in.close();

            if(html == null || html.length() < 5) return false;

            String[] temp1 = html.split("<body>");
            String[] temp2 = temp1[1].split("</body>");

            if(!temp2[0].equals("correct")) return false;

            return true;

        } catch (ClientProtocolException e) {
            System.out.println(e);
        } catch (IOException e) {
            System.out.println(e);
        }

        return false;
    } 
```

**解决方案** 我启动了 CMD 并输入了路径（adb.exe 所在的位置）。就我而言：

> D:/eclipse android/5.sdk/sdk/platform-tools/adb.exe

然后我在我的设置中启用了调试并将 USB 插入我的电脑。然后我在 CMD 中输入了这个命令：

> adb.exe 启动服务器

然后我检查了我的设备（我的手机）是否已连接：

> adb.exe 设备

他就在那里。我进入eclipse并运行应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:47:26.347

[在此处](http://www.softpedia.com/get/Internet/Telephony-SMS-GSM/Kies.shtml)下载 Samsung Kies ，这将为您的设备安装驱动程序，然后 adb 将连接到您的设备，您将能够在 LogCat 中看到错误。根据您的错误描述，您的真实设备上的网络连接似乎很慢/不稳定，请检查它是否正常，然后重试。当您连接到设备时，请发布错误日志。

# java - 如何使用 PagerTitleStrip 创建具有 android 布局的视图

> ID：14787718
> 
> 赞同：0
> 
> 时间：2013-02-09T11:40:22.983
> 
> 标签：java, android

我正在编写一个 android 4.0 项目，并使用 PagerTitleStrip 创建了一个新 Activity。

所以活动xml如下：

```
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/pager"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MenuActivity" >

<!--
This title strip will display the currently visible page title, as well as the page
titles for adjacent pages.
-->

<android.support.v4.view.PagerTitleStrip
    android:id="@+id/pager_title_strip"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="top"
    android:background="#33b5e5"
    android:paddingBottom="4dp"
    android:paddingTop="4dp"
    android:textColor="#fff" />

</android.support.v4.view.ViewPager> 
```

它在 Activity.java 类中创建了一个 Dummy 部分片段

```
public class MenuActivity extends FragmentActivity {
/**
 * The {@link android.support.v4.view.PagerAdapter} that will provide
 * fragments for each of the sections. We use a
 * {@link android.support.v4.app.FragmentPagerAdapter} derivative, which
 * will keep every loaded fragment in memory. If this becomes too memory
 * intensive, it may be best to switch to a
 * {@link android.support.v4.app.FragmentStatePagerAdapter}.
 */
SectionsPagerAdapter mSectionsPagerAdapter;

/**
 * The {@link ViewPager} that will host the section contents.
 */
ViewPager mViewPager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_menu);

    // Create the adapter that will return a fragment for each of the three
    // primary sections of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(
            getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_menu, menu);
    return true;
}

/**
 * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
 * one of the sections/tabs/pages.
 */
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        // getItem is called to instantiate the fragment for the given page.
        // Return a DummySectionFragment (defined as a static inner class
        // below) with the page number as its lone argument.
        Fragment fragment = new DummySectionFragment();
        Bundle args = new Bundle();
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position + 1);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        // Show 3 total pages.
        return 3;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
        case 0:
            return getString(R.string.title_section1).toUpperCase();
        case 1:
            return getString(R.string.title_section2).toUpperCase();
        case 2:
            return getString(R.string.title_section3).toUpperCase();
        }
        return null;
    }
}

/**
 * A dummy fragment representing a section of the app, but that simply
 * displays dummy text.
 */
public static class DummySectionFragment extends Fragment {
    /**
     * The fragment argument representing the section number for this
     * fragment.
     */
    public static final String ARG_SECTION_NUMBER = "section_number";

    public DummySectionFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Create a new TextView and set its text to the fragment's section
        // number argument value.
        TextView textView = new TextView(getActivity());
        textView.setGravity(Gravity.CENTER);
        textView.setText(Integer.toString(getArguments().getInt(
                ARG_SECTION_NUMBER)));
        return textView;
    }
}

} 
```

在 DummySectionFragment 中，而不是创建一个 TextView 并返回它。我想在一个单独的 xml 文件中设计每个页面的布局（这里我配置了 3 个页面）。我该如何配置？

因此，如果我理解正确，我将返回 GridView ListView 或为加载的 xml 返回的任何视图，而不是此处加载的 TextView。我怎样才能做到这一点 ？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:49:14.457

创建三个片段类。让每个人管理自己的 UI。`SectionsPagerAdapter`根据位置实例化正确的片段类。

# xcode4.5 - 尚未收到 PayPal 令牌以进行此交易

> ID：14787719
> 
> 赞同：5
> 
> 时间：2013-02-09T11:40:42.177
> 
> 标签：xcode4.5

在 iphone 应用程序中，当使用 Paypal 沙盒测试帐户结帐所选购物车项目时，我收到错误“尚未收到 PayPal 令牌以进行此交易”。任何人都可以澄清错误是在服务器端还是在应用程序端？我的代码是---

```
- ( IBAction ) btnPaybyClicked:( id ) sender {
    HUD = [[MBProgressHUD showHUDAddedTo:self.navigationController.view animated:YES] retain];
    HUD.labelText = NSLocalizedString(@"hud_redirecting_to_paypal", @"");
    JBMLog(@"strPaypalDevicetoken %@", _strPaypalDevicetoken);

//    NSLog(@"strPaypalDevicetoken %@", _strPaypalDevicetoken);

    //NSURL *url = [NSURL URLWithString:PAYPAL_URL];
    NSURL *url = [NSURL URLWithString:PAYPAL_AIW_URL];
    NSLog(@"URLlll = %@",url);
    User *currentUserObj = [UserDefaults getUserProfile];

    float deliveryCharge = 0.0;

    _asiFormRequest = [ASIFormDataRequest requestWithURL:url];
    [_asiFormRequest addRequestHeader:@"Content-Type" value:@"application/x-www-form-urlencoded"];
    [_asiFormRequest setPostValue:[sender tag] == 0 ? PAYPAL_PAYWITH_PAYPAL: PAYPAL_PAYWITH_CREDITCARD forKey:@"landingPage"];
    [_asiFormRequest setPostValue:[NSNumber numberWithInt:currentUserObj.userId] forKey:@"userid"];
    [_asiFormRequest setPostValue:[NSString stringWithFormat:@"%@ %@", currentUserObj.firstName, currentUserObj.lastName] forKey:@"custName"];
    [_asiFormRequest setPostValue:currentUserObj.address forKey:@"custAdress"];
    [_asiFormRequest setPostValue:currentUserObj.suburb forKey:@"custSuberb"];
    [_asiFormRequest setPostValue:currentUserObj.postalcode forKey:@"custPostCode"];
    [_asiFormRequest setPostValue:[NSString stringWithFormat:@"%.2f", deliveryCharge] forKey:@"DeliveryCharge"];

    [_asiFormRequest setPostValue:currentUserObj.phone forKey:@"custPhone"];
    [_asiFormRequest setPostValue:currentUserObj.email forKey:@"custEmail"];

    NSMutableArray *mArCart = [[DBModel database] shoppingList];

    int i = 0;
    float totalAmount = 0.0;
    for (Product *productObj in mArCart) {
        [_asiFormRequest setPostValue:[NSString stringWithFormat:@"%d",productObj.productId] forKey:[NSString stringWithFormat:@"productArray[%d][productId]", i]];

        [_asiFormRequest setPostValue:[NSString stringWithFormat:@"%d",productObj.selectedColorId] forKey:[NSString stringWithFormat:@"productArray[%d][colorId]", i]];

        [_asiFormRequest setPostValue:[NSString stringWithFormat:@"%d",productObj.selectedSizeId] forKey:[NSString stringWithFormat:@"productArray[%d][sizeId]", i]];

        [_asiFormRequest setPostValue:productObj.productName forKey:[NSString stringWithFormat:@"productArray[%d][name]", i]];

        [_asiFormRequest setPostValue:[NSString stringWithFormat:@"%.2f", productObj.selectedPrice] forKey:[NSString stringWithFormat:@"productArray[%d][price]", i]];

        [_asiFormRequest setPostValue:[NSString stringWithFormat:@"%d", productObj.selectedQuantity] forKey:[NSString stringWithFormat:@"productArray[%d][qty]", i]];

        i++;
        totalAmount += productObj.selectedPrice*productObj.selectedQuantity;
    }
    [_asiFormRequest setPostValue:[NSString stringWithFormat:@"%.2f",totalAmount+deliveryCharge] forKey:@"amount"];

    [_asiFormRequest setPostValue:[NSString stringWithFormat:@"%.2f",totalAmount] forKey:@"ItemTotal"];

    NSURL *url1 = [NSURL URLWithString:[NSString stringWithFormat:@"%@?token=%@", PAYPAL_AIW_URL, _payPalToken]];
    NSLog(@"uuu%@",url1);

    paymentTotal = totalAmount+deliveryCharge;
    [_asiFormRequest setDelegate:self];
    [_asiFormRequest setTimeOutSeconds:REQEST_TIMEOUT];

    [_asiFormRequest setDidFinishSelector:@selector(finishedPayPalFirstCallReqest:)];  
    [_asiFormRequest setDidFailSelector:@selector(failedPayPalFirstCallReqest:)];
    [_asiFormRequest startAsynchronous];
} 
```

# php - Phpass 哈希密码检查

> ID：14787720
> 
> 赞同：0
> 
> 时间：2013-02-09T11:40:48.013
> 
> 标签：php, hash, mysqli, phpass

在过去的 3 周里，我一直在开发自己的社交网络，我正在使用 phpass 使用以下代码片段将密码散列到我的数据库中...

```
// END FORM DATA ERROR HANDLING
// Begin Insertion of data into the database

require("php_includes/PasswordHash.php");
$hasher = new PasswordHash(8,false);
$p_hash = $hasher->HashPassword($p);
if (strlen($p_hash)>=20){

    // Add user info into the database table for the main site table
    $sql = "INSERT INTO users (username, email, password, gender, country, ip, signup, lastlogin, notescheck)       
            VALUES('$u','$e','$p_hash','$g','$c','$ip',now(),now(),now())";
    $query = mysqli_query($db_conx, $sql); 
    $uid = mysqli_insert_id($db_conx); 
```

我遇到的一个小问题是在我的登录页面上，我有一个简单的表单，页面顶部有以下代码块......

```
include_once("php_includes/check_login_status.php");
// If user is already logged in, header that weenis away
if($user_ok == true){
    header("location: user.php?u=".$_SESSION["username"]);
    exit();
}
// AJAX CALLS THIS LOGIN CODE TO EXECUTE
if(isset($_POST["e"])){
    // CONNECT TO THE DATABASE
    include_once("php_includes/db_conx.php");
    // GATHER THE POSTED DATA INTO LOCAL VARIABLES AND SANITIZE
    $e = mysqli_real_escape_string($db_conx, $_POST['e']);
    require('php_includes/PasswordHash.php');
    $hasher = new PasswordHash(8, FALSE);
    $hash = $hasher->HashPassword($p);
    $checked = $hasher->CheckPassword($p, $hash);
    $p = $_POST["p"];
    // GET USER IP ADDRESS
    $ip = preg_replace('#[^0-9.]#', '', getenv('REMOTE_ADDR'));
    // FORM DATA ERROR HANDLING
    if($e == "" || $p == ""){
        echo "login_failed";
        exit();
    } else {
    // END FORM DATA ERROR HANDLING
        $sql = "SELECT id, username, password FROM users WHERE email='$e' AND activated='1' LIMIT 1";
        $query = mysqli_query($db_conx, $sql);
        $row = mysqli_fetch_row($query);
        $db_id = $row[0];
        $db_username = $row[1];
        $db_pass_str = $row[2];
        if($p != $db_pass_str){
            echo "login_failed";
            exit();
        } else {
            // CREATE THEIR SESSIONS AND COOKIES
            $_SESSION['userid'] = $db_id;
            $_SESSION['username'] = $db_username;
            $_SESSION['password'] = $db_pass_str;
            setcookie("id", $db_id, strtotime( '+30 days' ), "/", "", "", TRUE);
            setcookie("user", $db_username, strtotime( '+30 days' ), "/", "", "", TRUE);
            setcookie("pass", $db_pass_str, strtotime( '+30 days' ), "/", "", "", TRUE); 
            // UPDATE THEIR "IP" AND "LASTLOGIN" FIELDS
            $sql = "UPDATE users SET ip='$ip', lastlogin=now() WHERE username='$db_username' LIMIT 1";
            $query = mysqli_query($db_conx, $sql);
            echo $db_username;
            exit();
        }
    }
    exit();
} 
```

基本上发生的事情是我在尝试登录时收到一条错误消息！有人有什么想法吗？

为答案欢呼已经改变了它......

```
?><?php
// AJAX CALLS THIS LOGIN CODE TO EXECUTE
if(isset($_POST["e"])){
    // CONNECT TO THE DATABASE
    include_once("php_includes/db_conx.php");
    // GATHER THE POSTED DATA INTO LOCAL VARIABLES AND SANITIZE
    $e = mysqli_real_escape_string($db_conx, $_POST['e']);
    require('php_includes/PasswordHash.php');
    $hasher = new PasswordHash(8, FALSE);
    $hash = $hasher->HashPassword($p);
    $checked = $hasher->CheckPassword($p, $hash);
    $hash = $_POST["p"];
    // GET USER IP ADDRESS
    $ip = preg_replace('#[^0-9.]#', '', getenv('REMOTE_ADDR'));
    // FORM DATA ERROR HANDLING
    if($hash != $db_pass_str){//and not $p != $dp_pass_str
       echo "login_failed";
       exit();
    } else {
    // END FORM DATA ERROR HANDLING
        $sql = "SELECT id, username, password FROM users WHERE email='$e' AND activated='1' LIMIT 1";
        $query = mysqli_query($db_conx, $sql);
        $row = mysqli_fetch_row($query);
        $db_id = $row[0];
        $db_username = $row[1];
        $db_pass_str = $row[2];
            // CREATE THEIR SESSIONS AND COOKIES
            $_SESSION['userid'] = $db_id;
            $_SESSION['username'] = $db_username;
            $_SESSION['password'] = $db_pass_str;
            setcookie("id", $db_id, strtotime( '+30 days' ), "/", "", "", TRUE);
            setcookie("user", $db_username, strtotime( '+30 days' ), "/", "", "", TRUE);
            setcookie("pass", $db_pass_str, strtotime( '+30 days' ), "/", "", "", TRUE); 
            // UPDATE THEIR "IP" AND "LASTLOGIN" FIELDS
            $sql = "UPDATE users SET ip='$ip', lastlogin=now() WHERE username='$db_username' LIMIT 1";
            $query = mysqli_query($db_conx, $sql);
            echo $db_username;
            exit();
        }
    exit();
}
?> 
```

但我仍然收到登录错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:45:14.497

您将 $p 设置为 POST 密码（未散列）

```
$p = $_POST["p"]; 
```

看起来它应该是：

```
 if($hash != $db_pass_str){         //and not $p != $dp_pass_str
  echo "login_failed"; 
```

即比较存储的散列密码与输入和散列的密码（以便比较两个散列）

# mysql - 基于字段限制 MySQL 结果

> ID：14787723
> 
> 赞同：0
> 
> 时间：2013-02-09T11:41:08.573
> 
> 标签：mysql, sql

我已经调用`Products`了表，即`type`字段`type`值可能是这些值中的任何一个`1,2,3,4`。

现在我想得到结果

```
1\. Group the results based on 'type'
2\. And Limit the results for each group to 5. 
```

我怎样才能做到这一点，目前我正在使用以下查询

```
SELECT 
  *,
  (
    (
      CASE
    WHEN product_title LIKE '%xyz%' 
    THEN 2 
    ELSE 0 
      END
    ) + (
      CASE
    WHEN product_description LIKE '%xyz%' 
    THEN 1 
    ELSE 0 
      END
    )
  ) AS relevance 
FROM
  Products 
WHERE (
    (
      product_title LIKE '%xyz%' 
      OR product_description LIKE '%xyz%'
    )
  ) 
  AND product_available = 1 
  AND product_deleted <> 1 
ORDER BY relevance DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:48:24.390

这是一个简单的

```
SELECT 
 p.id, 
 p.type 
FROM 
 Products p
WHERE
 5 > (SELECT COUNT(id) from Products where id < p.id and type = p.type) 
```

我已经为它创建了 sqlfiddle，[http: //sqlfiddle.com/#!2/ab0c00/15](http://sqlfiddle.com/#!2/ab0c00/15)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:49:22.870

```
 SELECT * FROM products;
 +------------+------+
 | product_id | type |
 +------------+------+
 |          1 |    4 |
 |          2 |    3 |
 |          3 |    2 |
 |          4 |    4 |
 |          5 |    3 |
 |          6 |    1 |
 |          7 |    4 |
 |          8 |    3 |
 |          9 |    4 |
 |         10 |    2 |
 |         11 |    2 |
 |         12 |    1 |
 |         13 |    3 |
 |         14 |    2 |
 |         15 |    3 |
 |         16 |    1 |
 |         17 |    2 |
 |         18 |    1 |
 |         19 |    2 |
 |         20 |    4 |
 |         21 |    2 |
 +------------+------+

 SELECT x.* 
   FROM products x 
   JOIN products y 
     ON y.type = x.type 
    AND y.product_id <= x.product_id 
  GROUP 
     BY x.product_id 
 HAVING COUNT(*) <=3
  ORDER
     BY type
      , product_id;
 +------------+------+
 | product_id | type |
 +------------+------+
 |          6 |    1 |
 |         12 |    1 |
 |         16 |    1 |
 |          3 |    2 |
 |         10 |    2 |
 |         11 |    2 |
 |          2 |    3 |
 |          5 |    3 |
 |          8 |    3 |
 |          1 |    4 |
 |          4 |    4 |
 |          7 |    4 |
 +------------+------+ 
```

# java - 如何为微调器的每个项目分配不同的活动？

> ID：14787729
> 
> 赞同：0
> 
> 时间：2013-02-09T11:41:33.377
> 
> 标签：java, android

我有一个由微调器和提交按钮组成的页面。我想要实现的是当用户在列表中选择一个项目并单击提交时，它应该将他带到另一个具有 web 视图的布局。微调器中的每个项目都应在布局中打开不同的 .html 页面。

我现在所拥有的是正在从微调器中选择该项目，但我不确定如何对其执行 onclick 侦听器...

主要活动的代码在这里

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.beef);

        addListenerOnButton();
        addListenerOnSpinnerItemSelection();

    }

    public void addListenerOnSpinnerItemSelection(){

        spinner1 = (Spinner) findViewById(R.id.spinner1);
        spinner1.setOnItemSelectedListener(new CustomOnItemSelectedListener());
    }

    //get the selected dropdown list value
    public void addListenerOnButton() {

        spinner1 = (Spinner) findViewById(R.id.spinner1);

        btnSubmit = (ImageButton) findViewById(R.id.imageButton1);

        btnSubmit.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                /*Nothing as of now*/
                //I need to call the ID of the selected item from the spinner here and start new activity
            }

        });

    }

} 
```

CustomOnItemSelectedListener 的代码在这里

```
@Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        // TODO Auto-generated method stub
         if (arg2 == 0) // First item selected
    {
    //Here I need to give an id for the .html file  

    }
    else if (arg2 == 1) // Second
    {
            //Here I need to give an id for the .html file  
    }

    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:59:59.570

```
@Override
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

    String selItem = arg0.get(arg2); // String representation of the selected item

    if (arg2 == 0) // First item selected
    {

    }
    else if (arg2 == 1) // Second
    {

    }
    // etc
}

@Override
public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub
} 
```

# visual-c++ - 0xC0000005：访问冲突写入位置0x00000000

> ID：14787730
> 
> 赞同：0
> 
> 时间：2013-02-09T11:41:44.920
> 
> 标签：visual-c++, access-violation, loadlibrary

我在构建调试项目时遇到了一个奇怪的问题。我已经在网上搜索过，但不幸的是我还没有找到任何线索。

我正在尝试在我的控制台应用程序项目中加载一个 dll。我的 dll 有几个函数，我只想调用 FUNC1 来检查这个函数是否正常工作。

我的 dl 中 FUNC1 的声明是：

```
int FUNC1 (char *inVal, int *retVal) 
```

我已经在我的控制台应用程序中成功加载了 dll，并使用函数指针调用了 FUNC1，如下所示：

```
int main()
{

HINSTANCE testInstance;

testInstance = LoadLibrary("Path\\to\\my.dll");

typedef int (WINAPI *FUNC1Ptr)(char *inVal, int *retVal);

if(testInstance == NULL)
{
    printf("The dll is not loaded, Please check the path!\n");
}
else 
{

    printf("The dll is loaded successfully!!");
}

FUNC1Ptr FUNC1Lnk = (FUNC1Ptr)GetProcAddress(testInstance,"FUNC1");

if (!FUNC1tLnk)
{
    FreeLibrary(testInstance);
    printf("Error in getting function address!!\n");
}
else
{

    int *ret = 0;
    char *PIN = NULL;
    PIN = "test";

    int retVal1 = FUNC1Lnk( PIN, ret );

}
return 0;
} 
```

PS。违规被引用到 free.c 文件中：

```
 retval = HeapFree(_crtheap, 0, pBlock);
    if (retval == 0)
    {
        errno = _get_errno_from_oserr(GetLastError());
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:08:19.610

如何`FUNC1`使用指针？它可能不喜欢`int *`传递给它的内容为空。

试试这个（有一个实际的整数类型 - 不是指针 - 并获取它的地址）：

```
int ret = 0;
char *PIN = NULL;
PIN = "test";

int retVal1 = FUNC1Lnk( PIN, &ret ); 
```

# css - 隐藏背面可见性时取消图像变换/过渡

> ID：14787732
> 
> 赞同：1
> 
> 时间：2013-02-09T11:41:54.250
> 
> 标签：css, css-transitions

我有一个点击后会翻转的盒子。里面还有一张在悬停时放大的图像，如图[所示](http://jsfiddle.net/aJY34/2/)。
问题是当我将鼠标移出或放回时，隐藏的图像上的缩放过渡会短暂显示。
[我尝试](http://jsfiddle.net/VhXvd/1/)修复它：

```
#box.flip:hover img{
    -webkit-transform: none;
} 
```

但是这个在翻转过渡完成之前重置图像，看起来很难看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:02:41.890

只需添加 z-index：

```
#box.flip .amount{
    -webkit-transform: rotateX(0deg);
    z-index:999;
} 
```

[http://jsfiddle.net/aJY34/3/](http://jsfiddle.net/aJY34/3/)

# google-maps - 在谷歌地图上显示数据（数字）而不是大头针

> ID：14787733
> 
> 赞同：1
> 
> 时间：2013-02-09T11:41:57.410
> 
> 标签：google-maps

我想在地图上显示数据库中的数据（数字），而不是仅仅指向该位置并单击图钉以显示数据，我希望它已经显示在图钉所在的位置。我用这个例子来制作带有别针的谷歌地图：http: [//tips4php.net/2010/10/use-php-mysql-and-google-map-api-v3-for-displaying-data-on-map/](http://tips4php.net/2010/10/use-php-mysql-and-google-map-api-v3-for-displaying-data-on-map/)

我无法显示图像，因为我是新用户，所以这里有一个我想在地图上显示的示例，有关价格的信息而不是通常的图钉：[http ://www.norc-imobiliare.ro](http://www.norc-imobiliare.ro)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:55:22.933

您可以使用 Image Charts -API 的[动态图标](https://developers.google.com/chart/image/docs/gallery/dynamic_icons?hl=de#encoding)。但是这个 API 已被弃用，它可能（但不能）在 2015 年停止工作。

其他选项：

1.  创建一个自己的服务器端脚本，将字符串（价格）作为参数并根据输入提供所需的图像。
2.  创建一个覆盖而不是标记，它可以包含任何 HTML。例如[infoBox](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/reference.html)将可用。

# iphone - AFNetworking——GET 使用什么？

> ID：14787737
> 
> 赞同：0
> 
> 时间：2013-02-09T11:42:06.193
> 
> 标签：iphone, ios, objective-c, afnetworking

我应该使用 AFHTTPRequestOperation.h 还是 AFJSONRequestOperation.h 通过 http GET 请求资源（ascii）？

我找不到这个简单任务的任何示例代码，是否每个人都使用 JSON 请求方法和类，即使他们不一定请求 JSON？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:47:53.130

`AFJSONRequestOperation`将尝试将响应解码为对象的 json，因为您根本不需要它，您可能应该使用`AFHTTPRequestOperation`

# php - 如何使用 php 变量分配 javascript 变量或数组

> ID：14787740
> 
> 赞同：1
> 
> 时间：2013-02-09T11:42:13.853
> 
> 标签：php, javascript, datepicker

我的问题可能很简单或与其他问题类似，但我无法完成这项任务。

我正在尝试**动态禁用 datepicker 中的某些日期**。我只是在运行一个提供假期列表的查询。

```
$date[]=$year.'/'.$month.'/'.$day; // array 
```

我正在使用内爆，这样我就可以有**逗号**分隔的列表

```
$abc=implode(',',$date); 
```

所以 $abc 包含日期。

这是我的**javascript**

```
 <script type="text/javascript">
//var Alldays = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday"];
/* var disable= '<?php echo $info; ?>'; // yyyy/MM/dd*/
var disableDates="<?php =$abc; ?>"; 

//var disableDays = ["Saturday", "Sunday"];
//var disableDates = ["2013/02/26", "2013/02/28"];
alert (disableDates);
function ShowDisableDates(date) {
ymd = date.getFullYear() + "/" + ("0" + (date.getMonth() + 1)).slice(-2) + "/" + ("0" + date.getDate()).slice(-2);
//alert(ymd);
//ymd= ("0" + (date.getMonth() + 1)).slice(-2) + "/" + ("0" + date.getDate()).slice(-2) + "/" + date.getFullYear();
day = new Date(ymd).getDay();
if ($.inArray(ymd, disableDates) < 0 ) {
return [true, "enabled", "Book Now"];
} else {
return [false, "disabled", "Sold Out"];
}
}
$(function() {
$("#datepicker").datepicker({beforeShowDay:ShowDisableDates});
});
</script> 
```

但我无法访问从**$abc**到 javascript 的日期。

如果我将它们声明为静态

```
var disableDates = ["2013/02/26", "2013/02/28"]; 
```

它工作正常

请指导我解决这个问题，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T11:45:22.753

如果`$abc`是一个数组：

```
var disableDates = <?= json_encode($abc); ?>; 
```

# java - 来自 Facebook 的不同访问令牌

> ID：14787742
> 
> 赞同：0
> 
> 时间：2013-02-09T11:42:33.120
> 
> 标签：java, javascript, android

我正在开发一个使用 OAuth 进行身份验证的应用程序。

问题是，当我尝试使用 passport.js（node.js）从 facebook 获取 access_token 时，我得到的结果与我尝试在 Android 上使用 Scribe 获取时有所不同。有什么理由吗？

当我尝试使用 twitter 时，访问令牌是相同的，我可以匹配用户....

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:02:22.520

除非我误解了这个问题，否则您可以使用 FB 响应中的“id”字段来检测其是否为同一用户（无论您最终使用哪种 API/语言）。这些 ID 对于每个用户都是唯一的，应该允许您检测同一用户是通过 Android（Scribe）还是通过 passport.js（节点）登录的。希望能帮助到你

# php - 如何测试 cakephp parseExtension？

> ID：14787748
> 
> 赞同：0
> 
> 时间：2013-02-09T11:43:17.800
> 
> 标签：php, cakephp, controller, components, cakephp-2.3

`parseExtension`我在我的 cakephp 2.3.0 中设置了for json。没有错误显示。有用？

我该如何测试？

在 RoR 中很容易通过以下方式进行测试

```
https://mydomain.de/view/4.json 
```

它如何在 cakephp 上运行？

我的 View-Action 是这样的。

```
 public function view($id = null) {
            if (!$this->Atla->exists($id)) {
                    throw new NotFoundException(__('Invalid atla'));
            }
            $options = array('conditions' => array('Atla.' . $this->Atla->primaryKey => $id));
            $this->set('atla', $this->Atla->find('first', $options));

            $this->Atla->id = $id;
            $result = $this->Atla->read();
            $this->response->type('json');
            $this->response->body(json_encode($result));
            return $this->response;   
            $this->set(compact('atlas'));

    } 
```

为什么我总是收到一个 json 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:05:07.147

如果你使用[_serialize](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html#using-data-views-with-the-serialize-key)键 cakephp 可以自动为你创建 json 和 xml 视图。我通常使用以下内容来创建 json 或 xml 视图：

```
public function view() {
  // data I want to display
  $record1 = $this->ModelName->find('first', ...);
  $this->set('record1', $record1);

  $record2 = $this->ModelName->find('first', ...);
  $this->set('record2', $record2);

  // option 1: serialize the hard way 
  $this->set('_serialize', array('record1', 'record2'));

  // option 2: serialize the easy way
  $this->set('_serialize', array_keys($this->viewVars));
} 
```

PS：你的`return`语句后面的代码永远不会被执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:37:49.103

您将创建视图

应用程序/视图/Atlas/json/view.ctp

这是用于 .json 请求的视图。*没有*.json 的请求将使用常规视图文件：

```
app/View/Atlas/view.ctp 
```

这里有更多关于创建/使用 JSON 和 XML 视图的信息：http: [//book.cakephp.org/2.0/en/views/json-and-xml-views.html#using-a-data-view-with-view -文件](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html#using-a-data-view-with-view-files)

从该页面 view.ctp 可能包含类似的内容；

```
// View code - app/View/Posts/json/index.ctp
foreach ($posts as &$post) {
    unset($post['Post']['generated_html']);
}
echo json_encode(compact('posts', 'comments')); 
```

但是，这实际上取决于您要实现的目标。如果您只对 JSON 响应使用“Atlas/view”操作，而根本不使用 HTML，则有时您可以在 Controller 中生成响应体。与 MVC 约定不太“符合”，但它使您免于创建仅做的视图`echo json_encode($data);`；)

```
public function view($id)
{
    $this->MyModel->id = $id;
    $result = $this->MyModel->read();

    $this->response->type('json');
    $this->response->body(json_encode($result));

    //Return reponse object to prevent controller from trying to render a view
    return $this->response;
} 
```

如果您*确实*想同时使用“HTML”和“JSON”，具体取决于请求（带/不带 .json 扩展名），您应该有*两个*视图文件；1 表示 JSON，1 表示 HTML；

```
// This view will be used for your JSON requests
app/View/Atlas/json/view.ctp

// This view will be used for non-JSON (html) requests:
app/View/Atlas/view.ctp 
```

在 json-view 中，使用 json_encode(.....) 输出数据；在 'normal'/html 视图中，只输出普通数据

在您的控制器中，将数据设置为正常

```
public function view($id = null) {
        $this->Atla->id = $id;
        if (!$this->Atla->exists()) {
                throw new NotFoundException(__('Invalid atla'));
        }
        $this->set('atla', $this->Atla->read());

} 
```

# php - MySQL选择一周前的行

> ID：14787750
> 
> 赞同：3
> 
> 时间：2013-02-09T11:43:19.053
> 
> 标签：php, mysql

MySQL，我怎样才能只选择超过一周的行？

我需要这样做来创建一个系统来删除我存储在数据库中的旧 tmp 文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-09T11:53:25.660

试试这个，

```
select * from table
where DATEDIFF(now(),colname) > 7; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T11:49:06.533

```
select * from table
where (SELECT DATEDIFF(curtime(),col_name)) > 7 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-09T11:50:51.453

```
SELECT * FROM `table` WHERE `created` < dateadd(week,-1,getdate()) 
```

# r - 更改窗口大小时，quantmod 系列顶部的矩形关闭

> ID：14787751
> 
> 赞同：1
> 
> 时间：2013-02-09T11:43:21.483
> 
> 标签：r, quantmod

我正在尝试在用`quantmod`.

```
> s<-get(getSymbols('phmd'))["2012:"]
> d<-findSupport(s,p=5,threshold=1)
> d
       low     high cnt        std
1 14.79000 14.85292   2 0.04448880
2 13.27222 13.31500   2 0.03024846
3 13.09000 13.15000   2 0.04242641
4 14.12000 14.20583   2 0.06069333
5 12.30222 12.38421   2 0.05797449
6 11.38269 11.43200   2 0.03486580
> chartSeries(s)
> u <- par("usr")
> rect(u[1],d[,'low'],u[2],d[,'high'],col=rgb(1,0,0,alpha=0.5),border=0) 
```

更改窗口大小时，绘制的矩形会偏离。为什么会这样，我该如何克服呢？请协助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:08:05.833

我不太清楚`quantmod`。但我认为你必须`add_XXX`向绘图对象（chob）添加信息并重新绘制它。`addLines`例如见。

也就是说，当我使用`chart_Series`实验功能时，我在重新调整窗口大小时没有问题。

![在此处输入图像描述](../Images/bf8ca1fba1abca6c1d6d40143eb5da24.png)

# video - 如何流式传输视频？

> ID：14787755
> 
> 赞同：0
> 
> 时间：2013-02-09T11:43:31.450
> 
> 标签：video, stream, webserver, media

基本上我有一个包含许多视频的个人网络服务器设置，因为我喜欢在许多不同的地方观看这些视频。但是，到目前为止，我必须转到媒体文件的直接文件路径并等待它完全完成下载。无论如何我可以从我的网络服务器流式传输视频吗？我对 PHP 有基本的了解，对 C# 也有一些了解。

有什么可以使这尽可能简单吗？也许一个已经建立的系统可以为我做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:58:47.747

流式传输意味着您使用流式传输协议（如 RTP）。基本上，HTTP 协议只能提供超文本，不能提供视频内容。所以你必须在你的服务器上安装某种流媒体软件。

我其实不知道，但我想 Jinzora 对你来说是个不错的选择，因为它是用 PHP 开发的，并使用 MySQL 作为后端（[http://de.wikipedia.org/wiki/Jinzora](http://de.wikipedia.org/wiki/Jinzora)），但是有还有很多其他的解决方案。

然后，您可以使用流式客户端观看流式传输的内容。我认为 VLC 很常见，但也有像[http://www.longtailvideo.com/jw-player/](http://www.longtailvideo.com/jw-player/)这样的 Flash 客户端，您可以将其集成到您的网站中。

# javascript - 在Javascript中转换True-> 1和False-> 0？

> ID：14787761
> 
> 赞同：80
> 
> 时间：2013-02-09T11:44:16.797
> 
> 标签：javascript

除了 ：

`true ? 1 : 0`

是否有任何可以“翻译”`True->1`和`False->0`在 Javascript 中的小技巧？

我已经搜索但找不到任何替代方案

***“短把戏”是什么**意思？*

答案：same as`~~6.6`是一个技巧`Math.floor`

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2013-02-09T11:49:54.163

很多方法可以做到这一点

```
// implicit cast
+true; // 1
+false; // 0
// bit shift by zero
true >>> 0; // 1, right zerofill
false >>> 0; // 0
true << 0; // 1, left
false << 0; // 0
// double bitwise NOT
~~true; // 1
~~false; // 0
// bitwise OR ZERO
true | 0; // 1
false | 0; // 0
// bitwise AND ONE
true & 1; // 1
false & 1; // 0
// bitwise XOR ZERO, you can negate with XOR ONE
true ^ 0; // 1
false ^ 0; // 0
// even PLUS ZERO
true + 0; // 1
false + 0; // 0
// and MULTIPLICATION by ONE
true * 1; // 1
false * 1; // 0 
```

您也可以使用除法`1`，`true / 1; // 1`但我建议尽可能避免除法。

此外，许多非一元运算符都有[**赋值版本**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Assignment_Operators)，因此如果您有要转换的变量，您可以非常快速地完成。

您可以使用[**此 jsperf**](http://jsperf.com/bool-to-int-many)查看不同方法的比较。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2018-10-30T04:31:53.417

另一种方法可能是使用`Number()`

```
Number(true) // = 1
Number(false) // = 0 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-02-09T11:49:23.420

...或者你可以使用`+true`和`+false`

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-02-09T11:46:43.863

您可以使用`~~boolean`, where `boolean`（显然）是一个布尔值。

```
~~true  // 1
~~false // 0 
```

# c# - DataGridView CellDrag 太敏感

> ID：14787762
> 
> 赞同：1
> 
> 时间：2013-02-09T11:44:25.440
> 
> 标签：c#, datagridview, drag-and-drop

我在winforms上有一个datagridview控件，带有以下事件将“行”拖出数据网格：

```
 private void gridOperations_CellMouseMove(object sender, DataGridViewCellMouseEventArgs e)
    {
        if ((e.Button & MouseButtons.Left) == MouseButtons.Left)
        {

            if (Math.Abs(e.X - mouseDownPos.X) >= SystemInformation.DoubleClickSize.Width || Math.Abs(e.Y - mouseDownPos.Y) >= SystemInformation.DoubleClickSize.Height)
            {
                string[] filesToDrag = { "tmp/generated.log" };
                gridOperations.DoDragDrop(new DataObject(DataFormats.FileDrop, filesToDrag), DragDropEffects.Copy);
            }
        }
    } 
```

问题是我在 datagridview 上也有单击和双击事件，双击事件几乎一开始就不会执行，除非我在单击时根本不移动鼠标。我怎样才能添加一个'thershold'，这样如果我按住鼠标并拖动单元格3个像素，那么它将触发gridOperations.DoDragDrop？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:53:04.077

尝试使用整数计数器。每次触发事件时，都会增加 int，如果达到阈值，则执行其余代码并将其重置为 0。

像：

```
private int thCount = 0;
    private void gridOperations_CellMouseMove(object sender, DataGridViewCellMouseEventArgs e)
    {
        if ((e.Button & MouseButtons.Left) == MouseButtons.Left && thCount==5)
        {
            //... 
            thCount = 0;
        }
        else
        {
            thCount++;
        }
    } 
```

希望我能帮助你

# blackberry - BlackBerry webworks 原生对话框 unicode

> ID：14787764
> 
> 赞同：0
> 
> 时间：2013-02-09T11:44:43.787
> 
> 标签：blackberry, unicode, dialog, alert, blackberry-webworks

我一直在网上寻找答案，但找不到任何东西。我正在开发 Blackberry Webworks 应用程序，问题出在对话框和 unicode 上。例如：

当我使用简单的 javascript 警报（unicodeMsg）时；unicode 工作正常，我可以使用任何字符，包括俄语或立陶宛语。问题是警告框的标题是“JavaScript Alert”，它有点烦人。

当我使用本机警报时，无论是 phonegap 还是 webworks，例如：

> blackberry.ui.dialog.standardAskAsync(unicodeMsg, blackberry.ui.dialog.D_OK, { title : unicodeTitle, size: blackberry.ui.dialog.SIZE_MEDIUM, position : blackberry.ui.dialog.CENTER });

它不显示任何 unicode 字符。我几乎尝试了所有方法（将我的文档设置为 utf-8，使用 \uxxxx 字符，将元标记从 utf-8 更改为 windows-1257 但没有任何效果）

我想问题不在于 html 或 js 文档，也不在于脚本。有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:15:37.180

您需要像这样对 unicode 字符进行编码`text: unescape(encodeURIComponent(unicodeStr))`。

这里有一个例子 - [http://blackberry-webworks.github.com/WebWorks-API-Docs/WebWorks-API-Docs-next-BB10/view/blackberry.invoke.html](http://blackberry-webworks.github.com/WebWorks-API-Docs/WebWorks-API-Docs-next-BB10/view/blackberry.invoke.html)

# iphone - iphone 的 UIPopoverController 不工作？

> ID：14787765
> 
> 赞同：40
> 
> 时间：2013-02-09T11:45:03.427
> 
> 标签：iphone, objective-c, uipopovercontroller

我需要为我的 iPhone 应用程序使用 UIPopOverController，我搜索了 stackoverflow，有人说 UIPopoverController 不能在 iphone iphone 设备上运行 为什么？。当我在 iphone 设备上运行时出现此错误 `reason: '-[UIPopoverController initWithContentViewController:] called when not running under UIUserInterfaceIdiomPad.'`

```
 -(void)btnSetRemainderTapped:(UIButton *)button
{
   setReminderView =[[SetRemainderView alloc]initWithNibName:@"SetRemainderView" bundle:[NSBundle mainBundle]];
setReminderView.contentSizeForViewInPopover = CGSizeMake(setReminderView.view.frame.size.width, setReminderView.view.frame.size.height);
setReminderView.delegate = self;
popOverController = [[UIPopoverController alloc]
                      initWithContentViewController:setReminderView] ;
 CGRect rect = CGRectMake(self.view.frame.size.width/2, self.view.frame.size.height/2, 1, 1);
[popOverController presentPopoverFromRect:rect
                                        inView:self.view
                      permittedArrowDirections:UIPopoverArrowDirectionAny
                                      animated:YES];
} 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-02-15T13:12:33.627

您可以在 iPhone 应用程序中使用 popoverController。

**1.创建一个类别**

```
// UIPopoverController+iPhone.h file
@interface UIPopoverController (iPhone)
+ (BOOL)_popoversDisabled;
@end

// UIPopoverController+iPhone.m file
@implementation UIPopoverController (iPhone)
+ (BOOL)_popoversDisabled {
    return NO; 
} 
@end 
```

**2\. 将其导入您的班级并照常在 iPhone 中使用 popover。**

但请记住，这是私有方法，Apple 可以拒绝您的应用程序。但我认识一些正常使用它的人，Apple 发布了他们的应用程序。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-02-09T14:16:11.053

**编辑：正如 Soberman 所说，由于 iOS 8[可以](https://stackoverflow.com/a/30418212/892696%20%22)使用公共 API 在 iPhone 上呈现弹出框，所以这个答案可能不再相关。**

* * *

正如 Apple 关于[UIPopoverController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverController_class/Reference/Reference.html)的文档中所述：

> Popover 控制器专用于 iPad 设备。

所以不幸的是，没有办法在 iPhone 应用程序中使用这个类。但是有几个自定义的第三方实现 UIPopoverController 提供的功能，增加了对 iPhone 的支持等等。例如，请参阅[https://github.com/50pixels/FPPopover](https://github.com/50pixels/FPPopover)。

编辑：还有另一种高度可定制的用于 iPhone/iPad 的弹出框实现值得一试：[https](https://github.com/nicolaschengdev/WYPopoverController) ://github.com/nicolaschengdev/WYPopoverController 。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2015-05-23T22:32:06.530

从 iOS8 开始，我们现在可以创建弹出框了，这在 iPhone 上和在 iPad 上是一样的，这对于那些制作通用应用程序的人来说尤其棒，因此不需要制作单独的视图或代码。

您可以在这里获得课程和演示项目：[https ://github.com/soberman/ARSPopover](https://github.com/soberman/ARSPopover)

您需要做的就是 subclass `UIViewController`，符合`UIPopoverPresentationControllerDelegate`协议并设置所需`modalPresentationStyle`的`delegate`值：

```
// This is your CustomPopoverController.m

@interface CustomPopoverController () <UIPopoverPresentationControllerDelegate>

@end

@implementation CustomPopoverController.m

- (instancetype)init {
    if (self = [super init]) {
        self.modalPresentationStyle = UIModalPresentationPopover;
        self.popoverPresentationController.delegate = self;
    }
    return self;
}

- (UIModalPresentationStyle)adaptivePresentationStyleForPresentationController:(UIPresentationController *)controller {
    return UIModalPresentationNone; //You have to specify this particular value in order to make it work on iPhone.
} 
```

然后，在要显示它的方法中实例化新创建的子类，并为 和 分配另外两个`sourceView`值`sourceRect`。它看起来像这样：

```
CustomPopoverController *popoverController = [[CustomPopoverController alloc] init];
popoverController.popoverPresentationController.sourceView = sourceView; //The view containing the anchor rectangle for the popover.
popoverController.popoverPresentationController.sourceRect = CGRectMake(384, 40, 0, 0); //The rectangle in the specified view in which to anchor the popover.
[self presentViewController:popoverController animated:YES completion:nil]; 
```

你有它，漂亮，整洁的模糊弹出框。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-09-08T08:04:34.743

所以@Sobermans 的回答并没有真正为我解决从头到尾的问题，所以我想详细说明我是如何使用[docs 完成的](https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIPopoverPresentationController_class/index.html#//apple_ref/doc/uid/TP40014327-CH1-SW8)。话虽如此，我确实喜欢使用您自己的演示控制器子类来管理您想要展示的所有定制的想法。

## 1\. 创建你的控制器来展示

第一步是实例化您要呈现的控制器：

```
let vc: UIViewController = ...
vc.modalPresentationStyle = .Popover
vc.preferredContentSize = CGSize(width: CGRectGetWidth(view.bounds)/2, height: 100) 
```

现在我们有了一个具有弹出式演示样式和任意内容大小的控制器。

## 2\. 实施`adaptivePresentationStyleForPresentationController`

默认情况下`UIPopoverPresentationController`将在 iPhone 上全屏显示，因此为了防止这种行为，您需要将自适应演示样式强制设置为无。

首先我们设置popover展示控制器的delegate

```
vc.popoverPresentationController.delegate = self; 
```

然后我们实现`UIPopoverPresentationControllerDelegate`

```
func adaptivePresentationStyleForPresentationController(controller: UIPresentationController) -> UIModalPresentationStyle {
    return .None;
} 
```

## 3.呈现和配置弹出窗口

首先我们需要调用`presentViewController`，然后才能配置弹出框：

```
presentViewController(vc, animated:true, completion:nil)
if let popover = vc.popoverPresentationController {
    popover.permittedArrowDirections = .Right | .Left
    popover.sourceView = button
    popover.sourceRect = button.bounds
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-09-18T00:02:16.127

使用自定义弹出框控制器，例如：

[https://github.com/sammcewan/WYPopoverController](https://github.com/sammcewan/WYPopoverController)

（这似乎是我找到的最受支持的一个）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-08T11:00:30.610

我最终创建了我的自定义工具提示/弹出框类。

可以使用任何内容视图进行初始化并动态调整其框架。

希望能帮助到你。

[https://github.com/akeara/AKETooltip](https://github.com/akeara/AKETooltip)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-31T13:39:14.097

如果您想在 Swift 中执行此操作，我相信代码如下：

```
extension UIPopoverController {
    class var _popoversDisabled : Bool {
    get { return false }
    }
} 
```

编辑：它在带有 iOs7.1 的 iPhone 上的 Xcode 6 beta 4 中工作

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-05T10:35:30.303

这是一个非常有趣（且令人沮丧）的阅读主题。我无法相信 Apple 会毫无理由地*阻止iPhone 上的弹出对话框。*

而且，确实，在 iOS 8 上，如果您尝试解决此限制，它将使您的弹出窗口显示为全屏模式对话框。

以下出色的网页描述了“Apple 如何作弊”，让其自己的 iBooks 和 iTunes 应用程序打破自己的规则，并允许弹出窗口——但只能来自*他们自己的*iPhone 应用程序。

[苹果如何作弊](http://marksands.github.io/2014/05/27/how-apple-cheats.html)

读一读（警告：它会让你更讨厌 Apple 和 XCode..）

想要绕过iOS 8 上 的“*未在 UIUserInterfaceIdiomPad 下运行时调用的 UIPopoverController ”错误？*

简单的。

只需进入您的 .plist 文件，并将 Bundle ID 更改为 " `com.apple.itunesu`" 以使 XCode 认为您的应用程序实际上是 iTunes。

然后您的弹出窗口将正常工作。

![在此处输入图像描述](../Images/a8479bc90aa80668d6f4e40fc2cbba99.png)

（叹。）

另一种方法是直接将您添加`UIViewController`到屏幕上。

![弹出](../Images/591d9e8ac127a96899a6927dbdf6f65f.png)

在这个例子中，我想要一个“帮助屏幕”出现在我的 iPhone 屏幕上。它是一个`UIViewController`.xib 文件，它存储在它自己的 .xib 文件中，它有几行来添加一个漂亮的边框：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    // Give our popup a pretty curved border
    self.view.layer.borderColor = [[UIColor blueColor] CGColor];
    self.view.layer.borderWidth = 1.0;
    self.view.layer.cornerRadius = 8;    
} 
```

为了显示它，我只需创建一个 this 的实例`UIViewController`，将它添加到我的屏幕，然后居中：

```
-(void)showHelperScreen
{
    if (self.helperScreen == nil)
    {
        //  Add the popup UIViewController to our screen
        self.helperScreen = [[HelperViewController alloc] init];
        [self.view addSubview:self.helperScreen.view];
    }

    //  Center the popup in the middle of the screen
    CGSize screenSize = [[UIScreen mainScreen] applicationFrame].size;
    self.helperScreen.view.center = CGPointMake(screenSize.width/2, screenSize.height/2);
} 
```

当然，我还需要添加一些代码来使弹出窗口在用户点击它外部时消失，但这至少表明您*可以*（安全地）在 iPhone 上显示弹出窗口，即使您的应用程序*没有被*特别调用iTunes 或 iBook。

瞧。

希望这会有所帮助，如果有人需要我，我会回到我安全、快乐的地方（换句话说，Visual Studio）。

# c# - 在 C# 中以特定坐标打印字符串

> ID：14787767
> 
> 赞同：-1
> 
> 时间：2013-02-09T11:45:07.770
> 
> 标签：c#, string, position

我在这里有一点事情，我必须创建一个程序，在特定坐标处打印出一个字符串。所以，我知道我需要 2 个用于字符串位置的变量和一个用于字符串的字符串变量，但是我不知道如何继续。有任何想法吗？

编辑这是我走了多远：

```
class ColoredText
{
    public int x, y; // koordinaterna
    public string hello;
    ConsoleColor färg;

    public ColoredText(int x, int y, string Position)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:04:26.593

它被标记为 C#。所以我会选择我所知道的。在 WPF 中，您可能想要使用 Canvas 或 Grid。
使用 Grid 你想设置子元素的边距。
使用 Canvas，您想设置 Top 和 Left 属性。

```
// In XAML
<Grid>
    <TextBlock Name="TB"/>
</Grid>

// In code-behind:
Point p = new Point(x, y);
TB.Margin = new Thickness(p.x, p.y, 0, 0);
TB.Text = "Lorem ipsum"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:51:01.867

试试这个：http: [//msdn.microsoft.com/en-us/library/76c5db29.aspx](http://msdn.microsoft.com/en-us/library/76c5db29.aspx)

```
public void DrawStringPointF(PaintEventArgs e)
{

    // Create string to draw.
    String drawString = "Sample Text";

    // Create font and brush.
    Font drawFont = new Font("Arial", 16);
    SolidBrush drawBrush = new SolidBrush(Color.Black);

    // Create point for upper-left corner of drawing.
    PointF drawPoint = new PointF(150.0F, 150.0F);

    // Draw string to screen.
    e.Graphics.DrawString(drawString, drawFont, drawBrush, drawPoint);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T11:51:22.493

好吧，如果您要在 FORM 上的特定坐标处打印字符串，那么您可以执行以下操作...

创建一个新标签并将其放在您的表单上，然后执行类似...

现在您可以通过执行以下操作来设置标签坐标..

```
 int xCoordinate = 0;
        int yCoordinate = 0;
        string labelText = "Enter your text here";

        label1.Location = new Point(xCoordinate, yCoordinate);
        label1.Text = labelText; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T11:54:57.193

基于[此](http://msdn.microsoft.com/en-us/library/system.console.setcursorposition.aspx)

```
class ColoredText
{
  public int x, y; // koordinaterna
  public string hello;
  ConsoleColor farg;  // removed the utf-8 char

    public ColoredText(int x, int y, string Position)
    {
       Console.ForegroundColor = farg;
       Console.SetCursorPostion(x,y);
       Console.Write(Position);
       Console.ResetColor();
    }
} 
```

# jquery - 对搜索结果的查询集进行排序并通过 ajax 呈现

> ID：14787772
> 
> 赞同：3
> 
> 时间：2013-02-09T11:45:55.190
> 
> 标签：jquery, html, ajax, django, django-templates

我被这个问题困住了：我有一个搜索结果页面，其中有几个结果。我希望用户能够根据某些标准对结果进行排序。我在 AJAX 中这样做。问题是如何将来自服务器的排序数据再次渲染到字段。

```
function sort(){
    var sortid = $('#sort').val();
    $.ajax({
        type: "POST",
        url: "/sort/",
        data: { sortid: sortid },
    }).done(function(data){
        // how to render this sorted 'data' back to <td>s?  
    });
} 
```

这是我的绑定代码：

```
<select onchange="sort()" id="sort">   
    <option>price</option>
    <option>rate</option>
</select> 
```

这是结果的地方：

```
<tr class="result">
    <td>
        <li>{{loc.locationname}}</li>
    </td>
    <td>    
        <li>{{loc.rating}}</li>
    </td>
    <td>
        <li>{{loc.price}}</li>
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T11:40:21.390

您的视图可以返回一个渲染片段，就像您可以在客户端渲染到一个 div

您的 ajax 调用可能如下所示

```
function sort(){
    var sortid = $('#sort').val();
    $.ajax({
        type: "POST",
        url: "/sort/",
        data: { sortid: sortid },
    }).done(function(data){
         $('#results-div').html(data.html);
    });
} 
```

示例视图

```
import json
from django.shortcuts import HttpResponse
from django.template import loader, RequestContext

def my_view(request, query=None):
    # trivialized example

    sortid = request.REQUEST.get('sortid')

    # you might want to store the results into cache 
    results = MyModel.objects.filter(name__icontains=query).order_by(sortid)

    if request.is_ajax():
       t = loader.get_template('search_results.html')
       html = t.render(RequestContext({'results': results))
       return HttpResponse(json.dumps({'html': html}))
    # handle the other cases here 
```

你的内心`search_results.html`只会将结果呈现到你的表格中

```
{% for loc in results %}
<tr class="result">
    <td>
        <li>{{loc.locationname}}</li>
    </td>
    <td>    
        <li>{{loc.rating}}</li>
    </td>
    <td>
        <li>{{loc.price}}</li>
    </td>
</tr>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T11:51:56.753

```
 function(data){
   var tablehtml='<tbody>'
   $.each(data,function(i,res) {
       tablehtml+='<tr class="result">'+
                   '<td><li>'+res.locationname+'</li></td>'+
                   //...
       });
    $("table").html(tablehtml+'</tbody'>)
    } 
```

注意：我添加了 tbody 标记，因为如果 html 包含在单个父级中，则这种添加 html 的方式比它是（长）节点列表时要快得多

呃...编辑，但要使用它，您需要在 .ajax 中告知您期待 json 响应 ( `datatype:'json'`)，但现在情况并非如此

您还需要从服务器发送一个特定的标头（“content-type:application/json”）

如果你坚持发送 html 然后在服务器端解析数据（包装它）并在回调中立即附加它

如果你想重新考虑你的排序功能概念，如果数据不是那么大&如果你可以 gzip；我会立即加载所有数据并在 js 中进行排序（不再有服务器调用该功能对用户来说会更快：页面加载等待时间稍长，但之后会立即排序

# editor - 一个简单的自动补全编辑器

> ID：14787774
> 
> 赞同：0
> 
> 时间：2013-02-09T11:46:40.217
> 
> 标签：editor

我有一个通用 BNF 语法，我想实现一个编辑器，从该语法开始并通过自动完成功能，可以建议属于从该语法派生的语言的短语和符号字符串。实现此编辑器的最佳方法是什么？

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:51:27.187

我建议[使用 KDE 的“kate”](http://www.kde.org/applications/utilities/kate/)编辑器：

*   成熟灵活的编辑器
*   基于Qt，跨平台
*   优秀的高亮引擎
*   工作的自动完成引擎
*   可独立使用或嵌入式

使用这样一个现有的编辑器只剩下实现语法描述并将其加载到编辑器中的任务。这种方法更不容易出错，因为从头开始尝试实现编辑器编号 29583659。

# git - 强制 git push 后如何拉动？

> ID：14787776
> 
> 赞同：58
> 
> 时间：2013-02-09T11:46:47.247
> 
> 标签：git

假设我从 git repo 中提取更改。然后回购力量的作者推送到中央回购。现在我不能拉，因为历史被改写了。

假设作者强制推送了正确的版本，我怎样才能拉出新的提交（并放弃旧的提交）？

我知道这是糟糕的 git 工作流程，但有时你无法避免这种情况。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-02-09T11:48:50.787

## 丢弃本地更改

如果您想丢弃您的工作，`fetch`并且`reset`. 例如，如果您有一个名为的远程`origin`和一个名为的分支`master`：

```
$ git fetch origin
$ git reset --hard origin/master # Destroys your work 
```

## 保持本地更改

如果你不想丢掉你的工作，你将不得不做一个`git rebase --onto`. 假设旧的`origin`看起来像这样：

```
A ---> B ---> C
              ^
              origin/master 
```

你有这个：

```
A ---> B ---> C ---> X ---> Y ---> Z
              ^                    ^
              |                    master
              origin/master 
```

现在，上游的变化改变了事情：

```
A ---> B ---> C ---> X ---> Y ---> Z
 \                                 ^
  ---> B'---> C'                   master
              ^          
              origin/master 
```

您必须运行`git rebase --onto origin/master <C> master`，上游更改之前`<C>`旧分支的 SHA-1 在哪里。`origin/master`这给了你这个：

```
A ---> B ---> C ---> X ---> Y ---> Z
 \
  ---> B'---> C'---> X'---> Y'---> Z'
              ^                    ^
              |                    master
              origin/master 
```

请注意 B、C、X、Y 和 Z 现在是如何“无法访问”的。它们最终会被 Git 从您的存储库中删除。在此期间（90 天），Git 会在 reflog 中保留一份副本，以防万一你犯了错误。

## 修正错误

如果您`git reset`或`git rebase`错误而意外丢失了一些本地更改，您可以在 reflog 中找到更改。

在评论中，用户建议`git reflog expire`使用`--expire=now`但**不要运行此命令**，因为这会**破坏**您的安全网。使用 reflog 的全部目的是让 Git 有时会在您运行错误命令时拯救您。

基本上，此命令将立即销毁上述示例中的 B、C、X、Y 和 Z 提交，这样您就无法取回它们。运行这个命令并没有真正的好处，除了它可能会节省一点磁盘空间，但 Git 会在 90 天后清除数据，所以这个好处是短暂的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-23T18:04:10.283

如果没有本地提交，这将从强制推送中恢复您的结帐。您将了解远程分支的最新信息，并且可以稍后提交您的本地工作。

```
git fetch
git stash
git reset --hard origin/master # destroys your work
git stash pop # restores your work as local changes
git mergetool # fix any conflicts 
```

此时，您的本地更改与以前一样。您的结帐是最新的，其中包含 master 上的所有更改，或者您正在使用的任何分支。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-28T16:19:00.447

我遇到了这个场景的一个稍微修改过的版本。这是我所做的：

## 初始条件

```
A--->B--->C--->D--->E
                    |
             local-1/master

A--->B--->C--->D--->E
                    |
              origin/master

A--->B--->C--->D--->E
                    |
             local-2/master 
```

## 壁球和强制推动

```
A--->B--->CDE
           |
    local-1/master

A--->B--->CDE
           |
     origin/master

A--->B--->C--->D--->E
                    |
             local-2/master 
```

## 在 local-2/master 上同步更改

```
$ git reset --soft B

    A--->B---> (local uncommitted changes)
         |
  local-2/master

$ git stash save "backup"

    A--->B
         |
  local-2/master

$ git pull origin master

    A--->B--->CDE
               |
        local-2/master 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-11T11:57:43.993

如果您没有对本地分支进行任何更改，您可以尝试以下命令序列。请记住，这是实现您要求的粗略方法。

```
git checkout master
git pull
git remote update origin -p
git branch -D myBranch
git checkout myBranch 
```

`git remote update origin -p`是可选的。

如果您进行了更改并且您不关心本地分支的内容，您可以尝试以下操作：

```
git stash
git stash drop
git checkout master
git pull
git remote update origin -p
git branch -D myBranch
git checkout myBranch 
```

这两种技术都非常冗长且繁琐。但是把工作做好。

# simulation - 网络模拟器

> ID：14787777
> 
> 赞同：-1
> 
> 时间：2013-02-09T11:46:51.960
> 
> 标签：simulation

我有 opnet 14.5 我正在尝试找到一个具有双接口的移动节点，一个用于 802.11e (WLAN)，另一个用于 802.16e (Wimax)，但似乎没有 opnet 14.5 有这个节点，如果没有我需要特别执照 ？。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:06:43.980

我将使用模型中的两个接口使用 OPNET Modeler 构建自定义模式。您将必须设计连接和规则。它应该是一个跨频带中继或桥接器，还是应该是一个仅充当源和接收器的单个端点节点（如计算机）？这些都是你需要考虑的问题。如果是后一种情况并且您有有线+无线型号，您可以尝试用 WiMax 接口替换有线接口，从而产生两个发射器/接收器对（WiMAX 与 WLAN）。我不确定许可（在众多许可类型中，您可能需要 Modeler + 他们的无线许可），但我确信 Riverbed/OPNET 客户服务会很乐意为您提供帮助。

# function - 如何在没有宏的情况下评估excel中的函数？

> ID：14787784
> 
> 赞同：2
> 
> 时间：2013-02-09T11:47:31.090
> 
> 标签：function, reference, evaluate, excel

曾经有一个名为评估的函数可以评估单元格的内容。但是，该功能似乎不再存在。这是我要解决的问题（这应该是批量运行的）：

A1 包含一个创建字符串的连接函数`='C:\users\example\[ref.xlsx]'Sheet!D5`。此字符串应该是对另一个工作簿中的单元格的引用。但是，Excel 将等号视为字符串，因此不会评估该函数。

我知道最常见的解决方法：

1.  仅将值复制并特殊粘贴到另一个单元格，然后将“=”替换为“=”，单元格会自动评估（不是一个选项，因为需要手动处理并且不能批量使用）
2.  编写一个评估单元格的宏（不是一个选项，因为批处理与启用宏的工作簿不兼容）
3.  创建一个 UDF，以评估每个评估宏的单元格（还需要启用宏的工作簿，因此不是一个选项）

宏不是一种选择。不能按功能自动化的手动流程也不是一种选择。我不知何故需要excel来向我展示参考单元格的内容。谢谢你的帮助！！！

姆普登

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T12:29:56.133

有一个与同一问题相关的老问题：[公式引用其他工作簿](https://stackoverflow.com/questions/890484/formula-referencing-other-workbooks)。

不幸的是，根据那里的答案以及 Excel 帮助中的信息：

*   [创建指向另一个工作簿中单元格区域的外部引用（链接）](http://office.microsoft.com/en-us/excel-help/create-an-external-reference-link-to-a-cell-range-in-another-workbook-HP010342364.aspx)
*   [打开或更改外部参考的源工作簿（链接）](http://office.microsoft.com/en-001/excel-help/open-or-change-source-workbooks-of-external-references-links-HP010102969.aspx)

使`INDIRECT`函数适用于外部工作簿的唯一方法（这是唯一可以解析计算引用的函数） - 是打开这些工作簿。

因此，使用纯 Excel 似乎无法完成您的任务。

# android - 当我在 android 中使用 Hash Map 时显示警告（使用新的 SparseArray )

> ID：14787785
> 
> 赞同：65
> 
> 时间：2013-02-09T11:47:37.403
> 
> 标签：android, hashmap

我是在 android 中开发的新手。在我正在使用的 android 应用程序中`HashMap`，但我收到警告：

```
**"Use new SparseArray<String>(...) instead for better performance"** 
```

这是什么意思，我该如何使用`SparseArray<String>`？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-02-09T11:56:13.660

> 使用 new`SparseArray<String>(...)`代替以获得更好的性能

[由于此处](http://developer.android.com/reference/android/util/SparseArray.html)描述的原因，您会收到此警告。

> SparseArrays 将整数映射到对象。与普通的对象数组不同，索引中可能存在间隙。它旨在比使用 HashMap 将整数映射到对象更有效。

现在

> 我如何使用 SparseArray ？

您可以通过以下方式做到这一点：

1.  `HashMap`方法：

    ```
    Map<Integer, Bitmap> _bitmapCache = new HashMap<Integer, Bitmap>();
    private void fillBitmapCache() {
         _bitmapCache.put(R.drawable.icon, BitmapFactory.decodeResource(getResources(), R.drawable.icon));
         _bitmapCache.put(R.drawable.abstrakt, BitmapFactory.decodeResource(getResources(), R.drawable.abstrakt));
         _bitmapCache.put(R.drawable.wallpaper, BitmapFactory.decodeResource(getResources(), R.drawable.wallpaper));
         _bitmapCache.put(R.drawable.scissors, BitmapFactory.decodeResource(getResources(), 
     }

    Bitmap bm = _bitmapCache.get(R.drawable.icon); 
    ```

2.  `SparseArray`方法：

    ```
    SparseArray<Bitmap> _bitmapCache = new SparseArray<Bitmap>();
    private void fillBitmapCache() {
         _bitmapCache.put(R.drawable.icon, BitmapFactory.decodeResource(getResources(), R.drawable.icon));
         _bitmapCache.put(R.drawable.abstrakt, BitmapFactory.decodeResource(getResources(), R.drawable.abstrakt));
         _bitmapCache.put(R.drawable.wallpaper, BitmapFactory.decodeResource(getResources(), R.drawable.wallpaper));
         _bitmapCache.put(R.drawable.scissors, BitmapFactory.decodeResource(getResources(), 
     }

    Bitmap bm = _bitmapCache.get(R.drawable.icon); 
    ```

希望它会有所帮助。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-02-09T11:56:54.740

`SparseArray`当您使用 an`Integer`作为键时使用。

使用 时`SparseArray`，**键**将始终保持为**原始变量**，这与使用时`HashMap`需要将 a**`Object`**作为**键**不同，这将导致int在短时间内**成为`Integer`对象**，同时将对象放入地图。

通过使用，`SparseArray`您将为**垃圾收集器**节省一些工作。

所以使用就像一个`Map<Integer,String>`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-09T12:03:48.340

这暗示您的代码有更好的数据结构。

该提示来自 Lint。当你有一个`HashMap`整数到别的东西时，你通常会得到它。

它最大的优点是将整数键视为原语。换句话说，它不会转换为`Integer`（Java 对象）以将其用作键。

这在使用大地图时很重要。`HashMap`在这种情况下，将导致创建很多很多`Integer`对象。

[在此处](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/G-ceop4xp48)查看更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-31T22:48:51.620

对于整数键值对，SparseArray 是比 HashMap 更好的内存效率数据结构。它是特定于 Android 的，我相信它不能用于 Java SE。

有时，Linter 警告显示 SparseArray 必须像上面那样使用。这个愚蠢的警告可能是对的，也可能是错的。如果您发现它合适，您需要决定使用 SparseArray 而不是 HashMap，或者您需要使用 @SuppressLint 注释来抑制它。

要决定是否实施，值得做一些研究并评估您的情况。你可以在这里找到所有有用的链接

[https://gunhansancar.com/sparsearray-vs-hashmap/](https://gunhansancar.com/sparsearray-vs-hashmap/)

[https://developer.android.com/reference/android/util/SparseIntArray](https://developer.android.com/reference/android/util/SparseIntArray)

# python - python中的计数器可以这样比较吗？

> ID：14787787
> 
> 赞同：3
> 
> 时间：2013-02-09T11:47:40.300
> 
> 标签：python, collections, comparison, counter, reduce

如果您像这样比较两个计数器：

```
counter_a == counter_b 
```

你得到真或假。`reduce`但是，如果您要使用/比较它们`operator.eq`，则会得到 False。有人可以告诉我这里发生了什么吗？

这是一个例子：

```
>>> import collections
>>> import operator
>>> a = ['ab', 'ab', 'ab']
>>> b = ['bc', 'ab', 'something']
>>> counters_a = map(collections.Counter, a)
[Counter({'a': 1, 'b': 1}), Counter({'a': 1, 'b': 1}), Counter({'a': 1, 'b': 1})]
>>> counters_b = map(collections.Counter, b)
[Counter({'c': 1, 'b': 1}), Counter({'a': 1, 'b': 1}), Counter({'e': 1, 'g': 1, 'i': 1, 'h': 1, 'm': 1, 'o': 1, 'n': 1, 's': 1, 't': 1})]
>>> counters_a[0] == counters_a[1]
True
>>> counters_b[0] == counters_b[1]
False
>>> reduce(operator.eq, [1, 1, 1])
True
>>> reduce(operator.eq, [1, 1, 2])
False
>>> reduce(operator.eq, counters_b)
**False**
>>> reduce(operator.eq, counters_a)
**False** 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-09T11:50:45.920

我认为您对做什么感到`reduce` *困惑*。鉴于您的输入，请`reduce`执行以下操作：

```
((counters_a[0] == counters_a[1]) == counters_a[2]) 
```

所以它比较一个布尔值`True`或`False`另一个计数器。计数器*从不*等于布尔值。`reduce`对前两个元素运行操作，然后获取该操作的*结果*并将其与列表的下一个元素一起用作下一个循环的输入。

因为 Python`boolean`类型是 的子类`int`，所以它恰好适用于`1`( `True == 1`is `True`in python)。对所有`2`值做同样的事情，它会失败：

```
>>> reduce(operator.eq, [2, 2, 2])
False 
```

如果要测试所有计数器是否相同，请`all()`改用：

```
>>> all(counters_a[0] == c for c in counters_a[1:])
True
>>> all(counters_b[0] == c for c in counters_b[1:])
False 
```

# magento - Magento 可以用作 CMS 来构建产品目录吗（目前不是商店，但可能在将来）

> ID：14787792
> 
> 赞同：4
> 
> 时间：2013-02-09T11:48:24.800
> 
> 标签：magento, content-management-system, shopping-cart

我必须为移动商店建立一个网站。他们想列出他们的产品，但还不想开始销售。我用 Joomla 和 Virtuemart 做了很多网站。这次我想使用 Magento，因为他们使用 Lightspeed 一个提供与 Magento 社区版集成的 POS。

我的问题是我可以简单地使用 Magento 作为 CMS 来仅显示产品和一些静态页面，例如关于我们等。我通过 stackoverflow 发现一些成员为 magento 推荐了一些好的博客集成，以便解决部分问题（谢谢： -))。

我知道我可以将 wordpress 用作带有 magento 的博客。我换个说法……我可以用它来简单地展示产品吗？

如果是，那么请让我知道我是否出于正确的原因这样做。原因是：

1.  在购物车中添加产品和产品信息变得非常容易（但是在像 Joomla 这样的 CMS 中，每个页面都必须按字面意思“设计”，否则我将不得不使用 CCK 编辑器。客户更新产品 IMO 仍然变得困难）

2.  它带有内置插件，可通过单击后端中的按钮或选项来显示相关/特色产品等，而客户端只需放置适当的标签（使用 CMS 必须在 Joomla 中使用必须设置的插件或模块在特定页面中显示）

3.  与像 Joomla 这样的 CMS 相比，在 Magento 中自动显示图像等更容易，我必须使用设置为在文章中显示的插件或画廊
4.  可以轻松禁用购买/添加到购物车按钮，并且可以添加“更多信息”按钮，该按钮将向客户发送电子邮件。他们得到了客户要求的确切产品代码（在 Joomla 中这样做需要很多额外的东西，比如添加代码或使用带有标签的高级联系表格为每个页面输入）
5.  最后但并非最不重要的一点是，当客户准备好上线时，它可以很容易地转换

Magento 有两个显示器吗？一个只是目录，另一个是商店。我在某些在线商店中看到过（不一定使用magento），我假设他们先创建了一个带有产品页面的网站，然后再添加了一个商店。但在许多情况下，它看起来像是 Shopping 应用程序的一部分。（我似乎不记得他们现在使用的是哪一个）。如果 Magento 允许，那么我认为我的问题已经解决了。我只是使用“目录选项”，当客户准备好进入商店时，我只需使用他们 POS 软件的扩展程序来提取产品。

感谢您花时间阅读/回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T21:31:15.800

仅将 Magento 用作目录而不出售商品非常简单。最简单的做法是使用目录类别列表列出产品，并确保“订单”按钮不可见。

您可以简单地通过从产品详细信息模板（以及列表/网格模板，以防他们有它）中删除它来做到这一点。或者您可以（我认为）将所有产品设置为“缺货”，这将自动删除“订购”按钮。

如果您想要彻底，您应该编辑 cartControllers 的 addAction 以禁用将产品添加到购物车。

如果您打算将 Magento 与 Wordpress 结合使用，Fishpig 开发了一个插件，您可以使用该插件在 Wordpress 博客文章或/和页面中使用短代码来显示产品。更多信息可以在这里找到：http: [//fishpig.co.uk/wordpress-integration/docs/shortcodes.html](http://fishpig.co.uk/wordpress-integration/docs/shortcodes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-18T14:30:21.033

> 系统 > 配置 > 高级 > 高级

禁用您不想使用的模块。

例如，如果您只想将 Magento 用作目录，则禁用销售模块。

希望这对你有用！

# haskell - 网线的完整示例？

> ID：14787797
> 
> 赞同：14
> 
> 时间：2013-02-09T11:48:47.450
> 
> 标签：haskell

我已经阅读了 netwire [quickstart](http://hackage.haskell.org/packages/archive/netwire/4.0.7/doc/html/Control-Wire.html)，但我无法想象整个事物在“真实”应用程序中的样子。由于本教程仅涉及纯电线，因此我对游戏特别感兴趣，如果有的话，但我不介意其他人。Reactive Banana 示例可能也可以。他们应该只是说明 FRP 是如何有用的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-09T14:55:24.733

Netwire 在一些现实世界的应用程序中使用，但我不知道在哪里可以找到它们。他们可能目前处于闭门状态。但是，Reddit 上已经发布了一些示例应用程序，因此您可能需要查看[/r/haskell](http://www.reddit.com/r/haskell/)。只需在那里搜索“netwire”。不幸的是，响应式香蕉示例无济于事，因为这两个库的概念，尤其是事件处理的概念完全不同。

Netwire 应用程序的总体结构是这样的：首先定义一个反应值，我们称之为`simulation`。在最简单的情况下，它是纯线：

```
simulation :: WireP a [Particle] 
```

在没有详细说明（尚未）如何编写该线的情况下，让我现在解释一下它是什么。输出类型是`[Particle]`，所以它是粒子的反应列表。这意味着，此列表可能会随着时间而改变。值得注意的是输入类型是完全多态的，所以你知道这个反应值不依赖于其他反应值。

现在您想要获取粒子列表在特定时间点的实际值。这就是你的会话和步进函数的用武之地。大多数应用程序只需要像`stepSessionP`这种情况下的会话步进函数之一。您只需在循环中调用此函数即可获取此时导线的当前值。无需连续调用此函数。

你会注意到步进函数没有给你 a `[Particle]`，而是 a `Either LastException [Particle]`。这是因为 Netwire 中的无功值可以*抑制*. 这就是事件概念。你从范畴法则知道

```
w . id 
```

与 相同 与 几乎`w`相同`x + 0`与 相同`x`。标识线相对于 是中性的`(.)`。然而，现在想象

```
w . myId 
```

where`myId`就像身份线一样，只是产生它所依赖的任何反应值，但有时它根本不会产生。有时它会忽略该值而只是抑制，在这种情况下，组合本身会抑制。您可以将其解释`myId`为事件连线，并将组合读取为“ `w`if `myId`”：

```
w . keyDown Space 
```

然后你有你的选择运算符`(<|>)`，它就像事件的“或”：

```
w1 . ev1 <|> w2 . ev2 <|> w3 
```

如果`ev1`抑制，则尝试其余的。理想情况下，主线永远不会抑制，因此您可以使用`stepSessionP_`它，但它由潜在的抑制线组成。你也可以使用你自己的抑制幺半群来产生退出信号之类的东西。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-04T20:06:04.060

对于那些在未来偶然发现这一点的人，我认为这是使用 netwire 的完整应用程序的一个很好的例子。他也开始（从今天开始）在 PACMAN 上工作。

[http://www.reddit.com/r/haskell/comments/1kmes7/building_an_asteroids_clone_in_haskell_using/](http://www.reddit.com/r/haskell/comments/1kmes7/building_an_asteroids_clone_in_haskell_using/)

[http://ocharles.org.uk/blog/posts/2013-08-18-asteroids-in-netwire.html](http://ocharles.org.uk/blog/posts/2013-08-18-asteroids-in-netwire.html)

[https://github.com/ocharles/netwire-classics/](https://github.com/ocharles/netwire-classics/)

# django - 如何在单个 django 模型条目中包含数据行？

> ID：14787804
> 
> 赞同：0
> 
> 时间：2013-02-09T11:49:22.573
> 
> 标签：django, django-admin

我在多个 django 网站上工作，并且在使我的项目对客户看起来不错方面受到限制。

例如，在同一个应用程序中，我有两个模型图像和图像库。如果只有一个画廊的管理员条目和一张图像表，那就更好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T12:45:42.910

这正是[`InlineModelAdmin`](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#inlinemodeladmin-objects)它的用途。采取了这样的models.py：

```
class Gallery(models.Model):
   name = models.CharField(max_length=100)

class Image(models.Model):
   image = models.ImageField()
   gallery = models.ForeignKey(Gallery) 
```

你像这样创建一个 admin.py 并且只为 Gallery 注册一个管理类：

```
class ImageInline(admin.TabularInline):
   model = Image

class GalleryAdmin(admin.ModelAdmin):
    inlines = [ImageInline]

admin.site.register(Gallery, GalleryAdmin) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T06:28:56.520

感谢 Dirk 的帮助，这是我的解决方案。

```
from django.db import models

PHOTO_PATH = 'media_gallery'

class Gallerys(models.Model):
    title = models.CharField(max_length=30, help_text='Title of the image maximum 30 characters.')
    slug = models.SlugField(unique_for_date='date', help_text='This is automatic, used in the URL.')
    date = models.DateTimeField()

    class Meta:
        verbose_name_plural = "Image Galleries"
        ordering = ('-date',)

    def __unicode__(self):
        return self.title

class Images(models.Model):
    title = models.CharField(max_length=30, help_text='Title of the image maximum 30 characters.')
    content = models.FileField(upload_to=PHOTO_PATH,blank=False, help_text='Ensure the image size is small and it\'s aspect ratio is 16:9.')
    gallery = models.ForeignKey(Gallerys)
    date = models.DateTimeField()

    class Meta:
        verbose_name_plural = "Images"
        ordering = ('-date',)

    def __unicode__(self):
        return self.title

import models
from django.contrib import admin

class ImageInline(admin.TabularInline):
   model = Images

class GallerysAdmin(admin.ModelAdmin):
    list_display = ('title', 'date', 'slug')
    inlines = [ImageInline]

admin.site.register(models.Gallerys,GallerysAdmin) 
```

# powerpoint - 如何使用 c# 从 .pptx 或 .ppt 文件中提取列表或项目符号详细信息

> ID：14787807
> 
> 赞同：0
> 
> 时间：2013-02-09T11:49:28.580
> 
> 标签：powerpoint

我正在使用 Microsoft Office Interope 程序集使用 c# 从 .pptx 和 .ppt 文件中提取功能。我能够提取有关形状、动画的详细信息，但无法提取有关 ppt 或 pptx 包含哪些类型的项目符号或哪些幻灯片包含项目符号等的详细信息。

请帮我找到这个。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:44:24.663

有几种方法。在下面的代码中，您可以看到可以在程序中访问的文本的属性：

```
ppTextBox.TextFrame2.TextRange.ParagraphFormat.Bullet.Type =
    Office.MsoBulletType.msoBulletNumbered;
ppTextBox.TextFrame2.TextRange.ParagraphFormat.Bullet.Style =
    Office.MsoNumberedBulletStyle.msoBulletAlphaLCParenBoth;

ppTextBox.TextFrame2.TextRange.ParagraphFormat.Bullet.StartValue = 4;
ppTextBox.TextFrame2.TextRange.ParagraphFormat.Bullet.UseTextColor =
    Office.MsoTriState.msoTrue;
ppTextBox.TextFrame2.TextRange.ParagraphFormat.Bullet.UseTextFont =
    Office.MsoTriState.msoTrue; 
```

其中 ppTextBox 是一个形状对象，并注意使用 TextFrame2 而不是 TextFrame。您可以针对枚举列表 Office.MsoBulletType 查询 ParagraphFormat.Bullt.Type 以查看已应用哪个。

有关更多详细信息，请查看[此页面](http://www.davidallenpollock.com/AutomatingPowerPoint.html)以获取有关使用 C# 在 powerpoint 中进行文本处理的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T23:32:11.530

在 VBA 中，你会做这样的事情来检查幻灯片 1 上的项目符号

```
Dim oSh As Shape
Dim x As Long ' Integer in C#?
For Each oSh In ActivePresentation.Slides(1).Shapes
    With oSh
        If .HasTextFrame Then
            If .TextFrame.HasText Then
                With .TextFrame2.TextRange
                    For x = 1 To .Paragraphs.Count
                        Debug.Print .Paragraphs(x).ParagraphFormat.Bullet.[Various properties]

                    Next
                End With
            End If
        End If
    End With
Next 
```

查看 PPT VBA 编辑器中的代码。当您在上面的 Bullet 之后键入点时，智能感知将向您显示可用的属性。

# php - 使 javascript 适应表单

> ID：14787808
> 
> 赞同：0
> 
> 时间：2013-02-09T11:49:36.200
> 
> 标签：php, javascript, forms, email, attachment

所以我有一个表格来处理附件这是php代码

```
<?php

    //we need to get our variables first

    $email_to =   'xemax@tiscalinet.it'; //the address to which the email will be sent
    $name     =   $_POST['name'];  
    $email    =   $_POST['email'];
    $subject  =   "www.goliaerrante.com";
    $message  =   'Nome: '.$_POST['name'].chr(10) . chr(10) . 
                  'Email: '.$_POST['email'].chr(10) . chr(10) .
                  'Telefono: '.$_POST['subject'].chr(10) . chr(10) .
                  'Messaggio: '.$_POST['message'];

$allegato = $_FILES['allegato']['tmp_name'];
$allegato_type = $_FILES['allegato']['type'];
$allegato_name = $_FILES['allegato']['name'];

$msg = "";
$headers = "From: " . $email;

// Verifico se il file è stato caricato correttamente via HTTP
// In caso affermativo proseguo nel lavoro...
if (is_uploaded_file($allegato))
{
  // Apro e leggo il file allegato
  $file = fopen($allegato,'rb');
  $data = fread($file, filesize($allegato));
  fclose($file);

  // Adatto il file al formato MIME base64 usando base64_encode
  $data = chunk_split(base64_encode($data));

  // Genero il "separatore"
  // Serve per dividere, appunto, le varie parti del messaggio.
  // Nel nostro caso separerà la parte testuale dall'allegato
  $semi_rand = md5(time());
  $mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";

  // Aggiungo le intestazioni necessarie per l'allegato
  $headers .= "\nMIME-Version: 1.0\n";
  $headers .= "Content-Type: multipart/mixed;\n";
  $headers .= " boundary=\"{$mime_boundary}\"";

  // Definisco il tipo di messaggio (MIME/multi-part)
  $msg .= "This is a multi-part message in MIME format.\n\n";

  // Metto il separatore
  $msg .= "--{$mime_boundary}\n";

  // Questa è la parte "testuale" del messaggio
  $msg .= "Content-Type: text/plain; charset=\"iso-8859-1\"\n";
  $msg .= "Content-Transfer-Encoding: 7bit\n\n";
  $msg .= $message . "\n\n";

  // Metto il separatore
  $msg .= "--{$mime_boundary}\n";

  // Aggiungo l'allegato al messaggio
  $msg .= "Content-Disposition: attachment;\n";
  $msg .= " filename=\"{$allegato_name}\"\n";
  $msg .= "Content-Transfer-Encoding: base64\n\n";
  $msg .= $data . "\n\n";

  // chiudo con il separatore
  $msg .= "--{$mime_boundary}--\n";
}
else
{
  $msg = $message;
}

// Invio la mail
if (mail($email_to,  $subject, $msg, $headers))
{
  echo 'sent'; // we are sending this text to the ajax request telling it that the mail is sent.. 
}else{
  echo 'failed';// ... or this one to tell it that it wasn't sent    
}
?> 
```

现在我正在尝试调整这个 javascript 来处理消息结果；如果我不使用 javascript 一切正常，当我让 javascript 工作时，只发送电子邮件，没有附件..

```
$(document).ready(function(){  
    $('#send_message').click(function(e){  

        //stop the form from being submitted  
        e.preventDefault();  

        /* declare the variables, var error is the variable that we use on the end 
        to determine if there was an error or not */  
        var error = false;  
        var name = $('#name').val();  
        var email = $('#email').val();  
        var subject = $('#subject').val();  
        var message = $('#message').val();  

        /* in the next section we do the checking by using VARIABLE.length 
        where VARIABLE is the variable we are checking (like name, email), 
        length is a javascript function to get the number of characters. 
        And as you can see if the num of characters is 0 we set the error 
        variable to true and show the name_error div with the fadeIn effect. 
        if it's not 0 then we fadeOut the div( that's if the div is shown and 
        the error is fixed it fadesOut. 

        The only difference from these checks is the email checking, we have 
        email.indexOf('@') which checks if there is @ in the email input field. 
        This javascript function will return -1 if no occurence have been found.*/  
        if(name.length == 0){  
            var error = true;  
            $('#name_error').fadeIn(300);  
        }else{  
            $('#name_error').fadeOut(300);  
        }  
        if(email.length == 0 || email.indexOf('@') == '-1'){  
            var error = true;  
            $('#email_error').fadeIn(300);  
        }else{  
            $('#email_error').fadeOut(300);  
        }  
        if(subject.length == 0){  
            var error = true;  
            $('#subject_error').fadeIn(300);  
        }else{  
            $('#subject_error').fadeOut(300);  
        }  
        if(message.length == 0){  
            var error = true;  
            $('#message_error').fadeIn(300);  
        }else{  
            $('#message_error').fadeOut(300);  
        }  

        //now when the validation is done we check if the error variable is false (no errors)  
        if(error == false){  
            //disable the submit button to avoid spamming  
            //and change the button text to Sending...  
            $('#send_message').attr({'disabled' : 'true', 'value' : 'Sending...' });  

            /* using the jquery's post(ajax) function and a lifesaver 
            function serialize() which gets all the data from the form 
            we submit it to send_email.php */  
            $.post("send_email.php", $("#contact_form").serialize(),function(result){  
                //and after the ajax request ends we check the text returned  
                if(result == 'sent'){ 
                    //if the mail is sent remove the submit paragraph 
                     $('#send_message').remove(); 
                    //and show the mail success div with fadeIn 
                    $('#mail_success').fadeIn(300); 
                }else{ 
                    //show the mail failed div 
                    $('#mail_fail').fadeIn(300); 
                    //reenable the submit button by removing attribute disabled and change the text back to Send The Message 
                    $('#send_message').removeAttr('disabled').attr('value', 'Send The Message');  
                }  
            });  
        }  
    });  
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:35:09.833

前面有人提到，通过 XHR 上传文件所需的必要 HTML5 支持在 IE 中不存在，这在技术上是不正确的。IE10 支持您通过 XHR/ajax 上传文件所需的一切，将它们分割成分区并单独发送每个分区，稍后恢复失败或中断的上传等等。确实，对于不支持 HTML5 文件 API 的浏览器（例如 IE9 及更早版本，以及 Android 2.3.x 及更早版本），确实需要不同的解决方案。不要重新发明轮子，这只会给你带来头痛，而是使用已经存在的工具之一。我建议[Fine Uploader](http://fineuploader.com)无缝处理所有主流浏览器，具有许多功能，并且包括无依赖版本或 jQuery 版本。

有一些插件使用 Flash 或 Java 作为后备。这不是必需的，我建议您避免在客户端使用 Flash 和 Java，因为与客户端 Java 和 Flash 相关的严重安全问题以及这些会给您带来的支持噩梦。Flash 正在消亡，而 Java（客户端）已死。未来将不包括这两个选项中的任何一个，因此，为了您的用户群，请使用本机浏览器/javascript 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T12:06:40.287

you can't post files using jQuery.post because it may not be supported by some browsers XMLHttpRequest implementation (especially IE)

If you want to send files asynchronously (i.e AJAX) you have the following options:

*   Set the form's target to an iframe and submit it "to" the iframe and respond with some javascript that will invoke a javascript function in the parent document. Not really asynchronously, but it will keep you on the same page. No progress bar.

*   Using HTML5 (not supported by IE at the moment, but it should work with chrome, firefox, safari), google for "HTML5 File Upload" there are many articles like this [one](http://www.sitepoint.com/html5-ajax-file-upload/). Not supported by all browsers, a progress bar is possible.

*   If you want a cross-browser solution, have a look at [plupload](http://www.plupload.com/). Plupload tries to use HTML5 file uploads whenever possible, otherwise it will use a "hidden" flash uploader.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T12:02:59.717

您不能使用纯 ajax 方法发送附件，文件不会发送。但是，有许多插件（黑客）可以异步处理它们（即：[AjaxFileUpload](http://www.phpletter.com/Demo/AjaxFileUpload-Demo/)）。

# android - 如何向联系人数据库添加一个额外的字段？

> ID：14787809
> 
> 赞同：1
> 
> 时间：2013-02-09T11:49:37.757
> 
> 标签：android

我想在联系人字段中添加一个字段（列），我可以在代码中为该字段设置值，移动用户无法在联系人属性中看到该字段。这样我可以使用联系人信息而无需创建另一个数据库来复制联系人数据库。这可能吗？请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:19:54.287

我不认为你可以直接修改联系人数据库（或者至少在没有先root设备的情况下不能）。

如果您想向存储的联系人添加其他信息，我认为您最好的选择是实际创建一个新数据库。只需创建一个包含列的新表，`[CONTACT_ID, YOUR_NEW_FIELD]`并将该额外信息存储在该联系人中。此外，这样您就不会使用您的应用程序的专有信息污染联系人的数据库，如果用户删除您的应用程序，这将毫无意义。

# jsp - 通过http请求将xml之类的文件发送到jsp或servlet

> ID：14787810
> 
> 赞同：0
> 
> 时间：2013-02-09T11:49:40.133
> 
> 标签：jsp, jakarta-ee, servlets

我有一个要求，我必须通过 http 请求将 xml 文件发送到 jsp 页面。在服务器端，我已经开发了从请求对象获取 inputStream 并存储到文件中的代码。稍后我正在处理 xml 文件以将数据存储在数据库中。

现在我需要向 jsp 发送一个 xml 文件。那么如何将 xml 文件从 jsp/servlet 发送到服务器...

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T14:13:15.980

如果 Xml 文件很小，则可以 `store the contents of the xml as String as a request attribute`。

否则你可以刷新文件作为响应

```
response.setContentType("text/xml");
PrintWriter out = response.getWriter();
FileInputStream in = new FileInputStream(sample_file);
byte[] buffer = new byte[4096];
int length;
while ((length = in.read(buffer)) > 0){
    out.write(buffer, 0, length);
}
in.close();
out.flush(); 
```

# testing - 自动化测试网络应用程序

> ID：14787814
> 
> 赞同：1
> 
> 时间：2013-02-09T11:49:55.520
> 
> 标签：testing, selenium, jenkins, casperjs

我正在寻找一种工具来对我的**Yii** / **Node.js** Web 应用程序进行功能测试。我首先研究的是**Selenium**。该应用程序在无头 Ubuntu 服务器上运行，因此成功设置**xvfb**并运行测试真的很痛苦，并驱使我使用另一个工具。我不断收到的错误是：

```
Xlib: extension "RANDR" missing on display :0 
```

另一个工具是[Casperjs](http://casperjs.org/)和[Phantomjs](http://phantomjs.org/)。除了 5 分钟的设置，我编写了一些测试并将所有测试都与 Jenkins CI 集成。我真的相信应该有更多这样的工具。所以我觉得我在短期内有所收获，但从长远来看，我害怕我会陷入死胡同。你能给我一些反馈吗？我走错路了吗？

我想到的另一件事是在设置了所有浏览器的 Windows 机器上设置 Selenium RC 和 Jenkins。我认为这将为我的测试提供更好、更准确的视角。

***我还希望能够进行一些并行功能测试（交互），因为该网站是套接字驱动的。Selenium 能处理这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:32:38.683

首先，如果可以避免，请不要使用 Selenium RC，它已被正式弃用，取而代之的是 Selenium Webdriver（也称为 Selenium 2）。

关于无头 - Webdriver 可以轻松地在[HtmlUnit](http://htmlunit.sourceforge.net/)和[PhantomJS](https://github.com/detro/ghostdriver)之上运行- 两者都应该立即工作。

如果你想在实际的浏览器上运行测试，人们也已经成功地在无头系统上运行，但正如你所说，这很痛苦。相反，您可以在不同的机器上远程运行测试，而您的无头服务器可以命令所有这些测试。

# backbone.js - 如何使用 RequireJS 加载骨干深度模型？

> ID：14787817
> 
> 赞同：2
> 
> 时间：2013-02-09T11:50:06.253
> 
> 标签：backbone.js, requirejs, underscore.js

虽然骨干深度模型支持 AMD 与 RequireJS 一起使用，但它依赖于一个名为**underscore.mixin.deepExtend.js**的外部文件中的下划线混合，该文件与 AMD 不兼容。

看这个问题：[How to mixin Underscore plugins in RequireJS?](https://stackoverflow.com/questions/13627376/how-to-mixin-underscore-plugins-in-requirejs) ，看来我可以在 RequireJS 的**shim init 设置**中手动将 deepExtend 混合到 Underscore中。

```
...
shim: {
    ...

    'deep-model': {
        deps: 'underscore',
        init: function() {
            _.mixin(/* hash of deepExtend functions */);
            return _;
        }
    }
}
... 
```

但是，由于 underscore.mixin.deepExtend 不返回 _.mixin() 所需的函数散列，所以我现在不知道该怎么做。

有没有办法在不修改源代码的情况下使用 RequireJS 加载骨干深度模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T04:49:21.890

这可能不是您正在寻找的答案，但我个人建议的一个选择是完全将 Underscore（以及任何混合组件，可能还有 Backbone 和 jQuery）从 Require 中移除。这种方法的主要优点（除了使您的问题作为副作用消失之外）是您不必通过导入相同的库（或如果您对 Backbone/jQuery 执行相同操作的库）来启动每个 require 模块。

诚然，这稍微“污染”了全局空间，但在我看来，在全局命名空间中有一个`_`（或`$`或`Backbone`）变量不会有任何伤害。然而，它会解决您的问题，完全不需要垫片，并为您节省大量导入。当然，您可以（并且应该）仍然将 Require 用于您自己的代码，因为防止变量“污染”全局命名空间将为您省去未来的麻烦。

只是一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T07:36:07.383

您可以将主干作为依赖项填充：

```
shim: {
  // this is an example, I don't know what are the actual dependencies are
  'deep-model': ['backbone', 'underscore']
} 
```

当您将其添加为依赖项时，它们将在主干上运行：

```
define(['backbone', 'deep-model'], function(Backbone) {
   // backbone now has deepModel in it
}); 
```

# c++ - ADL、普通查找和依赖函数调用不起作用 oO

> ID：14787818
> 
> 赞同：3
> 
> 时间：2013-02-09T11:50:12.947
> 
> 标签：c++

**这是给出的简单代码，我相信**它应该可以根据 c++ 标准工作：

```
template<typename T> 
void foo(T x) 
{ 
    bar(x); 
    void bar(int);
} 

void bar(int)  { } 

int main() 
{ 
    foo(0); 
} 
```

错误来自 GCC 4.7：

> 'bar' 未在此范围内声明，并且在实例化点通过依赖于参数的查找未找到任何声明

但是在 C++ 标准中它是写的。§ 14.6.4.2：

> 对于依赖于模板参数的函数调用，使用通常的查找规则（3.4.1、3.4.2、3.4.3）找到候选函数，除了：
> 
> **— 对于使用非限定名称查找 (3.4.1)**或限定名称查找 (3.4.3) 的查找部分，**仅找到来自模板定义上下文的函数声明。**

我可能对写的内容有错误的印象，有人可以在这里纠正我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:17:39.153

您应该将“bar”的声明移到顶部。因为在定义模板（未实例化）时，在调用 'bar' 之前，它还没有被声明。

# ember.js - 修订版 11 中的 Ember.Model 中的自定义 URL

> ID：14787819
> 
> 赞同：1
> 
> 时间：2013-02-09T11:50:17.580
> 
> 标签：ember.js

`rev 4`在我从to跳转后`rev 11`，以下代码不再起作用：

```
App.Coffee
    brand: DS.attr "string"

App.Coffee.reopenClass
    url: "different/location/coffee" 
```

如何设置自定义网址`rev 11`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T19:52:31.443

您可以通过为模型注册适配器来实现此目的：

```
App.Store = DS.Store.extend({
  revision: 11,
  adapter: DS.RESTAdapter.create()
});

App.Store.registerAdapter('App.Coffee', DS.RESTAdapter.extend({
  namespace: 'different/location'
})); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T12:17:48.553

你在商店里做，而不是`buildUrl`：

```
Store: DS.Store.extend({
    revision: 11,
    adapter: DS.RESTAdapter.create({
        buildURL: function(url) {
            return 'different/location/coffee/%@'.fmt(url);
        }
    })
}) 
```

（与它结合使用`pluralization`会产生奇迹。）

# dart - 自定义 Dart 存储库？

> ID：14787821
> 
> 赞同：1
> 
> 时间：2013-02-09T11:50:31.103
> 
> 标签：dart, dependency-management

Pub 是管理 Dart 项目依赖关系的绝佳工具。我想知道是否有任何可用的工具允许我们创建内部存储库并为公共依赖项设置镜像，类似于 Maven 存储库管理器的操作方式（Nexus、Archiva 等）

我在网上搜索过，似乎 Pub 存储库站点的来源不公开。无论如何，当前 Pub 客户端中的依赖项查找可能已经硬连线到中央 Pub 存储库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T21:28:55.643

pub.dartlang.org 上的 Pub 服务器的源代码可在 github 上找到：[https ://github.com/dart-lang/pub-dartlang](https://github.com/dart-lang/pub-dartlang)

这是一个 Python App Engine 应用程序，因此它并非完全设计为在本地运行，但它是一个起点。

Pub 还支持备用 pub 存储库。见： http: [//pub.dartlang.org/doc/pubspec.html#dependencies](http://pub.dartlang.org/doc/pubspec.html#dependencies)

# maven - jetty-maven-plugin 不显示 sysout 和日志消息

> ID：14787822
> 
> 赞同：0
> 
> 时间：2013-02-09T11:50:36.543
> 
> 标签：maven, log4j, jetty, maven-jetty-plugin

我刚刚开始使用 jetty-maven-plugin。

我发现有关日志和系统输出的一些奇怪行为。

当我用 Maven 启动码头时

```
mvn -Djetty.port=8093 -Dlog4j.configuration=file:src/log4j.properties jetty:run 
```

我看到 bean 构造函数 sysout 消息。

之后，当我请求 url [http://my.local.host:8093/api/rest/admin/houses](http://my.local.host:8093/api/rest/admin/houses)时，浏览器会显示一个正确的页面，但与**house 没有任何相似之处！**在控制台或日志文件中。

然而，来自 Jetty、Spring 等的其他一些 INFO 消息会打印在那里。

```
@Controller
public class AppAdminClientJsonController {

    private final static Logger logger = 
         LoggerFactory.getLogger(AppAdminClientJsonController.class);

    public AppAdminClientJsonController() {
         System.out.println("----------AppAdminClientJsonController----------");
    }

    @RequestMapping(value = "/admin/houses", method = RequestMethod.GET)
    public @ResponseBody
    List<House> getHouses() {

        logger.warn("house!");
        System.out.println("house!!");

        return Arrays.asList(new House("somesite", "http://somesite.com"));

    }
} 
```

所以通常 Jetty 不尊重我的记录器，并以某种时髦的方式覆盖系统输出流，因此在服务器启动并运行后不会打印任何内容。

**这会是什么？**

pom.xml 中的插件部分

```
<plugin>
    <!-- http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin#Quick_Start:_Get_Up_and_Running -->
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>8.1.8.v20121106</version>
    <configuration>
        <webAppSourceDirectory>${basedir}/${webappRootPath}</webAppSourceDirectory>
        <scanIntervalSeconds>10</scanIntervalSeconds>
        <webAppConfig>
            <contextPath>/</contextPath>
            <descriptor>${basedir}/${webappRootPath}/WEB-INF/web.xml</descriptor>
        </webAppConfig>
    </configuration>
</plugin> 
```

**更新**

我刚刚尝试打印 System.out 对象本身。我是对的，Jetty 覆盖了它：

在春季初始化阶段是：java.io.PrintStream@175390b7

服务器启动后变成：java.io.PrintStream@9c783fc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T05:48:24.067

Jetty 不登录到 log4j。

它有自己的记录器框架（顺便说一下早于 log4j）。

默认情况下，它将使用自己的记录器框架注销到[System.err](http://download.eclipse.org/jetty/stable-8/apidocs/org/eclipse/jetty/util/log/StdErrLog.html)。此外，jetty 的默认启动配置包括将[`etc/jetty-logging.xml`](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-util/src/main/config/etc/jetty-logging.xml?h=jetty-8)所有 System.out 和 System.err 路由到滚动日志文件。

但是，如果类路径中存在 slf4j，jetty 日志框架将使用 slf4j。

如果你想登录到 log4j，你需要通过 slf4j 来完成。要启用此功能，您需要在您的 jetty-maven-plugin 配置的依赖项中存在以下依赖项...

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-log4j12</artifactId>
    <version>***your preferred version here***</version>
</dependency> 
```

可用的 slf4j-log4j12 版本：[http ://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22org.slf4j%22%20AND%20a%3A%22slf4j-log4j12%22](http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22org.slf4j%22%20AND%20a%3A%22slf4j-log4j12%22)

# xcode - Xcode在构建时重新排列按钮布局？

> ID：14787823
> 
> 赞同：1
> 
> 时间：2013-02-09T11:50:37.557
> 
> 标签：xcode, button

我在 xcode 中创建了这个计算器界面：

![](../Images/99f55888a197b7b9a011b1564910a0b8.png)

不幸的是，每当我在 Xcode 中构建应用程序时，按钮都会自动重新排列。

![](../Images/3a9ea92b2dca60e3ff517d527db5f729.png)

我不知道如何解决这个问题 - 我认为这与 Xcode 中的 AutoLayout 有关，但我在网上找不到任何解决该问题的方法。

我确定这是非常简单的事情，我只是看不到解决方案！

# d - 如何检查变量是否在D中声明？

> ID：14787828
> 
> 赞同：3
> 
> 时间：2013-02-09T11:51:05.107
> 
> 标签：d, introspection, conditional-compilation, compile-time-constant

如何检查变量是否存在，即是否已在 D 中声明？

背景是我想使用版本条件但仍然有一个默认值：

```
version(A)
{
  immutable int var = 1;
}
version(B)
{
  immutable int var = 2;
}
// this is pseudo code
if (var is not yet declared)
{
  immutable int var = 3;
} 
```

我只是假设这在 D 中是可能的，因为它有很多内省......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-09T12:10:36.767

好吧，鉴于您的用例看起来是什么，您做错了。你真的应该做更多类似的事情

```
version(A)
{
    immutable int var = 1;
}
else version(B)
{
    immutable int var = 2;
}
else
{
    immutable int var = 3;
} 
```

但在一般情况下，如果您要专门测试符号是否存在，请使用`is(typeof(symbol))`where`symbol`是您要测试的符号的名称。所以，如果你想测试变量是否`var`存在，你会做类似的事情

```
static if(is(typeof(var)))
{
    //var exists
} 
```

当然要测试它*不*存在，您只需否定条件：

```
static if(!is(typeof(var)))
{
    //var does not exist
} 
```

`typeof(exp)`获取表达式的类型，如果表达式无效（因为不存在的变量或表达式中的函数不适用于这些参数或其他原因），则结果为`void`. `is(type)`检查类型是否为非`void`. 因此，`is(typeof(exp))`测试 exp 是否是一个有效的表达式，如果它只是一个符号名称，这意味着它正在测试它是否是一个有效的符号。

# java - JNativeHook 来自同一动作的多个响应（鼠标单击、键类型和鼠标滚动）

> ID：14787830
> 
> 赞同：0
> 
> 时间：2013-02-09T11:51:12.707
> 
> 标签：java, multithreading, hook, system-calls

我正在使用 JNativeHook 来检索有关用户活跃程度的信息，但是我遇到了一个问题，即我会从单个操作中获得多个响应，但它并不一致。它在 1、2 或 3 个响应之间变化，但不会超过 3 个，我必须多次运行和退出程序才能获得不同的结果。在我发现问题再次发生之前，它似乎可以工作一整天。

我也遇到了必须重新启动计算机才能从操作中获得某种响应的问题。

从程序中打印出一个示例：

鼠标按下：1
鼠标按下：1
鼠标按下：1
鼠标释放：1
鼠标点击：3
鼠标释放：1
鼠标点击：3
鼠标释放：1
鼠标点击：3

我正在使用 3 个类，每个类一个：鼠标侦听器、键盘侦听器和鼠标滚轮侦听器。我为每一个创建一个线程，让它们同时运行。

有 4 个主要类处理有问题的代码：

1.  [包含线程的类](https://github.com/joedawtry/VocabTool/blob/master/src/controller/InterruptionDecision.java)
2.  [键盘监听器](https://github.com/joedawtry/VocabTool/blob/master/src/model/KeyboardListener.java)
3.  [鼠标监听器](https://github.com/joedawtry/VocabTool/blob/master/src/model/MouseListener.java)
4.  [鼠标滚轮监听器。](https://github.com/joedawtry/VocabTool/blob/master/src/model/MouseWheelListener.java)

（我要发布很多代码，这几乎使帖子无法阅读，所以我希望这样做可以吗？）

我是使用 JNativeHook 的新手，我不确定它是否可能创建同一个全局侦听器的多个对象或并发问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:14:57.973

对于未来的读者，如果您发现 JnativeHook 的任何错误，请在[那里](https://code.google.com/p/jnativehook/issues/list)报告，与 SOF 有任何相关的事情。

**现在在 2016 年更新**lib 移至[Github](https://github.com/kwhat/jnativehook)

# javascript - 我可以更改 Bookmarklet 中的“window.location”属性，然后继续在新文档上执行操作吗？

> ID：14787835
> 
> 赞同：2
> 
> 时间：2013-02-09T11:51:40.550
> 
> 标签：javascript, bookmarklet, wizard

我想知道您是否可以指导用户执行一系列步骤，这些步骤意味着使用 Bookmarklet 中的操作访问不同的网页。我想要的是一种向导或跨网页的自动操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:53:17.670

怕不是。你所描述的实际上是非常**危险**的。如果书签中有任何**恶意代码**，它将可以访问您登录的每个站点、电子邮件、亚马逊等。一些用于攻击的伪代码可能如下所示：

```
window.location = "www.gmail.com";
ajax.post("www.gmail.com/deleteAllMail");
window.location = "www.amazon.com";
ajax.post("www.amazon.com/buyReallyExpensiveStuff"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T12:09:15.647

如果您在 iframe 中打开新页面，则可以部分实现。但是，您将无法再修改网页的内容，而只能修改 iframe 的 url，并浏览不同的网站（就像一种幻灯片）。

请注意，如果您是页面的所有者，则可以使用[postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)与它们进行交互，即使它们位于不同的域中。

或者，你可以在服务器端做一个“隧道”，然后用你需要的 JS 注入你得到页面的每个团队。

但是，如果您不是页面的所有者，那么最简洁的方法可能就是为您想要支持的浏览器创建一个简单的无需重启的插件。

# javascript - Ruby Gem：获取资产管道中的文件

> ID：14787836
> 
> 赞同：4
> 
> 时间：2013-02-09T11:51:55.093
> 
> 标签：javascript, jquery, ruby-on-rails-3, gem

我开发了一个插件 ( jQuery )，我真的想把它做成一个 gem。为了让 gem 工作，我需要三个文件在 Rails 的资产管道中：一个图像、一个 javascript 文件和一个 css 文件。

在这一刻，我已经让宝石工作了，但是！我无法获取资产管道中的文件。如果我像这样包含它们：

```
//= require gem.js 
```

或者

```
//= require gem.css 
```

它可以工作，但文件不会显示在资产管道中，虽然我可以使用 css 和 js 文件来完成这项工作，但我无法让图像工作。

因此，我真的希望文件显示在资产管道中（或者至少是图像，这需要让插件额外一目了然）。在这一刻我已经做了我能想到的一切，但它不起作用..

这是我的宝石规格：

```
# -*- encoding: utf-8 -*-
$:.push File.expand_path("../lib", __FILE__)
require "yellow-text-rails/version"

Gem::Specification.new do |gem|
    # Gem information
    gem.name          = "yellow-text-rails"
    gem.version       = YellowText::Rails::VERSION
    gem.authors       = ["Stefan Vermaas"]

    # Project name
    gem.rubyforge_project = "yellow-text-rails" 

    gem.files         = `git ls-files`.split("\n")
    gem.test_files    = `git ls-files -- {test,spec,features}/*`.split("\n")
    gem.executables   = `git ls-files -- bin/*`.split("\n").map{ |f| File.basename(f) }
    gem.require_paths = ["lib"]
end 
```

我已经将它包含在 `lib/yellow-text-rails/yellow-text-rails.rb' 中：

```
require "yellow-text-rails/version"

module YellowText
    module Rails
        if defined?(::Rails) and ::Rails.version >= "3.1"
                class Rails::Engine < ::Rails::Engine
            end
        end
    end
end 
```

希望你们能帮助我！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-17T00:36:48.023

尝试这个：

```
module YellowText
  module Rails
    class Engine < ::Rails::Engine
      initializer :append_dependent_assets_path, group: :all do |app|
        app.config.assets.precompile += %w( gem.js gem.css )
      end
    end
  end
end 
```

确保将资产包含在 gem`vendor/assets/javascripts`和`vendor/assets/stylesheets`.

看看我的一个简单的 Gems 以供参考：[https ://github.com/wazery/vider](https://github.com/wazery/vider)

# c++ - c中的ncr（组合）

> ID：14787838
> 
> 赞同：0
> 
> 时间：2013-02-09T11:51:58.920
> 
> 标签：c++, c, binomial-coefficients

我正在尝试使用 dp 在 c 中计算 ncr(combinations)。但它在 n=70 时失败了。任何人都可以帮忙吗？

```
unsigned long long ncr( int n , int r)
{
unsigned long long c[1001];
int i=1; 
c[0]=1;
for(i=1; i<=r; i++)
    c[i]= ((unsigned long long) (c[i-1]) * (unsigned long long)( n-i+1))%(unsigned long long) (1000000007)/ (unsigned long long)(i);
return c[r];
} 
```

基本思想是 ncr = ((n-r+1)/r)* nc(r-1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T11:58:34.043

中间产品`(unsigned long long) (c[i-1]) * (unsigned long long)( n-i+1)`是一个非常大的数字，并且溢出了 64 位字。

您可能想使用[bignums](http://en.wikipedia.org/wiki/Bignums)。我强烈建议不要开发你自己的 bignum 函数（例如 bignums 的乘法和除法），因为它是一门微妙的算法主题（你仍然可以获得相关的博士学位）。

我建议使用一些现有的 bignum 库，如[GMP](http://gmplib.org/)。

一些语言或实现（尤其是用于 Common Lisp 的[SBCL](http://sbcl.org/)）提供了本机 bignum 操作。但标准 C 或 C++ 没有。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-09T12:08:52.120

Make the division before the multiplication. a*b/c = (a/c) *b where the second better for overflow which seems your problem.

# macos - 如何安装点子？

> ID：14787840
> 
> 赞同：1
> 
> 时间：2013-02-09T11:52:32.763
> 
> 标签：macos, pip

我正在尝试安装`pip`在 Lion 10.7 中。通过键入

`sudo easy_install pip`

我收到以下消息：

`Searching for pip`

`Best match: pip 1.2.1`

`Processing pip-1.2.1-py2.7.egg`

`pip 1.2.1 is already the active version in easy-install.pth`

`Installing pip script to /usr/local/bin`

`error: /usr/local/bin/pip: No such file or directory`

我检查了路径，`/usr/../bin/`并且存在该`pip`目录。我怎样才能解决这个问题？

# ios - NSInvalidUnarchiveOperationException ipad 1

> ID：14787841
> 
> 赞同：0
> 
> 时间：2013-02-09T11:52:38.253
> 
> 标签：ios, xcode

如果我在 ipad 3 ios 6.1 上运行我的应用程序，该应用程序运行正常，但如果我在 ipad 1 ios 5.1 上运行它，我收到此错误并且应用程序崩溃：

```
2013-02-09 12:20:58.434 Splash-it[531:707] *** Terminating app due to uncaught exception     'NSInvalidUnarchiveOperationException', reason: 'Could not instantiate class named    UIStoryboardEmbedSegueTemplate'
*** First throw call stack:
(0x3583d88f 0x33461259 0x3583d789 0x3583d7ab 0x3322454d 0x332246bb 0x33224423 0x33122905 0x331b5c13 0x33224b1b 0x33224423 0x331b5839 0x33224b1b 0x332246bb 0x33224423 0x331b4fc5 0x332b5a5d 0x332b5b8f 0x330ec403 0x32f756eb 0x32f6f72f 0x32f3dac3 0x32f3d567 0x32f3cf3b 0x3352f22b 0x35811523 0x358114c5 0x35810313 0x357934a5 0x3579336d 0x32f6e86b 0x32f6bcd5     0x66aa5 0x5b598)
terminate called throwing an exception 
```

这个错误是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T16:36:09.780

嵌入 segues 是 iOS 6+ 的功能 - 它们不适用于 iOS5 或更低版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T16:08:10.323

正如 Rich Tolley 写的“仅限 iOS 6”，但您可以尝试将其向后移植到 iOS5 [https://github.com/RolandasRazma/RRContainerView](https://github.com/RolandasRazma/RRContainerView)

# django - 在 Google App Engine 上优化我的 Django 应用

> ID：14787842
> 
> 赞同：1
> 
> 时间：2013-02-09T11:52:39.220
> 
> 标签：django, google-app-engine, optimization

我正在优化我的 Django 应用程序的特定用例。我的第一步是将 a 替换`QuerySet`为`ValuesQuerySet`. 这工作得很好，但我想做更多。现在我正在考虑使用 Memcache（该应用程序在 Google App Engine 上运行）。所以我的计划是基本上把它`ValuesQuerySet`放在 Memcache 中。然而，据我了解，这`ValueQuerySet`基本上是一个尚未物化的数据结构。为了使缓存起作用，`ValueQuerySet`需要先实现然后放入 Memcache。

根据[Django 文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/)：

```
list(). Force evaluation of a QuerySet by calling list() on it. 
```

和：

```
Finally, note a ValuesQuerySet is a subclass of QuerySet, so it has all methods of QuerySet. 
```

但是当我尝试`my_values_qs.list()`它时会抛出一个异常：

```
AttributeError: 'ValuesQuerySet' object has no attribute 'list' 
```

所以，虽然`ValuesQuerySet`是它的一个子类，`QuerySet`但显然不能`list()`它的内容。如果属实，则意味着 Django 文档是错误的或至少具有误导性。

我错过了什么还是文档确实错了？`ValueQuerySet`实现结果以便我可以将其存储在 Memcache中的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T19:37:29.287

您从文档中误读了那一点。它没有说“调用`queryset.list()`方法”：它说“调用`list()`它”。换句话说， call `list(my_queryset)`，而不是`my_queryset.list()`- 事实上，随后立即通过示例明确说明了这一点。

请注意，这与子类化无关：`QuerySet`也没有`list()`方法。

# ios - 包含 NSNull 值的集合的键值编码和集合运算符

> ID：14787844
> 
> 赞同：0
> 
> 时间：2013-02-09T11:52:42.653
> 
> 标签：ios, objective-c, nsarray, key-value, key-value-coding

在使用键值编码时使用集合运算符（例如`@min`，`@max`）时，`NSArrays`如果数组中的一个值为`NSNull null`.

我必须`NSNull null`在使用之前删除所有出现的情况才能`valueForKeyPath`使其工作：

```
NSMutableArray *array = otherArray.mutableCopy;
[array removeObjectIdenticalTo:[NSNull null]];
NSNumber *minValue = [array valueForKeyPath:@"@min.self"];
NSNumber *maxValue = [array valueForKeyPath:@"@max.self"]; 
```

但是，根据[Apple 的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/CollectionOperators.html#//apple_ref/doc/uid/20002176-BAJEAIEE)，我的代码应该可以在不删除的情况下工作`NSNull null`：

> 如果键路径右侧的值为 nil，则忽略它。

如何使用 keyPath 语句来获取数组的最小值和最大值，而不会出现运行时异常并且`NSNull null`之前不必删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T12:52:14.947

您误解了文档。这：

> 如果键路径右侧的值为 nil，则忽略它。

意味着如果 @min.field 为 nil，它将被忽略。但是您正在做的是尝试计算包含 NSNumber 的集合的最小值和最大值。所以可能会使用 decimalValue 方法，但 NSNull 不符合该键的键值。所以你应该继续从集合中删除 NSNull 对象。

# java - JEdi torPane 组件文本对齐和背景

> ID：14787846
> 
> 赞同：0
> 
> 时间：2013-02-09T11:53:04.880
> 
> 标签：java, swing, user-interface, jcomponent, jeditorpane

![带有 2 个 JEditorPane 组件的 GUI](../Images/2cca8a8f5006365a2e2de8d097d98ea0.png)

`JEditorPane`大家好，我的 GUI 中有两个，来自两个带有`hyperlinks`. 尽管`NetbeansIDE`我将它们对齐在一起，但页面`editorpane`似乎每次都在向右移动，而且非常烦人。我也试图删除毫无意义的白色背景，但失败了。

这是他们的一些设置：

```
 private void initEditorPane(JEditorPane editorPane) {
        editorPane.setBorder(null);
        editorPane.setContentType("text/html");
        editorPane.setEditable(false);
        editorPane.setOpaque(false);
        editorPane.addHyperlinkListener(new HyperlinkListener() {
            @Override
            public void hyperlinkUpdate(HyperlinkEvent e) {
                if (e.getEventType() == HyperlinkEvent.EventType.ACTIVATED) {
                    launchHyperLink(e);
                }
            }
        });
    } 
```

我不确定是否是上述问题导致了问题，或者：

```
pageTxtComp.setText("<html>&nbsp;<a href='" + ac.getPage() + "'>" + ac.getPage() + "</a>&nbsp;</html>");

emailTxtComp.setText("<html>&nbsp;<a href='mailto://" + ac.getEmail() + "'>" + ac.getEmail() + "</a>&nbsp;</html> "); 
```

1.  如何改善对齐？

2.  如何去除白色背景？在属性中，我尝试选择与面板匹配的背景颜色，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:38:04.720

You can get `Document` from the pane. Cast it to `StyledDocument` and use `setParagraphAttributes()` setting desired alignment or change alignment by adding < p > < / p > tags specifying the alignment there.

For background try to set opaque to false for the pane.

# wordpress - WordPress 网站被黑不知道如何

> ID：14787850
> 
> 赞同：-1
> 
> 时间：2013-02-09T11:53:37.753
> 
> 标签：wordpress

我最近开发了一个网站

[http://www.nisargarws.com](http://www.nisargarws.com)

不幸的是，这被某人黑了。我浏览了所有目录文件，但没有找到任何东西 anynomys 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:59:07.790

因为它是 Wordpress，所以您应该检查 wp-content 下的主题目录并查看“被黑”的内容。

同时进入数据库的用户表删除任何未知用户。确保您在 users 下的帐户条目是您的电子邮件，然后访问[http://www.nisargarws.com/wp-admin/](http://www.nisargarws.com/wp-admin/)，重置密码并更新 Wordpress。

如果您正在使用该用户，也可能是用户获得了 cPanel 访问权限，请也更改该密码。

如果 index.php 文件已被编辑，请从 Wordpress.org 下载一份新的 Wordpress 副本并替换该文件。

# mysql - Mysql表到csv

> ID：14787854
> 
> 赞同：0
> 
> 时间：2013-02-09T11:54:14.160
> 
> 标签：mysql

我尝试创建`csv`文件以便在 excel 或 liberoffice calc 中使用它。但我有这个问题。

```
mysql> SELECT *
    FROM formtable
    INTO OUTFILE "/tmp/try.csv"
    FIELDS TERMINATED BY ','
    OPTIONALLY ENCLOSED BY '"'
    ESCAPED BY '"'
    LINES TERMINATED BY "\n"; 
```

如果我使用这个命令，一切都会顺利进行。但是在服务器端，我认为我没有像 linux 中的 tmp 文件夹那样的 tmp 文件夹。因此，我尝试在下面给出具体路径

```
mysql> SELECT *
    FROM formtable
    INTO OUTFILE "/var/www/try.csv"
    FIELDS TERMINATED BY ','
    OPTIONALLY ENCLOSED BY '"'
    ESCAPED BY '"'
    LINES TERMINATED BY "\n"; 
```

它给了

```
ERROR 1 (HY000): Can't create/write to file '/var/www/try.csv' (Errcode: 13) 
```

如果我将路径指定为`/home/blah/try.csv`. 你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:41:35.690

```
import java.io.FileNotFoundException;
import java.io.FileWriter;
import java.io.IOException;
import java.sql.*;
import java.util.ArrayList;
import java.util.List;    
import au.com.bytecode.opencsv.CSVWriter;

public class WriteCSV {
    public static void main(String[] args) {

        try {
            String connectionURL = "jdbc:mysql://localhost:3306/test";
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection(connectionURL, "root", "root");
            Statement stmt = con.createStatement();
            ResultSet rs = stmt.executeQuery("select id_movie, movie_name from movies");
            String csv = "E:\\dummyFolder\\output2.csv";
            CSVWriter writer = new CSVWriter(new FileWriter(csv));
            List<String[]> data = new ArrayList<String[]>();
            while (rs.next())
            {
                data.add(new String[] { rs.getString(1), rs.getString(2) });
            }
            writer.writeAll(data);
            System.out.println("CSV written successfully.");
            writer.close();

        } 
        catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
        catch (SQLException e) 
        {
            e.printStackTrace();
        } 
        catch (FileNotFoundException e) 
        {
            e.printStackTrace();
        } 
        catch (IOException e) 
        {
            e.printStackTrace();
        }
    }
} 
```

you need to add the opencsv-2.3.jar from [here](http://www.java2s.com/Code/Jar/o/Downloadopencsv23jar.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T15:25:13.080

您应该检查权限。 `ls -l /your/path`.

请注意，不是您的用户应该有权写入所选文件夹，而是`mysql`用户。您应该检查所有者、组、“其他”权限。

通常您可以在`/tmp`文件夹中创建文件。

# ruby-on-rails - ruby on rails datetime 选择不更新数据库

> ID：14787855
> 
> 赞同：0
> 
> 时间：2013-02-09T11:54:28.037
> 
> 标签：ruby-on-rails, forms, datetime, rails-activerecord

我试图使用内置的 ruby​​ 帮助器进行日期时间选择，尽管它似乎没有将值传递给 ActiveRecord

form.haml.html

```
.row
      .two.columns
        = f.label :date_and_time, :class =>'left inline'
      .ten.columns
        = f.datetime_select('datetime', :prompt => {:day => 'Choose day', :month => 'Choose month', :year => 'Choose year'}, :order => [:day, :month, :year]) 
```

控制台输出

```
Processing by EventsController#update as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"sebpDgAPPmK8q9024vrhN4eEQT7vZLr+pa5XdSicAMc=", "event"=>{"event"=>"1", "location_id"=>"13", "datetime(3i)"=>"5", "datetime(2i)"=>"5", "datetime(1i)"=>"2012", "datetime(4i)"=>"01", "datetime(5i)"=>"03", "duration"=>"34", "arrival_time"=>"34", "team_id"=>"1", "opponent_id"=>"4", "home_or_away"=>"Away"}, "commit"=>"Update Event", "id"=>"68"}
  User Load (1.5ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 38 LIMIT 1
  Event Load (0.8ms)  SELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT 1  [["id", "68"]]
  CACHE (0.0ms)  SELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT 1  [["id", "68"]]
  User Load (1.4ms)  SELECT "users".* FROM "users" WHERE "users"."team_id" = 1
   (0.4ms)  BEGIN
   (0.9ms)  UPDATE "events" SET "updated_at" = '2013-02-09 11:44:24.830499', "selected_players" = '---
- ''''
' WHERE "events"."id" = 68
   (8.2ms)  COMMIT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:24:11.390

根据您的标签，它是`:date_and_time`数据库中的字段，对吗？如果是这样，你应该在你的`datetime_select`：

```
= f.datetime_select :date_and_time, :prompt => {:day => 'Choose day', :month => 'Choose month', :year => 'Choose year'}, :order => [:day, :month, :year]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T02:22:12.863

发现问题出在控制器内，仍然指的是我们已有的旧命名，因为所做的更改似乎都在工作

# slf4j - 使用 slf4j 创建新的 appender

> ID：14787856
> 
> 赞同：0
> 
> 时间：2013-02-09T11:54:28.980
> 
> 标签：slf4j, logback, appender

我希望在我们记录某些内容时添加我的消息。例如，如果我正在记录

log.info("你好");

该消息应附加一些来自我的应用程序的 id。因此，控制台上打印的最终日志消息将是

你好 1 你好 2

我需要为此添加一个附加程序吗？如果是，我如何使用 logback 实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:02:05.100

你为什么不自己管理这个id？

每次，您都在记录可以使用参数调用该方法的内容：

```
log.info("Hello {}", id); 
```

但是这样做有什么好处呢？您是否尝试识别会话？

# c# - 如何使用负最大算法

> ID：14787857
> 
> 赞同：4
> 
> 时间：2013-02-09T11:54:37.437
> 
> 标签：c#, artificial-intelligence

我想知道如何使用 negamax 算法。我正在尝试用 C# 为游戏 mancala 编写代理。当给定游戏节点时，该算法会为您提供一个数字。

假设我的 AI 玩家想要移动。negamax 函数返回一个数字。所以它告诉我从那一刻起最好的移动得分是多少。我怎样才能使用这个*号码*？

如果轮到玩家 A，我尝试做出他可能的动作并检查每个动作的负最大值。但是，如果我先移动然后检查 negamax，那么当 negamax 运行时（假设我们仍然只有 1 级深），它将评估移动，然后下一步必须是玩家 B 的。

我对此感到非常困惑。当我看到 negamax 伪代码（例如在维基百科页面上）时，它说要尝试该玩家的动作。如果我这样做，它将返回最高分数*，而不会告诉我哪个动作得到了那个分数*。

应该如何使用 negamax？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T05:28:17.850

这是一个有趣的。

这一切都是关于探索可能移动树中的每个节点。如果您使用 alpha-beta 修剪，您可以通过“修剪”（而不是评估）树的某些分支来使算法更有效。我将假设您没有使用修剪，而是要查看完整的树。

如果 Mancala 是一款非常简单的游戏，例如井字游戏，则无需“评估函数”即可实现算法。在井字游戏中，如果您玩出所有可能的动作，您将获得胜利、失败或平局。您将在那里实现一个负最大算法，而不考虑游戏的中间状态（即最后一步之前的任何移动），因为可能的移动数量非常有限，并且 AI 引擎将能够轻松计算所有一直到最后的可能性。

另一方面，在国际象棋中，“评估函数”（EF，以下简称）是必不可少的，因为这个星球上没有任何硬件可以计算出所有可能的国际象棋移动序列直到游戏结束。因此，大多数国际象棋 AI 会深入 12-14 层，然后评估结果位置，为后分配 8 分，为车分配 5 分，为主教或马分配 3 分，为棋子分配 1 分，然后为控制方格（控制中心方格更多点），国王安全等。

对于 Mancala，据我所知，它可能已经足够复杂以至于需要一个评估函数，但也许该评估函数会很简单，例如仍然拥有的种子数量，还为在一个先进的职位。（我查阅了 Wiki Mancala，看起来有很多可能的变体——我不确定你正在使用哪一个。）

因此，需要针对特定​​深度（即，使用所有可能的玩法直到游戏结束）并使用简单的 EF 来实现负最大算法。让我们假设您将实施看起来 5 步深度的 AI。negamax 的好处是它是完全对称的和零和的。换句话说，如果位置对 AI 的评估为 5，它对人类玩家的评估为 -5。如果人类玩家评估为 13，那么 AI 评估为 -13。这就是讨论的“单一数字”。考虑到这一切，人工智能算法看起来像这样（同样，没有修剪）：

1) 检查每个可能的 AI 动作

2）对于这些动作中的每一个，检查每个可能的对手反应

3) 对于每一个可能的反应，检查每一个可能的 AI 动作

4) 对于每一个可能的 AI 动作，检查每个可能的对手反应

5) 最后，针对每一个可能的对手反应，检查每一个可能的 AI 动作

现在我们已经达到了深度 5，并且您已经构建了具有 5 个级别的树，并且可能有数千或数百万个树的叶子（底层节点）。您以这样的方式编写代码，即每个节点都引用其父节点，并引用其所有子节点，以便您可以轻松地遍历树，从父节点到子节点然后返回。

一旦你正确设置了树，现在是时候实现 negamax 算法了，如下所示（让我们假设更高的分数对 AI 玩家更好）：

6) 对于每4级对手的反应，找出所有AI子动作中评价最高的，并修剪所有其他子动作。您正在确定您的 AI 从现在开始的第 5 步，以响应每个可能的从现在开始的第 4 次对手的反应。因此，现在每个 4 级响应都有一个假定的 5 级响应。现在您将您对第 5 级孩子所做的评估分数分配给第 4 级父级。这就是说，如果你达到了第 4 级对手的移动，人工智能将做出这个特定的第 5 级移动，并且棋盘将评估该分数。

7）接下来，您评估每个 3 级 AI 动作，并为每个动作在所有第 4 级对手动作中找到最低评价，修剪所有其他孩子，并分配第 4 级分数（来自最高的第 5 级）级节点）到第 3 级。您正在执行与第 6 步相同的操作，除了使用 LOWEST child score（b/c 这是 AI 移动而不是对手移动）。

8) 对第 2 级执行与第 6 步相同的操作，在所有 3rd-from-now 移动中找到最高评价，并将最高评价分配给第 2 级节点。

9) 对第 1 级执行与第 7 步相同的操作，在所有 2nd-from-now 移动中找到 LOWEST 评估，并将这些最低评估分配给 1st 级节点。

10) 查看所有 1 级节点，您的 AI 应该播放得分最高的节点。

显然，您不会将深度硬编码为 5，而是将其设为一个参数，并且您将使用递归（如 Wiki 中的内容）来完成此操作。要选择深度，请查看运行所需的时间，并将 n 设置为仍允许快速 AI 响应的最高深度。一旦你在这里建立了基础，你可以稍后添加修剪策略，这将通过不评估显然不是正确移动的整个树分支来实现更大的深度，但这是我为你布置的完整的、基本的 negamax。

祝你好运，编程应该很有趣！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T06:39:40.280

Onemancat 给出了非常详尽的解释 - +1。

对你的问题的简短回答是 negamax 返回特定位置的分数，所以你要做的是在第一层玩每一个动作，为每个结果位置调用 negamax 来评估它，然后选择得分最高的动作作为结果。

# c++ - 如何在派生类中调用基类的 << 运算符

> ID：14787859
> 
> 赞同：1
> 
> 时间：2013-02-09T11:54:41.323
> 
> 标签：c++, oop, operator-keyword

我有这个[CSVParser](https://ghostplusplus.googlecode.com/svn-history/r555/trunk/ghost/csvparser.cpp)类，我继承了它，我需要`<<`在派生类中调用运算符：

```
#include "dbcsv.h"

DbCsv::DbCsv() : CSVParser()
{
}

void addColumn(QString &source, const QString &val, const unsigned int s) // 0:duplicate, 1:unique
{
     CSVParser::<< source.toStdString();
}

void removeColumn(QString &source, const QString &val)
{

} 
```

我收到此错误：

```
dbcsv.cpp: In function 'void addColumn(QString&, const QString&, unsigned int)':
dbcsv.cpp:10: error: expected unqualified-id before '<<' token
dbcsv.cpp: At global scope: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:00:40.233

前面`<<`加上`operator`括号。使`operator<<(whatever)`.

这适用于其他位移运算符和其他运算符重载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:58:15.403

```
CSVParser::operator<<(source.toStdString()); 
```

括号是强制性的，这是一个函数调用。

当然，如果你*没有*覆盖`operator<<`，那么它更简单：

```
*this << source.toStdString(); // probably what you want 
```

# android - 如何检测未接来电已接听

> ID：14787864
> 
> 赞同：0
> 
> 时间：2013-02-09T11:55:17.543
> 
> 标签：android, call

我试图找到任何方法来接听我的拨出电话，但我找不到任何解决方案。我使用了 BroadcastReceiver、TelephonyManager 和 PhoneStateLinstener，但我无法获得拨出电话的 RINGING 状态。我还尝试阅读通话记录以搜索当前通话的持续时间，但拨出通话的通话记录在完成后被保存。

我读过公共 API 是不可能的。听起来有可能以不同的方式，例如使用内部 API。我认为会有一些方法可以做到这一点，因为我可以在市场上看到这类应用程序。

请给我任何线索并分享您的知识。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:13:26.737

尝试如下所示。我很久以前就做过。

1）注册一个`OutGoingCallReceiver`（SO上的搜索意图操作）

2) 注册一个`PhoneStateChangeReceiver`(intent-Action:- `ACTION_PHONE_STATE_CHANGED`)

3）创建一个标志， in`SharedPrefernces`或 global `variable`。

4) 在 OutgoingCallReceiver 中将此标志设为真，现在当呼叫被接听时，您将获得状态 `CALL_STATE_OFFHOOK` ，`PhoneStateChangeReceiver`因此您可以确定这是呼入呼叫挂起还是呼出呼叫挂起。在适当的地方禁用标志。

您还可以节省 onHooked 时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-26T13:28:24.427

我知道它对这个问题的回答很晚。但我今天遇到了它，并且有了一个想法，所以分享它。它可能会帮助将来访问该帖子的其他人。

我认为您可以在 PhoneStateListener 类的 onCallStateChanged 方法中检查上次通话的拨出通话时间。如果状态空闲，即 TelephonyManager.CALL_STATE_IDLE，则获取数据。

像这样的东西：

```
Cursor mCallCursor = context.getContentResolver().query(android.provider.CallLog.Calls.CONTENT_URI,null,null,null,null);
int duration = mCallCursor.getColumnIndex( CallLog.Calls.DURATION);
while(mCallCursor.moveToFirst())
{   
    Toast.makeText(context, mCallCursor.getString(duration), Toast.LENGTH_LONG).show();
} 
```

您可以在[此处](http://www.dcpagesapps.com/developer-resources/android/25-android-tutorial-call-logs)找到更多相关信息。我没有测试上面的代码。但这样的事情应该有效。

您可以查看时间是否为 00:00，电话未被接听。否则电话被接听。

希望这对您有所帮助。

# php - 为什么我的 PHP 页面会响应整个 HTML 源代码，而不仅仅是我回显的数据？

> ID：14787868
> 
> 赞同：1
> 
> 时间：2013-02-09T11:55:36.437
> 
> 标签：php, jquery

我正在尝试在 jQuery 的帮助下与服务器来回通信。

这是我的简单场景：

1.  使用 jQuery post 方法通过 html 表单发送数据。
2.  在服务器端接收数据再次回显。
3.  在客户端以jQuery回调的形式接收相同的数据并对数据做一些事情（broser中的console.log）

**现在我的问题是php返回带有标签的源html代码，而不是已经收到的数据？因此，如果我在客户端的表单字段中键入“Hello”，php 将从页面返回整个 html 源。这是为什么 ？**

html:

```
<form action="#">
     <textarea name="content" id="content" rows="8" cols="40"></textarea>
        <p><button>Click to submit</button></p>
    </form> 
```

jQuery：

```
 (function(){
            $("form").on("submit",function(e){
                $.post("save.php",$(this).serialize(),function(data){
                    alert(data);
                })
            e.preventDefault();
            })
    }()); 
```

PHP：

```
<!DOCTYPE HTML>
<html charset="utf-8">
    <head>
        <title>Index</title>
        <link rel="stylesheet" href="path-to-stylesheet.css" type="text/css"/>
    </head>
    <body>
        <?php
            echo $_POST['content'];
        ?> 
    <script src=""></script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T12:15:58.110

假设这是您的 save.php ：

```
<!DOCTYPE HTML>
<html charset="utf-8">
    <head>
        <title>Index</title>
        <link rel="stylesheet" href="path-to-stylesheet.css" type="text/css"/>
    </head>
    <body>
        <?php
            echo $_POST['content'];
        ?> 
    <script src=""></script>
    </body>
</html> 
```

只需执行 json_encode 并使用您的 ajax 调用解析 jSON：

**保存.php**

```
<?php
    echo json_encode($_POST['content']);
?> 
```

**jQuery**

```
$.post("save.php",
    $(this).serialize(),
    function(data){
        alert(data);
    }, 'json'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T12:13:58.953

您正在将完整的 html 页面发送回浏览器，这就是为什么您不只收到数据的原因。将您的 php 文件更改为以下内容，它应该可以按预期工作：

```
<?php
echo $_POST['content'];
?> 
```

# 在您的情况下，为什么 PHP 会返回整个 html 页面？

1.  PHP 解析整个 save.php 文件
2.  如果没有`<?php ?>`标签，则整个内容保持不变，并将按原样发送到浏览器
3.  如果它找到任何`<?php ?>`标签，解析器会解释代码并将其输出到同一个地方

## 例子

保存.php

```
<!DOCTYPE HTML>
<html charset="utf-8">
    <head>
        <title>Index</title>
        <link rel="stylesheet" href="path-to-stylesheet.css" type="text/css"/>
    </head>
    <body>
        <?php
            echo $_POST['content'];
        ?> 
    <script src=""></script>
    </body>
</html> 
```

解析器找到一个`<?php ?>`标签：

```
 <?php
            echo $_POST['content'];
        ?> 
```

并解释它：（简单地假设`$_POST['content'] == 'john smith'`）

```
 john smith 
```

现在，解释的代码被插入并替换原始内容中的 php 标签：

```
<!DOCTYPE HTML>
<html charset="utf-8">
    <head>
        <title>Index</title>
        <link rel="stylesheet" href="path-to-stylesheet.css" type="text/css"/>
    </head>
    <body>
        john smith
    <script src=""></script>
    </body>
</html> 
```

最后，它被发送到浏览器并由 jQuery Ajax 回调处理。

# android - 如何在android中为文本视图设置自动引用？

> ID：14787869
> 
> 赞同：1
> 
> 时间：2013-02-09T11:55:38.710
> 
> 标签：android, android-asynctask

我的应用程序就像是在家门口交付产品。之后，客户订购产品给客户一个订单状态，如待处理、进度、包装等。它将从服务器获取。当经理更改订单状态时PC.如何在我的应用程序的订单状态页面中自动获取状态。任何知道的人与我分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:00:27.460

您必须使用检查状态是否更新的服务。如果更新，则更改 textview 上的状态。但这不是一个好习惯。所以，我认为你必须使用推送通知来更新状态。

# qt - Qt在移动时在场景位置拖动项目

> ID：14787871
> 
> 赞同：1
> 
> 时间：2013-02-09T11:56:05.313
> 
> 标签：qt, events, qt4, pyqt, pyside

在场景中拖动 qgraphicsitem 可以通过多种方式完成。但对我来说最有趣的是附加标志“itemIsMovable”，因为它应该更“原生”与 Qt 库。

我的问题是；当项目正在拖动时，应该以什么方式打印它的位置？请记住，我们已经标记，项目正在移动并且位置正在返回某处。

下就是例子。问题是如何以交互方式更新矩形和圆形之间的连接线（使用工具栏图标添加带有连接线的圆形）。

```
import sys
from PySide import QtCore, QtGui

class drawCircle(QtGui.QGraphicsItem):
    def __init__(self, scene):
        self.Circle = QtGui.QGraphicsEllipseItem(-20, -20, 40, 40)
        self.Circle.setPos(50,50)
        self.Circle.setFlag(QtGui.QGraphicsItem.ItemIsMovable)
        scene.addItem(self.Circle)

        self.Line = QtGui.QGraphicsLineItem(-20, -20, 40, 40)
        self.Line.setLine(0, 0, self.Circle.pos().x(), self.Circle.pos().y())
        scene.addItem(self.Line)

class winScene(QtGui.QGraphicsScene):
    def __init__(self):
        super(winScene, self).__init__()
        self.setSceneRect(0,0,450,200)
        self.addItem(QtGui.QGraphicsRectItem(-20, -20, 40, 40))

class SceneWindow(QtGui.QMainWindow):
    def __init__(self):
        super(SceneWindow, self).__init__()
        self.DefineSceneWindow()

    def DefineSceneWindow(self):
        self.SchSc = winScene()
        view = QtGui.QGraphicsView(self.SchSc)
        view.setRenderHint(QtGui.QPainter.Antialiasing)
        view.scale(1,1)
        self.setCentralWidget(view)
        self.setGeometry(0, 300, 500, 300)
        self.show()

        self.drRect = QtGui.QAction(QtGui.QIcon('paint_brush.png'), 'Draw Circle', self)
        self.drRect.setShortcut('Ctrl+R')
        self.drRect.triggered.connect(self.DefineAction)

        self.toolbar = self.addToolBar('tools')
        self.toolbar.addAction(self.drRect)

    def DefineAction(self):
        drawCircle(self.SchSc)

def main():
    app = QtGui.QApplication(sys.argv)
    ex = SceneWindow()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T15:14:49.130

您需要重新实现`QGraphicsItem.itemChange(change, value)`以检测场景位置的变化。PySide[文档](http://srinikom.github.com/pyside-docs/PySide/QtGui/QGraphicsItem.html#PySide.QtGui.PySide.QtGui.QGraphicsItem.itemChange)有一个直接相关的示例。

# java - 为什么在运行 JPA 时会出现此异常？

> ID：14787876
> 
> 赞同：4
> 
> 时间：2013-02-09T11:56:35.220
> 
> 标签：java, maven, jpa

这只是一个由 Maven 构建的普通 JPA 控制台。我有一个非常烦人的异常

```
java.lang.ClassNotFoundException: javax.persistence.Persistence 
```

我找到了一些关于此类问题的解决方案，他们建议将***javaee-api*** lib 添加到 pom.xml。但是错误仍然***存​​在于 javee-api lib***。

```
import javax.persistence.EntityManager;
import javax.persistence.EntityTransaction;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;

public class App 
{
    public static void main( String[] args )
    {
        // This line causes error
        EntityManagerFactory entityManagerFactory =
                    Persistence.createEntityManagerFactory("testjpa");
        // It works when I comment above line and print hello
    }
} 
```

所以我很确定异常与库问题无关，persistence.xml 文件可能会导致问题。

这是我的项目树

```
├── pom.xml
└── src
    ├── main
    │   ├── java
    │   │   └── com
    │   │       └── hoan
    │   │           ├── App.java
    │   │           └── Customer.java
    │   └── resources
    │       └── META-INF
    │           └── persistence.xml
    └── test 
```

我的persistence.xml

```
<persistence-unit name="testjpa" transaction-type="RESOURCE_LOCAL">

    <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>

    <class>com.foo.Customer</class>

    <properties>
        <property name="javax.persistence.jdbc.driver" 
                  value="com.mysql.jdbc.Driver"/>
        <property name="javax.persistence.jdbc.url"
                  value="jdbc:mysql://localhost:3306/quickstart">
        <property name="javax.persistence.jdbc.user" value="root" />
        <property name="javax.persistence.jdbc.password" value="password"/>
    </properties>

</persistence-unit> 
```

pom.xml 依赖项

```
<dependency>
    <groupId>org.apache.openjpa</groupId>
    <artifactId>openjpa-all</artifactId>
    <version>2.0.0</version>
</dependency>

<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.22</version>
</dependency> 
```

顺便说一句，我遵循了这个线程[“EntityManager 没有持久性提供程序”错误](https://stackoverflow.com/questions/4261435/no-persistence-provider-for-entitymanager-error)，这与我的问题完全相同，但似乎没有任何效果。

有什么问题？

更新：命令行运行jar文件

```
java -cp target/jpa-demo.jar com.foo.App 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:03:43.393

将缺少的依赖项添加到您的 pom.xml

```
 <dependency>
      <groupId>javax.persistence</groupId>
      <artifactId>persistence-api</artifactId>
      <version>1.0</version>
    </dependency> 
```

为什么它在 eclipse 中运行？

我不是 eclipse 上瘾者，但我知道您可以轻松自定义您的类路径，并且它不会与您的 pom 文件保持同步。因此，eclipse 使用的类路径很有可能与 maven 类路径不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:05:38.600

将此 jar 添加到构建路径[链接中](http://www.java2s.com/Code/JarDownload/javax/javax.persistence.jar.zip)

虽然最好像这样通过maven添加依赖

```
<dependency>
    <groupId>javax.persistence</groupId>
    <artifactId>persistence-api</artifactId>
    <version>1.0.2</version>
</dependency> 
```

问候安舒尔

# mysql - 使用 Qt 的数据库连接：失败？

> ID：14787885
> 
> 赞同：1
> 
> 时间：2013-02-09T11:57:47.143
> 
> 标签：mysql, qt, qt-creator

我对 Qt 很陌生。我正在尝试使用 Qt 建立 MySQL 数据库连接并显示表信息 QSqlTableModel。这是我的代码：

1) .pro 文件

```
QT       += core gui sql

TARGET = sri_qtdb
TEMPLATE = app

SOURCES += main.cpp\
        mainwindow.cpp

HEADERS  += mainwindow.h

FORMS    += mainwindow.ui 
```

2) .h 文件

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <QDebug>
#include <QtSql>
#include <QtGui>
#include <QtCore>

namespace Ui {
    class MainWindow;
}

class MainWindow : public QMainWindow {
    Q_OBJECT
public:
    MainWindow(QWidget *parent = 0);
    ~MainWindow();

protected:
    void changeEvent(QEvent *e);

private:
    Ui::MainWindow *ui;
    QSqlDatabase db;
    QSqlTableModel *model;
    //QTableWidget *table;
};

#endif // MAINWINDOW_H 
```

3) .cpp 文件

a) main.cpp

```
#include <QtGui/QApplication>
#include "mainwindow.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();
    return a.exec();
} 
```

b) 主窗口.cpp

```
#include "mainwindow.h"
#include "ui_mainwindow.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    this->setCentralWidget(ui->tableView);
    QSqlDatabase db = QSqlDatabase::addDatabase("QMYSQL");
    db.setHostName("localhost");
    db.setDatabaseName("user");
    db.setUserName("root");
    db.setPassword("*********");
    if(!db.open()){ qDebug()<< "Failed"; }
    else
    {
       model = new QSqlTableModel(this);
       model->setTable("new_joiners");
       model->select();
       ui->tableView->setModel(model);
    }
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::changeEvent(QEvent *e)
{
    QMainWindow::changeEvent(e);
    switch (e->type()) {
    case QEvent::LanguageChange:
        ui->retranslateUi(this);
        break;
    default:
        break;
    }
} 
```

可用驱动程序：QSQLITE QMYSQL3 QMYSQL

我的输出总是“失败”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T12:12:30.620

首先，重新检查您的数据库`localhost`和所有参数。

* * *

检查您是否真的需要驱动程序：

```
QStringList driverList;
driverList = QSqlDatabase::drivers();

if (!driverList.contains("QMYSQL", Qt::CaseInsensitive))
    qDebug()<<"No QMYSQL support! Check all needed dll-files!";
else 
    qDebug()<<"QMYSQL support is avaiable."; 
```

* * *

编写代码以使其具体化并使用调试功能。例如，如果您在连接 DB 时遇到错误，则以这种方式输出最后一个错误：

```
if(!db.open())
{
    qDebug()<<"Error while opening DB: " << db->databaseName()
            << db->lastError();
} 
```

* * *

祝你好运！

# postgresql - PostgreSQL 继承：父表触发器是否继承？

> ID：14787887
> 
> 赞同：7
> 
> 时间：2013-02-09T11:58:01.537
> 
> 标签：postgresql, inheritance, triggers, timestamp, postgresql-9.2

如果我在 CANINES 表上有一个更新前触发器，它将时间戳列设置为 now()，并且 DOGS 从 CANINES 继承，那么当更新 DOGS 行时，CANINES 更新触发器是否应该触发？在我的测试中它没有，所以我怀疑答案是*否定*的，但也许我没有正确地做事：

```
create table canines
(
lastupdate timestamp with time zone default now()
);

CREATE OR REPLACE FUNCTION stamp_lastupdate_column()
    RETURNS TRIGGER AS $$
    BEGIN
       NEW.lastupdate = now(); 
       RETURN NEW;
    END;
    $$ language 'plpgsql';

CREATE TRIGGER TRG_CANINES_BU BEFORE UPDATE
        on CANINES FOR EACH ROW EXECUTE PROCEDURE 
        stamp_lastupdate_column();

create table dogs
(id int primary key,
breed varchar(25)
) inherits (CANINES);

insert into dogs(id, breed) values(1, 'sheltie');  

select * from dogs;
--"2013-02-09 06:49:31.669-05" , 1 , sheltie

update dogs set breed = 'Sheltie/Shetland Sheepdog' where id = 1;

select * from dogs;
--"2013-02-09 06:49:31.669-05" , 1 , Sheltie/Shetland Sheepdog 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-09T12:33:34.030

长话短说 - 不，它不是继承的。有`CREATE TABLE`-选项`LIKE ... INCLUDING ...`，但它也不会传播触发器。

# sql - SQL - 查找只喜欢同年级学生的学生的年级

> ID：14787890
> 
> 赞同：4
> 
> 时间：2013-02-09T11:58:12.267
> 
> 标签：sql, find, any

我正在做一门免费的斯坦福在线课程（这很酷，你应该看看），最近两天我一直在绞尽脑汁，找不到以下问题的答案。请帮忙。

*问题 4 找出只有同年级朋友的学生的姓名和年级。返回按等级排序的结果，然后按每个等级中的名称排序。*

当我最终认为我有答案时，我的查询返回了 Friend 表中的所有值。

这是我能想到的最好的。

```
select h1.id, h1.name, h1.grade, h2.id, h2.name, h2.grade
from friend f1
join highschooler h1 on f1.id1 = h1.id
join highschooler h2 on f1.id2 = h2.id
where h1.grade = any (select h3.grade from friend f2
                    join highschooler h3 on f2.id1 = h3.id
                    where h3.id = f1.id1) 
```

我需要在 SQL Lite 中运行查询。我正在使用[http://sqlfiddle.com](http://sqlfiddle.com)在 SQL Lite 中测试我的查询，这是我正在使用的示例数据。

```
/* Create the schema for our tables */
create table Highschooler(ID int, name text, grade int);
create table Friend(ID1 int, ID2 int);
create table Likes(ID1 int, ID2 int);

/* Populate the tables with our data */
insert into Highschooler values (1510, 'Jordan', 9);
insert into Highschooler values (1689, 'Gabriel', 9);
insert into Highschooler values (1381, 'Tiffany', 9);
insert into Highschooler values (1709, 'Cassandra', 9);
insert into Highschooler values (1101, 'Haley', 10);
insert into Highschooler values (1782, 'Andrew', 10);
insert into Highschooler values (1468, 'Kris', 10);
insert into Highschooler values (1641, 'Brittany', 10);
insert into Highschooler values (1247, 'Alexis', 11);
insert into Highschooler values (1316, 'Austin', 11);
insert into Highschooler values (1911, 'Gabriel', 11);
insert into Highschooler values (1501, 'Jessica', 11);
insert into Highschooler values (1304, 'Jordan', 12);
insert into Highschooler values (1025, 'John', 12);
insert into Highschooler values (1934, 'Kyle', 12);
insert into Highschooler values (1661, 'Logan', 12);

insert into Friend values (1510, 1381);
insert into Friend values (1510, 1689);
insert into Friend values (1689, 1709);
insert into Friend values (1381, 1247);
insert into Friend values (1709, 1247);
insert into Friend values (1689, 1782);
insert into Friend values (1782, 1468);
insert into Friend values (1782, 1316);
insert into Friend values (1782, 1304);
insert into Friend values (1468, 1101);
insert into Friend values (1468, 1641);
insert into Friend values (1101, 1641);
insert into Friend values (1247, 1911);
insert into Friend values (1247, 1501);
insert into Friend values (1911, 1501);
insert into Friend values (1501, 1934);
insert into Friend values (1316, 1934);
insert into Friend values (1934, 1304);
insert into Friend values (1304, 1661);
insert into Friend values (1661, 1025);
insert into Friend select ID2, ID1 from Friend;

insert into Likes values(1689, 1709);
insert into Likes values(1709, 1689);
insert into Likes values(1782, 1709);
insert into Likes values(1911, 1247);
insert into Likes values(1247, 1468);
insert into Likes values(1641, 1468);
insert into Likes values(1316, 1304);
insert into Likes values(1501, 1934);
insert into Likes values(1934, 1501);
insert into Likes values(1025, 1101); 
```

先感谢您。

问候。

塞萨尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T12:02:28.960

所以我们想找到其他年级没有学生的学生，他们有友谊关系，对吧？这是一种表达方式：

```
select * from highschooler h
where not exists
(select 1 from highschooler h2 where h2.grade != h.grade and exists
(select 1 from friends f where (f.id1 = h.id or f.id2 = h.id) and (f.id1 = h2.id or f.id2 = h2.id)))
order by grade, name 
```

编辑：如果你还要求他们至少有一个朋友，你也需要检查一下

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T03:19:34.403

我的解决方案：

```
选择姓名、年级
从高中生
ID 不在的地方
（选择 ID1
来自朋友 F1 加入高中生 H1
开 H1.ID = F1.ID1
加入高中生H2
开 H2.ID = F1.ID2
WHERE H1.grade <> H2.grade)
按年级、姓名排序

```

本质上，内部子查询返回学生与具有不同等级的朋友的关系（其中 H1.grade <> 到 H2.grade）。然后外部查询简单地列出了所有在这个内部关系中没有特征的学生。

# excel-formula - 如何根据匹配结果对这个excel表进行排序和排列？

> ID：14787891
> 
> 赞同：0
> 
> 时间：2013-02-09T11:58:14.143
> 
> 标签：excel-formula, excel-2010

我有一个很大的excel表。我在 AG 中向其中添加了一列，然后在具有 3000 行的 AG 列和具有 114000 行的 Z 列之间进行了匹配。已使用以下公式将匹配的结果放在 AI 列中：

```
=vlookup(ag2,$z$2:$z$114000,1,false) 
```

我现在想要的是以下内容：我想根据新列上的结果重新排列工作表，但我想查看与匹配结果文档中的每个单元格相关的列上的数据。**那么该怎么做呢？**

我所做的是突出显示整个工作表并根据新列 AI 对其进行排序。但是，它没有给我其他列的相关数据，那么该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:07:28.277

查看您之前的问题并看到这个新问题，我可能会建议您查看条件格式或大型排序。上一个问题可[在此处找到](https://stackoverflow.com/questions/14787487/how-to-find-the-matches-between-two-columns-in-excel-sheet "在这里找到")。

条件格式可以在您的“助手”列、AI 或 Z 列上完成，就像您在上一个问题中提出的那样。应用红色，例如，当 AI 为 1 时。如何在[此处](http://office.microsoft.com/en-us/excel-help/quick-start-apply-conditional-formatting-HA010370614.aspx "这里")找到。第二件事是听起来像您尝试过的[多级排序。](http://www.dummies.com/how-to/content/how-to-sort-excel-2010-data-on-multiple-columns.html)

虽然我认为根据您所说的“匹配结果文档”部分，您希望将实际匹配结果放入 AI 中，尝试`=INDEX($z$2:$z$114000,MATCH(ag2,$z$2:$z$114000,0))`. 带有#N/A 的任何内容都意味着它没有匹配项。

# objective-c - Xcode - 单击“本地化”时本地化不起作用

> ID：14787897
> 
> 赞同：0
> 
> 时间：2013-02-09T11:58:33.160
> 
> 标签：objective-c, xcode, localization

我从 Xcode（文件 > 新建 > 文件 > 字符串文件）创建了一个名为“Localizable.strings”的字符串文件，因为我想本地化我的应用程序。

我的琴弦现在可以正常工作了。我的可本地化字符串文件包含

```
"TEST_TEXT" = "Test"; 
```

在我设置的代码中

```
label1.text = NSLocalizedString(@"TEST_TEXT", nil); 
```

就像我说的那样完美。应用程序运行时标签显示“测试”。

但是当我单击“本地化”并选择英语时，它将不起作用。我的标签将显示 TEST_TEXT，文件将移至 en.lproj。

也许 iOS 在 en.lproj 中找不到该文件？

乔纳森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:40:13.980

我通过创建一个新的字符串文件而不是将其命名为 Localizable.strings 解决了这个问题

我将其命名为 Localization.strings 。

那么我们必须使用：

```
NSLocalizedStringFromTable(@"TEST_TEXT", @"Localization/*(Your strings file name)*/", nil); 
```

TEST_TEXT 是字符串文件中的键。Localization 是您的字符串文件的名称（未命名为 Localizable）。nil 是我们不需要使用的注释，这就是我输入 nil 的原因。

# haskell - 如何将类型同义词与代数数据类型一起使用？

> ID：14787899
> 
> 赞同：0
> 
> 时间：2013-02-09T11:58:36.447
> 
> 标签：haskell, types

对于以下代码，如何指定函数 storePhone 将 Int 存储为的电话号码类型（HomePhone 或 WorkPhone）？

```
type HomePhone = Int
type WorkPhone = Int

data Phone = HomePhone
           | WorkPhone

storePhone :: int -> Phone 
storePhone num = num

main :: IO ()
main = print $ storePhone 12345678 
```

这个问题是我正在做的一个附带项目的问题的简化版本。我有一个将文件解析为相关数据类型的模块（也就是示例中的电话类型）。所有数据都是 Double 但语义不同。在另一个模块中，我有使用数据的方法。每种方法都将数据类型（又名 HomePhone、WorkPhone）的不同排列作为参数。我本可以制作 HomePhone 和 WorkPhone 数据类型甚至是新类型，但它会使使用数据的方法看起来很混乱，有很多模式匹配和东西。所以只是想知道我是否可以简化数据类型（又名电话），以便它更优雅一点并且仍然类型安全。干杯! 我想我应该做以下事情？

```
type HomePhone = Int
type WorkPhone = Int

data Phone = HomePhone HomePhone 
           | WorkPhone WorkPhone 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T12:12:10.243

在其当前形式中，该`Phone`类型无法存储任何电话号码。它有两个构造函数，它们都接受零参数，因此不能存储任何东西。构造函数的名称与您之前定义的类型名称相同这一事实并不意味着什么。

您可能打算这样：

```
type PhoneNumber = String -- Storing phone numbers as ints is a bad idea

data PhoneType = HomePhone
               | WorkPhone
                 deriving Show

data Phone = Phone PhoneType PhoneNumber
             deriving Show

storePhone :: PhoneNumber -> PhoneType -> Phone
storePhone number typ = Phone typ number

main :: IO ()
main = print $ storePhone "12345678" HomePhone 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-09T13:59:16.320

我认为 sepp2k 很好地回答了您的问题，但我将尝试解释，为什么我认为您首先遇到了问题。类型和值之间以及类型构造函数和值构造函数之间存在差异。

```
Phone = Phone 
```

在这个例子中，左边是一个类型，右边是一个值。请注意，类型和值都可以具有相同的名称。编译器会弄清楚你的意思。基本上，在类型声明和数据声明中，您的意思是类型，而在函数实现中，您的意思是值。

```
Phone = NoPhone
      | Phone Int 
```

在这个例子中，`NoPhone`是一个值，右边`Phone`是一个值构造函数，因为它需要一个类型的值`Int`来生成一个值。左侧仍然是一个类型。

```
Container a = NotEmpty a
            | Empty 
```

在这个例子中，`Container`是一个类型构造函数，因为你可以给它一个类型，比如`Int`得到一个类型——在这种情况下就是 type `Container Int`。`Empty`是一个值，并且`NotEmpty`是一个值构造函数，它采用您碰巧选择的任何类型的值`a`- 让我们称之为 type `T`，以产生一个 type 的值`Container T`。

在您的示例中，您混合了类型和值的概念。

```
type HomePhone = Int
type WorkPhone = Int 
```

这就是说，`HomePhone`只是`WorkPhone`类型的不同名称`Int`

```
data Phone = HomePhone
           | WorkPhone 
```

这表示任何类型`Phone`都有 value`HomePhone`或 value `WorkPhone`。重要的是，这些值与您之前声明的具有相同名称的类型同义词不同。

```
storePhone :: int -> Phone 
```

这表示 storePhone 接受一个 type 的值`Int`并返回一个 type 的值`Phone`。

```
storePhone num = num 
```

这是个问题。在这一行中，num 是 type 的值`Int`，但是您返回 num，而您刚刚在类型声明中说您将返回 type 的值`Phone`，即 value`HomePhone`或 value `WorkPhone`。如果你想傻，但符合你的类型声明，你可以这样做

```
storePhone num = if num > 0 then HomePhone else WorkPhone -- silly, but compiles :) 
```

# java - Android SQLite 查询停止 AsyncTask

> ID：14787902
> 
> 赞同：0
> 
> 时间：2013-02-09T11:59:01.923
> 
> 标签：java, android, android-asynctask, android-sqlite

我已经调试了代码，似乎 sqlite 查询停止了 AsynkTask 线程：

```
 Log.d(LOG_TAG, "Getting params");
Cursor c = null;
try {
  String[] queryParams = new String[]{String.valueOf(commandQueueId), String.valueOf(DIRECTION_OUT)};
  // ↓↓↓ STOPPING HERE ↓↓↓
  c = dataSource.query(TABLE_USER_COMMAND, "queue_id = ? AND direction = ? AND _id > " + fromId, queryParams);

  Log.d(LOG_TAG, "After query");
  if (c.moveToFirst()) {
    UserCommand command;
    do {
      // Something with cursor
    } while (c.moveToNext());
  }

} catch (Exception e) {
  Log.e(LOG_TAG, "Error while querying", e);
} finally {
  Log.d(LOG_TAG, "Finnaly executed");
  if (null != c)
    c.close();
} 
```

LogCat 只显示“获取参数”字符串，然后什么都没有（没有错误或任何东西）。在 AsyncTask 中执行的代码，dataSource 对象的所有方法都同步了。**在 UI 线程查询中效果很好。**会是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:09:14.583

you are Not Passing Anything with `_id` inside your condition

```
"queue_id = ? AND direction = ? AND _id > " 
```

it should be like

```
"queue_id = ? AND direction = ? AND _id > 1(or may other integer parameter)" + fromId, queryParams 
```

Hope it will Help

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T12:49:52.067

我认为问题在于您试图在查询字符串中包含 _id 参数（fromId）。所以查询函数可能无法构建查询字符串

```
"queue_id = ? AND direction = ? AND _id > " + fromId 
```

相反，您应该将 fromId 添加到 selectionArgs (queryParams)。创建一个包含您的 queryParams 和 fromId 的字符串数组。然后它应该工作。

```
String[] queryParams = new String[]{String.valueOf(commandQueueId), String.valueOf(DIRECTION_OUT), String.valueOf(fromId)};
c = dataSource.query(TABLE_USER_COMMAND, "queue_id = ? AND direction = ? AND _id > ? ", queryParams ); //queryParams which include your fromId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T16:21:00.517

> dataSource 对象已同步所有方法

当心死锁！尝试仅同步您的*写入*方法（插入、删除、更新）和*读取*方法（查询），因为在读取它们时没有更改数据的风险 PS：我知道问题有点老了，以防其他人正在阅读它。

# mysql - Mysql匹配并输出两行

> ID：14787911
> 
> 赞同：0
> 
> 时间：2013-02-09T12:00:11.640
> 
> 标签：mysql

Mysql 查询以匹配和连接给定日期的两行。嗨，我是新手，已经用谷歌搜索并搜索了几天的堆栈溢出，但我找不到答案。请帮助解决以下问题

我有一张桌子：人

```
Id   Leader Name1   Name2   StartDate  EndDate
123  1      Person1         2013-02-11 2013-02-17
123  0              Person2 2013-02-13 2013-02-13
123  0              Person3 2013-02-13 2013-02-13 
```

我有一个问题1

```
(SELECT t1.Id, t1.Name1, t1.Name2
 FROM `dbo`.`people` t1
WHERE t1.StartDate >= '2013-02-11'
AND t1.Leader = 1)

UNION 

(SELECT t2.Id, t2.Name1, t1.Name2
FROM `dbo`.`people` t2
WHERE t2.StartDate >= '2013-02-11'
AND t2.Leader = 0) 
```

这返回

```
Id   Name1   Name2
123, Person1 
```

我有一个查询2

```
(SELECT t1.Id, t1.Name1, t1.Name2
FROM `dbo`.`people` t1
WHERE t1.StartDate >= '2013-02-13'
AND t1.Leader = 1)

UNION 

(SELECT t2.Id, t2.Name1, t1.Name2
FROM `dbo`.`people` t2
WHERE t2.StartDate >= '2013-02-13'
AND t2.Leader = 0) 
```

这返回

```
Id   Name1   Name2
123, Person1 
123,         Person2
123,         Person3 
```

我需要 2012-02-11 的结果来显示

```
Id   Name1   Name2
123, Person1 null 
```

并为 2012-02-13 显示

```
Id   Name1   Name2
123, Person1 Person2
123, Person1 Person3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:29:13.237

你为什么要做这些工会？您知道 union 将两个结果集加在一起而不进行比较，是吗？也许您正在尝试进行自我加入？如果是这样，您将在此处找到一个示例：[MYSQL Self-Join 是如何工作的？](https://stackoverflow.com/questions/1284441/how-does-a-mysql-self-join-work)

另外，您的表格是否标准化？请参阅[http://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization) 如果您拆分表格，您可能会有更好的时间。一个常见的初学者错误是试图将太多信息塞进一张表中。为什么你有'名字1'和'名字2'？如果您为领导者存储的信息与非领导者不同，那么您可能应该有一个单独的“领导者”表，然后将它们与 id 相关联。为什么在您的表中 id 列总是相同的？那个id是干什么用的？这些人是否以某种方式属于同一群体？

这里还有一些关于联接的附加信息，可能有助于您理解：

[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

[http://en.wikipedia.org/wiki/Join_%28SQL%29](http://en.wikipedia.org/wiki/Join_%28SQL%29)

# sql - 分组或区分 - 我如何为 3 张桌子做

> ID：14787912
> 
> 赞同：1
> 
> 时间：2013-02-09T12:00:22.640
> 
> 标签：sql, image, group-by, sql-order-by

```
SELECT c.urun_id, a.kat_adi, b.resim_yolu, b.sira, 
c.urun_sira, c.urun_adi
FROM kategoriler a,resimler b, urunler c 
where  a.kat_id=c.kat_id and c.urun_id=b.urun_id
order by c.urun_sira,b.sira 
```

有两个记录`urun_id = 17`。我只想返回一条记录。我有`category`, `products`,`images`表。用户在`images`表中添加了 2 张照片`urun_id=17`。

但我只想显示一条在`sira`.

如果查询的输出是

*   25~个~3个
*   17~电话~2
*   17~电话~4

然后，我想返回

*   **17~电话~2**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:05:31.907

如果我正确理解了您的问题，这应该可以，

```
SELECT c.urun_id, a.kat_adi, b.resim_yolu, min(b.sira),
       c.urun_sira, c.urun_adi
FROM kategoriler a,resimler b, urunler c
where a.kat_id=c.kat_id
and c.urun_id=b.urun_id
group by c.urun_id, a.kat_adi, b.resim_yolu,
       c.urun_sira, c.urun_adi
order by c.urun_sira,b.sira 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T00:41:53.907

在 SQLServer2005+ 中使用[**ROW_NUMBER**](http://msdn.microsoft.com/en-us/library/ms186734.aspx)函数

```
 ;WITH cte AS
 (
  SELECT c.urun_id, a.kat_adi, b.resim_yolu, b.sira, 
         c.urun_sira, c.urun_adi, 
         ROW_NUMBER() OVER (PARTITION BY c.urun_id ORDER BY b.sira) AS rn
  FROM kategoriler a JOIN urunler c ON a.kat_id=c.kat_id
                     JOIN resimler b ON c.urun_id=b.urun_id
  )
  SELECT *
  FROM cte
  WHERE rn = 1
  ORDER BY urun_sira, sira 
```

另一种方式

```
 SELECT c.urun_id, a.kat_adi, b.resim_yolu, b.sira, 
         c.urun_sira, c.urun_adi         
  FROM kategoriler a JOIN urunler c ON a.kat_id=c.kat_id
                     JOIN resimler b ON c.urun_id=b.urun_id  
  WHERE EXISTS (
                SELECT 1
                FROM resimler r
                WHERE b.urun_id = r.urun_id
                HAVING MIN(r.sira) = b.sira
                )
  ORDER BY c.urun_sira, b.sira 
```

# html - 没有前景的电子邮件功能

> ID：14787917
> 
> 赞同：-1
> 
> 时间：2013-02-09T12:00:39.427
> 
> 标签：html

我的客户有一个 linux 服务器。他的要求是仅在 html 中生成电子邮件功能，而不使用 Outlook 等默认电子邮件客户端。请帮助我.. 这应该是什么代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:12:32.930

我不相信这仅在 HTML 中是可能的。您必须使用 PHP、ASPX 或其他服务器端语言来完成这样的事情。

[查看 PHP 提供的 mail() 函数](http://www.w3schools.com/php/php_mail.asp)

# php - 获取php邮件，但在未填写所有信息时不想接收它们

> ID：14787924
> 
> 赞同：-3
> 
> 时间：2013-02-09T12:01:22.930
> 
> 标签：php, forms, email, spam-prevention

```
 PHP

<?php
$field_name = $_POST['cf_name'];
$field_subject = $_POST['cf_subject'];
$field_email = $_POST['cf_email'];
$field_message = $_POST['cf_message'];

$mail_to = 'wermedia@hotmail.com';
$subject = 'Melding fra nettsiden: '.$field_subject;
$mail_noreply = 'noreply@wermedia.com';

$body_message = 'From: '.$field_name."\n";
$body_message .= 'Subject: '.$field_subject."\n";
$body_message .= 'E-mail: '.$field_email."\n";
$body_message .= 'Message: '.$field_message;

$headers = "From: $field_name <$field_email> \r\n";
$headers .= "Reply-To: .$field_email.\r\n";
$headers .= "Return-Path: .$field_email.\r\n";
$headers .= "X-Mailer: Drupal \n";
$headers .= 'MIME-Version: 1.0' . "\n";

$mail_status = mail($mail_to, $subject, $body_message, $headers);

$confirmationSubject='Confirmation message';
$displayForm=true;

if ($_POST){
$field_email=stripslashes($_POST['cf_email']);
$field_message=stripslashes($_POST['cf_message']);
// validate e-mail address
$valid=eregi('^([0-9a-z]+[-._+&])*[0-9a-z]+@([-0-9a-z]+[.])+[a-z]{2,6}$',$field_email);
$crack=eregi("(\r|\n)(to:|from:|cc:|bcc:)",$field_message);
if ($field_email && $field_message && $valid && !$crack){
if (mail($mail_to,$confirmationSubject,$bodymessage.$field_message,'From: '.$mail_noreply."\r\n")){
$displayForm=false;
?>
    <script language="javascript" type="text/javascript">
        alert('Your message was successfully sent. In addition, a confirmation copy was sent to your e-mail address.');
        window.location = 'contact.htm';
    </script>
<?php
        echo '<script>'.htmlspecialchars($field_message).'</script>';
      }else{ // the messages could not be sent
?>
    <script language="javascript" type="text/javascript">
        alert('Something went wrong when the server tried to send your message. This is usually due to a server error, and is probably not your fault. We apologise for any inconvenience caused. Click OK and go one step back, to see your message.');
        window.location = 'contact.htm';
    </script>
<?php
      }
    }else if ($crack){ // cracking attempt
?>
    <script language="javascript" type="text/javascript">
        alert('Your message contained e-mail headers within the message body. This seems to be a cracking attempt and the message has not been sent. Click OK and go one step back, to see your message.');
        window.location = 'contact.htm';
    </script>
<?php
    }else{ // form not complete
?>
    <script language="javascript" type="text/javascript">
        alert('Your message could not be sent. You must include both a valid e-mail address and a message. Click OK and go one step back, to see your message.');
        window.location = 'contact.htm';
    </script>
<?php
    }
  }
?>

HTML

<form action="contact.php" method="post">
  Name<br>
  <input id="phpinput" type="text" name="cf_name"><br>
  Subject<br>
  <input id="phpinput" type="text" name="cf_subject"><br>
  E-mail<span style="color: red">*</span><br>
  <input id="phpinput" type="text" name="cf_email"><br>
  Message<span style="color: red">*</span><br>
  <textarea name="cf_message"></textarea><br>
  <input class="mob_sendclear" style="font-family: bankgothic;" type="submit" value="Send">
  <input class="mob_sendclear" style="font-family: bankgothic;" type="reset" value="Clear">
</form> 
```

我觉得这一切都很好，除了当你收到邮件不正常的消息时，我仍然收到邮件......所以如果你发送邮件并收到错误消息，我仍然会在收件箱中收到邮件。

谁能告诉我该怎么做，在哪里？

我还想放一个简单但非常安全的反垃圾邮件代码。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-09T12:04:52.910

只需验证客户端

jquery-validate 或使用带有内置验证的主干表单，

通常这是一个前端而不是 php 问题，并且邮件的服务器端验证有点矫枉过正，因为对于每一个错误的提交，你都会响起你的服务器端，这是业务 2 没有人，就个人而言，拥有大部分东西对用户性能更好在客户端，只是我的意见

# jquery - 在其他元素之上不断变换元素

> ID：14787927
> 
> 赞同：5
> 
> 时间：2013-02-09T12:01:44.127
> 
> 标签：jquery, jquery-ui, css, z-index, transform

我正在学习使用 CSS3 3D 变换，但我无法将正在变换的元素保持在所有其他元素之上。

这是我到目前为止所拥有的：http: [//bos.rggwebdesigns.com/](http://bos.rggwebdesigns.com/)

如您所见，该站点遵循标准的 z-index 规则来处理三个 .row div 的层次结构，这意味着第一行中的卡片位于第二行中的卡片之后，依此类推。

我尝试向转换脚本（在 main.js 中）添加行，该脚本选择单击的 .card 元素上方的 .row 元素并将其 z-index 设置为 1000，但这似乎不起作用。

```
$(document).ready(function() {
    $('.card').click(function() {
        $('.row').removeClass('top');
        $('.card').not(this).removeClass('flipped');
        $(this).parents().eq(2).toggleClass('top');
        $(this).toggleClass('flipped');
    })
}); 
```

重申一下，我试图确保转换元素的所有部分始终出现在所有其他元素之上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T13:17:43.980

根据我看到的 z-index 需要是相对的。因此，如果您设置`position : relative;`应该解决您的问题的类“行”。

**编辑：** 我正在查看您的代码。您还需要`.row.top`在 css 中更改为`.top`

# java - 在android中的布局之间切换

> ID：14787930
> 
> 赞同：0
> 
> 时间：2013-02-09T12:02:24.597
> 
> 标签：java, android, android-intent

```
 public class menu extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_activity_page);
    {
    Button but1 = (Button)findViewById(R.id.imageButton4);
    but1.setOnClickListener(new View.OnClickListener() {

     @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

        startActivity(new Intent("com.indore.indoreindicator.Busone"));

        }
    });
    }
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
}

   } 
```

我的菜单类中有这行代码

布松类 -

```
 package com.indore.indoreindicator;

   import android.app.Activity;
   import android.os.Bundle;

    public class Busone extends Activity {

   @Override
     protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.busmenu);
    }

    } 
```

安卓清单文件

```
 <?xml version="1.0" encoding="utf-8"?>
   <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.indore.indoreindicator"
    android:versionCode="1"
    android:versionName="1.0" >

     <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

    <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name="com.indore.indoreindicator.MainActivityPage"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".menu"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.Menu" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <activity
        android:name=".Busone"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.indore.indoreindicaotr.Busone" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

   </application>

   </manifest> 
```

主要活动页面 -

```
 <ImageButton
    android:id="@+id/imageButton4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_marginTop="47dp"
    android:layout_toLeftOf="@+id/TextView05"
    android:src="@drawable/bus"
    tools:ignore="ContentDescription" /> 
```

我的应用程序启动但在启动屏幕后失败，无法在第一页上移动。但如果我评论按钮编码部分，则应用程序将移动到菜单页面。

为什么我不能从我的菜单页面转到名为总线菜单的第二页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T12:08:45.507

你应该尝试使用

`startActivity(new Intent(getApplicationContext(), Busone.class);`

代替

`startActivity(new Intent("com.indore.indoreindicator.Busone"));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T12:44:19.600

如果您只需要在布局之间切换，那么只需添加您的`setOnClickListener`

```
setContentView(R.layout.whatevername); 
```

然后在此之后简单地添加您的布局内容，如 imageview、按钮等。仅当您需要为该布局特定的孩子添加另一个 onClick 时才这样做！如果您想在活动“类”之间切换，那么

```
Intent intent = new Intent(getApplication(), SecondClass.class);
startActivity(intent); 
```

并且不要忘记在 android manifest 中添加您的其他活动

```
<activity android:name=".SecondClass"/> 
```

* * *

基于您的代码

看编辑！！！

```
 public class menu extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_activity_page);
    **{** // why this is here ?????
    Button but1 = (Button)findViewById(R.id.imageButton4);
    but1.setOnClickListener(new View.OnClickListener() {

     @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

        startActivity(new Intent("com.indore.indoreindicator.Busone"));

        }
    });
    **}** // why this is here ????
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
}

   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T12:07:13.167

试试这个：

```
startActivity(new Intent(menu.this, Busone.class)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T12:16:23.263

我不明白您要解释什么，但我看到的是您在 xml 布局中使用图像按钮并在菜单类中使用普通按钮。无需以任何方式使用图像按钮，只需使用 android:background 将图像设置在“普通”按钮上。

# java - 将 3-d java 球体添加到我的挥杆的单个选项卡中

> ID：14787934
> 
> 赞同：0
> 
> 时间：2013-02-09T12:02:47.127
> 
> 标签：java

我的摇摆应用程序上有几个选项卡，我希望其中一个选项卡可以容纳 3d 球体或任何 3-d 对象？这是否可以使用[java3d](http://www.java3d.org/index.html) api。如果是这样，一些指针将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:33:53.727

有几种方法可以结合 Java3d 和 Swing。

最好的方法是使用为 Java3d 提供轻量级功能的[JCanvas3D 。](http://download.java.net/media/java3d/javadoc/1.5.0/com/sun/j3d/exp/swing/JCanvas3D.html)

如果您将轻量级（swing）和重量级（Java3D）组件保存在单独的容器中，您还可以在同一屏幕上混合使用它们。

查看[此](http://www.comp.nus.edu.sg/~cs3283/ftp/Java/swingConnect/archive/tech_topics_arch/mixing/mixing.html)页面了解更多信息。

# php - 在 sql 字符串中使用 url 变量

> ID：14787938
> 
> 赞同：1
> 
> 时间：2013-02-09T12:03:22.273
> 
> 标签：php, sql

我正在使用一个简单的 sql 查询来输出一个通过 sql 语句排序的表。我想在 url 中传递一个变量（以避免必须创建多个 sql 语句），该变量在 sql 字符串中设置 ORDER BY 属性，我不确定这是否可能。这就是我想出的，虽然代码有效，但它不起作用。

```
function list_entries() 
{
    db_connect();

    $orderby = $_GET["orderby"];
    $sql = mysql_query("SELECT * FROM astaro ORDER BY '".$orderby."'");

    while($row = mysql_fetch_array($sql)) {
        echo "Table Outputs - I trimmed this because it's not important";

    }
    echo "</table>";
    db_disconnect();
} 
```

我也知道 pdo 和prepared statements 的优点，但这是一个仅供内部使用的小型应用程序，因此过度复杂化会适得其反！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:06:27.223

我不确定，但应该是：

代替 ：

```
$orderby = '$_GET["orderby"]'; $sql = mysql_query("SELECT * FROM table ORDER BY '.$orderby.'"); 
```

到 ：

```
$orderby = $_GET["orderby"]; 
$sql = mysql_query("SELECT * FROM table ORDER BY '".$orderby."'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T12:08:36.333

您正在引用变量：

```
$orderby = '$_GET["orderby"]'; 
```

所以`$orderby`会从字面上包含文本`$_GET["orderby"]`。

您应该将其更改为：

```
$orderby = $_GET["orderby"]; 
```

而且你不应该在 sql 语句中引用变量：

```
$sql = mysql_query("SELECT * FROM astaro ORDER BY ".$orderby); 
```

但是，无论您使用哪种数据库函数（这些`mysql_*`函数已弃用），这都容易受到 sql 注入的影响。在这种情况下，避免 sql 注入的唯一方法是使用允许`orderby`字符串的白名单并对其进行检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T12:09:19.563

这里的问题是您的查询最终实际上是

SELECT * FROM table ORDER BY '.$_GET["orderby"].'

$_GET['oderby'] 实际上是按字面意思写出来的，不要用引号括起来。像这样的代码实际上是您正在寻找的：

```
$orderby = $_GET["orderby"];
$sql = ("SELECT * FROM table ORDER BY '.$orderby.'");

echo $sql; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T12:10:35.680

您使用数据库的方式存在安全漏洞。请尝试学习 PDO 并删除已弃用的 mysql 驱动程序，因为它将在下一个 PHP 版本中删除。

永远不要让用户知道有关您的表的任何信息，无论是列名还是表名。

# c - 对配置文件进行故障排除，发现可疑行但需要记录 var

> ID：14787939
> 
> 赞同：2
> 
> 时间：2013-02-09T12:03:32.263
> 
> 标签：c, logging, configure

我有一个问题，我需要帮助。我正在尝试使用 python 支持编译 vim，但速度非常缓慢。

我已经尝试了各种方法，包括在这里和其他论坛上的解决方法/修复。

我现在已经回到开始并正在编译，当我这样做并且不运行启用 python 的 --configure 语句时，我没有收到任何错误。但是，当我检查 configure.log 时，我看到：

```
configure:5470: gcc -o conftest -g -O2 -I/usr/local/include/python2.7 -DPYTHON_HOME=\"/usr/local\" -pthread  -I/usr/local/include  -Wl,-E   -L/usr/local/lib conftest.c  -lselinux  -L/usr/local/lib/python2.7/config -lpython2.7 -lpthread -ldl -lutil -lm -Xlinker -export-dynamic >&5
<command-line>:0:14: warning: missing terminating " character [enabled by default]
configure:5470: $? = 0
configure:5471: result: yes 
```

我已将其缩小到以下行。

```
PYTHON_CFLAGS="-I${vi_cv_path_python_pfx}/include/python${vi_cv_var_python_version} -DPYTHON_HOME=\\\"${vi_cv_path_python_pfx}\\\"" 
```

有没有办法可以检查传递给这一行的变量？我对 C 语言没有兴趣。我可以在配置文件中放入什么以便将它们输出到日志文件？

在此先感谢，我希望有人能提供帮助，因为超过 12 小时的时间让我想发誓。

约翰

# ios - 正则表达式模式匹配目标c

> ID：14787940
> 
> 赞同：0
> 
> 时间：2013-02-09T12:03:39.447
> 
> 标签：ios, objective-c, regex, nsregularexpression

我有以下字符串：

```
"abbot n. The superior of a community of monks." 
```

我怎么分开

```
"abbot" 
```

和

```
"n. The superior of a community of monks." 
```

有效地？

我想使用的逻辑类似于将大字符串搜索到第一个空格，然后根据它拆分单词。

我正在用objective-c写这个。

有什么抽象可以让我更容易吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:07:43.590

使用此模式将给出两个包含您需要的匹配项的组：

```
"(.+?)\s+(\w\.\s+.+?)" 
```

# iphone - 发现此错误“链接器命令失败，退出代码为 1（使用 -v 查看调用）”

> ID：14787941
> 
> 赞同：0
> 
> 时间：2013-02-09T12:03:44.907
> 
> 标签：iphone, objective-c

我正在使用 Apple 提供的 Rechablity.h 和 Rechablity.h 并使用这些文件并添加了一些代码，例如

```
#pragma mark Rechability method

/**
* reachabilityChanged()
* @desc Check the internet connection
* @param NSNotification note is the notification of internet state changed
*/

- (void) reachabilityChanged: (NSNotification* )note {

Reachability* curReach = [note object];
NSParameterAssert([curReach isKindOfClass: [Reachability class]]);
[self updateInterfaceWithReachability: curReach];
}

/**
* updateInterfaceWithReachability()
* @desc Update the internet connection state
* @param Reachability curReach is the instance of Reachbility
*/

- (void) updateInterfaceWithReachability: (Reachability*) curReach {

if(curReach == internetReach) {

    NetworkStatus netStatus = [curReach currentReachabilityStatus];
    BOOL connectionRequired = [curReach connectionRequired];
    NSString* statusString = @"";

    switch (netStatus) {

        case NotReachable: {

            statusString = @"Access Not Available";
            connectionRequired = NO;
            isInternetAvailable = FALSE;
            break;
        }

        case ReachableViaWWAN: {

            statusString = @"Reachable WWAN";
            isInternetAvailable = TRUE;
            break;
        }

        case ReachableViaWiFi: {

            statusString = @"Reachable WiFi";
            isInternetAvailable = TRUE;
            break;
        }
    }

    if(connectionRequired)
        statusString = [NSString stringWithFormat: @"%@, Connection Required", statusString];
    //UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"Gmmabling Gambit" message:statusString delegate:nil cancelButtonTitle:nil otherButtonTitles:@"Ok",nil];
    //      [alert show];
    //      [alert release];
    //NSLog(@"%@",statusString);
}
}

/**
* internetCheck()
* @desc store the internet connection state
* @return BOOL internet is available or not
*/

- (BOOL)internetCheck {

return isInternetAvailable;
} 
```

添加了 systemConfiguration.framework 和 Security.framework 但出现此类错误

```
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:28:00.683

当您没有`.m file`在`bundle resources`. 所以你可以交叉检查这些文件是否被添加或者添加实现文件。您可以通过转到**Build Phases -> Compile resources 然后添加 .m 文件来执行相同操作**

让我知道它是否有效:)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:06:02.303

在构建设置中，使用构建架构搜索，如果该值为否，则替换为是。可能是作品。您必须同时更改项目和目标。

# sql - sqlite插入需要很长时间

> ID：14787943
> 
> 赞同：2
> 
> 时间：2013-02-09T12:04:01.583
> 
> 标签：sql, linux, sqlite, terminal

我在 sqlite 数据库表中插入了不到 200,000 行。我只是在终端中通过 sqlite3 使用一个非常简单的 .sql 文件。我敢打赌它已经运行了至少 30 分钟。这是正常的还是我应该关闭进程并尝试不同的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T12:18:52.190

sqlite中的插入速度主要取决于：

*   每个事务的插入量（没有事务的插入是原子插入，每个事务都在它自己的事务中，这意味着它非常慢）
*   数据库模式 - WAL 或普通日志
*   插入字段的索引数
*   磁盘速度

如果速度是个问题，那么您应该就我写的每个因素咨询谷歌并采取适当的行动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T12:15:23.293

您应该进行批量插入，即在大列表中指定值的那种，而不是一次插入一行。像这样：[SQL 批量插入语句](https://stackoverflow.com/questions/12365992/sql-bulk-insert-statement)

# jquery - Fancybox 在最后/第一张图像上隐藏下一个/上一个

> ID：14787944
> 
> 赞同：0
> 
> 时间：2013-02-09T12:04:17.693
> 
> 标签：jquery, fancybox, fancybox-2

我正在使用 Fancybox 2.0.4。我想隐藏第一张图片上的上一个按钮，以及最后一张上的下一个按钮。

我一直在检查，我已经读到需要插入一个条件，但我不知道该怎么做以及在哪里插入它......

你能帮我解决这个问题吗？我几乎尝试了在 Internet 上找到的所有示例，但仍然无法正常工作。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T20:24:16.813

只需将 API 选项`loop`(v2.x) 设置为`false`喜欢

```
$(".fancybox").fancybox({
    loop: false
}); 
```

见**[JSFIDDLE](http://jsfiddle.net/8VZFY/)**

# c# - C#中变量的范围变量和公共变量有什么区别？

> ID：14787949
> 
> 赞同：0
> 
> 时间：2013-02-09T12:04:33.173
> 
> 标签：c#

C#中变量的作用域变量和公共变量有什么区别你可以在程序中的四个不同位置声明变量变量的“作用域”是什么意思？将变量的范围视为“特定变量的范围是程序源代码中编译器识别该变量的范围”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T12:14:16.490

如果我对您的问题的阅读是正确的，那么您希望将范围（本地、实例、静态等）与可见性（公共、私有、受保护、内部）进行对比。这两个概念几乎是独立的（我说“几乎”，因为局部范围的变量没有可见性）。它们一起使您可以控制变量的生命周期和可访问性。

范围控制变量的生命周期，让您确定它何时存在以及何时变得不可用。自然，范围限制了“程序源代码中该变量被编译器识别的范围”。但是，被编译器识别并不足以让您的程序访问该变量：如果编译器将该变量识别为私有，它不会让您的程序在变量可见的上下文之外访问它（例如，从另一个班级）。

从本质上讲，范围和可见性控制可访问性的两个不同方面，它们共同决定程序源代码中的范围，在该范围内，试图访问它的代码可以使用该变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T12:16:23.030

变量的范围是您可以使用该名称并谈论同一件事的时间。

如果它在函数中，则查看`{ }`s. 每当您进入 a`{ }`时，您就会进入更深的范围 - 在内部声明的变量`{ }`不能从外部引用，但在外部声明的变量可以从内部引用。事实上，您不需要 if、for 等 - 您可以`{ }`在 C# 中随时声明一个 new，例如，您可以执行以下操作：

```
{
 int a = foo();
 int b = bar();
}
{
 int a = foo();
 int b = bar();
} 
```

并且重新声明是有效的。

类的“范围”实际上是完全不同的东西，称为可见性。`public`表示如果您在此文件或`using`此文件中，您可以引用它。`protected`意味着只有当您是该类（或其子类）的实例时才能访问它。`private`意味着只有当您是该类的实例（而不是其子类）时才能访问它。`internal`就像 public 一样，除了你还必须在同一个程序集中 - 所以如果你编译为 .dll，那么你不能从其他地方引用内部变量。但是，它是否是公共/私有/内部/受保护的并不能控制变量的生存时间——它的范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T12:14:16.753

类似的东西可以帮助你： [C# 变量范围](http://www.blackwasp.co.uk/CSharpVariableScopes.aspx)

基本上，有 3 个作用域：类级、方法级、嵌套级。[不要与访问修饰符](http://msdn.microsoft.com/en-us/library/wxh6fsc7%28v=vs.71%29.aspx)混淆：public、internal、protected、private。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-09T12:31:03.713

如果使用 Static 关键字声明局部变量，则其生存期比声明它的过程的执行时间长。如果过程在模块内，则只要您的应用程序继续运行，静态变量就会继续存在。

[静态变量](http://msdn.microsoft.com/en-us/library/aa691162%28v=vs.71%29.aspx)

[寿命](http://msdn.microsoft.com/en-us/library/35styb3a%28v=vs.71%29.aspx)

# c# - 我应该返回 -1 还是 int？或使用 out 参数返回数据库操作的结果？

> ID：14787957
> 
> 赞同：0
> 
> 时间：2013-02-09T12:05:19.867
> 
> 标签：c#, null, return-value, value-type

我正在一个项目中为一些打算从其他项目调用的数据库操作编写公共函数。直接写代码，我可以采用以下方法：

```
public int GetCount(Apple apple, Orange orange)
{
    try 
    { 
       // query; 

       return 1000;
    } 
    catch 
    { 
        // log it
        return -1; 
    }
} 
```

或者

```
public int? GetCount(Apple apple, Orange orange)
{
    try 
    { 
       // query; 

       return 1000;
    } 
    catch 
    { 
        // log it
        return null; 
    }
} 
```

或者

```
public bool GetCount(Apple apple, Orange orange, out int count)
{
    count = -1;
    try 
    { 
       // query; 

       count = 1000;
       return true;
    } 
    catch 
    { 
        // log it
        return false; 
    }
} 
```

我目前对其他业务对象执行“null”方式，例如：

```
public Apple GetApple(Orange orange)
{
    try 
    { 
       // query; 

       return apple;
    } 
    catch 
    { 
        // log it
        return null; 
    }
} 
```

调用者检查返回的值是否为`null`并相应地弹出错误消息。**所以我也倾向于将`int?`值类型用作返回类型。但我很想知道这些东西的可接受设计或鼓励实践是什么。**

**编辑：**如果我把 try catch 放在调用者周围，那我的代码库不会到处都是 try catch 吗？从被调用者那里捕获异常不是更容易，这样**调用它的所有函数都不需要关心吗？如果被调用者捕捉到错误并让调用者知道发生了一些错误，那有什么问题？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T12:17:26.953

嗯，这是相当主观的，你不会得到标准化的答案，但是[框架设计指南](https://rads.stackoverflow.com/amzn/click/com/0321545613)这本书是开发约定的好资源，它指出“不要通过捕获非特定异常来吞下错误，例如`Exception`or `SystemException`”。如果您吞下它并返回一些神奇的值，包括`null`，您将无法识别系统故障的根本原因。

就个人而言，我会去

```
public int GetCount(Apple apple, Orange orange)
{
    try 
    { 
       return // query; 
    } 
    catch 
    { 
        // log it
        throw;
    }
} 
```

另一个个人观点 - 我花了太多时间诊断和调试，以了解系统**为什么**不工作，然后，最后，只是为了发现异常被默默地记录和吞下。现在，当我遇到类似`catch(Exception e) { return null; }`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-09T12:12:04.260

吞下异常是不好的做法。

如果该方法无法处理异常，请将其冒泡给调用者：

```
public int GetCount(Apple apple, Orange orange)
{
    try 
    { 
       // query; 

       return 1000;
    } 
    catch 
    { 
        // log it
        throw;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T14:31:03.947

在`int`提供的值对于域而言显然不合法的情况下，并且不需要`default<int>`为零以外的任何值，我认为`Nullable<T>`. 这些`Nullable<int>`类型对于调用者来说很烦人，因为有必要测试 null ，然后在使用前将值提取到其他存储位置。如果一个人犯了这样的错误：

```
if (res.HasValue)
  for (i=0; i<res.Value; i++)
    .... 
```

那么循环开销可能会是原来的两倍多：

```
if (res.HasValue)
{
  int resValue = res.Value;
  for (i=0; i<resValue; i++)
    ....
} 
```

但是要求调用者创建一个额外的变量来避免荒谬的循环开销似乎很麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T12:13:26.457

我也会使用`int?`。重要的是要注意，这有助于您使用所有号码 - 而不是保留特定号码来识别状态。

这就是什么`C`和`C++`缺乏，它使用整数来传达状态，无意中保留了一个数字以供特殊使用。

# javascript - Javascript can architecture this MVC pattern or syntax sugar?

> ID：14787958
> 
> 赞同：0
> 
> 时间：2013-02-09T12:05:23.173
> 
> 标签：javascript, model-view-controller

I would like to ask to be able to build one, based on the the inherited patterns or syntactic sugar, it is not a large framework.Classification Ajax code to maintain the MVC architecture.

I hope it can operate, such as sample code, but I do not know Javascript can do this?

```
/* Just for demonstration architecture may be constructed with an object or function */
var Prototype = (){
    this.Controller = {/*...*/};
    this.Model = {/*...*/};
    this.View = {/*...*/};
    this.Constructor = function(){/* auto binding, like run this.Controller.update */};
    /*...*/
};

var a = new Prototype;  /* or $.extend, object.create, etc */

/* Create a function */
a.Controller.update = function(){
    $('#button').bind('click', function(){
        this.Model.update();    // Equivalent a.Model.update()
        this.Model.list();      // Equivalent a.Model.list()
        b.Model.del();          // Can call other instance of the function
    });
}
a.Model.update = function(){
    $.ajax('json source', function(data){
        this.View.update('json parse'); // Equivalent a.View.update()
    });
}
a.View.update = function(obj){
    /* Do something about the DOM */
}

/* Can be controlled by the other controller */
a.Model.list = function(){
    this.View.list('json parse');   // Equivalent a.View.list()
}
a.View.list = function(obj){
    /* Do something about the DOM */
}

var b = new Prototype;
b.Controller.del = function(){
    $('#del').bind('click', function(){
        this.Model.del();   // Equivalent b.Model.del()
    }
}
b.Model.del = function(){
    $.ajax('json source', function(data){
        this.View.del('json parse');    // Equivalent b.View.del()
    });
}
b.View.del = function(){
    /* Do something about the DOM */
}

a.Constructor();    //init
b.Constructor(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:14:33.163

在我看来，您正在寻找类似[JavaScriptMVC](http://javascriptmvc.com/)的东西。

我实际上在工作中使用它，它可以很好地保持不同的控制器分开。

我建议您尝试下载 JavaScriptMVC 中的示例，看看它是否是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T08:17:58.110

我创造了这个

```
//framework
var Jmvc = function BellaJMVC(){
    this.Controller = { };
    this.Model = function(uri, action, data){
        var self = this;
        $.ajax({ "type": "POST", "url": uri, "data": data, 
            "success": function(r){ self.View[action]($.parseJSON(r)); },
            "error": function(r){ /*...*/ }
        });
    };
    this.View = { };
    this.Init = function(){
        var fNOP = function () {};
        fNOP.prototype = this.prototype;
        for(var cAction in this.Controller){
            this.Controller[cAction].apply(this);
            this.Controller[cAction].prototype = new fNOP;
        }
    };
}

//apply
var a = new Jmvc();
a.Controller.update = function Cupdate(){
    var self = this;
    $('#updateBtn').bind('click', function(){
        self.Model('ajax/json.html', 'update', {"test":"1234"});
    });
}
a.View.update = function Vupdate(obj){
    $('#update').html(obj.msg);
}
a.Init(); 
```

# java - Play! Error messages not getting displayed on UI

> ID：14787963
> 
> 赞同：0
> 
> 时间：2013-02-09T12:05:49.693
> 
> 标签：java, playframework, playframework-1.x

I am able to print the error messages in the console but unable to display the error messages in the UI.

This is the action code:

```
public static void welcome(User user){
    validation.required("User Name",user.name).message("validation.message.em");
    validation.required("Password",user.password).message("validation.message.em");
    if(validation.hasErrors()) {
        System.out.println("Validation errors found!!!");
        for(Error error:validation.errors())
            System.out.println(error.message());
        params.flash(); // add http parameters to the flash scope
        validation.keep(); // keep the errors for the next request
        login();
    } 
```

This is the UI html code:

```
#{form @Application.welcome(), method:'get', id:'loginForm' }
        <table>
            <tr style="height: 100px">
                <td colspan="2"><h1>
                        <b>Login</b>
                    </h1></td>
            </tr>               
            <tr>
                #{field 'user.name'}
                    <td> &{field.name} </td>
                    <td><input type="text" id="${field.id}" name="${field.name}" value="${field.value}" class="${field.errorClass}">
                    <span class="error">${field.error}</span>
                #{/field}
            </tr>
            <tr>
                #{field 'user.password'}
                    <td> &{field.name} </td>
                    <td><input type="password" id="${field.id}" name="${field.name}" value="${field.value}" class="${field.errorClass}">
                    <span class="error">${field.error}</span>
                #{/field}                   
            </tr>
            <tr>
                <td></td>
                <td align="right"><input type="submit" value="Login"></td>
            </tr>
        </table>
    #{/form} 
```

This is the messages conf entry:

```
user.name=User Name
user.password=Password
validation.message.em=%s is required. 
```

Please let me know what am I missing :(

Thanks,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T19:45:00.057

将代码更改为；

```
validation.required("user.name",user.name).message("validation.message.em");
validation.required("user.password",user.password).message("validation.message.em"); 
```

# php - Setting a User Agent for an iFrame

> ID：14787964
> 
> 赞同：1
> 
> 时间：2013-02-09T12:06:07.087
> 
> 标签：php, javascript, iframe, agent

I would like to set a User Agent for an iFrame as iPhone. I found this code:

```
navigator.__defineGetter__('userAgent', function(){
return 'foo' // customized user agent
});

navigator.userAgent; // 'foo' 
```

[from here](https://stackoverflow.com/questions/5426899/creating-a-proxy-to-spoof-iphone-user-agent-in-php/6630823#6630823).

I am wondering how to insert this with my code: PHP/HTML:

```
<div class="holder">
<form action="page.php" method="post">
<label>
http://
</label>
<input type="text" name="url" value="<? echo $_POST['url']; ?>" />
<input type="submit" value="Anschauen" />
</form>
</div>
<div class="iphone">  
<iframe src="<? echo 'http://'. $_POST['url']; ?>"></iframe>
</div> 
```

If the above script doesn't work is there any possibility to use AJAX or cURL, if yes could anyone give an example for my code, since I don't know how to code AJAX or cURL.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T13:50:22.523

您无法从 PHP 端设置用户代理字符串来影响 iframe。用户代理标头是*浏览器*在每次请求时发送的客户端标识符。某些浏览器允许您手动修改它，但不能用于单个帧。

您找到的解决方案可能没有用，因为它使用 JavaScript 来修改用户代理字符串。此修改的结果不会发送到返回您的 iframe 内容的服务器。

* * *

**编辑**

*OP 在评论中提到他想构建一个 iframe 以在“iPhone 模式”下预览网站。*

您正在查看的内容对您来说将是一个很大的问题。几个原因：

1.  没有桌面浏览器能够完美地复制 iOS 浏览器的行为。iOS 版本的 Safari 是 Apple 的自定义 WebKit 构建，并且（理论上）没有其他浏览器，即使是 WebKit 浏览器，也会有相同的行为。您必须考虑触摸事件、Apple 自己的调整、方向更改等。

2.  如果您要寻求`iframe`解决方案，则无法在 iframe 中发送标识您正在使用 iPhone 的标头。*（有一个解决方法，请阅读下面的第 2 点。）*

**可以做什么**

1.  现代网站不再嗅探用户代理标头（浏览器标识符），而是简单地响应并适应屏幕的宽度。这对您有帮助，因为这些网站不依赖用户代理标头来识别浏览器，并且这样的网站只会使设计适应 iframe 的任何尺寸。在您采用这种简单的方法时，您最终会得到类似[iPhone 4 Browser Simulator](http://iphone4simulator.com/)的东西。

2.  您可以使用[xHR](http://en.wikipedia.org/wiki/XMLHttpRequest)发出 AJAX 请求。xHR 允许您修改随请求发送的标头，并且*应该*允许您[更改 User-Agent 标头](https://stackoverflow.com/questions/581383/adding-custom-http-headers-using-javascript)。我还没有测试过，所以我不知道是否允许在 xHR 中更改用户 Agnet，但它可能值得一试。
    然后将返回响应，您可以将该输出放入 iframe。不幸的是，返回内容中的链接很可能会被破坏，因为它们将不再附加到 URL。您必须让自己的脚本浏览响应内容并修复链接。理想情况下，您的脚本也必须拦截所有点击，以便使用 iPhone 的用户代理标头发出另一个 xHR 请求。

如您所见，有一种方法可以让您进行某种模拟（不是模拟），但是您必须依赖网站的响应能力或创建一个脚本来请求具有自定义用户代理标头的页面（假设它是允许的）。

# c# - creating webapi task using .net 4.5

> ID：14787965
> 
> 赞同：1
> 
> 时间：2013-02-09T12:06:08.457
> 
> 标签：c#, asp.net, asp.net-web-api

I have a Task method that uploads images in my webapi project. Everything works fine but I would like to do the upload to my AWS cloud process in a separate task/thread, and then run some function after that process is complete. So to sum it up, here is what I am trying to complete.

1.  http request comes into API with a photo or video
2.  some validation stuff is done and then kicks off the new thread that starts the cloud upload
3.  End the 1st request with a 200 or some type of OK status

4.  While the first request has ended, a upload is in progress, and when that finish, run some sort of complete function on that. client does not need to be updated about with this function but some data needs to be saved.

Thanks for any help

```
 public async Task<HttpResponseMessage> PostMedia([FromUri]string userId, [FromUri]string eventId,[FromUri]string city,
            [FromUri]string title)
        {
            // Check if the request contains multipart/form-data. 
            if (!Request.Content.IsMimeMultipartContent())
            {
                throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
            }
            //temp directory
            string root = HttpContext.Current.Server.MapPath("~/App_Data");
            var provider = new MultipartFormDataStreamProvider(root);
            try
            {
                var sb = new StringBuilder(); // Holds the response body 

                // Read the form data and return an async task. 
                await Request.Content.ReadAsMultipartAsync(provider);

                // This illustrates how to get the form data. 
                foreach (var key in provider.FormData.AllKeys)
                {
                    foreach (var val in provider.FormData.GetValues(key))
                    {
                        sb.Append(string.Format("{0}: {1}\n", key, val));
                    }
                }

                // This illustrates how to get the file names for uploaded files. 
                foreach (var file in provider.FileData)
                {
//Needs to kick off new task/thread
                    using (
               var client = AWSClientFactory.CreateAmazonS3Client("key",
                                                                       "key"))
                    {
                        var fileInfo = new FileInfo(file.LocalFileName);
                        using (var stream = fileInfo.Open(FileMode.Open))
                        {
                            var request = new PutObjectRequest();
                            request.WithBucketName("Images")
                                   .WithCannedACL(S3CannedACL.PublicRead)
                                   .WithKey(ConfigurationManager.AppSettings["ImageBucket"] + fileInfo.Name +
                                   file.Headers.ContentDisposition.FileName.Substring(file.Headers.ContentDisposition.FileName.LastIndexOf('.')).Replace("\"", ""))
                                   .InputStream = stream;
                            client.PutObject(request);

                            sb.Append(string.Format("Uploaded file: {0} ({1} bytes)\n", fileInfo.Name, fileInfo.Length));
                            var mtype = MediaType.Picture;
                              if(file.Headers.ContentType.MediaType.StartsWith("image"))
                              {
                                  mtype = MediaType.Picture;
                              }
                              else if(file.Headers.ContentType.MediaType.StartsWith("video"))
                              {
                                  mtype = MediaType.Video;
                              }

                              if (File.Exists(fileInfo.FullName))
                              {
                                  File.Delete(fileInfo.FullName);
                              }
                        }
                    }
                }
                return new HttpResponseMessage()
                {
                    StatusCode = HttpStatusCode.Created,
                    Content = new StringContent(sb.ToString())
                };
            }
            catch (System.Exception e)
            {
                return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, e);
            }
        } 
```

# php - How can I make my script faster. One part takes 3 seconds alone

> ID：14787968
> 
> 赞同：0
> 
> 时间：2013-02-09T12:06:18.503
> 
> 标签：php, lighttpd

After checking my code I found why it is taking 7 seconds to load wish is a pain..

```
$target_path = "uploads/";
exec("./speechdetect.sh uploads/voice.3gp > speech.results");
$myFile = "uploads/voice.3gp";
unlink($myFile);
$myFile = "voice.flac";
unlink($myFile);
$target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 
```

My script takes a voice recording and then sends it to google via speechdetect.sh. then takes the text which googled translated say to speak and then my program matches it and executes the command accordingly such as radio on.

How can I make this faster better or more efficient I really want a fast page loading time Im also using lighttpd.

P.S without this section of code my page loads in 352ms.

Also the shell code is

```
#!/bin/bash
sudo rm voice.flac 
# FLAC encoded example
ffmpeg -i $1 voice.flac
curl \
  --data-binary @voice.flac \
  --header 'Content-type: audio/x-flac; rate=8000' \
  'https://www.google.com/speech-api/v1/recognize?xjerr=1&client=chromium&pfilter=0&lang=en-GB&maxresults=1' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T12:16:38.903

我猜是“speechdetect.sh”脚本需要很多时间。因此，如果可能，您应该尝试优化 shell 脚本。无论如何它会很慢，因为您必须远程连接到谷歌，上传数据，谷歌需要一些时间来处理数据，然后需要一些时间将其发送回给您。

这些因素是：带宽、延迟、谷歌处理数据的性能。

你能做的最好的事情就是让等待更愉快。在 iframe 中执行脚本，或者尽可能通过 AJAX 加载它并显示某种加载指示器，以便用户知道正在发生的事情。

编辑：

好吧，也许 ffmpeg 是罪魁祸首，因为 ffmpeg 可能非常慢 - 它在启动时会加载大量代码。

试试这个对你的脚本进行基准测试：

**测量脚本实际消耗的时间。**

像这样从 shell 启动它：

`time ./speechdetect.sh uploads/voice.3gp > speech.results`

这应该输出类似：

```
real    0m1.005s
user    0m0.000s
sys     0m0.008s 
```

实际部分是实际执行时间（本例中为 1.005 秒）。有关更多信息，请查看[手册页](http://www.kernel.org/doc/man-pages/online/pages/man1/time.1.html)

**在你的 php 脚本中做一个简单的基准测试**

```
$target_path = "uploads/";

$time_start = microtime(true);
exec("./speechdetect.sh uploads/voice.3gp > speech.results");
$time_end = microtime(true);

$time = $time_end - $time_start;
echo "Time elapsed: " . $time . " seconds";
// .... 
```

**获取更详细的信息上传到google还是ffmpeg是否消耗时间：**

修改你的 shell 脚本（添加时间）：

```
#!/bin/bash
sudo rm voice.flac 
# FLAC encoded example
time ffmpeg -i $1 voice.flac
time curl \
  --data-binary @voice.flac \
  --header 'Content-type: audio/x-flac; rate=8000' \
  'https://www.google.com/speech-api/v1/recognize?xjerr=1&client=chromium&pfilter=0&lang=en-GB&maxresults=1' 
```

运行它：（`./speechdetect.sh uploads/voice.3gp`不重定向输出）

显示的第一个基准测试是 ffmpeg 的基准测试，第二个来自对 curl 的调用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T12:15:18.030

您最好的选择是找到一些工具在本地进行语音检测。您可能无法加快与 google 的连接或更改 google 引擎的运行速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T12:14:05.477

这取决于文件的大小以及上传连接的速度。恐怕不会再快了。

# php - Can't connect to MySQL - missing stuff after power failure?

> ID：14787970
> 
> 赞同：2
> 
> 时间：2013-02-09T12:06:30.433
> 
> 标签：php, mysql, connection, database-connection, repair

I'm trying to connect to an application. There was a power failure that corrupted the hard drive, and after taking a backup from it externally, I've managed to get the application back up. Looking at the files it seems fine, the database is there too. But mysql won't connect.

I get

```
 Warning: mysql_connect() [function.mysql-connect]: Access denied for user 'myuser'@'localhost' (using password: YES) in C:\wamp\www\testmysql.php on line 2 
```

where line 2 is simply:

```
$link = mysql_connect('localhost','myuser','mypassword'); 
```

I can still access PHPMYADMIN fine, and run queries, and browse tables. But I got this when trying to browse the table `action_log`:

![enter image description here](../Images/81d92ab9ad21f8c146a8b8fb2d9ce0ca.png)

The error says:

```
SQL query:
SHOW FULL FIELDS FROM `action_log`:

MySQL said:
#29 - File '.\mypath\action_log.MYD' not found (Errcode: 2) 
```

It's a Windows machine. Where do I find that file? And do I need to do this? [Howto: MySQL InnoDB corruption auto-repair after power failure?](https://stackoverflow.com/questions/8245686/howto-mysql-innodb-corruption-auto-repair-after-power-failure)

## Edit

I should add that when I run this, it works:

```
$link = mysql_connect('localhost','admin',''); 
```

Where/how can I restore the other users? Whether by files or via DB?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:14:03.810

也许 xampp 返回默认值，并且您的 phpmyadmin 的用户名和密码是 root ......尝试连接这个：`$link = mysql_connect('localhost','root','');`用户名是 root 并且没有密码

# c++ - Identify type in a generic portable way in C++

> ID：14787971
> 
> 赞同：3
> 
> 时间：2013-02-09T12:06:30.687
> 
> 标签：c++, serialization, c++11

Is there any way to identify a type in a generic and portable way for serialization? I know `std::type_index` and `std::type_info` are platform dependent and can't be used for serialization.

One way would be to make a map between `std::type_index` and one "type information" and to serialize the "type information", but this will slow down the serialization.

Is there any standard way of doing this?

PS: I want to learn how to do efficient serialization, I don't want to use a library.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T16:12:51.200

如果您想将对象从一个进程传递到另一个进程，而这些进程恰好存在于不同的时间和不同的机器上，那么您所看到的比**序列化更****令人信服**。

 **那里有高效的消息传递库：Google 的[Protobuf](http://code.google.com/p/protobuf/)或 Apache 的[Thrift](http://thrift.apache.org/)就是很好的例子。

关键思想是将消息的定义外部化，使其与平台（和编译器）无关，然后从该定义生成代码绑定。然后从您的代码中，您将在内存中创建消息，序列化该消息（xml/json/binary），然后在另一个平台上将消息反序列化为另一个内存表示。

如果它感觉像是一个补充步骤，那就是它。另一方面，这意味着消息格式不再与内部实现（间接层......）绑定，因此您可以随意更改内部实现，同时仍然能够读/写消息在各种版本中（例如，用于与程序的旧部署版本进行交互）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T14:33:05.853

> 有没有办法以通用和可移植的方式识别类型以进行序列化？

它可以以通用但不可移植的方式进行。

从返回的字符串`std::type_info::name()`通常是唯一标识类型的错位类型名称。此名称可用于标识序列化对象的类型。

名称修饰因编译器而异，因此使用另一个编译器编译的程序可能无法读取序列化对象。**

# qt - QSettings and sections containing spaces

> ID：14787972
> 
> 赞同：3
> 
> 时间：2013-02-09T12:06:34.887
> 
> 标签：qt, menu, char, settings, space

I use QSettings to edit the .desktop menu entries. I do it like that: dfile is a QString - absolute file path

```
QSettings set(dfile, QSettings::IniFormat);
qDebug() << "Editing " << set.fileName();
set.beginGroup("Desktop Entry");
// set whatever I need
set.endGroup(); 
```

But when the .desktop file is saved, I get

```
[Desktop%20Entry]
Encoding=UTF-8
Version=1.0
# and etc. 
```

instead of

```
[Desktop Entry]
Encoding=UTF-8
Version=1.0
# and etc. 
```

What am I doing wrong? Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:36:01.137

你没有做错任何事。该空间只是使用[HTML URL encoding](http://www.w3schools.com/tags/ref_urlencode.asp)编码为 %20 。你可以读回设置，对吧？

# jquery - Check for a CSS class has a property - jQuery

> ID：14787973
> 
> 赞同：3
> 
> 时间：2013-02-09T12:06:37.690
> 
> 标签：jquery, html

I have these elements;

```
<div class="preview">
    <div class="title" style="display:block">
</div>

<div class="preview">
    <div class="title" style="display:none">
</div>

<div class="preview">
    <div class="title" style="display:none">
</div> 
```

I want to add a class to the preview, if the title is 'display:none'.

Please help me short this.

Thanks & Regards.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T12:09:08.887

```
$('.preview').has('.title:hidden').addClass('yournewclass'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-09T12:08:58.947

Try this:

```
$('.title').is(':not(:visible)').closest('.preview').addClass('foo'); 
```

Note the `:not(:visible)` will catch any `.title` elements who are hidden due to the `visibility` or `display` properties. If you only want to catch `display: none` try this:

```
$('.title').each(function() {
    if ($(this).css('display') == 'none') {
        $(this).closest('.preview').addClass('foo');
    }
}); 
```

# java - android app: Gmail cause app to crash after login

> ID：14787977
> 
> 赞同：2
> 
> 时间：2013-02-09T12:06:57.253
> 
> 标签：java, android

I'm building an app to log into Facebook, Twitter, Hotmail and Gmail accounts and have a combined inbox to view the feeds/messages. Everything was working fine until the 24 of Jan 2013, but after than the app crashes when login into the Gmail account. If login details are wrong app does not crash, if login details are right the app show the Toast "login successful" and than when moving into my combined inbox it crashes. 3 days ago' I run it again with no problems (didn't have any changes made to the code) than I was unable to login into Gmail again. my code for the Gmail login is the following:

// Execute Gmail Login

```
public class GmailLogin extends AsyncTask<String, Integer, Boolean> {
    String username;
    String password;

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        Toast.makeText(getApplicationContext(), R.string.Executing_Gmail_login,
                //Toast.makeText(getApplicationContext(), "Executing Gmail login..",
                Toast.LENGTH_LONG).show();
        super.onPreExecute();
    }

    @Override
    protected Boolean doInBackground(final String... params) {
        username = params[0];
        password = params[1];
        return Gmail.doGmailLogin(params[0], params[1]);
    }

    @Override
    protected void onPostExecute(Boolean result) {
        // TODO Auto-generated method stub
        if (result) {
            SharedPreferences gmailPreference = getSharedPreferences(
                    Const.GMAIL_PREF_NAME, 0);
            Utility.saveGmailPrefrences(gmailPreference, username, password);
            Toast.makeText(getApplicationContext(), R.string.Gmail_Login_success,
                    //Toast.makeText(getApplicationContext(), "Gmail Login succesful",
                    Toast.LENGTH_LONG).show();
            gotoInbox();
        } else {

            Toast.makeText(getApplicationContext(),
                    R.string.Invalid_login_try_again, Toast.LENGTH_LONG)
                    //"Invalid login. Please try again", Toast.LENGTH_LONG)
                    .show();

        }
        super.onPostExecute(result);
    }

}//end of GmailLogin class 
```

and here is the logcat relative to this problem:

```
02-09 11:17:28.187: I/Choreographer(759): Skipped 39 frames!  The application may be doing too much work on its main thread.
02-09 11:17:28.436: E/AndroidRuntime(759): FATAL EXCEPTION: AsyncTask #1
02-09 11:17:28.436: E/AndroidRuntime(759): java.lang.RuntimeException: An error occured while executing doInBackground()
02-09 11:17:28.436: E/AndroidRuntime(759):  at android.os.AsyncTask$3.done(AsyncTask.java:299)
02-09 11:17:28.436: E/AndroidRuntime(759):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
02-09 11:17:28.436: E/AndroidRuntime(759):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
02-09 11:17:28.436: E/AndroidRuntime(759):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
02-09 11:17:28.436: E/AndroidRuntime(759):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
02-09 11:17:28.436: E/AndroidRuntime(759):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
02-09 11:17:28.436: E/AndroidRuntime(759):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
02-09 11:17:28.436: E/AndroidRuntime(759):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
02-09 11:17:28.436: E/AndroidRuntime(759):  at java.lang.Thread.run(Thread.java:856)
02-09 11:17:28.436: E/AndroidRuntime(759): Caused by: java.lang.IndexOutOfBoundsException
02-09 11:17:28.436: E/AndroidRuntime(759):  at com.sun.mail.imap.IMAPFolder.checkRange(IMAPFolder.java:429)
02-09 11:17:28.436: E/AndroidRuntime(759):  at com.sun.mail.imap.IMAPFolder.getMessage(IMAPFolder.java:1365)
02-09 11:17:28.436: E/AndroidRuntime(759):  at javax.mail.Folder.getMessages(Folder.java:879)
02-09 11:17:28.436: E/AndroidRuntime(759):  at com.fyp.Gmail.getMails(Gmail.java:161)
02-09 11:17:28.436: E/AndroidRuntime(759):  at com.fyp.InboxActivity$RecieveGmail.doInBackground(InboxActivity.java:510)
02-09 11:17:28.436: E/AndroidRuntime(759):  at com.fyp.InboxActivity$RecieveGmail.doInBackground(InboxActivity.java:1)
02-09 11:17:28.436: E/AndroidRuntime(759):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
02-09 11:17:28.436: E/AndroidRuntime(759):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
02-09 11:17:28.436: E/AndroidRuntime(759):  ... 5 more
02-09 11:17:28.956: I/Choreographer(759): Skipped 56 frames!  The application may be doing too much work on its main thread.
02-09 11:17:29.446: I/Choreographer(759): Skipped 125 frames!  The application may be doing too much work on its main thread.
02-09 11:17:29.606: I/Choreographer(759): Skipped 34 frames!  The application may be doing too much work on its main thread. 
```

I don't understand why it worked for nearly 2 months and than stopped working without importing any changes to the code

If anybody has any idea about this problem I'll really appreciate it

the Gmail.getMails method is the following:

```
 //Get mails from gmail.
public static Message[] getMails(final String username, final String password) {
    Properties props = System.getProperties();
    // props.setProperty("mail.store.protocol", "imaps");
    // props.put("mail.smtp.starttls.enable", "true");

    props.put("mail.imap.host", "imap.gmail.com");
    props.put("mail.imap.user", username);
    // User SSL
    props.put("mail.imap.socketFactory", 993);
    props.put("mail.imap.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
    props.put("mail.imap.port", 993);
    Authenticator auth = new Authenticator() {
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(username, password);
        }

    };

    Session sessioned = Session.getDefaultInstance(props, auth);

    Store store;
    try {
        store = sessioned.getStore("imaps");
        store.connect("smtp.gmail.com", username, password);

        Folder inbox = store.getFolder("inbox");
        inbox.open(Folder.READ_WRITE);
        // FlagTerm ft = new FlagTerm(new Flags(Flags.Flag.SEEN), false);
        // Message[] unReadMessages = inbox.search(ft);
        int total=inbox.getMessageCount();
        Message[] unReadMessages = reverseMsgs(inbox.getMessages(total-15,total)); 
        //= inbox.getMessages(total,total-15);
        return unReadMessages;
    } catch (NoSuchProviderException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return null;
    } catch (MessagingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return null;
    }

} 
```

# haskell - 在 Emacs 中启动时将选项传递给 ghci

> ID：14787987
> 
> 赞同：4
> 
> 时间：2013-02-09T12:08:08.550
> 
> 标签：haskell, emacs, haskell-platform

因此，如果我想在 ghci 中运行线程应用程序，我只需`-threaded`在启动时传递给 ghci。但是从 Emacs 内部启动它时我该怎么做呢？我可以为此自定义 Emacs haskell 模式吗？

我想是这样，但我找不到任何关于此的说明？我找不到任何有关 emacs lisp 的参考文档。只有 Haskell wiki 但那里没有*参考*。尽管我正在学习，但我对（Emacs）lisp 不是很熟悉。

我想如果我能找到安装 haskell-platform 的默认 emacs 包的位置，我可以通读源代码来尝试弄清楚。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T12:17:46.830

`haskell-program-name`注意“命令可以包含参数”的描述。

我刚刚通过设置`haskell-program-name`为`ghci -threaded`.

# java - final 字段真的可以防止 Java 中的可变性吗？

> ID：14787990
> 
> 赞同：9
> 
> 时间：2013-02-09T12:08:24.743
> 
> 标签：java, immutability

摘自名著《[Java Concurrency in Practice](https://rads.stackoverflow.com/amzn/click/com/0321349601)》第3.4.1章**Final fields**

> 正如将所有字段设为私有，除非它们需要更高的可见性[EJ Item 12] 是一个很好的做法，将所有字段设为最终字段是一个很好的做法，除非它们需要是可变的。

*我对 Java 中最终引用的理解*：最终引用/字段只是防止该字段重新初始化，但如果它引用了一个可变对象，我们仍然可以更改它的状态，使其变为可变。所以我很难理解上面的报价。你怎么看 ？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-09T12:14:51.530

final 字段会阻止您更改字段本身（通过使其“指向”其他实例），但如果该字段是对可变对象的引用，则没有什么可以阻止您这样做：

```
public void someFunction (final Person p) {
    p = new Person("mickey","mouse"); //cant do this - its final
    p.setFirstName("donald");
    p.setLastName("duck");
} 
```

上面的引用 p 是不可变的，但引用指向的实际 Person 是可变的。当然，您可以将 Person 类设为不可变类，如下所示：

```
public class Person {
    private final String firstName;
    private final String lastName;
    public Person(String firstName, String lastName) {
        this.firstName = firstName;
        this.lastName = lastName;
    }
    //getters and other methods here
} 
```

这样的类一旦创建，就不能以任何方式修改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T12:15:36.463

这句话只说了什么：

> 使所有字段成为最终字段，除非它们需要是可变的

*可变字段*是您以后可以更改为指向另一个对象的字段。如果字段是`final`，它仍然可以引用可变对象（例如`java.util.Date`）。因此该字段是不可变的（总是指向同一个对象），但这个对象是可变的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-09T12:23:11.180

在 java final 中与此类似：

`int *const p=&something //constant pointer.in c++. you can't use this pointer to change something but that something can be changed with its own.`

在 java 中，最终字段无法更改，但它们所指的对象可能会自行更改。前任。`'this'`是最终的，你不能分配任何东西，`this`但你可以分配给这个引用的对象。

从你的问题：

`it is a good practice to make all fields final unless they need to be mutable.`

为了避免对原始文件进行任何修改（逻辑上或意外），将它们定稿总是好的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T12:19:22.180

根据 Java 代码约定，最终变量被视为常量并以所有大写字母编写，例如

```
private final int COUNT=10; // immutable -> cannot be changed 
```

将集合引用变量设为 final 意味着只有引用不能更改，但您可以在集合内添加、删除或更改对象。例如：

```
private final List Loans = new ArrayList();
list.add(“home loan”);  //valid
list.add("personal loan"); //valid
loans = new Vector();  //not valid 
```

阅读更多：http: [//javarevisited.blogspot.com/2011/12/final-variable-method-class-java.html#ixzz2KP5juxm0](http://javarevisited.blogspot.com/2011/12/final-variable-method-class-java.html#ixzz2KP5juxm0)

回答您的问题：是的，如果您正确使用它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-09T12:49:10.900

无视报价。时不时地用`final`'s 涂抹代码几乎没有任何好处。作者的目标是一种良好的实践，但在大型代码库中，看到所有内容都是最终的，这会掩盖意图，使阅读代码变得更加困难和模糊 - 并且可能几乎没有任何好处。

## 两种方法

一般来说，有两所学校。选择你的：

1.  反对，除非真的需要

一个是不使用`final`，除非您真的希望那些阅读您编写的代码的人知道这个字段在某些方面是特殊的并且不容小觑。

1.  因为，使用 final 的地方从来都不是不好的地方！

另一个迷恋`final`并想要它无处不在。它不太流行。[Renauld Waldura](http://renaud.waldura.com/doc/java/final-keyword.shtml)是这个想法的优秀传播者。阅读他的链接条目，标题为**“Final word on final keyword”**，这是一本很好且深入的读物。

## 可能取决于您使用的 Java

就我而言，我只是想让您知道这已`final`更改，并且并不总是意味着不可变，正如您可以在[Heinz Kabutz 的 Java 专家时事通讯](http://www.javaspecialists.eu/archive/Issue096.html)中看到的那样。他将带您了解它在不同 Java 中的工作方式，随时获取他的代码并检查您使用的 Java。