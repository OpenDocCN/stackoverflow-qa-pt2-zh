# StackOverflow 问答 12655000-12655999

# php - php scandir循环顺序更正

> ID：12655002
> 
> 赞同：0
> 
> 时间：2012-09-29T17:46:51.133
> 
> 标签：php, directory, scandir

请帮助这个php代码：

```
<?php

function listFolderFiles($dir){
  static $level = 0;
  $level++;
  $ffs = scandir($dir);
  foreach($ffs as $ff){
        echo "<div id=\"datalist\">";

    if($ff != '.' && $ff != '..'){
      if(is_dir($dir.'/'.$ff)) {
        $h_start = ($level < 6) ? "<h".($level+1). "class=\"multiple\">" : "<h6><div id=\"list_wrapper\">"; 
        $h_close = ($level < 6) ? "</h".($level+1)."> " : "</h6>"; 
        echo $h_start.$ff.$h_close; 
  echo '<ul class="multiple_columns">';

        listFolderFiles($dir.'/'.$ff);
      } else {
        echo "<li><a href=\"$dir/$ff\">$ff</a></li>";
      }
    }
      echo '</ul></div>';
  }
  echo '</div>';
  $level--;
}

listFolderFiles('../Secure');

?> 
```

我需要以这种方式组织输出目录：

```
 <div id="datalist">
      <h2 class="multiple">
      <h3> where applicable
         <div id="list_wrapper">
         <ul class="multiple_columns">
            <li><a href="#">link</a></li>
         </ul>
         </div>
   </div> 
```

我对 php 不是很熟悉......正如你所知道的 :)
尝试了不同的变体，但输出总是乱码。
寻求一些帮助以将其按正确的顺序排列。
感谢您的投入。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:15:19.843

改变

```
$h_start = ($level < 6) ? "<h".($level+1). "class=\"multiple\">" : "<h6><div id=\"list_wrapper\">"; 
```

有了这个

```
$h_start = ($level < 6) ? "<h".($level+1). " class=\"multiple\">" : "<h6><div id=\"list_wrapper\">"; 
```

您的代码生成 h1class ,h2class ,... 不正确的标签！

# python - Python：创建元组列表的优雅方式？

> ID：12655007
> 
> 赞同：4
> 
> 时间：2012-09-29T17:47:49.973
> 
> 标签：python

```
>>> a=["a"]*4
>>> a
['a', 'a', 'a', 'a']
>>> b=range(4)
>>> b
[0, 1, 2, 3]
>>> c = [range(4,8), range(9,13), range(14,18), range(19,23)]
>>> c
[[4, 5, 6, 7], [9, 10, 11, 12], [14, 15, 16, 17], [19, 20, 21, 22]]
>>>
>>> result = map(lambda x,y:[x,y],a,b)
>>> map(lambda x,y:x.extend(y),result,c)
>>> result = map(tuple, result)
>>> result     # desired output: 
[('a', 0, 4, 5, 6, 7), ('a', 1, 9, 10, 11, 12), ('a', 2, 14, 15, 16, 17), ('a', 3, 19, 20, 21, 22)]
>>>
>>> try_test = zip(a,b,c)
>>> try_test # NOT DESIRED: leaves me with the list within the tuples
[('a', 0, [4, 5, 6, 7]), ('a', 1, [9, 10, 11, 12]), ('a', 2, [14, 15, 16, 17]), ('a', 3, [19, 20, 21, 22])] 
```

我想知道是否有人有更简洁的方式来做“结果”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T17:51:19.153

你可以尝试这样的事情：

```
result = [tuple([ai, bi] + ci) for ai, bi, ci in zip(a, b, c)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T18:29:28.250

对于此问题的完全通用方法，您可以考虑使用`flatten`您可以在[此处](https://stackoverflow.com/q/2158395/577088)找到的众多变体之一，其中`flatten`是一个函数，它采用任意嵌套的可迭代迭代并返回其中包含的项目的平面列表。

然后只需映射`flatten`压缩值`a, b, c`并转换为元组。

```
>>> from collections import Iterable
>>> def flatten(l):
...     for i in l:
...         if isinstance(i, Iterable) and not isinstance(i, basestring):
...             for sub in flatten(i):
...                 yield sub
...         else:
...             yield i
...
>>> map(tuple, map(flatten, zip(a, b, c)))
[('a', 0, 4, 5, 6, 7), ('a', 1, 9, 10, 11, 12), 
 ('a', 2, 14, 15, 16, 17), ('a', 3, 19, 20, 21, 22)] 
```

或者更简洁，修改`flatten`为接受任意参数列表并返回一个元组。那么你需要的是`map`：

```
>>> def flat_tuple(*args):
...     return tuple(flatten(args))
... 
>>> map(flat_tuple, a, b, c)
[('a', 0, 4, 5, 6, 7), ('a', 1, 9, 10, 11, 12), 
 ('a', 2, 14, 15, 16, 17), ('a', 3, 19, 20, 21, 22)] 
```

如果这是一次性问题，那么上述方法可能比它的价值更麻烦。但是如果您已经`flatten`为其他目的进行了定义，或者如果您经常这样做，以上可以为您省去很多麻烦！

否则，只是为了好玩，这里有一个我喜欢的[nneonneo答案的变体：](https://stackoverflow.com/a/12655042/577088)

```
>>> [x + tuple(y) for x, y in zip(zip(a, b), c)]
[('a', 0, 4, 5, 6, 7), ('a', 1, 9, 10, 11, 12), 
 ('a', 2, 14, 15, 16, 17), ('a', 3, 19, 20, 21, 22)] 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-29T18:00:25.497

对于这种情况：（如果简洁 == 简短）

```
q = lambda x : tuple(range(x,x+4))
res = [ ('a', num) + q(4*(num+1)+num) for num in xrange(4) ] 
```

# javascript - Windows 8 Metro Settings Flyouts 似乎不适用于 Javascript？

> ID：12655011
> 
> 赞同：3
> 
> 时间：2012-09-29T17:48:02.567
> 
> 标签：javascript, windows-8, microsoft-metro, settings, flyout

我最近一直在尝试为 Windows 8 创建 Metro 应用程序并尝试使用设置弹出窗口。

所以我跟着msdn快速入门：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh780611.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh780611.aspx)

但是，我无法让它工作。

这是我添加设置弹出​​窗口的部分：

```
function setupSettings() {
    app.onsettings = function (e) {
        e.detail.applicationcommands = { 'serv_changer': { title: 'Change Server', href: 'settings.html' } };
        WinJS.UI.SettingsFlyout.populateSettings(e);
    }
} 
```

当我按下一个按钮时，函数 setupSettings 只被调用一次（所以我可以确保它只被执行一次）

这是我的问题：按下按钮后，**会**出现“更改服务器”链接。但是，当我单击它时，什么也没有发生，侧窗只是淡出。

这是我尝试过的事情，所以我知道它不是其中之一：

*   不是文件丢失。我试图放置一个不存在的不同文件，并引发异常并且程序崩溃。在这里，它不会崩溃。
*   HTML 已正确编码，因为我尝试将 settings.html 替换为 Microsoft 的示例设置文件之一。

我很难弄清楚为什么它不起作用。

有人可以帮忙吗（如果需要，我可以提供更多代码）？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:29:35.067

在您的 settings.html 页面中，确保 data-win-control 声明包括设置 commandId 的名称 - 这似乎从在线示例中丢失。

例如。

如果您的 js 文件将命令声明为：

```
e.detail.applicationcommands = { 'serv_changer': { title: 'Change Server', href: 'settings.html' } }; 
```

...然后确保您的 settings.html 文件引用“serv_changer”：

```
<div data-win-control="WinJS.UI.SettingsFlyout" data-win-options="{settingsCommandId:'serv_changer', width:'wide'}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T20:18:02.393

在我的应用程序上，我的 href 中有斜杠。所以像这样的href：'/settings.html'

同样在你的 settings.html 页面上，确保你有这个 data-win-control="WinJS.UI.SettingsFlyout"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T21:04:36.333

替换你的js函数

```
function setupSettings() {
    app.onsettings = function (e) {
        e.detail.applicationcommands = { 'serv_changer': { title: 'Change Server', href: 'settings.html' } };
        WinJS.UI.SettingsFlyout.populateSettings(e);
    }
} 
```

有了这个：

```
function setupSettings(e) {
        e.detail.applicationcommands =
        {
            "serv_changer":
            {
                title: "Change Server",
                href: "/settings.html"
            }
        };
        WinJS.UI.SettingsFlyout.populateSettings(e);
    } 
```

并确保`serv_changer`在您的 settings.html 文件中被引用：

```
<div data-win-control="WinJS.UI.SettingsFlyout" data-win-options="{settingsCommandId:'serv_changer'}"> 
```

# css - 如何内联显示这些图像？

> ID：12655021
> 
> 赞同：0
> 
> 时间：2012-09-29T17:48:44.517
> 
> 标签：css, ruby-on-rails, haml

我为此苦苦挣扎了一个多小时。我希望“向上”和“向下”类中的图像内联显示。我在看什么？

我也试过显示：内联，但它也不起作用。如果它有帮助，我也在使用带有 rails 的 twitter bootstrap。

# 页面.css

```
 body {
  background-color: grey;
}

.up img {

  width: 30px;
  height:30px;
  padding: 5px 5px 5px 5px;
  display:inline-block;
}
.down img{
  width: 30px;
  height:30px;
  padding: 5px 5px 5px 5px;
  display:inline-block;
} 
```

# index.html.haml

```
 - title "Demociaki"
- for demot in @demots
  .demot
    = image_tag demot.photo.url
    %br
    .voting
      .up= link_to image_tag("up.jpeg"), vote_up_demot_path(demot), :method => :post
      .down= link_to image_tag('down.jpeg'), vote_down_demot_path(demot), :method => :post
      %h3= demot.votes_for 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T17:49:55.630

它应该是`img.up`而`img.down`不是`up img`和`down img`。

`.up img`正在选择具有 class 的元素下的所有 img 元素`.up`。 选择标签为`img.up`的类的所有元素。`.up``img`

# android - 清除自定义 ListAdapter

> ID：12655023
> 
> 赞同：0
> 
> 时间：2012-09-29T17:49:01.627
> 
> 标签：android

我的适配器有问题。一切正常，但我在清除列表时遇到问题。

我这样清除它：

```
public void onResetClicked(View v) {
    Log.d(TAG, "reset button clicked");
    m_stopwatchService.reset();

        alist.clear();
    } 
```

它不起作用。

**编辑**

它有效，但我无法重新创建列表。

```
public void onResetClicked(View v) {
    Log.d(TAG, "reset button clicked");
    m_stopwatchService.reset();

        alist.clear();
        listView.setAdapter(null);
    } 
```

这是一个秒表。我的适配器创建圈。当我按下“重置按钮”时想要清理我的圈数列表。

**编辑2**

我解决了我的问题。

我这样称呼它：

```
listView.setAdapter(null);
        listView.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:06:02.130

清除适配器后，您必须使视图无效。

alist.clear();

listView.invalidateViews();

# ruby - 我可以用 Ruby 清理这个过度嵌套的 JSON 吗？

> ID：12655027
> 
> 赞同：-1
> 
> 时间：2012-09-29T17:49:26.853
> 
> 标签：ruby, arrays, hashtable

我有以下变量（从 JSON 对象解析）

```
testdata = {
 "file_data"=>[
  {"id"=>"idvalue","desc"=>[
   {"key"=>"value"}
  ]}
 ]
} 
```

只有一个文件数据，但不是以散列开头，而是将其散列封装在一个数组中。但这种疯狂并没有就此结束：desc 键应该包含一个散列，而是包含一个单对象数组，其中包含一个散列。

因此，要获取任何数据，我必须编写类似

```
puts testdata["file_data"][0]["desc"][0]["key"] 
```

我能做些什么来处理这种多余的嵌套？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:14:05.003

你可以这样做：

```
def clean h
  Hash[h.map{|k,v|
    [k,
     case v 
       when Hash then clean(v)  
       when Array then clean(v.first)  
       else v 
     end
    ]
  }]    
end  

clean testdata
#=> {"file_data"=>{"id"=>"idvalue", "desc"=>{"key"=>"value"}}} 
```

# scala - AnyVal 的目的是什么？

> ID：12655028
> 
> 赞同：6
> 
> 时间：2012-09-29T17:49:28.007
> 
> 标签：scala

我想不出该类型`AnyVal`有用的任何情况，尤其是添加`Numeric`用于抽象的类型`Int`，`Long`等等。是否有任何实际用例`AnyVal`，或者它只是使类型层次结构有点的工件更漂亮？

* * *

澄清一下，我知道是什么`AnyVal` *，*我只是想不出在 Scala 中我真正需要它的任何时候。我什么时候需要一个包含`Int`,`Character`和的类型`Double`？似乎它只是为了使类型层次结构更漂亮（即拥有`AnyVal`和`AnyRef`作为兄弟姐妹而不是直接继承自 , 等`Int`看起来更好）。`Character``Any`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-29T18:03:44.297

正如 om-nom-nom 已经说过的，`AnyVal`是 scala 中所有原语的通用超类型。然而，在 scala 2.10 中，将有一个名为`value classes`. 值类是可以内联的类，例如可以减少扩展库模式的开销，因为不会有包含这些方法的包装类的实例，而是静态调用它们。[您可以在SIP-15](https://docs.google.com/document/d/10TQKgMiJTbVtkdRG53wsLYwWM2MkhtmdV25-NZvLLMA/edit?hl=en_US)中阅读有关值类的所有内容。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-29T23:57:20.330

让我们看录像带，呃，规范 12.2：

> 值类是其实例不被底层主机系统表示为对象的类。所有值类都继承自类 AnyVal。

所以，也许问题是，如果一切都是对象，我为什么要关心某些东西是否没有表示，即实现为对象？这就是实现细节的实现。

但我们不要假装，你当然在乎。你从来不专攻吗？

规范继续：

> Scala 实现需要提供值类 Unit、Boolean、Double、Float、Long、Int、Char、Short 和 Byte（但也可以免费提供其他值）。

因此，对 AnyVal 的测试是有意义的，超出了所需值类的枚举。

也就是说，您必须接受@drexin 的回答，因为如果您没有将值类用于扩展方法，那么您就不是真正的生活。（从某种意义上说，活下去。）

来自 SIP 的动机：

> ... Scala 中的类可以完全内联，因此与外部方法相比，对这些类的操作开销为零。内联类的一些用例是：
> 
> 1.  内联隐式包装器。这些包装器上的方法将被转换为扩展方法。
> 2.  新的数值类，例如无符号整数。这样的类将不再需要装箱开销。所以这类似于 .NET 中的值类。
> 3.  表示度量单位的类。同样，这些类不会产生装箱开销。

您可以将扩展方法本身标记为@inline，并且所有内容都是内联的：没有对象包装器并且您的小方法是内联的。

我每天都使用这个功能。昨天我遇到了一个错误。该错误已经修复。也就是说，这是一个非常酷的功能，Scala 的人会从 Coursera 抽出时间来消除其中的一个小错误。

这提醒了我，我忘了问，这不是 Coursera 测验问题，是吗？

# ruby - 如何在 Google、Yahoo 和 Bing 中列出业务

> ID：12655031
> 
> 赞同：2
> 
> 时间：2012-09-29T17:49:56.050
> 
> 标签：ruby, google-places-api, bing-api, yahoo-api

我目前正在开发一个应用程序，当用户输入他的公司名称和邮政编码时，该应用程序需要查找该公司是否在 Google、Bing 和 Yahoo（类似于[http://getlisted.org ）中列出并声明。](http://getlisted.org)我正在使用谷歌地方 API 来检查谷歌中列出的内容，以及雅虎中列出的雅虎本地 API。但无法确定如何使用 Bing 门户 API 来做同样的事情。此外，这三者都声称如何获得有关业务的任何结论。任何帮助都会很棒。在此先感谢。

# wpf - 在 WPF 中旋转 3D 立方体

> ID：12655033
> 
> 赞同：3
> 
> 时间：2012-09-29T17:50:03.297
> 
> 标签：wpf, xaml, 3d

我使用这样的 XAML 代码在 WPF 中制作了一个 3D 立方体：

```
<Viewport3D Name="viewport3D1">
            <Viewport3D.Camera>
                <PerspectiveCamera x:Name="camMain" Position="6 5 4" LookDirection="-6 -5 -4">
                </PerspectiveCamera>
            </Viewport3D.Camera>
            <ModelVisual3D>
                <ModelVisual3D.Content>
                    <DirectionalLight x:Name="dirLightMain" Direction="-1,-1,-1">
                    </DirectionalLight>
                </ModelVisual3D.Content>
            </ModelVisual3D>
            <ModelVisual3D>
                <ModelVisual3D.Content>
                    <GeometryModel3D>
                        <GeometryModel3D.Geometry>
                            <MeshGeometry3D x:Name="meshMain"
                                Positions="0 0 0  1 0 0  0 1 0  1 1 0  0 0 1  1 0 1  0 1 1  1 1 1"
                                TriangleIndices="2 3 1  2 1 0  7 1 3  7 5 1  6 5 7  6 4 5  6 2 0  2 0 4  2 7 3  2 6 7  0 1 5  0 5 4">
                            </MeshGeometry3D>
                        </GeometryModel3D.Geometry>
                        <GeometryModel3D.Material>
                            <DiffuseMaterial x:Name="matDiffuseMain">
                                <DiffuseMaterial.Brush>
                                    <SolidColorBrush Color="Red"/>
                                </DiffuseMaterial.Brush>
                            </DiffuseMaterial>
                        </GeometryModel3D.Material>
                    </GeometryModel3D>
                </ModelVisual3D.Content>
            </ModelVisual3D>
        </Viewport3D> 
```

然后是我的窗口的构造函数，我想围绕轴 OX、OY、OZ 应用旋转，我认为应该这样做：

```
RotateTransform3D myRotateTransform = new RotateTransform3D(new AxisAngleRotation3D(new Vector3D(0, 2, 0), 1));
        meshMain.Transform=myRotateTransform;
        // etc... 
```

似乎我没有将转换应用于 XAML 的正确节点，在我的情况下实现转换的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-29T19:10:52.517

你需要给你的[ModelVisual3D](http://msdn.microsoft.com/en-us/library/system.windows.media.media3d.meshgeometry3d.aspx)一个名字，[MeshGeometry3D](http://msdn.microsoft.com/en-us/library/system.windows.media.media3d.meshgeometry3d.aspx)没有像 Model 那样的[Transform](http://msdn.microsoft.com/en-us/library/system.windows.media.media3d.meshgeometry3d.aspx)属性。您还需要访问您的`AxisAngleRotation3D`对象才能设置`Angle`属性。

```
<ModelVisual3D x:Name="MyModel">
.... 
```

**编辑**为 CodeBehind 方法添加了更多代码

```
public partial class MainWindow : Window
{
    AxisAngleRotation3D ax3d;
    public MainWindow()
    {
        InitializeComponent();

        ax3d = new AxisAngleRotation3D(new Vector3D(0, 2, 0), 1);
        RotateTransform3D myRotateTransform = new RotateTransform3D(ax3d);
        MyModel.Transform = myRotateTransform;
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        ax3d.Angle += 1 ;
    }
} 
```

尽管在这种情况下，我认为您最好在 Xaml 中实现您的转换。

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Viewport3D Name="viewport3D1">
            <Viewport3D.Camera>
                <PerspectiveCamera x:Name="camMain" Position="6 5 4" LookDirection="-6 -5 -4">
                </PerspectiveCamera>
            </Viewport3D.Camera>
            <ModelVisual3D>
                <ModelVisual3D.Content>
                    <DirectionalLight x:Name="dirLightMain" Direction="-1,-1,-1">
                    </DirectionalLight>
                </ModelVisual3D.Content>
            </ModelVisual3D>
            <ModelVisual3D x:Name="MyModel">
                <ModelVisual3D.Content>
                    <GeometryModel3D>
                        <GeometryModel3D.Geometry>
                            <MeshGeometry3D x:Name="meshMain" 
                                Positions="0 0 0  1 0 0  0 1 0  1 1 0  0 0 1  1 0 1  0 1 1  1 1 1" 
                                TriangleIndices="2 3 1  2 1 0  7 1 3  7 5 1  6 5 7  6 4 5  6 2 0  2 0 4  2 7 3  2 6 7  0 1 5  0 5 4">
                            </MeshGeometry3D>
                        </GeometryModel3D.Geometry>
                        <GeometryModel3D.Material>
                            <DiffuseMaterial x:Name="matDiffuseMain">
                                <DiffuseMaterial.Brush>
                                    <SolidColorBrush Color="Red"/>
                                </DiffuseMaterial.Brush>
                            </DiffuseMaterial>
                        </GeometryModel3D.Material>
                    </GeometryModel3D>
                </ModelVisual3D.Content>
                <ModelVisual3D.Transform>
                    <RotateTransform3D>
                        <RotateTransform3D.Rotation>
                            <AxisAngleRotation3D x:Name="rotate" Axis="0 2 0"/>
                        </RotateTransform3D.Rotation>
                    </RotateTransform3D>
                </ModelVisual3D.Transform>
            </ModelVisual3D>
        </Viewport3D>
        <Slider Height="23" HorizontalAlignment="Left" 
                Margin="12,12,0,0" Name="slider1"
                VerticalAlignment="Top" Width="187" 
                Maximum="360"
                Value="{Binding ElementName=rotate, Path=Angle}" />

    </Grid>
</Window> 
```

同样在此示例中，您可以通过设置其 Angle 属性来更改 CodeBehind 中的 AxisAngleRotation3D：

```
rotate.Angle +=1; 
```

# css - 如何使用 bootstrap 和 LESS 并保持一个干净的项目？

> ID：12655034
> 
> 赞同：6
> 
> 时间：2012-09-29T17:50:28.407
> 
> 标签：css, version-control, twitter-bootstrap, project, less

我正在使用 python 和 twitter-bootstrap 开发一个网络应用程序，我的 CSS 将真正受益于使用 LESS 来生成我的样式和主题。我想从 bootstrap 提供的类继承，这意味着我必须获取 bootstrap 源，并针对 boostrap .less 文件编译我的 LESS 样式表。

**我的问题有两个：**

1）似乎使用 LESS 的最简单方法不是“即时”实际编译样式表，而是每次更改样式时都有一个构建步骤。这是典型的吗？似乎很多人在他们的服务器进程中动态运行 LESS，但这是我可能不需要的额外头痛，而且我不想在客户端运行更少。

2）感谢LESS，我的项目现在不仅依赖于引导程序，还依赖于引导程序*“源”* ——就我的项目管理而言，处理这个问题的最佳方法是什么？我不想只吸收当前版本的引导程序的全部内容到我的 git 存储库中，因为随着引导程序的更新版本的出现，更新它似乎很麻烦（也感觉很恶心！）尽管如此，我需要在我的项目树中至少有缩小的 js/css 才能部署我的应用程序。人们在开发 Web 应用程序时通常如何处理这样的依赖关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:38:38.747

1.  有几双鞋：
    1.  您可以在开发中[使用 less.js](http://lesscss.org/#usage)，因此您不必每次更改 less 代码时都进行编译。您只需使用`*.less`文件而不是`*.css`
    2.  您可以使用任何可以自动重新编译更少代码的 GUI 工具。我更喜欢[LESS.app](http://incident57.com/less/)。
2.  我用`git submodule`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T11:19:45.753

我会将您链接到与上述 Pavlo 相同的帖子。也许没有最好的 CLEAN 做法？我认为也没有任何神奇的“包管理器”。

我去更新 BS 一次，找出 LESS 文件中已更改的所有变量名称有点麻烦。

# vb.net - 如何在 mschart 中设置标签大小？

> ID：12655036
> 
> 赞同：4
> 
> 时间：2012-09-29T17:50:33.940
> 
> 标签：vb.net, mschart

这可能很容易实现，因为我在这里找不到任何帖子。如何在客户端或服务器端的 mschart 中设置标签大小？在我的情况下，设置 LabelAutoFitMinFontSize 不起作用。我正在使用网络表单，这是我的图表，

![在此处输入图像描述](../Images/21f8944b3647d851935d24c2cd8ec485.png)

我需要增加 x 轴和值标签的字体大小。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T18:56:08.763

我在我的示例图表上尝试了此代码，它确实有效。

```
Chart1.Series(0).IsValueShownAsLabel = True
Chart1.Series(0).Font = New Font("Times", 30)  ' will change value label font
Chart1.ChartAreas(0).AxisX.LabelStyle.Font = New Font("Verdana", 28)  ' will change x-axis label font style 
```

# c# - 从列表 c# 的列表中删除行和列

> ID：12655041
> 
> 赞同：1
> 
> 时间：2012-09-29T17:51:13.033
> 
> 标签：c#

我从列表列表中制作了一个矩阵。如何删除列“i”和行“i”？有没有办法呢？我已经尝试过`RemoveAt`，但这会删除一项。

```
List<List<int>> mtx = new List<List<int>>();

  0 1 2 3
  -------
0|0 0 0 0
1|0 0 0 0
2|0 0 0 0
3|0 0 0 0 
```

例如我想删除第 i=2 行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T18:16:28.213

Cuong Le 和 Florian F. 给出的答案是正确的；但是我建议你创建一个 Matrix 类

```
public class Matrix : List<List<int>>
{
    public void RemoveRow(int i)
    {
        RemoveAt(i);
    }

    public void RemoveColumn(int i)
    {
        foreach (List<int> row in this) {
            row.RemoveAt(i);
        }
    }

    public void Remove(int i, int j)
    {
        RemoveRow(i);
        RemoveColumn(j);
    }

    // You can add other things like an indexer with two indexes
    public int this[int i, int j]
    {
        get { return this[i][j]; }
        set { this[i][j] = value; }
    }
} 
```

这使得使用矩阵变得更容易。更好的方法是隐藏实现（即，它在您在内部使用列表的矩阵类之外不可见）。

```
public class Matrix
{
    private List<List<int>> _internalMatrix;

    public Matrix(int m, int n)
    {
        _internalMatrix = new List<List<int>(m);
        for (int i = 0; i < m; i++) {
            _internalMatrix[i] = new List<int>(n);
            for (int j = 0; j < n; j++) {
                _internalMatrix[i].Add(0);
            }
        }
    }

    ...
} 
```

这使您以后更容易完全更改实现，例如，您可以用数组替换列表，而不会损害矩阵的“用户”。

如果你有一个 Matrix 类，你甚至可以重载数学运算符来处理矩阵。请参阅有关[重载运算符](http://www.csharp-station.com/Tutorials/Lesson18.aspx)的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T17:57:14.137

要删除行`i`：

```
mtx.RemoveAt(i); 
```

删除列`j`：

```
foreach (var row in mtx)
{
    row.RemoveAt(j);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T18:00:06.273

你必须做 2 次。

首先删除第一个维度。（我更喜欢谈论维度而不是可能被误解的列/行）

```
mtx.removeAt(i); 
```

然后迭代第一个维度以删除第二个维度上的元素。

```
foreach(List<int> list in mtx){
    list.removeAt(i);
} 
```

# php - 带有openssl的数据损坏mysql

> ID：12655044
> 
> 赞同：1
> 
> 时间：2012-09-29T17:51:29.030
> 
> 标签：php, mysql, encryption, openssl, corruption

我使用 openssl 加密文本，然后将其放入 mysql 数据库。这很好用，但是对于长文本，解密的文本会损坏。

个人认为这是由于mysql将这段文本保存到数据库的方式，密文中有很多非字母数字字符。但我不确定。另外我不知道在 mysql 中使用哪种排序规则，现在我将它设置为 *utf8_unicode_ci*，但仍然存在数据损坏。

一个活生生的例子可以在这里看到：http: [//todolist.x10.mx](http://todolist.x10.mx)

```
Username: example
Password: password 
```

要查看损坏的数据，请单击`Download Backup`。

下面的代码，当然`$encrypted`是存入数据库的。此代码在没有数据库的情况下工作正常。

```
<?php
  $source = 'very long text';
  $iv = "1234567812345678";
  $pass = 'difficultpassphrase';
  $method = 'aes-256-ofb';

  $encrypted = openssl_encrypt ($source, $method, $pass, true, $iv);  
  echo $encrypted;

  $decrypted = openssl_decrypt ($encrypted, $method, $pass, true, $iv);
  echo $decrypted;
?> 
```

提前感谢您的时间和专业知识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:54:16.667

要以二进制形式存储加密内容，您不能使用带有编码的字符类型，因为编码很可能会“破坏”您的数据。

您应该改用[BINARY 或 VARBINARY](http://dev.mysql.com/doc/refman/5.0/en/binary-varbinary.html)数据类型，它们完全是为了存储二进制数据而制作的。

另一种方法是在将数据存储为字符数据类型之前对数据进行[base64_encode](http://php.net/manual/en/function.base64-encode.php) ，并在从数据库中获取数据时对数据进行[base64_decode 。](http://php.net/manual/en/function.base64-decode.php)这将对数据进行编码，以便可以将加密的数据存储在 varchar/char 数据类型中（尽管它会使数据稍长一些，因此请注意这一点）

# ruby-on-rails - Rails - 在我清除缓存之前查看不更新新数据

> ID：12655045
> 
> 赞同：4
> 
> 时间：2012-09-29T17:51:31.417
> 
> 标签：ruby-on-rails, caching, has-and-belongs-to-many

我有一个数据库，其中包含具有 has_and_belongs_to_many 关系的用户和组。添加新组时，它会被创建，但用户对该组的成员资格似乎不会传播，直到我清除缓存或使用隐身窗口登录。我知道它已正确保存，只是在清除缓存之前似乎没有加载。这只是最近才开始发生，我不知道为什么！任何帮助将不胜感激。

从模型：

```
class User < ActiveRecord::Base
    has_many :services
    has_many :recipes
    has_and_belongs_to_many :groups
    attr_accessible :recipes, :groups
end

class Group < ActiveRecord::Base
  has_and_belongs_to_many :users
  has_many :recipes
  attr_accessible :description, :title, :recipe, :picture, :featured, :user_id
end 
```

创建组方法：

```
def create
    @user = User.find(current_user.id)
    @group = Group.new(params[:group])
    @group.user_id = @user.id   
    @user.groups << @group

    redirect_to group_path(@group)
  end 
```

显示用户的组成员资格——在缓存被清除之前不会更新：

```
<% @user.groups.each do |group| %>
<% if group %>
    <p class="group-title"><a href="<%=  group_path(group) %>"><%= group.title %></p>
        <% @latestpic = Recipe.where("group_id = ?", group).limit(1).order("created_at DESC") %>
        <% if @latestpic.exists? %>
            <% @latestpic.each do |pic| %>
                <%= image_tag(pic.picture.url(:medium)) %>  
            <% end %></a>
        <% else %>
            <%= image_tag "http://placehold.it/300x300" %>
        <% end %>
        <br></br>

<% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:45:41.940

在您的模型中，您具有“拥有并属于多个”关系，这意味着您的用户可以在 n 个组中，并且您的组包含 n 个用户。

```
@group.user_id 
```

如果您在“组”表中创建了 user_id 列，则可以删除它，因为一个组包含 n 个用户。您必须像这样在用户和组之间使用表：

```
create_table :group_users, :id => false do |t|
  t.references :group, :null => false
  t.references :user, :null => false
end 
```

然后重构您的控制器，如下所示：

```
def create
  @group = current_user.groups.build(params[:group])

  if @group.save
    redirect_to @group, notice: 'Group was successfully created.'
  else
    render action: "new"
  end
end 
```

这将创建一个包含您当前用户的组。在您的方法中，您忘记保存修改。因为运算符 = 和 << 不会更新数据库。然后我稍微重构了一下，但还是一样的逻辑。

您还可以在您的视图中重构很多东西，但这不是问题，我们将保持原样。

它现在有效吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-14T16:18:10.660

可能这个答案已经过时了，但可能对最终在这里的谷歌用户有用：

当 Rails(4.2 for me) 更新 Has-And-Belongs-To-Many 关联时，它不会更改`updated_at`根记录的值。例子：

```
# This does not change @user.updated_at value 
@user.update_attributes(group_ids: [1, 2, 3]) 
```

每个 ActiveRecord 对象都有一个特殊`cache_key`的，通常使用`updated_at`缓存的值和无效来构建。因此，如果我们仅更改 HABT，它不会使缓存无效。

`@user.touch`此处可能的解决方案 -如果 HABTM 已更改，则手动调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-03T10:28:37.900

如果有人因为创建或删除后数据不显示而来到这里，那么您需要执行以下操作以在这些操作之后更新缓存：

```
 # in your model file
  after_save    :expire_model_all_cache
  after_destroy :expire_model_all_cache

  def expire_model_all_cache
    Rails.cache.delete("your cache name")
  end 
```

# html - 特定 ID 的 CSS 样式未按预期工作

> ID：12655049
> 
> 赞同：0
> 
> 时间：2012-09-29T17:51:52.160
> 
> 标签：html, css, jsf-2, xhtml, primefaces

在我的 JSF 2 Primeface 应用程序中，我有以下文件上传组件。

```
<p:fileUpload id="related_image" fileUploadListener="#{fileUploadController.handleFileUpload}"  
    mode="advance"  
    auto="false" 
    showButtons="false"
    sizeLimit="100000"
    fileLimit ="1"
    allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
    style="width: 310px"/> 
```

我想从此组件中删除进度条，所以我正在做

```
.progress {
display: none; 
```

}

并且这项工作，但我想仅删除附加到此文件上传组件的进度条，而不是从我的整个应用程序中删除，所以我尝试了

```
#related_image .progress{
display:none; 
```

}

但这不起作用，有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T11:12:28.520

您的`<p:fileUpload>`组件可以*预先添加 id*。查看部署后生成的 HTML 输出并检查组件的实际 id。 `<p:fileUpload>`在某些`form`（或其他包装组件中，例如`<p:panel>`）。Primefaces 会自动将`forms`id 添加到 this 中的组件`form`。所以实际的 id`<p:fileUpload>`可能看起来像`id="formID:fileUpID"`，这就是它找不到*#fileUpID*的原因。

**注意**`prependId="false"`：您可以按属性禁用前置 id 。

**注意 2**：您也可以尝试为 指定`styleClass`，`<p:fileUpload>`您可以在 CSS 中设置样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T19:22:48.520

首先，你有一个额外的空间

> `\#related_image .progress{`

选择器应该是

`#related_image.progress{`

其次，如果`fileUpload`组件确实有前缀 id（正如 Fallup 建议的那样），您需要从 css 选择器中的 id 中转义冒号 - 请参阅例如在 CSS 选择器[中处理元素 ID 中的冒号](https://stackoverflow.com/questions/122238/handling-a-colon-in-an-element-id-in-a-css-selector)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T06:41:54.213

一般来说（在css中，您需要使用在CSS选择器中处理元素ID中的冒号来转义冒号[，](https://stackoverflow.com/a/656463/617373)*而*在jquery中您应该使用）`\3a` `\\:`

```
#some_prefix_id\3a your_file_upload_component_id .someClass{
    display:none;
} 
```

> 其中 some_prefix_id 可能是某个表单 id 或某个命名容器 id ，

虽然，INMO 更好的方法是为您的表单分配一个 id 并在 css 中使用此选择器：

```
#your_form_id .someClass{
    display:none;
} 
```

# c# - 绕过所有中心透明度获取帧图像的宽度和高度

> ID：12655052
> 
> 赞同：0
> 
> 时间：2012-09-29T17:51:59.723
> 
> 标签：c#, winforms, gdi+

我有许多只包含 PNG 格式的框架（样式边框）的图像。图像的所有中心都是透明的。我正在寻找一种方法来检测没有透明度的框架高度和宽度。我尝试在 GDI+ C# 中逐个像素地进行检查，但未能使其正常工作。

所有这些都假设顶部框架高度和底部框架高度具有相同的高度，并且右框架宽度和左框架宽度具有相同的宽度。

帧是线性的，不应该有任何特殊的故障，所以如果我检测到右帧的宽度，我应该与左帧相同。

希望任何人都知道如何实现这一目标。

**框架示例：**

[框架示例 http://www.digitalimageautorotate.com/images/frame_demo.png](http://www.digitalimageautorotate.com/images/frame_demo.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:30:57.753

通常在处理图像时，您会使用 .LockBits 和指针来提高速度，因为您通常会一遍又一遍地访问数百万像素。（如果你不那样做 - 你可能会忽略它，因为你没有意识到你会得到多少开销）。

但是，在**这种**情况下，您将访问很少的像素，因此 .GetPixel 实际上应该是完美的。

```
public Size GetBorderSize(Bitmap bmp)
{
    var hx = bmp.Width/2;
    var hy = bmp.Height/2;
    var sz = new Size();
    while ( bmp.GetPixel(sz.Width, hy).A == 255 && sz.Width < hx)
        sz.Width++;
    while (bmp.GetPixel(hx, sz.Height).A == 255 && sz.Height < hy)
        sz.Height++;
    return sz;
} 
```

# ruby-on-rails - live reload 2 with rails 3.2.7 错误

> ID：12655054
> 
> 赞同：0
> 
> 时间：2012-09-29T17:52:11.510
> 
> 标签：ruby-on-rails, reload, compass-sass, sass

有没有人在使用指南针的rails中遇到同样的问题？

```
application.css.scss Unparsed
No application integration exists for rails 
```

错误图片：

![http://safe-and-sound.biz/error_livereload.png](../Images/8f28a8c44b2030effc49f725084a1724.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:58:28.333

请检查是否有帮助： [https ://groups.google.com/forum/?fromgroups#!topic/compass-users/oaI4meEp9Hs](https://groups.google.com/forum/?fromgroups#!topic/compass-users/oaI4meEp9Hs)

# jquery - 两个不同的选择具有相同的选项，然后动画溢出的 div 或错误消息

> ID：12655055
> 
> 赞同：0
> 
> 时间：2012-09-29T17:52:16.407
> 
> 标签：jquery

编辑：哦，好吧，现在我设法让它正常工作。但是，如果用户在收到错误消息后选择了正确的选项，我需要将错误消息隐藏。

这是我正在处理的 html/jquery

```
 <form>
 <select>
     <option>Please Select Your Value</option>
     <option>Pick this value 1</option>
 </select>
 <div class="error">Please select your value</div>

 <select>
     <option>Please Select Your Value</option>
     <option>Pick this value 2</option>
 </select>
     <div class="error">Please select your value</div>

     <input type="submit" value="Show Hidden Div" />         
 </form>

 <div class="suprise">
   Hidden Div
 </div> 
```

和 jQuery

```
$('.submit').click(function(){
   var correct = true;
   $('select').each(function(){
     if($(this).val() != 'option2value'){
       //next is the error... it might be better to use an id there
       $(this).next().show();
       correct = false;
     }
   })
   if(correct){
    $(".results").animate({ 
            marginTop: -480}, 400); 
   }
 }) 
```

我只是需要一点帮助，如何制作正确的触发器......我不知道该怎么做。

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T14:51:37.563

各位，对不起。在没有设置 .error div 的情况下，我在播放 .next 时遇到了麻烦...它现在可以正常工作，感谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T17:58:37.617

首先，您需要在其中插入一个 id`select`

```
<select id="select1">
     <option>Please Select Your Value</option>
     <option>Pick this value 1</option>
 </select>
 <div class="error">Please select your value</div>

 <select id="select2">
     <option>Please Select Your Value</option>
     <option>Pick this value 2</option>
 </select> 
```

```
$("select[id^=select]").on("change", function() {
    if ($(this).attr("id") == "select1") {
        if ($(this).val() == $("#select2").val()) {
            alert("You are wrong");
        } else {
            alert("You are right");
        }
    }
    else {
        if ($(this).val() == $("#select1").val()) {
            alert("You are wrong");
        } else {
            alert("You are right");
        }
    }
})​ 
```

# java - 在这个组合上使用装饰器模式

> ID：12655056
> 
> 赞同：1
> 
> 时间：2012-09-29T17:52:18.713
> 
> 标签：java, decorator, composition

好吧，我使用了一种构图模式，其中一个图形对象以一组和矩形的形式扩展。一个组可以有许多矩形，并且为这些组调用一个paint() 方法，在矩形中调用paint 方法并且每个矩形都绘制自己。

现在我需要以某种方式使用装饰器模式，将矩形对齐到左侧或右侧。现在，如果我在组上使用装饰器，它只会对齐我猜的组坐标，但是由于所有矩形都自己绘制，因此对它们没有影响。

那么有什么想法可以在这里使用装饰器模式吗？

我的意思是我能想到使用它的唯一方法是在每个矩形和组中需要对齐的每个元素周围使用装饰器包装器。但这不违反装饰者模式的政策吗？我的意思是，从技术上讲，该组不知道它的列表中有什么，对它来说，元素只是 GraphicObject 实例，而矩形不知道它们被一个装饰器包裹着，该装饰器会在调用矩形的绘制之前修改它们的坐标（ ） 方法。

如果这是唯一的方法，那么我该如何使用它来装饰这些物品？我必须在这里使用反射还是有其他/更正确的方法来做到这一点？

一些代码：

```
if (mainGroup == null) {
        mainGroup = new Group();

        // first line
        currentBounds = convertToBoundsForLine(x, y, width, lineHeight, 1);
        //System.out.format("current bounds: x1=%d, y1=%d, x2=%d, y2=%d%n", currentBounds.getX(), currentBounds.getY(), currentBounds.getX2(), currentBounds.getY2());
        GraphicObject rect1 = new Rectangle(currentBounds);
        mainGroup.addChild(rect1);

        // other lines...

        // fifth line
        currentBounds = convertToBoundsForLine(x, y, width, lineHeight, 5);
        //System.out.format("current bounds: x1=%d, y1=%d, x2=%d, y2=%d%n", currentBounds.getX1(), currentBounds.getY1(), currentBounds.getX2(), currentBounds.getY2());
        GraphicObject rect5 = new Rectangle(currentBounds);

        // this is with the decorator wrapper around - should I use reflection here?
        GraphicObject blabla = new DecoratorLeft(rect5);
        mainGroup.addChild(blabla); 
```

在第五行，您可以看到我在将矩形添加到组之前将其放在装饰器中的位置，所以我应该使用反射并在添加到组的每个矩形上使用它们。还是有更好的方法来做到这一点？

还是我在这里使用装饰器的方式总体上是完全错误的？

提前致谢。

编辑：

以下是我的绘画方法在组中的实现方式：

```
public void draw(Graphics g, AlignStrategy align) {
    for (GraphicObject graphic: children) {
        graphic.draw(g, align);
    }
} 
```

该组只调用儿童的绘制方法。

问题是，在我看来，装饰器应该是通用的，根据你给出的建议，它似乎会让它变得依赖？我的意思是该组基本上依赖于对齐？如果说我创建了一个可以旋转对象的装饰器，或者用 y 切换坐标 x 怎么办？我的意思不是关于左对齐、右对齐或居中对齐，而是关于装饰器的工作，而不必使代码过多地适应装饰器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:53:10.090

如果您可以完全控制`GraphicObject`, `Group`,`Rectangle`等后面的代码（即，如果它是您的全部代码），那么我认为使用装饰器模式可能是困难的方法。使用类似于 AWT`Layout`方法的代码来实现绘图对齐会更简单，其中父对象（`Group`在您的情况下可能是 a ）被赋予一个`Layout`负责管理父子对象排列的对象。默认布局不会影响子级。“左对齐”和“右对齐”布局将在绘制前一段时间发生的布局阶段对子项进行必要的位置更改。`Group``Layout`

如果您无法控制绘图对象背后的代码，那么我认为周围的装饰器`Group`会比装饰所有孩子更好。让`Group`-level 装饰器的`paint()`方法在调用时管理子级的对齐方式。这样，`Group`每个可绘制对象只有一个装饰器，而不是一个装饰器。这本质上是将布局代码滚动到装饰器类中，但您始终可以拆分布局代码并让装饰器调用它。

编辑：这是第二种情况的示例。为了简单起见，我只列出必要的部分，而不是细节。

```
public class GroupDecorator extends GraphicObject { //or extends whatever is best
    public GroupDecorator(Group wrappedGroup) { 
        myGroup = wrappedGroup;
    }

    public void paint() { //Assume this is your common paint() method
        //note I'm making up the names here, since I don't know them
        List groupsChildren = myGroup.getChildren(); 

        //The type of alignment is stored somewhere in this object
        //or is hard-coded. That's up to you. I'll assume it's stored somewhere...

        if (isAlignedLeft()) { 
          //align all the children to the left here
        } else if (isAlignedRight()){
          //align all the children to the right here
        } else { 
          //do nothing because no alignment is necessary
        }

        //call the wrapped Group's paint now. It will call its children's paint()s.
        myGroup.paint();

        //Unalign all the children here, if necessary, to put them back in 
        //their original state. How you implement that is up to you.
    }

}
// Somewhere in your main code...

    mainGroup = new Group();

    //Decorate mainGroup now...
    GroupDecorator decoratedGroup = new GroupDecorator(mainGroup);
    //Configure decoratedGroup to align however you want.

    // first line
    GraphicObject rect1 = new Rectangle();
    mainGroup.addChild(rect1);

    // other lines...

    // fifth line
    GraphicObject rect5 = new Rectangle();

    //Now use decoratedGroup now in place of mainGroup. 
```

# android - 短信正文在 android 中未正确显示

> ID：12655062
> 
> 赞同：0
> 
> 时间：2012-09-29T17:52:45.093
> 
> 标签：android, html, css

我正在开发我的移动应用程序，我正在使用以下标签将味精发送给用户

```
<a href="sms://+3490322111?body=Interested%20in%20Product%20AA2">
More info for producto AA2</a> 
```

我真的很好用。它进入撰写屏幕，数字正确传递给收件人部分，但文本没有传递，只希望文本也传递，并且不想在撰写时输入任何内容。

请给我一个解决方案谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T09:32:59.420

目前这是不可能的。

android 上有一个关于 body 未被使用的[突出错误，](http://code.google.com/p/android/issues/detail?id=12142)即使它是[Messaging API 规范](http://www.w3.org/TR/messaging-api/#intro)的一部分。

iOS 也是如此，其中[Safari 的文档](https://developer.apple.com/library/safari/#featuredarticles/iPhoneURLScheme_Reference/Articles/sms.html)只提到了电话，没有提到 SMS 的正文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T19:38:10.117

如果您不想编写消息，那么。

我建议您通过以下使用 SmsManager 的方法显式发送短信：http: [//developer.android.com/reference/android/telephony/gsm/SmsManager.html](http://developer.android.com/reference/android/telephony/gsm/SmsManager.html)

```
private void sendSMS(String phoneNumber, String message)
   {
       SmsManager sms = SmsManager.getDefault();
       sms.sendTextMessage(phoneNumber, null, message, null, null);
    } 
```

您还需要有权在清单中发送短信。

```
<uses-permission android:name="android.permission.SEND_SMS"/> 
```

# location - 纬度、经度、精度、方位、高度和时间之间的差异

> ID：12655069
> 
> 赞同：1
> 
> 时间：2012-09-29T17:53:51.880
> 
> 标签：location

我只是想把这件事说清楚。要获得位置，我们可以使用

```
int lat = (int)(location.getLatitude());
int lng = (int)(location.getLongitude());
int acc = (int) (location.getAccuracy());
int alt = (int) (location.getAltitude());
int bearing = (int) (location.getBearing()); 
```

那么与这一切有什么关系呢？准确性如何使位置比仅使用纬度和经度更准确？表示所有这些信息的正确方法是什么？我的意思是，正如我们在谷歌地图或任何其他地图中看到的那样，该位置将是 110'30'N。那么，我们实际在哪里使用纬度、经度、精度、方位、高度和时间？

任何关于这件事的信息都可以一劳永逸地弄清楚。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T18:00:57.413

纬度和经度是您在平面地图上的位置。它不能告诉你是在地面上还是在飞机上。这是谷歌地图可能显示的内容`10'13"N 100'12"W`

Altitude 告诉您您从海平面开始的高度，这意味着提到的 3 个一起给出了您在“3D”中的位置。

准确度表明定位硬件（GPS？）认为您的位置有多准确。它不会以任何方式使读数更准确，只是告诉您其他值可能有多么错误。

方位是您指向的位置，即您前进的方向（想想指南针）。

# javascript - 二维动态关联数组

> ID：12655076
> 
> 赞同：0
> 
> 时间：2012-09-29T17:55:02.750
> 
> 标签：javascript, arrays, associative-array

有没有可能做这样的事情：

```
var fieldObjArray = Array();;

    for(var k in SpesificPropertiesInfo){
        var fieldTable = createFieldTable(SpesificPropertiesInfo[k]);
        fieldObjArray[SpesificPropertiesInfo[k].fieldName]['fieldStatus'] = SpesificPropertiesInfo[k].fieldStatus;
        fieldObjArray[SpesificPropertiesInfo[k].fieldName]['fieldName'] = SpesificPropertiesInfo[k].fieldName;
        fieldObjArray[SpesificPropertiesInfo[k].fieldName]['columnName'] = SpesificPropertiesInfo[k].columnName;
    } 
```

我想创建一个数组，它的第一个维度是关联的（并且是动态的//我一开始不知道它的名称），第二个维度是关联的，但我知道它的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:04:19.813

是的。这是。

但是，使用对象，而不是数组。JS 中的数组***仅***用于`0...n`索引，也不能与 . 一起正常工作`for ... in`。

```
var myObj = {},

    key = "",
    val = "";

for (key in yourObj) {
    if (yourObj.hasOwnProperty(key)) {
        val = yourObj[key];
        myObj[val.fieldname] = {
            fieldStatus: val.fieldStatus,
            fieldName: val.fieldName,
            colName: val.colName
        };

        //...
    }
} 
```

你现在有一个`myObj`包含所有`yourObj`主索引的对象，每个索引都是一个对象，包含第二维的属性......

# c# - 可访问性不一致：参数类型“IFCS.Entity”比方法“IFCS.EntityOverviewPanel.setEntity(IFCS.Entity)”更难访问？

> ID：12655083
> 
> 赞同：0
> 
> 时间：2012-09-29T17:56:19.103
> 
> 标签：c#, wpf

您好，我的申请有问题。

我创建了一个新的`UserControl`调用`EntityOverviewPanel`来直观地显示有关另一个类的信息`Entity`。
为了创建这个 UserControl 的实例，我想传递一个实例，`Entity`以便用所有数据初始化面板。

```
public partial class EntityOverviewPanel : UserControl
{
    private Entity entity;

    public EntityOverviewPanel()
    {
        InitializeComponent();
    }

    public void setEntity(Entity e)
    {
        entity = e;
        updatePanel();
    }

    private void updatePanel()
    {
        //update panel
    }
} 
```

如果我尝试执行此操作，则会收到标题中提到的错误：
`Inconsistent accessibility: parameter type 'IFCS.Entity' is less accessible than method 'IFCS.EntityOverviewPanel.setEntity(IFCS.Entity)'`

我的实体看起来像这样（由于它的大小，只是类的一部分^^）

```
class Entity
{
    public enum Gender
    {
        MALE, FEMALE
    }

    private int id;
    private Gender gender;
    private string surname, forename;
    private Group group;
    private Organisation organisation;
    private Station station;
    private string uid;

    public Entity(string surname, Gender gender, Group group, Role role, string forename = "")
    {
         //code
    }

    //more code
} 
```

我读到更改`class Entity`为`public class Entity`可以解决此问题，但它并没有这样做，而是创建了一大堆与其他用途相关的新错误`Entity`（与标题中相同的错误消息）。

关于如何解决这个问题的任何想法？提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:07:25.413

是的 - 要么你需要`Entity`公开，要么你的`setEntity`方法（听起来你正在编写 Java 而不是 C#）在内部。更改`EntityOverviewPanel`为内部也可以解决它，IIRC。

从根本上说，您*不能*在具有内部参数或返回类型的公共类中拥有公共方法。这样做没有任何意义。

如果`Entity`公开导致进一步的问题，那可能只是因为你需要对其他类型做同样的事情。您确实需要确定您是否*希望*及其`Entity`相关类型是公开的。如果你不想公开，你为什么要`setEntity`公开？

# c++ - MFC 的 LISTCONTROL 内的 WPF 控件

> ID：12655091
> 
> 赞同：1
> 
> 时间：2012-09-29T17:57:05.353
> 
> 标签：c++, wpf, winapi, mfc, custom-controls

我正在使用`MFC`Visual Studio 2010 开发基于 Windows 窗体的应用程序。运行时`clr`我已附加`WPFuserlibrary`它以在项目中使用 WPF 控制。我想做`Custom List Control`这样我可以`WPF`在列表的每一行中显示控件，例如一个按钮。

```
hwndWPF1 = GetHwnd(m_democontrol.GetSafeHwnd(),20,20, 20,20); 
```

这就是我显示`HWND`对象的方式但这会利用表单或列表视图。我想`listcontrol`在每一行里面画这个。有任何想法吗？

# android - OpenGL ES 2.0 奇怪的着色器故障

> ID：12655092
> 
> 赞同：1
> 
> 时间：2012-09-29T17:57:08.317
> 
> 标签：android, opengl-es

我从 android SDK 附带的 API 演示中复制了三角形渲染器，并用我自己的 raymarcher 替换了着色器。但是，我遇到了有史以来最令人麻木的故障，它似乎只会影响红色。

这是我的着色器：

```
private final String fs =
"  precision mediump float;\n"+
  "uniform float t;\n"+
  "varying vec2 vtex;\n"+
  "mat3 genRotMat(float a0,float x,float y,float z){\n"+
  "  float a=a0*3.1415926535897932384626433832795/180.0;\n"+
  "  return mat3(\n"+
  "    1.0+(1.0-cos(a))*(x*x-1.0),\n"+
  "    -z*sin(a)+(1.0-cos(a))*x*y,\n"+
  "    y*sin(a)+(1.0-cos(a))*x*z,\n"+
  "    z*sin(a)+(1.0-cos(a))*x*y,\n"+
  "    1.0+(1.0-cos(a))*(y*y-1.0),\n"+
  "    -x*sin(a)+(1.0-cos(a))*y*z,\n"+
  "    -y*sin(a)+(1.0-cos(a))*x*z,\n"+
  "    x*sin(a)+(1.0-cos(a))*y*z,\n"+
  "    1.0+(1.0-cos(a))*(z*z-1.0)\n"+
  "  );\n"+
  "}\n"+
  "float cubeDist(vec3 p){\n"+
  "  float t0 = 0.5;\n"+
  "  float t1 = 0.6;\n"+
  "  float max = max(abs(p.x),max(abs(p.y),abs(p.z)));\n"+
  "  if(max > t1) return 0.0;\n"+
  "  else if(max > t0) return (t1-max)/(t1-t0);\n"+
  "  else return 1.0;\n"+
  "};\n"+
  "void main() {\n"+
  "  float spread = 1.0;\n"+
  "  float val=0.0;\n"+
  "  float delta="+delta+";\n"+
  "  float cameraz="+cameraz+";\n"+
  "  float nearz="+nearz+";\n"+
  "  float farz="+farz+";\n"+
  "  float r=0.0,g=0.0,b=0.0;"+
  "  vec3 ray=vec3(0.0,0.0,0.0);\n"+
  "  mat3 rot=genRotMat(sin(t/3.13)*360.0,1.0,0.0,0.0);\n"+
  "  rot=rot*genRotMat(sin(t/3.64)*360.0,0.0,1.0,0.0);\n"+
  "  rot=rot*genRotMat(sin(t/3.24)*360.0,0.0,0.0,1.0);\n"+
  "  ray.z=nearz;\n"+
  "  ray.xy+=vtex.xy*spread*(nearz-cameraz);\n"+
  "  for(int i=0;i<"+iterations+";i++){\n"+
  "    vec3 temp;\n"+
  "    ray.xy+=vtex.xy*spread*delta;\n"+
  "    temp=ray*rot;\n"+
  "    val+=cubeDist(temp);\n"+
  "    r+=abs(temp.x*delta*delta*val);\n"+
  "    g+=abs(temp.y*delta*delta*val);\n"+
  "    b+=abs(temp.z*delta*delta*val);\n"+
  "    ray.z+=delta;\n"+
  "  }\n"+
  "  gl_FragColor=vec4(r,g,b,1.0);\n"+
  "}\n"; 
```

这是故障的图像：http: [//imgur.com/2zcps.png](http://imgur.com/2zcps.png)

整个文件在这里： http: [//pastebin.com/JF7rnSdE](http://pastebin.com/JF7rnSdE)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:35:43.253

弄清楚了，这不是编码问题，而是 nvidia 硬件/驱动程序方面完全未知且奇怪的故障。

改变：

```
 "    r+=abs(temp.x*delta*delta*val);\n"+
  "    g+=abs(temp.y*delta*delta*val);\n"+
  "    b+=abs(temp.z*delta*delta*val);\n"+ 
```

至：

```
 "    g+=abs(temp.y*delta*delta*val);\n"+
  "    r+=abs(temp.x*delta*delta*val);\n"+
  "    b+=abs(temp.z*delta*delta*val);\n"+ 
```

由于一些完全未知的原因解决了这个问题。此外，更改 for 循环迭代长度似乎也会影响此故障。这可能是由于 for 循环展开。

# java - 如何始终显示一周的最后一天

> ID：12655094
> 
> 赞同：0
> 
> 时间：2012-09-29T17:57:26.840
> 
> 标签：java

我有一个显示用户活动的 JSF 表。

```
<p:lineChart id="logins" value="#{StatisticsController.weekActivity}" legendPosition="e"  
                                 title="Weekly Logins" seriesColors="4D94FF, 1975FF, 005CE6, 0047B2" minY="0" maxY="200"/>

public class Statistics implements Serializable {

    private CartesianChartModel weeksActivity;

    public Statistics() {  
        createweeksActivity(); 

    }  

    public CartesianChartModel getweekActivity() {  
        return weeksActivity;  
    }

    private void createweeksActivity() {  
        weeksActivity = new CartesianChartModel();  

        ChartSeries boys = new ChartSeries();  
        boys.setLabel("Active Accounts");  

        boys.set("Monday", 120);  
        boys.set("Tuesday", 100);  
        boys.set("Wednesday", 44);  
        boys.set("Thursday", 150);  
        boys.set("Friday", 120);
        boys.set("Saturday", 82);  
        boys.set("Sunday", 115);  

        ChartSeries girls = new ChartSeries();  
        girls.setLabel("Blocked Accounts");  

        girls.set("Monday", 52);  
        girls.set("Tuesday", 60);  
        girls.set("Wednesday", 110);  
        girls.set("Thursday", 135);  
        girls.set("Friday", 120);
        girls.set("Saturday", 140);  
        girls.set("Saturday", 130);  
        girls.set("Sunday", 140);  

        weeksActivity.addSeries(boys);  
        weeksActivity.addSeries(girls);  
    }  

} 
```

我想按顺序显示当前日期。例如：现在我得到这个订单：`Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, Sunday` 例如今天是星期三我想在打开网页时得到这个订单：

```
Thursday, Friday, Saturday, Sunday, Monday, Tuesday, Wednesday 
```

我该如何解决这个问题？

```
EDIT: 
```

我以这种方式更新了代码：

```
private void createweeksActivity()
    {

        weeksActivity = new CartesianChartModel();

        ChartSeries activeAccounts = new ChartSeries();
        activeAccounts.setLabel("Active Accounts");

        ChartSeries blockedAccounts = new ChartSeries();
        blockedAccounts.setLabel("Blocked Accounts");

        GregorianCalendar calendar = new GregorianCalendar();
        DateFormat df = new SimpleDateFormat("EEEE");
        for (int i = 0; i < 7; i++)
        {
            calendar.add(Calendar.DATE, 1);
            System.out.println(df.format(calendar.getTime()));
            activeAccounts.set(df.format(calendar.getTime()), getNumberOfLogins(df.format(calendar.getTime())));
            blockedAccounts.set(df.format(calendar.getTime()), getNumberOfLogins(df.format(calendar.getTime())));
        }       

        weeksActivity.addSeries(activeAccounts);
        weeksActivity.addSeries(blockedAccounts);
    }

    public int getNumberOfLogins(String day){

        // Get here the number of logins using SQL command
        // Example: SELECT * FROM HISTORY WHERE DAY = day;

        return 100;
    } 
```

我想它会起作用的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T18:09:25.090

```
GregorianCalendar calendar = new GregorianCalendar();
DateFormat df = new SimpleDateFormat("EEEE");
for (int i = 0; i < 7; i++) {
    calendar.add(Calendar.DATE, 1);
    System.out.println(df.format(calendar.getTime()));
} 
```

GregorianCalendar 在我们的公历下代表时间的瞬间。它的无参数构造函数将其初始化为当前时间。

DateFormat 用于格式化日期。您可以使用其方法将 a`(Gregorian)Calendar`转换为 Date 。`getTime()`“EEEE”是指一周中最长的一天。

该`(Gregorian)Calendar.add()`方法允许将值添加到日历的任何字段（年、月、日期、小时等）。由于您要遍历一周中的几天，因此我从明天开始，并在每次迭代时添加 1 天。

一切都在[javadoc](http://download.oracle.com/javase/6/docs/api/)中可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T18:09:23.040

根据日历，将您的星期几作为其星期数的地图。

然后使用 Calendar 获取当前日期并使用 Modular Arithmetic 更改排序。

就像是：

```
//This you can do it one time and then use it in your program
Map<Integer, String> daysOfWeek = new HashMap<Integer,String>();
daysOfWeek.put(Calendar.MONDAY, "Monday");
daysOfWeek.put(Calendar.TUESDAY, "Tuesday");
//so on and so forth.

//Now the code that will be running 
//You get your current Day  (Which will be the last one you want to see)
int weekday = calendar.get(Calendar.DAY_OF_WEEK);

//Start with next value (modulus 7 since you don't want overflow)
int currDay = (weekday+1) % 7;

//Go over the seven Days
for(int i = 0; i < 7; i++) {
    String currDay = daysOfWeek.get(currDay);  //Get your Day String

    //Here do whatever you need to do to set up the DAY in JSF

    currDay = (currDay+1) % 7;  //Moving currDay to the next Day
 } 
```

# php - 如何检查我网站上的盗链

> ID：12655095
> 
> 赞同：0
> 
> 时间：2012-09-29T17:57:41.003
> 
> 标签：php, html, image, hyperlink

我有一个带有图片的网站，它们的链接通常在其他网站上。我怎么知道我是否可以删除图像？就像检查链接在哪里，或者是否有人从其他网站看到图像。

我希望你能理解我的要求。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T18:30:47.110

要检查热链接，您需要获取请求图像的 HTTP 查询的 HTTP_REFERER 值。这不是一种可靠的方法，因为有几个原因可能导致它根本不被填充，即使是在热链接请求中（“个人防火墙”解决方案、代理等）。

您最好的选择是在日志中包含引用者，对于经常使用的 Apache，请参阅“组合日志格式”

```
http://httpd.apache.org/docs/2.2/logs.html 
```

然后使用合适的工具（例如 AWstats）分析日志。

要检查*损坏*的热链接，您可以检查`ErrorLog`; 如果有人不再找到图像，则会在日志中留下痕迹。

**如果您无权访问日志**（或配置），但您有权访问`.htaccess`，则可以使用`mod_rewrite`.

您可以通过在内部重定向（用户什么都看不到）链接来做到这一点，例如

```
 http://www.yoursite.com/images/myimage.jpg 
```

到服务器端脚本，例如

```
 http://www.yoursite.com/images/index.php?image=myimage.jpg 
```

现在用户*认为*他仍在请求`myimage`，但他实际上是在调用脚本。然后脚本可能会在数据库中存储上次访问时间，或者注意图像正在使用的其他方式：例如在 PHP 中，可以使用该函数`touch()`来更新文件修改时间。此时，您可以轻松找出最近访问过哪些文件，哪些没有访问过。

所有这些方法都容易出错（例如，有人可能会通过代理盗链并访问您的图像。代理的保留时间很长，即使明智也不会检查上游。您删除图像，没有任何反应 -直到一周后代理同步并且您终于看到访问权限；并且失败了），但这是您能做的最好的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T18:01:21.673

您永远无法确定图像是否没有从任何地方链接到，或者是否没有人碰巧访问它。可能有一个页面会热链接图像，但没有获得任何流量。

检查您的网络服务器访问日志会告诉您*是否*正在使用图像以及使用频率；[设置引用日志](http://www.simonecarletti.com/blog/2009/01/logging-external-referers-with-apache/)将帮助您确定*图像*的使用位置。有了这些数据，您可以从更好的角度考虑下一步行动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T18:01:46.840

使用 Apache，您可以检查以防止`hotlinking`（当有人从另一个网站链接到您的图像时，这就是它的调用方式）。

这是一个答案：[http ://altlab.com/htaccess_tutorial.html](http://altlab.com/htaccess_tutorial.html)

这是一个生成`.htaccess` [http://www.htaccesstools.com/hotlink-protection/的工具](http://www.htaccesstools.com/hotlink-protection/)

但是google上还有很多

# php - 去掉链接的一部分

> ID：12655099
> 
> 赞同：0
> 
> 时间：2012-09-29T17:58:17.353
> 
> 标签：php

我的项目中有一个分页代码

但问题出在链接中

我得到类似的链接`post?pid=2&page=2&page=3%page=6`

我试图去掉`page`

这是一个例子

```
site.com/post.php?pid=12&page=10
site.com/category.php?cid=120&page=2 
```

我试图得到这个结果

```
site.com/post.php?pid=12
site.com/category.php?cid=120 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:06:00.307

最好的做法是使用正则表达式。

您可以使用 preg_replace 将任何看起来像 &page=something 的内容替换为空字符串。

这应该工作：

```
$result = preg_replace("/&page=[0-9]*/i","",$initialurl); 
```

# c++ - 符号无法解析 C++

> ID：12655100
> 
> 赞同：0
> 
> 时间：2012-09-29T17:58:27.493
> 
> 标签：c++, eclipse, symbols

我遇到了这个错误：在我的一种方法中无法解析符号'pa'。编码：

```
 PredefinedAtom* PredefinedSymbolTableCollection::findAtomByLexCode(u_int lex_code) {
      // PredefinedAtom* pa;  // <== ACCEPTED
      for(u_int i = 0; i < pst.size(); i++) {
          if((PredefinedAtom* pa = pst[i]->findAtomByLexCode(i)) != NULL){// <== BAD 
                          // some code
          }
      }
 } 
```

如果我在“if”范围之外声明一种 PredefinedAtom，则代码将编译/运行。但是，如果我尝试在“if”中声明一个类型，编译器会发出“无法解析 'pa' 符号”错误。'findAtomByLexCode' 要么返回指向 'PredefinedAtom*' 的指针，要么返回 NULL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T18:10:17.507

您可以在语句的条件中定义变量，`if`但不能在表达式中定义它。你需要这样写：

```
if (PredefinedAtom* pa = pst[i]->findAtomByLexCode(i)) {
    ...
} 
```

的值`pa`被转换以`bool`确定采用哪个分支。

# css - 盒影与溢出

> ID：12655102
> 
> 赞同：1
> 
> 时间：2012-09-29T17:58:32.123
> 
> 标签：css

使用 box-shadows，是否可以同时使用“overflow-x:visible”和“overflow-y:auto”？

似乎如果我在我的 CSS 中包含“overflow-y: auto”，我的 box-shadow 也会在 x 轴上被剪裁......理想情况下，box-shadow 会在 x 轴上溢出......

谢谢！

编辑：示例代码：http: [//jsfiddle.net/6nNbm/](http://jsfiddle.net/6nNbm/)

# jasper-reports - Jasperreports 和 iReport 升级兼容性

> ID：12655103
> 
> 赞同：4
> 
> 时间：2012-09-29T17:58:34.667
> 
> 标签：jasper-reports, ireport

我已经使用 Jasperreports 多年了，并且已经发布了许多版本。

我的问题是：我在 Jasper 中有两个使用 4.0.2 版的简单报告。我尝试将我的 iReport 升级到 4.7.1 版本，甚至再次编译它，我得到了一个`NullPointerException`.

我将 jasperreports 升级到 4.7.1 版，现在可以正常工作了。

升级 iReport 版本时，此类错误非常常见。为什么 iReport 不能将报告编译到较低版本的版本？保持这样的兼容性有那么难吗？

以前有人遇到过这个问题吗？在一个项目中不断升级 iReport 和 Jasperreports 有什么风险？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T12:01:25.113

我认为您的“旧”Jasper 无法处理“新”报告模板并不奇怪。您可以尝试通过不升级 iReport 来避免这种情况（因为没有理由，如果您只使用一个版本）。

但是，如果您需要维护在不同 JasperReports 版本上执行的报告，iReport 具有向下兼容模式，可以通过 extras -> options -> General tab -> Compatibility 访问。

希望这可以帮助。

根据我的经验，如果您没有遇到问题并且不需要更新版本中提供的新功能，则没有必要不断升级 JasperReports 或 iReport。“永远不要触摸正在运行的系统。”

# c# - 从 XSD 生成的类自动返回数组中的所有相同值？

> ID：12655106
> 
> 赞同：-1
> 
> 时间：2012-09-29T17:58:36.913
> 
> 标签：c#, object, xsd

我不明白为什么会发生以下情况。请参阅代码和输出示例。为什么当 3 个数组元素被明确设置为不同的值时，它们会输出相同的值。

吉姆
·弗兰克
·詹姆斯

詹姆斯
詹姆斯
詹姆斯

```
class Program
{
    static void Main(string[] args)
    {

        users allUsers = new users();
        allUsers.user = new usersUser[3];
        usersUser userConfig = new usersUser();

        userConfig.username = "Jim";
        allUsers.user[0] = userConfig;
        Console.WriteLine(allUsers.user[0].username);

        userConfig.username = "Frank";
        allUsers.user[1] = userConfig;
        Console.WriteLine(allUsers.user[1].username);

        userConfig.username = "James";
        allUsers.user[2] = userConfig;
        Console.WriteLine(allUsers.user[2].username);

        Console.WriteLine("");

        Console.WriteLine(allUsers.user[0].username);
        Console.WriteLine(allUsers.user[1].username);
        Console.WriteLine(allUsers.user[2].username);

        Console.ReadLine();
    }
}

using System.Xml.Serialization;

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "2.0.50727.1432")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace="", IsNullable=false)]
public partial class users {

    private usersUser[] userField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("user")]
    public usersUser[] user {
    get {
        return this.userField;
    }
    set {
        this.userField = value;
    }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "2.0.50727.1432")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
public partial class usersUser {

    private string usernameField;

    /// <remarks/>
    public string username {
    get {
        return this.usernameField;
    }
    set {
        this.usernameField = value;
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:02:37.413

```
 usersUser userConfig = new usersUser(); 
```

你只声明一次。然后，您只需每次都用另一个值覆盖该`userConfig.username`字段。试试这样：

```
usersUser userConfig = new usersUser(); // <-- new instance
userConfig.username = "Jim";
allUsers.user[0] = userConfig;

usersUser userConfig1 = new usersUser(); // <-- another new instance
userConfig1.username = "Jim";
allUsers.user[0] = userConfig1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T18:04:28.207

因为您在分配之前一遍又一遍地更改同一个对象，因此即使对于已经分配的对象，您也会对其进行更改，因此您将其设置为的姓氏就是坚持的那个。你必须这样做：

```
class Program
{
    static void Main(string[] args)
    {

        users allUsers = new users();
        allUsers.user = new usersUser[3];
        usersUser userConfig = new usersUser();

        userConfig.username = "Jim";
        allUsers.user[0] = userConfig;
        Console.WriteLine(allUsers.user[0].username);

        userConfig = new usersUser();
        userConfig.username = "Frank";
        allUsers.user[1] = userConfig;
        Console.WriteLine(allUsers.user[1].username);

        userConfig = new usersUser();
        userConfig.username = "James";
        allUsers.user[2] = userConfig;
        Console.WriteLine(allUsers.user[2].username);

        Console.WriteLine("");

        Console.WriteLine(allUsers.user[0].username);
        Console.WriteLine(allUsers.user[1].username);
        Console.WriteLine(allUsers.user[2].username);

        Console.ReadLine();
    }
} 
```

为数组中的每个索引创建新对象，而不是使用相同的三次。

# jekyll - 通过 jekyll 的类别限制帖子的数量

> ID：12655109
> 
> 赞同：17
> 
> 时间：2012-09-29T17:59:08.380
> 
> 标签：jekyll

我正在尝试用 jekyll 过滤一些帖子。我想输出所有类别的帖子：新闻。

当我这样做时它工作正常：

```
 {% for post in site.posts   %}
    {% if post.category[0] == "news" %}
      <h1>{{ post.title }}</h1>
  {% endfor %} 
```

但我想将此过滤器的输出限制为多个帖子。如果我将 a`limit: 5`应用于我的`for`循环，则它不起作用，因为 Jekyll 将限制应用于帖子总数。

是否可以对已过滤的帖子列表应用限制，例如：

```
 {% for post in site.posts   %}
    {% if post.category[0] == "news" limit:5 %}
      <h1>{{ post.title }}</h1>
  {% endfor %} 
```

我可以获取类别`site.categories`列表并列出它们

```
{% for category in site.categories %}
  <p>test: {{ category[0] }}</p>
{% endfor %} 
```

但我似乎无法缩小到单一类别。我正在尝试做类似的事情：

```
for post in site.categories.news limit:5
  //do something
endfor 
```

或者

```
for post in site.categories['news'] limit:5
  //do something
endfor 
```

但无济于事。是否可以通过这种方式过滤类别？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-29T22:57:26.157

我设法解决它。

在浏览了 jekyll bottstrap 文档后，我无法通过在所有新闻页面上`site.categories.news` 添加一个来访问过滤后的帖子列表。`tag: news`

我现在可以过滤和限制帖子的输出：

```
 {% for post in site.tags.news limit:2  %}
    //do something
  {% endfor %} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-26T22:40:34.643

我的代码可以正常工作。看起来他们自 2012 年以来在某个地方修复了它。

```
{% for post in site.categories.company limit: 1 %}
  ...
{% endfor %} 
```

# c# - 在 Ubuntu 12.04 上使用 C# 的 g-wan

> ID：12655118
> 
> 赞同：1
> 
> 时间：2012-09-29T18:00:35.103
> 
> 标签：c#, ubuntu, g-wan

有没有人在 Ubuntu 12.04 上使用 C#/mono 的 g-wan？（你是怎么做到的？）

我按照[http://gwan.com/faq#languages](http://gwan.com/faq#languages)上的说明进行操作。
我使用的大多数其他语言包括 Java 和 Oracle 7 JRE/JDK。

我正在运行 G-WAN 3.3.28 64 位（2012 年 3 月 28 日 11:24:16）

我有一个*hello.cs*脚本（在 csp/ 下的其他 hello 示例旁边），其中包含来自 gwan 网站的示例代码：

```
using System;

public class hello
{
    public static int Main(string[] args)
    {
        Gwan.xbufCat(Gwan.getReply(args[0]), "Hello World");
        return 200; // HTTP status (200:'OK')
    }
} 
```

当我启动 gwan 时，它没有显示任何迹象表明它正在加载对 C# 的支持。我看到了一个用于*java*、*sqlite3*和*tkcabinet*
的 API */library*，我在这里缺少 C# 的东西吗？

 ***我使用*apt-get install mono-devel*来设置单声道。二进制文件位于 /usr/bin 中。
我不清楚 g-wan 支持/使用哪个 C# 编译器 - AFAIK 每个 C# 版本都有不同的单声道编译器。

这是日志文件，我没有看到对 hello.cs 的任何*引用*。
我检查了*hello.cs*的文件权限，它们与其他脚本相同。

```
[Sat Sep 29 17:33:27 2012 GMT] ------------------------------------------
[Sat Sep 29 17:33:27 2012 GMT] G-WAN 3.3.28 64-bit (Mar 28 2012 11:24:16)
[Sat Sep 29 17:33:27 2012 GMT] ------------------------------------------
[Sat Sep 29 17:33:27 2012 GMT] Local Time: Sat, 29 Sep 2012 10:33:27 GMT-7
[Sat Sep 29 17:33:27 2012 GMT] RAM : (989.60 MB free + 0 shared + 207.18 MB buffers) / 3.92 GB total
[Sat Sep 29 17:33:27 2012 GMT] DISK: 105.10 GB free / 114.19 GB total
[Sat Sep 29 17:33:27 2012 GMT] 390 processes running
[Sat Sep 29 17:33:27 2012 GMT] 1 Intel(R) Core(TM) i5 CPU 650 @ 3.20GHz (2 Cores/CPU, 1 threads/Core)
[Sat Sep 29 17:33:27 2012 GMT] Using 2 worker threads
[Sat Sep 29 17:33:27 2012 GMT] 64-bit little-endian (least significant byte first)
[Sat Sep 29 17:33:27 2012 GMT] Ubuntu 12.04.1 LTS \n \l (3.2.0-31-generic) 64-bit
[Sat Sep 29 17:33:27 2012 GMT] Glibc: 2.15 (stable)
[Sat Sep 29 17:33:27 2012 GMT] user: root (uid:0), group: root (uid:0)
[Sat Sep 29 17:33:27 2012 GMT] system  fd_max: 1,024
[Sat Sep 29 17:33:27 2012 GMT] program fd_max: 1,024
[Sat Sep 29 17:33:27 2012 GMT] updated fd_max: 1,000,000
[Sat Sep 29 17:33:27 2012 GMT] Available network interfaces (2):
[Sat Sep 29 17:33:27 2012 GMT] 127.0.0.1
[Sat Sep 29 17:33:27 2012 GMT] 192.168.0.16
[Sat Sep 29 17:33:27 2012 GMT] memory footprint: 1.39 MB
[Sat Sep 29 17:33:27 2012 GMT] Host /home/shannon/gwan/gwan_linux64-bit/0.0.0.0_8080/#0.0.0.0:
[Sat Sep 29 17:33:27 2012 GMT] loaded loan.c
[Sat Sep 29 17:33:27 2012 GMT] loaded httpdate.c
[Sat Sep 29 17:33:27 2012 GMT] loaded chart.c
[Sat Sep 29 17:33:27 2012 GMT] loaded asm.c
[Sat Sep 29 17:33:27 2012 GMT] loaded served_from.c
[Sat Sep 29 17:33:27 2012 GMT] loaded report.c
[Sat Sep 29 17:33:27 2012 GMT] loaded captcha.c
[Sat Sep 29 17:33:27 2012 GMT] loaded setheaders.c
[Sat Sep 29 17:33:27 2012 GMT] loaded www_csp.c
[Sat Sep 29 17:33:27 2012 GMT] loaded folder/hellox.c
[Sat Sep 29 17:33:27 2012 GMT] loaded folder/argv.c
[Sat Sep 29 17:33:27 2012 GMT] loaded folder/hello.c
[Sat Sep 29 17:33:27 2012 GMT] loaded getheaders.c
[Sat Sep 29 17:33:27 2012 GMT] loaded contact.c
[Sat Sep 29 17:33:27 2012 GMT] loaded charts.c
[Sat Sep 29 17:33:27 2012 GMT] loaded forum.c
[Sat Sep 29 17:33:27 2012 GMT] loaded div_by_zero.c
[Sat Sep 29 17:33:27 2012 GMT] loaded json_bench.c
[Sat Sep 29 17:33:27 2012 GMT] JAVA_HOME: /usr/lib/jvm/java-7-oracle/
[Sat Sep 29 17:33:27 2012 GMT] loaded report.java
[Sat Sep 29 17:33:27 2012 GMT] loaded kv.c
[Sat Sep 29 17:33:27 2012 GMT] loaded 100.c
[Sat Sep 29 17:33:27 2012 GMT] loaded crash_libc.c
[Sat Sep 29 17:33:27 2012 GMT] loaded crash_gwcall.c
[Sat Sep 29 17:33:27 2012 GMT] loaded email.c
[Sat Sep 29 17:33:27 2012 GMT] loaded hellox.c
[Sat Sep 29 17:33:27 2012 GMT] loaded data_uri.c
[Sat Sep 29 17:33:27 2012 GMT] loaded all.java
[Sat Sep 29 17:33:27 2012 GMT] loaded argv.c
[Sat Sep 29 17:33:27 2012 GMT] loaded hello.mm
[Sat Sep 29 17:33:27 2012 GMT] loaded cookies.c
[Sat Sep 29 17:33:27 2012 GMT] loaded kv_bench.c
[Sat Sep 29 17:33:27 2012 GMT] loaded hello.cpp
[Sat Sep 29 17:33:27 2012 GMT] loaded json.c
[Sat Sep 29 17:33:27 2012 GMT] loaded hello.m
[Sat Sep 29 17:33:27 2012 GMT] loaded hello.c
[Sat Sep 29 17:33:27 2012 GMT] loaded persistence.c
[Sat Sep 29 17:33:27 2012 GMT] loaded sqlite.c
[Sat Sep 29 17:33:27 2012 GMT] loaded servlet_name.c
[Sat Sep 29 17:33:27 2012 GMT] loaded base64.c
[Sat Sep 29 17:33:27 2012 GMT] loaded power.c
[Sat Sep 29 17:33:27 2012 GMT] loaded argv.java
[Sat Sep 29 17:33:27 2012 GMT] loaded comet.c
[Sat Sep 29 17:33:27 2012 GMT] loaded hello.java
[Sat Sep 29 17:33:27 2012 GMT] loaded crash.c
[Sat Sep 29 17:33:27 2012 GMT] loaded cache.c
[Sat Sep 29 17:33:27 2012 GMT] loaded request.c
[Sat Sep 29 17:33:27 2012 GMT] loaded redirect.c
[Sat Sep 29 17:33:27 2012 GMT] loaded fractal.c
[Sat Sep 29 17:33:27 2012 GMT] loaded loan.java
[Sat Sep 29 17:33:27 2012 GMT] loaded trace.c
[Sat Sep 29 17:33:27 2012 GMT] loaded noheaders.c
[Sat Sep 29 17:33:30 2012 GMT] memory footprint: 17.18 MB (with Java VM loaded)
[Sat Sep 29 17:33:30 2012 GMT] java version "1.7.0_07"
Java(TM) SE Runtime Environment (build 1.7.0_07-b10)
Java HotSpot(TM) 64-Bit Server VM (build 23.3-b01, mixed mode
[Sat Sep 29 17:33:30 2012 GMT] server started 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:30:00.953

下一个版本将提供对 C#/Mono（以及 Scala/JVM）的支持。

如果您查看性能图表，G-WAN 的版本是 3.9（测试版）。他们应该在上周发布它，但因为他们正在“ORACLE Open World”活动中进行演示而被推迟。

下一个版本应该在这个月发布。***

# c++ - 来自 Win32 API 的 ReadFile 函数

> ID：12655120
> 
> 赞同：0
> 
> 时间：2012-09-29T18:01:05.463
> 
> 标签：c++, windows, winapi, visual-c++

我从 Win32 API 收到了两个关于 ReadFile 函数的问题。首先，鉴于

```
BOOL WINAPI ReadFile(
                       _In_         HANDLE hFile,
                       _Out_        LPVOID lpBuffer,
                       _In_         DWORD nNumberOfBytesToRead,
                       _Out_opt_    LPDWORD lpNumberOfBytesRead,
                       _Inout_opt_  LPOVERLAPPED lpOverlapped
                    ); 
```

第三个和第四个参数是DWORD类型，最多可以容纳1^32而不会溢出。这是否意味着 ReadFile 一次只能读取少于 1^32 字节数据的文件？如果这是真的，我想读取一个大于 1^32 的文件，我会将 ReadFile 放在这样的循环中

```
char buffer[1<<32];
while(!EOF){
  ReadFIle(filename,buffer,1^32,bytesout,NULL);
  SomeFunctionToExtractDataFromBuffer(buffer)
} 
```

假设循环倾向于在每次迭代时覆盖缓冲区，为了使这种设计工作，ReadFile 需要记住文件中先前读取发生的位置，这是真的吗？或者还有其他方法可以实现这一点。非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T18:04:16.960

> 第三个和第四个参数是 DWORD 类型，最大可以容纳 1^32 不溢出。这是否意味着 ReadFile 一次只能读取少于 1^32 字节数据的文件？

不，这意味着它一次最多只能读取 2^32 个字节。没有人阻止您`ReadFile`多次调用以读取任意数量的字节（每次读取都会使[文件指针](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365457%28v=vs.85%29.aspx)前进，因此它将从前一次读取停止的点开始读取）。

> 假设循环倾向于在每次迭代时覆盖缓冲区，为了使这种设计工作，ReadFile 需要记住文件中先前读取发生的位置，这是真的吗？

是的，操作系统会为每个打开的文件记住这一点（参见上面的文件指针链接）。

在这个主题上，我应该提到，如果您正在安排 4GB 读取，那么您很可能做错了什么。无论您的数据的性质是什么，您肯定可以以更小的块处理它，这将有助于避免遇到各种问题，例如可用内存。

# android - 什么是根布局？

> ID：12655122
> 
> 赞同：0
> 
> 时间：2012-09-29T18:01:14.730
> 
> 标签：android, fragment

我一直对根布局有疑问。在下面的段落中，**您必须从此方法返回一个 View ，它是片段布局的根**。

onCreateView() 当片段第一次绘制它的用户界面时，系统调用它。要为您的 Fragment 绘制 UI，您必须从此方法返回一个 View，它是**Fragment 布局的根**。如果片段不提供 UI，您可以返回 null。

片段布局的根是什么？是定义这个特定片段的 main_activity.xml 还是布局文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T18:05:58.743

它是需要显示在`Fragment`. 我们可以将它作为所有需要显示在`Fragment`

必须只有一个根元素，并且它必须包含带有 android 命名空间的 xmlns:android 属性，如图所示。`xmlns:android="http://schemas.android.com/apk/res/android"`

希望这可以帮助 ：）

**补充：**您的情况下的 onCreateView() 方法应返回定义此特定片段的布局文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T18:10:25.597

尝试这个....

*   `Fragments`旨在利用垫上剩余的额外空间。

*   在**手机**的情况下，我们从一个移动`Activity`到另一个，但`Pads`如果我们使用`Fragments`它总是**在**一个`Activity`.

*   `Fragment`可以`Dynamically` **从**`Activity`. _ _

*   在`onCreateView()`方法上，在`Fragments View`上**膨胀**`Root View`，这就是`returned`从那个方法中得到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T18:03:27.227

片段很可能作为父（或根）布局的一部分存在。我对该段落的解释是您在 main_activity.xml 中的最高级别布局将是根布局。

# opengl - Open GL :- 用颜色填充四边形的部分

> ID：12655123
> 
> 赞同：0
> 
> 时间：2012-09-29T18:01:15.587
> 
> 标签：opengl

> **可能重复：**
> [Open GL：-四边形的填充部分](https://stackoverflow.com/questions/12652787/open-gl-filling-portion-of-quadrilateral)

我是开放 GL 开发和开发游戏的新手，我想在其中展示玩家的能量水平。我想为此填充四边形的一部分。

请帮我创建一个部分被填充的 q 四边形？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-29T18:48:18.660

我在 OpenGL 中制作了一些简单的健康条。第一个是你要求的，其他是为了好玩:)

为了说明起见，所有代码都在旧的 OpenGL 中。这些函数将健康作为一个介于 0 和 1 之间的数字，并在 y = 0 处绘制一个高度为 1.0 的正方形，以 Y 轴为中心。屏幕截图显示 0.3、0.5 和 1.0 的生命值。

1）矩形的高度与健康成正比：

```
void drawHealth(float health) {
  glBegin(GL_QUADS);
    glColor3f(1, 0, 0);
    glVertex2f(0, 0);
    glVertex2f(1, 0);
    glVertex2f(1, health);
    glVertex2f(0, health);
  glEnd();
} 
```

![drawHealth](../Images/e04b00913392540d4c65d9286d47d449.png)

2）矩形的颜色与健康成正比：

```
void drawHealth2(float health) {
  glBegin(GL_QUADS);
    glColor3f(health, 0, 0);
    glVertex2f(0, 0);
    glVertex2f(1, 0);
    glVertex2f(1, 1);
    glVertex2f(0, 1);
  glEnd();
} 
```

![drawHealth2](../Images/e9c128d3fea3f176bfcb2641c467f3b1.png)

3）这个版本创建了一种渐变。动画时看起来不错，图片并不完全公正。

```
void drawHealth3(float health) {
  glBegin(GL_QUADS);
    glColor3f(1, 0, 0);
    glVertex2f(0, 0);
    glVertex2f(1, 0);
    glColor3f(health, 0, 0);
    glVertex2f(1, health);
    glVertex2f(0, health);
    glVertex2f(0, health);
    glVertex2f(1, health);
    glColor3f(0, 0, 0);
    glVertex2f(1, 1);
    glVertex2f(0, 1);
  glEnd();
} 
```

![drawHealth3](../Images/b207cdf8d043c6d9ce14bfcfb5a79e1d.png)

4) 此版本绘制离散条。

```
void drawHealth4(float health) {
  const int numDiv = 15;
  const float sep = 0.04;
  const float barHeight = 1.0/(float)numDiv;
  glBegin(GL_QUADS);
    glColor3f(1, 0, 0);
    for(float i = 0; i < health; i += (sep + barHeight)) {
      glVertex2f(0, i);
      glVertex2f(1, i);
      glVertex2f(1, i + barHeight);
      glVertex2f(0, i + barHeight);
    }
  glEnd();
} 
```

![drawHealth4](../Images/c31768284e444497646419ffcdfa8e36.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T18:08:04.493

```
glColor4f(r,g,b,a);
glBegin(GL_QUADS);
glVertex2d(-R,-1.0);
glVertex2d(R,-1.0);
glVertex2d(R,1.0);
glVertex2d(-R,1.0);
glEnd(); 
```

这是一个绘制所需颜色的四边形的示例，只需将 glVertex2d 的参数替换为四边形的端点。要制作能级条，只需绘制一个背景四边形，然后在其中绘制一个四边形来表示填充部分。使用坐标来控制内部四边形的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T18:05:23.510

您可以创建两个四边形而不是动态长度之一。

1.  首先初始化两个长度为 x 和 lx 的四边形（比如 A 和 B）。
2.  id 强度增加，您只需增加 A 的长度并减少 B 的长度相同的量。

我认为这足以理解这个想法。

# php - tinymce 用 php 改变

> ID：12655127
> 
> 赞同：-1
> 
> 时间：2012-09-29T18:01:45.633
> 
> 标签：php, tinymce

我正在尝试将 tinymce advimage 连接到我上传的一组用户照片，而不购买**fimagemanager**和/或文件管理器。我显然需要连接服务器，但浏览器无法识别 php.ini 文件。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:20:09.723

这就是我过去的做法，所以它可能不是最佳解决方案；）

如果您使用该`external_image_list_url`选项，那么您可以将其指向一个加载器脚本，该脚本将创建您的图像 js 数组。

```
// Image list
external_image_list_url : "http://example.com/image_list.php", 
```

然后就可以动态创建js图片数组，输出为`Content-Type:text/javascript` **image_list.php**

```
<?php 
$directory = './uploads/{*.gif,*.jpg,*.JPG,*.png,*.bmp}';

$js = 'var tinyMCEImageList = new Array('.PHP_EOL;
foreach (glob($directory,GLOB_BRACE) as $file){
    if (is_file($file) && @getimagesize($file) != FALSE) {
        $js .= "\t".'["'.basename($file).'", "http://example.com/uploads/'.basename($file).'"],'.PHP_EOL;
    }
}
$js = rtrim($js,','.PHP_EOL).PHP_EOL.");".PHP_EOL;

header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header("Content-Type: text/javascript");
echo $js;
?> 
```

结果类似于：

```
var tinyMCEImageList = new Array(
    // Name, URL
    ["some_image.png", "http://example.com/uploads/some_image.png"],
    ["some_image2.png", "http://example.com/uploads/some_image2.png"]

); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T07:36:55.880

看起来您的网络服务器需要能够正确处理 php 文件。确保您的服务器支持 php，安装 php 并且您的服务器配置设置为支持 php 文件。

# php - 使用 curl 获取 mysql 行

> ID：12655129
> 
> 赞同：1
> 
> 时间：2012-09-29T18:01:56.227
> 
> 标签：php, mysql, curl, row

好的，所以我试图通过发布 2 个字段、成员 ID 和密码从远程服务器数据库中获取 mysql 行

```
 if(isset($_GET['uid'])){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, "http://www.mysite.com/get_user_info/index.php");
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POST, true);
    $data = array(
        'member_id' => $_GET['uid'],
        'secret' => 'secret'
    );
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

    $output = curl_exec($ch);
    $info = curl_getinfo($ch);
    curl_close($ch);
} 
```

在远程服务器上 /get_user_info

我有这个

```
 $query = mysql_query("SELECT * FROM user_data WHERE user_id = '$_POST[member_id]'");
    if($query){
        $row = mysql_fetch_row($query);
    }
print_r($row); 
```

所以我试图使用 curl 从 mysql 获取该用户信息行，但我只得到文本

那么我怎样才能获得可用的 php 数组，所以我可以这样做`<?php echo $output['name']; ?>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:09:27.143

你可以使用 json

```
echo json_encode( $row ); 
```

并在主脚本中

```
$result=json_decode($output); 
```

并打印使用 `echo $result->name;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T18:04:15.243

在远程服务器上

```
echo serialize( $row ); 
```

在你的第一个脚本中

```
$array = unserialize( $output ); 
```

# spring - 访问项目外的数据库

> ID：12655132
> 
> 赞同：-1
> 
> 时间：2012-09-29T18:02:50.340
> 
> 标签：spring, jpa

我必须在一个项目中有春天。我有一个由带有实体注释的本地实体生成的内部数据库。但我还必须使用 jpa 访问第二个项目数据库 entityManager。我如何配置persistence.xml 和注释。项目已经有 openjpa 来访问本地数据库。我想知道，

1.  我应该将@Entity 用于外部数据库实体吗？

2.  我应该为外部数据库实体放置表吗？

3.  如何防止 openJPA 或 spring
    再次尝试生成表？

4.  我的外部数据库也是由spring, jpa的外部项目生成的。它的表的名称类似于 MYPROJECT_address、
    MYPROJECT_message。我怎样才能告诉我的 access_out_project 那里有带有这些实体的构建表。

到目前为止，我写入了 access_out_project 的 persistence.xml 以对外部数据库进行外部访问：

```
<persistence-unit name="myPU" transaction-type="RESOURCE_LOCAL">
        <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
        <class>pack.EmailAddress</class>
        <class>pack.Message</class>
           <properties>
                <property name="javax.persistence.jdbc.user" value="root" />
                <property name="javax.persistence.jdbc.password" value="root" />
                <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/kepsDb" />
                <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver" />
            </properties>

        </persistence-unit> 
```

但它会尝试生成名称如消息、地址的表。我不知道如何防止它再次生成它们。

但主要问题在上面。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T03:42:38.883

添加这个：

```
 <property name="hibernate.hbm2ddl.auto" value="validate"/> 
```

这将告诉 hibernate 只验证表是否存在。

# ios - iOS 标签栏动态标签

> ID：12655133
> 
> 赞同：5
> 
> 时间：2012-09-29T18:03:05.083
> 
> 标签：ios, uitabbarcontroller

嗨，我正在开发一个使用标签栏的应用程序。如果用户已登录，标签栏应该有 5 个标签，但如果用户已注销，则只有 3 个。我的 MainAppDelegate.m 中有一个`if`语句，如下所示，`"uid"`指示用户是否已登录。

```
UIViewController *popular = [[[PopularViewController alloc] initWithNibName:@"PopularViewController" bundle:nil] autorelease];
UIViewController *upcoming = [[[UpcomingViewController alloc] initWithNibName:@"UpcomingViewController" bundle:nil] autorelease];
UIViewController *account = [[[AccountViewController alloc] initWithNibName:@"AccountViewController" bundle:nil] autorelease];
UIViewController *message = [[[MessageViewController alloc] initWithNibName:@"MessageViewController" bundle:nil] autorelease];
UIViewController *more = [[[MoreViewController alloc] initWithNibName:@"MoreViewController" bundle:nil] autorelease];
self.tabBarController = [[[UITabBarController alloc] init] autorelease];
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
if([prefs objectForKey:@"uid"]){
    self.tabBarController.viewControllers = @[popular, upcoming, account, message, more];
}else{
    self.tabBarController.viewControllers = @[popular, upcoming, more];
}
self.window.rootViewController = self.tabBarController;
[self.window makeKeyAndVisible]; 
```

当用户注销时，我执行以下操作，通过删除帐户和消息将我带到三个选项卡，只有在用户登录时才能看到

```
NSMutableArray *tbViewControllers = [NSMutableArray arrayWithArray:[self.tabBarController viewControllers]];
[tbViewControllers removeObjectAtIndex:2];
[tbViewControllers removeObjectAtIndex:2];
[self.tabBarController setViewControllers:tbViewControllers]; 
```

现在在更多页面上是登录，所以如果他们按下，他们将被带到一个新的视图控制器登录。如果他们成功登录，我会执行以下操作：

返回选项卡视图

```
[[self presentingViewController] dismissModalViewControllerAnimated:YES]; 
```

然后在视图中会出现

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
if([prefs objectForKey:@"uid"]){
  NSMutableArray *tbViewControllers = [NSMutableArray arrayWithArray:[self.tabBarController viewControllers]];
  [tbViewControllers removeObjectAtIndex:2];
  UIViewController *account = [[[AccountViewController alloc] initWithNibName:@"AccountViewController" bundle:nil] autorelease];
  UIViewController *message = [[[MessageViewController alloc] initWithNibName:@"MessageViewController" bundle:nil] autorelease];
  UIViewController *more = [[[MoreViewController alloc] initWithNibName:@"MoreViewController" bundle:nil] autorelease];
  [tbViewControllers addObject:account];
  [tbViewControllers addObject:message];
  [tbViewControllers addObject:more];
  [self.tabBarController setViewControllers:tbViewControllers];
} 
```

问题是它们已经在更多页面上，因此删除索引 2 处的对象正在删除更多页面，从而导致应用程序崩溃，即使我看到 5 个选项卡在崩溃之前显示。所以我的问题是如何在不删除更多选项卡的情况下将两个选项卡添加到中间？

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T17:28:51.330

如果您查看[此链接](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/TabBarControllers.html)，您可以找到似乎是解决您的问题的正确途径的示例代码（在“运行时管理选项卡”下）。这是来自您需要的给定链接的信息，为简单起见在此处提供：

> ...一种删除当前选定选项卡以响应在同一选项卡中的特定按钮中的点击的方法。此方法由选项卡的视图控制器实现。如果您想删除不再需要的选项卡，您可以在自己的代码中使用类似的东西。例如，您可以使用它来删除包含一些只需要输入一次的用户特定数据的选项卡。

```
- (IBAction)processUserInformation:(id)sender
{
   // Call some app-specific method to validate the user data.
   // If the custom method returns YES, remove the tab.
   if ([self userDataIsValid])
   {
      NSMutableArray* newArray = [NSMutableArray arrayWithArray:self.tabBarController.viewControllers];
      [newArray removeObject:self];

      [self.tabBarController setViewControllers:newArray animated:YES];
   }
} 
```

还要注意（只是为了答案的完整性）：

> ...如果您以用户可能看到的方式添加或删除选项卡，您可以使用 setViewControllers:animated: 方法为选项卡更改设置动画。

因此，考虑到这一点，您可以创建登录视图控制器并将其添加到选项卡栏控制器。然后以编程方式选择该登录选项卡（并隐藏选项卡栏本身），最后使用诸如呈现的方法添加/删除您需要的选项卡并从其自己的视图控制器中删除登录选项卡本身（如代码所示）。

希望能帮助到你 ;）

ps 我还没有在代码中验证过这个......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T19:30:40.293

好吧，我最终将代码移动到第一个选项卡中的 viewWillAppear ，然后当我需要删除选项卡时，我设置所需的变量并以编程方式跳转到第一个选项卡，然后根据需要进行设置，然后以编程方式返回最后一个标签甚至没有实际显示在手机上。

似乎有点骇人听闻，但它有效我会保持这个问题开放，但现在看看是否有更好的选择，我确定有

# mysql - 使用 MySQL Workbench 将 MS SQL 迁移到 MySQL 会导致权限错误

> ID：12655134
> 
> 赞同：3
> 
> 时间：2012-09-29T18:03:11.530
> 
> 标签：mysql, mysql-workbench, database-migration

我整天都在做这个，现在我被困住了，所以希望有人可以帮助我:)

挑战。

将数据从 MS SQL 迁移到 MySQL。

我收到的 MS SQL 作为 bak 文件，我在装有 Windows 7 家庭版的 PC 上使用 SQL Server Management Studio 恢复了该文件。

我在网络服务器上创建了一个源 MySQL 数据库，运行 LAMP。

解决方案（也许）我目前正在尝试转换数据库，最初只是一个用于测试的表，使用 MySQL Workbench 和 database->migrate 向导，但现在我被困在 Bulk Data Transfer 中。我希望这一步能够在我的 MySQL 数据库中创建表并传输数据，但这永远不会发生。

对于源，我选择 Connection Method = ODBC (native) 连接到源数据库和目标数据库没有问题

我选择将架构信息保留为表前缀，因此导入的表如下所示：database.dbo_table_name

迁移步骤成功（迁移选定对象并生成 SQL 创建语句）

如果我不编辑它们，则 Create 语句看起来像这样 CREATE TABLE IF NOT EXISTS 'restored_database_name'.'dbo_table_name' ...我认为 'restored_database_name' 部分会导致权限错误。如果我直接在 phpMyAdmin 中的 SQL 选项卡中键入它，它会执行此操作。因此，我将其更改为： CREATE TABLE IF NOT EXISTS 'dbo_table_name' ...

同样默认情况下，这是 SQL 的一部分： DROP SCHEMA IF EXISTS 'restored_database_name'; CREATE SCHEMA IF NOT EXISTS 'restored_database_name ... 我认为这也会导致一些权限问题，所以我将这些注释掉了。

在下一步中，我取消选中“在目标 RDBMS 中创建模式”，因为我认为我不想要这个。

问题：接下来的步骤没有什么有趣的，但是在“批量数据传输”中我收到了这个错误：错误：'restored_database_name'。'dbo_database_name'：mysql_stmt_prepare：SELECT 命令拒绝用户 'mysql_user_name'@host' 用于表 'dbo_database_table_name。已完成复制 0 行。

我认为该错误与目标数据库的权限有关。我想知道是否可以制作 sql 文件，不仅可以使用 create table 命令，还可以使用 INSERT 命令，这样我就可以使用 sql 并使用命令行或 phpmyadmin 导入它。

我正在使用 Workbench 5.2 CE

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T22:49:30.713

我看到您已进入 Workbench 的迁移向导。也许您只是遗漏了一些东西，所以我建议您查看此博客，以便验证您的步骤：[操作方法：使用 MySQL Workbench 从 Microsoft SQL Server 迁移数据库的指南](http://mysqlworkbench.org/?p=1350)。

不幸的是，您不能使用迁移向导数据复制命令行实用程序来生成包含所有插入的 SQL 文件，但我很确定您可以从 MS SQL Server Management Studio 获得它，并且它应该几乎适用于 MySQL 而无需修改（或稍作修改）。

# php - 在windows上安装phpunit

> ID：12655136
> 
> 赞同：41
> 
> 时间：2012-09-29T18:03:21.623
> 
> 标签：php, windows, installation, phpunit

如何安装phpunit？

我阅读了文档[https://github.com/sebastianbergmann/phpunit](https://github.com/sebastianbergmann/phpunit)，但有一个错误：

```
>pear upgrade PEAR
Nothing to upgrade

>pear config-set auto_discover 1
config-set succeeded

>pear install pear.phpunit.de/PHPUnit
No releases available for package "pear.phpunit.de/PHPUnit"
install failed 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-09-29T18:06:44.253

请尝试以下说明：

1.  在命令提示符下，通过运行切换到您安装 PHP 的目录`cd C:\php\`
2.  然后通过运行安装 PEAR`php go-pear.phar`
3.  当它询问您“您是在安装系统范围的 PEAR 还是本地副本？”时，按 Enter 接受默认设置。</li>
4.  再次按 Enter 接受文件布局。
5.  按 Enter 完成。
6.  运行以下命令（它们可能需要一段时间才能更新，请耐心等待）：
    *   `pear channel-update pear.php.net`
    *   `pear upgrade-all`
    *   `pear channel-discover pear.phpunit.de`
    *   `pear channel-discover components.ez.no`
    *   `pear channel-discover pear.symfony-project.com`
    *   `pear update-channels`
7.  清除您的梨缓存`pear clear-cache`
8.  要安装 PHPUnit，运行`pear install --alldeps --force phpunit/PHPUnit`
9.  要测试 PHPUnit 是否已成功安装，请运行`phpunit -v`

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2014-07-22T14:56:11.957

**旧答案（2014）**：据说 phpunit 自 2014 年 12 月起将无法通过 PEAR 使用。因此使用[composer](https://getcomposer.org/Composer-Setup.exe)
安装它很容易：

```
composer global require "phpunit/phpunit=4.1.*" 
```

**2019 年更新**：它应该安装为本地（用于您的项目）开发包：

```
 composer require --dev phpunit/phpunit ^8 
```

**2020 年更新**：它应该作为本地（用于您的项目）开发包安装： ***composer require --dev phpunit/phpunit ^9.3***

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-10-10T11:07:36.533

正如@Wilt 所说，通过梨安装不再起作用。请按照以下步骤操作

**第一步：在C盘创建一个名为bin的目录。**

**第二步：现在将路径 C:\bin 添加到您的环境中。**

*   为此，请单击 Windows 图标并右键单击计算机，然后选择属性。
*   然后点击高级系统设置 -> 高级 -> 环境变量。
*   在系统变量部分向下滚动并选择变量列值为路径的行。单击编辑。
*   现在在末尾添加（附加在末尾）`;C:\bin`。

**第三步：下载 phpunit phar 文件到 C:\bin 文件夹。**

*   如果您是 PHP 7，请从 https://phar.phpunit.de/phpunit-6.2.phar 下载 phar 文件。否则，如果您使用的是 PHP 5.6，请从 https://phar.phpunit.de/phpunit-5.7.phar 下载 phar 文件。
*   下载后重命名文件`phpunit.phar`并将其移动到 C:\bin 文件夹。

**第四步：创建一个批处理脚本 phpunit.cmd**

*   打开命令提示符。键入 cd C:\bin 并回车。

*   然后输入 `echo @php "%~dp0phpunit.phar" %* > phpunit.cmd`并回车。

要验证 PHPUnit 是否已安装，请输入`phpunit --version`命令提示符。你应该得到类似的东西`PHPUnit x.y.z by Sebastian Bergmann and contributors`。

参考：[https ://perials.com/installing-phpunit-windows/](https://perials.com/installing-phpunit-windows/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-04T12:19:38.210

我使用 Windows XP。

我浪费了很多时间尝试使用 pear（使 MakeGood 与 Eclipse IDE 一起工作的被禁止的方法），只是发现 phpunit 的存储库不再可用。此信息应靠近此页面的顶部，以免人们也浪费时间。

[我通过https://phpunit.de/](https://phpunit.de/)上的下载并按照随附的说明安装了 phpunit 。通过将命令文件的路径添加到 PATH，我现在可以从命令行运行 phpunit。然而，我还没有在 MakeGood/Eclipse 中运行 phpunit。这方面的大部分信息都已经过时了，因为它需要梨。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-27T17:23:29.207

在适用于 Linux 的 Windows 子系统 (wsl) 中试试这个：

```
sudo apt install phpunit 
```

# php - php - 字符串替换

> ID：12655140
> 
> 赞同：0
> 
> 时间：2012-09-29T18:03:58.363
> 
> 标签：php

我正在尝试在 PHP 中进行和弦换位，弦值数组如下...

```
$chords1 = array('C','C#','D','D#','E','F','F#','G','G#','A','A#','B','C','Db','D','Eb','E','F','Gb','G','Ab','A','Bb','B','C'); 
```

一个例子是**D6/F#**。我想匹配数组值，然后将其转置为数组中给定的数字位置。这是我到目前为止...

```
function splitChord($chord){ // The chord comes into the function
    preg_match_all("/C#|D#|F#|G#|A#|Db|Eb|Gb|Ab|Bb|C|D|E|F|G|A|B/", $chord, $notes); // match the item
    $notes = $notes[0];
    $newArray = array();
    foreach($notes as $note){ // for each found item as a note
        $note = switchNotes($note); // switch the not out
        array_push($newArray, $note); // and push it into the new array
    }
    $chord = str_replace($notes, $newArray, $chord); // then string replace the chord with the new notes available
    return($chord);
}
function switchNotes($note){
    $chords1 = array('C','C#','D','D#','E','F','F#','G','G#','A','A#','B','C','Db','D','Eb','E','F','Gb','G','Ab','A','Bb','B','C');

    $search = array_search($note, $chords1);////////////////Search the array position D=2 & F#=6
    $note = $chords1[$search + 4];///////////////////////then make the new position add 4 = F# and A#
    return($note);
} 
```

这行得通，除了问题是，如果我使用像**(D6/F#)**这样的分裂和弦，则和弦被移调到 A#6/A#。它将第一个音符 (D) 替换为 (F#)，然后将两个 (F#'s) 替换为 (A#)。

问题是......我怎样才能防止这种冗余发生。所需的输出将是**F#6/A#**。感谢您的帮助。如果解决方案已发布，我会将其标记为已回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:34:35.823

便宜的建议：进入自然数域 [ `[0-11]`] 并仅在显示时将它们与相应的注释相关联，它将为您节省很多时间。

唯一的问题是同音异音[例如升C/降D]，但希望你能从音调中推断出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T18:35:11.117

您可以使用 preg_replace_callback 函数

```
function transposeNoteCallback($match) {
    $chords = array('C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B', 'C', 'Db', 'D', 'Eb', 'E', 'F', 'Gb', 'G', 'Ab', 'A', 'Bb', 'B', 'C');
    $pos = array_search($match[0], $chords) + 4;
    if ($pos >= count($chords)) {
        $pos = $pos - count($chords);
    }
    return $chords[$pos];
}

function transposeNote($noteStr) {
    return preg_replace_callback("/C#|D#|F#|G#|A#|Db|Eb|Gb|Ab|Bb|C|D|E|F|G|A|B/", 'transposeNoteCallback', $noteStr);
} 
```

测试

echo transposeNote("Eb6 Bb B Ab D6/F#");

返回

G6 C# Eb CF#6/A#

# javascript - 当onclick（）带有shift键时，如何使用js提交（）表单而不在新窗口中打开它？

> ID：12655142
> 
> 赞同：0
> 
> 时间：2012-09-29T18:04:06.373
> 
> 标签：javascript, forms, submit

我/正在尝试在 iframe“frameTarget”中提交表单 我有这样的表单

```
<Form name="FEdit" method="post" target="frameTarget">
    <input type="hidden" name="edit" value="">
</Form> 
```

页面某处是一个按钮

```
<button onclick="DoSmth()">edit</button> 
```

我有一个js代码，提交这个表单

```
function DoSmth(){
    document.FEdit.submit();
    //setTimeout("document.FEditStarter.submit()",1000); //same result =(
} 
```

问题是，当我在按下 SHIFT 键的情况下单击此按钮时，此表单会在新窗口中打开，而不是在名为“frameTarget”的 iframe 中。

怎么办才能不在新窗口中打开它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T11:28:52.157

好的，回答我自己=）

```
if(!event.shiftKey){
//then do submit()
}else{
//do smth else (warn about new window, for example)
} 
```

（当然，如果没有办法将 shiftKey 事件切换到浏览器的“false”状态）

# c++ - C ++中的“未解决的包含”错误

> ID：12655149
> 
> 赞同：0
> 
> 时间：2012-09-29T18:04:36.710
> 
> 标签：c++, eclipse, compiler-construction, mingw, inclusion

我是使用 Eclipse 的新 C++ 程序员。Eclipse 似乎可以识别 C++：它让我创建了一个新的 C++ 项目并理解了语法。但是，每当我尝试 #include 任何内容时，都会收到“未解决的包含”错误。

我已经安装了 CDT。我也刚刚安装了 MinGW 和 MySys 并正确设置了路径变量。

不过，Eclipse 似乎仍然缺少一些东西——当我右键单击我的项目并转到“属性 -> C/C++ 构建 -> 设置”时，我可以访问的只有“二进制解析器”和“错误解析器”选项卡。窗口应该是这样的......

![设置窗口](../Images/454d92175cd3945822beb96a07381691.png)

...但我看不到工具设置、构建步骤或构建工件选项卡。

到目前为止，这就是我的所有研究。接下来我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T19:22:28.200

与构建过程相关的屏幕截图设置。对于正确的工作编辑器（自动完成，包括），您需要在 C/C++ 常规/路径和符号中设置相同的目录，包括 GNU C++。此外，如果在创建项目时选择 mingw 工具链，如果路径变量包含 g++ ecplise 的 dir 应该已经准备好配置。

**更新评论** ![Eclipse C++ 包含设置](../Images/c86ca5782b7baa2277a90f156d2665de.png)

# html - 固定页眉不服从页面宽度

> ID：12655152
> 
> 赞同：1
> 
> 时间：2012-09-29T18:04:45.787
> 
> 标签：html, css

我正在为响应式网站构建框架，该网站在页面的左右两侧都有固定的标题和 25px 的填充。我没有遇到任何内容的填充或宽度问题，但是当显示太小时，固定标题会从浏览器的右侧跑出。我希望标题遵守与页面其余部分相同的规则和设计，并且始终显示 25px 填充，除非显示比我的最小宽度窄。

任何帮助，将不胜感激。这看起来很简单，但我正在拔头发。

**CSS：**

```
#main {
    padding: 0 0px 0 25px;
    min-width: 725px;
    max-width: 1000px;
    margin: 0 auto;
}

#page {
    padding: 0 25px 0 25px;
    display: block;
    margin: 0 auto;
    max-width: 1000px;
    min-width: 725px;
    position: relative;
}

ul#header-nav {
    margin: 33px 0px 0 0px;
    list-style:none;
    width:500px;
    font-family: "ss-bol", Helvetica, Arial, sans-serif;
    overflow: hidden;
}

ul#header-nav li a {
    text-decoration:none;
    padding-left: 30px;
    color:#000000;
    float:left;
    text-align: right;
    display:inline;
}

#container {
    padding-top: 100px;
    left: 0;
    height: 100%;
}

#header-main {
width: 100%;
margin: 0 -25px 0 0px;
}

#header-frame {
z-index: 10;
    background-color: #c9dcb1;
    float: right;
}

#header-box {
    width: 100%;
    max-width: 1000px;
    min-width: 725px;
    padding-left: -25px;
    height: 100px;
    background-color: #ffffff;
    margin:0px;
    position: fixed;
    background-color: #c9dcb1;
z-index: 11;
}

#content {
padding-top: 100px;
width: 100%;
background-color: #75efe8;
} 
```

**HTML：**

```
<body>
    <!-- BeginHeader -->
    <div id="page" class="clearfix heed">
        <div id="header-main">
        <div id="header-box">
            <div id="header-frame">
                <ul id="header-nav">
                    <li><a href="#">NEW</a></li>
                    <li><a href="#">SHOP</a></li>
                    <li><a href="#">WINE</a></li>
                    <li><a href="#">BLOG</a></li>
                    <li><a href="#">LOOKBOOK</a></li>
                    <li><a href="#">ABOUT</a></li>
                </ul> 
            </div>
        </div>
    </div>
        <div id="content">
            TEST CONTENT TEXT
        </div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T18:12:31.413

填充、边距和边框被添加到元素的 with 中。因此，当您的显示很小时，通过告诉`max-width: 1000px`，您暗示 1050px 因为填充。

简单的解决方案是将`width: 100%`左右设置替换为 0，并将您的内部内容居中。

```
<div id="header-box">
    <div class="inner">header</div>
</div>

#header-box {
    max-width: 1000px;
    min-width: 725px;
    position: fixed;
    left: 0;
    right: 0;
    top: 0;
}
#header-box .inner {
    max-width: 1000px;
    margin: 0 auto;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-30T23:20:03.897

西蒙，我采用了您方法的基础知识并对其进行了扩展以获得我需要的东西。

这是最终的 CSS：

```
#header-wrapper {
    padding: 0;
    margin: 0;
}

#header {
    position: fixed;
    width: 100%;
    min-width: 800px;
    height: 100px;
    z-index: 9;
    background-color: #ffffff;
}

#header .inner {
    margin: 0 auto;
    padding: 0 25px 0 25px;
    max-width: 1000px;
    height: 100px;
    z-index: 10;
    background-color: #ffffff;
}

ul#header-nav {
    margin: 58px -20px 0 0px;
    list-style: none;
    width: 500px;
    font-family: "ss-bol", Helvetica, Arial, sans-serif;
    font-size: 14px;
    overflow: hidden;
}

ul#header-nav li a {
    text-decoration: none;
    padding-left: 30px;
    color: #000000;
    float: left;
    text-align: right;
    display: inline;
} 
```

和 HTML：

```
<div id="header-wrapper">
<div id="header">
    <div class="inner">
        <div class="right">
        <ul id="header-nav">
        <li><a href="#">NEW</a></li>
        <li><a href="#">SHOP</a></li>
        <li><a href="#">WINE</a></li>
        <li><a href="#">BLOG</a></li>
        <li><a href="#">LOOKBOOK</a></li>
        <li><a href="#">ABOUT</a></li>
        </ul>
        </div>
    </div>
</div> 
```

再次感谢！

# python - Jinja2 for 循环条件

> ID：12655155
> 
> 赞同：12
> 
> 时间：2012-09-29T18:05:29.797
> 
> 标签：python, google-app-engine, jinja2

我有一个类似于的数据结构

```
data = {{'value': 1, 'state': False},
        {'value': 2, 'state': True}} 
```

状态和价值将根据外部条件发生变化的地方。

我想使用 Jinja2 for ... else 循环条件，比如

```
{% for item in data where item.state == True %}
   {{ item.value }}
{% else %}
   no true items
{% endfor %} 
```

我在多个地方使用数据结构，有时都需要显示。我只想保留一个结构的副本，并让 Jinja2 模板负责显示 state == True 的项目或没有任何项目的消息，而不必对其进行预处理Python 在将其提供给模板或将结构拆分为多个部分之前。

这是在带有 Python 2.7 和 Jinja2 2.6 的 Google App Engine 上运行的，数据结构由 memcache 支持。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-29T19:11:50.987

这是你要找的：

```
 {% for item in data if item.status %}
   {{ item.value }}
 {% else %}
   no true items
 {% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T23:29:50.913

我建议您查看[从 Jinja2 中的宏内部访问全局属性](https://stackoverflow.com/questions/5034437/accessing-global-attributes-from-inside-a-macro-in-jinja2)，如果您使用的是 Flask，您可以查看[模板上下文处理器](http://flask.pocoo.org/docs/templating/#context-processors)。对于它的价值，我所做的（在 Flask 中）是创建作为应用程序实例一部分的实例变量；我不明白为什么你不能对 Jinja2 环境做同样的事情。换句话说，将您的字典添加到 Jinja2 的环境中，并验证需要什么（如果有的话）使其在模板中可用。

# javascript - javascript - dojo 1.8 tabcontainer 未完全呈现

> ID：12655163
> 
> 赞同：0
> 
> 时间：2012-09-29T18:06:10.810
> 
> 标签：javascript, dojo

作为一名编程学生，我一直在尝试通过 Dojo 来熟悉一个 javascript 项目。在我的 jsfiddle 中：http: [//jsfiddle.net/brennonbrimhall/BdpFm/3/](http://jsfiddle.net/brennonbrimhall/BdpFm/3/)，我复制了其他几个 dijit 小部件的示例，但我无法解析选项卡。在我看来，与此处的示例相比，它只渲染了一半：http: [//dojotoolkit.org/reference-guide/1.8/dijit/layout/TabContainer.html](http://dojotoolkit.org/reference-guide/1.8/dijit/layout/TabContainer.html)

我犯了什么明显的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T19:36:45.603

使用与框架版本等效的样式表。

有关 CSS 样式表路径，请参阅选项卡“托管资源”

[http://jsfiddle.net/BdpFm/4/](http://jsfiddle.net/BdpFm/4/)

# c# - 测试资源管理器未显示带有网络驱动器的单元测试列表

> ID：12655187
> 
> 赞同：4
> 
> 时间：2012-09-29T18:09:39.600
> 
> 标签：c#, visual-studio, unit-testing, network-drive, vs-unit-testing-framework

我有一个简单的 C# 程序，它有一组单元测试。这是在 Visual Studio 2010 上开发的。现在在另一台计算机上，我尝试使用 Visual Studio 2012 重新加载此解决方案并运行测试。我能够成功地重建解决方案，但是没有单元测试出现在测试资源管理器中。Visual Studio 项目（解决方案）位于 LaCie 以太网网络驱动器上。我将整个解决方案复制到本地 C: 驱动器，从网络驱动器关闭解决方案并在本地 C: 驱动器上重新打开复制的解决方案。现在，当我构建解决方案时，Test Explorer 会显示所有测试。我回去打开网络驱动器上的副本，测试资源管理器再次显示没有测试。它说要构建解决方案以查看测试列表，但是在成功构建包含主项目和单元测试项目的解决方案后，它仍然显示相同的消息。见下图： ![在此处输入图像描述](../Images/b62e1b1f49c15d67887fedcfd7c6074a.png)

为什么项目位于网络驱动器上会导致单元测试像这样失败而根本没有失败消息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-17T15:33:11.983

我们终于使用以下命令让它在网络共享上工作：

```
setx COMPLUS_LoadFromRemoteSources 1

caspol -m -ag 1.2 -url file://<path>* FullTrust 
```

例如，如果路径是`\\computer\share\`，那么第二个命令将是：

```
caspol -m -ag 1.2 -url file://\\computer\share\* FullTrust 
```

（注意路径末尾的星号）

先关闭VS，运行命令，重启VS。这对我有用，而无需清理/构建我的项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T18:18:16.100

重建应用程序的所有项目，包括任何包含测试类和测试方法的项目。它们将出现在测试资源管理器中。

或者

尝试将 async void 更改为 async 任务。

喜欢

```
[TestMethod]
public async Task<Customers> GetCustomers()
{
    var result = await ...
} 
```

参考：[单元测试资源管理器不显示 Metro 应用程序的异步单元测试](https://stackoverflow.com/questions/11063108/unit-test-explorer-does-not-show-up-async-unit-tests-for-metro-apps)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-25T16:29:11.493

解决方案其实只是 Gary 的前半部分：

```
setx COMPLUS_LoadFromRemoteSources 1 
```

更多阅读：[http ://connect.microsoft.com/VisualStudio/feedback/details/502353/running-unit-tests-from-network-drive](http://connect.microsoft.com/VisualStudio/feedback/details/502353/running-unit-tests-from-network-drive)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-14T20:00:17.713

`.Net 5`您需要将命令添加到命令`test`列表`project.json`中。

```
 "commands": {
    "web": "Microsoft.AspNet.Server.Kestrel --server.urls=http://localhost:5000",
    "test": "xunit.runner.dnx"
  }, 
```

# android - onPause() 代码的问题

> ID：12655194
> 
> 赞同：0
> 
> 时间：2012-09-29T18:11:19.377
> 
> 标签：android

这是img：http: [//i.stack.imgur.com/pTbN8.png](http://i.stack.imgur.com/pTbN8.png)

对头痛感到抱歉:)所以我尝试在onPause代码中执行此操作。我认为做空的方法，我也得到了红线，我真的很抱歉我的垃圾邮件家伙。谢谢！

***我想在单击主页按钮时暂停应用程序，因为现在当单击主页按钮时，闪光灯声音仍在后台运行。***

这是这个问题的图片：http: [//i.stack.imgur.com/pTbN8.png](http://i.stack.imgur.com/pTbN8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:21:11.410

看起来您尝试调用的方法不存在，或者您没有以正确的方式调用它。您可能想做这个答案中解释的事情：[https ://stackoverflow.com/a/6230902/88851](https://stackoverflow.com/a/6230902/88851)

因此，您应该将此代码复制粘贴到您的`onPause()`和`onResume()`方法中，根据需要重命名要调用的方法，或者编写一个`callHiddenWebViewMethod()`执行私有方法调用的方法。

# algorithm - 为什么线性函数的复杂度与二次方程的复杂度相同

> ID：12655196
> 
> 赞同：4
> 
> 时间：2012-09-29T18:11:50.033
> 
> 标签：algorithm, complexity-theory, time-complexity

我正在学习算法。所以，我带来了一些非常有趣的东西。

`(a*n)+b`线性方程 ( )的渐近界是`O(n^2)`.. 对于所有**`a>0.`**

这与不那么令人惊讶的相同..`a* n^2 + b* n + c`

为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T18:14:54.010

因为[big-oh](http://en.wikipedia.org/wiki/Big_O_notation)给了你一个上限。你的第一个功能也是`O(n^3), O(n^4), O(n^2012)`等等。

big-oh 的定义基本上是说，`f(n) is O(g(n))`如果存在一些`k`这样的东西，那么`n > k`我们有`g(n) > f(n)`。

研究big [-theta](http://en.wikipedia.org/wiki/Big_theta#Family_of_Bachmann.E2.80.93Landau_notations)以获得更强/更紧密的界限。

# javascript - 如何使用 JavaScript 定期检索页面输出并显示给用户？

> ID：12655199
> 
> 赞同：0
> 
> 时间：2012-09-29T18:12:01.387
> 
> 标签：javascript

我是一个 JavaScript 新手，不知道如何做到这一点，所以朝着正确的方向推动（或推动！）真的很棒。

我有一个 HTML 页面，我需要向不断变化的用户显示一些数据。数据只是网页的文本输出。

获取页面输出然后使用 JavaScript 向用户显示该输出的最佳方式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T23:37:08.197

如果您尝试从另一个网页加载内容以显示在您的网页上，我建议您使用 jQuery：

```
$(function() {
    setInterval(function() {
        $.get('url_here', function(res) {
            $('#result').html(res);
        });
    }, 30000);
}); 
```

例如，这会将加载整个 html 响应加载到一个 div`<div id="result"></div>`中，并将每 30 秒（30000 毫秒）执行一次此过程。

如果您只需要显示部分 html 响应，则需要将其解析出来，`res`然后将一行切换为`$('#result').html(myValue);`.

如果您需要服务器推送到客户端而不是客户端从服务器拉取，那么您可能需要不同的解决方案。

# php - 显示 PDF 在我的网站上标记

> ID：12655205
> 
> 赞同：1
> 
> 时间：2012-09-29T18:13:10.827
> 
> 标签：php, pdf, html

我正在开发一个 PHP MySql 网站，其中 pdf 将由站点管理员上传。查看者将获得所有 pdf 文档的列表。

我想要的是：

1.  在我的`<div>`.
2.  任何用户都不能以任何方式下载 PDF。

我尝试了谷歌文档查看器，它只是将 pdf 转换为可以轻松保存的图像。它还提供`View in Full`了一个可以轻松下载 pdf 的选项。

而且当然，

`<div><object data="test.pdf" type="application/pdf" width="300" height="200"></object></div>`

不管用。请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:15:28.530

您可以使用 iframe 将 PDF 嵌入到 div 中，尽管这将依赖于他们在浏览器上启用 PDF 阅读器插件。但是，**无法以不允许用户保存 PDF 的方式向用户显示 PDF**

为了阅读 PDF，他们无论如何都必须在他们的计算机上保存一个 tmp 版本，所以如果他们想要，您根本无法阻止他们拥有副本。

[有多种方法可以让它变得更加困难](https://stackoverflow.com/questions/630139/is-there-any-way-to-keep-users-from-saving-documents-locally)，但仅此而已。Tieson 的解决方案将 PDF 绘制到 HTML5 画布上，这使得非技术用户很难获得原始 PDF，但我只花了大约 2 分钟就找到了 PDF 源并下载了原始文件（即[http://hazaar .funkynerd.com/pdfdoc/get?file=acr5smallpdf_80327_7.pdf](http://hazaar.funkynerd.com/pdfdoc/get?file=acr5smallpdf_80327_7.pdf)）。还有其他类似的使用 java[或 flash](http://www.artfans.info/open-pdf-file-from-flash-using-fscommand/)的方法实际上并不显示 PDF，而是由第三方插件呈现 PDF，这将使其更加困难，但即使这样，用户也可以重新创建使用第三方工具或只是简单的屏幕截图等的 PDF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T18:19:33.000

它并不是真正 100% 可靠/稳定，但在[http://dev.funkynerd.com/projects/jquery-pdfdoc上有一个用于 Mozilla 实验性 PDF.js 的 jQuery 插件](http://dev.funkynerd.com/projects/jquery-pdfdoc)

# php - 纯html上传器

> ID：12655209
> 
> 赞同：0
> 
> 时间：2012-09-29T18:13:34.910
> 
> 标签：php, javascript, html, uploader

html 中是否有任何脚本来上传文件它应该只有 1 个 html 文件（可以包括 js 等）但应该是 1 个文件 .html 没有 php 和文件上传的路径（如果可能）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T19:56:24.720

> html 中是否有任何脚本来上传文件它应该只有 1 个 html 文件（可以包括 js 等）但应该是 1 个文件 .html 没有 php 和文件上传的路径（如果可能）

好吧，您的要求表明您需要在客户端有一个“纯 HTML（和 JS）”网页来处理文件上传。

现在有两个部分..

**在客户端：**

1.  `<input type="file" ... />`我们需要嵌入在标签中的 HTML 标签`<form>`来捕获要上传的文件。

    2.a. 你想如何发送文件..？如果是当用户提交页面时，那么您需要做的就是拥有`<form>`指向位于服务器上的 PHP 页面的 action 属性，以接受发送过来的数据。

    2.b。也许您想异步发送文件（在后台）。那么在这种情况下，您可以使用几个 JQuery AJAX 文件上传插件来为您执行此操作。谷歌可能会出现很多结果。

    > 请注意，在 HTML4 浏览器上，您可以将文件发送到服务器的唯一方法是在提交表单时 - 因此从技术上讲，这里不可能使用单页 AJAX。但是异步文件上传的错觉是通过使用隐藏的 iframe 进行上传来创建的。幸运的是，我们有很棒的插件，比如 Plupload 和 Uploadify，我用过一次。请注意，这些插件还允许您使用不符合您要求的 Flash/Silverlight 上传器。不用说，Silverlight/Flash 允许异步文件上传。

    2.c。HTML5 异步文件上传：基本上 HTML5 通过在内存中缓存文件来替换 Flash/Silverlight，然后我们使用 JQuery 使用 AJAX 发送它。

    几个月前我发现这个 tut 很好地解释了这一点:)：http: [//tutorialzine.com/2011/09/html5-file-upload-jquery-php/](http://tutorialzine.com/2011/09/html5-file-upload-jquery-php/)

**最后在服务器端：**

1.  在这里，您将有一个基本的 PHP 脚本，它将从变量中读取文件的二进制数据`$_FILES['<name of input file tag in the form>']`

希望这可以帮助！嘿，请让我知道您最终是如何决定继续进行此操作的。

一切顺利！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T18:15:35.040

不，您将需要一个服务器端应用程序处理它（PHP、ASP.NET、CGI 可执行文件等）。对不起

# python - numpy中的一些奇怪的东西

> ID：12655210
> 
> 赞同：2
> 
> 时间：2012-09-29T18:13:48.747
> 
> 标签：python, numpy, linear-algebra

`a`是一个 numpy 数组，`a.T`它是转置的。一旦我添加了`a`and `a.T`as `a += a.T`，就不会得到答案。谁能告诉我为什么？谢谢。

```
import numpy 

a = numpy.ones((100, 100))
a += a.T
a

array([[ 2.,  2.,  2., ...,  2.,  2.,  2.],
       [ 2.,  2.,  2., ...,  2.,  2.,  2.],
       [ 2.,  2.,  2., ...,  2.,  2.,  2.],
       ..., 
       [ 3.,  3.,  3., ...,  2.,  2.,  2.],
       [ 3.,  3.,  3., ...,  2.,  2.,  2.],
       [ 3.,  3.,  3., ...,  2.,  2.,  2.]]) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-29T18:21:56.457

请注意，这`a.T`只是 上的一个视图`a`，这意味着它们拥有相同的数据。现在：

```
 a += a.T 
```

添加`a.T`到位`a`，但在这样做时，会发生变化`a.T`（作为`a.T`相同数据的点）。由于访问的顺序`a`有点复杂，这会失败（并且您不应该相信结果是可重现的，因为它会在您更改`np.setbufsize`.

为了避免这种情况，这两种方法都可以工作，尽管第一个版本对我来说似乎更干净。

```
a = a + a.T
a += a.T.copy() 
```

# c++ - 两个具有共同值的多图的交集

> ID：12655212
> 
> 赞同：0
> 
> 时间：2012-09-29T18:14:20.403
> 
> 标签：c++, stl

```
#include <cstring>
#include <iostream>
#include <map>
#include <iterator>
#include <stdio.h>
#include <algorithm>
#include <stdlib.h>

//using namespace std;

template <class InputIterator1, class InputIterator2, class OutputIterator>

/* templet function to return common elements od two map  */

OutputIterator map_intersection ( InputIterator1 first1, InputIterator1 last1,
                                  InputIterator2 first2, InputIterator2 last2,
                                  OutputIterator result )
{
    while (first1!=last1 && first2!=last2)
    { 
        if (*first1<*first2) ++first1;
        else if (*first2<*first1) ++first2;
        else {  
            const char*abc= new char[15];
            const char*def= new char[15];
            /* Below code inserts the common element in result map */ 
            if(strcmp((first1->second.c_str()),(first2->second.c_str()))==0)
            {                                                                   
                result.insert(std::pair<std::string,std::string>(first1->first,first1->second));
                ++first1;
                ++first2;
            }
            else
            {
                ++first1;
                ++first2;  
            } 
        } 
    }
    return result;
}

using namespace std;

int main()
{
    std::multimap<string, string> m;
    std::multimap<string, string>::iterator it2;
    std::multimap<string, string> intersection;
    std::multimap<string, string> common;
    std::multimap<string, string> it3;

    cout <<"Making Map m "<<endl;
    m.insert(pair< string, string>("1 2"," 22 3" ));
    m.insert(pair< string, string>("1 2"," 21 4" ));
    m.insert(pair< string, string>("2 1"," 31 3" ));

    cout <<"Making Map c "<<endl;
    std::multimap<string, string> c;
    c.insert(pair< string, string>("1 2"," 22 3" ));
    c.insert(pair< string, string>("1 2"," 22 4" ));
    c.insert(pair< string, string>("2 1"," 31 3" ));

    cout << "Elements in common map are: " << endl;
    it3=map_intersection (m.begin(), m.end(), c.begin(), c.end(),common);

    cout << " am i out of the map_intersection loop " << endl;
    cout << " size of common map is : " << it3.size()<< endl;
    for(it2 =it3.begin(); it2!=it3.end();it2++)
    {   
        cout << "first common element is : " << endl;
        cout<< it2->first << " " << it2->second <<"  " << endl;
    }
    getchar();
} 
```

我遇到了一个代码，它找到两个多图的交集，其值分配给不同的多图。我想要一个函数，它只检查两个多图的共同值并将第一个多图的键分配给交集。例如，

```
多图 1：-
1 2 22 3
2 1 31 3   

多图2：-
1 3 22 3
2 1 31 3   

输出：-
2 1 31 3

```

# php - XML-RPC 不工作并在 Bugzilla 中使用函数

> ID：12655214
> 
> 赞同：1
> 
> 时间：2012-09-29T18:14:39.207
> 
> 标签：php, xml, xml-parsing, bugzilla

我正在编写一个程序来从错误中提取评论。所以首先使用 XML-RPC 我试图连接到 Bugzilla 并通过

把[http://bugzilla.yourdomainname.com/xmlrcp.cgi](http://bugzilla.yourdomainname.com/xmlrcp.cgi)

所以这是我的代码....

```
setCookieJar();
    $oClient->setHttpClient($oHttpClient);

    $aResponse = $oClient->call('User.login', array(array(
    '登录'=>'用户名',
    '密码' => '密码',
        '记住' => 1
    ）））；
    //登录bugzilla。

    函数 getInfoBug(int $bugno)
    {
    $aResponse = $oClient->call('Bug.get($bugno)');
    //这只会返回错误号。
    $aResponse = $oClient->call('Bug.get( ids => [$bugno], include_fields => [\'id\', \'comments\'] )');
    //获取有关错误的信息。
    $final = $Client->call('Bug.get(comments($aResponse)');
    //
    返回 $final;
   }

    $错误 = 1379;

    回声 $answer = getInfoBug($bug);
?>

```

所以实际上我并不确定我是否从 Buzilla API 正确调用了该函数，另一个即将出现的问题是

> 警告：require_once(Zend/Loader/Autoloader.php) [function.require-once]：无法打开流：第 6 行的 C:\Zend\Apache2\htdocs\Aakash\bugzilla.php 中没有这样的文件或目录
> 
> 致命错误：require_once() [function.require]：在 C:\Zend\Apache2\ 中打开所需的 'Zend/Loader/Autoloader.php' (include_path='/usr/share/php/libzend-framework-php') 失败htdocs\Aakash\bugzilla.php 在第 6 行

所以我不太确定发生了什么。我只是 PHP 的初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:03:03.727

检查 Zend/Loader/Autoloader.php 是否存在于 PHP 包含目录中，并且为正在运行您的 PHP 脚本的用户正确设置了权限。

# c++ - 取消引用 char 指针会随着它指向的字符串变长而变慢。为什么？

> ID：12655215
> 
> 赞同：5
> 
> 时间：2012-09-29T18:14:48.200
> 
> 标签：c++, performance, pointers

我遇到了一个奇怪的问题：我有以下代码：

```
int matches = 0;
for (int str_id = 0; str_id < STR_COUNT; str_id++) {
    if (test(strings1[str_id], strings2[str_id]) == 0)
        matches++;
} 
```

`test()`它使用该函数比较成对的以空字符结尾的字符串。`strings1`并且是包含相同长度的以空字符结尾的字符串的`strings2`向量。`STR_COUNT`

根据是否取消对其参数的引用，此代码段会根据and`test()`中字符串的长度以恒定时间或线性时间执行。也就是说，如果我使用：`strings1``strings2`

```
int test(char* a, char* b) {
    return (a != b)
} 
```

那么运行时间不取决于存储在strings1和strings2中的字符串的长度。另一方面，如果我使用

```
int test(char* a, char* b) {
    return (*a != *b)
} 
```

`strings1`然后运行时间随着存储在和中的字符串的长度线性增加`strings2`。

为什么会发生这种情况？

**编辑**：这里的问题的完整示例：http: [//pastebin.com/QTPAkP1g](http://pastebin.com/QTPAkP1g)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T17:02:35.743

您正在看到数据局部性的影响。

在您只是比较指针的情况下，该操作仅访问两个向量中的内存。向量连续存储它们的元素，因此每次内存访问的位置都非常接近前一次迭代期间访问的位置。这是一个非常好的地方，缓存对你微笑。

在取消引用指针的情况下，您正在向混合中添加额外的内存访问，因此缓存有更多工作要做，并且效果在很大程度上取决于实现。

从您的数据推断，字符串似乎在内存中打包在一起，因此从一个字符串的开头到下一个字符串的开头的距离取决于字符串的长度。短弦比长弦更紧密地排列在一起。

特别是，您可以将一些非常短的字符串打包到单个缓存行中。发生这种情况时，单个高速缓存行可以服务于多次迭代的内存访问。随着字符串变得更长，它们中的更少的将适合单个高速缓存行，因此高速缓存效率降低。最终，字符串足够长，以至于每个字符串占用一个单独的缓存行，缓存没有任何好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T18:17:14.170

因为在第一种情况下，可以证明只要`strings1 != strings2`，条件永远不会为真。优化编译器可以推断出整个循环永远不会有任何可观察到的副作用，因此它可以优化它以消除它。

考虑`strings[str_id]`等于`strings + str_id * sizeof(*strings)`; 为简单起见，我们假设`sizeof`等于 1（我们可以在不失一般性的情况下这样做）。然后你的情况变成：

```
if (test(strings1 + str_id, strings2 + str_id) == 0) 
```

如果编译器能够内联`test`，第一个版本`test`的代码就会变成

```
if ((strings1 + str_id != strings2 + str_id) == 0) 
```

或（连续简化但等价的形式）

```
if (strings1 + str_id == strings2 + str_id)

if (strings1 == strings2) 
```

因此，由于`strings1 != strings2`（几乎可以肯定是这种情况）并且由于编译器可以假设`strings1`并且`strings2`不会被外部原因修改，它可以简单地跳过整个循环而什么也不做。无所事事是不变的时间。

对于第二个版本，`test`除了实际执行循环并在每次迭代中取消引用指针之外，没有办法知道条件是否为真，因此运行时间变成线性的。

# r - 如何在约束优化中将参数的总和设置为 1

> ID：12655217
> 
> 赞同：6
> 
> 时间：2012-09-29T18:15:11.973
> 
> 标签：r, optimization, constraints

这是代码（对不起，如果它很长，但这是我的第一个例子）；我正在使用`CreditMetrics`A. Wittmann 包中的 CVaR 示例和`DEoptim`求解器进行优化：

```
library(CreditMetrics)
library(DEoptim)

N <- 3
n <- 100000
r <- 0.003
ead <- rep(1/N,N)
rc <- c("AAA", "AA", "A", "BBB", "BB", "B", "CCC", "D")
lgd <- 0.99
rating <- c("BBB", "AA", "B")   
firmnames <- c("firm 1", "firm 2", "firm 3")
alpha <- 0.99

# correlation matrix
rho <- matrix(c(  1, 0.4, 0.6,
                  0.4,   1, 0.5,
                  0.6, 0.5,   1), 3, 3, dimnames = list(firmnames, firmnames),
              byrow = TRUE)

# one year empirical migration matrix from standard&poors website
rc <- c("AAA", "AA", "A", "BBB", "BB", "B", "CCC", "D")
M <- matrix(c(90.81,  8.33,  0.68,  0.06,  0.08,  0.02,  0.01,   0.01,
              0.70, 90.65,  7.79,  0.64,  0.06,  0.13,  0.02,   0.01,
              0.09,  2.27, 91.05,  5.52,  0.74,  0.26,  0.01,   0.06,
              0.02,  0.33,  5.95, 85.93,  5.30,  1.17,  1.12,   0.18,
              0.03,  0.14,  0.67,  7.73, 80.53,  8.84,  1.00,   1.06,
              0.01,  0.11,  0.24,  0.43,  6.48, 83.46,  4.07,   5.20,
              0.21,     0,  0.22,  1.30,  2.38, 11.24, 64.86,  19.79,
              0,     0,     0,     0,     0,     0,     0, 100
)/100, 8, 8, dimnames = list(rc, rc), byrow = TRUE)

cm.CVaR(M, lgd, ead, N, n, r, rho, alpha, rating)

y <- cm.cs(M, lgd)[which(names(cm.cs(M, lgd)) == rating)] 
```

现在我写我的函数......

```
fun <- function(w) {
  # ... 
  - (t(w) %*% y - r) / cm.CVaR(M, lgd, ead = w, N, n, r, 
                           rho, alpha, rating)
} 
```

...我想优化它：

```
DEoptim(fn = fun, lower = rep(0, N), upper = rep(1, N), 
        control = DEoptim.control()) 
```

你能告诉我在优化期间我必须插入`# ...`什么吗？`sum(w) = 1`

下面我根据flodel的tips给大家展示一下优化结果：

```
# The first trick is to include B as large number to force the algorithm to put sum(w) = 1

fun <- function(w) {
  - (t(w) %*% y - r) / cm.CVaR(M, lgd, ead = w, N, n, r, rho, alpha, rating) + 
    abs(10000 * (sum(w) - 1))
}

DEoptim(fn = fun, lower = rep(0, N), upper = rep(1, N), 
        control = DEoptim.control())

$optim$bestval
[1] -0.05326055

$optim$bestmem
par1        par2        par3 
0.005046258 0.000201286 0.994752456

parsB <- c(0.005046258, 0.000201286, 0.994752456)

> fun(parsB)
            [,1]
[1,] -0.05326089 
```

...和...

如您所见，第一个技巧效果更好，因为他找到的结果小于第二个。不幸的是，他似乎需要更长的时间。

```
# The second trick needs you use w <- w / sum(w) in the function itself

fun <- function(w) {
  w <- w / sum(w)
  - (t(w) %*% y - r) / cm.CVaR(M, lgd, ead = w, N, n, r, rho, alpha, rating) #+ 
    #abs(10000 * (sum(w) - 1))
}

DEoptim(fn = fun, lower = rep(0, N), upper = rep(1, N), 
        control = DEoptim.control())

$optim$bestval
[1] -0.0532794

$optim$bestmem
par1         par2         par3 
1.306302e-15 2.586823e-15 9.307001e-01

parsC <- c(1.306302e-15, 2.586823e-15, 9.307001e-01)
parC <- parsC / sum(parsC)

> fun(parC)
           [,1]
[1,] -0.0532794 
```

任何意见？

我应该因为“过于随机”而无法优化功能而增加迭代次数吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-29T18:53:55.857

尝试：

```
w <- w / sum(w) 
```

如果`DEoptim`给你一个最佳解决方案`w*`，`sum(w*) != 1`那么 `w*/sum(w*)`应该是你的最佳解决方案。

另一种方法是解决除一个以外的所有变量。我们知道最后一个变量的值必须`1 - sum(w)`在函数体中，有：

```
w <- c(w, 1-sum(w)) 
```

并对返回的最优解做同样的事情`DEoptim`：`w* <- c(w*, 1-sum(w*))`

这两种解决方案都要求您将问题重新表述为无约束（不计算变量界限）优化，以便`DEoptim`可以使用；`DEoptim`这迫使您在恢复原始问题的解决方案之外做一些额外的工作。

在回复您的评论时，如果您想`DEoptim`立即给您正确的答案（即不需要进行后转换），您还可以尝试在您的目标函数中包含惩罚成本：例如添加`B * abs(sum(w)-1)`where `B`is some absolute数量大所以`sum(w)`会被迫`1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-21T15:14:53.443

我认为您应该对任何偏离其中的行为进行处罚。将术语添加到您的最小化问题中`+(sum(weights) - 1)^2 * 1e10`。你应该看到这个巨大的惩罚将迫使权重总和为 1！

# php - 使用 PHP 的 SOAP 在服务器端修改发送的 XML

> ID：12655219
> 
> 赞同：3
> 
> 时间：2012-09-29T18:15:14.083
> 
> 标签：php, soap, soapserver

一个关于PHP的SoapClient和SoapServer，WSDL模式的问题。

比方说，我需要为 XML 的某个部分创建一个摘要，其中包含其中的数据。使用 SoapClient 很容易。我从类中重载`__doRequest()`方法`SoapClient`，对某些元素进行散列并将其作为元素附加`<Hash></Hash>`在`<SOAP-ENV:Header/>`. 然后我将生成的 XML 发送到 SOAPServer 调用`parent::__doRequest()`。

我需要对响应 XML 做同样的事情。在服务器方面，我遇到了困难。似乎服务器只能将数据作为嵌套数组或对象发送，并且以某种方式插入到客户端的响应 XML 中。我尝试发送带有`SoapServer`' 响应的 XML，然后它返回空 XML。

我真的需要在服务器端解析和修改 XML（制作哈希、数字签名等），但到目前为止，无论我在哪里搜索，我都没有找到答案，所以我真的很感谢你的帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T11:27:33.337

您必须获得一个**没有 XML 声明**的 XML 字符串，并使用 SoapVar 对其进行解析。
有关详细信息，请参阅[how-return-custom-xml-response-in-soapserver-response](https://stackoverflow.com/questions/12736697/how-return-custom-xml-response-in-soapserver-response/12759274#12759274)。

简而言之，就是这样。
您从输入和需要放入其中的任何其他内容构造一个 DOMDocument。`XSLT`是解析和更改 XML 的好方法（有关如何在 php 中使用 xslt 的简单示例，请再次参见上面的链接）。
然后`DOMNode`从`DOMDocument`您希望返回的节点中选择，并`saveXML`使用此节点作为参数应用。这会将所需的 XML 保存为*没有声明*的字符串。没有参数的普通`saveXML()`会将根节点保存为*包含声明*的字符串。因此：

```
$nodes = $dom -> getElementsByTagName ('chooseTheElementYouWishToReturn');
$node = $nodes -> item(0);

$result = new SoapVar ($dom -> saveXML($node), XSD_ANYXML);
return ($result); 
```

当您希望返回根元素时，这当然也适用：

```
$result = new SoapVar ($dom -> saveXML($dom -> documentElement), XSD_ANYXML);
return ($result); 
```

**添加**

我注意到您希望在 SOAP 标头而不是正文中添加一些内容。
这也有点棘手，但可以实现 - 我希望以下内容能满足您的需求。

首先，添加头部细节只能在函数脚本内完成，然后函数必须将服务器变量声明为全局变量，以便引用全局（函数外部）声明的变量，如下所示：

```
<?php   
    class mySOAPclass {
        function xxx ($arg) {
            global $server;

            // your code for the header part
            // example
            $auth = array();
            $auth['UserName'] = 'user';
            $auth['Password'] = 'pw';
            $header = new SoapVar ($auth, SOAP_ENC_OBJECT);
            // end example

            $header = new SoapHeader ('http://schemas.xmlsoap.org/soap/header/', 'credentials', $header, false);
            $server -> addSoapHeader ($header);

            // your code for the body part, assuming it results in a DOM $dom

            $result = new SoapVar ($dom -> saveXML($dom -> documentElement), XSD_ANYXML);

            return ($result);
        }

    ini_set( "soap.wsdl_cache_enabled", "0");
    $server = new SoapServer ("yourOwn.wsdl");
    $server -> setClass ('mySOAPclass');
    $server -> setObject (new mySOAPclass());
    $server -> handle();
?> 
```

请注意，需要`SoapVar`先从数组中构造 a ；如果将数组直接提供给标题，则会得到丑陋的项目/键和项目/值节点。

以上导致以下返回结构：

```
<SOAP-ENV:Envelope 
    xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:ns1="http://schemas.xmlsoap.org/soap/header/">
    <SOAP-ENV:Header>
        <ns1:credentials>
            <UserName>user</UserName>
            <Password>pw</Password>
        </ns1:credentials>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        ...
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

# ruby-on-rails - 如何在助手中使用 form_tag？

> ID：12655221
> 
> 赞同：7
> 
> 时间：2012-09-29T18:15:16.550
> 
> 标签：ruby-on-rails

我有一个用来生成表单的助手。用于生成表单字段的参数被传递到帮助程序中。我不知道如何在模板之外使用该块。

例如：

```
def generate_form(path, fields)
    form_tag(path, method: :get) do
        # what do I do in here?
    end
end 
```

当我在块内渲染部分时，渲染的网页中没有任何内容。如果我将一堆标签（field_tag、text_field_tag 等）连接在一起，那么原始 html 就会出现在页面上。

我正在使用 Rails 3.1.0

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-29T19:32:40.043

Rails 元素助手返回字符串，所以你可以这样做：

```
def generate_form(path, fields)
  s = form_tag(path, method: :get) do
    p = input_tag
    p << submit_tag #(everything will be wrapped in form tag)
    p #returns p from block
  end
  s.html_safe #returns s and avoids html escaping
end 
```

# c# - 你如何通过get；将属性的方法转换为接受 Func 的方法？

> ID：12655225
> 
> 赞同：0
> 
> 时间：2012-09-29T18:15:44.780
> 
> 标签：c#

我有这个：

`public void GetFish(Func<List<Fish>> goFishing) { ... }`

还有这个：

`public List<Fish> getFish { get { return ... } }`

如果第二行实际上是一种方法，我可以这样做

`GetFish(getFish);`

但是因为它是一个属性，所以上面会返回一个错误。

我需要的是这样的：

`GetFish(getFish.Getter)`

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T18:21:30.257

只需将属性包装在 lambda 中：

```
GetFish(() => getFish); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T18:20:56.880

使用匿名 lambda：

```
GetFish(() => { return getFish; }) 
```

# java - Apache Derby - java.sql.SQLException：无法启动数据库

> ID：12655227
> 
> 赞同：7
> 
> 时间：2012-09-29T18:16:07.593
> 
> 标签：java, netbeans, jdbc, derby

首先，这是我第一次使用 Apache Derby。我正在使用 netbeans，愿意使用嵌入式 apache derby，并按照以下教程配置和安装数据库。然后，我使用项目属性将 derby.jar 文件附加到我的项目中。

[http://netbeans.org/kb/docs/ide/java-db.html#starting](http://netbeans.org/kb/docs/ide/java-db.html#starting)

附图将在 netbeans 中显示我的数据库状态 ![在此处输入图像描述](../Images/df0590916f94e0df097d2ac76c9f61d2.png)

我的数据库名称是“联系人”。表名是“朋友”。

以下是我的测试代码

```
**DatabaseConnector.java**

import java.sql.*;

public class DataBaseConnector
{
    private Connection con;

    public DataBaseConnector()
    {

    }

    private void createConnection()
    {
        try
        {
            Class.forName("org.apache.derby.jdbc.EmbeddedDriver");
            con = DriverManager.getConnection("jdbc:derby:C:/Users/yohan/.netbeans-derby/contact","yohan","xyz");
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }

    private void closeConnection()
    {
        try
        {
            con.close();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }

    public void insertData(int id, String firstName, String lastName)
    {
        createConnection();
        try
        {
            PreparedStatement ps = con.prepareStatement("insert into FRIENDS values(?,?,?)");
            ps.setInt(1, id);
            ps.setString(1, firstName);
            ps.setString(2, lastName);

            int result = ps.executeUpdate();

            if(result>0)
            {
                System.out.println("Data Inserted");
            }
            else
            {
                System.out.println("Something happened");
            }
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
        finally
        {
            closeConnection();
        }
    }

} 
```

**数据库UI.java**

```
import java.awt.event.*;
import javax.swing.*;
import java.awt.*;

public class DatabaseUI extends JFrame
{
    private JLabel firstName, id, lastName;
    private JTextField idTxt, firstNameTxt, lastNameTxt;
    private JButton ok;

    public DatabaseUI()
    {
     firstName = new JLabel("First Name: ");
     lastName = new JLabel("Last Name: ");
     id = new JLabel("ID: ");

     firstNameTxt = new JTextField(10);
     lastNameTxt = new JTextField(10);
     idTxt = new JTextField(10);

     ok = new JButton("OK");
     ok.addActionListener(new OKAction());

     JPanel centerPanel = new JPanel();
     centerPanel.setLayout(new GridLayout(4,2));
     centerPanel.add(id);
     centerPanel.add(idTxt);
     centerPanel.add(firstName);
     centerPanel.add(firstNameTxt);
     centerPanel.add(lastName);
     centerPanel.add(lastNameTxt);
     centerPanel.add(new JPanel());
     centerPanel.add(ok);

     getContentPane().add(centerPanel,"Center");

     this.pack();
     this.setVisible(true);

    }

    private class OKAction implements ActionListener
    {
        public void actionPerformed(ActionEvent ae)
        {
            DataBaseConnector db = new DataBaseConnector();

            int id = Integer.parseInt(idTxt.getText());

            db.insertData(id, firstNameTxt.getText().trim(), lastNameTxt.getText().trim());
        }
    }

    public static void main(String[]args)
    {
        new DatabaseUI();
    }
} 
```

但是，当我尝试将数据插入数据库时​​，它给了我以下错误

```
run:
java.sql.SQLException: Failed to start database 'C:/Users/yohan/.netbeans-derby/contact' with class loader sun.misc.Launcher$AppClassLoader@1050169, see the next exception for details.
    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.Util.seeNextException(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedConnection.<init>(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedConnection30.<init>(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedConnection40.<init>(Unknown Source)
    at org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Unknown Source)
    at org.apache.derby.jdbc.InternalDriver.connect(Unknown Source)
    at org.apache.derby.jdbc.AutoloadedDriver.connect(Unknown Source)
    at java.sql.DriverManager.getConnection(DriverManager.java:579)
    at java.sql.DriverManager.getConnection(DriverManager.java:221)
    at DataBaseConnector.createConnection(DataBaseConnector.java:17)
    at DataBaseConnector.insertData(DataBaseConnector.java:40)
    at DatabaseUI$OKAction.actionPerformed(DatabaseUI.java:53)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6504)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6269)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4860)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
Caused by: java.sql.SQLException: Failed to start database 'C:/Users/yohan/.netbeans-derby/contact' with class loader sun.misc.Launcher$AppClassLoader@1050169, see the next exception for details.
    at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source)
    ... 51 more
Caused by: java.sql.SQLException: Another instance of Derby may have already booted the database C:\Users\yohan\.netbeans-derby\contact.
    at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source)
    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
    ... 48 more
Caused by: ERROR XSDB6: Another instance of Derby may have already booted the database C:\Users\yohan\.netbeans-derby\contact.
    at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
    at org.apache.derby.impl.store.raw.data.BaseDataFileFactory.privGetJBMSLockOnDB(Unknown Source)
    at org.apache.derby.impl.store.raw.data.BaseDataFileFactory.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.apache.derby.impl.store.raw.data.BaseDataFileFactory.getJBMSLockOnDB(Unknown Source)
    at org.apache.derby.impl.store.raw.data.BaseDataFileFactory.boot(Unknown Source)
    at org.apache.derby.impl.services.monitor.BaseMonitor.boot(Unknown Source)
    at org.apache.derby.impl.services.monitor.TopService.bootModule(Unknown Source)
    at org.apache.derby.impl.services.monitor.BaseMonitor.startModule(Unknown Source)
    at org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Unknown Source)
    at org.apache.derby.impl.store.raw.RawStore.boot(Unknown Source)
    at org.apache.derby.impl.services.monitor.BaseMonitor.boot(Unknown Source)
    at org.apache.derby.impl.services.monitor.TopService.bootModule(Unknown Source)
    at org.apache.derby.impl.services.monitor.BaseMonitor.startModule(Unknown Source)
    at org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Unknown Source)
    at org.apache.derby.impl.store.access.RAMAccessManager.boot(Unknown Source)
    at org.apache.derby.impl.services.monitor.BaseMonitor.boot(Unknown Source)
    at org.apache.derby.impl.services.monitor.TopService.bootModule(Unknown Source)
    at org.apache.derby.impl.services.monitor.BaseMonitor.startModule(Unknown Source)
    at org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Unknown Source)
    at org.apache.derby.impl.db.BasicDatabase.bootStore(Unknown Source)
    at org.apache.derby.impl.db.BasicDatabase.boot(Unknown Source)
    at org.apache.derby.impl.services.monitor.BaseMonitor.boot(Unknown Source)
    at org.apache.derby.impl.services.monitor.TopService.bootModule(Unknown Source)
    at org.apache.derby.impl.services.monitor.BaseMonitor.bootService(Unknown Source)
    at org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(Unknown Source)
    at org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(Unknown Source)
    at org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(Unknown Source)
    at org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Unknown Source)
    ... 48 more
java.lang.NullPointerException
    at DataBaseConnector.insertData(DataBaseConnector.java:43)
    at DatabaseUI$OKAction.actionPerformed(DatabaseUI.java:53)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6504)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6269)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4860)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
java.lang.NullPointerException
    at DataBaseConnector.closeConnection(DataBaseConnector.java:29)
    at DataBaseConnector.insertData(DataBaseConnector.java:65)
    at DatabaseUI$OKAction.actionPerformed(DatabaseUI.java:53)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6504)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6269)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4860)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
BUILD SUCCESSFUL (total time: 12 seconds) 
```

为什么是这样？请帮忙！

除了第一个主要问题，我想再问两个问题。

2.  我必须在这里给出数据库的显式位置作为连接。但是，当我把它交给客户时，我该怎么做呢？
3.  我必须使用 netbeans 手动启动数据库连接。反正有没有自动启动数据库连接？使用代码？

请帮我。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T05:38:00.697

**你的程序包含一些误解和错误的分配！**

*   从您的图像中，您可以看到您的 DATABASE = contactDB 不是联系人。
    "jdbc:derby:C:/Users/yohan/.netbeans-derby/contact" 是**错误**
    的 "jdbc:derby:C:/Users/yohan/.netbeans-derby/contactDB" 现在只有数据库是正确的。
    **错误：**另一个 Derby 实例可能已经启动了数据库 C:\Users\yohan.netbeans-derby\contact。

*   对于 Con.String 最好不要使用 PATH
    **将工作**"jdbc:derby://localhost:1527/C:/Users/yohan/.netbeans-derby/contactDB","yohan","xyz"
    **更好的是**" jdbc:derby://localhost:1527/contactDB","yohan","xyz"

最好指定表的完整路径。否则，它只能在 Netbeans 中工作，具有已打开的表和默认模式。

*   prepareStatement
    仅**在 Netbeans** con.prepareStatement("insert **into FRIENDS** values(?,?,?)");
    **更好**的是 con.prepareStatement("insert **into APP.FRIENDS** values(?,?,?)");

现在看看这个！

```
 ps.setInt(1, id);
    ps.setString(1, firstName);
    ps.setString(2, lastName); 
```

*   首先，您使用 setInt() 设置**id 。**
*   第二现在您使用**字符串**setString() 设置**id ( firstName !!!!!)**
***   最后，您在 ps 中使用 lastName 和 lastName 覆盖 firstName。是空的。**

 **这会给你下一个错误

**发生错误时**最好不要继续运行程序。错误列表会变长。很难阅读。在您的情况下，第一个错误在**createConnection**中并在 !!

*   错误创建连接
*   错误 con.prepareStatement("...
*   错误 ps.executeUpdate()
*   错误关闭连接（）

**用boolean**和**if**测试它！

```
private boolean createConnection()
{
    try
    {
        Class.forName("org.apache.derby.jdbc.EmbeddedDriver");
        con = DriverManager.getConnection("jdbc:derby://localhost:1527/contactDB","yohan","xyz");
    }
    catch(Exception e)
    {   
        System.out.println("Error getConnection");
        return false;
    }
 return true;   
} 
```

**如果连接失败，则无需进一步运行。**

```
public void insertData(int id, String firstName, String lastName)
    {
       if (createConnection()) {
        try
        {
            PreparedStatement ps = con.prepareStatement("INSERT INTO APP.FRIENDS values(?,?,?)");
            ps.setInt(1, id);
            ps.setString(2, firstName);
            ps.setString(3, lastName);
[...] 
```

我希望这对你有所帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-02T16:53:09.470

你的datasae已经连接断开右键单击->断开连接现在试试，

它肯定会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-10T23:57:08.167

您的数据库已经连接，您必须断开连接。右键单击->断开连接。现在再试一次，它肯定会奏效。**

# php - 使用网店中的节点？

> ID：12655228
> 
> 赞同：0
> 
> 时间：2012-09-29T18:16:09.230
> 
> 标签：php, mysql

我正计划为一家商店制作一个定制商店，该商店的产品带有子产品，价格取决于订单数量......

所以，我正在考虑使用节点，其中基本上会有 1 个巨大的数据表，通过父值和 id 值相互连接

```
- node type="product" value="productname"
    - node type="subproduct" value="specification_1"
        - node type="price_per_piece" value="1000"
            - node type="price" value="13$"
        - node type="price_per_piece" value="2000"
            - node type="price" value="12$"
        - node type="price_per_piece" value="3000"
            - node type="price" value="11$"
        - node type="price_per_piece" value="4000"
            - node type="price" value="10$"

    - node type="subproduct" value="specification_2"
    - node type="subproduct" value="specification_3"
    - node type="subproduct" value="specification_4" 
```

我没有输入它们，但每个节点都应该有一个唯一的数字，这样如果我有最终节点，我可以回溯订单。

我这样做正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:41:32.960

我会避免在一个表中混合不同类型的数据。

我将为每种类型的实体（类别/产品/等）创建一个没有任何结构信息的表，并创建额外的表来保存我需要的任何类型的结构关系（可能是类别/标签/相关产品）。这样，您还可以轻松地为一个产品拥有多个父级。

对于不同类型的产品等的不同规格字段（如果它不能是纯文本），我会将它们存储为序列化的 php 数组。

# javascript - JQuery/Javascript 如何使用 Get 解析 HTML

> ID：12655229
> 
> 赞同：0
> 
> 时间：2012-09-29T18:16:08.780
> 
> 标签：javascript, jquery

我有以下工作代码。这将显示一个下拉列表，并获取要显示的 html 文件：

```
 $.getJSON('json/shares.json', function(data) {
      var items = [];

      $.each(data.Shares, function(key, val) {
        items.push('<option id="' + val.shareID+ '">' + val.shareID+ '</option>');
      });

      $('<select/>', {
        'id': 'shares',
        html: items.join('')
      }).appendTo('#shares');
    });
    </script>

    <script type="text/javascript">

    $.get('lon_shares.html', function(data){
        $(data).appendTo('#shares');
    });

    </script> 
```

我需要将其修改为一些额外的内容。

首先，我需要在做出选择时自动提交下拉菜单。

然后我需要它来获取与选择相关的 html 文件，例如，如果他们选择“FML”选项，如果他们选择“GBP”，它将获得 html 文件“FML_shares.html”，那么它应该获得“GBP_shares.html”最后，如果选择没有任何与之相关的 html 文件，则应显示错误，例如“没有此类文件”等。

只是为了让它更复杂一点，我不想要整个文件。该文件中有一个表格，我想从表格的第一行获取前五列数据的数据并单独显示这些数据。

感谢您的帮助，我一直在寻找解决方案一段时间但没有成功，我的 JQuery/Javascript 知识非常基础！（我过去用 PHP 做过类似的事情，但这不是这里的选择）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:20:13.077

那么对于第一点你可以运行

```
$('#shares').on('change', function(){
    var val = $(this).val();
    //submit another ajax request with this value, and get the relevant page, then you'd just need to parse it for the appropriate content from that page.
}); 
```

如果您想解析返回的页面并只获取其中的一部分，我们需要知道标记结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T18:23:05.777

似乎您只需要绑定到`.change`您正在创建的下拉列表的事件即可提交，您可以使用`.get`. 您可以使用 jQuery 来解析 html。它做得很好：

```
.appendTo('#shares')
.change(function () {
   $.get($(this).val() + '_shares.html)
      .done(function (html) {
         var $table = $(html).find("table tr:first td").slice(0,5);
      })
      .fail(function () { /* no such file */ });
}); 
```

此代码未经测试，但希望您可以按照示例进行操作。还要注意`GET`缓存。

# javascript - 不能使用 perl WWW::Mechanize 勾选复选框

> ID：12655231
> 
> 赞同：0
> 
> 时间：2012-09-29T18:16:33.630
> 
> 标签：javascript, perl, web-scraping, mechanize

我正在使用 perl WWW::Mechanize 制作网络爬虫。我的问题是我正在抓取的网站使用 javascript 有点过多。我正在使用凭据登录，然后使用`$mech->follow_link(url)`.

问题从这里开始。我登陆到一个页面，我必须从启用 javascript 的下拉列表中选择一个复选框和一个单选按钮。我被困在这一点上。

html部分如下。当我使用时`$mech->tick('cs-MajorIndustryGroup')`，我收到一个错误

```
Can't call method "find_input" on an undefined value 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T19:30:51.237

`WWW::Mechanize`不支持 JavaScript。您可以尝试其中一些模块：

*   [`Gtk2::WebKit::Mechanize`](http://search.cpan.org/perldoc?Gtk2%3a%3aWebKit%3a%3aMechanize)
*   [`Win32::IE::Mechanize`](http://search.cpan.org/perldoc?Win32%3a%3aIE%3a%3aMechanize)
*   [`WWW::Mechanize::Firefox`](http://search.cpan.org/perldoc?WWW%3a%3aMechanize%3a%3aFirefox)
*   [`WWW::Scripter`](http://search.cpan.org/perldoc?WWW%3a%3aScripter)
*   [`WWW::Selenium`](http://search.cpan.org/perldoc?WWW%3a%3aSelenium).

有关详细信息，请参阅[`WWW::Mechanize::FAQ`](http://search.cpan.org/~jesse/WWW-Mechanize-1.72/lib/WWW/Mechanize/FAQ.pod#JavaScript)。

# emacs - 如何让 gnutls 在 emacs 中使用客户端证书 24

> ID：12655232
> 
> 赞同：5
> 
> 时间：2012-09-29T18:16:35.757
> 
> 标签：emacs, ssl, emacs24

我正在尝试使用客户端证书对 irc 服务器进行身份验证。在 emacs 23 中，我可以使用 tls-program 变量来做到这一点：

(setq tls-program '("gnutls-cli --priority secure256 --x509cafile /home/me/CAs.pem --x509certfile /home/me/nick.pem -p %p %h"))

但是，emacs24 中的支持是原生的，使用 libgnutls 并且不使用外部程序，因此它忽略了 tls-program 变量。

有人可以告诉我，在 emacs 24 中定义默认客户端证书的替代方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-06T10:38:10.347

我发现的唯一选择是不通过重新定义来使用内置的 GnuTLS 支持`gnutls-available-p`。例如：

```
(defun gnutls-available-p ()
  "Function redefined in order not to use built-in GnuTLS support"
  nil) 
```

然后，您使用的设置`tls-program`将像切换到 Emacs 24 之前一样工作。目前没有其他方法可以指定客户端证书。内置 gnutls 库的唯一相关可用设置似乎是`gnutls-trustfiles`.

# c# - Excel 互操作 MissingMethodException

> ID：12655236
> 
> 赞同：6
> 
> 时间：2012-09-29T18:17:15.530
> 
> 标签：c#, excel, exception, interop

在我的 C# 程序中，我使用 Excel 2010 互操作程序集。有了这个，我正在读取和写入数据到 excel 文件。并在开发盒（包含 Office 2010）上执行良好。在客户端计算机上，即使他们有 Office 2010 和 Office PIA，也会看到以下异常，在 WriteToExcel() 方法调用时引发。

```
Unhandled Exception: System.MissingMethodException: Method not found: 'System.Type System.Runtime.InteropServices.Marshal.GetTypeFromCLSID(System.GUID)'. 
```

下面是我的代码片段。

```
[STAThread]
static void Main(string[] args){

       // read user input, process and write data to Excel
       WriteToExcel();
 }

[STAThread]
static void WriteToExcel(){
     Application xlsApplication = new Application();
     Workbook xlsWorkbook = xlsApplication.Workbooks.Open(excelFilePath);
     // write data to excel
     // close up            
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T21:10:17.717

将 .net 版本降低到 4.0 后问题已解决。早些时候我的 devbox 有 4.5，应用程序是用这个版本编译的。我的客户端机器有4.0版本，降低.net版本解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T18:26:41.467

尝试使用以下代码：

```
[STAThread]
static void WriteToExcel()
{
    Application xlsApplication = new Application();
    var missing = System.Type.Missing;
    Workbook xlsWorkbook = xlsApplication.Workbooks.Open(excelFilePath, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing);
    // write data to excel
    // close up            
 } 
```

# jquery - 使用 jquery 更改多个选项值和文本

> ID：12655240
> 
> 赞同：0
> 
> 时间：2012-09-29T18:17:41.723
> 
> 标签：jquery, filter, replace, option

我有多个选项值需要即时更改。这就是我所拥有的，我需要改变。

我当前的选项值是：

```
 <select>
   <option value="wood">wood</option>
   <option value="plastic">plastic</option>
   <option value="metal">metal</option>
   <option value="fiberglass">fiberglass</option>
 </select> 
```

我需要我的选项值是：

```
 <select>
   <option value="epoxy">epoxy</option>
   <option value="aluminium">aluminium</option>
   <option value="carbon">carbon</option>
   <option value="titanium">titanium</option>
 </select> 
```

任何帮助都是极好的！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:22:14.170

您可以创建一个数组并使用以下`each`方法：

```
var arr = ["epoxy", "aluminium", "carbon", "titanium"];

$('select option').each(function(i){
   $(this).text(arr[i]).val(arr[i])
})
​ 
```

[http://jsfiddle.net/AnBCY/](http://jsfiddle.net/AnBCY/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T18:25:45.233

这是一种解决方案：

```
var new_options = ["epoxy", "aluminium", "carbon", "titanium"]; // New options
var select = $('select'); // Select the specific select (should probably be a id selection here
select.html(''); // Remove old options
for( item in new_options ​) { // Loop through new options
    $('<option></option>').text(new_options[item]) // Add the new text
                          .val(new_options[item]) // Add the new value
                          .appendTo(select); // Add it as an option
}​ 
```

这里也给你一个小提琴：http: [//jsfiddle.net/kZMTJ/](http://jsfiddle.net/kZMTJ/)

# ruby-on-rails - 在rails中，为模型创建factorygirl时，不应该调用模型的before_create吗？

> ID：12655241
> 
> 赞同：2
> 
> 时间：2012-09-29T18:17:46.470
> 
> 标签：ruby-on-rails, factory-bot

我的应用程序有一个电话模型，其中一个字段是 .guid，它设置为`before_create :set_guid`（生成一个随机字符串并在创建模型时将其放入 guid 字段中）。

我的手机工厂看起来像：

```
require 'faker'

FactoryGirl.define do
  factory :phone do |f|
    f.phone { Faker::PhoneNumber.phone_number }
  end
end 
```

这个创建电话的简单测试未能通过我的模型验证，因为 guid 为空白：

```
describe Phone do
  it "has a valid factory"  do
    FactoryGirl.create(:phone).should be_valid
  end 
```

我当然可以手动填充 Factory 定义中的 guid 字段，但 Factory 的目的不是运行模型的正常验证和回调以确保它们正常工作吗？

显然我遗漏了一些东西 - 使用 FactoryGirl 创建模型实例的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T18:34:16.433

你有一个带有属性电话的型号电话吗？

除此之外，他们的 Getting Started 中还有工厂女孩[的回调](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#callbacks)。

```
 factory :user do
  callback(:after_stub, :before_create) { do_something }
  after(:stub, :create) { do_something_else }
  before(:create, :custom) { do_a_third_thing }
end 
```

像 before(:create) 这样的东西可能对你有用。

你不能在默认工厂中硬编码一个 guid 吗？我的意思是你只想测试一次看看它是否有效，然后剩下的只是镇流器，因为你想要工作测试。

# java - 用 java 初始化 JavaScript 变量

> ID：12655243
> 
> 赞同：0
> 
> 时间：2012-09-29T18:18:02.560
> 
> 标签：java, javascript, jquery, jsp

我们可以在jsp页面中用java初始化JavaScript变量吗？喜欢，

```
<script type="text/javascript">
var refreshId = setInterval(function() {
    var nv=<% out.print(num_voted); %>;
    var tv=<%out.print(totalvoted); %>;
    var m=<% out.print(month);%>;
    var y=<% out.print(year);%>;
    alert("refreshed");
    $('#alertmessagebox').text("Total members voted "+nv+" out of "+tv+" for "+m+" " +y);
}, 9000);
$.ajaxSetup({ cache: false });
 </script> 
```

代码未按预期工作。:(

有没有办法做到这一点？为什么不可能通过这种方式？我们需要创建标题来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:48:16.847

这是在 JSP 中设置 Javascript 变量的示例。

```
<head>
<%
    String numVotedStr = request.getParameter("numvoted");
    int numVoted = 0;
    if (numVotedStr != null) {
        numVoted = Integer.parseInt(numVotedStr);
    }
%>
<script type="text/javascript">
    function setInterval() {
        alert("hello " + <%= numVoted %>);
    }
</script>
</head>

<body>
<form>
    <input type="button" onclick="setInterval()" value="Press Me"/>
</form>
</body>
</html> 
```

要进行测试，请使用此 URL 的适当版本：

```
http://localhost:8080/sandbox/example.jsp?numvoted=99 
```

这将在 HTTP 请求上弹出一个带有“numvoted”整数值的警报框，方法是生成一个 HTML 页面，其中该值在 Javascript 中初始化。（代码应该至少有一个`parseInt()`调用的 try-catch，但这只是一个简单的例子。）

# c - 将文件读入C中的结构数组

> ID：12655244
> 
> 赞同：1
> 
> 时间：2012-09-29T18:18:08.200
> 
> 标签：c, arrays, file, struct, fwrite

对 C 语言仍然很陌生，但开始掌握它的窍门....

我的程序应该创建/写入文件并存储来自结构数组的信息。那部分很好。我遇到的问题是从该文件读回一个空的结构数组......

这是我的结构：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>

#define MAX 100

struct Video { 
char name[1024];                //name
int ranking;                // Number of viewer hits
char url[1024];             // YouTube URL
};

struct Video Collection[MAX]; 
```

这是我的加载方法，它从我的文件读回我的结构数组：

```
void load()
{
FILE *fileName;
fileName = fopen("ranking.dbm", "rb");
if (fileName != NULL){
    fread (Collection,1,1,fileName);
}
else {
    printf("ERROR");
}   

} 
```

这也是我的写方法：

```
void save()
{
FILE * pFile;
pFile = fopen ( "Ranking.dbm" , "wb" );
fwrite (Collection, 1 , sizeof(Collection), pFile );
fclose (pFile); 
} 
```

但是，当我在加载后打印出我的数组时`collection`......它是空的......即使我可以在项目文件夹中看到我的文件并打开它并验证数据是否在那里......

我是否正确地认为我不需要缓冲区，因为在使用它之前我不需要对其进行任何处理？

也因为我已经为内存静态分配了空间......我认为我可以直接读入数组是否正确？

这是我的打印代码：

```
void printall()
{
int i; 

printf("\nCollections: \n"); 

for(i = 0; i < tail; i++)
{
    printf("\nVideo Name: %s", Collection[i].name);
    printf("\nRanking (Hits): %d", Collection[i].ranking);
    printf("\nURL: %s", Collection[i].url);
    printf("\n");
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T18:26:33.913

`fread`实际上旨在从文件中读取结构数组，但您必须正确使用它。

`fread`的四个参数如下：

```
void * ptr, size_t size, size_t count, FILE * stream 
```

第一个参数是放置数据的位置（在您的情况下为`Collection`）。第二个参数是*每个数组元素的大小*：在你的情况下，你想把`sizeof(struct Video)`. 第三个参数是您要读取的元素数，在您的情况下是`MAX`. 第四个参数是要读取的文件。

如果你想读入一个类似的数组`struct Video Collection[MAX]`，你会使用`fread(Collection, sizeof(struct Video), MAX, file)`. `fread`将返回读取的元素总数，即 ≤ `MAX`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T19:27:04.470

我在这里看到了一些问题..首先你是如何阅读文件的：

```
fread (Collection,1,1,fileName); 
```

这将读入集合 1 个字节，`fileName`您`Collection`
应该检查 的返回状态`fread()`，当它成功时，它会告诉您要读取的字节总数。（参数 2 * 参数 3，在您的情况下为 1*1）。

当我像这样修改您的阅读代码时：

```
fread(Collection, sizeof(struct Video), 1, fileName); 
```

它确实成功地从文件中读取......但是你现在有一个不同的问题。假设您的文件包含以下内容：

```
something 5 http://something.com
nothing 3 http://nothing.com 
```

所以（我认为）这是您文件的格式，名称（ASCII），排名（int）和URL（ASCII）。现在假设您的`main()`函数如下所示：

```
int main ()
{
    load();
    printall();
    return 0;
} 
```

你会得到类似的`stdout`东西：

```
Collections:

Video Name: something 6 http://something.com
nothing 3 http://nothing.com
Ranking (Hits): 0
URL: 
```

原因是你用静态（和非常大的）元素声明了你的数组。将`fread()`尝试读取`sizeof(struct Video)`1024+4+1024 字节，因此除非您的每一行都是精确大小（名称和 url 为 1024 个字符），否则您将得到看起来混乱或空数据的内容.

我建议您阅读，直到您点击一个空格并将每个值存储在正确的元素中，而不是尝试将整个文件读出到数组中。

**编辑：**
如果你想填充你的数组，如：

```
fread(myarray, sizeofstruct, numberofstructs, file); 
```

您必须保证数据长度。在您的示例中，您必须说“名称是许多字符，+ 空格 = 1024”，对于 URL 也是如此。这似乎是一个可怕的空间浪费。更好的选择是一次填充一个元素：

```
for(0 to last_element){
  set myarray.name = data until first space
  set myarray.ranking = (int)data until second space
  set myarray.url = data until newline
} 
```

您可以使用`fscanf()`to 读取直到出现空格。坦率地说，如果您要一次填充一个元素，我只需将字符指针用于名称和 url 并动态分配内存，这样您就不会浪费大量的数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T18:26:23.587

首先我必须假设你的意思`struct Video Collection[MAX];`是你的上半部分是无效的 C.

第二：您正在将 1 个字节读入 Collection。

尝试 `fread(Collection, sizeof(struct Video), MAX, fileName);`

这将最多将字节`MAX`块读取到 Collection 中。`sizeof(struct Video)`

# c# - 带有事务提交返回的 C# Web 服务方法

> ID：12655247
> 
> 赞同：0
> 
> 时间：2012-09-29T18:18:24.713
> 
> 标签：c#, web-services, transactions

是否可以创建一个 Web 服务，包括一个执行某些操作然后期望返回值/操作来提交这些操作的方法？

我需要一个返回一些值的方法。在返回这些值的过程中，需要插入一些数据。收到这些返回值后，我需要确保我能够处理它们，然后提交初始方法。

如果该方法没有收到标志/提交/无论如何，插入将回滚。

这可能吗？（如果措辞不清楚，请见谅，希望我不够稳定）

我这样做是因为我需要获取一组数据，即使用常规 SQL 返回的速度很慢。我计划在服务器上压缩该（格式化的）数据（使用 Web 服务），并让该方法以压缩的二进制类型将其返回给我。如果在获取或处理该压缩二进制文件时出现问题，我需要能够回滚整个过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:27:42.753

To accomplish a commit on web service end after receiving web service response with single web service call is not possible, I am afraid. Http web services are stateless, you can make it stateful using sessions. You can make two services one for receiving response and other for performing commit. Between these two calls you can use session if they can help.

1.  Call to receives set of values. You may set a session for next call timeout e.g. You should not start transaction in first call. Just return results. If your results are as per requirement of commit the save data with transaction. You can have some flag in DB records indicating the incomplete transaction in first call and commit or delete it second call and set flag accordingly.

2.  Call for commit based on the first call result and put transaction over here for saving data.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T18:28:50.593

我认为您需要两个网络服务（如果我正确理解您的问题）。第一个执行操作并返回一个值。如果调用程序验证了返回值，它会调用第二个 Web 服务来执行提交。说得通？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T18:33:18.673

我认为解决方案应该是这样的。

```
Method 1 - Create record and return the uid of it. Insert record in pending state
 Method 2 - Take parameter of created record and operation (approve or reject). Change the state of the record entered in method1. 
```

# asp.net-mvc - 我如何为用户公开模式以在 Azure ACS 和 WIF（SWT 令牌）中将两个帐户链接在一起

> ID：12655250
> 
> 赞同：0
> 
> 时间：2012-09-29T18:18:37.933
> 
> 标签：asp.net-mvc, security, wif

现在，当用户通过身份验证（通过为 SWT 令牌启用 WIF 的 Azure ACS）时，看起来我不能让他们使用新的提供程序再次登录并获得两个令牌。

我正在寻找一种可以让用户将两个帐户链接在一起的模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:33:17.167

你需要多解释一点。这是一个网站吗？（假设是，因为您将问题标记为“MVC”）。您正在使用哪些提供商？（例如 FB、LiveID、Google、您自己的）。您的应用如何识别用户？（例如，唯一的句柄、电子邮件地址等）。

您获得的令牌始终来自 ACS，并且独立于提供商。您实际上可以使用 ACS 将来自所有不同提供商的信息标准化为通用信息。从而“链接”了他们两个。您可以使用 ACS 转换规则执行此操作。

如果您使用“直通”规则，那么您将获得 IdP 给您的任何信息，并且关联必须在应用程序中发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T02:01:52.143

根据[Identity Providers](http://msdn.microsoft.com/en-us/library/windowsazure/gg185971.aspx)，您会为每个提供者获得一个唯一的“名称标识符”。您必须通过将它们存储在存储库中来手动将它们链接在一起。

例如

*   用户通过 Facebook 登录。存储标识符。
*   询问用户是否要使用其他提供商。
*   用户通过 Google 登录。将标识符链接到 Facebook 的标识符。

**更新：**

您需要有一个“控制”身份，例如普通的 SQL 成员资格提供程序。所以首先他们以这个身份登录。然后你有一个工作流程询问“你想使用另一个身份吗？” 您知道他们的控制身份，因此您将新的“名称标识符”映射到控制身份。如果他们使用 ACS 身份之一登录，您将搜索您的存储库。如果你没有找到它。你说“我们以前没有见过这个身份。请以你的控件登录，然后映射它”。

# python - 生成文件列表

> ID：12655255
> 
> 赞同：0
> 
> 时间：2012-09-29T18:19:59.113
> 
> 标签：python, file

我在这里有这个代码......它在目录中生成文件和文件夹的列表

```
import os
for x in os.listdir("C:\Users"):
    text = text + "\n" + x
f = open("List.txt", "w")
f.write(text)
f.close() 
```

但是我怎样才能让它做两件事......

首先仔细阅读文件夹中的内容并继续前进，直到只有一个孩子。

其次，当它下降一个级别时，它会添加一个选项卡。像这样

```
Level 1 (parent)
    Level 2 (child) 
```

我怎样才能让它添加该选项卡？对于无限数量的水平？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T18:27:22.247

Use `os.walk()` instead:

```
start = r'C:\Users'
entries = []
for path, filenames, dirnames in os.walk(start):
    relative = os.path.relpath(path, start)
    depth = len(os.path.split(os.pathsep))
    entries.extend([('\t' * depth) + f for f in filenames])
with open("List.txt", "w") as output:
    output.write('\n'.join(entries)) 
```

In each loop, `path` is the full path to the directory the filenames and dirnames are directly contained in. By using `os.path.relpath` we extract the 'local' path, count the depth and use that for the number of tabs to prepend each filename with.

# android - 在eclipse中，声明变量时android应用程序崩溃

> ID：12655256
> 
> 赞同：0
> 
> 时间：2012-09-29T18:20:01.433
> 
> 标签：android, eclipse, variables, views, logcat

我有一个非常简单的代码，因为我是 Java 和 Android 的新手。所以，我有这个按钮，当点击它时，应该在两个文本视图之间切换文本。我插入了处于调试模式的 Android 手机，因此我的应用程序直接在其上运行。但是，它一启动就崩溃了，说“不幸的是，已经停止了”。

这是我的代码：

```
 public class ConvertItAll extends Activity {

String temp;
TextView tv1 = (TextView) findViewById(R.id.tvUnit1);
TextView tv2 = (TextView) findViewById(R.id.tvUnit2);

EditText et1=(EditText) findViewById(R.id.etInput);
TextView tv3=(EditText) findViewById(R.id.tvOutput);
Button b1=(Button) findViewById(R.id.bEdit1);
Button b2=(Button) findViewById(R.id.bEdit2);
Button b3 = (Button) findViewById(R.id.bSwap);

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    b3.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            temp = tv1.getText().toString();
            tv1.setText(tv2.getText().toString());
            tv2.setText(temp);
        }
    });
}
} 
```

当我在 Logcat 中看到该错误时，该错误发生在我声明和初始化 View 变量的行中。所以，我尝试评论这些声明（当然也没有使用变量），并且应用程序加载正常，我可以看到布局。

有人可以帮忙吗？如果我无法初始化变量，我将如何使用它们？

这是 LogCat 结果：

```
 •   09-29 23:42:10.788: I/Process(600): Sending signal. PID: 600 SIG: 9

    •   09-29 23:42:27.846: E/Trace(670): error opening trace file: No such file or directory (2)

    •   09-29 23:42:28.536: D/dalvikvm(670): GC_FOR_ALLOC freed 70K, 3% free 8051K/8259K, paused 51ms, total 53ms
    •   09-29 23:42:28.556: I/dalvikvm-heap(670): Grow heap (frag case) to 8.827MB for 960016-byte allocation

    •   09-29 23:42:28.776: D/dalvikvm(670): GC_CONCURRENT freed 1K, 3% free 8987K/9223K, paused 78ms+6ms, total 222ms

    •   09-29 23:42:28.776: D/dalvikvm(670): WAIT_FOR_CONCURRENT_GC blocked 8ms

    •   09-29 23:42:29.106: D/gralloc_goldfish(670): Emulator without GPU emulation detected.

    •   09-29 23:42:29.966: D/AndroidRuntime(670): Shutting down VM

    •   09-29 23:42:29.966: W/dalvikvm(670): threadid=1: thread exiting with uncaught exception (group=0x40a13300)

    •   09-29 23:42:29.996: E/AndroidRuntime(670): FATAL EXCEPTION: main

    •   09-29 23:42:29.996: E/AndroidRuntime(670): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.allinoneconverter/com.example.allinoneconverter.ConvertItAll}: java.lang.NullPointerException

    •   09-29 23:42:29.996: E/AndroidRuntime(670):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)

    •   09-29 23:42:29.996: E/AndroidRuntime(670):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)

    •   09-29 23:42:29.996: E/AndroidRuntime(670):  at android.app.ActivityThread.access$600(ActivityThread.java:130)

    •   09-29 23:42:29.996: E/AndroidRuntime(670):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)

    •   09-29 23:42:29.996: E/AndroidRuntime(670):  at android.os.Handler.dispatchMessage(Handler.java:99)

    •   09-29 23:42:29.996: E/AndroidRuntime(670):  at android.os.Looper.loop(Looper.java:137)

    •   09-29 23:42:29.996: E/AndroidRuntime(670):  at android.app.ActivityThread.main(ActivityThread.java:4745)

    •   09-29 23:42:29.996: E/AndroidRuntime(670):  at java.lang.reflect.Method.invokeNative(Native Method)

    •   09-29 23:42:29.996: E/AndroidRuntime(670):  at java.lang.reflect.Method.invoke(Method.java:511)

    •   09-29 23:42:29.996: E/AndroidRuntime(670):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)

    •   09-29 23:42:29.996: E/AndroidRuntime(670):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)

    •   09-29 23:42:29.996: E/AndroidRuntime(670):  at dalvik.system.NativeStart.main(Native Method)

    •   09-29 23:42:29.996: E/AndroidRuntime(670): Caused by: java.lang.NullPointerException

    •   09-29 23:42:29.996: E/AndroidRuntime(670):  at android.app.Activity.findViewById(Activity.java:1825)

    •   09-29 23:42:29.996: E/AndroidRuntime(670):  at com.example.allinoneconverter.ConvertItAll.<init>(ConvertItAll.java:12)

    •   09-29 23:42:29.996: E/AndroidRuntime(670):  at java.lang.Class.newInstanceImpl(Native Method)

    •   09-29 23:42:29.996: E/AndroidRuntime(670):  at java.lang.Class.newInstance(Class.java:1319)

    •   09-29 23:42:29.996: E/AndroidRuntime(670):  at android.app.Instrumentation.newActivity(Instrumentation.java:1053)

    •   09-29 23:42:29.996: E/AndroidRuntime(670):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)

    •   09-29 23:42:29.996: E/AndroidRuntime(670):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:23:33.607

你得到一个例外，因为你试图在膨胀视图之前引用 UI 元素。**`findViewById(..)`**只能在使用 . 链接包含布局的 xml 后才能使用**`setContentView(..)`**。

试试下面的代码，一切都应该正常。

```
public class ConvertItAll extends Activity {

    String temp;
    TextView tv1, tv2, tv3;
    EditText et1;
    Button b1, b2, b3;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.yourLayoutXMLFileName); // you need to inflate the view before referencing the UI elements 
        tv1 = (TextView) findViewById(R.id.tvUnit1);
        tv2 = (TextView) findViewById(R.id.tvUnit2);
        et1=(EditText) findViewById(R.id.etInput);
        tv3=(EditText) findViewById(R.id.tvOutput);
        b1=(Button) findViewById(R.id.bEdit1);
        b2=(Button) findViewById(R.id.bEdit2);
        b3 = (Button) findViewById(R.id.bSwap);
        b3.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                temp = tv1.getText().toString();
                tv1.setText(tv2.getText().toString());
                tv2.setText(temp);
            }
        });
    }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T18:24:03.633

您只能在布局膨胀后获得对布局中的视图的引用。尝试在 super() 调用之后调用 setContentView()，然后初始化变量。所以你的代码看起来像：

```
public class ConvertItAll extends Activity {

String temp;
TextView tv1;

.....

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.<your_Llayout>);
    tv1 = (TextView) findViewById(R.id.tvUnit1)
   ..... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T18:33:38.617

`setContentView`似乎不见了。`null`你在做的时候得到一个`findViewById`。

阅读： http: [//developer.android.com/reference/android/app/Activity.html#setContentView](http://developer.android.com/reference/android/app/Activity.html#setContentView(android.view.View) (android.view.View )

# eclipse - 从 Glassfish 3.1 中的表为 Eclipse 3.7 生成实体

> ID：12655257
> 
> 赞同：1
> 
> 时间：2012-09-29T18:20:06.987
> 
> 标签：eclipse, glassfish

我正在尝试阅读[本教程](http://programming.manessinger.com/tutorials/an-eclipse-glassfish-java-ee-6-tutorial/)以了解有关 Glassfish 的更多信息。我正处于从 DB 表创建 Java 实体[的阶段](http://programming.manessinger.com/tutorials/an-eclipse-glassfish-java-ee-6-tutorial/#heading_toc_j_25)，本教程指示“在 EJB 项目的上下文菜单中（并且仅在此处），您将找到**JPA 工具/从表生成实体**”。但是，我在 EJB 项目菜单中找不到该选项。我想本教程有点陈旧，并且基于 GF for Eclipse 的先前版本。谁能告诉我更新的功能是什么，即如何从 DB 生成 Java 实体类以便我可以继续我的教程？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T11:00:26.073

抱歉，我现在注意到这个问题，我会回答它，虽然认为为时已晚。JPA 工具通常不包含在 EJP 项目中，因此您必须手动包含它们：进入EJB的**属性，在选项****项目方面**进行选择，然后检查 JPA。之后，您将在 EJP 中找到 JPA 工具，只需右键单击您的 EJP 项目。希望它对某人有所帮助。

# javascript - javascript中的枚举用法

> ID：12655261
> 
> 赞同：2
> 
> 时间：2012-09-29T18:20:21.293
> 
> 标签：javascript

我在 javascript 中搜索枚举用法。我在 JavaScript 中找到了一个 stackoverflow 链接 [枚举？](https://stackoverflow.com/questions/287903/enums-in-javascript)这是一个好的开始。

此链接显示了一个很好的用途，例如

```
var SIZE = {
SMALL : {value: 0, name: "Small", code: "S"}, 
MEDIUM: {value: 1, name: "Medium", code: "M"}, 
LARGE : {value: 2, name: "Large", code: "L"}
};

var currentSize = SIZE.MEDIUM;
if (currentSize == SIZE.MEDIUM) {
// this alerts: "1: Medium"
alert(currentSize.value + ": " + currentSize.name);
} 
```

我的要求有点不同，这就是为什么我改变上面的代码

```
var MSg = {
        Country= {
                    GBR: {name_req:"Name Required",email_req:"Email Required"},
                    FRA: {name_req:"FRA Name Required",email_req:"FRA Email Required"}
                 }

    };

but it is giving error. so please guide me how to write the above code without error. also tell me the enum code will work in all the browser? thanks. 
```

## **供我自己将来参考**

```
var dialog =
    {
        MainContainer:
        {
            Country:
            {
                GBR:
                    {
                        height: 365, width: 257
                    },
                FRA:
                    {
                        height: 375, width: 310
                    }

            }
        },
        SubContainer:
        {
            Country:
            {
                GBR:
                    {
                        height: 0, width: 257
                    },
                FRA:
                    {
                        height: 0, width: 300
                    }
            }
        }
    };

    var Validation =
    {
        Msg:
        {
            Country:
            {
                GBR:
                    {
                        Name: "Name Required",
                        Subject: "Subject Required",
                        Email: "Email Required",
                        Invalid_Email: "Invalid Email Address",
                        Feedback: "Feedback details Required",
                        Success: "Feedback send successfully",
                        Fail: "Feedback send fail"
                    },
                USA:
                    {
                        Name: "Name Required",
                        Subject: "Subject Required",
                        Email: "Email Required",
                        Invalid_Email: "Invalid Email Address",
                        Feedback: "Feedback details Required",
                        Success: "Feedback send successfully",
                        Fail: "Feedback send fail"
                    }
            }
        }
    }; 
```

## **分配或设置国家**

```
 var feedCookie = getCookie('SetCountry');
 feedCookie = (feedCookie == '' ? 'GBR' : feedCookie);
 var dialog_Main = dialog.MainContainer.Country[feedCookie];
 var dialog_Sub = dialog.SubContainer.Country[feedCookie]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T18:23:19.347

您不要`=`在对象定义中使用。你`:`用来定义一个新的属性。
所以改成`Country = {`这样`Country: {`：

```
var MSg = {
    Country: {
                GBR: {name_req:"Name Required",email_req:"Email Required"},
                FRA: {name_req:"FRA Name Required",email_req:"FRA Email Required"}
             }

}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-02T11:16:09.320

OP引用的问题的原始答案，建议使用以下语法：

```
var SIZE = {
    SMALL : {value: 0, name: "Small", code: "S"}, 
    MEDIUM: {value: 1, name: "Medium", code: "M"}, 
    LARGE : {value: 2, name: "Large", code: "L"}
}; 
```

是我的。然而与此同时，我学到了更多，我现在建议*不要*使用这种方法。**不要使用这种语法！**当枚举需要序列化（等等）时，这种方法会出现严重`JSON.stringify()`问题`JSON.parse()`。

**请改用此语法：**

```
var SIZE = {
    SMALL: 0,
    MEDIUM: 1,
    LARGE: 2,

    properties: {
        0: {value: 0, name: "Small", code: "S"},
        1: {value: 1, name: "Medium", code: "M"}, 
        2: {value: 2, name: "Large", code: "L"}
    }
}; 
```

更详细一点，是的。访问枚举值的属性也不太直观：

```
var size = SIZE.SMALL;
var code = SIZE.properties[size].code; 
```

但是，这样您的枚举值将在（反）序列化后继续存在。而在今天的网络中，有 Ajax 请求、REST API 和 JSON 响应，这非常重要，以至于我们应该做出牺牲。

阅读我关于这个主题的博文了解更多详情： [Javascript 中的枚举 - Stijn de Witt 的博客](https://stijndewitt.wordpress.com/2014/01/26/enums-in-javascript/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T18:23:53.073

这：

```
var MSg = {
        Country= {
                    GBR: {name_req:"Name Required",email_req:"Email Required"},
                    FRA: {name_req:"FRA Name Required",email_req:"FRA Email Required"}
                 }

    }; 
```

应该是这样的：

```
var MSg = {
        Country: { // <- RIGHT HERE
                    GBR: {name_req:"Name Required",email_req:"Email Required"},
                    FRA: {name_req:"FRA Name Required",email_req:"FRA Email Required"}
                 }

    }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T18:26:12.400

你应该做：

```
var MSg = {
    Country : {
                GBR: {name_req:"Name Required",email_req:"Email Required"},
                FRA: {name_req:"FRA Name Required",email_req:"FRA Email Required"}
             }

}; 
```

现在，`var c =MSg.Country.GBR`给你`c = {name_req:"Name Required",email_req:"Email Required"}`

# sdl - 背景图像未在 SDL 中加载

> ID：12655267
> 
> 赞同：0
> 
> 时间：2012-09-29T18:20:58.930
> 
> 标签：sdl

我想在 SDL 的框架中显示图像（.png）。但是，不知何故，只有框架出现并且图像没有被加载。我正在从 XML 文件中读取图像详细信息。这是我正在尝试的示例代码：

我的班级{

mysurface2(io.loadAndSet(myftndata->getXmlStr("backfile"), true)),

myfframe(新 fframe(img2, myftn->getXmlInt("backWidth"), myftn->getXmlInt("backHeight"), 0, 0)),

我的对象（）

{

```
 if (SDL_Init(SDL_INIT_VIDEO) != 0) 
     {
       throw string("SDL Error!!!: ");             
     }

    atexit(SDL_Quit); 
```

}

};

```
void myclass::drawImg() const {
SDL_FillRect( screen, NULL, SDL_MapRGB(screen->format, 255, 255, 255) );
SDL_Rect dest = {0, 0, 0, 0};
SDL_BlitSurface( screen, NULL, screen, &dest );
}
void myclass::move() 
 {
      while ( not done ) 
      {
        drawImg();    
        SDL_Flip(screen);
      }
 } 
```

请注意：我有一个完整的框架，我不能在这里给出。上面是我正在尝试的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T13:15:22.393

您正在将屏幕传送到屏幕，这是一个零操作。您应该将 blit 函数中的第一个屏幕更改为代表您的图像的 SDL_Surface*。您是否使用库（例如 SDL_Image）来加载 .png 文件？因为 SDL 只能加载 .bmp 文件。

# mysql - Mysql，枚举行，排序

> ID：12655268
> 
> 赞同：1
> 
> 时间：2012-09-29T18:21:07.993
> 
> 标签：mysql, sql-order-by

我有一张桌子`domain`，里面有`name`, `alexarank`, `ind`.

我知道如何以默认顺序枚举所有行：

```
UPDATE domain SET ind = (SELECT @a := @a + 1 FROM (SELECT @a := 0) s); 
```

请建议如何枚举它们按 alexarank 排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T18:33:59.643

```
UPDATE domain SET ind = (SELECT @a := @a + 1 FROM (SELECT @a := 0) s) ORDER BY something; 
```

如中所述：[http ://dev.mysql.com/doc/refman/5.6/en/update.html](http://dev.mysql.com/doc/refman/5.6/en/update.html)

# json - 如何查询 youtube api 以返回 yt$videoid？

> ID：12655271
> 
> 赞同：0
> 
> 时间：2012-09-29T18:21:10.693
> 
> 标签：json, api, youtube

我目前正在使用它来查询第一个匹配 deadmau5 的视频：

[https://gdata.youtube.com/feeds/api/videos?q=deadmau5&v=2&alt=json&max-results=1&prettyprint=true](https://gdata.youtube.com/feeds/api/videos?q=deadmau5&v=2&alt=json&max-results=1&prettyprint=true)

这会返回一堆信息，包括视频 id，这对我来说似乎都很浪费。我只需要 youtube id，有没有更有效的方法只返回视频 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:25:35.210

试试这个，它使用 jquery，所以你可能需要在运行它之前包含 jquery 库

```
 $(function(){
        var url = 'https://gdata.youtube.com/feeds/api/videos?q=deadmau5&v=2&alt=json&max-results=1&prettyprint=true';
        $.ajax({
            url: url,
            type: "GET",
            dataType: "json",
            success: function(data){
            var videoLength = $(data.feed.entry).length;
            for(x=0; x<videoLength;x++)
            {
                var videoUrl = data.feed.entry[x].media$group.yt$videoid.$t;
                console.log(videoUrl);
            }
        }
        });
    }); 
```

查看控制台以查看视频 ID。它还可以与播放列表一起使用，并将提供播放列表下的所有视频 ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T18:40:49.920

找到了。这或多或少是我正在寻找的，因为我在 Rails 中解析它：

[https://gdata.youtube.com/feeds/api/videos?q=deadmau5&v=2&alt=json&max-results=1&prettyprint=true&fields=entry(media:group(yt:videoid))](https://gdata.youtube.com/feeds/api/videos?q=deadmau5&v=2&alt=json&max-results=1&prettyprint=true&fields=entry%28media%3agroup%28yt%3avideoid%29%29)

注意区别是我添加了 fields=entry(media:group(yt:videoid))

上面的答案很好，在很多情况下可能更好

# encryption - openssl/RSA 示例

> ID：12655274
> 
> 赞同：0
> 
> 时间：2012-09-29T18:21:37.553
> 
> 标签：encryption, openssl, rsa

我在哪里可以找到他们在链接
[OpenSSL 中所说的 openssl/rsa 示例：RSA Encryption/Decryption, key generation & key persistence](https://stackoverflow.com/questions/10779027/openssl-rsa-encryption-decryption-key-generation-key-persistance/12653722#comment17071616_12653722)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T10:21:32.460

下载 OpenSSL 的源代码并解压存档。查看里面的目录：

1.  [源目录]/apps
2.  [source-dir]/demos （我特别建议查看以下文件：**[source-dir]/maurice**）

我希望这会有所帮助。

# iphone - Objective c - 以 NSDictionary 作为参数的宏

> ID：12655283
> 
> 赞同：2
> 
> 时间：2012-09-29T18:22:40.907
> 
> 标签：iphone, objective-c, ios, macros

我有一个我只想在某些情况下执行的方法（例如我不想在调试模式下执行它。）这个方法有两个参数：`NSString`和`NSDictionary`

例如这个类方法：

```
+ (void)doSomethingWithString:(NSString *)str andDictionary:(NSDictionary *)dic; 
```

所以我想定义一个宏，并在不需要时禁用它。
像这样的东西：

```
#define METHOD_ENABLED 

#ifdef METHOD_ENABLED
    #define MACRO_METHOD(_STR, _DIC) [SomeClass doSomethingWithString:_STR andDictionary:_DIC];
#else
    #define MACRO_METHOD(_STR, _DIC)
#endif 
```

并使用它我调用：

```
MACRO_METHOD(@"a string", [NSDictionary dictionaryWithObject:@"object" forKey:@"key]); 
```

这是我应该怎么做的吗？我什至可以有一个以 NSDictionary 作为参数的宏吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T18:56:41.527

当然。只要您保证`_STR`对字符串进行评估并`_DIC`真正对字典进行评估，那么您所做的事情就没有错。这种类型的宏通常用于调试/发布/版本条件编译。

顺便说一句，使用最近的 Clang 编译器，您可以简化`[NSDictionary dictionaryWithObject:@"object" forKey:@"key"]`为`@{@"key":@"object"}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T19:13:25.963

在面向对象编程中，宏是邪恶的元素。在拥有所有 OOAD 技术的同时使用宏是一种不好的方法。如果您真的必须坚持使用宏，我会这样做：

在一些全局单例中设置设置：

```
globals.needToDoSomethingWithStringAndDictionary = MACRO_ENABLED; // where macro is bool 
```

然后在您可能需要调用的任何地方：

```
[SomeClass doSomethingWithString: aString andDictionary: aDictionary]; 
```

而守卫在方法之内：

```
+(void) doSomethingWithString aString andDictionary: aDictionary
{
   if ([globals sharedGlobals].needToDoSomethingWithStringAndDictionary)
    {
    // do your stuff
    }
} 
```

这使您可以在调试时完全控制代码，并使您的代码维护变得容易！

# c++ - 在 if 语句的条件部分定义变量？

> ID：12655284
> 
> 赞同：80
> 
> 时间：2012-09-29T18:22:55.093
> 
> 标签：c++, variables, if-statement, standards

我很震惊，这是允许的：

```
if( int* x = new int( 20 ) )
{
    std::cout << *x << "!\n";
    // delete x;
}
else
{
    std::cout << *x << "!!!\n";
    // delete x;
}
// std:cout << *x; // error - x is not defined in this scope 
```

那么，这是标准允许的还是只是编译器扩展？

* * *

[PS 由于对此有几条评论 - 请*忽略*这个例子是“坏的”或危险的。我知道什么。这只是我想到的第一件事，例如。]

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-09-29T18:28:45.753

这是规范允许的，因为 C++98。

来自第 6.4 节“选择语句”：

> 由条件中的声明引入的名称（由类型说明符序列或条件的声明符引入）的范围从其声明点到由条件控制的子语句结束。

以下示例来自同一部分：

```
if (int x = f()) {
    int x;    // ill-formed, redeclaration of x
}
else {
    int x;    // ill-formed, redeclaration of x
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-29T19:39:38.620

不是真正的答案（但注释不太适合代码示例），更多的是它非常方便的原因：

```
if (int* x = f()) {
    std::cout << *x << "\n";
} 
```

每当 API 返回一个“选项”类型（它也恰好有一个可用的布尔转换）时，可以利用这种类型的构造，以便该变量只能在可以使用其值的上下文中访问。这是一个非常强大的成语。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-09-29T18:28:28.593

它是标准的，即使在旧的 C++ 98 版本的语言中也是如此：

![在此处输入图像描述](../Images/d637741e111df3972f5134ec1247507a.png)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-29T18:27:22.370

`while`在 a 、`if`和`switch`语句的条件部分定义变量是标准的。相关条款是 6.4 [stmt.select] 第 1 段，它定义了条件的语法。

顺便说一句，您的使用毫无意义：如果`new`失败，则会引发`std::bad_alloc`异常。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-17T02:30:27.643

*这是一个示例，演示了在if*条件中声明的变量的非典型用法。

变量的类型`int &`既可以转换为布尔值，也可以在*then*和*else*分支中使用。

```
#include <string>
#include <map>
#include <vector>
using namespace std;

vector<string> names {"john", "john", "jack", "john", "jack"};
names.push_back("bill"); // without this push_back, my g++ generated exe fails :-(
map<string, int> ages;
int babies = 0;
for (const auto & name : names) {
    if (int & age = ages[name]) {
        cout << name << " is already " << age++ << " year-old" << endl;
    } else {
        cout << name << " was just born as baby #" << ++babies << endl;
        ++age;
    }
} 
```

输出是

```
john was just born as baby #1
john is already 1 year-old
jack was just born as baby #2
john is already 2 year-old
jack is already 1 year-old
bill was just born as baby #3 
```

不幸的是，条件中的变量只能用'='声明语法来声明。

这排除了具有显式构造函数的其他可能有用的类型案例。

例如，下一个使用 an 的示例`std::ifstream`不会编译...

```
if (std::ifstream is ("c:/tmp/input1.txt")) { // won't compile!
    std::cout << "true: " << is.rdbuf();
} else {
    is.open("c:/tmp/input2.txt");
    std::cout << "false: " << is.rdbuf();
} 
```

2019 年 1 月编辑...您现在可以效仿我解释的无法完成的事情...

这适用于 C++11 中的 ifstream 等可移动类，甚至适用于自 C++17 以来具有复制省略的不可复制类。

2019 年 5 月编辑：使用 auto 来减轻冗长

```
{
    if (auto is = std::ifstream ("missing.txt")) { // ok now !
        std::cout << "true: " << is.rdbuf();
    } else {
        is.open("main.cpp");
        std::cout << "false: " << is.rdbuf();
    }
}
struct NoCpy {
    int i;
    int j;
    NoCpy(int ii = 0, int jj = 0) : i (ii), j (jj) {}
    NoCpy(NoCpy&) = delete;
    NoCpy(NoCpy&&) = delete;
    operator bool() const {return i == j;}
    friend std::ostream & operator << (std::ostream & os, const NoCpy & x) {
        return os << "(" << x.i << ", " << x.j << ")";
    }
};
{
    auto x = NoCpy(); // ok compiles
    // auto y = x; // does not compile
    if (auto nocpy = NoCpy (7, 8)) {
        std::cout << "true: " << nocpy << std::endl;
    } else {
        std::cout << "false: " << nocpy << std::endl;
    }
} 
```

# php - 使用php从具有多个值的列中获取数据？

> ID：12655289
> 
> 赞同：0
> 
> 时间：2012-09-29T18:23:18.253
> 
> 标签：php, mysql, sql

基本上，我将产品数据存储在数据库中，该数据库还有一个名为“标签”的字段，旨在存储有关该特定产品的标签。这些标签以如下格式存储：

“标签 1，标签 2，标签 3，标签 4”

问题是说我想要一个页面，用户可以在其中查看该特定标签的所有最新产品。如果不获取每个产品，获取“标签”字段，将它们分开，然后最后检查那里是否存在该特定标签，我怎么可能做到这一点？

是否可以使用 mysql 命令执行此操作？

很抱歉我没有发布任何代码，我只是不确定我应该如何去做这样的事情。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:27:00.047

可能不是最有效的方法，但是：

```
WHERE tags LIKE '%$search_tag%' 
```

这假定搜索的标签不能被另一个标签包含，或者您需要：

```
WHERE
   tags LIKE '%,$search_tag%'
   OR tags LIKE '%$search_tag,%'
   OR tags = '$search_tag' 
```

显然，`search_tag`需要正确转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T18:27:11.357

You should [normalize](http://en.wikipedia.org/wiki/Database_normalization) your database, so you can perform the search straight via SQL query.

# matlab - matlab / octave中的映射函数，如LISP中的mapcar

> ID：12655294
> 
> 赞同：2
> 
> 时间：2012-09-29T18:23:40.500
> 
> 标签：matlab, octave, higher-order-functions

我希望在 matlab 中找到映射函数。所以这是我正在考虑的例子：

```
kvec = 0:1:16
kvec =

 0     1     2     3     4     5     6     7     8     9    10    11    12    13    14    15    16 
```

现在我希望生成一个名为 hvec 的第二个向量，它基本上为 kvec 中的每个值计算 10 ^ -k。

有没有一种优雅的方式来做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T18:28:07.290

我想你需要的是

```
kvec = 0:1:16;
hvec = 10 .^ -kvec 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T19:48:10.270

`arrayfun`、`cellfun`、`spfun`和是 MATLAB`structfun`中`bsxfun`一些有用的映射函数。

例如 using`arrayfun` `hvec`将以这种方式计算：

```
hvec = arrayfun(@(x) 10^-x, kvec) 
```

这种语法显然比使用数组幂要长`.^`，但作为`arrayfun`一个**映射函数**，它适用于任何给定的函数，而只有少数**数组函数**可用（其运算符的第一个字符是`.`等`.^`）`.*`。

# html - 如何搜索特定文本并回显该特定文本的下一个字符？

> ID：12655297
> 
> 赞同：0
> 
> 时间：2012-09-29T18:24:00.710
> 
> 标签：html, linux, bash, command-line

我有一个项目要求，在搜索特定文本后需要打印文本的下一个字符。

为了更好地理解，这里举个例子。

我有一个`index.html`文件，想在搜索文本后打印一个特定的文本。

问题：我有文本`<b>WELCOME</b>`。`index.html`现在我想搜索`<b>`，打印文本`WELCOME`直到`</b>`。

```
bash# cat index.html | grep "" ?? 
```

请帮助我在 Linux 中使用 shell 命令或 shell 脚本打印此内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T19:58:11.950

您可以为此使用 sed：

```
sed -n -e 's/.*<b>\([^<]*\)<\/b>.*/\1/p' index.html 
```

“-n”标志告诉 sed 只打印你告诉它的行。

“s”命令将用另一个字符串替换与正则表达式匹配的字符串。我将尝试解释正则表达式（regex）：

1.  `.*`匹配一个字符序列
2.  `<b>`匹配相应的字符串
3.  `\([^<]*\)`稍微复杂一点。对于初学者，以反斜杠为前缀的括号告诉 sed 将匹配的内容存储到辅助变量中。`[^<]`匹配除字符之外的任何字符，`<`后面的星号表示它应该匹配它的序列（即不是的字符序列`<`）。
4.  `<\/b>`匹配`</b>`字符串，但我们必须用反斜杠转义斜杠字符，以免 sed 误以为它是正则表达式的结尾。
5.  `.*`匹配另一个字符序列

在正则表达式之后，一个字符串告诉 sed 使用什么作为替换。在这种情况下，它只是`\1`告诉 sed 打印第一个捕获组（即，在这种情况下，上面第 3 部分匹配的所有内容，这意味着和之间的所有内容`<b>`）`</b>`。

最后在最后一个斜线之后，我们告诉 sed 打印带有“p”字符的替换行。如果一行与正则表达式不匹配，则不会打印，因为我们使用了上面的“-n”标志。

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T20:04:28.883

以快速而肮脏的方式打印当前页面标题的示例：

```
wget -q -O - 'http://tinyurl.com/9n6wayk' |
    sed -n '/<title>/{s:<title>\(.*\)</title>:\1:;p;q;}' 
```

sed 命令详细说明：

*   该`-n`选项仅显示匹配行
*   `//`开头的部分就像一个`grep`：我们使用匹配线
*   是`{}`用来附上命令的
*   the`s:::`是一个替换（分隔符可以是任何字符，默认是`/`）
*   正在`\(.*\)`抓拍
*   \1 是捕获的字符串
*   `p`是否可以打印修改后的字符串
*   `q`匹配线后是否有退出

更简洁的方法是在 Python、Ruby 或 Perl 等第三代语言中使用[Xpath](http://en.wikipedia.org/wiki/Xpath)。

在当前 stackoverflow 页面的 shell 中使用 Xpath 的简单方法：

```
xmllint 2>/dev/null --html \
    --xpath '/html/head/title/text()' \
    http://tinyurl.com/9n6wayk 
```

`xmllint`是[libxml的一部分](http://www.xmlsoft.org/)

# javascript - 单击浏览器后退按钮时如何保持在同一页面上

> ID：12655300
> 
> 赞同：0
> 
> 时间：2012-09-29T18:24:21.770
> 
> 标签：javascript, jquery, html

![在此处输入图像描述](../Images/4b3c4212946a9a6843185b0667588681.png)

我有 2 个 div，图片上显示为红色。

加载时显示 Div1 而隐藏 Div2。

Div1 中有 4 个 div，其中有 4 个 onclick 事件，它们调用 ajax 并隐藏 div1 并显示第二个加载的数据。

当单击浏览器后退按钮时，它需要我返回一页，我希望页面回到默认位置，div1 可见，div2 隐藏。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T18:26:06.753

在 html5 中使用历史推送状态 - [https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)

在不支持推送状态的浏览器中，还有一个 js 脚本默认为 hashbangs。

# javafx-2 - JavaFx 2.x：将两个轴都作为数字的条形图

> ID：12655303
> 
> 赞同：5
> 
> 时间：2012-09-29T18:25:06.990
> 
> 标签：javafx-2, bar-chart, linechart

1）我想要一个条形图，其中两个轴都是数字（`<Number, Number>`），但似乎不支持，并且您需要有一个类别和一个数字轴。

有没有办法覆盖 BarChart 类以将两个轴都作为数字，数字？

2）是否可以使用 LineChart 来绘制条形图而不是 BarChart 类来获得直方图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T11:48:19.467

你可以试试这个解决方案

```
XYChart.Series series = new XYChart.Series();                        
        series.getData().add(new XYChart.Data(i, i));
        series.getData().add(new XYChart.Data(i, listValue));            
        lineChart.getData().addAll(series); 
```

但我警告你，与数字轴相比，它非常慢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T18:31:35.040

找到了一个很好的解决方案：我建议这样做

```
series.getData().add(new XYChart.Data(i, 0));
        series.getData().add(new XYChart.Data(i, listValue));          
        series.getData().add(new XYChart.Data(i, 0)); 
```

通过这种方式，您可以使用 LineChart 绘制条形图

此外，如果您想从 AreaChart 中删除符号，您可以使用 css 来完成此操作

```
.chart-area-symbol 
            { -fx-background-color: null, null; } 
```

# spring-integration - TCP 入站通道适配器与 Tcp 入站通道网关 - Spring 集成

> ID：12655306
> 
> 赞同：0
> 
> 时间：2012-09-29T18:25:39.330
> 
> 标签：spring-integration

tcp入站通道适配器和tcp入站通道网关（Spring集成）有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T11:09:13.850

tcp 适配器用于单向集成（接收消息，但不发送回复），而网关用于您希望服务器返回回复的情况。

请参阅此处的第一段...

[http://static.springsource.org/spring-integration/reference/html/ip.html](http://static.springsource.org/spring-integration/reference/html/ip.html)

这对所有 Spring Integration 组件都是通用的（适配器是单向的，网关用于请求/回复）。

# google-app-engine - Google App Engine - 将应用程序从已关闭的帐户转移到另一个帐户

> ID：12655307
> 
> 赞同：2
> 
> 时间：2012-09-29T18:25:38.803
> 
> 标签：google-app-engine, google-account

是否可以将应用程序从已关闭的 Google 帐户转移到新的 Google 帐户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:07:25.393

没有自动的方法可以做到这一点。您应该联系 GAE 支持团队，以防他们在这方面为您提供帮助。

# java - 如何使用 XStream 为相同的类元素设置不同的别名

> ID：12655309
> 
> 赞同：1
> 
> 时间：2012-09-29T18:25:44.400
> 
> 标签：java, xml, alias, xstream

如何使用 XStream 为同一类元素的 XML 元素设置不同的别名？

我有以下类，并希望重用 Phone 类来表示将生成以下格式的 XML 的家庭电话和工作电话

```
<customer>
  <id>222</id>
  <name>TestCustomer</name>
  <workPhone>
    <workPhoneNumber>12345678</workPhoneNumber>
    <workPhoneExtn>2345</workPhoneExtn>
  </workPhone>
  <workPhone>
    <workPhoneNumber>23456789</workPhoneNumber>
    <workPhoneExtn>2555</workPhoneExtn>
  </workPhone>
  <homePhone>
    <homePhoneNumber>222222222</homePhoneNumber>
    <homePhoneExtn>1234</homePhoneExtn>
  </homePhone>
</customer> 
```

使用以下代码，我只能为 homephone 和 workphone 对象设置不同的别名，直到类级别。

```
@XStreamAlias("customer")
public class Customer {

    private String id;
    private String name;    

    @XStreamImplicit(itemFieldName = "workPhone")
    private ArrayList<Phone> workPhones;

    @XStreamImplicit(itemFieldName = "homePhone")
    private ArrayList<Phone> homePhones;
}

public class Phone {
    private String number;
    private String extn;
} 
```

通过上面的类定义，我只能得到如下的 XML 结构：

```
<customer>
  <id>222</id>
  <name>TestCustomer</name>
  <workPhone>
    <number>12345678</number>
    <extn>2345</extn>
  </workPhone>
  <workPhone>
    <number>12345678</number>
    <extn>2355</extn>
  </workPhone>
  <homePhone>
    <number>222222222</number>
    <extn>1234</extn>
  </homePhone>
</customer> 
```

我不清楚映射器或转换器是否有助于实现这一目标。

有人可以建议是否有设置电话号码和分机以取别名“workphoneNumber”、“workphoneExtn”/“homePhoneNumber”、“homePhoneExtn”，具体取决于其类的别名？它应该在编组和解组期间都有效。请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-13T20:47:10.550

尝试这个：

```
xstream.alias("workPhone", Person.class);
xstream.alias("homePhone", Person.class);

xstream.aliasField("workPhoneNumber", Person.class, "number");
xstraem.aliasField("homePhoneNumber", Person.class, "number");

... 
```

# c++ - 使用 ShellExecute 打开没有“.exe”扩展名的可执行文件

> ID：12655314
> 
> 赞同：3
> 
> 时间：2012-09-29T18:26:17.393
> 
> 标签：c++, windows, winapi

我想用 ShellExecute 打开一个没有“.exe”扩展名的可执行文件。我可以使用 CreateProcess，但我更喜欢使用 ShellExecute。有什么办法吗？

我将 C++ 与 win32api 函数一起使用。

谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-01T21:15:13.993

您使用[该结构的`lpClass`成员`SHELLEXECUTEINFO`](http://blogs.msdn.com/b/oldnewthing/archive/2010/07/01/10033224.aspx)说：“我希望您将此文件视为 EXE，即使它看起来不像扩展名中的一个。”

```
int _tmain(int argc, _TCHAR* argv[])
{
  SHELLEXECUTEINFO sei = {0};
  sei.cbSize = sizeof(sei);
  sei.nShow = SW_SHOWNORMAL;
  sei.lpFile = TEXT("myprogram.wrongextension");
  sei.fMask = SEE_MASK_CLASSNAME;
  sei.lpVerb = TEXT("open");
  sei.lpClass = TEXT("exefile");
  ShellExecuteEx(&sei);
  return 0;
} 
```

# jquery - Jquery：javascript验证后弹出窗口

> ID：12655317
> 
> 赞同：-1
> 
> 时间：2012-09-29T18:26:36.740
> 
> 标签：jquery, javascript-events

我有一个带有 javascript 验证 (Checkvals) 功能的表单，在 javascript 验证之后，我需要制作一个 Jquery 弹出窗口以进行确认。有人可以帮助我检查javascript验证是否完整且有效然后弹出屏幕吗？

```
$(document).ready(function(){
   $('#dialog').dialog  ({
      autoOpen: false,  
      width: 400,  
      modal: true,   
      resizable: false,   
      buttons: {    
         "Print Request Letter": function() { 
            document.LetterRequest.submit();  
         }, 
         "Cancel": function() {  
            $(this).dialog("close"); 
         }    
      }    
   });   
   $("#LetterRequest").submit(function(e){    
      if (!CheckVals() return false) {    
         e.preventDefault();    
         $("#dialog-confirm").html($('.NoOfLetters').val()); 
         $('#dialog').dialog('open');   
      }          
   });     
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:44:09.563

我想你想要这个

```
$("#LetterRequest").submit(function(e){    
    e.preventDefault();
    if (!CheckVals()) return false; // validation fails and stop execution
    else
    {
        $("#dialog-confirm").html($('.NoOfLetters').val()); 
        $('#dialog').dialog('open'); // opens the dialog
    }
}); 
```

并且在按钮中，您应该使用

```
$("#LetterRequest")[0].submit(); 
```

代替

```
document.LetterRequest.submit(); 
```

# matlab - 将函数传递给matlab / octave中的函数

> ID：12655318
> 
> 赞同：2
> 
> 时间：2012-09-29T18:26:38.720
> 
> 标签：matlab, octave

我正在考虑将函数传递给函数。

我想要做的是创建一个基于有限差分的函数，我可以将不同的函数传递给它以进行区分。

例如：

```
function ybar = diff_finite ( x , h , function_inquestion) 
  ybar = ((function_inquestion(x+h) - function_inquestion(x)) / h
end 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T18:53:42.473

看看[函数句柄](http://www.mathworks.com/help/matlab/ref/function_handle.html)。

# javascript - Backbone.js：未捕获的类型错误：对象# has no method 'get' Hi I have a Collection which uses fetch() to do the initial fetch from the API. On a user's interaction, a second fetch is triggered, but instead of using the original 问问题 问问题 2012-09-29T18:27:00.157 9648 次 This question shows research effort; it is useful and clear 3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Hi I have a Collection which uses fetch() to do the initial fetch from the API. On a user's interaction, a second fetch is triggered, but instead of using the original fetch(), I used a fetchNew() that I defined myself: Collection ListingCollection = Backbone.Collection.extend({ model: Listing, url: '/api/search_by_bounds', fetchNew: function(options) { options = options || {}; var collection = this, success = options.success; options.success = function(resp, status, xhr) { _(collection.parse(resp, xhr)).each(function(item) { // added this conditional block if (!collection.get(item.id)) { // Update collection collection.add(item, {silent:true}); // Render View new ListingMarkerView({ model:item }).render(); } }); if (!options.silent) { collection.trigger('reset', collection, options); } if (success) success(collection, resp); }; return (this.sync || Backbone.sync).call(this, 'read', this, options); } }); This will add only the new Models to the collection, and render only the Views of these new Models. (if all the Views are removed and re-rendered, it will cause a flicker) View ListingMarkerView = Backbone.View.extend({ render: function() { var marker = L.marker([this.model.get('lat'), this.model.get('lng')]); markers.addLayer(marker); }, close: function() { this.unbind; } }); Error However I am getting an error: Uncaught TypeError: Object # has no method 'get' which corresponds to this line in ListingMarkerView var marker = L.marker([this.model.get('lat'), this.model.get('lng')]); Debug If I were to place a console.log(item) before the line that renders ListingMarkerView console.log(item) new ListingMarkerView({ model:item }).render(); I do see a valid item: Object id: "2599084" lat: "42.276852" lng: "-71.165421" price: "2850" __proto__: Object So... Question What seems to be the problem? How can this be solved? Thank you! PDO - Get row count before limit applied I have a pagination script which requires the row count(obviously) and the row count returned from my select statement which is limited gives only 20 (because the amount of rows returned is 20) but I actually need the row count BEFORE the limit is applied. Any ideas? javascriptjquerybackbone.js 4 1 回答 1 This answer is useful 6 问题是渲染没有this正确定义。initialize在视图类中添加一个方法，如下所示： initialize: function() { _.bindAll(this); //Make all methods in this class have `this` bound to this class } 于 2012-09-29T18:38:37.007 回答 Related 1 objective-c - 如何在类之间共享方法 2 java - 用classpath编译java找不到所有jar文件 1 c++ - 排列ID..？C++ 0 windows - 尝试使用 boost 文件系统。找不到 -lboost_system 1 javascript - Javascript：生成随机数并存储在多维数组中 1 c - opengl 使聚光灯像手电筒一样 0 javascript - 如何检查其父标签中是否允许嵌套标签？ 1 bison - lex中无法识别的规则错误 2 perl - 如何解释替换？ 5 internet-explorer - IE9 a > span 不会触发右键链接菜单 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12655323
> 
> 赞同：3
> 
> 时间：
> 
> 标签：javascript, jquery, backbone.js

Hi I have a Collection which uses `fetch()` to do the initial fetch from the API. On a user's interaction, a second fetch is triggered, but instead of using the original `fetch()`, I used a `fetchNew()` that I defined myself:

**Collection**

```
ListingCollection = Backbone.Collection.extend({
    model: Listing,
    url: '/api/search_by_bounds',

    fetchNew: function(options) {
        options = options || {};
        var collection = this,
            success = options.success;
        options.success = function(resp, status, xhr) {
            _(collection.parse(resp, xhr)).each(function(item) {
                // added this conditional block
                if (!collection.get(item.id)) {
                    // Update collection
                    collection.add(item, {silent:true});
                    // Render View
                    new ListingMarkerView({ model:item }).render();
                }
            });
            if (!options.silent) {
                collection.trigger('reset', collection, options);
            }
            if (success) success(collection, resp);
        };
        return (this.sync || Backbone.sync).call(this, 'read', this, options);
    }
}); 
```

This will add only the new Models to the collection, and render only the Views of these new Models. (if all the Views are removed and re-rendered, it will cause a flicker)

**View**

```
ListingMarkerView = Backbone.View.extend({

    render: function() {
        var marker = L.marker([this.model.get('lat'), this.model.get('lng')]);
        markers.addLayer(marker);
    },

    close: function() {
        this.unbind;
    }

}); 
```

**Error**

However I am getting an error:

```
Uncaught TypeError: Object #<Object> has no method 'get' 
```

which corresponds to this line in `ListingMarkerView`

```
var marker = L.marker([this.model.get('lat'), this.model.get('lng')]); 
```

**Debug**

If I were to place a `console.log(item)` before the line that renders `ListingMarkerView`

```
console.log(item)
new ListingMarkerView({ model:item }).render(); 
```

I do see a valid `item`:

```
Object
    id: "2599084"
    lat: "42.276852"
    lng: "-71.165421"
    price: "2850"
    __proto__: Object 
```

So...

**Question**

What seems to be the problem? How can this be solved? Thank you!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T18:38:37.007

问题是渲染没有`this`正确定义。`initialize`在视图类中添加一个方法，如下所示：

```
initialize: function() {
   _.bindAll(this); //Make all methods in this class have `this` bound to this class
} 
```

# pdo - PDO - 在应用限制之前获取行数

> ID：12655325
> 
> 赞同：1
> 
> 时间：2012-09-29T18:27:06.410
> 
> 标签：pdo

我有一个分页脚本，它需要行数（显然），从我的 select 语句返回的行数是有限的，只给出 20（因为返回的行数是 20）但我实际上需要在应用限制之前的行数. 有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T19:23:49.413

解决此问题的唯一方法是发出 2 个查询：

```
$dbh = new PDO (mysql:host=$host;dbname=$database", $user, $password);

$query = $pdo->prepare("select count(*) FROM mytable");
$query->execute();
$count = $query->fetchColumn();

$query = $pdo->prepare("select * FROM mytable LIMIT 20");
$query->execute(); 
```

如果您在限制查询上使用 where on，则必须在计数查询上使用相同的 where。

# android - Actionbar tab selection divider color

> ID：12655326
> 
> 赞同：5
> 
> 时间：2012-09-29T18:27:07.520
> 
> 标签：android, styles, android-actionbar

In the picture below from [the developers guide](http://developer.android.com/guide/topics/ui/actionbar.html#Style) of android you see the light blue edge underneath the tabs. I tried to style this small edge with an other color but i had no success.

Meanwhile i succeed to style the action bar, and tabs. But the only thing i can't get succeed on is changing that little blue edge. I even don't know how its called in the guide. Because the divider is the little stripe between all the taps:

[ BALLOONS | BIKES | ANDROIDS | PASTRIES ]

Can someone help me with this? Which style i have to use to change this color?

The follow line didn't work out:

```
<item name="android:actionBarDivider">@drawable/divider</item> 
```

![enter image description here](../Images/f5286fa82c64423a58c6dbadb79dcc5a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-06T09:07:10.453

如果您想使用操作栏选项卡，请使用 pagerslidingtabstrip 库制作选项卡，那么这里是代码

```
<item name="android:actionBarTabBarStyle">@style/customTabBar</item> 
```

操作栏选项卡指示器中的分隔符代码

```
<style name="customTabBar" parent="@style/Widget.AppCompat.ActionBar.TabBar">
<item name="android:showDividers">middle</item>
<!-- give your divider here -->
<item name="android:divider">@drawable/tabindicator</item>
<item name="android:dividerPadding">0dp</item> 
```

其中@drawble/tabindicator 是drawble 中的图片

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T14:58:43.403

它被称为标签发线样式。您可以使用此工具生成并可能弄清楚如何更改颜色：http: [//jgilfelt.github.io/android-actionbarstylegenerator/](http://jgilfelt.github.io/android-actionbarstylegenerator/)

# java - Keep dialog for at least a couple of seconds

> ID：12655331
> 
> 赞同：0
> 
> 时间：2012-09-29T18:27:36.620
> 
> 标签：java, android, dialog

How can I give extra time (at least 2 or 3 more seconds) to a progressdialog popup in AsyTask just so that it doesn't dismiss so quickly and the user can see it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:31:28.083

如果您的意思是 Toast，则必须增加持续时间（以毫秒为单位）：

```
Toast.makeText(context, text, duration).show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T18:45:02.470

完成处理并准备好关闭对话框后，您可以在 3 秒后关闭对话框，如下所示：

```
new Handler().postDelayed(new Runnable() {

        @Override
        public void run() {
            mProgressDialog.dismiss();
        }
}, 3 * 1000); 
```

这将`ProgressDialog`在 3 秒后关闭。

祝你好运 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T18:32:09.923

**-**使用`sleep()`一定延迟的方法，然后使用`join()`方法，然后调用`dismiss()`对话框上的 。

例如：

```
Thread t =new Thread.sleep(new Runnable(){

public void run(){

try{

    Thread.sleep(3000);

   }catch(Exception ex){}
}

});

t.start();
try{
t.join();
}catch(Exception ex){}

mdialog.dismiss(); 
```

**-**如果您**错误**地引用`Toast`为`Dialog`，那么您始终可以使用`Toast.LONG`常量来使吐司显示更长的时间。

# vba - I need help trying to solve this loop

> ID：12655335
> 
> 赞同：0
> 
> 时间：2012-09-29T18:28:22.517
> 
> 标签：vba, loops

Im having trouble with this code that I am suppose to write for my class. The program itself works until the looping. I have never made a loop before and i wasnt in class the day she introduced it so im kind of guessing on how its done. If anyone could post comments on how i should fix it that would be great. This is also in VBA

```
Module Bits

    Dim employeeName As String
    Dim currentSalary As Decimal
    Dim payIncrease As Single
    Dim runReply As Char
    Dim employeeSalary As Single
    Dim numbersOfEmployees As Decimal
    Dim projectedSalary As Decimal
    Dim increasedSalary As Decimal
    Dim y As Char
    Dim n As Char

    Sub Main()

            Console.Out.WriteLine("Bits and Pieces Manufacturing Company")
            Console.Out.WriteLine(DateString & "                        By.Cristian Bouchez")

        Do

            Console.Out.Write(vbCrLf & "Enter your employee's name:                    ")
            employeeName = Console.In.ReadLine()
            Console.Out.Write("Enter your employee's current weekly salary:  $")
            currentSalary = Console.In.ReadLine()
            Console.Out.Write("Enter your employee's pay increase:           %")
            payIncrease = Console.In.ReadLine()

            payIncrease = payIncrease / 100
            employeeSalary = currentSalary * payIncrease
            payIncrease = payIncrease * 100
            employeeSalary = employeeSalary + currentSalary

            numbersOfEmployees = numbersOfEmployees + 1
            projectedSalary = projectedSalary + currentSalary
            increasedSalary = increasedSalary + (employeeSalary - currentSalary)

            Console.Out.WriteLine(vbCrLf & vbCrLf & employeeName & " will earn $" & employeeSalary & _
                                  " after a %" & payIncrease & " raise.")

            Console.Out.WriteLine(vbCrLf & "Do you want to calaculate another employee's weekly pay?")
            Console.Out.Write("Enter Y for yes and N for no:  ")
            runReply = Console.In.ReadLine()

            Console.ReadKey()

        Loop Until runReply = n

        Console.Out.WriteLine(vbCrLf & "*******************************" & vbCrLf)

    End Sub

End Module 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T18:41:56.957

1) 设置 n= "n"
2) 循环直到 LCase(runReply) = n

# cocos2d-iphone - Cocos2d sprite wont move?

> ID：12655336
> 
> 赞同：0
> 
> 时间：2012-09-29T18:28:23.180
> 
> 标签：cocos2d-iphone, ios6

I've been trying to get my sprit to move but it wont budge! Im using cocos2d v2.1 beta 2 and ios6 this is the code i've been using to move my sprite, whats wrong with it?

```
#import "CCTouchDispatcher.h"
 CCSprite *faceeater;

 -(id) init
 {

if( (self=[super init]) ) {
}

CCSprite* faceeater = [CCSprite spriteWithFile:@"fe.png"];
faceeater.position =  ccp( 200, 300 );
[self addChild:faceeater];
[self schedule:@selector(nextFrame:)];

[[CCDirector sharedDirector] touchDispatcher];

self.isTouchEnabled = YES;

  return self;

 }

 - (void) nextFrame:(ccTime)dt {
faceeater.position = ccp( faceeater.position.x + 100*dt, faceeater.position.y );
if (faceeater.position.x > 480+32) {
    faceeater.position = ccp( -32, faceeater.position.y );
}
}
- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event {
return YES;
}

- (void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event {
CGPoint location = [self convertTouchToNodeSpace: touch];

[faceeater stopAllActions];
[faceeater runAction: [CCMoveTo actionWithDuration:1 position:location]];
 } 
```

I can see the sprite but no matter what i don it doesn't move. Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:52:14.247

看起来你需要改变

```
CCSprite* faceeater = [CCSprite spriteWithFile:@"fe.png"]; 
```

至

```
faceeater = [CCSprite spriteWithFile:@"fe.png"]; 
```

看起来您在这里有两个不同的 CCSprite* faceeater，一个在 init 中是本地的，一个在您的实现中定义。一个在这里：

```
@implementation HelloWorldLayer
{
CCSprite* faceeater ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T19:51:45.687

nextFrame 方法是否正在运行？用断点检查。

ccTouchEnded 是否运行？用断点检查。

是否有任何其他代码设置了精灵的位置？您是否可能每帧都运行 CCMoveXX 方法？

注意：如果您在 nextFrame 中手动更新位置并同时运行 CCMoveTo 操作，则结果可能无法预测。

# javascript - 使用第三方 Javascript 执行文档的 Javascript 功能？

> ID：12655338
> 
> 赞同：-2
> 
> 时间：2012-09-29T18:28:28.050
> 
> 标签：javascript, dom-events, unobtrusive-javascript

假设我有 localhost/site/index.php 和一个 Javascript 函数和一个按钮：

```
<html>
<head>
    <meta charset="utf-8" />
    <title>Page Title</title>
<script type="text/javascript">
    function my_function(){
        alert('Hello eveeryone!');
    }
</script>

</head>

<body>

<button type="button" onclick="my_function();" />Here is my button</button>

</body>
</html> 
```

有没有办法在`my_function()`不点击按钮的情况下执行 - 通过使用**某种书签或类似的浏览器内驻留 Javascript**或其他任何不暗示点击按钮默认与文档的 Javascript 交互的东西？

编辑：更好地解释问题：我可以使用 localhost/site/script.php 来触发上面提到的驻留在 localhost/site/index.php 中的 my_function 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:31:58.737

您可以使用身体`onload`功能：

```
<body onload="my_function();"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T18:32:45.820

您可以使用 jQuery 触发器。

```
$('button').trigger('click') 
```

按钮的 onclick 处理程序被调用。（实际上所有按钮的 onclick 处理程序都被调用。所以可能为特定按钮创建一个类或 id 来定位它）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T18:33:15.030

我假设该网页不是你的，所以你不能直接修改它。因此，如果您有一种在页面上下文中执行 javascript 的方法（书签或插件或类似的东西）并且您知道点击处理程序函数的名称是什么，那么您可以直接执行点击处理程序：

```
my_function() 
```

* * *

编辑：因为现在从评论中可以看出您实际上是在询问有关您自己网页的安全性的问题。

您不能阻止在您自己的网页中执行 javascript 函数。人们有多种方法可以从他们自己的浏览器将代码注入您的页面，这些浏览器可以调用您网页中可全局访问的任何内容。你无法阻止这一点。直接调用事件处理程序可能会变得更加困难，但这只是让它工作得稍微多一些，但并不能阻止它。

必须在您的服务器上实施安全性 - 它不能在网页中实施。浏览器客户端网页不是安全环境。它可以自由修改。无论您试图保护什么，都必须在服务器上实现。

# mod-rewrite - 基于工作 web.config 的简单 mod 重写

> ID：12655342
> 
> 赞同：0
> 
> 时间：2012-09-29T18:29:01.337
> 
> 标签：mod-rewrite, web-config, iirf

对于导航到 link.html 以重定向到 index.php/link/ 的人来说，它是一个简单的重定向，同时仍保持任何查询字符串不变。

下面在 web.config 文件中使用 IIS7 的环境中完美运行。

```
<rule name="Rewrite for link.html">
    <match url="link.html" />
    <action type="Rewrite" url="index.php/link/" />
</rule>
<rule name="Rewrite CI Index">
    <match url=".*" />
    <conditions>
        <add input="{REQUEST_FILENAME}" pattern="css|js|jpg|jpeg|png|gif|ico|htm|html|ttf|eot" negate="true" />
        <add input="{REQUEST_FILENAME}" pattern="admin.php" negate="true" />
        <add input="{REQUEST_FILENAME}" pattern="index.php" negate="true" />
    </conditions>
    <action type="Rewrite" url="index.php/{R:0}" />
</rule> 
```

我有另一个 IIS 平台，它使用一个类似于 Apache 的 mod_rewrite 的插件

执行上述示例的 RewriteCond / RewriteRule 语法是什么？到目前为止，我所有的猜测都以不同的方式被炸毁了。

这是执行重写 CI 索引的现有 IIRF.ini 文件：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

问题是如何让 link.html 的重写以适应这种类似 apache 的语法。

TIA 寻求帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:38:29.150

只需在 RewriteCond/RewriteRule 块之前添加一个重定向规则：

```
RedirectRule ^link.html(.*)$ /index.php/link/$1 
```

# ruby-on-rails-3 - Rails 更新在我的一个字段中注入 Null 的操作

> ID：12655343
> 
> 赞同：0
> 
> 时间：2012-09-29T18:29:26.270
> 
> 标签：ruby-on-rails-3, activerecord, controller, null

我有一个带有呼叫的应用程序。每次通话都可以取消。当取消操作中的呼叫被取消时，我会呈现一个 cancel_form，它为用户提供取消选择的理由并利用更新操作来编写参数。

它运行良好，但是每当我使用它时，它都会清除我的 transfer_date 字段。参数显示设置了正确的 cancel_reason_id，然后将 transfer_date 设置为 NULL。我的代码中没有任何涉及 transfer_date 的内容，所以我很困惑。

这是params的代码和输出：

```
Params:
Processing by CallsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"SoiMjWjeMFXXeiA9N8nNwfIQDa7pbB0YS9XkmKY6AuQ=", "call"=>{"cancel_reason_id"=>"1"}, "button"=>"", "id"=>"183"}
  User Load (0.5ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 14 LIMIT 1
  Call Load (0.3ms)  SELECT "calls".* FROM "calls" WHERE "calls"."id" = $1 LIMIT 1  [["id", "183"]]
   (0.1ms)  BEGIN
   (0.6ms)  UPDATE "calls" SET "cancel_reason_id" = 1, "transfer_date" = NULL, "updated_at" = '2012-09-29 18:02:03.315975' WHERE "calls"."id" = 183
   (1.9ms)  COMMIT 
```

CallsController 取消操作：

```
def cancel
        @call = Call.find(params[:id])

        attrs = {
          call_status: 'cancel', 
          incharge_id: @call.units.first.incharge_id, 
          attendant_id: @call.units.first.attendant_id
        }
        attrs.merge!({ incharge2_id: @call.units.second.incharge_id, attendant2_id: @call.units.second.attendant_id }) if @call.units.count == 2

        if @call.update_attributes(attrs)
          @call.units.each do |unit|
            CallMailer.cancel_call(unit.incharge, @call).deliver
            CallMailer.cancel_call(unit.attendant, @call).deliver
           end
         render "cancel_form"
        else 
          redirect_to calls_url, :error => "Whoops."
        end
      end 
```

Cancel_form 视图

```
<%= form_for(@call) do |f| %>

  <%= f.label :cancel_reason %>
  <%= f.collection_select(:cancel_reason_id, CancelReason.all, :id, :reason, {}, {:class => 'select'}) %>

  <%= f.button :submit %>

<% end %> 
```

我尝试创建一个单独的 cancel_reason 操作并添加一个路由，但它显然也利用了更新操作并将 transfer_date 设置为 NULL。

我真的需要这个功能才能工作，但我现在的故障排除技能已经结束。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T17:01:13.407

```
 if params[:call].has_key? 'transfer_date(1i)'
      params[:call].parse_time_select! :transfer_date
    end 
```

通过包含这个条件语句，我能够只为包含参数键 transfer_date(1i) 的请求运行 parse_time 行。这最终解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T19:17:48.333

可能您只是错过了呼叫模型中 attr_accessible 中的 transfer_date 吗？

# hadoop - Oracle coherence 和 Hadoop HDFS 有什么区别

> ID：12655345
> 
> 赞同：4
> 
> 时间：2012-09-29T18:29:29.747
> 
> 标签：hadoop, hdfs, in-memory, oracle-coherence

Oracle Coherence 和 Hadoop HDFS 有什么区别，读过关于 HDFS 和 coherence（但没有什么清楚的）听起来都做同样的事情。这些是针对不同问题的不同技术还是相同技术但不同产品？需要更广泛地了解它们在技术方面的区别和相似之处，即实施视角，这两者在哪里适合？

注意：我不是在要求产品比较（所以没有大猩猩和鲨鱼）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T06:37:40.590

这两个系统正在实现两个概念。HDFS - 分布式文件系统，针对海量顺序 IO 进行了优化。
Oracle Coherence 是一种缓存解决方案，能够将磁盘用于其部分数据。它针对随机 IO 进行了优化

从技术上讲：
HDFS 不会在底层操作系统上进行任何缓存中继。它的服务（Datanode）应该被视为块设备。
通常的缓存解决方案提供 KeyValue 抽象、一些过期功能并主要使用内存作为存储。
分布式缓存通常使用一致性哈希构建，而 HDFS 维护集中目录（NameNode）。
同时，文件系统和缓存有很多共同点（如果我们将文件路径视为键）。

从上面看：这些系统有些可互换，但针对不同的场景构建，内部构建完全不同。

# python - Django级联删除反向外键

> ID：12655347
> 
> 赞同：14
> 
> 时间：2012-09-29T18:30:05.027
> 
> 标签：python, mysql, django

Django 展示了如何在文档中使用外键设置或覆盖级联删除。

```
model = models.ForeignKey(MyModel, null = True, on_delete = models.SET_NULL) 
```

但是，如果我们反过来想要这种效果呢？如果我们希望删除 fk 模型导致删除这个模型怎么办？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-29T04:00:51.193

有一个非常微妙的实现点，我想我应该添加到这个讨论中。

假设我们有两个模型，其中一个通过外键引用另一个模型，如下所示：

```
class A(models.Model):
    x = models.IntegerField()

class B(models.Model):
    a = models.ForeignKey(A, null=True, blank=True) 
```

现在，如果我们删除 A 的条目，级联行为将导致 B 中的引用也被删除。

到目前为止，一切都很好。现在我们想扭转这种行为。人们提到的明显方法是使用删除期间发出的信号，所以我们去：

```
def delete_reverse(sender, **kwargs):
    if kwargs['instance'].a:
        kwargs['instance'].a.delete()

post_delete.connect(delete_reverse, sender=B) 
```

这似乎是完美的。它甚至可以工作！如果我们删除一个 B 条目，相应的 A 也将被删除。

问题是这有一个循环行为导致异常：如果我们删除 A 的一项，由于默认的级联行为（我们想要保留），B 的相应项也将被删除，这将导致delete_reverse 被调用，它试图删除一个已经删除的项目！

诀窍是，您需要异常处理才能正确实现反向级联：

```
def delete_reverse(sender, **kwargs):
    try:
        if kwargs['instance'].a:
            kwargs['instance'].a.delete()
    except:
        pass 
```

这段代码无论哪种方式都可以工作。我希望它可以帮助一些人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T20:04:41.130

我不认为您正在查看的功能是 ORM 或数据库概念。您只想在删除某些内容时执行回调。

所以使用`post_delete` [信号](https://docs.djangoproject.com/en/dev/ref/signals/#post-delete)并在那里添加你的回调处理程序

```
from django.db.models.signals import post_delete
from django.dispatch import receiver
from myapp.models import MyModel

@receiver(post_delete, sender=MyModel)
def my_post_delete_callback(sender, **kwargs):
    #Sender is the model which when deleted should trigger this action
    #Do stuff like delete other things you want to delete
    #The object just deleted can be accessed as kwargs[instance] 
```

# android - Android -> AsyncTask、HttpClient 和 SharedPreferences

> ID：12655348
> 
> 赞同：0
> 
> 时间：2012-09-29T18:30:08.020
> 
> 标签：android, android-asynctask, httpclient, sharedpreferences

我需要有关使用 AsyncTask 的帮助。我正在使用 HttpClient post 将数据（保存在 SharedPreferences 中）发送到网页。我需要在 AsyncTask 中编写它。有人可以通过我的示例代码帮我配置它吗？

```
SharedPreferences sharedPreferences = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);
        String email2 = sharedPreferences.getString("EMAIL", "");
        String lozinka2 = sharedPreferences.getString("LOZINKA", "");
        sprEmail2.setText(email2);
        sprLozinka2.setText(lozinka2); 

        try {
            HttpClient client = new DefaultHttpClient();  
            String postURL = "https://m.bonbon.hr/user/login";
            HttpPost post = new HttpPost(postURL);
            post.setHeader("Content-type", "application/x-www-form-urlencoded");
                List<NameValuePair> params = new ArrayList<NameValuePair>();
                params.add(new BasicNameValuePair("email", email2));
                params.add(new BasicNameValuePair("password", lozinka2));
                params.add(new BasicNameValuePair("lsend", "Prijavi se"));
                UrlEncodedFormEntity ent = new UrlEncodedFormEntity(params,HTTP.UTF_8);
                post.setEntity(ent); 
                HttpResponse responsePOST = client.execute(post);  
                HttpEntity resEntity = responsePOST.getEntity();  
                if (resEntity != null) {    
                    rezz=EntityUtils.toString(resEntity); 
                    response2.setText(rezz);
                    Log.i("rezz",rezz);

                    WebView webView = new WebView(this);
                    setContentView(webView);
                    webView.loadData(rezz, "text/html", "utf-8");
                }
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:35:52.637

您可以从此[链接遵循 AsyncTask 的一些步骤](http://developer.android.com/reference/android/os/AsyncTask.html)

它可能对你有帮助..

# php - pdo execute 给出 500 内部服务器错误

> ID：12655351
> 
> 赞同：1
> 
> 时间：2012-09-29T18:31:12.323
> 
> 标签：php, mysql, pdo, iis-7

```
$dbh= new PDO('mysql:host=127.0.0.1;dbname=prawntube', "uname", "aaaaa");
$s=$dbh->prepare("call smessage_select(:sm,:lang)");
$s->bindParam(":sm", $sm,PDO::PARAM_STR);
$s->bindParam(":lang", $lang,PDO::PARAM_STR);
/*
    $dbh->execute();
    $title=$s->fetch();
*/ 
```

当我注释掉该段时，我没有错误。否则，我会收到内部服务器错误 500。我正在使用 mysql 驱动程序并且我的连接字符串很好。有什么猜测吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T18:33:37.557

类[`PDO`](http://php.net/manual/en/class.pdo.php)没有`execute`方法。您可能打算写`$s->execute`, or (不太可能) `$dbh->exec`or `$dbh->query`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T18:34:49.070

你需要使用`$s->execute()`，而不是`$dbh->execute()`。查看 PDO 文档 .. 语句对象 ( `$s`) 和连接对象 ( `$dbh`) 上有很多您可能需要使用的方法，因此您应该熟悉 API。

# xcode - Xcode 4.5 为 iOS6 设备构建 iOS5 应用程序

> ID：12655354
> 
> 赞同：0
> 
> 时间：2012-09-29T18:31:52.203
> 
> 标签：xcode, ios6, testflight

我在这里很密集吗？我有一个在 Xcode 4.5 中构建的应用程序，它针对 iOS5，它在 TestFlight 上构建和部署得很好。

今天，我的团队中有 2 人拿到了他们的 iPhone 5，现在我正试图在他们的设备上安装该应用程序。我将项目的目标更改为 iOS6，配置了他们的设备，并进行了存档。但是每次我尝试通过 TestFlight 推送它时，我都会收到“dSYM not found”错误。

我是否需要为这些 iOS6 设备创建一个全新的配置文件，或者这是否可行并且还有其他一些我没有看到的问题？

已清理、删除派生数据等。但到目前为止，没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:47:56.450

是的，您需要重新配置设备并更新 XCode 中的配置文件或通过“Builds -> Permission Updated Provisioning Profile”选项/按钮

我发现添加新设备后，我将下载新配置文件，删除 xcode 中的旧配置文件，然后安装新配置文件，这很痛苦，但它可以工作我假设您已经知道它必须是 Add Hoc Profile 并且设备 ID 需要附加到它。

# java - 如何使用 Rally 的 JAVA API 将标签添加到 Rally 中的 TestCase？

> ID：12655357
> 
> 赞同：4
> 
> 时间：2012-09-29T18:32:01.303
> 
> 标签：java, collections, tags, rally, testcase

我一直在努力为 Rally 的测试用例添加标签。标签已经存在于标签集合中。但我无法将它添加到测试用例中。有人可以提供一个关于如何做到这一点的例子吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T23:08:08.373

这是如何执行此操作的示例 - 该示例显示了将标签添加到现有测试用例，以及创建新测试用例并将标签添加到新测试用例。

```
public class RestExample_AddTagsToTestCase {

    public static void main(String[] args) throws URISyntaxException, IOException {

        // Create and configure a new instance of RallyRestApi
        // Connection parameters
        String rallyURL = "https://rally1.rallydev.com";
        String wsapiVersion = "1.34";
        String applicationName = "RestExample_AddTagsToTestCase";

        // Credentials
        String userName = "user@company.com";
        String userPassword = "password";

        RallyRestApi restApi = new RallyRestApi(
                new URI(rallyURL),
                userName,
                userPassword);
        restApi.setWsapiVersion(wsapiVersion);
        restApi.setApplicationName(applicationName);

        // User settings
        String testerUserName = "tester@company.com";

        // Workspace and Project Settings
        String myWorkspace = "My Workspace";
        String myProject = "My Project";

        // FormattedID of Existing Test Case to Query
        String existTestCaseFormattedID = "TC172";

        // Tag Names of Interest
        String tagNameAlpine = "Alpine";
        String tagNameMontane = "Montane";

        //Read User
        QueryRequest userRequest = new QueryRequest("User");
        userRequest.setFetch(new Fetch("UserName", "Subscription", "DisplayName"));
        userRequest.setQueryFilter(new QueryFilter("UserName", "=", testerUserName));
        QueryResponse userQueryResponse = restApi.query(userRequest);
        JsonArray userQueryResults = userQueryResponse.getResults();
        JsonElement userQueryElement = userQueryResults.get(0);
        JsonObject userQueryObject = userQueryElement.getAsJsonObject();
        String userRef = userQueryObject.get("_ref").toString();

        // Get reference to Workspace of interest
        QueryRequest workspaceRequest = new QueryRequest("Workspace");
        workspaceRequest.setFetch(new Fetch("Name", "Owner", "Projects"));
        workspaceRequest.setQueryFilter(new QueryFilter("Name", "=", myWorkspace));
        QueryResponse workspaceQueryResponse = restApi.query(workspaceRequest);
        String workspaceRef = workspaceQueryResponse.getResults().get(0).getAsJsonObject().get("_ref").toString();

        // Get reference to Project of interest
        QueryRequest projectRequest = new QueryRequest("Project");
        projectRequest.setFetch(new Fetch("Name", "Owner", "Projects"));
        projectRequest.setQueryFilter(new QueryFilter("Name", "=", myProject));
        QueryResponse projectQueryResponse = restApi.query(projectRequest);
        String projectRef = projectQueryResponse.getResults().get(0).getAsJsonObject().get("_ref").toString();

        // Get reference to Tag(s) of interest
        QueryRequest tagRequest = new QueryRequest("Tag");
        tagRequest.setFetch(new Fetch("Name"));

        // Look for Tag named "Alpine"
        tagRequest.setQueryFilter(new QueryFilter("Name", "=", tagNameAlpine));
        QueryResponse tagQueryResponse = restApi.query(tagRequest);
        JsonObject tagAlpineJsonObject = tagQueryResponse.getResults().get(0).getAsJsonObject();
        JsonElement tagAlpine = tagQueryResponse.getResults().get(0).getAsJsonObject();
        String tagAlpineRef = tagAlpineJsonObject.get("_ref").toString();

        // Look for a second Tag named "Montane"
        tagRequest.setQueryFilter(new QueryFilter("Name", "=", tagNameMontane));
        tagQueryResponse = restApi.query(tagRequest);
        JsonObject tagMontaneJsonObject = tagQueryResponse.getResults().get(0).getAsJsonObject();
        JsonElement tagMontane = tagQueryResponse.getResults().get(0).getAsJsonObject();
        String tagMontaneRef = tagMontaneJsonObject.get("_ref").toString();

        // Query for existing Test Case
        QueryRequest  existTestCaseRequest = new QueryRequest("TestCase");
        existTestCaseRequest.setFetch(new Fetch("FormattedID","Name","Tags"));
        existTestCaseRequest.setQueryFilter(new QueryFilter("FormattedID", "=", existTestCaseFormattedID));
        QueryResponse testCaseQueryResponse = restApi.query(existTestCaseRequest);
        JsonObject existTestCaseJsonObject = testCaseQueryResponse.getResults().get(0).getAsJsonObject();
        String existTestCaseRef = testCaseQueryResponse.getResults().get(0).getAsJsonObject().get("_ref").toString();
        JsonArray existTagsJsonArray = (JsonArray) testCaseQueryResponse.getResults().get(0).getAsJsonObject().get("Tags");               

        // Update Tags on Existing Test Case
        try {

            // Add additional Tag to Existing Test Case's Tag Collection
            existTagsJsonArray.add(tagMontane);

            //Add Tag
            System.out.println("\nUpdating Existing Test Case's tags...");
            JsonObject updateExistTestCase = new JsonObject();

            updateExistTestCase.add("Tags", existTagsJsonArray);
            UpdateRequest updateExistTestCaseRequest = new UpdateRequest(existTestCaseRef, updateExistTestCase);
            UpdateResponse updateExistTestCaseResponse = restApi.update(updateExistTestCaseRequest);

            if (updateExistTestCaseResponse.wasSuccessful()) {
                System.out.println("Updated Test Case with new Tags");
            } else {
                String[] updateExistTestCaseErrors;
                updateExistTestCaseErrors = updateExistTestCaseResponse.getErrors();
                System.out.println("Error occurred updating Test Case: ");
                for (int i=0; i<updateExistTestCaseErrors.length;i++) {
                    System.out.println(updateExistTestCaseErrors[i]);
                }                   
            }
        } catch (Exception e) {
            System.out.println("Exception occurred while updating Tags on existing Test Case: ");
            e.printStackTrace();            
        }

        // Create a New Test Case and Add Tags to it
        try {

            //Create a Test Case                    
            System.out.println("Creating Test Case...");
            JsonObject newTestCase = new JsonObject();
            newTestCase.addProperty("Name", "TC0400-1200: SeleniumGroup004");
            newTestCase.addProperty("Method", "Automated");
            newTestCase.addProperty("Type", "Performance"); 
            newTestCase.addProperty("Workspace", workspaceRef);
            newTestCase.addProperty("Project", projectRef);
            newTestCase.addProperty("Owner", userRef);  

            CreateRequest createRequest = new CreateRequest("testcase", newTestCase);
            CreateResponse createResponse = restApi.create(createRequest);            

            if (createResponse.wasSuccessful()) {

                System.out.println(String.format("Created %s", createResponse.getObject().get("_ref").getAsString()));          

                //Read Test Case
                String newTestCaseRef = Ref.getRelativeRef(createResponse.getObject().get("_ref").getAsString());
                System.out.println(String.format("\nReading Test Case %s...", newTestCaseRef));
                GetRequest getRequest = new GetRequest(newTestCaseRef);
                getRequest.setFetch(new Fetch("FormattedID", "Name", "Tags"));
                GetResponse getResponse = restApi.get(getRequest);
                JsonObject obj = getResponse.getObject();
                System.out.println(String.format("Read Test Case. FormattedID = %s, Name = %s",
                        obj.get("FormattedID").getAsString(), obj.get("Name").getAsString()));

                // JsonArray for Tags collection on Test Case
                JsonArray newTagsJsonArray = new JsonArray();
                newTagsJsonArray.add(tagAlpine);
                newTagsJsonArray.add(tagMontane);

                //Add Tag
                System.out.println("\nUpdating Test Case tags...");
                JsonObject updatedTestCase = new JsonObject();

                updatedTestCase.add("Tags", newTagsJsonArray);
                UpdateRequest updateRequest = new UpdateRequest(newTestCaseRef, updatedTestCase);
                UpdateResponse updateResponse = restApi.update(updateRequest);

                if (updateResponse.wasSuccessful()) {
                    System.out.println("Updated Test Case with new Tags");
                } else {
                    String[] updateErrors;
                    updateErrors = updateResponse.getErrors();
                    System.out.println("Error occurred updating Test Case: ");
                    for (int i=0; i<updateErrors.length;i++) {
                        System.out.println(updateErrors[i]);
                    }                   
                }   

            } else {
                String[] createErrors;
                createErrors = createResponse.getErrors();
                System.out.println("Error occurred creating Test Case: ");
                for (int i=0; i<createErrors.length;i++) {
                    System.out.println(createErrors[i]);
                }
            }

        } finally {
            //Release all resources
            restApi.close();
        }                
    }
} 
```

# objective-c - 异步下载的图像仅在点击或滚动后出现在 UITableView 中

> ID：12655360
> 
> 赞同：12
> 
> 时间：2012-09-29T18:32:09.103
> 
> 标签：objective-c, ios, ios5, ios4, asynchronous

我成功地将博客文章中的缩略图图像异步加载到我的 UITableView 中。

我遇到的问题是图像仅在我点击单元格或向下滚动时才会出现。

当我点击单元格时，图像出现在左侧，将标题和副标题推到右侧。

当我向下滚动时，图像会显示在单元格中它们应该显示的位置。

这是我的代码（我正在使用 AFNetworking）：

```
#import "UIImageView+AFNetworking.h"

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return posts.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    NSDictionary *post           = [posts objectAtIndex:indexPath.row];
    NSString     *postpictureUrl = [post objectForKey:@"picture"];

    [cell.imageView setImageWithURL:[NSURL URLWithString:postpictureUrl]];

    cell.textLabel.text       = [post objectForKey:@"post_text"];
    cell.detailTextLabel.text = [post objectForKey:@"post_author_name"];
    return cell;
} 
```

我在 iPhone 6.0 模拟器、XCode 4.5、OSX MtLion 中看到了这一点。

任何想法为什么没有在初始屏幕上绘制图像？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-29T20:41:16.353

在混合 asynch 和表时要注意的事情是 asynch 在将来的未知时间完成，可能是在单元格被滚动、删除、重用等之后。

此外，如果滚动该单元格，从网络上提取的图像也会丢失。不确定 AFNetworking 是否为您缓存，但最好不要假设。这是使用本机网络的解决方案：

```
// ...
NSDictionary *post           = [posts objectAtIndex:indexPath.row];
NSString     *postpictureUrl = [post objectForKey:@"picture"];

// find a place in your model, or add one, to cache an actual downloaded image
UIImage      *postImage      = [post objectForKey:@"picture_image"];

if (postImage) {
    cell.imageView.image = postImage;   // this is the best scenario: cached image
} else {
    // notice how we don't pass the cell - we don't trust its value past this turn of the run loop
    [self asynchLoad:postpictureUrl forIndexPath:indexPath];
    cell.imageView.image = [UIImage imageNamed:@"default"];
}
// ... 
```

现在，没有任何第三方帮助的严肃异步加载

```
- (void)asynchLoad:(NSString *)urlString forIndexPath:(NSIndexPath *)indexPath {

    NSURL *url = [NSURL urlWithString:urlString];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
        if (!error) {

            // create the image
            UIImage *image = [UIImage imageWithData:data];

            // cache the image
            NSDictionary *post = [posts objectAtIndex:indexPath.row];
            [post setObject:image forKey:@"picture_image"];

            // important part - we make no assumption about the state of the table at this point
            // find out if our original index path is visible, then update it, taking 
            // advantage of the cached image (and a bonus option row animation)

            NSArray *visiblePaths = [self.tableView indexPathsForVisibleRows];
            if ([visiblePaths containsObject:indexPath]) {
                NSArray *indexPaths = [NSArray arrayWithObject:indexPath];
                [self.tableView reloadRowsAtIndexPaths:indexPaths withRowAnimation: UITableViewRowAnimationFade];
                // because we cached the image, cellForRow... will see it and run fast
            }
        }
    }];
} 
```

为此，应将帖子创建为 NSMutableDictionary...

```
// someplace in your code you add a post to the posts array.  do this instead.

NSDictionary *postData = // however you get a new post
[posts addObject:[NSMutableDictionary dictionaryWithDictionary:postData]]; 
```

或者，如果很难直接更改帖子模型，您可以设置另一个结构来缓存下载的图像。由 url 字符串键入的可变字典是一个很好的结构：

```
@property (nonatomic,strong) NSMutableDictionary *imageCache;
@synthesize imageCache=_imageCache;

// lazy init on the getter...

- (NSMutableDictionary *)imageCache {
    if (!_imageCache) {
        _imageCache = [NSMutableDictionary dictionary];
    }
    return _imageCache;
} 
```

现在，在配置单元格时，通过检查缓存来查看是否有缓存的图像...

```
// change to the cellForRowAtIndexPath method
NSString *postpictureUrl = [post objectForKey:@"picture"];
UIImage  *postImage = [self.imageCache valueForKey:postpictureUrl]; 
```

下载图像后，将其缓存...

```
// change to the asynchLoad: method I suggested
UIImage *image = [UIImage imageWithData:data];
[self.imageCache setValue:image forKey:urlString]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-29T20:08:46.510

通过在此行中放置一个占位符来解决该问题

```
...
[cell.imageView setImageWithURL:[NSURL URLWithString:postpictureUrl] placeholderImage:[UIImage imageNamed:@"default"]];
.... 
```

占位符需要具有与缩略图相似的尺寸比以避免变形。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-05T16:13:58.467

我挠了很久，终于弄明白了。

我的错误是`cell.imageView`当我应该设置我的实际插座时，我设置了图像`cell.eventImageView`。它与`UITableViewCell`. 希望它可以帮助某人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T07:04:31.497

这是我的解决方案，使用 UIImageView 的类别。
注意：由于我们在第一行执行了 self.image = nil，所以调用此方法后必须为 cell.ImageView 设置一个占位符图像。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
...
   [cell.imageView loadImageForURLString:row.imageUrl];
   cell.imageView.image = tempImage;
...
} 
```

和类别：

```
#import "UIImageView+AsyncLoad.h"

@implementation UIImageView (AsyncLoad)

- (void)loadImageForURLString:(NSString *)imageUrl
{
    self.image = nil;

    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
    NSURLRequest * request = [NSURLRequest requestWithURL:[NSURL URLWithString:imageUrl]];
    [NSURLConnection sendAsynchronousRequest:request
                                       queue:[NSOperationQueue mainQueue]
                           completionHandler:^(NSURLResponse * response, NSData * data, NSError * error)
     {
         [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
         if (data && self.window) {
             self.image = [UIImage imageWithData:data];
         }
     }];
}

@end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-20T19:30:12.480

我参加聚会已经很晚了，但是如果您深入了解[UIImageView+AFNetworking 文档](http://cocoadocs.org/docsets/AFNetworking/2.0.0-RC1/Categories/UIImageView+AFNetworking.html)，您会发现`– setImageWithURLRequest:placeholderImage:success:failure:`在图像可用时可以用来重新加载单元格的方法：

```
NSURLRequest *urlRequest = [NSURLRequest requestWithURL: [NSURL URLWithString: imageURL]];
__weak UITableViewCell *weakCell = cell;

[cell.imageView setImageWithURLRequest: urlRequest
                      placeholderImage: nil
                               success: ^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {

                                   __strong UITableViewCell *strongCell = weakCell;
                                   strongCell.imageView.image = image;

                                   [tableView reloadRowsAtIndexPaths: @[indexPath]
                                                    withRowAnimation: UITableViewRowAnimationNone];

                               } failure: NULL]; 
```

# browser - 到目前为止用户使用的最旧的 safari 版本是什么？

> ID：12655363
> 
> 赞同：0
> 
> 时间：2012-09-29T18:32:26.940
> 
> 标签：browser, safari

我不熟悉 Safari，但我正在开发网站，我想知道我应该从哪个 Safari 版本开始测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T18:39:56.643

您可以在此处查看 Safari 浏览器统计信息 - [http://www.w3schools.com/browsers/browsers_safari.asp](http://www.w3schools.com/browsers/browsers_safari.asp)。鉴于 Safari 4 在今年 8 月的市场份额为 0.1%，我可以肯定地说，它是值得支持的最低版本。作为支持证据，截至 2011 年 6 月，Safari 3 的市场份额下降到 0.0%——可能有人在使用它，但根本没有多少人使用它。

# jakarta-ee - Java EE 6 - 悲观锁定 - 带有 UserTransaction、PreDestroy 和其他问题的 ViewScoped bean + Stateful bean

> ID：12655365
> 
> 赞同：0
> 
> 时间：2012-09-29T18:32:43.073
> 
> 标签：jakarta-ee, transactions, java-ee-6, stateful-session-bean, pessimistic-locking

在我正在处理的应用程序中，我们需要在用户进入“编辑页面”之前启动事务（以锁定当前编辑的数据库记录）并在他单击按钮或离开页面时结束事务。

为此，我使用`@Stateful`管理事务的 EJB bean 和`@ViewScoped`在“编辑页面”上使用的 CDI bean。

当然，用户可以在编辑页面上执行许多操作，这些操作应该在同一个事务中调用。这是示例代码：

```
@Stateful
@LocalBean
@TransactionManagement(TransactionManagementType.BEAN)
public class TransactionService {

  @Resource
  private UserTransaction utx;

  @PostConstruct
  private void postConstruct() {
    System.out.println(this + " postConstruct");
  }

  @PreDestroy
  private void preDestroy() {
    System.out.println(this + " preDestroy");
    utx.rollback();
  }

  public void start() {
    utx.begin();
    //lock db records with select ... for update
  }

  @Remove
  public void commit() {
    utx.commit();
  }

  @Remove
  public void rollback() {
    utx.rollback();
  }
}

@Named
@ViewScoped
public class TestBean implements Serializable {

  @Inject
  private TransactionService ts;
  @Inject
  private SqlService sql; //stateless session bean

  @PostConstruct
  private void postConstruct() {
    System.out.println(this + " postConstruct");
    ts.start();
  }

  @PreDestroy
  private void preDestroy() {
    System.out.println(this + " preDestroy");
    ts.rollback();
  }

  public void methodA() {
    //do some db operation
    sql.insert();
  }

  public void methodB() {
    //do some db operation
    sql.update();
  }

  public String save() {
    ts.commit();
    return "otherView";
  }

  public String cancel() {
    ts.rollback();
    return "otherView";
  }
} 
```

理论上它看起来不错，但我们有一些问题：

1.  我们能否确定所有操作都在同一个事务中调用？
2.  如果用户通过输入地址栏或 http 会话超时关闭选项卡/浏览器/转到另一个 URL 怎么办。我们如何检测它并回滚事务？起初我们尝试过，`@PreDestroy`但看起来它从未被调用过！

我们使用 Java EE 6 技术：JSF、EJB。在 Glassfish 3.1.2 Web 配置文件上部署。我们使用 MyBatis 代替 JPA。感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:57:21.863

恕我直言，这是非常糟糕的方法。你锁定你的桌子并等待希望用户做点什么。可能需要几分钟。所有其他用户将不得不等待这个 - 在大多数应用程序中这是不可接受的。你不应该跨越多个http请求之间的事务。

但是，如果您坚持，回滚不能依赖于某些外部事件。只需设置事务超时

# ios - iVar 未使用 ARC 解除分配

> ID：12655372
> 
> 赞同：0
> 
> 时间：2012-09-29T18:33:35.853
> 
> 标签：ios, cocoa-touch, cocoa, memory-management, automatic-ref-counting

我`UIScrollView`在使用 ARC 的类的实现文件中声明为 iVar：

```
@interface RecipeBrowserViewController ()
{
    UIScrollView *tempScrollView;
} 
```

这是必要的，因为在执行期间我有时需要`UIScrollView`将`UIScrollView`

```
if (someTest) 
{
    tempScrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds];
    tempScrollView.delegate = self;
    [self.view addSubview: tempScrollView];
}
else 
{       
    [tempScrollView removeFromSuperview];
} 
```

我的期望是`tempScrollView`一旦从 中删除 就会被释放`superview`，但事实并非如此。大概是因为 iVar 仍在引用它？

`tempScrollView = nil`从清除它后添加它`superview`，但我不确定正确的方法是什么。我应该改为声明`weak`iVar 吗？到目前为止，我只看到`weak`了针对代表或其他双向 iVar 的建议，否则会导致强大的参考周期。这是我应该使用它的另一个地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:37:05.680

添加/删除滚动视图是与 ivar 内存管理不同的问题。你得到的是正确的，除了当你完成 tempScrollView 时你确实应该将 ivar 设置为 nil。

当您将视图 B（滚动视图）添加为视图 A（self.view）的子视图时，视图 A 会保持对视图 B 的强引用（即保留）。当您将视图 B 作为子视图移除时，视图 A 会移除其强引用对（即发布）视图 B 的引用。但是，ivar tempScrollView 很强大，因此视图控制器（自身）保持对滚动视图的强引用，正如您所见，它没有被释放。删除该强引用的方法是将 ivar 设置为 nil。

我想补充一点，您应该为 tempScrollView 使用 @property 而不是直接使用 ivar。对于 ARC，这不是什么大问题，但通常最好将内存管理封装在属性访问器中，此时代码行数相同。

# c# - 即使在进程终止后也能获取所有进程输出

> ID：12655379
> 
> 赞同：0
> 
> 时间：2012-09-29T18:34:23.690
> 
> 标签：c#, wireshark

我正在使用 Tshark 开始使用 CommandLine 进行捕获，并使用此进程的输出计算接收到的数据包编号：我的 StreamReader 读取进程的输出并在此输出中解析数据包编号，以便在我的表单上显示此编号。我的问题是在我终止进程之后，我显示的数据包数量与文件中的实际数据包（pcap 文件）之间存在差异所以我的问题是是否有办法终止进程但等到所有进程输出完成。

```
public class Tshark
{
    public int _interfaceNumber;
    public string _pcapPath;
    public int _test;
    public int _packetsCount;
    public string _packet;
    public delegate void dlgPackProgress(int progress);
    public event dlgPackProgress evePacketProgress;

    public Tshark(int interfaceNumber, string pcapPath)
    {
        _interfaceNumber = interfaceNumber;
        _pcapPath = pcapPath;
    }

    public void startTheCapture()
    {
        Process _tsharkProcess1 = new Process();
        _tsharkProcess1.StartInfo.FileName = @"C:\Program Files\Wireshark\tshark.exe";
        _tsharkProcess1.StartInfo.Arguments = string.Format(" -i " + _interfaceNumber + " -V -x -w " + _pcapPath);
        _tsharkProcess1.OutputDataReceived += new DataReceivedEventHandler(process_OutputDataReceived);
        _tsharkProcess1.StartInfo.RedirectStandardOutput = true;
        _tsharkProcess1.StartInfo.UseShellExecute = false;
        _tsharkProcess1.StartInfo.CreateNoWindow = true;
        _tsharkProcess1.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
        _tsharkProcess1.Start();

        Thread.Sleep(2000);
        DateTime lastUpdate = DateTime.MinValue;
        StreamReader myStreamReader = _tsharkProcess1.StandardOutput;

        while (!myStreamReader.EndOfStream)
        {
            _packet = myStreamReader.ReadLine();

            if (_packet.StartsWith("    Frame Number:"))
            {
                string[] arr = _packet.Split(default(char[]), StringSplitOptions.RemoveEmptyEntries);
                _test = int.Parse(arr[2]);
                _packetsCount++;
            }

            if ((DateTime.Now - lastUpdate).TotalMilliseconds > 1000)
            {
                lastUpdate = DateTime.Now;
                OnPacketProgress(_packetsCount++);
            }
        }

        _tsharkProcess1.WaitForExit();
    }

    private void OnPacketProgress(int packet)
    {
        var handler = evePacketProgress;
        if (handler != null)
        {
            handler(packet);
        }
    }

    public void killProcess()
    {
        foreach (Process prc in System.Diagnostics.Process.GetProcessesByName("tshark"))
        {
            prc.Kill();
            prc.WaitForExit();
        }
    }

    private void process_OutputDataReceived(object sender, DataReceivedEventArgs arg)
    {
        string srt = arg.Data; //arg.Data contains the output data from the process...            
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:46:20.423

与其终止进程，不如优雅地关闭它。期望你刚刚杀死的东西继续与你交谈有点过分。

你必须想出一些方法来优雅地结束这个过程。究竟如何最好地做到这一点，我无法从这里判断。

使用数据包捕获库而不是依赖外部控制台应用程序可能更合适。例如 pcap.net。我敢肯定还有其他的库。

# asp.net-mvc-4 - Ninject、Web API 和 MVC 4 过滤器绑定处理数据上下文

> ID：12655382
> 
> 赞同：2
> 
> 时间：2012-09-29T18:34:45.357
> 
> 标签：asp.net-mvc-4, ninject, asp.net-web-api

我有一个问题，我的数据上下文每隔一段时间就会在我的一个连接到我的 web api 控制器的过滤器中被处理。这是为我的 Web API 控制器设置过滤器的正确方法吗？为什么有时会处理我的数据上下文？

> 操作无法完成，因为 DbContext 已被释放。

**全球.asax**

```
GlobalConfiguration.Configuration.Filters
               .Add(new ApiValidationFilter(kernel.Get<IApiAuthenticationService>()));

kernel.Bind<IDatabaseFactory>()
      .To<DatabaseFactory>()
      .InScope(q => HttpContext.Current ?? StandardScopeCallbacks.Thread(q)); 
```

**ApiValidationFilter.cs**

```
public class ApiValidationFilter : System.Web.Http.Filters.IActionFilter
    {
            private readonly IApiAuthenticationService _apiAuthenticationService;

            public ApiValidationFilter(
                IApiAuthenticationService apiAuthenticationService)
            {
                _apiAuthenticationService = apiAuthenticationService;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:34:43.737

您应该使用过滤器绑定语法，然后 Ninject 将处理过滤器的生命周期，它还将处理过滤器的构造函数注入。

[https://github.com/ninject/ninject.web.mvc/wiki/Filter-configurations](https://github.com/ninject/ninject.web.mvc/wiki/Filter-configurations)

我也会让 Ninject 处理管理数据上下文的生命周期，而不是使用工厂。

```
kernel.Bind<MyContext>().ToSelf().InRequestScope(); 
```

或者，如果您想要更好的可测试性，您可以从接口派生上下文并绑定到该接口。InRequestScope 确保上下文存在于整个 Web 请求中，并且在请求完成时会自动释放。您不必记住这样做，并且通过持有比单个请求更长的请求不会有任何内存泄漏。

你可以在这里看到一个例子：

[ASP.NET MVC 3 和全局过滤器注入](https://stackoverflow.com/questions/5790047/asp-net-mvc-3-and-global-filter-injection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T22:11:22.117

我最终不得不求助于以下方法，没有任何效果。

```
var apiRepository = new ApiRepository(new DatabaseFactory());
                var apiAuthenticationService = new ApiAuthenticationService(apiRepository, new UnitOfWork(new DatabaseFactory()), new ValidationProvider(null)); 
```

# ruby-on-rails - 如何在迷你裙工厂创建协会？

> ID：12655387
> 
> 赞同：2
> 
> 时间：2012-09-29T18:35:11.347
> 
> 标签：ruby-on-rails, factory-bot, minitest, factories, miniskirt

我正在用 minitest 编写测试，并尝试使用 miniskirt 来处理我的 rails 应用程序中的工厂。我无法在我的用户模型和其他模型之间创建关联。既然迷你裙没有`Factory#association`像工厂女郎你怎么创建联想？我正在尝试这个：

```
Factory.define :user do |f|
  f.email "joey@ramones.com"
  f.password f.password_confirmation("rockaway")
end

Factory.define :song do |f|
  f.title "I Wanna Be Sedated"
  f.artist "Ramones"
  f.credits "Recorded on February 12-19, 1976 at Plaza Sound, Radio City Music Hall in New York City for Sire Records. All Songs by The Ramones."
  f.artwork "name-of-the-file.jpg"
  f.user { Factory :user }
end 
```

但是以下测试一直失败为`Validation failed: User can't be blank`：

```
require "test_helper"

describe Song do
  it "has a valid factory" do
    Factory.create :song
  end
end 
```

# yii - 如何使用 CForm 创建子表单数组？

> ID：12655389
> 
> 赞同：0
> 
> 时间：2012-09-29T18:35:16.070
> 
> 标签：yii

我有一组模型，它们都是一个类的实例。我需要创建一个表单，其中包含与数组中的模型相对应的子表单。

必须使用 CForm，因为我对它做了一个很好的小扩展，它可以在 CJuiTabs 中呈现子表单。在当前使用的代码中，POST 参数名称是错误的，因为它们以数组中模型的类名称为前缀。

您可以在下面看到生成的 HTML 代码片段。看到那些 YPageInfo[...] 命名的输入了吗？这就是问题所在——服务器只接收到一组带有此前缀的输入。

```
<div style="visibility:hidden"><input type="hidden" value="1" name="yform_20bd4d2c" id="yform_20bd4d2c" /></div>
<div class="row field_name">
<label for="YPageRevision_name">Name</label>
<input name="YPageRevision[name]" id="YPageRevision_name" type="text" maxlength="45" />

</div>
<div class="row field_parent_id">
<label for="YPageRevision_parent_id">Parent Id</label>
<input id="YPageRevision_parent_id_hidden" name="YPageRevision[parent_id]" type="hidden" /><input id="YPageRevision_parent_id" type="text" value="" name="autocomplete-field" />

</div>
<div id="yw1">
<ul>
<li><a href="#enSubFormTab" title="enSubFormTab">en</a></li>
<li><a href="#ruSubFormTab" title="ruSubFormTab">ru</a></li>
</ul>
<div id="enSubFormTab"><div class="row field_title">
<label for="YPageInfo_title" class="required">Title <span class="required">*</span></label>
<input name="YPageInfo[title]" id="YPageInfo_title" type="text" maxlength="256" />

</div>
<div class="row field_content">
<label for="YPageInfo_content" class="required">Content <span class="required">*</span></label>
<textarea name="YPageInfo[content]" id="YPageInfo_content"></textarea>

</div>

</div>
<div id="ruSubFormTab"><div class="row field_title">
<label for="YPageInfo_title" class="required">Title <span class="required">*</span></label>
<input name="YPageInfo[title]" id="YPageInfo_title" type="text" maxlength="256" />

</div>
<div class="row field_content">
<label for="YPageInfo_content" class="required">Content <span class="required">*</span></label>
<textarea name="YPageInfo[content]" id="YPageInfo_content"></textarea>

</div>

</div>
</div>

<div class="row buttons"><input name="submit" type="submit" value="Create" />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:41:25.503

我找到了一种方法来做我需要的事情。

在`elements`子表单的属性中声明了一些输入。声明的每个标准输入元素都有一个 的实例`CFormInputElement`，因此它具有`attributes`属性。您可以在此处设置任何 HTML 属性，该属性将在生成的输入标签中呈现。我把我的自定义`name`属性放在这里，并在一个循环中更改它，我在其中为主 CForm 创建子表单配置项。

也许有更好的方法？

# android - 从一个意图传递到另一个意图

> ID：12655391
> 
> 赞同：-1
> 
> 时间：2012-09-29T18:35:32.170
> 
> 标签：android, android-intent

我有一个按钮 n 6 个单选按钮处于活动状态。单击按钮（搜索）从编辑文本中获取输入后，它会转到另一个活动。下面是我的代码

```
public void search(View v)
{
    switch(v.getId())
    {               
    case R.id.button1:
        EditText et1= (EditText)findViewById(R.id.editText1);
        RadioButton r1 = (RadioButton) findViewById(R.id.radio0);
        RadioButton r2 = (RadioButton) findViewById(R.id.radio1);
        RadioButton r3 = (RadioButton) findViewById(R.id.radio2);
        RadioButton r4 = (RadioButton) findViewById(R.id.radio3);
        RadioButton r5 = (RadioButton) findViewById(R.id.radio4);
        RadioButton r6 = (RadioButton) findViewById(R.id.radio5);
        pin=et1.getText().toString();
        if(pin.length()==0){
            Toast.makeText(this, "Please provide Input!", Toast.LENGTH_SHORT).show();
            return;
        }
        if(r1.isChecked())
        {   category="All";
        Intent i=new Intent(this,Details.class);
        startActivity(i);
        }

        else if(r2.isChecked())
        {   
            category="Food";
            Intent i=new Intent(this,Details.class);
            startActivity(i);
        }

        else if(r3.isChecked())
        {   
            category="Entertainment";
            Intent i=new Intent(this,Details.class);
            startActivity(i);
        }

        else if(r4.isChecked())
        {   
            category="Shopping";
            Intent i=new Intent(this,Details.class);
            startActivity(i);
        }

        else if(r5.isChecked())
        {   
            category="Health";
            Intent i=new Intent(this,Details.class);
            startActivity(i);
        }

        else if (r6.isChecked())
        {   
            category="Services";
            Intent i=new Intent(this,Details.class);
            startActivity(i);

        }
         break;                     
    }
/*if(pin.length()!=0&&category.length()!=0)
 {
Intent i=new Intent(this,Details.class);
startActivity(i);

}*/

} 
```

上面的代码正确吗？？当输入给定时会发生强制关闭。但是当没有输入时，会显示吐司味精。

原木猫是

```
09-29 23:56:25.706: E/AndroidRuntime(23196): FATAL EXCEPTION: main
09-29 23:56:25.706: E/AndroidRuntime(23196): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.yellowpages/com.yellowpages.Details}: java.lang.NullPointerException
09-29 23:56:25.706: E/AndroidRuntime(23196):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
09-29 23:56:25.706: E/AndroidRuntime(23196):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-29 23:56:25.706: E/AndroidRuntime(23196):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-29 23:56:25.706: E/AndroidRuntime(23196):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-29 23:56:25.706: E/AndroidRuntime(23196):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-29 23:56:25.706: E/AndroidRuntime(23196):    at android.os.Looper.loop(Looper.java:137)
09-29 23:56:25.706: E/AndroidRuntime(23196):    at android.app.ActivityThread.main(ActivityThread.java:4424)
09-29 23:56:25.706: E/AndroidRuntime(23196):    at java.lang.reflect.Method.invokeNative(Native Method)
09-29 23:56:25.706: E/AndroidRuntime(23196):    at java.lang.reflect.Method.invoke(Method.java:511)
09-29 23:56:25.706: E/AndroidRuntime(23196):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-29 23:56:25.706: E/AndroidRuntime(23196):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-29 23:56:25.706: E/AndroidRuntime(23196):    at dalvik.system.NativeStart.main(Native Method)
09-29 23:56:25.706: E/AndroidRuntime(23196): Caused by: java.lang.NullPointerException
09-29 23:56:25.706: E/AndroidRuntime(23196):    at com.yellowpages.Dbpages.fetchRecord(Dbpages.java:109)
09-29 23:56:25.706: E/AndroidRuntime(23196):    at com.yellowpages.Details.onCreate(Details.java:22)
09-29 23:56:25.706: E/AndroidRuntime(23196):    at android.app.Activity.performCreate(Activity.java:4465)
09-29 23:56:25.706: E/AndroidRuntime(23196):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-29 23:56:25.706: E/AndroidRuntime(23196):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
09-29 23:56:25.706: E/AndroidRuntime(23196):    ... 11 more

package com.yellowpages;

   import android.annotation.SuppressLint;
   import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.support.v4.app.NavUtils;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.EditText;
import android.widget.RadioButton;
import android.widget.Toast;

public class UserSearch extends Activity {
    public static String category="",pin="";
    @SuppressLint("NewApi")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_user_search);
        getActionBar().setDisplayHomeAsUpEnabled(true);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_user_search, menu);
        return true;
    }
    public void search(View v)
    {
        switch(v.getId())
        {               
        case R.id.button1:
            EditText et1= (EditText)findViewById(R.id.editText1);
            RadioButton r1 = (RadioButton) findViewById(R.id.radio0);
            RadioButton r2 = (RadioButton) findViewById(R.id.radio1);
            RadioButton r3 = (RadioButton) findViewById(R.id.radio2);
            RadioButton r4 = (RadioButton) findViewById(R.id.radio3);
            RadioButton r5 = (RadioButton) findViewById(R.id.radio4);
            RadioButton r6 = (RadioButton) findViewById(R.id.radio5);
            pin=et1.getText().toString();
            if(pin.length()==0){
                Toast.makeText(this, "Please provide Input!", Toast.LENGTH_SHORT).show();
                return;
            }
            if(r1.isChecked())
            {   category="All";
            Intent i=new Intent(this,Details.class);
            startActivity(i);
            }

            else if(r2.isChecked())
            {   
                category="Food";
                Intent i=new Intent(this,Details.class);
                startActivity(i);
            }

            else if(r3.isChecked())
            {   
                category="Entertainment";
                Intent i=new Intent(this,Details.class);
                startActivity(i);
            }

            else if(r4.isChecked())
            {   
                category="Shopping";
                Intent i=new Intent(this,Details.class);
                startActivity(i);
            }

            else if(r5.isChecked())
            {   
                category="Health";
                Intent i=new Intent(this,Details.class);
                startActivity(i);
            }

            else if (r6.isChecked())
            {   
                category="Services";
                Intent i=new Intent(this,Details.class);
                startActivity(i);

            }
             break;                     
        }
/*if(pin.length()!=0&&category.length()!=0)
{
    Intent i=new Intent(this,Details.class);
    startActivity(i);

}*/

    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                NavUtils.navigateUpFromSameTask(this);
                return true;
        }
        return super.onOptionsItemSelected(item);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T16:39:41.527

这些行告诉我们问题出在第 109 行的 Dbpages.java 中：

```
Caused by: java.lang.NullPointerException
    at com.yellowpages.Dbpages.fetchRecord(Dbpages.java:109) 
```

当变量是`null`并且您尝试访问其方法之一时，会发生 NullPointerException。
这是第 109 行：

```
Cursor c=mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID,KEY_NAME,KEY_PHONE,KEY_CATEGORY,KEY_PINCODE},"KEY_PINCODE = ? AND KEY_CATEGORY =?",new String[]{pin,categ}, null, null, KEY_NAME); 
```

您只是试图访问一个变量`mDb`并使用`.query()`. 但是`mDb`，`null`您从未初始化过它。因此出现 NullPointerException。

**回答**
您需要 `mDb = ...`在尝试查询之前使用初始化数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T18:46:26.933

使用静态变量将参数传递给活动是一个错误。当您的应用程序处于后台时，它可能会被系统杀死以恢复内存。如果应用程序被移回前面，您的活动将被恢复，但全局变量将不再存在。

请参阅此问题以将字符串从一个活动正确传递到另一个活动：[Pass a String from one Activity to another Activity in Android](https://stackoverflow.com/questions/6707900/how-to-pass-string-one-activity-to-another)

您应该执行以下操作：

```
Intent i = new Intent(this, Details.class);
i.putExtra("category", "Food");
startActivity(i); 
```

在 Details.class 中：

```
String category = intent.getExtras().getString("category"); 
```

因为您没有发布代码，所以不太清楚引发的异常来自哪里。您确定“categ”变量已正确初始化为 Details.category 吗？无论如何，您应该使用意图附加功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T18:53:20.607

做一件事，你可以全局声明变量并从oncreate而不是onclick初始化，

```
EditText et1= (EditText)findViewById(R.id.editText1);
    RadioButton r1 = (RadioButton) findViewById(R.id.radio0);
    RadioButton r2 = (RadioButton) findViewById(R.id.radio1);
    RadioButton r3 = (RadioButton) findViewById(R.id.radio2);
    RadioButton r4 = (RadioButton) findViewById(R.id.radio3);
    RadioButton r5 = (RadioButton) findViewById(R.id.radio4);
    RadioButton r6 = (RadioButton) findViewById(R.id.radio5); 
```

因为我认为当您选择单选按钮时，单选按钮为空。或者请在此处发布您的整个 Activity java 类以获得确切的解决方案。

# c# - ASP.NET c# 配置文件：GetProfile 不可用

> ID：12655393
> 
> 赞同：0
> 
> 时间：2012-09-29T18:36:19.487
> 
> 标签：c#, asp.net-membership, profile, asp.net-profiles

> **可能重复：**
> [如何在库类中使用 Profile.GetProfile()？](https://stackoverflow.com/questions/1446826/how-to-use-profile-getprofile-in-a-library-class)

如何在cs类中获得个人资料？它在 aspx.cs 类中运行良好。

```
 ProfileCommon profile= HttpContext.Current.Profile.GetProfile(username); 
```

如何使 GetProfile() 在 cs 类中可用？请指教，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:40:57.427

看看我关于分析用户的回答。您需要的一切：

[asp.net 中的用户配置文件](https://stackoverflow.com/questions/12654817/profiling-in-asp-net/12655009#12655009)

# image - 如何在 Vista/7 的 Windows 资源管理器中获取文件/文件夹拖动图像覆盖？

> ID：12655395
> 
> 赞同：0
> 
> 时间：2012-09-29T18:36:53.467
> 
> 标签：image, drag-and-drop, windows-explorer

我是 C#、.NET WPF 开发人员，我希望在我的应用程序中拥有类似于 Windows 资源管理器中的拖放体验。特别是我希望在拖动一些文件时拥有这个漂亮的图像（我正在创建文件管理器应用程序）。

![在此处输入图像描述](../Images/6295b463d1d8e15da9595b9d21f3f93f.png)

我不知道如何做到这一点，我想有一些方法可以从外壳中获取这个图像，以便我可以将它包含在我的拖动叠加层中，但我不知道该怎么做。我注意到某些软件（例如 ImgBurn）会做这样的事情，但我不确定如何做。

我知道这篇博文包含非常有用的信息：[https](https://docs.microsoft.com/en-us/archive/blogs/adamroot/shell-style-drag-and-drop-in-net-part-3) ://docs.microsoft.com/en-us/archive/blogs/adamroot/shell-style-drag-and-drop-in-net-part-3 但是我没有提供在自定义应用程序中拖动项目时如何获取图像覆盖的示例。

# java - stringtokenizer java - 性能

> ID：12655403
> 
> 赞同：1
> 
> 时间：2012-09-29T18:37:26.003
> 
> 标签：java, string, stringtokenizer

在 Java 中，假设我有一个包含 5 个分隔符的字符串，例如“abc;123;123;abc;123”，并且通常具有相同的字符串长度。我需要验证每个项目，不要太冗长。

什么更快？

```
if (stoken.hasMoreTokens()) {
    final String test=stoken.nextToken();
} else {
    throw new ParseException("Some msg",0);
} 
```

或者

```
if (!stoken.hasMoreTokens()) 
    throw new ParseException("Some msg",0);
final String test=stoken.nextToken(); 
```

或者

```
if (!stoken.hasMoreTokens()) {
    throw new ParseException("Some msg",0);
}
final String test=stoken.nextToken(); 
```

或使用`split()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:43:25.933

所以有人可以确认以下

给出选项 1

```
import java.text.ParseException;
import java.util.StringTokenizer;

public class stringtok
{ 
  public static void main(String[] argv)
  throws Exception
  {
      String data="ABC";
      final StringTokenizer stoken=new StringTokenizer(data.toString(),";");
      if (stoken.hasMoreTokens()) {
          final String test=stoken.nextToken();
      } else {
          throw new ParseException("Some msg",0);
      }
  }
} 
```

以字节码产生

```
Compiled from "stringtok.java"
public class stringtok {
public stringtok();
  Code:
     0: aload_0       
     1: invokespecial #1                  // Method java/lang/Object."<init>":()V
     4: return        

public static void main(java.lang.String[]) throws java.lang.Exception;
  Code:
     0: ldc           #2                  // String ABC
     2: astore_1      
     3: new           #3                  // class java/util/StringTokenizer
     6: dup           
     7: aload_1       
     8: invokevirtual #4                  // Method java/lang/String.toString:()Ljava/lang/String;
    11: ldc           #5                  // String ;
    13: invokespecial #6                  // Method java/util/StringTokenizer."<init>":(Ljava/lang/String;Ljava/lang/String;)V
    16: astore_2      
    17: aload_2       
    18: invokevirtual #7                  // Method java/util/StringTokenizer.hasMoreTokens:()Z
    21: ifeq          32
    24: aload_2       
    25: invokevirtual #8                  // Method java/util/StringTokenizer.nextToken:()Ljava/lang/String;
    28: astore_3      
    29: goto          43
    32: new           #9                  // class java/text/ParseException
    35: dup           
    36: ldc           #10                 // String Some msg
    38: iconst_0      
    39: invokespecial #11                 // Method java/text/ParseException."<init>":(Ljava/lang/String;I)V
    42: athrow        
    43: return 
```

}

给定选项 2 和 3（大括号是相同的字节码）

```
import java.text.ParseException;
import java.util.StringTokenizer;

public class stringtok2
{
    public static void main(String[] argv)
    throws Exception
    {
        String data="ABC";
        final StringTokenizer stoken=new StringTokenizer(data.toString(),";");
        if (!stoken.hasMoreTokens()) throw new ParseException("Some msg",0);
        final String test=stoken.nextToken();
    }

} 
```

以字节码产生

```
Compiled from "stringtok2.java"
public class stringtok2 {
  public stringtok2();
    Code:
       0: aload_0       
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return        

  public static void main(java.lang.String[]) throws java.lang.Exception;
    Code:
       0: ldc           #2                  // String ABC
       2: astore_1      
       3: new           #3                  // class java/util/StringTokenizer
       6: dup           
       7: aload_1       
       8: invokevirtual #4                  // Method java/lang/String.toString:()Ljava/lang/String;
      11: ldc           #5                  // String ;
      13: invokespecial #6                  // Method java/util/StringTokenizer."<init>":(Ljava/lang/String;Ljava/lang/String;)V
      16: astore_2      
      17: aload_2       
      18: invokevirtual #7                  // Method java/util/StringTokenizer.hasMoreTokens:()Z
      21: ifne          35
      24: new           #8                  // class java/text/ParseException
      27: dup           
      28: ldc           #9                  // String Some msg
      30: iconst_0      
      31: invokespecial #10                 // Method java/text/ParseException."<init>":(Ljava/lang/String;I)V
      34: athrow        
      35: aload_2       
      36: invokevirtual #11                 // Method java/util/StringTokenizer.nextToken:()Ljava/lang/String;
      39: astore_3      
      40: return        
} 
```

所以答案是选项 2 和 3，因为它们理论上是更少的字节码指令。

有人可以确认

# python - 将项目数据转化为关系矩阵

> ID：12655404
> 
> 赞同：1
> 
> 时间：2012-09-29T18:37:48.487
> 
> 标签：python, matrix, social-networking, stata

我的数据集列出了一起工作或单独工作的人。

我对每个项目都有一行，并在列中列出了参与该项目的所有人员的姓名。如果第 2 列是给定一行的第一个空列，那么它是一个单独的工作，如果第 4 列是给定一行的第一个空列，那么有 3 个人一起工作。

我的目标是找出哪些人一起工作过，以及合作过多少次，所以我想要数据集中的所有对，将 A 与 B 一起工作与 B 与 A 一起工作一样。

由此，将创建一个正方形 N x N，每个参与者都标记列和行，并且在单元格 (A,B) 和 (B,A) 中，该对将一起工作多少次，这将对每一对完成.

我知道在 Excel 中执行此操作的“非常”快速的方法，但我希望它自动化，希望在 Stata 或 Python 中，以防万一添加或删除项目，我只需单击 1 次重新运行，而不必重新-每次都这样做。

以逗号分隔的数据示例：

```
A
A,B
B,C,E
B,F
D,F
A,B,C
D,B
E,C,B
X,D,A 
```

希望有帮助！

布莱斯。F,D B F F,X,C C,F,D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:56:37.820

也许这样的事情会让你开始？

```
import csv
import collections
import itertools

grid = collections.Counter()

with open("connect.csv", "r", newline="") as fp:
    reader = csv.reader(fp)
    for line in reader:
        # clean empty names
        line = [name.strip() for name in line if name.strip()]
        # count single works
        if len(line) == 1:
            grid[line[0], line[0]] += 1
        # do pairwise counts
        for pair in itertools.combinations(line, 2):
            grid[pair] += 1
            grid[pair[::-1]] += 1

actors = sorted(set(pair[0] for pair in grid))

with open("connection_grid.csv", "w", newline="") as fp:
    writer = csv.writer(fp)
    writer.writerow([''] + actors)
    for actor in actors:
        line = [actor,] + [grid[actor, other] for other in actors]
        writer.writerow(line) 
```

[编辑：修改为在 Python 3.2 下工作]

关键模块是 (1) `csv`，这使得读取和写入 csv 文件变得更加简单；(2) `collections`，它提供了一个名为 a 的对象`Counter`-- 就像 a `defaultdict(int)`，如果你的 Python 没有，你可以使用`Counter`它，它是一个自动生成默认值的字典，所以你不必这样做，这里的默认计数是 0 ; 和 (3) `itertools`，它具有`combinations`获取所有对的功能。

产生

```
,A,B,C,D,E,F,X
A,1,2,1,1,0,0,1
B,2,1,3,1,2,1,0
C,1,3,0,1,2,2,1
D,1,1,1,0,0,3,1
E,0,2,2,0,0,0,0
F,0,1,2,3,0,1,1
X,1,0,1,1,0,1,0 
```

您可以使用它`itertools.product`来使构建阵列更加紧凑，但由于它只有一两行，我认为手动完成它很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T18:56:29.303

如果我要保留这个项目一段时间，我会实现一个数据库，然后通过对该数据库的查询创建您正在谈论的矩阵。

您有一个`Project`表（比方说），每个项目有一条记录，一个`Actor`表每人一行，还有一个`Participant`表，其中每个项目的每个参与者都有一个记录。（每条记录都有一个`ID`、一个`ProjectID`和一个`ActorID`。）

在您的示例中，您将有 14`Project`条记录、7`Actor`条记录（A 到 F 和 X）和 31`Participant`条记录。

现在，通过这种设置，每个单元格都是对该数据库的查询。

要重建矩阵，首先您要在数据库中添加/更新/删除适当的记录，然后重新运行查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T19:34:31.407

我建议为此使用[Python Pandas](http://pandas.pydata.org/)。它为格式化邻接矩阵提供了一个巧妙的解决方案，它也将使任何统计计算变得更加容易。您还可以直接将值矩阵提取到[NumPy](http://numpy.scipy.org/)数组中，以便在以后需要时对组簇进行特征值分解或其他图论过程。

我假设您列出的示例数据已保存到一个名为的文件`projects_data.csv`中（尽管它实际上不需要是 .csv 文件）。我还假设每个观察之间没有空白行，但这只是文件组织细节。

这是我的代码：

```
# File I/O part
import itertools, pandas, numpy as np
with open("projects_data.csv") as tmp:
    lines = tmp.readlines()
lines = [line.split('\n')[0].split(',') for line in lines]
# Unique letters
s = set(list(itertools.chain(*lines)))

# Actual work.
df = pandas.DataFrame(
                      np.zeros((len(s),len(s))), 
                      columns=sorted(list(s)), 
                      index=sorted(list(s))
                     )

for line in lines:
    if len(line) == 1:
        df.ix[line[0],line[0]] += 1 # Single-person projects
    elif len(line) > 1:
        # Get all pairs in multi-person project.
        tmp_pairs = list(itertools.combinations(line, 2))

        # Append pair reversals to update (i,j) and (j,i) for each pair.
        tmp_pairs = tmp_pairs + [pair[::-1] for pair in tmp_pairs]
        for pair in tmp_pairs:
            df.ix[pair[0], pair[1]] +=1
            # Uncomment below if you don't want the list
            # comprehension method for getting the reverals.
            #df.ix[pair[1], pair[0]] +=1 

# Final product
print df.to_string()

   A  B  C  D  E  F  X
A  1  2  1  1  0  0  1
B  2  1  3  1  2  1  0
C  1  3  0  1  2  2  1
D  1  1  1  0  0  3  1
E  0  2  2  0  0  0  0
F  0  1  2  3  0  1  1
X  1  0  1  1  0  1  0 
```

现在你可以免费做很多事情，比如查看每个参与者的项目合作伙伴总数（包括重复）：

```
>>> df.sum()
A     6
B    10
C    10
D     7
E     4
F     8
X     4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T21:32:12.723

我猜你没有成千上万的人在这些项目中一起工作。这个实现非常简单。

```
fp = open('projects.cvs')

# counts how many times each pair worked together
pairs = {}

# each element of `project` is a person
for project in (p[:-1].split(',') for p in fp):
    project.sort()

    # someone is alone here
    if len(project) == 1:
        continue

    # iterate over each pair 
    for i in range(len(project)):
        for j in range(i+1, len(project)):
            pair = (project[i], project[j])
            # increase `pairs` counter
            pairs[pair] = pairs.get(pair, 0) + 1

from pprint import pprint
pprint(pairs) 
```

它输出：

```
{('A', 'B'): 1,
 ('B', 'C'): 2,
 ('B', 'D'): 1,
 ('B', 'E'): 1,
 ('B', 'F'): 2,
 ('C', 'E'): 1,
 ('C', 'F'): 1,
 ('D', 'F'): 1} 
```

# jquery - jquery mobile导航后如何刷新内部页面

> ID：12655406
> 
> 赞同：0
> 
> 时间：2012-09-29T18:37:58.877
> 
> 标签：jquery, jquery-mobile, page-refresh

嗨，我用 html5 和 JS 开发了一个移动应用程序。

我有以下 html 以及我使用的所有页面

```
<div data-role="page" id="page1">
</div>

<div data-role="page" id="page2">
    //<some dynamic listview>
</div>

<div data-role="page" id="page3">
</div> 
```

在我的应用程序中，我从第 2 页转到第 3 页，在完成某些功能后，我必须返回第 2 页，但我试图刷新它但没有成功。

我使用以下代码从第 3 页返回到第 2 页

```
$.mobile.changePage('#page2', 'slideup', true, true); 
```

更改页面后如何刷新page2？

我尝试下面的代码

```
$.mobile.changePage('#page2', 'slideup', {reloadPage: true}); 
```

没有成功。

我被困住了。

提前谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:46:22.183

尝试这个：

```
function refreshPage(page){
    // Page refresh
    page.trigger('pagecreate');
    page.listview('refresh');
} 
```

# javascript - 两个复选框同时被选中

> ID：12655407
> 
> 赞同：2
> 
> 时间：2012-09-29T18:38:13.917
> 
> 标签：javascript, jquery

我有**两个复选框**。我需要的是当有人选中其中一个框时，它也会**自动检查另一个**框。反之亦然，如果有人**取消选中**其中一个框，则**同时取消选中两个**. 这是表格上的一个捆绑包，没有另一个他们不能得到一个。

```
<input type="checkbox" id="chk1" name="chk1" value="100">Voicemail<br />
<input type="checkbox" id="chk2" name="chk2" value="50">VM Support 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T18:39:54.023

为什么不是这个？

```
<input type="checkbox" id="chk1" name="chk1" value="100">
<label for="chk1">Voicemail and VM Support</label> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T18:44:47.030

假设您只想测试这两个复选框（而不是页面上的每个复选框），您可以使用[jQuery Multiple Selector](http://api.jquery.com/multiple-selector/)来访问这两个复选框的`onClick`事件。使用`this`您可以测试刚刚单击的复选框的选中状态，然后分配两个复选框的状态以匹配刚刚单击的复选框。

```
$('#chk1, #chk2').on('click', function(){
    var checked = $(this).is(':checked');
    $('#chk1, #chk2').attr('checked', checked);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T18:42:55.963

试试这个

```
$('#chk1 , #chk2').on('click', function(){

    $('#chk1 , #chk2').attr('checked', $(this).is(':checked'))
}); 
```

[小提琴](http://jsfiddle.net/sushanth009/n4C3j/)

[小提琴](http://jsfiddle.net/sushanth009/nj5td/)

# c# - 卸载 AppDomain 时出错。（来自 HRESULT 的异常：0x80131015）

> ID：12655411
> 
> 赞同：4
> 
> 时间：2012-09-29T18:39:09.937
> 
> 标签：c#

使用 ReportViewer 后出现此错误。退出时出现此错误。不知道是什么原因造成的。我正在使用 C#。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-29T18:41:45.567

这是已[报告](http://connect.microsoft.com/VisualStudio/feedback/details/522208/wpf-app-with-reportviewer-gets-error-while-unloading-appdomain-exception-on-termination)的Microsoft 错误。有一个解决方法 -`reportViewer.LocalReport.ReleaseSandboxAppDomain()`在关闭父表单之前调用方法。

例子：

```
private void frmMyForm_FormClosing(object sender, FormClosingEventArgs e)
{
    reportViewer1.LocalReport.ReleaseSandboxAppDomain();
} 
```

参考：[在 WPF 中打开报表查看器时的奇怪行为](https://stackoverflow.com/questions/7208482/weird-behaviour-when-i-open-a-reportviewer-in-wpf)

# iphone - 无法将特殊字符传递给请求

> ID：12655413
> 
> 赞同：0
> 
> 时间：2012-09-29T18:39:24.633
> 
> 标签：iphone, json

当我尝试使用像 Japanese 这样的特殊字符提出请求时，请求将会中断，我无法得到结果。所以我的问题是，如何将其他语言的特殊字符传递给 request ？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T21:53:18.407

您应该像这样将字符编码为 UTF8

```
NSString *encodedURL = [oldUrl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

# ruby-on-rails - 如何在开发模式下隐藏浏览器视图中链接后显示的网址？

> ID：12655415
> 
> 赞同：0
> 
> 时间：2012-09-29T18:39:43.853
> 
> 标签：ruby-on-rails, blueprint-css, blueprint

嗨，我是 RoR 的新手，正在使用 Rails 3.2.8 开发我的应用程序。当我测试我的页面时，所有链接后都会自动显示一个 URL 地址。例如，<%= link_to 'Home', root_path %> 将在浏览器中生成一个类似于 Home(/) 的视图，尽管 (/) 不是可以在页面源中找到的元素。我相信这是因为我处于开发模式下？有没有办法关闭这个功能？谢谢！

这是我的代码：

```
<ul>
<li><%= link_to "Home", root_path %></li>
<li><%= link_to "About", about_path %></li>
<li><%= link_to "Contact", contact_path %></li>
</ul> 
```

这是生成的实际 html 代码：

```
<ul>
<li><a href="/">Home</a></li>
<li><a href="/about">About</a></li>
<li><a href="/contact">Contact</a></li>
</ul> 
```

你可以看到这是完全正常的......这让我相信这不是编码问题。但是，当进入浏览器时，它显示为

*   家（/）
*   [关于(/关于)](/about)
*   [联系方式（/联系方式）](/contact)

我确实想知道 (/url) 部分来自哪里......以及如何摆脱它。

以下是我使用的 JS 文件：

```
<script src="/assets/application.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-1.8.0.min.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-ui-1.8.23.custom.min.js?body=1" type="text/javascript">        </script>
<script src="/assets/autocomplete-rails.js?body=1" type="text/javascript"></script>
<script src="/assets/rails.js?body=1" type="text/javascript"></script> 
```

Rails JS 是 rails-ujs 脚本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T14:48:15.100

感谢@Samiron，终于弄清楚了原因。蓝图 css 库有一个为打印版本定义的样式表，并且那里有代码：

```
/*
This has been the source of many questions in the past. This
snippet of CSS appends the URL of each link within the text.
The idea is that users printing your webpage will want to know
the URLs they go to. If you want to remove this functionality,
comment out this snippet and make sure to re-compress your files.
*/
a:link:after, a:visited:after {
  content: " (" attr(href) ")";
font-size: 90%;
} 
```

# html - 如何在不重新加载当前页面的一部分的情况下导航到新页面？

> ID：12655416
> 
> 赞同：0
> 
> 时间：2012-09-29T18:39:48.957
> 
> 标签：html, iframe

我有一个 mybb 论坛，以及一个在论坛底部添加公共/私人聊天的插件（它在之前添加了一个 div `</body>`）。

我想在不重新加载聊天的情况下浏览论坛。

在[**这个问题**](https://stackoverflow.com/questions/668431/how-does-facebook-keep-the-header-and-footer-fixed-while-loading-a-different-pag)中，Josh Stodola 解释了如何更改 url。在[**这个问题**](https://stackoverflow.com/questions/136458/change-the-url-in-the-browser-without-loading-the-new-page-using-javascript)中，有一个小的 JavaScript 代码来更改 url。我还阅读了有关 HTML5 iframe 的信息，但我仍然无法想象如何将它们一起使用。

聊天应该在 iframe 内吗？论坛内的iframe？论坛应该在一个 iframe 中，而聊天应该在另一个 iframe 中吗？而那些 2 iframe，在一个新页面中？？？

我搞砸了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T08:08:14.803

您应该有一个包含聊天内容的窗口和一个 iframe。这将允许您浏览您的论坛并仅重新加载 iframe 与顶部框架。

`<body><iframe src="someurl"></iframe><div>Chat</div></body>`

需要注意的几点：这样做不会在您导航时更改地址栏，这会使用户在尝试链接到页面时感到困惑，并将他们带到主页或他们开始浏览您的论坛的任何地方。

如果你想做一些更花哨的结帐[pjax](http://pjax.heroku.com/)。它可以让您在仅加载某些内容的同时更改整个页面的 url。

# objective-c - 如何在目标 c 的字符串中包含“”

> ID：12655420
> 
> 赞同：1
> 
> 时间：2012-09-29T18:40:08.537
> 
> 标签：objective-c, string, comma

> **可能重复：**
> [如何转义字符串中的双引号？](https://stackoverflow.com/questions/1352323/how-to-escape-double-quotes-in-string)

如何在字符串中包含“”并阻止它结束字符串？我有一个 html 字符串，但无法定义元素，因为我不能使用“”，请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T18:42:09.720

用反斜杠转义引号，如下所示：

```
@"A string with \"quotes\" around the word \"quotes\"." 
```

如果你用 打印`NSLog()`它，它将输出为：

```
A string with "quotes" around the word "quotes". 
```

[Objective-C 继承了它从 C 中转义的字符串文字，这里列出](http://en.cppreference.com/w/cpp/language/escape)了更多的 C 字符串转义码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T18:43:55.407

所以你想要一个字符串中的引号？我想你想要这样的东西：

```
"string with quote: \" << the quote" 
```

# php - 在foreach循环中输出2个对象数组

> ID：12655422
> 
> 赞同：0
> 
> 时间：2012-09-29T18:40:31.500
> 
> 标签：php, arrays, object, joomla, foreach

下面是我的数组看起来如何的示例，我希望它们结合起来，这样我就可以在一行中输出标题、投票和评分。

```
foreach ($items->items as $item) {
echo $item->title;

foreach ($results->resx as $res) {
echo $res->votes;
echo $res->ratings;
} 
```

我想要这个，但我知道这是不对的。

```
foreach ($items as $item) ($results as $res) {
echo $res->votes;
echo $res->ratings;
echo $item->title;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T18:45:17.067

您可以使用[**array_merge()**](http://php.net/manual/en/function.array-merge.php)，如下所示：

```
foreach (array_merge($results, $items) as $item) {
   echo isset($item->title) ? $item->title : $item->votes .'<br>'. $item->ratings;
} 
```

**更新**：
更改了如何打印值，因为合并数组中的对象只能具有两组属性之一。

**更新 2**：
在一些 OP 的注释更清楚地说明了他的场景是什么之后，现在假设`$results`和`$items`数组具有相同数量的元素，更新解决方案如下：

```
while ((list(, $it) = each($items)) && (list(, $rs) = each($results))) {
    echo $it->title;
    echo $rs->votes;
    echo $rs->ratings . '<br>';
} 
```

# iphone - 是否可以在 iOS Safari 中检测放大/缩小事件？

> ID：12655427
> 
> 赞同：6
> 
> 时间：2012-09-29T18:40:48.240
> 
> 标签：iphone, ios, events, safari, zooming

在 iOS 上的 Safari 中放大或缩小网页之前，我们需要做一些事情。可能吗？

缩放界面有两种情况 - 用户执行缩放手势和用户单击输入元素时。虽然第一个可能通过监听手势事件（可能）来检测，但第二个呢？

以及如何判断页面是否被缩放？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-15T12:58:42.243

放大时， window.innerWidth 会调整，但 document.documentElement.clientWidth 不会，因此：

```
zoom = document.documentElement.clientWidth / window.innerWidth; 
```

# php - Jquery加载功能在第一次加载后卡住了

> ID：12655431
> 
> 赞同：0
> 
> 时间：2012-09-29T18:41:05.900
> 
> 标签：php, jquery, mysql

嗨，我有这个示例代码来加载随机引号。

PHP代码：

```
<?php
  //Selecting Random quotes from database --randomquotes.php
  require('dbconnection.php');
  // $temp=10;
  $sql = "SELECT * FROM db.q order by rand() LIMIT 1";
  $res = mysql_query($sql,$con);
  while ($res1=mysql_fetch_assoc($res))
  { 
    print "<em>".$res1['quote']."</em>";
  }
?> 
```

HTML 代码：

```
<div class="class_box_shadow_quote">
<?php
  require('randomquotes.php');
?>
</div> 
```

jQuery代码：

```
<script>
  var $j = jQuery.noConflict();
  $j(document).ready(function(){
    setInterval(function() {
      $j(".class_box_shadow_quote").load('randomquotes.php');
    }, 7000);
  });
</script> 
```

此代码第一次运行良好，但卡在第二个报价上并且没有更改报价。而且每次我看到第二个报价总是一样的。问题是什么 。请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T18:43:24.373

我相信输出正在被 jQuery 缓存。您可以尝试禁用缓存。

```
setInterval(function() {
    $j.ajax({
        url: 'randomquotes.php',
        cache: false,
        success: function(data) {
            $j(".class_box_shadow_quote").html(data);
        }
    });
}, 7000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T18:48:55.830

尝试在 URL 末尾添加随机种子以避免浏览器缓存，如下所示：

```
 $(".class_box_shadow_quote").load('randomquotes.php?s=' + (Math.Random() * 1000000)) 
```

# php - 在 PHP 中将 XML 转换为 ARRAY 后未维护 ARRAY 的顺序

> ID：12655436
> 
> 赞同：2
> 
> 时间：2012-09-29T18:41:57.197
> 
> 标签：php, xml, xml-parsing

在 PHP 中使用 simplexml_file_load 后，我尝试使用在 Php.NET（[http://www.php.net/manual/en/ref.simplexml.php](http://www.php.net/manual/en/ref.simplexml.php)）中找到的一些代码（XmlToArray()）将 xml 转换为数组，以便我可以处理响应，然后将其发布到给定的 URL。

但是，当我执行 print_r(array) 时，XML 文档中定义的顺序并不是我的终端中数组的显示方式。

有没有办法保持数组中 XML 中列出的相同顺序？任何帮助/方向将不胜感激。

这是 xml，因为它在我的机器上是本地的：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<order xmlns="http://www.shutterfly.com/orderv2/order">
    <version>2.0</version>
    <orderNo>sfly.000020513524-7001536_28935-tb.33</orderNo>
    <orderDate>2012-09-21 09:52:53 PDT</orderDate>
    <processing>
        <statusCallback>http://orderfulfillment.shutterfly.com/ogateway-test/status/sfly/xpressdocs/
        </statusCallback>
    </processing>
    <suborders>
        <suborder>
            <suborderNo>51917</suborderNo>
            <deliveryEstimate>
                <earliest>2012-10-01 00:00:00 PDT</earliest>
                <latest>2012-10-05 00:00:00 PDT</latest>
            </deliveryEstimate>
            <greeting>
                <line1>Ordered for you by Andrew Mullen on 09/21/12.</line1>
                <line2>Save 20% on Holiday Cards November 20 - 30 at Shutterfly
                </line2>
            </greeting>
            <shipAddr>
                <name>burkina faso</name>
                <address1>1234 burkina road</address1>
                <address2></address2>
                <city>yako</city>
                <region>R21</region>
                <postCode></postCode>
                <countryCode>BF</countryCode>
                <countryName>Burkina Faso</countryName>
            </shipAddr>
            <shipMethod>INTLSTD</shipMethod>
            <additionalFulfillers>false</additionalFulfillers>
            <items>
                <item>
                    <itemNo>36</itemNo>
                    <sku>6X8FLATCARD06</sku>
                    <description>6x8 Stationery Card - Stacy Claire Boyd</description>
                    <quantity>1</quantity>
                    <product>
                        <stationery>
                            <formFactor>6x8</formFactor>
                            <paperFinish>MATTE</paperFinish>
                            <orientation>LANDSCAPE</orientation>
                            <image>
                                <location>http://orderfulfillment.shutterfly.com/fulfillment-test/image/1200/000020513524-7001536_28935--164044--315625--canvas.jpg
                                </location>
                            </image>
                            <boc>
                                <location>http://orderfulfillment.shutterfly.com/fulfillment-test/image/1200/000020513524-7001536_28935--164044--315626--canvas.jpg
                                </location>
                            </boc>
                            <copyright>
                                <text>6X8FLATCARD06</text>
                            </copyright>
                        </stationery>
                    </product>
                    <envelopes>
                        <envelope>
                            <toAddress>
                                <font>
                                    <fontName>Arial</fontName>
                                    <fontSize>12</fontSize>
                                </font>
                                <name>FPO Tester</name>
                                <companyTitle></companyTitle>
                                <address1>PSC 812 Box 2640</address1>
                                <address2></address2>
                                <city>FPO</city>
                                <region>AE</region>
                                <postCode>09627</postCode>
                                <countryCode>USA</countryCode>
                                <countryName>United States of America</countryName>
                            </toAddress>
                            <fromAddress>
                                <font>
                                    <fontName>Arial</fontName>
                                    <fontSize>12</fontSize>
                                </font>
                                <name>Andrew Mullen</name>
                                <companyTitle></companyTitle>
                                <address1>2333 W. El Moro Circle</address1>
                                <address2></address2>
                                <city>Mesa</city>
                                <region>AZ</region>
                                <postCode>85202</postCode>
                                <countryCode>USA</countryCode>
                                <countryName>United States of America</countryName>
                            </fromAddress>
                        </envelope>
                    </envelopes>
                </item>
            </items>
        </suborder>
    </suborders>
</order> 
```

这是我从 PHP.net 获取的 XMLToArray()：

```
function XMLToArray($xml)
{
    if ($xml instanceof SimpleXMLElement) {
        $children = $xml->children();
        $return = null;
    }

    foreach ($children as $element => $value) {
        if ($value instanceof SimpleXMLElement) {
            $values = (array) $value->children();

            if (count($values) > 0) {
                $return[$element] = XMLToArray($value);
            } else {
                if (!isset($return[$element])) {
                    $return[$element] = (string) $value;
                } else {
                    if (!is_array($return[$element])) {
                        $return[$element] = array($return[$element], (string) $value);
                    } else {
                        $return[$element][] = (string) $value;
                    }
                }
            }
        }
    }

    if (is_array($return)) {
        return $return;
    } else {
        return $false;
    }
} 
```

提前致谢。问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T19:49:23.440

当我测试提供的代码时，我发现它与您提供的 xml 片段配合得很好，但是如果添加了其他项目，例如它会在数组输出中丢失它们。

我可以建议您尝试这个功能，而不是调试该功能，这似乎对我有用：

来自 Frederic 2008 @[代码示例源](http://www.codingforums.com/showthread.php?t=87283)

```
/**
 * Parse a SimpleXMLElement object recursively into an Array.
 * Attention: attributes skipped
 *
 *
 * @param $xml The SimpleXMLElement object
 * @param $arr Target array where the values will be stored
 * @return NULL
 */
private function convertXmlObjToArr( $obj, &$arr )
{
    $children = $obj->children();
    $executed = false;
    foreach ($children as $elementName => $node)
    {
        if( array_key_exists( $elementName , $arr ) )
        {
            if(array_key_exists( 0 ,$arr[$elementName] ) )
            {
                $i = count($arr[$elementName]);
                $this->convertXmlObjToArr ($node, $arr[$elementName][$i]);    
            }
            else
            {
                $tmp = $arr[$elementName];
                $arr[$elementName] = array();
                $arr[$elementName][0] = $tmp;
                $i = count($arr[$elementName]);
                $this->convertXmlObjToArr($node, $arr[$elementName][$i]);
            }
        }
        else
        {
            $arr[$elementName] = array();
            $this->convertXmlObjToArr($node, $arr[$elementName]);   
        }
        $executed = true;
    }
    if(!$executed&&$children->getName()=="")
    {
        $arr = (String)$obj;
    }

    return ;
} 
```

# stored-procedures - 如何从 pl/sql 过程的 for 循环中返回 ref_cursor

> ID：12655441
> 
> 赞同：0
> 
> 时间：2012-09-29T18:42:21.063
> 
> 标签：stored-procedures, plsql

我想取回以下 sp 的参考光标。但它不起作用..没有得到任何记录..所以请帮助我。

DATA_INPUTLIST - 它是两个变量（mtn，mtnEffDate）的集合类型 DATA_RESULTLIST - 它也是 3 个变量（id，effDate，mtn）的集合类型

```
 CREATE OR REPLACE PROCEDURE proc1 (
       pCustId  IN  NUMBER,
       pAcctNo    IN    NUMBER,
       pSearchCriteria    IN    DATA_INPUTLIST,
       pRecordSet OUT SYS_REFCURSOR,
       out_error_code   OUT   NUMBER,
       out_error_message   OUT   VARCHAR2
    ) AS

        --Variables
        v_SUN_DATE DATE := TO_DATE('01/15/2011', 'mm/dd/yyyy');
        vCount    NUMBER := 0;
        v_mtn NUM

BER;
    v_mtn_eff_date DATE;
    cMtnPricePlanInfo DATA_RESULTLIST;

BEGIN

    SELECT COUNT(*) INTO vCount FROM TABLE (pSearchCriteria);

    FOR i IN 1..vCount LOOP

        SELECT MTN, TO_DATE(MTN_EFF_DATE, 'mm/dd/yyyy') into v_mtn, v_mtn_eff_date 
        FROM TABLE (pSearchCriteria) 
        WHERE 
        ROWNUM = i; 

        SELECT 
            A.PPLAN_ID, A.EFF_DATE, A.MTN INTO cMtnPricePlanInfo(i).PPLAN_ID, cMtnPricePlanInfo(i).EFF_DATE, cMtnPricePlanInfo(i).MTN
        FROM CUST_ACCT_LINE_PPLAN A, CUST_ACCT_LINE_PPLAN_HIST B
        WHERE
            A.CUST_ID  = pCustId
            AND A.ACCT_NO    = pAcctNo
            AND A.MTN = v_mtn
            AND A.MTN_EFF_DATE = v_mtn_eff_date
            AND A.EFF_DATE >= 
                (SELECT MAX(EFF_DATE) FROM CUST_ACCT_LINE_PPLAN_HIST C
                WHERE
                    C.CUST_ID  = pCustId
                    AND C.ACCT_NO    = pAcctNo
                    AND C.MTN = v_mtn
                    AND C.MTN_EFF_DATE = v_mtn_eff_date
                    AND C.EFF_DATE <= v_SUN_DATE)
            AND A.CUST_ID = B.CUST_ID
            AND A.ACCT_NO = B.ACCT_NO
            AND A.MTN = B.MTN
            AND A.MTN_EFF_DATE = B.MTN_EFF_DATE
            AND A.PPLAN_ID = B.PPLAN_ID;

    END LOOP;
       OPEN pRecordSet FOR
            SELECT * FROM TABLE (cMtnPricePlanInfo);

END;
/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T22:15:03.843

对我来说突出的第一件事是：

```
 SELECT MTN, TO_DATE(MTN_EFF_DATE, 'mm/dd/yyyy') into v_mtn, v_mtn_eff_date 
    FROM TABLE (pSearchCriteria) 
    WHERE 
    ROWNUM = i; 
```

对于`i`大于 1，这不会返回任何内容。至于原因，请看[这个问题](https://stackoverflow.com/questions/4826211/clarification-on-rownum)。事实上，因为你使用的是 ，如果大于或等于 2 `SELECT ... INTO ...`，你会得到一个`no data found`错误。`i`

您不需要 SQL 查询来从 PL/SQL 集合中获取一些值。尝试将此查询替换为

```
 v_mtn := pSearchCriteria(i).MTN;
    v_mtn_eff_date := TO_DATE(pSearchCriteria(i).MTN_EFF_DATE, 'mm/dd/yyyy'); 
```

I don't have your tables nor the data in them so I can't be sure why you're getting no data. I can only hazard at some obvious suggestions: is `vCount` zero? If you put suitable values for `v_mtn` and `v_mtn_eff_date` and run your query on its own, separate from this stored procedure, does it return any rows?

# .net - 使用 edtFtpNet 在 ftp 中复制文件的最佳方法

> ID：12655446
> 
> 赞同：0
> 
> 时间：2012-09-29T18:43:51.383
> 
> 标签：.net, ftp

我正在**使用 edtFtpNet**将我的应用程序的二进制文件上传到 ftpSite，**我需要将这些文件从服务器目录复制到同一服务器上的特定客户端目录的选项。** 场景：在更新应用程序时，我将二进制文件上传到服务器上的一个集中位置，然后在验证所有文件都正确上传后，我将它们复制到相应的客户端文件夹中。最好的方法是什么？

我可以从我的本地再次上传这些，但这太重了，而且会花费太多时间。请注意，我需要复制功能，而不是剪切..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T07:48:09.210

是的，您可以使用重命名操作将文件从服务器上的一个目录移动到服务器上的另一个目录。此操作通常用于重命名文件，但也可用于移动文件。

因此，例如，如果您在名为 dirA 的目录中有一个名为 myfile 的文件，并且您想将其移动到另一个目录 dirB，那么您可以将该文件从 dirA/myfile 重命名为 dirB/myfile。

# c# - DataGridView 不使用 LINQ 显示值

> ID：12655448
> 
> 赞同：1
> 
> 时间：2012-09-29T18:43:55.980
> 
> 标签：c#, sql-server, winforms, linq

这对用户来说非常简单。

他们从组合框中选择零件类型、制造商，然后在文本框中搜索零件代码。单击搜索，结果会在 DataGridView 中返回。

代码：

```
var mType = CmbType.SelectedItem.ToString();
var mManufacturer = CmbMfr.SelectedValue.ToString();
var mCode = Convert.ToString(TxtProductCode.Text);

switch (mType)
{
    case "Faucets":
        var faucets = Resources.Accessor.SearchFaucets(mManufacturer, mCode);
        DgInventory.DataSource = faucets;
        break;
    case "Parts":
        var parts = Resources.Accessor.SearchParts(mManufacturer, mCode);
        DgInventory.DataSource = parts;
        break;
} 
```

访问器代码：

```
public static List<TblFaucets> SearchFaucets(string mId, string mCode)
{
    var dataConnect = new PxLinqSqlDataContext();

    return (from f in dataConnect.GetTable<TblFaucets>()
            where (f.Mfr == Convert.ToInt32(mId))
            where (f.Code == mCode)
            select f).ToList<TblFaucets>();
    } 
```

“搞砸”的是结果：

*   身份证：正确
*   Mfr：是其表中的 ID，而不是名称
*   代码：正确
*   说明：正确
*   价格：正确
*   日期：正确
*   制造商：我什至不知道为什么在这里，它的结果是“PXDB.TblManufacturers

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:28:17.313

首先，`PXDB.TblManufacturers`似乎是从*tblFaucets 到 tblManufactureres的***关系**。 似乎是您的水龙头表中指向制造商的**foreignKey值。***`Mfr`*

 ***您可以尝试创建一个仅包含您想要的数据的**匿名类型。**在您的 select 子句中选择您的数据 - 以及任何关系数据。

```
public static List<DisplayFaucet> SearchFaucets(string mId, string mCode)
{
    var dataConnect = new PxLinqSqlDataContext();

    return (from f in dataConnect.GetTable<TblFaucets>()
        where (f.Mfr == Convert.ToInt32(mId))
        where (f.Code == mCode)
        select new DisplayFaucet () {                              // create anonymous object 
                  ID = f.ID,                      // only holding the data you want to
                  Manufacturer = Manufacturer.Name,  // assuming there is property Name within your manufacturer table?!
                  Code = f.Code,
                  Description = f.Description,
                  Price = f.Price,
                  Date = f.Date
               }).ToList();
} 
```

添加另一个类来保存要显示的数据

```
public class DisplayFaucet
{
    public int ID { get; set; }
    public string Manufacturer { get; set; }
    public string Code { get; set; } // check type
    public string Description { get; set; }
    public doublePrice{ get; set; } // check type
    public DaetTime Date { get; set; } // check type
} 
```

请注意，`SearchFaucets(..)`可能不再返回**tblFaucet**类型的项目！相反，我创建了一个新类。这个包含所有应该显示的数据！***

# asp.net - 使用 MVC3 启用 gzip 压缩

> ID：12655455
> 
> 赞同：3
> 
> 时间：2012-09-29T18:44:42.433
> 
> 标签：asp.net, asp.net-mvc, iis, gzip, http-compression

我正在使用 chrome 扩展 YSlow 来测试我的网站性能。

我在使用 gzip 压缩组件上获得了 F 级。

应该压缩发送 15 个纯文本组件：

```
http://localhost:21964/Content/custom/css/blog.css
http://localhost:21964/Content/custom/css/style.css
http://localhost:21964/Content/custom/css/socialize-bookmarks.css
http://localhost:21964/Content/custom/css/prettyPhoto.css
http://localhost:21964/Content/custom/css/flexslider.css
http://localhost:21964/Content/custom/css/colors/color-orange.css
http://localhost:21964/Content/sc2.css
http://localhost:21964/Content/custom/javascript/custom.js
http://localhost:21964/Content/custom/javascript/header.js
http://localhost:21964/Content/custom/javascript/twitter.js
http://localhost:21964/Content/custom/javascript/bra.photostream.js
http://localhost:21964/Content/custom/javascript/jquery.flexslider.js
http://localhost:21964/Content/custom/javascript/jquery.bpopup-0.7.0.min.js
http://localhost:21964/Content/custom/javascript/prettyPhoto.js
http://localhost:21964/css/colors/color-orange.css 
```

压缩通过减小 HTTP 响应的大小来缩短响应时间。Gzip 是目前可用的最流行和最有效的压缩方法，通常可以将响应大小减少约 70%。今天大约 90% 的 Internet 流量通过声称支持 gzip 的浏览器传输。

[这里](https://stackoverflow.com/questions/6992524/how-do-i-enable-gzip-compression-when-using-mvc3-on-iis7)有一个类似的帖子，但即使我已经按照这些步骤操作，它也不会压缩流量。

我已经完成的步骤：

1.  我勾选了 IIS -> Compression 中的所有压缩设置。
2.  激活 Windows 功能“动态内容压缩”。
3.  我已将此行添加到`web.config`：

 `````
<system.webServer>
...
 <httpCompression directory="%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files">
   <scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll"/>
   <dynamicTypes>
     <add mimeType="text/*" enabled="true"/>
     <add mimeType="message/*" enabled="true"/>
     <add mimeType="application/javascript" enabled="true"/>
     <add mimeType="*/*" enabled="true"/>
   </dynamicTypes>
   <staticTypes>
     <add mimeType="text/*" enabled="true"/>
     <add mimeType="message/*" enabled="true"/>
     <add mimeType="application/javascript" enabled="true"/>
     <add mimeType="*/*" enabled="true"/>
   </staticTypes>
 </httpCompression>
 <urlCompression doStaticCompression="true" doDynamicCompression="true" /> 
...
</system.webServer> 
````  `我目前正在项目 Properties -> Web -> Servers 中使用 Developer Server

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T18:50:15.317

Visual Studio 开发服务器 (Cassini) 不支持使用 IIS 或 IIS Express 的 gzip 压缩。``

# javascript - javascript替换某个单词的整行

> ID：12655461
> 
> 赞同：0
> 
> 时间：2012-09-29T18:45:04.943
> 
> 标签：javascript, jquery

如何使用javascript替换方法替换某个单词之后的所有字符。

例如：“这是示例文本。”

当任何一行包含“sample”时，从单词“sample”到行尾应替换为“ *** ”。该行应该是

“是*** ”

我知道我必须使用正则表达式，但我不知道应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:51:30.077

使用可以使用这个

```
<div id="something">this is sample value</div>

var value=$('div:contains("sample")').text();

var newvalue=value.substr(0,value.search( 'sample' )) 
```

# function - 函数可以作为参数传递吗？

> ID：12655464
> 
> 赞同：220
> 
> 时间：2012-09-29T18:45:33.923
> 
> 标签：function, go

在Java中，我可以做类似的事情

```
derp(new Runnable { public void run () { /* run this sometime later */ } }) 
```

并稍后“运行”该方法中的代码。处理起来很痛苦（匿名内部类），但可以做到。

Go 是否有一些东西可以促进作为参数传入的函数/回调？

* * *

## 回答 #1

> 赞同：295
> 
> 时间：2012-09-29T19:18:35.287

是的，请考虑以下一些示例：

```
package main

import "fmt"

// convert types take an int and return a string value.
type convert func(int) string

// value implements convert, returning x as string.
func value(x int) string {
    return fmt.Sprintf("%v", x)
}

// quote123 passes 123 to convert func and returns quoted string.
func quote123(fn convert) string {
    return fmt.Sprintf("%q", fn(123))
}

func main() {
    var result string

    result = value(123)
    fmt.Println(result)
    // Output: 123

    result = quote123(value)
    fmt.Println(result)
    // Output: "123"

    result = quote123(func(x int) string { return fmt.Sprintf("%b", x) })
    fmt.Println(result)
    // Output: "1111011"

    foo := func(x int) string { return "foo" }
    result = quote123(foo)
    fmt.Println(result)
    // Output: "foo"

    _ = convert(foo) // confirm foo satisfies convert at runtime

    // fails due to argument type
    // _ = convert(func(x float64) string { return "" })
} 
```

播放：[http ://play.golang.org/p/XNMtrDUDS0](http://play.golang.org/p/XNMtrDUDS0)

游览：[https](https://tour.golang.org/moretypes/25) ://tour.golang.org/moretypes/25 （函数闭包）

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2016-02-24T19:22:21.150

您可以将函数作为参数传递给 Go 函数。这是将函数作为参数传递给另一个 Go 函数的示例：

```
package main

import "fmt"

type fn func(int) 

func myfn1(i int) {
    fmt.Printf("\ni is %v", i)
}
func myfn2(i int) {
    fmt.Printf("\ni is %v", i)
}
func test(f fn, val int) {
    f(val)
}
func main() {
    test(myfn1, 123)
    test(myfn2, 321)
} 
```

你可以试试这个： https: [//play.golang.org/p/9mAOUWGp0k](https://play.golang.org/p/9mAOUWGp0k)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-03-11T18:43:08.633

这是 Go 中的示例“Map”实现。希望这可以帮助！！

```
func square(num int) int {
    return num * num
}

func mapper(f func(int) int, alist []int) []int {
    var a = make([]int, len(alist), len(alist))
    for index, val := range alist {

        a[index] = f(val)
    }
    return a
}

func main() {
    alist := []int{4, 5, 6, 7}
    result := mapper(square, alist)
    fmt.Println(result)

} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-10-05T01:04:46.613

这是一个简单的例子：

```
 package main

    import "fmt"

    func plusTwo() (func(v int) (int)) {
        return func(v int) (int) {
            return v+2
        }
    }

    func plusX(x int) (func(v int) (int)) {
       return func(v int) (int) {
           return v+x
       }
    }

    func main() {
        p := plusTwo()
        fmt.Printf("3+2: %d\n", p(3))

        px := plusX(3)
        fmt.Printf("3+3: %d\n", px(3))
    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-02-06T04:52:54.623

这是我能想到的最简单的方法。

```
package main

import "fmt"

func main() {
    g := greeting
    getFunc(g)
}

func getFunc(f func()) {
    f()
}

func greeting() {
    fmt.Println("Hello")
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-01-05T20:19:09.093

我希望下面的示例将提供更多的清晰度。

```
package main

type EmployeeManager struct{
    category            string
    city                string
    calculateSalary     func() int64
}

func NewEmployeeManager() (*EmployeeManager,error){

    return &EmployeeManager{
        category : "MANAGEMENT",
        city : "NY",
        calculateSalary: func() int64 {
            var calculatedSalary int64
            // some formula
            return calculatedSalary
        },
    },nil
}

func (self *EmployeeManager) emWithSalaryCalculation(){
    self.calculateSalary = func() int64 {
        var calculatedSalary int64
        // some new formula
        return calculatedSalary
    }
}

func updateEmployeeInfo(em EmployeeManager){
    // Some code
}

func processEmployee(){
    updateEmployeeInfo(struct {
        category        string
        city            string
        calculateSalary func() int64
    }{category: "", city: "", calculateSalary: func() int64 {
        var calculatedSalary int64
        // some new formula
        return calculatedSalary
    }})
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-25T18:19:09.037

您还可以传递结构的功能，例如：

```
 package main
    // define struct
    type Apple struct {}

    // return apple's color
    func (Apple) GetColor() string {
         return "Red" 
    }

    func main () {
        // instantiate
        myApple := Apple{}

        // put the func in a variable
        theFunc := myApple.GetColor

        // execute the variable as a function
        color := theFunc()

        print(color)
    } 
```

输出将是“红色”，[在操场上检查](https://play.golang.org/p/pMArTXgJEq_5)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-09-29T18:53:23.897

是的，Go 确实接受一流的功能。

有关有用的链接，请参阅文章[“Go 中的第一类函数” 。](http://blog.golang.org/2011/06/first-class-functions-in-go-and-new-go.html)

# javascript - 带有字符串的Javascript执行函数

> ID：12655468
> 
> 赞同：0
> 
> 时间：2012-09-29T18:45:50.753
> 
> 标签：javascript

我正在创建一个这样的原型类，但我想使用字符串作为函数名来调用函数。我找到了窗口名称；例如某处，但它不适用于我的情况。

```
function someObj() {

  this.someMethod = function() {
    alert('boo'); 
    name = "someOtherMethod";
    window[name]();
  }

  var someOtherMethod = function() {
    alert('indirect reference');
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:49:06.823

这是因为它不是函数内部定义的对象`"someOtherMethod"`的成员。`window``someObj`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T18:49:02.473

`window`仅适用于全局变量。

除非您使用 ，否则您不能通过字符串访问局部变量`eval`，这几乎总是一个坏主意。

另一种方法是使用对象。这允许您使用字符串查找属性。

```
function someObj() {

  var methods = {};

  methods.someMethod = function() {
    alert('boo'); 
    var name = "someOtherMethod";
    methods[name]();
  }

  methods.someOtherMethod = function() {
    alert('indirect reference');
  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T18:49:42.230

someOtherMethod 从窗口中隐藏，仅存在于原型的范围内。

尝试将其移出。

```
function someObj() {
    this.someMethod = function() {
       alert('boo'); 
       name = "someOtherMethod";
       window[name]();
     }
}

var someOtherMethod = function() {
    alert('indirect reference');
} 
```

尽管使用全局变量是个坏主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T18:52:06.777

创建您自己的方法哈希：

```
function someObj() {

  this.someMethod = function() {
    alert('boo'); 
    name = "someOtherMethod";
    methods[name]();
  }

  var methods = {
    someOtherMethod : function() {
        alert('indirect reference');
    }
  };
} 
```

您的变量是函数的本地变量，因此它不会位于`window`. 即使您在全局范围内工作，使用自己的对象也比依赖 window 更好，这样可以避免名称冲突。

# google-apps-script - google.script.run.myFunction() 可用的变量范围是什么

> ID：12655469
> 
> 赞同：0
> 
> 时间：2012-09-29T18:45:56.377
> 
> 标签：google-apps-script, google-sheets

如果可以的话，我想要一个小小的理智检查。

HtmlOutput 窗口中的 Javascript 代码是否可以在 Google 电子表格上浮动更改变量并调用最初创建 HtmlOutput 的 gs 代码中的方法？

我有一个带有浮动表单的 Google 电子表格，如下所示：

> *一些代码.gs*

```
var theForm;
var theSpreadsheet;
function makeForm() {
    :
  theForm = HtmlService.createTemplateFromFile('aForm').evaluate();
  theSpreadsheet = SpreadsheetApp.getActiveSpreadsheet();    
  theSpreadsheet.show(theForm);
    :
}

function recordTheForm(jsonFormData) {
    :
  theForm.clear();
    :
} 
```

附加到“aForm.html”的 HTML 中的一个按钮，我有一个函数调用回文件“someCode.gs”。

> *aForm.html*

```
 :
google.script.run.recordTheForm(jsonTheForm);
  : 
```

我是否正确，即使它是从 someCode.gs 实例化的，recordTheForm() 的调用者也不知道该原始内存空间的内容？

有没有办法得到它？比如来回传递“上下文”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T01:21:30.387

GAS 中的变量：

浏览器按钮点击和其他浏览器事件会产生对 GAS 的调用。从浏览器到 GAS 的每次调用都会导致您的 GAS 代码重新运行，重新初始化所有变量。这是全局变量的问题。全局变量需要从浏览器传回您的 GAS 代码或从数据库或脚本属性重新加载。

# android-service - 当用户从应用程序菜单中单击桌面图标或应用程序时，如何从我的服务中监听？

> ID：12655473
> 
> 赞同：0
> 
> 时间：2012-09-29T18:46:26.813
> 
> 标签：android-service

*   这个问题不再有效 - 公司已正式通知我，我们将放弃 Android 并使用专为商业用途设计的系统。

在我们的两家姊妹公司中，我们安装了近 500 部安卓手机，假设它们具有类似于 Linux 的安全功能，允许我们向员工提供商务手机，但限制他们访问应用程序。不幸的是，我们后来发现我们大错特错了。Android 已经决定，拥有手机的人应该可以完全访问所有内容。不幸的是，这对我们来说是一场商业噩梦，大量数据超载，员工下载和安装任何他们可以从 Play 商店获得的东西，我们需要运行的应用程序不断被任务管理器停止，因为太多的应用程序正在运行。与我们的员工同时运行，他们认为应用程序有问题或手机坏了。由于我们的操作类型，

我们绝对需要保护手机或摆脱它们。所以...

在服务内部，我如何捕获员工从桌面或应用程序菜单单击未经授权的应用程序？在过去的两天里，我一直在谷歌搜索答案，但一无所获。我知道这是可以做到的，因为我的个人手机上有几个应用程序可以做到这一点。

我们使用的是安卓 2.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:07:30.900

看看[3CX 移动设备管理器](http://www.mobiledevicemanager.com/ "3CX 移动设备管理器")。注册过程免费且简单。然后，您只需从 GooglePlay 将应用程序下载到每部手机并进行设置。我很想知道您是否继续使用它以及它是否可以满足您的所有需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T18:59:34.500

为什么不从手机上卸载 Google Play 商店？还有其他不需要的应用程序吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T06:31:20.987

安装家长控制应用程序也可能是最简单的。这是一个示例，尽管此特定示例可能无法满足您的所有需求：[https ://play.google.com/store/apps/details?id=com.kiddoware.kidsplace](https://play.google.com/store/apps/details?id=com.kiddoware.kidsplace)

# iphone - 将 XIB 加载到子视图中

> ID：12655475
> 
> 赞同：1
> 
> 时间：2012-09-29T18:46:52.643
> 
> 标签：iphone, objective-c, ios, xcode

我一直在寻找有关如何执行此操作的信息，但没有发现任何我理解的信息。

基本上，我希望能够（从 ViewController.xib）在子视图中的该视图之上加载另一个 XIB 文件。这个新的子视图应该是可操作的，因此可以使用多点触控手势和/或滑动手势来移动它。

我试图从 ViewController 添加一个“视图”对象，然后将另一个 XIB 加载到该子视图对象中。

希望有人可以提供帮助。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T18:55:30.323

您应该能够通过在 中创建另一个类的实例`ViewController`，然后将其作为子视图添加到当前视图控制器来完成您想要的。

```
MyOtherViewController *movc = [[MyOtherViewController alloc] init];
[self.view addSubview:movc.view]; 
```

至于处理手势，你可以在`MyOtherViewController`课堂上处理它们，或者制作一个容器视图并在你的`ViewController`. 不要忘记它们是子视图，并且任何动作都应该与它们的父视图相关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-16T07:20:27.813

上面的代码几乎是正确的，但除了

```
UIView *newView = [[NSBundle mainBundle] loadNibNamed:@"MyNewXib" owner:self options:nil]; 
```

它应该是

```
UIView *newView = [[[NSBundle mainBundle] loadNibNamed:@"MyNewXib" owner:self options:nil] objectAtIndex:0]; 
```

在视图控制器中，您可以简单地添加

```
[self.view addSubview:newView]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T19:45:38.340

您可以通过创建 xib 来定义 xib 中的子视图（选择 File New...“user interface”、“view”）。

您可以像这样加载该视图：

```
UIView *newView = [[NSBundle mainBundle] loadNibNamed:@"MyNewXib" owner:self options:nil]; 
```

这个新视图现在可以像任何其他子视图一样对待：

```
// assign it to a property
@property (strong, non atomic) UIView *viewFromXib;
@sythesize viewFromXib=_viewFromXib;

self.viewFromXib = newView;

// add it to your hierarchy
self.viewFromXib.frame = CGRectMake( /* this will start out 0,0 the size from the xib */ );
[self.view addSubview:self.viewFromXib];

// add gesture recognizer
UITapGestureRecognizer *tapGR =  [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tap:)];
[self.viewFromXib addGestureRecognizer:tapGR]; 
```

... 等等

# asp.net-mvc - MVC4 SelectList 未选择默认对象

> ID：12655479
> 
> 赞同：2
> 
> 时间：2012-09-29T18:47:52.663
> 
> 标签：asp.net-mvc, selectlist

我的选择列表没有选择通过代码引入的默认对象。

我首先`SelectList`像这样创建我的：

```
public SelectList CreateSelectList(object objSelected = null)
{
  return new SelectList(GetAll().OrderBy(s => s.NumericalValue), "PeriodID", "Name", objSelected);
} 
```

我的 objSelected 填充了与 PeriodID 关联的 Guid。

在我的控制器内部，我将`viewbag`变量定义为新的选择列表。

```
public ActionResult Edit(Guid id)
{
  Classroom classroom = classroomRepository.GetByID(id);
  ViewBag.PeriodID = periodRepository.CreateSelectList(classroom.PeriodID);
  return View(classroom);
} 
```

然后在我的视图中，这是我显示我的方式`SelectList`：

```
<div class="control-group">
  @Html.LabelFor(model => model.PeriodID, "Period", new { @class = "control-label" })
  <div class="controls">
      @Html.DropDownListFor(model => model.PeriodID, ViewBag.PeriodID as SelectList, String.Empty, new { @class = "span3" })
      @Html.ValidationMessageFor(model => model.PeriodID)
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T19:11:08.200

你这里有两个问题。首先，这个：

```
@Html.DropDownListFor(model => model.PeriodID, ViewBag.PeriodID as SelectList, 
      String.Empty, new { @class = "span3" }) 
```

将 ViewBag.PeriodID 更改为 ViewBag.Periods 或 ViewBag.PeriodList。这很令人困惑，如果使用相同的命名对象，MVC 会在很多情况下感到困惑。最好确保所有内容都以不同的方式命名。

其次，SelectList 类忽略了 SelectListItem 的 selecteditem 成员。它根本没有被使用。DropDownListFor 将采用 model.PeriodID 的值并将其设为选定值。但是，我在您的代码中看到这些应该是相同的，所以我猜测命名可能是这里的一个因素。

# android-layout - 奇怪的 ListView 行为 [更快的性能]

> ID：12655483
> 
> 赞同：0
> 
> 时间：2012-09-29T18:48:27.920
> 
> 标签：android-layout, android-widget, android-listview, android-arrayadapter

我发现 listview 的这种非常奇怪的行为，它在 Android 2.1 和 4.1 上的行为不同 这里是我编写的 2 个类，google 建议使用它们来提高 ListView 的性能。如何重现：添加一个条目，选中第一个复选框，然后添加多于一个页面的条目。选中的框在元素中浮动！这是我写的一个小项目：http: [//tinyurl.com/strange-listview](http://tinyurl.com/strange-listview) `Anyone can explain the issue or a workaround?`

```
public class AlarmManagerActivity extends Activity {
    private PerformanceArrayAdapter mPerformaceArrayAdapter;
    private ListView mListView;
    private ArrayList<String> mListItems = new ArrayList<String>();
    private int mCounter = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mListView = (ListView) findViewById(R.id.listViewCondition);
        mPerformaceArrayAdapter = new PerformanceArrayAdapter(this, mListItems);
        mListView.setAdapter(mPerformaceArrayAdapter);
    }

    public void onClickAdd(View view){
        mListItems.add("" + mCounter++);
        mPerformaceArrayAdapter.notifyDataSetChanged();
    }
} 
```

这是`main.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" android:layout_width="fill_parent"
android:layout_height="fill_parent">
<Button android:id="@+id/buttonAdd" android:layout_width="wrap_content"
    android:layout_height="wrap_content" android:text="Add New Alarm"
    android:onClick="onClickAdd" />
<ListView android:id="@+id/listViewCondition"
    android:layout_height="wrap_content" android:layout_width="match_parent"></ListView>
</LinearLayout> 
```

和性能适配器类。

```
public class PerformanceArrayAdapter extends ArrayAdapter<String> {
    private final Activity context;
    private final ArrayList<String> mListItems;

    static class ViewHolder {
        public TextView textView1;
        public TextView textView2;
        public CheckBox checkBox;
    }

    public PerformanceArrayAdapter(Activity context, ArrayList<String> listItems) {
        super(context, R.layout.row_layout, listItems);
        this.context = context;
        this.mListItems = listItems;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View rowView = convertView;
        if (rowView == null) {
            LayoutInflater inflater = context.getLayoutInflater();
            rowView = inflater.inflate(R.layout.row_layout, null);
            ViewHolder viewHolder = new ViewHolder();
            viewHolder.textView1 = (TextView) rowView.findViewById(R.id.textView1);
                    viewHolder.textView2 = (TextView) rowView.findViewById(R.id.textView2);
            viewHolder.checkBox = (CheckBox) rowView.findViewById(R.id.checkBox1);
            rowView.setTag(viewHolder);
        }
        ViewHolder holder = (ViewHolder) rowView.getTag();
        holder.textView1.setText(mListItems.get(position));
        return rowView;
    }
} 
```

这里是`row_layout.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent" android:layout_height="match_parent">
    <TextView android:id="@+id/textView1" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:layout_alignParentTop="true"
            android:layout_alignParentLeft="true" android:text="TextView1"></TextView>
    <TextView android:id="@+id/textView2" android:layout_below="@+id/textView1"
            android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:text="TextView2"></TextView>
    <CheckBox android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:id="@+id/checkBox1"
            android:layout_alignParentRight="true" android:focusable="false"
            android:focusableInTouchMode="false"></CheckBox>
    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:37:00.597

感谢 Vogella，我找到了解决方案 :) 我不得不使用此处提到的域模型来跟踪文本视图和复选框。

[http://www.vogella.com/articles/AndroidListView/article.html#listadvanced_interactive](http://www.vogella.com/articles/AndroidListView/article.html#listadvanced_interactive)

# php - 从多维数组中取消设置数组

> ID：12655484
> 
> 赞同：0
> 
> 时间：2012-09-29T18:48:40.307
> 
> 标签：php, arrays, for-loop, multidimensional-array, key

我希望遍历多维数组并删除“已批准”设置为零的数组。我尝试使用`unset`其他stackoverflow线程中建议的方法，但无济于事。我还尝试根据[此 stackoverflow 链接](https://stackoverflow.com/questions/3753597/php-reorder-arrays-after-unset)重新索引数组。

```
foreach ($dentists as $key => $dentists_index)
    {
        if($dentists_index["approved"] == 0)
        {
            unset($dentists[$key]);
        }
    } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T05:53:10.827

实际上你的代码看起来是正确的！看看这个运行良好并输出一行来调试每个牙医的快速测试：

```
<?
$dentists = array(
    array(
        'name' => 'kevin',
        'approved' => 0,
    ),
    array(
        'name' => 'cathy',
        'approved' => 0,
    ),
    array(
        'name' => 'steven',
        'approved' => 1,
    ),
);

foreach ($dentists as $key => $dentists_index) {
    print "Dentist #$key - Approved: " . $dentists_index['approved'] . "<br />\n";

  if($dentists_index['approved'] == 0) {
    unset($dentists[$key]);
  }
}

var_dump($dentists);
?> 
```

# c++ - make 检查依赖关系有多深？

> ID：12655485
> 
> 赞同：0
> 
> 时间：2012-09-29T18:48:40.997
> 
> 标签：c++, compilation, makefile, dependencies

我的`install`目标取决于我的`all`目标，然后取决于`prog`需要安装的程序的名称。问题是，当我更改`prog.cpp`并运行`make install`时，它不会重新编译。但是，当我运行时`make`，它确实如此。**实际检查是否有需要更新的目标有多深？**因为它似乎很快就停止了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T19:00:36.437

“Make”检查依赖关系，无论它们有多“深”，但它不会自动执行任何操作。如果“make install”没有建立导致实际构建的正确依赖链，那么它就不会发生。

例子：

```
install:
   cp Program /usr/bin/Program 
```

会这样做：它会复制程序而不做其他任何事情。

```
install: Program
   cp Program /usr/bin/Program 
```

说“安装”依赖于“程序”，所以在实际执行与“安装”相关的命令之前，make 会寻找有关“程序”的内容。

# python - 在heroku上使用flask提供静态html页面

> ID：12655490
> 
> 赞同：4
> 
> 时间：2012-09-29T18:49:22.217
> 
> 标签：python, heroku, flask

我试图弄清楚如何使用烧瓶应用程序从 heroku 提供静态页面。我通过一些搜索找到了这个：

```
@app.route('/foo/<path:filename>')
def send_foo(filename):
     return send_from_directory('/path/to/static/files', filename) 
```

但是，这将是非常低效的。有没有办法让前端服务器直接提供这些文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T19:27:57.017

通常你会用 apache 或类似的 mod_rewrite 来做到这一点，但 afaik heroku 不允许你改变 http 服务器配置。

您需要使用 rack 中间件，它可以让您使用 ruby​​ 编写 url 重写规则。（看看这个：http: [//icelab.com.au/articles/useful-heroku-friendly-rewrites-with-rack-rewrite/](http://icelab.com.au/articles/useful-heroku-friendly-rewrites-with-rack-rewrite/)）

# javascript - 使用自调用匿名函数与使用普通函数

> ID：12655493
> 
> 赞同：0
> 
> 时间：2012-09-29T18:49:55.423
> 
> 标签：javascript

我有一个变量，该变量基于对象是否具有长度作为其属性之一来设置。如果没有，那么我需要检查其中一个属性是否存在。如果是这样，则获取存储在该对象中的第一个数组并返回长度，否则将变量设置为一个。这可以在这样的语句中组合起来。

```
var b=someObject;
var len = b.num||(b.arrs?(function(a){for(var x in a)return a[x].length})(b.arrs):false)||1; 
```

这样做的另一种方法是拉出功能并像这样

```
function getLength(a){for(var x in a)return a[x].length})
var b=someObject;
var len = b.num||(b.arrs?getLength(b.arrs):false)||1; 
```

我想知道与另一种方式相比，这样做是否会降低性能？javascript引擎对它们的看法有什么不同吗？我更喜欢第一种方法的原因是它使我无法拥有一堆额外的辅助函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:53:26.217

匿名内联版本被执行并丢弃。而单独的函数实例是

a) 如果在函数中声明，则保留在内存中并与其余的局部变量一起弹出

b) 如果页面在全局空间中定义为窗口对象的成员，则在页面的整个生命周期内保存在内存中。

因此，如果您不太可能再次需要它，最好走匿名内联路线，我相信。

# validation - TDD/BDD 和模型验证

> ID：12655495
> 
> 赞同：0
> 
> 时间：2012-09-29T18:50:05.787
> 
> 标签：validation, model, tdd, bdd

我一直想知道在 BDD/TDD 中处理模型验证的最常用方法是什么？您是否为模型中的每个字段编写测试并对此进行验证？您是否编写一个验证测试并验证里面的所有内容？

我真的很想知道更多，以及每个人是如何做到这一点的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:37:59.660

检查这个[问题](https://stackoverflow.com/questions/12513184/solid-java-unit-test-automation-junit-hamcrest)，问题中的示例是如何使用 TDD 进行验证的一个很好的示例......它也非常详尽。

# algorithm - 该算法的最坏情况运行时间（如何证明）？

> ID：12655496
> 
> 赞同：1
> 
> 时间：2012-09-29T18:50:06.900
> 
> 标签：algorithm, recursion, analysis

我有一个我正在尝试实现的算法。我被要求确定一个描述其最坏情况运行时间的函数。作为输入，它需要一个一定长度的数组（我们称之为 n）。那么它的作用如下：

```
if (n==0){ return 0;}
else if(n==1){return A[0];}
else{
     return f(n-1)+f(n-2)
} 
```

对不起，如果我对实现细节有点稀疏，但从某种意义上说，它与 fibbanoci 序列之类的东西非常相似。我在想这个算法的最坏情况运行时间是 t(n)=2^n，因为如果 n 很大，它会分解成 2 个单独的计算，然后又会分解成 2 个，依此类推。我只是不确定如何正式证明这一点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T19:46:42.720

让我们首先得到一个运行时间的递归。

```
T(0) = T(1) = 1 
```

因为两者都只返回一个数字（一个是数组查找，但这也是常数时间）。因为`n > 1`我们有

```
T(n) = T(n-1) + T(n-2) + 1 
```

因为您评估`f(n-1)`并`f(n-2)`添加两个结果。这与斐波那契数列本身几乎相同`F(n) = F(n-1) + F(n-2)`，并且结果密切相关。

```
 n | T(n) | F(n)
----------------
 0 |   1  |   0
 1 |   1  |   1
 2 |   3  |   1
 3 |   5  |   2
 4 |   9  |   3
 5 |  15  |   5
 6 |  25  |   8
 7 |  41  |  13
 8 |  67  |  21
 9 | 109  |  34
10 | 177  |  55
11 | 287  |  89 
```

如果您查看这些值，您会发现

```
T(n) = F(n+2) + F(n-1) - 1 
```

如果需要，可以通过归纳证明这一点。

由于斐波那契数列的项由 给出`F(n) = (φ^n - (1-φ)^n)/√5`，其中`φ = (1 + √5)/2`，您会看到您的复杂度`f`也是`Θ(φ^n)`，就像斐波那契数列一样。这比 好`Θ(2^n)`，但仍然是指数的，所以使用这种方式的计算只适用于小的`n`。

# android - Android Jsoup - 使用 runOnUiThread 时，元素在 foreach 循环中重复并跳过

> ID：12655500
> 
> 赞同：1
> 
> 时间：2012-09-29T18:50:38.767
> 
> 标签：android, duplicates, jsoup

在过去的一天里，我一直在努力克服这个问题，但我没有成功。发生的事情是 - 我正在使用 Jsoup ( `getElementsByClass`) 获取某个类下的所有值，然后我正在运行一个 foreach 循环，最后，我使用`runOnUiThread`它来更新 UI 上的视图。

长话短说 - 出于某种原因，第一个元素没问题，但从第二个元素到第 10 个元素（有 10 个），它只使用第 10 个元素的值。当我取下 runOnUiThread 并将其用作常规函数（而不是在我需要的线程内）时，它可以完美运行并且不会跳过/复制任何元素。

所以，在这个很长的故事之后（对不起，我没有把它说短），这是我的代码：

```
 counter = 1;

            AssetManager assets = getAssets();
            font = Typeface.createFromAsset(assets, "arial.ttf");

            //Loading 10 gags
            try {
                Document doc = Jsoup.connect(url).get();
                Elements content = doc.getElementsByClass("Gag-Content");
                for(Element element : content) {
                            data = element.outerHtml();
                    if(data.indexOf("<iframe") == -1){
                        //Long ass random code here, in the end there are 2 variables: imageUrl & imageText

                        switch(counter){
                        case 1:
                            runOnUiThread(new Runnable() {

                                public void run() {
                                    final TextView text1;
                                    final ImageView image1;

                                    text1 = (TextView)((Activity) context).findViewById(R.id.textView1);
                                    text1.setText(imageText);
                                    text1.setTypeface(font);

                                    image1 = (ImageView)((Activity) context).findViewById(R.id.imageView1);
                                    image1.setImageBitmap(getBitmapFromURL(imageUrl));
                                }

                            });
                            /* final TextView text1;
                            final ImageView image1;

                            text1 = (TextView)((Activity) context).findViewById(R.id.textView1);
                            text1.setText(imageText);
                            text1.setTypeface(font);

                            image1 = (ImageView)((Activity) context).findViewById(R.id.imageView1);
                            image1.setImageBitmap(getBitmapFromURL(imageUrl)); */
                            break;
                        case 2:
                            runOnUiThread(new Runnable() {

                                public void run() {
                                    final TextView text2;
                                    final ImageView image2;

                                    text2 = (TextView)((Activity) context).findViewById(R.id.textView2);
                                    text2.setText(imageText);
                                    text2.setTypeface(font);

                                    image2 = (ImageView)((Activity) context).findViewById(R.id.imageView2);
                                    image2.setImageBitmap(getBitmapFromURL(imageUrl));
                                }
                            });

                            /* final TextView text2;
                            final ImageView image2;

                            text2 = (TextView)((Activity) context).findViewById(R.id.textView2);
                            text2.setText(imageText);
                            text2.setTypeface(font);

                            image2 = (ImageView)((Activity) context).findViewById(R.id.imageView2);
                            image2.setImageBitmap(getBitmapFromURL(imageUrl)); */
                            break;
                        case 3:
                            runOnUiThread(new Runnable() {

                                public void run() {
                                    final TextView text3;
                                    final ImageView image3;

                                    text3 = (TextView)((Activity) context).findViewById(R.id.textView3);
                                    text3.setText(imageText);
                                    text3.setTypeface(font);

                                    image3 = (ImageView)((Activity) context).findViewById(R.id.imageView3);
                                    image3.setImageBitmap(getBitmapFromURL(imageUrl));
                                }
                            });

                            /* final TextView text3;
                            final ImageView image3;

                            text3 = (TextView)((Activity) context).findViewById(R.id.textView3);
                            text3.setText(imageText);
                            text3.setTypeface(font);

                            image3 = (ImageView)((Activity) context).findViewById(R.id.imageView3);
                            image3.setImageBitmap(getBitmapFromURL(imageUrl)); */
                            break;
                        case 4:
                            runOnUiThread(new Runnable() {

                                public void run() {
                                    final TextView text4;
                                    final ImageView image4;

                                    text4 = (TextView)((Activity) context).findViewById(R.id.textView4);
                                    text4.setText(imageText);
                                    text4.setTypeface(font);

                                    image4 = (ImageView)((Activity) context).findViewById(R.id.imageView4);
                                    image4.setImageBitmap(getBitmapFromURL(imageUrl));
                                }
                            });

                            /* final TextView text4;
                            final ImageView image4;

                            text4 = (TextView)((Activity) context).findViewById(R.id.textView4);
                            text4.setText(imageText);
                            text4.setTypeface(font);

                            image4 = (ImageView)((Activity) context).findViewById(R.id.imageView4);
                            image4.setImageBitmap(getBitmapFromURL(imageUrl)); */
                            break;
                        case 5:
                            runOnUiThread(new Runnable() {

                                public void run() {
                                    final TextView text5;
                                    final ImageView image5;

                                    text5 = (TextView)((Activity) context).findViewById(R.id.textView5);
                                    text5.setText(imageText);
                                    text5.setTypeface(font);

                                    image5 = (ImageView)((Activity) context).findViewById(R.id.imageView5);
                                    image5.setImageBitmap(getBitmapFromURL(imageUrl));
                                }
                            });

                            /* final TextView text5;
                            final ImageView image5;

                            text5 = (TextView)((Activity) context).findViewById(R.id.textView5);
                            text5.setText(imageText);
                            text5.setTypeface(font);

                            image5 = (ImageView)((Activity) context).findViewById(R.id.imageView5);
                            image5.setImageBitmap(getBitmapFromURL(imageUrl)); */
                            break;
                        case 6:
                            runOnUiThread(new Runnable() {

                                public void run() {
                                    final TextView text6;
                                    final ImageView image6;

                                    text6 = (TextView)((Activity) context).findViewById(R.id.textView6);
                                    text6.setText(imageText);
                                    text6.setTypeface(font);

                                    image6 = (ImageView)((Activity) context).findViewById(R.id.imageView6);
                                    image6.setImageBitmap(getBitmapFromURL(imageUrl));
                                }
                            });

                            /* final TextView text6;
                            final ImageView image6;

                            text6 = (TextView)((Activity) context).findViewById(R.id.textView6);
                            text6.setText(imageText);
                            text6.setTypeface(font);

                            image6 = (ImageView)((Activity) context).findViewById(R.id.imageView6);
                            image6.setImageBitmap(getBitmapFromURL(imageUrl)); */
                            break;
                        case 7:
                            runOnUiThread(new Runnable() {

                                public void run() {
                                    final TextView text7;
                                    final ImageView image7;

                                    text7 = (TextView)((Activity) context).findViewById(R.id.textView7);
                                    text7.setText(imageText);
                                    text7.setTypeface(font);

                                    image7 = (ImageView)((Activity) context).findViewById(R.id.imageView7);
                                    image7.setImageBitmap(getBitmapFromURL(imageUrl));
                                }
                            });

                            /* final TextView text7;
                            final ImageView image7;

                            text7 = (TextView)((Activity) context).findViewById(R.id.textView7);
                            text7.setText(imageText);
                            text7.setTypeface(font);

                            image7 = (ImageView)((Activity) context).findViewById(R.id.imageView7);
                            image7.setImageBitmap(getBitmapFromURL(imageUrl)); */
                            break;
                        case 8:
                            runOnUiThread(new Runnable() {

                                public void run() {
                                    final TextView text8;
                                    final ImageView image8;

                                    text8 = (TextView)((Activity) context).findViewById(R.id.textView8);
                                    text8.setText(imageText);
                                    text8.setTypeface(font);

                                    image8 = (ImageView)((Activity) context).findViewById(R.id.imageView8);
                                    image8.setImageBitmap(getBitmapFromURL(imageUrl));
                                }
                            });

                            /* final TextView text8;
                            final ImageView image8;

                            text8 = (TextView)((Activity) context).findViewById(R.id.textView8);
                            text8.setText(imageText);
                            text8.setTypeface(font);

                            image8 = (ImageView)((Activity) context).findViewById(R.id.imageView8);
                            image8.setImageBitmap(getBitmapFromURL(imageUrl)); */
                            break;
                        case 9:
                            runOnUiThread(new Runnable() {

                                public void run() {
                                    final TextView text9;
                                    final ImageView image9;

                                    text9 = (TextView)((Activity) context).findViewById(R.id.textView9);
                                    text9.setText(imageText);
                                    text9.setTypeface(font);

                                    image9 = (ImageView)((Activity) context).findViewById(R.id.imageView9);
                                    image9.setImageBitmap(getBitmapFromURL(imageUrl));
                                }
                            });

                            /* final TextView text9;
                            final ImageView image9;

                            text9 = (TextView)((Activity) context).findViewById(R.id.textView9);
                            text9.setText(imageText);
                            text9.setTypeface(font);

                            image9 = (ImageView)((Activity) context).findViewById(R.id.imageView9);
                            image9.setImageBitmap(getBitmapFromURL(imageUrl)); */
                            break;
                        case 10:
                            runOnUiThread(new Runnable() {

                                public void run() {
                                    final TextView text10;
                                    final ImageView image10;

                                    text10 = (TextView)((Activity) context).findViewById(R.id.textView10);
                                    text10.setText(imageText);
                                    text10.setTypeface(font);

                                    image10 = (ImageView)((Activity) context).findViewById(R.id.imageView10);
                                    image10.setImageBitmap(getBitmapFromURL(imageUrl));
                                }
                            });

                            /* final TextView text10;
                            final ImageView image10;

                            text10 = (TextView)((Activity) context).findViewById(R.id.textView10);
                            text10.setText(imageText);
                            text10.setTypeface(font);

                            image10 = (ImageView)((Activity) context).findViewById(R.id.imageView10);
                            image10.setImageBitmap(getBitmapFromURL(imageUrl)); */
                            break;
                        }

                        counter++;
                        if(counter >= 11){
                            pd.dismiss();
                            break;
                        }
                    }
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:45:52.570

我通过将值添加到数组中解决了这个问题，在数组填充了我需要的数据后，我可以毫无问题地将数据加载到视图中。

# error-handling - 如何在 Clojurescript 中捕获任何 Javascript 异常？

> ID：12655503
> 
> 赞同：28
> 
> 时间：2012-09-29T18:51:21.507
> 
> 标签：error-handling, interop, clojurescript, swallowed-exceptions

在我的通信层中，我需要能够捕获任何 javascript 异常，将其记录下来并像往常一样继续。在 Clojurescript 中捕获异常的当前语法要求我需要指定被捕获的异常的类型。

我尝试在 catch 表单中使用 nil、js/Error、js/object 并且它没有捕获任何 javascript 异常（可以将字符串作为对象的类型）。

我将不胜感激任何提示如何在 Clojurescript 中本地完成此操作。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2014-01-17T10:34:27.647

我在 David Nolen [“Light Table ClojureScript Tutorial”中找到了另一个可能的答案](https://github.com/swannodette/lt-cljs-tutorial)

```
;; Error Handling
;; ============================================================================

;; Error handling in ClojureScript is relatively straightforward and more or
;; less similar to what is offered in JavaScript.

;; You can construct an error like this.

(js/Error. "Oops")

;; You can throw an error like this.

(throw (js/Error. "Oops"))

;; You can catch an error like this.

(try
  (throw (js/Error. "Oops"))
  (catch js/Error e
    e))

;; JavaScript unfortunately allows you to throw anything. You can handle
;; this in ClojureScript with the following.

(try
  (throw (js/Error. "Oops"))
  (catch :default e
    e)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T17:26:48.040

看起来 js/Object 捕获了它们（在[https://himera.herokuapp.com](https://himera.herokuapp.com)上测试）：

```
cljs.user> (try (throw (js/Error. "some error")) (catch js/Object e (str "Caught: " e)))
"Caught: Error: some error"
cljs.user> (try (throw "string error") (catch js/Object e (str "Caught: " e)))
"Caught: string error"
cljs.user> (try (js/eval "throw 'js error';") (catch js/Object e (str "Caught: " e)))
"Caught: js error" 
```

需要注意的一件事是惰性序​​列。如果在惰性序列中抛出错误，则在退出 try 函数之前，可能不会执行部分代码。例如：

```
cljs.user> (try (map #(if (zero? %) (throw "some error")) [1]))
(nil)
cljs.user> (try (map #(if (zero? %) (throw "some error")) [0]))
; script fails with "Uncaught some error" 
```

在最后一种情况下，map 创建了一个惰性序列，try 函数将其返回。然后，当 repl 尝试将序列打印到控制台时，它会被评估并且错误会被抛出 try 表达式之外。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-11T15:24:21.427

我想我刚刚在此链接 [https://groups.google.com/forum/#!topic/clojure/QHaTwjD4zzU中找到了解决方案](https://groups.google.com/forum/#!topic/clojure/QHaTwjD4zzU)

我在此处复制内容：此解决方案由 Herwig Hochleitner 发布

> clojurescript 中的 try 实际上是一个使用内置 try* 并添加类型调度的宏。因此，要捕获所有内容，只需使用 (try* ... (catch e ...))。这直接映射到 javascript 的尝试。

这是我现在工作的实现：

```
(defn is-dir? [the_dir]
  (try*
    (if-let [stat (.statSync fs the_dir )]
      (.isDirectory stat)
      false)
    (catch  e 
      (println "catching all exceptions, include js/exeptions")
      false
      )
    )
  ) 
```

希望对你
有所帮助

# git - git中的master分支有什么用？

> ID：12655504
> 
> 赞同：0
> 
> 时间：2012-09-29T18:51:22.550
> 
> 标签：git

假设我有两个并行开发的库版本：

*   1.0
*   2.0

我最终有3个分支：

*   1.0
*   2.0
*   掌握

我的分支错了吗？我应该在哪里提交 1.0 和 2.0 的新功能？现在，我在其各自的分支中提交每个功能。并且 1.0 的错误修正在 1.0 分支中提交，然后合并到 2.0 分支。

应该包含`master`什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T10:13:49.217

鉴于所有答案都没有引用任何来源并且都自相矛盾，我决定遵循[Doctrine 的工作流程](http://www.doctrine-project.org/contribute.html)（鉴于我也在开发一个 PHP 库并且 Doctrine 是一个“现代”/最近的项目）。

> 学说存储库包含以下主要分支：
> 
> *   **学说/主**开发到下一个版本。
> *   **教义/发布-***现有版本的维护分支。这些分支并行存在，定义如下：
> 
> 教义/master 是 HEAD 源代码始终反映最新版本的分支。每个发布的稳定版本都将是一个在学说/release-* 分支中的标记提交。每个发布的不稳定版本都将是在学说/主分支中的一个标记提交。

简而言之，它与 SVN 工作流程非常相似：

*   **master**将包含当前开发的版本，对我来说是 2.0。师父不稳！
*   **1.0**将包含稳定版本，一旦版本稳定发布，就会从 master 分支。

我只是不知道如果我有一个与 1.0 和 2.0 并行开发的**3.0版本（未来的实验版本）我会做什么。**我想我将创建一个 3.0 分支并将 2.0 留在主服务器上（假设 2.0 是“下一个”版本）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T19:14:26.957

这里没有正确的方法或错误的方法。对于某些项目，将 master 视为“不稳定”分支可能很有用，因此您的大部分开发工作都集中在此处。（通常在他们自己的分支中处理新特性并将它们合并到主控是值得的）。现在，使用您的版本分支，您可以轻松地合并或挑选来自 master 的更改。根据项目的工作方式，您可能需要一个策略，说明版本分支应始终处于良好状态，并且任何提交都应增加版本号。

拥有一个不动的 master 分支非常方便，因为您可以设置*一次*该分支并期望 git pull 始终为您提供项目的最新代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T19:15:16.787

`master`在所有“出血边缘”代码所属的分支的约定名称中。如果您对代码的特定版本进行了分支，那没关系 - 提交对它们的修复，但在 master 中改进您的代码，然后使用您的版本名称从 master 创建分支。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-29T19:15:53.280

git 主分支是由 git 默认创建的。它应该包括您的软件产品的最新**稳定**版本，或者换句话说，您希望用户默认下载的分支。您应该将实验性功能提交到 v1 和 v2 分支。

# javascript - 简单的 jQuery $.get 示例代码不起作用

> ID：12655507
> 
> 赞同：1
> 
> 时间：2012-09-29T18:51:33.370
> 
> 标签：javascript, jquery

我正在尝试获取网页的输出，我发现 jQuery 有一种方法可以通过[$.get 方法](http://api.jquery.com/jQuery.get/)执行此操作。

从上面的链接中，我找到了以下示例代码：

```
$.get('ajax/test.html', function(data) {
  $('.result').html(data);
  alert('Load was performed.');
}); 
```

我将示例代码修改为以下内容：

```
$.get('http://www.google.com', function(data) {
  $('.result').html(data);
  alert('Load was performed.');
}); 
```

但它不起作用。在这里看到它：http: [//jsfiddle.net/6WQqD/1/](http://jsfiddle.net/6WQqD/1/)

我究竟做错了什么？如何发出一个简单的 HTTP 请求来输出页面的内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T18:53:40.433

[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)：

> 在计算中，同源策略是许多浏览器端编程语言（例如 JavaScript）的重要安全概念。该策略允许在源自同一站点的页面上运行的脚本无特定限制地访问彼此的方法和属性，但禁止跨不同站点的页面访问大多数方法和属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:47:09.550

对于跨域请求，您可以使用以下方法之一：

**1** JSONP 要求服务器部分支持jsonp（包含跨域请求的具体代码）。对于 GET 请求，请尝试在 ajax 设置中使用 dataType = jsonp：

```
$.ajax({
 url: "other-domain-url",
 type: 'GET',
 crossDomain: true,
 dataType: 'jsonp',
 jsonpCallback:'callback',
 cache: false
}); 
```

您应该指定在检索到响应后要执行的回调函数。响应将作为参数传递。

**2**在您网站的服务器部分使用透明代理。配置代理（例如 nginx）以将必要的本地请求重定向到其他域。所以在js中你将使用本地ajax：

```
$.ajax({
     url: "/local",
     type: 'GET'
} 
```

在配置中你应该使用代理设置：

```
location /local {       
            proxy_pass http://other-domain-url
        } 
```

# java - newSingleThreadscheduledExecutor

> ID：12655512
> 
> 赞同：0
> 
> 时间：2012-09-29T18:52:05.950
> 
> 标签：java, multithreading, concurrency

我有问题。我有一些看起来像这样的代码：

```
executor = Executors.newSingleThreadScheduledExecutor(new NamedThreadFactory("Exec"));
[...]
executor.scheduleAtFixedRate(new Runnable() {

@Override
public void run() {
// my task
...
}, 1, 1, TimeUnit.MINUTES); 
```

每隔一段时间，上述任务就会遇到问题并崩溃。newSingleThreadScheduledExecutor 有一个有趣的属性：它会默默地死掉，不会再次执行任务。

我需要修改这种行为。换句话说，即使 run() 遇到 RuntimeException，我也希望任务以固定速率继续执行。

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T19:02:35.097

> 我需要修改这种行为。换句话说，即使 run() 遇到 RuntimeException，我也希望任务以固定速率继续执行。

最*简单*的方法是创建一个包装器`Runnable`：

```
public final class ExceptionSwallowingRunnable implements Runnable {
    private final Runnable delegate;

    public ExceptionSwallowingRunnable(Runnable delegate) {
        // TODO: Argument validation
        this.delegate = delegate;
    }

    @Override public void run() {
        try {
            delegate.run();
        } catch (RuntimeException e) {
            // Logging etc
        }
    }
} 
```

然后只需在预定的执行程序中运行*它*，包装您的实际任务。请注意`Throwable`，如果您*真的*想捕获所有内容，则可能会捕获 - 不过我不建议这样做。

可能有另一种方法，但这是我能想到的最简单的方法，无需进一步研究:)

# html - 在选择中垂直居中文本

> ID：12655514
> 
> 赞同：2
> 
> 时间：2012-09-29T18:52:17.487
> 
> 标签：html, css

# 图片

![](../Images/8b8eaab5bf44a1feb52b9814556c69cf.png)

# 问题

有什么办法可以将“温哥华，不列颠哥伦比亚省”文本向下移动一点，以便与“城市”和“改变”更好地对齐？

我知道输入元素在浏览器中的样式很挑剔。它不一定是完美的，但如果它至少可以在某些浏览器中工作，那就太好了。

# [小提琴](http://jsfiddle.net/mnbayazit/Zz8ph/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T20:14:33.010

由于以下几个原因，通常不建议自定义浏览器对某些表单元素的默认呈现——尤其是下拉选择列表：

*   您的自定义选项自然是有限的
*   让表单元素看起来像你想要的样子是非常困难的——正如你所指出的，它们很挑剔
*   即使您可以在一个浏览器中获得您想要的输入方式，也几乎不可能跨浏览器进行（我意识到您说这不是问题，但仍然值得了解）
*   从可用性的角度来看，自定义表单元素的默认呈现几乎总是会在一定程度上降低表单的可用性

现在，说了这么多，如果您想更好地控制表单元素的视觉样式，我建议您使用 jQuery 插件。通常，这些工作通过隐藏表单元素并用易于定制的 CSS 替换它们 - 通常是常规的 ol' 无序列表 - 然后将用户与无序列表的交互发送到隐藏的表单。[这是您可以查看以开始使用的一个。](http://jamielottering.github.com/DropKick/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T18:26:12.513

我会调整字体大小或高度来解决对齐问题：

```
#city_picker {
    height: 26px;
    font: 19px Arial,Helvetica,sans-serif;
} 
```

这将使文本与选择框的大小大致相同，并强制它显示为对齐。否则，跨浏览器调整选项元素的样式似乎相当困难。

# javascript - Javascript 的 JSON.parse 的错误？

> ID：12655517
> 
> 赞同：5
> 
> 时间：2012-09-29T18:52:29.867
> 
> 标签：javascript, json

```
console.log(JSON.parse('{"data":"{\"json\":\"rocks\"}"}')); 
```

给出错误（在 Firefox 和 Chrome 的控制台上测试）。这是 JSON.parse 的错误吗？使用 PHP 测试时，相同的解码效果很好。

```
print_r(json_decode('{"data":"{\"json\":\"rocks\"}"}', true)); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-29T19:08:10.540

这个字符串在 PHP 和 JS 中的处理方式不同，即你得到不同的结果。

PHP 中单引号字符串中唯一的转义序列是`\\`和`\'`。根据[文档](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.single)，所有其他内容都按字面意思输出：

> 要指定文字单引号，请使用反斜杠 ( `\`) 对其进行转义。要指定文字反斜杠，请将其加倍 ( `\\`)。所有其他反斜杠实例将被视为文字反斜杠：这意味着您可能习惯的其他转义序列，例如`\r`or `\n`，将按指定的字面输出而不是具有任何特殊含义。

另一方面，在 JS 中，如果字符串包含无效的转义序列，[则反斜杠将被丢弃](http://es5.github.com/#x7.8.4)（`CV`表示字符值）：

> *   *CharacterEscapeSequence :: NonEscapeCharacter*的CV是*NonEscapeCharacter*的 CV 。
> *   *NonEscapeCharacter :: SourceCharacter*但不是*EscapeCharacter*或*LineTerminator*的 CV是*SourceCharacter*字符本身。

*引用本身可能没有帮助，但如果您点击链接并查看语法，它应该会变得清晰。*

* * *

因此，在 PHP 中，字符串实际上会包含`\"`，而在 JS 中，它只会包含`"`，这使得 JSON 无效：

```
{"data":"{"json":"rocks"}"} 
```

如果要在 JS 中创建文字反斜杠，则必须对其进行转义：

```
'{"data":"{\\"json\\":\\"rocks\\"}"}' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T18:56:04.183

要在字符串文字中有文字反斜杠，您需要`\\`.

```
console.log(JSON.parse('{"data":"{\\"json\\":\\"rocks\\"}"}')); 
```

这将成功地转义 JSON 处理的内部引号。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-29T18:56:13.253

您需要转义反斜杠：

```
console.log(JSON.parse('{"data":"{\\"json\\":\\"rocks\\"}"}'));​ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-22T14:40:29.687

带有一个或多个**'\' 的对象不会通过****JSON.parser**返回 Object ，它将再次返回字符串并跳过一个**'\'**。您可以一次又一次地进行解析，直到跳过所有**“\” 。**

myobj = {\"json\":\"rocks\"}

myobj = {\\"json\\":\\"rocks\\"}

以下几行对我有用

删除反斜杠

```
while(typeof myobj == 'string'){
       myobj = JSON.parse(myobj)
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-29T19:33:20.993

您实际上并不需要在单引号内转义双引号，并且您在内部对象周围的输入中有两个额外的引号，只是

```
console.log(JSON.parse('{"data":{"json":"rocks"}}')); 
```

足够。

# python - numpy.amax 中的一个键

> ID：12655525
> 
> 赞同：2
> 
> 时间：2012-09-29T18:53:49.240
> 
> 标签：python, numpy, max

在 Python 的标准[`max`](http://docs.python.org/library/functions.html#max)函数中，我可以传入一个`key`参数：

```
s = numpy.array(['one','two','three'])
max(s) # 'two' (lexicographically last)
max(s, key=len) # 'three' (longest string) 
```

对于更大的（多维）数组，我们不能再使用`max`，但我们可以使用[`numpy.amax`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.amax.html)... 不幸的是，**它没有提供`key`参数**。

```
t = numpy.array([['one','two','three'],
                 ['four','five','six']], 
                dtype='object')
numpy.amax(t) # 'two` (max of the flat array)
numpy.amax(t, axis=1) # array([two, six], dtype=object) (max of first row, followed by max of second row) 
```

我想要做的是：

```
amax2(t, key=len) # 'three'
amax2(t, key=len, axis=1) # array([three, four], dtype=object) 
```

有没有内置的方法可以做到这一点？

*注意：在第一次尝试写这个问题时，我无法[`amax`在这个玩具示例中工作](https://stackoverflow.com/questions/12654093/arrays-of-strings-into-numpy-amax)！*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:53:49.240

这是一种非内置方式（它缺少使用时的[功能](http://docs.scipy.org/doc/numpy/reference/generated/numpy.amax.html#numpy.amax)`out`和`keepdim`参数），看起来相当长：[`amax`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.amax.html#numpy.amax)`key`

```
def amax2(x, *args, **kwargs):
    if 'key' not in kwargs:
        return numpy.amax(x,*args,**kwargs)
    else:
        key = kwargs.pop('key') # e.g. len, pop so no TypeError: unexpected keyword
        x_key = numpy.vectorize(key)(x) # apply key to x element-wise
        axis = kwargs.get('axis') # either None or axis is set in kwargs
        if len(args)>=2: # axis is set in args
            axis = args[1]

        # The following is kept verbose, but could be made more efficient/shorter    
        if axis is None: # max of flattened
            max_flat_index = numpy.argmax(x_key, axis=axis)
            max_tuple_index = numpy.unravel_index(max_flat_index, x.shape)
            return x[max_tuple_index]
        elif axis == 0: # max in each column
            max_indices = numpy.argmax(x_key, axis=axis)
            return numpy.array(
                 [ x[max_i, i] # reorder for col
                     for i, max_i in enumerate(max_indices) ], 
                 dtype=x.dtype)
        elif axis == 1: # max in each row
            max_indices = numpy.argmax(x_key, axis=axis)
            return numpy.array(
                 [ x[i, max_i]
                     for i, max_i in enumerate(max_indices) ],
                 dtype=x.dtype) 
```

*[此功能的想法是从@PeterSobot](https://stackoverflow.com/a/12654144/1240268)对我之前的问题的回答的第二部分扩展而来的。*

# mysql - 仅列出在 mysql 中出现三次的行

> ID：12655529
> 
> 赞同：0
> 
> 时间：2012-09-29T18:54:11.650
> 
> 标签：mysql, join

我有表称为：`activities`和`deficiencies`.

`activities`表包含学生注册的所有活动。`deficiencies`表包含学生可能因注册活动而出现的所有缺陷。

以下是带有示例数据的表结构：

# 活动表

```
activityid  title
-------------------------------------------------------------
1           Student Retreat
2           Student Orientation 
```

# 缺陷表

```
deficiencyid    activity_id     deficiency      status
-------------------------------------------------------------
1               1               NARRATION       CLEARED
2               1               PHOTO           CLEARED
3               1               REPORT          CLEARED
4               2               NARRATION       WAITING
5               2               PHOTO           CLEARED
6               2               REPORT          WAITING 
```

对于每个活动条目，表中将有三行`deficiencies`。**如果列出的项目的所有状态都已经存在，我希望能够列出每个活动一次`CLEARED`**。因此，如果一个或多个仍然存在`WAITING`- 它们不会在查询中列出。

我试图使用这个查询来做到这一点，但我没有得到任何幸运：

```
SELECT * FROM deficiencies,activities WHERE status='CLEARED' AND activityid=activity_id AND COUNT(deficiencyid)=3 GROUP BY activity_id ORDER BY deficiencyid ASC 
```

我从 MySQL 得到以下信息：

```
Invalid use of group function 
```

我期待的输出是表中的第一条记录`activities`。

`SELECT`在`SELECT`另一个`SELECT`子查询中只使用一个查询而不使用多个查询的最佳解决方案是什么？表中将有数千条记录，因此我希望可以使用最有效的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:00:37.850

如果您想通过 JOIN 执行此操作：

```
 SELECT A.activityid, A.title FROM activities A INNER JOIN deficiencies D 
    ON A.activityid = D.activityid WHERE D.status = 'CLEARED'
    GROUP BY A.activityID, A.title HAVING COUNT(*) = 3 
```

这将加入活动和缺陷表，过滤除 CLEARED 以外的记录，按活动分组，并过滤​​掉其中不包含恰好三个记录的组。

它要求保证数据如您所描述的那样（总是三个缺陷记录）。我编写 GROUP BY 是为了避免使用 MySQL 扩展来允许选择非分组、非聚合列。另外，我假设还有一个 studentid 字段，您为了清楚起见而忽略了它，否则整个系统将只支持一个学生。

# jsf - ui:define with render="false" 属性仍在渲染

> ID：12655530
> 
> 赞同：8
> 
> 时间：2012-09-29T18:54:34.007
> 
> 标签：jsf, facelets

```
<ui:define name="description" rendered="false">
    <meta name="description" content="do not render" />
</ui:define> 
```

我在我的 xhtml 页面中使用此代码，当我运行应用程序时，元描述仍在呈现。我想根据某些条件使用元描述标签。主布局：

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html">
    <h:head>
        <ui:insert name="description" />
    </h:head>
    ...........
</html> 
```

网页：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"                    
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/templates/masterLayout.xhtml">

    <ui:define name="description" rendered="false">
        <meta name="description" content="do not render" />
    </ui:define>
...........
</ui:composition> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-29T21:52:34.800

这[`<ui:define>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/ui/define.html)是一个在视图构建期间运行的标记处理程序，而不是`UIComponent`在视图渲染期间运行的。因此它不[支持](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/ui/define.html)该`rendered`属性。任何不受支持的属性都会被忽略。

改为使用[`<ui:fragment>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/ui/fragment.html)。

```
<ui:define name="description">
    <ui:fragment rendered="false">
        <meta name="description" content="do not render" />
    </ui:fragment>
</ui:define> 
```

# file-upload - 如何限制允许上传的文件数量

> ID：12655532
> 
> 赞同：3
> 
> 时间：2012-09-29T18:55:00.460
> 
> 标签：file-upload, jsf-2, primefaces

如何在 JSF 2 + primefaces 应用程序中限制允许上传的文件数量。primeface 3.3 中有属性“filelimit”，但我使用的是 primefaces 3.4

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-30T06:20:50.360

看起来 fileLimit 选项已在 Issue [3618中删除](https://code.google.com/p/primefaces/issues/detail?id=3618)

正如评论中提到的，在支持 bean 中使用一个计数器，或者丢弃额外的文件，或者添加一个 FacesMessage 来通知用户已达到最大 fileLimit。

代码示例：

```
@ManagedBean
@ViewScoped
public class FileUploadController {

    private final static int MAX_NUM_FILES = 3;
    private List<UploadedFile> uploadedFiles;
    private int counter = 0;

    @PostConstruct
    public void init() {
        uploadedFiles = new ArrayList<UploadedFile>();
    }

    public void handleFileUpload(FileUploadEvent event) {
        if (counter < MAX_NUM_FILES) {
            uploadedFiles.add(event.getFile());
            FacesMessage msg = new FacesMessage("Succesful", event.getFile().getFileName() + " is uploaded.");
            FacesContext.getCurrentInstance().addMessage(null, msg);
            counter ++;       
        }
        else {
            FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_ERROR, "File Upload Limit Reached ", event.getFile().getFileName() + " is not uploaded.");
            FacesContext.getCurrentInstance().addMessage(null, msg);
        }

    }
} 
```

# java - 如何按顺序获取一年中的月份

> ID：12655533
> 
> 赞同：1
> 
> 时间：2012-09-29T18:55:03.420
> 
> 标签：java

我是 Java 新手。我有这段代码，用于获取当前的一周中的哪一天。

```
GregorianCalendar calendar = new GregorianCalendar();
DateFormat df = new SimpleDateFormat("EEEE");
for (int i = 0; i < 7; i++) {
    calendar.add(Calendar.DATE, 1);
    System.out.println(df.format(calendar.getTime()));
} 
```

我想编辑代码以相同的方式获取一年中的月份 - 从当前月份开始。你能帮我编辑代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T18:59:15.690

好吧，您*可以*将一个月中的日期设置为 1（只是为了保持理智），然后在每个步骤中添加一个月而不是一天。或者，您可以只使用：

```
DateFormatSymbols symbols = new DateFormatSymbols(locale);
String[] months = symbols.getMonths(); 
```

...然后从那里去。

您也可以`getWeekdays`以同样的方式使用日期名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T19:01:57.467

您可以使用`Calendar.MONTH`. 只需对您的代码进行最少的更改，它将如下所示：

```
GregorianCalendar calendar = new GregorianCalendar();
DateFormat df = new SimpleDateFormat("MMMM");
for (int i = 0; i < 12; i++) {
    calendar.add(Calendar.MONTH, 1);
    System.out.println(df.format(calendar.getTime()));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T19:02:31.133

在 JodaTime 中，您可以执行 new DateTime() 然后执行 plusMonths(1) 以添加一个月。这将返回一个月的日期。然后，您可以解析它以获取月份。然后重复 11 次以获得剩余的月份。

此链接将有助于获取月份名称[http://joda-time.sourceforge.net/key_instant.html](http://joda-time.sourceforge.net/key_instant.html)

# lisp - Lisp 函数：计算表达式中的原子数

> ID：12655534
> 
> 赞同：0
> 
> 时间：2012-09-29T18:55:10.480
> 
> 标签：lisp

我正在用 lisp 编写一个函数，但没有得到结果。函数是计算表达式中的原子数。

```
(defun count-atoms(exp)
'Return the total number of non-nil atoms in the expression'
(cond((null exp) 0)
     ((atom exp) 1)
     ( t (+ (count-atoms (first exp))
            (count-atoms (rest exp)))))) 
```

当我在 clisp 中运行时，我得到的只是以下没有结果。

```
[3]> (count-atoms '(a b c))
(COND ((NULL EXP) 0) ((ATOM EXP) 1)
(T (+ (COUNT-ATOMS (FIRST EXP)) (COUNT-ATOMS (REST EXP))))) 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T18:58:34.920

我很惊讶你得到了一个结果。我收到一个错误：

```
*** - PROGN: variable THE has no value
The following restarts are available:
USE-VALUE      :R1      Input a value to be used instead of THE.
STORE-VALUE    :R2      Input a new value for THE.
ABORT          :R3      Abort main loop 
```

原因是 Common Lisp 中的字符串必须用双引号括起来：`"Return ..."`. 单引号仅用于防止评估。

# python - 如何设置 QWidget 背景颜色？

> ID：12655538
> 
> 赞同：24
> 
> 时间：2012-09-29T18:55:31.743
> 
> 标签：python, pyqt, pyside

下面代码中的行`w.setBackgroundRole(QPalette.Base)`没有任何作用。为什么？我该如何解决？

```
import sys
from PySide.QtCore import *
from PySide.QtGui import *

app = QApplication(sys.argv)
w = QWidget()
w.setBackgroundRole(QPalette.Base)
w.show()
app.exec_() 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-09-29T19:01:30.610

您需要调用`setAutoFillBackground(True)`小部件。默认情况下， a`QWidget`不会填充其背景。

有关详细信息，请参阅该[`setAutoFillBackground`](http://qt-project.org/doc/qt-4.8/qwidget.html#autoFillBackground-prop)属性的文档。

如果要使用任意背景颜色，则需要修改小部件的调色板：

```
p = w.palette()
p.setColor(w.backgroundRole(), Qt.red)
w.setPalette(p) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-28T16:41:51.077

您还可以使用`setStyleSheet`例如：

```
w.setAttribute(Qt.Qt.WA_StyledBackground, True)
w.setStyleSheet('background-color: red;') 
```

# objective-c - 如何在没有 IB 的情况下添加调整大小

> ID：12655539
> 
> 赞同：0
> 
> 时间：2012-09-29T18:55:33.267
> 
> 标签：objective-c, ios, xcode, resize, iphone-5

自从开始 iPhone 应用程序开发（过去 9 个月）以来，我只使用过 IB。我有一个项目已经由另一个开发人员构建，我需要针对 iPhone 屏幕进行优化。在 IB 中没问题，我知道该怎么做，但是在这个项目中，导航栏是仅使用代码添加的，并且是一个图像视图。有人可以告诉我在不使用 IB 时如何调整导航栏的大小/定位吗？我试图为 iphone 5 屏幕增强这个应用程序。

```
#define BAR_FRAME CGRectMake(0,0,320.0f,43.0f)

 @implementation ICNavbarView
 @synthesize homeButton=__homeButton;
  @synthesize prevButton=__prevButton;
 @synthesize nextButton=__nextButton;
 @synthesize delegate=__delegate;

- (id)initWithFrame:(CGRect)frame
 {
LogCmd();
self = [super initWithFrame:BAR_FRAME];
if (self) {
    self.backgroundColor = [UIColor clearColor];
    self.alpha = 0.9f;

    // Add Navigation bar background       // <<<<<< navigation bar from ui image
    UIImageView *bgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"BgNavBarNew"]];
    [self addSubview:bgView];

    // Add back button
    __prevButton = [UIButton buttonWithType:UIButtonTypeCustom];
    __prevButton.frame = CGRectMake(30.0f, 6.0f, 29.0f, 31.0f);
    UIImage *prevButtonPressed = [UIImage imageNamed:@"BtnPrevPressed"];
    [__prevButton setImage:[UIImage imageNamed:@"BtnPrev"] forState:UIControlStateNormal];
    [__prevButton setImage:prevButtonPressed forState:UIControlStateSelected];
    [__prevButton setImage:prevButtonPressed forState:UIControlStateHighlighted];
    [__prevButton addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
    [self addSubview:__prevButton];

    // Add next button
    __nextButton = [UIButton buttonWithType:UIButtonTypeCustom];
    __nextButton.frame = CGRectMake(262.0f, 6.0f, 29.0f, 31.0f);
    UIImage *nextButtonPressed = [UIImage imageNamed:@"BtnNextPressed"];
    [__nextButton setImage:[UIImage imageNamed:@"BtnNext"] forState:UIControlStateNormal];
    [__nextButton setImage:nextButtonPressed forState:UIControlStateSelected];
    [__nextButton setImage:nextButtonPressed forState:UIControlStateHighlighted];
    [__nextButton addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
    [self addSubview:__nextButton];

    // Add home button
    __homeButton = [UIButton buttonWithType:UIButtonTypeCustom];
    __homeButton.frame = CGRectMake(145.0f, 6.0f, 31.0f, 30.0f);
    UIImage *homeButtonPressed = [UIImage imageNamed:@"BtnHomePressed"];
    [__homeButton setImage:[UIImage imageNamed:@"BtnHome"] forState:UIControlStateNormal];
    [__homeButton setImage:homeButtonPressed forState:UIControlStateSelected];
    [__homeButton setImage:homeButtonPressed forState:UIControlStateHighlighted];
    [__homeButton addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
    [self addSubview:__homeButton];
}
return self;
}

 - (id)init
{
return [self initWithFrame:CGRectZero];
 }

 #pragma mark - Button handlers

- (void)buttonPressed:(id)sender
{
if (sender == __prevButton) {
    [self.delegate performSelector:@selector(navBarPrevButtonPressed)];
} else if (sender == __homeButton) {
    [self.delegate performSelector:@selector(navBarHomeButtonPressed)];
} else {
    [self.delegate performSelector:@selector(navBarNextButtonPressed)];
}
}

@end 
```

到目前为止，我尝试过 `UIViewAutoresizingFlexibleHeight;`这样

```
 // Add Navigation bar background
    UIImageView *bgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"BgNavBarNew"]];
    [self addSubview:bgView];

    //resize

    bgView.autoresizingMask =  UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth; 
```

这似乎没有什么区别，导航栏没有移动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:01:51.030

我以前用过这个，但是我使用了 setter 函数而不是使用属性。我不知道这是否会改变任何东西，但试试这种方式：

```
 [bgView setAutoresizingMask:(UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth)]; 
```

如果您有多个调整大小的选项，则括号很重要。

# emacs - 切换到另一个缓冲区时突出显示

> ID：12655540
> 
> 赞同：1
> 
> 时间：2012-09-29T18:55:36.310
> 
> 标签：emacs

切换到另一个buffer的时候有问题，因为我有一个27英寸的imac，一个窗口里面有这么多的buffer，当我切换到另一个窗口时，我总是迷路，不知道我现在是哪个窗口，有什么方法可以突出显示当前窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T19:15:04.323

您可以自定义模式行，例如：

```
(set-face-attribute  'mode-line          nil  :foreground "black"  :background "ivory"  :box '(:line-width 1 :style released-button))
(set-face-attribute  'mode-line-inactive nil  :foreground "gray30" :background "black"  :box '(:line-width 1 :style released-button)) 
```

您可以在下图中看到结果。活动模式线是白色的（更准确地说是象牙色）。非活动模式线为黑色。

![定制模式线](../Images/ada377fbd20362416c3d41a09ffb5e8d.png)

# python - 如何更改使用 smtplib 发送的邮件的发件人行？

> ID：12655547
> 
> 赞同：0
> 
> 时间：2012-09-29T18:56:35.780
> 
> 标签：python, smtplib

> **可能重复：**
> [使用 Python (smtplib) 发送邮件时指定发件人](https://stackoverflow.com/questions/540976/specify-a-sender-when-sending-mail-with-python-smtplib)

我正在使用 smtplib 在 python 中发送邮件。当我查看已发送的邮件时，发件人行只显示“联系人”，因为我有 FROM =“contact@foo.com”。但是，我希望 from 行改为阅读“foo”（但仍有电子邮件收件人回复 contact@foo.com）。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T19:06:00.680

试试这个：

```
FROM = "Foo <contact@foo.com>" 
```

# sql - 创建 Oracle SQL 异常报告？

> ID：12655554
> 
> 赞同：0
> 
> 时间：2012-09-29T18:57:20.243
> 
> 标签：sql, oracle10g

我正在尝试完成 SQL 家庭作业，而我的教科书（或谷歌，就此而言）运气不佳，可能是因为我没有完全正确地搜索。我们在课堂上使用“Oracle SQL by Example”，在数据库中使用 Oracle 10g。讲师在课堂上提供了零个例子来说明它是如何完成的。

讲师提供了一个小型数据库（5 个表）供我们查询该作业，我们被告知开始使用适当的 T-Title/标题列创建异常报告。我们应该检查外键完整性并报告不同表的错误，并最终更新表以调整订单总数并生成错误报告。

我遇到的大多数示例都是用于创建表的。既然表已经建好了，还能用吗？

万分感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T23:55:47.637

显然，我想了整件事。异常报告是您创建查询的地方，并仔细检查外键完整性（或 PK 完整性）以防止出现孤儿，并生成显示所有不匹配错误的查询结果。您创建一个有意义的伪列来描述结果实际显示的内容。然后，您可以通过在需要时发出更新命令来修复错误。

```
SELECT order_num, 'Invalid Order Nums' "Order Numbers"
FROM order_table
where order_num NOT IN
--(or NOT EXISTS IN)
(select order_num
from order)
ORDER_NUM Order Numbers    
--------- ------------------
21615     Invalid Order Nums 
```

# android - 在 relativeLayout 中刷新视图

> ID：12655557
> 
> 赞同：1
> 
> 时间：2012-09-29T18:58:24.677
> 
> 标签：android, view, android-relativelayout

这是我的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="1280dp"
    android:layout_height="800dp">

    <al.android.emcr.MainDisplay
        android:layout_width="1280dp"
        android:layout_height="800dp"/>
    <al.android.emcr.menu.MenuDisplay
        android:layout_width="1280dp"
        android:layout_height="114dp"/>

    <al.android.emcr.popups.ConfigurePopup.ConfigurePopup
        android:layout_width="1280dp"
        android:layout_height="800dp" />

</RelativeLayout>` 
```

当我用 () 刷新我的“MainDisplay”视图时`invalidate`，没有问题。但是，当我尝试使用相同的方法使用 MenuDisplay 时，视图不会刷新。我究竟做错了什么 ？

**注意：**两个视图都实现了“onDraw(Canvas)”方法。

**Note2：**我在主线程中调用了 invalidate() 方法。我想知道一个视图覆盖另一个视图的事实是否对视图刷新有任何错误影响。

**注意3：** ( `onTouch`) 事件在两个视图上都可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T07:55:48.987

好的，我解决了我的问题：在 MenuDisplay 类中，我有两个构造函数：

`public MenuDisplay(Context c, AttributeSet attrs) { super (c,attrs); init(c); }`

它`public MenuDisplay(Context c) { super(c); init(c); }`

导致我的问题是我在两种方法中都调用了 init(c) 。我认为，最好的解决方案是在本机 View 方法中调用 init 方法：onFinishInflate() 最终带有一个静态计数器，仅在最后一次充气发生时调用 init（如果它们对于同一个视图有很多充气）！

# windows - 批处理函数的参数中带有特殊字符的奇怪行为？

> ID：12655558
> 
> 赞同：7
> 
> 时间：2012-09-29T18:58:30.393
> 
> 标签：windows, batch-file, cmd

假设你跑`test.bat "blabla,blabla,^>blabla", "blaby"`

test.bat 实现：

```
@SETLOCAL
@ECHO OFF
SET list=%~1
ECHO "LIST: %list%"
ECHO "ARG 1: %~1"
ECHO "ARG 2: %~2"
@ENDLOCAL   
@GOTO :EOF 
```

输出如预期：

```
"LIST: blabla,blabla,>blabla"
"ARG 1: blabla,blabla,^>blabla"
"ARG 2: blaby" 
```

但是如果你让 test.bat 在批处理文件中成为一个函数怎么办：

```
@SETLOCAL
CALL :TEST "blabla,blabla,^>blabla", "blaby"
@ENDLOCAL
@GOTO :EOF

:TEST
@SETLOCAL
@ECHO OFF
SET list=%~1
ECHO "LIST: %list%"
ECHO "ARG 1: %~1"
ECHO "ARG 2: %~2"
@ENDLOCAL   
@GOTO :EOF 
```

运行后输出为：

```
"LIST: blabla,blabla,^"
"ARG 1: blabla,blabla,^^>blabla"
"ARG 2: blaby" 
```

嗯？

1.  `blabla`LIST 去了哪里？
2.  ARG 1 有`^^`? 为什么？

有人可以解释特殊字符在函数参数中的行为与命令行参数的不同吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-29T21:50:36.737

只需使用以下命令，您就可以使用第一个批处理脚本获得相同的结果：

```
call test.bat "blabla,blabla,^>blabla", "blaby" 
```

您的问题源于批处理如何解析 CALL 语句的一个不幸方面。它在[Windows 命令解释器 (CMD.EXE) 如何解析脚本的第 6 阶段中进行了描述？](https://stackoverflow.com/a/4095133/1012053).

*哎呀-我以为我以前理解插入符号加倍，但显然不是。为了回应 jeb 的评论，我对以下讨论进行了大量编辑。*

CMD.EXE 的设计者想要一个语句，就像`call echo ^^`给出与`echo ^^`. 这两个语句都归结`^^`为`^`处理特殊字符的阶段 2。但是 CALL 语句必须第二次经过阶段 1 和阶段 2。所以在幕后，当 CMD.EXE 在阶段 6 识别 CALL 语句时，它将剩余的插入符号加倍返回到`^^`，然后阶段 2 的第二轮将其减少回`^`. 这两个语句都会在屏幕上回显一个插入符号。

不幸的是 CMD.EXE 盲目地将所有插入符号加倍，即使它们被引用。但是引用的插入符号不被视为转义，它是文字。插入符号不再被消耗。非常不幸。

运行`call test.bat "blabla,blabla,^>blabla", "blaby"`进入`call test.bat "blabla,blabla,^^>blabla" "blaby"`解析器的第 6 阶段。

这很容易解释为什么 ARG 1 在您的输出中看起来如此。

至于`blabla`去哪里？，这有点棘手。

当您的脚本执行`SET list=%~1`时，引号被删除，`^^`被视为转义的插入符号，减少为`^`，并且`>`不再被转义。因此，您的 SET 语句的输出被重定向到“blabla”文件。当然 SET 没有输出，所以你的硬盘上应该有一个零长度的“blabla”文件。

**编辑 - 如何使用“后期扩展”正确传递所需的参数**

在他的回答中，davor 试图扭转插入符在被调用例程中加倍的效果。但这并不可靠，因为您无法确定插入符号可能被加倍了多少次。最好让呼叫者调整呼叫以进行补偿。这很棘手 - 你必须使用 jeb 所谓的“后期扩展”

在批处理脚本中，您可以定义一个包含所需参数字符串的变量，然后延迟扩展，直到插入符号加倍后，通过用另一个 % 转义 %。您需要将语句中每个 CALL 的百分比加倍。

```
@echo off
setlocal
set arg1="blabla,blabla,^>blabla"
call :TEST %%arg1%% "blaby"
echo(
call call :TEST %%%%arg1%%%% "blaby"
::unquoted test
exit /b

:TEST
setlocal
set list=%~1
echo "LIST: %list%"
echo "ARG 1: %~1"
echo "ARG 2: %~2"
exit /b 
```

以上产生了预期的结果：

```
"LIST: blabla,blabla,>blabla"
"ARG 1: blabla,blabla,^>blabla"
"ARG 2: blaby"

"LIST: blabla,blabla,>blabla"
"ARG 1: blabla,blabla,^>blabla"
"ARG 2: blaby" 
```

从命令行运行时扩展规则不同。从命令行转义 % 是不可能的。相反，您必须在百分比内添加一个插入符号，以防止扩展阶段在第 1 遍识别名称，然后当插入符号在第 2 阶段被剥离时，第 2 遍扩展会正确扩展变量。

以下使用davor的原TEST.BAT

```
C:\test>test.bat "blabla,blabla,^>blabla" "blaby"
"LIST: blabla,blabla,>blabla"
"ARG 1: blabla,blabla,^>blabla"
"ARG 2: blaby"

C:\test>set arg1="blabla,blabla,^>blabla"

C:\test>test.bat %arg1% "blaby"
"LIST: blabla,blabla,>blabla"
"ARG 1: blabla,blabla,^>blabla"
"ARG 2: blaby"

C:\test>call test.bat %^arg1% "blaby"
"LIST: blabla,blabla,>blabla"
"ARG 1: blabla,blabla,^>blabla"
"ARG 2: blaby"

C:\test>set arg2=%^arg1%

C:\test>call call test.bat %^arg2% "blaby"
"LIST: blabla,blabla,>blabla"
"ARG 1: blabla,blabla,^>blabla"
"ARG 2: blaby" 
```

**转义的替代方法 - 通过引用传递值！**

总而言之，逃生规则复杂得离谱。这就是为什么高级批处理脚本通常通过引用而不是文字来传递字符串值。所需的字符串被放置在一个变量中，然后变量的名称作为参数传递。延迟扩展用于获取准确的字符串，而不必担心由于特殊字符或 CALL 插入符号加倍或百分比剥离而导致损坏。

这是一个简单的 test.bat，演示了这个概念

```
@echo off
setlocal enableDelayedExpansion
set "var1=!%~1!"
echo var1=!var1!

call :test var1
exit /b

:test
set "var2=!%~1!"
echo var2=!var2! 
```

这是它如何工作的演示。

```
C:\test>set complicatedString="This & that ^" ^& the other thing ^^ is 100% difficult to escape

C:\test>set complicatedString
complicatedString="This & that ^" & the other thing ^ is 100% difficult to escape

C:\test>test.bat complicatedString
var1="This & that ^" & the other thing ^ is 100% difficult to escape
var2="This & that ^" & the other thing ^ is 100% difficult to escape

C:\test>call test.bat complicatedString
var1="This & that ^" & the other thing ^ is 100% difficult to escape
var2="This & that ^" & the other thing ^ is 100% difficult to escape

C:\test>call call test.bat complicatedString
var1="This & that ^" & the other thing ^ is 100% difficult to escape
var2="This & that ^" & the other thing ^ is 100% difficult to escape 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T14:39:34.463

经过一些测试和 dbenham 的回答后，似乎需要预测双插入符号并将其替换为单插入符号：

```
@SETLOCAL
CALL :TEST "blabla,blabla,^>blabla", "blaby"
@ENDLOCAL
@GOTO :EOF

:TEST
@SETLOCAL
@ECHO OFF
SET "list=%~1" & REM CHANGED
SET "list=%list:^^=^%" & REM ADDED
ECHO "LIST: %list%"
ECHO "ARG 1: %~1"
ECHO "ARG 2: %~2"
@ENDLOCAL   
@GOTO :EOF 
```

那么输出是：

```
"LIST: blabla,blabla,^>blabla"
"ARG 1: blabla,blabla,^^>blabla"
"ARG 2: blaby" 
```

还要注意奇怪的事情：在`SET "list=%list:^^=^%"`between`^^`被`%%`视为两个字符，而不是作为转义的`^`.

# path - Applescript 无法在 Mountain Lion 中工作的路径

> ID：12655560
> 
> 赞同：0
> 
> 时间：2012-09-29T18:58:37.413
> 
> 标签：path, applescript, osx-mountain-lion

此脚本一直在 10.7 及更早版本上运行，但在 10.8 中，它似乎已损坏。该行：

```
set theFilePath to ((path to application support from user domain) as rich text) & "AppFolderName:" & UniqueName as string
set theFileReference to open for access theFilePath with write permission 
```

在以前的版本上运行良好，但 Apple 显然阻止它在 Mountain Lion 上正常运行。有没有其他方法可以通过 Mountain Lion 中的 Apple 脚本访问该文件夹？

**编辑**：我已经包含了脚本的整个代码，它将在邮件规则中将整个消息导出到我的程序可以导入的文本文件中。文本文件被发送到 ~/Library/Application Support/MyProgram/MailImport/

确保该目录已经存在于您的机器上，就像它在我的机器上一样，并且 Apple 脚本不会对其进行任何检查。

此脚本在代码中时不起作用`path to application support`，但将其更改为`path to desktop`正常工作，这意味着写入应用程序支持文件夹时出现问题，但代码有效。

要进行测试，您可以在 Mail 中创建一个新规则，并让 Every Message 运行该脚本。你必须把脚本放在 ~/Library/Application Scripts/com.apple.mail/

然后它将作为一个选项出现在规则窗口中。您可以右键单击消息并选择应用规则以在单个消息上测试脚本。

```
using terms from application "Mail"
    on perform mail action with messages theMessages for rule theRule
        tell application "Mail"
            repeat with eachMessage in theMessages
                set sub to subject of eachMessage
                set mid to message id of eachMessage
                set sen to sender of eachMessage
                set recp to ""
                repeat with thisRecpt in recipients of eachMessage
                    set recp to recp & address of thisRecpt & ","
                end repeat
                set {year:y, month:m, day:d, hours:hh, minutes:mm} to (date sent of eachMessage)
                set dat to (y * 10000 + m * 100 + d) as string
                set tim to (hh * 100 + mm) as string
                set con to content of eachMessage

                set TotalString to "<!STDMessageSubject>" & sub & "<!STDMessageSubject>" & "<!STDMessageID>" & mid & "<!STDMessageID>" & "<!STDMessageSender>" & sen & "<!STDMessageSender>" & "<!STDMessageRecipient>" & recp & "<!STDMessageRecipient>" & "<!STDMessageDate>" & dat & "<!STDMessageDate>" & "<!STDMessageTime>" & tim & "<!STDMessageTime>" & "<!STDMessageContent>" & con & "<!STDMessageContent>"

                set UniqueName to do shell script "uuidgen"

                set theFilePath to ((path to application support from user domain) as rich text) & "MyApplication:MailImport:" & UniqueName as string
                set theFileReference to open for access theFilePath with write permission

                write TotalString to theFileReference
                close access theFileReference
            end repeat
        end tell
    end perform mail action with messages
end using terms from 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:14:46.400

applescript 中没有“富文本”之类的东西。它应该只作为“文本”。此外 theFilePath 是一个字符串，因此在下一行中您需要像这样引用它...打开以访问文件 theFilePath。注意“文件”这个词。您需要该词将字符串转换为该命令所需的文件引用。

***编辑：***现在我看到了你的整个代码，我会这样写。您的问题仍然可能是沙盒问题，但至少您应该消除脚本中任何可能的编码错误来源。这将为您提供成功编写脚本的最佳机会。如果它仍然不起作用，那么它可能是一个沙盒问题。

我看到的基本编码问题是您告诉 Mail 执行所有命令。Mail 不知道诸如“应用程序支持路径”、“执行 shell 脚本”之类的命令，也不知道如何写入文件。它们是 applescript 命令，因此您不应让 Mail 执行它们。它们不在 Mail 的 applescript 字典中，因此当 Mail 尝试执行它们时，它们可能会感到困惑。这当然是您提到的“文本”不断更改为“富文本”的原因。

所以试试这个。如果你仍然有问题，那么至少你知道你已经尽你所能消除代码中的错误来源。

```
using terms from application "Mail"
    on perform mail action with messages theMessages for rule theRule
        tell application "Mail"
            repeat with eachMessage in theMessages
                set sub to subject of eachMessage
                set mid to message id of eachMessage
                set sen to sender of eachMessage
                set recp to ""
                repeat with thisRecpt in recipients of eachMessage
                    set recp to recp & address of thisRecpt & ","
                end repeat
                set {year:y, month:m, day:d, hours:hh, minutes:mm} to (date sent of eachMessage)
                set dat to (y * 10000 + m * 100 + d) as string
                set tim to (hh * 100 + mm) as string
                set con to content of eachMessage

                set TotalString to "<!STDMessageSubject>" & sub & "<!STDMessageSubject>" & "<!STDMessageID>" & mid & "<!STDMessageID>" & "<!STDMessageSender>" & sen & "<!STDMessageSender>" & "<!STDMessageRecipient>" & recp & "<!STDMessageRecipient>" & "<!STDMessageDate>" & dat & "<!STDMessageDate>" & "<!STDMessageTime>" & tim & "<!STDMessageTime>" & "<!STDMessageContent>" & con & "<!STDMessageContent>"
                my writeToFile(TotalString)
            end repeat
        end tell
    end perform mail action with messages
end using terms from

on writeToFile(TotalString)
    set UniqueName to do shell script "uuidgen"
    set theFilePath to ((path to application support from user domain) as text) & "MyApplication:MailImport:" & UniqueName
    set theFileReference to open for access file theFilePath with write permission
    write TotalString to theFileReference
    close access theFileReference
end writeToFile 
```

***EDIT2***：尝试使用此处理程序代替上述代码中的处理程序。这可能是使 writeToFile 处理程序工作的一种方法，因为写入部分将发生在与 applescript 不同的进程中。这值得一试！

```
on writeToFile(TotalString)
    set UniqueName to do shell script "uuidgen"
    set theFilePath to ((path to application support from user domain) as text) & "MyApplication:MailImport:" & UniqueName
    set theResult to do shell script "echo " & quoted form of TotalString & " > " & quoted form of POSIX path of theFilePath
end writeToFile 
```

***EDIT3***：如果 edit2 不起作用，请看[这里](https://discussions.apple.com/thread/4146081?start=0&tstart=0)。似乎其他人在将邮件写入某些位置时遇到了问题，并通过向邮件添加密钥以授予其权限来解决该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:10:06.067

所以它原来是一个沙盒问题。10.8 中的 Apple Mail 通常使用 Sandboxed Application Support 文件夹位置，无论您如何努力获取`~/Library/Application Support/`，因此从 10.8 上的 Mail 中的 AppleScript

```
path to application support from user domain 
```

返回路径

```
~/Library/Containers/com.apple.mail/Data/Library/Application Support/ 
```

从那里`MyApplication:MailImport:`可以创建和访问文件夹。由于我们尝试读取输出的实际程序没有沙盒化，我们现在可以从该位置读取和访问数据，因为它似乎工作正常。

# jquery - jQuery 验证重构

> ID：12655563
> 
> 赞同：1
> 
> 时间：2012-09-29T18:58:40.150
> 
> 标签：jquery, refactoring, jquery-validate

我正在使用[jQuery Validate](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)并且遇到了重构问题。`<li>`我有一个基于下拉数字 创建 's 的 javascript 函数。

结果`<li>`'s 生成为：

```
<li class="person-information hide" style="display: list-item; ">
<!-- First Name -->
<input type="text" class="person-name-first error" name="person-name-first">
<!-- Last Name -->
<input type="text" class="person-name-last" name="person-name-last">
<!-- Age -->
<select class="person-age valid" name="person-age">
<option value="1">Infant/Toddler (1-3)</option>
<option value="2">Child (4-17)</option>
<option value="3">Adult (18+)</option>
</select>
</li> 
```

然后我有我的验证规则，使用 addMethod 和 addClassRules

```
$.validator.addMethod("fNameRequired", $.validator.methods.required, "First Name Required");
$.validator.addMethod("fNameMinlength", $.validator.methods.minlength, $.format("First Name must have at least {0} characters"));
$.validator.addClassRules("person-name-first", { fNameRequired: true, fNameMinlength: 2 }); 
```

我的问题是，验证错误仅在生成的第一个元素上引发。因此，如果我有 5 个`<li>`带有 class 的`"person-name-first"`，它只会对未通过的第一个元素运行验证。这意味着低于该元素失败的元素不会添加“错误”类，直到它们被聚焦。

关于如何使其查看所有具有相同类失败的元素的任何想法？

# java - 画廊中的位图导致崩溃 - Android

> ID：12655565
> 
> 赞同：0
> 
> 时间：2012-09-29T18:58:53.773
> 
> 标签：java, android, bitmap

我正在使用代码从图库中获取位图并将其用于我的目的。这是代码：

```
protected void onActivityResult(int requestCode, int resultCode,Intent data) {                  
             if (resultCode == RESULT_OK) {
             Uri targetUri = data.getData();
             Bitmap bitmap = null;
             bitmap = BitmapFactory.decodeFile(getRealPathFromURI(targetUri));
                 //bitmap = BitmapFactory.decodeStream(getContentResolver().openInputStream(targetUri));
            addMarker(bitmap);
            }
}

public String getRealPathFromURI(Uri contentUri) {
    // can post image
    String [] proj={MediaStore.Images.Media.DATA};
    Cursor cursor = managedQuery( contentUri,
    proj, // Which columns to return
    null, // WHERE clause; which rows to return (all rows)
    null, // WHERE clause selection arguments (none)
    null); // Order-by clause (ascending by name)
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
    } 
```

由于某种原因，应用程序在执行此操作时崩溃。问题不在于 addMarker 方法，因为它与测试的其他位图一起工作正常。只有来自画廊的位图它不会工作和粉碎。

这就是我得到的错误：

```
09-29 21:28:35.960: E/AndroidRuntime(4746): 
java.lang.RuntimeException: Failure delivering result ResultInfo
{who=null, request=1, result=-1, data=Intent 
{ dat=content://media/external/images/media/3 }} to activity
{com.sit.augmented_reality/com.sit.augmented_reality.activity.Demo}: 
java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T19:07:05.237

很多问题 - 并且需要堆栈跟踪才能正确回答问题。

然而，明显的问题是：

1.  （很可能）您在内部使用的游标`getRealPathFromURI`未关闭。您需要在从该方法返回之前关闭它。保存值`cursor.getString()`然后关闭光标并返回保存的值。

2.  （不太可能）位图加载/内存不足异常。您需要正确清理您加载的位图。Android在管理位图方面做得**非常糟糕。**在这个问题上与操作系统斗争了 2 年之后，我现在假设管理它们的底层代码被破坏了。关于如何在 StackOverflow 和 Android 手册中执行此操作的示例不计其数......

# c# - 游戏中的“说话/说”功能

> ID：12655567
> 
> 赞同：1
> 
> 时间：2012-09-29T18:59:13.277
> 
> 标签：c#

所以我一直在绞尽脑汁想弄清楚如何在我的游戏中实现“谈话”功能。我是 C# 编程的新手，但我一直在尽可能多地阅读和试验这门语言。

这是我到目前为止所拥有的：

```
Comm comm = new Comm();
string message = null;
if (InputBox.Text == "say " + message)
            {
                OutputBox.AppendText(comm.do_say(message));
            }

class Comm
{
    public string do_say(string message)
    {
        return "You say: " + message + "\n";
    }
} 
```

现在，这行不通。我想我知道为什么，但我似乎无法弄清楚如何重做它所以它确实有效......我试图替换：

```
(InputBox.Text == "say " + message) 
```

和

```
(InputBox.Text == "say {0}", message) 
```

它也不起作用。所以，现在我对如何使这项工作没有想法。我尝试在 stackoverflow 和谷歌上搜索答案，但一无所获。

任何有关如何修复它的帮助或提示都会很棒！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:03:40.713

您似乎在这里寻找[模式匹配](http://en.wikipedia.org/wiki/Pattern_matching)，但 C# 不支持模式匹配。换句话说，简单地写

```
if (InputBox.Text == "say " + message) 
```

每当用户键入“say foo”时，不会自动将“foo”分配给消息。

相反，您可能应该使用正则表达式，它们在 C# 中通过[Regex](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)类实现。尝试类似的东西

```
Match m = Regex.Match(InputBox.Text, @"^say\s+(.*)$", RegexOptions.IgnoreCase);
if (m.Success)
{
    OutputBox.AppendText(Comm.GetScreenoutput(m.Groups[1].Value));
} 
```

您不需要创建`do_say`实例方法，因此在上面的代码中我假设将`Comm`其转换为

```
static class Comm
{
    public static string GetScreenOutput(string message)
    {
        return "You say: " + message + "\n";
    }
} 
```

此代码遵循 C# 代码的命名约定，方法名称使用[Pascal 大小写](http://en.wikipedia.org/wiki/Pascal_case)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T19:04:04.237

`message`你事先不知道是什么，对吧？您需要搜索“Say”，并将字符串的其余部分作为输入。

```
if(InputBox.Text.StartsWith("Say ")) 
    OutputBox.Text += InputBox.Text.SubString(4); 
```

`SubString(4)`将返回字符串中前 4 个字符之后的所有内容，之后的所有内容`"Say "`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T19:02:54.207

```
if (InputBox.Text.ToUpper().StartsWith("SAY "))
{
    OutputBox.AppendText(comm.do_say(message));
} 
```

这将检查用户是否使用了say这个词，而不管使用的大小写如何。

# git - 具有多个子模块的单个项目

> ID：12655570
> 
> 赞同：0
> 
> 时间：2012-09-29T18:59:17.383
> 
> 标签：git, git-submodules

我有一个项目，我想从我的服务器中再提取两个存储库。不过，我遇到了一个问题，其中一个子模块正在从两个存储库中提取代码。

一个子模块需要在

```
/projectroot/application/models 
```

另一个

```
/projectroot/library/NameSpace 
```

这就是我所做的：

```
cd projectroot
git submodule add ssh://user@xx.xx.xxx.xx:/var/repositories/models.git application/models 
```

这非常有效；我的应用程序/模型包含它需要的东西。所以我进入下一个：

```
git submodule add ssh://user@xx.xx.xxx.xx:/var/repositories/NameSpace.git library/NameSpace 
```

我进去看看

```
/projectroot/library/NameSpace 
```

我有来自两个存储库的所有文件。我可能还应该注意到

```
git submodule 
```

正确列出了按预期添加的两个子模块。

我在这里错过了一些重要的东西吗？是我在初始化各个存储库时做错了什么吗？我已经尝试了这个过程〜3次。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:09:13.840

不确定这是否可以被视为一个答案，但我设法通过重新克隆整个项目来修复它（在我添加子模块之前）。然后我尝试再次添加子模块并且它起作用了。

沿着 Git/ 其他地方的某个地方变得混乱。

不管怎么说，还是要谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T19:12:52.377

您可能正在通过以下方式更新所有子模块

`git submodule update`

如果只想更新一个子模块，则需要`cd`进入该子模块的目录，然后运行

`git pull`

那里。然后，从项目根目录提交变更集哈希更改。

# iphone - Imagescrollview 显示黑屏而不是图像

> ID：12655571
> 
> 赞同：1
> 
> 时间：2012-09-29T18:59:19.947
> 
> 标签：iphone, uiscrollview, ios6

单击图库按钮时，它显示黑屏

```
UIButton *galleryButton = [UIButton buttonWithType:UIButtonTypeCustom];

[galleryButton addTarget:self action:@selector(ScrollView:) forControlEvents:UIControlEventTouchUpInside];

galleryButton.frame = CGRectMake(0, 0, 30, 30);

UIImage *ime = [UIImage imageNamed:@"photos.png"];

[galleryButton setImage:ime forState:UIControlStateNormal];

UIBarButtonItem *gallerybutton = [[UIBarButtonItem alloc] initWithCustomView:galleryButton];

-(void)ScrollView:(id)sender
 {
ImageScrollViewController *imagescrollviewcontroller = [[ImageScrollViewController alloc] init];

[self presentViewController:imagescrollviewcontroller animated:YES completion:NULL];

[imagescrollviewcontroller release];

 }

- (void)viewDidLoad
{

 self.view.backgroundColor = [UIColor viewFlipsideBackgroundColor];

 [_imageScrollView setBackgroundColor:[UIColor blackColor]];
[_imageScrollView setCanCancelContentTouches:NO];
_imageScrollView.indicatorStyle = UIScrollViewIndicatorStyleWhite;
_imageScrollView.clipsToBounds = YES;       // default is NO, we want to restrict drawing within our scrollview
_imageScrollView.scrollEnabled = YES;

   _imageScrollView.pagingEnabled = YES;

 // load all the images from our bundle and add them to the scroll view
NSUInteger i;
for (i = 1; i <= kNumImages; i++)
{
    NSString *imageName = [NSString stringWithFormat:@"image%d.png", i];
    UIImage *image = [UIImage imageNamed:imageName];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

    CGRect rect = imageView.frame;
    rect.size.height = kScrollObjHeight;
    rect.size.width = kScrollObjWidth;
    imageView.frame = rect;
    imageView.tag = i;  
    [_imageScrollView addSubview:imageView];
    //[imageView release];
}

[self layoutScrollImages];

  - (void)layoutScrollImages
   {
UIImageView *view = nil;
NSArray *subviews = [_imageScrollView subviews];

// reposition all image subviews in a horizontal serial fashion
CGFloat curXLoc = 0;
for (view in subviews)
{
    if ([view isKindOfClass:[UIImageView class]] && view.tag > 0)
    {
        CGRect frame = view.frame;
        frame.origin = CGPointMake(curXLoc, 0);
        view.frame = frame;

        curXLoc += (kScrollObjWidth);
    }
}

 // set the content size so it can be scrollable
 [_imageScrollView setContentSize:CGSizeMake((kNumImages * kScrollObjWidth), [_imageScrollView bounds].size.height)];
    } 
```

知道为什么它不显示图像而是黑屏。我正在关注用于滚动图像的苹果示例代码。我所做的更改是它们在滚动视图中显示了两个子视图。我只显示一个子视图。

感谢帮助。

# security - 加密文本

> ID：12655575
> 
> 赞同：0
> 
> 时间：2012-09-29T18:59:58.753
> 
> 标签：security, encryption

我想知道是否可以加密文本客户端。

情况是我有一块要加密的文本，然后将加密的文本保存到文件中。只有经过一定时间后，我的程序才会解密它。我的另一个要求是能够使用加密文本传输文件，并能够在各种机器上使用我的程序的其他副本对其进行解密。

问题是在哪里存储密钥。我能想到的唯一可行的实现是，如果我存储密钥服务器端，并让它在经过一定时间后返回密钥。

有没有办法做这个客户端（即没有任何互联网访问）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:18:59.330

您当然可以在客户端加密文本，但真正的问题是密钥管理。

如果假设没有 Internet 访问权限，那么您将不得不在客户端中打包一个证书，该证书包含*两个*密钥，私有用于加密，公共用于解密，除非您使用对称密钥。本来建议只生成一个本地的临时对称密钥，但您声明您必须能够在其他没有它的机器上解密文本，这样就行不通了。乍一看，也许我忽略了一些明显的事情，就是用公钥和私钥在客户端上打包证书，这会带来一系列问题，例如用私钥保护证书。

# django - 编辑模型属性时出现奇怪的情况

> ID：12655576
> 
> 赞同：1
> 
> 时间：2012-09-29T18:59:58.727
> 
> 标签：django, model, attributes

我的模型如下所示：

```
class Model1(models.Model):
  ...

class Model2(models.Model):
    model1 = models.ForeignKey(Model1)
    attr = models.IntegerField(default=1) 
```

从外壳，我看到以下行为：

```
>>> m1.model2_set.all()[0].attr += 1
>>> m1.model2_set.all()[0].attr
1
>>> m2 = m1.model2_set.all()[0]
>>> m2.attr += 1
2 
```

知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T23:18:14.163

看起来您正在从数据库中检索相同的 Model2 实例。m1 和 m2 似乎附加了相同的 Model2，您可以通过`model2_set.all()[0]`. 您可以像这样验证：

```
>>> m2.model2_set.all()[0] == m1.model2_set.all()[0] # should be true 
```

# cocos2d-iphone - replaceScene 是只替换当前场景还是替换 Cocos2d 中的所有场景

> ID：12655577
> 
> 赞同：1
> 
> 时间：2012-09-29T19:00:11.757
> 
> 标签：cocos2d-iphone, scene

我在 Cocos2d 中有一个游戏，它有一个主场景（游戏场景）和一个转到“配置”场景的按钮。当用户单击主场景中的配置按钮时，我使用 pushScene 进入“配置”场景。我使用 pushScene 的原因是允许用户从他离开的地方继续游戏。

在“配置”场景中有两个选项：“取消”和“确定”。如果用户点击“取消”，我会使用 popScene，游戏会从它离开的地方继续。如果用户点击“确定”，我会使用 replaceScene，因为我希望游戏以新配置从头开始。

所以，当用户点击“确定”时，我知道“配置”场景被新的游戏场景替换了，但是旧的游戏场景也被替换了吗？否则，我是在做正确的事情还是应该实施另一种方法来让游戏场景知道它应该恢复还是重新启动。

我想通过累积未替换的场景来确保我不会泄漏内存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T20:01:11.010

replaceScene 方法按照它所说的去做。它替换了当前场景。如果您有 10 个场景相互叠加，它将替换第 10 个场景，并且所有之前的场景都将保留。

这也是我不推荐使用 pushScene 的原因之一。很容易忘记场景可能被推送多于弹出的情况。另一个原因是 popScene 不能使用过渡进行动画处理。

顺便说一句，如果你在 pushScene 之后做 replaceScene，然后在新替换的场景中 popScene，你可以很容易地测试这个行为。你会看到旧场景弹出。通常，如果您 p​​opScene 堆栈中只有一个场景，它会抛出一个断言。

# c# - 尝试从 ListView 中的 DropDownList 绑定数据

> ID：12655578
> 
> 赞同：0
> 
> 时间：2012-09-29T19:00:12.553
> 
> 标签：c#, asp.net, drop-down-menu, bind

我正在尝试在 EditItemTemplate 的 ListView 中绑定 DropDownList 中的数据，但它没有用。

代码：

```
<asp:DropDownList ID="DropDownList1" runat="server" SelectedValue='<%# Bind("type")%>'>
    <asp:ListItem Text="Fatwa" Value="1"></asp:ListItem>
    <asp:ListItem Text="Interviewer" Value="2"></asp:ListItem>
    <asp:ListItem Text="Programs" Value="3"></asp:ListItem>
</asp:DropDownList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T19:23:33.073

我的代码运行良好，但我忘记在列表视图中输入 DataKeyNames ：D

```
<asp:ListView ID="TodayOrdersList" runat="server" DataSourceID="SqlDataSource1" DataKeyNames="ID"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T19:07:21.897

这是您可以使用的概念示例：

```
 <EditItemTemplate>
        <asp:Label ID="DataLabel" runat="server" Text="<% $resources:AppResource,UserData %>"
            CssClass="OneColumnTitleLabel"></asp:Label>
        <br />
        <br />
        <asp:Label ID="EmailLabel" CssClass="RightColumnLabel" runat="server" Text='<%# Resources.AppResource.Email + ":" %>'></asp:Label><br />
        <asp:TextBox ID="EmailTextBox" runat="server" CssClass="RightColumnText" Text='<%# Eval("Email") %>'
            ReadOnly="true"></asp:TextBox>
        <br />
        <asp:Label ID="LanguageLabel" CssClass="RightColumnLabel" runat="server" Text='<%# Resources.AppResource.Language + ":" %>'></asp:Label><br />
        <asp:DropDownList ID="LanguageDropDown" runat="server" CssClass="RightColumnDropDown"
            DataSourceID="LanguageDataSource" DataTextField="Name" DataValueField="Id" SelectedValue='<%# Bind("LanguageId") %>'
            AppendDataBoundItems="True">
            <asp:ListItem Value="" Text="" Selected="True">
            </asp:ListItem>
        </asp:DropDownList>
        <br />
        <asp:Label ID="Label2" CssClass="RightColumnLabel" runat="server" Text='<%# Resources.AppResource.Company + ":" %>'></asp:Label><br />
        <asp:TextBox ID="CompanyTextBox" runat="server" CssClass="RightColumnText" Text='<%# Bind("Company") %>'></asp:TextBox>
        <br />
        <asp:Label ID="PhoneLabel" CssClass="RightColumnLabel" runat="server" Text='<%# Resources.AppResource.Phone + ":" %>'></asp:Label><br />
        <asp:TextBox ID="PhoneTextBox" runat="server" CssClass="RightColumnText" Text='<%# Bind("Phone") %>'></asp:TextBox>
        <br />
        <asp:Button ID="UpdateUserData" runat="server" Text='<%# Resources.AppResource.Save %>'
            CssClass="Button" CommandName="Update" CausesValidation="true" />
    </EditItemTemplate> 
```

注意 LanguageDropDown（LanguageId 绑定回列表视图）。此下拉列表绑定到如下数据源：

```
<asp:ObjectDataSource ID="LanguageDataSource" runat="server" SelectMethod="GetLanguages"
    TypeName="GP.Solutions.Services.LanguageManager"></asp:ObjectDataSource> 
```

这是您可以在列表视图中绑定下拉列表的方式。

# c# - WP7无法播放wav文件

> ID：12655580
> 
> 赞同：1
> 
> 时间：2012-09-29T19:00:20.207
> 
> 标签：c#, windows-phone-7, xna

在 Windows Phone 7 中播放此 wav 文件时，出现错误。

```
var stream = TitleContainer.OpenStream("TestSound.WAV");
            var effect = SoundEffect.FromStream(stream);
            FrameworkDispatcher.Update();
            effect.Play(); 
```

它在第二行代码上得到了这个异常。

```
Ensure that the specified stream contains valid PCM mono or stereo wave data. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T06:19:03.650

我玩过很多wav文件...

你想播放什么wav文件？

这是我以前玩过的一个非常简单的声音... [http://iron7.com/forapp/xylo/x1.wav](http://iron7.com/forapp/xylo/x1.wav)

我发现 audacity 工具对于将文件编辑为可接受的格式特别有用 - [http://audacity.sourceforge.net/](http://audacity.sourceforge.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-13T12:49:16.597

您可以使用具有以下格式标准的任何 .wav 文件：

编解码器：Microsoft PCM 格式

采样率：11025

通道：1（单声道）或 2（立体声）

位深：16 位

# ruby-on-rails - 多个布尔函数

> ID：12655584
> 
> 赞同：0
> 
> 时间：2012-09-29T19:00:48.693
> 
> 标签：ruby-on-rails, methods, boolean

我得到了这两个布尔函数：

```
 def settled?
    self.settled == true
 end

 def negative_pl?
    self.profitloss < 0
 end 
```

我怎样才能同时测试他们两个？在我看来，我想做这样的事情：

```
<%= 'classRed' if bet.settled?.negative_pl? %> 
```

我知道以上不起作用，但最好的方式来解释我想做的事情:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:02:59.027

每次检查都需要一个子句：

```
if bet.settled? and bet.negative_pl? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T19:03:11.590

```
<%= 'classRed' if bet.settled? and bet.negative_pl? %> 
```

# seo - 子域的 SEO 站点地图

> ID：12655585
> 
> 赞同：0
> 
> 时间：2012-09-29T19:00:57.203
> 
> 标签：seo, sitemap, yahoo

基本上我有一个站点调用（例如 domain.com），我允许我的客户在我的域上托管他们的站点（例如 theirsite.domain.com）

我有一个 domain.com 的站点地图，但没有链接到 theirsite.domain.com，因此在 google 上找不到这些子域。

我考虑过动态生成站点地图，但这并不理想，因为我的域上可能有 100,000 个站点，导致资源消耗巨大且生成时间缓慢。

有什么理想的方法可以让搜索引擎抓取我的 domain.com 以及我的客户网站 (xx.domain.com)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T03:51:11.823

使用 Google 网站管理员工具

[站点验证和站点地图生成](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=100450)

# python - Django - javascript中的模板标签“with”

> ID：12655589
> 
> 赞同：1
> 
> 时间：2012-09-29T19:01:34.647
> 
> 标签：python, django

如何`with`在外部 JavaScript 文件中使用 django 模板标签？我试着像这样使用它：

```
<script>
    //some code
    //
    {% with user|get_song_rating:opts.id as rated %}
        {% if rated %}
           $off.unbind('click').unbind('mousemove').unbind('mouseenter').unbind('mouseleave');
           $off.css('cursor', 'default'); $on.css('cursor', 'default');
           $this.attr('title', 'Your rating: ' + rated.points.toFixed(1));
        {% endif %}
    {% endwith %}
</script> 
```

但它在控制台中给出错误`Uncaught SyntaxError: Unexpected token with`。我认为问题是`with`JavaScript 的关键字也是，那么解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T19:38:59.647

如果您希望您的文件包含 Django 模板标签，那么它必须由 Django 模板引擎处理。创建一个新视图，为 JavaScript 源发送正确的`Content-type`标头，然后处理并输出包含 JavaScript 的模板。

# java - 如何检查未知数量的输入java并在行尾停止检查

> ID：12655592
> 
> 赞同：0
> 
> 时间：2012-09-29T19:01:37.987
> 
> 标签：java, input

这是我的第一个问题。我是二年级计算机科学专业的学生，​​我在正确读取多个输入时遇到了一些麻烦。我正在创建一个接受一行命令的棋盘游戏。

这是一些问题代码的样子：

要求用户输入类似这样的命令：`create 0 0 fast flexible`或类似：`create 0 0`，整数可以是任何值，并且可以快速或灵活地输入，而无需另一个。

```
if((keyboard.next()).equals("create"))
{
    xValue = keyboard.nextInt();
    yValue = keyboard.nextInt();

if((keyboard.next().equals("fast")))
{
        pieceType = "FP";
        if((keyboard.next().equals("flexible")))
        {
            pieceType = "FF";
        }
    }

if((keyboard.next().equals("flexible")))
{
        pieceType = "SF";
        if((keyboard.next().equals("fast")))
        {
            pieceType = "FF";
        }
}
} 
```

该程序始终需要 7 个输入。

如何让它在用户按下回车后停止检查输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:07:22.257

我想您可以根据空格拆分整个字符串，然后按单词（或部分）顺序处理字符串。无论如何，您应该谨慎地断言整个输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T19:07:56.277

尝试

```
String NEW_LINE_SIGN = "\n";
if (keyboard.next().contains(NEW_LINE_SIGN){ /* .... */ } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T20:27:49.253

这应该工作...

```
Scanner kbd = new Scanner(System.in);
kbd.useDelimiter(System.getProperty("line.separator"));
//you could create a rule automatically with some kind of a rules engine
if(kbd.hasNext("create(\\s+)(\\d+)(\\s+)(\\d+)(\\s+)(fast|flexible)(\\s+)(fast|flexible)")) {
    MatchResult res = kbd.match();
    for(int i = 0; i <= res.groupCount(); ++i) {
        System.out.println(res.group(i));
        //handleRules(res.group(i), i);
    }
}
kbd.close(); 
```

# algorithm - 使某些整数异或为零所需的最小总和

> ID：12655593
> 
> 赞同：12
> 
> 时间：2012-09-29T19:01:40.650
> 
> 标签：algorithm, xor

这是一个处理算法和按位异或运算的问题。我们得到**`x1*x2*x3*....*xn=P`**，其中 star( `*`) 操作表示 XOR（按位）操作， **x1 到 xn 是正整数**。P也是一个正整数。我们需要**找到 min(a1+a2+a3+.....an)** *使得*这种关系成立--> **`(x1+a1)*(x2+a2)*(x3+a3)*....*(xn+an)=0`**。'+' 代表正常的加法运算。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T10:47:54.500

## 重述为有界整数线性规划问题

该问题可以重述为以下有界 ILP（整数线性规划）问题。

```
Let x1,...,xN be as in the original problem, i.e. the goal is to minimize(a1+...+aN)
under the conditions (x1+a1) XOR ... (xN+aN) = 0, a1,...,aN >= 0.

The following is than an equivalent bounded ILP:
Find b[k,i] (0 <= k <= K, 1 <= i <= N) and s[k] (0 <= k <= K) such that
  (A) b[k,i] in {0, 1} for all i=1..n, k=0..K,
  (B) s[k] is an integer >= 0 for all k=0..K,
  (C) sum(b[k,i]*2^k, k=0..K) >= x[i] for all i = 1..N,
  (D) sum(b[k,i], i=1..N) = 2*s[k] for all k = 0..K
and minimize
  sum(b[k,i]*2^k, i=1..n, k=0..K).

From a solution of the bounded ILP the ai's are obtained by
  a[i] = sum(b[k,i]*2^k, k=0..(K-1)) - x[i] 
```

b[k,i] 在这里只是 (xi+ai) 的二进制表示的第 k 位（条件 (A) 和 (C)）。为了使整体 XOR 为零，对于每个 k，偶数 b[k,i] 必须为 1。这由条件（B）和（D）表示。（请注意，（D）中的左手总和必须是即使它等于 2*s[k] 并且 s[k] 是整数）。

K，即表示所有（xi+ai）所需的位数（实际上是加一）必须事先确定。选择一个 K 使得所有 xi < 2^K 就足够了，即 ai 比最大的 xi 大一点。但是选择更大的 K 并不重要，最高位将简单地输出为零。如果 K 被选小，则 ILP 将无解。

## 解决方案的存在

忽略最小条件，问题可以重述为

> 给定 x, yz 且 x <= y，找到 a 和 b 使得 (x+a) XOR (y+b) = z

给定原始问题的一个实例，N >= 2。令 x=x1，y=x2，z=(x3 XOR x4 XOR ... xn)。如果找到合适的a和b，设置a1=a，a2=b，a3=...=an=0，得到原问题的解。

简化的问题通过以下方式解决（同样，*忽略*最小性）

1.  如果 (y XOR z) >= x 那么 a: = ((y XOR z) - x), b := 0 是一个解 (*)
2.  如果 (x XOR z) >= y 那么 a := 0, b := ((x XOR z) - y) 是一个解 (*)
3.  否则，选择一个满足 (x+a) XOR z >= y 的 a。这样的 a 总是存在的，例如，您可以让 a := 2^k 与 2^k > max(x,y,z)。设置 b := ((x+a) XOR z) - y) 产生一个解 (*)

(*) 要查看这些确实是解决方案，您只需要应用一些代数。例如，在情况 (1) 中，将 a 和 b 代入后，得到：(x+(y XOR z)-x) XOR (y+0)。这与： (y XOR z) XOR y 相同，因此与：zqed Case (2) 的工作方式类似。在情况 (3) 中，您得到： (x+a) XOR (y+((x+a) XOR z)-y) = (x+a) XOR ((x+a) XOR z) = z。

这表明对于 N >= 2，总是存在解。

这些解决方案是否最小，我不知道。在情况（3）中，它显然取决于 a 的选择，所以至少你必须找出 a 的最佳选择。也可能是原始问题允许比简化问题更小的解决方案。Anway，也许这种重述可以帮助某人找出完整的解决方案。

顺便说一句，原始问题本质上让您完全自由地如何在 xi 上“展开”校正值 ai，这让我想知道这是否不等同于某种背包问题。如果是这样，找到一个最小的解决方案很可能是 NP 难的。

## 关于极简的观察

采取以下问题

```
(1+a1) XOR (3+a2) XOR (6+a3) = 0 
```

在二进制中，即

```
(001b+a1) XOR (011b+a2) XOR (110b+a3) = 0 
```

a1=a2=a3=0 的余数是 001b XOR 011b XOR 110b = 100b。因此，一个明显的解决方案是 a1=4,a2=0,a3=0。或者，a1=0,a2=4,a3=0。这个解决方案虽然*不是*最小的 - 以下解决方案更小

```
a1=1, a2=1, a3=0 
```

它也是最小的，因为所有较小的解决方案只能有一个非零 ai，并且所有项 (2 XOR 3 XOR 6)、(1 XOR 4 XOR 6)、(1 XOR 3 XOR 7) 都是非零的。

这表明没有从底部（即最低位）向上工作的格力算法可以工作，因为这样的算法会跳过前两位，因为它们的残差最初为零。

它还表明，您不能从残差中选择某个非零位*k*并尝试通过将*2^k*添加到xi*之一来将其归零。*您有时必须将其添加到多个 xi 中才能找到最小的解决方案。

这让我更进一步相信找到一个最小的解决方案是一个相对困难的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T07:07:23.090

参考我的评论 - 一个尚未回答的问题：

1.  负 ai 似乎是必要的：对于 N=1 的情况，a1=-x1 是问题的解决方案。因此，我假设在一般情况下也允许负 ai。

2.  然后，对于 N=2，根本没有解决方案（“min”），除了在计算机中可以表示的（负）数存在限制之外：

对于 N=2 集：a1=x2+K 和 a2=x1+K。这产生：

(x1+x2+K) XOR (x2+x1+K) = 0，与 K 无关

总和 (a1 + a2) = (x1 + x2 + 2*K)

没有最小解：我们可以让 K 变得更负。

同样对于 N>2：对于 N 偶数，对 N=2（具有任意 K）进行成对“解决方案”；对于 N 奇数，单出 - 将其视为 N = 1 - 其余 N-1 将作为偶数 N 处理。

在所有情况下，您构造 ZERO XOR ZERO XOR ZERO ... = ZERO，其中 ZERO 始终是类型对 (am = xm+1 + K; am+1 = xm + K)，除非 N 为奇数，其中您还有另一个因素，即 {am = -xm) 类型。除了 N=1，解可以变成你喜欢的大负数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T15:34:55.530

也许第一次进入最小值 - N>1，所有 a(i) 都是积极的 - 沿着以下路线。让我先声明一些术语。

初始化 y(i) = x(i); y(i) 代表 (x(i)+a(i))，所以我们实际上初始化 a(i)=0（对于 i=1..N）。同样，定义 Q = y(1)^y(2)^...^y(N) （^ 代表 XOR）；最初 Q=P。

我们将调整 y(i) 以使 Q 为零，始终保持 y(i)>=x(i) - 即：a(i)>=0。

考虑每个数字 (x,y,a,P,Q) 的二进制（位）扩展，按 m=0,1,2,.. 对位进行编号：位 m 表示 2**m 值部分数字。

请注意，当且仅当具有相同非零位的 y(i) 的数量为奇数时，Q 中的一位非零。

进行如下操作。自上而下地扫描 Q 中的违规位（值 1），即：从最高（“当前剩余”）位 1 开始。让这成为位 #m。

我们有两种情况：

情况 A. 至少有一个 y(i) 在位 m 中为零。将 C 定义为所有此类 y(i) 的集合。

我们将选择其中一个（见下文）并将其 m 位设置为 1，即更改

```
 y(i) = y(i)+(2**m). For the moment, just define INCREMENT=(2**m). 
```

为了确定我们在集合 C 中的选择 y(i)，我们尝试通过尽可能大的 DECREMENT 部分补偿 INCREMENT (2**m)：

遍历位 m-1, m-2, ... 直到我们有一个位 #n ，其中 (1.) Q 有一个 1（即：我们希望删除的另一个有问题的位），并且 (2.) 在C 中的 y(i) 中至少有一个也是 1。

如果成功，则 (1.) 设置：

```
INCREMENT = INCREMENT - 2**n (note that this remains positive); 
```

(2.) 减少集合 C 以仅保留那些具有位 #n 非零的 y(i)；(3.) 重复该过程，进一步向下扫描位。

一旦我们无法继续前进，就从 C 中任意选择剩余的 y(i) 之一并将其增加 INCREMENT。更新 Q。这通过添加从 Q 中删除位 {m,n,...}

```
 (2**m - 2**n - ...) 
```

对于所选的 y(i)，将其位 #m 设置为 1（为 0），并将其位 n,... 设置为 0（这些为 1）。

情况 B. y(i) 中没有一个在位 #m 中为零。在这种情况下：

迭代位 k=m+1, m+2, ... 直到至少两个 y(i) 在该位中有一个零。将 C1 定义为所有此类 y(i) 的集合，并复制到集合 C2。还定义

```
INCREMENT1 as (2**k - 2**m) and set INCREMENT2 = 2**k. 
```

像我们在案例 A 中所做的那样处理 {C1, INCREMENT1}。

从集合 C2 中删除最终选择 y(i)。然后同样处理 {C2, INCREMENT2}。

重复所有这些直到 Q 中的所有位都为零。

我没有尝试证明这个过程产生了真正的最小值，但我确实相信这种方法可能是思考这种证明（的结构）的一个很好的起点。

# c++ - 是否可以在模板中快速使用二进制逻辑？

> ID：12655597
> 
> 赞同：1
> 
> 时间：2012-09-29T19:01:55.100
> 
> 标签：c++, c++11

假设我想为整数类型而不是字符做一些事情，我有

`is_integral<T>::type`和`is_char<T>::type`

是否可以这样写：

`integral_constant<bool,is::integral<T>::value && !is_char<T>::value>`

更具可读性

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T20:04:19.070

这些元计算甚至在 C++11 之前就已经完成，而[Boost.MPL](http://www.boost.org/doc/libs/1_51_0/libs/mpl/doc/index.html)是 C++03 中 TMP 的重炮。有了它，您的要求可以这样表达：

```
// in C++03:
// typedef /* compute */ result;
using result = and_<is_integral<T>, not_<is_char<T>>>; 
```

（来自命名空间的位置`and_`和位置。）`not_``boost::mpl`

请注意有限的冗长，因为您不必使用`::value`样板。同样，`result`它是惰性的，您可以在其中强制使用`result::value`（将是`true`or `false`）或`result::type`（这将是一个类型——文档包含所有详细信息）来强制计算结果。Boost.MPL 很容易不这样做，因此例如`not_<result>`足以反转逻辑，即使`not_<result::type>`也可以工作。`typename`考虑到如果依赖，则需要附加项是一件好事`result`。

我确实认为 Boost.MPL 在 C++03 中有巨大帮助，部分原因是它模拟了可变参数模板。例如，`and_`不限于两个参数。我在 C++11 中避开了它，但是因为在我使用它的大多数情况下，我现在使用包扩展。尽管如此，类似的东西`and_`仍然有用，因为不可能在任意表达式中扩展包，例如在涉及`&&`逻辑运算符的表达式中。这只能通过逻辑元函数来完成：

```
// Enforce precondition: every type T must be integral
static_assert( and_<std::is_integral<T>...>::value, "Violation" ); 
```

我认为[这篇文章](http://rmartinho.github.com/2012/06/01/almost-static-if.html)是一本很好的读物，它给出了减少元计算冗长的很好的提示。它侧重于用于通用编程的 SFINAE，但它也适用于 TMP（SFINAE 也可用于 TMP）。最后一个例子是

```
template <typename T,
          EnableIf<is_scalable<T>, is_something_else<T>>...>
T twice(T t) { return 2*t; } 
```

在 C++03 中可能看起来像这样，使用类似于 Boost 中提供的工具：

```
template<typename T>
typename enable_if<
    and_<is_scalable<T>, is_something_else<T>>
    , T
>::type twice(T t) { return 2*t; } 
```

一个天真的 C++11 版本可以说是最糟糕的：

```
template<typename T>
typename std::enable_if<
    is_scalable<T>::value && is_something_else<T>::value
    , T
>::type twice(T t) { return 2*t; } 
```

我见过一些主张放弃 Boost.MPL 风格的人，Boost.MPL 倾向于使用类型和类型“返回”元函数来使用值和`constexpr`函数。这可能看起来像：

```
// EnableIf alias now accepts non-type template parameters
template<typename T
         , EnableIf<is_scalable<T>() && is_something_else<T>()>...>
T twice(T t) { return 2*t; } 
```

你仍然需要一个`constexpr`函数来计算例如逻辑析取如果`T...`是一个包虽然：`EnableIf<any(is_foo<T>()...)>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T19:17:16.930

为什么需要积分常数？如果您只需要一个编译时常量 bool，那么您不必包装表达式。

```
is_integral<T>::value && !is_char<T>::value 
```

如果你在几个地方需要这个表达式，你可以写你自己的特殊类型特征。

```
template<typename T>
struct is_integral_and_not_char {
    static const bool value = is_integral<T>::value && !is_char<T>::value;
};

is_integral_and_not_char<T>::value 
```

或者，如果您确实想符合 UnaryTypeTrait 概念，那么

```
template<typename T>
struct is_integral_and_not_char
  : std::integral_constant<bool, std::is_integral<T>::value && !std::is_char<T>::value>
{} 
```

# ruby-on-rails - Ruby Rails Web 请求响应生命周期

> ID：12655604
> 
> 赞同：4
> 
> 时间：2012-09-29T19:02:34.673
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, web-applications

我是 ruby​​ on rails 的新手，试图了解 ruby​​ on rails web 应用程序中典型请求/响应生命周期的深入流程。

我已经用谷歌搜索了信息，但没有找到完整或详细的 DNS 服务器级别到调度程序的答案。

我得到的最接近的解释是： [http](http://brainspl.at/request_response.pdf) ://brainspl.at/request_response.pdf 。

有人可以指出我更好或更详细的解释吗？

-拉维泰亚

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-29T19:49:17.073

因此，您要求提供 Rails 请求/响应周期，并且您已经提到了一个真正很好地描述它的演示文稿。所以我假设你想从一个非常高的层次了解它，并且你完全需要这个概念来进行开发。然后就是这里了。我只是想按顺序命名这些部分。

1.  **路线：**在这里，您将绘制世界将用来访问您的应用程序的路径。使用完整的 RESTful 架构，您需要定义资源的层次结构并定义如何访问资源以执行某些操作。如果对您的应用程序的任何请求与路由文件中的任何路径都不匹配，则不会对其进行处理。如果发生任何匹配，它将找到相应的控制器和动作并调用它。在调用的时候，它将所有请求相关的数据存储在`params`hash中。
2.  **过滤器之前：**现在您的应用程序已经知道哪个控制器#method 将处理请求。它会在调用该方法之前检查是否有任何配置要执行。这是通过使用`before_filter`. 如果找到任何东西，那么将首先调用这些函数。
3.  **方法执行：**`before_filter`按特定顺序执行所有方法后，将调用实际方法。在此方法中，所有数据都以`params`散列形式提供。它处理输入数据，调用模型调用以访问数据库，并准备数据以供查看。
4.  **视图：**将根据控制器#action、格式选择正确的视图文件。`render :partial`或者，您可以通过调用选择任何特定的视图来呈现。并且将使用控制器中准备的变量来准备响应。此响应将发送给客户端。
5.  **过滤器**后：处理视图后，它会查找`after_filter`方法，如果找到，也会查找方法。

好吧，我会说这是一个快速概述，没有任何细节。我再说一遍，你提到的 pdf 确实包含更多细节。

如果您想更具体地了解任何事情，请告诉我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-01T22:46:59.650

用户打开他的浏览器，输入 URL，然后按 Enter。当用户按下 Enter 时，浏览器会请求该 URL。该请求到达 Rails 路由器 (config/routes.rb)。路由器将 URL 映射到正确的控制器和操作以处理请求。该操作接收请求，并要求模型从数据库中获取数据。模型将数据列表返回给控制器操作。控制器动作将数据传递给视图。视图将页面呈现为 HTML。控制器将 HTML 发送回浏览器。页面加载并且用户看到它。

[https://www.codecademy.com/articles/request-response-cycle-dynamic](https://www.codecademy.com/articles/request-response-cycle-dynamic) 和[https://www.codecademy.com/articles/request-response-cycle-forms](https://www.codecademy.com/articles/request-response-cycle-forms)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-26T10:09:22.297

当用户请求“url”时，一切都开始了。浏览器需要知道服务器的 IP 地址才能连接，因此它会查找 DNS（域名系统），将您的域转换为特定服务器的公共 IP 地址。然后浏览器将进行三次握手以连接端口 80 中的 puma 之类的服务器。并决定公钥和私钥是否会发生，因为如果 url 使用 HTTPS。HTTPS 是围绕 HTTP 和 TCP 的安全包装器。然后 Server 通过 rack 之类的中间件触发 rails 应用，向应用提供 request verb、header、body。然后 rails 应用程序使用 Journey（Rails 的默认路由库）来查找与请求匹配的同意控制器和操作，并使用请求和参数进行调用。

然后在此过程中将触发之前、之后、周围等 Rails 生命周期回调。该操作负责从模型请求数据并呈现请求的同意视图。最后将状态、标头和正文作为响应发回。

如果您想深入了解生命周期，请查看这篇文章[请求的生命周期](https://blog.skylight.io/the-lifecycle-of-a-request/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-13T10:28:03.747

还需要注意的是，Rails 应用程序使用`MVC architectural pattern`高级别的**Model**、**View**和**Controller** ，Rails 应用程序中请求的生命周期只是**Model**、**View**和**Controller**的交互。本文[为](https://medium.com/@matthewmain/rails-request-response-cycle-819e9cd8fa4e)您提供概述。

# maven - Maven 在 Central repo 中找不到richfaces 3.3.x

> ID：12655606
> 
> 赞同：1
> 
> 时间：2012-09-29T19:02:34.557
> 
> 标签：maven, richfaces, command

我正在尝试遵循本教程： [http ://docs.jboss.org/richfaces/latest_3_3_X/en/cdkguide/html_single/](http://docs.jboss.org/richfaces/latest_3_3_X/en/cdkguide/html_single/)

我在使用 Maven 命令时遇到了障碍。首先，在中央存储库中找不到 org.richfaces.cdk 版本 3.3.3.Final，因此我必须通过下载文件*maven-richfaces-resources-plugin-4.2手动将版本 4.2.2.Final 安装到本地存储库.2.Final.jar* 然后我不得不手动将 org.richfaces.cdk 插件安装到我的本地存储库中。接下来，运行 4.1 节中的命令。我不得不将原型：创建更改为原型：生成。运行此命令显示 maven 在 jar 文件中找不到 META-INF/archetype.xml。我被困在这一点上。任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T03:28:13.847

根据此线程，该版本的 Richfaces 位于 JBoss Maven 存储库中，而不是 Central [https://community.jboss.org/thread/172034?_sscc=t](https://community.jboss.org/thread/172034?_sscc=t)

通常，软件供应商维护自己的 Maven 存储库，并且不会将每个版本都推送到 Central。想到 SpringSource、Atlassian 和 Oracle (java.net)。

原型是依赖项，就像项目依赖项/插件一样，因此您可能需要将 JBoss 存储库添加到您的 pom.xml 或 settings.xml 以使原型工作。请参阅上面的链接以了解如何执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T00:08:15.613

我想到了！noahz 的回答有所帮助，但不是完整的解决方案。我还是会接受他的回答。在 settings.xml 中将 Atlassion 存储库替换为 Jboss maven 存储库后，我仍然看到“BUILD FAILURE”错误，说它找不到richfaces 工件。Maven 仍在寻找中央存储库，而不是 Atlassian 存储库。因此，经过一些研究发现可以用标签覆盖中央回购。按照这个链接：http://maven.apache.org/guides/mini/guide-mirror-settings.html。

现在构建成功。

# android - Action Bar Sherlock 已弃用方法

> ID：12655607
> 
> 赞同：0
> 
> 时间：2012-09-29T19:02:39.733
> 
> 标签：android, eclipse, actionbarsherlock

我下载了 ActionBarSherlock 版本 4.1.0.0，并在我的 Win7 java 1.6 update 24 机器上将 Android 项目库添加​​到 Eclipse 4.2 中。我在 Project | 中使用了 Android 4.1 的 Eclipse 项目构建目标。属性 | 项目构建目标。我想将 ActionBar 功能合并到具有 minSdkVersion="7" 的现有应用程序中。我注意到 ActionBarSherlock 库中的代码似乎有一些不推荐使用的方法，并且出现错误：

示例 1：ActionBarContainer.java、ActionBarContextView.java、ScrollingTabContainerView.java - 使用 setBackgroundDrawable - 不推荐使用 View 类型的方法 setBackgroundDrawable(Drawable)

```
public ActionBarContainer(Context context, AttributeSet attrs) {
    super(context, attrs);

    setBackgroundDrawable(null);

    TypedArray a = context.obtainStyledAttributes(attrs,
            R.styleable.SherlockActionBar);
    mBackground = a.getDrawable(R.styleable.SherlockActionBar_background);
    mStackedBackground = a.getDrawable(
            R.styleable.SherlockActionBar_backgroundStacked);

    if (getId() == R.id.abs__split_action_bar) {
        mIsSplit = true;
        mSplitBackground = a.getDrawable(
                R.styleable.SherlockActionBar_backgroundSplit);
    }
    a.recycle();

    setWillNotDraw(mIsSplit ? mSplitBackground == null :
            mBackground == null && mStackedBackground == null);
} 
```

快速修复显示为 ActionBarContainer 的 Add @SupressWarnings 'deprecation'

示例 2：IcsProgressBar.java 使用显示为已弃用的 animationResolution，与上述相同的快速修复

```
private static final int[] ProgressBar = new int[] {
    ...
    android.R.attr.animationResolution 
```

另外，我在 ActivityChooserView.java 中有一个错误：

```
private static class SetActivated {
    public static void invoke(View view, boolean activated) {
        view.setActivated(activated);
    }
} 
```

SetActivated 出现错误 - 调用需要 API 11（当前最小值为 7）。根据清单，这是有道理的：

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="15"/> 
```

API 7 不应该没问题吗，因为 Action Bar Sherlock 应该在 Andriod 2.x 上工作？其他人是否经历过这种情况，如果有，建议采取什么措施？抑制/忽略弃用？SetActivated 上的错误怎么办？我查看了自述文件并进行了一些网络搜索，但没有对此提出任何建议。感谢您的任何建议。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T19:23:03.063

没关系。该代码与 2.x**兼容**，甚至**从 4.x 开始**不推荐使用某些方法，它们仍然存在。这也不意味着在 4.x 上将使用这些已弃用的方法。源是 2.x-4.x 所以没有其他方法（更不用说反射，但这会损害性能，现在没有必要）。所以忽略这一点是安全的。关闭某些文件的折旧可能会更好，但它不存在。所以别担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T09:04:44.280

这并没有真正回答问题，但是当我必须拥有 minSdkVersion 9 并且我想要拥有 ActionBarSherlock 但我遇到了与 actionBar 需要 minSdkVersion 11 相同的错误时，我遇到了同样的问题。

显然在 ADT 21.1 中，您创建了一个 values-v11/styles.xml 并将 actionBar 放在那里。

[https://code.google.com/p/android/issues/detail?id=48283](https://code.google.com/p/android/issues/detail?id=48283)

# iphone - iOS 上的实时视频清理

> ID：12655612
> 
> 赞同：0
> 
> 时间：2012-09-29T19:03:02.287
> 
> 标签：iphone, objective-c, ios, ipad, video

Media Foundation 中的标准电影播放器​​似乎不支持非常流畅的擦洗。我想让它在您将手指滑过栏时不断刷新显示的视频，而不是像默认情况下那样每隔几秒跳一次。起初我认为默认控件可能内置了某种延迟，但使用我自己的滑块设置播放时间并没有帮助。有任何想法吗？

编辑：我还在试验，看起来可能的擦洗起点之间有一个固定的时间间隔。也许有一些方法可以减少间隔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-03T12:09:14.280

这对我有用。我从幻灯片更改的视频资产中抓取一帧。请参阅下面的代码。它从我当前的项目中删除，可能包含一些错误，但你会明白的。虽然希望没问题，但它在 Swift 1 中。

```
var urlVideo :NSURL = NSURL()
var vidLength :CMTime = CMTime()
var durInSeconds: Float = 0.00
var timescale:CMTimeScale = CMTimeScale()
var videoInfo:NSDictionary = NSDictionary()
var chosePosSlider:UISlider = UISlider()

@IBOutlet weak var imgCont: UIImageView!

func generateThumnail(url : NSURL, fromTime:Float64) -> UIImage {

    var asset :AVAsset = AVAsset.assetWithURL(url) as! AVAsset
    var assetImgGenerate : AVAssetImageGenerator = AVAssetImageGenerator(asset: asset)

    assetImgGenerate.appliesPreferredTrackTransform = true
    assetImgGenerate.requestedTimeToleranceAfter = kCMTimeZero;
    assetImgGenerate.requestedTimeToleranceBefore = kCMTimeZero;

    var error       : NSError? = nil
    var time        : CMTime = CMTimeMakeWithSeconds(fromTime, timescale)
    var img         : CGImageRef = assetImgGenerate.copyCGImageAtTime(time, actualTime: nil, error: &error)
    var frameImg    : UIImage = UIImage(CGImage: img)!

    return frameImg

}

func sliderValueDidChange(sender:UISlider!) {

    var newTime:Float = durInSeconds * sender.value
    setFrame(newTime)

}

func setFrame(pos:Float) {
    imgCont.image = generateThumnail(urlVideo, fromTime: Float64(pos))
}

func imagePickerController(picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [NSObject : AnyObject]) {

    self.dismissViewControllerAnimated(true, completion: nil)

    videoInfo = info as NSDictionary
    urlVideo = videoInfo.objectForKey(UIImagePickerControllerMediaURL) as! NSURL

    var asset :AVAsset = AVAsset.assetWithURL(urlVideo) as! AVAsset

    vidLength = asset.duration
    durInSeconds = Float(CMTimeGetSeconds(vidLength))
    timescale = vidLength.timescale

    chosePosSlider = UISlider(frame:CGRectMake(20, 450, 340, 20))
    chosePosSlider.minimumValue = 0
    chosePosSlider.maximumValue = 1
    chosePosSlider.continuous = true
    chosePosSlider.tintColor = UIColor.greenColor()
    chosePosSlider.value = 0
    chosePosSlider.addTarget(self, action: "sliderValueDidChange:", forControlEvents: .ValueChanged)
    self.view.addSubview(chosePosSlider)

    setFrame(0.0)

} 
```

# objective-c - 如何确定代码是在命令行工具中还是在 GUI 应用程序中运行？

> ID：12655617
> 
> 赞同：1
> 
> 时间：2012-09-29T19:03:46.493
> 
> 标签：objective-c, foundation

我正在编写一个带有两个目标的 Mac 应用程序——一个常规的 Cocoa GUI 和一个 Foundation 命令行工具。除了 GUI 之外，它们做的事情非常相似，所以我在两者之间共享大部分代码。

我想根据正在运行的目标做一些稍微不同的事情。我可以想到很多方法来做到这一点（#define pch 中的某些内容，检查 GUI 定义是否存在......）。我很好奇是否有标准或推荐的方法来做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:59:01.500

我建议将代码分为三部分：GUI 应用程序、命令行工具和它们都链接的库，它们都可以执行实际工作。然后，您可以在库中使用 API 进行配置，并让命令行工具和应用程序根据需要以不同方式使用 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T00:02:38.727

面向对象编程中有一种职责分离的标准做法：[模型视图控制器](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。当您遵循这种模式时，您可能不需要知道您的代码是在命令行环境还是图形用户界面环境中运行。如果您认为您有需要区分的情况，请描述情况。

即使您需要区分这两种情况，您也应该在每个可执行文件中拥有一些可以作为参数传入的独特属性。例如，假设您要记录屏幕大小。对于基础命令行工具，您可能希望屏幕尺寸为固定宽度字符数的 X/Y 尺寸（例如 80x25），但在 GUI 中，您需要像素数（例如 1280x1024）。以这种期望创建您的界面，例如：

```
- (CGSize)screenSizeForAppContext:(int)context
{
    // You could define 0 to mean command-line tool, 1 to mean GUI app
    if (0 == context) {
        // return screen size by characters
    } else if (1 == context) {
        // return screen size by pixels
    }
    return CGSizeZero;
} 
```

# c++ - Installing LibTiff to Visual Studio 2010

> ID：12655623
> 
> 赞同：2
> 
> 时间：2012-09-29T19:04:51.023
> 
> 标签：c++, visual-studio-2010, libtiff

> **Possible Duplicate:**
> [Using LibTiff in Visual Studio 2010](https://stackoverflow.com/questions/4647791/using-libtiff-in-visual-studio-2010)

I have been trying to work with [libtiff](http://gnuwin32.sourceforge.net/install.html) library but I couldnt get it working. I looked up the installation notes but still I couldn't manage to build it. I used setup but since it fails to find lots of header files when I try to use it. Is there any step by step guide that you could recommend explaining where to put source files or how to include? I am searching and trying for hours, still couldnt find anything.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T21:23:46.253

The GnuWin32 page you link to seems to be mostly about building LibTIFF with GCC (CygWin or Mingw).

There is a section on LibTIFF home page about [Building the Software under Windows 95/98/NT/2000 with MS VC++](http://www.remotesensing.org/libtiff/build.html#PC) :

* * *

With Microsoft Visual C++ installed, and properly configured for commandline use (you will likely need to source VCVARS32.BAT in AUTOEXEC.bAT or somewhere similar) you should be able to use the provided makefile.vc.

The source package is delivered using Unix line termination conventions, which work with MSVC but do not work with Windows 'notepad'. If you use unzip from the Info-Zip package, you can extract the files using Windows normal line termination conventions with a command similar to:

```
 unzip -aa -a tiff-4.0.0.zip 
```

By default libtiff expects that a pre-built zlib and jpeg library are provided by the user. If this is not the case, then you may edit libtiff\tiffconf.h using a text editor (e.g. notepad) and comment out the entries for JPEG_SUPPORT, PIXARLOG_SUPPORT, and ZIP_SUPPORT. Ignore the comment at the top of the file which says that it has no influence on the build, because the statement is not true for Windows. However, by taking this approach, libtiff will not be able to open some TIFF files.

To build using the provided makefile.vc you may use:

```
 C:\tiff-4.0.0> nmake /f makefile.vc clean
  C:\tiff-4.0.0> nmake /f makefile.vc 
```

or (the hard way)

```
 C:\tiff-4.0.0> cd port
  C:\tiff-4.0.0\port> nmake /f makefile.vc clean
  C:\tiff-4.0.0\port> nmake /f makefile.vc
  C:\tiff-4.0.0> cd ../libtiff
  C:\tiff-4.0.0\libtiff> nmake /f makefile.vc clean
  C:\tiff-4.0.0\libtiff> nmake /f makefile.vc
  C:\tiff-4.0.0\libtiff> cd ..\tools
  C:\tiff-4.0.0\tools> nmake /f makefile.vc clean
  C:\tiff-4.0.0\tools> nmake /f makefile.vc 
```

This will build the library file libtiff\libtiff\libtiff.lib. This can be used in Win32 programs. You may want to adjust the build options before start compiling. All parameters contained in the nmake.opt file.This is a plain text file you can open with your favorite text editor.

The makefile also builds a DLL (libtiff.dll) with an associated import library (libtiff_i.lib). Any builds using libtiff will need to include the LIBTIFF\LIBTIFF directory in the include path.

The libtiff\tools\makefile.vc should build .exe's for all the standard TIFF tool programs.

* * *

# .htaccess - 陷入了一个非常基本的 .htaccess 重写

> ID：12655624
> 
> 赞同：1
> 
> 时间：2012-09-29T19:04:52.990
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

```
<h1><a href="profile.php?id=' . $id . '" target="_self">' . $name. '</a></h1> 
```

以上是指向我的 profile1.php 文件的参考。该文件称为 index.php 。它目前显示的网址是这样的：

[http://www.domain.com/interact/profile1.php?id=36](http://www.domain.com/interact/profile1.php?id=36)

我已经尝试实现 .htaccess 文件来重写 url。我尝试了很多组合，其中大多数都给出了 500 错误，有些没有重写 url。这是我使用的 .htaccess 文件，它不会更改 url。

我希望网址看起来像[http://www.domain.com/interact/profile/36](http://www.domain.com/interact/profile/36)

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ profile1.php/$1 [QSA,L]
</IfModule> 
```

我知道这是一个非常基本的问题，但我似乎坚持并阅读了基本教程，但无法正确实施。

文件 index.php 、profile1.php 和 .htaccess 位于名为 interact 的文件夹中。

告诉我 php 或 .htaccess 文件所需的任何更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:36:54.123

> 它目前显示的网址是这样的：**`http://www.domain.com/interact/profile1.php?id=36`**
> 
> ...
> 
> 我希望网址看起来像**`http://www.domain.com/interact/profile/36`**

## 第1步：

更改您的内容以具有如下链接：

```
<h1><a href="profile/' . $id . '" target="_self">' . $name. '</a></h1> 
```

这样，当您单击链接时，将出现在 URL 地址栏中的 URL 将如下所示：**`http://www.domain.com/interact/profile/36`**

## 第2步：

然后您需要使用这些规则在内部将其改回：

```
RewriteEngine On
RewriteBase /interact/
RewriteRule ^profile/([0-9]*) profile1.php?id=$1 [L,QSA] 
```

为了将任何外部链接（例如谷歌索引机器人）指向新的 URL，您还需要添加这些：

```
RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /interact/profile1\.php\?id=([0-9]*)
RewriteRule ^ http://www.domain.com/interact/profile/%2 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T19:16:47.957

试试这个

```
 RewriteRule ^interact/profile1.php/(.*)$ interact/profile1.php?id=$1 [L] 
```

我不知道 QSA 修饰符是做什么的，所以我将其删除。如果您知道什么，请使用它）

# javascript - Javascript链接自动嵌入正则表达式

> ID：12655631
> 
> 赞同：0
> 
> 时间：2012-09-29T19:06:02.523
> 
> 标签：javascript, regex, url

我在javascript中的这个正则表达式有一些麻烦。相同的正则表达式在 PHP 中有效，但在 JavaScript 中会出现此错误：*“无效的正则表达式： (?) 之后无法识别的字符*。我的正则表达式是：

```
text = text.replace(/(?<!\=\")http([A-Za-z0-9:\/\.\+\?\%\@\!\#\&_-]+)/g,
    '<a href="http$1" target="_blank" rel="nofollow">http$1</a> '); 
```

问题出在第一部分 ( `?< !\=\"`) 但我不知道如何解决它，因为它是 PHP 或 C 的普通正则表达式。

有这种结构的类似物吗？我需要`"`在“http”之前禁止符号（双引号），以防止 html 元素（如`<img>`.

我正在编辑问题，因为符号`<`加上`!`在其后显示文本时出错。（那，也可能引发错误）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T21:54:43.943

我建议不要对这个问题使用正则表达式。正则表达式不打算与 XML 一起使用，因此它们最终会失败。您可以使用以下内容来完成*自动链接*功能 (jQuery)：

```
$('#text').contents().filter(function() {
    return this.nodeType == 3;
}).each(function(i, t){
    $(t).replaceWith(t.nodeValue.replace(/(http:\/\/[\S]+)/g,
       '<a href="$1" target="_blank" rel="nofollow"><b>$1</b></a>'));
}); 
```

此正则表达式在文本节点上运行，因此可以保证您不会找到任何像`<img>`. [这](http://jsfiddle.net/S7t6Q/)是一个现场小提琴。

请注意，此代码不适*用于*分层复杂的元素，因为`.contents()`只返回第一级子元素。如果合适，您可能需要使用[更复杂的解决方案](http://james.padolsey.com/javascript/replacing-text-in-the-dom-its-not-that-simple/)。

然而，使用 XML 概念（节点、元素、文本节点）**是**解决问题的方法，因此您将拥有快速、有效且健壮的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T20:46:47.787

在上面的示例中（包括添加 ）：

```
var text = 'something bla bla bla like this domain.com/blabla/bla.php or more. <img src="img.com" />' 
```

这对你有用：

```
var newText = text.replace(/([^ ]*\.com\/[^ ]*)/g,'<a href="http://$1"; target="_blank" rel="nofollow">$1</a>'); 
```

并输出：

```
something bla bla bla like this <a href="http://domain.com/blabla/bla.php"; target="_blank" rel="nofollow">domain.com/blabla/bla.php</a> or more. <a img src="img.com" /> 
```

基本上，它通过任何不是前面的空格`.com/`加上后面的任何不是空格来识别 url。它不会抓住`<img src="img.com" />`.`.com"`

如果您只有 .com 域，这将起作用，如果您有 .net、.org 等，那么您必须将它们添加为要检查的内容。

# c# - 如何从 Compact Edition SQL 中获取选定条目的计数？

> ID：12655632
> 
> 赞同：0
> 
> 时间：2012-09-29T19:06:02.967
> 
> 标签：c#, sql-server-ce

有以下代码：

```
private void FormViewing_Load(object sender, EventArgs e)
{
    OpenConnection();
    FillFields();
}

private void OpenConnection()
{
    connectionString = string.Format("DataSource=\"{0}\"; Password=\"{1}\"", dbPath, Constants.DB_PASSWORD);
    connection = new SqlCeConnection(connectionString);
    connection.Open();
}

private void FillFields()
{
    string sql = string.Format("SELECT COUNT(*) FROM {0})", 
        Constants.TABLE_NAME);
    SqlCeCommand selectCommand = new SqlCeCommand(sql, connection);
    try
    {
        Console.WriteLine(selectCommand.ExecuteScalar());
    }
    catch (Exception exeption)
    {
        this.Text = exeption.Message;
    }
} 
```

我需要计算条目数，但出现异常：

> *解析查询时出错*

我不明白我犯了什么错误。请描述一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T19:08:49.217

它可能是正确的括号“）”在：

```
string sql = string.Format("SELECT COUNT(*) FROM {0})" 
```

# javascript - 如何在字符串上使用 eval() 获取对象值

> ID：12655633
> 
> 赞同：0
> 
> 时间：2012-09-29T19:06:13.973
> 
> 标签：javascript, json, object

我正在玩 wikipedia json，所以……我有这个对象：

```
Object {query: Object}
query: Object
    pages: Object
        869994: Object
            ns: 0
            pageid: 869994
            revisions: Array[1]
            title // <- I need you baby 
```

使用 id 检索（在本例中为 869994）。现在我想检索标题，所以我应该使用

```
 $.getJSON(myIdUrl, function(data) {

    var obj = 'data.query.pages.' + id + '.title';

    console.log(obj); // it prints data.query.pages.869994.title should be right..

    var title = eval(obj); // now I want to assign obj title value to my variable

    // something else…      
}); 
```

我收到一个错误，“SyntaxError: Unexpected number '.869994'”...</p>

我想我误解了 eval() 函数，或者只是弄错了检索 obj 数据的路径……

建议？谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T19:07:28.013

改变这个：

```
var obj = 'data.query.pages.' + id + '.title'; 
```

对此：

```
var obj = 'data.query.pages["' + id + '"].title'; 
```

原因是解析器混淆了；当您取消引用一个对象时，它需要一个标识符，而不是文字数字。

```
var x = {};
x.5 = "test"; // <- notice this seems very unnatural 
```

# java - MD5 检查验证远程 Minecraft 客户端的完整性

> ID：12655638
> 
> 赞同：-3
> 
> 时间：2012-09-29T19:06:40.167
> 
> 标签：java, md5, minecraft, bukkit

我正在寻找一种`Minecraft.jar`使用 MD5 检查客户端文件完整性的方法。我正在使用 Bukkit 工具。

我想检查服务器上允许的 MD5 哈希列表。如果哈希正确，客户端将连接到服务器，否则将被拒绝。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T22:57:51.940

您正在尝试实施客户端检查，如果不安装某些客户端模块，这是不可能的。如果您要要求所有用户都必须安装一个模组才能进入您的服务器，那么您将大大减少可能的玩家数量，很多不想安装模组，或者不想花时间去做所以。

此外，由于所有客户端模块都是 100% 受到操纵的，这是确认任何“验证”的完全不安全的方式。我强烈建议您尝试更好地定义真正的目标块是什么，然后考虑实施有助于防止您所针对的问题的服务器端模块。例如，Grief Prevention 或 LogBlock 等插件将有助于防止/撤消悲伤。因为像 NoCheatPlus 或 AntiCheat 这样的插件将有助于防止/应对快速挖掘、飞行、剪切等问题。

# android - 在离线静态图像 (jpeg) 上显示用户的当前位置 - Android

> ID：12655639
> 
> 赞同：1
> 
> 时间：2012-09-29T19:06:43.007
> 
> 标签：android, map, gps, coordinates, geo

**背景/概念：**我想创建一个可以帮助用户搜索特定事物的应用程序。比方说附近的餐馆。在这里，我想包括一张覆盖该餐厅周围 1 公里区域的离线地图（我可以很容易地拍下谷歌地图）。

**问题：**是否可以在该静态图像文件上指示当前用户位置？我有一些想法，我记下了该图像所有四个角的纬度/经度，获取用户当前位置，进行一些计算并显示当前位置..但我不确定从哪里开始以及是否已经有一个很好的优化解决方案。

如果我可以显示当前用户方向（标题），那就太棒了！

**更简洁的问题：** 我有一张 jpeg 图像（实际上是一张街道地图），我知道图像的所有四个角的纬度/经度。如何在该图像上显示当前用户位置？

*PS 该应用程序假设在没有数据连接的情况下工作，所以我无法加载谷歌地图等*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T21:59:19.283

假设用户位置是 uLat 和 uLon，地图有左上角 tlLat 和 tlLon，右下角 brLat 和 brLon。最后，地图大小是 x 和 y 像素。

```
userX = x*(uLon-tlLon)/(brLon-tlLon);
userY = y-y*(uLat-brLat)/(tlLat-brLat); 
```

这是一个近似值，仅适用于小距离（1 公里应该没问题），因为它没有考虑地球曲率。

我不确定未经授权使用谷歌地图截图是否合法。

祝你好运。

# ruby - 无法在 Windows7 上安装 json gem

> ID：12655647
> 
> 赞同：0
> 
> 时间：2012-09-29T19:08:03.507
> 
> 标签：ruby, ruby-on-rails-3, rubygems, gem

我正在运行 Windows7，并且在安装 json gem 时遇到了很大的困难。我得到的错误还没有在任何地方得到解决。我已经通过 RailsInstaller 安装了 DevKit，当我运行 gem install json 时，我收到以下错误：

```
C:\Users\Gavin>gem install json
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing json:
        ERROR: Failed to build gem native extension.

        C:/RailsInstaller/Ruby1.9.3/bin/ruby.exe extconf.rb
creating Makefile

make
Makefile:161: warning: overriding commands for target `install-so'
Makefile:160: warning: ignoring old commands for target `install-so'
Makefile:162: *** missing separator.  Stop.

Gem files will remain installed in C:/Ruby193/lib/ruby/gems/1.9.1/bin;/gems/json-1.7.5 for inspection.
Results logged to C:/Ruby193/lib/ruby/gems/1.9.1/bin;/gems/json-1.7.5/ext/json/ext/generator/gem_make.out 
```

有人知道这里可能发生什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T19:52:41.890

我想你的 devkit 文件夹在路径中？否则，请改用“gem install json_pure”试试。请参阅这篇解释为什么[http://ruby.about.com/od/tasks/a/The-Json-Gem.htm的文章](http://ruby.about.com/od/tasks/a/The-Json-Gem.htm)

# linux - 从 procfile 中删除

> ID：12655651
> 
> 赞同：1
> 
> 时间：2012-09-29T17:57:42.593
> 
> 标签：linux, kernel, proc

我的一位朋友在stackoverflow上遇到了同样的问题：

我从本教程中复制了代码：[http ://www.thegeekstuff.com/2012/04/create-proc-files/](http://www.thegeekstuff.com/2012/04/create-proc-files/)

并制作了创建我的 procfile 的模块。

我很高兴地发现我获得了一个 procfile 我可以回显“text”> proc/name_of_procfile

我也可以和猫一起阅读！！

我一直在愚弄它，现在我的 procfile 中有相当数量的值 - 每当我 cat 它按顺序遍历这些值时：

Q1.我想知道 - 我如何从 procfile 中删除值？

另外，稍后，我将尝试获得这样的行为，即每当文件读取我的 procfile 时，它​​会更改它刚刚在 proc_file 中读取的任何内容的值。

Q2。我知道这将在我的“int read_info”方法中实现，但是关于如何做到这一点的任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:49:39.497

**Q1。**

您不能在文件系统上的正常删除操作中删除这些值。如果它是可写的，你可以`echo`在 procfile 中添加一些东西。然后它取决于模块的行为如何处理这些“传入”数据。它是否会被存储或丢弃或以任何方式在内部以某种方式计算 - 模块决定。更准确地说，您放入模块的逻辑定义了处理。此示例中的模块具有非常简单的逻辑：当内核调用其`write_info`函数时，它在其内部缓冲区中存储一个字符串 - 实际上它确实将新数据与当前内容连接起来。然后它可以在内核调用它的 read_info 函数时返回这个缓冲区的内容。所以如果你这样做：

```
echo "some text">/proc/yourprocfile
echo "another text">/proc/yourprocfile 
```

然后`cat /proc/yourprocfile`会打印

```
some text
another text 
```

屏幕上。总结一下：这些文件的完整行为是`module-defined`.

**Q2。**

您几乎可以像在通常的`C`程序中那样执行此操作。有两个主要区别：

*   在内核模式下可访问的 API 是不同的。`C`一些函数与标准库中的类似函数具有相同或非常相似的名称和功能。其他函数有不同的名称，但仍类似于某些用户空间函数。然后，一些仅在内核空间中可用的特定功能。

*   您在内核空间中所做的一切都应该由您多次检查和调试`on the sheet of paper`，因为您的模块中的任何错误都可能至少导致内核核心转储（内核刚刚停止，然后您必须按下`reset`按钮重新启动系统）并可能导致数据损坏最糟糕的文件系统。

所以，我建议你设置 VirtualBox 包；用这个漂亮的工具创建一个虚拟机；在那里安装最小的 linux 版本并在安装后制作它的虚拟磁盘的快照。因此，如果出现问题，您总是可以恢复任何损坏。您无需在此处安装所有构建工具和内核源代码 - 您只需在此虚拟机上加载和测试/调试您的模块/应用程序。

But anyway, the area that you are going to touch, or, to be more correct, already touched, is very interesting one.

Good luck

# regex - 正则表达式，如何验证 html ul li

> ID：12655656
> 
> 赞同：0
> 
> 时间：2012-09-29T19:08:43.287
> 
> 标签：regex, groovy

有没有办法验证在 html 标签内有一个带有几个 li 对象的 ul（我正在使用 groovy）。我需要它来检查 html 是否在单元测试中生成了它的有效性。

我想 ：

*   提取 li 元素的数量及其数据
*   验证是否在指定类的指定内部，该 div 内部可能是不同的 html 标签，但我不关心它们

示例文本： `<div class="example">...<ul><li>Element1</li><li>Element2</li><ul>...</div>`

我尝试了最简单的方法： `<li>.+?</li>`，这样我可以提取 li 元素，但我需要检查有效的 ul div 结构。

为什么这不起作用？`<div class='example'>.+?<ul>(<li>.+?</li>)*<ul>.+?</div>` 应该如何？

有小费吗？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T19:15:08.193

使用诸如[jsoup](http://jsoup.org/)之类的 HTML 抓取库比使用纯正则表达式更容易且有趣。由于 jsoup 是一个 java 库，因此您应该能够将它与 groovy 一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T01:11:29.553

您可以像 XML 一样解析它并计算元素：

```
def html = '''
  <html>
    <ul>
      <li>item 1</li>
      <li>item 2</li>
      <li>item 3</li>
      <li>item 4</li>
    </ul>
  </html>'''

def htmlNode = new XmlParser().parseText html

assert htmlNode.ul.li.size() == 4 
```

如果 html 没有正确关闭标签和东西，你可以使用像[NekoHTML](http://nekohtml.sourceforge.net/)这样的库来规范化 HTML

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T03:01:02.327

使用[jsoup](http://jsoup.org/)，考虑这个测试（如下）。

笔记：

*   它不使用正则表达式，但根据其他答案，这是一个坏主意。
*   该`verifyHtml()`方法接受 HTML 片段。

例子：

```
import groovy.util.*
import org.jsoup.*
import org.jsoup.nodes.* 
import org.jsoup.select.* 

class HtmlTester extends GroovyTestCase {
    // returns true if fragment has:
    // <div class='list'> <ul> <li> ... </li> </ul> </div>
    def verifyHtml(String htmlFragment) {
        Document doc = Jsoup.parse(htmlFragment)
        Elements divs = doc.select("div.list ul li")
        boolean result = (divs.size() > 0)

        return result
    }

    void testDivNoClass() {
        def htmlDivNoClass = "<div><ul><li>list 1</li></ul></div>"        
        assertFalse verifyHtml(htmlDivNoClass)
    }

    void testDivNoUl() {
        def htmlDivNoUl = "<div class='list'></div>"        
        assertFalse verifyHtml(htmlDivNoUl)
    }

    void testDivUlNoLi() {
        def htmlDivUlNoLi = "<div class='list'><ul></ul></div>"        
        assertFalse verifyHtml(htmlDivUlNoLi)
    }

    void testWithGoodHtml() {
        def html = """
        <div class='list'>
            <ul>
                <li>list 1</li>
                <li>list 2</li>
            </ul>
        </div>
        """    
        assertTrue verifyHtml(html)
    }    
} 
```

# c# - 在托管环境中重新解释没有接口/装箱的 struct-emulator

> ID：12655660
> 
> 赞同：0
> 
> 时间：2012-09-29T19:08:59.997
> 
> 标签：c#, .net, types, interface, casting

**我有一个旨在模拟（不可派生）结构并添加功能（事件）的类**
它具有完全相同的公共接口，但有一些用于突变事件的自定义内部代码。
我需要将所述类传递给一个期望我的类模拟的结构的函数，但我需要避免装箱/拆箱，因为它太慢了。

**如果模拟结构不受我的控制并且不是从接口派生的，我如何让所述函数接受我的类？** 我的班级具有完全相同的公共功能/成员/语法。

* * *

**具体示例：**

**XNA`GraphicsDevice.DrawUserPrimitives`函数要求一个`IVertexType`'s 数组。**
有时不得不调用 List.ToArray() 似乎是一种浪费，从而制作一个完整的副本，只是因为一个函数特别需要 System.Array 类型的输入。List 具有与 Array 相同的语法和功能。如果函数要接受输入类，则不会有任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:40:14.260

为什么不能实现 IVertexType 并使用数组 IVertexType[]？如果有实现这一点的结构，那么您可以通过包装结构并返回结构值来组合您的实现。

# android - 使用 Facebook Open Graph 缺少访问令牌

> ID：12655662
> 
> 赞同：2
> 
> 时间：2012-09-29T19:09:20.293
> 
> 标签：android, facebook-graph-api

我想在 Android 上使用 Facebook SDK 使用 Open Graph API 发送 Like 状态。此处描述：[https](https://developers.facebook.com/docs/opengraph/actions/builtin/likes/)
://developers.facebook.com/docs/opengraph/actions/builtin/likes/从 SDK 我使用 SSO 获得了 access_token（具有 publish_actions 权限）。我已经在 Facebook Dev Account 上注册了我的应用程序，所以我有我的 app_id。
现在我想使用 Open Graph API 在我的墙上发送 Like 状态。所以我用 HttpURLConnection 和 setRequestMethod 用 access_token、app_id 和对象头（使用 setRequestProperty()）调用[https://graph.facebook.com/MY_USER_ID/og.likes到 POST。](https://graph.facebook.com/MY_USER_ID/og.likes)

```
HttpURLConnection conn;
conn.setRequestMethod("POST");
conn.setDoOutput(true);
conn.setRequestProperty("object", "someURL");
conn.setRequestProperty("app_id", "myID");
conn.setRequestProperty("access_token", "myToken");
conn.setRequestProperty("Content-Length", "" + postMessageInBytes.length); 
```

我总是得到响应 400 Bad Request

```
 {"error":{"message":"An access token is required to request this resource.","type":"OAuthException","code":104}} 
```

当我使用 Graph API Explorer (developers.facebook.com/tools/explorer/) 时，一切正常，访问令牌没有问题。
当我调试我的访问令牌时，一切看起来都很好（从另一种语言翻译）：

```
ID app: my app ID/name
ID user: user which I used to login
Issued: 1348929549 (yesterday)
Valid until: 1354113549 (in about 2 months)
Valid:  True
Origin: Mobile Web Faceweb
Permission: publish_actions user_status 
```

所以问题是，访问令牌的问题在哪里？
感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:09:01.233

我不知道问题到底出在哪里，但我开始使用 AsyncFacebookRunner，它是 Facebook SDK 的一部分，现在一切正常。正如我从 AsyncFacebookRunner 的源代码中看到的那样，同样的事情做起来有点不同。

编辑：对 Like 操作的简单请求

```
Bundle msgParams = new Bundle();
msgParams.putString("object", mUrl);
Request request = new Request(Session.getActiveSession(), "me/og.likes", msgParams, HttpMethod.POST,
                likeCallback);
RequestAsyncTask task = new RequestAsyncTask(request);
task.execute(); 
```

# javascript - 如果用户不执行任何活动，如何通过 jquery 显示 div

> ID：12655664
> 
> 赞同：3
> 
> 时间：2012-09-29T19:09:33.053
> 
> 标签：javascript, jquery, html, css

如果用户在 20 秒内不执行任何活动，则使用 jquery 的 html 页面遇到问题想要显示一个 div。我可以通过无法为其设置时间来使用 jquery 显示和隐藏它代码：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#VisitWidget").hide();
        $("#VisitWidget").show();`
        $('#BtnBook').click(function () {
            $("#VisitWidget").slideToggle();
        });
    }); 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T19:12:59.270

这将等待鼠标移动活动，如果 20 秒过去，它将显示您的 div。

```
var mouseTimeout;

$(document).on('mousemove', function (e) {
    clearTimout(mouseTimeout);

    mouseTimeout = setTimeout(
        function(){
        $("#VisitWidget").slideToggle(); 
    },
    20000); // 20 seconds
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T19:16:23.913

试试这个

```
<script type = "text/javascript" >
 $(document).ready(function() {
    setInterval(function() {
        if ($(document).data('events')) {
            $("#VisitWidget").show();
        }
        else {
            $("#VisitWidget").hide();
        }
    }, 2000);
}); 
< /script> 
```

//

```
$(document).data('events') will check if there are any events on the page.. 
```

# ajax - 从 spring 控制器返回 ArrayList 以进行 ajax 调用并在第二个下拉列表中呈现

> ID：12655666
> 
> 赞同：1
> 
> 时间：2012-09-29T19:09:46.013
> 
> 标签：ajax, json, spring, jsp

我有一个带有 3 个地图的 spring bean，所有这些地图都将被增量填充。第一张地图是物品类别列表，第二张地图是产品列表，第三张地图是物品类型列表的爱好

所有的地图都映射到 JSP 上。加载页面时，仅在第一个地图的 onchange 事件上填充第一个地图，我需要在 bean 中填充第二个地图，类似地，在第二个地图的 onchange 事件上，我需要在 bean 中填充第三个地图。

有没有办法使用 Ajax 做到这一点？

**我需要一些代码示例来说明如何在第二个和第三个下拉列表中呈现 JSON 响应。**

澄清：@Donal：我有一个简单的 JSP 页面，其中有 3 个下拉菜单，对应于存储在我的 commandBean 中的 3 个地图。因此，当页面第一次加载时，只会填充第一个地图，因此会填充第一个下拉列表。现在，每当用户从第一个下拉列表中选择任何内容时，我都需要将相同的 commandbean 与第一个下拉列表的值一起发送回来，并获取第二个地图的值，从而获取第二个下拉列表的值，以此类推第三个下拉列表的值。对于每个下拉列表，我有 3 个地图和 3 个变量用于存储所选值。现在我想了解这是否可以使用 Ajax。我希望这能澄清你需要知道的一切。谢谢

# jquery - 如何防止 mouseenter/mouseleave 事件动画“交叉”？

> ID：12655673
> 
> 赞同：2
> 
> 时间：2012-09-29T19:11:03.273
> 
> 标签：jquery, delay, mouseenter, mouseleave

目前我有以下脚本支持动态 div 内容：

```
$("a.mbl").click(function() {

    var mblid = $(this).attr("id");

    $("#mid-box-left").fadeOut(250, function() {
        $("#mid-box-left").html($("#mbl" + mblid).html())
        .hide()
        .fadeIn(250, function () {
            $('#mid-box-left')

            $("#mid-box").on("mouseenter", "a.testbox", function() {

                var tbid = $(this).attr("id");

                $("#mid-box-right").fadeOut(250, function() {
                    $("#mbr" + tbid).css("display", "block")
                    .hide()
                    .fadeIn(250, function () {
                        $("#mbr" + tbid)
                    });
                });
            });

            $("#mid-box").on("mouseleave", "a.testbox", function() {

                var tbid = $(this).attr("id");

                $("#mbr" + tbid).fadeOut(250, function() {
                    $("#mbr" + tbid).css("display", "none");
                    $("#mid-box-right").fadeIn(250);
                });
            });
        });
    });
    return false;
}) 
```

该功能允许用户从徽标块中的一系列徽标中进行选择，然后在徽标旁边显示特定的 div 内容。然后，用户将鼠标悬停在该 div 内容上，隐藏的 div 会在徽标块的顶部淡入。当他们离开 div 时，隐藏的 div 会淡出，而 logo 会重新出现。

我遇到的问题是，当用户将鼠标移出和移入 a.testbox 区域时，两个动画似乎发生冲突，导致隐藏的 div 内容和徽标块同时出现。

如果用户“太快”地将鼠标移出和移入相关的 div，是否有任何方法可以防止触发过渡动画，或者可能是另一种防止我看到的这种重叠的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:13:36.143

您可以使用`is(':animated')`对要设置动画的元素进行检查，以查看其当前是否正在设置动画。如果检查返回，您需要触发动画`false`。

# java - 如何标记未存储的东西

> ID：12655676
> 
> 赞同：-1
> 
> 时间：2012-09-29T19:11:28.783
> 
> 标签：java, siena

在 Siena 中是用于 Java 的持久性 API，如何注释字段未持久化？

见[https://github.com/mandubian/siena/wiki/Manuals](https://github.com/mandubian/siena/wiki/Manuals)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T19:23:27.630

根据[docs.oracle.com Java Tutorial on Bean Persistence](http://docs.oracle.com/javase/tutorial/javabeans/advanced/persistence.html) ...

> 要从 Serializable 对象中的序列化中排除字段，请使用瞬态修饰符标记字段。
> 
> ```
> transient int status; 
> ```
> 
> 默认序列化不会序列化瞬态和静态字段。

...所以我不认为您对此进行了注释，但是如果您这样做了，我敢打赌它是带有[`Transient`注释](http://download.java.net/jdk8/docs/api/java/beans/Transient.html)的。

# resque - Resque在队列中查找作业的位置

> ID：12655677
> 
> 赞同：1
> 
> 时间：2012-09-29T19:11:38.940
> 
> 标签：resque

我们想使用 resque 来排队一堆作业，并由工人处理它们。当作业等待处理时，我们想知道它们在队列中的位置（作为它们必须等待多长时间的指标）。我们如何在队列中找到作业的位置？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:50:23.673

假设您的问题是在使用 resque 队列系统（您没有提到您正在使用的技术堆栈）。

您可以使用[resque-status](https://github.com/quirkey/resque-status) 对提供简单可跟踪作业的 resque 队列系统的扩展。

resque-status 提供了一组简单的类，这些类扩展了 resque 的默认功能（使用 0% 的猴子补丁），为应用程序提供了一种跟踪特定作业实例及其状态的方法。它通过为作业实例提供 UUID 并允许作业实例在其迭代中报告其状态来实现这一点。

# python - 在谷歌应用引擎上动态运行python代码

> ID：12655678
> 
> 赞同：0
> 
> 时间：2012-09-29T19:11:40.210
> 
> 标签：python, google-app-engine, dynamic

我试图能够动态运行 python 代码，变量能够传递给代码。在将我的项目添加到谷歌应用引擎环境之前，我能够在我的计算机上执行此操作（因为我可以访问所有文件，但现在，使用谷歌应用引擎，我不能这样做。

我正在努力寻找解决这个问题的方法。它不需要太花哨，只需发送变量并取出 html，以及能够将客户端（关键部分）添加到所使用的任何数据库方法的脚本。

**编辑：** 好吧，基本上我所说的动态是为了让我可以导入（或者这就是我在测试原型时在 IDLE 中所做的，解决方案可能不会被称为导入）一个 python 脚本，其中存储了库的名称一个变量，以及将要添加的未知数量的变量。我让它在空闲时工作，但现在我需要让它在谷歌应用引擎环境中工作，人们也需要能够上传脚本（这是级联成更多问题的主要问题）

**编辑：** 当我说我设法让它在我的本地机器上工作时，我的意思是我能够手动将脚本拖放到与我的主脚本相同的目录中。该脚本稍后将在必要时导入并执行脚本。我能够使它与以下代码一起使用：

```
#calling function
mod = __import__('actions.'+folder+'.'+FILE)
VAR = getattr(getattr(mod, folder), FILE)
response = VAR.Main()
print response 
```

这段代码在我的笔记本电脑和谷歌应用引擎环境中都有效，*但是*当我尝试向目录添加更多脚本时，事情就会出现问题。在我的笔记本电脑上，我可以通过一种或另一种方式移动文件，因为我可以完全访问文件目录。在 Google App 引擎上，我无法将文件上传到其余 python 脚本的同一目录或子目录。所以基本上，当试图设计一种允许更多代码进入系统的方法时（在我的例子中，添加更多“插件”），问题就出现了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T01:22:42.113

答案是 exec 语句（也称为 exec() 函数）或 eval() 函数。请参阅[http://docs.python.org/reference/simple_stmts.html#the-exec-statement](http://docs.python.org/reference/simple_stmts.html#the-exec-statement)和[http://docs.python.org/library/functions.html?highlight=eval#eval](http://docs.python.org/library/functions.html?highlight=eval#eval)。它们可以从字符串执行任意 Python 代码。exec() 运行一个脚本，你会得到副作用；eval() 接受一个表达式并返回它的值。通常，您将输入作为本地命名空间中的变量传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:04:12.873

好的，所以我最终所做的是使用数据存储上传所有内容，例如插件的名称、描述、上传者和代码（现在代码只是输入到 textarea 框中）。然后，我没有像以前在我的桌面上运行所有东西时那样导入位于我的代码同一目录下的文件夹中的文件，而是使用这个小魔法将纯文本代码导入到一个模块中：

```
#Initiating Variables for use by importing functions
module_name = 'mymod'
filename = 'action_file'
source = PossibleMatches[0][1] #the source code from the best matched option

# define module_name somewhere
import types
module = types.ModuleType(module_name)

# source should the code to execute
# filename should be a pseudo-filename that the code's from
# (it doesn't actually have to exist; it's used for error messages)
code_object = compile(source, filename, 'exec')

#execute the code in the context of the module
exec code_object in module.__dict__

#Executing the 'Main' Function from the code
return module.Main() 
```

# java - java中的实时套接字

> ID：12655680
> 
> 赞同：1
> 
> 时间：2012-09-29T19:11:54.850
> 
> 标签：java, android, sockets, real-time, multiplayer

我正在尝试使用套接字为带有 java 后端的 Android 编写多人游戏，但我不知道该怎么做。

比如我要玩家。第一个玩家按下“向上”按钮，他的头像向上移动。我怎么能告诉所有其他玩家呢？

我可以发送消息，具有某些 ID 的用户将他的坐标更改为新的 X 和 Y，但我需要在他移动时每毫秒执行一次。那正确吗？

或者我可以发送消息，该用户具有某个 ID 按下了 UP 按钮，然后在该用户释放了 UP 按钮的新消息之后。使用这两个事件之间的时间差和移动速度我可以计算用户的新坐标，但在这种情况下会出现延迟问题（时间差计算不够准确）我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T19:34:29.963

您可以通过多种方式做到这一点，并且都会有您已经发现的缺点。我想没有“最好”的方法可以做到这一点。

游戏的一种常见方式是拥有一个“游戏服务器”。服务器接收来自所有客户端的输入并决定结果状态。

例如，客户端可以只传输按键，服务器会告诉他们他们的位置以及需要绘制的其他客户端的位置。客户端在本地执行相同的数学运算并在等待服务器确认时显示此状态。但这只是一个预测。

当它滞后时，您可以观察到自己在许多游戏中的位置之间跳跃，因为实际服务器计算的位置和您的预测不同步。

服务器端状态决策的另一个优点是客户端不能轻易作弊。防止每一次作弊都不是万无一失的方法。例如，瞄准机器人只是通过为他们移动鼠标来模拟完美瞄准的用户，而这基本上是不可检测的。另一方面，可以通过简单地不告诉客户当前不可见的东西来防止地图黑客/墙壁黑客（任何你可以看到你看不到的东西）。只有服务器需要知道完整状态。

服务器方法也可以在没有专用游戏服务器的情况下使用。相反，其中一个客户端将扮演服务器的角色并决定游戏状态。如果原始主机退出，该责任甚至可以在某些游戏中在客户端之间切换。不过，如果发生这种情况，顺利交接是相当棘手的。

如果没有服务器并且所有客户端都同样负责，您将不得不考虑定义哪个客户端负责验证哪个操作的模式。例如，在射手中，A 朝某个方向射击，并认为 B 还在那里，但 B 已经移动了一点，现在 A 认为“B 被击中”而 B 认为“射失”-> 要么是一次射击，要么是一个被击中的人应该决定会发生什么。

具有多个决策方的模式可能不适用于所有游戏，这是一项非常复杂的任务。不仅适用于游戏，也适用[于一般的分布式计算](http://c2.com/cgi/wiki?DistributedSharedStateConcurrency)

Java 和 Sockets 只是这里的工具。实际问题是您应该拿起笔和纸并考虑适用于您的场景的模式。

关于每毫秒的坐标：您还可以发送诸如“我将在时间 Z 的 X、Y 点”之类的消息，并且其他客户端会插入该玩家的路径，因此您不必传输每个位置。

# java - 需要删除链表中的重复节点

> ID：12655681
> 
> 赞同：-1
> 
> 时间：2012-09-29T19:12:01.627
> 
> 标签：java, list, linked-list

我正在尝试编写代码来删除单链表中的重复节点。
删除的重复项只会被删除，直到下一个节点中存储的数字发生变化。

例如，如果输入列表是`[ 0 0 0 0 1 1 0 0 0 3 3 3 1 1 0 ]`，
则输出列表是`[ 0 1 0 3 1 0 ]`。
我试图编写代码并尝试了多种方法。每次我调用该函数时，它要么返回原始链表，要么仅返回原始头部和原始尾部。
我尝试创建一个临时链接列表并将值存储在该列表中，但它没有正确返回。
我最近的尝试是在下面的代码片段中，只返回原始列表的头部和尾部。

我的问题是，我应该如何处理这段代码？我试图把它画出来并想象它，但它没有帮助。
我不是在寻找要编写的代码，只是朝着正确的方向前进。
我认为我现在拥有的代码是死胡同，我可能不得不从头开始。
开始实施此代码以获得答案的最佳方法是什么？

```
public void squish() {

    SListNode current = head;
    SListNode iterator = current.next;

    while (iterator != null){
        if (current.equals(iterator)){
            iterator = iterator.next;
        } else {
            if (current.next.equals (null)) {
                break;
            } else {
                head.next = iterator;
                current = iterator;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:58:06.747

在您当前的解决方案中，您尝试一次做两件事，跳过`n`相等的数字并重新排列您的列表。这使得解决方案比必要的复杂一些。

你可以做的是在你有一个当前节点并且当前节点后面跟着另一个节点时循环。

现在在循环中你有 2 种可能性；

*   要么 current 和 next 的值相等，在这种情况下，使 current (next) 之后的节点与当前 next 之后的节点相同。
*   或者值不相等，在这种情况下，通过将当前节点设置为其跟随节点来遍历列表。

就是这样，不需要对头部引用进行显式分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T19:46:20.600

我猜这是家庭作业，所以我不想给出完整的解决方案。

直接使用迭代器总是很棘手。您应该考虑使用所需的解决方案创建一个新列表，而不是使用单个列表。例如，示意性地...

```
 Create a new empty List for the result
 Initialize prevValue
 Loop over the values in input list
 If the value is not equal to the prevValue
   add it to the result list
   update prev value 
```

当然，如果类/作业真的希望您使用迭代器，请忽略以上...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-12T21:38:03.080

```
 public void RemoveDuplicates()
    {
        Dictionary<int, int> myDict = new Dictionary<int, int>();

        Node cur = head;

        myDict.Add(head.Data, 1);
        while (cur.Next != null)
        {
            if (myDict.ContainsKey(cur.Next.Data))
                cur.Next = cur.Next.Next;
            else
            {
                myDict.Add(cur.Next.Data, 1);
                cur = cur.Next;
            }

        }
    } 
```

# php - 如何将 $_GET 路径与 file_exists 一起使用并保持安全？

> ID：12655685
> 
> 赞同：3
> 
> 时间：2012-09-29T19:13:13.803
> 
> 标签：php, javascript, jquery, ajax, get

我有一个函数可以通过 jQuery 检查文件是否存在，该函数调用 PHP 脚本，在单击索引页面上的按钮更改某些图像时，我将使用该脚本。

jQuery函数：

```
function fileExists(path){
    $.getJSON("/ajax/fileExists.php",{ path: path },
    function (data){
        return data.path;
    });
} 
```

文件存在.php：

```
$path=$_SERVER['DOCUMENT_ROOT'].'/packs'.$_GET['path'];

if(file_exists($path)){
    echo json_encode(TRUE);
}else{
    echo json_encode(FALSE);
} 
```

我担心人们使用此脚本列出我可能不希望他们知道的服务器或文件的内容，因此我使用 DOCUMENT_ROOT 和 /packs 来尝试限制对该目录的调用，但我认为人们可以简单地在提供的路径中使用 ../ 来检查替代方案。

确保安全的最佳方法是什么，最好将其限制在 /packs 中，还有其他我应该担心的问题吗？

编辑：javascript/jQuery 中的示例调用：

```
if( fileExists('/index.php') ){
    alert('Exists');
}else{
    alert('Doesn\'t exist');
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T19:16:29.090

这就是我过去的处理方式：

```
$path = realpath($_SERVER['DOCUMENT_ROOT'].'/packs'.$_GET['path']);
if (strpos($path, $_SERVER['DOCUMENT_ROOT']) !== 0) {
    //It's looking to a path that is outside the document root
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T19:19:46.053

您可以从文件名中删除任何路径转换：

```
$path_arr = explode("/", $_GET['path']);
$path = $path_arr[count($path_arr - 1)]; 
```

这种做法是适度安全和快速的（O(1) 复杂度），但并不是最好的，因为您必须注意编码、字符替换和所有类似的东西。

但总体最佳实践（尽管速度较慢取决于您的目录大小，比方说 O(n) 复杂度）是使用 readdir() 获取 /packs 目录中所有文件的列表，然后查看提供的文件名是否为当下：

```
$handle = opendir($path=$_SERVER['DOCUMENT_ROOT'].'/packs');
while (false !== ($entry = readdir($handle))) {
  if ($entry === $_GET['path']) {
    echo json_encode(TRUE);
    return;
  }
}
echo json_encode(FALSE); 
```

# jquery - FancyBox 2.1 - 图片加载限制

> ID：12655688
> 
> 赞同：0
> 
> 时间：2012-09-29T19:13:38.623
> 
> 标签：jquery, fancybox, fancybox-2

我正在使用`$.fancybox.open(FB_obj,{some parameters})`缩略图动态加载不同大小的各种图像库（从 2 张图片到 200 张图片）。

一切都在工作和加载，但当画廊超过 60 张时，在缩略图库中我看到“空插槽”，当我点击它时，错误消息出现“无法加载图像等”，对于更大的画廊有 150 多张图片，最后 +/- 30 张永远不会加载。

有人知道为什么会这样吗？我猜可能是加载时间或者`PHP_MEMORY_LIMIT`（我有 256M，每张图片大约 150Kb）？

非常感谢你

丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:59:59.827

通过检查每个图片服务器端的存在（使用 jQuery/AJAX），我得到了预加载效果，现在无论图库大小，所有图片都可以正确显示。

无需更改任何参数

Tks JFK 用于指出预加载

# javascript - 在视图之间传递对象（闪存消息）

> ID：12655689
> 
> 赞同：14
> 
> 时间：2012-09-29T19:13:55.220
> 
> 标签：javascript, angularjs

在以下情况下传递消息的最佳方式是什么。

在 的成功场景中`$scope.p.$save`，结果包含一条消息 ( `res.message`)，我喜欢在下一个视图 ( `$location.path("/test/"+res.reply.Id)`) 中显示该消息。如果没有 AngularJS，我可以在 url 中传递它或将它保存在会话 cookie 中。但是，我想在 AngularJS 中可能有更好的方法，因为没有浏览器重定向并且状态应该可用。实现这一目标的最佳方法是什么？

在 rootScope 中设置它会在我使用浏览器后退按钮时显示它，并且消息的范围应该仅用于第一次导航到新视图。

```
function NewCtrl(Phone, $location, $rootScope, $scope) {
    $scope.p = new Phone();
    $scope.save = function () {
        $scope.p.$save(
            {},
            function (res) {
                $rootScope.message = res.message **//<-- this will cause message still set when using browser back button, etc**
                $location.path("/test/"+res.reply.Id); **//<-- Req: needs to pass the message to next view**
            }, function (res) {
            //TODO
            }
        );
    };
}
....
PhoneApp.factory('Phone', function ($resource) {
    return $resource('/api/test/:_id')
}); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-30T19:48:23.367

您可以使用在 $routeChangeSuccess 上显示 flash 的服务。

每次你设置一个 flash 消息时，将它添加到队列中，当路由改变时，从队列中取出第一个项目并将其设置为当前消息。

这是一个演示：

[http://plnkr.co/edit/3n8m1X?p=preview](http://plnkr.co/edit/3n8m1X?p=preview)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-12T09:37:17.380

我希望实现类似的功能，但实际上想要更多的咆哮式信息。

我已经更新了 Andy 上面提供的优秀 plinkr 代码，以包含一个利用[toastr](https://github.com/CodeSeven/toastr)咆哮式通知库的“pop”方法。

我的更新还允许您指定通知类型（信息、警告、成功、错误）和标题。

'pop' 方法跳过将消息添加到队列中，而是立即将其弹出到屏幕上。Andy 以前的 plinkr 的设置/获取功能基本保持不变。

你可以在这里找到我的更新：http: [//plnkr.co/edit/MY2SXG ?p=preview](http://plnkr.co/edit/MY2SXG?p=preview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T19:56:08.453

我不相信有一种方法可以默认 AngularJS。您最好的选择只是通过查询字符串传递消息（编码）。

# javascript - Jquery检查var是否是一个函数然后调用它

> ID：12655690
> 
> 赞同：3
> 
> 时间：2012-09-29T19:13:55.660
> 
> 标签：javascript, jquery

我有一个传递给插件的变量名，但该变量实际上是一个函数。我使用 jquery $.isFunction 来检查它是否是一个函数，如果是，它应该执行该函数。

但我似乎无法让它工作，我在jsfiddle中放了一些例子：http: [//jsfiddle.net/tZ6U9/8/](http://jsfiddle.net/tZ6U9/8/)

但这里有一个示例代码：

**HTML**

```
<a class="one" href="#">click</a><br />
<a class="two" href="#">click</a><br />
<a class="three" href="#">click</a><br /> 
```

**JS**

```
$(document).ready(function() {

help = function(var1) {
    alert(var1);
}

function help2(var1) {
    alert(var1);
}

$('a.one').click(function() {
    var functionName = "help";
    if ($.isFunction([functionName])) {[functionName]("hello");
    } else {
        alert("not a function");
    }

    return false;
});

$('a.two').click(function() {
    var functionName = "help";

    if ($.isFunction(functionName)) {
        functionName("hello");
    } else {
        alert("not a function");
    }
    return false;
});

$('a.three').click(function() {
    var functionName = "help2";

    if ($.isFunction(functionName)) {
        functionName("hello");
    } else {
        alert("not a function");
    }
    return false;
});

$('a.four').click(function() {
    var functionName = "help2";

    if ($.isFunction([functionName])) {[functionName]("hello");
    } else {
        alert("not a function");
    }
    return false;
});

});​ 
```

正如你所看到的，我厌倦了很多东西，但可能都是错误的......我从中获得了一些灵感：[jQuery - 使用变量作为函数名](https://stackoverflow.com/questions/9604113/jquery-use-variable-as-function-name)

**总的来说** ，我传递了一个与函数同名的变量，使用jquery检查它是否是一个函数，如果是，它应该执行该函数。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-29T19:26:16.347

如果您想通过其名称的字符串调用函数，只需使用`window`.

```
var functionName = "help";
if ($.isFunction(window[functionName])) {
    window[functionName]("hello");
} else {
    alert("not a function");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T19:27:29.983

检查[Fiddle](http://jsfiddle.net/tZ6U9/17/)以获取工作示例。

示例只有一个链接有效。类似地制作其他链接。

**编辑：第一条评论后**

**HTML**

```
<a class="one" href="#">click</a><br /> 
```

**JS**

```
var help = function(var1) {
    alert(var1);
}
$(document).ready(function() {
    $('a.one').click(function() {
        var functionName = help;
        if ($.isFunction(functionName)) {
            functionName('test');
        } else {
            alert("not a function");
        }

        return false;
    });
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T19:28:52.210

您可以使用以下内容来调用在窗口/全局范围中定义的函数，例如 function `help`：

```
if ($.isFunction(window[functionName])) {
  window[functionName]("hello");
} 
```

`help2`另一方面，由于您在闭包中定义它，因此**无法通过这种方式访问​​。**一个可能的解决方案是在处理程序*之外*`.ready()`定义函数。然后，您可以使用`window[functionName]`它来调用它：

```
var namespace = {
  help: function (var1) {
    alert(var1);
  },

  help2: function (var1) {
    alert(var1);
  }
}

$(document).ready(function() {
  var functionName = "help";
  if ($.isFunction(namespace[functionName])) {
    namespace[functionName]("hello");
  }
}); 
```

**[演示](http://jsfiddle.net/hwaaB/)**。

# c# - 试用窗口窗体应用程序

> ID：12655692
> 
> 赞同：-2
> 
> 时间：2012-09-29T19:14:09.940
> 
> 标签：c#, winforms

使用 10 次后如何关闭 Windows 窗体应用程序作为试用版？此表单不需要任何登录或注册。就在我运行程序并关闭它时，使用了 10 次后，出现一个 MessageBox 说 The form is Trial。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T19:28:16.373

这是您可以使用的示例。添加名为 LoadCount 的应用程序设置并将范围设置为用户。现在这里是如何处理负载计数的代码：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        //check load count...
        int loadCount = ApplicationSettingsDemo.Properties.Settings.Default.LoadCount;
        if (loadCount > 10)
        {
            MessageBox.Show("Trial version expired!");
            this.Close();
        }
    }

    private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
        try
        {
              ApplicationSettingsDemo.Properties.Settings.Default.LoadCount += 1;
              ApplicationSettingsDemo.Properties.Settings.Default.Save();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message,
                "Failed to save settings", 
                MessageBoxButtons.OK, 
                MessageBoxIcon.Error);
        }
    } 
```

请注意，默认情况下此设置不受保护。

# c# - GridView 不显示标题

> ID：12655697
> 
> 赞同：1
> 
> 时间：2012-09-29T19:14:30.160
> 
> 标签：c#, wpf, templates, listview, gridview

我有一个`ListView`在哪里`GridView.ColumnHeaderTemplate`：

```
<DataTemplate x:Key="HeaderTemplate">
    <TextBlock />
</DataTemplate> 
```

但是当我添加新列时，标题不会显示任何文本：

```
GridViewColumn column = new GridViewColumn();
column.Header = new TextBlock { Text = "my header" };
MyGridView.Columns.Add(column); 
```

为什么？我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T07:02:07.500

您是否忘记添加 Text 属性绑定？

```
<DataTemplate x:Key="HeaderTemplate">
    <TextBlock Text="{Binding}" />
</DataTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T08:34:43.013

为什么需要`ColumnHeaderTemplate`显式声明，因为默认情况下它是 textBlock？只需摆脱模板并将您的代码隐藏更改为此 -

```
GridViewColumn column = new GridViewColumn();
column.Header = "my header";
MyGridView.Columns.Add(column); 
```

简单`set your string to the Header`的财产。

**编辑**

如果您想使用背景和字体样式，则需要保留 textBlock。因此，按照上面的建议保留代码，即只需使用字符串设置标题并在您的 xaml 绑定文本属性中 -

```
<DataTemplate x:Key="HeaderTemplate">
    <TextBlock Text="{Binding}" Background="Red" />
</DataTemplate> 
```

# c++ - 从 1bpp 位图中读取像素 (CreateDIBSection)

> ID：12655700
> 
> 赞同：3
> 
> 时间：2012-09-29T19:15:11.877
> 
> 标签：c++, winapi

此代码适用于 32、24、16、8、4 bpp 图像。但不是 1 bpp。

```
#include <stdio.h>
#include <windows.h>

#pragma comment(lib, "user32.lib")
#pragma comment(lib, "gdi32.lib")

void GetWindowBitmapBitsAndSave(const HWND& hWnd, int nBitCount, char *szFilePath);
void EnumerateBits(LPBYTE pBits, int nBitCount, int nWidth, int nHeight);

int main(int argc, char **argv)
{   
    //GetWindowBitmapBits(HWND_DESKTOP, 32);
    //32, 24, 16, 8, 4 works fine...
    GetWindowBitmapBitsAndSave(HWND_DESKTOP, 1, "test.bmp");

    return 0;
}

void EnumerateBits(LPBYTE pBits, int nBitCount, int nWidth, int nHeight)
{
    int nPixels = nWidth * nHeight; 
    WORD wByteCount = nBitCount / 8; 
    if(wByteCount == 0)
        wByteCount = 1;
    int nBytes = nPixels * wByteCount; 

    for(int i = 0; i < nBytes; i += wByteCount) 
    { 
        int r = (int)(*(pBits+i));
        //int g = (int)(*(pBits+i+1));
        //int b = (int)(*(pBits+i+2));

        //just for test
        if(r != 0 /*&& g != 0 && b != 0*/)
            if(r != 255 /*&& g != 255 && b != 255*/)
            //printf("(%d, %d, %d)\n", r, g, b);
                    printf("%d\n", r);
    } 
}

void GetWindowBitmapBitsAndSave(const HWND& hWnd, int nBitCount, char* szFilePath)
{
    HWND hScreenWnd = hWnd;
    if(!hScreenWnd)
        hScreenWnd = HWND_DESKTOP;

    //calculate the number of color indexes in the color table
    int nColorTableEntries = -1;
    switch(nBitCount) 
    {
        case 1:
            nColorTableEntries = 2;
            break;
        case 4:
            nColorTableEntries = 16;
            break;
        case 8:
            nColorTableEntries = 256;
            break;
        case 16:
        case 24:
        case 32:
            nColorTableEntries = 0;
            break;
        default:
            nColorTableEntries = -1;
            break;
    }

    if(nColorTableEntries == -1)
    {
        printf("bad bits-per-pixel argument\n");
        return;
    }

    HDC hDC = GetDC(hScreenWnd);
    HDC hMemDC = CreateCompatibleDC(hDC);

    int nWidth = 0;
    int nHeight = 0;

    if(hScreenWnd != HWND_DESKTOP)
    {
        RECT rect;
        GetClientRect(hScreenWnd, &rect);
        nWidth = rect.right - rect.left;
        nHeight = rect.bottom - rect.top;
    }
    else
    {
        nWidth = ::GetSystemMetrics(SM_CXSCREEN);
        nHeight = ::GetSystemMetrics(SM_CYSCREEN);
    }

    HBITMAP hBMP = CreateCompatibleBitmap(hDC, nWidth, nHeight);
    SelectObject(hMemDC, hBMP);
    BitBlt(hMemDC, 0, 0, nWidth, nHeight, hDC, 0, 0, SRCCOPY);

    int nStructLength = sizeof(BITMAPINFOHEADER) + sizeof(RGBQUAD) * nColorTableEntries;
    BITMAPINFOHEADER BitmapInfoHeader;

    BitmapInfoHeader.biSize = sizeof(BITMAPINFOHEADER);
    BitmapInfoHeader.biWidth = nWidth;
    BitmapInfoHeader.biHeight = nHeight;
    BitmapInfoHeader.biPlanes = 1;
    BitmapInfoHeader.biBitCount = nBitCount;
    BitmapInfoHeader.biCompression = BI_RGB;
    BitmapInfoHeader.biXPelsPerMeter = 0;
    BitmapInfoHeader.biYPelsPerMeter = 0;
    BitmapInfoHeader.biClrUsed = nColorTableEntries;
    BitmapInfoHeader.biClrImportant = nColorTableEntries;

    DWORD dwBytes = ((DWORD) nWidth * nBitCount) / 32;
    if(((DWORD) nWidth * nBitCount) % 32) {
        dwBytes++;
    }
    dwBytes *= 4;

    DWORD dwSizeImage = dwBytes * nHeight;
    BitmapInfoHeader.biSizeImage = dwSizeImage;

    BITMAPINFO* bitmapInfo = new BITMAPINFO[sizeof(BITMAPINFO) + sizeof(RGBQUAD) * nColorTableEntries];
    bitmapInfo->bmiHeader = BitmapInfoHeader;

    if(nBitCount < 16)
    {
        for(int i = 0; i != nColorTableEntries; ++i)
        {
            bitmapInfo->bmiColors[i].rgbRed = 
                bitmapInfo->bmiColors[i].rgbGreen =
                bitmapInfo->bmiColors[i].rgbBlue = (BYTE)(i*(255/(nColorTableEntries-1)));
            bitmapInfo->bmiColors[i].rgbReserved = 0;
        }
    }

    LPBYTE lpDibBits = 0;
    HBITMAP hBitmap = ::CreateDIBSection(hMemDC, bitmapInfo, DIB_RGB_COLORS, (void**)&lpDibBits, NULL, 0);
    SelectObject(hMemDC, hBitmap);
    BitBlt(hMemDC, 0, 0, nWidth, nHeight, hDC, 0, 0, SRCCOPY);
    ReleaseDC(hScreenWnd, hDC);

    //save bitmap
    BITMAPFILEHEADER bmfh;
    bmfh.bfType = 0x4d42;  // 'BM'
    int nHeaderSize = sizeof(BITMAPINFOHEADER) + sizeof(RGBQUAD) * nColorTableEntries;
    bmfh.bfSize = 0;
    bmfh.bfReserved1 = bmfh.bfReserved2 = 0;
    bmfh.bfOffBits = sizeof(BITMAPFILEHEADER) + sizeof(BITMAPINFOHEADER) + sizeof(RGBQUAD) * nColorTableEntries;    

    FILE *pFile = 0;
    fopen_s(&pFile, szFilePath, "wb");
    if(pFile)
    {
        fwrite(&bmfh, sizeof(BITMAPFILEHEADER), 1, pFile);
        fwrite(bitmapInfo, nHeaderSize,1,pFile);
        fwrite(lpDibBits, dwSizeImage, 1, pFile);
        fclose(pFile);
    }

    EnumerateBits(lpDibBits, nBitCount, nWidth, nHeight);

    delete[]bitmapInfo;
    ::DeleteObject(hBMP);
    ::DeleteObject(hBitmap);
} 
```

第一个问题：为什么当位数为1时，除了黑白之外还有颜色？（但图像是单色的。只需在 GetWindowBitmapBitsAndSave 函数中注释 EnumerateBits 调用）。

第二个问题：如何正确计算颜色位数组的偏移量？

# php - 如何使用 curl 提交 jsf 表单

> ID：12655701
> 
> 赞同：0
> 
> 时间：2012-09-29T19:15:14.277
> 
> 标签：php, jsf, curl, jsf-2

我是 Java 和 JSF 的新手，

我正在寻找某种方式将查询词发送到[toysrus.co.uk](http://toysrus.co.uk)

我已经在 php curl 上工作过，我可以自己处理它，并且我已经编写了发送查询词的函数......

我的问题是我无法创建查询词，而且我找不到创建网址的方法，我可以在其中添加我的查询参数，以便我可以卷曲这个页面.....

有人可以指导我如何为[Toyrus.co.uk创建搜索网址](http://toysrus.co.uk)

我想要的是，我将在 URL 中添加我的参数，curl 脚本会将此请求发送到站点，我将获得搜索到的产品...

我想要类似的东西

[http://www.toysrus.co.uk/index.jsf?seach=MYTERM](http://www.toysrus.co.uk/index.jsf?seach=MYTERM)

这只是我想要的一个例子......

有人可以帮我创建上述网站的搜索 URL 吗？对JSF完全陌生，我无法做到......

另外，当我在 JSF 上搜索并尝试搜索帮助材料时，我发现 JSF 上的内容不够

感谢帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:19:28.767

您应该能够通过更改 URL 查询字符串中的搜索词来搜索该站点。

我进入主页并在搜索框中输入“认真”。这是它发给我的地址：

[http://www.toysrus.co.uk/index.jsf?fh_eds=%3f&fh_view_size=10&fh_start_index=0&fh_location=%2f%2ftrus%2fen_GB%2fcategories%3C%7btrus_trus%7d%2fitemtype%3dproduct%2f%24s%3dseriously&media=网络](http://www.toysrus.co.uk/index.jsf?fh_eds=%3f&fh_view_size=10&fh_start_index=0&fh_location=%2f%2ftrus%2fen_GB%2fcategories%3C%7btrus_trus%7d%2fitemtype%3dproduct%2f%24s%3dseriously&media=web)

看看搜索词出现在哪里？您可以将其更改为任何其他单词，它会搜索该单词。想要搜索多个词或短语？尝试在搜索框中输入它们，看看它们是如何在 URL 中编码的。如果您尝试使用它，您可能还可以删除或更改其中一些其他参数。

# python - Python 机械化错误 +

> ID：12655717
> 
> 赞同：1
> 
> 时间：2012-09-29T19:18:10.883
> 
> 标签：python, forms, mechanize, user-input

我是python新手（过去做过一些java）。我最近决定自动化一个每年大约需要 20 个小时的流程。我需要使用他们拥有的登录表单登录到供应商的网站。然后加载一个新表单，我可以从中选择一个订单，然后它加载另一个表单，我可以提交一个项目编号。然后，这会加载包含商品尺寸和每个尺寸价格的页面，我将这些信息放入电子表格中。该行具有基于尺寸数量的列，然后是价格（item、sm、med、lg、9.99、10.99、12.99）。之后返回浏览器，我点击后退按钮并将下一个项目编号加载到字段中，依此类推。我正要向你发送一堆信息，对此我深表歉意。

在做了一些研究后，我发现了一个名为 mechanize 的 Python 库，它似乎可以很容易地提交 Web 表单然后收集数据。

```
'''
Created on Sep 29, 2012

@author: Teddy
'''

from tkinter import *
import mechanize
import urllib
import logging
import sys
import http.cookiejar

def main():

br = mechanize.Browser()
cj = http.cookiejar.LWPCookieJar()
br.set_cookiejar(cj)
br.set_handle_equiv(True)
br.set_handle_gzip(True)
br.set_handle_redirect(True)
br.set_handle_referer(True)
br.set_handle_robots(False)
br.set_handle_refresh(mechanize._http.HTTPRefreshProcessor(), max_time=1)

br.open('https://*******/cgi-bin/wfos/order.exe')

# Select the login form named "login"
br.select_form(name="login")

# User credentials, this is usrname and passwords to submit to form
br.form['custno'] = '*******'
br.form['Password1'] = '*******'
br.form['Password2'] = '**********'

# Login, submits to the form
br.submit()

main() 
```

目前，当我编译这个时，我得到一个错误：

```
Traceback (most recent call last):
File "C:\EclipseWorkspaces\csse120\FOLDERNAME\src\main.py", line 9, in <module>
import mechanize
File "C:\Python32\lib\site-packages\mechanize\__init__.py", line 119, in <module>
from _version import __version__
ImportError: No module named _version 
```

我查看了 \site-packages\mechanize 文件夹，看到了一个模块名称 version.py。所以我不确定为什么我会收到这个错误。

我使用的网站会重新加载包含新内容的页面。有一些按钮可以选择您要加载的订单。

```
 <FORM NAME="orders" METHOD="POST" ACTION="https://******/cgi-bin/wfos/order.exe">
 <input type="hidden" name="form" value="continue">
 <input type="hidden" name="cs_id" value="">
 <input type="hidden" name="customer_type" value="1">
 <input type="hidden" name="customer" value="******">
 <input type="hidden" name="custno" value="******">
 <input type="hidden" name="password1" value="******">
 <input type="hidden" name="password2" value="******"> 
```

上面的东西是登录页面的帖子。下面的东西来了

```
<tr bgcolor=D3D3D3><td align=center><input name=del23558 type=checkbox></td>
<td align=center><input name=continue value=E23558 type=submit></td>
<td align=center><font size=-1>Sep 29 2012  1:19PM</font></td>
<td align=right><font size=-1>$0.00</font></td>
<td align=right><font size=-1>0</font></td></tr>
</table><P>
<input name="action" type="submit" value="Cancel Checked Orders" 
onClick="return confirm('Are you sure you want to cancel the checked orders?')"><P>
<input name="action" type="submit" value="Start a New Order"><P>
</FORM> 
```

提交订单这仍然只是？：

```
 br.select_form(name="orders")
 br.form['continue'] = 'E23558' 
```

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T20:36:28.663

根据您的错误消息，您正在尝试使用*Python* **3.2**`mechanize`安装和运行包。

 ***`mechanize`但是不支持*Python 3*，因此您应该安装*Python* **2.x**版本（可用的最新版本是[2.7.5](http://www.python.org/download/releases/2.7.5/)），在`mechanize`那里安装包，然后重试运行您的脚本。***

# android - Android：跟踪有问题的设备

> ID：12655722
> 
> 赞同：1
> 
> 时间：2012-09-29T19:19:12.820
> 
> 标签：android, android-contentprovider, audio-recording

是否有更新的列表、服务或其他方式来跟踪 Android 的“问题设备”？

例如，某些设备不支持 Android 的默认音频编码器 AMR_NB。某些设备需要带有参数的完整投影才能访问 Android 的内容提供程序。某些设备不支持“content://sms”Uri。面对所有这些随机问题，有没有办法跟踪这些需要特定修复的问题设备？

我简直不敢相信我们应该将我们的应用程序投入公共领域，然后在问题设备到达时处理它们的问题。一定有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:49:14.593

> 例如，某些设备不支持 Android 的默认音频编码器 AMR_NB。

AMR_NB 不是默认的音频编码器。[状态文档`MediaRecorder`](http://developer.android.com/reference/android/media/MediaRecorder.html#setAudioEncoder%28int%29)“如果未调用 [setAudioEncoder()]，则输出文件将不包含音轨”，因此 AMR_NB 不是`MediaRecorder`. `AudioRecord`使用 PCM。如果您有证据表明 AMR_NB 是某处的默认设置，请提供链接。

话虽如此，用于确定设备支持哪些编码器的媒体 API 在历史上一直是缺乏的。

> 某些设备需要带有参数的完整投影才能访问 Android 的内容提供程序

除非另有说明，否则您需要在`null`内容提供者的任何查询中提供非投影。投影没有参数。

> 某些设备不支持“content://sms”Uri。

该内容提供者不是 Android SDK 的一部分，因此任何尝试使用它的人都应该*期望*它不存在，或者不包含所需的数据（例如，第三方 SMS 客户端可能将他们的消息存储在他们自己的数据库中） .

考虑到所有这些，回到你原来的问题：

> 是否有更新的列表、服务或其他方式来跟踪 Android 的“问题设备”？

并不真地。毫无疑问，一些开发公司维护自己的内部列表（例如，Rovio 可能很清楚各种设备上的图形限制）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T19:20:22.803

对不起，但答案是“不”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T19:26:35.690

是的，答案是否定的。

您无法在问题设备发生之前预测它们的具体修复。

虽然您只能通过错误跟踪器（例如**ACRA ）从应用程序进行部署后分析**

此外，为了确保设备规格的某些功能，您可以查看特定型号的白皮书。

这些特定于手机型号的文档化白皮书仅适用于某些大品牌，例如： **索尼、摩托罗拉、三星。**

# php - php图像上传不创建缩略图

> ID：12655723
> 
> 赞同：0
> 
> 时间：2012-09-29T19:19:19.547
> 
> 标签：php, file-upload, thumbnails, image-uploading

嘿，我需要此代码的一些帮助，以便它上传正确大小的图像以及相应的缩略图：

```
 $file_path = $this->options['upload_dir'].$file_name;
    $new_file_path = $options['upload_dir'].$file_name;
    list($img_width, $img_height) = @getimagesize($file_path);

    if (!$img_width || !$img_height) {
        return false;
    }

    $scale = min(
        $options['max_width'] / $img_width,
        $options['max_height'] / $img_height
    );

    if ($scale > 1) {
        $scale = 1;
    }

    $new_width = 1280; //$new_width = $img_width * $scale;
    $new_height = 323; //$new_height = $img_height * $scale;        
    $new_img = @imagecreatetruecolor($new_width, $new_height);

    switch (strtolower(substr(strrchr($file_name, '.'), 1))) {
        case 'jpg':
        case 'jpeg':
            $src_img = @imagecreatefromjpeg($file_path);
            $write_image = 'imagejpeg';
            break;
        case 'gif':
            $src_img = @imagecreatefromgif($file_path);
            $write_image = 'imagegif';
            break;
        case 'png':
            $src_img = @imagecreatefrompng($file_path);
            $write_image = 'imagepng';
            break;
        default:
            $src_img = $image_method = null;
    }

    $success = $src_img && @imagecopyresampled(
        $new_img,
        $src_img,
        0, 0, 0, 0,
        $new_width,
        $new_height,
        $img_width,
        $img_height
    ) && $write_image($new_img, $options['upload_dir'] . $_GET['type'] . '.' . strtolower(substr(strrchr($file_name, '.'), 1)), 100);

    @imagedestroy($src_img);
    @imagedestroy($new_img); 
```

我试图添加这个：

```
 $success = $src_img && @imagecopyresampled(
        $new_img,
        $src_img,
        0, 0, 0, 0,
        192,
        50,
        $img_width,
        $img_height
    ) && $write_image($new_img, $options['upload_dir'] . $_GET['type'] . 'THUMB.' . strtolower(substr(strrchr($file_name, '.'), 1)), 100); 
```

但它只是将相同的图像复制两次，其高度和宽度与第一个相同：

```
Bob.jpg         800kb
BobTHUMB.jpg    800kb 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T19:30:58.297

```
$thm_img = @imagecreatetruecolor( 192, 50 );

$success = $src_img && @imagecopyresampled(
   $thm_img,
   $src_img,
   0, 0, 0, 0,
   192,
   50,
   $img_width,
   $img_height
) && $write_image($thm_img, $options['upload_dir'] . $_GET['type'] . 'THUMB.' . strtolower(substr(strrchr($file_name, '.'), 1)), 100); 
```

# c++ - 在 C++ 中通过引用流和字符调用

> ID：12655726
> 
> 赞同：0
> 
> 时间：2012-09-29T19:19:25.490
> 
> 标签：c++

我最近的家庭作业是编写一个程序来读取文本文件并输出行数、单词数和字符数。

我刚刚开始，我现在要做的就是让用户输入文件名，然后文件就会打开。这是我不工作的代码，我一定遗漏了一些明显的东西，我只是想将流和字符传递给“输入”函数。

任何指针？

```
#include <iostream>
#include <fstream>
#include <cstdlib>
using namespace std;

//Define functions.
void input(ifstream& fin, char& fileName);

int main()
{
    ifstream fin;
    char fileName[20];
    input(fin, fileName);
    return 0;
}

void input(ifstream& fin, char& fileName)
{
    cout << "Input file name: ";
    cin >> fileName;
    fin.open(fileName);

    if(fin.fail())
    {
        cout << "The file:  " << fileName << " does not open." << endl;
        exit(1);
    }
    //return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:42:20.507

这可能会让你更接近。至少过去你的编译错误，但你仍然需要做一些事情。获取参考手册和调试器。

```
#include <iostream>
#include <fstream>
#include <cstdlib>
using namespace std;

//Define functions.
void input(ifstream& fin, string& fileName);

int main()
{
    ifstream fin;
    string fileName;
    input(fin, fileName);
    return 0;
}

void input(ifstream& fin, string& fileName)
{
    cout << "Input file name: ";
    cin >> fileName;
    fin.open(fileName.c_str());

    if(fin.fail())
    {
        cout << "The file:  " << fileName << " does not open." << endl;
        exit(1);
    }
    //return;
} 
```

不是我这样做的方式，但你得找个时间学习。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T19:44:13.163

一个问题是`char&`对单个的引用`char`，而不是数组或字符串。

`std::string fileName`如果您使用, 并传递一个`string&`参数，这将工作得更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T20:22:55.753

您的`input`函数的*第二个参数*：`char& fileName`是**对 char 的引用**；而 - 您需要的是**对 20 个字符的数组的引用**

因此，将其更改为：`void input(ifstream& fin,`**`char (&fileName)[20])`**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T19:30:31.350

你的语法不正确。利用：

```
void input(ifstream *fin, char *fileName); 
```

和：

```
input(&fin, &fileName); // call 
```

在这里，您将变量的引用传递给指针 ( `*`)。

进行所需的更改，它应该可以正常工作。

# c++ - 在 C++ 中调用模板

> ID：12655730
> 
> 赞同：0
> 
> 时间：2012-09-29T19:20:26.407
> 
> 标签：c++, xcode

首先，我必须说我正在迈出 C++ 的第一步，而且我来自 PHP，所以请原谅这个基本问题。我一直在寻找和测试许多替代方案，但我似乎无法理解如何在 PHP 中执行此操作，`distance($str1, $str2)`以便读取函数`distance`返回的任何内容。

我想要做的是调用一个模板，它应该返回两个字符串之间的 Levenshtein 距离。

这是我的代码

```
template <class T> unsigned int edit_distance(const T& s1, const T& s2)
{
    const size_t len1 = s1.size(), len2 = s2.size();
    vector<vector<unsigned int> > d(len1 + 1, vector<unsigned int>(len2 + 1));

    d[0][0] = 0;
    for(unsigned int i = 1; i <= len1; ++i) d[i][0] = i;
    for(unsigned int i = 1; i <= len2; ++i) d[0][i] = i;

    for(unsigned int i = 1; i <= len1; ++i)
        for(unsigned int j = 1; j <= len2; ++j)

            d[i][j] = std::min( std::min(d[i - 1][j] + 1,d[i][j - 1] + 1),
                               d[i - 1][j - 1] + (s1[i - 1] == s2[j - 1] ? 0 : 1) );
    return d[len1][len2];
}

string text1="house";
string text2="houses";
edit_distance <int> (text1, text2); 
```

问题在线`edit_distance <int> (text1, text2);`，Xcode给出的错误是：`C++ requires a type specifier for all declarations`

同样，我知道这一定是非常基本的，但我找不到正确的方法。任何正确方向的提示将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:45:15.230

为了测试我的怀疑，我拿了你的代码，添加了最小的包含和使用声明，以允许编译器调用`edit_distance`并编译它。这是我编译的文件的完整内容：

```
#include <vector>
#include <string>
#include <algorithm>
using std::vector;
using std::string;

template <class T> unsigned int edit_distance(const T& s1, const T& s2)
{
    const size_t len1 = s1.size(), len2 = s2.size();
    vector<vector<unsigned int> > d(len1 + 1, vector<unsigned int>(len2 + 1));

    d[0][0] = 0;
    for(unsigned int i = 1; i <= len1; ++i) d[i][0] = i;
    for(unsigned int i = 1; i <= len2; ++i) d[0][i] = i;

    for(unsigned int i = 1; i <= len1; ++i)
        for(unsigned int j = 1; j <= len2; ++j)

            d[i][j] = std::min( std::min(d[i - 1][j] + 1,d[i][j - 1] + 1),
                               d[i - 1][j - 1] + (s1[i - 1] == s2[j - 1] ? 0 : 1) );
    return d[len1][len2];
}

string text1="house";
string text2="houses";
edit_distance <int> (text1, text2); 
```

我的怀疑得到了证实；我收到以下错误：

```
main.cpp:26:22: error: C++ requires a type specifier for all declarations
edit_distance <int> (text1, text2);
                     ^~~~~ 
```

这是您提到的确切错误，因此我相信您很可能犯了与我在测试源代码中包含的相同的错误。大多数有经验的程序员只会假设您的不完整代码是为了简洁而显示的，并且会自动插入一些可以完全避免此错误的周围代码。

* * *

你不明白的事情似乎是在 C++ 代码中不只是去任何地方。C++ 程序不仅仅是解释器在源代码中读取它们时执行的一系列语句。

C++ 是一种编译语言。程序是函数、类等的一系列声明和定义。语句，即执行工作的代码，只在定义内部。您的函数调用`edit_distance<int>(text1, text2);`不在任何定义中，因此编译器不期待声明并且不知道您在说什么。所以把它放在一个定义里。您可能想要使用函数定义：

```
void foo() {
    string text1="house";
    string text2="houses";
    edit_distance <int> (text1, text2);
} 
```

此外，当编译的代码被执行时，执行开始于一个特殊的入口点函数，main。只有可通过此入口点访问的代码才会被执行。（实际上这不是真的，但其他情况目前无关紧要。）

因此，您需要一个最终导致您要执行的代码的 main 函数。你可以`main`调用上面的`foo`，或者你可以直接把你的代码放在`main`：

```
int main() {
    string text1="house";
    string text2="houses";
    edit_distance <int> (text1, text2);
} 
```

此代码仍然无法编译，因为该`<int>`部分不正确。尖括号内的类型成为`T`在 edit_distance 函数模板中分配的类型：

```
template <class T> unsigned int edit_distance(const T& s1, const T& s2) 
```

`edit_distance<int>`说设置 T 等于 int：

```
unsigned int edit_distance(const int& s1, const int& s2) 
```

这不是你想要的。您可能希望将 T 设置为等于字符串，以便 s1 和 s2 参数是字符串。

```
int main() {
    string text1="house";
    string text2="houses";
    edit_distance<string>(text1,text2);
} 
```

接下来，您可能希望实际查看返回值。`#include <iostream>`在源代码的开头添加其他包含，然后使用 main 函数：

```
int main() {
    string text1="house";
    string text2="houses";
    std::cout << edit_distance<string>(text1,text2) << '\n';
} 
```

[完整、可编译的程序](http://ideone.com/QAPqf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T21:02:06.950

在

```
template <class T> unsigned int edit_distance(const T& s1, const T& s2) 
```

类型 T 可以直接从参数中推断出来。所以根本不需要指定类型。打电话

```
edit_distance(text1, text2); 
```

从函数内部。您可以对模板支持的任何类型执行此操作。如果不支持该类型，您将收到编译时错误。

仅当无法推断类型时才需要显式指定类型。在您的情况下，您指定的类型`<int>`与您提供的参数不匹配。

# ruby-on-rails - 设计，用于更改密码和电子邮件地址的单独页面

> ID：12655732
> 
> 赞同：1
> 
> 时间：2012-09-29T19:20:37.363
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我使用设计作为身份验证系统，我想创建单独的页面来更改密码和电子邮件地址。

我应该创建像`update_password`and之类的其他操作，还是使用可以同时接受密码和电子邮件`update_email`的单个操作会更好？`update`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:37:28.280

我想创建新动作并没有真正的优势。根据我从那[本书](https://rads.stackoverflow.com/amzn/click/com/0321604814)中的记忆，如果可以的话，你应该坚持 7 个经典动作（索引/显示/新建/编辑/创建/更新/删除），以保持一切 RESTFul。

无论如何，这个动作可能会做同样的事情。

一个经典的更新是：

```
def update
  user = User.find(params[:id]).update_attributes! params[:user]
end 
```

最终的 update_password 和 update_email 可能看起来像这样

```
def update_email
  user = User.find(params[:id]).update_attributes! email: params[:user][:email]
end

def update_password
  user = User.find(params[:id]).update_attributes! password: params[:user][:password]
end 
```

当使用单个操作（更新操作）时，唯一的最终问题是用户可以通过`change email`表单通过更改页面上的 html 来更新其密码。我不认为这是一个问题，因为用户无论如何都可以更改他的密码。

所以我会坚持经典的更新方法。

如果我错过了您的观点，请告诉我；）

# wpf - 将参数发送到 XAML 中定义的控件

> ID：12655733
> 
> 赞同：0
> 
> 时间：2012-09-29T19:20:58.327
> 
> 标签：wpf, xaml

是否可以将参数发送到 XAML 中定义的控件？
例如，如果我有这个 XAML：

```
<UserControl x:Class="Controls.MyControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d">
    <UserControl.Resources>
        <ResourceDictionary Source="..\Colors.xaml" />
    </UserControl.Resources>
    <Grid>
        <Polygon x:Name="plgPoly" Points="0,0 100,0 100,100 0,0" />

    </Grid>
</UserControl> 
```

但是当我构造我的“多边形”时，我想给它一个坐标，该坐标取决于包含它的控件（如：this.Height、this.Width 等）或父控件中定义的其他控件。
是否可以？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T19:25:03.807

如果应该引用另一个的属性是可以通过(with ) 轻松完成的[依赖属性](http://msdn.microsoft.com/en-us/library/ms752914.aspx)，否则您可能需要构建自己的来获取值一次（而不是绑定它）。[`Binding`](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.aspx)[`RelativeSource`](http://msdn.microsoft.com/en-us/library/system.windows.data.relativesource.aspx)[`MarkupExtension`](http://msdn.microsoft.com/en-us/library/system.windows.markup.markupextension.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T19:27:11.943

如果您只想使用简单值或绑定到所有者控件的自定义属性，请使用**HB**建议的依赖属性机制。但是，您可能需要将值从另一种类型转换为适当的类型（即`PointCollection`）。在这种情况下，我建议使用绑定和值转换器来完成。更多关于价值转换器的信息可以在这里找到：http: [//msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)。

# php - 使用 MySQLi 的 SUM 的单个结果

> ID：12655734
> 
> 赞同：0
> 
> 时间：2012-09-29T19:21:40.977
> 
> 标签：php, mysqli, sum

都看了一遍。找不到答案。PHP 文档不清楚（对我来说）。

我正在通过`mysqli->query`. 我怎样才能得到类似 MySQLi 的结果`mysql_result`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-29T19:41:23.907

最好为 SUM 使用别名：

```
SELECT SUM(`field`) as `sum` FROM `table_name` 
```

然后，您将能够通过访问第一个结果行的`$row['sum']`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-29T20:00:45.643

如果查询成功，在 SELECT 语句中给 mysqli_query 的任何内容都将返回 mysql_result 类型。因此，如果您有一个 SELECT 语句，例如：

```
SELECT sum(field) FROM table1 
```

您仍然需要获取带有结果的行，并且 sum() 函数的值将是行数组中的唯一条目：

```
$res = mysqli_query($dbh,'SELECT sum(field) FROM table1');
$row = mysqli_fetch_row($res);
$sum = $row[0]; 
```

# c++ - 使用 std::getline c++ 函数时遇到问题

> ID：12655735
> 
> 赞同：1
> 
> 时间：2012-09-29T19:22:04.867
> 
> 标签：c++, file, input, cout, getline

我完全困惑为什么这不起作用。我想将输入 .txt 文件的一行读入一个长字符串，然后打印出来。在我看来，最常见的方法是将其作为 C 字符串读入，但如果我可以将其作为普通的 c++ 字符串读入，我的主程序（我发布的代码只是一个示例）会简单得多. 我究竟做错了什么？

```
 #include <iostream>
    #include <fstream>
    #include <string>
    using namespace std;

    int main(int argc, char *argv[]){
        ifstream inStream;
            string line;
        inStream.open(argv[1]);
        getline(inStream, line, '\n');
        inStream.close();
        cout << line;

        return 0;
    } 
```

当我运行它时，它什么也不输出。我确信我的 .txt 文件输入正确并且里面有字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T19:53:58.923

转储`getcwd()`到 cout 以确保您即将在您认为存在的位置打开文件。您可能不在您认为的位置。

# magento - Magento：如何从选定/输入的送货地址中获取 countryID

> ID：12655736
> 
> 赞同：4
> 
> 时间：2012-09-29T19:22:07.030
> 
> 标签：magento, checkout, shipping, street-address, country

我试图隐藏一些基于 shipping_method.phtml 中的文本/代码，具体取决于所选或输入的送货地址的国家/地区是否为法国。

我发现的唯一代码是

```
Mage::getSingleton('checkout/type_onepage')->getQuote()->getShippingAddress()->getCountryId() 
```

但这所做的只是返回地址簿中我默认地址的 countryID。因此，当地址已经在地址簿中时，代码有效，但如果客户决定他/她要将其发送到新地址，则代码无效。

所以我需要一种方法来访问在 php/javascript 中**选择/输入的 CountryID**（应该存储在会话中的某个地方，因为它显示在进度侧边栏中）。

请注意，我在 magento CE 1.7.0.2 中使用标准单页结帐。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T07:36:10.633

您可以尝试使用此代码`$this->getQuote()->getShippingAddress()->getCountry()`获取**country id**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T11:16:53.200

问题是这段代码在页面加载时被执行，基本上运输方法块只是隐藏，直到你到达那个步骤。这意味着

```
$this->getQuote()->getShippingAddress()->getCountry() 
```

l

Ajax 加载的唯一内容是可用的运输方式，所以我通过挂钩来解决它

```
app/design/base/default/template/checkout/onepage/shipping_method/available.phtml 
```

并添加以下 javascript 代码

```
<?php //Show extra shipping options only if the shipping address is outside of FRANCE ?>
<script type="text/javascript">

  var countryID = '<?= Mage::getSingleton('checkout/session')->getQuote()->getShippingAddress()->getData('country_id') ?>';
  jQuery('#ownTransport')[countryID == 'FR' ? 'hide' : 'show']();

</script> 
```

供参考：中的代码

```
app/design/XXX/XXX/template/checkout/onepage/shipping_method.phtml 
```

曾是

```
<form id="co-shipping-method-form" class="stack-form" action="">
<div id="checkout-shipping-method-load">
    <?php echo $this->getChildHtml('available') ?>
</div>

<script type="text/javascript">
    //<![CDATA[
        var shippingMethod = new ShippingMethod('co-shipping-method-form', "<?php echo $this->getUrl('checkout/onepage/saveShippingMethod') ?>");
    //]]>
</script>

<div id="onepage-checkout-shipping-method-additional-load">
    <?php echo $this->getChildHtml('additional') ?>
</div>

<?php //ADD AMASTY FIELDS ?>

<?php //Show extra shipping options only if the shipping address is outside of FRANCE ?>

<div id="ownTransport">
<?php
    echo Mage::helper('amorderattr')->fields('shipping_method'); 
?>
</div>

<div id="shipping-method-buttons-container" class="buttons-set">
    <button class="button" onclick="shippingMethod.save()"><?php echo $this->__('Continue') ?></button>
    <span class="please-wait" id="shipping-method-please-wait" style="display:none;"><?php echo $this->__('Loading') ?></span>
</div> 
```

希望这可以帮助某人！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T07:28:15.127

如果您在 magento 中使用 onepage checkout，请使用此代码

```
Mage::getSingleton('checkout/type_onepage')->getQuote()->getShippingAddress()
 ->getCountryId(); 
```

你也可以使用：-

```
$countryId =Mage::getSingleton('checkout/session')->getQuote()->getShippingAddress()->getData('country_id'); 
```

# c# - c# 打开一个压缩文件到一个程序中

> ID：12655738
> 
> 赞同：-1
> 
> 时间：2012-09-29T19:22:19.780
> 
> 标签：c#, registry, contextmenu

我有一个程序可以压缩某个文件并保存为 *.pld 扩展名。我的问题是这样的。如何访问我自己的扩展文件并读取该文件的内容。因此，有人通过双击文件帮助我如何读取该文件并将其显示到包含datagridview的主窗体中？ 在我的程序上制作安装程序后，我使用[注册表项帮助器放置我的上下文菜单。](http://codinggrapes.wordpress.com/2011/06/12/registry-helper-library-in-c)当我开始压缩文件、保存并打开文件时，它只是一次又一次地打开我的应用程序。

如何解决那个？。提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:42:36.793

您只需要从 main 方法中读取参数。例如：

```
static class Program
{
    [STAThread]
    static void Main(string[] args)
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Form1 form = new Form1(args);
        Application.Run(form);
    }
} 
```

args 将包含双击文件的完整路径

# multithreading - 如何从用户空间访问当前读/写的线程数？

> ID：12655742
> 
> 赞同：3
> 
> 时间：2012-09-29T19:22:58.160
> 
> 标签：multithreading, linux-kernel

我编写了一个模块，用户可以在其中读取或写入 proc 文件 - 如何确定在内核级编程中读取或写入的用户进程中的线程数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T11:01:24.153

在读/写函数`current`中用作指向当前任务 (current ) 的指针：`task_struct`

```
#include <linux/sched.h>

struct task_struct * t;
for (t = next_thread(current); t != current; t = next_thread(t)) {
    // do the stuff
} 
```

# jquery - rails 不显眼的登录

> ID：12655743
> 
> 赞同：1
> 
> 时间：2012-09-29T19:23:02.403
> 
> 标签：jquery, twitter-bootstrap, ruby-on-rails-3.2

我正在使用 rails 3.2.8 为一个大学项目构建一个类似博客的网站，我想使用来自 twitter bootstrap 的模态框来实现一个不显眼的登录系统。我已经尝试了一些关于这个主题的教程，但到目前为止我还不能让它工作。在会话控制器中，我有这个：

## session_controller.rb

```
class SessionsController < ApplicationController

def new
  respond_to do |format|
    format.html
    format.js
  end
end

# Handling authentication when user submits login form
# with authenticate method. If the authentication is
# successful stores a permanent or temporary cookie based
# on selection :remember_me with an authorization token
# and redirects to root_url with notice else displays
# alert and redirects to new
def create
    user = User.authenticate(params[:email], params[:password])
    if user
        if params[:remember_me]
            cookies.permanent[:auth_token] = user.auth_token
        else
            cookies[:auth_token] = user.auth_token
        end
        redirect_to root_url, :notice => "Logged in!"
    else
        flash.now.alert = "Invalid email or password"
        render "new"
    end
end

# Deleting cookie and redirecting to root_url on
# logout with notice
def destroy
    cookies.delete(:auth_token)
    redirect_to root_url, :notice => "Logged out!"
    end

end 
```

在应用程序视图中，我创建了一个隐藏模式，其中应该呈现表单部分的内容以及`a :remote => true`登录链接

## 应用程序.html.erb

```
<div class="modal hide fade" id = "modal">
<div class="modal-body">
</div>
</div>
.
.
.
<%= link_to(log_in_path, :remote => true) do %>
<i class="icon-check"></i> Log in
<% end %> 
```

最后在 /app/views/sessions 有 js 视图

## 新的.js.erb

```
$("#modal-body").html(<%= escape_javascript render(:partial => 'form')%>);
$('#modal').modal('show'); 
```

但不是在模态rails中显示登录表单，而是将我带到登录页面（`new.html.erb`）。谁能帮我这个？

# ruby-on-rails - 时隙选择和在rails中显示

> ID：12655753
> 
> 赞同：-1
> 
> 时间：2012-09-29T19:24:38.977
> 
> 标签：ruby-on-rails, time, selection, slot

伙计们请就如何获得结果提出建议，当我在 pic1 中提供输入时，您可以在 pic2 中看到。

请帮助我，我是 Rails 新手，需要你的建议。提前致谢

[http://imageshack.us/photo/my-images/593/11072918.jpg/](http://imageshack.us/photo/my-images/593/11072918.jpg/)
[http://imageshack.us/photo/my-images/822/76461672.jpg/](http://imageshack.us/photo/my-images/822/76461672.jpg/)

在 Pic1 中，用户必须选择约会/预订的时间，结果应该在 Pic2 中显示为日历格式的点。

它不需要与图片中的完全相同。有人可以提供一些更好的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T22:02:27.177

您可以自己在 js 中实现它，也可以尝试找到一个基于 js 的具有适合此任务的功能的框架。

当我看到你的截图时，它让我想起了[smartgwt](http://www.smartclient.com/smartgwt/showcase/)网格和东西，它可以与 rails [rails 和 smartgwt](http://railsblog.kieser.net/2010/01/netbeans-ruby-on-rails-smartgwt-and.html)一起使用，但需要一些努力

# ruby-on-rails - 无法启动 Bridge 服务器 - Ubuntu

> ID：12655754
> 
> 赞同：1
> 
> 时间：2012-09-29T19:24:54.127
> 
> 标签：ruby-on-rails, ruby, ubuntu, bridge

我已经能够在我的本地 macbook 上启动并运行桥接器，但是在尝试在 Linode 上托管的 ubuntu 机器上设置它时遇到了问题。

我使用 apt-get install rabbitmq-server 安装了 rabbitmq。然后我按照网站上的服务器安装指南进行操作。当我尝试运行命令 ~/.bridge/setup start 我得到：

```
Segmentation fault (core dumped)
root@li532-27:~/.bridge# 
 =====
 ===== LOGGING STARTED Sat Sep 29 18:32:37 UTC 2012
 =====
 Exec: /root/.bridge/bridge-server/erts-5.8.5/bin/erlexec -boot /root/.bridge/bridge- server/releases/5/server -mode embedded -config /root/.bridge/bridge-server/etc/app.config -args_file /root/.bridge/bridge-server/etc/vm.args -- console
 Root: /root/.bridge/bridge-server 
```

之后什么也没有发生。不知道我做错了什么，因为它在我的本地 macbook 机器上工作。

有任何想法吗？

# html - base64 未在 gmail 中解码

> ID：12655764
> 
> 赞同：42
> 
> 时间：2012-09-29T19:27:07.980
> 
> 标签：html, email, base64

为了避免卸载图像，对于我的内联 html 邮件，我已将所有图像（4 个实际图像和 6 个空 gif 用于间距）编码为 base64 字符串。工作得很好，但 gmail 拒绝将这些解码回图像。我做了一些相当广泛的调查，但空手而归。

cid:url 呢？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-08T17:26:41.847

Gmail 网络客户端确实支持嵌入图像

[查看我对 gmail 的 Base64 图像的](https://stackoverflow.com/questions/3279523/base64-images-to-gmail/12786336#12786336)回答

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-01-07T11:12:13.297

Gmail 没有了。

苹果邮件是少数仍然存在的邮件之一。因此，除非您打算只发送给苹果所有者，否则您可能想找到另一种方法来做到这一点

例如，使用您的 base64 图像添加另一部分： Content-Type: image/png; name="imagename.png" 内容配置：内联；filename="imagename.png" 内容传输编码：base64

# amazon-ec2 - 在亚马逊购买预留实例

> ID：12655768
> 
> 赞同：1
> 
> 时间：2012-09-29T19:27:31.157
> 
> 标签：amazon-ec2

因此，我使用免费层运行亚马逊 Linux/Unix 微型实例已经有一段时间了。我一直在上面开发一个应用程序，一切都运行良好，但是，随着我的进步，我注意到服务器似乎经常死机。我做了一些研究，发现发生这种情况的原因是因为 Micro 实例只有 2 个 EC2 计算单元用于短周期突发（只有大约 5 秒的 cpu 电源，如果任何进程花费的时间比它的 CPU 资源大大减少） ）。每当我在服务器上测试我的应用程序时，我认为服务器正在死机，因为有时处理某些东西需要超过 5 秒，它就会死机。

所以正因为如此，我想升级到一个小实例，它没有那么快，但它具有一致的 cpu 功率，所以这将不再是一个问题。我真的很想切换到 Red Hat Linux，而不是我使用免费层获得的系统，但我想知道我是否能够将所有东西从现有的微型实例转移到运行 red hat 的小型实例？除此之外，我不确定是选择 VPC 还是只选择普通实例。各自的优点和缺点是什么？

非常感谢任何帮助，因为我是一名学生，并没有那么多钱可以花，所以我必须在第一次尝试时做出正确的决定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T00:11:47.433

1) 如果您只是停止现有实例，然后在 AWS 管理控制台中右键单击它，您可以将其切换为小实例，然后启动它。1b) 如果您想从 CentOS 或 RHEL 构建新实例，您可以这样做，然后将所有数据/应用程序迁移到新服务器。

2) 迁移到 VPC 有很多优势。您控制内部 IP，您可以为入站和出站机器创建安全组。问题在于，仅针对 1 台服务器，您增加了可能不必要的复杂性。

3）你没有问这个问题，但这是你帖子的标题，所以我会回答它。如果您的服务器 24x7 运行，您将通过购买预留实例获得可观的节省。

# python - 用 rpy 发送到 X11 的绘图突然关闭？

> ID：12655771
> 
> 赞同：1
> 
> 时间：2012-09-29T19:27:40.297
> 
> 标签：python, x11, graphing, rpy2

我正在使用 RPy2 制作一些情节。绘图显示，但 X11 窗口立即消失。

我输入的内容如下，其中*CCFS*是一个数据矩阵

```
 import rpy2.robjects as robjects
 r = robjects.r

 pca = r.princomp(CCFS)
 r.plot(pca,main="Eigenvalues")
 r.biplot(pca,main="biplot")
 r['dev.off']() #*EDIT* the problem persists even if I remove this line. 
```

我没有包括一些东西吗？我知道有一些东西要绘制，因为 princomp 返回一个不为空的 ListVector。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T19:34:17.443

添加

```
input()         # for Python3
# raw_input()   # for Python2 
```

到脚本的末尾，以防止程序在用户按 Enter 之前结束。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T20:19:21.300

正如 Zack 指出的那样，调用`dev.off()`交互式图形设备只会导致设备关闭（并且显示的内容会消失）。另一方面，在检查绘图之前通常需要关闭非交互式设备（参见[rpy2's documentation on graphics devices](http://rpy.sourceforge.net/rpy2/doc-2.2/html/graphics.html#graphical-devices)）。

我猜您的 Python 代码被称为独立程序/脚本，而不是交互式 Python 会话的一部分。换句话说，我怀疑您`python myscript.py`在外壳中有类似的东西（`myscript.py`上面是您的代码的内容）；当脚本结束时，嵌入式 R 显然终止，并带有交互式绘图。这可能也是 Zack 的想法。尝试`python -i myscript.py`，然后在 Python 控制台`import sys; sys.exit(0)`中查看退出 Python 意味着关闭 R 交互设备。

# javascript - 将注释保存到数据库中

> ID：12655774
> 
> 赞同：3
> 
> 时间：2012-09-29T19:28:10.273
> 
> 标签：javascript, database, save, range

我需要保存其他人在网站上所做的注释。我需要将文本 HTML 的选择保存在数据库中以供以后检索。在用户可以随时查看之前。我使用[了 rangy.deserializeSelection () 和 rangy.SerializeSelection ()](https://code.google.com/p/rangy/wiki/SerializerModule)但重新加载页面时不起作用。

我尝试使用以下位置创建范围：

```
var srcObj = document.getElementById ("tam");
var rangeObj = document.createRange ();
rangeObj.selectNodeContents (srcObj);
var textNode = rangeObj.firstChild;
rangeObj.setStart (textNode, 1);
rangeObj.setEnd (textNode, 1000); 
```

但两者都不起作用，因为它不是纯文本有 html 品牌。

# php - 寻找最佳售价的算法

> ID：12655778
> 
> 赞同：-4
> 
> 时间：2012-09-29T19:28:50.243
> 
> 标签：php, algorithm, math

我有来自我们一些在线列表的销售数据。我随机定价相同的项目以找到最佳价格，以尝试产生最大的利润。以下是我们的一些示例数据：

```
6 units @ 296.9/ea 
225 units @ 331.69/ea 
45 units @ 334.99/ea 
5 units @ 369.29/ea 
2 units @ 399.0/ea 
2 units @ 353.27/ea 
5 units @ 354.21/ea 
```

哪个是最好的价格范围很明显，但是我仍在尝试找到某种平均值，因此我们不只是选择最高的数字。

我最初的想法是简单地将每组相乘，将它们全部相加，然后除以总单位（也就是求总平均值）。问题是没有考虑售出的单位数量和每个单位的价格之间的关系。

有人对找到最佳解决方案的方法有任何建议吗？谢谢！

- 编辑 -

不需要考虑点击率和查看率等分析数据，因为所有列表都是在完全相同的时间完成的，并且完全相同。销售量、浏览量等是定价的直接结果。换句话说，我们是根据我们对商品的定价来获得销售额的。

我不是想找到任何利润空间，而是想找到最好的 LIST PRICE。我们已经在检查我们的利润率并启用/禁用未达到我们阈值的活动。我们正在尝试根据之前的结果找到一个中等价格，以便我们可以进入新市场并以理想的价格提出想法。

--第二次编辑--

当我们列出相同的测试项目时，无论价格如何，有些项目确实获得了更多的浏览量，这实际上会带来更多的销售。几乎就像他们在商店里“病毒式传播”一样。这些观点的原因完全超出了我们的控制。除了定价之外，每个列表都是相同的。几乎所有在线零售商都有特殊的算法来为该客户获取最佳匹配结果。

我们尝试这样做的唯一原因是尝试根据先前的结果对最佳标价进行有根据的“猜测”，无论我们如何获得它们。换句话说，商店和客户正在为我们挑选这些价格，我们只是想尝试猜测开始的价格，而不是随机定价列表。从那里我们可以努力增加我们的利润。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T19:42:15.200

这更像是一种方法论批评（评论），但对于评论领域来说太长了，而且*有点像*回答。但您问题的基本答案是，**鉴于您提供的数据，这是无法回答的**：

1.  这些价值中的每一个向客户展示了多少次？您以最低价格仅售出 6 台，这有点令人惊讶……这使我相信客户并未平等地接触到这些价格水平中的每一个。您需要通过计算：除以价格水平获得**转化率**`number_of_times_this_price_was_shown``number_of_times_customer_bought_item_at_this_price`

2.  您在每个项目上的利润率是多少？如果我的小部件花费我 1 美分/小部件，则以 5.01 美元/小部件的价格出售 100 个小部件比以 10.00 美元/小部件的价格出售 5 个小部件要好，但如果它们花费我 5.00 美元/小部件，那么最好以 10.00 美元/小部件的价格仅出售 5 个小部件（利润 5.00 美元/小部件 * 5 个小部件 = 25.00 美元，而 1 美分利润/小部件 * 100 个小部件 = 1.00 美元）。

如果您可以告诉我们这两条信息，我们可以提供正确的算法。

# php - 由于一列，数据未插入数据库中

> ID：12655780
> 
> 赞同：0
> 
> 时间：2012-09-29T19:28:56.070
> 
> 标签：php, javascript, html, mysqli

我在下面有一个 mysqli/php 代码，假设将数据插入到“会话”表中。

```
 ...

if (isset($_POST['textWeight'])) {

$_SESSION['textWeight'] = $_POST['textWeight'];

}

...

        if($_SERVER['REQUEST_METHOD'] == 'POST')

        {

            $time = str_replace(array(' Hrs ', ' Mins ', ' Secs'), array(':', ':', ''), $_SESSION['durationChosen']);

            for ($i = 1, $n = $_SESSION['sessionNum']; $i <= $n; ++$i) {

                    $insertsql = "
              INSERT INTO Session
                (SessionId, SessionTime, SessionDate, SessionWeight, SessionDuration, TotalMarks, ModuleId, TeacherId, Room)
              VALUES
                (?, ?, ?, ?, ?, ?, ?, ?, ?)
            ";
            if (!$insert = $mysqli->prepare($insertsql)) {
              // Handle errors with prepare operation here
            }

                $sessid = $_SESSION['id'] . ($n == 1 ? '' : $i);
                $sessdate = date("Y-m-d", strtotime($_SESSION['dateChosen']));

                $insert->bind_param("sssisisis", $sessid, $_SESSION['timeChosen'], $sessdate,
                             $_SESSION['textWeight'], $time, $_SESSION['textMarks'],
                             $_SESSION['module'], $teacherid, $_SESSION['rooms']);

                $insert->execute();

                if ($insert->errno) {
                  // Handle query error here
                }

                $insert->close();

            } 
```

我遇到的问题是它没有将任何数据插入数据库，原因是它在下面显示此错误：

```
Warning: mysqli_stmt::execute(): (23000/1048): Column 'SessionWeight' cannot be null in /web/stud/..../.... on line 182 
```

发布到“SessionWeight”列的值来自 `$_SESSION['textWeight']`但它不应该显示此错误，因为我已经声明如果用户在下面的单选按钮中单击了“否”，则文本框中的值为 0，否则如果用户选择“是”，则用户必须输入自己的图形（不允许空白文本框）。

```
//HTML
        <th>Provide a Total Weight Assessment is worth to Module?</th>
        <td><input type="radio" name="weightChoice" value="Yes" onClick="getWeight()" class="radioBtn"/> Yes</td>
            <td><input type="radio" name="weightChoice" value="No" onClick="getWeight()" class="radioBtn"/> No</td>
            </tr>
            </table>
            <div id="radioAlert"></div>
            <p></p>
        <table id="tblWeight">
        <tr>
        <th>Weight:</th>
            <td><input type="text" id="txtWeight" name="totalWeight" onkeypress="return isNumberKey(event)" maxlength="5" />%</td>
            </tr>
            </table> 
```

……

```
//Javascript

        function getWeight() {
            var weightChoice = document.getElementsByName("weightChoice");               
            var textWeight = document.getElementById("txtWeight");
            var tblWeight = document.getElementById("tblWeight");

            if(weightChoice[0].checked == true){
                tblWeight.style.display = "block";
                textWeight.value = "";
            }else{
                tblWeight.style.display = "none";
                textWeight.value = 0;

        }

    } 
```

数据库中的 SessionWeight 列是非键字段，数据类型为 int(3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:39:51.443

您的输入字段有`name="totalWeight"`，但您尝试阅读`$_POST['textWeight']`

好像是这个问题

# mysql - 从 LIST 扩展名的文件导入数据

> ID：12655782
> 
> 赞同：0
> 
> 时间：2012-09-29T19:29:17.013
> 
> 标签：mysql, database, file

我必须使用 .LIST 扩展文件中可用的原始数据，并且必须将这些数据导入到 MySql 或 excel 等可用的格式中。

谁能告诉我如何从 .LIST 文件中提取原始数据。如何解析 .LIST 文件中的数据并可能将其导出到 excel 或 MySql？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T08:10:04.467

好吧，我发现没有解析 .list 文件的通用方法，因为它可以包含任何文本信息，但我特别感兴趣的 .list 文件来自[imdb](http://www.imdb.com/interfaces)，我发现了一个 python 脚本[imdbpy](http://imdbpy.sourceforge.net/)，它可以解析和导入.list 文件中的数据到任何关系数据库，例如 mysql、MSSQL 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-03T05:16:17.330

你不能使用 .csv 文件。如果是，那么只需在 excel 中打开您的数据文件并将其保存为 .csv 格式。如果你有 MySql 工作台，那么生活很容易。您只需单击工具提示为“从外部文件导入数据”的按钮。

# php - 使用库 SimpleXML 中的 xpath 从翻译文件中获取 xml 内容值

> ID：12655790
> 
> 赞同：1
> 
> 时间：2012-09-29T19:30:28.730
> 
> 标签：php, xpath, attributes, simplexml, translation

我正在使用 php 语言进行编程，并使用库 SimpleXML 从 xml 文件中提取语言翻译。

以下是文件“file.xml”的 XML 文件摘录：

```
<language>
    <translations>
        <string key="key1">This is a first translation</string>
        <string key="key2">This is a second translation</string>    
    </translations>
</language> 
```

现在我想获取属性为“key1”的字符串的 xml 内容值（“这是第一次翻译”）。

使用代码

```
$xml = simplexml_load_file('file.xml');    
$param = $xml->xpath("/language/translations/string[@key='key1']"); 
```

我得到了正确的属性。但我没有发现必须如何调整上面的 xpath 才能获取 xml 内容值。你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:43:16.260

只需将其转换为字符串：

```
$nodes = $xml->xpath("/language/translations/string[@key='key1']");
$param = (string) $nodes[0]; 
```

# ruby-on-rails - 简化多个 if-then rake 任务

> ID：12655793
> 
> 赞同：0
> 
> 时间：2012-09-29T19:30:40.747
> 
> 标签：ruby-on-rails, if-statement, scheduled-tasks, rake-task

我得到了下面的 Rake 任务，它每天运行一个来结算我的应用程序中的一些赌注。但我很确定它可以被简单化，所以 IF-THEN 语句可以替换为 s CASE 词干。

我假设多个 IF 语句的运行时间比使用 CASE 选项的相同进程要长。那是对的吗？

我只是不确定如何将它从 IF-THEN 转换为 CASE 选项..

```
task :settle => :environment do
  @bets = Bet.where(:settle => false)

  @bets.each do |bet|

    if not bet.value.nil?

     if bet.price.value > bet.value and bet.buy == true then 
      bet.profitloss  = 10
      bet.settle      = true
      bet.save
     end

     if bet.price.value < bet.value and bet.buy == false then
      bet.profitloss  = 10
      bet.settle      = true
      bet.save
     end

     if bet.price.value > bet.value and bet.buy == false then
      bet.profitloss  = -10
      bet.settle      = true
      bet.save
     end

     if bet.price.value < bet.value and bet.buy == true then
      bet.profitloss  = -10
      bet.settle      = true
      bet.save
     end

     if bet.price.value = bet.value then
      bet.profitloss  = -10
      bet.settled     = true
      bet.save
     end 

   end
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T20:17:41.170

这似乎是

bet.settle 始终为 true bet.profitloss 为 -10，除非 (bet.price.value > bet.value and bet.buy) 或 (bet.price.value < bet.Value and !bet.buy) 在这种情况下为 10

从下面的真值表得到这个

```
< bet | = bet | > bet | buy || settle || profit
  0   |   0   |   1   |  0  ||    1   ||   0
  0   |   0   |   1   |  1  ||    1   ||   1
  0   |   1   |   0   |  0  ||    1   ||   0
  0   |   1   |   0   |  1  ||    1   ||   0
  1   |   0   |   1   |  0  ||    1   ||   1
  1   |   0   |   1   |  1  ||    1   ||   0 
```

因此，您几乎可以使用一个 if 语句来完成整个事情，但可以通过测试进行编织。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T20:07:41.647

也许你可以像这样实现它：

```
task :settle => :environment do
@bets = Bet.where(:settle => false)

@bets.each do |bet|
  if not bet.value.nil?
    case 
    when bet.price.value > bet.value and bet.buy == true
      profitloss  = 10
    when bet.price.value < bet.value and bet.buy == false 
      profitloss  = 10
    when bet.price.value > bet.value and bet.buy == false
      profitloss  = -10
    when bet.price.value < bet.value and bet.buy == true 
      profitloss  = -10
    when bet.price.value = bet.value
      profitloss  = -10
    end
    if profitloss  
      bet.settled = true
      bet.profitloss = profitloss 
      bet.save
    end 
  end
end 
```

取出已解决并保存的东西可以让您在需要时轻松集成其他功能，而无需在每个 if 或 when 情况下复制它。

# facebook-login - 权限不刷新

> ID：12655800
> 
> 赞同：1
> 
> 时间：2012-09-29T19:31:42.443
> 
> 标签：facebook-login, user-permissions

总之，我正在设置一个应用程序，并且我选择了各种用户和朋友权限（特别是`user_likes`和`publish_actions`）。但是，我的应用程序的授权对话框无法列出这些权限，而是表明我的应用程序仅请求访问基本信息。有什么想法可能是错的吗？

以下是一些额外的细节：

*   以前，授权对话框正确显示了我请求的权限。但是，我在整个上午都在修改一些不同的权限设置，现在无论我选择什么权限，授权对话框都只列出基本信息。
*   授权对话框预览（在设置|权限中可用）确实显示我的应用正在请求我指定的权限。然而，实际的授权对话框并没有
*   问题不仅仅是对话框没有显示我请求的权限。该应用程序实际上只是获得基本信息权限。（我知道，因为当我尝试在应用程序中访问喜欢时，我收到一个错误指示。）
*   问题不仅在于权限的更改需要时间来刷新并在 Facebook 服务器上传播。我知道是因为 (a) 我已经等待了几个小时没有效果，并且 (b) 对我的应用程序设置的其他影响授权对话框（例如显示名称）的更改立即可见
*   我选择的默认帐户隐私设置确实正确显示在授权对话框中，并且对它的更改立即在授权对话框中可见。只有用户和朋友权限不起作用。

还有一些额外的背景：

*   该应用程序本身是在 Corona SDK 中开发的 iOS 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T14:30:20.180

> 我选择了各种用户和朋友权限

在哪里？在您的应用设置中？

这些设置仅影响[Authenticated Referrals](https://developers.facebook.com/docs/opengraph/authentication/#referrals) - 当用户从 facebook.com 中单击指向您的应用程序的链接时。

但是，当您自己处理登录时，此时您必须通过`scope`参数指定权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:07:44.820

经过数小时的头部撞击后，该范围也对我有用。请务必在 FB.login 函数的末尾使用此符号：{scope: 'user_likes, user_location, etc'} 以从您的应用程序本身设置所有所需的权限。

# haskell - 在 Haskell 中使用别名导入函数

> ID：12655803
> 
> 赞同：23
> 
> 时间：2012-09-29T19:32:30.800
> 
> 标签：haskell, import

在 Haskell 中，我编写`import Fruit`or`import Fruit (apple)` 并且可以访问`apple`or `Fruit.apple`。

在 Python 中，我可以编写`from Fruit import apple`for`apple`或`import Fruit`for `Fruit.apple`。

我认为也可以用`import Fruit.apple as banana`Python 编写来引用与`banana`.

我如何在 Haskell 中做到这一点？`import Fruit as Vegetable`任何一种语言都可以重命名水果，但我想重命名苹果。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-29T19:50:54.147

这是 Python 的一个很好的属性，因为它的“字典一直向下”可以这么说。Haskell 允许您为模块分配别名，但无法从`import`语句中为函数指定别名（据我所知）。你能做的最好的就是

```
import qualified Fruit as F (apple)
banana = F.apple 
```

你可以把它放在它自己的模块中并导出你想要的值，隐藏所有这些的细节，但对于如此简单的事情来说，这似乎需要做很多工作。

正如 hammar 在下面评论的那样，单态限制可能会导致`banana`. 为了安全起见，您应该使用`banana`所需的类型（可能是`apple`）进行注释，或者禁用单态限制为

```
{-# LANGUAGE NoMonomorphismRestriction #-}
import qualified Fruit as F (apple)
banana = F.apple 
```

否则，推断的类型的`banana`多态性可能低于预期。

单态限制尝试为每个顶级函数分配一个类型类的具体实例（这是出于性能原因）。考虑，

```
example = return () 
```

这个函数应该有 type `Monad m => m ()`，但是由于单态性的限制，没有足够的信息来说明应该使用哪个 Monad 实例，所以你会得到以下消息

```
Ambiguous type variable `m0' in the constraint:
  (Monad m0) arising from a use of `return'
Possible cause: the monomorphism restriction applied to the following:
  example :: m0 () (bound at Test.hs:44:1)
Probable fix: give these definition(s) an explicit type signature
              or use -XNoMonomorphismRestriction
In the expression: return ()
In an equation for `example': example = return () 
```

现在，如果您为 GHC 提供了足够的信息来推断您正在使用哪个 Monad 实例，例如

```
example = return ()

main :: IO ()
main = example 
```

那么GHC会给出以下类型

```
*Main> :t example
example :: IO () 
```

因为你告诉它将`example`具有相同的类型`main`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-29T19:58:52.290

没有直接的语法。大概你想避免与 local-defined 发生冲突`apple`，所以我会选择

```
import qualified Fruit (apple)
banana = Fruit.apple 
```

# twitter-bootstrap - 复选框在引导选项卡窗格中不起作用（选中/取消选中）

> ID：12655805
> 
> 赞同：3
> 
> 时间：2012-09-29T19:33:14.473
> 
> 标签：twitter-bootstrap

简单的复选框在选项卡窗格中不起作用：http: [//jsfiddle.net/68RXP/22/](http://jsfiddle.net/68RXP/22/)

有谁知道为什么它不起作用？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T19:55:01.013

如果我是唯一一个认为这与[twitter 引导选项卡相同的问题的人：内容窗格中的链接不起作用](https://stackoverflow.com/q/11955861/1478467)

* * *

该属性`data-toggle="tab"`只能放在切换选项卡的链接（或按钮）上，而不是选项卡本身。

[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/68RXP/25/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-28T16:57:57.903

有同样的问题......使用上面的解决方案无法让它工作。注意到代码与我的代码相同，除了我正在执行引导程序页面上所说的关于选项卡激活的内容：

“通过 JavaScript 启用可选项卡（每个选项卡需要单独激活）：”

`$('#myTab a').click(function (e) { e.preventDefault() $(this).tab('show') })`

在 JS 文件中删除了这个调用，它神奇地开始选中该框。标签仍然有效。在同一页面上进行了更好的阅读，并说我正在做额外的事情，这是不必要的。检查你没有做同样的事情。

# java - 我应该如何将两个项目与 MouseMovementListeners 链接？

> ID：12655807
> 
> 赞同：1
> 
> 时间：2012-09-29T19:33:24.707
> 
> 标签：java, swing, awt, mouseevent, mousemove

我正在开发一个程序，该程序将显示同一组项目的两个“视图”。所以我需要设置一些东西，以便在更改俯视图时，更新侧视图（反之亦然）。

以下是相关代码的简要概述，因此您可以了解我目前的结构：

```
public class DraggableComponent extends JComponent
{
    //Contains code for MouseMovementListener that makes the item draggable
}

public class ItemGraphic extends DraggableComponent
{
    //Code to render the graphic
}

public class Item
{
    private ItemGraphic topGraphic;
    private ItemGraphic sideGraphic;
} 
```

我能够让每个图形在我的 GUI 中正常显示。我还可以独立拖动每个图形。我错过了“链接”。我一直在思考的一些想法：

*   为整个 GUI 设置一个侦听器。循环遍历每个项目，如果光标在任一图形的范围内，则移动另一个图形。我担心这种方法的效率。
*   多个“配对”侦听器（不太确定这将如何工作，但想法是每个图形都有另一个配对图形的侦听器）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T19:44:47.730

您需要有一个由两个“视图”共享的“模型”，并在模型上更新视图的侦听器。这样，如果您更改视图，则控件将更改将更新两个视图的模型。这只不过是 MVC（模型-视图-控制）程序设计的又一次迭代。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T19:46:07.623

我建议您需要某种两个组件可以共享和监视的中间模型。

这个想法是当您更新/更改视图时，它会使用所需的值更新模型。所有其他相关方都通过侦听器接口通知更改并相应地更新他们自己。

我们使用类似的技术来链接两个滚动窗格

# asp.net - Asp.Net MVC3 到 MVC4 升级工具？

> ID：12655808
> 
> 赞同：26
> 
> 时间：2012-09-29T19:33:26.727
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-mvc-4, upgrade

我知道像这样从 3 升级到 4 的手动指南：http: [//www.dotnetexpertguide.com/2011/12/upgrade-aspnet-mvc-3-project-to-mvc-4.html](http://www.dotnetexpertguide.com/2011/12/upgrade-aspnet-mvc-3-project-to-mvc-4.html)

指南的细节各不相同，这清楚地表明了危险。是否有一个工具可以处理从 MVC3 项目到 MVC4 的转换？这将隐含地意味着从 .Net 4 迁移到 .Net 4.5，这对于 Microsoft 在 2 个版本之间添加的所有命名空间重定向确实有一些重大影响。

我也知道手动指南基本上说放弃升级，而只是创建一个新项目并将内容逐个移植到新项目中。这有很多明显的机会让小错误产生大问题。

所以，一个经过测试的工具我可以指望不会犯一个愚蠢的错误，就像我可能会在这里真正提供帮助一样。那存在吗？有一个从 MVC2 到 3 的工具，所以没有找到一个 3 到 4 的工具让我感到惊讶。

我为什么要升级的背景：我们在 .Net 4.5 MVC4 上有几个较新的项目，在 .Net 4 MVC3 上有一个重要的旧项目（混合了一些 .Net 2 和 MVC 2...），还有更多我们的共享库随着旧项目的挣扎而向前发展。显然，我们可以冻结共享库上的最后一个工作，或者分叉它们并维护 2 个版本……显然这些都不是很吸引人。我宁愿只更新旧项目上的工具集，让一切都变得平等。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-10T15:35:08.007

现在存在自动升级。

看看这个： http: [//www.dotnetexpertguide.com/2013/02/aspnet-mvc-auto-upgrade-mvc-3-to-mvc-4-application.html](http://www.dotnetexpertguide.com/2013/02/aspnet-mvc-auto-upgrade-mvc-3-to-mvc-4-application.html)

它是一个[名为 UpgradeMvc3ToMvc4 的 Nuget 包](https://nuget.org/packages/UpgradeMvc3ToMvc4)

# java - 如何制作具有固定日期格式的 jtextfield？

> ID：12655811
> 
> 赞同：6
> 
> 时间：2012-09-29T19:34:05.063
> 
> 标签：java, swing, date, jtextfield

我无法使用`JTextField`. 有没有办法`JTextField`有一个固定的日期格式？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-29T19:39:32.177

您可以将 JFormattedTextField 与[SimpleDateFormat一起使用](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

```
DateFormat format = new SimpleDateFormat("your_format");
JFormattedTextField dateTextField = new JFormattedTextField(format); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T19:38:50.830

你应该看看

*   [如何使用格式化文本字段](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)（[特别是](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html#format)一个[例子](http://www.exampledepot.com/egs/javax.swing.text/formtext_FormTextDate.html)和[另一个](https://stackoverflow.com/questions/4252257/jformattedtextfield-with-maskformatter)）
*   [如何使用 Spinners](http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html)（[特别是](http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html#standard)）

对于初学者...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-22T20:18:43.727

如果您使用的是 Swing，请将 JFormattedTextField 添加到您的 JFrame。在属性中，单击 formatterFactory。在对话框中，选择日期类别，然后选择格式。现在您的格式将被强制执行。

![在此处输入图像描述](../Images/5d3a61985d311a85610b161fdebdca44.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-26T18:59:17.843

正如评论中所说，您可能更喜欢查看日期选择器组件而不是文本字段。日期选择器组件将使用户免于为日期语法而苦恼。

## java.time

我建议您使用现代 Java 日期和时间 API java.time 进行日期工作。因此，对于喜欢使用文本字段作为日期的任何人，我做了一个小实验，将 a与java.time`JFormattedTextField`中的类结合使用。`LocalDate`对于文本字段，我发现最好编写一个小子类，指定我们从日期字段中获得的对象类型是`LocalDate`：

```
public class DateField extends JFormattedTextField {

    private static final long serialVersionUID = -4070878851012651987L;

    public DateField(DateTimeFormatter dateFormatter) {
        super(dateFormatter.toFormat(LocalDate::from));
        setPreferredSize(new Dimension(100, 26));
    }

    @Override
    public LocalDate getValue() {
        return (LocalDate) super.getValue();
    }

} 
```

A`JFormattedTextField`接受`java.text.Format`用于格式化和解析值的对象。`DateTimeFormatter`从 java.time 有几个重载的`toFormat`方法给我们`java.text.Format`。甚至我们可以指定从`Format`.

要尝试此日期字段类：

```
public class TestFrame extends JFrame {

    public TestFrame() {
        super("Test");
        setLayout(new FlowLayout());
        setDefaultCloseOperation(EXIT_ON_CLOSE);

        DateTimeFormatter dateFormatter = DateTimeFormatter.ofLocalizedDate(FormatStyle.MEDIUM)
                .withLocale(Locale.forLanguageTag("es"));
        DateField dateField = new DateField(dateFormatter);
        add(dateField);
        dateField.setValue(LocalDate.now(ZoneId.systemDefault()));

        JButton okButton = new JButton("OK");
        okButton.addActionListener(ev -> JOptionPane.showMessageDialog(TestFrame.this,
                "Date entered is " + dateField.getValue()));
        add(okButton );

        pack();
    }

    public static void main(String[] args) {
        new TestFrame().setVisible(true);
    }

} 
```

我指定西班牙语格式只是为了清楚地表明正在进行格式化和解析。您可以在此处指定用户喜欢*的格式。*例如`DateTimeFormatter.ofLocalizedDate(FormatStyle.SHORT)`或`DateTimeFormatter.ofPattern("dd/MM/uu")`。考虑使用短格式，因为大多数用户不喜欢输入过多的内容。

现在`JFrame`看起来像这样：

[![在此处输入图像描述](../Images/746c77a2a2410820c6b54cf5cacd13d4.png)](https://i.stack.imgur.com/j2JVF.png)

`11 ago. 2020`我输入并单击确定，而不是今天的日期：

[![在此处输入图像描述](../Images/1ba8725666b1f5d6c75aae8eafdd83a1.png)](https://i.stack.imgur.com/AeLnH.png)

## 关联

[Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)解释如何使用 java.time。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-30T14:05:28.080

我在 Netbeans 中的解决方案是：从 JDateChooser 组件中选择日期，然后一个不可聚焦的 jtextfield 从 JDateChooser 中选择的日期获取日期：（1）为了制作固定日期格式，在 JDateChooser 的属性中，例如我们设置日期格式：yyyy-MM-dd；(2)make "jtextfield.setFocusable(false)"，这是为了避免输入错误的日期格式或不需要的字符

[![在此处输入图像描述](../Images/fda08c7fb784bf2ceb5e3beb80fae4df.png)](https://i.stack.imgur.com/W2zlU.png)

[![在此处输入图像描述](../Images/2135cedaba753484eb1d89942a522cb7.png)](https://i.stack.imgur.com/QHH9G.png)

[![在此处输入图像描述](../Images/47028ab8097872b12956f680fba2f660.png)](https://i.stack.imgur.com/KNeIj.png) [![在此处输入图像描述](../Images/f333ffe6289929a5dd573f83322a3335.png)](https://i.stack.imgur.com/RCPsk.png)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-06-17T08:15:59.693

我认为最好的方法是使用 JFormatedTextField。

我有这个代码试试这个：

```
package your_package;

import java.util.Date;
import java.text.DateFormat;
import java.text.SimpleDateFormat;

public class.....{

private String getdate(){
      DateFormat format = new SimpleDateFormat("MM/DD/YYYY"); //display your format.
      Date date = new Date();//puts the date in variable.
      return dateformat.format(date); //returns the format to the date variable.
}

public your_app{
     .....
     String date = new getdate();
     txtDate.setvalue(date);
}
} 
```

希望这会给您一个想法并有所帮助... :)

# pipe - gnuplot ：绘制管道输出

> ID：12655812
> 
> 赞同：3
> 
> 时间：2012-09-29T19:34:07.243
> 
> 标签：pipe, gnuplot

我有一个管道序列的输出

```
command_a | command_b | ... | command_n 
```

输出是一个序列一个数字

```
4.2
-1
...
0.2 
```

我可以使用 gnuplot 来绘制这些数字吗？（将 gnuplot 添加到管道序列中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-13T13:55:56.697

您是否尝试过以下操作？

`plot "< command_a | command_b | ... | command_n"`

具体例子：

`plot "< awk '{a[$1]++}END{for(i in a){print i,a[i]}}' datafile |sort -nk1"`

它对我有用（在 linux 系统上使用 gnuplot 4.2 和 5.0 进行了测试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T19:48:30.070

您可以在绘图命令中使用“-”源。您只需要先通过管道传输命令文件，然后再传输数据文件。例如：

测试.gnuplot：

```
用线条绘制'-'

```

示例命令行：

```
[命令生成数据] | cat test.gnuplot - | gnuplot - 持久化

```

# python - 基本数学计算混乱

> ID：12655823
> 
> 赞同：0
> 
> 时间：2012-09-29T19:35:26.780
> 
> 标签：python, python-3.x

编写一个基本的数学程序来帮助我理解 python 数学计算。

如果我写

```
x = 15 + 30 + 45
print(x) 
```

我明白了

```
90 
```

如果我写

```
x = 90 / 3
print(x) 
```

我明白了

```
30.0 
```

但如果我写

```
def avg3():
    print("This program will calculate the average of 3 scores")
    scores = eval(input("enter 3 scores: "))
    average = scores[0] + scores[1] + scores[2] / 3
    avg = str(average)
    print("The average of the input scores is " + avg + ".")

avg3() 
```

并输入

```
15, 30, 45 
```

返回的是

```
The average of the input scores is 60.0. 
```

当然，我期待 30 岁。这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T19:36:40.447

您的平均值需要括号，如下所示：

```
average = (scores[0] + scores[1] + scores[2]) / 3 
```

否则，你只是`scores[2]`除以`3`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T19:36:51.293

实际上你的代码正在做这样的事情：

```
average = 15+30+(45/3) #that's because / has higher precedence than + 
```

所以为了避免使用括号：

```
average = (scores[0] + scores[1] + scores[2]) / 3 
```

顺便说一句，不要`eval()`用于此：

```
>>> inp=input("enter 3 scores: ")
enter 3 scores: 1,5,6
>>> scores=list(map(int,inp.split(",")))
>>> scores
[1, 5, 6] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-29T19:37:09.627

除法优先于加法，因此您应该使用括号：

```
average = (scores[0] + scores[1] + scores[2]) / 3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T19:36:36.323

尝试

```
average = (scores[0] + scores[1] + scores[2]) / 3 
```

它被称为运算符优先级，在 python 中，`/`它比`+`.

想想看，你应该使用

```
average = sum(scores)/len(scores) 
```

它易于阅读，编写简短且更通用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-29T19:41:07.120

您的代码正在根据基本算术优先级进行正确的计算，但您需要这样做：

```
(scores[0] + scores[1] + scores[2] ) / 3 
```

...你的答案是 30。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-30T01:32:05.220

您需要做的就是在周围添加括号：

```
average = scores[0] + scores[1] + scores[2] 
```

所以你的代码看起来像：

```
average = (scores[0] + scores[1] + scores[2]) / 3 
```

根据 Python（或任何其他编程语言）中的操作顺序，除法在索引运算符之前完成。所以，你在你的程序中真正做的是：

```
average = scores[0] + scores[1] + (scores[2] / 3) 
```

因此，总体而言，您的完整程序是：

```
def avg3():
print("This program will calculate the average of 3 scores")
scores = eval(input("enter 3 scores: "))
average = (scores[0] + scores[1] + scores[2]) / 3
avg = str(average)
print("The average of the input scores is " + avg + ".") 
```

这应该在执行时为您提供正确的结果。我希望这回答了你的问题。:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-29T19:36:36.573

这是基本算术：加法前除法。你实际上是在计算

```
average = scores[0] + scores[1] + (scores[2] / 3) 
```

相反，您需要使用括号来覆盖运算符的优先级：

```
average = (scores[0] + scores[1] + scores[2]) / 3 
```

# c++ - 调试注释和 C/C++ 宏

> ID：12655828
> 
> 赞同：3
> 
> 时间：2012-09-29T19:36:20.447
> 
> 标签：c++, macros, c-preprocessor

我正在使用 g++ 编译器，我希望我的 c++ 代码的某些行被注释掉或不被注释，这取决于我的配置。

我意识到我可以这样做：

```
#ifdef DEBUG
cout << "foo" << endl;
#endif 
```

但我宁愿这一切都在一条线上：

```
#define DEBUG //
DEBUG cout << "foo" << endl; 
```

...`DEBUG`作为`//`. 但是写作`#define DEBUG //`一无所获。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T19:39:10.960

这是一种方法：

```
#ifdef DEBUG
#define DEBUG_LOG(x) std::cout << x << std::endl;
#else
#define DEBUG_LOG(x)
#endif

DEBUG_LOG("foo") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T20:28:14.840

> 但我宁愿这一切都在一条线上：
> `#define DEBUG //`

人们已经给出了如何实现你想要的很好的例子，但没有人评论你的方法为什么不起作用。

你的方法永远不会奏效。它行不通。没有机制可以定义成为注释序列开始的宏，原因很简单，即在定义预处理器符号时注释不存在。它们已经被剥离了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-29T19:39:51.247

[Dobbs 博士文章中](http://www.drdobbs.com/more-on-the-cc-comment-macro-for-debug-s/184401612)的一个技巧：

```
#if _DEBUG
// dbgInC defined as "printf" or other custom debug function
#define dbgInC printf
// dbgInCpp defined as "cout" or other custom debug class
#define dbgInCpp cout
#else
// dbgInC defined as null [1]
#define dbgInC
// dbgInCpp defined as "if(0) cerr" or "if(1); else cerr"
#define dbgInCpp if(0) cerr
#endif 
```

这具有允许多行语句的优点：

```
dbgInCpp << "Debug in C++: "
<< a // a is an integer
<< b /* b is char array */
<< c // c is a float
<< endl; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T19:38:58.223

它在 C 中不是惯用的。更喜欢使用通常的形式，*例如*：

```
#ifdef DEBUG
    count << "foo" << endl;
#endif 
```

或（如`assert`）：

```
#ifndef NDEBUG
    count << "foo" << endl;
#endif 
```

为了可读性。您还可以将此代码封装在宏中：

```
#ifdef DEBUG
#define PRINT_DEBUG(s) cout << s << endl
#else
#define PRINT_DEBUG(s) (void)0
#endif 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-29T19:40:27.057

你可能有

```
#ifndef NDEBUG
#define DBGOUT(Out) cout << __FILE__ << ":" << __LINE__ << ":" \
  << Out << endl
#else
#define DBGOUT(Out) do {} while(0)
#endif 
```

并在您的代码中使用，例如

```
DBGOUT("x is " << x); 
```

我使用 NDEBUG 符号，因为`<assert.h>`并`<cassert>`使用它。

# javascript - 当 needle 包含斜杠时使用 JavaScript 全局替换？

> ID：12655830
> 
> 赞同：-1
> 
> 时间：2012-09-29T19:36:35.010
> 
> 标签：javascript, regex, replace, syntax-error

```
ver = ver.replace(/http://www.google.com/g,'http://www.google.ro'); 
```

似乎是/上的冲突

如何解决这个问题？

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T19:38:18.027

`/`用反斜杠转义斜杠`\`，因为前者用于分隔正则表达式：

```
ver = ver.replace(/http:\/\/www.google.com/g,'http://www.google.ro'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T19:38:35.380

使用反斜杠转义正斜杠：

```
ver = ver.replace(/http:\/\/www.google.com/g,'http://www.google.ro'); 
```

# python - 使用 xml.etree 在 Python 中编写包含欧元符号 (€) 的 xml 文件

> ID：12655836
> 
> 赞同：1
> 
> 时间：2012-09-29T19:36:49.090
> 
> 标签：python, xml, xml.etree, euro

我正在尝试使用 xml.etree 来读取和写入包含 € 符号的 xml 文件。

我的简化代码如下所示：

```
optionsdirectory = os.getcwd()
optionsfile = os.path.join(optionsdirectory, "conf")
optionstree = ET.parse(optionsfile)
options = optionstree.getroot()
for option in options:
    if option.tag == "currency":
        option.text = "€"
optionstree.write(optionsfile, encoding="UTF-8") 
```

运行时出现以下错误：

```
File "C:\curr.py", line 8
    optionstree.write(optionsfile, encoding="UTF-8")
File "C:\Python27\lib\xml\etree\ElementTree.py", line 815, in write
    serialize(write, self._root, encoding, qnames, namespaces)
File "C:\Python27\lib\xml\etree\ElementTree.py", line 934, in _serialize_xml
    _serialize_xml(write, e, encoding, qnames, None)
File "C:\Python27\lib\xml\etree\ElementTree.py", line 932, in _serialize_xml
    write(_escape_cdata(text, encoding))
File "C:\Python27\lib\xml\etree\ElementTree.py", line 1068, in _escape_cdata
    return text.encode(encoding, "xmlcharrefreplace")
UnicodeDecodeError: 'ascii' codec can't decode byte 0x80 in position 2114: ordinal not in range(128) 
```

有没有办法使用 xml.etree 将 € 符号写入 xml 文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T19:39:10.583

您需要使用 unicode 文字。使用 unicode 转义而不是字符会更容易：

```
option.text = u"\u20AC"  # Euro sign 
```

当您不使用 unicode 文字而是使用字节（字符串）文字时，会发生什么情况，即 Python 尝试使用默认编码（即 ASCII）将值解码为 un​​icode 文字。这会导致您看到的 UnicodeDecodeError。

如果您确实*想*使用非转义字符，请确保在顶部指定源文件的编码：

```
# -*- coding: utf-8 -*- 
```

并确保您的编辑器使用 UTF-8 来保存文件。不过，您仍然必须使用 unicode 文字：

```
option.text = u"€" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T17:08:15.977

下面介绍如何使用非 ASCII 字符创建 XML 文件。请注意，您需要以通过声明的编码保存源文件`# coding:`并使用 Unicode 文字 ( `u'string'`)。在下面的示例中，我将文件同时写入 UTF-8 和 ASCII 以证明 ElementTree 在任何一种情况下都能正确读取文件：

```
# coding: utf8
from xml.etree import ElementTree as et

# Create the root element.
root = et.Element('test')
root.text = u'123€456'

# Wrap the root in an ElementTree and write files.
tree = et.ElementTree(root)
tree.write('utf8.xml',encoding='UTF-8')
tree.write('ascii.xml',encoding='ascii')

# Verify that each file can be read correctly.
tree = et.parse('utf8.xml')
print tree.getroot().text
tree = et.parse('ascii.xml')
print tree.getroot().text

# display the raw contents of the files
with open('utf8.xml','rb') as f:
    print repr(f.read())
with open('ascii.xml','rb') as f:
    print repr(f.read()) 
```

注意输出。0xE2 0x82 0xAC 是欧元字符的 UTF-8 十六进制序列。 `&#8364;`是字符参考。

```
123€456
123€456
"<?xml version='1.0' encoding='UTF-8'?>\n<test>123\xe2\x82\xac456</test>"
"<?xml version='1.0' encoding='ascii'?>\n<test>123&#8364;456</test>" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T17:38:20.320

我以为我擅长网页，但对于我的生活，我无法像其他人一样弄清楚如何“回应”这个网站上的帖子。所以我需要创建这个新的答案......

感谢您的回复马克 Tolonen。您的回复和 Martijn Pieters 的回复都涉及使用 Unicode 文字。但是，这对我不起作用。我正在使用的 XML 文件将通过写出包含 € 符号的文件名来创建。我通过以下代码获取文件名：

```
for file in os.listdir(r'C:\test'):
    filenamelist = filenamelist + " " + file 
```

其中一些文件名将在文件名本身中包含 € 符号。然后我想将这些文件名写为 XML 属性，如下所示：

```
optionsdirectory = os.getcwd()
optionsfile = os.path.join(optionsdirectory, "conf.xml")
optionstree = ET.parse(optionsfile)
options = optionstree.getroot()
for option in options:
    if option.tag == "filenames":
        option.text = filenamelist
optionstree.write(optionsfile, encoding="UTF-8") 
```

最初，我将有一个 xml 文件“conf.xml”，其中将包含一个空的“文件名”属性。我知道它很笨拙，但它适用于我的目的。

因此，€ 符号不能来自 Unicode 文字。当我运行上面的代码时，我得到了我在原始帖子中发布的错误，它基本上说当它遇到'filenamelist'中的€符号时它会举手。

# mysql - 在 GlassFish 3 Application Server 中配置 MySQL 数据源

> ID：12655842
> 
> 赞同：0
> 
> 时间：2012-09-29T19:37:32.343
> 
> 标签：mysql, osx-lion, glassfish-3, netbeans-7

有谁知道在 glassfish 3 中配置 mysql 数据源的步骤？我坚持`datasourceName`应该是什么。这是我一直在遵循的步骤。他们是正确的吗？我错过了一步吗？顺便说一句，我`3.1.2`安装了 glassfish 作为`Netbeans 7.2`on`Mac OSX Lion`

*   1) 使用 XAMPP 安装 MySQL
*   2）下载/jars/jdbc-drivers/mysql-connector-java-5.1.22并添加到CLASSPATH
*   3) 从 Netbeans，启动 glassfish 并启动`Domain Admin Console`
*   4) 转到常见任务 > 资源 > JDBC > JDBC 连接池，然后单击`NEW`
*   5) 池名称：MySQL
*   资源类型：javax.sql.ConnectionPoolDataSource
*   数据库驱动供应商：MySQL
*   6) 单击`Next`并向下滚动到`Additional Properties (8)`
*   端口号：3306
*   databaseName: mygames // 这是任意的
*   datasourceName: com.mysql.jdbc.Driver // 我不确定这是否正确
*   角色名称：
*   网络协议
*   服务器名称：本地主机
*   用户：我的名字
*   密码：我的密码
*   7) 点击完成。

我仍然有一个问题，是否有最佳放置位置`/jars/jdbc-drivers/mysql-connector-java-5.1.22`？以及如何告诉 DataSource 设置如何访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:25:38.317

我的配置确实有效。我遇到的问题是将 jar 放在正确的目录路径中。我想我找到了，因为它有效：

```
 /Applications/NetBeans/glassfish-3.1.2.2/glassfish/lib 
```

# debugging - 如何记录和跟踪 NodeJS 事件和事件处理程序调用？

> ID：12655848
> 
> 赞同：4
> 
> 时间：2012-09-29T19:37:58.820
> 
> 标签：debugging, node.js, logging, event-handling, trace

当事件处理程序注册时，有什么方法可以记录所有其他已注册的事件处理程序？

还有有没有办法记录所有发出的事件，以及在运行时发出事件时触发的处理程序函数的名称？

如果 nodejs 应用程序触发了链式事件（一个事件触发另一个），并且每个事件有多个处理程序，当 event-handler-chain 的叶子发生异常时，stacktrace 不会显示上下文的完整信息。

在这种情况下，事件日志和处理程序信息将非常有用。

一种 hackey 解决方案是将（有条件的）日志记录添加到[https://github.com/joyent/node/blob/master/lib/events.js](https://github.com/joyent/node/blob/master/lib/events.js)但我相信一定有更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T06:14:30.740

[https://github.com/joyent/node/blob/master/lib/events.js#L142-147](https://github.com/joyent/node/blob/master/lib/events.js#L142-147)

它发出一个`newListener`带有名称和函数的事件。

接下来，不要更改 events.js，而是打原型。一旦你需要 EventEmitter，你可以在运行时对其进行猴子补丁。这通常是不好的做法，特别是对于像 EventEmitter 这样关键的东西，但它可以调试你自己的程序。

```
(function(){
  var old = EventEmitter.prototype.emit;
  EventEmitter.prototype.emit = ...
)(); 
```

接下来，记录其他处理程序：

```
console.log(emitter.listeners('eventName')); 
```

# mysql - mysql：在一个语句中选择和求和

> ID：12655857
> 
> 赞同：1
> 
> 时间：2012-09-29T19:38:57.323
> 
> 标签：mysql, sum

我想从多个表中选择数据，并且我想从一个语句中的一列中获取总和。如果我只使用 sum (column)，我会将结果限制为一行，如果我使用 group by，sum (column) 似乎不起作用。或者我只是太愚蠢了。

也可能有一个更优雅的解决方案。（它在第 6 行的总和）。

```
SELECT 
    lb.date AS l_date, 
    gbb.id AS bid, 
    gbb.cash AS b_cash, 
    gpr.cash AS p_cash, 
    sum (gbb.cash) as t_cash,
    gbb.name
FROM 
    log_buildings lb, 
    game_building_basic gbb, 
    game_player_buildings gpb, 
    game_player_ress gpr
WHERE 
    lb.pid = :pid
    AND gpr.id = :pid
    AND gpb.pid = :pid
    AND lb.date >= gpr.date
    AND lb.bid = gbb.id
    AND gpb.buildings_id = gbb.id
    AND gpb.pid = :pid"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:02:32.490

首先，您应该学习查询的 JOIN 语法：

```
SELECT lb.date AS l_date, gbb.id AS bid, gbb.cash AS b_cash, gpr.cash AS p_cash,
       sum (gbb.cash) as t_cash, gbb.name
FROM log_buildings lb join
     game_building_basic gbb
     on lb.bid = bgg.bid join
     game_player_buildings gpb
     on gpb.buildings_id = gbb.id join
     game_player_ress gpr
     on lb.date >= gpr.date
WHERE lb.pid = :pid AND gpr.id = :pid AND gpb.pid = :pid AND gpb.pid = :pid" 
```

如所写，此查询将返回所有字段的一组随机数据以及总和。通过使用汇总，您可以在单独的行中获取总计：

```
SELECT lb.date AS l_date, gbb.id AS bid, gbb.cash AS b_cash, gpr.cash AS p_cash,
       sum (gbb.cash) as t_cash, gbb.name
FROM log_buildings lb join
     game_building_basic gbb
     on lb.bid = bgg.bid join
     game_player_buildings gpb
     on gpb.buildings_id = gbb.id join
     game_player_ress gpr
     on lb.date >= gpr.date
WHERE lb.pid = :pid AND gpr.id = :pid AND gpb.pid = :pid AND gpb.pid = :pid"
group by lb.date, gbb.id, gbb.cash, gpr.cash, gbb.name with rollup 
```

但是，您希望它作为单独的列，而不是单独的行（并`rollup`在不同级别产生多个总和。为此，您需要一个子查询：

```
SELECT lb.date AS l_date, gbb.id AS bid, gbb.cash AS b_cash, gpr.cash AS p_cash,
       gbb.name,
       (select sum(gbb.cash)
        FROM log_buildings lb join
             game_building_basic gbb
             on lb.bid = bgg.bid join
             game_player_buildings gpb
             on gpb.buildings_id = gbb.id join
             game_player_ress gpr
             on lb.date >= gpr.date
        WHERE lb.pid = :pid AND gpr.id = :pid AND gpb.pid = :pid AND gpb.pid = :pid
       ) as t_cash
FROM log_buildings lb join
     game_building_basic gbb
     on lb.bid = bgg.bid join
     game_player_buildings gpb
     on gpb.buildings_id = gbb.id join
     game_player_ress gpr
     on lb.date >= gpr.date
WHERE lb.pid = :pid AND gpr.id = :pid AND gpb.pid = :pid AND gpb.pid = :pid 
```

在几乎任何其他数据库中，您都可以使用 windows 函数执行此操作：

```
SELECT lb.date AS l_date, gbb.id AS bid, gbb.cash AS b_cash, gpr.cash AS p_cash,
       gbb.name,sum(gbb.cash) over () 
```

但是 MySQL 不支持这种语法。

# c# - DrawToBitmap - GDI+ 中发生一般错误

> ID：12655864
> 
> 赞同：1
> 
> 时间：2012-09-29T19:39:33.407
> 
> 标签：c#, .net, bitmap, drawtobitmap

我正在尝试从我的 windows 窗体窗体中的 flash 对象中捕获屏幕截图。

当我尝试执行此操作并进行调试时，我`A generic error occurred in GDI+.`在`bmp.Save`... 行得到异常。

不过似乎要负责的是`DrawToBitmap`。尝试为此屏幕截图设置图片框图像会出现异常`Parameter is not valid`。

我也尝试过使用`Form.ActiveForm.DrawToBitmap`，但这似乎在做同样的事情......我不知道此时问题可能是什么。

```
pictureBox1.Image = CaptureScreenshot();

// Capture screenshot of the form
private Bitmap CaptureScreenshot()
{
    using (var bmp = new Bitmap(500, 500))
    {
        axShockwaveFlash1.DrawToBitmap(bmp, new Rectangle(0, 0, 500, 500));
        bmp.Save(@"c:\screenshot.png");
        return bmp;
    }   
} 
```

# mysql - 如何从 Drupal 视图中查看有效的 mysql 查询

> ID：12655868
> 
> 赞同：2
> 
> 时间：2012-09-29T19:40:22.603
> 
> 标签：mysql, drupal-7, drupal-views

我阅读了一些建议，但无法弄清楚如何使视图生成和显示的查询 - 在 mysql 中有效。{} 中关闭了一些变量，而且我认为查询中有一些表在数据库中不存在。我试图在这里提取一个非常复杂的查询。提前10倍！

```
SELECT field_data_field_punch_status.field_punch_status_value AS field_data_field_punch_status_field_punch_status_value, users.name AS users_name, users.uid AS uid_1, field_data_field_punch_start.field_punch_start_value AS field_data_field_punch_start_field_punch_start_value, field_data_field_team.field_team_tid AS field_data_field_team_field_team_tid, users.access AS users_access, MIN(users.uid) AS uid, 'user' AS field_data_field_punch_status_user_entity_type, 'user' AS field_data_field_punch_start_user_entity_type, MIN(node_users.nid) AS node_users_nid, 'node' AS field_data_field_punch_end_node_entity_type, MAX(node_users__field_data_field_punch_end.field_punch_end_value) AS node_users__field_data_field_punch_end_field_punch_end_value, 'user' AS field_data_field_team_user_entity_type
FROM 
{users} users
LEFT JOIN {field_data_field_team} field_data_field_team ON users.uid = field_data_field_team.entity_id AND (field_data_field_team.entity_type = 'user' AND field_data_field_team.deleted = '0')
INNER JOIN {taxonomy_term_data} taxonomy_term_data_field_data_field_team ON field_data_field_team.field_team_tid = taxonomy_term_data_field_data_field_team.tid
LEFT JOIN {node} node_users ON users.uid = node_users.uid
INNER JOIN {users_roles} users_roles ON users.uid = users_roles.uid
LEFT JOIN {field_data_field_punch_status} field_data_field_punch_status ON users.uid = field_data_field_punch_status.entity_id AND (field_data_field_punch_status.entity_type = 'user' AND field_data_field_punch_status.deleted = '0')
LEFT JOIN {field_data_field_punch_start} field_data_field_punch_start ON users.uid = field_data_field_punch_start.entity_id AND (field_data_field_punch_start.entity_type = 'user' AND field_data_field_punch_start.deleted = '0')
LEFT JOIN {field_data_field_punch_end} node_users__field_data_field_punch_end ON node_users.nid = node_users__field_data_field_punch_end.entity_id AND (node_users__field_data_field_punch_end.entity_type = 'node' AND node_users__field_data_field_punch_end.deleted = '0')
WHERE (( (field_data_field_team.field_team_tid IN('0', '10', '11', '22', '12', '2', '21', '3', '13', '4', '14', '5', '15', '6', '16', '7', '17', '18', '20', '19') ) AND (users_roles.rid IN  ('4', '5')) ))
GROUP BY field_data_field_punch_status_field_punch_status_value, users_name, uid_1, field_data_field_punch_start_field_punch_start_value, field_data_field_team_field_team_tid, users_access
ORDER BY field_data_field_punch_start_field_punch_start_value DESC, users_access DESC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T22:30:58.673

您在大括号（例如 {field_data_field_team}）之间看到的是数据库表的名称。它们显示在大括号之间，因为执行 SQL 查询的代码将大括号之间的内容替换为为数据库表设置的前缀。

假设您的 Drupal 安装使用 drupal7_ 作为前缀；称为 {field_data_field_team} 的表的名称是 drupal7_field_data_field_team。

# php - 用户单击提交按钮时如何防止退出时出现javascript警报

> ID：12655873
> 
> 赞同：0
> 
> 时间：2012-09-29T19:41:08.230
> 
> 标签：php, javascript, alert

我在表单页面上安装了以下 js 代码，以在用户尝试在填写表单的过程中离开页面时提醒用户：

```
<script type="text/javascript">
  window.onbeforeunload = function (evt) {
  var message = 'Data you entered may not be saved';
  if (typeof evt == 'undefined') {
  evt = window.event;
  }
  if (evt) {
  evt.returnValue = message;
  }
  return message;
  }
</script> 
```

当用户单击其他链接或选项卡以尝试离开页面时，它可以正常工作。但是即使用户单击提交按钮以提交表单中的更改，也会弹出 javascript 消息。

提交表单时如何防止弹出此js消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T19:43:20.977

你有几个选择。

1.  您可以在发布时设置一个全局标志，您可以在 beforeunload 函数中对其进行检查并采取相应措施。

2.  您可以在发布时删除 beforeunload 函数，方法是将其设置为空函数或不提示的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T19:44:21.660

在您的表单上`onsubmit`，设置一个标志以告知`onbeforeunload`它可以忽略此卸载尝试。

例如：

```
<form ... onsubmit="window.nounloadcheck = true; return true;"> 
```

在您的 onbeforeunload 中，您可以执行以下操作：

```
window.onbeforeunload = function (evt) {
  if(window.nounloadcheck == true) return; // ignore
  ... 
```

# c++ - 作为一种抽象，C++ 是否支持表示两个以上值之一的“位”？

> ID：12655875
> 
> 赞同：12
> 
> 时间：2012-09-29T19:41:43.610
> 
> 标签：c++, language-lawyer

`[C++11: 1.7]`用位来讨论*字节*：

> C++ 内存模型中的基本存储单元是字节。一个字节至少大到足以包含基本执行字符集 (2.3) 的任何成员和 Unicode UTF-8 编码形式的八位代码单元，并且由连续的位序列组成，其数量为实现定义。最低有效位称为低位；最高有效位称为高位。C++ 程序可用的内存由一个或多个连续字节序列组成。每个字节都有一个唯一的地址。

但是，我在定义“位”的标准中找不到任何地方。

**那么说 C++ 对单个位可以表示的值的数量没有限制是真的吗？**

例如，它是否允许三态位？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T19:41:43.610

列出的规范性参考资料包括`[C++11: 1.2]`“ISO/IEC 9899:1999，编程语言 — C”。

反过来，这个标准说：

> `[C99: 3.5]:` **执行环境中的1**位数据存储单元，*大到足以容纳可能具有两个值之一的对象*

这并不排除位是更大的数据存储单元，因此 C++ 作为一种语言确实可以支持三态位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T20:15:45.100

3.9.1.7 说

> bool、char、wchar_t 类型以及有符号和无符号整数类型统称为整数类型。48) 整数类型的同义词是整数类型。整数类型的表示应使用纯二进制计数系统定义值。49) [ 示例：本国际标准允许整数类型的 2 的补码、1 的补码和带符号的幅度表示。—结束示例]"

笔记上`49`写着

> 整数的位置表示，它使用二进制数字 0 和 1，其中由连续位表示的值是相加的，从 1 开始，并乘以 2 的连续整数幂，可能最高位置的位除外。（改编自美国国家信息处理系统词典。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T23:29:17.820

我不同意接受的答案，因为这可以由三元机器模拟，这是规范明确允许的。

> § 3.9.1/4 声明为无符号的无符号整数应遵守算术模 2 ^n的定律，其中 n 是该特定整数大小的值表示中的位数。
> § 1.8/5 普通可复制或标准布局类型 (3.9) 的对象应占用连续的存储字节。
> § 3.9/9 算术类型 (3.9.1)... 统称为标量类型。标量类型，...此类类型的数组...统称为 POD 类型。标量类型...，此类类型的数组...统称为普通可复制类型。
> § 3.8/2 对于任何可简单复制类型的对象... `T`，无论该对象是否持有类型的有效值`T`，构成该对象的底层字节都可以复制到一个数组中`char`或`unsigned char`. `char`如果or的数组的内容`unsigned char`被复制回对象，则该对象随后应保持其原始值。

这里的问题是，在所有点上，所有可简单复制的多字节对象的状态都必须可复制到数组`char`并返回而不会丢失。这意味着模拟 base 2 机器的三元机器（如具有模“翻转”的基本算术类型所要求的那样），必须在每个*无符号*多字节算术运算中模拟从每个模拟字节到下一个字节的翻转。

即使这在三元机器上也可以缓慢地模拟，但是如果所有原始类型都由恰好 41 个三元组组成，那么编译器所需要担心的就是无符号翻转/欠压，这可能是可行的。（显然，模拟`^`,`|`并且`&`也很慢，但在我看来这不是一个问题）我认为*可以*做到，但是为三元机器制作符合标准的 C++ 编译器是非常不切实际的。

# objective-c - NSTimer 没有运行选择器？

> ID：12655883
> 
> 赞同：0
> 
> 时间：2012-09-29T19:43:12.800
> 
> 标签：objective-c, ios, nstimer

据我所知，我有以下两个陈述本质上应该做完全相同的事情：

```
//[NSTimer timerWithTimeInterval:2.0 target:self selector:@selector(hideSuccessImageFromAllScreen:) userInfo:nil repeats:NO];
[self performSelector:@selector(hideSuccessImageFromAllScreen:) withObject:nil afterDelay:2.0]; 
```

其次是

```
-(void)hideSuccessImageFromAllScreen:(NSTimer *)timer{... 
```

perform 选择器方法运行得很好，选择器被执行。但是，如果我取消注释第一行并注释掉第二行，则选择器永远不会触发。我究竟做错了什么？我必须手动启动计时器吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T19:45:14.407

您要么必须手动启动计时器，要么使用`+[NSTimer scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:]`，它将为您自动启动它：

```
[NSTimer scheduledTimerWithTimeInterval:2.0
                                 target:self
                              selector:@selector(hideSuccessImageFromAllScreen:)
                              userInfo:nil
                               repeats:NO]; 
```

# iphone - 链接器命令失败

> ID：12655888
> 
> 赞同：0
> 
> 时间：2012-09-29T19:44:19.343
> 
> 标签：iphone, objective-c, ios

我的 xcode 停止响应，所以我强迫它关闭，在我打开它并尝试再次构建程序后，它给了我以下错误，任何可以帮助请，我正在使用 Xcode 4.5 请注意我在 xcode 4.4 上构建了这个应用程序并且它工作前 ！

> ld：警告：找不到选项“-L/Users/../../../Downloads/RestKit-RestKit-991bd5c/Examples/RKDiscussionBoardExample/DiscussionBoard/Libraries/three20”的目录 ld：警告：找不到目录选项'-L/Users/../../../Downloads/RestKit-RestKit-991bd5c/Specs/Runner/OCMock' ld：警告：找不到选项'-L/Users/facebook-ios-sdk的目录-lib' ld：警告：找不到选项“-L/Users/../../../../Downloads/TestFlightSDK1.0”的目录：警告：忽略文件/Users/omars/Library/Developer /Xcode/DerivedData/Build/Products/Debug-iphoneos/libSSToolkit.a，文件是为存档而构建的，它不是被链接的架构（armv7s）：/Users/omars/Library/Developer/Xcode/DerivedData/Build/Products/调试-iphoneos/libSSToolkit.a ld：文件是通用的（3 个切片）但不包含一个（n）armv7s 切片：/Users/omars/Desktop/libTestFlight.a 用于架构 armv7s clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:59:22.727

您是否移动了项目中的任何文件夹，也许是偶然的？如果 rsswtmr 的回答没有帮助，请使用项目中的设置检查上述某些文件/文件夹（如 OCMock）的真实位置。您可以通过在 XCode 4.5 中打开“实用程序”视图（3 个视图按钮的最右侧）来查看项目认为它们在哪里。另外，查看是否有任何文件名显示为红色（表示 Xcode 找不到它们）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T19:53:13.760

您可以检查项目构建设置是否以某种方式被修改，但是当这种情况发生时，我总是做的第一件事就是彻底清理（shift-cmd-option K）并重新构建。这在 90% 的时间里解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T07:01:08.393

问题是restkit需要更新才能在xcode 4.5上工作，在我重新安装它的新版本后，一切正常

# coffeescript - AngularJS：如何在多个文件中创建控制器

> ID：12655890
> 
> 赞同：24
> 
> 时间：2012-09-29T19:44:25.740
> 
> 标签：coffeescript, angularjs

我正在尝试将我的控制器拆分为多个文件，但是当我尝试在我的模块中注册它们时出现错误：

**groupcontroller.coffee**

```
app = angular.module('WebChat', []);
app.controller 'GroupController', ($scope) -> 
```

**用户控制器.coffee**

```
app = angular.module('WebChat', []);
app.controller 'UserController', ($scope) -> 
```

**错误**

错误：参数“GroupController”不是函数，未定义

从文档中我并没有真正了解模块方法的作用。它是否将我的控制器与密钥“Webchat”一起存储？

**编辑：** 似乎传递 [] 会创建一个新模块并覆盖前一个模块

```
app = angular.module('WebChat', []); 
```

为防止这种情况，您必须省略 [] 之类的

```
app = angular.module('WebChat'); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-24T08:11:37.123

这是我所做的：

索引.html

```
<script src="js/angular.js" type="text/javascript" charset="utf-8"></script>
<script src="js/myApp.js" type="text/javascript" charset="utf-8"></script>
<script src="js/myCtrlA.js" type="text/javascript" charset="utf-8"></script>
<script src="js/myCtrlB.js" type="text/javascript" charset="utf-8"></script> 
```

应用程序.js

```
myApp = angular.module('myApp', [])
myApp.config ($routeProvider) ->
    $routeProvider.when('/a', {controller: 'myCtrlA', templateUrl: 'a.html'})
    $routeProvider.when('/b', {controller: 'myCtrlB', templateUrl: 'b.html'}) 
```

我的CtrlA.js

```
angular.module('myApp').controller 'myCtrlA', ($scope) ->
    console.log 'this is myCtrlA' 
```

我的CtrlB.js

```
angular.module('myApp').controller 'myCtrlB', ($scope) ->
    console.log 'this is myCtrlB' 
```

如您所见，如果我有很多控制器 js 文件，那么 index.html 中也会有很多脚本元素。
我还不知道该怎么处理。

仅供参考：[http](http://briantford.com/blog/huuuuuge-angular-apps.html)
://briantford.com/blog/huuuuuge-angular-apps.html 但这篇文章也没有提到 html 文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-29T20:12:17.677

检查代码中引用“GroupController”的其他位置（可能在您的路线中）。很有可能您将它作为变量存在，但是当您在模块中声明控制器时，您必须将其包装在引号中。例如：

```
MyCtrl1() = -> ()
...
$routeProvider.when('/view1', {templateUrl: 'partials/partial1.html', controller: MyCtrl1}) 
```

工作正常，因为 MyCtrl1 是一个变量。但是当你在模块中声明控制器时：

```
app = angular.module('WebChat', []);
app.controller 'GroupController', ($scope) ->
   # ...

$routeProvider.when('/view1', {templateUrl: 'partials/partial1.html', controller: 'GroupController'}) 
```

'GroupController' 需要在路由中加上引号。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-24T16:48:09.920

我在我的 app.js 文件中定义了我的 app var，首先引用了女巫，然后是控制器文件，例如 FirstCtrl.js。

所以在 app.js 中

```
var app = angular.module(... 
```

在 FirstCtrl.js

```
app.controller('FirstCtrl', 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-01T14:11:44.513

这个问题有一个简单的解决方案。在编译之前连接您的 *.coffee 文件。如果你使用'gulp'，你可以创建这样的任务：

```
 gulp.src(['./assets/js/ng/**/*.coffee'])
    .pipe(concat('main.coffee'))
    .pipe(coffee())
    .pipe(ngmin())
    .pipe(gulp.dest('./public/static/js/app'))
    .pipe(livereload(server)); 
```

例如：

聊天.咖啡

```
myChat = angular.module 'myChat', [] 
```

味精咖啡

```
myChat
.directive 'message', () ->
    return {
        restrict: 'E'
        replace : true
        transclude: true
        scope: true
        template: '<div></div>' 
    } 
```

连接和编译后，我们有：

```
(function () {
  var myChat;
  myChat = angular.module('myChat', []);
  myChat.directive('message', function () {
    return {
      restrict: 'E',
      replace: true,
      transclude: true,
      scope: true,
      template: '<div></div>'
    };
  });

}.call(this)); 
```

享受！

# asp.net - ASP.NET Web.Config ConfigurationManager.AppSettings 文件缓存

> ID：12655891
> 
> 赞同：6
> 
> 时间：2012-09-29T19:44:31.877
> 
> 标签：asp.net, caching, web-config, configurationmanager

我正在使用 ConfigurationManager.AppSettings 集合从 ASP.NET 应用程序中的 Web.config 文件中检索配置值。有谁知道 AppSettings 中的值是否以某种方式缓存在内存中，或者每次检索设置时是否都会读取 Web.config 文件？

```
string someValue = ConfigurationManager.AppSettings["SomeSetting"]; 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T19:45:52.723

它们是从内存中获取的，因为 web.config 在应用程序启动时只读取一次。

但是，ASP.NET 监视 web.config 文件以检测和加载更改

> 重要的是要意识到在我们第一次检索设置值时会读取、解析和缓存整个部分。从那时起，所有设置值的请求都来自内存缓存，因此访问速度非常快，并且不会产生任何后续访问文件或解析 XML 的开销。

[MSDN 中解释的应用程序配置文件](http://msdn.microsoft.com/en-us/library/aa478432.aspx)

欲了解更多信息：

[http://weblogs.asp.net/stevewellens/archive/2011/01/15/web-config-is-cached.aspx](http://weblogs.asp.net/stevewellens/archive/2011/01/15/web-config-is-cached.aspx)

# ruby - Ruby / Sinatra - 没有表格的 POST 数据

> ID：12655893
> 
> 赞同：1
> 
> 时间：2012-09-29T19:44:33.083
> 
> 标签：ruby, forms, sinatra

我有一个按钮，它是一个链接。当用户单击该链接时，我想对另一个处理此单击的路由进行 POST。我可以在不使用的情况下以某种方式做到这一点`<form>`吗？这意味着，只需单击链接，链接就不是表单的提交按钮。

```
<a href="/buyitem/"><button class="btn btn-info small">Buy Item</button></a> 
```

我知道使用 AJAX 是可能的，但我想知道是否还有其他方法。

AJAX方式：

```
$.post('/buyitem', { key1: 'value1', key2: 'value2' }, function(result) {
    alert('successfully posted key1=value1&key2=value2');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:59:42.350

不，没有办法告诉没有 js 的 html 链接走下发布路线。试图找出相同的`DELETE`链接。

# android - finish() 和 Activity 生命周期

> ID：12655898
> 
> 赞同：12
> 
> 时间：2012-09-29T19:44:59.210
> 
> 标签：android, android-activity, activity-lifecycle

我正在为一门课学习 Android 编程，我有一个关于 finish() 如何融入 Activity 生命周期的快速问题。

当您调用 finish() 时，会启动什么生命周期回调？我认为它是 onPause()，然后是 onStop() 和 onDestroy()。它是否正确？

真的，我只是想确保它不会直接跳转到 onDestroy()。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-05-14T01:04:55.057

> 真的，我只是想确保它不会直接跳转到 onDestroy()。？？？

## 不！

但是当**调用 finish() 导致活动生命周期中断**时有**一个例外**，当您从 onCreate() 方法调用 finish() 时会发生这种情况，在这种情况下**onDestroy() 将立即被调用！**

 ****[http://developer.android.com/reference/android/app/Activity.html#onCreate(android.os.Bundle)](http://developer.android.com/reference/android/app/Activity.html#onCreate(android.os.Bundle))

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-29T19:50:13.560

你是对的。onPause，onStop，onDestroy。

[这](http://developer.android.com/training/basics/activity-lifecycle/stopping.html)是文档。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-29T19:52:49.460

*是的，它不会跳过 onPause 和 onStop 跳转到 onDestroy()。*

您也可能对**onPostResume() 、onPostPause() 、onPostCreate()、onUserLeaveHint()**等感兴趣。这些没有在活动生命周期中列出

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T19:59:20.567

分析此类问题和问题对您来说也可能非常有趣。例如，您可以在**onPause()**方法中设置调试断点，并从该点调查程序流程。

此外，一些打印输出可以为您提供一些有用的信息。

例如，您可以编写 System.out.println("name of the method" + " called."); 在您认为被调用的每个活动方法中。（例如覆盖**onPause()**，调用**super.onPause()**并放置控制台打印输出以查看是否调用了该方法。

在开发过程中，您将了解很多关于 Android 系统的一些小调查。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-29T20:42:38.887

创建一个新的 Android 应用程序并将其放置在主活动中。

然后查看输出的 LogCat 窗口（在 Android 的 DDMS 下）

构建相同的应用程序 - 将所有 onPause、onStop 等方法与输出添加到 LogCat。

当您的程序运行时，您可以监控调用的内容和时间。

```
package com.app.myapp;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.LinearLayout;

public class MyApp extends Activity
{

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        LinearLayout layout = new LinearLayout(this); 

        Button exit = new Button(this);
        exit.setText("finish");
        exit.setOnClickListener(new Button.OnClickListener()
        {
            public void onClick(View v)
            {
                // TODO Auto-generated method stub
                Log.v("MyApp", "finish");
                finish();
            }
        });

        layout.addView(exit);

        setContentView(layout);

        Log.v("MyApp", "onCreate");
    }

    @Override
    protected void onDestroy()
    {
        // TODO Auto-generated method stub
        super.onDestroy();

        Log.v("MyApp", "onDestroy");
    }

    @Override
    protected void onPause()
    {
        // TODO Auto-generated method stub
        super.onPause();

        Log.v("MyApp", "onPause");
    }

    @Override
    protected void onRestart()
    {
        // TODO Auto-generated method stub
        super.onRestart();

        Log.v("MyApp", "onRestart");
    }

    @Override
    protected void onResume()
    {
        // TODO Auto-generated method stub
        super.onResume();

        Log.v("MyApp", "onResume");
    }

    @Override
    protected void onStart()
    {
        // TODO Auto-generated method stub
        super.onStart();

        Log.v("MyApp", "onStart");
    }

    @Override
    protected void onStop()
    {
        // TODO Auto-generated method stub
        super.onStop();

        Log.v("MyApp", "onStop");
    }

} 
```****

# python - Python vars 嵌套赋值

> ID：12655902
> 
> 赞同：1
> 
> 时间：2012-09-29T19:45:18.107
> 
> 标签：python, variable-assignment, variables

标题谈论的一个例子：

```
#seen in a demo of PyOpenGL
# http://PyOpenGL.sourceforge.net/
size = self.size = self.GetClientSize() 
```

这是干什么用的？它是如何工作的以及何时使用它？

我的想法是这允许将第三项的值分配给第一项和第二项……如果是这样，我们可以嵌套无限数量的变量。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-29T19:46:38.993

这是一个链式分配。您将`size`和都设置`self.size`为 的返回值`self.GetClientSize()`。

您可以放弃链接分配：

```
>>> foo = bar = spam = eggs = 'frobnicators'
>>> foo
'frobnicators'
>>> bar, spam, eggs
('frobnicators', 'frobnicators', 'frobnicators') 
```

请注意，右侧的表达式仅计算一次，并且它的值从左到右分配给所有左侧变量。

如果你反编译了 python 字节码，这很容易看出：

```
>>> import dis
>>> def foo():
...     bar = baz = eggs = 'spam'
... 
>>> dis.dis(foo)
  2           0 LOAD_CONST               1 ('spam')
              3 DUP_TOP             
              4 STORE_FAST               0 (bar)
              7 DUP_TOP             
              8 STORE_FAST               1 (baz)
             11 STORE_FAST               2 (eggs)
             14 LOAD_CONST               0 (None)
             17 RETURN_VALUE 
```

`DUP_TOP`创建一个对堆栈 () 上的值的额外引用，该值`spam`存储在 中`bar`，然后`baz`给出另一个重复的引用，然后该值存储在`eggs`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T19:59:53.473

大致相当于

```
temp=self.GetClientSize()
size=temp
self.size=temp
del temp 
```

但它执行得更快，通常比这种形式更容易阅读。请注意，它与

```
self.size=self.GetClientSize()
size=self.getClientSize() 
```

执行 self.getClientSize() 2次，也不相同

```
self.size=self.GetClientSize()
size=self.size 
```

观察

```
class test(object):
    def setter(self, val):
        self._t=val
    def getter(self):
        return 5
    t=property(fget=getter,fset=setter)

a=test()
b=a.t=9
print a.t, b 
```

打印 5 9

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T19:46:55.640

当您想将 RHS 上的值分配给同一语句中的两个变量时..

```
a = b = 2 
```

a 和 b 都包含 2..

当您想`alias`为您的变量创建一个值时，可以使用它，您刚刚为其分配了值，因为您可能想以两种不同的方式使用该值..

# java - java作业画房子小程序

> ID：12655910
> 
> 赞同：-1
> 
> 时间：2012-09-29T19:46:14.937
> 
> 标签：java, graphics, applet

我正在做一个家庭作业，在 Java 小程序中画房子。房子在一个大的主矩形内有三个矩形，代表一扇门和两扇窗户。我需要窗户在点击时改变颜色，我已经到了画房子的地步，也画了门窗，但我无法通过点击鼠标来改变它们的颜色. 我很难确定为什么会这样。

总而言之，房子被画了；门窗矩形被绘制并填充为黑色。单击任何窗口或门矩形时，不会发生任何错误，也不会发生颜色变化。

代码如下：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.Graphics;

public class DrawHouse extends JApplet implements MouseListener
{
    private int mX; //variable to hold x position of the mouse cursor when clicked
    private int mY; //variable to hold y position of the mouse cursor when clicked
    private int rect1x;
    private int rect1y;
    private int rect1w;
    private int rect1h;
    private int rect2x;
    private int rect2y;
    private int rect2w;
    private int rect2h;
    private int rect3x;
    private int rect3y;
    private int rect3w;
    private int rect3h;
    boolean rect1Clicked;
    boolean rect2Clicked;
    boolean rect3Clicked;

    public void init()
    {
        super.init();
    }

    public void paint(Graphics g)
    {
        super.paint(g);

        Polygon pg = new Polygon();

        pg.addPoint(280, 200);
        pg.addPoint(470, 100);
        pg.addPoint(670, 200);

        g.drawPolygon(pg);

        g.setColor(Color.BLACK);
        g.drawRect(300, 200, 350, 300);
        g.fillRect(350, 300, 50, 100);
        g.fillRect(550, 300, 50, 100);
        g.fillRect(440, 300, 75, 200);

        addMouseListener(this);

        if(rect1Clicked || rect2Clicked || rect3Clicked)
        {
            g.setColor(Color.GRAY);
            g.clearRect(rect1x, rect1y, rect1w, rect1h);
            g.fillRect(rect1x, rect1y, rect1w, rect1h);
            g.setColor(Color.GRAY);
            g.clearRect(rect2x, rect2y, rect2w, rect2h);
            g.fillRect(rect2x, rect2y, rect2w, rect2h);
            g.setColor(Color.GRAY);
            g.clearRect(rect3x, rect3y, rect3w, rect3h);
            g.fillRect(rect3x, rect3y, rect3w, rect3h);
        }
    }

    @Override
    public void mouseClicked(MouseEvent e) 
    {
        rect1x = 350;
        rect1y = 300;
        rect1w = 350;
        rect1h = 300;
        rect2x = 550;
        rect2y = 300;
        rect2w = 50;
        rect2h = 100;
        rect3x = 440;
        rect3y = 300;
        rect3w = 75;
        rect3h = 200;
        mX = e.getX();
        mY = e.getY();

        if(mX > rect1x && mX < rect1x + rect1w && mY > rect1y && mY < rect1y + rect1h)
        {
            rect1Clicked = true;
        }
        else
        { 
            rect1Clicked = false;
        }
        if(mX > rect2x && mX < rect2x + rect2w && mY > rect2y && mY < rect2y+rect2h)
        {
            rect2Clicked = true;
        }
        else
        {
            rect2Clicked = false;
        }
        if(mX > rect3x && mX < rect3x + rect3w && mY > rect3y && mY < rect3y + rect3h)
        {
            rect3Clicked = true;
        }
        else
        {
            rect3Clicked = false;
        }
    }

} 
```

在此先感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:02:12.843

你真的让自己的生活变得非常困难。Java Graphics API 有许多专门用于解决这个问题的类。

作为一般经验法则。永远不要覆盖`paint`顶级容器的任何方法。使用适当的组件，例如`JPanel`或`JComponent`。

如果可能，请`paintComponent`改用该方法。

正如 HoverCraft 所指出的，不要从`paint`方法中修改 UI，这包括添加侦听器。该`paint`方法将被调用很多次，这意味着每次调用它时，您都会注册另一个监听器......

您需要先阅读[2D 图形](http://docs.oracle.com/javase/tutorial/2d/index.html)轨迹和[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)轨迹

虽然下面的示例使用 a `JFrame`，但基本原则适用。

```
public static void main(String[] args) {

    EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {

            try {
                UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
            } catch (ClassNotFoundException ex) {
            } catch (InstantiationException ex) {
            } catch (IllegalAccessException ex) {
            } catch (UnsupportedLookAndFeelException ex) {
            }

            JFrame frame = new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setLayout(new BorderLayout());
            frame.setSize(200, 200);
            frame.add(new HousePane());
            frame.setVisible(true);
            frame.setLocationRelativeTo(null);

        }
    });

}

public static class HousePane extends JPanel {

    private List<Rectangle2D> parts = new ArrayList<Rectangle2D>(25);
    private List<Rectangle2D> selected = new ArrayList<Rectangle2D>(25);

    public HousePane() {

        parts.add(new Rectangle2D.Float(10, 10, 50, 50));
        parts.add(new Rectangle2D.Float(60, 10, 50, 50));
        parts.add(new Rectangle2D.Float(10, 60, 50, 50));
        parts.add(new Rectangle2D.Float(60, 60, 50, 50));

        addMouseListener(new MouseAdapter() {

            @Override
            public void mouseClicked(MouseEvent e) {
                selected.clear();
                for (Rectangle2D rect : parts) {
                    if (rect.contains(e.getPoint())) {
                        selected.add(rect);
                    }
                }

                // You could require the user to click the shape again
                // to deselect by doing something like...
                //for (Rectangle2D rect : parts) {
                //    if (rect.contains(e.getPoint())) {
                //        if (selected.contains(rect)) {
                //            selected.remove(rect);
                //        } else {
                //            selected.add(rect);
                //        }
                //    }
                //}
                repaint();
            }

        });

    }

    @Override
    protected void paintComponent(Graphics g) {

        super.paintComponent(g);

        Graphics2D g2d = (Graphics2D) g;
        g2d.setColor(Color.BLUE);
        for (Rectangle2D rect : selected) {

            g2d.fill(rect);

        }
        g2d.setColor(Color.BLACK);
        for (Rectangle2D rect : parts) {

            g2d.draw(rect);

        }

    }

} 
```

# javascript - Backbone.js：执行 Fetch() 后，仅渲染新模型

> ID：12655913
> 
> 赞同：5
> 
> 时间：2012-09-29T19:46:30.913
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我有一个 Collection `App.listingList`，随后`fetch()`用`add:true`.

```
App.listingList.fetch({
        data: {some:data},
        processData: true,
        add: true
}); 
```

**问题：**新添加的模型如何在不重新渲染现有模型的视图的情况下渲染它们的视图。这意味着我不能这样做：

```
this.collection.each( function(listing, index) {
    new ListingMarkerView({ model:listing }).render();
}, this); 
```

**尝试#1**

在集合`add`事件上渲染视图，我无法找到一种方法来访问要渲染的新模型

```
ListingListView = Backbone.View.extend({

    initialize: function() {
        this.collection.bind('add', this.renderNew, this);
    },

    render: function() {
        console.log('render ListingListView');
        this.collection.each( function(listing, index) {
            new ListingMarkerView({ model:listing }).render();
        }, this);
        return this;
    },

    renderNew: function() {
        // How do I grab the new models?
        new ListingMarkerView({ model:listing }).render(); // wont work
        return this;
    }
}); 
```

**尝试#2**

我尝试使用第二个 Collection 来执行后续`fetch`操作，并使用 underscore.js 比较两个集合的模型`_.without()`，但返回的数组仍然包含在作为参数传递的第二个数组中找到的元素。Using`_difference()`还返回与第一个数组传递的相同数组。

```
App.listingListNew.fetch({
        data: {some:data},
        processData: true,
        success: function() {
            console.log(App.listingListNew.models);
            console.log(App.listingList.models);
            console.log(_.without(App.listingListNew.models, App.listingList.models));
            console.log(_.difference(App.listingListNew.models, App.listingList.models));
        }
}); 
```

**`console.log`输出**

由于我将 2 个相同的数组传入`_.difference()`and `_.without()`，因此输出应该是`[]`. 但它不是 :/ 也许是因为`cid`不同，所以它们中的每一个都被视为独一无二的？

![在此处输入图像描述](../Images/c351d1894f8d2a17fa6c22504b4cfcb4.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T20:24:01.420

当您执行 a`collection.bind('add', this.renderNew, this);`时，它会自动将添加的模型作为参数传递给您的方法。

在您的方法中包含参数，您应该可以访问新模型。

```
renderNew: function(newModel) {
    new ListingMarkerView({ model:newModel }).render();
    return this;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-01T14:06:33.973

我知道这是一个老问题，但我遇到了同样的问题并遇到了这个回复，所以我想我会添加一种替代方法。我不确定它的效率如何，但它确实有效。我正在使用它来支持无限滚动功能。

我使用的是 Backbone 1.2.1，所以在集合提取中，我使用的是这里的文档`remove:false`而不是弃用的：http `add:true`: [//backbonejs.org/#Collection-fetch](http://backbonejs.org/#Collection-fetch)

基本方法是在首次渲染时为集合中的每个项目设置一个`rendered`属性，然后在后续提取时使用该属性忽略先前渲染的项目。`true`

型号及收藏：

```
MyApp.Item = Backbone.Model.extend({});

MyApp.ItemList = Backbone.Collection.extend({
model: MyApp.Item,
    url: '/api/item/',
    parse : function(response){
        if (response.stat) {
            return _.map(response.content, function(model, id) {
                model.id = id;
                return model;
            });
        }
    }
}); 
```

意见：

```
MyApp.ItemListView = Backbone.View.extend({
    tagName: 'ul',
    className: 'item-list',
    render: function() {
        this.collection.each(function(item){
            //don't render items that have already been rendered!
            if (!item.rendered) {
                var itemListDetailView = new MyApp.ItemListDetailView({model: item});
                this.$el.append(itemListDetailView.render().el);
                item.rendered = true;
            }
        }, this)
        return this;
    }
});

MyApp.ItemListDetailView = Backbone.View.extend({
    tagName: 'li',
    className: 'item-list-detail',
    render: function() {
        $(this.el).html( '<div class="item-title">' + this.model.get('title') + '</div>');
        return this;
    }
}); 
```

抓取功能：

```
MyApp.loadMyItems = function () {
    MyApp.gettingData = true;  //flag for infinite scroll
    MyApp.myItems.fetch({
        traditional: true,
        remove:false,
        data: {
            u_id: MyApp.User.id,
            order: 'create_date:desc',
            start: MyApp.myItems.length,
            num_items: 10
        },
        success: function(){
           MyApp.gettingData = false; //flag for infinite scroll
           MyApp.myItemsView.render();
        }
    });
}; 
```

来电：

```
//on initial page load
MyApp.myItems = new MyApp.ItemsCollection();
MyApp.myItemsView = new MyApp.ItemListView({
                            collection: MyApp.myItems, 
                            el: $('#my-items') 
                         });
MyApp.loadMyItems();

//infinite scroll
$('#items .infinite-scroll').on('loadmore', function () {
    if (!MyApp.gettingData) {
        MyApp.loadMyItems();
    } 
}); 
```

# c# - 缺少表“webpages_OAuthMembership”

> ID：12655920
> 
> 赞同：2
> 
> 时间：2012-09-29T19:47:11.007
> 
> 标签：c#, asp.net, authentication

我正在使用 ASP.NET 和 WebSecurity。在这里，我尝试在我的 _AppStart.cshtml 文件调用中初始化数据库：`WebSecurity.InitializeDatabaseConnection("DecisionMaker", "Users", "UserId", "UserName", true);`

在此之后我调用：`WebSecurity.CreateAccount(account, password);`并得到以下异常：

```
 System.Web.Security.MembershipCreateUserException was unhandled by user code
  HResult=-2146233088
  Message=Unbekannter Fehler.
  Source=WebMatrix.WebData
  StackTrace:
       bei WebMatrix.WebData.SimpleMembershipProvider.CreateAccount(String userName, String password, Boolean requireConfirmationToken)
       bei WebMatrix.WebData.WebSecurity.CreateAccount(String userName, String password, Boolean requireConfirmationToken)
       bei ASP._Page_Account_Register_cshtml.Execute() in d:\Dvp\DecisionMaker\Website\Account\Register.cshtml:Zeile 8.
       bei System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
       bei System.Web.WebPages.WebPage.ExecutePageHierarchy(IEnumerable`1 executors)
       bei System.Web.WebPages.WebPage.ExecutePageHierarchy()
       bei System.Web.WebPages.StartPage.RunPage()
       bei System.Web.WebPages.StartPage.ExecutePageHierarchy()
       bei System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
       bei System.Web.WebPages.WebPageHttpHandler.ProcessRequestInternal(HttpContext context)
  InnerException: 
```

我认为这与表“webpages_OAuthMembership”有关，因为在示例中该表是自动生成的，并且通过我的实现它丢失了。

我的 web.config 文件如下所示：

```
 <?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <connectionStrings>
    <add name="DecisionMaker"
         connectionString="Data Source=|DataDirectory|\DecisionMaker.sdf;"/>
  </connectionStrings>
  <appSettings>
    <add key="enableSimpleMembership"
         value="true"/>
  </appSettings>
  <system.web>
    <compilation debug="true"
                 targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>
      </assemblies>
    </compilation>
  </system.web>
</configuration> 
```

谢谢如果有人可以帮助我！

# c++ - C++ 指针结构和多线程

> ID：12655926
> 
> 赞同：-3
> 
> 时间：2012-09-29T19:48:39.130
> 
> 标签：c++, multithreading, pointers

请有人可以向我的 adlers 大脑解释为什么炖牛肉不等于 123.222？

为了解释 goulash 是为每个线程设置为 123.222 的指针变量，但是当线程被激活并通过线程函数空指针传递指针时，每个线程的输出可悲的是 0 而不是应该的 123.222。

代码：

```
#include <stdlib.h>
#include <stdio.h>
#include <pthread.h>

typedef struct
{

int blossom;
double goulash;

}juniper;

juniper **jeffery;
juniper **james;

typedef struct{

int rodent_teeth;
juniper **raymond;

}rosebud;

void * thread_function(void *p){

juniper *monty = (juniper *) p;

printf("Goulash = %f\n",monty->goulash);

}

int main(){

int i;
rosebud *hattys_friend;

hattys_friend = (rosebud*) calloc(1,sizeof(rosebud));

hattys_friend->raymond = (juniper**) calloc(10,sizeof(juniper*));

for(i=0;i<10;i++){
hattys_friend->raymond[i] = (juniper*) calloc(10,sizeof(juniper));
        }

hattys_friend->raymond[2]->goulash = 5.6;

pthread_t threads[10];

for(int i=0;i<10;i++){

hattys_friend->raymond[i]->goulash = 123.222;
hattys_friend->rodent_teeth = i;

pthread_create(&threads[i],NULL,thread_function,(void*) &hattys_friend->raymond[i]);

printf("creating thread %d\n",i);

}

for(int i=0;i<10;i++){

pthread_join(threads[i],NULL);

}

jeffery = &hattys_friend->raymond[2];

james = hattys_friend->raymond;

printf("jeffery -> goulash = %f\n",(*jeffery)->goulash);

printf("james -> goulash = %f\n",(*(james+2))->goulash);

hattys_friend->raymond[2]->goulash = 1.6;

printf("james -> goulash = %f\n",(*(james+2))->goulash);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T20:02:51.430

```
void * thread_function(void *p){
    juniper *monty = (juniper *) p;
    printf("Goulash = %f\n",monty->goulash);
} 
```

您`thread_function`希望收到一个`juniper*`，但是

```
pthread_create(&threads[i],NULL,thread_function,(void*) &hattys_friend->raymond[i]); 
```

`hattys_friend->raymond[i]`已经是 a `juniper*`，所以你传递给它 a `juniper**`，并且访问`monty->goulash`是未定义的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T20:07:42.923

问题是您将指向对象的指针传递`juniper`给线程。但是，在线程启动例程中，您将此指针转换为指向`juniper`. 这是未定义的行为。

# c# - 通过接口进行多重继承有什么用？

> ID：12655931
> 
> 赞同：0
> 
> 时间：2012-09-29T19:49:17.853
> 
> 标签：c#, oop

> **可能重复：**
> [为什么 Java 或 C# 中不允许多重继承？](https://stackoverflow.com/questions/995255/why-is-multiple-inheritance-not-allowed-in-java-or-c)

**问：** C# 支持多重继承吗？

**答：**是的，使用接口。

**现在我的问题：**如果我们继承一个接口，那么我们必须实现它。所以我们正在编写自己的代码，然后我们如何使用继承的核心概念，即通过继承接口实现可*重用性。*

所以看来**通过接口进行多重继承**是**没用**的。如果我错了，那么通过接口进行多重继承有什么用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T20:02:18.733

您混淆了两个不同的概念：

*   类继承，您的类继承基类的成员和行为。基数只能有一个，C#不支持多重继承
*   接口实现，这是一种表达你的类履行的契约的方式。您可以实现任意数量的接口。

所以如果你期望通过实现一个接口来继承行为，当然这似乎没用……实现一个接口只是告诉别人“嘿，我知道该怎么做（某事）”的一种方式。它不会自动提供那个“东西”的实现，那部分取决于你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T19:52:32.200

实现接口是创建一个对象，该对象*保证*执行特定的功能和方法“契约”，使其可被任何期望实现该接口的对象的方法使用。

考虑 Sort 函数的理论 DavidW.IComparer 接口。通用排序可能需要一个支持 DavidW.IComparer 接口的对象，该接口提供两个对象之间的比较。DavidW.IComparer 的一个实现提供了特定的实现，这些实现定义了被排序的两个对象如何在消费者的问题域中相互关联。

接口定义了一个契约，实现者提供了文字管道。这就是价值所在。而且，实际上，您不会“继承”接口....

# java - 如何解析 Yahoo BOSS API 响应

> ID：12655933
> 
> 赞同：0
> 
> 时间：2012-09-29T19:49:26.027
> 
> 标签：java, json, parsing, yahoo-boss-api

我已使用 Yahoo 的以下 Java 代码在以下链接中获取搜索结果响应（转到：Java 示例）：http: [//developer.yahoo.com/boss/search/boss_api_guide/codeexamples.html](http://developer.yahoo.com/boss/search/boss_api_guide/codeexamples.html)

我注册并获得了我的 OAuth 消费者密钥和秘密，并将它们插入到代码中。我得到以下输出

![在此处输入图像描述](../Images/4ced38c9c41f6ced5bfd358281f66597.png)

我对处理 Json 响应和解析它们完全陌生。任何人都可以帮助我如何解析此响应以获得搜索结果？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:15:54.717

您可以尝试使用像[Gson](http://code.google.com/p/google-gson/)这样的库将 Json 响应转换为 Java 对象并轻松使用它。

检查这个以获得简单的教程：

[http://www.javabeat.net/2012/04/parsing-json-using-java-and-gson-library/](http://www.javabeat.net/2012/04/parsing-json-using-java-and-gson-library/)

# pascal - 我在处理完美数字时发现了意想不到的数字

> ID：12655935
> 
> 赞同：0
> 
> 时间：2012-09-29T19:49:32.520
> 
> 标签：pascal

我的代码打印“6 24 24 24 24 28 496”。我不想要24s。我怎么解决这个问题？

```
program perfect;
uses crt;
var i,number,temp:integer;

begin
    clrscr;
    for number:=2 to 999 do begin
        temp:=1;
        for i:=2 to Trunc(number/2) do begin
            if (number mod i = 0) then
                temp:=temp+i;
                if(temp=number) then
                    writeln(number);
        end;
    end;
    readln;
end. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T19:57:57.263

我认为，您需要将`if(temp=number)`零件从内`for`循环中拉出。

由于 1+2+3+4+6+8 是 24，因此您将获得`number=24`and的输出`i=8, 9, 10, 11`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T20:01:09.573

您应该移动 if 语句。代码应该是：

```
program perfect;
var i,number,temp:integer;
begin
    for number:=2 to 999 do begin
        temp:=1;
        for i:=2 to Trunc(number/2) do begin
            if (number mod i = 0) then
                temp:=temp+i;
                //Instead of here
        end;
                //Here
        if(temp=number) then
                    writeln(number);
    end;
    readln;
end. 
```

在那种形式下它工作正常（我得到了 6,28 和 496）

# java - Java中基于控制台的应用程序到基于GUI的应用程序

> ID：12655937
> 
> 赞同：3
> 
> 时间：2012-09-29T19:49:46.657
> 
> 标签：java, swing, sockets, concurrency, event-dispatch-thread

我创建了（通过从 Internet 收集一些代码片段）基于控制台的 LAN 聊天应用程序。现在我想

使用 Netbeans IDE 7.1 制作 GUI。它是一个多线程应用程序。在我基于控制台的应用程序中，每当我想显示输出时，我都会这样做

```
System.out.println(msg) . 
```

现在我想在 JFrame 表单中完成，

```
jTextField1.setText(msg). 
```

我是否需要创建一个新的主类并将创建一个实例 JFrameForm 并通过调用使其可见

```
new NewJFrame().setVisible(true); 
```

或者我应该在 JFrame 类本身中完成所有编码。我在我的实际和工作代码下方（在控制台中）

```
import java.io.DataInputStream;
import java.io.PrintStream;
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.IOException;
import java.net.Socket;
import java.net.UnknownHostException;

public class MultiThreadChatClient implements Runnable {

  // The client socket
  private static Socket clientSocket = null;
  // The output stream
  private static PrintStream os = null;
  // The input stream
  private static DataInputStream is = null;

  private static BufferedReader inputLine = null;
  private static boolean closed = false;

  public static void main(String[] args) {

    // The default port.
    int portNumber = 2222;
    // The default host.
    String host = "127.0.0.1";

    if (args.length < 2) {
      System.out
          .println("Usage: java MultiThreadChatClient <host> <portNumber>\n"
              + "Now using host=" + host + ", portNumber=" + portNumber);
    } else {
      host = args[0];
      portNumber = Integer.valueOf(args[1]).intValue();
    }

    /*
     * Open a socket on a given host and port. Open input and output streams.
     */
    try {
      clientSocket = new Socket(host, portNumber);
      inputLine = new BufferedReader(new InputStreamReader(System.in));
      os = new PrintStream(clientSocket.getOutputStream());
      is = new DataInputStream(clientSocket.getInputStream());
    } catch (UnknownHostException e) {
      System.err.println("Don't know about host " + host);
    } catch (IOException e) {
      System.err.println("Couldn't get I/O for the connection to the host "
          + host);
    }

    /*
     * If everything has been initialized then we want to write some data to the
     * socket we have opened a connection to on the port portNumber.
     */
    if (clientSocket != null && os != null && is != null) {
      try {

        /* Create a thread to read from the server. */
        new Thread(new MultiThreadChatClient()).start();
        while (!closed) {
          os.println(inputLine.readLine().trim());
        }
        /*
         * Close the output stream, close the input stream, close the socket.
         */
        os.close();
        is.close();
        clientSocket.close();
      } catch (IOException e) {
        System.err.println("IOException:  " + e);
      }
    }
  }

  /*
   * Create a thread to read from the server. (non-Javadoc)
   * 
   * @see java.lang.Runnable#run()
   */
  public void run() {
    /*
     * Keep on reading from the socket till we receive "Bye" from the
     * server. Once we received that then we want to break.
     */
    String responseLine;
    try {
      while ((responseLine = is.readLine()) != null) {
        System.out.println(responseLine);
        if (responseLine.indexOf("*** Bye") != -1)
          break;
      }
      closed = true;
    } catch (IOException e) {
      System.err.println("IOException:  " + e);
    }
  }
}

//MultiThreadServer.java

import java.io.DataInputStream;
import java.io.PrintStream;
import java.io.IOException;
import java.net.Socket;
import java.net.ServerSocket;

/*
 * A chat server that delivers public and private messages.
 */
public class MultiThreadChatServer {

  // The server socket.
  private static ServerSocket serverSocket = null;
  // The client socket.
  private static Socket clientSocket = null;

  // This chat server can accept up to maxClientsCount clients' connections.
  private static final int maxClientsCount = 10;
  private static final clientThread[] threads = new clientThread[maxClientsCount];

  public static void main(String args[]) {

    // The default port number.
    int portNumber = 2222;
    if (args.length < 1) {
      System.out
          .println("Usage: java MultiThreadChatServer <portNumber>\n"
              + "Now using port number=" + portNumber);
    } else {
      portNumber = Integer.valueOf(args[0]).intValue();
    }

    /*
     * Open a server socket on the portNumber (default 2222). Note that we can
     * not choose a port less than 1023 if we are not privileged users (root).
     */
    try {
      serverSocket = new ServerSocket(portNumber);
    } catch (IOException e) {
      System.out.println(e);
    }

    /*
     * Create a client socket for each connection and pass it to a new client
     * thread.
     */
    while (true) {
      try {
        clientSocket = serverSocket.accept();
        int i = 0;
        for (i = 0; i < maxClientsCount; i++) {
          if (threads[i] == null) {
            (threads[i] = new clientThread(clientSocket, threads)).start();
            break;
          }
        }
        if (i == maxClientsCount) {
          PrintStream os = new PrintStream(clientSocket.getOutputStream());
          os.println("Server too busy. Try later.");
          os.close();
          clientSocket.close();
        }
      } catch (IOException e) {
        System.out.println(e);
      }
    }
  }
}

//ChatClient.java

/*
 * The chat client thread. This client thread opens the input and the output
 * streams for a particular client, ask the client's name, informs all the
 * clients connected to the server about the fact that a new client has joined
 * the chat room, and as long as it receive data, echos that data back to all
 * other clients. When a client leaves the chat room this thread informs also
 * all the clients about that and terminates.
 */
class clientThread extends Thread {

  private DataInputStream is = null;
  private PrintStream os = null;
  private Socket clientSocket = null;
  private final clientThread[] threads;
  private int maxClientsCount;

  public clientThread(Socket clientSocket, clientThread[] threads) {
    this.clientSocket = clientSocket;
    this.threads = threads;
    maxClientsCount = threads.length;
  }

  public void run() {
    int maxClientsCount = this.maxClientsCount;
    clientThread[] threads = this.threads;

    try {
      /*
       * Create input and output streams for this client.
       */
      is = new DataInputStream(clientSocket.getInputStream());
      os = new PrintStream(clientSocket.getOutputStream());
      os.println("Enter your name.");
      String name = is.readLine().trim();
      os.println("Hello " + name
          + " to our chat room.\nTo leave enter /quit in a new line");
      for (int i = 0; i < maxClientsCount; i++) {
        if (threads[i] != null && threads[i] != this) {
          threads[i].os.println("*** A new user " + name
              + " entered the chat room !!! ***");
        }
      }
      while (true) {
        String line = is.readLine();
        if (line.startsWith("/quit")) {
          break;
        }
        for (int i = 0; i < maxClientsCount; i++) {
          if (threads[i] != null) {
            threads[i].os.println("<" + name + "&gr; " + line);
          }
        }
      }
      for (int i = 0; i < maxClientsCount; i++) {
        if (threads[i] != null && threads[i] != this) {
          threads[i].os.println("*** The user " + name
              + " is leaving the chat room !!! ***");
        }
      }
      os.println("*** Bye " + name + " ***");

      /*
       * Clean up. Set the current thread variable to null so that a new client
       * could be accepted by the server.
       */
      for (int i = 0; i < maxClientsCount; i++) {
        if (threads[i] == this) {
          threads[i] = null;
        }
      }

      /*
       * Close the output stream, close the input stream, close the socket.
       */
      is.close();
      os.close();
      clientSocket.close();
    } catch (IOException e) {
    }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T20:20:22.183

虽然严格来说不是原始问题的一部分，但控制台应用程序和 GUI 应用程序之间存在许多非常重要的区别。

首先，线程模型是不同的，非常重要的是您需要花时间了解什么、在哪里以及如何使用它。

首先，永远不要在[Event Dispatching Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)（又名 EDT）（主 UI 线程）中做任何会阻塞它的事情，例如 IO 操作......如果可能，在另一个线程内的后台执行这些操作或[工人](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)。

永远不要从除 EDT 之外的任何线程更新 UI 组件。 [SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)可以在其中一些情况下提供帮助，当它不能提供帮助时，您需要依赖[SwingUtilities.invokeLater/invokeAndWait](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T20:09:18.757

Java 是一种**面向对象的语言**，所以我认为您应该创建一个类似 ChatFrame 的类，并且这个 ChatFrame 类应该**扩展**JFrame 类。（或者可以有一个 JFrame 的实例，它在“showChatFrame”之类的方法中使用，在这一点上感谢 Hovercraft Full Of Eels！）

所以你可以在这个 ChatFrame 类中编写每个 gui 代码，并在另一个类中编写服务器通信代码。

**使用强大的模块**是一种很好的编码风格。您的软件应该是几个模块，它们**通过接口相互通信**（而不是每次都是真正的 Java 接口）。

您的 Main 类应该只包含 main 方法，并为 Example 创建一个 ServerCommunication 对象，该对象进行通信并使用 ChatFrame 类向用户显示消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T19:57:58.890

我假设 Netbeans IDE 开发应用程序而不是使用 Netbeans 平台。有一篇关于构建聊天客户端的 DZone 博客文章。我认为您需要根据您的问题阅读摇摆。这篇博文使用 AWT，但它对您来说是一个好的开始。

[http://www.javaworld.com/jw-01-1997/jw-01-chat.html](http://www.javaworld.com/jw-01-1997/jw-01-chat.html)

# assembly - 为什么会为“inc qword [rsp]”生成此机器代码？

> ID：12655940
> 
> 赞同：5
> 
> 时间：2012-09-29T19:50:07.473
> 
> 标签：assembly, 64-bit, nasm, machine-code

考虑这个 x64 NASM 语法程序集：

```
inc qword [rax]
inc qword [rcx]
inc qword [rdx]
inc qword [rbx]
inc qword [rsp]
inc qword [rbp]
inc qword [rsi]
inc qword [rdi] 
```

使用 nasm 组装（并与 gnu ld 链接）后，`objdump -d`报告以下内容：

```
4000b0:       48 ff 00                incq   (%rax)
4000b3:       48 ff 01                incq   (%rcx)
4000b6:       48 ff 02                incq   (%rdx)
4000b9:       48 ff 03                incq   (%rbx)
4000bc:       48 ff 04 24             incq   (%rsp)
4000c0:       48 ff 45 00             incq   0x0(%rbp)
4000c4:       48 ff 06                incq   (%rsi)
4000c7:       48 ff 07                incq   (%rdi) 
```

由于设置了 mod 字段，因此生成的代码`inc qword [rbp]`是有意义的。但是，我无法弄清楚`24`组装时的来源`inc qword [rsp]`。我一直在查看[coder64 #xFF](http://ref.x86asm.net/coder64.html#xFF)并没有向我暗示应该生成 24。我显然错过了更高层次的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T19:55:39.043

没有 [RSP] ModR/M 字节。所以它使用 [sib] ModR/M。sib 表示有一个[sib 字节](http://ref.x86asm.net/coder64.html#sib_byte_32_64)，而 0x24 是 RSP 的 sib 字节。

# php - 这个文件是包含文件吗？

> ID：12655943
> 
> 赞同：3
> 
> 时间：2012-09-29T19:50:39.837
> 
> 标签：php

有什么方法可以确定当前文件是“根”文件（由 apache 请求，还是通过 CLI 运行）还是包含文件？

```
basename($_SERVER['SCRIPT_FILENAME']) != basename(__FILE__) 
```

会工作，但它只能基于文件名，而不是整个路径，所以有点hacky。如果有更好，更优雅的方式来做到这一点，我会更喜欢。

* * *

# 一点上下文

我正在编写一个名为[Scaffold](http://github.com/nathggns/Scaffold)的 PHP 5.4+ API 框架，这对于*api first*方法非常有用。当前的问题是，许多编写*api 第一个*应用程序的人，通过应用程序中的类来使用他们的 api。

```
$user = Scaffold::get('/users/nathaniel'); 
```

一个很好的方法是，如果那是实际的 api，而不是随后向服务器发送 Web 请求。这样，您就可以避免 HTTP 协议的开销。

我对如何做到这一点有一个很好的想法，但问题是，我需要知道我是否应该将响应发送到浏览器（编码和所有）或等待手动调用`Scaffold::request`（或其任何别名，`Scaffold::get`被只是其中之一。

我决定这样做的方法是检查应用程序的根文件（通常通过 apache 请求的文件）是否被实际请求，或者是否包含在不同的文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:57:29.137

检查包含的常用方法是在脚本文件中定义一个应该作为入口点的常量，然后让应该包含的文件检查该常量是否存在。如果未定义，则直接执行文件而不是包含文件。

另一种可能执行速度较慢但不需要定义外部常量的方法是使用[debug_backtrace()](http://php.net/manual/en/function.debug-backtrace.php)检查调用堆栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T19:57:56.830

另一种“hacky”方法是设置一个变量 say `$is_included`，并在包含的文件中检查是否`$is_included`设置了。

如下所示。

包括文件（Any.php）：

```
$is_included = true;
include('File.php'); 
```

文件.php：

```
if(!isset($is_included)){
    die('Direct Access not allowed.');
}
// And the code goes here.. 
```

如果我没记错的话，codeigniter 使用类似的东西来直接保护 cmd 行访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T20:02:33.970

我发现了一些对自己有用的东西。这仅是 PHP 5.4+（因为函数反向引用）

```
get_included_files()[0] === __FILE__ 
```

# vba - VBA：整数数组到字符串数组，便于转换

> ID：12655946
> 
> 赞同：1
> 
> 时间：2012-09-29T19:50:58.443
> 
> 标签：vba, excel

我的第一个问题回答得如此之快，以至于我想我会再问一个问题！:)

这对你们来说可能真的很简单，但我似乎无法理解。我正在尝试将一个简单的整数数组转换为字符串数组，因为我遇到的问题很容易交叉字符串而不是 int 数组（或者我认为！）

但这里是到目前为止的代码：

```
 Dim Parent1s() As String
     For i = 1 To ChromoLength.Value
      y = y + Val(MyArray(rnd2, i))
      q = Val(MyArray(rnd2, i))
      Parents1(i) = q
  Next i

 For i = 0 To ChromoLength.Value
 Parent1s(i) = Val(Parents1(i))
 Next i
'Cells(8, 1) = Parent1s 
```

我无法让 Parent1s 生成一个字符串，不断收到不匹配错误 其他所有内容都已正确调暗，导致其余代码在我散列 parent1s 语句时正常工作。

多谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T20:08:20.327

您可以使用该`CStr()`函数将值转换为`Strings`.

```
Sub toString()

    Dim i As Integer
    Dim iStr As String
    i = 5

    iStr = CStr(i)

    MsgBox (iStr)

End Sub 
```

但是，我怀疑您的问题可能是因为您没有使用`Option Explicit`并且遇到了变量命名`Parent1s`以及`Parents1`. 如果您打算让它们如此相似，我强烈建议使用更好的命名约定。否则，以下似乎应该有效：

```
For i = 0 To ChromoLength.Value
     Parent1s(i) = CStr(Parents1(i))
 Next i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T23:12:31.270

如果您尝试使用 `Parent1s(i) = Val(Parents1(i))`转换`Parents1`为字符串，这不是正确的方法。`Val`尝试将可能包含数字和字母的字符串转换为数字双精度数。实际上，假设 Parents1 是标准数据类型，它应该隐式转换为没有问题的字符串。但如果没有，您可以随时使用`Cstr()`.

这可能不是您的问题，但您永远不会维度 Parent1s()。

要标注`Parent1s()`添加此行：

```
Redim Parent1s(0 to ChromoLength.Value) 
```

顺便说一句，如果您实际上已使所有变量变暗并故意选择了名称，则应尝试使用对其他人来说很清楚的变量名称（顺便说一句，这可能意味着一年后您自己）。

将来，也为了帮助我们更好地帮助您，您应该在示例代码中包含变量维度的行，或者具体告诉我们您对每个变量使用的数据类型。

# debugging - regsvr32成功时如何调试实例化失败

> ID：12655948
> 
> 赞同：0
> 
> 时间：2012-09-29T19:51:29.987
> 
> 标签：debugging, dll, instantiation

我的 DLL 使用并静态链接到 msvcr110、msvcp110 和 atl110。Regsvr32 成功。但是，当我通过 progid 实例化时，我得到了错误：

运行时错误：自动化服务器无法创建对象

如何确定导致问题的原因？

# java - 从表中删除空

> ID：12655950
> 
> 赞同：0
> 
> 时间：2012-09-29T19:51:48.947
> 
> 标签：java, swing, jtable

在我的 profgram 的一个特殊阶段，我想更改行 hieght ，这可行，但表中仍有一个灰色的空白区域，如图所示 ![在此处输入图像描述](../Images/58ff1b944366a353b0ea807b82a9c668.png)

我尝试了以下

```
jTable1.setRowHeight(60);

jTable2.setPreferredSize(new java.awt.Dimension(120,225));
jTable2.setMaximumSize(new java.awt.Dimension(120,225));
jTable2.setMinimumSize(new java.awt.Dimension(120,225)); 
```

但桌子的大小没有改变。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T20:08:43.587

看一眼[`JTable.setFillsViewportHeight`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#setFillsViewportHeight%28boolean%29)

表 fillsViewportHeight = false

![没有](../Images/49a08bf0e2ae84d47cd60328ae47480b.png)

表 fillsViewportHeight = true

![和](../Images/7ec3e4686b275eb4000620c091a38d15.png)

# c - 建立与 IRC 的连接

> ID：12655951
> 
> 赞同：3
> 
> 时间：2012-09-29T19:51:52.590
> 
> 标签：c, linux, unix

是否可以使用标准 GCC 库连接到 IRC？

我了解 IRC 协议是一个非常简单的 TCP 协议，它应该不会比连接到另一个控制台难多少。

但是，与只需要 IP 和端口的控制台连接相比，连接到 IRC 时，昵称和频道将是额外的要求。

谁能告诉我一个如何做到这一点的例子？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-30T12:36:31.153

当然，这很容易实现！这是一个非常基本的 TCP 协议。

GCC 只是一个编译器（和一个链接器）。GCC 和 IRC 之间没有直接联系。
要连接到服务器并与之通信，您只需要`sys/socket.h`; 我不会详细介绍，这里有很多关于服务器-客户端 linux C/C++ 程序的示例和教程。

让我们看看并尝试使用`telnet`（命令行 telnet 客户端程序）来理解 IRC 协议。

首先，我们需要建立与服务器的连接（假设它`irc.freenode.net`使用默认端口`6667`）：

```
$ telnet irc.freenode.net 6667 
```

服务器回复：

```
:sturgeon.freenode.net NOTICE * :*** Looking up your hostname...
:sturgeon.freenode.net NOTICE * :*** Checking Ident
:sturgeon.freenode.net NOTICE * :*** No Ident response
:sturgeon.freenode.net NOTICE * :*** Couldn't look up your hostname 
```

现在我们需要发送三样东西`PASS`：`USER`和`NICK`。

`PASS`是一个发送连接密码的命令。在公共服务器（没有任何密码）上，您可以发送`PASS none`.

`USER`是一个命令，它告诉服务器您的用户名、主机名和真实姓名。就像，当你`whois`有人时，你会看到`username@1.2.3.4`他的“真实姓名”。客户端在建立连接后发送的数据。

`NICK`是设置昵称的命令。当然服务器应该知道你的昵称，所以你也应该在连接后立即发送它！

于是，我们建立了联系。现在您必须发送这些命令，只需将它们输入 telnet：

```
PASS none
NICK sorandom29      
USER blah blah blah blah 
```

哇哦，我们有答案了！

```
:lindbohm.freenode.net 001 sorandom29 :Welcome to the freenode Internet Relay Chat Network sorandom29 
```

另一个重要的事情 - 有`PING`和命令，所以如果你很长时间`PONG`没有回答服务器，你就会断开连接。`PONG`

让我们看看它是如何完成的。我们收到一个 PING 请求：

```
PING :lindbohm.freenode.net 
```

然后用相同的参数回答它：

```
PONG :lindbohm.freenode.net 
```

然后，您可能想知道如何加入频道。

```
JOIN #linux 
```

是的，就是这样。

```
:lindbohm.freenode.net 470 sorandom29 #linux ##linux :Forwarding to another channel
:sorandom29!~blah JOIN ##linux
:lindbohm.freenode.net 332 sorandom29 ##linux :Welcome to ##Linux! Freenode's general Linux support/discussion channel. 
```

另一个命令是`PRIVMSG`，它向频道或其他人发送实际消息：

```
PRIVMSG #linux :hello guys! i'm using telnet to connect to irc and that's such a stupid idea, i have to respond to PINGs manually! 
```

所以每个人`#linux`都会看到：

```
<sorandom29> hello guys! i'm using telnet to connect to irc and that's such a stupid idea, i have to respond to PINGs manually! 
```

请注意，a`:`是消息本身之前的前缀。

我想这足以进入 IRC。您可以通过阅读[IRC 协议](https://www.rfc-editor.org/rfc/rfc1459)本身来尝试其他所有内容，尝试使用`telnet`or`nc`然后开始使用基本套接字编写程序。

# php - 在一个id中保存一个变量的多于1个数据

> ID：12655953
> 
> 赞同：0
> 
> 时间：2012-09-29T19:52:20.907
> 
> 标签：php, mysql

我爬了一个网页，例如我爬取了作者（`$author`）和作者的链接。对于一个id，有时有2个作者，当我将它们保存在数据库中时，它们将被分隔在不同的id中，

例如：我得到`$author`和`$link`=`string(14) "Aaron M. Cohen" string(73) "http://example.com/Author/4279758" string(16) "William R. Hersh" string(68) "http://example.com/Author/299122"`

```
===========================================================
|id|web|      author    |            author_link          |
===========================================================
|1 | A |Aaron M. Cohen  |http://example.com/Author/4279758|
|2 | A |William R. Hersh|http://example.com/Author/299122 |
=========================================================== 
```

是否可以将它们保存在同一个 ID 中？如何？提前谢谢你 :) 仅供参考，我想将它们保存在一个 id 中，因为下一个过程是我想将表与其他具有相同的表进行内部连接`web`。如果相同的 id 有两个`web`，它们将被打印两次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T19:56:19.777

不。创建另一个实际包含作者和 id 的 fkey 的表，以使数据库保持[第一范式](http://en.wikipedia.org/wiki/First_normal_form)。

# c# - 如何使方法与 WinRT 线程的委托“WorkItemHandler”匹配？

> ID：12655958
> 
> 赞同：0
> 
> 时间：2012-09-29T19:52:59.260
> 
> 标签：c#, multithreading, windows-8, threadpool

我试图弄清楚 Win8 C# 线程，我知道我应该使用 ThreadPool 类，但我不知道如何编写我的方法来使用它。

```
IAsyncAction MainThread = Windows.System.Threading.ThreadPool.RunAsync(new WorkItemHandler(mainLoop));

public void mainLoop() { ... } 
```

到目前为止，这就是我最好的尝试，它告诉我 mainLoop 没有重载与 WorkItemHandler 委托匹配，但我不知道这意味着什么或如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:10:22.213

这意味着`mainLoop`必须具有以下[签名](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.threading.workitemhandler)：

```
public void mainLoop(
  IAsyncAction operation
) 
```

您可以通过谷歌搜索消息快速解决您不理解的编译器错误，可选择添加`site:stackoverflow.com`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:02:40.713

好吧，你必须有 IAsyncAction 签名，所以我用 lambda 解决了它：

```
await ThreadPool.RunAsync(new WorkItemHandler((IAsyncAction) => workerMethod())); 
```

希望这可以帮助。

# java - 数组的Java类图组合/聚合

> ID：12655961
> 
> 赞同：1
> 
> 时间：2012-09-29T19:53:01.233
> 
> 标签：java, composition, aggregation, class-diagram

考虑以下：

```
class A {}

class B {
    private A[] a;
} 
```

我将如何表示类图`A`之间的关系？如果只保存一个（而不是数组），`B`我会使用组合/聚合，但在这种情况下，我不确定应该做什么。您的帮助将不胜感激！`B``A`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T19:54:30.203

更改对数组的单个引用不会改变组合的含义。

它仍然是一个`composition`..

你的意思是某个类 A由`composition`另一个类 B 的单个实例（一对一映射）或实例列表（一对多映射）组成

# c# - 确定路径是相对的还是外部的

> ID：12655964
> 
> 赞同：0
> 
> 时间：2012-09-29T19:53:31.857
> 
> 标签：c#, asp.net-mvc, url, relative-path, absolute-path

**只是为了让自己清楚 - 我正在寻找一种 ASP.NET MVC 解决方案，而不是 Java 解决方案。**

我的站点中有很多图像 URL，我需要确定它们是 Web 应用程序的相对路径还是绝对路径。

如果 Url 是相对路径，我可以调用一个从相对路径生成绝对路径的函数。

如果 Url 是外部路径，则意味着它已经是完整的绝对路径，因此不需要此函数调用。

我考虑过检查字符串是否以“http”或“www”开头，这意味着它是一个绝对路径，但它与 zaza-bu.blala.fr/coolimage.png 等所有选项都不匹配。

我唯一可以工作的就是尝试访问此函数后生成的 Url。如果 Url 是可访问的 - 它是相对的并且 Url 是有效的，如果不是 - 它是一个绝对路径，我需要在函数调用之前获取字符串，但它太 hacky 和慢。

我为此使用**c# ASP.NET 4**。

提前致谢。

# c# - Debugger.Launch 不工作

> ID：12655965
> 
> 赞同：23
> 
> 时间：2012-09-29T19:53:38.050
> 
> 标签：c#, visual-studio, debugging, .net-4.0

我目前正在尝试为外部启动的进程（而不是从 Visual Studio 内部）启动调试器。我似乎无法真正启动调试器，因为它似乎没有任何反应。在此过程中，我添加了以下代码：

```
Debug.Assert(Debugger.IsAttached == false, "Should be no debugger");
if (!Debugger.IsAttached)
{
    Debug.Assert(Debugger.Launch(), "Debugger not launched");
}
Debugger.Break();
Debug.Assert(Debugger.IsAttached == true, "Debugger should be attached"); 
```

这些断言是为了验证我没有疯。起初，*IsAttached*属性返回 false，正如我所料。然后我调用*Debugger.Launch*，它返回**true**。根据*Debugger.Launch*的 MSDN 文档，它表示只有在成功启动调试器或已附加调试器时才会返回 true。我验证了一个没有附加，所以它一定已经启动了一个。

断点永远不会被击中，并且第二次验证失败（*IsAttached*属性返回 false）。我还尝试在*Debugger.Launch*之后休眠以给它一些时间，但无济于事。

有什么建议么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-10-06T17:42:32.147

我在 Visual Studio 2013 Premium 中遇到了同样的问题。[Eric](https://stackoverflow.com/users/2132357/eric)的[回答](https://stackoverflow.com/a/20463190)让我想到了如何解决它。但是您不需要更改注册表。

1.  转到工具 --> 选项 --> 调试
2.  打开项目并选择即时调试器
3.  如果您在窗口的下半部分看到一个黄色警告，说明正在使用不同于 Visual Studio 的其他调试。如果您看到，请选中所有 Just in Time 复选框以返回 VS 作为调试程序。

就这些！

![选项即时调试器](../Images/e2c537a8caecd637cc3f643c1ea70f84.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-09T04:31:01.350

这是一个蹩脚的答案，因为我在问题中找不到任何对 VS Express 的引用，而且在使用 VS2013 Pro 时我也遇到了同样的问题。

尽管[这篇](https://connect.microsoft.com/VisualStudio/feedback/details/770786/just-in-time-debugging-operation-attempted-is-not-supported#tabs "即时调试，不支持尝试操作")文章说这个问题在 VS2013 中得到了解决，即使你像我一样使用 VS2013，也要寻找那里列出的临时修复选项卡。我用它解决了这个问题。链接中的更多信息。

我将链接[另一篇文章](http://social.msdn.microsoft.com/Forums/vstudio/en-US/9a539c40-1869-44b8-9aed-9f9d7d402d7c/mysterious-vs-jit-debugger-invocation-failure?forum=vsdebug&prof=required "神秘的 VS JIT 调试器调用失败")，让我朝着正确的方向前进，也许它也很有用。

**摘要：**将 Visual Studio Just-In-Time Debugger 注册表项的 AppIDFlags 值从 0x28 更改为 0x8（或根据上面的文章，尝试和错误我猜是 0x20）他们的注册表项是 HKEY_CLASSES_ROOT\AppID\{E62A7A31-6025- 408E-87F6-81AEB0DC9347}

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-15T23:16:56.757

也许这将有助于将来的某人。我有同样的问题，Debugger.Launch 似乎没有做任何事情。结果是其他人登录了我的机器，并且调试器附加提示在他们的环境中启动，而不是我的。我将他们踢出系统并修复了它。

# php - 如何从动态数据库内容构建 SEO 友好的网站 URL？

> ID：12655974
> 
> 赞同：-2
> 
> 时间：2012-09-29T19:55:10.960
> 
> 标签：php, dynamic, web, seo

> **可能重复：**
> [搜索引擎友好的 URL](https://stackoverflow.com/questions/6102129/search-engine-friendly-urls)

我刚刚收集了大量数据，现在我想用这些数据在网站上动态生成内容。为此，我很可能会使用 PHP。

场地规划如下：

一个带有搜索框的静态页面（主页）。根据搜索，将显示多个链接到“详细”页面的链接。详细信息页面将从数据库中的内容填充，并且都使用相同的模板。

想一想主页上的汽车列表，然后单击“大众高尔夫”将把访问者带到一个页面，该页面显示所有从数据库中提取的高尔夫的详细信息。

如何使详细信息页面具有唯一的 URL，以便它们可以被机器人索引？即：www.mysite.com/details/vw_golf

我的假设是，如果我只是重定向到一个模板页面，我最终会得到类似 www.mysite.com/details.php?search=volkswagon_golf 的内容。即使我使用 POST，我也不会有静态 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:06:08.917

我个人认为你应该使用某种框架，默认情况下它们都会这样做（或者至少不需要配置）。我的意思是，虽然它不是一个框架，但您至少可以研究一下[Wordpress](http://wordpress.org/)或[Drupal](http://drupal.org/)。

如果您的计划是在没有任何框架或内容管理系统的情况下自己构建整个网站，那么我会对[Apache`mod_rewrite`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)进行一些研究。如果没有具体问题，很难给你任何代码。如果您也进入，您将需要研究[REGEX](http://www.regular-expressions.info/)`mod_rewrite`。

# c# - 如何将列表中的变量作为另一个列表中包含的类的对象进行比较？

> ID：12655975
> 
> 赞同：0
> 
> 时间：2012-09-29T19:55:36.410
> 
> 标签：c#, list, listview, comparison

列表中包含的类：

```
List<Artists> TopArtistsByTags = new List<Artists>(); 
```

那堂课：

```
public class Artists
{
    public string ArtistName { get; set; }
    public List<string> Tags;
} 
```

我希望`ArtistName`通过比较匹配的项目副本来获得所有信息`List<string> Tags`（也许将这些项目作为类？所以我将它们作为项目和子项目添加到`listView`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:08:53.107

我想这就是你要找的：

```
List<Artists> artists = //the list of artists
var tags = artists.SelectMany(x => x.Tags).Distinct();
foreach (var tag in tags)
{
    var artistsWithThisTag = artists.Where(x => x.Tags.Contains(tag));
    //do something with artistsWithThisTag
} 
```

这样做的性能肯定会得到改善，但只有当你发现这是一个问题时，你才应该关心自己。

# c# - 如何动态获取通用 C# 对象引用

> ID：12655979
> 
> 赞同：1
> 
> 时间：2012-09-29T19:56:07.737
> 
> 标签：c#, entity-framework, reflection

通过我的许多努力，我得到了以下代码执行：

```
var instance = Activator.CreateInstance("Assemblyname", "TypeName").Unwrap();
//Code to fill instance using reflection
DbContext.Set(instance.GetType()).Add(instance);
DbContext.SaveChanges(); 
```

现在我想实现如下代码：

```
var u = DbContext.Users;
var z = from y in u
where y.Email =="some email"
select y; 
```

但我想`u`动态获取，我需要第一段代码来引用内部存在的实体`DbContext`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T19:58:43.023

您可能正在寻找

`DbContext.Set(typeof(User))`

[http://msdn.microsoft.com/en-us/library/gg679544(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/gg679544(v=vs.103).aspx)

还有一个通用版本：

`DbContext.Set<User>()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T09:47:34.227

*   您可以使用[ESQL](https://stackoverflow.com/a/6298081/298573)
*   或者试试[LINQ 动态查询库](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/7d29f8d8-875e-47c5-adb2-eb8756be36c1/#cc1ce970-02da-4b9e-8067-c37a33461c8d)

# javascript - 在 JavaScript 中杀死或重置对象

> ID：12655983
> 
> 赞同：0
> 
> 时间：2012-09-29T19:56:37.640
> 
> 标签：javascript, jquery, jquery-plugins, jquery-events

我正在使用一个名为 thingsslider 的 jQuery 轮播*插件*。它会弹出并通过单击一组六个按钮中的任何一个来激活。您可以从下面看到，当我迭代 JSON 对象中的项目时，我使用迭代变量将事件附加到每个按钮，`b`并将其作为参数提供给`startPanel`轮播的配置选项。所以目标只是在每个按钮对应的幻灯片上启动轮播。

好的。当我加载页面并单击任何按钮时，轮播确实会出现正确的相应幻灯片作为起始幻灯片。但是，当我将轮播的 CSS 设置为`display: none`并单击另一个按钮时，轮播仍然从与页面加载后第一次单击的按钮相对应的幻灯片开始，并且无论此后单击什么按钮都继续这样做。如何真正为每个按钮的点击事件重置轮播？

```
$.each(objectFromJSONFile, function (b, a) {
    $("#start-button" + b).click(function () {
        $('#stories').anythingSlider({
            startPanel: b
        });
    });
}; 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:07:34.327

看起来将[幻灯片索引传递给滑块](https://github.com/CSS-Tricks/AnythingSlider/wiki/Usage)将设置当前幻灯片。在您的示例中您几乎就在那里——只需使用索引变量 ( `b`) 直接调用：

```
$.each(objectFromJSONFile, function (b, a) {
  $("#start-button" + b).click(function () {
    $('#stories').anythingSlider(b);
  });
}; 
```

# sql - 为什么在“dbo”上进行登录映射

> ID：12655984
> 
> 赞同：1
> 
> 时间：2012-09-29T19:56:39.777
> 
> 标签：sql, sql-server, principal

在数据库设计中，'fed' 的用户与登录 'fed' 相比。

```
USE [Design]
SELECT l.name AS login_name, p.name AS [user_name]
FROM sys.sql_logins l JOIN sys.database_principals p ON l.SID = p.SID
WHERE l.name = 'fed' 
```

![在此处输入图像描述](../Images/650b1eea7ee637eda8cf3d6381298777.png)

为什么在 Design 数据库中登录“fed”下的请求选择“dbo”

```
USE [Design]
SELECT USER AS user_name 
```

![在此处输入图像描述](../Images/c781c79c5ac21096d9da60e5a181414d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T21:04:46.853

首先阅读：[创建用户](http://msdn.microsoft.com/en-us/library/ms173463.aspx)

您将 LOGIN 与 USER 混淆了。您的第一个查询是检查 LOGIN 信息，而第二个查询是查看 USER。多个 LOGIN 可以映射到单个 USER，这使得事情更易于管理，例如管理员都映射到数据库所有者用户“dbo”。

**编辑** 只是为了澄清，*仅仅因为*您将列命名为 user_name`p.name AS [user_name]`并不意味着它是。您通过 sys.sql_logins 进行链接，因此您检索的“主体”是登录对象，其`name`属性显然是登录名，而不是`user`.

# c++ - 堆栈类中的赋值运算符问题

> ID：12655986
> 
> 赞同：0
> 
> 时间：2012-09-29T19:57:00.570
> 
> 标签：c++, arrays, templates, stack

我正在`Stack`为数据存储创建一个新类，它使用我的`Array`类作为数据成员。我仍在设置构造函数并遇到赋值运算符的问题。

当我调用我的赋值运算符时，它会连续调用，直到我手动取消程序。

你能帮我找出错误吗？

`Array`如有必要，我可以为该类提供代码，但我认为该错误应该包含在下面的某个地方。

相关代码如下：

**堆栈头代码：**

```
#ifndef STACK_HPP
#define STACK_HPP

#include "Array_H.hpp"

namespace CLARK{
    namespace Containers{

        template <class Type=T> class Stack
        {
            private:
                int m_current;
                Array<Type> m_array;

            public:
            // constructors and destructors:
                Stack(); // default constructor
                // ...
                ~Stack(); // destructor

            // ...

            // modifiers:
                // overloaded operator functions:
                    Stack<Type>& operator = (const Stack<Type>& source); // assignment operator

        };    
    }
}

#ifndef STACK_CPP
#include "Stack.cpp"
#endif

#endif 
```

**堆栈源代码：**

```
#ifndef STACK_CPP
#define STACK_CPP

#include "Stack_H.hpp"

namespace CLARK{
    namespace Containers{

        // constructors and destructors:
        template <class Type>
        Stack<Type>::Stack() : m_array(Array<Type>()) , m_current(0)
        { // default constructor
            cout << "Stack constructor call (default)" << endl;
        }

        // ...

        template <class Type>
        Stack<Type>::~Stack()
        { // destructor
            cout << "Stack destructor call" << endl;
        }

        // ...

        // modifiers:

        // overloaded operator functions:
        template <class Type>
        Stack<Type>& Stack<Type>::operator = (const Stack<Type>& source)
        {// assignment operator
            cout << "Stack assignment operator call" << endl;
            if (this == &source)
                return *this;

            this->Stack<Type>::operator = (source);
            m_current = source.m_current;
            m_array = source.m_array;

            return *this;
        }
    }
}

#endif STACK_CPP 
```

**测试代码：**

```
#include "Point_H.hpp"
#include "Line_H.hpp"
#include "Circle_H.hpp"
#include "Array_H.hpp"
#include "NumericArray_H.hpp"
#include "Stack_H.hpp"
#include "PointArray_H.hpp"
#include "ArrayException_H.hpp"
#include "OutOfBoundsException_H.hpp"

using namespace CLARK::Containers;
using namespace CLARK::CAD;

int main()
{ 

    try
    { 
        Stack<int> testStack; // test default constructor
        Stack<int> testStack2;

        testStack2 = testStack; // test assignment operator 

        return 0; 
    } catch(ArrayException& err) {
        cout << err.GetMessage() << endl;
    }
} 
```

**输出如下所示：**

> 数组构造函数调用（默认）
> 
> 堆栈构造函数调用（默认）
> 
> 数组构造函数调用
> 
> 堆栈构造函数调用
> 
> 数组构造函数调用（默认）
> 
> 堆栈构造函数调用（默认）
> 
> 堆栈赋值运算符调用
> 
> 堆栈赋值运算符调用
> 
> 堆栈赋值运算符调用
> 
> 堆栈赋值运算符调用
> 
> 堆栈赋值运算符调用
> 
> 堆栈赋值运算符调用
> 
> 堆栈赋值运算符调用[无限重复，直到我取消它]

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:01:35.920

调用`Stack<T>::operator=(source)`您正在实施的操作员。所以你最终得到了无限的回避。看起来有点像您想调用基类的赋值运算符，但您的`Stack`类模板没有基类。

由于我注意到您检查了自赋值，请注意进行自赋值检查的赋值运算符要么进行不必要的检查，要么不是异常安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T20:01:50.757

当您这样做时，您正在递归地调用 = 运算符：

```
this->Stack<Type>::operator = (source); 
```

如果您尝试调用基本操作员，您应该尝试：

```
base->operator=(source); 
```

# sql - 连接语句操作顺序

> ID：12655988
> 
> 赞同：27
> 
> 时间：2012-09-29T19:57:17.470
> 
> 标签：sql, sql-server, tsql, join, left-join

鉴于以下3种方式加入

```
select t1.* from t1
left join t2 on t1.fk = t2.pk
join t3 on t2.fk = t3.pk 
```

如果 t2 和 t3 之间的连接失败，是否会返回 t1 和 t2 之间连接成功的行？如果操作顺序是从左到右，我假设不是，但是如果它是从右到左评估的（t3 首先连接到 t2），那么即使前者失败，仍然会返回 t1。

它是如何工作的？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-29T20:04:16.940

`ON`子句的位置控制评估的**逻辑**顺序。

所以首先`t1 LEFT JOIN t2 ON t1.fk = t2.pk`发生。此连接的结果是一个包含所有匹配行的虚拟表，`t1, t2`并且（因为它是左外连接）任何不匹配`t1`的行也将保留为`t2`列的空值。

然后这个虚拟表参与下一个连接。`JOIN t3 ON t2.fk = t3.pk`

任何`t2`不匹配行的记录都不`t1`是第一阶段的虚拟表输出的一部分，因此不会出现在最终结果中。此外，这种内部连接`t2.fk = t3.pk`将失去任何有效地将整个事物转回内部连接的`NULL`价值。`t2.fk`

[Itzik Ben Gan 在这里](https://web.archive.org/web/20140906155258/http://www.sql.co.il/books/insidetsql2008/Logical%20Query%20Processing%20Poster.pdf)很好地解释了逻辑查询处理

# java - 为什么我的 Handler 引用了一个 null Activity？

> ID：12655990
> 
> 赞同：0
> 
> 时间：2012-09-29T19:57:31.917
> 
> 标签：java, android, static, handler, weak-references

在我第一次从干净状态进入应用程序后，在处理程序内部，处理程序处理 MSG_PULLED 操作，但是对 main 的引用为空。弱引用不为空。这怎么可能发生？

受这篇文章的启发：[这个 Handler 类应该是静态的，否则可能会发生泄漏：IncomingHandler](https://stackoverflow.com/questions/11407943/this-handler-class-should-be-static-or-leaks-might-occur-incominghandler)

```
static class MainHandler extends Handler {
    private final WeakReference<MainActivity> wMain; 
    static int angle=0;
    public MainHandler(MainActivity main) {
        super();
        this.wMain = new WeakReference<MainActivity>(main);
    }

    @Override
    public void handleMessage(Message msg) {
        super.handleMessage(msg);
        MainActivity main = wMain.get();
        int what = msg.what;
        if(what == MSG_PULLED) {
            main.startAnim();
        } 
    }
} 
```

以及我如何启动处理程序：

```
static MainHandler mainHandler;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mainHandler = new MainHandler(this);
        mainHandler.sendEmptyMessageDelayed(MSG_PULLED,500);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:27:39.117

您的应用程序中的`Activity`实例会定期销毁并创建新实例，例如在旋转显示器时。

现在在这种情况下应该发生的是旧实例被垃圾收集并且只存在新实例。如果您将旧的保留在周围，则会造成泄漏。

由于`Handler`在没有更多消息（？）之前它们不能被垃圾收集（？），它们可以比`Activity`创建它们的 in 女巫活得更长，这通常会导致泄漏旧的`Activity`（直到`Handler`可以收集），因为`Handler`通常对他们的`Activity`.

您的代码中的方式通过仅保留与不阻止垃圾收集`WeakReference`的弱链接来解决该问题。`Activity`

问题是您`get()`以错误的方式使用该方法：`get()`只会在原始对象存在时返回它。当它消失时，你得到`null`。这里：`Activity`意志存在时它仍然是活跃的（由系统决定）。

这`null`也不是一个大问题：当您`null`的`Activity`实例不再存在时（也许创建了一个新实例，也许它完全消失了），因此您无法再对它做任何有用的事情。即使您还有参考，动画也不会显示。

基本上像下面那样做，你的问题就解决了

```
@Override
public void handleMessage(Message msg) {
    super.handleMessage(msg);
    MainActivity main = wMain.get();

    // message arrived after activity death
    if (main == null) return;

    int what = msg.what;
    if(what == MSG_PULLED) {
        main.startAnim();
    } 
} 
```

`WeakReference`自身 ( ) 不为空，`wMain`因为它本身作为成员变量被强烈引用。只是其中的内容可以/将`null`在某个时候出现。

# app-store - 将单独的 Apple ID 用于 Apple Developer 计划和个人用途有什么缺点吗？

> ID：12655991
> 
> 赞同：6
> 
> 时间：2012-09-29T19:57:53.367
> 
> 标签：app-store

我想报名参加[Apple 的开发者计划之一](https://developer.apple.com/programs/start/standard/)。我没有公司，所以我的“注册类型”是“个人”。虽然我已经有一个 Apple ID 用于在 iTunes 中购买音乐、应用程序等，但 Apple 建议您可能需要为开发者计划创建一个新 Apple ID（[注册过程的第一页显示](https://developer.apple.com/programs/start/standard/create.php)“创建一个 Apple ID -如果您没有 Apple ID 或需要创建新的 Apple ID，请选择此选项，因为您：想要一个专门用于与 Apple 进行业务交易的 Apple ID”）。我想我更愿意这样做。

但我想知道在同一台 Mac 上使用像这样的单独 Apple ID 是否有任何缺点（一个用于开发，一个用于 iTunes 和 App Store 中的个人使用）？

作为一个附带问题，我也不完全了解 Apple ID 和 Apple Developer Account 之间的关系。开发者帐户是否始终与 Apple ID 绑定？还是可以转移到另一个 Apple ID 上（比如你开了一家公司，想把账户的所有权转移给公司）？